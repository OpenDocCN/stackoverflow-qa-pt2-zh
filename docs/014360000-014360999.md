# StackOverflow 问答 14360000-14360999

# java - 如何在 GWT 中禁用 DatePicker？

> ID：14360003
> 
> 赞同：4
> 
> 时间：2013-01-16T13:53:55.113
> 
> 标签：java, gwt

如您所知 com.google.gwt.user.datepicker.client。**DatePicker**没有方法 setEnabled(boolean)。我有带 ValueChangeHandler 的 DatePicker，我需要的只是禁用 datepicker（onValueChange 中的代码不应该工作）。

我当然可以：

> 布尔禁用；
> 
> datePicker.addValueChangeHandler(new ValueChangeHandler() {
> 
> ```
>  @Override
>         public void onValueChange(ValueChangeEvent<Date> event) {
>             if(!disable) {
>                  // my code here
>             }
>         }
>     }); 
> ```

但我不会这样做。我想写这样的东西：

> datePicker.setEnabled(false);

有任何想法吗？

GWT 2.3.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:18:33.063

我有一段时间没有使用 GWT，所以这更像是一个指针而不是一个答案，但我想包含几个链接，所以使用了答案框；）。

DatePicker 是一个[Composite](http://google-web-toolkit.googlecode.com/svn/javadoc/2.3/com/google/gwt/user/client/ui/Composite.html)，所以我认为您不能直接启用/禁用它。但是您可以添加一个预览处理程序来禁用事件，或者在其上放置一个面板（例如，将其变灰）。请参阅此答案以获取相关信息：[禁用 GWT 容器中的用户交互？](https://stackoverflow.com/questions/2061699/disable-user-interaction-in-a-gwt-container)

作为一般说明，从[FocusWidget](http://google-web-toolkit.googlecode.com/svn/javadoc/2.3/com/google/gwt/user/client/ui/FocusWidget.html)扩展的所有内容都是启用/禁用的，但组合是其他小部件的集合，因此它们的工作方式不同。

# android - maven-android-sdk-deployer 更新 .m2 存储库

> ID：14360005
> 
> 赞同：1
> 
> 时间：2013-01-16T13:53:56.083
> 
> 标签：android, maven

我已经使用[maven-android-sdk-deployer](https://github.com/mosabua/maven-android-sdk-deployer)来构建我在项目中使用的库。这很好，但现在我想更新仓库中的库。我想要最新版本的 android，目前我有 4.1.1.4。另外我想将支持库更新到版本 11，因为我需要使用 childFragmentManager。

我运行了 mvn install 和 mvn clean install。但它不会添加我需要的新库。我还用 git pull 更新了部署程序，但仍然是同样的问题

我错过了什么吗？

**编辑**

所以看起来部署者将 android 库放在 .m2 存储库中的 android/android/ 中。但是该项目正在查看 com.google.android 中的库，我该如何更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:06:49.783

您更改项目中的依赖项..

# python - Notify 和 pynotify 有什么区别？

> ID：14360006
> 
> 赞同：5
> 
> 时间：2013-01-16T13:53:56.920
> 
> 标签：python, notify, pynotify

我试图了解 Notify (python wrapper) 和 pynotify 之间的区别。例如 ：

```
from gi.repository import Notify 
```

和

```
import pynotify 
```

创建通知的代码看起来很相似，但似乎我无法使用 python3.3 导入 pynotify。顺便说一句，我找不到使用通知创建带有信号处理程序的按钮的方法。有没有办法可以在 Python3.3 中导入 pynotify 或使用 Notify 创建按钮？
这两个模块有什么区别？
我一直在互联网上搜索，但似乎我对 google u_u 不够熟练
，提前谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T14:19:39.010

它们是相同东西的两个版本：[libnotify](http://developer.gnome.org/libnotify/)的 python 绑定。但`import pynotify`在 gtk2 时代，这是较旧的做法。由于 gtk3 包含[GObject introspection](https://live.gnome.org/GObjectIntrospection)，你应该使用这个`gi.repository`东西（“gi”代表“Gobject Introspection”）。

旧方式和新 GI 方式之间的主要区别在于，使用 GI 无需手动构建 python（或 C#、C++、Vala 或其他）绑定。它是完全自动的，因此您无需等待绑定发布即可使用新版本。它避免了许多由手动处理绑定引起的错误。

# android - ActionBarSherlock 硬键菜单面板文本颜色

> ID：14360017
> 
> 赞同：12
> 
> 时间：2013-01-16T13:54:37.373
> 
> 标签：android, styles, android-actionbar, actionbarsherlock, menuitem

我有一个关于主题化我使用 ActionBarSherlock 的应用程序的小问题。一切正常，除了`Samsung phones with TouchWizz`. 溢出菜单项通过按下硬件菜单键出现。

我知道如何更改面板背景。我的默认主题 extends `Theme.Sherlock.Light.DarkActionBar`，所以硬件面板中的默认菜单项文本颜色将是`black`，我不想更改它。

除了更改我的默认主题的父级之外，关于如何执行此操作的任何想法？

```
<style name="Theme.MyApp" parent="@style/Theme.Sherlock.Light.DarkActionBar">
    <item name="android:panelBackground">@drawable/menu_hardkey_panel</item>
</style> 
```

![在此处输入图像描述](../Images/aa3ca3fadee073bd1244a0ec3ce74a3d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:21:15.383

我不确定我是否理解您想要做什么，但如果您想在此面板中更改 textColor，您可以创建自定义样式，并将父级设置为 TextAppearance.Sherlock.Widget.PopupMenu，然后更改 textColor 属性。像这样：

```
<style name="Widget.MyApp.ActionBarPopupLargeTextColor" parent="TextAppearance.Sherlock.Widget.PopupMenu.Large">
<item name="android:textColor">@color/black</item>
</style>

<style name="Widget.MyApp.ActionBarPopupSmallTextColor" parent="TextAppearance.Sherlock.Widget.PopupMenu.Small">
    <item name="android:textColor">@color/black</item>
</style> 
```

为我工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T11:05:52.527

以下是调整硬件菜单样式的正确属性。你应该看看*panelColorForeground* ;-)

```
<item name="android:panelColorBackground">#FFFFFF</item>
<item name="android:panelColorForeground">@color/primary_text_holo_dark</item>
<item name="android:panelFullBackground">@drawable/menu_background_fill_parent_width_holo_dark</item>
<item name="android:panelTextAppearance">@style/Holo.TextAppearance</item> 
```

*在 HoloEverywhere lib 和 2.3 模拟器上测试。* 有关详细信息，请参阅[attrs 文档](http://developer.android.com/reference/android/R.attr.html#panelColorBackground)。

# c++ - 使用 += 将字符分配给 char 数组

> ID：14360023
> 
> 赞同：0
> 
> 时间：2013-01-16T13:55:01.660
> 
> 标签：c++, pointers, char, arrays

目前我正在写一个相当广泛的家庭作业——除其他外——读取一个文件，构建一个二叉搜索树并输出它。

在其中的某个地方，我编写了一个递归方法来按顺序输出二叉搜索树的值。

```
void output(node* n)
{
if(n->leftChild != NULL)
    output(n->leftChild);
cout << n->keyAndValue << " || ";
outputString += n->keyAndValue << '|';
if(n->rightChild != NULL)
    output(n->rightChild);
} 
```

没问题，但是您会注意到这一行`outputString += n->keyAndValue << '|';`，因为我还希望将所有值都包含在一个 char 数组中（我不允许使用字符串或 C++ 的其他更当前的特性），我以后可以在一个不同的方法（例如 Main 方法）。

Char-Array 声明如下：

```
char *outputString; 
```

这只是我尝试过的方法之一。我还尝试使用`const`关键字并定期构建一个数组`char outputString[]`。使用我向您展示的版本，当稍后在程序中以不同的方法调用以下代码时，我遇到了错误：

`cout << outputString;`

我收到以下错误：

BST.exe 中 0x008c2c2a 处的未处理异常：0xC00000005：访问冲突读取位置 0x5000000000。

关于如何构建动态 char 数组、多次使用`+=`和输出它而不触发访问冲突的任何线索？很抱歉问了一个相当基本的问题，但我对 C++ 完全陌生。

谢谢并恭祝安康，

丹尼斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T13:56:38.417

`+=`on pointers 进行指针运算，而不是字符串连接。最终，您超出了`outputString`指向的数组，并尝试打印它会导致段错误。

由于您不能使用`std::string`，因此您需要与 and`strcat`一起使用`new[]`，`delete[]`并确保将原始数组分配给`new[]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T13:59:59.967

我猜，既然你不能用`std::string`，你也不能用`new[]`。

您可以使用如下函数连接字符串：

```
char *concat(const char *s1, const char *s2)
{
    size_t len = strlen(s1) + strlen(s2);
    char *result = (char*)malloc(len+1);
    strcpy(result, s1);
    strcat(result, s2);
    return result;
} 
```

这可以更有效地完成，但这可能与家庭作业无关。你需要检查错误等等。

您还需要决定谁将`free`调用`s1`和`s2`。

对于它的价值，高效的版本如下所示：

```
char *concat(const char *s1, const char *s2)
{
    size_t len1 = strlen(s1);
    size_t len2 = strlen(s2);
    char *result = (char*)malloc(len1+len2+1);
    memcpy(result, s1, len1);
    memcpy(result+len1, s2, len2);
    result[len1+len2] = '\0';
    return result;
} 
```

它更有效，因为它只遍历输入字符串一次。

# perl - 如何提取div标签

> ID：14360025
> 
> 赞同：2
> 
> 时间：2013-01-16T13:55:04.810
> 
> 标签：perl, parsing

我正在尝试解析一个 html 文件，并且我想提取具有唯一 ID 的外部 div 标记内的所有内容。样本：

```
<body>
  ...
  <div id="1">

    <div id="2">
    ...
    </div>

    <div id="3">
    ...
    </div>

  </div>
  ...
</body> 
```

在这里，我想提取介于两者之间的所有内容`<div id="1">`及其对应`</tag>`的 NOT 第一个`</div>`标签。

我浏览了许多较旧的帖子，但它们不起作用，因为当他们看到`</div>`不是我想要的第一个标签时，它们就停止了。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T13:58:40.563

听起来您的问题是您正在尝试[使用正则表达式解析 HTML](https://stackoverflow.com/a/1732454/19068)。

不。使用 HTML 解析器。CPAN上有很多。我很喜欢[`HTML::TreeBuilder::XPath`](https://metacpan.org/module/HTML::TreeBuilder::XPath)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:09:05.563

[Quentin](https://stackoverflow.com/users/19068/quentin)正确地提到了使用 HTML 解析器来提取`div`内容。[这是使用Mojo::DOM](http://search.cpan.org/~sri/Mojolicious-3.80/lib/Mojo/DOM.pm)的一个选项：

```
use strict;
use warnings;
use Mojo::DOM;

my $text = <<END;
<body>
  ...
  <div id="1">
Under div id 1
    <div id="2">
Under div id 2
    </div>

    <div id="3">
Under div id 3
    </div>

  </div>
Outside the divs
</body>
END

my $dom = Mojo::DOM->new($text);

print $dom->find('div[id=1]')->pluck('text'); 
```

输出：

```
Under div id 1 
```

# tridion - 使用 Tridion Deployer 扩展取消发布页面时，组件详细信息未记录在我的数据库中

> ID：14360031
> 
> 赞同：2
> 
> 时间：2013-01-16T13:55:30.887
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, tridion-storage-extension, tridion-deploy-extension

我正在尝试在我的自定义存储扩展中添加未发布的组件条目。我们知道我们在 Tridion 中没有任何用于 ComponentUndeploy 的基类，因为我们有部署“ComponentDeploy”，所以我正在尝试使用 ComponentPresentationUndeploy 类来跟踪正在获取的组件，下面是我试图跟踪的示例代码.

```
package com.tridion.custom.extensions;

import com.tridion.broker.StorageException;

import com.tridion.configuration.Configuration;
import com.tridion.configuration.ConfigurationException;

import com.tridion.deployer.DeploymentHandler;
import com.tridion.deployer.ProcessingException;
import com.tridion.deployer.Processor;
import com.tridion.deployer.modules.ComponentPresentationUndeploy;

import com.tridion.storage.ComponentMeta;
import com.tridion.storage.StorageManagerFactory;
import com.tridion.storage.StorageTypeMapping;
import com.tridion.storage.dao.ItemDAO;
import com.tridion.storage.dao.ItemTypeSelector;
import com.tridion.storage.dao.PublishAction;
import com.tridion.storage.dao.PublishActionDAO;
import com.tridion.storage.mapper.MapperFactory;
import com.tridion.transport.transportpackage.ComponentPresentationKey;
import com.tridion.transport.transportpackage.ProcessorInstructions;
import com.tridion.transport.transportpackage.TransportPackage;
import com.tridion.util.TCDURI;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.Date;
import java.util.Iterator;

public class SearchComponentUndeployer extends ComponentPresentationUndeploy {
    private static Logger log = LoggerFactory
            .getLogger(SearchComponentUndeployer.class);

    public SearchComponentUndeployer(Configuration paramConfiguration,
            Processor paramProcessor) throws ConfigurationException {
        super(paramConfiguration, paramProcessor);
    }

    @SuppressWarnings("rawtypes")
    public void process(TransportPackage paramTransportPackage) throws ProcessingException 
    {
        ProcessorInstructions localProcessorInstructions = paramTransportPackage.getProcessorInstructions();
        try
        {
            Iterator localIterator = localProcessorInstructions.getArguments();
            while (localIterator.hasNext()) 
            {
                Object localObject = localIterator.next();
                if (localObject instanceof ComponentPresentationKey) 
                {

                        ComponentPresentationKey localComponentPresentationKey = (ComponentPresentationKey) localObject;

                        long[] arrayOfLong = new long[2];
                        arrayOfLong[0] = localComponentPresentationKey.getComponentKey().getId().getItemId();
                        arrayOfLong[1] = localComponentPresentationKey.getTemplateKey().getId().getItemId();

                        int PubID = localComponentPresentationKey.getComponentKey().getId().getPublicationId();
                        String tcmID = Integer.toString(localComponentPresentationKey.getComponentKey().getId().getItemId());
                        log.info("SearchComponentUndeployer -PubID" + PubID);
                        log.info("SearchComponentUndeployer -tcmID" + tcmID);
                        ItemDAO itemDAO = ((ItemDAO) StorageManagerFactory.getDAO(PubID, StorageTypeMapping.COMPONENT_META));
                        log.info("SearchComponentUndeployer -itemDAO"+ itemDAO.getStorageId());
                        ComponentMeta compObject = (ComponentMeta) MapperFactory.mapItemMetaInstance(itemDAO.findByPrimaryKey(PubID, localComponentPresentationKey.getComponentKey().getId().getItemId(),ItemTypeSelector.COMPONENT));
                        log.info("SearchComponentUndeployer -compObject"+ compObject.getTitle());
                        String formatTCMID = String.format("tcm:%d-%s-64", PubID,tcmID);
                        log.info("SearchComponentUndeployer - formatTCMID -"+ formatTCMID);
                        String strIgnorePubIds = "232,481";
                        String strPubId = Integer.toString(PubID);
                        Date lastPublishedDate = compObject.getLastPublishDate();

                        String schemaID = Integer.toString(compObject.getSchemaId());
                        if (!strIgnorePubIds.contains(strPubId)) 
                        {
                            PublishAction publishAction = new PublishAction();
                            publishAction.setAction("DEL");
                            publishAction.setTcmUri(formatTCMID);
                            publishAction.setItemType(16);
                            publishAction.setPublicationID(PubID);
                            publishAction.setLastPublishedDate(lastPublishedDate);
                            publishAction.setSchemaID(schemaID);
                            PublishActionDAO publishActionDAO = (PublishActionDAO) StorageManagerFactory.getDefaultDAO("PublishAction");    
                            log.debug("SearchComponentUndeployer Going to Store bean -" + publishAction.toString());
                            publishAction = publishActionDAO.store(publishAction);
                            log.debug("SearchComponentUndeployer Stored bean -" + publishAction);   
                        }   
                        DeploymentHandler.undeploy(new TCDURI(PubID, 73014444080L, arrayOfLong));   
                }
            }           
        }
        catch (StorageException e) 
        {
          log.error("Could not undeploy component presentation", e);
        }

    }
} 
```

知道为什么我的数据库中没有任何组件条目

**编辑：从我完成的 PageUndeploy 实现中添加了示例代码：**

```
 Object argument = iterator.next();
    if (argument instanceof PageKey) 
    {
        PageKey pageKey = (PageKey) argument;
        TCDURI pageMetaURI = new TCDURI(pageKey.getId() .getPublicationId(), 1168231104576L, pageKey.getId().getItemId());
        PageMeta pageMeta = this.pageMetaHome.findByPrimaryKey(pageMetaURI.getPublicationId(),(int) pageMetaURI.getItemId());
        if (pageMeta == null) 
        {
            DeploymentHandler.undeploy(pageMetaURI);
        } 
        else 
        {

            //Here I need to loop for componentpresentation and get component object

        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T18:04:13.843

你可以试试这个，因为我刚刚从你的输入中取了类名

```
List<ComponentPresentationMeta> lstCompObjects= pageMeta.getComponentPresentationMetas();
if(lstCompObjects != null && !lstCompObjects.isEmpty())
{
    for(ComponentPresentationMeta compMeta : lstCompObjects)
    {
        String compID = Integer.toString(compMeta.getComponentId());
        ItemDAO itemDAO = ((ItemDAO) StorageManagerFactory.getDAO(compMeta.getPublicationId(), StorageTypeMapping.COMPONENT_META));

        ComponentMeta compObject = (ComponentMeta) MapperFactory.mapItemMetaInstance(itemDAO.findByPrimaryKey(compMeta.getPublicationId(), compMeta.getComponentId(),ItemTypeSelector.COMPONENT));

        PublishAction compPublishAction = new PublishAction();
        compPublishAction.setAction("DEL");
        compPublishAction.setTcmUri(compID);                                    
        compPublishAction.setItemType(16);
        compPublishAction.setPublicationID(compMeta.getPublicationId());
        compPublishAction.setLastPublishedDate(compObject.getLastPublicationDate());
        compPublishAction.setSchemaID(Integer.toString(compObject.getSchemaId()));          
        compPublishAction = publishActionDAO.store(compPublishAction);          
    }                           
} 
```

# mysql - 通配符 LIKE 匹配的 MySQL 行为

> ID：14360034
> 
> 赞同：1
> 
> 时间：2013-01-16T13:55:38.337
> 
> 标签：mysql, wildcard, sql-like

我在 TableA 中有以下数据...

```
ID | Text
---------------------------------------------
1  | let's find this document
2  | docments are closed 
```

...如果我执行以下选择...

```
select Text from TableA where Text like '%doc%'; 
```

...我似乎得到了一个奇怪的结果。两行都返回。有了这个选择，它不仅应该返回第 1 行吗？我本来以为..

```
select Text from TableA where Text like 'doc%'; 
```

...会只返回第 2 行。我错过了什么吗？

作为我的搜索工具的一部分，我正在尝试对这些数据运行 3 次单独的搜索。第一个匹配是在字符串的开头查找指定的模式“doc”，其次，我的下一个匹配在字符串的末尾查找相同的模式，第三，确定该模式是否出现在文本中的任何位置- 所以可以有文字围绕它。理想情况下，第一次搜索只会匹配第 2 行，第二次搜索不会返回任何结果，第三次搜索只会返回第 1 行。

这样做的原因是我想尝试了解模式如何匹配字符串。可以更容易地阅读结果，以了解给定行的模式匹配 (a) 的开头，(b) 的结尾，(c) 中间的任何位置。

曾考虑使用正则表达式，但我的数据是 unicode。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T13:58:42.857

不，第一个查询返回两行，因为`%`意味着**0**个或更多字符。因此，如果`doc`是第一个出现在该字段中的东西，它也与该`%doc%`模式匹配。

但是您在第二个查询中是对的，它只会返回第 2 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-11T16:38:52.433

1.  `doc_%`应该在开头匹配它，后面至少有一个字符。
2.  `%_doc`最后应该匹配它，在它之前至少有一个字符。
3.  `%_doc_%`*应该在任何地方匹配它，*前后至少有一个字符。

请注意，这些严格的标准*无法*找到确切的字符串“doc”，即在它之前或之后什么都没有。您可能希望通过放松它来将这种情况包括在查询 #1 中：

1.  `doc%`应该在开头匹配它，后面有任意数量的字符。

# javascript - 地理位置无法正常工作

> ID：14360048
> 
> 赞同：0
> 
> 时间：2013-01-16T13:56:45.593
> 
> 标签：javascript, geolocation

以下代码在控制台中返回：

无法调用未定义的方法“setCenter”

```
this.locateUser = function() {
    if(navigator && navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var latitude = position.coords.latitude,
                    longitude = position.coords.longitude;
                var coords = google.maps.LatLng(latitude, longitude);
                self.map.setCenter(coords);
            });
    } 
```

看起来坐标有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:01:34.683

您的代码块不完整，所以我不得不在这里猜测很多：您正在访问`self.map.setCenter`. 错误消息说“无法调用未定义的方法'setCenter'”，所以虽然`self`定义了，`self.map`但不是。您的代码不包含`self`or的定义`self.map`，因此问题可能出在其他地方。

此外，您不应`self`在代码中声明和用作变量，因为`self`它永远不会未定义（它指的是`window`如果未在本地声明）。改为使用`var that = this;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:00:33.760

试试这样：

```
 map.setCenter(new GLatLng(latitude, -longitude), 13); 
```

# wcf - 有效的 WCF 合同不匹配案例

> ID：14360050
> 
> 赞同：1
> 
> 时间：2013-01-16T13:56:58.157
> 
> 标签：wcf, binding, contract

我有一个托管在 2 台服务器上的 WCF 服务。有一个名为 GetData(param1) 的函数。我将此函数更改为接受 2 个参数，即 GetData(param1,param2)。我更新了 server1 上的服务并更新了客户端代码。

一件奇怪的事情正在发生。尽管功能不匹配，但更新后的客户端代码仍然适用于过时的服务。正在调用该函数并返回结果。如果有帮助，添加的参数是枚举值类型。但是为什么会有这种非确定性的行为呢？它是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:29:49.170

这就是当您以程序方式设计方法时，所有输入参数默认情况下都是可选的，如果您没有明确指定它们，则使用默认值填充它们。假设您有一个具有以下签名的方法：

```
[OperationContract]
void TestMethod(string param1, int param2); 
```

您将获得以下 WSDL：

```
<xs:element name="TestMethod">
     <xs:complexType>
       <xs:sequence>
        <xs:element minOccurs="0" name="param1" nillable="true" type="xs:string" />
        <xs:element minOccurs="0" name="param2" type="xs:int" />
      </xs:sequence>
    </xs:complexType>
  </xs:element> 
```

如您所见， minOccurs 属性的值为 0，这意味着该元素是可选的。因此，即使您添加了新参数，您的方法仍然有效也就不足为奇了。

如果您想避免这种行为，请尝试通过使用 MessageContract 或至少将所有参数包装在容器类中以消息方式设计您的合同。并通过 DataMember 属性明确指定需要哪个参数以及是否允许默认值。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T16:46:54.267

如果你的服务已经安装了不止一次的地方。重新检查您的端点地址以确保其指向正确的托管服务器。

# android - eclipse android关闭ndk自动构建

> ID：14360052
> 
> 赞同：2
> 
> 时间：2013-01-16T13:57:02.393
> 
> 标签：android, eclipse, android-ndk, auto-build

在 Eclipse 中，每次我选择运行->Android 应用程序时，都会执行包括 NDK 在内的完整构建。当我处理 Java 代码时，这既费时又浪费。有谁知道如何关闭这个？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T14:04:50.813

去：

```
Project Properties -> Builders 
```

`CDT builder`复选框是本机构建器。取消选中复选框

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T14:01:54.270

检查`Project - Build Automatically`。它可能已经检查过了。关闭它，您必须手动执行清理/构建

# iphone - FetchRequest 完成时的完成块/回调

> ID：14360055
> 
> 赞同：0
> 
> 时间：2013-01-16T13:57:06.603
> 
> 标签：iphone, ios, objective-c, callback, nsfetchrequest

我的模型类中有一个`FetchRequest`名为`ContentManager`. 它获取了相当多的数据，因此在完成之前屏幕是空白的。在`ViewController`显示获取结果的那个中，我想显示一个加载指示器，所以我想在`FetchRequest`完成时获得一个回调并将其传递给`ViewController`以停止加载指示器。这可能吗？

这是`FetchRequest`课堂上的内容`ContentManager`：

```
- (NSArray*)recipesForMagazine
{
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Recipe" inManagedObjectContext:managedObjectContext];
    [request setEntity:entity];

    NSString* path = [[NSBundle mainBundle] pathForResource:@"magazine_recipe_guids" ofType:@"plist"];
    NSArray* recipeGuids = [NSArray arrayWithContentsOfFile:path];

    NSPredicate* predicate = [NSPredicate predicateWithFormat:@"guid IN %@",recipeGuids];
    [request setPredicate:predicate];

    NSSortDescriptor* sort = [[NSSortDescriptor alloc] initWithKey:@"title" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)];
    [request setSortDescriptors:[NSArray arrayWithObject:sort]];

    [sort release];

    NSError* error = nil;
    NSArray* fetchResults = [managedObjectContext executeFetchRequest:request error:&error];
    [request release];

    return fetchResults;        
} 
```

这里我设置在`ViewController`

`self.magazineRecipes = [[ContentManager defaultManager] recipesForMagazine];`

我想像这样设置 fetchrequest 方法：

`- (NSArray*)recipesForMagazine:(void (^)(BOOL success))block`什么的，所以在`viewcontroller`我可以这样称呼它

```
self.magazineRecipes = [[CTContentManager defaultManager] recipesForMagazine:^(BOOL success) {
    if (success) {
        //stop activity indicator view
    }
}]; 
```

我不知道我的想法是否正确，提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:18:03.347

我会让 viewController 成为`ContentManager`类的代表。所以在`ContentManager.h`我会做类似的事情：

```
 @protocol ContentManagerDelegate()
      -(void) didFetchResults:(NSArray *) results;
      -(void) didResultsFail: (NSError *) error;
    @end

    @interface ContentManager : <SuperClass Name>
    -(id) initWithDelegate: (id<ContentManagerDelegate>) delegate;
    @property (nonatomic, strong) id<ContentManagerDelegate> delegate;
    @end 
```

并在实施中：

```
 -(id) initWithDelegate: (id<ContentManagerDelegate>) delegate
    {
        self = [super init];
        if(self)
        {
           _delegate = delegate;
         }
        return self;
    } 
```

并且在您的`recipesForMagazine`方法中，您可以使用委托`[_delegate didFetchResults: fetchResults]`，如果您愿意，也可以实现将错误传递给委托的方法。在您的`ViewController.h`执行`@interface ViewController.h : UIViewController <ContentManagerDelegate>`和实施中，您应该能够实现`didFetchResults:`将为您提供结果的方法，并且在该方法中您可以停止活动指示器的动画。

# jquery - 在没有插件的情况下点击幻灯片

> ID：14360059
> 
> 赞同：0
> 
> 时间：2013-01-16T13:57:14.963
> 
> 标签：jquery, slideshow, image-gallery

我有一个图片库，我想在单击左/右按钮时更改图像。我知道 Cycle Plugin 上有这个功能，但我不想在我的页面中使用太多插件。所以我试着这样做：

```
$(document).ready(function(){
    $('.gallery a').click(function(){
        var path = 'images/display/'
        var i = 2;
        event.preventDefault();
        $('.lightbox').removeClass('preloader').fadeIn();
        $('.display').html('<img src="'+path+i+'.jpg" />').addClass('imgdisplay');
    });
    $('.leftnav').click(function(){
        i++;
    });
    $('.rightnav').click(function(){
        i--;
    });
}); 
```

显然，它不起作用，但是，为什么？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:37:46.523

```
var i = 2;
var max = 10;
$('.gallery a').click(function(event) {
    var path = 'images/display/'
    event.preventDefault();
    $('.lightbox').removeClass('preloader').fadeIn();
    if ($(this).hasClass('leftnav')) {
      if(i== max) return;  
      i++;
    }
    else {
       if(i==0) return;
        i--;
    }
    $('.display').html('<img src="'+path+i+'.jpg" />').addClass('imgdisplay');
}); 
```

# php - 检查 CSV 日期和时间单元格的日期部分

> ID：14360061
> 
> 赞同：0
> 
> 时间：2013-01-16T13:57:22.313
> 
> 标签：php, datetime, csv

我目前正在使用 php 打开一个 csv 文件，检查包含特定内容的单元格并使用 if-else 来获取特定信息。但是，我需要检查一个单元格是否包含某些信息的一部分。

例如

当前代码：

```
$error_handle = fopen("$reportUrl", "r");
while (!feof($error_handle) )
{
    $line_of_text = fgetcsv($error_handle, 1024);
    if($line_of_text[0] !== "")
        {
            $countErrors++;
        }
}
fclose($error_handle); 
```

我想要的代码：

```
$error_handle = fopen("$reportUrl", "r");
while (!feof($error_handle) )
{
    $line_of_text = fgetcsv($error_handle, 1024);
    if($line_of_text[4] == "$date *")
        {
            $countErrors++;
        }
}
fclose($error_handle); 
```

'*' 表示每行文本的时间不同，因此不能使用，但它是同一单元格的一部分。如何选择日期相同但时间不同的单元格？

仅供参考，日期格式通常为 '15/01/2013 12:06pm'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:59:23.247

使用[strpos](http://php.net/manual/en/function.strpos.php)函数：

```
if(strpos($line_of_text[4], "$date ") ===0) { found } 
```

* * *

想我已经明白了：

我正在使用以下内容：

```
 while (!feof($error_handle) )
        {
            $line_of_text = fgetcsv($error_handle, 1024);
            if(strpos($line_of_text[4], $date) !== false)
                {
                    $countErrors++;
                }
        }
    fclose($error_handle); 
```

这似乎正在工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:05:57.353

您可以将日期和时间的时间戳而不是“15/01/2013 12:06pm”或其他内容存储到文件中，以便您可以检索时间戳并根据需要格式化日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:13:41.313

```
 while (!feof($error_handle) )
        {
            $line_of_text = fgetcsv($error_handle, 1024);
            if(strpos($line_of_text[4], $date) !== false)
                {
                    $countErrors++;
                }
        }
    fclose($error_handle); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T14:26:47.497

您还可以[`SplFileObject`](http://php.net/SplFileObject)将其设置为 CSV 模式，然后[根据您的条件过滤行](http://php.net/CallbackFilterIterator)（单元格索引 4，您的`$date`字符串比较）和计数（请参阅 参考资料[`iterator_count`](http://php.net/iterator_count)）：

```
$rows     = new SplFileObject($reportUrl);
$rows->setFlags($rows::READ_CSV);
$filtered = new CallbackFilterIterator($rows, function ($current) use ($date) {
    return strpos($current[4], "$date ") === 0;
});
$countErrors = iterator_count($filtered); 
```

# android - 从 MGWT (gwt-phonegap) 应用程序中打开外部 Android 应用程序

> ID：14360064
> 
> 赞同：0
> 
> 时间：2013-01-16T13:57:24.810
> 
> 标签：android, cordova, android-intent, mgwt

我试图找出如何通过单击按钮（例如）在 MGWT 应用程序中启动本机 Android 应用程序（使用 PhoneGap 包装到本机 Android 应用程序中）。

我已经按照[您自己的（意图）打开另一个应用程序，](https://stackoverflow.com/questions/2780102/open-another-application-from-your-own-intent)并且使用以下代码片段效果很好：

```
Button openAppButton = (Button) findViewById(R.id.openApp);
openAppButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            // THIS WORKS GREAT         
            Intent i = new Intent();
            PackageManager manager = getPackageManager();
            i = manager.getLaunchIntentForPackage("ch.android.test2");
            i.addCategory(Intent.CATEGORY_LAUNCHER);
            startActivity(i);
        }

    }); 
```

所以基本上如果我点击 app1 中的按钮，它会打开带有命名空间“ch.android.test2”的本机应用程序。

不同之处在于，这仅适用于从另一个本机 Android 应用程序中启动本机 Android 应用程序。我需要的是与使用 MGWT 制作的 PhoneGap 应用程序相同的功能。

我将如何做到这一点？提前感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:40:02.967

使用 phonegap 您可以编写任何本机代码，因此您需要将您指出的代码移动到 Simon 指出的 phonegap 插件中，请参阅：[http://docs.phonegap.com/en/2.3.0/guide_plugin-development_android_index。 md.html#Developing%20a%20Plugin%20on%20Android](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)

之后，您需要使用 JSNI 从 GWT 源代码中调用您的插件。看看 gwt-phonegap 中的 ChildBrowser 实现：[http ://code.google.com/p/gwt-phonegap/source/browse/src/main/java/com/googlecode/gwtphonegap/client/plugins/childbrowser/ ChildBrowserPhoneGapImpl.java](http://code.google.com/p/gwt-phonegap/source/browse/src/main/java/com/googlecode/gwtphonegap/client/plugins/childbrowser/ChildBrowserPhoneGapImpl.java)

# highcharts - 鼠标悬停时的 HighCharts 特定符号

> ID：14360066
> 
> 赞同：1
> 
> 时间：2013-01-16T13:57:28.283
> 
> 标签：highcharts

我想在样条图的每个点上显示不同的符号，仅在鼠标悬停时。

我放 ：

```
plotOptions: {
            marker: {
                enabled: false,
                states: {
                    hover: {
                        enabled: true
                    }
                },
            }, 
```

和

```
series: [{
   name: 'Moyenne',
   data: [{
            x:1351731635000, 
            y:1.0, 
            marker: { 
               symbol: 'url(http://127.0.0.1:8080/images/N.png)'
            }, 
            name: 'MISTRAL (315)'
           },{
            x:1351735233000, 
            y:1.5, 
            marker: { 
               symbol: 'url(http://127.0.0.1:8080/images/SE.png)'
           }] 
```

除非我将启用标记设置为 true（并且始终显示标记），否则它没有任何效果。我尝试了每种组合，将启用值放入每个点数据中，但没有任何效果。

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:33:14.913

您可以通过使用系列对象的标记选项来实现此目的这是一个从 api 示例修改的示例：

```
series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 316.4, 294.1, 195.6, 154.4],
            marker: {
                symbol: 'triangle'
            }
        }, {
            marker: {
                enabled: false,
                states: {
                    hover: {
                        enabled: true
                    }
                },
              symbol: 'url(http://highcharts.com/demo/gfx/sun.png)'
            },
            data: [216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5]
        }] 
```

> 演示[http://jsfiddle.net/km67w/18/](http://jsfiddle.net/km67w/18/)

# javascript - AngularJS - 为价值增加价值

> ID：14360067
> 
> 赞同：3
> 
> 时间：2013-01-16T13:57:41.233
> 
> 标签：javascript, angularjs, addition

是否可以将整数添加到范围变量？

例如

```
<div style="top:{{top + 140}}px">....</div> 
```

如果顶部是 140，它应该给我**“280px”**而不是**“140140px”**

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:37:55.887

并不是说我认为这是最好的方法，但是您可以尝试：

```
<div style="top:{{top * 1 + 140}}px">....</div> 
```

强制 top 变为整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:32:44.143

关于您对@Mathew Berg 的回复：

您遇到此问题的原因是因为您告诉 Angular “top”是一个字符串文字。虽然 Mathew 的方法可以将值解释为整数，但它基本上仍然是一种解决方法。@blesh 说您应该在控制器级别执行此操作是完全正确的。所以...

***这***

```
function myContoller($scope) {
    $scope.top = '1';
}
<div style="top:{{top + 140}}px"></div>
<!-- Output = <div style="top:1140px"></div> --> 
```

***还有这个***

```
function myContoller($scope) {
    $scope.top = 'one';
}
<div style="top:{{top + 140}}px"></div>
<!-- Output = <div style="top:one140px"></div> --> 
```

***以同样的方式处理。***

基本上，您无意中连接而不是预期的算术。

幸运的是，补救措施非常简单。您需要做的就是从您传递的整数中删除括号，然后 Angular 会说“嘿，这是一个数字，让我们做一些数学运算”。

```
eg 
function myController($scope) {
    $scope.top = 140;
}

<div style="top:{{top + 140}}px"></div>
<!-- Output = <div style="280px"></div> --> 
```

您说“Top 在 $scope.dealer 中，我在经销商中使用 ng-repeat="d"。所以正确的是 d.top”，所以您可能需要稍微调整一下才能访问正确的范围，但该解决方案仍然适用。Angular 最棒的事情之一是它可以在其标记语法中固有地处理表达式。希望这将有助于解释导致您的问题的原因，因为 Angular 确实按照您希望的方式工作，正如它应该的那样。=)

# c# - 排队异步任务操作？

> ID：14360072
> 
> 赞同：2
> 
> 时间：2013-01-16T13:57:59.327
> 
> 标签：c#, asp.net, multitasking

我有一个 asp.net Web 应用程序，并以一种形式使用异步进程。

```
Task.Run(async () =>
            {
                foreach (ListItem item in cbListFaculties.Items)
                {
                    if (item.Selected)
                    {
                        service.FinishSyncDepartment(actionId, item.Value);
                    }
                }
            }); 
```

但我想要做的是，如果任务已经开始并且用户再次点击该页面，我想说，该任务还没有停止，所以你不能继续。

我该如何解决这个问题？任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:01:10.483

您应该在 Code Behind 中保留对任务的引用，因此如果`Task`尚未处理，则任务尚未完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:05:43.510

您可以创建`Task`对象（而不是立即运行它）并使用[`IsCompleted`属性](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.iscompleted.aspx)来检查它是否已完成。或者您可以使用一些线程安全对象（静态字段）来标记该任务正忙。

如果您需要任务在页面重新加载期间继续存在 - 您必须以`Task`某种方式保存对该对象的引用（cookie、会话、静态变量、视图状态、缓存、数据库......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:12:41.977

像 0x49D1 写的那样做，但把任务对象放在会话中，不要在网络上使用静态字段。

# android - 如何禁用我的 Android 应用程序的文件关联？

> ID：14360073
> 
> 赞同：1
> 
> 时间：2013-01-16T13:58:06.103
> 
> 标签：android, android-video-player, file-association

我有一个应用程序，它使用第三方视频流播放器（一个活动和很多 .so 依赖项）来播放 HLS 流。

我的问题是，如果有人点击 SD 卡上的视频文件（例如总指挥官），系统会显示潜在视频播放器列表，而我的应用程序在列表中。如何预防？我的应用程序不适用于此操作来播放视频文件。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:12:56.637

> 如何预防？

在清单的某处，您有一个`<intent-filter>`广告`<activity>`，表明您知道如何`VIEW`录制视频文件。删除那个`<intent-filter>`，那应该可以解决这个问题。

# java - 解析文本文件java中的每一行

> ID：14360090
> 
> 赞同：2
> 
> 时间：2013-01-16T13:58:34.490
> 
> 标签：java

我有一个包含以下几行的文本文件：

```
150004|2012|12|15|0|0|3|0|0|-3.2411|83.9962|156.3321|1.1785|205.3125|2.0599
150004|2012|12|15|0|10|3|0|0|-3.4206|85.9575|150.4877|1.4142|226.7578|2.4276
150004|2012|12|15|0|20|3|0|0|-2.2696|86.2675|149.3848|2.1553|225.7031|3.4387 
```

每个'|' 符号表示它有一列。我必须从“|”内的每一行中提取信息 迹象。当我尝试以下代码时：

```
File filer = new File("C:\\Users\\Ali Y. Akgul\\Desktop\\150004_15122012_G.txt");
        try (BufferedReader reader = new BufferedReader(new FileReader(filer))) {
            while (true) {
                String line = reader.readLine();
                if (line == null) {
                    break;
                }
                String[] fields = line.split("|");
                // process fields here
                for(int i=0;i<=fields.length;i++){
                    System.out.println(fields[i]);
                }
            }
        }
} 
```

它给了我：

```
1
5
0
0
0
4
|
2
0
1
2
|
1
2
|
1
5
|
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 76
0
|
0
|
3
|
0
|
0
|
-
3
.
2
4
    at testenv.TestEnv.main(TestEnv.java:31)
1
1
|
8
3
.
9
9
6
2
|
1
5
6
.
3
3
2
1
|
1
.
1
7
8
5
|
2
0
5
.
3
1
2
5
|
2
.
0
5
9
9
Java Result: 1 
```

我怎样才能正确解析它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T14:00:04.620

这是因为[String.split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)使用了[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)。

在正则表达式中，`|`字符是字符的特殊字符含义`either the pattern on the left OR on the right`。它必须用反斜杠 ( `\\`)转义

正确的语法是：

```
String[] fields = line.split("\\|"); 
```

另外，请注意我没有看到 for 循环的问题，但这也需要修复，这就是为什么`ArrayOutOfBoundsException`弹出它丑陋的头......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T14:00:03.900

```
for(int i=0;i<=fields.length;i++) 
```

需要是

```
for(int i=0;i<fields.length;i++) 
```

（'<=' 必须是 '<'）

您的正则表达式的问题也在其他答案中指出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T14:00:20.167

`|`是正则表达式中充当 OR 运算符的特殊字符，您需要使用以下命令转义表达式：

```
String[] fields = line.split("\\|"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-16T14:00:29.173

而不是`for(int i=0;i<=fields.length;i++){`使用 `for(int i=0;i<fields.length;i++){`，所以在条件中使用 < 而不是 <=。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-16T14:05:06.027

尝试这个：

```
Path file = Paths.get("C:\\Users\\Ali Y. Akgul\\Desktop\\150004_15122012_G.txt");

ArrayList<String> lines = Files.readAllLines(file, Charset.defaultCharset());
ArrayList<String []> columns = new ArrayList<>();
for(String line : lines){
    columns.add(line.split('\|'));
}

// Now for each line you have columns.
for(String [] s : columns){ 
    System.out.println(Arrays.toString(s));
}

// To get only the values for column 8 onwards (in response to your comment)
for(String [] s : columns){ 
    String [] sublist = Arrays.copyOfRange(s, 8, s.length);
    System.out.println(Arrays.toString(sublist));
}

// To get only the columns from line 8 onwards
for(int i = 0; i < columns.size(); i++){
    System.out.println(Arrays.toString(columns.get(i)));
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-16T14:01:32.747

您似乎在以下几行中有边界问题：

```
for(int i=0;i<=fields.length;i++){
   System.out.println(fields[i]);
} 
```

应该

```
for(int i=0;i<fields.length;i++){
   System.out.println(fields[i]);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-16T14:00:46.957

应该小于：`for(int i=0;i<fields.length;i++)`

# ruby-on-rails - 检查数据是否已经插入到rails中的数据库中

> ID：14360095
> 
> 赞同：0
> 
> 时间：2013-01-16T13:58:53.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

我正在做一个 ajax 调用来保存数据。现在的问题是用户可能会在不知不觉中提交相同的数据两次，它会变成重复的。是否有任何快捷方式或验证可以放弃用户两次提交或保存相同的数据？

另请注意，当用户第二次提交表单时，created_at,updated_at 不会相同。在我的表中唯一可以唯一的是 ID :) 。

如果我有 10 个表单字段并且直到和 除非我的表单的所有 10 个字段都相同，否则验证器将不会拒绝数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:09:52.133

您可以使用“title”之类的属性并检查它是否对该用户唯一：

```
class SomeModel < AR
  validates_uniqueness_of :title, :scope => [:user_id]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:24:43.150

我认为在服务器端没有合理的解决方案。尝试一个简单的 javascript [disable_with](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-submit_tag)魔法。

# android - 取消接收短信的广播在设备中不起作用

> ID：14360097
> 
> 赞同：1
> 
> 时间：2013-01-16T13:58:54.467
> 
> 标签：android, broadcastreceiver, sms

我的应用程序中有一个广播接收器，它在其中调用该`abortBroadcast()`方法。因此，它取消接收短信的广播并检查特定内容是否可用。如果可用应用程序执行某些任务，否则`clearAbortBroadcast()`调用方法以继续将 SMS 广播到收件箱。我还在清单文件中设置了更高的值作为优先级。

我正在使用 android 2.2 版本来开发应用程序。模拟器一切正常，它为我提供了预期的结果。但是，当我在具有 的手机中测试应用程序时`4.0.4 version (ICS)`，它不起作用。消息广播取消不会发生，并且包含特定内容的每条接收短信都会像普通短信一样到达收件箱。

PS：模拟器一切正常。我已将优先级设置为“999999”。已包含所有权限。

这是代码片段。

```
public class SMSReciever extends BroadcastReceiver{
@Override
public void onReceive(Context context, Intent intent) {

   this.abortBroadcast();

   final String pinNumber = "abcd";
   Bundle bundle = intent.getExtras();
   SmsMessage[] msgs = null;
   String smsMsg = "";
   String replyPhoneNum = "";

   if(bundle != null)
   {
       Object[] pdus = (Object[])bundle.get("pdus");
       msgs = new SmsMessage[pdus.length];

       for(int i=0; i<msgs.length; i++)
       {
           msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
           smsMsg += "SMS From " + msgs[i].getOriginatingAddress();
           smsMsg += "\n";
           smsMsg += msgs[i].getMessageBody().toString();
           smsMsg += "\n";
           replyPhoneNum = msgs[i].getOriginatingAddress();
       }
   }

   if(smsMsg.contains("SecretCode: "+pin+"\n"))
   {

       String[] splitMsg = smsMsg.split("\\n");
       String[] splitFeatures;

       Bundle b = new Bundle();
       splitMsg = smsMsg.split("\\n");

       for(int i=0; i<splitMsg.length; i++)
       {
          if(!(splitMsg[i].equalsIgnoreCase("null")))
          {
           splitFeatures = splitMsg[i].split(":");             

           if(splitFeatures[0].equals("Contact Number"))
           {
               String contactName = splitFeatures[1];
               b.putString("contactname", contactName);     
           }         

          }

          if(splitMsg[i].contains("email"))
          {
              String email = "email";
              b.putString("email", email);
          }
       }

       b.putString("replyPhoneNum", replyPhoneNum);

       Intent i = new Intent(context, NextActivity.class);
       i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
       i.putExtras(b);
       context.startActivity(i);

   } 
   else
   {
       this.clearAbortBroadcast();
   }

}
   } 
```

在 android 清单文件中，

```
 <receiver android:name="SmsReceiver">
     <intent-filter android:priority="999999">
        <action android:name="android.provider.Telephony.SMS_RECEIVED"></action>
     </intent-filter>
  </receiver> 
```

而已。所有其他权限均已正确使用。这在模拟器中工作正常。但不能在设备中工作。

# numbers - 是否可以跨网站集为列表项生成唯一 ID？

> ID：14360101
> 
> 赞同：0
> 
> 时间：2013-01-16T13:59:14.753
> 
> 标签：numbers, field

例如：我有 10 个站点，每个站点都有 5 个列表。从站点 1 开始，我在 listX 中添加了一个项目，现在 id 将类似于“1”并在第 4 个子站点的 listB 中创建另一个项目，所以现在 id 将“2”......所以它必须像这样继续如何实现这一点?

我需要用所有添加的列表项事件来更新它吗？还有如何获得最新的身份证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:56:42.707

我已经用自定义表单尝试过这段代码，它的工作很酷，但认为这可能会产生并发问题

```
 public static void ID()
    {
        if ((field.InternalName.Equals("Field1")))
                                {
                                     {
          string template;
          using (SPSite site = new SPSite(SPContext.Current.Site.Url))
          {
              using (SPWeb web = site.RootWeb)
              {
template = web.Properties["eydtemplate"].ToString();
              }
          }
          if ("eydadvisory" == template)
          {
              SPListItemCollection items = _currentList.Items;
              if (_currentList.ItemCount == 0)
              {
webControl.Field.DefaultValue = (1).ToString();
              }
              else
              {
SPQuery query = new SPQuery();
query.RowLimit = 1;
query.Query = " <OrderBy><FieldRef Name='" + field.InternalName + "' Ascending='FALSE' /></OrderBy>";
webControl.Field.DefaultValue = (Convert.ToInt64(_currentList.GetItems(query).Cast<SPListItem>().FirstOrDefault()[field.InternalName]) + 1).ToString();
              }
          }
      } 
```

# ruby-on-rails - 尝试通过 Rails 中的 wicked_pdf 呈现 PDF 时出现错误“未预编译”js 文件

> ID：14360107
> 
> 赞同：1
> 
> 时间：2013-01-16T13:59:29.300
> 
> 标签：ruby-on-rails, asset-pipeline, wkhtmltopdf, production, wicked-pdf

我在生产服务器上遇到了 wicked_pdf 的问题。我在 _results.pdf.haml 中有这样的代码：

```
#container

= wicked_pdf_javascript_include_tag "pdf_application"
:javascript
  $(document).ready(function(){drawPDFCharts(#{generate_javascript_for_pdf_generator(@poll.answer_count_per_question)}, "container")}); 
```

这是 pdf_application.js

```
//= require jquery
//= require highcharts
//= require poll-pdf-chart-generation.js.coffee 
```

在本地机器和暂存一切都很好，但在生产中出现错误：

```
Started GET "/121-consumer-electronics.pdf" for 94.76.74.170 at 2013-01-16 13:52:53 +0000
Processing by PollsController#show as PDF
  Parameters: {"id"=>"121-consumer-electronics"}
***************WICKED***************
  Rendered polls/_results.pdf.haml (145.7ms)
Completed 500 Internal Server Error in 816ms

ActionView::Template::Error (pdf_application.js isn't precompiled):
    8: 
    9: #container
    10: 
    11: = wicked_pdf_javascript_include_tag "pdf_application"
    12: :javascript
    13:   $(document).ready(function(){drawPDFCharts(#{generate_javascript_for_pdf_generator(@poll.answer_count_per_question)}, "container")}); 
```

这是我的production.rb：

```
# Disable Rails's static asset server (Apache or nginx will already do this)
config.serve_static_assets = true

# Compress JavaScripts and CSS
config.assets.compress = true

# Don't fallback to assets pipeline if a precompiled asset is missed
config.assets.compile = false

# Generate digests for assets URLs
config.assets.digest = true 
```

我不知道如何使它工作，我在这里看到了一些类似的问题，我尝试将此文件添加到预编译数组并重新启动服务器，但它没有帮助。当我得到我在本地机器上编译资产时，没有在生产中编译，并且当我尝试运行它时，这个文件没有被预编译......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:26:40.960

听起来 .js 文件已更改且未重新编译。Rails 3 将 js、css 和样式表编译成一个文件，然后发送给浏览器一次。如果资产目录中的任何内容发生更改，则必须重新编译整个内容。尝试

```
bundle exec rake assets:precompile 
```

祝你好运

鲍勃

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:12:04.150

哪个文件包含您要使用的 javascript 代码？是 poll-pdf-chart-generation.js.coffee 吗？

我不确定 wicked pdf 是否可以使用咖啡文件，但如果我错了，有人可以纠正我。

我相信解决方法是尝试将 poll-pdf-chart-generation.js.coffee 转换为 js 文件并将其添加到 production.rb：

```
config.assets.precompile += ['poll-pdf-chart-generation.js'] 
```

参考：[关于资产管道的 Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)

更改您的 wickedpdf 包含标签以查看预编译的 js 资产：

```
wicked_pdf_javascript_include_tag "poll-pdf-chart-generation" 
```

您还需要预编译资产：

```
bundle exec rake assets:precompile 
```

# c# - MVC，Linq - 排序问题

> ID：14360109
> 
> 赞同：1
> 
> 时间：2013-01-16T13:59:42.897
> 
> 标签：c#, asp.net-mvc-3, linq

我收到此错误：

> DbSortClause 表达式必须具有顺序可比的类型。参数名称：key | 在 System.Data.Common.CommandTrees.ExpressionBuilder.Internal.ArgumentValidation.ValidateSortClause(DbExpression key) 在 System.Data.Common.CommandTrees.ExpressionBuilder.DbExpressionBuilder.ToSortClause(DbExpression key) 在 System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator .OrderByTranslatorBase.TranslateOneLambda(ExpressionConverter parent, DbExpressionBinding sourceBinding, DbExpression lambda) at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, DbExpression& source, DbExpressionBinding& sourceBinding, DbExpression& lambda) at System.Data .Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator。`1.Translate(ExpressionConverter parent, Expression linq) at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq) at System.Data.Objects.ELinq.ExpressionConverter.Convert() at System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption) 在 System.Data.Objects.ObjectQuery `1.GetResults(Nullable`1 forMergeOption) 在 System.Data.Objects.ObjectQuery `1.System.Collections.Generic.IEnumerable<T>.GetEnumerator() at System.Data.Entity.Internal.Linq.InternalQuery`1.GetEnumerator() 在 System.Data.Entity.Infrastructure.DbQuery `1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator() at System.Collections.Generic.List`1..ctor(IEnumerable `1 collection) at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source) 在 MvcMusicStore.Controllers .StoreManagerController.Index(String sortOrder) 在

尝试此代码时

```
var albums = db.Albums.Include(a => a.Genre).Include(a => a.Artist);

            switch (sortOrder) {
                case "Artist desc":
                    albums = albums.OrderByDescending(o => o.Artist);
                    break;
                case "Title desc":
                    albums = albums.OrderByDescending(o => o.Title);
                    break;
                case "Title":
                    albums = albums.OrderBy(o => o.Title);
                    break;
                case "Genre desc":
                    albums = albums.OrderByDescending(o => o.Genre);
                    break;
                case "Genre":
                    albums = albums.OrderBy(o => o.Genre);
                    break;
                default:
                    albums = albums.OrderBy(o => o.Artist);
                    break;
            }

            return View(albums.ToList()); 
```

我找不到对其进行排序的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:02:51.353

你说`.Include(a => a.Artist);`的也一样`.OrderByDescending(o => o.Artist);`。如果您尝试按会导致错误的*对象进行排序。* `Artist`你可能想要这样的东西：

```
albums = albums.OrderByDescending(o => o.Artist.Name); 
```

我假设 an`Artist`有一个`String`property `Name`，但也许它被称为不同的东西。同样适用于`Genre`：

```
albums = albums.OrderByDescending(o => o.Genre.Name); 
```

通常，您需要按原始值而不是整个对象进行排序。

# php - 对 SSL 的 Soap 客户端调用

> ID：14360111
> 
> 赞同：0
> 
> 时间：2013-01-16T13:59:50.377
> 
> 标签：php, zend-framework, soap, ssl

我正在尝试从 HTTPS 服务器获取 WSDL 的内容

```
<?php
echo file_get_contents("https://zendsoap.lan/Zend_Soap_Server.php?wsdl");
?> 
```

它返回：

警告：file_get_contents() [function.file-get-contents]：SSL 操作失败，代码为 1。OpenSSL 错误消息：错误：1408E0F4:SSL 例程：func(142):reason(244) in /Applications/AMPPS/www/ zendSoap.lan/Zend_Soap_Client.php 在第 4 行

警告：file_get_contents() [function.file-get-contents]：无法在第 4 行的 /Applications/AMPPS/www/zendSoap.lan/Zend_Soap_Client.php 中启用加密

警告：file_get_contents(https://zendsoap.lan/Zend_Soap_Server.php?wsdl) [function.file-get-contents]：无法打开流：/Applications/AMPPS/www/zendSoap.lan/Zend_Soap_Client.php 中的操作失败在第 4 行

并且当我可以转到 WSDL 位置 (https://zendsoap.lan/Zend_Soap_Server.php?wsdl) 时：一切看起来都很好。

PS：谁能告诉我如何共享 WSDL 文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:28:56.890

我同意 RockyFord 关于这是一个 SSL 问题的观点（我很确定您将拥有一个自签名证书，并且由于使用 SSL，您需要采取一些步骤来最大程度地减少安全问题）。关于眼前的问题，您可以尝试使用类似以下的代码来修复它：

```
$url = 'https://zendsoap.lan/Zend_Soap_Server.php?wsdl';

$contextOptions = array(
    'ssl' => array(
        'verify_peer' => true,
        'CN_match'    => 'zendsoap.lan' // assuming zendsoap.lan is the CN used in the certificate
    )
);

$sslContext = stream_context_create($contextOptions);

$wsdlContent = file_get_contents($url, NULL, $sslContext); 
```

（**更新：** *将上面的代码更改为*

```
 'verify_peer' => false 
```

*虽然它对于基本开发来说可能没问题，但这并不是一个好主意，绝对不应该在生产环境中使用，因为它会引入严重的安全问题 - 请参阅这篇关于[如何从 PHP 代码中通过 SSL 正确保护远程 API 调用的优秀文章Artur Ejsmont](http://artur.ejsmont.org/blog/content/how-to-properly-secure-remote-api-calls-from-php-application)了解有关此主题的更多信息以及OWASP的[传输层安全备忘单](https://www.owasp.org/index.php/Transport_Layer_Protection_Cheat_Sheet#Rule_-_Use_an_Appropriate_Certification_Authority_for_the_Application.27s_User_Base)和[保护 Web 服务](https://www.owasp.org/index.php/Web_Services#Securing_Web_Services "保护 Web 服务")*）

要了解关于在 Zend Framework 应用程序中共享 WSDL 的观点，您可以执行以下操作来开始：

```
// go to application/configs/application.ini
// if your APPLICATION_ENV is development then add the following line in the development section:
phpSettings.soap.wsdl_cache_enabled = 0 
```

上面的行将防止您的 wsdl 在开发过程中被缓存。接下来，您可能想要创建一个 SoapController 并添加此操作，如下所示：

```
public function serverAction()
{
    $baseUrl = 'http://zendsoap.lan/soap/server';

    if( isset( $_GET['wdsl'] ) ) {
        $strategy = new Zend_Soap_Wsdl_Strategy_AnyType();
        $server = new Zend_Soap_AutoDiscover($strategy);
        $server->setUri($baseUrl);
        $server->setClass('Application_Model_Web_Service');
        $server->handle();
    } else {            
        $server = new Zend_Soap_Server($baseUrl . '?wsdl');
        $server->setClass('Application_Model_Web_Service');
        $server->handle();
    }
} 
```

上述方法的好处是 WSDL 将为您即时生成。您会注意到 setClass() 方法将被调用，并且将“Application_Model_Web_Service”作为唯一参数传递。要测试您的配置，我建议您创建该类并插入下面的方法。使用包含单一方法的简单服务测试您的配置将帮助您在使服务变得更复杂之前进行故障排除。这是示例方法：

```
// Note: you should definitely comment your methods correctly in the class so 
// the WSDL will be generated correctly - by that I mean use @param and @return
// so the correct input and output types can be determined and added to the WSDL
// when the the ZF component generates it for you
/**     
 * @return string
 */
 public function getMessage()
 {
     return 'ok';
 } 
```

（**更新：** *同样针对您提出的关于使用*Zend_Soap_Client*访问 Web 服务的问题，因为看起来您打算使其成为安全服务，我建议您提出一个关于设置安全肥皂服务的单独问题php. 如果您在该问题中解释更多有关您尝试做什么的信息，您可能会从一系列专家那里获得有关最佳实践的一些很好的意见:-)*

)

我知道您是 SO 的新手，所以如果您对答案感到满意，您可以接受它，通常最好只回复一个答案，而不是添加另一个答案来回复。当你知道当然很容易，当有人告诉你时更容易;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:17:30.967

我尝试了您定义 Soap 服务器的方式，唯一的事情是我使用了我的自定义类而不是使用 Application_Model_Web_Service。我正在为客户端和服务器使用单个文件。当我在没有 ?wsdl 的情况下运行[https://zendsoap.lan/Zend_Soap_Server.php](https://zendsoap.lan/Zend_Soap_Server.php)时，结果如下：

```
<SOAP-ENV:Envelope>
 <SOAP-ENV:Body>
  <SOAP-ENV:Fault>
   <faultcode>WSDL</faultcode>
  <faultstring>SOAP-ERROR: Parsing WSDL: Couldn't load from 'https://zendsoap.lan/Zend_Soap_Server.php?wsdl' : failed to load external entity "https://zendsoap.lan/Zend_Soap_Server.php?wsdl"
  </faultstring>
  </SOAP-ENV:Fault>
 </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

当我按照你所说的方式尝试 file_get_contents() 时，我得到了这个：

```
Warning: file_get_contents() [function.file-get-contents]: SSL operation failed with code 1\. OpenSSL Error messages: error:14090086:SSL routines:func(144):reason(134) in /Applications/AMPPS/www/zendSoap.lan/https_soap_test.php on line 16

Warning: file_get_contents() [function.file-get-contents]: Failed to enable crypto in /Applications/AMPPS/www/zendSoap.lan/https_soap_test.php on line 16

Warning: file_get_contents(https://zendsoap.lan/Zend_Soap_Server.php?wsdl) [function.file-get-contents]: failed to open stream: operation failed in /Applications/AMPPS/www/zendSoap.lan/https_soap_test.php on line 16 
```

这是我的证书截图的链接：http: [//i.stack.imgur.com/bKoVD.png](http://i.stack.imgur.com/bKoVD.png)

非常感谢您的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T19:53:48.977

通过更改 'verify_peer' => false 解决了问题

如果我在没有 file_get_contents() 的情况下使用 Zend_Soap_Client，您能否 (@dkcwd) 告诉我应该是什么代码。我的意思是有什么我在互联网上找不到的选项来做类似于'verify_peer' => false 的事情。

非常感谢@dkcwd

**更新：**让我总结一下我到底在做什么，我正在尝试通过 SSL 创建一个基本的 SOAP 服务器。在我的生产网站上提供 Web 服务之前，我必须在具有自签名证书的开发系统上对其进行测试（现在谁的身份验证是一个问题）。以下是我在这方面面临的问题：

1.  当我尝试调用[https://zendsoap.lan/Zend_Soap_server.php?wsdl](https://zendsoap.lan/Zend_Soap_server.php?wsdl)时，它工作正常，我可以查看 wsdl。
2.  但是当我尝试[https://zendsoap.lan/Zend_Soap_server.php](https://zendsoap.lan/Zend_Soap_server.php)时，我得到了这个：

    SOAP-ERROR: Parsing WSDL: could't load from 'https://zendsoap.lan/Zend_Soap_Server.php?wsdl' : failed to load external entity "https://zendsoap.lan/Zend_Soap_Server.php?wsdl" 是吗我应该是的东西

3.  我在开发服务器上运行 verify_peer=>false 的原因是不需要验证我自己创建的证书，但显然在生产中我希望验证证书。

这个东西在 NuSoap 上工作得很好，但是 NuSoap 中的大部分东西对于我们运行 PHP 5.4.6 的服务器来说已经被弃用了，所以对我来说使用 PHP 的 SOAP 扩展是最可靠的解决方案。我使用**Zend**的原因是我们正在将我们的系统从某个第三方框架迁移到 Zend 框架，并且每天我都会收到来自客户端的请求以添加这个和那个新组件，我假设如果我开发来自客户端的每个新请求使用 Zend 库之后，我很容易在后期迁移到 Zend 框架。

我希望我在那里有所了解。

提前谢谢了...

# intellij-idea - IntelliJ IDEA 用鼠标后退/前进

> ID：14360112
> 
> 赞同：18
> 
> 时间：2013-01-16T13:59:59.063
> 
> 标签：intellij-idea

[我想使用我拥有的两个附加（“虚拟”）鼠标按钮（ RAZER DEATHADDER BLACK](http://www.razerzone.com/gaming-mice/razer-deathadder-black/) ）在编辑器选项卡之间向后/向前移动。

在 Eclipse 中，默认情况下它是可能的。

在 IDEA 中，我转到`File`-> `Settings`-> `Keymap`-> `Main menu`-> `Window`-> `Editor Tabs`。
我有`Select Next Tab`默认`Alt+Right`快捷方式。

然后我打开`Add Mouse Shortcut`.
在那个对话框中，我尝试分配`back`鼠标按钮但没有成功。**它根本没有反应。**

无论如何，谷歌搜索一下我找到[了这个](http://youtrack.jetbrains.com/issue/IDEA-76787)线程。我引用`Alexey Gopachenko`的似乎是 IntelliJ 的员工：

> 如上所述 - 如果您的平台上的 JDK 不支持按钮，我们将无法支持按钮 - 显然它不支持。

无论如何，这是完全错误的。我的平台确实支持这些键——我实际上在同一个平台上使用它们，在 Eclipse 和任何其他应用程序上，所以忽略它们的是 IDEA。

我会申请一个解决方案 - 我如何分配这些后退/前进鼠标按钮？

**更新 #1** 我发现**IDEA 使用自己的 JAVA 发行版**（`C:\Program Files (x86)\JetBrains\IntelliJ IDEA 11.1.4\jre`在 Windows 7 上），而不是系统的发行版 - 为什么？！
我几乎可以肯定这就是我不能使用扩展鼠标按钮的原因。
我试图通过创建自定义 Windows 快捷方式来欺骗 IDEA。没用。我还尝试在 Windows 中为我的其他系统范围的 JRE 分发创建一个 SYMLINK。也没有用。
如果有人想出一个如何让它与系统的 JRE 而不是自己的 JRE 一起工作的想法——我认为这会解决问题。

**更新#2** 上述更新#1 不是问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-03-09T13:58:47.490

我在 OS X El Capitan 下也遇到了同样的问题。我只是尝试添加一个新的键盘快捷方式，然后按下鼠标上的按钮 4，这很有效。

![查看截图](../Images/55b499e14ceeac25ac3fa4fd34093065.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T14:54:48.203

`Back`/`Forward`鼠标快捷方式对我来说可以很好地使用 Razer Mamba 鼠标，例如，**后退**操作被分配给**Button4 Click**，当我单击 Click Pad 区域时，我可以确认它在此对话框中被识别：

![鼠标快捷方式](../Images/111a3193ab72426aed00a26d44b7cfc9.png)

如果由于某种原因它不能与您的鼠标一起使用，您可以尝试使用 Razer Configurator 宏或按键分配来解决该问题：

![雷蛇](../Images/5c7ecb34d012f44403e43de027aaa533.png)

使用 IDEA 键盘映射设置中分配的键而不是鼠标快捷键。

* * *

注意 Eclipse 是基于 SWT 而 IDEA 是基于 Swing，所以鼠标事件管理是完全不同的。如果 JDK 无法识别您的设备按钮点击，它将无法在任何 Java Swing 应用程序（NetBeans、JEdit 等）中工作。在某些情况[下，在更新的 JDK 版本下运行 IDEA](http://blogs.jetbrains.com/idea/2006/08/running-mustang/)可能会有所帮助（如果在更新的 JDK 版本中添加了对您设备的支持）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-17T16:09:13.160

我突然经历了完全相同的事情。我意识到我最近的改变是开始使用idea64.exe 而不是idea.exe。我切换回来，我的鼠标按钮又可以正常工作了。因此，虽然这不是一个完整的答案，但它似乎与 64 位版本有关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-07T00:02:08.263

如果 Razer 驱动程序的按钮映射功能不允许对特定程序进行不同的映射，您只需将按钮分配给鼠标按钮编号选项（鼠标按钮 4/鼠标按钮 5），然后安装支持映射的第三方应用程序对于特定程序，例如[https://superuser.com/questions/562972/how-to-map-bind-mouse-button-as-keyboard-button-in-windows-7](https://superuser.com/questions/562972/how-to-map-bind-mouse-button-as-keyboard-button-in-windows-7)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-07T13:03:06.727

尽管我有一个罗技马拉松鼠标 M705，但这个问题对我有帮助，所以我想我会分享解决方案，以防其他罗技所有者正在寻找这个。

我对罗技鼠标和idea64.exe 有类似的问题

幸运的是，他们的 SetPoint 软件允许程序特定的设置。每当您更新 IntelliJ 并获得新的idea64.exe 时，都必须删除并重新配置此设置 :-)

[![罗技鼠标的应用程序特定设置](../Images/f37d928ee474ef52141b207553f6f9ab.png)](https://i.stack.imgur.com/brea4.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-07T10:58:47.740

[在这里](http://docs.bettertouchtool.net/docs/normal_mice_problems.html "鼠标键嘟​​嘟")查看来自 BetterTouchTool 的这个小教程。基本上，对于使用它们附带的设置应用程序的某些鼠标（例如 Logitech 的鼠标），您可以将默认按钮操作映射到单击，然后设置按钮编号并正常使用它。

这适用于我的 Logitech Performance MX 鼠标。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-01T02:21:29.770

我遇到了一个非常相似的问题，并想分享我的发现。我刚买了一个新的罗技 M705 鼠标。在 intelli-j 中，向右滚动和向左滚动按钮不起作用。前进和后退按钮也不起作用。

我通常以管理员身份运行 intelli-j，因为我需要更高的权限来运行各种 tomcat 服务。以该用户身份登录（而不是右键单击并选择以管理员身份运行）时，所有按钮都起作用！此外，当以我的普通用户身份运行时，所有按钮都可以工作。

另外很好奇的是我有一个老一代的罗技鼠标（同型号，M705）。该鼠标在滚动按钮和前进后退方面没有问题。

我现在的解决方案是使用 intelli-j 作为我登录的用户。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-16T14:06:54.990

您可以添加鼠标快捷方式，只需单击键盘映射中的操作并添加鼠标快捷方式。

或者`Ctrl`+`Tab`调出切换器，这可能会减少导航的点击次数。

# android - 活动 - 共享数据（单例数据类）

> ID：14360121
> 
> 赞同：1
> 
> 时间：2013-01-16T14:00:21.017
> 
> 标签：android, memory-management, android-activity, nullpointerexception

我正在构建一个新的 android 应用程序，它通过不同的活动使用来自服务器的数据。

目前我有 2 个活动，主要的活动连接到服务器并使用来自服务器的数据创建单例对象（为所有活动共享）。

显然我有一个保存在单例类中的数据实例，并从静态方法中获取对象。

我知道这不是在活动之间实现共享数据的最佳方式 - 我可以通过意图传递它们（但我计划创建更多使用相同数据的 3-4 个活动，所以为什么在你可以拥有的时候传递它们它们在应用程序的全局静态上下文中）。

这个实现让我遇到了这个**问题**：当用户在第二个活动中切换到另一个应用程序时，我的应用程序在后台停留了一段时间，android 释放了应用程序使用的内存，当返回到它时，我得到 null使用单例对象的字段之一时出现指针异常！

我通过返回主活动（如果对象为空）来重新创建数据来解决问题，但这会使活动在每次被销毁时重新连接（这不是最佳的，因为服务器上的数据变化不大）。我知道我必须在每次返回活动时保存服务器数据 onDestroy 并重新创建对象，但这必须发生在每个活动上，数据大约 4-5KB 意味着它需要写入文件，并且解析需要时间（访问手机SD卡）。

我开始考虑使用 Parcelable 对象通过意图共享数据 - 我认为 android 可以自动并以最佳方式保存和恢复意图的数据。（参考：[http](http://bimbim.in/post/2010/09/27/Android-Passing-object-from-one-activity-to-another.aspx) ://bimbim.in/post/2010/09/27/Android-Passing-object-from-one-activity-to-another.aspx ）

问题是，意图会解决我的问题吗？还有其他方法吗？更好、更快的方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:19:49.393

我确信这个问题与活动的生命周期有关。当 Android 杀死你的 Activity 时，你可以使用主 Activity 的`onRestoreInstanceState()`方法将数据保存为一个包，因此当再次重新创建 Activity 时，你可以在 Activity 的`onCreate()`方法上恢复数据（参见[此处](https://stackoverflow.com/questions/4096169/onsaveinstancestate-and-onrestoreinstancestate)作为示例）。您也可以`SharedPreferences`在您的活动`onResume()`和`onPause()`方法中使用。使用这两种方法，想法是相同的：您将对象/数据临时保存在磁盘上，然后再将其恢复。

# aggregate-functions - 点对点和隐私感知的数据挖掘/聚合算法：可能吗？

> ID：14360122
> 
> 赞同：3
> 
> 时间：2013-01-16T14:00:25.197
> 
> 标签：aggregate-functions, data-mining, p2p, privacy, computation-theory

假设我有一个`N`节点网络，每个节点都有一个唯一的身份（例如公钥），与无中央服务器的协议（例如 DHT、Kad）进行通信。每个节点存储一个变量`V`。以电子投票为例，该变量可以是候选人的姓名。

`V`现在我想对网络中所有可用的变量执行“聚合”函数。参考电子投票示例，我想计算选票。

我的问题完全是理论上的（我必须证明一个陈述，问题末尾的细节），所以请**不要专注**于电子投票及其所有安全方面。我必须再说一遍吗？不要回答我说“一个节点可以通过生成更多的密钥来拥有任意数量的身份”、“IP 可以追溯”等，因为那是另一回事。

让我们只从**隐私来看分布式聚合**的角度来看分布式聚合。

### 问题

有没有可能，*一般情况下*计算存储在其他节点上的变量的函数，而不会将它们的值与节点的身份相关联？研究人员是否设计了这种具有隐私意识的分布式算法？

我只处理隐私方面，**而不是**一般安全！

### 目前的想法

我目前的回答是**否定**的，所以我说中央服务器获取所有`V`s 并在不存储的情况下处理它们是必要的，并且有比技术手段更合法的方法来确保中央服务器不会存储或重新传输任何单个节点的数据。我要求证明我之前的陈述是错误的:)

在电子投票的例子中，我认为不可能统计有多少人投票，`Alice`而`Bob`不是一一询问所有节点，“嘿，你投票给谁？”

### 真实案例

我正在研究*个人数据存储*领域。假设您将通话记录存储在 PDS 中，并且有人想要找到有关电话通话的统计值（即平均持续时间、每天通话次数、方差、标准差），而不会透露有关个人的汇总或准时数据（*即是*，没有人必须知道我给谁打电话，也不知道我自己的平均通话时间）。

如果存在受信任的代理，并且每个人都信任它，那么该节点可以公开一个API，该 API 首先在网络中的每个 PDS 上`double getMeanCallDuration()`调用，然后对所有行进行统计。`CallRecord[] getCalls()`如果没有中央可信代理，每个暴露的 PDS`double getMyMeanCallDuration()`在统计上都是不可用的（平均值不应该是所有的平均值……），最重要的是揭示单个用户的身份。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-08T02:20:16.953

对的，这是可能的。考虑到一些假设，有些工作实际上可以回答您解决问题的问题。查看以下论文：[大规模星型网络聚合计算中的隐私、效率和容错](http://ieeexplore.ieee.org/document/7368608/)。

您可以在另一个节点上对一组节点进行一些计算（例如求和），而无需让参与者节点显示它们之间的任何数据，甚至不显示正在计算的节点。在计算之后，每个人都知道结果（但没有人知道除了他们自己的数据之外的任何个人数据，他们已经知道了）。该论文描述了协议并证明了它的安全性（协议本身为您提供了我刚刚描述的隐私级别）。

至于保护节点的身份以将其价值与其身份脱钩，那将是另一个问题。您可以使用匿名凭据（检查此：[https](https://idemix.wordpress.com/2009/08/18/quick-intro-to-credentials/) ://idemix.wordpress.com/2009/08/18/quick-intro-to-credentials/ ）或类似的东西来表明你是谁，而无需透露你的身份（在分布式场景中）。

该协议的问题是您需要一个半可信节点来进行计算。但是，完全分布式的协议（例如，在 P2P 网络场景中）并不是那么容易。不是因为缺少存储（例如，你可以有一个 DHT），而是你需要用网络替换那个受信任或半受信任的节点，那就是当你发现问题时，谁来做？为什么是那个而不是另一个？如果有勾结怎么办？ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:39:43.250

每个节点何时发布两组数据`x` 和怎么样`y`，这样

```
x - y = v 
```

假设我可以独立发出`x`，`y`您可以正确计算总体*均值*和*总和*，而每条消息在很大程度上毫无价值。

因此，对于投票示例和候选人 X、Y、Z，我可能有一个身份发布投票

```
+2   -1   +3 
```

我的第二个身份发布了投票：

```
-2   +2   -3 
```

但是你当然不能证实我没有多次投票了。

# oracle-adf - 将 FindBugs 与 Jdeveloper 集成的最佳方式是什么？

> ID：14360124
> 
> 赞同：0
> 
> 时间：2013-01-16T14:00:27.473
> 
> 标签：oracle-adf, jdeveloper, findbugs

我是[Find bugs](http://findbugs.sourceforge.net/)的粉丝，之前使用过`Intellij Idea`. 它有一个非常好的插件`Intellij Idea`。现在我正在使用 JDeveloper，因为它对`Oracle ADF`框架有最好的支持，而且我的应用程序构建在`ADF`. 我想了解将 JDeveloper 直接与 FindBugs 集成的最佳方法是什么？有插件吗？

**编辑**：我浏览过[这个博客](https://blogs.oracle.com/shay/entry/findbugs_integration_with_jdeveloper)，它描述了如何将 FindBugs 集成到 Ant 的构建脚本中，但是当我按照那里提到的步骤进行操作时，我看到以下内容：

```
Buildfile: D:\Software\findbugs-2.0.2\findbugs.xml

init:

findbugs:
 [findbugs] Executing findbugs from ant task
 [findbugs] Running FindBugs...
 [findbugs] edu.umd.cs.findbugs.NoClassesFoundToAnalyzeException: No classes found to analyze in *C:\Oracle\Middleware\jdk160_24\jre\lib\resources.jar *C:\Oracle\Middleware\jdk160_24\jre\lib\rt.jar *C:\Oracle\Middleware\jdk160_24\jre\lib\jsse.jar *C:\Oracle\Middleware\jdk160_24\jre\lib\jce.jar *C:\Oracle\Middleware\jdk160_24\jre\lib\charsets.jar *C:\Oracle\Middleware\jdk160_24\jre\lib\ext\dnsns.jar *C:\Oracle\Middleware\jdk160_24\jre\lib\ext\localedata.jar *C:\Oracle\Middleware\jdk160_24\jre\lib\ext\sunjce_provider.jar *C:\Oracle\Middleware\jdk160_24\jre\lib\ext\sunmscapi.jar *C:\Oracle\Middleware\jdk160_24\jre\lib\ext\sunpkcs11.jar *D:\Software\findbugs-2.0.2\lib\annotations.jar *D:\Software\findbugs-2.0.2\lib\jsr305.jar 
 [findbugs]     at edu.umd.cs.findbugs.FindBugs2.execute(FindBugs2.java:273)
 [findbugs]     at edu.umd.cs.findbugs.FindBugs.runMain(FindBugs.java:391)
 [findbugs]     at edu.umd.cs.findbugs.FindBugs2.main(FindBugs2.java:1298)
 [findbugs] Java Result: 4

BUILD SUCCESSFUL
Total time: 4 seconds 
```

我认为它没有找到任何要分析的文件。但我已将值设置`basedir2`如下：

```
${project.classpath}${java.path}${project.dir}${project.sourcepath}${target.class}${workspace.path} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:53:41.910

请注意，在博客中为 basedir2 设置的值是 ${project.dir} 还要确保在运行 findbugs 之前实际编译项目，以便在正确的目录中创建类文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:46:03.797

你知道可以在 jdev 中调试 ant 脚本吗？您可以单步执行每个目标，在目标和定义上设置断点。这将帮助您找出传递给目标的参数。您甚至可以像在普通 Java 代码中一样查看每个变量的值。

# proxy - 是否可以使用 Charles Proxy 重写状态码？

> ID：14360125
> 
> 赞同：83
> 
> 时间：2013-01-16T14:00:27.437
> 
> 标签：proxy, rewrite, charles-proxy

我正在使用 Charles Proxy 重写来自 API 的响应以进行测试。

如果我设置了一个断点，我可以按照我的意愿完全重写原始响应。

但是，如果我想通过“重写”工具自动化它，我就卡住了，似乎你无法修改状态码：

![重写规则面板](../Images/205eb1c90ebfb6db5ac4295bf65f2162.png)

你知道我是否遗漏了什么吗？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-09-06T23:16:46.937

更新：Charles Proxy 3.8 版刚刚发布，具有重写状态的能力。从[发行说明](http://www.charlesproxy.com/documentation/version-history/)：

*   重写工具：允许重写响应状态

此版本的重写 UI 添加了新的“响应状态”规则类型：

![在此处输入图像描述](../Images/b4d91c8d883dea0cba0ae14ecb084033.png)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2019-12-30T10:46:11.703

**1- 选择`Tools > Rewrite`或`OPTION + CMD + R`**

[![重写选择](../Images/63856115ce8394cfd24c4a37528905c6.png)](https://i.stack.imgur.com/0oNkv.png)

* * *

**2-选择`Enable Rewrite`然后选择`Add`**

[![启用重写选择](../Images/b42dbd7fae0ffb281a4a6ba592929e46.png)](https://i.stack.imgur.com/AmT3y.jpg)

* * *

**3-用您的详细信息填写字段**

[![细节](../Images/b771e0083bd1305ac4aebbf7c9390c5d.png)](https://i.stack.imgur.com/37Hd2.png)

* * *

**4-添加类型和动作**

[![类型和操作](../Images/c1f0fe11d07f1c872e66d84dbaf9317a.png)](https://i.stack.imgur.com/q0N0D.jpg)

* * *

**5- 选择动作类型 -`Response Status`对于我们的例子 - 写入要更改的值 -500-，写入要替换的值 -200-**

[![配置类型和操作](../Images/5ce8ea9f0979fe1548dcf63d6c07b4b5.png)](https://i.stack.imgur.com/KUBfq.jpg)

* * *

**最后一步：**

**6-您已准备好与 Charles 一起操作响应的状态代码**

[![最后](../Images/bdf0c3867e95af100fed763eff4a047e.png)](https://i.stack.imgur.com/V5uXF.jpg)

[Charles Web Debugging Proxy 官方网站](https://www.charlesproxy.com)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-03-31T22:34:11.810

使用 Charles 3.8+，您可以重写状态码。

在重写工具中，选择“类型：响应状态”。在匹配字段和替换字段中，请注意 Charles 希望传入和重写的状态与格式匹配`"\d{3} .*"`。这意味着您重写的状态除了数字状态代码之外还必须有一个消息部分。

例如：

> 匹配值：201 .*
> 
> 替换值：502 Bad Gateway

从替换值中省略消息将导致不重写状态行。您可以在每次通话摘要的备注部分中查看 Charles 的重写工具输出消息。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-05-09T20:20:34.983

这不是您问题的直接答案，但正如我在上面的评论中指出的那样，我处于同样的情况，我找到了一个使用适合我的不同工具的解决方案。

我没有使用 Charles，而是使用这个简短的 Python[重写脚本](http://mitmproxy.org/doc/scripts.html)运行[mitmproxy](http://mitmproxy.org)，特别是[mitmdump](http://mitmproxy.org/doc/mitmdump.html)：

```
#!/usr/bin/env python

def response(context, flow):
    if '/somePath' not in flow.request.path:
        return

    flow.response.status_code = 404 
```

要将其连接到代理中，我运行`mitmdump`如下：

```
mitmdump -s /path/to/rewriting-script.py 
```

而且效果很好。

我在 OS X 上，我将网络接口的 Web 代理配置为 127.0.0.1 端口 8080。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-19T15:19:24.657

**最终编辑：Marc Liyanage 的答案现在对于这个问题是最正确的。**

不，你不是，我认为不可能重写状态码。

我无法将此添加为评论（新用户），但一种解决方法是：

1.  在将返回您需要的代码的服务器上创建资源，或者找到那些可以返回的资源。
2.  使用 Map Remote 功能，映射到返回代码的资源。

我已经尝试使用 Map Local，这将是完美的，但查尔斯将它自己的 200 OK 状态代码添加到所有返回的文件中。

编辑：您也可以在单个响应上使用断点并修改代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-10T10:54:34.130

使用[Requestly 桌面应用程序](https://requestly.io/desktop/)，您不仅可以修改请求的响应，还可以在 30 秒内修改状态码和状态码。

除此之外，您还可以：

*   为需要匹配的 URL 定义正则表达式/通配符模式。
*   保存规则（这样就不需要一次又一次地修改状态码）。

以下是基本响应修改规则的样子 [![在此处输入图像描述](../Images/31326f860651a57627d02e8daae2aa2c.png)](https://i.stack.imgur.com/iMKeI.png)

这是相同的快速演示。 [https://youtu.be/nLcIZGmMatQ](https://youtu.be/nLcIZGmMAtQ)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-08-29T07:16:12.407

这不是查尔斯的直接答案，但您可以编写 JS 代码以使用[Proxyman](https://proxyman.io)轻松更改 HTTP 响应（[脚本功能](https://docs.proxyman.io/scripting/script)）

例如，

```
function onResponse(url, request, response) {
    // Change to 404 status code for the matching request
    response.statusCode = 404; 
    return response;
} 
```

这是您可以执行的[代码](https://docs.proxyman.io/scripting/snippet-code#change-response-http-status-code)段的完整列表：

免责声明：我是 Proxyman 的创建者。希望它可以帮助你。

# jenkins - Maven中的TestNG报告

> ID：14360128
> 
> 赞同：0
> 
> 时间：2013-01-16T14:00:37.227
> 
> 标签：jenkins, maven-2, continuous-integration, testng, maven-failsafe-plugin

对于一个项目，我使用 jenkins 作为 CI 平台，使用 maven 作为构建框架，使用 TestNG 作为测试框架（maven 和 TestNG 之间的集成是通过故障安全插件实现的）。Jenkins 运行预定的每晚构建，调用 maven 进行实际构建并通过故障安全插件执行测试。故障安全插件生成和 html 报告，这很好，但只是一个 HTML。

与 jenkins 相比，Team City 生成更详细的报告，并提供跟踪测试历史记录的能力——它多久被打破等等，暂停测试，......我知道 TeamCity 是有偿的并且非常昂贵（并且在微软的平行宇宙中）但你仍然知道一些让 Jenkins 在这方面更接近 TC 的插件/扩展。或者你知道詹金斯向那个方向扩展有多难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:35:12.543

谈到“更接近一点”，这给出了运行失败的趋势： [http ://wiki.hudson-ci.org/display/HUDSON/testng-plugin](http://wiki.hudson-ci.org/display/HUDSON/testng-plugin)

# web - 关闭没有 javascript 的浏览器选项卡

> ID：14360129
> 
> 赞同：1
> 
> 时间：2013-01-16T14:00:38.053
> 
> 标签：web, cross-browser, http-headers, browser

我想知道在禁用 JavaScript 时是否有任何方法可以通过按下网页内的按钮来关闭选项卡/浏览器。

我可能认为http响应中有一些标头（请求/响应）参数可以在服务器端设置，浏览器可以读取这些参数并关闭选项卡/浏览器？

如果这有任何意义，请回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:03:37.600

**不，这是不可能的。**只有`window.close()`浏览器可能会或可能不会遵循的Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:04:17.357

不，我不知道。Javascript 几乎是要求浏览器关闭选项卡/窗口的唯一方法。

# jquery - Jquery 使用任何以

> ID：14360135
> 
> 赞同：0
> 
> 时间：2013-01-16T14:00:59.137
> 
> 标签：jquery, select

我似乎无法让它工作，因为您在下面看到我的代码需要一个带有名为“#select_”的第一部分的选择框，然后将以随机数结束，即“#select_123”，所以我需要使用通配符. 但`[id^='select_']`似乎不正确。

我还需要将选择元素“选定”选项传递给变量。

```
jQuery("[id^='select_']").change(function() {

var optionValueText = jQuery.trim(jQuery($("[id^='select_']")+' :selected').text());

   //do something  

}); 
```

我知道如果我只对 id 名称进行卡编码，即 jQuery("#select_123")，则此代码可以正常工作，但我没有该选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:06:20.470

您可以使用[“开始于”选择器：](http://api.jquery.com/attribute-starts-with-selector/)像这样

```
$('div[id^="select_"] :selected') 
```

**以选择器开头**：

*`Selects elements that have the specified attribute with a value beginning exactly with a given string.`*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:07:29.643

您可以尝试使选择通用，然后在更改时检查 id：

```
$("select").change(function(){

  var n=$(this).attr("id").split("_");
  if(n == "select")
  {
   //do something here
  }
}); 
```

[http://jsfiddle.net/ZTMKK/](http://jsfiddle.net/ZTMKK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:11:17.603

问题是这部分：

```
$("[id^='select_']")+' :selected' 
```

您正在尝试将 jQuery 对象与字符串连接起来，这会起作用，但会导致选择器无效。

您可以简单地使用：

```
'[id^="select_"] :selected' 
```

或者，由于您已经引用了特定`<select>`元素，因此将整个内容更改为：

```
jQuery("[id^='select_']").change(function() {
    var optionValueText = jQuery.trim(jQuery(':selected', this).text());
    //do something  
}); 
```

# jquery - HTML 5 Validator 错误与缩略图网站的工具提示弹出

> ID：14360137
> 
> 赞同：0
> 
> 时间：2013-01-16T14:01:03.317
> 
> 标签：jquery, ajax, html

由于某种原因，这在 HTML5 中的 w3c 验证器中没有进行验证。有没有其他人遇到过这个错误？下面是代码。它使用 Ajax 或 Jquery 弹出来显示网站的屏幕截图，因此更改任何内容都非常棘手。有什么建议么？

```
<a href="http://www.careerrequirement.com/disc-jockey.htm" class="screenshot" rel="linkshots/dj.png" title="Be A DJ!">DJ</a> 
```

错误是：

> 元素 a 上属性 rel 的错误值 linkshots/dj.png：不是绝对 IRI。字符串 linkshots/dj.png 不是注册关键字或绝对 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:12:45.357

好吧，它在错误中说：这不是一个完整的 URL。

您可以通过将其更改为完整的 URL ( [http://www.website.com/linkshots/dj.png](http://www.website.com/linkshots/dj.png) ) 或使用 HTML 5 数据字段来解决此问题。

示例如下：

```
<a href="http://www.careerrequirement.com/disc-jockey.htm" class="screenshot" rel="http://www.website.com/linkshots/dj.png" title="Be A DJ!">DJ</a> 
```

或者

```
<a href="http://www.careerrequirement.com/disc-jockey.htm" class="screenshot" data-rel="linkshots/dj.png" title="Be A DJ!">DJ</a> 
```

然后在您的 AJAX 弹出窗口中通过 jQuery 访问它

```
$(this).attr('data-rel') 
```

有关 HTML 5 数据属性的更多信息，请访问[http://ejohn.org/blog/html-5-data-attributes/](http://ejohn.org/blog/html-5-data-attributes/)或[http://html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)

# jquery - 计算所有元素，直到出现具有相同类名的下一个元素

> ID：14360139
> 
> 赞同：0
> 
> 时间：2013-01-16T14:01:10.400
> 
> 标签：jquery

我需要在下表布局中获取`windows-detail-spec-label`两个类之间的所有数量 - 所以我可以使用该数字在不同的屏幕尺寸上重新排列表格。`windows-detail-spec-group`

我怎样才能算出它们，以便我得到正确的数字？

对于第一组元素，它应该是`2`因为`windows-detail-spec-label`在中间出现两次（注意：下一个`windows-detail-spec-group`在第二个`.row-label` `tr`）

![表格html布局](../Images/2f786f3d0cdc612d6d59cbde9a0d8f0e.png)

我当前的代码：

```
$('.windows-details-spec-group').each(function () {

  var rowspanCount = $(this).nextUntil('.windows-details-spec-group').filter('.windows-details-spec-label').length;

  $(this).unwrap().next('tr.row-default').prepend(this);
  $(this).attr({
      colspan: 1,
      rowspan: rowspanCount  // need this variable to be correct
  });
}); 
```

所以基本上我需要计算一个类出现在两个元素之间的次数，**无论它们在 DOM 中的哪个位置**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:15:10.363

在我看来，您需要对感兴趣点附近的 DOM 结构做出一些额外的合理假设——“无论在 DOM 中的哪个位置”太通用了，您将很难真正正确地实现它.

假设 any`td.windows-details-spec-group`将成为其父行的唯一子代并且对于`td.windows-details-spec-label`（这里肯定是这种情况）相同，您可以这样做：

```
$('.windows-details-spec-group').each(function () {
    var rowspan = $(this)
                  .closest("tr")
                  .nextUntil("tr:has(.windows-details-spec-group)")
                  .find(".windows-details-spec-label")
                  .length;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:19:25.477

```
 $('.windows-details-spec-group').each(function () {

          var rowspanCount = $(this).nextUntil('.windows-details-spec-group').find(".windows-detail-spec-label").length;

          $(this).attr({
              colspan: 1,
              rowspan: rowspanCount  // need this variable to be correct
          });
        }); 
```

在这里演示[http://jsfiddle.net/NNfmS/](http://jsfiddle.net/NNfmS/)

# java - 如何在 play 2.1 RC2 中包含本机库 (JNI)？

> ID：14360143
> 
> 赞同：3
> 
> 时间：2013-01-16T14:01:14.507
> 
> 标签：java, playframework, playframework-2.0, tfs-sdk, java.library.path

我正在使用`Play Framework 2.1 RC2`构建一个使用`TFS Java SDK`. `TFS APIs`需要包含一组本机 dll（例如`native_auth.dll`）。

如何在应用程序运行时使本机库可用？我在哪里可以指定要包含的本机 dll？

更新：我尝试使用`static`block`System.load("full path")`并加载它 `app.classloader().loadClass("NativeUtils.class");` ，但仍然出现异常：

`java.lang.UnsatisfiedLinkError: com.microsoft.tfs.jni.internal.platformmisc.NativePlatformMisc.nativeGetEnvironmentVariable(Ljava/lang/String;)Ljava/lang/String; at com.microsoft.tfs.jni.internal.platformmisc.NativePlatformMisc.nativeGetEnvironmentVariable(Native Method) at com.microsoft.tfs.jni.internal.platformmisc.NativePlatformMisc.getEnvironmentVariable(NativePlatformMisc.java:134) at com.microsoft.tfs.jni.PlatformMiscUtils.getEnvironmentVariable(PlatformMiscUtils.java:52) at com.microsoft.tfs.core.config.httpclient.DefaultHTTPClientFactory.shouldAcceptUntrustedCertificates(DefaultHTTPClientFactory.java:288) at com.microsoft.tfs.core.config.httpclient.DefaultHTTPClientFactory.configureClientParams(DefaultHTTPClientFactory.java:324) at com.microsoft.tfs.core.config.httpclient.DefaultHTTPClientFactory.newHTTPClient(DefaultHTTPClientFactory.java:137) at com.microsoft.tfs.core.TFSConnection.getHTTPClient(TFSConnection.java:1041) at com.microsoft.tfs.core.TFSConnection.getWebService(TFSConnection.java:874) at com.microsoft.tfs.core.config.client.DefaultClientFactory$9.newClient(DefaultClientFactory.java:265) at com.microsoft.tfs.core.config.client.DefaultClientFactory.newClient(DefaultClientFactory.java:90) at com.microsoft.tfs.core.TFSConnection.getClient(TFSConnection.java:1470) at com.microsoft.tfs.core.TFSTeamProjectCollection.getWorkItemClient(TFSTeamProjectCollection.java:370)`

提前感谢您的投入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-02T07:08:24.617

我对 OpenCV 库有同样的问题。我在这里找到了解决方案：http: [//answers.opencv.org/question/16689/jni-error-on-playframework-v211/](http://answers.opencv.org/question/16689/jni-error-on-playframework-v211/)

> 您必须使用“play start”命令运行您的应用程序，而不是“play run”。
> 
> “play run”命令在开发模式下启动您的应用程序，“play start”命令在生产模式下启动。我不知道它们之间的所有区别，但有一点很明显，
> 
> 只有当我们使用“play start”时，才会为您的应用程序启动一个新的 JVM，并加载您由 System.load(...) 指定的本机库

如果您使用“play start”命令运行您的播放应用程序，它将起作用。不幸的是，“play run”不加载库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:07:39.287

使用时`System.loadLibrary`，我们唯一指定的是`DLL`我们想要的文件的名称。JVM 将在“Java 库路径”中搜索它。这是由`java.library.path`系统属性给出的路径（因此可以使用 -D 选项在 java.exe 命令行上进行更改）。它的默认值似乎与`Windows`路径有关，尽管它似乎有些混乱，我不太确定如何或为什么。换句话说，我不确定 Windows JVM 如何创建`java.library.path`.

因此，您应该`-Djava.library.path=<path to your dlls>`在运行应用程序时简单地指定。更多细节在[这里](https://stackoverflow.com/questions/957700/how-to-set-the-java-library-path-from-eclipse)。

# git - 如何确定本地跟踪分支？

> ID：14360151
> 
> 赞同：1
> 
> 时间：2013-01-16T14:01:32.333
> 
> 标签：git, svn, git-svn

好的，情况如下：我的本地存储库中有一个名为“功能分支”的 git 分支。
该分支启用了 git-svn，它正在跟踪本地分支 'remotes/svn/branches/feature-branch' 。
这个分支正在跟踪外部存储库中的一个 SVN 分支。

现在我知道如何确定跟踪哪个 SVN 分支，这可以通过`git svn info`. 但是，如何确定我的功能分支跟踪哪个 LOCAL 远程分支？IE。如何确定 'feature-branch' 正在跟踪 'remotes/svn/branches/feature-branch' ？

使用 GIT 中的“正常”跟踪分支，我可以做到`git branch -avv`，它会为每个分支显示它正在跟踪的分支。（这也很麻烦......）

我的最终目标是能够显示尚未推送到 SVN 存储库的提交。我可以通过运行轻松做到这一点`git log $remote..HEAD`。但是我需要知道什么`$remote`是...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T22:10:00.627

您`feature-branch`正在跟踪 git 提交（由 SHA1 哈希定义）。它没有跟踪 SVN 分支，因为 git-svn 不会为 SVN 服务器创建远程（所有到/从 SVN 服务器的 fetch/rebase/tag/branch/commit 函数都是使用 完成的`git svn ...`）。

根据[git-svn 文档](http://git-scm.com/docs/git-svn)：

> 请注意以下规则：`git svn dcommit`
> 
> **将尝试在命名的 SVN 提交之上提交**
> 
> **`git log --grep=^git-svn-id: --first-parent -1`**

...所以你在使用`git svn info`或`git log --grep=^git-svn-id: --first-parent -1`确定 SVN 跟踪分支时是正确的。

* * *

要找出包含某个提交（基于 SHA1 哈希）的所有其他已知 Git 分支，请尝试`git branch --all --contains <commit-hash>`（例如：`git branch --all --contains 856ce`--部分哈希应该可以正常工作）。

要获取当前分支的完整提交哈希，请尝试`git rev-parse HEAD`. 但是，您可能需要最后一次 SVN 提交的完整提交哈希，因此您需要使用来自`git log --grep=^git-svn-id: --first-parent -1`.

* * *

要从上次提交到 HEAD 中获取日志，您需要找到您的 SVN 跟踪分支（因为您已经想出了如何去做）并将其插入以下内容：

```
git rev-list --date-order --max-count=1 <svn-tracked-branch>
git log <above-returned-hash>..HEAD 
```

ex（使用 git，部分哈希几乎总是有效）：

```
$ git rev-list --date-order --max-count=1 trunk
117bbf6390a6cd62b47e9335be6a6d93c99d88e7
$ git log 117bbf..HEAD
commit f071e1781a98c33c2b36c21aedce4a9ab2311d47
Author: Me <me@myemail.com>
Date:   Fri Aug 30 15:19:27 2013 -0700

    test 
```

如果您使用 SHA1 哈希`git log --grep=^git-svn-id: --first-parent -1`而不是采取额外的运行`git rev-list --date-order --max-count=1 <svn-branch>`命令的步骤，您可能会获得更多有用的信息。

# iphone - 在 UITableViewCell 上实现我自己的滑动

> ID：14360155
> 
> 赞同：1
> 
> 时间：2013-01-16T14:01:38.067
> 
> 标签：iphone, ios, objective-c, uitableview

我想在我的`UITableView`两个编辑选项中实现：

1.当用户滑动`UITableViewCell`它会得到`UITableViewCellEditingStyleDelete`。

2.当用户按下编辑按钮时，`UITableView`将进入编辑模式（我自己在`UITableViewCell`.m文件中定义：

```
-(void) setEditing:(BOOL)editing animated:(BOOL)animated {
    if ( (selectionButton.superview == self.contentView && !editing) || (selectionButton.superview != self && editing))
    {
        // REMOVE BUTTON
        [super setEditing:editing animated:animated];

        if (self.editingStyle != UITableViewCellEditingStyleDelete) {
            if (!editing)
            {
                if (selectionButton.superview == self.contentView)
                {
                    [UIView animateWithDuration:0.5 animations:^
                    {
                        selectionButton.alpha = 0;
                        CGRect btnFrame = selectionButton.frame;
                        btnFrame.origin.x -= 120;
                        selectionButton.frame = btnFrame;
                    }
                                 completion:    ^(BOOL done)
                    {
                        [selectionButton removeFromSuperview];
                    }
                 ];
                }
            }
            else {
                // ADD BUTTON
                if (selectionButton.superview != self.contentView)
                {
                    [self.contentView addSubview:selectionButton];
                    selectionButton.alpha = 0;
                    selectionButton.center = CGPointMake(-self.contentView.frame.origin.x / 2 - 30, self.frame.size.height / 2);
                    [UIView animateWithDuration:0.3 animations:^
                    {
                        selectionButton.alpha = 1;
                         selectionButton.center = CGPointMake(-self.contentView.frame.origin.x / 2 + 3, self.frame.size.height / 2);
                     }];
                }
            }

            [self setNeedsLayout];
        }
    }
} 
```

我想将此委托方法添加到我的`UITableView`：

```
-(UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {

    if (table.editing) {
        return 3;
    } else {
        return UITableViewCellEditingStyleDelete;
    }

    //  return 3;
} 
```

但问题是当我在单元格上滑动手指时，该函数调用了 3 次。

有什么办法可以解决吗？或者它内置在`UITableView`当用户用手指在这个方法调用的单元格上滑动时？

我可以自己实现`UISwipeGestureRecognizer`并仅在按下编辑按钮时调用委托函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T11:11:26.907

为什么不直接将 UIGestureRecognizer 添加到单元格并通知视图控制器滑动并执行编辑？

# servlets - Entity Manager 可以由两个 servlet 共享吗？

> ID：14360156
> 
> 赞同：0
> 
> 时间：2013-01-16T14:01:39.543
> 
> 标签：servlets, deployment, jpa-2.0

我已将我的常用类（域对象、实用程序和 JPA2 - 持久性服务）打包到一个 jar 中。我将 jar 包含到我的其他两个应用程序的库中，并为每个应用程序独立配置持久性单元和实体管理器。两个应用程序都部署为同一个 tomcat 上的 servlet。但是，如果一个应用程序操作 MySQL-DB 的数据，则另一个应用程序不会使用更新的数据。

如何使用集中的持久性服务并允许所有应用程序访问最新数据？我是否必须使用 JNDI 或将所有内容打包为 EAR 而不是单个 WAR？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:10:28.517

这类似于使用 2 个不同的 JPA 应用程序访问同一个数据库。在这种情况下，每个使用自己的 L2 缓存的应用都会加剧这个问题。如评论中所述，您可以让应用程序同步其 L2 缓存。或者，您可以评估 EntityManager 的使用情况并确保它们不会被长时间持有或偶尔被清除。仅在需要时获取 EM，并在完成该过程后关闭或清除它。如果不使用 L2 缓存，这将确保根据需要从数据库中读取数据，更符合事务操作。

即使在单个应用程序使用中也可能发生陈旧数据，因此强烈建议使用乐观锁定以避免被陈旧数据覆盖。

# validation - 骆驼验证错误消息

> ID：14360159
> 
> 赞同：2
> 
> 时间：2013-01-16T14:01:45.987
> 
> 标签：validation, exception, apache-camel

我在骆驼有以下路线

```
<route>
    <from uri="target/in"/>
    <doTry> 
        <to uri="validator:schema.xsd"/>
        <to uri="file:target/messages/validation/valid?fileName=a.xml"/>
        <doCatch> 
            <exception>org.apache.camel.ValidationException</exception>             
            <to uri="file:target/messages/validation/invalid?fileName=a.xml"/>
       </doCatch>
    </doTry> 
</route> 
```

当 XML 文件没有像这篇文章中那样通过验证时，我想收到错误消息

[http://camel.465427.n5.nabble.com/XML-Validation-getting-to-the-error-messages-using-Camel-td4768229.html](http://camel.465427.n5.nabble.com/XML-Validation-getting-to-the-error-messages-using-Camel-td4768229.html)

但是我如何在 Spring DSL 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:01:17.790

就像您引用的线程中的克劳斯状态一样：

> 异常原因 = exchange.getProperty(Exchange.EXCEPTION_CAUGHT, Exception.class);

所以，这条路线应该保存你的例外：

```
<route>
    <from uri="target/in"/>
    <doTry> 
        <to uri="validator:schema.xsd"/>
        <to uri="file:target/messages/validation/valid?fileName=a.xml"/>
        <doCatch> 
            <exception>org.apache.camel.ValidationException</exception>     
            <transform>
               <simple>${property.CamelExceptionCaught}</simple>
            </transform 
            <to uri="file:target/messages/validation/invalid?fileName=a.xml"/>
       </doCatch>
    </doTry> 
</route> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T20:38:58.810

如果您想将异常信息存储在示例代码中的文件中，则需要将其转换为字符串。否则，您会得到另一个关于文件无法存储的异常，因为 Camel 无法将模式验证异常转换为 java.io.inputStream。

```
<route>
    <from uri="target/in"/>
    <doTry> 
        <to uri="validator:schema.xsd"/>
        <to uri="file:target/messages/validation/valid?fileName=a.xml"/>
        <doCatch> 
            <exception>org.apache.camel.ValidationException</exception>     
            <transform>
               <simple>${property.CamelExceptionCaught}</simple>
            </transform>
            <transform>
               <simple>${bodyAs(String)}</simple>
            </transform>
            <to uri="file:target/messages/validation/invalid?fileName=a.xml"/>
       </doCatch>
    </doTry> 
</route> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-10T22:46:07.990

您可以在一个文件中发送异常，在另一个文件中发送错误的 xml。

```
<route>
    <from uri="target/in"/>
    <doTry> 
        <to uri="validator:schema.xsd"/>
        <to uri="file:target/messages/validation/valid?fileName=a.xml"/>
        <doCatch> 
            <exception>org.apache.camel.ValidationException</exception>
            <setHeader headerName="CamelOverruleFileName">
                <simple>${file:onlyname.noext}.${date:now:yyyyMMdd_HHmmssSSS}.xml</simple>
            </setHeader>
            <to uri="file:target/messages/validation/invalid/"/>
            <setBody>
                <simple>Got "${exception.message}" with this stack\n${exception.stacktrace}\n${body}</simple>
            </setBody>
            <setHeader headerName="CamelOverruleFileName">
                <simple>${file:onlyname.noext}.${date:now:yyyyMMdd_HHmmssSSS}.xml.error</simple>
            </setHeader>
            <to uri="file:target/messages/validation/invalid/"/>
        </doCatch>
    </doTry> 
</route> 
```

# postgresql - 插入可以锁定选择/选择计数（*）还是其他？

> ID：14360166
> 
> 赞同：0
> 
> 时间：2013-01-16T14:01:59.107
> 
> 标签：postgresql, sqlalchemy, multiprocessing

我有多个工作进程读取数据并将其插入同一个 postgresql 数据库。但有时，似乎什么都没有发生。难道是一个进程的选择或插入可能会阻塞/锁定另一个进程的插入或选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:10:27.717

除非您使用，否则`LOCK TABLE .. EXCLUSIVE`无法阻止`SELECT`Postgres 中的语句。

`INSERT`然而，另一个尝试插入相同主键值的事务*可能*会阻止一个。

如果您遇到“似乎什么都没有发生”的情况，您可以查询[`pg_stat_activity`](http://www.postgresql.org/docs/current/static/monitoring-stats.html#PG-STAT-ACTIVITY-VIEW)并检查该`waiting`列以查看是否有任何连接被阻止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:22:26.403

这个问题没有具体细节，但是是的，作家很可能会阻止其他作家。在多工人场景中，这是您在设计代码时需要担心的事情之一。

诸如写入另一个会话已写入但尚未提交的行之类的常见操作将在默认隔离模式下阻塞。插入具有唯一索引的表也将阻塞，直到另一个执行相同操作的会话尚未提交或回滚。

让交易尽可能短的时间可以缓解这个问题。如果您需要对大型表进行计数（*），请不要这样做，而是使用预先计算的计数器（请参阅[Slow_Counting](http://wiki.postgresql.org/wiki/Slow_Counting)）。

要在问题发生时检查锁，请参阅[Lock_Monitoring](http://wiki.postgresql.org/wiki/Lock_Monitoring)中的查询。

# sql - ORA-00907: 缺少右括号 2

> ID：14360167
> 
> 赞同：0
> 
> 时间：2013-01-16T14:02:00.450
> 
> 标签：sql, oracle, ora-00907, dbvisualizer

我正在尝试执行此查询以在 db-visualizer 中获得一些结果，但我不断收到以下响应：

**回应**：

> [错误代码：907，SQL 状态：42000] ORA-00907：缺少右括号

**编辑** **查询：**

```
SELECT * FROM (
    SELECT 
    e.*, clt_add_l1, clt_add_l2, clt_city, clt_prst_cd, clt_pszp_cd 
    FROM     Staging.db_&tablename_v._match e,  client.clt_address ca, client.clt_add_usg au 
    WHERE    substr(match_desc,1,2) = '00' 
    and e.clt_ofc_no=au.clt_ofc_no(+) 
    and e.clt_no=au.clt_no(+) 
    and au.clt_ofc_no=ca.clt_ofc_no(+) 
    and au.clt_add_key=ca.clt_add_key(+) 
    and au.clt_add_type(+)='PRI' 
    UNION ALL
    SELECT 
    e.*, clt_add_l1, clt_add_l2, clt_city, clt_prst_cd, clt_pszp_cd 
    FROM     Staging.db_&tablename_v._match e,  staging.clt_address_cp au 
    WHERE    substr(match_desc,1,2) in ('01','02') 
    and e.namadd_no = au.namadd_no(+) 
) foo ORDER BY match_desc, seq_no; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:12:27.287

采用：

```
 SELECT e.*, clt_add_l1, clt_add_l2, clt_city, clt_prst_cd, clt_pszp_cd, match_desc, seq_no
     FROM Staging.db_&tablename_v._match e 
LEFT JOIN client.clt_add_usg au ON au.clt_ofc_no = e.clt_ofc_no
                               AND au.clt_no = e.clt_no 
                               AND au.clt_add_type = 'PRI' 
LEFT JOIN client.clt_address ca ON ca.clt_ofc_no = au.clt_ofc_no
                               AND ca.clt_add_key = au.clt_add_key 
    WHERE substr(match_desc,1,2) = '00'
    UNION ALL
   SELECT e.*, clt_add_l1, clt_add_l2, clt_city, clt_prst_cd, clt_pszp_cd, match_desc, seq_no
     FROM Staging.db_&tablename_v._match e
LEFT JOIN staging.clt_address_cp au ON au.namadd_no = e.namadd_no
    WHERE substr(match_desc,1,2) IN ('01','02') 
 ORDER BY match_desc, seq_no 
```

不需要派生表/内联视图。但是不清楚被排序的列是否已经在查询中（IE：e.*），所以我明确地将它们添加到最后。

我重新编写了查询以使用 ANSI-92 连接语法——您的查询使用了很久以来不推荐使用的外部连接方式。

我没有你的数据库和表。确定问题的最简单方法是缩减查询，直到它开始返回数据。然后，逐一添加条件（列、表、WHERE/etc 子句），看看哪里出了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:11:03.717

使用任一：

```
substr(match_desc,1,2) in ('00') 
```

或者

```
substr(match_desc,1,2) = '00' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:18:31.493

我猜你的 GUI 没有取代

```
Staging.db_&tablename_v._match 
```

适当地。试试这个：

```
select 'Staging.db_&tablename_v._match' from dual; 
```

结果是什么？我猜它离开表名就像

```
Staging.db_whatever._match 
```

而不是预期的

```
Staging.db_whatever_match 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T14:48:29.217

问题是&tablename_v。需要删除，并且应该在适当位置插入表名（即 DATES）。我试过了，它奏效了。

但是谢谢大家的帮助！非常感谢:)

# sql - 从单个表和 ALL_TABS 查询时，Oracle 表的行数不同

> ID：14360169
> 
> 赞同：0
> 
> 时间：2013-01-16T14:02:13.200
> 
> 标签：sql, oracle11g, jira

以下两个查询（以 DBA 身份执行）产生两个不同的行数。

```
select table_name, num_rows from all_tables where owner = 'JIRA' and table_name = 'JIRAISSUE';

select count(*) from JIRA.JIRAISSUE; 
```

我知道第二个查询返回正确的值。

*   为什么会这样？我怀疑有待处理的交易，但不太确定。（未提交的工作）
*   是否有任何特定的 SQL 命令来“刷新”或“重新生成”ALL_TABS 返回的数字？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:07:13.003

NUM_ROWS 列只是一个***估计值***，它（仅）在更新表的统计信息时更新。

即使*在*一个`DBMS_STATS.GATHER_TABLE_STATS()`值之后也**不会**反映正确的行数（它可能，但不能保证，因为它只是一个*估计值*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:06:13.107

如果要`all_tables`返回准确的计数，则必须这样分析：

```
analyze table JIRAISSUE compute statistics 
```

这样，当您运行上述语句时，它将返回正确的结果。但是，在下一次插入时，它会不正确，直到您重新分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T03:13:55.317

在不运行分析器的情况下，以下查询将为您提供正确的结果：

```
select
table_name,
  to_number(
    extractvalue(
      xmltype(
   dbms_xmlgen.getxml('select count(*) c from '||table_name))
      ,'/ROWSET/ROW/C')) row_count
from ALL_TABLES ; 
```

# django - django forms - 为 M2M 渲染垂直复选框

> ID：14360173
> 
> 赞同：0
> 
> 时间：2013-01-16T14:02:23.410
> 
> 标签：django, django-models, django-forms, django-admin

我想为 M2M 使用垂直复选框。这是一个代码示例：

```
class Contact(models.Model):
    ...
    groups = models.ManyToManyField (
        Group,
        related_name = "contacts",
        verbose_name = _("Groups"),
    )
    ...

class Group (models.Model):
    name = models.CharField (
        unique = True,
        max_length = 100,
        db_index = True,
    )

class ContactAdminForm(forms.ModelForm):
    class Meta:
        model = Contact

    radio_fields = {"groups": admin.VERTICAL} # only for foreignkey or for choices 
```

有什么帮助吗？

谢谢，V。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:24:40.170

当您在表单中指定字段时，您可以像这样更改小部件：

```
groups = forms.ModelMultipleChoiceField(queryset=Group.objects.all(), widget=forms.CheckboxSelectMultiple) 
```

# regex - R中的list.files模式参数，扩展正则表达式使用

> ID：14360174
> 
> 赞同：5
> 
> 时间：2013-01-16T14:02:26.543
> 
> 标签：regex, r

我跑

```
 dir.create('./junk_data')
  file.create(paste('./junk_data/QWE',01:12,01:31,2005:2015,'.3',sep=''))
  file.create(paste('./junk_data/RTY',01:12,01:31,2005:2015,'.3',sep='')) 
```

并想列出所有以 .*开头*和*结尾*的文件。我试过`QWE`*`2011.3`*

 *```
list.files('./junk_data/',pattern='QWE....2011.3',full.names=T) 
```

和

```
list.files('./junk_data/',pattern='QWE....2011.3',full.names=T,perl=T) 
```

但我想`'.'`这并不意味着我的想法，因为我没有得到我想要的文件。

我尝试了一些关于正则表达式的教程，但没有任何乐趣。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T14:21:42.887

正如 Arun 在他的示例中所示，点通常表示“匹配任何字符”，因此要匹配点，您需要对其进行转义：`\\.`. 您可以使用 最轻松地创建模式[`glob2rx`](http://www.inside-r.org/r-doc/utils/glob2rx)，它`*`用作通配符并匹配其他字符，就好像它们是固定的一样。

```
glob2rx("QWE*2011.3")   #"^QWE.*2011\\.3$"
list.files("./junk_data/", pattern = glob2rx("QWE*2011.3"), full.names = TRUE) 
```*

# jquery - 悬停时用 div 替换图像

> ID：14360178
> 
> 赞同：3
> 
> 时间：2013-01-16T14:02:35.610
> 
> 标签：jquery, css, image-replacement

看起来很简单，但我无法让它工作。

div 包含 facebook / twitter 链接。它应该工作的方式是显示图像，然后当有人将鼠标悬停在其上时，它会消失并被社交图标取代。

我有代码可以处理 div 中的文本，但是一旦我添加图像/脚本，它似乎就坏了。（我得到的代码也没有图像消失，这是我还没弄清楚该怎么做的事情）。

这是我所拥有的：

```
<div class="image">
<img src="/some_image.jpg">

<div class="sharerDiv">
<p>Hello!</p>
</div>
</div> 
```

使用以下CSS：

```
.sharerDiv {
display:none;
}
img:hover + .sharerDiv {
display:block;
} 
```

这是在 jsfiddle 上：http: [//jsfiddle.net/randomlysid/dxwma/1/](http://jsfiddle.net/randomlysid/dxwma/1/)

如果可能的话，我想用 css 来做这件事，因为那是我所熟悉的，但如果 jQuery 是完成它的唯一方法，那也可以。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:18:37.557

您可以应用父容器并添加伪选择器`:hover`来修改它的子容器，如下所示，

HTML

```
<div id="social">
  <div class="image">
    <img src="http://lorempixum.com/80/80" />
        <div class="sharerDiv">
        <p>Hello!</p>
        </div>
  </div>
</div> 
```

CSS

```
#social {
  width: 100px;
  height: 200px;
}

#social:hover img {
  display: none;
}

#social:hover .sharerDiv {
  display: block;
} 
```

现在，当您将鼠标悬停在其上时`div#social`，它将`img`从视图中删除并仅显示文本。

**更新**

我已将相同类型的父元素应用到您的案例 1，并在下面使用相同的 CSS，它似乎按预期工作。这是我的 jsfiddle：http: [//jsfiddle.net/dxwma/18/](http://jsfiddle.net/dxwma/18/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:43:17.267

将您的 CSS 更改为：

```
.image
{
  width: 80px;
  height: 80px;
}
.sharerDiv
{
  display: none;
  position: absolute;
  z-index: 99;
}
img
{
  position: relative;
  display: block;
}
.image:hover .sharerDiv
{
  display: block;
}
.image:hover img
{
  display: none;
} 
```

1.  您的外部容器 .image 最好具有相同的边界（宽度和高度）。
2.  .sharerDiv 的位置值应该是绝对的（所以它可以浮动）。
3.  悬停应应用于外部容器。

[**这**](http://jsfiddle.net/dxwma/21/)是您在 jsFiddle 上的代码的编辑分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:11:50.517

您必须添加负边距。和其他一些div。例如将您的代码更改为：

html:

```
<div class="image">
  <div class="image-container">
    <img src="http://lorempixum.com/80/80">
  </div>
  <div class="sharerDiv">
  <p>Hello!</p>

    </div>

</div> 
```

CSS：

```
.sharerDiv{
  display:none;
}
.image-container{
  width: 80px;
  height: 80px;
}
.image-container:hover + .sharerDiv{
  display:block;
  margin-top: -49px;
}
.image-container:hover img{
  visibility: hidden;
} 
```

# c# - Filestream 给出了带有空格的错误

> ID：14360180
> 
> 赞同：0
> 
> 时间：2013-01-16T14:02:59.307
> 
> 标签：c#, path, filestream

我正在尝试读取一个文件（效果很好），唯一的问题是当路径中有空格时，代码崩溃并告诉我没有这样的路径。有谁知道如何逃离这些空间或其他解决方案？谢谢！

这是我的代码：

```
public static string ReadValue(string value)
        {
            try
            {
                FileStream propertiesFile = new FileStream(ServerLocation + FileName, FileMode.Open);
                StreamReader sr = new StreamReader(propertiesFile);
                string Line = sr.ReadLine();
                while (Line != null)
                {
                    if (Line.Contains(value))
                    {
                        var setting = Line.Split('=')[1];
                        Console.WriteLine(setting);
                        sr.Close();
                        return setting;
                    }
                    Line = sr.ReadLine();
                }
                sr.Close();
            }
            catch (IOException e)
            {
                Console.WriteLine("Cannot find the specified file.");
                Console.WriteLine(e.ToString());
                return null;
            }
            return null;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:04:59.693

通常，带有空格的路径不应该造成问题`"C:\My Directory\Files"`应该绝对没问题...也许您忘记了 ServerLocation 开头或 FileName 末尾的斜线。

```
String path = Path.Combine(ServerLocation, FileName); 
```

或者：

```
FileStream propertiesFile = new FileStream(ServerLocation.Trim() + FileName.Trim(), FileMode.Open); 
```

另外，正如我的评论中所建议的，将循环更改为：

```
while ((Line = sr.ReadLine()) != null)
{
    if (Line.Contains(value))
    {
        var setting = Line.Split('=')[1];
        Console.WriteLine(setting);
        sr.Close();
        return setting;
    }
} 
```

# xml - 默认 WordML 单位测量？像素或点或英寸

> ID：14360183
> 
> 赞同：9
> 
> 时间：2013-01-16T14:03:07.867
> 
> 标签：xml, openxml, docx, wordml

请澄清我的疑问
WordML/DOCX 默认单位测量是像素或点或 EMU 或英寸..？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-16T22:32:09.457

它是一种叫做 DXA 的东西。每英寸有 1440 DXA。1 英寸是 72 点。1 DXA 是点的 1/20（20 DXA 是 1 点）。还有一种叫做动车组的东西（914400 动车组是 1 英寸，12700 动车组是 1 磅）。

请不要问我是怎么知道的。微软ಠ_ಠ</p>

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-06-22T16:32:32.367

我创建了为 openXML [https://unit-converter.kurylk.in/转换的单位](https://unit-converter.kurylk.in/)

还有一个表格，其中包含所有常见办公单元的公式。

[![在此处输入图像描述](../Images/5209648a9fe681d2fae28b08ecae7d77.png)](https://i.stack.imgur.com/vnLjg.png)

# php - DropDownList 加载选项属性

> ID：14360185
> 
> 赞同：0
> 
> 时间：2013-01-16T14:03:10.617
> 
> 标签：php, yii

嗨，伙计们，我有一个需要对产品值求和的应用程序，我在表单中有一个多选下拉菜单，但问题是我需要在选项中添加属性 price 才能对使用 javascript 选择的值求和。

我的代码是这个

```
<?php echo $form->dropDownList($modelpp,'product_id',CHtml::listData(Product::model()->findAll(), 'id', 'name'),array('multiple'=>"multiple", 'size'=>"3" )); ?> 
```

如何在选项中添加属性价格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:15:46.670

我不确定是否有一种很好的内置方法来处理这个问题。[一种 hacky 方法是在将 listData 的值](http://www.yiiframework.com/doc/api/1.1/CHtml#value-detail)设置为多值、管道分隔值时使用匿名函数，如下所示：

```
<?php echo $form->dropDownList($modelpp,
                               'product_id',
                               CHtml::listData(Product::model()->findAll(), 
                                               function($model) {
                                                    return $model->id . '|' . $model->value;
                                               }, 
                                               'name'),
                               array('multiple'=>"multiple", 'size'=>"3" )); 
?> 
```

这将导致每个选项的值具有类似于“123|456”的值，其中 123 是 id，456 是值。在您的 javascript 中，您需要将其拆分为 | 将 ID 和值分开。您还需要在提交给控制器时处理拆分，并将 id 和值分开。

您显然可以使用不同的分隔符，甚至可以让匿名函数返回 JSON，并将其用作值，这可能会导致在 javascript 和 PHP 中的解析稍微容易一些。

# richfaces - 如果禁用 javascript，Richfaces 组件会工作吗

> ID：14360189
> 
> 赞同：0
> 
> 时间：2013-01-16T14:03:28.653
> 
> 标签：richfaces

我在我的应用程序中使用 RichFaces ajax 组件。例如`<rich:dropDownMenu >`，`<rich:suggestion >` 等等。但是，如果我在浏览器中禁用 javascript，这些将不起作用。即使禁用了javascript，有什么方法可以让Richfaces 工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:22:00.613

如果使用 RichFaces，则不需要编写 JavaScript，但 Richfaces 需要 JavaScript。现代富 Web 应用程序需要 JavaScript，动态行为由 JavaScript 驱动。另请参阅： [假设我的访问者启用了 javascript 是否合理？](https://stackoverflow.com/questions/155615/is-it-reasonable-to-assume-my-visitors-have-javascript-enabled)

# coldfusion - 如何在 Railo 中捕获“coldfusion.runtime.MissingArgumentException”等价物？

> ID：14360190
> 
> 赞同：2
> 
> 时间：2013-01-16T14:03:36.967
> 
> 标签：coldfusion, error-handling, railo, cfml

以下是比较 Coldfusion 9.0.1 和 Railo 4.0.2.002

我有以下（截断）作为cfc的初始化

```
component {
    public myComponent function init(
        required string inSetting1,
        required string inSetting2
    ) {
        return this;
    }
} 
```

如果我运行以下命令，那么它会正确调用

```
objInstance = new myComponent(
    inSetting1 = 'xxx',
    inSetting2 = 'yyy'
); 
```

但是，我试图在没有所有必需参数的情况下处理请求此对象的错误配置。到目前为止，我得到了以下

```
try {
    // inSetting2 is not defined == will cause error
    objInstance = new myComponent(
        inSetting1 = 'xxx'
    );
} catch (coldfusion.runtime.MissingArgumentException e) {

    // This catches the error for CF 9.0.1

} catch (expression e) {

    // This catches the error for Railo 4.0.2
    debug(e); // get the error dump for stack trace below

} 
```

到目前为止，`expression`我已经尝试了以下基于堆栈跟踪的打开无济于事`railo.runtime.type.UDFImpl.defineArguments(UDFImpl.java:171)`（这就是我检索 CF9 的特定类型的方式）

*   铁路
*   railo.runtime
*   railo.runtime.type
*   railo.runtime.type.UDFImpl
*   railo.runtime.type.UDFImpl.defineArguments

现在，虽然我可以做`catch (expression e)`，甚至可以`catch (any e)`，但我更希望能够捕获特定错误，原因很简单，因为在我目前正在更新以与 Railo 一起使用的组件中的某些位置，它依赖于能够确定原因无法区分配置错误（缺少参数）和部署错误（缺少模板）。

那么，是否有人知道一种方法，我可以通过该方法使上述 try/catch 看起来专门用于`coldfusion.runtime.MissingArgumentException`（或就此而言，一种方法，我可以在尝试调用/运行方法之前检查所需的参数（ s) 有问题)

编辑：我忘了包括堆栈跟踪。这是 Railo 堆栈跟踪。我也已经尝试过以下代替`expression`

```
 The parameter environment to function init is required but was not
 passed in. at
 railo.runtime.type.UDFImpl.defineArguments(UDFImpl.java:171):171 at
 railo.runtime.type.UDFImpl._call(UDFImpl.java:369):369 at
 railo.runtime.type.UDFImpl.callWithNamedValues(UDFImpl.java:275):275
 at railo.runtime.ComponentImpl._call(ComponentImpl.java:608):608 at
 railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at
 railo.runtime.ComponentImpl.callWithNamedValues(ComponentImpl.java:1800):1800
 at
 railo.runtime.functions.other._CreateComponent.call(_CreateComponent.java:49):49
 at
 mso.dev_test315.mycomponenttest_cfc$cf._1(/var/www/html/myComponentTest.cfc:133):133
 at
 mso.dev_test315.mycomponenttest_cfc$cf.udfCall(/var/www/html/myComponentTest.cfc):-1
 at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
 railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
 railo.runtime.type.UDFImpl.callWithNamedValues(UDFImpl.java:275):275
 at railo.runtime.ComponentImpl._call(ComponentImpl.java:608):608 at
 railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at
 railo.runtime.ComponentImpl.callWithNamedValues(ComponentImpl.java:1796):1796
 at railo.runtime.tag.Invoke.doComponent(Invoke.java:209):209 at
 railo.runtime.tag.Invoke.doEndTag(Invoke.java:182):182 at
 mxunit.framework.testcase_cfc$cf._2(/var/www/html/mxunit/framework/TestCase.cfc:115):115
 at
 mxunit.framework.testcase_cfc$cf.udfCall(/var/www/html/mxunit/framework/TestCase.cfc):-1
 at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
 railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
 railo.runtime.type.UDFImpl.callWithNamedValues(UDFImpl.java:275):275
 at railo.runtime.ComponentImpl._call(ComponentImpl.java:608):608 at
 railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at
 railo.runtime.ComponentImpl.callWithNamedValues(ComponentImpl.java:1800):1800
 at
 railo.runtime.util.VariableUtilImpl.callFunctionWithNamedValues(VariableUtilImpl.java:749):749
 at
 railo.runtime.PageContextImpl.getFunctionWithNamedValues(PageContextImpl.java:1521):1521
 at
 mxunit.framework.decorators.dataproviderdecorator_cfc$cf._1(/var/www/html/mxunit/framework/decorators/DataProviderDecorator.cfc:31):31
 at
 mxunit.framework.decorators.dataproviderdecorator_cfc$cf.udfCall(/var/www/html/mxunit/framework/decorators/DataProviderDecorator.cfc):-1
 at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
 railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
 railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
 railo.runtime.ComponentImpl._call(ComponentImpl.java:607):607 at
 railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at
 railo.runtime.ComponentImpl.call(ComponentImpl.java:1781):1781 at
 railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723
 at
 railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506
 at
 mxunit.framework.testsuiterunner_cfc$cf._1(/var/www/html/mxunit/framework/TestSuiteRunner.cfc:99):99
 at
 mxunit.framework.testsuiterunner_cfc$cf.udfCall(/var/www/html/mxunit/framework/TestSuiteRunner.cfc):-1
 at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
 railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
 railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
 railo.runtime.type.scope.UndefinedImpl.call(UndefinedImpl.java:774):774
 at
 railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723
 at
 railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506
 at
 mxunit.framework.testsuiterunner_cfc$cf._1(/var/www/html/mxunit/framework/TestSuiteRunner.cfc:52):52
 at
 mxunit.framework.testsuiterunner_cfc$cf.udfCall(/var/www/html/mxunit/framework/TestSuiteRunner.cfc):-1
 at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
 railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
 railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
 railo.runtime.ComponentImpl._call(ComponentImpl.java:607):607 at
 railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at
 railo.runtime.ComponentImpl.call(ComponentImpl.java:1781):1781 at
 railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723
 at
 railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506
 at
 mxunit.framework.testsuite_cfc$cf._1(/var/www/html/mxunit/framework/TestSuite.cfc:131):131
 at
 mxunit.framework.testsuite_cfc$cf.udfCall(/var/www/html/mxunit/framework/TestSuite.cfc):-1
 at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
 railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
 railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
 railo.runtime.ComponentImpl._call(ComponentImpl.java:607):607 at
 railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at
 railo.runtime.ComponentImpl.call(ComponentImpl.java:1781):1781 at
 railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723
 at
 railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506
 at
 mxunit.framework.remotefacade_cfc$cf._1(/var/www/html/mxunit/framework/RemoteFacade.cfc:76):76
 at
 mxunit.framework.remotefacade_cfc$cf.udfCall(/var/www/html/mxunit/framework/RemoteFacade.cfc):-1
 at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
 railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
 railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
 railo.runtime.ComponentImpl._call(ComponentImpl.java:607):607 at
 railo.runtime.ComponentImpl._call(ComponentImpl.java:498):498 at
 railo.runtime.ComponentImpl.call(ComponentImpl.java:1789):1789 at
 railo.runtime.ComponentWrap.call(ComponentWrap.java:165):165 at
 railo.runtime.net.rpc.server.ComponentController._invoke(ComponentController.java:56):56
 at
 railo.runtime.net.rpc.server.ComponentController.invoke(ComponentController.java:34):34
 at __138.mxunit.framework.remotefacade_wrap.executeTestCase(Unknown
 Source):-1 at sun.reflect.GeneratedMethodAccessor61.invoke(Unknown
 Source):-1 at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown
 Source):-1 at java.lang.reflect.Method.invoke(Unknown Source):-1 at
 org.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:397):397
 at
 org.apache.axis.providers.java.RPCProvider.processMessage(RPCProvider.java:186):186
 at
 org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323):323
 at
 org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32):32
 at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118):118 at
 org.apache.axis.SimpleChain.invoke(SimpleChain.java:83):83 at
 org.apache.axis.handlers.soap.SOAPService.invoke(SOAPService.java:454):454
 at org.apache.axis.server.AxisServer.invoke(AxisServer.java:281):281
 at
 railo.runtime.net.rpc.server.RPCServer.doPost(RPCServer.java:312):312
 at
 railo.runtime.ComponentPage.callWebservice(ComponentPage.java:783):783
 at railo.runtime.ComponentPage.call(ComponentPage.java:155):155 at
 railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:801):801
 at
 railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:753):753
 at
 railo.runtime.listener.ModernAppListener._onRequest(ModernAppListener.java:183):183
 at
 railo.runtime.listener.MixedAppListener.onRequest(MixedAppListener.java:18):18
 at
 railo.runtime.PageContextImpl.execute(PageContextImpl.java:2255):2255
 at
 railo.runtime.PageContextImpl.execute(PageContextImpl.java:2222):2222
 at
 railo.runtime.engine.CFMLEngineImpl.serviceCFML(CFMLEngineImpl.java:310):310
 at railo.loader.servlet.CFMLServlet.service(CFMLServlet.java:29):29 at
 javax.servlet.http.HttpServlet.service(HttpServlet.java:728):728 at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305):305
 at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210):210
 at
 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222):222
 at
 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123):123
 at
 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472):472
 at
 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171):171
 at
 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99):99
 at
 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118):118
 at
 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407):407
 at
 org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200):200
 at
 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589):589
 at
 org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310):310
 at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown
 Source):-1 at
 java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source):-1
 at java.lang.Thread.run(Unknown Source):-1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:32:10.747

比您当前使用的更简单的解决方法：

```
try
{
    // standard function call
}
catch (expression e)
{
    if ( NOT refind('The parameter \S+ to function \S+ is required but was not passed in',e.message) )
        rethrow;
} 
```

当然，这依赖于错误信息的措辞，所以有些脆弱。

您也可以做一个不太精确但更灵活的版本，只需检查关键字：

```
if ( NOT find('parameter',e.message) AND find('required',e.message) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:22:25.683

当前采用的解决方案（除非在接下来的几天内提供更好的解决方案）将使用以下方法：

```
boolean function checkRequiredArguments(
    required inFunction,
    required struct inArguments
) {
    // This is intended to check the function for required arguments and ensure they are present in the struct
    var arrFunctionArguments = GetMetaData(arguments.inFunction).parameters;
    for (var thisArgument in arrFunctionArguments) {
        if (
            thisArgument.required // argument is required
            &&
            !IsDefined('arguments.inArguments.'&thisArgument.name) // but not defined
        ) {
            return false;   
        }
    }
    return true;    
} 
```

如果所有必需的参数都有效，这将返回 true。在上面组件的 init 参数的上下文中，以下示例代码将确保所有必需的参数至少以某种形式定义（一些细化将允许这也确认类型）

```
objTest = CreateObject('myComponent');
stcArguments = {
    inSetting1 = 'XXX'
}
if ( checkRequiredArguments( inFunction = objTest.init , inArguments = stcArguments ) ) {
    objTest.init( argumentCollection=stcArguments );
} else {
    throw(type='MissingArguments');
} 
```

# jquery - 使用 jQuery 使用 DRY 清理 HTML

> ID：14360197
> 
> 赞同：0
> 
> 时间：2013-01-16T14:03:47.710
> 
> 标签：jquery, html, dry

我正在尝试找到一种学习 DRY（不要重复自己）的好方法。我有一个包含大量 HTML 的页面。90% 的 HTML 是重复的，所以我试图找出如何清除它。

在页面上我有几个问题，所有这些问题都有相同的 html 代码，但文本不同。我在这里有一个项目的 jsFiddle [http://jsfiddle.net/SBKyW/](http://jsfiddle.net/SBKyW/)

```
 <div class="container_vragen">
        <p class="open_sub">&#x25BC; Heb je al je verplichtingen al geregeld?</p>
        <div class="antwoorden">
            <input id="ja" type="checkbox" value="ja" class="open_sub_ja"/><label for="ja">Ja</label>
            <input id="nee" type="checkbox" value="nee" class="open_sub_nee"/><label for="nee">Nee</label> 
            <div class="extra_info">?
                <div class="extra_info_popup">
                    Hidden tekst
                </div>
            </div>
        </div>  

        <div class="submenu">
            <div>
                <p>Heb je DigiD?</p>
                <div class="antwoorden">
                    <input id="ja" type="checkbox" value="ja" class="sub_antwoord ja"/><label for="ja">Ja</label>
                    <input id="nee" type="checkbox" value="nee" class="sub_antwoord nee"/><label for="nee">Nee</label> 
                    <div class="extra_info">?
                        <div class="extra_info_popup">
                            Hidden tekst
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <p>Heb je DigiD?</p>
                <div class="antwoorden">
                    <input id="ja" type="checkbox" value="ja" class="sub_antwoord ja"/><label for="ja">Ja</label>
                    <input id="nee" type="checkbox" value="nee" class="sub_antwoord nee"/><label for="nee">Nee</label> 
                    <div class="extra_info">?
                        <div class="extra_info_popup">
                            Hidden tekst
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <p>Heb je DigiD?</p>
                <div class="antwoorden">
                    <input id="ja" type="checkbox" value="ja" class="sub_antwoord ja"/><label for="ja">Ja</label>
                    <input id="nee" type="checkbox" value="nee" class="sub_antwoord nee"/><label for="nee">Nee</label> 
                    <div class="extra_info">?
                        <div class="extra_info_popup">
                            Hidden tekst
                        </div>
                    </div>
                </div>
            </div>
            <p class="akkoord"><br/>Akkoord</p>
            <div class="close_submenu">
                X
                <div class="close_okay">Deze vraag sluiten</div>
            </div>
        </div>
    </div> 
```

这是一个问题所需的 html。每个问题的结构都相同，但显然文本不同。

使用 jQuery 减少我的 html 代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:30:08.207

在某些情况下，使用客户端模板（也称为 JavaScript 模板）可能是避免重复 HTML 的好方法。

基本上，您可以编写一个 HTML“模板”并将其应用于任意数量的对象。

但是，由于 HTML 会在页面加载时生成，我很确定搜索引擎永远不会看到它。如果我错了，也许有人可以纠正我？

无论如何，如果您认为这可能是您正在寻找的东西，那么那里有很多 JS 模板库。我个人使用 John Resig 的极轻量级解决方案的略微修改版本：http: [//ejohn.org/blog/javascript-micro-templating/](http://ejohn.org/blog/javascript-micro-templating/)

干杯

# qt - qclipboard 将图像发送到系统剪贴板

> ID：14360201
> 
> 赞同：3
> 
> 时间：2013-01-16T14:03:56.900
> 
> 标签：qt, clipboard

当我尝试将图像复制到系统剪贴板中（然后我可以将其粘贴到 ms-word 文档中），下面的代码失败，不知道为什么，即使我尝试使用 settext，它也失败了。不知道为什么.

```
QApplication::clipboard()->setPixmap(
        QPixmap("d://20121001154504.png"),
        QClipboard::Clipboard); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:50:49.947

首先[阅读文档](https://doc.qt.io/qt-5/qclipboard.html#setPixmap)（使用 QImage 而不是 QPixmap）。然后验证图像是否已正确加载。

```
QImage image("d://20121001154504.png");
Q_ASSERT(!image.isNull());
QApplication::clipboard()->setImage(image, QClipboard::Clipboard); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:49:16.843

我尝试了您的代码（当然是我的图片路径）并得到了下一个结果：

当我通过调试器（Step Over 或`F10`在 MSVC 中）通过这一行时，切换到 ms-word 并尝试粘贴图像 - 我什么也没得到。

当我在没有调试器的情况下运行程序时 - 我得到了适当的结果 - 一个图像被粘贴到了文档中。

```
#include <QtGui/QApplication>
#include <QClipboard>
#include <QPixmap>

int main( int argc, char * argv[] )
{   
    QApplication a( argc, argv );

    QApplication::clipboard()->setPixmap( QPixmap( "path to my png" ) );
    // if you'll stop here in debugger, you'll have no result

    return a.exec();
} 
```

# java - 使用tomcat在eclipse之外运行一个web项目

> ID：14360202
> 
> 赞同：2
> 
> 时间：2013-01-16T14:03:57.960
> 
> 标签：java, eclipse, jsp, tomcat

我正在 Eclipse 中开发我的第一个动态 Web 项目。我正在使用tomcat v7。我开发了一个 login.jsp 页面。成功时，它重定向到另一个 home.jsp。

它在日食中运行良好。我通过将 index.jsp 更改为 login.jsp 来编辑 web.xml 文件。这两个 jsp 文件都在 WebContent 文件夹中。另外，我在 jsp 文件中包含了一个 servlet.java 文件。servlet 文件位于 projectName/resources/src/pkg 文件夹中。

但是，当我将项目文件夹作为一个整体粘贴到 Apache/webapps 文件夹中，并尝试使用 localhost:8080/ProjectName/ 从浏览器（启动 tomcat 后）运行项目时，它返回错误 404。

当我尝试使用 localhost:8080/ProjectName/WebContent/login.jsp 时，加载了 jsp 文件。但是在输入正确的用户名和密码后，它并没有重定向到 home.jsp。

谁能帮助我..提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:07:12.503

不要粘贴整个项目，必须[将其导出](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.wst.webtools.doc.user/topics/twcrewar.html)为[WAR 文件](http://java.boot.by/wcd-guide/ch02s04.html)，然后将其复制到 Tomcat 的 webapp 文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T14:07:35.140

将应用程序打包为 WAR 文件并将其放在 Tomcat 的`webapps`目录中。

Tomcat 将在启动时自动部署应用程序。

您不能简单地将 Eclipse 项目目录拖放到 Tomcat 中，因为 Eclipse 项目通常不会遵循 Java EE webapp 目录结构。Eclipse 在开发过程中“在幕后”创建/移动工件到适当的位置，因此一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-09T09:26:53.763

对于有经验的候选人来说，这是面试中最重要的问题。

我们可以使用以下文件示例在 tomcat 中自动部署 java 源代码。

**位置：** E:\Tomcat6.0\conf\Catalina\localhost\DMS.xml。

从这个文件中，我们需要在 DMS.xml 文件中进行配置。

这里 DMS 是我的项目名称。

**例子**

上下文 antiJARLocking="true" docBase="E:\DMS\build\web" path="/DMS"

# actionscript-3 - AS3：使用带有参数的事件监听器循环加载外部 swf

> ID：14360204
> 
> 赞同：1
> 
> 时间：2013-01-16T14:04:13.457
> 
> 标签：actionscript-3, addeventlistener

我尝试制作一个将 amfphp 与 as3 动画连接的应用程序。我从 amfphp 收到一个数组，我按“if”语句中的某个变量排序。之后，我有 2 个数组，其中包含彼此的数组：

```
var Array1:Array = [["http://url.to.swf", "http://url.to.link"], ["",""]...];
var Array2:Array = [["http://url.to.swf", "http://url.to.link"], ... ]; 
```

之后，我运行一个读取该数组并将每个 swf 加载到舞台的函数：

```
ladujBajkiGorne(Array1);

function ladujBajkiGorne(polkaGorna:Array):void {
    for(var i=0; i<polkaGorna.length; i++) {
        Aktual = polkaGorna[i];
        var mLoader:Loader = new Loader();
        var mRequest:URLRequest = new URLRequest(String(Aktual[0]));
        mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, myfunction = function(e:Event):void { onLoadGorna( e, String(Aktual[1]) ); } );
        mLoader.load(mRequest);
    }
} 
```

然后

```
function onLoadGorna(e, arg1):void {
   userSwf = e.currentTarget.content;
   userSwf.buttonMode = true;
   userSwf.addEventListener(MouseEvent.CLICK, function(e:MouseEvent) { afterClick(e, arg1 ); });
   booksMC.addChild(userSwf);

   var childName:String = booksMC.getChildAt(childs).name;
   booksMC.getChildByName(childName).x = posX;
   booksMC.getChildByName(childName).y = 0;

   posX += 218;
   childs++;
} 
```

最后

```
function afterClick(e, arg3) {
   var url:URLRequest = new URLRequest(arg3);
   navigateToURL(url, "_self");
} 
```

问题是所有已加载的 swf 在链接中都有相同的 url。它在 addEventListener 语句中的 ladujBajkiGorne 函数中没有改变。我尝试了很多选择来改变它，但没有任何效果。有机会帮助我吗？提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:54:11.587

问题在于加载程序完成处理程序的异步执行。将适当的参数传递给加载程序并在处理程序上读取它会非常好。我提出了一个简单的解决方案，更正您的代码：

```
function ladujBajkiGorne(polkaGorna:Array):void {
    for(var i=0; i<polkaGorna.length; i++) {
        Aktual = polkaGorna[i];
        var mLoader:Loader = new Loader();
        var mRequest:URLRequest = new URLRequest(Aktual[0]+"?link="+Aktual[1]);
        mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, myfunction = function(e:Event):void { onLoadGorna( e ); } );
        mLoader.load(mRequest);
    }
}

function onLoadGorna(e):void {
   var link:String = e.currentTarget.parameters.link;
   userSwf = e.currentTarget.content;
   userSwf.buttonMode = true;
   userSwf.addEventListener(MouseEvent.CLICK, function(e:MouseEvent) { afterClick(e, link ); });
   booksMC.addChild(userSwf);

   var childName:String = booksMC.getChildAt(childs).name;
   booksMC.getChildByName(childName).x = posX;
   booksMC.getChildByName(childName).y = 0;

   posX += 218;
   childs++;
} 
```

之后，每个加载器都知道它的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:44:12.907

问题出在完整事件的事件处理程序中。调用一个函数，该函数返回一个新函数作为事件处理程序。

首先，创建一个这样的函数：

```
function getCompleteHandler(url:String):Function {
    return function (e:Event) {
        onLoadGorna(e, url);
    }
} 
```

然后替换这个：

```
mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, myfunction = function(e:Event):void { onLoadGorna( e, String(Aktual[1]) ); } ); 
```

这样：

```
mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, getCompleteHandler(Aktual[1]) ); 
```

现在应该可以了！！

# javascript - 仅使用 javascript 检查父元素是否包含特定的 CSS 类？

> ID：14360211
> 
> 赞同：4
> 
> 时间：2013-01-16T14:04:35.123
> 
> 标签：javascript

当我单击任何 DOM 元素时，我想检查其父元素是否包含特定类。我正在尝试这种方式，但无法实现这个目标。有谁知道怎么做？

```
document.onclick=function(e){
    console.log(e.parentElement('.drop').id);       
} 
```

请仅在 JavaScript 中给出解决方案 - 我不能使用 jQuery。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T14:12:48.790

您可以使用`classList`父元素的属性。它有一种`contains()`对您的目的有用的方法：

```
document.onclick=function(e){
    console.log( e.parentElement.classList.contains( 'drop' ) );       
} 
```

如果您的目标是 Internet Explorer（IE<10），您可以手动解析类列表并在其中查找“drop”：

```
document.onclick=function(e){
    console.log( e.parentElement.className.split(' ').indexOf('button-panel')!==-1 );
} 
```

`split()`将 className 解析为数组中的多个名称。 `indexOf()`搜索数组中的元素，如果找不到，则返回-1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:10:16.517

传递给事件处理程序的`e`是事件对象，而不是被点击的元素。尝试抓住`srcElement`，然后它是父母的`className`。此外，由于您不能使用 jQuery，因此像`.drop`around 一样传递选择器不会做任何事情，只会导致语法错误。

```
document.onclick = function(e){
    console.log(e.srcElement.parentNode.className);

    e.stopPropagation(); // don't bubble
}; 
```

[工作示例](http://jsfiddle.net/7WTkk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:25:16.987

```
now i got the answer 

document.onclick=function(e){   
    if (!e) e = window.event;
        curDD = findparentClass(e.target.parentNode,'drop');
        console.log(curDD);
    }
}
function findparentClass(node, clsName) {           
    if(node.className != clsName && node.className!=null){
        return findparentClass(node.parentNode,clsName);                    
    }else if(node.className!=null){
        return true;    
    }
} 
```

其中“drop”是您要搜索的类...

# hibernate - 我如何理解rabbitMQ的通道，它与hibernate中的数据库会话的设计思想相同吗

> ID：14360212
> 
> 赞同：0
> 
> 时间：2013-01-16T14:04:35.213
> 
> 标签：hibernate, design-patterns, rabbitmq

如何考虑rabbitMQ的通道，它与hibernate中的数据库会话的设计理念相同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:31:04.687

你可以认为它们是相似的。

在 RabbitMQ 中，Channel 用于访问 Connection，其方式类似于 Session 用于访问 Connection nHibernate。

本文很好地概述了如何在 RabbitMQ 中使用 Channel [。](http://www.codeproject.com/Articles/297146/Creating-an-AMQP-Sample-App-using-RabbitMQ)

# opencv - OpenCV中的对应分析

> ID：14360215
> 
> 赞同：0
> 
> 时间：2013-01-16T14:04:45.243
> 
> 标签：opencv, javacv, correspondence-analysis

我正在寻找一种在 OpenCV 中（甚至在 JavaCV 中更好）进行对应分析的方法。基本上我有两个从两个不同的角度拍摄的图像。现在我需要在两个图像中找到对应的点。结果应该如下所示：

![http://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Epipolar-geometry-church-result1-ransac.png/800px-Epipolar-geometry-church-result1-ransac.png](../Images/c2a0d3c7c667937a70fa4e7fbdd43050.png)

OpenCV有什么方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:54:03.940

绝对地。在 OpenCV 中有很多方法可以使用不同的检测器和跟踪器来跟踪特征。

看看这个： [http ://docs.opencv.org/2.4.2/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html](http://docs.opencv.org/2.4.2/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html)

我敢肯定，即使在 stackoverflow 上，这个问题也已被多次询问和回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:56:26.407

尺度不变特征变换（或 SIFT）是计算机视觉中的一种算法，用于检测和描述图像中的局部特征。该算法由 David Lowe 于 1999 年发表。SIFT 是一种检测不同的、不变的图像特征点的方法，可以很容易地在图像之间进行匹配，以执行目标检测和识别等任务，或计算图像之间的几何变换。

首先从一组参考图像中提取对象的 SIFT 关键点并存储在数据库中。通过单独将新图像中的每个特征与该数据库进行比较并根据其特征向量的欧几里德距离找到候选匹配特征，在新图像中识别对象。您可以使用 FLANN 匹配关键点。

SIFT 是尺度、旋转、光照和视点不变的。SIFT 将是您的最佳选择。OpenCV 对 SIFT 有很好的支持。[http://docs.opencv.org/modules/nonfree/doc/feature_detection.html?highlight=sift](http://docs.opencv.org/modules/nonfree/doc/feature_detection.html?highlight=sift)

如果你想要一个代码示例，你可以看这里。[http://jayrambhia.com/blog/sift-based-tracker](http://jayrambhia.com/blog/sift-based-tracker)

# java - 延迟加载的 MVC

> ID：14360216
> 
> 赞同：7
> 
> 时间：2013-01-16T14:04:46.043
> 
> 标签：java, spring, hibernate, transactions, zk

*如果这是完全重复的，请纠正我，我知道这个话题经常被讨论，但找不到明确的答案。*

**问题：**

在 MVC webapp 中处理 Hibernate 对象的最佳实用解决方案是什么？

**细节：**

我正在使用 Hibernate，并希望尽可能利用延迟加载。
我正在使用 MVC 风格的 webapp。
我讨厌延迟加载初始化异常。
我讨厌在事务之间重新附加 Hibernate 对象。

**选项：**

1.  渴望加载一切
    *   解决了延迟初始化问题，但使我的查询更大
2.  使用一些“在视图中打开会话”的概念
    *   我喜欢它的简单
    *   对象仍然需要重新附加，并且在 AJAXy 设置中，非常频繁
    *   为每个请求打开一个会话
3.  在离开交易之前“触摸”我需要的物品
    *   充其量似乎很脆弱..而且乏味
4.  创建不同的、简化的、“分离的”对象，这样视图就不会看到真正的 Hibernate 对象
    *   这些可能比完整的 Hibernate 对象更简单，因此它不像模型的完整急切加载
    *   我在一些地方听说过这个建议，但似乎更多的责任/代码/工作
5.  当我想与 Hibernate 对象交互时打开一个会话。
    *   这可以很好地包裹在 Spring Service 层中，但有时似乎过度。例如：我想要`hibernateObject.getRelatedObjects()`但需要说类似的话`springService.getRelatedObjects(hibernateObject)`

我错过了什么吗？
我是不是想多了？
我有没有考虑过一些事情？

**PS：**

对于一个 Web 框架，我正在使用 ZK，但*并不*真正想要 ZK 特定的答案。
我也在使用 Spring，并且对 Spring 的特定答案很满意，因为它无处不在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T14:11:34.557

使用 4-ish - 不要在视图中使用打开会话，不要让你的休眠实体一直冒泡到视图，而是让转换器在休眠实体和你的域对象或“视图 bean”之间转换，具体取决于你的方式想工作它。

我认为 Hibernate 实体只是一种持久性策略，而不是域模型或 UI 表示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T14:35:16.623

**有以下三种方式：**

***为您的属性使用急切的获取负载：***如果您有一个大数据表，这可能是一个问题。

***使用名为 OpenSessionInView 的过滤器：***此过滤器将保持会话打开，直到您的网页完全加载。如果在此加载中请求了任何休眠对象，则将打开会话并避免延迟加载异常。

***User VOs（Valueble Objects）：***在你的应用中，会有2种对象。一个在持久层和业务层之间传递的对象，以及一个供您查看层的对象。例如，UserVO 和 UserModel。vo 将用于在视图和业务层之间传输信息。在您的业务实现中，您将使用 vo 填充模型对象以将其发送到您的持久层。使用这种模式，您不会有更多的延迟加载异常，因为所有需要的信息都会在必要时填充到您的 vo 对象中。

***一些参考：***
[OpenSessionInView](https://community.jboss.org/wiki/OpenSessioninView)
[Eager Fetching Load](http://www.coderanch.com/t/217246/ORM/databases/Hibernate-Eager-fetching)
[Hibernate Performance Tips](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/performance.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T14:18:20.023

将表示层与数据访问层混合是一个设计问题。

您的视图应该通过控制器访问模型，但是通过直接使用 Hibernate 对象，您正在混合层。IMO 数据访问应该是模型之下的另一层。即使您的实体在 xml 中进行了注释或定义，它们本身也与模型分开。

引入封装 Hibernate 逻辑的 Facade 或 Manager，并通过控制器的服务契约公开它，返回表示这些实体的有意义的对象。如果有的话，我会选择选项4。

# php - PHP 帮助正则表达式 / 解释

> ID：14360223
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:05:01.753
> 
> 标签：php, regex, curl

> **可能重复：**
> [获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)

```
<td class="lbs" colspan="4">
    <span>4 Pack.</span>
    <span>
        <span class="strike">20.5</span>
        <span class="lbs">9.5</span>
    </span>
</td> 
```

大家好！我需要一些帮助。我已经尽力寻找答案，但我似乎碰壁了。

我正在使用 curl 从上面的多个页面中获取一段代码。

我正在尝试获取每个值，例如“4 pack., 20.5, 9.5”并将它们分配给一个变量，这样我就可以将它们传递给一个数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:30:53.137

这有效：

```
preg_match_all('@<td class="lbs" colspan="4">\s*<span>([^<]+)</span>\s*<span>\s*<span class="strike">([0-9\.]+)</span>\s*<span class="lbs">([0-9\.]+)</span>\s*</span>\s*</td>@ims', $source, $matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:54:36.443

你真的必须使用正则表达式吗？

你有结构化数据，所以只需阅读 DOM。

如果你**必须**使用正则表达式试试这个：

```
@<[^>]+>[\n\r ]*([^<>\n]+)</[^>]+>@ 
```

编辑

用法：

```
$results = array();
preg_match_all(
  '@<[^>]+>[\n\r ]*([^<>\n]+)</[^>]+>@',
   $data, $results, PREG_PATTERN_ORDER
); 
```

# xcode - 将整个项目复制到 git

> ID：14360227
> 
> 赞同：0
> 
> 时间：2013-01-16T14:05:21.283
> 
> 标签：xcode, git

我已经在我的 PC 上安装了 git 并创建了一个存储库。如何将我的整个 xcode 项目复制到 git 中？我可以手动将文件复制到分支文件夹中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:08:05.583

只需将文件复制到该目录，然后执行以下操作：

```
git add .
git commit -m "Initial commit" 
```

或者......只需在您已经拥有的项目中创建您的存储库，使用`git init`.

# ruby-on-rails - Rails 呈现发出原始请求的操作

> ID：14360230
> 
> 赞同：0
> 
> 时间：2013-01-16T14:05:32.350
> 
> 标签：ruby-on-rails

我在 有一个联系表格`mysite.com/messages/new`。我喜欢在我网站的所有页面上提供此表单的想法。我有一个*小*问题。

如果我从主页提交 POST 请求`/messages`并且验证失败，`messages/new.html.erb`则将呈现（连同错误消息）。虽然我可以忍受这一点，但我更愿意渲染调用动作的模板（即`home/index.html.erb`）。

目前我的消息控制器中有以下内容：

```
def create
  @message = Message.new(params[:message])
  if @message.valid?
    MessageMailer.message_us(@message).deliver
    flash[:success] = "xthnxbai"
    redirect_to root_url
  else
    # this is where I want to change things
    render :new
  end
end 
```

我尝试过使用以下内容：

```
else
  render :template => "#{request.controller}/#{request.action}" 
```

但这给出了：

```
NoMethodError (undefined method `controller' for #<ActionDispatch::Request:0xa113168>): 
```

是否可以告诉 Rails 向我的 MessagesController 呈现发起 POST 请求的控制器和操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:58:32.533

猜猜在这种情况下，通过 AJAX 提交表单将为您节省培根。特别是考虑到它在 Rails 中是多么容易。

# wcf - Windows Phone 7 WCF 回调轮询双工绑定错误

> ID：14360233
> 
> 赞同：0
> 
> 时间：2013-01-16T14:05:48.300
> 
> 标签：wcf, windows-phone-7, pollingduplexhttpbinding

我在 Windows Phone 7 项目中使用 WCF。我想在我的项目中使用 WCF 的回调服务。但是，在项目中使用 wsDualHttpBinding 时出现错误。所以，我用谷歌搜索了很多。所以，在我之后的结论是在 Windows 手机应用程序中使用 PollingHttpBinding。所以，我继续使用 PollingDuplex 工作。我从以下路径使用服务器端 WCF 服务中的 PollingDuplex 引用：“C:\Program Files (x86)\Microsoft SDKs\Silverlight\v4.0\Server\System.ServiceModel.PollingDuplex.dll”。它运行良好，还能够通过 SLSVCUTIL.EXE 使用该服务。但是当我尝试将 PollingDuplex ("C:\Program Files (x86)\Microsoft SDKs\Silverlight\v4.0\Client\System.ServiceModel.PollingDuplex.dll") 引用包含到我的 Windows Phone 7 客户端代码时，

“类型 Universe 无法解析程序集：System.ServiceModel.Extensions，Version=2.0.5.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”

请帮助我解决此错误。

系统规格：

Windows 8（64 位）
Visual Studio 2012
Windows Phone 8 SDK
Silverlight 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:22:27.947

我的猜测是您引用的 Duplex dll 不是为 Windows Phone 构建的，也不是通过使用与 Windows Phone 兼容的程序集构建的......所以需要使用 WP 程序集从头开始重建这些 dll......我在尝试引用一些时遇到了类似的问题Windows Phone 7 中的程序集是为桌面 silverlight 制作的，而不是在不支持增强现实并且人们使用桌面 Silverlight 增强现实项目 (SLAR) 时返回......最终有一个解决方案，但它很麻烦。如果你能解决这个问题，我真的很想知道如何请？Windows Phone 是否完全支持 PollingDuplex？如果没有，是否有任何替代方法可以使用相同的 WCF 服务器绑定？

# kineticjs - 在 KineticJS 中使用变换矩阵

> ID：14360237
> 
> 赞同：4
> 
> 时间：2013-01-16T14:05:59.743
> 
> 标签：kineticjs, box2dweb

我有一个用 Box2Dweb 模拟的身体和一个附在身体上的图像。我想获取身体变换矩阵并将变换应用于图像（使用变换绘制图像），使其在屏幕上的位置和方向（相对）与身体的位置和方向相匹配。我在 KineticJS 中找不到与转换矩阵一起使用的函数。有用于移动和旋转的单独函数，并且有一个`Kinetic.Transform`内部包含一些“矩阵”的类，但我不知道如何处理它。某处还有一个`_setTransform`函数，但同样不知道如何使用它（下划线是否表明我不能直接调用它或什么？）。

我用这段代码在纯 Javascript 中绘制了身体上的图像：

```
function drawImageOverBody(context, body, image, scale)
{
    context.save();
    var pos = body.GetPosition();
    var center = [scale*pos.x, scale*pos.y];
    var R = body.GetTransform().R;
    context.translate(center[0], center[1]);
    context.transform(R.col1.x, R.col1.y, R.col2.x, R.col2.y, 0, 0);
    context.translate(-center[0], -center[1]);
    context.drawImage(image, center[0] - image.width/2.0, center[1] - image.height/2.0);
    context.restore();
} 
```

我如何对 KineticJS 做同样的事情？

编辑：显然，我可以从 Box2d 获得的唯一转换是平移和旋转，我可以通过在 Box2d 主体上调用`GetPosition()`和来获得，然后使用和`GetAngle()`应用于 KineticJS 图像。所以我在这里并不需要矩阵形式的转换。不过，很好奇。`setX(), setY()``setRotation()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:22:19.603

该类`Kinetic.Transform`可用于计算给定变换矩阵的旋转、缩放和偏移。设置变换矩阵的`m`属性`Kinetic.Transform`，然后使用变换对象计算旋转、缩放和平移。然后可以将旋转、缩放和平移应用于任何`Kinetic.Node`

翻译由矩阵中的最后两项直接给出。

如果您从其他地方获得转换，则可以将其应用于`Kinetic.Transform`这样的：

```
var tf = new Kinetic.Transform();
tf.m = [Math.sqrt(2), Math.sqrt(2), -3/2*Math.sqrt(2), 3/2*Math.sqrt(2), 4, 5];

```

翻译是最简单的。它由最后两个元素给出：X 方向 4，Y 方向 5。还有一种获取方法。

```
var 翻译 = tf.getTranslation();

```

您可以从变换矩阵中获得比例：

```
var m = tf.getMatrix(); // or tf.m
var scaleX = Math.sqrt(m[0]*m[0] + m[1]*m[1]);
var scaleY = Math.sqrt(m[2]*m[2] + m[3]*m[3]); 
```

不要忘记图像可以在 X 或 Y 轴上翻转，或两者兼而有之。计算行列式以考虑到这一点：

```
if(m[0]*m[3] - m[1]*m[2] < 0){
    scaleY = -scaleY;
} 
```

调整刻度的符号以更轻松地获得旋转：

```
if(m[0] < 0){
    scaleX = -scaleX;
    scaleY = -scaleY;
} 
```

现在是最后一个，轮换。您可以使用`Math.asin`or来获得它`Math.acos`，但您必须考虑旋转角度的象限。这是解决它的一种方法：

```
var angle = Math.acos(m[3] / scaleY);
if(m[2]/scaleY > 0){
    angle = -angle;
} 
```

请注意，应用不同转换的顺序很重要。如果您使用上述方法，首先应用平移，然后旋转，然后缩放。

# asp.net-mvc-4 - ASP .NET MVC 4 视图包含两个部分视图，每个视图中都有一个表单

> ID：14360239
> 
> 赞同：4
> 
> 时间：2013-01-16T14:06:03.030
> 
> 标签：asp.net-mvc-4, partial-views, modelstate, model-validation, strongly-typed-view

在我的 MVC 4 应用程序中，我有一个索引视图。在这个视图中，我有两个 div 标签，其中呈现了部分视图。有两个按钮在单击时使用 jQuery 在这两个 div 之间切换。Partial Views 是强类型的，每个都有它的模型。

问题：

如何将模型传递给局部视图？如何处理来自部分视图的 POST 请求？在 POST 操作方法中，如果 ModelState 无效，我如何重新渲染知道 ModelStae 的视图？

在这种情况下，部分视图是要走的路吗？使用 MVC 4 是否有更好的方法来实现这一点？

任何帮助表示赞赏。

这是我尝试过的但没有成功的方法：

**索引.cshtml**

```
<div id="token">
   <!-- insert Token based PartialView -->
@{
    //Html.RenderPartial("_TokenPartial");
    Html.RenderAction("TokenBased");
} 
```

```
<div id="credentials">
  <!-- insert Credentials based PartialView -->
@{
   //Html.RenderPartial("_CredentialPartial");
   Html.RenderAction("CredentialsBased");
}
</div> 
```

我尝试过`HTML.RenderPartial("_partial")`但无法指定部分视图所基于的模型。然后我尝试使用`Html.RenderAction("TokenBased")`并在此操作中返回带有此视图模型实例的部分视图：

**凭据控制器.cs**

```
 public ActionResult TokenBased(string token)
    {
        ...

        return View("_TokenPartial", new TokenModel);
    } 
```

这是部分视图：

**TokenPartial.cshtml**

```
 @model TokenModel

    @using (Html.BeginForm("CreateAgreementToken", "Credential"))
    {
        <div class="formscontent">
            @Html.LabelFor(x => x.Token) <br />
            @Html.TextBoxFor(x => x.Token, new {size = "44" })
            @Html.ValidationMessageFor(x => x.Token)
            <br />
            <br />

            @Html.LabelFor(x => x.Email) <br />
            @Html.TextBoxFor(x => x.Email, new {size = "30" })
            @Html.ValidationMessageFor(x => x.Email)
            <br />
            <br />

            @Html.CheckBoxFor(x => x.AcceptSubsTerms, new { value = "SubsTerms"})
            @Html.LabelFor(x => x.AcceptSubsTerms)
            @Html.ValidationMessageFor(x => x.AcceptSubsTerms)
            @Html.ActionLink("SubsTermsLinkText", "Subscription", null, new {target = "_blank"})
            <br />
            <br />
        </div>
        <br />

        <input class="mainbutton" type="submit" value="CreateAgreement_btn_txt"/><br />

    } 
```

这是 POST 操作方法：

```
 [HttpPost]
    public ActionResult CreateAgreementToken(TokenModel model)
    {

        if (ModelState.IsValid)
        {
            // Create Agreement
            //
            //

            return RedirectToAction("Welcome");
        }

        // If we got this far, something failed, redisplay form
        ModelState.AddModelError("", "The user credentials provided are incorrect.");

        // Where to redirect to.
        // How to re-render the Index view that's aware of the ModelState errors

        return RedirectToAction("Index");
    } 
```

如何处理控制器操作方法、索引视图和部分视图之间的交互，就像在“正常”情况下，您有一个索引操作方法渲染一个索引视图，并将其传递一个模型实例。然后在 Index POST 操作方法中，如果验证失败，则通过调用 Index 视图将无效模型传递给它来重新显示表单。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:38:07.070

要将模型传递给局部模型，您可以使用 @Html.Partial("SomeFile", SomeModel);

如果您有多个表单，我会建议您为它们提供每个不同的控制器操作。您可以使用@Html.BeginForm 指定控制器和操作参数。

部分只是组织html的一种方式。一旦页面被渲染，它们就没有上下文，所以我不会太担心这一点。

为了让您的视图了解模型状态中的错误，您需要将模型传递给它。而不是重定向到索引返回索引视图并将模型作为第二个参数传递。

# spring - Apache CXF 管道匹配策略

> ID：14360244
> 
> 赞同：6
> 
> 时间：2013-01-16T14:06:38.053
> 
> 标签：spring, cxf

也许有人知道 Apache CXF 如何匹配在 Spring 中配置的 HTTP 管道？我的意思是，这是管道定义：

```
<http-conf:conduit name="{http://abc.com/wsdl}MyPortHttp.http-conduit">
    <http-conf:client Connection="Keep-Alive" MaxRetransmits="1" ReceiveTimeout="180000" />
</http-conf:conduit> 
```

如果我省略`.http-conduit`部分会发生什么？实际匹配的代码在哪里？我的快速搜索没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:19:28.857

它主要在`org.apache.cxf.transport.http.HTTPTransportFactory#configure(Object, String, String)`. 然后它派发到`org.apache.cxf.configuration.spring.ConfigurerImpl.configureBean(String, Object, boolean)`. 如果省略`.http-conduit`部分，CXF 的配置将不可见，因为它具有非常简单的匹配行为：通过通配符或通过管道名称（`org.apache.cxf.transport.http.HTTPConduit.getBeanName()`包含硬编码`.http-conduit`后缀）。

此外，当通配符管道覆盖特定于端口的管道时，我遇到了一种奇怪的行为。检查[这个](https://issues.apache.org/jira/browse/CXF-4763)问题。

# django - 芹菜计划任务立即执行而不是延迟

> ID：14360246
> 
> 赞同：0
> 
> 时间：2013-01-16T14:06:45.957
> 
> 标签：django, redis, celery, django-celery, celery-task

我正在尝试使用:(是一个带有装饰器的简单python方法)来安排一个芹菜任务`mytask.apply_async(countdown=120)`的`mytask`执行`@task`。但是，当我调用它时，任务会立即执行，而不是在 2 分钟后执行，并返回类似`<EagerResult: 2b41cba1-81ff-489c-81bb-f1ad994d4441>`. 知道我在这里缺少什么吗？我也尝试过使用`eta`而不是`countdown`. 我的芹菜配置如下：

`-- v3.0.12 (Chiastic Slide)
[Configuration]
-- broker: redis://localhost:6379/0
-- app: default:0x106090f50 (djcelery.loaders.DjangoLoader)
-- concurrency: 4 (processes)
-- events: OFF (enable -E to monitor this worker)
[Queues]
-- celery: exchange:celery(direct) binding:celery`
如果有帮助，我会以这种方式开始我的芹菜： `python manage.py celeryd -l DEBUG -B`并且有定期的 crontasks 可以正常工作。

谢谢

# wpf - 使用 wpf mediaelement 没有视频但有音频

> ID：14360247
> 
> 赞同：1
> 
> 时间：2013-01-16T14:06:47.833
> 
> 标签：wpf, xaml, wpf-controls, mediaelement, xamlreader

我的 wpf 应用程序中有一个富文本框，我正在使用 mediaelement 向其中添加视频。然后我将 flowdocument 转换为 xaml 并将其存储到数据库中。当我从数据库中获取 xaml 并将其转换回 flowdocument 并单击播放按钮时，我可以听到音频但看不到视频。Loadedbehavior 设置为手动。

奇怪的是，当我将加载行为设置为播放时，我可以看到视频。

PS我英语不好。所以请原谅我。

以下是 XAML 和源：

```
 <RichTextBox 
    Width="779"
    Height="200"
    IsDocumentEnabled="True">
    <FlowDocument c:FlowDocumentBehavior.DocumentResourceName="inlineTemplate" c:FlowDocumentBehavior.DocumentSource="{Binding VignetteTextXaml}"></FlowDocument>
    </RichTextBox> 
```

以下是我将 xaml 字符串转换为流文档的代码：

```
FlowDocument doc = d as FlowDocument;
        RichTextBox rtb = doc.Parent as RichTextBox;
        string xamlString = FlowDocumentBehavior.GetDocumentSource(doc);
        string templateName = FlowDocumentBehavior.GetDocumentResourceName(doc);
        if (xamlString != null && templateName != null)
        {
            StringReader stringReader = new StringReader(xamlString);
            XmlReader xmlReader = XmlReader.Create(stringReader);                
            if (!string.IsNullOrWhiteSpace(xamlString))
            {

                doc = (FlowDocument)XamlReader.Parse(xamlString);
                rtb.Document = doc;
                rtb.IsDocumentEnabled = true;
            }
        } 
```

只有音频有效，视频无效。:(

先感谢您。

# xcode - 从 NSArray 中删除不必要的数据

> ID：14360250
> 
> 赞同：0
> 
> 时间：2013-01-16T14:07:01.127
> 
> 标签：xcode, cocoa, filter, nsarray

我有一个 NSArray，其中有很多来自 JSON 的数据。这是来自我的 JSON 数据库

```
 {
          "ID":"6173",
          "Name":"Heuriger Familie Haller",
          "BeschreibungApp":"Heuriger Familie Haller, 2102 Bisamberg",
          "Link":"http:\/\/heurigenapp.nocache.gugler.at\/app.php?id=6173",
          "Icon":"Weintraube",
          "Latitude":"48.33284",
          "Longitude":"16.36383",
          "Altitude":"0",
          "Ort":"Bisamberg"
   } 
```

我有 20 个这样的对象。而这一切我都在一个 NSArray 中。但我只想要一个带有“Ort”的数组，所以我不需要大部分信息。

我可以这样做吗：

```
newsTown = [news valueForKey:@"Ort"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:22:48.457

当然，KVC 来救援 :D

您想遵循 KeyPath：

`Array *new = [array valueForKeyPath:@"Ort"];`

假设新闻是您的 JSON dics 的 NSArray

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:09:25.890

当然，你可以这样做：

```
NSArray * newsTownArray = [NSArray arrayWithObject: [news valueForKey: @"Ort"]]; 
```

# c# - 将字节 [] 转换为图像

> ID：14360257
> 
> 赞同：1
> 
> 时间：2013-01-16T14:07:15.927
> 
> 标签：c#, type-conversion, byte

我已将图像上传到我的数据库中`byte[]`，现在我试图将其显示出来。

出现错误 - 用户代码未处理参数异常`Parameter is not valid`

在这一行

```
newImage = System.Drawing.Image.FromStream(stream); 
```

这是我的代码

```
for (int i = 0; i < topRatingList.Count; i++)
            {
                int commentRating = topRatingList[i].CommentRating;
                int drinkID = topRatingList[i].DrinkID;

                if (i == 0)
                {
                    DrinkMenuDAO drink = DrinkMenuBLL.getDrinkMenu(drinkID);
                    LinkButton1.Text = drink.DrinkName; 
                    ImageButton1.ImageUrl = byteArrayToImage(drink.DrinkImage);
                }
            }

private string byteArrayToImage(byte[] byteArrayIn)
    {
        System.Drawing.Image newImage;
        string strFileName = Server.MapPath("~/Temp/images/") + ".jpg";
        if (byteArrayIn != null)
        {
            using (MemoryStream stream = new MemoryStream(byteArrayIn))
            {
                newImage = System.Drawing.Image.FromStream(stream);
                newImage.Save(strFileName);
            }
            return strFileName;
        }
        else
        {
            return "";
        }
    } 
```

* * *

我用来存储图像的代码

```
protected void bn_upload_Click(object sender, EventArgs e)
    {
        lbl_msg.Text = "";
        Stream imgStream = FileUpload1.PostedFile.InputStream;
        BinaryReader imgBinary = new BinaryReader(imgStream);
        bytes = imgBinary.ReadBytes((Int32)imgStream.Length);
        imgBinary.Close();
        imgStream.Close();
        string src = byteArrayToImage(bytes);
        if (src.Equals(""))
        {
        }
        else
        {
            Image1.ImageUrl = "~/Temp/UploadedImage.jpg";
        }
    }

    private string byteArrayToImage(byte[] byteArrayIn)
    {
        System.Drawing.Image newImage;
        string strFileName = Server.MapPath("~/Temp/") + "UploadedImage.jpg";
        if (byteArrayIn != null)
        {
            using (MemoryStream stream = new MemoryStream(byteArrayIn))
            {
                newImage = System.Drawing.Image.FromStream(stream);
                newImage.Save(strFileName);
            }
            return strFileName;
        }
        else
        {
            return "";
        }
    }

    protected void btn_submit_Click(object sender, EventArgs e)
    {
        DrinkMenuBLL.uploadImg(bytes);
        lbl_msg.Text = "uploaded";
    } 
```

我`varbinary(MAX)`在数据库和我使用的sql中使用

```
public static void UploadImg(byte[] drinkImage)
    {

        SqlConnection con = new SqlConnection(Constring.getConString());

        string sql = "Update DrinkMenu set drinkImage = (@imgData) where drinkID = 4";

        SqlCommand cmd = new SqlCommand(sql, con);
        cmd.Parameters.Add("@imgData", SqlDbType.Binary).Value = drinkImage;
        try
        {
            con.Open();
            cmd.ExecuteNonQuery();
        }
        finally
        {
            con.Close();
            cmd.Dispose();
            con.Dispose();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:21:12.330

一个问题可能是以下一个：

```
bytes = imgBinary.ReadBytes((Int32)imgStream.Length); 
```

如果流 Length 大于 Int32.MaxValue，因为它是 Int64 怎么办？也许您正在截断您的图像...使用此方法将流读取到缓冲区：

```
public static Byte[] ReadStream(Stream input)
{
    Byte[] buffer = new Byte[(16 * 1024)];

    using (MemoryStream stream = new MemoryStream())
    {
        Int32 read;

        while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
            stream.Write(buffer, 0, read);

        return stream.ToArray();
    }
}

protected void bn_upload_Click(object sender, EventArgs e)
{
    lbl_msg.Text = "";

    Byte[] bytes = ReadStream(FileUpload1.PostedFile.InputStream);
    String src = byteArrayToImage(bytes);

    if (!src.Equals(""))
        Image1.ImageUrl = "~/Temp/UploadedImage.jpg";
} 
```

# python - 如何有效地组合两个时间序列来交替？

> ID：14360261
> 
> 赞同：3
> 
> 时间：2013-01-16T14:07:34.477
> 
> 标签：python, pandas, time-series

假设我有两个**很长的**系列——大的和小的

```
index = pd.date_range(start='1952', periods=10**6, freq='s')
big = pd.Series(np.ones(len(index))*97, index)
small = pd.Series(np.ones(len(index))*2, index) 
```

我想要实现的是创建一个新系列，它结合`big`和`small`，在它们的值之间交替，`borders`用于确定何时切换到另一个（例如，每 5 秒有一个边框）

```
borders = pd.date_range(start='1952', periods=len(index)/5.0, freq='5s') 
```

是否有一个有效的基于矩阵的操作组合可以用来实现这一点？我尝试查看[文档](http://pandas.pydata.org/pandas-docs/dev/merging.html#database-style-dataframe-joining-merging)中的各种 join、merge 等运算符，但找不到任何提供类似逻辑的东西。

`len()`我可以使用 for 循环来实现这一点，但即使对于 10^5 的系列也会持续一分钟以上

```
alternating = pd.Series()
for i in range(1, 100, 2):
    b0 = borders[i-1]
    b1 = borders[i]
    b2 = borders[i+1]
    sec = pd.offsets.Second(1)
    alternating = alternating.append(small[b0:b1-sec]).append(big[b1:b2-sec]) 
```

的样本输出`alternating.head(24)`

```
1952-01-16 00:00:00     2
1952-01-16 00:00:01     2
1952-01-16 00:00:02     2
1952-01-16 00:00:03     2
1952-01-16 00:00:04     2
1952-01-16 00:00:05    97
1952-01-16 00:00:06    97
1952-01-16 00:00:07    97
1952-01-16 00:00:08    97
1952-01-16 00:00:09    97
1952-01-16 00:00:10     2
1952-01-16 00:00:11     2
1952-01-16 00:00:12     2
1952-01-16 00:00:13     2
1952-01-16 00:00:14     2
1952-01-16 00:00:15    97
1952-01-16 00:00:16    97
1952-01-16 00:00:17    97
1952-01-16 00:00:18    97
1952-01-16 00:00:19    97
1952-01-16 00:00:20     2
1952-01-16 00:00:21     2
1952-01-16 00:00:22     2
1952-01-16 00:00:23     2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:12:59.823

如果您的经期不到一分钟，您可以尝试以下方法：

```
index = pd.date_range(start='1952', periods=10**6, freq='s')
big = pd.Series(np.ones(len(index))*97, index)
small = pd.Series(np.ones(len(index))*2, index)

alternating = big[big.index.second % 10 >= 5].combine_first(small) 
```

`alternating`然后看起来完全按照您的要求，并在 150 毫秒内计算。

# c# - 在 C# 中的实体数据模型中动态设置连接字符串

> ID：14360264
> 
> 赞同：1
> 
> 时间：2013-01-16T14:07:39.260
> 
> 标签：c#, entity-framework

我正在开发一个依赖 ADO.NET 实体数据模型的项目。我有 4 个相同的数据库模式，一个用于我公司的每个部门（营销、财务、行政和人力资源）。我目前知道我的每个用户所在的部门。我想使用部门来确定用户可以连接到哪个数据库。

在 C# 代码中，如何在运行时设置连接字符串？目前，我有

```
string connectionString = GetUsersConnectionString();
using (MyEntities entities = new MyEntities())
{
  MyDataEntity myDataEntity = new MyDataEntity();

  // Save to the database
  entities.MyDataEntity.Add(myDataEntity);
  entities.SaveChanges();
} 
```

我在这里想念什么？如何设置`MyEntities`to的连接字符串`connectionString`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:33:58.067

这是一个很好的方法。

```
public static class ConnectionManager
    {
        public static string GetSqlConnectionString()
        {

            var serverName = @"" + ConfigurationManager.AppSettings["ServerName"];
            var databaseName = ConfigurationManager.AppSettings["DatabaseName"];
            var username = ConfigurationManager.AppSettings["Username"];
            var password = ConfigurationManager.AppSettings["Password"];

            SqlConnectionStringBuilder providerCs = new SqlConnectionStringBuilder();

            providerCs.DataSource = serverName;
            providerCs.InitialCatalog = databaseName;
            //providerCs.IntegratedSecurity = true;
            //providerCs.UserInstance = true;
            providerCs.UserID = username;
            providerCs.Password = password;
            var csBuilder = new EntityConnectionStringBuilder();

            csBuilder.Provider = "System.Data.SqlClient";
            csBuilder.ProviderConnectionString = providerCs.ToString();

            csBuilder.Metadata = string.Format("res://{0}/yourDataBase.csdl|res://{0}/yourDataBase.ssdl|res://{0}/yourDataBase.msl",
                typeof(yourDataBaseEntities).Assembly.FullName);

            return csBuilder.ToString();
        }
    } 
```

**用法：**

在你的`app.config`地方这个代码

```
<appSettings>
    <add key="ServerName" value="UNKNOWN01-PC\sampleServer"/>
    <add key="DatabaseName" value="samplDatabase"/>
    <add key="Username" value="sampleUser"/>
    <add key="Password" value="sampPass"/>
</appSettings> 
```

然后，

```
string connectionString = GetSqlConnectionString();
using (MyEntities entities = new MyEntities(connectionString))
{
  MyDataEntity myDataEntity = new MyDataEntity();

  // Save to the database
  entities.MyDataEntity.Add(myDataEntity);
  entities.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:11:23.360

利用：

```
string connectionString = GetUsersConnectionString();
using (MyEntities entities = new MyEntities(new EntityConnection(connectionString )))
{
  MyDataEntity myDataEntity = new MyDataEntity();

  // Save to the database
  entities.MyDataEntity.Add(myDataEntity);
  entities.SaveChanges();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T01:36:13.020

在您的 Model.Designer.cs 文件中，您必须初始化一个新的实体对象，该对象采用所需数量的参数。例如：

```
namespace:MyModel
{
#region Contexts 
public partial class MyEntities : ObjectContext
{
    #region Constructors

public MyEntities(EntityConnection connection) //add the required arguments
        : base(connection, "Entities")
    {
        this.ContextOptions.LazyLoadingEnabled = true;
        OnContextCreated();
    }
.... 
```

然后使用您的新实体来操作连接字符串检索到的任何数据，例如

```
 MyModel.MyEntities db = new MyModel.Entities(connectionString);
 var query = from rows in db.Table_Name orderby rows.ID select rows; 
```

# jquery - 如何通过 $.ajax() 获取数据

> ID：14360265
> 
> 赞同：0
> 
> 时间：2013-01-16T14:07:40.560
> 
> 标签：jquery, ajax

```
$.ajax({
    type: "GET",
    url: "wordtyping_sql.php",
    data: "id=" + id + "&formname=" + formname,
    success: function(msg){
        alert( "Data Saved: " + msg);
    }
}); 
```

`msg`其中包含三行`wordtyping_sql.php`：

```
echo "one"; 
echo "two"; 
echo "three"; 
```

如何单独获取这些数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T14:12:03.153

您要做的是让您的 PHP 代码回显一些 JSON 数据。然后，您将能够访问您希望的任何变量。

在`wordtyping_sql.php`-

```
$data = array(
  'one' => 1,
  'two' => 2,
  'three' => 3
);
echo json_encode($data); 
```

现在在您的 jQuery 中，您需要指定您的 AJAX 调用期待一个 JSON 作为回报 -

```
$.ajax({
    type: "GET",
    url: "wordtyping_sql.php",
    data: "id=" + id + "&formname=" + formname,
    dataType : 'json', // <------------------ this line was added
    success: function(response){
        alert( response.one );
        alert( response.two );
        alert( response.three );
    }
}); 
```

查看[jQuery 的 AJAX 方法的相关文档页面](http://api.jquery.com/jQuery.ajax/)。特别是`dataType`参数 -

> **dataType** - 您期望从服务器返回的数据类型...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:13:09.840

将数据作为 JSON 字符串返回。jQuery 将解析它并将其转换为您可以使用的对象。

```
$.ajax({
    type: "GET",
    url: "wordtyping_sql.php",
    data: "id=" + id + "&formname=" + formname,
    dataType: "json",
    success: function(msg){
        alert( "Data Saved: " + msg);
    }
}); 
```

wordtyping_sql.php

```
echo '["one","two","three"]'; 
```

然后在您的成功处理程序中，您可以以 msg[0]、msg[1] 的形式访问数据。等等

# jquery - 使用 jQuery 和 Masonry 无限滚动获取动态内容

> ID：14360266
> 
> 赞同：2
> 
> 时间：2013-01-16T14:07:47.140
> 
> 标签：jquery, html, jquery-masonry

我正在使用 jQuery Masonery 实现无限滚动：

> $(函数(){
> 
> ```
> var $container = $('#container');
> 
> $container.imagesLoaded(function(){
>   $container.masonry({
>     itemSelector: '.box',
>     columnWidth: 100
>   });
> });
> 
> $container.infinitescroll({
>   navSelector  : '#page-nav',    // selector for the paged navigation 
>   nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
>   itemSelector : '.box',     // selector for all items you'll retrieve
>   loading: {
>       finishedMsg: 'No more pages to load.',
>       img: 'http://i.imgur.com/6RMhx.gif'
>     }
>   },
>   // trigger Masonry as a callback
>   function( newElements ) {
>     // hide new items while they are loading
>     var $newElems = $( newElements ).css({ opacity: 0 });
>     // ensure that images load before adding to masonry layout
>     $newElems.imagesLoaded(function(){
>       // show elems now they're ready
>       $newElems.animate({ opacity: 1 });
>       $container.masonry( 'appended', $newElems, true ); 
>     });
>   }
> );
>    }); 
> ```

这是最简单的示例，但我想知道是否可以使用 AJAX 获取动态内容，而不仅仅是示例中显示的静态页面：

```
<nav id="page-nav">
  <a href="../pages/2.html"></a>
</nav> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:55:30.890

这很简单。请按照以下步骤操作。

更改导航链接：

```
<nav id="page-nav">
  <a href="../pages/AjaxSource.php?no=2"></a>
</nav> 
```

你的 AjaxSource.php 应该是这样的

```
<?php 
$pageNo= $_GET['no'];
?>

<?php if ($pageNo==2){?>

<div id="container" class="transitions-enabled clearfix">

    <div class="box photo col3">
      <a href="http://www.flickr.com/photos/nemoorange/5013039951/" title="Stanley by Dave DeSandro, on Flickr"><img src="http://farm5.static.flickr.com/4113/5013039951_3a47ccd509.jpg" alt="Stanley" /></a>
    </div>

    <div class="box photo col3">
      <a href="http://www.flickr.com/photos/nemoorange/5013039951/" title="Stanley by Dave DeSandro, on Flickr"><img src="http://farm5.static.flickr.com/4113/5013039951_3a47ccd509.jpg" alt="Stanley" /></a>
    </div>

</div>

<?php } ?> 
```

# java - “无法启动活动组件信息”机器人强制关闭问题

> ID：14360268
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:07:55.550
> 
> 标签：java, android, xml

这是该类的java代码

```
package com.warriorsoft.mtgupanddown;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity implements View.OnClickListener {
    int guy1;
    int guy2;
    MediaPlayer sound;
    Button plus1g1, plus1g2, min1g1, min1g2, plus5g1, plus5g2, min5g1, min5g2,
            GG, RESET;
    TextView g1, g2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        setContentView(R.layout.activity_main);
        super.onCreate(savedInstanceState);

        guy1 = 20;
        guy2 = 20;
        min5g1 = (Button) findViewById(R.id.button1); // x
        plus5g1 = (Button) findViewById(R.id.button2); //x
        plus1g1 = (Button) findViewById(R.id.button3); // x
        min1g1 = (Button) findViewById(R.id.button4); // x
        min5g2 = (Button) findViewById(R.id.button5); // x
        plus5g2 = (Button) findViewById(R.id.button6); //x
        min1g2 = (Button) findViewById(R.id.button7); // x
        plus1g2 = (Button) findViewById(R.id.button8); //x
        RESET = (Button) findViewById(R.id.RESET);
        GG = (Button) findViewById(R.id.GG);
        g1 = (TextView) findViewById(R.id.tvPlayer1HP);
        g2 = (TextView) findViewById(R.id.tvPlayer2HP);

        min5g1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                guy1 -= 5;
                g1.setText(guy1);

            }
        });
        min5g2.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                guy2 -= 5;
                g2.setText(guy2);
            }
        });
        min1g1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                guy1 -= 1;
                g1.setText(guy1);
            }
        });
        min1g2.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                guy2 -= 1;
                g2.setText(guy2);
            }
        });
        plus5g2.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                guy2 += 5;
                g2.setText(guy2);
            }
        });
        plus5g1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                guy1 += 5;
                g1.setText(guy1);
            }
        });
        plus1g1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                guy1 += 1;
                g1.setText(guy1);
            }
        });
        plus1g2.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                guy2 += 1;
                g2.setText(guy2);
            }
        });

        RESET.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View arg0){
            guy1 = 20;
            guy2 = 20;

            g2.setText(guy2);
            g1.setText(guy1);
            }
        });
        GG.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View arg0){
            sound = MediaPlayer.create(MainActivity.this, R.raw.gg );
            }
        });

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

} 
```

这是布局xml文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/tvPlayer2HP"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="36dp"
        android:text="20"
        android:textSize="35dp" />

    <TextView
        android:id="@+id/tvPlayer1HP"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="36dp"
        android:text="20"
        android:textSize="35dp" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:layout_marginLeft="18dp"
        android:layout_toRightOf="@+id/button1"
        android:text="+5" />

    <Button
        android:id="@+id/button4"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button3"
        android:layout_alignBottom="@+id/button3"
        android:layout_alignLeft="@+id/button2"
        android:text="-1" />

    <Button
        android:id="@+id/button3"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button2"
        android:layout_alignRight="@+id/button1"
        android:layout_marginBottom="28dp"
        android:text="+1" />

    <Button
        android:id="@+id/button6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button5"
        android:layout_alignBottom="@+id/button5"
        android:layout_alignParentRight="true"
        android:text="+5" />

    <Button
        android:id="@+id/button5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button2"
        android:layout_alignBottom="@+id/button2"
        android:layout_marginRight="14dp"
        android:layout_toLeftOf="@+id/button6"
        android:text="-5" />

    <Button
        android:id="@+id/button7"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/button5"
        android:layout_alignTop="@+id/button4"
        android:text="+1" />

    <Button
        android:id="@+id/button8"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button7"
        android:layout_alignBottom="@+id/button7"
        android:layout_toRightOf="@+id/button5"
        android:text="-1" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/editText1"
        android:layout_alignLeft="@+id/button5"
        android:ems="10"
        android:hint="Guy 1" >
    </EditText>

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/button2"
        android:layout_below="@+id/button1"
        android:layout_marginTop="36dp"
        android:ems="10"
        android:hint="Guy 2" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/tvPlayer1HP"
        android:layout_marginTop="74dp"
        android:text="-5" />

    <ImageView
        android:id="@+id/GG"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tvPlayer2HP"
        android:layout_centerHorizontal="true"
        android:minHeight="140dp"
        android:minWidth="120dp"
        android:src="@drawable/gg" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="14dp"
        android:text="Optimal sideways"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/RESET"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="RESET" />

</RelativeLayout> 
```

这是logcat

```
01-16 14:01:51.292: W/dalvikvm(699): threadid=1: thread exiting with uncaught exception (group=0x40015560)
01-16 14:01:51.302: E/AndroidRuntime(699): FATAL EXCEPTION: main
01-16 14:01:51.302: E/AndroidRuntime(699): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.warriorsoft.mtgupanddown/com.warriorsoft.mtgupanddown.MainActivity}: java.lang.ClassCastException: android.widget.ImageView
01-16 14:01:51.302: E/AndroidRuntime(699):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-16 14:01:51.302: E/AndroidRuntime(699):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-16 14:01:51.302: E/AndroidRuntime(699):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-16 14:01:51.302: E/AndroidRuntime(699):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-16 14:01:51.302: E/AndroidRuntime(699):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-16 14:01:51.302: E/AndroidRuntime(699):  at android.os.Looper.loop(Looper.java:123)
01-16 14:01:51.302: E/AndroidRuntime(699):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-16 14:01:51.302: E/AndroidRuntime(699):  at java.lang.reflect.Method.invokeNative(Native Method)
01-16 14:01:51.302: E/AndroidRuntime(699):  at java.lang.reflect.Method.invoke(Method.java:507)
01-16 14:01:51.302: E/AndroidRuntime(699):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-16 14:01:51.302: E/AndroidRuntime(699):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-16 14:01:51.302: E/AndroidRuntime(699):  at dalvik.system.NativeStart.main(Native Method)
01-16 14:01:51.302: E/AndroidRuntime(699): Caused by: java.lang.ClassCastException: android.widget.ImageView
01-16 14:01:51.302: E/AndroidRuntime(699):  at com.warriorsoft.mtgupanddown.MainActivity.onCreate(MainActivity.java:33)
01-16 14:01:51.302: E/AndroidRuntime(699):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-16 14:01:51.302: E/AndroidRuntime(699):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-16 14:01:51.302: E/AndroidRuntime(699):  ... 11 more
01-16 14:01:53.712: I/Process(699): Sending signal. PID: 699 SIG: 9 
```

问题是在手机上运行代码。它告诉我程序以某种意想不到的方式中断并迫使我强制关闭。如果有人能帮助我理解我做错了什么，我将永远感激我对编程还是新手，几乎无法理解 logcats 请放轻松谢谢你的尝试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:10:33.173

您正在找到`ImageView`并将其转换为 Button。

检查这行代码。

```
GG = (Button) findViewById(R.id.GG); 
```

将 GG as`ImageView`和 typecast的类型更改`ImageView`为如下：

```
ImageView GG;

GG = (ImageView) findViewById(R.id.GG); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:11:49.170

把这个改成这个

```
GG = (Button) findViewById(R.id.GG); 
```

至

```
GG = (ImageView) findViewById(R.id.GG); 
```

您不能将 ImageView 转换为 Button。你在做什么

# c# - 更改 Telerik GridViewComboBoxColumn 的过滤类型

> ID：14360274
> 
> 赞同：0
> 
> 时间：2013-01-16T14:08:14.697
> 
> 标签：c#, telerik, telerik-grid, datagridviewcombobox

我有一个 Telerik GridView 包含 ComboBox 列，过滤类型是“StartWith”。我想将其更改为“包含”。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:37:48.980

在这里查看[Telerik 网格过滤指南](http://demos.telerik.com/aspnet-ajax/grid/examples/generalfeatures/filtering/defaultcs.aspx)

# python - 未调用 PYTHON-SUDS DocumentPlugin 加载的方法

> ID：14360275
> 
> 赞同：1
> 
> 时间：2013-01-16T14:08:20.793
> 
> 标签：python, exchangewebservices, suds

如果这是一个微不足道的问题，请原谅我。我正在尝试使用 Exchange Web Service (EWS) 和 suds 0.4 版阅读电子邮件。由于我需要在 suds 创建服务之前修改 WSDL，因此我使用下面的代码尝试在 suds 解析之前修改 WSDL。但是据我所知，插件的加载方法没有被调用。

谁能告诉我我做错了什么？我曾尝试使用 suds-ews，但它似乎已经过时，因为我无法将属性插入方法中。

```
class AddService(DocumentPlugin):
    # WARNING: suds hides exceptions in plugins
    def loaded(self, ctx):
        print "help"
        return ctx

client = Client("https://server/EWS/Services.wsdl",
                plugins=[AddService(),]) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T14:56:42.237

Most likely it's because suds has already cached the parsed WSDL:

[https://fedorahosted.org/suds/wiki/Documentation#PERFORMANCE](https://fedorahosted.org/suds/wiki/Documentation#PERFORMANCE)

So either you can purge the temporary directory or disable caching altogether by adding a cache=None to your Client() call.

# php - php最大值以随机顺序显示在列表中？

> ID：14360278
> 
> 赞同：1
> 
> 时间：2013-01-16T14:08:35.863
> 
> 标签：php

> **可能重复：**
> [使用 PHP 随机输出数组元素](https://stackoverflow.com/questions/2118842/output-array-elements-randomly-with-php)

假设我们有这个代码：

```
<? if (isset($specialoffers)) { ?>
    <? foreach ($specialoffers as $value) { ?>

      <div>product #</div>

    <?};?>
<?};?> 
```

例如这个列表可能每次都不一样，它可能有 1 个产品，它可能有 58 个产品。我只想在列表中以随机顺序显示 10 个产品。

怎么做？

我不想碰 SQL 查询！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:10:19.420

查看[array_rand](http://php.net/manual/en/function.array-rand.php)函数，它从数组中获取一个或多个随机元素。

因此，您可以执行以下操作：

```
foreach (array_rand($specialoffers,10) as $key) 
do_something_interesting_with $specialoffers[$key]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:11:48.760

```
$specialoffers = array_splice( shuffle($specialoffers), 0, 9 ); 
```

这样的事情可能会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:11:07.997

您可以使用`shuffle()`随机化数组。

[http://php.net/manual/en/function.shuffle.php](http://php.net/manual/en/function.shuffle.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T14:19:23.083

请尝试从关联数组中获取随机值的示例；

```
 function array_random_assoc( $arr, $num = 1) {
        $keys = array_keys($arr);
        shuffle($keys);

        $r = array();
        for ($i = 0; $i < $num; $i++) {
            $r[$keys[$i]] = $arr[$keys[$i]];
        }
        return $r;
    }

   $specialoffers = (array_random_assoc($data_array, 10)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T14:37:33.450

您可以使用[Reservoir Sampling](http://hakre.wordpress.com/2013/01/08/getting-n-random-elements-out-of-an-iterator-randomiterator/)来做到这一点，如果元素的数量会耗尽您的内存（并通过迭代器呈现），甚至需要它：

```
$randoms = new RandomIterator($specialoffers, 10);
foreach ($randoms as $value) {
   ...
} 
```

您可以在[Gist 中找到该类的](https://gist.github.com/4476432)[源代码`RandomIterator`](https://gist.github.com/4476432)。

# hibernate - 重新连接到休眠的问题

> ID：14360279
> 
> 赞同：0
> 
> 时间：2013-01-16T14:08:36.837
> 
> 标签：hibernate

我正在使用 C3P0 连接池。我添加了一个扩展 C3P0ConnectionProvider 的类 TestConnectionProvider。我想要的是捕获异常后，Hibernate 仍应尝试重新连接。但是，在捕获异常后，应用程序将停止。

顺序如下 1) MySQL 连接停止 2) Hibernate 尝试重新连接多次。3）我开始MySQL连接。4) Hibernate 获得连接并开始插入数据。5）我再次停止了连接。6) 现在 Hibernate 抛出我的应用程序没有捕获的异常。

我想要实现的是每当 Hibernate 失去连接时，它应该由应用程序的异常处理机制处理，并且仍然尝试重新连接，无论连接在启动时还是在两者之间不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:59:03.003

我假设您不是指在执行长时间运行的 Hibernate 事务时发生的错误。

如果是，则该解决方案与您的连接池没有直接关系。您需要捕获异常（确切地说是在哪里，但也许在您开始事务的级别），回滚事务并继续尝试直到成功（即开始新事务）。您提到您的连接池这一事实似乎向我表明您的 c3p0 重新连接设置存在问题。

这是我的休眠连接参数（来自 .properties 文件，您的可能在 xml 中）...

```
...
hibernate.dialect=org.hibernate.dialect.MySQLDialect
hibernate.connection.driver_class=com.mysql.jdbc.Driver
hibernate.connection.url=jdbc:mysql://localhost/db
hibernate.connection.username=user
hibernate.connection.password=password
hibernate.connection.provider_class=org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider
hibernate.c3p0.minPoolSize=3
hibernate.c3p0.maxPoolSize=200
hibernate.c3p0.maxStatements=100
hibernate.c3p0.testConnectionOnCheckout=true
hibernate.c3p0.idleConnectionTestPeriod=300
... 
```

注意 c3p0 参数`testConnectionOnCheckout`和`idleConnectionTestPeriod`. 有关它们的更多信息，请[点击此处](http://www.mchange.com/projects/c3p0/)。[这个帖子](https://stackoverflow.com/a/3511544/828858)也有关系。

如果您正确关闭 Hibernate 会话（从而将连接释放回连接池），这些设置将允许您在应用程序运行时处理丢失的数据库连接。

如果在添加这些配置设置后数据库连接仍然没有弹性，请仔细检查日志以确保您实际上正在初始化 c3p0 池。你应该看到这个（在你设置之后`log4j.logger.com.mchange.v2=INFO`）......

> INFO 2013-01-17 11:14:18,832 [main] com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource：正在初始化 c3p0 池...

完成后，还要检查您是否正确关闭了 Hibernate 会话。您可以通过使用“性能”测试来检查这一点，该测试一次打开多个休眠会话（如果您正在构建 Web 应用程序，可能一次发送多个 HTTP 请求），并结合`show processlist`在 MySQL 控制台中使用（有关更多信息，请参见[此处](https://stackoverflow.com/q/1620662/828858)信息）。

如果进程列表不断增长，则说明您没有正确释放连接，并且地球上没有连接池可以拯救您。

# node.js - express + ejs 登录小部件

> ID：14360281
> 
> 赞同：2
> 
> 时间：2013-01-16T14:08:45.797
> 
> 标签：node.js, express, ejs

我正在尝试为按钮登录/注销制作简单的小部件。

laout.ejs

```
 <% include ../shared/login_logout %> 
```

login_logout.ejs

`<% if ( !common.IsDefined(membershipHelper.GetCurrentUser(request , response)) ) { %>`

`<li class="pull-right"><a href="/login">Login</a></li>`

`<% } else { %>`

`<li class="pull-right"><a href="/logout">Log Out</a></li>`

`<% } %>`

membersHelper.GetCurrentUser - 此方法检查 user_id 的请求会话，如果找到它则返回用户，如果它在 db(mongoDB) 中找到，则返回 null。由于用户在 User.findById 的回调函数中返回，所以 ejs 文件总是收到“未定义”。我想把这个 GetCurrentUser 放在中间件中，但看起来我不能将 null 或 undefined 设置为 locals 变量

有什么办法可以解决这个问题？

# php - php 数字，例如 (10M, ..)

> ID：14360282
> 
> 赞同：-3
> 
> 时间：2013-01-16T14:08:52.463
> 
> 标签：php, number-formatting

我想使用像**10M**（代表 10 000 000）和**100K**等数字。PHP 中是否已经存在函数，或者我必须编写自己的函数？

我在想一些事情：

```
echo strtonum("100K"); // prints 100000 
```

此外，更进一步并做相反的事情，翻译并从 100000 获得 100K？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T14:15:35.150

您可以创建自己的函数，因为没有内置函数。给你一个想法：

```
function strtonum($string)
{
    $units = [
        'M' => '1000000',
        'K' => '1000',
    ];

    $unit = substr($string, -1);

    if (!array_key_exists($unit, $units)) {
        return 'ERROR!';
    }

    return (int) $string * $units[$unit];
} 
```

演示：[http ://codepad.viper-7.com/2rxbP8](http://codepad.viper-7.com/2rxbP8)

或者反过来：

```
function numtostring($num)
{
    $units = [
        'M' => '1000000',
        'K' => '1000',
    ];

    foreach ($units as $unit => $value) {
        if (is_int($num / $value)) {
            return $num / $value . $unit;
        }
    }   
} 
```

演示：[http ://codepad.viper-7.com/VeRGDs](http://codepad.viper-7.com/VeRGDs)

* * *

如果你想变得非常时髦，你可以把所有这些都放在一个类中，让它决定运行什么转换：

```
<?php

class numberMagic
{
    private $units = [];

    public function __construct(array $units)
    {
        $this->units = $units;
    }

    public function parse($original)
    {
        if (is_numeric(substr($original, -1))) {
            return $this->numToString($original);
        } else {
            return $this->strToNum($original);
        }
    }

    private function strToNum($string)
    {
        $unit = substr($string, -1);

        if (!array_key_exists($unit, $this->units)) {
            return 'ERROR!';
        }

        return (int) $string * $this->units[$unit];
    }

    private function numToString($num)
    {
        foreach ($this->units as $unit => $value) {
            if (is_int($num / $value)) {
                return $num / $value . $unit;
            }
        }   
    }
}

$units = [
    'M' => 1000000,
    'K' => 1000,
];
$numberMagic = new NumberMagic($units);
echo $numberMagic->parse('100K'); // 100000
echo $numberMagic->parse(100); // 100K 
```

虽然这可能有点矫枉过正:)

演示：[http ://codepad.viper-7.com/KZEc7b](http://codepad.viper-7.com/KZEc7b)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T14:11:04.563

对于第二个

```
<?php
    #    Output easy-to-read numbers
    #    by james at bandit.co.nz
    function bd_nice_number($n) {
        // first strip any formatting;
        $n = (0+str_replace(",","",$n));

        // is this a number?
        if(!is_numeric($n)) return false;

        // now filter it;
        if($n>1000000000000) return round(($n/1000000000000),1).' trillion';
        else if($n>1000000000) return round(($n/1000000000),1).' billion';
        else if($n>1000000) return round(($n/1000000),1).' million';
        else if($n>1000) return round(($n/1000),1).' thousand';

        return number_format($n);
    }
?> 
```

# objective-c - 如何在不丢失选择器的情况下使用 customView 设置 UIBarButtonItem

> ID：14360283
> 
> 赞同：0
> 
> 时间：2013-01-16T14:08:54.843
> 
> 标签：objective-c, xcode4.5

我在 IB 有一个 UIBarButtonItem

该按钮具有选择器。

一切正常，但我想改变外观。

因此我做了：

```
 UIImage * imageSetting= [UIImage imageNamed:@"setting-button"];
    UIImageView * imageView = [[UIImageView alloc]initWithImage:imageSetting];
    self.editSettings = [self.editSettings initWithCustomView:imageView]; 
```

现在外观工作正常，但按下按钮根本不会让我看到任何代码。

该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:15:43.170

代替

```
self.editSettings = [self.editSettings initWithCustomView:imageView]; 
```

和

```
[self.editSettings setCustomView:imageView]; 
```

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T14:14:49.763

实例化自定义项目后，您需要对其设置目标和操作。

例如

```
if(self.editSettings) // make sure it exists
{
    self.editSettings.target = self;
    self.editSettings.action = @selector(doSomething:)
} 
```

`doSomething:`（假设您的视图控制器中有一个名为“”的方法......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T14:15:30.743

您可以为该栏按钮项创建一个操作方法，然后在 xib 中连接该操作，您也可以使用以下代码以编程方式执行此操作：

```
self.navigationController.navigationItem.leftBarButtonItem=[[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonItemStylePlain target:self action:@selector(addtechniciansnametoplist:)]; 
```

# c# - 在 C# 中从多个表单访问数据

> ID：14360287
> 
> 赞同：1
> 
> 时间：2013-01-16T14:09:19.753
> 
> 标签：c#, wpf, multiple-forms

我尝试搜索，但找不到任何能完全满足我的需求的东西。我正在创建一个 WPF 桌面应用程序，它最终将有四个或五个表单。每个表格都将收集要通过电子邮件发送的数据。我还创建了一个单独的类 (SendMail)，其中包含发送电子邮件的代码。我希望能够从各种表单的文本框中访问文本，并通过 SendMail 类中的方法发送它们。

目前，我只有两个基本表单，其中包含几个字段和下一页、提交和退出按钮。如果以下页面都不需要填写，我希望能够从任何页面提交数据。我目前可以通过内部属性从 SendMail 类访问每个表单，当我点击第一个表单上的提交按钮时，电子邮件会正确发送。但是，如果我转到下一个表单并单击“提交”按钮，我会收到一个“对象引用未设置为对象的实例”错误，因为该属性引用了第一个表单上的文本框的文本。我假设通过转到第二种形式，第一种形式的实例不再存在。

几年前我在大学里上过几门编程课，但现在我决定自己更认真地学习它。我读过几本书，但只学习了几个月，所以我可能以错误的方式接近这一点。任何帮助表示赞赏。

编辑-以下是一些代码示例，根据要求。我从 SendMail 类中删除了电子邮件地址/密码。

第一个窗口

```
public partial class MainWindow : Window
{
    SendMail page1;

    // Properties to allow access to SendMail.
    internal string CmbEmail
    {
        get { return this.cmbEmail.Text; }
    }

    internal string DateWritten
    {
        get { return this.dateWritten.Text; }
    }

    public MainWindow()
    {
        InitializeComponent();
        page1 = new SendMail(this);
    }

    private void btnSubmit_Click_1(object sender, RoutedEventArgs e)
    {
        page1.Email();
    }

    private void btnNextPage_Click(object sender, RoutedEventArgs e)
    {
        Window1 nextPage = new Window1(this);
        nextPage.Show();
        this.Close();
    }
} 
```

第二个窗口

```
public partial class Window1 : Window
{
    SendMail page2;

    public Window1(MainWindow parent)
    {
        InitializeComponent();
        page2 = new SendMail(this);
    }

    private void btnExit_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
    }

    private void btnSubmit_Click(object sender, RoutedEventArgs e)
    {
        page2.Email();
    }
} 
```

发送邮件类

```
class SendMail
{
    MainWindow page1;
    Window1 page2;

    public SendMail(MainWindow form)
    {
        page1 = form;
    }

    public SendMail(Window1 form)
    {
        page2 = form;
    }

    public void Email()
    {
        NetworkCredential cred = new NetworkCredential("", "");
        MailMessage msg = new MailMessage();
        msg.To.Add("");

        // Send an email to address in the Email field, if not empty.
        if (page1.CmbEmail != "") // This is the line throwing the error, but only when submitting from the second window.
        {
            msg.To.Add(page1.CmbEmail);
        }

        msg.From = new MailAddress("");
        msg.Subject = "Garment Order " + page1.DateWritten.ToString();
        msg.Body = "Test email";

        SmtpClient client = new SmtpClient("smtp.gmail.com", 587);
        client.Credentials = cred;
        client.EnableSsl = true;
        client.Send(msg);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:22:34.697

我认为您是正确的，`TextBox`第一个表单上的 不再存在，这就是您收到错误的原因。这是因为 WPF 会卸载不再可见的控件，并且它们中的所有数据都会被遗忘，除非它们绑定到[DataContext](http://rachel53461.wordpress.com/2012/07/14/what-is-this-datacontext-you-speak-of/)中的某些内容。

I would highly recommend using the MVVM design pattern if you're working with WPF. It's perfectly suited to the technology, and I find it keeps the code clean and easy to maintain.

In your situation, I would have a single `ViewModel` for your entire application, and have it contain the `SubmitCommand` and 5 data objects, each representing the data from one "Form"

For example, your MainViewModel might look like this:

```
public MainViewModel : INotifyPropertyChanged
{
    // Should be full properties that implement INotifyPropertyChanged, 
    // but leaving that out for simplicity right now
    public ObservableCollection<object> Forms { get; set; }
    public object CurrentForm { get; set; }

    public ICommand SubmitCommand { get; set; }
    // Could also add ICommands for Back and Next buttons as well

    public MainViewModel()
    {
        Forms = new ObservableCollection()
        {
            new Form1Data(),
            new Form2Data(),
            new Form3Data(),
            new Form4Data(),
            new Form5Data()
        };

        CurrentForm = Forms.FirstOrDefault();
    }
} 
```

And your XAML would look something like this:

```
<Window>
    <Window.Resources>
        <DataTemplate DataType="{x:Type local:Form1Data}">
            <local:Form1UserControl /> 
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:Form2Data}">
            <local:Form2UserControl /> 
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:Form3Data}">
            <local:Form3UserControl /> 
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:Form4Data}">
            <local:Form4UserControl /> 
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:Form5Data}">
            <local:Form5UserControl /> 
        </DataTemplate>
    </Window.Resources>

    <DockPanel>
        <Button Command="{Binding SubmitCommand}" 
                Content="Submit" DockPanel.Dock="Bottom" />

        <ContentControl Content="{Binding CurrentForm}" />
    </DockPanel>
</Window> 
```

(You could also write out form controls in XAML in the DataTemplates instead of using a UserControl)

If you're new to WPF and the MVVM design pattern, I have a very [simple example on my blog](http://rachel53461.wordpress.com/2011/05/08/simplemvvmexample/) that you may be interested in reading to get started.

**Edit**

I just saw your updated question with the code, and your problem here is that you have two copies of your `SendMail` class, one with your first window and one with your second window. You need to have a single copy of the `SendMail` class, and have it reference both windows.

Although like I said in the beginning of my answer, I don't think that will work because WPF unloads UI objects that aren't visible, so it's likely that any data in your Window will be lost when you `.Close()` it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:12:50.463

Look at the constructors.

This will use the 2nd ctor (and not assign page1)

```
page2 = new SendMail(this); 
```

The above this is a Window1

```
public SendMail(MainWindow form)
{
    page1 = form;
}

public SendMail(Window1 form)
{
    page2 = form;
} 
```

The Window1 ctor does not assign page1.
So page1.CmbEmail is going to throw a "Object reference not set to an instance of an object".

I think you could fix this with

```
 public SendMail(Window1 form, MainWindow mainWindow)
    {
        page2 = form;
        page1 = mainWindow;
    } 
```

Then when you call it

page2 = new SendMail(this, parent);

But that breaks if the parent Window gets closed.
But since the parent Windows is the MainWindow that would close everything anyway.
So there would not longer be a Page1 submitt button that would fail.

# android - 如何在内容之上设置tabhost

> ID：14360292
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:09:28.490
> 
> 标签：android, listview, tabbar

大家好，我正在使用 TabHost 在 android 中创建 TabBar....

```
 public class TabBarActivity extends TabActivity implements OnTabChangeListener
{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab);

        TabHost tabHost = getTabHost();
        TabHost.TabSpec spec;
        Intent intent;

        intent = new Intent().setClass(this, CustomizedListView.class);
        spec = tabHost.newTabSpec("Clubs").setIndicator("Clubs", getResources().getDrawable(R.drawable.clubs_icon))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, Events.class);
        spec = tabHost.newTabSpec("Events").setIndicator("Events", getResources().getDrawable(R.drawable.events_icon))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, Maps.class);
        spec = tabHost.newTabSpec("Maps").setIndicator("Maps", getResources().getDrawable(R.drawable.maps_icon))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, Settings.class);
        spec = tabHost.newTabSpec("Settings").setIndicator("Settings", getResources().getDrawable(R.drawable.settings_icon))
                      .setContent(intent);
        tabHost.addTab(spec);

        getTabHost().setOnTabChangedListener(this);
    }

    @Override
    public void onTabChanged(String tabId)
    {
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(), "Inside the new tab ", Toast.LENGTH_SHORT).show();
        //getTabHost().setVisibility(View.VISIBLE);

    }
}

**tab.xml**
        <?xml version="1.0" encoding="utf-8"?>
    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        xmlns:android="http://schemas.android.com/apk/res/android">

        <RelativeLayout
            android:id="@+id/linearLayout1"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

            <TabWidget
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:id="@android:id/tabs">
            </TabWidget>

            <FrameLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:id="@android:id/tabcontent">
            </FrameLayout>
        </RelativeLayout>
    </TabHost> 
```

but the problem is that whenever the contents of the tab grow eg displaying dynamic content in listview against a tab then the TabHost becomes INVISIBLE..

在这方面的任何帮助将不胜感激....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:24:54.520

使用 TabActivity 的 Insted 使用普通的 Activity。然后根据您的要求使用 tabspec 创建 TabHost。并将 tabHost 添加为屏幕/活动中的第一个组件。

# c# - 如何遍历 DataTable 单元格

> ID：14360294
> 
> 赞同：0
> 
> 时间：2013-01-16T14:09:40.683
> 
> 标签：c#, .net

我需要获取 DataTable 中所有单元格的计数，我该怎么做？在将数据插入数据库之前，我需要这个来验证我的 2 个表是否具有相同的单元格数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:19:20.367

试试这个：

```
 DataTable dt1 = new DataTable(), dt2 = new DataTable();

    // define and populate your tables

    int count1 = dt1.Columns.Count * dt1.Rows.Count;
    int count2 = dt2.Columns.Count * dt2.Rows.Count;

    bool verified = count1 == count2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T14:22:13.603

```
 DataTable tbl = new DataTable();
 foreach (DataRow row in tbl.Rows)
 {
   foreach (DataColumn col in tbl.Columns)
   {
     object cellData = row[col];
   }
 } 
```

# android - 从包中检索高密度可绘制对象（蜂窝）

> ID：14360295
> 
> 赞同：6
> 
> 时间：2013-01-16T14:09:43.470
> 
> 标签：android, drawable, android-3.0-honeycomb, scaling

这段代码

```
final ApplicationInfo ai = getPackageManager().getApplicationInfo("com.company.hello", 0);
final Drawable d = getPackageManager().getApplicationIcon(ai); 
```

**即使在我的高密度HoneyComb**设备上也可以检索 48x48 (mdpi) 可绘制文件。

鉴于我可以通过*Bitmap.createScaledBitmap*放大可绘制对象，我在问如何提取已经存在的高密度图标。*getDrawableForDensity*方法不适用于 sdk < 15，但我不乐意为我必须绘制的每个图标调用缩放功能，因为它在包中免费可用。

**编辑赏金**

暂时忘记了我的设备显示密度问题如下：给定一个我们自己的包，我们肯定知道在相关的 hdpi res 文件夹中有一个 72x72 图标，如何从另一个包中提取这个图标？

[此功能](http://developer.android.com/reference/android/content/res/Resources.html#getDrawableForDensity%28int,%20int%29)在 Honeycomb 环境中不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:59:12.603

要直接找到具有良好密度的可绘制对象，您只需尝试以下操作：

```
mContext.getResources().getDrawable(R.drawable.mydrawable); 
```

问题是什么？如果 android 给你一个 48x48 的图标，那就是那个好图标，或者你没有在好 res/drawable- 文件夹中设置图标。

# r - knitr rinline 表达式中的尖括号

> ID：14360296
> 
> 赞同：2
> 
> 时间：2013-01-16T14:09:45.000
> 
> 标签：r, knitr

我遇到了 knitr 中 HTML 模板的 rinline 模式的问题：

```
inline.code : chr "<!--\\s*rinline\\s*([^>]*)\\s*-->" 
```

这种模式的性质意味着 knitr 无法识别任何本身包含尖括号的 rinline 表达式。例如：

```
<ul>
<!--rinline I(paste("<li>",gene.black.list,"</li>",collapse="",sep="")) -->
</ul> 
```

没有按照我的意愿由引擎评估（gene.black.list 只是一个字符向量，希望我的代码的意图很明确）。为了解决这个问题，我正在执行以下操作：

```
<!--begin.rcode echo=F
  tagged.gene.black.list = paste("<li>",gene.black.list,"</li>",collapse="",sep="")
  end.rcode-->

<ul>
<!--rinline I(tagged.gene.black.list) -->
</ul> 
```

哪个有效，但对于创建多余的额外变量和多个代码块似乎有点不满意。有没有我想念的更聪明、更整洁的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T06:52:25.793

[我认为这个问题现在](https://github.com/yihui/knitr/commit/fc2777d7764ba8a50a9855b4dcfe81768532c2bf)应该在 Github 上解决。请从 Github[安装开发版本。](https://github.com/yihui/knitr#readme)基本上我改成`<!--\\s*rinline\\s*([^>]*)\\s*-->`了`<!--\\s*rinline(.+?)-->`.

# java - 具有不可为空字符串的 H2 + Hibernate 存储空字符串

> ID：14360312
> 
> 赞同：1
> 
> 时间：2013-01-16T14:10:42.940
> 
> 标签：java, hibernate, h2

我目前正在将一些现有代码从 Hibernate 3.2 迁移到 Hibernate 3.6.10.Final（顺便说一下，从 Spring 2.0 迁移到 Spring 3.1.2）。

我对针对 H2 数据库运行的一些集成测试有疑问，验证某些字段不可为空。- 我测试将空字符串插入标记为 nullable=false 的字段的尝试以异常结束 - 我检查了模式是否正确创建：该列不可为空。

*   使用 H2（使用 MySQL 模式），可空约束被忽略：在数据库中插入一个空字符串。
*   如果我对 MySQL 数据库运行测试，我不会重现该案例。
*   它以前与 Hibernate 3.2 一起工作

例如，如果我有一个类 Person ：

```
@Entity
class Person {
    @Id
    @GeneratedValue
    private Long id;

    @Column(nullable=false)
    private String name;

    //getters and setters

} 
```

然后我有一个测试（仍然使用 JUnit3，我稍后会迁移它）：

```
@ExpectedException(value=DataIntegrityViolationException.class)
public void testPerson_NameCantBeNull() throws Exception {
    // Given
    Person person = new Person();
    person.setName(null);

    // When
    getHibernateTemplate().persist(person);
    //Flush and clear session
} 
```

我可以通过`@NotNull`注释替换 nullable=false 来解决此问题，但我不想在我庞大的代码库中替换它，因为我不希望出现相同的异常。我快速浏览了 Hibernate 中的 H2Dialect 类和 JIRA 问题，但没有找到任何东西。

有人知道它来自哪里吗？

编辑：一些附加信息，我在 Hibernate 日志中添加了 TRACE 级别。

*   当我插入 null 并且该字段标有 时`@Column(nullable=false)`，我有以下日志：2013-01-16 15:57:52 TRACE [BasicExtractor] found **[]** as column [NAME1_3_]

*   当我插入 null 并且该字段**未标记**时`@Column(nullable=false)`，我有以下日志：2013-01-16 15:57:52 TRACE [BasicExtractor] found **[null]** as column [NAME1_3_]

编辑（22/01/13）：

我仍然没有找到问题的确切来源，但我发现它与 H2 的 MySQL 模式有关：如果我禁用 MySQL 模式，Hibernate 不再尝试用空字符串替换我的空字符串。但我不能这样做，因为其他一些代码与 MySQL 语法相关联。

任何的想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:28:22.790

我没有足够的时间来研究 Hibernate 和 MySQL 方言，所以我转向 Java Validation Framework，使用 @NotNull 注释。

它完成了这项工作并满足了我们的其他要求之一：我们模型的一部分用于 Grails 应用程序，我们希望使用约束来验证部分 CRUD 操作（纯 javax.persistence 注释不可能）。

# events - 如何从 Blackberry travel 等日历的 url 打开应用程序？

> ID：14360313
> 
> 赞同：0
> 
> 时间：2013-01-16T14:10:51.130
> 
> 标签：events, blackberry

我正在开发一个像 Blackberry Travel 这样的应用程序。在 Blackberry Travel 中，添加航班时会添加到日历中。在此事件中，有“注释”，其中会显示一个用于加载应用程序并查看航班的 url。

我需要做同样的事情，但只需要加载应用程序行为。所以，我有两个问题：

*   如何从 url 打开应用程序？我看到了[这一点](https://stackoverflow.com/questions/4568503/how-to-launch-an-application-from-the-browser-in-blackberry)，但是，当我使用示例 HttpFilterDemo 时，当我单击我在日历事件中键入的 URL www.rim.com 时，从不执行 setRequestProperty 方法。

*   单击 url 时如何显示“使用 Blackberry 打开”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:27:43.830

完成！

[黑莓开发者文档](https://developer.blackberry.com/java/documentation/ui_active_text_fields_1988859_11.html)中的完美示例

# c++ - 更新文件c ++时如何防止结构成员值被覆盖

> ID：14360315
> 
> 赞同：0
> 
> 时间：2013-01-16T14:10:59.183
> 
> 标签：c++, struct, binary, overwrite, records

假设我有一个二进制文件、一个文本文件和 3 个结构成员。我已经为结构成员 1 写了一组数字，我们称之为“score1”。现在，我想用 struct member 2“score final”更新二进制文件。

例如，这个最终分数将计算 score1 的百分比并将其写入二进制文件。现在我们将写入 score2 的第二组值。当我这样做时，score1 值以及二进制文件中的原始分数最终值都消失了，现在我只有分数 2 和从 score2 计算的新分数最终值。

我的代码示例：

```
struct Scores{
float score1;
float score2;
float final;
};

fstream afile;
fstream afile2;

//afile will read in sets of score1 values from text file

//afile2 will output sets of score1 values to binary file
//while final is also outputted.

//Then, afile will again read in sets different of score2 values from text file
//afile 2 will output sets of score1 values to binary file 
//and final is also outputted but with new calculations 
```

正在读取的文本文件将如下所示；

```
12.2
41.2
51.5
56.2
9.2

and the second text file:
76.1
5.7
62.3
52.7
2.2 
```

我会将结构 score1 和 score2 和 final 输出到一个看起来像这样的文本文件

```
Final   Score1   Score2 
       12.2      76.1
       41.2      5.7
       51.5      62.3
       56.2      52.7
       9.2       2.2 
```

最后一栏是空的，但你明白我的意思。

现在的问题：

> 1.  每次我将它输出到文本文件时，我只能做最后一列，score1，或者最后一列 score2。但不是 score1, score2, final。
>     
>     
> 2.  我希望能够将 score1 的最终结果相加，并与 score2 的最终结果相加，并输出两个决赛的相加。

现在，由于这是一项任务，我有一些限制，我必须坚持完成的任务。

> 规则：从文本文件中读取 score1 和 score2。使用二进制存储 score1, score2, final。使用这三列写入单个文本文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:16:05.633

这是不可能的。IO 流类允许您将数据附加到现有文件或截断它并从头重写所有内容。

在您的情况下，附加不起作用。所以你剩下的就是截断并重写文件中你想要的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:10:26.410

如果您的二进制文件是 struct Scores 对象的简单列表，您可以实现两个非常简单的函数来修改二进制文件（不检查错误，如果它编译等 - 自己做）。

```
Scores readScores(std::ifstream& file, unsigned int scoresNum)
{
    Scores scores;
    file.seekg(scoresNum*sizeof(Scores), std::ios_base::beg);
    file.read(static_cast<char*>(&scores),sizeof(Scores));
    return scores;
}

void writeScores(std::ofstream& file, unsigned int scoresNum, const Scores& scores)
{
    file.seekp(scoresNum*sizeof(Scores), std::ios_base::beg);
    file.write(static_cast<char*>(&scores),sizeof(Scores));
} 
```

您加载第一个文本文件，修改二进制文件。然后是第二个文件，再次修改并根据二进制文件的最终状态生成结果。我希望它能帮助你解决问题。

# php - PHP 明信片脚本

> ID：14360316
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:10:59.557
> 
> 标签：php

我正在尝试使用来自[http://www.bqscripts.com/item/postcards/](http://www.bqscripts.com/item/postcards/)的脚本。我已经联系他们提出问题，但他们没有回应。我认为代码有点过时了，但我找不到其他更好的免费的东西。

我对 PHP 并不陌生，但肯定在学习。我需要做的是添加**更多输入框**并向**我添加 CC 电子邮件，**以便我可以查看从该站点发送的明信片。

我不确定要复制和粘贴哪个文件/代码，因为有几个文件。该脚本使用 PHP 和数据库。它发送一个电子邮件链接，将接收者引导至preview.php。

我找不到 sendmail 功能，很困惑。

有人知道这个脚本以及如何做到这一点吗？

这是我认为我需要编辑的地方。

函数.PHP

```
 <?php

 function sqlimport() {

global $_c;

$file='priv/config/sqlimport.sql';
if ($fr=@fopen($file,"r")) {

    $data=fread($fr,filesize($file));
    fclose($fr);

    $ex=explode(';',$data);
    if (is_array($ex))
    foreach ($ex as $h) {

        $h=mb_ereg_replace("\[dbprefix\]",$_c['dbprefix'],$h);
        mysql_query($h);
        }
    }
}

function bqmq($q) {

return @mysql_query($q);
}

function bqma(&$r) {

$o=@mysql_fetch_array($r);

if (is_array($o))
foreach ($o as $k => $h)
    if (!is_int($k)) $out[$k]=stripslashes($h);

return $out;
}

function bqmr(&$r) {

$o=@mysql_fetch_row($r);

if (is_array($o))
foreach ($o as $k => $h)
    if (is_int($k)) $out[$k]=stripslashes($h);

return $out;
}

function bqmnr($r) {

return @mysql_num_rows($r);
}

function bqmi() {

return @mysql_insert_id();
}

function getlist($url,$actual,$count,$step,$max) {

if (!($count>0)) return "";
if ($count<=$step) return "";

$out.="<div class=\"list-div\">";
$out.="<span class=\"stranka\">page:</span>";

$c=ceil($count/$step);

$start=0;
if ($c>$max) {

    $stt=$actual-floor($max/2);
    if ($stt>0) $start=$stt;

    if ($start>($c-$max)) $start=$c-$max;

    if ($start>0) $out.="<span>. . .</span>";
    for ($i=0;$i<$max;$i++) {

        $st=$i+$start;
        $tex=$st+1;

        if ($actual==$st) $more=' class="selected"';
        else $more="";

        $out.="<span{$more}>";
        if ($st!=$actual) $out.="<a href=\"{$url}p={$st}\"       {$more}>$tex</a>";
        else $out.="$tex";
        $out.="</span>";
        }
    if ($start+$max<$c) $out.="<span>. . .</span>";
    }
else {

    for ($i=0;$i<$c;$i++) {

        $st=$i;
        $tex=$st+1;

        if ($actual==$st) $more=' class="selected"';
        else $more="";

        $out.="<span{$more}>";
        if ($st!=$actual) $out.="<a href=\"{$url}p={$st}\"{$more}>$tex</a>";
        else $out.="$tex";
        $out.="</span>";
        }
    }

$out.="</div>";

return $out;
} 
```

函数 bqgencode($len=8) {

```
return mb_substr(md5(uniqid(rand(),true)),0,$len);
} 
```

功能项目（$项目）{

```
global $_c;

$ok=true;

foreach ($_c['req'] as $k => $h) {

    if ($h==1) {

        if (mb_strlen($item[$k])==0) $ok=false;
        }
    }

return $ok;
}

function bqsendemail($to,$from,$subject,$body,$plain) {

define("EmailNewLine", "\n");
define("EmailTextCharset", "utf-8");

$charset="utf-8";

$theboundary=md5(uniqid("EMAIL"));
$headers="From: ".$from." ".EmailNewLine."Reply-To: ".$from." ".EmailNewLine."Date:  ".date("r", time()).EmailNewLine;

$headers.="MIME-Version: 1.0".EmailNewLine."Content-Type: multipart/mixed; ";
$headers.="boundary=$theboundary".EmailNewLine.EmailNewLine;
$headers.="This is a multi-part message in MIME format.".EmailNewLine.EmailNewLine;

$thebody.="--$theboundary".EmailNewLine;
$thebody.="Content-Type: text/html; charset=$charset".EmailNewLine;
$thebody.="Content-Transfer-Encoding: 7bit".EmailNewLine ."Content-Disposition: inline";
$thebody.=EmailNewLine.EmailNewLine.$body.EmailNewLine.EmailNewLine;

$thebody.="--$theboundary".EmailNewLine;
$thebody.="Content-Type: text/plain; charset=$charset".EmailNewLine;
$thebody.="Content-Transfer-Encoding: 7bit".EmailNewLine ."Content-Disposition: inline";
$thebody.=EmailNewLine.EmailNewLine.$plain.EmailNewLine.EmailNewLine;

$thebody.="--$theboundary--";

return mail($to,$subject,$thebody,$headers);
}

function bqemailact($id) {

global $_c;

$r=bqmq("select * from {$_c['dbprefix']}item where id='{$id}' and ccode=''");
if ($row=bqma($r)) {

    $code=bqgencode();
    bqmq("update {$_c['dbprefix']}item set ccode='{$code}' where id='{$id}' and  ccode=''");

    $body="<style>
<!--
body { font-family:Arial, Helvetica, sans-serif;font-size:10pt;background- color:#015709;color:#fff; }
h1 { color:#fff;font-size:11pt; }
p { font-weight:normal;font-size:9pt; }
a { color:#fff; }
--> 
</style>";
    $body.='<h1>Postcard from '.$_l['name'].'</h1>'."\n\n";
    $body.='<p>Confirmation URL: '.$_c['auri'].'?s=confirm&code='.$code.''."\n\n";
    $body.='<p>Postcard will be send after your confirmation.'."\n\n";
    $body.='<p>Request send from '.$row['ip'].' v '.date('H:i:s d.m.Y',$row['c_time']).'</p>'."\n\n";
    $body.=$b;

    $plain='Non HTML:'."\n\n".strip_tags(str_replace('&nbsp;','',$body));

    bqsendemail($row['from_email'],$_c['emailfrom'],$_l['name'].' confirmation url',$body,$plain);
    }
}

function bqpostcardsend($id) {

global $_c,$_l;

$r=bqmq("select * from {$_c['dbprefix']}item where id='{$id}'");
if ($row=bqma($r)) {

    $code=bqgencode();
    bqmq("update {$_c['dbprefix']}item set rcode='{$code}' where id='{$id}' and rcode=''");

    $body="<style>
<!--
body { font-family:Arial, Helvetica, sans-serif;font-size:10pt;background-    color:#015709;color:#fff; }
h1 { color:#fff;font-size:11pt; }
p { font-weight:normal;font-size:9pt; }
a { color:#fff; }
--> 
</style>";
    $body.='<h1>Postcard from '.$_l['name'].'</h1>'."\n\n";
    $body.='<p>You have received postcard from '.$row['from_name'].'  ('.$row['from_email'].').'."\n\n";
    $body.='<p>You can read it on URL: <a href="'.$_c['auri'].'?s=r&c='.$code.'">'.$_c['auri'].'?s=r&c='.$code.'</a>'."\n\n";
    $body.='<p>Request send from '.$row['ip'].' v '.date('H:i:s d.m.Y',$row['c_time']).'</p>'."\n\n";
    $body.=$b;

    $plain='Non HTML:'."\n\n".strip_tags(str_replace('&nbsp;','',$body));

    bqsendemail($row['to_email'],$_c['emailfrom'],'Postcard from  '.$_l['name'],$body,$plain);
    }
}

function setres($res) {

if (strlen($res)>0) setcookie("res",$res,0,'/');
}

function getres() {

global $ap;

if (isset($ap['res'])) return $ap['res'];

if (isset($_COOKIE['res'])) {

    setcookie("res",'',0,'/');

    return $_COOKIE['res'];
    }

return false;
}

function newsize($sx,$sy,$nx,$ny) {

$koef=$ny/$nx;

if ($sx*$koef>$sy) $ny=floor($sy/($sx/$nx));
else $nx=floor($sx/($sy/$ny));

$out[0]=$nx;
$out[1]=$ny;

return $out;
}

function imgresize($source,$target,&$x,&$y) {

if ($size=getimagesize($source)) {

    $size2=newsize($size[0],$size[1],$x,$y);
    $x=$size2[0];$y=$size2[1];

    $src=imagecreatefromjpeg($source);
    $dest=imagecreatetruecolor($x,$y);
    imagecopyresampled($dest,$src,0,0,0,0,$x,$y,$size[0],$size[1]);

    @unlink($target);
    if (ereg("jpg$",$target)) imagejpeg($dest,$target,95);

    return true;
    }
else return false;
}

function bqselect($where) {

global $ap,$_c,$code;

if (mb_strlen($code)>0) {

    $r=bqmq("select * from {$_c['dbprefix']}item where {$where}");
    if ($row=bqma($r)) {

        $ap['item']=$row;
        if ($ap['item']['idcard']>0) {

            $r=bqmq("select * from {$_c['dbprefix']}card where  id='{$ap['item']['idcard']}'");
            if ($row=bqma($r)) {

                $ap['card']=$row;
                }
            }
        elseif ($ap['item']['idfoto']>0) {

            $r=bqmq("select * from {$_c['dbprefix']}foto where id='{$ap['item']['idfoto']}'");
            if ($row=bqma($r)) {

                $ap['foto']=$row;
                }
            }
        }
    }
}

?> 
```

谢谢！！！！！！！！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:14:47.953

这会在函数 bqsendemail() 中发送邮件

```
return mail($to,$subject,$thebody,$headers); 
```

将此添加到标题中

```
$headers .= 'Cc: you@you.com' . "\r\n"; 
```

创建输入和发布应该是直截了当的。

# android - OpenCV android原生相机运动模糊

> ID：14360324
> 
> 赞同：2
> 
> 时间：2013-01-16T14:11:20.400
> 
> 标签：android, opencv, camera

我在 NDK 中使用 OpenCV Android 原生相机库进行图像捕获，但是当图像采集发生时，手机（必然）在移动，因此图像非常模糊。有什么方法可以减少这种模糊？我实际上并不太关心色彩保真度，因此可以牺牲该区域的质量。似乎没有直接曝光控制，但我确实发现这样做

```
cap.set(CV_CAP_PROP_EXPOSURE, -4) 
```

似乎有点帮助，尽管 -4 是最远的。一般来说，我对相机术语并不是很熟悉，所以我不确定其他属性可能对我有什么影响。

另外，我注意到在默认的相机应用程序（Galaxy SIII）中，相机运动模糊发生在图像预览期间，这是有道理的，因为 OpenCV 也会抓取预览图像。但在视频预览（非录制）模式下，图像更清晰。有人知道我如何访问这个流吗？

# regex - 使用正则表达式转换地址列表的更智能方法

> ID：14360327
> 
> 赞同：0
> 
> 时间：2013-01-16T14:11:24.397
> 
> 标签：regex, boost-regex

我对正则表达式知之甚少，无法想出一种更聪明的方法将地址列表从块转换为单行。

这是一个例子：

```
@sdfqsdf
qsdfqdsf
USA

@sdfqsdf
qsdfqdsf
USA
etc. 
```

我目前使用脑死亡的正则表达式：

```
SEARCH ^@(.+?)\r\n(.+?)\r\n(.+?)\r\n(.+?)\r\n\r\n
REPLACE \1, \2, \3, \4\r\n 
```

这不是很好，因为它假设每个地址有四行，而且它很笨拙。

我想一个更聪明的解决方案是告诉 Perl (Boost) 正则表达式引擎一个块以两个 CRLF 结尾，并且以单个 CRLF 结尾的每一行都应该将其剥离并用逗号替换，但我不知道这个怎么做。

以前有人这样做过并且可以告诉我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:23:28.550

遍历所有行并将以空行结尾的每一行替换为逗号和空格。

以下正则表达式应适用于逐行方法（搜索并替换为`", "`）

```
(?<=.+)\r\n(?!\r\n) 
```

适应`\r\n`系统的换行符。

如果你想在文本编辑器中进行，VIM 命令是

```
:%s/.\+\zs\r\n\ze\r\n\@!/, 
```

记住要适应`\r\n`，不要忘记后面的空格字符`,`

# javascript - 可重复复选框仅返回原始值而不是重复值

> ID：14360329
> 
> 赞同：0
> 
> 时间：2013-01-16T14:11:25.103
> 
> 标签：javascript, jquery

嗨，这实际上是另一个问题（[这里](https://stackoverflow.com/questions/14359615/make-checkboxes-act-like-radio-buttons-in-duplicatable-input-fields)），它有两个部分。第一部分由@epascarello 解决 - 再次感谢，现在只剩下这一部分，我似乎不明白。

我正在创建一个包含复选框的可复制 div，提交时它只返回控制台中原始输入的一个值，但没有任何重复值。

非常感谢任何帮助。

JS 小提琴：http: [//jsfiddle.net/dawidvdh/EEd7c/](http://jsfiddle.net/dawidvdh/EEd7c/)

jQuery：

```
//Clone Tracking
var g_counter = 1;
var d_counter = 1;
var dependant = ["dependant"];
var group;
//Clone Tracking
//General Variables
var relation_input_groups = ["relation-group-1"];
//General Variables
//Generate variables
var relation_fields=[0];
var relation_input ="<label>Spouse</label>"+

                    "<input type='checkbox' value='spouse' class='relationship' name='relationship' />" +
                    "<label>own child</label>"+ 

                    "<input type='checkbox' value='ownchild' class='relationship' name='relationship' />" +
                    "<label>adopted</label>"+ 

                    "<input type='checkbox' value='adopted' class='relationship' name='relationship' />" +
                    "<label>stepchild</label>"+ 

                    "<input type='checkbox' value='stepchild' class='relationship' name='relationship' />" +
                    "<label>parent</label>"+ 

                    "<input type='checkbox' value='parent' class='relationship' name='relationship' />" +
                    "<label>inlaw</label>"+ 

                    "<input type='checkbox' value='inlaw' class='relationship' name='relationship' />" +
                    "<label>brother</label>"+ 

                    "<input type='checkbox' value='brother' class='relationship' name='relationship' />" +
                    "<label>other</label>"+ 

                    "<input type='checkbox' value='other' class='relationship' name='relationship' />";
//Generate variables
jQuery(document).ready(function(e) {
    //populate jquery generated fields
    jQuery(relation_fields).each(function() {
        jQuery(relation_input).appendTo('#relation-group-1');
    });
    //populate jquery generated fields
    //Cloning Function
    jQuery('#clone').click(function() {
        clone_dependant();
    });
    function clone_dependant() {
        // Store the value of the previous Id to insert the cloned div..
        var oldId = g_counter;
        g_counter++;
        currentdep ='dependant-'+g_counter;
        // Clone the Dependant Div and set a new id
        var $clonedDiv = jQuery('#dependant-1').clone(false).attr('id', 'dependant-'+g_counter);
        var relation_newDiv = 'relation-group-'+ g_counter;
        // Find div's inside the cloned object and set a new id's
        $clonedDiv.find('#relation-group-1').attr('id',"relation-group-" + g_counter );
        // You don't need to Loop thru the inputs to set the value
        $clonedDiv.find('input').val('');
        $clonedDiv.find('input:checkbox').removeAttr('checked');
        // Insert the cloned object 
        $clonedDiv.insertAfter("#dependant-" + oldId);

        relation_input_groups.push(relation_newDiv);
    }
    //Cloning Function
    //Validation
//submit function
$(document).on("click", 'input[type="checkbox"]', function() {
    jQuery(this).siblings(":checked").removeAttr('checked');
});

var result = {};
var dependants;
var dep_counter = 0;
jQuery('#submit').click(function(){
    jQuery('.dependant').each(function(k, v){
        dep_counter++
        dependants = {};
        result['dependant'+dep_counter] = [dependants];
        dependants['relationship'] = $(v).find('.relationship:checked').val();
    });
    var jsonData = JSON.stringify(result);
    console.log(jsonData);
});
}); 
```

和 HTML：

```
<div id="dependant-1" class="dependant">
    <div id="label">relationship:</div> <div id="relation-group-1"></div>
</div>

<button id="clone">clone</button>
<button id="submit">submit</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:16:18.937

您克隆的复选框没有分配任何值。确保在克隆时将值设置在网络复选框中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:20:34.547

这仅仅是因为这些复选框具有相同的`name`属性。当按下提交按钮时，它会序列化所有表单控件（文本框、单选框、复选框等）的值并发送它们。所有这些控件的 name 属性应该是唯一的。

在您的代码中，所有这些复选框都具有相同的`name`属性（关系），这使得它们无法区分。解决此问题的方法是为这些复选框赋予不同的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T14:22:19.743

看到这个更新的小提琴：http: [//jsfiddle.net/EEd7c/7/](http://jsfiddle.net/EEd7c/7/)

评论这一行：`$clonedDiv.find('input').val('');`

还设置`dep_counter = 0;`在 `submit`按钮单击..

# android - 音译 API 替代 google API for Android

> ID：14360331
> 
> 赞同：3
> 
> 时间：2013-01-16T14:11:29.800
> 
> 标签：android, google-api, translate, indic

进行音译的其他选择是什么？因为谷歌音译API以前被弃用了。建议任何服务/ api 来执行翻译。

任何印度语言到英语都受到高度赞赏。

# php - 推动 UTC 中的时间戳行为

> ID：14360333
> 
> 赞同：0
> 
> 时间：2013-01-16T14:11:32.847
> 
> 标签：php, mysql, timestamp, propel, utc

我正在使用带有 MySql 的 Propel 1.6。我在所有表上设置了时间戳行为，如下所示：

```
<database name="default" >
    <behavior name="timestampable">
        <parameter name="create_column" value="creation_date" />
        <parameter name="update_column" value="last_modified" />
    </behavior>

    <table name="book" phpName="Book">
        <!-- table colums omitted -->
    </table>
</database> 
```

根据 Propel 时间戳行为的[文档](http://propelorm.org/behaviors/timestampable)，没有指定时区的参数。

我注意到时间戳行为默认情况下不会设置 UTC 时间。例如，在我的例子中，它设置 UTC+1。

做了一些调查，我发现如果我使用`preInsert()`钩子来设置时间而不是行为并且我传递了 Unix 时间戳：

```
public function preInsert(PropelPDO $con = null)
{
    $this->setCreationDate(time());
    return true;
} 
```

结果时间仍然是 UTC+1。如果我使用`DateTime`对象而不是 Unix 时间戳设置时间：

```
public function preInsert(PropelPDO $con = null)
{
    $this->setCreationDate(new DateTime('now', new DateTimeZone('UTC')));
    return true;
} 
```

我在数据库中获得了正确的 UTC 时间。

我检查了代码，发现 bahavior 设置了通过 Unix 时间戳的时间，因此导致数据库上的 UTC+1。

我的问题是：

1.  是否可以在 UTC 中配置 Propel 可时间戳行为？
2.  如果不是，Propel 在哪里设置日期格式/时区？是否使用`pre`钩子并传递具有`DateTime`指定时区的对象是在数据库中获取 UTC 时间的唯一方法（除了实现自定义行为）？
3.  另外，如果我无法配置 Propel 可时间戳行为的时区，那么它的全部目的首先是什么？（在数据库中设置 UTC 时间戳是一种很常见的做法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:35:13.627

该文档没有特别提到时区，但你应该能够设置它做这样的事情......

```
$objSourceTimezone = new DateTimeZone('America/Los_Angeles');
$objDestinationTimezone = new DateTimeZone('UTC');

$objTime = new DateTime([some date], $objSourceTimezone);
$objTime->setTimeZone($objDestinationTimezone);

$objPropel->setTimestamp($time->format('Y-m-d H:i:s')); 
```

我正在使用我当地的太平洋时区（但你可以使用任何你想要的）并将其转换为与 MySQL 和 Propel 的`TIMESTAMP`专栏兼容的 UTC 格式。

您可以通过执行相反的操作来检索此数据并将其显示在不同的时区...

```
$objSourceTimezone = new DateTimeZone('UTC');
$objDestinationTimezone = new DateTimeZone('America/New_York');

$objTime = new DateTime($objPropel->getTimestamp(), $objSourceTimezone);
$objTime->setTimeZone($objDestinationTimezone);

print $time->format('Y-m-d H:i:s').”\n”; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:18:53.660

根据[这个问题](https://stackoverflow.com/questions/4812170/does-php-time-return-a-gmt-utc-timestamp)和[php 文档，`time()`](http://php.net/manual/en/function.time.php)很明显`time()`应该返回自 Unix 纪元以来的秒数，该秒数将始终为 UTC。事实上，在我所有使用 Propel 和可时间戳行为的项目中都是如此。如果你的项目没有这样做，可能有更深层次的问题（也就是说，这不是 Propel 中的问题）。也就是说，我对您的问题的回答是：

1.  根据 PHP 文档，行为使用`time()`的始终为 UTC。
2.  见（1），不，Propel 没有这样的时区设置（虽然[PHP 有](http://php.net/manual/en/datetime.configuration.php)，但它不是用于`time()`，而是用于`mktime()`）。我认为`preInsert()`如果你必须这样做，你的钩子应该可以作为一种解决方法。
3.  参见 (1)，可时间戳行为非常简单，只需使用`time()`，但您始终可以自己编写！事实上，您可以只复制[现有的行为文件](https://github.com/propelorm/Propel/blob/master/generator/lib/behavior/TimestampableBehavior.php)，然后将其添加到您的构建属性（[自定义行为的 Propel 文档](http://propelorm.org/cookbook/writing-behavior.html)）。

祝你好运！

# c++ - 我试图用奇怪的结果将 vsnwprintf 包装在另一个函数中，它似乎给出了它的地址而不是实际值

> ID：14360337
> 
> 赞同：0
> 
> 时间：2013-01-16T14:11:36.450
> 
> 标签：c++, printf, variadic-functions

代码 ：

```
#include <stdarg.h>
#include <string>
#include <iostream>

std::wstring string_format(const std::wstring &fmt, ...) {
  int size = 100;
  std::wstring str;
  va_list ap;
  while (1) {
    str.resize(size);
    va_start(ap, fmt);
    int n = vsnwprintf((wchar_t *)str.c_str(), size, fmt.c_str(), ap);
    va_end(ap);
    if (n > -1 && n < size) {
      str.resize(n);
      return str;
    }
    if (n > -1) size = n + 1;
    else size *= 2;
    }
  return str;
}

std::wstring printf_wrapper(std::wstring text, ...) {
  using namespace std;
  va_list args;
  va_start(args, text);
  wstring formatted_text = string_format(text, args);
  va_end (args);
  return formatted_text;
}

int main(int argc, char *argv[])
{
    using namespace std;
    wcout << printf_wrapper(L"example%d",1) << endl;
    return 0;
} 
```

它返回：`example2293384`

函数来自这里：[https](https://stackoverflow.com/a/8098080/393087) : //stackoverflow.com/a/8098080/393087 此代码的来源来自 vsnprintf 的文档：[http ://www.tin.org/bin/man.cgi?section=3&topic= vsnprintf](http://www.tin.org/bin/man.cgi?section=3&topic=vsnprintf)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:15:06.913

你不能像那样“转发”可变参数。所以`string_format`需要将 a`va_list`作为它的第二个参数，而不是`...`.

# javascript - 从画布到文件上传 HTML 控件的 base64 图像

> ID：14360340
> 
> 赞同：1
> 
> 时间：2013-01-16T14:11:44.280
> 
> 标签：javascript, html, file-upload

是否可以通过画布（`canvas.toDataURL("image/png")`）导出图像并绑定以`<input type="file" />`编程方式上传控件而不使用服务器端技术（因此，只有 javascript）？

所以基本上，我的客户有一个`<form>`和其他字段，他希望有一个可编辑的图像字段，该字段将添加到 POST 上的文件上传 HTML 控件中。我不能以任何其他方式这样做，因为现有的`<form>`是第三方，这意味着我无法修改服务器端逻辑并且客户端坚持保留该第三方`<form>`。

所以，我有一个客户的具体愿望，我不知道这是否可能。任何提示/指针/帮助将不胜感激。谢谢！

编辑：可能应该提到该解决方案必须跨浏览器工作，包括 IE7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:23:13.387

可能您可以使用`FormData`. 您需要使用`BlobBuilder`. 与`FormData`您一起可以：

```
var dataURL = canvas.toDataURL('image/jpeg', 0.5),
    blob = dataURItoBlob(dataURL),
    fd = new FormData(document.getElementById('form'));
fd.append("canvasImage", blob); 
```

在这里您可以阅读有关此方法的更多信息[Convert Data URI to File 然后附加到 FormData](https://stackoverflow.com/questions/4998908/convert-data-uri-to-file-then-append-to-formdata)

# c++ - OpenGL：GLSL浮点精度低

> ID：14360343
> 
> 赞同：4
> 
> 时间：2013-01-16T14:11:47.760
> 
> 标签：c++, opengl-es, glsl

我有包含幅度值的浮动 alpha 纹理。它被转换为分贝并以灰度显示。

这是对话代码（C++）：

```
const float db_min = -100, db_max = 0;
float image[height][width];
for (int y = 0; y<height; ++y) {
  for (int x = 0; x<width; ++x) {
    image[y][x]= 20.f * log(a[i])/log(10.f);
    image[y][x] = (image[y][x]-db_min)/(db_max-db_min);
  }
} 
```

这是片段着色器（GLSL）：

```
#version 120
precision highp float;
varying vec2 texcoord;
uniform sampler2D texture;
void main() {
  float value = texture2D(texture, texcoord).a;
  gl_FragColor = vec4(value, value, value, 0);
} 
```

这是一个屏幕截图： ![在此处输入图像描述](../Images/f5947006c4edadf8214d4589202027e2.png)

看起来很完美！现在，我想在 Fragment Shader 本身而不是 C++ 中编写对话：

```
#version 120
precision highp float;
varying vec2 texcoord;
uniform sampler2D texture;
const float db_min = -100., db_max = 0.;
void main() {
  float value = texture2D(texture, texcoord).a;
  value = 20\. * log(value)/log(10.);
  value = (value-db_min)/(db_max-db_min);
  gl_FragColor = vec4(value, value, value, 0);
} 
```

这是一个屏幕截图： ![在此处输入图像描述](../Images/b0d725850bc833ed226e31f675b83ab5.png)

为什么结果不同？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:32:04.240

有限的纹素精度——这可能是问题所在。我可以猜想你将你的（我理解的非常高的范围`log`）值保持在每通道 8 位纹理（例如 RGBA8）中。然后您可以使用浮点格式或将您的高精度/范围值打包为 4 字节格式（例如定点）。

# c# - 总数 按年刷新后的真实行数

> ID：14360348
> 
> 赞同：2
> 
> 时间：2013-01-16T14:11:57.510
> 
> 标签：c#, sql, database, sql-server-2008

我正在研究 ac# 项目，因为我做了这个查询

```
SELECT COUNT(customer_column) 
FROM   table2 
WHERE  Datepart(mm, record_column) = @myMonthSelected 
AND    Datepart(yy, record_column) = @myYearSelected 
```

它计算排序后的总行数，现在我希望它修改具有“位”数据类型的列，我想通过与上述查询相同的月份和年份排序来计算真实行的总数。可以缩小我的搜索范围吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:14:13.777

试试这个

```
SELECT COUNT(customer_column) 
FROM   table2 
WHERE  Datepart(mm, record_column) = @myMonthSelected 
AND    Datepart(yy, record_column) = @myYearSelected
AND BitColumn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:14:20.627

我使用旧的“位总和”技巧。像这样：

```
SELECT SUM(someBitColumn) AS TotalCount
FROM someTable 
```

既然我在这里，这里有一个计算事物类型的变体：

```
SELECT
  SUM(
    CASE WHEN animalKind = 'Dog' THEN 1
      ELSE 0
    END CASE
  ) AS DogCount,
  SUM(
    CASE WHEN animalKind = 'Cat' THEN 1
      ELSE 0
    END CASE
  ) AS CatCount,
  ...
 FROM animals 
```

# xml - 将 XML 提要下载到本地磁盘

> ID：14360349
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:12:01.470
> 
> 标签：xml

我想自动将`XML`放置在服务器上的提要下载到我的 PC 或替代`Google Drive`（或类似的东西）。

我可以通过每天更改的特定 URL 访问此文件（由 URL &（用户名 + 密码 + 加密日期`SHA-1`）生成）。

我是新手，所以如果您对我的问题有任何解决方案，如果您能以简单的方式解释或提供参考以便我可以学习，那就太好了；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:35:54.323

你需要学习两件事：

1.  如何发出网络请求并阅读响应
2.  如何将字符串写入文件

# sql - 使用 FREETEXTTABLE 处理来自多表的搜索结果相关性

> ID：14360355
> 
> 赞同：0
> 
> 时间：2013-01-16T14:12:16.327
> 
> 标签：sql, full-text-search, relevance, freetexttable

我正在开发一个应用程序，它允许用户通过关键字搜索（使用 SQL 2008 全文索引表的 FREETEXTTABLE 功能）查找产品引用。这些参考是从两个可靠的不同数据库中提取的。但是，当我按等级排序时，它们不会给出相同的结果。我使用如下请求：

```
Select xxx FROM Table as P_TBL
INNER JOIN FREETEXTTABLE(Table, column,'key words',LANGUAGE 1033) AS F_TBL
ON P_TB.id = F_TBL.[Key]
ORDER BY RANK 
```

现在我想根据他们对 BOTH 请求的排名找到最相关的参考。

我想知道添加排名是否更好：例如，第一个表的排名为 115，第二个表的排名为 95，总排名为 210。或者，如果最好将它们相乘（100, 100 参考将变为 10 000 参考），因此 105,95 参考会更少，因为即使加法得分相同，结果也不相同。

任何提高这种情况下结果相关性的建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:25:48.427

我不是专家，但我会去求和，因为 FREETEXTTABLE 可以在一个表中返回 0，所以在这种情况下，乘法不会反映现实。[我在OKAPI BM25 排名公式](http://technet.microsoft.com/en-us/library/ms142524%28v=sql.100%29.aspx)中看到了一个类比，其中一般排名是通过对查询的各个术语进行排名并将它们相加来计算的。

# kerberos - 我可以验证密钥表文件中的密码吗？

> ID：14360359
> 
> 赞同：2
> 
> 时间：2013-01-16T14:12:28.427
> 
> 标签：kerberos, ktpass

我有一个 Kerberos 密钥表文件。有没有一种简单的方法来验证包含的密码是我假设的密码？我在十六进制编辑器中查看了该文件，并且根据[http://www.gnu.org/software/shishi/manual/html_node/The-Keytab-Binary-File-Format.html](http://www.gnu.org/software/shishi/manual/html_node/The-Keytab-Binary-File-Format.html)中描述的结构，keyblock包含的类型是 3 用于 des-cbc-md5，1 用于 ??，23 用于 arcfour-hmac-md5，16 用于 des3-cbc-sha1，17 用于 ??

# xml - 如何根据子元素选择元素

> ID：14360367
> 
> 赞同：2
> 
> 时间：2013-01-16T14:12:52.550
> 
> 标签：xml, powershell, xpath

我不是 PowerShell 或 XPath 方面的专家，但我正在努力解决这个看似简单的问题。假设我有这个 XML 文档：

```
<?xml version="1.0" encoding="utf-8"?>
<Cars>
  <Car>
    <Name>Car1</Name>
    <Colors>
      <Color>
        <Name>Indian yellow</Name>
        <Effects>
          <Effect>Blur</Effect>
          <Effect>Shadow</Effect>
        </Effects>
      </Color>
      <Color>
        <Name>Fireapple red</Name>
        <Effects>
          <Effect>Shadow</Effect>
        </Effects>
      </Color>
    </Colors>
  </Car>
  <Car>
    <Name>Car2</Name>
    <Colors>
      <Color>
        <Name>Indian yellow</Name>
        <Effects>
          <Effect>Blur</Effect>
          <Effect>Shadow</Effect>
          <Effect>Saturated</Effect>
        </Effects>
      </Color>
      <Color>
        <Name>Chrome black</Name>
        <Effects>
          <Effect>Saturated</Effect>
        </Effects>
      </Color>
    </Colors>
  </Car>
  <Car>
    <Name>Car3</Name>
    <Colors>
      <Color>
        <Name>Indian yellow</Name>
        <Effects>
          <Effect>Shadow</Effect>
          <Effect>Saturated</Effect>
        </Effects>
      </Color>
      <Color>
        <Name>Fireapple red</Name>
        <Effects>
          <Effect>Saturated</Effect>
        </Effects>
      </Color>
    </Colors>
  </Car>
</Cars> 
```

如何使用 Select-Xml 选择具有“饱和”颜色效果的汽车名称？请注意，我需要一个独特的汽车集合，例如 Car2 不能选择两次，即使两种颜色都具有“饱和”效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:20:44.717

XPath`/Cars/Car[Colors/Color/Effects/Effect = 'Saturated']/Name`应该可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:21:09.283

**使用**：

```
/*/Car[Colors/Color/Effects/Effect = 'Saturated'
     and
       not(Name = preceding-sibling::Car[Colors/Color/Effects/Effect = 'Saturated']/Name)
      ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:21:40.000

我正在尝试自己学习 xpath，所以这可能并不完美，但您可以尝试：

```
$xml = [xml] (Get-Content C:\test.xml)
$names = $xml.SelectNodes('/Cars/Car[Colors/Color/Effects/Effect="Saturated"]') | Select-Object -ExpandProperty Name 
```

或者`Select-XML`按照您的要求使用，请改用：

```
$names = Select-Xml -Xml $xml -XPath '/Cars/Car[Colors/Color/Effects/Effect="Saturated"]/Name') | Select-Object -ExpandProperty Node | Select-Object -ExpandProperty '#text' 
```

它将名称作为字符串提取到`$names`变量中。

# excel - 交叉引用不同的工作簿

> ID：14360370
> 
> 赞同：-2
> 
> 时间：2013-01-16T14:13:00.550
> 
> 标签：excel, excel-2007

我有两个 Excel 文件：

**文件 1**

> ```
>  A                B
> 1   NameofDeal  
> 2   Nike Man  
> 3   Nike Woman  
> 4   Adidas Man  
> 5   Adidas Woman 
> ```

有更多的行，以及与此处不相关的其他列。

**文件2**

> ```
>  A             B           C         D  
> 1   NameofDeal    Company     TaxNo  
> 2   NIKE woman    Nike        101  
> 3   NIKE man      NIKE        101  
> 4   Adidas man    ADIDAS      102  
> 5   Reebok shorts Reebok      103  
> 6   Nike shoes    Nike        101 
> ```

和其他行（但少于 File1 中的）和与此处无关的列。不管是男人还是女人，公司可能都是一样的。耐克男士和耐克女士的税号相同，阿迪达斯男士或阿迪达斯女士的税号相同等。

如何为第一个工作簿实现以下目标？

```
 A             B             C
1   NameofDeal    TaxNo
2   Nike Man       101
3   Nike Woman     101
4   Adidas Man     102
5   Adidas Woman   102
6   Reebok shorts  103 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:19:47.973

利用

> =VLOOKUP(A2,'~\Two.xlsx'!TList,3,0)

应该适合，前提是文件二未使用（“锁定”）。`~`以上是完整路径的位置标记，应按照 D:\Folder1\Folder2 的行进行替换，注意使用撇号和最后的反斜杠。

公式将输入到 ColumnA 的右侧和第一个条目的行（此处为 Row2），然后根据需要向下复制。

![SU14360370 示例](../Images/2fb55596ba974a4ec92079690595df6f.png)

请注意，图像未显示完整路径，因为在截取屏幕截图时文件已在同一个 Excel 实例中打开。

# c++ - 重载强制转换运算符的优先级

> ID：14360371
> 
> 赞同：14
> 
> 时间：2013-01-16T14:13:05.457
> 
> 标签：c++, visual-studio-2010

在下面的代码中，如果由于歧义而定义了多个强制转换运算符，我预计会出现编译器错误。

```
#include <iostream>
#include <sstream>

struct A
{
    operator const char*() { return "hello world\n"; }
    operator float()       { return 123.0F; }
    //operator int()         { return 49; }
};

int main()
{
    A a;
    std::stringstream ss;
    ss << a;
    std::cout << ss.str();
    return 0;
} 
```

相反，只要只定义了一个数字转换运算符，它就可以编译而没有错误、没有警告，并且优先使用数字转换而不是`operator const char *()`. 声明的运算符的顺序没有区别。

但是，如果`operator int()`和`operator float()`都定义了，那么我从一开始就得到了我的期望：

> 'operator <<' 不明确

转换是否有优先规则，或者为什么编译器默认选择数字转换？我确实明白我应该明确说明我的意思是哪个演员，但我的问题是编译器做出的默认选择。

* * *

编辑：使用编译器 MSVC 2010

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:25:32.860

根据 C++ 标准的 § 13.3.3.1 对转换进行排名。特别是，与您的示例相关的用户定义的转换序列受 § 13.3.3.1.2/1 的约束：

*“用户定义的转换序列由初始标准转换序列和用户定义的转换 (12.3) 和第二个标准转换序列组成。[...] 如果用户定义的转换由转换函数指定 ( 12.3.2），初始标准转换序列将源类型转换为转换函数的隐式对象参数。”*

这里的所有转换序列都涉及：

1.  对转换函数的隐式对象参数的源类型的虚构转换；
2.  用户定义的转换；
3.  到输入类型的身份转换`operator <<`。

These conversion sequences all have the same rank. Thus, **the call should be ambiguous**. If it is not, for me it is a compiler bug.

# javascript - 什么 Permission denied to access object in Firebug's console (Firebug is a FF addon) using Firefox 17 (latest) version？

> ID：14360377
> 
> 赞同：3
> 
> 时间：2013-01-16T14:13:42.413
> 
> 标签：javascript, jquery-ui, firefox, jquery, cross-browser

只是想知道是否有人发现在萤火虫控制台中看到以下错误，或者知道这意味着什么？当在两个选项卡中打开相同的页面时，这是否与浏览器有关？有没有解决过类似的问题？？什么是确保不抛出此错误的方法，这对我来说很烦人:(

是否必须与该站点需要 cookie、javascript 或您可以建议的任何考虑因素有关？

```
Error: Permission denied to access object

Error: Permission denied to access object

Error:

Error: Permission denied to access object

Error: Permission denied to access object

Error: 
```

可重复性：（在使用 FF 在两个选项卡中加载页面时，控制台中列出了 6 个错误）尚未尝试其他浏览器。这个错误似乎不显眼，它不会阻止任何代码继续，但我很想摆脱它，或阻止它..提前感谢您的帮助！非常感激

编辑：

![这是上面提到的错误](../Images/8b1d019e77b4317eb47ea2885d735ac4.png)

现在我得到了一个新的，这可能是问题的原因:(

**受保护功能错误！281**

![在此处输入图像描述](../Images/d1cbbd3bb5fdc791cb5ab082fac86b1c.png)

此外：

@Pointy：-是的，在 FF 18 上测试。顺便说一下，你在那个陈述上是绝对正确的；）感谢您的健全性检查：）

![FF18](../Images/ae8422bad9fc383e474a004b1176bc05.png)

# c# - 使用 BmpBitmapEncoder 黑色图像保存 Windows.Media.Drawing - 如何删除 alpha？

> ID：14360378
> 
> 赞同：0
> 
> 时间：2013-01-16T14:13:43.233
> 
> 标签：c#, wpf, rendertargetbitmap, system.windows.media, bitmapframe

我正在使用 SVG# ( [http://sharpvectors.codeplex.com/](http://sharpvectors.codeplex.com/) ) 将 SVG 文件批量转换为其他格式。被转换的 SVG 图像是没有背景的黑色线条图。我对 WPF 或 System.Windows.Media 命名空间几乎没有经验，所以如果这是一个基本问题，请原谅。

我正在使用来自 SVG# 的 ImageSvgConverter 的修改版本，它接受一个 `System.Windows.Media.Drawing`对象，然后使用`System.Windows.Media`编码器（`BmpBitmapEncoder`等`PngBitmapEncoder`）将其转换为所需的文件格式。

当我使用 a 导出时`TiffBitmapEncoderor`，`PngBitmapEncoder` 或者`GifBitmap`图像按预期生成。生成的图像都有透明背景。

但是，当我使用`JpegBitmapEncoder`or导出时`BmpBitmapEncoder`，所有图像都变黑了。由于 tif、png 和 gif 都具有透明背景，我认为 jpg / bmp 图像被正确绘制，但是，由于这些文件格式不支持 alpha，因此具有黑色输出是有意义的，因为透明度会被解释什么都没有/黑色。

我认为这与这些 SO 帖子中所述[来自 BitmapSource 的奇怪 bmp 黑色输出 - 有什么想法吗？](https://stackoverflow.com/questions/8881830/strange-bmp-black-output-from-bitmapsource-any-ideas)，[将透明PNG转换为具有非黑色背景颜色的JPG，](https://stackoverflow.com/questions/6513633/c-convert-transparent-png-to-jpg-with-non-black-background-color)并且[在保存位图时背景变为黑色-C#](https://stackoverflow.com/questions/8316987/background-turns-black-when-saving-bitmap-c-sharp)。

但是，我看不到将这些帖子应用于我的问题的方法。谁能指出我正确的方向？

我尝试将白色 SolidColorBrush 应用于 DrawingContext 的 PushOpacityMask 方法，但是，这没有区别。

非常感谢任何指示。

```
 private Stream SaveImageFile(Drawing drawing)
    {
        // black output
        BitmapEncoder bitmapEncoder = new BmpBitmapEncoder(); 

        // works
        //bitmapEncoder  = new PngBitmapEncoder();

        // The image parameters...
        Rect drawingBounds = drawing.Bounds;
        int pixelWidth = (int)drawingBounds.Width;
        int pixelHeight = (int)drawingBounds.Height;
        double dpiX = 96;
        double dpiY = 96;

        // The Visual to use as the source of the RenderTargetBitmap.
        DrawingVisual drawingVisual = new DrawingVisual();
        DrawingContext drawingContext = drawingVisual.RenderOpen();

        // makes to difference - still black
        //drawingContext.PushOpacityMask(new SolidColorBrush(System.Windows.Media.Color.FromRgb(255,255,255)));

        drawingContext.DrawDrawing(drawing);
        drawingContext.Close();

        // The BitmapSource that is rendered with a Visual.
        RenderTargetBitmap targetBitmap = new RenderTargetBitmap(pixelWidth, pixelHeight, dpiX, dpiY, PixelFormats.Pbgra32);

        targetBitmap.Render(drawingVisual);

        // Encoding the RenderBitmapTarget as an image file.
        bitmapEncoder.Frames.Add(BitmapFrame.Create(targetBitmap));

        MemoryStream stream = new MemoryStream();
        bitmapEncoder.Save(stream);
        stream.Position = 0;
        return stream;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:29:46.683

`drawing`您可以在实际对象之前绘制一个具有适当大小的填充“背景”矩形。

```
using (var drawingContext = drawingVisual.RenderOpen())
{
    drawingContext.DrawRectangle(Brushes.White, null, new Rect(drawingBounds.Size));
    drawingContext.DrawDrawing(drawing);
} 
```

# php - MySQL中求和变量的平均值

> ID：14360380
> 
> 赞同：0
> 
> 时间：2013-01-16T14:13:52.993
> 
> 标签：php, mysql, average

我有一个 MYSQL 数据库的查询，如下所示：

```
SELECT name,
SUM(IF(date_format (date, '%b, %Y')= 'Dec, 2011', 1,0)) AS `month1`, 
SUM(IF(date_format (date, '%b, %Y')= 'Jan, 2012', 1,0)) AS `month2`, 
SUM(IF(date_format (date, '%b, %Y')= 'Feb, 2012', 1,0)) AS `month3`, 
etc...
COUNT(*) AS total FROM table order by total 
```

但是，我需要平均month1到month12而不是总数。

编辑 - 我需要保留求和的数字（month1,2 等），但我还需要计算它们的平均值。

因此，如果第 1-12 个月的结果是 -

55, 60, 70, 54, 89, 58, 68, 78, 65, 89, 73, 81 总数为 840

我需要计算所有这些数字的平均值 (70)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:16:01.573

```
SELECT name,
AVG(IF(date_format (date, '%b, %Y')= 'Dec, 2011', 1,0)) AS `month1`, 
AVG(IF(date_format (date, '%b, %Y')= 'Jan, 2012', 1,0)) AS `month2`, 
AVG(IF(date_format (date, '%b, %Y')= 'Feb, 2012', 1,0)) AS `month3`, 
-- etc...
COUNT(*) AS total FROM table order by total 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:16:02.343

简单的：

```
SELECT name,
AVG(IF(date_format (date, '%b, %Y')= 'Dec, 2011', 1,0)) AS `month1`, 
AVG(IF(date_format (date, '%b, %Y')= 'Jan, 2012', 1,0)) AS `month2`, 
AVG(IF(date_format (date, '%b, %Y')= 'Feb, 2012', 1,0)) AS `month3`, 
etc...
COUNT(*) AS total FROM table order by total 
```

# c# - 从装订中设置边距

> ID：14360381
> 
> 赞同：15
> 
> 时间：2013-01-16T14:13:54.107
> 
> 标签：c#, wpf, xaml, binding, margin

我有一个绑定值，它返回一个 int，它表示我没有分配给元素左右边距的值。

这是我尝试过的，但它不会编译。

如果我设置整个边距，它会起作用，但我只想要左右。

xml:

```
<Image x:Name="_image" Source="mat.png" Margin="{Binding EditorRow.BondIndent},0,{Binding EditorRow.BondIndent},0" /> 
```

班级：

```
public int BondIndent
{
    get { return _bondSequence * 5; }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-16T14:33:09.797

退回保证金？

```
public Thickness Margin
{
    get { return new Thickness(BondIndent,0,BondIndent,0);}
} 
```

然后改变：

```
<Image x:Name="_image" Source="mat.png" Margin="{Binding EditorRow.Margin}" /> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-16T14:17:29.653

您可能需要为此使用[ValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)。就像是：

```
public class LeftRightThicknessConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value is int)
        {
            int margin = (int)value;
            return Thickness(margin, 0, margin, 0);
        }
        return Thickness();
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

然后，您可以通过以下方式使用转换器：

```
<Grid>
    <Grid.Resources>
        <xxx:LeftRightThicknessConverter x:Key="LeftRightThicknessConverter" />
    </Grid.Resources>

    <Image Margin="{Binding SomePropertyPath, Converter={StaticResource LeftRightThicknessConverter}}" />
</Grid> 
```

假设这`xxx`是一个有效的 xml 命名空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T10:20:02.153

`int`您可以返回一个[Thickness](http://msdn.microsoft.com/en-us/library/system.windows.thickness.aspx) ，而不是返回一个，它`Margin`实际上是：

```
public Thickness BondIndent
{
    get
    {
        int margin = _bondSequence * 5;
        return new Thickness(margin, 0, margin, 0);
    }
} 
```

您的示例有效的原因是因为`Thickness`重载了带有 1、2 或 4 个参数的构造函数。当调用带有 1 个参数的构造函数时，所有边都被初始化为该值。WPF 会`Thickness`根据绑定值自动将其转换为 a。

在另一个主题上，`BondIndent`最好`BondMargin`还是`BondThickness`现在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-05T00:47:38.257

刚刚写了一些附加属性，应该可以很容易地从绑定或静态资源中设置单个 Margin 值：

WPF：

```
public class Margin
{
    public static readonly DependencyProperty LeftProperty = DependencyProperty.RegisterAttached(
        "Left",
        typeof(double),
        typeof(Margin),
        new PropertyMetadata(0.0, LeftChanged));

    private static void LeftChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var frameworkElement = d as FrameworkElement;
        if (frameworkElement != null)
        {
            Thickness currentMargin = frameworkElement.Margin;
            frameworkElement.Margin = new Thickness((double)e.NewValue, currentMargin.Top, currentMargin.Right, currentMargin.Bottom);
        }
    }

    public static void SetLeft(UIElement element, double value)
    {
        element.SetValue(LeftProperty, value);
    }

    public static double GetLeft(UIElement element)
    {
        return 0;
    }

    public static readonly DependencyProperty TopProperty = DependencyProperty.RegisterAttached(
        "Top",
        typeof(double),
        typeof(Margin),
        new PropertyMetadata(0.0, TopChanged));

    private static void TopChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var frameworkElement = d as FrameworkElement;
        if (frameworkElement != null)
        {
            Thickness currentMargin = frameworkElement.Margin;
            frameworkElement.Margin = new Thickness(currentMargin.Left, (double)e.NewValue, currentMargin.Right, currentMargin.Bottom);
        }
    }

    public static void SetTop(UIElement element, double value)
    {
        element.SetValue(TopProperty, value);
    }

    public static double GetTop(UIElement element)
    {
        return 0;
    }

    public static readonly DependencyProperty RightProperty = DependencyProperty.RegisterAttached(
        "Right",
        typeof(double),
        typeof(Margin),
        new PropertyMetadata(0.0, RightChanged));

    private static void RightChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var frameworkElement = d as FrameworkElement;
        if (frameworkElement != null)
        {
            Thickness currentMargin = frameworkElement.Margin;
            frameworkElement.Margin = new Thickness(currentMargin.Left, currentMargin.Top, (double)e.NewValue, currentMargin.Bottom);
        }
    }

    public static void SetRight(UIElement element, double value)
    {
        element.SetValue(RightProperty, value);
    }

    public static double GetRight(UIElement element)
    {
        return 0;
    }

    public static readonly DependencyProperty BottomProperty = DependencyProperty.RegisterAttached(
        "Bottom",
        typeof(double),
        typeof(Margin),
        new PropertyMetadata(0.0, BottomChanged));

    private static void BottomChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var frameworkElement = d as FrameworkElement;
        if (frameworkElement != null)
        {
            Thickness currentMargin = frameworkElement.Margin;
            frameworkElement.Margin = new Thickness(currentMargin.Left, currentMargin.Top, currentMargin.Right, (double)e.NewValue);
        }
    }

    public static void SetBottom(UIElement element, double value)
    {
        element.SetValue(BottomProperty, value);
    }

    public static double GetBottom(UIElement element)
    {
        return 0;
    }
} 
```

超轻量级：

```
public class Margin
{
    public static readonly DependencyProperty LeftProperty = DependencyProperty.RegisterAttached(
        "Left",
        typeof(double),
        typeof(Margin),
        new PropertyMetadata(0.0));

    public static void SetLeft(UIElement element, double value)
    {
        var frameworkElement = element as FrameworkElement;
        if (frameworkElement != null)
        {
            Thickness currentMargin = frameworkElement.Margin;

            frameworkElement.Margin = new Thickness(value, currentMargin.Top, currentMargin.Right, currentMargin.Bottom);
        }
    }

    public static double GetLeft(UIElement element)
    {
        return 0;
    }

    public static readonly DependencyProperty TopProperty = DependencyProperty.RegisterAttached(
        "Top",
        typeof(double),
        typeof(Margin),
        new PropertyMetadata(0.0));

    public static void SetTop(UIElement element, double value)
    {
        var frameworkElement = element as FrameworkElement;
        if (frameworkElement != null)
        {
            Thickness currentMargin = frameworkElement.Margin;

            frameworkElement.Margin = new Thickness(currentMargin.Left, value, currentMargin.Right, currentMargin.Bottom);
        }
    }

    public static double GetTop(UIElement element)
    {
        return 0;
    }

    public static readonly DependencyProperty RightProperty = DependencyProperty.RegisterAttached(
        "Right",
        typeof(double),
        typeof(Margin),
        new PropertyMetadata(0.0));

    public static void SetRight(UIElement element, double value)
    {
        var frameworkElement = element as FrameworkElement;
        if (frameworkElement != null)
        {
            Thickness currentMargin = frameworkElement.Margin;

            frameworkElement.Margin = new Thickness(currentMargin.Left, currentMargin.Top, value, currentMargin.Bottom);
        }
    }

    public static double GetRight(UIElement element)
    {
        return 0;
    }

    public static readonly DependencyProperty BottomProperty = DependencyProperty.RegisterAttached(
        "Bottom",
        typeof(double),
        typeof(Margin),
        new PropertyMetadata(0.0));

    public static void SetBottom(UIElement element, double value)
    {
        var frameworkElement = element as FrameworkElement;
        if (frameworkElement != null)
        {
            Thickness currentMargin = frameworkElement.Margin;

            frameworkElement.Margin = new Thickness(currentMargin.Left, currentMargin.Top, currentMargin.Right, value);
        }
    }

    public static double GetBottom(UIElement element)
    {
        return 0;
    }
} 
```

用法：

```
<TextBlock Text="Test"
    app:Margin.Top="{Binding MyValue}"
    app:Margin.Right="{StaticResource MyResource}"
    app:Margin.Bottom="20" /> 
```

好消息是它们不会覆盖 Margin 上的其他值，因此您也可以将它们组合起来。

# python - 从python中的命令行参数获取文件路径

> ID：14360389
> 
> 赞同：24
> 
> 时间：2013-01-16T14:14:25.493
> 
> 标签：python

如果我们从命令行参数传递文件并提取文件，谁能指导我如何获取文件路径。如果我们还需要检查文件是否存在于特定目录中

```
python.py /home/abhishek/test.txt 
```

获取文件路径并检查 test.txt 是否存在于 abhishek 文件夹中。

我知道这可能很容易，但我对 pytho 有点陌生

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-16T14:15:33.037

```
import os
import sys

fn = sys.argv[1]
if os.path.exists(fn):
    print os.path.basename(fn)
    # file exists 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-05-23T09:00:42.040

从 python 3.4 开始，您可以将[argparse](https://docs.python.org/3/library/argparse.html)与[pathlib](https://docs.python.org/3/library/pathlib.html#module-pathlib)一起使用：

```
import argparse
from pathlib import Path

parser = argparse.ArgumentParser()
parser.add_argument("file_path", type=Path)

p = parser.parse_args()
print(p.file_path, type(p.file_path), p.file_path.exists()) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-11-16T07:50:18.460

我认为最优雅的方式是使用[`ArgumentParser`](https://docs.python.org/3.6/library/argparse.html#default)这种方式，您甚至可以获得`-h`帮助用户弄清楚如何传递参数的选项。我还包括了一个可选参数 ( `--outputDirectory`)。

现在你可以简单地执行`python3 test.py /home/test.txt --outputDirectory /home/testDir/`

```
import argparse
import sys
import os

def create_arg_parser():
    # Creates and returns the ArgumentParser object

    parser = argparse.ArgumentParser(description='Description of your app.')
    parser.add_argument('inputDirectory',
                    help='Path to the input directory.')
    parser.add_argument('--outputDirectory',
                    help='Path to the output that contains the resumes.')
    return parser

if __name__ == "__main__":
    arg_parser = create_arg_parser()
    parsed_args = arg_parser.parse_args(sys.argv[1:])
    if os.path.exists(parsed_args.inputDirectory):
       print("File exist") 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-16T14:17:22.817

用这个：

```
import sys
import os

path = sys.argv[1]

# Check if path exits
if os.path.exists(path):
    print "File exist"

# Get filename
print "filename : " + path.split("/")[-1] 
```

# c# - XNA - 保存 xml 文件时出现 UnauthorizedAccessException

> ID：14360395
> 
> 赞同：1
> 
> 时间：2013-01-16T14:14:58.427
> 
> 标签：c#, xml, xna, directory, file-permissions

在我的游戏过程中，您可以保存地图并将地图中的图块存储到 xml 文件中。
到目前为止没有问题。当我尝试保存它时问题就开始了，它`UnauthorizedAccessException`以某种方式给了我一个错误。

该文件夹位于我的游戏的安装目录中：

> 安装目录/数据/地图/

我检查以确保该文件夹已成功创建并具有正确的权限（写入、读取和执行）。

难道我做错了什么？

这是我的代码：

```
private void CreateXMLOfMap()
{
    List<Tile> tiles = mapContainer.GetTileList();
    XmlDocument doc = new XmlDocument();
    XmlNode docNode = doc.CreateXmlDeclaration("1.0", "UTF-8", null);
    doc.AppendChild(docNode);

    XmlNode rootNode = doc.CreateElement("Map");
    doc.AppendChild(rootNode);

    XmlNode mapName = doc.CreateElement("Name");
    mapName.AppendChild(doc.CreateTextNode("custom_map"));
    rootNode.AppendChild(mapName);

    XmlNode tilesNode = doc.CreateElement("Tiles");
    rootNode.AppendChild(tilesNode);

    for (int i = 0; i < tiles.Count; i++ )
    {
        XmlNode tileNode = doc.CreateElement("Tile");
        tilesNode.AppendChild(tileNode);

        XmlNode positionNode = doc.CreateElement("Position");
        tileNode.AppendChild(positionNode);
        XmlNode xNode = doc.CreateElement("X");
        xNode.AppendChild(doc.CreateTextNode(tiles[i].GetTilePosition().X.ToString()));
        positionNode.AppendChild(xNode);
        XmlNode yNode = doc.CreateElement("Y");
        yNode.AppendChild(doc.CreateTextNode(tiles[i].GetTilePosition().Y.ToString()));
        positionNode.AppendChild(yNode);

        XmlNode textureNode = doc.CreateElement("Texture");
        textureNode.AppendChild(doc.CreateTextNode(tiles[i].GetTileInfo().Name.ToString()));
        tileNode.AppendChild(textureNode);

        XmlNode YFrameNode = doc.CreateElement("YFrame");
        YFrameNode.AppendChild(doc.CreateTextNode(tiles[i].GetCurrentFrame().Y.ToString()));
        tileNode.AppendChild(YFrameNode);
    }

    doc.Save(Constants.MAPS_DIRECTORY);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:44:28.603

我认为问题在于您没有以管理员身份运行应用程序，这会导致`UnauthorizedAccessException`. 所以你应该[强制系统以管理员身份运行它](https://stackoverflow.com/questions/2818179/how-to-force-my-net-app-to-run-as-administrator-on-windows-7)。尝试从以下位置更改应用程序清单文件：

```
<requestedExecutionLevel level="asInvoker" uiAccess="false"/> 
```

到：

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false"/> 
```

**编辑：**

> 如何使用 Visual Studio 的管理员权限运行游戏？

有时，即使我是系统管理员，当我使用 vs2010 调试应用程序时也会遇到这种情况。但是，如果您想以管理员身份调试应用程序，请尝试右键单击 Visual Studio 图标，然后*以管理员身份运行*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:28:39.243

好的，所以我发现了导致此异常出现的问题。看来我只包含了目录，但没有包含文件名。所以它试图将内容存储到目录中，而不是存储到 xml 文件中。

我所要做的就是把进入的字符串

```
doc.Save(PATH_TO_DIR_WITH_FILE_NAME); 
```

但我会坚持下去，如果我继续这样下去，我可能最终需要管理员权限，所以我迟早需要改变它。

感谢大家的建议和帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-08T12:39:57.220

我有类似的问题，但我认为，调用简单文件操作的管理员权限是不正确的。所以我在保存之前手动删除了现有文件：

```
File.Delete(mainXmlPath);
xmlDocument.Save(mainXmlPath); 
```

# javascript - 以角度深度复制对象？

> ID：14360401
> 
> 赞同：51
> 
> 时间：2013-01-16T14:15:17.040
> 
> 标签：javascript, angularjs

我想知道当您需要创建一个具有嵌入式对象数组的简单对象时，是否可以避免复制对对象的引用。情况如下：我有一个接受 JSON 并应用一些逻辑然后将对象存储在D B。假设我的表格用于在数据库中保存团队。服务器接受团队作为 json。团队有一个 TeamMember 对象数组，我的表单有一个简单的字段来输入团队成员信息并将其添加到团队 teamMembers 数组中。现在问题来了，当我将一个团队成员添加到数组列表中并想在我输入字段时添加另一个团队成员时，添加的成员也会更改！。我知道原因

```
$scope.addTeamMember=function(teamMember){
   $scope.team.teamMembers.push(teamMember);
} 
```

这是因为我将相同的引用放入 teamMembers 数组中，所以我多次添加了相同的对象。为避免这种情况，我应该创建一个新的团队成员对象，复制所有 teamMember 属性并将其添加到数组中。

```
 $scope.addTeamMember=function(teamMember){
       var newTeamMember; /*<--- copy teamMember */
       $scope.team.teamMembers.push(newTeamMember); /*and add newTeamMember*/
    } 
```

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-01-16T14:21:20.517

你的问题说你想“避免深拷贝”，但我不确定这是否准确。听起来您只想使用[angular.copy](http://docs.angularjs.org/api/angular.copy)，因为您需要创建团队成员的副本并将其添加到数组中：

```
$scope.addTeamMember = function(teamMember) {
   var newTeamMember = angular.copy(teamMember);
   $scope.team.teamMembers.push(newTeamMember);
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-08T07:31:16.040

这是可用的最佳文档

[https://docs.angularjs.org/api/ng/function/angular.copy](https://docs.angularjs.org/api/ng/function/angular.copy)

页面上还有一个活生生的例子，它是自我说明的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-19T06:55:21.163

我个人使用这个：

```
 function copyObjToObj(source, destination) {
        if(!angular.equals(source,destination)){
            if (!!destination) 
                angular.copy(source, destination);
            else 
                destination = angular.copy(source);
        }
        return destination;
    }
var destination = copyObjToObj(sourceObj, destination); 
```

# bash - && 在将输出重定向到文件时做了什么？

> ID：14360402
> 
> 赞同：2
> 
> 时间：2013-01-16T14:15:17.470
> 
> 标签：bash, unix, redirect

我找到了一个 bash[脚本](https://stackoverflow.com/questions/1943727/find-all-files-with-blank-or-ws-at-bof-or-eof)，它列出了在文件开头或结尾处有一个空行的所有文件。

```
for f in `find . -type f`; do 
  for t in head tail; do 
    $t -1 $f  |egrep '^[  ]*$' >/dev/null && echo "blank line at the $t of $f" ;
  done; 
done 
```

我想将输出传递给文件。我将`echo`行更改为：

```
$t -1 $f  |egrep '^[  ]*$' >/dev/null && echo "blank line at the $t of $f" > blank_lines.log 
```

但这没有用。

我想问一下符号的`&&`作用以及为什么上面的行没有将输出传递给文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T14:16:42.400

这不会重定向输出，它会添加另一个命令以执行当且仅当第一个命令成功时。即`command1 && command2`表示执行`command1`，如果成功则执行`command2`。此外，当且仅当两个命令都成功时，执行此语句的结果才是成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T15:37:28.337

重定向不起作用的原因是您曾经`>`重定向输出。这会在将命令的输出写入文件之前*擦除文件，这意味着您只会看到最后写入的内容。*要解决此问题，请使用`>>`附加（尽管您可能需要在开头截断文件以防止多次运行脚本累积的输出），或重定向整个循环的输出。

顺便说一句，`for ... find`如果任何文件名中包含空格或其他有趣的字符，您用于迭代文件的构造将严重失败。使用起来要好得多`find ... -print0 | while IFS= read -d $'\0' ...`（然后在 周围使用双引号`$f`）：

```
find . -type f -print0 | while IFS= read -d $'\0' f; do 
    for t in head tail; do 
        $t -1 "$f"  |egrep '^[  ]*$' >/dev/null && echo "blank line at the $t of $f"
    done
done > blank_lines.log 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T14:16:59.640

这是一个短路的“与”运算符。它不参与输出重定向。

在这种情况下，它仅在左侧成功时才执行右侧。即，如果 egrep 确实报告了一个空白行，它只会打印出“...处的空白行”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T15:12:20.433

正如其他人所提到的 && 是一个短路和运算符：

```
command1 && command2 
```

执行 command1，如果该命令运行时没有错误（退出代码 0），则执行 command2。然后它返回 command2 的退出代码。

```
echo "foo" > /dev/null && echo "bar" > tmp.txt 
```

确实有效，因此您的脚本无效的原因应该是其他原因。也许尝试执行

```
$t -1 $f  |egrep '^[  ]*$' >/dev/null && echo "blank line at the $t of $f" > blank_lines.log 
```

没有变量和for循环的行。

# ios - UINavigationController 对调用 pushViewController: 函数的对象做什么？

> ID：14360403
> 
> 赞同：0
> 
> 时间：2013-01-16T14:15:23.213
> 
> 标签：ios, xcode, uinavigationcontroller

它是从超级视图中删除对象还是只是隐藏该对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:18:30.413

检查文档 :) 它将它添加到堆栈中，而不是删除它。`popViewControllerAnimated:`删除它。

> viewController 参数中的对象成为导航堆栈上的顶部视图控制器。推送视图控制器会导致显示它管理的视图。该视图的显示方式由动画参数决定。如果动画参数为 YES，则视图动画到位；否则，视图只是显示在适当的位置。在显示之前，视图会自动调整大小以适应导航栏和工具栏（如果存在）。
> 
> 除了在堆栈顶部显示与新视图控制器关联的视图外，此方法还相应地更新导航栏和工具栏。在 iOS 3.0 及更高版本中，内置导航工具栏的内容会更新以反映新视图控制器的工具栏项。有关如何更新导航栏的信息，请参阅“更新导航栏”。</p>

[http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instm/UINavigationController/pushViewController:animated](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instm/UINavigationController/pushViewController:animated)：

# php - PHP：如何检测 IPv6 是否在 IPV6 范围内？

> ID：14360407
> 
> 赞同：1
> 
> 时间：2013-01-16T14:15:36.750
> 
> 标签：php, ip, ipv6

我有一个 ipv6 范围，但我不知道如何检测 $_SERVER['REMOTE_ADDRESS'] 是否在 ipv6 范围内？需要帮忙。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T16:14:08.170

检查地址是否在范围内的最简单方法是将地址和范围的限制转换为二进制，然后使用普通的比较运算符：

```
$first_in_range = inet_pton('2001:db8::');
$last_in_range = inet_pton('2001:db8::ffff:ffff:ffff:ffff');

$address = inet_pton($_SERVER['REMOTE_ADDR']);

if ((strlen($address) == strlen($first_in_range))
&&  ($address >= $first_in_range && $address <= $last_in_range)) {
    // In range
} else {
    // Not in range
} 
```

# android - PhoneGap：未定义新 Runnable 类型的 setContentView

> ID：14360411
> 
> 赞同：0
> 
> 时间：2013-01-16T14:15:46.680
> 
> 标签：android, cordova, phonegap-plugins

我正在尝试使用 VideoView 创建一个 PhoneGap 插件 tp 播放视频。但我收到以下错误：

对于新的 Runnable 类型，setContentView 未定义。

```
package com.phonegap.plugins.video;

import org.json.JSONArray;
import org.json.JSONException;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaPlugin;
import android.widget.VideoView;

public class VideoPlayer extends CordovaPlugin {

@Override
public boolean execute(String action, JSONArray args, final CallbackContext callbackContext) throws JSONException {
    if ("playVideo".equals(action)) {
        cordova.getActivity().runOnUiThread(new Runnable() {
            public void run() {
                VideoView videoHolder = new VideoView(cordova.getActivity().getApplicationContext());
                setContentView(videoHolder);
                videoHolder.setVideoURI(Uri.parse("file:///sdcard/Android/data/Bis/v2.mp4"));
                videoHolder.requestFocus();
                videoHolder.start();            
                callbackContext.success(); // Thread-safe.
            }
        });
        return true;
    }
    return false;
} 
```

需要调用 SetContentView 的方式是否有任何变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:16:29.773

`cordova.getActivity().setContentView()`. 由于在`Runnable`this 内部是指内部类`Runnable`

# javascript - 用于在同一画布上绘制多个图形的 HTML5 图表库

> ID：14360412
> 
> 赞同：0
> 
> 时间：2013-01-16T14:15:57.520
> 
> 标签：javascript, html, graph, html5-canvas

任务是在同一个画布上绘制多个图表。RGraph 对我来说没问题，但是当我添加标签时它就成了一个问题。它不进行智能计算，标签可能重叠，这使得图形变得丑陋且不可读。

如果您遇到相同的任务并且能够解决它，请分享可以完成的库。

# java - 如何编写 Spring3 Validator 的不同实现？

> ID：14360413
> 
> 赞同：0
> 
> 时间：2013-01-16T14:16:00.233
> 
> 标签：java, spring, spring-mvc

我在 Spring 3 中有一个验证器

```
Class X implements Validator{
   public void validate(Object object, Errors errors) {

//Implementation 1
}
}

Class Y implements Validator{
   public void validate(Object object, Errors errors) {

//Implementation 2
}
} 
```

现在我想通过使用实现 1 在某些情况（可能是请求映射 1）的基础上验证我的模型，在其他情况下（请求映射 2）我想使用实现 2。

我如何在 Spring 3 中实现这一点

这是活页夹

```
@InitBinder
    protected void initBinder(WebDataBinder binder) {
        if (binder.getTarget() instanceof X) {
            binder.setValidator(new X());
        } 
    }

@RequestMapping("/Implementation1.html)
public String one(@Valid X x){
return "pg1";//I want 1st implementation of validator
}

@RequestMapping("/Implementation2.html)
public String one(@Valid X x){
return "pg2"; //I want 2nd implementation of validator
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:47:35.190

我已经完成了 spring mvc 的配置，它使用 @Valid 注释来验证 bean。你可以在那里寻求帮助。[https://github.com/andonescu/springmvc-freemarker/tree/spring-3.2v](https://github.com/andonescu/springmvc-freemarker/tree/spring-3.2v)

** 如果您正在配置 Spring MVC，`<mvc:annotation-driven/>`那么它将自动配置 JSR 303 验证器

*   首先，在我看来，您要验证的对象不需要实现 Validator 接口。这些类应该只在最简单的情况下实现**Serializable**。

*   然后，您可以注释要验证的该类中的字段 - 带有约束 -[此处的 jsr 303 示例使用的注释](https://github.com/andonescu/springmvc-freemarker/blob/spring-3.2v/src/main/java/ro/andonescu/demos/springmvcfreemarker/webforms/RegistrationForm.java)

*   第三，当你在控制器中使用类时，在方法中添加类作为参数后，应该是 `BindingResult bindingResult`，你可以使用该绑定结果来查找该对象是否有错误，[例如here](https://github.com/andonescu/springmvc-freemarker/blob/spring-3.2v/src/main/java/ro/andonescu/demos/springmvcfreemarker/controllers/RegistrationController.java)

    @RequestMapping("/Implementation1.html) public String one(@Valid X x, BindingResult bindingResult){ return "pg1";//我想要验证器的第一个实现 }

# ios - iOS 本地化：提取字符串

> ID：14360419
> 
> 赞同：0
> 
> 时间：2013-01-16T14:16:23.177
> 
> 标签：ios, string, localization, extract

我找到了这个工具`genstrings`，但它在线失败：`NSLocalizedString(key,comment);`

```
-(NSString*)toLocalizableString:(NSString*)key
               withComment:(NSString*)comment{
    NSString* stringResult = nil;
    if (key){
        stringResult = NSLocalizedString(key, comment);
    }
    NSLog(@"(*) key: <%@> (&) value: <%@> (*)",key,comment);
    return stringResult;
} 
```

此外，本地化步骤：

1.  找到所有字符串并用`NSLocalizedStringFromTable`
2.  提取字符串`genstrings`
3.  放置可本地化的文件并查找翻译
4.  做得好！

我在第一步卡住了。如何找到所有需要翻译的字符串？

还是我错了？

感谢您的解释！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:27:43.400

*这不完全是您要搜索的内容，但对我来说，翻译所有*字符串没有意义，例如，您可能不想`@""`从`NSPredicate`.

如果您将所有相关字符串移动到 NSLocalizableString / NSLocalizableStringFromTable，那么我可以推荐[Linguan](http://www.cocoanetics.com/apps/linguan/)。您只需传入您的 XCode 项目，就可以开始翻译了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:22:02.327

我使用[Ltools](https://github.com/percysnoodle/ltools)来帮助解决这个问题。这是一个两步过程：

1.  在您的代码中搜索`@"`，并将适当的字符串包装在`L()`
2.  在构建过程中运行 L.sh

这将确保每个需要翻译的字符串都有翻译。

# reporting-services - 一个系列的两个图例项目

> ID：14360425
> 
> 赞同：1
> 
> 时间：2013-01-16T14:16:45.923
> 
> 标签：reporting-services, ssrs-2008, bids

我有一个图表，我在一个系列中使用两种颜色：红色表示低于某个值的值，绿色表示高于某个值。

有没有办法在这个系列的图例中显示两个项目？到目前为止，我已经尝试`Iif`在图例的表达式中使用，但它只返回一个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:01:01.617

我刚刚为饼图做了这个，但没有颜色。您是否必须显示颜色，或者您可以设置自定义颜色数组并引用它？

在我的问题中，我必须列出发生百分比的“范围”。（有人希望计算范围内的事物而不是单个计数）。

我创建了一个数据集“DataforPie”：

```
Declare @temp table ( id int identity, name varchar(8), perc decimal(2,1)) 

insert into @temp values ( 'Brett', .9),( 'Brett', .5),( 'Brett', .4),( 'Brett', .3)
                        ,( 'John', .1), ( 'John', .3),( 'John', .4),( 'John', .2)
                        ,( 'Brian', .5), ( 'Brian', .6),( 'Brian', .5),( 'Brian', .3)

select *
from @temp 
```

然后，我设置了一个饼图，其中“值”为 [count(perc)]，“类别组”的“分组”和“标签”表达式定义为：

```
=Switch(

Fields!perc.Value >= 0.6, "Greater than 6",
Fields!perc.Value >= 0.3, "Greater than 3",
Fields!perc.Value >= 0, "Greater than 0"
) 
```

现在有了您的问题，因为您想要自定义颜色，我认为您可能希望定义一个调色板表达式来确定颜色。这里有一个很好的例子，即使它是以前的版本也应该是相似的：[http ://www.cubido.at/blogs/Lists/Posts/Post.aspx?ID=1256](http://www.cubido.at/blogs/Lists/Posts/Post.aspx?ID=1256)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:33:51.367

我建议您在数据集中添加 2 个计算字段，一个用于下方，一个用于上方。在这里，您可以使用 2 个`IIf`语句来分隔图表中的值。

或者，您应该能够将有问题的字段添加到图表中两次，并为上面和下面的每个字段添加一个上面的表达式。

在任何一种情况下，图例中都会有 2 个条目。

我希望我对你来说是正确的，但是我目前无法测试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-13T08:49:43.153

我遇到了类似的问题，我使用以下步骤解决了它：

1.  在系列组部分添加提到的值字段

2.  右键单击添加的系列组并选择系列组属性

3.  在标签字段中添加一个表达式，例如`=IIF(Fields!abc.Value<=10,"TenOrLess",...)`

4.  在填充部分选择渐变并在颜色中选择“无颜色”并在辅助颜色中设置表达式，例如`=IIF(Fields!abc.Value<=10,"Red",...)`

5.  单击系列并在其属性窗口中的 CustomAttributes 部分下将 DrawSideBySide 设置为 False

# regex - vim 缩写和正则表达式

> ID：14360427
> 
> 赞同：4
> 
> 时间：2013-01-16T14:16:47.020
> 
> 标签：regex, vim, abbreviation

在vim中，是否可以在缩写中使用正则表达式？例如，像

```
:iab \([0-9]\{-}\)nm \\SI{\1}{\\nano\\meter} 
```

会将“50nm”的每个实例扩展为“\SI{50}{\nano\meter}”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:02:11.557

最好的办法是为自己编写一个小辅助函数。利用全向补全或用户定义补全（`C-x C-u`参见`:help 'cfu'`）是一个不错的选择。我在一个键上绘制了一个常规函数来 imap：

```
function! ExpandNanometers()
    let items = matchlist(expand('<cword>'), '\v(\d+)nm')
    if len(items) == 0
        return 
    endif
    let modified = '\SI{' . items[1] . '}{\nano\meter}'
    exec "normal! ciw" . modified
endf
imap <C-l> <C-o>:call ExpandNanometers()<CR> 
```

也许不是最好的代码。绑定到 insert-mode `C-l`，如果光标在单词上或直接在它之后，它将替换诸如`50nm`所需的单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-05T00:28:15.813

我想将此作为对先前答案的评论添加，但显然我不能直到 50 代表。我也知道这太晚了，但仅供参考：

如果键映射是可以接受的（按照上一个答案），肯定是这样的

```
imap <silent> <leader>obscure-key-of-choice <Esc>:%s/\v(\d+)nm/\\SI{\1}{\\nano\\meter}/g<CR>``i 
```

（即具有所需模式的整个文件的全局替代）会更容易维护吗？为了 .vimrc 的可读性/维护，我喜欢避免使用 vimscript！显然你用`obscure-key-of-choice`你选择的晦涩的钥匙代替。无论如何，您只需在键入所有文本后执行一次，因此最好保存其他键以进行更常规的有用绑定！

快捷方式取代了类似的东西

```
50nm blabla 73nm your-interesting-science-here 89nm
... some new lines...
we love nanometers nm! 34nm and finally 18nm 
```

有类似的东西

```
\SI{50}{\nano\meter} blabla \SI{73}{\nano\meter} your-interesting-science-here \SI{89}{\nano\meter}
... some new lines...
we love nanometers nm! \SI{34}{\nano\meter} and finally \SI{18}{\nano\meter} 
```

# jquery - jquery没有通过css幻灯片循环

> ID：14360431
> 
> 赞同：1
> 
> 时间：2013-01-16T14:16:59.253
> 
> 标签：jquery, css, internet-explorer, slideshow

我一直在使用（并稍加修改）来自 css-tricks.coma 的幻灯片。

当我使用下面的 jquery 代码时，它工作得很好（除了 IE，它只是将图像堆叠在一起，而不是循环通过）：

```
setTimeout(function(){ 
$(document).ready(function() {
$("#slideshow1 > div:gt(0)").hide();
                setInterval(function() { 
                $('#slideshow1 > div:first')
                    .fadeOut(500)
                    .next()
                    .fadeIn(500)
                    .end()
                    .appendTo('#slideshow1');
                },  750);
        });}, 750); 
```

有人建议（作为 IE 修复）将 .appendTo 行（上面脚本中的倒数第三行）从 .appendTo('#slideshow1') 更改为 .appendTo('#slideshow1 > div:first')

这允许 IE 循环播放幻灯片，但只能循环一次。此外，幻灯片现在也只在 Safari、Chrome 和 Firefox 上循环一次，而在原始版本中它可以正确循环。

这里有几个jsfiddles：

工作版：http: [//jsfiddle.net/Zcx62/10/](http://jsfiddle.net/Zcx62/10/) 非工作版：http: [//jsfiddle.net/Zcx62/20/](http://jsfiddle.net/Zcx62/20/)

```
#slideshow1 {
    margin:0 auto; 
    position: relative; 
    width: 60px; 
    height: 60px;   
    border: 5px solid #CBCED1}

#slideshow1 > div {
    position: absolute}

<div id="slideshow1">
    <div><img src="Image URL in fiddle"></div>
    <div><img src="Image URL in fiddle"></div>
</div> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:25:33.250

代替

```
.appendTo('#slideshow1 > div:first'); 
```

用这个：

```
.insertAfter('#slideshow1 > div:last'); 
```

[http://jsfiddle.net/mblase75/Zcx62/23/](http://jsfiddle.net/mblase75/Zcx62/23/)

尽管您也可以通过使用原始代码并添加以下 CSS 来解决您的 IE 问题：

```
#slideshow1 > div:first-child {
  z-index: 2;
} 
```

[http://jsfiddle.net/mblase75/Zcx62/24/](http://jsfiddle.net/mblase75/Zcx62/24/)

# javascript - 窗口变量的替换

> ID：14360435
> 
> 赞同：0
> 
> 时间：2013-01-16T14:17:23.090
> 
> 标签：javascript, popup, window, window.open

在 JavaScript 代码中有代码

```
newlyCreatedWindow = window.open(url, stageName, strWindowFeatures); 
```

即使禁用了弹出窗口阻止，这也会失败并返回 NULL。

是否可以将 newCreatedWindow 设置为当前窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:21:54.183

为什么不？我猜你想做一个“后备”

```
if (!newlyCreatedWindow)
     newlyCreatedWindow = window; 
```

（如果这不是您正在考虑的，您应该指定您的问题）

# ruby-on-rails - Rails 3 迁移以添加 unsigned int 列

> ID：14360436
> 
> 赞同：10
> 
> 时间：2013-01-16T14:17:27.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-migrations

我想生成迁移以将列添加到数据类型为 unsigned int 的表中。我希望使用它来存储[本文](https://blogs.law.harvard.edu/zeroday/2009/04/04/storing-ip-addresses-in-mysql-with-rubyrails/)中提到的 IP 地址。

我遇到了[这个问题](https://stackoverflow.com/questions/4156772/unsigned-int-field-in-a-ruby-on-rails-migration)，但它会使迁移数据库依赖，知道如何以更好的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-14T21:09:23.240

此处显示了一个可行的解决方案，可让您在 Rails 迁移中更本机地执行此操作：[Ruby on Rails 迁移中的 unsigned int 字段？](https://stackoverflow.com/questions/4156772/unsigned-int-field-in-a-ruby-on-rails-migration)

为了长寿，答案是在您的选项中为无类型列添加自定义规范：

```
t.column :population, 'integer unsigned' 
```

我相信使用“无符号整数”是合理的独立于数据库的，但可能不是 100%。如果您愿意将自己锁定在特定的数据库中，您也可以使用类似“BIGINT unsigned”的东西。

此外，我对 Geoff 的回答有点失望，因为它似乎完全忽略了这样一个事实，即使用相同数量的存储空间的无符号整数拥有不同的数据集。如果您知道您将不需要负数并且有兴趣优化您的数据存储需求，那么无符号整数是有价值的。要查看 mysql 的指南，请参阅： [http ://dev.mysql.com/doc/refman/5.5/en/integer-types.html](http://dev.mysql.com/doc/refman/5.5/en/integer-types.html)

重要的是要在下面调用 JellicleCat 的注释，即模式文件不会跟踪此更改，因此当模式加载时，列的签名方面将丢失。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-23T09:01:45.400

*第1步：*

将 activerecord-mysql-unsigned 添加到 GemFile

```
# add unsigned integer support to mysql2 adapter
gem "activerecord-mysql-unsigned", "~> 0.0.1" 
```

*第二步：* 安装宝石

```
bundle install 
```

*第 3 步：*

在您喜欢的字段中使用“unsigned: true”

```
t.integer :cost, unsigned: true 
```

参考：[http ://rubydoc.info/gems/activerecord-mysql-unsigned/0.0.1/frames](http://rubydoc.info/gems/activerecord-mysql-unsigned/0.0.1/frames)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T15:47:24.343

您可以通过执行 SQL 查询来做到这一点，

***如果是 MySQL 查询将是***

**添加新列**

```
ALTER TABLE table_name ADD column_name INT unsigned; 
```

**删除列**

```
ALTER TABLE table_name DROP column_name; 
```

**和迁移：**

```
class MyMigration < ActiveRecord::Migration
  def self.up
    execute "ALTER TABLE table_name ADD column_name INT unsigned;"
  end

  def self.down
     execute "ALTER TABLE table_name DROP column_name;"
  end
end 
```

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2013-01-16T14:42:56.857

对不起。Unsigned 不是受支持的 Rails 数据类型之一。

请参阅以下指南的第 1.4 节。

[http://guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

我不确定你为什么认为你需要未签名。整数和无符号都采用相同数量的位，有符号只是表示您希望将其中一个位解释为有符号位的约定。如果您在有符号位打开的位置分配一个值，数据库会认为它是一个负数，但您会知道得更好，并且您可以对自己微笑，意识到您仍然比机器更聪明。

我希望这会有所帮助。

# android - 孩子已经显示了父母错误？

> ID：14360438
> 
> 赞同：-3
> 
> 时间：2013-01-16T14:17:32.093
> 
> 标签：android, imageview

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.myfragment, container,false);
    ImageView tv = (ImageView ) v.findViewById(R.id.imageView);
    tv.setImageResource(R.drawable.h1);
    return tv;
} 
```

为什么我会收到运行时错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:26:26.223

将上面的代码更改如下：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.myfragment, container,false);
    ImageView tv = (ImageView ) v.findViewById(R.id.imageView);
    tv.setImageResource(R.drawable.h1);
    return v;
} 
```

你得到 RuntimeError 的原因是你正在返回`ImageView`(tv) ，`onCreateView`它是 view for `Fragment`。但是`ImageView`是`myfragment`布局的子视图，因此无法设置它`View`，`Fragment`因此您会遇到运行时错误。

# html - Fancy Box 出现在 CSS 菜单下

> ID：14360441
> 
> 赞同：0
> 
> 时间：2013-01-16T14:17:37.930
> 
> 标签：html, css, responsive-design, z-index

听; 我已阅读并阅读，但找不到适合我的问题的答案。

我在我的网站[http://www.houdi.se/video.shtml](http://www.houdi.se/video.shtml)上使用 Fancy Box，但是当单击视频链接（其响应式）时，Fancy Box 出现在菜单下的问题。在浏览器中查看没有问题，因为它已填满。但是当缩小浏览器时，菜单问题就出现了。还可以在 iPad 上观看热门视频。

我正在为网站使用 ProjectSeven 的 Adaption-plugin。这是一个响应式 CSS 布局：[http ://projectseven.com/products/templates/pagepacks/adaptations/index.htm](http://projectseven.com/products/templates/pagepacks/adaptations/index.htm)

该插件还使用 Project Seven 的 Pop Menu Magic 2 作为菜单。

我不是代码向导，但我尝试增加 z-index 但它没有用，或者我没有增加裂痕？

现在已经花了几个小时来解决这个问题，并且很高兴我能得到所有帮助。告诉我你想看（或必须看）什么代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:50:22.787

从此包含菜单的 div 中删除 z-index：

`<div id="p7PMM_1" class="p7PMMh19" style="position: relative; z-index: 999999;">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:09:21.413

我不是专家，但查看导航栏的 css 文件时，您没有任何 z-index，因此您可以尝试添加它。

你花哨的盒子 css 文件有几个，最低的是 z-index: 8010; 因此将您导航到下方应该可以解决它。

尝试使用此代码：

```
 .navigation {
    background-color: #000000;
    background-image: url(images/chameleon.jpg);
    background-repeat: no-repeat;
    background-position: 0px -60px;
    position: relative;
    z-index: 90;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:55:09.557

菜单位于 fancybox 顶部的原因是您在页面上包含脚本 7PMMscrips.js，该脚本操作主菜单的 z-index 和 position 属性。

解决此问题的一种简单方法是将以下 css 添加到您的主 css 文件中：

```
#p7PMM_1 {
    position: static !important.
} 
```

这可以解决问题，但我不建议这样做，因为使用 !important 是一种非常糟糕的做法。您可以在此处阅读有关原因的更多信息：[在 CSS 中使用“！important”的含义是什么？](https://stackoverflow.com/questions/3706819/what-are-the-implications-of-using-important-in-css).

如果我在哪里，我会考虑删除此脚本并仅使用纯 css 创建主导航。

# iphone - iPhone 4 和 3GS FPS 下降

> ID：14360445
> 
> 赞同：2
> 
> 时间：2013-01-16T14:17:44.837
> 
> 标签：iphone, ios, cocos2d-iphone, particles, particle-system

我在使用粒子时遇到了 fps 问题。在游戏中，我有使用粒子的硬币。
我已经在 iPhone 3gs、4、4s、5 和 iPad 3 上测试了我的应用程序。在 3GS 和 iPhone 4 上，FPS 下降到 30-35。但是当我停止使用粒子时，FPS 下降到 50-60。
我也使用了 CCParticleBatchNode 但没有帮助 :( 我与 batchNode 一起使用的代码：

```
CCParticleBatchNode *batchNodeParticle = [CCParticleBatchNode batchNodeWithFile:@"image.png"];
CCParticleSystemQuad *particles = [CCParticleSystemQuad particleWithFile:@"particles.plist"];
[batchNodeParticle addChild:particles];
[self addChild:batchNodeParticle]; 
```

有什么建议么？
感谢和抱歉英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:30:25.817

粒子效果是非常容易使用的性能杀手。这里有一些建议：

*   减少粒子数。通常，人们很想从太多的粒子开始。任何高于 100 的值都会让您感到不安，任何高于 250 的值都会引起轻微的惊恐发作。
*   同时运行的多个粒子效果会增加粒子的数量。100 个粒子的 10 个粒子效果在性能方面与 1000 个粒子的单个粒子效果一样糟糕。
*   不要使用过大的纹理。大多数粒子在 64x64 纹理甚至更小的情况下看起来都很好。
*   没有真正需要提供粒子效果的 -hd 版本。粒子在 Retina 设备上按比例放大，并自动看起来相同。使用 -hd 粒子的唯一好处是使用更高分辨率的纹理，这在 99% 的情况下不会在 Retina 设备上产生任何视觉差异。这是因为大多数粒子效果一开始就有些模糊。
*   仅当您将多个粒子效果（使用相同的纹理）添加到同一个粒子批处理节点时，粒子批处理才能提高性能。

# jquery - jquery移动滚动事件延迟加载内容

> ID：14360446
> 
> 赞同：2
> 
> 时间：2013-01-16T14:17:48.007
> 
> 标签：jquery, cordova, jquery-mobile

是否有推荐的方法来处理 jquery 移动应用程序中的延迟加载/无限滚动内容，我该如何在单个“页面”上做到这一点？

我应该在页面的 pageshow 上定义滚动事件函数吗？类似于以下内容？

```
$( document ).delegate("#a_jquery_page", "pageshow", function() {

    $(window).scroll(function(){
        //check scroll position and load content  
    });
}); 
```

或者我应该使用 setInterval 函数每隔一秒或半秒检查一次滚动位置还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:22:42.030

每次滚动窗口时都会调用 .scroll 事件，您只需在此函数中检查窗口位置。没有理由使用区间函数。

```
$(window).scroll(function () { 
    var height = $(window).height();
    var scrollTop = $(window).scrollTop();

    if (scrollTop == ....) { <code> }
} 
```

# c - 函数指针，如何转换？

> ID：14360451
> 
> 赞同：0
> 
> 时间：2013-01-16T14:17:52.250
> 
> 标签：c, casting, function-pointers

我写了一个函数来测试函数。我想要灵活，这就是函数指针的原因。

我的代码正在运行，但是否有可能避免以下警告？我想到了演员表。

所以我尝试`(UINT32 *)`在 前面设置 a `&tickGet`，但它不起作用。

你能帮助我吗？

```
ULONG tickGet (void);

void WCET_Measurement(UINT32 (*Function)(void)){}

WCET_Measurement(&tickGet); 
```

编译器警告

```
warning: passing arg 1 of `WCET_Measurement' from incompatible pointer type 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:21:41.217

转换函数指针是明确定义的。但是，通过不兼容的指针调用函数是**未定义的行为**。因此，如果`UINT32`是与 a 不同的类型`ULONG`，那么事情就会出错。

但如果你真的想投，那么你可以这样做：

```
WCET_Measurement((UINT32 (*)(void))&tickGet); 
```

或者更好的是，使用`typedef`：

```
typedef UINT32 (*MyFunc)(void);

WCET_Measurement((MyFunc)&tickGet); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:22:18.563

你的施法尝试是错误的。

你需要：

```
WCET_Measurement(((UINT32)(*)(void)) tickGet); 
```

使用带有函数指针的 a 通常很好`typedef`，可以使它们更清晰。

当然，如果这两种类型在您的系统`UINT32`上`ULONG`不同，这将非常糟糕。

# android - 向活动添加 2 个滑动菜单

> ID：14360455
> 
> 赞同：0
> 
> 时间：2013-01-16T14:18:13.783
> 
> 标签：android, android-activity, menu, fragment, sliding

我有一个活动，使用滑动菜单库，我尝试创建 2 个滑动菜单。这是我试过的代码：

```
 FragmentTransaction t = this.getSupportFragmentManager().beginTransaction();
    menu = new SlidingMenu(this);
    menu.setMode(SlidingMenu.RIGHT);
    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_NONE);
    menu.setShadowWidthRes(R.dimen.shadow_width);
    menu.setShadowDrawable(R.drawable.shadow);
    menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    menu.setFadeDegree(0.35f);
    menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
    menu.setMenu(R.layout.tutorial_layout);
    rightSlide = new HelpFragment();
    t.replace(R.id.slidingList2, rightSlide);
    t.commit();
    menu.setSecondaryMenu(R.layout.log_history);
    leftSlide = new LogHistory();
    t.replace(R.id.loghistorycon, leftSlide);
    t.commit(); 
```

现在我收到 ANR 错误，Logcat 说 FragmentTransaction t 已经提交。我查看了来自：github.com/jfeinstein10/SlidingMenu 的示例，它允许他执行 2 次提交：

```
 setContentView(R.layout.content_frame);
    getSupportFragmentManager()
    .beginTransaction()
    .replace(R.id.content_frame, new SampleListFragment())
    .commit();

    getSlidingMenu().setSecondaryMenu(R.layout.menu_frame_two);
    getSlidingMenu().setSecondaryShadowDrawable(R.drawable.shadowright);
    getSupportFragmentManager()
    .beginTransaction()
    .replace(R.id.menu_frame_two, new SampleListFragment())
    .commit(); 
```

我究竟做错了什么？我只是看不出区别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T09:25:14.637

@LLL 以下代码对我来说正常工作。我希望，它可以帮助你更多......

```
 SlidingMenu slidingMenu  = getSlidingMenu();slidingMenu.setMode(SlidingMenu.LEFT_RIGHT);
    slidingMenu.setShadowWidthRes(R.dimen.shadow_width);
    slidingMenu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    slidingMenu.setFadeDegree(0.35f);
    slidingMenu.setTouchModeAbove(SlidingMenu.TOUCHMODE_NONE);
    slidingMenu.setMenu(R.layout.profile);
    slidingMenu.setSecondaryMenu(R.layout.nextactivity);
    Button csButton=(Button)findViewById(R.id.txtx);
    inside csButton onclick listener just need to call slidingMenu.showSecondaryMenu();
    and, Button csButton1=(Button)findViewById(R.id.button1);
    inside csButton1 onclick listener just need to call slidingMenu.showMenu(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:22:51.687

将上面的代码更改如下

```
 FragmentTransaction t = this.getSupportFragmentManager().beginTransaction();
    menu = new SlidingMenu(this);
    menu.setMode(SlidingMenu.RIGHT);
    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_NONE);
    menu.setShadowWidthRes(R.dimen.shadow_width);
    menu.setShadowDrawable(R.drawable.shadow);
    menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    menu.setFadeDegree(0.35f);
    menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
    menu.setMenu(R.layout.tutorial_layout);
    rightSlide = new HelpFragment();
    t.replace(R.id.slidingList2, rightSlide);
    t.commit();
    t = this.getSupportFragmentManager().beginTransaction();
    menu.setSecondaryMenu(R.layout.log_history);
    leftSlide = new LogHistory();
    t.replace(R.id.loghistorycon, leftSlide);
    t.commit(); 
```

对于 a `FragmentTransaction`，您只能有一个提交。在您的代码中，您创建了一个`FragmentTransaction`对象并为`rightSlide`. 所以 t 不再可用于交易。所以你已经创建了另一个`FragmentTransaction`，就像我在上面的代码中所做的那样。我希望这对你有用。

# c++ - 无法将 boost 库连接到我的项目“符号查找错误”

> ID：14360464
> 
> 赞同：4
> 
> 时间：2013-01-16T14:18:33.187
> 
> 标签：c++, boost, linker, java-native-interface, undefined-symbol

我有以下情况：

我创建了动态库 lib.so。该库使用另一个静态库 lib.a。它们都使用 Boost 库（我将它们链接到 CMake 文件中）。（我在Java项目中使用这个动态库）

这是 lib.so 中 file.cpp 的代码，它从 lib.a 调用 getFilesFromDirectory()

```
#include "DrawingDetector.h"
#include "../../DrawingDetection.h"
#include <vector>

#include <boost/filesystem/operations.hpp>

using namespace std;

JNIEXPORT void JNICALL Java_DrawingDetector_detectImage( JNIEnv * env, jobject, jstring jMsg)
{
    const char* msg = env->GetStringUTFChars(jMsg,0);
    vector<File> filesPic = getFilesFromDirectory(msg,0);
    env->ReleaseStringUTFChars(jMsg, msg);
} 
```

这是来自 lib.a 的 getFilesFromDirectory() 代码：

```
#include <string.h>
#include <iostream>

#include <boost/filesystem/operations.hpp>

#include "DrawingDetection.h"

using namespace std;

using namespace boost;
using namespace boost::filesystem;

vector<File> getFilesFromDirectory(string dir, int status)
{
    vector<File> files;
    path directoty = path(dir);
    directory_iterator end;
    if (!exists(directoty))
    {
        cout<<"There is no such directory or file!"<<endl;
}
for (directory_iterator itr(directoty); itr != end; ++itr)
{
     if ( is_regular_file((*itr).path()))
     {
    //some code
     }
}
return files;
 } 
```

但是当我的项目调用 lib.so 库时，它会引发以下消息：

```
 java: symbol lookup error: /home/orlova/workspace/kmsearch/Images/branches/DrawingDetection/jni/bin/lib.so: undefined symbol:_ZN5boost11filesystem34path21wchar_t_codecvt_facetEv 
```

当我发现它在 lib.a 中崩溃时，它试图调用 boost 方法“路径”。但是我声明了所有的 boost 头文件，并将它们链接到 CMake 文件中。你能解释一下，为什么它不能识别提升方法？

**编辑**：

我的编译器 gcc 4.6 的版本。如果我使用 4.5 一切都很好！

此外，如果我直接在 lib.so 中的 file.cpp 中使用一些 boost 方法，一切正常，例如：

```
 JNIEXPORT void JNICALL Java_DrawingDetector_detectImage( JNIEnv * env, jobject, jstring jMsg)
 {
    const char* msg = env->GetStringUTFChars(jMsg,0);
    path directoty = path("/home/orlova");//if I use boost method here
    vector<File> filesPic = getFilesFromDirectory(msg,0);// then everything works fine 
    env->ReleaseStringUTFChars(jMsg, msg);
 } 
```

***但***

```
JNIEXPORT void JNICALL Java_DrawingDetector_detectImage( JNIEnv * env, jobject, jstring jMsg)
{
   const char* msg = env->GetStringUTFChars(jMsg,0);
   //path directoty = path("/home/orlova");//if I don't use boost method here
   vector<File> filesPic = getFilesFromDirectory(msg,0);// then this method causes before-mentioned error!! 
   env->ReleaseStringUTFChars(jMsg, msg); 
```

}

你如何解释编译器的这种行为？

请注意，该错误发生在运行时。

***解决了***

问题在于 CMake 文件中 *target_link_libraries* 中的库的顺序。

错误的：

```
find_library( LIBRARY_MAIN 
        NAMES lib.a
        PATHS ../bin
          )

set ( LIB_JNI     
      jpeg
      ${OpenCV_LIBS}
      ${BOOST_LIB}
      ${LIBRARY_MAIN}//static library is the last in the list of libraries and after boost!
    )
target_link_libraries( ${PROJECT} ${LIB_JNI} ) 
```

对：

```
find_library( LIBRARY_MAIN 
        NAMES lib.a
        PATHS ../bin
          )

set ( LIB_JNI  
      ${LIBRARY_MAIN}
      jpeg
      ${OpenCV_LIBS}
      ${BOOST_LIB}//boost library is the last in the list and after static library!

    )
target_link_libraries( ${PROJECT} ${LIB_JNI} ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:40:16.340

您似乎是`Boost.Filesystem`动态链接的 - 如果是这样，您必须确保加载此库。您可以通过将其添加到`LOCAL_LDLIBS`line in来执行此操作，或者在加载Java 代码`Android.mk`之前手动预加载它。`lib.so`

或者，只需将 Boost（和其他所有内容）静态链接到`lib.so`并忘记所有这些动态混乱。:)

*UPDATE1*：关于您发布的更新——尝试将 boost_filesystem.a 作为链接器行中的*最后一个*对象。

# linux - x86 的 Linux 系统调用调用

> ID：14360465
> 
> 赞同：1
> 
> 时间：2013-01-16T14:18:33.917
> 
> 标签：linux, assembly, linux-kernel, system-calls, qemu

我试图了解在 Linux 机器上调用系统调用的方式。为此，我在 QEMU 模拟器上运行了一台带有[Linux 3.0.43 内核的客户机。](http://lxr.linux.no/#linux+v3.0.43/)

为了知道系统调用号，我在 qemu 中检测了中断函数（`do_interrupt_all()`在`target-i386/seg_helper.c`--- 不是很重要）。基本上每当我收到一个 int 0x80 中断时，我都会在 EAX 寄存器中打印该值。运行的输出给出了系统调用号。我希望首先对 init 进程进行 exec 系统调用。然后是一个 fork 和一些 `brk 系统调用。但是，我不确定这是否是我得到的。我在这里打印前 100 个系统调用号。我的客人是 64 位机器。[这](http://lxr.linux.no/#linux+v3.0.43/)是我的内核的在线代码探索。

```
 : 11
 : 45
 : 33
 : 192
 : 33
 : 5
 : 197
 : 192
 : 6
 : 33
 : 5
 : 3
 : 197
 : 192
 : 192
 : 192
 : 6
 : 192
 : 243
 : 125
 : 125
 : 125
 : 91
 : 122
 : 45
 : 45
 : 197
 : 5
 : 5
 : 5
 : 5
 : 221
 : 141
 : 141
 : 6
 : 5
 : 5
 : 5
 : 5
 : 5
 : 197
 : 192
 : 3
 : 3
 : 6
 : 91
 : 5
 : 197
 : 192
 : 3
 : 3
 : 6
 : 91
 : 5
 : 197
 : 192
 : 3
 : 3
 : 6
 : 91
 : 5
 : 197
 : 192
 : 3
 : 3
 : 6
 : 91
 : 5
 : 197
 : 192
 : 3
 : 3
 : 6
 : 91
 : 5
 : 197
 : 192
 : 3
 : 3
 : 6
 : 91
 : 5
 : 5
 : 197
 : 192
 : 3
 : 3
 : 6
 : 91
 : 5
 : 197
 : 192
 : 3
 : 3
 : 6
 : 91
 : 5
 : 197 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:27:53.357

是的，这就是你得到的（[Linux System Call Numbers](http://docs.cs.up.ac.za/programming/asm/derick_tut/syscalls.html)，[64-bit Linux System Call Numbers](http://www.acsu.buffalo.edu/~charngda/linux_syscalls_64bit.html)）：

*   11 : `sys_exevce`, or`exec`的系统调用
*   45 : `sys_brk`, malloc 下的东西
*   33：`sys_access`
*   192：`lgetxattr`

等等。

# php - 代码块的内存使用峰值？

> ID：14360469
> 
> 赞同：3
> 
> 时间：2013-01-16T14:18:41.637
> 
> 标签：php, memory, benchmarking

是否有可能在 PHP 中获得特定代码块的峰值内存使用量？该[`memory_get_peak_usage()`](http://php.net/manual/en/function.memory-get-peak-usage.php)函数似乎在整个过程执行中达到了峰值，直到函数调用为止，但这不是我想要获得的，因为其他代码块可能会扭曲该值。我试图隔离代码块本身，而不是整个过程。

例子：

```
// Block 1
for ($i = 0; $i < $iterations; ++$i) {
    // some code
}

// Block 2
for ($i = 0; $i < $iterations; ++$i) {
    // some different code
}

// Determine which of the two blocks used the most memory during their execution here 
```

不幸的是，xdebug 目前不是我的选择。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T22:07:46.560

I don't know a specific function that does this, but if you are just trying to isolate a block of code does something as simple as:

```
$before = memory_get_peak_usage();
for ($i = 0; $i < $iterations; ++$i) {
    // some code
}
$after = memory_get_peak_usage();
$used_memory = $after - $before; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-12T20:18:15.197

**编辑：XHProf 做到了，[在这里查看我的答案](https://stackoverflow.com/a/16682529/89771)。**

* * *

不要使用`memory_get_peak_usage()`：

```
$alpha = memory_get_usage();

for ($i = 0; $i < $iterations; ++$i) {
    // some code
}

$used_memory = memory_get_usage() - $alpha; 
```

请记住，这只会返回您需要的*最终*内存量。`// some code`中间内存消耗（例如设置/销毁东西或调用函数）不会计算在内。

您可以使用自己的方式破解，`register_tick_function()`但它仍然不适用于函数调用。

# wpf - 再次启用滚动

> ID：14360476
> 
> 赞同：0
> 
> 时间：2013-01-16T14:19:27.217
> 
> 标签：wpf, wpf-controls

我的目标是在用户以只读模式进入 UI 时禁用控件（文本框、单选按钮、...）及其所有子项（例如 tabitem 的选项卡）。

唯一的例外是滚动条，即使它是只读的，也应该启用它。

这是通过在 SO 上找到的以下代码优雅地完成的。这样做可以让 IsEnabled 属性继承给它的所有子项，同时允许启用滚动条。

```
public class AlwaysEnabledTabControlTabItem : TabItem
{
    static AlwaysEnabledTabControlTabItem()
    {
            IsEnabledProperty.OverrideMetadata(
                                               typeof(AlwaysEnabledTabControlTabItem),
                                               new FrameworkPropertyMetadata(
                                                   null,
                                                   (o,
                                                    value) => true));
    }
} 
```

问题在于鼠标的滚轮（以及向上/向下翻页键）不再起作用。当您在选项卡上并且想要滚动时，没有任何反应。作为一个侧节点，如果您在窄滚动条上，鼠标滚轮就可以工作。

你将如何启用滚轮？

![在此处输入图像描述](../Images/f13912a32c9c1b357a1bdfbfe6662ed4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:40:31.630

我不完全确定，但我猜它不起作用，因为没有为非活动控件处理任何事件-> 在禁用的选项卡页上使用鼠标滚轮没有任何作用。如果您启用单个标签页，它可能会起作用，但不是它的控件。

否则，您可以尝试使用 WndProc 来捕获鼠标输入，如下所示：

[如何捕获控件上的所有鼠标事件？](https://stackoverflow.com/questions/3471839/how-can-i-trap-all-mouse-events-on-a-control)

（更多信息：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc.aspx)）

然后使用它来更改滚动位置（您可能需要在使用自动滚动时启用控件）：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.scrollablecontrol.autoscrollposition.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.scrollablecontrol.autoscrollposition.aspx)

应该有类似于拦截键盘输入的东西，但不幸的是我没有任何信息。

# ruby - 将查询字符串添加到机架重写响应

> ID：14360477
> 
> 赞同：2
> 
> 时间：2013-01-16T14:19:29.050
> 
> 标签：ruby, url-rewriting, rack-rewrite

我有一个简单的 301 重定向来捕获我为我的网站注册的所有非 .com 域，如下所示：

```
DOMAIN = 'www.mywebsite.com'

use Rack::Rewrite do
  r301 %r{.*}, "http://#{DOMAIN}$&", :if => Proc.new {|rack_env|
    rack_env['SERVER_NAME'] != DOMAIN && ENV["RACK_ENV"] == 'production'
  }
end 
```

我想在响应中添加一个查询字符串，以格式添加原始域

```
?utm_source=#{rack_env['SERVER_NAME']} 
```

但不能完全弄清楚如何不使服务器崩溃:) 可以完成并保留任何原始查询字符串吗？

不太可能有人会点击主域下的任何子页面，但是当我从重写中删除 $& 并用我的字符串替换它时，它会在日志中没有错误的情况下爆炸......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:35:07.990

我认为您的原始代码不起作用的原因是因为`rack_env`它在您的第二个参数中不可用，因为它是第三个的块参数。那有意义吗？

但是，您*可以*将 Proc 作为重定向的第二个参数传递，所以我认为这样的事情应该可以工作（部分测试:)

```
DOMAIN = 'www.mywebsite.com'

ORIGINAL_REQUEST = Proc.new do |match, rack_env|
  "#{DOMAIN}?utm_source=#{rack_env['REQUEST_URI']}"
end

use Rack::Rewrite do
  r301 %r{.*}, ORIGINAL_REQUEST, :if => Proc.new {|rack_env|
    rack_env['SERVER_NAME'] != DOMAIN && ENV["RACK_ENV"] == 'production'
  }
end 
```

# c# - c#中windows Ce 6.0上usb的序列号

> ID：14360478
> 
> 赞同：0
> 
> 时间：2013-01-16T14:19:29.707
> 
> 标签：c#, windows-ce, usbserial

我需要获取连接到 Windows ce 6.0 设备的 USB 记忆棒的序列号。我试过了`KernelIoControl`，我得到了window ce 6.0设备的序列号，但没有连接到它的usb。

```
 private static string GetDeviceID()
    {
        // Initialize the output buffer to the size of a  
        // Win32 DEVICE_ID structure. 
        byte[] outbuff = new byte[20];
        Int32 dwOutBytes;
        bool done = false;

        Int32 nBuffSize = outbuff.Length;

        // Set DEVICEID.dwSize to size of buffer.  Some platforms look at 
        // this field rather than the nOutBufSize param of KernelIoControl 
        // when determining if the buffer is large enough.
        BitConverter.GetBytes(nBuffSize).CopyTo(outbuff, 0);
        dwOutBytes = 0;

        // Loop until the device ID is retrieved or an error occurs. 
        while (!done)
        {
            if (KernelIoControl(IOCTL_HAL_GET_DEVICEID, IntPtr.Zero,
                0, outbuff, nBuffSize, ref dwOutBytes))
            {
                done = true;
            }
            else
            {
                int error = Marshal.GetLastWin32Error();
                switch (error)
                {
                    case ERROR_NOT_SUPPORTED:
                        throw new NotSupportedException(
                            "IOCTL_HAL_GET_DEVICEID is not supported on this device",
                            new Win32Exception(error));

                    case ERROR_INSUFFICIENT_BUFFER:

                        // The buffer is not big enough for the data.  The 
                        // required size is in the first 4 bytes of the output 
                        // buffer (DEVICE_ID.dwSize).
                        nBuffSize = BitConverter.ToInt32(outbuff, 0);
                        outbuff = new byte[nBuffSize];

                        // Set DEVICEID.dwSize to size of buffer.  Some 
                        // platforms look at this field rather than the 
                        // nOutBufSize param of KernelIoControl when 
                        // determining if the buffer is large enough.
                        BitConverter.GetBytes(nBuffSize).CopyTo(outbuff, 0);
                        break;

                    default:
                        throw new Win32Exception(error, "Unexpected error");
                }
            }
        } 
```

当我将 USB 棒连接到 windows ce 6 设备时，它显示了一个新的硬盘识别，我需要进入这个新设备注册的属性，控制我的 windows ce 6 设备上可用的 USB 端口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:18:09.900

您可能正在寻找的是[USB_DEVICE_DESCRIPTOR](http://msdn.microsoft.com/en-us/library/windows/hardware/ff539280%28v=vs.85%29.aspx)。在大窗口中，您将使用 SetupDiGetDeviceProperty 来获取此信息，但在 CE 中，此值仅对驱动程序可用。我认为没有一种通用的方法可以从 CE 中的驱动程序中获取此信息。不过，您的驱动程序可能包含一个特殊的 IOCTL_ 来获取该信息。联系您的 OEM。

# sql-server - 批量插入 MAXERRORS

> ID：14360484
> 
> 赞同：2
> 
> 时间：2013-01-16T14:19:47.130
> 
> 标签：sql-server, bulkinsert, bulk-load

有什么方法可以使用 Bulk Insert 语句并禁用 MAXERRORS？

我想允许无限数量的错误，因为我批量插入的文件中的错误数量可能很高（我无法控制此文件，目前正在与供应商合作解决他们的问题在某些行上）。

如果没有办法禁用它，MAXERRORS 可以处理的最大数量是多少？是 2147483647 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:51:15.857

通常，当我从外部来源导入数据时，我非常警惕数据中的问题。SQL Server 提供了多种解决方案。许多人使用 SSIS。我避免使用 SSIS。原因之一是让它打开用户已经打开的 Excel 文件。它还有一些其他的缺点。

无论如何，一旦数据在文本文件中，我将创建一个临时表，其中包含原始表的所有列，数据类型为`varchar(8000)`. 这往往比必要的要大，但应该足够了。

然后，我创建一个包含适当列的表，并使用以下内容填充它：

```
insert into RealTable (CharColumn, IntColumn, FloatColumn, DateTimeColumn)
    select CharColumn,
           (case when isnumeric(IntColumn) = 1 and IntColumn not like '%.%' then cast(IntColumn as int end),
           (case when isnumeric(FloatColumn) = 1 then cast(FloatColumn as float) end),
           (case when isdate(DateColumn) = 1 then cast(DzteColumn as date)
    from StagingTable st 
```

也就是说，我在 SQL 代码中进行类型检查，使用`case`语句来避免错误。当类型不匹配时，结果为 NULL 值。然后我可以使用 StagingTable 调查数据库中的值以了解任何问题。

此外，在 RealTable 中，我总是有以下列：

*   RealTableId int 身份（1,1）
*   CreatedBy varchar(255) 默认系统用户，
*   CreatedAt datetime 默认 getdate()

这些提供有关通常有用的数据的跟踪信息。

# entity-framework-4 - 实体框架 (CF) - 使用复杂类型更新断开连接的实体

> ID：14360486
> 
> 赞同：2
> 
> 时间：2013-01-16T14:19:50.440
> 
> 标签：entity-framework-4, ef-code-first

我正在尝试在断开连接时更新一个实体（只是许多列中的一列），该实体具有与之关联的复杂类型，并且使用以下代码，EF 不断向我尖叫复杂类型的 Name 属性不能为空。以下代码不是正确的方法吗？

```
var entity = new Customer { Id = 5 };
entity.IsDeleted = true;
dbContext.Customers.Attach(entity);
dbContext.SaveChanges(); 
```

我也试过没有在构造函数中初始化复杂类型，但有类似的错误。

谢谢！

# java - 尽管应用程序在 Eclipse 中正常运行，但创建 jar 文件时出错

> ID：14360487
> 
> 赞同：0
> 
> 时间：2013-01-16T14:19:54.510
> 
> 标签：java, jar, executable-jar

我正在尝试用 Java 构建 AI 路径查找应用程序。它在 Eclipse 中正常工作，没有错误，但我在创建 jar 文件时收到编译警告，因此它没有运行。错误来自以下类源代码。请帮我！谢谢

![在此处输入图像描述](../Images/b6b6949178e01bcd78dd58720778a2f6.png)

```
package aStar;

import java.util.ArrayList;
import java.util.Collections; 
import  aStar.util.ClosestHeuristic;

/**
 * The class which uses AStar based algorithm to determine the path. 
 * @author Dorji Gyaltsen
 */
public class AStarPathFinder{

    /** The set of nodes which have been searched(ClosedNode) 
     * and yet to be searched(OpenNode) */
    private ArrayList closedNode = new ArrayList();
    private OpenList openNode = new OpenList();

    /** The instance of the map being searched */
    private Map map;

    /** The maximum searchDepth of search */
    private int maxSearchDistance;

    /** The total set of nodes in the map */
    private Node[][] nodes;

    /** allowance of diagonal movement */
    private boolean DiagonalMovement;

    /** The heuristic to determine which node to search first */
    private AStarHeuristic heuristic;

    /**
     * Constructor initialising all the variables
     */
    public AStarPathFinder(Map newMap, int newMaxSearchDistance, 
                           boolean newDiagonalMovement, ClosestHeuristic newheuristic) {
        map = newMap;
        maxSearchDistance = newMaxSearchDistance;
        DiagonalMovement = newDiagonalMovement;
        heuristic = newheuristic;

        /**Node definition and initialisation **/
        nodes = new Node[map.getWidth()][map.getHeight()];
        for (int x=0;x<nodes.length;x++) 
            for (int y=0;y<nodes.length;y++) 
                nodes[x][y] = new Node(x,y);
        }

    /**
     * The main method which find the path based on AStar algorithm **/
    public Path searchShortestPath(UnitMover mover, int sx, int sy, int dx, int dy) {

        //if the path is blocked
        if (map.pathBlocked(mover, dx, dy)){ 
            return null;
        }else {

        //if the path is not blocked
        nodes[sx][sy].pathCost = 0;
        nodes[sx][sy].searchDepth = 0;
        closedNode.clear();
        openNode.clear();
        openNode.add(nodes[sx][sy]);

        nodes[dx][dy].parent = null;

        // When the destination is not reached
        int maxSearchDepth = 0;
        while ((maxSearchDepth < maxSearchDistance) && (openNode.size() != 0)) {
            Node current = getFirstOfOpenNode();
            /**if current node is the destination node then stop**/
            if (current == nodes[dx][dy]) {
                break;
            }
            else {

                clearFromOpenNode(current);
                addToClosedNode(current);

                // search all curentNode neighbours considering as the next closest node
                for (int x=-1;x<2;x++) {
                    for (int y=-1;y<2;y++) {

                        // if it is the current node
                        if ((x == 0) && (y == 0)) {
                            continue;
                        }
                        else if (!DiagonalMovement){
                            if ((x != 0) && (y != 0)) 
                                continue;
                        }
                        else {
                            // determine the location of the neighbour and evaluate it
                            int xn = x + current.x;
                            int yn = y + current.y;

                            if (isValidLocation(mover,sx,sy,xn,yn)) {
                                float nextNodePathCost = current.pathCost + map.getPathCost(mover, current.x, current.y, xn, yn);
                                Node neighbour = nodes[xn][yn];
                                map.pathFinderVisited(xn, yn);

                                // if the new pathCost we've determined for this node is lower than 
                                // it has been previously makes sure the node hasn't been discarded.
                                if (nextNodePathCost < neighbour.pathCost) {
                                    if (inopenNode(neighbour)) 
                                        clearFromOpenNode(neighbour);
                                    else if (inclosedNode(neighbour)) 
                                        clearFromclosedNode(neighbour);

                                }

                                // if the node hasn't already been processed and discarded then
                                // reset it's pathCost to our current pathCost and add it as a next possible
                                if (!inopenNode(neighbour) && !(inclosedNode(neighbour))) {
                                    neighbour.pathCost = nextNodePathCost;
                                    neighbour.heuristic = heuristic.getPathCost(map, mover, xn, yn, dx, dy);
                                    maxSearchDepth = Math.max(maxSearchDepth, neighbour.setParentNode(current));
                                    addToopenNode(neighbour);
                                }
                            }
                        }
                    }
                }
            }
        }

        // since we've got an empty openNode openList or we've run out of search 
        // there was no path. Just return null
        if (nodes[dx][dy].parent == null) 
            return null;

        // At this point we've definitely found a path so we can uses the parent
        // references of the nodes to find out way from the destination location back
        // to the start recording the nodes on the way.
        Path path = new Path();
        Node destination = nodes[dx][dy];
            while (destination != nodes[sx][sy]) {
            path.prependStep(destination.x, destination.y);
            destination = destination.parent;
        }
        path.prependStep(sx,sy);

        // thats it, we have our path 
        return path;
        }
    }

    /**
     * Get the first element from the openNode openList. This is the next
     * one to be searched.
     * 
     * @return The first element in the openNode openList
     */
    protected Node getFirstOfOpenNode() {
        return (Node) openNode.first();
    }

    /**
     * Add a node to the openNode openList
     * 
     * @param node The node to be added to the openNode openList
     */
    protected void addToopenNode(Node node) {
        openNode.add(node);
    }

    /**
     * Check if a node is in the openNode openList
     * 
     * @param node The node to check for
     * @return True if the node given is in the openNode openList
     */
    protected boolean inopenNode(Node node) {
        return openNode.contains(node);
    }

    /**
     * clear a node from the openNode openList
     * 
     * @param node The node to clear from the openNode openList
     */
    protected void clearFromOpenNode(Node node) {
        openNode.clear();
    }

    /**
     * Add a node to the closedNode openList
     * 
     * @param node The node to add to the closedNode openList
     */
    protected void addToClosedNode(Node node) {
        closedNode.add(node);
    }

    /**
     * Check if the node supplied is in the closedNode openList
     * 
     * @param node The node to search for
     * @return True if the node specified is in the closedNode openList
     */
    protected boolean inclosedNode(Node node) {
        return closedNode.contains(node);
    }

    /**
     * clear a node from the closedNode openList
     * 
     * @param node The node to clear from the closedNode openList
     */
    protected void clearFromclosedNode(Node node) {
        closedNode.clear();
    }

    /**
     * Check if a given location is valid for the supplied mover
     * 
     * @param mover The mover that would hold a given location
     * @param sx The starting x coordinate
     * @param sy The starting y coordinate
     * @param x The x coordinate of the location to check
     * @param y The y coordinate of the location to check
     * @return True if the location is valid for the given mover
     */
    protected boolean isValidLocation(UnitMover mover, int sx, int sy, int x, int y) {
        if((x < 0) || (y < 0) || (x >= map.getWidth()) || (y >= map.getHeight())){
            return false;
        }
        else{

        if ((sx != x) || (sy != y))
            if(!map.pathBlocked(mover, x, y));
            return true;
        }
    }

    /**
     * A simple sorted openList
     * @author Dorji Gyaltsen
     */
    private class OpenList {
        /** The openList of elements */
        private ArrayList openList = new ArrayList();

        /**
         * @return The first element from the openList
         */
        public Object first() {
            return openList.get(0);
        }

        /**
         * Empty the openList
         */
        public void clear() {
            openList.clear();
        }

        /**
         * Adding an element to open ist and sorting
         */
        @SuppressWarnings("unchecked")
        public void add(Object o) {
            openList.add(o);
            Collections.sort(openList);
        }

        /** 
         * @return The total number of element in the openList
         */
        public int size() {
            return openList.size();
        }

        /**
         * @return True if the element is in the openList
         */
        public boolean contains(Object o) {
            return openList.contains(o);
        }
    }

    /**
     * A single node in the search graph
     */
    private class Node implements Comparable {
        /** The x and y coordinates of the node */
        private int x;
        private int y;

        /** The path pathCost for this node */
        private float pathCost;
        /** The parent of this node*/
        private Node parent;
        /** The heuristic pathCost of this node */
        private float heuristic;
        /** The search searchDepth of this node */
        private int searchDepth;

        /**
         * The creation of a new node
         * @param x and y The x and y coordinates of the node
         */
        public Node(int x1, int y1) {
            x = x1;
            y = y1;
        }

        /**
         * Set the parent for this node 
         * @param parent The parent node which lead to this node
         * @return The searchDepth for searching
         */
        public int setParentNode(Node parent) {
            searchDepth = parent.searchDepth + 1;
            this.parent = parent;

            return searchDepth;
        }

        /**
         * compareTo(Object)
         */
        public int compareTo(Object other) {
            Node o = (Node) other;

            float f = heuristic + pathCost;
            float of = o.heuristic + o.pathCost;

            if (f < of) return -1;
            else if (f > of) return 1;
            else  return 0;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:35:12.543

您的问题很可能来自您的 jar 文件不完整这一事实。根据您的评论，您似乎只将项目的一部分导出到 jar 文件中。您应该尝试使用[FatJar](http://fjep.sourceforge.net/) Eclipse 扩展来生成您的 jar 文件。该网站包含您需要的所有文档。

此外，您显示的类不包含任何`main`方法。您将需要在项目中的某个位置使用您的 jar 文件来运行您的应用程序。

# netty - RXTX 与 Netty-4.0.0-Beta1-SNAPSHOT

> ID：14360492
> 
> 赞同：0
> 
> 时间：2013-01-16T14:20:15.920
> 
> 标签：netty, rxtx

我很难弄清楚如何正确使用 RXTX 传输（从今天的 Git 开始）。

我能够编写入站处理程序，它使用从串行端口读取的内容，对其进行解码，并通过自定义出站处理程序将一些其他内容发送到串行端口。到目前为止还好。

现在，有一个用例，我需要通过 MessageToByteEncoder（我之前谈到的同一个自定义 outboundhandler）从主程序（最后，这实际上是一个在下面使用 Netty 的库）编写消息。所以基本上，我正在尝试与上述情况相同，只是我不通过解码器并发送要从主程序写入的消息，而不是入站处理程序。这种情况在我的情况下似乎不起作用：似乎什么都没有发生，就好像我的消息没有发送一样。不幸的是，Netty 中没有很多日志语句，我可能错了，但我遇到的问题可能会浮出水面，因为主线程不在事件循环中（这并不奇怪！:)）。

不幸的是，RXTX 示例仅从入站处理程序（通过 ChannelHandlerContext）写入消息，因此我无法找出我做错了什么，或者 Netty 中最近添加的内容是否存在错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:32:16.557

我遇到的问题实际上与两个不同的问题有关。

我为他们找到了一个解决方案（正如人们所预料的那样，问题出在 RXTX 传输本身）：

*   [https://github.com/netty/netty/pull/957](https://github.com/netty/netty/pull/957)
*   [https://github.com/netty/netty/pull/959](https://github.com/netty/netty/pull/959)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:57:12.537

您应该可以使用以下两种方式之一编写它：

```
Channel channel = ...
channel.write(YourMessage);

ChannelHandlerContext ctx = ...
ctx.write(YourMessage) 
```

# php - 我的 php 变量有问题

> ID：14360493
> 
> 赞同：2
> 
> 时间：2013-01-16T14:20:21.170
> 
> 标签：php

我不断收到以下内容的“未定义索引”：

```
$username = $_POST['username'];
$email = $_POST['email'];
$email1 = "@";
$email_check = strpos($email,$email1);
$pwd = $_POST['pwd'];
$pwd_conf = $_POST['pwd_conf'];
$uLength = strlen($username);
$pLength = strlen($pwd); 
```

我已经尝试过 if(isset()) 但错误只更改为“未定义变量”

```
if (isset($_POST['username'])) {
    $username = $_POST['username'];
}
if (isset($_POST['email'])) {
    $email = $_POST['email'];
}
$email1 = "@";
$email_check = strpos($email, $email1);
if (isset($_POST['pwd'])) {
    $pwd = $_POST['pwd'];
}
if (isset($_POST['pwd_conf'])) {
    $pwd_conf = $_POST['pwd_conf'];
}
$uLength = strlen($username);
$pLength = strlen($pwd); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:23:42.577

用这个

```
if(isset($_POST['username'])) {
    $username = $_POST['username'];
    $uLength = strlen($username);
}
if(isset($_POST['email'])) {
    $email = $_POST['email'];
    $email1 = "@";
    $email_check = strpos($email,$email1);
}

if(isset($_POST['pwd'])) {
    $pwd = $_POST['pwd'];
    $pLength = strlen($pwd);
}
if(isset($_POST['pwd_conf'])) {
    $pwd_conf = $_POST['pwd_conf'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:24:28.033

发生这种情况的原因是您的 $_POST 变量之一没有进入页面。

在您的第一次尝试中，您会得到未识别的索引，因为索引部分 ['xxxx'] 不存在。在第二个中，您的`if`语句正在工作，因此要么`$username`或`$email`永远不会设置。当您尝试执行`$email_check = strpos($email,$email1);`$email 不存在时（当您尝试使用`$username`or时可能会发生这种情况`$pwd`）并且您得到“未识别的变量”。

有几种方法可以解决这个问题，但我会先检查你的帖子数据，看看你的页面有什么。可能有多种方法可以做到这一点，包括我不知道的 php 中的一种，但我喜欢使用 wireshark 并检查正在发送的 post 数据包；然后从那里调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:15:45.020

很可能您正在使用 GET 方法调用您的代码，因此 $_POST 变量显然是空的。

您需要将所有处理程序代码放入此条件中

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
...
} 
```

虽然针对 isset() 检查单独的字段并没有太大意义

如果您仍然收到这些错误 - 请检查您的表格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T14:28:09.707

我的工作方式：

```
$errors = array();

if (!isset($_POST['username']))
    $errors[] = 'Please enter a username';

if (!isset($_POST['email']))
    $errors[] = 'Please enter an e-mailaddress';

if (!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL))
    $errors[] = 'Please enter a valid e-mailaddress';

if (!isset($_POST['pwd']))
    $errors[] = 'Please enter a password';

if (!isset($_POST['pwd_conf']))
    $errors[] = 'Please confirm your password';

if ($_POST['pwd'] != $_POST['pwd_conf'])
    $errors[] 'Passwords do not match';

if (count($errors) <= 0) {
    $username = $_POST['username'];
    $email = $_POST['email'];
    $pwd = $_POST['pwd'];
    $pwdConfirmation = $_POST['pwd_conf'];

    // Other logic
} else {
    foreach ($errors as $error)
        echo $error;
} 
```

# java - 我可以启用地址以在已部署的 JBoss 应用程序中进行调试吗？

> ID：14360497
> 
> 赞同：1
> 
> 时间：2013-01-16T14:20:33.687
> 
> 标签：java, debugging, jboss, jboss6.x, jvm-arguments

我正在一个`JBoss 6.1`环境中工作，默认选项不启用调试，每个人有时都会忘记在部署中添加该选项。我想知道是否`there is a way to enable the debug in an already deployed JBoss`......这将非常有帮助，取决于项目，重新启动应用程序可以持续 3 个小时！另外，我正在使用 Seam 3.0（我不知道这是否会有所帮助）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:02:50.220

这似乎是答案：[Debug a java application without started the JVM with debug arguments](https://stackoverflow.com/questions/376201/debug-a-java-application-without-starting-the-jvm-with-debug-arguments)。

没有任何特定于 JBoss 的解决方案。

# matlab - 提取大矩阵的一部分并使用循环函数将它们分配到新变量中

> ID：14360501
> 
> 赞同：4
> 
> 时间：2013-01-16T14:20:46.287
> 
> 标签：matlab, loops, matrix, extract

我是 MATLAB 的初学者，希望能在这里找到一些帮助。我在一个大矩阵中总共有 80 个人的一些模型预测结果。我需要从大矩阵中提取每个人的数据，将它们分配到一个新的变量/矩阵中，进行一些额外的计算，然后根据需要绘制某些信息。

为此，我正在尝试编写一个带有循环函数的脚本，但是以一种复杂的，或者更准确地说：以一种原始的方式！

简化示例：我的矩阵称为：All_Indi_Data .... 它的维度是：600 行 x 21 列

```
%Column 1: grouping variable (e.g., code or ID with values 1,2,3,4,5, etc.); 
%Column 2: independent var.;
%Column 3: t;
%Column 4: OBS;
%Column 5: PRED;

i= length (All_Indi_Data);

%% First Indi.
q=1;    % indicating the ID of the indi for which I want to extract the data
j=1;    % variable added to insure writing start from the first row

for r=1:i
if All_Indi_Data (r,1)==q
  Indi_1 (j,1:21) = All_Indi_Data (r,1:21)
  j=j+1
end

end

%% Second Indi.
q=q+1
j=1

for r=1:i
if All_Indi_Data (r,1)==q
   Indi_2 (j,1:21) = All_Indi_Data (r,1:21)
   j=j+1
end

end

.
.
. 
```

1）我的第一个问题是：我可以在有或没有循环函数的情况下以更简单的方式将这些数据分配到新变量（Indi_1、Indi_2 等）中吗？！！！非常感谢您的帮助。

2）是否有任何代码或任何方法可以从前面提到的大矩阵中绘制这些选定的部分（根据分组变量，例如 Indi_1 的数据）而不浪费大量时间和空间（wto 重新复制代码的核心部分）并再次）为脚本，并使用循环功能？！换句话说，我想检测 - 使用循环函数和分组变量 - 哪些值是感兴趣的，然后绘制它们（例如，第 3 列中的数据以及每个人的第 4 列中的数据，从第一个到最后一个）？！

我希望我清楚地描述了我的问题，并希望听到专家们的意见:) ...

非常感谢提前..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:36:42.227

试试下面的代码：

```
for idx=1:80
    pos=find(All_Indi_Data(:,1)==idx);
    eval(['Indi_' num2str(idx) '=All_Indi_Data(pos,:);']);
end 
```

我所做的是：在每次迭代中，我搜索 ID 的值，在变量 idx 中指示。请注意，我没有使用“i”作为变量的名称，因为 Matlab 使用它和“j”以及复数的虚数单位，这可能会导致问题。

然后，使用 find 搜索 All_Indi_Data 的位置（或多个位置），我可以在其中找到该个人的信息。现在我在变量“pos”中有感兴趣的个人信息的行的索引。

最后，使用 eval 我将每个人的数据提取到一个变量中。请注意， eval 与循环结合使用可以轻松创建大量变量。我用“pos”表示我想提取的行，因为我想要所有的列，所以我只使用“:”（你也可以使用“1:21”）。

使用另一个类似的循环，您可以绘制您想要的信息。例如：

```
for idx=1:80
        eval(['x=Indi_' num2str(idx) ';']); 
        % Now I have in X the information for this individual
        %Plot the columns of x I want
        plot(x(:, 3), x(:,4));
        pause; %stay here until a press a key

end 
```

# jenkins - Nuget 命令行更新正在尝试更改我的只读 csproj 文件

> ID：14360505
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:21:01.280
> 
> 标签：jenkins, project, nuget

我是 Nuget 的新手，对 Jenkins 来说相对较新。我正在尝试让 Jenkins 运行此命令“nuget update XXX.sln -Verbose -RepositoryPath packages -Source wwww.hatever/nuget/”来检查是否有对引用的 nuget 包的任何更新，如果有则更新该引用较新的版本。

我遇到的问题是 nuget 尝试将提示路径更新为我的 csproj 文件中的引用，但由于 csproj 文件已检入 TFS 并且是只读的，因此出错。我们在 Jenkins 中使用 TFS 来获取最新的更改，所以我必须将 csproj 文件保持为只读。

有没有办法让 nuget 通过 nuget update 命令更新我的引用，而无需更改我的 csproj 文件中的提示路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:13:55.193

您可以使用以下命令更新单个项目的 NuGet 包： nuget update $(projdir)\packages.config -RepositoryPath ..\Packages -Source xx

这只会更新包文件夹中的引用而不接触 csproj 文件。

# performance - 除了硬件，还有什么影响并发用户数方面的性能？

> ID：14360511
> 
> 赞同：1
> 
> 时间：2013-01-16T14:21:16.510
> 
> 标签：performance, appfog, blitz++

我正在开发一个 API，并且希望（当然）在并发用户数量方面优化性能。

根据这些测试，我使用 Blitz 运行了一些测试（我的应用程序在 Appfog、PHP、512MB、1 个实例上），我的 API 可以在响应时间变得太高（>1000 毫秒）之前处理 11 个并发用户。

对我来说，它是惊人的低。我可以添加更多 RAM 和实例来改善结果，但我怀疑我的代码可能更智能。

我做了一些测试，总是使用相同的硬件配置。结果是响应时间超过 1000 毫秒之前的并发用户数。

*   使用我的实际 API（带有 db-queries）--> 11 个用户
*   使用仅输出文本的脚本（最少处理）-> 40 个用户
*   使用带有 sleep(2) 函数的脚本来模拟较长的响应时间 --> 52 个用户（超过 (2000 + 1000 ms) 之前）
*   使用内存密集型脚本（使用 for 循环构建数据）：95 个用户

我真的看不出结果中有任何相关性（每个测试都运行了很多次，结果相似）。脚本的处理越多 - 并发用户越多？

是什么影响了并发用户的数量（除了硬件配置）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:26:38.277

一般来说，你应该考虑两个方面：

*   数据库或外部 API 等瓶颈。你和最慢的组件一样慢

*   寻找将您的并发代码转换为顺序代码的锁。参见：[阿姆达尔定律](http://en.wikipedia.org/wiki/Amdahl%27s_law)

第二点与第一点有关。数据库或您在代码中使用的任何内容可能是内部同步的，或者可能无法很好地处理并发。

# python - 从 url 解析 Python HTML

> ID：14360518
> 
> 赞同：-4
> 
> 时间：2013-01-16T14:21:27.540
> 
> 标签：python, html, parsing

我听说可以从链接中获取数据。但我想知道最好的方法，我已经读过，但我仍然想知道如何以及最好的模块是什么。我想解析这个：

```
<div class="blalbal"><h2>DATA5</h2>
<div class="blabla">
<table class="tabledata">
<tr><th>Blablabla:</th><td>DATA3<br>(DATA4)</td></tr>
<tr><th>Blablabla:</th><td>DATA2</td></tr>
<tr><th>Blablabla:</th><td>DATA1</td></tr>
</td> 
```

作为字符串，如 DATA1、DATA2、DATA3 (DATA4)、DATA5

所以，我想看看这怎么可能（只是一个例子）以及什么是最好和最快的方法。谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T14:25:59.273

来自 Python [HTMLParser 文档](http://docs.python.org/2/library/htmlparser.html)：

```
from HTMLParser import HTMLParser

# create a subclass and override the handler methods
class MyHTMLParser(HTMLParser):
    def handle_starttag(self, tag, attrs):
        print "Encountered a start tag:", tag
    def handle_endtag(self, tag):
        print "Encountered an end tag :", tag
    def handle_data(self, data):
        print "Encountered some data  :", data

# instantiate the parser and fed it some HTML
parser = MyHTMLParser()
parser.feed('<html><head><title>Test</title></head>'
            '<body><h1>Parse me!</h1></body></html>') 
```

在您的情况下，您可以只使用该`handle_data`功能来打印 HTML 内容。

# variables - 编写 PHP if Blank 语句

> ID：14360519
> 
> 赞同：0
> 
> 时间：2013-01-16T14:21:28.113
> 
> 标签：variables

我是 PHP 新手，所以这对大多数人来说听起来很基础，但我需要编写代码来处理变量什么都不返回（空白）。

我的变量是`$winner`，但有时没有获胜者，在这种情况下，它只是将页面留空，我想要它，所以如果没有获胜者，那么它将显示“没有获胜者”。

这是我的尝试：

```
if empty($winner) {
    echo "no winner";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T11:37:42.783

只需使用：

```
if (!$winner) { // will catch "", null
    echo "no winner"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:29:18.987

您可以创建一个函数来检查变量的值为 null 或为空...

```
function IsEmptyString($Season){
    return (!isset($Season) || trim($Season)==='');
} 
```

此功能可用于检查相同。

# javascript - 如何从 JavaScript 中的 URL 字符串中提取值？

> ID：14360527
> 
> 赞同：0
> 
> 时间：2013-01-16T14:21:53.760
> 
> 标签：javascript, string, greasemonkey, userscripts

我有一个这样的字符串：

```
http://x.com/xyz/2013/01/16/zz/040800.php 
```

我想从中得到两个字符串，如下所示：

```
2013-01-16 <-- string 1
04:08:00 <-- string 2 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:25:56.953

您可以使用正则表达式。这是一个示例解决方案：

```
var parts = (/.com\/[^\/]+\/(\d+)\/(\d+)\/(\d+)/g).exec('http://x.com/xyz/2013/01/16/zz/040800.php'),
    result = parts[1] + '-' + parts[2] + '-' + parts[3]; //"2013-01-16" 
```

如果您的域是`.com`并且您在日期之前只有一个额外的参数，这将起作用。

让我解释一下正则表达式：

```
 /          //starts the regular expression
 .com       //matches .com
   \/       //matches /
   [^\/]+   //matches anything except /
      \/    //matches a single /
      (\d+) //matches more digits (one or more)
      \/    //matches /
   (\d+)    //matches more digits (one or more)
  \/        //matches /
 (\d+)      //matches more digits (one or more)
/           //ends the regular expression 
```

以下是提取整个数据的方法：

```
var parts = (/.com\/[^\/]+\/(\d+)\/(\d+)\/(\d+)\/[^\/]+\/(\d+)/g).exec('http://x.com/xyz/2013/01/16/zz/040800.php'),
    part2 = parts[4];

parts[1] + '-' + parts[2] + '-' + parts[3]; //"2013-01-16"
part2[0] + part2[1] + ':' + part2[2] + part2[3] + ':' + part2[4] + part2[5]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:29:50.503

如果 url 始终具有相同的格式，请执行此操作

```
var string = 'http://x.com/xyz/2013/01/16/zz/040800.php';

var parts = string.split('/');

var string1 = parts[4] +'-' +parts[5] +"-" +parts[6];
var string2 = parts[8][0]+parts[8][1] +":" +parts[8][2]+parts[8][3] +":" +parts[8][4]+parts[8][5];

alert(string1);
alert(string2); 
```

[演示](http://jsfiddle.net/algorhythm/sZM4D/)

# bash - tail -f, awk 并输出到文件 >

> ID：14360531
> 
> 赞同：2
> 
> 时间：2013-01-16T14:22:02.133
> 
> 标签：bash, awk, sh, squid, tail

我正在尝试过滤日志文件并遇到问题，到目前为止我所拥有的是以下内容，它不起作用，

```
tail -f /var/log/squid/accesscustom.log | awk '/username/;/user-name/ {print $1; fflush("")}' | awk '!x[$0]++' > /var/log/squid/accesscustom-filtered.log 
```

目标是获取一个包含

```
ipaddress1 username
ipaddress7
ipaddress2 user-name
ipaddress1 username
ipaddress5
ipaddress3 username
ipaddress4 user-name 
```

并保存到 accesscustom-filtered.log

```
ipaddress1
ipaddress2
ipaddress3
ipaddress4 
```

它在没有输出到 accesscustom-filtered.log 的情况下工作，但 > 中的某些内容无法正常工作并且文件最终为空。

编辑：将原始示例更改为正确

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:27:56.590

使用`tee`：

```
tail -f /var/log/squid/accesscustom.log | awk '/username/;/user-name/ {print $1}' | tee /var/log/squid/accesscustom-filtered.log 
```

另请参阅：[将“tail -f”输出写入另一个文件](https://superuser.com/questions/59497/writing-tail-f-output-to-another-file)并[关闭管道中的缓冲](http://www.perkin.org.uk/posts/how-to-fix-stdio-buffering.html)

注意：`awk`不像`grep`超级用户示例中那样缓冲，因此您不需要对`awk`命令执行任何特殊操作。（[更多信息](http://www.perkin.org.uk/posts/how-to-fix-stdio-buffering.html)）

# php - 获取 cUrl 以抢先发送授权标头以在 PHP 中进行 DIGEST 身份验证

> ID：14360534
> 
> 赞同：0
> 
> 时间：2013-01-16T14:22:14.023
> 
> 标签：php, libcurl, curl-multi, http-digest

我们有一个 PHP 页面（实际上是一个 WordPress 插件），它通过 DIGEST 身份验证调用 REST API。curl 句柄是基于每个请求创建的，给定授权凭据并成功进行身份验证。

问题：

在后台，Curl 发送了两个请求。第一个以 401 和挑战失败，第二个包含 Authorization 标头并成功（200）

在随后的 API 调用中，cUrl 继续发送两个请求。这似乎效率低下，导致操作持续时间增加了 2 倍的网络延迟。

我们如何使 cURL “先发制人地验证”（[例如](http://hc.apache.org/httpclient-3.x/authentication.html#Preemptive_Authentication)）未来的请求？

Curl Multi 有这个功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:34:08.190

您必须重复使用相同的 curl 句柄：有关更多详细信息，请参阅[此类似问题](https://stackoverflow.com/questions/13759452/how-to-make-the-libcurl-send-digest-authentication-header-in-each-http-packet/13760549#13760549)。

就多接口而言，您还需要显式重用每个句柄以利用摘要访问身份验证请求计数器，即考虑到 C API：

1.  从多功能手柄上取下手柄`curl_multi_remove_handle`
2.  重置它`curl_easy_reset`
3.  设置下一次通话的选项
4.  将其重新添加到多手柄中`curl_multi_add_handle`

# php - PDO 对 json 的响应

> ID：14360537
> 
> 赞同：2
> 
> 时间：2013-01-16T14:22:20.833
> 
> 标签：php

我是 PHP 新手并试图制作一个非常简单的 api（我认为也是学习的好方法），为什么这不起作用？加载此页面时，输出为：***{"queryString":"SELECT id, Name FROM Food WHERE userID=1 ORDER BY Name"}***而不是我想要的 JSON 字符串

```
$dbh = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);

$response = $dbh->query("SELECT id, Name FROM Food WHERE userID=1 ORDER BY Name");

$responseJSON = json_encode($response);

header('Content-type: application/json');
echo "$responseJSON";

$dbh = null; 
```

查询没有任何问题，因为我在尝试此操作时得到了我想要的：

```
$dbh = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);

$response = $dbh->query("SELECT id, Name FROM Food WHERE userID=1 ORDER BY Name");

    foreach ($response as $row)
        {
            print $row['Name'] . ' ';
        }

$dbh = null; 
```

输出： *培根芝士片*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T14:25:56.213

$dbh->query 返回一个[PDOStatement](http://php.net/manual/en/class.pdostatement.php)对象，而不是行。要将行添加到 json，请在对象上调用[fetchAll 。](http://php.net/manual/en/pdostatement.fetchall.php)

```
$response = $dbh->query("SELECT id, Name FROM Food WHERE userID=1 ORDER BY Name")->fetchAll(); 
```

您还可以指定获取模式，例如

```
fetchAll(PDO::FETCH_ASSOC); 
```

# json - Jersey 客户端 API 为 PUT 请求 JSONObject 引发异常

> ID：14360538
> 
> 赞同：0
> 
> 时间：2013-01-16T14:22:20.827
> 
> 标签：json, api, rest, jersey, put

我在尝试 PUT JSONOBbject 时遇到以下异常，例如 inputData: { "key1":"value1", "key2":"value2" }

代码片段：

```
 WebResource webResource = client
               .resource(url);
     response = webResource.type(MediaType.APPLICATION_JSON_TYPE)
               .put(ClientResponse.class,inputData); 
```

例外：

```
 com.sun.jersey.api.client.ClientHandlerException: com.sun.jersey.api.client.ClientHandlerException: A message body writer for Java type, class org.json.JSONObject, and MIME media type, application/json, was not found
at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:149)
at com.sun.jersey.api.client.Client.handle(Client.java:648)
at com.sun.jersey.api.client.WebResource.handle(WebResource.java:670)
at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)
at com.sun.jersey.api.client.WebResource$Builder.put(WebResource.java:533)
at httptransaction.CommonHttpClient.doPutConnect(CommonHttpClient.java:222) 
```

任何解决方案的指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:38:38.373

您的类路径中需要 jersey-json JAR。

# apache - 机器人在 apache 访问日志中抛出 500 错误

> ID：14360539
> 
> 赞同：0
> 
> 时间：2013-01-16T14:22:25.260
> 
> 标签：apache, .htaccess, bots, robots.txt

在我的 Apache 错误日志中，我可以看到每天都会出现大量以下错误。

```
[Tue Jan 15 13:37:39 2013] [error] [client 66.249.78.53] Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

当我使用访问日志检查相应的 IP、日期和时间时，我可以看到以下内容

```
66.249.78.53 - - [15/Jan/2013:13:37:39 +0000] "GET /robots.txt HTTP/1.1" 500 821 "-" "Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)" 
```

我已经在 Google Webmster tool -> Health -> Blocked URLs 中测试了我的 robots.txt 文件，这很好。

此外，当机器人访问某些图像时，它会引发以下错误，

错误日志

```
[Tue Jan 15 12:14:16 2013] [error] [client 66.249.78.15] Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

已访问_URL

```
66.249.78.15 - - [15/Jan/2013:12:14:16 +0000] "GET /userfiles_generic_imagebank/1335441506.jpg?1 HTTP/1.1" 500 821 "-" "Googlebot-Image/1.0" 
```

实际上，上面的图片 URL（以及我们访问日志中的其他几张图片）在我们的网站上不可用（它们在我们于 2012 年 8 月进行的网站改造之前可用），当我们访问那些无效资源时，我们抛出了 404 错误。

但是，有时，机器人（甚至人类访问者）似乎会在我们的访问/错误日志中生成此类错误，仅针对静态资源（例如不存在的图像）和我们的 robots.txt 文件。服务器为他们抛出 500 错误，但实际上当我从浏览器尝试它时 - 图像是 404，robots.txt 是 200（成功）。

我们不确定为什么会发生这种情况，以及为什么一个有效的 robots.txt 和无效的图像会引发 500 错误。我们确实有一个 .htaccess 文件，并且我们确信我们的（Zend 框架）应用程序没有被访问，因为我们有一个单独的日志。因此，服务器本身（或.htaccess）“偶尔”抛出500错误，我无法想象为什么。可能是由于对服务器的请求太多，或者我该如何进一步调试？

请注意，我们只是在设计改造后才注意到这些错误，但 Web 服务器本身保持不变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:50:57.153

记录客户端正在访问的域可能很有用。您的服务器可能可以通过多个域访问，包括原始 IP 地址。当您进行测试时，您是通过主域进行的，并且一切都按预期工作。如果您尝试通过您的 IP (http://1.2.3.4/robots.txt) 与域 (http://example.com/robots.txt) 访问相同的文件怎么办？还有 example.com 与 www.example.com 或任何其他指向服务器的变体。

机器人有时可以在地址更改后很长时间保留 IP/域信息，并且可能会尝试访问几个月前规则已更改的内容。

# visual-studio - 我在 Azure 中运行 Visual Studio 探查器时找不到符号

> ID：14360543
> 
> 赞同：2
> 
> 时间：2013-01-16T14:22:45.710
> 
> 标签：visual-studio, azure, visual-studio-2012, profiling

我正在尝试使用 Windows Azure 中的 Visual Studio Profiler 来分析我的 Windows Azure 应用程序。我按照[http://msdn.microsoft.com/en-us/library/windowsazure/hh369930.aspx#BK_ProfilingCloudService](http://msdn.microsoft.com/en-us/library/windowsazure/hh369930.aspx#BK_ProfilingCloudService)上的说明进行操作，但是当我从找不到的实例下载分析报告时遇到了这个问题符号信息，我只得到函数名称的十六进制值。探查器输出以下错误：

```
警告 VSP2701：查找符号信息时找不到 F:\approot\MyApp.MyLib.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\system32\MSASN1.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\system32\slc.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\assembly\NativeImages_v4.0.30319_64\Microsoft.Build.Fra#\d172e68980f5b5930d83fc1bccfc07e3\Microsoft.Build.Framework.ni.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\Microsoft.Net\assembly\GAC_MSIL\Microsoft.Build.Framework\v4.0_4.0.0.0__b03f5f7f11d50a3a\Microsoft.Build.Framework.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\assembly\NativeImages_v4.0.30319_64\System.Runtime.Cach#\5cf803aa1b791b9c6cf2d5167fe7d63b\System.Runtime.Caching.ni.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\assembly\NativeImages_v4.0.30319_64\System.Web.Applic#\fdc3ab5c1ff60542a20b6950f64eeb29\System.Web.ApplicationServices.ni.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Web.ApplicationServices\v4.0_4.0.0.0__31bf3856ad364e35\System.Web.ApplicationServices.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\assembly\NativeImages_v4.0.30319_64\System.DirectorySer#\770f4419204ad7db44842c6dbb86a336\System.DirectoryServices.Protocols.ni.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\Microsoft.Net\assembly\GAC_MSIL\System.DirectoryServices.Protocols\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.DirectoryServices.Protocols.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\assembly\NativeImages_v4.0.30319_64\System.DirectorySer#\7f7a77e6e63a5169626f3c0c8c7d72a8\System.DirectoryServices.ni.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\Microsoft.Net\assembly\GAC_MSIL\System.DirectoryServices\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.DirectoryServices.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\assembly\NativeImages_v4.0.30319_64\System.Drawing\741fda6371303be2c86d23b8dcf88cc3\System.Drawing.ni.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\assembly\NativeImages_v4.0.30319_64\System.Data.SqlXml\2d6a784738e5d67e70feb68f0c53a3d8\System.Data.SqlXml.ni.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Data.SqlXml\v4.0_4.0.0.0__b77a5c561934e089\System.Data.SqlXml.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\assembly\NativeImages_v4.0.30319_64\System.Security\b7ad9cb6010b93a853dd647d9e1f3857\System.Security.ni.dll。
警告 VSP2701：查找符号信息时找不到 D:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Security\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Security.dll。

```

等等。查看路径，这显然是在实际 Azure 实例上正在寻找的路径（我已经通过 RDP 进行了足够多的时间来识别 D:\windows 和 F:\approot 的含义）。但我正在我自己的机器上查看此性能报告。那么如何告诉探查器使用我机器的设置而不是 Azure 实例的设置来查找符号呢？

作为记录，我正在按照链接页面中的说明进行操作，并且我已经广泛搜索了这一点，但一无所获。并不是说那里什么都没有，但是我正在按照分析博客等中的说明进行操作，但仍然出现错误。[我在MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/windowsazuretroubleshooting/thread/95364f25-35b8-404b-a370-032363d4e165/)上问了这个问题，微软代表基本上告诉我，如果我按照说明进行操作，它肯定会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:26:37.057

抱歉我没有早点看到这个。基本上问题是，当您的应用程序被分析时，许多二进制文件都会被生成。因此，如果没有正确的 pdb，系统将无法解释函数地址，因此您会看到 Hex。您将需要在存在 ngenbinary 的同一台机器上生成 ngen pdb（请参阅[http://blogs.msdn.com/b/visualstudioalm/archive/2012/12/10/creating-ngen-pdbs-for-profiling-报告.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/12/10/creating-ngen-pdbs-for-profiling-reports.aspx)）。这应该会处理大多数列为 *.ni.dll 的二进制文件。对于您自己的应用程序，在 Visual Studio 中设置符号位置应该足以为您自己的应用程序定位符号。希望这可以帮助

# android - 在活动切换时保存片段

> ID：14360548
> 
> 赞同：0
> 
> 时间：2013-01-16T14:23:07.457
> 
> 标签：android, android-fragments

我在片段中使用带有无限滚动的 PullToRefreshGridView（它就像 ScrollView）。PullToRefreshGridView 包含很多 ImageView，图片是从网上下载的。用户单击 ImageView 会启动包含有关图像的详细信息的新活动。问题是当用户在DetailedImageInfoActivity 中按下返回键时，PullToRefreshGridView 开始重新加载所有图像并失去它的滚动位置。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:38:08.440

您应该在 onSaveInstanceState() 方法返回时保存所有要重用的活动数据，并在活动返回到前台时在 onCreate() 方法中恢复数据。

# forms - 一个视图、多个嵌套表单、多个表格

> ID：14360551
> 
> 赞同：1
> 
> 时间：2013-01-16T14:23:18.623
> 
> 标签：forms, cakephp-2.2

**背景**

我的任务是编写一个小型企业在线数据库。该数据库将包含大量信息以及有关其董事和分支机构的信息。由于任何企业都可以拥有无​​限数量的董事和分支机构，因此我需要创建一个不仅限于一个董事和/或分支机构的数据库。

**我有什么**

目前我有 3 张桌子。

```
smmes [id, company_name, trading_name, business_address, registration_number, tax_reference, vat_number, bbbee_status, employees, awards, created, modified]
ownerships [id, smme_id, name, surname, gender, age, race, disability, qualification, created, modified]
branches [id, smme_id, location, contact_number, contact_person, created, modified] 
```

注：smme_id 为分公司或董事所属公司在smmes 中的id。

我对 SMME 有看法。

**我的问题是什么**

我对 cakePHP 非常陌生（事实上，这是我用 cakePHP 创建的第一个应用程序）。我想知道如何制作一个表单，用户可以在其中输入所有这些详细信息，然后从一个视图添加所有董事和分支机构的详细信息。我希望他们没有各种视图来创建所有细节。除此之外，这个视图应该使用正确的 smme_id 将所有数据保存到正确的表中。

这是可能的还是我应该离开 cakePHP 并手动编写它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:06:07.713

您可以在控制器中按需加载模型，然后将模型特定数据（从发布的表单接收）传递给加载模型的保存方法。

```
public function detail(){

    if($this->request->is('post')): // update only when form is posted

        $this->loadModel('ownerships');
        $owner_name= $this->request->data['Ownername'];
        $ownerships_data = array('Ownership' = > array(
                             'name' = > $owner_name
                             //add other keys from posted form
                             )
                       ); 
        $this->Ownership->saveAll($ownerships_data);
    // load other models for saving posted data in related tables
    endif;
} 
```

类似地加载其他模型并将已发布表单中的字段作为数组传递给它的保存方法。假设 URL 格式是`http://example.com/director/detail`.所以你想把上面的方法（在 MVC 术语中称为动作）放在`app/controllers/directors_controller.php`

通常，如果 URL 格式是`http://somesite.com/abc/xyz`，它会`xyz`在 `app/controllers/abcs_controller.php`

[您可以在此处](http://book.cakephp.org/1.3/en/The-Manual/Basic-Principles-of-CakePHP/CakePHP-Conventions.html)阅读有关蛋糕约定的更多信息

# java - 如何在 UML 图中显示这个类？

> ID：14360557
> 
> 赞同：-5
> 
> 时间：2013-01-16T14:24:03.083
> 
> 标签：java, uml

如何在 UML 图中显示这个类？

```
 abstract class Point{
abstract String getXPoint();
abstract String getYPoint();
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:44:41.197

例如，`<<abstract>>`在类名旁边，一个继承映射（如果有任何类实现它）和斜体和粗体的方法声明。

此外，我看到许多图表采用了在方法名称之前显式添加*抽象*的诗意许可，但我会坚持使用纯 UML。

```
 ______________________
|     <<abstract>>     |
|        Point         |
|______________________|
| +getXPoint(): String |
| +getYPoint(): String |
|______________________| 
```

注意：我假设您的抽象方法是公开的。

# c++ - 为什么 nvcc 对 functor 不满意

> ID：14360558
> 
> 赞同：1
> 
> 时间：2013-01-16T14:24:10.857
> 
> 标签：c++, cuda, functor, nvcc

hc.cu的代码：

```
//patch for g++4.7
#ifdef _GLIBCXX_ATOMIC_BUILTINS
#undef _GLIBCXX_ATOMIC_BUILTINS
#endif
#ifdef _GLIBCXX_USE_INT128
#undef _GLIBCXX_USE_INT128
#endif

struct pi_
{
    double operator()() const
    {
        return 3.141592653589793;
    }
};

#include <iostream>

int main()
{
    std::cout << pi_()();

    return 0;
} 
```

编译将导致两个（不是一个）错误：

```
$nvcc -c hc.cu
hc.cu: In function ‘int main()’:
hc.cu:21:22: error: ‘type name’ declared as function returning a function
hc.cu:21:22: error: ‘type name’ declared as function returning a function 
```

有人可以告诉我问题吗？我是使用 g++ 4.7 的 archlinux 用户，我必须取消定义两个宏才能使 nvcc 工作；这两个undefs在编译错误中起到了一些作用吗？

关于cuda的一些信息：

```
$ pacman -Qi cuda
Name           : cuda
Version        : 5.0.35-3
URL            : http://www.nvidia.com/object/cuda_home.html
Licenses       : custom
Groups         : None
Provides       : cuda-toolkit  cuda-sdk
Depends On     : gcc-libs  opencl-nvidia
Optional Deps  : gdb: for cuda-gdb
Required By    : cuda-z  cula  cusp
Conflicts With : None
Replaces       : cuda-toolkit  cuda-sdk
Installed Size : 1464880.00 KiB
Packager       : Sven-Hendrik Haase <sh@lutzhaase.com>
Architecture   : x86_64
Build Date     : Tue 30 Oct 2012 12:51:49 PM CET
Install Date   : Wed 09 Jan 2013 02:38:26 PM CET
Install Reason : Explicitly installed
Install Script : Yes
Description    : NVIDIA's GPU programming toolkit 
```

和 g++

```
pacman -Qi gcc-multilib
Name           : gcc-multilib
Version        : 4.7.2-3
URL            : http://gcc.gnu.org
Licenses       : GPL  LGPL  FDL  custom
Groups         : multilib-devel
Provides       : gcc=4.7.2-3
Depends On     : gcc-libs-multilib=4.7.2-3  binutils-multilib>=2.23      libmpc      cloog  ppl
Optional Deps  : None
Required By    : boost-build  chicken  clang  dkms  gcc-fortran-multilib     gcc-objc-multilib  ghc  htmldoc  libreoffice-sdk  libtool  virtualbox-host-dkms
Conflicts With : gcc
Replaces       : None
Installed Size : 81560.00 KiB
Packager       : Jan Alexander Steffens (heftig) <jan.steffens@gmail.com>
Architecture   : x86_64
Build Date     : Wed 26 Dec 2012 01:22:52 PM CET
Install Date   : Mon 31 Dec 2012 03:40:26 PM CET
Install Reason : Installed as a dependency for another package
Install Script : Yes
Description    : The GNU Compiler Collection - C and C++ frontends for multilib 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:42:59.840

我可以在 CUDA 5.0 中使用我的 nvcc 重复您的错误。

它看起来像一个 nvcc 的错误。

`pi_()()`适用于 g++，但不适用于 nvcc。

为了让它在 nvcc 中工作，你必须这样写。

```
pi_ p;
std::cout<<p()<<std::endl; 
```

`(pi_())()`在 nvcc 中使用时出现此错误。似乎 nvcc 错误地将 pi_ 视为类型转换。

> a.cu(14)：错误：不允许转换为类型“pi_ ()”
> 
> a.cu(14): 错误: 期望一个表达式
> 
> 在“/tmp/tmpxft_00003006_00000000-6_a.cpp1.ii”的编译中检测到2个错误。

# arrays - LINQ：整数存在于数组中

> ID：14360561
> 
> 赞同：0
> 
> 时间：2013-01-16T14:24:18.907
> 
> 标签：arrays, linq, integer

我需要找到我的 int 数组中存在 TestEventId 的所有记录。这样做的好方法是什么？基本上我正在寻找：

```
 int[] testevents = McTestEventService.ReadTestEventsforTestCenter(testcenterid);
        var testcentercandidates =
            context.McTestCandidateRegistration.Where(m =>m.McTestEventId is in(testevents[]) ).ToList(); 
```

建议？我可以找到解决方法，但我想我可能会问是否有任何巧妙的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:25:23.040

您是否在寻找：

```
.Where(m => testevents.Contains(m.McTestEventId)) 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:25:32.033

```
 int[] testevents = McTestEventService.ReadTestEventsforTestCenter(testcenterid);
        var testcentercandidates =
            context.McTestCandidateRegistration.Where(m=>testevents.Contains(m.McTestEventId)).ToList(); 
```

# ruby-on-rails-3 - 在 rspec 中测试数据库连接

> ID：14360562
> 
> 赞同：0
> 
> 时间：2013-01-16T14:24:25.303
> 
> 标签：ruby-on-rails-3, rspec, resque

我已经设置了一个查询从数据库而不是主数据库的 resque 后台作业。在我的 resque 类中，我添加了代码来建立与从属设备的连接，然后在方法结束时取消建立连接。我的问题是我将如何在 rspec 中测试查询是否在方法中命中特定数据库？下面的代码示例：

```
 class ResqueJob
  @queue = :resque_job

def self.perform(user_id)
  ActiveRecord::Base.establish_connection(
      :adapter  => "mysql2",
      :host     => "slave_database.com",
      :username => "test",
      :database => "sample"
    )
    user = User.find_by_id(current_user_id)
    #bunch of code in here

  ActiveRecord::Base.clear_active_connections! # Disconnect from slave database
 end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:40:51.410

作为一般规则，您不应该测试库代码的行为。设置连接后，由 ActiveRecord 将查询发送到正确的数据库。相反，测试您的代码是否完成了它的工作：

```
it "sets the database connection to the slave" do
  params = { 
      :adapter  => "mysql2",
      :host     => "slave_database.com",
      :username => "test",
      :database => "sample"
  }
  ActiveRecord::Base.should_receive(:establish_connection).with(params)
  ActiveRecord::Base.should_receive(:clear_active_connections!)
  ResqueJob.perform(user)
end 
```

# c++ - 在 C++ 中比较两个 std::strings

> ID：14360564
> 
> 赞同：1
> 
> 时间：2013-01-16T14:24:28.880
> 
> 标签：c++, string

这种比较可以在 C++ 中进行吗？

```
std::string name = "John";

if (name == "Tom")
   flag = true;
else
   flag = false; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T14:25:02.423

是的，`std::string`因为`operator ==`.`const char*`

或者，您可以只写

```
flag = name == "Tom"; 
```

或使用`std::string::compare`（`0`如果字符串匹配则返回）

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-01-16T14:32:35.910

要比较 c++ 中的字符串，我建议您使用以下 STRCMP：

```
#include <string.h>
....
STRCMP(name,"Tom"); // This will return 0 if they are equal 
```

所以你应该把它用作：

```
if (STRCMP(name,"Tom")==0)
  flag = true;
else
  flag = false; 
```

记得使用#include <string.h>

# extjs - Ext.Calendar 重复错误

> ID：14360565
> 
> 赞同：0
> 
> 时间：2013-01-16T14:24:33.270
> 
> 标签：extjs, calendar, extjs4, extjs4.1, extjs-mvc

请告诉我，我如何创建两个 Ext.calendar 对象？

写这段代码，他说
Ext.Error: Registering duplicate id "left-col" with this manager

```
 var lPanel = Ext.create('Ext.calendar.CalendarPanel', {
        id: 'app-calendar-left',
        region: 'west',
        width: '50%',
        minWidth: 300,
        eventStore: Ext.create('Ext.calendar.data.MemoryEventStore', {
            data: Ext.calendar.data.Events.getData()
        }),
        calendarStore: this.calendarStore,
        border: 1,
        activeItem: 3,
        monthViewCfg: {
            showHeader: true,
            showWeekLinks: true,
            showWeekNumbers: true
        }
    });

    var rPanel = Ext.create('Ext.calendar.CalendarPanel', {
        id: 'app-calendar-right',
        region: 'center',
        width: '50%',
        minWidth: 300,
        eventStore: Ext.create('Ext.calendar.data.MemoryEventStore', {
            data: Ext.calendar.data.Events.getData()
        }),
        calendarStore: this.calendarStore,
        border: 1,
        activeItem: 3,
        monthViewCfg: {
            showHeader: true,
            showWeekLinks: true,
            showWeekNumbers: true
        }
    });

    Ext.create('Ext.container.Viewport', {
        layout: 'border',
        items: [lPanel, cPanel]
    }); 
```

帮助某人，我不知道如何处理此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:29:24.500

该问题可能是由于在“中心”区域的边框布局中提供“宽度”属性引起的，请尝试将其删除。另外，我不相信 minWidth 在边框布局的“中心”区域上有意义，也将其删除。'west' 区域应在边框布局中以像素为单位定义宽度。

# c# - 对我的对象实施 IEnumerable

> ID：14360568
> 
> 赞同：6
> 
> 时间：2013-01-16T14:24:46.207
> 
> 标签：c#, ienumerable, ienumerator

> **可能重复：**
> [为 LinkedList 类实现 C# IEnumerable<T>](https://stackoverflow.com/questions/12069205/implementing-c-sharp-ienumerablet-for-a-linkedlist-class)

在网上搜索了几个小时后，我仍然无法理解`IEnumerable`/如何`IEnumerator`工作以及如何实现它。

我`LinkedList`从头开始构建了一个简单的，但现在我想实现`IEnumerable`它，以便我可以实现它。我怎么做？

```
class Program
{
    LL myList = new LL();

    static void Main()
    {
        var gogo = new Program();
    }
    public Program()
    {

        myList.Add("test");
        myList.Add("test1");

        foreach (var item in myList) //This doesn't work because I havn't implemented Ienumerable
            Console.WriteLine(item);

        Console.Read();
    }
}

class LL
{

    private LLNode first;

    public void Add(string s)
    {
        if (this.first == null)
            this.first = new LLNode() { Value = s };
        else
        {
            var node = this.first;
            while (node.Next != null)
                node = node.Next;

            node.Next = new LLNode() { Value = s };
        }
    }

class LLNode
{
    public string Value { get; set; }
    public LLNode Next { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T14:30:47.160

这真的没那么难。要实现[IEnumerable](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable%28v=VS.110%29.aspx)，您只需要实现该`GetEnumerator`方法。

为此，您需要创建另一个实现[IEnumerator](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.aspx)的类。实现 IEnumerator 非常简单。通常，当您创建枚举器（在 GetEnumerator 中）时，您将传递对您的集合的引用，并且枚举器将跟踪哪个项目是当前项目。然后它将提供`MoveNext`哪个只是将 更改`Current`为下一个项目（如果它位于列表的末尾则返回 false ）并且`Reset`将`Current`返回设置为第一个节点*之前。*

因此，在非常广泛的、未经测试的代码术语中，您需要以下内容：

```
public class MyLinkedListEnumerator : IEnumerator
{
    private LL myList;
    private LLNode current;

    public object Current
    {
       get { return current; }
    }

    public MyLinkedListEnumerator(LL myList) 
    {
        this.myList = myList;
    }

    public bool MoveNext()
    {
        if (current == null) {
            current = myList.first;
        }
        else {
            current = current.Next;
        }
        return current != null;
    }

    public void Reset() 
    {
        current = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T14:39:10.900

你需要做的是：

(1) 让你的类实现 IEnumerable<T> 其中 T 是枚举项的类型。（在您的情况下，它看起来像是 LLNode）。

(2) 编写一个公共的 IEnumerator<T> GetEnumerator。使用“yield”关键字实现它。

(3) 添加一个IEnumerator IEnumerable.GetEnumerator() 方法，只返回GetEnumerator()。

下面的代码应该清楚地说明这一点。我有 <int> 的地方，你应该放 <LLNode>，假设那是正确的类型。

```
using System;
using System.Collections;
using System.Collections.Generic;

namespace Demo
{
    internal class Program
    {
        private static void Main()
        {
            var test = new MyDemo();

            foreach (int item in test)
            {
                Console.WriteLine(item);
            }
        }
    }

    public class MyDemo: IEnumerable<int>
    {
        public IEnumerator<int> GetEnumerator()
        {
            // Your implementation of this method will iterate over your nodes
            // and use "yield return" to return each one in turn.

            for (int i = 10; i <= 20; ++i)
            {
                yield return i;
            }
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            return GetEnumerator();
        }
    }
} 
```

我会修改您的代码以正确执行此操作，但您发布的代码无法编译。

[编辑]

现在您已经更新了代码，我可以看到您想要枚举这些值。这是完成的代码：

```
using System;
using System.Collections;
using System.Collections.Generic;

namespace Demo
{
    internal class Program
    {
        private LL myList = new LL();

        private static void Main()
        {
            var gogo = new Program();
        }

        public Program()
        {
            myList.Add("test");
            myList.Add("test1");

            foreach (var item in myList) // This now works.
                Console.WriteLine(item);

            Console.Read();
        }
    }

    internal class LL: IEnumerable<string>
    {
        private LLNode first;

        public void Add(string s)
        {
            if (this.first == null)
                this.first = new LLNode
                {
                    Value = s
                };
            else
            {
                var node = this.first;
                while (node.Next != null)
                    node = node.Next;

                node.Next = new LLNode
                {
                    Value = s
                };
            }
        }

        public IEnumerator<string> GetEnumerator()
        {
            for (var node = first; node != null; node = node.Next)
            {
                yield return node.Value;
            }
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            return GetEnumerator();
        }

        private class LLNode
        {
            public string Value { get; set; }
            public LLNode Next { get; set; }
        }
    }
} 
```

# android - findViewById 返回 null。但为什么？

> ID：14360569
> 
> 赞同：2
> 
> 时间：2013-01-16T14:24:54.030
> 
> 标签：android, eclipse, findviewbyid

我有一个 Adroid Activity，我想介绍一个自定义列表视图。这是我的 onCreate() 活动方法。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    LoadListView();

    ListView lvw = (ListView)findViewById(android.R.id.list);

    lvw.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

            // selected item
            String element = ((TextView) view).getText().toString();

            // Launching new Activity on selecting single List Item
            Intent i = new Intent(getApplicationContext(), AddEntryActivity.class);
            // sending data to new activity
            i.putExtra("entryToEdit", element);
            long idToEdit = Long.parseLong(hEntries.get(position).toString());
            i.putExtra("idToEdit", idToEdit);
            startActivity(i);

        }
      });   

    DbAccess oDb = new DbAccess(this);
} 
```

如您所见，调用 LoadListView() 方法来加载列表视图项：

```
private void LoadListView()
{
    oDb = new DbAccess(this);
    oDb.open();

    List<cAttivita> entries = oDb.getAttivita();

    CustomListAdapter listAdapter = new CustomListAdapter(MainActivity.this, android.R.layout.simple_list_item_1 , entries);
    ListView lvwAttivita = (ListView)findViewById(android.R.id.list);
    lvwAttivita.setAdapter(listAdapter);

    hEntries = new HashMap();

    for(int i = 0; i < entries.size(); i++)
    {
        hEntries.put(i, entries.get(i).getId());
    }
} 
```

自定义列表适配器类：

```
public CustomListAdapter(Context context, int textViewResourceId , List<cAttivita> list ) 
{
    super(context, textViewResourceId, list);           
    mContext = context;
    id = textViewResourceId;
    items = list ;
}

@Override
public View getView(int position, View v, ViewGroup parent)
{
    View mView = v ;
    if(mView == null){
        LayoutInflater vi = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        mView = vi.inflate(id, null);
    }

    TextView text = (TextView) mView.findViewById(R.id.textView);

    if(items.get(position) != null )
    {
        text.setTextColor(Color.WHITE);
        text.setText(items.get(position).toString());
        text.setBackgroundColor(Color.RED); 
        int color = Color.argb( 200, 255, 64, 64 );
            text.setBackgroundColor( color );

    }           

    return mView;
} 
```

这是 activity_main.xml 代码：

```
 <TextView android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:id="@+id/textView" 
    android:textSize="20px" 
    android:paddingTop="10dip" 
    android:paddingBottom="10dip"/> 

    <ListView xmlns:android="schemas.android.com/apk/res/android"; 
    android:id="@android:id/list" 
    android:layout_width="match_parent" 
    android:layout_height="wrap_content" 
    android:text="Attività"/> 
```

问题在于：

```
TextView text = (TextView) mView.findViewById(R.id.textView); 
```

为什么文本返回null？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T14:35:55.503

更改 CustomAdapter 的 getView() 中的以下代码行。

```
TextView text = (TextView) mView.findViewById(android.R.id.text1); 
```

正如您所采用`android.R.layout.simple_list_item_1`的布局一样，它应该是`android.R.id.text1`在 Android 库内部声明的布局。

在 getView() 中更改我的代码行，它对你有用。

# jquery-validate - 协助自定义 jquery 验证错误消息功能

> ID：14360575
> 
> 赞同：0
> 
> 时间：2013-01-16T14:25:12.847
> 
> 标签：jquery-validate

我们有一条规则，我们所有的验证消息都必须包含在摘要中，因此默认的“此字段是必需的”不会删除它，因为消息在摘要中丢失了它们的上下文，因此需要特定的字段指示符。

我有一个我非常喜欢的解决方案，但很快就发现除了必填字段（电子邮件、url、phoneUS 等自定义方法等）之外还需要消息，所以我对我的函数做了一些补充。

我使用 jQuery 已经有一段时间了，但我不是优化领域的专家，所以我想获得一些专家帮助，看看下面的函数是否可以优化......我的问题是，“实际上是否有一个在摘要中处理自定义错误消息的更好方法？”

```
$('.required, .email').each(function(index) {
  var $this = $(this);

  var label = (
    $this.is(':radio')
    ? $("label[data-name='"+$this.attr('name')+"']")
    : label = $("label[for='"+$this.attr('id')+"']")
  );

  var customMessages = [{}];

  if($this.hasClass('required')){
    customMessages.required = "'" + label.text() + "' is required.";
  }

  if($this.hasClass('email')){
    customMessages.email = "'" + label.text() + "' has an invalid email address.";
  }

  $this.rules("add", {
    messages: customMessages
  });
}); 
```

这是 jsFiddle：http: [//jsfiddle.net/GD5nw/1/](http://jsfiddle.net/GD5nw/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:46:21.627

那么，为什么不像最通常的做法那样，为每个字段逐个字段地分配自定义消息呢？它似乎没有你一直在做的那么冗长。

[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

具有指定为、和`input`的属性的元素示例。`name``first``second``address`

```
$('#myform').validate({
    rules: {
        first: {
            required: true
        },
        second: {
            required: true
        },
        address: {
            required: true,
            digits: true // just an example
        }
    },
    messages: {
        first: {
            required: "your first name is required"
        },
        second: {
            required: "your last name is required"
        },
        address: {
            required: "your address is required",
            digits: "must only use digits on address"
        }
    }
}); 
```

[工作演示：http://jsfiddle.net/x4YBw/](http://jsfiddle.net/x4YBw/)

# android - 无法从 android 更改图形对象标题

> ID：14360577
> 
> 赞同：0
> 
> 时间：2013-01-16T14:25:17.340
> 
> 标签：android, facebook, facebook-graph-api

我正在尝试在我的 facebook 时间轴上发布一个图形对象，但没有显示标题和描述，这是下面的代码。有什么建议么 ？

```
 Bundle postParams = new Bundle();
    postParams.putString("offer", "http://namespace.com/app/myobject.html");
    postParams.putBoolean("fb:explicitly_shared", true);
    postParams.putString("image", _offer.getImgpath());
    postParams.putString("title", _offer.getName());
    postParams.putString("description",_offer.getDescription());

    Request request = new Request(session, "me/namespace:share", postParams, 
                          HttpMethod.POST, callback);

    RequestAsyncTask task = new RequestAsyncTask(request);
    task.execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:12:15.870

image/title/description 都是 OG 对象的属性，不能通过参数指定给请求。它们必须通过 url 端点的“og:*”元属性定义（在您的示例中为[http://namespace.com/app/myobject.html](http://namespace.com/app/myobject.html)）。

# java - 为什么这个字符串不匹配这个正则表达式？

> ID：14360580
> 
> 赞同：2
> 
> 时间：2013-01-16T14:25:28.780
> 
> 标签：java, regex, string

我有以下代码：

```
public class testMatch {

    public static void main(String[] args) {
        String dummyMessage = "asdfasdfsadfsadfasdf 3 sdfasdfasdfasdf";
        String expression = "3";
        if (dummyMessage.matches(expression)){
            System.out.println("MATCH!");
        } else {
            System.out.println("NO MATCH!");
        }

    }
} 
```

我希望这是一个成功的匹配，因为 dummyMessage 包含表达式 3 但是当我运行此代码段时，代码会打印 NO MATCH！

我不明白我做错了什么。

**好的停止回答！.*3.* 有效** 这是我在一些实时代码中遇到的问题的过度简化，正则表达式是可配置的，到目前为止匹配整个字符串还可以，我现在必须匹配字符串的一部分并想知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T14:27:46.327

它与整个字符串匹配，即与`^3$`大多数其他正则表达式实现一样。所以`3`不匹配例如`333`或你的字符串。但`.*3.*`会做这项工作。

但是，如果您只想测试字符串中是否包含“3”，则根本不需要正则表达式。改为使用`dummyMessage.contains(expression)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T14:27:55.447

[String#matches(regex)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)判断这个字符串是否匹配给定的正则表达式。您的字符串 dummyMessage 与表达式不匹配，因为它尝试检查 dummyMessage 是否为 3 您可能想要[String.contains(charseq)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)。

```
 String dummyMessage = "asdfasdfsadfsadfasdf 3 sdfasdfasdfasdf";
            String expression = "3";
            if (dummyMessage.contains(expression)){
                System.out.println("MATCH!");
            } else {
                System.out.println("NO MATCH!");
            } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T14:28:06.887

您应该匹配整个字符串`matches`以返回 true。也许尝试使用`.*3.*`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T14:28:18.267

它将匹配这样的正则表达式：`.*3.*`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-16T14:28:49.537

使用包含（表达式）

```
 String dummyMessage = "asdfasdfsadfsadfasdf 3 sdfasdfasdfasdf";
        String expression = "3";
        if (dummyMessage.contains(expression)) {
            System.out.println("MATCH!");
        } else {
            System.out.println("NO MATCH!");
        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-16T14:28:45.167

默认`String#matches()`测试字符串是否完全匹配正则表达式。为了使它工作替换

```
expression = "3" 
```

和

```
expression = ".*3.*" 
```

在字符串使用`Matcher#find()`方法中匹配子字符串。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-16T14:29:00.613

你的正则表达式应该是`.*3.*`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-16T14:33:25.477

String 类的matches() 方法检查整个字符串是否匹配。我将您的代码修改为：

```
public class testMatch
{

    public static void main(String[] args)
    {
        String dummyMessage = "asdfasdfsadfsadfasdf 3 sdfasdfasdfasdf";
        String expression = ".*3.*";
        if (dummyMessage.matches(expression))
        {
            System.out.println("MATCH!");
        }
        else
        {
            System.out.println("NO MATCH!");
        }

    }
} 
```

现在它可以工作了

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-16T14:39:08.783

您可能正在寻找`matcher.find`：

```
String message = "asdfasdfsadfsadfasdf 3 sdfasdf3asdfasdf";
String expression = "3";

// Really only need to do this once.
Pattern pattern = Pattern.compile(expression);
// Do this once for each message.
Matcher matcher = pattern.matcher(message);
if (matcher.find()) {
  do { 
    System.out.println("MATCH! At " + matcher.start() + "-" + matcher.end());
  } while ( matcher.find() );
} else {
  System.out.println("NO MATCH!");
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-16T14:29:16.300

相应地更改原始正则表达式 - 它当前不正确且不匹配：

```
String expression = "(.*)3(.*)"; 
```

或者只是使用 String.contains() - 我会说这更适合这种情况。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-16T14:35:16.100

要么你这样做：

```
String dummyMessage = "asdfasdfsadfsadfasdf 3 sdfasdfasdfasdf";
String expression = "3";
Pattern p = Pattern.compile(".*3.*");
Matcher m = p.matcher(dummyMessage);
boolean b = m.matches();
if (b) {
    System.out.println("MATCH!");
}
else {
    System.out.println("NO MATCH!");
} 
```

或者这样：

```
String dummyMessage = "asdfasdfsadfadfasdf 3 sdfasdfasdfasdf";
String expression = "3"
if (dummyMessage.contains(expression)) {
    System.out.println("MATCH!");
}
else {
    System.out.println("NO MATCH!");
} 
```

# javascript - 强制“横向”定向模式

> ID：14360581
> 
> 赞同：109
> 
> 时间：2013-01-16T14:25:29.450
> 
> 标签：javascript, device-orientation

我试图为我的应用程序强制使用“横向”模式，因为我的应用程序绝对不是为“纵向”模式设计的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-01-16T14:31:34.007

**现在可以使用 HTML5 webapp manifest。见下文。**

* * *

**原答案：**

您不能将网站或 Web 应用程序锁定在特定方向。它违背了设备的自然行为。

您可以使用 CSS3 媒体查询来**检测设备方向，如下所示：**

```
@media screen and (orientation:portrait) {
    // CSS applied when the device is in portrait mode
}

@media screen and (orientation:landscape) {
    // CSS applied when the device is in landscape mode
} 
```

或者通过绑定一个 JavaScript 方向更改事件，如下所示：

```
document.addEventListener("orientationchange", function(event){
    switch(window.orientation) 
    {  
        case -90: case 90:
            /* Device is in landscape mode */
            break; 
        default:
            /* Device is in portrait mode */
    }
}); 
```

* * *

**2014 年 11 月 12 日更新：现在可以使用 HTML5 webapp manifest。**

如[html5rocks.com](http://updates.html5rocks.com/2014/11/Support-for-installable-web-apps-with-webapp-manifest-in-chrome-38-for-Android)上所述，您现在可以使用`manifest.json`文件强制定向模式。

您需要将这些行包含到 json 文件中：

```
{
    "display":      "standalone", /* Could be "fullscreen", "standalone", "minimal-ui", or "browser" */
    "orientation":  "landscape", /* Could be "landscape" or "portrait" */
    ...
} 
```

您需要将清单包含到您的 html 文件中，如下所示：

```
<link rel="manifest" href="manifest.json"> 
```

不完全确定 webapp 清单上对锁定方向模式的支持是什么，但 Chrome 肯定在那里。当我有信息时会更新。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2015-02-12T20:24:53.163

```
screen.orientation.lock('landscape'); 
```

将强制它更改为并保持在横向模式。在 Nexus 5 上测试。

[http://www.w3.org/TR/screen-orientation/#examples](http://www.w3.org/TR/screen-orientation/#examples)

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2019-09-22T02:34:08.147

我使用一些这样的 css（基于[css 技巧](https://css-tricks.com/snippets/css/orientation-lock/)）：

```
@media screen and (min-width: 320px) and (max-width: 767px) and (orientation: portrait) {
  html {
    transform: rotate(-90deg);
    transform-origin: left top;
    width: 100vh;
    height: 100vw;
    overflow-x: hidden;
    position: absolute;
    top: 100%;
    left: 0;
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-10T19:55:35.910

我有同样的问题，它是缺少 manifest.json 文件，如果没有找到浏览器决定方向是最合适的，如果你没有指定文件或使用错误的路径。

我修复了在 html 标头上正确调用 manifest.json 的问题。

我的html标题：

```
<meta name="application-name" content="App Name">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<link rel="manifest" href="manifest.json">
<meta name="msapplication-starturl" content="/">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="theme-color" content="#">
<meta name="msapplication-TileColor" content="#">
<meta name="msapplication-config" content="browserconfig.xml">
<link rel="icon" type="image/png" sizes="192x192" href="android-chrome-192x192.png">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#ffffff">
<link rel="shortcut icon" href="favicon.ico"> 
```

以及 manifest.json 文件内容：

```
{
  "display": "standalone",
  "orientation": "portrait",
  "start_url": "/",
  "theme_color": "#000000",
  "background_color": "#ffffff",
  "icons": [
  {
    "src": "android-chrome-192x192.png",
    "sizes": "192x192",
    "type": "image/png"
  }
} 
```

要生成您的网站图标和图标，请使用此网络工具： [https ://realfavicongenerator.net/](https://realfavicongenerator.net/)

要生成清单文件，请使用： [https ://tomitm.github.io/appmanifest/](https://tomitm.github.io/appmanifest/)

我的 PWA 效果很好，希望对您有所帮助！

# objective-c - Cocos2d如何创建进度条（加载场景）

> ID：14360586
> 
> 赞同：2
> 
> 时间：2013-01-16T14:25:50.870
> 
> 标签：objective-c, cocos2d-iphone, nsthread

如何将音乐、图像和其他内容加载到带有进度条的场景并平滑移动条.. 我猜进度条的逻辑是创建新线程-加载数据和销毁线程这是我加载内容的代码，但它不起作用, 进度条出现但不更新值

```
-(void)s1
{
    [[SimpleAudioEngine sharedEngine] preloadBackgroundMusic:@"game_music.caf"];
}

-(void)s2
{
    [[SimpleAudioEngine sharedEngine] preloadEffect:@"tap.caf"];
}

-(void)startThread
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    EAGLContext *context = [[[EAGLContext alloc]
                               initWithAPI:kEAGLRenderingAPIOpenGLES1
                                sharegroup:[[[[CCDirector sharedDirector] openGLView] context] sharegroup]] autorelease];
    [EAGLContext setCurrentContext:context];

    [self performSelector:@selector(loadBar)];
    //[self schedule:@selector(tick:)];
    [self performSelector:@selector(s1)];                   // uploading file
    [self performSelector:@selector(progressUpdateValue)];  // add 10 value to progress
    [self performSelector:@selector(s2)];                   // uploading file
    [self performSelector:@selector(progressUpdateValue)];  // add 10 value to progress

    [self performSelector:@selector(replaceScene)
                 onThread:[[CCDirector sharedDirector] runningThread]
               withObject:nil
            waitUntilDone:false];
    [pool release];

}

-(void)replaceScene
{
    [[CCDirector sharedDirector]replaceScene:[GameScene node]];
}

-(id)init
{
    self = [super init];
    if (self != nil)
    {
        [NSThread detachNewThreadSelector:@selector(startThread) toTarget:self withObject:nil];
    }
    return self;
} 
```

提前致谢。

界面..你去..）

```
@interface LoadScene : CCScene
{
    GPLoadingBar *loadingBar;
    float value;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:22:27.123

好的，所以您应该在后台加载资源，同时在主线程中更新 loadBar。对于 SimpleAudioEngine，您确实需要 NSThread，但 CCTextureCshe 具有 -addImageAsync 方法，该方法允许您异步加载图像而不会出现问题。所以你的代码应该是这样的：

```
-(void)s1
{
    [[SimpleAudioEngine sharedEngine] preloadBackgroundMusic:@"game_music.caf"];
}

-(void)s2
{
    [[SimpleAudioEngine sharedEngine] preloadEffect:@"tap.caf"];
}

-(void)startThread
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    [self s1];
    loadingBar.value = 0.5;
    [self s2];

    [self performSelectorOnMainThread:@selector(replaceScene)
                 withObject:nil
            waitUntilDone:false];
    [pool release];

}

-(void)replaceScene
{
    [[CCDirector sharedDirector]replaceScene:[GameScene node]];
}

-(id)init
{
    self = [super init];
    if (self != nil)
    {
        [self loadBar];
        [NSThread detachNewThreadSelector:@selector(startThread) toTarget:self withObject:nil];
    }
    return self;
}

-(void) loadingFinished
{
    [self replaceScene];
} 
```

Cocos2d 有自己的更新循环，所以你不需要创建一个更新 loadingBar。它还有一个绘图循环，所以如果你想动态更新屏幕上的东西，你应该只设置更新值，而不是停止加载资源的主线程

此外，您可以使用 [self s1] 而不是 [self performSelector:@selector(s1)] 因为它们是相同的。希望这会有所帮助

# java - 在 Java/Spring 中将 HTML 作为附件发送

> ID：14360587
> 
> 赞同：0
> 
> 时间：2013-01-16T14:25:56.163
> 
> 标签：java, javascript, html, email, spring-mvc

我有一个 HTML 文档

```
 document.body.innerHTML 
```

如何将此 HTML 附加到电子邮件？我想在 java/Spring 中将此 HTML 文件作为附件发送

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:42:00.227

**方法一：用服务器**

如果要将其发送到托管 HTML 文件的同一服务器，则使用 ajax 调用非常容易。

例如，如果您使用 JQuery，则可以通过以下方式完成：

```
$.ajax({
  type: 'POST',//or 'GET' depending on how your server is listening
  url: 'the url to your server page',
  data: data
  dataType: 'html'
}); 
```

如果 HTML 是从浏览器中的本地硬盘加载的，或者您想将 HTML 发送到主机，您应该寻找跨域 ajax 请求。

根据您的应用程序，您可能希望[*清理*](http://en.wikipedia.org/wiki/HTML_sanitization)HTML 并使用 Ajax 请求发送它。

**方法二：无服务器**

如果您想在屏幕上创建一个链接，允许用户使用您指定的正文发送电子邮件，您可以使用带有`mailto`. 请记住对文本进行编码：

```
$('<a href="mailto:myemail@myserver.com?subject=This+is+the+data&body='
+ encodeURI($( '#some-text' ).text())
+ '">Send</a>' ); 
```

[这是一个 JSfiddle 供您尝试](http://jsfiddle.net/dRYLA/)。

# c# - `FindBaseClassWith` 方法应该返回什么？

> ID：14360593
> 
> 赞同：1
> 
> 时间：2013-01-16T14:26:02.617
> 
> 标签：c#, inheritance, types

假设我有以下课程：

```
public class Xyz {
}

public class Abc: Xyz {
}

public class Pqr: Xyz {
}

public class Wtf: Abc {
} 
```

使用一种方法来查找 type1 和 type2 的公共基类型：

```
public static Type FindBaseClassWith(this Type type1, Type type2); 
```

然后，我使用以下方法调用该方法：

```
typeof(Wtf).FindBaseClassWith(variousType).FindBaseClassWith(typeof(Xyz)); 
```

`variousType`的变量在哪里`Type`，有时可能是`null`。

并且`FindBaseClassWith`意味着被链接调用，如：

```
t1.FindBaseClassWith(t2).FindBaseClassWith(t3).FindBaseClassWith(t4); 
```

找到它们之间的唯一基本类型。

该方法应该`FindBaseClassWith`返回什么？

一个最可接受的答案将是标记它是否是解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:20:57.947

由于它是一种扩展方法，因此即使链中的一个成员为空，它也能正常工作。您可以在空引用上调用扩展方法，因为它是方法调用的语法糖，其中对象作为参数传递。但是，`NullReferenceException`如果您尝试访问一个属性，如`.Name`结果为`null`.

如果您想使用链式调用来收集一系列参数，然后只在最后“处理”它们，您需要与 LINQ 类似的模式。中间类型应该是某种包装器，它只是收集链中的值。然后应该有一个最终调用，它实际上启动了匹配类型的过程，即类似`.Resolve()`. 这是一个名为的示例实现`TypeChain`：

```
public class TypeChain
{
    private List<Type> types;

    public TypeChain(Type t)
    {
        types = new List<Type>();
        types.Add(t);
    }

    // searching for common base class (either concrete or abstract)
    public TypeChain FindBaseClassWith(Type typeRight)
    {
        this.types.Add(typeRight);
        return this;
    }

    public Type Resolve()
    {
        // do something to analyze all of the types
        if (types.All (t => t == null))
            return null;
        else
            types = types.Where (t => t != null).ToList();

        var temp = types.First();
        foreach (var type in types.Skip(1))
        {
            temp = temp.FindBaseClassWithHelper(type);
        }
        return temp;
    }
} 
```

`FindBaseClassWith`静态实现会有一些变化：

```
// searching for common base class (either concrete or abstract)
public static Type FindBaseClassWithHelper(this Type typeLeft, Type typeRight)
{
    if(typeLeft == null || typeRight == null) return null;

    return typeLeft
            .GetClassHierarchy()
            .Intersect(typeRight.GetClassHierarchy())
            .FirstOrDefault(type => !type.IsInterface);
}

// searching for common base class (either concrete or abstract)
public static TypeChain FindBaseClassWith(this Type typeLeft, Type typeRight)
{
    return new TypeChain(typeLeft).FindBaseClassWith(typeRight);
} 
```

使用上面的链接逻辑允许使用原始代码无法实现的逻辑场景。现在可以检查是否所有条目都是`null`，然后返回`null`，或者如果不是`null`，则在处理之前先清除所有`null`条目，以免它们污染结果。这当然可以扩展到任何所需的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:30:47.583

请参阅[http://msdn.microsoft.com/en-us/library/system.type.basetype.aspx](http://msdn.microsoft.com/en-us/library/system.type.basetype.aspx)

`BaseType`您可以编写一个递归函数，通过反复与所需类型进行比较来跨越层次结构。

# vbscript - 文件路径中有空格的 VBS

> ID：14360599
> 
> 赞同：7
> 
> 时间：2013-01-16T14:26:38.363
> 
> 标签：vbscript

如果我将蝙蝠移动到名称中没有空格的文件夹中，这就是我所拥有的并且无法让蝙蝠运行。我的问题是实际的 bat 位于带有空格的文件夹中，所以我需要它来工作。

```
Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run("%comspec% /K C:\Program Files\ping.bat"), 1, True 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T14:37:07.523

您需要引用文件规范：

```
Run("%comspec% /K ""C:\Program Files\ping.bat""") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-20T16:06:10.263

我在 VBScript 中的目录路径中遇到了类似的问题，其中包含空格：

例如

以下没有工作：

```
objShell.Run("C:\Program Files\NetBeans 8.0.2\bin\netbeans64.exe") 
```

我只是在路径的两侧添加了两个额外的双引号，它对我有用：

```
objShell.Run("""C:\Program Files\NetBeans 8.0.2\bin\netbeans64.exe""") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:46:28.120

试试这个

```
Set objShell = WScript.CreateObject("WScript.Shell")
strCommand = chr(34)&"%comspec% /K C:\Program Files\ping.bat"&chr(34)
objShell.Run strCommand,1,True 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-02-07T20:41:18.313

我知道这是一个老问题，但我找到了一个适合我的修复程序。
这是您需要的双引号。
试试下面：

```
objShell.Run("%comspec% /K " & """C:\Program Files\ping.bat""""), 1, True); 
```

# javascript - 使用主干、下划线、jquery、bootstrap 等的 Web 应用程序

> ID：14360604
> 
> 赞同：2
> 
> 时间：2013-01-16T14:26:57.167
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我正在开发我的第一个基于 javascript 的 Web 应用程序，并且想利用我一直在研究的几个不同的框架，但是我在正确加载所有不同的库时遇到了很多麻烦。我正在尝试使用 Backbone 和 Underscore 以及 Twitter Bootstrap 中包含的 javascript（我将其用于我的 CSS/HTML 脚手架）。这是我加载所有脚本的惨痛尝试，但我仍然收到来自 require.js 的萤火虫错误

根据建议的答案，我已经编辑了我的设置。在我的 index.html 中：

```
<script data-main="../scripts/main.js" src="../scripts/require.js"></script> 
```

在 main.js 中：

```
require.config({ 
    // Require is defined in /scripts, so just the remaining path (and no ext needed)
    'paths': {
        "bootstrap": "scripts/bootstrap",
        "jquery": "scripts/jquery",
        "underscore": "scripts/underscore",
        "backbone": "scripts/backbone"
},
'shim': 
{
    backbone: {
        'deps': ['jquery', 'underscore'],
        'exports': 'Backbone'
    },
    underscore: {
        'exports': '_'
    }
}   
}); 

require([
    'jquery',
    'bootstrap',
    'underscore',
    'backbone'
], 
function(bootstrap, $, _, Backbone){

    Person = Backbone.Model.extend({
        initialize: function () {
            alert("Welcome to this world");
        }
    });

    var person = new Person;

}); 
```

但我仍然从 require.js 中收到指向此链接 [http://requirejs.org/docs/errors.html#scripterror的脚本错误](http://requirejs.org/docs/errors.html#scripterror)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:32:08.707

乍一看好像是RequireJS的设置，看看这个：[https ://github.com/jcreamer898/RequireJS-Backbone-Starter](https://github.com/jcreamer898/RequireJS-Backbone-Starter)

你不需要在正文中定义你的脚本，那些应该通过 Require 加载，所以像：

您的主要 index.html：

```
<script src="path/to/require.js"  data-main="scripts/app"> 
```

然后`data-main`引用将指向`/scripts/app.js`以下内容：

```
require.config({ 
    // Require is defined in /scripts, so just the remaining path (and no ext needed)
    'paths': {
        "bootstrap": "libraries/bootstrap"
        "jquery": "libraries/jquery",
        "underscore": "libraries/underscore-min", 
        "backbone": "libraries/backbone-min"
    },
    'shim': 
    {
        backbone: {
            'deps': ['jquery', 'underscore'],
            'exports': 'Backbone'
        },
        underscore: {
            'exports': '_'
        }
    }   
    }); 

require([
    'bootstrap',
    'jquery',
    'underscore',
    'backbone'
], 
function(bootstrap, $, _, Backbone){

    // Start your application here...

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:31:09.797

`<script />`使用 RequireJS，您应该在标签中包含的唯一库是`require.js`. 此外，您需要指定一个“主”javascript 文件，该文件应由 RequireJS 加载：

```
<script data-main="scripts/main.js" src="scripts/require.js"></script> 
```

然后主文件应该加载其他库：

```
requirejs(['jquery','backbone'], function ($,Backbone) {
    //...
}); 
```

我建议您通读[RequireJS API 文档](http://www.requirejs.org/docs/api.html)并按照示例进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:37:40.400

没有人指出您可能从这么多组件（每个组件都有要学习的概念）开始成为您的第一个 Javascript 项目。在非常简单的项目中，我会尝试分别探索每个库，对它们有一些经验，当你清楚地了解它们的作用时（文档并不总是给出它）你可以开始将它们全部组合起来。

可能不是您要寻找的答案，但我的经验在这里说话。祝你好运！

# javascript - 在 Azure 中处理多个异步请求？

> ID：14360605
> 
> 赞同：1
> 
> 时间：2013-01-16T14:26:59.037
> 
> 标签：javascript, azure, azure-table-storage, azure-mobile-services

为了读取下面显示的表脚本，我尝试在参数中运行查询，并为每个结果尝试将不同表中的值附加到结果中。但是由于 azure 的异步特性，request.respond() 总是在 getInvites 之前调用。这意味着结果永远不会附加邀请。

```
function read(query, user, request) {

    request.execute({
        success: function (results) {
            for (var i = 0; i < results.length; i++) {
                getInvites(results[i].id, function (invites) {
                    console.log("Assigning results.invites"); //runs second
                    results[i].invites = invites;
                });
            }
            console.log("Request Responding"); //runs first
            request.respond();
        }
    });

}

function getInvites(id, cb) {
    var InvitesTable = tables.getTable("Invites").where({
        "PlanID": id
    }).select("UserID", "Attending");
    InvitesTable.read({
        success: function (results) {
            if (cb) cb(results);
        }
    });
} 
```

[这](https://stackoverflow.com/questions/14326849/synchronous-request-in-windows-azure)是一个后续问题，因为我无法在 Azure 中使用外部库。那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T03:33:38.953

操作的异步性质使得这有点挑战。您需要做的是仅`request.respond()`在所有操作完成后才调用。我真的很怀念`await`我在 C# 中非常喜欢的关键字，但我以前使用过“异步 for 循环”，而且效果很好。您的代码如下所示：

```
function read(query, user, request) {
    request.execute({
        success: function (results) {
            var index = 0;
            var executeStep = function() {
                if (index === results.length) {
                    // all invites have been retrieved
                    console.log("Request Responding");
                    request.respond();
                } else {
                    getInvites(results[index].id, function(invites) {
                        console.log('Assigning results.invites');
                        results[i].invites = invites;
                        index++;
                        executeStep();
                    });
                }
            }

            executeStep();
        }
    });
}

function getInvites(id, cb) {
    var InvitesTable = tables.getTable("Invites").where({
        "PlanID": id
    }).select("UserID", "Attending");
    InvitesTable.read({
        success: function (results) {
            if (cb) cb(results);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:21:49.630

好的，你可能会做这样的事情

```
function read(query, user, request) {

    request.execute({
        success: function (results) {
            for (var i = 0, len = results.length; i < len; i++) {
                getInvites(results.id, function (invites) {
                    console.log("Assigning results.invites"); //runs second
                    results.invites = invites;

                    if (i === len-1) request.respond();
                });
            }
            console.log("Request Responding"); //runs first
        }
    });

}

function getInvites(id, cb) {
    var InvitesTable = tables.getTable("Invites").where({
        "PlanID": id
    }).select("UserID", "Attending");
    InvitesTable.read({
        success: function (results) {
            if (cb) cb(results);
        }
    });
} 
```

它基本上意味着`request.respond()`将在您最后一次迭代的成功回调时调用。

# wpf - wpf 中的数据绑定与 asp.net 中的中继器一样

> ID：14360607
> 
> 赞同：0
> 
> 时间：2013-01-16T14:27:08.600
> 
> 标签：wpf

我在 asp.net 中有这样的中继器

```
 <asp:Repeater runat="server" ID="rptrExperience" OnItemDataBound = "itembound">
                        <ItemTemplate>
                            <div class="experience">
                               <a><asp:Label ID="Label13" class="accounts-link" runat="server" Text='<%#Eval("JobTitle") %>'></asp:Label></a> <br />
                               <a> <asp:Label ID="Label14" class="accounts-link" runat="server" Text='<%#Eval("Company") %>'></asp:Label></a><br />
                                <%-- <asp:Label ID="Label1" runat="server" Text='<%#Eval("town") %>'></asp:Label><br />
                                <asp:Label ID="Label15" runat="server" Text='<%#Eval("Location") %>'></asp:Label><br />--%>
                                <asp:Label ID="Label16" runat="server" Text='<%#Eval("Period") %>'></asp:Label><br />
                                <asp:Label ID="Label17" runat="server" Text='<%#Eval("Description") %>'></asp:Label><br />
                                <asp:Label ID="lblname" runat="server"></asp:Label>
                                <a id="ae" href="#?w=750" class=" floatleft poplight"  rel="popup6" runat ="server"  >Endorse <asp:Label ID="en" runat="server" Text='<%#Name(Eval("UserId")) %>'></asp:Label>'s Work in <asp:Label ID="en1" runat="server" Text='<%#Eval("Company") %>'></asp:Label></a>
                                <a  id="te" runat="server" rel="tooltip" title="You can endorse your collegue or friend you have worked together.This is your professional opinion so keep it professional.Tip: Keep it clear and simple, Your friend can delete your endorsementif they are innappropriate. "><img src="images/icon-tips.png" width="14" height="15" alt="tips" /></a>
                            </div>
                        </ItemTemplate>
                    </asp:Repeater> 
```

并使用 linq 绑定数据

我希望在 wpf 应用程序中显示相同的内容。我是 wpf 的新手，谁能帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:37:44.807

我认为`ItemsControl`可能会满足您的需求：

```
<ItemsControl ItemsSource="{Binding ...}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <!-- Template goes here ... -->
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# hibernate - Grails 中的准备好的语句

> ID：14360610
> 
> 赞同：1
> 
> 时间：2013-01-16T14:27:15.997
> 
> 标签：hibernate, grails, database-performance

这是准备好的声明吗？

```
select
this_.col_id as col1_1_0_,
this_.col_label as col2_1_0_,
this_.col_definitionAsJSON as col4_1_0_ 
from
tbl_Rule this_ 
where
this_.class='org.rules.Table' 
and this_.col_label=? 
```

如果去掉第一个“where”条件，那么肯定是prepared statement，会被数据库缓存。但是第一个“where”条件是什么？它是否会阻止数据库缓存此查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:09:40.250

Hibernate 总是使用 PreparedStatement 来调用数据库。

# c# - 使用asp.net c#将数据插入数据库

> ID：14360619
> 
> 赞同：1
> 
> 时间：2013-01-16T14:27:46.540
> 
> 标签：c#

我正在尝试使用下面的代码从 asp.net 页面将数据插入本地数据库，但我不断收到此错误

> “关键字‘用户’附近的语法不正确”

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["RegConnectionString"].ConnectionString);
        con.Close();
        string inse = "insert into user (username, password, emailadd, fullname, country) values(@username, @password, @emailadd, @fullname, @country) ";
        SqlCommand insertuser = new SqlCommand(inse, con);
        insertuser.Parameters.AddWithValue("@username",TextBoxFA.Text);
        insertuser.Parameters.AddWithValue("@password", TextBoxEA.Text);
        insertuser.Parameters.AddWithValue("@emailadd", TextBoxRPW.Text);
        insertuser.Parameters.AddWithValue("@fullname", TextBoxPW.Text);
        insertuser.Parameters.AddWithValue("@country",DropDownList1.SelectedItem.ToString());

        try
        {
            insertuser.ExecuteNonQuery();
            con.Close();
            Response.Redirect("login.aspx");
        }
        catch (Exception ex)
        {
            Response.Write("<b>something really bad happened.....Please try again</b> ");
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T14:31:21.040

恭喜您使用了参数化查询！

`user`是一个关键字，所以用方括号括起来，比如`[user]`.

一些评论：

1.  您应该使用`using`for 连接和命令来自动处理未使用的资源
2.  第一个`con.Close();`没有意义，可以删除。相反，您需要致电`con.Open();`
3.  `finally`在您关闭连接的位置创建一个块。目前发生异常时不会关闭。

话虽如此，您的代码将显示为：

```
using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["RegConnectionString"].ConnectionString))
{
    con.Open();

    string inse = "insert into [user] (username, password, emailadd, fullname, country) values(@username, @password, @emailadd, @fullname, @country)";
    using (SqlCommand insertuser = new SqlCommand(inse, con))
    {
        insertuser.Parameters.AddWithValue("@username",TextBoxFA.Text);
        insertuser.Parameters.AddWithValue("@password", TextBoxEA.Text);
        insertuser.Parameters.AddWithValue("@emailadd", TextBoxRPW.Text);
        insertuser.Parameters.AddWithValue("@fullname", TextBoxPW.Text);
        insertuser.Parameters.AddWithValue("@country",DropDownList1.SelectedItem.ToString());

        try
        {
            insertuser.ExecuteNonQuery();
            Response.Redirect("login.aspx");
        }
        catch (Exception ex)
        {
            Response.Write("<b>something really bad happened.....Please try again</b> ");
        }
        finally
        {
            con.Close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T14:30:18.733

尝试将单词 user 括在方括号中。我相信 user 是保留关键字。

IE

```
string inse = "insert into [user] (username, password, emailadd, fullname, country) values(@username, @password, @emailadd, @fullname, @country) "; 
```

您在该代码中还有其他几个问题，但是没有将用户放在方括号中是导致您看到的错误消息的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T14:30:52.917

`user`是一个[保留关键字](http://msdn.microsoft.com/en-us/library/ms189822.aspx)，因此您只需将其括在方括号中以明确表示您的意思是名为*“User”*的对象：

```
insert into [user] 
```

# asp.net-mvc - 扩展 Razor 视图引擎以处理渲染

> ID：14360620
> 
> 赞同：9
> 
> 时间：2013-01-16T14:27:48.240
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, viewengine

我想知道是否有任何方法可以扩展 razor 视图引擎功能来处理一些自定义文本/标签并在渲染之前解析/继续。假设我使用了一些特殊的标签，`${}`如下所示：

```
<span>${some word}</span> 
```

然后，我想在渲染之前解析视图并用本地化值替换“某个世界”。当然这可以通过其他方式完成，但我想知道是否有任何方法可以完成这项工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T16:51:20.723

您可以通过从类继承来扩展剃刀视图引擎，您可以[在此处](http://weblogs.asp.net/imranbaloch/view-engine-with-dynamic-view-location)`RazorViewEngine`找到如何执行此操作的示例

此外，请查看[Nancy.Viewengines.Razor](https://github.com/NancyFx/Nancy/wiki/Razor-View-Engine)，它是构建在 Razor 视图引擎之上的视图引擎，并拥有自己的语法解析器

# html - 设置为 100% 的宽度超出了 Firefox 中的容器

> ID：14360627
> 
> 赞同：0
> 
> 时间：2013-01-16T14:28:02.997
> 
> 标签：html, css, google-chrome, firefox

我的菜单有这个烦人的问题。在 Firefox 中，“ul”标签超出了它的父容器。在 Chrome 和 IE 中它没有。

我想要什么：我希望下拉菜单的宽度与其父级相同（在 chrome 中打开示例以查看其外观）

[例子](http://jsfiddle.net/fYQ4k/7/)

```
<ul>
  <li><a href="/sommer-2013">Sommer 2013</a>
    <ul> <--- This one exceeds it's parent
      <li><a href="/sommer-2013/vinter-2012">Vinter 2012</a></li>
    </ul>
  </li>
  <li><a href="/webshop.html">WEBSHOP</a></li>
  <li><a href="/company.html">COMPANY</a></li>
  <li><a href="/stores.html">STORES</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:33:20.463

`ul`是一个块元素，你根本不需要设置宽度 - 默认情况下它已经使用了可用的整个宽度（这将是 100% - 填充）。也是如此`li`。

至于为什么它超出其容器，这可能是由于 Firefox、Chrome 和 IE 之间的默认填充/边距不同。如果是这种情况，只需设置`padding: 0; margin: 0; border: 0`,和。`ul``li``a`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:47:45.010

[http://jsfiddle.net/biznuge/2vNpE/12/](http://jsfiddle.net/biznuge/2vNpE/12/)

从原来的小提琴中挖出胆量。对于那个很抱歉。

看了之后觉得position:absolute is the issue的解释对于DOM中下一个相对父级的继承来说是非常正确的，所以我尝试修改“table-like”的显示模式“你已经建立的结构。

```
nav{
  /*display: table;*/
}    
nav>ul{ 
  /*display: table-row;*/
}
nav>ul>li{
  /*display: table-cell;*/
} 
```

删除表格后，表格行和表格单元格显示宽度继承突然开始工作。

将对此进行更多研究，因为我已经使用 table 一段时间来强制某些布局，例如菜单结构等。

好问题@dasmikko！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:32:39.203

您是否将填充设置为0？

规范说填充应该不包括宽度（IE 忽略了这一点，似乎 Chrome 在将对象安装到容器时可能会这样做）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T14:41:42.117

问题与内部`ul`绝对定位有关。因为它是绝对定位的，所以相对宽度，即百分比，是相对于文档本身的，而不是相对于它的容器的。根本不设置宽度，并且`ul`将调整大小以适合其容器。或者换句话说，从 for`nav ul`和 for规则中删除宽度设置`nav ul li ul`。

至于为什么这是 Firefox 下的问题，而不是 Chrome，我不知道。建议，有人吗？

# java - Liferay 生成异常：null 和 javax.servlet.ServletException：java.lang.StackOverflowError

> ID：14360635
> 
> 赞同：3
> 
> 时间：2013-01-16T14:28:49.757
> 
> 标签：java, exception, sdk, liferay, portlet

我使用带有 sdk 6.1.0 的全新 jsf-portlet 启动 liferay 6.1.0，当我尝试将 portlet 添加到网页时，我得到了这个：

```
14:12:47,672 INFO  [PortalImpl:4873] Current URL /poller/receive generates exception: null
14:13:17,625 INFO  [PortalImpl:4873] Current URL / generates exception: org.apache.jasper.JasperException: javax.servlet.ServletException: java.lang.StackOverflowError
14:13:17,705 ERROR [status_jsp:670] org.apache.jasper.JasperException: org.apache.jasper.JasperException: javax.servlet.ServletException: java.lang.StackOverflowError
org.apache.jasper.JasperException: org.apache.jasper.JasperException: javax.servlet.ServletException: java.lang.StackOverflowError
    at org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:455)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)
    at com.liferay.portal.action.LayoutAction.includeLayoutContent(LayoutAction.java:412)
    at com.liferay.portal.action.LayoutAction.processLayout(LayoutAction.java:680)
    at com.liferay.portal.action.LayoutAction.execute(LayoutAction.java:244)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
    at com.liferay.portal.struts.PortalRequestProcessor.process(PortalRequestProcessor.java:174)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at com.liferay.portal.servlet.MainServlet.callParentService(MainServlet.java:533)
    at com.liferay.portal.servlet.MainServlet.service(MainServlet.java:510)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:201)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.autologin.AutoLoginFilter.processFilter(AutoLoginFilter.java:240)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.liferay.portal.servlet.FriendlyURLServlet.service(FriendlyURLServlet.java:135)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

请告诉我这里出了什么问题...旁注：如您所见，有一个**StackOverflowError**，这表明这篇文章非常适合这个网站；）

官方论坛链接：[http ://www.liferay.com/community/forums/-/message_boards/message/20737546](http://www.liferay.com/community/forums/-/message_boards/message/20737546)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T10:35:47.833

这是一个内存问题，你必须增加大小。例如，在服务器的配置文件中（例如tomcat只需双击服务器）只需设置：-Xmx1024m -XX:MaxPermSize=512m

另一种解决方法是仅加载 1 个 portlet。

# sql - 小表中列的非聚集索引

> ID：14360636
> 
> 赞同：3
> 
> 时间：2013-01-16T14:28:53.407
> 
> 标签：sql, sql-server, tsql, database-design, indexing

我有下表，`ReportType`. 该表将永远只有 100 左右的行，并且永远不会被应用程序更新（所以`INSERT`，`UPDATE`或者`DELETE`性能不是问题）。

```
Table: ReportType
===========================================================
|  ID (PK)  |  Name  |  ExportFormat  |  SourceDatabase   |
=========================================================== 
```

还值得在上面放置一个非聚集索引`ExportFormat`吗？此列在某些场景和某些报表中用作过滤条件。它根本没有高度选择性（可能只有 10 个不同的值），这表明它不会成为非聚集索引的良好候选者。但是这个表从来没有经历过任何`INSERT`, `UPDATE`or`DELETE`操作，所以索引肯定会在这里真正受益（即使只是一点点）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:33:57.350

根据经验，少于 128 行的表上的索引增加的开销超过了它的价值。尤其是非聚集索引——单个书签查找可能比扫描整个表更广泛。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:28:11.997

我不同意你接受的答案。

你说这个表是只读的，所以我没有看到创建**覆盖**非聚集索引的缺点，如下所示。

```
CREATE NONCLUSTERED INDEX IX 
     ON  ReportType(ExportFormat) INCLUDE(ID,Name,SourceDatabase ) 
```

对于如此少量的行，好处可能非常微不足道，但它避免了必须为每个查询过滤处理**所有**行`ExportFormat`

# c# - WinForms DataBinding 与 DataGridView

> ID：14360637
> 
> 赞同：4
> 
> 时间：2013-01-16T14:28:59.613
> 
> 标签：c#, winforms, data-binding, datagridview

我虽然我会发布这个，因为在花了几个小时试图解决它之后我一无所获。首先，我完全意识到 WinForms 中的数据绑定并不是最好的。也就是说，它在大多数情况下都有效。

在我的场景中，我有一个绑定源，它是我的表单的主控。用于此绑定源的对象也有一些简单的属性和两个绑定列表作为属性。此类和绑定列表的类类型都实现了 INotifyPropertyChanged。在我的表单上，我有两个 DataGridViews 用于显示绑定列表属性的内容。

这也是通过设计时的数据绑定来完成的。我有两个绑定源，每个绑定源使用主绑定源作为数据源，然后使用各自的绑定列表属性作为数据成员。

到目前为止，我认为这是相当标准的。

为了更新这些列表中的内容，我使用按钮来显示创建新项目的表单，然后我使用 BindingList.Add() 将其添加到列表中。

现在在代码中，如果您调试，项目在列表中，但是，网格没有更新。但是，如果我将一个列表框添加到仅使用其中一个列表绑定源的表单中，那么两个网格都会按预期开始刷新。

如果有任何不清楚的地方，我深表歉意，我已经尽力解释了一个令人困惑的情况。

任何想法都会有所帮助，因为我真的不想使用隐藏的列表框。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:02:28.947

这段代码对我来说很好

```
BindingList<Foo> source; // = ...
private void Form1_Load(object sender, EventArgs e)
{
    this.dataGridView1.DataSource = new BindingSource { DataSource = source };
    this.dataGridView2.DataSource = new BindingSource { DataSource = source, DataMember = "Children" };
}

private void button1_Click(object sender, EventArgs e)
{
    source.Add(new Foo { X = Guid.NewGuid().ToString() });
}

private void button2_Click(object sender, EventArgs e)
{
    source[0].Children.Add(new FooChild { Y = Guid.NewGuid().ToString() });
} 
```

与模型

```
public class Foo : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged([CallerMemberName] String propertyName = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    string x;
    public string X
    {
        get { return x; }
        set
        {
            x = value;
            this.NotifyPropertyChanged();
        }
    }

    BindingList<FooChild> children;
    public BindingList<FooChild> Children
    {
        get { return children; }
        set
        {
            children = value;
            this.NotifyPropertyChanged();
        }
    }
}

public class FooChild : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged([CallerMemberName] String propertyName = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    string y;
    public string Y
    {
        get { return y; }
        set
        {
            y = value;
            this.NotifyPropertyChanged();
        }
    }
} 
```

两个网格都会刷新。

我希望这可以帮助你

**编辑**

我改变了**Form1_Load** impl

# mysql - 从php时间戳获取月份名称

> ID：14360639
> 
> 赞同：2
> 
> 时间：2013-01-16T14:29:00.797
> 
> 标签：mysql, sql, datetime, timestamp

我有一个将 php 时间戳存储为整数的表。我需要按日期和年份访问这些数据。我可以获取年份并将其与表中存在的列行匹配，但需要从时间戳中获取月份名称。

到目前为止的代码

```
$query="SELECT * FROM archive_agent_booking
    WHERE agent_id='$account_no'
    AND (MONTHNAME(comp_date)='$month' AND year='$year' AND details='')
    ORDER BY order_time"; 
```

不幸的是，这没有返回任何东西。

`comp_date`是包含时间戳的列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:30:38.427

您只需将其包装起来，[`FROM_UNIXTIME()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)首先将其转换为 MySQL`DATETIME`所需的`MONTHNAME()`

```
AND MONTHNAME(FROM_UNIXTIME(comp_date)) = '$month' 
```

如果你在这个项目中足够早地改变方向，我建议将值存储为适当的`DATETIME`类型，而不是 int 值 Unix 时间戳。MySQL 能够更好地本地处理日期类型，而不必一直转换输入和输出`UNIX_TIMESTMAP(), FROM_UNIXTIME()`。

`$month`如果您的值源自用户输入，我们假设您的值已正确转义。否则，请考虑切换到支持准备好的语句（如 MySQLi 或 PDO）的 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T14:30:44.887

您需要先使用将其转换为日期`FROM_UNIXTIME`

```
MONTHNAME(FROM_UNIXTIME(comp_date)) = '$month' 
```

*   [FROM_UNIXTIME()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)

作为旁注，`SQL Injection`如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用 PreparedStatements，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# bash - tail -f into grep into cut 不能正常工作

> ID：14360640
> 
> 赞同：19
> 
> 时间：2013-01-16T14:29:03.743
> 
> 标签：bash, shell, grep, tail, cut

我正在尝试构建一个 shell 脚本来监视一些日志文件。我正在使用这样的命令：

```
tail -f /var/somelog | grep --line-buffered " some test and p l a c e h o l d e r" | cut -f 3,4,14 -d " " 
```

日志文件如下：

```
some test and p l a c e h o l d e r 3
some test and p l a c e h o l d e r 4
some test and p l a c e h o l d e r 5
some test and p l a c e h o l d e r 6 
```

等等..我的问题是命令的输出不显示最后一行

```
some test and p l a c e h o l d e r 6 
```

直到线

```
some test and p l a c e h o l d e r 7 
```

被添加到日志中。

我希望我能说清楚我的问题。谁能帮我解决这个问题？谢谢 ：）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-16T15:40:31.910

这个问题几乎肯定与 grep 和 cut 如何缓冲它们的输出有关。这是一个可以解决问题的技巧，尽管我确信有更漂亮的方法可以做到：

```
tail -f /var/somelog | while read line; do echo "$line" | grep "some test and p l a c e h o l d e r" | cut -f 3,4,14 -d " "; done 
```

（不要忘记`; done`命令末尾的）

或者，因为`gawk`不缓冲它的输出，您可以使用它来代替，`cut`以避免繁琐的 while 循环：

```
tail -f log | grep --line-buffered "some test and p l a c e h o l d e r" | gawk '{print $3,$4,$14}' 
```

查看[http://www.pixelbeat.org/programming/stdio_buffering/](http://www.pixelbeat.org/programming/stdio_buffering/)了解有关缓冲问题的更多信息。

# java - TextView 的 Android 自定义属性

> ID：14360645
> 
> 赞同：3
> 
> 时间：2013-01-16T14:29:20.323
> 
> 标签：java, android, attributes

> **可能重复：**
> [如何在 Android 中读取自定义属性](https://stackoverflow.com/questions/14339333/how-to-read-custom-attributes-in-android)

最近我读到了自定义属性。我想向 TextView 添加自定义属性。

到目前为止，我有：

attr 文件：

```
<resources>
    <attr name="binding" format="string" />
    <declare-styleable name="TextView">
        <attr name="binding" />
    </declare-styleable> 
```

布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
     xmlns:custom="http://schemas.android.com/apk/res/de.innosoft.android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

        <TextView
            custom:binding="test"/> 
```

给定一个 TextView

```
TextView tv = ... 
```

那么我将如何获得该属性的值（即“测试”）？我阅读了有关 gainStyledAttributes 的信息，但不知道如何在这里使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T14:46:32.427

确切地说，您可以像这样扩展您的文本视图

```
 public class CustomTV extends TextView {

 public final String YOURATTRS;

 public CustomTV(Context context, AttributeSet attrs) {
    super(context, attrs);
            TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.CustomTV);
    YOURATTRS = ta.getString(R.styleable.CustomTV_binding);
    ta.recycle();

 // use your attrs or not
 } 
```

和 attrs.xml ：

```
<declare-styleable name="CustomTV">
     <attr name="binding" format="string"/>
</declare-styleable> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T14:34:02.053

据我所知，您有两种选择：

*   创建您自己的视图，该视图扩展`TextView`并具有采用`AttributeSet`. 然后您可以在此构造函数中获取自定义属性。查看本教程：[创建视图类](http://developer.android.com/training/custom-views/create-view.html)。
*   在您处理自定义属性的地方实现自己的[LayoutInfalter.Factory 。](http://developer.android.com/training/custom-views/create-view.html)

最好检查一下这个问题：[How to read custom attributes in Android](https://stackoverflow.com/questions/14339333/how-to-read-custom-attributes-in-android)几乎是一样的。

# sql-server-2008 - 在vb.net中将字符串变量插入sql字符串

> ID：14360646
> 
> 赞同：1
> 
> 时间：2013-01-16T14:29:24.853
> 
> 标签：sql-server-2008, vb.net-2010

我很难将 WONum 插入到我的 sql 字符串中。我尝试在 WONum 周围使用 ' 和 double ''。有人还建议 # 和 [] 围绕它，但到目前为止没有任何效果。

我不断收到以下错误：“1577”附近的语法不正确

WONum 值在运行时实际上是 WO-1577，但是当 DA.fill 被执行时，我得到了那个错误。我开始认为破折号在 sql 中做了一些我不知道的事情。任何帮助都会有所帮助，因为我必须在我的应用程序中执行更多类似的功能。

```
Public Function GetTechTimes(ByVal WONum As String)

    Dim strSQL As String = "Select customer_name, workorder_work_to_be_performed, workorder_work_performed, workorder_notes, workorder_warranty_work, workorder_open_date, workorder_status,workorder_completion_date, wo_tech_name, wo_tech_time, wo_parts_description from Customers, workorders, WorkOrder_Technicians, WorkOrder_Parts Where(customer_id = workorder_customer And wo_tech_wo_id = workorder_id And wo_parts_wo_id = workorder_id And workorder_number = " & WONum & ""
    Dim DA As New SqlDataAdapter(strSQL, Conn)
    Dim DS As New DataSet
    DA.Fill(DS, "TechTimes")
    Return DS
End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T14:40:22.193

使用[`Sql-Parameters`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)！这将避免转换或其他问题 - 更重要的是 - 防止[**SQL 注入攻击**](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)。

```
Public Function GetTechTimes(ByVal WONum As String) As DataSet
    Dim strSQL As String = "SELECT customer_name, " & Environment.NewLine & _
    "workorder_work_to_be_performed," & Environment.NewLine & _
    "workorder_work_performed, " & Environment.NewLine & _
    "workorder_notes, " & Environment.NewLine & _
    "workorder_warranty_work, " & Environment.NewLine & _
    "workorder_open_date, " & Environment.NewLine & _
    "workorder_status, " & Environment.NewLine & _
    "workorder_completion_date," & Environment.NewLine & _
    "wo_tech_name, " & Environment.NewLine & _
    "wo_tech_time, " & Environment.NewLine & _
    "wo_parts_description" & Environment.NewLine & _
    "FROM(customers," & Environment.NewLine & _
    "       workorders," & Environment.NewLine & _
    "       workorder_technicians," & Environment.NewLine & _
    "       workorder_parts)" & Environment.NewLine & _
    "WHERE customer_id = workorder_customer " & Environment.NewLine & _
    "AND wo_tech_wo_id = workorder_id " & Environment.NewLine & _
    "AND wo_parts_wo_id = workorder_id " & Environment.NewLine & _
    "AND workorder_number = @workorder_number "

    Using con = New SqlConnection(YourConnectionString)
        Using da = New SqlDataAdapter(strSQL, con)
            da.SelectCommand.Parameters.AddWithValue("@workorder_number", WONum)
            Dim DS As New DataSet
            da.Fill(DS)
            Return DS
        End Using
    End Using
End Function 
```

请注意，我还使用`Using`-statements 来确保即使在出现异常的情况下也能处理所有内容。

顺便说一下，你的例外的原因：你在这里有一个左大括号：`Where(customer_id`它从来没有关闭过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:37:46.553

只要`workorder_number`是一个字符串，那么您只需要在 WONum 周围加上单引号 ' 即可。

您不需要# 或方括号。

如果它不适用于单引号，请确保您已正确识别/隔离您的问题。从你的 sql 的末尾删除`And workorder_number = " & WONum & ""`，看看它是否在没有它的情况下工作。如果不是，那么您的问题不在 WONum 中，而是在字符串的前面。

# ios - 定义和计算单位点的Apples定义

> ID：14360647
> 
> 赞同：0
> 
> 时间：2013-01-16T14:29:25.753
> 
> 标签：ios

Apple 在[用户界面指南](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/mobilehig/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW20)中写道，可点击元素至少应为 44 x 44 点。他们提供了计算器应用程序的示例以供参考。当我测量可点击按钮时，我得到了 10 毫米/38 像素的高度。使用我在网上找到的工具，我将其转换为大约 29 个附言点。

我的问题是苹果的 44 分是什么意思？如何正确转换它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T21:39:44.597

Apple 对“point”的使用与印刷点不同。它是一个抽象单位，与像素没有固定的相关性，也没有任何物理测量（例如毫米）。

第一部分很容易看到；视网膜 iPhone 上的一个点宽度覆盖两个像素，是非视网膜 iPhone 上的两倍。

iPad Mini 使第一个陈述的第二部分非常清楚。从 iOS 开发人员的角度来看，iPad 2 上的 44 点与 mini 上的测量值相同。但是对于用户来说，它们代表了非常不同的物理（毫米）尺寸。

[在他们的绘图指南](http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GraphicsDrawingOverview/GraphicsDrawingOverview.html)中的 Points vs Pixels 下写了更多内容。

HIG 规定与人类不对应的尺寸似乎有点奇怪。在实践中，对于 UX 设计师来说，你的近似值可能很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T14:31:18.340

一个点是 1/72 英寸，所以 44 个点是 0.6 英寸或 1.5 厘米。我不认为苹果可以自己改变这个定义。

# c# - 如何“键入”我的应用程序，通过页面保持这种类型

> ID：14360651
> 
> 赞同：1
> 
> 时间：2013-01-16T14:29:52.373
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我正在为一家销售一些产品的公司开发应用程序，该应用程序负责管理产品更改和退货。更改和返回有不同的规则，但“屏幕/视图”都是相同的。此应用程序必须为每种类型提供不同的 URL。例如：

www.company.com/change

www.company.com/return

应用程序也需要有一个`Login`页面。

当我访问 www.company.com/CHANGE 时，用户被重定向到登录页面，并且在此页面中有一个带有`change`文本的标签。

当我访问 www.company.com/RETURN 时，用户被重定向到登录页面，并且在此页面中有一个带有`return`文本的标签。

问题是：如何通过页面持久化这种类型，提醒如果用户在应用和注销的认证区域内，他必须返回正确的登录页面，并带有正确的标签文本。

我试图将类型存储在 Session 中，但是如果会话结束，就不可能知道我必须如何将参数传递给登录页面（更改或返回）

我也尝试过，创建一个新的路由`Global.asax`来保持类型，就像这样：

```
routes.MapRoute(
    "qwert", // Route name
    "{type}/{controller}/{action}/{id}", // URL with parameters
    new { controller = "Login", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

但是这个网址例如：“xxx/home/list”匹配，我想要那个

```
return/abc/abc 
```

和

```
change/abc/abc 
```

匹配。

在流程结束时，我将使用这种类型在数据库中保留一条记录。

我该如何解决这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:32:59.267

问题需要澄清一下，但如果我理解正确，只需处理包含 {type} 参数的所有链接和 URL。

我做了一个小测试，得到的是：

在**global.asax**中：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
      "qwert", // Route name
      "{type}/{controller}/{action}/{id}", // URL with parameters
      new { controller = "Login", action = "Index", type = "", id = UrlParameter.Optional } // Parameter defaults
    );
} 
```

在**LoginController**中，您可以获得如下类型：

```
public ActionResult Index(string type)
{
    return View();
} 
```

您可以为会话的到期创建一个自定义属性，如此处所述，并将用户返回到相应的页面 www.company.com/{type [}](https://stackoverflow.com/a/5906294/821054)

# jquery - FadeIn div 不工作

> ID：14360654
> 
> 赞同：0
> 
> 时间：2013-01-16T14:30:02.497
> 
> 标签：jquery, asp.net-mvc-3, twitter-bootstrap

我有一个代码`_layout.cshtml`。

```
@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">
        @TempData["SuccessMessage"];
    </div>
} 
```

在 javascript 中

```
$(function() {
    $(".alert alert-success").fadeOut("slow");
}); 
```

但是 div 并没有淡出。请提出我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:31:39.103

[jQuery Docs - Class Selectors](http://api.jquery.com/class-selector/)有一个非常相关的示例（查找具有“myclass”和“otherclass”类的元素。）

尝试改变：

```
$(function () {
  $(".alert alert-success").fadeOut("slow");
}); 
```

到：

```
$(function () {
  $(".alert.alert-success").fadeOut("slow");
}); 
```

或者你可以试试[`.filter()`](http://api.jquery.com/filter/)：

```
$(".alert").filter(".alert-success") 
```

但是，此方法会稍微慢一些，因为您首先编译一组所有匹配`.alert`元素，然后过滤它们以编译第二组或包含`.alert-success`.

[在此处](https://stackoverflow.com/questions/1041344/jquery-multiple-class-selector)的类似帖子中查找更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:32:13.860

这是两个班 `alter`，`alert-success`所以你需要做

```
$(".alert.alert-success").fadeOut("slow"); 
```

或者

```
$(".alert-success").fadeOut("slow"); 
```

或者

```
$(".alert").fadeOut("slow"); 
```

# ios - 具有最大行长和行数的 UITextView 自动换行

> ID：14360655
> 
> 赞同：0
> 
> 时间：2013-01-16T14:30:02.513
> 
> 标签：ios, objective-c, cocoa-touch

对于我正在编写的 iOS 应用程序，我使用的是 UITextView，用户可以在其中插入有限的文本。

对于 textview 有 2 个限制：

1.  行不能超过 30 个字符
2.  UITextView 中只能有 20 行文本。

所以简而言之，最多是 20 行，每行 30 个字符。

当用户在 UITextView 中键入一些文本并且当前句子是 30 个字符时，我希望它自动插入一个新行`\n`（在该行的最后一个单词之前）并强制最后一个单词和光标到下面的行。

当用户有 20 行 30 个字符（或者更简单地说：20 行，最后一行 30 个字符）时，我希望输入被阻止。

现在，其中大部分都相当“简单”，但我的代码没有考虑边界情况，比如在前面的行中插入文本。

我查看了来自 Apple 的文档，但我找不到一种方法来实际强制在 UITextView 上进行这种自动换行。

我的尝试是在`shouldChangeTextInRange`委托方法中处理所有这些（使代码更加冗长，因此更易于阅读）。

```
#define MAX_LENGTH_LINE 30
#define MAX_LENGTH_ROWS 20

- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    // Check for backspaces, they should always be allowed?
    if ([text length] == 0 && ![text isEqualToString:@"\n"])
        return YES;

    NSArray* lines = [textView.text componentsSeparatedByString:@"\n"];

    // Check if there are a maximum of lines and the last line is already maxed out
    NSString* lastLine = [lines objectAtIndex:[lines count] - 1];

    if (([lines count] == MAX_LENGTH_ROWS) &&
        (lastLine != nil) &&
        ([lastLine length] > MAX_LENGTH_LINE) &&
        ([text length] > 0))
        return NO;

    if ((lastLine != nil) &&
        ([lastLine length] > MAX_LENGTH_LINE))
    {
        NSRange range = [textView.text rangeOfString:@" " options:NSBackwardsSearch];
        NSRange breakRange = [textView.text rangeOfString:@"\n" options:NSBackwardsSearch];

        if (breakRange.location == NSNotFound)
            breakRange = NSMakeRange(0, 1);

        if (range.location == NSNotFound) {
            range = NSMakeRange(0, 1);
        }

        if (range.location > breakRange.location)
        {
            textView.text = [textView.text stringByReplacingCharactersInRange:NSMakeRange(range.location, 1) withString:@"\n"];
        }
        else
        {
            textView.text = [textView.text stringByAppendingString:@"\n"];
        }
    }

    if ([text isEqualToString:@"\n"])
    {
        if ([lines count] == MAX_LENGTH_ROWS)
            return NO;
        else {
            return YES;
        }
        NSRange range = NSMakeRange(textView.text.length - 1, 1);
        [textView scrollRangeToVisible:range];
    }

    return YES;
} 
```

与此同时，我已经有一段时间了，现在我失去了它。任何人都可以提供一些指针来将 UITextView 限制为我想要的 20 行/30 个字符的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:27:02.003

这可能与您的总体目标背道而驰，但我脑海中最简单的答案是每次用户添加字符时都重新解析字符串。那么在哪里添加角色就无关紧要了。而不是在 shouldChangeTextInRange: 中执行所有这些操作：在 textViewDidChange: 中执行。你需要成为一个 UITextViewDelegate 并且你需要一个 NSString 类来保存最后一次成功的用户文本更新，以防你的用户尝试添加超出允许限制的字符。

像这样的东西：

```
-(void)textViewDidChange:(UITextView *)textView
{
    //Get the textview without any new line characters
    NSMutableString *temporaryString = [NSMutableString stringWithString:[textView.text stringByReplacingOccurrencesOfString:@"\n" withString:@" "]];
    bool updatePossible = true;

    int i = 0, numberOfLinesSoFar = 0;
    while(i + 30 < [temporaryString length])
    {
        //Go 30 characters in and start the reverse search for a word separation
        i += 30;
        int j = i;
        //Get the location of the final word separation in the current line
        while(j >= i && [temporaryString characterAtIndex:j] != ' ')
        {
            j--;
        }

        //This means we found a word separation
        if(j > i)
        {
            i = j;
            [temporaryString replaceCharactersInRange:NSMakeRange(i,1) withString:@"\n"];
        }
        //We didn't find a word separation
        else
        {
            //Here we will just have to break the line at 30.
            [temporaryString insertString:@"\n" atIndex:i];
        }

        numberOfLinesSoFar++;

        //Check if we just wrote line 20 and still have characters to go.
        if(numberOfLinesSoFar > 19 && i < [temporaryString length])
        {
            //Revert user change to the last successful character addition
            textView.text = lastSuccessfulViewString;
            updatePossible = false;
            break;
        }
    }

    if(updatePossible)
    {
        //If we are within the limits then update the global string (for undoing character additions) and the textview
        textView.text = temporaryString;
        lastSuccessfulViewString = temporaryString;
    }
} 
```

现在这将不允许用户输入他们自己的换行符，但这可以用几个 if then 语句来处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:11:05.760

经过一番摆弄，创建了一个包含 UITextView 作为子视图的控件。

我让这个控件处理文本换行并将委托方法转发到注册为委托的视图。

它可能对其他人有所帮助，因此我在此处发布了指向 BitBucket 的链接。

PS。它仍然非常冗长，但这是为了展示我如何为我的案例解决这个问题。

[https://bitbucket.org/depl0y/sbframework/src/master/SBFramework/Views/SBTextView?at=master](https://bitbucket.org/depl0y/sbframework/src/master/SBFramework/Views/SBTextView?at=master)

# android - android中的广告刷新

> ID：14360658
> 
> 赞同：1
> 
> 时间：2013-01-16T14:30:05.697
> 
> 标签：android, admob, ads

在我的 android 应用中，我正在尝试添加广告。我对刷新广告有疑问。

是否需要手动刷新广告才能获得新广告？如果我手动刷新广告会有什么好处？

我尝试 `adView.loadAd(new AdRequest());`在一段时间内调用函数，但每次都收到相同的广告。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T14:39:43.913

无法保证您会收到新广告，但您不应该真的在应用内刷新广告。相反，在 admob 界面中，有一个用于自动刷新广告的选项。

如果您登录到您的 admob 帐户，请转到站点和应用程序 > 在您的应用程序名称下选择管理设置（将鼠标悬停在应用程序名称周围）。然后单击应用程序设置选项卡。然后，您应该会看到一个自动刷新选项，该选项设置为在客户端代码中使用，我相信这是您在做什么，或者没有，或者自动刷新，您可以提供刷新频率的间隔，而不必这样做从代码。

# magento - 在 Magento 中按商店明智地获取产品价格和描述

> ID：14360667
> 
> 赞同：3
> 
> 时间：2013-01-16T14:30:18.877
> 
> 标签：magento

我正在尝试获取magento中不同商店的产品价格和描述，我可以通过以下方式实现：-

```
foreach ($productObj->getStoreIds() as $_storeId) {
                $tempStoreObj = new Mage_Core_Model_Store();
                $tempStoreObj->load($_storeId);

                $tempProductObj = new Mage_Catalog_Model_Product();
                $tempProductObj->setStoreId($_storeId);
                $tempProductObj->load($productObj->getId());

                $tempPriceArray[] = array(
                    'websiteId' => $tempStoreObj->getWebsiteId(),
                    'price' => $tempProductObj->getPrice(),
                    'baseCurrency' => $tempStoreObj->getBaseCurrencyCode(),
                );
                $tempDescArray[]=array(
                'descprition' => $tempProductObj->getData('description'),
                'shortDescription' => $tempProductObj->getData('short_description'),
                );

            } 
```

现在在上面的代码中，我首先获取特定产品的商店，然后加载商店，然后再次为产品创建一个对象并加载 wrt **product id**和 **store id**，这样我就完成了所需的任务。

现在我的问题从这里开始，当有很多产品和许多商店出现性能问题时，加载过程会变得很慢。

有没有其他方法可以达到同样的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:40:59.430

当您想从多个产品中获取此信息时，您可以做的一件事是使用产品集合来加快速度，因此只有一个数据库查询可以获取所有产品的每个商店的信息。

然后看起来像这样：

```
$storeId = 1; // Current Store you want to look at
$productIds = array(10,15,26); // Enter your Ids
$product    = Mage::getModel('catalog/product');
$products   = $product->getCollection()
              ->addStoreFilter($storeId)
              ->addAttributeToFilter('entity_id', array('in' => $productIds))
              ->addAttributeToSelect('price')
              ->addAttributeToSelect('description'); 
```

然后遍历产品：

```
$currPrices = array();
foreach ($products as $prod) {
   $currPrices[$prod->getId()] = $prod->getPrice();
} 
```

为了明确几家商店：

```
$currPrices = array();
$currDescriptions = array();
foreach ($productObj->getStoreIds() as $_storeId) {
    $productIds = array(10,15,26); // Enter your Ids
    $product    = Mage::getModel('catalog/product');
    $products   = $product->getCollection()
                  ->addStoreFilter($_storeId)
                  ->addAttributeToFilter('entity_id', array('in' => $productIds))
                  ->addAttributeToSelect('price')
                  ->addAttributeToSelect('description');

    foreach ($products as $prod) {
       $currPrices[$_storeId][$prod->getId()] = $prod->getPrice();
       $currDescriptions[$_storeId][$prod->getId()] = $prod->getDescription();
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-16T14:45:50.970

最快的方法是直接查询（当然，包装到 Zend_Db_Select）来存储和产品表。

base_currency 可以从 core_config_data 获得

产品价格可在 catalog_category_product_index 中找到

catalog_product_entity_text 中的描述

看向

```
Mage_Reports_Model_Resource_Product_Index_Abstract
Mage_Reports_Model_Resource_Report_Product_Viewed_Collection
Mage_Reports_Model_Resource_Report_Product_Viewed
Mage_Reports_Model_Resource_Quote_Collection 
```

Magento 使用 Zend_Db_Select，甚至获取适配器的方法，而不是集合，以防查询速度加快。

# css - 访问时 CSS div 边框变为黑色

> ID：14360670
> 
> 赞同：2
> 
> 时间：2013-01-16T14:30:35.003
> 
> 标签：css

我有一个菜单，其中每个链接都是一个**div**框。这个 div 框有一个灰色的底部边框，但是，当访问链接时，它会变成黑色。我只是想不通为什么。

在下图中，我单击了*Rediger 配置文件*和*Log af*链接。

![在此处输入图像描述](../Images/4e3a158d6f78f244ea85f5eaed9b02ec.png)

JSFiddle：http: [//jsfiddle.net/LpGbT/](http://jsfiddle.net/LpGbT/)

**HTML**

```
 <div id="design_sidebar">
            <div id="design_sidebar_head">
                Patrick Reck
            </div>

            <a href="#"><div class="design_sidebar_menu_item">Besøgende</div></a>
            <a href="#"><div class="design_sidebar_menu_item">Mine favoritter</div></a>
            <a href="<?php echo site_url('profile/editProfile');?>"><div class="design_sidebar_menu_item">Rediger profil</div></a>
            <a href="<?php echo site_url('user/logout');?>"><div class="design_sidebar_menu_item">Log af</div></a>
        </div> 
```

**CSS**

```
a {
    text-decoration: none;
}

#design_sidebar {
    width: 200px;
    float: left;

    border: 1px solid #d6d6d6;
    -moz-border-radius: 2px;
    border-radius: 2px;

    background-color: white;
}

#design_sidebar_head {
    width: 165px;
    height: 30px;

    font-family: Segoe; 
    font-size: 14px;
    font-weight: bold;
    color: #333333;

    padding-top: 10px;
    padding-left: 35px;
    border-bottom: 1px solid #d6d6d6;

    background-image: url('../img/icons/user.png');
    background-repeat: no-repeat;
    background-position: 10px 11px;
    background-color: #f7f7f7;
}

.design_sidebar_menu_item {

    padding: 5px;
    padding-left: 10px;

    font-size: 14px;
    color: #333333;

    border-bottom: 1px solid #d6d6d6;
}

.design_sidebar_menu_item:hover {
    color: white;

    background-color: #a6242f;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:48:59.027

您可以使用`:visited`后缀定义 div 选择器的复制版本，以便为访问的对象设置新颜色。

Aldo div 类的前缀是点 ( `.`) 而不是尖 ( `#`) 字符。只是提醒。:)

```
.design_sidebar_menu_item:visited {
  border-color: <your_color>;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T14:49:51.290

如果它不损害您的设计等。我建议这样做：

**HTML：**

```
<div id="design_sidebar">
<div id="design_sidebar_head">
Patrick Reck
</div>
<a href="#">Patrick Reck</a>
<a href="#">Besøgende</a>
<a href="#">Mine favoritter</a> 
<a href="<?php echo site_url('profile/editProfile');?>">Rediger profil</a>
<a href="<?php echo site_url('user/logout');?>">Log af</a>
</div> 
```

**CSS：**

```
div#design_sidebar a {
text-decoration: none;
padding: 5px;
padding-left: 10px;
font-size: 14px;
color: #333333;
border-bottom: 1px solid #d6d6d6;
display: block;
}

div#design_sidebar a:hover {
color: white;
background-color: #a6242f;
}

#design_sidebar {
width: 200px;
float: left;
border: 1px solid #d6d6d6;
-moz-border-radius: 2px;
border-radius: 2px;
background-color: white;
}

#design_sidebar_head {
width: 165px;
height: 30px;
font-family: Segoe;
font-size: 14px;
font-weight: bold;
color: #333333;
padding-top: 10px;
padding-left: 35px;
border-bottom: 1px solid #d6d6d6;
background-image: url('../img/icons/user.png');
background-repeat: no-repeat;
background-position: 10px 11px;
background-color: #f7f7f7;
} 
```

编辑：

如何添加：

```
a {
    text-decoration: none;
    display: block;
    border-bottom: 1px solid #d6d6d6;
} 
```

并且`border-bottom: 1px solid #d6d6d6;`从`.design_sidebar_menu_item {...}` 其他人中删除将需要他们周围的链接才能正常工作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-16T14:45:13.720

它没有..我将边框底部颜色更改为“绿色”。现在你有一个清晰的看法。

检查 jsFiddle： [检查一下](http://jsfiddle.net/LpGbT/13/)

```
.design_sidebar_menu_item {
  padding: 5px;
  padding-left: 10px;
  font-size: 14px;
  color: #333333;
  border-bottom: 1px solid #00FF00;
} 
```

# node.js - node.js 等待响应

> ID：14360674
> 
> 赞同：8
> 
> 时间：2013-01-16T14:30:40.603
> 
> 标签：node.js

我对节点和 nob 阻塞 IO 的了解非常有限，所以如果我的问题太天真，请原谅我。

为了在响应正文中返回所需的信息，我需要

*   调用 3rd 方 API
*   等待回复
*   添加一些修改并使用我从 API 获得的信息返回 JSON 响应。

我的问题是..我怎么能等待回复？或者只有在我收到来自 API 的响应时才可以将信息发送到客户端（据我所知，在这种情况下连接应该是双向的，这意味着我将无法使用 HTTP 这样做）。

还有一个问题。如果一个请求等待来自 API 的响应，这是否意味着其他用户也将被迫等待（因为节点是单线程的），直到我将线程/进程的数量从 1 增加到 N？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T14:40:29.933

您将回调传递给调用服务的函数。如果服务是数据库，例如：

```
db.connect(host, callback); 
```

在代码的其他地方：

```
var callback = function(err, dbObject) {
    // The connection was made, it's safe to handle the code here
    console.log(dbObject.status);
    res.json(jsonObject, 200)
}; 
```

或者你可以使用匿名函数，所以：

```
db.connect(host, function(err, dbObject) {
    // The connection was made, it's safe to handle the code here
    console.log(dbObject.status);
    res.json(jsonObject, 200)
}); 
```

在调用和回调之间，节点自由地处理其他客户端/连接，“非阻塞”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T14:38:58.223

这种情况正是节点旨在解决的问题。收到客户端的请求后，您可以发出 http 请求，该请求应带有回调参数。这将在请求完成时调用您的回调函数，但节点可以在您等待响应时执行其他工作（包括为其他客户端提供服务）。请求完成后，您可以让代码将响应返回给仍在等待的客户端。

节点进程使用的内存和 CPU 量将随着更多客户端连接到它而增加，但只需要一个进程来处理许多同时的客户端。

Node 专注于异步执行慢速 I/O，以便应用程序代码可以启动一个任务，然后在 I/O 完成后让代码再次开始执行。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-16T16:36:01.087

一个典型的例子可能会很清楚。我们调用 FB API。当我们收到响应时，我们对其进行修改，然后将 JSON 发送给用户。

```
var express = require('express');
var fb = require('facebook-js');

app.get('/user', function(req, res){
    fb.apiCall('GET', '/me/', {access_token: access_token}, function(error, response, body){ // access FB API
    // when FB responds this part of the code will execute
        if (error){
            throw new Error('Error getting user information');
        }
        body.platform = 'Facebook' // modify the Facebook response, available as JSON in body
        res.json(body); // send the response to client
    });
}); 
```

# visual-c++ - MSOXMLMF.DLL 无法找到或打开 PDB 文件

> ID：14360676
> 
> 赞同：0
> 
> 时间：2013-01-16T14:30:46.610
> 
> 标签：visual-c++, com, visual-studio-2012, migration

我已将一个项目从 Visual Studio 2008 迁移到 Visual Studio 2012。迁移后，我无法运行该应用程序，因为它 `C:\Program Files\Common Files\microsoft shared\OFFICE14\MSOXMLMF.DLL. Cannot find or open the PDB file.` 在输出窗口上抛出消息并且我的应用程序正在中止。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:05:51.820

使用 WinDbg 运行您的应用程序，发出“.reload”命令，如下所示：

```
.reload /f SRV*D:\MySymbols*http://msdl.microsoft.com/download/symbols 
```

** 之间的部分是系统上的路径。该命令将为所有加载的模块下载匹配的符号文件。

# r - 欧洲插值地图

> ID：14360683
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:30:57.693
> 
> 标签：r, interpolation

我有一个关于使用 PC 轴构建插值地图的问题。我已经使用了该包`maps`并`akima`用于绘制地图和插值。这是我的代码：

```
map<-read.table("RACES_GEOREF.txt", row.names=1)
x<-as.numeric(map[,1])
y<-as.numeric(map[,2])
z<-as.numeric(bca.res$li[,1])
x0<-seq(min(map[,1]), max(map[,1]), le=500)
y0<-seq(min(map[,2]), max(map[,2]),le=500)
z.hat<-interp(x, y, z, xo=x0, yo=y0, linear=FALSE, extrap=TRUE)
myGrid<-expand.grid(x0,y0)
temp<-map.where(database="world", x=myGrid[,1], y=myGrid[,2])
toKeep<-grep("France",temp, ignore.case=TRUE)
toRemove<-setdiff(1:length(z.hat$z), toKeep)
z.hat$z[toRemove]<-NA
image(z.hat)
map(add=TRUE, lwd=3)
contour(temp, add=TRUE)
dev.off() 
```

在这一`grep`部分中，我只能为法国绘制插值地图，而我想为法国、德国、英国、瑞典、意大利和摩洛哥绘制插值图。如何将这些国家添加到法国？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:59:04.863

您可以尝试在正则表达式中使用 OR 运算符：

```
toKeep<-grep("France|Germany|UK|Sweden|Italy|Morocco", temp, ignore.case=TRUE) 
```

如果我在这方面是正确的，那么您真的应该更改问题的标题，因为问题似乎与插值过程无关，而是与命名区域的选择有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:37:18.360

我相信使用 grep 您将需要执行以下操作：

```
toKeep<-c(grep("France",temp, ignore.case=TRUE),grep("Germany",temp, ignore.case=TRUE),grep("UK",temp, ignore.case=TRUE),grep("Sweden",temp, ignore.case=TRUE),grep("Italy",temp, ignore.case=TRUE),grep("Morocco",temp, ignore.case=TRUE)) 
```

因为 grep 只返回名称匹配的向量中的位置。

# c++ - C++ 正则表达式搜索多行注释（在 /* */ 之间）

> ID：14360686
> 
> 赞同：2
> 
> 时间：2013-01-16T14:31:02.357
> 
> 标签：c++, regex

我正在尝试实现简单的案例（基本上可以在两个标签之间找到文本，无论它们是什么）。我想获得线路

/* 我的评论 1 */

/* 我的评论 2 */

/* 我的评论 3 */

作为输出。看来我需要将捕获组限制为 1？因为在字符串上`Hello /* my comment 1 */ world`我得到了我想要的 - res[0] 包含 /* 我的评论 1 */

```
#include <iostream>
#include <string>
#include <regex>

int main(int argc, const char * argv[])
{
    std::string str = "Hello /* my comment 1 */ world /* my comment 2 */ of /* my comment 3 */ cpp";

    std::cmatch res;
    std::regex rx("/\\*(.*)\\*/");

    std::regex_search(str.c_str(), res, rx);

    for (int i = 0; i < sizeof(res) / sizeof(res[0]); i++) {
        std::cout << res[i] << std::endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T14:34:31.977

通过将量词转换为其[非贪婪](http://www.regular-expressions.info/repeat.html#greedy)版本，使正则表达式仅匹配*第一次*出现的。这是通过在其后添加一个问号来完成的：`*/``*`

```
std::regex rx("/\\*(.*?)\\*/"); 
```

# struct - JNA - 使用结构数组作为 byref 参数

> ID：14360689
> 
> 赞同：1
> 
> 时间：2013-01-16T14:31:07.020
> 
> 标签：struct, arguments, pass-by-reference, jna

我知道这里的一些帖子涵盖了这个问题的一部分，我查看了它们并测试了一些但没有运气。我有这个本机方法签名，它应该用结果填充提供的**CBadgeData 结构数组**：

```
int elc_GetBadges(int nHandle, char* cErr, int* nRecCount, CBadgeData** arr) 
```

CBadgeData结构实现如下：

```
package test.elcprog;

import java.util.Arrays;
import java.util.List;
import com.sun.jna.Pointer;
import com.sun.jna.Structure;

public class CBadgeData extends Structure{

    public static class ByReference extends CBadgeData implements Structure.ByReference { }

    public int nBadgeID, nTrigger, nExtraData;
    public String cName;

    public CBadgeData(Pointer pointer){
        super(pointer);
    }

    public CBadgeData(){ }

    public String ToString() {
        return nBadgeID + "," + nTrigger + "," + nExtraData + "," + cName;
    }

    @Override
    protected List getFieldOrder() {
        String[] s = new String[]{"nBadgeID","nTrigger","nExtraData","cName"};
        return Arrays.asList(s);
    }
} 
```

我最后一次尝试制作这个参数并调用该方法如下所示：

```
CBadgeData.ByReference[] badges = new CBadgeData.ByReference[max_items];
new CBadgeData.ByReference().toArray(badges);
int ret = inst.elc_GetBadges(handle, err, recCount, badges); 
```

它因分段错误而失败。

我的问题是这里应该提供什么 Java 类型作为调用中的 native 的`CBadgeData**`参数`elc_GetBadges`？

**编辑-1-**

自己填充数组（有或没有终止空指针）不起作用并导致进一步的 Seg 崩溃。然后我使用 Pointer[] arg 作为技术建议：

```
Pointer[] pointers = new Pointer[max_items];
for(int i=0; i<max_items; i++){
    pointers[i] = new CBadgeData.ByReference().getPointer();
}
int ret = inst.elc_GetBadges(handle, err, recCount, pointers); 
```

这没有导致错误，但似乎没有对返回的结构进行任何更改，在这种情况下应该包含 4 个项目：

```
int bid = new CBadgeData(pointers[i]).nBadgeID; // this returns null for all items 
```

在结构上使用显式 read() / write() 导致 Seg 再次崩溃（在读取时）：知道我在这里还缺少什么吗？

**编辑-2-**

有趣的是 -`Memory.get`在调用本机方法后直接使用，得到正确的结果：

```
Memory m= (Memory)pointers[0];
System.out.println("1st int: "+m.getInt(0)); // this gets 24289 which is 5ee1
System.out.println("2nd int: "+m.getInt(4)); // this gets 3
System.out.println("3rd int: "+m.getInt(8)); // this gets 255
System.out.println("String: "+m.getString(12)); // this gets "Badge[5EE1]" as supposed 
```

但`read()`仍然崩溃。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:02:41.023

我推断 CBadgeData** 输入旨在成为指向 CBadgeData 的指针数组。

因此，Structure.ByReference 标记是正确的。

`Structure.toArray()`在这里可能*不合适*，或者至少没有必要（它在内存中分配一个连续的结构块）。您可以使用 CBadgeData.ByReference 实例填充您的数组。

也许您的被调用者期望在数组末尾有一个 NULL 指针？我没有看到被调用者的数组长度的另一个指标。

```
CBadgeData.ByReference[] badges = new CBadgeData.ByReference[max_items+1];
for (int i=0;i < badges.length-1;i++) {
    badges[i] = new CBadgeData.ByReference();
}
badges[badges.length-1] = null; 
```

很确定这行得通。如果出于某种原因存在错误处理`Structure.ByReference[]`，我知道这`Pointer[]`是可靠的并且会做同样的事情。

**编辑**

如果您使用`Pointer[]`而不是（如果不起作用，`Structure.ByReference[]`请在项目站点发布错误），您将不得不在您的本机函数调用之前/之后手动调用，因为 JNA 不会知道需要同步的指针引用结构本机内存。但是，我敢打赌，使用时崩溃的原因仅仅是 JNA 在调用后自动调用并触发了与您在显式调用时看到的相同的错误。`Structure.ByReference[]``Structure.write/read``Structure.ByReference[]``Structure.read()`

如果您在读取时遇到段错误，则可能意味着您的结构字段未正确对齐或定义，或者（不太可能）您有无法正确读取的损坏数据。要诊断这一点，`jna.dump_memory=true`请在调用后设置并打印出您的结构，`Structure.write()`以查看结构的内容是否如您预期的那样显示。如果可能的话，在此处发布您的结构的本地和 JNA 形式也将有所帮助。

# python - 检测python中的程序

> ID：14360691
> 
> 赞同：1
> 
> 时间：2013-01-16T14:31:10.203
> 
> 标签：python, linux, wine

> **可能重复：**
> [测试 Python 中是否存在可执行文件？](https://stackoverflow.com/questions/377017/test-if-executable-exists-in-python)

是否有python函数可以让我检测计算机中是否安装了程序。我有一个运行 .exe 的程序，该部分适用于 Windows，但要在 linux 中运行它，你需要 wine，所以我需要一种方法让 python 函数检测 wine。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:15:02.023

您可以使用函数来获取在环境变量`os.get_exec_path()`中设置的目录列表。`PATH`如果您要查找的可执行文件不存在于这些目录中，则假定该程序未安装是正确的。

截断代码以确定是否安装了 Wine，然后将如下所示：

```
import os
winePath = None
for directory in os.get_exec_path():
    testWinePath = os.path.join(directory, "wine")
    if os.path.exists(testWinePath) and os.access(testWinePath, os.R_OK | os.X_OK):
        winePath = executablePath
        break 
```

如果安装了 Wine，则其可执行文件 ( `wine`) 的路径将在`winePath`变量中；如果没有找到`winePath`会`None`。该代码还检查文件是否具有正确的读取和执行权限。

从`os.get_exec_path()`Python 3.2 开始可用。在旧版本中，您可以`os.environ["PATH"].split(":")`改用。

# database - 带有大型 csv 文件的 Apache Derby 应用程序

> ID：14360696
> 
> 赞同：0
> 
> 时间：2013-01-16T14:31:22.963
> 
> 标签：database, csv, derby

我正在设计一个数据管理器，用于聚合从自主水下航行器收集的大型 CSV 文件。时间分辨率非常好，因此这些文件在长时间运行时会变得非常大。它收集了很多参数，俯仰、滚动、高度等。我正在研究为此使用嵌入式 Apache Derby 数据库。我已经看到 derby 确实可以批量导入 CSV 文件，但是导入的大小可能会有一些限制。

我的问题是，嵌入式数据库是否非常适合此应用程序？如果是这样，在为这种特定类型的数据创建表时应该考虑什么。我对数据库的经验仅限于 Web 应用程序的少量持久数据的反应性。

这是我正在处理的数据类型的示例。它们通常被拆分为多个文件以进行一次运行，每个文件大约 10,000 行，最多 80 列。

[![数据示例](../Images/30d9531fafccaa451326b93226c0605e.png)](https://i.stack.imgur.com/clG2I.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:06:54.833

我不太确定您的问题是什么，但过去我已将 CSV 文件导入 Derby，在 CSV 文件中包含超过 200,000 行，没有任何问题。

# .net - WPF UI 在 Dispatcher.Invoke 调用期间没有响应

> ID：14360698
> 
> 赞同：0
> 
> 时间：2013-01-16T14:31:25.150
> 
> 标签：.net, wpf, multithreading, dispatcher

我有这个代表：

```
private delegate void NoArgDelegate(BitmapImage image); 
```

我实例化委托并使用 Dispatcher.Invoke 运行它，如下所示：

```
var fetcher =  new NoArgDelegate(InstantiateForm);
Dispatcher.Invoke(fetcher, DispatcherPriority.Normal, imageToPassIn); 
```

我在任何方法范围之外但在我的 ViewModel 范围内有一个私有字段，在 InstantiateForm 内我实例化了对象：

```
private OmrForm _ormForm;

private void InstantiateForm(BitmapImage image)
{
    _ormForm = new OmrForm(image);
} 
```

这一切都发生在我的 ViewModel 中的一个方法中，该方法在我的 WPF 表单上的按钮的单击事件上运行。

我在构造函数中做了一些工作来计算我传入的图像类型并适当地设置坐标，这大约需要 2 秒，我希望我的 UI 在此期间能够响应，但事实并非如此。我试过使用 BeginInvoke 也无济于事。

这是怎么回事，为什么我的方法不是异步运行的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:35:44.047

在 Window 或 UserControl 内调用`Dispatcher.Invoke`将在 UI 线程上运行该代码，因为控件的 Dispatcher 设置为在 UI 线程上工作。

你想要的是启动一个后台线程。这可以使用[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)类来实现。

```
Task.Factory.StartNew(() => InstantiateForm(imageToPassIn)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:35:43.907

`Dispatcher.Invoke`将动作放入队列中以在 UI 线程上执行。如果您希望执行冗长的计算，您可能应该在工作线程中执行此操作，从而让 UI 线程可以自由地做其他事情。例如，您可以尝试`ThreadPool.QueueUserWorkItem`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:38:32.810

问题是构造一个新的`Window`仍然需要调度器来完成工作，所以如果你的构造器`Window`需要很长时间来执行，调度器仍然会等待该构造器完成，尽管之前已经调用`Invoke`过。

您想要做的是使您的构造函数非常快，然后创建一个可用于设置图像的属性，并使该属性以异步方式完成所有冗长的工作，这样 UI 线程就不会被占用。

有些人建议使用线程来调用您的方法，但是`Window`在不同的线程上创建一个新的不是一个好主意，并且还有其他含义。

# json - 从纯 html 文件创建用于翻译的 .po 文件的工具

> ID：14360703
> 
> 赞同：1
> 
> 时间：2013-01-16T14:31:43.747
> 
> 标签：json, localization, po

我正在使用[http://i18next.com/](http://i18next.com/)来翻译托管在 github gh-pages 上的静态网站。

有什么工具可以用来首先从 index.html 文件中提取并创建一个 index.po 文件，翻译人员可以在其中本地化/国际化页面，然后使用[http://pypi.python.org/之类的工具pypi/pojson](http://pypi.python.org/pypi/pojson)将此 po 文件转换为 json 以供 i18next 使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:51:25.427

POEdit 可能会解决问题。在 PHP 中，Gettext 扩展 (http://es.php.net/gettext) 会有所帮助。另外，我发现这个链接将详细说明创建 po 文件的过程：[http](http://www.wdmac.com/how-to-create-a-po-language-translation) ://www.wdmac.com/how-to-create-a-po-language-translation 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:18:15.510

您可以使用[po4a](https://po4a.org/index.php.en)从 html 和许多其他格式创建 po 文件。

# java - 加载加载库的jar库

> ID：14360704
> 
> 赞同：1
> 
> 时间：2013-01-16T14:31:51.637
> 
> 标签：java, class, jar, loading

好吧，也许它是令人费解的，无论如何......

尽管我涉足创建了一些 Minecraft mods 和 Android 应用程序，但我对 java 不是很有经验。我的问题是：我有一个 .jar，其中包含我没有太多控制权的代码（我没有源代码，尽管我确实有一些关于其中的类的信息），当这个 jar 是运行它本身从其他外部库和类加载一些代码，并整合所有内容。

我的问题是，我如何在不接触/修改 jar 的情况下制作一个运行 jar 的 java 程序，让它从其他 jar 和外部类进行整合，然后得到整合的结果（一些对象）到我自己的java程序？java安全模型中是否允许这样做？

我听说过我认为是从 jar 加载加载类的 URLclassloader。它似乎无法使它工作，我什至不确定它会起作用吗？我大致知道哪些类是 jar 中的入口点，以便运行它并使其加载外部库。但我总是遇到左右例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:35:20.307

首先，您应该确保所有 3rd 方依赖项（例如您`jar`需要的库）对您的应用程序是可见的（例如驻留在类路径和/或`-Djava.library.path`）。接下来，您应该只从您的文件中正常实例化类/调用方法，`jar`并使用返回的对象进行操作，因为它是由您的 Java 应用程序在本地创建的。`jar`文件只是一个外部库，在加载时成为应用程序的一部分。

# c++ - 何时使用 boost::optional 以及何时使用 std::unique_ptr 以实现可以返回“无”的函数？

> ID：14360706
> 
> 赞同：23
> 
> 时间：2013-01-16T14:31:56.583
> 
> 标签：c++, boost, c++11, unique-ptr, boost-optional

据我了解，有两种方法可以实现有时不返回结果的函数（例如在 ppl 列表中找到的人）。

*- 我们忽略原始 ptr 版本，与 bool 标志配对，并在未找到版本时出现异常。

```
boost::optional<Person> findPersonInList(); 
```

或者

```
std::unique_ptr<Person> findPersonInList(); 
```

那么有什么理由比另一个更喜欢一个吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-16T14:46:13.127

这取决于：您希望返回*句柄*还是*副本*。

如果你想返回一个*句柄*：

*   `Person*`
*   `boost::optional<Person&>`

都是可以接受的选择。我倾向于使用一个`Ptr<Person>`在空访问的情况下抛出的类，但这是我的偏执狂。

如果您想退回*副本*：

*   `boost::optional<Person>`对于非多态类
*   `std::unique_ptr<Person>`对于多态类

因为动态分配会产生开销，所以您只在必要时使用它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-16T14:43:24.763

一般的答案是你的意图是由`boost::optional`而不是由表达的`std::unique_ptr`。也就是说，您的`find`操作的特殊情况可能应该符合标准库的执行方式，假设您的基础类型具有迭代器的概念：`end()`如果没有找到元素，则返回迭代器，否则返回元素的迭代器。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-16T14:40:40.823

`boost::optional`更清楚地说明你的意图。您需要明确记录空`std::unique_ptr`意味着没有返回值

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-16T14:39:51.713

还有第四种方法：如果没有找到任何东西，让函数抛出异常。

我知道这并不能真正回答你的问题，因此我很抱歉，但也许你没有考虑过。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-16T14:46:11.850

啊，Xeo还没出现？

好吧，我告诉过你一次，我再告诉你一次：这两个是完全不同的对象，具有不同的目的。

*   `unique_ptr`表示*我拥有一个对象*。这只是说“我是一个对象”的不同方式。因此，null`unique_ptr`是可以引起注意的东西。我期待一个对象，但我什么也没得到；代码一定是错的！
*   `optional`意味着*我有时不能被初始化，但没关系*。在这种情况下，不用担心；如果是`None`，那就是已经想到的行为。

两者都隐式转换为 bool 的事实并不意味着它们可以互换使用。`optional`与可能不会产生任何输出的代码一起使用（例如，读取流）。`unique_ptr`在工厂对象中使用；他们*很可能会*为您创建一个对象，如果没有，则抛出异常。

关于您的示例的结论：`find`应该返回`optional`。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-05-11T22:38:25.087

考虑到可为空的要求，从概念上归结为：

`std::optional`具有值语义，堆栈存储。

`std::unique_ptr`有移动语义，堆存储。

如果您想要值语义和堆存储，请使用`std::indirect` [http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0201r1.pdf](http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0201r1.pdf)。

（如果你想要移动语义和堆栈存储......我不知道。我猜它是一个带有堆栈分配器的 unique_ptr？）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-16T15:02:13.360

> 那么有什么理由比另一个更喜欢一个吗？

他们表达了非常不同的意图：`optional`说函数可能不会给出结果给你（这不是错误情况）。`unique_ptr`告诉您有关所有权语义的一些信息（并且更容易与 null 一起使用以表示错误）。

通常我会使用最能表达界面背后意图的那个。

例如，假设您正在编写一个 HTTP 服务器，它试图将接收到的缓冲区解析为一个 HTTP 请求对象。当您尝试解析不完整的缓冲区时，不会出现错误情况，您只需等待并缓冲更多数据，然后再试一次。

我将使用`optional`, 来表达这一点，以明确该函数可能不返回任何内容（并且不返回任何内容不是错误情况）。

如果我的解析必须验证东西（例如，如果解析的表达式是无效的正则表达式，则正则表达式解析器应该产生错误）我会返回一个 null `unique_ptr`，或者更好的是，抛出一个异常。

# c# - 无法使用 NHibernate 登录到 SQL Server，但使用 Management Studio 或 sqlcmd 可以正常工作

> ID：14360713
> 
> 赞同：5
> 
> 时间：2013-01-16T14:32:22.900
> 
> 标签：c#, sql-server

尝试使用 NHibernate 连接到我的数据库时出现登录失败错误：

```
var config = Fluently.Configure()
              .Database(MsSqlConfiguration
              .MsSql2005
              .ConnectionString("Data Source=SERVER1\\SQLEXPRESS;Integrated Security=SSPI;Initial Catalog=xxx"))
              .Mappings(x => x.FluentMappings.AddFromAssembly(Assembly.GetExecutingAssembly())); 
```

在`Error 18456 State 5`SQL Management Studio 的日志查看器中。

但是使用`sqlcmd`或 Management Studio 可以正常工作（使用 Windows Auth）！

可能是什么问题呢？

**编辑** NHibernate 异常：

```
Test method ProjektLogg.Tests.NHibernateTests.ShouldBeAbleToGenerateFactory threw exception: 
FluentNHibernate.Cfg.FluentConfigurationException: An invalid or incomplete configuration was used while creating a SessionFactory. Check PotentialReasons collection, and InnerException for more detail.

 ---> NHibernate.HibernateException: Login failed for user XXX-INTRANET\username. ---> System.Data.SqlClient.SqlException: Login failed for user XXX-INTRANET\username. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:36:06.593

该错误消息的意思是“无效的用户 ID”。如果您正在运行 IIS，请确保您的应用程序池使用与在 Management Studio 中连接到数据库的用户相同的身份。

如果您没有在 IIS 下运行，请确保您当前的用户帐户 (Windows) 可以访问数据库，因为您使用的是集成安全性。

错误链接：http: [//blogs.msdn.com/b/sql_protocols/archive/2006/02/21/536201.aspx](http://blogs.msdn.com/b/sql_protocols/archive/2006/02/21/536201.aspx)

**编辑：等一下，您缺少 Initial Catalog**。试试这个：

```
"Data Source=SERVER1\\SQLEXPRESS;Integrated Security=SSPI;Initial Catalog=YourDatabase" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:08:39.190

我清理了整个解决方案，现在它可以工作了。对不起，浪费你们的时间，伙计们。感谢您的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T01:37:33.043

我遇到了类似的问题，我意识到与实体框架不同，(Fluent)NHibernate 不会为您创建数据库。解决方案是创建一个空数据库。

ConnectionString 中的以下段意味着数据库 xxx 必须已经存在：

```
Initial Catalog=xxx 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-06T13:51:34.287

我无法让它与 Integrated Security 一起使用，我必须在连接字符串中提供用户名和密码。

# javascript - 使用 JavaScript 和 CSS 选择器，诸如 nonfiction 和 fiction 之类的字符串都返回 true 并且不应该

> ID：14360715
> 
> 赞同：0
> 
> 时间：2013-01-16T14:32:25.447
> 
> 标签：javascript, jquery, jquery-selectors

[http://jsbin.com/aguver/17/edit](http://jsbin.com/aguver/17/edit) 经过多次搜索，我在这里找到了这段代码。它正在设置活动类别并将其从原来的位置删除。问题是，当它应该只是一个时，它正在将 2 个链接更改为红色。

使用正则表达式`/^\w/`可能会起作用，但不像代码中设计的那样，因为它是放置在 css 选择器中的变量。它的搜索/选择对我的目的来说太模糊了。

谢谢。

HTML：

```
<!DOCTYPE html>
<html>
<head>
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script><meta charset=utf-8 />
<title>demo by roXon</title>
<!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
  article, aside, figure, footer, header, hgroup, 
  menu, nav, section { display: block; }
  *{margin:0;padding:0;}
  ul{list-style:none;}
  a{text-decoration:none;}
  a.active{color:red;}
</style>
</head>
<body>
  <div>
     <ul id="books">
         <li><a href="nonfiction">Nonfiction</a></li>
         <li><a href="fiction">Fiction</a></li>
     </ul>  
  </div>
</body>
</html> 
```

JS：

```
var url = 'http://www.domain.com/fiction'; //<-- too similar to nonfiction

//actually it just checks the last character, I need regex maybe

var link = url.split('/').slice(-1);

document.write(url.split('/').slice(-1));

$('#books li a[href$="'+link+'"]').addClass('active');
//Script is supposed to select the active link via the url and giving it a class attribute 
```

# php - 使用 Symfony 从 Doctrine 模型创建数据库

> ID：14360721
> 
> 赞同：3
> 
> 时间：2013-01-16T14:32:42.447
> 
> 标签：php, doctrine, symfony-2.1

我使用 SQL`CREATE DATABASE`命令创建了一个新数据库来托管我的应用程序表。我现在将使用 Doctrine 从我的 Symony 2.1 项目中生成数据库。我已经有正确的映射 YML-PHP 实体但是当我尝试使用命令时

```
php app/vendors doctrine:schema:create 
```

它在我的应用程序中运行的查询失败。我不明白为什么它似乎正在尝试启动我的捆绑包，显然它失败了，因为我执行的查询找不到表。如何生成新数据库？

```
Base table or view not found: 1146 Table 'mydatabase.mytable_menu' doesn't exist 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T14:38:07.467

该命令只会为您创建数据库。您将需要运行此命令来为您的实体生成实际的数据库表。

```
php app/console doctrine:schema:update --force 
```

# jquery - CSS3 旋转在 Chrome 中未完全居中

> ID：14360726
> 
> 赞同：0
> 
> 时间：2013-01-16T14:32:49.433
> 
> 标签：jquery, css, rotatetransform, rotateanimation

旋转图像时出现一些奇怪的跨浏览器 CSS3 行为。在此页面[http://www.coral.co.uk/sports-betting-50](http://www.coral.co.uk/sports-betting-50)上，底部的 1-2-3 圆形图像上方有一个闪亮的环，当您将鼠标悬停在它们上方时，该环通过 jquery 操纵 CSS 进行旋转。

```
-webkit-transform: rotate(180deg); 
transform: rotate(180deg); 
```

环在 IE 和 Firefox 中完美居中，但在 Chrome 中，旋转看起来偏离了 1-2 像素。我已经验证了图像，它是一个完美的圆圈，并且以 png 为中心。

任何想法为什么这在 Chrome 中表现不同？

您的帮助将不胜感激。

# sql - SQLplus中的-L选项是什么意思？

> ID：14360728
> 
> 赞同：1
> 
> 时间：2013-01-16T14:33:00.423
> 
> 标签：sql, oracle, sqlplus

像 ：

```
sqlplus -L $CONFIG_USR/$CONFIG_PWD @${DIR_BIN}/do_plsql_basel2.sql $SCHEMA.${MAPNAME} $FREQUENCY $CONFIG_USR $CONFIG_PWD >$DIR_LOG/${SCRIPTNAME}_$$.log 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:34:48.783

从[SQLPLus 手册页](http://ontledroit.homelinux.org:8080/cgi-bin/man/man2html?1+sqlplus)：

> 尝试仅登录一次，而不是重新提示错误。

# r - r-project 创建一个数据框函数并可能在某处使用 *apply

> ID：14360733
> 
> 赞同：0
> 
> 时间：2013-01-16T14:33:19.950
> 
> 标签：r, function, dataframe

试图创建一个在目录中查找一堆 CSV 文件的函数，然后以文件 ID 作为参数，输出一个表（实际上是数据框 - R 语言的新内容），其中有 2 列，一个标题为 ID相应的 id 参数和第二列将是该文件中的行数。

这些文件的标题都是 001.csv - 322.csv

例如输出看起来像列标题：ID，第一条记录：001（源自 001.csv），第二列：标题“行数”，第一条记录

该函数如下所示：`myfunction(directory,id)` Directory 是 csv 文件所在的文件夹，id 可以是数字（或向量？），例如简单的 1 或 9 或 100，也可以是 200:300 之类的向量。

在后面的 200:300 的情况下，输出将是一个包含 100 行的表，其中第一行将是 200，其中包含 10 行数据。

至今：

```
complete <- function(directory,id = 1:332) {

    # create an object to help read the appropriate csv files later int he function

     csvfilespath <- sprintf("/Users/gcameron/Desktop/%s/%03d.csv", directory, id)

     colID <- sprintf('%03d', id)

    # now, how do I tell R to create a table with 2 columns titled ID and countrows?
    # Now, how would I take each instance of an ID and add to this table the id and         count of rows in each?
} 
```

如果这看起来真的很基本，我很抱歉。我正在学习的教程进展迅速，我观看了每个视频讲座并进行了大量研究。SO 是迄今为止我最喜欢的资源，我通过使用它学得更好。也许是因为它是个性化的并且直接适用于我的直接任务。我希望我的问题也能让其他正在学习 R 的人受益。

## 基于以下反馈

我现在有以下脚本：

```
complete <- function(directory,id = 1:332) {
    csvfiles <- sprintf("/Users/gcameron/Desktop/%s/%03d.csv", directory, id)
    nrows <- sapply( csvfiles, function(f) nrow(read.csv(f)))
    data.frame(ID=id, countrows=sapply(csvfiles,function(x) length(count.fields(x)))
    } 
```

这看起来像我在正确的轨道上吗？我收到错误“错误：意外'}' in：”data.frame(ID=id, countrows=sapply(csvfiles,function(x) length(count.fields(x))) }”

我看不到额外的“}”是从哪里来的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:47:40.570

```
data.frame(ID=id, countrows=sapply(csvfilepath, function(x) length(count.fields(x)))) 
```

# python - 如何使用 `crontab` 或 `gnome-terminal` 从虚拟环境执行命令

> ID：14360736
> 
> 赞同：3
> 
> 时间：2013-01-16T14:33:27.410
> 
> 标签：python, virtualenv, crontab, gnome-terminal, virtualenvwrapper

当我想使用*virtualenv(1.8.2)*和*virtualenvwrapper(3.6)*在虚拟环境中工作时，我只需运行`workon my_project`. 但是，我**无法使用`crontab`or`gnome-terminal`**从虚拟环境执行命令：

**例子：**

`* * * * * workon my_project && python task.py`

这没有被执行。（任务写入文件）

或者

`gnome-terminal --tab -e "bash -c \"workon my_project;python task.py;exec bash\""` 这只是显示`bash: workon: command not found`然后从系统环境执行程序。[在这里](http://www.intelligrape.com/blog/2012/05/25/bash-script-to-open-a-terminal-with-multiple-tabs-on-linux-start-up/)查看有关此命令的更多信息。

## 编辑

@Zaar Hai：`virtualenvwrapper`在我的`/home/myusername/.bashrc`：

```
export WORKON_HOME=~/.virtualenvs
source /usr/local/bin/virtualenvwrapper.sh
export PIP_VIRTUALENV_BASE=$WORKON_HOME
export PIP_RESPECT_VIRTUALENV=true 
```

所以我尝试了这个命令：

```
gnome-terminal --tab -e "bash -c \"export WORKON_HOME=~/.virtualenvs;source /usr/local/bin/virtualenvwrapper.sh;export PIP_VIRTUALENV_BASE=$WORKON_HOME;export PIP_RESPECT_VIRTUALENV=true;source /home/myusername/.virtualenvs/my_project/bin/activate;exec bash\"" 
```

但是我仍然得到与您在评论中发布的相同的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:40:17.313

通过 crontab：

```
0 10 * * * env -i bash -c 'export WORKON_HOME=~/.virtualenvs && source /usr/local/bin/virtualenvwrapper.sh && workon my_project && python task.py' 
```

通过 gnome 终端：

```
gnome-terminal --tab -e 'bash -c "export WORKON_HOME=~/.virtualenvs && source /usr/local/bin/virtualenvwrapper.sh && workon my_project && python task.py " ' 
```

最好只创建一个 runme.sh 脚本：

```
#/bin/sh
set -e
export WORKON_HOME=~/.virtualenvs
source /usr/local/bin/virtualenvwrapper.sh
workon my_project
exec python task.py 
```

并通过 gnome 终端/crontab 运行此脚本。

# netbeans - 如何将 javafx 激活到 Netbeans 中的现有项目？

> ID：14360741
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:33:51.653
> 
> 标签：netbeans, maven-2, javafx

我有 javafx 代码的 Maven 项目。当我将此项目签出到 Netbeans 时，即使我为此项目设置了“默认 JavaFX”平台，我也找不到 javafx 包。但它会为新的 javafx 项目找到 javafx 包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T01:25:03.993

您必须将一些 JAR 添加到您的项目中才能构建它。

在您的项目中选择“属性”并选择库。在那里，选择“添加 JAR/文件夹”并导航到 JDK 文件夹。在那里，您可以在 jre/lib 中找到 jfxrt.jar。添加它。

现在，javafx 包被识别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:38:57.267

您必须设置构建路径并从您的 javafx 路径添加外部 .jar 文件。

你需要添加这个：

*   jfxrt.jar

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:26:50.497

在 netbeans javafx 模块方面还没有真正支持/实现。请参阅归档的相关增强功能。

[http://netbeans.org/bugzilla/show_bug.cgi?id=221184](http://netbeans.org/bugzilla/show_bug.cgi?id=221184)

[http://netbeans.org/bugzilla/show_bug.cgi?id=222295](http://netbeans.org/bugzilla/show_bug.cgi?id=222295)

# ruby-on-rails - 无法保存性别或位置 google oauth

> ID：14360746
> 
> 赞同：0
> 
> 时间：2013-01-16T14:33:57.233
> 
> 标签：ruby-on-rails, api, omniauth

由于[这个其他问题](https://stackoverflow.com/questions/14291409/save-users-gender-and-location-from-youtube-login-oauth)，我已经修改了我的范围，所以现在我请求正确的权限，以便我可以将用户的性别和位置保存到数据库。

这是我保存所有信息栏性别和位置的 user.rb 代码。遵循 auth.info.name 等设置的协议后，性别或位置都不会被保存甚至检索。

```
def self.from_omniauth(auth)
    where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
      user.provider = auth.provider
      user.uid = auth.uid
      user.name = auth.info.name
      user.email = auth.info.email
      user.picture = auth.info.image
      user.gender = auth.info.gender
      user.country = auth.info.locale
      user.oauth_token = auth.credentials.token
      user.oauth_expires_at = Time.at(auth.credentials.expires_at)
      user.save! 
      end
     end 
```

这是我发送的范围

```
 Rails.application.config.middleware.use OmniAuth::Builder do
  provider :youtube, YOUTUBE_KEY, YOUTUBE_SECRET, { :scope => "https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email https://gdata.youtube.com", access_type: 'offline', approval_prompt: '' }
end 
```

路线

```
match 'auth/youtube/callback', to: 'sessions#create' 
```

有谁知道保存这两个值的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:44:47.427

这里的问题是您在omniauth 哈希中的错误位置查找该信息。如果您将以下代码行添加到控制器操作的开头：

```
render :text => "<pre>" + env["omniauth.auth"].to_yaml and return 
```

您将能够检查 OAuth 提供程序返回的散列内容并看到它`gender`，并且`locale`位于`extra`散列的键内。

因此，这里的答案只是将两条违规行更改为：

```
user.gender = auth.extra.raw_info.gender
user.country = auth.extra.raw_info.locale 
```

# wordpress - WordPress 每分钟保存多个修订

> ID：14360750
> 
> 赞同：0
> 
> 时间：2013-01-16T14:34:17.890
> 
> 标签：wordpress, autosave, revisions

当我的客户登录 WP 时，他的系统以某种方式自动触发更新/修订（不是自动保存）——有时每分钟一次；有时每隔一分钟。这是其中一页的修订日志：

[修订日志 http://www.alliantstudios.net/clients/IAI/iai_revisionLog_1-16-13.png](http://www.alliantstudios.net/clients/IAI/iai_revisionLog_1-16-13.png)

任何想法可能会触发这个。他报告说，当他尝试进行编辑时，系统会超时。我知道他的公司互联网接入有一些安全系统。这会影响这个吗？我以前没有见过这种行为。

任何有关指向我的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:55:28.480

您可以[禁用帖子修订](http://codex.wordpress.org/Editing_wp-config.php#Post_Revisions)

```
define('WP_POST_REVISIONS', false ); 
```

# html - 在输入元素的内容上应用 CSS 样式

> ID：14360763
> 
> 赞同：0
> 
> 时间：2013-01-16T14:35:19.810
> 
> 标签：html, css

```
input[type="radio"][class="selectorPrev"]:hover+ label:before {
content:'Previous image';
z-index:999;
position:relative;
} 
```

是否可以仅在内容属性上应用 margin-left:10px 并保持所有资源相同？这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:33:25.230

是的，但是您需要将伪元素指定为 a`block`或`inline-block`first，因为它是作为内联元素生成的，因此不能有边距。

```
input[type="radio"][class="selectorPrev"]:hover + label:before {
  content:'Previous image';
  display:inline-block;
  position:relative;
  z-index:999;
  margin-left:10px;
} 
```

# html - 仅使用 HTML 存储表单中的数据

> ID：14360769
> 
> 赞同：5
> 
> 时间：2013-01-16T14:35:37.103
> 
> 标签：html, excel

我想创建一个表单（将由用户填写）并将数据存储在 excel 样式表中，而不使用 php 只是 HTML，这可能吗？

我不想将数据存储在数据库中。

我曾尝试使用 google doc，但效果不佳，因为验证消息是根据浏览器语言生成的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-03-20T08:01:28.930

“You can't write a file from HTML”的不合格响应是***不准确***的。虽然您可能需要在 HTML 中添加一些“隐藏”字段（为了简化仅导出请求的数据而不是问题或其他文本的导出），但***绝对***可以这样做。我已经在下面的代码中做到了——我使用的只是 JavaScript。无需服务器，无需数据库，无需 PHP。

下面是代码和指向 JSFiddle 页面的链接，您可以在其中看到它的运行情况：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function fillHidTable(){
    var htqf; //-- hidden field
    var rf; //-- retrieved field
    for ( var i = 1; i < 5; i++ ) {
        rf = "htqf"+i;
        document.getElementById(rf).innerHTML = document.getElementById("Q"+i+"CALC").value;
    }
    tableToExcel('hidTable', 'Analysis Results');
}

var tableToExcel = (function() {
    var uri = 'data:application/vnd.ms-excel;base64,'
            , template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'
            , base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) }
            , format = function(s, c) { return s.replace(/{(\w+)}/g, function(m, p) { return c[p]; }) }
    return function(table, name) {
        if (!table.nodeType) table = document.getElementById(table)
        var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
        window.location.href = uri + base64(format(template, ctx))
    }
})()
</script>

<title>HTML Form Data to Excel</title>

<style type="text/css" media="screen">
    .divCenMid{font-family:Arial,sans-serif;font-size:14pt;font-style:normal;font-weight:700;text-align:center;vertical-align:middle;margin:0;}
    .allbdrCenMid{border:.75pt solid windowtext;color:#000;font-family:Arial,sans-serif;font-size:10pt;font-style:normal;font-weight:400;text-align:center;vertical-align:middle;margin:0;}
    .allbdrCenTop{border:.75pt solid windowtext;color:#000;font-family:Arial,sans-serif;font-size:10pt;font-style:normal;font-weight:400;text-align:center;vertical-align:top;margin:0;}
    .allbdrLtMid{border:.75pt solid windowtext;color:#000;font-family:Arial,sans-serif;font-size:10pt;font-style:normal;font-weight:400;text-align:left;vertical-align:middle;margin:0;}
    .allbdrLtTop{border:.75pt solid windowtext;color:#000;font-family:Arial,sans-serif;font-size:10pt;font-style:normal;font-weight:400;text-align:left;vertical-align:top;margin:0;}

</style>

</head>

<body>

<table width= "565px" cellspacing="0" cellpadding="0" style="border-spacing:0;" id="QMSTable">
    <col width="25px"/>
    <col width="120px"/>
    <col width="360px"/>
    <col width="60px"/>
    <tr>
        <td class="divCenMid" colspan = "4"> QMS Assessment</td>
    </tr>
    <tr>
        <td class="allbdrCenMid"> No</td>
        <td class="allbdrCenMid"> Criteria</td>
        <td class="allbdrLtMid"> Question</td>
        <td class="allbdrCenMid"> Score</td>
    </tr>
    <tr>
        <td class="allbdrCenTop"> Q1</td>
        <td class="allbdrLtTop"> Quality Unit Independency</td>
        <td class="allbdrLtTop"> Do you have the Quality Unit?</td>
        <td class="allbdrCenMid">
            <input id="Q1CALC" type="text" value="" class="nobdrCenMid" style="overflow:hidden; width:93% " name="Q1CALC"/>
        </td>
    </tr>
    <tr>
        <td class="allbdrCenTop"> Q2</td>
        <td class="allbdrLtTop"> Apply PICS GMP</td>
        <td class="allbdrLtTop"> Which GMP regulation do you use?</td>
        <td class="allbdrCenMid">
            <input id="Q2CALC" type="text" value="" class="nobdrCenMid" style="overflow:hidden; width:93% " name="Q2CALC"/>
        </td>
    </tr>
    <tr>
        <td class="allbdrCenTop"> Q3</td>
        <td class="allbdrLtTop"> Deviation or Non-conformance</td>
        <td class="allbdrLtTop"> Do you have a deviation or non-conformance procedure?</td>
        <td class="allbdrCenMid">
            <input id="Q3CALC" type="text" value="" class="nobdrCenMid" style="overflow:hidden; width:93% " name="Q3CALC"/>
        </td>
    </tr>
    <tr>
        <td class="allbdrCenTop"> Q4</td>
        <td class="allbdrLtTop"> Complaint</td>
        <td class="allbdrLtTop"> Do you have a customer complaint procedure?</td>
        <td class="allbdrCenMid">
            <input id="Q4CALC" type="text" value="" class="nobdrCenMid" style="overflow:hidden; width:93% " name="Q4CALC"/>
        </td>
    </tr>
</table>

<div id="hidTable" style="display: none">
    <table id="testTable">
        <caption>Supplier Risk Analysis</caption>
        <colgroup></colgroup>
        <colgroup></colgroup>
        <colgroup></colgroup>
        <thead>
        <tr>
            <th>No.</th>
            <th>Question</th>
            <th>Score</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>Q1</td>
            <td>Do you have the Quality Unit?</td>
            <td id="htqf1">-</td>
        </tr>
        <tr>
            <td>Q2</td>
            <td>Apply PICS GMP?</td>
            <td id="htqf2">-</td>
        </tr>
        <tr>
            <td>Q3</td>
            <td>Do you have a deviation or non-conformance procedure?</td>
            <td id="htqf3">-</td>
        </tr>
        <tr>
            <td>Q4</td>
            <td>Do you have a customer complaint procedure?</td>
            <td id="htqf4">-</td>
        </tr>
        </tbody>
    </table>
</div>

<input type="button" onclick="fillHidTable()" value="Export Data to Excel">
</body>
</html> 
```

这是 JSFiddle 链接：[https ://jsfiddle.net/MitchinThailand/LV9vr/](https://jsfiddle.net/MitchinThailand/LV9vr/)

如果您想了解更多详细信息，请随时呼喊。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T14:45:42.067

不，HTML 页面不能写入文件。您需要一台服务器来执行此操作。

您可以做的最好的事情是在文本区域中生成 CSV 数据，然后用户可以将其复制并粘贴到本地文件中，然后将其加载到 Excel 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-03T15:14:54.883

由于某些安全原因，无法使用 javascript 将 html 表单数据保存到文件中，因此对于我的解决方案，我只使用 TCPDF。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T15:04:03.117

您可以生成带有[下载](http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#attr-hyperlink-download)属性的`data:`URL ：

```
<a download="test.csv" href="data:text/csv,foo,bar,baz"> 
```

您需要使用 JavaScript 从表单数据构建此类 URL，并在文档中插入/更新适当的链接。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-16T14:44:34.140

如果没有 php 或一些高级的 HTML5 本地存储，就无法简单地做你想做的事。

我通过使用简单的 PHP 脚本将表单数据保存到 .txt 文件中，然后在 Excel 中打开生成的 .txt 文件并使用文本到列功能来完成此操作。

我有一个 HTML 表单，它收集人们输入电子邮件地址的字段。我希望表单将电子邮件地址发布到文本文件中。请帮忙！将最高分奖励给正确回答我的人！2 年前 报告滥用 其他详细信息 请粘贴整个代码来执行此操作！2年前

**形式：**

```
<form method="post" action="nameofyourscripthere.php">
Name: <input type="text" name="name" id="name" />

Email: <input type="text" name="email" id="email" />

<input type="submit" name="submit" value="Send Form" />
</form> 
```

**PHP：**

使用此代码创建一个保存为 .php 的新页面。您只需要服务器上的表单和 PHP 脚本就可以了 :)

```
<?php
// Get the name they entered in the form
// We'll be naming the file this
$file = $_POST['name'];
// Get the email from the form
$email = $_POST['email'];
// We want the file to be a text file right?
$ex = ".txt";
// Try to open a file named $file$ex (johndoe.txt for example)
// Because this file doesn't exist yet the server creates it
$write = fopen("$file$ex","w");
// Now open the file up again but this time save the email in it
fwrite($write,$email);
// MAKE SURE you close the file!!!
fclose($write);
// The folder that this script is in on the server is where the file we just made was saved
// We can 'rename' it to another folder
// The folder on the server we want to move it to 
$data = "../emails/";
// Now put it all together: This example goes out of the folder we're in and into the folder 'emails'
// The new 'name' would be this now (../emails/johndoe.txt): So now the file is moved to where we want for storage
rename ("$file","$data$file$ex");
// The script is done, send the user to another page (Just read the address below and you'll get it)
// Its just an example fyi change to what you want
header('Location: http://YourWebsiteNameHere.com/contactFo…
exit;
?> 
```

# c# - 如何使用 SqlDataAdapter 优化 Select Query

> ID：14360770
> 
> 赞同：1
> 
> 时间：2013-01-16T14:35:39.593
> 
> 标签：c#, sql-server-2008, sqldataadapter

我正在使用 SqlDataAdapter 来搜索这样的数据：

```
tableDataAdapter.Adapter.SelectCommand.CommandText = "select * from Table";
tableDataAdapter.fill("table"); 
```

有没有优化它的方法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:09:15.257

您可以使用下面提到的一般规则来提高查询性能。

1.  改进索引

    *   创建有用的索引是实现更好查询性能的最重要方法之一。有用的索引可帮助您以更少的磁盘 I/O 操作和更少的系统资源使用来查找数据。
2.  选择要索引的内容

    *   我们建议您始终在主键上创建索引。在外键上创建索引通常也很有用。这是因为主键和外键经常用于连接表。这些键上的索引让优化器考虑更有效的索引连接算法。如果您的查询使用其他列连接表，出于同样的原因，在这些列上创建索引通常会很有帮助。
3.  重写子查询以使用 JOIN

    *   有时您可以重写子查询以使用 JOIN 并获得更好的性能。创建 JOIN 的优点是您可以按照与查询定义的顺序不同的顺序评估表。
4.  使用参数化查询

    *   如果您的应用程序运行一系列仅在某些常量上有所不同的查询，您可以通过使用参数化查询来提高性能。例如，要返回不同客户的订单，您可以运行以下查询：

> 从订单中选择“客户 ID”，其中“订单 ID”=？

有关更多信息，请查看[**查询性能调优**](http://msdn.microsoft.com/en-us/library/ms172984.aspx)

我希望这对你有帮助。

# c# - 不支持指定的方法 LINQ 和 MYSQL

> ID：14360771
> 
> 赞同：0
> 
> 时间：2013-01-16T14:35:41.357
> 
> 标签：c#, mysql, linq

我试图编写一个 LINQ 查询，它将所有详细信息集中在一个地方，我需要生产日期、员工姓名以及该员工应该为他的工作获得的总金额。这就是我到目前为止所拥有的：

```
var PrePerWorker =
                    (from Production in context.production
                    where Production.ProductionDate >= dtpStartDate.SelectedDate && Production.ProductionDate <= dtpEndDate.SelectedDate

                    select new
                    {
                        Worker = 
                            (from Employee in context.employees
                             where Employee.ID == Production.EmpID
                            select Employee.FirstName).FirstOrDefault(),
                        DateOfProduction = Production.ProductionDate,
                        Total =
                            Production.Side == 1 ? Production.Amount * 
                            (from Product in context.products
                             where Product.ProductID == Production.ProductID
                             select Product.SideA).FirstOrDefault():
                             Production.Side == 2 ? Production.Amount * 
                            (from Product in context.products
                             where Product.ProductID == Production.ProductID
                             select Product.SideB).FirstOrDefault():
                             Production.Side == 3 ? Production.Amount * 
                            (from Product in context.products
                             where Product.ProductID == Production.ProductID
                             select Product.SideC).FirstOrDefault(): 0
                    }).GroupBy(x => x.DateOfProduction, x => x.Worker); 
```

当我运行它然后尝试迭代结果时，我收到一条错误消息，提示“不支持指定的方法”。
有谁知道为什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:40:36.343

我的猜测是第三类？: 运算符不能翻译成 SQL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:47:38.963

要按 2 列分组，您需要`GroupBy(x => new {x.DateOfProduction, x.Worker});`. 你能解释一下你需要什么，因为你的 linq 对我来说看起来很难。

# jquery - 如何仅使用样式在回发时保持当前手风琴打开？

> ID：14360774
> 
> 赞同：0
> 
> 时间：2013-01-16T14:35:47.473
> 
> 标签：jquery, css, accordion

我试图弄清楚如何在回发期间保持当前手风琴窗格打开。我浏览了这些帖子，但他们都在使用 jQuery 中的实际手风琴功能，而我只使用 css。

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="Editor.aspx.vb" Inherits="Editor" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title>MLE Editor</title>
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>

    <link href="Styles/site.css" rel="stylesheet" type="text/css" />    

<script type="text/javascript">
    $(document).ready(function () {
        // The Accordion Effect
        $('.eventHeader').click(function () {
            $(this).toggleClass('active-header').toggleClass('inactive-header');
            $(this).next().slideToggle().toggleClass('open-content');
        });
    });
</script>
</head>
<body>
    <form id="form1" runat="server">        
        <div id="eventOptions">
            <div id="eventsContainer"> 
                <h2 class="eventHeader">Event 1</h2><div class="eventContent"><p>Event options</p></div>
                <h2 class="eventHeader">Event 2</h2><div class="eventContent"><p>Event options</p></div>
                <h2 class="eventHeader">Event 3</h2><div class="eventContent"><p>Event options</p></div>
                <h2 class="eventHeader">Event 4</h2><div class="eventContent"><p>Event options</p></div>
                <h2 class="eventHeader">Event 5</h2><div class="eventContent"><p>Event options</p></div>
            </div>
        </div>
        <asp:Button ID="btnPostback" Runat="server" Text="Postback" />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-23T12:38:26.417

使用 Hidden 归档在回发之间存储索引 ID

```
<asp:HiddenField runat="server" ID="hdnIndexValue1" Value="-1" />

<script type="text/javascript">
    $(document).ready(function () {
        $(".eventContent").hide();
        var index = parseInt(document.getElementById("hdnIndexValue1").value);
        $('.eventContent:eq(' + index + ')').show();

        $('.eventHeader').click(function () {
            $(this).toggleClass('active-header').toggleClass('inactive-header');
            $(this).next().slideToggle().toggleClass('open-content');
            var index = $(".eventHeader").index(this);
            document.getElementById('hdnIndexValue1').value = index;
        });
    });
</script> 
```

# python - 如何使用前缀选项解析python 2.6中的参数为-f file.xml

> ID：14360776
> 
> 赞同：3
> 
> 时间：2013-01-16T14:35:53.297
> 
> 标签：python, parsing, command-line-arguments, python-2.6

我想使用前缀选项解析从命令行传递的参数：

`python myApp.y -f file.xml`

我正在使用 python 2.6.6 所以我不能使用[argparse](http://docs.python.org/2/library/argparse.html#module-argparse)。

而且我想让它比

```
arg1 = sys.argv[1]
arg2 = sys.argv[2] 
```

然后使用`if`s 检查值以及它们是否已提供。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T14:36:38.460

您可以使用[`optparse`](http://docs.python.org/2/library/optparse.html), 但`argparse` [可用](http://pypi.python.org/pypi/argparse)并且可以轻松地安装在 python 2.6 上。

以下是使用 argparse 的方法：

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('-f','--filename',action='store',help='file!')
namespace = parser.parse_args()
print namespace.filename 
```

* * *

或使用 optparse：

```
from optparse import OptionParser
parser = OptionParser()
parser.add_option("-f", "--filename", dest="filename",help="file!")
options, args = parser.parse_args()
print options.filename 
```

# php - 如何对不工作且不出错的 PDO 对象进行故障排除？

> ID：14360780
> 
> 赞同：0
> 
> 时间：2013-01-16T14:35:57.763
> 
> 标签：php, class, object, pdo

再次陷入对象/类。我有一个名为 submitticket 的函数，它将向我的票证表中提交一个新行。

```
public function submitticket() {
    $correct = false;
    try {
        $con = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
        $con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
        $sql = "INSERT INTO tickets (ticketid, EPMSAccount, requester, recipient, jobnumber, subject, body, responseid, type, priority) VALUES (:ticketid, :EPMSAccount, :requester, :recipient, :jobnumber, :subject, :body, :responseid, :type, :priority)";
        $stmt = $con->prepare( $sql );
        //print_r($sql);
        $stmt->bindValue( "ticketid", $this->ticketid, PDO::PARAM_STR );
        $stmt->bindValue( "EPMSAccount", $this->EPMSAccount, PDO::PARAM_STR );
        $stmt->bindValue( "requester", $this->requester, PDO::PARAM_STR );
        $stmt->bindValue( "recipient", $this->recipient, PDO::PARAM_STR );
        $stmt->bindValue( "jobnumber", $this->jobnumber, PDO::PARAM_STR );
        $stmt->bindValue( "subject", $this->subject, PDO::PARAM_STR );
        $stmt->bindValue( "body", $this->body, PDO::PARAM_STR );
        $stmt->bindValue( "responseid", $this->responseid, PDO::PARAM_STR );
        $stmt->bindValue( "type", $this->type, PDO::PARAM_STR );
        $stmt->bindValue( "priority", $this->priority, PDO::PARAM_STR );
        echo '<pre>';
        print_r($stmt);
        echo '</pre>';
        $stmt->execute();

        return "Ticket created!";

    }catch( PDOException $e ) {
        return $e->getMessage();
    } 
```

这就是我在代码中执行它的方式：

```
// Submit ticket if submit clicked
if($_POST['submit'] == 'Submit Ticket'){
    $_POST['requester'] = $_SESSION['name'];
    $_POST['EPMSAccount'] = $_SESSION['EPMSAccount'];
    $tkt = new Ticket; // New instance of ticket class
    $tkt->storeFormValues( $_POST );
    $tkt->storeFormValues( $_SESSION );
    $tkt->submitticket();
    echo '<pre>';
    var_dump($tkt);
    print_r ($stmt);
    echo '</pre>';

} else {
echo 'nothing attempted';
} 
```

我知道这个查询应该是正确的，但它没有向我的表写入任何内容。这是 var_dump 和 print_r 给我的：

```
PDOStatement Object
(
[queryString] => INSERT INTO tickets (ticketid, EPMSAccount, requester, recipient, jobnumber, subject, body, responseid, type, priority) VALUES (:ticketid, :EPMSAccount, :requester, :recipient, :jobnumber, :subject, :body, :responseid, :type, :priority)
)
object(Ticket)#2 (12) {
["ticketid"]=>
NULL
["EPMSAccount"]=>
string(7) "SHAWMUT"
["jobnumber"]=>
string(6) "123456"
["estnumber"]=>
NULL
["requester"]=>
string(14) "Gabriel Peluso"
["recipient"]=>
string(16) "Customer Service"
["subject"]=>
string(4) "2323"
["body"]=>
string(5) "23232"
["order"]=>
NULL
["responseid"]=>
NULL
["type"]=>
NULL
["priority"]=>
string(6) "Normal"
} 
```

我不知道如何使用绑定的 PDO 值查看实际的 SQL 查询。有可能生产吗？有什么办法可以找出为什么它不写到桌子上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:41:22.727

您实际上并没有对返回值（成功消息或异常消息）做任何事情。

要查看发生了什么，您可以更改：

```
$tkt->submitticket(); 
```

至：

```
echo $tkt->submitticket(); 
```

除此之外，它`$stmt`是函数中的局部变量，因此如果要查看其内容，则需要`var_dump`在函数本身中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:39:45.353

检查那`$stmt`不是`false`在设置时，`$stmt->execute();`也不返回`false`。

如果他们这样做，则使用`errorInfo()`可用于 PDO 连接和语句的方法进行调试。

# c# - C# 不接收进程 MainWindowHandle

> ID：14360783
> 
> 赞同：1
> 
> 时间：2013-01-16T14:36:08.773
> 
> 标签：c#

我正在使用以下代码：

```
 if (!running()) // make sure osk is not running
            _process = Process.Start(@"c:\windows\system32\osk.exe");

        for (int bailout = 0; bailout < 50; bailout++)
        {
            if (_process.MainWindowHandle != IntPtr.Zero)
            {
                break;
            }
            Thread.Sleep(100);
            _process.Refresh();
        } 
```

它似乎适用于大多数计算机，但不是全部。

（我已经尝试增加“救助”和睡眠时间）。

我没有收到就退出循环`MainWindowHandle`。

# xamarin.android - 如何在单声道中为 android 使用多选微调器？

> ID：14360786
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:36:13.210
> 
> 标签：xamarin.android, spinner

我想在单声道中为 android 使用多选微调器。我想将国家绑定到微调器现在在普通微调器中有带有单选按钮的标签。但我想要带有复选框的标签。

谁能帮帮我吗。

```
AlertDialog.Builder alt_bld = new AlertDialog.Builder(
        CareCardActivity.this);
alt_bld.setTitle("Select Recepients");
alt_bld.setMultiChoiceItems(tempname, new boolean[tempname.length] , new DialogInterface.OnMultiChoiceClickListener() {

    public void onClick(DialogInterface dialog, int which,
            boolean isChecked) {
        // TODO Auto-generated method stub

    }
});
alt_bld.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

    public void onClick(DialogInterface dialog, int which) {

        // TODO Auto-generated method stub
        ListView list = ((AlertDialog) dialog).getListView();

        Log.v("LIST COUNT:: ", ""+list.getCount());
        for (int i = 0; i < list.getCount(); i++) {
            boolean checked = list.isItemChecked(i);

            if (checked) {
                sb.append(contactNumber[i]).append(";");
            }
        }
        sb = sb.replace(
                sb.length() - 1,
                sb.length(), "");
        txtPhoneNo.setText(sb.toString());
    }
});

alt_bld.setNegativeButton("Cancel",
        new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

            }
        });

AlertDialog alert = alt_bld.create();
alert.show(); 
```

我已经在 Eclipse 中尝试过这段代码，它在其中运行良好，但我想在 C# 中为 Mono 开发做它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:44:25.197

单击按钮时调用此函数

```
ShowDialog(DIALOG_MULTIPLE_CHOICE); 
```

添加以下代码

```
protected override Dialog OnCreateDialog(int id)
    {
        switch (id) {
        case DATE_DIALOG_ID:
            return new DatePickerDialog(this, OnDateSet, date.Year, date.Month - 1, date.Day);

        case DIALOG_MULTIPLE_CHOICE: {
            var builder = new AlertDialog.Builder (this);
            //          builder.SetIcon (Resource.Drawable.ic_popup_reminder);
            builder.SetTitle ("Select Country");
            builder.SetMultiChoiceItems (countryName, new bool[countryName.Length], MultiListClicked);

            builder.SetPositiveButton ("ok", OkClicked);
            builder.SetNegativeButton ("Cancel", CancelClicked);

            return builder.Create ();
        }
        }
        return null;
    }
    private void MultiListClicked (object sender, DialogMultiChoiceClickEventArgs e)
    {
        Console.WriteLine ("countryMultiListClicked");
        if (e.IsChecked) {
            mSelectedItems.Add (countryName [(int)e.Which]);
            mSelectedItemsID.Add (countryID [(int)e.Which]);
        }
        else if (mSelectedItems.Contains(countryName [(int)e.Which]))
        {
            mSelectedItems.Remove(countryName [(int)e.Which]);
            mSelectedItemsID.Remove(countryID [(int)e.Which]);
        }
    }
    private void OkClicked (object sender, DialogClickEventArgs e)
    {
        Console.WriteLine ("countryOkClicked");

        String listString = "";
        for (int i =0; i<mSelectedItems.Count; i++) {
            listString += mSelectedItems [i] + ",";
        }
        if (listString.Length > 0) {
            listString = listString.Remove (listString.Length - 1);
        }
        et_country.Text = listString;

        listStringId = "";
        for (int i =0; i<mSelectedItemsID.Count; i++) {
            listStringId += mSelectedItemsID [i] + ",";
        }
        if (listStringId.Length > 0) {
            listStringId = listStringId.Remove (listStringId.Length - 1);
        }
        Console.WriteLine (listStringId);
    }
    private void CancelClicked (object sender, DialogClickEventArgs e)
    {
        Console.WriteLine("countryCancelClicked");
    } 
```

这很好用........！

# javascript - Windows 商店蓝牙

> ID：14360787
> 
> 赞同：3
> 
> 时间：2013-01-16T14:36:20.370
> 
> 标签：javascript, c++, windows-8, bluetooth, windows-store-apps

我一直在查看 Windows 应用商店应用程序的 MSDN 文档，我发现唯一接近蓝牙的是 Windows.Networking.Proximity。这似乎是一个仅用于近距离的类，即在 3-4 厘米内。我正在开发的应用程序是在 HTML5/WinJS 平台上。

有没有像 android 那样的 BluetoothSocket 类？对于那些不熟悉 Android 上的蓝牙的商店开发人员，本质上您创建一个蓝牙设备成员变量并使用设备信息填充该成员，这是一个本地 java 调用。

这将为您提供配对设备的列表，您只需打开该设备的蓝牙套接字，然后在输入/输出流上执行标准套接字操作以进行读/写。

我是否需要做同样的事情并编写一个 C++/CX 版本并将其添加为 Windows 组件？这里的关键是我要连接的设备将蓝牙视为 COM 端口，所以我需要的是一种稳定、可靠的方式来读取/写入此设备，就像我连接到 COM 端口一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-03T08:35:47.777

看起来@JimONeil 的答案早于 Windows 8.1，并且对于 Windows 8 确实是正确的，当时与 BT 设备进行自定义通信的唯一方法是创建所谓的“设备应用程序”。

从 Windows 8.1 开始，有一个简化的 API，可以更轻松地（如 OP 描述的“Android 风格”）与 BT 设备进行通信。

[这是MSDN 文档中“New Windows 8.1 APIs”](https://msdn.microsoft.com/en-us/library/windows/apps/bg182882.aspx#four)的引述：

> 对于 Windows 8.1，Windows 应用商店应用可以使用新的 RFCOMM 和 GATT（通用属性配置文件）Windows 运行时 API 来访问蓝牙设备。这些 API 提供对蓝牙 BR/EDR 和蓝牙 LE 传输的访问。

也有一些好的示例项目：

*   [心率设备（C++/ C# 和**JavaScript**）](https://code.msdn.microsoft.com/windowsapps/Bluetooth-Generic-5a99ef95)
*   [蓝牙聊天（C++/ C# 和**JavaScript**）](https://code.msdn.microsoft.com/windowsapps/Bluetooth-Rfcomm-Chat-afcee559)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:51:41.780

根据[此 MSDN 论坛文章](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/d5f3b9c2-e015-491b-baf2-6b37961d7000)，没有可用于 Windows 应用商店应用程序的通用蓝牙堆栈。

正如线程所示，只有一个[蓝牙呼叫控制示例](http://code.msdn.microsoft.com/windowsapps/Call-Control-b52ad696)和

> 如果设备制造商需要将蓝牙用作其设备的一部分，他们可以提供驱动程序和元数据供商店应用程序使用。
> 
> 这里的信息：
> 
> ```
>  http://msdn.microsoft.com/en-us/library/windows/apps/hh464909.aspx 
> ```

# jquery - 如何将 div 放置在所有内容之上，但与页面上的另一个元素相关？

> ID：14360788
> 
> 赞同：1
> 
> 时间：2013-01-16T14:36:24.353
> 
> 标签：jquery, css, html, positioning

我想将我的 div 放在一切之上，但就在我的菜单栏下方。与您在 stackoveflow 上单击用户名时显示的 div 非常相似。尽管我可能做错了，但使用绝对定位的运气并不好。

这是代码示例：http: [//jsfiddle.net/DR8H9/2/](http://jsfiddle.net/DR8H9/2/)

我的问题是，如果宽度设置为精确大小，则 div 仅直接显示在链接下方。如果有人要更改浏览器窗口的大小，那将不再正确。

```
.diva
{
  width: 100%;
  height: 35px;
  background: #ccc;
  color: #fff;
  padding: 10px;
  text-align: center;
}

.thisguy
{
  color: #fff;
  background: #000;
  display: block;
  width: 75px;

  position: absolute;
  top: 26px;
  left: 410px;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:52:27.100

我在**JSFiddle**上写了一些代码，看看：[link](http://jsfiddle.net/J2dqY/1/)

基本上我正在做的是在**CSS**中：

```
.panel{
    position:relative;
    height: 30px;
    width: 100%;
    background-color:grey;
  }

  .box{
     position:relative;
     height: 300px;
     width: 300px;
     left: 235px;
     background-color:red;
  } 
```

在**HTML**

```
<div class="panel"></div>
<div class="box"></div> 
```

您必须更具体地说明您希望此框如何显示（相对于其他类或绝对）。但这是一般的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:43:07.067

这个怎么样？

```
<div id="first"><div></div><div> 
```

和CSS

```
#first{position:relative; width:100%; height:20px; background-color:green; }
#first div{position:absolute; top:100%; left:50px; height:30px; width:30px; background-color:red;} 
```

[您可以在此处](http://jsfiddle.net/tR9rg/)查看示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:41:35.227

然后使用 jQuery 获取您单击的链接的位置，然后设置 div 的位置

那么这样的事情应该可以工作

```
$(document).ready(function () {

$('.thisguy').hide();

$('.diva a').click(function() {

var pos=$(this).position();
$('.thisguy').css({'top':pos.top+25+"px",'left':pos.left-1+"px"});

$('.thisguy').toggle();

});

$(window).resize(function() {  
     $('.thisguy').hide();
});  

}); 
```

如果有人要调整他们的窗口大小，那么我会使用 jQuery 来隐藏 div，或者你将不得不尝试做一些编码来检查调整大小，然后再次重新定位 div。

试试这个[http://jsfiddle.net/trekmp/kJaEc/](http://jsfiddle.net/trekmp/kJaEc/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T15:18:50.820

这是使用您自己的代码的解决方案：

[JSFiddle 解决方案](http://jsfiddle.net/UvvBS/5/)

基本上你所缺少的只是`margin-left:auto; margin-right:auto;`你的`.thisguy`班级。它将在页面上居中。现在，如果您添加更多链接...我们可能需要查看...

# java - 这种情况会是mongodb服务器的错误吗？

> ID：14360790
> 
> 赞同：0
> 
> 时间：2013-01-16T14:36:34.497
> 
> 标签：java, mongodb

今天我尝试用`$set`一​​个 DBRef`$db`来收集。

但是服务器说：“not okForStorage”，所以操作失败。

附言。我的`mongod`版本是2.2

```
{
  "ts" : ISODate("2013-01-16T14:05:42.814Z"),
  "op" : "update",
  "ns" : "mydb.coll1",
  "query" : {
    "_id" : NumberLong("928686353793211381")
  },
  "updateobj" : {

    "$set" : {
    "ref" : {
      "$db" : "db2",
      "$ref" : "coll2",
      "$id" : NumberLong("928686353793211381")
      }
    }
  },
  "nscanned" : 1,
  "keyUpdates" : 0,
  "numYield" : 0,
  "lockStats" : {
    "timeLockedMicros" : {
      "r" : NumberLong(0),
      "w" : NumberLong(200)
    },
    "timeAcquiringMicros" : {
      "r" : NumberLong(0),
      "w" : NumberLong(5)
    }
  },
  "exception" : "not okForStorage",
  "exceptionCode" : 12527,
  "millis" : 0,
  "client" : "10.168.89.9",
  "user" : ""
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:07:00.277

根据[文档](http://docs.mongodb.org/manual/applications/database-references/#format)， DBRef 中字段的顺序很重要；所以你需要将你的`ref`对象重新排序为：

```
"ref" : {
  "$ref" : "coll2",
  "$id" : NumberLong("928686353793211381"),
  "$db" : "db2"
} 
```

# ios - ios相机获取拍摄照片的日期

> ID：14360791
> 
> 赞同：2
> 
> 时间：2013-01-16T14:36:37.440
> 
> 标签：ios, uiimagepickercontroller

在我的应用程序中，我有一个自定义相机类，所以我可以拦截相机按钮的动作。我想知道拍摄这张照片的确切时间。因此，当按下相机按钮时，我从最近的`ntp`服务器获取原子时间并调用`UIImagePickerController's`takePicture 函数。

当拍摄我在函数中使用的相同原子钟时间的照片时，我发现我获取的时间与原子钟上的时间之间存在差异。我猜这种差异正是相机拍摄图像所需的时间。

当自动对焦调整图像时，这种差异甚至更大。

有没有办法在快门关闭时拦截动作？

# c# - 当控件重叠时，如何确保单击正确的控件？

> ID：14360799
> 
> 赞同：2
> 
> 时间：2013-01-16T14:36:53.287
> 
> 标签：c#, controls, transparent, overlapping

我在一个表单上创建了许多透明控件，每个控件都显示一个十六进制形状，它们被分组为一个地图，这样六边形是边到边的。当然，每个十六进制都包含在一个方形控件中，因此它们与每个相邻的十六进制重叠。我希望能够在十六进制内单击以使其突出显示。但是，除非我在没有重叠的十六进制中间单击，否则根据控件的堆栈顺序，单击事件将被顶部的任何控件拾取，不一定是我想要的控件。所以在我看来，我需要做两件事：

1.  我需要确保光标位于六角形内（每个六角形的边缘之间有一个小间隙）。因此，如果我单击控件的一个角，该控件将不会响应该单击，因为它位于十六进制之外。
2.  当我单击时，我需要确定哪个控件拥有我单击的十六进制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:59:39.147

我不能给你代码，因为我需要花一些时间来编写确切的代码，但我确实有一个关于如何实现它的建议......

1) 找出鼠标可能点击的所有控件。也许您可以通过计算鼠标相对于所有控件的位置并寻找重叠点来做到这一点

2）遍历所有潜在的候选并计算鼠标点和每个控件的中心点之间的距离（[这可能会有所帮助](https://stackoverflow.com/questions/3819396/how-can-i-measure-diagonal-distance-points)）。正确的控制将是距离最短的控制

你将需要把你的数学放在这一点上！

* * *

解决方案：

这行得通，我已经测试过了。我有：一个绘制形状的用户控件，这称为“ClickControl”。我所有的 ClickControls 都在一个`Panel`被调用的`mainPanel`. 每个 ClickControl 都`MouseClick`注册了相同的事件，在本例中为`control_MouseClick`事件。考虑到所有这些，这里是示例代码：

```
void control_MouseClick(object sender, MouseEventArgs e)
{
    //get mouse point relative to panel
    var mousePoint = panelMain.PointToClient(Cursor.Position);
    int startX = mousePoint.X;
    int startY = mousePoint.Y;

    //store the best match as we find them
    ClickControl selected = null;
    double? closestDistance = null;

    //loop all controls to find the best match
    foreach (Control c in panelMain.Controls)
    {
        ClickControl control = c as ClickControl;
        if (control != null)
        {
            //calculate the center point of the control relative to the parent panel
            int endX = control.Location.X + (control.Width / 2);
            int endY = control.Location.Y + (control.Height / 2);

            //calculate the distance between the center point and the mouse point
            double distance = Math.Sqrt(Math.Pow(endX - startX, 2) + Math.Pow(endY - startY, 2));

            //if this one is closer then we store this as our best match and look for the next best match
            if (closestDistance == null || closestDistance > distance)
            {
                selected = control;
                closestDistance = distance;
            }
        }
    }

    //`selected` is now the correct control
} 
```

我敢肯定，如果您遇到性能问题，可以进行大量优化，但这至少是一个工作的开始！

# java - Camel 将 Java DSL 转换为 Spring DSL

> ID：14360801
> 
> 赞同：0
> 
> 时间：2013-01-16T14:36:58.913
> 
> 标签：java, spring, apache-camel

我是 Camel 的新手，我仍在学习它，据我了解，您可以在 Spring DSL 中做与 Java DSL 相同的事情。我想知道的是你如何将一个转换为另一个？我经常看到 Java 中的一些例子，但我想

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:53:28.950

`Java DSL`基本上和之间的区别在于`Spring XML`，第一个是通过方法完全用`Java`语言`RouteBuilder#configure()`编写的，第二个是用`XML`. 你可以使用 ANY 来实现你需要的东西。在某些情况下`Java DSL`更多`clean`，而在其他情况下`XML`配置文件可能更可取。

[这里](http://camel.apache.org/java-dsl.html)是 Java DSL 的例子，而[这里](http://camel.apache.org/spring.html)是 Spring XML。

# c++ - 如何在多个单元测试中使用用户输入变量？

> ID：14360802
> 
> 赞同：3
> 
> 时间：2013-01-16T14:37:01.043
> 
> 标签：c++, unit-testing, global-variables, googletest

我有一个 C++11 项目，其中有许多 googletest 单元测试看起来像

```
TEST_F(GTest, testSomething) {
    int64_t n = 42;
    // following code depends on input size n
    ...
} 
```

`n`我希望能够从一个位置（最好是命令行）设置输入大小，而不是在每个测试中都有一个局部常量：

```
./RunMyProgram --gtest_filter=* --n=1000 
```

`main`应该看起来像：

```
int main(int argc, char **argv) {

     // TODO: parse command line argument n here

    INFO("=== starting unit tests ===");

    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();

} 
```

`?`我应该在我的测试功能中替换什么？

```
TEST_F(GTest, testSomething) {
    int64_t n = ?;
    // following code depends on input size n
    ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T14:55:21.393

首先，如果您在多个测试函数中使用相同的值/参数，请考虑使用 Fixtures。

您要为我做的事情看起来像是“值参数化测试”。我想这在测试世界中相当普遍，而且 - tadaa，谷歌测试在其高级指南中有一个章节，称为[“值参数化测试”](https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#value-parameterized-tests)（哦，它使用固定装置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:58:17.473

如果您使用的是*gtest*，您也可以查看[gflags](http://code.google.com/p/gflags/)。然后`main.cpp`你可以定义命令行参数：

```
DEFINE_int64(n, 0, "some input arg"); 
```

然后在你的测试代码中你可以声明它：

```
DECLARE_int64(n); 
```

在您的测试中，您会像这样使用它：

```
int64_t n = FLAGS_n; 
```

当然，如果您想手动解析标志，那么您可以`main.cpp`自己定义它：

```
int64_t FLAGS_n; 
```

然后在您的测试文件中声明它：

```
extern int64_t FLAGS_n; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:45:23.310

你不能那样做，你需要自己解析命令行参数（除了`InitGoogleTest`）并使用例如全局变量提供你的值。

# c - Doxygen：在源代码浏览器中隐藏部分源代码

> ID：14360803
> 
> 赞同：4
> 
> 时间：2013-01-16T14:37:04.077
> 
> 标签：c, hide, doxygen

1.  一般来说，我希望 Doxygen 允许查看文档文件的源代码。但我希望**隐藏部分源代码**。我知道如何强制 Doxygen 不记录某些代码（例如使用 /cond /endcond），但是当单击“转到此文件的源代码”时它仍然会出现。

    我真正想要的是：如果某些内容没有以 Doxygen 样式注释，则它根本不会出现在任何地方，不会出现在文档中，也不会出现在“转到此文件的源代码”中。这应该是函数以及#-defines 或其他的情况。

2.  我使用@hideinitializer 来隐藏#-defines 的初始化程序。这在文档中运行良好。但同样，初始化程序仍然显示在源代码中。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:01:55.920

[`INPUT_FILTER`](http://www.doxygen.nl/manual/config.html#cfg_input_filter)您可以通过使用该选项指定过滤器脚本/程序来预处理源文件。然后，通过设置[`FILTER_SOURCE_FILE = YES`](http://www.doxygen.nl/manual/config.html#cfg_filter_source_files)，过滤后的源代码将在源浏览器中使用，而不是在原始源中使用。

从文档：

> INPUT_FILTER 标记可用于指定 doxygen 应调用的程序来过滤每个输入文件。Doxygen 将通过执行（通过 popen()）命令来调用过滤程序：
> 
> `<filter> <input-file>`
> 
> 其中 是 INPUT_FILTER 标记的值， 是输入文件的名称。然后 Doxygen 将使用过滤器程序写入标准输出的输出。

和

> 如果 FILTER_SOURCE_FILES 标记设置为 YES，则输入过滤器（如果使用 INPUT_FILTER 设置）也将用于过滤用于生成要浏览的源文件的输入文件（即，当 SOURCE_BROWSER 设置为 YES 时）。

* * *

作为一个粗略的例子，使用以下源（保存`filter.py`在与 Doxyfile 相同的位置，并使其可执行）：

```
#!/usr/bin/env python
import fileinput, re

# output all lines that does not start with // (but allow //!)
for line in fileinput.input():
  if not re.match(r'\s*//(?![!])', line):
    print line, 
```

在 Doxyfile 中，设置：

```
INPUT_FILTER = ./filter.py
FILTER_SOURCE_FILE = YES 
```

输出源浏览器现在将只显示不以`//`.

自然地，创建一个过滤脚本来丢弃所有 C 风格的注释，除了那些与 doxygen 相关的注释，这比上面显示的要复杂得多。

# windows - git在文件路径中用括号添加补丁

> ID：14360804
> 
> 赞同：1
> 
> 时间：2013-01-16T14:37:06.080
> 
> 标签：windows, git, cmd, git-patch

我想`git add -p`在包含括号的完整路径的文件上运行，如下所示：

```
git add -p "(External)/Project/Filename.cs" 
```

但是，当我运行它时，我收到以下错误：

```
sh: -c: line 0: syntax error near unexpected token `('
sh: -c: line 0: `git ls-files -- (External)/Project/Filename.cs' 
```

我也尝试过使用 转义括号`\`，但我得到了同样的错误。为了比较，正则`git add`表达式的括号没有问题。

如何将此文件传递给`git add -p`？

编辑：我使用 Windows 似乎很相关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:25:15.757

您的外壳错误地转义括号很可能有问题。

使用以下内容，对我有用（不需要引号，只用反斜杠转义括号）：

```
git add -p \(External\)/Project/Filename.cs 
```

为了正确进行转义，我发现使用 bash 的自动完成功能非常有帮助，如下所示有助于以“bash-safe”方式构造文件名。

```
git add -p \(E[tab]... 
```

如果这没有帮助，您可以简单地尝试先`cd`进入“（外部）/项目”，然后使用

```
git add -p Filename.cs 
```

**更新**

如果您使用的是 W32（显然是这种情况），那么我可以确认问题。到目前为止，我发现的唯一解决方法是使用`git gui`，这只是一个不错的前端，`git add -p`并且似乎可以工作，即使有括号也是如此。

# performance - Oracle AWR 报告中 Elap per Exec (s) 的含义

> ID：14360816
> 
> 赞同：0
> 
> 时间：2013-01-16T14:37:39.703
> 
> 标签：performance, oracle10g

在按 Elapsed Time / Elap per Exec (s) 排序的 SQL 中——这是 sql 的结果到达客户端的时间？

我阅读了这篇文档 How to identify Resource Intensive SQL where

其中定义响应时间 = 服务时间 + 等待时间

响应时间 = 经过的时间 (s) 吗？或只是服务时间的一部分

谢谢

* * *

刚从甲骨文论坛得到这个：

(1) Elapsed Time = “CPU Time” + “Non-Idle Wait Time” + “Elapsed Time Unaccounted-for”。

(2) Response Time Accounted-for = "Elapsed Time" + "Idle Wait Time"。

(3) 总响应时间=“已计入响应时间”+“未计入响应时间”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:19:48.307

这些时间都不包括数据到达客户端的时间。

在实践中，响应时间 = 经过的时间，或多或少。

已用时间包括解析 SQL 语句、执行它和获取结果（如果是 SELECT）的时间。

例如，它*确实*包括服务器必须等待从磁盘读取数据的时间。

但是，它不*包括*从客户端到服务器并返回的网络往返时间——Oracle 服务器无法测量该时间。

根据我的经验，如果您正在寻找资源密集型 SQL，则首先要考虑 CPU 时间和磁盘等待。如果响应时间远高于总和，那么您将进入高级领域。我从来不需要查看空闲等待或下落不明的时间。

# emacs - dolist 将参数绑定到符号

> ID：14360819
> 
> 赞同：2
> 
> 时间：2013-01-16T14:37:45.063
> 
> 标签：emacs, lisp, elisp

在这段代码中，dolist 将 x 绑定到符号 'foo 和 'bar。

```
(dolist (x '(foo bar))
  (print (symbolp x) t)) 
```

如果我想使用 foo 和 bar 的值，这是一个问题，例如：

```
(dolist (x '(foo bar))
  (print x t)) 
```

如何绕过它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T14:45:45.867

`x`绑定到符号`foo`，`bar`因为`'(foo bar)`是一个包含符号`foo`和的列表`bar`。如果您想要一个包含变量`foo`和值的列表`bar`，您可以使用`(list foo bar)`.

# sql - 选择 sum where 子句 SQL

> ID：14360822
> 
> 赞同：12
> 
> 时间：2013-01-16T14:37:46.780
> 
> 标签：sql, math

我有以下代码，它有效，但我试图为每个 Banksphere.servicio_id 列分隔 SUM，此代码 SUM 只有一个 servicio_id ......我有点迷茫，有人可以帮助我吗？

如您所见，每个 WHERE 子句都完全相同，但 Banksphere.peticion_id 是唯一更改的子句……所以也许有更好的方法来过滤一次通用子句，只为 OK 和 KO 留下 peticion_id？

```
SELECT
(SELECT
    SUM(valor)
FROM
    Banksphere
WHERE
    Banksphere.fecha = '2013-01-14'
AND
    Banksphere.servicio_id = '6'
AND
    Banksphere.entidad_id = '2'
AND
    Banksphere.peticion_id = '0') AS OK,
(SELECT
    SUM(valor)
FROM
    Banksphere
WHERE
    Banksphere.fecha = '2013-01-14'
AND
    Banksphere.servicio_id = '6'
AND
    Banksphere.entidad_id = '2'
AND
    Banksphere.peticion_id = '1') AS KO 
```

使用工作代码编辑

```
SELECT  Servicios.nombre as servicio,
        SUM(case when peticion_id = '0' then valor end) as OK,
        SUM(case when peticion_id = '1' then valor end) as KO
FROM    Banksphere
INNER JOIN
    Servicios
ON
    Banksphere.servicio_id = Servicios.id
WHERE   Banksphere.fecha = '2013-01-14'
        AND Banksphere.entidad_id = '2'
        AND Banksphere.peticion_id in ('0', '1')
group by Servicios.nombre 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-16T14:42:11.413

我认为您想要以下方面的内容：

```
SELECT  banksphere.servicio_id, SUM(valor),
        SUM(case when peticion_id = '0' then valor end) as OK,
        SUM(case when peticion_id = '1' then valor end) as KO
FROM    Banksphere
WHERE   Banksphere.fecha = '2013-01-14'
        AND Banksphere.entidad_id = '2'
        AND Banksphere.peticion_id in ('0', '1', ...)
group by banksphere.servicio_id 
```

这有一个`group by`所以你可以获得多个“servicio_ids”，它为 OK 和 KO 添加了单独的列。如果您只想要 servicio_id = 6，则将其添加回`where`子句中。而且，您可能还需要其他变量`group by`，但您只在问题中提及服务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T14:41:42.243

```
SELECT  servicio_id,
        entidad_id,
        SUM(CASE WHEN peticion_id = 0 THEN valor ELSE 0 END) OK,
        SUM(CASE WHEN peticion_id = 1 THEN valor ELSE 0 END) KO
FROM    BankSpehere
WHERE   fecha = '2013-01-14' AND 
        entidad_id = '2' AND 
        peticion_id in ('0', '1')
GROUP BY servicio_id, entidad_id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T14:39:00.333

```
SELECT  SUM(valor)
FROM    Banksphere
WHERE   Banksphere.fecha = '2013-01-14'
        AND Banksphere.servicio_id = '6'
        AND Banksphere.entidad_id = '2'
        AND Banksphere.peticion_id in ('0', '1', ...) 
```

# php - JSON 数据发布但表格未填充

> ID：14360825
> 
> 赞同：0
> 
> 时间：2013-01-16T14:38:01.717
> 
> 标签：php, mysql, ajax, json, pdo

编辑：

1.  更改了 Jquery 代码以动态重新创建行仍然不行
2.  重组我的桌子仍然不行。

我有一个 php 脚本，可以将我的 db 表编码为一个数组。我回显了 json_encode，它回显得很好。脚本 ：

```
<?php
$host="localhost"; // Host name
$username="root"; // Mysql username
$password="testdbpass"; // Mysql password
$db_name="test"; // Database name

// Connect to server via PHP Data Object
$dbh = new PDO("mysql:host=localhost;dbname=test", $username, $password);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$array = $dbh->query("SELECT id, anum, first, last,
                        why, comments, aidyear, additional_req,
                        signintime FROM inoffice WHERE 
                        counselorname IS NULL")->fetchAll(PDO::FETCH_ASSOC);
echo json_encode($array);

?> 
```

然后我有一个应该提取数据然后将其放入表中的页面。出于某种原因，我无法将其发布到该页面上的第一个表中。

这些是我在页面上运行的 jquery 脚本：

```
 <head>
    <script src="core/media/js/jquery.js" type="text/javascript"></script>
    <script src="core/media/js/jquery.dataTables.js" type="text/javascript"></script>
    <script type="text/javascript" src="core/media/js/install.js"></script>
    <script type="text/javascript">
    $.ajax({
    url: 'core/media/js/getdatainoffice.php',
    type: 'GET',
    async: false,
    dataType: 'json',
    success: function (result) {

        var insert = '';

        $.each(result, function() {
            insert += '<tr><td>' + id + '</td><td>' + anum + '</td><td>' + first + '</td><td>' + last + '</td><td>' + why + 
                        '</td><td>' + comments + '</td><td>' + additional_req + '</td><td>' + aidyear + '</td><td>' 
                        + signintime + '</td></tr>';
        });
        $('#datatables tr').after(insert);
    }

});

    </script> 
```

我是否需要在我的 jquery ajax 中为每个表数据创建一个数组，或者根据我的理解，我认为 json 处理数组的编码方式。

这是我的桌子：

```
 table id='datatables' class='display'>
                <thead>
                    <tr>
                 <th>Session ID </th>                        
                 <th>A Number</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Reason for visit</th>
                        <th>Comments</th>
                        <th>Aid Year</th>
                        <th>Additional Requirements</th>
                        <th>Signin Time</th>
                    </tr>
                </thead>
                    <tbody>

                </tbody>
        </table> 
```

任何帮助或解释都会很可爱。我一直在阅读这个[网站](http://www.jquery4u.com/json/ajaxjquery-getjson-simple/)，但无济于事。

JSON数组：

> [{"id":"7","anum":"B00000000","first":"rixhers","last":"ajazi","why":"Other","comments":"需要一些帮助!!!","additional_req":"","aidyear":"12-13","signintime":"2013-01-16 09:08:35"},{"id":"8", "anum":"A00000000","first":"rixhers","last":"ajazi","why":"Appeal","comments":"","additional_req":"","aidyear": "12-13","signintime":"2013-01-16 09:28:57"},{"id":"9","anum":"A00000000","first":"rixhers","最后":"ajazi","为什么":"上诉","comments":"","additional_req":"","aidyear":"12-13","signintime":"2013-01-16 10:12:07"} ,{"id":"10","anum":"A00000000","first":"rixhers","last":"ajazi","why":"Appeal","comments":""," Additional_req":"","aidyear":"12-13","signintime":"2013-01-16 11:19:18"}]rixhers","last":"ajazi","why":"Appeal","comments":"","additional_req":"","aidyear":"12-13","signintime":"2013- 01-16 11:19:18"}]rixhers","last":"ajazi","why":"Appeal","comments":"","additional_req":"","aidyear":"12-13","signintime":"2013- 01-16 11:19:18"}]

更多信息：我正在使用一个名为 datatables 的 jquery 插件，我需要填充该表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:44:50.257

```
 $.(#datatables).append(data) 
```

在你运行它的时候，`data`是一个数组。您不能只是将一些随机的 javascript 数据结构附加到 DOM 中 - 您必须从该数组中的数据实际构建表行。例如

```
html = ''
for (x in data) {
   html += '<tr><td>' + data['somefield'] + '</td></tr>';
}
$('#datatables').append(html); 
```

如果您对这些数据所做的只是将其填充到 html 表中，那么在 PHP 中在服务器上构建 html 并将其作为单个字符串推送到网络上可能会更容易。

# ruby-on-rails - 安装 sqlite3 (1.3.5) 时出错

> ID：14360827
> 
> 赞同：2
> 
> 时间：2013-01-16T14:38:06.727
> 
> 标签：ruby-on-rails, heroku

从昨天开始，我一直在尝试运行 git push heroku master。我已经进行了搜索，但没有任何解决问题的方法。我正在关注[http://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)。我之前刚刚运行了 heroku create 命令，现在我必须推送它。如您所见，我收到错误消息。任何帮助将不胜感激，所以我可以继续教程:)

```
lexi87$ git push heroku master
Counting objects: 64, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (51/51), done.
Writing objects: 100% (64/64), 26.00 KiB, done.
Total 64 (delta 3), reused 0 (delta 0)
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.0.pre.5
       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
       Fetching gem metadata from https://rubygems.org/.........
       Fetching gem metadata from https://rubygems.org/..
       Installing rake (10.0.3)
       Installing i18n (0.6.1)
       Installing multi_json (1.5.0)
       Installing activesupport (3.2.11)
       Installing builder (3.0.4)
       Installing activemodel (3.2.11)
       Installing erubis (2.7.0)
       Installing journey (1.0.4)
       Installing rack (1.4.4)
       Installing rack-cache (1.2)
       Installing rack-test (0.6.2)
       Installing hike (1.2.1)
       Installing tilt (1.3.3)
       Installing sprockets (2.2.2)
       Installing actionpack (3.2.11)
       Installing mime-types (1.19)
       Installing polyglot (0.3.3)
       Installing treetop (1.4.12)
       Installing mail (2.4.4)
       Installing actionmailer (3.2.11)
       Installing arel (3.0.2)
       Installing tzinfo (0.3.35)
       Installing activerecord (3.2.11)
       Installing activeresource (3.2.11)
       Installing coffee-script-source (1.4.0)
       Installing execjs (1.4.0)
       Installing coffee-script (2.2.0)
       Installing rack-ssl (1.3.2)
       Installing json (1.7.6)
       Installing rdoc (3.12)
       Installing thor (0.16.0)
       Installing railties (3.2.11)
       Installing coffee-rails (3.2.2)
       Installing jquery-rails (2.1.4)
       Using bundler (1.3.0.pre.5)
       Installing rails (3.2.11)
       Installing sass (3.2.5)
       Installing sass-rails (3.2.6)
       Installing sqlite3 (1.3.5)
       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for sqlite3.h... no
       sqlite3.h is missing. Try 'port install sqlite3 +universal'
       or 'yum install sqlite-devel' and check your shared library search path (the
       location where your sqlite3 shared library is located).
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:
       --with-opt-dir
       --without-opt-dir
       --with-opt-include
       --without-opt-include=${opt-dir}/include
       --with-opt-lib
       --without-opt-lib=${opt-dir}/lib
       --with-make-prog
       --without-make-prog
       --srcdir=.
       --curdir
       --ruby=/usr/local/bin/ruby
       --with-sqlite3-dir
       --without-sqlite3-dir
       --with-sqlite3-include
       --without-sqlite3-include=${sqlite3-dir}/include
       --with-sqlite3-lib
       --without-sqlite3-lib=${sqlite3-dir}/lib
       --enable-local
       --disable-local
       Gem files will remain installed in /tmp/build_ry8rc70jirtv/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.5 for inspection.
       Results logged to /tmp/build_ry8rc70jirtv/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.5/ext/sqlite3/gem_make.out
       An error occurred while installing sqlite3 (1.3.5), and Bundler cannot continue.
       Make sure that `gem install sqlite3 -v '1.3.5'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:boiling-waters-1006.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:boiling-waters-1006.git' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:42:55.970

Heroku 不支持 SQLite 数据库。该错误是因为提供的机器 heroku 没有安装必要的 SQLite 库

```
checking for sqlite3.h... no 
```

您需要使用 Postgres。在您的`Gemfile`添加中：

```
group :production, :staging do
  gem "pg"
end

group :development, :test do
  gem "sqlite3-ruby"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:35:28.590

我需要运行这个命令 rm -rf .bundle && bundle install && git add Gemfile.lock && git commit -m "Added Gemfile.lock"

现在它完美无缺。

# php - 使用 PHP 作为 ODBC 提供程序？

> ID：14360832
> 
> 赞同：0
> 
> 时间：2013-01-16T14:38:09.003
> 
> 标签：php, odbc

我有一个专有的商业软件，可以使用 ODBC 作为数据源，通过 order_id 检索订单数据。然而，要获取的数据分布在不同的数据源（MySQL、JavaDB）上，需要在将其传递给软件之前进行处理。不幸的是，它还需要非常快，这会取消预处理并将其保存到具有 ODBC 的 MySQL 中。

因此，我正在寻找一种最好在 PHP 中实现 ODBC 提供程序的方法？

有什么建议去哪里看吗？

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:04:13.717

尝试使用 PHP PDO 使用 pdo 可以连接 odbc、mysql、oracle 等 [http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

# twitter-bootstrap - 如何更改 compass twitter bootstrap 的响应变量

> ID：14360833
> 
> 赞同：0
> 
> 时间：2013-01-16T14:38:09.547
> 
> 标签：twitter-bootstrap, compass-sass

在这里，我面临一个问题，`compass_twitter_bootstrap_responsive`一切似乎都工作正常，但`@media (min-width: 1200px)`正在制造问题。我想更改变量，`$gridColumnWidth1200: 70px !default;`但它不起作用。但是，我`$gridColumnWidth: 60px !default;`只是通过将变量放在我的 scss 文件的顶部来更改它。但同样的过程不适用于响应变量。

任何想法如何解决它。任何帮助将不胜感激。提前感谢回复者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:47:43.483

Omg .. 很长一段时间后，我再次尝试。它的相同过程只是清除了顶部的变量。我刚刚卸载了 compass、sass 和 compass twitter bootstrap 并再次重新安装了它。它解决了... :)

# jquery - 内容固定在底部

> ID：14360834
> 
> 赞同：0
> 
> 时间：2013-01-16T14:38:16.107
> 
> 标签：jquery, css, scroll, fixed

```
$(window).scroll(function(){
    $("#theFixed").css("bottom",Math.max(0,250-$(this).scrollTop()));
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
<div id="theFixed" style="position:fixed;top:250px;background-color:red">SOMETHING</div>

STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>STUFF <BR>
```

...几乎可以工作，但是滚动更改的高度，`theFixed`我该如何解决？

编辑：也许我不清楚，我不需要将内容固定在“窗口”或外部容器的底部，我可以使用 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:58:40.497

`height`您可以使用 CSS属性显式设置所需的高度：

```
$(window).scroll(function() {
  $("#theFixed").css("bottom", Math.max(0, 250 - $(this).scrollTop()));
});
```

```
#theFixed {
  height: 20px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
<div id="theFixed" style="position:fixed;top:250px;background-color:red">SOMETHING</div>

STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>STUFF
<BR>
```

此外，与您的问题无关，但作为一般建议：当您为事件等注册事件侦听器时`scroll`，`resize`您通常还希望消除*事件*处理程序的执行，以便 UI 保持对其他类型事件的响应。

更多关于[事件去抖动](https://davidwalsh.name/javascript-debounce-function)的信息。

# string - Coldfusion 字符串 == 真或空 == 假？

> ID：14360835
> 
> 赞同：14
> 
> 时间：2013-01-16T14:38:17.413
> 
> 标签：string, coldfusion, boolean, coldfusion-8

我习惯于使用 PHP 和 JavaScript，但我现在已经开始在 Coldfusion 中开展一个项目。

在 PHP 中，我习惯于字符串是“真”，而空/空是“假”。

这似乎不适用于 ColdFusion（特别是 v8）。

我想做以下工作，但无法弄清楚如何让 CF 将字符串视为真实：

```
<cfset x = "path\to\something.cfm">
<cfif x>
    x is truthy
<else>
    x is falsy
</cfif> 
```

我总是得到错误：`cannot convert the value "path\to\something.cfm" to a boolean`

*   `isBoolean()`有点作品，但感觉不够健壮。
*   似乎没有 `isString() - 但无论如何这将是上面的问题
*   `YesNoFormat()`奇怪地给了我同样的错误（与我应该做的完全相反）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-16T14:46:11.567

ColdFusion 有一些类似的“真实性”功能。

以下将评估为*真*

*   字符串“true”或“yes”（不区分大小写）
*   任何非零数
*   价值`true`

以下将评估为*假*

*   字符串“false”或“no”（不区分大小写）
*   零
*   价值`false`

在 CF 中，我们通常使用该`len()`函数来确定字符串中是否包含任何内容。由于非零数的计算结果为“真”，因此这是可行的。

您的伪代码将是：

```
<cfset x = "path\to\something.cfm">
<cfif len(x)>
    x is truthy
<else>
    x is falsy
</cfif> 
```

由于 ColdFusion 将 null 转换为空字符串，`trim()`因此结合使用将是一个好主意，如下所示：`<cfif len(trim(x))>`.

没有`isString()`功能，但有`isValid()`：`isValid("string",x)`

`YesNoFormat()`只需将布尔值转换为格式良好的“是”或“否”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T15:04:50.120

除了 ale 的答案 ( `<cfif len(x)>`)，我还想指出，您还会看到人们使用稍微不同的语法：

```
<cfif x neq "">
    x is truthy
<cfelse>
    x is falsy
</cfif> 
```

该语句非常接近您最初的尝试，但它只是检查它是否为空字符串，而不是比较字符串以查看它是否完全相同（与您最初的尝试一样）。

在 Stack Overflow 上讨论了哪种方法更有效和更易读： [len(x) better or x NEQ "" better in CFML?](https://stackoverflow.com/questions/6864594/lenx-better-or-x-neq-better-in-cfml)

这都是主观的……虽然我更喜欢 ale 的方法，但为了完整性，我也想指出另一种方法。

# css - Magento：自定义菜单扩展 - CSS 到中心菜单

> ID：14360836
> 
> 赞同：1
> 
> 时间：2013-01-16T14:38:23.527
> 
> 标签：css, magento, menu, center

我使用[Magento 的自定义菜单扩展，](http://www.magentocommerce.com/magento-connect/custom-menu.html)但不知道如何更改 custommenu.css 以使菜单居中。这是一段菜单代码：

```
<div class="nav-container">
  <div id="custommenu">
    <div id="menu3" class="menu" onmouseout="wpHideMenuPopup(this, event, 'popup3', 'menu3')" onmouseover="wpShowMenuPopup(this, 'popup3');">
    <div id="popup3" class="wp-custom-menu-popup" onmouseover="wpPopupOver(this, event, 'popup3', 'menu3')" onmouseout="wpHideMenuPopup(this, event, 'popup3', 'menu3')" style="z-index: 9999;">
    <div id="menu4" class="menu" onmouseout="wpHideMenuPopup(this, event, 'popup4', 'menu4')" onmouseover="wpShowMenuPopup(this, 'popup4');">
    <div id="popup4" class="wp-custom-menu-popup" onmouseover="wpPopupOver(this, event, 'popup4', 'menu4')" onmouseout="wpHideMenuPopup(this, event, 'popup4', 'menu4')" style="display: none; top: 25px; left: 77px; z-index: 10000;">
... rest of code... 
```

这就是我在 CSS 中尝试的方法 - text-align for #custommenu + display:inline-block for div.menu （以及其他一些选项）但无法正常工作：

```
#custommenu {
    position:relative;
    font-size: 14px;
    margin: 0 auto;
    padding: 0 16px;
    width: 918px;
    z-index: 999;
    text-align: center;    
}
div.menu {
    display:inline-block;
    float: left;
} 
```

你能给我一些提示如何让菜单居中吗？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:11:48.760

我不确定这是否会解决您的 CSS 问题，但您的`<div>`s 未关闭：

**更正的 HTML：**

```
<div class="nav-container">
<div id="custommenu">
    <div id="menu3" class="menu" onmouseout="wpHideMenuPopup(this, event, 'popup3', 'menu3')" onmouseover="wpShowMenuPopup(this, 'popup3');"></div>
    <div id="popup3" class="wp-custom-menu-popup" onmouseover="wpPopupOver(this, event, 'popup3', 'menu3')" onmouseout="wpHideMenuPopup(this, event, 'popup3', 'menu3')" style="z-index: 9999;"></div>
    <div id="menu4" class="menu" onmouseout="wpHideMenuPopup(this, event, 'popup4', 'menu4')" onmouseover="wpShowMenuPopup(this, 'popup4');"></div>
    <div id="popup4" class="wp-custom-menu-popup" onmouseover="wpPopupOver(this, event, 'popup4', 'menu4')" onmouseout="wpHideMenuPopup(this, event, 'popup4', 'menu4')" style="display: none; top: 25px; left: 77px; z-index: 10000;"></div>
</div>
</div> 
```

如果您无权访问 CSS 文件来编辑它，您可以尝试将其包装`<div class="nav-container">`在另一个`<div>`.

**例子：**

```
<div class="nav-wrapper">
    <div class="nav-container">
        <div id="custommenu">
            ...
        </div>
    </div>
</div> 
```

然后像这样引用CSS：

```
div.nav-wrapper div.nav-container div#custommenu {
    position:relative;
    font-size: 14px;
    margin: 0 auto;
    padding: 0 16px;
    width: 918px;
    z-index: 999;
    text-align: center;    
}
div.nav-wrapper div.nav-container div#custommenu div.menu {
    display:inline-block;
    float: left;
} 
```

# validation - Symfony2 用于注册的单独实体验证

> ID：14360841
> 
> 赞同：1
> 
> 时间：2013-01-16T14:38:37.203
> 
> 标签：validation, symfony, entity, unique

问题是，如何为唯一用户名添加验证？我可以通过 $user->findByUsername(...) 简单地检查它，但是我不会有正确的错误

主要问题是表单实体（约束）和（ORM）实体是分开的......

用户：

```
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Security\Core\User\UserInterface;

/**
 * @ORM\Table(name="_account")
 */
class User implements UserInterface
{

/**
 * @var integer
 *
 * @ORM\Id
 * @ORM\Column(name="id", type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @var string
 * 
 * @ORM\Column(name="usrename", type="string", length=255)
 */
protected $username;

// ...........
} 
```

登记 ：

```
use Symfony\Component\Validator\Constraints as Assert;

class Registration
{

/** accountName
 * @Assert\NotBlank()
 * @Assert\Regex
 * (
 *      pattern="/^[a-zA-Z0-9]{1,}$/i",
 *      message="You use illegal character(s). Must be a-z, A-Z and 0-9 symbols."
 * )
 * @Assert\Length
 * (
 *      min="4",
 *      minMessage="User name must be more then 3 characters.",
 *      max="25",
 *      maxMessage="User name must be less then 25 characters."
 * )
 */
protected $accountName;

public function setAccountName($accountName)
{
    $this->accountName = $accountName;
}
// ............
} 
```

注册类型：

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class RegistrationType extends AbstractType
{

public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('accountName', 'text', array('label' => 'Account Name'))
            ->add('accountPass', 'repeated', array(
                'type' => 'password',
                'first_name' => 'Password',
                'second_name' => 'Confirm'))
            ->add('accountMail', 'text', array('label' => 'Account Email'))
            ->add('accountTerm', 'checkbox', array('label' => 'Our Terms of use'));
}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'Some\NewBundle\Form\Registration',
        'required' => false,
        'csrf_protection' => false
    ));
}
// ..........
} 
```

最后一个，控制器

```
class RegistrationController extends Controller
{

public function defaultAction()
{
    $form = $this->createForm(new RegistrationType(), new Registration);

    if ($this->getRequest()->isMethod('post'))
    {
        $form->bind($this->getRequest());
        if ($form->isValid())
        {
            $em = $this->getDoctrine()->getEntityManager();
            $ef = $this->get('security.encoder_factory');

            $user = new User();

            $data = $form->getData();
            $pass = $ef->getEncoder($user)->encodePassword($data->getAccountPass(), $user->getSalt());

            $user->setPassword($pass);
            $user->setUsername($data->getAccountName());
            $user->setEmail($data->getAccountMail());

            // changed from here
            $userErrors = $this->get('validator')->validate($user);
            if (count($userErrors) > 0)
            {
                foreach ($userErrors as $error)
                {
                    $form->addError(new FormError($error));
                    //$form->get($error->getPropertyPath())->addError($error->getMessage());
                }
            } else
            {
                $em->persist($user);
                $em->flush();
            }
        }
    }
    // ..............
    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:56:29.503

这是 Doctrine2 UniqueEntity 约束的工作！

```
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Security\Core\User\UserInterface;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;

/**
 * @ORM\Table(name="_account")
 * @UniqueEntity("username")
 */
class User implements UserInterface
{

/**
 * @var integer
 *
 * @ORM\Id
 * @ORM\Column(name="id", type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @var string
 * 
 * @ORM\Column(name="username", type="string", length=255, unique=true)
 */
protected $username;

// ...........
} 
```

`username`我还在列的表结构（unique=true）上添加了唯一性

**编辑：**

当您在表单中处理与持久化的实体不同的实体时，您必须明确验证 ORM 实体：

```
public function defaultAction()
{
    $form = $this->createForm(new RegistrationType(), new Registration);

    if ($this->getRequest()->isMethod('post'))
    {
        $form->bind($this->getRequest());
        if ($form->isValid())
        {
            $em = $this->getDoctrine()->getEntityManager();
            $ef = $this->get('security.encoder_factory');

            $user = new User();

            $data = $form->getData();
            $pass = $ef->getEncoder($user)->encodePassword($data->getAccountPass(), $user->getSalt());

            $user->setPassword($pass);
            $user->setUsername($data->getAccountName());
            $user->setEmail($data->getAccountMail());

            if ($this->get('validator')->validate(user))
            {
                $em->persist($user);
                $em->flush();
            }
            else
            {
                $form->addError(/* ... */);
            }
        }
    }
    // ..............
} 
```

我让您了解如何将错误添加到您的表单...

# c# - 使用线程检查与主机的网络连接时更新标签

> ID：14360846
> 
> 赞同：0
> 
> 时间：2013-01-16T14:38:42.107
> 
> 标签：c#, winforms, multithreading

我是这个线程世界的新手。我看到了一堆关于线程的教程，但我仍然觉得很难以我想要的方式使用。我想要的是在我得到 Ping 结果后立即更新标签。下面的代码运行良好，除了它在返回所有 ping 结果后一次更新所有标签。我认为使用 Thread 可以帮助我解决这个问题。

```
for (int i = 0; i < lblPings.Count; i++)
{
    Ping x = new Ping();
    if (txtTo[i].Text.Length > 0)
    {
        PingReply reply = x.Send(IPAddress.Parse(txtTo[i].Text)); 
        if (reply.Status == IPStatus.Success)
        {
            lblPings[i].Text = reply.RoundtripTime.ToString() + "ms";
            lblPings[i].ForeColor = Color.Blue;
        }
        else //if host is not reachable.
        {
            lblPings[i].Text = "Failed";
            lblPings[i].ForeColor = Color.Red;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:11:57.487

这将有助于了解幕后发生的事情。

当您在控件上设置属性时，您并*没有*告诉该控件重绘自身。相反，会发生两件事：您更改了控件在以后重绘自身时将使用的数据，并且您向窗口系统发送一条消息，说明该控件已过期。您现在必须等待窗口系统返回并在任何更新发生之前重新*绘制控件。*

这里的问题是任何重新绘制都发生在*同一*您的事件处理程序和其他正常代码使用这意味着在整个方法完成并且该线程上的控制流返回到窗口系统之前，您不可能使用您认为的普通代码来更新控件。

有几种不同的方法可以解决这个问题，例如 DoEvents 或 Invoke，但我认为大多数时候最适合 Winforms 应用程序的是使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:47:40.757

您可以使用无限期地 ping 主机并将结果存储在任何地方的线程。问题是线程无法修改 GUI 的任何内容，但有三种可能的解决方案：

*   使用[委托](http://www.codeproject.com/Articles/109000/C-Delegates-Step-by-Step)函数作为主 gui 的回调方法
*   您可以将结果存储在任何地方并通过存储在 gui 中的计时器不断检查它们
*   最后你可以使用[BeginInvoke](http://msdn.microsoft.com/en-US/library/system.windows.forms.control.begininvoke%28v=vs.100%29.aspx)方法

祝你好运！

# python - MySQL 通过感知替换时区天真的日期。[Python Django 模型]

> ID：14360857
> 
> 赞同：0
> 
> 时间：2013-01-16T14:39:22.913
> 
> 标签：python, mysql, django, datetime, timezone

我有一个包含数百万行数据的 MySQL 数据库。我还有一个应用程序负责将该数据持久保存在数据库中。

在我的应用程序设置中，我使用的是特定时区：例如：TIME_ZONE = 'America/Montreal'。

我没有使用 USE_TZ = True 参数（这就是为什么我说我的数据库中有 TimeZone 不知道日期时间）。

问题是我的服务器在蒙特利尔，但访问它的人遍布世界各地，从逻辑上讲，他们看到的日期会受到错误的解释。

所以，我已经阅读了一些关于使用 pytz 和 django.utils.timezone 的内容，但首先，我认为我应该刷新我的数据库数据条目，添加时区“粒子”，然后让我将日期时间“投射”到每个用户的时区（在演示模式下）。

这是我的方法，因为从创建数据库到现在，服务器一直在蒙特利尔，而且日期时间肯定是从那个时区开始的。但是有一天，我可能想更改服务器位置，从而更改我的 TIME_ZONE 设置，并且我希望能够显示古老的日期时间投射“FROM”创建日期时间的真实时区..

我的 python 对象属性之一的示例是 DateTime: end = models.DateTimeField(null=True, blank=True)

# android - 如何从 api14 模拟器运行应用程序到 api10 模拟器

> ID：14360862
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:39:44.547
> 
> 标签：android, android-layout, android-emulator

我在 api10 模拟器中运行应用程序时遇到问题。这个应用程序可以在 api14 模拟器中成功运行，但是当我在 api10 模拟器中运行它时，应用程序首先停止了。

这里附上了logcat信息。 ![日志信息](../Images/e483923bc70dc82d588acb86d33086ea.png)

![皮棉信息](../Images/5a7f3ba6371b422afc2ff7069c101c0c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:41:48.200

API 10 是不支持片段的姜饼，正如您在日志 cat 中看到的错误正在夸大类片段。

您要么需要使用类似的库，`ActionBarSherlock`要么 android 支持库可能允许它，或者为姜饼版本提供替代布局。

**更新** 如果您使用支持库，请确保使用`getSupportFragmentManager`not `getFragmentManager()`。

也许这个链接也将有助于[http://mobile.tutsplus.com/tutorials/android/android-compatibility-working-with-fragments/](http://mobile.tutsplus.com/tutorials/android/android-compatibility-working-with-fragments/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:49:47.593

确保您有来自支持者库的 Importet 片段：

```
import android.support.v4.app.Fragment; 
```

如果您在 Manifest 中添加了 minSDK，您可以运行 Lint 以查看您是否使用了某些受支持版本中不可用的方法。在清单中：

```
 <uses-sdk android:minSdkVersion="8" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:08:01.857

问题是您正在使用新的 API 调用。API 仅`Fragments`通过[支持库支持](http://developer.android.com/tools/extras/support-library.html)，但仅通过导入库不会自动发生更改。您必须确保使用库功能而不是较新的 API。例如，您需要更改导入以使用支持库。应该看起来像 -

```
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager; 
```

添加您需要的任何其他导入。另一个明显的区别，可能是您问题的根源是，为了托管 a `Fragment`，您需要扩展您的活动，`FragmentActivity`而不是`Activity`.

有关支持 API 与常规 API 的更多详细信息，请参阅“[使用 v4 库 API](http://developer.android.com/tools/extras/support-library.html#Using) ”。

# xml - Schematron 条件验证

> ID：14360865
> 
> 赞同：2
> 
> 时间：2013-01-16T14:39:52.070
> 
> 标签：xml, validation, xslt, schematron

我最近开始使用 schematron 来验证 xml 文档。到目前为止，我对它印象深刻，但我偶然发现了一条我无法正常工作的规则。

我在下面做了一个简单的例子。

```
<iso:assert test="ns1:some-element/text() = 'false' and /ns1:same-other-element">Error message</iso:assert> 
```

基本上我想验证两件事，如果`ns1:some-element/text()`包含'false'，`ns1:same-other-element`应该存在，并且验证确实有效。但是，当`ns1:some-element/text()`包含 false 以外的内容时，我不在乎天气 ns1:same-other-element 是否存在。

此时，当 ns1:same-other-element 缺失且 value`ns1:some-element/text()`不是 'false'时，也会触发该规则

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:02:17.607

您的测试需要评估为 true 才能通过验证（您正在对某事做出[断言](http://en.wikipedia.org/wiki/Assertion_%28computing%29)）。您目前对您的条件所说的是：文本节点的`ns1:some-element`值必须为“假”并且`ns1:some-other-element`必须存在。其他任何事情都是错误。

您可能正在寻找的条件是

```
<iso:assert test="ns1:some-element = 'false' and /ns1:same-other-element or ns1:some-element != 'false'">Error message</iso:assert> 
```

`ns1:some-element`只要具有非“假”的值，无论是否`ns1:some-other-element`存在，此条件都会为真。

# jquery - 根据博客标题生成自动唯一 ID

> ID：14360872
> 
> 赞同：0
> 
> 时间：2013-01-16T14:40:25.763
> 
> 标签：jquery, rating

我在我的博客网站上使用 polldaddys 评级脚本。我只是想知道是否可以使用 jquery 修改脚本以根据我的博客文章的标题自动添加唯一的 id？

这是 polldaddys 评分脚本

```
<div id="pd_rating_holder_6508144"></div>
<script type="text/javascript">
PDRTJS_settings_6508144 = {
        "id" : "6508144",
        "unique_id" : "",
        "title" : "",
        "permalink" : ""
};
</script>
<script type="text/javascript" src="http://i.polldaddy.com/ratings/rating.js"></script> 
```

还有我的html：

```
<div class="headline">
<div><h1>This is my title</h1></div>
</div>
<div class="blogbody">
<div><p>The body content is here</p></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:44:21.197

如果您只想获取页面的标题，请执行此操作...

```
PDRTJS_settings_6508144 = {
    "id" : "6508144",
    "unique_id" : $(".headline h1").text(),
    "title" : "",
    "permalink" : ""
}; 
```

# android - 如何在 /system/framework 中没有 odex 文件的情况下为 Android 4.0.4 重建 system.img？

> ID：14360873
> 
> 赞同：0
> 
> 时间：2013-01-16T14:40:26.903
> 
> 标签：android

按照[http://source.android.com/source/building.html](http://source.android.com/source/building.html)中列出的标准步骤，我可以构建 Android 4.0.4 模拟器。并且模拟器可以正常启动了。

但是在 中`/system/framework/`，有些文件是 odexed。例如，一个framework.jar 有一个对应的framework.odex。

然后我尝试`"make WITH_DEXPREOPT=false DISABLE_DEXPREOPT=true"`了，但徒劳无功。

重建只有 *`.jar`文件的 system.img 有哪些额外步骤`/system/framework/`？

# jquery-ui - 使用多个字段的validationengine日期验证

> ID：14360880
> 
> 赞同：0
> 
> 时间：2013-01-16T14:40:40.207
> 
> 标签：jquery-ui, validation, jquery-validation-engine

我有一个表格来收集用户的联系信息，这个表格使用 3 个字段作为出生日期。

我正在使用 Jquery UI 的 Datepicker 来选择日期，并使用 ValidationEngine（此处为[源代码，此处](https://github.com/posabsolute/jQuery-Validation-Engine)[为](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)原始开发人员）进行表单验证。

我想在提交表格之前确定日期是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:07:22.817

我建议使用最新版本的验证引擎插件。从他们的[Github 自述文件页面](https://github.com/posabsolute/jQuery-Validation-Engine#the-validationengine-with-a-datepicker)：

## 带有日期选择器的 ValidationEngine

在引擎中使用 datepicker 是有问题的，因为验证绑定到 blur 事件。由于在字段中输入任何数据之前我们失去了焦点，因此会产生一个奇怪的错误。幸运的是，我们实施了一个在日期选择器绑定期间使用延迟的修复。

* * *

要使用此模式，您需要将类 datepicker 添加到您的输入中，如下所示：

```
<input type="text" id="req" name="req" class="validate[required] text-input datepicker" value=""> 
```

那应该确保日期字段有效。我怀疑在您的情况下，您还想验证日期是否是实际有效日期，因此您可以将自定义日期检查添加到类的验证部分：

```
<input type="text" id="req" name="req" class="validate[required,custom[date]] text-input datepicker" value=""> 
```

您没有说是否需要以与验证引擎的默认 ISO YYYY-MM-DD 不同的格式验证日期，但是如果您这样做了，那么我建议您查看[这个 stackoverflow 线程](https://stackoverflow.com/questions/5465375/javascript-date-regex-dd-mm-yyyy)，它解决了这个确切的问题，似乎是针对验证引擎的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T12:39:47.340

```
$("#date_from_disp").datepicker({ changeYear: true , changeMonth: true, dateFormat: 'mm/dd/yy', altField: '#date_from' , altFormat: 'yy-mm-dd' ,yearRange: '2010:$cur_year',
            onSelect: function() { 
                $('.date_from_dispformError').hide();
            } 
    });

    $("#date_till_disp").datepicker({ changeYear: true , changeMonth: true, dateFormat: 'mm/dd/yy', altField: '#date_till' , altFormat: 'yy-mm-dd' ,yearRange: '2010:$cur_year',
    onSelect: function() { 
                $('.date_till_dispformError').hide();
            } 
    });

View full code at : http://rosevinod.wordpress.com/2014/03/15/validationengine-date-validation-using-multiple-fields/ 
```

# sql - 按组合排序

> ID：14360882
> 
> 赞同：2
> 
> 时间：2013-01-16T14:40:57.827
> 
> 标签：sql, sql-order-by, aggregate-functions, normalization, sql-function

我有一个结果集，我想在其中应用组合排序。

例子

> 从用户中选择 ID、名称

结果

```
Id  Name   
1   Albert
2   Alfred
3   Carl
4   David
5   Ernest 
```

现在，这些用户可以按最后访问、最后发布、发表的评论数或计算的参数进行排序。如果我有这样的选择，我怎么能订购：

> SELECT Id, Name, function_last_access(Id) as f1, function_last_post(Id) as f2, function_calculate_parameters(Id) as f3 FROM Users

```
Id  Name     f1   f2   f3
1   Albert   2    100  1,1
2   Alfred   10   20   2
3   Carl     0    15   5
4   David    5    2    3
5   Ernest   4    5    1 
```

最好采用不同的有序列表并在之后组合它们？或者将它们放在列中，然后应用归一化函数，然后对它们进行排序？

可以帮我按分区排序或类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:44:59.667

您可以将别名移动到子查询中，以便可以在以下位置引用它们`order by`：

```
SELECT  *
FROM    (
        SELECT  Id
        ,       Name
        ,       function_last_access(Id) as f1
        ,       function_last_post(Id) as f2
        ,       function_calculate_parameters(Id) as f3 
        FROM    Users
        ) as SubQueryAlias
order by
        0.3 * f3 + 0.2 * f2 + 0.1 * f3 desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:44:54.543

这对你有用吗？

```
SELECT Id, Name, f1, f2, f3
FROM 
(
  SELECT Id, 
    Name, 
    function_last_access(Id) as f1, 
    function_last_post(Id) as f2, 
    function_calculate_parameters(Id) as f3 
  FROM Users
) f
ORDER BY f1, f2, f3 
```

# apache - htaccess 将图片链接改写成短链接

> ID：14360885
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:41:08.247
> 
> 标签：apache, .htaccess, mod-rewrite

请我想在地址栏中将图像链接重写为一个新的短链接。我的网站包含许多不同位置的图像。所以我想显示同一目录中的所有图像：

**经验：**

```
domain.com/dir1/dir2/img1.jpg => domain.com/img1.jpg

domain.com/dir/img2.gif => domain.com/img2.gif

domain.com/dir1/dir2/dir3/dir4/img3.png => domain.com/img3.png 
```

可能吗 ？！否则我必须使用 index.php 上传主目录中的所有图像？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:32:02.910

要将根目录中的所有图像写入`dir`，请使用以下命令。您可以根据需要将其他图像扩展添加到组`(jpe?g|png|gif)`中。如果您能够将所有图像移动到`dir/`

```
RewriteEngine On
RewriteRule ^/?([^.]+)\.(jpe?g|png|gif)$ dir/$1.$2 [L] 
```

为了使您的原始想法可行，我能想到的唯一方法是使用`RewriteCond`检查给定图像的每个可能目录的方法。它将通过每条规则，直到一个匹配：

```
RewriteEngine On

# Does the file exist in dir1? (-f)
RewriteCond dir1/${REQUEST_FILENAME} -f
RewriteRule ^/?([^.]+)\.(jpe?g|png|gif)$ dir1/$1.$2 [L]
# Does it exist in dir1/sub1 ?
RewriteCond dir1/sub1/${REQUEST_FILENAME} -f
RewriteRule ^/?([^.]+)\.(jpe?g|png|gif)$ dir1/sub1/$1.$2 [L]
# Does it exist in dir2/sub1/sub2 ?
RewriteCond dir1/sub1/${REQUEST_FILENAME} -f
RewriteRule ^/?([^.]+)\.(jpe?g|png|gif)$ dir2/sub1/sub2/$1.$2 [L]
# And on and on for each directory which may have images.... 
```

显然，这不容易维护，如果您有超过 5-6 个目录，则完全无法控制。我只是不知道另一种方法来递归地进行 apache 搜索。

### 评论后更新：

如果需要先强制重定向任意目录下的图片出现在浏览器的根目录下，如：

```
example.com/uploads/0cfa524e_201446.jpg --> example.com/0cfa524e_201446.jpg 
```

将以下规则放在我上面的规则*之前。*它将强制重定向，并且在重定向之后，后续规则之一应该匹配并提供文件。

```
# Redirect any image file which is requested _inside_ a directory to appear at the root
RewriteRule ^/?.+/([^.]+)\.(jpe?g|png|gif)$ http://%{HTTP_HOST}/$1.$2 [L,R=301]

#... then add all the rules from above. 
```

# sql-server-2008 - 区分 CSV 文件中的零长度 varchar 和 NULL 值

> ID：14360889
> 
> 赞同：1
> 
> 时间：2013-01-16T14:41:13.800
> 
> 标签：sql-server-2008, ssis

考虑以下 6 行示例 CSV 文件

```
"Col1","Col2", "Col3", 
"Col1Row1","Col2Row1", 1
"Col1Row2","", 
"Col1Row3",,0
"Row 4 Example of ""double quotes"" in the data","Row 4 col 2",0
"Row 5 Example of a comma, no problem, in the data","Row 5 col 2",0
"Row 6 Example of embedded CR LF right here
 in the data","Row 6 col 2",0 
```

# 文件属性：

1.  列标题 = True
2.  列分隔符 char = 逗号
3.  文本分隔符 char = "
4.  行分隔符 = {CR}{LF}
5.  由两次连续出现的文本分隔符 char 表示的数据中的文本分隔符

# 列定义：

1.  Col1 = varchar
2.  Col2 = varchar
3.  Col3 = 数字

正如我在使用 DTS 时所记得的那样，DTS 包在处理数据中可能包含列定界符、文本定界符或行定界符的文件时没有问题。此外，它还可以区分 NULL 和非 null 值，特别是 NULL 字符串与零长度字符串。

经过我认为充分的测试后，我在此 Stack Overflow 帖子中评论说，我认为 SSIS 的 CSV 解析器根本无法处理数据中的特殊字符，例如数据中的文本分隔符或行分隔符字符。请参阅[使用 Excel 创建带有特殊字符的 CSV 文件，然后使用 SSIS 将其导入数据库](https://stackoverflow.com/questions/13239530/using-excel-to-create-a-csv-file-with-special-characters-and-then-importing-it-i)。我仍然不敢相信并再次提及它以希望我弄错了，因为对我来说 SSIS 无法处理这种情况似乎深不可测，唯一的解决方法是选择数据中不出现的文本分隔符.

但是，让我谈谈关于 NULL 值的主要问题。最近，我发现除非我在文件输入对象上设置“保留空值”属性

![在此处输入图像描述](../Images/649cc1cb86cde476692872534892b981.png) 以及目标表对象上的“保持空值”属性，

![在此处输入图像描述](../Images/2f7ba83aa8e021a29d364575b8b752ca.png)

在数字目标列的情况下，未检测到 NULL 值并且 null 值变为零长度 varchar 值或 0。在上面的示例中，我认为以下行列具有空值：

1.  第 2 行第 3 列
2.  第 3 行，第 2 列

由于我的目标数据库是区分零长度 varchar 和空 varchar 的 SQL Server，因此我不认为第 2 行第 2 列中的值为空，而是零长度 varchar。但是，当数据从示例文件传输到允许所有这些列为空的目标表时，零长度字符串将作为 NULL 加载！

由于“保留空值”和“保留空值”设置似乎是在文件和表对象级别而不是在列级别，似乎没有办法只为我的列“打开”“保留空值”期望有空值。例如，假设我有一个包含 42 个 varchar 列的文件，其中 41 个，我满足于使用空字符串而不是空值，但是对于单个列，我想保留和区分 NULL 值和一个空字符串值，有没有办法做到这一点？空 varchar 列和零长度 varchar 列值似乎都加载为 NULLS。

处理此问题的最佳方法是什么，使用派生列转换或脚本任务来修改值？有人可以帮助我使用 C# 脚本或提供任何一种方法的详细信息或提出更好的方法吗？

我在 SO 上看到一些帖子说没有办法区分 CSV 文件中的 NULL 和零长度 varchar 值，但我相信上面的例子是你如何做到的，这只是你如何做的问题让 SSIS CSV 解析器正确解析它，或者解析器是否符合要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-08T11:47:09.193

我知道这并不能完全回答你的问题，但这就是我发现的。

我还没有测试过 OLEDB Destination 上的 Keep Nulls 属性，因为我认为它的含义略有不同。我正在通过查看 SSIS 中的数据查看器来验证我的所有测试，将 OLEDB 目标作为一个因素从图片中删除。

1.  导入非文本限定文件时，未勾选保留 Null 值，空列（即两个分隔符之间没有任何内容）和仅包含空格的列按原样导入：作为零长度字符串，以及一系列的空间分别。
2.  如果勾选 Retain Null Values，零长度列将转换为 NULL，但包含空格的列将保持原样。
3.  使用文本限定文件，它变得更加复杂。如果未勾选保留空值，则无法从文件中获取空值。无论它是一个适当限定的空字符串（例如“”，“NextColumnValue”），还是什么都没有（例如，“NextColumnValue”），SSIS 将它变成一个零长度字符串。
4.  使用文本限定文件并勾选保留 Null 值，以下是结果，正确限定的空字符串 ("") 和列分隔符之间完全没有任何内容都变为 NULL。

这些结果与您的发现一致。并且肯定似乎没有可以调整的逐列设置：使用 Retain Nulls 复选框，您可以将所有零长度字符串（以及缺少文本限定符，如果适用）变为 NULL，或者您可以将它们保留为零长度字符串。

# visual-studio - 是否可以让 Visual Studio 自动交换大括号样式？

> ID：14360890
> 
> 赞同：0
> 
> 时间：2013-01-16T14:41:14.567
> 
> 标签：visual-studio, coding-style

我发现VS的默认

```
if(foo)
{
    bar();
}
else
{
    fizzBuzz();
} 
```

令人*难以置信*的烦人。我个人的偏好是：

```
if(foo){
    bar();
}
else {
    fizzBuzz();
} 
```

但其他一些开发人员要么不在乎，要么更喜欢默认设置。

使用 Hg 和 Git 等版本控制工具，您可以“签出 Windows 风格，签入~~Gangam~~ Unix 风格”。

我想知道是否有任何方法可以让我的 Visual Studio 以一种大括号样式打开文件，并以另一种样式保存它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T13:58:07.217

这将始终是一个偏好问题。我认为你应该做的是与你的开发人员聚在一起，讨论它，然后决定一种风格。鉴于其他开发人员似乎不太在意，他们很可能会按照您的喜好行事。
您绝对应该尽量避免的是，一个开发人员签出代码，更改样式并再次签入，只是让另一个开发人员将其更改回来。

**另外**：您可以在*Resharper*中更改您喜欢的样式，以便它会根据您的喜好自动布局。

```
ReSharper -> Options -> C# -> Formatting Style -> Braces Layout 
```

# python - 使用 Python 移动文件

> ID：14360891
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:41:18.083
> 
> 标签：python, file-io, file-management

我在一个目录中有一大堆文件。我想要一个程序循环遍历目录中的文件并提示我输入目录的名称（它们都在同一个目录中），以便程序将文件移动到指定的目录。

我想要一个终端解决方案，更具体地说，Python方式对我很有启发

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:49:15.453

您的问题对于您需要帮助的内容有点模糊，但这里有一个模板可以帮助您入门。使用[`os`](http://docs.python.org/2/library/os.html)and[`shutil`](http://docs.python.org/2/library/shutil.html)列出目录和移动文件。

```
import shutil, os

target = raw_input("Target directory: ")

# Make sure the target dir exists!
assert(os.path.exists(target))

for f in os.listdir('.'):
    b = raw_input("Press y to move file %s to %s: " %(f,target))
    if b.lower() == 'y':
        shutil.move(f, target) 
```

# machine-learning - 将公用事业分配给当地各州时难以指定长期观点

> ID：14360893
> 
> 赞同：4
> 
> 时间：2013-01-16T14:41:26.673
> 
> 标签：machine-learning, artificial-intelligence, agent

我目前正在阅读 Wiley 和 Woolridge 的*Multi Agent Systems 简介*，我希望是否有人可以向我澄清以下内容。在谈到*效用函数*时，作者指出：

> 效用是表示状态“好”程度的数值：效用越高越好。
> 
> 代理的任务是产生*最大化效用*的状态——我们没有向代理指定如何完成。在这种方法中，任务规范将只是一个函数
> 
> ```
> u:E -> R 
> ```
> 
> 它将实际值与每个环境状态相关联。
> 
> 给定这样的*性能度量*，我们可以通过几种不同的方式定义代理在某些特定环境中的*整体效用。*一种（悲观的）方法是将代理的效用定义为代理可能遇到的最坏状态的效用；另一种可能是将整体效用定义为遇到的所有状态的平均效用。没有对错之分：衡量标准取决于您希望代理执行的任务类型。
> 
> *这种方法的主要缺点是它将公用事业分配给当地的州；在将公用事业分配给各个州时，很难具体说明长期观点。*

我在理解劣势以及当地国家到底是什么方面遇到了问题。有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-16T20:02:27.053

我将在这里向您展示一个示例来解释这个想法。希望能帮助到你。有关详细信息，请参阅[幻灯片](http://www.cs.ox.ac.uk/people/michael.wooldridge/pubs/imas/distrib/2up/lect02-2up.pdf)。

# 问题：

这是一个经典的问题，称为`Tile World`.

*   二维网格世界，其中我们有一个代理、瓷砖、障碍物和洞。
*   代理可以在四个方向（上、下、左、右）移动，如果它位于瓷砖旁边，它可以将其推向适当的方向。
*   孔必须由代理填充瓷砖。
*   目的是用瓷砖填充所有孔。

![在此处输入图像描述](../Images/93ec25485f50c368c71af4a3ee420d0a.png)

# 环境状态

可以使用以下变量来描述环境的状态：

*   代理当前位置`(a_x, a_y)`
*   四个瓦片的当前位置`(t1_x, t1_y)`, `(t2_x, t2_y)`, `(t3_x, t3_y)`,`(t4_x, t4_y)`

# 状态转移

假设在当前状态下，如果代理将其下方的图块向下推，则系统状态转移到下一个状态，在该状态下，除了代理的当前位置和被推动的图块的位置之外，每个变量都保持不变。

# 实用功能

我们的效用函数可以定义为被填充的孔的百分比，即

```
 # of holes filled
   u =  -------------------------
            # of total holes 
```

很明显：

*   如果代理填补了所有漏洞，效用 = 1
*   如果代理填充零个孔，效用 = 0

# 关联效用函数

现在看看下面的两种状态。

![在此处输入图像描述](../Images/63f8e06715e0005712288f7471c7c49f.png) ![在此处输入图像描述](../Images/5741f27bc10f7e7a6a918cb06c368ec5.png)

很容易看出：

*   两种状态具有相同的效用值，即`1/3`（因为填充了 3 个孔中的 1 个）
*   左侧（状态`s1`）是**死角**，您无法将所有瓷砖移入孔中
*   右侧（状态`s2`）是一个**很好**的位置，您可以选择将剩余的两个瓷砖移动到孔中。

所以结论是：

*   如果您只将效用函数与本地状态相关联，例如`u(s1)`或`u(s2)`，您实际上无法区分效用方面的差异。`u(s1)=u(s2)=1/3`.

*   **您需要对可以用run**表示的状态的全局或长期视图，这是一系列交错的环境状态和代理采取的操作。

*   您可以不将实用程序分配给单个状态，而是分配给运行。这种方法具有固有**的长远眼光**。

    u: 运行 -> 实际值

*   在此设置中，代理的最佳策略是最大化**预期效用**，这并不意味着它会是最好的，但平均而言我们可以期望它做得最好。

    预期效用 = ( u(r) x Prob(r) ) 的总和

请参阅您提到的书或相应的[幻灯片](http://www.cs.ox.ac.uk/people/michael.wooldridge/pubs/imas/distrib/2up/lect02-2up.pdf)以获取更多详细信息。

# ruby - 在 Linux Mint 中安装 Nokogiri 时出错

> ID：14360896
> 
> 赞同：0
> 
> 时间：2013-01-16T14:41:34.767
> 
> 标签：ruby, gem

我一直在尝试安装 nokogiri-1.5.0.beta.2 并且一直遇到错误。它已在其他地方记录，但没有一个解决方案有效。

```
sudo gem install nokogiri -v '1.5.0.beta.2' 
```

它输出

```
....
make
compiling xml_reader.c
compiling xml_attr.c
compiling xml_entity_reference.c
compiling xml_element_decl.c
compiling xml_xpath_context.c
xml_xpath_context.c: In function ‘xpath_generic_exception_handler’:
xml_xpath_context.c:154:3: error: format not a string literal and no format arguments [-Werror=format-security]
cc1: some warnings being treated as errors
make: *** [xml_xpath_context.o] Error 1    make
compiling xml_reader.c
compiling xml_attr.c
compiling xml_entity_reference.c
compiling xml_element_decl.c
compiling xml_xpath_context.c
xml_xpath_context.c: In function ‘xpath_generic_exception_handler’:
xml_xpath_context.c:154:3: error: format not a string literal and no format arguments [-Werror=format-security]
cc1: some warnings being treated as errors
make: *** [xml_xpath_context.o] Error 1 
```

它已[在此处](https://stackoverflow.com/questions/13969716/nokogiri-native-extension-failing-to-build-not-libxml2-or-libxslt-missing-issue)和[此处](https://stackoverflow.com/questions/13085404/installing-nokogiri-v-1-5-0-gem-in-ubuntu-12-10)记录，但没有解决方案有效，有人有什么建议吗？我不希望仅仅更新到较新的版本，因为我正在尝试在其他人的工作上安装捆绑包以使其正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:56:48.223

无法解决此问题，但能够通过更新 ruby​​ 和/或安装更新版本的 Nokogiri 来绕过它

```
gem install nokogiri 
```

# loops - 不确定在 openmp 循环中应该共享或私有什么

> ID：14360904
> 
> 赞同：11
> 
> 时间：2013-01-16T14:41:51.337
> 
> 标签：loops, parallel-processing, fortran, openmp

我有一个更新矩阵 A 的循环，我想让它成为 openmp 但我不确定哪些变量应该共享和私有。我原以为只有 ii 和 jj 会起作用，但事实并非如此。我想我也需要一个 !$OMP ATOMIC UPDATE 某处......

该循环仅计算 N 和 N-1 个粒子之间的距离并更新矩阵 A。

```
 !$OMP PARALLEL DO PRIVATE(ii,jj)
            do ii=1,N-1
                    do jj=ii+1,N
                            distance_vector=X(ii,:)-X(jj,:)
                            distance2=sum(distance_vector*distance_vector)
                            distance=DSQRT(distance2)
                            coff=distance*distance*distance
                            PE=PE-M(II)*M(JJ)/distance
                            A(jj,:)=A(jj,:)+(M(ii)/coff)*(distance_vector)
                            A(ii,:)=A(ii,:)-(M(jj)/coff)*(distance_vector)
                    end do
            end do
            !$OMP END PARALLEL DO 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-17T14:30:13.130

OpenMP 的黄金法则是，在外部范围中定义的所有变量（有一些排除项）默认在并行区域中共享。由于在 2008 年之前的 Fortran 中没有本地作用域（即`BLOCK ... END BLOCK`在早期版本中没有），所有变量（除了变量`threadprivate`）都是共享的，这对我来说很自然（不像 Ian Bush，我不喜欢使用`default(none)`然后重新声明各种复杂科学代码中所有 100 多个局部变量的可见性）。

以下是如何确定每个变量的共享类别：

*   `N`- 共享，因为它在所有线程中应该是相同的，并且它们只读取它的值。
*   `ii`- 它是循环的计数器，受制于工作共享指令，因此其共享类预定为`private`。在子句中明确声明它并没有什么坏处`PRIVATE`，但这并不是真正必要的。
*   `jj`- 循环的循环计数器，不受工作共享指令的约束，因此`jj`应该是`private`.
*   `X`- 共享，因为所有线程都引用并仅从中读取。
*   `distance_vector`- 显然应该是`private`因为每个线程都在不同的粒子对上工作。
*   `distance`, `distance2`, 和`coff`- 同上。
*   `M`- 出于与`X`.
*   `PE`- 充当累加器变量（我猜这是系统的势能）并且应该是归约操作的主题，即应该放在一个`REDUCTION(+:....)`子句中。
*   `A`- 这个很棘手。它可以通过`A(jj,:)`同步构造共享和更新以保护，或者您可以使用归约（OpenMP 允许在 Fortran 中对数组变量进行归约，这与 C/C++ 不同）。`A(ii,:)`不会被多个线程修改，因此不需要特殊处理。

随着减少`A`到位，每个线程都将获得它的私有副本，`A`这可能会占用内存，尽管我怀疑您是否会使用这种直接 O(N ² ) 模拟代码来计算具有大量粒子的系统。还存在与缩减实现相关的一定开销。在这种情况下，您只需要添加`A`到`REDUCTION(+:...)`子句列表中。

使用同步构造，您有两种选择。您可以使用`ATOMIC`构造或`CRITICAL`构造。由于`ATOMIC`仅适用于标量上下文，您必须“取消向量化”赋值循环并`ATOMIC`分别应用于每个语句，例如：

```
!$OMP ATOMIC UPDATE
A(jj,1)=A(jj,1)+(M(ii)/coff)*(distance_vector(1))
!$OMP ATOMIC UPDATE
A(jj,2)=A(jj,2)+(M(ii)/coff)*(distance_vector(2))
!$OMP ATOMIC UPDATE
A(jj,3)=A(jj,3)+(M(ii)/coff)*(distance_vector(3)) 
```

您也可以将其重写为循环——不要忘记声明循环计数器`private`。

`CRITICAL`无需对循环进行非矢量化：

```
!$OMP CRITICAL (forceloop)
A(jj,:)=A(jj,:)+(M(ii)/coff)*(distance_vector)
!$OMP END CRITICAL (forceloop) 
```

命名关键区域是可选的，在这种特殊情况下有点不必要，但通常它允许分离不相关的关键区域。

哪个更快？用`ATOMIC`or`CRITICAL`展开 这取决于很多事情。通常`CRITICAL`要慢得多，因为它通常涉及对 OpenMP 运行时的函数调用，而原子增量（至少在 x86 上）是使用锁定加法指令实现的。正如他们常说的，YMMV。

概括地说，你的循环的工作版本应该是这样的：

```
!$OMP PARALLEL DO PRIVATE(jj,kk,distance_vector,distance2,distance,coff) &
!$OMP& REDUCTION(+:PE)
do ii=1,N-1
   do jj=ii+1,N
      distance_vector=X(ii,:)-X(jj,:)
      distance2=sum(distance_vector*distance_vector)
      distance=DSQRT(distance2)
      coff=distance*distance*distance
      PE=PE-M(II)*M(JJ)/distance
      do kk=1,3
         !$OMP ATOMIC UPDATE
         A(jj,kk)=A(jj,kk)+(M(ii)/coff)*(distance_vector(kk))
      end do
      A(ii,:)=A(ii,:)-(M(jj)/coff)*(distance_vector)
   end do
end do
!$OMP END PARALLEL DO 
```

我假设您的系统是 3 维的。

* * *

说了这么多，我赞同 Ian Bush，你需要重新思考位置和加速度矩阵是如何在内存中布局的。适当的缓存使用可以提升您的代码，还可以允许某些操作，例如`X(:,ii)-X(:,jj)`向量化，即使用向量 SIMD 指令实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T15:15:50.183

如所写，您将需要一些同步以避免竞争条件。考虑 2 线程的情况。假设线程 0 以 ii=1 开头，因此认为 jj=2,3,4,...。线程 1 以 ii=2 开头，因此认为 jj=3,4,5,6。因此，正如所写的那样，线程 0 可能正在考虑 ii=1,jj=3，而线程 1 同时正在查看 ii=2,jj=3。这显然会导致生产线出现问题

```
 A(jj,:)=A(jj,:)+(M(ii)/coff)*(distance_vector) 
```

因为两个线程具有相同的 jj 值。所以是的，您确实需要将更新同步到 A 以避免比赛，尽管我必须承认我的好方法对我来说并不是立即显而易见的。如果有什么事情发生在我身上，我会考虑并编辑。

但是我还有其他 3 条评论：

1）您的内存访问模式很糟糕，我希望纠正这个问题至少可以提供与任何 openmp 一样多的速度，而且麻烦少得多。在 Fortran 中，您希望以最快的速度降低第一个索引 - 这确保内存访问在空间上是本地的，从而确保充分利用内存层次结构。鉴于这是在现代机器上获得良好性能的最重要的事情，您应该真正努力做到这一点。因此，如果您可以排列数组以便将上述内容写为

```
 do ii=1,N-1
                do jj=ii+1,N
                        distance_vector=X(:,ii)-X(:jj)
                        distance2=sum(distance_vector*distance_vector)
                        distance=DSQRT(distance2)
                        coff=distance*distance*distance
                        PE=PE-M(II)*M(JJ)/distance
                        A(:,jj)=A(:,jj)+(M(ii)/coff)*(distance_vector)
                        A(:,ii)=A(:,ii)-(M(jj)/coff)*(distance_vector)
                end do
        end do 
```

请注意这是如何降低第一个索引的，而不是您所拥有的第二个索引。

2) 如果你确实使用 openmp，我强烈建议你使用 default(None)，它有助于避免讨厌的错误。如果你是我的学生之一，你会因为不这样做而失去大量分数！

3) Dsqrt 是过时的——在现代 Fortran（即 1967 年之后的任何东西）中，除了一些晦涩的情况外，sqrt 已经足够好，而且更灵活

# c++ - OpenNI2.0 - 尝试在 Visual Studio 中构建包含的示例项目时出现 LNK 错误

> ID：14360905
> 
> 赞同：0
> 
> 时间：2013-01-16T14:41:53.347
> 
> 标签：c++, visual-studio-2010, kinect, openni

我在尝试从 Visual Studio 2010 中的源代码构建任何内容时遇到 LNK 错误。

我已经安装了 OpenNI 2.0、Kinect SDK 和 NiTE。我可以运行任何预编译的示例，但我不能自己编译其中的任何一个。

我试图制作一个示例项目，只是复制 SimpleRead 的内容，但也无法编译；我已按照说明为 Visual Studio 添加所有依赖项和内容。

例子：

```
1>main.obj : error LNK2001: unresolved external symbol __imp__oniDeviceIsCommandSupported 
```

还有 16 个其他类似的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:02:20.297

我有一个类似的错误。我注意到我在尝试构建 32 位应用程序时使用了 64 位库（我只是没有注意）。一旦我将我的项目指向正确的 Lib 文件（32 位），一切都没有错误。我希望这会有所帮助。

# daemon - JGit：如何使用 InMemoryRepository 了解 dfs 实现

> ID：14360909
> 
> 赞同：2
> 
> 时间：2013-01-16T14:42:03.597
> 
> 标签：daemon, jgit, microsoft-distributed-file-system

我想了解如何为 jgit 实现替代 dfs 后端，我正在查看 [https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit/src/org/eclipse/jgit/storage/dfs /InMemoryRepository.java](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit/src/org/eclipse/jgit/storage/dfs/InMemoryRepository.java) 为例。

我很难弄清楚如何将其设置为独立的 git 守护进程。基本上，我希望能够启动一个 java 进程，它是单个（空）内存中 git 存储库的 git 服务器，然后我希望能够使用 git 客户端从该存储库守护进程中推/拉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:15:08.183

你需要做这样的事情：

```
private static final class RepositoryResolverImplementation implements
        RepositoryResolver<DaemonClient> {
    @Override
    public Repository open(DaemonClient client, String name)
            throws RepositoryNotFoundException,
            ServiceNotAuthorizedException, ServiceNotEnabledException,
            ServiceMayNotContinueException {
        InMemoryRepository repo = repositories.get(name);
        if (repo == null) {
            repo = new InMemoryRepository(
                    new DfsRepositoryDescription(name));
            repositories.put(name, repo);
        }
        return repo;
    }
}

private static Map<String, InMemoryRepository> repositories = new HashMap<String, InMemoryRepository>();

public static void main(String[] args) throws IOException {
    Daemon server = new Daemon(new InetSocketAddress(9418));
    boolean uploadsEnabled = true;
    server.getService("git-receive-pack").setEnabled(uploadsEnabled);
    server.setRepositoryResolver(new RepositoryResolverImplementation());
    server.start();
} 
```

然后您应该能够运行`git clone git://localhost/repo.git`并且将创建一个新的内存中的“repo.git”存储库。如果要上传，请确保将 uploadsEnabled 设置为“true” - 默认情况下，它设置为“false”。

# mod-rewrite - mod_rewrite：如何编写正确的规则来从长 URL 重定向到短 URL？

> ID：14360913
> 
> 赞同：0
> 
> 时间：2013-01-16T14:42:23.303
> 
> 标签：mod-rewrite

我们在 .htaccess 中有不同的重写规则，如下所示：

```
RewriteEngine On

RewriteRule ^view-([_a-zA-Z]+)-([_a-zA-Z]+)$  /controllers/index.php?action=$1|$2 
```

我们需要为我们的一些重写规则创建一个镜像重写条件，这将执行从长 URL 到短 URL 的 301 重定向。例如

```
RewriteRule ^controllers/index\.php\?action=([_a-zA-Z]+)\|([_a-zA-Z]+)$  /view-$1-$2 [R=301] 
```

但是，由于某种原因，这条规则不起作用。你能帮我们理解为什么吗？

谢谢你。

更新：我们尝试了很多不同的转义序列，但似乎没有一个对我们有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:05:29.990

我们找到了解决方案。

首先，我们不太了解 mod_rewrite 是如何工作的 - RewriteRule 无法解析查询字符串。为此，有必要添加一个重写条件，它将解析查询字符串，然后是重写规则，它将使用解析的查询字符串。

因此，为了解决我们的情况，我们需要以下内容：

```
RewriteCond %{QUERY_STRING}    ^action=([_a-zA-Z]+)\|([_a-zA-Z]+)$
RewriteRule ^controllers/index\.php$    /view-%1-%2?    [R=301,L] 
```

请注意，由 RewriteCond 解析的参数是通过 % 引用的，而不是通过 $。另外，请注意，要绕过将查询字符串传递给我们使用的结果规则？在目标路径的末尾。

现在唯一剩下的就是摆脱循环重定向，但这是不同的故事。

# c# - 自定义 SoapHeader php 到 C#

> ID：14360919
> 
> 赞同：1
> 
> 时间：2013-01-16T14:42:51.800
> 
> 标签：c#, php, soap

如何在 C# 中使用 ServiceReference 或 WebReference 做到这一点

```
 class SoapAuthentificationHeader {
        /** @var string sPassword */
        public $Password;
        /** @var string sLogin */
        public $sLogin;
        /** @var string anotherCustomParam*/
        public $sVod;

        public function __construct($sLogin, $sPassword, $sVod) {
            $this->sPassword=$sPassword;
            $this->sLogin=$sLogin;
            $this->sVod=$sVod;
        }
    }

    $oSoap=new SoapClient('http://.[ my path ]...wsdl', array(
        'trace' => 1,
        'encoding' => 'UTF-8'
    ));

    try {
        $oSoap->__setSoapHeaders(array(new SoapHeader('urn:vod_soap', 'AuthenticationHeader', new SoapAuthentificationHeader('login', 'password', 'anotherCustomParam'))));     
$iCountVideo = $oSoap->countVideo();
    } catch (Exception $oException) {
        var_dump($oException);
    } 
```

我试图在我的通话之间实例化一个共享的 CookieContainer。但它没有用：目前我有：

```
vod_soapService s = new vod_soapService();
            s.CookieContainer = new CookieContainer();

            s.ConnectionGroupName = "test";
             // this webmethod works it return me true 
            s.AuthenticationHeader("foo", "bar", "test");

            string test = s.countVideo(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-23T11:07:53.883

您必须在发送 xml 之前手动插入 soap 标头。要实现这一点，请阅读下面的链接
[http://forums.asp.net/t/1137408.aspx](http://forums.asp.net/t/1137408.aspx)

您还必须调整给定的解决方案以适合您的身份验证标头

您的“AfterSerialize”实现应如下所示：

```
case SoapMessageStage.AfterSerialize:
{
  // Get the SOAP body as a string, so we can manipulate...
  String soapBodyString = getXMLFromCache();

  String BodyString = "<soap:Body";
  int posStartBody = soapBodyString.IndexOf(BodyString);

  // Create the SOAP header Message 
  String soapEnvHeaderString = "<soap:Header><SoapAuthentificationHeader><sLogin>";
  String soapEnvHeaderString2 = "</sLogin><sPassword>";
  String soapEnvHeaderString3 = "</sPassword><sVod>";
  String soapEnvHeaderString4 = "</sVod></SoapAuthentificationHeader></soap:Header>";
  Stream appOutputStream = new MemoryStream();
  StreamWriter soapMessageWriter = new StreamWriter(appOutputStream);
  soapMessageWriter.Write(soapBodyString.Substring(0,posStartBody));
  soapMessageWriter.Write(soapEnvHeaderString);
  soapMessageWriter.Write("your login ");
  soapMessageWriter.Write(soapEnvHeaderString2);
  soapMessageWriter.Write("your password");
  soapMessageWriter.Write(soapEnvHeaderString3);
  soapMessageWriter.Write("your vod");
  soapMessageWriter.Write(soapEnvHeaderString4);
  soapMessageWriter.Write(soapBodyString.Substring(posStartBody));
  // write it all out.
  soapMessageWriter.Flush();
  appOutputStream.Flush();
  appOutputStream.Position = 0;
  StreamReader reader = new StreamReader(appOutputStream);
  StreamWriter writer = new StreamWriter(this.outputStream);
  writer.Write(reader.ReadToEnd());
  writer.Flush();
  appOutputStream.Close();
  this.outgoing = false;
  this.incoming = true;
  break;
} 
```

# javascript - 悬停在复选框上时如何显示一些信息？

> ID：14360927
> 
> 赞同：36
> 
> 时间：2013-01-16T14:43:13.380
> 
> 标签：javascript, jquery, html, css

我有几个复选框。当我将鼠标悬停在这些复选框上时，我想显示一些属于这些复选框的信息。我如何使用 JS 或 JQuery 来做到这一点？假设这是我的复选框

```
 <input type="checkbox" value="monday" checked="checked"> 
```

我想向用户显示“Hello User 或值 'monday' 或我的数据库中的一些数据。如何？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-16T14:48:19.230

只需向您的 HTML 对象添加一个“标题”属性。

```
<input title="Text to show" id="chk1" type="checkbox" value="monday" checked="checked" /> 
```

或者在 JavaScript 中

```
document.getElementById("chk1").setAttribute("title", "text to show"); 
```

或者在 jQuery 中

```
$('#chk1').attr('title', 'text to show'); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-16T14:49:00.317

您可以使用属性标题并在步骤渲染中从数据库中添加标题值

```
 input type='checkbox' title='tooltip 2' 
```

您可以使用 js 插件（您需要添加所需文本的值作为属性，请参阅文档） [http://onehackoranother.com/projects/jquery/tipsy/](http://onehackoranother.com/projects/jquery/tipsy/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-16T14:51:42.430

这是你的答案：

```
<input type="checkbox" value="monday" checked="checked">
  <div>informations</div> 
```

和CSS：

```
input+div{display:none;}
input:hover+div{display:inline;} 
```

你有一个例子[here](http://jsfiddle.net/Z4M3j/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-16T14:53:25.110

使用这样的html结构：

```
<div class="checkboxContainer">
    <input type="checkbox" class="checkboxes"> Checkbox 1
    <div class="infoCheckbox">
        <p>Info on checkbox 1</p>
    </div>
</div>
<div class="checkboxContainer">
    <input type="checkbox" class="checkboxes"> Checkbox 2
    <div class="infoCheckbox">
        <p>Info on checkbox 2</p>
    </div>
</div>
<div class="checkboxContainer">
    <input type="checkbox" class="checkboxes"> Checkbox 3
    <div class="infoCheckbox">
        <p>Info on checkbox 3</p>
    </div>
</div> 
```

您可以使用 jQuery 的“this”处理程序轻松显示文本，该处理程序引用当前悬停的元素：

```
$(".checkboxContainer").hover(
    function() {
        $(this).find(".infoCheckbox:first").show();
    },
    function() {
        $(this).find(".infoCheckbox:first").hide();
    }
); 
```

在这里演示：http: [//jsfiddle.net/pdRX2/](http://jsfiddle.net/pdRX2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T14:48:42.023

```
<input type="checkbox" id="cb" value="monday" checked="checked">

$("#cb").hover(
   function() {
      // show info
   },
   function() {
      // hide info
   }
); 
```

或者您可以将 title 属性添加到您的元素

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T14:48:45.283

快速粗略地刺伤（未经测试或其他任何东西，并且不完全了解您想要的东西..更不用说您实际尝试过的东西了..可能达到了..

```
$('input:checkbox').mouseover(function()
{
   /*code to display whatever where ever*/
   //example
   alert($(this).val());
}).mouseout(function()
{
   /*code to hide or remove displayed whatever where ever*/
}); 
```

当然有很多方法可以做同样的事情，从可能使用`toggle()`的东西到类似的东西`on()`

# c++ - 结构 c++ 多项选择

> ID：14360928
> 
> 赞同：0
> 
> 时间：2013-01-16T14:43:14.610
> 
> 标签：c++, c, structure

我想用这样的结构在c中制作一个带有多项选择题的程序：

```
struct exam
{
    char quest[50];
    char ans1[20];
    char ans2[20];
    char ans3[20];
    int correct_answer;
};
struct exam question[3];/*number of multiple choices*/ 
```

我的代码有什么问题吗？

我不确定**如何**填充结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:47:51.007

如果您的所有数据都将保持不变，则可以使用以下内容：

```
struct question {
  const char *prompt;
  const char *answers[3];
  int correct_answer;
}; 
```

然后您可以设置一系列问题，如下所示：

```
const struct question questions[] = {
 { "Kernighan & who?", { "Ritchie", "Stroustrup", "Torvalds" }, 0 },
 { /* next question ... */
}; 
```

如果我要这样做，我可能会在字符串中编码正确答案，即以“`'*'`或”开头的正确答案。当然，处理（打印和比较）答案的代码需要考虑到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:50:13.363

您的问题提到了 C++。你这样做的方式在 C 中是可以的（除了答案应该是一个数组的事实）。

但是这种实现在 C++ 中是不可接受的，因为有更好的方法来做到这一点：

```
struct question {
    std::string prompt;
    std::vector<std::string> answers;
    int correct_answer;
}; 
```

也就是说，使用内置的容器和字符串类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:45:19.893

```
struct exam question[3]; 
```

以这种方式定义`question`，这意味着您正在定义 3 个元素的数组。数组中的每个元素都是一个`exam`结构

它可以像这样填充：

```
strcpy(question[0].quest, "What's the name of The President?");
strcpy(question[0].ans1, "name 1");
strcpy(question[0].ans2, "name 2");
strcpy(question[0].ans3, "name 3");
question[0].correct_answer = 2;

strcpy(question[1].quest, "What's the surname of The President?");
strcpy(question[1].ans1, "surname 1");
strcpy(question[1].ans2, "surname 2");
strcpy(question[1].ans3, "surname 3");
question[1].correct_answer = 3; 
```

你也可以这样填写：

```
 struct exam question[3] = {
      {"What's the name of The President?", "name 1", "name 2", "name 3",2}
      {"What's the surname of The President?", "surname 1", "surname 2", "surname 3",3}
      {"What's any thing?", "any thing 1", "any thing 2", "any thing 3",3}
  } 
```

# objective-c - Cocoa/Objective-C 中是否有相当于 Delphi TStringList 的？

> ID：14360930
> 
> 赞同：1
> 
> 时间：2013-01-16T14:43:21.833
> 
> 标签：objective-c, xcode, cocoa, delphi, tstringlist

我目前正在尝试学习 Cocoa/Objective-C 来构建 Mac OS X 软件。我来自 Delphi，在 Delphi 中一个非常有用的元素是 TStringList。我正在寻找 Objective-C 中的等价物...我需要能够访问虚拟列表中的项目（一行）。

例如，在 Delphi 中，我可以调用`Label.Caption := MyStrList[5];`以显示（作为字符串）列表中的项目。我想在 Cocoa 中做“同样的”事情。

作为信息，我在 Delphi 中使用 TStringList 来管理我的多线程应用程序必须执行的操作列表。

提前致谢 ！

贝尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:50:41.747

它的 NSArray（或 NSMutableArray）中包含 NSString 对象。你可以写类似

```
NSArray *array=[NSArray arrayWithObjects:@"string1",@"string2",@"string3",nil];
label.text=[array objectAtIndex:1]; 
```

# c++ - 在 C++（大和小）中反转矩阵的更有效和快速的方法

> ID：14360935
> 
> 赞同：11
> 
> 时间：2013-01-16T14:43:39.803
> 
> 标签：c++, performance, matrix, precision, matrix-inverse

**编辑**。自从提出这个问题后，我获得了解决断层扫描线性方程组的博士学位。由于这个问题仍然有很多流量，我想强调@sellibitze 答案中的第一句话：**没有简单的答案**。它在很大程度上取决于矩阵的性质，并且几乎总是您不想反转矩阵。

现在，对于这个认为可以很容易回答的非常无辜的人的原始问题......

* * *

在搜索矩阵求逆算法时，我发现有几种方法（和意见！）关于如何在代码中执行此操作。我想知道哪种方法最快，或者性能最好的方法，但试图找到答案却一无所获。

我知道在某些情况下可以计算伪逆（使用 SVD、cholevsky、...），我实际上在我的代码中使用了其中的一些，而且我知道有好几次逆不存在，等等。很容易找到特定问题的特定答案，但对于矩阵求逆这个大（巨大的！）问题却不是一般的直觉。

所以我的问题是：

**什么方法对小矩阵的性能最好？并且精确？大矩阵呢？**

我的个人案例是一个 6x6（编辑：对称）矩阵，必须反转数千次（是的，是的，具有不同的值），我需要高精度，但可以肯定的是速度会非常方便。

请注意，我**不是**在寻找代码，我会自己编写最适合我情况的任何答案，但我认为这是很多程序员都想知道的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:00:26.983

没有简单的答案。确保您已阅读并理解[本文](http://www.johndcook.com/blog/2010/01/19/dont-invert-that-matrix/)。

对于 2x2 矩阵，可以使用包含行列式的[简单公式来计算逆矩阵。](http://en.wikipedia.org/wiki/Invertible_matrix#Inversion_of_2.C3.972_matrices)但对于任何更大的东西，我更喜欢分解，例如旋转 LU 分解。如果您关心性能并处理大型稀疏矩阵，则迭代求解器可能是合适的。或者，您可以尝试 MUMPS（多正面大规模并行求解器）并测量性能。迭代求解器的问题在于，它们的收敛速度在很大程度上取决于逆问题的条件以及是否找到好的预条件子。

也许您应该从[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)库开始，并首先尝试旋转 LU 分解。

# javascript - 使用 dojo 在 javascript 中具有事件处理程序的实例变量。这是什么”？

> ID：14360937
> 
> 赞同：0
> 
> 时间：2013-01-16T14:43:41.737
> 
> 标签：javascript, dojo, instance, dom-events

我无法在对象中创建“实例”变量，或者在将对象的函数作为事件处理程序调用时在对象中引用“实例”变量。下面是我正在使用的代码。如果重要的话，它（显然）使用dojo。我遇到的问题是否特定于我的案例？特定于道场？还是我以完全不正确的方式解决问题？

```
dojo.declare("DynDraw", esri.toolbars.Draw, {
  constructor: function () {
    this.myLocalMap = arguments[0];
  }
  , myLocalMap: null
  , subscribed: false
  , activate: function (geometryType, options) {
    this.inherited(arguments);
    dojo.connect(this.myLocalMap, "onMouseDown", this.DynDraw_Map_OnMouseDown);
  }
  , DynDraw_Map_OnMouseDown: function (event) {
    //when called as an event handler (assigned above) “this.subscribed” is undefined
    //”this” seems to be “myLocalMap”, not the “DynDraw” object
    //when called as a “function” “this.subscribed” has a 
    if (this.subscribed == false) {
      dojo.connect(this.myLocalMap, "onMouseMove", this.DynDraw_Map_OnMouseMove);
      this.subscribed = true;
    }
  }
  , DynDraw_Map_OnMouseMove: function (event) {
      console.log("DynDraw_Map_OnMouseMove");
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:56:07.677

你需要使用`dojo.hitch`. 这将为函数设置一个范围。

```
dojo.connect(this.myLocalMap, "onMouseDown", 
    dojo.hitch(this, this.DynDraw_Map_OnMouseDown)); 
```

[http://dojotoolkit.org/reference-guide/1.7/dojo/hitch.html](http://dojotoolkit.org/reference-guide/1.7/dojo/hitch.html)

# coding-style - 在方法内部编写方法以提高可读性。是好是坏？

> ID：14360941
> 
> 赞同：0
> 
> 时间：2013-01-16T14:44:07.247
> 
> 标签：coding-style, readability

我个人喜欢将长方法分解成更小的步骤，例如：

```
Load()
{
LoadStep1()
LoadStep2()
LoadStep3()
LoadStep4()
...
} 
```

这是矫枉过正吗？其他人抱怨说有太多的跳跃来寻找实际的逻辑。我个人喜欢它，因为我可以更容易地看到程序员的意图。

什么是正确的平衡，以及在破坏清晰的对象之前推荐多少级嵌套方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:00:01.337

由于没有其他人留下更实质性的答案，我只会参考我对您的问题的评论并提供此链接（这是一个不错的阅读）[http://weblogs.asp.net/arturtrosin/archive/2009/01/ 26/关注分离与单一责任原则-soc-vs-srp.aspx](http://weblogs.asp.net/arturtrosin/archive/2009/01/26/separation-of-concern-vs-single-responsibility-principle-soc-vs-srp.aspx)

# javascript - 如何创建与谷歌相同的事件跟踪工具

> ID：14360943
> 
> 赞同：-2
> 
> 时间：2013-01-16T14:44:17.327
> 
> 标签：javascript, ruby-on-rails, node.js, google-analytics, google-api

如何为像谷歌这样的客户创建事件跟踪工具。

```
_gaq.push(['_trackEvent', 'Downloads', 'PDF', '/salesForms/orderForm1.pdf']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:00:53.383

即使您不接受答案，我仍然会给您指点。

为您要在`body`标记中跟踪的所有事件添加侦听器。由于存在事件冒泡，因此页面中任何位置（如果`event.stopPropogation()`未使用）触发的所有事件都将被拾取。然后由你做任何你想做的事。

# jquery - 从 aspx 读取的 JSON

> ID：14360944
> 
> 赞同：0
> 
> 时间：2013-01-16T14:44:18.623
> 
> 标签：jquery, asp.net, json

我创建了一个用作 JSON 结果的 aspx 文件。

```
Response.Clear()
Response.ContentType = "application/json; charset=utf-8" 
```

我有另一个页面（另一个域）读取该 JSON。但是我`syntax error: invalid label`在调​​用 JSON 值时得到了。

```
$.getJSON( "http://a.com/json.aspx?format=json&jsoncallback=?" , function(data) {

       alert(data);
    });
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:50:28.650

您需要服务器输出 JSONP，*而不是*JSON。JSONP 是不同的。当服务器与客户端位于不同的域时，使用 JSONP。

JSONP 实际上只是一个 JavaScript 文件，因此应该使用`Content-type: text/javascript`. 提供 JSONP 时，您应该将 JSON 包装在`jsoncallback`.

因此，您的 Web 服务器应输出类似于以下内容的内容：

```
jQuery12345({"name":"joe","age":22}) 
```

where`jQuery12345`是查询字符串中参数的值，`jsoncallback`jQuery会自动设置。

```
$.getJSON( "http://a.com/json.aspx?format=json&jsoncallback=?" , function(data) {
    alert(data);
}); 
```

jQuery 会*自动*将替换为`?`一个值。

有关 JSONP 的更多信息：[http ://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

# java - 限制对网站的访问仅限于一台机器

> ID：14360946
> 
> 赞同：1
> 
> 时间：2013-01-16T14:44:23.160
> 
> 标签：java, security, https

我有两台服务器，我们称它们为服务器 1 和服务器 2。服务器 2 上有一个 Web 应用程序，可以说是显示帖子。此应用程序可在[http://www.2.com/showPosts](http://www.2.com/showPosts)上找到，每个人都可以访问此页面。此应用程序还可以远程添加帖子。为此，您必须访问[http://www.2.com/addPost](http://www.2.com/addPost)页面并填写表格。

我想做的是将第二个页面（/addPost）的访问限制在一台机器上，即服务器1，这样只有我可以进入这个页面并填写这个表格，其他人都会得到404。如何做到这一点？

编辑：谢谢你的回答。我已经根据它们进行了更多阅读，现在可以使我的问题更加精确。我真正需要做的是通过服务器对客户端进行身份验证，这与单向 ssl 身份验证相反，您可以通过客户端对服务器进行身份验证。我认为任何基于 ip 的身份验证都太弱了，我需要某种证书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:05:24.783

您可以使用`.htaccess`根目录中的文件：

```
<Directory AddPost>Allow from www.1.com</Directory> 
```

这只允许`www.1.com`访问页面。如果`AddPost`是文件，请使用`<Files AddPost></Files>`.

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:06:33.457

如果它是 Tomcat 服务器，您可以在 web.xml 中定义一个过滤器，该过滤器将仅过滤来自允许源的请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:46:59.470

保护您的*http://www.2.com/addPost*使用仅存在于一台机器上的浏览器中的证书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T14:51:04.247

`ServletRequest#getRemoteAddr()`返回发送请求的客户端的 IP。您可以通过匹配客户端的 IP 来过滤此类请求。例如，对于其他客户端，您可以重定向到预定义`404 error`页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T14:51:48.837

您还可以将 addPost 地址限制为仅限本地主机，并建立一个 ssh 隧道以进行更新。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T14:52:20.583

我假设您使用的是 Apache Web Server，那么您可以配置一个虚拟主机并将访问规则设置为拒绝所有，允许来自 server1。这里的[文档](http://httpd.apache.org/docs/2.2/howto/access.html)。

# css - 合法地隐藏/防止 Rich Snippet html 在屏幕上呈现 - 可以这样做吗？

> ID：14360948
> 
> 赞同：3
> 
> 时间：2013-01-16T14:44:30.027
> 
> 标签：css, html, seo, rich-snippets

我在我的网站上使用丰富的片段，我在页脚中有它们的所有代码，以便它们位于中心位置并且易于访问。我不希望这些片段周围的文本呈现在页面上，因为该信息位于网站的其他位置。是否可以通过使用隐藏此文本，`style="display:none"`或者谷歌会完全忽略丰富的片段，因为这些字段是隐藏的？

```
<!-- start rich snippet code -->
<div itemscope itemtype="http://schema.org/LocalBusiness">
    <span itemprop="name" style="display:none">My Business Name</span>
    <div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress" style="display:none">123 Example Street, Suite 456</span>
        <span itemprop="addressLocality" style="display:none">Major City</span>
        <span itemprop="addressRegion" style="display:none">NY</span>
        <span itemprop="postalCode" style="display:none">12345</span>
        <span itemprop="addressCountry" style="display:none">US</span>
    </div>
    <span itemprop="telephone" style="display:none">(123) 456-7890</span>
    <a itemprop="URL" style="display:none">http://www.mycompanysite.com/</a>
</div>
<!-- end rich snippet code --> 
```

任何信息将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:01:38.613

正如@Diodeus 所说，理想情况下，您可以在网站其他地方向用户显示的实际信息中获得这些丰富的片段。复制它通常是不必要的。

是的，谷歌很可能会忽略这个基于`display:none`s 的内容。我可以问你为什么在每个元素上设置它而不是在最高级别设置一次`div`吗？

解决`display:none`潜在 SEO 问题的一种方法是以不同的方式隐藏它。例如给父母`div`一个类`.visuallyhidden`并将其添加到您的样式表中：

```
.visuallyhidden {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:36:31.900

我想提一下，Google 会大量尝试（使用算法和手动的组合）来查找*非法*使用隐藏文本的网站。

典型的惩罚是从索引中删除 30 天。*但是，如果您以合法*的方式使用隐藏字段，则不必担心。

有一篇非常好的文章[Eric Enge 采访 Google 的 Matt Cutts关于 Google 对](http://www.stonetemple.com/articles/interview-matt-cutts.shtml)*非法*使用隐藏文本的态度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-20T15:03:01.240

看看这个：[https](https://sites.google.com/site/webmasterhelpforum/en/faq-rich-snippets) ://sites.google.com/site/webmasterhelpforum/en/faq-rich-snippets并搜索“诱人”这个词。

> ' 将与丰富网页摘要相关的所有内容添加到页面上的一个位置，标记它，然后使用 CSS 或其他技术隐藏整个文本块是很诱人的。**不要这样做！**标记已经存在的内容。除非有特殊情况……'

以比仅显示：无但更复杂的方式隐藏元素似乎是一个聪明的想法，但我想同样可以应用于隐藏的蜜罐表单字段，**你不是唯一能想到的人**。

**注意：**通过 display:none 和 margin:0 一样容易确定字段是否隐藏；填充：0；宽度：1px；高度：1px；溢出：隐藏或按位置：绝对；顶部：-[大于页面高度的值]px 或类似的值。

如果可以隐藏片段并在色情内容上提供任何其他类型的信息（我的意思是页面），人们会将所有内容都作为 Apple 产品页面进行丰富片段。

您已经在网站上获得了所有这些信息，因此只需将正确的微数据标签添加到相应的文本段落中，谷歌（顺便说一下，其他搜索引擎）也会很高兴。

因此，例如，如果您的主页标题已经存在，请将`itemprop="description"`标签放在`<div>`包装标题的标签中，您应该没问题。

:)

# android - 如何使用用户 ID 在 Facebook 的 Android SDK（使用 Graph API 或其他）上查找用户？

> ID：14360952
> 
> 赞同：0
> 
> 时间：2013-01-16T14:44:44.037
> 
> 标签：android, facebook, facebook-graph-api, android-facebook

我有一个用户 ID 列表作为我的 android 程序的输入，并且想在 facebook 上查找它们以显示名称、图片等。我看到很多关于如何获取当前用户个人资料以及如何获取的教程那个网友的朋友。我什至看到有关如何按名称搜索用户的教程（传递 id 没有任何作用）。有没有办法说“给我这个id所属的个人资料”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:25:28.480

您不应再使用 com.facebook.android.Facebook 类，因为它已被弃用。

如果您使用的是 SDK 3.0 版，则可以使用[Request.newGraphPathRequest](https://developers.facebook.com/docs/reference/android/3.0/Request#newGraphPathRequest%28Session,%20String,%20Callback%29)方法，只需将用户 ID 作为 graphPath 传递即可。然后在回调中，您可以调用 response.getGraphObjectAs(GraphUser.class)，它会为您提供一个[GraphUser](https://developers.facebook.com/docs/reference/android/3.0/GraphUser)，您可以从中获取名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:02:56.180

如果您有授权的 facebook 对象，您可以使用 request 方法获取更多信息：

```
String jsonstring = facebook.request(id); 
```

# ios - UILabel 没有更新它的文本，IOS

> ID：14360960
> 
> 赞同：0
> 
> 时间：2013-01-16T14:45:13.117
> 
> 标签：ios, uilabel

我被困在一个简单的任务上，我的 uiviewcontroller 的界面文件上有 uilabel。我想通过一些方法更新该标签。它不会更新标签。

![在此处输入图像描述](../Images/2f2f5765e10c98a798ea2ce6b817f66a.png)

```
.h
UIViewController
{
  UILabel *pictureNameLabel;
}
@property (nonatomic, strong) IBOutlet UILabel *pictureNameLabel;

.m
@synthesize pictureNameLabel=_pictureNameLabel;
- (void)viewDidLoad
{
        _pictureNameLabel = [[UILabel alloc] init];
        _pictureNameLabel.textColor=[UIColor blackColor];
        _pictureNameLabel.text=@"Try";
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:47:04.640

您不需要分配标签。它已经活着，并且从笔尖中醒来。

```
.h
UIViewController
{
  //UILabel *pictureNameLabel;
}
@property (nonatomic, strong) IBOutlet UILabel *pictureNameLabel;

.m
@synthesize pictureNameLabel=_pictureNameLabel;
- (void)viewDidLoad
{
        //_pictureNameLabel = [[UILabel alloc] init];
        _pictureNameLabel.textColor=[UIColor blackColor];
        _pictureNameLabel.text=@"Try";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:03:38.467

你的直接问题是这条线：

```
_pictureNameLabel = [[UILabel alloc] init]; 
```

在`-ViewDidLoad`. 它正在创建一个*新*变量，并让`pictureNameLabel`属性指向它，导致您失去对在 Interface Builder 中创建的变量的引用。删除该行，一切都应该正常工作。

如果您通过 Interface Builder 创建了一个元素，则不需要自己分配和初始化它，并将其添加到适当位置的视图中，因为它会自动为您完成，并且属性已经设置为指向它。如果您要手动创建新视图，则确实需要这样做......但您还需要将其添加到视图层次结构中的某个位置作为子视图。

与您的问题无关，但您还创建了一个名为`UILabel *pictureNameLabel;`. 我假设您创建了这个变量作为合成属性的支持变量`pictureNameLabel`......但是，您将它合成为`_pictureNameLabel`，这意味着您现在有两个变量`_pictureNameLabel`和`pictureNameLabel`。这几乎可以肯定是一个错误。`pictureNameLabel`如果您实际上打算将其与具有相同名称的属性分开使用，则应该删除 的手动定义，或者将其重命名为不同的名称。拥有它可能只会导致混乱和错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T14:50:00.463

您的标签已经存在于您的 xib 文件中，您可以设置 textcolor，interface bulider 上的文本。

# vba - 以自定义形式获取文本框的内容

> ID：14360967
> 
> 赞同：0
> 
> 时间：2013-01-16T14:45:26.340
> 
> 标签：vba, ms-access-2003

目前，我已在表单上的命令按钮上附加了一个函数，该函数检索用户在表单文本框中输入的内容；这工作正常，但我想用 ENTER 键模拟这种行为。我该怎么做呢？

我在文本框上尝试了 Enter 属性，但这只发生在焦点已转移到文本框时，而不是当我在输入后按 enter 时。

我已经阅读了有关 VB 的 KeyUp 事件的信息，但必须有一种更简单的方法——我已经用谷歌搜索了这个，但找不到我要找的东西。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:01:06.163

在许多情况下，更新后事件适用于处理输入到文本框中的数据，例如：

```
Private Sub txtFilter_AfterUpdate()
    Me.Filter = "Content " & Me.txtFilter.Text
    Me.FilterOn = True
End Sub 
```

但是，如果您需要编辑或验证数据，更新前更适合。

```
Private Sub txtText_BeforeUpdate(Cancel As Integer)
    If Me.txtText = "Invalid" Then
        Me.Undo
        Cancel = True
    End If
End Sub 
```

# javascript - 使用 JavaScript 在每次单击按钮时更改 CSS

> ID：14360972
> 
> 赞同：0
> 
> 时间：2013-01-16T14:45:48.480
> 
> 标签：javascript, css

每次用户点击*.go*时，我想将*.questionarea*的右边距增加 400 像素。这是我的Javascript。

 *```
 var marright = "-400px"
        $(".go").click(function(){
          $(".questionarea").animate({
            marginRight: marright
          }, 300 );
         marright += "-400px";
        }); 
```

如果您取出倒数第二行，该按钮将工作一次，但我不知道在每次额外单击时增加边距大小的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:48:17.373

试试这个：

```
var marright = -400;
$(".go").click(function(){
    $(".questionarea").animate({
        marginRight: marright
    }, 300, function(){
        marright += -400;
    });
}); 
```

您不需要将其`marright`作为结尾的字符串`px`。Jquery 足够聪明，可以为您解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:48:28.593

```
 $(".go").click(function(){
      $(".questionarea").animate({
        marginRight: "-=400"
      }, 300 );
    }); 
```

我认为应该是这样的。*

# c# - 为什么我的 \p{L} 返回下划线？

> ID：14360975
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:46:00.880
> 
> 标签：c#, regex

我有以下代码要由正则表达式解析：

```
 const string patern = @"^(\p{L}+)_";
        var rgx = new Regex(patern);
        var str1 = "library_log_12312_12.log";
        var m = rgx.Matches(str1); 
```

它只返回一个匹配项，它是“library_”。我已经阅读了很多资源，它不应该包含下划线，应该吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:48:33.113

您的模式包括`_`，所以匹配也包括在内。如果您只想要*group*，则需要指定。它将在第 1 组（因为第 0 组始终是整场比赛）：

```
using System;
using System.Text.RegularExpressions;

class Program
{
    static void Main(string[] args)
    {
        var regex = new Regex(@"^(\p{L}+)_");
        var input = "library_log_12312_12.log";
        var matches = regex.Matches(input);
        var match = matches[0];
        Console.WriteLine(match.Groups[0]); // library_
        Console.WriteLine(match.Groups[1]); // library
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:48:38.780

您的正则表达式基本上以这样的*结尾*`_`，它匹配一个或多个 Unicode 字母，后跟一个下划线（这不是 Unicode 字母）。

捕获的组将不包含`_`.

按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:49:08.280

它应该包含正则表达式中的下划线。

如果您只想获得`library`结果，则需要访问结果中的第一个子组：

```
var m = rgx.Matches(str1).Cast<Match>().Select(x => x.Groups[1].Value); 
```

# ios - 将 iPad 应用程序更新为通用应用程序

> ID：14360978
> 
> 赞同：1
> 
> 时间：2013-01-16T14:46:08.940
> 
> 标签：ios, xcode, ipad, app-store, ios-universal-app

如果我发布到仅与 iPad 兼容的 appStore 应用程序。我可以发布此应用程序的通用更新（与 iPhone、iPod、iPad.. 兼容）吗？

我只需要重新创建我的应用程序还是必须做更多的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:03:51.440

是的，你可以，我已经做到了。

根据您制作应用程序的方式，xib 或 Storyboard 将决定您的操作方式。

用于故事板

如果从 iPhone 转到 iPad：

1.  重复故事板重命名：MainStoryboard_iPhone.storyboard（包括 .storyboard）

2.  在 xCode 内部：右键单击新故事板 -> “打开方式” -> “源代码”

3.  在顶部 = 附近搜索 targetRuntime 行`"iOS.CocoaTouch.iPad"`并将其更改为`targetRuntime="iOS.CocoaTouch"`

这将创建一个额外的 iPhone 故事板。根据需要调整新故事板中的图稿/视图以适应 iPhone 屏幕

在摘要屏幕中检查部署信息 Main Storyboard 是否分别设置为 iPhone 和 iPad 的正确故事板

作为更新提交。

如果您使用 xibs，您可以复制并重命名它们 ~iPad 如果从 iPhone 转到通用或 ipad 应用程序，不确定 xibs 的其他方式

**无需新的捆绑 ID**

# css - 减：除变量？

> ID：14360979
> 
> 赞同：3
> 
> 时间：2013-01-16T14:46:10.353
> 
> 标签：css, less

是否可以在Less中划分两个变量？
喜欢`@varA = @varB / @varC;`？

我已经尝试过转义，但输出不是我需要的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T15:16:14.897

所有操作都应放在括号内

```
@varB = 1;
@varC = 2;
@varA = (@varB / @varC); /* @varA == 0.5 */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:14:04.563

是的。

```
@var1: 100;
@var2: 10;
@var3: @var1 / @var2;

h1 {
  font-size: @var3*1px;
} 
```

# javascript - Frank Zamboni doodle 完全是 javascript 吗？

> ID：14360988
> 
> 赞同：-3
> 
> 时间：2013-01-16T14:46:24.337
> 
> 标签：javascript, google-doodle

Frank Zamboni [doodle](http://www.google.com/doodles/zamboni)是用 javascript 实现的吗？

我尝试使用萤火虫，但我无法获得任何实施信息。

![在此处输入图像描述](../Images/6d540314d2181e8ac1356bd59ca372db.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:01:49.507

这是源链接：[https](https://www.google.com/logos/2013/zamboni13.js) ://www.google.com/logos/2013/zamboni13.js和美化版本：[http://pastebin.com/kTk1MttL](http://pastebin.com/kTk1MttL)

# c# - 使用内联服务器代码默认隐藏字段值

> ID：14360990
> 
> 赞同：0
> 
> 时间：2013-01-16T14:46:33.163
> 
> 标签：c#, asp.net

我有一个 ASP.NET 页面，我在后面的代码中定义了一个属性，如下所示：

```
 public int testProperty { get; set; } 
```

在我的页面中，我定义了一个隐藏字段，并希望使用内联服务器代码设置值，如下所示：

```
<asp:HiddenField ID="hftestProperty" runat="server" Value="<%= testProperty.ToString() %>" /> 
```

我遇到的问题是，当控件在浏览器中呈现时，它呈现的值与我定义它的方式相同：

```
<input type="hidden" name="hftestProperty" value="<%= testProperty.ToString() %>"> 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:03:09.243

试试这个：

```
<input id="hftestProperty" type="hidden" value="<%=testProperty.ToString()%>" /> 
```

它呈现：

```
<input id="hftestProperty" type="hidden" value="0" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:11:28.640

您将不得不在后面的代码中设置隐藏字段的值，例如在 Page_Load 事件中：

```
protected void Page_Load(object sender, EventArgs e)
{
  if (!Page.IsPostBack)
  {
     hftestProperty.Value = testProperty.ToString();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T16:21:03.500

您可能需要将 testProperty 转换为隐藏字段的字符串。如果您要在服务器上使用 testProperty 的字符串值，那么 testProperty.ToString() 将始终可供您使用。

试试下面的代码：

```
<input type="hidden" id="hftestProperty" value="<%= testProperty%>" /> 
```

有关更多信息，您可能会看到这个[问题。](https://stackoverflow.com/questions/1499261/how-do-i-access-a-c-sharp-variables-value-in-an-aspx-page)

# php - Cakephp 1.3 appfog 数据库配置

> ID：14360991
> 
> 赞同：-1
> 
> 时间：2013-01-16T14:46:37.643
> 
> 标签：php, cakephp, migration, database-connection, cakephp-1.3

我只是将我的博客移至 appfog。我目前正在使用 cakephp 1.3.x。我知道我需要升级，我已经在努力了。但与此同时，我想让我的博客正常工作。我无法配置数据库文件。

我知道我们需要添加

```
$services_json = json_decode(getenv('VCAP_SERVICES'),true);
$af_mysql_config = $services_json['mysql-5.1'][0]['credentials'];
// Database settings
Configure::write('Database.config', array(
    'default' => array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => $af_mysql_config['hostname'],
        'login' => $af_mysql_config['username'],
        'password' => $af_mysql_config['password'],
        'database' => $af_mysql_config['name'],
        'prefix' => '',
        'encoding' => 'utf8',
    )
)); 
```

我只想知道我们如何将设置发送到数据库配置。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:13:13.330

我只是这样做了：

类 DATABASE_CONFIG {

```
public $default = null;
function __construct() {

    $services = getenv("VCAP_SERVICES");
    $services_json = json_decode($services, true);
    $mysql_config = $services_json["mysql-5.1"][0]["credentials"];

    $this->default = array(
        'driver' => 'mysql',
        'persistent' => false,
        'host' => $mysql_config["hostname"],
        'login' => $mysql_config["user"],
        'password' => $mysql_config["password"],
        'database' => $mysql_config["name"],
        'prefix' => '',
        'port' => $mysql_config["port"],
    );
} 
```

}

# r - 由于多个系列没有足够的数据点，loess 方法在数据帧上失败

> ID：14360993
> 
> 赞同：4
> 
> 时间：2013-01-16T14:46:41.670
> 
> 标签：r, ggplot2, smoothing, loess, curvesmoothing

我有一个数据框是这样的：

输入（xx）

```
structure(list(TimeStamp = structure(c(15705, 15706), class = "Date"), 
    Host = c("Host1", "Host2"), OS = structure(c(1L, 1L), .Label = "solaris", class = "factor"), 
    ID = structure(c(1L, 1L), .Label = "1234", class = "factor"), 
    Class = structure(c(1L, 1L), .Label = "Processor", class = "factor"), 
    Stat = structure(c(1L, 1L), .Label = "CPU", class = "factor"), 
    Instance = structure(c(1L, 1L), .Label = c("_Total", "CPU0", 
    "CPU1", "CPU10", "CPU11", "CPU12", "CPU13", "CPU14", "CPU15", 
    "CPU16", "CPU17", "CPU18", "CPU19", "CPU2", "CPU20", "CPU21", 
    "CPU22", "CPU23", "CPU3", "CPU4", "CPU5", "CPU6", "CPU7", 
    "CPU8", "CPU9"), class = "factor"), Average = c(4.39009345794392, 
    5.3152972972973), Min = c(3.35, -0.01), Max = c(5.15, 72.31
    )), .Names = c("TimeStamp", "Host", "OS", "ID", "Class", 
"Stat", "Instance", "Average", "Min", "Max"), row.names = c(NA, 
-2L), class = "data.frame") 
```

这个数据框很大，它有很多主机。我面临的挑战是，当像上面这样的主机没有足够的数据点时，下面的 ggplot 会失败，基本上是抱怨没有足够的数据点来绘制图表。

```
ggplot(xx, aes(TimeStamp, Max, group=Host, colour=Host)) + geom_point() + geom_smooth(mehtod="loess") 
```

如何检查并查看此数据框中的特定主机是否有超过 10 个数据点，如果是，请使用 method="loess"。如果主机的数据点数小于 10，则使用 method="lm"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:26:49.810

是的，很难找到，但似乎有可能，

```
# for reproducibility
set.seed(42)
# The idea is to first split the data to < 10 and >= 10 points
# I use data.table for that
require(data.table)
dt <- data.frame(Host = rep(paste("Host", 1:10, sep=""), sample(1:20, 10)), 
         stringsAsFactors = FALSE)
dt <- transform(dt, x=sample(1:nrow(dt)), y = 15*(1:nrow(dt)))
dt <- data.table(dt, key="Host")
dt1 <- dt[, .SD[.N >= 10], by = Host]
dt2 <- dt[, .SD[.N < 10], by = Host]

# on to plotting now    
require(ggplot2)
# Now, dt1 has all Hosts with >= 10 observations and dt2 the other way round
# plot now for dt1
p <- ggplot(data=dt1, aes(x = x, y = y, group = Host)) + geom_line() + 
         geom_smooth(method="loess", se=T)
# plot geom_line for dt2 by telling the data and aes
# The TRICKY part: add geom_smooth by telling data=dt2
p <- p + geom_line(data = dt2, aes(x=x, y=y, group = Host)) + 
            geom_smooth(data = dt2, method="lm", se=T)

p 
```

（这是一个丑陋的例子。但它给了你这个想法）。 ![ggplot2](../Images/52456fbf8f29d7fb15f064550dc57dc6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T17:25:51.497

添加到 Arun 的出色答案中，我认为您只需要在视觉上进行区分，例如使用实线表示黄土，使用虚线表示 lm：

```
p <- ggplot(data=dt1, aes(x = x, y = y, group = Host)) + geom_line() + 
         geom_smooth(method='loess', linetype='solid', se=T)

p <- p + geom_line(data = dt2, aes(x=x, y=y, group = Host)) + 
            geom_smooth(data = dt2, method='lm', linetype='dashed', se=T) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-05T10:41:14.397

可以通过复制数据点和设置**geom_smooth**函数的 span 参数来防止警告消息。例如：

```
data <- rbind(dt1, dt2)
p <- ggplot(data=dt1, aes(x = x, y = y, group = Host)) + geom_line() + 
         geom_smooth(method='loess', span = 1.4, se=T) 
```

如果警告仍然存在，您可以尝试使用不同的 span 参数值。

# junit - 如何在 IntelliJ IDEA 中仅指定那些以特定字符串结尾的 JUnit 文件？

> ID：14360996
> 
> 赞同：3
> 
> 时间：2013-01-16T14:46:51.083
> 
> 标签：junit, intellij-idea

我刚刚进入一个旧项目。*在这个项目中，单元测试*有特定的命名约定：所有这些文件都必须以 JUnit（即`*JUnit.java`）结尾。

如何在 IntelliJ IDEA 12 中配置 JUnit 插件以仅测试这些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T15:46:10.260

我认为，*模式*可以帮助你。看看[http://www.jetbrains.com/idea/webhelp/run-debug-configuration-junit.html](http://www.jetbrains.com/idea/webhelp/run-debug-configuration-junit.html)

# android - 旋转手机时Android相机会改变尺寸

> ID：14360997
> 
> 赞同：0
> 
> 时间：2013-01-16T14:46:53.300
> 
> 标签：android, camera, orientation, surfaceview

我正在开发一个使用相机的 android 应用程序。我遇到了 surfaceChanged() 方法的问题。这是我的代码。

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    Log.e(TAG, "surfaceChanged");

    if (mPreviewRunning) {
        mCamera.stopPreview();
    }

    Camera.Parameters parameters = mCamera.getParameters();

    parameters.setPreviewSize(w, h);
    mCamera.setParameters(parameters);
    try {
        mCamera.setPreviewDisplay(holder);
    } catch (IOException e) {
        e.printStackTrace();
    }
    mCamera.startPreview();
    mPreviewRunning = true;
} 
```

变量 mPreviewRunning 在开始时被初始化为 false。程序在水平方向上运行得很好。但是当我将手机旋转到垂直方向时，屏幕会旋转并被拉伸。我不明白为什么会这样。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:55:01.983

相机根本不会改变方向 - CCD 被焊接到主板上，并像在横向模式下一样提供像素（很可能）但是，除非您在清单中禁用它，否则操作系统可能会在方向改变时重新启动您的活动。

（并且您的表面视图在此重新启动时重新创建）

在这个项目中查看处理相机管理的 android 演示：

[https://sourceforge.net/p/javaocr/source/ci/5cb9b4176f40ada57296cce79addd205e4c1405c/tree/demos/camera-utils/src/main/java/net/sf/javaocr/demos/android/utils/camera/CameraManager.java# l85](https://sourceforge.net/p/javaocr/source/ci/5cb9b4176f40ada57296cce79addd205e4c1405c/tree/demos/camera-utils/src/main/java/net/sf/javaocr/demos/android/utils/camera/CameraManager.java#l85)

您的错误是从表面尺寸设置预览尺寸 - 不要这样做。相机提供有限的一组可接受的预览尺寸，并且可以随意忽略其他设置（具体行为取决于设备）

预览尺寸是指使用的 CCD 分辨率，相机软件会根据需要将其渲染到您的表面视图中，并按照表面视图的大小进行缩放。