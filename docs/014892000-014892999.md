# StackOverflow 问答 14892000-14892999

# jquery - jQuery 基于所选项目打开/关闭 div

> ID：14892000
> 
> 赞同：0
> 
> 时间：2013-02-15T09:50:54.743
> 
> 标签：jquery, jquery-selectors

我正在尝试创建一个小型应用程序，人们可以在页面上编辑特定区域（如小型 CMS）

我有以下 HTML

```
<div class="main">
   <div class="zone">
     <div class="editor">
       <ul>
        <li>Bold</li>
        <li>Italic</li>
       </ul>
     </div>
     <div class="content">Some Content</div>
   </div>

   <div class="zone">
     <div class="editor">
       <ul>
        <li>Bold</li>
        <li>Italic</li>
       </ul>
     </div>
     <div class="content">Some More Content</div>
   </div>

</div> 
```

我想要做的是，如果我点击一个区域，那么`editor`div 会显示为特定的`zone`. 然后所有其他人必须关闭（因为我没有编辑该区域）

jQuery：

```
jQuery(document).ready(function(){

  jQuery().find('div.editor').hide();
  jQuery(".main").selectable({
         filter: 'div:not(.content)'
  });

    jQuery(".zone").each(function() {

      jQuery(this).find(".content").click(function(e) { 
        var parent = jQuery(this).parent().parent();

        var selected = parent.find('div.zone.ui-selected');

        selected.find('div.editor').show();

      });

    });
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:58:07.953

您的 hide() 函数只执行一次 - 在页面加载后的 domready 上。

你必须在你的点击函数中移动你的隐藏代码

```
 jQuery(this).find(".content").click(function(e) {
    jQuery().find('div.editor').hide();
    var parent = jQuery(this).parent().parent();

    var selected = parent.find('div.zone.ui-selected'); 
```

E：如前所述，您必须在单击事件中添加 hide()。

```
$('div.editor').hide(); 
```

此外，您不应该使用 js 来最初隐藏内容。使用 CSS display:none 来防止在页面加载时显示/隐藏。看这里：

[http://jsfiddle.net/aAvC5/4/](http://jsfiddle.net/aAvC5/4/)

# html - ie8 不将嵌入字体渲染到动态 div

> ID：14892005
> 
> 赞同：0
> 
> 时间：2013-02-15T09:51:15.213
> 
> 标签：html, css, internet-explorer, font-face, embedded-fonts

```
 @font-face {
    font-family: "England Hand";
    src:  url("fonts/englandhand.eot?#iefix") format("embedded-opentype"),url("fonts/englandhand.ttf") format("truetype");
    font-weight: normal;
    font-style: normal;
} 
```

我有上面的字体样式。它包含在页面的正文中。我还没有将字体系列添加到 div 中，它在那里呈现哦。当我创建此 div 的克隆并为其分配另一个位置和 id 时，字体停止渲染。

控制台中也没有错误。此错误仅在 IE 8 上发生，并且在 IE 9 上运行良好。

**解决方案** 注意 js 错误。肯定会有一个导致问题的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:38:19.530

我认为您缺少一些支持 ie8/ie9 的前缀。您的代码需要看起来像：

```
@font-face {
    font-family: 'deutsch_gothicnormal';
    src: url('deutsch-webfont.eot');
    src: url('deutsch-webfont.eot?#iefix') format('embedded-opentype'),
         url('deutsch-webfont.woff') format('woff'),
         url('deutsch-webfont.ttf') format('truetype'),
         url('deutsch-webfont.svg#deutsch_gothicnormal') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

# css - css在wordpress主题上悬停菜单项

> ID：14892007
> 
> 赞同：1
> 
> 时间：2013-02-15T09:51:25.120
> 
> 标签：css, wordpress, menu, hover

我的 wordpress 主题有问题：

我在我的网站上使用“wp_list_pages('title_li=')”生成了一个顶层菜单，并使用 css 对其进行了样式设置：

```
.menucontainer li {
    float:left;
    font-family:arial;
    font-size:16px;
    text-align:center;
    font-weight:bold;
    list-style:none;
    margin:0px;
    margin-top:-3px;
    padding:12px;
    background: #ffffff;
    border-top: 3px solid #0a0a46;
    border-bottom: 3px solid #0a0a46;
}

.menucontainer li:hover {
   border-bottom: 5px solid #6464A0;
   height:18px;
}

.menucontainer li a {
    color:#2d2d2d;
    text-decoration:none;
}

.menucontainer li a:hover {
    color: #50508C;  
} 
```

输出：悬停菜单项的较粗底部边框。

```
<div id="menuwrapper">
    <div class='menucontainer'>
        <li class="page_item page-item-1 current_page_item">
             <a href="http://xxx.de/?page_id=6">
                    menuitem one
             </a>
         </li>
    </div>    
</div> 
```

问题：“a”位于“li”内，只有当我悬停链接文本时才会触发悬停。那么如何将“a”的位置与“li”的位置切换？：

```
<div id="menuwrapper">
    <div class='menucontainer'>
        <a href="http://xxx.de/?page_id=6">
             <li class="page_item page-item-1 current_page_item">
                    menuitem one
             </li>
         </a>
    </div>    
</div> 
```

我想确保链接和悬停在完整的“li”容器中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:15:48.193

目前你有 2`:hover`的。`a`将您的标签保留在您的内部`li`并删除，`a:hover`因为这只会在您将鼠标悬停在`a`.

改变你的CSS看起来像这样：

[通过此更改，`a`悬停效果将在您将鼠标悬停在`li`

```
.menucontainer li:hover {
   border-bottom: 5px solid #6464A0;
   height:18px;
}

.menucontainer li:hover a {
  /* what you want to do with the a */
} 
```

# ios - 通过 SSL 请求 Web 服务

> ID：14892009
> 
> 赞同：8
> 
> 时间：2013-02-15T09:51:29.423
> 
> 标签：ios, objective-c, ios6, nsmutableurlrequest

我正在努力使用 https 请求网络服务。我收到这种错误：

```
An error occured : The certificate for this server is invalid. You might be connecting to a server that is pretending to be “SERVER_ADDRESS” which could put your confidential information at risk. 
```

我没有使用 NSUrlConnectionDelegate。这是我的方法：

```
- (void)sendRequestWithUrl:(NSURL*)url block:(void (^)(NSDictionary *dict, NSError *error)) block{
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"POST"];
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
    NSError* err = nil;
    NSHTTPURLResponse* rsp = nil;
    // Perform the request synchronously on this thread
    NSData *rspData = [NSURLConnection sendSynchronousRequest:request returningResponse:&rsp error:&err];
    if (rspData && err == nil) {
        NSDictionary *result = [NSJSONSerialization JSONObjectWithData:rspData options:NSJSONReadingMutableLeaves error:&err];
        if(result) {
            block(result, err);
        } else {
            block(nil, err);
        }
    }else{
        DLog(@"Requesting URL: %@  An error occured : %@",url,[err localizedDescription]);
        block(nil, err);
    }
} 
```

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:45:59.990

Apple 有一个技术说明很好地涵盖了这一点：

《技术说明 TN2232：HTTPS 服务器信任评估》

[https://developer.apple.com/library/ios/#technotes/tn2232/_index.html](https://developer.apple.com/library/ios/#technotes/tn2232/_index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T13:00:06.103

好吧，我的解决方案是创建`AsyncURLConnection`我在[http://stackoverflow.com](http://stackoverflow.com)某处找到的代码类，但现在找不到。所以我会给出代码：

`AsyncURLConnection`：

**。H**

```
#import <Foundation/Foundation.h>

typedef void (^completeBlock_t)(NSData *data);
typedef void (^errorBlock_t)(NSError *error);

@interface AsyncURLConnection : NSObject{
    NSMutableData *data_;
    completeBlock_t completeBlock_;
    errorBlock_t errorBlock_;
}

+ (id)request:(NSString *)requestUrl completeBlock:(completeBlock_t)completeBlock errorBlock:(errorBlock_t)errorBlock;
- (id)initWithRequest:(NSString *)requestUrl completeBlock:(completeBlock_t)completeBlock errorBlock:(errorBlock_t)errorBlock;
+ (id)requestWithMutable:(NSMutableURLRequest *)request completeBlock:(completeBlock_t)completeBlock errorBlock:(errorBlock_t)errorBlock;
- (id)initWithMutableRequest:(NSMutableURLRequest *)request completeBlock:(completeBlock_t)completeBlock errorBlock:(errorBlock_t)errorBlock;
@end 
```

**.m**

```
#import "AsyncURLConnection.h"

@implementation AsyncURLConnection

+ (id)requestWithMutable:(NSMutableURLRequest *)request completeBlock:(completeBlock_t)completeBlock errorBlock:(errorBlock_t)errorBlock
{
    return [[self alloc] initWithMutableRequest:request completeBlock:completeBlock errorBlock:errorBlock];
}

+ (id)request:(NSString*)requestUrl completeBlock:(completeBlock_t)completeBlock errorBlock:(errorBlock_t)errorBlock
{
    return [[self alloc] initWithRequest:requestUrl
                            completeBlock:completeBlock errorBlock:errorBlock];
}

- (id)initWithRequest:(NSString *)requestUrl completeBlock:(completeBlock_t)completeBlock errorBlock:(errorBlock_t)errorBlock
{
    if ((self=[super init])) {
        data_ = [[NSMutableData alloc] init];
        completeBlock_ = [completeBlock copy];
        errorBlock_ = [errorBlock copy];
        NSURL *url = [NSURL URLWithString:requestUrl];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];
        [NSURLConnection connectionWithRequest:request delegate:self];
    }
    return self;
}

- (id)initWithMutableRequest:(NSMutableURLRequest *)request completeBlock:(completeBlock_t)completeBlock errorBlock:(errorBlock_t)errorBlock
{
    if ((self=[super init])) {
        data_ = [[NSMutableData alloc] init];
        completeBlock_ = [completeBlock copy];
        errorBlock_ = [errorBlock copy];
        [NSURLConnection connectionWithRequest:request delegate:self];
    }
    return self;
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [data_ setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [data_ appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    completeBlock_(data_);
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    errorBlock_(error);
}

- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
    if ([challenge previousFailureCount] == 0)
    {
        NSURLCredential *newCredential;
        newCredential=[NSURLCredential credentialWithUser:@"someUser"
                                                 password:@"someUser"
                                              persistence:NSURLCredentialPersistenceForSession];
        [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];
        DLog(@"responded to authentication challenge");

    }else{
        DLog(@"previous authentication failure");
    }
} 
```

所以在一些控制器中可以使用这个类：

```
+ (void) downloadFileForURL:(NSURL *) url completionBlock:(void (^)(NSData *data, NSError *error)) block {
    NSString *requestURL = @"https://www.google.lt/restServer/Method";
    [AsyncURLConnection request:requestURL completeBlock:^(NSData *data) {
        /* success! */
        dispatch_queue_t downloadQueue = dispatch_queue_create("Download queue", NULL);
        dispatch_async(downloadQueue, ^{
            /* process downloaded data in Concurrent Queue */
            if (data != nil) {
                block(data, nil);
            }else{
                block(nil,nil);
            }
            dispatch_async(dispatch_get_main_queue(), ^{
                /* update UI on Main Thread */
            });
        });
    } errorBlock:^(NSError *error) {
        /* error! */
        block(nil,error);
    }];
} 
```

希望有人这个代码可以帮助。

谢谢大家的回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T05:52:54.907

您应该将以下委托方法添加到您的通信类。

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust])
    {
        if ([YOUR_HOST isEqualToString:challenge.protectionSpace.host])
        {
            [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];           
        }
    }   
    [challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
}

- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace
{
    return [protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T09:45:35.350

自签名证书总是会发生这种情况。通过使用`NSURLConnectionDelegate`

```
- (BOOL)connection:(NSURLConnection *)connection
canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace
{
    if ([protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust]) {
        return YES;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T12:40:31.803

尝试这个委托方法为我解决了同样的问题。

```
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace {
    return [protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust];
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
    [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];
    [challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
} 
```

# jquery - IE中的点击功能令人不安

> ID：14892013
> 
> 赞同：0
> 
> 时间：2013-02-15T09:51:37.700
> 
> 标签：jquery

我做了简单的点击功能，但它在 IE 中无法正常工作。`I have two box first name is 'big'`当`second is 'small'`你`click on big it will alert massage`. `Big is parent of 'small' box`所以如果你`click on small it will also alert`. 产生错误的步骤。单击黑色 div 并且不要离开鼠标按钮将其拖动到红色 div 它不会在 Firefox 中提醒按摩，但它会在 IE 中提醒按摩。示例代码[链接](http://jsfiddle.net/YLkXt/)

```
$(function () {
    $('.big').click(function () {
        alert(0)
    })
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:58:57.283

如果我理解正确，您不希望在`.small`单击 div 时发生警报？

为此，您需要在`.small`div 单击时停止事件传播，如下所示：

```
$('.big').click(function(){
    alert(0);
});

$('.small').click(function(e){
    e.stopPropagation();
 }); 
```

请参阅此处的示例：http: [//jsfiddle.net/dwqTU/3/](http://jsfiddle.net/dwqTU/3/)

# python - 在给定键的字典列表中查找键的值

> ID：14892014
> 
> 赞同：-1
> 
> 时间：2013-02-15T09:51:40.560
> 
> 标签：python, list, dictionary

我正在尝试从 Python 中的以下变量中获取 ['a','b'] ：

```
mylist = [{'A': ['a','b']}, {'B': ['c','d']}] 
```

和

```
keys = ['A'] 
```

我已经使用 itemgetter 看到了各种带有答案的问题，但这仅在列表中字典的键相同时才有效。（如果我对我的数据使用 itemgetter，它会返回一个 KeyError）

有谁知道我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:01:19.663

我会`mylist`变成一本字典：

```
In [27]: d = dict(reduce(operator.add, (x.items() for x in mylist))) 
```

然后像这样查询它：

```
In [28]: [d[k] for k in keys]
Out[28]: [['a', 'b']] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:54:53.990

如果我理解正确，你想要这个：

```
mylist[0][keys[0]] 
```

这是因为你的字典是放在一个列表中的，所以你需要先把它拿出来，像这样：`mylist[0]`. 然后，您可以使用字符串索引字典，该字符串`'A'`也是列表的第一个元素，即`keys[0]`. 将两者放在一起，您会得到上面突出显示的声明。

# android - 与 Asynchtask 的连接到 PostgreSQL 崩溃

> ID：14892022
> 
> 赞同：0
> 
> 时间：2013-02-15T09:51:54.467
> 
> 标签：android, postgresql, android-asynctask, database-connection

使用异步任务连接到我的 PostgreSQL 数据库时出现问题。当使用正确的数据库设置（pg_host、pg_user 等）尝试它时，它可以工作。问题是当尝试使用错误设置时，Activity 将关闭，因为 getConnection() 方法具有错误参数。但我希望用户手动将设置放入 settings_activity 中，以便他可以更改他们自己的数据库的设置，如果存储了错误的设置，则应该出现警告 toast 并提示用户更改设置。Activity 每次都会中断，我在做什么错？非常感谢。

代码：

```
1 protected void onCreate(Bundle savedInstanceState) {
2    super.onCreate(savedInstanceState);
3    setContentView(R.layout.main);
4   
5    getPrefs();
6     //.
7     //.
8     //.
9  new FetchSQL().execute();
10 }    
11
12 public void getPrefs() {
13   SharedPreferences prefs = PreferenceManager
14   .getDefaultSharedPreferences(this);
15
16   pg_host = prefs.getString("host", "HOST");
17   pg_port = prefs.getString("port", "PORT");
18   pg_database = prefs.getString("database", "DATABASE");
19   pg_user = prefs.getString("user", "USER");
20   pg_pw = prefs.getString("password", "PW");
21 }
22
23 
24  private class FetchSQL extends AsyncTask<Void,Void,String> {
25
26   @Override
27   protected String doInBackground(Void... params) {
28   String retval="";
29   try {
30   Class.forName("org.postgresql.Driver");
31   } catch (ClassNotFoundException e) {
32   e.printStackTrace();
33   retval = e.toString();
34   Toast.makeText(MainActivity.this,e.toString(), Toast.LENGTH_LONG).show();
35   }
36   String url =   "jdbc:postgresql://"+pg_host+":"+pg_port+"/"+pg_database+"";
37   Connection conn;
38   try {
39   DriverManager.setLoginTimeout(5);
40   conn = DriverManager.getConnection(url, pg_user, pg_pw);
41   Statement st = conn.createStatement();
42   String sql;
43   sql = //SQL Query
44   ResultSet rs = st.executeQuery(sql);
45   while(rs.next()) {
46 
47   //e.g var .. = rs.getString("...");
48   }
49   rs.close();
50   st.close();
51   conn.close();
52   }
53   catch (SQLException e) {
54   e.printStackTrace();
55   retval = e.toString();
56   Toast.makeText(MainActivity.this,e.toString(), Toast.LENGTH_LONG).show();
57   }
58   return retval;
59
60   }
61  
62   @Override 
63   protected void onPostExecute(String value) {
64 //Show Data from Query in textView
65 } 
```

日志猫：

```
102-14 12:21:18.707: W/System.err(2128): java.sql.SQLException: No suitable driver
202-14 12:21:18.767: W/System.err(2128): at                   java.sql.DriverManager.getConnection(DriverManager.java:182)
302-14 12:21:18.877: W/System.err(2128): at java.sql.DriverManager.getConnection(DriverManager.java:209)
402-14 12:21:18.928: W/System.err(2128): at MainActivity$FetchSQL.doInBackground(MainActivity.java:318)
502-14 12:21:18.987: W/System.err(2128): at .MainActivity$FetchSQL.doInBackground(MainActivity.java:1)
602-14 12:21:19.047: W/System.err(2128): at android.os.AsyncTask$2.call(AsyncTask.java:287)
702-14 12:21:19.099: W/System.err(2128): at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
802-14 12:21:19.157: W/System.err(2128): at java.util.concurrent.FutureTask.run(FutureTask.java:137)
902-14 12:21:19.217: W/System.err(2128): at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
1002-14 12:21:19.267: W/System.err(2128): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
1102-14 12:21:19.437: W/System.err(2128): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
1202-14 12:21:19.467: W/System.err(2128): at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:16:10.157

我认为问题在于在后台线程上使用 Toast。尝试使用 runOnUiThread(new Runnable())：

```
runOnUiThread(new Runnable() {
    @Override
    public void run() {
    Toast.makeText(MainActivity.this,e.toString(), Toast.LENGTH_LONG).show();
    }
}); 
```

# wpf - 以编程方式在 c# 中浮雕位图而不会失去颜色

> ID：14892025
> 
> 赞同：1
> 
> 时间：2013-02-15T09:52:03.863
> 
> 标签：wpf, c#-4.0

我想在不丢失颜色的情况下在位图上应用浮雕和素描效果。我已经应用了颜色效果，但还没有使用浮雕的运气。

任何机构有解决方案吗？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:53:20.933

将其视为两个操作。首先，生成灰色浮雕图像（你说你已经实现了）然后制作彩色浮雕图像，你在原始图像和浮雕图像之间执行混合操作。对于使用何种操作形式，没有唯一正确的选择。这取决于您希望达到的效果。

如果您假设您有一个彩色图像（R，G，B）和一个灰色浮雕图像（E），每个组件都是一个字节。这为您（对于每个像素）提供了 0..255 范围内的 4 个值；

由于您可能希望浮雕的黑暗区域显示更暗，而明亮区域显示更亮，因此具有居中的灰度级很有用。

```
w=(E/128)-1; // convert 0..255 range to -1..1 
```

现在 w 为负值的地方应该变得更暗，而 w 为正的地方 w 应该变得更亮。

```
outputR = R + (R*w);
outputG = G + (G*w);
outputB = B + (B*w); 
```

这将为您提供黑色，其中 w 为 - 1。当 w 为 1 时，亮度加倍（R*2，G*2，B*2）。这将产生彩色浮雕效果。不要忘记将结果限制为 0..255。如果它的上限更高。如果 (x>255) x=255;

那应该可以很好地保留颜色，但可能不完全是您所追求的。如果您希望浮雕图像中的白色不仅仅是翻倍，那么您可以尝试不同的配方。

```
outputR = R * (10**w);   // w==0 has no effect
outputG = G * (10**w);   // w==1 is 10 times brighter
outputB = B * (10**w);   // w==-1 is 0.1 brightness 
```

还有很多很多的可能性。您可以将 RGB 转换为[YUV](http://en.wikipedia.org/wiki/YUV)，然后将浮雕更改直接应用于 Y 组件。然后转换回RGB。

正确的选择更多的是口味问题，而不是最佳正确的配方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:39:29.773

完成灰色浮雕后，您可以根据浮雕的结果设置图像像素的 alpha 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:36:18.960

您可以在图像上应用高通滤波器。这意味着将一个像素的值替换为该像素与下一个像素之间的绝对差。

像这样的东西：

```
Bitmap img = new Bitmap(100, 100); //your image
        Bitmap embossed = new Bitmap(img); //create a clone
        for (int i = 0; i < img.Width; i++)
        {
            for (int j = 0; j < img.Height; j++)
            {
                Color c = img.GetPixel(i, j);
                Color newColor;
                if ((i == img.Width - 1))
                {
                    newColor = Color.FromArgb(0, 0, 0);
                }
                else
                {
                    Color next = img.GetPixel(x + 1, y);

                    newColor = Color.FromArgb(
                        Math.Abs((byte)((int)c.R - (int) next.R)),
                        Math.Abs((byte)((int)c.G - (int) next.G)),
                        Math.Abs((byte)((int)c.B - (int) next.B)));

                }
                embossed.SetPixel(i, j, newColor);
            }
        } 
```

# asp.net-mvc-4 - 如何使用 MVC 4 中的代码更改适用于 _Layout.cshtml 的默认 CSS 文件

> ID：14892030
> 
> 赞同：3
> 
> 时间：2013-02-15T09:52:13.000
> 
> 标签：asp.net-mvc-4

例如：-在 MVC 网站中，默认 css 已应用“Site.css”，我想应用“MyStlyle.css”代替“Site.css”...如何更改此文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:54:33.670

> 根 > App_Start > BundleConfig.cs

更改此行：

```
bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.css")); 
```

到

```
bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/MyStlyle.css")); 
```

并将您的自定义 css 放在`Root/Content/`文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:56:28.563

请提供有关您的问题的更具体信息。此外，您可以从布局页面中删除默认 CSS，并在您希望的特定页面上提供 CSS（即在本地页面上）

或者您可以按照以下方法：

> bundles.Add(new StyleBundle("~/Content/css").Include("your css");

# php - 如何在不点击 cakephp 中的复选框的情况下发布数据？

> ID：14892031
> 
> 赞同：1
> 
> 时间：2013-02-15T09:52:17.240
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-2.0

我有选择框所在的表单并选择所有选项，我想发布所有数据而不单击复选框，我不想查看此页面，这意味着如果用户转到注册页面，默认情况下数据将已经选择如何我可以在没有任何意见的情况下这样做吗？这是我的视图代码

```
 <?php v_start($this);?>

<?php
    #if(element exits of controller-action)
    echo $this->element('validations/users/signup');    
?>

<script>
    function toggleChecked(status)
        {   
        jQuery(".new-checkbox input").each( function() {
                jQuery(this).attr("checked",status);
                }
            )
        }
</script>
<h1><span style="color:CornflowerBlue"><?php echo __l('Step1');?></span></h1>

<?php
$form = $this->FormManager;
echo $form->create('User',array_merge($form_options,array('default'=>true)));
?>

<table width = "100%">
    <tbody>
        <tr>
            <td>
                <?php echo $form->input('',array('id'=>'mark-all','onclick'=>'toggleChecked(this.checked)','type'=>'checkbox','label'=>'Select All Products' ));?>

                <?php echo $form->input('product_id', 
                                array(
                                    'multiple'=>'checkbox',
                                    'options'=>$products,
                                    'div'=>false,
                                    'class'=>'new-checkbox'
                                )   
                            );
                ?>

            </td>
        </tr>
        <tr>
        <td>
            <?php 
echo $this->FormManager->end(LBL_BTN_NEXT);
?>

        </td>
        </tr>
    </tbody>
</table> 
```

我不想要这个页面，用户会默认选择数据。这是我的控制器代码

```
 $products   =   $this
                    ->User
                    ->ProductsUser
                    ->Product
                    ->find('list',array(
                                'fields'    =>  'product_id,name',
                                    'conditions'=>array(
                                                'Product.is_visible'=>true
                                                )                       
                                        )
                            );
    $this->set('products',$products);
    if($this->request->is('post'))
        {   
            $this->Session->write('signUp.signUpProduct',$this->request->data['User']);
            $this->redirect(array('action'=>'signup_product'));
        }       
} 
```

我该怎么做，提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:57:46.227

attr() 不将 true 或 false 作为参数。

```
jQuery(this).attr("checked","checked"); // Correct usage of attr() 
```

虽然我认为 attr 对于有利的 prop() 方法已被弃用。

```
jQuery(this).prop("checked",status); 
```

这确实需要一个真/假的论点。：） 希望这可以帮助。

# ios - CGContextSaveGState 性能

> ID：14892032
> 
> 赞同：0
> 
> 时间：2013-02-15T09:52:19.157
> 
> 标签：ios, core-graphics

我正在开发一个带有图像编辑实用程序的应用程序，我在其中使用 CoreGraphics，在少数情况下，从服务器获取的图像很大。使用**CGContextSaveGState**是否经常对性能产生影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T14:46:57.833

虽然 rob mayoff 的建议非常好，你应该听他的，但我可以在这个案例中破坏*部分揭露。*

是的。保存和恢复 gstate 非常昂贵。简单地撤销你所做的几乎总是更便宜。

也就是说，它通常也是更具可读性的代码，所以**你仍然应该测量它，看看它在你的情况下是否*太*昂贵。**您可能会发现它足够便宜，不值得为避免它而重写代码。

# c - wcsncpy 和 wcscpy_s 有什么区别？

> ID：14892037
> 
> 赞同：3
> 
> 时间：2013-02-15T09:52:46.540
> 
> 标签：c, visual-c++

`wcscpy_s`using和 using之间有什么实际区别`wcsncpy`吗？唯一的区别似乎是参数和返回值的顺序：

```
errno_t wcscpy_s(wchar_t *strDestination,
                 size_t numberOfElements,
                 const wchar_t *strSource);

wchar_t *wcsncpy(wchar_t *strDest,
                 const wchar_t *strSource,
                 size_t count ); 
```

如果没有实际区别，为什么微软需要添加`wcscpy_s`到 Visual Studio，什么时候`wcsncpy`已经可用和一个标准功能？

从 Visual Studio 移植到 gcc 时可以替换`wcscpy_s`to吗？`wcsncpy`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T10:05:50.017

这两个函数没有相同的行为。

来自[MSDN 文档`wcscpy_s`](http://msdn.microsoft.com/en-us/library/td1esda9.aspx)：

> 成功执行后，目标字符串将始终为空终止。

根据`wcsncpy`(C11 7.29.4.2.2/1-3) 的规范：

> ```
> #include <wchar.h>
> wchar_t *wcsncpy(wchar_t * restrict s1,
>     const wchar_t * restrict s2,
>     size_t n); 
> ```
> 
> 该`wcsncpy`函数从 指向的数组复制不超过`n`宽字符（不复制空宽字符后的字符）到 指向`s2`的数组 `s1`。
> 
> 如果 指向的数组`s2`是比`n`宽字符短的宽字符串，则将空宽字符附加到 指向的数组的副本中`s1`，直到`n`所有宽字符都被写入

和脚注（#346）：

> `n`因此，如果指向的数组的第一个宽字符中没有空宽字符`s2`，则结果将不会以空值结尾。

请注意，`strncpy`and`wcsncpy`不是为使用以空字符结尾的字符串而设计的。它们是为使用空填充的固定宽度字符串而设计的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-04T22:40:07.697

另一个区别（这只是花了我几个小时盯着代码，想知道发生了什么）是 wcscpy_s 函数默认情况下，如果您要溢出缓冲区，则终止应用程序。

我希望它的行为类似于 strncpy 变体之一。事实并非如此！

您显然可以使用 _set_invalid_parameter_handler 函数更改此行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-31T11:35:58.853

`wcscpy_s` [更安全](http://msdn.microsoft.com/en-us/library/8ef0s5kh.aspx)，它可以检测到您的错误并触发[Invalid Parameter Handler Routine](http://msdn.microsoft.com/en-us/library/ksazx244.aspx)。为了在不导致崩溃的情况下处理此类错误，他们提供了`_set_invalid_parameter_handler`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T10:01:47.283

带有 _s 的函数是更安全的函数。通常，不包含尾随 _s 的函数将被 VS2012 标记为“已弃用”。您将收到警告。更多信息：[MSDN](http://msdn.microsoft.com/en-us/library/8ef0s5kh.aspx)有大量关于这方面的信息。

# c# - TreeNode 和 TreeNode[] 的区别？

> ID：14892040
> 
> 赞同：0
> 
> 时间：2013-02-15T09:53:05.790
> 
> 标签：c#, treenode

我是新手，我无法查看 TreeNode 和 TreeNode[] 之间的区别，返回的错误是

```
"Cannot implicitly convert type 'System.Windows.Forms.TreeNode[]' to'System.Windows.Forms.TreeNode' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T09:54:25.827

`TreeNode[]`是`TreeNode`类型元素的数组。您可以在 MSDN 上查看有关[Array 的](http://msdn.microsoft.com/en-us/library/9b9dty7d.aspx)更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:59:13.383

`TreeNode`表示“一个 TreeNode 对象”。`TreeNode[]`表示“树节点的集合（数组）”

```
 `TreeNode t = new TreeNode()` 
```

数组必须看起来像这样：

```
 TreeNode[] ary = new TreeNode[1];
    ary[0] = new TreeNode();

    //and vice versa

    TreeNode t = ary[0]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T10:01:23.600

TreeNode 和 TreeNode[] 是不同的。TreeNode 是单个节点，而 TreeNode[] 是 TreeNode 的数组。

例如：

`TreeNode(String, TreeNode[])`它是 TreeNode 的重写构造函数。

```
public TreeNode(
    string text,
    TreeNode[] children
) 
```

您不能直接将 TreeNode[] 转换为 TreeNode，而是通过调用单个直通索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T09:54:28.650

`[]`表示它是一个数组，即Treenodes的集合......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T09:54:45.290

方括号[] 表示一个数组。您的方法似乎返回一个 TreeNode 对象数组，但您只分配了一个 TreeNode 对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T09:59:41.147

这确实是哈比卜所说的。[] 表示它是一个[数组](http://msdn.microsoft.com/en-us/library/aa288453%28v=vs.71%29.aspx)，返回的错误说明了您尝试将 TreeNode 数组放入单个 TreeNode 的事实。这是无法做到的。

如果你做这样的事情

```
TreeNode[] nodes = new TreeNode[2]() {new TreeNode(), new TreeNode()}
TreeNode node = nodes[0] //This will put the first TreeNode from nodes in the node 
```

我希望这有帮助

# mysql - 不知道这个右外连接的结果是什么

> ID：14892041
> 
> 赞同：0
> 
> 时间：2013-02-15T09:53:14.597
> 
> 标签：mysql, sql, join, outer-join

右外连接类似于`Union`维恩图，对吗？
我的意思是我们`A right outer Join B`应该得到. 出于某种原因，我对以下内容感到困惑： 假设表： `B``A`

`Orders`

```
mysql> select * from orders;  
+------------+------------+---------+----------+---------+  
| orderedon  | name       | partnum | quantity | remarks |  
+------------+------------+---------+----------+---------+  
| 1996-05-19 | TRUE-WHEEL |      76 |        3 | PAID    |  
| 1996-09-02 | TRUE-WHEEL |      10 |        1 | PAID    |   
| 1996-06-30 | TRUE-WHEEL |      42 |        8 | PAID    |   
| 1996-06-30 | BIKE SPEC  |      54 |       10 | PAID    |  
| 1996-05-30 | BIKE SPEC  |      23 |        8 | PAID    |   
| 1996-01-17 | BIKE SPEC  |      76 |       11 | PAID    |  
| 1996-01-17 | LE SHOPPE  |      76 |        5 | PAID    |  
| 1996-06-01 | LE SHOPPE  |      10 |        3 | PAID    |  
| 1996-06-01 | AAA BIKE   |      10 |        1 | PAID    |   
| 1996-07-01 | AAA BIKE   |      76 |        4 | PAID    |  
| 1996-07-01 | AAA BIKE   |      46 |       14 | PAID    |   
| 1996-07-11 | JACKS BIKE |      76 |       14 | PAID    |  
| 1996-05-15 | TRUE-WHEEL |      23 |        6 | PAID    |  
| 1996-05-30 | BIKE SPEC  |      20 |        2 | PAID    |   
+------------+------------+---------+----------+---------+   
14 rows in set (0.00 sec) 
```

和表`Part`：

```
mysql> select * from part;  
+---------+---------------+---------+  
| partnum | description   | price   |  
+---------+---------------+---------+  
|      54 | PEDALS        |   54.25 |  
|      42 | SEATS         |   24.50 |  
|      46 | TIRES         |   15.25 |  
|      23 | MOUNTAIN BIKE |  350.45 |  
|      76 | ROAD BIKE     |  530.00 |  
|      10 | TANDEM        | 1200.00 |  
+---------+---------------+---------+  
6 rows in set (0.00 sec) 
```

我期待下面的查询：
`select p.partnum p_partnum,p.description p_desc,p.price p_price,o.name o_name,o.partnum o_partnum from part p right outer join orders o on o.partnum=54;`
会给我所有的行`Orders`和只有那些的`part`行`partnum=54`。
但我明白了：

```
mysql> select p.partnum p_partnum,p.description p_desc,p.price p_price,o.name   o_name,o.partnum o_partnum from part p right outer join orders o on o.partnum=54;   
+-----------+---------------+---------+------------+-----------+  
| p_partnum | p_desc        | p_price | o_name     | o_partnum |  
+-----------+---------------+---------+------------+-----------+  
|      NULL | NULL          |    NULL | TRUE-WHEEL |        76 |  
|      NULL | NULL          |    NULL | TRUE-WHEEL |        10 |   
|      NULL | NULL          |    NULL | TRUE-WHEEL |        42 |   
|        54 | PEDALS        |   54.25 | BIKE SPEC  |        54 |   
|        42 | SEATS         |   24.50 | BIKE SPEC  |        54 |   
|        46 | TIRES         |   15.25 | BIKE SPEC  |        54 |   
|        23 | MOUNTAIN BIKE |  350.45 | BIKE SPEC  |        54 |    
|        76 | ROAD BIKE     |  530.00 | BIKE SPEC  |        54 |   
|        10 | TANDEM        | 1200.00 | BIKE SPEC  |        54 |   
|      NULL | NULL          |    NULL | BIKE SPEC  |        23 |    
|      NULL | NULL          |    NULL | BIKE SPEC  |        76 |    
|      NULL | NULL          |    NULL | LE SHOPPE  |        76 |    
|      NULL | NULL          |    NULL | LE SHOPPE  |        10 |    
|      NULL | NULL          |    NULL | AAA BIKE   |        10 |    
|      NULL | NULL          |    NULL | AAA BIKE   |        76 |    
|      NULL | NULL          |    NULL | AAA BIKE   |        46 |    
|      NULL | NULL          |    NULL | JACKS BIKE |        76 |   
|      NULL | NULL          |    NULL | TRUE-WHEEL |        23 |    
|      NULL | NULL          |    NULL | BIKE SPEC  |        20 |    
+-----------+---------------+---------+------------+-----------+   
19 rows in set (0.00 sec) 
```

为什么我会得到额外的行？为什么它将`Order`with`partnum=54`的行与 `part 的所有行结合起来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:09:30.523

![在此处输入图像描述](../Images/0b942d633b3d152eb0c0e067d41e91ad.png)

您的查询是

```
select p.partnum p_partnum,p.description p_desc,p.price p_price,o.name   o_name,o.partnum o_partnum 
from part p right outer join orders o on o.partnum=54; 
```

您将进行右连接，因此即使右侧的连接表中没有匹配项，它也会显示记录，并且在您的查询的这种情况下会发生这种情况

左连接也是如此，即使它们不匹配，也会显示左侧表的所有记录

参考[http://www.w3schools.com/sql/sql_join_right.asp](http://www.w3schools.com/sql/sql_join_right.asp)

如需详细说明

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:57:51.613

因为您必须`RIGHT JOIN`使用`orders`join 条件，所以`partnum=54`您将从join `orders`with `parts`when中获取所有行`partnum=54`。您有一行，`partnum=54`并且该行与来自 的所有行（交叉连接）连接`parts`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T09:58:29.343

```
FROM part p 
RIGHT OUTER JOIN orders o 
  ON o.partnum=54 
```

...仅对订单有条件，您需要添加的条件是该部分也与该订单对应，否则数据库将认为任何部分都匹配；

```
FROM part p 
RIGHT OUTER JOIN orders o 
  ON o.partnum=54
 AND o.partnum = p.partnum 
```

当然，如果您只想显示 partnum=54 的行，最好将 移动`o.partnum=54`到一个`WHERE`条件。`JOIN`条件通常用于连接表，`WHERE`通常用于过滤。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T09:58:53.163

您正在使用`o.partnum = 54`on `ON condition`，这就是您在结果中获得额外行的原因。

您需要将条件`o.partnum = 54`放在 where 子句上。

这个怎么样

```
select p.partnum p_partnum,p.description p_desc,p.price p_price,o.name o_name,o.partnum  o_partnum 
from part p right outer join orders o 
on o.partnum = p.partnum
where o.partnum=54; 
```

编辑：您可以参考这篇[漂亮的文章](http://www.codeproject.com/Articles/231132/Difference-between-On-clause-and-Where-clause-when)，当您在 ON 子句和 Where 上设置条件时结果集如何受到干扰。

# php - 正则表达式，检测文本模式

> ID：14892042
> 
> 赞同：2
> 
> 时间：2013-02-15T09:53:14.470
> 
> 标签：php, regex

我正在通过 SMS 与我的用户交互，如果他们向我发送具有此模式的 SMS，我需要执行一个操作：

图案：

```
*TEXT*TEXT*TEXT# 
```

在`TEXT`所有字符都是允许的，所以我做了这个正则表达式：

```
if (preg_match('/^\*([^*]*)\*([^*]*)\*([^#]*)\#$/', $text)){
    // perform the action...
} 
```

上面的正则表达式实际上很好用，但它不允许 next `lines after` **#**，例如：

`'*hello there*how you doing!?* and blah#'`通过正则表达式，但是：

```
'*hello there*how you doing!?* and blah#

' 
```

上面的正则表达式没有通过（注意**#**之后的下一行）

所以我决定：

```
$text = str_replace("\n\r", '', $text); 
```

但是上面的例子仍然没有通过:-(

我应该如何在正则表达式中允许下一行？还是摆脱它们？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:11:12.297

允许哈希后的可选空格和/或换行符：

```
if (preg_match('/^\*([^*]*)\*([^*]*)\*([^#]*)\#\s*$/', $text)){ 
```

我在`\s*`主题结尾之前添加了表达式。

您也可以预先使用修剪：

```
if (preg_match('/^\*([^*]*)\*([^*]*)\*([^#]*)\#$/', trim($test))){ 
```

**更新**

作为附加要求，星星之间的文本不能为空：

```
if (preg_match('/^\*([^*]+)\*([^*]+)\*([^#]+)\#$/', trim($test))){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:11:14.547

哎呀错误，就像@Jack 说我们必须添加 \s* 并忘记“m”。

我更改`*`为，`+`以便在两者之间没有任何内容时返回 false `**`：

```
$text = "*fddsfdsf*dfdfd*5f8ssfdssf8#

";
if (preg_match('/^\*([^*]+)\*([^*]+)\*([^#]+)\#\s*$/', $text)){
    echo "yes";
}else{
  echo "no";
} 
```

# asp.net-mvc - Url.Action 生成奇怪的 url

> ID：14892045
> 
> 赞同：0
> 
> 时间：2013-02-15T09:53:23.950
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我在这里遗漏了一些非常微不足道的东西，在所有示例中，这都适用于剃须刀页面：

```
'@Url.Action("GetUserUnits", "MvcAccount")' 
```

哪个应该翻译成，我想在 javascript 中使用：

> /MvcAccount/GetUserUnits

但相反，它会生成：

> /?action=GetUserUnits&controller=MvcAccount

为什么？我一定做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:57:15.033

基本上，您的路线有些混乱。`@Url.Action`无法将路由匹配到您的操作。

这可能是由于缺少定义的默认路由造成的。通常，您应该在`Global.asax.cs`文件中的应用程序启动时注册它。

例如，它可能看起来像这样：

```
 protected void Application_Start()
    {
         routes.MapRoute(
            "Default",                                              
            "{controller}/{action}/{id}",                          
            new { controller = "Home", action = "Index", id = "" } 
        );
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T11:09:02.470

如果你想去 -> /MvcAccount/GetUserUnits

采用

```
@Html.ActionLink("nameOfyourLink", "GetUserUnits", "MvcAccount")
                   [displayName]     [Action]       [Controller] 
```

# html - 带页眉和页脚的流体高度主体

> ID：14892047
> 
> 赞同：0
> 
> 时间：2013-02-15T09:53:39.257
> 
> 标签：html, css, web, height

我想要做的是将页眉放在页面顶部，将页脚放在底部，地图填满中间的所有可用空间。我还希望页眉和页脚的高度固定为 px 而不是 %。

然而，目前因为我将主地图设置为 100%，它会强制页脚离开页面底部并引入滚动条。

这是我的示例代码：http: **[//jsfiddle.net/W4mXP/20/](http://jsfiddle.net/W4mXP/20/)**

CSS

```
html, body { height: 100%;
    width: 100%;
}

#topbar {
    height: 50px; 
    width: 100%; 
    background-color: black;
    padding-left: 50px;
    padding-right: 50px;
}

#main {
    height: 100%; 
    width: 100%;
    background-color: green;
}
#bottombar {
    height: 25px; 
    width: 100%; 
    background-color: black;
    padding-left: 50px;
    padding-right: 50px;
}

.left {float: left;}
.right {float: right;} 
```

HTML

```
<html>
    <head>
         <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    </head>
    <body>
    <!-- Header -->
    <div id="topbar">
        <div class="left">
        Logo
        </div>
        <div class="right">
<form>
  <div id="radio">
    <input type="radio" id="radio1" name="radio" /><label for="radio1">Choice 1</label>
    <input type="radio" id="radio2" name="radio" checked="checked" /><label for="radio2">Choice 2</label>
    <input type="radio" id="radio3" name="radio" /><label for="radio3">Choice 3</label>
  </div>
</form>
        </div>
    </div>
    <!-- Map -->
    <div id="main">
    Map
    </div>
    <!-- Footer -->
    <div id="bottombar">
        <div class="left">
        Name
        </div>
        <div class="right">
        About
        </div>
    </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:09:28.263

我在这里的回答可能会有所帮助：[将 div 块设置为 100% 高度](https://stackoverflow.com/questions/14873776/set-div-block-to-100-height/14873926#14873926)

只需设置页脚的高度和内容的负边距：

```
#footer { height:100px; }
#container { margin-bottom:-100px; padding-bottom:100px; } 
```

这是一个如何包含页脚的示例：[JSFiddle](http://jsfiddle.net/GFcBU/2/)。

请注意，这在 IE7 中不起作用，因为它使用`box-sizing`.

编辑：您还需要向容器添加填充，以防止容器文本出现在页脚下方。我已经修复了 JSFiddle 示例以包含此内容。

# python - 通过 Iron python 执行 python（或 Iron python）脚本

> ID：14892048
> 
> 赞同：0
> 
> 时间：2013-02-15T09:53:51.130
> 
> 标签：python, ironpython

这可能吗？我想从铁 python 脚本执行不同的脚本文件。我的主文件越来越大，我想让它更具可读性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:57:31.323

你为什么不把你的脚本重新组织成一个 Python 模块呢？查看[有关模块的 Python 文档](http://docs.python.org/2/tutorial/modules.html)

@OP 的评论：如果你真的在一个函数中有大约 5000 行代码，你绝对应该考虑重新组织你的代码。如果您确定“执行不同的脚本”的事情，请看一下[subprocess.Popen](http://docs.python.org/2/library/subprocess.html#subprocess.Popen)，尽管我不建议这样做。

# api - api 调用中的 DataLayerException

> ID：14892049
> 
> 赞同：1
> 
> 时间：2013-02-15T09:53:52.273
> 
> 标签：api, facebook-graph-api, exception, call

在我的日志中，我有一个 Facebook API 异常，但我没有找到任何有关它的信息。有人知道这个吗？

例外是：

```
[error] => Array
                (
                    [message] => Unable to get 'r' connection to tier cdb.dfs
                    [type] => DataLayerException
                ) 
```

# backbone.js - 验证 save 和 save().complete - 在主干

> ID：14892051
> 
> 赞同：1
> 
> 时间：2013-02-15T09:54:08.803
> 
> 标签：backbone.js

我的模型验证有问题。似乎不可能在验证的同时使用 save().complete(function() {..... 这是代码：

我的模型：

```
 App.Models.Task = Backbone.Model.extend({

defaults: {

    title:'',
    completed: 0

},

validate: function (attrs, options) {

    if(attrs.title == '' || attrs.title === undefined) {
        return "fill title pls"
    }

},

urlRoot: 'tasks' 
}); 
```

然后在我看来，我尝试将其保存在 add 方法中：

```
 App.Views.TaskAdd = Backbone.View.extend({

tagName: 'div',

template: template('taskTemplateAdd'),

events : {

    'click .addTask' : 'add'
},

initialize: function () {

    this.model.on('add',this.render, this)

},

add : function () {

    var title = $("#addNew input:eq(0)").val();
    var completed = $("#addNew input:eq(1)").val();

    this.model.set('title', title);
    this.model.set('completed', completed);

    this.model.save({},
                 {
                   success: function (model, response) {
                   console.log("success");
                 },
                   error: function (model, response) {
                   console.log("error");
                 }
               }).complete(function () {

                    $("<div>Data sent</div>").dialog();
            $('#list').empty();
          });

},

render: function () {

    this.$el.html(this.template(this.model.toJSON()));
    return this
}

}); 
```

当验证火灾我得到错误：

```
Uncaught TypeError: Object false has no method 'complete' 
```

我知道它可能会尝试对返回值运行完整的回调，但是如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T12:02:58.193

Model.save[记录](http://backbonejs.org/#Model-save)`jqHXR`是否成功或`false`不返回对象。

因此，除非您的服务器永远不会失败，否则您需要处理`save`返回的情况`false`。这是您需要的逻辑的一个简单示例：

```
var valid=this.model.save();
if(!valid) {
    // do something when not valid
else {
    valid.complete(function() {}); // this is a jqHXR when valid
} 
```

而且，从 jQuery 1.8 开始，`complete`不[推荐使用](http://api.jquery.com/jQuery.ajax/#jqXHR). 您应该考虑`always`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:45:40.390

model.save() 首先执行验证（模型上的验证方法）。如果它成功，那么它会向服务器执行 POST/PUT。换句话说，如果客户端验证失败，你会得到一个 false。然后它不会发布到服务器。如果失败，则不能使用延迟对象，因为 false.always() 可能会导致错误。

另外，如果您没有在 model.save 选项中传递 wait: true ，它将使用其经过验证的对象更新模型。我通常会通过 wait: true 来确定。（我不想渲染元素两次）。

如果模型未能通过客户端验证，那么它也应该无法通过服务器端验证。在这种情况下，有一个“无效”事件需要监听。所以你应该只对成功调用感兴趣。理论上只有当它真的有更新时才会有趣（会触发“更改”事件）

```
add: {
    var self = this;
    this.model.on('invalid', function(error){
      console.log(error, 'model is invalid. Check model.validate')
    });
    this.model.on('change', function(model){
      console.log(model.toJSON(), 'model has successfully changed')
    });
    this.model.on('error', function(error){
      console.log("server failed to acknowledge (server connection not made)")
    });
    this.model.on('sync', function(resp){
      console.log("server successfull acknowledged (server connection made)")
    });

    this.model.save(
      {
        title:$("#addNew input:eq(0)").val(),
        completed:$("#addNew input:eq(1)").val()
      },
      {
        wait: true,
         success: function (model, response) {
            console.log("success");
            #fires an change event if the model is updated
            self.complete();
          },

         error: function (model, response) {
            console.log("error");
            self.complete();
          }
     }
  );
},
complete: function(){
    console.log("show this")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:44:34.937

利用。

```
...
add : function () {

var self = this;
this.model.save({'title':$("#addNew input:eq(0)").val(),'completed':$("#addNew input:eq(1)").val()},
             {
               success: function (model, response) {
               console.log("success");
               self.complete();
             },
               error: function (model, response) {
               console.log("error");
               self.complete();
             }
           });

},

complete: function () {

                $("<div>Data sent</div>").dialog();
        $('#list').empty();
      },
      ... 
```

# java - java中的继承继承变量？

> ID：14892052
> 
> 赞同：5
> 
> 时间：2013-02-15T09:54:11.253
> 
> 标签：java, variables, inheritance, extends

据我了解，继承的类也应该继承变量，那么为什么这段代码不起作用？

```
public class a {
    private int num;

    public static void main(String[] args) {
        b d = new b();
    }
}

class b extends a {
    public b() {
        num = 5;
        System.out.println(num);
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-15T09:55:37.950

`num`变量的访问修饰符是`private`并且`private`成员不能从自己的类中访问，因此使其`protected`可以从子类访问。

```
public class a {
     protected int num;
     ...
} 
```

[控制对类成员的访问的](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)参考

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:56:02.933

> 据我了解，继承的类也应该继承变量，

你错了，在子类`instance variables`中**没有被覆盖。**继承和多态不适用于实例字段。如果它们被标记为受保护或公开，它们仅在您的子类中可见。目前你有标记为私有的超类变量。没有其他类可以访问它。将其标记为受保护或公开，以便其他类访问它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-09T20:31:33.637

```
public class A{
    public int num=5;
    public static void main(String[] args) {
        b d = new b();
        d.c();
    }
}

class b extends A
{
    public void c() 
    {
        System.out.println(num);
    }
} 
```

我认为这绝对是你需要的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T09:55:33.837

`private`范围只能由包含类访问。

为此，`num`需要声明`protected`范围。

但是，这也将使其可被同一包中的其他类访问。我的建议是创建一个`get`/`set`方法以保持适当的封装。

然后你可以通过调用`num`在课堂上访问`b``getNum()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T11:14:11.740

因为您使用的是**私有**访问修饰符。如果您对**实例变量**或**方法**使用私有，则它只能**在类内部**访问（甚至多个类都包含一个源文件）。我们可以使用 getter 和 setter 将私有变量暴露给外部。以下代码将编译没有错误

```
public class A {
    private int num;

public void setNum(int num)
{
     this.num = num;
}

public int getNum() 
{
      return num;
    }

    public static void main(String[] args) 
{
        B d = new B();
    }

  }
  class B extends A
       {

      public B()
 {

        SetNum(5);
        System.out.println(getNum());
     }
   } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T09:55:37.063

您无权从子类访问基类的私有成员。只有具有 private/protected 修饰符的成员

# php - 如果数组未定义

> ID：14892054
> 
> 赞同：1
> 
> 时间：2013-02-15T09:54:14.420
> 
> 标签：php

如何检查数组是否未定义？我正在使用`isset`，`empty`但它们都不适用于未定义的数组。

这是我的代码：

```
if (isset($content['menu']['main'])){
    echo 'there is menu';               
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T10:02:28.867

使用**Rikesh**和**mimipc指定的此代码**

```
$arr = array("menu"=>array("main"=>1));
if (is_array($arr) && array_key_exists('menu', $arr)) {
     echo "array";
} 
```

工作示例[http://codepad.viper-7.com/Q3gTwn](http://codepad.viper-7.com/Q3gTwn)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T10:07:41.013

根据您的代码，我认为您正在寻找函数[array_key_exists()](http://php.net/manual/function.array-key-exists.php)。

```
$content = array('menu'=>array());
echo isset($content);
>>> 1
echo array_key_exists('menu', $content);
>>> 1
if ( array_key_exists('main', $content['menu']) ) {
    echo "Main menu exists";
} else {
    echo "Main menu does not exist";
}
>>> Main menu does not exist 
```

`isset()`行不通，因为`$content`设置了变量，而且数组可能不为空，所以`empty()`也行不通。您想查看该`main`键是否存在于`$content['menu']`数组中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T10:00:38.840

您可以使用以下命令检查数组元素是否存在`in_array`：

```
in_array('one', array('two', 'three', 'four')); // false 
```

您可以使用以下命令检查数组索引`array_key_exists`：

```
array_key_exists('metallica', array('metallica' => 'worst than megadeth')); // true 
```

使用该`isset`函数，您只检查数组或变量是否不等于，`NULL`以及它是否包含一个可以解释为布尔值`True`或`False`大于整数`0`的值，以及变量值（或数组键/索引/元素）是否不等于`NULL`.

我通常检查变量是否设置为: `is_null`，它可用于检查是否在同一个数组中定义了数组索引或元素。

编辑：

您还可以检查变量是否是带有：`(sizeof($something) > 0)`或带有：`is_array`函数的数组。

# performance - 在 XNA 性能问题中使用 Kinect 获取播放器的图像

> ID：14892062
> 
> 赞同：1
> 
> 时间：2013-02-15T09:54:30.577
> 
> 标签：performance, xna, kinect

我正在开发一个使用 Kinect 的 XNA 游戏。屏幕上看到的玩家是在 Kinect 传感器前玩耍的人的真实形象。为了消除背景并仅获取玩家的图像，我正在执行以下操作`kinect.AllFramesReady`：

```
using (ColorImageFrame colorVideoFrame = imageFrames.OpenColorImageFrame())
{
    if (colorVideoFrame != null)
    {
        //Getting the image of the colorVideoFrame to a Texture2D named colorVideo
    }
    //And setting its information on a Color array named colors with GetData
    colorVideo.GetData(colors); 
}

using (DepthImageFrame depthVideoFrame = imageFrames.OpenDepthImageFrame())
{
    if (depthVideoFrame != null){
        //Copying the the image to a DepthImagePixel array
        //Using only the pixels with PlayerIndex > 0 to create a Color array
        //And then setting the colors of this array from the 'colors' array by using MapDepthPointToColorPoint method, provided by Kinect SDK
        //Finally I use SetData function in order to set the colors to a Texture2D I created before
    }
} 
```

但不出所料，性能非常低。因为我必须在**每帧**`GetData`中使用长度为 640*480 = 307200 的颜色数组（因为`ColorImageFormat`）和`SetData`另一个长度为 320*480 = 76800 的颜色数组（因为 ） ！`DepthImageFormat`

 **我想知道这个问题是否有任何其他解决方案，`SetData`以及`GetData`可能的任何替代方案。因为我知道这些函数在 GPU 和 CPU 之间移动数据，这对于大数据来说是一项昂贵的操作。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:36:13.873

Kinect for Windows Toolbox 附带一个“GreenScreen-WPF”示例，它应该提供一些关于处理信息的见解。因为您在 XNA 中工作，所以可能存在一些差异，但总体概念应该适用于两个示例。

该示例通过提取多个玩家来工作。这里是处理函数的业务端：

```
private void SensorAllFramesReady(object sender, AllFramesReadyEventArgs e)
{
    // in the middle of shutting down, so nothing to do
    if (null == this.sensor)
    {
        return;
    }

    bool depthReceived = false;
    bool colorReceived = false;

    using (DepthImageFrame depthFrame = e.OpenDepthImageFrame())
    {
        if (null != depthFrame)
        {
            // Copy the pixel data from the image to a temporary array
            depthFrame.CopyDepthImagePixelDataTo(this.depthPixels);

            depthReceived = true;
        }
    }

    using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
    {
        if (null != colorFrame)
        {
            // Copy the pixel data from the image to a temporary array
            colorFrame.CopyPixelDataTo(this.colorPixels);

            colorReceived = true;
        }
    }

    // do our processing outside of the using block
    // so that we return resources to the kinect as soon as possible
    if (true == depthReceived)
    {
        this.sensor.CoordinateMapper.MapDepthFrameToColorFrame(
            DepthFormat,
            this.depthPixels,
            ColorFormat,
            this.colorCoordinates);

        Array.Clear(this.greenScreenPixelData, 0, this.greenScreenPixelData.Length);

        // loop over each row and column of the depth
        for (int y = 0; y < this.depthHeight; ++y)
        {
            for (int x = 0; x < this.depthWidth; ++x)
            {
                // calculate index into depth array
                int depthIndex = x + (y * this.depthWidth);

                DepthImagePixel depthPixel = this.depthPixels[depthIndex];

                int player = depthPixel.PlayerIndex;

                // if we're tracking a player for the current pixel, do green screen
                if (player > 0)
                {
                    // retrieve the depth to color mapping for the current depth pixel
                    ColorImagePoint colorImagePoint = this.colorCoordinates[depthIndex];

                    // scale color coordinates to depth resolution
                    int colorInDepthX = colorImagePoint.X / this.colorToDepthDivisor;
                    int colorInDepthY = colorImagePoint.Y / this.colorToDepthDivisor;

                    // make sure the depth pixel maps to a valid point in color space
                    // check y > 0 and y < depthHeight to make sure we don't write outside of the array
                    // check x > 0 instead of >= 0 since to fill gaps we set opaque current pixel plus the one to the left
                    // because of how the sensor works it is more correct to do it this way than to set to the right
                    if (colorInDepthX > 0 && colorInDepthX < this.depthWidth && colorInDepthY >= 0 && colorInDepthY < this.depthHeight)
                    {
                        // calculate index into the green screen pixel array
                        int greenScreenIndex = colorInDepthX + (colorInDepthY * this.depthWidth);

                        // set opaque
                        this.greenScreenPixelData[greenScreenIndex] = opaquePixelValue;

                        // compensate for depth/color not corresponding exactly by setting the pixel 
                        // to the left to opaque as well
                        this.greenScreenPixelData[greenScreenIndex - 1] = opaquePixelValue;
                    }
                }
            }
        }
    }

    // do our processing outside of the using block
    // so that we return resources to the kinect as soon as possible
    if (true == colorReceived)
    {
        // Write the pixel data into our bitmap
        this.colorBitmap.WritePixels(
            new Int32Rect(0, 0, this.colorBitmap.PixelWidth, this.colorBitmap.PixelHeight),
            this.colorPixels,
            this.colorBitmap.PixelWidth * sizeof(int),
            0);

        if (this.playerOpacityMaskImage == null)
        {
            this.playerOpacityMaskImage = new WriteableBitmap(
                this.depthWidth,
                this.depthHeight,
                96,
                96,
                PixelFormats.Bgra32,
                null);

            MaskedColor.OpacityMask = new ImageBrush { ImageSource = this.playerOpacityMaskImage };
        }

        this.playerOpacityMaskImage.WritePixels(
            new Int32Rect(0, 0, this.depthWidth, this.depthHeight),
            this.greenScreenPixelData,
            this.depthWidth * ((this.playerOpacityMaskImage.Format.BitsPerPixel + 7) / 8),
            0);
    }
} 
```

如果您只对单个玩家感兴趣，您可以考虑使用玩家掩码来更快地提取适当的像素集。你会

```
using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
{
    if (skeletonFrame != null && skeletonFrame.SkeletonArrayLength > 0)
    {
        if (_skeletons == null || _skeletons.Length != skeletonFrame.SkeletonArrayLength)
        {
            _skeletons = new Skeleton[skeletonFrame.SkeletonArrayLength];
        }

        skeletonFrame.CopySkeletonDataTo(_skeletons);

        // grab the tracked skeleton and set the playerIndex for use pulling
        // the depth data out for the silhouette.
        this.playerIndex = -1;
        for (int i = 0; i < _skeletons.Length; i++)
        {
            if (_skeletons[i].TrackingState != SkeletonTrackingState.NotTracked)
            {
                this.playerIndex = i+1;
            }
        }
    }
} 
```

然后，您可以逐步浏览深度数据以提取适当的位：

```
depthFrame.CopyPixelDataTo(this.pixelData);

for (int i16 = 0, i32 = 0; i16 < pixelData.Length && i32 < depthFrame32.Length; i16++, i32 += 4)
{
    int player = pixelData[i16] & DepthImageFrame.PlayerIndexBitmask;
    if (player == this.playerIndex)
    {
        // the player we are tracking
    }
    else if (player > 0)
    {
        // a player, but not the one we want.
    }
    else
    {
        // background or something else we don't care about
    }
} 
```

我从用于生成轮廓的控件中提取此代码，因此它不处理颜色流。但是，在适当的时候调用`MapDepthFrameToColorFrame`应该允许您处理颜色流数据并将相应的像素提取到播放器的掩码中。**

# redirect - Magento CMS 页面对未登录用户可见，如果用户未登录，则重定向到登录页面，页面是

> ID：14892070
> 
> 赞同：0
> 
> 时间：2013-02-15T09:54:45.067
> 
> 标签：redirect, content-management-system, magento-1.7

在我们的 Magento 1.7.0.2 站点 CMS 页面（登陆、联系我们等）上，勾选了“对未登录可见”复选框，目前仅对已登录的用户可见。如果您访问的页面之一没有登录后，它会自动将您重定向到登录页面。如果您已登录，则可以查看该页面。

我很高兴能在找出这些页面忽略“未登录可见”选项并强制用户在查看页面之前登录的原因方面获得一些帮助。

# xml - 引用包含 xs:all 的 XSD 组

> ID：14892071
> 
> 赞同：1
> 
> 时间：2013-02-15T09:54:46.377
> 
> 标签：xml, xsd

我有一点问题。在此处的 XSD 全部元素规范中：http: [//www.w3schools.com/schema/el_all.asp](http://www.w3schools.com/schema/el_all.asp)中写道，可以使用的父元素是定义组的 GROUP。我有这些 XSD 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:group name="DescriptionGroup">
    <xs:all>
      <xs:element name="description" type="xs:string"/>
      <xs:element name="comment" type="xs:string" minOccurs="0"/>
    </xs:all>
  </xs:group>

</xs:schema> 
```

我将在此文件中指定更多组，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:group name="DescriptionGroup">
    <xs:all>
      <xs:element name="description" type="xs:string"/>
      <xs:element name="comment" type="xs:string" minOccurs="0"/>
    </xs:all>
  </xs:group>

  <xs:group name="DescriptionGroup2">
    <xs:all>
      <xs:element name="description2" type="xs:string"/>
      <xs:element name="comment2" type="xs:string" minOccurs="0"/>
    </xs:all>
  </xs:group>

  <xs:group name="DescriptionGroup3">
    <xs:all>
      <xs:element name="description3" type="xs:string"/>
      <xs:element name="comment3" type="xs:string" minOccurs="0"/>
    </xs:all>
  </xs:group>

</xs:schema> 
```

重点是 group 元素需要使用 element `<xs:all>`。使用定义组我没有更多问题，一切都很好，但是当我需要使用此内容中的组时：

```
<xs:element name="tesName">
  <xs:complexType>
    <xs:choice minOccurs="0">
      <xs:group minOccurs="0" ref="DescriptionGroup" />
      <xs:group minOccurs="0" ref="DescriptionGroup2" />
      <xs:group minOccurs="0" ref="DescriptionGroup3" />
    </xs:choice>
  </xs:complexType>
</xs:element> 
```

XSD 验证抛出错误

> 错误 'all' 的组引用不是根粒子，或者它被用作扩展。

但`<xs:all>`可以在团体中使用，这正是我在顶部所描述的。我需要一个 XML 文件元素 (testName) 3 种这样的组合：

```
<?xml version="1.0" encoding="windows-1250" ?>
<testing>
  <tesName>
    <description>bla bla bla</description>
    <comment>ble ble ble</comment>
  </tesName>
  <tesName>
    <description2>bla bla bla</description>
  </tesName>
  <tesName>
    <comment3>bla bla bla</comment3>
  </tesName>
  <tesName>
    <comment2>bla bla bla</comment2>
  </tesName>
</testing> 
```

# php - 我正在尝试将文件上传到 wordpress 但我有不同的问题

> ID：14892076
> 
> 赞同：2
> 
> 时间：2013-02-15T09:54:58.943
> 
> 标签：php, wordpress, image-uploading

我正在尝试从网络服务接收文件并将它们保存到 wordpress 但我有以下问题，

1.  一些文件将被上传，但它们已损坏，我无法打开它们，尽管它们的 web 服务地址是正确的。
2.  它显示了以下错误（尽管它显示了这些错误，但还是上传了文件，这很好：D，但我想知道为什么我会收到它们）。

注意：常量 ABSPATH 已在第 22 行的 /Applications/MAMP/htdocs/wordpress/wp-load.php 中定义

致命错误：在第 95 行的 /Applications/MAMP/htdocs/wordpress/wp-content/plugins/myproject/Myclasses/retrieve_2334.php 中调用未定义函数 wp_generate_attachment_metadata()

**我的代码：**

```
 ini_set( 'display_errors', TRUE );
    error_reporting( E_ALL );
    require("/Applications/MAMP/htdocs/wordpress/wp-load.php");
    $pos = strrpos($Address, "&f=");
    $loc = substr($Address, $pos + 3);

    $Address = "http://dev.piction.com/v60/" . $Address;
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_POST, 0);
    curl_setopt($ch, CURLOPT_URL, $Address);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $output = curl_exec($ch);
    curl_close($ch);

    $upload_dir = wp_upload_dir();
    $location= $upload_dir['basedir']. "/" . $loc;

try{
    $location= $upload_dir['path']. "/" . $loc;
    $wp_filetype = wp_check_filetype($loc, null );
    $fullpathfilename = $upload_dir['path'] . "/" . $loc;

    $fileSaved = file_put_contents($location, $output);
                if ( !$fileSaved ) {
                    throw new Exception("The file cannot be saved.");
                }
                $attachment = array(
                     'post_mime_type' => $wp_filetype['type'],
                     'post_title' => preg_replace('/\.[^.]+$/', '', $loc),
                     'post_content' => '',
                     'post_status' => 'inherit',
                     'guid' => $upload_dir['url'] . "/" . $loc
                );
                $attach_id = wp_insert_attachment( $attachment, $fullpathfilename, 0 );
                if ( !$attach_id ) {
                    throw new Exception("Failed to save record into database.");
                }
                //require_once(ABSPATH . "wp-admin" . '/includes/image.php');
                $attach_data = wp_generate_attachment_metadata( $attach_id, $fullpathfilename );
                wp_update_attachment_metadata( $attach_id,  $attach_data );

        } catch (Exception $e) {
                $error = '<div id="message" class="error"><p>' . $e->getMessage() . '</p></div>';
            }
    echo 'Photo is uploaded'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:41:27.463

似乎您确实包含了两次文件，这可以解释为什么您会收到“已定义”错误。

尝试删除`require()`代码第三行中的语句并查看它是否有效，因为该文件似乎已包含在脚本的其他位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:02:36.343

尝试更改为，`require_once("/Applications/MAMP/htdocs/wordpress/wp-load.php");`因为您收到已定义的通知，这可能表明您已经包含 wp-load.php。

此外，您需要取消注释该行`//require ( ABSPATH . 'wp-admin/includes/image.php' );`才能使用`wp_generate_attachment_metadata()`

# javascript - 将 PrimeFaces 对话框更改为客户端的模态

> ID：14892077
> 
> 赞同：0
> 
> 时间：2013-02-15T09:55:03.420
> 
> 标签：javascript, primefaces, dialog, modal-dialog, client-side

我有一个这样的primefaces对话框：

```
<p:dialog widgetVar="dlg" width="320" height="220" modal="false" closable="false" showHeader="false" resizable="false" position="right,top"> 
```

如果我单击页面中的某个元素，我想将此对话框更改为模态。是否有用于此的客户端 API？

试过了

```
onclick="dlg.setModal(true);" 
```

没有成功。方法 setModal() 不存在。是否可以在不往返服务器的情况下以这种方式更改对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T09:04:27.370

Do you use Firefox with Firebug or some other browser / web developer tool that can show you the DOM element `dlg`?

There you can find that `dlg` has the methods `show()` and `hide()`, as well as `enableModality()`and `disableModality()`. These are (almost) what you want.

Unfortunately, `enable...` and `disable` don't (as one might think) set an option that makes the dialog become modal when shown. Rather they show or hide the "blackout" div. So when you want a dynamically modal dialog, instead of calling `dlg.show()` via Javascript, call `dlg.enableModality(); dlg.show()`, and vice versa for hiding.

**Edit:**

There is also the property `dlg.cfg` which contains some settings. It appears that if you simply set `dlg.cfg.modal=true` (whether that setting exists at the time or not), then the next time `dlg` is shown, it's modal (but, unlike setting it in your xhtml, it will still be draggable and resizable).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:04:17.717

你有这个（模态）的属性，现在它设置为假 madal="true"

# c# - TLBIMP 和 AXIMP 的不同结果

> ID：14892080
> 
> 赞同：2
> 
> 时间：2013-02-15T09:55:16.567
> 
> 标签：c#, com, tlbimp

我有一个 ActiveX COM 控件及其源代码。我想更改方法的输入参数之一，所以我更改了 IDL 等并生成了 COM DLL 和 TLB。

但是当我在 .NET 项目中导入 COM DLL 时，该方法保留了它的旧签名。所以我尝试使用 AXIMP 生成 ActiveX DLL（虽然都是一样的，但我想试一试）。

该方法的签名仍然没有更改为我更改的内容。

但是，当我使用生成的 TLB 文件中的 TLBIMP 生成互操作 DLL 时，方法签名正确更改。

我哪里错了？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:18:50.903

涉及许多手动步骤，因此很容易错过。这取决于您如何导入类型库，有不止一种方法可以做到这一点。如果您从 Add Reference + COM 选项卡中选择了引用，那么可能的错误是您忘记重新注册新的 COM 服务器。或者您不小心选择了旧的而不是新的，当您更改 guid 时可能会发生这种情况，就像您应该做的那样，忘记清理旧的。清理非常重要并且很容易被忽略，因为它需要在重建 COM 服务器之前完成。您最终可能会在注册表中得到很多垃圾。

是的，直接使用 Tlbimp.exe 是避免事故的最可靠方法。由于您直接在类型库上运行它并且根本不使用注册表。

尽可能减少麻烦的方法可能如下所示：

1.  首先通过运行 regsvr.exe -u 取消注册旧的 COM 服务器
2.  删除旧的 DLL 和 TLB 文件
3.  更改 IDL 以添加新方法
4.  为您更改的接口分配新的 IID
5.  为使用接口的 coclass 分配一个新的 CLSID
6.  增加库版本
7.  更改输出DLL的名称，喜欢在名称中包含主要+次要版本
8.  构建新的 COM 服务器
9.  使用 regsvr32.exe 注册服务器
10.  运行 Tlbimp.exe 以生成互操作库
11.  删除对 .NET 项目中旧互操作库的引用
12.  使用 Add Reference + Browse 添加新的互操作库

跳过这些步骤中的任何一个都可能引发构建问题、注册表污染、DLL Hell，并在没有完成任何事情的情况下度过一个糟糕透顶的一天。

# vb.net - DataTable Column.Expression 抛出错误

> ID：14892084
> 
> 赞同：1
> 
> 时间：2013-02-15T09:55:32.407
> 
> 标签：vb.net, winforms, datatable

我有包含几行的数据表，如下所示

```
CH1 CH2 Ch3 CH4 CH5
1   2   1   2   3
3   3   1   2   3
3   3   1   1   2
1   3   3   3   3
1   2   3   3   0
3   3   1   2   0
3   3   1   1   2 
```

然后我尝试添加新列

```
Dim col As New DataColumn("VCH1", GetType(Decimal),"(CH1+CH2+ch3)/CH5")
DtReadings.Columns.Add(col) 
```

当时给我错误：试图除以零。由于 CH5 的值为零，但我需要在运行时添加具有不同表达式的动态列，如何避免此类错误任何想法请帮助。

表达式值不固定，用户为动态列创建表达式。不仅可以处理除以零错误，还可以处理所有类型的计算错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:04:17.393

您可以捕获`DivideByZeroException`然后分配您想要的值：

```
Try
    col = New DataColumn("VCH1", GetType(Decimal), "(CH1+CH2+ch3)/CH5")
Catch ex As DivideByZeroException
    col = New DataColumn("VCH1", GetType(Decimal), "0")
End Try

DtReadings.Columns.Add(col) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:14:49.853

[表达式](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx)语法允许使用 IIF 语句您
可以使用这种语法为表达式构建 DataColumn

```
col = New DataColumn("VCH1", GetType(Decimal), "IIF(CH5 = 0, 0, (CH1+CH2+ch3)/CH5)") 
```

当然，作为 Expression 一个字符串属性，您可以根据您目前的特定要求动态构建您的表达式。使用 IIF 或 ISNULL，您可以在添加列之前动态构建字符串。像这样的伪代码

```
Dim currentExpression as String = BuildCurrentExpression() 
col = New DataColumn("VCH1", GetType(Decimal), currentExpression) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:53:18.567

只需创建一个扩展来解决我的问题，这需要一些时间，但我没有问题

```
<Extension()>
Public Function ToCompute(value As DataTable, exp As String, inputColumn As String) As DataTable
    Dim tempdt As New DataTable
    tempdt = value.Clone
    tempdt.Columns(inputColumn).Expression = exp
    For Each row As DataRow In value.Rows.Cast(Of DataRow).ToList
        Try
            tempdt.Rows.Add(row.ItemArray)
            value.Rows(value.Rows.IndexOf(row))(inputColumn) = tempdt.Rows(0)(inputColumn).ToString
            tempdt.Rows.Clear()
        Catch ex As Exception
            tempdt.Rows.Clear()
            value.Rows(value.Rows.IndexOf(row))(inputColumn) = 0
            Continue For
        End Try
    Next
    Return value
End Function 
```

# javascript - 如何将背景设置为从 textarea 到 div 的特定选择文本？

> ID：14892085
> 
> 赞同：0
> 
> 时间：2013-02-15T09:55:33.107
> 
> 标签：javascript, html

我想将背景颜色添加到从文本区域到 div 中的特定选定文本？

```
var elem=document.getElementById("askQuestionDescription");
var start=elem.value.substring(0,elem.selectionStart);    
var selection = elem.value.substring(elem.selectionStart,elem.selectionEnd);
var end=elem.value.substring(elem.selectionEnd,elem.length);
//   alert(start + ","+selection+","+end);
document.getElementById("askQuestionCodePreview").innerHTML=start+selection+end; 
```

我只想在选择部分设置背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:09:21.570

为什么不使用它来更改所选文本的背景颜色？

[http://www.quirksmode.org/css/selection.html](http://www.quirksmode.org/css/selection.html)

```
#askQuestionDescription::selection {
    background:red;
    color:white;
}

#askQuestionDescription::-moz-selection {
    background:red;
    color:white;
}

#askQuestionDescription::-webkit-selection {
    background:red;
    color:white;
} 
```

# jquery - 更新到 jQuery 1.9.1 后 browser.msie 错误

> ID：14892095
> 
> 赞同：57
> 
> 时间：2013-02-15T09:55:49.627
> 
> 标签：jquery, version

我使用以下脚本片段：

```
if ($.browser.msie && $.browser.version < 9) {
   extra = "?" + Math.floor(Math.random() * 3000);
} 
```

它适用于**jQuery 1.8.3**。

现在我将 jQuery 更新到新版本**1.9.1**以使用新脚本。
现在我收到以下错误：

> TypeError：无法读取未定义的属性“msie”

我阅读了新 jQuery 版本的更改日志，但 msie 应该没有
任何*改变*

任何已知的错误、提示或建议？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-15T10:00:10.057

由于 $.browser 已被弃用，这里有一个替代解决方案：

```
/**
 * Returns the version of Internet Explorer or a -1
 * (indicating the use of another browser).
 */
function getInternetExplorerVersion()
{
    var rv = -1; // Return value assumes failure.

    if (navigator.appName == 'Microsoft Internet Explorer')
    {
        var ua = navigator.userAgent;
        var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
        if (re.exec(ua) != null)
            rv = parseFloat( RegExp.$1 );
    }

    return rv;
}

function checkVersion()
{
    var msg = "You're not using Internet Explorer.";
    var ver = getInternetExplorerVersion();

    if ( ver > -1 )
    {
        if ( ver >= 8.0 ) 
            msg = "You're using a recent copy of Internet Explorer."
        else
            msg = "You should upgrade your copy of Internet Explorer.";
    }

    alert( msg );
} 
```

[来源](http://msdn.microsoft.com/en-us/library/ms537509%28v=vs.85%29.aspx)

然而，它被弃用的原因是因为 jQuery 希望你使用[特征检测](http://api.jquery.com/jQuery.support/)来代替。

一个例子：

```
$("p").html("This frame uses the W3C box model: <span>" +
        jQuery.support.boxModel + "</span>"); 
```

最后但同样重要的是，检查 IE 版本的最可靠方法：

```
// ----------------------------------------------------------
// A short snippet for detecting versions of IE in JavaScript
// without resorting to user-agent sniffing
// ----------------------------------------------------------
// If you're not in IE (or IE version is less than 5) then:
//     ie === undefined
// If you're in IE (>=5) then you can determine which version:
//     ie === 7; // IE7
// Thus, to detect IE:
//     if (ie) {}
// And to detect the version:
//     ie === 6 // IE6
//     ie > 7 // IE8, IE9 ...
//     ie < 9 // Anything less than IE9
// ----------------------------------------------------------

// UPDATE: Now using Live NodeList idea from @jdalton

var ie = (function(){

    var undef,
        v = 3,
        div = document.createElement('div'),
        all = div.getElementsByTagName('i');

    while (
        div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->',
        all[0]
    );

    return v > 4 ? v : undef;

}()); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-02-15T09:57:14.540

`$.browser`在 1.3 版中已弃用并在 1.9 版中删除

您可以通过查看[文档](http://api.jquery.com/jQuery.browser/)来验证这一点。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-12-29T14:15:49.177

对于简单的 IE 检测，我倾向于使用：

```
(/msie|trident/i).test(navigator.userAgent) 
```

访问 Microsoft Developer Network 了解 IE 用户代理：http: [//msdn.microsoft.com/library/ms537503.aspx](http://msdn.microsoft.com/library/ms537503.aspx)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-02-15T09:58:10.650

jQuery.browser选项[较早](http://api.jquery.com/jQuery.browser/)被弃用，并在 1.9 版本中与许多其他弃用的项目（如[.live](http://api.jquery.com/live/) ）一起被删除。

对于想要升级到 1.9 但仍想支持这些功能的项目和外部库，jQuery 暂时发布了一个迁移插件。

如果您需要向后兼容，您可以使用[迁移插件](https://github.com/jquery/jquery-migrate/)。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-06-06T19:10:03.727

> 更新！新插件的完整答案大修！

以下插件已在所有主流浏览器中进行了测试。***只有当您使用 jQuery 1.9 或更高版本时***，它才会使用传统的`userAgent`字符串重新装备！`jQuery.browser`

 *它具有传统的`jQuery.browser.msie`类型属性以及一些新的`.mobile`属性，包括帮助确定用户是否在移动设备上的属性。

*注意：[这不是功能测试的合适替代品。如果您希望在特定设备上支持特定功能，最好还是使用传统的功能测试]*

```
/**	jQuery.browser
 *	@author	J.D. McKinstry (2014)
 *	@description	Made to replicate older jQuery.browser command in jQuery versions 1.9+
 *	@see http://jsfiddle.net/SpYk3/wsqfbe4s/
 *
 *	@extends	jQuery
 *	@namespace	jQuery.browser
 *	@example	jQuery.browser.browser == 'browserNameInLowerCase'
 *	@example	jQuery.browser.version
 *	@example	jQuery.browser.mobile	@returns	BOOLEAN
 *	@example	jQuery.browser['browserNameInLowerCase']
 *	@example	jQuery.browser.chrome	@returns	BOOLEAN
 *	@example	jQuery.browser.safari	@returns	BOOLEAN
 *	@example	jQuery.browser.opera	@returns	BOOLEAN
 *	@example	jQuery.browser.msie	@returns	BOOLEAN
 *	@example	jQuery.browser.mozilla	@returns	BOOLEAN
 *	@example	jQuery.browser.webkit	@returns	BOOLEAN
 *	@example	jQuery.browser.ua	@returns	navigator.userAgent String
 */
;;(function($){var a=$.fn.jquery.split("."),b;for(b in a)a[b]=parseInt(a[b]);if(!$.browser&&(1<a[0]||9<=a[1])){a={browser:void 0,version:void 0,mobile:!1};navigator&&navigator.userAgent&&(a.ua=navigator.userAgent,a.webkit=/WebKit/i.test(a.ua),a.browserArray="MSIE Chrome Opera Kindle Silk BlackBerry PlayBook Android Safari Mozilla Nokia".split(" "),/Sony[^ ]*/i.test(a.ua)?a.mobile="Sony":/RIM Tablet/i.test(a.ua)?a.mobile="RIM Tablet":/BlackBerry/i.test(a.ua)?a.mobile="BlackBerry":/iPhone/i.test(a.ua)?
a.mobile="iPhone":/iPad/i.test(a.ua)?a.mobile="iPad":/iPod/i.test(a.ua)?a.mobile="iPod":/Opera Mini/i.test(a.ua)?a.mobile="Opera Mini":/IEMobile/i.test(a.ua)?a.mobile="IEMobile":/BB[0-9]{1,}; Touch/i.test(a.ua)?a.mobile="BlackBerry":/Nokia/i.test(a.ua)?a.mobile="Nokia":/Android/i.test(a.ua)&&(a.mobile="Android"),/MSIE|Trident/i.test(a.ua)?(a.browser="MSIE",a.version=/MSIE/i.test(navigator.userAgent)&&0<parseFloat(a.ua.split("MSIE")[1].match(/[0-9\.]{1,}/)[0])?parseFloat(a.ua.split("MSIE")[1].match(/[0-9\.]{1,}/)[0]):
"Edge",/Trident/i.test(a.ua)&&/rv:([0-9]{1,}[\.0-9]{0,})/.test(a.ua)&&(a.version=parseFloat(a.ua.match(/rv:([0-9]{1,}[\.0-9]{0,})/)[1].match(/[0-9\.]{1,}/)[0]))):/Chrome/.test(a.ua)?(a.browser="Chrome",a.version=parseFloat(a.ua.split("Chrome/")[1].split("Safari")[0].match(/[0-9\.]{1,}/)[0])):/Opera/.test(a.ua)?(a.browser="Opera",a.version=parseFloat(a.ua.split("Version/")[1].match(/[0-9\.]{1,}/)[0])):/Kindle|Silk|KFTT|KFOT|KFJWA|KFJWI|KFSOWI|KFTHWA|KFTHWI|KFAPWA|KFAPWI/i.test(a.ua)?(a.mobile="Kindle",
/Silk/i.test(a.ua)?(a.browser="Silk",a.version=parseFloat(a.ua.split("Silk/")[1].split("Safari")[0].match(/[0-9\.]{1,}/)[0])):/Kindle/i.test(a.ua)&&/Version/i.test(a.ua)&&(a.browser="Kindle",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].match(/[0-9\.]{1,}/)[0]))):/BlackBerry/.test(a.ua)?(a.browser="BlackBerry",a.version=parseFloat(a.ua.split("/")[1].match(/[0-9\.]{1,}/)[0])):/PlayBook/.test(a.ua)?(a.browser="PlayBook",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].match(/[0-9\.]{1,}/)[0])):
/BB[0-9]{1,}; Touch/.test(a.ua)?(a.browser="Blackberry",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].match(/[0-9\.]{1,}/)[0])):/Android/.test(a.ua)?(a.browser="Android",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].match(/[0-9\.]{1,}/)[0])):/Safari/.test(a.ua)?(a.browser="Safari",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].match(/[0-9\.]{1,}/)[0])):/Firefox/.test(a.ua)?(a.browser="Mozilla",a.version=parseFloat(a.ua.split("Firefox/")[1].match(/[0-9\.]{1,}/)[0])):
/Nokia/.test(a.ua)&&(a.browser="Nokia",a.version=parseFloat(a.ua.split("Browser")[1].match(/[0-9\.]{1,}/)[0])));if(a.browser)for(var c in a.browserArray)a[a.browserArray[c].toLowerCase()]=a.browser==a.browserArray[c];$.extend(!0,$.browser={},a)}})(jQuery);
/* - - - - - - - - - - - - - - - - - - - */

var b = $.browser;
console.log($.browser);    //    see console, working example of jQuery Plugin
console.log($.browser.chrome);

for (var x in b) {
    if (x != 'init')
        $('<tr />').append(
            $('<th />', { text: x }),
            $('<td />', { text: b[x] })
        ).appendTo($('table'));
}
```

```
table { border-collapse: collapse; }
th, td { border: 1px solid; padding: .25em .5em; vertical-align: top; }
th { text-align: right; }

textarea { height: 500px; width: 100%; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<table></table>
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-10-09T07:37:50.963

包括[jQuery 迁移插件](http://code.jquery.com/jquery-migrate-1.1.1.js)以及您的 jQuery 库。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-03-08T21:22:49.543

使用这个：

if (navigator.userAgent.match("MSIE")) {}

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-12-26T20:11:25.287

您可以通过这种方式检测IE浏览器。

`(navigator.userAgent.toLowerCase().indexOf('msie 6') != -1)`

您可以在此 URL 上获得参考：[jquery.browser.msie Alternative](http://www.sharesoft.in/jquery-browser-msie-alternative-fixed/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-08-22T20:33:19.567

您可以使用 ：

```
var MSIE = jQuery.support.leadingWhitespace; // This property is not supported by ie 6-8

$(document).ready(function(){

if (MSIE){
    if (navigator.vendor == 'Apple Computer, Inc.'){
        // some code for this navigator
    } else {
       // some code for others browsers
    }

} else {
    // default code

}}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-02T14:04:15.330

您可以简单地添加以下内容（从迁移脚本中提取），而不是添加整个迁移脚本

```
$.uaMatch = function( ua ) {
    ua = ua.toLowerCase();

    var match = /(chrome)[ \/]([\w.]+)/.exec( ua ) ||
        /(webkit)[ \/]([\w.]+)/.exec( ua ) ||
        /(opera)(?:.*version|)[ \/]([\w.]+)/.exec( ua ) ||
        /(msie) ([\w.]+)/.exec( ua ) ||
        ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( ua ) ||
        [];

    return {
        browser: match[ 1 ] || "",
        version: match[ 2 ] || "0"
    };
}; 
```

然后像这样使用它

```
$.uaMatch(navigator.userAgent) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-15T16:40:01.497

我也有这个问题。我们使用了两个版本的 Jquery（1.11.3 和 1.8.3），其中一个版本导致了这个问题。我找到了适用于两个版本的 lightbox_me.js 版本：

[http://buckwilson.me/lightboxme/](http://buckwilson.me/lightboxme/)

这只是一个旧文件的简单替换。*

# c++ - 无法使用静态 TLS 加载更多对象

> ID：14892101
> 
> 赞同：15
> 
> 时间：2013-02-15T09:56:19.953
> 
> 标签：c++, linux, gcc, ubuntu, dlopen

我有一个`dlopen()`用于加载其他模块的应用程序。应用程序和模块使用 gcc 4.6 构建在 Ubuntu 12.04 x86_64 上，但用于 i386 架构。然后将二进制文件复制到另一台具有完全相同操作系统的机器上并正常工作。

但是，如果将它们复制到 Ubuntu 12.04 i386，则某些（但不是全部）模块无法加载并显示以下消息：

```
dlopen: cannot load any more object with static TLS 
```

我怀疑这是由`__thread`变量的使用引起的。但是，这些变量不会在加载的模块中使用 - 仅在加载模块本身中使用。

有人可以提供任何其他信息，可能是什么原因？

我正在减少`__thread`变量的数量并优化它们（使用等），我只是好奇为什么它在*几乎*相同的系统`-ftls-model`上不起作用。

 ** * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-22T15:26:24.107

> 我怀疑这是由使用 __thread 变量引起的。

正确的。

> 但是，这些变量不会在加载的模块中使用 - 仅在加载模块本身中使用。

不正确。您可能没有使用`__thread`自己，但是您静态链接到模块中的某些库*正在*使用它们。您可以通过以下方式确认：

```
readelf -l /path/to/foo.so | grep TLS 
```

> 可能是什么原因？

该模块正在使用`-ftls-model=initial-exec`，但应该正在使用`-ftls-model=global-dynamic`。这最常发生在（某些）链接到的代码`foo.so`是在没有`-fPIC`.

在 上将非`-fPIC`代码链接到共享库是不可能的`x86_64`，但在上是允许的`ix86`（并导致许多微妙的问题，比如这个）。

**更新：**

> 我有1个没有-fPIC编译的模块，但我根本没有设置tls-model，据我记得默认值不是initial-exec

*   每个 ELF 映像（可执行文件或共享库）只能有一个 tls 模型。
*   TLS 模型默认`initial-exec`为非`-fPIC`代码。

因此，即使您链接一个使用into的非`-fPIC`对象，也会获取其*所有*TLS。`__thread``foo.so``foo.so``initial-exec`

 *> 那么为什么它会导致问题 - 因为如果使用 initial-exec 则 tls 变量的数量是有限的（因为它们不是动态分配的）？

正确的。**

# tridion - 问题访问 Tridion 2011 SP1 中的文件夹

> ID：14892107
> 
> 赞同：3
> 
> 时间：2013-02-15T09:56:31.990
> 
> 标签：tridion, tridion-2011

从 Tridion 5.3 升级到 Tridion 2011 SP1 后，我们发现我们无法从 Tridion GUI 访问 Flash 文件夹。每当我们单击该文件夹时，它会抛出以下错误并且不显示任何内容，实际上该文件夹中有 100 多个 flash 文件。

```
(80040000) ' ' is an unexpected token. The expected token is ';'. Line 1, position 50.Unable to get list of SDL Tridion Content Manager items.
System.Xml.XmlTextReaderImpl.Throw(Exception)
System.Xml.XmlTextReaderImpl.Throw(String,String[])
System.Xml.XmlTextReaderImpl.ThrowUnexpectedToken(String,String)
System.Xml.XmlTextReaderImpl.ThrowUnexpectedToken(Int32,String,String)
System.Xml.XmlTextReaderImpl.HandleEntityReference(Boolean,EntityExpandType,Int32&)
System.Xml.XmlTextReaderImpl.ParseAttributeValueSlow(Int32,Char,NodeData)
System.Xml.XmlTextReaderImpl.ParseAttributes()System.Xml.XmlTextReaderImpl.ParseElement()
System.Xml.XmlTextReaderImpl.ParseElementContent()System.Xml.XmlTextReaderImpl.Read()
System.Xml.XmlLoader.LoadNode(Boolean)System.Xml.XmlLoader.LoadDocSequence(XmlDocument)
System.Xml.XmlLoader.Load(XmlDocument,XmlReader,Boolean)
System.Xml.XmlDocument.Load(XmlReader)
System.Xml.XmlDocument.LoadXml(String)
Tridion.ContentManager.Data.AdoNet.ContentManagement.ItemDataMapper.CreateBinaryContentData(IdentifiableObjectData,FieldDictionary)
Tridion.ContentManager.Data.AdoNet.ContentManagement.ComponentDataMapper.ReadPost(TcmUri,FieldDictionary)
Tridion.ContentManager.Data.AdoNet.IdentifiableObjectDataMapper.Read(TcmUri,IDataRecord,IDictionary`2)
Tridion.ContentManager.Data.AdoNet.ContentManagement.OrganizationalItemDataMapper.GetListItemsPost(IDataReader,TcmUri,OrganizationalItemItemsFilterData)
Tridion.ContentManager.Data.AdoNet.ContentManagement.OrganizationalItemDataMapper.Tridion.ContentManager.Data.ContentManagement.IOrganizationalItemDataMapper.GetListItems(TcmUri,OrganizationalItemItemsFilterData)
Tridion.ContentManager.ContentManagement.OrganizationalItem.GetListItemsData(OrganizationalItemItemsFilter)
Tridion.ContentManager.ContentManagement.OrganizationalItem.GetListItemsStream(OrganizationalItemItemsFilter)
Tridion.ContentManager.BLFacade.ContentManagement.OrganizationalItemFacade.GetListItemsXml(UserContext,String,ListFilter,ListColumnFilter)
Tridion.ContentManager.BLFacade.ContentManagement.OrganizationalItemFacade.GetListData(UserContext,String,EnumListKind,ListColumnFilter,String)Folder.GetListItems 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:22:08.353

这是一个棘手的问题，可能最好由 SDL 客户支持提供。但是，如果您可以直接访问服务器，我会尝试将相关文件夹的 URI 粘贴到 Internet Explorer 中（这必须在 CMS 服务器本身上）。这应该为您提供文件夹的 XML 表示形式，并可能为您提供一些线索。也许您也可以在您的问题中发布该 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:27:40.313

当我们从 SDL Tridion 2009 升级到 SDL Tridion 2011 时，我们遇到了这个错误。对我们有用的解决方案是从文件夹中删除链接架构，刷新然后重新附加链接架构。

# c# - 如何使用 DataContractSerializer 忽略未知类型

> ID：14892113
> 
> 赞同：4
> 
> 时间：2013-02-15T09:56:42.953
> 
> 标签：c#, serialization, datacontractserializer, roundtrip

我尝试在我的应用程序中使用 DataContractSerializer 以便向后和向前兼容并支持往返（如果可能）。

是否可以支持往返，或者如果没有，是否可以在以下场景中忽略未知类型？

假设我有一个 ClassWithObject 类，它具有 object 类型的属性，并且我的应用程序的旧版本在此属性中存储了 CurrentAdditionalData 类型的对象。

```
 [DataContract]
[KnownType(typeof(CurrentAdditionalData))]
public class ClassWithObject : IExtensibleDataObject
{
    #region IExtensibleDataObject Members
    private ExtensionDataObject extensionDataObject_value;
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    public ExtensionDataObject ExtensionData
    {
        get
        {
            return extensionDataObject_value;
        }
        set
        {
            extensionDataObject_value = value;
        }
    }
    #endregion

    [DataMember]
    public object AdditionalData { get; set; }
}

[DataContract]
public class CurrentAdditionalData : IExtensibleDataObject
{
    #region IExtensibleDataObject Members
    private ExtensionDataObject extensionDataObject_value;
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    public ExtensionDataObject ExtensionData
    {
        get
        {
            return extensionDataObject_value;
        }
        set
        {
            extensionDataObject_value = value;
        }
    }
    #endregion

    [DataMember]
    public int MyProperty { get; set; }
} 
```

对于我的应用程序的新版本，加载此文件没有问题，因为它知道 CurrentAdditionalData 类。

但是，如果新版本存储了一个旧版本不知道的 FutureAdditionalData 类型的对象怎么办？

```
 [DataContract]
public class FutureAdditionalData : IExtensibleDataObject
{
    #region IExtensibleDataObject Members
    private ExtensionDataObject extensionDataObject_value;
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    public ExtensionDataObject ExtensionData
    {
        get
        {
            return extensionDataObject_value;
        }
        set
        {
            extensionDataObject_value = value;
        }
    }
    #endregion

    [DataMember]
    public string Property1 { get; set; }
    [DataMember]
    public float Property2 { get; set; }
    [DataMember]
    public double Property3 { get; set; }
} 
```

如果旧版本试图读取这个文件，它会得到一个 SerializationException，因为它不知道这个类型。

是否可以修改旧版本，使其知道未知类型并简单地忽略它们？

或者更好的是，如果旧版本再次保存文件，是否可以将未知对象加载到 ExtensionData 并原封不动地写出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-01T16:47:19.037

Microsoft 有一个完整的指南来解决这些数据合同问题。查看：[https ://msdn.microsoft.com/en-us/library/ms731138.aspx](https://msdn.microsoft.com/en-us/library/ms731138.aspx)

我刚刚意识到您的意思是您更改数据类型，而不是简单地添加/删除成员。不，您可以通过为新类型创建新成员而不是更改现有成员来适当地处理此问题。更改 dataTypes 是 API 的重大更改。

查看此指南，了解哪些更改构成 API 的版本更改：http: [//blogs.msdn.com/b/craigmcmurtry/archive/2006/07/23/676104.aspx](http://blogs.msdn.com/b/craigmcmurtry/archive/2006/07/23/676104.aspx)

# android - android SQLite数据库更新

> ID：14892114
> 
> 赞同：0
> 
> 时间：2013-02-15T09:56:44.187
> 
> 标签：android, sqlite

如何将以下命令写入 sqlitedatabase`update()`函数？

```
String query="update " + TABLE_TASKS + " SET " + TASK_LEFT + "=CASE WHEN " + TASK_LEFT + ">= " + left +" THEN " + TASK_LEFT + "+2 ELSE " + TASK_LEFT + " END, " + TASK_RIGHT + "=" + TASK_RIGHT + " +2 WHERE " +TASK_RIGHT +" >= " + right; 
```

基本上我想知道如何在函数中插入多个子句和`WHEN THEN`子句`update()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:36:29.147

该`update`方法将新值作为`ContentValues`对象，该对象仅包含固定值。它不允许在同一步骤中从数据库中读取旧值。

如果要编写比`update`允许的更复杂的 SQL，则必须`execSQL`改用。

# ios - UITableViewCell 的 contentView 自定义子视图将丢失

> ID：14892115
> 
> 赞同：1
> 
> 时间：2013-02-15T09:56:47.503
> 
> 标签：ios, objective-c, xcode

我正在做一些内存泄漏分析，并注意到我添加到我的 tableview 单元格 contentView 的 customView 正在建立并且永远不会被破坏。我确定我正确地处理了它们。

我在表中只有 5 个单元格，但有时当调用此函数时，它会将一个在其 contentView 中没有子视图的单元格出列。

我不明白这怎么会发生？contentView 从未真正被破坏，只是以某种方式从单元格中删除。

谁能解释这里发生了什么？

我在下面发布了我的功能。

谢谢斯图尔特

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString* const CELL_IDENTIFIER = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CELL_IDENTIFIER forIndexPath:indexPath];

    BRAContentView *contentView = nil;
    for ( UIView *subView in cell.contentView.subviews )
    {
        if ( [subView isKindOfClass:[BRAContentView class]] )
        {
            contentView = (BRAContentView*)subView;
            break;
        }
    }

    if ( !contentView )
    {
        contentView = [BRAContentView content];
        [cell.contentView addSubview:contentView];
        [contentView setTranslatesAutoresizingMaskIntoConstraints:NO];

        NSDictionary *viewDict = [NSDictionary dictionaryWithObject:contentView forKey:@"contentView"];

        NSArray *constraintsArray = [NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[contentView]-0-|" options:0 metrics:nil views:viewDict];
        constraintsArray = [constraintsArray arrayByAddingObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-0-[contentView]-0-|" options:0 metrics:nil views:viewDict]];

        [cell.contentView addConstraints:constraintsArray];
    }

    contentView.delegate = self;
    // customise contentView here

    return cell;
} 
```

# java - ClassLoader 和 Class.forName()

> ID：14892116
> 
> 赞同：2
> 
> 时间：2013-02-15T09:57:01.857
> 
> 标签：java, classloader

我制作了一个自定义类加载器，但我不知道如何“注册”它。

```
public static void main( String[] args ) throws Exception {
   File            jar   = new File( "Simple.jar" );
   FileInputStream fis   = new FileInputStream( jar );
   byte[]          bytes = new byte[(int)jar.length()];
   fis.read( bytes );
   fis.close();
   MemoryClassLoader cl = new MemoryClassLoader();
   cl.defineClasses( bytes );

   // 1: Following lines works well
   cl.findClass ( "help.Simple" )
      .getMethod( "main", new Class[]{ String[].class })
         .invoke( null, (Object)args );

   // 1: it works well
   cl.findClass ( "help.Simple" )
      .getMethod( "main", new Class[]{ String[].class })
         .invoke( null, (Object)args );

   // 2: it works well too
   Class.forName( "help.Simple", true, cl )
      .getMethod( "main", new Class[]{ String[].class })
         .invoke( null, (Object)args );

   // 3: it doesn't work
   Class.forName( "help.Simple" )
      .getMethod( "main", new Class[]{ String[].class })
         .invoke( null, (Object)args );
} 
```

实际的 MemoryClassloader 比较复杂，这里不详述。

该程序输出：

```
Hello, world!
Hello, world!
Exception in thread "main" java.lang.ClassNotFoundException: help.Simple
   at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
   at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
   at java.security.AccessController.doPrivileged(Native Method)
   at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
   at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
   at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
   at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
   at java.lang.Class.forName0(Native Method)
   at java.lang.Class.forName(Class.java:186)
   at loader.MemoryClassLoader.main(MemoryClassLoader.java:76) 
```

行“你好，世界！” 由 打印`help.Simple.main( String[] args )`。类 help.Simple 由我的类加载器正确加载。但是调用它的第三种方法`Class.forName()`不起作用。为什么以及如何将使用自定义类加载器加载的类添加到默认系统类加载器加载的“标准”类列表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:02:20.667

Class.forName 默认使用已加载当前类的类加载器（包含您的 main 方法的类）。我认为在这种情况下让它工作的唯一方法是使用接受另一个类加载器的重载方法。

当在其他由您的类加载器加载的类中使用时，它应该可以正常工作。

```
Class.forName( "help.Simple", true, cl ) 
```

# c++ - 多视角人脸检测

> ID：14892121
> 
> 赞同：2
> 
> 时间：2013-02-15T09:57:27.190
> 
> 标签：c++, opencv, image-processing, face-detection

我正在做一个视频处理项目。到目前为止，我一直在使用 LBPfrontal face cascade 来检测人脸，但它们的问题是它们无法检测到侧视图或倾斜的脸。是否有任何训练有素的分类器来检测这种类型的面孔？还是他们有任何有效的算法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T16:41:05.900

对于平面外旋转（类似于“否”手势的偏航变化），有一个训练有素的级联 profile_face.xml 将适用于左侧轮廓。因此，首先检查正面，然后检查左侧轮廓，然后镜像图像并检查右侧轮廓（并反向镜像坐标）。

对于平面内旋转（滚动变化，类似于头部“摆动”），您最常将图像旋转 30-45 度，执行正面检测，然后“取消旋转”坐标。

用于“是”手势的头部运动（音高变化）。检测将适用于正面人脸检测器。

将所有这些检测器以某种巧妙的高效算法并行组合在一起，使用 GPU，您就可以想出一个可以从任何角度检测人脸的系统。也许将皮肤检测器添加到删除错误接受/拒绝的组合中。

# java - 确定我的junit业务相关代码执行时间的最佳实践是什么？

> ID：14892125
> 
> 赞同：29
> 
> 时间：2013-02-15T09:57:38.703
> 
> 标签：java, junit

eclipse->junit-view 中显示的测试执行时间取决于整个测试用例的执行，包括：

*   测试数据准备
*   执行业务逻辑
*   断言结果

我需要一个关于我的业务逻辑的执行时间的更详细的陈述，并且只有我的业务逻辑。这就是我在测试用例中所做的：

```
Date lNow = new Date();
List<Geo> lAllBasisGeo = mGeoEvaluator.evaluateAllGeo(lGeoFixture.getGeo(), lAllGeo);
Date lStop = new Date();
System.out.println("Time of execution in seconds:"+((lStop.getTime()-lNow.getTime())/1000)); 
```

嗯...我想我以一种非常尴尬的方式确定时间。此外，我认为没有必要声明两个 Date 变量。

我需要建议更有效地编写该代码......

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-15T11:54:40.853

在单元测试中，我希望使用 JUnit 4 注释向测试添加超时，以确定测试是否通过（足够快）：

```
@Test(timeout=100)//let the test fail after 100 MilliSeconds
public void infinity() {
  while(true);
} 
```

为了确定您的业务逻辑的确切运行时间，我会像您一样在您的关键代码路径之前和之后添加时间语句，重复几次以获得学术上正确的结果，然后再次删除语句，从而使代码精简。

```
long start = System.currentTimeMillis();
//execute logic in between
long end = System.currentTimeMillis();
System.out.println("DEBUG: Logic A took " + (end - start) + " MilliSeconds"); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-01-09T20:45:32.060

JUnit 4.12 引入了[`Stopwatch` `@Rule`](http://junit.org/javadoc/latest/org/junit/rules/Stopwatch.html). 它使用起来非常简单，应该成为在测试期间验证所用时间的*事实上的方法。*这是一个展示其功能的示例类：

```
public static class StopwatchTest {
     private static final Logger logger = Logger.getLogger("");

     private static void logInfo(Description description, String status, long nanos) {
         String testName = description.getMethodName();
         logger.info(String.format("Test %s %s, spent %d microseconds",
                                   testName, status, TimeUnit.NANOSECONDS.toMicros(nanos)));
     }

     @Rule
     public Stopwatch stopwatch = new Stopwatch() {
         @Override
         protected void succeeded(long nanos, Description description) {
             logInfo(description, "succeeded", nanos);
         }

         @Override
         protected void failed(long nanos, Throwable e, Description description) {
             logInfo(description, "failed", nanos);
         }

         @Override
         protected void skipped(long nanos, AssumptionViolatedException e, Description description) {
             logInfo(description, "skipped", nanos);
         }

         @Override
         protected void finished(long nanos, Description description) {
             logInfo(description, "finished", nanos);
         }
     };

     @Test
     public void succeeds() {
     }

     @Test
     public void fails() {
         fail();
     }

     @Test
     public void skips() {
         assumeTrue(false);
     }

     @Test
     public void performanceTest() throws InterruptedException {
         // An example to assert runtime:
         long delta = 30;
         Thread.sleep(300L);
         assertEquals(300d, stopwatch.runtime(MILLISECONDS), delta);
         Thread.sleep(500L);
         assertEquals(800d, stopwatch.runtime(MILLISECONDS), delta);
     }
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-15T10:30:19.517

Guava 库中有一个非常有用的实用程序 -[秒表](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/base/Stopwatch.html)。
这将允许您编写以下内容

```
import com.google.common.base.Stopwatch;

final Stopwatch stopwatch = Stopwatch.createStarted();
//dostuff
System.out.println("Time of execution in seconds:" + stopwatch.stop().elapsed(TimeUnit.SECONDS)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-08T22:44:46.937

如果您想对特定命令进行断言并忽略测试设置的延迟，您可以将 Stopwatch 仅用于您要检查的代码段。因此，如果您希望几个命令占用少于 500 毫秒：

```
Stopwatch stopwatch = createStarted();
firstCommandToBeTimed();
secondCommandToBeTimed();
assertThat(stopwatch.elapsed(TimeUnit.MILLISECONDS)).isLessThan(500); 
```

现在**Stopwatch 是测试版（在某些番石榴版本中）**，你会得到一些丑陋的 intellij 警告。此外，您可能**不想使用 3rd 方库**。在这种情况下，您可以使用 Instant 执行相同操作：

```
Instant start = Clock.systemDefaultZone().instant();
firstCommandToBeTimed();
secondCommandToBeTimed();
assertThat(start.until(Clock.systemDefaultZone().instant(), MILLIS)).isLessThan(500); 
```

* * *

最后一点，如果您仍然想使用 Stopwatch，但想**摆脱警告**或**删除重复代码**，您可以创建一个方法来包装您想要计时的代码并注释掉警告：

```
{
    assertExecutionTime(() -> {
        firstCommandToBeTimed();
        secondCommandToBeTimed();
    },  500);
}
//....
@SuppressWarnings("UnstableApiUsage")
private void assertExecutionTime(Runnable runnable, int timeoutInMillis) {
    Stopwatch stopwatch = createStarted();
    runnable.run();
    assertThat(stopwatch.elapsed(TimeUnit.MILLISECONDS)).isLessThan(timeoutInMillis);
} 
```

（对于 Instant 可以采取类似的方法，以消除重复）

# android - jquery 移动或 HTML5 应用程序

> ID：14892126
> 
> 赞同：3
> 
> 时间：2013-02-15T09:57:43.277
> 
> 标签：android, jquery, css, jquery-mobile, css-transitions

我正在尝试构建一个必须是跨平台的应用程序，并且必须像原生 android 应用程序一样工作。我在 phonegap 上构建了应用程序，但从来没有像原生应用程序那样的感觉。是否有一个框架或任何类似的东西可以帮助我实现这一目标？到目前为止，我已经使用

*   Jquery 移动、phonegap、appcelerator、trigger.io

欢迎任何意见建议和帮助。当我遇到这种情况时，我也有这种感觉或需要`http://www.aldomatic.com/jqm/fb-menu-style/index.html`，我想构建一个类似 facebook 的菜单，感觉更像是原生的，但它应该是基于 HTML5 的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:11:19.523

不幸的是，我想不出任何可以为您提供完整的 Android 外观和感觉的移动 Web 框架。只有 iOS 看起来像一个名为[Kendo UI](http://www.kendoui.com/)的框架。

您能做的最好的事情就是坚持使用 jQuery Mobile 并使用与原生 Android 外观和感觉最相似的主题。

其中有 2 个，一些较旧的和一些较新的：

1.  [https://github.com/enathu/jqmobile-android-holo-light-theme（Android](https://github.com/enathu/jqmobile-android-holo-light-theme) 4 外观）

2.  [https://github.com/jjoe64/jquery-mobile-android-theme（Android](https://github.com/jjoe64/jquery-mobile-android-theme) 2.X 外观）

jQuery mobile 1.3 也有一个滑动面板，您在链接中向我们展示了。更好的是，链接中使用的滑动面板是 jQuery Mobile 面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T13:03:45.047

我最近发现了这个

[http://www.jquery4u.com/mobile/nativedroid-free-theme-jquery-mobile-1-3/](http://www.jquery4u.com/mobile/nativedroid-free-theme-jquery-mobile-1-3/)

这是我发现的最接近原生 android 主题。

希望能帮助到你！

# javascript - 用于移动（触摸）设备的 Javascript RAW 拖放实现

> ID：14892128
> 
> 赞同：1
> 
> 时间：2013-02-15T09:57:58.740
> 
> 标签：javascript, mobile, drag-and-drop

我一直在寻找这种解决方案，但没有结果。

# c# - 为什么内存占用这么多，关闭窗口时为什么没有清空？

> ID：14892134
> 
> 赞同：1
> 
> 时间：2013-02-15T09:58:13.157
> 
> 标签：c#, wpf, memory-management, memory-leaks

**背景**

我有一个显示客户列表的应用程序。用户可以创建一个新窗口来查看特定客户的详细信息。

新窗口创建过程的一部分创建一个`List<OverviewItem>`，其中`OverviewItem`定义为

```
public class OverviewItem
{
    public string Title { get; set; }
    public string Info { get; set; }

    public OverviewItem(string title, string info)
    {
        this.Title = title;
        this.Info = info;
    }
} 
```

接下来是 25 行代码，类似于以下内容：

```
overviewItems.Add(new OverviewItem("some label string", "some value string")); 
```

然后我将列表绑定到在窗口的 XAML 中定义的 DataGrid，如下所示：

```
dgOverview.ItemsSource = overviewItems; 
```

当我运行应用程序时，我可以在任务管理器**中看到，在创建列表的点和添加第 25 个项目的点之间（在 DataGrid 绑定之前），占用了将近 20MB 的内存。

问题是当我关闭窗口时，内存没有被清除。如果我再次打开窗口，又会占用 20MB 内存，并且每次打开后续窗口时都会占用 20MB 内存。

我的印象是 .net 框架会为我管理内存，但在这种情况下似乎没有这样做。使用几天后，应用程序将占用超过 1.4GB 的内存，此时用户开始遇到`OutOfMemoryException`错误。

** 我知道它不是内存分析器，但它是我目前唯一拥有的东西

**问题**

所以问题是：

1.  为什么创建看似一些简单的对象会占用如此多的内存。
2.  关闭窗口为什么不清除，如何强制清除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:01:58.127

1.  没有直接的答案，即使是 UI 对象也可能会消耗大量内存，不要只计算对象。
2.  我猜，你有一个事件绑定到新创建的窗口。如果您不注销事件，GC 将不会收集对象。

例如，如果您在主窗口中定义了一个事件，并且子窗口已注册到它；GC 不会收集子窗口。那么子窗口引用的对象也不会被收集，比如`OverviewItem`s的列表。您可以使用 WinDbg 来诊断哪些对象没有被收集以及为什么。请参阅[此链接](http://blogs.msdn.com/b/delay/archive/2009/03/11/where-s-your-leak-at-using-windbg-sos-and-gcroot-to-diagnose-a-net-memory-leak.aspx)。

# forms - Access 2010 Form.Repaint - 悬挂

> ID：14892135
> 
> 赞同：1
> 
> 时间：2013-02-15T09:58:12.823
> 
> 标签：forms, ms-access, repaint

我希望在这里遗漏一些明显的东西......

我刚刚开始开发一个新的 Access 2010 应用程序。一些个人的，希望是简单的。

我需要做的第一件事是从硬盘驱动器中读取一堆文件。如果信息尚不存在，我会解析将信息添加到表中的内容。

代码工作正常，这不是问题。由于可能需要一段时间，我使用标准表单添加了一个简单的进度对话框，但处于对话框/弹出模式。随着 FSO.Folder.Files 对象的 For Each 循环的进行，我将一些信息发送到几个文本框并发出 Me.Repaint（也尝试过 DoCmd.RepaintObject acForm，“FormName”）。

问题是，在重绘停止响应之前，我可以完成 5% 到 35% 的过程。表单只有在达到 100% 时才会重新绘制。

该过程使用有限的递归 - 如果有一个子文件夹 - 它会调用自己来处理该子文件夹，但文件夹结构是相当线性的，所以其中并不多。

表格没有任何约束。所有表更新都发生在代码中并通过 RecordSets。

任何想法为什么 Access 停止响应？

干杯，

罗伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:21:05.997

`DoEvents`之后添加`Repaint`。这将导致 Access 屈服于 Windows，然后它可以处理其挂起的任务......例如在这种情况下更新显示。

实际上，如果您的代码更新文本框，我不明白您为什么需要`Repaint`表单才能显示更改。试试这样的东西......

```
Me.MyTextBox = "hello"
DoEvents 
```

# bash - 将字符串作为命令行参数传递时转义如何工作？

> ID：14892138
> 
> 赞同：0
> 
> 时间：2013-02-15T09:58:28.227
> 
> 标签：bash, sed, awk

我以这种格式 02/03/2013 将日期传递给 awk 脚本，我需要获取与该日期匹配的所有记录，如果我不使用脚本直接执行此操作，我必须转义正斜杠

```
awk '$4 ~ /02\/03\/2013/ {print $1}' 
```

但是，如果它作为命令行参数发送，我不必转义它，我使用 02/03/2013 运行脚本并更改 awk 命令以适应它。

谁能向我解释当我们将字符串作为命令行参数发送时，字符的转义是如何工作的？对有害输入应采取哪些预防措施？

任何与此相关的在线资源将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T10:32:26.793

正斜杠不是正则表达式中的特殊字符。需要对其进行转义的原因是正则表达式常量使用正斜杠本身作为分界。使用解释为正则表达式的字符串时，不使用这些字符串，因此不需要转义斜杠。

```
awk '$4~dd{print $1}' dd=02/03/2013 
```

您可以使用精确匹配代替正则表达式匹配

```
awk '$4==dd{print $1}' dd=02/03/2013 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:08:26.157

您可以在 bash 中使用参数扩展：

```
date=02/03/2013
date=${date//\//\\/}            # Backslash all slashes.
awk "\$4 ~ /$date/ {print \$1}" # Prevent bash from expanding $1. 
```

# java - 创建 Java 组合锁

> ID：14892142
> 
> 赞同：0
> 
> 时间：2013-02-15T09:58:32.437
> 
> 标签：java

我正在从事一项计算机科学任务，我一生都无法弄清楚为什么这不起作用。

我们应该创建一个组合锁（通过构造函数），提示用户输入拼写密码的字母。

最重要的是，它必须首先允许用户犯一些错误。例如，如果密码是

狗

用户可以输入

A B C D O G

它会解锁密码锁。

附加的代码可能是我的......第五次尝试，我不太确定为什么它不起作用。有任何想法吗？

编辑：

```
Code on ideone:

http://ideone.com/D3yFYt

http://ideone.com/jzMNjJ 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:06:57.227

你可能想看看你的第一个 String 变量到底是什么。我猜你在它的末尾有一个换行符（'\n'）。

所以替换`first.equals(num1)`为`first.startsWith(num1)`它应该可以更好地工作（未经测试，可能不是唯一的错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:25:55.357

也许我没有得到正确的解释，所以早点道歉......但是你为什么不合并所有输入并测试输入.endsWith（“DOG”）。如果这不是重点，你能列出更多的场景吗？

# iphone - 动态本地化应用程序内的iOS应用程序？

> ID：14892143
> 
> 赞同：1
> 
> 时间：2013-02-15T09:58:34.617
> 
> 标签：iphone, ios, objective-c, cocoa-touch, localization

目前，我有三个单独`.strings`的文件——分别用于英语、法语和德语。

我`UISegmentedControl`在首选项部分有一个，我想`.strings`根据选择的段更改使用的默认文件。

![在此处输入图像描述](../Images/797b7b1598eebdded8179948bf392100.png)

当我测试它时，本地化已经在应用程序之外工作，我什至设法根据选择的段来本地化单个对象（如果选择了法国，下面的标签文本从“South”变为“Sud”，然后如果重新选择英语，请再次返回）使用：

```
if(German segment) {
   NSString *path= [[NSBundle mainBundle] pathForResource:@"de" ofType:@"lproj"];
   NSBundle* languageBundle = [NSBundle bundleWithPath:path];

    // Returns german version of localised string as label text.
    self.defaultName.titleLabel.text = [languageBundle localizedStringForKey:@"PREF_WEATHER_NORTH" value:@"" table:nil]; 

    // I would like to set the default .strings file to 'de' here.
}

else if(French segment) {
   NSString *path= [[NSBundle mainBundle] pathForResource:@"fr" ofType:@"lproj"];
   NSBundle* languageBundle = [NSBundle bundleWithPath:path];

   // Returns french version of localised string as label text
   self.defaultName.titleLabel.text = [languageBundle localizedStringForKey:@"PREF_WEATHER_NORTH" value:@"" table:nil]; 

   // I would like to set the default .strings file to 'fr' here
}

else if(British segment) {
   NSString *path= [[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"];
   NSBundle* languageBundle = [NSBundle bundleWithPath:path];

    // Returns english version of localised string as label text
    self.defaultName.titleLabel.text = [languageBundle localizedStringForKey:@"PREF_WEATHER_NORTH" value:@"" table:nil]; 

    // I would like to set the default .strings file to 'en' here.
} 
```

现在，由于我已经在按钮单击时本地化了单个字符串，我想知道是否可以一次性本地化每个文件中的**所有**字符串`.strings`（以便我根据哪个段更改默认使用的 .strings选择）或至少以可接受的代码量为目标。

显然，目前我可以一个一个地键入它们，但由于应用程序中使用的本地化字符串的数量，这并不是一个真正的选择。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:37:50.493

您可以将此本地化方法包装在 LocalizationSystem 类中：

```
@interface PLLocalizationSystem : NSObject

@property (strong, nonatomic) NSString *language;

+ (PLLocalizationSystem *) sharedLocalizationSystem;
- (NSString *) localizedStringForKey:(NSString *)key value:(NSString *)comment;

@end

@implementation PLLocalizationSystem {
    NSBundle *_bundle;
}

- (NSString *)localizedStringForKey:(NSString *)key value:(NSString *)comment {
    return [_bundle localizedStringForKey:key value:comment table:nil];
}

- (void)setLanguage:(NSString *)newLanguage {
    ...
    NSString *path = [[NSBundle mainBundle] pathForResource:newLanguage ofType:@"lproj"];
    if (path) {
        _bundle = [NSBundle bundleWithPath:path];
        _language = newLanguage;
    } else {
        [self resetLocalization];
    }
    ...
    [[NSNotificationCenter defaultCenter] postNotificationName:kLocalizationChangedNotification object:nil];
} 
```

并为更简单的访问做一些定义（在 LocalizationSystem 头文件中定义）：

```
#define PLLocalizedString(key, comment) \
[[PLLocalizationSystem sharedLocalizationSystem] localizedStringForKey:(key) value:(comment)]

#define PLLocalizationSetLanguage(language) \
[[PLLocalizationSystem sharedLocalizationSystem] setLanguage:(language)]

#define PLLocalizationGetLanguage \
[[PLLocalizationSystem sharedLocalizationSystem] language] 
```

您还可以从 AppName-Prefix.pch 文件中导入此文件，以便从任何地方访问。

接下来在您的控制器中，您可以观察本地化更改并调用适当的方法。

所以现在，你可以像使用 NSLocalizedString 一样使用它。

PS我不是在这里写所有的实现，但如果有人想要我可以稍后在 githab 上分享

**更新。使用示例。**

例如，您有想要动态本地化的 UIViewController：

```
@implementation MyCustomViewController

- (void)viewDidLoad {
   [super viewDidLoad];
   //first of all - register for localization changes
   //i made for this purposes category for UIViewController(localizable)
   [[NSNotificationCenter defaultCenter] addObserver:self
                                            selector:@selector(localize)
                                                name:kLocalizationChangedNotification
                                              object:nil];
}

//here you should apply all localization
- (void)localize {
    [self setTitle:PLLocalizedString(@"myTitle", nil);
    [label setText:PLLocalizedString(@"labelTitle", nil)];
    ....
}

@end 
```

在您的偏好中，当您更改语言时调用 PLLocalizationSetLanguage(language)，并且为此事件注册的所有控制器都将自动本地化。当然，这种方法需要在`localize`方法中应用所有的本地化。

并且不要忘记在控制器释放或卸载时移除观察者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:12:11.130

你可以阅读：[How to force NSLocalizedString to use a specific language](https://stackoverflow.com/questions/1669645/how-to-force-nslocalizedstring-to-use-a-specific-language) and [http://aggressive-mediocrity.blogspot.nl/2010/03/custom-localization-system-for-your.html](http://aggressive-mediocrity.blogspot.nl/2010/03/custom-localization-system-for-your.html)看看你是怎么做到的（第二个更适合你想要的）。

但是请阅读此内容（也来自第二个链接）：

> 通常，您不应在应用程序中更改 iOS 系统语言（通过使用 AppleLanguages 首选项键）。这违背了在设置应用程序中切换语言的基本 iOS 用户模型，并且还使用了未记录的首选项键，这意味着在将来的某个时候，键名可能会更改，这会破坏您的应用程序。
> 
> 如果你想在你的应用程序中切换语言，你可以通过在你的包中手动加载资源文件来实现。您可以为此目的使用 NSBundle:pathForResource:ofType:inDirectory:forLocalization:，但请记住，您的应用程序将负责所有本地化数据的加载。

# android - 如何在列表视图的选定行中执行意图功能

> ID：14892148
> 
> 赞同：0
> 
> 时间：2013-02-15T09:58:46.550
> 
> 标签：android, android-listview, onitemclicklistener

我已经创建了一些名称的列表视图，我需要的是当我单击选定的行时它只会转到该页面，单击不同的行它将移动到同一类但不同的内容。我认为它会按问题移动id. 任何人都可以帮助我如何传递问题 id 或任何其他方法来做到这一点..

这是我的代码..

```
private OnItemClickListener mlist = new OnItemClickListener(){

    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

    }       
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:07:05.717

你可以试试这样的 -

```
private OnItemClickListener mlist = new OnItemClickListener(){

    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

        if(Some condition)
        {
            Intent i= new Intent(YourActivity.this,ActivityOne.class);
            // To pass data 
            i.putExtra("SomeId", someValue);
            startActivity(i);
        }
        else if(Some other condition)
        {
            Intent i= new Intent(YourActivity.this,SecondActivityTwo.class);
            startActivity(i);
        }
        else
        {
            // Do something else--
        }

    }       
}; 
```

而在另一项活动中——

```
String identifier = getIntent().getExtras().getString("SomeId"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T10:11:35.310

在这里，我给出了一个示例，假设您有用户列表并单击要显示用户个人资料的项目...

在 List_Act 活动中...

```
public View getView(int position, View convertView, ViewGroup parent)
{
    convertView = mInflater.inflate(R.layout.rowitem,parent,false);

    convertView.setTag(UserId);
}

private OnItemClickListener mlist = new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Intent i=new Intent(List_Act.this, Profile_Act.class);
            int UserId = ((View)v.getParent()).getTag();
            i.putExtra("UserId", UserId);  //Setting variable you want to pass to another activity
            startActivity(i);
        }       
    }; 
```

在 onCreate() 的 Profile_Act 活动中

```
String UserId = getIntent().getExtras().getString("UserId");  //retrieving value in another activity 
```

现在您将设置 UserId 变量，您可以使用它...

# ios - 如何擦除核心图形中的圆圈

> ID：14892149
> 
> 赞同：2
> 
> 时间：2013-02-15T09:58:47.097
> 
> 标签：ios, objective-c, drawing, core-graphics

我正在使用 Core-Graphics 开发绘图应用程序。对于我使用的橡皮擦`kCGBlendModeClear`。它以方形擦除我的绘图。这是代码：        

```
 context = UIGraphicsGetCurrentContext();
         CGContextSetRGBStrokeColor(context,self.red,self.green,self.blue,1);
         CGContextSetBlendMode(context, kCGBlendModeClear);
         CGContextSetLineJoin(context, kCGLineJoinRound);
         CGContextSetLineWidth(context, self.eraserWidth);
         CGContextSetLineCap(context, kCGLineCapRound);
         CGContextSetShouldAntialias(context, YES);
         CGContextSetAllowsAntialiasing(context, YES); 
```

            我怎样才能使笔画圆形而不是方形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:34:39.467

> 我怎样才能使笔画圆形而不是方形？

如果您的意思是在路径中添加一个圆圈：

```
CGContextAddEllipseInRect() 
```

如果您的意思是矩形（或其他线连接）的外边框具有圆角连接，请设置

```
CGContextSetLineJoin(context, kCGLineJoinRound); 
```

# java - 布局名称无法在android中解析

> ID：14892152
> 
> 赞同：1
> 
> 时间：2013-02-15T09:58:50.403
> 
> 标签：java, android, layout, android-activity

在我的活动中，这一行`(Home.this,android.R.layout.activity_home, searchResults));`中有一个错误，上面写着“activity_home 无法解决”，但是如果我按照教程之一中提到的那样给出 single_list_item_1，错误就会消失，因为这个错误我已经在 res 中检查了大写字母，然后清理了项目，但仍然无法摆脱这个。

```
searchBox.addTextChangedListener(new TextWatcher() {
                 public void onTextChanged(CharSequence s, int start, int before, int count) {

                   //get the text in the EditText
                   String searchString=searchBox.getText().toString();
                   int textLength=searchString.length();
                    //clear the initial data set
                   searchResults.clear();
                   for(int i=0;i<songsList.size();i++)
                   {
                  String playerName=songsList.get(i).get("title").toString();
                  if(textLength<=playerName.length()){
                  //compare the String in EditText with Names in the ArrayList
                      if(searchString.equalsIgnoreCase(playerName.substring(0,textLength)))
                   Toast.makeText(getApplicationContext(),playerName,1).show();
                    searchResults.add(songsList.get(i));
                  }

                  list.setAdapter(new ArrayAdapter<HashMap<String, String>>
                  (Home.this,android.R.layout.single_list_item, searchResults));

                   }

                   adapter.notifyDataSetChanged();
                 }

            public void beforeTextChanged(CharSequence s, int start, int count,int after) {
              }

                   public void afterTextChanged(Editable s) {

                   }
                  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:02:22.800

> android.R.layout.activity_home

开头的东西`android`是预定义的android资源。

如果您想使用自己的布局，例如`activity_home.xml`

你必须以这种方式使用它

> R.layout.activity_home

这意味着您的应用程序资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:01:25.130

`android.R.layout.activity_home`你必须了解和之间的区别`R.layout.activity_home`。第一个将尝试从 android 的预定义布局集合中加载布局，而另一个位于您的项目布局文件夹中

# asp.net - C# ASPX 从本地主机下载文件

> ID：14892153
> 
> 赞同：0
> 
> 时间：2013-02-15T09:58:50.747
> 
> 标签：asp.net

我正在尝试从我的 Web 服务下载文件 (.txt)。我的网络服务使用此代码

```
WebClient req = new WebClient();
HttpResponse Response = HttpContext.Current.Response;

Response.ContentType = "image/jpeg";
Response.AddHeader("Content-Disposition", "attachment;filename=" +
    fileName);
Response.WriteFile("C:\\Temp\\Storage\\" + (fileName));
Response.End(); 
```

我想从客户那里打电话。这是怎么做的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:32:59.120

```
private void btnDownload_Click(object sender, EventArgs e)
{
    WebClient webClient = new WebClient();
    webClient.DownloadFileCompleted += new AsyncCompletedEventHandler(Completed);
    webClient.DownloadProgressChanged += new DownloadProgressChangedEventHandler(ProgressChanged);
    webClient.DownloadFileAsync(new Uri("http://NikUser.com/myfile.txt"), @"c:\myfile.txt");
} 
```

试试吧....希望它会工作...

# c++ - 从数组中的对象调用函数的分段错误

> ID：14892156
> 
> 赞同：-3
> 
> 时间：2013-02-15T09:58:57.377
> 
> 标签：c++, pointers, segmentation-fault

我有一个编程任务，要求我们使用动态分配的二维字符数组来代替字符串和向量。我有两个类：Word 包含指向 char 数组的指针，WordList 包含指向 Word 数组的指针。

分段错误来自这部分代码：

```
for(int i=0; i<listLength; i++)
    fout << "Word " << i << (wordList[i])->getWord() << endl; 
```

其中 fout 是 ofstream 对象，wordList 是 Word** 对象，getWord() 是 Word 对象的成员函数。问题是我在 WordList 的另一个成员函数中使用了相同的 wordList[i]->getWord() 语法并获得了正确的输出。

请让我知道是否需要更多代码来正确诊断问题

更多代码：

```
#include <iostream>
#include <fstream>
#include <cstring>
#include <string>  
#include "Word.h"

using namespace std;

class WordList
{
public:
    int listLength_;
    Word** wordList_; 

WordList()
{   
    char blank = ' ';
    char* blankPtr = &blank;
    setListLength(1);
    wordList_ = new Word* [listLength_];
    for(int i=0; i<listLength_; i++)
    {
        wordList_[i] = new Word(blankPtr);
    }
}

void addWord(Word* word, Word** wordList, int n)
{
    Word** wl_temp = new Word* [n+1];

    for(int i=0; i<n; i++)
    {
        wl_temp[i] = wordList[i];
    }

    wl_temp[n] = word;
    delete[] wordList;
    setWordList(wl_temp);
    listLength_++;            
    cout << " " << (wordList_[n]->getWord()); //works here 
}

void parse(const char* filename)
{
    ifstream fin(filename);

    char end;
    char* tw;
    while(fin >> end)
    {
        fin.unget();
        fin.get(tw=new char[49], 49, ' ');
        Word* w = new Word(tw);
        addWord(w, getWordList(), getListLength());

        delete w;
        delete[] tw;
    }  
}

void output(const char* outfile)
{
    ofstream fout(outfile);

for(int i=1; i<=listLength_; i++)
        fout << "Word " << i << (wordList_[i])->getWord() << endl; //not here
    fout.close();
}
};

int main(int argc, char* argv[])
{
    WordList wordList;

    wordList.parse(argv[1]);
    wordList.output(argv[2]);

    return 1;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:04:01.927

在`WordList::Wordlist`：

```
 wordList_[i] = new Word(blankPtr); 
```

您在这里传递了一个指向局部变量的指针。

这不仅本身就是一个问题，而且“字符串”不是以零结尾的。
无论是否`Word`假定对象的所有权，这都会导致未定义的行为。

如果`Word::Word`复制它的论点，这是一个非常迂回（和错误）的写法`new Word(" ")`。

在`parse`：

```
 Word* w = new Word(tw);
    addWord(w, getWordList(), getListLength());

    delete w; 
```

您已添加`w`到单词列表。现在你正在`delete`处理它。
单词列表现在包含一个指向已释放内存的指针。取消引用它也会导致未定义的行为。

```
 delete[] tw; 
```

仅当`Word::Word`复制其参数时才可以。否则，它现在拥有一个您不能用于任何事情的指针。

If you're going to work with hand-rolled allocation and raw pointers, you need to set a very clear policy for which object owns which memory and is responsible for allocating and releasing it.
The best time to do this is before you touch the keyboard.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:50:37.400

注意`blankPtr`在构造函数中指向一个局部变量，一旦构造函数返回，这个指针就无效了。此外，在`parse`函数中删除指向字符串的指针，使该指针也无效。不仅如此，您实际上删除了`Word`对象指针，这意味着您的数组中现在有一个非法指针。

`Word`除非您在构造函数中创建副本（不仅仅是复制指针，而是分配新内存） ，否则您的`Word`对象将包含导致未定义行为的非法指针。

未定义的行为是棘手的，因为它似乎可以工作一次，但不能再次工作。

# xsd - 如何将 docbook 从 4.3 版转换为 5 版

> ID：14892158
> 
> 赞同：0
> 
> 时间：2013-02-15T09:59:04.003
> 
> 标签：xsd, docbook, docbook-5

是否有将 docbook 4.3 书籍转换为最新 DocBook 5 的自动方式（或使用最少的手动更正）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T18:37:37.607

这个工具对你有用吗？

[http://infohost.nmt.edu/tcc/help/pubs/docbook5/web/auto-4-5.html](http://infohost.nmt.edu/tcc/help/pubs/docbook5/web/auto-4-5.html)

[http://www.docbook.org/xml/5.1b7/tools/db4-upgrade.xsl](http://www.docbook.org/xml/5.1b7/tools/db4-upgrade.xsl)

# python - 在列表中查找数字的所有索引

> ID：14892160
> 
> 赞同：0
> 
> 时间：2013-02-15T09:59:06.877
> 
> 标签：python, python-3.3

我有以下列表：

```
lista = [1,2,3,5,0,5,6,0] 
```

我知道这`print(lista.index(0))`将打印找到数字的第一个索引，即 4

如何让它打印下一个应该是 7 等的索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:04:47.183

经典的方法是建立一个索引列表：

例如：

```
>>> indices = [i for i, v in enumerate(a) if v == 0]
>>> print indices
[4, 7] 
```

当然 - 这可以变成一个生成器表达式。但简而言之 - 使用`enumerate`就是你所追求的。

# javascript - 选中/取消选中勾选复选框，但忽略任何禁用的复选框

> ID：14892165
> 
> 赞同：0
> 
> 时间：2013-02-15T09:59:29.767
> 
> 标签：javascript, jquery

我正在使用以下 Jquery 来选中/取消选中复选框，但其中的某些框被禁用，因此我不需要选中。

有没有办法告诉脚本忽略禁用的复选框？

```
$('.uncheck').click(function () {
    if ($(this).is(':checked')) {
        $('.customers input:checkbox').removeAttr('checked');
    } else {
        $('.customers input:checkbox').attr('checked', 'checked');
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T10:03:00.670

使用`not()`和`:disabled`

```
 $('.customers input:checkbox').not(':disabled'); 
```

-

```
 if ($(this).is(':checked')) {
        $('.customers input:checkbox').not(':disabled').removeAttr('checked');
    } else {
        $('.customers input:checkbox').not(':disabled').attr('checked', 'checked');
    } 
```

# ruby - Ruby rspec 实时输出

> ID：14892172
> 
> 赞同：2
> 
> 时间：2013-02-15T10:00:10.433
> 
> 标签：ruby, rspec

我已经使用`rspec`了一段时间，我注意到我没有实时输出到 STDOUT，即控制台挂起，直到所有测试完成然后我得到结果。

我碰巧找到了这个 rspec 格式化程序（真的很酷）[https://github.com/mattsears/nyan-cat-formatter](https://github.com/mattsears/nyan-cat-formatter)并意识到我一直错过了实时 STDOUT 输出。

我尝试`STDOUT.sync = true`在测试执行开始时进行设置，但没有雪茄:(

我在用`Ubuntu 12.04 | Ruby 1.9.3`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:05:19.010

我现在几乎所有项目都使用[Fuubar](https://github.com/jeffkreeftmeijer/fuubar)，“一个使用进度条而不是一串字母和点作为反馈的 instafailing RSpec 格式化程序”，因为我认为它提供了一个有意义的进度条以及实时反馈。

虽然不如 Nyancat 好玩，但肯定快很多！

# ios - 使用 Objective-c 为 iOS 应用程序创建 MS Excel 类型电子表格

> ID：14892174
> 
> 赞同：12
> 
> 时间：2013-02-15T10:00:18.143
> 
> 标签：ios, objective-c

我有一个示例 iOS 应用程序，它使用应用程序中的数据生成多个报告。这些报告看起来与这样的 Microsoft Excel 电子表格完全相似。

![在此处输入图像描述](../Images/33925a3855fa33bcc26fdb811b9d8589.png)

如何使用objective-c生成类似的。我不知道如何创建这样的网格视图。我们是否有任何支持 Objective-C 的框架或任何类似的东西`UITableView`来创建这样的电子表格。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-22T19:49:11.103

我从未见过像这样的开源软件，而且我认为没有。所以我会尝试亲手制作。我认为有三种方法可以走：

*   **HTML**：这应该是更简单的方法。使用 UIWebView 呈现一些预先生成的 HTML/CSS，您可以非常轻松地创建该电子表格（甚至使用 JS 库）。

*   **使用网格视图**：使用 Apple 解决方案（[UICollectionView](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/Introduction/Introduction.html)，自 iOS 6.0 起）或第三方（[AQGridView](https://github.com/AlanQuatermain/AQGridView)、[GMGridView](https://github.com/gmoledina/GMGridView)等。有几种，我只使用过 AQGridView ，它非常完整）。这里的复杂性在于，这个库通常是为了显示 UIView 的网格而开发的，所以要让它们看起来像你想要的电子表格并不容易。

*   **CoreGraphics**：这要复杂得多，因为您需要绘制所有线条，然后绘制字段，但要灵活得多。我开发了一个使用 Core Graphics 绘制雷达图 ( [RPRadarChart](https://github.com/raspu/RPRadarChart) ) 的库，这并不难。我有一个 github 存储库，其中包含我用来学习 Core Graphics 的所有代码，如果你愿意，可以看看它： [RPCGSandbox](https://github.com/raspu/RPCGSandbox)

祝您好运，如果您找到更好的解决方案，请告诉我们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T22:37:40.197

我一直在寻找这个问题的不同解决方案，但到目前为止我发现： [https ://github.com/mochidev/MDSpreadView](https://github.com/mochidev/MDSpreadView)

看起来像一个电子表格，并且具有与 UITableView 使用的类似的界面。我一直在寻找替代方案，因为 MDSpreadView 不使用 ARC，有几个编译器警告，当我为它创建一个库项目时，我注意到它使用了很多默认情况下不会被复制的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T23:25:52.873

您可能想深入研究 UICollectionView、UICollectionViewFlowLayout，而且还值得研究 iOS6 中的 AutoLayout Constraints。一个有用的链接：[http ://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T09:22:10.370

使用多个表格作为列，当一个滚动时，您也会滚动其余的表格。我使用它创建了一个网格，它对大约 10000 行和 20 列是有效的。如果你愿意，我可以指导你如何完成。

# java - 异常 - java.sql.SQLException：ResultSet 关闭后不允许操作

> ID：14892175
> 
> 赞同：0
> 
> 时间：2013-02-15T10:00:25.270
> 
> 标签：java, mysql, sqlexception

我遇到了一个例外，例如

```
java.sql.SQLException: Before start of result set when calling getInt() method 
```

我的代码如下:::

```
public void setdateTOSource(){
   try{
        String q = "SELECT * FROM ipp.resource;";
        ResultSet result = DB_Access.getData(q);
        System.out.println("Size result set"+result.getFetchSize());
        while(result.next()){
            getIpSource().add(result.getString(1)); 
            System.out.println(result.getString(1));

        }
       System.out.println("source size "+getIpSource().size());      
   }
   catch(Exception e){
       System.out.println(e);
   }
}
public void insertTargetToDb(List<String> targetValue){

    try{
        Connection con = DB_Connect.getDataBaseConnection();
        Statement statement1 = con.createStatement();

        int val=0;
        String q1 = "SELECT MAX(area_id) as aa FROM ipp.area;";
        ResultSet resultset = statement1.executeQuery(q1); 
        if(resultset.next()){
            val = resultset.getInt(1);
         };           
        val++;

        String q2 = "INSERT INTO ipp.area VALUES("+val+",'"+getAreaName()+"',1);";
        Statement statement2 = con.createStatement();
        statement1.executeUpdate(q2);
        for( int y=0;y<targetValue.size();y++){

           System.out.println("FS");

           String ip=targetValue.get(y);
           System.out.println("ip" +ip);
           String q3 ="SELECT resource_id FROM ipp.resource r where ip_address like '"+ip+"%';";
           Statement statement3 = con.createStatement();
           ResultSet resultset3 =statement3.executeQuery(q3);

           System.out.println("FS1");
//           ResultSet result1 =DB_Access.getData(q3);
           System.out.println("FS2");
           System.out.println("result set"+resultset3.getFetchSize());
 //====================================================================              
while(resultset3.next()){
                setId(resultset.getInt(1));
          }           
          System.out.println("result :........."+resultset3.getInt("resource_id"));
          System.out.println("FS3");

           String q4 = "INSERT INTO ipp.used_resource VALUES("+val+","+getId()+");";
           Statement statement4= con.createStatement();
           statement4.executeUpdate(q4);
//           DB_Access.setData(q3);
           statement3.close();
           statement4.close();
//           resultset3.close();
        }
        resultset.close();
        statement1.close();
        statement2.close();
        con.close();
        addMessage("Area created Successfully");

    }
    catch(Exception e){
        System.out.println(e);
    }
} 
```

异常出现在行后

> //=========================== resource_id 是一个整数值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:16:57.933

这条线

```
while(resultset3.next()){
                setId(resultset.getInt(1));
          } 
```

必须换成？

```
while(resultset3.next()){
                setId(resultset3.getInt(1));
          } 
```

# sql-server-2008 - 将多条记录合并为一条

> ID：14892176
> 
> 赞同：0
> 
> 时间：2013-02-15T10:00:29.837
> 
> 标签：sql-server-2008

我有多个记录，我想将它们组合成一个记录。多条记录具有范围。结果记录应该只包含范围。例如：在下面的示例中，我有 6 条记录，除了第 5 列显示为 c5 之外，所有记录都具有相似的数据。结果表有 7 列具有范围。请请求任何帮助来解决这个问题。非常感谢， 加根

```
 scenario:

    c1  c2  c3  c4  c5  c6  
    -----------------------
    AA  BB  CC  DD  1   FF

    AA  BB  CC  DD  2   FF

    AA  BB  CC  DD  3   FF

    AA  BB  CC  DD  4   FF

    AA  BB  CC  DD  5   FF

    AA  BB  CC  DD  6   FF

    result record:

    c1  c2  c3  c4  c5  c6  c7
    --------------------------
    AA  BB  CC  DD  1   6  FF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:04:57.557

使用 group by 和 min 和 max 怎么样？

选择 c1,c2,c3,c4,min(c5), max(c5), c6 from [table] group by c1,c2,c3,c4,c6

这对你不起作用吗？

# arrays - Matlab数组去除零值

> ID：14892177
> 
> 赞同：0
> 
> 时间：2013-02-15T10:00:30.673
> 
> 标签：arrays, matlab, matrix, zero

我是 MatLab 和一般编程的新手。我已经设置了以下问题：

4名选手参加比赛，每人以100分开始。

每个人随机扮演另一个玩家。

如果一名玩家获胜，他们将获得 1 分，而失败的玩家将失去 1 分。

当玩家得分为零时，他们将被淘汰。

当只剩下一名玩家时，游戏结束。

我假设我需要创建某种矩阵数组，其中包含 4 个玩家和他们的 4 个分数

A = [1 2 3 4; 100 100 100 100]

这是正确的吗？一旦达到零，我将如何删除玩家及其分数。

任何帮助都会得到很大的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:04:28.180

我认为您走在正确的轨道上，假设您将 A 定义为这样，您可以删除得分为非正数的玩家：

```
A = [1 2 3 4; 100 100 0 100]
idx = A(2,:)<0.01 %To prevent suffering from rounding errors
A = A(:,~idx) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T07:16:04.413

我自己在寻找这个答案时偶然发现了这个页面（我也是 Matlab 的新手）。但是，上面的答案似乎太复杂了；Matlab 的矩阵寻址和赋值运算符非常简单地解决了这个问题，我经过一番实验后发现：

> > A = [1 2 3 4; 100 0 100 100]

A = 1 2 3 4

100 0 100 100

> > A(:,A(2,:)==0)=[]

A = 1 3 4

100 100 100

我希望这对某人有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T12:53:36.950

第一个答案是绝对正确的。但是，为了解决这个问题，有一个为此目的而构建的简单语法，使用`sparse`您还可以直接提取具有 0 分的玩家：

```
A = [1 2 3 4; 100 100 0 100]
ans= sparse (A(2,:)) 
```

祝你好运 ;）

# c - 在新终端中执行子进程

> ID：14892182
> 
> 赞同：1
> 
> 时间：2013-02-15T10:01:03.373
> 
> 标签：c, sockets, unix, multiprocessing, unix-socket

我想为 unix 制作一个简单的聊天应用程序。我创建了一台支持多个客户端的服务器。每当有新客户端连接到服务器时，就会使用 fork 命令创建一个新进程。现在的问题是所有子进程在服务器上共享相同的标准输入，因此为了向第二个客户发送消息，第一个子进程必须终止。为了解决这个问题，我想在新终端中运行每个子进程。这可以通过在新文件中编写子进程代码的代码并像 xterm -e sh -c 一样执行它来实现。（虽然我没有尝试过）。

我真正想要的不是有两个文件只是为了启动一个新终端并运行其中的其余代码。

```
int say(int socket)
{
    char *s;
    fscanf(stdin,"%79s",s);
    int result=send(socket,s,strlen(s),0);
    return result;
}

int main()
{
    int listener_d;
    struct sockaddr_in name;
    listener_d=socket(PF_INET,SOCK_STREAM,0);
    name.sin_family=PF_INET;
    name.sin_port=(in_port_t)htons(30000);
    name.sin_addr.s_addr=htonl(INADDR_ANY);
    int c = bind(listener_d,(struct sockaddr *)&name,sizeof(name)); //Bind
    if(c== -1)
    {
        printf("\nCan't bind to socket\n");
    }

    if(listen(listener_d,10) == -1) // Listen
    {
        printf("\nCan't listen\n");
    }
    puts("\nWait for connection\n");
    while(1)
    {
        struct sockaddr_storage client_addr;
        unsigned int address_size = sizeof(client_addr);
        int connect_d = accept(listener_d, 
              (struct sockaddr*)&client_addr,&address_size); //Accept
        if(connect_d== -1)
        {
            printf("\nCan't open secondary socket\n");
        }

        if(!fork())
        {
            close(listener_d);
            char *msg = "welcome Sweetone\n";
            if(send(connect_d,msg,strlen(msg),0))
            {
                printf("send");
            }
            int k=0;
            while(k<5)
            {
                say(connect_d);
                ++k;
            }
            close(connect_d);
            exit(0);
        }
            close(connect_d);
    }
    close(listener_d);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:16:01.590

我认为您的客户端和服务器之间发送的消息有点不寻常。更常见的是，在这个简单的“只是测试它是如何工作的”场景中，让客户端向服务器发送消息。作为一个例子，我可以提到一个简单的回显服务，它将客户端发送的所有内容镜像回客户端。这种设计是出于某些要求吗？

撇开批评不谈，我有两个单独的更改可以使您当前的设计工作。它们都涉及更改子服务器中输入的*读取*。

备选方案 1：不从标准输入读取，而是创建一个命名管道（参见`man 3 mkfifo`），fex /tmp/childpipe"pid_of_subserver_here"。您可以在其中创建管道`say()`并将其打开以供阅读。然后使用 echo ( `man echo`) 写入管道 echo "My message" > /tmp/childpipe"NNNN"。在退出孩子之前，请记住用`unlink()`

备选方案 2：在服务器和每个子服务器之间创建一个未命名的管道。这使代码更加混乱，但避免了创建命名管道和使用 echo。下面包含示例代码。它没有足够的错误处理（像大多数示例代码一样）并且不能正确处理断开客户端的连接。

示例用法：1）启动服务器 ./a.out 2）（在外部窗口中连接客户端（例如 nc localhost 30000）3）通过键入“1Hello client one”写入客户端 1 4）（在第三个窗口中连接第二个客户端等） 4）通过键入“2Hello second client”写入第二个客户端

```
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <stdio.h>
#include <arpa/inet.h>
#include <string.h>
#include <unistd.h>

enum max_childeren{
    MAX_CHILDEREN = 50
};

int say(int socket)
{
    char buf[513] = {0};
    fgets(buf, sizeof(buf), stdin);
    int result=send(socket, buf, strlen(buf),0);
    return result;
}

int main()
{
    int listener_d;
    struct sockaddr_in name;
    listener_d=socket(PF_INET,SOCK_STREAM,0);
    name.sin_family=PF_INET;
    name.sin_port=(in_port_t)htons(30000);
    name.sin_addr.s_addr=htonl(INADDR_ANY);

    int on = 1;
    if (setsockopt(listener_d, SOL_SOCKET, SO_REUSEADDR, &on, sizeof(on)) < 0){
        perror("setsockopt()");
    }

    int c = bind(listener_d,(struct sockaddr *)&name,sizeof(name)); //Bind

    if(c== -1)
    {
        printf("\nCan't bind to socket\n");
    }

    if(listen(listener_d,10) == -1) // Listen
    {
        printf("\nCan't listen\n");
    }

    // Edited here
    int number_of_childeren = 0;
    int pipes[2] = {0};
    int child_pipe_write_ends[MAX_CHILDEREN] = {0};

    fd_set select_fds;
    FD_ZERO(&select_fds);

    puts("\nWait for connection\n");
    while(1)
    {
        struct sockaddr_storage client_addr;
        unsigned int address_size = sizeof(client_addr);

        // Edited here, to multiplex IO
        FD_SET(listener_d, &select_fds);
        FD_SET(STDIN_FILENO, &select_fds);
        int maxfd = listener_d + 1;

        int create_new_child = 0;
        int connect_d = -1; // moved here

        select(maxfd, &select_fds, NULL, NULL, NULL);

        if (FD_ISSET(listener_d, &select_fds)){
            connect_d = accept(listener_d, 
                                   (struct sockaddr*)&client_addr,&address_size); //Accept
            if(connect_d== -1)
                {
                    printf("\nCan't open secondary socket\n");
                    exit(EXIT_FAILURE);
                }

            create_new_child = 1;
        }

        char buf[512] ={0};
        char *endptr = NULL;
        if (FD_ISSET(STDIN_FILENO, &select_fds)){
            fgets(buf, sizeof(buf), stdin);
             long int child_num = strtol(buf, &endptr, 10);

             if (child_num > 0 && child_num <= number_of_childeren) {
                 write(child_pipe_write_ends[child_num - 1], endptr, strnlen(buf, sizeof(buf)) - (endptr - buf));
             }
             else {
                 printf("Skipping invalid input: %s\n", buf);
             }
        }

        if (create_new_child != 1)
            continue;

        number_of_childeren++; // Edited here

        int error = pipe(pipes);
        if (error != 0){
            //handle errors
            perror("pipe():");
            exit(EXIT_FAILURE);
        }

        child_pipe_write_ends[number_of_childeren - 1] = pipes[1];

        if(!fork())
        {

            error = dup2(pipes[0], STDIN_FILENO);
            if (error < 0){ // could also test != STDIN_FILENO but thats confusing
                //handle errors
                perror("dup2");
                exit(EXIT_FAILURE);
            }
            close(pipes[0]);

            close(listener_d);
            char *msg = "welcome Sweetone\n";
            if(send(connect_d,msg,strlen(msg),0))
            {
                printf("send\n");
            }
            int k=0;
            while(k<5)
            {
                say(connect_d);
                ++k;
            }
            close(connect_d);
            exit(0);
        }
            close(connect_d);
            close(pipes[0]);
    }
    close(listener_d);
    return 0;
} 
```

代码需要重构为函数。它太长了。我试图做尽可能少的改变，所以我把重组留作练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:47:22.863

```
 fscanf(stdin,"%79s",s); 
```

为什么？是tcp聊天吗？每个客户端都有一些套接字，如果你想“说”一些东西，那么你必须使用客户端。这是真正的逻辑。

服务器通常只发送服务消息。这也是真正的逻辑。

但是如果你想要新的终端，那么你可以尝试使用 unistd.h 中的 exec 家族。

# performance - 在选择中使用可为空属性时的 LINQ 性能

> ID：14892185
> 
> 赞同：0
> 
> 时间：2013-02-15T10:01:13.073
> 
> 标签：performance, linq, linq-to-entities

我有一个 IEnumerable 集合。使用 LINQ，我从 Web 服务响应中填充集合。下面是我正在使用的示例。

```
lookupData = from data in content["data"].Children()
             select new LookupData
             {
                 LookupKey = (data["data"]["key"]).ToString(),
                 LookupValue = (string)data["data"]["name"]
             }; 
```

我将对许多类似的响应使用相同的代码，这些响应将返回一个键和值。

现在，当我需要服务响应中的一个附加字段来处理少数响应（不是全部）时，我得到了一个场景。所以，我在“LookUpData”类中创建了一个“Optional”属性，如下所示：

```
lookupData = from data in content["data"].Children()
             select new LookupData
             {
                 LookupKey = (data["data"]["key"]).ToString(),
                 LookupValue = (string)data["data"]["name"],
                 Optional = referenceConfig.Optional != null 
                            ? (data["data"]["optional"]).ToString()
                            : String.Empty
             }; 
```

这里的空检查是一个性能问题。我不想使用下面的，因为我还有其他条件，如果其他条件加在一起，它将变成一个非常大的 if else 循环。

```
if(referenceConfig.Optional != null){

       lookupData = from data in content["data"].Children()
                     select new LookupData
                     {
                         LookupKey = (data["data"]["key"]).ToString(),
                         LookupValue = (string)data["data"]["name"],
                         Optional = (data["data"]["optional"]).ToString()
                     };
}
else{
       lookupData = from data in content["data"].Children()
                     select new LookupData
                     {
                         LookupKey = (data["data"]["key"]).ToString(),
                         LookupValue = (string)data["data"]["name"]
                     };
} 
```

但是我至少有 10 个 Web 服务器响应，每个响应中有很多数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:01:22.810

如果 的值`referenceConfig.Optional`在编译时可用，您可以这样做

```
 #if OPTIONAL

    ...

    #else

    ... 
```

如果不是 - 您可以实现[空对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)，即让您的所有`["data"][...]`属性始终返回一个值（例如，如果类型为字符串，则为 string.Empty），这样您就不会在代码中显式检查。

# sql-server - 查找出现在 SQL Server 中所有部门的所有用户？

> ID：14892187
> 
> 赞同：3
> 
> 时间：2013-02-15T10:01:16.987
> 
> 标签：sql-server, sql-server-2008

我有表`Users`

我也有表`Departments`

我在`Users`和之间有一个地图表`Departments`。

我想找到**所有**部门中出现的所有用户**名**和**ID 。**

 **例如，如果有 5 个部门，而 Paul 仅在部门 #1 中，那么 Paul 将不会出现在输出列表中。

只有当他被列在所有部门中时，他才会 (1..5)

我开始使用临时表做一些很长（很长）的事情，我认为有更好的方法。

我还创建了一个[**Sql Fiddle**](http://sqlfiddle.com/#!3/5a960/3)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:22:15.387

试试这个

```
SELECT u.userId, u.UserName 
FROM MapUserstoDepartments m INNER JOIN
     Users u ON u.userId = m.userId
GROUP BY u.userId, u.UserName 
HAVING COUNT(m.depId) = (SELECT COUNT(*) FROM Departments) 
```

那会产生

```
| USERID | USERNAME |
---------------------
|    100 |     John | 
```

和[sqlfiddle](http://sqlfiddle.com/#!3/5a960/68)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:26:54.913

有不止一种方法可以做到这一点。

您可以要求用户所在的部门数等于部门总数：

```
SELECT
    * 
FROM
    Users
    INNER JOIN 
    (
        SELECT userId, COUNT(*) c FROM MapUserstoDepartments
        GROUP BY userId
        HAVING COUNT(*) = (SELECT COUNT(*) FROM Departments)
    ) UsersInAllDepartments
    ON Users.userId = UsersInAllDepartments.userId 
```

您可以要求从所有部门列表中删除用户的部门：

```
SELECT * 
FROM Users
WHERE NOT EXISTS 
  (
    SELECT depId FROM Departments
    EXCEPT
    SELECT depId FROM MapUserstoDepartments WHERE userId = Users.userId
  ) 
```

我确定还有其他人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T10:27:27.127

你可以这样做：

```
select  u.* 
from    Users u
where not exists
(
    select  1 
    from    Departments d 
    where   not exists
    ( 
      select  1 
      from    MapUserstoDepartments m 
      where   d.depId = m.depId
      and     m.userId = u.userId
     )
) 
```

**[SQL小提琴](http://sqlfiddle.com/#!3/5a960/88/0)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T10:19:16.003

这是你想要的吗？

```
Select Tbl.userID , Tbl.username from (Select u.userid , u.username ,  
count(u.userid)  as Count from MapUsersToDepartments m
inner join Users u on m.UserID = u.userID
group by u.userid , u.username)Tbl
where Tbl.Count = (Select count(*) from Departments) 
```

这是小提琴

[http://sqlfiddle.com/#!3/5a960/53](http://sqlfiddle.com/#!3/5a960/53)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T10:26:37.957

```
select
  Users.userId,
  count(Departments.depId),
  count(MapUserstoDepartments.userId)

from
  Users
  left join MapUserstoDepartments on MapUserstoDepartments.userId = Users.userId
  left join Departments on Departments.depId = MapUserstoDepartments.depId

group by 
  Users.userId

having
  (SELECT COUNT(*) from Departments) = count(MapUserstoDepartments.userId) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T10:40:50.847

试试下面的查询。让我知道这是否有帮助

```
 select * from users where userid in
       (select userid from MapUserstoDepartments
       group by userid
        having count(userid) = 5) 
```**

# ruby-on-rails - 将已编译的引导程序加载到没有任何 gem 的 rails

> ID：14892189
> 
> 赞同：1
> 
> 时间：2013-02-15T10:01:20.837
> 
> 标签：ruby-on-rails, twitter-bootstrap

在没有任何 gem 的情况下将 twitter-bootstrap 导入到 rails 的最干净的方法是什么？到目前为止，我一直在手动将 css/js 文件复制到`vendor/assets/javascripts`,`vendor/assets/stylesheets`

有没有办法在不将文件移动到单独的文件夹中的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:47:46.247

你可以在`vendor/assets/twitter-bootstrap`.

然后在`app/assets/javascripts/application.js`：

```
//=require_tree ../../../vendor/assets/twitter-bootstrap 
```

在你的`app/assets/stylesheets/application.css`：

```
*= require ../../../vendor/assets/twitter-bootstrap 
```

对于像图像这样的非 JS 或 CSS 资产进入非标准目录，在任`config/application.rb`一或特定于环境的配置中，您将使用：

```
# can add more than one path string or regexp(s)
config.assets.precompile += ['../../../vendor/assets/twitter-bootstrap/*.png'] 
```

推荐的方法是为您的资产使用维护良好的 gem，或者继续将供应商 JS 和 CSS 资产分别放在`vendor/assets/javascripts`和`vendor/assets/stylesheets`中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:18:08.757

我将引导程序复制到`lib/bootstrap`

我`make bootstrap`用来编译它，然后运行 ​​rake 任务将编译后的文件复制到`vendor/assets`

```
require 'fileutils'

task :bootme do
  compiled_bootstrap = 'lib/bootstrap/bootstrap'
  FileUtils.cp_r(compiled_bootstrap + '/css/.', 'vendor/assets/stylesheets/')
  FileUtils.cp_r(compiled_bootstrap + '/img/.', 'vendor/assets/images/')
  FileUtils.cp_r(compiled_bootstrap + '/js/.', 'vendor/assets/javascripts/')
end 
```

# git - 仅从远程仓库中删除文件

> ID：14892192
> 
> 赞同：2
> 
> 时间：2013-02-15T10:01:31.603
> 
> 标签：git, github

我在我的分支上做了一件坏事，现在它有点乱了。

我正在开发一个magento扩展，我不小心提交了一些核心文件，以及一些类似于`.idea`github的文件夹。

我现在要做的是从 git 中删除这些文件，并将它们保存在我的本地分支中。我尝试了以下（但没有奏效）：

```
git rm -rf --cache .idea
git add -A
git commit -m "remove unnecessary files"
git push origin blog 
```

但它没有任何效果。

PS：与此同时，我做了很多有用的提交，所以恢复会是......不愉快:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:03:20.367

删除文件似乎已经在这里得到了回答：[从 Git 存储库和远程 GitHub 上完全删除文件](https://stackoverflow.com/questions/5563564/remove-files-from-git-repo-completely)

为了防止这些文件再次上传，同时保持它们在本地，将不同的分支推送到不包含您的秘密文件的 git。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T11:03:04.243

您的`git add -A`命令添加了您取消暂存的所有文件。如果您总是在提交之前检查差异，您会注意到这一点。

# c# - 如何绑定按钮的正常和按下的背景图像？

> ID：14892194
> 
> 赞同：0
> 
> 时间：2013-02-15T10:01:34.647
> 
> 标签：c#, xaml, button, binding, windows-phone-8

我已经设法根据这里的代码将按钮样式保存到我的 AppSetting 类中[无法使用 Image 和 Name 正确填充 ListPicker 控件](https://stackoverflow.com/questions/11480315/cannot-correctly-populate-listpicker-control-with-image-and-name)

然后我想绑定按钮的正常和按下的背景图像（我有几个按钮样式，用户可以在设置页面中选择）。

```
 <Style x:Key="ButtonStyle" TargetType="Button">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Disabled"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Normal">
                                    <Storyboard>

                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="NormalBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="PressedBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>

                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="NormalBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="PressedBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="ButtonBackground" BorderBrush="{x:Null}">

                            <Grid>
                                <Image x:Name="NormalBackground" Source="{Binding ButtonUpSetting, Source={StaticResource AppSettings}}" Stretch="Uniform"/>
                                <Image x:Name="PressedBackground" Source="{Binding ButtonDownSetting, Source={StaticResource AppSettings}}" Stretch="Uniform"/>

                                <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Padding="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            </Grid>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

特别是我想将以下项目绑定到它们各自的 uri 源，但不能执行“实时”绑定。

```
 <Image x:Name="NormalBackground" Source="{Binding ButtonUpSetting, Source={StaticResource AppSettings}}" Stretch="Uniform"/>
 <Image x:Name="PressedBackground" Source="{Binding ButtonDownSetting, Source={StaticResource AppSettings}}" Stretch="Uniform"/> 
```

我也在`INotifyPropertyChanged`我的 AppSetting 类中实现了，但是当我返回按钮页面时，按钮样式没有更新。

更新：

该按钮仅在我关闭并重新打开应用程序时更新。因此它可以从设置中读取值。但是在我更改设置后它不会立即更新。

页面结构如下：

ButtonPage <> SettingPage <> AppSetting 类

那么，在 SettingPage 中更改它们后，如何确保 ButtonPage “重新读取”​​ AppSetting 类中的设置？我不确定是否`INotifyPropertyChanged`会通知 ButtonPage，因为它在我对 SettingPage 进行更改时位于后台堆栈中。

在 ButtonPage OnNavigatedTo 事件中设置 DataContext = AppSetting 并没有什么不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T05:30:20.277

我已经想通了。

仅在代码中定义 Datacontext 而不是在 XAML 中，所以

```
<Image x:Name="NormalBackground" Source="{Binding ButtonUpSetting}" Stretch="Uniform"/>
<Image x:Name="PressedBackground" Source="{Binding ButtonDownSetting}" Stretch="Uniform"/> 
```

然后

```
protected override void OnNavigatedTo(NavigationEventArgs e)
        {
        base.OnNavigatedTo(e);

        //Rebind all bindings to update button background images
        if (e.NavigationMode == NavigationMode.Back)
        {
            this.DataContext = null;
            this.DataContext = settings;
        }
        .... 
```

# sql-server - 将数据从 MS-SQL-Server 2005 提取到 MS-Project-CLIENT 2010 的最佳方式？

> ID：14892195
> 
> 赞同：0
> 
> 时间：2013-02-15T10:01:35.187
> 
> 标签：sql-server, vb.net, vba, ms-project

假设我有一个自定义 CRM 软件，将数据写入 MS-SQL-SERVER 2005，并且我正在尝试将数据从 MS-SQL-SERVER 提取到 MS-Project-client 2010。我做了一些阅读并有以下问题：

1.  将数据从 sql-server 提取到 Ms-Project-CLIENT 2010 的“最佳”方法是什么？我可以在没有 Ms-Project-SERVER 的情况下“直接”执行此操作吗？
2.  将它从 ms-project-client 2010 推回 SQL-server 怎么样？我在 ms-project 中使用 xml 结构在某处读过，不推荐...
3.  我必须使用 VBA（在 Ms Project 客户端 2010 中）还是 VB 2010？（我只有那些选项：VB/VBA）

对不起，如果它看起来像业余爱好者，但我真的需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:43:35.743

假设您的应用程序写入它自己的数据库并且它不写入 MS Project Server 数据库。

如果假设是正确的，那么您绝对不应该关心 MS Project Server。您实际上有两种选择如何写入数据库，您的选择取决于以下事项：您是否要将数据库的登录名和密码分发给所有用户。

您可以使用 OLE DB 或 ADO 从 MS Project 的 .NET Add-On 或 VBA 宏“直接”写入数据库。或者您可以创建中间服务器并将数据发送到服务器，该服务器将与数据库交互。

但是，如果您的应用程序写入 MS Project Server 数据库并且服务器的版本是 2007+ - 我强烈建议您通过 Project Server Interface (PSI) 或通过 MS Project Automation 执行此操作。当 MS Project 写入数据库时​​，它会发挥很大的作用，最好让它完成它的工作，否则你很有可能以某种方式破坏数据库，恢复将是痛苦的和/或昂贵的。

# android - asyncTask 的后退按钮

> ID：14892198
> 
> 赞同：0
> 
> 时间：2013-02-15T10:01:45.497
> 
> 标签：android, android-asynctask

能够成功地从服务器获取数据。如果数据成功，则导航到 NextScreen。1\. 如果我在数据出现之前按下后退按钮，那么 Asyntask 必须消失，它不应该导航到 NextScreen。它必须只停留在 Screenone。

但是如果我按下后退按钮 dailog 在几秒钟后消失，它会导航到 NextScreen.so 如何阻止它。

```
public class Screenone extends Activity {
    EditText user,pass;
    Button login;           
    InputStream is;
    String productResponse;
    EditText edit;   
    int responseCode;               

   @Override
   protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);  
    setContentView(R.layout.mainlog);       

    user = (EditText) findViewById(R.id.user);
    pass =  (EditText) findViewById(R.id.password);     
    login = (Button) findViewById(R.id.login);

   }    

    login.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub      

            if ((user.getText().length() > 0)
                    && (pass.getText().length() > 0) ) {                
                new Load().execute(Status);
            }
                    }
    });

   }

   private class Load extends AsyncTask<String, String, String> {

    private ProgressDialog Dialog = new ProgressDialog(LoginScreen.this);
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        Dialog.setMessage("Please wait...");
        Dialog.show();
    }

    protected String doInBackground(String... status) { 
                try {
            HttpClient httpclient = new DefaultHttpClient();                     

     HttpPost post = new HttpPost("---url---");                     
            responseCode =httpResponse.getStatusLine().getStatusCode();

        }           

        catch (Exception e) {           
                            }                     
        return null;
    }

    protected void onPostExecute(String Result) {
        // TODO Auto-generated method stub
        super.onPostExecute(Result);      

            if (responseCode==200) {            
            Dialog.dismiss();           

            Intent intent =new Intent(Screenone.this, NextScreen.class);
            startActivity(intent);                          
                        }           

                            }               
            }

  public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();

     LoginScreen.Load xx = new LoginScreen().new Load();

     if(new Load()!=null){
         if(!(new Load().getStatus() == AsyncTask.Status.FINISHED)){

            httpclient.getConnectionManager().shutdown();

             if (xx.Dialog!=null&&xx.Dialog.isShowing()) {
                  xx.Dialog.dismiss();
              }

             if(new Load().getStatus() == AsyncTask.Status.RUNNING){
                 new Load().cancel(true);
              }
          }

     }
   }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:13:26.473

在 AsyncTask 取消后，您需要在 Back Button Click 上启动下一个 Activity：

```
 if(new Load().getStatus() == AsyncTask.Status.RUNNING){
      new Load().cancel(true);

      // start  Next Activity here...
      Intent intent =new Intent(Screenone.this, NextScreen.class);
      startActivity(intent); 

   } 
```

# ruby-on-rails - Heroku 无法通过我的应用程序运行 rake db 迁移

> ID：14892200
> 
> 赞同：12
> 
> 时间：2013-02-15T10:01:50.807
> 
> 标签：ruby-on-rails, heroku

这是我第一次遇到这样的错误：

```
Running `rake db:migrate` attached to terminal... up, run.8524
 !    Heroku client internal error.
 !    Search for help at: https://help.heroku.com
 !    Or report a bug at: https://github.com/heroku/heroku/issues/new

    Error:       Operation timed out - connect(2) (Errno::ETIMEDOUT)
    Backtrace:   /usr/local/heroku/lib/heroku/client/rendezvous.rb:39:in `initialize'
                 /usr/local/heroku/lib/heroku/client/rendezvous.rb:39:in `open'
                 /usr/local/heroku/lib/heroku/client/rendezvous.rb:39:in `block in start'
                 /usr/local/heroku/ruby/lib/ruby/1.9.1/timeout.rb:68:in `timeout'
                 /usr/local/heroku/lib/heroku/client/rendezvous.rb:31:in `start'
                 /usr/local/heroku/lib/heroku/command/run.rb:113:in `rendezvous_session'
                 /usr/local/heroku/lib/heroku/command/run.rb:100:in `run_attached'
                 /usr/local/heroku/lib/heroku/command/run.rb:21:in `index'
                 /usr/local/heroku/lib/heroku/command.rb:206:in `run'
                 /usr/local/heroku/lib/heroku/cli.rb:28:in `start'
                 /usr/local/heroku/bin/heroku:24:in `<main>'

    Command:     heroku run rake db:migrate --app oppcis
    Version:     heroku-toolbelt/2.35.0 (x86_64-darwin10.8.0) ruby/1.9.3 
```

我已经有一段时间没有使用heroku了......在大回归之后，我遇到了这个错误。

就目前的 Heroku 新闻而言，我已经过时了。

我希望有人可以给我一个建议，解决方案或涉及的问题。

谢谢。

编辑：

日志说...

```
2013-02-15T08:38:00+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by ssalamat.peg@gmail.com
2013-02-15T08:38:03+00:00 heroku[run.6510]: Awaiting client
2013-02-15T08:38:03+00:00 heroku[run.6510]: Starting process with command `bundle exec rake db:migrate`
2013-02-15T08:38:04+00:00 heroku[run.6510]: State changed from starting to up
2013-02-15T08:38:33+00:00 heroku[run.6510]: Error R13 (Attach error) -> Failed to attach to process
2013-02-15T08:38:34+00:00 heroku[run.6510]: Process exited with status 128
2013-02-15T08:38:34+00:00 heroku[run.6510]: State changed from up to complete 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-15T10:21:16.777

尝试在“后台”运行它

```
 heroku run:detached rake db:migrate 
```

您也可以尝试[heroku 故障排除](https://devcenter.heroku.com/articles/one-off-dynos#troubleshooting)，因为它似乎是连接问题。

```
heroku run rails console
telnet rendezvous.runtime.heroku.com 5000 
```

如果它不起作用，您可能有防火墙阻止了您与 heroku 的连接。

# objective-c - 将 NSTextView 子视图添加到 NSTabViewItem

> ID：14892218
> 
> 赞同：1
> 
> 时间：2013-02-15T10:02:43.377
> 
> 标签：objective-c, cocoa, resize, nsview

好的，我承认我从来没有那么擅长以编程方式操作`NSView`和调整大小。所以，我在这里：

*   我们有一个**标签视图**
*   我们正在添加一个新的`NSTabViewItem`
*   每个都`NSTabViewItem`将包含一个`NSTextView`，它延伸并占据了`NSTabViewItem`.

**这是我的代码：**

```
NSTabViewItem *newItem = [[(NSTabViewItem*)[NSTabViewItem alloc] initWithIdentifier:newDocument] autorelease];

NSTextView* tv = [[NSTextView alloc] initWithFrame:NSZeroRect];
[tv makeStretchable];

[[newItem view] setAutoresizesSubviews:YES];
[[newItem view] addSubview:tv];
[newItem setLabel:@"Untitled"];
[tabView addTabViewItem:newItem]; 
[tabView selectTabViewItem:newItem]; 
```

**我的`NSView`类别（对于`makeStretchable`）：**

```
#define FIX_LEFT    NSViewMinXMargin
#define FIX_RIGHT   NSViewMaxXMargin
#define FIX_TOP     NSViewMinYMargin
#define FIX_BOTTOM  NSViewMaxYMargin
#define FIX_WIDTH   NSViewWidthSizable
#define FIX_HEIGHT  NSViewHeightSizable

- (void)makeStretchable
{
    [self setAutoresizingMask:FIX_LEFT|FIX_TOP|FIX_BOTTOM|
                              FIX_RIGHT|FIX_WIDTH|FIX_HEIGHT];
} 
```

**问题 ：**

*   `NSTextView`最小（仅像一条线）并且位于每条线的最中心`NSTabViewItem`

* * *

我确定这与我的调整大小蒙版有关（或者可能是我添加视图的方式？），但我仍然无法弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:19:45.067

您所有的 FIX_* 都应该是 FLEX_*，包括 FIX_LEFT、FIX_RIGHT 等。

现在将您的 makeStretchable 更改为：

```
[self setAutoresizingMask:FLEX_WIDTH|FLEX_HEIGHT]; 
```

那应该这样做。:)

一点历史：
在旧的 Interface Builder（直到并包括 2.x）中，弹簧代表“设置”位。在新的 Interface Builder（从 3 起）中，弹簧被替换为“夹具”，这更有意义，但这也意味着当您以编程方式更改标志时，您需要做一些相反的思考。

因此，标志的含义（来自 Apple 的文档）是：

NSViewMinXMargin：“接收者与其父视图之间的左边距是灵活的。”
NSViewWidthSizable: "接收者的宽度是灵活的。"
NSViewMaxXMargin：“接收者与其父视图之间的右边距是灵活的。”
...等等; 例如。所有设置位都是“灵活的”，否则它们是“固定的”......

# mysql - 如何使用 LOAD_FILE 将文件中的值插入表中？

> ID：14892219
> 
> 赞同：1
> 
> 时间：2013-02-15T10:02:44.483
> 
> 标签：mysql, mysql-loadfile

我尝试使用以下代码将文本文件插入到我的数据库中：

```
INSERT INTO test.table (url_address, html)
VALUES ('abc', LOAD_FILE('C:\Documents and Settings\eran\Desktop\1.txt')); 
```

但是，我在 html 列中得到 null 。如何从文本文件中获取数据到我的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:12:00.063

MySQL LOAD_FILE() 读取文件并将文件内容作为字符串返回。

要使用此功能，文件必须位于主机服务器上，用户必须指定文件的完整路径名，并且用户必须具有 FILE 权限。该文件必须是可读的，并且大小必须小于 max_allowed_pa​​cket（在 my.ini 文件中设置）字节。如果文件不存在或无法读取，则返回 NULL。

尝试使用双反斜杠“\”作为路径。我不知道它是否会起作用。

[http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_load-file](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_load-file) [http://www.w3resource.com/mysql/string-functions/mysql-load_file-function.php](http://www.w3resource.com/mysql/string-functions/mysql-load_file-function.php)

# webdriver - 如何使用网格在同一浏览器中并行运行不同的tescase？

> ID：14892220
> 
> 赞同：0
> 
> 时间：2013-02-15T10:02:43.797
> 
> 标签：webdriver, testng, selenium-grid

考虑以下示例代码：

```
public class testcases()
{
 @Before method
 public void setup()
 {
  -----------
  some code
  -----------
 }

  @Test
  public void test1()
  {
   ---------- some code-----
  }

  @Test
  public void test2()
  {
   ---------- some code-----
  }

 @After method
 public void setup()
 {
  -----------
  some code
  -----------
 }
 } 
```

现在我将创建一个集线器并启动 2 个 Firefox 节点。我希望 test1() 方法在一个 firefox 节点中运行，而 test2() 方法在另一个 firefox 节点中运行。请让我知道如何使用 testng.xml 文件进行配置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:47:20.523

基本上你想并行运行你的测试用例。在套件声明中的 testng xml 中，您需要添加 parallel="methods"。并行值的选项包括类、测试、实例、假。

```
<suite thread-count="10" verbose="1" parallel="methods" ......> 
```

确保您的线程计数值设置得当，即应该产生多少线程。网格将负责并行测试的分布。您需要注意的是确保您的驱动程序对象对于每个线程都是不同的，以便命令转到正确的驱动程序对象。

# ruby - 了解 Rails 3 Mini MagicK 验证失败？

> ID：14892222
> 
> 赞同：2
> 
> 时间：2013-02-15T10:02:52.067
> 
> 标签：ruby, ruby-on-rails-3, rubygems

**ProfilesController#upload_image 中的 ActiveRecord::RecordInvalid**

```
Validation failed: Avatar Failed to manipulate with MiniMagick, maybe it is not an image? Original Error: Command ("gm identify -ping -quiet
-format "%w %hn" "/tmp/mini_magick20130215-9791-f87uvk.jpg"") failed: {:status_code=>1, :output=>"gm identify: Unrecognized option (-quiet).\n"} 
```

将在上传图片时显示

即使存在图像和所有目录都可用，但我不知道为什么会发生这种情况？

任何人都解释了如何清除此验证失败错误。

我的宝石版本

```
mini_magick 3.4 
```

提前致谢。

# javascript - 在客户端操作 JSON 数据

> ID：14892223
> 
> 赞同：-1
> 
> 时间：2013-02-15T10:02:57.540
> 
> 标签：javascript, jquery, json, datatable

需要一些关于在客户端操作 JSON 数据的建议。

关于如何在 JS/jQuery 中将 TYPE1 转换为 TYPE2 的任何提示？

**转换这个（TYPE1）：**

```
{
    "0": {
        "Field1": "Val1",
        "Field2": "Val2",
        "Field3": "Val3"
    }, 
    "1": {
        "Field1": "Val1",
        "Field2": "Val2",
        "Field3": "Val3"
    }
} 
```

**进入这个（TYPE2）：**

```
{
    "SomeName": [
        [
            "Val1",
            "Val3",
            "Val3"],
        [
            "Val4",
            "Val5",
            "Val6"]
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:28:34.920

尝试这个：

```
var oldObj = {
    "0": {
        "Field1": "Val1",
        "Field2": "Val2",
        "Field3": "Val3"
    }, 
    "1": {
        "Field1": "Val1",
        "Field2": "Val2",
        "Field3": "Val3"
    }
}

var newObj = {"SomeName":[]};           // Initialize a new Object

for(var key in oldObj){                 // Loop through the old item,
    var item = [];                      // Create a temporary variable for each sub-item.
    for(var subKey in oldObj[key]){     // Loop through the sub-item
        item.push(oldObj[key][subKey]); // Push the sub-item's data to the temp var.
    }
    newObj.SomeName.push(item);         // Push the temp var to the new Object.
} 
```

# jquery - jquery 在 ie (any) 中不工作，但在所有其他浏览器中工作

> ID：14892227
> 
> 赞同：0
> 
> 时间：2013-02-15T10:03:03.517
> 
> 标签：jquery, internet-explorer, cross-browser

嗨，我有一些代码可以与 Jquery 一起使用，并且可以在除 ie 之外的所有浏览器中完美运行（而且它似乎不适用于任何 ie 浏览器 -7、8、9）。Jquery代码如下..任何人都可以看到问题：

```
$(document).ready(function () {
            var obj = $('object')
     .wrap('<div id="test"></div>')
     .find('embed').attr('src', function (i, s) { return s + '&enablejsapi=1&version=3' }).end()
     .find('param[name=movie]').attr('value', function (i, v) { return v + '&enablejsapi=1&version=3' }).end()
     .detach()
     .appendTo($('#test'));

            $(document).ready(function () {
                $("#emsbinstartbutton").click(function () {
                    //Then assign the src to null, this then stops the video been playing
                    obj.find('embed')[0].pauseVideo();
                    $("body").append($("<div>").css({
                        position: "fixed"
        , width: "640px"
        , height: "425px"
        , "background-color": "#000"
        , opacity: 0.6
        , "z-index": 999
        , top: 0
        , left: 0
                    }).attr("id", "page-cover"));

                    $("#threebytwo").show();
                });
            }); 
```

当用户单击立即购买按钮时，此代码会弹出一个小部件：

```
 $("#threebytwo").show(); 
```

这是整个代码的 jsfiddle，您可以在 Firfox chrome 和 safari 中看到 wokring，但在 ie 中不起作用。

[http://jsfiddle.net/M46rZ/5/](http://jsfiddle.net/M46rZ/5/)

我查了一下，看到了一个技巧，你将元数据标签设置为 8，但我已经尝试过了，但它没有奏效。

我想我需要阅读更多关于跨浏览器问题的内容，因为我不断遇到它们，但不胜感激！

**编辑** 很抱歉澄清实际问题是什么 - 当您单击立即购买按钮时，应该会弹出一个

**编辑 2**

正如其中一条评论所指出的，正是这一行停止了代码的工作，即：

```
obj.find('embed')[0].pauseVideo(); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:28:34.407

在您的小提琴中，视频参数中有一个尾随空格：

```
<param name="movie" value="http://www.youtube.com/v/fBZTbCrM2eQ&amp;hl=en_US&amp;fs=1&wmode=opaque "> 
```

在你的 js 操作之后变成：

```
<param name="movie" value="http://www.youtube.com/v/fBZTbCrM2eQ&hl=en_US&fs=1&wmode=opaque &enablejsapi=1&version=3"> 
```

我不确定这是否足以破坏使用`<object>`而不是的浏览器`<embed>`，但它可能值得尝试删除。

我尝试删除您小提琴中的空格，但出于某种奇怪的原因，编辑拒绝生效。

# java - 图形无法正确清除

> ID：14892228
> 
> 赞同：0
> 
> 时间：2013-02-15T10:03:18.217
> 
> 标签：java, swing, graphics, jpanel

我遇到了问题，我想要绘制一个正方形（苍蝇）并重新绘制以显示运动。在此代码中，当按下按钮时，苍蝇会“移动”，但旧方块不会删除。我已经尝试过 enviromentPanel.repaint() updateui() 和 removeall() ，但我无法让它工作，如果我使用它们中的任何一个，那么任何形状都不会出现并且我得到一个空白屏幕。

```
import java.util.Random;

public class Fly implements Runnable{
private int xPosition;
private int yPosition;
private boolean eaten;

public Fly(){
    Random randomGenerator = new Random();
    xPosition = randomGenerator.nextInt(690) + 10;
    yPosition = randomGenerator.nextInt(690) + 10;
    eaten = false;
}

public int getxPosition() {
    return xPosition;
}

public void setxPosition(int xPosition) {
    this.xPosition = xPosition;
}

public int getyPosition() {
    return yPosition;
}

public void setyPosition(int yPosition) {
    this.yPosition = yPosition;
}

public boolean isEaten() {
    return eaten;
}

public void setEaten(boolean eaten) {
    this.eaten = eaten;
}

public void move(){
      Random randomGenerator = new Random();

        int xChange = -10 + randomGenerator.nextInt(20);
        int yChange = -10 + randomGenerator.nextInt(20);
        xPosition = xPosition + xChange;
        yPosition = yPosition + yChange;
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        move();

}

@Override
public String toString() {
    return "Fly [xPosition=" + xPosition + ", yPosition=" + yPosition
            + ", eaten=" + eaten + "]";
}

@Override
public void run() {
    move();
}

}

import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Panel;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import javax.swing.*;
import java.awt.*;
import javax.imageio.ImageIO;

public class Enviroment2 implements Runnable,ActionListener{ 
private JFrame frame;
private JPanel enviromentPanel,totalGUI,enviromentButtonPanel;
private JButton newFrogButton, resetButton, hungryButton;
private JTextField enterName;
private JLabel hungryLabel;
private ArrayList<Frog> frogs;
private ArrayList<Fly> flys;

public Enviroment2(){
totalGUI = new JPanel();
flys = new ArrayList<Fly>();
frogs = new ArrayList<Frog>();
enviromentPanel = new JPanel();
enviromentButtonPanel = new JPanel();
newFrogButton = new JButton("New Frog");
enterName = new JTextField("Enter name");

hungryButton = new JButton("Hungry!");

resetButton = new JButton("Reset");
frame = new JFrame("[=] Hungry Cyber Pet [=]");
JFrame.setDefaultLookAndFeelDecorated(true);

frame.setContentPane(runEnviroment());

frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setSize(740, 800);
frame.setVisible(true);

}

public JPanel runEnviroment(){

totalGUI.setLayout(null);

enviromentPanel.setLayout(null);
enviromentPanel.setLocation(10, 10);
enviromentPanel.setSize(700, 700);
enviromentPanel.setBackground(Color.WHITE);
totalGUI.add(enviromentPanel);

FlowLayout experimentLayout = new FlowLayout();
enviromentButtonPanel.setLayout(experimentLayout);
enviromentButtonPanel.setLocation(10, 710);
enviromentButtonPanel.setSize(700, 50);
totalGUI.add(enviromentButtonPanel);

newFrogButton.setLocation(0, 0);
newFrogButton.setSize(120, 30);
newFrogButton.addActionListener(this);
enviromentButtonPanel.add(newFrogButton);

enterName.setLocation(140,0);
enterName.setSize(120,30);
enviromentButtonPanel.add(enterName);

hungryButton.setLocation(280, 0);
hungryButton.setSize(120, 30);
hungryButton.addActionListener(this);
enviromentButtonPanel.add(hungryButton);

resetButton.setLocation(420, 0);
resetButton.setSize(120, 30);
resetButton.addActionListener(this);
enviromentButtonPanel.add(resetButton);

totalGUI.setOpaque(true);

return totalGUI;
}

public void draw(){     

Graphics paper = enviromentPanel.getGraphics();

for (int i = 0; i <= flys.size()-1; i++){
    System.out.println("hi");
    paper.setColor(Color.BLACK);

    paper.fillRect(flys.get(i).getxPosition(), flys.get(i).getyPosition(), 10,      10);

}
try {
    Thread.sleep(1000);
} catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

draw();

}

public void actionPerformed(ActionEvent e) {
 if(e.getSource() == newFrogButton){
     Frog frog = new Frog(enterName.getText());
     frogs.add(frog);
     Fly fly = new Fly();
     Thread t = new Thread(fly);
     t.start();
     flys.add(fly);
     showFlys();

  }
  else if(e.getSource() == hungryButton){
  }
  else if(e.getSource() == resetButton){
      frogs.clear();
      flys.clear();
      System.out.println(frogs);
      System.out.println(flys);

  }
}

public void showFlys(){
for (int i = 0; i <= flys.size()-1; i++){
    System.out.println(flys.get(i));
}

}

@Override
public void run() {
draw(); 
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T10:32:22.460

这`Graphics paper = enviromentPanel.getGraphics()`是您的问题的开始，这不是自定义绘画的完成方式。

`getGraphics`返回上一个绘制周期中使用的图形上下文，最好是快照，最坏的情况是`null`.

您永远不应该维护对`Graphics`您未创建的任何上下文的引用。他们可以改变并且不按顺序在上面绘画会产生意想不到的结果。

相反，您应该重写该`paintComponent`方法（可能在 中`environmentPanel`）并在其中进行所有自定义绘画。

你的第二个问题是你违反了 Swing 的线程规则——你不应该在除 EDT 之外的任何线程中创建或修改任何 UI 组件

你可能想通读一遍

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)
*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

# android - 检索android中所有浏览器应用程序中的浏览器历史记录？

> ID：14892231
> 
> 赞同：1
> 
> 时间：2013-02-15T10:03:29.963
> 
> 标签：android, browser, android-browser

我想从android手机中的不同浏览器中获取所有浏览器历史记录？（也许你知道，手机中通常有多个浏览器应用程序）。有没有人成功地做到这一点并给我一个提示？示例代码是首选。任何帮助都会有所帮助..提前非常感谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:41:05.373

看看这个。我在我的代码中使用了它，并通过它获取浏览器历史记录（默认浏览器）。

```
String[] proj = new String[] { Browser.BookmarkColumns.TITLE, Browser.BookmarkColumns.URL };
    String selection = Browser.BookmarkColumns.BOOKMARK + " = 0"; // 0 = history, 1 = bookmark
    mCursor = this.managedQuery(Browser.BOOKMARKS_URI, proj, selection, null, null);
    this.startManagingCursor(mCursor);
    mCursor.moveToFirst();

    String title = "";
    String url = "";

    if (mCursor.moveToFirst() && mCursor.getCount() > 0) {
        while (mCursor.isAfterLast() == false && cont) {

            title = mCursor.getString(mCursor.getColumnIndex(Browser.BookmarkColumns.TITLE));
            url = mCursor.getString(mCursor.getColumnIndex(Browser.BookmarkColumns.URL));
            // Do something with title and url

            mCursor.moveToNext();
        }
    } 
```

希望这对您有所帮助。

**限制：**

`Browser.BOOKMARKS_URI`最多可以为作为 Android 开源项目一部分的开源浏览器应用程序工作。欢迎设备制造商将该应用程序替换为不会记录其历史记录、书签或其他任何内容的其他应用程序`ContentProvider`。同样，允许用户下载第三方浏览器，这些浏览器可能不会在`ContentProvider`.

# wordpress - WordPress 和 BuddyPress 垃圾邮件预防

> ID：14892233
> 
> 赞同：6
> 
> 时间：2013-02-15T10:03:42.720
> 
> 标签：wordpress, ip, buddypress

我正在使用带有 suffusion 主题的 WordPress 和 buddypress 建立一个站点。都是最新的。像往常一样，我有垃圾邮件发送者注册并禁止他们注册。我在 htaccess 文件中禁止他们的 IP 号码。然后我注意到一个 ip 号码实际上来自我的托管公司，结果证明它是我的网站所在的共享托管 ip 号码。

所以有人在注册，无数次，ip 号是我的共享主机帐户 ip 号。甚至以为我禁止了它仍在注册的号码。我从 wordfence 和 bp 注册插件中获取 IP 号码。

我在控制面板上检查了我的主机网络统计信息，它显示来自该 IP 号码的 174 次访问和 446 次点击。我检查了垃圾邮件列表站点上的 ip 号，但它没有出现。

我的托管公司通常很好，它说，IP 地址：xxxxxxxx 是共享托管服务器的一部分：（以主机命名）您的网站托管在该服务器上。这不是机器人主机或访客 IP 地址。我假设您的网站有一些重定向循环，或者这是您网站的一部分的脚本，例如 cron 脚本或类似的。没有必要阻止此 IP 地址，因为这不是您网站上的实际访问者。

这是什么意思，我该如何阻止某些注册时出现的 ip 号码以及我的脚本是否损坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T20:12:54.967

我不明白您为什么认为禁止 .htaccess 文件中的 IP 地址是阻止人们在您的网站上注册的最佳方式。

除了修改 .htaccess 文件之外，您是否尝试过使用任何垃圾邮件预防措施？

[http://premium.wpmudev.org/blog/buddypress-spam/](http://premium.wpmudev.org/blog/buddypress-spam/)

# android - 多个安卓开发者账户和一个谷歌账户

> ID：14892235
> 
> 赞同：3
> 
> 时间：2013-02-15T10:03:55.513
> 
> 标签：android

我希望用一个谷歌账户创建多个安卓开发者账户，这样“所有权”就属于一个谷歌账户。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-14T06:01:49.900

根据 google 政策，不允许使用多个 google play 帐户。如果谷歌发现多个同名帐户，他们将禁止您的所有帐户。

同样，拥有多个同名帐户也不是一个好主意。如果您的一个帐户被暂停，您的所有帐户都将被暂停。[https://support.google.com/googleplay/android-developer/answer/4454563?hl=en](https://support.google.com/googleplay/android-developer/answer/4454563?hl=en)

# jquery - 如何通过单击标题使 p：panel 可折叠？

> ID：14892238
> 
> 赞同：3
> 
> 时间：2013-02-15T10:03:59.380
> 
> 标签：jquery, primefaces, toggle

我正在使用**PrimeFaces 3.4**可折叠面板。实际解决方案的问题是通过单击右侧的小按钮来切换面板。它不是很符合人体工程学，用户会期望通过单击标题上的任意位置来进行切换。

这就是我想要实现的：通过单击标题触发切换并删除切换按钮。这是我写的：

```
$('.ui-panel-titlebar').each(function(){
    var header = $(this);
    var widgetId = 'widget_' + header.attr('id').replace(/:/g, '_').replace(/_header$/, '');
    header.css('cursor', 'pointer');
    var toggler = header.find('a[id$=_toggler]');
    toggler.remove();
    header.click(function(){
        window[widgetId].toggle();
    });
}); 
```

但我不喜欢那个解决方案，因为首先我在猜测 JavaScript 小部件 ID，其次，我从 DOM 树中删除了渲染的切换按钮，我希望它根本不被渲染。

有没有一种方法可以在不编写太多代码的情况下以更优雅的方式实现相同的效果（所以，无需重写`p:panel`）？使用基于与 PrimeFaces（商业友好）相同许可证的扩展作为解决方案是可以接受的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-08-14T13:04:58.833

[`toggleableHeader`](https://www.primefaces.org/docs/vdl/6.2/core/primefaces-p/panel.html)自 PrimeFaces 6.2 起，通过新的-attribute支持此行为：

```
<p:panel header="This is my header text"
         toggleable="true"
         toggleableHeader="true">
  The content of the panel.
</p:panel> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T12:18:38.613

我遇到了同样的问题，不幸的是找不到 PrimeFaces 解决方案。我编写了一个自定义 JQuery 脚本，如果单击标题栏，则模拟单击切换按钮。

```
$(document).on("click", ".ui-panel:has(.ui-panel-titlebar-icon) .ui-panel-titlebar", function(e) {
    console.log("click:");
    if (e.srcElement != null) { // avoid infinite loop
        $(this).find("a.ui-panel-titlebar-icon").click();
    }
}); 
```

多亏了`on`，这在任何 Ajax 更新后也有效。我认为应该很容易将此行为设置为仅具有给定类（例如`panel-header-click`）的面板。

我只在 Chrome 上测试了代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-29T10:45:07.763

我希望有可以通过单击标题来选择切换的面板，并且还希望在面板的左侧有图标。我选择[创建一个自定义标签](https://stackoverflow.com/questions/14751624/how-to-create-a-custom-facelets-tag)来做到这一点。

`my.taglib.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<facelet-taglib xmlns="http://java.sun.com/xml/ns/javaee"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
                version="2.0">
  <namespace>http://my.com/jsf/facelets</namespace>
  <tag>
    <tag-name>togglePanel</tag-name>
    <source>tags/togglePanel.xhtml</source>
    <attribute>
      <name>header</name>
      <required>true</required>
      <type>java.lang.String</type>
    </attribute>
    <attribute>
      <name>collapsed</name>
      <required>false</required>
      <type>boolean</type>
    </attribute>
  </tag>
</facelet-taglib> 
```

`togglePanel.xhtml`：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

  <c:set var="collapsed" value="#{not empty collapsed and collapsed}" />

  <p:panel toggleable="true" collapsed="#{collapsed}" class="myToggleable">
    <f:facet name="header">
      <a href="#" onclick="document.getElementById(this.parentNode.parentNode.id.replace('_header', '_toggler')).click()"><h:outputText
          value="#{header}"/></a>
    </f:facet>
    <ui:insert />
  </p:panel>

</ui:composition> 
```

样式表：

```
.ui-panel.myToggleable .ui-panel-titlebar { 
  position: relative; padding: .5em 1em .3em 2.5em;
}
.ui-panel.myToggleable .ui-panel-title,
.ui-panel.myToggleable .ui-panel-title a {
  display: block; text-decoration: none;
}
.ui-panel.myToggleable .ui-panel-titlebar-icon,
.ui-panel.myToggleable .ui-panel-titlebar-icon:hover {
  position: absolute; left: 10px; top: 10px; margin: 0;
} 
```

现在您可以在 XHTML 文件中像这样使用它：

```
<my:togglePanel header="Header" collapsed="false">
  ...
</my:togglePanel> 
```

不过，您应该添加以下命名空间：`xmlns:my="http://my.com/jsf/facelets"`.

这已经使用 PrimeFaces 6.0 进行了测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T10:29:40.513

[p:accordionPanel](http://www.primefaces.org/showcase/ui/accordionPanel.jsf)是一个可折叠面板，可以通过单击标题上的任意位置进行切换。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-30T15:51:44.237

在 primefaces 5.2 中是

```
$(document).on("click", ".ui-panel:has(.ui-panel-titlebar-icon) .ui-panel-titlebar", function (e) {
    console.log(e.target.className);
    if (e.target.className === "ui-panel-titlebar ui-widget-header ui-helper-clearfix ui-corner-all"
            || e.target.className === "ui-panel-title"){
        $(this).find("a.ui-panel-titlebar-icon").click();
    }
}); 
```

# android - 列表视图内的列表视图

> ID：14892240
> 
> 赞同：2
> 
> 时间：2013-02-15T10:04:04.423
> 
> 标签：android, listview, android-listview

我正在尝试在另一个 listView 中实现一个 listView，如[android: listview in listview](https://stackoverflow.com/questions/11652814/android-listview-in-listview)

问题是只有子列表的第一项是可见的，而其余的仍然是隐藏的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:32:51.793

您在 Listview 中提供 Listview 有什么用处。更好的是，您可以使用可扩展的 ListView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:33:39.097

首先，为什么要将 ListView 放在 ListView 中？也许您的问题可以通过使用[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)来解决。

ListView 是一个可滚动组件，嵌套可滚动组件不是一个好主意。

如果你还想使用嵌套的ListView，你要知道一个ListView计算出来的高度就是他第一个元素的高度。

因此，如果您想在 ListView 中使用 ListView，则必须编写 CustomListView 并将一些方法重写为：

*   布局
*   测量
*   onDraw / dispatchDraw

要了解有关自定义组件的更多信息，Chiuki Chan 给出了一个很好的解释：[点击链接](http://www.sqisland.com/talks/android-custom-components/#25)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-07T13:31:13.203

我只是认为您在项目 XML 文件中可能有问题。检查您使用的是“match_parent”还是“fill_parent”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-09T08:05:48.847

我们可以使用 ExpandableHeightGridView 并将扩展设置为 true。

# actionscript-3 - 全屏动作脚本 3

> ID：14892242
> 
> 赞同：1
> 
> 时间：2013-02-15T10:04:15.043
> 
> 标签：actionscript-3, flash, flash-cs6

我使用 Flash Adob​​e CS6。

我想在我的应用程序中有一个全屏模式。在 AC2 中有一个函数 fscommand。我试过这个，但没有成功。我只有一个 .swf 文件，它应该在启动后进入全屏模式。

我是否有机会在不使用 Adob​​e Air 的情况下将我的应用程序置于全屏模式？

Flash 播放器版本：11.4

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T11:36:53.313

使用任一

`stage.displayState = StageDisplayState.FULL_SCREEN_INTERACTIVE`（您需要以 FP 11.3+ 为目标才能使用此模式）

或者

`stage.displayState = StageDisplayState.FULL_SCREEN`.

后者不允许您在全屏模式下阅读键盘输入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T10:31:55.073

采用 ：

```
stage.displayState = StageDisplayState.FULL_SCREEN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-24T09:09:38.097

首先在你的舞台上放一个 MC，Instance Name 是 toggle，然后你可以使用这个：

```
var fullScreen:Boolean = false;
toggle.addEventListener(MouseEvent.CLICK, toggleScreen);

function toggleScreen(e:MouseEvent):void
{
   if(fullScreen == false)
   {
        fullScreen = true;
        stage.displayState = StageDisplayState.FULL_SCREEN;
   }
   else
   {
        fullScreen = false;
        stage.displayState = StageDisplayState.NORMAL; 
   }

} 
```

# google-app-engine - webapp2 的管理面板

> ID：14892247
> 
> 赞同：0
> 
> 时间：2013-02-15T10:04:27.030
> 
> 标签：google-app-engine, webapp2

我正在使用 webapp2 框架在 Google App Engine 上实现电子商务应用程序。

这个想法是，除了应用程序之外，还应该有某种管理面板，类似于 Django 提供的，它可以让我的客户上传产品、管理用户等。是否有某种包可以像[Flask-Admin](http://flask-admin.readthedocs.org/en/latest/)那样自动为我生成管理模块和视图？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:33:24.290

这个片段： http: [//flask.pocoo.org/snippets/59](http://flask.pocoo.org/snippets/59)似乎表明 admin 与应用引擎兼容，因为它混合了 GAE 和 flask-admin 代码。

作为替代方案，WTForms 可用于直接从模型生成表单并将数据反馈回数据库，并且它已经内置了 GAE 组件：[http ://wtforms.simplecodes.com/docs/1.0.3/ext.html #module-wtforms.ext.appengine](http://wtforms.simplecodes.com/docs/1.0.3/ext.html#module-wtforms.ext.appengine)

# javascript - 包装的咖啡脚本范围 - 使用变量的值来调用函数

> ID：14892251
> 
> 赞同：0
> 
> 时间：2013-02-15T10:04:45.900
> 
> 标签：javascript, jquery, coffeescript

编辑：自己解决了。我通过将我的代码包装在一个类中来完成这项工作，所以@/this 指的是我的对象而不是窗口

* * *

我正在编写一个咖啡脚本脚本，而不使用 Class。我的 javascript 代码包含在一个匿名函数中：

```
(function() { ... }).call(this) 
```

我有一个复选框列表，比如明天、昨天、下周、下个月等等。用户可以选择其中的一项或多项。我没有检查用户选择的内容，而是存储这些复选框类名（明天，下周......）。我没有检查我有哪些类名，然后调用适当的方法，而是创建了与类名对应的方法。

如果我的明天（）是在全局范围内定义的，我会这样称呼它：

```
this[expression]() 
```

其中表达式保存类名，例如明天。

为此，我定义了这样的函数：

```
 this.tomorrow = function() {
       return console.log("I was triggered");
  }; 
```

现在在全局范围内定义了明天（）。有没有办法不费力地在全局范围内定义函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:13:03.733

我通过将我的代码包装在一个类中来完成这项工作，所以@/this 指的是我的对象而不是窗口。

```
@[expression]() 
```

现在按预期工作

# java - Java 从 Eclipse 导出为可运行的 JAR 文件

> ID：14892253
> 
> 赞同：0
> 
> 时间：2013-02-15T10:04:47.260
> 
> 标签：java, eclipse, jar, export

我想将我的项目导出为可运行的 JAR 文件，但是当我导出它时，它会自动崩溃……而且它只需要 900 KB，这对于我的程序来说太低了……我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T11:07:49.213

你可以从命令行运行它

```
java -jar yourjarfile.jar 
```

您的图片是否位于项目中的资源中。否则 jar 文件中缺少它，因此您可能会遇到错误

# javascript - JavaScript 函数调用显然没有触发

> ID：14892254
> 
> 赞同：0
> 
> 时间：2013-02-15T10:04:51.617
> 
> 标签：javascript

我正在使用 HTML5 画布创建一个简单的基于 Web 的游戏。

目前，当我的页面加载时，画布上的随机位置会显示许多图像，用户需要将其拖动到正确的位置。

这很好，但我想在画布上添加一个开始按钮，用户必须在显示这些图像之前单击该按钮才能开始玩游戏。

我的 index.html 页面中有以下 JS 函数：

```
window.onload = function(){
    var sources = [];
        sources[0] = document.getElementById("building").src,
        sources[1] = document.getElementById("chair").src,
        sources[2] = document.getElementById("drink").src,
        sources[3] = document.getElementById("food").src,
        sources[4] = document.getElementById("fridge").src,
        sources[5] = document.getElementById("land").src,
        sources[6] = document.getElementById("money").src,
        sources[7] = document.getElementById("oven").src,
        sources[8] = document.getElementById("table").src,
        sources[9] = document.getElementById("van").src,

        sources[10] = document.getElementById("burger").src,
        sources[11] = document.getElementById("chips").src,
        sources[12] = document.getElementById("drink").src,
        sources[13] = document.getElementById("franchiseFee").src,
        sources[14] = document.getElementById("wages").src,

        sources[15] = document.getElementById("admin").src,
        sources[16] = document.getElementById("cleaners").src,
        sources[17] = document.getElementById("electricity").src,
        sources[18] = document.getElementById("insurance").src,
        sources[19] = document.getElementById("manager").src,
        sources[20] = document.getElementById("rates").src,
        sources[21] = document.getElementById("training").src,
        sources[22] = document.getElementById("water").src,

        sources[23] = document.getElementById("burger").src,
        sources[24] = document.getElementById("chips").src,
        sources[25] = document.getElementById("drink").src,

        sources[26] = document.getElementById("creditors").src,
        sources[27] = document.getElementById("electricity").src,
        sources[28] = document.getElementById("food").src,
        sources[29] = document.getElementById("hirePurchase").src,
        sources[30] = document.getElementById("loan").src,
        sources[31] = document.getElementById("overdraft").src,
        sources[32] = document.getElementById("payeTax").src,
        sources[33] = document.getElementById("tax").src

    drawStartButton();
    loadImages(sources, drawImage);
    drawGameElements();
    drawDescriptionBoxes();

}; 
```

在此函数末尾对其他函数的所有函数调用都被调用，并执行它们的预期功能，除了`drawStartButton();`我刚刚添加的那个。

我不太明白为什么不调用此函数...代码`drawStartButton();`位于单独的 JS 文件中，如下所示：

```
function drawStartButton(){
            image.onload = function(){
                context.drawImage(image, 410.5, 120);
            };
            image.src = startButton; 
```

我需要引用存储函数的文件吗？我还没有完成其他函数调用，它们与`drawStartButton()`...在同一个 JS 文件中

有谁知道为什么不调用此函数，以及如何确保调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:07:35.167

后面加分号：

```
sources[33] = document.getElementById("tax").src 
```

（只是好习惯）

另外，在尝试获取它们之前确保所有这些元素都存在（并且已加载）`src`（但你已经`onload`有了，所以应该没问题。）

现在，您可以简化所有这些`getElementById`：

```
var sources = [],
    sourceNames = [
    'building',  'chair',       'drink',       'food',         'fridge',  'land',      'money',    'oven', 'table', 'van',
    'burger',    'chips',       'drink',       'franchiseFee', 'wages',                
    'admin',     'cleaners',    'electricity', 'insurance',    'manager', 'rates',     'training', 'water',
    'burger',    'chips',       'drink',                       
    'creditors', 'electricity', 'food',        'hirePurchase', 'loan',    'overdraft', 'payeTax',  'tax'
];

for(var i = 0, l = sourceNames.length; i < l; i++){
    sources[i] = document.getElementById(sourceNames[i]).src;
} 
```

您的代码很可能因为其中一个`getElementById`返回而中断`null`。
（另外，你那里有重复，这是故意的吗？）

您可以改用此循环来测试它：

```
for(var i = 0, l = sourceNames.length; i < l; i++){
    console.log('Getting ' + sourceNames[i]);
    sources[i] = document.getElementById(sourceNames[i]).src;
} 
```

您将看到最后获得的元素。

您还必须确保`drawStartButton()`首先加载包含您的函数的文件，否则该函数将不存在。

最后：

替换`image.src = startButton;`为`image.src = startButton.src;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:08:33.107

您需要确保在您的 html 文件中包含此之前的另一个 javascript 文件，然后一切都应该正常工作。还要确保你用 a 关闭你的函数体，`}`尽管我觉得这是一个复制粘贴错误。

正如其他人所解释的那样，您需要；在javascript中结束每个语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:25:10.827

与其在您的 javascript 代码中包含如此长的应用程序特定的 id 名称列表，不如考虑通过它们共有的类来获取这些 html 元素。

```
<img class="preload_image" src"..."> 
```

在你的 javascript 中类似

```
var preload_images = document.getElementsByClassName('preload_image');
var sources = [];
for(var i = 0;i < preload_images.length;i++){
sources.push(preload_images[i].src);
} 
```

这使您的代码更干净，您可以通过向标签添加一个类而不是添加标签然后必须转到您的 js 文件并将标签的 id 添加到源列表来确保预加载某些内容。而且您的代码仍然更加灵活，因为您可以在任何其他项目中简单地使用它而无需对其进行任何更改。

# android - Android 语言环境更改

> ID：14892258
> 
> 赞同：2
> 
> 时间：2013-02-15T10:05:08.420
> 
> 标签：android, android-intent, locale

我正在尝试通过使用微调器来更改我的 android 应用程序的语言环境，微调器包含语言列表，微调器中的初始值将是英语，但是当加载活动时，活动会重复意图..如果我将第一个值设置为选择，那么它可以工作完美，但我需要活动的初始价值是英语。请在这个问题上帮助我。

下面是我的语言微调器代码

位置 0 是英语 位置 1 是印地语

```
 language.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View view,
                int pos, long id) {
            // TODO Auto-generated method stub
            if(pos==0){
                languagechange("en");

            }
            if(pos==1)
            {
                languagechange("hi");
            }

        } 
```

语言环境更改代码如下

```
 public void languagechange(String lang) {

    myLocale = new Locale(lang);

    Resources res = getResources();
    DisplayMetrics dm = res.getDisplayMetrics();
    Configuration conf = res.getConfiguration();
    conf.locale = myLocale;
    res.updateConfiguration(conf, dm);
    Intent refresh = new Intent(this, LoginActivity.class);
    startActivity(refresh);
    LoginActivity.this.finish();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-08T10:15:02.897

“活动的初始价值是英语”

```
Locale myLocale = new Locale("en");
Configuration conf = new Configuration();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    conf.locale = myLocale;
    getResources().updateConfiguration(conf, null);
    setContentView(R.layout.activity_main);
} 
```

将它放在 setContentView() 之前。希望这能解决您的问题。

# arrays - perl - 用给定的数字数组切割许多字符串

> ID：14892265
> 
> 赞同：2
> 
> 时间：2013-02-15T10:05:31.997
> 
> 标签：arrays, string, perl, cut

亲爱的世界上我的perl大师们~！

我需要你的帮助。

我有一个字符串文件A和一个数字文件B，如下所示：

档案一：

```
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD
EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE 
```

...依此类推，直到 200。

文件 B：

```
3, 6, 2, 5, 6, 1, ... 2 
```

（数组中共有 200 个数字）

然后，使用文件 B 中的数字，我想将每个字符串从起始位置剪切到文件 B 中的字符数。

例如，文件 B 以 3, 6, 2 ... 开头

文件 A 将是

```
AAAAAAAAAAAAAAAAAAAAAAAAAAAAA
BBBBBBBBBBBBBBBBBBBBBBBBBB
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCC 
```

像这样。

所以。到目前为止，这是我的代码...

```
use strict;

if (@ARGV != 2) {
    print "Invalid usage\n";
    print "Usahe: perl program.pl [num_list] [string_file]\n";
    exit(0);
}

my $numbers=$ARGV[0];
my $strings=$ARGV[1];
my $i;

open(LIST,$number);
open(DATA,$strings);

my @list = <LIST>;
my $list_size = scalar @sp_list;

for ($i=0;$i<=$list_size;$i++) {
    print $i,"\n";
    #while (my $line = <DATA>) {    
    }   

close(LIST);
close(DATA); 
```

由于字符串和数字是 200，我将数组更改为标量值，以处理每个字符串的每个数字。

我正在做这件事。我知道我想使用 pos 函数，但我不知道如何将每个数字与每个字符串匹配。是先读字符串吗？或使用 for 知道我必须运行多少次才能达到结果？

您的帮助将不胜感激！

谢谢你。

我也会努力的。需要您的反馈。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T10:28:51.223

你用的好，你`strict`也应该用`warnings`。其他需要注意的事项：

您应该检查 的返回值`open`以确保它们没有失败。您还应该使用 的三参数形式`open`并使用词法文件句柄。特别是在处理命令行参数时，这确实会带来安全风险。

```
open my $listfh, "<", $file or die $!; 
```

您可能希望使用安全预防措施

```
use ARGV::readonly; 
```

`map`您可以使用语句轻松制作数字列表。假设数字在逗号分隔的列表中：

```
my @list = map split(/\s*,\s*/), <$listfh>; 
```

这将以逗号分隔输入行并去除多余的空格。

读取输入文件时，不需要使用计数器变量。你可以简单地做

```
open my $inputfh, "<", $file or die $!;
while (<$inputfh>) {
    my $length = shift @list;   # these are your numbers
    chomp;                      # remove newline 
    my $string = substr($_, 0, -$length);  # negative length on substr
    print "$string\n";
} 
```

substr 上的负长度使其在字符串末尾留下那么多字符。

这是一个演示这些原则的单行代码：

```
perl -lwe '$f = pop;                            # save file name for later
           @nums = map split(/\s*,\s*/), <>;    # process first file
           push @ARGV, $f;                      # put back file name
           while (<>) { 
                my $len = shift @nums; 
                chomp; 
                print substr($_,0,-$len); 
           }' fileb.txt filea.txt 
```

**输出：**

```
AAAAAAAAAAAAAAAAAAAAAAAAAAAAA
BBBBBBBBBBBBBBBBBBBBBBBBBB
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
DDDDDDDDDDDDDDDDDDDDDDDDDDD
EEEEEEEEEEEEEEEEEEEEEEEEEE 
```

请注意通过操作来使用隐式打开文件名参数`@ARGV`。`-l`还使用开关处理换行符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T10:43:52.120

这是我的建议。这样做`use autodie`是为了无需显式检查`open`调用的状态，并暂时取消定义`$/`- 输入记录分隔符 - 以便一次性读取*所有*`num_list`文件。你不清楚这个文件是否总是只包含一行，在这种情况下你可以省略`local $/`.

使用正则表达式从文本中提取`/\d+/g`数字，将输入中的所有数字字符串作为列表返回。

to的第二个参数[`substr`](http://perldoc.perl.org/functions/substr.html)是你想要的子字符串的起始位置，并且使用负数从字符串的末尾而不是开头开始计数。第三个参数是子串中的字符数，第四个是替换目标变量中那个子串的字符串。所以用一个空字符串`substr $data, -$n, $n, ''`替换长度从末尾`$n`开始的字符的子字符串 - 即它删除它。`$n`

请注意，如果您打算从字符串的*开头*删除给定数量的字符，那么您将 `substr $data, 0, $n, ''`改为编写。

```
use strict;
use warnings;
use autodie;

unless (@ARGV == 2) {
  print "Usage: perl program.pl [num_list] [string_file]\n";
  exit;
}

my @numbers;
{
  open my $listfh, '<', $ARGV[0];
  local $/;
  my $numbers = <$listfh>;
  @numbers = $numbers =~ /\d+/g;
};

open my $datafh, '<', $ARGV[1];

for my $i (0 .. $#numbers) {
  print "$i\n";
  my $n = $numbers[$i];
  my $data = <$datafh>;
  chomp $data;
  substr $data, -$n, $n, '';
  print "$data\n";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T10:26:23.607

这是我将如何做到的。[substr](http://p3rl.org/substr)是删除部分字符串的函数。从您的示例中，尚不清楚您是要删除开头还是结尾的字符。两种选择都显示在这里：

```
#!/usr/bin/perl
use warnings;
use strict;

if (@ARGV != 2) {
    die "Invalid usage\n"
        . "Usage: perl program.pl [num_list] [string_file]\n";
}

my ($number_f, $string_f) = @ARGV;

open my $LIST, '<', $number_f or die "Cannot open $number_f: $!";
my @numbers = split /, */, <$LIST>;
close $LIST;

open my $DATA, '<', $string_f or die "Cannot open $string_f: $!";
while (my $string = <$DATA>) {
    substr $string, 0, shift @numbers, q(); # Replace the first n characters with an empty string.

    # To remove the trailing portion, replace the previous line with the following:
    # my $n = shift @numbers;
    # substr $string, -$n-1, $n, q();

    print $string;
} 
```

您没有检查`open`. 试着记住永远这样做。

在使用它们之前不要声明变量（`$i`这里）。

`for`如果没有必要，不要使用 C 风格的循环。他们很容易出现围栏错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T10:17:43.163

您可以使用`substr()`：

```
use strict;
use warnings;

if (@ARGV != 2) {
    print "Invalid usage\n";
    print "Usage: perl program.pl [num_list] [string_file]\n";
    exit(0);
}

my $numbers=$ARGV[0];
my $strings=$ARGV[1];

open my $list, '<', $numbers or die "Can't open $numbers: $!";
open my $data, '<', $strings or die "Can't open $strings: $!";

chomp(my $numlist = <$list>);
my @numbers = split /\s*,\s*/,$numlist;
for my $chop_length (@numbers)
{
   my $data = <$data> // die "not enough data in $strings";
   print substr($data,0,length($data)-$chop_length)."\n";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T00:44:49.413

您的规范说您希望*“...将每个字符串从起始位置剪切到文件 B 中的字符数。”* 我同意[choroba](https://stackoverflow.com/users/1030675/choroba)的观点，即是否要剪切字符串开头或结尾的字符并不*完全*清楚。但是，我倾向于认为，当您说*"... from the start position ..."*时，您想从开头删除字符，但是类似的字符串`ABCDEFGHIJKLMNOPQRSTUVWXYZ012345`有助于澄清这个问题。

此选项不像其他解决方案那样具有自我记录性，但随后将对其进行讨论：

```
use strict;
use warnings;

@ARGV == 2 or die "Usage: perl program.pl [num_list] [string_file]\n";

open my $fh, '<', pop or die "Cannot open string file: $!";
chomp( my @str = <$fh> );

local $/ = ', ';

while (<>) {
    chomp;
    print +( substr $str[ $. - 1 ], $_ ) . "\n";
} 
```

字符串：

```
ABCDEFGHIJKLMNOPQRSTUVWXYZ012345
BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD
EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE 
```

数字：

```
3, 6, 2, 5, 6 
```

输出：

```
DEFGHIJKLMNOPQRSTUVWXYZ012345
BBBBBBBBBBBBBBBBBBBBBBBBBB
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
DDDDDDDDDDDDDDDDDDDDDDDDDDD
EEEEEEEEEEEEEEEEEEEEEEEEEE 
```

字符串的文件名被`pop`删除`@ARGV`（因为`pop`未使用显式参数 for）并传递`open`给以将字符串读入`@str`. 记录分隔符设置为`', '`只`chomp`留下数字。当前行号 in`$.`用作相应元素的索引的一部分，并打印`@str`字符串中的剩余字符。`n`

# c# - ExcelDataReader - 索引超出数组范围

> ID：14892266
> 
> 赞同：1
> 
> 时间：2013-02-15T10:05:39.460
> 
> 标签：c#, asp.net, exceldatareader

```
fileStream stream = File.Open(filePath, FileMode.Open, FileAccess.Read);

//1\. Reading from a binary Excel file ('97-2003 format; *.xls)
IExcelDataReader excelReader = ExcelReaderFactory.CreateBinaryReader(stream);
//...
//2\. Reading from a OpenXml Excel file (2007 format; *.xlsx)
IExcelDataReader excelReader = ExcelReaderFactory.CreateOpenXmlReader(stream);
//...
//3\. DataSet - The result of each spreadsheet will be created in the result.Tables
DataSet result = excelReader.AsDataSet();
//...
//4\. DataSet - Create column names from first row
excelReader.IsFirstRowAsColumnNames = true;
DataSet result = excelReader.AsDataSet();

//5\. Data Reader methods
while (excelReader.Read())
{
        //excelReader.GetInt32(0);
}

//6\. Free resources (IExcelDataReader is IDisposable)
excelReader.Close(); 
```

我已经使用上面的代码来读取 Excel 文档，您使用 no1 或 no2 取决于它是 xls 还是 xlsx，我已经使用 xlsx 进行了尝试（使用上面的数字 2，它工作正常 - 但是我正在使用另一个插入以再次导出文档-这仅适用于 xls，因此我想在使用此代码时将 excel 数据阅读器保持为“xls”（数字 1 而不是数字 2-（上面编号）当我收到错误时试图读入文件：

> 指数数组的边界之外

知道为什么吗？

# jquery - 使用jquery在codeigniter中无限滚动

> ID：14892272
> 
> 赞同：0
> 
> 时间：2013-02-15T10:05:48.950
> 
> 标签：jquery, ajax, codeigniter

大家好，我有一个简单的问题，我想：

我在代码点火器中创建了一个博客，这就是我的代码的外观：

这是我的主页控制器：

```
public function index()
    {
        $data['posts'] = $this->Model_cats->getLivePosts(7);
        $data['cats'] = $this->Model_cats->getTopCategories(); 
        $data['title'] = 'Welcome';
        $data['main'] = 'public_home';
        $data['main2'] = 'public_home_loadpost';
        $this->load->vars($data);
        $this->load->view('template', $data);
    } 
```

我使用这个 jquery 来加载：

```
$(window).scroll(function())
{
    if( $(window).scrollTop() == $(document).height() - $(window).height() ){
        $('div#loadMoreComments').show();

        $.ajax({
            url: "WHAT PAGE PUTHERE.php?lastComment=" + $(".postedComment:last").attr("id"),
            success: function(html){
                if(html)
                {
                    $("#postedComments").append(html);
                    $('div#loadMoreComments').hide();

                }
                else
                {
                    $('div#loadMoreComments').replaceWith("Finished Loading the comments");
                }
            }
        });
    } 
```

我真的不知道我可以在 jquery 文件中的 url 中放入哪个页面......该页面将为我获得更多帖子。请帮忙

我的观点看起来像这样

```
<?php

    if ( count($posts) )
    {
        foreach ($posts as $key => $list)
        {
            echo "<div class='postedComment'>";
            echo '<h2>'.$list['title'].'</h2>';
            echo auto_typography( word_limiter($list['body'], 200) );
            echo anchor('welcome/post/'.$list['id'],'read more >>');
            echo "</div>";
        }

        echo '<br/><br/>';
    }

?>

<div id='loadMoreComments' style="display:none;">hello</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:24:40.413

您需要在控制器中创建另一个视图。该视图的 url 将由 ajax 函数调用，并以 JSON 格式或您想要的任何格式返回数据。

这是一个使用ajax的简单方法。

一个非常简单的 ajax 视图示例（在控制器中）：

```
public function ajax_get_current_date_time() {
    die(date('d-m-Y H:i:s'));
} 
```

HTML：

```
<div>The current date and time: <b id="current_time"></b></div> 
```

然后在前面的js中：

```
$.ajax({
    url: "/controller/ajax_get_current_date_time",
    success: function(data){
        $('#current_time').html(data);
    }
}); 
```

对于您的情况，您可以更好地使用 JSON。这是使用 JSON 进行 ajax 调用的示例。

```
$.ajax({
    url: "/controller/ajax_get_post",
    type: 'GET',
    data: 'lastComment=' + $(".postedComment:last").attr("id"),
    dataType: 'JSON',
    success: function(data){
        // trigger function that will transform the JSON data into HTML
        add_post(data);
    }
}); 
```

见 JSON 部分，请求的 url 必须返回 JSON。有关 JSON 的更多信息：[点击！](http://www.caveofprogramming.com/php/php-json-an-example-javascript-json-client-with-php-server/)

# c++ - 从标准 C++ 访问 C++/CX 方法

> ID：14892275
> 
> 赞同：0
> 
> 时间：2013-02-15T10:05:56.720
> 
> 标签：c++, windows-phone-8, c++-cx

我正在尝试解决一个小问题。我有一个用标准 C++ 编写的库和使用 C++/CX 的 Windows Phone 8 新应用程序。我可以实例化旧库对象并从 C++/CX 调用旧方法，但我还需要从旧 C++ 访问新的 C++/CX 方法。

问题是新应用程序的类正在使用“ *ref class Renderer seal* ”，我无法传递该指针并将该文件包含到旧的 c++ 代码中。我需要做这样的事情：

用 C++/CX 编写的应用程序的主要对象

```
void function(){
  Renderer^ m_renderer = ref new Renderer();
  MyOldLib * m_lib = new MyOldLib();
  m_lib->setLink(m_renderer); // <-- I cannot pass parameter becouse ordinary reference is not allowed
} 
```

用标准 C++ 编写的旧库

```
#include "Renderer.h" // <-- I cannot include becouse Renderer.h needs /ZW parameter
void MyOldLib::setLink(Renderer& renderer){
   m_renderer = renderer;
} 
```

谢谢您的帮助

*更新：扩展伪代码*

# css - 响应式设计电子邮件模板的问题（css 和内联样式冲突）

> ID：14892277
> 
> 赞同：0
> 
> 时间：2013-02-15T10:06:11.013
> 
> 标签：css, responsive-design, html-email

在我正在做的电子邮件活动中，我遇到了一些关于 CSS 和内联样式的问题。

首先，我在使用@media css 时隐藏了元素（display:none;）以使它们以正确的顺序出现，因此我最终作弊了。这里的问题是在桌面 isp (gmail) 上显示时，它忽略了 (display:none;) 并最终在某些地方显示了双重内容。因此，我使用了双重内容消失（显示：无！重要；），然后影响了移动版本。

我在网上看到的一些移动模板似乎没有经过太多测试，因为它们根本无法跨多个邮件客户端工作。

如果有人有任何建议或帮助，代码就在这里[http://www.makeyourownmarket.com/test/test-doc.html](http://www.makeyourownmarket.com/test/test-doc.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T18:14:57.410

响应式电子邮件的一些提示：

*   把你的`!important`声明放在你所有的`@media only screen and (max-width: 480px)`CSS上

*   考虑解决方法，如果`display:none;`不起作用，请尝试使用内联 CSS，然后在您的移动样式中`width:0;height:0;`覆盖`width:100px !important;height:100px !important;`

*   您将需要进行广泛的测试，最好为所有重要的电子邮件客户端拥有一个帐户/设备，但[http://www.emailonacid.com](http://www.emailonacid.com)工作在紧要关头。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T10:27:12.873

我建议对 HTML 电子邮件及其局限性进行更多研究。

这篇文章是一个很好的起点： http: [//kb.mailchimp.com/article/how-to-code-html-emails](http://kb.mailchimp.com/article/how-to-code-html-emails)

一些技巧：

*   不要将 CSS 放在 STYLE 标记中，因为这不适用于所有电子邮件客户端。
*   仅使用内联 CSS
*   使用表格进行布局
*   如果媒体查询在电子邮件客户端中始终如一地工作，我会感到非常惊讶。我会避免尝试使用这些，而是​​专注于创建一个基本的、可靠的电子邮件模板，该模板在最流行的电子邮件客户端中始终如一地显示。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-15T10:29:00.440

我不认为响应式设计是电子邮件的正确方式。由于许多邮件客户端，通常在表格内发送电子邮件。你可以在这里找到更多相关[信息](http://net.tutsplus.com/tutorials/html-css-techniques/getting-started-with-html-emails/)

# asp.net - Problems with Optimistic Concurrency for gridview in asp.net

> ID：14892280
> 
> 赞同：0
> 
> 时间：2013-02-15T10:06:15.983
> 
> 标签：asp.net, c#-4.0, ado.net

In asp.net for Gridview, how to avoid optimistic concurrency ? How the user to restrict not to edit when already the record is in edit mode ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:17:43.243

**to check if the data changed clientside:**

I would suggest a TextBox which contains the Information and the same TextBox as "css: visibility:hidden" and readonly containing the original Information. then you can always check on clientside with JavaScript if the user changed the value of the TextBox without doing a postback to the Server.

**to lock the users edit:**

its difficult on asp to manage this cause the communication is an asyncronious way. you can for example add a new column in your databasetable "locked"(bit) and can lock the dataset if someone enters the editmode. then you can check the locked value from some other user and restrict the edit mode for him. (care about sessions running out and so on; maybe use an timestamp as lock and open the lock after the sessionminutes expired).

**if the user is in edit mode alrdy:**

you cant lock him (if your not doing postbacks to the Server and asking him for the lock in intervals (would be done my AJAX)). You only can check the locked value when he tries to save his changes. But this is to late cause he alrdy changed some values and they will get reverted. Maybe you can ask him if you can see the values changed in the database if he wants to overwrite those changes.

hope this helps, noone

# cookies - 在 http 和 https 之间移动时购物篮变空

> ID：14892281
> 
> 赞同：0
> 
> 时间：2013-02-15T10:06:23.880
> 
> 标签：cookies, asp-classic, iis-7.5, windows-server-2008-r2

我们有一个现有的站点，用 Classic ASP 构建，最近从 2003 服务器迁移到 2008 R2 服务器，并且出现了一些奇怪的行为。

这是一个基本的电子商务系统，它使用 cookie 来存储购物篮/购物车 ID - 实际购物篮内容存储在数据库中。

因此，用户（使用 IE8 - 我们无法在任何其他浏览器上重新创建此功能）将项目添加到他们的购物篮并被带到查看购物篮页面。结帐过程的下一阶段从 http 更改为 https，突然篮子是空的 - 在调查中，cookie 没有被拾取。

我们可以通过简单地通过 http（一切正常）然后 https（篮子为空）查看购物篮来重现此问题 - 这使用相同的 URL，并且不打开新选项卡。

我已经完成了大量搜索并且可以确认：IIS7.5 中的应用程序池仅使用 1 个工作进程 安全连接上的新 ID 在 IIS 中设置为 False 域名不包含连字符（尽管 cookie 值包含）

我们很感激任何建议，因为我们很难过，客户也不高兴......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:36:38.367

现在发现问题：它是 IE8 并且是保护模式设置！有关更多信息，请参阅[IE8 - 不在我的机器上写入某些 cookie](https://stackoverflow.com/questions/4105435/ie8-not-writing-certain-cookies-on-my-machine) ...

# c++ - 试图运行/编译我的 C++ 程序

> ID：14892283
> 
> 赞同：1
> 
> 时间：2013-02-15T10:06:41.133
> 
> 标签：c++, visual-studio-2010, compilation, visual-studio-2012

该项目是我（多年前）制作的蛇克隆。我在`VS2010.`Compiled 中完成了它，并让一切工作正常且花花公子（很久以前）。

当我尝试运行我得到的调试 exe 时，我想再次运行它`"missing MSVCP100.dll".`

当我尝试重新编译（这次使用 vs2012）时，我会`multiple LNK2038 missmatch errors`说

**错误 LNK2038**：`mismatch detected for '_MSC_VER': value '1600' doesn't match value '1700' in AppStates.obj`

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:09:32.550

MSVCP100.dll 是 Visual Studio 2010 的 C-Runtime。您需要将项目正确导入 VS2012。通常，在将旧项目导入 VS2012 时，系统会询问您是否要转换它。

# jquery - 带有可拖动可排序项目的 Jquery Selectbox 控件

> ID：14892284
> 
> 赞同：0
> 
> 时间：2013-02-15T10:06:50.567
> 
> 标签：jquery, draggable, drop-down-menu

JQuery SelectBox控件中如何支持*拖动项目*来改变元素的顺序？

```
 <style>
#sortable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
#sortable li { margin: 0 3px 3px 3px; padding: 0.4em; padding-left: 1.5em; font-size: 1.4em; height: 18px; }
#sortable li span { position: absolute; margin-left: -1.3em; }
 #selectable .ui-selecting { background: #FECA40; }
#selectable .ui-selected { background: #F39814; color: white; }
#selectable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
#selectable li { margin: 3px; padding: 0.4em; font-size: 1.4em; height: 18px; }
</style>

$(function() {
$( "#selectable" ).selectable();

$( "#sortable" ).sortable();
$( "#sortable" ).enableSelection();

});

<ol id="selectable">
<li class="ui-widget-content">Item 1</li>
<li class="ui-widget-content">Item 2</li>
<li class="ui-widget-content">Item 3</li>
<li class="ui-widget-content">Item 4</li>
</ol>
<ol id="sortable">
<li class="ui-widget-content">Item 1</li>
<li class="ui-widget-content">Item 2</li>
<li class="ui-widget-content">Item 3</li>
<li class="ui-widget-content">Item 4</li>
</ol> 
```

当我尝试在#sortable 上使用选择时，它不起作用。`$( "#sortable" ).selectable();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:18:03.557

好吧，除非您想自己编写自定义函数，否则问题是，您的可排序列表中有 2 个鼠标事件。您可以做的是添加 `handle`这样的可排序功能：

```
$( "#sortable" )
.sortable({ handle: ".handle" })
.selectable() 
```

现在您可以使用 css 来放置句柄。我在 jquery 论坛中找到了一个很好的例子：http: [//jsbin.com/aweyo5/1/edit](http://jsbin.com/aweyo5/1/edit)

可能是结合这两个功能的最佳方式。

# magento - Magento：将产品属性集分配给类别中的每个产品

> ID：14892286
> 
> 赞同：0
> 
> 时间：2013-02-15T10:06:54.610
> 
> 标签：magento, attributes, categories

我正在使用 Magento 建立一个新网站，我有 3 个顶级类别（服装、鞋类和配饰）。我需要将属性集应用于放置在这些类别中的每个产品，以便用户可以搜索设计师、尺寸和颜色（以后可能还有其他）。

如果将产品放置在特定类别中，是否可以自动将属性集分配给产品，还是必须先分配然后再放入类别中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:20:44.830

对于不存在的产品，您必须在创建时选择一个属性集。那么为什么不直接设置好的呢？

对于现有产品，您必须创建一个脚本来更改产品的属性集，因为您无法在后端执行此操作。

如果您希望它完全自动化，您可以使用观察者来处理，观察产品创建和产品保存，以便在每次类别更改时将其设置在正确的属性集中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T10:20:16.090

您只能在产品创建期间将产品分配给**属性集。**

# ruby-on-rails - 重新设置 Rails 应用程序的权限是否正确？

> ID：14892289
> 
> 赞同：6
> 
> 时间：2013-02-15T10:06:57.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我将新用户命名为“rails”
然后将所有目录和文件的所有者和组设置为“rails”

我确实有应用程序`/var/www/html/app`

所以我应该这样做`$ cd /var/www/html/app`并执行这个？

```
find . -type d | xargs chmod 0755 and find . -type f | xargs chmod 0644 
```

是否会为所有内容设置权限，一切都会好起来的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T10:17:30.360

假设Rails 应用程序`/var/www/html/app`的`app`文件夹位于`/var/www/html`，您应该正在运行

`cd /var/www/html`

`find . -type d | xargs chmod 0755`

`find . -type f | xargs chmod 0644`

您可能在字面上错误地解释了“和”。

# java - java代码如何读取csv文件中的空值

> ID：14892291
> 
> 赞同：2
> 
> 时间：2013-02-15T10:07:02.407
> 
> 标签：java, csv

我在包含多行的文件中有 csv。如果第一列值没有，则它给出错误并且 m 无法插入数据库。ex 如果行是 :130,1,datafile8.csv, 2007 ,17,List_date 读取 n 插入没有问题，但如果行是：,0,datafile8.csv,Bihar,7,list_Left ,无法读取 n 插入 .how在上面的行中插入null。所以我可以在数据库中插入dis行。

```
String keyword = "celldescription.csv";
File makefile = new File(keyword);
  BufferedReader r2 = new BufferedReader(new FileReader(makefile));
  strLine1 = r2.readLine();
   System.out.println (strLine1);
   String r="0";int r1=0;

  while((strLine1=r2.readLine())!=null)
   {
  System.out.println (strLine1);

  StringTokenizer st2 = new StringTokenizer(strLine1, ",");
  // Print the content on the console

        String cellvalue = st2.nextToken();          

        String position = st2.nextToken();

        String Docid=st2.nextToken();

        String Word=st2.nextToken();

        String Count=st2.nextToken();

        String List_Entry=st2.nextToken();

        String tab3="insert into description(cellvalue,position,Docid,Word,Count,List_Entry) values(?,?,?,?,?,?)";
        ps = connection.prepareStatement(tab3);
        ps.setString (1,cellvalue );
        ps.setString (2,position );
        ps.setString (3,Docid);
        ps.setString (4,Word );
        ps.setString (5,Count );
        ps.setString (6,List_Entry );
        ps.executeUpdate();

 }//end of while

  r2.close();

 System.out.println("Data is inserted");

        }//try closed** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:15:46.530

当您`String strLine1`以逗号（，）开头时，`StringTokenizer`如果它在开始或结束甚至介于两者之间，则省略空字符串。

前任 -`,0,datafile8.csv,Bihar,7,list_Left`

令牌->`"0" - "datafile8.csv" - "Bihar" - "7" and "list_Left"`

最好用逗号（，）分割字符串。前任 -

```
String[] str = strLine1.split(",",-1); 
```

字符串 [] ->`["","datafile8.csv","Bihar","7" and "list_Left"]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:25:57.817

您可能需要考虑使用 java 库来处理 csv 文件。 [OpenCSV](http://opencsv.sourceforge.net/)就是其中之一，它对我帮助很大。

它的一些特点：

> *   每行任意数量的值
> *   忽略引用元素中的逗号
> *   处理带有嵌入回车的引用条目（即跨越多行的条目）
> *   可配置的分隔符和引号字符（或使用合理的默认值）
> *   一次阅读所有条目，或使用迭代器样式模型
> *   从 String[] 创建 csv 文件（即嵌入引号字符的自动转义）

# web-applications - 使用 dojo 如何正确捕获移动设备上的触摸事件？

> ID：14892294
> 
> 赞同：0
> 
> 时间：2013-02-15T10:07:18.813
> 
> 标签：web-applications, mobile, dojo

我在一个简单的网页上嵌入了一个 dojox.mobile.valuepicker。valuepicker 在任何桌面浏览器上都可以正常工作，但在 iPad 或 Android 平板电脑上它会在浏览器中表现出一些奇怪的行为。如果您使用 + 和 - 按钮增加或减少 iPad 上的值，则从小部件返回的值始终比 valuepicker 中显示的值大 1 或小 1（如果您增加小部件返回的值小 1比小部件显示的值，再减少一个）。我已经在具有不同操作系统版本的多台 iPad 上尝试过这个。这是我的代码。

```
 var widgetValueIs = null; 
                    widgetToTest= dijit.byId("rateMeasurement"); 
                    widgetToTest.on("touchend, click, change", function() { 
                        widgetValueIs = dijit.byId('rateMeasurement').get('value'); 
                        if (widgetValueIs >= 12 && widgetValueIs <= 20){ 
                         domAttr.set("rateScore", "innerHTML", widgetValue); 
                        } else if (widgetValueIs >= 9 && widgetValueIs <= 11){ 
                         domAttr.set("rateScore", "innerHTML", widgetValue); 

                        } else { 
                         domAttr.set("rateScore", "innerHTML", widgetValue); 
                        } 
                     }); 
```

我假设这与我在更新选择器值之前发生的捕获有关，但是我如何确保在更新**后**检索到该值？

谢谢，斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:15:14.677

好的，从我能够拼凑的内容来看，Dojo 触摸事件处理似乎内置了一个延迟机制（用于处理双点触摸和缩放类型的手势）。因此，为了确保我从更新的小部件中获得正确的值，我在触发触摸事件后运行了一个小延迟（250 毫秒）。这现在从 dojox 移动小部件中获取正确的值。

```
'var widgetValueIs = null; 
                widgetToTest= dijit.byId("rateMeasurement"); 
                widgetToTest.on("touchend, click, change", function() { 
                // Add a delay to compensate for Dojo's touch event handling 
                   setTimeout(function() {
                    widgetValueIs = dijit.byId('rateMeasurement').get('value'); 
                    if (widgetValueIs >= 12 && widgetValueIs <= 20){ 
                     domAttr.set("rateScore", "innerHTML", widgetValue); 
                    } else if (widgetValueIs >= 9 && widgetValueIs <= 11){ 
                     domAttr.set("rateScore", "innerHTML", widgetValue); 

                    } else { 
                     domAttr.set("rateScore", "innerHTML", widgetValue); 
                    } 
                   }, 250);
                 }); ' 
```

**看来我需要延迟，因为我有一些处理会在小部件触摸事件触发后立即对小部件值执行。**以上对我有用，但我确定是否有一些时髦的 Dojo 方式来处理这个问题。

# bash - BASH - 使用相同变量的多个线程

> ID：14892295
> 
> 赞同：0
> 
> 时间：2013-02-15T10:07:21.293
> 
> 标签：bash, shell, parallel-processing, synchronization

让我们假设以下情况：

```
function add_to_list
{
    thelist="$thelist $$"
}

for i in $(seq 1 100); do
    add_to_list&
done

wait
echo "The list: $thelist" 
```

这显然不能正常工作，因为线程正在访问同一个变量 - 应该如何正确完成

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:09:30.810

Bash 不支持线程。只有子进程。并且不可能在子流程中更改父流程的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T23:59:44.470

您可以使用处理并发更新的共享存储，例如数据库。

这是一个基于[sqlite3](http://www.sqlite.org/)的示例：

```
function create_table
{
  sqlite3 thelist <<-%
  drop table t;
  create table t(one varchar(255));
  %
}

function add_to_list
{
  sqlite3 thelist <<-%
  .timeout 60000
  insert into t values('$$');
  %
}

function dump_list
{
  sqlite3 thelist <<-%
  select * from t;
  %
}

create_table
for i in $(seq 1 100); do
    add_to_list&
done

wait
thelist="$(dump_list)"
echo "The list: $thelist" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T11:29:53.657

在我看来，您将线程和子处理语义混为一谈，尤其是希望更新变量。

您可以使用命名管道来在进程之间进行通信。

```
 $ mkfifo mypipe 

 $ cat < mypipe

 $ seq 1 10 > mypipe 
```

这使得`cat`打印序列。

```
bash-3.2$ cat always.sh

while : ; do
    cat < mypipe
done 
```

* * *

```
bash-3.2$ seq 1 100  > mypipe & seq 100 200  > mypipe & seq 200 300 > mypipe & 
```

从`always.sh`1 到 300 按顺序创建。

我不确定写入同一命名管道的多个进程是否安全同步。

# css - 悬停菜单 - 活动菜单 - CSS

> ID：14892306
> 
> 赞同：1
> 
> 时间：2013-02-15T10:08:01.133
> 
> 标签：css, menu

我第一次使用[coda 滑块制作了一个 jquery 滑块](http://jqueryfordesigners.com/demo/coda-slider.html)。

但我想自定义菜单，我想要一个小箭头，当你悬停它并且它处于活动状态时，它会显示在*li a的顶部。*

我将如何做到这一点？我应该使用图像吗？或者我可以使用css3实现效果吗？

```
<ul class="navigation">
<li><a href="#sites">Sites</a></li>
<li><a href="#files">Files</a></li>
<li><a href="#editor">Editor</a></li> 
```

```
<style>
.navigation {
padding:0px;
margin-bottom:90px;
}

ul.navigation li {
list-style-type:none;
}

ul.navigation li a {
text-decoration:none;
float:left;
width:254px;
height:50px;
display:block;
background-color:#ccc;
text-align:center;
line-height:40px;
}

ul.navigation li a:hover {
background-color:#666;
  /*there should be some sort of background image here or css3? */
}

.active {
   /*there should be some sort of background image here or css3? */
}
<style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:14:03.300

```
 ul.navigation li a:active {  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:10:29.863

```
.selected:hover {
  /* you can use CSS3 to make arrows or image both */
} 
```

经过分析，我观察到，该插件将`.selected`类添加到`li`被选中的元素中。因此，您还可以使用 CSS3 通过使用`:after`和`:before`伪类来制作箭头，`display:none`并且仅在`.selected`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:22:39.763

```
ul.navigation > li:hover > a,
ul.navigation > li > a:active,
ul.navigation > li > a.selected {
    /* do whatever */
} 
```

以防万一您有子菜单，我使用了直接后代选择器 (>)。

# php - 如何在 php 中使用 Curl 发布数据？

> ID：14892309
> 
> 赞同：1
> 
> 时间：2013-02-15T10:08:05.703
> 
> 标签：php, web-services, curl, restler

我已经在restler 框架中创建了Web 服务，我正在尝试使用我创建的客户端库的php 中的curl 插入数据。

`api.php`

```
/**
     * Manually routed method. we can specify as many routes as we want
     *
     * @url POST addcomment/{token}/{email}/{comment}/{story_id}
     */
    function addComment($token,$email,$comment,$story_id){
        return $this->dp->insertComment($token,$email,$comment,$story_id);
    } 
```

用于客户的测试目的：`testing.php`

```
$data_string = "token=900150983cd24fb0d6963f7d28e17f72&email=kamal@gmail.com&comment=commentusingcurl&story_id=2";                                                                                   

$ch = curl_init('http://localhost/Restler/public/examples/news/addcomment');                                                                      
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");                                                                     
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);                                                                  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);                                                                      
//curl_setopt($ch, CURLOPT_HTTPHEADER,array("Content-Type : text","Content-lenght:".strlen($data_string)));                                                                                                                                     
$result = curl_exec($ch); 
```

但它正在抛出**404**。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:20:44.127

```
//curl_setopt($ch, CURLOPT_HTTPHEADER,array("Content-Type : text","Content-lenght:".strlen($data_string))); 
```

**注意：**取消注释该行可能是。

请参阅使用 curl 发布数据的示例。

```
function post($requestJson) {

        $postUrl = $this->endpoint."?access_token=".$this->token;

        //Get length of post
        $postlength = strlen($requestJson);

        //open connection
        $ch = curl_init();

        //set the url, number of POST vars, POST data
        curl_setopt($ch,CURLOPT_URL,$postUrl);
        curl_setopt($ch,CURLOPT_POST,$postlength);
        curl_setopt($ch,CURLOPT_POSTFIELDS,$requestJson);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

        $response = curl_exec($ch);

        //close connection
        curl_close($ch);

        return $response;
    } 
```

查看一些链接以获取更多信息，

[使用 PHP CURL 执行 HTTP POST](http://davidwalsh.name/curl-post)

[使用 PHP 和 CURL 提交表单帖子](http://www.electrictoolbox.com/php-curl-form-post/)

[使用 cURL 和 PHP 发布到 URL](http://bavotasan.com/2011/post-url-using-curl-php/)

[使用 PHP 设置与 POST 数据的简单 cURL 连接](http://digipiph.com/blog/setup-simple-curl-connection-post-data-using-php)

**编辑：**

[Restler 总是返回错误 404 not found](https://stackoverflow.com/questions/12046207/restler-always-returning-error-404-not-found)

可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T07:08:49.267

您不应该将所有参数映射到 URL，

```
/**
 * Manually routed method. we can specify as many routes as we want
 *
 * @url POST addcomment/{token}/{email}/{comment}/{story_id}
 */
function addComment($token,$email,$comment,$story_id){
    return $this->dp->insertComment($token,$email,$comment,$story_id);
} 
```

通过这样做，API 只能接受 URL，例如

```
http://localhost/Restler/public/examples/news/addcomment/900150983cd24fb0d6963f7d28e17f72/kamal@gmail.com/commentusingcurl/2 
```

将您的 API 方法更改为

```
/**
 * Manually routed method. we can specify as many routes as we want
 *
 * @url POST addcomment
 */
function addComment($token,$email,$comment,$story_id){
    return $this->dp->insertComment($token,$email,$comment,$story_id);
} 
```

那么您的 cURL 示例应该可以正常工作

```
$data_string = "token=900150983cd24fb0d6963f7d28e17f72&email=kamal@gmail.com&comment=commentusingcurl&story_id=2";

$ch = curl_init('http://localhost/Restler/public/examples/news/addcomment');                                                                      
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");                                                                     
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);                                                                  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);                                                                      
//curl_setopt($ch, CURLOPT_HTTPHEADER,array("Content-Type : text","Content-lenght:".strlen($data_string)));                                                                                                                                     
$result = curl_exec($ch); 
```

# google-maps - 将 iframe 谷歌地图设为黑白

> ID：14892310
> 
> 赞同：12
> 
> 时间：2013-02-15T10:08:11.107
> 
> 标签：google-maps, google-maps-api-3

我在 iframe 中使用了谷歌地图。

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.co.in/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=Madurai,+Tamil+Nadu&amp;aq=0&amp;oq=madursi&amp;sll=10.782836,78.288503&amp;sspn=5.674603,10.755615&amp;ie=UTF8&amp;hq=&amp;hnear=Madurai,+Tamil+Nadu&amp;t=m&amp;z=12&amp;ll=9.925201,78.119775&amp;output=embed"></iframe><br /><small><a href="https://maps.google.co.in/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=Madurai,+Tamil+Nadu&amp;aq=0&amp;oq=madursi&amp;sll=10.782836,78.288503&amp;sspn=5.674603,10.755615&amp;ie=UTF8&amp;hq=&amp;hnear=Madurai,+Tamil+Nadu&amp;t=m&amp;z=12&amp;ll=9.925201,78.119775" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

如何以黑白显示谷歌地图？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-03-17T17:51:09.430

它确实有效，但您还应该添加不同浏览器所需的灰度格式。

`<div style="-webkit-filter: grayscale(100%); filter: grayscale(100%);">`

这是小提琴：http: [//jsfiddle.net/j9p9w62f/](http://jsfiddle.net/j9p9w62f/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T10:15:33.520

按[权利](https://developers.google.com/maps/terms "谷歌地图 API 服务条款")，制作黑白谷歌地图的唯一方法是使用他们的[Styled Maps api](https://developers.google.com/maps/documentation/javascript/styling)

您的帖子被标记为 API，所以我认为非 iframe 选项对您来说是可以的。如果包含方法不固定，这可能会给你一个替代的想法。也可以使用样式化的地图来生成一个谷歌[静态地图](https://developers.google.com/maps/documentation/staticmaps/index)，这也是 iFrame 友好的。

您还可以查看基于 Open Street Maps 的[Stamen maps](http://maps.stamen.com/#toner/12/37.7706/-122.3782)，但可以用作 Google Maps 的叠加层。仅通过精心设计的 iframe url 不可能实现交付形式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-17T08:27:17.783

尝试使用

```
<iframe class="map" width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps(...)"></iframe>

.map {
        -webkit-filter: grayscale(100%);
        -moz-filter: grayscale(100%);
        -ms-filter: grayscale(100%);
        -o-filter: grayscale(100%);
         filter: grayscale(100%);
} 
```

这将有助于

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-02T10:33:45.330

**这是通过使用一些 css 来实现的**

**这是工作代码**

```
.map {
         filter: grayscale(100%);         
}
```

```
<iframe class="map" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4917.1193047590605!2d4.4690507720313!3d51.96022102967837!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47c5cb67ae23c02d%3A0xdac4c06bc7904d2!2sRododendronplein+10%2C+3053+ES+Rotterdam%2C+Nederland!5e0!3m2!1snl!2ses!4v1541007683407" width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-11T11:57:41.180

Add a `<div>` arround the `<iframe>` and stle it as:

```
webkit-filter: grayscale(100%); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-09T21:43:04.740

您是否尝试过[https://mapstyle.withgoogle.com/](https://mapstyle.withgoogle.com/)？您可以根据需要对其进行配置，并准备好在您的代码中使用的 url 或 json。

# android - 如何将 Couchbase mobile 集成到我的 Android Phonegap 项目中

> ID：14892311
> 
> 赞同：0
> 
> 时间：2013-02-15T10:08:13.210
> 
> 标签：android, cordova, couchbase

背景故事——

我的应用程序需要一个用户数据库。我想将用户数据库存储在 Cloudant 上，并将单个用户存储在应用程序的本地数据库中，以便他们可以在离线时更新其详细信息。两个数据库应在不同时间同步。我认为 Couchbase Mobile 有能力做到这一点。

实际问题——

[按照此处](https://github.com/couchbase/Android-Couchbase)的安装说明，我在修改主要活动（“开始 Couchbase”）时卡住了，此时我认为说明应该有所不同，因为我使用的是 Phonegap。我不是太精通Java，有人可以帮忙吗？

亲切的问候丹尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T17:23:39.653

Couchbase Mobile 已被[TouchDB](http://touchdb.org/)取代，但因为 Phonegap 在 JavaScript 中运行，我建议使用[PouchDB](http://pouchdb.com/)，因为它是为该环境构建的。要在项目中安装 PouchDB，只需像任何 JavaScript 文件一样包含它：

```
<script src="path/to/pouchdb.js"></script> 
```

然后，要将 PouchDB 连接到您的 Cloudant 数据库，请在 JavaScript 中执行以下操作：

```
var pouchdb = Pouch('https://[username]:[password]@[username].cloudant.com/[database]') 
```

但是，这会在您的前端暴露您的密码，这是您永远不应该这样做的。相反，请[使用 CouchDB 研究每个用户的安全性](https://stackoverflow.com/questions/4055450/couchdb-authorization-on-a-per-database-basis)。

希望有帮助！

# c - 双重的C解释

> ID：14892312
> 
> 赞同：1
> 
> 时间：2013-02-15T10:08:14.913
> 
> 标签：c, double, scanf

我目前正在为学校做一个项目，但我被一个问题阻止了。基本上分配是什么：我们得到一个文件，例如： e 18.91, n 10.03 没有点，所以所有这些值，26天，显示一个字母的使用频率。

我需要做的是使用 fscanf 对这些文件进行排序。我想要一个包含字符，另一个我想要数字。我一直在尝试以下事情：

```
fp2 = fopen("frequencyTable.txt", "r");
if(fp2 != NULL) {
    while (fscanf(fp, "%c %d", &currentLetter[counterTwo], &freqLetter) == 2){
        printf("%c AND %d\n", currentLetter[counterTwo], freqLetter);
        counterTwo++;
    }   
    exit(0);
} 
```

但正如我注意到我正在实施的 fscanf 没有看到数字的第二部分，所以从点的右侧，作为双因此停止循环。有什么我错过的吗？我应该得到的是第一个字母，所以 currentLetter，第二个是整数，而不是打破循环并得到半个数字

有没有人有线索或提示我在哪里具体看。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:09:01.997

使用`%lf`格式说明符`double`

```
fscanf(fp, "%c %lf", &currentLetter[counterTwo], &freqLetter)
//              ^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:13:36.650

> e 18.91, n 10.03**不带点**

您将不得不使用`fscanf`这些行，用指针遍历它并用点替换第二个空格，然后`sscanf`在该字符串上使用。

# .htaccess - 为“所有”域创建 htaccess

> ID：14892313
> 
> 赞同：0
> 
> 时间：2013-02-15T10:08:19.190
> 
> 标签：.htaccess, url-rewriting

您好，我想让 htaccess 重写，这我所拥有的东西很好，但前提是它在服务器上，但是当我在本地工作时，我每次都必须更改 htaccess。所以我的问题是我是否可以更改它只看域之后的部分。

这是我现在得到的 htaccess

```
#RewriteEngine On
#RewriteCond %{HTTP_HOST} !^www.domain.nl$ [NC]
#RewriteRule ^(.*)$ http://www.domain.nl/index.php/home$1 [L,R=301]

#ErrorDocument 404 /404.html 
```

# c# - Linq：返回列表包含列表

> ID：14892316
> 
> 赞同：-2
> 
> 时间：2013-02-15T10:08:33.357
> 
> 标签：c#, linq, list

我有一堂课：

```
public class BigClass
{
    public int Id { get; set; }
    public string Name { get; set; }
    ...
    public List<LittleClass> LittleClassList { get; set; }
} 
```

是否可以在一个请求中将其实例列表返回给数据库？这种方法调用了许多对数据库的请求：

```
List<BigClass> data = context.Table1_Name ...

foreach(var item in data)
{
    item.LittleClassList = context.Table2_Name ...
} 
```

首选 Lambda 语法。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:52:23.757

```
from big in context.TableA
from little in big.LittleClassList
select little; 
```

并以扩展格式

```
Context.TableA.Where(...).SelectMany(x=>x.LittleClassList); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T10:12:56.933

```
 List<LittleClass> littleClassesOfListBigClasses = new List<LittleClass>();

   context.BigClass.ToList().ForEach(e=>littleClassesOfListBigClasses.AddRange(e.LittleClassList)); 
```

**专为`Dave A`.**

我认为 OP 想要的是：他想`LittleClass`通过一个 lambda 表达式获取存储在 db 中的所有 es。

关于我的代码如何工作的说明：

1）我使用EF（实体框架）。如果你不知道它是什么，你可以 [在这里](http://msdn.microsoft.com/en-us/data/ef)阅读信息。在这个问题中，我看到 OP 知道什么是 EF 以及如何使用它，所以我觉得不需要解释。2）我`BigClass`从数据库中的表中获取所有数据并将其作为 List（在 1 个查询中） 3）我使用 ForEach（来自 Linq）遍历返回的`BigClass`列表并将所有`LittleClass`es 添加到`littleClassesOfListBigClasses`

还请注意，您可以在`Where`之前添加 to`ToList`以获取存储在`BigClass`表中的并非所有数据，而只是一部分，它看起来像这样：

```
context.BigClass.Where(some lambda-expression).ToList() 
```

所以我的答案现在很清楚了吗？

# java - JavaFX 应用程序以传统方式工作，但不在网络启动或浏览器启动中

> ID：14892320
> 
> 赞同：2
> 
> 时间：2013-02-15T10:08:48.453
> 
> 标签：java, netbeans, certificate, javafx, keystore

你好 StackOverflowers...

这是我的第一篇文章。好的，这就是问题所在：

我正在处理一个**JavaFX**项目，一个“在线测验应用程序”。我正在使用**NetBeans7.3 RC1**并已将其设置为**构建自包含包**，如下所示：

```
<!-- Self Contained Application -->
    <target name="-post-jfx-deploy">
        <fx:deploy width="${javafx.run.width}" height="${javafx.run.height}"
                   nativeBundles="all"
                   outdir="${basedir}/${dist.dir}" outfile="${application.title}">
            <fx:application name="${application.title}"
                            mainClass="${javafx.main.class}"/>
            <fx:resources>
                <fx:fileset dir="${basedir}/${dist.dir}" includes="*.jar"/>
            </fx:resources>
            <fx:info title="${application.title}" vendor="${application.vendor}"/>
        </fx:deploy>
    </target>
<!-- --> 
```

该应用程序基本上具有某种形式来输入有关问题和选项的详细信息以及附加到**FileChooser**的按钮以选择问题/选项的图像。然后，当一切都完成后，用户可以通过序列化数据来生成 XML，并通过再次从 FileChooser 中选择它来将其保存在某个目录中。有几个场景，其中一个包含 FileChooser。

**从 NetBeans 和命令提示符启动应用程序时，该应用程序运行良好：**

```
java -jar filename.jar 
```

但是当作为 Web-Start 或在浏览器中启动时，它会一直工作，直到 FileChooser 出现并且没有其他按钮响应。然后我无法移动到下一个场景。

我知道在部署之前对**jar 进行签名。**所以在谷歌搜索了一下之后，我才知道我可以从 Java 的**keytool****生成一个密钥库**和一个自签名证书。我就是这样做的：

 **```
keytool -genkey -alias myAlias -keyalg RSA -validity 360 -keysize 2048 -keystore keystore.jks -dname "CN=myDomain.com,OU=something, O=something, L=something, ST=something, C=something" 
```

并**生成**如下证书：

```
keytool -certreq -alias myAlias -file certificate.csr -keystore keystore.jks 
```

接下来，我使用 NetBeans 通过设置项目 -> 属性 -> 部署来签署我的 jar，以使用我的 keystore.jks 文件。

**但问题仍然存在。**任何人都可以提供在这里实际工作的解决方案吗？具体来说，我想知道我是否在这里遗漏了什么。那真的很有帮助。

这是完整的 Java 控制台消息： ***您可能会忽略***java.io.FileNotFoundException: .\resources\DBDetails.properties（系统找不到指定的路径）但其余部分应该没问题，但我看到有**ClassNotFoundException** 不知道为什么会这样，虽然所有的罐子都在那里。

谢谢你。

```
Match: beginTraversal
Match: digest selected JREDesc: JREDesc[version 1.6+, heap=-1--1, args=null, href=http://java.sun.com/products/autodl/j2se, sel=false, null, null], JREInfo: JREInfo for index 0:
    platform is: 1.7
    product is: 1.7.0_13
    location is: http://java.sun.com/products/autodl/j2se
    path is: C:\Program Files\Java\jre7\bin\javaw.exe
    args is: null
    native platform is: Windows, x86 [ x86, 32bit ]
    JavaFX runtime is: JavaFX 2.2.5 found at C:\Program Files\Java\jre7\
    enabled is: true
    registered is: true
    system is: true

    Match: ignoring maxHeap: -1
    Match: ignoring InitHeap: -1
    Match: digesting vmargs: null
    Match: digested vmargs: [JVMParameters: isSecure: true, args: ]
    Match: JVM args after accumulation: [JVMParameters: isSecure: true, args: ]
    Match: digest LaunchDesc: file:/D:/My_Projects/JavaFX/OnlineQuizzingApp_JavaFX/dist/Online Quizzing App.jnlp
    Match: digest properties: []
    Match: JVM args: [JVMParameters: isSecure: true, args: ]
    Match: endTraversal ..
    Match: JVM args final: 
    Match: Running JREInfo Version    match: 1.7.0.13 == 1.7.0.13
     Match: Running JVM args match: have:<>  satisfy want:<>
java.io.FileNotFoundException: .\resources\DBDetails.properties (The system cannot find the path specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at com.sohail.online_quizzing_app.BootStrap.Initialize(BootStrap.java:34)
    at com.sohail.online_quizzing_app.OnlineQuizzingApp.start(OnlineQuizzingApp.java:57)
    at com.sun.javafx.applet.FXApplet2$1.run(FXApplet2.java:131)
    at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:179)
    at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:176)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:176)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
    at java.lang.Thread.run(Unknown Source)
CacheEntry[file:/D:/My_Projects/JavaFX/OnlineQuizzingApp_JavaFX/dist/Online Quizzing App.jnlp]: updateAvailable=true,lastModified=Fri Feb 15 15:44:02 IST 2013,length=1034
CacheEntry[file:/D:/My_Projects/JavaFX/OnlineQuizzingApp_JavaFX/dist/Online Quizzing App.jnlp]: updateAvailable=true,lastModified=Fri Feb 15 15:44:02 IST 2013,length=1034
CacheEntry[file:/D:/My_Projects/JavaFX/OnlineQuizzingApp_JavaFX/dist/Online Quizzing App.jar]: updateAvailable=true,lastModified=Fri Feb 15 15:43:48 IST 2013,length=231526
java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1440)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:69)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:28)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Node.fireEvent(Node.java:6863)
    at javafx.scene.control.Button.fire(Button.java:179)
    at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:193)
    at com.sun.javafx.scene.control.skin.SkinBase$4.handle(SkinBase.java:336)
    at com.sun.javafx.scene.control.skin.SkinBase$4.handle(SkinBase.java:329)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:64)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:33)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3328)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3168)
    at javafx.scene.Scene$MouseHandler.access$1900(Scene.java:3123)
    at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1563)
    at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2265)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:250)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:173)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:292)
    at com.sun.glass.ui.View.handleMouseEvent(View.java:528)
    at com.sun.glass.ui.View.notifyMouse(View.java:922)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.reflect.misc.Trampoline.invoke(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
    at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1435)
    ... 52 more
Caused by: java.lang.NoClassDefFoundError: org/apache/commons/codec/binary/Base64
    at com.sohail.online_quizzing_app.methods.ManageImages.read(ManageImages.java:45)
    at com.sohail.online_quizzing_app.controller.AdminAddQuestionController.selectImage(AdminAddQuestionController.java:84)
    ... 62 more
Caused by: java.lang.ClassNotFoundException: org.apache.commons.codec.binary.Base64
    at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
    at sun.plugin2.applet.JNLP2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 64 more
java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1440)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:69)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:28)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Node.fireEvent(Node.java:6863)
    at javafx.scene.control.Button.fire(Button.java:179)
    at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:193)
    at com.sun.javafx.scene.control.skin.SkinBase$4.handle(SkinBase.java:336)
    at com.sun.javafx.scene.control.skin.SkinBase$4.handle(SkinBase.java:329)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:64)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:33)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3328)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3168)
    at javafx.scene.Scene$MouseHandler.access$1900(Scene.java:3123)
    at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1563)
    at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2265)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:250)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:173)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:292)
    at com.sun.glass.ui.View.handleMouseEvent(View.java:528)
    at com.sun.glass.ui.View.notifyMouse(View.java:922)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.reflect.misc.Trampoline.invoke(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
    at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1435)
    ... 52 more
Caused by: java.lang.NoClassDefFoundError: org/simpleframework/xml/Serializer
    at com.sohail.online_quizzing_app.controller.AdminAddOptionController.buttonEventSave(AdminAddOptionController.java:114)
    ... 62 more
Caused by: java.lang.ClassNotFoundException: org.simpleframework.xml.Serializer
    at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
    at sun.plugin2.applet.JNLP2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 63 more
java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1440)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:69)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:28)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Node.fireEvent(Node.java:6863)
    at javafx.scene.control.Button.fire(Button.java:179)
    at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:193)
    at com.sun.javafx.scene.control.skin.SkinBase$4.handle(SkinBase.java:336)
    at com.sun.javafx.scene.control.skin.SkinBase$4.handle(SkinBase.java:329)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:64)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:33)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3328)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3168)
    at javafx.scene.Scene$MouseHandler.access$1900(Scene.java:3123)
    at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1563)
    at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2265)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:250)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:173)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:292)
    at com.sun.glass.ui.View.handleMouseEvent(View.java:528)
    at com.sun.glass.ui.View.notifyMouse(View.java:922)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.reflect.misc.Trampoline.invoke(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
    at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1435)
    ... 52 more
Caused by: java.lang.NoClassDefFoundError: org/simpleframework/xml/Serializer
    at com.sohail.online_quizzing_app.controller.AdminAddOptionController.buttonEventSave(AdminAddOptionController.java:114)
    ... 62 more
Caused by: java.lang.ClassNotFoundException: org.simpleframework.xml.Serializer
    at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
    at sun.plugin2.applet.JNLP2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 63 more
java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1440)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:69)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:28)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Node.fireEvent(Node.java:6863)
    at javafx.scene.control.Button.fire(Button.java:179)
    at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:193)
    at com.sun.javafx.scene.control.skin.SkinBase$4.handle(SkinBase.java:336)
    at com.sun.javafx.scene.control.skin.SkinBase$4.handle(SkinBase.java:329)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:64)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:33)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3328)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3168)
    at javafx.scene.Scene$MouseHandler.access$1900(Scene.java:3123)
    at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1563)
    at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2265)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:250) 
```**

# javascript - Javascript 在文本框中输入值时修剪空格

> ID：14892323
> 
> 赞同：5
> 
> 时间：2013-02-15T10:08:52.280
> 
> 标签：javascript, asp.net

我目前正在尝试使用 javascript 函数在另一个中显示一个文本框值

```
function fillTextbox() {
            var txtCompanyName = document.getElementById("txtCompanyName").value;
            document.getElementById("txtSecureSite").value = txtCompanyName;
        } 
```

我成功地做到了这一点，但现在我想在我的用户输入带空格的名称时修剪空格。请帮助，因为我是 javascript 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T10:12:14.827

使用[string.trim()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)

```
document.getElementById("txtSecureSite").value = txtCompanyName.toString().trim(); 
```

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)

> 如果 String.trim 本机不可用，则在任何其他代码之前运行以下代码将创建 String.trim。

```
if(!String.prototype.trim) {
  String.prototype.trim = function () {
    return this.replace(/^\s+|\s+$/g,'');
  };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T10:11:17.293

您可以像这样修剪任何字符串值：

```
" string ".trim(); // outputs: "string" 
```

基于：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)

或`jQuery.trim()`改用：

```
$.trim(" string "); // outputs: "string" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:12:37.840

```
var orig = "   foo  ";
alert(orig.trim()); 
```

在你的情况下：

```
var txtCompanyName = document.getElementById("txtCompanyName").value;
txtCompanyName  = txtCompanyName.toString().trim(); 
```

请参阅javascript 中的[Trim()](http://www.javascripter.net/faq/trim.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T10:13:04.403

用于`replace(/(^\s+|\s+$)/g, '')`删除字符串开头和结尾的空格。

```
 function fillTextbox() {
                var txtCompanyName = document.getElementById("txtCompanyName").value;
                var company = txtCompanyName.replace(/(^\s+|\s+$)/g, '');
                document.getElementById("txtSecureSite").value = company;
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T10:15:56.427

尝试 ：

```
function fillTextbox() {
            var txtCompanyName = document.getElementById("txtCompanyName").value;
            var company = txtCompanyName.replace(/\s/g, "");
            document.getElementById("txtSecureSite").value = company;
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-25T03:19:05.457

保持简单，试试这个

```
var CompanyName = document.getElementById("txtCompanyName"),
CompanyNameTrimmed = CompanyName.value.trim(), 
```

# java - 当服务器连接中断时，如何向浏览器提供提示？

> ID：14892326
> 
> 赞同：1
> 
> 时间：2013-02-15T10:09:14.837
> 
> 标签：java, javascript, ajax, jsp, servlets

在我的聊天应用程序中，我使用的是**主**服务器和**辅助**服务器。

**我的应用程序通过主服务器协议**加载和启动以发送和接收消息。

如果**主服务器协议**出现故障，我必须将聊天应用程序重新连接到**辅助协议**才能继续聊天。

直到这个工作正常。

但是我必须在 JSP 页面中向浏览器提示**“连接服务器已更改” 。**

我怎样才能做到这一点 ？

我的用于检测和更改服务器的**java 代码**如下

```
 if(ApplicationInfo.flexProtocol.getState() == ChannelState.Closed ){

            System.out.println("Connection protocol closed ...");
            System.out.println("Old Connection  FlexProtocol  state --->"+ApplicationInfo.flexProtocol.getState());
            try {

                ServerConnection con = SingletonPattern.getInstance();
                ApplicationInfo.flexProtocol = con.getSecondaryConnection();
                System.out.println("New Connection  FlexProtocol  state --->"+ApplicationInfo.flexProtocol.getState());
                protocol = ApplicationInfo.flexProtocol;

            } catch (Exception e) {
                e.printStackTrace();
            }
        } 
```

希望各位大侠给个好的解决方案。

提前致谢....

# c++ - 自制clang和c ++ 11错误：'std :: basic_string中没有名为'cbegin'的成员 '

> ID：14892327
> 
> 赞同：0
> 
> 时间：2013-02-15T10:09:19.870
> 
> 标签：c++, c++11, clang

[编辑2]

由于上述问题的答案并没有帮助我完全解决我的问题，我想补充一点：

使用 Homebrew 的 clang`-stdlib=libc++`对我不起作用。我无法从 Hombrew clang 中找到。我的解决方案是根据他们网页上的说明构建 libc++。然后`clang++ -I/path/to/libcxx/include -L/path/to/libcxx/lib`在导出后使用`DYLD_LIBRARY_PATH`，也可以参考 libc++ 网页上的说明。

[/编辑2]

[编辑]

查看前几条评论，我发现我有一个错误。但是 string::const_iterator 给出了同样的错误。

```
error: no member named 'cbegin' in
      'std::basic_string<char>'
    for ( string::const_iterator it = line.cbegin(); 
```

[/编辑]

我正在尝试使用 -std=c++11 编译以下代码。我正在通过自制程序使用 clang 3.2，并且我在标题中收到错误。

```
vector<string> extractWords( const string& line ) {
    string tmp;
    vector<string> words;
    int colonCount = 0;

    for ( string::iterator it = line.cbegin();
            it != line.end(); ++it ) {
        if ( isprint( *it ) && !isspace( *it ) ) {
        }
    }
...
    return words;
} 
```

这不应该与 c++11 一起使用吗？

（抱歉帖子不小心删了）

# windows - Qt 代码移植到果酱

> ID：14892332
> 
> 赞同：0
> 
> 时间：2013-02-15T10:09:28.527
> 
> 标签：windows, qt, mingw, porting, marmalade

我知道 Marmalade 非常适合 c++ 代码移植，但我想知道如何将我的 Qt 代码移植到 marmalade？

谁能说出如何将简单的“hello world”Qt 应用程序移植到果酱中？

我已经在 Windows 机器上设置了果酱的所有东西。另外我已经设置了Qt。

请在这里分享任何类型的信息或教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:27:29.440

我很确定 IwGx 及其子组件不可能，而且 s3e 可能也不可能。您可以尝试使用 IwUI，但我认为它不会起作用。

另一件事，Qt 不支持 Marmalade 支持的所有平台，因此您无法接触到您可能想要接触的客户。

我在果酱论坛上找到了这个，这可能很有用。 [http://www.madewithmarmalade.com/ru/node/57339](http://www.madewithmarmalade.com/ru/node/57339)

希望能帮助到你！

# match - 如果在整个字符串中搜索，Javascript str.match 不起作用？

> ID：14892338
> 
> 赞同：-3
> 
> 时间：2013-02-15T10:09:38.713
> 
> 标签：match

Javascript match() 在搜索整个字符串的情况下不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:35:38.213

试试这个..我认为你在函数中放错了引号

```
<body onload="myFunction()">
</body>
<script type="text/javascript"> 
function myFunction()
{
var str="entire string"; 
var n=str.match(str); // var n=str.match('entire string');
alert(n)
}
</script> 
```

# wordpress - Wordpress 错误日志在几个小时内增长了 GB

> ID：14892346
> 
> 赞同：0
> 
> 时间：2013-02-15T10:10:11.793
> 
> 标签：wordpress, error-log

我网站上的错误日志在短短几个小时内突然开始填满。就在今天下午，我找到了一个 3.5GB 的文件，那是在当天早些时候清除它之后。

似乎有人或某事试图访问图像，但目录非常奇怪，看起来像这样：

/home/sitename/public_html/wp-content/uploads/images/image.jpg/feed

该文件充满了这些 /feed 和以 error_log 结尾的奇数

关于如何阻止这些或解决问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:33:55.697

这个答案基于我以前的公司发生的类似事件：在 Wordpress 看来，这是一种“黑客”/攻击，试图将包含有害元素的图像添加到您的网站，其目的是通过您的网站的活动/流量会传播任何内容。

在我们的案例中，当我们的主机关闭 Wordpress 网站并向我们发送一封电子邮件，指出新图像可疑且可能危险时，我们被告知了这一点。

我们设法阻止它的方法是更改​​具有添加/创建内容能力的管理员或用户的访问详细信息，并且由于它位于 Linux 服务器上，我们希望获得图像保存位置的写入权限。

# maven - 如何在 Maven pdf 中包含内部版本号：pdf

> ID：14892349
> 
> 赞同：0
> 
> 时间：2013-02-15T10:10:29.353
> 
> 标签：maven, buildnumber-maven-plugin, maven-pdf-plugin

我正在尝试在使用 maven pdf 插件生成的 pdf 中包含内部版本号。我将我正在从事的项目的所有文档都写成一个 Maven 站点。这样，所有文档都与源代码一起存储。

### Pom.xml

所以在 pom.xml 我定义了 buildnumber 插件：

```
<plugin>
   <groupId>org.codehaus.mojo</groupId>
   <artifactId>buildnumber-maven-plugin</artifactId>
   <version>1.2</version>
   <executions>
     <execution>
       <phase>generate-resources</phase>
       <goals>
         <goal>create</goal>
       </goals>
     </execution>
   </executions>
   <configuration>
     <doCheck>false</doCheck>
     <doUpdate>false</doUpdate>
     <format>{0,date,yyyy-MM-dd_HH-mm}_{1}</format>
     <items>
       <item>timestamp</item>
   <item>${user.name}</item>
     </items>
   </configuration>
 </plugin> 
```

### pdf.xml

并在 pdf.xml

```
<cover>
  <coverTitle>${project.name}</coverTitle>
  <coverSubTitle>v. ${project.version}</coverSubTitle>
  <coverType>Technical documentation</coverType>
  <coverVersion>build: ${project.buildNumber}</coverVersion>
  <projectName>${project.name}</projectName>
  <projectLogo>images/telfortlogo.jpg</projectLogo>
 </cover> 
```

我什至放了资源过滤，`${basedir}/site`但它没有效果。我不断得到 ${buildNumber} 而不是 buildnumber 插件的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:17:25.793

为了获得类似的工作，我的 buildnumber 插件配置如下所示：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>buildnumber-maven-plugin</artifactId>
    <version>1.2</version>
    <executions>
        <execution>
            <phase>pre-site</phase>
            <goals>
                <goal>create</goal>
            </goals>
            <configuration>
                <doCheck>false</doCheck>
                <doUpdate>false</doUpdate>
                <format>{0,date,yyyy-MM-dd_HH-mm}_{1}</format>
                <items>
                    <item>timestamp</item>
                    <item>${user.name}</item>
                </items>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

在 pdf.xml 中：

```
<cover>
    <coverTitle>${project.name}</coverTitle>
    <coverSubTitle>v. ${project.version} build ${buildNumber}</coverSubTitle>
    <coverType>User Guide</coverType>
    <projectName>${project.name}</projectName>
</cover> 
```

我相信您的问题来自您在生成资源阶段执行 buildnumber 创建目标的事实。如果您使用`mvn pdf:pdf`or `mvn site`，则 generate-resources 将不会被执行。我的设置我已将 pdf 插件配置为在站点阶段运行：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-pdf-plugin</artifactId>
    <executions>
        <execution>
            <id>pdf</id>
            <phase>site</phase>
            <goals>
                <goal>pdf</goal>
            </goals> 
```

然后我可以在站点阶段结束时生成 pdf。

# python - 将参数传递到 os.system

> ID：14892355
> 
> 赞同：7
> 
> 时间：2013-02-15T10:11:00.040
> 
> 标签：python, argparse, os.system

我需要通过python执行以下命令。rtl2gds 是一个读取 2 个参数的工具：文件路径和模块名称

```
rtl2gds -rtl=/home/users/name/file.v -rtl_top=module_name -syn 
```

我正在通过 argparse 从用户读取文件和模块名称的路径，如下所示：

```
parser = argparse.ArgumentParser(description='Read in a file..')    
parser.add_argument('fileread', type=argparse.FileType('r'), help='Enter the file path')    
parser.add_argument('-e', help='Enter the module name', dest='module_name')    
args = parser.parse_args()    
os.system("rtl2gds -rtl=args.fileread -rtl_top=args.module_name -syn") 
```

但是当我调用 -rtl=args.fileread 时，读入 args.fileread 的文件路径不会进入 os.system。相反， args.fileread 本身被假定为文件名，并且该工具会标记错误。

我确信有一种方法可以将命令行参数读入 os.system 或其他一些函数（可能是子进程？ - 但无法弄清楚如何）。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T10:13:37.513

不要使用`os.system()`; `subprocess`绝对是要走的路。

不过，您的问题是您希望 Python 能够理解您想要插入`args.fileread`字符串。与 Python 一样伟大，它无法像那样读懂你的想法！

改用字符串格式：

```
os.system("rtl2gds -rtl={args.fileread} -rtl_top={args.module_name} -syn".format(args=args) 
```

如果要将文件名传递给另一个命令，则不应*使用*type`FileType`选项！你想要一个文件名，*而不是*一个打开的文件对象：

```
parser.add_argument('fileread', help='Enter the file path') 
```

但请使用`subprocess.call()`代替`os.system()`：

```
import subprocess

subprocess.call(['rtl2gds', '-rtl=' + args.fileread, '-rtl_top=' + args.module_name, '-syn']) 
```

如果`rtl2gds`正确实现命令行解析，则`=`是可选的，您可以改用以下调用，完全避免字符串连接：

```
subprocess.call(['rtl2gds', '-rtl', args.fileread, '-rtl_top', args.module_name, '-syn']) 
```

# c++ - 我想使用 c++ / opencv 将一些数据写入 .txt 文件

> ID：14892356
> 
> 赞同：3
> 
> 时间：2013-02-15T10:11:05.043
> 
> 标签：c++, opencv

我想将有关视频中每一帧的一些信息保存到`.txt`文件中。

信息可以是当前帧号、特征点的位置等，

我只能找到将其写入 XML/YML 文件的方法。是否可以将这些写入 .txt 文件？如果是这样，怎么办？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T10:19:35.120

你必须滚动你自己的实现。C++ 文件流的基础是

```
#include <iostream>
#include <fstream>

using namespace std;

void writeSomething()
{
    ofstream outputfile;
    outputfile.open("data.txt");
    for (int i=0; i<10;i++)
        outputfile << i << endl;
} 
```

您的问题不是很清楚，因此您最好对其进行编辑以明确您到底想要做什么。

# python - 在 Windows 7 中安装 python 模块

> ID：14892358
> 
> 赞同：1
> 
> 时间：2013-02-15T10:11:12.020
> 
> 标签：python, windows-7, module

我正在尝试在 Windows 7 ( `beautifulsoup`) 中安装 Python 模块。这是我尝试安装的第一个模块，但在`setup.py`安装命令后收到一条奇怪的消息：

```
Unable to create process using 'C:\Python33\python.exe' 
```

知道发生了什么吗？我正在使用具有本地管理员权限的用户；可能是与我的 Windows 7 中的安全策略相关的一些问题吗？还有其他安装软件包的替代方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T23:27:10.713

您必须设置环境变量：

*   右键单击计算机
*   特性
*   高级设置
*   系统属性
*   环境变量
*   添新
*   值名称 = python，变量值 = C:\users\local\bin\python33 /
*   单击确定，您将看到添加到下面的下拉窗口中的内容。

请记住，当您下载 Python 时，它会转到它自己的目录。您需要找到 python3.3exe 所在的位置，并确保一切就绪。在您的程序视图中打开 python idle 编辑器并在 >>> print ("Hello World") 中查看是否一切正常。

来自 BigMAC

# jquery - jQuery砌体。在调整大小时更新 columnWidth

> ID：14892363
> 
> 赞同：2
> 
> 时间：2013-02-15T10:11:18.727
> 
> 标签：jquery, jquery-masonry, fluid-layout

我试图弄清楚在调整浏览器窗口大小时如何更改流体砌体布局的 columnWidth。因此，当浏览器宽度小于 1300 像素时，columnWidth 会从 4 切换到 3。
这是我的 jQuery：

```
jQuery(document).ready(function() {

        jQuery('#thumb-wrap, #thumb-wrap-2').masonry({
          itemSelector: '#thumb-container-1, #thumb-container-2',
          // set columnWidth a fraction of the container width
          columnWidth: function( containerWidth ) {
            return containerWidth / 4;
          }

          });
    }); 
```

这是可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:16:18.633

如何通过窗口调整大小重新定义？

```
$(window).resize(function() {
    $('#thumb-wrap, #thumb-wrap-2').masonry({
        itemSelector: '#thumb-container-1, #thumb-container-2',
        columnWidth: function(containerWidth) {
            var num = (containerWidth > 1300) ? 4 : 3;
            return containerWidth / num;
        }
    });
}); 
```

# android - 具有并排两个按钮的线性布局 - android

> ID：14892365
> 
> 赞同：15
> 
> 时间：2013-02-15T10:11:23.637
> 
> 标签：android, android-linearlayout

我在 layout.xml 下面有 3 个按钮，它们出现在彼此下方...

```
 <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"
                android:padding="10dip" >

                    <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical">

                    <Button
                        android:id="@+id/btn_1"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="Car" />

                    <Button
                        android:id="@+id/btn_2"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="Vehicle" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >

                    <Button
                        android:id="@+id/btn_3"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Bike" />
                </LinearLayout>
            </LinearLayout> 
```

我想让前两个按钮并排（btn_1 和 btn_2）。谁能给我一个关于如何做到这一点的提示？？？

非常感谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-15T10:15:58.913

只需更改`android:orientation="vertical"`您`android:orientation="horizontal"`的布局，一切都会正常工作

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-17T20:28:15.393

最好的方法是进行布局，然后像这段代码一样放置你的按钮

```
<TableRow 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

 <Button 
    android:id="@+id/Button9"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left"
    android:text="@string/Home1"/>  

 <Button 
    android:id="@+id/Button11"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"     
    android:text="@string/NextL"/> 
```

在这种形状中，您在同一行中有两个按钮非常容易：D

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T11:46:32.647

将线性布局方向垂直更改为水平。然后将两个按钮的权重设置为 1 或 2。如您所愿。按钮将平均排列。

# android - 从 SD 卡到 GridView 的图像

> ID：14892369
> 
> 赞同：0
> 
> 时间：2013-02-15T10:11:34.147
> 
> 标签：android

我正在寻找有关如何从手机 SD 卡读取图像然后将它们放置在 GridView 中的一些信息，最后能够单击并选择其中一个图像并以全尺寸显示它开始。

我正在寻找易于遵循和理解的教程或示例。我已经搜索过，但我发现很难找到这样的教程。也许是因为我不知道正确的关键词。我已经关注了 Android 开发者网页上的 GridView 示例，但我正在寻找一个延续。

到目前为止，我已经了解到我需要使用 MediaStore 内容提供程序、查询和游标。

如果有人可以给我更多信息或方向，我会很感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:19:44.077

这是一个将图像视图添加到网格视图中的简单示例。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    GridView gridView = (GridView) findViewById(R.id.gridview);
    gridView.setAdapter(new ImageAdapter(this));

    gridView.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> parent, 
        View v, int position, long id) 
        {                
            Toast.makeText(getBaseContext(), 
                    "pic" + (position + 1) + " selected", 
                    Toast.LENGTH_SHORT).show();
        }
    });        
}

public class ImageAdapter extends BaseAdapter 
{
    private Context context;

    public ImageAdapter(Context c) 
    {
        context = c;
    }

    //---returns the number of images---
    public int getCount() {
        return imageIDs.length;
    }

    //---returns the ID of an item--- 
    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    //---returns an ImageView view---
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        ImageView imageView;
        if (convertView == null) {
            imageView = new ImageView(context);
            imageView.setLayoutParams(new GridView.LayoutParams(185, 185));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(5, 5, 5, 5);
        } else {
            imageView = (ImageView) convertView;
        }
        imageView.setImageResource(...);
        return imageView;
    }
} 
```

这是将图像文件放入图像视图的方法。

解决方案1：

```
ImageView i = new ImageView(mContext);  

Bitmap bm = BitmapFactory.decodeFile(...);  
i.setImageBitmap(bm);  

i.setLayoutParams(new Gallery.LayoutParams(150, 100));  
i.setScaleType(ImageView.ScaleType.FIT_XY);  
i.setBackgroundResource(...); 
```

解决方案2：

```
ImageView im = new ImageView(mContext);   
im.setImageURI(Uri.withAppendedPath(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, ""+id)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:33:21.413

[这](http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/)是关于网格视图的初学者和很好的教程。在该教程中，图像被放置在可绘制文件夹中。由于您想从存储卡中读取图像，只需找到这些图像的路径并将它们提供给 gridview 中的 imageView 即可。如果您需要帮助，请告诉我。

# regex - 正则表达式查找全名提及

> ID：14892374
> 
> 赞同：-1
> 
> 时间：2013-02-15T10:12:00.630
> 
> 标签：regex

我正在寻找一个正则表达式，它将找到带有@符号和全名的文本：

例如“这是关于@Paul Cowan”

目前我有：

```
/(?:^|\s)(@[^@\s]*)(?=\s|$)/g 
```

这将匹配@Paul 但不匹配@Paul Cowan

我怎么也能找到下一个词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:19:24.550

做一个匹配三个组的正则表达式，后两个可选你不说你使用的是什么语言，这是python中的一些操作

```
>>> str="my name is @paul cowen the king of rock"
>>> r=re.search('@(\w+)(\s+)?(\w+)?',str)
>>> r.groups()
('paul', ' ', 'cowen') 
```

然后加入他们在你的程序的其余部分希望这会有所帮助！

# jquery - jquery ui 可调整大小的问题

> ID：14892377
> 
> 赞同：1
> 
> 时间：2013-02-15T10:12:04.537
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog, jquery-ui-resizable

我正在使用`jquery-ui-1.9.2`and `jquery-ui dialog`，在最小化它们进入屏幕左侧容器的对话框时，我使用以下代码使对话框容器可调整大小

```
$(function() {
    $( ".container" ).resizable();
}); 
```

和它的CSS：

```
.container {
    position:fixed;
    width: 200px;
    height: auto;
    border: 1px solid #CCCCCC;
    overflow: scroll
} 
```

现在这里清楚地提到容器必须仅在溢出时显示滚动条。如果我取消可调整大小的功能，这可以正常工作，但如果我使用该功能，则滚动条会出现在页面加载本身上。

我该如何摆脱这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:39:25.560

好吧，我自己想通了。只是改变了 resizable() 如下所示

```
$(function() {
$( ".container" ).resizable({ handles: "e" });
 }); 
```

现在滚动条只在溢出时出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:00:42.800

替换`overflow: scroll`为`overflow: auto`

# javascript - 截断 jsf 下拉列表中的长文本 h:selectOneMenu

> ID：14892382
> 
> 赞同：3
> 
> 时间：2013-02-15T10:12:25.407
> 
> 标签：javascript, jsf

有没有一种快速的方法可以截断 h:selectOneMenu 中显示的长文本，而无需从 scratsh 中对其进行编码。我想要实现的是截断长文本，并添加一个工具提示来显示整个文本。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T05:07:48.693

您可以创建一个实用函数，用于截断长文本。例子：

```
function shortText(String data,int length){
     return data.subString(0,length);
} 
```

现在，不是直接显示值，而是将值和长度传递给此函数，并在 UI 上使用返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T04:08:03.273

对于截断较长的文本，css 中有许多更简单的方法，例如

```
text-overflow: ellipsis; 
```

或者

```
text-overflow: hidden; 
```

并且'title'属性为selectOneMenu添加了一个工具提示

# javascript - jQuery等待多个事件触发

> ID：14892384
> 
> 赞同：13
> 
> 时间：2013-02-15T10:12:31.633
> 
> 标签：javascript, jquery, jquery-deferred

在执行函数之前是否可以“等待”多个事件？我知道使用`jQuery` `deferred`对象`$.when`来等待两个承诺解决是可能的，但我想知道它是否可能只使用普通的旧事件？

假设单击事件和自定义事件触发警报，例如：

```
$.when("click", "customEvent").then(function(){ alert("yay"); }); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-16T04:07:45.380

您*可以*使用延迟，您只需要自己创建它们。

```
var clickDfd = $.Deferred();
var eventDfd = $.Deferred();
$("div").on("click", function(e) {
   clickDfd.resolve();
});

$("div").on("some-event", function(e) {
   eventDfd.resolve();
});

$.when(clickDfd, eventDfd).done(function(){ 
    alert("yay"); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:16:49.067

```
var click = 0;
var hover = 0;
$("div").on("click mouseenter", function(e) {
   if(e.type == 'click') {
      click = 1;
      bana();
   }
   else if(e.type == 'mouseenter') {
      hover = 1;
      bana();
   }
});
function bana() {
   if(click == 1 && hover == 1) {
       alert(1);
       click = 0;
       hover = 0;
   }
   else {
       return false;
   }
} 
```

好吧，检查事件类型并以旧方式设置它们。纯 jQuery 和 JS。

仅当两个事件都完成/触发时才会提醒 1。

[**小提琴**](http://jsfiddle.net/cCvYm/1/)

# html - 如何在父窗口中显示 iframe 的操作结果

> ID：14892387
> 
> 赞同：1
> 
> 时间：2013-02-15T10:12:48.417
> 
> 标签：html, iframe, forms, html-frames

我有一个 html 页面。html 页面有一个 iframe。当我在 iframe 中提交表单时，返回的结果会显示在该 iframe 中。如何在 iframe 的父级中显示该结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:20:21.697

```
 <script type="text/javascript">
        $(document).ready(function () {
            $("#test").load(function (e) {
                var htmlFromServer = $(e.target).contents().find("html").html();
            });
        });
    </script>

  <iframe id="test" src="HTMLPage1.htm"></iframe> 
```

您需要做的就是处理 iframe 的 onload 事件。当 iframe 收到服务器的响应时触发此事件。

# c# - Braintree 使用网络表单付款

> ID：14892388
> 
> 赞同：2
> 
> 时间：2013-02-15T10:12:54.123
> 
> 标签：c#, asp.net-mvc, webforms, braintree

是否可以将 Braintree 付款与 ASP.NET Web 表单一起使用？Braintree 提供了[一个 MVC 示例](https://www.braintreepayments.com/docs/dotnet/guide/getting_paid)。

我尝试[了这个解决方案](http://www.codeproject.com/Questions/529110/TransparentplusRedirectpluswithplusBraintreepluswi)，但它不能正常工作。这是我的[服务器端代码](http://wklej.org/id/956419/)和[模板](http://wklej.org/id/956421/)；我稍微改变了原来的版本。

`submit`主要问题是单击按钮时没有任何操作——页面只是重新加载。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:01:13.230

[我在布伦特里工作。]

我使用透明重定向编写了一个[简单的网络表单示例](https://gist.github.com/benmills/3678413c4bde46bd0dda)，它可能会帮助您解决问题。

查看您的代码以及您所描述的问题，我猜`SessionUtils.Instance.TransparentRedirectURL`是返回一个空字符串 or `null`，因此当您发布表单时，它会返回到当前页面。

# excel - 如何使用按钮单击将工作簿保存到 txt 文件中

> ID：14892389
> 
> 赞同：0
> 
> 时间：2013-02-15T10:12:55.680
> 
> 标签：excel, vba

需要将电子表格中的工作簿保存到我所在位置的单独 txt 文件中。

但是我在按钮单击中使用的代码正在将数据传输到所需的位置，并且文件包含我不感兴趣的特殊字符。

当我在打印预览屏幕中获得详细信息时，任何人都可以帮助我获取 txt 文件。

使用的代码：

```
Private Sub CommandButton1_Click()
Dim xlApp As Object
  Dim xlBook As Object
  Dim xlSheet As Object
  Dim strOutputFileName
  Set xlApp = CreateObject("Excel.Application")
  Set xlBook = xlApp.Workbooks.Open("C:\Documents and Settings\bera02a\Desktop\Arun_TAT_Testing_orig_14022013.xls")
  For Each xlSheet In xlBook.Worksheets
    strOutputFileName = "C:\Documents and Settings\bera02a\Desktop\" & xlSheet.Name & ".txt"
    xlSheet.SaveAs strOutputFileName
  Next
  xlApp.Quit

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:27:17.967

我认为您的输出不正确的原因是没有指定所需的保存格式。尝试用以下代码替换您保存的代码行：

```
xlSheet.SaveAs Filename:=strOutputFileName, FileFormat:=xlUnicodeText 
```

这会将输出定义为 Unicode 文本文件——我想这就是你想要的。

# android - android中的外部设备支持

> ID：14892392
> 
> 赞同：0
> 
> 时间：2013-02-15T10:12:58.723
> 
> 标签：android, android-camera, apk

这是否可以在 android 中使用外部摄像头或其他设备，如指纹扫描仪之类的设备。这是否可以通过编程方式访问 android 应用程序中的这些设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:25:07.800

**USB 主机和附件**

安卓通过USB附件和USB主机两种模式支持多种USB外设和安卓USB附件（实现安卓附件协议的硬件）。

[链接在这里：](http://developer.android.com/guide/topics/connectivity/usb/index.html)

[USB 配件](http://developer.android.com/guide/topics/connectivity/usb/accessory.html)

# paypal - 您可以将 Google Checkout 用作简单的付款接收方吗？IE。无需完整订单？

> ID：14892394
> 
> 赞同：0
> 
> 时间：2013-02-15T10:13:02.797
> 
> 标签：paypal, payment-gateway, google-checkout

我正在尝试将 Google Checkout（作为 PayPal 的额外替代品）集成到我的网站中以进行简单付款。这笔款项用于允许人们进入网站，而不是用于实际发送的数字或实物物品。

这可能与 Google Checkout 相关吗，因为每当我从“立即购买”按钮收到付款时，它都会在我的帐户中创建一个“订单”，然后我必须在我的控制面板中单击“发货”。当然，我没有“发货”的命令——IPN（或 API 回调）完成了艰苦的工作。

PayPal 没有这个限制，我可以从人们那里接收付款并通过他们的 IPN 在我的数据库中处理它们 - 从而给予用户访问权限 - 不需要 PayPal 干预，也不需要在任何地方点击“Ship”。它似乎并不关心是否有任何物品要运送。

有没有办法用 Google Checkout 实现同样的目标（或者你可以简单地用 Google Wallet 做到这一点？两者之间有什么区别！？）。

对此的任何帮助将不胜感激。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:08:38.010

Google Wallet/Checkout 目前不适用于个人对个人的付款/汇款。他们所有的（谷歌）支付 API 都是基于购买“东西”——无论是实体的（发货的）还是数字的（下载、应用程序、游戏等）。

这不是限制，它就是它（此时）。

# java - RDF+XML 响应 - 缺少 xml 版本标记

> ID：14892396
> 
> 赞同：1
> 
> 时间：2013-02-15T10:13:10.377
> 
> 标签：java, xml, servlets, rdf

我有一个 Java 中的 sevlet，它创建了一个 RDF/XML-ABBREV 模型。我的问题是响应不包含 xml 版本标记。

目前的回应：

```
<rdf:RDF
    xmlns:myNS="http://www.sap.de/research/BusinessObjectOntology#"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:owl="http://www.w3.org/2002/07/owl#"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#">
  <myNS:Resource rdf:about="http://localhost/myResource">
    ...
  </myNS:Resource>
</rdf:RDF> 
```

但我需要`<?xml version="1.0"?>`在模型的开头。我是否必须在我的代码中添加一些内容，或者为什么 xml 版本标签不显示？

```
resp.setCharacterEncoding(CHARSET);
resp.setContentType("application/rdf+xml");
resp.setStatus(HttpStatus.OK_200);
model.write(resp.getWriter(), "RDF/XML-ABBREV"); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:14:58.990

该声明是可选的，但您可以要求它。

根据[XML 编写器文档](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/xmloutput/RDFXMLWriterI.html)：

> 默认行为仅在被要求写入使用 UTF-8 或 UTF-16 以外的其他编码的 OutputStreamWriter 时给出 XML 声明。

要自定义输出尝试：

```
...
RDFWriter writer = model.getWriter("RDF/XML-ABBREV");
writer.setProperty("showXmlDeclaration","true");
writer.write(model, resp.getWriter(), null); 
```

# jquery - jQuery 从文档中获取“不同”元素

> ID：14892404
> 
> 赞同：0
> 
> 时间：2013-02-15T10:13:37.583
> 
> 标签：jquery, asp.net-mvc-4

我正在为 ASP.NET MVC 创建一个脚注助手。我在我的页面上生成了一组类似于以下内容的链接：

`<a rel="footnote" href="#fn:footnote1" data-text="note" data-ref="1">1</a>`

我想生成包含实际注释的底部。目标是从每个链接中获取`href`and并在页面底部`data-text`创建一个元素。`li`

这是为本节生成的 HTML：

```
<div id="6c708d57-abc0-4e53-ab0c-913f0b8c8020" class="footnote">
    <hr />
    <ol></ol>
</div> 
```

以及相应的脚本：

```
<script type="text/javascript">
$(function () {
    var footnotes = $('#6c708d57-abc0-4e53-ab0c-913f0b8c8020 ol');

    $('a[rel="footnote"]').each(function () {
        var reference = $(this).text();
        var text = $(this).attr('data-text');
        var href = $(this).attr('href').substring(1);
        footnotes.append('<li id="' + href + '">' + text + '</li>');
    });
});
</script> 
```

问题是当我想在多个元素上重复使用相同的注释时，注释在底部会重复。我希望它只出现一次。

检索语义上不同的列表的最简单解决方案是`A`什么？

我看过，`jQuery.unique()`但就 DOM 而言，我的元素已经是独一无二的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:29:23.473

随时将笔记存储在哈希中 - 如果已经存在，请`return`在迭代步骤中继续：

```
<script type="text/javascript">
$(function () {
    var footnotes = $('#6c708d57-abc0-4e53-ab0c-913f0b8c8020 ol');

    var notesProcessed = {};

    $('a[rel="footnote"]').each(function () {

        var reference = $(this).text();
        var text = $(this).attr('data-text');
        var href = $(this).attr('href').substring(1);

        if(notesProcessed[href])
          return;        

        footnotes.append('<li id="' + href + '">' + text + '</li>');

        notesProcessed[href] = true;

    });
});
</script> 
```

# javascript - 重新加载剑道ui网格行项代码执行错误

> ID：14892406
> 
> 赞同：0
> 
> 时间：2013-02-15T10:13:41.943
> 
> 标签：javascript, jquery, backbone.js, kendo-ui, kendo-grid

我有一个带有剑道 ui 网格的 Web 应用程序。当我单击一个按钮时，网格会使用 Bakbone.js 加载，我可以使用以下代码删除一行：

```
$(document).on("click", "#grid tbody tr .ob-delete", function (e) {
    var item = grid.dataItem($(this).closest("tr"));
    var check = confirm("Do I delete:" + item.City );
    if (check) {
        grid.removeRow($(this).closest("tr"));
    }
}); 
```

删除按钮的配置：

```
 command: [
            "edit", {
            name: "destroy",
            text: "Remove",
            className: "ob-delete"
        }] 
```

当我按下按钮重新加载内容（网格）时，如果我想删除一行，`item.City`则会产生错误。

完整的例子[在这里](http://jsfiddle.net/Thxtr/49/)

编辑：[在这里](http://jsfiddle.net/vicenrele/Lu9Qf/18/)解决！感谢@Whizkid747！

要添加

```
command: [ "edit",{ 
      //...
      click: deleteRow
}] 
```

然后，当单击按钮时，会调用一个函数：

```
function deleteRow(e){
        var item = this.dataItem($(e.currentTarget).closest("tr"));
         var check = confirm("Do I delete:" + item.City );
        if (check) {
            grid.removeRow($(e.currentTarget).closest("tr"));
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:30:59.450

不确定，但您的网格实际上不是同一个网格，而是创建了旧的（重新加载之前）第一个和第二个网格。

以下行已更改：

```
var item = $('#grid').data().kendoGrid.dataItem($(this).closest("tr")); 
```

[更新版本](http://jsfiddle.net/Lu9Qf/)。

我建议您只通过[dataSource.data()](http://docs.kendoui.com/api/framework/datasource#data)方法更改数据，而不是重新创建网格。或者更改您的逻辑，以便在重新创建小部件之前实际**[销毁小部件。](http://docs.kendoui.com/api/framework/widget#destroy)**

# c - 更改 const char *str1 = "abc"

> ID：14892407
> 
> 赞同：1
> 
> 时间：2013-02-15T10:13:41.170
> 
> 标签：c, string, char

这是好习惯吗？代码编译并运行，但我想知道这是否是在 C 代码中模拟的好习惯，

1.  我们写`const char *str1 = "abc";`
2.  然后稍后，假设有一个指针变量`char *str2`指向动态分配的内存
3.  然后我们`str1 = str2`现在都这样做`str1`并`str2`指向动态分配的内存

所以现在我们已经失去了任何指向`"abc"`. 虽然在这段代码中，我们可能不需要它，但我想知道处理这些的最佳推荐方法是什么。

总的问题是我们需要一个最初声明为 abc 的字符串，后来依赖于用户输入，我们可能想要使用用户提供的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:00:05.670

绝对没问题。`const char *str1`意思是“一个可以修改的指针，指向不能修改的字符数据（通过这个指针）”。

因此，您可以指向`str1`您喜欢的任何字符串，并且“重新安装”它以在不同时间指向不同的字符串是有意义的。

显然，如果您的代码足够复杂，您可能会使读者难以计算出变量当前包含的内容，但所有变量都是如此。例如，您要小心有时指向字符串文字、有时指向动态分配的内存的指针，因为是否应该`free`编辑指针可能并不总是很清楚。

如果你想`str1`总是指向同一个字符串，你会定义它`const char * const str1`（或者`char const *const str1`为了使位置`const`始终一致）。在这种情况下，这不是您想要的，而且您没有声明`str1`const 的事实向读者表明了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:17:54.543

丢失指向字符串文字的指针不会导致内存泄漏，因此您所做的在这方面是安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T10:25:27.290

字符串文字`"abc"`不是动态分配的，因此在这种情况下不会泄漏。

字符串文字是“程序映像”的一部分，在启动时由操作系统的可执行加载程序加载到内存中。进程结束后，该映像占用的空间将由操作系统回收。当然，这不是很准确，因为有诸如按需分页和写时复制之类的技术，但它们与这种情况无关。

如果您不`const`输入该定义，那将是一个问题。后者将允许您尝试修改通常存储在进程的只读区域中的一块内存，因此会出现未定义的行为。

# iphone - Flurry 插页式广告显示不一致

> ID：14892408
> 
> 赞同：2
> 
> 时间：2013-02-15T10:13:44.123
> 
> 标签：iphone, ios, ads, flurry, interstitial

我已经在我的应用程序中设置了 Flurry 广告，而且大多数时候，它们的效果都很好。我的游戏有几个小游戏，在每个小游戏结束时，我都会展示一个广告。

但是，有时广告不会出现，让用户停留在游戏的结束屏幕上。我无法弄清楚每次都会发生这种情况的用例，而似乎是随机发生的。

一旦广告未能出现，双击主页按钮（即调出应用程序切换器菜单）具有关闭广告并返回我的游戏主屏幕的效果。所以就好像广告在那里，但用户看不到它（或单击 x 将其关闭）。

这种情况发生一次后，*每次都会*发生，即应用程序不会返回到广告工作的状态，*除非*我完全重新启动应用程序（双击主页按钮等）。

我从我的用户那里收到很多关于应用程序在每次小游戏后“崩溃”的报告，而实际发生的是广告没有出现。

下面是我初始化和显示广告的代码。方法 [showFullScreenAd] 每次都被成功调用，并且我有来自 delegates 方法的输出语句来确认广告已成功检索。

```
- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];
#ifdef ADVERTISING
if (![[NSUserDefaults standardUserDefaults] boolForKey:kIsProUpgradePurchased]) {
    DLog(@"Fetching ads for hook %@", kAdHookInterstitial);
    [FlurryAds fetchAdForSpace:kAdHookInterstitial
                         frame:self.view.frame
                          size:FULLSCREEN];
    [FlurryAds setAdDelegate:self];
}
#endif
}

-(void) viewWillDisappear:(BOOL)animated {

#ifdef ADVERTISING
DLog(@"REMOVING ADS FROM SPACE: %@", kAdHookInterstitial);
if (![[NSUserDefaults standardUserDefaults] boolForKey:kIsProUpgradePurchased]) {
    [FlurryAds removeAdFromSpace:kAdHookInterstitial];
    [FlurryAds setAdDelegate:nil];
}
#endif

- (void)showFullScreenAd {
#ifdef ADVERTISING
if (![[NSUserDefaults standardUserDefaults] boolForKey:kIsProUpgradePurchased]) {
    if ([FlurryAds adReadyForSpace:kAdHookInterstitial]) {
        [FlurryAds displayAdForSpace:kAdHookInterstitial
                              onView:self.view];
    }
    else {
        [self.navigationController popToRootViewControllerAnimated:YES]; 
    }
}
#else
[self.navigationController popToRootViewControllerAnimated:YES];
#endif
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:35:31.453

您希望在启动任何广告活动之前设置广告委托。否则，*可能*会向您的委托转发有用（失败）消息的 SDK 将无法执行此操作。

在哪里/如何被`showFullScreenAd`称为？该方法似乎是合理的，因为如果广告不可用，则弹出控制器（假设您的根视图控制器在这种情况下是您想要的位置）。

您还可以实现`FlurryAdDelegate`在广告成功获取时提醒您的方法，并将其用于您的显示功能。

由于对广告服务器的提取*可能会*失败，因此实施该 `FlurryAdDelegate#sapceDidFailToReceiveAd:error:`方法通常是谨慎的。根据您希望在集成中使用广告的方式，您可能希望在此处尝试另一个网络请求。

[http://support.flurry.com/index.php?title=Publisher/Code/Doc](http://support.flurry.com/index.php?title=Publisher/Code/Doc)

# requirejs - 等待模块加载

> ID：14892410
> 
> 赞同：1
> 
> 时间：2013-02-15T10:13:47.477
> 
> 标签：requirejs

我有以下代码：

```
define([],
    function() {

        var AppSettings = function(){};
        AppSettings.prototype = {

            init: function() {
                var that = this;

                //...
                require(views,function(){
                    var counter = 0;
                    for(view in that.settings.initViews) {
                       that.initViews[view] = new arguments[counter++];
                    }
                    console.log("init");   
                });
            },

            run: function() {
                console.log("run");
            }

        };

        return AppSettings;
    }
); 
```

当我加载 AppSettings 模块时：

```
require(["app_settings"],
    function(AppSettings) {
        var settings = new AppSettings();
        settings.init();
        setting.run();
    }
); 
```

我得到以下输出：

```
run
init 
```

这可能是因为我在 init 方法中异步加载模块 - 但我如何“等待”它们加载？我的意思是我如何确保所有异步都完成然后调用`run`？

# hibernate - 删除父级时，子级正在更新而不是删除

> ID：14892412
> 
> 赞同：0
> 
> 时间：2013-02-15T10:13:49.170
> 
> 标签：hibernate, hibernate-mapping

我的问题是，当我删除父子时，没有删除父子，而不是删除子，子正在更新，这是输出

```
Hibernate: update employee_project set employeeNumber=null where employeeNumber=?
Hibernate: delete from employee where EMPLOYEE_NUMBER=? 
```

当我删除父级时，这是我运行的代码片段

```
 public boolean deleteEmployee(Employee employee) {
        Transaction transaction = null;
        boolean flag;
        try {
            transaction = session.beginTransaction();
            session.delete(employee);
            session.flush();
            transaction.commit();
            flag = true;
        } catch (HibernateException exception) {
            if (transaction != null)
                transaction.rollback();
            flag = false;
        }
        return flag;
    } 
```

这是我的父表 Employee.hbm.xml

```
<hibernate-mapping package="com.nousinfo.tutorial.model">
    <class name="Employee" table="employee">
        <meta attribute="class-description">
            This class contains the employee detail
        </meta>
        <id name="employeeNumber" type="int" column="EMPLOYEE_NUMBER">

        </id>
        <property name="firstName" type="string" column="FIRST_NAME"></property>
        <property name="lastName" type="string" column="LAST_NAME"></property>
    </property>
        <set name="employeeProjects" cascade="all-delete-orphan">
            <key column="employeeNumber" />
            <one-to-many class="com.ravindrainfo.tutorial.model.EmployeeProject" />
        </set>

    </class>

</hibernate-mapping> 
```

这是子表 project.hbm.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC 
 "-//Hibernate/Hibernate Mapping DTD//EN"
 "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.nousinfo.tutorial.model">
    <class name="EmployeeProject" table="employee_project">
        <meta attribute="class-description">
            This class contains the employee detail
        </meta>
        <composite-id>
            <key-property name="employeeNumber" type="int"
                column="EMPLOYEE_NUMBER"></key-property>
            <key-property name="projectCode" type="string" column="PROJECT_CODE"></key-property>
        </composite-id>
        <property name="startDate" type="date" column="START_DATE"></property>

        <many-to-one name="employee" class="com.ravindrainfo.tutorial.model.Employee"></many-to-one>
    </class>
</hibernate-mapping> 
```

这是我的员工 Pojo

```
import java.io.Serializable;
import java.util.Date;

import java.util.Set;

public class Employee implements Serializable {

    private static final long serialVersionUID = 4314638638373270669L;
    private int employeeNumber;
    private String firstName;
    private String lastName;
        private Set<EmployeeProject> employeeProjects;

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
        public Set<EmployeeProject> getEmployeeProjects() {
        return employeeProjects;
    }

    public void setEmployeeProjects(Set<EmployeeProject> employeeProjects) {
        this.employeeProjects = employeeProjects;
    }
        public int getEmployeeNumber() {
        return employeeNumber;
    }

    public void setEmployeeNumber(int employeeNumber) {
        this.employeeNumber = employeeNumber;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:21:09.227

我不确定这也适用于 xml，但尝试修改

```
<set name="employeeProjects" cascade="all-delete-orphan">
      <key column="employeeNumber" />
      <one-to-many class="com.ravindrainfo.tutorial.model.EmployeeProject" />
</set> 
```

~~和~~

 ~~```
<set name="employeeProjects" cascade="all-delete-orphan" orphanRemoval="true">
      <key column="employeeNumber" />
      <one-to-many class="com.ravindrainfo.tutorial.model.EmployeeProject" />
</set> 
```~~ 

所以添加`orphanRemoval="true"`。

~~这适用于 annotation `@OneToMany(orphanRemoval=true)`，所以我很确定它也适用于 xml （实际上你甚至可以`cascade="all-delete-orphan"`非常安全地删除）~~

**编辑**：我查看了更多信息，发现此页面[Hibernate Unidirectional Parent/Child relationship - delete() 对子表执行更新而不是删除](https://stackoverflow.com/questions/1012874/hibernate-unidirectional-parent-child-relationship-delete-performs-update-on)，因此您可以尝试修改映射添加`inverse="true"`而不是`orphanRemoval`. 所以

```
<set name="employeeProjects" cascade="all-delete-orphan" inverse="true">
    <key column="employeeNumber" />
    <one-to-many class="com.ravindrainfo.tutorial.model.EmployeeProject" />
</set> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:31:24.867

我认为级联应该是*all,delete-orphan*而不是*all-delete-orphan*

休眠文档的摘录：

> 如果子对象的生命周期受限于父对象的生命周期，则通过指定 cascade="all,delete-orphan"(@OneToMany(cascade=CascadeType.ALL, orphanRemoval=true)) 使其成为生命周期对象。

参考：[http ://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/objectstate.html#objectstate-transitive](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/objectstate.html#objectstate-transitive)

# ruby-on-rails - 会话哈希不会在 rspec 测试中持续存在

> ID：14892413
> 
> 赞同：3
> 
> 时间：2013-02-15T10:13:55.673
> 
> 标签：ruby-on-rails, ruby, rspec, controller, tdd

在我的 people_controller_spec.rb 我有

```
before(:each) do
    @office = FactoryGirl.create(:office)
    @organization = FactoryGirl.create(:organization)
    @user = FactoryGirl.create(:user, organization: @organization)

    @request.session['user_id'] = @user.id
    @request.session['current_organization_id'] = @user.organization.id
  end 
```

我有这个 application_controller.rb

```
class ApplicationController < ActionController::Base

  protect_from_forgery

  private

  def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
  end

  def current_organization
    if session[:current_organization_id]
      Organization.find(session[:current_organization_id])
    else
      @current_organization ||= Organization.find(current_user.organization_id)
    end
  end

  helper_method :current_user
  helper_method :current_organization
end 
```

会话哈希似乎不会在 application_controller.rb 中持续存在，这就是为什么我在 application_controller.rb 中的 @current_user 为 nil 时出现这些类型的测试错误

```
 6) PeopleController index sorts all people alphabetically by first_name
     Failure/Error: get :index, {search: {meta_sort: "first_name.asc"}}, valid_session
     NoMethodError:
       undefined method `organization_id' for nil:NilClass
     # ./app/controllers/application_controller.rb:15:in `current_organization'
     # ./app/controllers/people_controller.rb:107:in `get_orgs'
     # ./spec/controllers/people_controller_spec.rb:71:in `block (3 levels) in <top (required)>' 
```

我已经做了一切，但失败了。

我使用 rails (3.2.9) 和 rspec-rails 2.12.2

看到这个[设计测试助手后，我解决了问题 - 登录不起作用](https://stackoverflow.com/questions/12226502/devise-test-helper-sign-in-does-not-work)

我刚刚删除了所有“valid_session”方法调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:51:35.083

在您的`before :each`块中设置会话：

```
session[:user_id] = @user.id
session[:current_organization_id] = @user.organization.id 
```

这使用 rspec 控制器宏提供的会话助手。此外，我不确定会话是否`HashWithIndifferentAccess`类似`params`，但无论哪种方式，保持使用相同的密钥类型都很好。

# jquery - jqplot时间轴不显示在右边

> ID：14892414
> 
> 赞同：0
> 
> 时间：2013-02-15T10:13:59.963
> 
> 标签：jquery, time, graph, line, jqplot

我有一个 jqplot 线图

```
 $.jqplot('chartdiv1',  <?=$dataset?>,
            {
                title: 'GRAPT TITLE',
                axes: {
                    xaxis:{
                        label:"x axis",
                        renderer:$.jqplot.DateAxisRenderer,
                        tickRenderer: $.jqplot.CanvasAxisTickRenderer ,
                        tickOptions:{formatString:'%d.%m.%y %H:%M:%S', angle: -30}
                    },
                    yaxis:{
                        label:"y axis",
                        labelRenderer: $.jqplot.CanvasAxisLabelRenderer
                    }
                },
                highlighter: {
                    show: true,
                    sizeAdjust: 7.5
                },
                cursor:{
                    show: true,
                    zoom:true,
                    showTooltip:false
                }
            }); 
```

它是这样显示的

![](../Images/fedc550866d2409541c4fd25bfd7bb7f.png)

为什么它在 x 轴上没有正确缩放？
值相差 1 分钟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:43:06.947

为您的轴添加一个最小值：

```
axes: {
 xaxis: {
  label: "x axis",
  renderer: $.jqplot.DateAxisRenderer,
  tickRenderer: $.jqplot.CanvasAxisTickRenderer,
  tickOptions:{formatString:'%d.%m.%y %H:%M:%S', angle: -30},
  min: '2013-02-05 10:50',
  max: '2013-02-05 12:15',
  tickInterval: '1 hour', //only if you want to draw a tick each hour.
  autoscale: false        //only if you want to draw a tick each hour. 
 } 
} 
```

**编辑**

当您放大时，将 xaxis 边界调整为要绘制的数据是一种“正常”行为。如果-当您缩小时-您的情节与开始时的行为相同（左中空），您可以禁用本机缩放重置，这要归功于

```
cursor:{
   clickReset: false, 
   dblClickReset: false
} 
```

并在绘制绘图后添加一个新的双击事件处理程序：

```
$("#chartdiv1").dblclick(function(){resetZoomOnPlot(myplot);});
function resetZoomOnPlot(targetPlot){
  target.resetZoom();
  target.axes.xaxis.min = '2013-02-25 10:50';
  target.axes.xaxis.max = '2013-02-25 12:15';
  target.axes.xaxis._tickInterval = '1 hour';
  target.replot();    
} 
```

其中 myplot 是一个包含您的情节的变量：`var myplot = $.jqplot('chartdiv1', <?=$dataset?>, options);`。options 是一个包含您的 jqplot 选项的变量：`var options = {title: 'Graph title', axes: {...}...};`

# android - Intellij android 项目设置 - 运行按钮被禁用

> ID：14892416
> 
> 赞同：16
> 
> 时间：2013-02-15T10:14:10.827
> 
> 标签：android, intellij-idea

我有一个依赖于 actionbar sherlock 的 android 项目。它编译没有错误，但运行按钮被禁用。我有另一个运行良好并在我的设备上运行的 android 项目，但我看不出这些项目之间的区别 - 除了我能够运行一个项目而我无法运行另一个项目。

我会提供屏幕截图，但实际上我不知道这个问题出在哪里。

任何的想法？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-15T10:25:37.360

您是否设置了运行/调试配置？

您应该会在“运行”按钮的左侧看到一个下拉菜单；单击它，然后单击“编辑配置”。在左上角，单击“+”添加新配置，然后选择“Android 应用程序”。选择要启动的模块（通常它只是您的主项目），选择目标设备（硬件或仿真器），为其命名，然后单击确定。

现在您应该能够使用该配置运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-18T01:51:18.037

在 2017 年，IntelliJ idea 想要在启用 Run 选项之前对内容进行索引几分钟。

这似乎是设计使然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-12T14:13:43.743

1.  在项目视图中右键单击带有 main 方法的类文件。
2.  选择运行。

运行配置是自动创建的，因此您不必设置它。

# android - 可以启动/停止服务并每秒接收更新的 Android 小部件

> ID：14892418
> 
> 赞同：0
> 
> 时间：2013-02-15T10:14:12.237
> 
> 标签：android, android-widget, broadcastreceiver, alarmmanager, android-sensors

我需要创建一个基本上只有一个开始/停止按钮和一个包含一些信息的字段的 Android 小部件。Start 按钮应该启动一个服务，该服务每隔一秒左右就会得到一个结果。此结果的一部分应显示在小部件中，并且可以通过按下停止按钮再次停止服务。

任何人都可以向我指出正确的方向来实施这一战略吗？

我现在读了很多书，但我真的不确定。据我了解，AlarmManager 会过度杀伤力，并且会非常快地耗尽电池或使手机无响应。我也不能使用广播接收器，因为服务需要超过 5 秒（？？不确定）。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:42:54.533

首先，建议在从小部件创建服务时，在进行所需的必要更改后立即停止它，因为正在运行的服务将使用电池和内存。

对于制作小部件，这将很有帮助：-

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    // TODO Auto-generated method stub
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    for (int i = 0; i < appWidgetIds.length; i++) {
        int appWidgetId = appWidgetIds[i];
        //Give the name of service you want to start in your case Alarm Service
        Intent intent = new Intent(context, WidgetService.class);
        PendingIntent pendingIntent = PendingIntent.getService(context, 0,
                intent, 0);
        //This basically sets the layout of your widget to widget_layout
        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.widget_layout);
        views.setOnClickPendingIntent(R.id.imageView1, pendingIntent);

        appWidgetManager.updateAppWidget(appWidgetId, views);

    } 
```

对于您的服务类，您可以在进行所需的更改后在 OnStart() 方法中使用 stopSelf()。

# javascript - 在函数内部定义未定义的全局变量

> ID：14892419
> 
> 赞同：0
> 
> 时间：2013-02-15T10:14:16.040
> 
> 标签：javascript, variables, casting, scope, operator-precedence

这是乱七八糟的东西（不是我的代码，但我坚持使用它）。函数依赖于全局定义的变量。

```
function variableIssues(){
    alert(someGlobalString);  // alerts "foo"
} 
```

有时，这个全局定义的变量是`undefined`. 在这种情况下，我们希望将其转换为进一步处理。功能被修改。

```
function variableIssues(){
    alert(someGlobalString); // undefined

    if (!someGlobalString){
        var someGlobalString = "bar";
    }  
} 
```

但是，如果现在使用定义的 someGlobalString 调用此函数，则由于 javascript 评估，该变量将设置为`undefined`并始终设置为`bar`.

```
function variableIssues(){
    alert(someGlobalString); // "should be foo, but javascript evaluates a 
                             // variable declaration it becomes undefined"

    if (!someGlobalString){
        var someGlobalString = "bar";
    }  
} 
```

我想就如何处理`undefined`全局变量获得一些建议。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:16:09.807

全局变量是`window`对象的属性，因此您可以使用以下命令显式访问它们`window`：

```
if (!window.someGlobalString) {
// depending on possible values, you might want:
// if (typeof window.someGlobalString === 'undefined')
    window.someGlobalString = "bar";
} 
```

如果您使用全局变量，那么这是更好的样式，因为很清楚您在做什么并且分配给未定义的全局变量不会在严格模式下引发错误。

# android - 如何在不改变音高的情况下加快在 android 中实时播放的音乐？

> ID：14892420
> 
> 赞同：6
> 
> 时间：2013-02-15T10:14:19.630
> 
> 标签：android, audio

我需要能够以不同的速度播放 MP3 文件而不影响音高（或在加速后改变音高，无论如何），此外，这种过渡需要尽可能无缝。

[显然有应用程序可以做到这一点，但MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html) API似乎不可能，而且[SoundPool](http://developer.android.com/reference/android/media/SoundPool.html) API 只能改变音高和速率（除非我遗漏了什么）。

关于如何实现这一目标的任何想法？任何可以提供帮助的 API / 3rd 方库？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T16:01:23.883

有一种称为[时间尺度修改](http://en.wikipedia.org/wiki/Audio_time-scale/pitch_modification)的通用技术可以做到这一点。这是一个我没有评估过的可用工具：http: [//sourceforge.net/projects/mffmtimescale/](http://sourceforge.net/projects/mffmtimescale/)。

如果你放大音频的时间线，它看起来很像一个旧的心跳监视器——波峰和波谷的摆动模式。对于元音，该模式是准静止的，这大致意味着它是重复的，就像健康的心跳一样。在正常语音中，单个 ahhhh 元音可能会重复其模式 3-7 次。TSM 算法会删除其中一些重复，并且需要使用过滤器通过剪切/连接不完美的重复来引入伪影。空格也可以减少，但需要注意不要删除所有空格——在英语中，“football”这个词实际上在“foot”和“ball”之间有一个间隙（慢慢地大声说出来）。TSM 也可以反其道而行之，在正确的位置插入空白空间或在元音中添加音高周期重复。

# alert - 带有警报的 ics？

> ID：14892422
> 
> 赞同：17
> 
> 时间：2013-02-15T10:14:48.913
> 
> 标签：alert, icalendar, rfc2445, rfc5545

嗨，我刚刚发现了 ics 文件格式，我想知道是否可以在会自动获取的事件条目中包含一个或 2 个警报点？

代码：

```
BEGIN:VEVENT
DTSTART;TZID=Europe/Amsterdam:20130214T190000
DTEND;TZID=Europe/Amsterdam:20130214T190000
URL:http://www.myurl.com
DTSTAMP:20130205T114500
UID:
CREATED:20130214T190000
DESCRIPTION:Wedstrijd":" 3000H5B2  CE\, Datum":" donderdag 14 februari - 19.00 
```

对于警报，例如：

```
DTALERT1;Europe/Amsterdam:20130213T190000 
```

甚至更好：

```
DTALERT1;DTSTART-24H 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-23T09:13:32.627

有关更多详细信息，请参阅[RFC5545 ALARM 组件](https://www.rfc-editor.org/rfc/rfc5545#section-3.6.6)，在您的情况下，生成的 icalendar 文件如下所示：

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:pyICSParser
BEGIN:VEVENT
DTSTART:20130214T190000
DTEND:20130214T190000
URL:http://www.myurl.com
DTSTAMP:20130205T114500
UID:UID
CREATED:20130214T190000
DESCRIPTION:Wedstrijd":" 3000H5B2  CE\, Datum":" donderdag 14 februari - 
 19.00
BEGIN:VALARM
TRIGGER:-PT24H
REPEAT:1
DURATION:PT15M
ACTION:DISPLAY
DESCRIPTION:Reminder
END:VALARM
END:VEVENT
END:VCALENDAR 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-22T11:28:41.967

这在 2021 年 11 月仍然有效：

```
BEGIN:VALARM
X-WR-ALARMUID:12E16C3A-108C-1639-AABD-AF32053AC32E
UID:10E16C3A-128C-1639-AABD-AF32053AC32E
TRIGGER:-PT5M
DESCRIPTION:Reminder
ACTION:DISPLAY
END:VALARM 
```

***您可以在 END:VEVENT 之前添加此块***

需要唯一的警报 UID。

# objective-c - 升级到 Xcode 4.6 后出现链接器错误：armv7、ZBarSDK

> ID：14892429
> 
> 赞同：3
> 
> 时间：2013-02-15T10:15:02.920
> 
> 标签：objective-c, xcode

所以我升级到 Xcode 4.6 但我遇到了问题。我可以毫无问题地构建和运行程序，但是当我尝试创建存档时，我得到了那个错误：

```
 Ld /Users/me/Library/Developer/Xcode/DerivedData/ZM-dezzadmbbhmnbdehrgfgxsvipnzu/Build/Intermediates/ArchiveIntermediates/ZM/IntermediateBuildFilesPath/ZM.build/Release-iphoneos/ZM.build/Objects-normal/armv7s/ZM normal armv7s
cd /Users/me/Desktop/zav-mb-iphone-test
setenv IPHONEOS_DEPLOYMENT_TARGET 4.2
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -L/Users/mitjaresek/Library/Developer/Xcode/DerivedData/ZM-dezzadmbbhmnbdehrgfgxsvipnzu/Build/Intermediates/ArchiveIntermediates/ZM/BuildProductsPath/Release-iphoneos -L/Users/mitjaresek/Desktop/zav-mb-iphone-test/ZBarSDK -F/Users/mitjaresek/Library/Developer/Xcode/DerivedData/ZM-dezzadmbbhmnbdehrgfgxsvipnzu/Build/Intermediates/ArchiveIntermediates/ZM/BuildProductsPath/Release-iphoneos -filelist /Users/mitjaresek/Library/Developer/Xcode/DerivedData/ZM-dezzadmbbhmnbdehrgfgxsvipnzu/Build/Intermediates/ArchiveIntermediates/ZM/IntermediateBuildFilesPath/ZM.build/Release-iphoneos/ZM.build/Objects-normal/armv7s/ZM.LinkFileList -dead_strip -fobjc-arc -fobjc-link-runtime -miphoneos-version-min=4.2 -liconv -framework AVFoundation -framework CoreMedia -framework CoreVideo -framework AddressBook -framework AddressBookUI -framework AudioToolbox -framework QuartzCore -framework SystemConfiguration -framework MessageUI -framework CoreLocation -framework MapKit -framework UIKit -framework Foundation -framework CoreGraphics -lzbar -o /Users/mitjaresek/Library/Developer/Xcode/DerivedData/ZM-dezzadmbbhmnbdehrgfgxsvipnzu/Build/Intermediates/ArchiveIntermediates/ZM/IntermediateBuildFilesPath/ZM.build/Release-iphoneos/ZM.build/Objects-normal/armv7s/ZM

ld: file is universal (3 slices) but does not contain a(n) armv7s slice: /Users/me/iphone-test/ZBarSDK/libzbar.a for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

那么我该如何解决呢？

我真的被这个升级烦死了...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T10:25:20.043

我有一个类似的问题。出于某种奇怪的原因，删除 ArmV6 和 7 的条目，然后重新输入它们似乎可以解决它：

![在此处输入图像描述](../Images/0c637c636bdf13dfc5ff6b0f35225e46.png)

# php - PHP 与 MYSQL 数据流

> ID：14892434
> 
> 赞同：0
> 
> 时间：2013-02-15T10:15:18.817
> 
> 标签：php, mysql, database, browser

我正在使用 php 和 mysql。

我有一个`mysql`包含 365 个表的大型数据库，每天都包含一个表，并且在单个表中包含每个客户的数千条记录。我的问题是，当我要为多个客户生成报告时，它没有显示任何内容。

另一方面，当我检查`mysql`日志时，它显示在后端运行的查询，当在后端完成的查询仍然没有进入浏览器时，浏览器仍然显示进程正在运行。

我当前的代码如下所示：

```
//$ClientList Contains 100 clientIds
//$TableList contains 30 table list
$TotalCount = count($ClientList);
$CountTables = count($TableList);
for($i=0; $i<$TotalCount; $i++) {
    for($j=0; $j<$CountTables; $j++) {
        $sql = "INSERT INTO TABLEA SELECT * FROM ".$TableList[$j]." WHERE clientid = '".$ClientList[$i]."'";
        $rs = mysql_query($sql);
    }
}
for($i=0; $i<$TotalCount; $i++) {
    $sql = "SELECT * FROM TABLEA";
    //STORE IN ARRAY
    $rs = mysql_query($sql);
    while($ds=mysql_fetch_assoc($rs)) {
        $aRRAY[$i] = $ds;
    }
}

for($i=0; $i<count($aRRAY); $i++) {
} 
```

但是浏览器什么也没有，我也添加了`settimeout`0；增加会话时间，但没有结果。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:20:15.423

不要在 php 数组中存储一百万条记录：

```
//$ClientList Contains 100 clientIds
//$TableList contains 30 table list
$TotalCount = count($ClientList);
$CountTables = count($TableList);
for($i=0; $i<$TotalCount; $i++) {
for($j=0; $j<$CountTables; $j++) {
$sql = "INSERT INTO TABLEA SELECT * FROM ".$TableList[$j]." WHERE clientid = '".$ClientList[$i]."'";
$rs = mysql_query($sql);
}
}

//OUTPUT
$sql = "SELECT * FROM TABLEA";
//
$rs = mysql_query($sql);
while($ds=mysql_fetch_assoc($rs)) {
    my_output($ds);
} 
```

此外，如果您信任数据库将所有记录放入 TABLEA，为什么还要将它们放入单独的表中呢？

```
//$ClientList Contains 100 clientIds
//$TableList contains 30 table list
$TotalCount = count($ClientList);
$CountTables = count($TableList);
for($i=0; $i<$TotalCount; $i++) {
    for($j=0; $j<$CountTables; $j++) {
        //OUTPUT
        $sql = "SELECT * FROM ".$TableList[$j]." WHERE clientid = '".$ClientList[$i]."'";
        //
        $rs = mysql_query($sql);
        while($ds=mysql_fetch_assoc($rs)) {
            my_output($ds);
        }
    }
} 
```

# javascript - 选择后如何在 html 页面上显示加载图像，直到查询工作以及请求完成时隐藏图像？

> ID：14892437
> 
> 赞同：0
> 
> 时间：2013-02-15T10:15:23.403
> 
> 标签：javascript, jquery

**选择后如何在 html 页面上显示加载图像，直到查询工作以及请求完成时隐藏图像？**

我有从数据库中获取信息的网页

当用户在上面的下拉列表中选择用户时，会执行一个名为“showUser()”的函数。该函数由“onchange”事件触发：

```
<html>
<head>
<script>
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getuser.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>

<form>
<select name="users" onchange="showUser(this.value)">
<option value="">Select a person:</option>
<option value="1">Peter Griffin</option>
<option value="2">Lois Griffin</option>
<option value="3">Glenn Quagmire</option>
<option value="4">Joseph Swanson</option>
</select>
</form>
<br>
<div id="txtHint"><b>Person info will be listed here.</b></div>

</body>
</html> 
```

上面的 JavaScript 调用的服务器上的页面是一个名为“getuser.php”的 PHP 文件。

“getuser.php”中的源代码对 MySQL 数据库运行查询，并在 HTML 表中返回结果：

```
<?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'peter', 'abc123');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("ajax_demo", $con);

$sql="SELECT * FROM user WHERE id = '".$q."'";

$result = mysql_query($sql);

echo "<table border='1'>
<tr>
<th>Firstname</th>
<th>Lastname</th>
<th>Age</th>
<th>Hometown</th>
<th>Job</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['FirstName'] . "</td>";
  echo "<td>" . $row['LastName'] . "</td>";
  echo "<td>" . $row['Age'] . "</td>";
  echo "<td>" . $row['Hometown'] . "</td>";
  echo "<td>" . $row['Job'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?> 
```

**选择后如何在 html 页面上显示加载图像，直到查询工作以及请求完成时隐藏图像？**

我尝试在`<head>`标签中使用代码：

```
<script>
$.ajaxSetup({   

beforeSend: function (XMLHttpRequest) {
     $("#loading").show();
},

complete: function (XMLHttpRequest, textStatus) {
 $("#loading").hide();
}
});
</script> 
```

和

```
<div id="loading">
    <p><img src="loading.gif" /> Please Wait</p>
</div> 
```

但它在我的页面上不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:30:48.417

使用 jQuery。

```
 <head>
 <script src="http://code.jquery.com/jquery-latest.js"></script>
 <script>
  function getuser(str){
     $.ajax({   
      url: "getuser.php?q="+str,
      beforeSend: function (XMLHttpRequest)
      {
         $("#loading").show();
      }
    }).done(function ( data ) {
     $("#txtHint").html(data);
     $("#loading").hide(); });
  }
  $(document).ready(function(){
  $("select[name='users']").change(function () { 
   getuser($("option:selected", this).val()); });
   });
   </script>
   </head> 
```

你的身体应该是这样的。

```
 <body>
   <select name="users">
<option value="">Select a person:</option>
<option value="1">Peter Griffin</option>
<option value="2">Lois Griffin</option>
<option value="3">Glenn Quagmire</option>
<option value="4">Joseph Swanson</option>
</select>
   </body> 
```

# ios - 在 UITableView 编辑模式下， UITableView:didSelectRowAtIndexPath: 没有响应

> ID：14892445
> 
> 赞同：0
> 
> 时间：2013-02-15T10:15:37.370
> 
> 标签：ios, uitableview

我正在开发一个 iOS 应用程序，我正在尝试`UITableView`使用自定义的`UITableViewCell`.

我有一个编辑按钮，这是它的 IBAction：

```
- (IBAction)editFavList:(id)sender
{
    if ([_favList isEditing])
    {
        [_favList setEditing:NO animated:YES];
        [_editButton setTitle:@"Edit" forState:UIControlStateNormal];
    }
    else
    {
        [_favList setEditing:YES animated:YES];
        [_editButton setTitle:@"Done" forState:UIControlStateNormal];
    }
} 
```

我已经连接`UITableView* _favList` `delegate`并且`UIViewController`这个`UITableViewDelegate`方法工作正常，直到我点击编辑按钮：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView.editing)
    {
        NSNumber* obj = [favsSelected objectAtIndex:indexPath.row];
        BOOL selected;

        if (obj == nil)
            selected = NO;
        else
            selected = [obj boolValue];

        FavouriteCell* cell =
            (FavouriteCell*)[tableView cellForRowAtIndexPath:indexPath];

        cell.checked = !selected;

        // Actualizo el estado en el vector de los favoritos seleccionados
        [favsSelected insertObject:[NSNumber numberWithBool:!selected] atIndex:indexPath.row];
    }
} 
```

点击编辑按钮后，此方法不会触发（我确定这一点，因为我在该方法上添加了一个断点）。

**这是自定义单元实现：**

```
#import "FavouriteCell.h"

const NSInteger EDITING_HORIZONTAL_OFFSET = 35;

@implementation FavouriteCell

@synthesize selectIcon = _selectIcon;
@synthesize favName = _favName;
@synthesize checked = _checked;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        self.checked = NO;
    }
    return self;
}

- (void)setChecked:(BOOL)checked
{
    if (checked == _checked)
        return;

    _selectIcon.highlighted = checked;
    _checked = checked;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

+ (NSString *)reuseIdentifier
{
    return @"favouriteCell";
}

- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    //self.editing = editing;

    [super setNeedsLayout];
}

#pragma mark - Private methods
- (void)layoutSubviews
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationBeginsFromCurrentState:YES];

    [super layoutSubviews];

    if (((UITableView *)self.superview).isEditing)
    {
        CGRect contentFrame = self.contentView.frame;
        contentFrame.origin.x = EDITING_HORIZONTAL_OFFSET;
        self.contentView.frame = contentFrame;
        self.accessoryType = UITableViewCellAccessoryNone;
    }
    else
    {
        CGRect contentFrame = self.contentView.frame;
        contentFrame.origin.x = 0;
        self.contentView.frame = contentFrame;
        self.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    [UIView commitAnimations];
}
@end 
```

但是如果我再次点击编辑按钮（然后，我离开编辑模式），如果我点击一行，`didSelectRowAtIndexPath`它会再次被触发。

**为什么我做错了？**可能此问题与是否`UITableView`处于编辑模式有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:21:12.697

您应该将：`allowsSelectionDuringEditing`UITableView 的属性设置为`YES`

在你的情况下：

```
_favList.allowSelectionDuringEditing = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:22:24.087

检查 nib 文件。您应该将 tableView`editing`属性更改为`Single Selection during editing`.

![在此处输入图像描述](../Images/3909fa44ae14967e9deba61ce156e646.png)

# dynamics-crm-2011 - Dynamics CRM 2011：计算某些东西的自定义实体字段

> ID：14892446
> 
> 赞同：2
> 
> 时间：2013-02-15T10:15:39.740
> 
> 标签：dynamics-crm-2011

我需要某些自定义实体字段来根据对系统中数据的操作来计算和显示值。

例如，带有联系人和自定义实体的预订系统实现：门票。联系人和工单之间存在一对多的关系。我想创建一个字段来计算并显示在联系人表单中：

1.  飞行常客：买了10多张机票。
2.  根据是否购买过头等舱机票显示是或否的字段。Ticket ref 会以 FCxxx 开头

如果这不可能，也许有人可以建议一种显示此信息的 alt 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:12:47.017

这是可能的，您有一些方法可以做到这一点：工作流或插件。

如果您进行大量计算，我认为最好的方法是做一个插件。您可以在工单实体的创建后事件中注册，在那里您可以进行所有这些计算并更新联系人实体的自定义字段。

您可以查看一些有关开发插件的教程：

1.  [http://mscrmshop.blogspot.pt/2010/10/crm-2011-plugin-tutorial.html](http://mscrmshop.blogspot.pt/2010/10/crm-2011-plugin-tutorial.html)
2.  [http://msdn.microsoft.com/en-us/library/gg695782.aspx](http://msdn.microsoft.com/en-us/library/gg695782.aspx)
3.  [http://crmconsultancy.wordpress.com/2010/10/25/plugins-in-crm-2011/](http://crmconsultancy.wordpress.com/2010/10/25/plugins-in-crm-2011/)

注册插件的具体信息：

*   [http://msdn.microsoft.com/en-us/library/hh237515.aspx](http://msdn.microsoft.com/en-us/library/hh237515.aspx)

在[SDK](http://www.microsoft.com/en-us/download/details.aspx?id=24004)中，您可以找到更多示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:42:35.283

据我所知，没有编码是不可能实现的。因此，如果您正在寻找一种通过鼠标自定义它的方法，那么您可能只是运气不佳。

如果您希望在检索客户时显示该信息，使用 JavaScript 获取它可能是最快的。您可以将自定义脚本添加到*onload*事件。但是，这意味着您必须编写 JavaScript，因此如果您不喜欢编码，就会遇到问题。

如果您确实知道如何编码，那么使用 C# 创建插件可能是最首选的方式（至少我会这样做）。如果您意识到您希望执行更多操作，其优势在于可扩展性。

此外，如果您希望存储计算值，则必须使用插件。否则，只有 GUI 操作将执行计算。如果程序将在后台输入/检索数据，您不能依赖这些值将被计算，除非您收听*Retrieve*、*Create*等消息。

# blackberry - Blackberry 如何在调用 Status.Show 时阻止屏幕点击？

> ID：14892449
> 
> 赞同：0
> 
> 时间：2013-02-15T10:15:46.993
> 
> 标签：blackberry, click, statusbar, tap

当 show.status("Please Wait",2 AnyTimeLimit); 被调用。

实际上，我正在向 Web 服务发送命中，同时我正在显示一条消息“请稍候”，等待 2 秒。但在那 2 秒之后，它开始收听点击/点击。显示消息时如何阻止他们监听 tapEvent/ClickEvent？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:11:35.917

您将不得不为此覆盖一个自定义屏幕`PopupScreen`。在您的实现中，您必须`onUiEngineAttached`像这样覆盖 -

```
protected void onUiEngineAttached(boolean attached)
{
    super.onUiEngineAttached(attached);
    if(attached)
    {
        // start server hit thread, which closes the screen when done
    }
} 
```

之后，只需使用`UiApplication.getUiApplication.pushModalScreen()`. 您将希望将收到的数据保存在屏幕实例中某处的字节数组中，一旦弹出屏幕，您可以通过调用 getter 来检索该数据。

# python - 如何在 Dropbox API 中进行基于块重复数据删除的上传？

> ID：14892450
> 
> 赞同：0
> 
> 时间：2013-02-15T10:15:47.320
> 
> 标签：python, dropbox, dropbox-api

我正在使用 Dropbox API（python 版本），并希望在 Dropbox 客户端软件中复制一项功能。

在 Dropbox API 中，我可以调用一个函数，比如`put_file()`将文件上传到我的 Dropbox 帐户。

Dropbox实际上实现了每用户重复数据删除机制，这意味着您需要先将块/文件哈希传输到服务器，然后再将块/文件传输到服务器。如果你之前上传了一个文件 F，如果现在服务器找到一个哈希匹配，你不需要再次传输块/文件。

`put_file()`似乎每次都上传文件并且不进行分块。

我也发现`upload_chunk()`可能有用，但似乎没那么有用。

我想知道如何使用 Dropbox API 进行基于块的重复数据删除？

（比如我可以上传某个chunk的hash，服务器会回复我是否有hash匹配）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:31:32.153

根据[此公告](https://www.dropbox.com/developers/blog/21)，分块上传的目的是通过让您以块的形式上传大文件来处理不稳定的连接。这与重复数据删除无关。

如果您查看[Core API 文档](https://www.dropbox.com/developers/core/api)（实际上，阅读量并不大），则*没有*提及通过 API 提供的重复数据删除*。*无论您使用 Python 还是任何其他语言或库，如果没有已发布的支持重复数据删除的 API，您都无法访问此功能。

# objective-c - 在 UIViewController 中模拟 UIView

> ID：14892454
> 
> 赞同：1
> 
> 时间：2013-02-15T10:15:54.137
> 
> 标签：objective-c, cocoa, unit-testing, dependency-injection

当我使用简单界面的 UIViewController 时，考虑一个示例：

```
@interface MainViewController : UIViewController
@end 
```

当它接收到 viewDidLoad 或 viewDidAppear 消息时，它会创建并放置额外的视图。

当对它进行单元测试时，我想模拟这些视图，所以我需要将接口更改为：

```
@interface MainViewController : UIViewController

@property (nonatomic) UIView *additionalView1
@property (nonatomic) UIView *additionalView2

@end 
```

通过这样做，我将创建额外视图的责任转移到调用方，在我看来，这会破坏封装。

我怎样才能避免暴露这么多控制器内部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:18:05.757

要支持 setter 注入，您确实必须公开它。

有一些方法可以尝试隐藏它，或者将其标记为禁区。您可以将属性声明包装在`#if DEBUG`. 或者您可以将它们移动到 MainViewController_Private 中的类扩展。

但我发现这些技巧只会让代码更嘈杂。所以我的方法是继续揭露它们。正如我在[可测试性、信息隐藏和试图退出的类中](https://qualitycoding.org/testability-vs-hiding/)指出的那样，这种暴露可能是一个线索，表明一个类可能需要被提取，或者职责转移。例如，既然要注入这些视图，那么 MainViewController 真的应该创建它们吗？也许紧张导致我们做一个工厂，让 MainViewController 对这些视图的细节一无所知。

# c# - 文件“打开方式”我的 Windows 应用商店应用程序

> ID：14892461
> 
> 赞同：0
> 
> 时间：2013-02-15T10:16:05.820
> 
> 标签：c#, windows-runtime, windows-store-apps

我希望`Windows Store App`通过 Windows 资源管理器的“右键单击/打开方式”命令来处理打开 txt 文件。

我的应用程序完美地显示在可用应用程序列表中，我可以点击它，但我不知道应该注册哪个事件才能获取文件名和内容。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:21:28.537

请参阅 MSDN 上的这篇文章[如何处理文件激活](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh779669.aspx)

您需要处理 OnFileActivated 事件

```
protected override void OnFileActivated(FileActivatedEventArgs args)
{
       // TODO: Handle file activation

       // The number of files received is args.Files.Size
       // The first file is args.Files[0].Name
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T07:12:07.067

1.  在解决方案资源管理器中打开 package.appxmanifest。
2.  选择声明选项卡。
3.  从下拉列表中选择文件类型关联，然后单击添加。
4.  输入 txt 作为名称。
5.  输入 .txt 作为文件类型。
6.  输入“images\Icon.png”作为徽标。

在应用程序包中添加正确的图标

在 c# 中，您需要处理 OnFileActivated 事件

```
protected override void OnFileActivated(FileActivatedEventArgs args)
{
   // TODO: Handle file activation

   // The number of files received is args.Files.Size
   // The first file is args.Files[0].Name
} 
```

# django - Django 错误 u"'polls" 不是已注册的命名空间

> ID：14892462
> 
> 赞同：51
> 
> 时间：2013-02-15T10:16:06.113
> 
> 标签：django, namespaces

昨天我正在使用本教程开发我的第一个应用程序。这是一个民意调查和选择应用程序。第一页显示问题，当您单击问题时，它会显示您可以对它们投票的选项。

昨天我有很棒的人帮助了我，并告诉我使用命名空间。我已经阅读了命名空间教程并尝试将我的知识应用到场景中，但到目前为止还没有奏效。

当我点击第一页的问题时，这是我的错误。

```
 NoReverseMatch at /polls/5/

 u"'polls" is not a registered namespace

 Request Method:    GET
 Request URL:   http://127.0.0.1:8000/polls/5/
 Django Version:    1.4.3
 Exception Type:    NoReverseMatch
 Exception Value:   

 u"'polls" is not a registered namespace

 Exception Location:    C:\hp\bin\Python\Lib\site-packages\django\template\defaulttags.py in render, line 424
 Python Executable:     C:\hp\bin\Python\python.exe
 Python Version:    2.5.2
 Python Path:   

 ['C:\\djcode\\mysite',
  'C:\\hp\\bin\\Python\\python25.zip',
  'C:\\hp\\bin\\Python\\DLLs',
  'C:\\hp\\bin\\Python\\lib',
  'C:\\hp\\bin\\Python\\lib\\plat-win',
  'C:\\hp\\bin\\Python\\lib\\lib-tk',
  'C:\\hp\\bin\\Python',
  'C:\\hp\\bin\\Python\\lib\\site-packages',
  'C:\\hp\\bin\\Python\\lib\\site-packages\\win32',
  'C:\\hp\\bin\\Python\\lib\\site-packages\\win32\\lib',
  'C:\\hp\\bin\\Python\\lib\\site-packages\\Pythonwin']

 Server time:   Fri, 15 Feb 2013 21:04:10 +1100
 Error during template rendering

 In template C:\djcode\mysite\myapp\templates\myapp\detail.html, error at line 5
 u"'polls" is not a registered namespace
 1  <h1>{{ poll.question }}</h1>
 2  
 3  {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
 4  
 5  {% url 'polls:vote' poll.id %}
 6  {% csrf_token %}
 7  {% for choice in poll.choice_set.all %}
 8  <input type="radio" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" />
 9  <label for="choice{{ forloop.counter }}">{{ choice.choice_text }}</label><br />
 10     {% endfor %}
 11     <input type="submit" value="Vote" />
 12     </form> 
```

现在我知道问题隐藏在 detail.html、我的主要网址和名为 myapp URLCONF 和 views.py 的应用程序中

现在我的主要 URLconf 是：C:\djcode\mysite\mysite

```
 from django.conf.urls import patterns, include, url
 from django.contrib import admin
 from django.conf import settings
 # Uncomment the next two lines to enable the admin:
 # from django.contrib import admin
 admin.autodiscover()

 urlpatterns = patterns('',
     #url(r'^polls/', include('myapp.urls')),
     url(r'^polls/', include('myapp.urls', namespace='polls')),                   
     url(r'^admin/', include(admin.site.urls)),
 ) 
```

我的 app 文件夹名为 myapp，这是 myapp URLconf: C:\djcode\mysite\myapp

```
 from django.conf.urls import patterns, include, url
 from django.contrib import admin
 from django.conf import settings

 from django.conf.urls import patterns, include, url

 urlpatterns = patterns('myapp.views',
     url(r'^$', 'index'),
     url(r'^(?P<poll_id>\d+)/$', 'detail'),
     url(r'^(?P<poll_id>\d+)/results/$', 'results'),
     url(r'^(?P<poll_id>\d+)/vote/$', 'vote'),

) 
```

我在 myapp 中的 views.py 是：

```
 from django.http import HttpResponse
 from myapp.models import Poll ,choice
 from django.template import Context, loader
 from django.http import Http404
 from django.shortcuts import render_to_response, get_object_or_404
 from django.template import RequestContext

 def index(request):
     latest_poll_list = Poll.objects.all().order_by('-pub_date')[:5]
     return render_to_response('myapp/index.html', {'latest_poll_list': latest_poll_list})

 def results(request, poll_id):
     p = get_object_or_404(Poll, pk=poll_id)
     return render_to_response('myapp/results.html', {'poll': p})

 def vote(request, poll_id):
     p = get_object_or_404(Poll, pk=poll_id)
     try:
         selected_choice = p.choice_set.get(pk=request.POST['choice'])
     except (KeyError, Choice.DoesNotExist):
         # Redisplay the poll voting form.
         return render_to_response('myapp/detail.html', {
             'poll': p,
             'error_message': "You didn't select a choice.",
         }, context_instance=RequestContext(request))
     else:
         selected_choice.votes += 1
         selected_choice.save()
         # Always return an HttpResponseRedirect after successfully dealing
    # with POST data. This prevents data from being posted twice if a
         # user hits the Back button.
         return HttpResponseRedirect(reverse('myapp.views.results', args=(p.id,)))

 def detail(request, poll_id):
     p = get_object_or_404(Poll, pk=poll_id)
     return render_to_response('myapp/detail.html', {'poll': p},
                                context_instance=RequestContext(request)) 
```

我的 detail.html C:\djcode\mysite\myapp\templates\myapp

```
 <h1>{{ poll.question }}</h1>

 {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

 {% url 'polls:vote' poll.id %}
 {% csrf_token %}
 {% for choice in poll.choice_set.all %}
     <input type="radio" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" />
     <label for="choice{{ forloop.counter }}">{{ choice.choice_text }}</label><br />
 {% endfor %}
 <input type="submit" value="Vote" />
 </form> 
```

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-04-25T09:42:50.293

答案是将命名空间添加到您的根 URLconf。在 mysite/urls.py 文件（项目的 urls.py，而不是应用程序的）中，继续更改它以包含命名空间：

```
urlpatterns = patterns('',
url(r'^polls/', include('polls.urls', namespace="polls")),
url(r'^admin/', include(admin.site.urls)),
) 
```

此外，在教程[命名空间 URL 名称](https://docs.djangoproject.com/en/1.9/intro/tutorial03/#namespacing-url-names)的第 3 部分中，提到了使用*app_name*作为添加 polls 命名空间的公认方式。您可以在您的以下添加此行`polls/urls.py`：

```
app_name = 'polls'
urlpatterns = [
    ...
] 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-02-22T19:23:17.260

遵循相同的 Django 教程并具有相同的名称，我必须从以下位置更改`mysite/urls.py` ：

```
url(r'^polls/', include('polls.urls')), 
```

到：

```
 url(r'^polls/', include('polls.urls', namespace="polls")), 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-28T19:59:30.243

您需要将以下行添加到 detail.html 的顶部：

```
{% load url from future %} 
```

（请注意，您已经在 index.html 中使用了这一行，以便使用 polls 命名空间）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-12-20T15:04:21.980

**姜戈 2.0**

在你的***应用程序/urls.py***

```
from django.urls import path
from . import views

app_name = 'yourapp'

urlpatterns = [
    path('homepage/', views.HomepageView.as_view(), name='homepage'),
] 
```

在***urls.py***

```
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('yourapp/', include('yourapp.urls')),
    ] 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-12-28T21:43:38.920

在 myapp/urls.py 中添加以下模块级属性：

```
app_name = "polls" 
```

这将为该应用程序设置“应用程序命名空间名称”。当你反向使用“polls:submit”之类的名称时，Django 将在两个地方查找：应用程序名称空间（如上设置）和实例名称空间（使用“url”函数中的 namespace= 参数设置）。如果您的项目有多个应用程序实例，则后者很重要，但通常您想要的是前者。

我遇到了这个问题，并且在 url() 函数中设置 namespace= 似乎是错误的。

请参阅本教程的此条目：[https ://docs.djangoproject.com/en/1.9/intro/tutorial03/#namespacing-url-names](https://docs.djangoproject.com/en/1.9/intro/tutorial03/#namespacing-url-names)

更新：此信息对于 Django 1.9 是正确的。在 1.9 之前，将 namespace= 属性添加到 include 确实是正确的方法。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-07-06T12:07:49.757

我认为您错过了命名空间：

```
urlpatterns = patterns('',
    url(r'^polls/', include('polls.urls', namespace="polls")),
) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-15T10:56:44.953

```
 from django.conf.urls import patterns, include, url
 from django.contrib import admin
 from django.conf import settings

 urlpatterns = patterns('myapp.views',
     url(r'^$', 'index', name="index"),
     url(r'^(?P<poll_id>\d+)/$', 'detail', name="detail"),
     url(r'^(?P<poll_id>\d+)/results/$', 'results', name="results"),
     url(r'^(?P<poll_id>\d+)/vote/$', 'vote', name="vote"),
)

----------------------------------    

 <h1>{{ poll.question }}</h1>

 {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

 <form method="post" action="{% url myapp:vote poll.id %}">
 {% csrf_token %}
 {% for choice in poll.choice_set.all %}
     <input type="radio" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" />
     <label for="choice{{ forloop.counter }}">{{ choice.choice_text }}</label><br />
 {% endfor %}
 <input type="submit" value="Vote" />
 </form> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-09-10T19:47:18.430

将行替换为： `{% url 'polls:vote' poll.id %}` 为 `{% url 'vote' poll.id %}` 我解决了...

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-07-15T06:37:27.887

我也面临同样的问题。现在通过添加来修复 `app_name = "<name of your app>"`它`app/urls.py`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-27T11:10:56.120

命名空间应添加 polls/urls.py 文件。

```
url(r'^myapp/$', include('myapp.urls',  namespace ='myapp')), 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-21T14:06:37.840

**对于使用“django-hosts”的任何人：**

我有同样的错误，对我来说，将它添加到我的模板中解决了它（没有任何我们的命名空间等）：

```
{% load hosts %}
<a href="{% host_url 'YOUR_URL' host 'YOUR_HOST' %}">Admin dashboard</a> 
```

另外我添加`PARENT_HOST = 'YOUR_PARENT_HOST'`到我的 settings.py

[参考](https://django-hosts.readthedocs.io/en/latest/templatetags.html)

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2016-07-15T09:51:13.293

问题在教程中。在将命名空间（在您的情况下为“myapp”）添加到您的 URLconf 时，本教程使用以下代码行：

```
app_name = 'myapp' 
```

出于某种原因，Django 框架将其视为 unicode 字符串。相反，请将您的应用程序名称用双引号而不是单引号括起来。例如，

```
app_name = "myapp" 
```

这肯定会解决您的问题。我有同样的问题，这样做解决了它。

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2014-10-10T01:11:21.443

重新启动网络服务器。只是。

# iphone - 使用应用内购买从另一个应用购买应用

> ID：14892466
> 
> 赞同：6
> 
> 时间：2013-02-15T10:16:13.940
> 
> 标签：iphone, ios, in-app-purchase

我正在尝试在 iPhone SDK 中实现应用内购买，但我正在尝试从另一个应用购买应用。

是否可以实施？从第一个应用程序中，我打开一个被应用内购买锁定的功能。它必须将该功能作为设备中的另一个应用程序安装。这样所有者就可以使用应用内购买获得应用程序的钱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:26:08.990

您不能通过以下几点从使用应用内购买的应用购买应用：

> 11.1
> 
> 使用 App Store 以外的机制解锁或启用附加特性或功能的应用程序将被拒绝

有关更多详细信息，请[检查](https://developer.apple.com/appstore/resources/approval/guidelines.html#purchasing-currencies)。如果有任何问题请回复我。

# c# - Jquery拖放 - 无法拖回

> ID：14892470
> 
> 赞同：1
> 
> 时间：2013-02-15T10:16:35.327
> 
> 标签：c#, javascript, jquery

我希望能够通过在命运列表中拖动或删除按钮将项目放回他的原始位置列表。到目前为止，我已经能够将其拖到最终列表并将其从最终列表中删除，但是我找不到将其放回原始列表的方法。

这是我现在拥有的代码（此处的可测试版本：http: [//jsfiddle.net/PmVhd/](http://jsfiddle.net/PmVhd/)）：

```
<style>
h1 { padding: .2em; margin: 0; }
#products { float:left; width: 500px; margin-right: 2em; cursor: move }
#cart { width: 300px; float: left; margin-top: 1em; cursor: move }
#cart ol { margin: 0; padding: 1em 0 1em 3em; }
</style>
<script>
  $(function () {
      $("#catalog").accordion();
      $("#catalog li").draggable({
          helper: "clone"
      });
      $("#catalog ul").droppable({
          drop: function (event, ui) {
              $(ui.draggable).remove();
              $("<li></li>").text(ui.draggable.text()).appendTo(this);
          }
      });

      $("#cart ol").draggable({
          appendTo: "body",
          helper: "clone"
      });
      $("#cart ol").droppable({
          drop: function (event, ui) {
              $(ui.draggable).remove();
              $(this).find(".placeholder").remove();
              var el = $("<li>" + ui.draggable.text() + "</li>&nbsp;<a href='#'>[x]</a>").filter('a')
                  .click(function () {
                      el.remove();
                   }).end().appendTo(this);
          }
      });
  }); 
```

```
<div id="products">
<h1 class="ui-widget-header">Car Extras</h1>
<div id="catalog">
<h2><a href="#">Security</a></h2>
<div>
  <ul>
    <li id="1">ABS</li>
    <li id="2">ESP</li>
    <li id="3">Airbag</li>
  </ul>
</div>
<h2><a href="#">Confort</a></h2>
<div>
  <ul>
    <li>Air Conditioning</li>
    <li>Hands-free Phone</li>
    <li>Alligator Leather</li>
  </ul>
</div> 
```

```
<div id="cart">
<h1 class="ui-widget-header">My Car Extras</h1>
<div class="ui-widget-content">
<ol>
  <li class="placeholder">Add your items here</li>
</ol>
</div> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:37:55.150

经过长时间的搜索和测试，我找到了一个似乎涵盖所有内容的解决方案：

*   从列表拖动到收藏列表
*   按钮发送到收藏列表
*   拖回原来的Section
*   删除按钮以移回原始部分
*   淡入和淡出运动

所有这些都基于 JQuery 照片管理器示例：http: [//jqueryui.com/droppable/#photo-manager](http://jqueryui.com/droppable/#photo-manager)

模型：

```
public class FeatureDto
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class FeatureGroupDto
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class FeatureGroupFeaturesDto
{
    public FeatureGroupDto FeatureGroup { get; set; }
    public IList<FeatureDto> Features { get; set; }
} 
```

测试数据：

```
IList<FeatureGroupFeaturesDto> fcf = new List<FeatureGroupFeaturesDto>();

fcf.Add(new FeatureGroupFeaturesDto
{
    FeatureGroup = new FeatureGroupDto { Id = 1, Name = "Interior" },
    Features = new List<FeatureDto> { 
        new FeatureDto { Id = 7, Name = "Bancos Traseiros Rebatíveis" },
        new FeatureDto { Id = 35, Name = "Computador de Bordo" },
        new FeatureDto { Id = 38, Name = "Suporte para Telemóvel" }
    },
});

fcf.Add(new FeatureGroupFeaturesDto
{
    FeatureGroup = new FeatureGroupDto { Id = 2, Name = "Exterior" },
    Features = new List<FeatureDto> { 
        new FeatureDto { Id = 13, Name = "Barras de Tejadilho" },
        new FeatureDto { Id = 15, Name = "Retrovisores Aquecidos" },
        new FeatureDto { Id = 16, Name = "Retrovisores Elétricos" }
    },
}); 
```

代码包括基于测试数据和所有脚本的手风琴创建：

```
@model IEnumerable<Heelp.ViewModels.FeatureGroupFeaturesViewModel>

<div id="featuresList">
@foreach (var item in Model) {

    <h1>@item.FeatureGroup.Name</h1>

    <div>
        <ul id="fg@(item.FeatureGroup.Id)">
            @foreach (var feature in item.Features)
            {
                <li id="@feature.Id" class="feature">@feature.Name <a href="#" class="feature-send-to-my-list">[»]</a></li>
            }
        </ul>
    </div>
}
</div>

<h1>My Features</h1>
<div id="myFeatures">
    <ol></ol>
</div>
<div id="test"></div>
<style>
    .feature { cursor: move; }
    h1 { cursor: pointer; }
    #myFeatures ol { margin: 0; padding: 1em 0 1em 3em; background-color: lightgray; width: 200px; height: 100px; cursor: move; }
</style>
<script>
    $(function () {
        var $featuresList = $("#featuresList"), $myFeatures = $("#myFeatures");

        // Accordion
        $featuresList.accordion();

        // Features List | Drag
        $("ul > li", $featuresList).draggable({
            revert: "invalid",
            containment: "document",
            helper: "clone"
        });

        // My Features List | Drop
        $myFeatures.droppable({
            accept: "#featuresList li",
            drop: function (event, ui) {
                addToMyFeatures(ui.draggable);
            }
        })

        // Features List | Drop Back Again
        $featuresList.droppable({
            accept: "#myFeatures li",
            drop: function (event, ui) {
                removeFromMyFeatures(ui.draggable);
            }
        })

        // Add to MyFeatures List function
        var removeButton = "<a href='#' class='feature-remove-from-my-list'>[x]</a>";

        function addToMyFeatures($feature) {
            $feature.fadeOut(function () {
                $feature.find("a.feature-send-to-my-list").remove();
                $feature.find("span").remove();
                $feature
                    .append("<span style='display:none'>" + $feature.parent('ul').attr('id') + "</span>")
                    .append(removeButton)
                    .appendTo("ol", $myFeatures)
                    .fadeIn();
            });
        }

        // Remove from MyFeatures List function
        var addButton = "<a href='#' class='feature-send-to-my-list'>[»]</a>";

        function removeFromMyFeatures($feature) {
            $feature.fadeOut(function () {
                var featureGroup = "#" + $feature.find("span").text();
                $feature.find("a.feature-remove-from-my-list").remove();
                $feature
                    .append(addButton)
                    .appendTo(featureGroup)
                    .fadeIn();
            });
        }

        // Click event to add or remove Feature from My List
        $("#featuresList li").click(function (event) {
            var $item = $(this), $target = $(event.target);
            if ($target.is("a.feature-send-to-my-list")) {
                addToMyFeatures($item);
            }
            else if ($target.is("a.feature-remove-from-my-list")) {
                removeFromMyFeatures($item);
            }

            return false;
        })
    });
</script> 
```

# visual-studio-2012 - Bug：基于自制VS2012 Windows Store App模板的项目在使用魅力或契约时不会显示？

> ID：14892471
> 
> 赞同：2
> 
> 时间：2013-02-15T10:16:41.340
> 
> 标签：visual-studio-2012, windows-runtime

**问题**

基于自定义 VS2012 Windows Store 应用程序模板的项目在使用魅力或合同时不会显示。

**我使用的步骤：**

1.  创建了一个新项目，空白一个。
2.  基于此导出项目模板并让它自动安装
3.  重启VS以防万一
4.  基于模板创建新项目
5.  将其设置为共享目标
6.  运行项目

**问题：** 应用程序不会显示为共享目标等。

问题不在于合同的执行

# objective-c - 信号 SIGABRT，在尝试获取与注释的距离时

> ID：14892475
> 
> 赞同：0
> 
> 时间：2013-02-15T10:16:48.977
> 
> 标签：objective-c, cocoa-touch, mkmapview, userlocation, cllocationdistance

我正在尝试计算 userLocation 和我的注释（来自 plist）之间的距离，但是每次我运行 mapView 时都会收到信号 SIGABRT 错误。

我正在我的 mapViewController.m 中进行计算，并希望在我的 tableViewController 中显示计算值。

在我的 Annotations.h

```
#import <Foundation/Foundation.h>
#import <MapKit/MKAnnotation.h>

@interface Annotation : NSObject <MKAnnotation>

@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, assign) CLLocationDistance distance;
@property (nonatomic, copy) NSString * title;
@property (nonatomic, copy) NSString * subtitle;
@property (nonatomic, copy) NSString * sculptureIdKey;

@end 
```

我正在合成距离 = _distance; 在我的 Annotations.m 文件中。

在我的 mapViewController.m 中，我正在计算

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{
    for (Annotation *annotation in self.mapView.annotations)
    {
        CLLocationCoordinate2D coord = [annotation coordinate];
        CLLocation *annLocation = [[CLLocation alloc] initWithLatitude:coord.latitude longitude:coord.longitude];
        annotation.distance = [annLocation distanceFromLocation:newLocation];
        CLLocationDistance calculatedDistance = [annLocation distanceFromLocation:newLocation];
        annotation.distance = calculatedDistance;

        NSLog(@"Calculated Distance:%.2f m\n", calculatedDistance);
    }
} 
```

在我的 tableViewController.h

```
#import "mainViewController.h"
#import "mapViewController.h"
#import "Annotation.h"

@interface ListViewController : UITableViewController <UITableViewDataSource, UITableViewDelegate, CLLocationManagerDelegate>

@property (readonly) CLLocationCoordinate2D selectedCoordinate;
@property (nonatomic, assign) CLLocationDistance distance;
@property (nonatomic, strong) CLLocationManager *locationManager;
@property (nonatomic, strong) CLLocation *userLocation;
@property (nonatomic, strong) NSArray *locationsArray;

@end 
```

和 tableViewController.m

```
#import "ListViewController.h"
#import "customCell.h"

@interface ListViewController ()

@end

@implementation ListViewController
@synthesize locationsArray = _locationsArray;
@synthesize locationManager = _locationManager;
@synthesize selectedCoordinate = _selectedCoordinate;
@synthesize distance = _distance;

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.locationsArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    static NSString *CellIdentifier = @"Cell";
    customCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    if (!cell)
    {
        cell = [[customCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.customTitle.text = [[self.locationsArray objectAtIndex:indexPath.row] valueForKey:@"sculptureNameKey"];
    cell.customSubTitle.text = [[self.locationsArray objectAtIndex:indexPath.row] valueForKey:@"sculptureAddressKey"];
    cell.distanceLabel.text = [NSString stringWithFormat:@"Nice distance:%f m\n", _distance];

    return cell;
} 
```

我在日志中的输出如下

```
2013-02-15 11:05:50.769 TalkingSculpture[11639:c07] Calculated Distance:83971.36 m
2013-02-15 11:05:50.770 TalkingSculpture[11639:c07] Calculated Distance:83406.16 m
2013-02-15 11:05:50.771 TalkingSculpture[11639:c07] Calculated Distance:86002.30 m
2013-02-15 11:05:50.771 TalkingSculpture[11639:c07] -[MKUserLocation setDistance:]: unrecognized selector sent to instance 0xee4f080
2013-02-15 11:05:50.772 TalkingSculpture[11639:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[MKUserLocation setDistance:]: unrecognized selector sent to instance 0xee4f080'
*** First throw call stack:
(0x1b44012 0x1460e7e 0x1bcf4bd 0x1b33bbc 0x1b3394e 0x3ef8 0x3637e 0x3593f 0x339c5 0x2f175 0x1b03920 0x1ac6d31 0x1aeac51 0x1ae9f44 0x1ae9e1b 0x1a9e7e3 0x1a9e668 0x3a4ffc 0x43ed 0x2535)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-03T00:44:37.960

在设置注释距离的 for 循环中，您需要检查注释是否不是 MKUserLocation，因为它是 self.mapView.annotations 之一。否则，“annotation.distance”将应用于没有距离属性的 MKUserLocation。这是您的代码的更新：

```
for (Annotation *annotation in self.mapView.annotations)
{
    if (![annotation isKindOfClass:[MKUserLocation class]]) //<-- Need this check
    {
        CLLocationCoordinate2D coord = [annotation coordinate];
        CLLocation *annLocation = [[CLLocation alloc] initWithLatitude:coord.latitude longitude:coord.longitude];
        annotation.distance = [annLocation distanceFromLocation:newLocation];
        CLLocationDistance calculatedDistance = [annLocation distanceFromLocation:newLocation];
        annotation.distance = calculatedDistance;

        NSLog(@"Calculated Distance:%.2f m\n", calculatedDistance);
    }
} 
```

# report - 报告应用程序 Pascal - 变量值未正确显示

> ID：14892480
> 
> 赞同：0
> 
> 时间：2013-02-15T10:17:05.197
> 
> 标签：report, pascal, delphi

我正在使用报表生成器构建报表。它使用基于 Delphi Object Pascal 的 Report Application Pascal。我仍在学习这一点并在变量值上苦苦挣扎。

我有一个名为“duration”的变量，其中包含以下脚本：

```
value := round(ReportWizardQuery['wodFinishDate'] - ReportWizardQuery    
['wodCreateDate']); 
```

这给了我想要的结果。它计算两个日期之间的总天数。

然后我要做的是使用此“持续时间”变量的值来确定作业（由开始和结束日期定义）是否已在同一天完成，在 1-5 天内，6 -10 天等。

我已经创建了带有这些标题的列，并在报告的详细信息区域的每一列中放置了一个变量。我在“同一天”变量中编写的代码是：

```
if (duration = 0) then
value := 1; 
```

对于在 1 - 5 天内完成的工作也是如此

```
if (duration > 0 and < 6) then
value := 1; 
```

但报表运行时变量为空白。我试图将“持续时间”变量的值分配给同一天变量的值，它返回一个奇怪的数字，报告中的每一行都相同（99468080 或 10150660...等）这个数字每次运行报告时都会发生变化，并且似乎总是 8 位数长。

有没有人知道我做错了什么以及如果持续时间变量 = 0 或介于 1 - 5 之间等，我如何为每个变量分配值 1。

谢谢。

# ruby - 如何使用 savon 创建对象以访问 WSDL 中的复杂类型名称

> ID：14892481
> 
> 赞同：0
> 
> 时间：2013-02-15T10:17:07.070
> 
> 标签：ruby, wsdl, savon

我是 SAVON 的新手，ruby 这是我从客户那里得到的第一个任务。因此，非常感谢任何帮助。

```
<complexType name="CEvent">
 <annotation>
  <documentation>The base used for all events. All events extend this structure.</documentation> 
  </annotation>
 <complexContent>
 <extension base="ttns:CItemWithDBRecordId">
 <sequence>
  <element name="user" type="xsd:string" minOccurs="0" maxOccurs="1" nillable="true" /> 
  <element name="date" type="xsd:dateTime" minOccurs="1" maxOccurs="1" nillable="false" /> 
  <element name="notes" type="xsd:string" minOccurs="0" maxOccurs="1" nillable="true" /> 
  <element name="eventaddorder" type="xsd:short" minOccurs="1" maxOccurs="1" /> 
  <element name="name" type="xsd:string" minOccurs="0" maxOccurs="1" nillable="true" /> 
  <element name="parenteventid" type="xsd:long" minOccurs="0" maxOccurs="1" /> 
  <element name="attachmentlist" type="ttns:ArrayOfCFileAttachment" minOccurs="0" maxOccurs="1" nillable="true" /> 
  <element name="fieldlist" type="ttns:ArrayOfCField" minOccurs="0" maxOccurs="1" nillable="true" /> 
  <element name="resultingstate" type="xsd:string" minOccurs="0" maxOccurs="1" nillable="true" /> 
  <element name="hours" type="xsd:double" minOccurs="0" maxOccurs="1" /> 
  <element name="assigntolist" type="ttns:ArrayOfstring" minOccurs="0" maxOccurs="1" nillable="true" /> 
  <element name="releasenotesversion" type="xsd:string" minOccurs="0" maxOccurs="1" nillable="true" /> 
  <element name="generatedeventtype" type="xsd:string" minOccurs="0" maxOccurs="1" nillable="true" /> 
  <element name="generatedbyname" type="xsd:string" minOccurs="0" maxOccurs="1" nillable="true" /> 
  <element name="totaltimespent" type="xsd:double" minOccurs="0" maxOccurs="1" /> 
  <element name="overrideuser" type="xsd:string" minOccurs="0" maxOccurs="1" nillable="true" /> 
  <element name="marksuspect" type="xsd:boolean" minOccurs="0" maxOccurs="1" /> 
  </sequence>
  </extension>
  </complexContent>
  </complexType> 
```

而且我不知道如何获得它，还需要使用我的输入数据更新元素的字段。

我以这种方式访问​​复杂名称。

响应 = @client.request 'CEvent'

我得到的回应是

(SOAP-ENV:Client) 方法“ins0:CEvent”未实现：方法名称或名称空间无法识别

我确定这不是方法，因为它不是方法名称，所以我还在挠头来解决这个问题。！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:03:52.803

我最近刚刚完成了一个使用 SAVON 访问 Microsoft SharePoint 上的 SOAP 服务的项目。您应该能够使用 Savon 请求返回的哈希值访问响应数据。

response.hash[:annotation][:complexContent][:sequence]

看看下面我网站上的文章。它不是特定于您的要求，但可能会有所帮助。

[http://mark.stratmann.me/content_items/using-savon-to-connect-to-microsoft-sharepoint-soap-services-in-rails-3-2](http://mark.stratmann.me/content_items/using-savon-to-connect-to-microsoft-sharepoint-soap-services-in-rails-3-2)

# php - 未发布新输入

> ID：14892482
> 
> 赞同：0
> 
> 时间：2013-02-15T10:17:13.657
> 
> 标签：php, html, forms, post, xdebug

我有一个包含 6 个不同类型输入的表单（选择、单选、文本......）。当我使用 Xdebugg 进行调试时，我可以看到 $_POST 变量中的值，

我决定添加其他输入，但它们没有发布：当我查看 $_POST 变量时，我只有前 6 个值。

这是我的表格的一部分：编辑：这次我复制/粘贴了代码。**我的老板告诉我不要发送真实代码，这就是我发送假代码的原因，**但我真的需要一些帮助，所以这是真实的。

```
<div id="modifierUser" class="divAdmin">                                
   <form id="modifierUserForm" name="modifier_user"action="includes/inc_adminModifierUser.php">
      <fieldset>
         <legend>
            <img src="img/bulle_48.png" alt="bulle" title="bulle" />
            <h3>Modifier le compte</h3><br />
         </legend>
         <!-- the field i've tried to add -->
         <label class ="labelEmail" for="idmembre">ID du membre </label>
         <input id="idmembre" name="idmembre" size="35" class="required"/>
         <!-- -->

         <label class ="labelEmail" for="pseudo">Utilisateur </label>
         <input id="pseudo" name="pseudo" size="35" class="required"/>

         <label class ="labelEmail" for="anneeNaiss">Ann&eacute;e de naissance </label>
         <input id="anneeNaiss" name="anneeNaiss" placeholder="e.g : 1984" size="35" class="required" maxlength="4" value="" />

         <label class ="labelEmail" for="email">Email </label>
         <input id="mail" type="email" name="email" size="35" class="email" value="" maxlength="50"/>

         <label class ="labelEmail" for="telephone">T&eacute;l&eacute;phone</label>
         <input id="telephone" type="tel" name="telephone" size="35" class="required" value="" maxlength="10" />

         <label class ="labelEmail"> Masquer num&eacute;ro dans l'annonce</label>
         <input type="radio" name="masquerTel" value="oui" id="oui" checked="checked" />
         <span>Oui</span>
         <input type="radio" name="masquerTel" value="non" id="non" /><span>Non</span>

         <label class ="labelEmail" for="region">R&eacute;gion</label>
         <select id="region" name="region" size="1" class="required" style="width:180px"
            <option value="Aquitaine" selected="selected" >Aquitaine </option>
            <option value="Alsace">Alsace </option>
            <!-- There's many options there-->
        </select>

        <input type="submit" name="enregistrer" value="Enregistrer les modifications" size="35"/>
        <input type="button" name="annuler" class="annuler" value="ANNULER" />    
     </fieldset>   
  </form>                            
</div><!--fin modifierUser--> 
```

我可以看到的变量：

$_POST['伪']

$_POST['anneNaiss']

$_POST['电子邮件']

$_POST['电话']

$_POST['masquerTel']

$_POST['区域']

无论我添加多少输入，我都会在 xdebug 中使用 $_POST[6]。但我试图抑制上述 6 个输入之一，我得到了 $_POST[5]。

我需要看的那个 $_POST['idmembre']

抱歉浪费您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:20:23.560

看起来好像没有发布值，因为您拼错了“action”，在表单元素的起始标记中将其称为“ation”。`<form>`.

因此，您的表单将发布到它输出的同一页面，而不是您尝试将数据发布到的页面。

**您的代码的第一行应如下所示：**

```
<form id="modifyUserForm" name="modify_user" action="includes/inc_adminModifyUser.php"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:56:17.987

您的代码中似乎有一个额外的双引号，因此您的 HTML 代码无法正确呈现是正常的：

```
 <input id="inp_realname" name="realname" size="35" "/> 
```

应该：

```
 <input id="inp_realname" name="realname" size="35" /> 
```

# sqlite - SQLite 选择两个表匹配的单个列

> ID：14892487
> 
> 赞同：0
> 
> 时间：2013-02-15T10:17:23.507
> 
> 标签：sqlite, select, where

您好想要获取一个表的单个列的所有条目，其中两个表的两个列匹配（如`join`）。

到目前为止，我使用以下`where`语句成功提取了两个表的所有列：

```
SELECT * FROM table1, table2 WHERE table1.AB_ID=table2.AB_ID 
```

但是当我只想选择一个列时它不起作用：

```
SELECT colX FROM table1 WHERE table1.AB_ID=table2.AB_ID 
```

可能是一个相当简单的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:23:27.033

我认为您需要使用联接：

```
SELECT table1.colX from table1 INNER JOIN table2 ON table1.AB_ID=table2.AB_ID; 
```

# android - 如果有办法在 google play 上检查设备兼容性而无需上传

> ID：14892488
> 
> 赞同：8
> 
> 时间：2013-02-15T10:17:27.550
> 
> 标签：android, android-manifest, google-play

将 Android 应用程序上传到市场时，Google Play 会根据您的应用程序清单设置确定兼容设备列表，例如：

*   使用许可
*   使用功能
*   使用-sdk
*   支持屏幕

直到现在我发现我必须调整我的清单，以便只有在将我的应用程序上传到 Google Play 之后才能让我的应用程序在更多设备上可用。

有没有办法在将设备上传到市场之前检查设备的兼容性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T11:01:32.387

[在http://developer.android.com/guide/topics/manifest/uses-feature-element.html](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)中提到的 SDK 中有这个“aapt”工具，它会给你你所要求的。

但是，我从未使用过这个工具，我仍然相信上传文件是确保一切正常的最佳方式。当然，这需要更多时间，但至少，您可以放心得到最终答案。

# jsf - JSF collapsibleSubTableToggler 给出错误

> ID：14892491
> 
> 赞同：0
> 
> 时间：2013-02-15T10:17:34.800
> 
> 标签：jsf, richfaces, facelets

这是关于 JSF 1.3 的。我有可折叠/可扩展数据表的要求，我尝试了`<rich:collapsibleSubTableToggler>`在此站点中找到的解决方案： [http ://showcase.richfaces.org/richfaces/component-sample.jsf?demo=subTableToggleControl&skin=blueSky](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=subTableToggleControl&skin=blueSky)

这正是我想要的，它在运行时给出了下面给出的错误

> 错误渲染视图[/pages/wxyz/xyzzz.xhtml `<rich:collapsibleSubTableToggler>`标签库支持命名空间：[http](http://richfaces.org/rich) ://richfaces.org/rich ，但没有为名称定义标签：collapsibleSubTableToggler

任何人都可以建议我一个解决方案或替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:41:35.237

[http://showcase.richfaces.org](http://showcase.richfaces.org)网站展示了 RichFaces 4.0。您的错误消息表明您使用的是 RichFaces 3.x。然后，您不应该看 RichFaces 4.0 的展示，而是 RichFaces 3.3 的展示[http://livedemo.exadel.com/richfaces-demo/richfaces/actionparam.jsf](http://livedemo.exadel.com/richfaces-demo/richfaces/actionparam.jsf)

为了使用`rich:collapsibleSubTableToggler`，升级到 JSF 2.x / RichFaces 4.0。

顺便说一句，JSF 1.3 不存在。也许您的意思是说 JSF 1.2。

# google-apps-script - Google Apps 脚本：复制页眉/页脚

> ID：14892492
> 
> 赞同：0
> 
> 时间：2013-02-15T10:17:39.147
> 
> 标签：google-apps-script, google-docs

我尝试将 Google 驱动器中文档的元数据复制到另一个。像页面尺寸、查看器、编辑器和页眉/页脚的内容。但是标题不会被复制。有人知道为什么吗？

附加信息：appendElementToDoc 仅搜索附加方法并调用它们，例如 appendParagraph。这对于复制文档的内容非常有用。

```
/**
 * Copy elements to new doc
 */
function appendElementToDoc(bulk, element) {

  var tName = underscoreToCamelCase(element.getType() + "");  
  Logger.log(tName + "");
  try {
    bulk["append" + tName](element);
  }
  catch(err) {    
    Logger.log(err + "");
  }   
  return bulk;
}

/**
 * Transform typename to functio name
 */
function underscoreToCamelCase(type) {

  type = type.toLowerCase();
  var tName = type.charAt(0).toUpperCase() + type.slice(1);

  var parts = tName.split("_");
  if(parts.length == 2) {
    tName = parts[0] + parts[1].charAt(0).toUpperCase() + parts[1].slice(1);
  }

  return tName;
}

/**
 * Getting bulk document to insert content
 *
 * @param Document
 * @return Document
 */
function getBulkDocument(template) {

  var bulk = DocumentApp.create("Bulk Letter");
  bulk.setMarginBottom(template.getMarginBottom());
  bulk.setMarginLeft(template.getMarginLeft());
  bulk.setMarginRight(template.getMarginRight());
  bulk.setMarginTop(template.getMarginTop());

  bulk.setPageHeight(template.getPageHeight());
  bulk.setPageWidth(template.getPageWidth());

  var header = bulk.addHeader(); 
  for (var i = 0; i < template.getHeader().getNumChildren(); i++) {
      appendElementToDoc(header, template.getHeader().getChild(i).copy());
  }

  var footer = bulk.addFooter();
  for (var i = 0; i < template.getFooter().getNumChildren(); i++) {
      appendElementsToDoc(footer, template.getFooter().getChild(i).copy());
  } 

  var editors = template.getEditors();
  for (var i = 0; i < editors.length; i++) {
    bulk.addEditor(editors[i])
  }

  var viewers = template.getViewers();
  for (var i = 0; i < editors.length; i++) {
    bulk.addViewer(viewers[i])
  }

  //move to folder
  DocsList.getFileById(bulk.getId()).addToFolder(DocsList.getFolder("tmp"));

  return bulk;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:35:02.683

在以正确的方式调用 getBulkDocument 之后，我确实使用固定的 documentID 调用了该函数。但最好在此之前使用它：

```
if(!bulk.getFooter()) {
  var footer = bulk.addFooter();
} else {
  var footer = bulk.getFooter();
} 
```

完整的例子，复制将在我的博客上......

# xml - 将 BIRT Rowdata 与 XML 数据源连接

> ID：14892498
> 
> 赞同：0
> 
> 时间：2013-02-15T10:17:50.440
> 
> 标签：xml, join, datasource, birt

我有一个包含来自普通数据库的数据的 BIRT 报告。但我需要来自 xml 源 (URL) 的其他数据，这需要数据行中的参数。它是从 id 获取的大型 xml 源中提取的一小部分，因此我必须逐行加载 xml。

使用从行数据构建的 url-parameters 获取其他 xml 数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:59:35.117

自己找解决办法

1.  定义脚本数据源
2.  定义数据源的脚本化数据集
3.  定义输出列
4.  定义 id 作为参数
5.  通过 id 加入报表上的数据集
6.  创建 ScriptedDataSetEventAdapter 的 java 类，覆盖 fetch 方法并使用 dataSet.getInputParameters() 获取 id
7.  用标准java技术调用数据

# google-maps-api-3 - 谷歌地图中的自定义标记图标在动画之前弹出

> ID：14892499
> 
> 赞同：3
> 
> 时间：2013-02-15T10:17:51.837
> 
> 标签：google-maps-api-3, google-maps-markers

我有以下代码向我的地图添加标记：

```
var marker = new google.maps.Marker({
    icon: '/pin.png',
    map: map,
    position: latlng,
    draggable: false,
    title: trip_name,
    animation: google.maps.Animation.DROP
}); 
```

一切正常，除了图标在运行动画之前弹出一秒钟。有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T15:55:43.130

我遇到了同样的行为，我发现进一步定义自定义图标有助于解决这个问题。

```
var image = {
    url: 'images/map_marker.png',
    // This marker is 20 pixels wide by 30 pixels tall.
    size: new google.maps.Size(20, 30),
    // The origin for this image is 0,0.
    origin: new google.maps.Point(0,0),
    // The anchor for this image is the base of the image at 0,30.
    anchor: new google.maps.Point(10, 30)
};

var marker = new google.maps.Marker({
   icon: image,
   map: map,
   position: latlng,
   draggable: false,
   title: trip_name,
   animation: google.maps.Animation.DROP
}); 
```

# javascript - IE8 问题中的动态 HTML 表单元素数组

> ID：14892502
> 
> 赞同：0
> 
> 时间：2013-02-15T10:17:57.853
> 
> 标签：javascript, dom

在 IE 中处理动态 HTML 文本框数组元素时遇到问题。这就是我正在做的事情：

我正在使用 DOM (document.createElement) 动态创建新的文本框数组元素......它将是这样的：

```
element = document.createElement('input');
element.setAttribute('type','text');
element.setAttribute('name','txtBox[]');
element.setAttribute('value','somevalue'); 
```

然后，我将使用 GET（是的，我需要这个）作为操作提交表单。在 URL 中，文本框数组值是 URL 编码的，例如：

?txtBox%5B%5D=17&txtBox%5B%5D=22

它只在 IE、FF 和 Chrome 中发生。

# ios - 如何在objective-c中解析数组JSON

> ID：14892505
> 
> 赞同：3
> 
> 时间：2013-02-15T10:18:03.647
> 
> 标签：ios, objective-c, json

我在 Android 中轻松做到了，但我几乎没有在 iOs 中做到这一点。我的json就像：

```
[{"name":"qwe","whatever1":"asd","whatever2":"zxc"}, 
{"name":"fgh","whatever1":"asd","whatever2":"zxc"}] 
```

如果我做：

```
NSData *jsonData = [data dataUsingEncoding:NSUTF32BigEndianStringEncoding];

rows  = [NSJSONSerialization JSONObjectWithData: jsonData options: NSJSONReadingMutableContainers error: &error]; 
```

我可以在行中访问吗？

```
NSString *name = [[rows objectAtIndex:0] [objectForKey:@s"name"]]; 
```

或者我该怎么做？谢谢。

**终于** `NSString *name = [[rows objectAtIndex:0] objectForKey:@"name"]];`成功了！:D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:22:13.907

我认为这会起作用，但是你想要：

```
NSString *name = [[rows objectAtIndex:0] objectForKey:@"name"]; 
```

（删除无关的方括号并`@"name"`用作字符串文字）。

然而，输入的 JSON 真的是 UTF-32 格式吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T10:25:33.290

```
NSMutableArray *row= [NSJSONSerialization JSONObjectWithData: jsonData options:        NSJSONReadingMutableContainers error: &error];
        for (int i=0; i<[row count]; i++) {
            NSMutableDictionary *dict=[row objectAtIndex:i];;
            NSString * name=[dict valueForKey:@"name"];
            NSLog(@"%@",name);
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T10:41:00.820

假设`NSJSONSerialization`操作成功，只需：

```
NSString *name = rows[0][@"name"]; 
```

`NSUTF32BigEndianStringEncoding`是可疑的，json数据更常见`NSUTF8StringEncoding`。

# android - 计算android中动态添加元素的数量

> ID：14892506
> 
> 赞同：0
> 
> 时间：2013-02-15T10:18:04.613
> 
> 标签：android

我的应用程序包含一个按钮，该按钮在每次单击时动态添加 EditText 框。我打算为每个添加的框设置一个 ID。我正在使用 setId() 方法执行此操作。但我无法引用新添加的框。是否可以使用任何循环设置 ID，然后通过该 ID 号引用？我的代码如下：

```
super.onCreate(savedInstanceState);
    setContentView(R.layout.time_table);
    l1 = (LinearLayout) findViewById(R.id.linear1);
    edit = (EditText) findViewById(R.id.editText1);
    // tv = (TextView)findViewById(R.id.textView1);
    b1 = (Button) findViewById(R.id.button1);
    b2 = (Button) findViewById(R.id.button2);

    b1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            int i = 0;
            ed = new EditText(Table.this);
            l1.addView(ed);
            ed.setHint("Column Name");
            ed.setId(i);
            i++;
            int n = ed.getId();
            EditText editn = (EditText) findViewById(n);
            editn.setText("new item");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:22:53.563

只要有一个计数变量：

```
int count = 100; 
```

每次创建视图时，`setId(count + 1);`

获得最后一个视图`R.id.count`，其他类似。

更优雅的灵魂将是：

每次设置 ID 时，将 id 存储在 ArrayList 中。

# c# - 如何使用 EF（DB first）正确实现 DI？

> ID：14892513
> 
> 赞同：0
> 
> 时间：2013-02-15T10:18:20.213
> 
> 标签：c#, asp.net-mvc, architecture, dependency-injection, ninject

我正在尝试在我的项目中实现 DI（如果确实重要，请使用 Ninject）。现在我有`QuestionController`，它正在使用`QuestionRepository`：

```
 private readonly IQuestionRepository _questionRepository;

    public QuestionsController(IQuestionRepository questionRepository)
    {
        _questionRepository = questionRepository;
    } 
```

这没关系，但我`QuestionRepository`需要`AskEntities`对象，`AskEntities`EF 设计器生成的类在哪里。所以现在`QuestionRepository`我有：

```
 private AskEntities Db; 
```

如何实现不是类而是接口（类似于`IAskEntities`）？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:12:23.743

> 但我的 QuestionRepository 需要 AskEntities 对象，其中 AskEntities 是 EF 设计器生成的类。所以现在在 QuestionRepository 我有`private AskEntities Db;`How to implement there not class but interface (something like IAskEntities) ？

出色地。我假设您的 AskEntities 对象是您的`DbContext`? 由于您的存储库实现特定于实体框架，我认为没有理由从您的存储库类中抽象出该依赖项。

您当然可以发送`DbContext`基类并用于`context.Set<Question>`访问不同的集合。但这会给你带来什么好处？您通常只为存储库类编写集成测试，因此无需创建另一个抽象。

# java - 如何强制选择组中的至少一个复选框？

> ID：14892515
> 
> 赞同：3
> 
> 时间：2013-02-15T10:18:29.910
> 
> 标签：java, swing, checkbox, buttongroup

ButtonGroup 用于单选按钮并确保仅选择组中的一个，我需要复选框以确保至少选择一个，可能是几个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:18:29.910

我的解决方案是使用自定义 ButtonGroup：

```
/**
 * A ButtonGroup for check-boxes enforcing that at least one remains selected.
 * 
 * When the group has exactly two buttons, deselecting the last selected one
 * automatically selects the other.
 * 
 * When the group has more buttons, deselection of the last selected one is denied.
 */
public class ButtonGroupAtLeastOne extends ButtonGroup {

    private final Set<ButtonModel> selected = new HashSet<>();

    @Override
    public void setSelected(ButtonModel model, boolean b) {
        if (b && !this.selected.contains(model) ) {
            select(model, true);
        } else if (!b && this.selected.contains(model)) {
            if (this.buttons.size() == 2 && this.selected.size() == 1) {
                select(model, false);
                AbstractButton other = this.buttons.get(0).getModel() == model ?
                        this.buttons.get(1) : this.buttons.get(0);
                select(other.getModel(), true);
            } else if (this.selected.size() > 1) {
                this.selected.remove(model);
                model.setSelected(false);
            }
        }
    }

    private void select(ButtonModel model, boolean b) {
        if (b) {
            this.selected.add(model);
        } else {
            this.selected.remove(model);
        }
        model.setSelected(b);
    }

    @Override
    public boolean isSelected(ButtonModel m) {
        return this.selected.contains(m);
    }

    public void addAll(AbstractButton... buttons) {
        for (AbstractButton button : buttons) {
            add(button);
        }
    }

    @Override
    public void add(AbstractButton button) {
        if (button.isSelected()) {
            this.selected.add(button.getModel());
        }
        super.add(button);
    }
} 
```

以下是如何使用它：

```
new ButtonGroupAtLeastOne().addAll(checkBox1, checkBox2) 
```

欢迎所有建议。

# php - jQuery：按钮单击触发多次

> ID：14892516
> 
> 赞同：1
> 
> 时间：2013-02-15T10:18:30.300
> 
> 标签：php, javascript, jquery, ajax

在我的网站上，我有多个按钮，每个按钮都通过 ajax 从同一个文件加载到网站上两次。

虽然我的问题是如果同一个按钮被加载两次，这个事件会触发两次。虽然如果只加载一个按钮，它就可以正常工作。

我的代码：

索引.php

```
<div id="firstButtonContainer">
</div>

<div id="secondButtonContainer">
</div>

<script>

    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js";
    script.onload = function(){

        $.ajax({
            url: '/test/firstButtonContainer.php',
            success: function(msg) {
                jQuery('#firstButtonContainer').html(msg);
            }
        });

        $.ajax({
            url: '/test/secondButtonContainer.php',
            success: function(msg) {
                jQuery('#secondButtonContainer').html(msg);
            }
        });

    };document.body.appendChild(script);

</script> 
```

按钮.php

```
<button class="testbutton">Button1</button>
<button class="testbutton">Button2</button>
<button class="testbutton">Button3</button>
<button class="testbutton">Button4</button>

<script>

var script = document.createElement("script");
script.type = "text/javascript";
script.src = "//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js";
script.onload = function(){

$(".testbutton").on("click", function(event){
  alert("this should only appear once");
});

};document.body.appendChild(script);

</script> 
```

firstButtonContainer.php

```
<div id="buttons">
</div>

<script>
$.ajax({
    url: '/test/buttons.php',
    success: function(msg) {
        jQuery('#buttons').html(msg);
    }
});
</script> 
```

secondButtonContainer.php

```
<div id="buttonsTwo">
</div>

<script>
$.ajax({
    url: '/test/buttons.php',
    success: function(msg) {
        jQuery('#buttonsTwo').html(msg);
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:24:16.507

尝试

```
$(".testbutton").on("click", function(event){
  event.preventDefault();
  alert("this should only appear once");
});
```

**或者**

```
$(".testbutton").on("click", function(event){
  event.stopPropagation();
  alert("this should only appear once");
});
```

[**event.stopPropagation()**](http://api.jquery.com/event.stopPropagation/)

描述：防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

[**event.preventDefault()**](http://api.jquery.com/event.preventDefault/)

说明：如果调用该方法，则不会触发事件的默认动作。

**评论回复**

**索引.php**

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    $(function()
    {
        $.ajax({
            url: 'test/firstButtonContainer.php',
            success: function(msg) {
                jQuery('#firstButtonContainer').html(msg);
            }
        });

        $.ajax({
            url: 'test/secondButtonContainer.php',
            success: function(msg) {
                jQuery('#secondButtonContainer').html(msg);
            }
        });

        $(".testbutton").live("click", function(event)
        {
            event.preventDefault();
            alert("this should only appear once");
        });
    });

</script>

<div id="firstButtonContainer">
</div>

<div id="secondButtonContainer">
</div>
```

**按钮.php**

```
<button class="testbutton">Button1</button>
<button class="testbutton">Button2</button>
<button class="testbutton">Button3</button>
<button class="testbutton">Button4</button>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-21T18:56:14.240

One reason is that you bind the same event more than once, each bind count,
so, if this is the reason, you can solve it in this way:

```
// unbind the same event, before you bind it,
$("xxx").unbind("click").bind("click", function() {
    // ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:43:11.820

你的代码对我来说有点奇怪！发生这种情况是因为每次通过 AJAX 调用获取 HTML 时，您都会将新的事件处理程序绑定到所有按钮，因为您使用了 css 类选择器。为了解决这个问题，我有两个建议：

1-使用更复杂的 PHP 代码为每个按钮生成一个随机（或某种模式）ID，并使用该唯一 ID 绑定新事件。

```
<?php
$id = "btn_id_" . rand (100,1000);
?>
<buttom class='whatever' id='<?php echo $id; ?>'>

$("#<?php echo $id; ?>").on("click", function(event){
  alert("this should only appear once");
}); 
```

2-如果您不喜欢上述解决方案，只需在 AJAX 请求之外使用 jQuery 实时触发器：

一个。从buttons.php中删除你的onload脚本

湾。将以下 javascript 代码添加到您的 index.php

```
<script>
(".testbutton").live ( 'click', function () {
   alert ( "This happens only once!" );
});
</script> 
```

每件事都应该没问题。jQuery live 事件处理每个新添加的元素，选择器并将事件处理程序附加到它并保证只发生一次。

**我个人的选择是项目编号。1**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T10:23:26.027

您的按钮没有正确触发 ajax 调用，它们都应该具有唯一的 id（即 testbutton1、testbutton2 等），并且在 jQuery 中确实具有 onclick 触发器，如下所示：

```
$("#testbutton1").click(function(){
  // do ajax call here for button1           
}); 
```

# c++ - 检查字符串是否可转换为 std::tuple 的第 n 个元素

> ID：14892522
> 
> 赞同：0
> 
> 时间：2013-02-15T10:18:45.660
> 
> 标签：c++, templates, c++11, tuples

我有一个 std::tuple 类型，需要检查一个字符串是否可以反序列化为其元素之一。元素的索引和字符串仅在运行时才知道。

我的解决方案（如下）几乎可以工作，但在使用时会产生编译器错误`std::tuple_element`，给出：

> 错误：无效使用不完整类型 'struct std::tuple_element<0ul, std::tuple&>

```
#include <sstream>
#include <tuple>

template<class Tuple, std::size_t N>
struct IsDeserializable {
  static void check(std::size_t idx, std::stringstream& in) {
    IsDeserializable<Tuple, N-1>::check(idx, in);
    if (idx == N-1) {
      typename std::tuple_element<N-1,Tuple>::type tmp;
      in >> tmp;
    }
  }
};

template<class Tuple>
struct IsDeserializable<Tuple, 1> {
  static void check(std::size_t idx, std::stringstream& in) {
    if (idx == 0) {
      typename std::tuple_element<0,Tuple>::type tmp;
      in >> tmp;
    }
  }
};

template<class Tuple>
bool is_deserializable(std::size_t idx, const std::string& val) {
  std::stringstream in;
  in << val;
  try {
    IsDeserializable<Tuple, std::tuple_size<Tuple>::value>::check(idx, in);
    return true;
  }
  catch(...) {return false;}
} 

// Example Usage
std::tuple<int,double,char> MyTuple;

assert(is_deserializable<MyTuple>(0,"4"));
assert(is_deserializable<MyTuple>(1,"56.5"));
assert(is_deserializable<MyTuple>(2,"h"));

assert(!is_deserializable<MyTuple>(0,"4.3"));
assert(!is_deserializable<MyTuple>(1,"Hello"));
assert(!is_deserializable<MyTuple>(2,"42")); 
```

# java - Java：将文件内容放入向量中

> ID：14892524
> 
> 赞同：1
> 
> 时间：2013-02-15T10:19:03.777
> 
> 标签：java

我正在尝试读取文件内容并将它们放入向量中并打印出来，但我遇到了一些重复打印内容的问题！请帮忙看看我的代码有什么问题！谢谢！

这是我的代码：

```
public class Program5 {
public static void main(String[] args) throws Exception
       {
           Vector<Product> productList = new Vector<Product>();

           FileReader fr = new FileReader("Catalog.txt");
           Scanner in = new Scanner(fr);

           while(in.hasNextLine())
           {

               String data = in.nextLine();
               String[] result = data.split("\\, "); 

               String code = result[0];
               String desc = result[1];
               String price = result[2];
               String unit = result[3];

               Product a = new Product(desc, code, price, unit);

               productList.add(a);

               for(int j=0;j<productList.size();j++)             
               {                                
                   Product aProduct = productList.get(j);

                   System.out.println(aProduct.code+", "+aProduct.desc+", "+aProduct.price+" "+aProduct.unit+" ");                  
               }   

           }

       } 
```

}

这是我试图读取的文件的内容以及它应该从我的代码中打印的内容：

K3876，蒸馏月光，3.00 美元，一打
P3487，浓缩粉状水，2.50 美元，每包
Z9983，反重力丸，12.75 美元，60 美元

但这是我从运行代码中得到的：

K3876，蒸馏月光，每包 3.00 美元 K3876，蒸馏月光，每包 3.00
美元
P3487，冷凝水，每包 2.50 美元
K3876，蒸馏月光，每包 3.00 美元
P3487，冷凝水，每包 2.50 美元
Z9983，反重力药丸，12.75 美元60

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:21:08.190

一边动`for-loop`一边。

//在外面

```
for(int j=0;j<productList.size();j++)             
               {                               
               Product aProduct = productList.get(j);    
                   System.out.println(aProduct.code+", "+aProduct.desc+", "+aProduct.price+" "+aProduct.unit+" ");                  
               } 
```

顺便说一句，除非您关心线程安全，否则切勿使用 Vector。如果您不关心线程安全，Vector 的方法会同步使用**ArrayList （非常高效且快速）**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:22:08.073

把`for-loop`while循环的外侧。嵌套的 for 循环打印冗余数据。

```
Vector<Product> productList = new Vector<Product>();
...
while(in.hasNextLine()){
   ...
   productList.add(a);
}
for(int j=0;j<productList.size();j++){
   ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-27T17:56:30.997

em，您可以尝试将“System.out.println(...)”移出“for”循环：

```
while(in.hasNextLine())
{

    String data = in.nextLine();
    String[] result = data.split("\\, "); 

    String code = result[0];
    String desc = result[1];
    String price = result[2];
    String unit = result[3];

    Product a = new Product(desc, code, price, unit);
    productList.add(a);

    for(int j=0;j<productList.size();j++)             
    {                                
        Product aProduct = productList.get(j);                  
    }
    System.out.println(aProduct.code+", "+aProduct.desc+", "+aProduct.price+" "+aProduct.unit+" ");

} 
```

# javascript - Zend Framework 2 控制器操作返回 javascript 文件：错误 500

> ID：14892529
> 
> 赞同：0
> 
> 时间：2013-02-15T10:19:08.950
> 
> 标签：javascript, http, zend-framework2

我正在尝试在 ZF2 中执行一个简单的控制器操作，该操作返回一个 javascript 文件。简而言之，我想做的是使用 PHP 可以通过以下方式进行的操作：

```
<?php header('Content-Type: text/javascript'); ?>
var foo = '<?php echo $bar; ?>'; 
```

现在，在 ZF2 中，我有一个 ActionController 的动作函数，如下所示：

```
public function environmentAction()
{
    $headers = new Headers();
    $headers->addHeaderLine('Content-Type', 'text/javascript');

    $this->getResponse()->setHeaders($headers);

    $this->layout()->setTemplate('js/environment');

    $view = new ViewModel();
    return $view;
} 
```

然后，通过以下方式配置路由：

```
'environment' => array(
    'type' => 'Literal',
    'options' => array(
        'route'    => '/js/environment.js',
        'defaults' => array(
            'controller' => 'Application\Controller\Index',
            'action'     => 'environment',
        ),
    ),
) 
```

最后，视图是一个 .phtml 文件（在key`template_map`下的部分中定义的文件`js/environment`），就像在简单的 PHP 案例中一样：

```
var foo = '<?php echo $bar; ?>' 
```

所以，一切都应该完成。我只是`<script>`在 layout.phtml 的 head 部分添加了一个元素：

```
<script type="text/javascript" src="/js/environment.js"></script> 
```

问题是在我的浏览器控制台中加载页面时出现以下错误：

```
GET ***/js/environment.js 500 (Internal Server Error) 
```

但是如果我尝试在新页面中打开相同的链接，我会成功获取脚本。

**有什么不同？**在我浏览器的开发人员工具的网络部分，我看到这个脚本的 http get 请求及其标头与所有其他请求相同，那么为什么它的行为不同呢？为什么我会收到此错误？在我的 php 日志中，没有关于此事件的内容。任何想法？

* * *

**解决**了像这样修改动作函数：

```
public function environmentAction()
{
    $headers = new Headers();
    $headers->addHeaderLine('Content-Type', 'text/javascript');

    $this->getResponse()->setHeaders($headers);

    $view = new ViewModel();
    $view->setTemplate('js/environment');
    $view->setTerminal(true);
    return $view;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:44:40.250

这是一种非常糟糕的做事方式。

```
<script type="text/javascript" src="/js/environment.js"></script> 
```

这将使浏览器对文件“/js/environment.js”发出新请求，该文件将再次匹配路由：

```
'route'    => '/js/environment.js' 
```

你会得到一个竞争条件/无限循环。

根据您的 Web 服务器设置，如果您请求 '/js/environment.js' 并且该文件确实存在（即包含 environment.js 的称为 js 的物理目录），则该文件将被传回而不是转到您的路线无论如何，这是另一个不良影响。

# android - IllegalMonitorStateException：对象之前未被线程锁定

> ID：14892530
> 
> 赞同：0
> 
> 时间：2013-02-15T10:19:12.913
> 
> 标签：android

我不明白为什么我不能启动一个线程，我该怎么做？

```
 scheduleTaskExecutor = Executors.newScheduledThreadPool(1);
        scheduleTaskExecutor.scheduleAtFixedRate(runUpdatePreOrders, 0,
                timeRepeat, TimeUnit.MILLISECONDS);

private Runnable runUpdatePreOrders = new Runnable() {
        public void run() {
            synchronized  (runUpdatePreOrders) {

                    try {
                        if (pause) wait();
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                new UpdateOrders(min_price, listener).execute();
                Log.e("UpdateBrodcast", "StartPreOrder");
            }
        }
    };

@Override
    public void onStart() {
        super.onStart();

        if (pause) {
            runUpdatePreOrders.notify();   // this IllegalMonitorStateException: object not locked by thread before
        }

        pause = false;

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T10:24:55.883

```
 synchronized  (runUpdatePreOrders) {

                try {
                    if (pause) runUpdatePreOrders.wait();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            new UpdateOrders(min_price, listener).execute();
            Log.e("UpdateBrodcast", "StartPreOrder");
        }
    } 
```

如果你在一个对象上同步，你应该在同一个对象上调用 wait 和 notify

编辑

```
 if (pause) {
      synchronized  (runUpdatePreOrders) {
            runUpdatePreOrders.notify();   // this IllegalMonitorStateException: object not locked by thread before
       }
   } 
```

# matlab - 在每个 If 语句之后修改每个条的 EdgeColor

> ID：14892531
> 
> 赞同：0
> 
> 时间：2013-02-15T10:19:12.983
> 
> 标签：matlab, graph, set, bar-chart

**问题：**如何根据稍后在代码中进行数学比较来更改每个条形图`edgecolor`（我们有两个条形图 f3 和 f4，每个条形图的条数取决于`rowNosMaxSG`，其中最多包含 14 -酒吧）。

目前使用下面的数学if语句进行更改`edgecolor`，不幸的是，在执行3个if语句中的每一个后，我都遇到了边缘颜色重叠，这种重叠会影响每个图形的整个条形，而我希望能够控制`edgecolor`基于数学比较的每个条形图中的每个条形。

截断代码（包括数学比较）：

```
 f3= bar(SN, Shift_Grade', 'stacked', 'FaceColor', 'white');
    f4= bar( SN( Shift_Gradey ~= 0 ), Shift_Gradey( Shift_Gradey ~= 0 ),...
      'stacked', 'FaceColor', 'white', 'EdgeColor','green',...
      'LineWidth', 2);
%----------------   **Mathematical-Comparison (3-if-statements)**  --------------------
    if ( SN( Shift_Grade' <= 11.3 )
         set(f3, 'EdgeColor', 'r')
    end
    if  (  SN( 11.3 < Shift_Grade' ) & SN( Shift_Grade' < 16 ) )
         set(f3, 'EdgeColor', 'y')
    end
    if ( SN( Shift_Grade' >= 16 ) )
         set(f3, 'EdgeColor', 'g')
         set(f4, 'EdgeColor', 'g')
    end
set(gca, 'Xtick', 1:2:length(SN)+1)
set(gca,'YLim',[0 20])
set(gca,'XLim',[0 length(SN)+1]) 
```

希望有一个清晰明了的答案来解决这个阻碍我进步的问题。提前感谢您的时间。

* * *

好主意Doresoom，我不知道。我已经实现了您的想法，但我仍然收到以下代码的此错误：

？？？使用 ==> 时出错`set`

无法转换为`double`from 。`cell`

*可重现的代码：*

```
SN= [1:14]';
SG= [15.5; 13; 15; 12.2; 13.6; 13.4; 14.2; 9; 17.7; 15; 12.5; 10; 16; 13.6];
SN_UnderDogs= [8; 12];
SN_Mediocre= [1; 2; 3; 4; 5; 6; 7; 10; 11; 14];
SN_Top= [9; 13];

for cc = 1:length(SN)
    f3(cc) = bar(cc, SG(cc), 'FaceColor', 'white');
end

if  SN( SG <= 11.3 )
    for SNUD = SN_UnderDogs ( 1 : length (SN_UnderDogs) )
        set(get(f3(SNUD),'Children'),'EdgeColor','r')
    end
end
if  SN( 11.3 < SG  &  SG < 16 )
    for SNM = SN_Mediocre ( 1 : length (SN_Mediocre) )
        set(get(f3(SNM),'Children'),'EdgeColor','y')
    end
end
if  SN( SG >= 16 )
    for SNT = SN_Top ( 1 : length (SN_Top) )
        set(get(f3(SNT),'Children'),'EdgeColor','g')
    end
end 
```

我该如何解决这个错误？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:29:34.337

您是否尝试过抓住酒吧本身的补丁手柄？

您可能必须将所有条形图绘制为单独的条形图。像这样的东西可能会起作用：

```
figure
hold on
for n = 1:10
bh(n) = bar(n,n);
end
set(get(bh(1),'Children'),'EdgeColor','r','FaceColor','w') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:07:21.000

试试这个：

```
SN= [1:14]';
SG= [15.5; 13; 15; 12.2; 13.6; 13.4; 14.2; 9; 17.7; 15; 12.5; 10; 16; 13.6];
SN_UnderDogs= [8; 12];
SN_Mediocre= [1; 2; 3; 4; 5; 6; 7; 10; 11; 14];
SN_Top= [9; 13];

for cc = 1:length(SN)
    f3(cc) = bar(cc, SG(cc), 'FaceColor', 'white');
    hold on;
end

if  SN( SG <= 11.3 )
    for SNUD = SN_UnderDogs ( 1 : length (SN_UnderDogs) )
        % set(get(f3(SNUD),'Children'),'EdgeColor','r')
        cellfun(@(x) set(x,'EdgeColor','r'), get(f3(SNUD),'Children'))
    end
end
if  SN( 11.3 < SG  &  SG < 16 )
    for SNM = SN_Mediocre ( 1 : length (SN_Mediocre) )
        % set(get(f3(SNM),'Children'),'EdgeColor','y')
        cellfun(@(x) set(x,'EdgeColor','y'), get(f3(SNM),'Children'))
    end
end
if  SN( SG >= 16 )
    for SNT = SN_Top ( 1 : length (SN_Top) )
        % set(get(f3(SNT),'Children'),'EdgeColor','g')
        cellfun(@(x) set(x,'EdgeColor','g'), get(f3(SNT),'Children'))
    end
end 
```

# java - 检查日期是否在指定日期之后？

> ID：14892536
> 
> 赞同：6
> 
> 时间：2013-02-15T10:19:24.327
> 
> 标签：java, date

我正在尝试对日期进行验证，该日期应该只需要当前和未来的日期，如果日期是较旧的日期，那么它应该显示

> 日期早于当前日期

我也想允许当前日期。现在同时将当前日期作为 gievnDate，它总是显示

> 日期早于当前日期

但我期待输出为

> 日期是给定日期的未来日期，如今天。

以下是我一直在尝试的代码：

```
 Date current = new Date();
    String myFormatString = "dd/MM/yy";
    SimpleDateFormat df = new SimpleDateFormat(myFormatString);
    Date givenDate = df.parse("15/02/13");
    Long l = givenDate.getTime();
    //create date object
    Date next = new Date(l);
    //compare both dates
    if(next.after(current) || (next.equals(current))){
        System.out.println("The date is future day");
    } else {

        System.out.println("The date is older than current day");
    } 
```

在这里，当我检查 13 年 2 月 15 日时，它显示为早于当天。我的方法错了吗？或者有没有更好的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T10:21:56.010

`if(next.after(current) && (next.equals(current)))`总是错误的，因为`next`不能同时严格地在`current`AND 等于之后`current`。

你可能的意思是：

`if(next.after(current) || (next.equals(current)))`与 OR。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-22T22:04:19.463

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T10:28:50.353

除了 assylias 指出的逻辑错误：

您没有指定时间，因此`givenDate`在您的示例中是“15/02/13 00:00:00.000”。现在，如果您将该给定日期与同一天的任何实际时间戳（也称为“现在”）进行比较，那么`givenDate`几乎总是“旧”然后“现在”。

设置`givenDate`为当天的最后一毫秒，您将不需要“等于”测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T10:25:38.247

这段代码中至少有一个错误，但我看不出它会如何引发异常。该声明：

```
if(next.after(current) && (next.equals(current))){ 
```

将永远不会评估为`true`，因为可能`next.after(current)`并且`next.equals(current)`不会同时为真。

你可能打算写：

```
if(next.after(current) || (next.equals(current))){ 
```

此外，至少包含错误的具体细节通常是一个好主意：异常在哪一行被抛出（如果这确实是你的意思），以及确切的输出是什么（即使该输出是例外）给出什么输入？

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-02-26T10:40:04.180

尽管这是一个老问题。
我想分享一个简单的解决方案。
您可以检查当前日期是否早于下一个日期。因为如果它不是在它之前等于当前日期或在当前日期之后。这就是你要找的。所以你不需要“或等于”检查。

```
if(!current.isBefore(next)){
     System.out.println("The date is future day");
}else{
     System.out.println("The date is older than current day");
} 
```

或者，您甚至可以使用：

```
if(next.getTime() >= current.getTime()) 
```

# iphone - UIView 动画在 ios 5.1 中不起作用

> ID：14892537
> 
> 赞同：1
> 
> 时间：2013-02-15T10:19:31.377
> 
> 标签：iphone, uitableview, ios6, ios5.1

我有一个`UITableView`. 我想在表格中加载单元格时制作动画。我是这样弄的。

```
-(void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    CGRect tmpFrame;
    CGRect originalFrame;
    originalFrame = cell.frame;
    tmpFrame = cell.frame;
    tmpFrame = CGRectMake(0, -50, 320, 50);
    cell.frame = tmpFrame;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:5.0f];
    [UIView setAnimationBeginsFromCurrentState:YES];
    UIView* separatorLineView = [[UIView alloc] initWithFrame:CGRectMake(0, 50, 320, 1)];
    separatorLineView.backgroundColor = [UIColor lightGrayColor];
    [cell.contentView addSubview:separatorLineView];
    cell.frame = originalFrame;
    [UIView commitAnimations];
} 
```

此代码在 iOS 6（iPhone 模拟器 6）中运行良好，但在 iOS 5.1（iPhone 模拟器 5.1）中无法运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:51:48.070

所以我知道你已经有了解决方案，但我可能会建议使用动画块，除非你让它与旧版本兼容。无论如何，如果你不是，这可能会提供一种不同的方式来编写动画。我喜欢这样做，因为我觉得我对正在发生的事情有更多的控制权并且更少的混乱。

```
UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];
if(!cell){
    cell = [[UITableViewCell alloc]init];
}

CGRect movementFrame = cell.frame; // set the movement frame for modification
movementFrame.origin.y -= 50; //adjust only one variable instead of making a rect..

//Start your animation block. 
[UIView animateWithDuration:0.5
                      delay:0.0
                    options:UIViewAnimationCurveEaseOut
                 animations:^{
                     //Animation here
                     cell.frame = movementFrame; // Commit your changes basically
                 } completion:^(BOOL finished) {
                     //Completeion c

                 }]; 
```

好棒！保重^^

*编辑*

去测试它，并意识到我遗漏了一个关键部分。我很抱歉..但是这段代码确实有效，并且会在一个包含一页的分组表上做这个动画，这很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:30:50.037

完毕。我把这段代码放入

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

在返回单元格之前。

# c++ - 自定义 apache2 模块将不会加载错误消息“无法找到 API 模块结构”

> ID：14892540
> 
> 赞同：1
> 
> 时间：2013-02-15T10:19:42.677
> 
> 标签：c++, linux, module, apache2, apxs2

我是一名 Windows 开发人员，但现在尝试使用本文所述的 apxs2 工具在 linux 上构建一个非常简单的 apache2 模块：[http://www.codeproject.com/Articles/491909/Apache-2-x-Modules- In-Cplusplus-Part-1][1]

该模块正在成功构建，但由于某种原因无法加载。Apache 在重新启动时发出以下错误：“找不到 API 模块结构”。

现在一些细节。

首先尝试使用以下命令构建模块

```
 apxs2 -i -a  -c mod_pixmongo.cpp 
```

它失败并显示错误消息“无法确定引导符号名称”并且必须“使用选项‘-n’指定一个”

当提供选项 -n 时，模块正在成功构建：

```
apxs2 -i -a -n pixmongo  -c mod_pixmongo.cpp 
```

但是尝试重新启动 apache 会出现以下错误：

apache2：/etc/apache2/apache2.conf 第 203 行的语法错误：/etc/apache2/mods-enabled/pixmongo.load 第 1 行的语法错误：在文件 /usr 中找不到 API 模块结构“pixmongo_module” /lib/apache2/modules/mod_pixmongo.so：/usr/lib/apache2/modules/mod_pixmongo.so：未定义符号：pixmongo_module 操作“configtest”失败。

我对 linux 上的共享库知之甚少，但建议必须以某种方式导出模块结构。在我的理解中，以下命令应该显示导出的符号：

```
nm -D /usr/lib/apache2/modules/mod_pixmongo.so 
```

就我而言，它显示以下内容：

```
w _Jv_RegisterClasses
0000000000200778 A __bss_start
             w __cxa_finalize
             w __gmon_start__
0000000000200778 A _edata
0000000000200788 A _end
0000000000000558 T _fini
0000000000000418 T _init 
```

所以结构“模块”真的不存在，我觉得很奇怪。比较：任何其他预安装的模块都已导出该结构。例如：

```
nm -D /usr/lib/apache2/modules/mod_info.so

w _Jv_RegisterClasses
00000000002052b0 A __bss_start
             w __cxa_finalize
             w __gmon_start__
00000000002052b0 A _edata
00000000002052c0 A _end
0000000000002b48 T _fini
0000000000001708 T _init
************** the long list here *********
00000002050e0 D info_module
             U strcasecmp
             U strcmp 
```

所以问题是我做错了什么。很感谢任何形式的帮助。示例模块的源代码如下：

头文件 mod_pixmongo.hpp：

```
#ifndef MOD_PIXMONGO_HPP
#define MOD_PIXMONGO_HPP

#ifdef __cplusplus
#define EXTERN_C_BLOCK_BEGIN    extern "C" {
#define EXTERN_C_BLOCK_END      }
#define EXTERN_C_FUNC           extern "C"
#else
#define EXTERN_C_BLOCK_BEGIN
#define EXTERN_C_BLOCK_END
#define EXTERN_C_FUNC
#endif

#include <httpd.h>
#include <http_protocol.h>
#include <http_config.h>

#endif  /* MOD_PIXMONGO_HPP */ 
```

源文件 mod_pixmongo.cpp：

```
#include "mod_pixmongo.hpp"

EXTERN_C_FUNC
int pixmongo_handler( request_rec* inpRequest )
{
    int nReturnVal = DECLINED;

if ( inpRequest->handler != NULL && strcmp( inpRequest->handler, "pixmongo" ) == 0 )
{
    ap_rputs( "Hello World from PIXMONGO", inpRequest );
    nReturnVal = OK;
}

return nReturnVal;
}

EXTERN_C_FUNC
void pixmongo_hooks( apr_pool_t* inpPool )
{
ap_hook_handler( pixmongo_handler, NULL, NULL, APR_HOOK_MIDDLE );
}

EXTERN_C_BLOCK_BEGIN
module AP_MODULE_DECLARE_DATA pixmongo_module =
{
  STANDARD20_MODULE_STUFF,
NULL,
NULL,
NULL,
NULL,
NULL,
pixmongo_hooks
};
EXTERN_C_BLOCK_END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:05:17.997

我意识到我的错误。实用程序 apxs 无法构建 C++ 模块，而只能构建 C（后者对我来说很好用）。在上面提到的 codeproject 文章中，apxs 实用程序仅用于部署已编译的模块，而不用于编译它。

# python - Python自定义的异常类应该允许在它被引发后继续执行程序

> ID：14892543
> 
> 赞同：1
> 
> 时间：2013-02-15T10:19:51.340
> 
> 标签：python, exception, exception-handling, python-2.7

我编写了一个 Python 程序，它有一个名为 TAException 的自定义异常类，它运行良好。但是一个新的需求迫使我扩展它的功能。如果用户在程序启动时设置了特定标志 (-n)，则如果引发 TAException，则程序不应停止执行。

下面你会看到我是如何尝试实现它的。在 main() 中，如果已设置该标志，则调用 TAException.setNoAbort()。其余的可能是不言自明的。关键是：显然它不起作用。当引发 TAException 时，程序总是中止。我知道为什么它不起作用，但我不知道如何以不同的方式实现它。你能告诉我一个优雅的方法吗？

```
class TAException(Exception):
    _numOfException = 0                                                 # How often has this exception been raised?
    _noAbort = False                                                    # By default we abort the test run if this exception has been raised.

    def __init__(self, TR_Inst, expr, msg):
        '''
        Parameters:
            TR_Inst:    Testreport instance
            expr:       Expression in which the error occured.
            msg:        Explanation for the error.
        '''
        if TR_Inst != None:
            if TAException._noAbort is True:                            # If we abort the test run on the first exception being raised.
                TAException._numOfException += 1                        # Or else only count the exception and continue the test run.
                                                                        # The status of the testreport will be set to "Failed" by TestReportgen.
            else:
                TR_Inst.genreport([expr, msg], False)                   # Generate testreport and exit.

    @staticmethod
    def setNoAbort():
        '''
        Sets TAException._noAbort to True.
        '''
        TAException._noAbort = True 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T10:24:41.733

使用参数 -n 时，您的程序不应引发异常，而是使用警告（不会停止您的程序）。您可以在此处找到有关警告的更多信息：http: [//docs.python.org/2/library/warnings.html#module-warnings](http://docs.python.org/2/library/warnings.html#module-warnings)

# android - 小部件配置活动android未更改远程文本视图

> ID：14892545
> 
> 赞同：0
> 
> 时间：2013-02-15T10:19:57.337
> 
> 标签：android, textview, android-appwidget

我正在为记事本制作一个小部件，我可以从数据库中获取笔记的标题，但现在唯一的问题是我想更改小部件的布局，即布局中的文本。我的配置活动中有一个列表视图当我单击一个项目时，该项目中的文本应该成为 Widget 中 textView 的文本。现在我能够获取文本数据，但我无法设置它。这是小部件提供程序的代码：-

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    // TODO Auto-generated method stub
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    for (int i = 0; i < appWidgetIds.length; i++) {
        int appWidgetId = appWidgetIds[i];

        Intent intent = new Intent(context, NotesList.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                intent, 0);

        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.widget_layout);
        views.setOnClickPendingIntent(R.id.textViewWidget, pendingIntent);

        appWidgetManager.updateAppWidget(appWidgetId, views);
    }
} 
```

对于配置小部件：-

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent intent = getIntent();
    if (intent.getData() == null) {
        intent.setData(Notes.CONTENT_URI);
    }

    Uri notesUri = getIntent().getData();
    Cursor managedCursor = getContentResolver().query(notesUri,
            new String[] { Notes.TAGS, Notes.TITLE }, null, null, null);

    managedCursor.moveToFirst();
    do{
        Log.d("name", managedCursor.getString(1));
        name = managedCursor.getString(1);
        array.add(name);
        managedCursor.moveToNext();
    }while(!managedCursor.isLast());
    name = managedCursor.getString(1);
    array.add(name);

    adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,array);
    setListAdapter(adapter);

    setResult(RESULT_CANCELED);
    Bundle extras = getIntent().getExtras();

    if(extras != null){
        widgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID,AppWidgetManager.INVALID_APPWIDGET_ID);
    }

    appWidgetManager = AppWidgetManager.getInstance(this);  
}

protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Uri notesUri = getIntent().getData();
    Cursor managedCursor = getContentResolver().query(notesUri,
            null, null, null, null);

    managedCursor.moveToFirst();
    managedCursor.moveToPosition(position);
    Log.d("Note", managedCursor.getString(9));
    String s = managedCursor.getString(9); 
    //s is the text I want to set & here since I need to change a different layout so I used layout inflator
    LayoutInflater inflate = getLayoutInflater();
    LinearLayout v1 = (LinearLayout) inflate.inflate(R.layout.widget_layout, null);
    text = (TextView)v1.findViewById(R.id.textViewWidget);
    //These are the changed needed to be done
            text.setBackgroundColor(Color.YELLOW);
    text.setText(s);
    //Toast.makeText(this, text.getText()+"", Toast.LENGTH_SHORT).show();   
    views = new RemoteViews(this.getPackageName(),
            R.layout.widget_layout);//This remote view is not updated

    Intent intent1 = new Intent(this, NotesList.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0,
            intent1, 0);
    views.setOnClickPendingIntent(R.id.textViewWidget, pendingIntent);

    appWidgetManager.updateAppWidget(widgetId, views);

    Intent resultValue = new Intent();
    resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetId);
    setResult(RESULT_OK,resultValue);
    finish();
} 
```

配置活动的 XML 文件：-

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:fastScrollEnabled="true" >
</ListView>

</LinearLayout> 
```

对于小部件：-

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

<TextView
    android:id="@+id/textViewWidget"
    android:layout_width="96dp"
    android:layout_height="96dp"
    android:background="@android:color/white"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="@android:color/black" />

</LinearLayout> 
```

有人可以看看我的代码并提供帮助吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:02:36.307

首先我找不到你的`AppWidgetProvider`课。

其次，在小部件中，您无法使用`findViewById()`.In 获取视图。在小部件中，您可以获得`TextView`如下视图：

您必须像这样获取`widget`in的布局`RemoteViews`，它也在`onUpdate()`of 中`AppWidgetProvider`：

```
 RemoteViews rvs = new RemoteViews(context.getPackageName(), R.layout.main); 
```

现在在小部件中设置文本`TextView`：

```
rvs.setTextViewText(R.id.textViewWidget, "we updated! yay!"); 
```

如果您有任何进一步的疑问，请查看这个关于[小部件](http://www.vogella.com/articles/AndroidWidgets/article.html)的非常简单有效的教程。

# objective-c - 将使用 colorWithPatternImage 创建的 NSColor 转换为 CGColor？

> ID：14892550
> 
> 赞同：2
> 
> 时间：2013-02-15T10:20:16.887
> 
> 标签：objective-c, cocoa

我已经尝试过多次将使用 colorWithPatternImage 的图像创建的 NSColor 来回转换为 CGColor。它总是失败，我得到奇怪的坏结果。

我想知道转换是否适用于使用平铺图像生成的颜色，或者根本不可能。这就是我转换颜色的方式：

```
-(CGColorRef) CIColorToCGColor: (CIColor *) ciColor {
    CGColorSpaceRef colorSpace = [ciColor colorSpace];
    const CGFloat *components = [ciColor components];
    CGColorRef cgColor = CGColorCreate (colorSpace, components);
    CGColorSpaceRelease(colorSpace);
    return cgColor;
} 
```

...

```
CIColor *ciColor = [[CIColor alloc] initWithColor: [NSColor colorWithPatternImage:backgroundImage]];
CGColorRef cgColor = [self CIColorToCGColor: ciColor];
[ciColor release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:12:40.180

几周前我需要这样做。我发现这个答案基本上解决了这个问题， [如何平铺 CALayer 的内容？](https://stackoverflow.com/questions/2520978/how-to-tile-the-contents-of-a-calayer)

这是一种更方便的形式，

```
// callback for CreateImagePattern.
static void DrawPatternImage (void *info, CGContextRef ctx) {
    CGImageRef image = (CGImageRef) info;
    CGContextDrawImage(ctx,
                       CGRectMake(0,0, CGImageGetWidth(image),CGImageGetHeight(image)),
                       image);
}

// callback for CreateImagePattern.
static void ReleasePatternImage( void *info ) {
    CGImageRelease((CGImageRef)info);
}

CGColorRef CreateCGColorWithPatternFromNSImage( NSImage *image ) {
    /* User needs to release the color  */

    NSData *imageData = [image TIFFRepresentation];
    CFDataRef cfImageData = CFBridgingRetain(imageData);
    CGImageSourceRef source = CGImageSourceCreateWithData(cfImageData, NULL);
    CGImageRef cgImage =  CGImageSourceCreateImageAtIndex(source, 0, NULL);
    CFRelease(cfImageData);
    CFRelease(source);

    //assume image is the CGImage you want to assign as the layer background
    CGFloat width = [image size].width;
    CGFloat height = [image size].height;
    static const CGPatternCallbacks callbacks = {0, &DrawPatternImage, &ReleasePatternImage};
    CGPatternRef pattern = CGPatternCreate (cgImage,
                                            CGRectMake (0, 0, width, height),
                                            CGAffineTransformMake (1, 0, 0, 1, 0, 0),
                                            width,
                                            height,
                                            kCGPatternTilingConstantSpacing,
                                            true,
                                            &callbacks);
    CGColorSpaceRef space = CGColorSpaceCreatePattern(NULL);
    CGFloat components[1] = {1.0};
    CGColorRef color = CGColorCreateWithPattern(space, pattern, components);
    CGColorSpaceRelease(space);
    CGPatternRelease(pattern);
    return color;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T22:00:25.653

NSColor 有一个函数可以让你获得创建颜色的图案： `-[NSColor patternImage]`. 使用该方法，将图像转换为 CGImage（如果您愿意），并制作图案 CGColor。

编辑：另一种方法是，如果您使用的是 10.8 或更高版本，请使用`+[NSColor colorWithCGColor:]`类方法。但是，它可能无法在 %100 的时间内工作，因此请检查 nil。

# solr - Solr全进口工艺

> ID：14892552
> 
> 赞同：0
> 
> 时间：2013-02-15T10:20:22.347
> 
> 标签：solr, dataimporthandler

我有一个非常大的 SQL 查询来加载所有数据。执行时间太长。如何以编程方式实现完全导入功能而不是 SQL 选择公式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:45:22.487

也许你可以在你的数据库中创建几个视图，将你的数据分区到某个属性上。
但我真的不明白这样做的目的吗？
您是否使用增量导入？这样，您只需运行一次巨大的完整导入。

# php - 如何在 Wordpress 中实现内联厘米/英寸转换

> ID：14892554
> 
> 赞同：1
> 
> 时间：2013-02-15T10:20:36.040
> 
> 标签：php, wordpress, converter

我无法在 Wordpress 中实现内联厘米/英寸转换。

我正在使用名为“Unit Converter”的插件[http://wordpress.org/extend/plugins/unit-converter/](http://wordpress.org/extend/plugins/unit-converter/)当我调整它以使用自定义元框时它工作正常。它显示了从厘米到英寸的内联转换。

现在我创建了自定义搜索，因此我不再可以在每个数字的末尾添加“cm”，并且转换器不再工作。

```
 Height: <?php echo rwmb_meta( 'iz_height' ); ?> cm</li> 
```

由于尺寸值现在来自自定义元框，但主题中的“cm”符号我提到的这个插件不再有效。

如何使这个插件工作或如何在不使用插件的情况下转换这些单位。基本上我正在寻找将“RandomNumber cm”转换为英寸的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:37:50.527

一种方法是为它创建一个简码

```
add_shortcode( 'cm2inches', function( $atts, $content ) {
     return $content*0.393701;
} 
```

可以这样使用

> 欧洲尺子的长度通常是 [cm2inches]30[/cm2inches] 英寸。

但请记住，当您显示内容时，它不会自动通过`do_shortcode`. 假设您已将一些元框信息保存为站点选项。然后这样做：

```
echo do_shortcode( get_option( 'option_name' ) ); 
```

# javascript - Facebook：不安全的 JavaScript 问题（document.domain 值应该相同）

> ID：14892556
> 
> 赞同：24
> 
> 时间：2013-02-15T10:20:40.270
> 
> 标签：javascript, facebook, google-chrome, cross-domain

Mine 是一个基于画布的 FB 应用。在 Chrome 和 Firefox 上都面临一个问题，（尽管通常是 Chrome）：

[1.当我在新的隐身 Chrome 窗口 ( https://apps.facebook.com/myfbappnamespace/](https://apps.facebook.com/myfbappnamespace/) )上点击我批准的 fb 应用程序安全 URL 时，仅第一次出现以下错误，当我刷新页面时出现错误消失了（大多数时候）

> about:blank 的页面显示来自 [http://static.ak.facebook.com/connect/xd_arbiter.php?version=18#cb=f2e4fe7b](http://static.ak.facebook.com/connect/xd_arbiter.php?version=18#cb=f2e4fe7b) …os.com%2Ff4aeadb2&domain=www.mydomain.com&relation=parent&error=的不安全内容未知用户。
> 
> 不安全的 JavaScript 尝试 从具有 URL [http://static.ak.facebook.com/connect/xd_arbiter.php?version=18#cb=的框架访问具有 URL](http://static.ak.facebook.com/connect/xd_arbiter.php?version=18#cb=f2e4fe7b) [http://www.mydomain.com/control/myfacebookapp/的框架](http://www.mydomain.com/control/myfacebookapp/)[f2e4fe7b](http://static.ak.facebook.com/connect/xd_arbiter.php?version=18#cb=f2e4fe7b) …os.com%2Ff4aeadb2&domain=www.mydomain.com&relation=parent&error=unknown_user。请求访问的框架将“document.domain”设置为“facebook.com”，但被访问的框架没有。两者都必须将“document.domain”设置为相同的值才能允许访问。
> xd_arbiter.php:18
> 
> 不安全的 JavaScript 尝试 从具有 URL [http://static.ak.facebook.com/connect/xd_arbiter.php?version=18#cb=的框架访问具有 URL](http://static.ak.facebook.com/connect/xd_arbiter.php?version=18#cb=f2e4fe7b) [http://www.mydomain.com/control/myfacebookapp/的框架](http://www.mydomain.com/control/myfacebookapp/)[f2e4fe7b](http://static.ak.facebook.com/connect/xd_arbiter.php?version=18#cb=f2e4fe7b) …os.com%2Ff4aeadb2&domain=www.mydomain.com&relation=parent&error=unknown_user。请求访问的框架将“document.domain”设置为“facebook.com”，但被访问的框架没有。两者都必须将“document.domain”设置为相同的值才能允许访问。xd_arbiter.php:18

2.当我尝试 http url( [http://apps.facebook.com/myfbappnamespace/](http://apps.facebook.com/myfbappnamespace/) ) 时，控制台中显示的错误是：

> 不安全的 JavaScript 尝试 从具有 URL [https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=18#channel=的框架访问具有 URL](https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=18#channel=) [http://apps.facebook.com/myfbappnamespace/](http://apps.facebook.com/myfbappnamespace/)的框架…Fcontrol%2Ffacebookappchannelurl%3Ffb_xd_fragment%23xd_sig%3Df23e84e85c%26。请求访问的帧具有“https”协议，被访问的帧具有“http”协议。协议必须匹配。

现在，当我登录我的 fb 帐户查看这些错误会发生什么时，它们消失了，只是有时。我知道我在查询中使用了“大多数时候”和“有时”，但这正是我正在发生的事情。我还搜索了论坛并意识到 fb 已经修复了这个应该是特定于 chrome 的旧问题。我已确保我的 FB.init 和其他调用是 location.protocol 值特定的。还在画布 url (http) 和安全画布 url (https) 中配置了正确的值。还尝试了两种设置：帐户设置->安全->安全浏览->（启用和禁用）

如果我在某处遗漏了什么，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-03T10:25:10.363

有很多可能的问题。尝试以下解决方案之一：

*   协议必须相同（因此尝试访问 iframe 的页面必须与提供 iframe 的站点具有相同的协议），因此如果您在沙盒模式下测试您的应用程序（http 而不是 https），请禁用“安全测试帐户的浏览模式
*   channelUrl on `FB.init()` *（见下面的代码）*
*   启用 apache 的 headers mod 并将下面的行放在你的 .htaccess 中
*   `<div id="fb-root"></div>`按照此处的 fb 文档中的说明放置body 标记之后： [https ://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)
*   尝试在用户操作之后放置所有自动登录代码（例如单击登录按钮）
*   从画布 URL（在应用程序→设置中）中删除尾部斜杠，例如`http://yoursite.com?`
*   像这样编辑您的`<html>`标签：`<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="https://www.facebook.com/2008/fbml">`

**.htaccess**的代码

 **```
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule> 
```

**渠道**问题代码：

```
FB.init({
    appId: '1234567890',
    status: true,
    cookie: true,
    xfbml: true,
    channelUrl : '//yoursite.com/channel.html'
}); 
```

您的服务器提供的**channel.html**应该包含这一行：

```
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

**编辑**

关于您的第一个问题：

```
The page at about:blank displayed insecure content from http://static.ak.facebook.com/connect/xd_arbiter.php?version=18#cb=f2e4fe7b…os.com%2Ff4aeadb2&domain=www.mydomain.com&relation=parent&error=unknown_user. 
```

这是用于测试条件的预期异常 - 这没有副作用，所以不要关心它。

请参考这个问题：[不安全的 JavaScript 尝试使用 URL 访问框架：域、协议和端口必须匹配。](https://stackoverflow.com/questions/10577590/unsafe-javascript-attempt-to-access-frame-with-url-domains-protocols-and-ports)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T12:37:45.027

在我的例子中，我在“_Layout”视图中有一个“facebook-like-box”，我必须在**global.css**文件中为它定制一些 CSS。

```
.fb_iframe_widget，.fb_iframe_widget 跨度，.fb_iframe_widget 跨度 iframe[样式] {
    宽度：100%！重要；
}

```

然后，当我尝试加载具有 facebook 分享按钮的内部页面（例如文章和新闻）时，它开始给我这个错误：

```
未捕获的安全错误：无法从“HTMLIFrameElement”中读取“contentDocument”属性：阻止了来源为“http://localhost:51826”的框架访问来源为“http://static.ak.facebook.com”的框架。被访问的框架将“document.domain”设置为“facebook.com”，但请求访问的框架没有。两者都必须将“document.domain”设置为相同的值才能允许访问。

```

不知何故，我认为那行 CSS 代码导致了这个问题（通过在全局范围内），试图访问和修改我的共享按钮的 iframe 的行为。

1.  删除那行 CSS 代码解决了这个问题。
2.  将该行 CSS 代码移动到在 < style > 标签内具有“facebook-like-box”的特定页面。**

# security - 如何允许用户只打开 PDF 文件而不保存它们

> ID：14892562
> 
> 赞同：0
> 
> 时间：2013-02-15T10:20:49.120
> 
> 标签：security, pdf

如何允许用户打开 PDF 文件但不保存它们。所有用户的 PC 都使用 Windows，并且没有管理员权限。我记得当我通过在线下载游戏杂志时，他们让我先下载证书，这样我就可以打开 PDF 游戏杂志。我可以做这样的事情吗？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:31:54.753

一般规则是“你给用户的任何东西都不再是你的了”。所以没有可靠的方法来防止储蓄。Adobe 尝试使用其 Reader 实施某种 DRM 解决方案，但它仅适用于 Reader，并且任何可以打开 PDF 的应用程序或库都能够保存数据（如果开发人员决定忽略 PDF 中的标志）。

# algorithm - 查找序列中每个元素的前驱

> ID：14892563
> 
> 赞同：5
> 
> 时间：2013-02-15T10:20:52.077
> 
> 标签：algorithm, language-agnostic

给定一个序列`a[1], a[2], a[3] .... a[n]`，我必须为每个元素找到`a[i]`一个元素`a[j]`，其中`a[j]`第一个元素是`a[i - 1], a[i - 2], a[i - 3]....`这样的`a[j] < a[i]`。

换句话说，我必须找到`a[j]`where`a[j] < a[i]`和`1<=j<i`。但是如果有多个这样的元素，我必须选择最接近的一个`a[i]`。

例如，按以下顺序：

`2 6 5 8`

我必须为 6 和 5 输出 2，为 8 输出 5。

我知道这可以很容易地完成`O(n^2)`，但是有没有更有效的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:45:40.770

可以`O(n)`使用[堆栈](http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29)来完成。

```
a = your array
d = a stack
d.push(a[1])
for i = 2 to n do
  while d.top > a[i] do
    d.pop()

  print d.top if it exists, else -1
  d.push(a[i]) 
```

基本上，我们保持`d`排序并确保它的最后一个元素总是小于`a[i]`. 这样，最后一个元素`d`将永远是我们正在寻找的。

由于嵌套循环，线性复杂度可能不会立即明显，但观察到每个元素最多会离开和进入堆栈一次，因此次数是恒定的。

# ruby-on-rails - 将值存储在变量中

> ID：14892564
> 
> 赞同：0
> 
> 时间：2013-02-15T10:20:52.293
> 
> 标签：ruby-on-rails, variables, controllers, class-variables

好的，所以在用户签署电子文档后，我已`?document_key=2343t8ujjf`被附加到我的重定向中。`url(index of my Partners Controller)`

我将它存储到索引方法中的类变量中。但是，我必须使用不同的方法（此处显示）将新密钥实际存储在我的数据库中，因为我必须先使用`@partner = Partner.find(params[:id])`才能更新其属性，并且我无法调用`@partner = Partner.find(params[:id])`索引，因为没有 id 通过服务器传递那个方法。

当然，我可以用`params[:id]`当前存在的 id 替换，但这将是非常糟糕的做法。我不想从按钮手动调用显示，但即​​使从索引自动调用它，它也需要一个 ID。

有没有办法解决这个问题？

```
class PartnersController < ApplicationController
# GET /partners
# GET /partners.json

def index

  @@agreement_key = params[:documentKey]
  logger.info "Key: #{@@agreement_key}"

  @partners = Partner.all

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @partners }
  end

  show # could also just paste parts of show into index but same problem
       # other than being able to then use just ivar.

end

# GET /partners/1
# GET /partners/1.json
def show
  @partner = Partner.find(params[:id])
     logger.info "Key: #{@@agreement_key}"
     @partner.update_attributes(
        {
          :agreement_key => @@agreement_key
        }
      )
  respond_to do |format|
    format.html do 
      redirect_to signed_path( partner_id: @partner.id )
    end
    format.json { render json: @partner }
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:32:15.030

您应该将值存储在`session`.

使用类变量会给您带来一些麻烦，即当有多个用户时，当用户在后续请求中连接到不同的工作人员时，当您在请求之间重新启动服务器时。

您可以在此处阅读有关会话存储的更多信息：http: [//guides.rubyonrails.org/action_controller_overview.html#session](http://guides.rubyonrails.org/action_controller_overview.html#session)

# javascript - 谷歌地图显示位置如 https://maps.google.com/maps?q=loc:28.617885999999999,77.372363000000007

> ID：14892566
> 
> 赞同：0
> 
> 时间：2013-02-15T10:21:00.270
> 
> 标签：javascript, google-maps, iframe, google-maps-api-3

我们如何使用

[https://maps.google.com/maps?q=loc:28.617885999999999,77.372363000000007](https://maps.google.com/maps?q=loc:28.617885999999999,77.372363000000007)

使用iframe或其他东西直接输入html。我也想显示位置，就像它在其中显示A一样

或者你可以帮助我使用像[https://developers.google.com/maps/documentation/javascript/tutorial这样的 javascript api](https://developers.google.com/maps/documentation/javascript/tutorial)

我使用了它，但没有像之前的 A 那样显示位置标记

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=false">
    </script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(28.617885999999999, 77.372363000000007),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

请提前帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:47:19.360

不使用地理编码器：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?&sensor=false">
    </script>
    <script type="text/javascript">

  var map;
  function initialize() {
    var Lat = 28.617885999999999;
    var Long = 77.372363000000007;
    var latlng = new google.maps.LatLng(Lat, Long);
    var mapOptions = {
      zoom: 12,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    var marker = new google.maps.Marker({
        map: map,
        position: latlng
    });
  }

    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width: 100%; height: 100%;"></div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:47:40.707

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?&sensor=false">
    </script>
    <script type="text/javascript">
      var geocoder;
  var map;
  function initialize() {
    geocoder = new google.maps.Geocoder();
    var Lat = 28.617885999999999;
    var Long = 77.372363000000007;
    var latlng = new google.maps.LatLng(Lat, Long);
    var mapOptions = {
      zoom: 12,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    var address = Lat+', '+Long;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert("Sorry no recent location");
      }
    });
  }

    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width: 100%; height: 100%;"></div>
  </body>
</html> 
```

顺便说一句，我自己做的thanx

# java - 类中的 Xstream 类

> ID：14892567
> 
> 赞同：0
> 
> 时间：2013-02-15T10:21:04.730
> 
> 标签：java, xml, xstream

在 Xstream 中我们可以使用这个：

```
class Cat {
  int age;
  String name;
  Cat anotherSmallCat;
} 
```

XML 是

```
<cat><age>2</age><name>tom</name><cat><name>tommy</name></cat></cat> 
```

我试过但得到异常。

```
com.thoughtworks.xstream.converters.ConversionException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:29:13.383

使用如下注释您的猫`@XStreamAlias`，

```
@XStreamAlias("Cat")
public class Cat {

    int age;
    String name;

    @XStreamAlias("Cat")
    Cat anotherSmallCat;

} 
```

尝试反序列化如下，

```
XStream xstream = new XStream();
xstream.processAnnotations(Cat.class);
Cat cat = (Cat) xstream.fromXML(new File("test.xml")); 
```

不要忘记使用[processAnnotations](http://x-stream.github.io/javadoc/com/thoughtworks/xstream/XStream.html#processAnnotations%28java.lang.Class%29)方法。

# c - 参数类型不完整

> ID：14892568
> 
> 赞同：0
> 
> 时间：2013-02-15T10:21:05.180
> 
> 标签：c, struct, typedef

我在最后一行收到警告“参数类型不完整”。但我不知道为什么。

```
struct clockClass {
    uint32_t (*getClock) (void);
    bool (*setCorrectionFactor)(uint32_t newCorrectionFactor);
    uint32_t (*getCorrectionFactor) (void);
};

/* Type definition for ::virtualClock  */
typedef struct clockClock ClockClass;

/* VC Synchronization Class */
struct vcSync_sRio {
    bool (*vcSync)(ClockClass me);  /*Warning LINE*/
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:24:35.617

似乎这只是一个错字：您已经定义`struct clockClass`但您`typedef`定义了`struct clockClock`.

将您更改`typedef`为：`typedef struct clockClass ClockClass;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:22:31.920

将行更改为：

```
bool (*vcSync)(struct ClockClass me); 
```

或将另一行更改为：

```
typedef struct ClockClass ClockClass; 
```

# css - css3 webkit 过渡宽度自动聚焦

> ID：14892572
> 
> 赞同：0
> 
> 时间：2013-02-15T10:21:12.777
> 
> 标签：css, twitter-bootstrap, css-transitions

[请先查看此演示](http://jsfiddle.net/Viruthagiri/MgcDU/1950/embedded/result/)

如果您关注搜索框，它将扩展到 400 像素。

那是因为我在焦点上将宽度设置为 400px

```
.navbar-search .search-query:focus {
 width:400px;
-moz-transition: width 0.5s ease-out;
-webkit-transition: width 0.5s ease-out;
transition: width 0.5s ease-out;
} 
```

我想在焦点上进行 100% 宽度搜索。

谁能帮我这个？

[这是源代码。](http://jsfiddle.net/Viruthagiri/MgcDU/1950/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:43:42.063

添加以下规则：

```
.navbar-search {
  float: none;
  overflow: hidden;
  margin: 0;
  padding-top: 5px;
  text-align: right;
}
.navbar-search .search-query {
  box-sizing: border-box;
  height: 30px;
}
.navbar-search .search-query:focus {
  width: 100%;
} 
```

# c# - 动态创建的 div 标签内的图像

> ID：14892573
> 
> 赞同：-1
> 
> 时间：2013-02-15T10:21:14.860
> 
> 标签：c#, javascript

需要的是使用 Javascript 动态创建六个 div 标签，这些标签将根据窗口的宽度（计算机、iphone、ipad、Blackberry 等）调整大小。这项任务已经成功完成。下一个任务是在每个创建的 div 标签中放置一个图像，**记住 div 是动态创建的，并且图像必须是可点击的。**我有一个包含图像的文件夹。

**请帮助我是新手**。

**注意：图像应随着 div 大小的调整而调整* 这是动态创建的 div 标签的代码。请详细说明我如何才能最好地实现这一目标。

```
function DynamicDiv()
{
    for (var i = 0; i <= 5; i++)
    {
        var dynDiv = document.createElement("div");
        dynDiv.className = "blocks";
        document.body.appendChild(dynDiv);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:49:30.247

您可以尝试将 html 创建为字符串并将其附加到元素。

```
var html='<div>';
html='<img src="'+ImagePathforDynamic+'" alt="'+ImageAlterText+'"'/>;
html+='</div>';
$('#idOfElement').append(html); 
```

哦！需要添加事件

```
$('#idOfElement img').click(function(){
    // your code to perform on click of the image
}); 
```

或者，如果您想拥有多个 div，那么您可以拥有可以为其生成 html 的循环。
如果这对您没有帮助，请告诉我；）

# web-services - 使用 https 和 SAML 保护 Web 服务

> ID：14892575
> 
> 赞同：0
> 
> 时间：2013-02-15T10:21:19.180
> 
> 标签：web-services

我对如何应用 https 和 SAML 来保护 Web 服务有疑问我已经使用 C# 使用 ASP.NET Web 服务应用程序项目实现了 Web 服务，但我必须增强此 Web 服务

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.Services;
    using System.Data.SqlClient;
    using System.Configuration;

  namespace simpleWeb_services
  {
/// <summary>
/// Summary description for Service1
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
     // To allow this Web Service to be called from script, using ASP.NET AJAX, 
uncomment    the following line. 
// [System.Web.Script.Services.ScriptService]
 public class Service1 : System.Web.Services.WebService
 {

    [WebMethod]
    public string Getinfo(int id)
    {
        string name = "";

        SqlConnection connection1 = new SqlConnection();

        connection1.ConnectionString = 
(username,password)VALUES(' "+ username +" ',"+ password +")", connection);
        connection1.Open();
        SqlCommand cmd = new SqlCommand("SELECT username from [userTable] where  
userid=" + id + "", connection1);
        SqlDataReader reader = cmd.ExecuteReader();
        while (reader.Read())
        {
            name = reader[0].ToString();
        }

        return name;
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-15T12:21:13.517

您正在使用旧版 ASMX Web 服务技术。这是一个错误。

ASMX 不应该用于新的开发。您应该改用 WCF。特别是，WCF 支持您正在寻找的内容等等。

* * *

需要明确的是：这个答案不是关于“使用新东西，因为它是*新*的”。它是关于“新东西做你想做的事，而旧东西永远不会做比现在更多的事情”。

# javascript - 使用 javascript/jQuery 向元素添加标题的最有效方法

> ID：14892578
> 
> 赞同：0
> 
> 时间：2013-02-15T10:21:28.620
> 
> 标签：javascript, jquery, title, object-literal

我在页面上的段落元素（有些出现不止一次）中有一些最多 24 个法语数字作为文本，我想浏览它们并将相关的英文翻译添加为标题属性。我有一个解决方案，但我认为它不是最有效的，所以我只是在寻找一些帮助来写一些更简洁的东西，如果可能的话，并且对你的解决方案感兴趣。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T10:25:27.603

创建一个翻译对象，其中`key`是法语数字，`value`是英语翻译。

```
var translations = {
    "un" : "one",
    "deux" : "two",
    ...
};
$('.demonstration [class*="col"] p').each(function () {
    var $this = $(this);
    $this.attr('title', translations[$this.text().replace(/\s+/g, '')]);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:27:05.163

改用数组和对象：

```
var myTitles = { vingtquatre : 'twenty four', vingtdeux: 'twenty two' }; // add your other keys and values here in that same format, no matter what the order is inside.

$(this).attr('title', myTitles[$(this).text().replace(/\s+/g, '')]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:26:35.143

您可以定义一个列表：

```
var nums = { 'un': 'one', 'deux': 'two', ... } 
```

然后，替换`switch`为：

```
$(this).attr('title', nums[$(this).text().replace(/\s+/g, '')] || null); 
```

请注意，`|| null`当数字不在列表中时，即它的作用`default`类似于`switch`

# axapta - 获取字段组中存在的字段 [ax 2009]

> ID：14892582
> 
> 赞同：0
> 
> 时间：2013-02-15T10:21:57.137
> 
> 标签：axapta, dynamics-ax-2009, x++

AX 允许将字段组（例如维度）定义为扩展数据类型中的数组。如何获取数组元素信息，例如标签和基本类型？

代码 ：

```
 tID = dict.tableName2Id('CustTable');
counter = 0;
dt = new DictTable(tID);
if (dt)
{
    counter = dt.fieldNext(counter);
    while (counter)
    {
        df = dt.fieldObject(counter);
        arrSize = df.arraySize();
        if (df && arrSize > 1)
        {
            // Field group, get array elements and types ??

        }
        counter = dt.fieldNext(counter);
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:29:24.933

我不确定您所说的字段组是什么意思，但是 Array 的每个成员都将属于同一类型。

```
df.type(); 
```

或者

```
df.TypeId() 
```

取决于您要查找的“类型”。

要获取标签，请传递数组元素的数量

```
for(i=i;i<=arrSize;i++)
{
    print df.label(i);
} 
```

不同寻常的是，这在 msdn [http://msdn.microsoft.com/en-us/library/aa556779(v=ax.50).aspx中有详细记录](http://msdn.microsoft.com/en-us/library/aa556779%28v=ax.50%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:40:02.537

我在 Ax2012 工作，我需要一个将字段组转换为设置的解决方案。我希望会有所帮助。

```
private Set fieldGroupToSet(TableId _tableId, FieldGroupName _fieldGroupName)
{
    Set             retSet;

    DictTable       dTable;
    DictField       dField;
    DictFieldGroup  dFieldGroup;

    int             fieldId;
    int             counter;
    int             fieldCnt;
    ;

    dTable = new DictTable(_tableId);
    retSet = new Set(Types::String);    
    if (dTable)
    {
        for(counter = 1; counter <= dTable.fieldGroupCnt(); counter++)
        {
            if(_fieldGroupName == dTable.fieldGroup(counter))
            {
                dFieldGroup = new DictFieldGroup(_tableId, _fieldGroupName);
                if(dFieldGroup)
                {
                    for (fieldCnt=1; fieldCnt <= dFieldGroup.numberOfFields(); fieldCnt++)    
                    {
                        fieldId = dFieldGroup.field(fieldCnt);
                        dField = new DictField(_tableId, FieldId);
                        if(dField)
                        {
                            retSet.add(dField.name());
                        }
                    }
                }
            }
        }
    }
    return retSet;
} 
```

# facebook - 是否有任何选项可以在不使用 Facebook Graph API 的情况下发布到用户朋友的墙上

> ID：14892590
> 
> 赞同：0
> 
> 时间：2013-02-15T10:22:16.943
> 
> 标签：facebook

Facebook 已取消通过 Graph API 向用户朋友的墙发帖的功能。当朋友离线时，还有其他选项可以发布到用户朋友的墙上吗？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:33:04.683

好吧-他们删除了该功能...所以没有。您将无法*通过 API*向用户墙发帖。但是，无论朋友在线还是离线，都没有区别。

您将能够做的（[如路线图所述](https://developers.facebook.com/roadmap/completed-changes/)）只是向您的用户显示一个[提要对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)- 他们总是能够以这种方式在人们的墙上发帖。

还有一些社交插件允许用户向其他用户发布链接。您使用哪个插件取决于您希望允许用户做什么。

引用[发送按钮](https://developers.facebook.com/docs/reference/plugins/send/)文档：

> 虽然“[赞”按钮](https://developers.facebook.com/docs/reference/plugins/like/)允许用户与他们的所有朋友共享内容，但“发送”按钮允许他们向少数朋友发送私人消息。

# c# - 如何获取 XElement，如果它不存在则创建它？

> ID：14892594
> 
> 赞同：3
> 
> 时间：2013-02-15T10:22:26.913
> 
> 标签：c#, .net, xml, linq-to-xml

有没有办法在 XContainer 中使用类似[Element](http://msdn.microsoft.com/en-us/library/system.xml.linq.xcontainer.element.aspx)方法的方法，但如果容器中不存在具有指定名称的元素，则会创建一个新的 XElement 并返回该方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T10:34:43.837

我觉得你应该自己写。它应该是一个静态辅助方法。

```
 private static XElement GetOrCreateElement(XContainer container, string name) {
        var element = container.Element(name);
        if(element == null)
        {
           element = new XElement(name);
            container.Add(element);
        }
        return element;
    } 
```

如果您希望使用成员调用语法，请通过在 XContainer 前面添加“this”使其成为扩展方法。在这种情况下，该方法应位于一个没有您可以称为“XContainerExtensions”的字段的静态类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:28:59.707

不，您必须自己编写该功能：

```
var element = container.Element("name");
if(element == null)
{
    element = new XElement("name");
    container.Add(element);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:29:53.827

我认为这是不可能的，因为 Linq-to-XML 是一种用于 XML-Data 的查询语言，并且在查询时不提供 CRUD 操作。您必须使用两个步骤。

首先查询您的元素，如果我不存在，您必须将新元素添加到您的容器中。

# c# - 如何在 asp.net 中从数据库中填充“选择”

> ID：14892599
> 
> 赞同：9
> 
> 时间：2013-02-15T10:22:46.633
> 
> 标签：c#, asp.net, html, sql-server

我有一个 html 控件`select`

```
 <select id="Select1" runat="server" name="D1">
    <option></option>
 </select> 
```

如何使用or用我的`SQL Server`数据库中的数据填充它？`C#``JavaScript/jQuery/JSON`

请不要发布有关如何填充 a 的答案，`asp:DropDownList`因为我已经知道该怎么做，我必须使用`select`控件。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-15T10:28:49.833

aspx：

```
 <select id="Select1" runat="server" name="D1">

  </select> 
```

后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
   if (!IsPostBack)
   {
      string ConnectString = "server=localhost;database=pubs;integrated security=SSPI";
      string QueryString = "select * from authors";

      SqlConnection myConnection = new SqlConnection(ConnectString);
      SqlDataAdapter myCommand = new SqlDataAdapter(QueryString, myConnection);
      DataSet ds = new DataSet();
      myCommand.Fill(ds, "Authors");

      Select1.DataSource = ds;
      Select1.DataTextField = "au_fname";
      Select1.DataValueField = "au_fname";
      Select1.DataBind();
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T12:23:02.070

```
function GetItems() {

var items;

    $.getJSON("/api/MethodName/" + id(Optional), function (data) {
        $.each(data, function (key, val) {
            items += "<option value='" + val.id+ "'>" + val.value+ "</option>";    
        });

        var header = '<option value=\'\'>Select...</option>';
        $('#Select1').html(header + items);
    });

}; 
```

您可以使用 asp.net webapi for json，它非常简单快捷

*   [Asp.Net Web API](http://www.asp.net/web-api)
*   [将 Web Api 与 Web 表单一起使用](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/using-web-api-with-aspnet-web-forms)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T10:44:21.360

您可以`json`在 ajax 中使用，但您必须使用一些 web 服务从服务器返回 json。

```
$.ajax({
   url:'/path/to/webservice/method',
   type:'POST',
   dataType: 'json',
   success: function(data){
       $.each(data, function(i, item){
          $('<option value="'+item.val+'">'+item.text+'</option>').appendTo('#Select1');
       });
   },
   error: function(){
      console.log('err')
   }
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-11T07:39:28.030

在后面的代码中：

```
 string options = string.Empty; 
 using (SqlConnection sql_conn = new SqlConnection(ConfigurationManager.ConnectionStrings["connstr"].ToString()))
        {
            SqlDataAdapter sql_adapter = new SqlDataAdapter("select Value, Name from YourTable", sql_conn);
            DataSet ds = new DataSet();
            sql_adapter.Fill(ds, "TempTable");

            foreach (DataRow row in ds.Tables["TempTable"].Rows)
            {
                options = "<option value='" + row["Value"] + "'>" + row["Name"] + "</option>";
            }
            sql_conn.Close();
           return options;
        } 
```

然后你可以使用jquery：

```
$.get(url, function (data) {        
        $('#Select1').html(data);
    }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-13T07:29:41.707

您可以使用中继器

```
<select>
<asp:Repeater ID="Repeater1" runat ="server" DataSourceID="SqlDataSource1">
    <ItemTemplate>
        <option value='<%# Eval("ID")%>'> <%# Eval("ITEMNAME")%></option>
    </ItemTemplate>
</asp:Repeater>
</select> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-24T20:49:26.440

```
 using (SqlConnection con = new SqlConnection("Data Source = [HostName]; Initial Catalog = CustomerOrders; Integrated Security = true"))
            {
                SqlCommand cmd = new SqlCommand("SELECT Name FROM Customer", con);
                con.Open();

                dropDownList.DataSource = cmd.ExecuteReader();
                dropDownList.DataTextField = "Name";
                dropDownList.DataValueField = "Name";
                dropDownList.DataBind();
            } 
```

# c# - 在 Gmail 上使用 Imap 检索邮件时收到错误（端口 143）

> ID：14892603
> 
> 赞同：0
> 
> 时间：2013-02-15T10:23:01.797
> 
> 标签：c#, email, gmail, imap

您好，我目前正在使用 limilabs 库连接到我的 gmail 帐户。该程序的目的是发送邮件和接收。在我的笔记本电脑上，我只能接收邮件，但在我朋友的电脑上，他既可以接收也可以发送。所以我的问题是为什么我不能在我的笔记本电脑上接收电子邮件？

该程序应该下载电子邮件并在列表框中填充主题，并且在我朋友的笔记本电脑上它可以工作，但在我的电脑上却不行。我在端口 143 上遇到了一些错误。这是我的代码的一部分。先感谢您。

```
 public void ReadMail()
    {
        using (Imap imap = new Imap())
        {
            try
            {
                imap.Connect("imap.gmail.com");  //ConnectSSL for SSL
                imap.Login("xxxxxxxxx", "xxxxxx");
            }
            catch (Exception ex)
            {
                MessageBox.Show("Log in failed. " + ex.ToString(), "Message",   MessageBoxButtons.OK, MessageBoxIcon.Error);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:54:33.413

我找到了解决方案：

我需要使用*ConnectSSL*方法，并将端口更改为 993

这是需要更改的单行代码：

```
imap.ConnectSSL("imap.gmail.com",993); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:36:18.487

免责声明 - 我对 Limilabs 邮件库一无所知。

想到两件事：

*   您需要在您的帐户上启用 IMAP 支持

（来自[GMail 帮助](http://support.google.com/mail/bin/answer.py?hl=en&answer=77695)）

> 在您的 Gmail 设置中启用 IMAP
> 
> *   登录 Gmail。
> *   单击右上角的齿轮图标，然后选择设置。
> *   单击转发和 POP/IMAP。
> *   选择启用 IMAP。
> *   单击保存更改。

*   错误的设置

关于实际连接到 IMap，相同的帮助页面提供了以下设置供使用：

> *   imap.gmail.com
> *   端口：993
> *   需要 SSL：是
> *   全名或显示名称：[您的姓名]
> *   帐户名或用户名：您的完整 Gmail 地址 (username@gmail.com)。Google Apps 用户，请输入 username@your_domain.com
> *   电子邮件地址：您的完整 Gmail 地址 (username@gmail.com) Google Apps 用户，请输入 username@your_domain.com
> *   密码：您的 Gmail 密码

# javascript - D3为单个json生成多个图

> ID：14892604
> 
> 赞同：2
> 
> 时间：2013-02-15T10:23:03.780
> 
> 标签：javascript, d3.js

有没有办法使用单个 json.i 生成多个图形。我只能使用一个数据集。我只能在所有 P 标签中生成一个图，但我想在所有 P 标签中为每个数据集生成不同的图。

html

```
<p class="graph1"></p>
<p class="graph1"></p>
<p class="graph1"></p>
<p class="graph1"></p>
<p class="graph1"></p> 
```

数据集

```
var dataset=[[2100, 2000, 3200],[2200, 3000, 3200],[1200, 1000, 5200],[1200, 2000, 3200],[1200, 3000, 3500]]; 
```

D3 Javascript

```
svg = d3.selectAll('.graph1').append("svg").attr("width",w).attr("height",h);
var rect1 =   svg.append("rect").attr("x",0).attr("y",3*h/4).attr("width",w).attr("height",rect_1_h)
        .style("fill",rect_1_color); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:57:29.463

如果您想根据数据集动态生成图形，您可以在一个语句中通过将数据集与选择连接起来来实现。这可以使用函数来完成[`data()`](https://github.com/mbostock/d3/wiki/Selections#wiki-data)。

例如，如果您想生成具有存储在数组中的填充颜色的矩形，您可以这样做（我将您的脚本用于不同的数据集）：

```
var dataset=[["blue"],["red"],["green"],["black"],["orange"]]; 
var rect_1_h =20;
var h =200;
var w=200;
var rects = d3.select("body").selectAll('.graph1')
 .data(dataset)
.enter().append("p").append("svg").attr("width",w).attr("height",h)
.append("rect")
 .attr("x",0)
 .attr("y",3*h/4)
 .attr("width",w)
 .attr("height",rect_1_h)
 .style("fill",function(d) { return d[0];}); 
```

这是一个jsfiddle[示例](http://jsfiddle.net/Jve6V/)

# android - 10" 平板电脑上的 Android BitmapRegionDecoder decodeRegion NullPointerException

> ID：14892610
> 
> 赞同：2
> 
> 时间：2013-02-15T10:23:29.623
> 
> 标签：android, bitmap, nullpointerexception

在我的 Android 应用程序中，我使用以下代码：

```
BitmapRegionDecoder decoder;
...
decoder = BitmapRegionDecoder.newInstance(myStream, false);
...
int width = -1, height = -1, left = -1, top = -1;
...
Log.d("GDA", left + " " + top + " " + width + " " + height);
Rect re = new Rect(left, top, width, height);
Log.d("GDA", re.toString());
if(decoder != null)
    region = decoder.decodeRegion(re, null); 
```

在智能手机和 7 英寸平板电脑上一切正常，但在 10 英寸平板电脑上（我在三星 GT10.1 和 Acer A501 上测试过）我收到了这个错误：

```
1152 1728 2304 2592
Rect(1152, 1728 - 2304, 2592)
java.lang.NullPointerException
    at android.graphics.BitmapRegionDecoder.decodeRegion(BitmapRegionDecoder.java:399) 
```

我找不到解决方案。有没有人有同样的问题？有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-29T15:29:21.320

Solution:

Don't use "region = decoder.decodeRegion(re, null);", use for example:

```
BitmapFactory.Options options = new BitmapFactory.Options();
region = decoder.decodeRegion(re, options); 
```

It's work, checked for Galaxy Tab 10.1 Android 4.0.x

# c# - ICriteria 添加或限制

> ID：14892611
> 
> 赞同：1
> 
> 时间：2013-02-15T10:23:29.227
> 
> 标签：c#, nhibernate, nhibernate-criteria

我需要进行如下选择

```
select * from produtos where Value = 10 or Value = 15 or  Value= 20 .... 
```

由于我不知道会有多少值，它将在列表中循环，用户将决定有多少值......问题是，如果我执行 Criteria

```
ICriteria criterion = session.createCriteria(typeof (Product) "produto"). SetCacheable (true);
criterio.Add (Restrictions.Eq ("produto.Valor", 10));
criterio.Add (Restrictions.Eq ("produto.Valor", 15));
criterio.Add (Restrictions.Eq ("produto.Valor", 20)); 
```

由一个选择子句“and”组成

```
select * from produtos where Value=10 and Value = 15 and  Value= 20 .... 
```

不能使用“in”限制，因为我可以在 Restrictions.Eq Restrictions.Ge 或 Restrictions.Le 或任何其他子句中占有一席之地......

有什么方法可以在 Criteria 中添加子句？就像是

```
criteria.Add (Restrictions.Or (Restrictions.Eq ("produto.Valor", 10)));
criteria.Add (Restrictions.Or (Restrictions.Eq ("produto.Valor", 15)));
criteria.Add (Restrictions.Or (Restrictions.Eq ("produto.Valor", 20)));
criteria.Add (Restrictions.Or (Restrictions.Eq ("produto.Valor", 25))); 
```

我知道它使用了某种表达式，例如链接，但不明白这如何帮助我进行选择，例如，说我有一个 foreach 并且对于每个项目我需要让这个 foreach 添加一个“或”标准，

```
foreach (var item in items)
{
    criteria.Add("or item.Valor =" item.Valor);
} 
```

我只能在这个标准：

```
foreach (var item in items)    
{
    criteria.Add(Restrictions.Eq("item.Valor", item.Valor));
} 
```

什么是“和”或它。但这不会或可能会为此添加另一个标准。

在同样的情况下，我会想要那个

```
foreach (var item in items)
{
    var items = session.QueryOver<Item>()
                       .WhereRestrictionOn(c => c.Valor item.Valor == | |?)
                       .List<Item>();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:31:15.160

也许你可以试试：

```
criteria.Add (
    new Disjunction()
        .Add (Restrictions.Eq ("produto.Valor", 10))
        .Add (Restrictions.Eq ("produto.Valor", 15))
        .Add (Restrictions.Eq ("produto.Valor", 20))
        .Add (Restrictions.Eq ("produto.Valor", 25))
    ); 
```

我想`criteria.Add (Restrictions.In("produto.Valor", new[]{10,15,20,25});`也应该工作

希望这会有所帮助

# asp.net - “DDL 有一个无效的 SelectedValue，因为它不存在于项目列表中”的奇怪变化

> ID：14892612
> 
> 赞同：0
> 
> 时间：2013-02-15T10:23:33.670
> 
> 标签：asp.net

使用`asp:DropDownList`带有`OnDataBound="PageDDL_DataBound"`...

```
 protected void PageDDL_DataBound(Object sender, EventArgs e)
    {
        PageDDL.Items.Insert(0, new ListItem("BACK", "0"));
        PageDDL.Items.Insert(0, new ListItem("-- Select Page --", "none"));
        PageDDL.SelectedIndex = -1;

        if (linkEnt != null && (LinkType)Convert.ToInt16(linkEnt.LinkTypeValue) == LinkType.InternalLink)
        {
            if (PageDDL.Items.FindByValue(linkEnt.LinkValue) != null)
            {
                PageDDL.SelectedValue = linkEnt.LinkValue;
            }
        }
    } 
```

`linkEnt.LinkValue`当为“0”时会引发异常（而不是在此代码中） 。注意`PageDDL.SelectedValue`在代码的其他任何地方都没有改变。

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:25:52.417

以下代码适用于这种情况

```
 protected void PageDDL_DataBound(Object sender, EventArgs e)
    {
        PageDDL.Items.Insert(0, new ListItem("[BACK]", "0"));
        PageDDL.Items.Insert(0, new ListItem("-- Select [BACK] or a Page  --", "none"));
        PageDDL.SelectedIndex = -1;

        if (linkEnt != null && (LinkType)Convert.ToInt16(linkEnt.LinkTypeValue) == LinkType.InternalLink)
        {
            ListItem item = PageDDL.Items.FindByValue(linkEnt.LinkValue);
            if (item != null)
            {
                item.Selected = true;
            }
        }
    } 
```

我很想知道为什么会这样，但原始代码没有！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:45:55.927

我认为将所有这些代码放在数据绑定事件之外是可行的。我认为您的代码不需要任何`DataBound`事件，还是有？

对于数据绑定事件，您应该将某些内容与下拉列表绑定，然后必须调用下拉列表的`Databind()`事件，该`DataBound`事件将为添加的每个项目调用事件。

而且我认为它引发了异常，因为当您尝试设置所选值时，下拉列表未与项目完全绑定，因此无法找到该项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:50:53.687

试着先打电话`PageDDL.Items.Clear();`。

也许这是一个错误：

[Microsoft Connect - ASP.NET DropDownList SelectedValue 被持久化，如果控件是 DataBound 第二次，则会导致异常](https://connect.microsoft.com/VisualStudio/feedback/details/666808/asp-net-dropdownlist-selectedvalue-is-persisted-which-results-in-exception-if-the-control-is-databound-second-time)

# google-maps - 如何使用从 linux 脚本到 jpeg/png 的标记来快照谷歌地图

> ID：14892613
> 
> 赞同：0
> 
> 时间：2013-02-15T10:23:44.590
> 
> 标签：google-maps

我创建了一个带有一千多个标记的谷歌地图，这些标记显示了一个地区昨天的天气。我想在早上拍摄这张图片，并每天在我的主页上使用它。目前每次访问都使用太慢，甚至无法在我的 iPad 上运行。我知道如何捕获屏幕并保存在桌面上，但我想要一些可以在我的网络服务器（linux）上运行的软件，它可以转到我为生成图像而制作的页面，并将图像渲染为 jpeg 或类似的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:28:51.323

据我所知，您打算以这种方式进行处理将违反谷歌地图的服务条款。但是，您可以使用[Google Static Maps API](https://developers.google.com/maps/documentation/staticmaps/)。我认为您无法在此上绘制 1000 个标记，但是具有 1000 个标记且无法放大的图像是一个普遍问题。

# asp.net-mvc - 在 asp.net mvc 应用程序中实现表单身份验证

> ID：14892617
> 
> 赞同：0
> 
> 时间：2013-02-15T10:23:48.470
> 
> 标签：asp.net-mvc, forms-authentication, user-management

我正在开发一个 ASP.NET MVC4 社交网络应用程序，它将有 5 种类型的用户，即学生、管理员、主管、提供者等。

我想使用表单身份验证，因为它是一个互联网应用程序。我的数据库有`USERS, ROLES & FEATURES`表以及 SQL 服务器中的其他表。如何在 ASP.NET MVC 中实现身份验证？我在哪里存储登录用户的信息？( `e.g. session, viewbag, tempdata, etc.`) 以及实现这一点的最佳方法是什么？我不想使用 MVC 提供的默认网络安全功能。

带有源代码的应用程序会有很大帮助。我尝试了 NerdDinner，但它使用的是我不想使用的默认网络安全类。

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:04:02.520

ASP.NET 中内置了几层安全功能

*   表单认证模块。这是负责创建和管理身份验证 cookie 并允许/阻止访问该站点的部分。这是最基本的基础设施，您必须使用它才能使用“表单身份验证”。
*   会员数据库和 API。让您存储用户 ID/通行证和其他一些用户属性。如果您有其他验证用户凭据的方法，则可选
*   角色数据库和 API。可选，除非您想提供细粒度的授权。

如果您正在构建一个没有现有 id/访问管理基础架构的全新网站，那么几乎没有理由重新发明轮子并从头开始构建 Membership 和 Role 基础架构，除非它们不支持您的要求。

如果您想了解 ASP.NET 安全的基本起点，请尝试订阅[http://www.pluralsight.com/training](http://www.pluralsight.com/training)并参加 ASP.NET 安全课程。

# android - Blackberry 10 上的 Android 应用程序无法启动 - 如何调试？

> ID：14892618
> 
> 赞同：0
> 
> 时间：2013-02-15T10:23:49.003
> 
> 标签：android, blackberry-10, blackberry-android

我在这里有一个应该在 Blackberry 上运行的 Android apk 应用程序。我用 apk2bar 对其进行了转换，并用我的调试令牌对其进行了签名。该设备还安装了调试令牌并启用了开发人员模式。使用 blackberry-deploy 安装应用程序很顺利，应用程序出现在主屏幕上。启动时，应用程序会询问权限（GPS 等），在确认它说“正在初始化”后，应用程序就会消失而没有任何错误。

我怎样才能知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:59:05.183

要在 blackberry 10 OS 设备/模拟器中开发和调试 android 应用程序，您需要安装[Blackberry Android Tools](http://developer.blackberry.com/android/tools/)。您仍然需要通常的[Android Development Tools](http://developer.android.com/tools/sdk/eclipse-adt.html)，因为您可以从那里获得 LogCat 窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T13:35:09.353

检查 Google API，例如 Google Maps 或 Play 相关调用。如果你删除所有检查它是否有效。

关于在 BlackBerry 10 上查看日志，您可以查看： [获取 BlackBerry 10 日志的最佳方式？](https://stackoverflow.com/questions/13112383/the-best-way-to-get-blackberry-10-logs)

# python - 在 matplotlib 中标注尺寸

> ID：14892619
> 
> 赞同：3
> 
> 时间：2013-02-15T10:23:50.580
> 
> 标签：python, matplotlib

我想在 matplotlib 图中注释某些长度。例如，点 A 和 B 之间的距离。

为此，我想我可以使用[注释](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.annotate)并弄清楚如何提供箭头的开始和结束位置。或者，使用[箭头](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.arrow)并标记该点。

我尝试使用后者，但我不知道如何获得 2 头箭头：

```
from pylab import *

for i in [0, 1]:
    for j in [0, 1]:
        plot(i, j, 'rx')

axis([-1, 2, -1, 2]) 
arrow(0.1, 0, 0, 1, length_includes_head=True, head_width=.03) # Draws a 1-headed arrow
show() 
```

如何创建一个 2 向箭头？更好的是，在 matplotlib 图中是否有另一种（更简单的）标记尺寸的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T10:39:01.367

您可以使用该属性更改箭头的样式`arrowstyle`，例如

```
ax.annotate(..., arrowprops=dict(arrowstyle='<->')) 
```

给出一个双向箭头。

一个完整的例子可以在[这里](http://matplotlib.org/users/annotations_guide.html)找到大约三分之一的页面，可能有不同的样式。

至于在地块上标记尺寸的“更好”方式，我想不出任何办法。

编辑：这是一个完整的示例，如果有帮助，您可以使用

```
import matplotlib.pyplot as plt
import numpy as np

def annotate_dim(ax,xyfrom,xyto,text=None):

    if text is None:
        text = str(np.sqrt( (xyfrom[0]-xyto[0])**2 + (xyfrom[1]-xyto[1])**2 ))

    ax.annotate("",xyfrom,xyto,arrowprops=dict(arrowstyle='<->'))
    ax.text((xyto[0]+xyfrom[0])/2,(xyto[1]+xyfrom[1])/2,text,fontsize=16)

x = np.linspace(0,2*np.pi,100)
plt.plot(x,np.sin(x))
annotate_dim(plt.gca(),[0,0],[np.pi,0],'$\pi$')

plt.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-29T22:58:51.500

以下为您的绘图提供了一个很好的维度：使用不同的箭头道具（'<->' 和 '|-|'）添加了两次注释，之后将文本置于行的中间，并使用 bbox覆盖标签下的线。

```
axs[0].annotate("", xy=(0, ht), xytext=(w, ht), textcoords=axs[0].transData, arrowprops=dict(arrowstyle='<->'))
axs[0].annotate("", xy=(0, ht), xytext=(w, ht), textcoords=axs[0].transData, arrowprops=dict(arrowstyle='|-|'))
bbox=dict(fc="white", ec="none")
axs[0].text(w/2, ht, "L=200 m", ha="center", va="center", bbox=bbox) 
```

[![在此处输入图像描述](../Images/29aed07bba8eef346dd00833c93c96f0.png)](https://i.stack.imgur.com/ZXR7d.png)

# c# - System.Runtime.Cache 立即过期

> ID：14892621
> 
> 赞同：5
> 
> 时间：2013-02-15T10:24:05.440
> 
> 标签：c#, .net, caching

我有一个网页缓存一些查询字符串值 30 秒，这样它就不会收到重复的值。我正在使用以下课程：

```
public class MyCache   {

private static ObjectCache cache = MemoryCache.Default;

public MyCache() { }

public void Insert(string key, string value)
{

    CacheItemPolicy policy = new CacheItemPolicy();
    policy.Priority = CacheItemPriority.Default;
    policy.SlidingExpiration = new TimeSpan(0, 0, 30);
    policy.RemovedCallback = new CacheEntryRemovedCallback(this.Cacheremovedcallback);

    cache.Set(key, value, policy);
}

public bool Exists(string key)
{
    return cache.Contains(key);
}

public void Remove(string key)
{
    cache.Remove(key);
}

private void Cacheremovedcallback(CacheEntryRemovedArguments arguments)
{      
    FileLog.LogToFile("Cache item removed. Reason: " + arguments.RemovedReason.ToString() +  "; Item: [" +  arguments.CacheItem.Key + ", " + arguments.CacheItem.Value.ToString() + "]");         
}
 } 
```

这已经工作了几个星期，然后突然缓存不再保留这些值。将项目插入缓存后，CacheRemoved 回调立即触发，我得到了删除的原因：**CacheSpecificEviction** 这是在带有 .NET 4.0 的 Windows Server 2008 SP1、IIS7.5 上运行的。在此期间，没有对操作系统或 IIS 应用任何更改。

有没有办法解决这个问题，如果没有，是否有更好的缓存解决方案可以在网页中使用？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-19T16:38:14.827

查看`MemoryCacheStore`（应该是使用的默认存储`MemoryCache.Default`）的源代码，似乎`CacheSpecificEviction`只有在释放缓存时才调用带有参数的删除回调：

[https://referencesource.microsoft.com/#System.Runtime.Caching/System/Caching/MemoryCacheStore.cs,230](https://referencesource.microsoft.com/#System.Runtime.Caching/System/Caching/MemoryCacheStore.cs,230)

环顾四周，确保您的缓存对象没有被意外处置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-16T22:01:18.297

我还发现，`RemovedCallback`如果您调用`MemoryCache.Set`现有项目，则会执行 - 因为`.Set`会覆盖缓存中的项目。

解决方法是使用`.Add`而不是`.Set`

尽管 OP 提到`CacheSpecificEviction`了这并没有回答他的问题，但以防万一有人遇到类似的问题并在搜索网络后登陆这个问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T10:38:10.697

试试这个：

```
policy.AbsoluteExpiration = DateTime.Now.AddSeconds(30); 
```

这就是我使用缓存的方式：

```
public static class CacheHelper
{
    private static ObjectCache _cache;
    private const Double ChacheExpirationInMinutes = 10;

    /// <summary>
    /// Insert value into the cache using
    /// appropriate name/value pairs
    /// </summary>
    /// <typeparam name="T">Type of cached item</typeparam>
    /// <param name="entity">item cached</param>
    /// <param name="key">Name of item</param>
    public static void Add<T>(T entity, string key) where T : class
    {
        if (_cache == null)
        {
            _cache = MemoryCache.Default;
        }
        if (_cache.Contains(key))
            _cache.Remove(key);
        CacheItemPolicy cacheItemPolicy = new CacheItemPolicy();
        cacheItemPolicy.AbsoluteExpiration = DateTime.Now.AddMinutes(ChacheExpirationInMinutes);
        _cache.Set(key, entity, cacheItemPolicy);
    }

    /// <summary>
    /// Remove item from cache
    /// </summary>
    /// <param name="key">Name of cached item</param>
    public static void Clear(string key)
    {
        if (_cache == null)
        {
            _cache = MemoryCache.Default;
            return;
        }
        _cache.Remove(key);
    }

    /// <summary>
    /// Retrieve cached item
    /// </summary>
    /// <typeparam name="T">Type of cached item</typeparam>
    /// <param name="key">Name of cached item</param>
    /// <returns>Cached item as type</returns>
    public static T Get<T>(string key) where T : class
    {
        if (_cache == null)
        {
            _cache = MemoryCache.Default;
        }
        try
        {
            return (T)_cache.Get(key);
        }
        catch
        {
            return null;
        }
    }
} 
```

# javascript - dojo dijit.form.select：从数据存储中获取数据？

> ID：14892622
> 
> 赞同：0
> 
> 时间：2013-02-15T10:24:06.550
> 
> 标签：javascript, html, json, select, dojo

我正在使用 dojo 并希望从数据存储中填充 dijit.form.select 小部件（这有效）。每当我在 select-widget 中进行选择时，我的 dataStore 中的其他字段都应该被读取，然后显示在页面上的 textBoxes 中。

不幸的是，我不知道如何从我的数据存储中读取其他字段。这是我的代码：

[http://jsbin.com/xxx](http://jsbin.com/xxx)

如果您一直向下滚动，重要的事情就会发生。

这是随后被读入数据存储区的 javascript 对象：

```
 var jsonData = {"identifier":"name",
                  "label": "subject_main",
                  "items": [
    {"name":"departure",   "subject_main":"123",  "subject_1":"sub1", "subject_2":"sub2"},
    {"name":"direct",       "subject_main":"456",  "subject_1":"sub1", "subject_2":"sub2"},
    {"name":"Messaging",           "subject_main":"789",  "subject_1":"sub1", "subject_2":"sub2"},
    {"name":"exchange",      "subject_main":"1011", "subject_1":"sub1", "subject_2":"sub2"},
    {"name":"Zilo",                "subject_main":"1213", "subject_1":"sub1", "subject_2":"sub2"},
    {"name":"Stub_implementation",            "subject_main":"1415", "subject_1":"sub1", "subject_2":"sub2"},
    {"name":"Standard_implementation",  "subject_main":"1617", "subject_1":"sub1", "subject_2":"sub2"}
                        ]};
  </script> 
```

例如，当我选择“name”：“Messaging”、“subject_main”：“789”、“subject_1”：“sub1”、“subject_2”：“sub2”

消息应该显示在我的 dijit 中。

编辑：卢锡安帮了我很多！这是我对该问题的最终解决方案：

> ```
> <title>Hello Dijit!</title>
> <!-- load Dojo -->
> <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/dojo/1.8.1/dijit/themes/claro/claro.css">
> <script src="//ajax.googleapis.com/ajax/libs/dojo/1.8.1/dojo/dojo.js" 
> ```
> 
> data-dojo-config="isDebug: true, async: true, parseOnLoad: true">
> 
> Beladeauftrag 地址
> 
> 导航>
> 
> ```
> <label for="load">Laden am</label><br>
> <input type="text" value=""
> data-dojo-type="dijit/form/TextBox"
> data-dojo-props="trim:true, propercase:true" id="load" /><br>
> 
> <label for="from">von</label><br>
> <input type="text" value=""
> data-dojo-type="dijit/form/TextBox"
> data-dojo-props="trim:true, propercase:true" id="from" /><br>
> 
> <label for="till">bis</label><br>
> <input type="text" value=""
> data-dojo-type="dijit/form/TextBox"
> data-dojo-props="trim:true, propercase:true" id="till" /><br> 
>   <script>
>     // load requirements for declarative widgets in page content
> require(["dijit/form/Button", "dojo/parser", "dijit/form/TextBox", "dojo/domReady!", "dojo/data/ItemFileReadStore"]);   </script>
>  <br>   <br>
>  <h2>WF auswählen</h2>   <div id="stateSelect"></div>
>    <script> 
> 
>    require(["dijit/form/Select", "dojo/store/Memory",
>             "dojo/json", "dijit/registry" , "dojo/ready"],
>         function(Select, Memory, json, registry, ready) {
> 
>             ready(function(){
> 
>                               var jsonData = {"identifier":"name",
>               "label": "subject_main",
>               "items": [
> {"name":"Auftrag 1",   "subject_main":"123",  "subject_1":"sub1", "subject_2":"sub2"},    {"name":"Auftrag 2",   "subject_main":"456", 
> ```
> 
> "subject_1":"sub1", "subject_2":"sub2"} ]};
> 
> ```
>  var store1 = new dojo.data.ItemFileReadStore({ data: jsonData });
> 
>               // code useless - nut dijit.form.select fanishes without it (??)
> 
>                 // create Select widget, populating its options from the store
>                 var select = new Select({
>                     name: "WorflowSelect",
>                     store: store1,
>                     style: "width: 200px;",
>                     labelAttr: "name",
>                     maxHeight: -1, // tells _HasDropDown to fit menu within viewport
> 
>                     myAttr1: "this.get(name)",
>                     myAttr2: "subject_2",
> 
>                     onChange: function(value){
>                       // get references to widgets
>                       adressW=dijit.byId("adress");
>                       loadW=dijit.byId("load");
>                       fromW=dijit.byId("from");
>                       tillW=dijit.byId("till");
> 
>                       adressW.attr("value",  "subject_main from js-object");
>                       loadW.attr("value",    "subject_1 from js-object");
>                       fromW.attr("value",    "subject_2 from js-object");                          
> 
>                       tillW.attr("value", 
>                                  store1._getItemByIdentity("Auftrag 1").subject_main);
> 
>                     }
>                 }, "stateSelect");
>                 select.startup();
>             });
>     }); </script> </body> </html> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:30:29.310

你这样做很有趣！为什么要使用 span 元素来定义商店？

看看这个帖子：

[Dojo 如何从 dojo.data.ItemFileReadStore 获取 JSON 属性](https://stackoverflow.com/questions/11795779/dojo-how-to-get-json-attribute-from-dojo-data-itemfilereadstore)

**更新：**

你应该这样做：

[http://jsbin.com/osiniv/3/edit](http://jsbin.com/osiniv/3/edit)

卢西安

# c - C - 在 Ubuntu v12.10 上编译 OpenSSL 头文件的问题

> ID：14892626
> 
> 赞同：1
> 
> 时间：2013-02-15T10:24:17.573
> 
> 标签：c, ubuntu, compiler-errors, openssl

我正在尝试在 Ubuntu v12.10 32 位的 Eclipse CDT (v1.2.0.201212170456) 中编译以下 C 代码。

```
#include <openssl/bio.h>

int main(void)
{
    return 0;
} 
```

我的编译器是 arm-none-linux-gnueabi-gcc (Sourcery G++ Lite 2010q1-202) 4.4.1。我已经设置了 openssl 文件夹的路径，该文件夹位于 /usr/include 中。当我在线上按 F3 时`#include`，Eclipse CDT 会打开 bio.h 文件。当我编译代码时，我收到大约 500 个错误，如下所示：

```
expected ';' before 'int' line 301, external location: /usr/include/openssl/bio.h 
```

`int (*bwrite)(BIO *, const char *, int);`<-- bio.h 中的第 300 行

`int (*bread)(BIO *, char *, int);`<-- bio.h 中的第 301 行

或者

```
expected ';', ',' or ')' before '*' token line 234, external location: /usr/include/openssl/bio.h 
```

`void BIO_set_flags(BIO *b, int flags);`<-- bio.h 中的第 233 行

`int BIO_test_flags(const BIO *b, int flags);`<-- bio.h 中的第 234 行

我安装了 libssl 和 libssl-dev。我真的不知道可能是什么原因。请帮忙！

从 CDT 的控制台输出：

> arm-none-linux-gnueabi-gcc -I/usr/include -O0 -g3 -Wall -c -fmessage-length=0 -v -MMD -MP -MF"main.d" -MT"main.d" - o “main.o” “../main.c”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:15:35.357

回答我自己的问题。

[我能够按照SB](https://stackoverflow.com/users/263895/sb)给出的说明解决问题。在[这个 SO 线程](https://stackoverflow.com/questions/3153114/how-do-i-install-and-build-against-openssl-1-0-0-on-ubuntu)中。

由于我静态链接到 OpenSSL，我已将以下文件复制到 Eclipse CDT 中的 C 项目中。

*   libcrypto.a
*   libssl.a

# database - 如何设置ckeditor grails插件使用数据库上传文件？

> ID：14892638
> 
> 赞同：1
> 
> 时间：2013-02-15T10:24:57.070
> 
> 标签：database, grails, ckeditor

如何设置ckeditor grails使用数据库上传文件？

我只想使用数据库，因为我无法访问文件系统来在那里上传文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T19:35:40.483

CKEditor 插件添加了一个文件管理器控制器类来处理文件保存。您必须使用自己的数据库逻辑覆盖此控制器，并将 UrlMapping 添加到您的控制器。

# performance - 服务器达到 MaxClients 设置，请考虑提高 MaxClients 设置。装甲运兵车

> ID：14892651
> 
> 赞同：4
> 
> 时间：2013-02-15T10:25:41.533
> 
> 标签：performance, apache, apc

我在具有以下配置的服务器内运行了 Drupal 安装：

```
StartServers       5
MinSpareServers    5
MaxSpareServers    15
MaxClients        50
MaxRequestsPerChild  1000 
```

我已经安装了 APC 和 MemCached。APC 的工作方式如下图所示：

![在此处输入图像描述](../Images/7aae968899bb82b8467fac15ebc8d6a6.png)

但我在 Apache 日志中收到此错误：

```
[Fri Feb 15 14:04:48 2013] [error] server reached MaxClients setting, consider raising the MaxClients setting 
```

出现错误时的并发用户数小于 50 且 ps -aux | grep apache 显示所有 apache 进程都处于 S 状态。

会发生什么？可能是 APC 内存不足？我花了 3 个小时来搜索这个问题，但任何解决方案都对我有用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:52:53.983

嗯，Apache HTTPd 报告说，在可能持续不到一秒的给定时间，并发连接数超过 MaxClients。我不知道您如何计算并发“用户”，但单个浏览器可以打开多个与同一服务器的连接（例如，以并行方式检索图像或 CSS）。

# android - 注册到 GCM 推送通知后如何重新加载 Android Webview

> ID：14892657
> 
> 赞同：3
> 
> 时间：2013-02-15T10:26:09.927
> 
> 标签：android, webview, google-cloud-messaging

我有一个移动优化的网络应用程序，并想制作一个 Android 应用程序（一个简单的 WebView，它加载网络应用程序），以便发送 GCM 推送通知。

我的代码（没有不重要的行）。

```
public class MainActivity extends Activity {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Webview 
        WebView webView = (WebView) findViewById(R.id.webView);
        webView.loadUrl("http://" + HOST + "?type=android&registrationId=" + REGISTRATIONID);       

        // GCM Registration                   
        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, "SENDERID");
          Log.i("TAG", "Registered! ");
        } else {
          Log.i("TAG", "Already registered");
        }
    }
} 
```

比我实现（复制粘贴） GCMIntentService 类

```
public class GCMIntentService extends GCMBaseIntentService {

    public GCMIntentService() {
        super("SENDERID");
    }

    protected void onRegistered( Context arg0, String registrationId ) {
        Log.i( "TAG", "Registration id is: " + registrationId );
    }    

    protected void onError( Context arg0, String errorId ) {}
    protected void onMessage( Context arg0, Intent intent ) {}
    protected void onUnregistered( Context arg0, String registrationId ) {} 
} 
```

到目前为止它工作正常。WebView加载正确的内容，调用onRegistered方法，将registrationId显示给LogCat。

不幸的是，我不知道如何从这里开始。我最终需要的是我们的 UserId（在 Native App 中不可用）和 registrationId 之间的关联。

对我来说，最好的解决方案是**在每次 onRegistered 调用后重新加载 WebView**，并将 registrationId 作为参数添加到 URL。但是由于我在此方法中没有对 MainActivity 的引用，所以我不知道如何重新加载 WebView。我需要用 BroadcastManager 做这些事情还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:36:06.010

您可以分两步完成此操作，而无需重新加载 web 视图：

1.  在 webview 活动中，您应该有一个名为的成员变量`mWebView`，它被分配给`onCreate`.

2.  在 webview 活动中，动态注册一个基于类的 BroadcastReceiver，该类是您的 webview 活动的内部类。内部类将允许您访问`mWebView`上面#1 中定义的成员变量。

3.  在服务中，用于`sendBroadcast`发送`registrationId`到 WebView 活动中的 BroadcastReceiver。

4.  从 webview 活动中的 BroadcastReceiver，您可以将信息发送到 webview 而无需使用重新加载页面`mWebView.loadUrl("javascript:myJavascriptRegistrationReceiver('<registrationId>')");`

下面的链接解释`sendBroadcast()`并`BroadcastReceiver`在应用程序组件之间传输信息： [http ://www.cs.umd.edu/class/fall2011/cmsc436/CMSC436/Lectures_Labs_files/BroadcastReceivers.pdf](http://www.cs.umd.edu/class/fall2011/cmsc436/CMSC436/Lectures_Labs_files/BroadcastReceivers.pdf)

如果您喜欢冒险和/或想要最新的“热度”，那么您可以使用像 Square 的 Otto [1] 或 GreenRobot 的 EventBus [2] 这样的事件总线在您的服务和活动之间传递消息。这些是广播接收器的替代品，通常会减少样板代码的数量。

[1] [https://github.com/square/otto](https://github.com/square/otto)

[2] [https://github.com/greenrobot/EventBus](https://github.com/greenrobot/EventBus)

# view - Ember.js 视图在过渡时消失

> ID：14892658
> 
> 赞同：1
> 
> 时间：2013-02-15T10:26:10.157
> 
> 标签：view, ember.js, transition, routes

不知何故，即使在最简单的示例中，当我尝试转换到另一个状态/路线时，我想出的视图也会消失。

我的索引路线如下所示：

```
--Application-------------------------------
| --Header-------------------------------- |
| | --ViewA----------------------------- | |
| | | View A!                          | | |
| | |__________________________________| | |
| |                                      | |
| | --ViewB----------------------------- | |
| | | View B!                          | | |
| | |__________________________________| | |
| |______________________________________| |
|                                          |
| --Main---------------------------------- |
| | I stay here, no matter what!         | |
| |______________________________________| |
|__________________________________________| 
```

一旦我进入“下一个”状态，ViewB 就会消失，看起来像这样：

```
--Application-------------------------------
| --Header-------------------------------- |
| | --ViewA----------------------------- | |
| | | View A!                          | | |
| | |__________________________________| | |
| |______________________________________| |
|                                          |
| --Main---------------------------------- |
| | I stay here, no matter what!         | |
| |______________________________________| |
|__________________________________________| 
```

可以在此示例应用程序[http://jsfiddle.net/SAra5/4/中看到该行为](http://jsfiddle.net/SAra5/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:11:36.633

如果您没有指定它在新路线上做任何事情，它看起来会感到困惑并且不会呈现所有出口。使事情正常工作的方法是在`NextRoute`.

```
App.NextRoute = Ember.Route.extend({
        renderTemplate: function () {
        this.render('header', {'outlet':'header', 'into':'application'});
        this.render('main', {'outlet':'main', 'into':'application'});

        this.render('viewB', {'outlet':'viewB', 'into':'header'});
        this.render('viewA', {'outlet':'viewA', 'into':'header'});
    }
}); 
```

如果在对 进行更改之前在 index 路由中交换`this.render('viewB', {'outlet':'viewB', 'into':'header'});`with ，您会看到它现在只呈现 viewB！很奇怪吧？尽管在当前时间点，我不确定它是错误还是功能。`this.render('viewA', {'outlet':'viewA', 'into':'header'});``NextRoute`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:26:35.180

我不确定您的预期行为，但最好将您抽象出来，`IndexRoute`因为您在每条路线中都需要相同，否则它将被删除：http: [//jsfiddle.net/SAra5/5/](http://jsfiddle.net/SAra5/5/)

但是，您的示例似乎令人费解。我认为您的解决方案在于`{{render}}`. 请在此处查看我的帖子：[emberjs 车把模板中的不同渲染技术](https://stackoverflow.com/questions/14802223/different-rendering-techniques-in-emberjs-handlebars-template/14802424#14802424)

# xml - 如何通过 JDeveloper Mapper 使用所有可用的 XSLT 函数？

> ID：14892659
> 
> 赞同：0
> 
> 时间：2013-02-15T10:26:13.193
> 
> 标签：xml, xslt, jdeveloper

JDeveloper Mapper for XML Transformations (XSLT) 是使用图形界面和自动映射创建 XML 转换的强大工具。不幸的是，它支持的功能范围有限，并且无法实现更复杂的映射。

是否可以将 JDeveloper 与可用 XSLT 功能的全部范围一起使用？还是我必须在使用 JDeveloper Mapper 还是访问所有 XSLT 函数之间做出选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:26:13.193

您始终可以通过使用源视图并直接修改代码来获得全部功能。但是，当您返回到设计视图时，JDeveloper 会告诉您代码中存在*错误*，在您修复它们之前您无法使用设计视图。

因此，一个可能的解决方案是在图形视图中进行所有可能的映射，然后移动到源视图并在那里实现更复杂的映射和 XSLT 函数。如果这样做，您将无法返回图形视图。

我发现一个非常适合我的解决方案如下：我引入了如下新*标签*：

```
<!-- show-code --> <!--
--> <!-- /show-code --> 
```

和

```
<!-- hide-code -->
<!-- /hide-code --> 
```

在前两个标签之间，您放置了作为最终解决方案的代码块的解决方案，使用了您想要的所有复杂的 XSLT 2.0 / XSLT 3.0 函数。在此之前或之后，您将第二对标记放在一个简单的解决方案之间，该解决方案*以某种方式执行相同*的操作，但以更简单的方式并且 JDeveloper 仍然可以理解它。

由于*真正的*解决方案在注释中，JDeveloper 将能够切换到设计视图，您仍然可以在那里修改映射的其他部分。

**执行转换**

现在要执行*真正的*转换，您需要使用替换函数对 XSLT 代码进行预处理。就我而言，这是以下 Java 代码：

```
private static String applyCodeReplacement(String xml) {
    // Replacing string using regular expressions
    xml = xml.replaceAll(       "<!--\\s*show-code\\s*-->\\s*<!--","");
    xml = xml.replaceAll("-->\\s*<!--\\s*/show-code\\s*-->","");
    xml = xml.replaceAll("<!--\\s*hide-code\\s*-->", "<!--");
    xml = xml.replaceAll("<!--\\s*/hide-code\\s*-->", "-->");

    return xml;
} 
```

这将删除所有*简单*的代码块并集成所有*复杂*的代码块。现在，您得到了一个 XSLT 文件，该文件完全按照您的要求执行。而且您仍然可以在 JDeveloper 的设计视图中打开和修改它。

# python - 无法安装 pythonbrew 2.6

> ID：14892662
> 
> 赞同：3
> 
> 时间：2013-02-15T10:26:23.890
> 
> 标签：python, linux, pythonbrew

我正在尝试使用 pythonbrew 安装 python 2.6，但在运行命令时收到一些错误

```
pythonbrew install --configure="--enable-unicode=ucs4" 2.6 
```

我在 Archlinux 下运行并在那台机器上使用了很长时间的 python2.7。但我需要在我的机器上同时安装 2.6 和 2.7，所以 pythonbrew 安装似乎没问题。

这是错误：

```
Parser/pgen ./Grammar/Grammar ./Include/graminit.h ./Python/graminit.c
Parser/pgen ./Grammar/Grammar ./Include/graminit.h ./Python/graminit.c
gcc -pthread -c -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes  -I. -IInclude I./Include  -fPIC -DPy_BUILD_CORE -o Python/symtable.o Python/symtable.c
gcc -pthread -c -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes  -I. -IInclude -I./Include  -fPIC -DPy_BUILD_CORE -o Python/compile.o Python/compile.c
gcc -pthread -c -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes  -I. -IInclude -I./Include  -fPIC -DPy_BUILD_CORE -o Python/graminit.o Python/graminit.c
gcc -pthread -c -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes  -I. -IInclude -I./Include  -fPIC -DPy_BUILD_CORE -DSVNVERSION=\"`LC_ALL=C svnversion .`\" -o Modules/getbuildinfo.o ./Modules/getbuildinfo.c
gcc: error: directory": No such file or directory
make: *** [Modules/getbuildinfo.o] Error 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T12:08:54.613

[在这里](https://github.com/yyuu/pyenv/issues/14)找到了解决方案。基本上，`svnversion`在某些时候改变的行为和解决方法是`svnversion`在构建 python 2.6.2 时在路径中放置一个名为的脚本

```
#!/bin/sh
echo exported 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:55:54.230

虽然我不知道是什么导致了这个错误，但可以通过使用 Python 2.6.8 来解决这个问题：

```
pythonbrew install --configure="--enable-unicode=ucs4" 2.6.8 
```

# javascript - IE8 使我的 xml 损坏

> ID：14892667
> 
> 赞同：1
> 
> 时间：2013-02-15T10:26:43.407
> 
> 标签：javascript, jquery, xml, internet-explorer, blueimp

我正在使用 blueimp fileupload 将多个文件上传到我的服务器。在“完成”回调中，我捕获了我的 xml 结果，但在 IE8 中都搞砸了。这是结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<item type="Struct">
 <item name="data" type="Struct">
  -
  <item name="files" type="Array">
     <item type="Struct">
        <item name="uid">1ixXDSUJiKhwEEUV4NJFoJyxp</item>
        <item name="reference">files[]</item>
     </item>
  </item>
  </item>
   <item name="message" />
  <item name="errorcode">0</item>
 </item> 
```

如您所见，它在xml节点之间添加了“-”符号，并且在chrome或firefox中没有。有谁可以告诉我为什么会这样？这是 IE 的已知问题吗？

# jquery - jquery appendo 插件

> ID：14892672
> 
> 赞同：0
> 
> 时间：2013-02-15T10:27:00.447
> 
> 标签：jquery, plugins

我在使用 jquery appendo 插件时遇到问题，我已经克隆了这些字段，但我想根据我从下拉列表中选择的内容填充一个文本字段，我有一个产品下拉列表，当我选择一个时，下一个文本字段必须填写相应的费率。我能够在更改从服务器端带来数据的下拉列表时激活 ajax 事件，但我无法填充相邻的文本字段。这是我的代码。

```
 <script type="text/javascript" lang="javascript" src="jquery-1.8.2.min.js" ></script>
<script type="text/javascript" lang="javascript" src="jquery.appendo.js" ></script> 
<script type="text/javascript" lang="javascript">
    $(document).ready(function(){

        $('.product').change(function(){
            //ajax call and receiving the data but after getting the data from server how to populate the rate text field
        });
        var id = 0;
        var append = $('#objid').appendo({
        allowDelete: true,
        copyHandlers: true      
    });

});
</script> 
```

这是我的 html 部分。

```
<body>
    <form action="#" method="post">
    <table id="objid">
        <thead>
            <tr>
                <th>Client:</th>
                <th>Product:</th>
                <th>Rate:</th>
            </tr>
        </thead>
        <tr><td><input type="text" name="name[]"></td>
        <td>
            <select class="product" name="product[]">
                <option value="">---Select---</option>
                <option value="web_designing">Web Designing</option>
                <option value="hosting">Hosting</option>
                <option value="domain">Domain</option>
            </select>
        </td>
        <td><input type="text" name="rate[]" id="rate[]"/></td>
        </tr>

    </table>
    <br>
    <input type="submit" value="Submit" name="submit">
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:00:01.390

在代码部分：

> ```
>  $('.product').change(function(){
>         //ajax call and receiving the data but after getting the data from server how to populate the rate text field
>     }); 
> ```

您可以使用以下代码向文本字段添加值：

> ```
>  $('.product').change(function(){
>         //ajax call and receiving the data but after getting the data from server how to populate the rate text field
>         var value = ajax_received_value;
>         var $this = $(this);
>         $this.parent().next().children().val(value);
>     }); 
> ```

# jsf-2 - 具有复杂对象的 selectOneMenu，是否需要转换器？

> ID：14892680
> 
> 赞同：2
> 
> 时间：2013-02-15T10:27:23.407
> 
> 标签：jsf-2, converter, selectonemenu

转换器是否需要一个`<h:selectOneMenu>`或`<p:selectOneMenu>`任意用户创建的类作为其值？我的意思是，以下代码是否应该在没有转换器的情况下工作？

```
<p:selectOneMenu value="#{bean.language}">
    <f:selectItems value="#{bean.allLanguages}" />
</p:selectOneMenu> 
```

和

```
@Named(value = "bean")
@ConversationScoped
public class Bean {

    private Language language; // appropriate getter and setter are present

    public List<SelectItem> getAllLanguages() {
        // populates a list of select items with Strings as item labels and Languages as item values
    }

} 
```

我有一个与`enum`类型（语言）类似的代码，它工作得很好。但是当我用普通的 java 类替换类型时，我得到一个转换错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:55:51.023

您需要一个转换器，因为 JSF 默认假定字符串，这就是您编码它的方式。JSF 不知道如何将您的伪实体转换为字符串，反之亦然。

一些注意事项：

1\. 您的`getAsString`方法定义了实体/POJO 的标识符，而不是 JSF（或其他）选择作为 itemLabel 获得的标识符。

2\. 您的转换器可以使用这篇臭名昭著的文章挖掘数据库中的真实实体：

[http://balusc.blogspot.de/2011/09/communication-in-jsf-20.html#ConvertingAndValidatingGETRequestParameters](http://balusc.blogspot.de/2011/09/communication-in-jsf-20.html#ConvertingAndValidatingGETRequestParameters)

您还可以将 CDI 注释与该“模式”一起使用。

3\. 你`value = "bean"`是多余的，选择的 CDI 范围通常是`@ViewScoped`. 但是，您必须记住，如果不使用 Seam 3 或 Apache MyFaces CODI ，CDI `@Named`+ JSF就无法协同工作。`@ViewScoped`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T00:38:24.357

如果您使用我编写的这个小类，则不需要转换器 :-) 它可以支持 selectOne 和 selecteMany 组件。它要求您的类的 toString() 提供对象的一对一唯一表示。如果您愿意，您可以替换 toString() 以外的方法名称，例如 toIDString()

要在 ManagedBean 中使用 ListBacker，请使用`ListBacker<Type>`您会使用的任何位置`List<Type>`

```
@ManagedBean
@RequestScoped
public class BackingBean {
    private ListBacker<User> users; // +getter +setter

    @PostConstruct
    public void init() {
        // fill it up from your DAO
        users = new ListBacker<User>(userDAO.find());
    }
    // Here's the payoff!  When you want to use the selected object, 
    // it is just available to you, with no extra database hits:
    User thisOneIsSelected = users.getSelectedItemAsObject();

    // or for multi-select components:
    List<User> theseAreSelected = users.getSelectedItemsAsObjects();
} 
```

在您的 xhtml 文件中：

```
<p:selectOneMenu value="#{backingBean.users.selectedItem}">
    <f:selectItems value="#{backingBean.users.contents}" var="item" itemValue="#{item.value}" itemLabel="#{item.label}" />
</p:selectOneMenu> 
```

ListBacker 类：

```
public class ListBacker<T extends AbstractEntityBase> {
    // Contains the String representation of an Entity's ID (a.k.a.
    // primary key) and the associated Entity object
    Map<String, T> contents = new LinkedHashMap<String, T>(); // LinkedHashMap defaults to insertion-order iteration.

    // These hold values (IDs), not labels (descriptions).
    String selectedItem; // for SelectOne list
    List<String> selectedItems; // for SelectMany list

    public class ListItem {
        private String value;
        private String label;

        public ListItem(String value, String label) {
            this.value = value;
            this.label = label;
        }

        public String getValue() {
            return value;
        }

        public String getLabel() {
            return label;
        }
    }

    public ListBacker() {}

    public ListBacker(List<T> lst) {
        put(lst);
    }

    public void clear() {
        contents.clear();
        selectedItem = null;
        if(selectedItems != null) {
            selectedItems.clear();
        }
    }

    public List<ListItem> getContents() {
        return convert(contents);
    }

    public String getSelectedItem() {
        return selectedItem;
    }

    public void setSelectedItem(String selectedItem) {
        this.selectedItem = selectedItem;
    }

    public List<String> getSelectedItems() {
        return selectedItems;
    }

    public void setSelectedItems(List<String> selectedItems) {
        this.selectedItems = selectedItems;
    }

    public T getSelectedItemAsObject() {
        return convert(selectedItem);
    }

    public List<T> getSelectedItemsAsObjects() {
        return convert(selectedItems);
    }

    public void put(T newItem) {
        contents.put(newItem.toString(), newItem);
    }

    public void put(List<T> newItems) {
        for (T t : newItems) {
            put(t);
        }
    }

    // PROTECTED (UTILITY) METHODS

    protected List<ListItem> convert(Map<String, T> maps) {
        List<ListItem> lst = new ArrayList<ListItem>();
        for (Entry<String, T> e : maps.entrySet()) {
            lst.add(new ListItem(e.getKey(), e.getValue().desc()));
        }
        return lst;
    }

    protected List<T> convert(List<String> ids) {
        List<T> lst = new ArrayList<T>();
        for (String id : ids) {
            lst.add(convert(id));
        }
        return lst;
    }

    protected T convert(String id) {
        return contents.get(id);
    }

} 
```

我有两个 toString() 实现，一个用于 JPA 实体：

```
public abstract class AbstractEntityBase {
    @Override
    public final String toString() {
        return String.format("%s[id=%s]", getClass().getSimpleName(), getIdForToString().toString());
    }
    /**
    * Return the entity's ID, whether it is a field or an embedded ID class..
    * @return ID Object
    */
    protected abstract Object getIdForToString();
} 
```

一个用于 JPA EmbeddedId：

```
public abstract class CompositeKeyBase {
    @Override
    public final String toString() {
        return String.format("%s[id=%s]", getClass().getSimpleName(), getIdForToString());
    }

    /**
     * Supports the class's toString() method, which is required for ListBacker.
     * Compile a string of all ID fields, with this format:
     * fieldName=StringVALUE,field2=STRINGvAlUE2,...,fieldx=stringvalue <br />
     * Recommended: start with Eclipse's "generate toString()" utility and move it to getIdForToString()
     * @return a 1-to-1 String representation of the composite key
     */
    public abstract String getIdForToString();
} 
```

getIdForToString() 的示例实现，用于具有一个 Id 字段的实体：

```
@Override
public Object getIdForToString() {
    return userID;
} 
```

getIdForToString() 的示例实现，用于具有两个字段的 EmbeddedId：

```
@Override
public String getIdForToString() {
    return "userID=" + userID + ",roleID=" + roleID;
} 
```

# jquery - 如何在标签之间获取html结构

> ID：14892681
> 
> 赞同：0
> 
> 时间：2013-02-15T10:27:23.867
> 
> 标签：jquery

网站有这种结构

```
<div class="main">
hello world<br />
againg hello world<br />
   <h3>some text</h3>
   <ul>
    <li>again text</li>
      <li>again text</li>
   </ul>
</div> 
```

现在，我想在类 main 和 h3 之间获取带有所有 br 标记或具有相同 html 结构的文本。我曾经使用 .prevUntil() 但无能为力

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:31:41.420

你可以尝试这样的事情：

```
var html = $('#main').clone().find('>*').remove().html(); 
```

这将创建您的#main div 的克隆并删除所有子元素，只留下文本。

尽管最好将该文本包装在另一个元素中，例如`p`.

# java - Jsp页面不需要显示

> ID：14892684
> 
> 赞同：2
> 
> 时间：2013-02-15T10:27:28.093
> 
> 标签：java, jsp, ptc-windchill

我有一个 jsp 页面，我从中调用一个 Java 类。该类包含用于生成 pdf 的代码。

现在，当我单击按钮时，还会显示一个空的 jsp 以及 pdf。我希望当我单击按钮时该 jsp 页面不会打开。只应显示该 pdf。

这是我的 jsp 页面。我正在调用使用 Windchill API 的类

```
<%@page import="wt.part.WTPart"%>
<%@page import="wt.fc.WTObject"%>
<%@page import="ext.gt.checkOut.New"%>
<%
    String part2="GT024";
    ext.gt.checkOut.New.pdf1(part2);
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:00:03.177

从 Windchill 问答网站[http://ezcollab.com/questions/93/how-to-stream-file-in-jsp获得](http://ezcollab.com/questions/93/how-to-stream-file-in-jsp)

```
response.setContentType("application/octet-stream");
response.setHeader("Content-Disposition","attachment;filename=\"" + fileName + "\"");       
BufferedOutputStream bufferedoutputstream = new BufferedOutputStream(response.getOutputStream()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:49:11.337

尝试添加
`<%`
`response.setContentType("application/pdf");`
`response.setHeader("Content-disposition", "attachment; filename=yourfilename.pdf");`
`%>`

# javascript - 在 OpenLayers 中禁用交互

> ID：14892685
> 
> 赞同：0
> 
> 时间：2013-02-15T10:27:41.483
> 
> 标签：javascript, openlayers

我对 OpenLayers 地图有一个愚蠢的问题，我想在一个站点上显示非交互式图片，所有点击等都被禁用。我已经尝试捕获元素上的点击，但 OpenLayers 似乎仍然能够获取这些使地图具有交互性的事件。应该有一个简单的解决方案，但我无法弄清楚。

将控件属性设置为空数组对交互没有任何影响。

编辑：我们无法在已经存在的地图上轻松地做到这一点，所以我们所做的是在这个新页面中重新使用旧的地图启动代码，并添加了可以在创建和启动时删除所有控件的参数的地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:41:34.787

*将控件属性设置为空数组对交互没有任何影响。*

奇怪，这应该可以解决问题：

```
map = new OpenLayers.Map('map', {controls: []}); 
```

# java - 使用 MS Access DB 开发 Swing 应用程序工具

> ID：14892687
> 
> 赞同：0
> 
> 时间：2013-02-15T10:27:49.420
> 
> 标签：java, swing, jakarta-ee, ms-word, swingworker

我正计划开发一个摇摆应用工具，即。个人使用的费用计算器或软件。是否可以创建这样的应用程序，以便我将与 MS Access 数据库交谈以存储数据，一旦开发完成，我会将其捆绑到 jar 或 exe 文件中。因此，当将 jar 或 exe 文件复制到其他笔记本电脑或系统时，我不想在要放置文件的每个系统中将 DSN 名称或连接设置配置为 MS Access。而不是单击 exe 或 jar 文件，连接将自动设置我的意思是 exe 或 jar 应该在我要运行它的每个系统上独立（在 Java 中是否可行）

# c# - 图像按钮 onclick 事件未触发

> ID：14892688
> 
> 赞同：2
> 
> 时间：2013-02-15T10:27:52.637
> 
> 标签：c#, asp.net, c#-4.0

我在带有`onclick`事件处理程序的 Web 应用程序中创建了一个 HTML 图像按钮。但事件没有触发。我正在使用下面的代码来创建一个按钮及其`onclick`事件处理程序。

```
<input type="image" runat="server" src="Plan_search/images/buy.png" onclick="goto_click" />
 protected void goto_click(object sender, EventArgs e)
 {
            try
            {

            }
            catch(Exception e1)
            {
                throw;
            }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:34:35.607

我怀疑您想使用 OnServerClick 属性，而不是 OnClick。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T10:38:51.847

这是工作代码。使用这个..

```
<input type="image" runat="server" src="Plan_search/images/buy.png"  onserverclick="goto_click" />

protected void goto_click(object sender, EventArgs e)
{
        try
        {

        }
        catch(Exception e1)
        {
            throw;
        }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:37:07.953

正如@samjudson 建议的那样。
它应该是

```
 <input id="Image1" type="image" runat="server" onserverclick="goto_click" /> 
```

但我认为它应该使用`ImageButton`而不是`image`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T10:34:02.407

`input`你不应该像元素一样创建你的按钮。创建您的按钮，如`ASP.NET`控件：

```
<asp:ImageButton id="imagebutton1" runat="server"          
           ImageUrl="Plan_search/images/buy.png"
           OnClick="goto_click"/> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-15T10:29:04.510

你需要括号：

```
goto_click() 
```

可能还有一些争论。

# antlr3 - 回归：Antlr C 目标跟随集生成对未声明标识符的引用

> ID：14892689
> 
> 赞同：2
> 
> 时间：2013-02-15T10:27:52.473
> 
> 标签：antlr3

ANTLRWorks 1.5rc1 成功地为该语法生成​​了 C 目标代码，没有警告或错误，但 C 目标代码无法编译。

ANTLRWorks 1.5 生成了相同的错误 C 目标代码，但控制台列出了许多模板错误。

ANTLRWorks 1.4.3 生成了有效的 C 目标代码，编译时没有错误。

```
error C2065: 'FOLLOW_set_in_sqlCOMP_OP2185' : undeclared identifier 
```

规则`sqlCOMP_OP`从多个布尔表达式规则中引用

生成对未定义标识符的引用的所有规则都具有以下形式：

```
fule: (Tokena | Tokenb | Tokenc)? Tokend; 
```

或者多次引用以下形式的通用规则：

```
fule: (Tokena | Tokenb | Tokenc); 
```

在第一种情况下，我能够将规则转换为逻辑上等价的形式，它不会生成对未定义标识符的引用：

```
fule: (Tokena Tokend | Tokenb Tokend | Tokenc Tokend | Tokend); 
```

在第二种情况下，不可能进行任何转换。相反，唯一的解决方法是将失败规则的主体反向替换到每个引用中。

```
sqlCONDITION    :  
    sqlLOGICAL_EXPRESSION
    ;

sqlLOGICAL_EXPRESSION    :  
    sqlLOGICAL_TERM (STOK_OP_OR sqlLOGICAL_TERM)*
    ;

sqlLOGICAL_TERM        :
    sqlLOGICAL_FACTOR (STOK_OP_AND sqlLOGICAL_FACTOR)*
    ;

sqlLOGICAL_FACTOR        :
    (STOK_NOT) => STOK_NOT
    (    sqlUNTYPED_BOOLEAN_PRIMARY
    |    sqlNUMERIC_BOOLEAN_PRIMARY
    |    sqlSTRING_BOOLEAN_PRIMARY
    |    sqlCLOB_BOOLEAN_PRIMARY
    |    sqlDATE_BOOLEAN_PRIMARY
    |    sqlDATETIME_BOOLEAN_PRIMARY
    |    STOK_OPEN_PAREN    
        sqlCONDITION    
        STOK_CLOSE_PAREN
    )
    ;

sqlUNTYPED_BOOLEAN_PRIMARY    :
    (    STOK_EXISTS             sqlSUB_QUERY
    |    STOK_NOT STOK_EXISTS     sqlSUB_QUERY
    |    sqlIS_OR_ISNOT_CLAUSE    
        STOK_IN STOK_ROWSET     STOK_IDENTIFIER
    )
    ;

sqlCOMP_OP    :
    (    STOK_OP_EQ
    |    STOK_OP_NE
    |    STOK_OP_GE
    |    STOK_OP_GT
    |    STOK_OP_LE
    |    STOK_OP_LT
    )
    ;

sqlIS_OR_ISNOT_CLAUSE        :
    (    STOK_IS            STOK_NOT?
    |    STOK_NOT
    )
    ;

sqlNUMERIC_BOOLEAN_PRIMARY    :
    (    sqlNUMERIC_EXPRESSION        
        (    sqlCOMP_OP        
            sqlNUMERIC_EXPRESSION

        |    sqlNUMERIC_BOOLEAN_PREDICATE
        )

    |    sqlNUMERIC_COLUMN_LIST 
        sqlNUMERIC_BOOLEAN_PREDICATE
    )
    ;

sqlNUMERIC_BOOLEAN_PREDICATE:
    (    sqlIS_OR_ISNOT_CLAUSE?
        (    STOK_IN            sqlNUMERIC_SET
        |    STOK_BETWEEN    sqlNUMERIC_EXPRESSION STOK_OP_AND sqlNUMERIC_EXPRESSION
        )
    |    sqlIS_OR_ISNOT_CLAUSE
        STOK_SQL_NULL
    )
    ;    

sqlSTRING_BOOLEAN_PRIMARY    :
    (    sqlSTRING_EXPRESSION
        (    sqlCOMP_OP        
            sqlSTRING_EXPRESSION

        |    sqlSTRING_BOOLEAN_PREDICATE
        )

    |    sqlSTRING_COLUMN_LIST
        sqlSTRING_BOOLEAN_PREDICATE
    )    
    ;

sqlSTRING_BOOLEAN_PREDICATE    :
    (    sqlIS_OR_ISNOT_CLAUSE?
        (    STOK_IN            sqlSTRING_SET
        |    STOK_LIKE        sqlSTRING
        |    STOK_BETWEEN    sqlSTRING_EXPRESSION STOK_OP_AND sqlSTRING_EXPRESSION
        )
    |    sqlIS_OR_ISNOT_CLAUSE
        STOK_SQL_NULL
    )
    ;

sqlCLOB_BOOLEAN_PRIMARY    :
    (    STOK_NOT?
        STOK_CONTAINS
        STOK_OPEN_PAREN
        sqlCLOB_COLUMN_VALUE
        STOK_COMMA
        sqlSTRING
        STOK_CLOSE_PAREN

    |    sqlCLOB_COLUMN_VALUE
        sqlIS_OR_ISNOT_CLAUSE
        STOK_SQL_NULL
    )    
    ;

sqlDATE_BOOLEAN_PRIMARY    :
    (    sqlDATE_EXPRESSION        
        (    sqlCOMP_OP        
            sqlDATE_EXPRESSION

        |    sqlDATE_BOOLEAN_PREDICATE
        )

    |    sqlDATE_COLUMN_LIST
        sqlDATE_BOOLEAN_PREDICATE
    )    
    ;

sqlDATE_BOOLEAN_PREDICATE    :
    (    sqlIS_OR_ISNOT_CLAUSE?
        (    STOK_IN            sqlDATE_SET
        |    STOK_BETWEEN    sqlDATE_EXPRESSION STOK_OP_AND sqlDATE_EXPRESSION
        )
    |    sqlIS_OR_ISNOT_CLAUSE
        STOK_SQL_NULL
    )
    ;

sqlDATETIME_BOOLEAN_PRIMARY    :
    (    sqlDATETIME_EXPRESSION        
        (    sqlCOMP_OP        
            sqlDATETIME_EXPRESSION

        |    sqlDATETIME_BOOLEAN_PREDICATE
        )

    |    sqlDATETIME_COLUMN_LIST
        sqlDATETIME_BOOLEAN_PREDICATE
    )    
    ;

sqlDATETIME_BOOLEAN_PREDICATE    :
    (    sqlIS_OR_ISNOT_CLAUSE?
        (    STOK_IN            sqlDATETIME_SET
        |    STOK_BETWEEN    sqlDATETIME_EXPRESSION STOK_OP_AND sqlDATETIME_EXPRESSION
        )
    |    sqlIS_OR_ISNOT_CLAUSE
        STOK_SQL_NULL
    )
    ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T12:17:32.647

我对这种类型的规则有同样的问题：

```
prio14Operator: '=' | '+=' | '-=' | '*=' | '/=' | '%=' | '<<=' | '>>=' | '&=' | '|=' | '^=' | 'is';
prio14Expression: prio13Expression (prio14Operator prio13Expression)*; 
```

将规则重写为这种格式解决了这个问题：

```
prio14Expression: prio13Expression (('=' | '+=' | '-=' | '*=' | '/=' | '%=' | '<<=' | '>>=' | '&=' | '|=' | '^=' | 'is') prio13Expression)*; 
```

# sql-server - XML作为存储过程中的参数（sql server）

> ID：14892692
> 
> 赞同：6
> 
> 时间：2013-02-15T10:28:14.860
> 
> 标签：sql-server, xml, stored-procedures

我有一个带有 XML 参数的存储过程。

我的问题是关于 XML 的格式。

该解决方案的工作原理：

```
<ROOT><ids><id>2013-01-01</id></ids><ids><id>2013-01-02</id></ids></ROOT> 
```

```
SELECT * FROM OPENXML(@handle, '/ROOT/id') WITH (idDate Date) 
```

结果：`2013-01-01 .. 2013-01-02`

但是第二种解决方案不行，为什么？

```
<ROOT><id>2013-01-01</id><id>2013-01-02</id></ROOT> 
```

```
SELECT * FROM OPENXML(@handle, '/ROOT') WITH (idDate Date) 
```

结果：`Null`

XML 格式正确，不是吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-15T10:52:12.083

您声称有效的第一个查询实际上不适用于您提供的 XML。应该是这样的。

```
declare @handle int
declare @XML xml = '<ROOT><ids><id>2013-01-01</id></ids><ids><id>2013-01-02</id></ids></ROOT>'
exec sp_xml_preparedocument @handle out, @XML
select * from openxml(@handle, '/ROOT/ids', 2) with (id Date)
exec sp_xml_removedocument @handle 
```

第二个版本应该是

```
declare @handle int
declare @XML xml = '<ROOT><id>2013-01-01</id><id>2013-01-02</id></ROOT>'
exec sp_xml_preparedocument @handle out, @XML
select * from openxml(@handle, '/ROOT/id', 2) with (id Date '.')
exec sp_xml_removedocument @handle 
```

由于您使用的是 SQL Server 2008 或更高版本，因此您可以改用 XML 数据类型。

```
declare @XML xml = '<ROOT><id>2013-01-01</id><id>2013-01-02</id></ROOT>'

select T.N.value('text()[1]', 'date') as id
from @XML.nodes('ROOT/id') as T(N) 
```

# javascript - 如何在 android.. 的 WebView 中使用 Javascript LocalFileSystem 访问 SDCARD？

> ID：14892693
> 
> 赞同：3
> 
> 时间：2013-02-15T10:28:18.750
> 
> 标签：javascript, android, html, webview, sd-card

我想仅通过单击 webview 中的按钮来显示我的 Android webview 中的目录列表。

webView 启动正常，它正在监听事件，但我遇到了异常

`Uncaught ReferenceError: LocalFileSystem is not defined at file:///android_asset/FirstFile.html:11`

这是完整的代码

活动：

```
public class Home extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    WebView webview = new WebView(this);
    webview.getSettings().setJavaScriptEnabled(true);
    webview.setWebChromeClient(new WebChromeClient());

    webview.loadUrl("file:///android_asset/FirstFile.html");

    setContentView(webview);

} 
```

}

这是 FirstFile.xml

```
<!DOCTYPE html>
<html>
<body>
    <script type="text/javascript" charset="utf-8">
        function getFileSystem() {
            window.requestFileSystem = window.requestFileSystem
                    || 

            window.requestFileSystem(LocalFileSystem.PERSISTENT, 1024 * 1024,
                    onFileSystemSuccessUpload, fail);

            window.resolveLocalFileSystemURL("file:///mnt/sdcard",
                    onResolveSuccess, fail);

            document.getElementById("text1").innerHTML = "Hii its done";

        }

        function onResolveSuccess(fileEntry) {
            document.write("URI Resolved");
        }

        function fail() {
            console.log("Error getting system")
        }
function successReader(entries) {
            var i;
            for (i = 0; i < entries.length; i++) {
                alert(entries[i].name);
                if (entries[i].isDirectory == true) {
                    var directoryReaderIn = entries[i].createReader();
                    directoryReaderIn.readEntries(successReader, fail);

                }

            }
        }
    </script>

    <input type="text" id="text1">
    <button onclick="getFileSystem()">Click Me !!</button>
</body>
</html> 
```

请给我一个合适的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:12:15.113

我已经解决了我的问题。我们需要从库中导入 cordova.jar 并将 cordova.js 包含到我们的 HTML 页面中。

现在我可以轻松访问我的 SD 卡的所有目录。

# mysql - MySQL & 插入前触发器

> ID：14892705
> 
> 赞同：0
> 
> 时间：2013-02-15T10:28:52.330
> 
> 标签：mysql, triggers

我需要在我的数据库中创建一个触发器。触发器必须能够在插入之前分析事件。如果数据库中已经存在的最后一个事件具有相同的状态，则触发器必须取消插入并更新最后一个事件。

我试图创建一个，但由于 mysql 错误，我无法将其添加到我的数据库中：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 5 
```

这里是触发器：

```
CREATE TRIGGER events_before_insert
BEFORE INSERT ON monitoringV2.events
FOR EACH ROW
BEGIN
DECLARE id_last_event;
DECLARE status_last_event;

SELECT id INTO id_last_event, status INTO status_last_event FROM events WHERE module_id=NEW.module_id ORDER BY serverDate DESC LIMIT 1;

IF NEW.status = status_last_event THEN
UPDATE events SET serverDate=NOW() WHERE id=id_last_event;
signal sqlstate '00000' set message_text = "Update instead of insert";
END IF;
END; 
```

这里是信息服务器：

```
PHP 5.4.6 VC9
Apache 2.4.2 VC9
MySQL 5.5.27
PhpMyAdmin 3.5.2.2 
```

谢谢你的帮助

问候，

多琳·M。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:34:43.783

在创建这样的触发器之前，您必须更改 DELIMITER

```
DELIMITER $$
CREATE TRIGGER... 
...
END;
$$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:35:06.410

您可能不需要为此实现触发器。您描述的操作正式称为UPSERT，即更新或插入。

[这](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)就是它在 MySQL 中的完成方式，您也可以查看[REPLACE](http://dev.mysql.com/doc/refman/5.0/en/replace.html)。

[这](https://stackoverflow.com/questions/1218905/how-do-i-update-if-exists-insert-if-not-aka-upsert-or-merge-in-mysql)是另一个涉及此问题的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:40:40.570

您将需要分隔您的创建语句：

`delimiter //
CREATE...
...
END;
//
DELIMITER ;`

并且您可能需要为声明的每个变量定义一个类型，例如

`DECLARE x INT;`

# mysql - mysql字段中json的正则表达式

> ID：14892711
> 
> 赞同：0
> 
> 时间：2013-02-15T10:29:09.080
> 
> 标签：mysql, regex, json

我有一个包含 JSON 数据的调查字段，如下所示：

```
{
    "reason":
    {
        "0":"first",
        "1":"second",
        "other":["on","third"]
    },
    "comment":"fourth"
} 
```

我想在 SQL 中选择第一个、第二个、第三个和第四个值。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:36:24.867

```
var JSONObject = {"reason":{"0":"first","1":"second","other":["on","third"]},"comment":"fourth"};

document.getElementById("first").innerHTML=JSONObject.reason[0];

document.getElementById("second").innerHTML= JSONObject.reason[1];

document.getElementById("comment").innerHTML= JSONObject.comment[0]; 
```

# python - 如何使用 PySide 将 .ui 文件加载到 python 类中？

> ID：14892713
> 
> 赞同：18
> 
> 时间：2013-02-15T10:29:12.233
> 
> 标签：python, qt, user-interface, pyqt, pyside

我使用 PyQt 已经有一段时间了，在我使用它的整个过程中，都有一个非常一致的编程模式。

1.  使用 Qt Designer 创建一个 .ui 文件。
2.  创建一个与您在 .ui 文件中创建的小部件类型相同的 python 类。
3.  初始化 python 类时，使用 uic 将 .ui 文件动态加载到类中。

有没有办法在 PySide 中做类似的事情？我已经阅读了文档和示例，我能找到的最接近的东西是一个计算器示例，它将 .ui 文件预渲染为 python 代码，这是在 PyQt 中执行此操作的超级老方法（为什么将它烘焙到 python什么时候可以解析 ui？）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-15T12:14:43.277

我正在用 PySide 做到这一点。:)

你使用这个[https://gist.github.com/cpbotha/1b42a20c8f3eb9bb7cb8](https://gist.github.com/cpbotha/1b42a20c8f3eb9bb7cb8)（Sebastian Wiesner 的原创在[https://github.com/lunaryorn/snippets/blob/master/qt4/designer/pyside_dynamic.py](https://github.com/lunaryorn/snippets/blob/master/qt4/designer/pyside_dynamic.py)但已经消失了） - 它覆盖 PySide.QtUiTools.QUiLoader 并提供一个新`loadUi()`方法，以便您可以执行此操作：

```
class MyMainWindow(QMainWindow):
    def __init__(self, parent=None):
        QMainWindow.__init__(self, parent)
        loadUi('mainwindow.ui', self) 
```

当您实例化 MyMainWindow 时，它将具有您使用 Qt 设计器设计的 UI。

如果您还需要使用自定义小部件（Qt Designer 中的“Promote To”），请参阅此答案：[https ://stackoverflow.com/a/14877624/532513](https://stackoverflow.com/a/14877624/532513)

# jquery-load - jquery加载变量不会加载内容

> ID：14892714
> 
> 赞同：0
> 
> 时间：2013-02-15T10:29:12.430
> 
> 标签：jquery-load

嗨，我正在使用 jQuery 加载从链接中获取 ahref，然后我想从进入 div 的页面加载 div，所以尝试了这个：

```
// lets load the contents
$('#navigationLinks a:not(:first-child)').click(function(event){

    $('#wrapper').animate({
        'left':'0px'
    });

    var href = $('#navigationLinks a').attr('href');
    $('#content').load(href + ' #resultDiv');

    event.preventDefault();

}); 
```

这是 HTML：

```
<div id="navigationLinks">
    <a href="index.html" id="dashboardHome">Dashboard Home</a>
    <a href="industry-overview.html" title="Industry Overview" class="first currentLink">Industry Overview</a>
    <a href="regions.html" title="Regions">Regions</a>
    <a href="industries.html" title="Industries">Industries</a>
    <a href="security-pipeline.html" title="Security Pipeline">Security Pipeline</a>
    <a href="audit-events-issues.html" title="Audit Events &amp; Issues">Audit Events &amp; Issues</a>
    <a href="account-filter.html" title="Account Filter">Account Filter</a>
    <a href="contractual-delivered-services.html" title="Contractual vs. Delivered Services" class="last">Contractual vs. Delivered Services</a>
</div> 
```

我尝试在 # 之前删除“#resultDiv”中的空格，但这没有帮助，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:28:12.837

你应该试试这个

```
$(document).ready(function(){

$('#navigationLinks a:not(:first-child)').click(function(e){
   var href = e.target;
   $('#content').load(href + ' #resultDiv');
   e.preventDefault();

});
}); 
```

问题是它`var href = $('#navigationLinks a').attr('href');` 总是会得到块中的第一个链接，而不是被点击的实际链接。

# java - 似乎无法绕过 java.lang.ArrayIndexOutOfBoundsException: -1

> ID：14892716
> 
> 赞同：2
> 
> 时间：2013-02-15T10:29:21.630
> 
> 标签：java, indexoutofboundsexception

我是 Java 新手，我似乎无法绕过错误消息

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -1
    at java.util.ArrayList.elementData(ArrayList.java:371)
    at java.util.ArrayList.get(ArrayList.java:384)
    at djurfarm.Animals.huntCatMouse(Animals.java:213)
    at djurfarm.Djurfarm.main(Djurfarm.java:24)
Java Result: 1 
```

我知道这意味着什么，某处的索引低于或高于应有的值，但我终其一生都无法弄清楚为什么会发生这种情况。也许是因为我一直盯着自己看，看不到逻辑在哪里失败。任何帮助将不胜感激。这是该方法的代码：

```
public void huntCatMouse() {
    while (!CatList.isEmpty()) {
        for (int i = 0 ; i < CatList.size(); i++) {
            try {
                TimeUnit.MILLISECONDS.sleep(500);
                int slump = MouseList.size() - 1;
                int num = CatList.size() - 1;
                Cat CatRemover = CatList.get(num);
                Mouse aMouse = MouseList.get(slump);
                if (aMouse.getStrength().equals(false)) {
                    System.out.println("En katt fångar en mus.");
                    CatList.remove(CatRemover);
                    MouseList.remove(aMouse);
                } else if (aMouse.getStrength().equals(true)) {
                    System.out.println("En mus lyckas fly från en katt.");
                    CatList.remove(CatRemover);
                    MouseList.remove(aMouse);
                }
            } catch (InterruptedException e) {
                System.out.println("Fel i CatMouse");
            }
            if (MouseList.isEmpty()) {
                System.out.println("Empty list");
                break;
            } 
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:32:55.447

```
int slump = MouseList.size()-1; 
```

似乎`MouseList`是一个空列表，`size`方法返回 0 并`slump`变为 -1 和

```
 MouseList.remove(aMouse); // MouseList.remove(-1) 
```

导致`ArrayIndexOutOfBoundsException`-1 索引。

你已经设置了条件`!CatList.isEmpty()`，它可能是`!CatList.isEmpty() && !MouseList.isEmpty()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:33:51.250

错误可能是因为这个：

```
int slump = MouseList.size()-1;
int num = CatList.size()-1;
Cat CatRemover = CatList.get(num);
Mouse aMouse = MouseList.get(slump); 
```

在这里，您不检查大小`MouseList`是否`CatList`大于 0。

所以如果`MouseList.size()`返回 0，
那么`int slump = MouseList.size()-1;`= `int slump = -1;`

现在，当你这样做时，`MouseList.get(slump);`这意味着你在打电话`MouseList.get(-1);`

所以它抛出了那个异常。

所以首先检查列表的大小是否大于0（即不为空）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:44:46.240

正如其他人指出的那样，问题在于`slump`当`-1`您尝试`get(slump)`.

它进入该状态的原因是当鼠标列表变空时您并没有停止。特别是，`if (...) { break; }`结尾处的 仅从*内部*循环中跳出。因此，您尝试外部循环的条件，再次启动内部循环，然后...... OOOPs！

显而易见的解决方法是在外循环的条件下测试两个列表的大小。

但更好的解决方法是完全摆脱内部循环。只需一层循环，您就可以更简单地实现这一点。

```
 while (!CatList.isEmpty() && !MouseList.isEmpty()) {
        try {
            TimeUnit.MILLISECONDS.sleep(500);
            int slump = MouseList.size() - 1;
            int num = CatList.size() - 1;
            Cat CatRemover = CatList.get(num);
            Mouse aMouse = MouseList.get(slump);
            if (aMouse.getStrength().equals(false)) {
                System.out.println("En katt fångar en mus.");
                CatList.remove(CatRemover);
                MouseList.remove(aMouse);
            } else if (aMouse.getStrength().equals(true)) {
                System.out.println("En mus lyckas fly från en katt.");
                CatList.remove(CatRemover);
                MouseList.remove(aMouse);
            }
        } catch (InterruptedException e) {
            System.out.println("Fel i CatMouse");
        }
    } 
```

* * *

当我引起您的注意时，您需要修复局部变量的名称。根据 Java 风格指南，Java 变量名应**始终以小写字母开头……。**并尝试使缩进正确。它使您的代码**更易于阅读**。

最后，这真的很奇怪：`aMouse.getStrength().equals(true)`.

*   我会推断`getStrength()`返回一个`boolean`.
*   假设，测试它是否为真的简单方法是简单的`aMouse.getStrength()`。
*   但是“力量”在英语中不是一个是/否的概念。这是你量化的东西。
*   但是如果“strength”真的是一个布尔值，那么 JavaBeans 约定说该方法不应该被`isStrength()`调用`getStrength()`。

# python - 将一个对象和 2 个列表打包成一个可迭代的 Pythonic 方式？

> ID：14892723
> 
> 赞同：-2
> 
> 时间：2013-02-15T10:30:06.433
> 
> 标签：python

在做一个小行星游戏，我想在一个循环中检查我所有实体上的债券。

是

```
for entity in itertools.chain([ship], bullets, asteroids):
   ... 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:51:49.520

无需定义“Pythonic”，代码简洁且可读/易懂。

此外，由于您只是在没有任何复制的情况下迭代现有数据结构，因此效率应该相当不错。

# javascript - 使用 Javascript 或 HTML5 以圆形显示整个图像

> ID：14892724
> 
> 赞同：0
> 
> 时间：2013-02-15T10:30:07.963
> 
> 标签：javascript, html, html5-canvas

如何使用 Javascript 或 HTML5 以圆形显示整个图像。我尝试了下面的代码，但使用此代码，只有部分图像会被转换为圆形。如何使整个显示器呈圆形？

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      #myCanvas {
        border: 1px solid #9C9898;
      }
    </style>

    <script type="text/javascript" >

</script>
  </head>
  <body>
    <canvas id="myCanvas" width="578" height="200"></canvas>
    <div id="myCanvas"></div>
    <script>
     var ctx = document.getElementById('myCanvas').getContext("2d");
      ctx.arc(100,100, 50, 0, Math.PI*2,true); // you can use any shape
      ctx.clip();

        var img = new Image();
        img.addEventListener('load', function(e) {
        ctx.drawImage(this, 0, 0, 200, 300);
 }, true);
img.src="images/hospital_review_profile_placeholder.png";

    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:16:25.687

您可以调整图像大小和重新定位图像以适合您的圆圈，而不是使用 ctx.clip()。

这是将您的图像调整为适合圆圈的最大尺寸的代码。

然后代码将调整大小的图像正确定位在圆圈中。

这是一个小提琴 --- [http://jsfiddle.net/m1erickson/s6MzZ/](http://jsfiddle.net/m1erickson/s6MzZ/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
    $(function(){

        var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");

        var radius=50;      // circle radius
        var fullWidth=200;  // actual width of image in pixels
        var fullHeight=300; // actual height of image in pixels
        var centerX=100;    // center X coordinate of the circle
        var centerY=100;    // center Y coordinate of the Circle

        // the image must be resized to fit into the circle
        // Call CalcResizedImageDimensions() to get the resized width/height
        var size=CalcResizedImageDimensions(radius,fullWidth,fullHeight);

        var rectX=centerX-size.width/2; // the X coordinate of the resized rectangle
        var rectY=centerY-size.height/2 // the Y coordinate of the resized rectangle

        ctx.beginPath();
        ctx.arc(centerX,centerY,radius,0,Math.PI*2,true);

        // I illustrate with just a rectangle
        // you would drawImage() instead
        ctx.rect(rectX,rectY,size.width,size.height);
        ctx.stroke();

        function CalcResizedImageDimensions(r,w,h){
            var d=2*r;
            var newH=(d*h)/Math.sqrt(w*w+h*h);
            var newW=w/h*newH;
            return({width:newW,height:newH});
        }

    }); // end $(function(){});
</script>

</head>

<body>

<canvas id="canvas" width=200 height=200></canvas>

</body>
</html> 
```

# vba - 在特定列中替换的 Excel VBA 代码

> ID：14892726
> 
> 赞同：0
> 
> 时间：2013-02-15T10:30:13.580
> 
> 标签：vba, excel

我有一个 Excel 电子表格，需要在其中修改特定列。

步骤 1\. 找到列名

步骤 2\. 标记此列中的所有填充行

第 3 步。继续执行某些操作（主要是查找和替换，或者如果其他列是“this”，则将我的列修改为“that”）。

我希望指定前 2 个步骤，并留出空间来轻松修改代码以继续执行第 3 步。

我有做类似工作的 VBA 代码。它搜索特定的列名，并标记所有已填充的行。它不允许我轻松地将在 Internet 上找到的其他代码复制并粘贴到主代码中。

**查找列名并标记此列中所有记录的宏**

```
Sub FindAddressColumn()
Dim rngAddress As Range
Set rngAddress = Range("A1:ZZ1").Find("Address")
If rngAddress Is Nothing Then
    MsgBox "Address column was not found."
    Exit Sub
End If
Range(rngAddress, rngAddress.End(xlDown)).Select
End Sub 
```

在 Internet 上找到的大多数宏都有指定的列。

**我想添加到主代码中的代码示例：**

```
Sub GOOD_WORKS_Find_Replace_Commas_in_Emails()
Sheets("Data").Activate
Dim i As String
Dim k As String
i = ","
k = "."
Columns("R").Replace What:=i, Replacement:=k, LookAt:=xlPart, MatchCase:=False
Sheets("Automation").Activate
MsgBox "Removing commas in emails - Done!"
End Sub 
```

我相信我想念的是对已经标记的列行“说”的代码……。在这里，您只粘贴在互联网上找到的部分代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:01:11.437

我认为这段代码可以完成你想要的工作：

```
Sub ColumnReplace()

Dim TargetColumn As Range
Dim Header As String
Dim SearchFor As String
Dim ReplaceTo As String

Header = "ccc"
SearchFor = "111"
ReplaceTo = "99999"

Set TargetColumn = ThisWorkbook.ActiveSheet.Range("1:1").Find(Header, LookIn:=xlValues, LookAt:=xlPart, MatchCase:=False)
Set TargetColumn = Cells(1, TargetColumn.Column).EntireColumn
TargetColumn.Replace What:=SearchFor, Replacement:=ReplaceTo, LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False

End Sub 
```

根据需要采用工作簿/表格名称以及用于搜索/替换的字符串。

示例文件：[https ://www.dropbox.com/s/s7fghhlsmydjaf6/EntireColumnReplace.xlsm](https://www.dropbox.com/s/s7fghhlsmydjaf6/EntireColumnReplace.xlsm)

# asp.net - 当字段为空时隐藏gridview中的按钮

> ID：14892727
> 
> 赞同：2
> 
> 时间：2013-02-15T10:30:15.563
> 
> 标签：asp.net, button, gridview, visible, itemtemplate

我有一个网格视图，其中一些行附有图片。当我按下 Button2 时，我从 sql 记录中提取信息，关于服务器上哪个文件夹有图片。这已经有效，但我无法让按钮仅在附加了图像文件夹的行中可见。

我用谷歌搜索了很长时间，发现了类似于以下的不同解决方案，但我无法让它工作。我究竟做错了什么？

```
<asp:SqlDataSource ID="SqlDSodinRSSfeb" runat="server" 
    ConnectionString="<%$ ConnectionStrings:herning_brand_dk_dbConnectionString %>"                 
    SelectCommand="SELECT PubDateTime, Melding, Station, PhotoFolder FROM OdinRSS ">
</asp:SqlDataSource>    
<asp:GridView ID="GridView14" runat="server" DataSourceID="SqlDSodinRSSfeb" 
    AutoGenerateColumns="False" Width="500px" OnRowCommand="Button_RowCommand" >
    <Columns>
        <asp:BoundField DataField="PubDateTime" HeaderText="Tidspunkt" />
        <asp:BoundField DataField="Melding" HeaderText="Melding for udkaldet" />
        <asp:BoundField DataField="Station" HeaderText="Station" />
        <asp:TemplateField HeaderText="Foto" >
            <EditItemTemplate>
                <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("PhotoFolder") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Button ID="Button2" runat="server" Text="Foto" Visible='<%# Eval("PhotoFolder") != "Null" %>' 
                            CommandName="ButtonClick" CommandArgument='<%# Eval("PhotoFolder") %>'  />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

我的.cs

```
protected void Button_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandArgument != null)
    {
        switch (e.CommandName)
        {
            case "ButtonClick":
                {
                    int Folder = Convert.ToInt32(e.CommandArgument);
                    PhotoList(Folder);
                }
                break;
        }
    }
}

void PhotoList(int FolderNumber)
{
    var imagePaths = Directory.GetFiles(Server.MapPath("PhotoFolder\\" + FolderNumber));
    var imageNames = new string[imagePaths.Length];

    for (int i = 0; i < imagePaths.Length; i++)
    {
        imageNames[i] = imagePaths[i].Substring(imagePaths[i].LastIndexOf("\\") + 1);
    }

    var dt = new DataTable();
    dt.Columns.Add("ImageName", typeof(string));
    dt.Columns.Add("ImagePath", typeof(string));

    foreach (var imgName in imageNames)
    {
        DataRow dr = dt.NewRow();
        dr["ImageName"] = RemoveExtension(imgName);
        dr["ImagePath"] = "PhotoFolder/" + FolderNumber + "/" + imgName;
        dt.Rows.Add(dr);
    }
    DataList1.DataSource = dt;
    DataList1.DataBind();
}

string RemoveExtension(string imgName)
{
    return imgName
                .Replace(".jpg", "")
                .Replace(".png", "");
} 
```

sql 字段“PhotoFolder”是一个 nvarchar(50)。如果有记录的照片，则该字段有一个 100 及以上的数字，表示包含照片的文件夹。如果没有照片记录，该字段包含“Null”

我也试过：

```
 <asp:Button ID="Button2" runat="server" Text="Foto" Visible='<%# Eval("PhotoFolder").ToString() != "Null" %>' 
```

但是该按钮显示在所有行中，而不仅仅是“PhotoFolder”中具有字符串（数字）的那些

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-02T08:47:14.093

可以用内联代码简单实现

```
<asp:ImageButton ID="ibtnBranchType1" runat="server" ImageUrl='<%# "~/images/" + Eval("branchtype1")+".png" %>' Visible='<%# Convert.ToString(Eval("branchtype1"))=="" ? false : true %>'  Height="20px"/> 
```

这里 Eval("branchtype1") 我们从数据表中获取 id 的值，如 1、2、3 等，我们的图像文件夹包含 1.png、2.png、3.png 等图像，

```
Visible='<%# Convert.ToString(Eval("branchtype1"))=="" ? false : true %>' 
```

如果 value 不包含任何 id，它将为 null。我们将使用三元运算符将其与空字符串进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:18:00.443

尝试这个。

标记

```
Visible='<%# HideEmptyPhotoFolder(Eval("PhotoFolder")) %>' 
```

代码隐藏

```
protected bool HideEmptyPhotoFolder(object photoFolder)
{
    return photoFolder != null && !String.IsNullOrEmpty(photoFolder.ToString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:13:23.650

根据您的问题，您应该编写用于检查包含图像的行的代码，您可以在 RowDatabound 事件中编写代码，并在不包含图像的行上将按钮的可见属性设置为 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T11:17:33.517

您可以在 GridView RowDataBound 事件中简单地做到这一点。 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

# c# - 如何在具有静态值的组合框中绑定数据表值？

> ID：14892731
> 
> 赞同：0
> 
> 时间：2013-02-15T10:30:31.970
> 
> 标签：c#, wpf, binding, combobox

我有一个很少有静态值的 ComboBox。

```
<ComboBox Name="cmbBoxField" Grid.Column="4" Grid.Row="2" Style="{StaticResource comboBoxStyleFixedWidth}" ItemsSource="{Binding}" ></ComboBox>

MVVMModle1.cmbBoxField.Items.Add(new CustomComboBoxItem("Text Box", "0"));
MVVMModle1.cmbBoxFieldType.Items.Add(new CustomComboBoxItem("Pick List", "1"));
MVVMModle1.cmbBoxFieldType.Items.Add(new CustomComboBoxItem("Check Box", "2"));
MVVMModle1.cmbBoxFieldType.Items.Add(new CustomComboBoxItem("Radio Button", "3")); 
```

当我将数据保存在数据库表中时，它会被保存。

```
((CustomComboBoxItem)(MVVMModle1.cmbBoxField.SelectedValue)).Value.ToString(); 
```

现在，当我尝试编辑表单并将值再次绑定到组合框时，它没有显示该值。

```
 MVVMModle1.cmbBoxField.SelectedValue = dtDataList.Rows[0]["ControlList"].ToString().Trim(); 
```

有人请帮助我。如何将选定的值绑定到组合框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:57:02.223

您的代码在这里有很多问题：

*   您将[`ItemsControl.ItemsSource`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource.aspx)属性设置为默认绑定（绑定到当前数据上下文），这是不正确的，除非`DataContext`是任何实现的类型`IEnumerable`，但它可能不是。
*   如果这是正确的`DataContext`，因为例如是 an [`ObservableCollection<T>`](http://msdn.microsoft.com/en-us/library/ms668604.aspx)，那么您仍然会遇到问题，因为您将项目静态添加到 the`ComboBox`而不是无论`ItemsSource`是什么。
*   此外，您要添加的项目类型是`CustomComboBoxItem`，我将假设它继承自[`ComboBoxItem`](http://msdn.microsoft.com/en-us/library/system.windows.controls.comboboxitem.aspx). 无论哪种方式，您都不能说 the`SelectedValue`是某个字符串，因为 中的值`ComboBox`不是字符串。
*   你真的不应该有一个集合`CustomComboBoxItem`，而是一个自定义类，它本身就是它自己的 ViewModel。

* * *

既然已经说了，这里有一个针对您的问题的建议解决方案：

```
<ComboBox ItemsSource="{Binding Path=MyCollection}"
          SelectedValue="{Binding Path=MySelectedString}"
          SelectedValuePath="StringProp" />

public class CustomComboBoxItem : ComboBoxItem
{
    // Not sure what the property name is...
    public string StringProp { get; set; }

    ...
}

// I'm assuming you don't have a separate ViewModel class and you're using
// the actual window/page as your ViewModel (which you shouldn't do...)
public class MyWPFWindow : Window, INotifyPropertyChanged
{
    public MyWPFWindow()
    {
        MyCollection = new ObservableCollection<CustomComboBoxItem>();

        // Add values somewhere in code, doesn't have to be here...            
        MyCollection.Add(new CustomComboBoxItem("Text Box", "0"));
        etc ... 

        InitializeComponent();
    }

    public ObservableCollection<CustomComboBoxItem> MyCollection
    {
        get;
        private set;
    }

    private string _mySelectedString;
    public string MySelectedString
    {
        get { return _mySelectedString; }
        set
        {
            if (String.Equals(value, _mySelectedString)) return;

            _mySelectedString = value;
            RaisePropertyChanged("MySelectedString");
        }
    }

    public void GetStringFromDb()
    {
        // ...

        MySelectedString = dtDataList.Rows[0]["ControlList"].ToString().Trim();
    }
} 
```

* * *

您也可以不实现 INotifyPropertyChanged 并将 a[`DependencyProperty`](http://msdn.microsoft.com/en-us/library/system.windows.dependencyproperty.aspx)用于您的 MySelectedString 属性，但使用 INPC 是首选方式。无论如何，这应该给你足够的信息来知道往哪个方向前进......

**TL;博士;**

*   利用绑定到一个`ObservableCollection<T>`（为此创建一个属性）。
*   将您的项目添加`CustomComboBoxItem`到`ObservableCollection<T>`.
*   将 绑定`ItemsSource`到您创建的新集合属性。
*   将 绑定`SelectedValue`到您创建的某个字符串属性（利用 INPC）。
*   将 设置`SelectedValuePath`为您的字符串属性名称的路径`CustomComboBoxItem`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:22:33.307

你能用`cmbBoxField.DataBoundItem()`吗？如果不是从所选值中定位源，即获取ID，则再次查询源以获取数据。

```
(CustomComboBoxItem)MVVMModle1.cmbBoxField.DataBoundItem(); 
```

当您绑定数据源时，这样做更简单：

私有列表 GetItems(){

```
List<CustomComboBoxItem> items = new List<CustomComboBoxItem>();
    items.Add(new CustomComboBoxItem() {Prop1 = "Text Box", Prop2 = "0"});
    //...and so on
    return items;
} 
```

然后在您的主代码中：

```
List<CustomComboBoxItem> items = this.GetItems();

MVVMModle1.cmbBoxField.DisplayMember = Prop1;
MVVMModle1.cmbBoxField.ValueMember = Prop2;
MVVMModle1.cmbBoxField.DataSource = items; 
```

然后，这将允许您选择的值起作用，可以按索引、值或文本选择

```
var selected = dtDataList.Rows[0]["ControlList"].ToString().Trim();

MVVMModle1.cmbBoxField.SelectedValue = selected; 
```

# asp.net - 调用的目标已引发异常（SQLServer 空间 2008 R2）

> ID：14892732
> 
> 赞同：1
> 
> 时间：2013-02-15T10:30:34.547
> 
> 标签：asp.net, c#-4.0, sql-server-2008-r2, gis

当我尝试从 SQLServer spatial 2008 R2 读取地理数据时出现以下错误，因为我尝试使用 Dot Spatiakl 在 aspx 页面上显示地理特征。请做必要的事情来解决这个问题。

```
System.Reflection.TargetInvocationException was unhandled by user code
  Message=Exception has been thrown by the target of an invocation.
  Source=mscorlib
  StackTrace:
       at System.RuntimeMethodHandle._SerializationInvoke(IRuntimeMethodInfo method, Object target, SignatureStruct& declaringTypeSig, SerializationInfo info, StreamingContext context)
       at System.Runtime.Serialization.ObjectManager.CompleteISerializableObject(Object obj, SerializationInfo info, StreamingContext context)
       at System.Runtime.Serialization.ObjectManager.FixupSpecialObject(ObjectHolder holder)
       at System.Runtime.Serialization.ObjectManager.DoFixups()
       at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
       at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
       at System.Resources.ResourceReader.DeserializeObject(Int32 typeIndex)
       at System.Resources.ResourceReader._LoadObjectV2(Int32 pos, ResourceTypeCode& typeCode)
       at System.Resources.ResourceReader.LoadObjectV2(Int32 pos, ResourceTypeCode& typeCode)
       at System.Resources.ResourceReader.LoadObject(Int32 pos, ResourceTypeCode& typeCode)
       at System.Resources.RuntimeResourceSet.GetObject(String key, Boolean ignoreCase, Boolean isString)
       at System.Resources.RuntimeResourceSet.GetObject(String key, Boolean ignoreCase)
       at System.Resources.ResourceManager.GetObject(String name, CultureInfo culture, Boolean wrapUnmanagedMemStream)
       at System.Resources.ResourceManager.GetObject(String name, CultureInfo culture)

       at DotSpatial.Symbology.SymbologyImages.get_select() in D:\Arun Working\Dot Spatial\dotspatial-66654\DotSpatial.Symbology\SymbologyImages.Designer.cs:line 121
       at DotSpatial.Symbology.FeatureLayer.Configure(IFeatureSet featureSet) in D:\Arun Working\Dot Spatial\dotspatial-66654\DotSpatial.Symbology\FeatureLayer.cs:line 249
       at DotSpatial.Symbology.FeatureLayer..ctor(IFeatureSet featureSet) in D:\Arun Working\Dot Spatial\dotspatial-66654\DotSpatial.Symbology\FeatureLayer.cs:line 148
       at DotSpatial.Symbology.PolygonLayer..ctor(IFeatureSet inFeatureSet) in D:\Arun Working\Dot Spatial\dotspatial-66654\DotSpatial.Symbology\PolygonLayer.cs:line 44
       at DotSpatial.Controls.MapPolygonLayer..ctor(IFeatureSet inFeatureSet) in D:\Arun Working\Dot Spatial\dotspatial-66654\DotSpatial.Controls\MapPolygonLayer.cs:line 84
       at DotSpatial.Controls.MapLayerCollection.Add(IFeatureSet featureSet) in D:\Arun Working\Dot Spatial\dotspatial-66654\DotSpatial.Controls\MapLayerCollection.cs:line 205
       at DotSpatial.WebControls.GDIMap.AddLayer1(FeatureSet sqlpoly) in D:\Arun Working\Dot Spatial\dotspatial-66654\DotSpatial.WebControls\GDIMap.cs:line 164
       at DotSpatial.WebControls.WebMap.AddLayer1(FeatureSet sqlpoly) in D:\Arun Working\Dot Spatial\dotspatial-66654\DotSpatial.WebControls\WebMap.cs:line 399
       at Element_DotSpatial.MapReport.DrawTheGeography(SqlGeography geog, String myLayerName, String myItemLegend, Color fillColour, Color outlineColour, Double lineWidth, Boolean zoomTo) in D:\Arun Working\Projects\Element_DotSpatial\Element_DotSpatial\MapReport.aspx.cs:line 216
       at Element_DotSpatial.MapReport.CreateMap() in D:\Arun Working\Projects\Element_DotSpatial\Element_DotSpatial\MapReport.aspx.cs:line 56
       at Element_DotSpatial.MapReport.Page_Load(Object sender, EventArgs e) in D:\Arun Working\Projects\Element_DotSpatial\Element_DotSpatial\MapReport.aspx.cs:line 29
       at System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e)
       at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
       at System.Web.UI.Control.OnLoad(EventArgs e)
       at System.Web.UI.Control.LoadRecursive()
       at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
  InnerException: System.ComponentModel.Win32Exception
       Message=The operation completed successfully
       Source=System.Drawing
       ErrorCode=-2147467259
       NativeErrorCode=0
       StackTrace:
            at System.Drawing.Icon.Initialize(Int32 width, Int32 height)
            at System.Drawing.Icon..ctor(SerializationInfo info, StreamingContext context)
       InnerException: 
```

问候阿伦莫汉

# java - 为什么java提供在接口内声明接口的工具

> ID：14892734
> 
> 赞同：10
> 
> 时间：2013-02-15T10:30:46.220
> 
> 标签：java, interface

我正在尝试内部类的不同组合。我想知道 java 是否为您提供了在接口内编写接口的便利。它没有给我任何编译时错误。谁能告诉我这个有什么用？

```
public interface IA {

    public interface IB{

    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T10:33:54.130

这使您能够将子接口放在一个可能比不同包更有意义的命名空间中。Java API 的一个很好的例子就是[`Map.Entry`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html)接口。只有在某些实现接口的`Entry`上下文中才真正有意义`Map`，所以它被定义为接口内部的接口。

请注意，除了内部*类*之外，内部接口始终是静态的，正如 Jesse Glick 在他对[相关问题](https://stackoverflow.com/questions/71625/why-would-a-static-inner-interface-be-used-in-java)[的回答](https://stackoverflow.com/a/74400/337678)中提到的那样。

# c# - 如何使用 C# 从智能卡中获取签名图像？

> ID：14892738
> 
> 赞同：1
> 
> 时间：2013-02-15T10:30:52.073
> 
> 标签：c#, .net, visual-studio-2010, itextsharp, x509certificate

我正在开发一个 C# 应用程序来验证 pdf 文档。我已经完成了认证过程，但现在我需要获取存储在智能卡中的签名图像并将其放入给定的 PDF 文件中。用于获取证书的代码是这样的：

```
public static X509Certificate2 GetCertificate()
    {
        X509Store st = new X509Store(StoreName.My, StoreLocation.CurrentUser);
        st.Open(OpenFlags.ReadOnly);
        X509Certificate2Collection col = st.Certificates;
        X509Certificate2 card = null;
        X509Certificate2Collection sel = X509Certificate2UI.SelectFromCollection(col, "Certificates", "Select one to sign", X509SelectionFlag.SingleSelection);
        if (sel.Count > 0)
        {
            X509Certificate2Enumerator en = sel.GetEnumerator();
            en.MoveNext();
            card = en.Current;
        }
        st.Close();
        return card;
    } 
```

然后我将所选的应用到此处的文档中：

```
 if(card == null)
            {
            ChooseCertified:
                card = GetCertificate();

                if (card == null)
                {
                    DialogResult result = MessageBox.Show("Unable to identify certificates" +
                                           Environment.NewLine + "Would you like to try again?", "Certification error", MessageBoxButtons.RetryCancel, MessageBoxIcon.Question);

                    if (result.CompareTo(DialogResult.Retry) == 0)
                        goto ChooseCertified;
                    else
                        return 1;
                }
            }

            X509CertificateParser cp = new X509CertificateParser(card.RawData);
            org.bouncycastle.x509.X509Certificate[] chain = new org.bouncycastle.x509.X509Certificate[] { cp.ReadCertificate() };

            PdfReader reader = new PdfReader(original_pdf_file);

            PdfStamper stp = PdfStamper.CreateSignature(reader, new FileStream(result_pdf_file, FileMode.Create), '\0', null, true);

            PdfSignatureAppearance sap = stp.SignatureAppearance;

            sap.Layer2Text = "Document signed by " + Environment.NewLine +
                                card.GetNameInfo(X509NameType.SimpleName, false) + Environment.NewLine +
                                "Date: " + date.ToString("dd-MM-yyyy") + Environment.NewLine +
                                "Reason: " + REASON;        
            iTextSharp.text.Rectangle rct = reader.GetPageSizeWithRotation(1);
            float lowerx = 0, upperx = 0, lowery = 0, uppery = 0;
            if (valign == "top")
            {
                lowery = (rct.Height - height) - vert_margin;
                uppery = rct.Height - vert_margin;
            }
            else
            {
                lowery = vert_margin;
                uppery = vert_margin + height;
            }
            if (halign == "left")
            {
                lowerx = hor_margin;
                upperx = hor_margin + width;
            }
            else
            {
                lowerx = (rct.Width - width) - hor_margin;
                upperx = rct.Width - hor_margin;
            }
            sap.SetVisibleSignature(new iTextSharp.text.Rectangle(lowerx, lowery, upperx, uppery),1, null);
            sap.SignDate = date;
            sap.SetCrypto(null, chain, null, null);
            sap.Reason = REASON;
            sap.Location = LOCATION;
            iTextSharp.text.Font f = new iTextSharp.text.Font(iTextSharp.text.Font.HELVETICA, 7, 1, iTextSharp.text.Color.BLACK);
            f.SetStyle("Bold");
            sap.Layer2Font = f;
            sap.Acro6Layers = true;

            PdfSignature dic = new PdfSignature(PdfName.ADOBE_PPKMS, PdfName.ADBE_PKCS7_SHA1);
            dic.Date = new PdfDate(date);
            dic.Name = PdfPKCS7.GetSubjectFields(chain[0]).GetField("CN");
            dic.Reason = REASON;
            dic.Location = LOCATION;
            sap.CryptoDictionary = dic;
            int csize = 4000;
            Hashtable exc = new Hashtable();
            exc[PdfName.CONTENTS] = csize * 2 + 2;
            sap.PreClose(exc);

            HashAlgorithm sha = new SHA1CryptoServiceProvider();
            Stream s = sap.RangeStream;
            int read = 0;
            byte[] buff = new byte[8192];
            while ((read = s.Read(buff, 0, 8192)) > 0)
            {
                sha.TransformBlock(buff, 0, read, buff, 0);
            }
            sha.TransformFinalBlock(buff, 0, 0);

            byte[] pk = SignMsg(sha.Hash, card, false);

            byte[] outc = new byte[csize];

            PdfDictionary dic2 = new PdfDictionary();

            Array.Copy(pk, 0, outc, 0, pk.Length);

            dic2.Put(PdfName.CONTENTS, new PdfString(outc).SetHexWriting(true));
            sap.Close(dic2); 
```

所以我现在需要的是一种获取存储在卡上的签名图像的方法，经过大量谷歌搜索后，我没有发现任何关于这件事的信息。如果有人可以帮助我，我真的很感激。

提前致谢 ：）

# javascript - HH:MM:SS 的正则表达式

> ID：14892740
> 
> 赞同：1
> 
> 时间：2013-02-15T10:31:02.553
> 
> 标签：javascript, regex

我有一个匹配 HH:MM 例如 12:23 的正则表达式，它是：

```
function IsValidTime(timeString)
{
    var pattern = /^\d?\d:\d{2}$/;
    if (!timeString.match(pattern))
        return false;
} 
```

如何更改此行：

**var 模式 = /^\d?\d:\d{2}$/;**

检查以秒为格式的字符串，如下所示：**HH:MM:SS**例如 12:23:05

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-15T10:33:52.230

```
/^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$/ 
```

对于 24 小时时间，必须使用前导零。

```
/^(?:2[0-3]|[01]?[0-9]):[0-5][0-9]:[0-5][0-9]$/ 
```

24 小时制，前导零可选。

```
/^(?:1[0-2]|0[0-9]):[0-5][0-9]:[0-5][0-9]$/ 
```

对于 12 小时的时间，必须使用前导零。

```
/^(?:1[0-2]|0?[0-9]):[0-5][0-9]:[0-5][0-9]$/ 
```

对于 12 小时时间，前导零可选。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-15T10:34:03.757

像下面这样简单的东西应该可以工作：

```
/([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]/g 
```

### 正则表达式解释：

*   `([01][0-9]|2[0-3])`
    *   以下内容的集合：
    *   `[01][0-9]`字符“0”或“1”后跟 0 到 9 之间的任何数字
    *   `|`-*或*
    *   `2[0-3]`字符“2”后跟一个 0 到 3 之间的数字
*   `:`字面冒号
*   `[0-5][0-9]`- 0 到 5 之间的任何数字后跟 0 到 9 之间的任何数字
*   `:`字面冒号
*   `[0-5][0-9]`- 0 到 5 之间的任何数字后跟 0 到 9 之间的任何数字

### 演示：

[**正则表达式101**](http://regex101.com/r/uJ7fK4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-31T15:13:34.200

**在 javascript 中以“hh:mm am/pm”格式验证时间**

```
function timeValidation(strTime) {
           var timeFormat = /^(?:1[0-2]|0?[0-9]):[0-5][0-9]\s?(?:am|pm)?/;
           return timeFormat.test(strTime);
       } 
```

timeValidation("12:30 PM") // 返回 true

timeValidation("12:30") // 返回 false

timeValidation("27:30 AM") // 返回 false

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T10:44:19.297

根据您用于检测`99:99:99`的正则表达式，以下正则表达式就足够了：

```
/^\d?\d:\d{2}:\d{2}$/ 
```

或者更复杂一点

```
/^\d?\d(?::\d{2}){2}$/ 
```

但更好的是（因为它正确匹配范围）：

```
/^(?:[01]?\d|2[0-3]):[0-5]\d:[0-5]\d$/ 
```

这将符合函数名称`IsValidTime`...

# mvvm - 如何将自动完成框与 mvvm 中的模型绑定？

> ID：14892744
> 
> 赞同：2
> 
> 时间：2013-02-15T10:31:22.073
> 
> 标签：mvvm, wpftoolkit

我公开了一个集合并将其绑定到自动完成框的项目源，它可以工作，但选择或更改自动完成框上的文本不会像文本框或标签那样更新模型！

视图模型：

```
public ObservableCollection<String> SymptomsDb { get; private set; }

private String symptom;

public String Symptom
{
    get { return symptom; }
    set
    {
        symptom = value;
        RaisePropertyChanged(() => this.Symptom);
    }
}

public AnalysisViewModel()
{
    List<String> s = new List<String>();
    s.Add("test");
    SymptomsDb = new ObservableCollection<String>(s);
} 
```

看法：

```
<controls:AutoCompleteBox 
    ItemsSource="{Binding SymptomsDb}" 
    SelectedItem="{Binding Symptom}" 
    Text="{Binding Symptom}" 
    IsTextCompletionEnabled="True" 
    FilterMode="Contains"/> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T15:50:06.583

要从用户界面更改回视图模型，您将始终需要绑定属性 TwoWay（除了一些属性，如 TextBox.TextProperty[默认](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.mode.aspx)为 TwoWay ）：

```
<controls:AutoCompleteBox 
    ItemsSource="{Binding SymptomsDb}" 
    SelectedItem="{Binding Symptom, Mode=TwoWay}" 
    Text="{Binding Symptom}" 
    IsTextCompletionEnabled="True" 
    FilterMode="Contains"/> 
```

# linux - 将 TFS 用于 drupal - 这真的是个坏主意吗？

> ID：14892747
> 
> 赞同：2
> 
> 时间：2013-02-15T10:31:28.460
> 
> 标签：linux, tfs, xampp

我们正在考虑将 TFS 用于基于 Drupal 的项目并将其作为任务管理平台。

这里最重要的问题是什么

> TFS（仅限源代码控制）是否处理​​ Drupal 项目以及处理其他 .net 相关项目？（因为它是微软产品）

我承认 SVN 做得很好..

由于这是一个集中决策，我想知道它是最好的 SVN 还是在 LINUX-XAMPP 环境中使用 TFS 的任何缺点？

# python - 根据时间将来自一个 pandas 数据帧的条目关联到第二个数据帧

> ID：14892748
> 
> 赞同：0
> 
> 时间：2013-02-15T10:31:31.933
> 
> 标签：python, pandas

我有两个熊猫数据框。一个包含我通常的测量值（时间索引）。来自不同来源的第二帧包含系统状态。它也是时间索引的，但是状态数据框中的时间与我的数据框的时间与测量值不匹配。我想要实现的是，现在测量数据框中的每一行还包含测量时间之前状态数据框中出现的最后一个状态。

例如，我有一个这样的状态框架：

```
 state
time                                           
2013-02-14 12:29:37.101000          SystemReset
2013-02-14 12:29:39.103000             WaitFace
2013-02-14 12:29:39.103000      NormalExecution
2013-02-14 12:29:39.166000        GreetVisitors
2013-02-14 12:29:46.879000  AskForParticipation
2013-02-14 12:29:56.807000  IntroduceVernissage
2013-02-14 12:30:07.275000      PictureQuestion 
```

我的测量是这样的：

```
 utime
time
2013-02-14 12:29:38.697038      0
2013-02-14 12:29:38.710432      1
2013-02-14 12:29:39.106475      2
2013-02-14 12:29:39.200701      3
2013-02-14 12:29:40.197014      0
2013-02-14 12:29:42.217976      5
2013-02-14 12:29:57.460601      7 
```

我想最终得到一个这样的数据框：

```
 utime                 state
time
2013-02-14 12:29:38.697038      0           SystemReset
2013-02-14 12:29:38.710432      1           SystemReset
2013-02-14 12:29:39.106475      2       NormalExecution
2013-02-14 12:29:39.200701      3         GreetVisitors
2013-02-14 12:29:40.197014      0         GreetVisitors
2013-02-14 12:29:42.217976      5         GreetVisitors
2013-02-14 12:29:57.460601      7   Introducevernissage 
```

我发现了一个非常低效的解决方案，如下所示：

```
result = measurements.copy()
stateList = []
for timestamp, _ in measurements.iterrows():
    candidateStates = states.truncate(after=timestamp).tail(1)
    if len(candidateStates) > 0:
        stateList.append(candidateStates['state'].values[0])
    else:
        stateList.append("unknown")

result['state'] = stateList 
```

你有什么方法可以优化这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:09:00.307

也许像

```
df = df1.join(df2, how='outer')
df['state'].fillna(method='ffill',inplace=True)
df.dropna() 
```

会工作？产品`join`：

```
>>> df
                                          state  utime
time                                                  
2013-02-14 12:29:37.101000          SystemReset    NaN
2013-02-14 12:29:38.697038                  NaN      0
2013-02-14 12:29:38.710432                  NaN      1
2013-02-14 12:29:39.103000             WaitFace    NaN
2013-02-14 12:29:39.103000      NormalExecution    NaN
2013-02-14 12:29:39.106475                  NaN      2
2013-02-14 12:29:39.166000        GreetVisitors    NaN
2013-02-14 12:29:39.200701                  NaN      3
2013-02-14 12:29:40.197014                  NaN      0
2013-02-14 12:29:42.217976                  NaN      5
2013-02-14 12:29:46.879000  AskForParticipation    NaN
2013-02-14 12:29:56.807000  IntroduceVernissage    NaN
2013-02-14 12:29:57.460601                  NaN      7
2013-02-14 12:30:07.275000      PictureQuestion    NaN 
```

然后我们可以向前填充状态列：

```
>>> df['state'].fillna(method='ffill',inplace=True)
time
2013-02-14 12:29:37.101000            SystemReset
2013-02-14 12:29:38.697038            SystemReset
2013-02-14 12:29:38.710432            SystemReset
2013-02-14 12:29:39.103000               WaitFace
2013-02-14 12:29:39.103000        NormalExecution
2013-02-14 12:29:39.106475        NormalExecution
2013-02-14 12:29:39.166000          GreetVisitors
2013-02-14 12:29:39.200701          GreetVisitors
2013-02-14 12:29:40.197014          GreetVisitors
2013-02-14 12:29:42.217976          GreetVisitors
2013-02-14 12:29:46.879000    AskForParticipation
2013-02-14 12:29:56.807000    IntroduceVernissage
2013-02-14 12:29:57.460601    IntroduceVernissage
2013-02-14 12:30:07.275000        PictureQuestion
Name: state 
```

然后删除没有 utime 的行：

```
>>> df.dropna()
                                          state  utime
time                                                  
2013-02-14 12:29:38.697038          SystemReset      0
2013-02-14 12:29:38.710432          SystemReset      1
2013-02-14 12:29:39.106475      NormalExecution      2
2013-02-14 12:29:39.200701        GreetVisitors      3
2013-02-14 12:29:40.197014        GreetVisitors      0
2013-02-14 12:29:42.217976        GreetVisitors      5
2013-02-14 12:29:57.460601  IntroduceVernissage      7 
```

您可能需要对其进行调整以处理同时拥有 utime 和（可能是多个）状态的情况。可能会这样做`drop_duplicates`。`take_last=True`在我早上喝咖啡之前，您还必须比我更努力地思考问`<`​​题`<=`。

# powershell - 在 Windows 资源管理器中打开共享之前，无法从 powershell 中的网络共享复制文件

> ID：14892753
> 
> 赞同：2
> 
> 时间：2013-02-15T10:31:41.160
> 
> 标签：powershell

我有一个非常简单的 powershell 脚本，可以从网络服务器复制文件。

这是脚本

```
Write-Output "Copying Backups"
copy \\sqlbox\SqlBackups\Client.bak c:\sqlbackups 
```

它抛出这个异常

```
Invalid Path: '\\sqlbox\SqlBackups\Client.bak'.
At C:\Work\db\restore.ps1:5 char:1
+ copy \\sqlbox\SqlBackups\Client.bak c:\sqlbackups
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : InvalidOperation: (:) [], ArgumentException
+ FullyQualifiedErrorId : CopyItemDynamicParametersProviderException 
```

如果我打开一个 Windows 资源管理器并转到 \sqlbox\SqlBackups 它打开正常，如果我然后运行 ​​powershel 脚本它也开始工作，并且将工作直到我下次重新启动 PC。

如何在脚本中解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T10:44:04.907

尝试先映射驱动器，然后执行复制操作。

```
New-PSDrive -Name S -Root \\sqlbox\SqlBackups\ -PSProvider FileSystem
Write-Output "Copying Backups"
copy S:\Client.bak c:\sqlbackups 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-14T09:55:13.487

在出现此错误的服务器上复制文件时，我遇到了类似的问题：

> 找不到路径“\\computer1\d$\path”，因为它不存在。

它在文件名前面**添加后起作用：** `Microsoft.PowerShell.Core\FileSystem::`

```
copy-item "Microsoft.PowerShell.Core\FileSystem::\\computer1\d$\path\installer.msi" "Microsoft.PowerShell.Core\FileSystem::\\computer2\d$\path\installer.msi" 
```

# cuda - 是否可以同时运行属于不同应用程序的两个内核？

> ID：14892755
> 
> 赞同：2
> 
> 时间：2013-02-15T10:31:52.137
> 
> 标签：cuda, gpu, gpgpu, nvidia

我想同时运行属于两个不同 CUDA 程序的两个内核。我不希望发生上下文切换。我希望这两个程序共享设备。我的 GPU 中有 14 个 SM，一个程序使用 2 个 SM，另一个程序使用 1 个 SM。但我无法同时运行它们。第二个程序一直等到第一个程序完成执行。GPU 设备是 nVidia Tesla M2050。使用 deviceQuery 时，它表示该卡支持并发内核执行（这适用于属于一个程序/进程/上下文的内核吗？）。此外，设备处于默认计算模式。它没有设置为任何独占模式。有什么办法可以同时运行它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T07:40:04.607

首先看一下[https://stackoverflow.com/a/14896945/56875](https://stackoverflow.com/a/14896945/56875)。GPU 无法在两个 cuda 上下文的并行内核中执行。

我以前没有尝试过，但是在 linux 上你可以尝试使用[CUDA-proxy](http://stuff.onse.fi/man?program=alt-nvidia-current-cuda-proxy-control&section=1)作弊，这是一个创建单个上下文但允许其他 cuda 进程使用代理上下文的单个进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:01:51.773

正如@talonmies 在评论中所说 - 目前这是不可能的。任何时候都只能在给定设备上存在一个 CUDA 上下文。

# java - 使用 Spring @Configuration 注解注入 bean 列表

> ID：14892757
> 
> 赞同：8
> 
> 时间：2013-02-15T10:32:02.967
> 
> 标签：java, spring, spring-annotations

我有一个 Spring bean，在 Spring Bean 中我依赖于其他 bean 的列表。我的问题是：如何注入一个通用的 bean 列表作为该 bean 的依赖项？

例如，一些代码：

```
public interface Color { }

public class Red implements Color { }

public class Blue implements Color { } 
```

我的豆子：

```
public class Painter {
  private List<Color> colors;

  @Resource
  public void setColors(List<Color> colors) {
      this.colors = colors;
  }
}

@Configuration
public class MyConfiguration {

  @Bean
  public Red red() {
    return new Red();
  }

  @Bean
  public Blue blue() {
    return new Blue();
  }

  @Bean
  public Painter painter() {
    return new Painter();
  }
} 
```

问题是; 如何获取 Painter 中的颜色列表？另外，附带说明一下：我应该让@Configuration 返回接口类型还是类？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-15T11:36:52.433

您所拥有的应该可以工作，在 setter 上有一个`@Resource`or`@Autowired`应该将 Color 的所有实例注入您的`List<Color>`字段。

如果你想更明确，你可以返回一个集合作为另一个 bean：

```
@Bean
public List<Color> colorList(){
    List<Color> aList = new ArrayList<>();
    aList.add(blue());
    return aList;
} 
```

并以这种方式将其用作自动装配字段：

```
@Resource(name="colorList") 
public void setColors(List<Color> colors) {
    this.colors = colors;
} 
```

或者

```
@Resource(name="colorList")
private List<Color> colors; 
```

关于返回接口或实现的问题，任何一个都应该工作，但应该首选接口。

# caching - 在 MATLAB 中实现缓存以快速处理视频

> ID：14892758
> 
> 赞同：0
> 
> 时间：2013-02-15T10:32:08.217
> 
> 标签：caching, video, parallel-processing, matlab

我正在做一个项目，我需要一个一个地处理视频并运行我的算法来从中提取分数。问题是视频处理时间过长。我尝试在少数地方使用 parfor 并行化代码，但性能仍然很差。我怎样才能提高性能？有没有办法缓存帧？我正在阅读每一帧并处理它。欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:54:02.827

缓存当然是一种选择，但它可能无济于事。如果你不知道什么是慢的，那么加速代码是非常困难的。使用[Matlab 的分析器](http://www.mathworks.com/help/matlab/ref/profile.html)找到速度较慢的部分，然后加快这些部分的速度。之后，再次配置文件以查看您的更改产生了什么影响。

以下是使用分析器的基本方法：

```
profile on
% call your function here
profile off
profile report 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T13:58:59.033

首先，您是否确保您的代码支持并行，并且您已经运行 matlabpool 来打开 CPU 并行计算

第二，也许你需要优化你的代码

第三，你可以试试GPU并行计算

# jquery - jvectormap 标记标签放置在鼠标 IE 上方

> ID：14892767
> 
> 赞同：3
> 
> 时间：2013-02-15T10:32:26.483
> 
> 标签：jquery, internet-explorer, jvectormap

我只在 Internet Explorer 上遇到了 jvectormap 的问题。

当我将鼠标悬停在区域中的标记上时，标签显示在标记上方。我仍然可以看到鼠标，但无法单击标记以打开链接或任何内容。所以当我稍微移动鼠标时它只是闪烁。

显示标签的代码：

```
onMarkerLabelShow: function(event, label, index){
            label.html(
                '<b>'+label.html()+'</b><br />'+
                markers[current_country][index].html
            );
        }, 
```

问题是，如果我删除标记文本并只显示标签之间的标题，`<b>`它工作正常。

可能后面的文字`<br/>`太长了？或者我可以将 IE 的标签放在其他位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:16:05.377

问题是换行符。它在带有 br 和 p 标签的 IE 中无法正常工作，并且在 clear:both 中也无法正常工作。

这是一个肮脏的解决方法，但它就像一个魅力：

在“label.html”调用之前，输入这行代码：

```
label.css('left',-200); 
```

它在 Firefox 和 Chrome 中仍然可以正常工作，在 IE 中也没有问题了。

# asp.net - 为什么我们在使用 Teleric radgrid 时需要添加 asp:ScriptManager

> ID：14892771
> 
> 赞同：0
> 
> 时间：2013-02-15T10:32:44.237
> 
> 标签：asp.net, telerik, telerik-grid

我要添加的原因

```
asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true 
```

`Tag`当我使用`telerik radgrid`.

否则它会抛出这样的错误

```
"The control with ID 'gdSample' requires a ScriptManager on the page. 
        The ScriptManager must appear before any controls that need it". 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:49:25.173

[ScriptManager是 ASP.Net 中的](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.aspx)[AJAX](http://www.asp.net/ajax)功能所必需的，Telerik 的[RadGrid](http://www.telerik.com/products/aspnet-ajax/grid.aspx)是基于 AJAX 的网格。

[脚本管理器 - MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.aspx)

> ScriptManager 控件是 ASP.NET 中 Ajax 功能的核心。该控件管理页面上的所有 ASP.NET Ajax 资源。这包括将 Microsoft Ajax 库脚本下载到浏览器并协调使用 UpdatePanel 控件启用的部分页面更新。

[RadGrid-Telerik](http://www.telerik.com/products/aspnet-ajax/grid.aspx)。

> 在简单或高级场景中使用 RadGrid for ASP.NET AJAX 让它执行从分页、排序、过滤和数据编辑到分组和显示分层数据的任何操作。借助丰富的客户端功能和最少的 HTML 和脚本加载，为您的数据密集型应用程序实现类似桌面的性能。

# sql - 有没有办法从实体框架查询中使用 LIKE 运算符？

> ID：14892772
> 
> 赞同：0
> 
> 时间：2013-02-15T10:32:50.150
> 
> 标签：sql, entity-framework, sql-like

好的，我想使用实体框架查询中的 LIKE 关键字是出于一个相当非正统的原因 - 我想比使用等于运算符时*更精确地匹配字符串。*

因为 equals 运算符会[自动](https://stackoverflow.com/questions/5854769/linq-automatically-trims-my-string) [填充](http://support.microsoft.com/kb/316626)要与空格匹配的字符串，以便`col = 'foo '`实际返回`col`等于`'foo'`OR的行`'foo '`，所以我想强制考虑尾随空格，而 LIKE 运算符实际上就是这样做的。

我知道您可以强制实体框架在查询中使用`.StartsWith`,`.EndsWith`和使用 LIKE 运算符。`.Contains`但是，正如预期的那样，这会导致 EF 使用通配符对查询的文本进行前缀、后缀和包围`%`。有没有办法让实体框架直接使用 SQL 中的 LIKE 运算符来匹配我的查询中的字符串，而不添加通配符？理想情况下，它看起来像这样：

```
string usernameToMatch = "admin ";
if (context.Users.Where(usr => usr.Username.Like(usernameToMatch)).Any()) {
    // An account with username 'admin ' ACTUALLY exists
}
else {
    // An account with username 'admin' may exist, but 'admin ' doesn't
} 
```

我找不到直接执行此操作的方法；现在，我能想到的最好的就是这个黑客：

```
context.Users.Where(usr =>
    usr.Username.StartsWith(usernameToMatch) &&
    usr.Username.EndsWith(usernameToMatch) &&
    usr.Username == usernameToMatch
) 
```

有没有更好的办法？顺便说一句，我不想​​使用它，`PATINDEX`因为它看起来像 SQL Server 特定的东西，不能在数据库之间移植。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:40:37.437

没有办法让 EF`LIKE`在其查询中使用，但是您可以编写一个存储过程来查找使用`LIKE`输入参数的用户并使用 EF 来访问您的存储过程。

但是，您的特殊情况似乎更像是数据完整性问题。`username.Trim()`出于这个原因，您不应该允许用户注册以空格 ( ) 开头或结尾的用户名。一旦你这样做了，这个特定的问题就会完全消失。

此外，允许对身份验证详细信息进行“粗略”匹配是不安全的。不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:51:16.037

好吧，正如我在问题中提到的那样，似乎没有办法让 EF 使用`LIKE`运算符而不在开头或结尾填充通配符，所以我最终使用了这种组合，虽然有点难看，与`LIKE`没有任何通配符的 a 具有相同的效果：

```
context.Users.Where(usr =>
    usr.Username.StartsWith(usernameToMatch) &&
    usr.Username.EndsWith(usernameToMatch) &&
    usr.Username == usernameToMatch
) 
```

所以，如果值是`LIKE '[usernameToMatch]%'`和它是`LIKE '%[usernameToMatch]'`和它，`= '[usernameToMatch]'`那么它完全匹配。

# event-handling - jQuery 的触发方法的顺序有多重要？

> ID：14892774
> 
> 赞同：0
> 
> 时间：2013-02-15T10:32:54.340
> 
> 标签：event-handling, jquery, jquery-on

我想提供一种`on`从插件外部使用 -event 处理程序的方法。问题是，如果我以错误的顺序提供它们，触发器将不会触发。

例如，这有效：

```
$(window).on('foo:bar', function(){
    alert(true);
});
$(window).trigger('foo:bar'); 
```

......但这不是：

```
$(window).trigger('foo:bar');
$(window).on('foo:bar', function(){
    alert(true);
}); 
```

对第二种方法如何工作有任何想法吗？

**更新**

它在这里工作：[http ://www.benplum.com/projects/rubberband/](http://www.benplum.com/projects/rubberband/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:35:03.850

你不能。你想在烘烤之前吃蛋糕。

UPD：您误解了[http://www.benplum.com/projects/rubberband/上的代码](http://www.benplum.com/projects/rubberband/)

这是一个 jsfiddle，证明它不像您想的那样工作：[jsfiddle.net/zerkms/z5Mya/](http://jsfiddle.net/zerkms/z5Mya/)

关于代码的注意事项：我已经分叉了库并`console.log`在此处添加了一些琐碎的内容：[https ://github.com/zerkms/Rubberband/blob/master/jquery.bp.rubberband.js#L77](https://github.com/zerkms/Rubberband/blob/master/jquery.bp.rubberband.js#L77)

# c++ - C ++：将按位与的结果分配给布尔

> ID：14892779
> 
> 赞同：4
> 
> 时间：2013-02-15T10:33:07.427
> 
> 标签：c++, boolean, bitwise-and

我在 C++ 中有以下循环，用 g++ 4.1.2 编译：

```
while(1) {
    int status = getStatus();
    bool firstOk = status & 0x1;
    bool secondOk = status & 0x2;
    if(firstOk != m_firstOk) {
        logStatus(1, firstOk);
        m_firstOk = firstOk;
    }
    if(secondOk != m_secondOk) {
        logStatus(2, secondOk);
        m_secondOk = secondOk;
    }

    sleep(1);
} 
```

注意 logStatus() 是按值接收其参数的，所以参数不会被修改。m_firstOk 和 m_secondOk 当然是 bool 成员属性。

到目前为止，这一切都很好。我收到了一份报告，它没有检测到 firstOk 何时更改。我使用 gdb 附加到正在运行的进程。它在 sleep() 行中，当我看到以下内容时我感到很惊讶：

```
(gdb) p m_firstOk
$1 = true
(gdb) p m_secondOk
$2 = true
(gdb) p firstOk
$3 = 244 
```

怎么回事？当 firstOk 应该是按位与 0x1 的结果时，它怎么可能是 244？我知道一个布尔值实际上存储为一个整数，但我的按位 AND 怎么能被忽略呢？由于它是 244，当它应该为假时，它被评估为真，这就是问题的原因。

不是将按位与的结果分配给布尔安全吗？这是一个 gcc 错误吗？或者我应该做如下的事情？

```
bool firstOk = (status & 0x1) ? true : false; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T11:04:28.533

当您到达调用时，局部变量`firstOk`和`secondOk`不是“活动的” `sleep()`，因此即使它们*已*被分配堆栈槽，它们的值也完全有可能（而且确实很有可能）不再存储在任何地方。

如果您需要调试这些变量中的任何一个，则需要

1.  将它们重新声明为`static`，这会将它们分配出堆栈的持久存储
2.  `firstOk`将and的声明移动`secondOk`到外部范围。（注意，这可能还不够，除非您将它们移出文件范围。）
3.  `firstOk`将和的值复制`secondOk`到持久变量或存在于外部范围中的变量，并检查它们。

无论如何，一旦您完成调试过程，我将恢复上述任何调试措施。:-)

至于您的最后一个问题，该语句`bool firstOk = status & 0x1`非常好，它后面的语句设置`secondOk`. 将 an 分配`int`给 a`bool`会将零/非零值强制为`false`和`true`。

至于你的实际错误（不知何故你错过了一个过渡`firstOk`），我看不出你可能在这段代码中丢失了它。这部分代码看起来不错。您的`getStatus()`函数是否可能需要比每秒一次更频繁地调用？其他东西可以写到`m_firstOk`or`m_secondOk`吗？没有显示它们的声明，因此推测它们存在于外部范围中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:06:29.743

唯一可能的方法是：

1）堆栈已被某种方式覆盖。

2）一旦你到达睡眠线，临时的价值就不是那么重要了，所以编译器不再跟踪它，所以内存槽可能已经被用于别的东西了！

如果它一开始可以工作，然后开始出现错误，那么很可能不是该部分代码的编译器错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T10:46:39.547

正确的分配应该是：

```
bool firstOk = (status & 0x1) == 0x01; 
```

或者一般来说：

```
bool flag = (value & mask) == mask; 
```

# delphi - PChar 是 UTF-8 编码的吗？

> ID：14892780
> 
> 赞同：1
> 
> 时间：2013-02-15T10:33:12.187
> 
> 标签：delphi, utf-8, character-encoding, pascal

我正在编写一个使用 C-DLL 的工具。C-DLL 的函数需要一个`char*`UTF-8 格式的 。我的问题：我可以通过 a`PChar`还是必须使用`UTF8Encode(string)`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T11:11:46.253

考虑一个名为 的字符串变量`s`。在 ANSI Delphi`PChar(s)`上是 ANSI 编码的。在 Unicode Delphi 上，它是 UTF-16 编码的。

因此，无论哪种方式，您都需要转换`s`为 UTF-8 编码。然后您可以使用`PAnsiChar(...)`来获取指向以空结尾的 C 字符串的指针。

因此，您需要的代码如下所示：

```
PAnsiChar(UTF8Encode(s)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T11:10:54.400

1.  请编辑问题并使用您的目标 Delphi 版本添加标签。

2.  将其传递为`PAnsiChar`; PChar 是一个小丑，可能意味着不同的数据类型。当您使用类似 DLL 的 API 时，您会忽略编译器安全网，这意味着您应该自己制作。这意味着您应该使用真正的类型，而不是小丑，无论哪个编译器设置和版本处于活动状态，这些类型都不会改变。

3.  但是在传递指针之前，您应该确保源数据实际上是用 UTF8 编码的。

.

```
Var data: string; buffer: UTF8String; buffer_ptr: PAnsiChar;
Begin
   buffer := data + #0; 
 // transcoding to UTF8 from whatever charset it was, transparently done by Delphi RTL
 // last zero to ensure that even for empty string you would have valid pointer below
   buffer_ptr := Pointer(@buffer[1]); // making sure there can be no codepage bound to the datatype
   C_DLL_CALL(buffeR_ptr);
End; 
```

# python - Python：如何从字符串中删除字符串

> ID：14892783
> 
> 赞同：1
> 
> 时间：2013-02-15T10:33:19.323
> 
> 标签：python

我有如下代码片段：

```
server_directory = "/Users/storm/server"
def get_directory(self, username):
    home = server_directory + "/" + username
    typic = os.getcwd()
    if typic == server_directory:
        return "/"
    elif typic == home:
        return "~"
    else:
        return typic 
```

每次我从两个不错的服务器目录和用户的主目录中更改目录时，它看起来像`/Users/storm/server/svr_user`. 由于我想模拟主目录和虚拟“根”目录，我该如何制作它`/svr_user2`而不是？`/Users/storm/server/svr_user`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T10:38:55.987

尽管您可以通过字符串操作做很多事情，但更好的方法是使用`os.path`：

```
import os

src = '/Users/storm/server/svr_user'
dst = '/svr_user2'

a = '/Users/storm/server/svr_user/x/y/z'
os.path.join(dst, os.path.relpath(a, src)) 
```

返回

```
'/svr_user2/x/y/z' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:49:17.753

[eumiro 的答案](https://stackoverflow.com/a/14892877/1974792)在政治上不太正确的替代方案是：

```
import re

src = '/Users/storm/server/svr_user'
dst = '/svr_user2'

a = '/Users/storm/server/svr_user/x/y/z'
re.sub(src, dst, a, 1) 
```

产生：

```
'/svr_user2/x/y/z' 
```

注意`1`这意味着更换一次。

# scala - 向 ActorSystem 中的所有参与者发送消息

> ID：14892786
> 
> 赞同：5
> 
> 时间：2013-02-15T10:33:26.077
> 
> 标签：scala, akka

*是否可以向参与者系统中的所有*参与者发送消息？我一直在看[广播路由器](http://doc.akka.io/docs/akka/snapshot/scala/routing.html#broadcast-messages-scala)的例子，但那太微不足道了，我无法理解如何动态地将演员添加到路由器。

我们将 scala 用于 akka。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T10:58:30.963

```
system.actorSelection("/user/*") ! msg 
```

选择监护人的所有孩子并向他们发送消息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-15T10:44:37.853

如果要向所有动态创建的actor发送消息，可以使用[eventBus](http://doc.akka.io/docs/akka/2.1-M2/scala/event-bus.html)

我个人将 system.eventStream 用于我的案例。

从演员，您可以发送给所有人：

```
context.system.eventStream.publish(StatisticsMessage()) 
```

或直接与系统。

演员必须订阅：

```
context.system.eventStream.subscribe 
```

我从：

```
trait SubscriberActor extends Actor {

  def subscribedClasses: Seq[Class[_]]

  override def preStart() {
    super.preStart()
    subscribedClasses.foreach(this.context.system.eventStream.subscribe(this.self, _))
  }

  override def postStop() {
    subscribedClasses.foreach(this.context.system.eventStream.unsubscribe(this.self, _))
    super.postStop()
  }
} 
```

# eclipse - 为 samsung tocco 编译 java me 代码需要哪个 sdk？

> ID：14892788
> 
> 赞同：1
> 
> 时间：2013-02-15T10:33:35.320
> 
> 标签：eclipse, java-me

我开发了一个 Android 应用程序，它取代了以前用 J2ME 编写的两个系统。我的老板有旧的源代码，需要为三星 tocco 手机编译。我需要在 Eclipse 中使用哪个 sdk/jar 文件来编译源代码？

我在三星网站上看过，但似乎找不到任何东西。此外，目前尚不清楚 Tocco 手机使用哪种操作系统。

提前感谢马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:11:03.570

您可以尝试为 Java ME 平台安装 Samsung SDK 1.2.2：

[http://developer.samsung.com/java/tools-sdks/New-Samsung-Java-SDK-1-2-2-release-28th-October-2010](http://developer.samsung.com/java/tools-sdks/New-Samsung-Java-SDK-1-2-2-release-28th-October-2010)

然后采取步骤如何用它创建一个 Hello 世界：

[http://developer.samsung.com/java/tools-sdks/Developing-HelloWorld-MIDlet-using-Samsung-SDK](http://developer.samsung.com/java/tools-sdks/Developing-HelloWorld-MIDlet-using-Samsung-SDK)

# apache-flex - AMFPHP 在 Flex 中为 ArrayCollection 工作

> ID：14892791
> 
> 赞同：0
> 
> 时间：2013-02-15T10:33:42.530
> 
> 标签：apache-flex, flex4.5, flexbuilder, amfphp

我的 php 类中有一个函数，它必须接收一个对象数组。在 flex 中，我发送调用服务的数据（作为 ArrayCollection）。如果我在本地工作，PHP 接收数据并将所有记录存储在数据库中，但我将此类服务放在服务器中，该功能不起作用。

```
public function putPrecioBaseProductos($data) {

    $priveID = $data[0]->priveID;
    $date     = $data[0]->date;

    $res = mysql_query("DELETE FROM db.prices WHERE priveID=".$priveID." AND date='".$date."'");

    if (!$res) return '0';

    $cadena = "";
    for ($i=0; $i < count($data); $i++) {
        if ($cadena != '') $cadena .= ', ';
        $cadena .= "(".$priveID.", ".$data[$i]->productID.", '".$data[$i]->precio1."', '".$data[$i]->precio2."', '".$data[$i]->precio3."', '".$data[$i]->precio4."', '".$data[$i]->precio5."', '".$date."')";
    }
    $res = mysql_query( "INSERT INTO tabo4.precios_base (proveedorID, productoID, precio1, precio2, precio3, precio4, precio5, fecha) VALUES ".$cadena );

    if ($res) return '1'; else return '0';
} 
```

我一直在谷歌搜索，发现**amfphp**不支持 ArrayColletion 作为参数，但正如我刚才所说，在本地（使用 MAMP），数据是按需要接收的，但在服务器中不支持。

有谁知道为什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:56:05.043

尝试将数据作为 Array 而不是 ArrayCollection 发送。ArrayCollection 不适用于 AMFPhp ...

要获取数组，只需使用：

> myArrayCollection.source;

# delphi - 按标题搜索标签

> ID：14892793
> 
> 赞同：5
> 
> 时间：2013-02-15T10:33:49.143
> 
> 标签：delphi

我试图弄清楚如何通过它来搜索标签`Caption`：

```
for I := ComponentCount - 1 downto 0 do
begin
  if Components[i] is TLabel then
    if Components[i].Caption = mnNumber then
    begin
      Components[i].Left := Left;
      Components[i].Top := Top + 8;
    end;
end; 
```

我收到一个错误：`Undeclared identifier: 'Caption'`。
我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-15T12:01:12.497

迭代`Components[]`是错误的方法。这只会产生表单拥有的组件。您将错过任何动态添加的、不属于表单的组件，或属于框架的组件。

相反，您应该使用`Controls[]`. 但是，这只会产生第一代孩子。如果有更深的父/子嵌套，那么您需要递归。那是更多的工作。我使用一些助手来简化它。我已经将它们包装在这个单元中：

```
unit ControlEnumerator;

interface

uses
  System.SysUtils, System.Generics.Collections, Vcl.Controls;

type
  TControls = class
  private
    type
      TEnumerator<T: TControl> = record
        FControls: TArray<T>;
        FIndex: Integer;
        procedure Initialise(WinControl: TWinControl; Predicate: TFunc<T, Boolean>);
        class function Count(WinControl: TWinControl; Predicate: TFunc<T, Boolean>): Integer; static;
        function GetCurrent: T;
        function MoveNext: Boolean;
        property Current: T read GetCurrent;
      end;
      TEnumeratorFactory<T: TControl> = record
        FWinControl: TWinControl;
        FPredicate: TFunc<T, Boolean>;
        function Count: Integer;
        function Controls: TArray<T>;
        function GetEnumerator: TEnumerator<T>;
      end;
  public
    class procedure WalkControls<T: TControl>(WinControl: TWinControl; Predicate: TFunc<T, Boolean>; Method: TProc<T>); static;
    class function Enumerator<T: TControl>(WinControl: TWinControl; Predicate: TFunc<T, Boolean>=nil): TEnumeratorFactory<T>; static;
    class function ChildCount<T: TControl>(WinControl: TWinControl; Predicate: TFunc<T, Boolean>=nil): Integer; static;
  end;

implementation

{ TControls.TEnumerator<T> }

procedure TControls.TEnumerator<T>.Initialise(WinControl: TWinControl; Predicate: TFunc<T, Boolean>);
var
  List: TList<T>;
  Method: TProc<T>;
begin
  List := TObjectList<T>.Create(False);
  Try
    Method :=
      procedure(Control: T)
      begin
        List.Add(Control);
      end;
    WalkControls<T>(WinControl, Predicate, Method);
    FControls := List.ToArray;
  Finally
    List.Free;
  End;
  FIndex := -1;
end;

class function TControls.TEnumerator<T>.Count(WinControl: TWinControl; Predicate: TFunc<T, Boolean>): Integer;
var
  Count: Integer;
  Method: TProc<T>;
begin
  Method :=
    procedure(Control: T)
    begin
      inc(Count);
    end;
  Count := 0;
  WalkControls<T>(WinControl, Predicate, Method);
  Result := Count;
end;

function TControls.TEnumerator<T>.GetCurrent: T;
begin
  Result := FControls[FIndex];
end;

function TControls.TEnumerator<T>.MoveNext: Boolean;
begin
  inc(FIndex);
  Result := FIndex<Length(FControls);
end;

{ TControls.TEnumeratorFactory<T> }

function TControls.TEnumeratorFactory<T>.Count: Integer;
begin
  Result := TEnumerator<T>.Count(FWinControl, FPredicate);
end;

function TControls.TEnumeratorFactory<T>.Controls: TArray<T>;
var
  Enumerator: TEnumerator<T>;
begin
  Enumerator.Initialise(FWinControl, FPredicate);
  Result := Enumerator.FControls;
end;

function TControls.TEnumeratorFactory<T>.GetEnumerator: TEnumerator<T>;
begin
  Result.Initialise(FWinControl, FPredicate);
end;

class procedure TControls.WalkControls<T>(WinControl: TWinControl; Predicate: TFunc<T, Boolean>; Method: TProc<T>);
var
  i: Integer;
  Control: TControl;
  Include: Boolean;
begin
  if not Assigned(WinControl) then begin
    exit;
  end;
  for i := 0 to WinControl.ControlCount-1 do begin
    Control := WinControl.Controls[i];
    if not (Control is T) then begin
      Include := False;
    end else if Assigned(Predicate) and not Predicate(Control) then begin
      Include := False;
    end else begin
      Include := True;
    end;
    if Include then begin
      Method(Control);
    end;
    if Control is TWinControl then begin
      WalkControls(TWinControl(Control), Predicate, Method);
    end;
  end;
end;

class function TControls.Enumerator<T>(WinControl: TWinControl; Predicate: TFunc<T, Boolean>): TEnumeratorFactory<T>;
begin
  Result.FWinControl := WinControl;
  Result.FPredicate := Predicate;
end;

class function TControls.ChildCount<T>(WinControl: TWinControl; Predicate: TFunc<T, Boolean>): Integer;
begin
  Result := Enumerator<T>(WinControl, Predicate).Count;
end;

end. 
```

现在你可以像这样解决你的问题：

```
var
  lbl: TLabel;
....
for lbl in TControls.Enumerator<TLabel>(Form) do
  if lbl.caption=mnNumber then
  begin
    lbl.Left := Left;
    lbl.Top := Top + 8;
  end; 
```

或者您可以使用谓词将标题测试放在迭代器中：

```
var
  Predicate: TControlPredicate;
  lbl: TLabel;
....
Predicate := function(lbl: TLabel): Boolean
  begin
    Result := lbl.Caption='hello';
  end;
for lbl in TControls.Enumerator<TLabel>(Form, Predicate) do
begin
  lbl.Left := Left;
  lbl.Top := Top + 8;
end; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-15T12:41:16.510

最后一条信息出现在您对 Golez 回答的评论中：您的标签是在运行时创建的，因此他们有可能没有`Form`作为所有者。您将需要使用`Controls[]`数组来查看表单所包含的所有控件，并递归查看所有`TWinControl`后代，因为它们也可能包含`TLabel`'s。

如果您要执行此分配并针对不同类型的控件，您可能需要实现某种帮助程序，这样您就不会经常重复自己。看看大卫对现成解决方案的回答，除了解决手头的问题之外，它还设法包括一些“花里胡哨”；就像使用匿名函数来操作找到的控件的能力一样，它可以使用匿名函数根据任何条件过滤控件。

在开始使用如此复杂的解决方案之前，您可能应该了解最简单的解决方案。一个非常简单的递归函数，它简单地查看`TControls`从表单开始的所有容器。像这样的东西：

```
procedure TForm1.Button1Click(Sender: TObject);

  procedure RecursiveSearchForLabels(const P: TWinControl);
  var i:Integer;
  begin
    for i:=0 to P.ControlCount-1 do
      if P.Controls[i] is TWinControl then
        RecursiveSearchForLabels(TWinControl(P.Controls[i]))
      else if P.Controls[i] is TLabel then
        TLabel(P.Controls[i]).Caption := 'Test';
  end;

begin
  RecursiveSearchForLables(Self);
end; 
```

使用 David 的通用代码，上面的代码可以重写为：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  TControls.WalkControls<TLabel>(Self, nil,
    procedure(lbl: TLabel)
    begin
      lbl.Caption := 'Test';
    end
  );
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T10:38:35.247

ComponentCount 仅用于计数。使用 Components 数组查找实际组件。为方便起见，您可以将标签放在 TLabel 变量中，这也将允许您使用在 TComponent 中不可见的标签特定属性。您也可以使用`with`它，但我认为它会降低可读性。

```
var
  l: TLabel;

for I := ComponentCount -1 downto 0 do
begin
  if Components[i] is TLabel then // Check if it is.
  begin
    l := TLabel(Components[i]); // Typecast, to reach it's properties.
    if l.Caption = mnNumber then
    begin
      l.Left := Left;
      l.Top := Top +8;
    end;
  end;
end; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T14:01:00.890

编译器不知道您的 Components[i] 是 TLabel。

您需要像这样将组件转换为 Tlabel：

```
for I := ComponentCount - 1 downto 0 do
begin
  if Components[i] is TLabel then //here you check if it is a tlabel
    if TLabel(Components[i]).Caption = mnNumber then //and here you explicitly tell the
    begin                                            //compiler to treat components[i]
      TLabel(Components[i]).Left := Left;            //as a tlabel.
      TLabel(Components[i]).Top := Top + 8;         
    end;
end; 
```

这是必需的，因为 components[i] 不知道标题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T11:21:21.563

尝试这个：

```
  对于 I := ControlCount-1 下降到 0 做
  开始
    if Controls[i] is TLabel then // 检查是否是。
    开始
      if (Controls[i] as TLabel).Caption = mnNumber then
      开始
        (Controls[i] as TLabel).Left := Left;
        (Controls[i] as TLabel).Top := Top +8;
      结尾;
    结尾;
  结尾;

```

# java - 在 ADF 页面刷新中

> ID：14892799
> 
> 赞同：0
> 
> 时间：2013-02-15T10:33:58.660
> 
> 标签：java, oracle-adf, jdeveloper

我在一页中有三个表。当我单击一个按钮时，我只更新一个表。但是由于我在按钮事件上使用请求范围，因此页面会完全重新加载并且更新的值会丢失。您能否提出一个解决方案，以便在按钮事件后显示我的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:09:43.360

您是否尝试在按钮中设置 partialSubmit="true"？如果设置此属性，则必须在每个表中为按钮设置 PartialTriggers。

我希望能帮助你。

马科斯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T11:42:22.370

数据必须在 viewScope/pageFlowScope 中，具体取决于它是否在有界任务流中。

在您的按钮事件中，您需要更新 viewScope/pageFlowScope 中的数据，然后将您的表与这些数据绑定。

所有事件处理程序都可以在 backingBean 范围内，而不必在 requestScope 内。

# hadoop - HDFS 配置和用户目录的用途是什么？

> ID：14892806
> 
> 赞同：2
> 
> 时间：2013-02-15T10:34:14.080
> 
> 标签：hadoop, hdfs

我目前正在虚拟机中“玩弄”Hadoop（来自 cloudera 的 CDH4.1.3 映像）。我想知道的是以下内容（并且文档在这方面并没有真正帮助我）。

按照教程，我将首先格式化 NameNode - 好的，如果使用 cloudera 图像，这已经完成。同样，HDFS 文件结构已经存在。在 hdfs-site.xml 中，datanode 数据目录设置为：

```
/var/lib/hadoop-hdfs/cache/${user.name}/dfs/data 
```

这显然是在真正的分布式设置中应该将块复制到的位置。在 cloudera 教程中，有人被告知为每个用户（`/users/<username>`）创建 hdfs“主目录”，我不明白它们的用途。它们仅用于单节点设置中的本地测试运行吗？假设我确实有 PB 类型的数据不适合我的本地存储。这些数据必须立即分发，使本地“主目录”完全无用。

谁能告诉我，只是为了让我有一个直觉，一个拥有大量数据的真实 Hadoop 工作流会是什么样子？一开始我会运行什么样的不同节点？

主（JobTracker）及其从文件（我将把它放在哪里）允许主解析所有DataNode。然后是我的 NameNode，它跟踪块 ID 的存储位置。DataNodes 也承担着 TaskTracker 的责任。在配置文件中，包含 NameNode 的 URI——到目前为止我是正确的吗？然后配置中仍然存在`${user.name}`变量，如果我理解正确的话，它显然与 WebHDFS 有关，如果有人可以向我解释，这也很好。在运行示例中，方向往往被硬编码为

```
/var/lib/hadoop-hdfs/cache/1/dfs/data, /var/lib/hadoop-hdfs/cache/2/dfs/data and so on. 
```

所以，回到这个例子：假设我有我的磁带并且想将数据导入我的 HDFS（我需要将数据流式传输到文件系统，因为我缺乏本地存储来将其本地保存在单台机器上）。我将从哪里开始迁移过程？在任意 DataNode 上？在分发块的 NameNode 上？毕竟，我不能假设数据只是“在那里”，因为名称节点必须知道块 ID。

如果有人能很快详细说明这些主题，那就太好了：

1.  主目录的真正用途是什么？
2.  我是否先将数据迁移到主目录，然后再迁移到真正的分布式系统？
3.  WebHDFS 如何工作以及它对 user.name 变量的作用
4.  我如何将“大数据”即时迁移到我的 HDFS 中 - 或者即使它不是大数据，我如何以适当的方式填充我的文件系统（这意味着，这些块在集群中随机分布？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T08:30:01.943

> 主目录的真正用途是什么？

你在这里有一个小小的困惑。就像 /home 存在于 Linux 上的本地文件系统中，用户拥有自己的存储空间，/users 是 HDFS（分布式 FS）上的家庭挂载。本教程需要您以管理方式为您希望稍后运行数据加载和查询的用户创建一个主目录，以便他们获得足够的权限和对 HDFS 的存储访问。本教程不要求您在本地创建这些目录。

> 我是否先将数据迁移到主目录，然后再迁移到真正的分布式系统？

我相信我的上述答案应该为您澄清这一点。您应该在 HDFS 上创建您的主目录，然后将所有数据加载到该目录中。

> WebHDFS 如何工作以及它对 user.name 变量的作用

WebHDFS 是访问 HDFS 的多种方式之一。与 HDFS 对话的常规客户端需要使用 Java API。WebHDFS（以及 HttpFs）技术被添加到 HDFS 中，通过为 HDFS 提供 REST 前端，让其他语言拥有自己的 API 集。WebHDFS 允许用户身份验证，以帮助持久化权限和安全模型。

> 我如何将“大数据”即时迁移到我的 HDFS 中 - 或者即使它不是大数据，我如何以适当的方式填充我的文件系统（这意味着，这些块在集群中随机分布？

HDFS 为您解决的大部分问题是管理数据的分布。在将文件或数据流加载到 HDFS 时（通过 CLI 工具、Apache Flume 的接收器等），块由 HDFS 本​​身以理想的分布分布，并且分块也由它管理。您需要做的就是使用用户端的常规 FileSystem 样式 API，而忘记下面的内容 - 一切都为您管理。

# python - Python - Pygame for android 错误

> ID：14892807
> 
> 赞同：2
> 
> 时间：2013-02-15T10:34:15.803
> 
> 标签：python, build, pygame

我正在关注[pgs4a 的文档](http://pygame.renpy.org/android-packaging.html)，在构建部分我得到了`WindowsError [Error 2]`.
命令和回溯：

```
C:\Users\karuna\Desktop\Jython\Python\pgs4a-0.9.4>android.py build "C:\Users\karuna\Desktop\Jython\P
ython\pgs4a-0.9.4\mygame" release install

Updating build files.

Traceback (most recent call last):
  File "C:\Users\karuna\Desktop\Jython\Python\pgs4a-0.9.4\android.py", line 66, in <module>
    main()
  File "C:\Users\karuna\Desktop\Jython\Python\pgs4a-0.9.4\android.py", line 54, in main
    build.build(iface, args.argument[0], args.argument[1:])
  File "buildlib\build.py", line 301, in build
    build_core(iface, directory, commands)
  File "buildlib\build.py", line 221, in build_core
    subprocess.call([plat.android, "update", "project", "-p", '.', '-t', 'android-8', '-n', versione
d_name])
  File "C:\Python2.7 For Chintoo\lib\subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "C:\Python2.7 For Chintoo\lib\subprocess.py", line 679, in __init__
    errread, errwrite)
  File "C:\Python2.7 For Chintoo\lib\subprocess.py", line 893, in _execute_child
    startupinfo)
WindowsError: [Error 2] The system cannot find the file specified 
```

很明显，
我使用的是 Windows 7，并且有：

*   Python 2.7.3
*   JDK
*   安卓模拟器
*   我的 Sony Tipo 的设备驱动程序。

请帮忙！
顺便说一句，我宁愿先在我的手机上运行它。我正在考虑稍后转移到模拟器（教程完成后）。

这个问题更适合[https://android.stackexchange.com/](https://android.stackexchange.com/)吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-23T02:38:35.860

我不确定这对您来说是否仍然是一个问题，但我最近遇到了类似的问题并设法解决了它，所以我将在这里留下一个便条。

如果有人遇到这种错误，请转到 pgs4a 文件夹和 android-sdk 文件夹。在那里，运行 SDK Manager.exe 文件。您将看到工具列表和不同的 android 版本。尝试找到您正在使用的版本并安装“卸载”的所有内容。

我设法通过在我当前和以前的 Android 版本下安装所有内容来解决上述问题。希望这对遇到同样问题的人有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:20:26.750

将文件夹 android-sdk-windows 重命名为 android-sdk

# c# - .Fill 方法在哪里

> ID：14892816
> 
> 赞同：0
> 
> 时间：2013-02-15T10:35:04.987
> 
> 标签：c#, .net, datatable

我正在使用这个

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb; 
```

为什么没有[.Fill 方法](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)？

> “System.Data.DataTable”不包含“Fill”的定义，并且找不到接受“System.Data.DataTable”类型的第一个参数的扩展方法“Fill”（您是否缺少 using 指令或程序集引用?

我想用喜欢

```
DataTable dt = new DataTable();
dt.Fill(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T10:36:37.483

A`DataTable`不能填充自己。因此，您需要一个`DataAdapter`。

例如[`DbDataAdapter.Fill`](http://msdn.microsoft.com/en-us/library/905keexk%28v=vs.90%29.aspx)：

```
using(var con = new SqlConnection(connectionString))
using(var adapter = new SqlDataAdapter(sql, con))
{
    DataTable dt = new DataTable();
    adapter.Fill(dt);
    return dt;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T10:36:47.220

看起来你正在寻找[`DataAdapter.Fill`](http://msdn.microsoft.com/en-us/library/607k6dd0.aspx).

> 添加或刷新 DataSet 中的行以匹配数据源中的行。

`DataTable`没有`Fill`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T12:45:19.840

For fill data you have to use DataAdapter class.

nad for fill data to datatable or dataset use syntax as below.

```
SqlDataAdapter adapter= new SqlDataAdapter();

adapter.Fill(dt); 
```

For dataset

```
adapter.Fill(ds); 
```

If you are using OleDb for fill data hv to use

```
OleDbDataAdapter adapter= new OleDbDataAdapter(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T10:38:38.263

它在 DataAdapter 类中：[**MSDN: DataAdapter Class**](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.aspx)。

==> [DataAdapter.Fill 方法（数据集）](http://msdn.microsoft.com/en-us/library/377a8x4t.aspx)

# zend-framework - Zend 框架使用 ajax 更改元数据

> ID：14892825
> 
> 赞同：0
> 
> 时间：2013-02-15T10:35:55.067
> 
> 标签：zend-framework, jquery, meta

在我的 ZF 网站中，我获得了带有 ajax 调用的页面。每次进行新的 ajax 调用时，我都想更改元标记（作者、关键字、描述）。我将这些 setName() 方法放在 ajax 控制器中，但它没有填充元数据。

```
$this->headMeta()->setName('description', $description);
$this->headMeta()->setName('keywords', $keys);
$this->headMeta()->setName('author', $author); 
```

可能吗？正确的方法是怎样的？

# javascript - 快速区分数字和对象

> ID：14892826
> 
> 赞同：3
> 
> 时间：2013-02-15T10:35:59.547
> 
> 标签：javascript, performance

我在 JavaScript 中有一个由数字和容器（在本例中为数组）组成的复杂数据结构。存储和处理它的最快和/或最节省内存的方法是什么？是否有比 [ [ 1, 2], [3, 4] ] 需要类似于 typeof 的东西在扫描时区分树枝和树叶的不明显的、更好的速度和/或内存方面的东西？该结构非常大，大约有一百万个数字。

我已经设置了一个 jsperf 测试来评估一些区分数字和对象的方法，并且 typeof 似乎最快，除了在 Opera 和 IE 中：

[http://jsperf.com/typeof-number-vs-object](http://jsperf.com/typeof-number-vs-object)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:39:09.963

尝试：

```
isNaN(myVar) 
```

返回`true`id`myVar`不是数字，*否则*返回 false。

**[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isNaN)**

虽然，显然，这个功能不是完全没有错误的......（见我链接到的文档）

# javascript - 如何扩展 KineticJS 形状

> ID：14892827
> 
> 赞同：2
> 
> 时间：2013-02-15T10:36:05.233
> 
> 标签：javascript, canvas, kineticjs

对于 KineticJS 版本**4.0.0**或更低版本，形状扩展了一个类，并且可以通过

```
var MyCircle = Kinetic.Circle.extend({
    init : function(config) {
        this._super(config));
    },
    myFunc : function(){}
}); 
```

或者

```
Kinetic.MyCircle = function (config) {
    Kinetic.Circle.apply(this, [config]);
};
Kinetic.MyCircle .prototype = {
    myFunc: function () {}
};
Kinetic.GlobalObject.extend(Kinetic.MyCircle , Kinetic.Circle); 
```

在**4.0.1**版本中，他们删除了对类实用程序的依赖项，并实现了一个应该更快的自定义解决方案。

如何使用新解决方案扩展形状？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T13:12:05.753

Kinetic.GlobalObject 变成 Kinetic.Global (>4.0.1)，然后
Kinetic.Global 现在是**Kinetic.Util** (2013 版本)，这里有一个解决方案：

```
(function() {
    Kinetic.MyCircle = function(config) {
        this._initMyCircle(config);
    };

    Kinetic.MyCircle.prototype = {
        _initMyCircle: function(config) {
            Kinetic.Circle.call(this, config);
            },
        myFunc : function(){
        }
    };

  Kinetic.Util.extend(Kinetic.MyCircle, Kinetic.Circle);
})(); 
```

# javascript - 如何仅使单击的单元格可编辑，而不是单击行中的所有可编辑单元格-使用jqgrid？

> ID：14892832
> 
> 赞同：0
> 
> 时间：2013-02-15T10:36:19.403
> 
> 标签：javascript, jquery, jqgrid

目前，我在单击的可编辑行中获取所有单元格（可编辑：true），而不仅仅是单击的单元格。该表类似于此链接中的表：[http](http://www.ok-soft-gmbh.com/jqGrid/ClientsideEditing4.htm) ://www.ok-soft-gmbh.com/jqGrid/ClientsideEditing4.htm 。我已经浏览了链接：[http](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editing) ://www.trirand.com/jqgridwiki/doku.php?id=wiki:cell_editing ，但没有帮助（可能是由于我尝试的方式有错）而且尝试了stackoverflow相关问题中给出的答案（使用了属性：cellEdit：true，cellsubmit：“clientArray”）。

请帮助我使用上面的链接作为参考[http://www.ok-soft-gmbh.com/jqGrid/ClientsideEditing4.htm](http://www.ok-soft-gmbh.com/jqGrid/ClientsideEditing4.htm)（我认为主要是“onSelectRow”，“ondblClickRow”功能需要更新。我试过onSelectCell等.但失败了！）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:06:01.340

如果您需要使用单元格编辑，您必须包含`cellEdit: true`在 jqGrid 定义中。如果您使用本地数据类型，那么您应该另外使用[cellsubmit: "clientArray"](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editing#properties)。如果要在远程源上保存数据，则必须在服务器代码中实现编辑并指定`cellurl`jqGrid 的选项。[该文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editing#what_is_posted_to_the_server)描述了 jqGrid 在保存单元格时向服务器发送的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-22T20:40:33.113

我目前正在使用 Typescript 开发 Angular 2 应用程序，我有一个不同的需求，我希望能够单击网格中的一行，但只有一个单元格可编辑。我不喜欢用户必须单击实际单元格来编辑它的用户体验。相反，单击该行会突出显示该行，然后使一个单元格可编辑。这是一个屏幕截图：

[![在此处输入图像描述](../Images/c486f9184ed2d2019ed2cfad43dd77c5.png)](https://i.stack.imgur.com/B7Mqq.jpg)

诀窍是我需要在网格上将 cellEdit 设置为 false，然后在声明我的列模型数组时将单个列可编辑设置为 true，并为列的 editoptions 编写一个更改事件。我还必须为网格的 onSelectRow 事件编写代码，以跟踪所选的当前行并恢复所选的前一行。Typescript 代码片段如下：

```
 private generateGrid() {

let colNames = ['id', 'Name', 'Total', 'Assigned', 'Distributed', 'Remaining', 'Total', 'Assigned', 'Remaining', 'Expiration'];
let self = this;

// declare variable to hold Id of last row selected in the grid
let lastRowId;

let colModel = [
  { name: 'id', key: true, hidden: true },
  { name: 'name' },

  { name: 'purchasedTotalCount', width: 35, align: 'center' },
  { name: 'purchasedAssignedCount', width: 35, align: 'center' },
  { name: 'purchasedDistributedCount', width: 35, align: 'center' },
  { name: 'purchasedRemainingCount', width: 35, align: 'center' },
  // receivedTotalCount is the only editable cell;
  // the custom change event works in conjunction with the onSelectRow event
  // to get row editing to work, but only for this one cell as being editable;
  // also note that cellEdit is set to false on the entire grid, otherwise it would
  // require that the individual cell is selected in order to edit it, and not just
  // anywhere on the row, which is the better user experience
  { name: 'receivedTotalCount',
    width: 35,
    align: 'center',
    editable: true,
    edittype: 'text',
    editoptions: {
      dataEvents: [
        {
          type: 'change', fn: function(e) {
            //TODO: don't allow decimal numbers, or just round down
            let count = parseInt(this.value);
            if (isNaN(count) || count < 0 || count > 1000) {
              alert('Value must be a whole number between 0 and 1000.');
            } else {
              self.updateLicenses(parseInt(lastRowId), count);
            }
          }
        },
      ]
    }
  },
  { name: 'receivedAssignedCount', width: 35, align: 'center' },
  { name: 'receivedRemainingCount', width: 35, align: 'center' },
  { name: 'expirationDate', width: 45, align: 'center', formatter: 'date' }
];

jQuery('#licenseManagerGrid').jqGrid({
  data: this.childTenants,
  datatype: 'local',
  colNames: colNames,
  colModel: colModel,
  altRows: true,
  rowNum: 25,
  rowList: [25, 50, 100],
  width: 1200,
  height: '100%',
  viewrecords: true,
  emptyrecords: '',
  ignoreCase: true,
  cellEdit: false,  // must be false in order for row select with cell edit to work properly
  cellsubmit: 'clientArray',
  cellurl: 'clientArray',
  editurl: 'clientArray',
  pager: '#licenseManagerGridPager',
  jsonReader: {
    id: 'id',
      repeatitems: false
  },

  // make the selected row editable and restore the previously-selected row back to what it was
  onSelectRow: function(rowid, status) {
    if (lastRowId === undefined) {
      lastRowId = rowid;
    }
    else {
      jQuery('#licenseManagerGrid').restoreRow(lastRowId);
      lastRowId = rowid;
    }
    jQuery('#licenseManagerGrid').editRow(rowid, false);
  },
});
} 
```

此外，我希望转义键允许用户中止对单元格的更改，然后将单元格恢复到之前的状态。这是通过 Typescript 中的以下 Angular 2 代码完成的：

```
@Component({
  selector: 'license-manager',
  template: template,
  styles: [style],
  host: {
    '(document:keydown)': 'handleKeyboardEvents($event)'
  }
})

// handle keypress so a row can be restored if user presses Escape
private handleKeyboardEvents(event: KeyboardEvent) {
  if (event.keyCode === 27) {
    let selRow = jQuery('#licenseManagerGrid').jqGrid('getGridParam', 'selrow');
    if (selRow) {
      jQuery('#licenseManagerGrid').restoreRow(selRow);
    }
  }
} 
```

# javascript - 为句子中空间分离的单词创建单个链接

> ID：14892834
> 
> 赞同：1
> 
> 时间：2013-02-15T09:13:58.263
> 
> 标签：javascript, html, hyperlink

假设我有一个包含多个单词的句子，并且我想从该句子中的多个单词创建一个链接，这些单词彼此不相邻，因此当悬停在其中一个单词上时，悬停效果也将是适用于链接到同一地址的其他单词。

示例：我有一个名为 [link]fluffy[/link] 的 [link]dog[/link]。

单词“dog”和“Fluffy”将链接到完全相同的页面，如果将鼠标悬停在“dog”上，“Fluffy”也会突出显示。

我可以以某种方式仅使用 HTML（和 CSS）来完成此任务吗？如果没有，使用（最好是纯）JavaScript 的解决方案也可以。我想要一个有效的解决方案，即使我在一个句子中有几种不同类型的配对链接（尽管它们不一定必须成对），即使我有数百个带有这种链接的句子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:41:23.860

jQuery解决方案：http: [//jsfiddle.net/JhjuT/](http://jsfiddle.net/JhjuT/)

```
Grumpy <a class="link" href="#">wizards</a> make toxic brew for the evil <a class="link" href="#">Queen</a> and Jack.

$(".link").hover(
    function () {
        $(".link").addClass("linkhover");
    },
    function () {
        $(".link").removeClass("linkhover");
    }
);

.linkhover {
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:06:04.600

我认为 javascript 解决方案是您最好的选择。你几乎可以用 CSS 做到这一点。

```
<html>
<head>
<style>
.sentence:hover .word {background-color:red;}
</style>
<body>
<span class=sentence>I have a <span class=word>dog</span> called <span class=word>fluffy</span>.</span>
</body>
</html> 
```

但在这种情况下，当您将鼠标悬停在句子上的任何位置时，样式将应用于两个单词。

# iphone - MagicalRecord：如何将值导入相关实体

> ID：14892836
> 
> 赞同：2
> 
> 时间：2013-02-15T10:36:28.280
> 
> 标签：iphone, ios, core-data, magicalrecord

我正在使用一个 Web 服务，它返回如下示例所示的结果：

```
{
   "name":"Frank",
   "meals":[
      "cheeseburger",
      "lasagne"
   ]
} 
```

我的核心数据架构如下所示：

![核心数据关系法](../Images/b89e82b4a75fb6a76f2c88593fffa3d9.png)

使用 MagicalRecord 的`MR_importValuesForKeysWithObject`方法，我将如何设置将`meals`键映射到相关`Meals.name`属性？

之后我可以使用`for in`循环手动映射膳食，但只是想知道是否有办法`MR_importValuesForKeysWithObject`为我执行此操作？

基本上，我希望 JSON“膳食”数组中的每个对象都成为一个新的膳食实体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:28:26.290

覆盖`importMeals:`Person 对象并手动进行查找/创建/关联。

（更长的答案）通过 MagicalRecord 导入的每个属性都会在目标对象上调用 import(PropertyName)，通过实现它，您可以覆盖功能。

# windows - Windows HTTP 问题

> ID：14892838
> 
> 赞同：0
> 
> 时间：2013-02-15T10:36:33.733
> 
> 标签：windows, http

我使用 HTTP 协议将二进制数据发送到服务器（PUT 请求和 Content-Type：application/octet-stream）。直到最近，这一切都很好。但现在我在 Windows 上收到 504 http 错误（我在几个 Windows 机器上尝试过）。

我尝试做所有想象的事情，所以纠正这种行为。当我通过 Fiddler 捕获请求时。我看到完整的请求已发送到服务器，但服务器没有响应。

我从 Linux 机器发送了完全相同的请求，所以它仍然像以前一样工作正常。

另外我注意到，当正文请求中仅包含文字字符时，Windows mashine 可以正常工作（PUT 请求和 Content-Type：application/octet-stream）。

任何想法，我用这个做什么？是已知问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:18:03.950

我解决了这个问题。问题不在 Windows 上。这是随服务器内核版本（内核 3.0.23）一起提供的。当我更新内核（Ubuntu 服务器从 3.0.23 到 3.0.24 版本）时，它又可以工作了。

识别 TCP 包时最有可能出现的问题。

# ios - UITextView 顶部和底部的内部阴影

> ID：14892844
> 
> 赞同：-1
> 
> 时间：2013-02-15T10:36:57.057
> 
> 标签：ios, user-interface, uitextview

我是IOS开发的新手，我想在UIExView的顶部和底部创建阴影，基本上当人们滚动时会出现阴影..

任何帮助真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:46:54.837

我想说在询问之前寻找解决方案似乎是解决这个问题的更好方法。

[UIView层的内阴影效果？](https://stackoverflow.com/questions/4431292/inner-shadow-effect-on-uiview-layer)

[在 UITextView 上滚动内阴影](https://stackoverflow.com/questions/13653672/scrolling-inner-shadow-on-uitextview)

[如何将 UITextview 设置为喜欢圆角矩形文本字段？](https://stackoverflow.com/questions/1824463/how-to-style-uitextview-to-like-rounded-rect-text-field)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:48:09.133

使用Core-Graphics，这里有[教程](http://www.raywenderlich.com/2079/core-graphics-101-shadows-and-gloss)

# c++ - 对于各种编程语言和环境，静态变量通常意味着什么？

> ID：14892847
> 
> 赞同：5
> 
> 时间：2013-02-15T10:37:01.990
> 
> 标签：c++, objective-c, vb.net, static

静态变量通常是：（在大多数编程语言中）在程序的代码段上共享、持久化和分配

但这与静态这个词有什么关系？什么是静态的？我认为`static`手段不会改变？

例如，在 vb.net 中，static 被写入共享，这意味着无需对象实例化即可访问的成员函数。函数内的静态通常意味着变量的生命周期是整个程序的生命周期。似乎静态变量存储在计算机的代码部分。根据示例，我的理解是否正确？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-15T10:42:00.760

好吧，我认为关键字是合适的。这意味着您声明为静态的变量将在整个程序执行期间保持存储在同一位置。

> 我认为静态手段不会改变

这对应于`const`关键字。Const 意味着它不会改变， static 意味着它不会“移动”，因为它保持存储在同一位置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-15T11:01:44.653

一般来说，编程语言中的静态事物不会改变的是它是否活着。静态变量总是存在的；它们有一个实例，该实例在程序开始时或第一次可见时生成，并持续到程序结束。非静态变量来来去去，随着块的进入和离开，或者随着类实例的创建和销毁。

在 C++ 中，出于 C 兼容性的原因，静态应用于命名空间范围内的变量时，具有完全不相关的含义：这意味着该变量具有内部链接，而不是外部链接，并且在其他翻译单元中不可见。为什么在早期的 C 中采用静态这个词，我不知道；我只能猜测他们需要一些东西，并且不想引入新的关键字。（最初，在 C 的最早版本中，文件范围内的变量遵循 Fortran 命名公共块的规则：所有同名变量都引用同一个存储。）当然，回顾一下（20/20 事后诸葛亮） ，文件范围内的变量的默认值应该是内部链接，带有一个特殊的关键字 (`public`?) 说变量有外部联系。但这在 1970 年代初期就不那么明显了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T10:39:53.020

静态是指变量存储。在函数调用中，您声明的每个变量都被压入堆栈。与其他变量不同，静态变量不会被压入堆栈，它就像一个全局变量，在程序的整个执行过程中仍然存在，不同之处在于仅在声明的块内可见。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T10:40:48.893

我认为你只需要学习计算机科学中“静态”的含义，而不是将其与英语口语联系起来。特别是当它适用于变量和函数时，在 C 中的结果略有不同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T11:11:40.753

该词的定义来自[http://dictionary.reference.com/browse/static?s=t](http://dictionary.reference.com/browse/static?s=t)

1.  属于或以固定或静止状态为特征的。
2.  显示很少或没有变化：一个静态的概念；一种静态的关系。

静态变量是即使在超出范围后仍保持其状态的变量，而不是每次返回范围时都会重新初始化的非静态变量 - 因此可以考虑具有*“静止条件” ”*或显示*“没有变化”*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-09T05:29:04.410

如果可以避免，请不要为 C++ 使用静态。在任何现代语言中，静态只是意味着只有一个实例并且它永远不会被破坏。这与英语的含义相差不远，并且很好地导致了对 const/final/readonly 及其含义的讨论。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-09T05:46:40.903

静态变量的意思是，变量只有一个副本，即使你创建了类的多个实例。也就是说，指定类的所有对象都使用相同的内存位置。或者如果你想要一个例子，比如说，我们有两个线程。在第一个线程上，您创建一个进度条，在第二个线程上您需要更新它。在这种情况下，您可以在进度条的类中定义一个静态变量来存储进度并在每个线程中创建一个类的实例。一个线程用于初始化并在另一个中更改静态变量的值。由于两者都使用相同的副本，因此进度将在第一个线程中可用。所以静态意味着在创建新实例时不会改变其位置的东西..或者我们可以说保留其状态的东西;）等等等等

# google-drive-api - 如何为非创作者禁用我的 mimetype 的编辑功能

> ID：14892849
> 
> 赞同：0
> 
> 时间：2013-02-15T10:37:06.737
> 
> 标签：google-drive-api

对于我的应用程序，我不能让不是内容创建者的人编辑它。观看很好。

有没有办法在共享设置中禁用“可以编辑”和“是所有者”选项？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:05:58.177

我能想到的唯一方法是：

*   您控制的帐户实际上拥有该文件。
*   创建文档的用户在 Google Drive 中获得读取权限。
*   您的应用程序会跟踪哪个用户自己“创建”了文档。
*   文档创建者可以在您的应用程序中编辑文档，尽管您的应用程序实际上使用的是您自己的帐户，该帐户拥有该文件以保存更改。

# css - 使这个导航栏居中的最佳方式是什么？

> ID：14892851
> 
> 赞同：1
> 
> 时间：2013-02-15T10:37:08.023
> 
> 标签：css, center, nav

使这个导航栏居中的最佳方式是什么？

我知道如果我添加我可以居中

```
#nav ul {
  margin:0 auto; 
  width:720px;
} 
```

或者如果我删除`width`并添加`padding`到`#nav`，但这些似乎都不正确，因为如果我需要向导航栏添加另一个项目，我将需要更改数字。有任何想法吗？

这是我到目前为止的代码：

```
#nav { 
   background:url(../images/nav-background.jpg) repeat-x;
   height:50px;
   width:960px;
   text-transform:uppercase;
   position:fixed;
}

#nav ul li {
   display: table-cell;
   vertical-align:top;
   line-height:3.8em;
}

#nav li {
   display:inline;
   font-family: 'Philosopher', sans-serif;
   font-size:0.9em; 
   letter-spacing:0.1em;
   font-weight:700;
}

#nav li a { 
   color:#848484;
   text-decoration:none;
   padding:5px 8px;
}

#nav li a:hover {
   color:#fff;
   background-color:#636566;
}

.nav-separator {
   padding:0 2px;
}
#nav .logo a:hover {
  background:none;
}

  <div id="nav">
        <ul>
            <li><a href="lourenco.php">Lourenço</a><img class="nav-separator" src="images/nav-separator.jpg" /></li>
            <li><a href="areas-de-atuacao.php">Áreas de Atuação</a></li>
            <li class="logo"><a href="index.php"><img src="images/logo-lourenco-advogados.png" /></a></li>
            <li><a href="clientes.php">Clientes</a><img class="nav-separator" src="images/nav-separator.jpg" /></li>
            <li><a href="noticias.php">Notícias</a><img class="nav-separator" src="images/nav-separator.jpg" /></li>
            <li><a href="contato.php">Contato</a></li>
        </ul>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:46:24.370

您可以使用：

```
min-width: Apx; /* any value */
width: auto;
margin:0 auto; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:53:14.133

尝试：

```
 #nav {
    text-align: center;
 }    
#nav ul li {
    display: inline-block;
 } 
```

# java - 使用java删除文件

> ID：14892852
> 
> 赞同：0
> 
> 时间：2013-02-15T10:37:20.027
> 
> 标签：java, file

在我的`java`应用程序中，我`FilenameFilter`用来获取`zip`给定目录中的文件。我的目录结构如下所示。

```
D\:\MyFiles\data\dir1
D\:\MyFiles\data\dir2
D\:\MyFiles\data\dir3
D\:\MyFiles\data\dir4 
```

`zip`文件在`dir`文件夹中。我只给`D\\:\\MyFiles\\data``dir`给我的程序，它会查找以using开头的文件夹`FilenameFilter`，然后查找以`zip`on`dir`文件夹结尾的文件。

里面一个`for loop`我`new File`为每个`zip`文件创建对象并调用`delete()`删除它们，但它们没有被删除。

我已经使用打印文件路径`getPath()`方法打印了文件路径；输出如下所示。

```
D\:\MyFiles\data\dir1\a.zip
D\:\MyFiles\data\dir1\b.zip
D\:\MyFiles\data\dir2\b1.zip
D\:\MyFiles\data\dir3\d.zip 
```

然后我手动创建了一个`File`对象`File f = new File("D/:/MyFiles/data/dir1/a.zip")`并尝试删除。它成功了。

如何删除文件？我怎样才能给出正确的路径？

**更新**

这是我正在使用的代码：

```
// this contains folders start with 'dir' in 'D:\MyFiles\data\'
    Vector<String> dirList = utl.identifyDir(conf);

File dir;
for (int i = 0; i < dirList.size(); i++) {

// in my properties file ITEM_FOLDER is written as ITEM_FOLDER=D\:\\MyFiles\\data
//  LOG.fine(conf.readConfig(Configuration.ITEM_FOLDER)); returns D:\MyFiles\data

    dir = new File(conf.readConfig(Configuration.ITEM_FOLDER)
            + File.separator + dirList.get(i));

    // this contains all the files ends with 'zip' in 'dir' folders in 'D:\MyFiles\data\'
    Vector<String> zipFiles = utl.identifyZipFiles(dir);

    for (int x = 0; x < zipFiles.size(); x++) {

        /* delete */

        File sourcePath = new File(
                conf.readConfig(Configuration.ITEM_FOLDER)
                        + File.separator + dirList.get(i)
                        + File.separator + zipFiles.get(x));

            boolean sp = sourcePath.delete();

            LOG.fine("sourcePath : " + sourcePath.getPath() + " : "
                    + sp);

                // one of LOG prints is D:\MyFiles\data\dir3\d.zip : false

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:19:38.333

阅读您的更新后，我认为这里有两件事可能发生。

1.  你的应用程序中仍然有一些东西是开放的。您没有碰巧使用 FileInputStream 或任何东西吗？

2.  另一个过程是保持 .zip 忙碌。你打开那​​个文件了吗？尝试关闭资源管理器窗口或类似的东西。

编辑：来自其他用户的清单：

*   检查您的路径是否正确，例如`file.exists()`返回什么？
*   检查您是否有权以运行您的应用程序的用户身份删除文件
*   检查您的代码中是否没有打开文件的句柄（例如，您是否刚刚从中读取并没有关闭输入流？）
*   检查您没有在桌面应用程序中打开文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:52:11.903

当您创建一个新的文件对象进行测试时，与使用`getPath`. 请注意路径名中的所有斜杠是 \ 而不是 /。

# r - Integer64 类无法在 reshape2 熔化功能中存活

> ID：14892857
> 
> 赞同：9
> 
> 时间：2013-02-15T10:37:51.337
> 
> 标签：r, class, dataframe, reshape2

我不知道这是一个`integer64`（来自`bit64`）问题，还是一个融化问题（`reshape2`来自：

```
library(bit64)
library(reshape2)

DF = data.frame(I =letters, Num1 = as.integer64(1:26), Num2 = as.integer64(1:26))
DFM = melt(DF, id.vars = "I")

sapply(DF, class)
sapply(DFM, class) 
```

给出：

```
> sapply(DF, class)
          I        Num1        Num2 
   "factor" "integer64" "integer64" 
> sapply(DFM, class)
        I  variable     value 
 "factor"  "factor" "numeric" 
```

并且因为 integer64 是 double 下面，数据被“损坏”

```
> DF
   I Num1 Num2
1  a    1    1
2  b    2    2
3  c    3    3
4  d    4    4
5  e    5    5
...
> DFM
   I variable         value
1  a     Num1 4.940656e-324
2  b     Num1 9.881313e-324
3  c     Num1 1.482197e-323
4  d     Num1 1.976263e-323
5  e     Num1 2.470328e-323
6  f     Num1 2.964394e-323 
```

这是什么原因造成的？这是`integer64`问题还是`melt`问题？创建类时可以做些什么来避免这种事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T11:28:47.247

这似乎是该软件包的限制，[**在第 9 页**](http://cran.r-project.org/web/packages/bit64/bit64.pdf)的文档中也提到了这一点。例如：

```
x <- data.frame(a=as.integer64(1:5), b=as.integer64(1:5))
> x
#   a b
# 1 1 1
# 2 2 2
# 3 3 3
# 4 4 4
# 5 5 5

> unlist(x)

#            a1            a2            a3            a4            a5            b1 
# 4.940656e-324 9.881313e-324 1.482197e-323 1.976263e-323 2.470328e-323 4.940656e-324 
#            b2            b3            b4            b5 
# 9.881313e-324 1.482197e-323 1.976263e-323 2.470328e-323 

> as.matrix(x)
#                  a             b
# [1,] 4.940656e-324 4.940656e-324
# [2,] 9.881313e-324 9.881313e-324
# [3,] 1.482197e-323 1.482197e-323
# [4,] 1.976263e-323 1.976263e-323
# [5,] 2.470328e-323 2.470328e-323

x <- as.integer64(1:5)

> is.vector(x)
# [1] FALSE

> as.vector(x)
# [1] 4.940656e-324 9.881313e-324 1.482197e-323 1.976263e-323 2.470328e-323 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T11:29:28.930

重置课程似乎“纠正”了结果，见下文。但是，正如讨论中提到的，如果数值还包含除`integer64`.

```
> class(DFM$value) <- "integer64"
> DFM
   I variable value
1  a     Num1     1
2  b     Num1     2
3  c     Num1     3 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T11:03:59.660

我也可以重现。

不是解决方案，但问题似乎发生在以下`melt.data.frame`函数行：

```
value <- unlist(unname(data[var$measure])) 
```

在您的示例中，这导致：

```
unlist(unname(DF[c("Num1","Num2")])) 
```

并且`unlist`调用改变了数据的类别。正如帮助页面所说：

```
 The output type is determined from the highest type of the
 components in the hierarchy NULL < raw < logical < integer < real
 < complex < character < list < expression, after coercion of
 pairlists to lists. 
```

# awk - 如何强制AWK停止应用规则？

> ID：14892859
> 
> 赞同：1
> 
> 时间：2013-02-15T10:38:09.217
> 
> 标签：awk

我希望 AWK 处理我的文件，并且只更改一些行。但它只打印规则匹配的行。所以我添加了一条`/*/ {print $0}`规则。但后来我有一个重复。

```
awk '/rule 1/ {actions 1;} /*/ {print $0}' file.txt 
```

我希望输出中的所有行都更改了“规则 1”行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:49:14.290

在脚本末尾添加a `1`，强制`awk`返回true，这具有默认启用打印所有行的效果。例如，以下将打印文件中的所有行。但是，如果该行包含单词`rule 1`，则只会打印该行的第一个字段。

```
awk '/rule 1/ { print $1; next }1' file 
```

该单词`next`跳过处理该特定行的其余代码。您可以应用您想要的任何操作。我只是选择了`print $1`。HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:43:27.583

按照 Ed Norton 的最新解释，我将做一个大的编辑。

*   正如 Ed Morton 所指出的，它甚至可以简化为：用特定图案改变线条，然后打印所有线条

    awk '/regex1/ {actions_1} 1' file.txt

    （请参阅下面的评论，了解为什么它比我提出的更可取）

*   为了记录，有一些方法可以跳过当前行的其余处理，例如 :`continue`或者`break`它是否在循环中，或者`next`它是否在主循环中。

参见例如：[http ://www.gnu.org/software/gawk/manual/html_node/Next-Statement.html#Next-Statement](http://www.gnu.org/software/gawk/manual/html_node/Next-Statement.html#Next-Statement)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:55:33.733

或者将动作 1 的结果赋值给 $0：

```
awk '/rule 1/{$0=actions 1}1' file.txt 
```

例如：

```
awk '/rule 1/{$0=$1}1' file.txt 
```

# regex - 如何在visual-studio中使用正则表达式查找重复字符？

> ID：14892861
> 
> 赞同：0
> 
> 时间：2013-02-15T10:38:11.643
> 
> 标签：regex, visual-studio

例子

`'abcdeeeeefghi'` 重复`'[eeeee]'`应该匹配

`'abbdefgiijklmmn'` 重复`'[bb]'`，`'[ii]'`并且`'[mm]'`应该匹配

`'abcedefegehe'` 在这种情况下不匹配

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:54:13.803

在[Visual Studio 2010](http://msdn.microsoft.com/en-us/library/vstudio/2k3te2cs%28v=vs.100%29.aspx)中，使用以下正则表达式：

```
{:c}\1+ 
```

（花括号在 VS2010 中用于捕获组而不是标准括号，并`:c`表示字母字符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:49:40.433

```
{:c}\1+ 
```

您必须使用`+`, 而不是匹配零个或多个，因此`*`将匹配单个事件。`*``{:c}\1*`

`:c`用于指定字符类，因此您不会匹配重复的空格或标点符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:47:14.227

我认为`(.)\1+`会完成这项工作。

它将一个模式与一个字符（任何字符）匹配，然后它自身至少出现一次。`\1`用于反向引用第一个捕获组（字符）。

# javascript - 为什么 JavaScript 函数在 .NET 操作之前触发？

> ID：14892867
> 
> 赞同：0
> 
> 时间：2013-02-15T10:38:37.110
> 
> 标签：javascript, jquery, asp.net-mvc

我注意到，当页面上的链接具有 JS onclick 函数和 MVC 操作方法时，JS 函数会在操作之前触发。

1.  想知道总是这样吗？

2.  浏览器为什么/如何运行 JS 和后端方法？

3.  我可以先运行后端方法，但仍想触发 JS 功能吗？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:41:51.303

> 想知道总是这样吗？
> 
> 浏览器为什么/如何运行 JS 和后端方法？

客户端 JavaScript 在客户端的页面内运行。服务器端 .NET 代码在服务器上运行并生成 HTML 文档（或其他资源）。

要运行服务器端代码，浏览器必须发出 HTTP 请求。

发出 HTTP 请求的最简单方法是离开当前页面并从服务器加载新页面（通过链接或提交表单）。

由于客户端 JavaScript 在页面中运行，因此在浏览器离开它运行的页面后它就无法运行。

> 我可以先运行后端方法，但仍想触发 JS 功能吗？

您可以从 JavaScript 发出 HTTP 请求（在执行其他 JS 操作之前），而不是离开当前页面。这通常[由`XMLHttpRequest`对象](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)完成，称为 Ajax。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:53:37.853

```
Can I run backend method first, but still want to fire the JS function? 
```

***前两个答案已经很好回答了。对于第三个，您可以尝试 Jquery Ajax-***

```
function SomeFunction(){     

$.ajax({
                    type: 'POST',
                    url: "@Url.Content("Controller/ActionResult")",    
                    data : {                          
                              *yourparameter:value*   //data
                           },           
                    dataType: 'json',
                    success:function(result)
                    {
                      //javascript stuff                     
                    }
           });
}

<a href='#' onclick="return SomeFunction();">ClickHereToSee</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T10:40:39.947

> 浏览器为什么/如何运行 JS 和后端方法？

1.  服务器端代码需要 a`request`来返回`response`. HTTP 适用于`Request`和`Response`架构。基本上客户端发出请求以获得响应（即结果或所需数据）

无论您`postback or return true`对服务器做什么，它都会执行服务器端方法。

```
<a href='#' onclick="return SomeFunction();">ClickHereToSee</a> 
```

这里的返回值是函数返回的值，如果你返回真值，它将转到服务器方法，如果你返回假，它将阻止默认操作。

> 我可以先运行后端方法，但仍想触发 JS 功能吗？

你可以。使用阿贾克斯。基本上 Ajax 请求是 XMLHTTPRequest。用于更新部分部分。

# java - 在这个项目中添加另一个计数器系统，不会工作

> ID：14892869
> 
> 赞同：1
> 
> 时间：2013-02-15T10:38:41.633
> 
> 标签：java, android, button, count, imageview

对，我在这个项目中有一个计数器，它所有的工作，但我试图在屏幕底部放置另一个计数器，它会做同样的事情，但会在另一个计数上工作。所以会有两个计数器计数不同，但由于应用程序保存数据，我无法弄清楚如何去做。

**xml代码：**

```
<TextView
    android:id="@+id/TextViewCount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />

<Button
    android:id="@+id/ButtonCount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/TextViewCount"
    android:layout_alignRight="@+id/TextViewCount"
    android:layout_marginBottom="22dp"
    android:text="Count" /> 
```

**主要代码：**

```
package com.example.counter;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
 // Private member field to keep track of the count
 private static int mCount = 0;

private TextView countTextView;
private Button countButton;
public static final String PREFS_NAME = "com.example.myApp.mCount";
private SharedPreferences settings = null;
private SharedPreferences.Editor editor = null;

    /** ADD THIS METHOD **/
    @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);  
      setContentView(R.layout.main);
      countTextView = (TextView) findViewById(R.id.TextViewCount);
      countButton = (Button) findViewById(R.id.ButtonCount);

      countButton.setOnClickListener(new View.OnClickListener() {
          public void onClick(View v) {
              mCount++;
              countTextView.setText("Count: " + mCount);
              editor = settings.edit(); 
              editor.putInt("mCount", mCount);
              editor.commit();
          }
      });
    settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);

     }

    @Override
    public void onPause() {
      super.onPause();  
    }

    @Override
    public void onResume() {
      super.onResume();  
      mCount = settings.getInt("mCount", 0);
      countTextView.setText("Count: " + mCount);
    }
    } 
```

# capistrano - Capistrano RBENV 路径生成错误：失败：“env PATH=/home/user_with_rbenv/.rben

> ID：14892872
> 
> 赞同：2
> 
> 时间：2013-02-15T10:38:46.173
> 
> 标签：capistrano, rbenv

我有 2 个 SSH 用户。1 安装了 rbenv。

我看过关于部署到 VPS 的 railscast，一些用户通过添加 rbenv 路径解决了这个问题。

```
set :default_environment, {
'PATH' => "/home/user_with_rbenv/.rbenv/shims:/home/user_with_rbenv/.rbenv/bin:$PATH"
} 
```

我正在从未`.rbenv`包含在其`/home/user`文件夹中的用户进行部署。

我收到以下错误：

```
 ←[2;37mcommand finished in 117ms←[0m
failed: "env PATH=/home/user_with_rbenv/.rbenv/shims:/home/user_with_rbenv/.rbenv/bin:$PATH sh -
c 'cd -- /var/www/user_with_rbenv/releases/20130215102746 && bundle exec rake RAILS_ENV=
production RAILS_GROUPS=assets assets:precompile && cp -- /var/www/app/share
d/assets/manifest.yml /var/www/app/releases/20130215102746/assets_manifest.y 
```

`/home/user_with_rbenv/.rbenv`是 rbenv 的绝对路径

路径是：

```
$ $PATH
-sh: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games: not found 
```

# css - 媒体查询中未设置元素的不透明度

> ID：14892873
> 
> 赞同：1
> 
> 时间：2013-02-15T10:38:48.133
> 
> 标签：css

再会

我正在设置`opacity`2 个元素，一个`li`元素和一个`image`元素。在`hover`效果上，我消除了不透明度。

**问题：**我正在使用媒体查询在手机上显示我的网站。问题是，当我为 设置媒体查询时`1024px`，我想`opacities`完全删除它，但是当视口低于 1024px 时它不会触发 ...刷新

这是为什么：

代码：

HTML：

```
 <div id="app" class="span3">              
           <ul>
               <li id="apple"><a href="#" title="PartyAt for iPhone and iPad"><img src="images/apple.png" /></a></li>
               <li id="android"><a href="#"><img alt="PartyAt Android app on Google Play" src="images/android.png" /></a></li>                     
           </ul>
     </div>

 and

 <div id="social" class="row-fluid">
        <div class="span7"> 
            <div id="app2">              
                <a href="https://itunes.apple.com/za/app/partyat/id597807299?mt=8" title="PartyAt for iPhone and iPad"><img src="images/apple.png" /></a>
                <a href="https://play.google.com/store/apps/details?id=io.ik.partyat"><img alt="PartyAt Android app on Google Play" src="images/android.png" /></a>        
            </div>              
        </div>      
        <div class="span5">
            <a href="" title="PartyAt SA facebook page" target="_blank"><img src="images/fb.png" border="0" /></a>
            <a href="" title="PartyAt SA twitter page" target="_blank"><img src="images/twitter.png" border="0" /></a>             
        </div>
 </div> 
```

CSS：

```
#app ul li{
        opacity:0.7;
        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";
        filter:alpha(opacity=70);
        padding-bottom: 15px;
    }

 #social .span5 img {
        opacity: 0.7;
        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";
        filter:alpha(opacity=70);
    } 
```

媒体查询：

```
@media screen and (max-width: 1024px;){
 #app ul li {
        opacity:1;
        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
        filter:alpha(opacity=100);
        padding-bottom: 15px;
        }

 #social .span5 img {
        opacity: 1;
        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
        filter:alpha(opacity=100);
 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:55:40.340

您的媒体查询可能正在工作，但在那之后，您将覆盖它：

```
@media screen and (max-width: 1024px;){
    /* your custom styles... */
    #app ul li { opacity:1; }
}

/* normal styles */
#app ul li { opacity:0.7; } 
```

所以你可以使用`!important`来避免冲突：

```
#app ul li { opacity:1 !important; } 
```

**警告**`!important`：如果有更好的解决方案，您不应该使用。请阅读以下内容：

当两个 CSS 规则发生冲突时，优先级顺序为：

1.  `!important`具有最高优先级的规则
2.  内联样式更重要（例如`<div class="someclass" style="inline style"></div>`，比普通样式
3.  更具体的规则 > 不太具体的 ( `#one .example tag .yeah`> `.yeah`)
4.  如果两条规则具有相同的优先级，则最后应用的规则获胜

所以，检查你的 CSS 看看发生了什么。也许您可以将媒体查询移到样式表的末尾...

如果您仍然有问题，请发布一个完整的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T05:13:47.000

检查您是否对同一项目进行了多次调用。这就是发生在我身上的事。它们都堆叠在一起，形成了一个坚固的物品！

# php - MYSQL 关闭连接不能停止插入活动

> ID：14892874
> 
> 赞同：3
> 
> 时间：2013-02-15T10:38:50.640
> 
> 标签：php, mysql, database, insert

```
<?php
header('Content-Type: text/html; charset=utf8');
$dbhost = '192.168.1.23';
$dbuser = 'demouser01';
$dbpass = 'demo*PW';
$dbname = 'testdb1';
$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die('Error with MySQL connection');
mysql_select_db($dbname);
mysql_query("SET NAMES 'utf8'");
mysql_query("SET CHARACTER_SET_CLIENT='utf8'");
mysql_query("SET CHARACTER_SET_RESULTS='utf8'");
if(isset($_POST['start'])) {
  $chi = 'chiiiii';
  $id = 1;
  for ($i = 1; $i <= 99999999999; $i++) {
    $eng = substr(str_shuffle(str_repeat("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", 5)), 0, 1024);
    $math = substr(str_shuffle(str_repeat("1234567890", 6)), 0, 16);
    $sql = "INSERT INTO test_tb (id,chi,eng,num) VALUES (".$id.",'".$chi."','".$eng."',".$math.")";
    $result = mysql_query($sql) or die('MySQL query error');
    $id++;
  }
  $id = 0;
  sleep(60);
  mysql_close($conn);
} else if(isset($_POST['stop'])) {
  mysql_close($conn);
}
?>
<form action="<?=$_SERVER['PHP_SELF'];?>" method="post">
  <input type="submit" name="start" value="Start Insert">
  <input type="submit" name="stop" value="Stop Insert">
</form> 
```

网站上有两个按钮，插入重复插入一条记录，停止插入。但是，我尝试使用 MySQL 关闭连接，它会在 PHP 中停止运行，但活动仍然存在。插件仍在继续执行。如何解决问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:55:43.580

此页面中的每个答案都围绕一个点：

*   在几个 PHP http 请求处理程序之间共享一些东西

当然，主要的问题是 php 是一个[什么都没有](http://zef.me/883/the-share-nothing-architecture)的东西。

所以有些人建议使用会话，这可能很难做到，因为在关闭之前不会重新读取会话，并且您可能很容易覆盖会话中的数据。其他人建议共享内存或 APC。

我们说的是某种外部[信号量](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)。当然，解决方案不是关闭连接，而是打破外部信号的循环。

但是你已经有了一个大的、简单的、也许太明显的共享系统。**您的数据库**连接。

只需在数据库中检查循环指令的早期结束。

数据库通常为此任务提供**咨询锁系统。**例如使用[GET_LOCK](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_get-lock)和[RELEASE_LOCK](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_release-lock)指令。在主插入循环的每次迭代中使用[IS_FREE_LOCK](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_is-free-lock)并通过停止操作获取此锁定将是一种方法。对于释放锁的问题，可能是在来自所有记录的插入循环的另一个信号之后，或者在一段时间之后。但您也可以管理自己的基于表格的系统。

咨询锁系统的一个“优点”是它们忽略事务。如果您构建自己的基于表的系统（如果不是可序列化的事务，则可以），使用事务您必须确保其他事务的写入在您的范围内可用。

使用数据库在 PHP 实例之间共享信息通常是 LAMP 中的默认情况，并且您可以保证在您的插入情况下使用此工具，而 APC 不是这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T11:58:55.437

由于 PHP 不允许您在请求之间共享资源 (AFAIK)，因此您可以通过以下几种方法来实现在另一个请求中停止进程的能力：

首先添加这一行：

```
if ( isset ($_POST['start']) ) {
    $_SESSION['continue'] = true; 
```

然后用 while 替换你的 for 语句（看来你不关心迭代次数，如果是这样你可以改变这种行为）：

```
for ($i = 1; $i <= 99999999999; $i++) { 
```

用。。。来代替：

```
while ( $_SESSION['continue'] ) 
```

而不是关闭连接以停止插入，而是这样做：

```
mysql_close ($con) 
```

将更改为：

```
$_SESSION['continue'] = false; 
```

注意：不要忘记在脚本开头调用 session_start ()。就这样。

我假设您想从同一个会话中停止页面，如果不是这种情况，您可以改用 ACP 或 SHM。例如：

代替：

```
$_SESSION['continue'] = true 
```

和：

```
apc_store( 'continue', true ); 
```

和

```
while ( $_SESSION['continue'] ) 
```

和：

```
while ( acp_fetch ('continue') ) 
```

和

```
$_SESSION['continue'] = false; 
```

和：

```
apc_store( 'continue', false ); 
```

完毕！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T20:21:12.380

正如已建议的那样：

*   在您当前的代码中，您实际上正在关闭一个不同的连接（在`if(isset($_POST['stop']))`分支中）

*   您不能跨 PHP 脚本共享与 MySQL 的连接，因为您不能在会话中存储资源

但是，您可以存储连接[*id*](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_connection-id)并从另一个脚本中[*终止此连接：*](http://dev.mysql.com/doc/refman/5.5/en/kill.html)

```
$conn = mysqli_connect($dbhost, $dbuser, $dbpass);

if(isset($_POST['start'])) {

    // store current connection ID
    // store an array of connection ID's in case several connections may run simultaneously
    $result = mysqli_query($conn, 'SELECT CONNECTION_ID()');
    $row = mysql_fetch_row($result);
    $_SESSION['connection_id'] = $row[0];

    // close session file
    // or else concurrent scripts using the same session will be blocked
    session_write_close();

    // do actual work here
    sleep(10);

    // keep in mind the connection may be killed from another script at any time, e.g.
    if (mysqli_query("...") == false) {
        // connection was probably killed
    }

    // reopen session (optional, do it only if you need your session data later)
    session_start();

} else if(isset($_POST['stop'])) {

    // kill pending connection(s)
    mysqli_kill($conn, $_SESSION['connection_id']);
    // equivalent query in pure (My)SQL : 'KILL ' . $_SESSION['connection_id']        
} 
```

而不是`KILL [connection_id]`，您可以使用`KILL QUERY [connection_id]`. 这将终止任何正在运行的查询，但不会关闭连接（但在您的情况下，您可能希望完全关闭连接）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T06:07:14.740

Here is a complete solution:

```
<?php
    header('Content-Type: text/html; charset=utf8');

    $dbhost = '192.168.1.23';
    $dbuser = 'demouser01';
    $dbpass = 'demo*PW';
    $dbname = 'testdb1';

    $SHMKEY = ftok ( __FILE__, 'a');
    $SHMID  = shm_attach ( $SHMKEY );

    if ( !shm_has_var ( $SHMID, 1 ) ) {
      shm_put_var ( $SHMID, 1, true );
    }

    $conn = mysql_connect($dbhost, $dbuser, $dbpass) or die('Error with MySQL connection'); 
    mysql_select_db($dbname);

    mysql_query("SET NAMES 'utf8'");
    mysql_query("SET CHARACTER_SET_CLIENT='utf8'");
    mysql_query("SET CHARACTER_SET_RESULTS='utf8'");

    if(isset($_POST['start'])) { 
      $chi = 'chiiiii';

      $id = 1;

      // for ($i = 1; $i <= 99999999999; $i++) {
      while ( shm_get_var ( $SHMID, 1) ) { 

        $eng = substr(str_shuffle(str_repeat("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", 5)), 0, 1024);

        $math = substr(str_shuffle(str_repeat("1234567890", 6)), 0, 16);
        $sql = "INSERT INTO test_tb (id,chi,eng,num) VALUES (".$id.",'".$chi."','".$eng."',".$math.")";
        $result = mysql_query($sql) or die('MySQL query error');
        $id++;
      }

      $id = 0;
      shm_detach ( $SHMID );
      sleep(60);

      mysql_close($conn);
    }

  else if(isset($_POST['stop'])) {
    shm_put_var ( $SHMID, 1, false );
    // mysql_close($conn);
  }
?>

<form action="<?=$_SERVER['PHP_SELF'];?>" method="post">
  <input type="submit" name="start" value="Start Insert">
  <input type="submit" name="stop" value="Stop Insert">
</form> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T10:47:31.307

PHP 脚本的每次调用都会打开它自己的与 MySQL 的连接，并且它们不会相互干扰。一个例外是使用打开的连接`mysql_pconnect()`：它们保持打开并将被共享，但也*不能*使用 mysql_close() 关闭。

**结论：**您尝试做的事情不会奏效（无论如何都是个坏主意）。

相反，您可能想要的是为您的插入创建一个后台任务并检查那里的中断消息（这可能就像一个`.STOP[PID]`带有`[PID]`= 进程 ID 的空文件一样简单）。

**更新：**

> 我可以不使用 APC 吗？

是的，如果安装了 APC 扩展，您*可以将 APC 用于此消息。*情况并非如此，因此出现此错误：

> 在第 31 行调用 /home/ext/library/public/testdb/test.php 中未定义的函数 acp_fetch()

您对服务器有 root 访问权限吗？然后你可以自己安装扩展：

```
sudo pecl install apc 
```

如果此命令不起作用，则需要先获取 PECL 安装程序，请参见此处：[sudo pecl install apc 返回错误](https://stackoverflow.com/questions/4720666/sudo-pecl-install-apc-returns-error)

# c++ - 多次调用单个测试 - Google 测试

> ID：14892876
> 
> 赞同：9
> 
> 时间：2013-02-15T10:38:54.483
> 
> 标签：c++, testing, googletest, random-testing

我正在尝试在我正在开发的软件中进行一些随机测试。
我有一个用随机值初始化的夹具，因此，每个测试都会有不同的输入。

此外，我想要多次运行其中一个测试（我希望每次执行时都会随机初始化夹具），在谷歌测试中是否可能？我需要它在代码中，而不是使用参数或类似的东西。

我正在寻找类似`invocationCount`JUnit 的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T14:15:01.757

像这样的东西怎么样，使用一个未使用的[参数](https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#user-content-value-parameterized-tests)和 Range()

```
class Fixture : public ::testing::TestWithParam<int> {
    //Random initialisation
};

TEST_P(Fixture, Test1){}

INSTANTIATE_TEST_CASE_P(Instantiation, Fixture, ::testing::Range(1, 11)); 
```

`Test1`将被调用 10 次（范围结束，11，不包括在内），每次都会创建一个新的夹具。

# java - 如何在没有对话框的情况下判断使用 java 将打印多少页

> ID：14892880
> 
> 赞同：2
> 
> 时间：2013-02-15T10:39:06.437
> 
> 标签：java, printing

大家好，我正在使用java打印机api，到目前为止，我已经配置了以下所有设置：

```
aset.add(new Copies(p));
aset.add(MediaSizeName.ISO_A4);
aset.add(Sides.DUPLEX);
aset.add(OrientationRequested.PORTRAIT); 
```

这配置了打印机的设置，但是否可以知道将打印多少页？

# sql - oracle sql日期比较没有按预期工作

> ID：14892883
> 
> 赞同：2
> 
> 时间：2013-02-15T10:39:14.800
> 
> 标签：sql, oracle, select, oracle-sqldeveloper

我有一个带有“insert_date”列的表 X。此列是 od 类型 DATE 并且所有记录仅包含一个值：“17-JAN-13”。我希望以下查询根本不返回任何结果：

```
SELECT insert_date
FROM X
  WHERE ("X"."INSERT_DATE" IS NOT NULL
  AND NOT (("X"."INSERT_DATE" = to_date('2013-01-17', 'yyyy-mm-dd')
  ))) 
```

但我得到的是许多“17-JAN-13”记录。我的查询有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T10:41:46.303

Oracle`DATE`列也包含时间（尽管它们的名称）。您现有行的时间可能不同于`00:00:00`（“分配”给您使用该`to_date()`函数创建的日期）。

您需要使用“删除”列的时间部分`trunc()`

```
AND NOT (trunc(X.INSERT_DATE) = to_date('2013-01-17', 'yyyy-mm-dd')) 
```

虽然我更喜欢使用`<>`而不是`NOT`运算符：

```
AND (trunc(X.INSERT_DATE) <> to_date('2013-01-17', 'yyyy-mm-dd')) 
```

（但这只是*个人*喜好。我认为它使条件更易于阅读）。

所以你的完整陈述是：

```
SELECT insert_date
FROM X
  WHERE trunc(X.INSERT_DATE) <> to_date('2013-01-17', 'yyyy-mm-dd') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:18:00.467

您可以在比较时截断时间部分，也可以只提取所需的部分，`DD-MON-YYYY`例如

```
SELECT insert_date FROM X 
WHERE X.INSERT_DATE IS NOT NULL and to_char(x.INSERT_DATE,'DD-MON-YYYY') <> '17-JAN-2013'; 
```

# jquery - 动态加载图像作为画布背景。我该怎么做？

> ID：14892884
> 
> 赞同：0
> 
> 时间：2013-02-15T10:39:23.910
> 
> 标签：jquery, html, css

我愿意创建一个可以在我的页面上动态加载图像的网页。这还不是全部……

我想在每个 div 中动态创建“<div...”，我必须创建一个画布并从所选文件夹中设置背景图像。

这些元素的创建将取决于所选文件夹中的图像数量。所有图像都应显示为画布的背景。每个画布将只有一个图像。

我只想使用这些东西来做到这一点：

1.  HTML5
2.  CSS3
3.  jQuery

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:55:34.133

您可以使用 jQuery 轻松做到这一点：

**html**

```
<a href="#" class="changeFolder" data-folder="audio">Audio</a>
<a href="#" class="changeFolder" data-folder="video">Video</a>
<div id="folder">
    <!-- your canvas -->
</div> 
```

**jQuery**

```
$(document).on('click', '.changeFolder', function(e) {
   e.preventDefault();
   var folder = $(this).data('folder'),
       $folderCanvas = $('#folder');

    if(folder == 'video')
        $folderCanvas.css({'background-image': 'url(audio-img)'});
    else if(folder == 'audio')
        $folderCanvas.css({'background-image': 'url(video-image)'});                   
}); 
```

见[小提琴](http://jsfiddle.net/soyuka/nce7C/)

在服务器端，您应该解析文件夹并找到一些图像，然后使用[Ajax](http://api.jquery.com/jQuery.ajax/)调用脚本。如果是这样，我可能误解了您的问题，请发表评论。

注意：我使用的是最新版本的 jQuery。

# vim - Vim：使用先前的参数重新运行 make 命令

> ID：14892893
> 
> 赞同：1
> 
> 时间：2013-02-15T10:40:18.777
> 
> 标签：vim

在 Vim 中，有没有办法`:make`用相同的参数集重新运行最新的命令？类似于 Emacs 中的重新编译命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:50:28.907

键入 `:make`然后按`↑`将把你的最后一个 :make 命令放在你的命令行中。你可以吗？

如果您讨厌`:make`每次都键入，您可以将您的 make 命令绑定/映射到某个键，然后您只需按下该键即可执行您的命令。

PS有人知道如何使“向上箭头”看起来像带有SO降价的键盘键吗？`<kbd>??</kbd>` `C-V <up>`在这里肯定行不通。:)

谢谢英戈·卡卡特！！ `↑` `↑` `↑` `↑` `↑`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:57:28.770

当它仍然是最后执行的 Ex 命令时，一个简单的`@:`就可以了。如果您不确定，建议`:make`后面的`↑`更好。您可能还喜欢我的[redocommand 插件](http://www.vim.org/scripts/script.php?script_id=1661)，它允许通过`:R :make`（或任何较短的唯一标识字符串）进行调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T00:39:53.173

我有以下设置、映射、命令和函数：

```
command! -nargs=* Make write | let g:make_args="<args>" | make <args> | cwindow 6
function! Make2()
  if !exists("g:make_args")
    let g:make_args = ""
  endif
  wall
  exec "silent! make " . g:make_args
  cwindow 6
  redraw
endfunction
inoremap <F2> <ESC>:call Make2()<CR><C-L>
noremap <F2> :call Make2()<CR><C-L> 
```

您需要显式调用`:Make myprog`一次。之后，您只需键入`<F2>`并且它使用您用于最后一个`:Make`命令的最后一个参数。如果您想制作其他东西，请再次`:Make new_prog`明确使用。

# xpath - xpath 通过 id 查找属性并获取属性父内容

> ID：14892894
> 
> 赞同：1
> 
> 时间：2013-02-15T10:40:23.363
> 
> 标签：xpath

我有一个看起来像这样的 XML 结构：

```
<document>
<body>
<section>
<title>something</title>
<subtitle>Something again</subtitle>
<section>
<p xml:id="1234">Some text</p>
</section>
</section>
<section>
<title>something2</title>
<subtitle>Something again2</subtitle>
<section>
<p xml:id="12345678">Some text2</p>
</section>
</section>
</body>
</document> 
```

我想要的是查找包含 12345678 的属性 xml:id 的搜索，一旦找到，就获取上一个兄弟（字幕）内容。xpath可以做到这一点吗？我有这个：

```
//p[contains(@xml:id,'12345678')]/preceding-sibling::subtitle 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:49:15.877

如果我对帖子的理解正确，那么对于您提出的具体查询，预期答案是`Something Again2`. 您可以使用以下查询来执行此操作：

**随着**文档架构的更改而更新

```
//section[section/p[@xml:id="12345678"]]/subtitle 
```

# ruby-on-rails - 从表单传递的参数中收集值

> ID：14892896
> 
> 赞同：0
> 
> 时间：2013-02-15T10:40:29.660
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我提交表单时，我得到以下参数：

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"3434343445=", "form"=>{"requested_user"=>"user@example.com"}, "form_type"=>"repository_creator", "gitcategory"=>{"name"=>"mechanical"}, "svncategory"=>{"name"=>"sales"}, "commit"=>"Submit"} 
```

在我的模型`self.requested_user`中可供我使用，因为`requested_use`r 是我的模型表单中的一个字段。但其他值如`svncategory`和`gitcategory`是从选择标记传递的，该标记未存储在我的数据库中，也不属于我的模型的一部分。我只是通过 html 下拉列表传递它，因为我不想将它存储在任何地方。

*我如何访问该变量，即在我的模型中命名`svncategory's name`。`svncategory's`*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:46:20.590

传递给控制器​​的参数可通过变量 获得`params`。`params[:svncategory].inspect`会导致`{"name"=>"sales"}`.

该`params`变量只能通过控制器层访问，因此您必须将所需的参数传递给模型。

可以通过在模型中添加 attr_acccessors 来解决这个问题。

```
class YourModel < ActiveRecord::Base
  attr_accessor :gitcategory, :svncategory
end 
```

然后在实例化对象时手动设置属性。

```
your_model = YourModel.new(params[:form])
your_model.gitcategory = params[:gitcategory][:name]
your_model.svncategory = params[:svncategory][:name] 
```

虽然它不是一个理想的解决方案，但它可以解决您的问题。

# java - 为什么 Semaphores 中的 acquire() 方法不必同步？

> ID：14892897
> 
> 赞同：8
> 
> 时间：2013-02-15T10:40:29.930
> 
> 标签：java, synchronization, semaphore

我正在学习 Java 中的信号量，并正在阅读这篇文章[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)。我唯一不明白的是为什么在同步上下文中不使用 acquire() 方法。查看上述网站的示例：

他们创建了一个信号量：

```
private Semaphore semaphore = new Semaphore(100); 
```

并获得这样的许可证：

```
semaphore.acquire(); 
```

现在，是否有可能两个或多个线程同时尝试获取（）？如果是这样，计数会有一点问题。

或者，信号量本身是否处理同步？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T10:42:00.930

> 或者，信号量本身是否处理同步？

是的，基本上就是这样。信号量是线程安全的，如[javadoc 中所述](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html)：

> 内存一致性影响：在调用“释放”方法（如 release()）之前线程中的操作发生在另一个线程中成功的“获取”方法（如 acquire()）之后的操作。

对包中对象的大多数操作`java.util.concurrent`都是线程安全的。[包 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)的最底部提供了更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T10:43:14.940

信号量应该很快，因此使用`Unsafe`类中的原子并发原语，如[CAS（比较和交换）](http://en.wikipedia.org/wiki/Compare-and-swap)。

使用这些原语，同步发生在低得多的级别，并且不需要监视器。（无锁同步）。

事实上，同步是由一个循环使用 CAS 连续执行的，直到预期值等于写入/读取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T17:12:50.923

AbstractQueuedSynchronizer 与 CAS 操作保证同步

在此处查看[javadoc](http://download.java.net/jdk7/archive/b123/docs/api/java/util/concurrent/locks/AbstractQueuedSynchronizer.html)

# .htaccess - 非 www 到 www、尾斜杠、非 https 到 https 和友好 URL

> ID：14892898
> 
> 赞同：0
> 
> 时间：2013-02-15T10:40:30.867
> 
> 标签：.htaccess

嗨，我的 .htaccess 文件规则有点卡住了。

我已经设置了非 https 重定向到 https（这有效）：

```
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L] 
```

我已经将非 www 设置为 www （这有效）：

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

我已经设置，所以它总是在 url 中添加斜杠（这会在thank you.php 中添加斜杠）：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_URI} !/$
RewriteRule .* http://%{HTTP_HOST}%{REQUEST_URI}/ [R=301,L] 
```

重定向（不起作用）：

```
RewriteRule ^thank-you/?$ thank-you.php [L]
RewriteRule ^thank-you.php$ http://%{HTTP_HOST}/thank-you/ [L] 
```

应该发生的情况是，如果有人转到任何不是 www 或不是 http 的地址，他们将被重定向到 https 和 www。

当文件thank-you.php被访问时，它应该重定向到/thank-you/

如果有人访问 /thank-you，它应该重定向到 /thank-you/

由于 URL 重写不起作用，但看起来应该如此，因此有点卡住了。

提前致谢

完整代码：

```
RewriteEngine On

RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule .* - [L]

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L] 

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_URI} !/$
RewriteRule .* http://%{HTTP_HOST}%{REQUEST_URI}/ [R=301,L]

RewriteRule ^thank-you/?$ thank-you.php [L]
RewriteRule ^thank-you.php$ http://%{HTTP_HOST}/thank-you/ [L] 
```

现在奇怪的是这段代码将 /thank-you.php 重定向到 /thank-you/ 但没有将 /thank-you 重定向到 /thank-you/ 我认为有些冲突：

```
RewriteEngine On

RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule .* - [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_URI} !/$
RewriteRule .* http://%{HTTP_HOST}%{REQUEST_URI}/ [R=301,L]

RewriteRule ^thank-you/?$ thank-you.php [L]
RewriteRule ^thank-you.php$ http://%{HTTP_HOST}/thank-you/ [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:28:05.900

我用波纹管解决了我的问题：

访问：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L] 
```

php:

```
function CheckUrl ($s) { // Get the current URL without the query string, with the initial slash
$myurl = preg_replace ('/\?.*$/', '', $_SERVER['REQUEST_URI']); //If it is not the same as the desired URL, then redirect
if ($myurl != "/$s") {Header ("Location: /$s", true, 301); exit;}
}

$producturl = "thank-you/";
CheckUrl ($producturl); //redirects the user if they are at the wrong place 
```

# .htaccess - 远期过期标头被忽略

> ID：14892899
> 
> 赞同：2
> 
> 时间：2013-02-15T10:40:36.827
> 
> 标签：.htaccess, xampp, cache-control, expires-header

按照 Yahoo / YSlow 在[http://developer.yahoo.com/performance/rules.html#expires](http://developer.yahoo.com/performance/rules.html#expires)给出的建议，我正在尝试为我的图像设置一个遥远的未来 Expires 标题。

在我的 .htacess 中，我有：

```
<filesMatch "\.(jpg|jpeg|png|gif)$">
Header unset Pragma
FileETag None
Header unset ETag
Header set Cache-Control "public"
Header set Expires "Thu, 15 Apr 2014 20:00:00 GMT"
Header unset Last-Modified
</filesMatch> 
```

在 Firefox 中使用 Live HTTP Headers 我可以看到没有 ETag 并且过期日期显示为 2014。此外，查看缓存我可以确认过期日期并且没有 ETag 或服务器上次修改日期。

再次遵循 YSlow 提供的信息，我期望如果我现在更改图像而不更改其文件名，则在达到到期日期之前不会发生任何更改。YSlow 指出“如果您使用一个遥远的未来 Expires 标头，您必须在组件更改时更改组件的文件名”。

但是，如果我刷新它，我对图像所做的任何更改仍然会立即反映在网页上，使用 XAMPP 在 localhost 上进行测试。

这是本地服务器的事情还是我误解了它的工作原理？

谢谢。

# c# - 我们如何通过代码访问幻灯片的 rels 文件？

> ID：14892902
> 
> 赞同：0
> 
> 时间：2013-02-15T10:40:39.160
> 
> 标签：c#, xml, openxml, openxml-sdk

例如，我想 通过打开的 xml 访问`rels`幻灯片文件，我该怎么做？或者是否有任何属性或方法可以返回这些关系。`"\ppt\slides\_rels\slide1.xml.rels"``C#`

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:57:35.110

使用 C# 代码打开 ppt 文档后，您可以使用以下方式访问`_rels`

```
using(PresentationDocument myDoc = PresentationDocument.Open("yourfilepath",true))
{
    var reqPart = myDoc.Package.GetPart(new Uri("/ppt/slides/_rels/slide1.xml.rels", UriKind.Relative));

} 
```

# bash - 基于国家代码的特定文件结构的重组和重命名

> ID：14892905
> 
> 赞同：1
> 
> 时间：2013-02-15T10:40:42.737
> 
> 标签：bash

我有一个文件结构，如下所示：

```
Localizable
Localizable_en
Localizable_de
Localizable_es
Localizable_zh_CN
Root
Root_de
Root_en
Root_es
Root_zh_CN
TechnicalSupportPane
TechnicalSupportPane_jp
TechnicalSupportPane_de
TechnicalSupportPane_es
TechnicalSupportPane_en
TechnicalSupportPane_zh_CN 
```

我想将带有 _[Country Code] 的所有文件复制到以该国家/地区代码开头的文件夹 (mkdir) 中并重命名该文件。但是有些文件没有国家代码，这些文件应该复制到根文件夹（$TRANSLATION_FOLDER）。如果找到像 zh_CN 这样的中国国家代码，则应将其转换为 zh-Hans。

到目前为止，我有以下编码，但有些没有国家代码的文件会被忽略 - 或被错误地复制。

```
mkdir $SETTINGS_FOLDER
mkdir $TRANSLATION_FOLDER

for XLF in $( find "." -maxdepth 1 -iname "*.xlf" );
do

    TMP_LANGUAGE=${XLF: -6}
    LANGUAGE=${TMP_LANGUAGE:0:2}

    if [[ "$XLF" == *zh* ]]
    then
        LANGUAGE_PROJ_FOLDER="zh-Hans.project"
    else
        LANGUAGE_PROJ_FOLDER=$LANGUAGE".project"
    fi

    TMP_FILE_NAME=${XLF%.xlf}
    FILE_NAME=${TMP_FILE_NAME##*/}

    echo "Processing language "$LANGUAGE" with file "$FILE_NAME

    if [[ "$XLF" == *Localizable* ]]
    then
        echo "Processing Localizable" $XLF

        mkdir  $TRANSLATION_FOLDER"/"$LANGUAGE_PROJ_FOLDER

        cp $FILE_NAME_STRING $TRANSLATION_FOLDER"/"$LANGUAGE_PROJ_FOLDER"/Localizable"
    else
        echo "Processing Root and TechnicalSupportPane" $XLF

        mkdir  $SETTINGS_BUNDLE_FOLDER"/"$LANGUAGE_PROJ_FOLDER
        cp $FILE_NAME_STRING $SETTINGS_FOLDER"/"$LANGUAGE_PROJ_FOLDER
    fi
done 
```

我删除了文件前缀并在最后检查国家代码 - 这适用于所有具有国家代码的文件，但从没有最后一个字符的文件中取出 - 这是错误的。

有没有一种通过创建和复制这些文件来解析这些文件结构的有效方法？

BR，迈贝克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:39:17.213

我的建议是回显您想要执行的命令，然后当您确定它是正确的时`| sh`。

好处是您可以在不执行 cp/mkdir 等操作的情况下观察将要进行的更改。

`Perl`当我想使用复杂的正则表达式重命名文件时，我会使用这种技术。

**为方便起见， **EDIT** Fuller 示例从**DATA部分读取。****

 **```
use strict;
my $dest = "some-destination";
while(<DATA>) {
    chomp;
    my $filename = $_;
    my($file, $cc) = m!(.+?)_(.*)!;
    $file = $_ unless $file;
    # Fix chinese zh_CN -> zh-Hans
    $cc =~ s!(.+)_CN!$1-Hans!;

    #print "# file=$file cc=$cc\n";

    if ( $cc ) {
        print "mkdir -p $dest/$cc\n";
        print "cp $filename $dest/$cc/$file\n";
    }
    else {
        print "cp $filename $dest\n";
    }
    print "\n";
}
__DATA__
Localizable
Localizable_en
Localizable_de
Localizable_es
Localizable_zh_CN
Root
Root_de
Root_en
Root_es
Root_zh_CN
TechnicalSupportPane
TechnicalSupportPane_jp
TechnicalSupportPane_de
TechnicalSupportPane_es
TechnicalSupportPane_en
TechnicalSupportPane_zh_CN 
```

`sh`如果正确，当然可以通过管道输出。

```
cp Localizable some-destination

mkdir -p some-destination/en
cp Localizable_en some-destination/en/Localizable

mkdir -p some-destination/de
cp Localizable_de some-destination/de/Localizable

mkdir -p some-destination/es
cp Localizable_es some-destination/es/Localizable

mkdir -p some-destination/zh-Hans
cp Localizable_zh_CN some-destination/zh-Hans/Localizable

cp Root some-destination

mkdir -p some-destination/de
cp Root_de some-destination/de/Root

mkdir -p some-destination/en
cp Root_en some-destination/en/Root

mkdir -p some-destination/es
cp Root_es some-destination/es/Root

mkdir -p some-destination/zh-Hans
cp Root_zh_CN some-destination/zh-Hans/Root

cp TechnicalSupportPane some-destination

mkdir -p some-destination/jp
cp TechnicalSupportPane_jp some-destination/jp/TechnicalSupportPane

mkdir -p some-destination/de
cp TechnicalSupportPane_de some-destination/de/TechnicalSupportPane

mkdir -p some-destination/es
cp TechnicalSupportPane_es some-destination/es/TechnicalSupportPane

mkdir -p some-destination/en
cp TechnicalSupportPane_en some-destination/en/TechnicalSupportPane

mkdir -p some-destination/zh-Hans
cp TechnicalSupportPane_zh_CN some-destination/zh-Hans/TechnicalSupportPane 
```

命令行中的 Noddy 示例，而您的将是脚本。

```
bash-3.2$ echo "cat t1"
cat t1

bash-3.2$ echo "cat t1" |sh
0.2 1.45
0.3 1.67
0.1 1.23
1e-2 1.23
0.2 1.45
1e-1 1.23
0.3 1.67
0.3 1.67
0.4 1.78
0.5 1.89 
```**

# javascript - 打开谷歌电子表格文档时，如何从总是执行的无限循环中停止谷歌应用程序脚本？

> ID：14892906
> 
> 赞同：8
> 
> 时间：2013-02-15T10:40:44.797
> 
> 标签：javascript, google-apps-script, google-sheets

我试图实现这里建议的谷歌脚本的改进解决方案：[谷歌电子表格：当单元格更改文本时更改行颜色的脚本；](https://stackoverflow.com/questions/3703676/google-spreadsheet-script-to-change-row-color-when-a-cell-changes-text).

但是，在调试了我的脚本后，**我的文档无法再访问了。**看来我的脚本是错误的并且阻止了我的文档打开......结果是我无法禁用/编辑/删除相关的谷歌脚本并且我被卡住了！

你有办法解决这个阻塞问题吗？

谢谢，

法比安

**更新：**经过进一步调查，问题的原因似乎是由于从事件触发器 onOpen() 调用的无限循环脚本。所以我的问题可以重新表述为：

**如何停止进入无限循环的 Google App 脚本？**

我可以使用另一个脚本来终止这个错误脚本的执行吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-02-16T22:19:25.353

这是一个旧帖子，但以防万一：

转到您的 Google Apps 脚本项目页面，在我的执行选项卡中：[https](https://script.google.com/home/executions) ://script.google.com/home/executions 。

按状态过滤，以便您可以找到正在运行的项目。在右侧，您有三个点菜单，您可以在其中终止正在运行的项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-30T03:25:53.003

其实很简单。在您的脚本循环中，设置一个全局变量。然后，当您想停止它时，请连接一个脚本以将全局 var 设置为 false 到按钮图像。像这样：

```
var RUNLOOP = true;

function YourLoop() {
  if (RUNLOOP) {
     // your code that does something every loop
  }
}

function stopLoop() {
  RUNLOOP = false;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T15:41:26.480

脚本将停止执行约 6 分钟的限制。这适用于在触发器上运行的函数。但是，在打开电子表格的情况下等待 6 分钟绝对值得。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T23:03:14.157

复制电子表格时，触发器菜单中创建的触发器将被删除。尝试复制有问题的电子表格并从那里开始。

如果您有权访问浏览器历史记录，请使用它来访问项目的代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-11T05:26:41.887

您可以前往以下地址：

[https://security.google.com/settings/security/permissions](https://security.google.com/settings/security/permissions)

使用安装脚本的帐户，找到脚本（使用名称）并将其删除，使其不再工作 - 此操作将删除授予脚本的所有权限。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-07T14:05:30.513

我有同样的问题，这是我能够找到的：

该脚本最终将[在 6 分钟后超时](https://developers.google.com/apps-script/guides/services/quotas#current_limitations)。目前，**您只能从脚本编辑器中手动停止正在运行的 Google Apps 脚本**，即使那样，也只能在脚本编辑器中启动它。

作为一种解决方法，您可以为您的函数构建一个“终止开关”，但这可能会对性能产生负面影响，并且需要您添加逻辑来检查您希望能够停止的每个函数的“终止开关”。

这是这种“终止开关”的示例：
[https ://ctrlq.org/code/20112-suspend-google-script-execution](https://ctrlq.org/code/20112-suspend-google-script-execution)

# r - 在 ddply 中应用函数

> ID：14892910
> 
> 赞同：2
> 
> 时间：2013-02-15T10:41:03.683
> 
> 标签：r

我正在尝试使用 ddply 应用分组函数。我的数据如下所示：

[https://echange-fichiers.inra.fr/get?k=b1jD63CWkT93hDsbZ0g](https://echange-fichiers.inra.fr/get?k=b1jD63CWkT93hDsbZ0g)

以下函数计算 y=0 的 x 值

```
intercept=function (x,y){

    if (length(y[y==0])==0){
      x1=min(x[y >0])
      y1=min(y[y >0])

      x2=max(x[y <0])
      y2=max(y[y <0])

      p =(y2-y1)/(x2-x1)

      x0= -y1/p + x1

    }else{
      x0=x[y==0]

    }
return(x0)
} 
```

然后我尝试使用 ddply 按组应用它：

```
zzz=ddply(Data,.(Genotype,T), summarise
         InterDays=(intercept(Data$Days,Data$Diff)) 
) 
```

我的语法一定是错误的，因为它不会返回与以下格式类似的输出：

```
zzz=ddply(DataAll,.(Genotype,T), summarise
         InterDays=mean(DataAll$Days) 
) 
```

我认为我调用函数变量的方式有问题，但我看不到在哪里......欢迎任何帮助。一切顺利，文森特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:47:16.480

我认为你应该`ddply`这样称呼：

```
ddply(Data,.(Genotype,T), summarise,
         InterDays=(intercept(Days,Diff)) 
) 
```

IIUC，如果您使用`Data$Days` 和`Data$Diff`作为参数调用拦截函数，则每次都将整个向量传递给函数。使用`Days`和`Diff`，只使用对应于当前子集的值`Data`。

# java - 在java中实现一个不透明的句柄

> ID：14892917
> 
> 赞同：2
> 
> 时间：2013-02-15T10:41:29.447
> 
> 标签：java, handle

我想在java中实现一个不透明的句柄。

即，当用户在我的工厂类类上调用 Create 时，我创建了该类的一个对象，但不返回对象本身，而是返回一个表示类实例的 int。我将有一个`HashMap`将 int 存储为键和对象作为值的存储。该类的每个其他方法都将一个 int 作为一个参数，它将从中检索对象`HashMap`并对相应的对象执行所需的操作。将有一个 remove 方法将其从 中删除`HashMap`并允许它被垃圾收集。

我想知道是否有任何现有的类/数据结构可以避免我必须实现代码的句柄部分？

我认为我不能使用`hashCode`or`identityHashCode`作为唯一标识符，因为不能保证它们是唯一的。

如果我自己实现一个运行计数器，我将不得不在创建唯一 ID 时处理线程安全等问题，当我从`hashMap`等中删除对象时重用 id。所以我想知道是否有任何现有的类可以帮助解决这个问题.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:45:53.123

我会保留自己的柜台。如果您担心线程安全，请使用[AtomicInteger 。](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html)

而且我不会尝试重复使用 id：这将使调试和日志记录变得非常困难。您不太可能用完整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T12:20:24.500

取长值作为 id。你永远不会耗尽多头。重新使用 int 会带来更高的复杂性和速度变慢。
使用同步（或私有锁对象）编写 get() set() 和 increment() 很简单。否则`AtomicLong`与`incrementAndGet()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T11:47:11.397

让我们做简单的计算。您说您将拥有最多 10000 个对象，最多 1 小时的存活时间。让我们假设更苛刻的条件 - 每 1 分钟 10000 个对象。32 位整数足以使用大约 1 年。此外，即使整数溢出，它也会再次从零开始，重用一年前使用的整数。如我所见，这绰绰有余。因此，只需使用 AtomicInteger 即可，它的运行速度非常快，足以满足您的要求。

如果你仍然有疑问，你可以有一个更有弹性的解决方案——当一个新的句柄生成时，首先检查 HashMap 是否已经有这个键（这是非常快的操作），如果有，只需选择下一个整数。它类似于操作系统中的[https://superuser.com/questions/135007/how-are-pids-generated 。](https://superuser.com/questions/135007/how-are-pids-generated)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T13:30:11.060

我建议您使用返回封装对象的基本 OO 设计 - 它简单、强大且众所周知。

不要从工厂返回 int 并将其传递给工厂方法。相反，为新创建的对象（抽象数据类型）声明一个特定类并返回此 ADT 类的实例。将操作对象的方法从工厂移动到 ADT 类。

例如

```
// file Widget.java
package com.company.widgets;

public class Widget {
    String widgetName;
    String widgetType;
    int widgetCode;

    // By making the constructor "protected", can stop arbitrary classes from 
    // constructing and ensure on the WidgetFactory can construct
    protected Widget(String widgetName,
                    String widgetType,
                    int widgetCode) {
         this.widgetName = widgetName;
         this.widgetType = widgetType;
         this.widgetCode = widgetCode;
    }

    public boolean equals(Object other) {
         ...
    }

    public int hashcode() {
         ...
    }

    public void widgetOperation1(String fred) {
        ...
    }

    public String widgetOperation2(int barney ) {
        ...
    }
}

//========================================================

// file WidgetFactory.java
package com.company.widgets;

public class WidgetFactory {
    // Member attributes as needed. E.g. static Set of created Widget objects
    private static Set<Widget> widgetSet;
    static { widgetSet = new HashSet() }

    // 
    public static Widget createNewWidget() {
        Widget widget = new Widget();
        widgetSet.add(widget);
        return widget;
    }

    public static removeWidget(Widget widget) {
        widgetSet.remove(Widget)
    }
} 
```

请注意，1000 个对象并不多，因此此解决方案将是高效的。如果你真的需要优化每一微秒的性能，你可以选择让工厂更智能，这样 Widget 不会被删除，而是被回收——例如你可以有两个 Set，widgetsInUseSet 和 widgetsRecycledSet。

# webclient - 如何在 Windows Server 2012 中安装 Web 客户端

> ID：14892925
> 
> 赞同：2
> 
> 时间：2013-02-15T10:41:55.497
> 
> 标签：webclient, windows-server-2012

我不知道如何在 windows server 2012 上安装 web 客户端服务。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T10:47:38.727

您需要启用桌面体验才能在服务器操作系统中完成这项工作。

所以：服务器管理器 > 添加功能 > 用户界面和基础架构 > 桌面体验

# oracle - 在 Oracle 的脚本中处理多个插入

> ID：14892926
> 
> 赞同：2
> 
> 时间：2013-02-15T10:41:55.640
> 
> 标签：oracle, plsql

我必须编写一个包含多个插入的脚本。我也这样做了，并在 Toad 中运行脚本。脚本在大约 35 - 40 分钟内完成。

然后我将该脚本应用到 autosys，并再次运行它（这就是它应该使用的方式）。而这一次，它持续运行了1.5个多小时。

我必须手动终止 Oracle 中的活动会话。

请查看我的脚本并告诉我，为什么它没有在预期的 40 分钟时间内完成并继续运行超过 1.5 小时。

编辑：想提一下，在 Autosys 调用的父脚本中调用了“commit”等常用命令。我的脚本是在父脚本中调用的子脚本之一。

```
-- Begining of Consolidated queries for Slow performing Talend Jobs 
SET SERVEROUTPUT ON;
spool Consolidated.log;
WHENEVER SQLERROR EXIT SQL.SQLCODE;
SET DEFINE OFF;

ALTER SESSION SET GLOBAL_NAMES=FALSE;

DECLARE
ExtractType         NUMBER(9);
RecordsExtracted    NUMBER(9);
CurStatus           NUMBER(9);
StartDate           date;
ErrorMessage        NVARCHAR2(1000);
LastExtrctTimestamp DATE;

-- TABLE1 
BEGIN
    StartDate := sysdate;
    ExtractType := 44;

    DELETE FROM Table1;

    INSERT INTO Table1
    SELECT  Statement....;
    RecordsExtracted := SQL%RowCount;

    DBMS_OUTPUT.put_line('Table1 Records Extracted:' || RecordsExtracted);       

    -- On Success
    CurStatus := 2;
    ErrorMessage := 'Table1 Complete';

    INSERT INTO ExtractRecords(ExtractType, RecordsExtracted, Status, ExtractTimestamp, StartDate, EndDate, ErrorMessage)
    VALUES (ExtractType, RecordsExtracted, CurStatus, SysDate, StartDate, SysDate, ErrorMessage);

    INSERT INTO LoadRecords (LoadType,Status,LoadTimestamp,StartDate,EndDate) 
    VALUES (ExtractType, CurStatus, SysDate, StartDate, SysDate);

-- TABLE2 RESULTS 

    StartDate := sysdate;
    ExtractType := 78;

    DELETE FROM Table2;

    INSERT INTO Table2
    SELECT  Statement....;
    RecordsExtracted := SQL%RowCount;       

    DBMS_OUTPUT.put_line('Table2 Records Extracted:' || RecordsExtracted);

    -- On Success
    CurStatus := 2;
    ErrorMessage := 'Table2 Complete';

    INSERT INTO ExtractRecords(ExtractType, RecordsExtracted, Status, ExtractTimestamp, StartDate, EndDate, ErrorMessage)
    VALUES (ExtractType, RecordsExtracted, CurStatus, SysDate, StartDate, SysDate, ErrorMessage);

    INSERT INTO LoadRecords (LoadType,Status,LoadTimestamp,StartDate,EndDate) 
    VALUES (ExtractType, CurStatus, SysDate, StartDate, SysDate);

-- TABLE3 

    StartDate := sysdate;
    ExtractType := 81;

    DELETE FROM Table3;

    INSERT INTO Table3
        SELECT  Statement....;
        RecordsExtracted := SQL%RowCount;       

    DBMS_OUTPUT.put_line('Table3 Records Extracted:' || RecordsExtracted);

    -- On Success
    CurStatus := 2;
    ErrorMessage := 'Table3 Complete';

    INSERT INTO ExtractRecords(ExtractType, RecordsExtracted, Status, ExtractTimestamp, StartDate, EndDate, ErrorMessage)
    VALUES (ExtractType, RecordsExtracted, CurStatus, SysDate, StartDate, SysDate, ErrorMessage);

    INSERT INTO LoadRecords (LoadType,Status,LoadTimestamp,StartDate,EndDate) 
    VALUES (ExtractType, CurStatus, SysDate, StartDate, SysDate);

-- TABLE4 

    StartDate := sysdate;
    ExtractType := 57;

    DELETE FROM Table4;

    INSERT INTO Table4
        SELECT  Statement....;
        RecordsExtracted := SQL%RowCount;       

    DBMS_OUTPUT.put_line('Table4 Records Extracted:' || RecordsExtracted);

    -- On Success
    CurStatus := 2;
    ErrorMessage := 'Table4 Complete';

    INSERT INTO ExtractRecords(ExtractType, RecordsExtracted, Status, ExtractTimestamp, StartDate, EndDate, ErrorMessage)
    VALUES (ExtractType, RecordsExtracted, CurStatus, SysDate, StartDate, SysDate, ErrorMessage);

    INSERT INTO LoadRecords (LoadType,Status,LoadTimestamp,StartDate,EndDate) 
    VALUES (ExtractType, CurStatus, SysDate, StartDate, SysDate);
END;

spool off;
exit;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:39:41.423

您的脚本中没有 COMMIT。可能是另一个会话 (autosys)，在第一个会话 (Toad) 中等待提交或回滚

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:29:14.723

您的匿名块的结尾是错误的：

```
END;

spool off;
exit;
/ 
```

...应该是：

```
END;
/

spool off;
exit; 
```

您已在块中包含`spool off`and`exit`命令，这意味着该块将出错。但是，这也可能不对。您说这是从另一个脚本调用的，如果您依赖父级中的事务控制，则意味着它是通过 a`@`或类似的；但是在这个子脚本完成时有一个`exit`in this 会导致*父*脚本退出，这不是你想要发生的。

但这并不能解释你所看到的......@schurik 可能是对的。您说事务控制在父脚本中，但听起来您在 Toad 中独立运行了这个单个子脚本，这意味着父脚本没有运行，因此父脚本的任何提交或回滚都无关紧要。您必须在 Toad 中提交或回滚，否则 Autosys 版本将阻塞，永远等待 Toad 版本释放它持有的任何锁。

很可能存在性能问题和调整，jonearles 指出了一些起点；但是您必须首先确保它在做任何事情。

# python - Python 正则表达式拆分 PL/SQL 指令

> ID：14892933
> 
> 赞同：0
> 
> 时间：2013-02-15T10:42:18.630
> 
> 标签：python, regex, plsql

我正在尝试拆分 PL/SQL 指令。我带来了以下模式：

```
splitter_re = '(DECLARE.+?END;)\n+|;\n+' 
```

我有以下 PL/SQL 代码：

```
CREATE TABLE bk_temp1_kb AS
SELECT DISTINCT bk_c, bk_o, bk_r, bk_m
FROM www2013_02;

DECLARE
  time_val NUMBER;
BEGIN
  SELECT day INTO time_val
  FROM days
  WHERE day_desc = TO_CHAR(SYSDATE - 1);

  EXECUTE IMMEDIATE
  'DROP TABLE telep';

  EXECUTE IMMEDIATE
  'CREATE TABLE telep AS
  SELECT cc,
       dao,
       a,
       nam     
  FROM prodc
  WHERE timer = ' || time_val;
END;

DROP TABLE kart;

CREATE TABLE kart AS
SELECT b.dwp
FROM t_prod_new b
WHERE b.task = 'CARD'; 
```

split() 的结果是：

```
['CREATE TABLE bk_temp1_kb AS\nSELECT DISTINCT bk_c, bk_o, bk_r, bk_m\nFROM www2
013_02', None, '', "DECLARE\n  time_val NUMBER;\nBEGIN\n  SELECT day INTO time_v
al\n  FROM days\n  WHERE day_desc = TO_CHAR(SYSDATE - 1);\n \n  EXECUTE IMMEDIAT
E\n  'DROP TABLE telep';\n \n  EXECUTE IMMEDIATE\n  'CREATE TABLE telep AS\n  SE
LECT cc,\n       dao,\n       a,\n       nam     \n  FROM prodc\n  WHERE timer =
 ' || time_val;\nEND;", 'DROP TABLE kart', None, "CREATE TABLE kart AS\nSELECT b
.dwp\nFROM t_prod_new b\nWHERE b.task = 'CARD';"] 
```

它非常好，但我没有元素。模式有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:53:22.127

你有 None 元素，因为你有`()`没有内容的组

```
'(x)|y' 
matches "x" with ("x", ...)
matches "y" with (None, ...) 
```

因为第一个`(x)`没有匹配

改变

```
'(DECLARE.+?END;)\n+|;\n+' 
```

至

```
'(?:DECLARE.+?END;)\n+|;\n+' 
```

删除无。

```
(?:x)|y
is the same as
x|y 
```

括号不分组

# jquery - Navigator.notification.alert 消息在 iOS 中第二次不起作用

> ID：14892934
> 
> 赞同：0
> 
> 时间：2013-02-15T10:42:25.780
> 
> 标签：jquery, iphone, ios, jquery-mobile

我在 ios Navigator.notification.alert 消息中使用 iOS 6 不起作用：

*   navigator.notification.alert 消息第 1 次出现，但 navigator 警报消息第 2 次没有出现...谁能知道问题出在哪里，请告诉我解决方案。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T05:46:00.600

这是 Cordova 2.3 中的一个已知问题。

[https://issues.apache.org/jira/browse/CB-1588?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13575343#comment-13575343](https://issues.apache.org/jira/browse/CB-1588?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=13575343#comment-13575343)

你应该升级到2.4，我相信他们已经修复了。

# endeca - 无法创建 Endeca 应用程序

> ID：14892938
> 
> 赞同：5
> 
> 时间：2013-02-15T10:42:42.890
> 
> 标签：endeca

我已经安装了 Endeca（在 Linux 中），现在正在尝试创建一个应用程序。在尝试初始化服务时，我收到如下错误

**由 com.endeca.soleng.eac.toolkit.exception.EacCommunicationException com.endeca.soleng.eac.toolkit.application.Application setDefinition 引起 - 定义应用程序“MediaStoreen”时捕获异常。由 com.endeca.eac.client.EACFault sun.reflect.NativeConstructorAccessorImpl newInstance0 引起 - null**

我检查了应用程序日志并找到了有关错误的更多信息，如下所示

**信息：为应用程序“MediaStoreen”设置定义。2013 年 2 月 15 日下午 2:38:04 com.endeca.soleng.eac.toolkit.Controller 执行严重：在检查配置时遇到异常。com.endeca.soleng.eac.toolkit.exception.EacCommunicationException：定义应用程序“MediaStoreen”时捕获异常。在 com.endeca.soleng.eac.toolkit.application.Application.setDefinition(Application.java:141) 在 com.endeca.soleng.eac.toolkit.Controller.provision(Controller.java:667) 在 com.endeca.soleng .eac.toolkit.Controller.execute(Controller.java:235) at com.endeca.soleng.eac.toolkit.Controller.main(Controller.java:134) 原因：尝试创建应用程序时出错：错误连接到 `http://hostname:8888/eac-agent/IDelegateServer`: 无法调用服务.. 嵌套异常是 org.codehaus.xfire.fault.XFireFault: 服务器返回错误代码 = 404 for URI : `http://hostname:8888/eac-agent/IDelegateServer`。检查服务器日志以获取详细信息**

我理解错误，但不知道我能做些什么来解决它。非常感谢任何指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T00:45:18.983

要解决此问题：

*   停止 Endeca HTTP 服务
*   *在PlatformServices/workspace中创建***state**文件夹的备份
**   创建一个空**状态**文件夹（可选）*   启动 Endeca HTTP 服务*   现在在初始化服务后删除 state 文件夹（使用**initialize_services.sh --force**）*

 *这样做解决了我的问题。不确定为什么会发生此错误。如果有人能说出这个问题的原因，那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-17T06:38:50.317

**根本原因**：

当您的 PlatformServices 未启动时，此问题通常发生在 LINUX 机器上。Endeca PlatformServices 通常不会自动启动（并且失败）

1.  您的用户没有 PlatformServices 启动脚本的执行权限
2.  您的**ENDECA_CONF**变量未设置。

**怎么修？**

1.  关闭所有 Endeca 服务（PlatformServices、ToolsAndFrameworks、CAS）
2.  现在将环境变量**ENDECA_CONF**设置为*/opt/Endeca/PlatformServices/workspace* [根据您的路径替换]
3.  现在，按照**PlatformServices**、**ToolsAndFrameworks**和**CAS的顺序依次启动服务**

您现在应该可以创建您的应用程序了。有关更多详细信息，您还可以在此处查看文章：http: [//learnoracleatg.blogspot.in/2017/05/unable-to-create-endeca-application-eac-communication-exception.html](http://learnoracleatg.blogspot.in/2017/05/unable-to-create-endeca-application-eac-communication-exception.html)*

# encryption - F5 BIG-IP 中的 CRYPTO 库问题：缺少必需的参数

> ID：14892939
> 
> 赞同：2
> 
> 时间：2013-02-15T10:42:50.387
> 
> 标签：encryption, tcl, f5, big-ip

我正在为 F5 Big-Ip v. 11.x 编写 iRule。我对 CRYPTO 库有疑问。

当我尝试以这种方式解密字符串时

```
set  foo [CRYPTO::decrypt -alg rc4 -keyhex $key $to_decrypt] 
```

其中 $key 是十六进制格式的字符串， $to_decrypt 是加密的字符串。

我收到一个错误：

> tmm err tmm[7107]: 01220001:3: TCL error: /Common/testirule - 缺少必需的参数

在这里您可以找到文档：[https ://devcentral.f5.com/wiki/iRules.CRYPTO__decrypt.ashx](https://devcentral.f5.com/wiki/iRules.CRYPTO__decrypt.ashx)

我无法理解缺少哪个参数，您能帮帮我吗？提前致谢！

编辑：我在这里添加来自文档的片段：

> CRYPTO::decrypt [-alg <>] [-ctx <> [-final]] [-key[hex] <>] [-iv[hex] <>] []
> 
> 根据几个参数解密数据
> 
> **alg** - 算法。来自给定列表的 ASCII 字符串（见下文） 拼写是小写的，iRule 将因列表中没有的任何内容而失败。在 ctx 模式下，alg 必须在第一个 CRYPTO::command 中给出，并且不能修改。 **ctx**- context 是 Tcl 变量的名称，只能在 CRYPTO 命令中生成和使用。注意：尝试获取或设置 ctx 变量的值将失败。当 CTX 变量首次在 iRule 中使用时，将根据给定的参数（alg、key、iv 等）生成一个 tcl 对象。给定的 CTX 变量只能用于一个 CRYPTO:: 命令。如果 CTX 被用于不同目的，iRule CRYPTO:: 命令将失败。“–final”必须用于同一 CTX 变量的最后一个 CRYPTO:: 命令以完成 CRYPTO:: 命令。使用“-final”后，CTX 变量将被释放，相同的 ctx 变量名可以重复使用。当 CTX 变量中已经存储了一个键和一个 IV 值时，该值只能在 CRYPTO 命令真正开始之前更新，即在给出任何数据之前。**键**- 键（二进制数据）。密钥长度由使用的算法确定。可以由 CRYPTO::keygen **keyhex**生成- 密钥作为十六进制数据。密钥长度由使用的算法确定。可以通过 CRYPTO::keygen **iv** - 初始化向量（二进制数据）生成。长度由使用的 alg 决定。可以由 CRYPTO::keygen **ivhex**生成- 初始化向量作为十六进制数据。长度由使用的 alg 决定。可以通过 CRYPTO::keygen 生成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:14:15.090

是可选的`-iv`，因为您可以创建一个包含初始化向量的上下文并将其传递给 with `-ctx`。TCL 命令文档没有很好的方式来表明这种情况：`-iv`并且`-key`是必需的或是`-ctx`必需的。

# c# - AppDomain 中未触发 AssemblyLoad 事件

> ID：14892940
> 
> 赞同：1
> 
> 时间：2013-02-15T10:42:50.570
> 
> 标签：c#, .net, visual-studio-2010

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;

namespace DefaultAppDomainApp
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("***** Fun with the default app domain *****\n");
            InitDAD();

            DisplayDADStats();
            Console.WriteLine();

            ListAllAssembliesInAppDomain();

            Console.ReadLine();
        }

        #region Init the default app domain
        private static void InitDAD()
        {
            // This logic will print out the name of any assembly
            // loaded into the applicaion domain, after it has been
            // created. 
            AppDomain defaultAD = AppDomain.CurrentDomain;
            defaultAD.AssemblyLoad += (o, s) =>
                {
                    Console.WriteLine("{0} has been loaded!", s.LoadedAssembly.GetName().Name);
                };
        }
        #endregion

        #region Display basic stats
        private static void DisplayDADStats()
        {
            // Get access to the app domain for the current thread.
            AppDomain defaultAD = AppDomain.CurrentDomain;

            Console.WriteLine("Name of this domain: {0}", defaultAD.FriendlyName);
            Console.WriteLine("ID of domain in this process: {0}", defaultAD.Id);
            Console.WriteLine("Is this the default domain?: {0}", defaultAD.IsDefaultAppDomain());
            Console.WriteLine("Base directory of this domain: {0}", defaultAD.BaseDirectory);
        } 
        #endregion

        #region List loaded assemblies 
        static void ListAllAssembliesInAppDomain()
        {
            // Get access to the app domain for the current thread.
            AppDomain defaultAD = AppDomain.CurrentDomain;

            // Now get all loaded assemblies in the default app domain. 
            var loadedAssemblies = from a in defaultAD.GetAssemblies() orderby a.GetName().Name select a;

            Console.WriteLine("***** Here are the assemblies loaded in {0} *****\n",
              defaultAD.FriendlyName);
            foreach (var a in loadedAssemblies)
            {
                Console.WriteLine("-> Name: {0}", a.GetName().Name);
                Console.WriteLine("-> Version: {0}\n", a.GetName().Version);
            }
        } 
        #endregion

    }
} 
```

上面的代码来自“Andrew Troelsen”的“Pro C# 2010 and the .NET 4 Platform”一书。在这里，当我运行此代码时，控件永远不会到达该行

```
 defaultAD.AssemblyLoad += (o, s) =>
                {
                    Console.WriteLine("{0} has been loaded!", s.LoadedAssembly.GetName().Name);
                }; 
```

为什么在我运行此代码时不会触发此事件？当控制到达这里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-11T18:46:58.577

由于多种原因，无法访问此事件处理程序。AppDomain.CurrentDomain 已加载开始执行 Main 方法所需的所有程序集。因此，您添加事件处理程序为时已晚。您需要添加一个特殊的静态方法，.NET 框架会查找并将执行以运行您的应用程序初始化代码，它称为 AppInitialize 并且您将在那里绑定您的处理程序。对 AppInitialize 进行一些挖掘。

此外，您的域不是唯一涉及的域。肯定至少有一个其他共享应用程序域，所有 GAC 和完全受信任的程序集都被加载到其中。另外，根据应用程序的配置方式以及其他程序集如何加载它们的依赖项，可能还有其他应用程序域。在 MSDN 上就应用程序域的主题进行尽职调查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:48:07.070

事件不会触发，因为当应用程序启动时，所有引用的程序集都已加载（以防您没有动态加载程序集）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T10:53:48.167

从文档（以及我所经历的）来看，该事件仅在使用其中一种`Assembly.Load`方法时才会触发。

当运行时自动解析并加载程序集时，它不会触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-09T08:29:48.770

我也遇到了 AssemblyLoad 的问题。我必须使用以下设置对其进行调查：

1\. 在 ASP.Net 应用程序启动期间，在配置 DI 时，将事件处理程序添加到 AssemblyLoad 事件中，记录所有加载的程序集和 AppDomain FirendlyName。
2\. 之后，所有已加载的程序集也被记录下来。
3\. 在其他地方的控制器构造函数中，所有加载的程序集都被再次记录。
4\. 所有依赖项都在 GAC 中。

结果：
所有日志都显示相同的 AppDomain 名称，但控制器日志显示的加载程序集比最初由 (2) 和 AssemblyLoad 事件处理程序 (1) 记录的组合更多。因此，看起来甚至没有为所有加载的程序集触发 AssemblyLoad。

# magento - Magento 1.7 将自定义管理模块与属性集成

> ID：14892944
> 
> 赞同：1
> 
> 时间：2013-02-15T10:43:03.330
> 
> 标签：magento, module, magento-1.7

我在一个服装网站上工作，要求所有产品都标记在一个品牌下，并且该品牌需要有自己的徽标、标题和描述，未来有可能获得更多数据，例如 url。我考虑将其创建为一个类别，但是因为无论品牌如何，产品也需要列出，我不能这样做。

在环顾四周时，我研究了制作管理模块，但我不确定这是否是研究的正确途径（感谢 Magento 部分的可怕文档）。是否可以创建一个管理模块，用户可以在其中创建一个新品牌，给它一个图像描述等，并让它填充产品属性下拉列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:52:38.163

是的，这是可能的，但是对于 SO 格式来说，完整的解释太多了。

查看以下主题：

*   为您的数据定制模型
*   用于管理它的管理网格
*   下拉菜单的源模型

# wordpress - 将特色图像拉入 WordPress 菜单

> ID：14892953
> 
> 赞同：0
> 
> 时间：2013-02-15T10:43:22.363
> 
> 标签：wordpress

我有一个像这样标记的简单静态列表，我想将其转换为 WordPress 菜单：

```
<ul>
    <li><a href="#"><img src="http://placekitten.com/200/300"></a></li>
    <li><a href="#"><img src="http://placekitten.com/200/300"></a></li>
    <li><a href="#"><img src="http://placekitten.com/200/300"></a></li>
    <li><a href="#"><img src="http://placekitten.com/200/300"></a></li>
</ul> 
```

我希望每个列表项都链接到特定的帖子，并拉入特色图片而不是标题。如果我设置一个默认的 WordPress 菜单，它会输出如下：

```
<ul>
    <li><a href="post-1/">Blog Post 1</a></li>
    <li><a href="post-2/">Blog Post 2</a></li>
    <li><a href="post-3/">Blog Post 3</a></li>
    <li><a href="post-4/">Blog Post 4</a></li>
</ul> 
```

我将如何改为这样输出：

```
<ul>
    <li><a href="post-1/"><img src="post-1-featured-img.png"></a></li>
    <li><a href="post-2/"><img src="post-2-featured-img.png"></a></li>
    <li><a href="post-3/"><img src="post-3-featured-img.png"></a></li>
    <li><a href="post-4/"><img src="post-4-featured-img.png"></a></li>
</ul> 
```

所以基本上我只想返回我在 WordPress 自定义菜单中指定的每个帖子的特色图片，而不是帖子标题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-15T11:14:15.340

您可以使用来获取图像，但我认为您无法从默认 wp 菜单中获取菜单中的发布功能

```
$defaults = array(
                    'container' => '',
                    'container_class' => '',
                    'menu' => 'Main Menu',
                    'echo' => 1,
                    'items_wrap' => '<ul class="topmenu">%3$s</ul>',
                    'link_before'     => '<img src="post-1-featured-img.png"/>',
    'link_after'      => '<span class="menu_h_r"></span></a>'
                );

               wp_nav_menu($defaults); 
```

获得定义图像但我不确定你会为你找到解决方案。尝试一些插件。

# c++ - 将 apache 请求转发到 C++ 程序

> ID：14892955
> 
> 赞同：6
> 
> 时间：2013-02-15T10:43:25.013
> 
> 标签：c++, linux, apache, connector

我基本上是在寻找有关如何解决该问题的提示和技巧。

我有一个用 C++ 编写的服务器软件 (Linux)。我需要做的是提供一些信息，这些信息是通过对 apache 网络服务器的 http 调用在该软件内部生成的。

当然可以将数据存储在数据库中并为其编写一个 servlet，或者使用 IPC 获取数据，但我想保持简单并捆绑在一个文件中。我也想知道这个想法是否可行。

所以工作流程看起来像：客户端 -> Apache Webserver -> C++ 软件

是否有任何现有的库或可以处理 Apache -> C++ 连接的东西？还是只是将请求重定向到 c++ 中的套接字并手动执行？基本上类似于 tomcat 连接器。

### 编辑

请注意，服务器软件永久在后台运行，不应通过调用“启动”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T13:50:17.477

有几个选项。

[CGI](http://en.wikipedia.org/wiki/Common_Gateway_Interface)很简单，并且一直存在。在 CGI 下，Web 服务器将为每个 Web 请求生成一个单独的进程。正如您在评论中提到的，您可以编写一个 CGI 脚本，对您的 C++ 程序进行 RPC 调用。

[FastCGI](http://www.fastcgi.com/)是 CGI 的替代品；它不是为每个 Web 请求生成一个单独的进程，而是定义了一个协议，让 Web 服务器将多个 Web 请求分派给一个长时间运行的进程。它适用于 Web 应用程序。但是，对于您的场景，您有一个需要添加 Web 界面的预先存在的服务器进程，它可能无法正常工作；根据我有限的理解，Web 服务器通常希望自己启动和停止长时间运行的 FastCGI 进程（以响应传入请求、服务器负载、空闲时间等），而不是连接到预先存在的 FastCGI 进程。（我认为大多数服务器都会让您重新配置它，但这不是默认设置。）

您还可以始终在您的 C++ 进程中嵌入像[Mongoose](http://code.google.com/p/mongoose/)或[cpp-netlib](http://cpp-netlib.org/)这样的 Web 服务器，并设置 Apache 以代理对它的请求。这可能是您最好的方法。（例如，Mongoose*非常*容易嵌入。）

最后，您可以使用成熟的 Apache 模块（或者将您的 C++ 服务器重新设计为 Apache 模块，或者让 Apache 模块与您的 C++ 服务进行通信）。这可能比您想要做的更复杂，尽管有像[CPPSERV](http://en.wikipedia.org/wiki/CPPSERV)这样的现有项目采用这种方法。

# jsf - 在 selectOneMenu 中使用枚举失败：'Male' must be convertible to an enum

> ID：14892967
> 
> 赞同：2
> 
> 时间：2013-02-15T10:44:24.937
> 
> 标签：jsf, enums, selectonemenu

我正在开发一个小型 jsf 项目，我到达了一个状态，我必须在枚举类型中存储一个值，但不知道如何处理

所以我在这里发布我的问题的一个小描述：

这是枚举类型：

```
 package com.enumeration;

 import java.io.Serializable;

 public enum Gender implements Serializable{

    Male('M'), Female('F');

    private char description;

   private Gender(char description) {
     this.description = description;
   }

   public char getDescription() {
     return description;
   } 
```

}

xhtml页面：

```
 <h:panelGrid columns="2">
                <h:outputLabel value="Nom:" for="nom" />
                <h:inputText id="nom" value="#{employee.newEmployee.nom}" title="Nom" />

                <h:outputLabel value="Gender:" for="gender" />
                <h:selectOneMenu value="#{employeeBean.newEmployee.gender}" id="gender">
                     <f:selectItem itemLabel="Male" itemValue="Male" />
                    <f:selectItem itemLabel="Female" itemValue="Female"/>
                </h:selectOneMenu>

            </h:panelGrid>
            <h:commandButton value="ajouter" action="index.xhtml" actionListener="#{employeeBean.ajouter}" />
        </h:form> 
```

问题是当我尝试向数据库添加新行时，jsf 抛出错误： **j_idt7:gender: 'Male' must be convertible to an enum。**

网上搜了一下，没看懂，求大神帮忙谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T12:10:58.390

您的问题是您`<f:selectItem>`指定的字符串，而 in`<h:selectItem value="#{employeeBean.newEmployee.gender}">`似乎返回了两个`Gender`枚举之一。

只要您将相同的值粘贴到两者中，枚举就可以在没有转换器的情况下直接转换为 AFAIK。

这是 /a 模式：

```
<h:selectOneMenu value="#{employeeBean.newEmployee.gender}" id="gender">
    <f:selectItems value="#{enumValuesProvider.genders}"
                   var="gender"
                   itemValue="#{gender}"
                   itemLabel="#{gender.name()}" />
</h:selectOneMenu> 
```

注意，我在`<f:selectItems>`这里使用。问题是，您不能简单地直接从 JSF 页面获取值。您将需要一个专用 bean 来完成这项工作：

```
@Named      // or @ManagedBean if you're not using CDI
@ViewScoped // or @RequestScoped
public EnumValuesProvider implements Serializable
{
    public Gender[] getGenders()
    {
        return Gender.values();
    }
} 
```

这只是写下来，没有任何测试。没有保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-27T10:17:51.200

**在我的实体中：**

```
@Entity

public class MyClass {
@Column
@Convert(converter = MyEnumConverter.class)
@Enumerated(EnumType.ORDINAL)
private MyEnumType myEnumType;
//....getter and setter    } 
```

* * *

**在我的枚举中：**

```
public enum MyEnumType {
    AAAA,
    BBBB;
public String getLabel() {
    switch (this) {
        case AAAA:
            return "aaaa";
        case BBBB:
            return "bbbb";

    }
    return "NONE";
}
@Override
public String toString() {
    return getLabel();
}
} 
```

**另一个枚举：**

```
public enum AnotherEnum {
      ...
} 
```

* * *

**在我的转换器中：（**它不是一个 FacesConvertor）。

```
@Converter
public class MyEnumConvertor implements AttributeConverter<MyEnumType, Byte> {
    @Override
    public Byte convertToDatabaseColumn(MyEnumType attribute) {
        switch (attribute) {
            case AAAA:
                return 0;
            case BBBB:
                return 1;
            default:
                throw new IllegalArgumentException("Unknown" + attribute);
        }
    }
    @Override
    public MyEnumType convertToEntityAttribute(Byte dbData) {
        switch (dbData) {
            case 0 :
                return EstatePossessionType.AAAA;
            case 1:
                return EstatePossessionType.BBBB;

            default:
                throw new IllegalArgumentException("Unknown" + dbData);
        }
    }
  } 
```

* * *

**在我的实用程序类中：**

```
public class MyUtilClass {
    public <T extends Enum> SelectItem[]     createSelectItemByEnumClass(Class<T> clazz) throws Exception {
        SelectItem[] selectItem = null;
        int i = 0;
        try {
          Object[] enumConstants = clazz.getEnumConstants();
            if (enumConstants != null) {
                selectItem = new SelectItem[enumConstants.length];
                for (Object object : enumConstants) {
                    selectItem[i++] = new SelectItem(object,     object.toString());
              }
            }
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
        return selectItem;
    }
} 
```

* * *

**在我的 CDI-bean 类中：**

```
public class MyCdiClass {
    MyEnumType selectByUser = null;
    public Class getSelectItemClass(){
        return MyEnumType.class;//<<--I'll tell jsf, I want create SelectItem from this class.Maybe I have more than one enum:).
    }
    public MyEnumType getSelectByUser() {
        return selectByUser;
    }
    public void setSelectByUser(MyEnumType selectByUser) {
        this.selectByUser = selectByUser;
    }
} 
```

* * *

**在我的 jsf 页面中：**

```
<h:selectOneMenu value="#{handleEstateActionInEstate.selectByUser}">
    <f:selectItems value="#{myUtility.createSelectItemByEnumClass(myCdiBean.selectItemClass)}"/>
 </h:selectOneMenu> 
```

我希望这些片段有用。

# sql-server-2012 - 关于使用 NVARCHAR(MAX)

> ID：14892968
> 
> 赞同：2
> 
> 时间：2013-02-15T10:44:32.423
> 
> 标签：sql-server-2012

我有一个数据库，其中有很多字符串列。我应该使用 NVARCHAR(MAX) 还是将字符串限制为它们可以合理的最大值，例如 NVARCHAR(100) 等？我真正想知道的是，如果我有一列设置为 NVARCHAR(MAX)，并且该列的所有值都是 100 个字符或更少，那么我是否可以通过将该列设置为 NVARCHAR(100) 来节省空间？

我知道 spac 不是这里唯一的问题，数据的“验证”也很重要，但我只是在问空间问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T10:58:07.333

你知道你不能索引 nvarchar(max) 类型的列吗？因此，您将无法优化此列上的查询。同意，没有尺寸影响，但肯定会产生潜在的性能影响。

另请注意，在特定大小之后，列存储在行外，因此获取它会增加额外的性能命中。

如果您担心在插入时出错，一般的解决方案是：

1.  验证客户端
2.  修剪字符串

这是一个更[详细地](https://stackoverflow.com/questions/148398/are-there-any-disadvantages-to-always-using-nvarcharmax)讨论这个问题的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T10:48:24.047

它不会节省空间，因为`nvarchar`字段的大小取决于输入数据的大小，而不是字段定义。根据[文档](http://msdn.microsoft.com/en-gb/library/ms186939.aspx)。

> 存储大小（以字节为单位）是输入数据实际长度的两倍 + 2 个字节

您设置大小限制的原因是验证数据是否为该大小或更小，因为这是您的逻辑数据模型规定的。

# sas - 如何将任务标记为不在流中执行？

> ID：14892975
> 
> 赞同：2
> 
> 时间：2013-02-15T10:44:50.640
> 
> 标签：sas, enterprise-guide

我在 SAS Enterprise Guide 中有一个流程，但出于调试原因，我希望某些任务运行而其他任务不运行。有没有办法告诉流程不执行某些任务？FE 一个导出任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:38:45.780

[http://support.sas.com/documentation/onlinedoc/guide/sasegforprogrammersGoodies.htm](http://support.sas.com/documentation/onlinedoc/guide/sasegforprogrammersGoodies.htm)

大多数情况下，在`How do you make sure a task (or program) has completed successfully before performing the next one?`：

> 在 SAS Enterprise Guide 4.2 及更高版本中，您可以向任务添加一个或多个条件，以控制该任务（及其后的任何项目）是否运行。条件可以基于提示值、日期/时间条件、SAS 数据集中的值或宏变量。最后两种类型可能非常强大，因为您可以将几乎任何您想要的值添加到 SAS 数据集或宏变量并在条件内检查它。为确保特定任务在继续之前具有所需的内容，请使用项目中的查询生成器或 SAS 程序步骤将值填充到 SAS 数据集中。然后创建条件（右键单击任务并选择条件->添加），并根据您创建的数据集中的预期值创建条件。

在您的情况下，您应该在为调试定义的 sas 数据集中有一个宏变量或一个值，例如 %let debug=0; 或 %let 调试=1；然后将该值用于您的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:43:42.470

如果这不是您打算经常重复的操作，一个快速的解决方案是选择您想要执行的进程（Ctrl+单击）并选择“运行选定的”作为您的运行选项。

# python - 使用金字塔和 python 3 进行国际化

> ID：14892977
> 
> 赞同：3
> 
> 时间：2013-02-15T10:45:03.137
> 
> 标签：python, python-3.x, internationalization, pyramid

使用 Python 3 对 Pyramid 的国际化支持的当前状态是什么？

目前，Pyramid 用于此的包 lingua 和 babel 似乎与 Python 3 不兼容。

有[https://bitbucket.org/felixschwarz/babel-py3k](https://bitbucket.org/felixschwarz/babel-py3k)，但没有正式发布。

同样对于 lingua，我只能找到一个叫做 lingua3k 的东西的影子，但是到它的链接到处都被破坏了，也没有正式发布。

我怎样才能让自己启动并运行 Pyramid i18n 和 Python 3？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-28T16:25:54.387

# Py3 状态 2013 年 6 月 28 日

这是对 2013 年 3 月发布的两个答案的更新答案，适用于任何偶然发现此问题的人。

Babel for Python 3 的工作尚未正式发布。维护者有一张未解决的公开票：http: [//babel.edgewall.org/ticket/209](http://babel.edgewall.org/ticket/209)

然而，一群人拿起了火炬并开始了一个非官方的 BitBucket 回购来存放他们在 Babel3 上的工作：[https ://bitbucket.org/babel3_developers/babel3](https://bitbucket.org/babel3_developers/babel3)

Pyramid 也使用 lingua。目前如果你尝试easy_install/pip install lingua，将会失败。唯一的原因是 xlwt 尚未正式移植。

如果要安装 lingua，则必须手动修补 xlwt。

# 安装非官方的 Babel3

目前，Python 3 中没有 Babel 的官方版本。pypi 也没有发布任何内容（即 easy_install babel/babel3 或 pip install babel/babel3 无法正常工作）。但是，您可以使用非官方版本。

1.  要获得非官方版本，首先您需要安装 mercurial（源代码控制工具）。你需要这个来检查来自 BitBucket 的源代码。您可以在此处获取：[https](https://www.mercurial-scm.org/) ://www.mercurial-scm.org/适用于 Windows 用户。对于 Linux/Unix，使用您的发行版工具来获取二进制文件或从源代码编译。
2.  从命令提示符导航到要临时存储 Babel3 源安装文件的目录；然后运行：hg clone [https://bitbucket.org/babel3_developers/babel3（Windows](https://bitbucket.org/babel3_developers/babel3)用户可能需要输入 hg.exe 的完整路径或确保将目录 hg.exe 添加到他们的路径中）
3.  这将在您的本地计算机上创建一个包含 setup.py 文件的目录。进入新目录并执行文件：python setup.py install

# 安装 Lingua

Pyramid 的 i18n 依赖于另一个名为 lingua 的 Python 模块。另一个名为 xlwt 的模块依赖项存在问题。它也已在此处进行了非正式修补：[https ://github.com/tonyroberts/xlwt](https://github.com/tonyroberts/xlwt)

1.  在此处获取 xlwt 补丁版本的源代码：[https](https://github.com/tonyroberts/xlwt) ://github.com/tonyroberts/xlwt （点击右下角的下载 zip）
2.  将内容提取到临时位置
3.  在结果目录中导航命令提示符
4.  运行：python setup.py install
5.  现在通过以下方式安装 lingua：​​ pip install lingua -或- easy_install lingua

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T04:28:37.270

我无法找到有关 python 3（babel 和 lingua）中金字塔 i18n 帮助程序包状态（当前或未来）的任何信息。

为了解决这个不便，我做了4件事：

1.  使用 python2.7 创建第二个虚拟环境
2.  添加一个名为 setup_i18n.py 的特定 i18n 设置文件
3.  编写一个名为 translate.py 的简单包装脚本， setup.py 将调用它来进行翻译。
4.  在 setup.py 中添加一个入口点以指向翻译脚本。

细节：

1.  我在我的项目中使用 python2.7 创建了一个非常精简的第二虚拟和非常精简的环境。只需将其命名为 env_python_2.7 并将其放在我项目的根目录中。

2.  然后在 setup.py 所在的目录中，我创建了另一个安装文件 setup_i18n.py。该文件仅对 i18n 支持所需的内容提出要求。我的 setup_i18n.py 文件如下所示：

```
 from setuptools import setup, find_packages

requires = [
    'Babel',
    'lingua',
]

setup(name='my_project',
      packages=find_packages(),
      install_requires=requires,

      message_extractors={'.': [
          ('**.py', 'lingua_python', None),
          ('**.pt', 'lingua_xml', None),
          ]},
      ) 

```

1.  然后我创建了一个名为 translate.py 的脚本，并将它放在从模板创建项目时 initializedb.py 进入的同一脚本目录中。该脚本非常通用，可以使其具有更具体的目标，但看起来像这样

```
 import argparse
import subprocess
import sys

from pyramid.paster import (
    get_appsettings,
    setup_logging,
    )

description = """\
A script to facilitate the translation of strings in the app.
"""
parser = argparse.ArgumentParser(description=description)
parser.add_argument('ini_file', help='Ini file to setup environment for this script')
parser.add_argument('-a', '--add', metavar='locale',
                    help='Add locale name of new language for translation (eg: en, de)')

def main(argv=sys.argv):
    args = parser.parse_args()

    setup_logging(args.ini_file)
    settings = get_appsettings(args.ini_file)

    # Python 2.7 is needed for translation strings at this time, because the
    # available translation string tools are not compatible with Python 3
    # at this time
    python27 = settings['my_project.python27_dir'] + '/bin/python'
    setup_file = settings['my_project.i18n_setup_file']

    if args.add:
        subprocess.call([python27, setup_file, 'init_catalog', '-l', args.add])

    subprocess.call([python27, setup_file, 'extract_messages'])
    subprocess.call([python27, setup_file, 'update_catalog'])
    subprocess.call([python27, setup_file, 'compile_catalog'])

if __name__ == '__main__':
    main() 

```

1.  最后，我修改了 setup.py 入口点以指向翻译脚本。我的入口点如下所示：

```
 entry_points="""\
[paste.app_factory]
main = my_project:main
[console_scripts]
my_project_db = my_project.script.initializedb:main
my_project_translate = my_project.script.translate:main
""", 

```

现在我可以通过调用'python3 setup.py my_project_translate'来 i18n 我的应用程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:30:54.680

要以您的方式翻译 Python 应用程序，您通常有两个不同的步骤：

*   提取消息目录
*   翻译字符串

第一部分由 Babel 和 lingua 处理，第二部分是 gettext （或任何围绕它的包装，例如[translationstring](https://pypi.python.org/pypi/translationstring)。

**简短回答**：下载 Poedit 进行目录工作并使用常规 Pyramid 库进行翻译。

## 长答案

因此，如果 Babel 和 lingua 不适合您，您可以自己创建消息目录。然后，使用现有`.pot`文件，您可以`.po`为每种语言创建文件。如果你使用[Poedit](http://www.poedit.net/)它可以自动将你的`.po`文件编译成`.mo`文件。[只需使用 Python 的标准库gettext](http://docs.python.org/2/library/gettext.html#module-gettext)就可以处理这些，而无需任何依赖。

所以这就是你要做的：使用 Poedit 创建一个消息目录 ( `File->New Catalog`)。仔细应用所有设置。Poedit 甚至可以提取字符串，这里可能不需要手动操作，只要看看*Catalog 属性*中的*Sources 路径*和*Sources 关键字*即可。

 *然后翻译所有（提取或手动添加的）字符串。Pyramid 将期望以下目录结构

```
myproject/
    locale/
        en/
            LC_MESSAGES/
                myproject.po
                myproject.mo
        myproject.pot 
```

该`pot`文件是您的目录。该`en`文件夹用于翻译成英文。对于此处设置的任何其他语言：`de`德语、`es`西班牙语等。您可以将`.po`文件创建为空并让 Poedit 从`.pot`文件中更新。

完成翻译后，请使用 Pyramid 的有关[使用这些文件](https://pyramid.readthedocs.org/en/latest/narr/i18n.html#creating-a-translation-string)的文档。如果您可以通过其他方式提取消息，则不需要 Babel。

作为旁注：您用于翻译过程的所有内容都围绕 Python 的 gettext 进行，因此如果您遇到任何问题，您甚至可以使用该库。如果您有有效的目录，这将在任何情况下都有效。*

# web-services - 如何将原始 webservice 消息soapenv 字符串转换为 CXF 中的相关对象更可取

> ID：14892981
> 
> 赞同：0
> 
> 时间：2013-02-15T10:45:35.233
> 
> 标签：web-services, cxf, marshalling, unmarshalling

我有一个像字符串一样的网络服务原始消息。我的目标是更改此消息内容，例如再见！改变再见！！。让我知道是否有任何 api/utils 方法可以完成这项工作。我正在使用带有 cxf 堆栈的 jboss 5，因此为此首选 cxf 实用程序。

原始 XML 字符串

再见！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:07:54.240

您必须添加一个[输出拦截器](http://cxf.apache.org/docs/interceptors.html)

例如 ：

```
public class SoapActionOutInterceptor extends AbstractSoapInterceptor {

   public SoapActionOutInterceptor() {
         super(Phase.POST_LOGICAL);
   }

   public void handleMessage(SoapMessage message) throws Fault {
         if (message.getVersion() instanceof Soap11) {
                PocBean pb = null;
                MessageContentsList list = (MessageContentsList) message.getContent(List.class);
                for (Iterator itList = list.iterator(); itList.hasNext();) {
                       Object content = itList.next();
                       if (content instanceof PocBean) {
                              pb = (PocBean) content;
                              pb.setParam1("AlteredGoodbye!!");

                       }
                }
         }
   }
} 
```

并像这样声明这个拦截器：

```
 <jaxws:endpoint id="pocWebService" implementor="#pocService"
         address="/pocService">

         <jaxws:properties>
                <entry key="schema-validation-enabled" value="true" />
         </jaxws:properties>
         <jaxws:outInterceptors>
                <bean class="fr.genybet.service.interceptor.SoapActionOutInterceptor" />
         </jaxws:outInterceptors>
   </jaxws:endpoint> 
```

# c# - Infopath 2010 保存为 2007，代码在 2007 后面生成错误

> ID：14892983
> 
> 赞同：1
> 
> 时间：2013-02-15T10:45:41.990
> 
> 标签：c#, infopath

我创建了带有代码的信息路径表单。我的错误是我在 2010 年使用表单 2007 的表单文件类型进行了此操作。转换并不顺利...我从表单中删除了所有代码，当我尝试从 beginig 添加时，我什至无法打开此表单，出现错误“Infopath canno打开这个表格”有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:50:41.713

重新开始并手动复制代码。在记事本中打开代码文件，将其粘贴到新的 InfoPath 表单中。

# android - PagerAdapter 类被多次调用

> ID：14892991
> 
> 赞同：9
> 
> 时间：2013-02-15T10:46:21.667
> 
> 标签：android, android-viewpager, android-pageradapter

我正在开发一个应用程序，其中有一个 ViewPager 视图，我创建了一个 PagerAdapter，它有视图，PagerAdapter 的 instanceiteItem() 方法在 create() 中被调用了两次我不知道为什么，谁能帮我这？

这是我的代码，

```
 View PagerView;
        MyPagerAdapter adapter;
        ViewPager pager;

            adapter = new MyPagerAdapter();     
    pager.setAdapter(adapter);
    pager.setCurrentItem(0);

public class MyPagerAdapter extends PagerAdapter {

        @Override
        public Object instantiateItem(final View collection, final int position) {
            Log.d("Inside", "Pager");
            PagerView = new View(collection.getContext());
            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            PagerView = inflater.inflate(R.layout.tablemenu, null, false);
            tbMenuDetails = (TableLayout) PagerView
                    .findViewById(R.id.Menutable1);
            scrollview = (ScrollView) PagerView.findViewById(R.id.scrollView1);
            tbMenuDetails.removeAllViews();
            removeTableRows();
            createTableLayout(position);
            String str[][] = datasource.GetSubMenuDetailsFromMenuId(MenuIdlst
                    .get(position).trim());
            Log.d("Str", "" + str.length);
            for (int i = 0; i < str.length; i++) {
                addRows(str[i][1], str[i][2], str[i][0], str[i][3], position);
                Log.d("Message", "Pos   " + position + "    SubMenuName" + str[i][2]
                        + " SubMenuId" + " " + str[i][0] + " TypeID" + "    "
                        + str[i][3]);
            }

            // View view = inflater.inflate(resId, null);
            ((ViewPager) collection).addView(PagerView, 0);

            return PagerView;
        }

        @Override
        public void destroyItem(final View arg0, final int arg1,
                final Object arg2) {
            ((ViewPager) arg0).removeView((View) arg2);

        }

        @Override
        public boolean isViewFromObject(final View arg0, final Object arg1) {
            return arg0 == ((View) arg1);

        }

        @Override
        public void finishUpdate(View arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void restoreState(Parcelable arg0, ClassLoader arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        public Parcelable saveState() {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public void startUpdate(View arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return MenuIdlst.size();
        }

    } 
```

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T22:25:19.800

如果您决定使用 Fragments，请不要实现`PagerAdapter`. 相反，扩展`FragmentPagerAdapter`或`FragmentStatePagerAdapter`：

```
private class MyPagerAdapter extends FragmentStatePagerAdapter {
    public MyPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return NUMBER_OF_PAGES_IN_PAGER;
    }

    @Override
    public Fragment getItem(int position) {
        // Implement the static method newInstance in MyFragment.java yourself.
        // It should return you a brand new instance of MyFragment, basically using
        // the code you had in your original instantiateItem method.
        return MyFragment.newInstance(position, ... etc ...); 
    }
} 
```

然后在您的活动中：

```
myPagerAdapter = new MyPagerAdapter(getFragmentManager());
// or myPagerAdapter = new MyPagerAdapter(getSupportFragmentManager());
myViewPager.setAdapter(myPagerAdapter); 
```

要获取有关如何使用 Fragments 和 ViewPagers 的更多信息： [https ://developer.android.com/reference/android/app/Fragment.html](https://developer.android.com/reference/android/app/Fragment.html) [https://developer.android.com/reference/android/support/v4/view /ViewPager.html](https://developer.android.com/reference/android/support/v4/view/ViewPager.html) [https://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html](https://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T11:08:54.777

默认情况下，ViewPager 在当前页面（如果有）之前/之前预加载一页。你没有说它是否被要求相同或不同的位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T06:34:22.217

[ViewPager.setOffscreenpageLimit(int)](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29)的最小值为 1。您可以从[ViewPager 的源代码中看到](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/support/v4/view/ViewPager.java)：

```
private static final int DEFAULT_OFFSCREEN_PAGES = 1;

...

/**
     * Set the number of pages that should be retained to either side of the
     * current page in the view hierarchy in an idle state. Pages beyond this
     * limit will be recreated from the adapter when needed.
     *
     * <p>This is offered as an optimization. If you know in advance the number
     * of pages you will need to support or have lazy-loading mechanisms in place
     * on your pages, tweaking this setting can have benefits in perceived smoothness
     * of paging animations and interaction. If you have a small number of pages (3-4)
     * that you can keep active all at once, less time will be spent in layout for
     * newly created view subtrees as the user pages back and forth.</p>
     *
     * <p>You should keep this limit low, especially if your pages have complex layouts.
     * This setting defaults to 1.</p>
     *
     * @param limit How many pages will be kept offscreen in an idle state.
     */
    public void setOffscreenPageLimit(int limit) {
        if (limit < DEFAULT_OFFSCREEN_PAGES) {
            Log.w(TAG, "Requested offscreen page limit " + limit + " too small; defaulting to " +
                    DEFAULT_OFFSCREEN_PAGES);
            limit = DEFAULT_OFFSCREEN_PAGES;
        }
        if (limit != mOffscreenPageLimit) {
            mOffscreenPageLimit = limit;
            populate();
        }
    } 
```

如果您尝试将其设置为零，您应该会在 Logcat 中看到警告。

The lower limit is 1 for a very good reason. The adjacent page needs to be already loaded when you scroll the pager - otherwise you will not see anything for the next page. If you manage to force the offscreen page limit to zero, you would probably just see a black, empty page as you scroll from the first page to the second. If you have a particular problem with both the first and second pages being created at the beginning, then try to target and fix that.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T06:30:04.250

为寻呼机中的每个视图使用片段。

将下面的代码写`onCreate()`在`FragmentActivity`.

```
List<Fragment> fragments = new Vector<Fragment>();

//for each fragment you want to add to the pager
Bundle page = new Bundle();
page.putString("url", url);
fragments.add(Fragment.instantiate(this,MyFragment.class.getName(),page));

//after adding all the fragments write the below lines

this.mPagerAdapter  = new PagerAdapter(super.getSupportFragmentManager(), fragments);

mPager.setAdapter(this.mPagerAdapter); 
```

示例片段定义：

```
public class MyFragment extends Fragment {

public static MyFragment newInstance(String imageUrl) {

final MyFragment mf = new MyFragment ();

    final Bundle args = new Bundle();
    args.putString("somedata", "somedata");
    mf.setArguments(args);

    return mf;
}

public MyFragment() {}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String data = getArguments().getString("somedata");
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Inflate and locate the main ImageView
    final View v = inflater.inflate(R.layout.my_fragment_view, container, false);
    //... 
    return v;
} 
```

每当我需要使用`ViewPager`. 希望这可以帮助。我无法从您提供的信息中弄清楚为什么您的实例化方法被调用了两次。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-11-19T13:22:51.473

There change to make that is essential for the isViewFromObject() method. It is very important and in it's documentation it is said that ["This method is required for a PagerAdapter to function properly."](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html#isViewFromObject(android.view.View,%20java.lang.Object))

```
@Override
public boolean isViewFromObject(View view, Object object) {
    if(object != null){
        return ((Fragment)object).getView() == view;
    }else{
        return false;
    }
} 
```

You can look [here](https://github.com/jfeinstein10/JazzyViewPager/issues/10).

# symfony - Symfony/Doctrine：查询似乎很好，但我仍然得到一个 NULL

> ID：14892994
> 
> 赞同：0
> 
> 时间：2013-02-15T10:46:31.920
> 
> 标签：symfony, doctrine-orm

我在使用教义检索数据时遇到问题。生成的查询似乎是我需要的（从我在 _profiler/ 中看到的），但是当我试图显示它时，我得到了一个不错的“NULL”。我不知道我错过了什么，但这真的很烦人......我真的需要你们:)

我的实体：

```
<?php
namespace Wk\SiteBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
* Wrote
*
* @ORM\Table(name="WROTE")
* @ORM\Entity(repositoryClass="Wk\SiteBundle\Entity\WroteRepository")
*/
class Wrote
{
/**
 * @var \Books
 *
 * @ORM\Id
 * @ORM\ManyToOne(targetEntity="Books")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="book_id", referencedColumnName="book_id")
 * })
 */
private $book;

/**
 * @var \Authors
 *
 * @ORM\Id
 * @ORM\ManyToOne(targetEntity="Authors")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="author_id", referencedColumnName="author_id")
 * })
 */
private $author;

/**
 * Set book
 *
 * @param \Books $book
 * @return Wrote
 */
public function setBook($book)
{
    $this->book = $book;

    return $this;
}

/**
 * Get book
 *
 * @return \Books 
 */
public function getBook()
{
    return $this->book;
}

/**
 * Set author
 *
 * @param \Authors $author
 * @return Wrote
 */
public function setAuthor($author)
{
    $this->author = $author;

    return $this;
}

/**
 * Get author
 *
 * @return \Authors 
 */
public function getAuthor()
{
    return $this->author;
}
} 
```

我的存储库：

```
class WroteRepository extends EntityRepository { 
public function authorFromBook($book) {
    return $this->createQueryBuilder('w')
        ->addSelect('a')
        ->leftJoin('w.author', 'a')
        ->where('w.book = :book')
            ->setParameter('book', $book)
        ->getQuery()
        ->getResult();
}
} 
```

控制器的动作：

```
public function feedAction() {
    $user = $this->container->get('security.context')->getToken()->getUser();

    if (!is_object($user) || !$user instanceof Users) {
        throw new AccessDeniedException('This user does not have access to this section.');
    }

    $weezList = $this->getDoctrine()
         ->getManager()
         ->getRepository('WkSiteBundle:Weez')
         ->getWeezList($user->getId());

    foreach ($weezList as $weez) {
        $authorList = $this->getDoctrine()
            ->getManager()
            ->getRepository('WkSiteBundle:Wrote')
            ->authorFromBook($weez->getBook());

        $weez->setAuthorsList($authorList);          
    }

    $template_value = array(
        'weezList' => $weezList,
    );

    return $this->render('WkSiteBundle:Default:feed.html.twig', $template_value);
} 
```

树枝：

```
 {% for weez in weezList %}
    {{ dump(weez.authorsList) }}
     {% for record in weez.authorsList %} 
        {% for au in record.author%}
            yo {{ au }}
        {% endfor %}
    {% endfor %} 
{% endfor %} 
```

结果 ：

```
array(1) { [0]=> object(Wk\SiteBundle\Entity\Wrote)#415 (2) {  ["book":"Wk\SiteBundle\Entity\Wrote":private]=> object(Proxies\__CG__\Wk\SiteBundle\Entity\Books)#422 (5) { ["__isInitialized__"]=> bool(true) ["bookId":"Wk\SiteBundle\Entity\Books":private]=> float(500) ["title":"Wk\SiteBundle\Entity\Books":private]=> string(16) "The Lean Startup" ["author":"Wk\SiteBundle\Entity\Books":private]=> int(214) ["image":"Wk\SiteBundle\Entity\Books":private]=> string(97) "http://bks7.books.google.fr/books?id=r9x-OXdzpPcC&printsec=frontcover&img=1&zoom=5&source=gbs_api" } ["author":"Wk\SiteBundle\Entity\Wrote":private]=> NULL } } 
```

你可以在最后看到：

```
["author":"Wk\SiteBundle\Entity\Wrote":private]=> NULL 
```

编辑：这里问的是我的 authorsList 的东西：

```
private $authorsList;

public function setAuthorsList($listAuthor) {
    $this->authorsList = $listAuthor;
}

public function getAuthorsList() {
    return $this->authorsList;
} 
```

编辑 2：（我在 a.aitboudad 的回答的帮助下所做的更改）

```
 $qb = $this->_em->createQueryBuilder();

  $qb->select('a')
     ->from('WeezbookSiteBundle:Authors', 'a')
     ->where ('a.authorId IN (SELECT a2.authorId FROM WeezbookSiteBundle:Wrote w JOIN w.author a2 WHERE w.book = :book)')
        ->setParameter('book', $book);

  return  $qb->getQuery()
                ->getResult(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:21:38.693

通过在 getWeezList 方法中使用 leftjoin，您可以只使用一个查询来给出相同的结果：

```
public function getWeezList($id)
{
    $db = $this->createQueryBuilder('w')
        ->addSelect('a')
        ->leftjoin('w.author', 'a')
        ->where('w.id = :id').
    ...
    ...
    return $db->getQuery()->getResult();
} 
```

在您的控制器中删除此代码：

```
foreach ($weezList as $weez) {
    $authorList = $this->getDoctrine()
        ->getManager()
        ->getRepository('WkSiteBundle:Wrote')
        ->authorFromBook($weez->getBook());

    $weez->setAuthorsList($authorList);          
} 
```

# java - Java 开发的 Zip 文件在 Windows 7 默认不打开

> ID：14892997
> 
> 赞同：5
> 
> 时间：2013-02-15T10:46:34.480
> 
> 标签：java, windows-7, zip, zipoutputstream

我已经使用 ZipOutputStream 创建了 Zip 文件。zip 文件已成功创建，并且可以使用 WinRar 和 Winzip 文件打开。这些文件显示在 Zip 文件中。

但同样的文件，我无法在 Windows 7 默认的 Zip Extractor 中打开。尝试使用 Windows 7 默认提取器进行提取时，Zip 文件中没有文件。但实际上 Zip 文件中有多个文件可用。

请帮助解决这个问题......谢谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-13T14:24:10.850

删除第一个“/”时，我的相对路径是 /somefolder/somefile.txt，一切都开始正常工作。（改用以下路径：“somefolder/somefile.txt”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T13:24:32.180

试试这个，它对我有用

```
File zipedFile = new File(OUTPUT_ZIP_FILE);
 zipedFile.setWritable(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-26T15:30:26.020

尝试：

```
outPutStream.putNextEntry(new ZipEntry(file.getName())); 
```

# iphone - 如何在ios中获取州，国家/地区列表

> ID：14892998
> 
> 赞同：2
> 
> 时间：2013-02-15T10:46:35.053
> 
> 标签：iphone, ios, geolocation

我在我的应用程序中使用 Expedia 创建酒店预订应用程序我有搜索选项来搜索州、国家/地区列表，即（印度泰米尔纳德邦）。有什么方法可以在我的 IOS 应用程序中获取城市和州的全部数据！[我有如下图所示的搜索选项]

![在此处输入图像描述](../Images/ee6a2eba9e98e8a803ee8b87cdab237f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:51:23.233

您可能必须调用多个 API 才能实现此目的。您可以使用以下 API。

1.  [http://api.drupal.org/api/drupal/includes%21locale.inc/function/country_get_list/7](http://api.drupal.org/api/drupal/includes%21locale.inc/function/country_get_list/7)
2.  [http://api.shopify.com/country.html](http://api.shopify.com/country.html)
3.  [http://www.geonames.org/export/web-services.html](http://www.geonames.org/export/web-services.html)

您可以使用此 API 并填写您的`UITableView`. 然后您可以`UISearchBar`使用本地搜索进行搜索。

注意：如果您使用这些 API，请记住您的应用程序功能依赖于这些 API。如果他们不工作，您的应用程序将无法工作。如果他们的服务宕机，你的应用程序就宕机了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:21:07.473

最后我找到了解决方案。1）我使用了下面的 url 并以 json 格式获取特定文本的所有城市名称。[http://ws.geonames.org/searchJSON?name_startsWith=madurai](http://ws.geonames.org/searchJSON?name_startsWith=madurai)

2）然后在json解析器的帮助下解析数据。我在下面包含我的代码

```
 NSURLRequest *req = [NSURLRequest requestWithURL:locatioURL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
        NSURLResponse *response;
        NSError *errorReq = nil;
        NSData *data = [NSURLConnection sendSynchronousRequest:req returningResponse:&response error:&errorReq];
//        NSString *udata = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
//        NSString * newstr = [NSString stringWithFormat:@"%@",data];

        NSString *udata = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        NSData *temp = [udata dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
        NSString *dst = [[[NSString alloc] initWithData:temp encoding:NSASCIIStringEncoding] autorelease];

        NSDictionary * locationDictionary = [[NSDictionary alloc]initWithDictionary:[dst JSONValue]];

        NSMutableArray *  locallocationArray= [[NSMutableArray alloc] initWithArray:[locationDictionary objectForKey:@"geonames"]];

        NSLog(@"%@",locallocationArray);

        for (int i = 0; i<[locallocationArray count]; i++)
        {
            NSString * locationStr = [NSString stringWithFormat:@"%@,%@,%@",[[locallocationArray objectAtIndex:i]objectForKey:@"name"],[[locallocationArray objectAtIndex:i]objectForKey:@"adminName1"],[[locallocationArray objectAtIndex:i]objectForKey:@"countryName"]];
[oneTimeLocationArray addObject:locationStr];
}
} 
```

然后在 TableView 中加载数组。

3) 如果您需要在 Phonegap 应用程序中实现此功能，请参考以下链接[http://jqueryui.com/autocomplete/#remote-jsonp](http://jqueryui.com/autocomplete/#remote-jsonp)

谢谢