# StackOverflow 问答 14612000-14612999

# php - 使用 YouTube API v3 列出所有私人视频

> ID：14612000
> 
> 赞同：3
> 
> 时间：2013-01-30T19:20:49.607
> 
> 标签：php, video, youtube-api, private

目前我正在构建一个使用少量用户上传视频的网站。这些视频被上传到服务器，然后通过 API v3 移动到 YouTube。设置私有标签，所有视频都上传到一个中央帐户。

我的问题是；如何通过 API 访问和列出所有这些私人视频以显示在我的网站上？我不确定这是否可能。任何反馈将不胜感激。

在仔细研究之后，我发现[了这个](https://stackoverflow.com/questions/3677453/youtube-api-php-retrieving-a-private-video-under-my-account?rq=1)。在浏览了文档后，我找不到一个 PHP 特定的例子来说明我如何做到这一点：getuserUploads。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T01:58:56.460

我相信您可以通过以下方式使用 YouTube Data v3 做到这一点：

以这种方式获取上传的视频（是Java示例）：

[https://developers.google.com/youtube/v3/docs/playlistItems/list#examples](https://developers.google.com/youtube/v3/docs/playlistItems/list#examples)

然后您可以使用以下方法检索这些播放列表项的视频资源：

[https://developers.google.com/youtube/v3/docs/videos/list](https://developers.google.com/youtube/v3/docs/videos/list)

然后您可以验证每个视频资源中的 status.privacyStatus（如果您上传的视频具有不同的 status.privacyStatus ..）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T19:36:31.180

1.  获取 ZF Gdata 库@http: [//framework.zend.com/downloads/latest](http://framework.zend.com/downloads/latest)

2.  运行自动加载器：

    ```
    set_include_path(APPPATH . 'third_party/zf/' . get_include_path());
    require 'Zend/Loader/Autoloader.php';
    Zend_Loader_Autoloader::getInstance(); 
    ```

3.  使用您的 youtube 登录名、密码和开发人员密钥创建一个 HTTP 实例（您必须获取一个）。

    ```
     $httpClient = Zend_Gdata_ClientLogin::getHttpClient(
                "Youtube LOGIN", 
                "Youtube PASSWORD", 
                'youtube'
        ); 
    ```

4.  使用您的证书实例化 GData

    ```
     $yt = new Zend_Gdata_YouTube(
                $httpClient, 
                null,
                null, 
                "Youtube Developer Key"
        ); 
    ```

5.  获取您的播放列表

    ```
     $playlistListFeed = $yt->getPlaylistListFeed("YOUR YOUTUBE CHANNEL NAME");
        //print_r($playlistListFeed); // uncomment to see the goods 
    ```

6.  准备一个数组以对更少的数据进行排序

    ```
     $data['feed'] = array(); 
    ```

7.  遍历所有内容，使用**is_private**来判断它是否是私有的

    ```
     foreach ($playlistListFeed as $playlistEntry) 
        {
          $feedUrl = $playlistEntry->getPlaylistVideoFeedUrl();
          $playlistVideoFeed = $yt->getPlaylistVideoFeed($feedUrl);

          foreach ($playlistVideoFeed as $video) {

            $data['feed'][] = array(
                'id' => $video->getVideoId(),
                'title' => $video->getTitle(),
                'thumbnail' => $video->getVideoThumbnails(),
                'is_private' => $video->isVideoPrivate(),
                'url' => $video->getVideoWatchPageUrl(),
                'flash_url' => $video->getFlashPlayerUrl ()
            );
        }

    } 
    ```

您可能需要对其进行修改以使其适合您的设置，希望这会有所帮助。

# firefox-addon - Firefox 插件 - 如何在 main.js 中创建 A 元素？

> ID：14612001
> 
> 赞同：0
> 
> 时间：2013-01-30T19:21:01.697
> 
> 标签：firefox-addon, firefox-addon-sdk

要从所有选项卡的 URL 中提取域，我们需要在附加组件的 main.js 文件中创建一个 A 元素：

```
function listTabs() {
var tabs = require("sdk/tabs");
for each (var tab in tabs)
{
var tab_url = document.createElement('a');
tab_url.href = tab.url;
var domain[] = tab_url.hostname;
} 
```

然而，我们得到一个错误“文档未定义”。我们也尝试了 content.document 但这也没有用。

（我知道还有其他方法可以提取域，但出于兼容性原因，这是我们的插件应该这样做的唯一方法）。

希望有人可以提供帮助。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T22:47:19.837

我真的不明白你要做什么，所以这里有两种不同的方法。

如果您需要访问页面的文档元素，则必须使用更底层的方法，除非您想简化并只使用`page-mod`.

以下是在选项卡内的页面上创建 A 元素的方法：

```
var { getTabs, getTabContentWindow } = require('sdk/tabs/utils');

function listTabs1() {
  var tabs = getTabs();
  tabs.forEach(function (tab) {
    // Fake a newly created document
    var window = getTabContentWindow(tab);    
    var document = window.document;
    var tab_url = document.createElement('a');
    tab_url.setAttribute("href", tab.url);
  });
} 
```

我建议使用 a`page-mod`来更改此页面，而不是上面的代码。

但是，如果您只是想检查每个选项卡的主机，您可以像以前一样遍历它们，然后使用该`URL`模块进行困难的主机名解析。

```
var URL = require('sdk/url').URL;
var tabs = require("sdk/tabs");

function listTabs2() {
  tabs.forEach(function (tab) {
      var url = URL(tab.url);
      console.log(url.hostname);
  });

} 
```

最后一个提示是，您可以轻松编写一个模块，使用`nsIEffectiveTLDService`来查找您认为拥有的主机名的顶级域，因为所有 URL 解析都容易出错。 [https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIEffectiveTLDService](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIEffectiveTLDService)

祝你好运！

# mysql - 如果 IS_CLOSED 为真，则显示“关闭”

> ID：14612010
> 
> 赞同：0
> 
> 时间：2013-01-30T19:21:37.903
> 
> 标签：mysql, sql

如果`is_closed`从查询中返回为 true，我如何告诉查询设置`closing_time`为`closed`，而不是显示行中的实际内容......例如`23:00:00`？

我试过

```
AND IF(is_closed = 1, 1, 0) closing_time = 'closed' 
```

但这导致

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 27 行的 'closing_time = 'closed' GROUP BY avenues.VENUE_NAME' 附近使用

谢谢！

**编辑** `closing_time`是一个日期字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:24:51.577

在您的字段列表中添加一个条件语句：

```
SELECT 
  < some column(s) here >, 
  CASE WHEN is_closed = 1 
       THEN 'closed' 
       ELSE closing_time END AS CLOSING_TIME_OR_CLOSED
... 
```

可以在此处找到经过测试的示例：[http ://sqlfiddle.com/#!2/108c1/2](http://sqlfiddle.com/#!2/108c1/2)

与 IF 语句相比，CASE 语句是 ANSI SQL，这意味着您可以在任何实现 ANSI 标准的 RDBMS 上运行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:40:28.760

如果`closing_time`是数据类型 TIME，那么您可以在 SELECT 列表中使用这样的表达式：

```
SELECT IF(is_closed=1,'closed',TIME_FORMAT(closing_time,'%H:%i')) AS closing_time 
```

请注意，此表达式将返回一个字符串（VARCHAR 数据类型）。

# java - Android Amazon Web Services 无法执行 HTTP 请求：sdb.amazonaws.com

> ID：14612012
> 
> 赞同：0
> 
> 时间：2013-01-30T19:21:52.897
> 
> 标签：java, android, amazon-web-services

保存到亚马逊 SimpleDB 时出现以下错误。

我的代码（取自亚马逊教程）：

```
Account.getSimpleDB().createDomain(new CreateDomainRequest(Account.getDomain())); 
```

Account 类方法（getSimpleDB() 和 getDomain() 我已经测试并工作过。问题肯定发生在 createDomain() 或 CreateDomainRequest() 的亚马逊方法中

错误：

```
01-30 13:35:54.645: E/AndroidRuntime(595): com.amazonaws.AmazonClientException: Unable to execute HTTP request: sdb.amazonaws.com
01-30 13:35:54.645: E/AndroidRuntime(595):  at com.amazonaws.http.AmazonHttpClient.executeHelper(Unknown Source)
01-30 13:35:54.645: E/AndroidRuntime(595):  at com.amazonaws.http.AmazonHttpClient.execute(Unknown Source)
01-30 13:35:54.645: E/AndroidRuntime(595):  at com.amazonaws.services.simpledb.AmazonSimpleDBClient.invoke(Unknown Source)
01-30 13:35:54.645: E/AndroidRuntime(595):  at com.amazonaws.services.simpledb.AmazonSimpleDBClient.createDomain(Unknown Source)
01-30 13:35:54.645: E/AndroidRuntime(595):  at com.zbien.pizza.Account.save(Account.java:72)
01-30 13:35:54.645: E/AndroidRuntime(595):  at com.zbien.pizza.Account$1.run(Account.java:231)
01-30 13:35:54.645: E/AndroidRuntime(595): Caused by: java.net.UnknownHostException: sdb.amazonaws.com
01-30 13:35:54.645: E/AndroidRuntime(595):  at java.net.InetAddress.lookupHostByName(InetAddress.java:497)
01-30 13:35:54.645: E/AndroidRuntime(595):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:294)
01-30 13:35:54.645: E/AndroidRuntime(595):  at java.net.InetAddress.getAllByName(InetAddress.java:256)
01-30 13:35:54.645: E/AndroidRuntime(595):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
01-30 13:35:54.645: E/AndroidRuntime(595):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
01-30 13:35:54.645: E/AndroidRuntime(595):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
01-30 13:35:54.645: E/AndroidRuntime(595):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
01-30 13:35:54.645: E/AndroidRuntime(595):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
01-30 13:35:54.645: E/AndroidRuntime(595):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
01-30 13:35:54.645: E/AndroidRuntime(595):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
01-30 13:35:54.645: E/AndroidRuntime(595):  ... 6 more 
```

对我来说非常奇怪的是，有时我运行它可以工作的代码，但其他时候却没有。似乎如果我改变无线网络，它就会停止工作，尽管我不确定这个理论。我已经在我的实际手机上测试了代码，但从未发现问题，但在我的 2.3.3 模拟器上运行它有时会出现以下错误......但并非总是如此。最后，我确实拥有 INTERNET android 权限，并且我目前确实有一个可用的无线连接。

有任何想法吗？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T00:28:03.570

在您的客户端配置中，如果您的服务是区域性的，我认为您需要设置所需的端点。你设置了终点吗？

# ruby-on-rails - heroku 出现服务器错误 - 我在哪里可以在日志中找到它们？

> ID：14612028
> 
> 赞同：0
> 
> 时间：2013-01-30T19:23:17.750
> 
> 标签：ruby-on-rails, heroku, rake, migrate

名为“product9”的 Ruby on Rails 应用程序

对于我得到的新功能的一个特定页面

```
We're sorry, but something went wrong. 
```

我用

```
heroku logs --app product9 -n200 
```

查看日志，但我所看到的生成错误的页面是：

```
2013-01-30T19:06:02+00:00 heroku[router]: at=info method=GET 
path=/medicaid host=product9.herokuapp.com fwd=173.14.167.133 dyno=web.1 queue=0
wait=11ms connect=31ms service=189ms status=500 bytes=643 
```

注意状态 500。

我如何才能找到有关问题的更多信息，即如何找到更详细的错误消息？

仅供参考：我在本地下载了该应用程序，但没有收到该错误。我必须运行 rake db:migrate 但我也在 Heroku ( `heroku run rake db:migrate`) 上完成了该操作。

我打开了 Airbrake 和 Exceptional 并重新启动了应用程序，但这似乎没有帮助或生成任何错误电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:51:59.407

答案是打开 Airbrake。

我还重新启动了服务器 ( `heroku server restart --app myapp`)。

现在我得到了很多可以使用的有趣细节！喜欢：

```
Started GET "/medicaid" for 173.14.167.133 at 2013-01-30 20:45:38 +0000
2013-01-30T20:45:37+00:00 heroku[web.1]: State changed from starting to up
2013-01-30T20:45:41+00:00 app[web.1]:     5: 
2013-01-30T20:45:41+00:00 app[web.1]:     4:    - javascript_include_tag "fullcalendar", "medicaid"
2013-01-30T20:45:41+00:00 app[web.1]: 
2013-01-30T20:45:41+00:00 app[web.1]: ActionView::Template::Error (medicaid.css isn't precompiled):
2013-01-30T20:45:41+00:00 app[web.1]:     2:    - stylesheet_link_tag "medicaid"
2013-01-30T20:45:41+00:00 app[web.1]:     1: - content_for :stylesheets do
2013-01-30T20:45:41+00:00 app[web.1]:     3: - content_for :javascripts do
2013-01-30T20:45:41+00:00 app[web.1]:   app/views/medicaid/index.html.haml:2:in `block in _app_views_medicaid_index_html_haml__252759609716080826_41268600'
... 
```

# javascript - Javascript函数joomla iframe自动高度

> ID：14612031
> 
> 赞同：0
> 
> 时间：2013-01-30T19:23:24.413
> 
> 标签：javascript, function, iframe, joomla, height

我在自己的域和 joomla 中托管 iframe！我已经设置了一个 iframe 包装器。我给出的网址开始于`http://www.`我的设置是：

```
scroll bars: auto
width: 100%
height: 500

auto height: yes
auto add: no 
```

我的两个浏览器都给我一个 javascript 错误（null 不是对象）：使用 safari、firefox 和 chrome。此错误指向 joomla 核心中的脚本：

```
<script type="text/javascript">
function iFrameHeight() {
    var h = 0;
    if (!document.all) {
        h = document.getElementById('blockrandom').contentDocument.height;
        document.getElementById('blockrandom').style.height = h + 60 + 'px';
    } else if (document.all) {
        h = document.frames('blockrandom').document.body.scrollHeight;
        document.all.blockrandom.style.height = h + 20 + 'px';
    }
}
</script> 
```

这使我的包装器保持在 500px 高度，我希望它根据 iframe 的高度自动添加。

我可以用什么代替这个功能？在此先感谢，劳伦特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:32:15.933

试试这个来调整 iframe 的大小，包括 iframe 的所有元素都应该设置为 100% 的高度。

```
<script type="text/javascript">
$(document).ready(function() {
   function iSize(){
document.getElementById('mainFrame').height = document.getElementById('mainFrame').contentWindow.document.body.scrollHeight;
document.getElementById('mainFrame').height = document.getElementById('mainFrame').contentDocument.documentElement.scrollHeight;
   }
});
</script> 
```

1.  将文件 components/com_wrapper/views/wrapper/tmpl/default.php 复制到 templates/your_template/html/com_wrapper/wrapper/
2.  打开文件模板/your_template/html/com_wrapper/wrapper/default.php
3.  将函数 iFrameHeight() 替换为以下新函数：

```
function pageY(elem) {
        return elem.offsetParent ? (elem.offsetTop + pageY(elem.offsetParent)) : elem.offsetTop;
    }
    var buffer = 0; //scroll bar buffer
    function iFrameHeight() {
        var height = document.documentElement.clientHeight;
        height -= pageY(document.getElementById('blockrandom'))+ buffer ;
        height = (height < 0) ? 0 : height;
        document.getElementById('blockrandom').style.height = height + 'px';
    }
    document.getElementById('blockrandom').onload=iFrameHeight;
    window.onresize = iFrameHeight; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T09:06:04.393

这段代码对我不起作用。但我解决了一个：

```
var the_height = document.getElementById('blockrandom').contentWindow.document.body.scrollHeight;
document.getElementById('blockrandom').style.height = the_height; //height + 'px'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T09:09:44.210

抱歉，正确的行： var the_height=document.getElementById('blockrandom').contentWindow.document.body.scrollHeight; document.getElementById('blockrandom').height = the_height;

ps版本：1.6版本joomla：3.2.1

# jsf-2 - 如何迭代地图 在primefaces的数据表中

> ID：14612034
> 
> 赞同：4
> 
> 时间：2013-01-30T19:23:30.803
> 
> 标签：jsf-2, collections, primefaces, datatable, loops

将 JSF 2.1 与 primefaces 一起使用

```
class FOO{
String name;
String value;
public void setName(String name){
this.name=name;
}
public String getName(){
return this.name;
}
public void setValue(String value){
this.value=value;
}
public String getValue(){
return this.value;
}

} 
```

我有一个`Map<String, List<FOO>>`

标题名称应该是 Map 的 Key。我需要创建多个列（即 Map 的大小），并且每列都应该有 FOO 列表以在行中显示 FOO.Name。

**例如：** 如果地图的大小是 4

列-----Key1

第一列的行 -`List<FOO>`针对 Key1

列-----Key2

第一列的行 -`List<FOO>`针对 Key2

列-----Key3

第一列的行 -`List<FOO>`针对 Key3

列-----Key4

第一列的行 -`List<FOO>`针对 Key4

有人能告诉我使用什么组件在 xhtml 页面中显示这种类型的输出吗？我曾尝试使用动态数据表创建，但无法显示这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:59:23.673

你有一个错误的数据结构。将其更改为正确的数据结构。最简单的方法是收集`List<Map<String, Object>>`代表`rows`属性的数据。`Map`表示列，以列名作为键。将这些列名称收集在一个单独`List<String>`的代表`columns`属性中。最后显示如下`<p:columns>`：

```
<p:dataTable value="#{bean.rows}" var="row">
    <p:columns value="#{bean.columns}" var="column">
        #{row[column]}
    </p:columns>
</p:dataTable> 
```

如有必要，您可以将奇怪的数据结构转换为正确的数据结构（并假设每个`List<FOO>`数据结构的大小相同；否则整个数据结构的意义不大）：

```
Map<String, List<FOO>> wrongDataStructure = createItSomehow();
List<String> columns = new ArrayList<String>(wrongDataStructure.keySet()); // Note I expect LinkedHashMap ordering here.
List<Map<String, Object>> rows = new ArrayList<Map<String, Object>>();
int size = wrongDataStructure.values().iterator().next().size();

for (int i = 0; i < size; i++) {
    Map<String, Object> row = new HashMap<String, Object>();

    for (String column : columns) {
        row.put(column, wrongDataStructure.get(column).get(i).getName());
    }

    rows.add(row);
}

// Now use "columns" and "rows". 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:20:54.643

如果不使用技巧，我想不出办法做到这一点：由于地图中列表的大小可能因每个键集而异，因此您需要知道具有最大项目集的列表的大小。通过知道你可以想出这个奇怪的解决方案：这个想法是在 for 循环中有一个 for 循环。

```
private Map<String, List<Foo>> fooMap = Maps.newHashMap();
private List<Foo> highestNumberOfFoos;

private init()
{
    highestNumberOfFoos = Lists.newArrayList(new Foo("a", "b"), new Foo("c", "d"), new Foo("e", "f")); // We know that there won't be any list who has more items than this item.
    fooMap.put("name1", highestNumberOfFoos);
    fooMap.put("name2", Lists.newArrayList(new Foo("g", "h"), new Foo("i", "j")));
} 
```

...在视图中：

```
<table>
      <thead>
              <tr>
                  <ui:repeat value="#{bean.fooMap.keySet().toArray()}" var="key">
                         <td>#{key}</td>
                   </ui:repeat>
              </tr>
       </thead>
       <tbody>
             <ui:repeat value="#{bean.highestNumberOfFoos}" var="dummyFoo" varStatus="vs">
             <tr>
                 <ui:repeat value="#{bean.fooMap.entrySet().toArray()}" var="innerEntry">
                     <td>#{innerEntry.value[vs.index].name}</td>
                  </ui:repeat>
             </tr>
                  </ui:repeat>
       </tbody>
 </table> 
```

# java - 如何使用 Spring 为 Java Web 开发设置 Eclipse？

> ID：14612037
> 
> 赞同：0
> 
> 时间：2013-01-30T19:23:34.160
> 
> 标签：java, eclipse, spring, jakarta-ee, ide

我正在关注有关 Spring 开发的[本教程](http://static.springsource.org/docs/Spring-MVC-step-by-step/overview.html)，该教程描述了设置 Eclipse、使用 Eclipse Europa、Web 工具平台 (WTP) 和 Project Spring IDE 项目。

然而，Eclipse Europa 网站说它是关于 2007 年的一个项目，而 Spring IDE 项目网站似乎也死了/坏了。所以那篇文章可能已经过时了。

我已经从 Eclipse 的下载包中下载了“Java EE Developers 的 Eclipse IDE”包。这是否足够或者我应该获得 Europa、Web 工具平台和 Spring IDE？

任何其他使 Spring 开发更容易使用 Eclipse 的插件/包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:22:25.483

我在最近的几个项目中使用了[Spring Tool Suite](http://www.springsource.org/sts)，它非常适合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:25:00.640

IMO [Spring ToolSuite](http://www.springsource.org/sts)是规范的 Eclipse/Spring 包。

欧罗巴已经很老了。不知道为什么要考虑。IIRC Juno 是最新的。

# c++ - 在 C++ 中使用 SQLite - 包装器？

> ID：14612038
> 
> 赞同：0
> 
> 时间：2013-01-30T19:23:38.243
> 
> 标签：c++, sqlite

对于一个项目，我将使用 SQLite 和我们用 C++ 开发的一些软件。我在 PHP 中使用了一些 SQLite，但对于在 Web 开发之外使用数据库有点陌生。我想知道我是否应该：

1.  直接学习 C++ 实现，然后像这样使用它。
2.  在 C++ 中找到一个现有的 SQLite 包装器，因为它可以让我免于头痛。

我正在考虑使用包装器，因为没有使用 SQLite 的函数看起来可能有点混乱。为了干净的代码，我倾向于使用包装器。如果是这样，哪个包装器最干净且最常用？是否有开发人员使用的 SQLite 标准包装器？

否则，是否有在 C++ 中使用 SQLite 的好教程？我一直无法找到一套清晰的说明（是的，我已经查看了文档）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-12-10T22:36:15.617

如果你熟悉 ORM [https://en.wikipedia.org/wiki/Object-relational_mapping](https://en.wikipedia.org/wiki/Object-relational_mapping)

我会推荐这个库，它使用起来非常简单，我已经使用了一段时间了，它比较容易使用，你只需要 sqlite 头文件和 sqlite_orm 库头文件就可以使用它。

[https://github.com/fnc12/sqlite_orm](https://github.com/fnc12/sqlite_orm)

这是该库的 User 和 UserType 表的直接示例：

```
 ``struct User{
    int id;
    std::string firstName;
    std::string lastName;
    int birthDate;
    std::unique_ptr<std::string> imageUrl;
    int typeId;
};

struct UserType {
    int id;
    std::string name;
};

using namespace sqlite_orm;
auto storage = make_storage("db.sqlite",
                            make_table("users",
                                       make_column("id", &User::id, autoincrement(), primary_key()),
                                       make_column("first_name", &User::firstName),
                                       make_column("last_name", &User::lastName),
                                       make_column("birth_date", &User::birthDate),
                                       make_column("image_url", &User::imageUrl),
                                       make_column("type_id", &User::typeId)),
                            make_table("user_types",
                                       make_column("id", &UserType::id, autoincrement(), primary_key()),
                                       make_column("name", &UserType::name, default_value("name_placeholder"))));`` 
```

# iphone - CALayer = 总滞后

> ID：14612040
> 
> 赞同：1
> 
> 时间：2013-01-30T19:23:43.860
> 
> 标签：iphone, uibutton, calayer

所以我有一个滚动视图，一侧有 10 个按钮。总是当我滚动到那个页面时，我会得到很多糟糕的表现。然后我注意到是 CALayer 造成了延迟！我用过

```
button.layer.cornerRadius = 25;
button.layer.clipsToBounds = YES; 
```

当我在互联网上搜索时，我发现我可以使用

```
button.layer.shouldRasterize = YES; 
```

它应该工作得更好。但它只是降低了分辨率，并没有提高性能。所以我尝试在 GIMP 中剪掉边缘，但是当我将它们添加到 XCode 时，它​​们被填充为白色！所以，请告诉我，有没有什么方法可以让我在不表现不佳的情况下通过 CALayer 或不通过 CALayer，这并不重要。任何帮助表示赞赏！

（ps.如果您需要整个代码或图像，请告诉我，我会添加它）

更新：

它只适用于 iPhone 4 的性能不佳，我在我的 iPad Mini 上试过，效果很好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T19:42:03.143

您可以按照您的建议使用 GIMP 创建这些图像。成功的关键是`opaque`将视图的值设置为`NO`，这意味着启用透明度。但请记住，将视图的 opaque 值设置为 NO 可能会导致性能损失，尤其是在快速变化的视图（如`UIScrollViewCell`.

在你的情况下它足够快，在其他情况下可能不是。如果背景是单一颜色，最好在图像处理程序中使用该颜色作为背景颜色。（并设置`opaque = YES;`）

# wordpress - Timthumb 不工作

> ID：14612042
> 
> 赞同：0
> 
> 时间：2013-01-30T19:23:51.887
> 
> 标签：wordpress, bluehost, timthumb

出于某种原因，timthumb 无法在我的网站上运行。我已经尝试了所有 chmod 的东西，编辑了我的 htaccess 以包含它需要的内容，但它仍然无法正常工作。

该网站在这里：

69.89.31.103/~infoconc/

主持人是bluehost，我从未与之合作过。不是我的选择。

需要帮忙！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:47:23.063

我看到你的 timthumb 给出了这个错误：`[an error occurred while processing this directive]`

所以，试试这个：

```
- Go to cPanel
- Open File Manager from Files section
- Navigate to domain folder
- Check "Perms" column on far right hand side
- Files should be set to: 0644 (this is the UNIX file permissions)
- Folders should be set to: 0755 
```

来自[bluehostforum](http://www.bluehostforum.com/showthread.php?32117-an-error-occurred-while-processing-this-directive&p=102341#post102341)，未经我测试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T19:42:58.417

可能缺少 GD 库。您可以通过安装并重新启动 Apache 然后检查您的文件权限来修复它。

* * *

**步骤 1) 安装 GD 库**

```
sudo apt-get install php5.6-gd 
```

**步骤 2) 重新启动 Apache2**

```
sudo /etc/init.d/apache2 restart 
```

# oracle - SQL 将数据从下划线分隔到 CamelCase

> ID：14612043
> 
> 赞同：2
> 
> 时间：2013-01-30T19:23:54.853
> 
> 标签：oracle, plsql, camelcasing

我想更改下划线分隔的字符串：

```
my_underscore_separated_string 
```

进入骆驼案例：

```
MyUnderscoreSeparatedString 
```

用一条 SQL 语句。进行这种转换的最佳方法是什么（在 Oracle 的表中）？

我可以将下划线与 REGEXP_REPLACE 匹配，但无法更改反向引用的大小写。INSTR/SUBSTR 操作只允许我一次转换一个下划线。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T19:37:33.153

**如何使用 SQL（在 Oracle 中）将下划线分隔的单词转换为驼峰式：**

1.  用空格替换所有下划线。

2.  对字符串使用此函数：`INITCAP(string)`

3.  然后用空白字符串替换所有空格。

您应该能够在一行中做到这一点。SQL 没有针对这些类型的字符串操作任务进行优化，所以如果你做了很多这些，预计它会花费太长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:23:54.853

一个小的 PL/SQL 包装器可以重复运行转换，直到找不到更多的下划线。我添加了一些额外的语句来匹配我公司的驼峰式约定（首字母大写和大写的“ID”）。

```
UPDATE md_field SET NAME = lower(NAME) WHERE NAME LIKE '%\_%' ESCAPE '\';
UPDATE md_field SET NAME = upper(substr(NAME, 1, 1))||substr(NAME, 2) WHERE NAME LIKE '%\_%' ESCAPE '\';
UPDATE md_field SET NAME = REPLACE(NAME, 'id', 'ID') WHERE NAME LIKE '%\_%' ESCAPE '\';
DECLARE
vsql             LONG;
v_cnt            NUMBER;
BEGIN
  LOOP
    vsql := 'UPDATE md_field SET NAME = substr(NAME, 1, instr(NAME, ''_'')-1)||upper(substr(NAME, instr(NAME, ''_'')+1, 1))||substr(NAME, instr(NAME, ''_'')+2) WHERE NAME LIKE ''%\_%'' ESCAPE ''\''';
    EXECUTE IMMEDIATE vsql;
    SELECT COUNT (*) INTO v_cnt FROM md_field WHERE NAME LIKE '%\_%' ESCAPE '\';
    EXIT WHEN v_cnt = 0;
  END LOOP;
END;
/ 
```

# html5-video - HTML5视频的currentTime属性问题

> ID：14612045
> 
> 赞同：0
> 
> 时间：2013-01-30T19:23:57.747
> 
> 标签：html5-video

我遇到了 HTML5 视频的 currentTime 属性的问题。我的小程序根据设备分辨率提供不同的视频（不同的分辨率）。我想在每个 window.onload、window.resize 和 window.orientationchange-Event 之后检查设备分辨率。在这些事件之后，可能会提供新视频（使用不同的更合适的分辨率）。我不想再次在第 0 秒开始播放视频，因此我尝试在事件发生之前捕获视频的 currentTime。我的解决方案在 IE 10 中运行良好。但是所有其他浏览器都失败了......我不知道为什么......

请不要刻薄……我对所有这些网络东西都很陌生，我真的尽我所能。

希望你们中的任何人都可以帮助我...

这是我的代码：

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-    scale=1">
</head>

<body>

    <video id=videoPlayer controls="controls"> </video>

<script>

var pixelRatio = 1.0;
var availScreenWidth;
var availScreenHeight;
var videoResolution;
var type;
var video = document.getElementById('videoPlayer');
var pos;

window.onload = updateVideo;
window.orientationchange = updateVideo;
window.onresize = updateVideo;

function updateVideo(){   

    pos = video.currentTime;

    updateResolution();

    if(availScreenWidth <800){
        videoResolution = '640x360';
    }
    if(availScreenWidth >=800 && availScreenWidth < 1137){
        videoResolution = '960x540';
    }
    if(availScreenWidth >=1137 && availScreenWidth < 1367){
        videoResolution = '1280x720';
    }
    if(availScreenWidth >=1367 && availScreenWidth < 1681){
        videoResolution = '1600x900';
    }
    if(availScreenWidth >= 1681){
        videoResolution = '1920x1080';
    }

    if (video.canPlayType("video/webm") == 'maybe' || video.canPlayType("video/webm") == 'probably') {
        type = '.webm';
    }
    else if (video.canPlayType("video/mp4") == 'maybe' || video.canPlayType("video/mp4") == 'probably') {
        type = '.mp4';
    }

   video.src = videoResolution + type;

    video.addEventListener('loadedmetadata', function() {
        video.currentTime = pos;
        video.play();}, false);

    }

    video.load();

function updateResolution(){

    if (window.devicePixelRatio){
        pixelRatio = window.devicePixelRatio;
    }
    availScreenWidth = document.documentElement.clientWidth * pixelRatio;
    availScreenHeight = document.documentElement.clientHeight * pixelRatio;

}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:24:52.990

调用在`video.load()`外面`updateVideo()`- 很难看到，因为选项卡有点不均匀。因此，当您的更新事件发生时，视频源可能实际上并未更新。尝试将该调用放在该事件处理函数中。

但是，一旦您开始使用它，您可能会发现自己遇到了很多中断和比您想要的更多的更新。我尝试了类似的情况，发现它有助于限制调整大小的更新。函数完成后，保存时间戳。下次收到resize事件时，如果小于100ms-300ms左右，提前设置超时返回。（确保也清除所有未完成的超时。）这样，当用户拖动窗口大小时，您不必更新太多次。

# logic - 如何将这些前提转换为逻辑论证？

> ID：14612048
> 
> 赞同：0
> 
> 时间：2013-01-30T19:24:02.963
> 
> 标签：logic, expression

我有以下三个前提：

```
P or Q
P => R
Q => R 
```

符号**=>**表示*“暗示”*操作。我知道这些前提构成了一个困境，但是如何将它们组合成一个逻辑表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:30:05.630

由于列表中的每个命题同时为真，因此`and`它们之间存在隐含。

```
(P v Q) ^ (P => R) ^ (Q => R) 
```

但我们知道这`(P v Q)`是`True`：

```
True ^ (P => R) ^ (Q => R) 
```

这给我们留下了：

```
(P => R) ^ (Q => R) 
```

类似的含义`P => R`转化为：

```
~(P ^ ~R) 
```

并且可以转换为：

```
(~P v R) 
```

使用它，我们有：

```
(~P v R) ^ (~Q v R) 
```

如果我们分解我们得到：

```
(~P ^ ~Q) v R 
```

自从：

```
(~P ^ ~Q) == ~(P v Q) 
```

我们有：

```
~(P v Q) v R 
```

但我们知道这`(P v Q)`是`True`：

```
~True v R 
```

或者：

```
False v R 
```

这导致了最终答案：

```
R 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:53:53.393

最初的问题展示只是自然演绎中的或消除。这是直觉逻辑的原则，这里不需要关于布尔代数的经典论证。

直观地说，P v Q 类似于 P 或 Q 的不相交和的类型（类似于某些编程语言中的联合类型）。如果您有一条从 P => R 出发的方法，另一条从 Q => R 出发——换句话说，分别是该类型的函数——您可以将它们放在一起以消除析取并获得结果 R两种情况。

这有时表现为像这样的高阶函数组合器：

```
case: P v Q => (P => R) => (Q => R) => R 
```

您实际上可以将 P v Q*定义* 为允许对任意 R 进行这种推理的逻辑运算符。

进一步注意，这是逻辑和编程的 Curry-Howard 对应关系的关键方面之一。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T19:47:13.070

对于布尔代数，蕴涵 A=>B 应读作“如果 A 为真 B 不能为假”，它有一个等效公式：蕴涵 A=>B 是 (!A || B) 。

在你的情况下 P=>R ~ !P || R , Q=>R ~ !Q||R 所以我们有 !(P || Q) && R

更新：复杂表达式通常由 &-ing 简单表达式组成。很可能你应该证明一些表达式 X （假设 P == “下雨了”，Q == “下雪了”，R == “我会带一把雨伞”。你应该证明像 X = =“如果下雨下雪我会带伞”）

所以你这样做 ((P || Q) && (P=>R) && (Q => R) ) => X. 当简单表达式为真时，你应该检查它是否适用于所有情况。左边部分正好等于 P||Q && R

# python - Tkinter 按钮和输入框

> ID：14612049
> 
> 赞同：0
> 
> 时间：2013-01-30T19:24:06.390
> 
> 标签：python, tkinter, grid-layout

如何在下面的代码中围绕网格移动按钮？每当我尝试更改行和列时，什么都没有发生。另外，是否有可能使文本框更大，以便我可以在那里放置句子，因为现在文本已经脱离了盒子？

```
from Tkinter import*

class Application(Frame):
    def __init__(self, master):
        global e
        global b
        Frame.__init__(self, master)
        self.grid()
        b=Entry(bg = 'yellow')
        b.grid(row=19, column=40)
        e=Entry(bg = 'grey')
        e.grid(row=15, column = 1000)
        self.buttons()

    def instructions(self):
        b.insert(0, 'HI')   

    def start_game(self):
        e.insert(0, "I want to put a sentance here")

    def buttons(self):
        self.b = Button(self, text = "Instructions", command = self.instructions)
        self.b.grid(row=15, column = 25)

        self.b1 = Button(self, text = "Start Game", command = self.start_game)
        self.b1.grid(row=10, column = 10)

root = Tk()
root.title("Box")
root.geometry("400x400")        
app=Application(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:10:49.897

要在网格中移动按钮，您只需更改行和列。你说那行不通，但你一定是做错了什么——这正是你做的。

我注意到示例代码试图在第 1000 列中放置一些内容。假设您在除第 10、25 和 40 列之外的其他列中没有任何内容，则所有其他列的宽度都将为零，因此它看起来就像这个对象在第四列。

要使文本框更大，请给它更大的宽度：

```
b=Entry(bg = 'yellow', width=100) 
```

使其更大的另一种方法是强制其所在的列更大。

# javascript - 根据收到的 ajax 发布数据指定返回值

> ID：14612051
> 
> 赞同：0
> 
> 时间：2013-01-30T19:24:10.417
> 
> 标签：javascript, jquery, ajax

我想根据返回的数据值验证我的表单，除非我返回整个 post 函数为 false，否则它不会返回 false。是否可以根据满足哪个条件来区分它是如何返回的？这就是我所拥有的：

```
function postValidation(){

   $.post('file.php',$('#form').serialize(), function(data) {

      if(data !== 'good') {
             alert(data);
             return false;
          }  else

            if(data  == 'good') 
            {return true;}
   });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:27:08.173

你想做的事情是不可能的。您不能使用 ajax 回调的返回值。一切都必须在回调本身（或任何依赖的回调）内完成。

```
$("#form").on('submit', function (e) {
    //stop form from submitting
    postValidation();
    e.preventDefault();
});

function postValidation () {
   $.post(...).done(function (data) {
       if (data === 'good') {
           //handle form success; do whatever you want
           window.location.reload();
       }
   });
} 
```

# javascript - qxMobile – 带有复选框的列表

> ID：14612052
> 
> 赞同：0
> 
> 时间：2013-01-30T19:24:11.623
> 
> 标签：javascript, mobile, frameworks, qooxdoo

我正在尝试在 qooxdoo Mobile 中创建一个列表，该列表在每个项目的侧面都有一个复选框（例如在 Android 的设置菜单中）。我现在已经从列表中扩展并编写了我自己的提供者和渲染器。这些文件可以在下面找到。此外，可以在此处查看我当前进度的实时示例：[示例页面](http://www.airblader.de/qxCheckBoxList/index.html#)

现在是什么状态？如您所见，复选框没有显示 - 但它们在那里（检查 DOM）。覆盖 CSS 以显示本机复选框实际上会显示它们，但框架框只是不显示。我的问题是：如何解决这个问题？我真的认为这是值得解决的，因为我相信这将是许多人可以从中受益的贡献。

编辑：我已经尝试将复选框包装在一个容器中，它也没有改变任何东西。

文件：

**qx.ui.mobile.list.CheckBoxList：（**在[pastebin.org 上](http://pastebin.com/X5HJwZSb)）

```
qx.Class.define('qx.ui.mobile.list.CheckBoxList', {
    extend : qx.ui.mobile.list.List,

    // overridden
    construct : function (delegate) {
        this.base( arguments );

        this.__provider = new qx.ui.mobile.list.provider.CheckBoxListItemProvider( this );
        if ( delegate ) {
            this.setDelegate( delegate );
        }
    }    
}); 
```

**qx.ui.mobile.list.provider.CheckBoxListItemProvider**（[在 pastebin.org 上](http://pastebin.com/vj3CPy9p)）

```
qx.Class.define('qx.ui.mobile.list.provider.CheckBoxListItemProvider', {
    extend : qx.ui.mobile.list.provider.Provider,

    members : {
        // overridden
        _createItemRenderer : function () {
            return new qx.ui.mobile.list.renderer.CheckBoxListItemRenderer();
        }
    }
}); 
```

**qx.ui.mobile.list.renderer.CheckBoxListItemRenderer**（[在 pastebin.org 上](http://pastebin.com/hEvNMG0A)）

```
qx.Class.define('qx.ui.mobile.list.renderer.CheckBoxListItemRenderer', {
    extend : qx.ui.mobile.list.renderer.Abstract,

    // overridden
    construct : function () {
        this.base( arguments, new qx.ui.mobile.layout.HBox().set( { alignY: 'middle' } ) );
        this._init();
    },

    members : {
        __title : null,
        __subtitle : null,
        __checkbox : null,
        __leftContainer : null,

        getTitle : function () {
            return this.__title.getValue()
        },

        setTitle : function (title) {
            this.__title.setValue( title );
        },

        getSubTitle : function () {
            return this.__subtitle.getValue();
        },

        setSubTitle : function (subtitle) {
            this.__subtitle.setValue( subtitle );
        },

        getValue : function () {
            return this.__checkbox.getValue();
        },

        setValue : function (checked) {
            this.__checkbox.setValue( checked );
        },

        _init : function () {
            this.__leftContainer = this._createLeftContainer();
            this.add( this.__leftContainer, { flex: 1 } );

            this.__title = this._createTitle();
            this.__leftContainer.add( this.__title );

            this.__subtitle = this._createSubTitle();
            this.__leftContainer.add( this.__subtitle );

            this.__checkbox = this._createCheckBox();
            this.add( this.__checkbox );
        },  

        _createLeftContainer : function () {
            return new qx.ui.mobile.container.Composite( new qx.ui.mobile.layout.VBox() );
        },

        _createTitle : function () {
            var title = new qx.ui.mobile.basic.Label();
            title.addCssClass( 'list-itemlabel' );

            return title;
        },

        _createSubTitle : function () {
            var subtitle = new qx.ui.mobile.basic.Label();
            subtitle.addCssClass( 'subtitle' );

            return subtitle;
        },  

        _createCheckBox : function () {
            var checkbox = new qx.ui.mobile.form.CheckBoxListCheckBox();

            return checkbox;
        },

        // overridden
        _applyShowArrow : function (value, old) {
            return;
        },

        // overriden
        reset : function () {
           this.__title.setValue( '' );
           this.__subtitle.setValue( '' );
           this.__checkbox.setValue( false );
        }
    },   

    // overriden
    destruct : function () {
        this._disposeObjects( '__title', '__subtitle', '__checkbox', '__leftContainer' );
    }
}); 
```

**qx.ui.mobile.form.CheckBoxListCheckBox**（[在 pastebin.org 上](http://pastebin.com/i0Uk06Pg)）

```
qx.Class.define('qx.ui.mobile.form.CheckBoxListCheckBox', {
    extend : qx.ui.mobile.form.CheckBox,

    members : {
        // overridden
        _onAppear : function () {
            // we purposely don't call this.base( arguments ) because it would create a label that we don't need
            qx.event.Registration.removeListener( this, 'appear', this.__onAppear, this );
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T01:12:27.050

复选框问题已解决：af5abf92837255b6b60d30832a63d2a07cd7ae42

以下是我用于在列表中使用复选框的一些片段：

列表的模型是一个 qx.data.Array，它包含几个数据 bean“newGameModelObject”，它有一个属性“checked”。

如果您更改“checked”属性，由于“changeBubble”事件，列表应自动重新呈现。为了触发“changeBubble”事件，数据 bean 必须包含 mixin“MEventBubbling”，并且属性应用方法必须是“_applyEventPropagation”

```
qx.Class.define("newGameModelObject",
{
  extend : qx.core.Object,
  include : [qx.data.marshal.MEventBubbling],

  properties :
  {
    checked :
    {
      check :"Boolean",
      init : false,
      apply : "_applyEventPropagation"
    }  
  }
}); 
```

这是我使用的列表的 configureItem 部分：

```
 this.__list = new qx.ui.mobile.list.List({
        configureItem : function(item, data, row)
        {
          [...]

          var checkBox = new qx.ui.mobile.form.CheckBox(data.getChecked());
          checkBox.addListener("changeValue", function(evt){
            var item4change = self.__list.getModel().getItem(row);
            item4change.setChecked(evt.getData());
          });

          item.addToButtonContainer(checkBox);
        },

        createItemRenderer : function() {
          return new renderer.Button();
        }
      }
 ); 
```

您必须在 configureItem 上创建复选框并将其添加到 ButtonContainer。然后你必须听它的“changeValue”事件并改变行项目的选中状态。现在模型自行更新并触发列表的重新渲染>>复选框显示新状态。

希望这有助于最终解决您的问题。

问候克里斯托弗

# jquery - jQuery UI 工具提示错误

> ID：14612054
> 
> 赞同：0
> 
> 时间：2013-01-30T19:24:17.170
> 
> 标签：jquery, tooltip, visibility, jquery-tooltip, jquery-ui-tooltip

我正在使用 jQuery UI 工具来提供工具提示，我发现了一个我无法复制（向您展示）或摆脱的特殊错误。通常，这个工具会使用`title="whatever"`标签的一部分来给你一个花哨的 css 版本的悬停标签。这是有效的，但它也会获取我页面的标题`<head><title>My Page</title></head>`并将其显示在左下角。此外，它也不是相同的工具提示编号，否则我可以忽略该实例。例子`#ui-tooltip-0`。我需要防止工具提示收集我的标题标签。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T11:28:59.717

对我有用的解决方案：

```
$('body').tooltip() 
```

干杯

# apache - mod_mono 在全新 centos 安装时出现 EOF 错误

> ID：14612055
> 
> 赞同：3
> 
> 时间：2013-01-30T19:24:36.050
> 
> 标签：apache, mono, centos, mod-mono

我全新安装了完全更新的 Centos 6.3。我已经从源代码安装了 mono、xsp 和 mod_mono。每个包都编译得很好。它们都安装了前缀 /usr/local/mono（所以一切都在 /usr/local/mono 下）

我已将“包括 conf/mod_mono.conf”添加到我的 httpd.conf 文件中。[我使用http://go-mono.com/config-mod-mono/](http://go-mono.com/config-mod-mono/)生成了一个虚拟主机。为了获得正确的二进制路径，我不得不稍微定制它，但就是这样。

这是我的虚拟主机内容（我删除了评论）：

```
<VirtualHost *:80>
  ServerName sandbox.domain.com
  ServerAdmin web-admin@sandbox.domain.com
  DocumentRoot /u01/www/vhosts/asp
  MonoServerPath sandbox.domain.com "/usr/local/mono/bin/mod-mono-server2"
  MonoDebug sandbox.domain.com true
  MonoSetEnv sandbox.domain.com MONO_IOMAP=all
  MonoApplications sandbox.domain.com "/:/u01/www/vhosts/asp"
  <Location "/">
    Allow from all
    Order allow,deny
    MonoSetServerAlias sandbox.domain.com
    SetHandler mono
  </Location>
</VirtualHost> 
```

这是我要加载的页面（default.aspx）：

```
<html>
<body>
Hello
</body>
</html> 
```

它既好又简单。当我去它时，它给了我以下错误：

```
System.Web.Compilation.CompilationException
CS1576: The line number specified for #line directive is missing or invalid

Description: Error compiling a resource required to service this request. Review your source file and modify it to fix this error.
Details: CS1576: The line number specified for #line directive is missing or invalid
Error origin: Compiler
Error source file: /default.aspx
Exception stack trace:
at System.Web.Compilation.AssemblyBuilder.BuildAssembly (System.Web.VirtualPath virtualPath, System.CodeDom.Compiler.CompilerParameters options) [0x0035f] in /usr/local/src/mono-3.0.3/mcs/class/System.Web/System.Web.Compilation/AssemblyBuilder.cs:853 
  at System.Web.Compilation.AssemblyBuilder.BuildAssembly (System.Web.VirtualPath virtualPath) [0x00000] in /usr/local/src/mono-3.0.3/mcs/class/System.Web/System.Web.Compilation/AssemblyBuilder.cs:731 
  at System.Web.Compilation.BuildManager.GenerateAssembly (System.Web.Compilation.AssemblyBuilder abuilder, System.Web.Compilation.BuildProviderGroup group, System.Web.VirtualPath vp, Boolean debug) [0x00258] in /usr/local/src/mono-3.0.3/mcs/class/System.Web/System.Web.Compilation/BuildManager.cs:846 
  at System.Web.Compilation.BuildManager.BuildInner (System.Web.VirtualPath vp, Boolean debug) [0x0011c] in /usr/local/src/mono-3.0.3/mcs/class/System.Web/System.Web.Compilation/BuildManager.cs:469 
```

文档根目录中没有其他文件。只是default.aspx。apache 错误日志中不会生成任何条目。如果我将引擎从 mod-mono-server2 切换到 mod-mono-server4（我们更愿意使用），我会在 apache 错误日志中得到以下信息（在 apache 启动时）：

```
Listening on: /tmp/mod_mono_server_globalListening on: /tmp/mod_mono_server_global
Root directory: /

Root directory: /
Error: Address already in use
mod-mono-server4
Exception caught during reading the configuration file:
System.MissingMethodException: Method not found: 'System.Configuration.IConfigurationSectionHandler.Create'.
  at System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection (System.String configKey) [0x00000] in <filename unknown>:0
  at System.Configuration.ConfigurationManager.GetSection (System.String sectionName) [0x00000] in <filename unknown>:0
  at System.Configuration.ConfigurationManager.get_AppSettings () [0x00000] in <filename unknown>:0
  at Mono.WebServer.Apache.Server.get_AppSettings () [0x00001] in /usr/local/src/xsp-2.10.2/src/Mono.WebServer.Apache/main.cs:208
  at Mono.WebServer.Apache.Server+ApplicationSettings..ctor () [0x0002a] in /usr/local/src/xsp-2.10.2/src/Mono.WebServer.Apache/main.cs:63
mod-mono-server4
Listening on: /tmp/mod_mono_server_sandbox.domain.com
Root directory: /u01/www/vhosts/asp 
```

访问同一页面后，我收到 500 错误，并在 apache 错误日志中显示以下内容：

```
Worker initialization exception occurred. Continuing anyway:
System.MissingMethodException: Method not found: 'System.Configuration.IConfigurationSectionHandler.Create'.
  at System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection (System.String configKey) [0x00000] in <filename unknown>:0
  at System.Configuration.ConfigurationManager.GetSection (System.String sectionName) [0x00000] in <filename unknown>:0
  at System.Configuration.ConfigurationManager.get_AppSettings () [0x00000] in <filename unknown>:0
  at Mono.WebServer.ModMonoWorkerRequest..cctor () [0x00034] in /usr/local/src/xsp-2.10.2/src/Mono.WebServer.Apache/ModMonoWorkerRequest.cs:85
System.NullReferenceException: Object reference not set to an instance of an object
  at Mono.WebServer.BaseApplicationHost.EndOfRequest (Mono.WebServer.MonoWorkerRequest mwr) [0x00029] in /usr/local/src/xsp-2.10.2/src/Mono.WebServer/BaseApplicationHost.cs:141
  at Mono.WebServer.ModMonoApplicationHost.ProcessRequest (Int32 reqId, System.String verb, System.String queryString, System.String path, System.String protocol, System.String localAddress, Int32 serverPort, System.String remoteAddress, Int32 remotePort, System.String remoteName, System.String[] headers, System.String[] headerValues, System.Object worker) [0x00173] in /usr/local/src/xsp-2.10.2/src/Mono.WebServer.Apache/ModMonoApplicationHost.cs:109
  at (wrapper remoting-invoke-with-check) Mono.WebServer.ModMonoApplicationHost:ProcessRequest (int,string,string,string,string,string,int,string,int,string,string[],string[],object)
  at Mono.WebServer.ModMonoWorker.InnerRun (System.Object state) [0x00199] in /usr/local/src/xsp-2.10.2/src/Mono.WebServer.Apache/ModMonoWorker.cs:239
  at Mono.WebServer.ModMonoWorker.Run (System.Object state) [0x00002] in /usr/local/src/xsp-2.10.2/src/Mono.WebServer.Apache/ModMonoWorker.cs:92
[Wed Jan 30 15:22:43 2013] [error] (70014)End of file found: read_data failed
[Wed Jan 30 15:22:43 2013] [error] Command stream corrupted, last command was -1
System.NullReferenceException: Object reference not set to an instance of an object
  at Mono.WebServer.BaseApplicationHost.EndOfRequest (Mono.WebServer.MonoWorkerRequest mwr) [0x00029] in /usr/local/src/xsp-2.10.2/src/Mono.WebServer/BaseApplicationHost.cs:141
  at Mono.WebServer.ModMonoApplicationHost.ProcessRequest (Int32 reqId, System.String verb, System.String queryString, System.String path, System.String protocol, System.String localAddress, Int32 serverPort, System.String remoteAddress, Int32 remotePort, System.String remoteName, System.String[] headers, System.String[] headerValues, System.Object worker) [0x00173] in /usr/local/src/xsp-2.10.2/src/Mono.WebServer.Apache/ModMonoApplicationHost.cs:109
  at (wrapper remoting-invoke-with-check) Mono.WebServer.ModMonoApplicationHost:ProcessRequest (int,string,string,string,string,string,int,string,int,string,string[],string[],object)
  at Mono.WebServer.ModMonoWorker.InnerRun (System.Object state) [0x00199] in /usr/local/src/xsp-2.10.2/src/Mono.WebServer.Apache/ModMonoWorker.cs:239
  at Mono.WebServer.ModMonoWorker.Run (System.Object state) [0x00002] in /usr/local/src/xsp-2.10.2/src/Mono.WebServer.Apache/ModMonoWorker.cs:92
[Wed Jan 30 15:22:43 2013] [error] (70014)End of file found: read_data failed
[Wed Jan 30 15:22:43 2013] [error] Command stream corrupted, last command was -1 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-11T16:49:05.813

两年太晚了，但以防万一有人再次遇到这个问题......

我相信答案是在 aspx 文件中声明所需的编译语言。在 .aspx 文件的顶部添加以下行，我敢打赌它会起作用：

```
<%@ Page Language="C#" %> 
```

# php - 通过 Internet 从本地 LAN 获取客户端 IP

> ID：14612056
> 
> 赞同：2
> 
> 时间：2013-01-30T19:24:36.603
> 
> 标签：php, ip

问题是，在我的研究所，我们都有相同的全球 IP，现在我有一个网站，我们需要在投票系统中唯一地识别用户以进行投票……否则我们使用 cookie 来识别他们，他们很容易删除操纵民意调查。该站点的本地 IP 是 192.168.1.69，因此当有人从那里发表评论时，我们会得到他们的客户地址，但我需要编辑此代码，以便它检查网站（不是 IP）是否正在从我们的研究所访问，如果是的，那么应该通过 ping 本地 IP 来存储客户端地址。所以请帮帮我。

这是一些相关的代码

```
if(!isset($_SERVER['HTTP_X_FORWARDED_FOR']))
$ip = $_SERVER['REMOTE_ADDR'];
else 
$ip = $_SERVER['HTTP_X_FORWARDED_FOR']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:26:49.550

首先，我真的不会使用（仅）基于 IP 的登录系统。阅读上面的评论。

嗯..即使多次阅读您的问题后，我也不确定我是否理解您的问题。但是，如果我理解正确，也可能存在技术“限制”：

我的理解：

你有一个网站，比如说 www.xyz.com。然后，您有一个本地网络，其中包含许多通过 NAT 网关访问 Internet 的客户端。

您正在计划：

如果 NAT 路由器的 IP（意味着来自您机构内部的客户端）在 www.xyz.com 上被识别为客户端 IP，那么您是否计划进行“pingback”以从您机构网络内部获取本地客户端 IP？

如果我理解正确，那么这是不可能的，因为它违反了 NAT 的原则。NAT 的含义是（简单地说）从互联网地址空间中**隐藏本地 IP。**

作为程序员要打破的限制；）将有一些方法可以使用称为 NAT 遍历的方法进行“pingback”。但我建议您不要实施基于 IP 的登录系统。因为：

*   那是不安全的，因为 IP 很容易被欺骗。（你可以断开一台机器并使用它的 IP 地址）

*   什么是 DHCP？如果IP应该改变一次怎么办？

注意：**IP 不是登录的足够 ID**

# wpf - 如何创建包含两个相互交互的不同控件的自定义控件？

> ID：14612057
> 
> 赞同：0
> 
> 时间：2013-01-30T19:24:38.010
> 
> 标签：wpf, class, custom-controls

我已经制作了一个`CustomControl`包含两个类。一个源自 ，`Label`另一个源自`TextBox`。但我不能让一个人与另一个人交流。例如，当用户按 Enter 键时`TextBox`，无论其中的文本是什么，都必须复制到`Label`.
像这样的伪代码：

```
protected override void OnKeyDown(KeyEventArgs e)
            {
                if (e.Key == Key.Return)
                {
                    TheLabel.text = TheTextBox.text;
                }
            } 
```

但我无法从另一个控件内部操纵一个控件。因为每个都在它的单独类中，如下所示：

```
public class TheLabel : Label{...} 
```

和

```
public class TheTextBox : TextBox{...} 
```

**所以** 有没有一种特殊的方法来创建一个`CustomControl`包含两个或多个控件的相互通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:37:33.173

您可以使用两种方法。

首先，您可以使用组合，在组合中创建一个组合两个单独控件的类：

```
 public class CompositeClass {
              private TheLabel  _label;
              private TheTextBox _textbox;
} 
```

或者，您可以将一个类的对象的引用传递给另一个类，以便它可以在事件处理程序中操作该对象：

公共类TheLabel：标签{

```
 TheTextBox _textbox;

  public TheLabel(TheTextBox t) {
       _textbox = t;
  } 
```

}

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:36:46.190

您可以通过在每个自定义控件上使用[DependancyProperty来链接信息。](http://msdn.microsoft.com/en-us/library/ms752914.aspx)然后每个依赖属性也将订阅一个更改事件。当数据发生变化时，该事件将触发，您可以根据需要在另一个控件中进行适当的处​​理。

# c++ - 将类对象传递给 __global__ 内核

> ID：14612063
> 
> 赞同：0
> 
> 时间：2013-01-30T19:25:07.053
> 
> 标签：c++, cuda

我想将一个类对象传递给全局内核并在其中执行其成员函数。到目前为止，我所有的努力都没有成功。下面我将详细描述我正在尝试做的事情。

我有像这样实现的 PDE_Parabolic_Num_GPU 类：

```
class PDE_Parabolic_Num_GPU: public PDE_Parabolic_GPU
 {
  public:
   __host__ __device__ PDE_Parabolic_Num_GPU();
   __host__ __device__ ~PDE_Parabolic_Num_GPU();
   __host__ __device__ Solve();
   __host__ __device__ Setup();
   ...

  //data
  gdd_real*   an;
  gdd_real*   bn;
  gdd_real*   cn;
} 
```

gdd_real 在哪里

```
struct gdd_real 
{
    double2 val;
        __host__  __device__ gdd_real(double hi, double lo) {val.x = hi; val.y = lo;}
    __host__  __device__ gdd_real(double h){val.x = h; val.y = 0.;}
    __host__  __device__ gdd_real(){};
}; 
```

在我的 main() 中，我正在执行通常的 cudaMalloc 和 cudaMemcpy 以便将我的类对象传递给全局内核：

```
PDE_Parabolic_Num_GPU pdes_host;
PDE_Parabolic_Num_GPU *pdes_dev;
cudaError_t cudaStatus;
cudaStatus = cudaMalloc((void**)&pdes_dev, 1 * sizeof(PDE_Parabolic_Num_GPU));
cudaStatus = cudaMemcpy(pdes_dev, &pdes_host, sizeof(PDE_Parabolic_Num_GPU), cudaMemcpyHostToDevice);
pdegpu<<<1,1>>>(pdes_dev);
cudaStatus = cudaThreadSynchronize();
cudaStatus = cudaMemcpy(&pdes_host, pdes_dev, sizeof(PDE_Parabolic_Num_GPU), cudaMemcpyDeviceToHost);
cudaStatus = cudaThreadExit();
system("pause"); 
```

pdegpu内核如下：

```
__global__ void pdegpu(PDE_Parabolic_Num_GPU *pdes)
{
  pdes->Setup(); //initializes class members an, bn, cn using "new" 
  pdes->Solve();    
} 
```

我的第一个问题：程序在调试期间在 pdes->Setup() 崩溃；

第二个问题是：如果我将内核更改为使用以下本地对象，则程序在调试期间在 main() 中的 system("pause") 语句后崩溃。

```
__global__ void pdegpu()
{
      PDE_Parabolic_Num_GPU pdes;  //using local object
      pdes.Setup(); 
      pdes.Solve(); 
} 
```

这是使用 Nsight 进行调试时程序崩溃的两种情况。但是当我在没有调试的情况下运行程序时，第二个版本的 pdegpu（它使用本地对象）在 pdes.Solve() 处崩溃。谁能帮我解决这些问题？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:37:14.320

为什么要存储指向 的指针`gdd_real`？您可以直接将这种类型的对象放在您的类中。这样，您将避免与内存相关的问题。

那么为什么不直接使用：

```
 //...
    gdd_real   an;
    gdd_real   bn;
    gdd_real   cn;
} 
```

# javascript - 如何在文件上传和附加期间禁用上传按钮

> ID：14612065
> 
> 赞同：5
> 
> 时间：2013-01-30T19:25:09.957
> 
> 标签：javascript, jquery

侥幸我意识到了一个问题，这会导致我的应用程序出现大问题。

我在这里有我的应用程序，它将上传视频。[应用](http://helios.hud.ac.uk/u0867587/Mobile_app/InputTest2.php)

我遇到的问题是，如果您上传视频，然后单击`Add Question`按钮将另一个文件输入附加到新行中，则新行中的`Upload`按钮不会被禁用，这意味着您可以上传多个我不想要的文件因为它将停止第一个文件上传以停止上传，如果用户尝试上传多个大文件，系统可能会崩溃。我的问题是，如果我点击`Add Question`按钮，如果文件正在上传，那么附加行中的上传按钮应该被禁用，直到上传完成？

要使用应用程序，请按照以下步骤操作：

1.  单击`Add Question`两次以追加 2 个新表行。在每个表格行中，您将看到一个文件输入。

2.  在第 1 行的文件输入中选择一个视频（我选择了一个合适大小的视频，以便在您完成其他步骤时上传文件），然后单击`Upload`以上传视频。您现在将看到在`Upload`上传视频时按钮被禁用

3.  现在，当视频上传时，再次单击`Add Question`按钮以附加另一行。现在您将看到`Upload`文件上传时新附加行中的按钮未被禁用。如果正在上传文件，我希望禁用此按钮和附加的其他上传按钮。

下面是相关代码，它从`Add Question`按钮附加表格行：

```
function GetFormVideoCount(){ 
  return $('.videouploadform').length + 1;
}

var qnum = 1;
var qremain = 5;

function insertQuestion(form) {   

    if (qnum > 5) {
    return;
}

    var $tbody = $('#qandatbl_onthefly > tbody');
    var $tr = $("<tr class='optionAndAnswer' align='center'>");
    var $video = $("<td width='17%' class='video'></td>"); 

              $('.num_questions').each( function() {

    var $fileVideo = $("<form action='videoupload.php' method='post' enctype='multipart/form-data' target='upload_target_video' onsubmit='return videoClickHandler(this);' class='videouploadform' >" + 
    "<p class='videof1_upload_form'><label>" + 
    "Video File: <input name='fileVideo' type='file' class='fileVideo' /></label><br/><br/><label class='videolbl'>" +  
    "<input type='submit' name='submitVideoBtn' class='sbtnvideo' value='Upload' /></label>" + 
    "<p class='videof1_upload_process' align='center'>Loading...<br/><img src='Images/loader.gif' /></p>" +
    "<input type='hidden' class='numvideo' name='numvideo' value='" + GetFormVideoCount() + "' />" + </p>" +
    "<iframe class='upload_target_video' name='upload_target_video' src='/' style='width:0px;height:0px;border:0px;solid;#fff;'></iframe></form>"); 

    $video.append($fileVideo);

    $tr.append($video);  
    $tbody.append($tr); 

} 
```

下面是相关代码，当它开始文件的上传过程时，它会在已附加的行中禁用上传按钮：

```
 function startVideoUpload(videouploadform){

             sourceVideoForm = videouploadform;

            $(".sbtnvideo").attr("disabled", "disabled");

    }); 

          return true;
    } 
```

下面是上传完成后的函数相关代码：

```
function stopVideoUpload(success, videoID, videofilename){

      $(".sbtnvideo").removeAttr("disabled");

      return true;   
} 
```

以下是视频上传点击处理程序：

```
 function videoClickHandler(videouploadform){ 
      if(videoValidation(videouploadform)){ 
          window.lastUploadVideoIndex = $('.videouploadform').index(videouploadform);
          return startVideoUpload(videouploadform); 
      } 
      return false;
  } 
```

**更新：**

```
function startVideoUpload(videouploadform){

               $(".sbtnvideo").click(function(event){
               $(".sbtnvideo").attr("disabled", "disabled");
    event.preventDefault();
    });

       return true;   
    }

    function stopVideoUpload(success, videoID, videofilename){

                $(".sbtnvideo").click(function(event){
                $(".sbtnvideo").removeAttr("disabled");
    return true;
});

          return true;   
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:41:23.780

您可以阻止按钮的默认行为，然后稍后重新启用它。

```
$(".sbtnvideo").click(function(event){
    event.preventDefault();
});

$(".sbtnvideo").click(function(event){
    return true;
}); 
```

# xcode - 如何使 at 按钮返回上一个视图 X

> ID：14612071
> 
> 赞同：1
> 
> 时间：2013-01-30T19:25:23.150
> 
> 标签：xcode, ios6

我可能是盲人主演。我试图创建一个返回前一个视图的按钮。但是，问题是，我可以从三个不同的视图导航到这个视图，并且我想确保我返回到正确的视图。我不打算为此使用导航控制器 - 我希望我的按钮来处理这种转换。![在此处输入图像描述](../Images/cda2ef0965e984b78cdc2bc5020dcf9b.png)

我已经说明了我想要做什么。当我从视图 A、B 或 C 导航到“视图 1”时，我希望同一个按钮能够将我返回到我来自的视图。

这可能吗？

亲切的问候

新开发者

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T19:51:19.753

我喜欢的另一种方式是使用`UINavigationController`. 从上图中，我可以理解从**视图 A**、**视图 B**、**视图 C**可以导航到**视图 1**，然后当您想返回时，只需单击或点击后退按钮即可带您进入前一个控制器。
为此，只需使用`[self.navigationController popViewControllerAnimated:YES];`for 导航到带有动画的上一个视图控制器，替换 NO 而不是 YES 即可导航到没有动画的上一个视图。
对于导航到**View 1**，使用`[self.navigationController pushViewController:View 1 animated:YES];`动画导航和非动画过渡使用 NO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:39:53.193

不知道你为什么要这样做，但如果你绝对必须这样做，那么这样做：假设你在一个控制器中拥有所有 4 个视图和后退按钮，在你的控制器中创建一个名为“ **previousView** ”的 UIVIew 属性，在从视图 A、B 或 C 为 View1 设置动画之前，只需设置**self.previousView = viewA**（或 B 或 C），现在按下后退按钮，您将知道从保存的 previousView 属性返回到哪个视图.

# macos - 选择已使用条件格式格式化的单元格

> ID：14612080
> 
> 赞同：0
> 
> 时间：2013-01-30T19:26:10.153
> 
> 标签：macos, excel, excel-2011

我正在寻找一种方法来复制一系列条件格式的单元格。我们有一个电子表格，其中包含我们标记为“待定”的单元格。我创建了一个规则来形成在其中任何地方都有“TBD”的每一行，这就是我们想要的。现在我正在寻找一种方法来复制或选择我们已格式化的所有内容，并有一种方法可以将其复制到另一个文档等。

这是我创建的规则的屏幕截图：

![在此处输入图像描述](../Images/bf2f5048b3371ff45f3213321c404c4b.png) ![在此处输入图像描述](../Images/3062d4a8630d3976fa60bff8a51f5e04.png)

谢谢

Excel 2011，OSX 10.8.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:57:52.663

使用带有标准*** *TBD* ***的自动过滤器并复制过滤后的单元格。

# c# - 新的 SqlFileStream 因集成安全而失败

> ID：14612082
> 
> 赞同：2
> 
> 时间：2013-01-30T19:26:29.650
> 
> 标签：c#, sql, filestream

我一直在为 Windows XP 上的 Winforms 应用程序中的“新 SqlFileStream”问题编写一个测试用例，这样做时，在 Windows 7 上运行测试用例应用程序时遇到了另一个问题。

在所有情况下，连接字符串都使用集成安全性。

以下调用在以管理员身份运行时有效，但在以“凡人用户”身份运行时无效：

```
using (SqlFileStream sfs = new SqlFileStream(sqlFilePath, (byte[])transactionContextParm.Value,
 SIO.FileAccess.Write))
{
//...
} 
```

在所有情况下，调用从用于选择 FILESTREAM 的同一行中选择的存储过程都有效，因此用户可以访问数据库。

在进行上述调用之前，存储过程已成功返回 PathName 和 FileStream 事务上下文。

以下是从捕获的异常中捕获的错误信息：

```
System.ComponentModel.Win32Exception (NativeErrorCode=5/ErrorCode=0x80004005): Access is denied 
at System.Data.SqlTypes.SqlFileStream.OpenSqlFileStream(String path, Byte[] transactionContext, FileAccess access, FileOptions options, Int64 allocationSize)
at System.Data.SqlTypes.SqlFileStream..ctor(String path, Byte[] transactionContext, FileAccess access, FileOptions options, Int64 allocationSize)
at System.Data.SqlTypes.SqlFileStream..ctor(String path, Byte[] transactionContext, FileAccess access)
... 
```

该代码在 Win 7 客户端计算机上作为具有 SQL 服务器管理员权限的用户运行时有效，但在作为“普通用户”运行时无效。

在原始应用程序（从中提取此测试用例）中，没有此特定问题，因此我错过了有关为此测试用例设置的权限的一些信息。

任何有关所需权限或如何诊断此问题的建议将不胜感激！

# cookies - 限制重新投票的最佳方法

> ID：14612083
> 
> 赞同：0
> 
> 时间：2013-01-30T19:26:30.123
> 
> 标签：cookies, polling

我正在创建一个网站，用户可以在其中发布“故事”，然后其他成员可以对其进行投票。我的问题是关于如何限制人们多次投票。您无需注册即可投票。

这些是我的想法，如果有人能给我反馈哪个是最好的，或者你自己的想法会更好，我将不胜感激。

1.  把桌子摆成这样...
    *   `id`- 故事 ID
    *   `name`- 作者
    *   `story`- 故事
    *   `upvotes`- 点赞数
    *   `upvoter_ids`- 已投票的所有唯一 ID 的列表，以空格分隔。唯一 ID 在首次访问时存储在 cookie 中。重新访问时，拉出所有 ID，在该空间爆炸它们，看看是否有匹配。
2.  为投票创建一个新表，为每个投票添加一行。
    *   `voter_id`- 存储在 cookie 中的唯一 ID
    *   `story_id`- 被点赞的故事的 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:39:45.783

基于 cookie 的 ID 系统是一个相当不错的系统。如果您不打算对您的用户进行身份验证，那么您就不能绝对阻止坚定的人一次又一次地投票。但是，如果您不要求人们投票，那么我假设您接受这种事情可能会不时发生。

我要做的唯一更改是创建一个包含故事和支持 ID 的一对多关系表。然后，您可以查询此表，过滤故事 ID 以获取所有投票者的 ID。这比分解以空格分隔的字符串更干净。

# android - 使用 SQLite 或内部存储的建议

> ID：14612084
> 
> 赞同：1
> 
> 时间：2013-01-30T19:26:37.923
> 
> 标签：android, sqlite

在任何语言课上都有一个笔记本或类似的东西来写新词汇，所以我想制作一个应用程序来处理我的日语课。应用程序只有几个选项： - 在列表中写一个新单词（具有三个字符串属性的对象，'kanji'，'kanji reading in hiragana' 和 'translation'） - 练习列表中的所有单词 - 练习所有单词以随机顺序

我不知道使用内部存储的最佳方法是什么？json还是xml？（列表可以增长一点...），sqlite？为什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:32:33.167

所以我最近发布了一款名为Bingle的文字游戏应用程序，我在sqlite数据库中存储了大约35,000个单词。这些词在统计数据上经历了很多变化，诸如此类。如果您想跟踪单词的统计信息，并且您的词库相当适中，请选择 SQLite。

另一个优势是升级——在 SQLite 上管理升级真的很容易。

这里的诀窍是要聪明。您将不得不对单词进行大量延迟加载，并且如果用户重新分类单词，您将不得不立即更改前端并在 asynctask 或其他东西中处理事务。如果您等待针对大型数据库的更新，用户会感到无聊。这些是您在处理大型数据库时必须注意的小事。

除了使用 Sqlite，另一个不错的选择是创建一个服务器并处理服务器中的所有文字处理。本质上，您的应用程序只是一个客户端。

我不会采用内部存储方法。在我看来太不灵活了。查询也会很困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:39:10.010

我会使用 SQLite。与滚动您自己的数据库相比，数据库将提供更快的搜索选项，并使添加功能更加容易。它还将使编辑和删除变得更加容易——简单的 SQL 命令，而不是打开文件，读入整个文件，在内存中更改它，然后再次写出。

# python - Python-如何在字典列表的 FOR 循环中比较 IF 语句中的键值？

> ID：14612085
> 
> 赞同：1
> 
> 时间：2013-01-30T19:26:47.000
> 
> 标签：python, if-statement, dictionary, for-loop, key

出于这个问题的目的，我已将其缩短，但代码如下所示：

```
total1=0
total2=0
total3=0
score1=20
score2=30
score3=40

players = [{'user': 'Player1', 'total': total1, 'score': score1},
{'user': 'Player2', 'total': total2, 'score': score2},
{'user': 'Player3', 'total': total3, 'score': score3}]

for i in players:
    if players[i]['score'] <= 30:
        ***code goes here*** 
```

我得到这个 TypeError: list indices must be integers, not dict

我怎么说“如果每个玩家得分的值 <= 30”？

如果我只写`print players[0]['score']`我得到 20。如果我写`print players[1]['score']`我得到 30，但为什么我不能把它放在一个 for 循环中并让“i”成为数字？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:29:05.730

第一个[“for”遍历](http://docs.python.org/2/tutorial/controlflow.html#for-statements)列表“玩家”，因此每个元素都是字典：

```
for player in players:
    if player['score'] <= 30:
        ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:28:45.930

当您遍历列表时，每个`i`都是列表的一个元素，因此请替换`players[i]`为`i`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:29:57.983

在这个循环中：

```
for i in players:
    if players[i]['score'] <= 30:
        ***code goes here*** 
```

`i`是从列表返回的字典，而不是列表中的索引。你想要的是：

```
for i, player in enumerate(players):
    if player['score'] <= 30:
        ***code goes here*** 
```

甚至：

```
for player in players:
    if player['score'] <= 30:
        ***code goes here*** 
```

如果您以后不需要索引

# python - doxygen python引发异常

> ID：14612088
> 
> 赞同：1
> 
> 时间：2013-01-30T19:27:07.157
> 
> 标签：python, doxygen

我是使用 Doxygen 来记录我的 Python 代码的新手。我喜欢记录我的方法/函数引发的异常。我过去使用@raise 做过这个，但 Doxygen 似乎没有意识到这一点。我现在也尝试过@exception（javadoc/Doxygen 习惯用法），但这似乎也没有被 Doxygen 解析（@exception 或 @raise 行被传递到生成的 HTML，就好像它在代码/编码中一样堵塞）。

有什么方法可以说服 Doxygen（我使用的是 1.8.3）解析 Python 代码的 @exception 标签？

谢谢，

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-08T09:53:11.077

尝试使用 Doxygen 1.8.8 我使用`@exception`标签获得了不错的 Doxygen 输出。但是，Doxygen 要求您在实际文档之前指定抛出哪个异常。

```
 ##
 # @brief This is my function
 #
 # @exceptions MyException My function can throw a MyException
 # 
```

我希望这有帮助。

# ruby - rbenv 和 bundler 的 Gem 问题

> ID：14612091
> 
> 赞同：3
> 
> 时间：2013-01-30T19:27:11.277
> 
> 标签：ruby, gem, bundler, gemfile

我使用 Ruby 1.9.3-p374 安装了 rbenv，并且我安装了 gem 捆绑器。

然后我设置了一个项目目录并在其中设置了一个 .ruby-version 文件以选择我的 1.9.3 ruby​​ 版本，然后添加了一个带有一些 gem 的 gemfile，如指南针等。然后我运行`bundle install --path vendor`并安装了它。

如果我然后运行，`bundle show`我会得到这个：

```
Gems included by the bundle:
  * bundler (1.2.3)
  * chunky_png (1.2.7)
  * compass (0.12.2)
  * fssm (0.2.10)
  * sass (3.2.5)
  * susy (1.0.5) 
```

如果我跑步，`gem list`我会得到这个：

```
*** LOCAL GEMS ***

bigdecimal (1.1.0)
bundler (1.2.3)
io-console (0.3)
json (1.5.4)
minitest (2.5.1)
rake (0.9.2.2)
rdoc (3.9.4) 
```

我如何让他们一起工作。我希望像 compass 等本地项目 gem 像它们一样安装到供应商目录中，但是当我 cd 进入我的项目目录并运行 compass watch 命令时，我得到`-bash: compass: command not found`

为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:01:22.880

从您的供应商包（而不是本地 gem）运行 gem 时，您应该使用`bundle exec`：

```
~/project$ bundle exec compass watch 
```

If you want to run Compass directly, you'll have to install it on your system (local gems) using either vanilla `bundle install` or simply `gem install compass`. (In that case, you might sometimes run into a conflict of gem versions, Gemfile vs. called from system)

# javascript - 将一个变量插入另一个变量Javascript

> ID：14612093
> 
> 赞同：0
> 
> 时间：2013-01-30T19:27:31.800
> 
> 标签：javascript

我的代码如下所示：

原来的

```
var key_word = {'dentists'};

var pageOptions = { 
  'query': 'cars',
  'hl': 'en'
}; 
```

我想将变量'key_word'插入到它说汽车的位置：

新代码 - 完整代码

```
<div id="adcontainer1"></div>
<script src="http://www.google.com/adsense/search/ads.js" type="text/javascript"></script> 
<script type="text/javascript" charset="utf-8"> 
var key_word = "dentists";

var pageOptions = { 
  'pubId': 'pub-999999999999999',
  'query': function(){ return key_word; },
  'hl': 'en'
};

var adblock1 = { 
  'container': 'adcontainer1',
  'number': '1',
  'width': '700px',
  'lines': '1',
  'colorBackground': 'FBFFDB'
};

new google.ads.search.Ads(pageOptions, adblock1);
</script> 
```

从生成的广告来看，牙医似乎没有被正确传递。相反，广告正在运行文本“关键字”而不是变量 key_word，即文本“牙医”。我这里有语法问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:31:10.510

```
var key_word = "dentists"
var pageOptions = { 
    'query': function(){ return key_word; },
    'hl': 'en'
}; 
```

我想你想要这样的东西。

```
adblock1.key_word = pageOptions.query(); 
```

# javascript - 如何反转字符串中的值？

> ID：14612101
> 
> 赞同：-1
> 
> 时间：2013-01-30T19:27:55.400
> 
> 标签：javascript, string, replace

我必须反转字符串的值，一个一个地改变。

例子：

```
var x = "my string";
x = someCrazyFunction(x, 'm', 'n'); 
```

那么“ **m** y stri **n** g”的 x 将变为“ **n** y stri **m** g”

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:30:10.280

```
function someCrazyFunction(str, ch1, ch2) {
    return str.replace(/./g, function(x) {
        return (x == ch1) ? ch2 : (x == ch2) ? ch1 : x;
    });
} 
```

[**小提琴**](http://jsfiddle.net/bqtYN/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:36:54.460

```
x.split('').map(function(c) {return c=='n'?'m':c=='m'?'n':c; }).join(''); 
```

或者，如果您想使用一个对象进行重新映射（对于任何数量的疯狂）：

```
x.split('').map(function(c) {var _={n:'m',m:'n'}; return c in _?_[c] : c;}).join('') 
```

# javascript - 由于错误，无法在 fancybox2-rails gem 中使用助手

> ID：14612104
> 
> 赞同：0
> 
> 时间：2013-01-30T19:27:59.413
> 
> 标签：javascript, jquery, ruby-on-rails, fancybox, fancybox-2

我正在尝试让 fancybox2 在我的 RoR 应用程序上正常工作。我已经尝试过 gem，只是将文件直接放在我的资产目录中，但我无法让助手工作。

现在拇指（由助手生成）不显示。此外，当诅咒结束时，覆盖似乎并不透明，因为它们应该是透明的。参见图片[1](http://f.cl.ly/items/0Y0c222I112M3p2y0P2S/Screen%20Shot%202013-01-30%20at%2017.13.48%20.png)和[2](http://f.cl.ly/items/1o2m2p1Y0U3b0e3p1p44/Screen%20Shot%202013-01-30%20at%2017.17.09%20.png)：

问题是：我做错了什么？

当前输出由以下文件夹中的 Fancybox 文件生成：

```
/assets/stylesheets/fancybox/jquery.fancybox-buttons.css
/assets/stylesheets/fancybox/jquery.fancybox.css
/assets/stylesheets/fancybox/jquery.fancybox-thumbs.css

/assets/images/fancybox/fancybox_overlay.png
/assets/images/fancybox/blank.gif
/assets/images/fancybox/fancybox_buttons.png
/assets/images/fancybox/fancybox_loading.gif
/assets/images/fancybox/fancybox_sprite.png

/assets/javascripts/fancybox/jquery.fancybox.pack.js

/helpers/jquery.fancybox-buttons.js
/helpers/jquery.fancybox-media.js
/helpers/jquery.fancybox-thumbs.js 
```

欢迎.js

```
(function() {

  $(document).ready(function() {
    return $(".fancybox-thumb").fancybox({
      prevEffect: "none",
      nextEffect: "none",
      helpers: {
        title: {
          type: "outside"
        },
        thumbs: {
          width: 75,
          height: 75
        }
      }
    });
  });

}).call(this); 
```

输出的 HTML：

```
...
<link href="/assets/fancybox/jquery.fancybox-buttons.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/fancybox/jquery.fancybox-thumbs.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/fancybox/jquery.fancybox.css?body=1" media="all" rel="stylesheet" type="text/css" />
<script src="/assets/fancybox/jquery.fancybox.pack.js?body=1" type="text/javascript"></script>
...
<p>
<a class='fancybox1234' href='http://.../uploads/noimage.jpg' rel='group'>
<img alt='' src='http://.../uploads/small_noimage.jpg'>
</a>
<a class='fancybox1234' href='http://.../uploads/Burgum_Hervormde_kerk.JPG' rel='group'>
<img alt='' src='http://.../uploads/small_Burgum_Hervormde_kerk.JPG'>
</a>
</p>
... 
```

如果您需要更多输出或信息来帮助我，请告诉我。谢谢！

* * *

编辑：助手的顺序确实是让他们工作的解决方案。不过，叠加层仍然无法正常工作，所以我必须检查 CSS 是否在某处被覆盖。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:08:47.730

可能是吊装问题：

fancybox js 文件应该在 helpers 文件**之前**加载，所以你的 html 输出，而不是这个

```
<script src="/assets/fancybox/helpers/jquery.fancybox-buttons.js?body=1" type="text/javascript"></script>
<script src="/assets/fancybox/helpers/jquery.fancybox-media.js?body=1" type="text/javascript"></script>
<script src="/assets/fancybox/helpers/jquery.fancybox-thumbs.js?body=1" type="text/javascript"></script>
<script src="/assets/fancybox/jquery.fancybox.pack.js?body=1" type="text/javascript"></script> 
```

应该 ：

```
<script src="/assets/fancybox/jquery.fancybox.pack.js?body=1" type="text/javascript"></script>
<script src="/assets/fancybox/helpers/jquery.fancybox-buttons.js?body=1" type="text/javascript"></script>
<script src="/assets/fancybox/helpers/jquery.fancybox-media.js?body=1" type="text/javascript"></script>
<script src="/assets/fancybox/helpers/jquery.fancybox-thumbs.js?body=1" type="text/javascript"></script> 
```

还要检查您的路径以避免 404 错误，因为您正在加载您的 css 文件，`fancybox/helpers/`而 js 文件来自`fancybox/`（helpers css 和 js 文件通常位于子目录“ *helpers* ”下）

* * *

关于`close`and`arrows`按钮中的黑色背景/覆盖，很可能您使用的是全局 css 规则，例如：

```
a:hover { 
 background-color: #000;
} 
```

...因此它适用于所有锚点，包括花式框的（箭头/关闭）锚点。避免全局声明并使用特殊性，例如：

```
a.myClass:hover {
  background-color: #000;
} 
```

... 或者

```
#myContainer a:hover {
  background-color: #000;
} 
```

# sql - sql代码系统表代码含义

> ID：14612106
> 
> 赞同：0
> 
> 时间：2013-01-30T19:28:17.017
> 
> 标签：sql, sql-server-2008

下面的代码试图做什么？

```
select * from tempdb.dbo.sysobjects
where id = object_id(N'tempdb..#val_load_data') 
```

谢谢布鲁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:29:52.287

看起来像存在检查；如果该表存在，则将返回一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:36:37.503

似乎正在检查`tempdb`名为`#val_load_data`.

如果返回一行，则该表存在。

# excel - 数据透视字段集合

> ID：14612122
> 
> 赞同：1
> 
> 时间：2013-01-30T19:29:02.490
> 
> 标签：excel, excel-2010, vba

我试着：

1.  将 PivotTable.PivotFields 集合对象复制到一个临时对象
2.  对临时的进行一些更改，
3.  然后将原来的 PivotTable.PivotFields Collection 设置为指向新的 PivotFields Collection。

我正在尝试使用以下代码。当我尝试使用“New PivotFields”时，在指示的行上出现编译错误。我究竟做错了什么？任何帮助都将不胜感激。

```
Public Sub ChangePivotTable()

    Dim objPivotTable As PivotTable
    Dim objPivotFields As PivotFields
    Dim objTempPivotFields As PivotFields

    'Get Pivot Table from worksheet
    Set objPivotTable = Worksheets("PivotTableWorksheet").PivotTables(1)
    'Set reference to PivotFields Collection of PivotTable
    Set objPivotFields = objPivotTable.PivotFields

    'Compile error: Invalid use of New Keyword
    Set objTempPivotFields = New PivotFields

    'Pass Collection by Value
    Let objTempPivotFields = objPivotFields 

    'Make changes to Temporary PivotFields Collection
    Dim intIndex As Integer
    For intIndex = 6 To 2156

        objTempPivotFields(intIndex).Orientation = xlDataField
        objTempPivotFields(intIndex).Function = xlAverage

    Next intIndex

    'Set original PivotFields Collection to temporary one
    Set objPivotFields = objTempPivotFields

End Sub 
```

# c - VS2010现场调试exe

> ID：14612126
> 
> 赞同：0
> 
> 时间：2013-01-30T19:29:27.730
> 
> 标签：c, visual-studio-2010, debugging, executable

我有一个使用 Visual Studio 2010 的大型基于“c”的项目。环境变量指向调试文件夹，用于使用调试版本生成的生成的可执行文件。如果从命令行调用可执行文件，我该如何调试它们？

更具体地说，正在发生的事情是我有一个调用 perl 脚本的 python 脚本调用不同的可执行文件...... c 代码运行了一段时间（它创建了一个日志），但它最终只是停止/崩溃，然后问我是否想要调试。当 VS 打开时，我没有得到任何源代码或很多有用的信息。我很想知道如何让可执行文件在断点处停止，以便我可以单步执行代码。

# sql-server - 数据仓库中的自定义/动态分类

> ID：14612127
> 
> 赞同：2
> 
> 时间：2013-01-30T19:29:30.367
> 
> 标签：sql-server, database, reporting-services, ssas, data-warehouse

我们正在扩展我们的数据仓库，我们遇到了团队中没有人能够解决的难题。我尝试在 Google 上搜索答案，但很难找到正确的条款。

本质上，问题是这样的。我们有一个跟踪项目的数据仓库。我们必须在这个数据仓库之外做很多报告。许多报告都是通过对这些项目进行分类，然后根据分类汇总数据来驱动的。有些报告共享分类，有些可能有自己的特定于报告的分类。即使在这种情况下，也可能存在需要重用这些分类的后续报告或分析（临时）。并且可能会有很多这样的分类方案。此外，这些方案可能依赖来自多个事实表的数据来对项目进行分类（并且项目信息由于粒度不同而跨越多个事实表）。

我们最初的计划是为这些设置维度，每个类别都有一个维度，或者可能是每个类别都有一个列的垃圾维度。如果分类的数量可能保持不变，那就没问题了。但是，总会有新的报告和分析需求。我们不希望每次想要添加新的分类方案时都必须更改架构和 ETL 过程。我们可能还想更改分类的逻辑，而不必重新导入数据或重新运行 ETL 的一部分来重新计算。

所以我们的选择似乎如下：

1.  只需将逻辑放在报告和分析查询中，即使这意味着在查询之间复制和粘贴分类逻辑
2.  使用有缺陷的维度方法
3.  具有计算类别的函数，可以在查询中使用，但代价高昂，因为它们可能必须在其中执行额外的查询（性能不佳）
4.  在包含额外类别列的事实表之上拥有视图；视图可以比常规表模式更容易更改，并且不需要修改 ETL 过程
5.  使用某种桥接表方案来实现类别和每个类别中的项目之间的多对多映射；这增加了查询的复杂性，但将方案修改减少到无；ETL 仍需要修改，但修改可能在较小的区域内（可能是单个查询或更新类别映射的过程）

我们希望这个系统是可访问的，这样用户就不需要像访问常规事实和维度字段那样做更多的事情来访问这些分类字段。我们还希望避免每次将新的分类模式添加到数据库时都必须对模式和 ETL 过程进行大量更改。

所以我的问题是，基本上，有没有比我列出的五个更好的方法可以用来解决这个问题？这五个方面是否有更有效地解决问题的变化？或者它只是一个需要一定程度痛苦的难题？也许我对这一切都错了，所以这方面的任何反馈也会有所帮助。

tl;dr：我们需要在数据仓库中对项目进行许多不同分类的方法，并且不确定最有效、易于管理或易于使用的系统。

编辑：附加信息：我们使用 SQL Server，SSRS 作为主要报告前端，SSAS 作为分析或临时查询的辅助前端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:23:30.887

根据上面评论中的讨论，您最好的选择可能是构建一个小的 .NET 应用程序或 Web 应用程序，允许用户根据维度属性自行定义分类。

您可以在“类别表”中定义类别

```
CategoryID  
Category Name 
```

然后，您将构建一组“映射”表，这些表必须从每个维度创建一个雪花到一个类别：

类别 - Dim1 映射 (CATEGORY_D1)

```
CategoryID
Dim1ID 
```

类别 - DimX 映射

```
CategoryID
DimXID 
```

您的小应用程序将在定义类别时维护和构建这些映射表。

然后，当您构建报告时，您定义了事实表、维度表和类别表之间的连接。

如果我想找到第 3 类中的所有项目，那么我会写：

```
SELECT * 
FROM ITEMS_FACT F
JOIN DIM1 D1 ON (F.DIM1_ID = D1.DIM1_ID)
JOIN CATEGORY_D1 CD2 ON (CD2.DIM1_ID = D1.DIM1_ID 
                         AND CD1.CATEGORY_ID = 3)
JOIN DIM2 D2 ON (F.DIM2_ID = D1.DIM2_ID)
JOIN CATEGORY_D2 CD2 ON (CD2.DIM2_ID = D1.DIM2_ID 
                         AND CD2.CATEGORY_ID = 3) 
```

这将允许用户定义他们想要的任何类别，并且根本没有 ETL 更改（除非您有 SCD 类型 2 - 您可能需要在更新行时应用类别）。

如果存在管理“异常”的类别，您可能需要构建一个类别映射表，其中包含所有暗淡组合：

```
CategoryID
Dim1ID
Dim2ID
Dim3ID 
```

然后，您可以让用户在他们的工具中定义逻辑（如果 Item 具有 Dim1 Attr2 = 'A' 和 Dim2 Attr3 = 'B' 则类别 1），然后基于此构建映射表。

那么你的加入会更简单一些 - 只需将维度和事实加入维度键上的类别映射即可。

```
SELECT * 
FROM ITEMS_FACT F
JOIN DIM1 D1 ON (F.DIM1_ID = D1.DIM1_ID)
JOIN DIM2 D2 ON (F.DIM2_ID = D2.DIM2_ID)
JOIN CATEGORY_MAP CM ON (D1.DIM1_ID = CM.DIM1_ID 
                         AND D2.DIM2_ID = CM.DIM2_ID
                         AND CD1.CATEGORY_ID = 3) 
```

# google-app-engine - 对用户添加 GAE XMPP bot 的操作

> ID：14612129
> 
> 赞同：1
> 
> 时间：2013-01-30T19:29:37.053
> 
> 标签：google-app-engine, servlets, xmpp, chatbot

当用户向机器人发送聊天请求时，是否可以执行某些操作？我知道它被授权与机器人通信，但我想在用户添加机器人后立即存储用户的 JID。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:11:27.493

对的，这是可能的。

GAE 中的 XMPP 服务还允许您启用`xmpp_subscribe`入站服务。通过在您的 appengine-web.xml 文件中启用它，您将能够在下面给出的端点获得以下通知：

*   POST 到 /_ah/xmpp/subscription/subscribe/ 表示用户希望订阅应用程序的存在。
*   POST 到 /_ah/xmpp/subscription/subscribed/ 表示用户已允许应用程序接收其存在。
*   POST 到 /_ah/xmpp/subscription/unsubscribe/ 表示用户正在取消订阅应用程序的存在。
*   POST 到 /_ah/xmpp/subscription/unsubscribed/ 表示用户拒绝了应用程序的订阅请求，或取消了之前授予的订阅。

我从官方文档中获取了以上几点。请参阅[https://developers.google.com/appengine/docs/java/xmpp/overview#Handling_Subscriptions](https://developers.google.com/appengine/docs/java/xmpp/overview#Handling_Subscriptions)了解更多详情。

# c++ - 如何从文件中读取某些字符串？在 C++ 中丢弃我不想要的

> ID：14612131
> 
> 赞同：0
> 
> 时间：2013-01-30T19:29:43.757
> 
> 标签：c++, file-io, inputstream

我正在读取的文件包含有关城市的数据。我想知道如何仅提取我想要的数据并将其应用于我的城市对象。下面是我的城市班。

```
 #include <iostream>
    #include <string>
    #include <cstdlib>
    #include "City.h"
    using namespace std;

    /*
     * Define the constructor for the class 
     */
    City::City(string city_name, string state, int longitude, int latitude, int population) {
        this->city_name = city_name;
        this->state     = state;
        this->longitude = longitude;
        this->latitude = latitude;
        this->population = population;
    }

    /*
     *Accessors
     */ 
    string City::getCity() { 
                return city_name; 
        }

    string City::getState() { 
            return state; 
        }

    int City::getLongitude() {
            return longitude;
        }

    int City::getLatitude() {
            return latitude;
        }

    int City::getPopulation() {
            return population;
        }

    /*
     * Mutators 
     */ 
    void City::setCity(string city_name) {
            this->city_name = city_name;
        }
    void City::setState(string state) {
            this->state = state;
        }
    void City::setLongitude(int longitude) {
            this->longitude = longitude;
        }
    void City::setLatitude(int latitude) {
            this->latitude = latitude;
        }
    void City::setPopulation(int population) {
            this->population = population;
        }

    /*
     * Sorting methods
     */
    void City::sortByCity() {
            // Code to sort cities by city name
    }

    void City::sortByLongitude() {
            // Code to sort cities by longitude
    } 
```

这是我要从中读取的文件包含的文本类型的示例

1063061|OH|Tobias|ppl|Marion|39|101|404118N|0830359W|40.68833|-83.06639||||985|||Monnett 1063062|OH|Todds|ppl|Morgan|39|115|393129N|0815049W| 39.52472|-81.84694|||||983|||斯托克波特

我的问题是如何排除“|” 我的文件输入流中的字符？以及如何仅提取我需要的字符串。（例如，Tobias 为 city_name 或 OH 为州）以创建我的城市对象。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:35:04.850

使用带有分隔符“|”的 getline 并编写一个适合您格式化输入数据的输入序列

```
ifstream myfile ("input.txt");
string s;
getline (myfile,s,'|') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:52:44.033

您必须将行加载到字符串。std::getline() 然后你必须添加一些 while 循环从一个字符串复制到另一个。

```
while(loadedstring!='|')
{
newstring=newstring+loadedstring[i];
i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:54:43.737

我在一个 CS 类中有一个任务，它实现了一个日志文件解析器，这对你来说似乎是一个很好的例子。

```
#ifndef _LOGFILE_PARSE_H_
#define _LOGFILE_PARSE_H_

#include string
#include vector
#include fstream
#include sstream
#include time.h

#include "lphashtable.h"
#include "schashtable.h"

/**
 * LogfileParser class: Provides an interface for querying logfiles of a
 * particular format.
 */
class LogfileParser {
    public:
        /**
         * Constructs a new LogfileParser from the name of a log file.
         *
         * @param fname The name of the log file to open.
         */
        LogfileParser( const std::string & fname );

        /**
         * Determines if a given customer has ever visited the given url.
         *
         * @param customer The customer name.
         * @param url The url.
         * @return A boolean value indicating whether the customer visited
         *  the url.
         */
        bool hasVisited( const std::string & customer, const std::string & url ) const;

        /**
         * Determines *when* a customer last visited a given url. If the
         * customer has not visited the given url, the output of this
         * function should be the default time_t.
         *
         * @param customer The customer name.
         * @param url The url.
         * @return A time_t representing when the customer last visited the
         *  given url.
         */
        time_t dateVisited( const std::string & customer, const std::string & url ) const;

        /**
         * Gets all of the unique urls that have been visited.
         *
         * @return A vector of urls that were visited in the logfile. Note
         *  that **there should be no duplicates in this vector**.
         */
        std::vector< std::string > uniquePages() const;

    private:
        /**
         * LogLine structure: Represents the information contained in a
         * single line of the logfile.
         */
        class LogLine {
            public:
                /**
                 * Constructs a LogLine from a string (actual physical line
                 * in the logfile).
                 *
                 * @param line The line in the file to extract info from.
                 */
                LogLine( const std::string & line );

                std::string customer; /**< The customer for this line, */
                std::string url;      /**< The url for this line. */
                time_t date;          /**< The date for this line. */
        };

        /**
         * HashTable used to determine when a customer visited a given url.
         *
         * Hint: think about what your key should be for this. How could
         * you construct a unique, string key to find information for a
         * given customer and url?
         */
        LPHashTable< std::string, time_t > whenVisitedTable;

        /**
         * Vector containing the unique urls found in the logfile. You
         * should fill this in the constructor.
         *
         * @note This vector **should not contain duplicates!**
         */
        std::vector< std::string > uniqueURLs;

};
#endif 
```

源文件：

```
#include "logfile_parser.h"
#include iostream

using std::string;
using std::vector;
using std::ifstream;
using std::istringstream;

/**
* Constructs a LogLine from a string (actual physical line in the
* logfile).
*
* @param line The line in the file to extract info from.
*/
LogfileParser::LogLine::LogLine( const string & line ) {
    istringstream iss( line );
    iss >> customer;
    customer = customer.substr(1, customer.length()-3);
    iss >> url;
    string dte = "";
    string dline;
    do {
        iss >> dline;
        dte += dline;
    } while( iss );

    date = time(NULL);
    tm * tme = localtime( &date );
    strptime( dte.c_str(), "%c", tme );
    // force correct DST
    tme->tm_isdst = 1;
    date = mktime( tme );
}

/**
* Constructs a new LogfileParser from the name of a log file.
*
* @param fname The name of the log file to open.
*/
LogfileParser::LogfileParser( const string & fname ) : whenVisitedTable( 256 ) {
    SCHashTable< string, bool > pageVisitedTable( 256 );

    ifstream infile( fname.c_str() );
    string line;
    while( infile.good() ) {
        getline( infile, line );

        // if the line length is 0, move on to the next loop iteration
        if( line.length() == 0 )
            continue;           
        // otherwise parse the line and update the hash tables and vector
        LogLine ll( line );
        string uniqueString =(ll.customer + ll.url);
        if(whenVisitedTable.keyExists(uniqueString))
        {
            if(whenVisitedTable[uniqueString] < ll.date)
            whenVisitedTable[uniqueString] = ll.date;
        }
        else if (!whenVisitedTable.keyExists(uniqueString))
            whenVisitedTable.insert(uniqueString, ll.date);

        if(pageVisitedTable.keyExists(ll.url))
            pageVisitedTable[ll.url] = true;        
        else if (!pageVisitedTable.keyExists(ll.url))
        {
            pageVisitedTable.insert(ll.url, true);      
            uniqueURLs.push_back(ll.url);
        }

        /*
        * Given the LogLine above, you should be able to update the member
        * variable hash table and any other hash tables necessary to solve
        * this problem. This should also build the uniqueURLs member
        * vector as well.
        */
    }
    infile.close();
}

/**
* Determines if a given customer has ever visited the given url.
*
* @param customer The customer name.
* @param url The url.
* @return A boolean value indicating whether the customer visited the url.
*/
bool LogfileParser::hasVisited( const string & customer, const string & url ) const {
    string myString = (customer + url);
    if(whenVisitedTable.keyExists(myString))
        return true;
    else return false;

}

/**
* Determines *when* a customer last visited a given url. If the customer
* has not visited the given url, the output of this function should be the
* default time_t.
*
* @param customer The customer name.
* @param url The url.
* @return A time_t representing when the customer last visited the given
*  url.
*/
time_t LogfileParser::dateVisited( const string & customer, const string & url ) const {
    string myString = (customer + url);
    if(whenVisitedTable.keyExists(myString))
        return whenVisitedTable.find(myString);
    else
        return time_t(); // replaceme
}

/**
* Gets all of the unique urls that have been visited.
*
* @return A vector of urls that were visited in the logfile. Note
*  that **there should be no duplicates in this vector**.
*/
vector<string> LogfileParser::uniquePages() const {
    return uniqueURLs;
}

I removed the <> from the #include statements for some so they showed.  I did not write this whole class, a TA did some of it, and I was responsible for the rest.  There are many more files to this, but this is the class that seems to be most relevant for you. 
```

# java - Spring @Async 或 EJB @Asynchronous 用于异步服务调用？

> ID：14612136
> 
> 赞同：5
> 
> 时间：2013-01-30T19:29:53.563
> 
> 标签：java, spring, jakarta-ee, asynchronous, ejb

我正在开发一个使用 Hibernate JPA 和 Spring MVC 的项目，我正在研究实现一个异步服务，我意识到我分别从 Spring 和 EJB 获得了两个注释 @Async 或 @Asynchronous。

这里的一切对我来说都是新的，我会选择 EJB @Asynchronous 看看它是如何进行的，我想知道一种解决方案是否比另一种更有优势？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T19:36:37.470

[`@Async`](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html#scheduling-annotation-support-async)并且[`@Asynchronous`](http://docs.oracle.com/javaee/6/tutorial/doc/gkkqg.html)在他们的能力上是相同的。它们都在单独的线程池中运行给定的方法，并且它们都允许`void`和`Future<T>`结果类型。它们之间没有功能上的不同。Spring 的唯一（次要）优点是您可以完全控制底层线程池，而`@Asynchronous`这可能是在特定于容器的基础上配置的。

如果您的应用程序已经使用 Spring MVC，`@Async`这似乎是一个自然的结果。

# security - Node.js Express 框架安全问题

> ID：14612143
> 
> 赞同：57
> 
> 时间：2013-01-30T19:30:07.220
> 
> 标签：security, node.js, express

我正在寻找应该添加到 Node/Express 应用程序中的模块，以解决下面列出的一般安全问题：

*   注入漏洞（JavaScript、SQL、Mongo、HTML）
*   会话固定和劫持
*   跨站漏洞（脚本、请求伪造）
*   批量分配
*   *在此处插入相关问题*

谢谢你的帮助！

## ----------

我发现的一些资源：

> 精彩演讲（11/2012）：[http](http://lanyrd.com/2012/asfws/sxzbm/) ://lanyrd.com/2012/asfws/sxzbm/ （见幻灯片）
> 
> ServerFault 问题（2011-2012）：[https ://serverfault.com/questions/285123/is-node-js-mature-for-enterprise-security](https://serverfault.com/questions/285123/is-node-js-mature-for-enterprise-security)
> 
> 关于主题的博客文章 (9/2012)：[http ://codefol.io/posts/29-Why-Rails-and-not-Sinatra-or-Node-js-](http://codefol.io/posts/29-Why-Rails-and-not-Sinatra-or-Node-js-)
> 
> 漏洞利用测试器：[https ://code.google.com/p/skipfish/](https://code.google.com/p/skipfish/)
> 
> 护照模块：[https ://github.com/jaredhanson/passport](https://github.com/jaredhanson/passport)
> 
> EveryAuth 模块：[https ://github.com/bnoguchi/everyauth](https://github.com/bnoguchi/everyauth)

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-31T03:11:12.680

[我写了一篇博客文章，为编写 Secure Express.js 应用程序](https://blog.liftsecurity.io/2012/12/07/writing-secure-express-js-apps)提供了一个很好的起点。它涵盖了 zeMirco 提到的 csrf 和头盔之外的其他一些东西。

另一件事是您无法将 express.js 与 rails 进行比较。它们是苹果和橙子。例如，没有与 Express 捆绑的 ORM，第三方模块的实现或使用取决于您。

我将尝试对您的每一个问题进行细分。

```
-Injection Vulnerabilities (JavaScript, SQL, Mongo, HTML) 
```

同样，这些不是 express 内置的东西。最接近的事情是 XSS 担心模板中的注入。Jade 或 EJS 模板通常与 express output encode < > " ' 和 & 默认使用，但请记住还有其他上下文，例如用户输入到 JavaScript 或 CSS，您需要担心。

```
-Session fixation and hijacking 
```

再次查看上面的博客文章，但 Express 基于并使用大多数[连接](http://www.senchalabs.org/connect/)中间件，其中之一是会话中间件。这里最重要的是正确设置您的 cookie 标志。

```
-Cross-Site Vulnerabilities (Scripting, Request Forgery) 
```

看上面。它还带有 express.csrf() 中间件。提到的博客文章显示了如何实现它。

```
-Mass Assignment 
```

express.js 不是问题，因为它没有适用此类漏洞的概念，但是您编写的自定义逻辑实际上可能容易受到此问题的影响，因此再次验证您的代码是否易受攻击或如果您使用的第三方模块是...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-30T19:47:12.590

我可以立即想到的两个模块：

1.  [csrf](http://www.senchalabs.org/connect/csrf.html)：CRSF 保护中间件。
2.  [头盔](https://github.com/evilpacket/helmet)：实现各种安全标头的中间件

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-06T23:23:26.017

需要注意的一件事是 bodyParser。见[http://andrewkelley.me/post/do-not-use-bodyparser-with-express-js.html](http://andrewkelley.me/post/do-not-use-bodyparser-with-express-js.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-21T09:21:19.390

您应该知道，如果您指定一个包罗万象的错误处理程序，则不应重新启动服务器或在该处理程序中执行任何阻塞以响应 USER 错误（`4xx`范围），因为它可能导致 DOS 漏洞。此漏洞已在 中自动解决`express-error-handler`，并且服务将尽快关闭（当活动连接耗尽或发生超时时），因此重新启动应该不是什么大问题。实现这种行为对我的漏洞利用测试产生了很大的影响。

顺便说一句，简单地忽略所有未处理的错误是不安全的。这将使您的应用程序处于未定义状态，这只是提出了另一种类型的 DOS 漏洞。

# ios - 单例应该在方法中使用 self 还是 shared 实例

> ID：14612148
> 
> 赞同：3
> 
> 时间：2013-01-30T19:30:14.307
> 
> 标签：ios, objective-c, singleton

在单例方法中我应该如何使用单例：

喜欢：

```
 [self doMethod]; 
```

或者：

```
 [[SingletonClass sharedSingleton] doMethod]; 
```

?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T19:38:40.353

我想不出用第二种方式做的理由。这种方式更长、更慢、更脆弱——而且没有任何好处。除非`self`您有真正令人信服的理由不这样做，否则请使用。单例本质上只是普通对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:32:25.813

我更喜欢尽量减少客户端的调用次数，因此我建议您在单例上使用一个方便的类方法，将实例方法发送给单例。

# java - 使用 Java 创建与服务器的可信 ssl 握手

> ID：14612149
> 
> 赞同：1
> 
> 时间：2013-01-30T19:30:16.397
> 
> 标签：java, web-services, ssl, axis2

我需要帮助使用 Axis2 和 org.jsslutils.sslcontext.X509SSLContextFactory 创建与 Web 服务的可信连接。我从 Web 服务的管理控制台 (client.p12) 生成了一个客户端证书。我还通过转到端点 uri 并使用浏览器 (pubserver.cer) 将其导出到文件来获取服务器的公共证书。我使用 keytool (mywsks.jks) 将 client.p12 转换为 jks。我还将 pubserver.cer 导入到密钥库中。我对 ssl 很陌生。我是否需要将这些证书导入到 .../jre/lib/security/cacert 或 cacerts 或trusted.libraries，或者我可以只引用 mywsks.jks 吗？如何使用 X509SSLContextFactory 为服务器设置我的代码以信任我？它似乎需要一个 keyStore 和一个 trustStore ，我从这个例子中得出：

```
X509SSLContextFactory sslContextFactory = new X509SSLContextFactory( 
    keyStore, keyStorePassword, trustStore); 
```

我目前正在使用它来创建 keyStore 和 trustStore：

```
KeyStore keyStore = KeyStore.getInstance("JKS");     
String keyStoreFile = "mywsks.jks"; 
InputStream keyInput = new FileInputStream(keyStoreFile);
String keyStorePassword = "thepassword"; 
keyStore.load(keyInput, keyStorePassword.toCharArray());
keyInput.close();

String trustStoreFile = "/path/to/cacert"; 
KeyStore trustStore = KeyStore.getInstance("JKS");
keyInput = new FileInputStream(trustStoreFile);
String trustStorePassword = "thepassword";
trustStore.load(keyInput, trustStorePassword.toCharArray());
keyInput.close(); 
```

我收到以下错误：

```
org.apache.axis2.AxisFault: sun.security.validator.ValidatorException: No trusted certificate found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:24:27.907

1.  将用于在 Web 服务中进行身份验证的客户端证书添加到 keyStore(client.p12) 中。
2.  将服务器的公钥 (pubserver.cer) 添加到您的 trustStore。它可以是 /jre/lib/security/cacert

你能发布你面临的问题吗？因为在我看来，这是一个令人困惑且需要讨论的大话题。

这个例子将帮助你实现这个..

[http://code.google.com/p/jsslutils/wiki/ApacheHttpClientUsage](http://code.google.com/p/jsslutils/wiki/ApacheHttpClientUsage)

最后你可以建立一个 URL 连接..

# breeze - 保存后查询中的实体双倍

> ID：14612150
> 
> 赞同：1
> 
> 时间：2013-01-30T19:30:16.453
> 
> 标签：breeze

我正在使用 Breeze 创建动态数据编辑网格。在我向管理器添加新实体、编辑属性、将其保存到 WebAPI 服务并进行本地查询后，我得到了两次相同的实体。一个实体在 entitystate 中服务器生成的键不变，另一个是 primarykey -1 并在 entitystate 中添加。

真的不知道我做错了什么或者不了解 Breeze 背后的机制。

笔记。

我正在使用覆盖了 savechanges 方法的自定义上下文提供程序。我在键映射中返回实体类型、实值（DB 生成的键）、临时值（由 Breeze 分配的键，例如 -1）。

编辑。

我解决了这个问题。我的自定义上下文提供程序中有一个错误。我忘记将生成的键盘映射实际添加到 savechangescore 方法的结果中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:42:57.610

首先要检查的是您是否真的使用临时密钥（即-1）保存实体。

如果是这种情况（您显然不想要），那么该 entityType 的元数据中可能没有正确的“AutoGeneratedKeyType”。您可以通过调用 MetadataStore.getEntityType 方法并检查元数据来检查这一点。

如果不是这种情况，请将代码发布到您的自定义上下文提供程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:22:41.633

我解决了这个问题，我的自定义上下文提供程序中有一个错误。我忘记将我正在生成的键盘映射实际添加到 savechangescore 方法的结果中。

# sql - Adventure Work 数据库中复合主键的概念

> ID：14612151
> 
> 赞同：3
> 
> 时间：2013-01-30T19:30:17.053
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想知道为什么 Adventure 工作数据库中的 EmailAddress 表使用复合主键（BusinessEntityID，EmailAddressID（Identity））？如果这与为这两个字段设置集群索引有关，如果告诉我复合主键如何物理存储（以何种顺序以及如何插入数据），我将不胜感激？

![在此处输入图像描述](../Images/eafd57b9680c73153345dea20d23944b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:43:10.207

就是因为这样，同一个e-mail地址可以被多个Person使用，同一个Person也可以使用多个e-mail地址，即person和e-mail地址之间的关系是多对多的.

如果仅仅需要强制电子邮件地址应该属于某个人，那么将其设置为外键并且该列`BusinessEntityID`不可为空就足够了。

**更新：**

这里涉及 2 个表，`Person`并且`EmailAddress`.

中的每条记录`Person`都由一个 标识`BusinessEntityID`。要将一条记录`Person`与另一个表中的记录相关联`T`，只需在该表中包含一个`T`引用的列即可`BusinessEntityID`。现在，如果我们需要确保 in 中的所有记录`T` *必须*与 in 中的某些记录相关联`Person`，那么我们将放置外键约束`T.BusinessEntityID`并使其不可为空。如果除此之外，我们希望确保 in 中的每条记录都`T`必须与 in 中的一条且只有一条记录相关联`Person`，那么我们可以对 column 设置唯一性约束`T.BusinessEntityID`。

当我们创建 2 列`A`和`B`表的主键的一部分时，我们告诉数据库这两列的值对于该表**中**的所有记录必须是唯一的。它与每个列中的值和任何外键关系无关。

为了显示：

```
Person (BusinessEntityID, Name) and PK is BusinessEntityID
---------------
1 | John
---------------
2 | Jane
---------------
3 | Sales Team

EmailAddress (BusinessEntityID, EmailAddressID, EmailAddress) and PK is [Business EntityID, EmailAddressID] where EmailAddress is auto-incremented
--------------
1 | 1 | john@example.com
------------------------
1 | 2 | john@contoso.com
------------------------
2 | 3 | jane@example.com
------------------------
2 | 4 | jane@contoso.com
------------------------
1 | 5 | sales@example.com
------------------------
2 | 6 | sales@example.com
------------------------
3 | 7 | sales@example.com 
```

在您的示例中，可以将与上述类似的数据放入表格中。现在这里发生了什么？

有 3 个实体，John、Jane 和 Sales Team。

John 有 2 个个人电子邮件地址。Jane 也有 2 个个人电子邮件地址。此外，该电子邮件`address sales@example.com`属于销售团队，但也属于 John 和 Jane。

这是一个多对多的关系。

此外，如果 EmailAddress 中的复合键是集群的，则这些键按它们出现的顺序存储。阅读[此](https://stackoverflow.com/questions/389348/should-a-composite-primary-key-be-clustered-in-sql-server)内容以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:38:21.473

那是因为组合，一个电子邮件地址不能没有一个人存在。所以 BusinessEntityID 也是 EmailAddress 表的主键

# java - 运行 .exe 文件，同时还从 java GUI 获取参数

> ID：14612155
> 
> 赞同：-1
> 
> 时间：2013-01-30T19:30:27.460
> 
> 标签：java, user-interface

如何获取 GUI 中指定的多个参数以在外部 .exe 文件（GLPK 求解器）中运行？

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:04:34.100

您当前的代码：

```
Process process = new ProcessBuilder("C:/Users/Tyler/Desktop/glpk-4.47/w64/glpsol.exe","-m NetFlow2stage.mod -o NetFlow2stageJAVA.sol -d NetworkData2.dat").start(); 
System.out.println("..."); 
String content = "out!"; 
```

几乎是正确的——几乎。参数应该是 ProcessBuilder 构造函数的单独参数。尝试这个：

```
Process process = new ProcessBuilder("C:/Users/Tyler/Desktop/glpk-4.47/w64/glpsol.exe","-m NetFlow2stage.mod", "-o NetFlow2stageJAVA.sol", "-d NetworkData2.dat").start(); 
System.out.println("..."); 
String content = "out!"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:37:36.930

你的主要方法：

```
public static void main(String [] args){ 
```

包含获取参数所需的一切，因为它们将被分配给`args`数组。

如果或是否需要使用 java 来执行 exe？这可以通过使用这个来完成：

```
String[] cmd = { "myProgram.exe", "-o=This is an option" };
Runtime.getRuntime().exec(cmd); 
```

**编辑**
试试这个作为路径：

> C:\\Users\\Tyler\\Desktop\\glpk-4.47\\w64\\glpsol.exe

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:37:18.483

看`Runtime.getRuntime().exec(String func)`功能。您可以执行外部程序以及向其传递参数。

例如：

`Runtime.getRuntime().exec("notepad.exe JavaProgram.java")`将`notepad.exe`在打开文件的同时执行`JavaProgram.java`，如果文件不存在则创建文件（保存时）

# javascript - 对数组中的每个 10 重复操作

> ID：14612160
> 
> 赞同：0
> 
> 时间：2013-01-30T19:30:43.063
> 
> 标签：javascript, arrays, loops, multidimensional-array

我有一个包含近 300 个值的数组（取自 API），但我需要`someAction()`使用 10 个值的集合进行调用。我的意思是，1-10、11-20、21-30……等等。我将其限制为 10，但其他 290 个值丢失了。它是一个多维数组。

```
var n = 10; // Limit of names
for (var i = 0; i < n; i++) {
    namestr += names[i].first + "(" + names[i].nick + ")";
    if(i != (n-1)){namestr += ", ";}
}
someAction(namest, function(){...}); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T19:37:17.170

如果您只想在每 10 个元素上调用 someAction，您可以这样做：

```
for (var i = 0; i < names.length; i+=10) {
    someAction(names.slice(i, i+10));
} 
```

根据您的评论，您可以这样做：

```
for (var i = 0; i < names.length; i+=10) {
    var tmp = names.slice(i, i+10);
    for (var j = 0; j < tmp.length, j++) {
        tmp[j] = tmp[j].first + " (" + tmp[j].nick + ")";
    }
    someAction(tmp.join(","));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:39:42.053

您可以使用[Array.slice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)从大数组中剪切 10 个元素的块并使用它调用您的函数：

```
for (var i = 0; i < names.length; i += 10) {

   var elements = names.slice(i, i+10);
   // handle this set 
   handleTenItems(elements);
} 
```

或者，如果您只需要处理 10 个一组的元素：

```
for (var base = 0; base < names.length; base += 10) {

  for (var i = 0; i < n; i++) {
    namestr += names[base + i].first + "(" + names[base + i].nick + ")";
    if(i != (n-1)){namestr += ", ";}
  }
  someAction(namest, function(){...});
} 
```

旁注：我在这里看不到多维数组...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:39:49.713

您可以将项目添加到字符串，并为每 10 个项目调用该方法，然后使用剩余部分调用它：

```
for (var i = 0, namestr = ''; i < names.length; i++) {
  namestr += (namestr.length ? ", " : "") + names[i].first + "(" + names[i].nick + ")";
  if (i % 10 == 9) {
    someAction(namestr, function(){...});
    namestr = '';
  }
}
if (namestr.length) {
  someAction(namestr, function(){...});
} 
```

# android - LinearLayout 中的子宽度

> ID：14612165
> 
> 赞同：0
> 
> 时间：2013-01-30T19:30:51.800
> 
> 标签：android, android-linearlayout, android-ui

我有一个`LinearLayout`用来制作一个显示日期的框：

```
<LinearLayout android:id="@+id/date_layout"
    android:background="@drawable/bg_frame"
    android:layout_gravity="center"
    android:layout_marginRight="3dp"
    android:layout_rowSpan="3"
    android:minWidth="65dp"
    android:orientation="vertical"
>
    <TextView android:id="@+id/date"
        android:gravity="center"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:textColor="@android:color/holo_blue_bright"
        android:textSize="20sp"
    />
    <View
        android:background="@android:color/holo_blue_bright"
        android:layout_height="1dp"
        android:layout_width="match_parent"
    />
    <TextView android:id="@+id/day_of_week"
        android:gravity="center"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:textColor="@android:color/holo_blue_bright"
    />
</LinearLayout> 
```

它是一个不错的小盒子（`View`上面的代码中没有这个）：![日期框](../Images/1bc28549580e4413cb73c0880d8eeda6.png)

当我把`View`它放在那里时，它把盒子一直延伸到屏幕上，我只想在盒子的宽度上画一条线而不改变它的宽度，为什么它在我编码的时候不起作用？不应该`android:layout_width="match_parent"`简单地匹配包含的宽度`LinearLayout`吗？为什么它适用于两者`TextViews`而不是`View`？

`LinearLayout`包含在一个`GridLayout`.

我还发现，如果我将 替换为`View`，`TextView`但其他所有内容完全相同，它会按我的意愿工作，并且不会扩展以填充整个屏幕宽度。为什么 TextView 像我期望的那样工作而 View 不是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:42:43.873

你在 LinearLayout 上没有 layout_width 或 layout_height。所以它的宽度和高度是未定义的，可能默认为全屏。您需要将其宽度设置为 wrap_content。

# iphone - 手指滑动图库控件 - 调整大小问题

> ID：14612177
> 
> 赞同：1
> 
> 时间：2013-01-30T19:32:18.743
> 
> 标签：iphone, jquery-plugins, swipe

我正在使用 jQuery 手指滑动插件在移动设备上显示照片库。图库容器设置为 100% 宽度，当页面加载时它会很好地填满屏幕。但是，当屏幕旋转时，图库容器不会重新调整大小。

我添加了一个 re-size 检测事件，它在屏幕旋转时重新调整画廊容器的大小，并且第一张幻灯片的大小调整得很好，但其余的幻灯片没有调整大小。我为所有隐藏的幻灯片添加了一个类并更新了它们，但插件似乎忽略了这些大小。看起来它检测到页面加载时的宽度，并忽略了我在重新调整宽度时对宽度所做的任何更改。

关于如何解决这个问题的任何想法？插件名称是“jquery-touchwipe-iphone-ipad-library”，我完全按照这里的描述使用它：http: [//archive.plugins.jquery.com/project/Touchwipe-iPhone-iPad-wipe-gesture](http://archive.plugins.jquery.com/project/Touchwipe-iPhone-iPad-wipe-gesture)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:49:09.247

原来这个问题不是手指滑动插件，而是循环插件。有几个选项可以使 Cycle 插件响应，但可以在这里找到对我有用的选项： [Making a jQuery cycle plugin become responsive to the layout pixels？](https://stackoverflow.com/questions/7003290/making-a-jquery-cycle-plugin-become-responsive-to-the-layout-pixels)

# python - 使用python从文本文件中查找并打印带引号的文本

> ID：14612182
> 
> 赞同：3
> 
> 时间：2013-01-30T19:32:33.847
> 
> 标签：python, quotation-marks

我是 python 初学者，希望 python 从文本文件中捕获引号中的所有文本。我尝试了以下方法：

```
filename = raw_input("Enter the full path of the file to be used: ")
input = open(filename, 'r')
import re
quotes = re.findall(ur'"[\^u201d]*["\u201d]', input)
print quotes 
```

我得到错误：

```
Traceback (most recent call last):
  File "/Users/nithin/Documents/Python/Capture Quotes", line 5, in <module>
    quotes = re.findall(ur'"[\^u201d]*["\u201d]', input)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py", line 177, in findall
    return _compile(pattern, flags).findall(string)
TypeError: expected string or buffer 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:51:31.640

正如 Bakuriu 指出的那样，您需要`.read()`像这样添加：

```
quotes = re.findall(ur'[^\u201d]*[\u201d]', input.read()) 
```

`open()`仅返回一个文件对象，而`f.read()`将返回一个字符串。此外，我猜您正在寻找两个引号之间的所有内容，而不是在`[\^u201d]`引号之前出现零次或多次。所以我会试试这个：

```
quotes = re.findall(ur'[\u201d][^\u201d]*[\u201d]', input.read(), re.U) 
```

unicode的`re.U`帐户。或者（如果你没有两组右双引号并且不需要unicode）：

```
quotes = re.findall(r'"[^"]*"', input.read(), re.U) 
```

最后，您可能想要选择一个不同于 的变量`input`，因为`input`它是 python 中的一个关键字。

您的结果可能如下所示：

```
>>> input2 = """
cfrhubecf "ehukl wehunkl echnk
wehukb ewni; wejio;"
"werulih"
"""
>>> quotes = re.findall(r'"[^"]*"', input2, re.U)
>>> print quotes
['"ehukl wehunkl echnk\nwehukb ewni; wejio;"', '"werulih"'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:47:31.043

您可以尝试一些 python 内置函数，而不是使用正则表达式。生病让你做艰苦的工作：

```
message = '''
"some text in quotes", some text not in quotes. Some more text 'In different kinds of quotes'.
'''
list_of_single_quote_items = message.split("'")
list_of_double_quote_items = message.split(""") 
```

具有挑战性的部分将是解释拆分列表的含义并处理所有边缘条件（字符串中只有一个引号、转义序列等）

# jquery - 停靠在移动 Safari 中的底部 div

> ID：14612184
> 
> 赞同：1
> 
> 时间：2013-01-30T19:32:53.757
> 
> 标签：jquery, css

我想在网页上添加一个底部停靠菜单，也居中对齐。我尝试使用 css 和 position:fixed ，例如：

```
footer{
  position:fixed;
  width:980px;
  bottom:0px;
  left:50%;
  margin-left:-490px;
} 
```

这似乎适用于所有浏览器，但放大仅显示页脚中心并隐藏边缘的结果。溢出：滚动没有效果。所以我想到了使用 position:absolute 结合 jquery。所以css是：

```
footer{
  position: absolute;
  margin: 0 auto;
  width: 980px;
} 
```

和 jQuery：

```
function hscrollbar() {
   var scrollBottom = $(window).scrollTop();// + $(window).height();
   $('#footer').css('bottom', -scrollBottom + 'px');
}
window.onscroll = hscrollbar; /* Call the function when the user scrolls */
window.onresize = hscrollbar; /* Call the function when the window resizes */ 
```

这似乎适用于 Chrome、FF 等......并且放大不会隐藏页脚，但在移动 Safari 中，结果不是预期的。在缩放/调整大小时，页脚根本不会移动，并且在滚动时它会一直向下。

那么我如何添加一个在放大时不会隐藏并且也适用于移动 Safari 的停靠底部菜单？

# java - 通过哈希表进行无限循环迭代

> ID：14612188
> 
> 赞同：4
> 
> 时间：2013-01-30T19:33:02.847
> 
> 标签：java, hashtable

我正在尝试使用 Hashtables 在数组中找到最受欢迎的单词。由于某种原因，while 循环无限循环。我已经调试过，元素从它得到的第一个元素永远不会改变。关于为什么会发生这种情况的任何想法？

这是我的代码：

```
import java.util.Hashtable;

public class MyClass {
  public String mostPopularString (String []words) {
    if (words == null)
            return null;
    if (words.length == 0)
            return null;
    Hashtable<String, Integer> wordsHash = new Hashtable<String, Integer>();
    for (String thisWord : words)
    {
        if (wordsHash.containsKey(thisWord))
        {
            wordsHash.put(thisWord, wordsHash.get(thisWord) + 1);
        }
        else
        {
            wordsHash.put(thisWord, 1);
        }
    }
    Integer mostPopularCount = 0;
    String mostPopularWord = null;
    boolean tie = false;
    while (wordsHash.keys().hasMoreElements())
    {
        String currentWord = (String) wordsHash.keys().nextElement();
        if (wordsHash.get(currentWord) > mostPopularCount)
        {
            mostPopularCount = wordsHash.get(currentWord);
            mostPopularWord = currentWord;
            tie = false;
        }
        else if (wordsHash.get(currentWord) == mostPopularCount)
        {
            tie = true;
        }
    }
    if (tie)
        return null;
    else
        return mostPopularWord;
  }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T19:37:14.520

您正在调用`wordsHash.keys()`循环的每次迭代，这会在每次迭代中为您提供新鲜感- 然后您会在循环*内*`Enumeration<String>`再次调用它。

 *您想调用它*一次*，然后遍历单个`Enumeration<String>`：

```
Enumeration<String> iterator = wordsHash.keys();
while (iterator.hasMoreElements())
{
    String currentWord = iterator.nextElement();
    ...
} 
```

请注意，由于您还获得了每个元素的值，因此最好迭代.`entrySet()`而不是`keys()`.

你*也*最好使用`HashMap`而不是`Hashtable`，因为你可以只使用增强的 for 循环......

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-30T19:36:38.903

问题在排队

```
while (wordsHash.keys().hasMoreElements()) 
```

每次通过循环，您都会获得枚举的新副本。您将希望获得一次密钥集，然后对其进行迭代。

在这里使用增强的 for 循环可能会更容易

```
 for (Map.Entry<String,Integer> entry : wordsHash.entrySet()) {
        String currentWord = entry.getKey();
        Integer currentCount = entry.getValue();
        //more code here
    } 
```

这应该提供您想要的行为，同时更简单、更容易阅读。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-30T19:36:46.490

问题是，无论何时调用`wordsHash.keys()`，它都会返回一个新的枚举：

```
while (wordsHash.keys().hasMoreElements())                        // <=== HERE
{
    String currentWord = (String) wordsHash.keys().nextElement(); // <=== AND HERE 
```

您需要做的是创建一个枚举并在整个循环中使用它。

PS你为什么使用`Hashtable`而不是`HashMap`？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T19:37:33.320

每次调用都会`.keys()`返回一个新的枚举，并带有一个用于迭代的新内部指针：

```
Hashtable table = new Hashtable();
table.put("a", "a");
table.put("b", "b");
boolean b = table.keys() == table.keys();
System.out.println(b); // false
                       // the two calls to `.keys()` returned different instances of Enumeration 
```

因此，将您的`keys`枚举分配给一个变量：

```
Enumeration keys = wordsHash.keys();
while (keys.hasMoreElements())
{
    String currentWord = (String) keys.nextElement();

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T19:36:53.350

将您的代码更改为：

```
Enumeration<String> keys = wordsHash.keys();
while (keys.hasMoreElements()) {
    String currentWord = keys.nextElement(); 
```

`HashTable`这样每次进入循环时都不会创建指向第一个键的新枚举。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T19:36:33.493

没有任何东西可以修改`wordsHash`. 这意味着如果`wordsHash.keys().hasMoreElements()`一次为真，它将在程序的其余部分继续为真。这会导致无限循环。您要么需要删除密钥，要么只使用 for

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T19:37:27.767

每次循环迭代都会得到一个新的 Iterable 提供所有键：`wordsHash.keys()`只要其中至少有一个键，while 循环就永远不会结束。

代替：

```
while (wordsHash.keys().hasMoreElements()){
   String currentWord = (String) wordsHash.keys().nextElement(); 
```

经过

```
for (String currentWord: wordsHash.keys()){ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-30T19:43:17.540

此外，与您的枚举问题无关，这可能是一个缺陷：

```
else if (wordsHash.get(currentWord) == mostPopularCount) 
```

这是 java.lang.Integer 与另一个 java.lang.Integer 的参考比较。这不是它们所代表的实际值的比较。它适用于“小”数字，因为自动装箱使用缓存的引用，但最终会中断。你可能想要：

```
else if (wordsHash.get(currentWord) == mostPopularCount.intValue()) 
```*

# r - 有没有办法`source（）`并在出错后继续？

> ID：14612190
> 
> 赞同：31
> 
> 时间：2013-01-30T19:33:16.687
> 
> 标签：r

我有一个大的 R 脚本，比如 142 个小部分。如果一个部分因错误而失败，我希望脚本继续而不是停止。这些部分不一定相互依赖，但有些部分确实如此。如果中间有一个失败，那没关系。我不想在这个脚本中加入`try()`调用。而且我不希望将文件分成许多较小的文件，因为每个部分都很短。

如果`source()`可以让它像在 R 控制台上复制和粘贴一样工作，那就太好了。或者，如果有办法将错误降级为警告，那也可以。

脚本运行后，我打算对错误或警告文本的输出进行 grep（或类似操作），以便我可以看到所有发生的错误或警告，而不仅仅是它在第一个错误时停止。

我已经阅读`?source`并搜索了 Stack Overflow 的 [R] 标签。我发现了以下类似的问题，但是`try`并`tryCatch`提供了答案：

[R 脚本 - 如何在错误时继续执行代码](https://stackoverflow.com/questions/8852406/r-script-how-to-continue-code-execution-on-error)
[有没有办法让 R 脚本在收到错误消息后继续执行而不是停止执行？](https://stackoverflow.com/questions/4359310/is-there-any-way-to-have-r-script-continue-after-receiving-error-messages-instea)

我不是在寻找`try`或`tryCatch`出于上述原因。这不适用于 R 包测试，我知道测试框架以及许多`try()`or`test_that()`调用（或类似调用）是完全合适的。这是为了我有描述的脚本的其他东西。

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-30T19:55:56.157

为了使这一点更具体，以下内容如何？

首先，为了测试该方法，创建一个`"script.R"`包含多个语句的文件（调用它），其中第一个语句在评估时会引发错误。

```
## script.R

rnorm("a")
x <- 1:10
y <- 2*x 
```

然后将其解析为一个表达式列表，并依次评估每个元素，将评估包装在一个调用中，`tryCatch()`以便错误不会造成太大的损害：

```
ll <- parse(file = "script.R")

for (i in seq_along(ll)) {
    tryCatch(eval(ll[[i]]), 
             error = function(e) message("Oops!  ", as.character(e)))
}
# Oops!  Error in rnorm("a"): invalid arguments
# 
# Warning message:
# In rnorm("a") : NAs introduced by coercion
x
# [1]  1  2  3  4  5  6  7  8  9 10
y
# [1]  2  4  6  8 10 12 14 16 18 20 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-30T20:42:40.790

评估包**为其**`evaluate()`功能提供了另一种选择。它不像我的其他建议那么轻巧，但是——作为**knitr**的基础功能之一——它已经过了你所希望的那样的良好测试！

```
library(evaluate)

rapply((evaluate(file("script.R"))), cat)  # For "script.R", see my other answer
# rnorm("a")
# NAs introduced by coercionError in rnorm("a") : invalid arguments
# In addition: Warning message:
# In rnorm("a") : NAs introduced by coercion
x
#  [1]  1  2  3  4  5  6  7  8  9 10
y
#  [1]  2  4  6  8 10 12 14 16 18 20 
```

对于看起来更像您在命令行中实际键入语句的输出，请使用`replay()`. （感谢哈德利的提示）：

```
replay(evaluate(file("script.R")))
# >
# > rnorm("a")
# Warning message:
# NAs introduced by coercion
# Error in rnorm("a"): invalid arguments
# > x <- 1:10
# > y <- 2*x 
```

* * *

**编辑**

`replay()`如果您只需要这些，还提供了一种更好的方法来回放错误和警告：

```
## Capture the output of evaluate()
res <- evaluate(file("script.R"))

## Identify those elements inheriting from "error" or "warning
ii <- grepl("error|warning", sapply(res, class))   

## Replay the errors and warnings
replay(res[ii])
# Warning message:
# NAs introduced by coercion
# Error in rnorm("a"): invalid arguments
# > 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-30T20:03:10.760

这很笨拙，并且没有使用任何人的朋友`eval(parse(`，但可能会有所帮助..乔希的回答要干净得多。

```
# assign the filepath
fn <- "c:/path/to your/script.R"

# read in the whole script
z <- readLines( fn )

# set a starting j counter
j <- 1

# loop through each line in your script..
for ( i in seq(length(z)) ) {

    # catch errors
    err <- try( eval( parse( text = z[j:i] ) ) , silent = TRUE )

    # if it's not an error, move your j counter up to one past i
    if ( class( err ) != 'try-error' ) j <- i + 1 else

    # otherwise, if the error isn't an "end of input" error,
    # then it's an actual error and needs to be just plain skipped.
    if ( !grepl( 'unexpected end of input' , err ) ) j <- i + 1

    # otherwise it's an "end of line" error, which just means j alone.
} 
```

# c++ - 使用 OpenCV 检测图像中的十字

> ID：14612192
> 
> 赞同：42
> 
> 时间：2013-01-30T19:33:27.413
> 
> 标签：c++, opencv, video, feature-detection

我试图在[OpenCV](http://en.wikipedia.org/wiki/OpenCV)的帮助下检测输入视频流中的形状（十字） 。目前我正在设置阈值以获得我的十字架的二进制图像，效果非常好。不幸的是，我决定提取的 blob 是否为交叉的算法表现不佳。正如您在下图中所见，并非所有角都在某些视角下被检测到。

![在此处输入图像描述](../Images/2bafcc149ca5142c63f0349aa95562b1.png)

我正在使用`findContours()`and`approxPolyDP()`来获得我的轮廓的近似值。如果我在这条近似曲线中检测到 12 个角/顶点，则假定该斑点是一个十字。

有没有更好的方法来解决这个问题？我考虑过[SIFT](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)，但算法必须实时执行，我读到 SIFT 并不真正适合实时。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T20:17:42.747

我有一些建议可能会提供一些有趣的结果，尽管我不确定。

如果十字始终靠近图像的中心并且始终位于平面上，您可以尝试在相机和十字所在的平面之间找到​​单应性。这将使您能够将十字架的样本图像（选择不同的平面旋转）转换为可视化十字架的坐标系。然后，您可以生成可以与图像匹配的模板。您可以进行一些简单的像素一致性测试来确定是否匹配。

或者，您可以尝试训练基于[Haar 的分类器](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html?highlight=haar#haar-feature-based-cascade-classifier-for-object-detection)来识别十字架。这种分类器常用于人脸检测，检测图像中的有向边缘，通过若干有向边缘的相对位置对人脸进行分类。它在人脸上具有良好的分类精度，并且速度极快。虽然我不能保证它在这种特殊情况下的准确性，但它可能会为简单的形状（如十字）提供一些好的结果。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-02T09:29:03.513

计算[凸包](http://en.wikipedia.org/wiki/Convex_hull_algorithms)然后利用[凸性缺陷](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=convex#convexitydefects)可能会起作用。

所有的十字架都应该有四个凸面缺陷，组成四组两点或四个向量。此外，如果您的形状是十字形，那么这四个向量将有两对补角。

# matlab - 是否有可以像 VBA 的 IIF 一样放置 INLINE 的 Matlab 条件 IF 运算符

> ID：14612196
> 
> 赞同：26
> 
> 时间：2013-01-30T19:36:36.780
> 
> 标签：matlab, vba, ternary-operator, conditional-operator, iif

在 VBA 中，我可以执行以下操作：

```
A = B + IIF(C>0, C, 0) 
```

所以如果 C>0 我得到`A=B+C`并且 C<=0 我得到`A=B`

是否有一个运算符或函数可以让我在 MATLAB 代码中**内联这些条件？**

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-12-23T10:35:20.240

简单地使用 MATLAB 在操作需要时自动转换变量类型这一事实怎么样？例如，逻辑加倍。

如果您的变量是双标量，我相信您的代码可以替换为

```
a = b + (c > 0) * c; 
```

在这种情况下，运算符`(c > 0)`值`1`（逻辑类型）无论何时`c > 0`，`0`否则为值。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-30T20:41:30.153

Matlab 中没有三元运算符。当然，您可以编写一个函数来完成它。例如，以下函数`iif`使用 nd 输入作为条件，使用数字和单元格作为结果`a`和`b`：

```
function out = iif(cond,a,b)
%IIF implements a ternary operator

% pre-assign out
out = repmat(b,size(cond));

out(cond) = a; 
```

* * *

对于更高级的解决方案，有一种方法可以创建一个甚至可以执行 elseif 的内联函数，如[这篇关于匿名函数恶作剧的博客文章](http://blogs.mathworks.com/loren/2013/01/10/introduction-to-functional-programming-with-anonymous-functions-part-1/)中所述：

```
iif  = @(varargin) varargin{2*find([varargin{1:2:end}], 1, 'first')}(); 
```

您将此功能用作

```
iif(condition_1,value_1,...,true,value_final) 
```

用任意数量的附加条件/值对替换点。

它的工作方式是它在值中选择第一个条件为真的值。 `2*find(),1,'first')`提供值参数的索引。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-30T20:27:59.073

对此没有内置解决方案，但您可以[自己编写 IIF](http://www.mathworks.com/matlabcentral/fileexchange/28811-matrix-iif/content/iif.m)。

```
function result=iif(cond, t, f)
%IIF - Conditional function that returns T or F, depending of condition COND
%
%  Detailed 
%     Conditional matrix or scalar double function that returns a matrix
%     of same size than COND, with T or F depending of COND boolean evaluation
%     if T or/and F has the same dimensions than COND, it uses the corresponding 
%     element in the assignment
%     if COND is scalar, returns T or F in according with COND evaluation, 
%     even if T or F is matrices like char array.
%
%  Syntax
%    Result = iif(COND, T, F)
%           COND - Matrix or scalar condition
%           T  - expression if COND is true
%           F  - expression if COND is false
%           Result - Matrix or scalar of same dimensions than COND, containing
%                    T if COND element is true or F if COND element is false.
%
if isscalar(cond) 
   if cond 
       result = t;
   else
       result = f;
   end
else
  result = (cond).*t + (~cond).*f;
end  
end 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-23T12:08:21.957

其他人已经说过`?:`Matlab中没有三元运算符。作为解决方案，我建议使用这个函数，它采用三个函数而不是值。因此，不必要的计算量被最小化，您可以在开始计算*之前*检查条件，例如，如果一个值是真正的数字、有限或非零：

```
function [ out ] = iif( condition, thenF, elseF, in, out)
%iif Implements the ternary ?: operator
%   out = iif (@condition, @thenF, @elseF, in[, out])
%
%   The result is equivalent to:
%   condition(x) ? thenF(x) : elseF(x)
%
%   The optional argument out serves as a template, if the output type is
%   different from the input type, e.g. for mapping arrays to cells and
%   vice versa.
%
% This code is in the public domain.

mask = condition(in);
if nargin <= 4
  out = in;
end

if sum(mask)
  out(mask)  = thenF(in(mask));
end
if sum(~mask)
  out(~mask) = elseF(in(~mask));
end

end 
```

像这样使用它：

```
f = @(y)(iif(@(x)(x > 3), @(x)(x.^2), @(x)(x/2), y))
f(linspace(0,6,10)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-27T21:18:36.877

受乔纳斯回答的启发，下面的函数也适用于混合类型输入和字符，他的函数并不稳定。

```
function out = iif(cond, a, b)
%IIF implements a ternary operator

    % Use cell output for either char or mixed type input
    if ischar(a) || ischar(b) || ~strcmp(class(a), class(b))
        out = cell(size(cond));
        [out{cond}] = deal(a);
        [out{~cond}] = deal(b);
    else
        % Use array output and logical indexing
        out = repmat(b, size(cond));
        out(cond) = a;
    end
end 
```

**编辑**：清除了单元分支中的额外条件选项，这些选项显然是先前错误的残余，这可能更快，而且绝对更干净。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-06T18:16:11.697

您指的是三元运算符，采用类似 C 的表示法[?:](https://en.wikipedia.org/wiki/%3F:)。表达方式

```
tern = bool ? T : F 
```

`T`如果`bool`计算结果为真，则返回，`F`否则。MATLAB 没有三元运算符，但它可以以不同的方式实现为内联表达式。

**数组**

```
% cell array version (any type)
tern = {F,T}{bool+1} % only Octave
tern = subsref({F,T}, struct('type', '{}', 'subs', {{bool+1}}))
% vector array version (numeric types only)
tern = [F,T](bool+1) % only Octave
tern = subsref([F,T], struct('type', '()', 'subs', {{bool+1}})) 
```

请注意，`T`和`F`已被交换，并且使用了不同的括号。向量数组版本是数字类型的特化。[MATLAB 不允许直接索引新数组](https://stackoverflow.com/questions/3627107/how-can-i-index-a-matlab-array-returned-by-a-function-without-first-assigning-it)，因此使用`subsref`.

*   优点：适用于任何类型和任何值。可以内联使用。
*   缺点：在将结果返回到 之前`tern`，`T`和`F` 都被评估。

**逻辑运算符和评估**

```
( bool && eval('tern=T') ) || eval('tern=F') 
```

请注意，逻辑运算符是[短路的](https://www.mathworks.com/help/matlab/ref/logicaloperatorsshortcircuit.html)。

*   优点：适用于任何类型和任何值。仅评估一个`T`或`F`。
*   缺点：仅适用于 Octave。不能内联使用，而是通过变量`tern`. `eval`效率不高，但需要。

**基本算术**

```
tern = bool*T + !bool*F 
```

*   优点：可以内联使用。
*   缺点：仅适用于数字类型，并且在`T`or `F`are `NaN`or时可能会失败`Inf`。`T`和,都`F`被评估。

**最大**

```
tern = max(T,F) % bool = T>F 
```

请注意，此解决方案符合初始问题的特定要求`max(C,0)`。

*   优点：可以内联使用。
*   缺点：仅适用于数字类型，并且在`T`或is 时可能`F`会失败`NaN`。`T`和,都`F`被评估。使用受到强烈限制。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-16T23:43:51.657

现在有一个`tern`关于 MathWorks 文件交换的功能：http: [//www.mathworks.com/matlabcentral/fileexchange/39735-functional-programming-constructs/content/tern.m](http://www.mathworks.com/matlabcentral/fileexchange/39735-functional-programming-constructs/content/tern.m)

代码在这里复制：

```
function varargout = tern(condition, true_action, false_action)

% out = tern(condition, true_action, false_action)
% 
% Ternary operator. If the first input is true, it returns the second
% input. Otherwise, it returns the third input. This is useful for writing
% compact functions and especially anonymous functions. Note that, like
% many other languages, if the condition is true, not only is the false
% condition not returned, it isn't even executed. Likewise, if the
% condition is false, the true action is never executed. The second and
% third arguments can therefore be function handles or values.
%
% Example:
%
% >> tern(rand < 0.5, @() fprintf('hi\n'), pi)
% ans =
%     3.1416
% >> tern(rand < 0.5, @() fprintf('hi\n'), pi)
% hi
%
% It works with multiple outputs as well.
%
% >> [min_or_max, index] = tern(rand < 0.5, ...
%                               @() min([4 3 5]), ...
%                               @() max([4 3 5]))
% min_or_max =
%      5
% index =
%      3
%
% Tucker McClure
% Copyright 2013 The MathWorks, Inc.

    if condition() % Works for either a value or function handle.
        [varargout{1:nargout}] = true_action();
    else
        [varargout{1:nargout}] = false_action();
    end

end 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-16T09:06:34.953

这更像是对亚历克斯的回答的补充。

**Alex的方法在你想返回时不起作用`inf`**

在这些情况下，您通常最终会得到一个`0*inf`数字，MATLAB 将评估为`NaN`. 有问题...我们可以使用查找来避免这种乘法。

例如，凸优化中的一个有用的障碍函数是在任何地方都表现得像`log`正的东西，在`-inf`其他地方。以下是使用查找创建此类函数的方法：

```
INF_CONDITION = [0, inf];
fn_logbr = @(x) (x>0)*log(x) - INF_CONDITION( 1+(x<=0) ) 
```

内联条件是一种 hack，你会失去惰性求值。你必须要小心。然而，有语义代码真的很好，当你不能保证每个人的环境都一样时，更容易共享你的代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-10T12:45:28.803

如果您正在寻找一种不会强迫您构建函数并且可以处理相当简单的表达式的选项，那么您可以利用匿名函数。匿名函数返回一个逻辑值，可以是数字 1 或 0。因此，它们可用于与其他数字相乘，以确定它们在表达式之后是否仍然保持值，或者丢失它们的值。

对于您的情况（包括 A、B 和 C 是否为向量）：`A = B .+ (@() C>0)()`

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-05-12T12:42:06.963

使用：

eval('输入;', '输入 = 1;');

在最初可能不存在“输入”的情况下非常有用。

# sql-server - SQL Server 2008 R2 记录查询执行时间不正确

> ID：14612197
> 
> 赞同：2
> 
> 时间：2013-01-30T19:36:41.307
> 
> 标签：sql-server, sql-server-2008-r2

编辑：我添加了登录触发器的所有代码。

为什么在尝试检索查询运行所需的总时间时会得到一些不正确的结果？这是在 SQL Server 2008 R2 上的登录触发器的上下文中。

出于测试目的，我想粗略估计运行登录触发器所需的总时间。这是结果的一个小样本：

```
LogonId  AppId  TotalLogonTime (in MS)
 101      1        0
 253      2        3
 289      2        3
 985      1       -3
 325      1        0 
```

总时间如何评估为负数？在迄今为止的 230 万次执行中，有 25 次执行的时间为 -3 毫秒。这是代码：

```
CREATE trigger [trgAudit]
on all server
with execute as 'TriggerLogonUser'
for logon
as
begin
    set nocount on
    set transaction isolation level read committed

declare
     @LoginTime datetime
    ,@IsWindowsUser bit
    ,@TotalLogonTimeMS int
    ,@ClientNetAddress varchar(48)
    ,@MacAddress nchar(12)
    ,@CurrentUserId int -- UserNames
    ,@ApplicationId int
    ,@HonId int --HostName
    ,@LogonId int --Logon
    ,@MacId int -- MacAddress
    ,@CnaId int -- ClientNetAddress

begin try
    /*
    *** Get the login time, user type, mac address, and client net address  
    */
 select
      @LoginTime = getdate(),
      @IsWindowsUser = case
                          when len(nt_domain) = 0
                             then 0
                          else 1
                       end,
      @MacAddress = p.net_address,
      @ClientNetAddress = convert(varchar(48),connectionproperty('client_net_address'))
 from sys.sysprocesses p
 where 
      p.spid = @@spid

 /*
 *** Client Net Address
 */          
      select top 1
           @CnaId = CnaId
      from master.sysmaintenance.ClientNetAddress with(index(IX_CnaAddress))
      where @ClientNetAddress = CnaAddress

      --if the ip does not exist, insert it.
      if @CnaId is null
           begin
                insert master.sysmaintenance.ClientNetAddress(CnaAddress)
                     values (@ClientNetAddress)
                select @CnaId = @@identity
           end

 /*
 *** Applications
 */     
      select top 1
           @ApplicationId = AppId
      from master.sysmaintenance.Applications with(index(IX_AppName))
      where app_name() = AppName

      if @ApplicationId is null
           begin
                insert master.sysmaintenance.Applications (AppName)
                     values (app_name())
                select @ApplicationId = @@identity
           end

 /*
 *** HostName
 */     
      select top 1
           @HonId = HonId
      from master.sysmaintenance.HostName with(index(IX_HonName))
      where HonName = host_name()

      if @HonId is null
           begin
                insert master.sysmaintenance.HostName
                     values (host_name())

                select @HonId = @@identity
           end

 /*
 *** UserNames
 */     
      select top 1
           @CurrentUserId = UsnId
      from master.sysmaintenance.Usernames with(index(IX_UsnName))
      where UsnName = original_login()

      if @CurrentUserId is null
           begin
                insert master.sysmaintenance.Usernames
                     values (original_login())

                select @CurrentUserId = @@identity
           end

 /*
 *** MacAddress
 */     
      select top 1
           @MacId = MacId
      from master.sysmaintenance.MacAddress with(index(IX_MacAddress))
      where MacAddress = @MacAddress

      -- same logic is continued as in the applications
      if @MacId is null
           begin
                insert master.sysmaintenance.MacAddress (MacAddress)
                     values (@MacAddress)

                select @MacId = @@identity
           end

 /*
 *** Get the total logon time
 */     
 select @TotalLogonTimeMS = datediff(ms,@LoginTime, getdate())

  -- insert ids of the data gathered on the logon event into the logon table.

           insert master.sysmaintenance.Logon ( LogAppId,
                                                LogHonId,
                                                IsWindowsLogon,
                                                CurrentLogonId,
                                                LogonDatetime,
                                                LogCnaId,
                                                LogMacId,
                                                LogonTimeMS )
                values ( @ApplicationId,
                         @HonId,
                         @IsWindowsUser,
                         @CurrentUserId,
                         @LoginTime,
                         @CnaId,
                         @MacId,
                         @TotalLogonTimeMS
                       )
end try

begin catch
    print cast(error_number()    as nvarchar(11))
    print cast(error_severity()  as nvarchar(11))
    print cast(error_state()     as nvarchar(11))
    print cast(error_procedure() as nvarchar(126))
    print cast(error_line()      as nvarchar(11))
    print cast(error_message()   as nvarchar(2048))
end catch
end 
```

这是登录表的 DDL：

```
CREATE TABLE [sysmaintenance].[Logon](
    [LogonId] [bigint] IDENTITY(1,1) NOT NULL,
    [LogAppId] [int] NULL,
    [LogHonId] [int] NULL,
    [LogMacId] [int] NULL,
    [LogCnaId] [int] NULL,
    [IsWindowsLogon] [bit] NULL,
    [CurrentLogonId] [int] NULL,
    [LogonDatetime] [datetime] NULL,
    [LogonTimeMS] [int] NULL
) ON [PRIMARY]

CREATE UNIQUE CLUSTERED INDEX [PK_Logon] ON [sysmaintenance].[Logon] 
(
    [LogonId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY] 
```

任何帮助或见解表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:33:23.840

[`GETDATE()`](http://msdn.microsoft.com/en-gb/library/ms188383.aspx)：

> 将当前数据库系统时间戳作为日期时间值返回，不带数据库时区偏移量。**此值源自运行 SQL Server 实例的计算机的操作系统。**

现在，请记住计算机时钟会漂移，我想如果计算机的时间被纠正（手动或自动），两次连续调用`GETDATE()`（不是单个查询的一部分）报告的时间可能会倒退. 所有的 datetime 方法最终都依赖于计算机的时钟。

遗憾的是，您没有将其中一个`GETDATE()`结果与时间一起记录，因此您可以查看它们是否都在同一“时间”发生。

# php - 此 MySQLI 查询将不起作用/我的 Web 服务器 SQL 设置有问题吗？

> ID：14612205
> 
> 赞同：0
> 
> 时间：2013-01-30T19:36:23.130
> 
> 标签：php, mysql, apache, mysqli

这是我用于查询的代码：

```
$query  = "SELECT * FROM articles LIMIT 1";
$mysqli = mysqli_connect($host, $user , $pass , $database);
$res = mysqli_query($mysqli, $query) or 
die("Couldn't execute query.");
$row = mysqli_fetch_assoc($res);
echo $row; 
```

有没有人看到任何明显的问题会阻止它执行？$host、$user 等在单独的配置文件中定义。

这是我收到的错误消息：

```
Warning: mysqli_connect() [function.mysqli-connect]: (HY000/2002): 
Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2) in
/websites/123reg/LinuxPackage22/bu/ck/et/public_html/admin/config.php on line 8
Connect failed: Can't connect to local MySQL server through socket 
'/var/lib/mysql/mysql.sock' (2) 
```

我已经读到这意味着 SQL 设置存在问题，有人可以确认吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:49:08.080

您的 mysql 没有使用套接字的默认位置，即`/var/lib/mysql/mysql.sock`.

因此，请检查您的配置以找出实际的套接字文件，并相应地替换连接字符串，请参阅[mysqli_connect](http://www.php.net/manual/en/mysqli.construct.php)

# gwt - 如何在 PlayN HTMLGraphicsCanvas 中覆盖 GWT 提供的 CanvasElement 实现？

> ID：14612207
> 
> 赞同：0
> 
> 时间：2013-01-30T19:36:39.073
> 
> 标签：gwt, playn

我正在寻找提供我自己的[CanvasElement](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/dom/client/CanvasElement.java)类的实现。此类在 PlayN 堆栈中的[HTMLGraphicsCanvas](http://code.google.com/p/playn/source/browse/html/src/playn/html/HtmlGraphicsCanvas.java)类中实例化。

这样做的理想方法是什么？我尝试了两种方法但失败了：

A) 继承 HTMLGraphics 和 HTMLPlatform？——这似乎是不可能的。

B) GWT 模块机制似乎要求我对 GWT 提供的类的自定义实现属于同一个包。以这个 XML 片段为例：

```
<replace-with class="com.google.gwt.dom.client.DOMImplOpera">
    <when-type-is class="com.google.gwt.dom.client.DOMImpl"/>
    <when-property-is name="user.agent" value="opera"/>
</replace-with> 
```

如果我这样做：

```
<replace-with class="com.domain.example.CustomCanvasElement">
    <when-type-is class="com.google.gwt.dom.client.CanvasElement"/>
    <when-property-is name="user.agent" value="opera"/>
</replace-with> 
```

...它似乎不起作用，因为包装不同。至少这是我认为正在发生的事情。

还有其他想法吗？非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:41:09.407

好的，所以我可以回答我自己问题的 B) 部分。虽然我真的很感激关于如何提供我自己的实现的整体问题的答案。

所以我的猜测并不完全正确。根据[Deferred Binding](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred#example)的这一部分，基本上你必须首先创建一个超类对象，特定于浏览器的对象将继承该对象。例如：

`GenericBrowserObject`是超类，并且可能在特定于浏览器的对象之间具有某些方法的通用实现，或者可能是所有其他（非特定）浏览器的“包罗万象”实现。

例如，假设您只想为基于 IE 和 Gecko 的浏览器提供特定的实现。

`GeckoBrowserObject extends GenericBrowserObject`

`IEBrowserObject extends GenericBrowserObject`

假设调用`setStyle`了一个通用方法，但它们在和`GenericBrowserObject`之间有不同的实现，那么您将在每个类中覆盖并提供它们自己的实现。`GeckoBrowserObject``IEBrowserObject``setStyle`

操作这些对象的类需要以`GenericBrowserObject`这种方式实例化超类：

```
 GenericBrowserObject obj = GWT.create(GenericBrowserObject.class);
    obj.setStyle("whatever"); 
```

然后在您的模块文件（something.gwt.xml）中，您将拥有如下内容：

```
 <replace-with class="com.domain.blah.GenericBrowserObject">
            <when-type-is class="com.domain.blah.GenericBrowserObject"/>
    </replace-with>

    <replace-with class="com.domain.blah.IEBrowserObject">
            <when-type-is class="com.domain.blah.GenericBrowserObject"/>
            <any>
                    <when-property-is name="user.agent" value="ie6"/>
                    <when-property-is name="user.agent" value="ie8"/>
            </any>
    </replace-with>

    <replace-with class="com.domain.blah.GeckoBrowserObject">
            <when-type-is class="com.domain.blah.GenericBrowserObject"/>
                    <any>
                            <when-property-is name="user.agent" value="gecko"/>
                            <when-property-is name="user.agent" value="gecko1_8"/>
                    </any>
    </replace-with> 
```

当 GWT 编译它时，它将通过 GWT.create 根据用户代理字符串生成正确的对象。

# oracle - ORA0001：导致 Web 应用程序关闭的唯一约束

> ID：14612208
> 
> 赞同：0
> 
> 时间：2013-01-30T19:36:47.920
> 
> 标签：oracle, unique-constraint

有没有人遇到过这个？

Oracle ORA0001：源自 JMX 端点的唯一约束违规导致我部署的应用程序 (Tomcat) 的实例关闭。

我在网上看过，但什么也没看到。有任何想法吗？

# ruby-on-rails - 提高 Rails 错误输出中请求参数的可读性

> ID：14612217
> 
> 赞同：1
> 
> 时间：2013-01-30T19:37:01.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当您在 Rails 应用程序中遇到错误时，使用默认错误处理您将获得类似于以下内容的输出：

[http://i.imm.io/UDtV.png](http://i.imm.io/UDtV.png)

请求参数部分 JSON 的打印方式非常难以阅读 - 除非您仔细阅读每一行，否则无法看到层次结构。有没有办法使用适当的缩进以更易读的方式显示它？举个例子：

```
{
    "utf8"=>"✓",
    "_method"=>"put",
    "authenticity_token"=>"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "task"=>{
        "title"=>"Task1",
        "instructions"=>"Do the task",
        "weighting"=>"10",
        "detail_attributes"=>{
            "is_yes_no"=>"false",
            "id"=>"1"
        },
    },
    ...
} 
```

# java - JSP 将 setProperty 传递给带有 bean 的 java 类

> ID：14612220
> 
> 赞同：-4
> 
> 时间：2013-01-30T19:37:03.070
> 
> 标签：java, jsp

我如何在一些不是 servlet 的 java 类中使用 session.getAttribute 。可能是这样的东西或其他一些技巧？

```
<%    
    <jsp:useBean id="bean" class="ProfitBean" scope="application"/>
        <jsp:setProperty name="bean" value='<%=session.getAttribute("idUser")%>'/>
    %>

    public class ProfitBean{
    private int idUser;
    public void setIdUser(int IdUser){
    ...
    }
    public int getIdUser(){
    ...
    }
    }

    public class SomeClass{
    public void doSomething(){
    ProfitBean pb =new ProfitBean
    int userId = pb.getIdUser();

    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:12:14.980

一个会话需要一个请求。因此，请求必须将 userId 传递给您的 Application-Scope-ProfitBean。

在这种情况下，您可以使用 Singleton 反模式，因此 ProfitBean.getInstance().get/setIdUser() 将包含相同的值。

```
private static ProfitBean profitBeanInstance;

@Deprecated
public ProfitBean(){
    profitBeanInstance=this;
}

public static ProfitBean getInstance(){
    if (profitBeanInstance == null) {
        NullPointerException cause = new NullPointerException();
        throw new IllegalStateException("The instance has not been created by blabla.jsp!", cause);
    }
    return profitBeanInstance;
} 
```

**警告：**此 Singleton 将可供任何用户使用。在“SomeClass”中，您无法确定是哪个用户设置了此值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:49:35.083

如果班级不能得到它，它应该要求它。

换句话说，只需在调用方法时将所需的值传递给它。

```
someClass.doSomething(session.getAttribute("idUser")); 
```

或者，取决于上下文。

```
someClass.doSomething(profitBean); 
```

# java - 泽西岛：返回列表>> 作为 XML

> ID：14612222
> 
> 赞同：1
> 
> 时间：2013-01-30T19:37:09.870
> 
> 标签：java, xml, rest, jaxb, jersey

我有一个 REST 服务，它`List<Map<String,Object>>`在对特定资源执行 GET 时返回一个。但是，它尝试返回此列表`application/xml`并失败，但出现以下异常：

> javax.ws.rs.WebApplicationException：com.sun.jersey.api.MessageException：Java 类 java.util.ArrayList 和 Java 类型类 java.util.ArrayList 和 MIME 媒体类型 application/xml 的消息正文编写器不是成立

堆栈跟踪还为我提供了以下信息：

> 与 MIME 媒体类型兼容的已注册消息正文编写器是：application/xml ->
> com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$App
> com.sun.jersey.core.impl.provider.entity.DocumentProvider
> com.sun.jersey.core.impl.provider.entity.SourceProvider$SourceWriter
> com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$App
> com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$应用程序 */* ->

看来我缺少消息正文作者。鉴于我没有在响应中发送任何自定义类，我假设消息正文编写器类必须已经存在。我需要设置一个缺失的 jar 或配置选项以允许 Jersey 以 xml 形式返回列表吗？

# php - 用于根据条件随机获取定义数量的行的 sql mysql 查询

> ID：14612224
> 
> 赞同：3
> 
> 时间：2013-01-30T19:37:10.570
> 
> 标签：php, mysql, sql, random

我正在开发一个在线考试应用程序，其中有一个问题主表，其中包含一个字段（名称：qtype），其中包含问题类型的数据。问题类型可以是以下三种类型之一：

1.  单身的
2.  多
3.  描述

应用程序使用以下查询从该主表生成随机试卷：

```
select * from mst_question where test_id = 1 ORDER BY RAND() LIMIT 25 
```

这会为我的在线考试申请生成一份包含 25 个问题的随机问卷。

到目前为止它工作得很好......

现在，我需要在我的应用程序中实现一个功能，其中 25 个随机生成的问题（或任何数字 - 这将取决于测试 id）将始终具有主问题表中可用的不同类型问题的固定组合（ mst_question ) 对于每个随机生成的问卷集。

比如说，如果主问题表有 108 个特定测试 id 的问题，并且所有这三种类型的问题都在这个测试的数据库中，它将为每个随机查询提供相同数量的不同类型的问题！我编写了以下 sql 查询来找出主问题表中每种类型的问题的百分比。

到目前为止，我已经尝试过这个并想出了这个 sql 查询：

```
select qtype,count(*) as qtypetotal,(select count(*) from mst_question where test_id = 1) as totalqtype,round((count(*)/(select count(*) from mst_question where test_id = 1)*100),2) as qtypepercentage from mst_question where test_id = 1 group by qtype 
```

上述查询的输出是：

```
qtype qtypetotal 总计qtype qtypepercentage  
降 24 108 22.22 %  
倍数 34 108 31.48 %  
单人 50 108 46.30 %  

```

我需要形成一个 sql 查询，它将给我 25 个随机生成的问题，其中 25 个问题中的 22.22% 应该是 desc 类型，25 个问题中的 31.48% 应该是多种类型，其余 46.30% 的 25 个问题应该是单一类型。

我被卡住了......请建议......

提前致谢 ：-）

谢谢@MikeBrant ....我已经生成了动态sql，这绝对是我想要的方式......现在只有一个问题......如果我执行这个sql查询：

```
select qtype,round(25*(count(*)/(select count(*) from mst_question where test_id = 1))) as numquests from mst_question where test_id = 1 group by qtype 
```

我得到以下结果：

"desc" "6" "multiple" "8" "single" "12"

并基于上面的查询，我生成了这个动态查询：

```
$dynamicsql[] =  "(SELECT * FROM mst_question WHERE test_id = 1 AND qtype = '".trim($rstype->qtype)."' ORDER BY RAND() LIMIT ".$rstype->numquests.")";

$finalsql = implode(" UNION ALL ",$dynamicsql)." ORDER BY RAND()"; 
```

我想生成总共 25 个随机问题，但这些 qtypes 的总和是 26 ！！！我还有一个额外的问题:-(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:42:29.100

我可能会在这里使用 UNION：

```
 (SELECT * FROM mst_question
    WHERE test_id = 1 AND qtype = 'desc'
    ORDER BY RAND() LIMIT X)
UNION ALL
    (SELECT * FROM mst_question
    WHERE test_id = 1 AND qtype = 'multiple'
    ORDER BY RAND() LIMIT Y)
UNION ALL
    (SELECT * FROM mst_question
    WHERE test_id = 1 AND qtype = 'single'
    ORDER BY RAND() LIMIT Z)
ORDER BY RAND() 
```

您可以使用您在原始问题上提出的查询来获取要使用的 X、Y 和 Z 的值。

# python - 带有可切换控制台的 GUI 程序？

> ID：14612228
> 
> 赞同：0
> 
> 时间：2013-01-30T19:37:17.153
> 
> 标签：python, console, terminal, pythonw

我见过一些应用程序允许您在需要阅读日志消息时显示/隐藏控制台。例如 Blender3D 允许这样做 (blender.org)。

我想知道这是否可以在 Python 中完成以及如何完成。

我的主窗口是 Panda3D (panda3d.org) 窗口。我在某处读到一个选项是隐藏“真实”控制台（pythonw）并创建另一个控制台，并且每次您想“显示”“真实”控制台时将所有内容从“真实”控制台重定向到它。不知道*如何*做到这一点。

或者至少是一种通过读取配置文件或其他东西来选择是否使用控制台启动程序的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:18:12.137

我假设您在谈论 Windows，因为在搅拌机中*切换的控制台*是 Windows 独有的。我猜 Blender在 Windows 上使用[`GetConsoleWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683175%28v=vs.85%29.aspx)和。[`ShowWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683175%28v=vs.85%29.aspx)

这就是你在 python 中使用[pywin32](http://sourceforge.net/projects/pywin32/)的方法：

```
import win32gui, win32console, win32api, win32con
import time

console_window = win32console.GetConsoleWindow()
time.sleep(1)
win32gui.ShowWindow(console_window, win32con.SW_HIDE)
time.sleep(1)
win32gui.ShowWindow(console_window, win32con.SW_SHOW)
time.sleep(1) 
```

如果你用 python 而不是 pythonw 运行这个程序，它将显示控制台，休眠一秒钟，隐藏控制台，再休眠一秒钟，然后再次隐藏它。

请注意，此代码仅适用于 Windows。在其他平台上，不需要像这样愚蠢的东西，因为如果您希望程序显示控制台，那么您可以从控制台运行它。

# objective-c - 调整容器视图内的视图大小

> ID：14612229
> 
> 赞同：0
> 
> 时间：2013-01-30T19:37:16.953
> 
> 标签：objective-c, xcode, ios6, container-view

我在 Xcode 4.6 中使用 Storyboards，我刚刚发现了容器视图。我的容器视图正在显示 UITableView。

UITableView 及其单元格占据了屏幕的整个宽度，但容器视图略小，因为我希望容器视图显示 UITableView 的“迷你”版本。

不幸的是，容器视图不会自动调整其中的任何视图的大小，并且表格的单元格是全尺寸的。

如何缩小 UITableView 以适应容器视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:02:41.263

当您说“容器视图”时，这是一个 ContainerView 控制器吗？如果是这样，为什么不调整容器视图的大小？通常，内容必须至少等于或小于容器的框架。

# performance - EF5 实体构造函数

> ID：14612231
> 
> 赞同：0
> 
> 时间：2013-01-30T19:37:18.700
> 
> 标签：performance, entity-framework

在以下任何代码实现中是否有性能提升，或者真的不重要？

```
public class Content
{
    public Content()
    {
        Topics = new List<Topic>();
    }

    public int ContentId { get; set; }

    //Navigation Properties
    public ICollection<Topic> Topics { get; set; }
} 
```

和

```
public class Content
{
    public Content()
    {
        Topics = new HashSet<Topic>();
    }

    public int ContentId { get; set; }

    //Navigation Properties
    public ICollection<Topic> Topics { get; set; }
} 
```

MSDN 上的示例将它们混合在一起只是想知道是否有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:45:25.590

我会说这应该没关系。我不知道您希望在这些集合中存储多少项目，但 EF 正在连接到一个数据库，该数据库可能至少比我们正在谈论的内存中的操作贵几个数量级。不要试图过早地优化，只需编写代码，使其干净且易于理解和维护。然后 - 如果您发现性能问题 - 采取措施找出原因，我 99.9% 确定它不会出现在这条线上。

# security - 保护 applescript 脚本

> ID：14612235
> 
> 赞同：1
> 
> 时间：2013-01-30T19:37:27.860
> 
> 标签：security, applescript

我想使用 Applescript 连接到我的远程网站。但是，我不喜欢在脚本中以纯文本形式包含密码/用户名的想法。无论如何在我的计算机上的本地脚本中编码密码？

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:45:27.143

好吧，你不是第一个问这个问题的人，但你必须问自己一些问题。就像谁将使用它以及我需要保护它。

第 1 步：为确保您的代码受到保护，您应该保存两种不同的 AppleScript。第一个是给你的，而且只有你。此版本已编译，但可以再次使用脚本编辑器打开，以便您查看源代码。第二个是只运行脚本，它与第一个版本非常相似，但您无法在脚本编辑器中再次将其作为文档打开以查看其源代码。

第 2 步：您不想要的第二件事是关于用户凭据的静态文本，因为即使已编译，您也可以看到静态文本。通常您不会看到它们，但当用户凭证是邮件地址时，很容易找到。但是在我们解决这个问题之前，你认为有人足够聪明，可以从编译的 AppleScript 代码中找到用户凭据吗？如果是这样，那么最简单的编码方法是向 Unicode 值添加某个值：

```
property eusn : "¨®¦ÅÞÞÍÉ»ÅÞÞÍÉ"
property epwd : "ÔÅ××ÛÓÖÈ"

set usn to simpleDecryption(eusn)
set pwd to simpleDecryption(epwd)

on simpleEncryption(_str)
    set x to id of _str
    repeat with c in x
        set contents of c to c + 100
    end repeat
    return string id x
end simpleEncryption

on simpleDecryption(_str)
    set x to id of _str
    repeat with c in x
        set contents of c to c - 100
    end repeat
    return string id x
end simpleDecryption 
```

将静态数据存储为加密字符串，并在需要时解密它们。请记住，与局部变量不同，属性是持久的，因此在您的情况下不要将纯数据存储在属性中。

# css - 对于相同的效果，哪条 CSS3 规则会是更好的选择？

> ID：14612241
> 
> 赞同：0
> 
> 时间：2013-01-30T19:37:33.287
> 
> 标签：css

我有一个 CSS3 规则，我想隐藏给定元素内的所有内容，**除了**任何标题，直到用户将鼠标悬停在它上面。**哪种方式会是更好的选择？**请记住，在这种情况下，我并不担心与 CSS2.1 的向后兼容性

## 理念一

* * *

```
SECTION FIGURE.collapsed:not(:hover) *:not(H1):not(H2):not(H3):not(H4):not(H5):not(H6){
    display:none;
} 
```

**Pro：**在一个选择器中完成所有操作

**缺点：**看起来不稳定，我觉得有点模棱两可

## 想法 2

* * *

```
SECTION FIGURE.collapsed *{
    display:none;
}
SECTION FIGURE.collapsed:hover *{
    display:initial;
}

SECTION FIGURE.collapsed H1,
SECTION FIGURE.collapsed H2,
SECTION FIGURE.collapsed H3,
SECTION FIGURE.collapsed H4,
SECTION FIGURE.collapsed H5,
SECTION FIGURE.collapsed H6{
    display:block;
} 
```

**优点：**经典的 CSS，更容易理解

**缺点：**覆盖以前设置的样式；似乎不是`display:initial;`有效的 CSS，尽管它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:42:34.107

最好的方法是将非标题内容封装在某种形式的容器中。根据您的情况，可能是 div 或 HTML5 语义容器。将一个类应用于这些内容容器，然后使用一个简短的单一查询来隐藏此内容。由于隐藏容器会自动隐藏其内容，因此您有一个简短、简单且最重要的是易于理解的解决方案，只需很少的额外标记。

* * *

我最初应该提到，这样做确实偏离了您最初严格使用 CSS 的愿望。在这里，您使用 JavaScript 来处理事件，并使用 CSS 来管理信息的显示和隐藏。我发现这比让标题的 CSS 决定内容的样式更清晰，但这只是我。

无论如何，一个非常简单的实现如下。如果你实现了这个，你会想要重构以使其更健壮（使用第二个孩子不是很耐重构），但你明白了。

```
<div id="wrapper">
    <h1>Content</h1>
    <div style="display: none">
        This is some hidden content
    </div>
</div>

document.getElementById("wrapper").onmouseenter = function () {
    this.children[1].style.display = "block";
};

document.getElementById("wrapper").onmouseleave = function () {
    this.children[1].style.display = "none";
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:00:25.307

我认为结合你所拥有的将是最好的。您可以`display: initial`通过执行`:not(:hover)`但重置所有标题元素来消除 （通常`display: block`无论如何都会如此。

**更新**：需要通过添加`:not(:hover)`到所有来获得选择器的特异性。[见小提琴。](http://jsfiddle.net/3HxXV/1/)（注意：h2.1 标签仍然隐藏，因为它*位于*`div`[这是 BoltClock 在他的讨论中指出的]）。

```
SECTION FIGURE.collapsed:not(:hover) * {
    display:none;
} 

SECTION FIGURE.collapsed:not(:hover) H1,
SECTION FIGURE.collapsed:not(:hover) H2,
SECTION FIGURE.collapsed:not(:hover) H3,
SECTION FIGURE.collapsed:not(:hover) H4,
SECTION FIGURE.collapsed:not(:hover) H5,
SECTION FIGURE.collapsed:not(:hover) H6{
    display:block;
} 
```

# ruby - Ruby - 如何从数组列表的每个数组中选择 1 个值来查找结果组合

> ID：14612243
> 
> 赞同：2
> 
> 时间：2013-01-30T19:37:33.350
> 
> 标签：ruby

假设我在一个数组中包含以下 ruby​​ 数组，但我不知道会有多少个数组或它们的长度。下面的一个例子：

```
[["cat", "dog"],[1, 3, 5, 7],["morning", "afternoon", "evening"]] 
```

我想要做的是从每个数组中选择 1 个值并将其作为这些组合的数组返回结果的所有组合。因此，在以下示例中，应该有 2*4*3 或 24 个可能的唯一结果。

结果会是这样的：

```
result = [["cat", 1, "morning"], ["cat", 1, "afternoon"], ["dog", 5, "evening"] ...] 
```

对于 N 个数组的列表，我将如何在 ruby​​ 中执行此操作？我试着弄乱产品、地图和注入，但我无法让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:41:14.567

**编辑**由于您明确表示您不仅要处理三个数组`a1`，`a2`而且`a3`还要处理一个数组数组，因此将我的解决方案更改为使用`product`.

~~像这样？~~

 ~~```
 a1.map{|x1| a2.map{|x2| a3.map{|x3| [x1, x2, x3] }}}.flatten(2) 
```~~ 

或与`flat_map`：

```
 a1.flat_map{|x1| a2.flat_map{|x2| a3.map{|x3| [x1, x2, x3] }}} 
```

 ~~哇，或者只是：

```
 a1.product(a2,a3) 
```

如果您有多个数组（不仅仅是第一个示例中的固定数量 3），那么：

```
 input = [["cat", "dog"],[1, 3, 5, 7],["morning", "afternoon", "evening"]]
 h,*rest = input
 result = h.product(*rest) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T19:49:24.820

[数组#产品](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-product)：

```
xs[0].product(*xs.drop(1)) 
```

请注意，您更愿意编写`Array.product(*xs)`，但 Ruby 在核心中没有这样的类方法（很容易编写，当然，但它可能应该存在）。~~

# php - 分段路由到工厂而不是控制器

> ID：14612244
> 
> 赞同：2
> 
> 时间：2013-01-30T19:37:34.030
> 
> 标签：php, zend-framework2

我目前正在设置 ZF2 应用程序并被路由器卡住了。我查看了 Zend 的分段路由示例：

```
$route = Segment::factory(array(
    'route' => '/:controller[/:action]',
    'constraints' => array(
        'controller' => '[a-zA-Z][a-zA-Z0-9_-]+',
        'action'     => '[a-zA-Z][a-zA-Z0-9_-]+',
    ),
    'defaults' => array(
        'controller' => 'Application\Controller\IndexController',
        'action'     => 'index',
    ),
)); 
```

通过调用[http://example.com/Maps/edit](http://example.com/Maps/edit) Zend 会自动“导航”到 MapController 并调用 EditAction()。由于我将 Factory 用于 MapController，因此我正在寻找类似的解决方案

```
$route = Segment::factory(array(
    'route' => '/:factory[/:action]',
    'constraints' => array(
        'factory' => '[a-zA-Z][a-zA-Z0-9_-]+',
        'action'     => '[a-zA-Z][a-zA-Z0-9_-]+',
    ),
    'defaults' => array(
        'factory' => 'Application\Controller\Factory\DefaultControllerFactory',
        'action'     => 'index',
    ),
)); 
```

基本上我希望框架访问工厂而不是控制器而不手动列出任何单个工厂。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:04:29.460

控制器管理器是 ServiceManager，所有服务管理器功能都适用。注册控制器工厂而不是将其声明为可调用

# javascript - 延迟定时间隔函数？

> ID：14612247
> 
> 赞同：0
> 
> 时间：2013-01-30T19:37:38.467
> 
> 标签：javascript, jquery

我有一个这样的功能设置：

```
setInterval(function () { get_fb(); }, 10000); 
```

每当用户执行某些操作（例如将鼠标悬停在元素上或单击元素）时，我想将计时器重置为 10 秒

我将如何告诉程序做这样的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T19:39:13.833

您是否将计时器分配给一个变量，您可以清除它并像这样重新启动它：

```
var timer = setInterval(get_fb, 10000);

$('#foo').click(function() {
    clearInterval(timer); // stop timer

    // do something...

    timer = setInterval(get_fb, 10000); // restart timer
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T19:39:30.430

```
 var timeout = setInterval(function () { get_fb(); }, 10000);

 //to reset interval, first clear it
 clearInterval(timeout);
 //then re-create
 timeout = setInterval(function () { get_fb(); }, 10000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T19:40:27.653

在事件回调中，清除间隔，然后重新设置间隔：

```
interval = setInterval(...);
...elsewhere...
$(..selector..).click(function () {
    clearInterval(interval);
    interval = setInterval(...);
}); 
```

确保`interval`在点击回调的范围内可以访问。

# c# - 调用 SetBackBuffer 时出现 D3DImage OutOfMemoryException

> ID：14612259
> 
> 赞同：3
> 
> 时间：2013-01-30T19:39:04.953
> 
> 标签：c#, wpf, directx, direct3d

我正在使用 D3DImage 来显示使用 Direct3D 渲染的图像。Direct3D 渲染需要在其自己的线程中进行，而 GUI 线程在需要时获取表面并使用 D3DImage 将其放在屏幕上。

起初，我尝试使用单个 D3D 渲染目标来执行此操作，但是即使有锁定，我也有严重的撕裂，即渲染线程正在覆盖表面，因为 WPF 正在将其复制到其前端缓冲区中。似乎 WPF 何时复制数据是非常不可预测的（即，它不在 D3DImage.Unlock() 上，甚至不在下一个 D3DImage.Lock() 上，如文档所示）。

所以现在我要做的是我有两个渲染目标，每次 WPF 显示一个帧时，它都会要求渲染线程交换它的目标。所以我总是渲染到目标 WPF 没有使用。

这意味着在窗口的每次图形更新中，我都会执行类似的操作

```
m_d3dImage.Lock();
m_d3dImage.SetBackBuffer(D3DResourceType.IDirect3DSurface9, m_d3dRenderer.OutputSurface);
m_d3dImage.Unlock();
m_d3dRenderer.SwapSurfaces(); 
```

其中 OutputSurface 是一个 IntPtr ，它指向我们当前未渲染到的 D3D 渲染目标，而 SwapSurfaces 只是交换两个表面指针并调用 IDirect3DDevice9::SetRenderTarget 与我们接下来将用于渲染的指针。

编辑：根据要求，这是 SwapSurfaces() 的代码：

```
var temp = m_renderingSurface;
m_renderingSurface = m_outputSurface;
m_outputSurface = temp;
m_d3dDevice.SetRenderTarget(0, m_renderingSurface); 
```

其中`m_renderingSurface`和`m_outputSurface`是两个渲染目标（`SharpDX.Direct3D9.Surface`），并且`m_d3dDevice`是`DeviceEx`对象。

这很好用，即没有撕裂，但是几秒钟后我得到了 OutOfMemoryException，并且 Direct3D 具有以下调试输出：

```
Direct3D9: (ERROR) :Invalid iBackBuffer parameter passed to GetBackBuffer
Direct3D9: (ERROR) :Error during initialization of texture. CreateTexture failed.
Direct3D9: (ERROR) :Failure trying to create a texture
Direct3D9: (ERROR) :Error during initialization of texture. CreateTexture failed.
Direct3D9: (ERROR) :Failure trying to create a texture
MIL FAILURE: Unexpected HRESULT 0x8876017c in caller: CInteropDeviceBitmap::Present D3D failure
Direct3D9: (WARN) :Alloc of size 1577660 FAILED!
Direct3D9: (ERROR) :Out of memory allocating memory for surfaces.
Direct3D9: (ERROR) :Failure trying to create offscreen plain surface 
```

我在这里找到了一个相关主题，其中建议的解决方案是调用 D3DImage.SetBackBuffer() 并传递 IntPtr.Zero，但是我在现有调用之前添加了它，但它并没有解决问题。我还尝试在 SetBackBuffer(... IntPtr.Zero) 周围调用 Lock() 和 Unlock()，但这也没有解决问题。

在这一点上，我想知道 D3DImage 中是否存在错误，或者我是否应该完全使用不同的方法。我可以用 D3D 交换链替换我的 2 个渲染目标吗，这样我就不必一直用不同的指针调用 SetBackBuffer 了吗？我是 Direct3D 的新手。

编辑：我使用 .NET Reflector 查看了 D3DImage.SetBackBuffer() 的代码，它每次都创建一个 InteropBitmap。它对 IntPtr.Zero 没有任何特别的作用。由于我每秒调用多次，因此资源可能没有时间释放。在这一点上，我正在考虑使用 2 个不同的 D3DImages 并交替它们的可见性以避免不得不一直调用它们的 SetBackBuffer()。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:54:17.183

每次您将其后缓冲指针设置为不同的东西时，似乎 D3DImage 都会创建一个新的 Direct3D 纹理。这最终被清除了，但是像我正在做的那样将其设置为每秒 30 次并没有留下足够的时间，而且无论如何都是一个很大的性能杀手。我采用的方法是创建多个 D3DImage，每个都有自己的表面，将它们全部放在彼此之上并切换它们的 Visibility 属性，这样一次只显示一个。这似乎工作得很好，并且不会泄漏任何内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T20:19:52.963

我使用 D3DImage 以快速帧速率显示图像并遇到了同样的问题。我发现如果将后缓冲区指针设置为不同的指针，D3DImage 确实会创建一个新纹理。但是，如果您只更改后缓冲区指针的内容（而不是指针的地址），则不会创建新纹理。

# iphone - 从 NSDictionary 中提取 CGFloat 的语法

> ID：14612265
> 
> 赞同：2
> 
> 时间：2013-01-30T19:39:20.027
> 
> 标签：iphone, ios, cocoa-touch, nsdictionary

只是想知道从以下内容中提取 a 的语法是`CGFloat`什么`NSDictionary`：

```
slider.minimumValue = [filterAttributes valueForKey:kCIAttributeSliderMin]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T19:42:48.687

An`NSDictionary`只持有对象。什么样的对象会包装一个像这样的原语`CGFloat`？`NSNumber`会有意义。现在，由于`CGFloat`是 a`float`或 a `double`，您可能希望获得`double`保留精度/范围的值。

所以：

```
slider.minimumValue = [[filterAttributes valueForKey:kCIAttributeSliderMin] doubleValue]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T19:46:17.753

您只能将 OBJECTS 放入 NSDictionary（或 NSARRAY）中。CGFloat 是一个文字（只是映射到一个浮点数），所以你不能把它放入字典或从字典中检索它。

相反，将其包装为 NSNumber（当您将其添加到字典中时），它是一个对象。

```
NSNumber *sliderMin = [NSNumber numberWithFloat:kCIAttributeSliderMin] 
```

或者使用新的语法，你可以说`@kCIAttributeSliderMin`或`@(kCIAttributeSliderMin)`自动装箱为 NSNumber。

要取回该值，您将检索对象，`NSNumber`然后说，`[myNumber floatVal]`以获取`NSFloat`.

最后，你可能想说“ `objectForKey`”不是“ `valueForKey`”。

*更新*-抱歉，在您的示例中，您将`kCIAttributeSliderMin`其视为键，而我将其用作“值”；但我想你明白了。存储一个 NSNumber 对象；检索一个 NSNumber 对象。对于可能造成的任何混乱交换，我们深表歉意。

# java - Spring Roo jspx 噩梦... ItemLabel 不够用

> ID：14612270
> 
> 赞同：1
> 
> 时间：2013-01-30T19:39:38.373
> 
> 标签：java, jquery, spring-roo, jspx

我的排行`create.jspx`如下：

```
<field:select field="groupsowdrefs" 
              id="c_com_usergroups_manager_domain_Users_groupsowdrefs" 
              itemValue="id" items="${groupsviews}" multiple="true" 
              path="/groupsviews" z="yuLSgZ+z3Zrwet6KAYzGT+xFndc="/> 
```

`@ManyToMany`此字段显示一个框，其中包含由2 个实体之间的关系填充的行。

现在的问题是第一个实体只有一个`String`属性填充这个框，但它本身`@ManytoOne`与另一个实体有关系。这个值很重要，不会显示在方框行中！

发生这种情况是因为`field:select`仅显示属性而不显示相关实体的字段。

我试图放置一个`ItemLabel`标签，它可以工作，但框行一次只显示一个字段。

也许一个简单`div`的显示我在单击框的行时需要的信息，或者一个连接`ItemLabel`，一个 jquery 技巧..或任何东西..会解决这个问题，但 jspx 对我来说很难理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:12:38.543

一个可能的解决方案是将一个 getter 添加到您想要的类中，作为只读属性：

```
public getSelectDescription() {
    // concatenate desired values
} 
```

并在`itemLabel`

```
itemLabel="selectDescription" 
```

# sql-server - TFS 2012 速成版安装失败 - 由于 pre req SQL 服务器

> ID：14612272
> 
> 赞同：2
> 
> 时间：2013-01-30T19:39:44.700
> 
> 标签：sql-server, tfs, sql-server-2008-r2

我正在安装 TFS 2012 Express 版本，但在运行“准备检查”的向导中失败。它在数据层部分失败..出现错误

> TF400533：为了让此向导升级到最新版本的 SQL Server Express，您首先需要安装 Service Pack 2 或更新版本，然后重新运行此向导。建议您运行将自动安装当前服务包的 Microsoft 更新（您可能需要从 Windows 控制面板启用 Microsoft 更新）。

问题：这是在谈论什么服务包 2。如果它的 SQL 2008 R2，那么我安装了它，我得到了同样的错误。如果它的 TFS 2012 或 SQL 2012 ，则没有 SP2。

我确实单独安装了 SQL Server 2012 Express Edition，然后重新运行 TFS 2012 Express Edition 安装，它仍然在同一点失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T04:48:57.180

问题是与 TFS 打包的 SQL Express 版本无法升级您拥有的旧版本的 SQL Express。必须将其向前拉才能进行升级。因此，我们检测到您落后于它能够升级并显示该消息的最低版本。

本文讨论了几个选项。如果 Windows 更新对您有用（可选更新），那是最简单的方法。

[http://elhajj.wordpress.com/2012/09/26/on-dealing-with-tfs-error-tf400533/](http://elhajj.wordpress.com/2012/09/26/on-dealing-with-tfs-error-tf400533/)

如果您直接运行该 SP2 安装程序（下一个、下一个、下一个），它只能安装 SP2，但不能针对您机器上的 SQLExpress 实例安装（叹气）。这并不明显 - 如果上面的链接没有让你继续，请告诉我，我将包括更详细的步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:59:37.010

[SQL Server 2008 R2 SP2](http://www.microsoft.com/en-gb/download/details.aspx?id=30437)怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T04:10:23.713

TFS 2012 Express 将在 TFS 配置运行时安装 SQL Server 2012 Express，所以我的建议是，您需要卸载现有 SQL 服务器的任何实例并重新运行 TFS 配置向导，记住备份您拥有的任何数据库卸载前。

[卸载 SQL Server 2012 的现有实例](http://technet.microsoft.com/en-us/library/ms143412.aspx)

[卸载 SQL Server 2008 R2 的现有实例](http://technet.microsoft.com/en-us/library/ms143412%28v=sql.105%29.aspx)

# antlr - Checkstyle DetailAST, StringLiteral

> ID：14612275
> 
> 赞同：0
> 
> 时间：2013-01-30T19:39:44.003
> 
> 标签：antlr, checkstyle, rule

```
public void visitToken(DetailAST aAST) {} 
```

我正在尝试编写自定义检查样式规则。我对 TokenTypes.STRING_LITERAL 感兴趣。这种方法的问题是，一个字符串可能是一个连接的字符串、StringBuffer、StringBuilder，或者可能在一个方法中。

请耐心等待，因为我是 Checkstyle 编码的新手。

1.  如果将其连接起来，我如何获得完整的字符串。aAST 似乎将它们作为单独的字符串文字吐出。

2.  还有另一种方法来获取完整的字符串吗？

任何指针，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:29:56.573

这在 Checkstyle 中很难做到，因为 Checkstyle 纯粹在 AST 上工作。它不是编译器，因此它不知道运行时类型或句法含义。

因此，为了使用 Checkstyle 执行此操作，您必须手动分析 AST 并手动构建您的串联字符串。如果部分字符串是通过静态方法或使用 StringBuilder/StringBuffer 生成的，那么我会说通过 AST 分析找到完整字符串的任务几乎是不可能的。

相反，您可能想查看可能更适合您的任务的其他静态代码分析工具。[例如， FindBugs](http://findbugs.sourceforge.net/ "查找错误")对编译后的代码起作用，并且通常能够执行非常复杂的检查。但是，它比 Checkstyle 需要更多的资源来运行，并且在旧机器上，您可能无法让 FindBugs 在保存到 IDE 时自动运行。

# javascript - 背景图像更改时淡入淡出

> ID：14612281
> 
> 赞同：0
> 
> 时间：2013-01-30T19:40:13.053
> 
> 标签：javascript, jquery, html

我有一个用于使用 jquery 更改背景图像的按钮，如以下代码所示

```
$("#button").click(function() { 
  $('#div1').css("background-image", "url(images/newBG.jpg)");
}); 
```

它工作得很好！但我想在 newbg-image 中淡入淡出......是否可以向它添加一个 jquery 淡入淡出方法。任何帮助将不胜感激。谢谢特德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:42:05.700

试试这个：

```
$("#button").click(function() { 
  $('#div1').hide().css("background-image", "url(images/newBG.jpg)").fadeIn(500);
}); 
```

# backbone.js - 调试未加载到视图中的事件

> ID：14612286
> 
> 赞同：0
> 
> 时间：2013-01-30T19:40:41.813
> 
> 标签：backbone.js

我的事件没有自动加载。当我在 render() 方法的末尾添加 delegateEvents() 时，它工作了一段时间。我不想使用delegateEvents，但现在，即使使用delegateEvents，事件也不会加载。

我认为当时 DOM 是未知的，所以事件没有绑定，但我该如何检查（调试）呢？

看法：

```
class EditGroup extends BaseView
    initialize: ->
        @render()

    render: ->
        html = _.template tpl, @model.toJSON()
        @$el.html html

        for own key, options of FormConfig[@model.type]             
            options.key = key
            options.value = @model.get key
            input = new Input options
            input.on 'valuechanged', (key, value) => @model.set key, value

            @$('section.'+key).html input.$el

        @delegateEvents() # doesn't work

        @ 
```

DOM：

```
h2 Edit Group

section.title
section.type
section.members

button.save.btn.btn-primary(onclick="return false") Save changes 
```

在部分类型和成员中，有预输入和渲染的选择（主干视图）。一个工作没有 delegateEvents，另一个工作。父视图中的事件（如上所示）根本不起作用。删除 for 循环没有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:53:32.427

好的，我解决了，但我不明白工作原理。

我正在使用“视图管理器”，它注册所有视图并显示（阅读：将 html 附加到 DOM）父视图。触发新路由时会触发视图管理器的显示功能，但该路由被触发两次，一次是“route:edit”，一次是“route”。我用 router.on "all", (eventName) -> etc. 捕获它们。我认为事件绑定到 html，但是 html 被没有绑定的第二个路由器事件覆盖并附加到 DOM。问题仍然是为什么该路线被触发两次。

# c# - 如何自定义格式自定义数据 WPF 4.5？

> ID：14612290
> 
> 赞同：1
> 
> 时间：2013-01-30T19:41:01.987
> 
> 标签：c#, wpf, formatting, string-formatting

我正在开发一些软件，可以根据从某些设备收集的事件数据生成报告。数据存储在数据库中。我希望用户能够模板化软件生成的报告的输出文件名。因此，当用户决定生成报告时，他们配置的输出文件名模板将应用于从数据库检索到的数据。

例如，假设每个报告都有以下与之关联的数据模板元素：

```
<Name>
<Timestamp>
<Location>
<EventType> 
```

因此，用户可以按任意顺序选择这些模板项中的任何一个，以确定输出文件名的格式。如果他们选择了这样的东西：

```
<Name> <EventType> <Location> <Timestamp>.pdf 
```

假设这是数据库中当前报告的数据：

```
Name = "MyReport"
EventType = "Error"
Location = "Park Ave"
Timestamp = 1-30-2013 11.00.00 AM 
```

生成实际报告时，报告文件名如下所示：

```
"MyReport Error Park Ave 1-30-2013 11.00.00 AM.pdf" 
```

我正在努力想出一种优雅的方式来提供自定义格式元素，如`<Name>, <Location>`etc... 并从数据库中的数据或可能的实体对象中构建字符串。我查看了 ICustomFormatter 和 IFormatProvider，但我不确定它们是否完全适合我正在做的事情。

我正在使用 WPF 4.5，我的数据将由实体框架驱动。
任何想法，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-30T13:36:11.767

我在我的问题中看到了这一点，但没有人回答。只是为了后代，我想记录我的所作所为。我最终使用了[Regex.Replace](https://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace(v=vs.110).aspx)。我使用枚举来列出不同的格式字段，如下所示：

```
String pattern = String.Format("<{0}>", Template.Timestamp);
String result = Regex.Replace(pattern, data.Timestamp.ToString()); 
```

其中“模板”是一个枚举，“时间戳”是我想要替换的元素。它似乎可以满足我的需要。

# html - 将 DIV 包裹在“双高”图像周围或拉引号

> ID：14612292
> 
> 赞同：1
> 
> 时间：2013-01-30T19:41:15.407
> 
> 标签：html, css

我有一个流畅布局的图像图标网格。图标被几个双倍高度的图像分解。我想让图标环绕双高图像。例如，如果双高图像是该行中的第一个，则其余图标将填充该行的其余部分，然后折回并填充到双高图像旁边并完成下一行。

如果我只是将它们全部放在一个列表中，则会发生的情况是，一旦填充了该行，它就会包裹在双倍高度图像下方，有效地在双倍高度图像的右侧留下一个大的空白区域。

另一个双高图像是列表中的第七项（第一个双高图像，然后是 5 个单高图标，然后是下一个双高图像）。我希望单个高度的图像也能环绕这个图像，而不会在图像的右下角留下空白行。理想情况下，我想把这张图片贴在右边，但无法让它发挥作用。

您可以在此处查看该页面： [http ://www.kandlekidswear.com/Pages/designs.html](http://www.kandlekidswear.com/Pages/designs.html)

现在，我的解决方法是将两个单高 div 放在一个双高 div 中，因此该列表实际上是一个双高 div 列表。它工作正常，但问题是它在右下角留下了一个很大的两行空白。我欢迎另一种方法。提前致谢！

CSS

```
.singleHeight {
width: 180px;
height: 180px;
float: left;
margin: 10px;
}

.doubleHeight {
width: 200px;
height: 400px;
float: left;
margin: 5px;
} 
```

HTML

```
<div class="doubleHeight">
<img src="doubleHeightImage1.jpg">
</div>

<div class="doubleHeight">
<div class="singleHeight"><img src="icon1.gif"></div>
<div class="singleHeight"><img src="icon2.gif"></div>    
</div>

<div class="doubleHeight">
<div class="singleHeight"><img src="icon3.gif"></div>
<div class="singleHeight"><img src="icon4.gif"></div>    
</div>
...

<div class="doubleHeight">
<img src="doubleHeightImage2.jpg">
</div>

<div class="doubleHeight">
<div class="singleHeight"><img src="icon5.gif"></div>
<div class="singleHeight"><img src="icon6.gif"></div>    
</div>
... 
```

# python - Selenium 不会在浏览器关闭时删除配置文件

> ID：14612294
> 
> 赞同：5
> 
> 时间：2013-01-30T19:41:18.310
> 
> 标签：python, firefox, selenium

我正在使用 browsermob 和 selenium 运行一些相当简单的测试来打开 firefox 浏览器并浏览随机页面。每个 firefox 实例都应该是独立的，它们都不共享任何 cookie 或缓存。在我的 mac osx 机器上，这很好用。浏览器打开，浏览一堆页面，然后关闭。然而，在我的 Windows 机器上，即使在 firefox 浏览器关闭后，tmp* *****文件夹仍然存在，并且在测试进行一段时间后，它们开始占用大量空间。我的印象是，每个新生成的浏览器都会有自己的配置文件，这很明显，但它会在浏览器关闭时删除它创建的配置文件。我是否缺少明确的 selenium 命令来强制执行此行为？

此外，我注意到一些 tmp 文件夹出现在 AppData/Local/Temp/2 中，还有许多其他文件夹出现在我开始运行脚本的文件夹中......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T20:22:13.070

在您的 Mac 上，您查看过 /var/folders/ 吗？您可能会在几级下找到一堆匿名*webdriver-profile 文件夹。（我的出现在 /var/folders/sm/jngvd6s57ldb916b7h25d57r0000dn/T/ 中）

另外，您使用的是 driver.close() 还是 driver.quit()？我以为 driver.quit() 会清理临时文件夹，但我可能错了。

# rhino - Rhino readFile 期间的异常如何工作？

> ID：14612295
> 
> 赞同：1
> 
> 时间：2013-01-30T19:41:18.493
> 
> 标签：rhino

我在 Linux 下的 Rhino 中运行了这段代码。该文件不存在。

```
try {
  var u = readFile("/tmp/wtf");
  print(u);
} catch (e) {
  print("error!");
} 
```

1.  'catch' 中的代码不会运行，即使该文件肯定不存在。我只是得到一个分配给'u'的空白值。这是正常的吗？
2.  是否还有其他情况（除了缺少文件）*可以*运行捕获？
3.  我可以在不调用其他函数的情况下区分空文件和丢失文件吗？（我意识到 Rhino 让我可以访问大多数标准 Java 库）。
4.  只是想确认 readFile 始终是同步的？

我在 SO 或 MDN 上找不到任何关于 readFile 工作原理的信息。任何见解表示赞赏。

# c# - EF“适用于所有人”的有效方法

> ID：14612296
> 
> 赞同：0
> 
> 时间：2013-01-30T19:41:21.650
> 
> 标签：c#, asp.net-mvc, entity-framework

我有一个搜索页面，允许用户搜索项目并向项目添加详细信息。我正在努力允许用户将相同的详细信息应用于多个项目。用户将检查他想要应用相同更改的所有项目并单击`Comment`按钮。这将发送检查的项目列表`List<int> ids`和单击的特定项目（在它已经存在的情况下用作模板）`int id`。

从这里，用户将根据自己的意愿编辑评论并保存。行动将如何`HttpPost Edit`？如果该项目尚不存在，则需要向数据库添加评论，否则，覆盖存在的内容。以下是我想出的（基本大纲）。我看到的问题是它需要为我想要应用更改的每个项目戳数据库。必须有更好的方法来做到这一点。

```
[HttpPost]
public ActionResult Edit(CommentVM model)
{
    if (ModelState.IsValid)
    {
        foreach(int i in model.ids)
        {
            Comment comment = _db.Comments.Find(i);
            if(comment == null){
                //Create and add
            {
            else{
                comment.Text = model.Text;
                _db.Entry(comment).State = EntityState.Modified;
            }
        }

        _db.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(model);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:55:17.780

> 我看到的问题是它需要为我想要应用更改的每个项目戳数据库。

你不必担心这个。保存更改时会调用一次数据库。循环只影响内存中的对象。至于您的代码，您似乎走在正确的轨道上，但我确实有一个潜在的建议。鉴于您修改或创建评论的不同步骤，我假设您已将评论编写并存储为不同的实体，这些实体通过 id 链接到您的项目。如果是这种情况，我建议将“评论”作为项目的属性，这样您就可以简单地写入该属性并简化整个过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:34:36.480

我最终使用了一种自制方法。由于这两种情况（添加条目和编辑条目都需要单独处理，我就这样处理了它们。

```
List<int> InDB = _db.Comments           
    .Where(r => model.ids.Contains(r.id))
    .Select(r => r.id)
    .ToList();

List<int> diff = model.ids.Except(InDB).ToList();
//Loop through items to ADD
foreach (int i in diff)
{
    Comment comment = new Comment { Text = model.Text, id = i };
    _db.Comments.Add(comment);
}
//Loop through items to edit
foreach (int i in InDB)
{
    Comment comment = new Comment { Text = model.Text, id = i };
    _db.Entry(comment).State = EntityState.Modified;
} 
```

# sql - 使用随时间变化的修饰符按时间范围分组

> ID：14612299
> 
> 赞同：0
> 
> 时间：2013-01-30T19:41:31.820
> 
> 标签：sql, sql-server, sql-server-2008, tsql

在仔细研究了一个类似的问题并发现它从未提供完整的解决方案之后，我终于找到了我无法解决的问题的核心。我正在寻找一个人可以服用一定数量药物的连续天数。由于处方开始和结束，一个人服用 X 种药物可能有多个不连续的时间间隔。以下 SQL 脚本生成我将立即发布的查询的结果集：另外，我没有 SQL Server 2012。

```
create table test
(pat_id int, cal_date date, grp_nbr int, drug_qty int,[ranking] int)
go
insert into test(pat_id,cal_date, grp_nbr,drug_qty,[ranking])
values
(1, '1/8/2007',7,2, 1),
(1, '1/9/2007',7,2, 1),
(1, '1/10/2007',7,  2,1),
(1, '1/11/2007',7,  2,1),
(1, '1/12/2007',7,  2,1),
(1, '1/13/2007',7,  2,1),
(1, '1/14/2007',7,  2,1),
(1, '1/15/2007',7,  2,1),
(1, '6/1/2007',7,2, 1),
(1, '6/2/2007',7,2, 1),
(1, '6/3/2007',7,2, 1) 
```

请注意这里有两个不连续的时间间隔，此人同时服用两种药物。在省略的日子里，drug_qty 超过了两个。此示例中的最后一列是我尝试添加另一个可以分组以帮助解决问题的字段（没有用）。

查询创建表：

```
 CREATE TABLE [dbo].[rx](
            [pat_id] [int] NOT NULL,
            [fill_Date] [date] NOT NULL,
            [script_End_Date]  AS (dateadd(day,[dayssup],[filldate])),
            [drug_Name] [varchar](50) NULL,
            [days_Sup] [int] NOT NULL,
            [quantity] [float] NOT NULL,
            [drug_Class] [char](3) NOT  NULL,
            CHECK(fill_Date <=script_End_Date
PRIMARY KEY CLUSTERED 
(
            [clmid] ASC
)

CREATE TABLE [dbo].[Calendar](
             [cal_date] [date] PRIMARY KEY,
[Year] AS YEAR(cal_date) PERSISTED,
[Month] AS MONTH(cal_date) PERSISTED,
[Day] AS DAY(cal_date) PERSISTED,
             [julian_seq] AS 1+DATEDIFF(DD, CONVERT(DATE, CONVERT(varchar,YEAR(cal_date))+'0101'),cal_date),
     id int identity); 
```

我用来生成结果集的查询：

```
;WITH x 
     AS (SELECT rx.pat_id, 
                c.cal_date, 
                Count(DISTINCT rx.drug_name) AS distinctDrugs 
         FROM   rx, 
                calendar AS c 
         WHERE  c.cal_date BETWEEN rx.fill_date AND rx.script_end_date 
                AND rx.ofinterest = 1 
         GROUP  BY rx.pat_id, 
                   c.cal_date 
         --the query example I used having count(1) =2, but to illustrate the non-contiguous intervals, in practice I need the below having statement
         HAVING Count(*) > 1), 
     y 
     AS (SELECT x.pat_id, 
                x.cal_date 
                --c2.id is the row number in the calendar table. 
                , 
                c2.id - Row_number() 
                          OVER( 
                            partition BY x.pat_id 
                            ORDER BY x.cal_date) AS grp_nbr, 
                distinctdrugs 
         FROM   x, 
                calendar AS c2 
         WHERE  c2.cal_date = x.cal_date) 
SELECT *, 
       Rank() 
         OVER( 
           partition BY pat_id, grp_nbr 
           ORDER BY distinctdrugs) AS [ranking] 
FROM   y 
WHERE  y.pat_id = 1604012867 
       AND distinctdrugs = 2 
```

除了我不应该在日历表中有一个名为“id”的列之外，这种方法有什么严重的错误吗？我可以让查询向我显示 distinctDrugs=x 的不同间隔，但它只适用于该整数，而不适用于 >1。我的意思是我可以找到患者服用两种药物的单独间隔，但只有当我在有子句中使用 =2，而不是 >1 时。我不能做类似的事情

```
SELECT pat_id, 
       Min(cal_date), 
       Max(cal_date), 
       distinctdrugs 
FROM   y 
GROUP  BY pat_id, 
          grp_nbr 
```

因为这将选择第二组不连续的日期。有谁知道这个问题的优雅解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:15:05.663

关键是一个简单的观察。如果你有一个日期序列，那么它们和递增序列之间的差异是恒定的。以下是这样做的，假设您使用的是 SQL Server 2005 或更高版本：

```
select pat_id, MIN(cal_date), MAX(cal_date), MIN(drug_qty)
from (select t.*,
             cast(cal_date as datetime) - ROW_NUMBER() over (partition by pat_id, drug_qty order by cal_date) as grouping
      from #test t
     ) t
group by pat_id, grouping 
```

# c - 如何正确使用 zmq_msg_more？

> ID：14612303
> 
> 赞同：3
> 
> 时间：2013-01-30T19:41:40.437
> 
> 标签：c, zeromq

Code Connected Volume 1 - page 47 有一个关于如何接收多部分消息的示例：

```
while (1) {
    zmq_msg_t message;
    zmq_msg_init(&message);
    zmq_msg_recv(&message, socket, 0);
    // Process the message frame
    ...
    zmq_msg_close(&message);
    if (!zmq_msg_more(&message))
        break;
} 
```

这个对吗？我们不应该使用`zmq_msg_close()`after`zmq_msg_more()`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:56:21.777

[zmq_msg_more()](http://api.zeromq.org/3-2%3azmq-msg-more)和[zmq_msg_recv()](http://api.zeromq.org/3-2%3azmq-msg-recv) （ZeroMQ 3.2.2 稳定版）的 API 参考都包含显示[zmq_msg_close()在 zmq_msg_more](http://api.zeromq.org/3-2%3azmq-msg-close)**之后**调用的示例。据我所知，API 文档没有明确说明任何与此相矛盾的内容，因此 Code Connected 中的示例似乎是错误的。for 的文档`zmq_msg_close()`指出，实际的内存释放可能会被底层延迟，暗示`zmq_msg_more()`操作*可能会*成功，但在关闭消息后调用它看起来仍然是错误的。

[zmq_msg_more() API 文档 (3.2.2)](http://api.zeromq.org/3-2%3azmq-msg-more)中的示例（为便于阅读而稍作编辑）：

```
zmq_msg_t part;
while (true) 
{
    //  Create an empty ØMQ message to hold the message part
    int rc = zmq_msg_init (&part);
    assert (rc == 0);

    //  Block until a message is available to be received from socket
    rc = zmq_recvmsg (socket, &part, 0);
    assert (rc != -1);

    if (zmq_msg_more (&part))
        fprintf (stderr, "more\n");
    else 
    {
        fprintf (stderr, "end\n");
        break;
    }
    zmq_msg_close (part); 
} 
```

但是，查看有关[Multi-Part Messages的 ZeroMq 指南，该示例实际上在关闭消息](http://zguide.zeromq.org/page%3aall#Multi-part-Messages)**后**检查更多消息，但这是通过使用[zmq_getsockopt()](http://api.zeromq.org/3-2%3azmq-getsockopt)检查套接字来实现的，**而不**使用对消息的任何引用。我怀疑 Code Connected 示例只是使用了该示例并从 更改`zmq_getsockopt()`为`zmq_msg_more()`（可能不正确）。

ZeroMq 指南中的示例[（多部分消息）](http://zguide.zeromq.org/page%3aall#Multi-part-Messages)：

```
while (1) 
{
    zmq_msg_t message;
    zmq_msg_init (&message);
    zmq_msg_recv (&message, socket, 0);
    //  Process the message frame
    zmq_msg_close (&message);
    int more;
    size_t more_size = sizeof (more);
    zmq_getsockopt (socket, ZMQ_RCVMORE, &more, &more_size);
    if (!more)
        break;      //  Last message frame
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-27T23:34:05.817

也许这个答案会对某人有所帮助。

来自“libzmq/doc/zmq_msg_more.txt”

*zmq_msg_more *()*函数指示这是否是多部分消息的一部分，并且还有更多部分要接收。***在zmq_msg_close()*****之后可以安全地调用***此方法。此方法与带有 ZMQ_MORE 参数的*zmq_msg_get()*相同 。**

# c# - 是否可以在 C# 中创建 DataRelation 1:1？

> ID：14612310
> 
> 赞同：1
> 
> 时间：2013-01-30T19:42:00.490
> 
> 标签：c#, database, foreign-keys, datarelation

在我的应用程序中，我使用仅支持 1:1 关系的 ORM Designer。我有 Items、Products、Shipping 表：Item 有 ProductId 和 ShippingId 属性，它们是外键。

我需要将 xml 文件中的数据上传到我的 SQL DB 中，所以我将使用 SqlBulkCopy 类，并且我需要创建 DataTable 对象：itemsTable、productsTable、shippingTable 将数据从 xml 加载到其中。

那么，我是否需要创建 DataRelations：ItemsProducts 和 ItemsShipping？如果是这样，itemsTable 将包含 productsTable 和 shippingTable？

谢谢！

**编辑：**

是否可以同时将 3 个数据表中的内容写入服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:09:24.163

`.dbml`这不是您问题的直接答案，但完全有可能在文件中建立一对多关系。请参阅下面的屏幕截图，它只是您可以通过右键单击关联并选择“属性”来访问的属性侧边栏。

![在此处输入图像描述](../Images/ca3147db373e21de1a619fae4c39e12b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:50:05.427

如果您使用`SqlBulkCopy`，则必须一次使用一个表/实体。如果实体已经具有外键值，它将起作用。顺便说一句，我创建了一个包装器对象，`SqlBulkCopy`它可以为对象集合进行批量插入。

它可能会对您有所帮助，您可以在这里找到它：

[http://www.codeproject.com/Articles/354094/Bulk-Insert-in-NET-applications-Part-1](http://www.codeproject.com/Articles/354094/Bulk-Insert-in-NET-applications-Part-1)

# c - 变量名如何存储在 C 中的内存中？

> ID：14612314
> 
> 赞同：61
> 
> 时间：2013-01-30T19:42:16.963
> 
> 标签：c, variables, memory, symbol-table

在 C 中，假设您有一个名为`variable_name`. 假设它位于`0xaaaaaaaa`，并且在该内存地址处，您有整数 123。换句话说，`variable_name`包含 123。

我正在寻找有关“`variable_name`位于`0xaaaaaaaa`”的措辞的说明。编译器如何识别字符串“variable_name”与该特定内存地址相关联？字符串“variable_name”是否存储在内存中的某个位置？编译器是否只是在看到它时替换`variable_name`它`0xaaaaaaaa`，如果是这样，它是否不必使用内存来进行替换？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-01-30T19:44:51.430

编译器运行后变量名不再存在（除非在共享库中导出全局变量或调试符号等特殊情况）。整个编译过程旨在获取源代码所代表的那些符号名称和算法，并将它们转换为本地机器指令。所以是的，如果你有一个全局的`variable_name`，并且编译器和链接器决定将它放在`0xaaaaaaaa`，那么无论它在代码中使用什么，它都将通过该地址访问。

因此，要回答您的字面问题：

> 编译器如何识别字符串“variable_name”与该特定内存地址相关联？

工具链（编译器和链接器）共同为变量分配内存位置。跟踪所有引用是编译器的工作，链接器稍后会放入正确的地址。

> 字符串是否`"variable_name"`存储在内存中的某个位置？

仅在*编译器*运行时。

> 编译器是否只是在看到它时替换`variable_name`它`0xaaaaaaaa`，如果是这样，它是否不必使用内存来进行替换？

是的，这几乎就是发生的事情，除了链接器是一个两阶段的工作。是的，它使用内存，但它是*编译器的*内存，而不是程序运行时的任何东西。

一个例子可以帮助你理解。让我们试试这个程序：

```
int x = 12;

int main(void)
{
    return x;
} 
```

很简单，对吧？好的。让我们拿这个程序，编译它，看看反汇编：

```
$ cc -Wall -Werror -Wextra -O3    example.c   -o example
$ otool -tV example
example:
(__TEXT,__text) section
_main:
0000000100000f60    pushq   %rbp
0000000100000f61    movq    %rsp,%rbp
0000000100000f64    movl    0x00000096(%rip),%eax
0000000100000f6a    popq    %rbp
0000000100000f6b    ret 
```

看到那条`movl`线了吗？它正在获取全局变量（在这种情况下，以指令指针相对的方式）。不再赘述`x`。

现在让我们让它更复杂一点，并添加一个局部变量：

```
int x = 12;

int main(void)
{  
    volatile int y = 4;
    return x + y;
} 
```

这个程序的反汇编是：

```
(__TEXT,__text) section
_main:
0000000100000f60    pushq   %rbp
0000000100000f61    movq    %rsp,%rbp
0000000100000f64    movl    $0x00000004,0xfc(%rbp)
0000000100000f6b    movl    0x0000008f(%rip),%eax
0000000100000f71    addl    0xfc(%rbp),%eax
0000000100000f74    popq    %rbp
0000000100000f75    ret 
```

现在有两条`movl`指令和一条`addl`指令。您可以看到第一个`movl`正在初始化`y`，它决定将在堆栈上（基指针 - 4）。然后下一个`movl`将全局`x`放入寄存器`eax`中，然后`addl`添加`y`到该值。但正如您所见，文字`x`和`y`字符串不再存在。它们对程序员来说是一种便利*，*但计算机在执行时肯定不会关心它们。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-30T19:47:37.867

AC 编译器首先创建一个符号表，其中存储了变量名和它在内存中的位置之间的关系。正如其他人所说，编译时，它使用此表将变量的所有实例替换为特定的内存位置。您可以在 Wikipedia 页面上找到更多信息。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-30T19:45:31.903

所有变量都由编译器替换。首先它们被引用替换，然后链接器放置地址而不是引用。

换句话说。编译器运行后，变量名不再可用

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-30T19:46:46.153

这就是所谓的*实现细节*。虽然您所描述的是我曾经使用过的所有编译器的情况，但并不一定是这种情况。AC 编译器可以将每个变量放在哈希表中并在运行时（或类似的东西）查找它们，事实上早期的 JavaScript 解释器正是这样做的（现在，他们进行即时编译，结果更加原始。）

特别是对于 VC++、GCC 和 LLVM 等常见编译器：编译器通常会将变量分配给内存中的某个位置。全局或静态作用域的变量得到一个在程序运行时不会改变的固定地址，而函数内的变量得到一个*堆栈*地址——即相对于当前堆栈指针的地址，每次函数执行时堆栈指针都会改变叫。（这是过于简单化了。）一旦函数返回，堆栈地址就会变得无效，但具有有效使用零开销的好处。

一旦为变量分配了地址，就不再需要变量的名称，因此将其丢弃。根据名称的种类，名称可能在预处理时（对于宏名称）、编译时（对于静态和局部变量/函数）和链接时（对于全局变量/函数）被丢弃。如果导出符号 (使其对其他程序可见，以便他们可以访问它），该名称通常会保留在“符号表”中的某个位置，这*确实*占用了微不足道的内存和磁盘空间。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-30T19:45:35.810

> 编译器是否只是在看到它时将 variable_name 替换为 0xaaaaaaaa

是的。

> 如果是这样，它是否必须使用内存来进行替换？

是的。但它是编译器，它编译了你的代码之后，你为什么要关心内存呢？

# java - 接口自动实现的时候参数从哪里来？

> ID：14612316
> 
> 赞同：2
> 
> 时间：2013-01-30T19:42:26.840
> 
> 标签：java, interface, polymorphism

使用 Eclipse，我决定实现一个`interface`. Eclipse 自动生成方法签名。

接口中的一些方法将参数传递给方法。这些参数从何而来？它们不在我正在实现的界面中，对吗？

比如在实现`ActionListener`接口的时候，我们就强制实现这个方法：

```
@Override
public void actionPerformed(ActionEvent arg0){
...
} 
```

`ActionEvent`物体从哪里来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:44:11.950

> 现在，这些参数从何而来？它们肯定不在我正在实现的接口中，对吧？

其实，错了。它们*是*您正在实现的接口的一部分。

让我们`ActionListener`举个例子。从[文档](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ActionListener.html#actionPerformed%28java.awt.event.ActionEvent%29)中：

```
void actionPerformed(ActionEvent e)
                     ^^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T19:47:49.793

Java 中的接口定义可以被认为更像是合同或承诺，而不是其他任何东西。通过声称实现一个接口，一个类承诺它将实现其中定义的方法。例如，实现`ActionListener`承诺的类为方法提供实现，该方法`actionPerformed`不返回任何内容，并且需要将`ActionEvent`对象传递给方法。

只有当方法被其他类调用时，`ActionEvent`对象才需要存在并传入。在接口定义和类的实现中，它只是假设`ActionEvent`将传入一个。仅此而已。它与任何其他接受参数的方法完全相同——调用者必须提供有问题的数据，并且该方法只是使用它。

至于为什么`actionPerformed`需要一个`ActionEvent`，可以在两个不同的层面上回答：

1.  因为接口定义`ActionListener`通过要求确切的方法签名来强制它。（这是“如果我不这样做，为什么它不会编译”的答案。）
2.  因为创建接口的 Java API 设计者决定接口应该是这样工作的。（这是有道理的，因为`ActionListener`应该监听“动作事件”，所以很自然地应该传入一个带有动作事件信息的对象。实现类有责任对提供的信息采取行动。这是“他们为什么以这种特殊的方式做到这一点”的答案。）

这一切的意义何在？答案是[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)：在 的情况下`ActionListener`，可以使用 Swing 组件注册具有不同实现的整个组`ActionListeners`，并且所有这些都可以以相同的方式调用，因为它们都保证有一个方法`void actionPerformed(ActionEvent e)`。这意味着 Swing 组件可以只关心每个侦听器的接口（预期的行为是什么），而不是实现（该行为如何实际工作和/或如何调用它）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T19:44:21.337

这里的 ActionEvent 是*需要*提供给 actionPerformed 的，它[在 API 中这样说](http://docs.oracle.com/javase/6/docs/api/java/awt/event/ActionListener.html)

许多编程都使用预先存在的工具。即，如果我想制作井字游戏，您可以在其中单击 - 我必须使用 ActionEvent 或 java.MATH

# ios - 将 UIButton 添加到 UIDatePicker

> ID：14612321
> 
> 赞同：3
> 
> 时间：2013-01-30T19:42:36.243
> 
> 标签：ios, uitextfield, uitoolbar, uidatepicker

我有一个 UITextField，我将 inputView 设置为 UIDatePicker，这样当按下 UITextField 而不是键盘时，会弹出一个 UIDatePicker。我还想添加一个带有“下一步”按钮的工具栏，以便用户可以轻松跳转到下一个字段，但我不确定如何执行此操作，因为我已经在更改 UITextField 上的视图以获取UIDatePicker。这是加载视图时使用的代码：

```
- (void)viewDidLoad
{
self.datePicker = [[UIDatePicker alloc] init];
self.datePicker.datePickerMode = UIDatePickerModeDate;
[self.datePicker addTarget:self action:@selector(datePickerValueChanged) forControlEvents:UIControlEventValueChanged];
issue.inputView = self.datePicker;
} 
```

将“下一步”按钮添加到工具栏顶部的建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:45:14.940

创建一个视图以用作文本字段的 inputAccessoryView。此视图应包含您的按钮（例如 Next、Cancel、Previous）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T19:56:54.473

这是代码：

```
if (keyboardToolbar == nil) {
keyboardToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, 44)];
[keyboardToolbar setBarStyle:UIBarStyleBlackTranslucent];

UIBarButtonItem *extraSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

UIBarButtonItem *next = [[UIBarButtonItem alloc] initWithTitle:@"Next" style:UIBarButtonItemStyleDone target:self action:@selector(switchToNextField:)];

[keyboardToolbar setItems:[[NSArray alloc] initWithObjects: extraSpace, next, nil]];
}

issue.inputAccessoryView = keyboardToolbar;

datePicker = [[UIDatePicker alloc] init];
datePicker.datePickerMode = UIDatePickerModeDate;
[datePicker addTarget:self action:@selector(datePickerValueChanged:) forControlEvents:UIControlEventValueChanged];

issue.inputView = datePicker; 
```

在您的 switchToNextField 方法中，只需使用 [nextTextField becomeFirstResponder] 将 nextField 设为 firstResponder；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:57:01.533

您可以创建一个视图，然后将任何 UI 元素放入其中。

```
@property (nonatomic,strong) UIPopoverController *popoverControllerBirthday; 
```

将上面添加到您的 .h 文件并在 .m 处同步`@synthesize popoverControllerBirthday;`

也改变你`@synthesize datePicker;`的`@synthesize datePicker=_datePicker;`

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField{

    if (textField==self.yourtextfield) {
        UIViewController* popoverContent = [[UIViewController alloc] init]; //ViewController

        UIView *popoverView = [[UIView alloc] init];   //view
        popoverView.backgroundColor = [UIColor blackColor];

        _datePicker=[[UIDatePicker alloc]init];//Date picker
        _datePicker.frame=CGRectMake(0,0,320, 216);
        _datePicker.datePickerMode = UIDatePickerModeDate;
        [_datePicker setMinuteInterval:5];
        [_datePicker setTag:10];
        [popoverView addSubview:_datePicker];

        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [button addTarget:self
                   action:@selector(result)
         forControlEvents:UIControlEventTouchUpInside];
        [button setTitle:@"Next" forState:UIControlStateNormal];
        button.frame = CGRectMake(0, 220, 320, 45);
        UIColor *titleColor = [UIColor whiteColor];
        [button setTitleColor:titleColor forState:UIControlStateNormal];
       // UIImage *doneButtonImage = [UIImage imageNamed:@"create event button.png"]; choose a button background if you ahve one
        [button setBackgroundImage:doneButtonImage forState:UIControlStateNormal];
        [popoverView addSubview:button];

        popoverContent.view = popoverView;
        popoverControllerBirthday = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
        popoverControllerBirthday.delegate=self;

        CGRect myFrame =textField.frame;
        myFrame.origin.x = 200;// your coordinates change it as you wish
        myFrame.origin.y = 195;

        [popoverControllerBirthday setPopoverContentSize:CGSizeMake(320, 265) animated:NO];
        [popoverControllerBirthday presentPopoverFromRect:myFrame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

        return NO; // tells the textfield not to start its own editing process (ie show the keyboard)
    }
    else{
         return YES;
    }

}
//handle your result call next uitextfield in your case
-(void) result 
{
    //in result method you can get date using datepicker.date
    if (self.popoverControllerBirthday)
         {
             [self.popoverControllerBirthday dismissPopoverAnimated:NO];
              self.popoverControllerBirthday = nil;
    }

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setTimeStyle:NSDateFormatterNoStyle];
    [dateFormatter  setDateFormat:@"M d yyyy"];
    NSString *parseDatePickerDAte =[dateFormatter stringFromDate:_datePicker.date]; // your string that is choosen at datepicker
   // self.textfield.text = parseDatePickerDAte ; set this to your textfield if you want

   //google this dont remember exact code for that, just changing your textfield to desired one
   [self.nexttextfield becomesFirstResponder];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-17T12:15:58.587

您可以使用[SMDatePicker](https://github.com/anatoliyv/SMDatePicker)代替 UIDatePicker。它将使用 UIToolbar 和 UIDatePicker 创建一个自定义视图。您可以使用必要的按钮轻松自定义工具栏。看一下示例项目。

# javascript - 为什么 JSDoc 在处理有效文件时会抛出 TypeError

> ID：14612323
> 
> 赞同：0
> 
> 时间：2013-01-30T19:42:39.890
> 
> 标签：javascript, jsdoc

我有一个带有一些 JSDoc 标记的 dojo 类。JavaScript 运行良好，没有错误，因此它肯定是一个有效文件。

课程在这里：http: [//jsfiddle.net/8JpCR/](http://jsfiddle.net/8JpCR/)

当我尝试在其上运行 JSDoc 以生成文档时，我得到：

```
org.mozilla.javascript.EcmaError: TypeError: Cannot read property "length" from undefined
    at org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3785)
    at org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3763)
    at org.mozilla.javascript.ScriptRuntime.typeError(ScriptRuntime.java:3791)
    at org.mozilla.javascript.ScriptRuntime.typeError2(ScriptRuntime.java:3810)
    at org.mozilla.javascript.ScriptRuntime.undefReadError(ScriptRuntime.java:3823)
    at org.mozilla.javascript.ScriptRuntime.getObjectProp(ScriptRuntime.java:1508)
    at org.mozilla.javascript.gen.file__projects_jsdoc_lib_jsdoc_path_js_30._c_anonymous_2(Unknown Source)
    at org.mozilla.javascript.gen.file__projects_jsdoc_lib_jsdoc_path_js_30.call(Unknown Source)
    at org.mozilla.javascript.optimizer.OptRuntime.call1(OptRuntime.java:66)
    at org.mozilla.javascript.gen.file__projects_jsdoc_templates_default_publish_js_43._c_anonymous_26(Unknown Source)
    at org.mozilla.javascript.gen.file__projects_jsdoc_templates_default_publish_js_43.call(Unknown Source)
    at org.mozilla.javascript.optimizer.OptRuntime.callN(OptRuntime.java:86)
    at org.mozilla.javascript.gen._projects_jsdoc_jsdoc_js_1._c_main_3(Unknown Source)
    at org.mozilla.javascript.gen._projects_jsdoc_jsdoc_js_1.call(Unknown Source)
    at org.mozilla.javascript.optimizer.OptRuntime.callName0(OptRuntime.java:108)
    at org.mozilla.javascript.gen._projects_jsdoc_jsdoc_js_1._c_script_0(Unknown Source)
    at org.mozilla.javascript.gen._projects_jsdoc_jsdoc_js_1.call(Unknown Source)
    at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:426)
    at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3178)
    at org.mozilla.javascript.gen._projects_jsdoc_jsdoc_js_1.call(Unknown Source)
    at org.mozilla.javascript.gen._projects_jsdoc_jsdoc_js_1.exec(Unknown Source)
    at org.mozilla.javascript.tools.shell.Main.evaluateScript(Main.java:654)
    at org.mozilla.javascript.tools.shell.Main.processFileSecure(Main.java:552)
    at org.mozilla.javascript.tools.shell.Main.processFile(Main.java:507)
    at org.mozilla.javascript.tools.shell.Main.processSource(Main.java:499)
    at org.mozilla.javascript.tools.shell.Main.processFiles(Main.java:215)
    at org.mozilla.javascript.tools.shell.Main$IProxy.run(Main.java:134)
    at org.mozilla.javascript.Context.call(Context.java:521)
    at org.mozilla.javascript.ContextFactory.call(ContextFactory.java:535)
    at org.mozilla.javascript.tools.shell.Main.exec(Main.java:198)
    at org.mozilla.javascript.tools.shell.Main.main(Main.java:174) 
```

JSDocs 文档（[这里](http://code.google.com/p/jsdoc-toolkit/w/list)、[这里](http://usejsdoc.org/)和[这里](https://developers.google.com/closure/compiler/docs/js-for-compiler#tags)）的扩散并没有多大用处。

有没有其他人看到这个错误？你有没有深究？有关 JSDoc 的最新且准确的资源的任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:30:50.293

这已在 JSDoc 的主分支中修复

# c# - 在父子组合框 ItemSource 绑定中对子 ItemSource 进行排序

> ID：14612330
> 
> 赞同：0
> 
> 时间：2013-01-30T19:43:10.190
> 
> 标签：c#, wpf, linq, xaml

我有一个用户控件，其中包含两个组合框，用户可以在其中选择一个库存类别，然后选择一个库存项目。库存类别组合框的选定值触发库存项目组合框列表。我遇到的问题是我无法对库存项目组合列表进行排序。当我将组合的库存类别和库存项目添加到 DataContext 时，我可以对库存类别进行排序，但是我无法对库存项目列表进行排序。代码如下所示：

xml:

```
<ComboBox Style="{DynamicResource ResourceKey=ComboBoxStyle}"
          Name="cboInventoryCategory"
          MinWidth="250"
          HorizontalAlignment="Stretch"
          ItemsSource="{Binding DataContext.InventoryCategoryList, RelativeSource={RelativeSource AncestorType=UserControl,Mode=FindAncestor}}"
          DisplayMemberPath="Category"
          SelectedValuePath="Id"
          SelectionChanged="cboInventoryCategory_SelectionChanged" />

<ComboBox Style="{DynamicResource ResourceKey=ComboBoxStyle}"
          Name="cboInventoryItem"
          MinWidth="250"
          HorizontalAlignment="Stretch"
          ItemsSource="{Binding ElementName=cboInventoryCategory,Path=SelectedItem.InventoryLists}"
          SelectedValue="{Binding Inventory_Id, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
          DisplayMemberPath="InventoryDescription"
          SelectedValuePath="InventoryId"
          SelectionChanged="cboRequestFor_SelectionChanged" /> 
```

Xaml.CS：

```
public Inventory()
{
    Initialize();

    var db = new DataContext();
    var viewModel = new ViewModel();

    DataContext = viewModel;
} 
```

查看型号：

```
using System.Linq;
using System.Data.Linq;

public IEnumerable<InventoryCategory> InventoryCategoryList { get; set; }
//InventoryCategory is a table
//InventoryList is a view and has a primary key and an association in the dbml

public ViewModel()
{
    InventoryCategoryList_Refresh()
}

public void InventoryCategoryList_Refresh()
{

     var dataOptions = new DataLoadOptions();
     dataOptions.LoadWith<InventoryCategory>(ic => ic.InventoryLists);
     db.LoadOptions = dataOptions;

     InventoryCategoryList = db.InventoryCategories.Where(w => w.Active == true).OrderBy(o => o.Category);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:57:05.733

试试这个：

```
public void InventoryCategoryList_Refresh()
{

     var dataOptions = new DataLoadOptions();
     dataOptions.LoadWith<InventoryCategory>(ic => ic.InventoryLists);
     db.LoadOptions = dataOptions;

     InventoryCategoryList = db.InventoryCategories.Where(w => w.Active == true).OrderBy(o => o.Category).ThenBy(c=>c.InventoryItems);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T01:02:07.457

您必须使用 .AssociateWith<> 而不是 .LoadWith<>

```
var dataOptions = new DataLoadOptions();
dataOptions.AssociateWith<InventoryCategory>(ic => ic.InventoryLists.OrderBy(o => o.InventoryDescription));
db.LoadOptions = dataOptions; 
```

# google-maps-api-3 - 放大 18 投影

> ID：14612331
> 
> 赞同：0
> 
> 时间：2013-01-30T19:43:10.957
> 
> 标签：google-maps-api-3, zooming, satellite

我已经编写了一个与 overlay.getTileUrl(tileCoord,zoom) 一起使用的平铺图像生成器，该生成器对于地图类型 Road_Map 可按预期工作，缩放级别为 21

```
function tile2lng(x,z) { return (x/Math.pow(2,z)*360-180); }
function tile2lat(y,z) { var n=Math.PI-2*Math.PI*y/Math.pow(2,z);
return (180/Math.PI*Math.atan(0.5*(Math.exp(n)-Math.exp(-n)))); } 
```

在 lat/lng 37.21 / -77.26

当卫星地图缩放到 18 级时，所请求的叠加图块的图块坐标计算为 lat/lng 27.37 / -77.26

实际上，加载地图时似乎有两次通过。首先正确请求平铺 lat/lng，然后发生 Projection_Changed 事件，然后重新请求平铺但 lat/lng 计算不正确。在地图缩放 18 到 21 显示的卫星图块的投影似乎不是标准的谷歌墨卡托投影。overlay.getTileURL(coord,zoom) 应该如何检测到这种变化？

当地图缩放 18 到 21 时，计算卫星图块的纬度/经度的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:37:45.810

而答案是：此时，没有暴露的投影参数。

我真正需要的：

map.setTilt(0);

我没有意识到谷歌地图会自动渲染卫星变焦 18 或更高，倾斜设置为 45，这会改变标准的基本地图投影。

快乐的时光！

# linux - 使用 perl 的标准化方法

> ID：14612332
> 
> 赞同：1
> 
> 时间：2013-01-30T19:43:11.413
> 
> 标签：linux, perl

我正在尝试使用自动化脚本进行标准化（从原始值中减去平均值并除以 stdev）。我有一个包含 10000 行的文件。我需要最初计算每列的平均值和标准偏差，然后使用这些值我必须获得新的标准化值。我可以在 excel 中很容易地做到这一点。但我正在寻找一个自动化脚本。

输入

```
DOTR1   10.29006    10.06744    10.47105    10.05041    10.18407    9.770205    10.90548    10.75112
RCC2    6.699481    7.240353    7.263434    6.654058    6.86063 7.151931    6.796337    6.78525
HHPA6   7.31182 7.547056    8.338827    7.278408    7.545548    7.409964    7.149899    7.300342
PAX8    8.336847    8.651292    8.493323    8.5056  8.445139    8.651406    8.664237    8.56571
ACA1A   4.233111    4.320666    4.232803    4.390224    4.269969    4.314899    4.264211    4.142419
UBA7    8.196608    8.164725    7.361889    8.055019    8.882745    7.6884  7.835754    8.354209
OOA 5.098222    5.212986    5.301191    5.211401    5.13133 5.153725    5.269111    5.195991
ACX1    4.875679    5.01305 4.921618    4.930978    4.899562    4.92918 4.970339    4.986362 
```

第 1 列的平均值为 6.880，stdev 为 2.066

我现在将从我的观察中减去平均值，然后除以 stdev 到 (10.29006-6.880)/2.066。我将对第 1 列中的所有后续观察逐行执行此操作。对于第 2 列，我将再次找到它的平均值和相应的标准差，并遵循相同的程序。

谢谢，

我尝试了以下代码来获取 avg 和 stdev .. 我坚持进行下一步..

```
sub average{
    my($data) = @_;
    if (not @$data) {
            die("Empty array\n");
    }
    my $total = 0;
    foreach (@$data) {
            $total += $_;
    }
    my $average = $total / @$data;
    return $average;
}
 sub stdev{
    my($data) = @_;
    if(@$data == 1){
            return 0;
    }
    my $average = &average($data);
    my $sqtotal = 0;
    foreach(@$data) {
            $sqtotal += ($average-$_) ** 2;
    }
    my $std = ($sqtotal / (@$data-1)) ** 0.5;
    return $std;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:41:30.293

只需使用数组数组来表示表格。逐列遍历表格，获取均值和标准差，然后替换列中的每个值。

```
#!/usr/bin/perl
use warnings;
use strict;

open my $IN, '<', 'input' or die $!;

my @table;

while (<$IN>) {
    $table[$. - 1] = [ split ];
}

for my $column (1 .. $#{ $table[0] }) {

    my $total = 0;
    $total   += $_ for map $table[$_][$column], 0 .. $#table;
    my $mean  = $total / @table;

    my $sqtot = 0;
    $sqtot   += ($mean - $_) ** 2 for map $table[$_][$column], 0 .. $#table;
    my $stdev = ($sqtot / $#table) ** 0.5;

    $table[$_][$column] = ($table[$_][$column] - $mean) / $stdev for 0 .. $#table;
}

$\ = "\n";
for my $line (@table) {
    print join "\t", @$line;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:08:58.547

我想我会发布一个我想出的解决方案，尽管它不像 choroba 的那么简单。它使用[Statistics::Descriptive](http://search.cpan.org/~shlomif/Statistics-Descriptive-3.0604/lib/Statistics/Descriptive.pm)。

更新：嗯，这不是一个很好的解决方案 - 当一个解决方案可能只需要一个时创建 3 个数组。忽略此解决方案。

```
#!/usr/bin/perl
use strict;
use warnings;
use Statistics::Descriptive;

my @data = map [split], <DATA>;

my @transpose = transpose(@data);
my @stats;

for my $row (@transpose[1.. $#transpose]) {
    my $stat = Statistics::Descriptive::Full->new;
    $stat->add_data($row);
    push @stats, [$stat->mean, $stat->standard_deviation];
}

my @new;

for my $r (0 .. $#data) {
    my @tmp;
    for my $c (1 .. $#{$data[$r]}) {
        push @tmp, ($data[$r][$c] - $stats[$c-1][0]) / $stats[$c-1][1];
    }
    push @new, [$data[$r][0], map {sprintf "%.3f", $_} @tmp];
}

# output loop
for my $row (@new) {
    print join("\t", @$row), "\n";  
}

sub transpose {
    my @array = @_;

    my @trans;
    for my $i (0 .. $#array) {
        for my $j (0 .. $#{$array[$i]}) {
            $trans[$j][$i] = $array[$i][$j];    
        }   
    }
    return @trans;
}

__DATA__
DOTR1   10.29006    10.06744    10.47105    10.05041    10.18407    9.770205    10.90548    10.75112
RCC2    6.699481    7.240353    7.263434    6.654058    6.86063 7.151931    6.796337    6.78525
HHPA6   7.31182 7.547056    8.338827    7.278408    7.545548    7.409964    7.149899    7.300342
PAX8    8.336847    8.651292    8.493323    8.5056  8.445139    8.651406    8.664237    8.56571
ACA1A   4.233111    4.320666    4.232803    4.390224    4.269969    4.314899    4.264211    4.142419
UBA7    8.196608    8.164725    7.361889    8.055019    8.882745    7.6884  7.835754    8.354209
OOA 5.098222    5.212986    5.301191    5.211401    5.13133 5.153725    5.269111    5.195991
ACX1    4.875679    5.01305 4.921618    4.930978    4.899562    4.92918 4.970339    4.986362 
```

打印出来：

```
C:\Old_Data\perlp>perl t33.pl
DOTR1   1.650   1.516   1.624   1.610   1.490   1.502   1.797   1.698
RCC2    -0.087  0.106   0.102   -0.117  -0.079  0.140   -0.085  -0.102
HHPA6   0.209   0.259   0.612   0.200   0.245   0.274   0.077   0.132
PAX8    0.705   0.810   0.686   0.824   0.669   0.920   0.770   0.706
ACA1A   -1.281  -1.349  -1.335  -1.268  -1.301  -1.336  -1.244  -1.302
UBA7    0.637   0.567   0.149   0.595   0.875   0.419   0.391   0.610
OOA     -0.862  -0.904  -0.829  -0.851  -0.895  -0.900  -0.784  -0.824
ACX1    -0.970  -1.004  -1.009  -0.993  -1.004  -1.017  -0.921  -0.919 
```

# c++ - Web 分布式创作和版本控制重定向的驱动器号映射

> ID：14612333
> 
> 赞同：0
> 
> 时间：2013-01-30T19:43:16.727
> 
> 标签：c++, c, windows, winapi, driver

我不确定在这种情况下什么是正确的方法。我需要将 Windows 驱动器号映射到自定义 Web DAV 连接服务器。或者换句话说，当用户访问“我的电脑”时，比如说，访问驱动器 Z：他们应该会看到来自该 Web DAV 服务器的文件和文件夹。

我首选的编程语言是 C/C++/MFC。

我唯一的选择是内核模式设备驱动程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:55:45.577

不，您所要求的可以通过创建一个[Shell 命名空间扩展](http://msdn.microsoft.com/en-us/library/windows/desktop/ff521728.aspx)来实现。

# android - ClassNotFoundException 在 onSaveInstanceState 中扩展 MapFragment 的类中读取 Serializable 对象

> ID：14612336
> 
> 赞同：9
> 
> 时间：2013-01-30T19:43:18.690
> 
> 标签：android, supportmapfragment, mapfragment

我有一个扩展 SupportMapFragment 的类，我从后端加载一些数据并显示标记。我还有另一个片段，我在地图上显示与所选标记相对应的详细信息。我在地图下方以纵向模式显示详细信息片段，并在横向模式下并排显示。

```
public class MapDisplayFragment extends SupportMapFragment {
private ArrayList<ShowLocation> locations = null;

public void onViewCreated(View view, Bundle savedInstanceState) {
    if (savedInstanceState != null) {
    locations = (ArrayList<ShowLocation>)savedInstanceState.getSerializable("LOCATIONS");
    }
}
@Override
public void onSaveInstanceState(Bundle outState) {
  if (outState == null) {
 outState = new Bundle();
  }
  outState.putSerializable("LOCATIONS", locations);
  super.onSaveInstanceState(outState);
} 
```

我有一个实现 Serializable 的类，它在派生的地图类中使用。我使用 onSaveInstanceState 来存储对象，这样我就不必再次从后端检索数据。但是当我翻转设备时，应用程序因*java.lang.RuntimeException：Parcelable 遇到ClassNotFoundException 读取 Serializable 对象而崩溃。*

```
public class ShowLocation implements Serializable {
    private String geoCodeLat = Constants.EMPTY_STRING;
    private String geoCodeLng = Constants.EMPTY_STRING;
    ....
    public String getGeoCodeLat() {
       return geoCodeLat;
    }
    public void setGeoCodeLat(String geoCodeLat) {
       this.geoCodeLat = geoCodeLat;
    }

    public String getGeoCodeLng() {
       return geoCodeLng;
    }

    public void setGeoCodeLng(String geoCodeLng) {
        this.geoCodeLng = geoCodeLng;
    }
    ....
} 
```

我已将布局定义如下：

```
<LinearLayout
        android:id="@+id/layoutMapData"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <fragment
            android:id="@+id/mapFrag"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="0.5"
            class="com.test.appFragments.MapDisplayFragment" />

        <LinearLayout
            android:id="@+id/layoutDetails"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="0.5"
            android:visibility="gone" >
        </LinearLayout>
    </LinearLayout> 
```

如果有人遇到这个问题或者如果有解决这个问题的方法，请帮助我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T14:12:19.963

不知道为什么会这样。看起来数据正在 Google Play 服务中的某个地方进行解组，并且没有关于我们的类的信息。如我错了请纠正我。

但是，有一种解决方法。不要将数据保存到`outState`中，而是将其保存到参数包（也将保存）。这是一个例子：

```
public MyFragment extends SupportMapFragment {

    private MapView mMapView;

    public MyFragment() {
        /*
         * We need to set bundle here.
         * Note, that if you're actually using arguments
         * then skip line below.
         */
        setArguments(new Bundle());
    }

    /* YOUR CODE HERE */

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        mMapView.onSaveInstanceState(outState);

        /* I'm using Serializable, but you can use whatever you want */
        getArguments().putSerializable("yourfield", yourValue);
    }

    @Override
    public void onCreate(Bundle savedState) {
        super.onCreate(savedState);
        mMapView.onCreate(savedState);

        if(savedState != null) {
            yourValue = getArguments.getSerializable("yourField");
        }
    }

} 
```

# jquery - 选中复选框时不显示警报消息框

> ID：14612337
> 
> 赞同：1
> 
> 时间：2013-01-30T19:43:24.873
> 
> 标签：jquery, asp.net

我想知道是否至少选中了一个复选框，所以我使用以下代码。

```
function CheckIfAtLeastOneBoxIsCheckedBeforeSavingForm() {
  var n = $('input[id*="ckHMreq"]:checked').length;
  alert(n);
} 
```

当没有选中复选框时，警报消息框显示 0。但是，当至少选中一个复选框时，警报消息框甚至不会显示。

有什么理由吗？

# 编辑

这是浏览器生成的 HTML

```
<input id="contentMain_cklistPayroll_gvCKList_ckHMreq_0" type="checkbox" name="_ctl0:contentMain:cklistPayroll:gvCKList:_ctl2:ckHMreq" /> 
```

我还在 jquery 代码中添加了“已检查”。当没有选中任何复选框并且选中任何复选框时没有消息框时，我仍然得到 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:44:44.937

您应该添加`:checked`到您的选择器，以便它只选择选中的复选框：

```
function CheckIfAtLeastOneBoxIsCheckedBeforeSavingForm() {
    var n = $('input[id*="ckHMreq"]:checked').length;
    alert(n);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:45:24.877

您的原始代码始终显示复选框输入的数量，而不是 0...

[http://jsfiddle.net/hRubC/](http://jsfiddle.net/hRubC/)（选中） [http://jsfiddle.net/szuzv/](http://jsfiddle.net/szuzv/)（未选中）

...因此您的 html 中可能存在缺陷。

正如另一个答案中所建议的那样，您确实希望将其添加`:checked`到您的选择器中。

编辑：

[http://jsfiddle.net/HFzJw/](http://jsfiddle.net/HFzJw/) 至少在 Chrome 中，您的原始选择器可以与`input`您添加到问题中的标记一起正常工作。也许这是一个特定于浏览器的问题？

编辑 2： [http](http://jsbin.com/iperin/1/edit) ://jsbin.com/iperin/1/edit （jsfiddle 似乎今天早上倒了）

为了回应您对所有浏览器都得到相同的评论，这是另一个工作示例，与您在问题中显示的标记完全匹配。这个例子在你尝试的时候是不是不能正常工作？如果它确实工作正常，请检查您页面上其他地方的其他可能不同之处。

# java - 将 ExecutorService 与合并排序的多线程版本一起使用

> ID：14612340
> 
> 赞同：3
> 
> 时间：2013-01-30T19:43:43.917
> 
> 标签：java, multithreading, algorithm

我正在处理一个家庭作业问题，我必须创建一个多线程版本的合并排序。我能够实现它，但我无法停止线程的创建。我研究过使用 ExecutorService 来限制线程的创建，但我无法弄清楚如何在我当前的代码中实现它。

这是我当前的多线程合并排序。我们需要实现一个特定的策略模式，这就是我的`sort()`方法的来源。

```
@Override
public int[] sort(int[] list) {
    int array_size = list.length;
    list = msort(list, 0, array_size-1);
    return list;
}

int[] msort(int numbers[], int left, int right) {
    final int mid;
    final int leftRef = left;
    final int rightRef = right;
    final int array[] = numbers;
    if (left<right) {
        mid = (right + left) / 2;
        //new thread
        Runnable r1 = new Runnable(){
            public void run(){
                msort(array, leftRef, mid);     
            }
        };
        Thread t1 = new Thread(r1);
        t1.start();

        //new thread
        Runnable r2 = new Runnable(){
            public void run(){
                msort(array, mid+1, rightRef);
            }
        };
        Thread t2 = new Thread(r2);
        t2.start();
        //join threads back together
        try {
            t1.join();
            t2.join();

        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        merge(numbers, leftRef, mid, mid+1, rightRef);
    }
    return numbers;
}

void merge(int numbers[], int startA, int endA, int startB, int endB) {
    int finalStart = startA;
    int finalEnd = endB;
    int indexC = 0;
    int[] listC = new int[numbers.length];

    while(startA <= endA && startB <= endB){
        if(numbers[startA] < numbers[startB]){
            listC[indexC] = numbers[startA];
            startA = startA+1;
        }
        else{
            listC[indexC] = numbers[startB];
            startB = startB +1;
        }
        indexC++;
    }

    if(startA <= endA){
        for(int i = startA; i < endA; i++){
            listC[indexC]= numbers[i];
            indexC++;
        }
    }

    indexC = 0;
    for(int i = finalStart; i <= finalEnd; i++){
        numbers[i]=listC[indexC];
        indexC++;
    }
} 
```

任何指点将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:36:28.083

在@mcdowella 的评论之后，我还认为如果你想限制并行运行的线程数量，fork/join 框架是你最好的选择。

我知道这对你的作业没有任何帮助，因为你可能不允许在 Java7 中使用 fork/join 框架。但是它即将学到一些东西，不是吗？；）

正如我评论的那样，我认为您的合并方法是错误的。我无法确定失败之处，但我已经重写了它。我强烈建议您编写一个测试用例，其中包含该合并方法期间可能发生的所有边缘情况，如果您验证它有效，请将其植入到您的多线程代码中。

@lbalazscs 还提示您在 javadocs 中提到了 fork/join 排序，但是我没有其他事情可做 - 所以如果您使用 Java7 实现它，我将向您展示解决方案。

```
public class MultithreadedMergeSort extends RecursiveAction {

  private final int[] array;
  private final int begin;
  private final int end;

  public MultithreadedMergeSort(int[] array, int begin, int end) {
    this.array = array;
    this.begin = begin;
    this.end = end;
  }

  @Override
  protected void compute() {
    if (end - begin < 2) {
      // swap if we only have two elements
      if (array[begin] > array[end]) {
        int tmp = array[end];
        array[end] = array[begin];
        array[begin] = tmp;
      }
    } else {
      // overflow safe method to calculate the mid
      int mid = (begin + end) >>> 1;
      // invoke recursive sorting action
      invokeAll(new MultithreadedMergeSort(array, begin, mid),
          new MultithreadedMergeSort(array, mid + 1, end));
      // merge both sides
      merge(array, begin, mid, end);
    }
  }

  void merge(int[] numbers, int startA, int startB, int endB) {
    int[] toReturn = new int[endB - startA + 1];
    int i = 0, k = startA, j = startB + 1;
    while (i < toReturn.length) {
      if (numbers[k] < numbers[j]) {
        toReturn[i] = numbers[k];
        k++;
      } else {
        toReturn[i] = numbers[j];
        j++;
      }
      i++;
      // if we hit the limit of an array, copy the rest
      if (j > endB) {
        System.arraycopy(numbers, k, toReturn, i, startB - k + 1);
        break;
      }
      if (k > startB) {
        System.arraycopy(numbers, j, toReturn, i, endB - j + 1);
        break;
      }
    }
    System.arraycopy(toReturn, 0, numbers, startA, toReturn.length);
  }

  public static void main(String[] args) {
    int[] toSort = { 55, 1, 12, 2, 25, 55, 56, 77 };
    ForkJoinPool pool = new ForkJoinPool();
    pool.invoke(new MultithreadedMergeSort(toSort, 0, toSort.length - 1));
    System.out.println(Arrays.toString(toSort));

  } 
```

请注意，线程池的构造将活动并行线程的数量限制为处理器的核心数量。

```
ForkJoinPool pool = new ForkJoinPool(); 
```

根据它的javadoc：

> 创建一个并行度等于 java.lang.Runtime.availableProcessors 的 ForkJoinPool，使用默认线程工厂、无 UncaughtExceptionHandler 和非异步 LIFO 处理模式。

还要注意我的合并方法与你的不同，因为我认为这是你的主要问题。如果我用我的合并方法替换您的合并方法，至少您的排序工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:50:07.800

正如 mcdowella 所指出的，Java 7 中的 Fork/Join 框架正是针对可以递归分解成更小部分的任务。

实际上，[RecursiveAction](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RecursiveAction.html)的 Javadoc有一个合并排序作为第一个示例 :)

另请注意，[ForkJoinPool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html)是一个 ExecutorService。

# jquery - jQuery Validate 插件和默认输入值不起作用

> ID：14612343
> 
> 赞同：0
> 
> 时间：2013-01-30T19:44:02.903
> 
> 标签：jquery, jquery-validate

我有一个设置了默认值的表单，应该将其视为“空字段”。我确实看到了有关此主题的另一篇文章，但到目前为止还没有任何工作。它仍然只在字段为空时抛出错误，但当它也有其“默认值”时也应该这样做。

这是具有简单单字段形式的代码：

* * *

```
<title>Untitled Document</title>
<form name="contactInfo" action="##" method="post" enctype="multipart/form-data">
<div class="step">
<div style="float:left; width:45%;">
<input type="text" name="email" value="enter your email" tabindex="1" 
onClick="this.select();" required defaultInvalid />
</div>
</div>
<input type="submit" />
</form>
<!--- form validation to handle non blank default fields --->
<script language="javascript" type="text/javascript">
$().ready(function() {
  jQuery.validator.addMethod("defaultInvalid", function(value, element) 
        {
            switch (element.value) 
            {
                case "enter your email":
                    if (element.name == "email") return false;
                    break;
                default: return true; 
                    break;
            }
        });
     // validate the comment form when it is submitted
    $("#contactInfo").validate(
    {
      rules: 
      {
       email: "required defaultInvalid"
      },
      messages: 
      {
       email: "Please input your email."
      }
    });
});
</script> 
```

* * *

两个问题：

1.  它仅在为空时触发验证错误（而不是在具有默认值时）
2.  我添加的自定义消息不显示。

我已经在 stackOverflow 和网络上搜索了一个小时，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:45:23.760

[修复所有错误后效果会更好](http://jsfiddle.net/PPQw8/)...

* * *

1) 表单是目标，`id`但您`form`不包含`id`。因此，`.validate()`插件从未在您的`form`.

```
<form name="contactInfo" id="contactInfo" ... // <- added an `id`

$("#contactInfo").validate({ ... 
```

* * *

2）你的规则有点混乱。这是无效的...

```
rules: { 
    email: "required defaultInvalid"
} 
```

应该...

```
rules: {
    email: {
        required: true,
        defaultInvalid: true
    }
} 
```

* * *

3)`email`现场一片混乱。您无法创建`attributes`对应于`rules`.

```
<input type="text" name="email" value="enter your email" tabindex="1" 
onClick="this.select();" required defaultInvalid /> 
```

你已经在定义你的`rules`内部了`.validate()`。否则，您将使用`class="required defaultInvalid"`.

应该看起来像...

```
<input type="text" name="email" value="enter your email" tabindex="1" /> 
```

我不知道你要做什么，`onClick=`所以我删除了它。您正在使用 jQuery，因此使用 jQuery，永远不需要任何内联 JavaScript 事件处理程序。

* * *

**工作演示：http:** [//jsfiddle.net/PPQw8/](http://jsfiddle.net/PPQw8/)

通读文档： [http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:55:55.620

您可以使用它来获取输入的默认值

```
var default_value = $(this).prop("defaultValue"); 
```

并将其与当前值进行比较

```
var current_value = $(this).val(); 
```

编辑：

您有一个简单的错误：`$("#contactInfo").validate` 您的表单没有 ID contactInfo，因此您需要将该 ID 添加到表单标签

```
<form id="contactInfo" name="contactInfo" action="##" method="post" enctype="multipart/form-data"> 
```

工作示例：http: [//jsfiddle.net/rJVvp/](http://jsfiddle.net/rJVvp/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T19:48:45.970

我有自定义逻辑，因此根据您按下的按钮添加规则。您可以在添加规则之前轻松检查值。

```
$('.buttonNextEmail').click(function () {
   if($(".TextBoxEmail").val() != "default string"){
        $(".TextBoxEmail").rules('add', { required: true });
        $(".TextBoxEmailVerify").rules('add', { required: true });
        $(".TextBoxEmailVerify").rules('add', {
            equalToIgnoreCase: '.TextBoxEmail'
        });
    }
}); 
```

# android - RelativeLayout 将视图设置在居中视图的右侧

> ID：14612346
> 
> 赞同：1
> 
> 时间：2013-01-30T19:44:07.800
> 
> 标签：android, android-layout, alignment, android-relativelayout

我尝试将视图设置在第一个视图的右侧，并将它们底部对齐在 RelativeLayout 内。

以下代码在我看来应该可以工作。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="300dp"
    android:layout_height="300dp"
    android:background="#999999"
    android:padding="10dp" >

    <View
        android:id="@+id/v1"
        android:layout_width="200dp"
        android:layout_height="200dp"
        android:layout_centerInParent="true"
        android:background="#FFFFFF" />

    <View
        android:id="@+id/v2"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignBottom="@id/v1"
        android:layout_toRightOf="@id/v1"
        android:background="#FF0000" />

</RelativeLayout> 
```

但结果并不是我所期望的。

![结果](../Images/aa5389a93f115bdf0330d094b9ed4b76.png)

这里有什么问题？

只是为了清楚我的期望：两个立方体应该底部相互对齐，红色立方体应该在白色立方体的右侧（外部）。

**编辑：**

我发现了问题。它不是这个布局，而是包含它的父列表（它是一个专有的 Horizo​​ntalListView）。它似乎以某种方式调整其子视图的大小，这导致了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:00:29.307

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="300dp"
                android:layout_height="300dp"
                android:background="#999999"
                android:padding="10dp" >

    <View
            android:id="@+id/v1"
            android:layout_width="200dp"
            android:layout_height="200dp"
            android:layout_centerInParent="true"
            android:background="#FFFFFF" />

    <View
            android:id="@+id/v2"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:background="#FF0000" 
            android:layout_alignBottom="@+id/v1" 
            android:layout_alignBaseline="@+id/v1"
            android:layout_alignRight="@+id/v1"/>

</RelativeLayout> 
```

![在此处输入图像描述](../Images/da1a279d7dfc2f2250ff44a0e6c28228.png)

我对吗？;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:06:25.293

它对我有用。我的猜测是，无论您要测试什么，sp 都会从默认的 sp=dp 缩小。这将使您的 dp 填充将块推过，因为灰色和白色块之间的可用空间量是：

```
(300-200)/2 - 10 = 40 
```

你的红色方块是50。

如果您想要更一致的结果，请使用 dp，因为 sp 将根据偏好进行缩放，并且通常用于文本缩放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T20:36:11.537

不要使用 sp 作为单位。尝试改用 dp（设备像素）。这将考虑设备。在您的情况下，图像未正确缩放，因此出现此结果。您还可以在视图 v2 上设置重力。就像是 ：

```
android:gravity="botton|right" 
```

或者您也可以尝试将基线设置为：

```
android:layout_alignBaseline="@+id/v1" 
```

并将 alignRight 设置为：

```
android:layout_alignRight="@+id/v1" 
```

# unit-testing - 在 EcomDev PHPUnit 测试中无法获得会话单例

> ID：14612349
> 
> 赞同：5
> 
> 时间：2013-01-30T19:44:19.117
> 
> 标签：unit-testing, magento, testing, phpunit

经过一些认真的调试后，我发现在使用 EcomDev_PHPUnit 模块运行测试时，我无法调用以获取 Magento 中的会话对象

任何单例/模型调用，即`Mage::getSingleton('admin/session')`或`Mage::getModel('customer/session')`最终抛出异常，`EcomDev_PHPUnit_Controller_Request_Http::getHttpHost()`说明`Cannot run controller test, because the host is not set for base url.` 这是由于`$_SERVER['HTTP_HOST']`未设置索引而引起的

配置中是否有我可能缺少的东西导致这种情况？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T19:53:53.180

这是一个与 Magento 会话初始化相关的问题，它是 Magento 的内部核心部分。为了摆脱这个错误是使用一个模拟对象，它不使用标准的 Magento 会话初始化过程，因为它使用核心 php 会话。

如果您已从 EcomDev_PHPUnit_Test_Case 类之一扩展了您的测试用例，则可以使用以下代码来使用模拟替换会话对象。

```
$sessionMock = $this->getModelMockBuilder('admin/session')
        ->disableOriginalConstructor() // This one removes session_start and other methods usage
        ->setMethods(null) // Enables original methods usage, because by default it overrides all methods
        ->getMock();
$this->replaceByMock('singleton', 'admin/session', $sessionMock); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-15T17:45:00.403

您可以在 phpunit.xml 中设置主机

```
<phpunit ....>
    ...
    <php>
        <server name='HTTP_HOST' value='http://local.mysite.com' />
    </php>
</phpunit> 
```

# ruby-on-rails - 提交 check_box_tag 值以及 link_to 参数

> ID：14612350
> 
> 赞同：1
> 
> 时间：2013-01-30T19:44:19.550
> 
> 标签：ruby-on-rails, forms, templates

另一个来自 SaaS 课程的课程经过多次尝试和错误。有一个表格，其中包含可以过滤（通过复选框）和按评级排序（通过单击 theader）的电影。如果过滤，后续排序应保留过滤器。

我猜“link_to”触发的请求应该在 _path() 中包含“ratings”参数，以便控制器可以查询并提交相应的视图。

如果这是正确的 - 我如何在 movies_path() 中获取 check_box_tag 值？如果没有，我还应该怎么做？提前致谢！

```
%h1 All Movies
=puts 'Ratings: ', params[:ratings].nil?
= form_tag movies_path, :id => 'ratings_form', :method => :get do
  Include:
  - @all_ratings.each do |rating|
    = rating
    = check_box_tag "ratings[#{rating}]", 1, @filtered_ratings.include?(rating) ? true : false
  = submit_tag 'Refresh', :id => 'ratings_submit'

%table#movies
  %thead
    %tr
      %th{:class => @title_header}= link_to "Movie Title", movies_path(:sort => "title"), :id => 'title_header'
      %th Rating
      %th{:class => @date_header}= link_to "Release Date", movies_path(:sort => "release_date"), :id=> 'release_date_header'
      %th More Info
  %tbody 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:59:39.840

所以我了解到可以简单地将元素从`params[]`_path() 添加到 URL 中，以`?`. 希望这对其他初学者有用..

```
 %thead
    %tr
      %th{:class => @title_header}= link_to "Movie Title", movies_path(:sort => "title", :ratings => params[:ratings]), :id => 'title_header'
      %th Rating
      %th{:class => @date_header}= link_to "Release Date", movies_path(:sort => "release_date", :ratings => params[:ratings]), :id=> 'release_date_header'
      %th More Info
  %tbody 
```

# python - 使用 SUDS 使用 RPClib 服务时可能的消息大小限制？

> ID：14612353
> 
> 赞同：1
> 
> 时间：2013-01-30T19:44:34.940
> 
> 标签：python, soap, wsgi, suds, spyne

我一直在使用 SUDS 和 RPCLib 为软件解决方案开发 SOAP 接口，该软件解决方案采用 PDF 文档并返回 PNG，并且发现了一个非常有趣的问题。

我已经编写了测试客户端（使用SUDS）和服务器（使用RPCLib），当要上传和返回的文档小于3.5Mb时它们可以成功运行。但是，在上传较大的文档时，我收到 SUDS 错误：

```
Traceback (most recent call last):
  File "MyFunc.py", line 90, in <module>
    callMyFuncSOAPService(fName, test_id, fNameOut)
  File "MyFuncClient.py", line 77, in callMyFuncSOAPService
    temp_list = client.service.createInstance(encoded_data, 19, test_id, 20)
  File "/usr/local/lib/python2.7/dist-packages/suds/client.py", line 542, in __call__
    return client.invoke(args, kwargs)
  File "/usr/local/lib/python2.7/dist-packages/suds/client.py", line 602, in invoke
    result = self.send(soapenv)
  File "/usr/local/lib/python2.7/dist-packages/suds/client.py", line 637, in send
    reply = transport.send(request)
  File "/usr/local/lib/python2.7/dist-packages/suds/transport/https.py", line 64, in send
    return  HttpTransport.send(self, request)
  File "/usr/local/lib/python2.7/dist-packages/suds/transport/http.py", line 77, in send
    fp = self.u2open(u2request)
  File "/usr/local/lib/python2.7/dist-packages/suds/transport/http.py", line 118, in u2open
    return url.open(u2request, timeout=tm)
  File "/usr/lib/python2.7/urllib2.py", line 400, in open
    response = self._open(req, data)
  File "/usr/lib/python2.7/urllib2.py", line 418, in _open
'_open', req)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 1207, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "/usr/lib/python2.7/urllib2.py", line 1177, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error [Errno 32] Broken pipe> 
```

并且当返回一个文档时，Server 完成处理并返回该文档，但是 Client 挂起。

我有一种感觉，这是由于 HTTP 传输层的限制，但不知道如何解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:07:20.953

您可以增加允许的请求长度。

```
app = WsgiApplication(...)
app.max_content_length = 10 * 0x100000 # 10 MB 
```

Spyne 2.10 和 2.9.4 将在构造函数中包含这些参数，因此您可以这样做：

```
WsgiApplication(..., max_content_length=10 * 0x100000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T22:32:06.710

我找到了一个可能的解决方案。它涉及更新和编辑 spyne 库 [rpclib 的继任者]。

在 WSGI.py 函数 __wsgi_input_to_iterable() 中，我注释掉了引发错误的 2 行：

```
raise RequestTooLongError() 
```

问题是我们从 length = str(http_env.get('CONTENT_LENGTH', self.max_content_length)) 中提取了一个似乎不正确的限制。

我将与 SPYNE 开发人员核实，看看这个错误可能来自什么

# c++ - 使用 C++ 查找文件大小

> ID：14612355
> 
> 赞同：2
> 
> 时间：2013-01-30T19:44:38.117
> 
> 标签：c++, printing, header, filenames, filesize

更多的问题，我真的很困惑，它一直困扰着我，我也用 dirent.h 尝试了几乎所有的东西。但这是我想要的一个例子：

```
#include <iostream>
#include "DataEventResponseMsg.idl"
using namespace std;

int main(){
    cout << "This is the size: " << sizeof(DataEventResponseMsg) << endl;
    return 0;
} 
```

所做的是包含该特定文件并找到它的大小并打印它。我想这样做，但我需要它来打开一个充满 .idl 文件的目录并使用 sizeof.. 打印它是哪个文件以及它的大小。

我尝试使用dirent.h并打开目录，并将内容放入ent->d_name，然后查找d_name的大小等，但所做的只是打印指针的大小..我尝试将文件放入数组中，但 sizeof 只打印数组的大小。我希望它打印实际文件的大小，就好像我将它们包含在头文件中一样，就像我发布的文件一样。

这可能吗？我很困惑，我需要让它工作，但我需要帮助。

请帮忙。

编辑 - - -

所以我用dirent.h做了这个：

```
#include <iostream>
#include <dirent.h>
#include <string.h>
#include <fstream>

using namespace std;

int main( int argc, char* argv[] ){
char FileArr[20][256];
DIR *dir;
FILE *fp;
int i = 0;
int k;
struct dirent *ent;

dir = opendir (argv[1]);
if( dir != NULL ){
    while(( ent = readdir ( dir ) ) != NULL ){
        strcpy( FileArr[i], ent->d_name );
        fp = fopen( FileArr[i], "rw" );
        cout << FileArr[i] << ", " << sizeof(FileArr[i]) << endl;
        fclose(fp);
        i++;
    }
    closedir( dir );
}
return 0;
} 
```

这从命令行打开了目录，并将内容放入 ent->d_name，我将这些字符串复制到一个数组中，并试图找到数组中所有内容的大小。但是，执行 sizeof 只会计算指针的数组大小（如果我使用了指针）。我想找到实际文件的大小，而不是任何保存文件字符串/名称的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T19:49:44.483

有几种方法可以在 C++ 中获取文件的大小。一种方法是查找文件末尾，然后询问文件指针的位置：

```
ifstream file("filename.idl", ios::in);
file.seekg(0, ios::end);
auto fileSize = file.tellg(); 
```

这甚至在此页面上作为示例给出：

[http://www.cplusplus.com/reference/istream/istream/tellg/](http://www.cplusplus.com/reference/istream/istream/tellg/)

除此之外，还有其他（特定于操作系统的）解决方案，如评论中指出的那样，但无论您的平台如何，这种方法都应该有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T20:27:55.850

提供的答案 lethal-guitar 是一种很好的独立于操作系统的获取文件大小的方法，只要您已经知道目录中有哪些文件。如果您不知道目录中有哪些文件，那么您将`dirent`按照您的建议重新使用特定于平台的工具，例如用于 Linux 的工具。以下是如何使用的简单示例`dirent`：

```
#include <stdio.h>
#include <dirent.h>
#include <sys/stat.h>

int main(int argc, char *argv[]) {
    struct stat file_stats;
    DIR *dirp;
    struct dirent* dent;

    dirp=opendir("."); // list files in the current directory (replace with any other path if you need to)
    do {
        dent = readdir(dirp);
        if (dent)
        {
            printf("  file \"%s\"", dent->d_name);
            if (!stat(dent->d_name, &file_stats))
            {
                printf(" is size %u\n", (unsigned int)file_stats.st_size);
            }
            else
            {
                printf(" (stat() failed for this file)\n");
            }
        }
    } while (dent);
    closedir(dirp);
} 
```

# javascript - javascript window.open 无法在同一浏览器窗口中打开

> ID：14612365
> 
> 赞同：0
> 
> 时间：2013-01-30T19:45:22.713
> 
> 标签：javascript

我试图在验证用户 ID 后在同一窗口中打开网页。html/javascript 代码是：

```
 <script language="javascript">
function check(form)/*function to check userid & password*/
{
  if(form.loginID.value == "" && form.loginPass.value == "") {
    window.open("mform.html","_self"); 
}
else {
    alert("Error Password or Username")  
      }
     }
 </script> 
 </body> 
```

如果我使用 _self 浏览器只会重新加载原始页面。如果我将其更改为 _blank，它会打开一个新窗口，其中加载了正确的页面。我已经在 Safari、firefox 和 chrome 浏览器中尝试过，结果相同。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:49:03.800

`window.open`用于打开新窗口。

用于`window.location.href = 'mform.html'`在同一窗口中导航其他 URL。

# linux - 如何在 bash 中在一行中运行多个后台命令？

> ID：14612371
> 
> 赞同：241
> 
> 时间：2013-01-30T19:45:38.050
> 
> 标签：linux, bash, shell

我通常使用以下命令运行多个命令：

```
sleep 2 && sleep 3 
```

或者

```
sleep 2 ; sleep 3 
```

但是如果我想从一个命令行命令在后台同时运行它们怎么办？

```
sleep 2 & && sleep 3 & 
```

不起作用。也没有替换`&&`为`;`

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：456
> 
> 时间：2013-01-30T20:00:39.947

您究竟希望它们如何运行？如果您希望它们在后台启动并按*顺序*运行，您可以执行以下操作：

```
{ sleep 2; sleep 3; } & 
```

如果您只想`sleep 3`在`sleep 2`成功时运行，则：

```
sleep 2 && sleep 3 & 
```

另一方面，如果您希望它们在后台*并行*运行，您可以这样做：

```
sleep 2 & sleep 3 & 
```

这两种技术可以结合使用，例如：

```
{ sleep 2; echo first finished; } & { sleep 3; echo second finished; } & 
```

Bash 就是 bash，通常有多种不同的技术来完成相同的任务，尽管有时它们之间存在细微的差异。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-01-30T19:49:36.370

您需要在上一个版本中添加一些括号 -

```
(sleep 2 &) && (sleep 3 &) 
```

或者这也有效——

```
(sleep 2 &) ; (sleep 3 &) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-31T12:05:25.037

要运行多个后台命令，您需要添加`&`每个命令的结尾。前任： `(command1 &) && (command2 &) && (command3 &)`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-10-30T16:29:33.560

上面的答案使用括号。Bash 也可以将大括号用于类似目的：

```
{ sleep 2 && sleep 3; } & 
```

请注意，大括号对语法更挑剔——后面`{`的空格、前面的空格`}`和最后的分号是必需的。在某些情况下，大括号更有效，因为它们不会派生新的子外壳。在这种情况下，我不知道它是否有所作为。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-30T19:48:12.343

这有效：

```
$(sleep 2 &) && sleep 3 & 
```

你也可以这样做：

```
$(sleep 2 && sleep 3) & 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-07-10T10:21:39.063

您可以像这样使用 bash 命令替换`$(command)`：

```
$(command1 ; command2) & 
```

请注意，stdin 和 stdout 仍然链接到父进程，并且至少重定向 stdout 可能会很棘手。因此，或者您可以将命令链接在一行中，然后将字符串传递给`bash`命令以生成一个新进程来处理执行。

```
bash -c "command1 ; command2" & 
```

当您需要在后台运行多个命令时，这在 bash 脚本中特别有用。

这两个语句应该是等价的。在这两种情况下都会产生一个**bash**进程来处理命令（命令链），`&`最后分离执行。

这次您可以在命令末尾添加`&>/dev/null`之前`&`至少重定向标准输出并避免在父进程的标准输出上输出。就像是：

```
bash -c "command1 ; command2" &>/dev/null & 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-03T09:40:39.890

我也有同样的使命。我试过`(sleep2 ; fg )& sleep3 ; fg`了，它的工作。并且当你按 ctrl+c 加倍时，可以停止这两个过程。

# scala - 为什么我的列表是空的？

> ID：14612373
> 
> 赞同：0
> 
> 时间：2013-01-30T19:45:48.943
> 
> 标签：scala

我有这个代码：

```
 val products = List()

    def loadProducts(report: (Asset, Party, AssetModel, Location, VendingMachineReading)) = {
      report match {
        case (asset, party, assetModel, location, reading) =>

          EvadtsParser.parseEvadts(reading.evadts, result)

          (result.toMap).map(product => ReportData(
            customer = party.name,
            location = location.description,
            asset = asset.`type`,
            category = "",
            product = product._1,
            counter = product._2,
            usage = 0,
            period = "to be defined")).toList
      }
    }

results.foreach(result => products ::: loadProducts(result))
println(products) 
```

你能告诉我我做错了什么，因为产品列表是空的吗？如果我 println `products`inside`loadProducts`方法，产品不为空。我做错了连接吗？

PS：我是一个Scala初学者。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T19:55:05.280

正如我已经说过的， ::: 会产生一个新列表，而不是改变您已经拥有的列表。

[http://take.ms/WDB http://take.ms/WDB](http://take.ms/WDB)

你有两个选择：不可变和可变

以下是您可以以不可变和惯用的方式执行的操作：

```
def loadProducts(report: (...)): List[...] = {
  ...
}

val products = result.flatMap(result => loadProducs(result))
println(products) 
```

而且，您可以结合可变性并使用 ListBuffer 来做您想做的事情：

```
def loadProducts(report: (...)): List[T] = {
  ...
}

val buffer = scala.collection.mutable.ListBuffer[T]() 
result.foreach(result => buffer ++ = loadProducs(result))
val products = buffer.toList
println(products) 
```

PS`flatMap( ...)`类似于`map(...).flatten`，所以不要因为我和 Tomasz 的写法如此不同而感到困惑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T19:58:43.720

`List`type 是不可变的，`val`意味着一个永远不会改变的引用。因此，您不能真正更改`products`引用的内容。我建议先建立一个“列表列表”然后展平：

```
val products = results.map(loadProducts).flatten
println(products) 
```

请注意，这`map(loadProducts)`只是 的简写`map(loadProducts(_))`，它是 的简写`map(result => loadProducts(result))`。

如果您变得更有经验，请尝试方法，它会像您想要的那样`foldLeft()`不断构建列表：`products`

```
results.foldLeft(List[Int]())((agg, result) => agg ++ loadProducts(result)) 
```

# c# - 如果库不存在，则忽略某些项目的 using 指令

> ID：14612374
> 
> 赞同：1
> 
> 时间：2013-01-30T19:45:56.363
> 
> 标签：c#, dll

我正在从事各种项目，我需要一些帮助，但如果可能的话，我不需要。

我拥有的是各种 C# 项目，我希望拥有一个所有项目都可以使用的 C# 库，我们称之为`library 1`.

库 1 可以使用另一个库。让我们称之为`library 2`。

所有项目将始终使用库 1，但并非所有项目都将使用库 1 中的库 2。

因此，目前如果我创建一个新的 C# 项目并包含库 1，则会收到一条错误消息，指出库 2 不可用。除非主项目确实需要它，否则我真的不想导入库 2。因此，如果库 2 不可用，是否有办法使库 1 可以忽略 using 指令。

希望这是有道理的，感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:10:58.147

你不应该做你要求做的事。如果不是所有项目都需要库 2，那么您有两种方法可以*解决*它：

> 选项 1：重构您的项目，以便仅在需要时包含库 2。如果可执行项目是决定是否需要库 2 的项目，那么该项目应该引用它（或不引用它）。
> 
> 选项 2：始终包含库 2。如果主可执行文件不需要它，那就这样吧。但是由于库 1 引用了它，因此您将需要它。

我建议选项 1。只要问这个问题，我认为你有一个依赖问题，这就是应该解决的问题。可能有一些复杂的解决方案可以解决这个问题，但这不利于长期可维护性。

我还建议使用谷歌搜索[Stable Dependencies Principle](http://www.objectmentor.com/resources/articles/stability.pdf)。

# android - 当 Activity 固定为纵向时旋转生成的相机图像

> ID：14612380
> 
> 赞同：1
> 
> 时间：2013-01-30T19:46:24.303
> 
> 标签：android, android-camera, android-orientation

我正在使用内置相机制作应用程序。活动固定为纵向，但我希望将图像正确保存在右侧，如下所示：

```
Camera camera = getCameraInstance(); //method found on http://developer.android.com/guide/topics/media/camera.html
Camera.Parameters params = camera.getParameters();
params.setRotation(someInteger); //I want to get the proper value for this method
camera.setParameters(params); 
```

有没有人能够做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:00:19.183

如果您只是想旋转通过调用 takePicture 接收到的 JPEG 图像，那么 setRotation 是正确的使用方法。

关于将什么值传递给 setRotation 的问题是什么？假设您希望真实世界的“向上”在保存的 JPEG 图像中“向上”，则需要根据相机传感器相对于世界的当前方向设置 setRotate。

您可以找出整个设备与世界的相对方向是什么，您可以找出相机传感器的方向相对于设备的“自然”方向是什么，并将这两个旋转组合成最终答案。数学很容易出错，这就是为什么我们在[setRotation](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setRotation%28int%29)的 API 文档中明确说明了它，在此处复制：

```
public void onOrientationChanged(int orientation) {
   if (orientation == ORIENTATION_UNKNOWNsetRotation) return;
   android.hardware.Camera.CameraInfo info =
        new android.hardware.Camera.CameraInfo();
   android.hardware.Camera.getCameraInfo(cameraId, info);
   orientation = (orientation + 45) / 90 * 90;
   int rotation = 0;
   if (info.facing == CameraInfo.CAMERA_FACING_FRONT) {
     rotation = (info.orientation - orientation + 360) % 360;
   } else {  // back-facing camera
     rotation = (info.orientation + orientation) % 360;
   }
   mParameters.setRotation(rotation);
} 
```

您需要从[OrientationEventListener](http://developer.android.com/reference/android/view/OrientationEventListener.html)继承并为回调方法实现上述内容。当然，在更新参数之前，您应该检查您的相机是否已打开，并且 mParameters 等是否有效。

请注意，这只会旋转相机发出的 JPEG。如果您发现您的预览在您的 UI 中的方向不正确，您需要为此调用[setDisplayOrientation](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29)。相机传感器通常与设备的横向对齐，因此横向相机应用程序通常可以在不调用此函数的情况下逃脱，即使它们应该在不寻常的 Android 设备上使用。但是，如果您正在编写纵向应用程序，则可能必须调整显示方向以与您的 UI 对齐。与 setRotation 一样，您需要考虑一些因素，文档中包含用于正确计算数学的示例代码。

# jquery - 单击时停止鼠标悬停

> ID：14612382
> 
> 赞同：3
> 
> 时间：2013-01-30T19:46:30.450
> 
> 标签：jquery

我在一个表格单元格上发生了 2 个事件。1，.hover（on，off）上的简单tr行荧光笔和2，onclick，它会在其下方滑动打开一个div。

这两个项目都按需要工作。我要做的是在单击 tr 时停止 .hover 函数的第二部分（在 mouseout 上），以便在打开 div 时它保持突出显示。我尝试在该函数上使用该类，但 99% 的时间，当我的鼠标仍在它上面时，它会疲倦地高亮它，因此当我的鼠标移开它时，它会将其渲染回正常的 lo-lite 状态。

那么，我如何通过 .click() 调用阻止单独的 .hover 调用的第二个函数部分运行？

这些函数看起来有点愚蠢，但在我的真实代码中，还有很多事情要做。所以，这些是动作的剥离部分。

.hover( function(){
$(this).removeClass('xhead'); $(this).addClass('headerhover'); } , function(){ $(this).removeClass('headerhover') $( this).addClass('xhead'); } );

和这个：

```
function togglediv(id){
    $("#"+id).toggle("fast");
} 
```

从以下位置调用：

```
function loadmenu(id){
    var divid = 'div_'+id+'_detail';
    togglediv(divid);
} 
```

这是第二次调用：

```
$('.viewer').click(function(e) {        
    var id = e.target.id;                   
    loadmenu(id);           
    }
}); 
```

小提琴在工作中受阻......对不起，我不能让它更容易。

欣赏这些想法。

总而言之，在 .vm 上单击、粘贴 headerhover、杀死 mouseout 事件以使其返回到 xhead 类。否则，如果没有单击，则执行类交换以突出显示行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:44:01.253

简单的方法？在您的输入`click`中，例如：

```
$(this).data("sticky", true); 
```

并在您的悬停（鼠标悬停部分）中检查它：

```
if (! $(this).data("sticky"))
{
    // proceed with hover mouseout code
} 
```

确保您的选择器跨事件排列。在上面的代码中，它没有，所以你需要一个更复杂的选择器，`$(this).closest('.xhead').data("sticky", true);` *或者*你可以在它本身上定义一个额外的`click`事件`.xhead`来处理这个交互（这个点击事件会冒泡，同时触发）。

另请注意，您`td.xhead`在编写的代码中选择了 for `hover`，但您的 HTML 只有一个`tr.xhead`.

# c# - ASP.NET Web API 不返回 XML

> ID：14612383
> 
> 赞同：5
> 
> 时间：2013-01-30T19:46:33.127
> 
> 标签：c#, xml, json, post, asp.net-web-api

我有一个将用户添加到数据库的控制器和方法。

我从 Fiddler 调用它并带有请求标头，如下所示 -

> 内容类型：应用程序/xml
> 
> 接受：应用程序/xml
> 
> 主机：本地主机：62236
> 
> 内容长度：39

还有一个请求体——

```
<User>
  <Firstname>John</Firstname>
  <Lastname>Doe</Lastname>
</User> 
```

这按预期工作，调用方法，在方法 PostUser 中处理用户对象。

```
 public class UserController : ApiController
    {
        public HttpResponseMessage PostUser(User user)
        {
            // Add user to DB
            var response = new HttpResponseMessage(HttpStatusCode.Created);
            var relativePath = "/api/user/" + user.UserID;
            response.Headers.Location = new Uri(Request.RequestUri, relativePath);
            return response;
        }
    } 
```

我正在自己的班级中执行我的模型验证

```
public class ModelValidationFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        if (actionContext.ModelState.IsValid == false)
        {
            // Return the validation errors in the response body.
            var errors = new Dictionary<string, IEnumerable<string>>();
            foreach (KeyValuePair<string, ModelState> keyValue in actionContext.ModelState)
            {
                errors[keyValue.Key] = keyValue.Value.Errors.Select(e => e.ErrorMessage);
            }

            actionContext.Response =
                actionContext.Request.CreateResponse(HttpStatusCode.BadRequest, errors);
        }
    }
} 
```

但是如果我发布以下内容

```
<User>
  <Firstname></Firstname> **//MISSING FIRST NAME**
  <Lastname>Doe</Lastname>
</User> 
```

模型无效，即使我声明 Accept: application/xml，也会返回 JSON 响应。

如果我在 UserController 中执行模型验证，我会得到一个正确的 XML 响应，但是当我在 ModelValidationFilterAttribute 中执行它时，我会得到 JSON。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T20:35:47.917

您对以下代码的问题：

```
var errors = new Dictionary<string, IEnumerable<string>>();
actionContext.Request.CreateResponse(HttpStatusCode.BadRequest, errors); 
```

因此，您尝试`errors`从其类型为 的对象创建响应`Dictionary<string, IEnumerable<string>>();`。

Web.API 将尝试自动找到`MediaTypeFormatter`适合您的响应类型的权利。然而，默认的 XML 序列化程序 ( `DataContractSerializer`) 无法处理该类型`Dictionary<string, IEnumerable<string>>();`，因此它将使用 JSON 序列化程序作为您的响应。

实际上，您应该使用[CreateErrorResponse](http://msdn.microsoft.com/en-us/library/jj127078%28v=vs.108%29.aspx)并直接创建响应`ModelState`（它将创建一个`HttpError`XML 可序列化的对象）

```
public class ModelValidationFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        if (actionContext.ModelState.IsValid == false)
        {
            actionContext.Response =
                actionContext.Request.CreateErrorResponse(
                    HttpStatusCode.BadRequest, 
                    actionContext.ModelState);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:33:23.933

我认为 Web API 将返回 JSON 作为控制器方法之外的响应的默认类型。

您是否尝试过按照本文的建议禁用 JSON 格式化程序？

[http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization)

IE

```
void ConfigureApi(HttpConfiguration config)
{

    // Remove the JSON formatter
    config.Formatters.Remove(config.Formatters.JsonFormatter);
} 
```

# backbone.js - RequireJS/Backbone：获取从要求返回的视图

> ID：14612388
> 
> 赞同：0
> 
> 时间：2013-01-30T19:46:44.457
> 
> 标签：backbone.js, requirejs, amd

这是我的看法：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'models/tableModel',
    'collections/tablesCollection',
    'views/tablesView'
], function($, _, Backbone, tableModel, tablesCollection, tablesView) {
    require(['collections/tablesCollection'], function(tablesCollection) {
        var t = new tablesCollection(null, {url: 'main-contact'});
        var tables = new tablesView({ collection: t, template: 'main-contact-template'});
        tables.url = 'main-contact';
        return tables;  // <!-- returns view, tables can be console.log'ed
    });

    console.log(tables); // <!-- tables is not defined
}); 
```

我如何`tables`在`require`声明中获取，以便在哪里可以访问`console.log`？这似乎是我需要返回视图的地方，所以我可以在我的路线中使用它：

```
app_router.on('route:index', function(){
        require(['views/tables/mainContactView'], function(mainContactView) {
            console.log(mainContactView);  // <!-- undefined, unless some value is returned from where the console.log() is above
            $('#web-leads').html(mainContactView.render().el);
        });
    }); 
```

如果我把它放在`return 'test'`哪里`console.log(tables)`，我可以`console.log()`在我的路线上。所以我认为那是我需要返回视图的地方。我如何传递这些数据？现在，即使有一个 return 声明，我的观点也是不确定的。我需要从`require`. 我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:02:41.253

您已经加载`collection/tablesCollection`了定义，因此您无需再执行其他`require`操作来加载它。

您可以简单地将 View 定义为：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'models/tableModel',
    'collections/tablesCollection',   // You've already required tablesCollection here.
    'views/tablesView'
], function($, _, Backbone, tableModel, tablesCollection, tablesView) {
    var t = new tablesCollection(null, {url: 'main-contact'});
    var tables = new tablesView({ collection: t, template: 'main-contact-template'});
    tables.url = 'main-contact';
    return tables;
}); 
```

# java - scan.hasNext() 在 While 循环中打印代码的最后一行之前中断？

> ID：14612390
> 
> 赞同：0
> 
> 时间：2013-01-30T19:46:53.553
> 
> 标签：java, loops, while-loop

为什么这个循环不打印我保存在其他地方的 .txt 文件中的最后一行？它打印出除最后一行之外的所有行。

```
int count = 0;

Courses[] POS = new Courses[26];

while (scan.hasNext())
{
    POS[count] = new Courses(scan.nextLine());

    System.out.println(POS[count]);
    scan.nextLine();

    count++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:31:39.723

你得到下一行两次。你很幸运它没有抛出 NPE 或其他异常：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:05:06.270

我认为问题在于，正如 demogolem 在评论中指出的那样，你打`scan.nextLine()`了两次电话。

如果您有偶数长度的行，这意味着这将打印出每隔一行。如果您的行长度为奇数，则意味着它将每隔一行打印一次，然后抛出异常（我相信 NoSuchElement？）

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine)。

# php - mysql_fetch_array() 布尔错误但没有描述？

> ID：14612391
> 
> 赞同：-1
> 
> 时间：2013-01-30T19:46:59.810
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

我知道不应该问这个问题，因为它之前被问过，并且在这里有一个答案。但我不认为这是一回事。我以前从来没有遇到过这样的布尔错误，而没有给出错误所在行号的描述？

相反，我得到的只是这个错误消息，没有任何行信息或其他信息来帮助我识别问题？

这是我逐字逐句的错误：

```
: mysql_fetch_array() expects parameter 1 to be resource, boolean given in on line : mysql_fetch_array() expects parameter 1 to be resource, boolean given in on line 
```

这很奇怪，因为它通常会告诉行号，但在这种情况下显然不是。

我正在使用这个mysql函数：

```
function account_perms() {
    global $connection;
    global $_SESSION;
    global $profile_id;
    $query = "SELECT *
        FROM ptb_permissions
        WHERE ptb_permissions.private_id = \"$profile_id\"
        AND ptb_permissions.user_id = ".$_SESSION['user_id']." ";

    $account_perms = mysql_query($query, $connection);
    confirm_query($query, $connection);
    return $account_perms;
} 
```

这个php代码：

```
<?php
$account_perms = account_perms();

while ($perms = mysql_fetch_array($account_perms)) {
    if ($perms['privellages'] == '1')  {          
         $photo = "data/private_photos/$profile[1]/pic1.jpg";
         if (!file_exists($photo)) {
              $photo = "data/photos/0/_default.jpg";
         }
         $thumb = "data/private_photos/$profile[1]/thumb_pic1.jpg";
         if (!file_exists($thumb)) {
              $thumb = "data/photos/0/_default.jpg";
         }
         if (logged_in()) {
              echo "<li><a href=\"$photo\" rel=\"shadowbox\" title=\"<strong>$profile[2]'s Photo's</strong>\"><img src=\"$thumb\" width=\"90\" height=\"90\" alt=\"<strong>{$profile[2]}'s Photos</strong>\"  /></a></li>";

         }
     }
}

$account_perms = account_perms();
while ($perms = mysql_fetch_array($account_perms)) {
     if ($perms['privellages'] == '0')  {
        $photo = "data/private_photos/0/_default.jpg";
                  if (!file_exists($photo)) {
                       $photo = "data/photos/0/_default.jpg";
                  }
                  $thumb = "data/private_photos/0/_default.jpg";
                  if (!file_exists($thumb)) {
                       $thumb = "data/photos/0/_default.jpg";
                  }
                  if (logged_in()) {
                       echo "<li><a href=\"$photo\" rel=\"shadowbox\" title=\"<strong>$profile[2]'s Photo's</strong>\"><img src=\"$thumb\" width=\"90\" height=\"90\" alt=\"<strong>{$profile[2]}'s Photos</strong>\"  /></a></li>";

                  } 
       }
}
?> 
```

请有人告诉我为什么我会收到这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:58:40.047

总而言之，根据经验，当您在 mysql 中遇到未知错误（顺便说一句，您不应该使用）时，总是使用内置函数来获取错误，`or die (mysql_error())`这就是它的目的。在这种情况下，我建议您在此处添加

`$account_perms = mysql_query($query, $connection) or die(mysql_error());`您将清楚地看到有关该问题的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:00:46.650

首先，您的代码易受 SQL 注入攻击。您将变量包含在查询中*而不*转义它们。如果其中一个变量的值不正确，用户将能够覆盖他们的权限，甚至删除数据库中的*所有内容*。

请阅读我在您的问题下方的评论，以了解如何使您的代码更安全。

您遇到的问题是 $account_perms 中不包含来自数据库的结果。我在您的代码中只看到两次对 mysql_fetch_array() 的调用，因此通过添加一些调试代码应该很容易找到在这种情况下它不起作用：

```
$account_perms = account_perms();
echo 'first time using mysql_fetch';
var_dump($account_perms); 
```

对于您使用 mysql_fetch_array() 的其他位置也是如此

此外，由于可能存在 SQL 注入漏洞，您可能会调试您的 SQL 并检查生成的 SQL 查询是否格式正确。您可以通过将其放在您的 account_perms() 函数中来做到这一点：

```
// rest of code ..
var_dump($query);

$account_perms = mysql_query($query, $connection);

// etc.. 
```

[更新]根据下面OP的评论，只有在用户未登录时才会出现问题。因此，问题可能出在这部分：

```
SELECT *
    FROM ptb_permissions
    WHERE ptb_permissions.private_id = \"$profile_id\"
    AND ptb_permissions.user_id = ".$_SESSION['user_id']." "; 
```

如果用户未登录，则会话中可能未设置“user_id”键，因此查询结果将变为：

```
SELECT *
    FROM ptb_permissions
    WHERE ptb_permissions.private_id = \"$profile_id\"
    AND ptb_permissions.user_id = 
```

哪个无效，导致数据库*没有*返回结果

最好在代码中添加一些机制来检查用户是否登录，然后才*检索*信息

在所有情况下，*在使用它们之前检查您正在使用的变量是否存在并包含正确的值*。

例如，重新编写 account_perms() 函数，并将您使用的变量作为参数传递，而不是使用全局变量；

```
function account_perms($profile_id, $session_user_id) {
    // Convert both id's to integers (I'm assuming both are numbers here)
    // this also makes it safer
    // agains SQL injections (in this case)
    $profile_id      = (int) $profile_id;
    $session_user_id = (int) $session_user_id;

    if ($profile_id <= 0 || $session_user_id <= 0) {
        // no valid profile-id or no valid session-user-id
        // return false to indicate something was wrong
        // you may also use 'die()' with an error message
        // or Throw an Exception
        return false;
    }

    // we'll leave this global variable for now
    global $connection;

    if (!$connection) {
        die('No database connection found');
    }

    $query = "SELECT *
        FROM ptb_permissions
        WHERE ptb_permissions.private_id = " . $profile_id . "
        AND ptb_permissions.user_id = " . $session_user_id .";";

    $account_perms = mysql_query($query, $connection);
    confirm_query($query, $connection);
    return $account_perms;
} 
```

然后在您的脚本中：

```
if (!isset($_SESSION['user_id'])) {
   // user_id not found. we don't need to go any further
   die('no user-id in session');
}

$account_perms = account_perms($profile_id, $_SESSION['user_id']);

if (!$account_perms) {
    die('Unable to retrieve account-permissions from database');
} 
```

这只是为了说明如何解决这个问题

# oracle - 将游标和存储过程从 T-SQL 转换为 PL/SQL

> ID：14612392
> 
> 赞同：-1
> 
> 时间：2013-01-30T19:47:01.527
> 
> 标签：oracle, tsql, stored-procedures, plsql, oracle11g

我是 Oracle PL/SQL 的新手。在我的数据库中，我创建了一个表`PERSONS`：

```
person_id int
first_name nvarchar(50)
last_name nvarchar(50)
birth_date datetime
email varchar(80) 
```

第一个存储过程`tester_sp`采用一个参数`@sptotest`来搜索单词的毫秒时间。另一个过程`search_sp`采用一个参数`@word`并显示如何搜索单词（在这个存储过程中，我使用了一个`LIKE`子句）。

第一个存储过程`tester_sp`：

```
CREATE PROCEDURE tester_sp

DECLARE @d            datetime,
       @tookms       int,
       @cnt          int,
       @single_email varchar(80),
       @word         varchar(50)

DECLARE @testwords TABLE
       (no   int         NOT NULL PRIMARY KEY,
        word varchar(80) NOT NULL)

CREATE TABLE #temp(person_id  int          NOT NULL PRIMARY KEY,
                  first_name nvarchar(50) NULL,
                  last_name  nvarchar(50) NOT NULL,
                  birth_date datetime     NULL,
                  email      varchar(80)  NOT NULL)

-- Select one email address
SELECT TOP 1 @single_email = email
FROM   persons
WHERE  person_id BETWEEN 321106 AND 325000 AND  email LIKE '%.com'
ORDER  BY person_id

-- This is the list of testword(joy and email)
INSERT @testwords(no, word)
  SELECT 1, 'joy'
  UNION ALL
  SELECT 4, @single_email

PRINT '------------------ Testing ' + ' ' + quotename(@sptotest) + ' ----'

DECLARE cur CURSOR STATIC LOCAL FOR
  SELECT word FROM @testwords ORDER BY no
OPEN cur

WHILE 1 = 1
BEGIN
  FETCH cur INTO @word
  IF @@fetch_status <> 0
     BREAK

  TRUNCATE TABLE #temp

  CHECKPOINT
  DBCC DROPCLEANBUFFERS WITH NO_INFOMSGS

  -- Run the procedure and read all from disk.
  SELECT @d = getdate()
  INSERT #temp
     EXEC @sptotest @word
  SELECT @tookms = datediff(ms, @d, getdate())
  SELECT @cnt = COUNT(*) FROM #temp
  PRINT ltrim(str(@tookms)) + ' ms, ' +
        ltrim(str(@cnt)) + ' rows. Word = "' + @word + '". Data in disk.'

  -- Run it again with data in cache.
  TRUNCATE TABLE #temp
  SELECT @d = getdate()
  INSERT #temp
     EXEC @sptotest @word
  SELECT @tookms = datediff(ms, @d, getdate())
  SELECT @cnt = COUNT(*) FROM #temp
  PRINT ltrim(str(@tookms)) + ' ms, ' +
        ltrim(str(@cnt)) + ' rows. Word = "' + @word + '". Data in cache.'

  END

  DEALLOCATE cur 
```

第二个存储过程`search_sp`：

```
CREATE PROCEDURE search_sp @word varchar(50) 
AS
SELECT person_id, first_name, last_name, birth_date, email
FROM   persons WHERE email LIKE '%' + @word + '%' 
```

执行存储过程：

```
EXEC tester_sp 'search_sp' 
```

执行结果是：

```
------------------ Testing  [search_sp] ----
6146 ms, 10 rows. Word = "joy". Data in disk
5586 ms, 10 rows. Word = "joy". Data in cache.
6280 ms, 1 rows. Word = "omamo@petinosemdesetletnicah.com". Data in disk
5943 ms, 1 rows. Word = "omamo@petinosemdesetletnicah.com". Data in cache. 
```

**我的问题是**：如何使用PL/SQL在Oracle数据库11g中使用存储过程转换整个过程？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:00:33.967

创建表：

```
create table PERSONS (
    person_id  integer not null, 
    first_name nvarchar2(50 char),
    last_name  nvarchar2(50 char) not null, 
    birth_date date, 
    email      varchar2(80 char),
    PRIMARY KEY (person_id)
);

CREATE global temporary TABLE temp_persons (
    person_id  integer not null,
    first_name nvarchar2(50 char),
    last_name  nvarchar2(50 char) NOT NULL,
    birth_date date,
    email      varchar2(80 char)  NOT NULL,
    PRIMARY KEY (person_id)
) on commit delete rows; 
```

存储过程：

```
CREATE PROCEDURE tester_sp as
   start        timestamp;
   diff         interval day to second;
   tookms       integer;
   cnt          integer;
   single_email varchar2(80 char);
   msg          varchar2(1000 char);
begin
    -- Select one email address
    SELECT email
      into   single_email
      FROM   persons
      WHERE  person_id BETWEEN 321106 AND 325000 
        AND  email LIKE '%.com'
        and rownum = 1;

    dbms_output.put_line('------------------ Testing ----');

    for r in (
      with testwords as (  
        -- This is the list of testword(joy and email)
        SELECT 1 as no, 'joy' as word from dual
        UNION ALL
        SELECT 4, single_email from dual)
      SELECT word 
      FROM testwords 
      ORDER BY no) loop

        -- Run the procedure twice
        for pass in 1..2 loop
          start := systimestamp;
          INSERT into temp_persons (person_id, first_name, last_name, birth_date, email)
            SELECT person_id, first_name, last_name, birth_date, email
            FROM   persons 
            WHERE  email LIKE '%'||r.word||'%';
          cnt := sql%rowcount;
          diff := systimestamp - start;
          tookms := round(1000 * ( 
            extract(hour from diff)   * 3600 +
            extract(minute from diff) * 60   +
            extract(second from diff))); 
          msg := to_char(tookms)||' ms, '||to_char(cnt)||' rows. Word = "'||r.word||'". ';
          if pass = 1 then
            msg := msg||'Data on disk.';
          else
            msg := msg||'Data in cache.';
          end if;
          dbms_output.put_line(msg);
          rollback; -- instead of 'TRUNCATE TABLE temp_persons'
        end loop;

    end loop;
end; 
```

执行存储过程：

```
begin
    tester_sp;
end; 
```

# java - 我无法为 AsyncTask 的 Result 参数设置上限

> ID：14612393
> 
> 赞同：1
> 
> 时间：2013-01-30T19:47:02.150
> 
> 标签：java, android, generics, android-asynctask, upperbound

我正在尝试为 AsyncTask 的 Result 参数设置上限，如下所示：

```
public class MyTask extends AsyncTask<T, Long, V extends Model> 
```

编译器抱怨 'extends 不是预期的，它需要一个逗号。

我尝试将 Model 编写为抽象类和常规类。

有任何想法吗？

谢谢你，大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:55:24.943

由于`T`和`V`是未解析的类型参数，`MyTask`因此需要对其进行参数化。尝试声明以下内容：

```
public class MyTask<T, V extends Model> extends AsyncTask<T, Long, V> 
```

我也改为`calls`-`class`我认为这是一个错字。

**回应您的评论：**

```
MyTask<T, V extends Model> 
```

在这里，`MyClass`声明*类型*参数`T`和`V`. 当声明类型参数时，它们可以*选择*用`extends`. `T`没有界限——它可以是任何引用类型。`V`有一个*上限*。`Model`- 它必须是某种类型 is 或 extends `Model`。

```
extends AsyncTask<T, Long, V> 
```

就像任何声明一个不扩展的类一样`Object`，这就是说`MyTask`扩展`AsyncTask`——我相信你明白这一点。[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)具有三个类型参数：在其声明中，它们被称为`Params`、`Progress`和`Result`。在这里，`MyTask`为这些类型参数提供*类型参数*- `T`、`Long`和`V`。

`MyTask`保留`Params`为无界类型参数也是如此，使用具体类型*解析* ，并使用.`Progress``Long``Result``Model`

有关泛型的良好介绍，请参阅[Java 教程](http://docs.oracle.com/javase/tutorial/java/generics/)。然后查看[Angelika Langer 的泛型常见问题解答](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)以了解更多问题。

# sql - 查询逗号分隔的 ID 到逗号分隔的值

> ID：14612394
> 
> 赞同：5
> 
> 时间：2013-01-30T19:47:04.397
> 
> 标签：sql, sql-server, join

我有 2 张桌子

**部门**

```
ID  Dept
---------
1   HR
2   Accts
3   IT 
```

**员工**

```
ID Name     Depts
-------------------
1  Kevin     2,1
2  Michelle  1
3  Troy      1,3
4  Rheesa    2,3,1 
```

我正在寻找带有 SQL 查询的如下输出。

**员工部门**

```
ID Name      Depts
-------------------------
 1 Kevin     Accts,HR
 2 Michelle  HR
 3 Troy      HR,IT
 4 Rheesa    Accts,IT,HR 
```

我尝试了以下方法，将 s 与 depts 连接，但只为每个 depts 生成一行。如何使用查询获得上述结果？

```
select 
    name, depts, dept 
from 
    employee
CROSS APPLY  
    dbo.split_list(employee.depts ,',') split
inner join 
    dbo.department on  depts= split.value
order by 
    name 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T20:26:01.280

```
DECLARE @Departments TABLE 
(
  ID INT PRIMARY KEY, 
  Dept VARCHAR(32) NOT NULL UNIQUE
);

DECLARE @Employees TABLE
(
  ID INT PRIMARY KEY,
  Name NVARCHAR(64) NOT NULL,
  Depts VARCHAR(255) NOT NULL
);

INSERT @Departments VALUES 
  (1,'HR'),  (2,'Accts'),  (3,'IT');

INSERT @Employees VALUES
  (1,'Kevin','2,1'), (2,'Michelle','1'),
  (3,'Troy','1,3'),  (4,'Rheesa','2,3,1');

SELECT ID, Name, Depts = STUFF((SELECT ',' + d.Dept 
    FROM @Departments AS d
    INNER JOIN @Employees AS ei
    ON ',' + ei.Depts + ',' LIKE '%,' + CONVERT(VARCHAR(12), d.id) + ',%'
    WHERE ei.ID = e.ID
    ORDER BY Dept
    FOR XML PATH, 
    TYPE).value(N'/text().[1]', N'nvarchar(max)'), 1, 1, N'')
FROM @Employees AS e
ORDER BY ID; 
```

结果与您所需的结果不太匹配，因为排序是确定性的（按部门名称排序）：

```
ID      Name        Depts
----    --------    ----
1       Kevin       Accts,HR
2       Michelle    HR
3       Troy        HR,IT
4       Rheesa      Accts,HR,IT 
```

如果您希望它们按逗号分隔列表中的外观排序，只需更改：

```
ORDER BY Dept 
```

至：

```
ORDER BY CHARINDEX( ',' + CONVERT(VARCHAR(12), d.id) + ',', ',' + ei.Depts + ',') 
```

结果：

```
ID      Name        Depts
----    --------    ----
1       Kevin       Accts,HR
2       Michelle    HR
3       Troy        HR,IT
4       Rheesa      Accts,IT,HR -- this is the only one affected as it turns out 
```

但是，实际上，您应该***规范化您的数据库***。这绝对是一场噩梦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T20:06:21.890

除了如何存储数据之外，让我尝试为您提供帮助。

好吧，你在这里问了很多问题。首先，要拆分数据，您可以将其格式化为 XML 并使用 CROSS APPLY——我不久前看到的不需要内置函数的技巧。

这会将您的逗号分隔字符串转换为字符串列表。然后，您可以使用 FOR XML 将它们重新组合在一起。

试一试：

```
SELECT
   E.Id, 
   E.Name, 
   STUFF(
        (
        SELECT ',' +  D.Department AS [text()]
        FROM  (
           SELECT A.[id],  
             Split.a.value('.', 'VARCHAR(100)') AS DeptId  
           FROM  
              (SELECT [id],  
                 CAST ('<M>' + REPLACE(Depts, ',', '</M><M>') + '</M>' AS XML) AS String  
              FROM  Employee
          ) AS A 
        CROSS APPLY String.nodes ('/M') AS Split(a)) A 
        JOIN Departments D ON A.DeptId = D.Id
        WHERE E.Id = A.Id
        FOR XML PATH('')
        ), 1, 1, '') AS Departments
FROM Employee E 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!3/ddbaa/1)。

祝你好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T20:34:25.000

您还可以使用递归 CTE 来拆分数据，然后使用`FOR XML PATH`将行连接成一行：

```
;with cte (id, name, deptid, depts) as
(
  select id, name,
    cast(left(depts, charindex(',',depts+',')-1) as varchar(50)) deptid,
         stuff(depts, 1, charindex(',',depts+','), '') depts
  from employee
  union all
  select id, name,
    cast(left(depts, charindex(',',depts+',')-1) as varchar(50)) deptid,
    stuff(depts, 1, charindex(',',depts+','), '') depts
  from cte
  where depts > ''
) 
select e.id, e.name,
  stuff((
         select distinct ', '+ d.dept
         from cte c
         inner join departments d
            on c.deptid = d.id
         where e.id = c.id
         for XML path('')),1,1,'') Depts
from employee e 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e92b9/26)

结果：

```
| ID |     NAME |          DEPTS |
----------------------------------
|  1 |    Kevin |      Accts, HR |
|  2 | Michelle |             HR |
|  3 |     Troy |         HR, IT |
|  4 |   Rheesa |  Accts, HR, IT | 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T21:51:53.023

您还可以将选项与动态管理功能[**sys.dm_fts_parser 一起**](http://msdn.microsoft.com/en-us/library/cc280463.aspx)
使用 在脚本执行之前，您需要检查全文组件是否已安装：

```
SELECT FULLTEXTSERVICEPROPERTY ('IsFulltextInstalled') 
```

0 = 未安装全文。1 = 已安装全文。NULL = 无效输入或错误。

如果 0 = 全文未安装，那么这篇文章对您来说是必要的[如何在 sql server 2008 上安装全文？](https://stackoverflow.com/questions/869736/how-to-install-fulltext-on-sql-server-2008)

```
SELECT b.ID, b.Name, STUFF((
SELECT ',' + d.Dept
FROM Employees e 
  JOIN Departments d ON d.ID IN(
                                SELECT display_term 
                                FROM sys.dm_fts_parser('"' + e.Depts + '"', 1033, NULL, 0) 
                                WHERE display_term NOT LIKE 'nn%'
                                )
WHERE b.ID = e.ID
ORDER BY d.Dept
FOR XML PATH('')), 1, 1, '') AS Depts
FROM Employees b 
```

或者

```
SELECT e.ID, e.Name, 
 (
  STUFF((
  SELECT ',' + Dept
  FROM sys.dm_fts_parser('"' + e.Depts + '"', 1033, NULL, 0) p JOIN Departments d ON p.display_term = d.ID
  WHERE display_term NOT LIKE 'nn%'
  FOR XML PATH('')), 1, 1, '')
  ) AS Depts
 FROM Employees e 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-05T05:55:49.353

编写一个用于拆分逗号分隔值的函数。我写了 dbo.split

select * from dbo.split('1,2,3',',') 将返回 - Data 1 2 3

```
SELECT tact.ActivityID,CONVERT(NVARCHAR(20),tact.createddate,103) AS CallDate,
ActivityOriginatedByPartyID , (ISNULL(p.firstname,'')+' '+ISNULL(p.lastname,'')) AS PartnerName,
u.UserName AS PSTName, ccv.codevalue AS CallType
**, ccv1.codevalue AS CallContext**
,tact.ActivityNote AS CallTrackerNote,
(CONVERT(VARCHAR(20),tact.ActivityTimeSpend) + ' Min') AS CallDuration
FROM txn_activity tact (NOLOCK)
INNER JOIN TXN_Party p (NOLOCK) ON p.PartyID = tact.ActivityOriginatedByPartyID 
INNER JOIN TXN_User u (NOLOCK) ON u.userid = tact.createdby
INNER JOIN CFG_CodeValue ccv (NOLOCK) ON ccv.codevalueid = tact.ActivityTypeID
--INNER JOIN CFG_CodeValue ccv1 (NOLOCK) ON ccv1.codevalueid = tact.ActivityContext

**CROSS APPLY  
    dbo.split(tact.ActivityContext,',') split
inner join 
    dbo.CFG_CodeValue ccv1 (NOLOCK) ON ccv1.codevalueid = split.data** 
```

# r - 使用时间戳进行最终聚合

> ID：14612397
> 
> 赞同：0
> 
> 时间：2013-01-30T19:47:10.583
> 
> 标签：r, timestamp, dataframe

我有一个包含时间戳（m/d/yyyy H:M）的数据框。我的最终目标是通过使用时间戳（例如每小时、每天、每天的小时子集等）来总结数据。

导入我正在使用的数据时`read.csv`。第一列是时间戳。当我使用`read.csv`. 我应该在读入参数时使用`row.names`参数，还是应该将因子转换为时间戳？

如果我应该转换，我的时间戳目前是不明确的，我可以在读取之前转换为 YYYY/MM/DD HH:MM:SS（在 Excel 中？），然后用于`as.POSIXct`从因子中转换。或者，我可以保持原样并使用`strptime`从因子转换。这些选项之一是否更适合我的最终目标？

我在尝试使用适用于我自己的数据集的示例数据中的代码时遇到了问题。因此，我希望当程序变得更加复杂时，这个更基本的问题将导致未来的成功。

```
#dput of partial dataset
data <- structure(list(TIMESTAMP = structure(1:15, .Label = c("1/1/2012 11:00", 
"1/1/2012 12:00", "1/1/2012 13:00", "1/1/2012 14:00", "1/1/2012 15:00", 
"1/2/2012 11:00", "1/2/2012 12:00", "1/2/2012 13:00", "1/2/2012 14:00", 
"1/2/2012 15:00", "4/7/2012 11:00", "4/7/2012 12:00", "4/7/2012 13:00", 
"4/7/2012 14:00", "4/7/2012 15:00"), class = "factor"), P = c(992.4, 
992.4, 992.4, 992.4, 992.4, 992.4, 992.4, 992.4, 992.4, 992.4, 
239, 239, 239, 239, 239), WS = c(4.023, 3.576, 4.023, 6.259, 
4.47, 3.576, 3.576, 2.682, 4.023, 3.576, 2.682, 3.129, 2.682, 
2.235, 2.682), WD = c(212L, 200L, 215L, 213L, 204L, 304L, 276L, 
273L, 307L, 270L, 54L, 24L, 304L, 320L, 321L), AT = c(16.11, 
18.89, 20, 20, 19.44, 10.56, 11.11, 11.67, 12.22, 11.11, 17.22, 
18.33, 19.44, 20.56, 21.11), FT = c(17.22, 22.22, 22.78, 22.78, 
20, 11.11, 15.56, 17.22, 17.78, 15.56, 24.44, 25.56, 29.44, 30.56, 
29.44), H = c(50L, 38L, 38L, 39L, 48L, 24L, 19L, 18L, 16L, 18L, 
23L, 20L, 18L, 17L, 15L), B = c(1029L, 1027L, 1026L, 1024L, 1023L, 
1026L, 1025L, 1024L, 1023L, 1023L, 1034L, 1033L, 1032L, 1031L, 
1030L), FM = c(14.9, 14.4, 14, 13.7, 13.6, 13.1, 12.8, 12.3, 
12, 11.7, 12.8, 12, 11.4, 10.9, 10.4), GD = c(204L, 220L, 227L, 
222L, 216L, 338L, 311L, 326L, 310L, 273L, 62L, 13L, 312L, 272L, 
281L), MG = c(8.047, 9.835, 10.28, 13.41, 11.18, 9.388, 8.941, 
8.494, 9.835, 10.73, 6.706, 7.153, 8.047, 8.047, 7.6), SR = c(522L, 
603L, 604L, 526L, 248L, 569L, 653L, 671L, 616L, 487L, 972L, 1053L, 
1061L, 1002L, 865L), WS2 = c(2.235, 3.576, 4.47, 4.47, 5.364, 
4.023, 2.682, 3.576, 3.576, 4.023, 3.129, 3.129, 3.576, 2.682, 
3.129), WD2 = c(200L, 201L, 206L, 210L, 211L, 319L, 315L, 311L, 
302L, 290L, 49L, 39L, 15L, 348L, 329L)), .Names = c("TIMESTAMP", 
"P", "WS", "WD", "AT", "FT", "H", "B", "FM", "GD", "MG", "SR", 
"WS2", "WD2"), class = "data.frame", row.names = c(NA, -15L)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:20:59.653

给你`data`，你可以使用

```
data$TIMESTAMP <- as.POSIXct(as.character(data$TIMESTAMP), format = '%m/%d/%Y %H:%M') 
```

将您的时间戳转换为`POSIXct`类。或者`stringsAsFactors = FALSE`按照 Arun 的建议使用，在这种情况下你不需要`as.character`上面。

# asp.net - 母版页上的登录按钮不会回发，因为带有验证器的表单会停止回发

> ID：14612408
> 
> 赞同：0
> 
> 时间：2013-01-30T19:47:49.527
> 
> 标签：asp.net

我将 MasterPage 划分为`<div>`徽标、横幅和 ASCX 登录控件的标记，页面的其余部分`<div>`用于`<asp:ContentPlaceHolder>`托管我的所有 ASPX 页面。登录控件位于更新面板中。

* * *

**问题：** 一些 ASPX 页面有一个 ASCX 页面，其输入表单带有带有自定义验证器的文本框。当我单击登录按钮时，生成的回发也尝试发布此输入数据并失败，因为表单是空白的，没有数据......因此`postback`登录也不会通过。在其他没有验证的 ASPX 页面上，登录通过。

我可以通过有一个单独的登录页面来解决这个问题......也许有一个 ModalPopup 等？但是没有其他方法可以处理同一页面上的 2 个按钮......其中一个来自 Master ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:13:21.640

如果您没有验证登录表单中的控件，只需在登录按钮上使用 CausesValidation="false"。如果您正在验证登录表单，请使用 MikeSmithDev 推荐的验证组来控制在提交时验证哪些控件。仅为登录控件创建验证组应该将它们与页面上的其他控件隔离开来。

# c++ - 您如何强制模板化以匹配基类？

> ID：14612410
> 
> 赞同：0
> 
> 时间：2013-01-30T19:47:58.343
> 
> 标签：c++, templates, explicit-instantiation

我有一个模板函数，它是为类显式实例化的`Base`，但不是为`Derived`类实例化的。如何强制传递`Derived`类（或其他派生类）的用途与该类匹配`Base`？

头文件：

```
class Base {
};
class Derived : public Base {
};
class Derived2 : public Base {
};

template <typename Example> void function(Example &arg); 
```

实现文件：

```
// Explicitly instantiate Base class:
template void function<Base>(Base &arg);

// Define the template function:
template <typename Example> void function(Example &arg) {
  // Do something.
} 
```

因为我没有为`Derived`or显式实例化函数`Derived2`，所以我得到未定义的引用，但是，我想绑定`Base`显式定义的类。

对于使用 C++-03 从 Base 派生的所有对象，如何强制模板解析为 Base 类？

`Derived`我可以通过将类专业化到`Base`类定义以某种方式做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:04:39.593

怎么样：

```
template <> void function(Derived &arg)
{
     function<Base>( arg );
} 
```

编辑：您也可以通过函数重载来做到这一点，正如**aschepler**所建议的那样：

```
void function(Derived &arg)
{
     function<Base>( arg );
} 
```

它在概念上是相同的，虽然，我同意，稍微好一点:)

# javascript - 我如何修复这个 Javascript 以记录在多个 location.href.indexOf 上的写入

> ID：14612411
> 
> 赞同：0
> 
> 时间：2013-01-30T19:47:58.157
> 
> 标签：javascript

我如何修复此 JavaScript 以在多个文档上写入`location.href.indexOf`

```
if (location.href.indexOf( "/smispage""/tpfpage""/client_images_new""/client_images_list" ) > -1) {
    document.write( '<base target="_blank" />' );
} 
```

无论我如何布置列表，它似乎只适用于**smispage页面：**

```
"x","y" or "x";"y" or "x""y" or "x, y" or "x: y" or  "x,y" or "x;y" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:52:00.343

该`indexOf`方法根本没有那个功能：它允许您搜索单个子字符串，仅此而已。

[一种替代方法是`search`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/search)使用[方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/search)，它允许您指定正则表达式。在你的情况下，这可能看起来像：

```
if (location.href.search(/\/((smis|tpf)page|client_images_(new|list))/ ) > -1) {
    document.write( '<base target="_blank" />' );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:54:52.330

您可以创建页面列表并循环检查它们是否匹配..

```
var pages = ['/smispage','/tpfpage', '/client_images_new', '/client_images_list'];

for (var i = 0, len = pages.length; i < len; i++){
    if ( location.href.indexOf( pages[i] ) > -1 ){
        document.write( '<base target="_blank" />' );
        break;
    }
} 
```

# facebook - 从页面获取用户 Facebook 分享

> ID：14612416
> 
> 赞同：3
> 
> 时间：2013-01-30T19:48:28.113
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我有一个 Facebook 应用程序，并且能够将 Facebook Graph API 或 FQL 与我的每个用户的有效访问令牌一起使用。权限包括 read_stream。

我的目标是在用户的时间线中搜索他们从特定 Facebook 页面共享的内容。这是针对游戏的：用户将因分享页面内容而获得积分。这意味着如果他们单击页面上发布的任何内容上的“共享”按钮：链接、相册、照片和状态更新，并将其发布到他们的墙上。

直接从页面请求共享仅提供共享计数，而不提供有关共享内容的用户的任何信息。
**/[page_id]/posts?fields=shares**

使用 FQL 查询用户流中 via_id 设置为页面 ID 的帖子只会给我一些分享（它错过了照片分享和状态分享等）——并且在原始页面帖子上没有识别信息（所有这些 ID要么是用户要么为空）
**SELECT post_id, parent_post_id, source_id, target_id, message FROM stream WHERE source_id = me() AND via_id = [page_id]**

使用 Graph API 查询用户的帖子也缺少原始页面帖子的数据，因此无法确定 shared_story 的来源。story_tags 有时包含原始页面的 id。object_id 有时也设置为原始帖子的 id，但同样，并非总是如此。
**/我/帖子**

有什么我遗漏的东西，或者我可以采取的其他方法吗？在我看来，Facebook API 中似乎缺少一些功能，因为共享帖子具有独特的类型，但大多数只是没有来自源内容的识别信息。这种关系必须存在，因为在 Facebook 界面上，它直接链接到源。

谢谢

# ios - UITableView 的框架被重置为笔尖中的值

> ID：14612420
> 
> 赞同：3
> 
> 时间：2013-01-30T19:48:38.317
> 
> 标签：ios, cocoa-touch, xamarin.ios

我有一个 UITableView，我为其动态设置 Frame 以便将其调整为项目数。我这样做是为了让表格视图可以通过从手机顶部拖动来“滑动”下来。UITableView 在视图的 nib 中定义。

每当包含此滑动 UITableView 的视图消失时（如调用 viewDidDisappear），UITableView 的 Frame 就会重置为 nib 中的值（我已将其设置为 44，即静态页脚的大小）。

我的问题分为两部分：

1.  为什么框架会被重置，什么机制正在重置框架？
2.  我如何确保每当 Frame 重置为 nib 值时，我可以将 Frame 设置为我想要的大小？

作为背景，我已经用尽了所有可能的视图生命周期方法。

一个有趣的注意是我试图在 ViewDidAppear 中设置 Frame，它在重现我的“错误”时受到打击，并且我已经验证 Frame.Height 是方法结束时的所需值，尽管当引脚掉落时最后，Frame 高度*仍为*44。我点击的 tableView IBOutlet 不是视图中实际加载的那个吗？

```
 public override void ViewDidAppear (bool animated)
    {
        RetractMemoryTableAnimation(0);

        // Frame is correct after this line (Height > 44)
        // But the Frame in my view persists to a height of 44
        this.tableView.Frame = new RectangleF(this.tableView.Frame.Location.X, this.tableView.Frame.Location.Y,
                                              this.tableView.Frame.Size.Width, this.CalculatedTableViewHeightWithFooter);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:22:20.600

在编写自定义代码来设置 a的框架时，如果视图似乎正在自动调整大小`UIView`，请始终确保设置`AutoresizingMask`为。`UIAutoresizingMask.None`

# xcode - xCode 4.6 在工作区问题中搜索..？

> ID：14612421
> 
> 赞同：2
> 
> 时间：2013-01-30T19:48:45.110
> 
> 标签：xcode, xcode4.6

自从我升级到 4.6 后，我的全局搜索结果并没有返回搜索字符串的所有位置。例如：如果我搜索一个类的特定 @property 名称以查看它是从哪里引用的，我的结果只显示类本身中的那些字符串，所有其他引用都不会显示。

有什么改变吗？其他人可以看到这个吗？也许有索引的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T21:47:05.803

LMAO。事实证明这是一个用户错误。当您单击搜索栏左角的放大镜时，会出现一个带有选项的下拉菜单，您可以在其中指定设置为“符号定义”的搜索“样式”。不知怎的错过了。

# mysql - MySql如何最小化一行

> ID：14612424
> 
> 赞同：-1
> 
> 时间：2013-01-30T19:48:48.483
> 
> 标签：mysql

当使用 php 接近测量日期时，我将向我的客户发送一封电子邮件。某项测量有效期为一年，某项有效期为 3 年，等等……因此，一家公司的数据为一行。但我想写，他的测量有多少天有效。我希望你能理解我的问题。提前致谢！亚当

我有一个结构表：

```
CREATE TABLE IF NOT EXISTS `meresek` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,

  `COMP_ID` varchar(4) NOT NULL COMMENT 'What a company ID',

  `Comp_V` int(11) NOT NULL DEFAULT '1' COMMENT 'What size number of sites',

  `MERES_1` date DEFAULT NULL,
  `MERES_END_1` date DEFAULT NULL,
  `EV_MERES_2` date DEFAULT NULL,
  `MERES_END_2` date DEFAULT NULL,
  `MERES_3` date DEFAULT NULL,
  `MERES_END_3` date DEFAULT NULL,
  `MERES_4` date DEFAULT NULL,
  `MERES_END_4` date DEFAULT NULL,
  .
  .
  .
  .
  `MERES_END_8` date DEFAULT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `COMP_ID` (`COMP_ID`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=70;

INSERT INTO `meresek` ( `ID`, `COMP_ID`, `COMP_V`,`MERES_1`
  `MERES_END_1`,
  `EV_MERES_2`,
  `MERES_END_2`,
  `MERES_3`,
  `MERES_END_3`,
   .
   .
   .
   `MERES_END_8) VALUES

(1, 'X1', 1, NULL, NULL, '2011-03-07', '2011-03-31', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),

(2, 'X2', 1, NULL, NULL, '2010-12-19', '2019-12-31', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),

(3, 'Y11', 1, NULL, NULL, '2011-05-12', '2014-12-31', NULL, NULL, NULL, NULL, '2011-05-12', '2020-05-12', '2011-05-12', '2020-05-12', NULL, NULL, NULL, NULL),

(4, 'Y12', 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2012-02-02', '2013-02-02', '2012-02-02', '2013-02-02') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:41:45.737

选择最少（合并（`col_1,col_2....col_8`），合并（`col_2,col_1....col_8`），合并（`col_3,col_1....col_8`），合并（`col_4,col_1....col_8`），合并（`col_5,col_1....col_8`），合并（`col_6,col_1....col_8`），合并（`col_7,col_1....col_8`），合并（`col_8,col_1....col_1`））其中id ='35'

# symfony - 使用 symfony2 进行身份验证时未定义的方法“findOneBy”（根据文档）

> ID：14612426
> 
> 赞同：1
> 
> 时间：2013-01-30T19:48:56.613
> 
> 标签：symfony, login

我正在尝试从 symfony2 中的数据库验证标准登录。

我在这里关注了文档： http:
[//symfony.com/doc/current/book/security.html](http://symfony.com/doc/current/book/security.html)
和这里：
[http ://symfony.com/doc/current/cookbook/security/entity_provider.html](http://symfony.com/doc/current/cookbook/security/entity_provider.html)

我的安全文件：

```
security:
encoders:
    Acme\UserBundle\Entity\User:
        algorithm:        sha1
        encode_as_base64: false
        iterations:       1

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH ]

providers:
    administrators:
        entity: { class: RWLoginBundle:User, property: username }

firewalls:
    secured_area:
        pattern:    ^/
        anonymous: ~
        form_login: ~

access_control:
    - { path: ^/admin, roles: ROLE_ADMIN } 
```

我的路由文件：

```
login:
    pattern:   /
    defaults:  { _controller: RWLoginBundle:Default:login } 
login_check:
    pattern:   /login_check 
```

但是当我输入用户名和密码时，我得到了错误：

```
Fatal error: Call to undefined method RW\LoginBundle\Entity\User::findOneBy() in /var/www/rw/vendor/symfony/symfony/src/Symfony/Bridge/Doctrine/Security/User/EntityUserProvider.php on line 55 
```

我的登录页面是根据带有表单的文档制作的，并且那里有一个重定向输入，它转到一个确实存在的 url。

有没有人遇到过这样的事情？

**编辑：在下面添加实体**

```
namespace RW\LoginBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Security\Core\User\UserInterface;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * RW\LoginBundle\Entity\User
 *
 * @ORM\Table(name="users")
 * @ORM\Entity(repositoryClass="RW\LoginBundle\Entity\User")
 */
class User implements UserInterface, \Serializable 
```

# javascript - 启用 Firebug 时网站中断

> ID：14612427
> 
> 赞同：0
> 
> 时间：2013-01-30T19:48:58.083
> 
> 标签：javascript, html, import, firebug

我使用 Firebug 进行大部分的网络调试。在我正在开发的其中一个 Web 应用程序中，启用 Firebug 时应用程序会中断；似乎一些 JS 资源（主要是 jQuery）没有被加载。当我禁用 Firebug 时，该站点运行良好。关于 Firebug 如何干扰网站运行的任何想法，以及可以采取哪些措施来解决它？

# algorithm - 查找给定预购的树高

> ID：14612428
> 
> 赞同：0
> 
> 时间：2013-01-30T19:48:58.450
> 
> 标签：algorithm, tree, binary-tree, depth, preorder

给定完整二叉树的前序遍历，其中每个节点都标记为叶节点或内部节点，是否有一个好的算法来找到树的高度？例如，如果 N 代表一个内部节点，L 代表一个叶子，那么给定前序遍历 NLNNLLL，高度将为 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:41:21.133

好吧，我不禁为我们将 marti 留在评论中而感到难过。我认为他真的不知道从哪里开始，并且至少表明他已经考虑过这个问题。

我们对完全二叉树了解多少？每个节点要么是叶子，要么有两个孩子。

前序遍历递归地访问根，左子树，然后右子树。

想一想这个问题：在（完整二叉树的）前序遍历中的什么时候，我们知道我们已经用尽了一个子树？我们将访问它的根，然后访问两片叶子（如果是叶子，则只访问根）。

让我们制作一个特殊结构的堆栈：

```
struct StackNode{
   size_t count; //initialize to 0
   char nodeType; //'N' or 'L'
}; 
```

这个“StackNode”对象将使用“nodeType”变量跟踪我们在前序遍历中访问的节点类型，这应该很清楚。我们还有一个特殊的计数器“计数”，我们将其初始化为 0。

解决方案背后的想法是这样的：

*   每次遇到“N”时，创建一个 StackNode，并将其压入堆栈。
*   每次遇到“L”时，创建一个 StackNode，并将其压入堆栈
*   如果您压入堆栈的最后一个节点是“L”，则弹出最后一个节点，然后将 stack.top() 的计数加 1
*   如果 stack.top() 的计数为 2，则从堆栈中弹出顶部，然后将 stack.top() 的计数增加 1（重复直到堆栈为空或您已停止从堆栈中弹出）

每次将节点压入堆栈时，都可以检查树的当前高度。它是您的 stack-1 中的项目数（说明底部的项目是根）。

只要您跟踪到目前为止遇到的最大高度，您就会找到树的高度。

让我们来看看你的例子：`NLNNLLL`

* * *

堆栈最初是空的。

```
int maxHeight = -1; 
```

* * *

处理第一个字符：`N`

将一个节点压入堆栈：

堆栈：类型计数

*   N, 0

    最大高度 = 0；

* * *

处理下一个字符：`L`

将一个节点压入堆栈：

*   L, 0
*   N, 0

    最大高度 = 1；//（增加1）

最后处理的字符是叶子，所以弹出并递增：

堆：

*   N, 1

    最大高度 = 1；

* * *

处理下一个字符：`N`

将一个节点压入堆栈：

*   N, 0
*   N, 1

    最大高度 = 1；//不变

* * *

处理下一个字符：`N`

将一个节点压入堆栈：

*   N, 0
*   N, 0
*   N, 1

    最大高度 = 2；//（增加1）

* * *

处理下一个字符：`L`

将一个节点压入堆栈：

*   L, 0
*   N, 0
*   N, 0
*   N, 1

    最大高度 = 3；//递增1

最后一个节点是叶子，所以pop和increment

堆：

*   N, 1
*   N, 0
*   N, 1

    最大高度 = 3；//不变

* * *

处理下一个字符：`L`

将一个节点压入堆栈：

*   L, 0
*   N, 1
*   N, 0
*   N, 1

    最大高度 = 3；//不变

最后一个节点是叶子，所以弹出并递增：

*   N, 2
*   N, 0
*   N, 1

顶部节点的计数为 2，因此弹出并递增：

*   N, 1
*   N, 1

* * *

处理下一个节点：`L`

将一个节点压入堆栈：

*   L, 0
*   N, 1
*   N, 1

    最大高度 = 3；//不变

最后一个节点是叶子，所以弹出并递增：

*   N, 2
*   N, 1

顶部节点的计数为 2，因此弹出并递增：

*   N, 2

顶部节点的计数为 2，因此弹出并递增：

```
(empty stack), finished

maxHeight = 3; //the maximum height discovered during a preorder of a full binary tree 
```

# python - 如何使用 __getattr__ 函数处理和返回 Python 类中缺少的属性和函数？

> ID：14612442
> 
> 赞同：3
> 
> 时间：2013-01-30T19:49:58.080
> 
> 标签：python, getattr

在 Python 类上使用特殊方法来处理缺少的属性或函数相当容易`__getattr__`，但似乎不能同时处理两者。

考虑这个例子，它处理任何在类的其他地方没有明确定义的请求的属性......

```
class Props:
    def __getattr__(self, attr):
        return 'some_new_value'

>>> p = Props()
>>> p.prop                          # Property get handled
'some_new_value'

>>> p.func('an_arg', kw='keyword')  # Function call NOT handled
Traceback (most recent call last):
  File "<console>", line 1, in <module>
TypeError: 'str' object is not callable 
```

接下来，考虑这个例子，它处理在类的其他地方没有明确定义的任何函数调用......

```
class Funcs:
    def __getattr__(self, attr):
        def fn(*args, **kwargs):
            # Do something with the function name and any passed arguments or keywords
            print attr
            print args
            print kwargs
            return 
        return fn

>>> f = Funcs()
>>> f.prop                          # Property get NOT handled
<function fn at 0x10df23b90>

>>> f.func('an_arg', kw='keyword')  # Function call handled
func
('an_arg',)
{'kw': 'keyword'} 
```

问题是如何同时处理两种类型的缺失属性`__getattr__`？如何检测请求的属性是属性表示法还是带括号的方法表示法并分别返回值或函数？本质上，我想处理一些缺失的属性属性和一些缺失的函数属性，然后在所有其他情况下采用默认行为。

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:59:46.303

> 如何检测请求的属性是属性表示法还是带括号的方法表示法并分别返回值或函数？

你不能。您也无法判断请求的方法是实例、类还是静态方法等。您只能判断有人试图检索属性以进行读取访问。没有其他东西被传递到 getattribute 机器中，因此您的代码没有其他东西可用。

因此，您需要一些带外方法来知道是创建函数还是其他类型的值。这实际上很常见——您实际上可能正在代理一些其他具有值/功能区别的对象（想想*或*`ctypes`PyObjC），或者您可能有命名约定等。

但是，您总是可以返回一个可以使用任何一种方式的对象。例如，如果您的“默认行为”是返回属性是整数，或者返回整数的函数，您可以返回如下内容：

```
class Integerizer(object):
    def __init__(self, value):
        self.value = value
    def __int__(self):
        return self.value
    def __call__(self, *args, **kw):
        return self.value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:57:19.077

无法检测返回的属性是如何被使用的。*python 对象上的一切*都是属性，包括方法：

```
>>> class Foo(object):
...     def bar(self): print 'bar called'
...     spam='eggs'
... 
>>> Foo.bar
<unbound method Foo.bar>
>>> Foo.spam
'eggs' 
```

Python 首先查找属性（`bar`或`spam`），如果您打算*调用*它（添加括号），那么 Python 在查找属性*后*调用可调用对象：

```
>>> foo = Foo()
>>> fbar = foo.bar
>>> fbar()
'bar called' 
```

在上面的代码中，我将查找`bar`与调用分开`bar`。

由于没有区别，因此您无法检测`__getattr__`返回的属性将用于什么用途。

`__getattr__`每当正常属性访问失败时调用；在下面的例子`monty`中是在类上定义的，所以*没有*`__getattr__`被调用；它只需要and ：*`bar.eric``bar.john`*

 *```
>>> class Bar(object):
...     monty = 'python'
...     def __getattr__(self, name):
...         print 'Attribute access for {0}'.format(name)
...         if name == 'eric':
...             return 'idle'
...         raise AttributeError(name)
... 
>>> bar = Bar()
>>> bar.monty
'python'
>>> bar.eric
Attribute access for eric
'idle'
>>> bar.john
Attribute access for john
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 7, in __getattr__
AttributeError: john 
```

请注意，函数不是您可以调用（调用）的唯一对象；任何实现该`__call__`方法的自定义类都可以：

```
>>> class Baz(object):
...    def __call__(self, name):
...        print 'Baz sez: "Hello {0}!"'.format(name)
...
>>> baz = Baz()
>>> baz('John Cleese')
Baz sez: "Hello John Cleese!" 
```

您可以使用该返回对象`__getattr__`，可以在不同的上下文中调用和用作值。*

# c# - 调用线程无法访问该对象，因为不同的线程拥有它

> ID：14612443
> 
> 赞同：-2
> 
> 时间：2013-01-30T19:49:59.233
> 
> 标签：c#, wpf, busyindicator

在我的项目中，我有一个`busyindicator`并且我正在使用`ListObject`in`FirstMethod`和`SecondMethod`.

该程序给出以下错误：

> 调用线程无法访问该对象，因为不同的线程拥有它

我正在使用以下代码：

```
public static readonly DependencyProperty ListObjectProperty = 
    DependencyProperty.Register("ListObject", typeof(ObservableCollection<FileViewModel>), typeof(MyObjectViewModel), new PropertyMetadata(ChangeCallback));

public ObservableCollection<FileViewModel> ListObject
{
    get { return (ObservableCollection<FileViewModel>)GetValue(ListObjectProperty); }
    set { SetValue(ListObjectProperty, value); }
}

private void SelectedPath()
{
    NavigatePage(new Page2());              
    FirstMethod();
}

private void FilesCase()
{
    var t = new Task(() => this.ThreadFilesCase());

    t.ContinueWith(
        (o) =>
        {
            Dispatcher.BeginInvoke(new Action(() =>
            {
                IsBusy = false; NavigatePage(new Page3());
            }));
        });

    IsBusy = true;    
    t.Start();
}

private void ThreadFilesCase()
{
       SecondMethod();      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:04:56.610

您`Dispatcher.BeginInvoke`在`ContinueWith`代表内打电话。这意味着它正在后台工作线程上调用。使用从 ui 控件获得的 Dispatcher。或者使用在`SynchronizationContext`（正在）创建 ui 控件时使用的 。

示例：`myBusyIndicator.Dispatcher.Invoke(...)`, 而不是关闭`Dispatcher.Invoke(...)`

# bash - Bash 脚本手动运行，但在 crontab 上失败

> ID：14612444
> 
> 赞同：19
> 
> 时间：2013-01-30T19:49:59.240
> 
> 标签：bash, shell, cron

我是 shell 脚本的新手。我编写了一个shell脚本来对MySQL数据库进行增量备份。该脚本是可执行格式，手动执行时运行成功，但通过crontab执行时失败。

crontab 条目是这样的：

```
*/1 * * * * /home/db-backup/mysqlbackup.sh 
```

下面是shell脚本代码 -

```
#!/bin/sh
MyUSER="root"       # USERNAME
MyPASS="password"         # PASSWORD
MyHOST="localhost"  # Hostname
Password="" #Linux Password

MYSQL="$(which mysql)"
if [ -z "$MYSQL" ]; then
echo "Error: MYSQL not found"
exit 1
fi
MYSQLADMIN="$(which mysqladmin)"
if [ -z "$MYSQLADMIN" ]; then
    echo "Error: MYSQLADMIN not found"
    exit 1
fi
CHOWN="$(which chown)"
if [ -z "$CHOWN" ]; then
    echo "Error: CHOWN not found"
    exit 1
fi
CHMOD="$(which chmod)"
if [ -z "$CHMOD" ]; then
    echo "Error: CHMOD not found"
    exit 1
fi

GZIP="$(which gzip)"
if [ -z "$GZIP" ]; then
    echo "Error: GZIP not found"
    exit 1
fi
CP="$(which cp)"
if [ -z "$CP" ]; then
    echo "Error: CP not found"
    exit 1
fi
MV="$(which mv)"
if [ -z "$MV" ]; then
    echo "Error: MV not found"
    exit 1
fi
RM="$(which rm)"
if [ -z "$RM" ]; then
    echo "Error: RM not found"
    exit 1
fi
RSYNC="$(which rsync)"
if [ -z "$RSYNC" ]; then
    echo "Error: RSYNC not found"
    exit 1
fi

MYSQLBINLOG="$(which mysqlbinlog)"
if [ -z "$MYSQLBINLOG" ]; then
    echo "Error: MYSQLBINLOG not found"
    exit 1
fi
# Get data in dd-mm-yyyy format
NOW="$(date +"%d-%m-%Y-%T")"

DEST="/home/db-backup"
mkdir $DEST/Increment_backup.$NOW
LATEST=$DEST/Increment_backup.$NOW
$MYSQLADMIN -u$MyUSER -p$MyPASS flush-logs
newestlog=`ls -d /usr/local/mysql/data/mysql-bin.?????? | sed 's/^.*\.//' | sort -g | tail -n 1`
echo $newestlog
for file in `ls /usr/local/mysql/data/mysql-bin.??????`
do
        if [ "/usr/local/mysql/data/mysql-bin.$newestlog" != "$file" ]; then
     echo $file             
     $CP "$file" $LATEST         
        fi
done
for file1 in `ls $LATEST/mysql-bin.??????`
do
 $MYSQLBINLOG $file1>$file1.$NOW.sql 
 $GZIP -9 "$file1.$NOW.sql"     
 $RM "$file1"
done
$RSYNC -avz $LATEST /home/rsync-back 
```

*   首先，当安排在 crontab 上时，它没有显示任何错误。我怎样才能知道脚本是否正在运行？
*   其次，在 crontab 中执行 shell 脚本的正确方法是什么。一些博客建议更改环境变量。什么是最好的解决方案

当我做 $echo PATH 时，我得到了这个

```
/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/mysql/bin:/opt/android-sdk-linux/tools:/opt/android-sdk-linux/platform-tools:~/usr/lib/jvm/jdk-6/bin 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-30T19:54:48.397

问题可能是您在手动环境中的 $PATH 与运行 crontab 的环境不同。因此，`which`找不到您的可执行文件。要解决此问题，请首先在手动环境 ( ) 中打印您的路径`echo $PATH`，然后在您在 crontab 中运行的脚本顶部手动设置 PATH。或者只是通过完整路径引用程序。

`which`编辑：在所有调用之前，将其添加到脚本顶部附近：

```
export PATH="/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/mysql/bin:/opt/android-sdk-linux/tools:/opt/android-sdk-linux/platform-tools:~/usr/lib/jvm/jdk-6/bin" 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-01T21:10:20.440

另一种更通用的方法是让 cron 运行用户的 bash 登录进程。除了 PATH，这还将获取任何 LD_LIBRARY_PATH、LANG 设置、其他环境变量等。为此，请将您的 crontab 条目编码为：

```
34  12  * * *   bash -l /home/db-backup/mysqlbackup.sh 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-29T03:56:10.177

我的问题是我在 /etc/cron.d （Centos 7）中设置了 cron 作业。似乎这样做时我需要指定执行脚本的用户，这与在用户级别输入 cronjob 不同。

我所要做的就是

```
*/1 * * * * root perl /path/to/my/script.sh
*/5 * * * * root php /path/to/my/script.php 
```

其中“root”表示我以 root 身份运行脚本。还需要确保在文件顶部定义了以下内容。你的路径可能不同。如果您不确定，请尝试命令“which perl”、“which php”。

```
SHELL=/bin/bash
PATH=/sbin:/bin:/usr/sbin:/usr/bin 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-16T15:25:29.913

只需在脚本开头导入您的用户配置文件。

IE：

```
. /home/user/.profile 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-29T14:33:04.817

1.  在您的 crontab 文件中，您的脚本条目可以有

    ```
    * * * * * /bin/bash /path/to/your/script 
    ```

2.  确保在脚本中使用完整路径。我看过它，但我没有看到任何东西，但以防万一我错过了。

# php - 如何使用 MySQLi 查询其中包含撇号的列

> ID：14612448
> 
> 赞同：0
> 
> 时间：2013-01-30T19:50:18.267
> 
> 标签：php, mysql, mysqli

我正在使用 php MySQLi 类来比 MySQL 更安全，但我有一个问题。

我有一列数据，其中包含撇号。我正在将该列与一个没有撇号的变量进行比较，它是一个干净的字符串，来自我的 url。在我的旧代码中，我可以轻松地在 SQL 语句中执行 Replace(category_name, '''', '') ，而撇号不会成为一个因素。

如果我把它扔到 phpmyadmin 中，它会起作用：

```
SELECT DISTINCT merchant_category
FROM products
WHERE Replace( category_name, '''', '' ) = 'childrens accessories'
ORDER BY merchant_category 
```

但是对于 MySQLi，这是一个真正的问题，因为它不会解析它们：

```
 $params = array();
    $params[0] = "Replace(category_name, '''', '')";
    $params[1] = $this->db->escape($this->cleanDBValue(requestQS("cat1")));

    //print_r($params);

    $rs = $this->db->rawQuery("SELECT DISTINCT merchant_category FROM products WHERE ? = ? ORDER BY merchant_category ", $params); 
```

我试图与查询匹配的数据是：

```
children's accessories 
```

而且我没有得到任何结果。我怎样才能绕过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:24:12.980

您的代码中有几个缺陷。

1.  **您只能绑定数据文字**。不是标识符。不是Mysql函数。不是各种 SQL 部分。但仅限数据文字。
2.  你用旧代码做的方式很糟糕。您没有正确转义输入数据，而是“转义”了数据库中已有的数据。

所以，你必须摆脱这两个东西，让你的查询像

```
$param = str_replace('-',' ',$_GET['cat1']); //yes, I don't trust your functions
$sql = "SELECT DISTINCT merchant_category FROM products 
        WHERE category_name = ? ORDER BY merchant_category";
$rs = $this->db->rawQuery($sql, array($param)); 
```

如果它不起作用 - 调试它。但是你必须让它以这种方式工作。没有替换和东西。

**更新：**
我明白了。
您正在尝试将 URL slug 与类别名称进行匹配。
那是错误的方式。
将另一个字段添加到您的表中，包含来自 URL 的确切信息。
然后匹配这个。
否则你会一直遇到麻烦。

# android - Android 设备上的 HTML5 离线应用程序

> ID：14612451
> 
> 赞同：17
> 
> 时间：2013-01-30T19:50:23.850
> 
> 标签：android, html, caching, manifest, offline

这是关于 Android 设备上的 HTML5 离线应用程序。

我们遇到了一个问题，即在以下情况下，为支持脱机的 HTML5 应用程序（带有完整的缓存清单文件）添加书签时无法在 Android 浏览器上加载：

1.  在浏览器上为应用添加书签
2.  关闭所有无线连接
3.  完全关闭浏览器
4.  尝试从主屏幕启动书签

我们最终会收到“无法连接到互联网”消息。当保存到主屏幕和飞行模式时，该应用程序在 iOS 设备上运行良好。

是否有应该保存应用程序的特定方式，或者这是一个特定于 Android 的怪癖？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T23:51:35.447

我会检查并看到：

1.  MIME 类型确实是`text/cache-manifest`.
2.  您的缓存清单以 开头`CACHE MANIFEST`，此后您的网址要么是相对于清单的，要么是绝对网址。
3.  您的清单中没有任何损坏的链接或强制`NETWORK:`标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T21:54:14.343

因此，我在多个实例上遇到了 chrome和 android 的类似[问题。](https://stackoverflow.com/questions/12932685/page-disappears-from-cache-after-first-redirect-on-chrome)显然实现没有问题，因为我在 FF 上尝试过它并且效果很好，Safari 也是如此。我认为这是唯一引起的，当 chrome 运行时，数据正在 RAM 上获取网页的缓存。如果您关闭浏览器，并且 android 结束该过程，则会初始化一个新的 chrome 实例，并且您现有的应用程序数据将消失。我无法证实这一点，但似乎很可能是问题所在。

还要检查您的服务器是否配置为正确发送 MIME 类型：[如何设置您的服务器以发送正确的 MIME 类型](https://developer.mozilla.org/en/docs/Properly_Configuring_Server_MIME_Types)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T21:35:53.553

除了 Ben Max Rubinstein 和 Compid 的回答，如果您的应用程序 url 是这样的：`example.com/myapp`您需要添加以下正斜杠，如下所示：`example.com/myapp/`.

当您在线时，服务器会自动重定向您，但如果您离线，显然这不会发生。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-12T12:57:01.773

我遇到的是`.manifest`Apache`mime.types`配置中的文件被正确设置为`text/cache-manifest`，然后下面的几行被覆盖为`application/x-ms-application`（为了与 MS 的 ClickOnce 兼容）。为了解决这个问题，我采用了不同的文件名结尾，即`.cachemanifest`正确配置了它的 mime 类型，重新启动了 Apache，将清单文件重命名为`cache.cachemanifest`，将我的 <html> 清单属性更改为指向该文件，然后我终于能够缓存我的Android 上的 web 应用程序（在桌面浏览器中没有任何问题，显然不关心缓存清单文件的 mime 类型）。希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T03:33:52.850

缓存清单的文件名是什么？我听说扩展可能会影响 android 的行为。确保您的文件以`.manifest`

此外，确保您的服务器正确地为清单文件提供 MIME 类型，即`text/cache-manifest`

# python - python unittest - 即使没有任何测试也会失败

> ID：14612452
> 
> 赞同：0
> 
> 时间：2013-01-30T19:50:26.490
> 
> 标签：python, unit-testing

今天我写了一个测试，无论如何我都无法通过测试。

然后我发现我得到 SystemExit: False 即使没有任何测试用例：

```
>>> ================================ RESTART ================================
>>> import unittest
>>> unittest.main()

----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK

Traceback (most recent call last):
  File "<pyshell#123>", line 1, in <module>
    unittest.main()
  File "C:\Python27x64\Lib\unittest\main.py", line 95, in __init__
    self.runTests()
  File "C:\Python27x64\Lib\unittest\main.py", line 231, in runTests
    sys.exit(not self.result.wasSuccessful())
SystemExit: False 
```

这种行为正常吗？还：

```
>>> class aTest(unittest.TestCase):
    def test_123(self):
        self.assertEqual(2, 1+1)

>>> unittest.main()
.
----------------------------------------------------------------------
Ran 1 test in 0.011s

OK

Traceback (most recent call last):
  File "<pyshell#133>", line 1, in <module>
    unittest.main()
  File "C:\Python27x64\Lib\unittest\main.py", line 95, in __init__
    self.runTests()
  File "C:\Python27x64\Lib\unittest\main.py", line 231, in runTests
    sys.exit(not self.result.wasSuccessful())
SystemExit: False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:46:38.733

您正在尝试在交互式 shell 中运行单元测试，这可能不是 unittest 模块的用途。特别是，当 unittest 完成时，它会显式地尝试退出“程序”，但是当您从交互式 shell 运行它时，它会失败。

您是否尝试将代码放入文件中并运行它（我从 .py 文件中尝试了您的代码，它似乎可以正常工作而不会引发错误）。

# java - 如何使用 Java 获取 XML id 值？

> ID：14612453
> 
> 赞同：2
> 
> 时间：2013-01-30T19:50:26.207
> 
> 标签：java, xml, servlets

对于 XML 关键字搜索项目，用户可以搜索 XML 代码中的任何值：

```
<?xml version="1.0" encoding="UTF-8"?>
<company>
<staff id="1001">
    <firstname>sachin</firstname>
    <lastname>tendulkar</lastname>
    <nickname>TON</nickname>
    <salary>100000</salary>
</staff>
<staff id="2001">
    <firstname>MS</firstname>
    <lastname>Dhoni</lastname>
    <nickname>MSD</nickname>
    <salary>200000</salary>
</staff>    
<staff id="3001">
    <firstname>yuraj</firstname>
    <lastname>singh</lastname>
    <nickname>yuvi</nickname>
    <salary>200000</salary>
</staff>
</company> 
```

如果用户搜索`20000`，结果将在 ID 中可用，`1001`因此`2001`输出应如下所示：

```
 ms 
  dhoni
   msd
  200000

  yuraj
 singh
  yuvi
 20000 
```

我想在Java中做到这一点。这是我到目前为止所写的：

```
package a;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.w3c.dom.Node;
import org.w3c.dom.Element;
import java.io.File;

public class TestJava
{

    public static void TestJava(String s) {

        try {

            File fXmlFile = new File("E:/xml/xml/src/a/test.xml");
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(fXmlFile);

            doc.getDocumentElement().normalize();

            System.out.println("Root element :" + doc.getDocumentElement().getNodeName());

            NodeList nList = doc.getElementsByTagName("staff");

            System.out.println("----------------------------");

            for (int temp = 0; temp < nList.getLength(); temp++) {

                Node nNode = nList.item(temp);

                System.out.println("\nCurrent Element :" + nNode.getNodeName());

                if (nNode.getNodeType() == Node.ELEMENT_NODE) {

                    Element eElement = (Element) nNode;
                    if(eElement.getElementsByTagName("salary").item(0).getTextContent().equals(s))
                    {
                        System.out.println("Staff id : " + eElement.getAttribute("id"));
                        System.out.println("First Name : " + eElement.getElementsByTagName("firstname").item(0).getTextContent());
                        System.out.println("Last Name : " + eElement.getElementsByTagName("lastname").item(0).getTextContent());
                        System.out.println("Nick Name : " + eElement.getElementsByTagName("nickname").item(0).getTextContent());
                        System.out.println("Salary : " + eElement.getElementsByTagName("salary").item(0).getTextContent());
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:48:19.857

这看起来像是 XPath 查询的工作！

```
 File fXmlFile = new File("test.xml");
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(fXmlFile);

    XPathFactory factory = XPathFactory.newInstance();
    XPath xpath = factory.newXPath();

    // This XPath query will give you a list of only those <staff> elements
    // which contain a <salary>200000</salary> element
    XPathExpression expr = xpath.compile("/company/staff/salary[text()=\"200000\"]/..");
    NodeList result = (NodeList)expr.evaluate(doc, XPathConstants.NODESET);

    NodeList nodes = (NodeList) result;
    for (int i = 0; i < nodes.getLength(); i++) {
        Element eElement = (Element) nodes.item(i);
        String id = eElement.getAttribute("id");
        System.out.println("Staff id : " + eElement.getAttribute("id"));
        System.out.println("First Name : " + eElement.getElementsByTagName("firstname").item(0).getTextContent());
        System.out.println("Last Name : " + eElement.getElementsByTagName("lastname").item(0).getTextContent());
        System.out.println("Nick Name : " + eElement.getElementsByTagName("nickname").item(0).getTextContent());
        System.out.println("Salary : " + eElement.getElementsByTagName("salary").item(0).getTextContent());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:42:03.867

这可能不是最好和最短的方法，但你可以这样做： -

1.  创建一个 Player 类并将名字、姓氏、昵称、薪水设置为变量并生成 getter/setter。
2.  读取 xml 文件并使用 Jaxb 将您的 xml 转换为对象。一个很好的开始[链接](http://www.mkyong.com/java/jaxb-hello-world-example/)
3.  现在使用您现在在这些对象中搜索的对象

    ```
     object.getActive().compareTo(salary)//compare the player object salary with desires salary in a loop 
    ```

我希望这有帮助！

# json - 无法在 Pentaho 数据集成中处理具有多条记录的 JSON 格式文件

> ID：14612457
> 
> 赞同：0
> 
> 时间：2013-01-30T19:50:42.167
> 
> 标签：json, pentaho

我在获取 JSON INPUT 步骤以处理单个文件中的多个 JSON 记录时遇到问题。如果文件中只有一行：

```
{"unit_record":[{"TERM":"201220","INST_METHOD":"TR"}]} 
```

然后它处理得很好。但是，只要文件中有多个 JSON 记录，JSON INPUT 步骤就会显示没有行：

```
{"unit_record":[{"TERM":"201220","INST_METHOD":"TR"}]}
{"unit_record":[{"TERM":"200910","INST_METHOD":"IN"}]} 
```

也许我的正则表达式不正确？这是我在 JSON INPUT 步骤中为每列的路径提供的内容：

```
$.unit_record[*.TERM]
$.unit_record[*.INSTRUCTIONAL_METHOD] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:32:57.700

你必须像这样制作 JSON 数组

[{"unit_record":[{"TERM":"201220","INST_METHOD":"TR"}]}, {"unit_record":[{"TERM":"200910","INST_METHOD":"IN"} ]}]

现在，如果您尝试使用 JSON INPUT STEP 它将正常工作

# unix - 使用 sed 根据缺失的信息删除行

> ID：14612459
> 
> 赞同：0
> 
> 时间：2013-01-30T19:50:47.520
> 
> 标签：unix, sed, design-patterns, data-management

我有一个非常具体的数据集，但相当不方便，如下所示：

```
data <- textConnection("rs1050,15,234323,C,T
1,7329,0.1147,-0.0024,0.0048
1,9810,0.6399,0.001174,0.006095
1,16550,0.648541108,0.0061,0.0070
rs7895,NA,NA,A,C
1,997,NA,NA,0.0732
1,9810,0.0339,-0.016131,0.021611
1,16550,0.32739678,0.0014,0.0053
rs995,18,100336,C,T
1,7385,0.2692,-0.0063,0.0035
1,9810,0.5397,-0.002697,0.006012
1,16550,0.651147483,-0.0045,0.0053")
test_data <- read.csv(data, header = FALSE, sep = ",") 
```

如果包含`rs####`包含的行`NA`（在一列或多列中），则需要将其删除。这本身没有问题，但在这种情况下，该行下方的三行也需要删除（无论这些行中是否存在所有数据）。

因此，在上述数据的情况下，将删除第 5-8 行。

任何解决方案都会很棒，但到目前为止我的努力都是基于 sed。像这样的东西？

```
sed -i '/rs*\t*\tNA\tNA\t*/~1-3d' test_data

sed -i '/rs*\t*\tNA\tNA\t*/,+3d' test_data 
```

我觉得我很接近，任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:42:47.297

这应该没问题，除非您的实际数据经过培训`")`......

```
sed  '/^rs.*NA/,+3d' test_data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:04:13.557

```
sed '/^rs[0-9]+\tNA\tNA\t/,+3d' <input_data >output_data 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:12:31.373

强制替代使用`awk`：

```
awk '/^rs.*NA/ { output = 0; } /^rs/ && !/NA/ { output = 1; } output { print }' 
```

可能会优化得更好一些，但是对于读者来说，这是众所周知的练习......

这包含三个部分 - 如果一行以`rs`和 contains开头`NA`，它将关闭`output`变量。如果一行以 开头`rs`且不包含`NA`，它将`output`重新打开。然后，如果`output`当前打开，它会打印该行，无论它是否包含`rs`或`NA`。

# jquery - 如何删除 css 溢出：隐藏的 jquery 对话框

> ID：14612460
> 
> 赞同：11
> 
> 时间：2013-01-30T19:50:47.140
> 
> 标签：jquery, html, css

我想添加一个搜索输入并将其重叠在 jQuery 对话框的标题栏上，但我的问题是：

*   我无法删除此特定 jQuery 对话框的 css 溢出属性
*   标题栏始终位于我的输入搜索框的顶部。

我也试过这个：

```
 $('div#viewVoters').attr('style','overflow:visible');
 $('#viewVoters').css('overflow','');
 $('#viewVoters').remove('style'); 
```

任何想法如何删除 css 属性或任何想法如何添加搜索输入？

```
<div id="viewVoters" style="width: auto; min-height: 95px; height: auto; overflow: hidden;" class="ui-dialog-content ui-widget-content" scrolltop="0" scrollleft="0">  
</div> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T19:54:33.150

只需在您的 CSS 中覆盖它：

```
#viewVoters {
    overflow: auto !important;  /* or 'visible' whatever */
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-30T21:02:20.187

```
$('#viewVoters').css('overflow','visible'); 
```

这肯定会起作用，而不是

```
$('#viewVoters').css('overflow',''); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T20:16:21.903

是的，比在生产站点中使用 !important 更好地获得特异性。

请记住，一个 ID 高于 4 个类和一个元素...'#MyID' 比 '.class1 .class2 .class3 .class4 p' 强，因此您可能需要查看父母以查看其他 ID 的位置。

# javascript - 比较日期 Java Script

> ID：14612465
> 
> 赞同：1
> 
> 时间：2013-01-30T19:51:01.863
> 
> 标签：javascript, asp.net

我有以下情况，我正在努力编写代码。

我有一个估价日期，它是用户从日历弹出窗口中选择的字符串。我需要做的是获取该日期并将其传递给一个函数，该函数根据该日期的值计算出第二个日期。如果第一个日期距离该月的第一天超过 7 天，则使用该月的第一天，否则使用该月的最后一天。这需要在客户端发生，因为这个日期需要在他们选择第一个日期后显示。

到目前为止，我有以下内容：

```
Function CompareDate()
{ var date1 = document.getElementById("textbox1");
var x = new date();
var year = x.getYear();
var day = x.getDay();
var thisMonthFirstDay = new Date(year, month,1)
var thisMonthLastDate = ....
var 1day = 1000*60*60*24
var date1_ms = recdate
var date2ms =  thisMonthFirstDay.gettime()
if(Math.round(difference_ms/1day) > 7
{var textbox = document,getelementbyid("textbox2");
textbox.value = texbox.value + thisMonthLastDate 

}
else
{
textbox.value = texbox.value + thisMonthFirstDay }
} 
```

任何关于如何做到这一点的例子都会受到极大的欢迎。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:03:03.537

getDate() 会给你一个月中的哪一天（例如 18），所以 if (getDate() <= 7) { outputDate = 1; 如果您在为 else 语句获取每个月的最后一天时遇到问题，我通常使用具有硬编码值的 12 容量数组，如果 (year % 4 == 0) 则将 1 添加到二月。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:40:06.007

在 fiddler 站点上找到 parseDate() 函数后，我设法解决了这个问题。这使我可以将日期从这种格式（2013 年 1 月 31 日）转换为日期，然后我可以使用 getDay(function) 来查看日期是否 > 7。从那里很容易！

感谢以上建议。

# ssrs-2008 - 我有一个隐藏参数，但我想给它一个值

> ID：14612467
> 
> 赞同：0
> 
> 时间：2013-01-30T19:51:09.080
> 
> 标签：ssrs-2008, reporting, reporting-services

我在 SSRS 中有一个参数设置为隐藏。我想将它发送到一个存储过程，但我只想在它是默认的情况下使用它，如果不是，那么我不想使用它。所以，我有一个参数“DateBeginMod”，如果用户想要修改类型，我将使用它作为默认值。如果用户不想修改类型，那么我将使用已经存在的另一个日期“DateBegin”。我现在才这样做是因为他们想要订阅。我只是创建“DateBeginMod”参数，但我只会在订阅时使用它。在存储过程中，我将检查“修改”或“未修改”，如果是，则使用 DateBeginMod。所以我只希望 DateBeginMod 始终等于“DateBegin”，除非它是订阅，否则它将是不同的默认值。有道理我希望

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T06:04:05.287

`DateBeginMod`假设用户应该选择一种方式（从实际报告中），您可以使用用户的选择（选择的值）根据用户的选择使用相关参数（或）重新呈现您的报告`DateBegin`。

在我个人看来 - 假设您的参数是实际日期，我会使用带有`IIF`表达式的单个参数来检查用户的选择并相应地设置日期。

# c# - TPL 数据流如何阻止下游获取源生成的数据？

> ID：14612468
> 
> 赞同：8
> 
> 时间：2013-01-30T19:51:16.460
> 
> 标签：c#, .net, task-parallel-library, tpl-dataflow

我正在使用 TPL 数据流处理图像。我收到一个处理请求，从流中读取图像，应用几个转换，然后将生成的图像写入另一个流：

```
Request -> Stream -> Image -> Image ... -> Stream 
```

为此，我使用了这些块：

```
BufferBlock<Request>
TransformBlock<Request,Stream>
TransformBlock<Stream,Image>
TransformBlock<Image,Image>
TransformBlock<Image,Image>
...
writerBlock = new ActionBlock<Image> 
```

问题是最初`Request`的内容包含创建结果所需的一些数据`Stream`以及我当时需要的一些附加信息。我是否必须将原始`Request`（或其他一些上下文对象）向下传递`writerBlock`到所有其他块，如下所示：

```
TransformBlock<Request,Tuple<Request,Stream>>
TransformBlock<Tuple<Request,Stream>,Tuple<Request,Image>>
TransformBlock<Tuple<Request,Image>,Tuple<Request,Image>>
... 
```

（这很丑陋），或者有没有办法将第一个块链接到最后一个块（或者概括地说，链接到需要额外数据的块）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T20:20:53.353

是的，您几乎需要按照您的描述进行操作，将附加数据从每个块传递到下一个块。

但是使用几个辅助方法，您可以使这变得更简单：

```
public static IPropagatorBlock<TInput, Tuple<TOutput, TInput>>
    CreateExtendedSource<TInput, TOutput>(Func<TInput, TOutput> transform)
{
    return new TransformBlock<TInput, Tuple<TOutput, TInput>>(
        input => Tuple.Create(transform(input), input));
}

public static IPropagatorBlock<Tuple<TInput, TExtension>, Tuple<TOutput, TExtension>>
    CreateExtendedTransform<TInput, TOutput, TExtension>(Func<TInput, TOutput> transform)
{
    return new TransformBlock<Tuple<TInput, TExtension>, Tuple<TOutput, TExtension>>(
        tuple => Tuple.Create(transform(tuple.Item1), tuple.Item2));
} 
```

签名看起来令人生畏，但实际上并没有那么糟糕。

此外，您可能希望添加将选项传递给已创建块的重载，或采用异步委托的重载。

例如，如果您想使用单独的块对数字执行一些操作，同时传递原始数字，您可以执行以下操作：

```
var source = new BufferBlock<int>();
var divided = CreateExtendedSource<int, double>(i => i / 2.0);
var formatted = CreateExtendedTransform<double, string, int>(d => d.ToString("0.0"));
var writer = new ActionBlock<Tuple<string, int>>(tuple => Console.WriteLine(tuple));

source.LinkTo(divided);
divided.LinkTo(formatted);
formatted.LinkTo(writer);

for (int i = 0; i < 10; i++)
    source.Post(i); 
```

如您所见，您的 lambdas（除了最后一个）仅处理“当前”值（或`int`，取决于管道的阶段），“原始”值（always ）是自动传递的。在任何时候，您都可以使用使用普通构造函数创建的块来访问这两个值（如示例中的 final ）。`double``string``int``ActionBlock`

（这`BufferBlock`实际上不是必需的，但我添加它以更接近您的设计。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-17T18:21:12.270

由于我才刚刚开始使用 TPL Dataflow，因此我可能会不知所措。但我相信你可以使用 a`BroadcastBlock`作为你的源和你的第一个目标之间的中介来实现这一点。

`BroadcastBlock`可以将消息提供给许多目标，因此您可以使用它来提供给您的目标，**以及**`JoinBlock`最后将结果与原始消息合并的a 。

```
source -> Broadcast ->-----------------------------------------> JoinBlock <source, result>
                    -> Transformation1 -> Transformation 'n'  -> 
```

例如：

```
var source = new BufferBlock<int>();
var transformation =  new TransformBlock<int, int>(i => i * 100);

var broadCast = new BroadcastBlock<int>(null);
source.LinkTo(broadCast);
broadCast.LinkTo(transformation);

var jb = new JoinBlock<int, int>();
broadCast.LinkTo(jb.Target1);
transformation.LinkTo(jb.Target2);

jb.LinkTo(new ActionBlock<Tuple<int, int>>(
          c => Console.WriteLine("Source:{0}, Target Result: {1}", c.Item1, c.Item2)));

source.Post(1);
source.Post(2);

source.Complete(); 
```

产量...

> 来源：1，目标结果：100
> 
> 来源：2，目标结果：200

我只是不太确定它在异步环境中的行为方式。

# javascript - JavaScript：在给定子类的情况下找到父 div

> ID：14612473
> 
> 赞同：0
> 
> 时间：2013-01-30T19:51:48.880
> 
> 标签：javascript, jquery

我的代码看起来像这样

```
<div id=resultsdiv >
<div id=xxxx class=container>
<a> class=results </a>
<a> class=results </a>
<div id=zzzz class=default>
<p> some default data </p>
</div>
</div>
</div> 
```

我有一个名为“仅默认”的按钮，当我单击该按钮时，应隐藏所有结果类元素，并且只应显示默认类 div，如果任何容器 div 没有任何默认类 div，它也应该被隐藏，一旦我再次单击按钮，整个事情应该被反转这里我的内部 div 是动态创建的，所以我不知道它们的 ID 是什么，所以有没有办法实现我正在寻找的东西只使用类名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:55:49.400

如果您可以使用 jQuery 解决方案，那么代码如下：

```
$("#default_only_button_id").on("click", function() {
    $(".container div:not(.default)").toggle();

    if($(".container .default").length == 0) {
        $(".container").toggle();
    }
}); 
```

编辑：

根据@ckarmann 建议更正

编辑2：

我实际上并没有测试编辑后的代码，但它应该可以工作；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:57:38.213

在 JavaScript 中使用：

```
document.getElementsByClassName(className) 
```

阅读更多关于：[https ://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)

在 jQuery 中使用：CSS 类选择器`$('.results').hide();` 在哪里，您可以在以下位置阅读更多内容： [http ://www.w3schools.com/jquery/sel_class.asp](http://www.w3schools.com/jquery/sel_class.asp)`.results`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:15:26.960

`getElementsByClassName`旧浏览器（尤其是 IE8）不支持。如果您的目标受众是这样的受众，您可能会考虑为纯 JS 路线提供更多类似的东西：

```
var x = document.getElementById("resultsdiv").getElementsByTagName("div");
for( var i = 0; i < x.length; i++)
    if(x[i].className == "results") //check other className's as desired
        x[i].style.display = "none"; 
```

您还拥有`parentNode`导航 DOM 等工具，请参见[此处](http://reference.sitepoint.com/javascript/Node/parentNode)。

请注意，即使使用这种方法，仍然可能存在一些其他跨浏览器问题。例如，包含多个以空格分隔的类而不是单个值的类属性。像 jQuery 这样的框架很有帮助的原因之一。

# ios - 如何在 Objective-C 中引用嵌套的 JSON 键

> ID：14612474
> 
> 赞同：1
> 
> 时间：2013-01-30T19:51:54.223
> 
> 标签：ios, objective-c, json

我正在尝试使用 Json 和 ObjectForKey 引用 Twitter 用户名

推特 JSON 示例

```
source = web;
user =         {
        "contributors_enabled" = 0;
        "created_at" = "Tue Mar 09 11:36:02 +0000 2010";
        "default_profile" = 0;
        "default_profile_image" = 0;
        description = "Welcome to the Official Twitter page for Tottenham Hotspur Football Club, where you can get your official Club news, competitions and more!";
        "favourites_count" = 97;
        "follow_request_sent" = "<null>";
        "followers_count" = 360893;
        following = 1;
        "friends_count" = 80;
        "geo_enabled" = 0;
        id = 121402638;
        "id_str" = 121402638;
        "is_translator" = 0;
        lang = en;
        "listed_count" = 3514;
        location = "Tottenham, London, England";
        name = "Tottenham Hotspur";
} 
```

现在我想在用户中使用键名，但不知道如何引用它。我知道我是否想使用我可以使用的来源

```
objectForKey:@"source" 
```

但不知道为 user:name 写什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T20:10:40.520

为了教育起见，另一种选择是使用通过`valueForKeyPath:`.

根据[键值编码基础](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/BasicPrinciples.html#//apple_ref/doc/uid/20002170)，通过分隔句号并逐步`valueForKeyPath:`调用每个成员来分解提供的路径。`valueForKey:`因此，例如以下是等价的：

```
[obj valueForKeyPath:@"ted.jefferson"]
[[obj valueForKey:@"ted"] valueForKey:@"jefferson"] 
```

此外，除非您添加了访问元数据而不是内容的方法，否则直接`NSDictionary`实现其调用。因此，在这种情况下，如果您使用的是字符串键，那么用一个替换另一个是安全的。[`valueForKey:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/valueForKey%3a)`objectForKey:``@`

因此，做你想做的最简单的方法是：

```
[obj valueForKeyPath:@"user.name"] 
```

# java - Android onClick start 的两个动画，应该只启动一个

> ID：14612477
> 
> 赞同：0
> 
> 时间：2013-01-30T19:52:00.860
> 
> 标签：java, android

根据我首先单击的动画，第二个动画将始终触发第一个动画。我不知道我做错了什么。

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.TranslateAnimation;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;

public class Test extends Activity {
    ImageView img_left;
    ImageView img_right;
    Button left;
    Button right;
    TranslateAnimation moveup;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test);

        moveup = new TranslateAnimation(0, 0, 0, -900);
        moveup.setDuration(2000);
        moveup.setFillAfter(true);
        left = (Button) findViewById(R.id.left);
        right = (Button) findViewById(R.id.right);
        img_left = (ImageView) findViewById(R.id.image_left);
        img_right = (ImageView) findViewById(R.id.image_right);
        right.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                img_right.startAnimation(moveup);
                Toast.makeText(getApplicationContext(), "right", Toast.LENGTH_LONG).show();
            }

        });

        left.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                img_left.startAnimation(moveup);
                Toast.makeText(getApplicationContext(), "left", Toast.LENGTH_LONG).show();
            }

        });

    }

} 
```

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffffff"
    tools:context=".First" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="120dp"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" >

        <Button
            android:id="@+id/left"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#0000EE"
            android:text="" />

        <Button
            android:id="@+id/right"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#0000EE"
            android:text="" />
    </LinearLayout>

    <ImageView
        android:id="@+id/image_left"
        android:layout_width="200dp"
        android:layout_height="200dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:src="@drawable/cue1" />

    <ImageView
        android:id="@+id/image_right"
        android:layout_width="200dp"
        android:layout_height="200dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:src="@drawable/cue2" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:11:47.477

创建两个`Animation`具有相同属性的不同对象，一个用于左侧，一个用于右侧，或者`setAnimation(null)`在启动之前调用另一个视图。换句话说：

```
 right.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            img_left.setAnimation(null);
            img_right.startAnimation(moveup);
            Toast.makeText(getApplicationContext(), "right", Toast.LENGTH_LONG).show();
        }

    });

    left.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            img_right.setAnimation(null);
            img_left.startAnimation(moveup);
            Toast.makeText(getApplicationContext(), "left", Toast.LENGTH_LONG).show();
        }

    }); 
```

`Animation``setAnimation()`对象在调用或时附加到它们的视图`startAnimation()`。通过启动附加到同一个`Animation`实例的两个视图，动画有可能在运行时影响两个视图的绘制。视图仅在无效时才关注动画的当前状态，因此这并不一定意味着它们将始终一起动画。但是，如果您的代码`ImageView`在运行时遇到两个实例都无效的情况`Animation`，它们都会响应翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:12:32.233

尝试使用 >>`new View.OnClickListener()`代替`new OnClickListener()`

# lwjgl - LWJGL 全屏慢（呃）

> ID：14612478
> 
> 赞同：0
> 
> 时间：2013-01-30T19:52:02.537
> 
> 标签：lwjgl

我注意到带有 LWJGL 的全屏模式会占用大量资源。我用我的分析器查看了它，发现 Display.update 需要相当多的时间。有解决方案吗？这是自然现象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-25T14:22:38.240

`Display.update`是包含与 OpenGL 通信的所有管道逻辑的主要方法，因此从本质上讲，它将成为应用程序的最大功能，`Game.doLogic`例如。因为它包含所有 OpenGL 通信，所以它受到 OpenGL 的严重影响，而 OpenGL 反过来又会影响硬件，显然窗口越大，它必须绘制的像素越多，除其他外，因此使帧/渲染时间更长，最终影响`Display.update`. 所以是的，帧的分辨率越大，它花费的时间越长是很自然的。

究竟还有多少“资源”？“资源”是否意味着硬件或功能计时或内存使用？我看不出有太多理由`Display.update`占用更大的框架尺寸的内存。

# jquery - jQuery Validate Plugin 无效使输入消失

> ID：14612483
> 
> 赞同：0
> 
> 时间：2013-01-30T19:52:26.393
> 
> 标签：jquery, jquery-validate

我有一个简单的表格，需要确认电子邮件，如果没有错误，它会很好用。但是，如果我提交错误 jquery 验证插件正在添加 display:none 到确认电子邮件输入。它不会添加无效的类，不确定发生了什么。

JS：

```
$("#customer-info").validate({
                         调试：真，
                         错误元素：“”，
                         提交处理程序：函数（表单）{
                             //TODO需要一个处理图像
                             $.post(form.action, $(form).serialize(), function(result) {
                                 如果（结果 > 0）{
                                         // 做一些事情
                                     }
                             },"json")
                             返回假；
                         }
                });

```

html:

 `````
<form id="customer-info">
    <label for="customer-name">Name</label>
        <input type="text" id="customer-name" name="customer-name" placeholder="first last name" class="required" /><br />
        <label for="customer-email">Email</label>
        <input type="text" id="customer-email" name="customer-email" placeholder="email@gmail.com" class="required email" /><br />
        <label for="confirm-email">Confirm Email</label>
        <input type="text" id="confirm-email" name="confirm-email" placeholder="email@gmail.com" class="required email" equalTo="#customer-email" /><br />
        <label for="notes">Notes</label>
        <textarea id="notes" name="notes" placeholder="Any additional details or changes."></textarea><br />
        <center><input type="submit" value="Go" class="btn-go" /></center>
</form> 
````  `[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:27:01.963

`debug: true`当我删除and时，它似乎工作正常`errorElement: ''`。

当您定义[`errorElement`](http://docs.jquery.com/Plugins/Validation/validate#toptions)为`''`（无）时，您会破坏它。

默认情况下，它是[`errorElement: 'label'`](http://docs.jquery.com/Plugins/Validation/validate#toptions).

**工作演示：http: [//jsfiddle.net/vHKha/](http://jsfiddle.net/vHKha/)**

```
$(document).ready(function () {
    $("#customer-info").validate({
        submitHandler: function (form) {
            //TODO need a processing image
            $.post(form.action, $(form).serialize(), function(result) {
                if(result > 0){
                    // do some stuff
                }
            },"json")
            return false;
        }
    });
}); 
```

**旁注：** 您可能还想验证您的 HTML。 `<center></center>`已被弃用多年。``

# c# - Azure 中的“数据库数量”是什么意思？

> ID：14612485
> 
> 赞同：1
> 
> 时间：2013-01-30T19:52:39.623
> 
> 标签：c#, azure, azure-sql-database

在 Azure 定价计算器中，您可以配置数据库的数量。Azure SQL 存储的成本与数据库的数量呈线性关系。

我不清楚什么，当他们提到数据库的数量时计算的是什么？

*   `connection strings`我在解决方案中定义的数量？
*   我在数据库中创建的实际数据库数量对应于一个`connection string`？

举个例子：我有一个多租户 Web 应用程序。我为每个租户创建一个新数据库，但将数据库存储在我通过 1 个连接字符串引用的数据库中。

```
public class ApplicationContext : DbContext, IDbContext
{
    public DbSet<Tenant> Tenants { get; set; }
    public DbSet<User> Users { get; set; }

    public ApplicationContext(string tenantName) : base(tenantName)
    {
    }

    public new IDbSet<TEntity> Set<TEntity>() where TEntity : class
    {
        return base.Set<TEntity>();
    }
} 
```

我将具有以下配置的 webapp 发布到我的 Azure 数据库：

```
Server=tcp:gd5ydgrwa0.database.windows.net,1433;Database=xxx;User ID=xxx;Password=xxx;Trusted_Connection=False;Encrypt=True;Connection Timeout=30; 
```

我在他们的文档中找不到任何地方。非常感谢您的帮助。如果 Azure 按租户向我们收取数据库费用，我们需要重新考虑我们的数据库设计。

如果我有 10 个客户，我将有 10 个数据库。**Azure 会向我收取 10 个数据库的费用吗？还是仅针对我配置的 1？**

1 个数据库

![在此处输入图像描述](../Images/d22366deb886f9fe6a82de61f5c41934.png)

10 个数据库 ![在此处输入图像描述](../Images/01073d297c8c0cd40f28b70784341f80.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:39:09.187

它参考数据库的数量，如您的连接字符串：Database=xxx。

如果您租户的所有“数据库”都存储在 xxx 中，则您需要为 1 个数据库付费。但是，如果您更改连接字符串以便使用 xxx1、xxx2、...、xxxN，您将需要为 N 个数据库付费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:36:34.423

当您写“我在数据库中创建的与一个连接字符串相对应的数据库的实际数量？”时，您似乎指的是单个数据库中单独/命名模式的数量。这是[http://msdn.microsoft.com/en-us/library/aa479086.aspx](http://msdn.microsoft.com/en-us/library/aa479086.aspx)中讨论的“共享数据库，单独模式”模式。您只需为您使用的实际数据库数量付费，而不是数据库中单独模式的数量。当然你可以在多个服务器上创建一个同名的数据库，然后你会为每个服务器中的每个数据库付费。正如 randoms 指出的那样，每个 Azure 数据库都有自己的连接字符串，指定它连接到的服务器和数据库，因此每个连接字符串对应于一个单独收费的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:36:51.837

它与连接字符串的数量没有直接关系，因为您可以有许多连接字符串都指向具有不同选项的相同数据库和服务器。

因此，一个 SQL Azure 数据库 e 如果您从所有连接字符串中提取服务器和数据库属性，您可以将它们视为服务器和数据库的不同数量。

# enums - 使用 JAXB 生成的代码中没有枚举

> ID：14612488
> 
> 赞同：2
> 
> 时间：2013-01-30T19:52:47.623
> 
> 标签：enums, jaxb, code-generation

我的枚举类

```
@XmlType
@XmlEnum(Integer.class)
public enum  Error {

 @XmlEnumValue("1")
    ENUM_VALUE_1(1, "some string 1", "some string 1"),
 @XmlEnumValue("2")
    ENUM_VALUE_2(2, "some string 2", "some string 2");

  private Error(int errorCode, String msgKey, String message) {
    this.errorCode = errorCode;
    this.msgKey = msgKey;
    this.message = message;
 }
} 
```

生成的xsd

```
<xs:simpleType name="error">
   <xs:restriction base="xs:int">
     <xs:enumeration value="1"/>
     <xs:enumeration value="2"/>
   </xs:restriction>
</xs:simpleType> 
```

我正在使用的绑定

```
 <jaxb:bindings schemaLocation="schema.xsd">
     <jaxb:bindings node="//xs:simpleType[@name='error']">
         <jaxb:typesafeEnumClass ref="packageName.Error" />
     </jaxb:bindings>
 </jaxb:bindings> 
```

问题是没有生成枚举文件。我正在使用“maven-jaxb2-plugin”进行代码生成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T20:30:30.200

默认情况下，[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现不会为以数值开头的 XML 枚举创建 Java 枚举。您可以使用外部绑定文件来生成枚举。

```
<jxb:bindings 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
    version="2.1">
    <jxb:bindings schemaLocation="schema.xsd">
        <jxb:bindings node="//xs:simpleType[@name='error']/xs:restriction/xs:enumeration[@value='1']">
            <jxb:typesafeEnumMember name="ONE"/>
        </jxb:bindings>
        <jxb:bindings node="//xs:simpleType[@name='error']/xs:restriction/xs:enumeration[@value='2']">
            <jxb:typesafeEnumMember name="TWO"/>
        </jxb:bindings>
    </jxb:bindings>
</jxb:bindings> 
```

**完整示例**

*   [枚举与模式不匹配：jaxb 或 xsd 有问题？](https://stackoverflow.com/questions/4820113/enums-dont-match-schema-problem-with-jaxb-or-xsd/4830804#4830804)

* * *

**更新**

> 那么添加以下注释有什么意义 - @XmlEnumValue("1")

在您从 Java 类开始的用例中，您使用`@XmlEnumValue("1")`注解将枚举映射到所需的 XML 结构。

```
 <xs:simpleType name="error">
    <xs:restriction base="xs:int">
      <xs:enumeration value="1"/>
      <xs:enumeration value="2"/>
    </xs:restriction>
  </xs:simpleType> 
```

JAXB 实现不会将 JAXB 信息生成到 XML 模式中，因此如果有人想从生成的模式中生成 Java 模型，则可以使用绑定文件。

# ruby-on-rails - 了解 GitHub 工作流程；从github克隆后怎么办？

> ID：14612491
> 
> 赞同：1
> 
> 时间：2013-01-30T19:53:08.593
> 
> 标签：ruby-on-rails, github, workflow

我正在与 RoR 合作，最近通过 GitHub 克隆了一个项目。我有这个项目的特定 RVM gemset，但里面没有。我不确定是否应该创建一个新分支然后运行`bundle install`，反之亦然。我担心的是我不想在 master 分支上工作，但我知道我需要先设置所有内容`bundle install`。

在不破坏大师的情况下，开始这个项目的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:02:42.847

GitHub 只是 git 存储库的托管。好吧，写作并没有给予它适当的正义*。*

但是，您应该了解真正`git`的工作原理。我衷心推荐阅读免费的[Git Book](http://git-scm.com/book)。

简而言之：

1.  git是分布式的
2.  你只在本地工作副本上工作
3.  如果您没有*明确*告诉 git您想要跟踪文件 - 它不会（惊喜，惊喜！）。

因此运行`bundle install` **不会修改**git 跟踪的内容，特别是不会影响 remote `master`。在您修改一些已被跟踪的文件之前，它不会修改**您的主文件。**我认为`bundle install`没有。`master`即使这样，您也需要修改远程`commit`并进行`push`更改。

您可以在您的`master`. 它是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:04:51.217

如果是别人的项目，或者开源项目，你应该在 Github 上 Fork 项目。然后克隆叉子。这将允许您在项目上工作，在本地提交您的更改并将它们推送回分叉的存储库。

如果它是您自己的项目，并且您确实想在分支中工作，那么克隆 repo 并创建一个分支`git checkout -b my_branchname`。然后，您将在分支中工作，将您的代码检查到分支中。最终，您将希望将此分支合并到主分支中。为此，您可以在本地合并：

```
git checkout master
git merge my_branchname 
```

或者，您可以在 Github 上创建拉取请求，然后通过 Github Web UI 将分支合并到 master。

该`bundle`命令与 RVM 一起使用只会在本地安装 gem，很可能在您的主目录 ( `~/.rvm`) 中。Gems 没有与其余代码打包在一起，因此您不必担心会弄乱主存储库。

# sql - 使用 SQL DB2 按天限制回报

> ID：14612492
> 
> 赞同：2
> 
> 时间：2013-01-30T19:53:15.103
> 
> 标签：sql, odbc, db2, ibm-midrange

我正在尝试运行仅返回前一天和一周第一天之间的结果的报告。我已经尝试了几种不同的方法来实现这一点，但到目前为止都没有成功。我有适用于 Access 的代码（如下所列），但我试图在没有 Access 的情况下运行查询。这是我到目前为止所拥有的。

```
--This does not work
DB1.TB1.DATE_ID Between (current day-1 day) And current day='MONDAY'

--This will work in Access
DB1.TB1.DATE_ID=201302) AND ((Weekday([DATE_ID])) Between 2 And Weekday(Date()-1))) 
```

我能得到的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:11:29.550

您可以使用 DAYOFWEEK 函数，该函数返回一个整数值，即星期日为 1，星期六为 7。

所以`DAYOFWEEK(CURRENT DATE) - 1 DAYS`将返回可以从当天减去的天数以获得本周的星期一。

这是确切的陈述：

```
CURRENT DATE - ( DAYOFWEEK(CURRENT DATE) - 1 ) DAYS 
```

# ios - UILabel 不清除，覆盖以前的内容

> ID：14612493
> 
> 赞同：0
> 
> 时间：2013-01-30T19:53:25.047
> 
> 标签：ios, uitableview, uilabel

我有一个 UILabel，我不时更改其文本。但是，当我更改文本时，它不会删除旧文本 - 它会在旧文本之上重新绘制并累积。

UILabel 在 UITableViewCell 内。

有没有人遇到过这个问题？你如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:05:34.200

`UITableViewCell`当您按`[cell addSubView:UILabel]`方法自定义时会发生这种情况。

所以让我详细解释一下：

我们使用`[tableView dequeueReusableCellWithIdentifier:CellIdentifier];`方法让单元格使用。

*此方法可以是以下两种情况之一：*

1.  返回 UITableViewCell 的新对象。或者
2.  返回 UITableViewCell 的旧对象，它现在不在屏幕上。（为了提高性能）

如果它是新鲜的，则没有问题，但如果不是，我们通过
`[view addSubView:view]`方法添加的控件已经存在，我们再次将它添加到相同的位置，就像
相同的控件堆栈一样。

***我们可以通过两种方式解决：***

1.  仅当它是新单元格时才添加 [UIView addSubView:UIView] 的代码。

2.  （我建议这个）使用 UITableViewCell 的子类也调用自定义 UITableViewCell。

*你会发现很多关于这方面的教程，让我给你一些：*

[创建自定义 UITableViewCell](http://highoncoding.com/Articles/823_Creating_a_Custom_UITableViewCell.aspx)

[如何从头开始设计自定义 UITableViewCell](http://howtomakeiphoneapps.com/how-to-design-a-custom-uitableviewcell-from-scratch/1292/)

如果您使用情节提要，则非常容易：

[使用情节提要创建表格视图](http://www.adoptioncurve.net/wp-content/uploads/2012/03/Creating-Table-Views-With-Storyboards.pdf)

[使用 Xcode Storyboards 构建带有原型表视图单元的动态表视图](http://www.techotopia.com/index.php/Using_Xcode_Storyboards_to_Build_Dynamic_TableViews_with_Prototype_Table_View_Cells)

祝一切顺利...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T17:39:08.960

人们！我遇到了类似的问题，并试图创建新问题，但我决定在这个主题内写，以免产生新问题。所以这是我的情况：

我正在尝试开发本地化应用程序，其中英语单词通常设置为标签，`wordLabel.text = @"SomeNewWord";`但在俄语的情况下 - 新单词写在旧单词之上。当我有一些断点来停止游戏活动时，这种情况不会出现。当没有停止因素时，问题就会出现。这仅在默认选择俄语的 iPhone 上发生。在 iPad 上一切顺利。在为 ULLabel 分配新词之前，我也尝试过`wordLabel.text`。`nil`完全没有反应。这个问题目前在模拟器和 iPhone 4s 上都存在。我的 UILabel 是由故事板制成的，并且有`@property (nonatomic, weak) IBOutlet UILabel *wordLabel;`

更新

[在底部](https://stackoverflow.com/questions/502482/uilabel-text-overlapping-on-update)找到这篇有用的帖子后，我解决了我的问题。答案是在界面生成器中取消选中不透明...

# android - AndEngine通用池中的回收实体

> ID：14612495
> 
> 赞同：0
> 
> 时间：2013-01-30T19:53:45.630
> 
> 标签：android, andengine

我正在使用一个扩展 GenericPool 的类来处理精灵的获取和回收。我想做的是在该类中有一个方法可以在一定时间后回收。就像是：

```
public void recyleIn(Sprite sprite, float durationSeconds) {} 
```

并且有一个方便/花花公子的 DelayModifier 似乎是实现它的正确方法。所以我们会有如下内容：

```
public void recyleIn(MySprite mySprite, float durationSeconds) {
    mySprite.registerEntityModifier(
            new DelayModifier(
                    durationSeconds,

    new IEntityModifierListener() {

        @Override
        public void onModifierStarted(IModifier<IEntity> pModifier, IEntity pItem) {

        }

        @Override
        public void onModifierFinished(IModifier<IEntity> pModifier, IEntity pItem) {
            recycle(mySprite);
        }
    }

    ));
} 
```

现在问题来了：除非 Sprite 是“最终的”，否则我不能调用 recycle() 方法或在那里进行回收。通常这不会是一个问题，我只是制作一个“最终”的深度复制并使用它。但在这种情况下，制作副本违背了在池中回收的最初目的。（例如，如果我还是要制作副本，为什么还要费心回收和使用池？）

关于此类事情的正确方法/模型的任何想法？提前致谢。

* * *

更新：

嗯..我刚刚意识到我可以在 onModifierFinished() 方法中使用 IEntity 参数。（由于某种原因，我习惯于忽略这些参数。）所以我可以在 onModifierFinished() 中做这样的事情：

```
recycle((MySprite) pItem); 
```

我仍然会对任何人对最佳方法的想法感到好奇，但我想我可能只是错过了这里显而易见的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:17:29.620

我将继续回答我自己的问题，以帮助处于这种情况的人。简短的回答是使用 IEntity 参数而不是它之外的对象是正确的。我在执行此操作时遇到的第二个问题是，我想在此方法中将 IEntity 从场景中分离出来，但是在 AndEngine 中，重要的是，当 IEntity 从场景中分离时，它必须在 UpdateThread 中发生——否则你有绘制场景时可能会出现错误，同时从场景中移除某些东西。最终结果如下所示：

```
 @Override
        public void onModifierFinished(IModifier<IEntity> pModifier, final IEntity pItem) {
            pool.getContext().runOnUpdateThread(new Runnable() {
                @Override
                public void run() {
                    pItem.detachSelf();
                }
            });

        } 
```

另一个小而重要的一点是 Ientity 参数上的“final”修饰符——这是必需的，以便可以在 run() 线程中调用它。

# javascript - JAWS 没有在 IE9 中读取正确的 dynatree 项目

> ID：14612496
> 
> 赞同：1
> 
> 时间：2013-01-30T19:53:47.383
> 
> 标签：javascript, jquery, accessibility, screen-readers, dynatree

在使用带有复选框的 dynatree 树控件时，我遇到了 Internet Explorer 9 和 JAWS 的问题。

我的问题是，当用户按下空格键时，会检查并选择当前聚焦的项目，但会在列表中的其他位置读取随机项目。

我在 JAWS 上找到的文档只有空格键负责选择和检查列表项或复选框。如果没有添加像 ctrl 这样的修饰键，我找不到任何关于具有导航功能的空格键的信息。[http://www.freedomscientific.com/doccenter/archives/training/JAWSKeystrokes.htm](http://www.freedomscientific.com/doccenter/archives/training/JAWSKeystrokes.htm)

我已经更新了 dynatree 以匹配来自[http://www.w3.org/WAI/PF/aria-practices/#TreeView](http://www.w3.org/WAI/PF/aria-practices/#TreeView)的树视图规范，但只有方向箭头、home 和 end 实现了键盘交互。

树视图在 nvda 与 IE9、Chrome、Firefox、opera 和 safari 以及 JAWS 与 Firefox 和 Chrome 的搭配下运行良好。

# jquery - jQuery UI 动态选项卡中的 Flexslider

> ID：14612498
> 
> 赞同：1
> 
> 时间：2013-01-30T19:53:56.063
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs, flexslider

我需要 jQuery UI 选项卡中的 flexslider。**[这](http://print-copy74.ru/test/catalog/line-5000/)**是测试服务器的链接。我不知道我有多少个选项卡，因为它们是用 PHP 动态创建的。问题是当我触发 flexslider 触发器时，它只识别第一个选项卡中的图像。其他选项卡中的图像显示宽度为 0，因为其他选项卡被隐藏并且 flexslider 无法对图像进行数学运算。简单的解决方案是使用 off-left-technique 但 ui-tabs-hide 类在我正在使用的 jquery-ui-1.9.1 中已弃用。回滚到 1.8 与我碰巧使用的 WordPress 3.5.1 冲突。所以我看到的唯一解决方案是在每个选项卡激活时触发 flexslider。所以这就是我所做的：

首先，在加载页面上的所有库和图像后触发 flexslider：

```
$(window).load(function() {
    $('.flexslider-doors').flexslider({
        animation: "slide",
        animationLoop: false,
        itemWidth: 64,
        itemMargin: 30,
        controlNav: false
    });

}); 
```

然后在每个选项卡激活时，我再次触发 flexslider：

```
jQuery( "#colorTabs" ).tabs({
    activate: function( event, ui ) {
        jQuery('.flexslider-doors').flexslider({
            animation: "slide",
            animationLoop: false,
            itemWidth: 64,
            itemMargin: 30,
            controlNav: false
        });
    }
}); 
```

问题是它仅在我第一次切换标签时才有效。第二次图像不出现。有趣的是，例如，如果我去另一个网站或打开 Photoshop 或其他东西，然后返回损坏选项卡上的图像在它们的位置，并且滑块按预期工作。切换到另一个标签 - 没有图像。去另一个网站做同样的事情 - 一切都修复了。我卡住了=(

[http://print-copy74.ru/test/catalog/line-5000/](http://print-copy74.ru/test/catalog/line-5000/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:02:58.873

终于解决了这个问题。不确定问题出在哪里，但这就是我所做的：首先我像往常一样触发 jquery ui 选项卡：

```
jQuery( "#colorTabs" ).tabs(); 
```

然后我只在第一个选项卡上触发 flexslider，所以当页面加载滑块时，它可以作为魅力：

```
jQuery('#tabs-1 .flexslider-doors').flexslider({
    animation: "slide",
    animationLoop: false,
    itemWidth: 64,
    itemMargin: 30,
    controlNav: false
}); 
```

魔术在那之后开始：

```
jQuery('#colorTabs').bind('tabsshow', function(event, ui) {
    var index = ui.index +1;
    var tab = "#tabs-" + index + " .flexslider-doors";
    if ( index > 1 ) { 
        jQuery( tab ).flexslider({
            animation: "slide",
            animationLoop: false,
            itemWidth: 64,
            itemMargin: 30,
            controlNav: false
        });
    }
}); 
```

在每个选项卡更改时，我得到选项卡索引，添加 1，所以第一个选项卡是 1 而不是 0，然后我构造包含选项卡 ID 和 flexslider 类的字符串，最后我只在当前选项卡上触发 flexslider。就是这样=)

# assembly - 使用 .word 从合成指令转换为汇编指令

> ID：14612499
> 
> 赞同：0
> 
> 时间：2013-01-30T19:54:08.077
> 
> 标签：assembly, sparc, synthetic

我想知道如何获取用**合成指令**编写的一行汇编代码并将其手动转换为 .word**汇编指令**。例如，您如何从简单的事情开始

```
 add %i0, %i0, %i0 
```

至

```
 .word 0xB0060018 
```

非常感谢对该过程的良好，彻底的解释。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:43:22.573

既然你假设你在一个 sparc 盒子上，我会假设它至少是一个 unix 盒子;-)。

从命令行运行

```
uname -a 
```

来确定您的系统正在运行的架构。这些天很有可能是它的 x86_64。

官方重型[Sparcv9 手册](http://www.sparc.com/standards/SPARCV9.pdf)

此外，[Sparc v8 手册](http://www.sparc.com/standards/V8.pdf)仍然 100% 相关，因为所有 sparc 处理器都向后兼容，并且对于普通的旧整数代码 32 位实际上更快。现在，如果您进行多媒体类型操作，64 位可能会特别帮助 VIS 扩展。

[Sparc ASM 参考手册](http://docs.oracle.com/cd/E19641-01/802-1947/802-1947.pdf)

也就是说，这些手册是非常繁重的阅读材料，你最好买一本我在你的另一个问题中建议的书。“计算机组织和设计基础”或者可能是“SPARC 体系结构、汇编语言编程和 C”，其中包含更多特定于 Sparc 的信息。

# java - 官方Java教程中的这一行是否不准确？

> ID：14612502
> 
> 赞同：0
> 
> 时间：2013-01-30T19:54:21.020
> 
> 标签：java, interface

我在这里查看 Java 中“接口”的摘要：http: [//docs.oracle.com/javase/tutorial/java/IandI/summary-interface.html](http://docs.oracle.com/javase/tutorial/java/IandI/summary-interface.html)

第一行声明，“接口定义了两个对象之间的通信协议。”

这真的准确吗？根据我的理解，接口只是承诺提供一组成员/方法的合同，可以由任意数量的客户端使用（只要它们根据访问修饰符具有适当的访问权限）。我是否遗漏了合同的“另一面”，它会在“两个对象之间”建立一个接口？

* * *

编辑：从答案/评论（以及投票结束！:-[ ），我想我已经弄清楚了。我想我只是迷上了“两个对象之间”并假设它意味着“只有两个对象之间”，这显然是一个错误的假设。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:56:32.500

> 据我了解，接口只是承诺提供一组成员/方法的合同

这非常接近协议的定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T19:57:31.927

我不会说它不准确。如果有的话，那只是过于简单化了。

没错，任何数量的客户端都可以使用实现接口的对象。就此而言，您可以说客户端不一定是对象（它可以是类中的静态方法，这意味着很难说客户端是对象）。但是定义通信协议的观点并没有错，即使需要考虑不同的范式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T19:57:43.347

每当您使用一个对象时，您总是从另一个对象中使用它。您不会同时从多个对象调用方法。

因此，如果 A 提供了一个接口，那么 B 和 C 也依赖它，但 A 仍然分别为 B 和 C 提供一个接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T19:58:22.457

接口中定义的方法签名是强制的。一方面是接口的实现者，另一方面是调用实现者的客户端。

# php - 更新mysql表中的字段时整数值不正确

> ID：14612505
> 
> 赞同：0
> 
> 时间：2013-01-30T19:54:40.833
> 
> 标签：php, sql, mysqli, integer

更新 mysql 中的行时，我遇到了定义整数的问题。

更准确地说：- 我输入 2 作为字段值，当我查看该行时，该字段设置为 1。

这是我的 SQL 命令：

```
$DB->query("UPDATE Listings SET Type='2' AND Status='Available' WHERE LID='$LID'"); 
```

查询本身执行良好，值被更新并选择了正确的行。问题在于“类型”字段。字段类型是 tinyint。

这里完全被难住了，请帮助！

*编辑：请注意以这种方式传递变量可以允许 SQL 注入。不建议*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T19:57:34.273

查询应该这样写：

```
UPDATE Listings SET Type='2', Status='Available' WHERE LID='$LID' 
```

# java - Java Servlet POST 操作未从请求中接收参数

> ID：14612519
> 
> 赞同：1
> 
> 时间：2013-01-30T19:55:42.730
> 
> 标签：java, tomcat, servlets, angularjs, guice

昨天我第一次尝试使用 Tomcat 和 Servlets（我来自 IIS/C#/MVC）。

我也在使用 AngularJS 和 Guice。

我制作了一个只有一个方法的 Servlet：

```
@Singleton
@SuppressWarnings("serial")
public class CommandServlet extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        System.out.println(req.getParameterMap());
    }

} 
```

我在 Angular 中创建了一个如下所示的服务：

```
app.factory('console', [ '$http', function($http) {
    var console = {};

    console.execute = function(gameId, command) {
        $http.post("Command/", {
            gameId : gameId,
            command : command
        }).success(function(data, status, headers, config) {

        }).error(function(data, status, headers, config) {

        });
    };

    return console;
} ]); 
```

在我的控制器中，我注入服务并通过范围上的“执行”函数将其公开给视图：

```
app.controller('PlayController', function($scope, console) {
    $scope.consoleIn = "";

    $scope.gameId = 1;

    $scope.execute = function(command) {
        $scope.consoleOut = console.execute($scope.gameId, command);
    };
}); 
```

在我看来，我有一个按钮，它调用该函数并从输入元素传入文本：

```
<input ng-model="consoleIn" type="text">
<button class="btn" type="button" ng-click="execute(consoleIn)">Go!</button> 
```

出于某种原因，我的 Tomcat 服务器上的控制台正在打印一个空 Map ( `{}`)，而没有通过 POST 请求传递参数。当我查看 Chrome 控制台中的网络选项卡并看到正在发送参数时`{"gameId":1,"command":"a"}`（`getParameterMap()`我做对了，我做错了什么，以至于我的浏览器发出的请求没有正确地到达我的 servlet？

**编辑：**

我最终使用 Jersey 作为我的容器（我认为它被称为）而不是 Java 的默认 Servlet。在看到 Jersey 经常在 Google 上出现 Guice 后，我这样做了，我认为会有足够的文档让他们两个一起工作。有几个例子，我有点借鉴了几个，尤其是[这个](https://github.com/danbim/template-guice-jersey-tomcat)。

我在让它工作时遇到的障碍是[这样](https://stackoverflow.com/questions/14634834/jersey-guice-tomcat-producing-404-when-served-with-something-other-than-root)的，但现在一切都很好。

总的来说，如果你喜欢 Guice 作为你的 DI 并且想要创建一个 Java 网站，Jersey 是不错的选择。它似乎是针对 RESTful 服务的一种不同于常规 servlet 的更专业的功能——但无论如何，这正是我所需要的。根据我在 Tomcat 之外的非科学谷歌搜索观察结果，Grizzly 和 Jetty 也很受欢迎——如果您在使用 Tomcat 时遇到问题，您可能需要查看它们。

我希望这个编辑可以节省我昨天和今天让它工作的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:00:13.487

它*实际上*打印了什么？一些 Tomcat Map 实现不在其 toString() 方法中打印它们的内容。尝试另一种方式来查看其中的内容。你会在那里找到它的一切。

# deployment - JBoss 7.1.1.Final 部署错误：JandexAnnotationProvider 不是 AnnotationProvider 的实例

> ID：14612520
> 
> 赞同：0
> 
> 时间：2013-01-30T19:55:43.430
> 
> 标签：deployment, jsf-2, jboss, jboss7.x

我正在将 Web 应用程序迁移到 JBoss AS 7.1.1.Final。该应用程序的结构如下：

```
app.ear
|--- \lib
|       |-- jsf-api-2.0.2.jar, jsf-impl-2.0.2.jar, jsp-api-2.1.jar, jstl-1.2.jar    
|
|--- \META-INF
|--- \web.war
|       |-- \WEB-INF
|       |       |-- web.xml
|       |
|
|--- \ejbs.jar 
```

正如我们所见，这个应用程序使用了 jsf 实现 Mojarra 2.0.2 (FCS b10)。文件 jsf-impl-2.0.2.jar 和 jsf-api-2.0.2.jar 位于 EAR 根目录的 \lib 中。

在 web.xml 中，我添加了参数，它告诉服务器正在使用的实现是与应用程序捆绑的实现：

*--web.xml：*

```
<context-param>
    <param-name>org.jboss.jbossfaces.WAR_BUNDLES_JSF_IMPL</param-name>
    <param-value>true</param-value>
</context-param> 
```

此外，添加了文件*jboss-deployment-structure.xml*：

```
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.2">

<ear-subdeployments-isolated>false</ear-subdeployments-isolated>

<deployment>
    <exclusions>
        <!-- Exclude container version of hibernate. By default its version 4, 
            we want bundled version 3 loaded -->
        <module name="org.hibernate" slot="main" />
        <module name="org.hibernate.validator" slot="main" />
        <module name="javax.faces.api" slot="main" />
        <module name="com.sun.jsf-impl" slot="main" />
        <module name="javax.faces.api" slot="1.2" />
        <module name="com.sun.jsf-impl" slot="1.2" />
    </exclusions>

    <dependencies>
        <!-- Add dependencies, since in 'pom.xml' we exclude transitive dependencies 
            from reactor, we need to add following modules, to make application work 
            properly -->
        <!-- NOTE: module name does not always correspond to maven artifact ID -->
        <!-- Add dependency on commons.logging -->
        <module name="org.apache.commons.logging" />
        <!-- Add dependency on commons.collections -->
        <module name="org.apache.commons.collections" />
        <module name="org.apache.commons.lang" />
        <!-- Add dependency on log4j -->
        <module name="org.apache.log4j" export="true"/>
        <!-- Add dependency on dom4j -->
        <module name="org.dom4j" />
        <!-- Add dependency on slf4j -->
        <module name="org.slf4j" />
        <!-- Add dependency on antlr -->
        <module name="org.antlr" />
        <!-- Add dependency on asm -->
        <module name="asm.asm" />
        <!-- Add dependency on javassist -->
        <module name="org.javassist" />
        <module name="org.hibernate" slot="3" />
        <module name="org.hibernate.validator" slot="3" />
    </dependencies>

</deployment> 
```

尝试部署此应用程序时，服务器会引发以下异常：

```
 17:39:00,826 SEVERE [javax.enterprise.resource.webcontainer.jsf.application] (MSC service thread 1-8) JSF1051: Service entry 'org.jboss.as.web.deployment.jsf.JsfInjectionProvider' does not extend DiscoverableInjectionProvider.  Entry will be ignored.17:39:00,828 INFO  [javax.enterprise.resource.webcontainer.jsf.application] (MSC service thread 1-8) JSF1048: PostConstruct/PreDestroy annotations present.  ManagedBeans methods marked with these annotations will have said annotations processed.
17:39:00,903 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-8) Unsanitized stacktrace from failed start...: javax.faces.FacesException: java.util.concurrent.ExecutionException: javax.faces.FacesException: Class org.jboss.as.web.deployment.jsf.JandexAnnotationProvider is not an instance of com.sun.faces.spi.AnnotationProvider
    at com.sun.faces.config.ConfigManager.getAnnotatedClasses(ConfigManager.java:411) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.processor.AbstractConfigProcessor.processAnnotations(AbstractConfigProcessor.java:328) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.processor.ApplicationConfigProcessor.process(ApplicationConfigProcessor.java:334) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.processor.LifecycleConfigProcessor.process(LifecycleConfigProcessor.java:116) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:223) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:335) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:223) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885) [rt.jar:1.6.0_07]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907) [rt.jar:1.6.0_07]
    at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_07]
Caused by: java.util.concurrent.ExecutionException: javax.faces.FacesException: Class org.jboss.as.web.deployment.jsf.JandexAnnotationProvider is not an instance of com.sun.faces.spi.AnnotationProvider
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222) [rt.jar:1.6.0_07]
    at java.util.concurrent.FutureTask.get(FutureTask.java:83) [rt.jar:1.6.0_07]
    at com.sun.faces.config.ConfigManager.getAnnotatedClasses(ConfigManager.java:407) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    ... 16 more
Caused by: javax.faces.FacesException: Class org.jboss.as.web.deployment.jsf.JandexAnnotationProvider is not an instance of com.sun.faces.spi.AnnotationProvider
    at com.sun.faces.spi.AnnotationProviderFactory.createAnnotationProvider(AnnotationProviderFactory.java:74) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.ConfigManager$AnnotationScanTask.call(ConfigManager.java:764) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.ConfigManager$AnnotationScanTask.call(ConfigManager.java:736) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [rt.jar:1.6.0_07]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138) [rt.jar:1.6.0_07]
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:329) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    ... 9 more

17:39:00,931 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/war]] (MSC service thread 1-8) Exception sending context initialized event to listener instance of class com.sun.faces.config.ConfigureListener: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! Class org.jboss.as.web.deployment.jsf.JandexAnnotationProvider is not an instance of com.sun.faces.spi.AnnotationProvider
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:354) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:223) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885) [rt.jar:1.6.0_07]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907) [rt.jar:1.6.0_07]
    at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_07]
Caused by: javax.faces.FacesException: Class org.jboss.as.web.deployment.jsf.JandexAnnotationProvider is not an instance of com.sun.faces.spi.AnnotationProvider
    at com.sun.faces.spi.AnnotationProviderFactory.createAnnotationProvider(AnnotationProviderFactory.java:74) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.ConfigManager$AnnotationScanTask.call(ConfigManager.java:764) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.ConfigManager$AnnotationScanTask.call(ConfigManager.java:736) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [rt.jar:1.6.0_07]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138) [rt.jar:1.6.0_07]
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:329) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    ... 9 more

17:39:00,948 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-8) Error listenerStart
17:39:00,949 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-8) Context [/war] startup failed due to previous errors
17:39:00,952 SEVERE [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-8) Unexpected exception when attempting to tear down the Mojarra runtime: java.lang.IllegalStateException: Application was not properly initialized at startup, could not find Factory: javax.faces.application.ApplicationFactory
    at javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:804) [jsf-api-2.0.2.jar:2.0.2-FCS]
    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:306) [jsf-api-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.InitFacesContext.getApplication(InitFacesContext.java:104) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at com.sun.faces.config.ConfigureListener.contextDestroyed(ConfigureListener.java:309) [jsf-impl-2.0.2.jar:2.0.2-FCS]
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:3489) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.stop(StandardContext.java:3999) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3917) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885) [rt.jar:1.6.0_07]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907) [rt.jar:1.6.0_07]
    at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_07]

17:39:00,968 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC00001: Failed to start service jboss.web.deployment.default-host./war: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./war: JBAS018040: Failed to start context
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:95)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885) [rt.jar:1.6.0_07]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907) [rt.jar:1.6.0_07]
    at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_07] 
```

我做了很多研究，但没有解决这个问题。有人知道出路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:16:17.283

您可能需要通过将 a 添加`jboss-deployment-structure.xml`到您的项目来排除服务器的 JSF 实现。

```
<jboss-deployment-structure>
    <deployment>
        <!-- Exclusions allow you to prevent the server from automatically adding some dependencies -->
        <exclusions>
            <module name="javax.faces.api" />
        </exclusions>
        <dependencies>
            <module name="javax.el.api" export="true"/>
            <module name="javax.servlet.api" export="true"/>
            <module name="javax.servlet.jsp.api" export="true"/>
            <module name="javax.servlet.jstl.api" export="true"/>
            <module name="javax.validation.api" export="true"/>
        </dependencies>
    </deployment>
</jboss-deployment-structure> 
```

关于 Hibernate，您不需要在应用程序中包含 Hibernate。您可以告诉服务器[使用 Hibernate 3.5](https://docs.jboss.org/author/display/AS71/JPA+Reference+Guide#JPAReferenceGuide-PackagingtheHibernate3.5orgreater3.xJPApersistenceproviderwithyourapplication)。

# transactions - Akka持久邮箱在消息处理之前丢失消息？

> ID：14612525
> 
> 赞同：2
> 
> 时间：2013-01-30T19:56:01.560
> 
> 标签：transactions, message, akka

Akka[持久邮箱文件](http://doc.akka.io/docs/akka/current/modules/durable-mailbox.html)声明：

> 持久邮箱与任何其他不太可能具有事务性的邮箱一样。如果actor在收到消息后但在完成处理之前崩溃，则消息可能会丢失。

假设actor A 使用持久邮箱作为消息队列，该队列有2 条消息，M1 和M2。演员收到 M1 并正在处理 M1。如果A在处理完M1之前崩溃了，M1是否丢失了？一个相关的问题是“A 崩溃”是什么意思：这是否意味着 A 有未捕获的异常或运行 A 的 JVM 崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:09:53.417

崩溃的原因可以是任何原因，该术语旨在表示处理未完成（被异常中断或因停电或其他任何原因在中间终止）。一旦参与者从邮箱中取出消息，它就会从邮箱中消失。如果您不希望这种行为，则必须实现诸如[peek 邮箱之类的](https://github.com/akka/akka/blob/master/akka-contrib/src/main/scala/akka/contrib/mailbox/PeekMailbox.scala)东西，请参阅[此处的文档](http://doc.akka.io/docs/akka/2.1.0/contrib/peek-mailbox.html)。

# java - Java：无需实例化新列表的深度复制列表条目

> ID：14612528
> 
> 赞同：3
> 
> 时间：2013-01-30T19:56:07.583
> 
> 标签：java, list, reference, copy, deep-copy

我在执行编程任务时遇到了一个小问题。我想从文件中读取一些行（到目前为止没问题）并对其进行标记。每行大约有 4 个标记，每个标记都应该在列表中找到一个位置。最后，每一行也应该在一个列表中。

一个小例子来澄清这一点：

文件内容：

> foo boo bar
> bii buu baa

输出：

> [[foo, boo, bar], [bii, buu, baa]]

这是我正在处理的代码

```
String fileContent = fileloader(file.toString());
List<String> linesList = new ArrayList<String>();
String[] lines = fileContent.split("\n"); 
for(String line:lines){
  String[] splittedLine = line.split("\t");
  for(String words:splittedLine){
    linesList.add(words);
  }
  lexiconContent.add(linesList); 
  linesList.removeAll(linesList);
} 
```

我想引用有问题，因为第一次迭代效果很好！但在第二次迭代中，它会将**实际**的第二个内容也复制到第一个`(0)`列表位置，依此类推。

最后我得到了类似的东西`[[], [], [], []]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:58:46.013

问题是，您只创建了一个列表，并将对该列表的引用添加到您的外部列表中，方法是在每次迭代时对其进行修改。因此，对该列表所做的最终修改将反映在所有参考文献中。

`linesList`您可以通过在循环中每次创建一个新的来解决此问题：-

```
List<String> linesList = null;  // Don't initialize here
String[] lines = fileContent.split("\n"); 

for(String line:lines){
    String[] splittedLine = line.split("\t");
    linesList = new ArrayList<String>(); // Initialize a new list everytime.

    for(String words:splittedLine){
        linesList.add(words);
    }
    lexiconContent.add(linesList); 
} 
```

是的，您还可以将 for 循环简化为：-

```
for(String line:lines){
    String[] splittedLine = line.split("\t");
    lexiconContent.add(new ArrayList<String>(Arrays.asList(splittedLine))); 
} 
```

这样，您不必遍历数组并将单个元素添加到列表中。事实上，您根本不需要中间列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:27:12.513

在您的代码中..而不是为循环中的每个迭代创建新的 ArrayList：`for(String line:lines)`您只是在`ArrayList`从外部循环的第一次迭代中使用的旧对象中添加单词（在嵌套循环中）并存储相同的参考值在 ArrayList 的所有后续索引`lexiconContent`处。此外，在外循环的每次迭代结束时，您正在清除`linesList`.So 最后，您仍然在`lexiconContent`... 中保留 N 个条目，其中 lexiconContent 的每个索引处的元素只不过是参考值ArrayList(lineList) 的单个对象是空的！！！

```
You should use following code instead:
String fileContent = fileloader(file.toString());
List<String> linesList = null;
String[] lines = fileContent.split("\n"); 
for(String line:lines){
  List<String> linesList = new ArrayList<String>();
  String[] splittedLine = line.split("\t");
  for(String words:splittedLine){
    linesList.add(words);
  }
  lexiconContent.add(linesList); 
} 
```

# java - Android更改闹钟声音

> ID：14612529
> 
> 赞同：0
> 
> 时间：2013-01-30T19:56:08.730
> 
> 标签：java, android, broadcastreceiver, alarmmanager, audio

所以我有一个设置警报的警报应用程序。我有一个非常简单的 Service AlarmReceiver 来获取警报并执行一些操作：

```
public class AlarmReceiver extends Service{

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        super.onCreate();
        MediaPlayer MPRadio1 = MediaPlayer.create(this, R.raw.radio3);
        MPRadio1.start();
        Toast.makeText(getBaseContext(), "Alarm received", Toast.LENGTH_LONG).show();           
    } 
```

现在我想知道如何更改另一个 Activity 的通知声音，以便 AlarmReceiver 服务知道收到警报时应该播放哪种声音？所以用户可以选择让我们说，3 个带有单选按钮的声音，他选择哪个 AlarmReceiver 知道要播放哪个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:58:57.927

存储用户的首选项（共享首选项中铃声的 uri），然后在创建它时使用存储在首选项中的值来获取新值。注册警报时，您**应该始终从共享首选项中获取此值。**

## 笔记：

此外，您应该使用 SoundPool 而不是 MediaPlayer **，并且**您还应该按照他们的预期使用通知，通过 PendingIntent 发送到通知栏。此通知听起来像是您的实际活动正在执行此操作，这不是通知音的工作方式。

# php - 在 DOMpdf 目录外使用 DOM PDF 创建 pdf

> ID：14612531
> 
> 赞同：5
> 
> 时间：2013-01-30T19:56:27.240
> 
> 标签：php, directory, dompdf

嗨，我在我的网站上安装了 mybb。我还安装了 dompdf 并且它在它自己的目录中工作，即我已经安装在`"DOM"`目录中。现在我可以用这个简单的代码轻松地通用 pdf，保存在`"DOM"`目录中。

```
<?php
require_once "dompdf_config.inc.php";
//$file = "www/test/css_at_font_face.html"; 
$file="msf.html";
$dompdf = new DOMPDF();
$dompdf->load_html_file($file);
$dompdf->render();
$dompdf->stream("sample.pdf");

?> 
```

如果我尝试访问不在目录中的其他文件，`DOM`即

load_html_file($file); $dompdf->渲染（）；$dompdf->stream("sample.pdf");

?> 我收到错误`Remote file requested, but DOMPDF_ENABLE_REMOTE is false`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-25T16:29:47.780

要启用远程访问，**请勿**编辑“dompdf_config.inc.php”

改用：

```
$dompdf = new DOMPDF();
$dompdf->set_option('enable_remote', TRUE);

$dompdf->set_option('enable_css_float', TRUE);
$dompdf->set_option('enable_html5_parser', FALSE); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T20:25:48.083

在不启用远程文件访问的情况下加载 html：

```
<?php
require_once "dompdf_config.inc.php";
$file = "www/test/css_at_font_face.html"; 
$html=file_get_contents($file);
$dompdf = new DOMPDF();
$dompdf->load_html($html);
$dompdf->render();
$dompdf->stream("sample.pdf");

?> 
```

要启用远程文件访问：

取自 dompdf_config.inc.php

```
/**
 * Enable remote file access
 *
 * If this setting is set to true, DOMPDF will access remote sites for
 * images and CSS files as required.
 * This is required for part of test case www/test/image_variants.html through www/examples.php
 *
 * Attention!
 * **This can be a security risk**, in particular in combination with DOMPDF_ENABLE_PHP and
 * allowing remote access to dompdf.php or on allowing remote html code to be passed to
 * $dompdf = new DOMPDF(); $dompdf->load_html(...);
 * This allows anonymous users to download legally doubtful internet content which on
 * tracing back appears to being downloaded by your server, or allows malicious php code
 * in remote html pages to be executed by your server with your account privileges.
 *
 * @var bool
 */
def("DOMPDF_ENABLE_REMOTE", true); 
```

# javascript - 回调导致内存泄漏

> ID：14612535
> 
> 赞同：0
> 
> 时间：2013-01-30T19:56:35.900
> 
> 标签：javascript

```
Model.GetData(function (args,jsonData) {
    RenderData(jsonData);
}); 
```

我正在向我的模型类传递一个回调，

```
var Model = (function () {
    function GetData(args,callback) {
       // do all math works. 

       var HTTPClient;

       HTTPClient.onload = function () {
           callback(this.responseText);
       };
    }

})(); 
```

我的回调会在我的视图页面中导致内存泄漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:57:57.410

是的。全局变量将存储对您的函数的引用，该引用与您的and`onload`位于同一范围内。`args``callback`

# wordpress - 使用 git 和 MAMP 进行本地开发的权限

> ID：14612537
> 
> 赞同：1
> 
> 时间：2013-01-30T19:56:45.080
> 
> 标签：wordpress, git, permissions, localhost, mamp

我正在用一个干净的帐户设置一台新机器。我正在使用 MAMP Pro 在 Mac (OSX 10.8.2) 上进行本地开发，我使用 git 进行版本控制。我遇到权限问题...

MAMP Pro 允许您使用以下对话框设置对主机目录的权限： ![在此处输入图像描述](../Images/1f9cf839c6cd00405382f89dcc5c98f3.png)

当我将所有者设置为我自己 (ESL) 并将组设置为“管理员”时，git 可以正常工作，但我的本地计算机上的 Wordpress 更新无法正常运行（提示我输入 ftp 凭据）。

当我将所有者和组设置为“www”时，Wordpress 会顺利更新，但 git 会抛出“Permission denied”错误，例如：

```
ESL$ git checkout master
fatal: Unable to create '/Applications/MAMP/htdocs/streetofwalls/.git/index.lock': Permission denied 
```

我被卡住了，因为我需要 Wordpress 和 git 才能正常运行。任何想法为什么我会遇到这个问题和/或如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:20:51.067

让每个人都在那里写。这只是本地开发机器，对吗？

# javascript - node.js 和浏览器中的翡翠模板助手

> ID：14612539
> 
> 赞同：2
> 
> 时间：2013-01-30T19:56:50.617
> 
> 标签：javascript, node.js, express, pug

我在 express 应用程序和浏览器中都使用 Jade 模板。我需要在将数据放入输入之前对其进行格式化。

我应该在 node.js 和浏览器中都用类似的方式扩展本地人吗？

```
{ formatDate: function(date) {}, ... } 
```

或者是否有任何最佳实践将帮助函数（例如格式化货币、日期等）传递给玉模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:58:11.153

最终扩展了服务器端和客户端的本地人。

# javascript - 事件并不总是触发

> ID：14612543
> 
> 赞同：0
> 
> 时间：2013-01-30T19:56:59.927
> 
> 标签：javascript

我不太确定该怎么做，但这里是：

我有触发功能的表单元素（主要用于验证目的）。这会在点击、更改等时触发。这些都是用 vanilla JavaScript 编写的。

如果它是一个简单的 HTML 元素，那么一切正常。例如，一个元素在变化时触发。

但是，如果我使用 jQuery 脚本（例如 jQuery 颜色选择器），那么尽管该 jQuery 脚本填充了一个字段，但验证脚本不会触发。

我想这很明显，因为您不单击、模糊、更改它，它只是更改它的 jQuery 脚本。

当然，我可以更改颜色选择器 jQuery 脚本中的 JavaScript，这样它也会触发验证脚本，但必须有更好的方法，以及点击、更改、模糊等。我也可以在它激活时激活该功能发现另一个脚本正在更改它。我需要这个用于各种场合和脚本。

另一个示例是评分脚本（评分为 5）。它使用单选按钮作为非 jQuery 后备，而 jQuery 脚本只是隐藏这些单选（使用 CSS），显示星形图像，然后在用户与星形图像交互时更改单选。这样，无论 jQuery 是否可用，服务器都会以相同的方式处理表单提交。但是，验证脚本不会触发。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:03:41.583

显然，在 javascript 运行之后，元素被插入到 dom 上。尝试使用 $.live() 而不是 $.blur()

所以即使这个脚本元素是在页面渲染之后插入的，事件也会被绑定到 em。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

# ios - iOS向表部分标题添加约束

> ID：14612546
> 
> 赞同：3
> 
> 时间：2013-01-30T19:57:06.133
> 
> 标签：ios, objective-c, uitableview, constraints

我正在使用分组表，并使用 tableView: viewForHeaderInSection: 方法自定义部分中的标题并使用 tableView: heightForHeaderInSection: 设置高度。

我创建了一个视图并在其中放置了一个标签，如下所示：

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

    // Create a custom title view.
    UIView *ctv;
    UILabel *titleLabel;

    // Set the name.
    {...} // Code not relevant

    // If an iPhone.
    if ([Config isPhone]) {
        ctv = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 50)];
        titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 14, 320, 36)];
    }
    // If an iPad
    else {
        ctv = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 768, 75)];
        titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 20, 544, 55)];
    }

    // Config the label.
    {...} // Code not relevant

    // Center the items.
    ctv.center = CGPointMake(tableView.center.x, ctv.center.y);
    titleLabel.center = ctv.center;

    // Add the label to the container view.
    [ctv addSubview:titleLabel];

    // Return the custom title view.
    return ctv;

} 
```

在您旋转屏幕之前，这一切都很好。位置已关闭。我意识到这是因为视图在另一个方向上被居中，导致中心的计算不再正确。解决方案应该是添加约束。我尝试在下面添加约束：

```
NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(ctv);
NSArray *constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|[ctv]|"
                         options:0
                         metrics:nil
                         views:viewsDictionary
                       ];
[tableView addConstraints:constraints]; 
```

但是当我尝试下面的方法时，我发现没有父视图与之关联，这是完全有道理的，因为从技术上讲，它并没有被添加到返回的视图中。所以我想我会尝试以这种方式添加约束：

```
NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:ctv
                                     attribute:NSLayoutAttributeCenterX
                                     relatedBy:NSLayoutRelationEqual
                                        toItem:tableView
                                     attribute:NSLayoutAttributeCenterX
                                    multiplier:1.0
                                      constant:0
                                      ];
[tableView addConstraint:constraint]; 
```

但这也有错误。我尝试将 tableView 变量切换到全局表属性，但结果相同。我还试图弄清楚如何在视图中添加约束确实加载方法但它失败了，因为我无法弄清楚如何从表对象返回到表的节标题。我最后的想法是在约束中设置表格的宽度，并设置一个使整个表格居中。这个过程有效，但现在我的应用程序中间有一个丑陋的滚动条，当它处于横向时。所以问题是，在加载单个节标题以添加此约束后，我在哪里/如何访问它们？我对 Objective-C 还是很陌生，因此感谢您的帮助。

***** 基于 rdelmar 建议的新代码 ****

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UIView *ctv = [tableView dequeueReusableHeaderFooterViewWithIdentifier:@"groupHeader"];
    UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 20, 544, 55)];
    [titleLabel setTranslatesAutoresizingMaskIntoConstraints: NO];
    NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:ctv
                                        attribute:NSLayoutAttributeCenterX
                                        relatedBy:0
                                          toItem:titleLabel
                                        attribute:NSLayoutAttributeCenterX
                                       multiplier:1.0
                                         constant:0
                                      ];
    [ctv addConstraints:@[constraint]];
    titleLabel.text = @"string";
    [ctv addSubview:titleLabel];
    return ctv;
} 
```

但就像我提到的那样，它给了我一个“约束必须包含第一个布局项”的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:44:58.537

我在最近的一个项目中这样做是为了添加标签和 UIActivityIndi​​catorView：

```
-(UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UIView *headerView = [self.tableView dequeueReusableHeaderFooterViewWithIdentifier:@"Header"];
    UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(0,0, 250, 20)];
    [label setTranslatesAutoresizingMaskIntoConstraints:NO];
    NSLayoutConstraint *con1 = [NSLayoutConstraint constraintWithItem:headerView attribute:NSLayoutAttributeCenterY relatedBy:0 toItem:label attribute:NSLayoutAttributeCenterY multiplier:1 constant:0];
    NSLayoutConstraint *con2 = [NSLayoutConstraint constraintWithItem:headerView attribute:NSLayoutAttributeLeft relatedBy:0 toItem:label attribute:NSLayoutAttributeLeading multiplier:1 constant:-10];
    [headerView addConstraints:@[con1,con2]];
    label.text = @"Pick an Activity from the List";
    label.backgroundColor = [UIColor clearColor];
    [headerView addSubview:label];
    spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
    [spinner setTranslatesAutoresizingMaskIntoConstraints:NO];
    if (activityIndicatorShouldStop == NO) [spinner startAnimating];
    [headerView addSubview:spinner];
    NSLayoutConstraint *con3 = [NSLayoutConstraint constraintWithItem:headerView attribute:NSLayoutAttributeCenterY relatedBy:0 toItem:spinner attribute:NSLayoutAttributeCenterY multiplier:1 constant:0];
    NSLayoutConstraint *con4 = [NSLayoutConstraint constraintWithItem:headerView attribute:NSLayoutAttributeRight relatedBy:0 toItem:spinner attribute:NSLayoutAttributeTrailing multiplier:1 constant:10];
    [headerView addConstraints:@[con3,con4]];
    return headerView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:42:42.323

如果你不能让约束起作用，你的原始代码加上一个自动调整大小的掩码（灵活的左右边距）就可以完成这项工作。

一个更简单的解决方案是返回一个 UILabel 作为标题视图，并带有居中的文本。

您第一次尝试约束是行不通的，因为您设置错误。

表视图负责设置表头视图的框架。您需要担心标签*在*标题中的位置。对此的 VFL 将是`"|titleLabel|"`- 标题标签的大小应与其父视图（标题视图）相匹配。

# javascript - 使用属性值在新选项卡中打开链接

> ID：14612547
> 
> 赞同：2
> 
> 时间：2013-01-30T19:57:08.960
> 
> 标签：javascript, html, ajax

例如看下面的代码。点击链接必须`http://google.com`在新标签中打开。就像在站点[演示链接中一样](http://couponcoupon.biz/coupon-codes/coupon-codes-for-dominos-pizza-january-2013/)

```
<p class="coupon"><a name="http://google.com">link</a></p> 
```

我不知道演示链接是如何实现的。有人可以帮我怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T21:02:50.540

您可以使用以下 javascript（使用 jQuery）：

```
$('.coupon a').click(function() {
    window.open($(this).attr("name"));
}); 
```

这样，链接将在新选项卡或新窗口中打开（取决于用户偏好）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T20:48:26.533

你可以这样做：

```
<p class="coupon"><a href="http://google.com" target="_blank">link</a></p> 
```

Javascript 替代品

```
$(function(){
  $(".coupon a").click(function(){
    window.open($(this).attr('name'), '_blank');
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:10:58.780

**您的演示链接通过以下方式实现此目的：**

**您需要获取以下脚本**

**1\.** [http://code.jquery.com/jquery-1.9.0.min.js](http://code.jquery.com/jquery-1.9.0.min.js)

**2\.** [http://doc.qt.digia.com/qdoc/config-scripts-superfish-js.html](http://doc.qt.digia.com/qdoc/config-scripts-superfish-js.html)

**3\.** [http://code.google.com/p/jqueryjs/source/browse/trunk/plugins/cookie/jquery.cookie.js?r=6125](http://code.google.com/p/jqueryjs/source/browse/trunk/plugins/cookie/jquery.cookie.js?r=6125)

**4.** jquery.jcarousel.js 来自[http://sorgalla.com/projects/download-zip.php?jcarousel](http://sorgalla.com/projects/download-zip.php?jcarousel)

**然后制作自己的js文件并将其添加到其中**

```
function padd_append_clear() {
    jQuery('.append-clear').append('<div class="clear"></div>');
}

function padd_toggle(classname,value) {
jQuery(classname).focus(function() {
    if (value == jQuery(classname).val()) {
        jQuery(this).val('');
    }
});
jQuery(classname).blur(function() {
    if ('' == jQuery(classname).val()) {
        jQuery(this).val(value);
    }
});
}

function padd_slideshow_init(carousel) {
carousel.clip.hover(function() {
    carousel.stopAuto();
}, function() {
    carousel.startAuto();
});
}

function padd_create_slideshow() {
jQuery('#slideshow > .list').jcarousel({
    auto: 5,
    animation: 1000,
    wrap: 'circular',
    initCallback: padd_slideshow_init
});
}

jQuery(document).ready(function() {
jQuery.noConflict();

jQuery('div#menubar div > ul').superfish({
    autoArrows: false,
    hoverClass: 'hover',
    speed: 500,
    animation: { opacity: 'show', height: 'show' }
});
jQuery('div#menubar div > ul > li:last-child').css({
    'background': 'transparent none',
    'padding-right' : '0'
});

padd_append_clear();
padd_create_slideshow();

jQuery('p.coupon a').click(function() {
    window.open(jQuery(this).attr('name'));
});

jQuery('input#s').val('Find a coupon');
padd_toggle('input#s','Find a coupon');

jQuery('div.search form').click(function () {
    jQuery('input#s').focus();
});

}); 
```

**现在完成后，您可以在 html 页面中导入这些 js 文件，并通过名称标签实现您想要的功能。**

# mysql - MySQL 远程连接因“未知身份验证方法”而失败

> ID：14612551
> 
> 赞同：13
> 
> 时间：2013-01-30T19:57:30.077
> 
> 标签：mysql, pdo, database-connection, remote-access

我正在尝试从本地计算机在线远程连接到 MySQL 服务器，但出现以下错误：

```
Warning: PDO::__construct(): The server requested authentication 
method unknown to the client [mysql_old_password] in 
C:\xampp\htdocs\ticket\terminal\sync.php

SQLSTATE[HY000] [2054] The server requested authentication method 
umknown to the client 
```

我的本地 MySQL 服务器版本是 5.5.27，libmysql - mysqlnd 5.0.10 远程 MySQL 服务器版本是 5.5.23，mysqlnd 版本没有暴露。

我猜这是一个不兼容的密码哈希问题，但我不知道如何解决它。以下是我的连接代码的一部分

```
$dsn = 'mysql:host=184.173.209.193;dbname=my_db_name';
$options = array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8',
); 

try {
    $online_dbh = new PDO($dsn, 'myusername', 'mypassword', $options);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    echo "Congratulations!";
} catch (PDOException $e) {
    echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T20:41:19.450

假设您使用的是 PHP 5.3+，您可能会遇到[向后不兼容性更改](http://www.php.net/manual/en/migration53.incompatible.php)之一：

> 新的 mysqlnd 库需要使用 MySQL 4.1 更新的 41 字节密码格式。继续使用旧的 16 字节密码将导致 mysql_connect() 和类似函数发出错误，“mysqlnd cannot connect to MySQL 4.1+ using old authentication。”

如果是这样，请参阅[https://stackoverflow.com/a/1340538/187954](https://stackoverflow.com/a/1340538/187954)以获取有关更新密码的信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-24T10:04:51.270

这可能会帮助解决此问题的人。这就是我在我的情况下修复它的方法。来自[MySQL PHP API (PDO_MYSQL)](https://dev.mysql.com/doc/apis-php/en/apis-php-pdo-mysql.html)网站

> 当运行 7.1.16 之前的 PHP 版本或 7.2.4 之前的 PHP 7.2 时，将 MySQL 8 Server 的默认密码插件设置为 mysql_native_password 否则您将看到类似于 The server requested authentication method unknown to the client [caching_sha2_password] even when caching_sha2_password未使用。
> 
> 这是因为 MySQL 8 默认使用caching_sha2_password，这是一个旧 PHP (mysqlnd) 版本无法识别的插件。相反，通过在 my.cnf 中设置 default_authentication_plugin=mysql_native_password 来更改它。未来的 PHP 版本将支持caching_sha2_password 插件。与此同时，[mysql_xdevapi](https://dev.mysql.com/doc/apis-php/en/apis-php-mysql-xdevapi.html)扩展确实支持它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-10T09:59:42.317

我克服了挑战。我发现我的远程 MySQL 数据库主机仍然使用 16 字节的旧 MySQL 密码散列，而我的 localhost 数据库服务器使用 41 字节的密码散列。我使用以下查询来查找密码长度：

```
SELECT PASSWORD('mypass') 
```

我通过运行以下查询将 localhost 数据库服务器密码哈希更改为 16 字节

```
SET GLOBAL old_passwords = 1; 
```

然后我编辑了`my.ini`文件，并设置了`old_password=1`确保当服务器重新启动时，它不会恢复到新的密码系统。但这并没有解决我的问题。

我发现是 PHP 处理了身份验证，因为我使用的是`PHP`'s `MySQL` `API`，所以我降级到`PHP 5.2.8`并且能够成功建立远程连接。

我希望这可以帮助别人。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-13T19:23:54.217

用 'password' 更改用 mysql_native_password 标识的用户 'username'@'localhost'；会修复它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-09T08:11:10.827

我遇到了同样的问题，发现问题确实与 PHP 有关。

解决方案对我来说很简单：切换到 mysqli 而不是 PDO。使用 Zend_Db 时，这就像更改 1 行一样简单：

```
$db = Zend_Db::factory('pdo_mysql',array('host' => MYSQL_HOST, 'username' => MYSQL_USER, 'password' => MYSQL_PASS, 'dbname' => MYSQL_SCHEMA)); 
```

变成

```
$db = Zend_Db::factory('mysqli',array('host' => MYSQL_HOST, 'username' => MYSQL_USER, 'password' => MYSQL_PASS, 'dbname' => MYSQL_SCHEMA)); 
```

但是如果您的应用程序没有使用 Zend_Db 抽象（或任何其他）层，您可能会遇到麻烦。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-14T10:40:28.343

我在共享托管服务（bluehost.com）上遇到了这个问题。我只是通过 Bluehost 提供的 Web 界面重置了 borking MySql 用户的密码。我重新使用了旧密码，在界面重新输入并保存，一切都很好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-29T23:39:07.880

如果您使用`Bitbucket Pipelines`and `MySQL 5.8+`，您可以像这样将已知参数添加[`--default-authentication-plugin=mysql_native_password`](https://hub.docker.com/_/mysql)到您的服务中：

```
definitions:
  services:
    mysql:
      image: mysql:8.0
      environment:
        MYSQL_DATABASE: 'app'
        MYSQL_ROOT_PASSWORD: 'root'
        MYSQL_DEFAULT_AUTH: 'mysql_native_password' 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-05-02T03:59:50.607

我在使用 laravel 5.6 和默认 mysql 数据库（设置为服务：）运行 bitbucket 管道时遇到了这个问题。

解决方案是使用旧版本的 mysql

```
definitions:
  services:
    mysql:
     image: mysql:5.6 
```

PS：它是 PHP 7.1

# android - 错误找不到与给定名称匹配的资源（在“src”处，值为“@drawable/button1”）

> ID：14612556
> 
> 赞同：5
> 
> 时间：2013-01-30T19:57:40.697
> 
> 标签：android, imagebutton, android-image

**我认为这本书的代码不正确。在我家试过，效果很好。发现我的日食实际上被打破了。不得不删除并重新安装eclipse。**

这是我在这里的第一篇文章，所以如果我不遵守某些规则，请告诉我。我试图搜索并发现一些具有相同错误的帖子，但它们处理的是字符串。我正在关注面向绝对初学者的 Android 应用程序（第 2 版），在第 179 页上，您将 button1.xml 带入了您的 res/drawable。当我进入 layout/activity_main.xml 并输入

```
<ImageButton 
    android:id="@+id/button_one"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/button1"
    android:contentDescription="@string/app_name"/> 
```

它错误地指出 android:src “错误：错误：找不到与给定名称匹配的资源（在 'src' 处，值为 '@drawable/button1'）。”

现在有一些事情让我感到困惑，我正在使用 eclipse 并且我有 4 个可绘制文件夹（drawable-hdpi、drawable-ldpi、drawable-mdpi 和 drawable-xhdpi），我在每个文件夹上都去了 New>File 4 个可绘制文件夹并导入了具有各自分辨率的 button1_focused.png、button1_pressed.png 和 button1_normal.png。我还将 button1.xml 放在每个文件夹中。

button1.xml如下

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
            android:drawable="@drawable/button1_pressed" />
    <item android:state_focused="true"
            android:drawable="@drawable/button1_focused" />
    <item android:drawable="@drawable/button1_normal" />
</selector> 
```

我尝试了 android:background 而不是 android:src 并且也出现了错误。我看到它的错误表明 src （或背景）没有文件。只是不知道该放什么。

Java代码包com.example.ui_designs；

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

ImageButton imageButton = new ImageButton(context);
imageButton.setImageResource(R.drawable.button1);

} 
```

截图链接：[http ://s7.postimage.org/3v4tu9ifv/UI_Designs.png](http://s7.postimage.org/3v4tu9ifv/UI_Designs.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:26:08.823

**我认为这本书的代码不正确。在我家试过，效果很好。发现我的日食实际上被打破了。不得不删除并重新安装eclipse。**

对于我可能造成的任何不便，我深表歉意，并感谢社区的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:12:48.353

根据您的项目资源管理器的屏幕截图...您`button1.xml`的`drawable-hdpi`文件夹中没有。

如果您希望使用所有相同的图像尺寸，密度无关紧要，您可以创建一个新文件夹，然后`drawable`将其处理所有屏幕密度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-20T01:02:11.107

我有一个类似的问题，因为

1：我没有在@/drawable 之后添加正确的图像名称

2：我也没有在drawable-ldpi文件夹中添加图片。

```
<ImageView
    android:id="@+id/imageDisplay"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/nasalogo">
</ImageView> 
```

在我的情况下，我需要在我的 drawable-ldpi 文件夹中添加名为nasiogo 的图像

这也是我的 values/string.xml 的样子

```
<?xml version="1.0" encoding="utf-8"?> 
```

PCWorldRssReaderActivity

```
<string name="text_image_title">Decorating the Sky</string>

<string name="text_image_date">Mon, 19 Aug 2013 00:00:00 EST </string>
<string name="text_image">nasalogo</string>

<string name="text_image_description"> This is mosaic image</string> 
```

之后

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T20:30:24.467

您可以尝试在您的 java 代码中执行此操作吗？

```
ImageButton imageButton = new ImageButton(context);
imageButton.setImageResource(R.drawable.button1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-24T08:18:40.017

我在对项目进行逆向工程时遇到了这个问题，“错误：错误：找不到与给定名称匹配的资源（在'背景'，值为'@color/default_bg'）。”

解决方案：将以下属性添加到“/project_/res/values/colors.xml”

```
<color name="default_bg">#aa000000</color> 
```

最后它看起来像这样：

```
<resources>
  <color name="black_overlay">#66000000</color>
   <color name="default_bg">#aa000000</color>
</resources> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-05T13:57:08.280

还有另一种解决方案。将所有图像文件夹（具有相同名称）复制到所有 4 个可绘制文件夹中。然后执行 android:src="@drawable/filename" 它对我有用！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-16T02:10:11.497

我在 AndroidStudio 中发生过这种情况，结果我的文件被命名为 .png 但却是 jpeg。

# jquery - Jquery 可拖动圆圈包含

> ID：14612561
> 
> 赞同：1
> 
> 时间：2013-01-30T19:57:50.397
> 
> 标签：jquery, containment

我已经为此寻找答案但找不到它......所以希望有人可以帮助我。我正在尝试创建一个包含在圆形（而不是正方形）中的可拖动 div（使用 jquery ui）。现在，我已经将包含设置链接到它的父 div，但无论我尝试什么......它仍然允许可拖动元素进入父方形 div 的角落。我已经尝试设置父 div 的边框半径，使其为圆形而不是方形（但这可能只是一个 css 的东西，并且不会影响实际的 div 形状）。有谁知道如何将可拖动的 div 约束到一个圆圈？谢谢，安迪

```
var containment_radius = 50;

$(this.dragobject).draggable({ 
    drag: function() {
        var position = $(this.dragobject).position();
        var result = limit(position.left, position.top, containment_radius, containment_radius);
        if (!result.limit) {
            $(this.dragobject).x = result.x + "px";
            $(this.dragobject).y = result.y + "px";
        }
        console.log(result);
    } 
});

function limit(x, y, x1, y1) {
    var dist = distance([x, y], [x1, y1]);
    if (dist <= containment_radius) {
        return {x: x, y: y};
    } else {
        return {limit: true};
    }
}

function distance(dot1, dot2) {
    var x1 = dot1[0],
    y1 = dot1[1],
    x2 = dot2[0],
    y2 = dot2[1];
    return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-13T20:43:47.920

此解决方案遵循 Luke H 更新 ui.position 的建议。实现起来很简单（无需扩展现有的可拖动小部件），但我不喜欢它，因为半径必须从可拖动的外部访问，而不是从容器本身获取。

```
var radius = 128;
$('.color-picker-map-selector').draggable({
    containment: '.map',
    drag: function( event, ui ) {
        var x = ui.position.left - radius,
            y = radius - ui.position.top,
            h = Math.sqrt(x*x + y*y);
        if (Math.floor(h) > radius) {
            ui.position.top = radius - Math.round(radius * y / h);
            ui.position.left = Math.round(radius * x / h) + radius;
        }
    }
}); 
```

不需要像许多示例使用的那样复杂的数学函数，例如正弦和余弦。

我首选的解决方案是通过添加形状选项（“矩形、圆形”）来扩展小部件并覆盖内部 _generatePosition 函数。它使用容器的宽度和高度来找到中心，如果容器不是正方形，它会将可拖动对象限制为椭圆。

```
// add shape option to stock draggable
$.widget( "ui.draggable", $.ui.draggable, {
    options: {
        shape: 'rectangular'
    },
    _generatePosition( event, constrainPosition ) {
        var position = this._super( event, constrainPosition );
        if (this.options.shape != 'circular') return position;
        if ( constrainPosition ) {
            if ( this.containment ) {
                if ( this.relativeContainer ) {
                    co = this.relativeContainer.offset();
                    containment = [
                        this.containment[ 0 ] + co.left,
                        this.containment[ 1 ] + co.top,
                        this.containment[ 2 ] + co.left,
                        this.containment[ 3 ] + co.top
                    ];
                } else {
                    containment = this.containment;
                }
                var xRadius = Math.floor((containment[ 2 ] - containment[ 0 ]) / 2),
                    yRadius = Math.floor((containment[ 3 ] - containment[ 1 ]) / 2),
                    x = position.left - xRadius,
                    y = yRadius - position.top,
                    h = Math.sqrt(x*x + y*y);
                if (Math.floor(h) > Math.min(xRadius, yRadius)) {
                    var ye = Math.round(yRadius * y / h),
                    xe = Math.round(xRadius * x / h);
                    if ((Math.abs(y) > Math.abs(ye)) || (Math.abs(x) > Math.abs(xe))) {
                        position.left = xe + xRadius;
                        position.top = yRadius - ye;
                    }
                }
            }
        }
        return position;
    }
}); 
```

如果 jQuery UI 人员更改 _generatePosition 的名称和用法，会有一些小问题，但如果他们要更改函数的内部结构会很好，因此它会调用一些辅助函数，比如 _constrain()，这将显着简化此代码.

另请注意，此解决方案不适用于网格对齐，但可以通过一些额外的代码来完成。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:11:39.197

请参阅[此答案](https://stackoverflow.com/a/16131457/289203)，该答案显示了如何使用`drag`事件进行约束。这是通过更新事件处理程序中的`ui.position`变量来完成的。`drag`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T10:44:58.707

Duopixel 回答了这个确切的问题，其中包含一个圆圈的示例，而不是 andyopayne 在此处建议的波浪。

[如何限制圆区域内的运动](https://stackoverflow.com/questions/8515900/how-to-constrain-movement-within-the-area-of-a-circle)

这是示例 [http://jsfiddle.net/7Asn6/](http://jsfiddle.net/7Asn6/)

诀窍是计算与初始和当前拖动位置坐标的距离，使用

`Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));`

然后计算新的 x 和 y 坐标

`x: Math.cos(radians) * canvas.radius + canvas.center[0], y: Math.sin(radians) * canvas.radius + canvas.center[1]`

在拖动回调中：

# ios - 具有多个 NSManagedObjectContext 的 iOS 5 Core Data 重复行

> ID：14612571
> 
> 赞同：2
> 
> 时间：2013-01-30T19:58:35.427
> 
> 标签：ios, core-data, nsfetchedresultscontroller, nsmanagedobjectcontext

我们的表视图控制器使用一个`NSFetchedResultsController`来显示来自 Core Data 的数据。我们在后台下载新数据。当实体在新数据中被修改时，在 iOS 5.1.1 手机上，我们看到它被视为表中的新行而不是更新。无法在 iOS 5.1 模拟器或 iOS 6 设备上复制。

`UIApplicationDelegate`创建一个具有`NSManagedObjectContext`并发类型`NSMainQueueConcurrencyType`。我们的`UITableViewController`工具`NSFetchedResultsControllerDelegate`。在`viewWillAppear`我们去获取新数据。在获取数据的方法中，我们创建了第二个`NSManagedObjectContext`并发类型`NSPrivateQueueConcurrencyType`。我们`performBlock`在那个新的上下文上做一个，做网络调用和 json 解析。有一个`NSFetchRequest`获取以前的数据，所以我们可以删除旧的对象，或者修改任何具有相同 id 的现有实体。修改现有实体或创建新实体后，我们将`deleteObject`使用旧实体对象。然后我们保存这个私有上下文。然后在父上下文中，执行 a`performBlock`以将更改保存在那里。

在 iOS5.1 上，表格不正确。如果我们更改对象，而不是被修改，它会作为新行添加到表中。如果我们离开这个控制器并返回它，获取新数据，它会显示正确的数量。

AppDelegate.m

```
- (void)saveContext
{

    [self.privateWriterContext performBlock:^{
        NSError *error = nil;
        [self.privateWriterContext save:&error];
        // Handle error...
        [[NSNotificationCenter defaultCenter] removeObserver:self     name:NSManagedObjectContextDidSaveNotification object:self.privateWriterContext];
    }];
}

#pragma mark - Core Data stack

- (NSManagedObjectContext *)privateWriterContext
{
    if (__privateWriterContext != nil) {
        return __privateWriterContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        __privateWriterContext = [[NSManagedObjectContext alloc]     initWithConcurrencyType:NSPrivateQueueConcurrencyType];
        [__privateWriterContext setPersistentStoreCoordinator:coordinator];
    }
    return __privateWriterContext;
}

- (NSManagedObjectContext *)managedObjectContext
{
    if (__managedObjectContext != nil) {
        return __managedObjectContext;
    }

NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        __managedObjectContext = [[NSManagedObjectContext alloc]     initWithConcurrencyType:NSMainQueueConcurrencyType];
        [__managedObjectContext setParentContext:self.privateWriterContext];
    }

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(saveContext:)
                                                      name:NSManagedObjectContextDidSaveNotification
                                               object:__managedObjectContext];
    return __managedObjectContext;
} 
```

从服务器获取的类

```
+ (void) fetchFromURL:(NSString *) notificationsUrl withManagedObjectContext (NSManagedObjectContext *)managedObjectContext
{
    NSManagedObjectContext *importContext = [[NSManagedObjectContext alloc]     initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    importContext.parentContext = managedObjectContext;
    [importContext performBlock: ^{

        NSError *error;
        NSURLResponse *response;

        [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

        NSData *responseData = [NSData dataWithContentsOfURLUsingCurrentUser:[NSURL URLWithString:notificationsUrl] returningResponse:&response error:&error];

        [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
        NSMutableSet *newKeys = [[NSMutableSet alloc] init];
        NSArray *notifications;
        if(responseData) {
            NSDictionary* json = [NSJSONSerialization
                                  JSONObjectWithData:responseData
                                  options:kNilOptions
                                  error:&error];

            NSMutableDictionary *previousNotifications = [[NSMutableDictionary alloc] init];
            NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Notification"];

            NSArray * oldObjects = [importContext executeFetchRequest:request error:&error];
            for (Notification* oldObject in oldObjects) {
                [previousNotifications setObject:oldObject forKey:oldObject.notificationId];
            }
            notifications = [json objectForKey:@"notifications"];
            //create/update objects
            for(NSDictionary *notificationDictionary in notifications) {

                NSString *notificationId =  [notificationDictionary objectForKey:@"id"];
                Notification *notification = [previousNotifications objectForKey:notificationId];

                if(notification) {
                    [previousNotifications removeObjectForKey:notificationId];
                } else {
                     notification = [NSEntityDescription insertNewObjectForEntityForName:@"Notification" inManagedObjectContext:importContext];
                     [newKeys addObject:notificationId];
                }
                notification.notificationId = [notificationDictionary objectForKey:@"id"];
                //other properties from the json response

            }

            for (NSManagedObject * oldObject in [previousNotifications allValues]) {
                [importContext deleteObject:oldObject];
            }
        }

        if (![importContext save:&error]) {
            NSLog(@"Could not save to main context after update to notifications: %@", [error userInfo]);
        }

        //persist to store and update fetched result controllers
        [importContext.parentContext performBlock:^{
            NSError *parentError = nil;
            if(![importContext.parentContext save:&parentError]) {
                NSLog(@"Could not save to store after update to notifications: %@", [error userInfo]);
            }
        }];

        }
     ];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:08:47.343

我最近也遇到了这个问题。

问题是由于不同线程中的两个上下文。

在运行 iOS 5.1 的设备上，合并它们会导致它插入新记录而不是更新它。我将后台线程更改为使用主上下文，问题就消失了。

不知道为什么在这种特殊情况下合并不起作用。

# php - PHP 不使用 SSL 证书

> ID：14612573
> 
> 赞同：-1
> 
> 时间：2013-01-30T19:58:43.217
> 
> 标签：php, nginx, apple-push-notifications

我正在尝试使用 feedback.php 文件从我的数据库中删除非活动设备。我有现在工作的脚本代码：

```
<?php
# -*- coding: utf-8 -*-
##
##     Copyright (c) 2010 Benjamin Ortuzar Seconde <bortuzar@gmail.com>
##
##     This file is part of APNS.
##
##     APNS is free software: you can redistribute it and/or modify
##     it under the terms of the GNU Lesser General Public License as
##     published by the Free Software Foundation, either version 3 of
##     the License, or (at your option) any later version.
##
##     APNS is distributed in the hope that it will be useful,
##     but WITHOUT ANY WARRANTY; without even the implied warranty of
##     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##     GNU General Public License for more details.
##
##     You should have received a copy of the GNU General Public License
##     along with APNS.  If not, see <http://www.gnu.org/licenses/>.
##
##
## $Id: processFeedback.php 168 2010-08-28 01:24:04Z Benjamin Ortuzar Seconde $
##

require_once('config.php');
require_once('classes/DataService.php');
require_once('classes/Apns.php');
echo "<br/>Started processing Feedback";
error_reporting(E_ALL);
ini_set( 'display_errors','1'); 

//get the certificates
$certificates = DataService::singleton()->getCertificates();

foreach ($certificates as $certificate) {

    //only process apps that have a certificate associated to it.
    if($certificate->KeyCertFile == ''){

        echo "<br/>Certfile not set for App: [{$certificate->CertificateName}]";
        continue;
    }
    //var_dump($certificate);
    //connect to feedback server
    $certificatePath = $certificateFolder . '/' . $certificate->KeyCertFile;

    $server = DataService::singleton()->getCertificateServer($certificate->CertificateId, 3);
    $apns = new apns('feedback.sandbox.push.apple.com:2196', $certificatePath, $certificate->Passphrase);

    //get tokens
    $feedbackTokens = $apns->getFeedbackTokens();

    //close connection
    unset($apns);

    //print the number of tokens to check for
    $countTotal = count($feedbackTokens);
    echo "<br/>There are [{$countTotal}] tokens notified by feedback";

    //loop trough the tokens
    foreach ($feedbackTokens as $feedbackToken) {

        //only DeActivate devices that where updated before they where removed. Otherwise the user could of installed the app again.
        DataService::singleton()->setDeviceInactive($feedbackToken['devtoken'], $app->AppId, $feedbackToken['timestamp']);
    }
}
echo "<br/>Completed processing Feedback";
?> 
```

（完整来源：[https](https://github.com/bortuzar/PHP-Mysql---Apple-Push-Notification-Server/blob/master) ://github.com/bortuzar/PHP-Mysql---Apple-Push-Notification-Server/blob/master ）

但是我在连接服务器时遇到问题。提供推送通知工作正常，但此反馈脚本不起作用。它没有使用我输入的证书，这就是发生的事情：

```
<br/>Started processing Feedback<br/>Opening connection to: feedback.sandbox.push.apple.com:2196<br/>Clossing connection to: feedback.sandbox.push.apple.com:2196<br/>There are [0] tokens notified by feedback<br/>Opening connection to: feedback.sandbox.push.apple.com:2196<br/>Clossing connection to: feedback.sandbox.push.apple.com:2196<br/>There are [0] tokens notified by feedback<br/>Completed processing Feedback 
```

但是，它回复了 0 个令牌。当我只是连接到一个随机主机时，它显示相同：

```
<br/>Started processing Feedback<br/>Opening connection to: localhost:80<br/>Clossing connection to: localhost:80<br/>There are [0] tokens notified by feedback<br/>Opening connection to: localhost:80<br/>Clossing connection to: localhost:80<br/>There are [0] tokens notified by feedback<br/>Completed processing Feedback 
```

得到答复需要一段时间。如果我没记错的话，我想这与证书有关，或者我错过了某种 PHP 包括？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:31:45.667

[如果我从您之前的问题](https://stackoverflow.com/questions/14606970/php-trying-to-get-property-of-non-object/14608370#14608370)中没记错的话，您的 $server 变量是 NULL。这对我来说意味着真正的问题在于

```
$server = DataService::singleton()->getCertificateServer($certificate->CertificateId, 3); 
```

如果您的证书一切正常，则应该返回有效的服务器。但它没有 - 您暂时通过硬编码`$server`下一行中的变量来解决这个问题：

```
$apns = new apns('feedback.sandbox.push.apple.com:2196', $certificatePath, $certificate->Passphrase); 
```

换句话说 - 你怀疑你的证书有问题是正确的。

您可能会发现此[较早答案](https://stackoverflow.com/questions/1635111/apple-push-notification-service-certificate-install-server-side)中提供的信息对解决该问题很有用。

# python - (Python 2.7) 变量返回“[]”而不是期望的结果

> ID：14612578
> 
> 赞同：0
> 
> 时间：2013-01-30T19:58:53.357
> 
> 标签：python

该变量返回“[ ]”而不是所需的结果。

```
S = set(['a', 'b','d','z','x','y'])
collect = set()
step = set([''])
while step:
   step = set(a+b for a in step for b in S if len(a+b) == 6)
   collect |= step
print sorted(collect) 
```

另外，我怎样才能使这个循环通过组合而不是一组来播放？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:01:24.743

在不知道“期望结果”的含义的情况下，这是您的第二个问题：

```
>>> len('' + 'a')
1 
```

（第一个问题是缩进。）

* * *

所以...wtf你在用这条线吗？

```
step = set(a+b for a in step for b in S if len(a+b) == 6) 
```

# macos - 如何在 OSX 的 bash 案例语句中失败？

> ID：14612580
> 
> 赞同：10
> 
> 时间：2013-01-30T19:58:58.673
> 
> 标签：macos, bash

我有一些我想在 OSX 中运行的 bash 脚本，但其中一些包含失败的大小写终止符 ';&' 这似乎不适用于 Mac。这是示例代码：

```
#!/bin/bash
case $1 in
    test)
        echo "go" ;&    
    test)
        echo "go2" ;;
esac 
```

在 Cygwin 中， .\test.sh 测试产生

```
go
go2 
```

但在 OSX 上，

```
./test.sh: line 4: syntax error near unexpected token `&'
./test.sh: line 4: `            echo "go" ;& 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T20:07:28.790

您的代码在我的 ubuntu 系统 bash 4.2.24 上可以正常工作。

我认为您使用的是早期版本的 bash，它不支持`;&`自 bash 4 以来添加的 fall-through。

来自[维基百科](http://en.wikipedia.org/wiki/Switch_statement)：

```
Fall through is done using ;& (new since Bash 4) whereas ;; acts as a case break. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T21:29:20.097

也许您可以尝试使用`/bin/zsh`而不是`/bin/bash`？您的示例代码适用于“zsh 4.3.9”，但不适用于我的 MacOS X 10.6.8 上的“bash 3.2.48”。

否则，脚本必须以某种方式重写……但如果不知道它做了什么，就很难确切地说出如何。根据需要简单地复制代码可能是最简单的选择，并且应该适用于所有情况。

# perl - 为什么我的 perl 哈希没有返回值？

> ID：14612581
> 
> 赞同：3
> 
> 时间：2013-01-30T19:58:59.790
> 
> 标签：perl, hash

我正在摄取一个 CSV 文件：

```
"ID","LASTNAME","FIRSTNAME","PERM_ADDR1","PERM_ADDR2","PERM_CITY","PERM_ST","PERM_ZIP","DOB","LIB_TYPE","BARCODE","EMAIL","LOCAL_ADDR1","LOCAL_ADDR2","LOCAL_CITY","LOCAL_ST","LOCAL_ZIP","CAMPUS_ADDR1","CAMPUS_ADDR2","CAMPUS_CITY","CAMPUS_ST","CAMPUS_ZIP","DEPARTMENT","MAJOR"
"123","Lastname","Firstname","123 Home St","","Home City","HS","12345-6789","0101","S","1234567890","last.first@domain.local","123 Local St","","Local City","LS","98765-4321","123 Campus St","","Campus City","CS","54321-6789","IT","" 
```

使用`Text::CSV`，我试图将其解析为哈希：

```
my $csv = Text::CSV->new();

chomp(my $line = <READ>);
$csv->column_names(split(/,/, $line));

until (eof(READ)) {
    $line = $csv->getline_hr(*READ);
    my %linein = %$line;
    my %patron;

    $patron{'patronid'} = $linein{'ID'};
    $patron{'last'} = $linein{'LASTNAME'};
    $patron{'first'} = $linein{'FIRSTNAME'};

    print p(%linein)."\n";
    print p(%patron)."\n";
} 
```

使用此代码，最后的打印语句（使用`Data::Printer`）返回：

```
{
    "BARCODE"        1234567890,
    "CAMPUS_ADDR1"   "123 Campus St",
    "CAMPUS_ADDR2"   "",
    "CAMPUS_CITY"    "Campus City",
    "CAMPUS_ST"      "CS",
    "CAMPUS_ZIP"     "54321-6789",
    "DEPARTMENT"     "IT",
    "DOB"            0101,
    "EMAIL"          "last.first@domain.local",
    "FIRSTNAME"      "Firstname",
    "ID"             123,
    "LASTNAME"       "Lastname",
    "LIB_TYPE"       "S",
    "LOCAL_ADDR1"    "123 Local St",
    "LOCAL_ADDR2"    "",
    "LOCAL_CITY"     "Local City",
    "LOCAL_ST"       "LS",
    "LOCAL_ZIP"      "98765-4321",
    "MAJOR"          "",
    "PERM_ADDR1"     "123 Home St",
    "PERM_ADDR2"     "",
    "PERM_CITY"      "Home City",
    "PERM_ST"        "HS",
    "PERM_ZIP"       "12345-6789"
}
{
    first      undef,
    last       undef,
    patronid   undef
} 
```

我不明白为什么`%patron`没有填充来自`%linein`. 我想知道这是否与 using 有某种关系`Text::CSV`，因为我正在解析脚本中其他地方的其他文件并且它们工作得很好。然而，这些文件不是 CSV，而是固定宽度，所以我手动解析它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T20:08:58.537

尝试

```
 $csv->column_names(map {/"(.*)"/ and $1} split(/,/, $line)) 
```

代替

```
 $csv->column_names(split(/,/, $line)); 
```

您的 CSV 键被定义为文字字符串

```
 '"LASTNAME"' ,  '"FIRSTNAME"' 
```

而不仅仅是

```
 'LASTNAME' ,  'FIRSTNAME' 
```

`Data::Printer`在向您展示发生了什么方面做得还不错 - 中的所有键`p(%linein)`都显示为包含双引号作为字符串的一部分，而不是`p(%patron)`

# ios - ios：关于 NavigationController 的问题。强制与否？

> ID：14612583
> 
> 赞同：0
> 
> 时间：2013-01-30T19:59:01.453
> 
> 标签：ios

我有一个关于 NavigationController 的问题。

首先，如果我使用情节提要和几个视图，导航控制器是强制性的吗？

我有一个第一个 ViewController，并且我在 Push 模式下创建了一个链接（Storyboard Segue）到另一个视图（inappsettingskit 视图）。是否必须有一个 NavigationController 才能工作，或者我可以在没有 NavigationController 帮助的情况下通过 Push 打开第二个视图？

另一个问题：我尝试将 NavigationController 链接（根）添加到我的主 ViewController。但我不想在这个视图上有一个导航栏。它会自动在此视图上放置一个带有“显示”按钮的导航栏。我可以删除它吗？

我试图在 NavigationController 的选项中删除它（取消选中导航栏），但它仍然出现在我的状态栏上！我怎样才能完全删除它？

![在此处输入图像描述](../Images/c69dc5673505eaa9c88acdd882a2e3d6.png)

最后一个问题：如果我将 Push Segue 视图中的按钮链接到第二个视图控制器，它就可以工作。但是，如果我从工具栏链接按钮，它就不起作用..缺少什么？

![在此处输入图像描述](../Images/bedc7695783b4ad99954c643499a21b3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:05:40.923

1.) 不，导航控制器只是让在多个视图之间导航更容易。

2.) 为了使标准的“Push”segue 工作，您必须使用导航控制器

3.) 您可以在代码中隐藏导航栏。这样做的好地方是`viewWillAppear`

```
[self.navigationController setNavigationBarHidden:YES animated:YES]; 
```

我不确定为什么工具栏上的按钮不起作用，但请尝试使用 a`UIBarButtonItem`而不是 a`UIButton`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:05:50.613

如果您使用的是 push segues，是的，您应该有一个导航控制器。如果您不希望导航栏可见，请在 Interface Builder 中选择导航控制器，然后在 Interface Builder 最右侧面板的属性检查器中取消选中“显示导航栏”选项。

![在此处输入图像描述](../Images/a0b27991af41aaa92728dc36f780e35b.png)

您可以通过 以编程方式显示或隐藏控制器的导航栏[`setNavigationBarHidden:animated:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006934-CH3-SW9)。

通过拥有一个导航栏隐藏的导航控制器，您可以享受导航控制器跟踪视图控制器堆栈的功能，使您能够弹出视图控制器（或弹出“到”特定控制器或弹出到根控制器）。但是，如果导航栏被隐藏，您显然会丢失内置的“返回”按钮。

最后，如果您想要在 a`UIToolbar`或导航栏中使用按钮，您应该使用 a `UIBarButtonItem`（在 Interface Builder 控件列表中列为“Bar Button Item”）。

# android - android layout_gravity - 如何将广告单元与底部对齐并将按钮放置在广告单元上方

> ID：14612585
> 
> 赞同：2
> 
> 时间：2013-01-30T19:59:16.610
> 
> 标签：android, android-layout

我试图让按钮和广告单元位于屏幕底部，按钮直接位于广告单元上方。但是按钮仍然在页面的中间。有任何想法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/wallpaperview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:layout_gravity="center"
        android:scaleType="centerCrop" />

   <LinearLayout
       android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/banner_adview"
        android:layout_centerInParent="true"
       android:orientation="horizontal" 
       >
       <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/button_use" 
            android:onClick="onUse" />
        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/button_share" 
            android:onClick="onShare" />
    </LinearLayout>

    <com.mobclix.android.sdk.MobclixMMABannerXLAdView
        android:id="@+id/banner_adview"
        android:layout_width="320dip"
        android:layout_height="50dip"
        android:layout_gravity="center"
        android:layout_alignParentBottom="true"
      />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:23:21.277

您可以尝试使用将线性布局设置为`android:layout_above="@+id/banner_adview"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:17:11.323

消除

```
android:layout_centerInParent="true" 
```

从你的`LineraLayout`，这应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T08:25:17.957

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
    android:orientation="vertical" >  
  <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true" >
    <include layout="@layout/buttons" />
  <com.mobclix.android.sdk.MobclixMMABannerXLAdView
    android:id="@+id/banner_adview"
    android:layout_width="320dip"
    android:layout_height="50dip"
    android:layout_gravity="center"
    android:layout_alignParentBottom="true"
  />
 </RelativeLayout> 
```

> 创建按钮 xml 并在主布局中包含它

按钮.xml

```
<LinearLayout
   android:layout_width="fill_parent"
    android:layout_height="wrap_content"
   android:orientation="horizontal" 
   >
   <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_use" 
        android:onClick="onUse" />
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_share" 
        android:onClick="onShare" />
</LinearLayout> 
```

# c - 在函数 C 中分配 void 指针

> ID：14612586
> 
> 赞同：-2
> 
> 时间：2013-01-30T19:59:29.357
> 
> 标签：c, pointers, malloc, free

如果我像这样分配一个 void 指针，那么我在尝试释放指针时会遇到访问冲突。

```
int Foo(void* ptr)
{
     *((void**)ptr) = malloc(25);
     ((char*)ptr)[0] = 'A';
     free(ptr); //crashes access violation
} 
```

如果我将 void 指针传递给函数并尝试将其释放到函数之外，也会发生同样的情况

```
int main()
{
     void* ptr;
     Foo(&ptr);
     printf("%s \n", (char*)&ptr); //works
     free(ptr); //crashes access violation
     retun 0;
} 
```

任何线索如何释放这个指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:02:53.833

您不是在尝试释放相同的指针，请尝试`free(*((void**)ptr));`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T20:03:31.490

这是错误的，你不能在你的函数中释放 ptr ，以避免混淆 pass `void**`：

```
int Foo(void** ptr)
{
   *ptr = malloc(25);
   ((char *)*ptr)[0] = 'A';
   free(*ptr); 
} 
```

# ef-code-first - EntityFramework 代码优先是否适用于 Oracle 的托管 ODP.net 提供程序？

> ID：14612587
> 
> 赞同：1
> 
> 时间：2013-01-30T19:59:34.883
> 
> 标签：ef-code-first, entity-framework-4.1, odp.net

我们已经使用存储库模式构建了应用程序的数据访问层，并且我们正在使用托管 ODP.net 提供程序来处理 oracle 数据。在尝试使实体框架代码优先与 oracle 一起使用时，我们遇到了一些问题。

```
public class Repository<TObject>
            where TObject : class
{        
protected DbSet<TObject> DbSet
        {
            get
            {
                return Context.Set<TObject>();
            }
        }

public virtual TObject Create(TObject TObject)
        {
            var newEntry = DbSet.Add(TObject);

             return newEntry;
        }

...
} 
```

创建函数实际上并不是在数据库中创建一个条目。获取功能虽然工作正常。

关于这个问题的任何建议..？或者，任何人都可以建议使用实体框架代码优先遵循 ODP 是否是一种好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T21:24:31.963

ODP.NET 托管数据提供程序不支持使用实体框架进行代码优先开发。从 oracle 客户端目录下的 odp.net/doc 中的 readme.txt 中：

“7\. ODP.NET 11.2.0.3 不支持 Code First 也不支持 DbContext API。”

您必须使用模型优先或数据库优先的方法。

# c# - 有没有办法在另一个表单上显示一个表单的一部分？

> ID：14612589
> 
> 赞同：3
> 
> 时间：2013-01-30T19:59:38.157
> 
> 标签：c#, winforms, .net-4.0

我有一个表格。我要做的就是在另一个表单上显示该表单的一部分。我不希望它具有功能或任何东西。我基本上只是希望它是一张照片。这可能吗？如果可以，怎么做？

像

```
display = new display(form, new rectangle(X1, X2, Y1, Y2)); 
```

有这种可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T20:05:11.847

是的，你可以这样做：

```
Bitmap bmp = new Bitmap(myWidth, myHeight);
myForm.DrawToBitmap(bmp, new Rectangle(x, y, bmp.Width, bmp.Height)); 
```

然后将此位图传递给另一个表单。

# microsoft-metro - 在 Windows 商店应用程序中购买多个商品

> ID：14612590
> 
> 赞同：1
> 
> 时间：2013-01-30T19:59:39.193
> 
> 标签：microsoft-metro, in-app-purchase

我需要在metro应用中为同一用户购买一些产品两次或三次或更多次，windows 8的常规应用内购买支持这种购买方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:41:00.473

如果您谈论的是多种*不同*产品的应用内购买，这很简单，本文和示例中对此进行了详细说明：

*   [如何支持应用内购买](http://msdn.microsoft.com/en-us/library/windows/apps/hh694067)
*   [试用应用和应用内购买示例](http://code.msdn.microsoft.com/windowsapps/Licensing-API-Sample-19712f1a)

但是，听起来您在谈论消耗品——例如，为您在游戏中的角色购买一包金币，并允许用户多次购买该包。

Windows 应用商店应用程序不直接支持这种购买方式（尽管 Windows Phone SDK 具有[ProductLicense.IsConsumable](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.applicationmodel.store.productlicense.isconsumable)），但根据您的方案，有一种[解决方法](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/07222726-3adc-4d49-91d7-ed64381b8057)可能对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T16:38:37.757

在 Windows 8 商店消耗品购买尚未实现，但有一个解决方法，如果您需要出售一个项目（即 book1）2,3 次或更多次，您需要在 Windows 商店中使用不同的名称定义它，如 book1_1和 book1_2 ，当用户点击购买按钮时，你卖 book_1 和第二次卖 book1_2 ，如果你需要你可以定义 book1_3 和 4,5,....

# string - 批处理 - 附加字符串

> ID：14612592
> 
> 赞同：0
> 
> 时间：2013-01-30T19:59:41.443
> 
> 标签：string, loops, batch-file, paste

我正在尝试制作一个必须回显仅包含两个字符的字符串的 for 语句。字符串的类型类似于“aaabbb”。我的问题是 echo 命令每次调用时都会换行，所以如果我写如下内容：

```
FOR %%i IN (<condition>) DO ECHO a
FOR %%i IN (<condition>) DO ECHO b 
```

结果将是这样的：

```
a
a
a
b
b
b 
```

我想的是“也许回显一个独特的字符串？” 所以我想知道是否有一种将字符/变量附加到另一个变量中的方法。

感谢您的支持，等待回复，戴夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:08:39.103

解决方案：

```
@ECHO off &SETLOCAL EnableDelayedExpansion

:vars
    SET "fC=a"
    SET "sC=b"
    SET "toEcho="

    PAUSE

    FOR /L %%f IN (1, 1, 3) DO (
        IF %%f == 1 SET "toEcho=!toEcho!%fC%"
        IF %%f == 2 SET "toEcho=!toEcho!%fC%"
        IF %%f == 3 SET "toEcho=!toEcho!%fC%"
    )

    FOR /L %%f IN (4, 1, 6) DO (
        IF %%f == 4 SET "toEcho=!toEcho!%sC%"
        IF %%f == 5 SET "toEcho=!toEcho!%sC%"
        IF %%f == 6 SET "toEcho=!toEcho!%sC%"
    )

    ECHO %toEcho%

GOTO end

:end
    PAUSE 
```

真正的项目是一个酒吧。我将完成级别的百分比作为参数提供给标签，这对我来说是一个完整的加载栏！

第一个参数是多大的酒吧必须是信息。

```
:bar size loaded
    CLS

    SET /A "toDo=(%~1*%~2)/100"
    SET /A "remains=%~1-%toDo%"
    ECHO %~2%%

    SET "bar_up=%corUL%"
    FOR /L %%i IN (1, 1, %~1) DO SET "bar_up=!bar_up!%linHo%"
    SET "bar_up=!bar_up!%corUR%
    ECHO %bar_up%

    SET "bar_ce=%linVe%"
    FOR /L %%i IN (1, 1, %toDo%) DO SET "bar_ce=!bar_ce!%barDo%"
    FOR /L %%i IN (1, 1, %remains%) DO SET "bar_ce=!bar_ce!%barSp%"
    SET "bar_ce=!bar_ce!%linVe%
    ECHO %bar_ce%

    SET "bar_do=%corDL%"
    FOR /L %%i IN (1, 1, %~1) DO SET "bar_do=!bar_do!%linHo%"
    SET "bar_do=!bar_do!%corDR%
    ECHO %bar_do%

    EXIT /B 
```

其他变量是：

corUL = 左上角字符

corUR = 右上角字符

corDL = 左下角字符

corDR = 右下角字符

linHo = 水平线字符

linVe = 竖线字符

barDo = 指示条的完成部分的字符

barSp = 指示条的空白部分的字符

# linux - 如何使用 schell 脚本从文件中读取元素，进行一些计算并写回？

> ID：14612595
> 
> 赞同：0
> 
> 时间：2013-01-30T19:59:53.277
> 
> 标签：linux, file, shell, awk

我只是脚本语言的新手。

现在我有一个文件，里面是：

```
>   A1 B1 C1
>   A2 B2 C2
>   A3 B3 C3 
```

我只想使用 shell 脚本（bash）逐个元素地读取文件。然后我想对元素 A1、A2 和 A3 进行一些计算，然后将它们写回新文件（或旧文件）。所以新文件将是（假设计算结果为 D1，D2 和 D3）：

```
 D1 B1 C1
 D2 B2 C2
 D3 B3 C3 
```

计算是通过命令“date -d @(A's value)”将 Unix 纪元时间（A 的值）转换为人类可读的时间（D 的值）。

我尝试使用 awk 命令：

```
awk '{$1=`date -d @$1`}' test.txt 
```

但它似乎有一些语法错误：>错误是：

```
awk: {$1=`date -d @$3`}
awk:     ^ invalid char '`' in expression 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:29:41.793

你的要求太**不清楚**了！你的意思是什么计算？

我可以给你举个例子，希望对你有帮助：

```
kent$  cat test.txt
100 B1 C1
200 B2 C2
300 B3 C3

# in this example, the "calculation" is getting the squre of A1
kent$  awk '{$1*=$1}1' test.txt
10000 B1 C1
40000 B2 C2
90000 B3 C3

#If you want to get the result in a newfile.txt, do this:

kent$  awk '{$1*=$1}1' test.txt >newfile.txt

#then

kent$  cat newfile.txt 
10000 B1 C1
40000 B2 C2
90000 B3 C3 
```

**编辑**

在这里我可以给你一个如何`date`在 awk 中调用的例子：

```
kent$  echo "1359579362 B1 C1"|awk '{"date -d @"$1|getline $1}1'                                                                                                            
Wed Jan 30 21:56:02 CET 2013 B1 C1 
```

我想这就是你要找的。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T01:31:18.887

如果您需要在此使用 UNIX 日期而不是 gawks 内置时间函数，则只需在 shell 中完成所有操作：

```
while read -r secs rest
do
   echo "$(date -d @"$secs") $rest"
done < test.txt 
```

如果可能，请使用 gawk。

# sql - Access数据库中如何获取附件的文件名

> ID：14612600
> 
> 赞同：0
> 
> 时间：2013-01-30T20:00:27.073
> 
> 标签：sql, vba

在 Microsoft Access 中，我们可以将文件附加到列中（数据类型：附件）。

我们可以使用以下方法检索 FileName：

```
SELECT Persons.SSN, Persons.Attachment.FileName
FROM Persons; 
```

现在我们只需要保留文件名（文本）来减少总大小，接近 2GB。我创建了一个列并尝试用它收集 FileName。这是`VBA`代码：

```
strSQL = "UPDATE Persons " & _
"SET AttachedFilename = Persons.Attachment.FileName " & _
"WHERE Attachment.FileName Is NOT NULL"

CurrentDb.Execute strSQL 
```

错误：

```
Run-time error '3061'
Too few parameters. Expected 1. 
```

如果我把它改成

```
...
"SET AttachedFilename = 'aaaaa' " & _
... 
```

然后，更新处理没有问题。

执行此更新的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:30:07.793

我认为您`"UPDATE Persons"`应该在之后缺少一个空格**`"UPDATE Persons "`**

**编辑** 刚刚在我的 Access 2007 上尝试过，这是你需要运行的

```
UPDATE Persons AS t1 

INNER JOIN (
SELECT ssn, Persons.Attachment.FileName as fn
FROM Persons
) AS t2 

ON t1.ssn = t2.ssn 
SET t1.AttachmentFileName = fn; 
```

很奇怪，您可以选择***Persons.Attachment.FileName***但是当您更新时，它不起作用

# file - 带有命令行参数的 Bash 脚本，这些参数是文件

> ID：14612603
> 
> 赞同：0
> 
> 时间：2013-01-30T20:00:33.667
> 
> 标签：file, bash, unix, command-line-arguments

我正在尝试编写一个 bash 脚本，它将文件作为命令行参数并将该文件的名称、行数和最后修改日期附加到文件中。我对如何从 bash 脚本中访问该文件以及命令行参数在脚本中的行为方式感到困惑。

到目前为止，这是我的脚本：

```
#!/bin/bash

filename = $1
linecount = $(wc -l $1)
lastmod = $(date -r $1)
echo "$filename $linecount $lastmod" >> $1 
```

我认为我在引用方面做错了什么`$1`。通常对如何操作作为文件的命令行参数感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:06:13.687

删除等号周围的空格。shell 脚本中的分配必须像这样混合在一起：

```
filename=$1
linecount=$(wc -l $1)
lastmod=$(date -r $1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:06:43.460

位置参数 ($1, $2, ...) 是正确的方法。您可能会遇到特殊字符（如空格）和转义的问题，但否则您的脚本应该可以正常运行。

# bean-validation - 如何让 JSR303 失败以在页面中显示错误

> ID：14612611
> 
> 赞同：0
> 
> 时间：2013-01-30T20:00:54.340
> 
> 标签：bean-validation

我正在关注[这个问题的公认答案](https://stackoverflow.com/questions/1972933/cross-field-validation-with-hibernate-validator-jsr-303)

它似乎有效，但是当验证失败时，我没有在我的页面中收到任何消息。我有带有适当路径的 form:errors 标记。但是很遗憾，您返回页面时没有显示任何错误。如何像常规 JSR-303 验证一样显示错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:57:08.820

我想通了，在验证器中的失败场景中，您只需要使用以下内容。

`constraintContext.buildConstraintViolationWithTemplate( "A value must be provided for this field." ).addNode( firstFieldName ).addConstraintViolation();`

# php - Facebook SDK 登录用户无需转到登录 url

> ID：14612613
> 
> 赞同：0
> 
> 时间：2013-01-30T20:00:55.623
> 
> 标签：php, facebook, codeigniter, facebook-graph-api, facebook-php-sdk

出于某种原因，每当我登录 Facebook（即 facebook.com）时，用户都会在使用 Facebook SDK 的我的网站（两次刷新后）上自动进行身份验证。但奇怪的是用户不需要点击我使用`getLoginUrl()`这里发生的事情生成的生成的登录 url？下面是我检查用户是否登录的功能。

```
function IsUserLoggedIn()
{
    $ci=& get_instance();

          try
          {
            $me = $ci->facebook->api('/me');
            $user = $ci->facebook->getUser();

              if ($me&&$user)
                {
                  //These var dumps show the right info.
                  var_dump($user);
                  var_dump($me);
                  return TRUE;   
                }

          } 
          catch (FacebookApiException $e) {
            //User is not logged in

             $ci->load->library('session');

                    $user_id = $ci->session->userdata('user_id');
                    $is_user_logged_in =  $ci->session->userdata('logged_in');

                    if(($user_id != FALSE)&&($is_user_logged_in != FALSE))
                    {
                        return TRUE;
                    }
                    else
                    {   
                        return FALSE;
                    }
          }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:37:34.350

当用户通过 Facebook 登录时，您已加载的 SDK 会自动检查关联的 Facebook cookie，因此该用户也已登录您的网站：

```
try
          {
            $me = $ci->facebook->api('/me'); //The user has an active session, no matter if that was from facebook login or from website login using Facebook SDK
            $user = $ci->facebook->getUser(); //So you successfully get the user data

              if ($me&&$user)
                {
                  //These var dumps show the right info.
                  var_dump($user);
                  var_dump($me);
                  return TRUE;   
                }

          } 
```

# encryption - 一个好的 Diffie-Hellman 密钥生成需要多大的素数？

> ID：14612615
> 
> 赞同：4
> 
> 时间：2013-01-30T20:00:59.510
> 
> 标签：encryption

我一直在浏览示例代码，展示如何执行 DH 密钥交换。超级简单，我理解。但是，我不知道 p 和 q 的适当大小应该是多少。在样本中，数字非常小。但我假设，在实践中，它们应该更大。大多少？16-22 位素数就足够了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T13:44:43.490

为 DH 选择安全组需要的不仅仅是使用足够大的素数。由于素数可以重复使用，因此可以重复使用预先计算的参数。例如， [IETF RFC 3526](https://www.rfc-editor.org/rfc/rfc3526)有许多提议的组。第 8 节估计了每个提议组的安全性。

另请注意，Diffie-Hellman 实现通常会避免使用小 q（不幸的是 SquareRootOfTwentyThree 提出的）。原因是[亚群限制攻击](http://en.wikipedia.org/wiki/Small_subgroup_confinement_attack)。已选择上述 IETF 组来避免此类攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T22:10:43.250

假设**q**表示子组模**p**的大小，2013 年的一些安全值是前者的 224 位和后者的 2048 位。就十进制数字而言，分别表示 68 和 309。

一个检查关于加密密钥长度的各种意见的好网站是（不开玩笑）[http://www.keylength.com](http://www.keylength.com)。在您的情况下，关于离散对数的那些与您相关。

# svn - 使用 Wamp 设置 SVN

> ID：14612617
> 
> 赞同：0
> 
> 时间：2013-01-30T20:01:06.257
> 
> 标签：svn, wamp

我想和其他人一起做一个网站。为此，我相信带有 WampServer 的 SVN 存储库是最好的解决方案，不是吗？

但是我在安装它时遇到了问题。我遵循了本教程：[http ://www.reloadedpc.com/other/setup-wamp-svn-subversion-windows/](http://www.reloadedpc.com/other/setup-wamp-svn-subversion-windows/)

在我添加行之前：

```
LoadModule dav_module modules/mod_dav.so
LoadModule dav_fs_module modules/mod_dav_fs.so
LoadModule dav_svn_module modules/mod_dav_svn.so
LoadModule authz_svn_module modules/mod_authz_svn.so 
```

一切正常（WAMP 图标为绿色）。但是之后，WAMP 图标是橙色的。请问你能帮帮我吗 ？我已经尝试重新启动计算机。

Wamp：2.2 SVN：1.6.6

我的日志：

```
[Wed Jan 30 21:20:26 2013] [notice] Apache/2.2.22 (Win64) PHP/5.3.13 configured -- resuming normal operations
[Wed Jan 30 21:20:26 2013] [notice] Server built: May 13 2012 19:41:17
[Wed Jan 30 21:20:26 2013] [notice] Parent: Created child process 5084
[Wed Jan 30 21:20:26 2013] [notice] Child 5084: Child process is running
[Wed Jan 30 21:20:26 2013] [notice] Child 5084: Acquired the start mutex.
[Wed Jan 30 21:20:26 2013] [notice] Child 5084: Starting 64 worker threads.
[Wed Jan 30 21:20:26 2013] [notice] Child 5084: Starting thread to listen on port 80.
[Wed Jan 30 21:20:26 2013] [notice] Child 5084: Starting thread to listen on port 80.
[Wed Jan 30 21:21:19 2013] [notice] Parent: Received shutdown signal -- Shutting down the server.
[Wed Jan 30 21:21:19 2013] [notice] Child 5084: Exit event signaled. Child process is ending.
[Wed Jan 30 21:21:20 2013] [notice] Child 5084: Released the start mutex
[Wed Jan 30 21:21:21 2013] [notice] Child 5084: All worker threads have exited.
[Wed Jan 30 21:21:21 2013] [notice] Child 5084: Child process is exiting
[Wed Jan 30 21:21:21 2013] [notice] Parent: Child process exited successfully. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:08:35.993

如果我得到你的意思是在你添加了那些 LoadModule 行之后它对你不起作用，那么最有可能的问题是你的模块有问题或者你缺少一个。检查错误日志，您应该知道发生了什么：

```
c:\wamp\logs\apache_error.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:55:37.707

好吧，推荐的配置（`LoadModule`部分）是

```
LoadModule dav_module         modules/mod_dav.so
LoadModule dav_svn_module     modules/mod_dav_svn.so
LoadModule authz_svn_module   modules/mod_authz_svn.so 
```

*   `dav_module`， 不是`dav=_module`
*   没有人讲述`dav_fs_module`

# oracle - DBMS_METADATA 和其他包无效

> ID：14612619
> 
> 赞同：0
> 
> 时间：2013-01-30T20:01:11.867
> 
> 标签：oracle, database, utility

我在本地系统上运行数据库，并通过家庭网络中的笔记本电脑访问它。今天偶然查看了SYS对象的状态，发现DBMS_METADATA、DATA_PUMP包都失效了。我也无法运行 EXPDP 实用程序。有关如何重新编译此对象并更正状态的任何想法？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T07:12:03.627

好吧，我终于想通了-尽管这有点蛮力的方法。在管理工具中，我不得不运行 catalog.sql 和 catproc.sql——它们重新创建了 sys 对象。

这之后 utlrp.sql 解决了我所有的问题，现在所有对象都成功编译了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:43:24.323

```
sqlplus / as sysdba @?/rdbms/admin/utlrp 
```

应该重新编译所有无效对象。剩下的问题是：它们为什么/如何/何时变得无效，它们曾经有效吗？你检查 dba_registry 了吗？

```
select * from dba_registry; 
```

通常所有组件都应该是有效的。

# javascript - 如何用一个变量放置两个执行语句？

> ID：14612621
> 
> 赞同：0
> 
> 时间：2013-01-30T20:01:13.487
> 
> 标签：javascript, variables, dojo, deferred

我想使用 javascript/dojo 用一个变量触发以下两个执行语句。

```
identifyTaskParcels.execute(identifyParams);
identifyTaskZoning.execute(identifyParams); 
```

我尝试了各种变体：

```
var deferred = [identifyTaskParcels.execute(identifyparams), identifyTaskZoning.execute(identifyParams)]; 
```

这是可以做到的吗？

***编辑***

我正在尝试构建一个 Web 地图应用程序，该应用程序从 2 个服务中提取信息并将它们显示在带有功能信息的信息窗口/弹出窗口中。

使用 1 项服务很容易做到，但我发现使用 2 项服务很难做到。有效的代码示例：

**编辑 2**

```
 dojo.require("esri.dijit.Popup"); //Infowindow

var identifyTask,identifyParams;    

      function mapReady(map){

       dojo.connect(map,"onClick",executeIdentifyTask);

       //create identify tasks and setup parameters 
       identifyTaskZoning = new esri.tasks.IdentifyTask("https:path/to/url/service");
       identifyTaskParcels = new esri.tasks.IdentifyTask("https://path/to/url/service");

            //Set Zoning Parameters
       identifyParamsZoning = new esri.tasks.IdentifyParameters();
       identifyParamsZoning.tolerance = 3;
       identifyParamsZoning.returnGeometry = true;
       identifyParamsZoning.layerIds = [0,1,2,3,4];
       identifyParamsZoning.layerOption = esri.tasks.IdentifyParameters.LAYER_OPTION_VISIBLE;
       identifyParamsZoning.width  = map.width;
       identifyParamsZoning.height = map.height;
            //Set Parcel Parameters
       identifyParamsParcels = new esri.tasks.IdentifyParameters();
       identifyParamsParcels.tolerance = 3;
       identifyParamsParcels.returnGeometry = true;
       identifyParamsParcels.layerIds = [0,1,2,3,4];
       identifyParamsParcels.layerOption = esri.tasks.IdentifyParameters.LAYER_OPTION_VISIBLE;
       identifyParamsParcels.width  = map.width;
       identifyParamsParcels.height = map.height;

       //resize the map when the browser resizes
       dojo.connect(dijit.byId('map'), 'resize', map,map.resize);
      };

   function executeIdentifyTask(evt){
     identifyParamsParcels.geometry = evt.mapPoint;
     identifyParamsParcels.mapExtent = map.extent;
     var deferred = identifyTaskParcels.execute(identifyParamsParcels);
     deferred.addCallback(function(response){
       if (response.length > 0) {
//         console.log(response.length)
//         response is an array of identify result objects    
//         Let's return an array of features.
        return dojo.map(response, function(result){
          var feature = result.feature;
          feature.attributes.layerName = result.layerName;
          if(result.layerName === 'TaxParcel'){
              console.log(feature.attributes.NAME);
              var template = new esri.dijit.PopupTemplate({
                            title:"Parcels",
                            description:"<b>Parcel ID:</b> {Parcel Identification Number} <br/> <b>Address:</b> {Site Address}"
                            });
              feature.setInfoTemplate(template);
            }

                return feature;
        });
        }
      else {
          identifyParamsZoning.geometry = evt.mapPoint;
          identifyParamsZoning.mapExtent = map.extent;
          var deferred = identifyTaskZoning.execute(identifyParamsZoning);
          deferred.addCallback(function(response){
            // response is an array of identify result objects    
            // Let's return an array of features.
            return dojo.map(response, function(result){
              var feature = result.feature;
              feature.attributes.layerName = result.layerName;
            if(result.layerName === 'Zoning Classifications'){
              console.log(feature.attributes.NAME);
              var template = new esri.dijit.PopupTemplate({
                            title:"Zoning",
                            description:"<b>Zoning:</b> {Zoning Classification} <br/> <b>Description:</b> {Zoning Description}"
                            });
              feature.setInfoTemplate(template);
            }
            else if (result.layerName === 'Assisted Living Facilities'){
              var template = new esri.dijit.PopupTemplate({
                            title:"Assisted Living Facilities",
                            description:"<b>Parcel ID:</b> {Parcel} <br/> <b>Applicant:</b> {BusinessApplicantName} <br/> <b>No. of Residents</b> {NbrResidents}"
                            });
              feature.setInfoTemplate(template);
            }
                        else if (result.layerName === 'Family Divisions'){
              var template = new esri.dijit.PopupTemplate({
                            title:"Family Divisions",
                            description:"<b>Parcel ID:</b> {Parcel} <br/> <b>Project Number:</b> {project_nbr} </br> <b>Status:</b> {Status}"
                            });
              feature.setInfoTemplate(template);
            }
                        else if (result.layerName === 'Policy 120'){
              var template = new esri.dijit.PopupTemplate({
                            title:"Policy 120",
                            description:"<b>Parcel ID:</b> {Parcel} <br/> <b>Business Name:</b> {BusinessName} </br> <b>Date of Letter:</b> {DateOfLetter}"
                            });
              feature.setInfoTemplate(template);
            }
                        else if (result.layerName === 'Zoning Changes'){
              var template = new esri.dijit.PopupTemplate({
                            title:"Zoning Changes",
                            description:"<b>Parcel ID:</b> {Parcel} <br/> <b>Request Number:</b> {REQUEST_NBR} </br> <b>Property Owner:</b> {PROPERTY_OWNER}"
                            });
              feature.setInfoTemplate(template);
            }
            return feature;
            });
          });
      };
        map.infoWindow.setFeatures([deferred]);
        map.infoWindow.show(evt.mapPoint);          
      });
        map.infoWindow.setFeatures([deferred]);
        map.infoWindow.show(evt.mapPoint);      
      }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:22:59.950

我不确定我是否理解这个问题，但您似乎需要[`dojo/promise/all`](http://livedocs.dojotoolkit.org/dojo/promise/all)：

```
require(["dojo/Deferred", "dojo/promise/all"], function(Deferred, all) {

    var taskParcels = new Deferred();
    var taskZoning = new Deferred();

    var deferred = all([taskParcels, taskZoning])

    deferred.then(function(result) {
        console.log(result);
    });

    taskParcels.resolve('hello');  
    setTimeout(function() {
        taskZoning.resolve('world');
    }, 1000);

}); 
```

看看它在行动：http: [//jsfiddle.net/phusick/S3b4B/](http://jsfiddle.net/phusick/S3b4B/)

# django - 无法在 ubunutu 上运行 django：无法导入设置“mydomain.settings”（是否在 sys.path 上？）

> ID：14612623
> 
> 赞同：0
> 
> 时间：2013-01-30T20:01:17.787
> 
> 标签：django, apache

我在 Ubuntu 上安装了 apache2 并安装了 Django 和 mod_wsgi。然后，我在 apache 中创建了一个名为 mydomain.com 的虚拟主机，并修改了我的 hosts 文件以将该地址指向 127.0.0.1，最后，我通过运行 python manage.py runserver 测试了我的网站，它正在工作。但是，当我改为浏览[http://mydomain.com](http://mydomain.com)时，我得到一个 500 错误页面。查看 apache 错误日志，这就是我得到的：

```
[Wed Jan 30 20:53:31 2013] [error] [client 127.0.0.1] mod_wsgi (pid=2935): Exception occurred processing WSGI script '/var/django/mydomain/mydomain.wsgi'.
[Wed Jan 30 20:53:31 2013] [error] [client 127.0.0.1] Traceback (most recent call last):
[Wed Jan 30 20:53:31 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 250, in __call__
[Wed Jan 30 20:53:31 2013] [error] [client 127.0.0.1]     self.load_middleware()
[Wed Jan 30 20:53:31 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/dist-packages/django/core/handlers/base.py", line 39, in load_middleware 
```

这是 mydomain.wsgi 的内容

```
import os
import sys
sys.path.append('/var/django/mydomain')
os.environ['DJANGO_SETTINGS_MODULE'] = 'mydomain.settings'
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我没有名为 mydomain.settings 的文件（我应该创建一个吗？），这是我第一次使用 django。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:31:02.557

DJANGO_SETTINGS_MODULE 的值应该是 just `'settings'`。

# file-upload - 如何在线复制txt文件，放入服务器ssh或ftp？

> ID：14612625
> 
> 赞同：0
> 
> 时间：2013-01-30T20:01:20.837
> 
> 标签：file-upload, ssh

我正在 GoDaddy 服务器上安装 Django（我知道我知道），我需要将此脚本[https://raw.github.com/pypa/virtualenv/master/virtualenv.py](https://raw.github.com/pypa/virtualenv/master/virtualenv.py)复制到服务器上的一个目录。我有 ssh 访问权限，但我不太确定实际复制文件的正确语法是什么。我试过了`cp`，`scp`但显然我做得不对。我在一个mac终端上，fwiw。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:05:02.487

为什么不直接从您的 ssh 会话下载它：

```
wget https://raw.github.com/pypa/virtualenv/master/virtualenv.py 
```

# sql-server - SQL Server左连接情况下如何实现全文搜索？

> ID：14612627
> 
> 赞同：1
> 
> 时间：2013-01-30T20:01:22.597
> 
> 标签：sql-server, full-text-search, left-join

我正在尝试在左连接情况下实现全文搜索。我知道我不能使用*索引视图*方法，因为我使用的是左连接 - 所以我试图弄清楚这通常是如何实现的，因为我不能成为第一个遇到这种情况的开发人员。

在这种特殊情况下，我正在尝试搜索表`Inventory`，并且搜索需要包括`Name`、`Description`和`Vendor Name`（在另一个表中）。

我唯一能想到的就是在我正在搜索的表上创建一个新列，并用我需要的搜索词的聚合来填充它——不过，这似乎是最后的解决方案。

有人对此有任何见解吗？我对这个全文搜索很陌生，所以我可能会遗漏一些明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:50:38.180

根据您的全文搜索条件限制这两个表，然后加入它们。

# c# - 在抽象类中声明并在派生类中初始化的结构在实例化时不可见

> ID：14612629
> 
> 赞同：2
> 
> 时间：2013-01-30T20:01:26.123
> 
> 标签：c#, struct, visibility, derived-class

我一直在寻找这个问题，但没有运气，我希望它不会重复。我有一个抽象类。

```
public abstract class IFDB
{
     public struct Estructura_TablaCuentasBancarias
    {
        public string NombreTabla;
        public string NumeroDeCuenta;
        public string Entidad;
        public string DNIPropietario;

        public Estructura_TablaCuentasBancarias(string NombreTabla, string NumeroDeCuenta, string Entidad, string DNIPropietario)
        {
            this.NombreTabla = NombreTabla;
            this.NumeroDeCuenta = NumeroDeCuenta;
            this.Entidad = Entidad;
            this.DNIPropietario = DNIPropietario;
        }
    } 
```

}

和派生类：

```
class CntrDBSQLSRVCompac: IFDB
{
     public readonly Estructura_TablaCuentasBancarias TablaCuentasBancarias =
        new Estructura_TablaCuentasBancarias("CuentasBancarias", "Numero De Cuenta", "Entidad", "DNI Propietario"); 
```

在程序中我已经完成了实例：

```
protected IFDB ClsCntrlDB;
...

ClsCntrlDB = new CntrDBSQLSRVCompac(); 
```

但是当尝试使用结构“TablaCuentasBancarias”时，它不在可能的函数/变量列表中。如果结构的实例和初始化是在 IFDB 类中完成的，那么它可以完美地工作，但是，我想让 IFDB 类成为一个接口。

我做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:14:53.013

以下代码对我来说很好，所以也许你还有其他问题。

```
abstract class FooBase
{
    public struct Bar
    {

    }
}

class Foo : FooBase
{
    public readonly Bar BarInstance = new Bar();
}

class TestClass
{
    public static void Test()
    {
        var foo = new Foo();
        var bar = foo.BarInstance; //works fine
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:22:29.700

`Estructura_TablaCuentasBancarias`是一个[嵌套结构](http://msdn.microsoft.com/en-us/library/ms173120.aspx)。为了`IFDB`在界面中制作，您需要从中提取嵌套结构`IFDB`

```
public interface IFDB
{
    Estructura_TablaCuentasBancarias Foo { get; set; }

    // other properties/functions from the IFDB class
}

public struct Estructura_TablaCuentasBancarias
{
    // struct declaration
} 
```

# python - Memcached：AWS Elasticache 上的自动发现 python 支持？

> ID：14612632
> 
> 赞同：7
> 
> 时间：2013-01-30T20:01:34.033
> 
> 标签：python, django, caching, memcached

我开始在我的 django Web 应用程序中使用 AWS Elasticache。

我首先使用自动发现功能将缓存位置设置为唯一端点，但它似乎不起作用。

我正在使用 pylibmc (1.2.2) 和 django-pylibmc-sasl (0.2.4) 从 python 连接到 memcached。

自动发现功能是否适用于这些客户端？我该如何启用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-28T23:11:20.347

# 快速回答

是的 django：[django-elasticache](https://github.com/gusdan/django-elasticache)

## 长答案

ElastiCache 提供了 memcached 接口，因此有三种使用它的解决方案：

## 1\. 使用 location = Configuration Endpoint 配置的 Memcached。

在这种情况下，您的应用程序将随机连接到集群中的节点，并且将以非最佳方式使用缓存。在某个时刻，您将连接到第一个节点并设置项目。几分钟后，您将连接到另一个节点，并且无法获取此项目。

```
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.memcached.PyLibMCCache',
        'LOCATION': 'cache.gasdbp.cfg.use1.cache.amazonaws.com:11211',
    }
} 
```

## 2\. 配置所有节点的 Memcached。

它会正常工作，memcache 客户端将在所有节点之间分离项目并平衡客户端的负载。只有在添加新节点或删除旧节点后才会出现问题。在这种情况下，您应该手动添加新节点，并且不要忘记在 AWS 上进行所有更改后更新您的应用程序。

```
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.memcached.PyLibMCCache',
        'LOCATION': [
            'cache.gqasdbp.0001.use1.cache.amazonaws.com:11211',
            'cache.gqasdbp.0002.use1.cache.amazonaws.com:11211',
        ]
    }
} 
```

## 3.使用django-elasticache。

它将连接到集群并检索所有节点的 IP 地址，并将 memcached 配置为使用所有节点。

```
CACHES = {
    'default': {
        'BACKEND': 'django_elasticache.memcached.ElastiCache',
        'LOCATION': 'cache-c.draaaf.cfg.use1.cache.amazonaws.com:11211',
    }
} 
```

使用节点列表（django-elasticache）进行设置和仅连接到一个配置端点（使用 dns 路由）之间的区别，您可以在此图中看到：

![获取具有两个节点的集群的统计信息](../Images/b2a2b505bc3417765acd24b1a2f1ea41.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T08:08:02.753

我为aws elasticache写了一个python客户端，你可以试试。

安装：

```
pip install python_memcached hash_ring
pip install elasticache_pyclient 
```

简单用法：

```
>>> from elasticache_pyclient import MemcacheClient
>>> mc = MemcacheClient('test.lwgyhw.cfg.usw2.cache.amazonaws.com:11211')
>>> mc.set('foo', 'bar')
True
>>> mc.get('foo')
'bar' 
```

这个包调用python_memcached来做实际的memcache操作，所以它和python_memcached的功能完全一样，更多的选项可以参考python_memcached。

这里是 elasticache_pyclient 主页： [https ://github.com/yupeng820921/elasticache_pyclient](https://github.com/yupeng820921/elasticache_pyclient)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T01:26:13.573

我使用了似乎不支持自动发现的 PyLibMC 绑定。

Django 内置并在[文档](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#memcached)中使用的 Memcached 后端与 Elasticache 提供的独特端点配合良好。

现在一切都运行良好，我使用 Memcached 改进了很多响应时间。

# python - GAE Python：无法弄清楚如何在 Stringproperty 中存储 UTF-8

> ID：14612633
> 
> 赞同：1
> 
> 时间：2013-01-30T20:01:43.093
> 
> 标签：python, google-app-engine, encoding, utf-8

我知道很多人已经讨论过这个话题，但由于某种原因，我无法在我的 GAE 应用程序上使用 UTF-8 编码。我正在从在线表单中检索德语字符串，然后尝试将其存储在 Stringproperty 中。代码如下所示：

```
import from google.appengine.ext import db
import webapp2

class Item(db.Model):
  value = db.Stringproperty()

class ItemAdd(webapp2.RequestHandler):
    def post(self):
       item - Item()
       value = str(self.request.get(u'value'))
       item.value = value.encode('utf-8')
       item.put() 
```

我从中得到的错误是：

```
File "C:\xxx", line 276, in post
value = str(self.request.get('value'))
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe4' in position 12: ordinal not in range(128) 
```

有人看到我做错了吗？

***更新***

我正在检索的字符串如下：“Dit is een länge” 如果我将属性类型更改为 TextProperty，一切正常，但是我需要能够对其进行过滤，这样就不能解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:20:28.737

Webapp2 负责处理 utf-8。在您的帖子中，webapp2 为您提供了一个 utf-8 multidict。所以你不必自己做。使用调试器，您可以在 self.request 中找到 multidict

```
class ItemAdd(webapp2.RequestHandler):

    def post(self):
       Item(value = self.request.POST('value')).put() 
```

要使用 utf-8，请阅读这篇 sblog 文章，不要使用：str() !!!!!! 你的 str() 用 unicode 制作二进制 [http://blog.notdot.net/2010/07/Getting-unicode-right-in-Python](http://blog.notdot.net/2010/07/Getting-unicode-right-in-Python)

使用 python27，您可以使用以下代码开始您的代码：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
from __future__ import unicode_literals 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T20:21:14.290

当您的 python 脚本接收数据、字符串时，您必须注意文件的编码与它总是接收的相同，也许您应该将其添加到文件的顶部：

```
#!/usr/bin/python
# -*- coding: utf-8 -*- 
```

# android - 从不同的活动中调用对象

> ID：14612634
> 
> 赞同：0
> 
> 时间：2013-01-30T20:01:43.213
> 
> 标签：android, android-activity, listactivity

我正在部署创建比赛时间表的应用程序。

您必须键入团队，然后应用程序创建计划，然后添加结果，应用程序显示带有结果的排序表。

在主要活动中，我有对象 Tourney，它有方法 addResult(int homescore,int awayscore) - 它的添加结果。

在主要活动中是 Button，它启动 ListActivity，您可以在其中看到剩余的匹配项。单击比赛后，您可以插入主队和客队的比分，比赛将被标记为已播放并从列表中移出。

我的问题是，如果我在不同的活动中，我如何从主要活动中调用方法 Tourney.addResult() ？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:40:43.300

谷歌有一个答案[http://developer.android.com/guide/faq/framework.html#3](http://developer.android.com/guide/faq/framework.html#3)

简而言之：在活动之间共享对象不是一个好习惯：活动可能会死，你永远不知道引用是否仍然有效以及另一个活动。但是，您可以在应用程序（而不是活动）中创建一个单例类，并在您想要的任何活动中将实例获取到此类。

有关更多讨论，请参阅[在活动之间共享数据的最佳方式是什么？](https://stackoverflow.com/questions/4878159/android-whats-the-best-way-to-share-data-between-activities)

# python - 在技 术图纸中绘制距离箭头

> ID：14612637
> 
> 赞同：20
> 
> 时间：2013-01-30T20:01:52.287
> 
> 标签：python, matplotlib

我想在我的一个情节中指出一个距离。我想到的是他们在技术图纸中的做法，显示一个双头箭头，旁边是距离作为文本。

**例子：**

```
from matplotlib.pyplot import *

hlines(7,0,2, linestyles='dashed')
hlines(11,0,2, linestyles='dashed')
hlines(10,0,2, linestyles='dashed')
hlines(8,0,2, linestyles='dashed')
plot((1,1),(8,10), 'k',) # arrow line
plot((1,1),(8,8), 'k', marker='v',) # lower arrowhead
plot((1,1),(10,10), 'k', marker='^',) # upper arrowhead
text(1.1,9,"D=1") 
```

这会导致类似这样的结果（其中两条线并不是真正需要的，它们只是增加了绘图区域......）：![距离标记手动样式](../Images/dfa64c6388fe0618f405ad87e9808c40.png)

有没有更快的方法来做到这一点，最好是使用在确切位置结束的箭头，而不是低于/高于它们应该在的位置？自动放置文本的加分。

**编辑：** 我一直在玩，`annotate`但由于必须牺牲字符串，这个解决方案对我失去了一些吸引力。感谢您指出箭头样式，但当我尝试类似的东西时它不起作用。我想没有办法编写一个小函数来一次调用...

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-30T20:37:20.790

```
import matplotlib.pyplot as plt

plt.hlines(7, 0, 2, linestyles='dashed')
plt.hlines(11, 0, 2, linestyles='dashed')
plt.hlines(10, 0, 2, linestyles='dashed')
plt.hlines(8, 0, 2, linestyles='dashed')
plt.annotate(
    '', xy=(1, 10), xycoords='data',
    xytext=(1, 8), textcoords='data',
    arrowprops={'arrowstyle': '<->'})
plt.annotate(
    'D = 1', xy=(1, 9), xycoords='data',
    xytext=(5, 0), textcoords='offset points')

# alternatively,
# plt.text(1.01, 9, 'D = 1')

plt.show() 
```

产量

![在此处输入图像描述](../Images/37d79a19f78c5e669d8603650b7f9ab3.png)

有关许多可用选项的详细信息`plt.annotate`，请参阅[此页面](http://matplotlib.org/users/annotations_guide.html)。

* * *

如上所示，可以使用`plt.annotate`或放置文本`plt.text`。使用`plt.annotate`您可以以点为单位指定偏移量（例如`(5, 0)`），而使用`plt.text`您可以指定数据坐标中的文本位置（例如`(1.01, 9)`）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-30T20:31:15.637

尝试使用`annotate`：

```
annotate ('', (0.4, 0.2), (0.4, 0.8), arrowprops={'arrowstyle':'<->'}) 
```

![annotate 命令生成的图像](../Images/4c82c4ce638f00a8d533141e5d43a324.png)

我不确定自动文本放置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-11T11:28:49.167

我制作了一个可以很好地完成此任务的函数：

```
import numpy as np
import matplotlib.pyplot as plt

def annotate_point_pair(ax, text, xy_start, xy_end, xycoords='data', text_offset=6, arrowprops = None):
    """
    Annotates two points by connecting them with an arrow. 
    The annotation text is placed near the center of the arrow.
    """

    if arrowprops is None:
        arrowprops = dict(arrowstyle= '<->')

    assert isinstance(text,str)

    xy_text = ((xy_start[0] + xy_end[0])/2\. , (xy_start[1] + xy_end[1])/2.)
    arrow_vector = xy_end[0]-xy_start[0] + (xy_end[1] - xy_start[1]) * 1j
    arrow_angle = np.angle(arrow_vector)
    text_angle = arrow_angle - 0.5*np.pi

    ax.annotate(
            '', xy=xy_end, xycoords=xycoords,
            xytext=xy_start, textcoords=xycoords,
            arrowprops=arrowprops)

    label = ax.annotate(
        text, 
        xy=xy_text, 
        xycoords=xycoords,
        xytext=(text_offset * np.cos(text_angle), text_offset * np.sin(text_angle)), 
        textcoords='offset points')

    return label 
```

# ios - 根据数组iOS中的值更改单元格的颜色

> ID：14612638
> 
> 赞同：0
> 
> 时间：2013-01-30T20:01:52.190
> 
> 标签：ios, xcode

知道这有什么问题：

```
 if ([status isEqualToString: @"green"])
     [[cell contentView] setBackgroundColor: [UIColor colorWithRed: 200 green: 191 blue: 231 alpha: 1]]; 
```

我在@implementation 中定义了数组。Xcode 显示以下错误：

> no visible `@interface`for`NSArray`声明选择器`isEqualToString:`。

这个想法是当数组中的字符串值等于字符串“green”时，单元格背景变为绿色（其中的值`colorWithRed`不是实际的绿色）

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:23:05.207

问题在于 RGB 值。

在正常 RGB 中，介于 0 到 255 之间

但

```
+ (UIColor *)colorWithRed:(CGFloat)red green:(CGFloat)green blue:(CGFloat)blue alpha:(CGFloat)alpha 
```

取值在 0.0 到 1.0 之间

所以你可以这样做：

```
[[cell contentView] setBackgroundColor: [UIColor colorWithRed: 200.0/255.0 
                                                        green: 191.0/255.0 
                                                         blue: 231.0/255.0 
                                                         alpha: 1]]; 
```

看看这里[colorWithRed:green:blue:alpha:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIColor_Class/Reference/Reference.html#//apple_ref/occ/clm/UIColor/colorWithRed%3agreen%3ablue%3aalpha%3a)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:25:07.847

看来，`status`您`NSArray`无法将其与字符串进行比较，尤其是使用 isEqualToString。尝试使用类似`[status objectAtIndex:0];`或更改`status`为`NSString`

CRDave 也是正确的，您应该将所有颜色数字除以 255。好吧，它们是 CGFloats，我相信从技术上讲是 255.0，否则数字将被四舍五入并导致每次都为 0（或 1）。

如果您想要实际的绿色，您也可以使用`[UIColor greenColor];`（除非您想要特定的绿色）

# php - 未声明 HTML 文档的字符编码。

> ID：14612642
> 
> 赞同：-2
> 
> 时间：2013-01-30T20:02:14.483
> 
> 标签：php, html

执行php代码时我不断收到以下错误

解析错误：语法错误，第 37 行 /home/a9440109/public_html/gps_list.php 中的意外 T_CONSTANT_ENCAPSED_STRING

我试图定义字符编码，但仍然出现错误。请让我知道我做错了什么：

```
 <?php
 header('Content-type: text/html; charset=utf-8');
 //connect to the database

 include ('gps_db_connect.php');

 $query = "SELECT * from gps WHERE server_time > '20130130'";
 $result = mysqli_query($connection, $query) or die(' Error getting data');
 echo $query;

 $row_count = 0;
 $color_switch = 0;
 $td_size=1;
 $td_font='Verdana'';

 echo "<table border = 1 WIDTH=100% CELLSPACING=0 CELLPADDING=1 >";
 echo "<tr> <th>Count</th><th>User/Device ID</th><th>Longitude, Latitude</th>        <th></th> <th> Speed</th>  <th> Direction </th> <th> GPS Date/Time</th> <th> Server Time </th></tr>";
 while ($row = mysqli_fetch_array($result, MYSQLI_ASSOC)) {
 if ( $color_switch == 0 ) {
     $bg_color="#FFFFFF";

     $color_switch = 1;
  }

 else {

     $bg_color="#D8D8D8";
         $color_switch = 0;
         }
     $row_count++;
     echo "<tr><td bgcolor=$bg_color> <font size=$td_size face=$td_font>";
     echo $row_count;

         echo "</td><td bgcolor=$bg_color>  <font size=$td_size face=$td_font> &nbsp";
         echo $row['gps_user'];

     echo "</td><td bgcolor=$bg_color>  <font size=$td_size face=$td_font> &nbsp";
     echo $row['gps_lng'].','.$row['gps_lat'];

     echo "</td></tr>";

    }
 echo "</table>";

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:05:12.310

替换： `$td_font='Verdana'';`与 `$td_font='Verdana';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:05:44.697

```
$td_font='Verdana''; 
```

最后有一个额外的报价。

# qt5 - QT5 使用多个 .UI 文件

> ID：14612651
> 
> 赞同：1
> 
> 时间：2013-01-30T20:02:43.160
> 
> 标签：qt5

我有 3 个 .UI 文件正在尝试链接在一起。第一个是一个主菜单，上面只有 2 个按钮。每个按钮应该 1.) 关闭 MainMenu.UI 窗口和 2.) 显示与该按钮关联的 .UI 文件。

我的问题是我找不到任何隐藏或显示当前使用的 .UI 文件的功能。我也找不到从 MainMenu.UI 文件中的 button1_onClick() 函数引用其他 .UI 文件的方法。

希望我没有让这变得比它需要的更混乱，只是试图用按钮将 .UI 文件链接在一起

编辑：我去过[QWindow Class docs](http://qt-project.org/doc/qt-5.0/qtgui/qwindow.html#setWindowState)试图找到一个可以做我正在寻找的功能，但我似乎找不到任何有用的东西。

我终于弄清楚了如何访问 show() 和 hide() 方法，所以我现在需要弄清楚如何引用其他 .UI 文件，这样我也可以 show() 或 hide() 那些。我尝试使用 SetWindowFilePath() 函数将另一个 .ui 文件的文件路径传递给它，但这也不起作用

```
this->hide();
this->setWindowFilePath("C:/Users/Scott/Desktop/...blah blah... /mainui.ui");
this->show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:55:13.370

您不隐藏或显示 .ui 文件，从这些文件生成的 C++ 代码被包装到直接或间接从 QWidget 派生的 C++ 类中，并且这些类的实例可以使用*show()*或*hide()*

要使用两个 Qt “表单”，请阅读此[常见](http://www.qtcentre.org/faq.php?faq=qt_general_category#faq_qt_designer_2forms)问题解答并在您仍然无法使其正常工作时提出具体问题（并可能显示一些代码）。

# ios - 关闭多个 ModalViewControllers iOS

> ID：14612659
> 
> 赞同：0
> 
> 时间：2013-01-30T20:03:14.330
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, modalviewcontroller, presentmodalviewcontroller

好的，我知道有很多关于这个主题的信息，但是我尝试过的一切都不起作用。我的设置是这样的。

应用程序加载 View A，它是一个带有 navigationController 的 Tableview。延迟后，我呈现了一个 ModalView B。在视图 B 上，我有一个按钮，在视图 B 上方呈现另一个 modalView View C。在 Modal View CI 中有一个关闭 C 的按钮。现在当我点击这个按钮时，我也想关闭 Modal视图 B 将我带回我的 RootView，即提到的 tableView 视图 A。

从模态视图 CI 有一个按钮，但只能使用以下操作关闭 C，这会将我带到模态视图 B：我想要做的是删除 C 和 B，如果可能的话，使用此按钮将我返回到 A？

```
-(IBAction)dismissWebView:(id)sender{

[self dismissModalViewControllerAnimated:YES];

} 
```

我已经从上述操作中尝试了所有这些

```
[self.parentViewController dismissModalViewControllerAnimated:YES];
[self.parentViewController.parentViewController dismissModalViewControllerAnimated:YES];
[adsRootView dismissModalViewControllerAnimated:YES];
[self dismissModalViewControllerAnimated:YES];
[self dismissModalViewControllerAnimated:YES];
[self.navigationController dismissModalViewControllerAnimated:YES];
[self.adsRootView dismissModalViewControllerAnimated:YES];
[[[self parentViewController] parentViewController] dismissModalViewControllerAnimated:YES];
[self.navigationController popToRootViewControllerAnimated:NO]; 
```

除了仅解除模态视图 C 之外，它们都没有做任何事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T20:15:55.803

所以最简单的方法是访问你的 A 控制器，在这种情况下它不是父子关系，而是呈现/呈现关系：

```
[self.presentingViewController.presentingViewController dismiss...]
 ^C   ^B                       ^A 
```

但是，这不是很干净，并且会在您更改控制器层次结构时得到您，所以我建议设置一个委托以通知何时可以关闭控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T20:44:35.950

我认为视图控制器通过调用`self.presentingViewController`. 我一直使用委托协议来允许呈现的视图控制器在点击取消或完成按钮时通知呈现视图控制器（或询问其他信息）。

为了根据您的示例解释这一点，C 将定义一个协议，允许它在点击按钮时通知 B：

```
@protocol CViewControllerDelegate
- (void)cViewControllerDidSelectDone:(CViewController *)viewController;
@end 
```

C有一个`delegate`性质：

```
@property (weak, nonatomic) id <CViewControllerDelegate> delegate; 
```

B 视图控制器具有类似的委托和协议（尽管方法名称可能不同，因为没有完成按钮）。

A 采用 BViewControllerDelegate 协议，当它呈现 B 时，它将自己设置为委托。同样，B 采用 CViewControllerDelegate 协议，当它呈现 C 时，它将自己设置为委托。

C 中的按钮处理程序只是调用委托：

```
[self.delegate cViewControllerDidSelectDone:self]; 
```

B 中该方法的处理程序关闭 C 视图控制器并通知其委托 (A)：

```
- (void)cViewControllerDidSelectDone:(CViewController *)viewController
{
    [self dismissViewControllerAnimated:YES completion:nil];
    [self.delegate bViewControllerDidSelectDone:self]
} 
```

而 A 的 B 委托方法处理程序只是解雇 B：

```
- (void)bViewControllerDidSelectDone:(BViewController *)viewController
{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

这种编码风格有助于分离不同的视图控制器，并确保同一个类负责呈现和关闭另一个视图控制器。

最后一点，`presentModalViewController`在`dismissModalViewControllerAnimated:`iOS 6.0 中已被弃用。只要您不需要支持 iOS 5.0 之前的版本，最好使用`presentViewController:animated:completion:`and`dismissViewControllerAnimated:completion:`代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T15:08:53.420

对于那些正在寻找 Swift 代码的人：

```
self.presentingViewController!.presentingViewController!.dismissViewControllerAnimated(true, completion: nil) 
```

# javascript - ember.js 显示项目列表，每个项目都有自己的视图/控制器

> ID：14612663
> 
> 赞同：4
> 
> 时间：2013-01-30T20:03:30.493
> 
> 标签：javascript, ember.js

我想要实现的目标：创建带有视图的控制器，在这个视图中我有“画廊”对象的列表。每个项目都有自己的视图和控制器。

所有文件都在这里：[https ://gist.github.com/7e72bb2f532c171b1bf3](https://gist.github.com/7e72bb2f532c171b1bf3)

它按预期工作，在悬停一些文本后显示/隐藏，但我个人认为这不是很好的解决方案。

我认为我可能应该使用 {{collection}} 助手，但是在 ember.js 页面上没有它的文档（代码中有一些，但我不确定这个助手是否有点过时，因为在源代码中它说“// TODO：不需要所有这个模块”）。

我尝试使用 itemController 属性，但是我仍然在一个文件中有模板。

还尝试在 {{#each}} 中使用 {{render}} 助手，但随后会引发错误。

那么，有没有更好/更清洁的方法来实现我想要的？

**编辑**

在按照 Michael Grassotti 提供的解释进行所有操作后，我有奇怪的行为 - 模板的属性是从 itemController 获取的，但是 {{action}} 助手绑定到父控制器。我制作了屏幕截图以显示我正在处理的内容。

![在此处输入图像描述](../Images/43f3d8a15711cbf0fa69fe24aa7a1d15.png)

基本上 itemView 中的“this”指向右控制器（itemController），但目标属性具有父控制器。

制作`{{action "deleteGallery" this target="this"}}`并单击它后，我有截图中的错误。此刻，我的想法已经不多了……

**编辑2：**

好的，我想多了，itemController 仅用于定义计算属性，而不用于编写 {{action}} 处理程序。

**EDIT3：** 我认为我的 itemController 和事件目标的问题将得到解决。 [https://github.com/emberjs/ember.js/issues/1846](https://github.com/emberjs/ember.js/issues/1846)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T21:52:29.350

> 我认为我可能应该使用 {{collection}} 助手，但是在 ember.js 页面上没有它的文档（代码中有一些，但我不确定这个助手是否有点过时，因为在源代码中它说“// TODO：不需要所有这个模块”）。

同意。收集助手仍然有效，但我不确定它是否会成为公共 API 的一部分。`{{#each}}`如果可以的话，最好坚持使用助手。

> 我尝试使用 itemController 属性，但是我仍然在一个文件中有模板。

该`itemController`物业是一个良好的开端。这是为每个项目提供其自己的控制器的最佳方式。

> 还尝试在 {{#each}} 中使用 {{render}} 助手，但随后会引发错误。

是的，`{{render}}`助手不是为在`{{each}}`块内使用而设计的。

> 那么，有没有更好/更清洁的方法来实现我想要的？

是的。对于初学者使用该`itemController`属性。然后给每个它自己的观点，`itemViewClass`为`{{each helper}}`. 例如：

```
# in galleries_index.hbs
{{each controller itemViewClass="App.GalleriesIndexItemView"} 
```

[有关详细信息，请参阅每个帮助程序的 api 文档](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_each)的“无块使用”部分。

然后自定义`App.GalleriesIndexItemView`指定模板：

```
App.GalleriesIndexItemView = Ember.View.extend({
    templateName: "galleries_index_item",
    tagName: 'li',
    classNames: ['span4'],
    hover: false,
    mouseEnter: function() {
        this.set('hover', true);
    },
    mouseLeave: function() {
        this.set('hover', false);
    }
}); 
```

并将 html 从每个助手移动到模板中：

```
# galleries_index_item.hbs
  <div class="thumbnail">
      <a href="#">
          <img src="images/300x200.gif" alt="">
      </a>
      <div class="caption">
          <h4>{{name}}</h4>              
          {{#if view.hover}}
              <button {{action editGallery this }} class="btn btn-mini" type="button">Edit</button>
              <button {{action deleteGallery this}} class="btn btn-mini" type="button">Delete</button>
          {{/if}}
      </div>
  </div> 
```

现在每个项目都有自己的视图和控制器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T21:35:53.000

我建议你使用一个[`Ember.CollectionView`](http://emberjs.com/api/classes/Ember.CollectionView.html).

您的`galleriesIndex`模板将如下所示：

```
<div class="container">
    <div class="row">
        <div class="span12">
            {{view App.GalleriesListView contentBinding="this"}}
        </div>
    </div>
</div> 
```

风景：

```
App.GalleriesListView = Ember.CollectionView.extend({
    classNameBindings: [':thumbnail', ':thumbnails-list'],
    itemViewClass: Ember.View.extend({
        templateName: "galleriesListItem",
        hover: false,
        mouseEnter: function() { this.set('hover', true); },
        mouseLeave: function() { this.set('hover', false; }
    })
}); 
```

`galleriesListItem`模板：

```
<li class="span4">
    <div class="thumbnail">
        <a href="#">
            <img src="images/300x200.gif" alt="">
        </a>
        <div class="caption">
            <h4>{{view.content.name}}</h4>                        
            {{#if view.hover}}
                <button {{action editGallery view.content }} class="btn btn-mini" type="button">Edit</button>
                <button {{action deleteGallery view.content}} class="btn btn-mini" type="button">Delete</button>
            {{/if}}
        </div>
    </div>
</li> 
```

我不确定我的代码中没有错误，我只是复制粘贴并写下它的样子。

关于`TODO`你看到的，这是因为`Ember.CollectionView`实际上需要所有`ember-handlebars`模块而不是它需要的文件，你不应该关心这一点。

# java - 如何通过单击上下文菜单选项打开图像视图？

> ID：14612666
> 
> 赞同：1
> 
> 时间：2013-01-30T20:03:38.857
> 
> 标签：java, android, image, click, android-menu

I have a context menu in my main activity that opens when an item is selected or clicked. 当用户单击上下文菜单中列出的字符串之一时，如何显示图像？我只有用 Java 而不是 xml 编写的上下文菜单。这是代码。

```
package com.carouseldemo.main;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;

import com.carouseldemo.controls.Carousel;
import com.carouseldemo.controls.CarouselAdapter;
import com.carouseldemo.controls.CarouselAdapter.AdapterContextMenuInfo;
import com.carouseldemo.controls.CarouselAdapter.OnItemClickListener;
import com.carouseldemo.controls.CarouselAdapter.OnItemSelectedListener;
import com.carouseldemo.controls.CarouselItem;

public class MainActivity extends Activity {
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    // Just prepare ourself for unexpected arguments...
    if (menuInfo == null) {
        return;
    }
    if (!(menuInfo instanceof AdapterContextMenuInfo)) {
        return;
    }
    AdapterContextMenuInfo mi = (AdapterContextMenuInfo)menuInfo;
    switch (mi.position) {
    case 0:
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 1:
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 2:
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 3:
        menu.add("mouse menu");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 4:
        menu.add("panda menu");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 5:
        menu.add("rabbit menu");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    default:
        break;
    }
    super.onCreateContextMenu(menu, v, menuInfo);
} 
```

单击 menu.add 中的“产品 1”之一时，如何弹出图像视图？对此有什么想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:28:05.330

你可以试试：

```
menu.onClick(new OnClickListener() {
    public void onClick() {
    // Do Something here
    }
}); 
```

此外，作为 ContextMenu 的一部分，您将拥有可以覆盖并返回您选择的项目的 findItem(int item)。

# asp.net - 输出具有连接的 LINQ 查询

> ID：14612667
> 
> 赞同：0
> 
> 时间：2013-01-30T20:03:39.587
> 
> 标签：asp.net, asp.net-mvc-3, visual-studio-2010, linq, linq-to-sql

我在将 LINQ 语句输出到用 Visual Studio 2010 编写的 ASP.NET 列表中时遇到问题。下面的函数尝试在其数据源中搜索相关 DVD 并输出一条记录：

```
 Public Function GetDVD(ByVal id As Integer) As DVDRaritiesDVDs _
    Implements IDVDDAO.GetDVD
    Dim DVD = From DVDList In _context.DVDRaritiesDVDs _
              Where DVDList.DVDID = id Select DVDList
    Return DVD.ToList().First()
End Function 
```

但是当我尝试这样加入它时：

```
 Public Function GetDVD(ByVal id As Integer) As DVDRaritiesDVDs _
    Implements IDVDDAO.GetDVD
    Dim DVD = From DVDList In _context.DVDRaritiesDVDs _
              Join Category In _context.DVDRaritiesCategories _
              On Category.CategoryID Equals DVDList.CategoryID _
              Where DVDList.DVDID = id Select DVDList, Category
    Return DVD.ToList().First()
End Function 
```

构建代码时它给了我以下错误：

> 错误 1 ​​类型“（第 23 行）”的值无法转换为“DVDRarities.Data.DVDRaritiesDVDs”。C:\Users\a9010799\Projects\DVDRarities\DVDRarities.Data\DAO\DVDDAO.vb 24 16 DVDRarities.Data

请有人指出我哪里出错了，以便我可以在一份声明中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:13:42.673

在您的查询中，您针对 DVDList 实例返回 {DVDList, Category}。你应该使用

```
Public Function GetDVD(ByVal id As Integer) As DVDRaritiesDVDs _
    Implements IDVDDAO.GetDVD
    Dim DVD = From DVDList In _context.DVDRaritiesDVDs _
              Join Category In _context.DVDRaritiesCategories _
              On Category.CategoryID Equals DVDList.CategoryID _
              Where DVDList.DVDID = id Select DVDList
    Return DVD.First()
End Function 
```

或者您应该更改此方法的签名。

```
Public Function GetDVD(ByVal id As Integer) As Tuple(Of DVDRaritiesDVDs, DVDRaritiesCategories) _
        Implements IDVDDAO.GetDVD
        Dim DVD = From DVDList In _context.DVDRaritiesDVDs _
                  Join Category In _context.DVDRaritiesCategories _
                  On Category.CategoryID Equals DVDList.CategoryID _
                  Where DVDList.DVDID = id Select  New Tuple(Of DVDRaritiesDVDs, DVDRaritiesCategories)(DVDList, Category)
        Return DVD.First()
    End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:14:09.143

您的函数返回一个 DVDRaritiesDVDs 对象。显然，您的 Linq 查询返回一个列表，其中包含成对的 (DVDRaritiesDVDs, DVDRaritiesCategories)

您应该通过以下方式更新您的代码：

```
 Public Class Pair
     Public First as DVDRaritiesDVDs
     Public Second as DVDRaritiesCategories
 End Class

 Public Function GetDVD(ByVal id As Integer) As DVDRaritiesDVDs _
    Implements IDVDDAO.GetDVD
    Dim DVD = (From DVDList In _context.DVDRaritiesDVDs _
              Join Category In _context.DVDRaritiesCategories _
              On Category.CategoryID Equals DVDList.CategoryID _
              Where DVDList.DVDID = id
              Select New Pair() With {First = DVDList, Second = Category})
    Return DVD.ToList().First()
End Function 
```

当然，您可以使用泛型来概括您的代码，但我决定用最简单易懂的解决方案来帮助您。

# c - 在 LAME 中读取 PCM 样本 - 需要解释源代码

> ID：14612668
> 
> 赞同：0
> 
> 时间：2013-01-30T20:03:41.177
> 
> 标签：c, lame

在我在[此处](https://stackoverflow.com/q/14603974/350685)`LAME`发布的问题之后，对with 的进一步调查`gdb`显示，在任何给定时间，仅从输入`pcm`文件中读取 576 个样本。但是，这些样本用于填充 2304 1D 或 2*1152 2D 阵列。我无法理解的正是这种转变。我在这里发布相关代码并要求解释。我已经解释了部分代码并将问题插入到代码中`???`。

```
 samples_read = read_samples_pcm(global.musicin, insamp, num_channels * samples_to_read);
  /* global.musicin = FILE pointer to input pcm file.
   * insamp is a 1D int array of [2*1152] size.
   * num_channels = 1\. samples_to_read = 576\. */
    if (samples_read < 0) {
        return samples_read;
    }
    p = insamp + samples_read;
    samples_read /= num_channels;  /*samples_read = 576 after this step. prior to this it is optimized out.*/
    if (buffer != NULL) { /* output to int buffer */
        if (num_channels == 2) {
            for (i = samples_read; --i >= 0;) {
                buffer[1][i] = *--p;
                buffer[0][i] = *--p;
            }
        }
        else if (num_channels == 1) {
            memset(buffer[1], 0, samples_read * sizeof(int));
            for (i = samples_read; --i >= 0;) {
                buffer[0][i] = *--p;
                /*??? Is this line a fancy way of copying first 576 samples of insamp into buffer[0]?*/
            }
        }
        else
            assert(0);
    } 
```

函数`read_samples_pcm`定义如下：

```
static int
read_samples_pcm(FILE * const musicin, int sample_buffer[2304], int samples_to_read)
{
    int     samples_read;

    samples_read = sf_read_int((SNDFILE *) musicin, sample_buffer, samples_to_read);

#if 0
    switch (global.pcmbitwidth) {
    case 8:
        for (i = 0; i < samples_read; i++)
            sample_buffer[i] <<= (8 * sizeof(int) - 8);
        break;
    case 16:  /*input pcm is 16 bit say.*/
        for (i = 0; i < samples_read; i++)
            sample_buffer[i] <<= (8 * sizeof(int) - 16); /*??? what is going on? */
        break;
    case 24:
        for (i = 0; i < samples_read; i++)
            sample_buffer[i] <<= (8 * sizeof(int) - 24);
        break;
    case 32:
        break;
    default:
        if (silent < 10) {
            error_printf("Only 8, 16, 24 and 32 bit input files supported \n");
        }
        exit(1);
    }
#endif

    return samples_read;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:56:57.997

> / *??? 这条线是将前 576 个 insamp 样本复制到缓冲区 [0] 中的一种奇特方式吗？*/

基本上，是的。它只是复制数据 end->start 而不是通常的 start->end 顺序。我不确定，但我认为出于内存缓存性能的原因，有些人更喜欢这个。

> /*??? 到底是怎么回事？*/

它将 16 位输入缩放为 32 位数字。让我们来看看它：

```
sample_buffer[i] <<= (8 * sizeof(int) - 16); 
```

如果 sizeof(int) 为 4 字节，则 8 * 4 - 16 = 16。因此，将 16 位数左移 16 以将其缩放为 32 位数。如果 sizeof(int) 是 8 个字节，则 8 * 8 - 16 = 48。如果 int 是 64 位，则需要左移 48 位。

我不确定我是否在这里回答了你所有的问题。随时跟进。

# java - 每 5 分钟生成一个位置

> ID：14612670
> 
> 赞同：1
> 
> 时间：2013-01-30T20:03:44.157
> 
> 标签：java, android, multithreading, timer, geolocation

我正在尝试创建一个应用程序，每 5 分钟将用户的位置发送到数据库，之后用户将能够看到它。有几个限制：

*   如果用户没有移动，请不要生成另一个位置。我通过检查到当前位置的新位置距离是否大于 1800M 来做到这一点（我只使用精度低于 900 的位置，因此可能位置的半径为 1800）。

*   如果我可以根据当前位置的准确性获得更好的位置，请使用它。

因此，我现在将提供我的代码，我想知道您对此有何看法，以及是否可以做得更好，因为它无法完美运行。如果您想要一个明确的问题：忽略我的代码，我该如何实现我提到的这两点。

这是代码：

```
public void onStart(Intent intent, int startId) 
{
    ...
    this.timer.scheduleAtFixedRate(new Send(), d1, TEN_MINUTES/2);
}
...
if (mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) 
    mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, TEN_MINUTES/2, 0, listener);

if (mLocationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) 
    mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, TEN_MINUTES/2, 0, listener);
...
@Override
public void onLocationChanged(Location location) 
{
    handleLocation(location);
}
private void handleLocation(Location location) 
{
    if(isUsable(location))
    {
        this.isUsable = true;
        this.newLocation = location;
    }
}
public boolean isUsable(Location location)
{
    if (mGeocoderAvailable) 
    {
        this.address = reverseGeocode(location);
        return location.hasAccuracy() && location.getAccuracy() < 900 && !this.address.equals("");
    }
    return false;
}

class Send extends TimerTask
{
    boolean run = true;

    @SuppressWarnings("deprecation")
    public void run()
    {
        if(isUsable)
        {
            isUsable = false;
            if(newLocation != null)
            {
                if(location != null)
                {
                    if(location.getAccuracy() > newLocation.getAccuracy() + 100)
                        sendTask();
                    else
                        if(newLocation.distanceTo(location) > 1800)
                            sendTask();
                }
                else
                    sendTask();
            }
        }
    }
} 
```

最重要的一段代码当然是 Send 类和`isUsable`定义我的约束的方法。

弹出的错误是相同地址的重复，这不应该是因为这种情况应该涵盖这种情况：

```
if(newLocation.distanceTo(location) > 1800) 
```

另一件事是，我用手机开了 20 公里的车，但我没有在我的数据库中收到任何位置，只有当我完成驾驶时（20 公里后）..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:17:14.250

首先，您可能希望有一个可变的不确定性要求。

其次，这是您启动计时器的命令。

```
public void onStart(Intent intent, int startId) 
{
    ...
    this.timer.scheduleAtFixedRate(new Send(), d1, TEN_MINUTES/2);
} 
```

这个命令不对。您可能还想在发送到计时器之前创建一个 Send 实例。

```
this.timer.scheduleAtFixedRate(new Send(), d1, 5, TimeUnits.MINUTES); 
```

在你外出驾驶应用程序之前，我建议你在测试环境中更频繁地测试它的关键部分。将时间设置为每 10 秒一次，并检查以确保它工作正常、您的数学是正确的、它正在报告一个位置等。

最后，您的添加方法是这样的：

```
if(newLocation != null)
{
    if(location != null)
    {
        if(location.getAccuracy() > newLocation.getAccuracy() + 100)
            sendTask();
        else
            if(newLocation.distanceTo(location) > 1800)
                sendTask();
    }
    else
        sendTask();
} 
```

首先，在这种情况下，您不应该使用 else，您应该真正将所有 if 语句组合成一个共同的主题。我不太确定它从哪里获取位置/新位置，如果它们是线程安全的，你可能应该为它们获取函数，加分。`sendTask`另外，这可能是关键，如果没有有效位置，您总是在执行，我怀疑这是您的关键错误。尝试用以下代码替换该代码：

```
if (location!=null 
    && ((location.getAccuracy() > newLocation.getAccuracy() + 100)
    && newLocation.distanceTo(location) > 1800)
{
    sendTask();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:28:08.013

You have so much IF statements and so few elses, this make your bugs almost impossible to solve. First of all, you should write those else branches and put some kind of logger too, in order to know what is your code doing (since it's definitely not doing what you think it should do).

This way, you will be able to tell what the problem is:

*   No location.
*   Not enough accuracy.
*   Different location with same address.
*   ...

# domain-driven-design - 域服务应该如何调用基础设施服务？

> ID：14612673
> 
> 赞同：7
> 
> 时间：2013-01-30T20:04:35.767
> 
> 标签：domain-driven-design

1）当*Domain layer*使用*Infrastructure Service* **IS**时，它的接口定义在*Domain layer*，而它的实现定义在*Infrastructure layer*。

我们不应该将**IS**（例如存储库或电子邮件服务）直接注入*域实体*：

```
class Foo
{
       IRepository repo;
           ...
       public int DoSomething()
       {
            var info = repo.Get...;
              ...
       }
} 
```

*相反，如果域实体*的某个方法需要特定的**IS**，则*应用层*可以将该**IS**作为参数传递给该方法：

```
 class Foo
{
           ...
       public int DoSomething(IRepository repo)
       {
            var info = repo.Get...;
              ...
       }
} 
```

a) 我认为**IS**也不应该直接注入到*域服务*中：

```
class TransferService
{
         IRepository repo;
             ...
         public bool Transfer()
         {
            var info = repo.Get...;
              ...
         } 
} 
```

，而是应该将**IS**作为参数传递给打算使用它的*域服务方法：*

```
class TransferService
{
         public bool Transfer(IRepository repo)
         {
            var info = repo.Get...;
              ...
         } 
} 
```

b）我假设如果*域实体*的方法需要使用*域服务*，它不需要通过参数接收它（尽管将*域服务*作为参数传递具有显式传达方法依赖项的好处），而是可以调用直接，原因是*域实体*和*域服务*都是域概念：

```
class Foo
{
       ...

       public int DoSomething()
       {
            var info = TransferService.Transfer(...);
              ...
       }
} 
```

**更新：**

1)

> 如果 IS 需要它的功能，可以将它注入到域服务中 - 即不传递给方法。这与实体不同，这是因为域服务是无状态的，因此可以一次性配置所需的依赖项并在需要时使用，例如由其他实体使用。

**a) 不应该将IS**注入*域实体*的主要原因是它们的状态性质？

b）但我认为不将**IS**注入*域实体*的主要原因是因为它会违反*持久性无知*规则？

c）如果我们用**IS**注入实体的状态性质会导致什么问题？

d) 将**IS**注入*域服务*是否违反 PI？如果不是，为什么不呢？

2)

> 域服务应该作为参数传递给实体，就像您将存储库接口作为参数传递一样。同样的原则也适用。

但是与*存储库*不同，*域服务*是一个域概念，那么“同样的原则适用”是什么意思？也就是说，将*域服务*注入*域实体*不会违反**PI**，而注入*存储库*会！

**第二次更新：**

1)

一种）

> 这是原因之一。另一个是创建不必要的耦合。如果实体上的单个行为只需要一个存储库，为什么总是将它注入实体？另外，现在您必须考虑如何解决这些依赖关系？使实体成为依赖注入图的一部分？这很快就会使实体的职责超载。

因此，如果我的理解正确 - 将**IS**注入*域服务* **DS**并不违反 SRP，因为**DS**使用它来执行其指定任务（即其指定责任），而将**IS**注入*域实体*违反 SRP，因为主要责任*Domain Entity*的重点是其生命周期和身份，而**IS**大多数时候不是管理这两个任务的组成部分（即关注生命周期和身份）？

b)

> 您仍然可以将 IS 传递给域实体方法，这里的问题不会违反 PI，因为您传递的是接口，而不是实现。如果域方法仅在 IS 接口上使用一种方法，则问题将违反 SRP。

我-但是在您之前的几篇文章中，您注意到可以将**IS**作为参数传递给*Domain Entity*的方法，但是在这里您说如果此域方法在**IS**实例上仅使用一种方法，它将违反 SRP？

II - 如果**IS**实现了一个包含单个方法的基于角色的接口，而我们将这个基于角色的接口作为参数传递给域方法，你还会认为这违反了 SRP 吗？如果不是，为什么不呢？

d)

> PI 是通过使用接口来维护的。

我读过几次，即使域方法通过接口引用存储库，它仍然被认为是违反 PI。你为什么不同意呢？

2)

> 然而，最好是非常明确的。因此，与其传递存储库并隐含地理解它恰好为实体提供服务，不如将提供的功能声明为它自己的接口并让实体依赖它。

*a) 没有将域服务*注入*域实体*的唯一原因是违反 SRP？

b)

> 将提供的功能声明为其自己的接口

我假设您建议使用基于角色的界面？但是，甚至不会将基于角色的接口（由说*Domain Service*实现）注入到*Domain Entity*中会导致违反 SRP，因为正如您在**1a**中指出的那样，注入的功能很可能只需要*Domain Entity*的单一行为？ ！

**在将IS传递给***域实体*的方法方面，您和 Aaron Hawkins 似乎是对立的？！

**第三次更新：**

1)

一种）

> > 因此，如果我的理解正确 - 将 IS 注入域服务 DS 并不违反 SRP，因为 DS 使用它来执行其指定任务（即其指定责任），而将 IS 注入域实体违反 SRP，因为主要责任域实体的重点是其生命周期和身份，而IS大多数时候不是管理这两个任务的组成部分（即关注生命周期和身份）？
> 
> 是的，这是正确的，也是主要原因之一。

**I - 从远处看，通过将IS**注入*域实体* **DE**似乎完全合理，该**DE**将违反 SRP，因为**IS**不会有助于管理指定给**DE**的两个任务。

但是当试图更详细地想象这种情况时，它会有点困难。也就是说，如果**DE**的方法专注于管理两个指定任务（即它的生命周期和身份），那么如果这些方法之一需要**IS**，那么假设它需要**IS**来完成这两个指定任务不是合理的吗？不是与**DE 的**生命周期和身份无关的其他任务吗？如果是，那么我们怎么能声称**DE**违反了 SRP？

**II - 我也很难想象管理DE 的**生命周期和身份究竟意味着什么。对于初学者来说，一旦为**DE**分配了一个身份，这个身份就不会改变。那么我们需要管理它的身份呢？

III - 管理**DE 的**生命周期意味着什么？也许在**DE**上定义保持其数据一致的不变量或者......？

IV - 那么现实世界实体执行的所有其他任务（即那些与DE的生命周期和身份无关的任务）都应该从**DE**中分解出来并放入相关的对象中？

d)

> > 如果 IS 实现了一个包含单个方法的基于角色的接口，而我们将这个基于角色的接口作为参数传递给域方法，你还会认为这违反了 SRP 吗？如果不是，为什么不呢？
> 
> 这样做并不可怕，但它有可能违反 SRP 或更明确地由 guillaume31 - ISP 指定。

我不确定我们如何声称将**IS**注入**DE**可能会违反**ISP**，因为据我所知**ISP**只能被实现此接口的对象违反，而不是被注入此接口的实现的对象？

**第四次更新：**

我开始意识到 SRP 比我最初想象的更令人困惑

一种）

> 与实体相关的行为（通常需要状态更改）也应放入实体中。如果此类行为需要使用服务，请传入该服务，但通常会尝试将尽可能多的行为放入实体中。

IV – 1 以下行为方法不包括状态更改，但我认为它们也应该属于一个`Dog`实体：

```
class Dog
{
            ...
       void DoBark();
       void DoFetch();
       void DoGuard();

       Breed    GetBreed();
       Pedigree GetPedigree();
       Snack    FavSnack();
} 
```

IV – b)`GetBreed`和`GetPedigree`行为`FavSnack`方法？如果是，那么 properties`Breed`和`Pedigree`也`Snack`应该被视为行为，因为它们本质上提供了相同的功能（假设`GetBreed`,`GetPedigree`并且`FavSnack`不做一些繁重的计算，而只是简单地返回对象）：

```
class Dog
{
            ...
       void DoBark();
       void DoFetch();
       void DoGuard();

       Breed    Breed { get{...} }
       Pedigree Pedigree { get{...} }
       Snack    Snack { get{...} }
} 
```

IV – c) 如果上述属性也有*设置器*，我们会说它们包含*状态改变行为*吗？

IV – d)

> 与实体相关的行为（通常需要状态更改）也应放入实体中。

但是，如果*域实体*的主要职责是管理其生命周期，那么不包括与管理生命周期无关的行为就违反了 SRP（在上面的示例中，诸如此类的方法`Dog.DoBark`很可能与`Dog`' s 生命周期）？！

d)

一世。

> 将 IS 传递给 DE 行为方法更好，但是如果 IS 接口有很多与手头行为无关的东西，则可能违反 SRP/ISP。这是 ISP 的基本前提——依赖关系应该建立在特定的接口上，而不是恰好包含所需功能的臃肿接口。

因此，如果**IS**作为参数传递给 DE 的*行为方法*之一确实有一些与手头行为无关的操作，但 DE 的方法**M**不使用任何与**M**应该处理的行为无关的**IS**方法，我们仍然认为 DE是否违反 SRP/ISP？

 **二、– 我明白你在说什么，但我的困惑源于这样一个事实，根据以下对 ISP 的定义，该术语应仅用于指定实现特定接口的对象**ServObj**违反 ISP，而**ServObj**中的对象注入违反 SRP（由于接收**ServObj**）：

> 接口隔离原则与单一职责原则相似，都处理职责的凝聚力。实际上，ISP可以理解为将SRP应用于对象的公共接口。
> 
> 在一定程度上，ISP可以被认为是单一责任原则的一个子集，或更具体的形式。然而，ISP 的视角转变检查了给定类或模块的公共 API。

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T21:04:17.780

1a) 如果 IS 需要它的功能，可以将它注入到域服务中 - 即不传递给方法。这与实体不同，这是因为域服务是无状态的，因此可以一次性配置所需的依赖项并在需要时使用，例如由其他实体使用。

1b）域服务应该作为参数传递给实体，就像你将存储库接口作为参数传递一样。同样的原则也适用。此外，传递整个存储库接口可能会产生不必要的耦合，因此最好声明并传递特定于角色的接口。

**更新**

1a) 这是一个原因。另一个是创建不必要的耦合。如果实体上的单个行为只需要一个存储库，为什么总是将它注入实体？另外，现在您必须考虑如何解决这些依赖关系？使实体成为依赖注入图的一部分？这很快就会使实体的职责超载。

1b) 违反 PI 是违反单一责任原则的更一般概念的一个实例。您仍然可以将 IS 传递给域实体方法，这里的问题不会违反 PI，因为您传递的是接口，而不是实现。如果域方法仅在 IS 接口上使用一种方法，则问题将违反 SRP。

1c) 见 1a)

1d) 否，因为 PI 是通过使用接口来维护的。

2) 是的，这就是为什么我建议避免直接传递存储库接口的原因。原理相似，因为您可以将存储库接口和域服务都视为抽象服务，为域实体提供一些有趣的行为。然而，最好是非常明确的。因此，与其传递存储库并隐含地理解它恰好为实体提供服务，不如将提供的功能声明为它自己的接口并让实体依赖它。

**更新 2**

1a) 是的，这是正确的，也是主要原因之一。

1b）这样做并不可怕，但它有可能违反 SRP 或更明确地由**guillaume31** - [ISP](http://en.wikipedia.org/wiki/Interface_segregation_principle)指定。所以它比说注入实体实例要好，但可以通过声明一个特定的接口来改进。

不，如果您创建一个基于角色的界面，那么这与在这种情况下获得的效果一样好。

1d) 如果实体使用存储库接口来持久化自身，则这违反了 PI。但是，如果它使用存储库接口来执行一些查询以运行其业务逻辑，那么我们实际上并不是在谈论持久性。为了真正解耦存储库，请使用特定于角色的接口。

2a）是的，出于同样的原因，将存储库注入实体是不合适的。

2b）是的，但我只是建议在您将域服务传递给实体上的行为方法的场景中，而不是将其注入实体实例本身。

**更新 3**

1a）我同意这可能是一个争论点。但是，从实际的角度来看，最好设计 DE 以消除它们对外部服务的依赖，或者使其非常明确和隔离。如果您的 DE 对 IS 具有实例依赖性，这意味着无论何时创建 DE 的实例，例如在重构期间或创建新实体时，都必须在那时提供 IS。这使依赖关系图变得复杂。此外，如果 DE 负责维护其自身状态的完整性，为什么还要依赖外部服务？服务可能需要调用某些行为，但维护完整性通常可以在没有外部服务的情况下完成。事实上，以这种方式对外部服务的依赖通常是混合责任的味道。

II, III) 这包括诸如保护不变量之类的事情。例如，实体可以通过引发异常来确保其值不会进入不一致状态。这是 OOP 的基本前提——封装状态并暴露行为。

IV) 与实体相关的行为，通常需要状态改变，也应该放入实体中。如果此类行为需要使用服务，请传入该服务，但通常会尝试将尽可能多的行为放入实体中。这并不总是完美的，但你可以为理想而努力。

d) To be sure, when I say injecting IS I mean having a required instance reference to an IS from a DE. This is discouraged for reasons above. Passing IS to a DE behavioral method is better, however can violate SRP/ISP if IS interface has lots of things unrelated to the behavior at hand. This is the basic premise of ISP - dependencies should be made on specific interfaces as opposed to bloated interfaces that happen to contain the required functionality.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T21:01:39.617

域实体应该对持久性（存储库）或进程（域服务）一无所知。相反，您的应用程序会将这些编排在一起。

例如，这里是存储库编排：

```
ISomeAggregateRepository repository = //TODO: Construct repository and load it with the de-hydrated aggregates you intend to work with under your scope.
foreach (SomeAggregate someAggregate in repository) //The repository functions like an in memory collection.
{
    someAggregate.DoSomethingCool(); //The domain aggregate would expose an event to let the repository know that this method has been called and that the instance should be saved afterwards. (mimicking saving to a reference)
} 
```

以下是域服务编排示例：

```
ISomeDomainService service = new ConcreteInfrastructuralSpecificDomainService();
service.DoSomethingCool(SomeAggregate target); //Send the aggregate to the domain service, not the other way around. 
```

我和你在同一条轨道上的时间最长并且非常困惑，但是一旦我弄清楚如何按照我的示例描述的方式组织代码，事情就会变得更加清晰。

请记住，应用程序应该选择您的存储库、域服务和可能的工作单元的实现（通常是特定于基础架构的）。

希望这可以帮助！

**更新**

> A - 你的意思是只有应用层应该创建和使用域服务，而域实体甚至不应该知道它们的存在？但为什么？

以下是我想到的一些。我不会认为这是一个完整的列表，但应该足以证明我的陈述。

*   封装（域聚合的内部工作不会暴露给将要传递的存储库和/或域服务的实现）

*   存储库/域服务本质上是基础设施，因此不应将其组合到您的业务域中，这会使您的业务逻辑保持简洁和富有表现力。（这些接口在域中为实现者提供了一种实现存储库/域服务的合同方式，从而防止应用程序引用比需要更多的项目。）

*   使您的域对存储库/域服务一无所知，这会进一步强制解耦和可能的依赖关系，这将朝着错误的方向发展（基础设施项目应该引用域项目，反之亦然，如果有人通过传入一个没有依赖注入的情况下实现您的域，则可能发生这种情况*参考*具体实现）。

*   变更管理/可维护性（参见[洋葱架构](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)）

> B - 我假设您发布的所有代码都驻留在应用程序层中？

你是对的好先生！**

# jquery - 在 div 中横向滚动

> ID：14612678
> 
> 赞同：1
> 
> 时间：2013-01-30T20:04:42.387
> 
> 标签：jquery, html, ios, ipad, jquery-mobile

是否有任何脚本或 jquery 插件允许用户在 div 内作为菜单从左侧或右侧滚动？

整个页面将是静态的，但您可以向左或向右滑动以选择不同的页面。最终结果将在 ipad 上查看。类似于任何 ios 设备中的封面流功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:46:49.187

**编辑：**大声笑，好像我误解了这个问题。[您可以使用 jQuery mobile 或swipe.js](http://swipejs.com/)创建自己的基于触摸的滑块。我还在这里找到了一个基于触摸的滑块插件：[http ://www.photoswipe.com/](http://www.photoswipe.com/)

如果您想做自定义滑块，请检查那里的 jsFiddle。

您可以创建一个遮罩区域并在其中放置元素，而不是使用[鼠标滚轮](http://brandonaaron.net/code/mousewheel/demos)插件可以计算滚轮的速度。您可以将此值用于动画蒙版区域：

[**这是工作的jsFiddle。**](http://jsfiddle.net/mjaA3/332/)

```
$('.mask').bind('mousewheel', function(event, delta) {
    var dir = delta > 0 ? 'up' : 'down', 
    vel = Math.abs(delta);//mousewheel's velocity value

    var cur = parseInt($('.imgHolder').css('left'));

    if( dir === 'up' && cur <= 0 ) {
        $('.imgHolder').css({'left':'+='+ vel*5 +'px'});
    }
    else if ( dir === 'down' && cur > -1100 ){
        $('.imgHolder').css({'left':'-='+ vel*5 +'px'});
    }

    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:12:02.553

只需使用这样的东西：

```
div
{
  overflow-y:scroll;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:46:40.510

好吧，通过我自己的挖掘，我能够找到这几乎是我想要的。

[http://code.comunicatek.com/en/tekslider_a_touch_focused_slider.html](http://code.comunicatek.com/en/tekslider_a_touch_focused_slider.html)

想我会发布它，所以如果其他人正在寻找同样的东西，他们会看到它

# javascript - 如何在javascript中的函数之间传递元素？

> ID：14612679
> 
> 赞同：0
> 
> 时间：2013-01-30T20:04:44.933
> 
> 标签：javascript

我在同一页面上有几个表单，每个表单都有 .select_form 类，当您单击表单上的复选框时，每个表单都会通过 ajax 发送选定的值。

我想要做的是引用选定的元素（因为有多个表单具有相同的 css 类），而不是以不同的方式命名每个表单。理想情况下，我想我需要引用“this”并传递它，但我就是无处可去！

```
$('.select_form input').live("click", function(){
     check();
});

function check()
  {

     $("#ajax_totals").load("/stuff/things", $(".select_form").serializeArray());
  } 
```

我想我想要类似的东西：

```
$('.select_form input').live("click", function(){
     check(this);
});

function check(this)
  {

     $("#ajax_totals").load("/stuff/things", $(this).serializeArray());
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:06:39.847

是的，您可以，您不能使用该变量`this`，因为它是[reserved](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)。

```
function check(elem)
{
     $("#ajax_totals").load("/stuff/things", $(elem).serializeArray());
} 
```

其他选项是使用[call()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:08:24.577

您可以使用[`.call()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)动态设置的值`this`应该是什么：

```
$('.select_form input').live("click", function(){
     check.call(this);
});

function check () {
    $("#ajax_totals").load("/stuff/things", $(this).serializeArray());
} 
```

# jquery - 使用 div 进行类似表格的布局，如何使用 CSS 或 jQuery 突出显示某些 div

> ID：14612682
> 
> 赞同：0
> 
> 时间：2013-01-30T20:04:52.613
> 
> 标签：jquery, css

我正在使用 div 创建一个类似表格的布局。我试图模仿突出显示的表格行，但使用 div 方法。有没有一种简单的方法可以使用 css/jquery 而不是在每个 div 上抛出属性？

这是我用来突出显示 div 的 css。我也在寻找在适当的行中突出显示的第一个“列”......

因此，如果我在输入的第二列中，在第二行中，我希望突出显示该输入和相应的标签。

```
.dinfo > div:hover
{
background: #eee;
} 
```

这是我的小提琴：http: [//jsfiddle.net/6dFqd/](http://jsfiddle.net/6dFqd/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:28:13.853

我会切换到桌子。在 CSS 中使用`:nth-child()`伪类来设置元素的样式。

一个例子是`table tr:nth-child(odd) {}`

您也可以用数字代替奇数或偶数。

# ruby - 来自两个范围的 Ruby 数组

> ID：14612685
> 
> 赞同：4
> 
> 时间：2013-01-30T20:05:05.757
> 
> 标签：ruby, multidimensional-array, range

我正在寻找一种创建数组的方法，例如：

```
[[1,1], [1,2], [1,3]
[2,1], [2,2], [2,3]
[3,1], [3,2], [3,3]] 
```

现在我想出了这个解决方案：

```
w=3 # or any int
h=3 # or any int
array = []
iw=1
while iw<=w do
  ih=1
  while ih <=h do
    array<<[iw, ih]
    ih+=1
  end#do
  iw+=1
end#do 
```

但是，我敢肯定一定有更快的方法..？这需要 1.107 秒... (w=1900; h=1080) 问候

编辑：我应该注意到我坚持使用 1.8.6 ..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T20:37:08.083

使用[`product`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-product)或[`repeated_permutation`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-repeated_permutation)：

```
[1, 2, 3].product([1, 2, 3]) # => [[1, 1], ...
# or
[1, 2, 3].repeated_permutation(2) # => [[1, 1], ... 
```

`product`在 Ruby 1.8.7+ 中（在 1.9.2+ 中接受块），而`repeated_permutation`在 1.9.2+ 中。对于其他版本的 Ruby，您可以使用 include my [`backports`](https://github.com/marcandre/backports)gem 和`include 'backports/1.9.2/array/repeated_permutation'`or `include 'backports/1.8.7/array/product'`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T20:13:43.113

这类似于@nicooga 的答案，但我会使用范围而不是手动创建数组（即，您不必为更大的数组键入每个数字）。

```
range = (1..3).to_a
range.product(range)
#=> [[1, 1], [1, 2], [1, 3], [2, 1], [2, 2], [2, 3], [3, 1], [3, 2], [3, 3]] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T20:09:05.407

有一个更快的方法：

```
> [1,2,3].product([1,2,3])
=> [[1, 1], [1, 2], [1, 3], [2, 1], [2, 2], [2, 3], [3, 1], [3, 2], [3, 3]] 
```

# html - 背景图像：网址不起作用

> ID：14612688
> 
> 赞同：2
> 
> 时间：2013-01-30T20:05:22.793
> 
> 标签：html, css

我正在尝试通过 background-image:url 将背景图像添加到链接中，如下所示

```
 <a href="#" style="width:300px; height:125px; background-image:url('http://dev.nclexreview.net/media/3549/livereviewsignin.png')"></a> 
```

我尝试过内联 CSS 和外部 CSS。

它在 div 中完美运行，但在 a 中却不行。

我也尝试过使用 background:url 并且也没有运气。这是一个精灵图像，我想根据鼠标悬停改变位置，但我什至无法让图像首先出现。

我真的很感激一些帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:09:32.197

“a”标签是*内联*元素，将其显示类型改为块状；

[http://jsfiddle.net/qWW68/](http://jsfiddle.net/qWW68/)

```
<a href="#" style="display:block;width:300px; height:125px; background-image:url('http://dev.nclexreview.net/media/3549/livereviewsignin.png')"></a> 
```

因为这是一个精灵，所以您需要将其移动到外部样式表中以添加伪类样式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:10:51.003

无论如何，您都需要将样式放在工作表中。您可以使用一般背景设置 a 元素的样式，然后在 a:hover 上，只需使用背景位置。

# django - 如何创建 Django 项目文件夹

> ID：14612689
> 
> 赞同：6
> 
> 时间：2013-01-30T20:05:25.610
> 
> 标签：django, windows, command-line

我正在关注 Django 的教程，我想通过 Windows 命令提示符创建一个文件夹（教程要求在 处键入以下内容`C:\`）：

```
django-admin.py startproject django_bookmarks 
```

我应该得到以下包含这些文件的文件夹：

```
django_bookmarks/
     __init__.py manage.py settings.py urls.py 
```

我在 c:\，在 c:\Django-1.4.2 尝试过。

我收到相同的以下错误消息：

“Django-1.4.2 未被识别为内部或外部命令、可运行程序或批处理文件”

注意：Django 已正确安装。我对 python 进行了测试，它正确显示了 Django 的版本。

如何创建该文件夹？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T21:46:28.953

您可以尝试使用以下命令（如果 Python-2.7.X 是您的解释器，并且您尚未在 virtualenv 中安装 Django）：

> C:\Python27\Scripts\django-admin.py startproject django_bookmarks

如果您在 virtualenv 中安装了 Django，请将部分替换`C:\Python27`为此 virtualenv 的路径。

如果您已经安装了多个版本的 Python，请查看此 SO[答案](https://stackoverflow.com/a/10070104/493211)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T20:07:53.937

`$`不是命令的一部分，它是命令提示符。它表示该命令应在命令行解释器中输入。

命令本身应以`django-admin.py`：

```
django-admin.py startproject django_bookmarks 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-21T02:06:57.247

如果有人仍然需要，你必须在前面有*python ：*

```
directory1\directory2>python django-admin.py startproject django_bookmarks. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-15T05:54:11.807

激活虚拟环境后使用此命令。

```
django-admin startproject project_name 
```

然后创建一个新的应用程序运行这个命令：

```
python manage.py startapp app_name 
```

# ruby-on-rails - 如何在 Heroku 上重新启动 Rails 服务器？

> ID：14612695
> 
> 赞同：239
> 
> 时间：2013-01-30T20:05:48.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

在本地我只是中断（ctrl-c）然后重新启动它。

如何在 heroku 上使用应用程序做同样的事情？

* * *

## 回答 #1

> 赞同：461
> 
> 时间：2013-01-30T20:08:05.527

答案是：

```
heroku restart -a app_name

# The -a is the same as --app 
```

轻松别名，`alias hra='heroku restart --app '`
您可以通过将其添加到您的 .bashrc 或 .bash_aliases 文件来创建永久别名，如下所述： [https ://askubuntu.com/questions/17536/how-do-i-create-a-permanent-bash -alias](https://askubuntu.com/questions/17536/how-do-i-create-a-permanent-bash-alias)和
[创建永久可执行别名](https://stackoverflow.com/questions/5137726/creating-permanent-executable-aliases)
然后你可以输入`hra app_name`

您可以重新启动特定的遥控器，例如“登台”：

```
heroku restart -a app_name -r remote_name 
```

或者，如果您位于 Rails 应用程序的根目录中，则只需键入

```
heroku restart 
```

重新启动该应用程序，您可以为其创建一个简单的别名

```
alias hr='heroku restart'` 
```

您可以将这些别名放在您的`.bashrc`文件中，或者（首选）放在从以下`.bash_aliases`位置调用的文件中`.bashrc`

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-04-30T07:34:18.853

进入终端上的应用程序目录并运行以下命令：

```
heroku restart 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-12-19T16:32:23.217

如果您有多个 heroku 应用程序，则必须键入 `heroku restart --app app_name`或`heroku restart -a app_name`

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-02-01T20:53:25.940

只需从控制台键入以下命令。

```
cd /your_project
heroku restart 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-02-01T20:36:43.590

```
heroku ps:restart [web|worker] --app app_name 
```

适用于 Procfile 中声明的所有进程。因此，如果您有多个 Web 进程或工作进程，每个都标有一个数字，您可以选择性地重新启动其中一个：

```
heroku ps:restart web.2 --app app_name
heroku ps:restart worker.3 --app app_name 
```

# php - Serp 跟踪器 PHP 脚本

> ID：14612697
> 
> 赞同：1
> 
> 时间：2013-01-30T20:05:50.223
> 
> 标签：php, class, function, seo, keyword

我一直在尝试编写自己的关键字排名扫描器以用于 SEO。我发现了一个看起来很有帮助的 PHP 类，但我不知道如何让它工作。

我对在 PHP 中使用类/函数还很陌生。

这是我找到的代码： [http ://www.andreyvoev.com/programming/simple-serp-tracker-php-class/](http://www.andreyvoev.com/programming/simple-serp-tracker-php-class/)

我已经完全复制并粘贴了它，但它仍然无法正常工作。有人愿意向我解释吗？

**编辑**

我最终做的是将整个事情放在一个脚本中，我在脚本的开头有一个类以及 GoogleTracker 类，然后我有一个运行它的位。

```
$test =  new GoogleTracker(array ('lsp'), 'adventuretime.wikia.com', 50);
        //$test->use_proxy('proxy.txt');
        $test->run();

        $results = $test->get_results();
       // $debug = $test->get_debug_info();

        print $results;
        //print_r($debug); 
```

当我在浏览器中运行它时，唯一打印的是

```
Array() 
```

我做错了什么还是脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:55:35.397

我不知道为什么我花了这么长时间才看到这个……是的，你做错了什么。您正在尝试将数组转换为字符串。

这不适用于普通[`print()`](http://us3.php.net/manual/en/function.print.php)函数，因为它需要一个字符串作为输入......而不是混合变量。要查看结果，您要么想要[`print_r()`](http://us3.php.net/manual/en/function.print-r.php)，要么直接查看数组键：

```
$results = $test->get_results();
print($results["lsp"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:12:18.923

您必须在代码中包含此类：

```
include('serp_tracker.php');
// include the class GoogleTracker extends , the second class of bottom 

$test =  new GoogleTracker(array('git'), 'www.kernel.org', 50);
//$test->use_proxy('proxy.txt');
$test->run();

print_r($test->get_results());
echo "================<br>";
print_r($test->get_debug_info()); 
```

# java - 如何替换字符串继续

> ID：14612698
> 
> 赞同：0
> 
> 时间：2013-01-30T20:05:51.130
> 
> 标签：java, string

我在java中编写用于解码gps的代码，gps向我发送我可以在我的代码中看到的继续字符串但是当我解码它时，只有一个字符串被解码并且由于我的字符串必须为下一个字符串为空而停止工作我尝试这样做但没有得到成功。任何人都知道这种情况

```
package communication;

import javax.comm.*;
import java.util.*;
import java.io.*;
import new8.*;

class Serial
{
public static void main(String args[]) throws UnsupportedCommOperationException, IOException, TooManyListenersException
{
int c=1;

String wantedPortName = "COM6";

Enumeration portIdentifiers = CommPortIdentifier.getPortIdentifiers();

CommPortIdentifier portId = null;  
while(portIdentifiers.hasMoreElements())
{
    CommPortIdentifier pid = (CommPortIdentifier) portIdentifiers.nextElement();
    if(pid.getPortType() == CommPortIdentifier.PORT_SERIAL &&
       pid.getName().equals(wantedPortName)) 
    {
        portId = pid;
        break;
    }
}
if(portId == null)
{
    System.err.println("Could not find serial port " + wantedPortName);
    System.exit(1);
}
else
{
    System.out.println("system find gps reciever");
}
SerialPort port = null;
try {
    port = (SerialPort) portId.open(
        "RMC", 
        1);
    System.out.println("all are ok"); 
} catch(PortInUseException e) {
    System.err.println("Port already in use: " + e);
    System.exit(1);
}

port.setSerialPortParams(
    4800,
    SerialPort.DATABITS_8,
    SerialPort.STOPBITS_1,
    SerialPort.PARITY_NONE);

BufferedReader is = null;  

try {
  is = new BufferedReader(new InputStreamReader(port.getInputStream()));
  System.out.println("data is ok");
} catch (IOException e) {
  System.err.println("Can't open input stream: write-only");
  is = null;
}

String pt=null;
while(true)
{

is.readLine(); 
is.readLine(); 
  String st = is.readLine(); 

System.out.print("("+c+")");
c++;
new8 obj1=new new8();

obj1.decode(st);
  System.out.println(st);
  st=st.replace(st, "");

}

if (is != null) is.close();
/*if (os != null) os.close();*/
if (port != null) port.close();

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:21:11.933

您想要实现的是通过 COM 端口解析来自 GPS 接收器的 NMEA 数据。

我在 C（开源项目导航系统“Navit”）中看到过这样的代码。

但是我记得序列号可能会被破坏，因此，他们会检查消息中是否包含“$GP” praeambel。如果 NMEA 行中提供的校验和是正确的。

我建议您看一下 Navit 代码（尽管它是用 C 语言编写的）。您不是第一个从 COM 端口解码 NMEA 的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:27:45.947

代码应如下所示以具有正确的流程。逻辑上不说什么。

```
if (is !=  null) {
    //String pt = null;
    while (true) {

        String st = is.readLine();
        if (st == null) {
            break;
        }
        st = is.readLine();
        if (st == null) {
            break;
        }
        st = is.readLine();
        if (st == null) {
            break;
        }

        System.out.print("(" + c + ")");
        c++;
        new8 obj1 = new new8();

        obj1.decode(st);
        System.out.println(st);
        st = st.replace(st, "");

    }
    is.close();
} 
```

# actionscript-3 - Spark 列表控件和 DataProvider

> ID：14612702
> 
> 赞同：0
> 
> 时间：2013-01-30T20:06:17.680
> 
> 标签：actionscript-3

我难住了。我正在尝试从随机数生成器填充火花列表控件。我可以将随机数添加到我在 spark 列表声明中指定为我的 dataProvider 的 arrayList。但是该列表中没有出现随机数！不确定我做错了什么，感谢您的帮助。谢谢！

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 

               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               creationComplete="init()">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->

    </fx:Declarations>

    <fx:Script>
        <![CDATA[

            import flash.events.MouseEvent;

            import mx.collections.ArrayCollection;
            import mx.collections.ArrayList;
            import mx.core.DragSource;
            import mx.events.DragEvent;
            import mx.managers.DragManager;

        //  [Bindable]
            //public var num1:String;

            [Bindable]
            public var arrayList:ArrayList = new ArrayList();

            var maxNum: Number;
            var minNum: Number;

            function RandomNumber(minNum: Number, maxNum:Number): Number {

                return (Math.floor(Math.random() * (maxNum - minNum +1)) + minNum);}

            protected function h_slider_changeHandler(event:Event):void
            {
                // TODO Auto-generated method stub
                main_number.text = (h_slider.value.toString());
                number_1.text = String(RandomNumber(0,100));
                number_2.text = String(RandomNumber(0,100));
                number_3.text = String(RandomNumber(0,100));
                number_4.text = String(RandomNumber(0,100));

                var num1 = String(number_1.text);

                 var arrayList:ArrayList = new ArrayList([{numberone:num1}]);

            }

        ]]>
    </fx:Script>

    <s:Panel x="49" y="30" width="866" height="541">
        <s:controlBarContent/>

        <mx:HBox id="myHB">
        </mx:HBox>

        <s:TextArea id="number_1" x="56" y="10" width="74" height="74" />
        <s:TextArea id="number_2" x="56" y="387" width="74" height="74"/>
        <s:TextArea id="number_4" x="694" y="10" width="74" height="74"/>
        <s:TextArea id="number_3" x="703" y="387" width="74" height="74"/>
        <s:TextArea id="main_number" x="338" y="97"/>

        <s:TextArea id="drag_to_1" x="194" y="97" width="78" height="80" />
        <s:TextArea id="drag_to_2" x="194" y="284" width="78" height="80"/>
        <s:TextArea id="drag_to_3" x="568" y="97" width="78" height="80"/>
        <s:TextArea id="drag_to_4" x="568" y="284" width="78" height="80"/>
        <s:TextArea x="337" y="298" height="66"/>

        <s:HSlider id="h_slider" x="243" y="434" width="403" height="14"
                   change="h_slider_changeHandler(event)" maximum="100" minimum="0"
                   value="100"/>

        <s:List id="List1" x="56" y="181" width="110" height="92" dataProvider="{arrayList}"
                 dragEnabled="true" labelField="numberone" >

        </s:List>

    </s:Panel>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:57:02.820

与@Gunther 的观察类似，您的任务是`arrayList`：

```
var arrayList:ArrayList = new ArrayList([{numberone:num1}]); 
```

创建一个新的局部变量，并且不分配`arrayList`实例变量（这是绑定到列表的变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:16:20.763

您有两个从未初始化的变量：

```
var maxNum: Number;
var minNum: Number; 
```

这些变量与您的函数中的变量具有相同的名称，`RandomNumber`并且您不会在函数之外使用它们，因此您应该删除这两行。

# iphone - 当 Core Data 尝试在 iOS 上与 iCloud 同步时发生奇怪的崩溃

> ID：14612707
> 
> 赞同：2
> 
> 时间：2013-01-30T20:06:37.127
> 
> 标签：iphone, ios, core-data, icloud

我正在尝试在我的 iPhone 应用程序中使用由 Core Data 管理并与 iCloud 同步的数据库。

我使用了 WWDC 2012 中的示例代码，并设法使其几乎正常工作。

另外，我的数据库很简单：只有一种对象，没有关系。

两个设备可以通过 iCloud 进行通信，但是，这个小场景失败了：

*   在设备 A 上创建一个对象
*   等待对象出现在设备 B 上
*   修改设备A上的对象
*   修改设备 B 上的对象
*   当设备 B 知道更新时，它会尝试合并更改并且应用程序崩溃。

是的，应用程序崩溃了。我的数据库中只有一个对象，Core Data 似乎无法解决一点点冲突。

以下是我创建持久存储的方式以及使用哪些选项：

```
NSDictionary *options = @{NSPersistentStoreUbiquitousContentNameKey : contentName,
NSPersistentStoreUbiquitousContentURLKey : iCloudLogsPath};
self.iCloudStore = [self.persistentStoreCoordinator  
    addPersistentStoreWithType:NSSQLiteStoreType
    configuration:nil
    URL:iCloudData
    options:options
    error:&error]; 
```

这是我用来在后台创建 NSManagedObjectContext 的代码：

```
- (NSManagedObjectContext*) currentThreadContext {

    NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    [moc setPersistentStoreCoordinator:self.persistentStoreCoordinator];
    [moc setMergePolicy:NSMergeByPropertyStoreTrumpMergePolicy];
    return moc;
} 
```

我确实添加了一个断点来捕获任何异常，这是我得到的：

```
objc_exception_throw:
[NSPersistentStoreCoordinator executeRequest:withContext:error:]:
[NSManagedObjectContext save:]:
[_PFUbiquityRecordImportOperation main]:
[__NSOperationInternal start]:
[_PFUbiquityRecordsImporter scheduleTransactionLogOperations:synchronous:error:]:
[_PFUbiquityRecordsImporter scanOperationFinished:withDiscoveredLogLocation:error:]:
[PFUbiquityImportScanOperation main]:
[__NSOperationInternal start]:
[_PFUbiquityRecordsImporter scheduleUbiquityRootScan:withLocalPeerLogs:error:]:
[_PFUbiquityRecordsImporter rollResponseOperation:successfullyAdoptedBaseline:]:
[PFUbiquityBaselineRollResponseOperation main]:
[__NSOperationInternal start]: 
```

任何帮助将不胜感激！

# javascript - 如何伪造 1px 的浏览器调整大小并将其恢复到原来的样子？

> ID：14612709
> 
> 赞同：2
> 
> 时间：2013-01-30T20:06:41.620
> 
> 标签：javascript, jquery, browser

我有一个脚本，它似乎只在我调整浏览器大小时才开始。我不知道为什么，开始时间不够用了。所以我想知道我是否可以模拟浏览器在页面加载到它之后调整大小可以触发脚本，然后将浏览器分辨率恢复到原来的状态。

这可能吗 ？

**编辑**

好的，如果我从菜单中的链接加载页面，现在脚本可以工作，但是如果我单击浏览器的刷新按钮则会失败。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T20:07:21.130

只需触发`resize`事件：

```
$(function () {
    $(window).resize();
}); 
```

# image-processing - imcrop matlab 不返回正确的大小

> ID：14612710
> 
> 赞同：1
> 
> 时间：2013-01-30T20:06:41.223
> 
> 标签：image-processing, matlab, matlab-figure

我想使用 imcrop 在 matlab 中裁剪图像。但是，有时它会产生比我想要的尺寸大一号的图像。基本上，我的问题与此相同。 [http://www.mathworks.se/matlabcentral/answers/46737-how-do-i-make-the-imcrop-function-accurate-to-the-pixel](http://www.mathworks.se/matlabcentral/answers/46737-how-do-i-make-the-imcrop-function-accurate-to-the-pixel) 但是，即使这样也没有解决。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:47:44.637

我无法真正解决问题。但是，我应用了一个简单的解决方法。我使用 imcrop 来裁剪所需的尺寸。然后再次将裁剪后的图像调整为所需大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T20:32:28.047

`imcrop`确实返回“正确大小”，即其文档中指定的大小。一个矩形有时`r1 = [20 20 40 30]`并不*总是*21 x 11 像素宽。

如果您对正确大小的期望不同，您可以对矩形进行不同的索引。如果您想要一个以像素 (20,20) 为左上边缘、高 20 像素、宽 10 像素的矩形，您可以指定`r1 = [20, 20, 39, 29]`.

`imcrop`之所以这样工作，是因为它对由像素组成的图像数据进行操作。正在索引像素，而不是空间中的点。在数学上，一个点没有宽度和高度，但一个像素具有一个像素的宽度和高度。

举一个极端的例子，`r2 = [5, 6, 8, 9]`包括从第 5 行到第 6 行和第 8 到第 9 列的像素，因此是 2 x 2 像素宽。

# c# - 使用 Roslyn 进行 C# 流分析

> ID：14612713
> 
> 赞同：3
> 
> 时间：2013-01-30T20:06:56.993
> 
> 标签：c#, semantics, roslyn

我想要

1.  遍历语法树以查找所有`if`/`else`语句，
2.  分析数据流的语法树，
3.  收集计算`if`和`else`块的结果所需的变量，
4.  最后计算每个`if`/`else`节点的结果。

这可以使用roslyn吗？

# c# - 我需要重复的测试方法吗？1个单元和1个集成测试？

> ID：14612716
> 
> 赞同：2
> 
> 时间：2013-01-30T20:07:04.013
> 
> 标签：c#, unit-testing, moq, integration-testing

我是单元测试的新手，我发现的大部分信息似乎都在单元测试方面。我对此有了很好的掌握，并计划将 MS Test Framework 与 Moq 一起使用，因此我不必为我的单元测试依赖项手动滚动任何模拟。

假设我有以下*单元*测试方法：

```
[TestMethod]
public void GetCustomerByIDUnitTest()
{
   //Uses Moq for dependency for getting customer to make sure 
   //ID I set up is same one returned to test in Assertion
} 
```

我是否必须创建*另一个*相同的测试，而不是使用实际的实体框架和数据库调用来进行集成测试？

```
[TestMethod]
public void GetCustomerByIDIntegrationTest()
{
   //Uses actual repository interface for EF and DB to do integration testing
} 
```

出于这个问题的目的，请留下关于 TDD 或 BDD 的主题；我很容易确定我是否需要（2）单独的测试以及组织这些测试的方式。在进行单元测试和集成测试时这是一个要求吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:13:14.327

在我看来，这在某种程度上是情境性的。如果我正在从事一个小型个人项目，那么不，我只是进行单元测试。

如果是公司/企业项目，那么我确实倾向于同时进行单元测试和集成测试。但是，请将单元测试和集成测试分开。开发人员应该能够频繁且快速地运行单元测试。集成测试可以不那么频繁地运行，因为它们通常需要很长时间才能运行。通常我只在提交之前运行一次集成测试，而我更频繁地运行单元测试。

* * *

作为附加说明，让您的测试名称解释应该发生的事情。测试名称`GetCustomerByIDUnitTest`真的没有告诉我太多。更好的是：`GetCustomerByID_ReturnsTheCorrectUser_WhenAValidIdIsPassed`反之亦然`GetCustomerByID_ReturnsNull_WhenNonExistantIdIsPassed`

我倾向于使用`What_Does_When`命名约定，但这也是个人喜好。一般来说，越解释越好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:25:39.570

嗯，我希望我不会因为提及您不愿提及的事情而让您失望。但这里我的 2 美分就可以了。预先声明一份免责声明。我使用`nunit`with `RhinoMocks`，所以语法可能不同，但概念是相同的。

**是的，您需要单独的测试**。您可以讨论是否要将测试存储在同一个测试类中，并标记它们`[Category("integrationtest")]`以便您可以轻松运行单元测试而无需运行集成测试，反之亦然。通过您的 TDD 实践（哎呀，我知道您不想让我谈论这个 :)），您需要尽快完成单元测试。

从稍微不同的角度来看这个；你并没有真正复制你的测试。您的集成测试验证功能，而您的单元测试单独验证方法。所以他们很可能有完全不同的名字。只要它们对您有意义（或者如果您与团队一起开发某些东西：只要它对您的团队有意义）。

我认为最重要的是找到适合自己的方法。真的没有对错之分。我认为你正在编写单元测试和集成测试是一个很大的优势。你如何组织它们取决于你。在我参与的不同项目中，我有不同的方法：

项目一：

*   1 个用于集成测试的测试类
*   1个用于单元测试的测试类

这有助于为测试类创建有意义的名称，它们可以捕获我们正在测试的实际功能。至于单元测试，测试类与我们正在测试的类同名。

项目B：

*   在一个测试类中混合了集成测试和单元测试。

这也很好用，尽管我们有时确实很难找到集成测试。但是，在您身边有 resharper 的情况下，这有多难:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:14:45.340

据我所知，您应该有单独的 UnitTesting 和 IntegrationTesting 项目。这[本书](http://books.google.nl/books?id=pZ49u0fSuGsC)的建议是创建两个项目并将它们命名为`ProjectName.UnitTests`和`ProjectName.IntegrationTests`。开发人员必须单独且轻松地运行它们中的每一个。

[您可以在此处](http://osherove.com/)找到许多有关测试的有趣主题和视频

# azure - 命名架构在 Azure SQL 中不起作用

> ID：14612717
> 
> 赞同：3
> 
> 时间：2013-01-30T20:07:09.663
> 
> 标签：azure, asp.net-mvc-4, schema, azure-sql-database, simplemembership

我想在 Azure 网站应用程序中使用单独的/命名架构来使用 Azure SQL 在单独的架构模式中实现多租户。我的应用程序在 Visual Studio 中运行正常，但在 Azure 上运行不正常。我在 StackOverflow 上搜索了类似的问题，发现：这个答案表明它无法完成：[Windows Azure 上的多租户应用程序](https://stackoverflow.com/questions/2872732/multi-tenant-application-on-windows-azure)。此问题不适用于命名架构：[Azure SQL 数据库在本地运行时工作，但在发布到 Azure 时不工作](https://stackoverflow.com/questions/12726981/azure-sql-database-working-when-ran-locally-but-not-when-published-to-azure)。

对于我正在开发的 MVC4 应用程序，我将 Azure SQL 数据库配置为使用命名架构并修改了连接字符串登录名和密码。当我尝试注册第一个用户时，它从 Azure SQL 抛出错误消息“无效的对象名称'UserProfile'”。我检查了堆栈跟踪，一切看起来都很合理，因此我查看了 SimpleMembershipProvider 的代码，并没有看到使用命名模式时应该中断的任何内容。

作为概念验证，我打开 Visual Studio 2012 并使用 Internet 应用程序模板创建了一个新的 MVC4 应用程序，它使用 .NET Framework 4.5，当然它实现了简单成员资格提供程序。我打开 Azure 控制台并使用新数据库创建了一个新网站，然后将应用程序发布到 Azure。我运行应用程序并单击注册链接以添加第一个用户。这很成功，我能够注销、登录等。

然后，我通过创建新的命名架构、登录名和用户来修改 PoC 应用程序的 Azure SQL 配置。我在新数据库中为新用户添加了 db_owner 角色。我更改了用户的默认模式并将初始运行创建的表转移到命名模式中。我确认用户的默认模式是正确的，并且表在命名模式中。我在“发布”对话框的“连接字符串”部分更改了用户名和密码，并再次从 Visual Studio 发布了应用程序。我在 Chrome 中打开了该网站，然后单击了注册链接。我输入了用户名和密码并收到错误消息“无效的对象名称'UserProfile'”。尝试使用第一次运行中创建的用户登录时，我遇到了同样的错误。

我正在寻找有关下一步检查内容的想法。我可以解决这个问题，但如果我错过了任何简单的事情，我宁愿以有效的方式解决问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:23:45.490

我似乎在 Azure 网站中发现了一个错误，导致连接字符串无法通过发布网站来更新。

Azure 管理门户网站的配置页面上有一个连接字符串。此连接字符串用于连接到网站的数据库。它最初包含用于创建数据库的用户 ID 和密码。在 Visual Studio 网站项目（在 Web.config 或“发布 Web”对话框中）输入不同的用户 ID 和密码对 Azure 中的连接字符串没有影响。这在我的特定情况下引起了问题，但对于不使用类似 sa 的服务器级用户从网站访问数据库的任何人来说也是一个问题。

我为这个问题找到的解决方法是直接在网站的配置页面上修改 Azure 中的连接字符串，而不是依赖于 Visual Studio 项目中更改的有效性。这解决了问题，现在命名模式可以正常工作。

# c++ - 在 C++ 中连接#define

> ID：14612720
> 
> 赞同：1
> 
> 时间：2013-01-30T20:07:29.287
> 
> 标签：c++, compiler-errors, c-preprocessor

我有类似的东西：

```
#define BASE_FOLDER = "Resources"
#define PREFERENCE_FILE_NAME = "AppPreferences.txt"
#define SPLASH_FILE_NAME = "Splash.png"

#define PREFERENCE_PATH = ".\\" + BASE_FOLDER + "\\" + PREFERENCE_FILE_NAME
#define SPLASH_PATH = ".\\" + BASE_FOLDER + "\\" + SPLASH_FILE_NAME 
```

并且编译器在使用 PREFERENCE_PATH 的地方抛出错误。

```
expecting primary expression before = token. 
```

这些都在我做的时候起作用

```
#define PREFERENCE_PATH = ".\\Resources\\AppPreferences.txt"
#define SPLASH_PATH = ".\\Resources\\Splash.png" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T20:08:48.990

摆脱等号。预处理器定义不使用等号。

然后摆脱优点。当您将字符串文字并排放置时，它们之间没有加号，它们会被连接起来。强调**文字**，因为这是一个编译时功能，仅适用于双引号文字，如`"foo" "bar"`→ `"foobar"`。它不适用于变量。

```
#define BASE_FOLDER          "Resources"
#define PREFERENCE_FILE_NAME "AppPreferences.txt"
#define SPLASH_FILE_NAME     "Splash.png"

#define PREFERENCE_PATH ".\\" BASE_FOLDER "\\" PREFERENCE_FILE_NAME
#define SPLASH_PATH     ".\\" BASE_FOLDER "\\" SPLASH_FILE_NAME 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-30T20:09:50.380

您不能像这样在 C++ 中连接字符串（即 char*）……它们没有`+`运算符。

# java - java多线程jms队列接收器

> ID：14612725
> 
> 赞同：1
> 
> 时间：2013-01-30T20:08:09.990
> 
> 标签：java, multithreading, jms

我正在使用 oracle 高级队列 (AQ JMS)。我正在尝试使用多个线程来使用 QueueReceiver 来消耗 jms 队列。

**问题**：该模型分叉了多个线程，但性能仍接近单线程模型。如何增加队列消耗？

以下是代码片段：

```
final QueueReceiver queueReceiver = getQueueReceiver(queueSession);
        qConn.start();
        //THREAD POOL SIZE
        final int threadPoolSize = getThreadCount();

        final ExecutorService executor = Executors.newFixedThreadPool(threadPoolSize);

        for (int i = 0; i < threadPoolSize; i++) {
            executor.submit(new MessageWorker(queueReceiver));
        } 
```

消息工作者代码如下所示：

```
 class MessageWorker extends Thread {
    MessageConsumer messageConsumer;

    public MessageWorker(MessageConsumer subs) {
        this.messageConsumer = subs;
    }

    /**
     * @see java.lang.Thread#run()
     */
    @Override
    public void run() {
        try {
            while (true) {
                try {
                    Message msg = messageConsumer.receive();
                    if (null != msg) {
                        //log message
                        logMessage(msg);
                        //handle message
                        handleMessage(msg);
                        //ack
                        msg.acknowledge();
                    }
                } catch (JMSException e) {
                    log.error(e);
                }
            }
        } catch (Exception e) {
            log.error(e);
        } finally {
            log.info("Thread:" + this.getName() + " terminated.");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:39:56.297

每个线程应该有一个单独的 JMS 会话。似乎没有为您的代码片段中的每个线程创建一个会话。

# c# - C# Linq to Sql XML 检索父项中最近的元素

> ID：14612730
> 
> 赞同：3
> 
> 时间：2013-01-30T20:08:19.583
> 
> 标签：c#, xml, linq-to-xml

我有一些奇怪的 XML 试图从中读取值。

```
<text>
  <term>a</term>
  <line>
    <elm>data here</elm>
  </line>
  <term>b</term>
  <line>
    <elm>data here</elm>
  </line>
  <term>c</term>
  <line>
    <elm>data here</elm>
  </line>
</text> 
```

此时我只能访问这 3 个`line`元素。

当我遍历每一行时，对于第一行，我想找到`term`恰好具有“a”作为值的元素，因为它是与第一行子元素“最接近”的元素。

第二行也是一样，除了我想找到最近的`term`元素，在这种情况下是“b”

如何使用 LINQ 可靠地完成此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:25:59.950

如果`term`元素总是在`line`元素之前，你可以使用

```
XElement.ElementsBeforeSelf().Last() 
```

所以

```
var element = XElement.Load(@"previous-sibling.xml");
var termsQuery =
            from line in element.Descendants("line")
            select new
            {
                Elm = line.Descendants("elm").FirstOrDefault().Value,
                Term = line.ElementsBeforeSelf().LastOrDefault().Value
            }; 
```

# c++ - execvp()，不能直接返回命令行

> ID：14612731
> 
> 赞同：0
> 
> 时间：2013-01-30T20:08:23.243
> 
> 标签：c++, operating-system, exec, fork

我在玩 execvp()，发现了一个有趣的东西，首先是代码。使用命名空间标准；

```
#include <iostream>
#include <unistd.h>

int main(){

    char *argv[3];
    int pid = fork();
    if (pid == 0){
    argv[0] = "ls";
    argv[1] = "-l";
    argv[2] = NULL;
    execvp("ls", argv);
    }

} 
```

这是一个简单的 fork + execvp 问题，但我发现“ls”执行成功后，**我必须按 Enter 才能回到命令行（shell）**。

任何人都知道我该如何做到这一点，以便在 execvp("ls") 之后我可以在不点击“Enter”的情况下返回 shell？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:11:49.610

您的主程序在`ls`完成之前退出。到`ls`完成时，它的输出已经掩盖了 shell 提示符。

您可以使用以下任一方法解决此问题：

*   在' 的右大括号`else wait(0);`之后添加。`if`
*   删除对 的呼叫`fork()`。

# python - Python：允许在浮点整数前面使用“$”符号

> ID：14612733
> 
> 赞同：0
> 
> 时间：2013-01-30T20:08:34.407
> 
> 标签：python, calculator

如何允许某人输入值前带有“$”的浮点整数。例如，他们可以输入“$4.25”，也可以输入“4.25”。

此外，当我在计算器中输入“4.35”时，提示显示为“0.6”。在我家里拥有的计算器上，它显示为 0.6525。我如何得到完整的答案？

```
input ('Please Enter to begin')

while True:
    print('This calculator will display the tip you owe for your meal price.')
    mealPrice = int(float(input('Enter your meal price:')))
    asw = mealPrice * 0.15
    print('The tip you owe is: $',asw)

    endProgram = input ('Do you want to restart the program?')

    if endProgram in ('no', 'No', 'NO', 'false', 'False', 'FALSE'):
        break 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T20:10:45.930

改变

```
mealPrice = int(float(input('Enter your meal price:'))) 
```

至

```
mealPrice = float(input('Enter your meal price:').lstrip("$")) 
```

`lstrip("$")`从字符串的左侧删除任何出现的给定字符。您还需要删除`int`，这会将价格截断为最接近的美元（这也是您有时得到错误答案的原因）。

# java - 如果设置了 HTML 标记 ID，grails 渲染插件中的 NullPointerException

> ID：14612735
> 
> 赞同：2
> 
> 时间：2013-01-30T20:08:45.827
> 
> 标签：java, grails, pdf-generation, sax, xalan

我正在使用 Grails 渲染插件/服务来创建 PDF。用户可以在浏览器中预览 PDF 数据（然后单击“下载”按钮并获取 PDF）。PDF和浏览器的一些模板可以统一到一个模板中。所以它只包含在主模板中，然后发送到浏览器或渲染服务。

不幸的是，有一个问题：我需要在一些 HTML 标记上具有 ID 属性（例如`<tr>`或`<td>`，它们在发送到浏览器的模板中使用。但是如果模板中的某个 HTML 标记上有一个 ID 属性，则发送到渲染服务，它失败并出现 NullPointerException：

```
Stacktrace follows:
java.lang.NullPointerException
    at com.sun.org.apache.xalan.internal.xsltc.trax.SAX2DOM.startElement(SAX2DOM.java:211)
    at com.sun.org.apache.xml.internal.serializer.ToXMLSAXHandler.closeStartTag(ToXMLSAXHandler.java:204)
    at com.sun.org.apache.xml.internal.serializer.ToSAXHandler.flushPending(ToSAXHandler.java:277)
    at com.sun.org.apache.xml.internal.serializer.ToXMLSAXHandler.startElement(ToXMLSAXHandler.java:646)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:636)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:707)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)
    at org.xhtmlrenderer.resource.XMLResource$XMLResourceBuilder.createXMLResource(XMLResource.java:189)
    at org.xhtmlrenderer.resource.XMLResource.load(XMLResource.java:75)
    at grails.plugin.rendering.document.XhtmlDocumentService.createDocument(XhtmlDocumentService.groovy:55)
    at grails.plugin.rendering.document.XhtmlDocumentService.createDocument(XhtmlDocumentService.groovy:43)
    at grails.plugin.rendering.document.XhtmlDocumentService.createDocument(XhtmlDocumentService.groovy:38)
    at grails.plugin.rendering.RenderingService.render(RenderingService.groovy:34)
    at grails.plugin.rendering.RenderingService.render(RenderingService.groovy:33)
    at MyController$_closure4$$ENw2Jz9v.doCall(MyController.groovy:129)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

我尝试调试 SAX2DOM 并发现 ID 元素就是那个导致此异常的元素。以前有人遇到过这个问题吗？非常感谢任何反馈。

# php - 数据库类对象

> ID：14612742
> 
> 赞同：7
> 
> 时间：2013-01-30T20:08:58.740
> 
> 标签：php, codeigniter

我见过人们使用这段代码，我试图理解它的作用，因为我在任何 codeigniter 文档或数据库类的源代码中都没有看到它。

```
$this->db->ar_orderby 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T20:21:10.157

这是一个按列保存顺序的数组..

**应该没有理由直接使用此属性。而是调用`$this->db->order_by('column')`which 自动附加到数组。**

*   `system/database/DB_active_rec.php`在第 42 行定义
*   附加到方法`CI_DB_active_record::order_by`第 856 行
*   用于在`CI_DB_active_record::_compile_select`第 1781 行生成 SQL

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-23T06:32:58.690

以下面的方式使用它仍然有意义 -

```
if (!count($this->db->ar_orderby)) {
    $this->db->order_by($this->order_by );
} 
```

它基本上意味着 - 如果在调用此方法时 db 库尚未设置订单，请使用它。防止两次调用“order by”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T20:12:44.697

你的意思是

[http://phpxref.com/xref/codeigniter/system/drivers/DB_active_record.php.source.html#l781](http://phpxref.com/xref/codeigniter/system/drivers/DB_active_record.php.source.html#l781)

它允许您指定顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-20T19:19:02.947

您可以替换这些行：

```
if (!count($this->db->ar_orderby)) {
    $this->db->order_by($this->order_by );
} 
```

和：

```
if(!count($this->db->order_by($this->order_by))) {
    $this->db->order_by($this->order_by);
} 
```

# angularjs - 如何在正确的时间加载 angularjs 和我的模型

> ID：14612748
> 
> 赞同：0
> 
> 时间：2013-01-30T20:09:16.083
> 
> 标签：angularjs

我正在努力寻找一种方法来获得 angular 并且我的代码可以很好地发挥作用，因为 angular 很棒，我知道这一定是我的问题。我的一些模型只有静态数据，但大多数只有我从休息服务中提取的动态数据或静态/休息数据的组合。我在这里和文档中看到的许多示例只处理一小部分静态 json 数据集。

当我将角度脚本调用放入 html 中时，我的问题是它会在我的模型加载并准备好之前尝试加载和执行。必须有一种方法来协调加载时间。

所以我试图设计方法来确保我的模型 js 脚本都已加载，然后最终在 getScript 调用中调用角度脚本。

我还写了一个自定义过滤器，我希望将它添加到我的模块中。当我将模块名称添加到 ng-app 标记并尝试通过 getScript 延迟加载角度脚本时，它会出错并说它无法识别我的模块名称。如果我从 ng-app 中删除模块名称，然后尝试初始化我的过滤器模块，它会延迟加载 angular.js，但它说我的过滤器方法无效，因为（我猜）它没有在模型中注册。

我确定我在某处遗漏了一些关键信息。Angular 必须足够聪明才能加载，然后意识到我的模型需要一些时间才能到达。不只是在第一个 ng-controller 标记处运行我的 html 和吠叫，因为模型尚未加载或填充模型的服务调用尚未完成。

现在，如果我像这样在我的 html 上放置一个标签：

```
<html class="no-js" ng-app="yourApp"> 
```

当我在 angular.js 上调用 getScript 时出现错误

> angular.js 加载失败：错误：没有模块：yourApp

请帮忙。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:23:04.563

如果我理解正确，您不是在页面加载期间加载 angularjs，而是通过 ajax 调用加载？如果你这样做，你将需要[手动引导](http://docs.angularjs.org/guide/bootstrap)。

这是我使用 with 的示例[`require.js`](http://requirejs.org/)，但使用 jquery's`$.getScript()`时，它将是相似的：

```
require(['angular', 'jquery', 'app/app-config'], function (angular) {
    'use strict';

    angular.element(document).ready(function () {
        angular.bootstrap(document, ['app']);
    });
}); 
```

在您的情况下，它将类似于：

```
$.getScript("http://code.angularjs.org/1.0.4/angular.js", function(data, textStatus, jqxhr) {
   angular.bootstrap(document, ['myApp']);
}); 
```

只需确保所有带有控制器、指令等的 javascript 文件都已加载。

# iphone - 在导航栏中使用 UILabel 自定义字体

> ID：14612750
> 
> 赞同：0
> 
> 时间：2013-01-30T20:09:25.277
> 
> 标签：iphone, objective-c, uilabel, uinavigationitem, uifont

> **可能重复：**
> [iPhone 中的自定义字体](https://stackoverflow.com/questions/6220160/custom-font-in-iphone)

我正在尝试创建一个自定义标签以将其设置为`titleView`my的一个`navigationItem`，但我无法将标签字体设置为我的项目中包含的自定义字体。

我有一个名为“BADER_AL_GORDABIA-2_0.ttf”的自定义字体文件，FontBook 中显示的真实字体名称是“bader_al gordabia-2”我已按照以下步骤操作：

1.  检查了我的应用程序的部署目标，它设置为 iOS 5.1
2.  将字体文件添加到项目资源中，并在 Build Phases 的“Copy Bundle Resources”中验证是否已添加到构建目标中。
3.  在我的 info.plist 文件中添加了一个新键作为“应用程序提供的字体”，并在其中添加了“BADER_AL_GORDABIA-2_0.ttf”。
4.  在 fontWithName 方法中使用了真正的字体名称“bader_al gordabia-2”。

我能够使用加载字体

```
UIFont * customFont = [UIFont fontWithName:@"bader_al gordabia-2" size:18.0f]; 
```

并且我确保 customFont 不为空（通过打印其描述），但问题是我无法将此自定义字体应用于 UILabel。

我的代码是：

```
UILabel * titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(100,10,200,24)];
    titleLabel.backgroundColor = [UIColor clearColor];
    UIFont * customFont = [UIFont fontWithName:@"bader_al gordabia-2" size:18.0f];
    [titleLabel setFont:customFont];
    titleLabel.text = @"أخبار الجمعية";
    //NSLog(@"%@", [customFont description]);

    titleLabel.textAlignment = NSTextAlignmentCenter;
    titleLabel.textColor = [UIColor whiteColor];

    [self.navigationItem setTitleView:titleLabel]; 
```

我试图搜索堆栈溢出，但找不到合适的答案。我还尝试使用以下链接中指定的自定义标签： [http ://refactr.com/blog/2012/09/ios-tips-custom-fonts/](http://refactr.com/blog/2012/09/ios-tips-custom-fonts/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:25:47.810

我就是这样做的

```
UILabel *navLabel = [[UILabel alloc] initWithFrame:CGRectMake(0,0, 300, 100)];

navLabel.backgroundColor = [UIColor clearColor];
navLabel.text = @"Set Up";
navLabel.textColor = [UIColor whiteColor];
navLabel.shadowColor = [UIColor colorWithWhite:0.0 alpha:1.0];
navLabel.shadowOffset = CGSizeMake(0, -2);
navLabel.font = [UIFont fontWithName:@"Questrial" size:28.0];
navLabel.textAlignment = UITextAlignmentCenter;
self.navigationItem.titleView = navLabel;
[navLabel release]; 
```

只有上面的代码不起作用......所以你需要去你的app plist文件并添加一个新行并将这个键添加到行中，

```
Fonts provided by application 
```

并将字体名称添加到 item0 的值中，

根据我的代码，“Questrial-Regular.ttf”

还有一件事，

那就是您可能不正确知道字体名称。所以你需要找到正确的字体名称。将此代码添加到您的 ViewdidLoad 中，它会将姓氏记录到终端。

```
NSLog(@"%@",[UIFont familyNames]); 
```

您可以根据您的字体找到正确的字体名称。

按照这个步骤，它对我有用，我认为它也会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:31:42.723

这是您应该做的 - 首先在任何地方添加并调用以下方法：

```
+(void)logAllFonts{
    NSArray *fontFamilies = [UIFont familyNames];

    for (int i = 0; i < [fontFamilies count]; i++)
    {
      NSString *fontFamily = [fontFamilies objectAtIndex:i];
      NSArray *fontNames = [UIFont fontNamesForFamilyName:[fontFamilies objectAtIndex:i]];
      NSLog(@"%@: %@", fontFamily, fontNames);
    }
 } 
```

这将记录您项目中存在的所有字体名称，包括您在项目和 plist 中添加的外部字体。

现在您在控制台中浏览该列表并找到您添加的字体的确切字体名称 (bader_al gordabia-2)。在 fontWithName 中使用这个名称：

希望这可以帮助

# c# - htmlagilitypack xpath 不正确

> ID：14612753
> 
> 赞同：0
> 
> 时间：2013-01-30T20:09:38.790
> 
> 标签：c#, xpath, html-agility-pack

我有一个问题，我的 xpath 无法正常工作。

我正在尝试从 Google.com 的搜索结果列表中获取 url 到一个字符串列表中。

但我无法使用 Xpath 访问 url。

请帮我纠正我的xpath。还告诉我应该在什么地方？？

```
HtmlWeb hw = new HtmlWeb();
List<string> urls = new List<string>();
HtmlAgilityPack.HtmlDocument doc = hw.Load("http://www.google.com/search?q=" +txtURL.Text.Replace(" " , "+"));
HtmlNodeCollection linkNodes = doc.DocumentNode.SelectNodes("//div[@class='f kv']");
foreach (HtmlNode linkNode in linkNodes)
{
    HtmlAttribute link = linkNode.Attributes["?????????"];
    urls.Add(link.Value);

}
for (int i = 0; i <= urls.Count - 1; i++)
{
    if (urls.ElementAt(i) != null)
    {
        if (IsValid(urls.ElementAt(i)) != true)
        {
            grid.Rows.Add(urls.ElementAt(i));

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:20:37.563

URL 似乎存在于`cite`selected s 下的元素中`div`，因此选择这些的 XPath 是`//div[@class='f kv']/cite`.

现在，由于这些包含标记但您只需要文本，请选择`InnerText`所选节点的。请注意，这些不以`http://`.

```
HtmlNodeCollection linkNodes = 
                       doc.DocumentNode.SelectNodes("//div[@class='f kv']/cite");
foreach (HtmlNode linkNode in linkNodes)
{
    HtmlAttribute link = linkNode.InnerText;
    urls.Add(link.Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:23:04.323

正确的 XPath 是`"//div[@class='kv']/cite"`. 您在浏览器元素检查器中看到的`f`类（可能）是在使用 javascript 呈现页面之后添加的。

此外，链接文本不在属性中，您可以使用在前面步骤中获得`InnerText`的元素的属性来获取它。`<div>`

我更改了这些行并且它有效：

```
var linkNodes = doc.DocumentNode.SelectNodes("//div[@class='kv']/cite");

foreach (HtmlNode linkNode in linkNodes)
{
    urls.Add(linkNode.InnerText);
} 
```

*不过有一个警告：一些链接被修剪（你会`...`在中间看到一个）*

# java - 最大化时获取正常的 JFrame 边界

> ID：14612757
> 
> 赞同：2
> 
> 时间：2013-01-30T20:10:31.617
> 
> 标签：java, swing, window, persistence, jframe

我正在尝试创建一个 JFrame 来记住它的窗口位置、大小以及它是否被最大化。为 windowClosing 事件使用 WindowListener 并将其边界保存到 Preferences 应该足够简单。

为了使它工作（如下设置），我需要在 JFrame 最大化（MAXIMIZED_BOTH ExtendedState）时提取 JFrame 的正常（NORMAL ExtendedState）边界。这是可能吗？考虑到正常边界存储在某个地方以便它恢复。

```
//...
addWindowListener(new WindowListener() {
    ///...
    @Override
    public void windowClosing(WindowEvent e) {
        prefs.putBoolean("win_max",win_max);
        if(winmax)
        {
            //win_x=?
            //win_y=?
            //win_w=?
            //win_h=?
        }
        else
        {
            win_x=getX();
            win_y=getY();
            win_w=getWidth();
            win_h=getHeight();
        }
        prefs.putInt("win_x",win_x);
        prefs.putInt("win_y",win_y);
        prefs.putInt("win_w",win_w);
        prefs.putInt("win_h",win_h);
    }
});
//... 
```

如果这是一个非常简单的问题，我深表歉意。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:32:45.257

这就是我所做的。模型实例保存了框架原点、框架边界和框架状态。

```
protected int           state;

protected Point         frameOrigin;

protected Rectangle     frameBounds; 
```

这是我创建的用于捕获帧数据更改的组件侦听器。

```
 frame.addComponentListener(new ComponentAdapter() {
        @Override
        public void componentMoved(ComponentEvent event) {
            if (isMaximized()) {
                model.setFrameOrigin(frame.getLocation());
            } else {
                model.setFrameBounds(frame.getBounds());
            }
            model.setFrameState(frame.getExtendedState());
        }
        @Override
        public void componentResized(ComponentEvent event) {
            model.setFrameState(frame.getExtendedState());
        }
    }); 
```

这是我在打包框架以将框架设置为最后使用状态后必须执行的代码。

```
 frame.pack();
    if (options.getFrameBounds().getWidth() > 0) {
        frame.setExtendedState(options.getState());
        if (isMaximized()) {
            frame.setLocation(options.getFrameOrigin());
        } else {
            frame.setBounds(options.getFrameBounds());
        }
    }
    model.setFrameState(frame.getExtendedState());
    model.setFrameBounds(frame.getBounds());
    model.setFrameOrigin(frame.getLocation()); 
```

这是`isMaximized`方法。

```
public boolean isMaximized() {
    return (frame.getExtendedState() & JFrame.MAXIMIZED_BOTH) 
            == JFrame.MAXIMIZED_BOTH;
} 
```

我将帧数据保存在属性文件中，但您可以根据需要保存和恢复帧数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-06T00:00:43.260

在派生自的类中`JFrame`，添加以下代码...

```
private Rectangle m_normalBounds;

@Override
public void setExtendedState(int state)
{
   if (getExtendedState() == 0)
      m_bounds = getBounds();        // Capture the normal bounds since the state is changing

   super.setExtendedState(state);
}

private Rectangle getNormalBounds()  // Always returns the normal bounds
{
   Rectangle bounds;

   if (getExtendedState() == 0)
      return(getBounds());

   return(m_normalBounds);
} 
```

# python - 在python Tkinter程序中检查Entry是否为空

> ID：14612761
> 
> 赞同：0
> 
> 时间：2013-01-30T20:10:43.247
> 
> 标签：python, python-2.7, tkinter

我在 python 程序中有一个条目，我希望我的用户在其中输入一个 URL。我的第一个任务是检查用户是否输入了一个值。我使用了以下代码，但它没有按预期工作。

我的条目名称是`txtUrl`

```
if(txtUrl.get() == ""):
    tkMessageBox.showerror("Error", "please enter a url") 
```

如果用户输入了一个 url 然后显示下一个窗口

```
else:
    webCrawl=Tk()

    #and other widgets in it 
```

这就是我创建`txtUrl`小部件的方式

```
self.txtUrl=Entry(self)
self.txtUrl["width"]=60
self.txtUrl.grid(row = 0, column = 1, sticky = EW) 
```

我也尝试使用这条线

```
self.txtUrl["textvariable"]=content 
```

并尝试获取如下值并检查其是否为空，但它也不起作用

```
if(content.get()==""):
    tkMessageBox.showerror("Error","please enter a url") 
```

有人请让我知道如何检查它。我正在尝试由 asp.net 中的必填字段验证器完成类似的任务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:03:29.420

您的问题中没有足够的信息来回答。你说有些东西不起作用，但你没有说那是什么意思。您说的特定代码行不起作用在语法上看起来是正确的。因此，除非您可以更具体地了解您遇到的行为或错误，否则我们无法提供帮助。

您的代码中还有另一个可能导致问题的关键错误。具体来说，你做的那一行`else: webCrawl=Tk()`。在程序执行过程中，您永远不需要创建多个 Tk 实例。如果您所做的只是创建更多窗口，请创建一个`Toplevel`.

# device-driver - Copy_to_user 问题

> ID：14612763
> 
> 赞同：1
> 
> 时间：2013-01-30T20:10:44.420
> 
> 标签：device-driver, kernel-module

我为设备编写了模块，但我的读取功能出现问题：

```
ssize_t my_sys_read(struct file *f, char __user *buffer, size_t s, loff_t *off){

    char * myBuffer = "ossec buffer";
    size_t read_bytes;

    if (s > ( sizeof(char) * 13 ) ) s = ( sizeof(char) * 13 );

    if (!access_ok(%VERIFY_WRITE, (void *) buffer, s)) return -EFAULT;
        read_bytes = copy_to_user((void *) buffer, (void *) myBuffer, s);

    printk(KERN_INFO "myBuffer %s", myBuffer);
    printk(KERN_INFO "buffer %s", buffer);

    read_bytes = s - ( sizeof(char) * 13 );

    return read_bytes; 
```

}

我真的不知道为什么，但是它的副本不起作用，并且打印的缓冲区对我来说毫无意义。

```
 [10038.885838] buffer \xffffff81\xffffffc3\xffffffcb\x1a 
```

我想问题出在副本上，因为使用该设备的程序很简单。

```
int main(void)
  {
    int fd = open(device_name, O_RDONLY);
    if(fd < 0)
    {
      printf("Error: Impossible to open device, action not permited.\n");
      return 0;
    }

    char * buff;
    int read_bytes;
    read_bytes = read(fd, buff, (13 * sizeof(char) ) );

    printf(" %s\n", buff);

  } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:21:27.440

```
char * buff;
int read_bytes;
read_bytes = read(fd, buff, (13 * sizeof(char) ) ); 
```

您正在使用指针 buff 而不为其分配内存，然后它是一个具有随机值的悬空指针。你需要做

`char *buff = new char();`或者

```
 char buff;
  int read_bytes;
  read_bytes = read(fd, &buff, (13 * sizeof(char)) ); 
```

# php - PHP Docblocks - 解释数组

> ID：14612773
> 
> 赞同：4
> 
> 时间：2013-01-30T20:11:35.843
> 
> 标签：php, arrays, docblocks

> **可能重复：**
> [phpDoc 有没有办法将对象数组记录为参数？](https://stackoverflow.com/questions/9132062/is-there-a-way-for-phpdoc-to-document-an-array-of-objects-as-a-parameter)

我一直在搜索，并查看了 phpDocumentor 文档，但找不到是否有办法正确记录 @param 数组（如声明预期的键/值类型），该数组将被解析并包含在任何生成的文档中。

这会让我相信没有办法做到这一点，我将不得不使用描述。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:15:58.130

`@param YourType[]`至少被 Eclipse/Zend Studio 识别。我不了解其他 IDE，但我期望相同，即使这可能不是官方的 phpDocumentor 语法。

但是我不知道有什么方法可以记录键的类型（无论如何都限于 int 和 string）。

# javascript - 如何使用 Express 和 Nodejs 保护静态路由

> ID：14612774
> 
> 赞同：11
> 
> 时间：2013-01-30T20:11:38.173
> 
> 标签：javascript, node.js, express

我使用 Node（最新版本）+ Express，也是最新版本。我有 2 个文件夹，公共的和安全的。安全文件夹只能在登录后访问。

我自己创建了一个登录系统，现在我想知道如何保护到这个“安全文件夹”的路径。

我正在考虑为我的“安全”文件夹设置一条静态路由（就像我对公共文件夹所做的那样），然后检查用户是否已登录，但它不起作用。

这是我认为应该工作的......

```
(...)
app.use(express.static(path.join(__dirname, 'public')));
app.use(express.static(path.join(__dirname, 'secured')));
(...)

function requireLogin(req, res, next) {
  if (req.session.loggedIn) {
    next(); // allow the next route to run
  } else {
    // require the user to log in
    res.redirect("/login"); 
  }
}

app.all("/secured/*", requireLogin, function(req, res, next) {
  next(); 

}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-30T21:00:08.967

在单独的路由上为您的私有静态指定不同的文件夹

```
app.use(express.static(path.join(__dirname, 'public')));
app.use('/private', express.static(path.join(__dirname, 'private'))); 
```

然后你可以在每个请求上使用你的中间件

```
app.all('/private/*', function(req, res, next) {
  if (req.session.loggedIn) {
    next(); // allow the next route to run
  } else {
    // require the user to log in
    res.redirect("/login"); 
  }
}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T20:27:23.467

在您的第一个 app.use 之前，

添加类似的东西

```
app.use(function(req, res, next) {
  if (req.url.match(/^\/secured\//)) {
    return requireLogin(req, res, next);
  }
  next();
}) 
```

# c++ - 正在寻找一种最快的方法来处理 3D 矢量、它们的点积、叉积？

> ID：14612777
> 
> 赞同：0
> 
> 时间：2013-01-30T20:11:45.837
> 
> 标签：c++

我正在寻找一种最快的方法来处理浮点类型的 3D 向量（x、y、z）、它们的点积、叉积。我认为它可能会用到一些英特尔的技术，比如 SSE4。有人有好的建议吗？或者有使用SSE4的经验，比如f32vec4？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:04:14.400

那是很久以前的事了，但是我上次检查生成的汇编代码以进行这种计算时，结果根据编译器的不同而有很大差异，即使对于相同的机器代码，执行速度也因处理器而异。

我的意思是，有时一种情况下的优化是另一种情况下的悲观化，因此很难提出一个始终正确的选择。

作为一个例子，我记得定义一个 3d 矢量类

```
struct P3d {
    float x,y,z;
    ... 
```

使用编译器对我的 PC 进行向量加法的最佳解决方案是定义增强分配，然后使用它定义加法

```
 ...
    P3d& operator+=(const P3d& other)
    {
        x += other.x;
        y += other.y;
        z += other.z;
        return *this;
    }
 };

 inline P3d operator+(P3d a, const P3d& b)
 {
     a += b;
     return a;
 } 
```

而对于另一个编译器，最好的代码是用更自然的方式生成的

```
 inline P3d operator+(const P3d& a, const P3d& b)
 {
     return P3d(a.x+b.x, a.y+b.y, a.z+b.z);
 } 
```

可悲的是，我发现没有任何 C++ 解决方案能像在公式中显式地为 x、y 和 z 手动编写代码一样快。

然而，差异是“小”的（最多大约 20% IIRC），最后我只使用了最易读的版本。

可能现在情况好多了，但我对此表示怀疑。如果您真的想榨干所有汁液，那么答案将取决于**确切**的编译器版本以及**确切**的处理器。这也意味着，除非您正在为诸如控制台之类的固定硬件解决方案进行编码，否则在编译器和处理器都将继续前进的几个月内，该代码可能不是最佳的。

# python - Heroku 计划任务每 10 分钟运行一次，每小时计划一次

> ID：14612782
> 
> 赞同：1
> 
> 时间：2013-01-30T20:12:00.790
> 
> 标签：python, heroku, scheduler

所以我刚刚将我的 twitter 机器人推送到 Heroku，并使用 Heroku 调度程序插件在半小时内每小时运行一次。但是，无论出于何种原因，它每 10 分钟运行一次。这是调度程序的错误吗？这是调度程序成功运行它并在十分钟后尝试再次运行它时的日志摘录：

```
2013-01-30T19:30:20+00:00 heroku[scheduler.4875]: Starting process with command `python ff7ebooks.py`
2013-01-30T19:30:21+00:00 heroku[scheduler.4875]: State changed from starting to up
2013-01-30T19:30:24+00:00 heroku[scheduler.4875]: Process exited with status 0
2013-01-30T19:30:24+00:00 heroku[scheduler.4875]: State changed from up to complete
2013-01-30T19:34:34+00:00 heroku[web.1]: State changed from crashed to starting
2013-01-30T19:34:42+00:00 heroku[web.1]: Starting process with command `python ff7ebooks.py`
2013-01-30T19:34:44+00:00 heroku[web.1]: Process exited with status 0
2013-01-30T19:34:44+00:00 heroku[web.1]: State changed from starting to crashed 
```

我可以提供任何人需要的任何信息来帮助我诊断这个问题。[web.1] 日志消息每隔几分钟就会重复一次。我不想向我的追随者发送垃圾邮件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T02:30:15.710

如果其他人有这个问题，我想通了。我启用了调度程序，然后分配了 0 个测功机，这样它只在计划运行时分配一个 Heroku 测功机。由于某种原因，它连续运行我的进程，并且（我的假设是）Twitter 只让它每隔几分钟连接到一个套接字，这导致了零星的推文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-14T17:38:25.157

我将与你分享一个帮助我一次性运行脚本的人的解决方案（比如一个开始然后结束，而不是继续运行的 python 脚本）。

有任何问题请告诉我，我会帮助你 --> andreabalbo.com

> 嗨安德里亚
> 
> 我还刚刚在我的 Procfile 中创建了一个随机进程类型：
> 
> tmp 进程类型：命令：测试
> 
> 我没有在 Heroku Dashboard 中打开进程类型。安装高级调度程序后，我使用命令“tmp-process-type”创建了一个触发器，该触发器每分钟运行一次。查看我的日志，我可以看到每分钟都有一个进程以“command:test”开始，确认 Procfile 中的进程类型正在工作。然后我在 Heroku Dashboard 中切换了进程类型。这立即出现在我的日志中：
> 
> 缩放到 tmp-process-type@1:Free web@0:Free by user ...
> 
> 这是因为在切换之后，Heroku 会启动一个正常的测功机，它会尝试跟上。由于你的脚本是一个结束的任务，dyno 死掉了，Heroku 会自动重启它，导致你的任务运行多次。
> 
> 总之，以下步骤应该可以解决您的问题： 1\. 关闭您的进程类型（但将其保留在 Procfile 中） 2\. 安装高级调度程序 3\. 使用命令“tmp-”创建触发器（重复或一次性） process-type" 4\. 查看你的日志，看看是否有任何奇怪的东西出现
> 
> 亲切的问候，奥斯卡

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-21T19:05:08.007

最后只通过一个动作解决了这个问题：

*   我将工人数量设为 0
*   然后在调度程序中仍然放置“python ELO_voetbal.py”并为此自动启动一个工作程序。
*   所以我没有使用任何高级调度程序，也没有在某处放置“tmp-process-type”。

# dart - 更新 Dart SDK 版本 0.3.2.0_r17657 后出现 html5lib 错误

> ID：14612785
> 
> 赞同：2
> 
> 时间：2013-01-30T20:12:04.387
> 
> 标签：dart, dart-webui

当我运行我的 Web 组件的 build.dart 时，未创建 out 文件夹并且我收到此错误：

```
SEVERE web/main.html: exception while reading file, original message:
 AsyncError: ''package:html5lib/dom.dart': Error: line 91 pos 51: type 'LinkedHashMap' is not loaded
  LinkedHashMap<dynamic, String> attributes = new LinkedHashMap();
malformed type used.'
Stack trace:
#0      Node.Node (package:html5lib/dom.dart:91:51)
#1      Document.Document (package:html5lib/dom.dart:313:16)
#2      TreeBuilder.reset (package:html5lib/src/treebuilder.dart:100:16)
#3      TreeBuilder.TreeBuilder (package:html5lib/src/treebuilder.dart:87:10)
#4      HtmlParser.HtmlParser (package:html5lib/parser.dart:148:38)
#5      parseHtml (package:web_ui/src/compiler.dart:34:16)
#6      Compiler._parseHtmlFile.<anonymous closure>.<anonymous closure> (package:web_ui/src/compiler.dart:165:28)
#7      time (package:web_ui/src/utils.dart:38:24)
#8      Compiler._time (package:web_ui/src/compiler.dart:297:16)
#9      Compiler._parseHtmlFile.<anonymous closure> (package:web_ui/src/compiler.dart:164:32)
#10     _ThenFuture._sendValue (dart:async:372:24) 
```

有没有人有同样的问题？

更新：感谢您的回答。但是，我运行`pub update`，现在如果我运行 build.dart 文件，结果是：

```
Uncaught Error: NoSuchMethodError : method not found: 'innerHTML'
Receiver: Instance of 'Element'
Arguments: []
Stack Trace:
#0      Object.noSuchMethod (dart:core-patch:1743:25)
#1      _ElementLoader.visitScriptElement (package:web_ui/src/analyzer.dart:879:16)
#2      _ElementLoader.visitElement (package:web_ui/src/analyzer.dart:770:40)
#3      TreeVisitor.visit (package:html5lib/dom_parsing.dart:208:50)
#4      TreeVisitor.visitChildren (package:html5lib/dom_parsing.dart:220:49)
#5      TreeVisitor.visitNodeFallback (package:html5lib/dom_parsing.dart:228:48)
#6      TreeVisitor.visitElement (package:html5lib/dom_parsing.dart:237:50)
#7      _ElementLoader.visitElement (package:web_ui/src/analyzer.dart:777:34)
#8      TreeVisitor.visit (package:html5lib/dom_parsing.dart:208:50)
#9      TreeVisitor.visitChildren (package:html5lib/dom_parsing.dart:220:49)
#10     TreeVisitor.visitNodeFallback (package:html5lib/dom_parsing.dart:228:48)
#11     TreeVisitor.visitElement (package:html5lib/dom_parsing.dart:237:50)
#12     _ElementLoader.visitElement (package:web_ui/src/analyzer.dart:777:34)
#13     TreeVisitor.visit (package:html5lib/dom_parsing.dart:208:50)
#14     TreeVisitor.visitChildren (package:html5lib/dom_parsing.dart:220:49)
#15     TreeVisitor.visitNodeFallback (package:html5lib/dom_parsing.dart:228:48)
#16     TreeVisitor.visitDocument (package:html5lib/dom_parsing.dart:230:52)
#17     TreeVisitor.visit (package:html5lib/dom_parsing.dart:212:52)
#18     analyzeDefinitions (package:web_ui/src/analyzer.dart:33:15)
#19     Compiler._parseAndDiscover.processHtmlFile.<anonymous closure>  (package:web_ui/src/compiler.dart:123:35)
#20     time (package:web_ui/src/utils.dart:38:24)
#21     Compiler._time (package:web_ui/src/compiler.dart:291:16)
#22     Compiler._parseAndDiscover.processHtmlFile (package:web_ui/src /compiler.dart:122:27)
#23     _ThenFuture._sendValue (dart:async:372:24) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:45:08.177

我最近将 'LinkedHashMap' 从 dart:core 移到了 dart:collection。您显示的代码仍然期望它在核心中。

尝试查找 html5lib 软件包的更新版本（也许邮件列表知道您可以在哪里下载）。

Bob 目前正在对 pub 中的 dart-sdk 进行版本控制。所以希望这在未来不会成为这样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:47:48.643

我刚刚经历了这个。这是因为您拥有的软件包尚未更新。确保您使用的是每个软件包的最新版本，然后运行`pub update`​​.

就我而言，我使用的是旧版本的`web-ui`，它使用了旧版本的`html5lib`包。我更新`web-ui`了，一切正常。

就像弗洛里安在另一个答案中所说的那样，这是由一个已经移动到另一个库的类引起的。

# dart - HttpException：HTTP 标头不可变

> ID：14612791
> 
> 赞同：3
> 
> 时间：2013-01-30T20:12:31.827
> 
> 标签：dart

我无法弄清楚为什么我在 Dart 中收到此错误：

> HttpException：HTTP 标头不可变

我有一个 HttpResponse 实例，我尝试向它添加一些标头：

```
response.outputStream.writeString(responseData);
response.headers.add('Content-Type', 'text/html');
response.outputStream.close(); 
```

如果不添加到标题中，我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T20:18:59.033

解决起来很简单，只需确保在输出任何内容之前添加标题：

```
response.headers.add('Content-Type', 'text/html'); // <-- this line first.
response.write(responseData);
response.close(); 
```

我所做的只是改变线条的顺序。

原因是，如果您开始输出正文，就不能再简单地修改标头（因为标头已经通过网络发送了！）。这就是 HTTP 的工作方式。首先是标题，然后是正文。

**更多背景知识：** 有时 HTTP 库（通常使用不同的编程语言）可能会缓冲输出数据并且不会立即刷新内容，从而导致即使在输出某些内容后您似乎也可以修改标头的情况。在你的情况下，这没有发生。输出似乎已经被刷新。

# asp.net - Visual Studio 2008 中的自动完成功能

> ID：14612797
> 
> 赞同：2
> 
> 时间：2013-01-30T20:12:45.930
> 
> 标签：asp.net, visual-studio

当我在 Visual Studio 2008 中编辑一个 aspx 文件并输入`</script>`时，它会自动更正为`</scriptengine>`我按下该`>`键时。因此，当我输入时`</script>`，它会像`</scriptengine>`文档中一样出现。有没有办法防止这种情况发生？

![在此处输入图像描述](../Images/61550a8dfc487b7788a399059343d079.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:54:50.067

关键是`Show all settings`在页面底部的`Tools`, `Options`,下进行检查`Text Editor`。然后您可以看到相应的 HTML 选项，特别是`Auto list members`.

# ruby-on-rails - 带有 ActiveRecord 的动态方法，传入条件哈希

> ID：14612798
> 
> 赞同：0
> 
> 时间：2013-01-30T20:12:46.257
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, postgresql, rails-activerecord

我正在努力寻找对动态方法进行元编程的最佳方法，我将根据条件限制结果......例如：

```
class Timeslip < ActiveRecord::Base

    def self.by_car_trans(car, trans)
        joins(:car)
        .where("cars.trans IN (?) and cars.year IN (?) and cars.model ILIKE ?", trans, 1993..2002, car)
        .order('et1320')
    end

end 
```

假设我没有传入我的参数，而是传入一个条件数组，其中键是字段名，值是字段值。例如，我会做这样的事情：

我会传入 [["field", "value", "operator"],["field", "value", "operator"]]

```
def self.using_conditions(conditions)
    joins(:car)
    conditions.each do |key, value|
      where("cars.#{key} #{operator} ?", value)
    end
end 
```

但是，这不起作用，而且不是很灵活......我希望能够检测该值是否是一个数组，并使用 IN () 而不是 =，也许能够使用 ILIKE 来区分大小写条件也...

任何建议表示赞赏。我的主要目标是建立一个“列表”模型，用户可以在其中动态构建他们的条件，然后保存该列表以供将来使用。该列表将根据关联的汽车表过滤时间片模型......也许有更简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:33:29.593

首先，您可能会对[Squeel](https://github.com/ernie/squeel) gem 感兴趣。

除此之外，`arel_table`用于 IN 或 LIKE 谓词：

```
 joins( :car ).where( Car.arel_table[key].in      values )
 joins( :car ).where( Car.arel_table[key].matches value  ) 
```

您可以检测值的类型以选择适当的谓词（不是很好的 OO，但仍然）：

```
 column    = Car.arel_table[key]
 predicate = value.respond_to?( :to_str ) ? :in : :matches # or any logic you want

 joins( :car ).where( column.send predicate, value ) 
```

您可以根据需要链接任意数量的链接：

```
 conditions.each do |(key, value, predicate)|
   scope = scope.where( Car.arel_table[key].send predicate, value )
 end
 return scope 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:02:25.317

那么，您想要最终用户可以在运行时指定的动态查询（并且可以存储和检索以供以后使用）？

我认为你在正确的轨道上。唯一的细节是您如何建模和存储您的标准。我不明白为什么以下内容不起作用：

```
def self.using_conditions(conditions)
  joins(:car)
  crit = conditions.each_with_object({}) {|(field, op, value), m|
    m["#{field} #{op} ?"] = value
  }
  where crit.keys.join(' AND '), *crit.values
end 
```

**CAVEAT**上面的代码*是*不安全的并且容易被 SQL 注入。

此外，没有简单的方法来指定`AND`vs`OR`条件。最后，simple`"#{field} #{op} ?", value`大部分只适用于数字字段和二元运算符。

但这说明这种方法是可行的，只是还有很大的改进空间。

# python - 如何区分 Gtk IconView 中的活动项和选定项？

> ID：14612802
> 
> 赞同：0
> 
> 时间：2013-01-30T20:13:15.917
> 
> 标签：python, gtk

我有一个 Gtk IconView。实际上，所选项目是用不同的背景颜色绘制的（这是正常行为）。但是，我希望能够通过为“活动”项目使用不同的背景颜色来区分“选定”和“活动”项目。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:22:42.730

你在使用主题吗？检查 panel.rc 文件并查找**bg[ACTIVE]**。更改该值，按钮应更改颜色

# java - 致命错误 - 构建 POM 时出错（可能不是这个项目的 POM）

> ID：14612803
> 
> 赞同：1
> 
> 时间：2013-01-30T20:13:19.377
> 
> 标签：java, maven, nexus

```
Project ID: com.abc.def.MyProject:pom:null

Reason: Cannot find parent: com.xyz.list.MyWonderfulFamilly for project   com.abc.def.MyProject:pom:null for  com.abc.def.MyProject:pom:null

[INFO] TRACE
org.apache.maven.reactor.MavenExecutionException: Cannot find parent: com.xyz.list.MyWonderfulFamilly for project  com.abc.def.MyProject:pom:null for  com.abc.def.MyProject:pom:null

Caused by org.apache.maven.project.ProjectBuildingException: POM 'com.xyz.list.MyWonderfulFamilly' not found in repository: Unable to download the artifact from the repository

           com:xyz:list:MyWonderfulFamilly:pom     

from the specified remote repositories:
    CompanyName.Pricing.G7 (http://mksrvsub01.domain.xxxxxx)

for project com.xyz.list.MyWonderfulFamilly at org.apache.maven.project.DefaultMavenProjectBuilder.findModelFromRepository(DefaultMavenProjectBuilder.java:1392)

Caused by: org.apache.maven.artifact.resolver.ArtifactNotFoundException: Unable to download the artifact from any repository

               com:xyz:list:MyWonderfulFamilly:pom

from the specified remote repositories:
    CompanyName.Pricing.G7 (http://mksrvsub01.domain.xxxxxx) 
```

1.  我已经尝试`mvn clean install`过项目目录以及项目根目录 - 同样的错误
2.  我已尝试删除存储库`lastUpdated`中的所有文件`.m2`-同样的错误
3.  中删除的文件`~.m2\repository\org\apache\maven\plugins`- 相同的错误
4.  删除所有项目文件和文件夹并创建新目录并签出项目文件并运行`mvn clean install`- 同样的错误

Apache Maven 2.2.1 r801777 Win XP，x86，32 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:21:27.897

引用：

> 导致无法从任何存储库下载工件
> 
> com:xyz:list:MyWonderfulFamily:pom
> 
> 从指定的远程存储库：
> 
> 公司名称.定价.G7

您是否检查过您可以访问存储库？pom/artifact 在存储库中可用吗？如果是这样，请检查本地`~./m2/com/xyz/list`文件夹是否存在工件或错误消息。如果需要，请删除并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:15:32.323

我意识到我必须在构建路径中添加更多依赖的 maven 项目，然后进行 mvn clean install，经过 2 个小时的艰苦努力，事情就解决了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-11T15:00:44.517

在某些情况下（尤其是我的情况）可能会涉及一些额外的安全调整。

我的意思是，如果您使用可通过证书获得的中央存储库，您可能必须检查您的 **JAVA_HOME\jre\lib\security\cacerts**文件是否存储有问题的证书。在我的情况下，在那里导入证书文件后（我使用了 KeyStore Explorer 应用程序，但也可以在命令行上完成）并且我的所有进程都正常继续。

# spring - 在 webApplication 中使用来自不同 jar 文件的具有重复 bean id 的多个 applicationContexts

> ID：14612804
> 
> 赞同：0
> 
> 时间：2013-01-30T20:13:41.280
> 
> 标签：spring

我在jar1的applicationContext1中定义了bean1和bean2，并且在jar2的applicationContext2中定义了bean1（当然是不同的类）和bean3

我需要在我的 web 应用程序中同时使用 jar1 和 jar2，它也有一个 applicationContext3。

我在 web.xml 中使用以下条目

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>applicationContext1.xml
            <param-value>applicationContext2.xml
            <param-value>/WEB-INF/properties/application/applicationContext3.xml
    </param-value>
</context-param> 
```

有没有办法给 applicationContext ID 加上前缀，这样它们就不会相互交叉；例如：在 applicationContext3 中我可以拥有

```
<bean id="myBean" >
  <property name="bean1" ref="ac1:bean1">
  <property name="bean2" ref="ac2:bean1">
</bean> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:12:22.757

也许你可以以某种方式安排它（Spring 非常灵活和强大），但我认为你应该清理一下你的上下文。如果您可以完全控制库和主应用程序，我建议您只创建一个主 applicationContext 并从 JAR 中复制相关的 bean。

其他好的解决方案是将上下文模块中的每个 applicationContext 分开，例如 repository-context.xml、business-context.xml 等，并仅引用您需要的那些，这样您就可以更好地控制正在加载的内容。

另外，看看这个： [http ://www.gridshore.nl/2008/05/13/spring-application-context-loading-tricks/](http://www.gridshore.nl/2008/05/13/spring-application-context-loading-tricks/)

# python - Python - 类和函数

> ID：14612805
> 
> 赞同：-1
> 
> 时间：2013-01-30T20:13:40.780
> 
> 标签：python, class, function, object

上了一堂课，剩下的少了这一堂课。任何指导表示赞赏。我已经得出了我坚持的部分问题，以保持简短。我也附上了我的工作。问题如下：

> 创建一个包含 1 个变量的类，其中包含自己的属性。提供以下3种方法：
> 
> getvariable1() - 使用返回键 tp 属性 1 的返回值
> 
> setvariable1() - 这应该允许为属性 1 指定新值 - 接受输入所需的附加参数。
> 
> printfun() - 打印对象变量的值。
> 
> 创建您自己的类对象并为创建的对象调用 get & set 方法。使用 printfun() 方法检查代码是否有效。

我的工作：

```
class animal:
    horns = 2

    def printerfun(self):
        print getHorns() 

    def getHorns(self): #don't get where I should call this
        return self.horns

    def setHorns(horns): 
        self.horns = horns

animal_1 = animal()

F1 = raw_input('Please enter number of horns: ')
setHorns(F1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:19:31.777

不知道问题是什么，但无论如何......

您应该编写一个`__init__`成员函数来创建初始成员变量：

```
class animal:
    def __init__(self):
        self.horns = 2 
```

您的代码创建了一个*类变量*，而不是普通的成员变量。

然后改变喇叭：

```
animal_1.setHorns(F1) 
```

您的代码没有说明您要将变量更改为哪种动物。

# c++ - jpegtran.exe 无法正确旋转图像

> ID：14612809
> 
> 赞同：2
> 
> 时间：2013-01-30T20:13:45.063
> 
> 标签：c++, jpeg, libjpeg

我有一个新编译的 libjpeg 版本 9，并尝试在命令行中使用参数运行 jpegtran.exe：

```
.\jpegtran.exe -rotate 180 -outfile test_output1.jpg testimg.jpg 
```

testimg.jpg: ![前](../Images/ef3627d5e8f407520885162420289c0e.png)test_output1.jpg:![后](../Images/cc887f802f0fe709c2c3535a347f221a.png)

正如您所看到的，它确实旋转了图像，但它会剪辑它并且它没有正确组合在一起。软件包附带的 usage.txt 文件并不是最新的，因为我必须使用 -outfile 开关而不是它所说的：

> jpegtran 使用类似于 cjpeg 或 djpeg 的命令行语法。在类 Unix 系统上，你说：
> 
> *   jpegtran [开关] [输入文件] >输出文件
> 
> 在大多数非 Unix 系统上，您会说：
> 
> *   jpegtran [开关] 输入文件输出文件
> 
> 其中输入和输出文件都是 JPEG 文件。
> 
> 要指定输出文件中使用的编码 JPEG 表示，jpegtran 接受 cjpeg 识别的开关子集：
> 
> *   -optimize 执行熵编码参数的优化。
> *   -progressive 创建渐进式 JPEG 文件。
> *   -arithmetic 使用算术编码。
> *   -restart N 每 N MCU 行或每 N MCU 块发出一个 JPEG 重启标记，如果“B”附加到数字。
> *   -scans file 使用指定文本文件中给出的扫描脚本。
> 
> 有关这些开关的更多详细信息，请参阅之前对 cjpeg 的讨论。如果您没有指定这些开关，您将获得一个普通的基线JPEG 输出文件。质量设置等由输入文件确定。
> 
> 通过提供以下开关之一，可以无损地转换图像：
> 
> *   -水平翻转水平镜像（左右）。
> *   -flip vertical 垂直镜像（上下）。
> *   -rotate 90 将图像顺时针旋转 90 度。
> *   -rotate 180 将图像旋转 180 度。
> *   -rotate 270 将图像顺时针旋转 270 度（或 90 ccw）。
> *   -transpose 转置图像（跨 UL 到 LR 轴）。
> *   -transverse 横向转置（跨 UR 到 LL 轴）。

奇怪的是（或者可能不是），如果我执行，`.\jpegtran.exe -rotate 180 -outfile test_output2.jpg test_output1.jpg`我会得到原始图像而没有任何剪辑问题。它正在翻转剪裁的部分，但只是没有将其与图像的其余部分对齐。

test_output2.jpg：![又旋转180](../Images/e689725671a1daa855affa3a379e8dee.png)

`jpegtran.exe -rotate 90`通过执行两次，我得到了相同的结果。

此外，我在一个较大的 .jpg 文件上进行了尝试，这导致了同样的问题，但输出的文件大小小了 18KB。我想这个问题与此有关。

* * *

编辑-我还发现了这个似乎描述问题的简介：

> jpegtran 在转换奇数大小的图像时的默认行为旨在保持转换集的精确可逆性和数学一致性。如前所述，转置能够翻转整个图像区域。水平镜像使右侧边缘的任何部分 iMCU 列保持不变，但能够翻转图像的所有行。类似地，垂直镜像使底部边缘的任何部分 iMCU 行保持不变，但能够翻转所有列。其他变换可以构建为转置和翻转操作的序列；为了一致性，它们对边缘像素的动作被定义为与相应的转置和翻转序列的最终结果相同。

-trim 开关起作用，如果你可以这样称呼它，并修剪掉杂乱无章的数据，但图像更小并且丢失数据。

test_output5.jpg：![修剪输出](../Images/a9d914ca73a7ecdcc32128eedbe4e375.png)

添加据称可以阻止上述情况发生的 -perfect 开关会导致：`transformation is not perfect`输出且没有图像。

那么不可能无损地旋转.jpg吗？我自己可以通过简单地将边缘线移动到正确的位置来进行绘画并重建原始图像。有没有办法在 libjpeg 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:06:00.313

无损旋转适用于 JPEG 文件中包含的整个 DCT 块。这些块始终为 8x8 或 16x16 像素（取决于压缩[下采样](http://en.wikipedia.org/wiki/Jpeg#Downsampling)设置）。该文件包含宽度和高度，因此在解码图像时可以丢弃额外的像素，但无法将剪辑从右/下边缘移动到左/上边缘。该软件正在尽其所能解决一个不可能的问题。

正如您所发现的，解决此问题的方法是使宽度和高度可被 16 整除。您会发现，例如来自相机的图像将具有此属性。

# http-status-code-301 - 301重写重定向到错误的地方

> ID：14612811
> 
> 赞同：1
> 
> 时间：2013-01-30T20:13:46.867
> 
> 标签：http-status-code-301

我正在接管一个网站，我正在拼命地让我们的附属网站留在他们的重写路径上。相反，他们都转发到主页。我显然希望 404 重定向，我知道我在这里遗漏了一些东西，但我已经尝试了我能想到的一切，我显然需要另一对大脑。这就是它的编写方式，我不确定如何根据需要对其进行编辑。我如何阻止附属页面从那时转发到索引？似乎我所做的每一次编辑都会破坏一切！

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ http://%1%{REQUEST_URI} [L,R=301]

RewriteRule ^aff/(.*)$ /index.php/aff/?aff=$1 [R,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [R=301,NC]

ErrorDocument 404 /redirect/404_redirect.php
Redirect 301 /redirect/404_redirect.php http://privatemoneyexchange.org 
```

# c# - 实体框架代码首先使用一列作为主键，另一列作为自动增量列

> ID：14612813
> 
> 赞同：29
> 
> 时间：2013-01-30T20:13:55.057
> 
> 标签：c#, entity-framework, ef-code-first

我有一个名为**Sale的课程**

```
public class Sale
{
    public int Id { get; set; }
    public string TrNo { get; set; }
    public DateTime Date { get; set; }
    public int CustomerID { get; set; }

    public ObservableCollection<SaleDetail> SaleDetails { get; set; }
} 
```

在数据库中，我想要`Id`作为`Auto Increment`列和`TrNo`作为`Primary Key`列。

请先告诉我如何使用 EF5 代码执行此操作。

谢谢。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-30T20:24:22.897

您也可以使用数据注释来做到这一点：

```
public class Sale
{
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    [Key]
    public string TrNo { get; set; }

    public DateTime Date { get; set; }
    public int CustomerID { get; set; }

    public ObservableCollection<SaleDetail> SaleDetails { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-30T20:21:14.287

我相信你可以使用 Fluent API 做到这一点

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Sale>().Property(a => a.Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
    modelBuilder.Entity<Sale>().Property(a => a.TrNo).HasKey(b => b.TrNo);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-11T10:37:21.117

显然@IronMan84的[答案是正确的。](https://stackoverflow.com/questions/14612813/entity-framework-code-first-using-one-column-as-primary-key-and-another-as-auto/14613001#14613001)但这对我不起作用。我稍微修改了它以应用我的另一个条件。它奏效了。我什么也没做。

这是我的解决方案。

```
public class Sale
{
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    [Key, Column(TypeName = "varchar"), MaxLength(50)]
    public string TrNo { get; set; }

    public DateTime Date { get; set; }
    public int CustomerID { get; set; }

    public ObservableCollection<SaleDetail> SaleDetails { get; set; }
} 
```

不幸的是，我无法将@IronMan84 的答案作为正确的答案，因为它对我不起作用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-09-22T16:09:43.863

这对我有帮助。希望这可以帮助其他仍在环顾四周的人

```
public class Sale
    {
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]//switch on autogenerated
        public int Id { get; set; }

        [Key]//set as Primary key
        [DatabaseGenerated(DatabaseGeneratedOption.None)]// switch off autogenerated PK
        public string TrNo { get; set; }

        public DateTime Date { get; set; }
        public int CustomerID { get; set; }

        public ObservableCollection<SaleDetail> SaleDetails { get; set; }
} 
```

# ruby-on-rails - rails 在导入的文件上添加外键

> ID：14612815
> 
> 赞同：0
> 
> 时间：2013-01-30T20:14:01.143
> 
> 标签：ruby-on-rails, session, csv, model, import

我正在尝试在导入列表上设置外键。我的想法是创建一个 before_save 回调来使用会话变量更新外键。但是，我的理解是，您不能轻易或不应该从模型中访问会话变量。如果是这样，我还有什么其他选择。我的代码如下：

在模型中：

```
class Contact < ActiveRecord::Base
   attr_accessible :first_name, :last_name, :email, :mobile, :restaurant _id
   belongs_to :restaurant

    before_save :add_restaurant

    def add_restaurant
     contact = Contact.find_by_restaurant_id(session[:current_restaurant])
     contact.restaurant_id = (session[:current_restaurant])
    end

  def self.import(file)
    CSV.foreach(file.path, headers: true) do |row|
    contact = find_by_first_name_and_last_name(row["first_name"], row["last_name"]) || new
    contact.attributes = row.to_hash.slice(*accessible_attributes)
    contact.save!
    end
  end
end 
```

在控制器中：

```
def import
    Contact.import(params[:file])
    redirect_to contacts_path, notice: "List imported"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:33:03.743

您可以先找到餐厅，然后将联系人添加到餐厅联系人中。

```
def self.import(file)
  CSV.foreach(file.path, headers: true) do |row|
    contact = find_by_first_name_and_last_name(row["first_name"], row["last_name"]) || new
    contact.attributes = row.to_hash.slice(*accessible_attributes)
    restaurant = Restaurant.find_by_id(r_id)    # Get the restaurant here
    restaurant.contacts << contact              # This will do a save immediately
  end
end 
```

# java - 在 Java 中返回 ...（如 goto）

> ID：14612816
> 
> 赞同：0
> 
> 时间：2013-01-30T20:14:02.533
> 
> 标签：java

我刚开始学习Java，所以有很多问题。如果出现问题，现在我需要返回程序的开头。

```
public static int getchartoint() throws IOException {
    int a;
    try {   
        BufferedReader bReader = new BufferedReader(new InputStreamReader(System.in));
        String k = bReader.readLine();
        a = Integer.parseInt(k);
        return a;
    }
    catch (NumberFormatException exc) {
        System.out.println(exc);
        return a = 0;
    }
    finally {

    }
} 
```

我有，我可以在正文`a = 0`中写案例：`main()`

```
case 0: {
    System.out.println("Your entered an incorrect number...");
} 
```

我的问题是：我怎样才能添加一行让我准确地移动到那行代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:17:06.303

在你的 switch/case 语句之前调用“getchartoint”方法。

然后当它返回整数 0 时，它将执行 case 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T20:16:53.150

看起来您只想`return 0;`代替`return a=0;`.

# ruby-on-rails - 每当 gem: 我设置 :output 但日志文件没有显示在我期望的位置

> ID：14612818
> 
> 赞同：6
> 
> 时间：2013-01-30T20:14:04.713
> 
> 标签：ruby-on-rails, ruby, macos, cron, whenever

在我的`schedule.rb`文件中，我有以下几行：

```
set :output, '/log/cron_log.log'

every 5.minutes do
  command 'echo "hello"'
end 
```

我`whenever -w`按照这个问题[Rails 中的建议运行，使用开发中的任何时候 gem](https://stackoverflow.com/questions/11514968/rails-using-whenever-gem-in-development)，并且我假设 cronfile 已编写并正在运行。（我也尝试重新启动 Rails 服务器。）

当我运行时，`$ crontab -l`我看到以下内容：

```
0,5,10,15,20,25,30,35,40,45,50,55 * * * * /bin/bash
-l -c 'echo "hello" >> /log/cron_log.log 2>&1' 
```

但是我找不到日志文件。我检查了 rails_project/log、~/log 和 /log 无济于事。顺便说一句，在 OSX 上。

**如何将日志文件写入 rails 项目日志文件夹？**

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-30T21:27:02.640

## 你的日志在哪里？

您将输出文件放在最高目录级别：

```
$ cd /log 
```

要查看文件是否存在以及其中是否有数据：

```
$ ls -la cron_log.log 
```

根据需要创建日志文件：

```
$ touch cron_log.log 
```

为您自己的本地调试打开权限（不要在生产中这样做！）

```
$ chmod +rw cron_log.log 
```

## 你的命令在运行吗？

要手动运行命令以查看它是否按预期工作：

```
$ /bin/bash -l -c 'echo "hello" >> /log/cron_log.log 2>&1' 
```

为了提高您的安全性并保护您的路径，请使用完整路径：

```
wrong: command 'echo "hello"'
right: command '/bin/echo "hello"' 
```

要查找命令完整路径：

```
$ which echo 
```

要验证 cron 是否按预期运行：

```
$ sudo grep CRON /var/log/syslog 
```

grep 结果应该有类似这样的行：

```
Jan 1 12:00:00 example.com CRON[123]: (root) CMD (... your command here ...) 
```

## 你在 Mac 上吗？

如果您没有在 syslog 中看到输出，而您使用的是 Mac，则可能需要阅读有关 Mac OSX`cron`从`launchd`.

请参阅 cron plist (/System/Library/LaunchDaemons/com.vix.cron.plist) 并使用 stdout/stderr 路径来调试 cron 本身。我不记得launchctl卸载和launchctl加载plist是否足够，或者如果你必须完全重新启动它是一个系统守护进程。（查看[lion 中的 cron 日志文件在哪里](https://apple.stackexchange.com/questions/38861/where-is-the-cron-log-file-in-lion)）

## 如何相对于 Rails 进行日志记录？

要将日志相对于 Rails 应用程序，请省略前导斜杠（通常称为 cron.log）

```
set :output, "log/cron.log" 
```

要将日志放在特定的完全限定目录中：

```
set :output, '/abc/def/ghi/log/cron.log' 
```

每当 wiki 有一些关于重定向输出的好例子：

[https://github.com/javan/whenever/wiki/Output-redirection-aka-logging-your-cron-jobs](https://github.com/javan/whenever/wiki/Output-redirection-aka-logging-your-cron-jobs)

例子：

```
every 3.hours do
  runner "MyModel.some_process", :output => 'cron.log'     
  rake "my:rake:task", :output => {:error => 'error.log', :standard => 'cron.log'}
  command "/usr/bin/cmd"
end 
```

# ruby-on-rails - 如何将用户重定向到他们自己的页面（ROR 和 Devise Gem）

> ID：14612820
> 
> 赞同：0
> 
> 时间：2013-01-30T20:14:12.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, routes

好的，请在这里忍受我。

我在问一个我不完全熟悉所有技术细节等的问题（换句话说，请放轻松，因为我没有完全达到标准）。

我用 Devise 的 gem 创建了一个 ROR 应用程序……它允许您登录、注册和注销。

它非常简单，只有一个页面，您可以在其中填写您的姓名、最喜欢的爱好和书籍。（嘿，这只是一个例子）

我还使用了他们的重定向代码来访问此页面：

```
 def after_sign_in_path_for(resource)
    posts_path
  end 
```

问题是……这个页面对*所有*登录的人都是公开的。

如何将用户重定向到*他们*自己的页面？并且看不到每个人的其他“笔记”。

我环顾四周......并且Devise在sessions_controllers上有[一个链接......](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/sessions_controller.rb)

我用那个吗？我不完全理解它的目的。

如果是，如何？仍然试图弄清楚所有拼图是如何组合在一起的，当您对主题本身没有完全理解时，很难做到这一点。

还是有另一种更简单的方法？

如果这个问题太宽泛，请告诉我......但我不太确定如何分解它。

本质上，我真正要问的是我如何让用户被引导到他们自己的页面而不看到其他人的页面。

提前感谢任何帮助/建议/指针/等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:24:46.617

首先，让我们假设您的 User 模型`has_many :posts`。在 PostsController 索引操作（默认的[RESTful 路由](http://guides.rubyonrails.org/routing.html)是 posts_path）中，您可以输入如下内容：

```
@posts = current_user.posts 
```

访问索引视图时，您只会看到当前用户的帖子。

话虽如此，您不仅限于索引视图。您可以自定义任何您想要的视图，并使用声明的实例变量拥有相应的控制器操作，您可以在视图中操作这些变量。

这有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:16:40.450

尝试：

```
def after_sign_in_path_for(user) # note: user or w/e your model is named
  users_path(current_user)
end 
```

# c - sprintf 是做什么的？（原为：OpenGL 中的 FPS 计算）

> ID：14612821
> 
> 赞同：0
> 
> 时间：2013-01-30T20:14:12.560
> 
> 标签：c, std, printf

对于 FPS 计算，我使用了我在网上找到的一些代码，它运行良好。但是，我真的不明白。这是我使用的功能：

```
void computeFPS()
{
  numberOfFramesSinceLastComputation++;
  currentTime = glutGet(GLUT_ELAPSED_TIME);

  if(currentTime - timeSinceLastFPSComputation > 1000)
  {
    char fps[256];
    sprintf(fps, "FPS: %.2f", numberOfFramesSinceLastFPSComputation * 1000.0 / (currentTime . timeSinceLastFPSComputation));
    glutSetWindowTitle(fps);
    timeSinceLastFPSComputation = currentTime;
    numberOfFramesSinceLastComputation = 0;
  }
 } 
```

我的问题是，在 sprint 调用中计算的值是如何存储在 fps 数组中的，因为我并没有真正分配它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:00:48.320

这不是关于 OpenGL 的问题，而是关于 C 标准库的问题。阅读 s(n)printf 的参考文档有助于：

人 s(n)printf： http: [//linux.die.net/man/3/sprintf](http://linux.die.net/man/3/sprintf)

简而言之，snprintf 采用指向用户提供的缓冲区和格式字符串的指针，并根据格式字符串和附加参数中给出的值填充缓冲区。

* * *

这是我的建议：如果您必须询问此类问题，请先不要处理 OpenGL。在提供缓冲区对象数据和着色器源时，您需要熟练使用指针和缓冲区。如果您打算为此使用 C，请先获取一本有关 C 的书并彻底了解它。与 C++ 不同的是，您实际上可以在几个月的时间内将 C 学习到一定程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:08:43.507

据说在主循环的每次重绘时都会调用此函数（对于每一帧）。所以它正在做的是增加帧计数器并获取显示该帧的当前时间。每秒一次（1000 毫秒），它会检查该计数器并将其重置为 0。因此，当每秒获取计数器值时，它会获取其值并将其显示为窗口的标题。

```
/**
 * This function has to be called at every frame redraw.
 * It will update the window title once per second (or more) with the fps value.
 */
void computeFPS()
{
  //increase the number of frames
  numberOfFramesSinceLastComputation++;

  //get the current time in order to check if it has been one second
  currentTime = glutGet(GLUT_ELAPSED_TIME);

  //the code in this if will be executed just once per second (1000ms)
  if(currentTime - timeSinceLastFPSComputation > 1000)
  {
    //create a char string with the integer value of numberOfFramesSinceLastComputation and assign it to fps
    char fps[256];
    sprintf(fps, "FPS: %.2f", numberOfFramesSinceLastFPSComputation * 1000.0 / (currentTime . timeSinceLastFPSComputation));

    //use fps to set the window title
    glutSetWindowTitle(fps);

    //saves the current time in order to know when the next second will occur
    timeSinceLastFPSComputation = currentTime;

    //resets the number of frames per second.
    numberOfFramesSinceLastComputation = 0;
  }
 } 
```

# javascript - Javascript 意外标识符错误

> ID：14612823
> 
> 赞同：0
> 
> 时间：2013-01-30T20:14:13.590
> 
> 标签：javascript, jquery, ajax

这行代码出现意外的标识符错误：`var player[data[x].split("|",1)] = data[x].split("|")[1];`

响应数据采用以下格式：

```
Mike Trout|0\nRyan Braun|0\n... 
```

这是完整的 JS 函数：

```
function updateChance(round, pickNumber)
{
    $.ajax({
            type: "GET",
            data: {round: round, pickNumber: pickNumber},
            url: "./lib/updatechance.php",
            dataType: "html",
            async: false,
            success: function(response) 
            {
                var data = response.split("\n");
                for (var x=0; data.length; x++)
                {
                    var player[data[x].split("|",1)] = data[x].split("|")[1];
                }

                for (var r = 1; r < $('#battersTable').rows.length; r++){
                    //do something with player

                }
            }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:16:01.043

看看你在这里做了什么

```
.split("|",1)  //wrong 
```

和

```
.split("|")[1]  //right 
```

另一个问题，你有`var`括号符号，不会发生。

```
var player[data[x].split("|",1)]  <-- var, should not be there 
```

并且 for 循环缺少检查，因此将无限运行。

```
for (var x=0; data.length; x++)  <-- data.length what? 
```

为什么要分两次？两次努力，一次做

```
for (var x=0; x<data.length; x++) {
    var info = data[x].split("|");
    player[info[0]] = info[1];
} 
```

如果`player`未全局定义，则需要在循环之前定义它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:16:55.147

您不能在声明变量的同一语句中访问对象索引器。该`split`函数也只接受一个参数并返回一个可索引数组。所以这：

```
for (var x=0; data.length; x++) {
   var player[data[x].split("|",1)] = data[x].split("|")[1];
} 
```

应该：

```
var player = {};
for (var x=0; x < data.length; x++) {
   var value = data[x].split("|")[1];
   player[value] = value;
} 
```

还将拆分操作的结果存储在中间变量中，并修复会导致循环最终崩溃的循环语法问题，语法错误不会阻止代码运行。

总而言之，由于您有很多语法问题，我建议您通过诸如[jshint 之](http://www.jshint.com/)类的 linter 运行您的代码。它将为您提供有关问题的详细错误报告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T20:20:07.700

在

```
var player[data[x].split("|",1)] = data[x].split("|")[1]; 
```

关键字`var`没有意义。你只需要它来声明一个局部变量，下面的只是一个赋值。

还有其他问题（请参阅其他答案和评论），但这实际上是浏览器报告的语法错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T20:20:09.640

我猜你想这样做：

```
 var player = {};
     for (var x=0; data.length; x++) {
        var flds = data[x].split("|");
        player[flds[0]] = flds[1];
     } 
```

# if-statement - cmd：如果存在 A 和 B 则

> ID：14612824
> 
> 赞同：9
> 
> 时间：2013-01-30T20:14:17.457
> 
> 标签：if-statement, batch-file, cmd

在 CMD shell 中最简单和/或最易读的方法是`IF`什么？`AND`在伪代码中：

```
IF EXIST file1 AND file2:
   then do stuff
ELSE: 
   do something else 
```

*这个 Q 必须在 SO 上的某个地方，但我的 search-fu 不适用于这个。对不起*

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T20:36:43.957

假设您正在谈论 DOS/Windows 批处理文件，我认为您想要这样的东西：

```
SET do_stuff=false
IF EXIST file1 IF EXIST file2 SET do_stuff=true
IF "%do_stuff%"=="true" (
    REM do stuff
) ELSE (
    REM do something else
) 
```

丑陋的根源在于DOS批处理文件`if`语句没有*and*和*or*运算符，所以你必须编写嵌套`if`语句（这可能导致在*then*和*else*子句中重复代码），或者将表达式结果捕获到变量中然后`if`对其值进行声明（更多行）。我赞成第二种方法以避免重复代码。也许这都是一个安全功能。:)

[我在这里](http://www.computerhope.com/if.htm)和[这里 (SO, even)](https://stackoverflow.com/questions/2143187/logical-operators-and-or-in-dos-batch)找到了一些很好的例子。`help if`但是您也可以只使用 shell（或`if /?`IIRC）中内置的帮助系统。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T23:40:07.163

[@Randall Cook](https://stackoverflow.com/a/14613247/297408)相当不错的建议的替代方案可能是这样的：

```
IF EXIST file1 IF EXIST file2 (
  *do stuff*
  GOTO cont
)
*do something else*

:cont
*get on with other stuff* 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-31T06:21:22.410

```
IF EXIST A (
    IF EXIST B (
        ECHO A and B exist
        )
    ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-29T22:13:04.500

[自从@RandallCook 的回答](https://stackoverflow.com/a/14613247/14420)对我来说是最好的以来，我学到了一些东西。这就是我现在要使用的：

```
@echo off
IF EXIST "File1" IF EXIST "File2" GOTO :do_stuff
GOTO :not_exist
GOTO :EOF

:do_stuff
    echo File1 and File2 exist.
    echo -- Doing stuff here...
    goto :EOF

:not_exist
    echo  Condition not met, not doing stuff.
    goto :EOF 
```

`:EOF`将退出当前子例程或脚本的预定义标签。

对于那些更喜欢 CALL 而不是 GOTO 的人，因为它可以在更长的脚本中产生更清晰的代码，我们需要稍微复杂一些，但仍然可读：

```
@echo off
:: Successful CD resets errorlevel to 0, in case it was already set this shell
cd
IF EXIST "File1" IF EXIST "File2" CALL :do_stuff
IF ERRORLEVEL 10 GOTO :EOF
CALL :not_exist
GOTO :EOF

:do_stuff
    echo File1 and File2 exist.
    echo -- Doing stuff here...
    exit /b 10
    goto :EOF

:not_exist
    echo  Condition not met, not doing stuff.
    goto :EOF 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-26T11:56:00.880

```
set /p k="Please enter Choice : " 
```

如果 "%k%" == "A" 转到 A 如果 "%k%" == "B" 转到 B

:A echo "来自 A 的你好" :B echo "来自 B 的你好"

# c++ - 训练 OpenCV LBP 分类器

> ID：14612826
> 
> 赞同：2
> 
> 时间：2013-01-30T20:14:25.157
> 
> 标签：c++, opencv, classification

我需要使用 OpenCV 创建自己的 LBP 级联分类器，因此为了适应这个过程，我一直在使用一个非常小的文件集来掌握它。

但是，我正在努力寻找关于 opencv_traincascade 的体面信息。我将进程设置在 .vec 文件中的 87 个正图像上运行。我意识到这是一个很小的集合，不会有太大用处，但我希望如果我将它完全粘贴到负片上，它可能足以拾取我的一张正片，只是为了测试理论。但是，当我开始训练过程时，结果是它到了第 5 阶段，然后在开始第 6 阶段时挂起。

我用一个更小的正数集重新开始了这个过程，它做了同样的事情——由于某种原因，它进入阶段 x 并在训练阶段开始时冻结在 Neg Count 上，并且永远不会恢复。

有没有人有任何想法或建议？问题是我的训练集很小吗？

```
===== TRAINING 0-stage =====
BEGIN
POS count : consumed   6 : 6
NEG count : acceptanceRatio    2600 : 1
Precalculation time: 10.965
+----+---------+---------+
|  N |    HR   |    FA   |
+----+---------+---------+
|   1|        1|        0|
+----+---------+---------+
END

===== TRAINING 1-stage =====
BEGIN
POS count : consumed   6 : 6
NEG count : acceptanceRatio    2600 : 0.0244943
Precalculation time: 10.985
+----+---------+---------+
|  N |    HR   |    FA   |
+----+---------+---------+
|   1|        1|        0|
+----+---------+---------+
END

===== TRAINING 2-stage =====
BEGIN
POS count : consumed   6 : 6
NEG count : acceptanceRatio    2600 : 0.000697076
Precalculation time: 11.237
+----+---------+---------+
|  N |    HR   |    FA   |
+----+---------+---------+
|   1|        1|0.000384615|
+----+---------+---------+
END

===== TRAINING 3-stage =====
BEGIN
POS count : consumed   6 : 6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:53:06.467

我正在做类似的事情。训练阶段通常会被锁定在无限循环中，需要修改代码以防止出现这种情况。**您为createsamples**和**traincascade**使用什么参数？最初尝试减少 traincascade 中负面图像的数量。这对我有用..

# objective-c - Obj-C：递归：在堆栈上创建新对象或使用可变性

> ID：14612827
> 
> 赞同：0
> 
> 时间：2013-01-30T20:14:28.973
> 
> 标签：objective-c, memory-management, recursion, heap-memory

我的问题是这个。在您在下面看到的代码中，我的第二个参数是 a`NSString*`并且当我递归地从数组中获取对象并将它们添加到`buildDescription`参数时，我使用了`stringByAppendingFormat`我理解的方法 - 在堆上创建一个新对象。如果我在参数中有一个可变字符串然后使用其他一些方法来附加新变量会更好吗？由于 Obj-C 中的所有对象都是在堆上创建的，这是进行递归的首选方式，这两种方法有什么好处？当然，只需将指针传递给可变对象，它就需要更少的内存。

```
+ (NSString *)makeDescriptionRecur:(NSMutableArray *)stack: (NSString *) buildDescription
{
    id topOfStack = [stack lastObject];
    if (topOfStack) [stack removeLastObject];

    if ([topOfStack isKindOfClass:[NSNumber class]])
    {
        return [self makeDescriptionRecur:stack:
               [buildDescription stringByAppendingFormat:@"%@ ", topOfStack]];

    } else if  ([topOfStack isKindOfClass:[NSString class]]) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:19:03.833

> 如果我在参数中有一个可变字符串然后使用其他一些方法来附加新变量会更好吗？

至少那不会占用`O(n ^ 2)`内存，只是`O(n)`。也许更“最佳”一点。

# python - 为什么不能在 python 中使用 subprocess.PIPE 传递参数？

> ID：14612833
> 
> 赞同：0
> 
> 时间：2013-01-30T20:14:59.940
> 
> 标签：python, subprocess

我正在尝试做一些非常简单的事情来学习如何`subprocess`在 python中使用

我正在尝试的是：

```
ll | egrep "*gz" 
```

所以在阅读了python的手册（我不太了解）之后，我尝试了这个：

```
lista = subprocess.Popen(['ls', '-alF'], stdout=subprocess.PIPE)
filtro = subprocess.Popen(['egrep', '"*gz"'], stdin=lista.stdout, stdout=subprocess.PIPE)
filtro.communicate()[0] 
```

但我得到的只是`''`，我真的不知道该怎么做，我读过[这个](https://stackoverflow.com/questions/9655841/python-subprocess-how-to-use-pipes-thrice)，但似乎我根本没有明白......有人可以向我解释一下这是如何工作的，以便之后使用它与其他命令？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:28:24.163

问题可能是 egrep 参数周围的双引号。试试这个：

```
import subprocess
ls = subprocess.Popen(['ls', '-alF'], stdout=subprocess.PIPE)
egrep = subprocess.Popen(['egrep', '\.gz$'], stdin=ls.stdout, stdout=subprocess.PIPE)
print egrep.communicate()[0] 
```

我假设您在这里寻找以“.gz”结尾的文件，因为您的初始正则表达式没有意义。如果您只是在寻找以“gz”结尾的文件，则可以改用“gz$”。如果你不知道“gz”出现在哪里，只需使用“gz”。

编辑：这是一个完整的例子。在包含三个文件“pipe.py”、“test1.py.gz”和“test2.py.gz”的目录中，其中“pipe.py”是上面的脚本，我执行：

```
$ python pipe.py 
```

结果

```
-rw-r--r-- 1 amaurea amaurea  146 Jan 30 20:54 test1.py.gz
-rw-r--r-- 1 amaurea amaurea  150 Jan 30 20:54 test2.py.gz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:10:08.697

在 Unix 上，利用`shell`参数：

```
lista = subprocess.Popen('ls -alF', stdout=subprocess.PIPE, shell=True)
filtro = subprocess.Popen('egrep "*gz"', stdin=lista.stdout, stdout=subprocess.PIPE, shell=True)
filtro.communicate()[0] 
```

您可以简单地复制命令，不必担心将它们分解为参数列表。

您也可以明确指定外壳：

```
subprocess.Popen('bash -c "ls -l"', stdout=subprocess.PIPE, shell=True) 
```

# jquery - 使用 AND/OR 选择多个元素

> ID：14612837
> 
> 赞同：2
> 
> 时间：2013-01-30T20:15:19.033
> 
> 标签：jquery

我不确定多项选择的语法。我的意思是采用您的标准点击元素功能：

```
$("#target").click(function () {}); 
```

意思是`if #target is clicked then do function`

并使它意味着`if #target or #target2 or #target3 is clicked then do function`

或者`if #target1 and #target2 are hovered over, then do function`

我知道我可以为每个人做一个点击功能，但这似乎浪费空间，那么我该如何更简洁地编写代码呢？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T20:15:53.620

将它们全部放在一个选择器中，用逗号分隔：

```
$("#target1, #target2, #target3").click(function () {}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T20:18:46.490

试试这个

```
$("#target1, #target2, #target3").on('click',
       function () {
          //some code here
        }
); 
```

多个选择器由 . 分隔`,`。

**或者**

```
$('[id ^= "target"]').on('click',
        function () {
              //some code here
       }
); 
```

`^=`表示所有 id 都以`target`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T20:16:29.330

只需`,`在您需要的所有选择器之间使用

```
$("#target, #target2, #target3").click(function () {}); 
```

# css - 为什么我们需要用这么难的方式来添加样式表

> ID：14612839
> 
> 赞同：0
> 
> 时间：2013-01-30T20:15:25.563
> 
> 标签：css, html, xhtml

为什么我们有一种如此困难的方式来向页面添加样式表？

我的意思是我们添加的javascript

```
<script src="nope.js"></script> 
```

并且内联是

```
<script>
    alert("I refuse.");
</script> 
```

但是样式是一个故事，内联是

```
<style>

    * {
        color:white;
        background:white;
    }

</style> 
```

一个文件是

```
 <link href="/themes/black-wide.css?r=2408" rel="stylesheet" type="text/css"> 
```

为什么我们需要使用链接？使用起来不是更合乎逻辑吗

```
<style src="style.css"></style> 
```

而不是链接？

为什么会这样？

**编辑**

只是为了让它更清楚。

*为什么我们需要使用链接而不是样式来指向 css 文件。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:25:57.643

当您考虑它时，`<link>`实际上比`<style>`本来的用途要多得多。您必须记住，规范的这一部分是在互联网的早期定义的，当时 CSS 甚至还没有被大量使用（如果有的话）。

我认为 W3C 的人们在制定此标准时，有意为`<link>`标签的其他用途留出了除样式表之外的空间。从语义上讲，`link`仅表示对外部资源的一些引用。这些用途可能从未出现过，但这里有它们的空间。也许更好的问题是我们为什么不也使用`link`标签来加载脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:30:33.043

我想说的原因与提供链接外部资源`<link>`的额外功能有关。`<link>`例如，您可以使用`rel="alternate stylesheet"`为站点提供辅助样式表。或者，`media="print"`对于仅用于打印的样式表等。

更重要的是，CSS 有点像旧的基于表格的布局时代的这种进化生物。你认为哪个先出现`<link>`还是`<style>`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:19:24.070

您对内联样式的观点是错误的。您可以编写内联样式，例如：

```
<style>*{color:white;background:white;}</style> 
```

额外的行和间距只是为了提高可读性。内联 javascript 也可以这样说，只要使用正确的语法，就可以根据需要添加任意数量的空格和换行符。例如：

```
<script>
    alert("I refuse.");
</script> 
```

将以与以下相同的方式工作：

```
<script>

    alert(
          "I refuse."
         );

</script> 
```

至于使用语法`<link...>`而不是更简单的语法，则`<style src...>`回到 W3C 和他们设定的标准。随着时间的推移，这些标准可能会改变以允许更短的符号，但在这种情况发生之前（如果有的话）它是我们必须忍受的一个小不便。

# java-me - 在 J2ME 中获取事件点击列表项

> ID：14612842
> 
> 赞同：1
> 
> 时间：2013-01-30T20:15:39.877
> 
> 标签：java-me, midp, lcdui

我想创建小应用程序。我将使用用户名和密码登录，然后显示选项以供选择。如果选择选项，则相应显示警报。但我无法在列表中获取事件点击项。

这是代码：

```
public class Midlet extends MIDlet implements CommandListener{
private Display display;
private SampleCavans myCanvas;
private TextField username;
private TextField password;
private Form form;
private Command cancel;
private Command login;
private Command mNextCommand;
private List service;
String[] stringElements = { "Check Mail",  "Compose","Addresses","Options","Signout","Calculator"};
public Midlet() {                
    display=Display.getDisplay(this);      
    username=new TextField("Login ID", "", 10, TextField.ANY);
    password=new TextField("Password", "", 10, TextField.PASSWORD);
    cancel=new Command("Cancel", Command.CANCEL, 2);
    login=new Command("Login", Command.OK, 2);
    form=new Form("Sign in");
    form.append(username);
    form.append(password);
    form.addCommand(cancel);
    form.addCommand(login);
    form.setCommandListener(this);//add event click for form        
    myCanvas=new SampleCavans();        
}   
public void startApp() {
    display.setCurrent(form);
}
public void pauseApp() {
}
public void destroyApp(boolean unconditional) {
    notifyDestroyed();
}    

public void menu()
{
    //List service=new List("Choice one",Choice.EXCLUSIVE);        
    service=new List("Choice one",Choice.EXCLUSIVE,stringElements,null);                
    service.setCommandListener(this);
    //service.addCommand(mNextCommand);
    display.setCurrent(service);
}
public void tryAgain()
{
    Alert error=new Alert("Login Incorrect","Please try again",null,AlertType.ERROR);
    error.setTimeout(Alert.FOREVER);
    username.setString("");
    password.setString("");
    display.setCurrent(error,form);        
}
public void commandAction(Command c, Displayable d) {
    String lable=c.getLabel();
    if(lable.equals("Cancel"))
    {
        destroyApp(true);
    }
    else if(lable.equals("Login"))
    {
        validateUser(username.getString(),password.getString());
    }
    else if(c==List.SELECT_COMMAND)
    {
       int index = service.getSelectedIndex();
       Alert alert = new Alert("Your selection",
       "You chose " + service.getString(index) + ".",
       null, AlertType.INFO);
       Display.getDisplay(this).setCurrent(alert, service);
    }
}
private void validateUser(String name, String pass) {
    if(name.equals("12")&&pass.endsWith("12"))
    {
        menu();
    }
    else
        tryAgain();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:53:50.107

在 midp 中，列表实际上更像是一个带有选项的菜单。您必须在其上设置一个命令，以便在您的命令操作中您可以发送此命令，从菜单中获取选择并相应地设置下一个屏幕。这是类似于您正在尝试做的事情的代码：

```
import javax.microedition.lcdui.Command;
import javax.microedition.lcdui.CommandListener;
import javax.microedition.lcdui.Display;
import javax.microedition.lcdui.Displayable;
import javax.microedition.lcdui.Form;
import javax.microedition.lcdui.List;
import javax.microedition.lcdui.TextBox;
import javax.microedition.lcdui.TextField;
import javax.microedition.midlet.MIDlet;
import javax.microedition.midlet.MIDletStateChangeException;

public class Login extends MIDlet implements CommandListener {

    private static final String ONE = "One";
    private static final String THE_OTHER = "The Other";

    private Form form;
    private Command cancel=new Command("Cancel", Command.CANCEL, 2);
    private Command login=new Command("Login", Command.OK, 2);
    private TextField username=new TextField("Login ID", "", 10, TextField.ANY);
    private TextField password=new TextField("Password", "", 10, TextField.PASSWORD);

    private List menu = new List("Menu", List.IMPLICIT, new String[] {"One", "The Other"}, null);
    private Command selection=new Command("SELECTION", Command.ITEM, 1);

    private TextBox message1= new TextBox("One", ONE, ONE.length(), TextField.UNEDITABLE);
    private TextBox message2= new TextBox("The Other", THE_OTHER, THE_OTHER.length(), TextField.UNEDITABLE);

    public Login() {
        form=new Form("Sign in");
        form.append(username);
        form.append(password);
        form.addCommand(cancel);
        form.addCommand(login);
        form.setCommandListener(this);       
        menu.setSelectCommand(selection);
        menu.setCommandListener(this);
        message1.addCommand(cancel);
        message1.setCommandListener(this);
        message2.addCommand(cancel);
        message2.setCommandListener(this);
    }

    protected void destroyApp(boolean unconditional)
            throws MIDletStateChangeException { 
        username.delete(0, username.size());
        password.delete(0, password.size());
    }

    protected void pauseApp() { }

    protected void startApp() throws MIDletStateChangeException {
        Display.getDisplay(this).setCurrent(form);
    }

    public void commandAction(Command c, Displayable d) {
        if(c == cancel) {
            if(d == form) {
                notifyDestroyed();
            }
            else {
                Display.getDisplay(this).setCurrent(form);
            }
        }
        if(c == login) {
            char[] data1 = new char[10];
            username.getChars(data1);
            char[] data2 = new char[10];
            password.getChars(data2);
            if(loginOk(new String(data1), new String(data2))) {
                Display.getDisplay(this).setCurrent(menu);
            }
            else {
                notifyDestroyed();
            }
        }
        if(c == selection) {
            if(menu.getSelectedIndex() == 0) {
                Display.getDisplay(this).setCurrent(message1);
            }
            if(menu.getSelectedIndex() == 1) {
                Display.getDisplay(this).setCurrent(message2);
            }
        }
    }

    private boolean loginOk(String string, String string2) {
        return true;
    }

} 
```

# javascript - 使用 JavaScript 变量设置选中的单选按钮

> ID：14612850
> 
> 赞同：10
> 
> 时间：2013-01-30T20:16:18.593
> 
> 标签：javascript, html

有没有办法使用 JavaScript 变量设置选中的单选按钮？我希望我可以通过 ID 获取单选按钮并更新选中的收音机。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<script>
var shirtColor = "green";

document.getElementById(shirtColor); 
</script>
</head>

<body>
<p>Shirt Color:
<input type="radio" name="shirtColor" id="red" value="red" />
Red
<input type="radio" name="shirtColor" id="green" value="green" />
Green
<input type="radio" name="shirtColor" id="blue" value="blue" /> 
Blue</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-30T20:17:11.887

只需将其`checked`属性设置为`true`：

```
document.getElementById(shirtColor).checked = true; 
```

这是小提琴：http: [//jsfiddle.net/akkSY/](http://jsfiddle.net/akkSY/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T20:18:35.523

它看起来像那样

```
btn = document.getElementById("itsID");
btn.checked = true; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-15T05:13:48.737

你可以用这种方式使用jquery

```
$("control_id").attr("checked",true); 
```

**确保在执行此 jquery 之前加载元素.. 为了安全起见，您应该始终将脚本放在页面末尾的`</body>`标记之前**

# c# - 在第一次加载大量图像时滚动非常慢 - 第二次加载使事情正常

> ID：14612857
> 
> 赞同：0
> 
> 时间：2013-01-30T20:16:44.147
> 
> 标签：c#, wpf, image, xaml, datagrid

我有一个数据网格，它有一个单元格来显示包含大量图像的列表框。我已经定义了自定义列表框样式和数据网格，如下所示。

我已经定义了一个具有图像列表的产品类，并且我将产品列表绑定为数据网格的数据源。

```
<Style x:Key="ImageListBoxStyle" TargetType="ListBox">
    <Setter Property="ItemTemplate">
        <Setter.Value>
            <DataTemplate>
                <Border BorderBrush="White" BorderThickness="1" CornerRadius="2" Margin="3" Background="Transparent">
                    <Image Source="{Binding Path=BitmapImage}" ToolTip="{Binding Path=ToolTip}" Stretch="Uniform" Width="40" Height="40"/>
                </Border>
            </DataTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <WrapPanel Background="Transparent" VerticalAlignment="Top" HorizontalAlignment="Stretch"/>
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
</Style>

<DataGrid 
    x:Name="DataGridProduct" 
    BorderBrush="{x:Null}" 
    Background="#FF2D2D30"
    IsTabStop="True" 
    CanUserReorderColumns="False"
    AutoGenerateColumns="False"
    SelectionMode="Single"
    CanUserAddRows="False"
    CanUserDeleteRows="False"
    CanUserResizeColumns="False"
    CanUserResizeRows="False"
    CanUserSortColumns="False"
    HeadersVisibility="None"
    HorizontalGridLinesBrush="SlateGray"
    BorderThickness="3"
    HorizontalScrollBarVisibility="Disabled"
    VerticalScrollBarVisibility="Auto"
    IsReadOnly="True"
    ItemsSource="{Binding RawProducts, Mode=OneWay, IsAsync=True}"
    GridLinesVisibility="Horizontal"
    SelectionChanged="ProductDataGridSelectionChanged"
    TabIndex="7"
    EnableRowVirtualization="True"
    EnableColumnVirtualization="True"
    VirtualizingStackPanel.IsVirtualizing="True"
    VirtualizingStackPanel.VirtualizationMode="Standard">

    <DataGrid.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent"/>
    </DataGrid.Resources>

    <DataGrid.RowStyle>
        <Style TargetType="DataGridRow">
            <Setter Property="Background" Value="{Binding Converter={StaticResource ProductRowBackgroundConverter}, Mode=OneWay}" />
        </Style>
    </DataGrid.RowStyle>

    <DataGrid.Columns>
        <DataGridTemplateColumn Width="235" MinWidth="235" MaxWidth="235">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Border BorderBrush="White" BorderThickness="2" CornerRadius="2" Background="Transparent" Margin="1">
                        <ListBox Style="{StaticResource ImageListBoxStyle}" ItemsSource="{Binding Path=Images}"  Background="#FF252526" SelectionChanged="GirdListBoxOnSelectionChanged" Padding="3"/>
                    </Border>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

类定义为：

```
public class RawProduct
{
    public List<ProductImage> Images { get; set; }
}

public class ProductImage
{
    public ProductImage(string imageFile)
    {
        BitmapImage = new BitmapImage(new Uri(imageFile));
        BitmapImage.DecodePixelWidth = 40;
        RenderOptions.SetBitmapScalingMode(BitmapImage, BitmapScalingMode.LowQuality);
        BitmapImage.Freeze();
    }

    public BitmapImage BitmapImage {get; set;}
} 
```

产品列表中有数百个产品（绑定到数据网格），每个产品项目包含 10-20 个图像。

我的问题是：当我在填充产品集合后第一次加载数据网格时，数据网格中的滚动变得非常缓慢和缓慢，有时甚至会抛出 OutofMemoryException。

但是，当我重新加载数据网格（清除产品列表并再次填充它）时 - 事情开始正常工作 - 滚动变得更顺畅，我看不出问题。

我不确定第一次加载和第二次加载之间有什么区别，第二次事情变得正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:12:19.867

在 Image Source 属性上将 Binding 设置为 OneTime 可以解决该问题。

# jquery - 获取下一个连续div的孩子

> ID：14612858
> 
> 赞同：1
> 
> 时间：2013-01-30T20:16:44.897
> 
> 标签：jquery

为这个问题的菜鸟道歉，我已经进行了搜索，但找不到任何匹配“获取下一个连续 div 的孩子”的内容。

请问有什么想法吗？

```
//get current
var current = $('#holder').find('img.current');
//get next image
var next = 

<div id="holder">

<div class="item odd">
    <img class="current" src="project_1.jpg">
</div>
<div class="item even">
    <img src="project_2.jpg">
</div>
<div class="item odd">
    <img src="project_1.jpg">
</div>
<div class="item even">
    <img src="project_2.jpg">
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:18:12.450

```
var current = $('#holder').find('img.current');
var next = current.parent().next().find('img'); 
```

阅读 和 上的[`parent`](http://api.jquery.com/parent/)文档[`next`](http://api.jquery.com/next/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:22:06.667

假设相同的 container `#holder`，此解决方案对 dom 的依赖性较小：

```
var current = $('#holder').find('img.current');
var next = $("#holder img").eq(current.index("#holder img") + 1); 
```

[http://jsfiddle.net/ExplosionPIlls/j4yS6/](http://jsfiddle.net/ExplosionPIlls/j4yS6/)

# performance - 如何过滤基于视图的用户对对象的访问

> ID：14612859
> 
> 赞同：1
> 
> 时间：2013-01-30T20:16:46.663
> 
> 标签：performance

我是新手，有一个设计问题。这个问题可能很模糊，但无论如何我都会尝试。

假设我们系统中有 2500 个文件对象。我们有可以访问某些文件的用户。

当我们显示文件或与文件关联的对象的不同视图时，我们需要根据登录用户对文件的访问来过滤视图。如果每个视图都要求应用程序运行所有文件，我猜这对性能不利。处理这种情况的一般做法是什么？缓存登录用户有权访问的文件？

这是一个普遍的问题，但我仍然可以补充一点，我们正在使用 MySQL 和 Hibernate。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:17:20.920

我认为如果您使用 2500 个文件 - 那么这可能不是性能问题。金额不是很大。但数字可能会增长得更快。

所以我看到你使用一些关系数据库。为您的文件（Files）创建一个表，为您的用户（Users）和 UserFileMapping 表创建一个表（以存储用户到文件的关系）。您的目标是实现与用户到文件的多对多关系。这是如何实现它的[教程。](http://return-true.com/2011/02/mysql-many-to-many-relationships/)

然后你可以用简单的表达式查询每个用户的所有文件 `Select distinct from Files inner join FilesUserMapping on File.ID == FilesUserMapping.FileID where FilesUserMapping.UserID == 'your_user_id'`（查询非常近似，我很长时间没有使用 sql 并且忘记了很多东西）

它将为您的用户返回所有文件，并以非常有效的方式制作它，因为数据库具有非常好的优化。

# visual-studio - VS 2012 不使用 NuGet 下载的依赖项

> ID：14612860
> 
> 赞同：1
> 
> 时间：2013-01-30T20:16:47.270
> 
> 标签：visual-studio, nuget

我从不属于自己的回购中签出解决方案。解决方案和/或项目也不是由我开发的。[我从这里开始](http://nuget.codeplex.com/workitem/1879)遵循本指南。这是摘要：

> 最终起作用的是
> 
> 检查工具|选项|包管理器|包还原右键单击解决方案并“启用包还原”右键单击解决方案中的项目和“管理nuget包”。然后，您最终会在此 UI 顶部看到一个栏，其中显示缺少某些包的消息，单击以获取它们。单击此按钮获取包。

所以，我点击恢复，NuGet 似乎下载了包。但是，当我尝试构建项目时，它仍然抱怨缺少依赖项。我查看解决方案文件夹中的 packages 文件夹并查看所有必要的依赖项。但是，由于某种原因，该项目没有正确链接到它。

换句话说，所有库都存在解决方案/包，但是当我尝试构建解决方案和/或项目时，我得到一个构建失败。有谁知道发生了什么？

谢谢。

编辑：为了澄清，在警告下，我得到

> 警告 18 找不到引用的组件“Microsoft.Practices.Unity”。蓝鳍

编辑2：另外澄清一下，如果我添加现有引用并转到包文件夹packages/lib/thefile.dll，它将正确编译并工作。问题是，nuget 应该自动为我执行此操作，对吗？

# java - Java将JPanel高度设置为窗口高度的百分比

> ID：14612861
> 
> 赞同：4
> 
> 时间：2013-01-30T20:16:49.150
> 
> 标签：java, windows, swing, jframe, jpanel

我一直在尝试将 jpanel 的高度设置为窗口高度的 80%。我所做的每一种方式都会创建一个小矩形，或者填充整个窗口。目前，这是我的代码；

```
Toolkit tk = Toolkit.getDefaultToolkit();  
int xSize = ((int) tk.getScreenSize().getWidth());  
int ySize = ((int) tk.getScreenSize().getHeight());  
window.setSize(xSize,ySize);
JPanel p = new JPanel();
p.setBackground(Color.PINK);
p.setLayout(new BorderLayout());
int gameHeight = (int)(Math.round(ySize * 100.0/window.getHeight()));
int gameWidth = (int)(Math.round(xSize * 100.0/window.getWidth()));
p.setPreferredSize(new Dimension(gameHeight, gameWidth));
p.add(new JLabel(" "));
window.add(p, BorderLayout.SOUTH); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T20:21:28.893

你的数学有点不对劲。

要获得一个值的 80%，您应该将其乘以`0.80`，因此您希望面板高度为`ySize * 0.80`，面板宽度为`xSize * 0.80`。

```
int gameHeight = (int) (Math.round(ySize * 0.80));
int gameWidth = (int) (Math.round(xSize * 0.80));
p.setPreferredSize(new Dimension(gameWidth, gameHeight)); 
```

# python - 如何检查对象是否是新型用户定义类的实例？

> ID：14612865
> 
> 赞同：11
> 
> 时间：2013-01-30T20:16:57.630
> 
> 标签：python, python-2.x, new-style-class

代码：

```
import types

class C(object):
    pass

c = C()
print(isinstance(c, types.InstanceType)) 
```

输出：

```
False 
```

检查对象是否是新样式类的用户定义类的实例的正确方法是什么？

## 升级版：

如果检查对象的类型是否是*用户定义*的，我想进一步强调。根据文档：

> **types.InstanceType** *用户定义*
> 类 的实例类型。

 *## UPD2：

好吧 - 不是“正确”的方式也可以。

## UPD3：

`set`还注意到模块中没有类型`types`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T20:40:38.810

您可以将检查与or`x.__class__`的存在（或不存在）结合起来，作为区分新/旧样式类和用户/内置对象的一种hacky方法。`'__dict__' in dir(x)``hasattr(x, '__slots__')`

实际上，这个完全相同的建议出现在[https://stackoverflow.com/a/2654806/1832154](https://stackoverflow.com/a/2654806/1832154)

```
def is_instance_userdefined_and_newclass(inst):
    cls = inst.__class__
    if hasattr(cls, '__class__'):
        return ('__dict__' in dir(cls) or hasattr(cls, '__slots__'))
    return False 
```

* * *

```
>>> class A: pass
... 
>>> class B(object): pass
... 
>>> a = A()
>>> b = B()
>>> is_instance_userdefined_and_newclass(1)
False
>>> is_instance_userdefined_and_newclass(a)
False
>>> is_instance_userdefined_and_newclass(b)
True 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T20:20:59.320

我不确定“正确”的方法，但一种简单的测试方法是旧样式类的实例具有“实例”类型，而不是它们的实际类。

所以`type(x) is x.__class__`或者`type(x) is not types.InstanceType`应该两者都有效。

```
>>> class Old:
...     pass
...
>>> class New(object):
...     pass
...
>>> x = Old()
>>> y = New()
>>> type(x) is x.__class__
False
>>> type(y) is y.__class__
True
>>> type(x) is types.InstanceType
True
>>> type(y) is types.InstanceType
False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T16:23:20.287

这告诉我们 True 如果是这样。

```
if issubclass(checkthis, (object)) and 'a' not in vars(__builtins__):print"YES!" 
```

第二个参数是要检查的类的元组。这很容易理解，我相信它有效。[编辑（对象）到（对象，）感谢邓肯！]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T21:03:07.413

可能我可以使用消除方法 - 不明确检查对象是否是用户定义类的实例 -`isinstance(object, RightTypeAliasForThisCase)`而是检查对象是否不是“基本”类型之一。*

# javascript - 如何在 ng-repeat 中进行点击事件，仅重新渲染受影响的项目（即，不运行 $apply）？

> ID：14612871
> 
> 赞同：3
> 
> 时间：2013-01-30T20:17:19.133
> 
> 标签：javascript, html, angularjs

我的示例代码（在那里）提出了两个问题：

1.  简单地加载页面时，每个项目都会调用“renderthis”函数两次

2.  主要问题 - 单击按钮时，我假设在评估 doit() 表达式后，ng-click 会在范围上调用 $apply，这会导致每个项目的两个 DOM 元素被重新渲染。现在，我了解这里每个项目的范围以某种方式绑定到父范围或通过一些奇怪的隔离或嵌入或诸如此类的东西与之相关，这是我尚未掌握的东西.. 有没有办法让 ng-click 只调用 $digest在每个项目的子范围或类似的东西上？

这是我的代码：

html:

```
<body ng-controller="MainCtrl">
     <ul>
        <li ng-repeat="item in items">
        <div>
         <span>{{item.title}}</span> 
         <span>{{renderthis()}}</span>
         <span>{{item.number}}</span>
         <button ng-click="doit()">CLIQUE!</button>
        </div>
        </li>
      </ul>
  </body> 
```

JS：

```
var app = angular.module('angularjs-starter', []);

app.controller('MainCtrl', function($scope) {
  $scope.doit = function(){
    console.log('doing it for item with title --> ', this.item.title);
  }
  $scope.renderthis = function(){
    console.log('rendering this for item with title -->', this.item.title);
    return '|';
  }
  $scope.items = [{title: 'hello', number: 1}, {title: 'shalom', number: 42}];
}); 
```

或者看到这个plnkr：

[http://plnkr.co/edit/VkR82lbJ0Mi2z12RqBfW](http://plnkr.co/edit/VkR82lbJ0Mi2z12RqBfW)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T20:28:50.693

在与@Mark就此进行了一些乒乓球比赛之后（见下文），建议我将问题重新表述为此类问题：**“我怎样才能在 ng-repeat 范围内进行点击事件，仅重新渲染受影响的项目（即，不运行 $apply) "**正如 Mark 解释的那样，这是为了强调，使用 "ng-click" 本身不太可能解决问题，因为它发出一个硬编码的 "$apply"，并且运行一个摘要循环等等..（见下文）

我会接受我自己的答案，其中包括我自己的 ng-click 版本，它使用 $digest 而不是 $apply，因此不会触发所有 ng-repeat'ed 项目的重新渲染。

这是修改后的 ng-click 代码（xng-click）：

```
var xngEventDirectives = {};

angular.forEach(
  'click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup'.split(' '),
  function(name) {
    var directiveName = directiveNormalize('xng-' + name);
    xngEventDirectives[directiveName] = ['$parse', function($parse) {
      return function(scope, element, attr) {

        var fn = $parse(attr[directiveName]);
        element.bind(name.toLowerCase(), function(event) {
        fn(scope, {$event:event});
        scope.$digest();
        });
      };
    }];
  }
); 
```

这是一个 plnkr 来演示它：

[http://plnkr.co/edit/3i7TCEkBtxCFw2ESeyaU](http://plnkr.co/edit/3i7TCEkBtxCFw2ESeyaU)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T21:33:20.610

> 有没有办法让 ng-click 只在每个项目的子范围内调用 $digest 或类似的东西？

不，要实现此功能，您必须创建自己的指令。

ng-click 触发一个[$digest 循环](http://docs.angularjs.org/guide/concepts)（参见“运行时”部分），它将（除其他外）检查所有 $watches。视图中的每组 {{}} 都会设置一个 $watch。这就是为什么当你点击你会看到来自 renderthis 函数的 log()s 的原因。

除非 $watches 检测到更改，否则我认为不会重新渲染任何内容。

关于“页面加载时每个项目调用两次”：

> （由于 watchExpression 可以在每个 $digest 循环中执行多次，当检测到更改时，请准备好多次调用您的侦听器。） -- [Scope#$watch API doc](http://docs.angularjs.org/api/ng.$rootScope.Scope#$watch)

[@Artem对 Angular 的摘要循环和脏检查](https://stackoverflow.com/questions/12336897/how-to-loop-through-items-returned-by-a-function-with-ng-repeat/12340772#12340772)有很好的解释。总而言之，因为 Angular 在第一个 $digest 循环中发现了一些变化，它会运行另一个以确保所有模型都稳定（未更改）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T17:16:16.463

您可以尝试 ngp-local-click 而不是 ng-click -> [https://github.com/ansukla/ng-perf](https://github.com/ansukla/ng-perf)

# android - 为什么使用指定的 SDK 版本时会出现异常？

> ID：14612873
> 
> 赞同：0
> 
> 时间：2013-01-30T20:17:25.007
> 
> 标签：android, sdk, permissions

为什么我必须删除

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" /> 
```

使

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

工作？

如果我将两者都保留，则在使用尝试访问网络的功能时会出现异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:45:41.830

由于您没有向我们提供堆栈跟踪，因此我在给出这个答案时有点猜测。

我的猜测是你得到一个[`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html). 此异常发生在 Android 3.0 及更高版本上，当您尝试在主 UI 线程上使用网络时。当您将`<uses-sdk>`标签添加到您的应用程序时，您将针对高于 Honeycomb 的 API 16 构建您的应用程序。这也解释了为什么您在 Gingerbread 上看不到异常。

要解决此问题，请将所有网络代码移动到[Thread](http://developer.android.com/reference/java/lang/Thread.html)或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T20:47:05.633

这是不正确的。您无需删除

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" /> 
```

确保

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

被放置在

```
<uses-sdk> 
```

标签和之前

```
<application> 
```

标签。

您还可以参考[在 Android 清单文件中添加 uses-sdk 字段导致崩溃](https://stackoverflow.com/questions/12712630/adding-the-uses-sdk-fields-in-androids-manifest-file-causes-crash)

# asp.net-mvc - 我使用 AntiXSS 但我仍然可以破解页面

> ID：14612875
> 
> 赞同：2
> 
> 时间：2013-01-30T20:17:30.357
> 
> 标签：asp.net-mvc, asp.net-mvc-3, tinymce, xss, antixsslibrary

我不知道我这样做是否正确。
我第一次构建一些东西来防止页面上的攻击。
我将从底部开始：
我有财产：

```
public string Description {get;set;} 
```

用户可以通过 tinyMCE 设置它的值

```
tinyMCE.init({
            mode: "textareas",
            theme: "advanced",
            encoding : "xml"... 
```

在控制器中，在我将其保存在数据库中之前，我会：

```
model.Description = HttpUtility.HtmlDecode(model.Description); 
```

在数据库中，我有一个值：

```
<p>bla bla bla</p> 
```

我在我的项目中添加了 AntiXSS 库：

```
public class AntiXssEncoder : HttpEncoder
    {
        public AntiXssEncoder() { }

        protected override void HtmlEncode(string value, TextWriter output)
        {
            output.Write(Encoder.HtmlEncode(value)); // on breakpoint code always get in here
        }
... 
```

当我显示来自数据库的数据时，我使用：

```
@Html.Raw(Model.Place.Description) 
```

它工作正常，我只看到文字。没有 HTML 标签。断线工作正常。我可以用粗体、斜体等设置文本样式。

但如果我输入：

```
<script>alert(open to attack);</script> 
```

**我得到了警报窗口**。
我不明白我是否需要做更多的事情来防止这种情况发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T21:29:06.130

> 我在我的项目中添加了 AntiXSS 库

你在哪里使用它？

确保您不仅添加了 AntiXSS，而且还实际使用了它：

```
@Html.Raw(Microsoft.Security.Application.Sanitizer.GetSafeHtmlFragment(Model.Place.Description)) 
```

但是请记住，新版本的 AntiXSS 库有点过于严格，并且会去除`<strong>`可能`<br>`不需要的标签。

作为 AntiXSS 库的替代方案，您可以使用[HTML Agility Pack](http://html-agility-pack.net/?z=codeplex)来完成这项工作。里克·斯特拉尔[`blogged about a sample implementation`](http://www.west-wind.com/weblog/posts/2012/Jul/19/NET-HTML-Sanitation-for-rich-HTML-Input)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:09:44.103

首先，您显示的是未以任何方式编码的 RAW Html。如果要显示 Html，理想情况下应该做几件事。

1.  使用 GetSafeHtmlFragment 使用 antixss Sanitizer 类对其进行消毒。请注意，这不会完全保护您。在保存到数据库之前执行此操作。

2.  实施尚未完全支持的标头以防止其他脚本运行。这仅限于某些现代浏览器。

3.  或者... 不允许 html 或不允许已知字符标签之外的任何 HTML。即白名单方法，因此您允许`<strong>`并且不允许其他字母数字字符之外的任何内容。

# highcharts - Highstocks 正在四舍五入我的所有数据

> ID：14612884
> 
> 赞同：1
> 
> 时间：2013-01-30T20:18:20.730
> 
> 标签：highcharts, highstock

简单地说，Highstocks 似乎正在四舍五入我放入其中的所有数据，我需要显示我在工具提示中设置的最多两位小数，但是目前我收到的这两个位置的所有数据都是 0。所以不是 1.5 而是 1。

```
$.getJSON('mkjson.php?device=<?echo $device_name;?>&sensor=<?echo $sensor_name;?>&pin=<?echo $pin;?>&user=<?echo $_SESSION['user'];?>', function(data) {
    // Create the chart
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container',
            zoomType: 'x'
        },

        rangeSelector : {
            selected : 1
        },

        title : {

            text : 'Device:<?echo $device_name;?>'
        },
        subtitle : {
            text : 'Sensor:<?echo $sensor_name;?>'

        },

        xAxis: {
        type: 'datetime',
        dateTimeLabelFormats: {
            second: '%Y-%m-%d<br/>%H:%M:%S',
            minute: '%Y-%m-%d<br/>%H:%M',
            hour: '%Y-%m-%d<br/>%H:%M',
            day: '%Y<br/>%m-%d',
            week: '%Y<br/>%m-%d',
            month: '%Y-%m',
            year: '%Y'
        }
    },

        yAxis : {
            title : {
                text : '<?echo $unit;?>'
            }

        },

        rangeSelector : {
            buttons : [{
                type : 'minute',
                count : 10,
                text : '10m'
            }, {
                type : 'hour',
                count : 1,
                text : '1H'
            }, {
                type : 'day',
                count : 1,
                text : '1D'
            },
            {
                type : 'day',
                count : 3,
                text : '3D'
            }],
            selected : 3,
            inputEnabled : false
        },          

        series : [{
            name : 'Voltage',
            data : data,
            tooltip: {
                valueDecimals: 2
            },
            dataGrouping: {
            enabled: false
            }
        }]
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:27:42.477

您可以使用 格式化数字`Highcharts.numberFormat()`。

```
tooltip: {
            formatter: function() {
                return Highcharts.numberFormat(this.y, 2);
            }
        } 
```

> 演示：http: [//jsfiddle.net/em7h6/](http://jsfiddle.net/em7h6/)

根据此示例顺便说一句：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/valuedecimals/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/valuedecimals/)

using`valueDecimals`也应该有效，不知道您的情况缺少什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:40:14.693

它应该可以在[http://jsfiddle.net/rbr23/](http://jsfiddle.net/rbr23/)不使用 numberFormat();

```
 chart: {
            renderTo: 'container'
        },

        rangeSelector: {
            selected: 1
        },

        title: {
            text: 'AAPL Stock Price'
        },

        series: [{
            data: [29.92, 71.51, 106.433, 129.12, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.61, 54.43]
        }] 
```

# c# - Global asax 中的最佳实践错误处理

> ID：14612888
> 
> 赞同：0
> 
> 时间：2013-01-30T20:18:34.253
> 
> 标签：c#, asp.net

我现在在全局 asax 中有以下代码，我想将异常日志存储在数据库中，这是一个好习惯吗？因为如果那里发生 sql 错误，我也想记录它。所以我想改变下面的代码来写文本日志而不是电子邮件，然后在 sql 错误上写文本日志。

```
void Application_Error(object sender, EventArgs e)
 {
    // Code that runs when an unhandled error occurs
    string testEnvironment = ConfigurationSettings.AppSettings["isTestEnvironment"];
    if (testEnvironment == "0")
    {
        Exception ex = Server.GetLastError();
         if (ex is HttpException && ex.InnerException is ViewStateException)
        {
          Response.Redirect(Request.Url.AbsoluteUri)                
          return
        }
        StringBuilder theBody = new StringBuilder();
        theBody.Append("URL: " + Request.Url + "\n");
        theBody.Append("Referer: " + Request.ServerVariables["HTTP_REFERER"] + "\n");
        theBody.Append("IP: " + Request.ServerVariables["REMOTE_HOST"] + "\n");
        theBody.Append("Error Message: " + ex.ToString() + "\n");
        if (User.Identity.IsAuthenticated)
            theBody.Append("User: " + User.Identity.Name + "\n");
        else
            theBody.Append("User is not logged in." + "\n");
        theBody.Append("Form Values: " + "\n");
        foreach (string s in Request.Form.AllKeys)
        {
            if (s != "__VIEWSTATE")
                theBody.Append(s + ":" + Request.Form[s] + "\n");
        }
        theBody.Append("Session Values: " + "\n");
        foreach (string s in Session.Keys)
            theBody.Append(s + ":" + Session[s] + "\n");
        System.Net.Mail.MailMessage email = new System.Net.Mail.MailMessage();
        email.IsBodyHtml = false;
        email.From = new System.Net.Mail.MailAddress("errors@karpach.com", "ErrorManager");
        email.To.Add(new System.Net.Mail.MailAddress("errornotification@karpach.com", "Developer"));
        email.Subject = Request.Url.ToString().Split('/')[2] + " has ASP.NET error";
        email.Body = theBody.ToString();
        try
        {
            System.Net.Mail.SmtpClient emailProvider = new System.Net.Mail.SmtpClient();
            emailProvider.Send(email);
        }
        catch (Exception anException)
        {
        }
        finally
        {
            if (Request.Url.Segments[Request.Url.Segments.Length - 1].ToLower() != "error.aspx")
                Response.Redirect("~/error.aspx?msg=4");
            else
            {
                Response.Write(@"We encountered an internal error. We apologize for any inconvenience
                but know that our staff gets emailed EVERY error that occurs so that we can solve it promptly.");
                Response.End();
            }
        }
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:29:17.957

您可以将其记录到[EventLog](http://msdn.microsoft.com/en-us/library/34xfdz6a.aspx)。系统管理员可以设置监控以查看何时添加新事件并提醒潜在问题。

[这是来自 MSDN 的EventLog](http://msdn.microsoft.com/en-us/library/2awhba7a.aspx)类示例：

```
if(!EventLog.SourceExists("MySource"))
{
    //An event log source should not be created and immediately used. 
    //There is a latency time to enable the source, it should be created 
    //prior to executing the application that uses the source. 
    //Execute this sample a second time to use the new source.
    EventLog.CreateEventSource("MySource", "MyNewLog");
    Console.WriteLine("CreatedEventSource");
    Console.WriteLine("Exiting, execute the application a second time to use the source.");
    // The source is created.  Exit the application to allow it to be registered. 
    return;
}

// Create an EventLog instance and assign its source.
EventLog myLog = new EventLog();
myLog.Source = "MySource";

// Write an informational entry to the event log.    
myLog.WriteEntry("Writing to event log."); 
```

# php - onepage checkout 卡在账单上，没有进入下一步

> ID：14612891
> 
> 赞同：1
> 
> 时间：2013-01-30T20:18:40.857
> 
> 标签：php, magento, jquery, magento-1.7, checkout

自 3 天以来一直在努力解决这个问题。

当我在 Windows (WAMP) 中测试应用程序时，一切正常。但是当我在 Linux 中部署相同时，计费继续按钮不起作用。

当我输入详细信息后单击“继续”时，我在萤火虫中看到

[http://www.domain.com/checkout/onepage/saveBilling/](http://www.domain.com/checkout/onepage/saveBilling/) 200 OK

并且它保持在同一页面上......

然后，当我签入 apache error_log 时，我看到以下错误：

[错误] 文件不存在：/home/docs/public_html/checkout，引用者：http: [//www.domain.com/checkout/onepage/](http://www.domain.com/checkout/onepage/)

我不知道它为什么要去 /home/docs/public_html/checkout ???

我是否处于正确的调试方式？你能帮我解决这个问题吗....谢谢和问候ecomse

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T20:31:54.323

在帐单地址步骤中单击“继续”时，页面会向`Mage_Checkout_OnepageController::saveBillingAction`. 该函数应该将表单数据保存到报价单中并返回一个包含属性“goto_section”的JSON对象，即“goto_section”：“shipping_method”。ajax 请求的成功函数会选择这个属性并显示下一步。

我建议您使用 firebug 调试器检查是否`POST /checkout/onepage/saveBilling`返回带有`goto_section`元素的有效 JSON 对象。如果不是 - saveBilling 函数一定有问题。使用 Xdebug 并在该函数的开头设置一个断点，以检查一切是否正确处理。

另一个可能的问题来源是第三方扩展重写了结帐路由配置。你们店里有可能的嫌疑人吗？尝试停用它们并测试是否可以解决问题。

操作返回的有效 JSON 字符串示例`saveBilling`：

```
{"goto_section":"shipping_method","update_section":{"name":"shipping-method","html":"    <dl class=\"sp-methods\">\r\n                <dt>Flat Rate<\/dt>\r\n        <dd>\r\n            <ul>\r\n                                            <li>\r\n                                                                   <span class=\"no-display\"><input name=\"shipping_method\" type=\"radio\" value=\"flatrate_flatrate\" id=\"s_method_flatrate_flatrate\" checked=\"checked\" \/><\/span>\r\n                                                <label for=\"s_method_flatrate_flatrate\">Fixed                                                                        <span class=\"price\">$5.00<\/span>                                                <\/label>\r\n                                   <\/li>\r\n                        <\/ul>\r\n        <\/dd>\r\n        <\/dl>\r\n<script type=\"text\/javascript\">\r\n\/\/<![CDATA[\r\n            var shippingCodePrice = {'flatrate_flatrate':5};\r\n    \r\n    $$('input[type=\"radio\"][name=\"shipping_method\"]').each(function(el){\r\n        Event.observe(el, 'click', function(){\r\n            if (el.checked == true) {\r\n                var getShippingCode = el.getValue();\r\n                                    var newPrice = shippingCodePrice[getShippingCode];\r\n                    if (!lastPrice) {\r\n                        lastPrice = newPrice;\r\n                        quoteBaseGrandTotal += newPrice;\r\n                    }\r\n                    if (newPrice != lastPrice) {\r\n                        quoteBaseGrandTotal += (newPrice-lastPrice);\r\n                        lastPrice = newPrice;\r\n                    }\r\n                                checkQuoteBaseGrandTotal = quoteBaseGrandTotal;\r\n                return false;\r\n            }\r\n       });\r\n    });\r\n\/\/]]>\r\n<\/script>\r\n"},"allow_sections":["shipping"],"duplicateBillingInfo":"true"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-03T20:57:46.680

我在本地工作时遇到了同样的问题。
启用了其他运输方式会导致此问题。
我已禁用 DHL、USPS、FedEx 和 UPS。
现在对我来说工作得很好。

我希望这有帮助。

# d3.js - D3 的秤无法正常工作

> ID：14612895
> 
> 赞同：3
> 
> 时间：2013-01-30T20:18:46.893
> 
> 标签：d3.js

好吧，我从 D3 开始，我正在尝试创建一个垂直条形图。

我真的不知道发生了什么，但有些事情对我来说并没有按预期工作（也许是因为我只是这件事的菜鸟）。

我正在使用线标尺，与轴配合得很好，但它错误地计算了条形的高度，例如不显示较高的值（因为结果的值较低）。

我已经使用 d3.max 来确定范围。我真的不明白发生了什么。

```
var yScaleLeft = d3.scale.linear()
    .domain([0, d3.max(stats)])
    .range([realHeight, 0]);

.attr("height", function(d) {
    return yScaleLeft(d);
}); 
```

这是代码： http: [//jsfiddle.net/aKhhb/](http://jsfiddle.net/aKhhb/)看看*** Scales ***和**// 统计栏**

（忘记条的x-alignment，我稍后会看到，我想正确设置它的高度）

非常感谢！Y saludos desde 智利 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:36:43.610

问题是您的输入和输出范围是镜像的——也就是说，最大的输入值映射到最小的输出值。`y`这很好，但是在计算和`height`属性时需要将其考虑在内。本质上，您将两者的计算都颠倒了。

[在这里](http://jsfiddle.net/aKhhb/3/)固定小提琴。我还通过将边距和条形宽度的一半添加到计算的 x 位置来固定 x 轴。哦，你在计算时不需要`parseInt()`，只有当你真正想从字符串中解析一个整数时。

# vba - VBA Excel 查找

> ID：14612897
> 
> 赞同：1
> 
> 时间：2013-01-30T20:18:54.197
> 
> 标签：vba, excel

我需要在 Excel 中使用 VBA 来查找完全匹配的帮助。这是我的对象 7 问题。

目标 - 批量处理查找和替换单词。

这是我试图自动化的例行任务。该任务涉及查找术语，然后用替代词替换它们。例如，如果要找到的术语是“microsoft”，我希望将其替换为“Company”。

虽然大多数代码都在工作，但限制是 --> 如果要找到两个单词，例如 1\. Gold 2\. Golden，然后将“gold”替换为“metal”，将 gold 替换为“矿物”，这就是发生的情况。如果代码在任何地方找到Golden，然后首先替换gold这个词，最终产品看起来像这样。Metalen。有人可以帮忙吗？

```
Dim wksheet As Worksheet
Dim wkbook As Workbook
Dim fo_filesys As New Scripting.FileSystemObject
Dim RegExpObject As Object

Private Sub cmd_Start_Click()
    Dim lsz_dest_path As String
    Dim lsz_extn_to_use As String
    Dim lsz_filename As String

    Dim li_rowtoread As Integer

    Application.DisplayAlerts = False
    Application.ScreenUpdating = False

    lsz_dest_path = VBA.Strings.Trim(Cells(1, 6))
    lsz_extn_to_use = VBA.Strings.Trim(Cells(2, 6))

    Set RegExpObject = CreateObject("VBScript.RegExp")

    RegExpObject.IgnoreCase = True
    RegExpObject.Global = True

    lsz_filename = Dir(lsz_dest_path & "\" & lsz_extn_to_use)
    Do While lsz_filename <> ""
        Application.StatusBar = "Scrubbing " & lsz_filename
        Set wkbook = Workbooks.Open(lsz_dest_path & "\" & lsz_filename)
        For Each wksheet In wkbook.Worksheets
            wksheet.Activate
            li_rowtoread = 2
            Do While Cells(li_rowtoread, 1) <> ""
                user_process_file Cells(li_rowtoread, 1), Cells(li_rowtoread, 2), lsz_filename
                li_rowtoread = li_rowtoread + 1
                DoEvents
            Loop
        Next wksheet
        wkbook.Close True
        lsz_filename = Dir
    Loop
    Application.StatusBar = ""
End Sub

Sub user_process_file(lsz_searh_str As String, lsz_replace_str As String, filename As String)
    Dim myRange As Range
    Dim lo_tstream As TextStream
    Dim lo_reader_tstream As TextStream
    Dim lsz_file As String
    Dim lb_replaced As Boolean

    If fo_filesys.FileExists(filename & ".log") Then
        Set lo_reader_tstream = fo_filesys.OpenTextFile(filename & ".log", ForReading)
        lsz_file = lo_reader_tstream.ReadAll
        lo_reader_tstream.Close
    End If
    If lsz_searh_str = "RRD" Then
    '    MsgBox "Here"
    End If
    Set myRange = wksheet.Cells

    myRange.Cells.Find(What:="", After:=ActiveCell, lookat:=xlPart).Activate
    'myRange.Replace What:=lsz_searh_str, Replacement:=lsz_replace_str, LookAt:=xlWorkbook, MatchCase:=False, searchorder:=xlByRows ', LookIn:=xlFormulas

    With myRange
    Set c = .Find(lsz_searh_str, LookIn:=xlValues, lookat:=xlPart)
    If Not c Is Nothing Then
        firstAddress = c.Address
        Do
                c.Value = CustomReplace(c.Value, lsz_searh_str, lsz_replace_str)

            Set c = .FindNext(c)
        Loop While Not c Is Nothing And c.Address <> firstAddress
    End If
    End With

    Set lo_tstream = fo_filesys.OpenTextFile(filename & ".log", ForAppending, True)
    lb_replaced = myRange.Replace(What:=lsz_searh_str, Replacement:=lsz_replace_str, lookat:=xlWhole, MatchCase:=True, searchorder:=xlByRows)

    If lb_replaced = True Then
        lo_tstream.WriteLine lsz_replace_str
        lo_tstream.Close
    End If

End Sub

Function user_eval(lookfor As String, loc_data As String) As Boolean
    Dim lsz_val_at_loc As String

    If InStr(1, loc_data, lookfor) = 1 Then
        user_eval = True
    Else
        user_eval = False
    End If

End Function

Function CustomReplace(OriginalString As String, FindString As String, ReplaceString As String)

    RegExpObject.Pattern = "[^a-zA-Z0-9]*" & FindString & "[^a-zA-Z0-9]*"
    CustomReplace = RegExpObject.Replace(OriginalString, ReplaceString)

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T13:59:22.540

我没有添加评论的权限，所以我只能回答：

您的正则表达式查找字符串`[^a-zA-Z0-9]*`和`[^a-zA-Z0-9]*`. 尝试使用`\bgold\w+\b`to 匹配以 gold 开头的单词并`\bgold\b`精确匹配 gold。

虽然我回答晚了，但它可能会帮助有类似问题的人......

# c# - 是否可以使用 C# 中的索引来引用类成员变量？

> ID：14612901
> 
> 赞同：4
> 
> 时间：2013-01-30T20:19:03.107
> 
> 标签：c#, class, variables, indexing, member

假设我有这样的课程：

```
class Person
{
    public string name;
    public string address;
    public string city;
    public string state;
    public string zip;
} 
```

我正在数据库上执行数据下降：

```
Select Name, Address, City, State, Zip
FROM Persons_Tbl 
```

目前，我将数据存储在这样的类中：

```
// Person class and SqlDataReader have been instantiated.

while (reader.Read())
{
    p.name = reader[0].ToString();
    p.address = reader[1].ToString();
    p.city = reader[2].ToString();
    p.state = reader[3].ToString();
    p.zip = reader[4].ToString();
} 
```

这只是一个例子。实际上，我有更多的列要检索。我不想为每一列数据下降写一行，而是希望通过索引使代码更小并循环。这可以使用 reader 对象，因为我可以通过索引检索列。

但是，是否可以以相同的方式索引类成员变量？这是重写的while循环，以更好地解释我的要求：

```
// pseudocode!
while (reader.Read())
{
    for (int index = 0; index < 5; index++)
    {
        index of p member variables (i.e. name, address) = reader[index].ToString();   
    }
} 
```

是否可以以这种方式操作类成员变量？或者，我必须创建一个数组类型的成员变量吗？我更喜欢写出 Person 类的每个成员变量，因为它看起来更简洁且更易于阅读。

非常感谢，提前。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T20:22:36.033

是的，你可以做这样的事情。

例子：

```
class Person
{
    public string name;
    public string address;
    public string city;
    public string state;
    public string zip;

    public string this[int index] { //SPECIAL PROPERTY INDEXERS
        get {
           if(index == 0)
              return name;
           else if(index == 1)
              return address;
           ...
        }
        set {
           if(index == 0)
              name = value;
           else if(index == 1)
              address = value;
           ...
        }
    }
} 
```

您在此处使用的称为[索引](http://msdn.microsoft.com/en-us/library/6x16t2tx%28v=vs.110%29.aspx)器`C#`。

之后可以像这样使用它：

```
Person person = new Person();
person[0] = "James Bond"; //SET NAME
person[1] = "London";     //SET ADDRESS
..... 
```

即使考虑到这可能是解决此问题的原始方法，我也会首先考虑重新构建代码以避免此类解决方案的可能方法。

# java - 无法重新安装崩溃的 Sony SmartWatch Control

> ID：14612905
> 
> 赞同：6
> 
> 时间：2013-01-30T20:19:18.207
> 
> 标签：java, android, sony, sony-smartwatch, android-broadcast

我希望这不是通用的，但我正在为 Sony SmartWatch 开发一个应用程序。每当我犯了一个错误，比如允许空指针异常。我无法让我的应用重新启动。就好像它永远处于崩溃状态一样。更糟糕的是，我还停止通过 Logcat 接收与应用程序相关的消息。当我卸载并重新安装应用程序时，它没有在手机上的 SmartWatch 应用程序中列出。就像它不会注册一样。这很难解决，因为此时我没有收到任何日志消息。我唯一能做的就是卸载应用程序。重启我的手机。然后重新安装应用程序。那时它恢复正常，我可以再次开始编写代码。这让我想到了我的问题。有没有更好的方法来重新注册控件？这会发生在最终用户身上吗？如果应用程序崩溃，他们需要卸载，

一些细节（名称已更改以保护无辜者）：

我创建了一个广播接收器，并在我的 mainfest 中将其设置为收听这些广播。

```
 <receiver android:name=".MyExtensionReceiver" >
        <intent-filter>
             <!-- Receiver intents -->
            <action android:name="com.sonyericsson.extras.liveware.aef.registration.EXTENSION_REGISTER_REQUEST" />
            <action android:name="com.sonyericsson.extras.liveware.aef.registration.ACCESSORY_CONNECTION" />

            <!-- Control intents -->
            <action android:name="com.sonyericsson.extras.aef.control.START" />
            <action android:name="com.sonyericsson.extras.aef.control.STOP" />
            <action android:name="com.sonyericsson.extras.aef.control.PAUSE" />
            <action android:name="com.sonyericsson.extras.aef.control.RESUME" />
            <action android:name="com.sonyericsson.extras.aef.control.ERROR" />
            <action android:name="com.sonyericsson.extras.aef.control.TOUCH_EVENT" />
            <action android:name="com.sonyericsson.extras.aef.control.SWIPE_EVENT" />

        </intent-filter> 
```

MyExtensionReceiver 的代码：

```
 public class MyExtensionReceiver extends BroadcastReceiver {

public MyExtensionReceiver() {
    super();
    Log.d("mytag", "MyExtensionReceiver Loaded");
    Dbg.setLogTag("mytag");
}

@Override
public void onReceive(Context context, Intent intent) {
    Log.d("mytag", "onReceive: " + intent.getAction());
    intent.setClass(context, MyExtensionReceiver.class);
    context.startService(intent);
} 
```

}

即使我的应用程序崩溃了，我仍然应该在调用 onReceive 时收到一条日志消息。就像永远不会发送 EXTENSION_REGISTER_REQUEST 广播一样。我只是一遍又一遍地卸载重新启动和重新安装。最终，SmartConnect 应用程序找到了该应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T22:22:46.980

刚碰到这个问题，给点灰！！要解决此问题，只需使用字符串创建一个新意图并使用上下文启动它。

```
Intent intent = new Intent("MY.PACKAGE.NAME.MyExtensionReceiver");
context.startService(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:32:34.543

它似乎与 BroadcastReceiver 没有任何关系。如果不使用一个，我也会遇到同样烦人的问题。我需要重新启动手机才能让事情再次正常运行，因为禁用/启用该应用程序都没有帮助，也没有杀死 SmartWatch 手机应用程序（因为我看不到其他方法可以重新启动它）。

我也很感谢索尼在这件事上的一些帮助。

# dart - How to optionally pass an optional parameter?

> ID：14612914
> 
> 赞同：13
> 
> 时间：2013-01-30T20:19:48.313
> 
> 标签：dart

Is there an easier (and cleaner) way to pass an optional parameter from one function to another than doing this:

```
void optional1({num x, num y}) {
  if (?x && ?y) {
    optional2(x: x, y: y);
  } else if (?x) {
    optional2(x: x);
  } else if (?y) {
    optional2(y: y);
  } else {
    optional2();
  }
}

void optional2({num x : 1, num y : 1}) {
   ...
} 
```

The one I actually want to call is:

```
void drawImage(canvas_OR_image_OR_video, num sx_OR_x, num sy_OR_y, [num sw_OR_width, num height_OR_sh, num dx, num dy, num dw, num dh]) 
```

At least I don't get a combinatorial explosion for positional optional parameters but I'd still like to have something simpler than lot's of if-else.

I have some code that uses the solution proposed in the first answer (propagating default values of named optional parameters, but I lose the ability to check whether or not the value was provided by the initial caller).

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T19:08:14.837

I've been burned by this corner of Dart several times. My current guidelines, which I encourage anyone to adopt are:

1.  **Do not use default values.** Instead, use the implicit default of `null` and check for that in the body of the function. Document what value will be used if `null` is passed.
2.  **Do not use the `?` argument test operator.** Instead, just test for `null`.

This makes not passing an argument and explicitly passing `null` exactly equivalent, which means you can always forward by explicitly passing an argument.

So the above would become:

```
void optional1({num x, num y}) {
  optional2(x: x, y: y);
}

/// [x] and [y] default to `1` if not passed.
void optional2({num x, num y}) {
   if (x == null) x = 1;
   if (y == null) y = 1;
   ...
} 
```

I think this pattern is cleaner and easier to maintain that using default values and avoids the nasty combinatorial explosion when you need forward. It also avoids duplicating default values when you override a method or implement an interface with optional parameters.

However, there is one corner of the Dart world where this doesn't work: the DOM. The `?` operator was designed specifically to address the fact that there are some JavaScript DOM methods where passing `null` is different from passing `undefined` (i.e. not passing anything).

If you're trying to forward to a DOM method in Dart that internally uses `?` then you will have to deal with the combinatorial explosion. I personally hope we can just fix those APIs.

But if you're just writing your own Dart code, I really encourage you to avoid default values and `?` entirely. Your users will thank you for it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:00:39.160

Would positional paremeters be an option four your case?

```
void optional([num x = 1, num y = 1]) {

} 
```

Since you call `optional2` with default parameters anyway, this seems like a good replacement without knowing, what the purpose of the function is

# javascript - 在滑动时阻止 jquery 函数

> ID：14612915
> 
> 赞同：0
> 
> 时间：2013-01-30T20:19:49.000
> 
> 标签：javascript, jquery, html, onclick

我有一个包含 6 个选项的菜单，每个选项都应该在其他地方显示一个带有一些文本的 div。我在此菜单中添加了 jQuery 功能，当我单击任何选项时，正确的 div 会向下滑动，而任何其他 div 会再次向上滑动。

问题是，如果有人在不同的项目上点击得非常快，就会同时打开多个 div。我该如何控制它，比如在 div 加载/卸载时禁用该功能？

它是简单的 HTML，没有 PHP 页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:20:43.273

假设您正在使用`animate()`或正在使用`queue()`您可以[`stop()`](http://api.jquery.com/stop)用来结束动画。

在没有看到您的代码或 HTML 的情况下，我可以提供尽可能多的帮助。

一个潜在的例子：

```
<ul class="my-collapsible-content">
  <li>Some text</li>
  <li>Some other text</li>
  <li>Some more text</li>
</ul>

$('.my-collapsible-content').on('click', '>li', function(){
    $(this).siblings().stop(true, true); //stops animation and jumps to 'final' state immediately
    $(this).animate(.....);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:25:17.443

您可以查看[http://api.jquery.com/animated-selector/](http://api.jquery.com/animated-selector/)以查看是否正在制作动画，如果是，则返回；

例子：

```
$("#clickme").click(function(){
    if ($(".slider:animated")) return;
    //DO YOUR ANIMATION CODE
}); 
```

您也可以尝试添加一个全局变量，例如“var 动画”。启动动画时将其设置为 true。然后在动画完成时将其设置回 false 。

然后在您的点击功能中只允许点击 if(animating == false)

```
var animating;

$('#clickme').click(function() {
    if(!animating){
        animating = true;
        $('#book').animate({
            opacity: 0.25,
            left: '+=50',
            height: 'toggle'
        }, 5000, function() {
            // Animation complete.
            animating = false;
        });
    }
}); 
```

# ios - UIGestureRecognizer 导致循环保留？

> ID：14612916
> 
> 赞同：17
> 
> 时间：2013-01-30T20:19:49.290
> 
> 标签：ios, cocoa-touch, uigesturerecognizer

我在想，如果您`self`按照手势识别器的 `initWithTarget:action:`方法分配目标，您会导致循环保留吗？由于`self`会将识别器保留在中`self.gestureRecognizers`，并且手势识别器也可能将自身保留在`initWithTarget:action`.

以下是解决方案吗？

```
__weak VRDrawer* weakSelf = self;
UIGestureRecognizer* tapRec = [[UITapGestureRecognizer alloc] initWithTarget:weakSelf
                                                                      action:@selector(handleTap:)]; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-02-05T13:13:01.557

我完全理解在缺乏文档的情况下确认某些事情会让人感到不安。需要注意的重要一点是，按照十多年的惯例，目标-行动关系永远不会`strong`。这是[相关文档](https://developer.apple.com/library/ios/documentation/general/conceptual/CocoaEncyclopedia/Target-Action/Target-Action.html)。注意上面写着的部分：

> 控制对象不（也不应该）保留它们的目标。

“保留……”以 MRC 的说法“持有`strong`对……的引用”

鉴于这是此类交互的文档化约定，可以安全地假设，如果`UIGestureRecognizer`的 target-action 实现*确实*保留了对象，那么该异常会很奇怪，以至于它会出现在其文档中。

* * *

PS您不必担心有关在内存管理环境中控制保留目标的注释。“内存管理”是指 Cocoa 中的（现已弃用的）垃圾收集。MRC 或 ARC 都不是内存管理的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T20:32:29.973

```
UIGestureRecognizer* tapRec = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)]; 
```

这不保留自我。也会[在文档中注明](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009279-CH1-SW1)

您需要向视图添加识别器。该视图将保留识别器。没有保留周期。

```
[aView addGestureRecognizer:tapRec]; 
```

[`addGestureRecognizer:`文档](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW103)确实提到，视图保留了识别器

* * *

当您使用 ARC 时，这就是您所要做的

```
UIGestureRecognizer* tapRec = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
[aView addGestureRecognizer:tapRec]; 
```

# javascript - 找出两个日期之间的差异

> ID：14612919
> 
> 赞同：4
> 
> 时间：2013-01-30T20:20:03.333
> 
> 标签：javascript, date

我怎样才能找到这种格式的两个日期之间的差异年，月（如果 > 12 年++，则必须是 < 12），天（如果 > 30 则必须是 < 30 然后是月++），小时（如果 > 24 则必须是 < 24天++)

我不会有这样的格式

第 3 年，第 34 个月（我将计算这 34 年），dasy 345（也是这个值）

我有这个代码

[http://jsfiddle.net/AQSWu/](http://jsfiddle.net/AQSWu/)

```
var currentTo  = new Date(2015, 6, 1),
    currentFrom  = new Date(2013,11,1), 
    year         = currentTo.getFullYear() - currentFrom.getFullYear(),
                m1  = currentTo.getMonth() + 1,
                m2  = currentFrom.getMonth() + 1,
                month   = m1 <= m2 ? (12 - m2) + m1 : m1 - m2;

alert("From: " + currentFrom);
alert("To :" + currentTo);

            if (currentTo.getDate() < currentFrom.getDate()) {
                month = month - 1;
            }

            if (month >= 12){ month = 0; }

alert(year + ' ' + month); 
```

但我不知道如何计算天数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:34:35.590

不要分别减去年、月、日等，而只是获取日期之间的差异（以毫秒为单位），然后以您想要的格式（或单位）输出：

```
var currentTo  = new Date(2015, 6, 1),
    currentFrom  = new Date(2013,11,1),
    difference = currentTo - currentFrom; // number conversion is implicit
var hours = difference / 3600000; // ms -> h
    // now do your maths 
```

# twitter-bootstrap - Twitter 引导缩略图偏移量

> ID：14612925
> 
> 赞同：1
> 
> 时间：2013-01-30T20:20:30.387
> 
> 标签：twitter-bootstrap, twitter-bootstrap-rails

我遇到了缩略图无法正确折叠的问题，代码： [https ://gist.github.com/4676514](https://gist.github.com/4676514)

不知道为什么第 5 个缩略图向右折叠，为什么它不会开始新的一行？

![截屏](../Images/7d527cbe871a5c7617b2a1aa834345df.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:06:01.990

也许尝试复制他们在 Bootstrap 示例中使用的布局，看看是否可行？

[http://twitter.github.com/bootstrap/components.html#thumbnails](http://twitter.github.com/bootstrap/components.html#thumbnails)

```
<div class="row">
  <ul class="thumbnails">
    <li class="span3">
      <img src="">
      <div class="caption">TEXT</div>
    </li>
    <li class="span3">
      <img src="">
      <div class="caption">TEXT</div>
    </li>
    <li class="span3">
      <img src="">
      <div class="caption">TEXT</div>
    </li>
    <li class="span3">
      <img src="">
      <div class="caption">TEXT</div>
    </li>
  </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:29:25.493

这是因为您正在尝试将所有图像图块加载到一个之下`<div class="row">`

而不是这样做，为每个图像行创建一个单独的行。

第一排：

```
<div class ="row">
  <div class="span3">image1</div>
  <div class="span3">image2</div>
  <div class="span3">image3</div>
</div> 
```

对于第 2 行：

```
<div class ="row">
  <div class="span3">image4</div>
  <div class="span3">image5</div>
  <div class="span3">image6</div>
</div> 
```

希望能帮助到你

# java - SWT - 有没有办法显示正在运行的线程

> ID：14612926
> 
> 赞同：0
> 
> 时间：2013-01-30T20:20:33.230
> 
> 标签：java, multithreading, swt

> **可能重复：**
> [获取当前在 Java 中运行的所有线程的列表](https://stackoverflow.com/questions/1323408/get-a-list-of-all-threads-currently-running-in-java)

这仅用于测试目的 - 不是生产 UI

是否可以在我的应用程序的基本对话框上设置一个按钮，当点击时系统打印当前正在运行的线程？

像下面的东西

```
 Button showThreadsButton = new Button(composite, SWT.PUSH);
   pdfButton.setText("Show Running Threads");
   pdfButton.addSelectionListener(new SelectionAdapter() {
       public void widgetSelected(SelectionEvent e) {
          String test = Display.getThreads().toString();
          System.out.println("Running Threads " + test + "\n);
       }
   }); 
```

我不确定我的所有线程是否都按应有的方式处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:26:56.500

您可以从命令行使用 jstack 转储线程。然后您就不必担心它会泄漏到您的生产代码中。

jstack 是 jvm 的一部分。

# delphi - 将字符串和字节写入 MemoryStream

> ID：14612927
> 
> 赞同：4
> 
> 时间：2013-01-30T20:20:34.250
> 
> 标签：delphi

如何在 Delphi 中将“Hello World”字符串、clrf 和一些随机的 10 字节写入内存流？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T20:33:05.243

我会考虑使用二进制编写器来完成这项任务。这是一个更高级别的类，负责处理将数据导入流的细节。

```
var
  Stream: TMemoryStream;
  Writer: TBinaryWriter;
  Bytes: TBytes;
....
Stream := TMemoryStream.Create;
try
  Writer := TBinaryWriter.Create(Stream);
  try
    Writer.Write(TEncoding.UTF8.GetBytes('Hello World'+sLineBreak));
    //if you prefer, use a different encoding for your text
    Bytes := GetRandomBytes(10);//I assume you can write this
    Writer.Write(Bytes);
  finally
    Writer.Free;
  end;
finally
  Stream.Free;
end; 
```

我希望您的真正问题比这更多。使用 writer 类的好处是您可以将自己与向流中喷射数据的血腥细节隔离开来。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T20:27:04.663

```
var
  ms: TMemoryStream;
  s: String;
  b: array[0..9] of Byte;
  i: Integer;
begin
  ms := TMemoryStream.Create;
  try
    s := 'Hello World' + #13#10;
    ms.Write(s[1], Length(s) * SizeOf(Char));
    for i := 0 to 9 do
      b[i] := Random(256);
    ms.Write(b[0], 10);
    // ms.SaveToFile('C:\temp\test.txt');

    {
    ms.Memory can be used for free access e.g.
    // build an empty buffer 5 characters
    s := '';
    SetLength(s,5);
    ms.Position := 5;
    // the position after which we want to copy
    i := Length('Hallo ')*SizeOf(Char);
    // copy bytes to string
    Move(TByteArray(ms.Memory^)[i],s[1],Length(s) * SizeOf(Char));
    Showmessage(s); // Display's "World"
    }

  finally
    ms.Free;
  end;    
end; 
```

# java - 如何过滤特定目录并在java中复制其余文件夹

> ID：14612929
> 
> 赞同：0
> 
> 时间：2013-01-30T20:20:40.890
> 
> 标签：java

我正在尝试复制工作正常的文件夹和文件，但我需要有关如何过滤单个文件夹和复制其余文件夹的帮助。例如，我在（C:\vehicle\carsfolder 和 C:\vehicle\truckfolder）中有汽车文件夹和卡车文件夹等目录。当我使用下面的代码时，它会同时复制汽车文件夹和卡车文件夹，但我只想复制汽车文件夹。我怎样才能做到这一点。非常感谢您的帮助。（使用 Swing 和 Java 1.6）

```
 class CopyTask extends SwingWorker<Void, Integer>
                 {
                   private File source;
                   private File target;
                   private long totalBytes = 0;
                   private long copiedBytes = 0;
                   public CopyTask(File src, File dest)
                 {
                    this.source = src;
                    this.target = dest;
                    progressAll.setValue(0);

                  }
         @Override
         public Void doInBackground() throws Exception
                 {

                    ta.append("Retrieving info ... ");  //append to TextArea
                    retrieveTotalBytes(source);
                    ta.append("Done!\n");
                    copyFiles(source, target);
                    return null;
                 }
         @Override
       public void process(List<Integer> chunks)
              {
                for(int i : chunks)
              {
                         }
        }
         @Override
         public void done()
                    {
                      setProgress(100);
                      }
        private void retrieveTotalBytes(File sourceFile)
                    {
                    try
                    {
                      File[] files = sourceFile.listFiles();
                      for(File file : files)
                    {
                     if(file.isDirectory()) retrieveTotalBytes(file);
                     else totalBytes += file.length();
                     }
                  }
                 catch(Exception ee)
                   {
                                            }
               }
    private void copyFiles(File sourceFile, File targetFile) throws IOException
                   {
                     if(sourceFile.isDirectory())
                   {
         try{
                if(!targetFile.exists()) targetFile.mkdirs();
                String[] filePaths = sourceFile.list();
                for(String filePath : filePaths)
               {
                File srcFile = new File(sourceFile, filePath);
                File destFile = new File(targetFile, filePath);
                copyFiles(srcFile, destFile);
               }
          }
        catch(Exception ie)
              {
                                   }
         }
    else
             {
                try
                     {
                        ta.append("Copying " + sourceFile.getAbsolutePath() + " to " + targetFile.getAbsolutePath() );
                        bis = new BufferedInputStream(new FileInputStream(sourceFile));
                        bos = new BufferedOutputStream(new FileOutputStream(targetFile));
                        long fileBytes = sourceFile.length();
                        long soFar = 0;
                        int theByte;
             while((theByte = bis.read()) != -1)
                       {
                         bos.write(theByte);
                         setProgress((int) (copiedBytes++ * 100 / totalBytes));
                         publish((int) (soFar++ * 100 / fileBytes));
                       }
                          bis.close();
                          bos.close();
                          publish(100);
                          ta.append(" Done!\n");
                      }
           catch(Exception excep)
                            {
                              setProgress(0);
                              bos.flush();
                              bis.close();
                              bos.close();

                            }
          finally{
                    try {
                          bos.flush();
                        } 
                    catch (Exception e) {
                         }
                    try {
                            bis.close();
                        }
                    catch (Exception e) {
                        }
                   try {
                       bos.close();
                       } 
                   catch (Exception e) {
                    }
                }
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:35:35.503

也许您可以引入一个正则表达式或正则表达式列表来指定要排除的文件和目录？

例如，要排除卡车文件夹，请使用“排除”正则表达式，如`"C:\\vehicle\\truckfolder.*"`.

然后，在您的代码中，在复制任何内容之前，请检查以确保源文件的绝对路径与排除正则表达式不匹配。

# javascript - jCanvas 上的 globalCompositeOperation

> ID：14612931
> 
> 赞同：2
> 
> 时间：2013-01-30T20:20:44.087
> 
> 标签：javascript, jquery, canvas, jcanvas, globalcompositeoperation

如何将 globalCompositeOperation（或任何其他可以给我“[乘](http://henrik.nyh.se/2008/09/photoshop-multiply/)”颜色操作的插件）集成到[jCanvas](http://calebevans.me/projects/jcanvas/index.php) jQuery 插件中？

```
// How do I get this working? //
var ctx = document.getElementById('canvas').getContext('2d');
ctx.globalCompositeOperation = 'darker';

// With this - //
$("canvas").drawArc({
  fillStyle: "#c7302a",
  x: 100, y: 100,
  radius: 50
});

$("canvas").drawArc({
  fillStyle: "#395797",
  x: 170, y: 100,
  radius: 50,
  opacity: 1
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T18:03:08.783

作为记录，jCanvas 有一个`compositing`属性，它的值映射到`ctx.globalCompositeOperation`.

```
$("canvas").drawArc({
  fillStyle: "#c7302a",
  x: 100, y: 100,
  radius: 50,
  compositing: 'darker'
}); 
```

-迦勒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:11:45.993

好的，我解决了。在挣扎了几个小时之后，它太简单了：我使用了[上下文搅拌器](https://github.com/Phrogz/context-blender)插件。

JS代码：

```
$("#canvasReal").drawArc({ // Draw on the real canvas
  fillStyle: "#c7302a",
  x: 100, y: 100,
  radius: 50
});

$("#canvasOff").drawArc({ // Draw on the off screen canvas
  fillStyle: "#395797",
  x: 150, y: 100,
  radius: 50
});

// Blend off-screen canvas onto the real canvas
    var over = canvasOff.getContext('2d'); 
    var under = canvasReal.getContext('2d');
    over.blendOnto(under,'multiply'); 
```

HTML 代码：

```
<canvas width="500" height="250" id="canvasReal"></canvas>
<canvas width="500" height="250"id="canvasOff" style="display:none;"></canvas> 
```

# c++ - const 引用默认值

> ID：14612933
> 
> 赞同：21
> 
> 时间：2013-01-30T20:20:52.423
> 
> 标签：c++, reference, constants, default-value

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-30T20:22:25.737

You can't take a non-const reference to a temporary like foo2 does.

Notice that this isn't specifically default parameters. You get the same error for function variables: [http://ideone.com/g7Tf7L](http://ideone.com/g7Tf7L)

```
#include <string>
using std::string;

#include <iostream>
using std::cout; using std::endl;

int main()
{
    string s1        = string("s1"); // OK, copy it
    const string& s2 = string("s2"); // OK, const reference to it
    string& s3       = string("s3"); // ERROR! non-const reference not allowed!

    cout
            << s1 << ", "
            << s2 << ", "
            << s3 << endl;
    return 0;
} 
```

When you take a const reference to a temporary, the lifetime of the temporary is extended to the lifetime of the reference (§12.2, quoted from my copy of C++11 draft n3337):

> There are two contexts in which temporaries are destroyed at a different point than the end of the fullexpression.
> 
> ...
> 
> The second context is when a reference is bound to a temporary. The temporary to which the reference is bound or the temporary that is the complete object of a subobject to which the reference is bound persists for the lifetime of the reference except:
> 
> *   A temporary bound to a reference member in a constructor’s ctor-initializer (12.6.2) persists until the constructor exits.
> *   A temporary bound to a reference parameter in a function call (5.2.2) persists until the completion of the full-expression containing the call.
> *   The lifetime of a temporary bound to the returned value in a function return statement (6.6.3) is not extended; the temporary is destroyed at the end of the full-expression in the return statement.
> *   A temporary bound to a reference in a new-initializer (5.3.4) persists until the completion of the full-expression containing the new-initializer.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T20:26:10.950

It may come as a surprise to you, but you *can* bind the value of a temporary expression to a *constant* reference, and the lifetime of the expression is extended to that of the reference. But you cannot do this with a non-constant (lvalue) reference.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:25:38.343

The declarations of `foo3` and `foo4` are legal because the argument to those functions is not a reference.

The declaration of `foo2` is illegal because you can't bind a non-const reference to a temporary.

So why is the declaration of `foo1` legal? It's that very important `const` qualifier that makes this declaration legal.

# php - Eclipse 不在 Mac OSX 10.8.2 上运行 Xdebug 或 Zend 调试器？

> ID：14612936
> 
> 赞同：0
> 
> 时间：2013-01-30T20:20:55.273
> 
> 标签：php, eclipse, xdebug, zend-debugger

我能够成功安装 Zend 和 Xdebugger。由 Phpinfo 和 Eclipse 验证验证 Zend 调试成功安装。虽然每当我从 Eclipse 运行调试时

```
Xdebug it hangs at 57%` 
```

对于 Zend 调试器

```
the browser keeps processing/busy but nothing happens 
```

不确定是什么导致了这个 -> 防火墙问题？-> Mac 中没有 Selinux，所以不确定是否是权限问题

任何线索都会有所帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:58:13.480

这似乎是调试的错误配置。我会尽力帮助您展示我的工作配置。

这是我的 xdebug 的 php.ini 部分。

```
zend_extension="/usr/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so"
xdebug.remote_enable=On
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9060
xdebug.remote_handler="dbgp"
xdebug.remote_autostart=On 
```

请务必注意参数 debug.remote_host。如果此处不允许您的客户端，您将停留在 57% 上。这里的值是你运行 eclipse 的机器的 IP。如果您在同一台机器上运行 apache/php 和 eclipse，则 localhost IP 应该可以工作。

使 zend_extension 参数适应您的世界。

您可以停止在 57% 的其他原因是网站没有运行。如果站点正在运行，Apache/PHP 只会发送 xdebug 元数据。例如，如果您遇到内部错误，您也会卡在 57% 上。Eclipse 在 57% 处停止等待 xdebug 会话。您必须确保 apache/php 启动了调试会话。

确保 Eclipse 上的调试配置使用正确的 PHP 服务器。如果您尝试在无效的 PHP 服务器或配置不正确的 PHP 服务器中运行 eclipse，您也会在 57% 上停止。因此，请查看调试配置上的 PHP 服务器参数。

您必须进行的其他重要审查是关于 eclipse 的 Xdebug 配置。port Debug port 字段必须填写与参数 xdebug.remote_port 相同的值。如果它们不同，您也将被困在 57% 中。

请让我知道它是否有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T14:49:36.243

对于 Xdebug，这可能是 Eclipse 中配置错误的路径映射。在 stackoverflow 上有 10 个与此相关的问题，在 google 上有 100 个点击量。请先检查那里。

# asp.net - 如何使运行在集群中的.NET 应用程序相互通信？

> ID：14612944
> 
> 赞同：0
> 
> 时间：2013-01-30T20:21:10.800
> 
> 标签：asp.net, .net, iis, cluster-computing, arr

我有一个在具有多台机器的 ARR 集群 (IIS) 中运行的 .NET Web 应用程序。

每台机器都必须在内存中为用户访问权限保留一个缓存。也就是说，当应用程序必须确定用户是否有权访问资源时，它会查询内存缓存以避免数据库访问（每个用户请求都有很多查询）。

问题是，在某些情况下，这个缓存必须失效。但是，由于有多台机器，当一个决定缓存必须失效时，它必须传播到其他机器。

解决此问题的最佳做法是什么？我们有一个在 IIS ARR 集群上运行的 ASP.NET MVC 3 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:24:00.073

[消息队列](http://en.wikipedia.org/wiki/Message_queue)是正常的解决方案。

您可以拥有一个由所有节点订阅的队列，当您需要使缓存无效时，您向队列发送消息 - 其他节点看到此消息并使他们的队列无效。

[MSMQ](http://en.wikipedia.org/wiki/Microsoft_Message_Queuing)是微软的消息队列，但是有很多第三方的。您可能想看看[nServiceBus](http://nservicebus.com/)作为替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:27:48.270

使所有与权限相关的缓存失效，或仅使缓存的相关部分失效（例如特定用户、特定角色等？）

无论如何，我正在考虑一些 pub/sub 模式，例如[http://redis.io/topics/pubsub](http://redis.io/topics/pubsub) - 应用程序订阅（sub）的服务器，应用程序可以通过发布请求缓存失效对所有订阅者的请求 (pub)

# python - python datetime.strptime AttributeError

> ID：14612948
> 
> 赞同：1
> 
> 时间：2013-01-30T20:21:17.127
> 
> 标签：python, datetime

```
import datetime

print datetime.strptime("00", "%y").year 
```

我希望能够将“00”传递给 datetime.strptime 并接收“2000”作为输出。但是，当我运行代码时，我不断收到此错误： AttributeError: 'module' object has no attribute 'strptime'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:25:04.037

`strptime`不是直接在[datetime](http://docs.python.org/2/library/datetime.html#module-datetime)模块级别找到的。它是datetime 模块中[datetime类型的类方法，所以：](http://docs.python.org/2/library/datetime.html#datetime-objects)

```
print datetime.datetime.strptime("00", "%y").year 
```

# solr - solr 术语组件不返回结果

> ID：14612953
> 
> 赞同：0
> 
> 时间：2013-01-30T20:21:28.890
> 
> 标签：solr, autocomplete

我正在尝试使用 solr 的 terms 组件进行自动完成，但没有返回任何结果。

我的查询：

```
/solr/terms?&terms.fl=autocomplete_field&wt=json&omitHeader=true 
```

我的架构：

```
<field name="autocomplete_field" type="text_tag" indexed="true" stored="true" required="false" multiValued="true" termVectors="true" />

<fieldType name="text_tag" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <!-- in this example, we will only use synonyms at query time
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    -->
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
  </analyzer>
</fieldType> 
```

我的结果：

```
{"terms":{"autocomplete_field":{}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:34:47.703

是否启用了术语组件。你能检查是否`terms`设置为true。

```
 <searchComponent name="termsComponent" class="solr.TermsComponent"/>

 <requestHandler name="/terms" class="solr.SearchHandler">
   <lst name="defaults">
     <bool name="terms">true</bool>
   </lst>
   <arr name="components">
     <str>termsComponent</str>
   </arr>
 </requestHandler> 
```

您也可以`terms=true`作为请求参数传递并检查。

# matlab - 从命令提示符向 MATLAB 图窗添加标头

> ID：14612955
> 
> 赞同：1
> 
> 时间：2013-01-30T20:21:34.430
> 
> 标签：matlab, matlab-figure

我有一个有几个子图的图。我正在尝试在打印时添加标题。我可以从打印预览中做到这一点，但我想对其进行编程，因为我的代码有很多数字。

```
figure('numbertitle','off','name','This is my window title',...
'PaperOrientation','landscape','PaperPosition',[0.25,0.25,10.5,7])

subplot(2,2,1)
plot(1:10)
title('Example subplot1')

subplot(2,2,2)
plot(10:20)
title('Example subplot2')

subplot(2,2,3)
plot(20:30)
title('Example subplot3')

subplot(2,2,4)
plot(30:40)
title('Example subplot4') 
```

我找到[了这个](http://www.mathworks.com/support/solutions/en/data/1-1PEPG8/index.html?product=ML&solution=1-1PEPG8)，但它似乎不起作用，我也不完全理解那里发生了什么。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:06:21.843

**您的链接中提到的解决方案实际上有效。** 通过 Show preview 对话框有一点问题，因为它覆盖了设置的标题。您可以避免打开对话框（无论如何都可能是您想要的）或之后更改标题以解决此问题。您始终可以使用以下命令检查当前磁头： `getappdata(gcf,'PrintHeaderHeaderSpec')`。

只需将此附加到您的代码即可打印标题：

```
%%change header
hs = getappdata(gcf,'PrintHeaderHeaderSpec');
if isempty(hs)
hs = struct('dateformat','none',...
'string','Test',...
'fontname','Times',...
'fontsize',12,... % in points
'fontweight','normal',...
'fontangle','normal',...
'margin',72); % in points
end

hs.string = 'Your Personal Header';
setappdata(gcf,'PrintHeaderHeaderSpec',hs);

%% print
print(gcf) 
```

您可能还想以不再需要人工交互的方式更改打印命令。

# html - 当我已经在使用背景时，将图像平铺在整个页面上

> ID：14612956
> 
> 赞同：2
> 
> 时间：2013-01-30T20:21:40.560
> 
> 标签：html, css, background

我已经设置了一些背景 div 来作为我正在制作的博客的主题。我使用 3 种颜色作为标题，灰色背景，我想为背景添加纹理。我有想要平铺的半透明图像，但我不确定完成这项工作的最佳方式。我不想`position: fixed;`在包含图像的 div 上，这样它会在你滚动时移动。

示例代码：http: [//jsfiddle.net/YPXmT/](http://jsfiddle.net/YPXmT/)

有没有办法在没有滚动条的情况下实现这一点？（注意，我不想去掉滚动条，因为内容可能需要滚动。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:41:11.420

从您的示例小提琴开始，您大部分时间都在那里。您所要做的就是制作您的 backgroundTexture div `height`，`width` `100%`而不是您使用的静态像素值：

```
#backtexture {
    position: absolute;
    overflow: hidden;
    width: 100%;
    height: 100%;
    background : url('http://static.tumblr.com/wyzt2fm/Hq8mhgfry/hp_asset_diagonalline.png');
} 
```

* * *

***更简单的更新：***
大多数时候简单是最好的。
您需要做的就是添加：

```
body{
    position: relative
} 
```

不要费心制作容器 div 并重新排列元素如下，只需使身体的位置相对应该为您解决这个问题。

* * *

***更新：（*** *使用上面的更新，为后代保留）*
根据下面的评论，上面的代码使窗口滚动到可见空间之外的任何内容都将不包括背景。这是因为 div 设置为`position: absolute`and`height/width: 100%`。div 的大小与可视空间的大小一致，但任何超出此范围的内容都会导致背景 div 看起来像是停止了。要解决这个问题，您只需要稍微调整一下您的 HTML 和 CSS。而不是上面的 CSS 使用：

```
#backtexture {
    width: 100%;
    height: 100%;
    background : url('http://static.tumblr.com/wyzt2fm/Hq8mhgfry/hp_asset_diagonalline.png');
} 
```

请注意，我们删除了`position:absolute`and `overflow:hidden`。接下来我们更改 HTML，使背景不仅仅是放置在页面上的空 div，而是用作页面上所有其他元素的容器：

```
<div id="backtexture">
        <div id="redtop"></div>
        <div id="orangetop"></div>
        <div id="yellowtop"></div>
        <div id="wrapper">
</div> 
```

那应该这样做。

分叉的小提琴：http: [//jsfiddle.net/digthedoug/pVxSq/](http://jsfiddle.net/digthedoug/pVxSq/)

# javascript - SyntaxError: missing ) 后 for 循环控制 (JSON)

> ID：14612960
> 
> 赞同：0
> 
> 时间：2013-01-30T20:21:54.647
> 
> 标签：javascript, json

下面是 JSON，我尝试遍历从 1 到 4 的数组，萤火虫返回错误

```
SyntaxError: missing ) after for-loop control
[Break On This Error]   

for( x in LGIntake.corpCodeOptions.marketSegment.1){

StartI...aseId=0 (line 675, col 50) 
```

* * *

```
LGIntake = {};
LGIntake.corpCodeOptions = {};
LGIntake.corpCodeOptions.marketSegment = {
"1":[["FEP","FEP"],["HA","HA"],["HWB","HWB"],["JG","JG"],["LG","LG"],
     ["MAC","MAC"],["NAC","NAC"],["NAL","NAL"],["NAP","NAP"],["NAU","NAU"]],
"2":[["ERS","ERS"],["FEP","FEP"],["HRP","HRP"],["LGC","LGC"],["LGL","LGL"],
     ["MGC","MGC"],["MGL","MGL"],["NAC","NAC"],["NAP","NAP"],["NPB","NPB"],
     ["NPH","NPH"],["NPI","NPI"],["NPP","NPP"],["NPR","NPR"],["NPS","NPS"],
     ["NRSG","NRSG"],["SRK","SRK"],["TAC","TAC"],["TCF","TCF"],["TCI","TCI"],
     ["THE","THE"],["TRS","TRS"]],
"3":[["AFG","AFG"],["ALI","ALI"],["APS","APS"],["FEP","FEP"],["HSC1","HSC1"],
     ["HSC2","HSC2"],["LAN","LAN"],["LGN","LGN"],["NAP","NAP"],["PAK","PAK"],
     ["PSA","PSA"],["RA","RA"],["RC","RC"]],
"4":[["COMA","COMA"],["FEP","FEP"],["LG","LG"],["NAC","NAC"],["NAP","NAP"],
     ["NRMM","NRMM"],["NRSG","NRSG"],["ORAA","ORAA"]]
}; 
```

和我的 javascript 代码

```
function initMarketSegment(corpCode){
    var corpCodeList = new Array();
    if(corpCode == "1"){
        for( x in LGIntake.corpCodeOptions.marketSegment.1){
            marketSegment.option[marketSegment.option.length] = new Option('LGIntake.corpCodeOptions.marketSegment.1[x]','LGIntake.corpCodeOptions.marketSegment.1[x]');
        }
    }
    else if(corpCode == "2"){
        for( x in LGIntake.corpCodeOptions.marketSegment.2){
            marketSegment.option[marketSegment.option.length] = new Option('LGIntake.corpCodeOptions.marketSegment.2[x]','LGIntake.corpCodeOptions.marketSegment.2[x]');
        }
    }
    else if(corpCode == "3"){
        for( x in LGIntake.corpCodeOptions.marketSegment.3){
            marketSegment.option[marketSegment.option.length] = new Option('LGIntake.corpCodeOptions.marketSegment.3[x]','LGIntake.corpCodeOptions.marketSegment.3[x]');
        }
    }
    else if(corpCode == "4"){
        for( x in LGIntake.corpCodeOptions.marketSegment.4){
            marketSegment.option[marketSegment.option.length] = new Option('LGIntake.corpCodeOptions.marketSegment.4[x]','LGIntake.corpCodeOptions.marketSegment.4[x]');
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:40:55.577

根据 EMCAScript 5.1 规范，javascript 标识符不能以数字开头。因此，“1”属性不是 JSON 中的有效标识符。但是，您可以将其引用为`LGIntake.corpCodeOptions.marketSegment[1]`.

有关详细信息，请参阅[http://mathiasbynens.be/notes/javascript-identifiers#valid-identifier-names](http://mathiasbynens.be/notes/javascript-identifiers#valid-identifier-names)。

# android - 如何为电话差距创建一个 android 本机库/扩展

> ID：14612962
> 
> 赞同：1
> 
> 时间：2013-01-30T20:21:56.747
> 
> 标签：android, cordova, android-service, phonegap-plugins

我创建了一个原生 android 服务，如下所示：

```
public class AssociateNavService extends Service {

    /* (non-Javadoc)
     * @see android.app.Service#onBind(android.content.Intent)
     */

    @Override
    public void onCreate() {

       //some code
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        //some layout stuff

        statusChecker.run();

        // If we get killed, after returning from here, restart
        return START_REDELIVER_INTENT;
    }

    @Override
    public IBinder onBind(Intent intent) {

        // We don't provide binding, so return null
        return null;
    }

    @Override
    public void onDestroy() {

        unregisterReceiver(batteryReceiver);
        mHandler.removeCallbacks(statusChecker);
        winMgr.removeView(disableStatusBar);
        //Toast.makeText(this, "service done", Toast.LENGTH_SHORT).show(); 
    }

    ....
} 
```

现在一个在phoneGap做项目的朋友想知道他是否可以在他的项目中使用这个服务作为一个本地库或扩展。

有人可以指点我一个关于如何做到这一点的教程..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:51:32.913

要集成任何自定义本机功能，请使用插件 API。

[http://docs.phonegap.com/en/2.3.0/guide_plugin-development_index.md.html](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_index.md.html)

# knockout.js - 使用敲除在页面内绑定模板

> ID：14612978
> 
> 赞同：0
> 
> 时间：2013-01-30T20:22:53.157
> 
> 标签：knockout.js, templatebinding

我正在使用敲除和 foreach 来绑定模板和属性。现在为了绑定一个新页面，我在我的主页中使用了这样的东西：

```
<!-- ko template: {name: 'lib-dlp/views/share.htm' } --><!-- /ko --> 
```

share.htm 有：

```
<div> 
    <a href="" class="number_reviews"> (9 reviews)</a>
</div> 
```

现在，如果我需要动态设置评论数量，我应该怎么做。在淘汰赛 2.0 中使用它的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:19:29.850

您必须将模板绑定到您的视图模型。尝试这个：

```
<div> 
    <a href="" class="number_reviews"> (<span data-bind="text: reviewCount"></span> reviews)</a>
</div> 
```

并确保在视图模型中公开一个名为 reviewCount 的可观察对象。

# css-float - 使用带有行内块间距间隙的 Haml

> ID：14612980
> 
> 赞同：7
> 
> 时间：2013-01-30T20:23:00.527
> 
> 标签：css-float, haml, css

因此，我阅读了有关在使用 inline-block 而不是浮动时使间距消失的解决方案：[display: inline-block extra margin](https://stackoverflow.com/questions/1833734/display-inline-block-extra-margin)和[http://css-tricks.com/fighting-the-space-between-inline-block -元素/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)。

所以如果你在使用haml并且想把结束标签和下一个开始标签放在同一行，除了切换到ERB之外，还有其他解决方案吗？

（不，我不想弄乱父容器的 css 属性，并且必须在所有子元素中覆盖它）。

这会中断（锚之间有间距）。

那么，尽管建议使用 inline-block 而不是浮动来进行此类布局，但浮动似乎仍然是要走的路，尤其是在使用 haml 时，这是真的吗？

CSS

```
nav a {
  display: inline-block;
  padding: 5px;
  background: red;
} 
```

HTML

```
<nav>
  <a href="#">One</a>
  <a href="#">Two</a>
  <a href="#">Three</a>
</nav> 
```

解决方法（css技巧一）：

```
<ul>
  <li>
   one</li><li>
   two</li><li>
   three</li>
</ul> 
```

或者

```
<ul>
  <li>one</li
  ><li>two</li
  ><li>three</li>
</ul> 
```

另一个：

```
<ul>
  <li>one</li><!--
  --><li>two</li><!--
  --><li>three</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T21:30:14.290

我找到了答案：[http ://haml.info/docs/yardoc/file.REFERENCE.html#whitespace_removal__and_](http://haml.info/docs/yardoc/file.REFERENCE.html#whitespace_removal__and_)

（这是一篇关于该主题的超级有用的文章：http: [//designshack.net/articles/css/whats-the-deal-with-display-inline-block/](http://designshack.net/articles/css/whats-the-deal-with-display-inline-block/)）

[这是一个用于实验的代码笔： http](http://cdpn.io/Bjblr) ://cdpn.io/Bjblr

![在此处输入图像描述](../Images/28d9cac4230465013600f58a59c44645.png)

![在此处输入图像描述](../Images/2942704b9a5868f6270542612b6e5722.png)

![在此处输入图像描述](../Images/6d12230536b5c22890fb243cfd410ee2.png)

这有效： ![在此处输入图像描述](../Images/90aefab2d7cb2f76a1180c8cf6296c33.png)

![在此处输入图像描述](../Images/8fda91b91fe59d61ce2ccaf295aa2f91.png)

如果锚文本在同一行，则为 html（结果相同，但更难阅读源 html：

![在此处输入图像描述](../Images/cacd7762062aa66d3300711ac9ca9266.png)

![在此处输入图像描述](../Images/9570bebec3485374b5db01325565d03c.png)

# javascript - 试图阅读这个 Javascript 循环

> ID：14612988
> 
> 赞同：0
> 
> 时间：2013-01-30T20:23:09.887
> 
> 标签：javascript, html

我正在尝试阅读此代码。据我所知，它正在检查子元素是否在“位置”（但它等于一个字符串？这对我来说没有意义）。如果不是，则将偏移量加 2，如果是，则不执行任何操作。

```
 var p = document.getElementById(parent);
  var c = document.getElementById(child );

  var top  = (c["at_position"] == "y") ? p.offsetHeight+2 : 0;
  var left = (c["at_position"] == "x") ? p.offsetWidth +2 : 0; 
```

然后在这里，这个 for 循环对我来说没有意义 - 为什么它以分号开头？

```
 for (; p; p = p.offsetParent)
  {
    top  += p.offsetTop;
    left += p.offsetLeft;
  } 
```

任何人都可以澄清如何更好地阅读这个吗？我试图在有限的范围内减少父母和孩子之间的距离（仅适用于“左”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:25:25.380

它是循环的，`p`也就是说`truethy`，`p`不是`null`因为一旦你到达顶峰`offsetParent`就可能会。`null`

它相当于：

```
var p = document.getElementById(parent);
while (p !== null) {
    top += p.offsetTop;
    left += p.offsetLeft;
    p = p.offsetParent;
} 
```

* * *

通常，for 循环如下所示：

```
for (var i = 0; i < array.length; i += 1) { 
```

第一位`var i = 0`是初始化部分。您可以将其留空，例如：

```
var i = 0;
for (; i < array.length; i += 1) { 
```

你也可以这样做：

```
for (var i = 0, j = 10 - i; i < array.length; i += 1, j -= 1) { 
```

尽管可能有更好的方法来做到这一点。只是向您展示语法:)

* * *

第二部分是必须的部分`truethy`，如果`false`是 for 循环将停止。这当然不能为空。

* * *

最后一部分是增量部分，也可以为空。所以你可以有：

```
var p = document.getElementById(parent);
for (; p ;) {
    p = p.offsetParent;
} 
```

它看起来很奇怪，但有效。我不推荐这个，因为*它看起来很奇怪*，我的意思是它看起来像一个错误。

# node.js - node.js + 天蓝色 sql 数据库

> ID：14612989
> 
> 赞同：4
> 
> 时间：2013-01-30T20:23:17.967
> 
> 标签：node.js, azure

我正在努力使用[微软的 node.js sql 客户端。](https://github.com/WindowsAzure/node-sqlserver)

我已经安装了它，使用 github 页面上的指南没有任何错误，并且在本地一切正常。但是当我使用 git 将其推送到天蓝色时，我得到了错误：

```
Native sqlserver module not found. Did you remember to run node-gyp configure build?
Application has thrown an uncaught exception and is terminated:
Error: Unable to load shared library C:\DWASFiles\Sites\bid110\VirtualDirectory0\site\wwwroot\node_modules\msnodesql\build\Release\sqlserver.node 
```

我也看过[这个](http://www.windowsazure.com/en-us/develop/nodejs/how-to-guides/sql-database/)指南，尽管有些部分已经过时了。我还检查了所有文件是否都已上传到服务器。node_modules/msnodesql 和 node_modules\msnodesql\build\Release\ 文件夹及其所有子文件夹也在那里。

有什么想法我可能在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:12:45.437

请检查您的 msnodesql 是 x86 还是 x64。如果您的本地机器是 x64 和 x64 Python，并且您安装了 msnodesql，`npm install msnodesql`那么您应该获得 x64 版本。但是在 Windows Azure 网站上，您的应用程序将在 x86 中运行，因此您可能需要 x86 版本的 msnodesql。您可以从 x86 机器通过 NPM 安装，也可以在[http://www.microsoft.com/en-us/download/details.aspx?id=29995下载已编译的版本](http://www.microsoft.com/en-us/download/details.aspx?id=29995)

我也有一篇关于这个希望有所帮助的博客文章。[http://blogs.shaunxu.me/archive/2012/09/18/node.js-adventure---when-node.js-meets-windows-azure.aspx](http://blogs.shaunxu.me/archive/2012/09/18/node.js-adventure---when-node.js-meets-windows-azure.aspx)

# matlab - 在matlab中对以下代码进行矢量化

> ID：14612991
> 
> 赞同：0
> 
> 时间：2013-01-30T20:23:24.570
> 
> 标签：matlab, vectorization

假设我有一个向量，比如 S=1:10，一个固定的数字 K=5。有没有办法对以下代码进行矢量化？

```
v=zeros(1:10);

for i=1:10
    if S(i)>K
        v(i)=S(i)-K;
    else 
        v(i)=0;
    end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:27:21.983

```
v = max(S-K, 0); 
```

[空格填充符使帖子足够长]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T22:20:26.507

另外一个选项：

```
v = (S-K).*(S>K); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:58:23.947

仅出于教育目的：

```
v = S - K;
v(v<=0) = 0; 
```

请注意，这为您提供了一些灵活性，您可以轻松地替换最后`0`的`NaN`条目，甚至通过将其替换为来删除所有这些条目`[]`

# sql-server - sys.dm_database_encryption_keys 中的加密状态与 sys.databases 不一致

> ID：14612993
> 
> 赞同：9
> 
> 时间：2013-01-30T20:23:29.237
> 
> 标签：sql-server, tde

如果我查询`sys.dm_database_encryption_keys`，它会返回一个`encryption_state`of `3`（加密），`percent_complete`of `0`。如果我查询`sys.databases`，该`is_encrypted`列的值为 0（未加密）。在我看来，这两个似乎相互对抗。

数据库是否加密？ 这么说，`sys.dm_database_encryption_keys`但不同意。`is_encrypted``sys.databases`

在数据库属性下，该属性`Encryption Enabled`为 false。

我很困惑。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-03-18T22:56:37.710

一旦启用透明数据加密 (TDE)，您似乎遇到了 SQL 服务器自动加密数据库的情况，例如在 tempdb 的情况下。我在使用 tempdb 的 SQL Server 2012 测试实例中看到完全相同的情况。 [MSDN](https://msdn.microsoft.com/en-us/library/bb934049%28SQL.100%29.aspx)：*如果 SQL Server 实例上的任何其他数据库使用 TDE 加密，则 tempdb 系统数据库将被加密。*

**is_encrypted = 0**我相信反映了 DB 是自动加密的事实，而不是通过发出 ALTER 命令。以下是[MSDN](https://msdn.microsoft.com/en-us/library/ms178534.aspx)关于此参数*的说明： 指示数据库是否已加密（反映上次使用 ALTER DATABASE SET ENCRYPTION 子句设置的状态）。*

**percent_complete = 0**当没有正在进行的加密时预期。来自[MSDN](https://msdn.microsoft.com/en-us/library/bb677274.aspx)：*数据库加密状态更改的完成百分比。如果没有状态变化，这将为 0。*

**encryption_state = 3**看起来是回答问题的最终提示。[MSDN](https://msdn.microsoft.com/en-us/library/bb677274.aspx)：*指示数据库是否加密，3 = 加密。*

[MSDN TDE](https://msdn.microsoft.com/en-us/library/bb934049.aspx)页面本身建议使用**sys.dm_database_encryption_keys**来验证 DB 是否已加密。

最后，这是[John Magnabosco 的帖子](https://www.simple-talk.com/sql/database-administration/transparent-data-encryption/)中的一个非常方便的脚本，显示了哪些 DB 使用 TDE 加密，哪些没有（encryption_state = 3 是出纳员）：

```
SELECT
    db.name,
    db.is_encrypted,
    dm.encryption_state,
    dm.percent_complete,
    dm.key_algorithm,
    dm.key_length
FROM
    sys.databases db
    LEFT OUTER JOIN sys.dm_database_encryption_keys dm
        ON db.database_id = dm.database_id;
GO 
```

希望这可以减少现在的混乱。

# android - 动画可绘制 - 第一个和最后一个图像在播放后仍然可见

> ID：14612994
> 
> 赞同：0
> 
> 时间：2013-01-30T20:23:35.587
> 
> 标签：android

我在我的应用程序中实现 AnimationDrawable 时遇到问题。我参考了开发者指南来实现动画。无论出于何种原因，动画播放后，第一帧和最后一帧在屏幕上仍然可见。

我的 xml 文件如下所示：

```
<animation-list android:id="@+id/selected" 
android:oneshot="true" xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@drawable/bubbles_1hd" android:duration="50" />
<item android:drawable="@drawable/bubbles_2hd" android:duration="50" />
<item android:drawable="@drawable/bubbles_3hd" android:duration="50" />
<item android:drawable="@drawable/bubbles_4hd" android:duration="50" />
<item android:drawable="@drawable/bubbles_5hd" android:duration="50" />
<item android:drawable="@drawable/bubbles_6hd" android:duration="50" />
<item android:drawable="@drawable/bubbles_7hd" android:duration="50" />
<item android:drawable="@drawable/bubbles_8hd" android:duration="50" /> 
```

我的代码如下所示：

```
 ImageView img = (ImageView)findViewById(R.id.imageAnimation);
    img.setBackgroundResource(R.drawable.bubble_animation); 
    AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground();
    frameAnimation.setOneShot(true);
    frameAnimation.start(); 
```

我能够弄清楚的唯一解决方案。将实现为隐藏 ImageView 的动画结束设置的延迟计时器。但是，我希望我缺少一个更简单更优雅的解决方案。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:34:48.193

我为此找到的解决方案是为可绘制对象的第一张和最后一张幻灯片插入透明图像。不确定这是否是最好的方法，但它有效。

# c# - 在哪里使用 MVVM 中的 Web 服务？

> ID：14612995
> 
> 赞同：1
> 
> 时间：2013-01-30T20:23:39.287
> 
> 标签：c#, wpf, wcf, mvvm

使用 Visual Studio 2012，我添加了对远程 Web 服务的服务引用。它被配置为使用异步调用。该应用程序使用带有 MVVM 模式的 WPF。

一个模型类被调用`Projects`并公开一个`ProjectList`可以在视图模型中使用的属性。`ProjectList`应包含从服务中检索到的项目列表。

到目前为止，我像这样从视图模型中调用此服务（实际上它是由命令调用的）：

```
Projects.ProjectList = proxy.getProjectList(username, password); 
```

是的，它有效，但从我所学到的“业务逻辑”不应该由视图模型处理。`ProjectList`那么当视图在视图模型中触发命令时，我将如何以及在哪里调用服务并设置模型的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:29:55.193

使用依赖注入将多态接口传入您的 ViewModel。

在此接口中定义将与您的 Web 服务通信并在具体对象中实现此接口的函数。根据您需要访问的服务源实例化您需要的具体对象，并通过您定义的接口将其传递给 ViewModel。

通过这种方式，您可以轻松实现松散耦合和多态的所有好处......

例如：

```
public ProjectListViewModel(IProjectListServiceAgent sa)

public interface IProjectListServiceAgent
{
    GetProjectList(string userName, string password)
}

public SqlProjectListFetcher : IProjectListServiceAgent 
{
   GetProjectList(string userName, string password)
   {
       //Fetch project list using direct SQL server access.
   }
}

public WebServiceProjectListFetcher : IProjectListServiceAgent 
{
   GetProjectList(string userName, string password)
   {
       //Fetch project list using web service.
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:50:30.213

将依赖项传递给 ViewModel 以使用代理，我更喜欢始终使用异步系统的同步代码，因此代理具有方法 proxy.GetCustomerList，您可以使用 async 关键字或 TaskFactory。

我正在为 MVVM 维护一个小框架助手来简单地完成这项任务，特别是：

1.  检索 DTO、单个或列表
2.  使用自定义映射器（也为 AutoMapper）转换为 ViewModel
3.  [可选] 对列表进行排序
4.  [可选] 完成后执行方法

也可以在单个线程中执行所有内容以更改配置以进行测试

源代码（不是实时更新）在这里[http://hyperionsdk.codeplex.com](http://hyperionsdk.codeplex.com)和包在这里[http://nuget.org/packages/EyeSoft.Wpf.Facilities](http://nuget.org/packages/EyeSoft.Wpf.Facilities)。

使用示例：

```
public ViewModelSorted(ServiceFactory<ICustomerService> customerServiceFactory)
{
    customerServiceFactory
        .Collection(this, x => CustomerCollection)
        .Sort(x => x.LastName)
        .Fill(x => x.GetCustomersWithTurnoverGreatherThan(0));
} 
```

# mysql - 仅在记录不存在时插入行

> ID：14612999
> 
> 赞同：1
> 
> 时间：2013-01-30T20:24:15.157
> 
> 标签：mysql, sql, insert

该表被调用`limits`并采用以下字段：

```
id    |    ip    |    limit 
```

在每次页面加载时，我都会检查用户在此表中是否有记录（由 确定`ip`），如果没有，我会插入一条记录。但是，如果记录已经存在，我不想做任何事情。

我基本上需要一个`INSERT IF NOT EXISTS`类型查询。我已经读过[这个](http://bogdan.org.ua/2007/10/18/mysql-insert-if-not-exists-syntax.html)，这个`INSERT IGNORE`例子看起来不错，但据我所知，它只适用于主键。在我的情况下，该`id`字段是主键，我想检查它是否`ip`已经存在。

这是某种伪 SQL 代码：

```
INSERT INTO `limits` (ip, limit)
VALUES ('127.0.0.1', 8)
IF NOT EXISTS `limits`.`ip` 
```

谢谢你的帮助！

编辑：也试过这个

```
INSERT IGNORE INTO `limits`
SET `ip` = ‘127.0.0.1′,
`limit` = 8; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:06:10.923

`INSERT IGNORE`将忽略任何唯一索引，无论是主键还是任何唯一键。

您可以使用在 IP 上创建唯一密钥

```
ALTER TABLE limits
  ADD CONSTRAINT idx_limits_ip
  UNIQUE (ip) 
```

该[手册](http://dev.mysql.com/doc/refman/5.5/en/alter-table.html)有一些替代语法来创建索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:26:19.733

```
INSERT INTO `limits` (ip, limit)
SELECT '127.0.0.1', 8
WHERE NOT EXISTS (SELECT * FROM `limits` WHERE `limits`.`ip` =  '127.0.0.1') 
```