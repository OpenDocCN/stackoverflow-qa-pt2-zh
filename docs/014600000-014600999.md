# StackOverflow 问答 14600000-14600999

# dom4j - 如何使用 DOM4J 更改属性值

> ID：14600008
> 
> 赞同：0
> 
> 时间：2013-01-30T08:54:49.220
> 
> 标签：dom4j

我正在使用 DOM4J 解析我的 XML 文件并更改属性值。

在这里，我在更改属性时遇到了一些困难。生成新的更新 XML 文件后，似乎 DOM4J 未能更改这些属性。

这是我要解析的示例 xml 文件。

```
<Form Width="69977" RowHeight="37998" ColWidth="69977" RowCount="7"
        RowOffset="0" ColCount="3" ColOffset="0" MarginLeft="0" MarginTop="0"
        MarginRight="0" MarginBottom="0" PrintOrder="0" Orientation="Portrait"
        Rotation="0" DataSource="">
        <FileVersion Major="2" Minor="1" />
        <DocumentName />
        <Comment />
        </Form> 
```

在表单标签中，我想更改 MarginRight 和 MarginTop 的值。

这是我用来更改属性的代码...

```
//ITERATE OVER GIVEN NODE NAMES AND MAKE SEARCH OF IT
            for(String nodeName : nodeNameSet){
                nodeList = document.getElementsByTagName(nodeName);

                if(nodeList!=null && nodeList.getLength()>0){
                    node = nodeList.item(0);

                    //ITERATE OVER ATTRIBUTE NAME-VALUE MAP AND REPLACE THE EXISTING VALUEs
                    attribNameValMap = nodeArrribMap.get(nodeName);
                    attribNameSet = attribNameValMap.keySet();

                    if (node!=null && node.getNodeType() == Node.ELEMENT_NODE) {
                        for(String attribute : attribNameSet){
                            element = (Element)node;
                            element.setAttribute(attribute,attribNameValMap.get(attribute));
                        }                       
                    }else{
                        throw new SELSystemException("Error while parsing XML File : Required Node Type : ELEMENT : Found Node Type :"+node.getNodeType());
                    }

                }

            }

            //CREATE A TRANSFORMER TO TRANSFORM THE XML TO INPUTSTREAM
            TransformerFactory transFactory = TransformerFactory.newInstance();
            Transformer transformer = transFactory.newTransformer();
            transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");

            //PREAPRE A SOURCE TO WRITE THE  FILE BACK
            DOMSource domSource = new DOMSource(document);
            //WRITE THE UPDATED CONTENT TO A STRINGWRITER
            Writer writer = new StringWriter();
            StreamResult result = new StreamResult(writer);
            //TRANSFORM THE CONTENT TO STRINGBUILDER
            transformer.transform(domSource, result);
            //CONVERT STRINGBUILDER DATA TO STRING
            returnStream = writer.toString(); 
```

在 returnStream 变量中，我将文件流与旧的 xml 文件进行了比较。但似乎属性没有改变。

谁能建议我用 DOM4J 更改属性的更好主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:31:14.490

上面提到的代码工作正常。

实际上再次检查生成的XML文件后，我发现有两个“”标签。所以上面的代码改变了我没有注意到的第一个标签中的属性。

所以上面提到的代码工作正常。

谢谢。

# web - 多 Web 应用程序中的单一登录（Myportal、OpenERP）

> ID：14600013
> 
> 赞同：-1
> 
> 时间：2013-01-30T08:55:02.607
> 
> 标签：web, login, single-sign-on, odoo

这个问题已经存在，但没有答案。我们有同样的问题。我有一个网站和一个 openerpwebsite。

我的问题是当用户登录我的网站时，当单击 openerp 的特定按钮时，它也应该自动登录 openerpwebsite。我不知道该怎么做。有谁能够帮我？请 ;（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:28:36.433

您应该研究 SSO（单点登录）功能。如果您使用 OpenERP 7，最好考虑一个 oauth 提供程序并将其用于您的网站，以让您的访问者登录到这两个系统（就像您在登录 Google Drive 时可以访问 GMail 一样）。

OAuth 设置位于 Settings > Users > OAuth Providers 您可以在发行说明的第 4.3 节中找到更多信息：openerp.com/node/1272

如果您使用的是 OpenERP 6.1，这里有一个带有模块 auth_openid 的 openid 功能：http: [//apps.openerp.com/addon/6962](http://apps.openerp.com/addon/6962)

# oop - 数独难题的面向对象设计

> ID：14600014
> 
> 赞同：3
> 
> 时间：2013-01-30T08:55:07.307
> 
> 标签：oop

我正在尝试在 OOD 中设计数独谜题。

一方面，在带有验证功能的矩阵中表示板似乎很便宜，该验证功能将在每次插入后激活

另一方面，用“块”表示板可能更方便：每个单元格将分配有包含它的三个块 - 列、行、正方形。此处的验证功能将根据使用多态性的块类（col/row/square）不同地实现，并且当您插入数字时，在属于单元格的每个块上激活 3 次。这种方式看起来更“OOD”，但从内存方面来说非常昂贵。

你认为哪种方式更好？有没有更好的方法是OOD但仍然便宜？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:03:30.743

如果您想制作更通用的数独求解器（还有其他形式），您可以使用：

**细胞**

*   在屏幕上有一个位置
*   可以包含属于有限字母表的符号或为空。
*   属于一个或多个组。
*   某些单元格具有固定值（无法更改）。
*   每次要更改单元格时，新值必须在所有组中都有效。

**通用组**

*   包含多个单元格，不超过字母表中的符号数。
*   泛型组具有 IsValid 方法。

**普通数独组**

*   如果所有非空单元格包含不同的值，IsValid 方法将返回 true。

**其他数独集团**

*   （您可以定义自己的 IsValid 函数）。

**注意**甚至可以混合不同的组类型。

# api - 使用 Magento oauth api 将产品从 codeigniter 添加到 Magento

> ID：14600016
> 
> 赞同：0
> 
> 时间：2013-01-30T08:55:19.037
> 
> 标签：api, codeigniter, magento, oauth

如何使用 Magento oauth authentication api 从 codeigniter 添加 magento 产品。

我是magento的新手。

我需要安全的方式来访问 magento，所以我使用 oauth api 将 codeigniter 与 magento 进行交互。

感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:53:04.070

您是否在 Magento 的网站上查看过此资源？[http://www.magentocommerce.com/api/rest/introduction.html](http://www.magentocommerce.com/api/rest/introduction.html)

# android - 为什么我的 Android 清单不支持三星 Galaxy Note 2

> ID：14600020
> 
> 赞同：0
> 
> 时间：2013-01-30T08:55:38.347
> 
> 标签：android, android-manifest

我有以下清单来构建我的应用程序，发现 Google Play 不希望我的应用程序在三星 Galaxy Note 2 上发布，但希望在 Galaxy Note 1 上发布。

在我必须将 APK 上传到 Google Play 商店之前，我需要进行哪些更改才能让它在新的 Galaxy Note 上运行？是否有一个测试应用程序可以告诉我支持的设备？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="${YYAndroidPackageName}" android:versionCode="${YYAndroidVersionCode}" android:versionName="${YYAndroidMajorVersion}.${YYAndroidMinorVersion}.${YYAndroidBuildVersion}" android:installLocation="auto">

  <!-- AdMob SDK permissions -->  
  <!-- uses here -->
  <uses-permission android:name="android.permission.INTERNET"/>
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
  <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
  ${YYAndroidManifestPermission}

  <supports-screens
        android:largeScreens="true"
        android:normalScreens="false"
        android:requiresSmallestWidthDp="600"
        android:smallScreens="false"
        android:xlargeScreens="true" />

  <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="16"/>

  <!-- application -->
  <application android:name="${YYAndroidPackageName}.RunnerApplication" android:label="@string/app_name" android:icon="@drawable/icon">
    <activity android:name="${YYAndroidPackageName}.RunnerActivity" android:theme="@android:style/Theme.NoTitleBar.Fullscreen" android:label="@string/app_name" android:launchMode="singleTask" android:screenOrientation="${YYAndroidOrientation}" android:configChanges="orientation|keyboardHidden|screenSize">
      <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
      </intent-filter>
    </activity>
    <activity android:name="${YYAndroidPackageName}.RunnerPreferenceActivity" android:label="@string/menu_settings">
    </activity>

    <!-- services -->
    <service android:name="RunnerBillingService" />
    ${YYAndroidManifestServices}

    <!-- activities here -->
    ${YYAndroidManifestActivities}

    <!-- receivers here -->    
      ${YYAndroidManifestReceivers}

    <!-- This is XPeria Play specific, we have decided to make this standard though for all applications, just in case -->
    <meta-data android:name="xperiaplayoptimized_content" android:resource="@string/xperiaplayoptimized_content" />
    <meta-data android:name="game_display_name" android:resource="@string/app_name" />
    <meta-data android:name="game_icon" android:resource="@drawable/icon" />

    <!-- meta-data here -->
    ${YYAndroidManifestMetadata}

  </application>
</manifest> 
```

清单来自 GameMaker Studio。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:58:38.483

我会打赌：

```
<supports-screens
    android:largeScreens="true"
    android:normalScreens="false"
    android:requiresSmallestWidthDp="600"
    android:smallScreens="false"
    android:xlargeScreens="true" /> 
```

尝试更新...（可能删除`android:requiresSmallestWidthDp`或允许`android:normalScreens`）我知道 Note 1 和 Note 2 之间的最大区别是屏幕（尺寸/分辨率/密度）。这就是我建议的原因。

否则，它可能在生成的清单中（所有那些 ${...} 都被其他东西替换，那里可能有问题，但你必须先找到生成的清单）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:03:41.413

Galaxy Note 2 的屏幕正常，不是 xlarge 或 large

# mysql - 使用 join 和 group by 优化更新查询

> ID：14600024
> 
> 赞同：0
> 
> 时间：2013-01-30T08:55:51.487
> 
> 标签：mysql, join, group-by, sql-update, query-optimization

我有一个包含字段 DATASOURCE、PEOPLEID、TOTVALUE（约 600 万条记录）的表总计和一个**包含字段 PEOPLEID 和 VALUE（大约 300 万条记录）的表****source1**。总的来说，每个 DATASOURCE 都有唯一的**peopleid**，而在**source1**中，每个 peopleid 都有几条记录。source1 中的所有 peopleid**都已**包含在**totals**中，但不包含它们的值。

我设法获得更新查询，更新从“测试”小表上的 source1 获取的总计字段 TOTVALUE ，**但****现在**我正试图让它在真正的表上运行，它会永远运行......我会必须对**source2**，**source3**等重复它......

 ******我运行的查询是：

```
UPDATE  totals t
    INNER JOIN 
    (
        SELECT  peopleid,
                sum(value) AS TotValues
        FROM source1
        GROUP BY peopleid
    ) s
    ON t.peopleid = s.peopleid
SET t.totvalue = s.TotValues
where
t.datasource like 'source1' 
```

你认为有更好的方法来运行和优化这个查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:02:46.833

*   使用`=`而不是`LIKE`因为，*我认为*，您不是在搜索模式吗？
*   在两个表上创建一个`INDEX`on 列：和`PeopleID``totals``source`
*   *`datasource`如果可能的话，还要在表的列上添加一个索引`totals`*

询问，

```
UPDATE  totals t
        INNER JOIN 
        (
            SELECT  peopleid,
                    sum(value) AS TotValues
            FROM    source1
            GROUP   BY peopleid
        ) s
        ON t.peopleid = s.peopleid
SET     t.peopleid = s.peopleid
WHERE   t.datasource = 'source1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:03:23.603

先尝试加入数据。请记住为两个表中的 peopleid 列创建索引。

```
UPDATE  totals t
    INNER JOIN 
    (
        select * from (
          SELECT  t.datasource,
                  peopleid,
                  sum(value) AS TotValues
          FROM source1 s INNER JOIN 
               totals t
                      ON t.peopleid = s.peopleid
          GROUP BY t.datasource, t.peopleid
        ) s_aux
    ) s
    ON t.peopleid = s.peopleid and t.datasource = s.datasource
SET t.totvalue = s.TotValues 
```******

# java - 如何构建 JNI .dll？

> ID：14600025
> 
> 赞同：2
> 
> 时间：2013-01-30T08:55:58.663
> 
> 标签：java, windows, dll, java-native-interface

我在 Eclipse 中有一个包含一些 JNI 代码的 java 项目。JNI 代码是跨平台的 - 适用于 Windows 和 Linux。我怎样才能建立一个dll？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T08:59:10.050

您必须为 Windows 构建一个 .DLL，为 Linux 构建一个 .so。您将使用以下语法在 Linux 中编译 C 代码：

```
gcc -shared yourcode.c -I/usr/lib/gcc/x86_64-redhat-linux/3.4.3/include/ -o yourLib.so 
```

在java中使用导入

```
static {
        System.out.println(System.getProperty("java.library.path"));
        System.loadLibrary("yourlib");
    } 
```

对于 Windows[如何将 C 编译为 DLL](https://stackoverflow.com/questions/7509757/compile-c-source-to-a-dll)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T09:02:08.513

我假设你有一些`C/C++`代码。要创建`dll`(windows)，您必须编译代码（例如，您可以使用 Visual C++ Express，或 mingw: gcc）。在 linux 中只使用`gcc`构建库。

为您的平台构建库后，将其添加到库路径中`-Djava.library.path=<folder containing the library>`。

*hth*

# python - 获取条件字符串返回值：True 或 False

> ID：14600026
> 
> 赞同：3
> 
> 时间：2013-01-30T08:56:04.847
> 
> 标签：python

我有如下条件字符串，

```
condition1 = "((2=2) or (3=1)) and (1=1)"
condition2 = "((2=3) or (1=1)) and (4=5)" 
```

以上两个条件分别给了我输出 True 和 False。

更多解释：

条件 1 工作，

```
if ((2==2) or (3==1)) and (1==1):
      Return True
else:
      Return False 
```

条件 1 的输出：真

条件2工作，

```
if ((2==3) or (1==1)) and (4==5):
      Return True
else:
      Return False 
```

条件2的输出：真

更新 ：

对不起朋友，

我有条件字符串，如上面的条件1和条件2。

当我将条件解析为字符串并且该函数像 if - else 一样执行并返回布尔值时，我想创建函数

请帮忙...

谢谢钦坦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:10:12.660

**警告：**使用`eval`具有[潜在危险](http://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html)，您永远不应评估不受信任的输入（例如*任何*类型的用户输入）。

```
In [1]: condition1 = "((2=2) or (3=1)) and (1=1)"
   ...: condition2 = "((2=3) or (1=1)) and (4=5)"
   ...: 

In [2]: eval(condition1.replace('=','=='))
Out[2]: True

In [3]: eval(condition2.replace('=','=='))
Out[3]: False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T09:07:47.940

如果您询问如何评估条件并让 python 为您提供 True 或 False 输出，请查看 python 中的 eval() 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T09:53:33.793

没有“评估”的解决方案

```
def condition(a,b,c):  
    if (((a[0]==a[1]) or (b[0]==b[1])) and (c[0]==c[1])):  
       return True  
    else:  
      return False 
```

print condition((2,2),(3,1),(1,1)) # 返回 True
print condition((2,3),(1,1),(4,5)) # 返回 False

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T08:58:44.930

在 python 中，用于比较的运算符是`==`.

无论哪种方式，如果这不能解决您的问题，您应该更清楚地说明我们应该为您提供哪些帮助。

**更新：**您正在寻找评估代表 Python 表达式的字符串的函数是`eval()`.

# c# - 关键字减少长分支的C#树

> ID：14600027
> 
> 赞同：0
> 
> 时间：2013-01-30T08:56:07.273
> 
> 标签：c#, loops, recursion, tree

我有这样定义的树节点：

```
class TreeNode : IEnumerable<TreeNode>
{
    private readonly Dictionary<string, TreeNode> _childs = new Dictionary<string, TreeNode>();

    public readonly string ID;

    public TreeNode Parent { get; private set; }

    public int Level { get; set; }

    public TreeNode(string id)
    {
        this.ID = id;
    }
    // some other methods
} 
```

我通过这个关键字创建了树，现在我有时在父树节点有一个孩子的地方分支，那个孩子也可以有一个孩子，在一些节点之后有 2 个孩子。所以我现在想将所有一个子节点（删除它）减少到至少有 2 个子节点的“级别”。

我试过这样的事情：

```
private void TreeReduction(TreeNode node)
    {
        while (node.Count() == 1)
        {
            node = node.GetFirstChild();
        }
        foreach (var child in node)
        {
            TreeReduction(child);
        }
    } 
```

我把它称为主节点。它看起来不错，它正在遍历树，但节点没有被重写。我尝试了 treenode 的参数，但我遇到了 foreach 循环的问题。我该如何修复它以使其正常工作？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:29:31.127

对会发生什么做出许多假设，例如对单枝单叶树，你可以选择这样的东西。

```
var redux = TreeReduction(rootNode, 0); 
```

除此之外，关键是让您的递归方法返回一个 TreeNode，您可以将其设置为子节点。

我省略了 Parent 属性，因为它的 setter 是私有的。如果 AddChild 没有设置它，你应该把它公开并作为参数携带。

```
private TreeNode TreeReduction(TreeNode node, int currentLevel)
    {
        if(node==null)
          return null;
        if(node.Count() == 1)
        {
            var redux = TreeReduction(node.GetFirstChild(), currentLevel);
            return redux?? new TreeNode(node.ID{level=currentLevel});
        }
        var newNode = new TreeNode(node.ID{level=currentLevel});
        foreach (var child in node)
        {
            var newChild = TreeReduction(child, currentLevel+1);
            if(newChild!=null)
               newNode.AddChild(newChild);
        }
        return newNode;
    } 
```

# php - 解析 XML 提要不起作用

> ID：14600037
> 
> 赞同：0
> 
> 时间：2013-01-30T08:56:18.970
> 
> 标签：php, xml

我正在尝试从 xml 或 rss 文件中解析数据。这有点乱。人们告诉我，这很容易，但我很挣扎。

首先，我想让广播节目新闻在现场显示。我从外部来源获得了 rss 提要和 api，它们每天更新 xml 内容，我只需要获取文件并将其保存在我的服务器上，以便我可以读取它。这是 rss 的示例。

```
<?xml version="1.0"?>
   <channel>
        <title>external source</title>
        <link>http://www.externalsource.com/</link>
        <description>external source</description>
        <language>en-us</language>
        <pubDate>Thu, Jun 3 2011 10:23:56 PDT</pubDate>

        <ttl>60</ttl>
        <docs>http://blogs.law.harvard.edu/tech/rss</docs>

        <item>
        <title>08:00 pm</title>
        <link>http://www.externalsource.com</link>
        </item>

      <item>
         <title>- Stephen Ace show</title>
         <link>http://www.externalsource.com/stephen_ace</link>
         <description>Stephens show</description>

      </item>
      <item>
         <title>- Sarah Hardy show</title>
         <link>http://www.externalsource.com/sarah_hardy</link>

     <description> Sarah's first show in her new slot.</description>
      </item>
      <item>

         <title>- Radio 4 evening show</title>
         <link>http://www.externalsource.com/shows/id-453</link>
         <description>Bill Grady is supported by co-host Lenny Hillroy</description>
      </item>
      <item>
         <title>- Kiss music evening show will Sady</title>
         <link>http://www.externalsource.com/shows/id-112</link>

         <description>Sady presents the evening show here at Kiss.</description>
      </item>
         </channel> 
```

我将此文件保存为 night.xml，它会在晚上 24 小时从使用 fread() 的 PHP 脚本更新。

我只想显示当晚正在播放的节目的标题，没有别的。
我对 MySQL 没问题，但我真的不明白这一点。我很困。
这是我的php

```
<?php

$thexml = simplexml_load_file("tonight.xml");

echo $thexml->getName() . "<br />";

foreach($thexml->children() as $child)
  {
  echo $child->getName() . ": " . $child . "<br />";
  } 
```

当我测试它时，它不会打印正确的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:57:09.440

使用该[`SimpleXMLElement::xpath()`](http://php.net/SimpleXMLElement.xpath)功能的快速解决方案：

```
$thexml = simplexml_load_file("tonight.xml");

foreach ($thexml->xpath('//item/title') as $title) {
    echo $title, "<br>\n";
} 
```

您可以在此处找到更多 Xpath 资源：

*   [什么是学习正确使用语法的优秀 XPATH 参考？](https://stackoverflow.com/q/5372312/367456), PHP 从今天开始使用 Xpath 1.0。

SimpleXML 旁边还有 DOMDocument，它的大姐姐：

```
libxml_use_internal_errors(true);

$dom = new DomDocument();
if ($dom->load('tonight.xml')) {
  $xpath = new DomXPath($dom);
  foreach ($xpath->query('//item/title') as $node) {
    echo $node->nodeValue, "<br>\n";
  }
} 
```

那应该工作

你会得到它，只要专注于填补你在知识中发现的所有空白，你就会到达那里。

在 PHP 手册中阅读 DomDocument 和 DomXPath：

*   [http://php.net/class.domdocument](http://php.net/class.domdocument)
*   [http://php.net/class.domxpath](http://php.net/class.domxpath)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:04:50.133

如果您观看您的`$thexml`内容，您会看到以下内容：

```
print_r( $thexml );
SimpleXMLElement Object
(
    [title] => external source
    [link] => http://www.externalsource.com/
    [description] => external source
    [language] => en-us
    [pubDate] => Thu, Jun 3 2011 10:23:56 PDT
    [ttl] => 60
    [docs] => http://blogs.law.harvard.edu/tech/rss
    [item] => Array
        (
            [0] => SimpleXMLElement Object
                (
                    [title] => 08:00 pm
                    [link] => http://www.externalsource.com
                )

            [1] => SimpleXMLElement Object
                (
                    [title] => - Stephen Ace show
                    [link] => http://www.externalsource.com/stephen_ace
                    [description] => Stephens show
                )

            [2] => SimpleXMLElement Object
                (
                    [title] => - Sarah Hardy show
                    [link] => http://www.externalsource.com/sarah_hardy
                    [description] =>  Sarah's first show in her new slot.
                )

            [3] => SimpleXMLElement Object
                (
                    [title] => - Radio 4 evening show
                    [link] => http://www.externalsource.com/shows/id-453
                    [description] => Bill Grady is supported by co-host Lenny Hillroy
                )

            [4] => SimpleXMLElement Object
                (
                    [title] => - Kiss music evening show will Sady
                    [link] => http://www.externalsource.com/shows/id-112
                    [description] => Sady presents the evening show here at Kiss.
                )

        )

) 
```

您可以像这样遍历项目数组中的所有元素：

```
foreach( $thexml->item as $item ) {
    echo $item->title;
} 
```

# java - 无法执行算法和更新表

> ID：14600039
> 
> 赞同：-1
> 
> 时间：2013-01-30T08:56:20.377
> 
> 标签：java, swing, ms-access, jdbc, defaulttablemodel

运行时没有错误，但我的 event_ID 是 1,2,3,4,5,6 但控制台显示

> 更新 crossEvent SET event_Seat = '10' WHERE event_ID =0

由于 event_ID 不同，我的 event_Seat 为 20 并没有更新为 10

```
 public TicketBooking(int eventID){
        this.eventID = eventID;
    }
    /**
     * This method initializes jButtonSubmit
     * 
     * @return javax.swing.JButton
     */
    private JButton getJButtonSubmit() {
        if (jButtonSubmit == null) {
            jButtonSubmit = new JButton();
            jButtonSubmit.setBounds(new Rectangle(517, 317, 79, 22));
            jButtonSubmit.setText("Submit");
            jButtonSubmit
                    .addActionListener(new java.awt.event.ActionListener() {
                        public void actionPerformed(java.awt.event.ActionEvent e) {
                            {
                                submitRegisteration(e);
                            }
                        }
                    });
        }
        return jButtonSubmit;
    }

    public void submitRegisteration(ActionEvent e) {
        String firstName = getJTextFieldFirstName().getText();
        String lastName = getJTextFieldLastName().getText();
        String Contact = getJTextFieldContact().getText();
        String Nric = getJTextFieldNRIC().getText();
        String event = jTextArea1.getText().toString();         

        if (firstName.equals("") || lastName.equals("")) {
            JOptionPane.showMessageDialog(null, "Please enter all text field");
        }

        else {
            bookingEventUser user = new bookingEventUser(firstName, lastName, Contact, Nric, event , eventID);
            if (user.createUser() == true)
                TicketAvailability();

            JOptionPane.showMessageDialog(null,
                    "User record created successfully!");
        }   
    }       

    public void TicketAvailability(){
        String  newseats = jComboBox1.getSelectedItem().toString();
        int seats = Integer.parseInt(newseats);
        DBController db = new DBController();
        db.setUp("IT Innovation Project: Database");
        ResultSet rs = null;
        String dbQuery = "SELECT event_Seat FROM crossEvent WHERE event_ID = "+eventID+"  ";

        rs = db.readRequest(dbQuery);
        int seatAvailable=0;
        try{
            while(rs.next()){
                seatAvailable = Integer.parseInt(rs.getString("event_Seat"));//rs.getString is retrieving data from database and making it to String
            }
            rs.close();
        }catch(Exception e1){

            }
            int resultSeat = seatAvailable - seats ;

            Event update = new Event(resultSeat);
            update.updateSeat();
            }       

    /**
     * This method initializes jTextArea    
     *  
     * @return javax.swing.JTextArea    
     */
    private JTextArea getJTextArea() {
        if (jTextArea == null) {
            jTextArea = new JTextArea();
            jTextArea.setBounds(new Rectangle(67, 289, 84, 16));
            jTextArea.setText(Integer.toString(eventID));
            jTextArea.setVisible(false);
        }
        return jTextArea;
    }
    /**
     * This method initializes jTextArea1   
     *  
     * @return javax.swing.JTextArea    
     */
    private JTextArea getJTextArea1() {
        if (jTextArea1 == null) {
            jTextArea1 = new JTextArea();
            jTextArea1.setBounds(new Rectangle(195, 205, 127, 26));
            jTextArea1.setEditable(false);              
        }
        return jTextArea1;
    }
    public void SetEventTitle(){
        db.setUp("IT Innovation Project: Database");
        String sql = "Select event_Title from crossEvent WHERE event_ID ="+ eventID +"";
            ResultSet rs = null;
        rs = db.readRequest(sql);
        try{
                while(rs.next()){
                    jTextArea1.setText(rs.getString("event_Title"));

                }
                rs.close();
    }catch(Exception e){
        System.out.println(e);

    }   
    }       
    public static void main(String args[]) {
        TicketBooking myWindow = new TicketBooking(eventID);
        myWindow.getJFrame().setVisible(true);
    }    
}

public class Event {        

    private int resultSeat;
    private int eventID;

    public Event(int resultSeat) {
        this.resultSeat = resultSeat;

    }
    public boolean updateSeat(){
        boolean success = false;
        DBController db = new DBController();
        db.setUp("IT Innovation Project: Database");
        String sql = "UPDATE crossEvent SET event_Seat = '" + resultSeat + "' WHERE event_ID ="+ eventID+ "";
        System.out.println(sql);
        if (db.updateRequest(sql) == 1)
            success = true;
        db.terminate();
        return success;         
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:28:30.870

您从未为 eventID 分配任何值。在 Java 中，int 的默认值为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:29:30.637

貌似`eventID`类`Event`的字段隐藏了外部类中的同名字段

```
public class Event {        

    private int resultSeat;
    private int eventID;  <-- remove this line 
```

# php - Zend Framework 2 中隐藏模块名称

> ID：14600041
> 
> 赞同：1
> 
> 时间：2013-01-30T08:56:43.060
> 
> 标签：php, zend-framework2

我刚刚从 Zend Skeleton Application 创建了一个 ZF2 应用程序。骨架的默认路由需要 URL 中的模块名称。例如，要在**应用程序模块的****索引**控制器中调用**索引**操作，我必须输入 url 之类的。****`http://localhost/application/index/index`****

 ****我想从 url 中省略模块名称（*因为我只需要一个模块来满足我的想法*），这样如果我输入`http://localhost/index/index`，我会得到相同的结果。

我尝试像这样更改 application/config 中的默认[module.config.php](https://github.com/zendframework/ZendSkeletonApplication/blob/master/module/Application/config/module.config.php#L27)文件-

```
<?php

return array(
    'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route'    => '/',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Index',
                        'action'     => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'default' => array(
                        'type'    => 'Segment',
                        'options' => array(
                            'route'    => '/[:controller[/:action]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                            ),
                            'defaults' => array(   
                                'action' => 'index',
                                '__NAMESPACE__' => 'Application\Controller'                             
                            ),
                        ),
                    ),
                ),
            ),            
        ),
    ),
    'service_manager' => array(
        'factories' => array(
            'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
        ),
    ),
    'translator' => array(
        'locale' => 'en_US',
        'translation_file_patterns' => array(
            array(
                'type'     => 'gettext',
                'base_dir' => __DIR__ . '/../language',
                'pattern'  => '%s.mo',
            ),
        ),
    ),
    'controllers' => array(
        'invokables' => array(
            'Application\Controller\Index' => 'Application\Controller\IndexController',
            'Application\Controller\Home' => 'Application\Controller\HomeController',
        ),
    ),
    'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../view/layout/layout.phtml',
            'application/index/index' => __DIR__ . '/../view/application/index/index.phtml',
            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ),
); 
```

但它不起作用。谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:31:51.617

尝试从您的子路由中删除斜线。也就是说，`/[:controller[/:action]]`应该是`[:controller[/:action]]`。然后它应该工作。

如果您对解决方案的演练感兴趣，几个月前我写[了一篇关于它的文章。](http://codingexplained.com/coding/php/zend-framework/removing-module-from-url-in-zend-framework-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-27T18:18:57.627

我在 module.config.php 中使用这个路由定义来解决这个问题：

```
'router' => array(
    'routes' => array(
        'home' => array(
            'type' => 'Zend\Mvc\Router\Http\Literal',
            'options' => array(
                'route'    => '/',
                'defaults' => array(
                    'controller' => 'Application\Controller\Index',
                    'action'     => 'index',
                ),
            ),
        ),
        'application' => array(
            'type' => 'segment',
            'options' => array(
                'route'    => '[/:controller[/:action]][/]',
                'defaults' => array(
                    '__NAMESPACE__' => 'Application\Controller',
                    'controller'    => 'Index',
                    'action'        => 'index',
                ),  
            ),
        ), 
    ),
), 
```

使用此行仅使用控制器和操作名称而不使用模块

```
'route'    => '[/:controller[/:action]][/]' 
```****

# java - 检查字符串是否是Java中的有效英文单词

> ID：14600049
> 
> 赞同：2
> 
> 时间：2013-01-30T08:57:22.870
> 
> 标签：java

我想知道是否有可用的开源/免费库来检查字符串在 Java 中是否是有效的英文单词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:59:04.813

即使它有点过时，并且自 2005 年以来没有更新，[Jazzy](http://jazzy.sourceforge.net/)似乎是一个有效的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:01:59.297

希望这对您的问题有用... [http://www.languagetool.org/usage/](http://www.languagetool.org/usage/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:02:08.327

您可以尝试使用[Jazzy](http://sourceforge.net/projects/jazzy/files/Dictionaries/English/)（Jazzy - Java Spell Check API）我不确定它是否提供任何直接选项来检查单词是否有效，但猜测一些技巧可以实现这一点

# c# - 应用 css 为 标记，在母版页中的 ASP.Net

> ID：14600056
> 
> 赞同：2
> 
> 时间：2013-01-30T08:57:44.173
> 
> 标签：c#, asp.net, master-pages

大家好，我想从后面的代码中动态申请位于母版页`css`中的`<li>`标签是我的设计

```
<div id="primary_nav">
    <ul>
       <li class="left active" id="nav_discussion" runat="server">
           <a title="Go to Forums" href="">
               Forums
           </a>
       </li>
       <li class="left" id="nav_members" runat="server">
           <a title="Go to Member List" href="Members.aspx">
               Members
           </a>
       </li>
    </ul>
 </div> 
```

![在此处输入图像描述](../Images/e089e5f0c1a23ef270226d8a3a5ee660.png) 在我的内容页面中，我访问`<li>`如下

```
Control li = Page.Master.FindControl("nav_members"); 
```

但我无法在`css`这里申请所需的人可以帮助我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T09:12:57.613

在这种情况下，您的`Control`is 类型`HtmlGenericControl`不包含`CssClass`.

您需要将控件转换为 HtmlGenericControl 类型。例如

```
System.Web.UI.HtmlControls.HtmlGenericControl li = (System.Web.UI.HtmlControls.HtmlGenericControl) this.Page.Master.FindControl("nav_members"); 
```

然后，这将为您提供两种选择来将样式应用于元素。您可以使用该`Style`属性或该`Attributes`属性。

该`Style`属性将允许您向元素添加内联样式，例如：

```
li.Style.Add("Color", "Black"); 
```

这将渲染元素：

```
style="color:red;" 
```

您的另一个选择是使用`Attributes`允许您添加`class`.

```
li.Attributes.Add("class", "nameofyourclass"); 
```

阅读有关[HtmlGenericControl的更多信息](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlgenericcontrol.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T09:05:02.847

如果您找到该控件，则使用以下命令添加 css

```
 Control li = Page.Master.FindControl("nav_members");
 li .Style.Add("float", "left"); 
```

如果要覆盖某些属性，则可以使用

```
 li .Style.Add("width", "100px !important"); 
```

etc.Here is a good link
[在 CSS 中使用“！important”有什么影响？](https://stackoverflow.com/questions/3706819/what-are-the-implications-of-using-important-in-css)

这是一个类似的问题
[C# - How to change HTML elements attributes](https://stackoverflow.com/questions/186918/c-sharp-how-to-change-html-elements-attributes)

## 编辑 1。

您需要先将其转换为 html 通用控件

```
 HtmlGenericControl  li = (HtmlGenericControl)(Page.Master.FindControl("nav_members"));
 li .Style.Add("width", "100px !important"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:07:42.267

尝试 ：

```
nav_members.Attributes.Add("class", value); 
```

# java - Java 字符串到数组的处理

> ID：14600059
> 
> 赞同：0
> 
> 时间：2013-01-30T08:57:55.787
> 
> 标签：java, arrays

我有来自两个不同文件的这些数据，如下所示：

**文件 1：**

*   1001，名字一
*   1002，名字二
*   1003，三号
*   1004，名字四
*   1005，名五

**文件 2：**

*   1001、1234、450
*   1002、2345、560
*   1003、3456、730
*   1004、4567、200
*   1005、5678、1000

从上面的日期可以看出，它们相互引用*（1001、1002、...、1005）* 我的问题是将它们组合成一个**数组**并通过那里的引用检索它们的正确方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:04:52.113

您可以使用[地图](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)

```
Map<Integer,String>; 
```

然后您可以将第一个文件以及所有这些 id 存储在[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)中。

在第二个文件中，您可以简单地查找值并将它们都写入 Map

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:05:08.253

您可能想使用 Map 而不是数组。

遍历每一行，并使用第一个作为 Key 向 Map 添加一个条目（如果该条目已经存在，只需添加到内容中）。

# javascript - 在三星智能电视应用中播放视频

> ID：14600070
> 
> 赞同：1
> 
> 时间：2013-01-30T08:58:39.437
> 
> 标签：javascript, video, samsung-smart-tv

我正在创建一个三星智能电视应用程序，它可以播放列表中的视频。现在我正在研究samsungdforum 上提供的[这个例子。](http://www.samsungdforum.com/Guide/tut00055/index.html#creating-the-basic-application)这些示例在 smart tv emulator 2013 上运行良好但是当我点击播放按钮时，它不会播放视频。

这些消息出现在调试器中

```
 [JS ALERT]:  success vale :  true
 [JS ALERT]:  success vale :  true
 [JS ALERT]:  Volume : 40
 [JS ALERT]:  Volume : 40
 [JS ALERT]:  URL = 'http:&#47;/10.88.73.33/Video/Argentina.mp4'
 [JS ALERT]:  Key pressed: 71
 [JS ALERT]:  PLAY
 [JS ALERT]:  Play
 [JS ALERT]:  returnig state =1
 [JS ALERT]:  play btn clicked 
 [JS ALERT]:  URL = http:&#47;/10.88.73.33/Video/Argentina.mp4
 [JS ALERT]:  Play 
```

“Argentina.mp4”视频在我的视频文件夹中。

我究竟做错了什么 ？是 URl 还是其他东西？请引导我走向正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:02:52.770

有几个问题。

1.  URL 通常应该是以下格式 http:// - 看看你的 videosList.xml 并清理它

2.  在浏览器中尝试这个 url - 它不起作用！

您需要做的是修改您的 videosList.xml 以编写视频文件的绝对路径 - 它们很可能包含在您的项目中

# .net - 全局程序集缓存的性能影响

> ID：14600072
> 
> 赞同：1
> 
> 时间：2013-01-30T08:58:59.067
> 
> 标签：.net, dll, gac, infrastructure

为这个问题的冗长性质道歉。**TL;DR：跳到最后一段**。

一段时间以来，我一直在为此摸不着头脑，想不出一种方法来测试我的理论，即**同一 DLL 的多个副本会引入性能开销**。我们的其中一台服务器有 20-30 件内部分析软件，这些软件引用处理*业务逻辑和*对我们中央数据库的数据访问的单片内核。每个应用程序的**/bin**目录中存储了这个约 5MB DLL 的本地副本，大概*在每个应用程序第一次运行时被加载到内存中。现在可能没什么大不了的，但是当我们以这种方式运行 100 多个（计划中的）代理时，我开始听到警钟。

我已经在线阅读了几篇文章（例如： http: [//www.codeproject.com/Articles/4352/Demystifying-the-NET-Global-Assembly-Cache](http://www.codeproject.com/Articles/4352/Demystifying-the-NET-Global-Assembly-Cache)），其中讨论了在**.NET GAC**，但没有涉及性能主题，这是唯一能引起高层管理人员兴趣的可靠主题。

我想知道的是，当项目中引用全局程序集时，它是否与其他消费者应用程序共享相同的库实例，或者应用程序是否只是在运行时将它需要的所有内容加载到自己的单独区域中？

# python - 何时在 python 中使用单例？

> ID：14600075
> 
> 赞同：9
> 
> 时间：2013-01-30T08:59:11.283
> 
> 标签：python, python-2.7, singleton, instance

在 python 中使用 Singleton 模式有很多问题，虽然这个问题可能会重复已经讨论过的许多方面，但我还没有找到以下具体问题的答案。

假设我有一个类`MyClass`，我只想实例化一次。在 python 中，我可以在代码中执行以下操作`myclass.py`：

```
class MyClass(object): 
    def foo(self):
        ....

instance = MyClass() 
```

然后在任何其他程序中，我可以简单地引用该实例

```
import myclass
myclass.instance.foo() 
```

在什么情况下这种方法就足够了？在什么情况下使用单例模式有用/强制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T09:08:14.773

单例模式更多的是为了方便而不是需求。与其他语言相比，Python 与其他语言有点不同，因为它很容易在测试中模拟出单例（只是破坏全局变量！），但是在创建单例时问自己并不是一个好主意：我这样做是为了方便还是因为只有一个实例是非常必要的？未来有可能不止一个吗？

如果您创建的类实际上只构造一次，则将状态作为模块的一部分并将其方法放入模块级函数可能更有意义。如果将来有可能对一个实例的假设可能会发生变化，那么传递单例实例通常比通过全局名称引用单例要好得多。

例如，您可以通过这种方式轻松实现“单例”：

```
if __name__ == '__main__':
   instance = MyClass()
   doSomethingWith(instance) 
```

在上面，“instance”是单例的，因为它只被构造一次，但是处理它的代码提供的是 instance 而不是引用`module.instance`，这使得在将来重用代码片段变得更容易情况，你需要不止一个`MyClass`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T11:27:29.200

假设您想像 Michael Aaron Safyan 建议的那样将模块用作单例，即使该模块不是由主代码导入，您也可以通过执行以下操作（在主代码或它确实导入的模块中）使其工作直接或间接）。它所做的是将一个`instance`类属性初始化为一个，然后用`sys.modules`创建的实例替换模块对象：

```
class _MyClass(object):
    def foo(self):
        print 'foo()'

_MyClass.instance = _MyClass()

import sys
_ref = sys.modules[__name__]  # Reference to current module so it's not deleted
sys.modules[__name__] = _MyClass.instance 
```

当只有一个（注册表）有意义时，我发现单例是一种实现事物“寄存器”的有用方法——例如类工厂的一组类、一组常量或一组配置信息. 在许多情况下，只需一个普通的 Python 模块就可以了，因为**默认情况下**，它们实际上已经是单例，因为那些已经加载的模块会缓存在[`sys.modules`](https://docs.python.org/2/library/sys.html?highlight=sys.modules#sys.modules)字典中。

然而，有时，类实例更可取，因为它们可以传递构造参数并具有[属性](https://docs.python.org/2/howto/descriptor.html?highlight=properties#properties)——内置模块对象没有也不能拥有的东西。可以使用上面显示的技巧来解决此类限制，该技巧有效地将自定义类实例转换为模块对象。

使用类实例作为模块对象的想法来自[Alex Martelli](https://stackoverflow.com/users/95810/alex-martelli)的[ActiveState](http://code.activestate.com/recipes/langs/python/)配方，名为[*Python 中的常量*](http://code.activestate.com/recipes/65207-constants-in-python/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T09:12:42.463

在我看来，单例模式有两个方面。

*   您需要给定服务的单一上下文，因为多个上下文没有意义。
*   您想绝对阻止人们创建给定类型的两个对象，因为它可能会破坏您的服务

虽然第一种情况可能有一些应用程序（日志服务），但第二种情况通常是设计不佳的标志。

您应该设计您的 API，以便您的用户不必考虑这个问题。但是，如果他们挖掘您未记录的层以找到您的隐藏构造函数并出于任何原因想要使用它，他们不应该处理为阻止他们执行所需操作而创建的无用构造。

# joomla - 本地主机上的 Joomla 1.7 PHP 邮件不起作用

> ID：14600079
> 
> 赞同：1
> 
> 时间：2013-01-30T08:59:21.700
> 
> 标签：joomla, joomla2.5, joomla-extensions, joomla1.7

我是 joomla 的新手，我正在尝试使用 J1.7 上的标准联系表格发送电子邮件。我将我的邮件程序设置为 PHP Mail 的默认值，并在电子邮件字段中输入我的 gmail id。我正在运行 WAMP 2.0 和我的本地主机 Windows 7 。我无法使用 PHP Mail 在本地主机上配置电子邮件。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:51:29.857

如果您想使用 PHP 邮件，您应该检查 php.ini 上的设置。只需寻找 [邮件功能] 部分。但是，如果您的本地计算机上没有 smtp 服务器，您将最终设置一个外部 smtp 服务器来执行 PHP 邮件功能。

在这一点上，我认为配置 Joomla 更容易！通过电子邮件发送到外部 smtp。在这里，您有一个指向 joomla 文档的链接，该链接显示了如何使用 Gmail 发送电子邮件：[docs.joomla.org/How_do_I_use_Gmail_as_my_mail_server](http://docs.joomla.org/How_do_I_use_Gmail_as_my_mail_server%3F)

问候！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T02:30:47.687

[或者您可以为 SMTP](http://docs.joomla.org/How_do_I_use_Gmail_as_my_mail_server?)设置一个 gmail 帐户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:47:09.513

实际上，您无法在 localhost 服务器上测试邮件。您必须将其上传到服务器。但是有办法做到这一点。[读这个](http://blog.techwheels.net/send-email-from-localhost-wamp-server-using-sendmail/)。[这也是](http://www.conticreative.com/The-Conticreative-Joomla-Blog/joomla-email-localhost.html)。

# ember.js - ember-data 初始化错误：“未捕获的 TypeError”

> ID：14600080
> 
> 赞同：1
> 
> 时间：2013-01-30T08:59:25.070
> 
> 标签：ember.js, ember-data

我刚刚下载了 ember-1.0.0-pre.4.js 和 ember-data-latest.js 并在应用程序初始化时收到以下错误：

> 未捕获的类型错误：对象 Ember.Application 没有方法“registerInjection”

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T09:31:28.957

不幸的是，GitHub 上的*ember-data-latest.js*没有与 Ember Pre 4 保持同步。您必须访问`git clone`Ember DS 存储库，然后使用`rake`.

你可以在这里找到它[或](http://builds.emberjs.com.s3.amazonaws.com/ember-data-latest.js)从[这里找到缩小版](http://builds.emberjs.com.s3.amazonaws.com/ember-data-latest.min.js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:46:58.070

具体可以从[http://cdnjs.com/](http://cdnjs.com)获取 ：

*   //cdnjs.cloudflare.com/ajax/libs/ember-data.js/0.8.0-latest20121123/ember-data-latest.min.js
*   //cdnjs.cloudflare.com/ajax/libs/ember-data.js/0.8.0-latest20121123/ember-data-latest.js

# cognos - 在 Cognos 10 中以 2 种格式报告

> ID：14600082
> 
> 赞同：1
> 
> 时间：2013-01-30T08:59:28.213
> 
> 标签：cognos

如何使用渲染变量在 Cognos 10 中制作报告，以便在同一页面上获得结果。报告应该有一个下拉选项供用户查看 LIST 或 CROSTAB 中的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:04:28.830

*   有几种方法我会展示一种你已经非常接近的方法。

    1.  创建一个名为“vReportFormat”之类的变量，表示对确定格式的参数做了一个案例

例子

变量名称：vReportFormat

案例何时？参数？= 'List' Then 'List' Else 'Crosstab' End

1.  在列表的渲染变量属性中选择新创建的变量“vReportFormat”，然后仅选择您在创建变量时创建的输出值“列表”。通过在报表运行时仅选择列表，它将首先评估变量，然后列表仅在输出值为“列表”时呈现 - 为交叉表重复此变量分配，但当然选择“交叉表”作为输出值。

2.  还有其他变体，例如创建两个报表页面并在 Page 对象本身上使用呈现变量 - 工作方式完全相同。

希望这可以帮助。

# java - 在 pom.xml 中找不到工件问题

> ID：14600084
> 
> 赞同：0
> 
> 时间：2013-01-30T08:59:34.223
> 
> 标签：java, maven, pom.xml

我是 J2EE 新手。我在 pom.xml 中遇到问题。我`pom.xml`的是这样的：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<artifactId>atom</artifactId>
<packaging>pom</packaging>
<name>ATOM</name>
<!-- Shared version number properties passed down to modules -->
<properties>
    <org.springframework.version>3.1.2.RELEASE</org.springframework.version>
    <slf4j.version>1.5.11</slf4j.version>
    <log4j.version>1.2.16</log4j.version>
    <junit.version>4.8.2</junit.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.build.resourceEncoding>${project.build.sourceEncoding}</project.build.resourceEncoding>
</properties>
<modules>
    <module>atom-domain</module>
    <module>atom-presentation</module>
</modules>
<dependencies>
    <!-- Logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${slf4j.version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${slf4j.version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${slf4j.version}</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>${log4j.version}</version>
    </dependency>
</dependencies>

<description>New ATOM Project</description>
<parent>
    <groupId>com.bah</groupId>
    <artifactId>atom</artifactId>
    <version>0.0.1-SNAPSHOT</version>
</parent> 
```

我的标签有错误。`<parent>`我不知道要修复它。我的错误报告是这样的：

```
 The project com.bah:atom:0.0.1-SNAPSHOT (D:\eclipse_code\J2EE_workspace\atom\pom.xml) has 1 error
 [ERROR]   Non-resolvable parent POM: Could not find artifact com.bah:atom:pom:0.0.1-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 45, column 10 -> [Help 2] 
```

请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:05:00.233

`<relativePath>`向父级添加参数`<parent>`

```
<parent>
    <groupId>com.bah</groupId>
    <artifactId>atom</artifactId>
    <version>0.0.1-SNAPSHOT</version>
     <relativePath>../pathtopom/my-parent-pom.xml</relativePath>
</parent> 
```

**或**之前安装父pom。
执行
`mvn clean install -f my-parent-pom.xml`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T09:19:15.897

你确定你需要`parent`和`modules`标签吗？通常不需要任何这个标签，除非你想要一个 pom 文件一次构建所有模块（'maven reactor' [http://maven.apache.org/guides/mini/guide-multiple-modules.html](http://maven.apache.org/guides/mini/guide-multiple-modules.html)）使用`dependency`和丢弃父子结构。

# android - 如何编写 PhoneGap/Cordova 应用程序

> ID：14600085
> 
> 赞同：2
> 
> 时间：2013-01-30T08:59:40.313
> 
> 标签：android, html, cordova

我从 PhoneGap 开始，但我完全迷失了：我按照入门教程进行操作，所以我有 ADT 包（android SDK + eclipse + ADT 插件），我在 cordova 中使用 create.bat 创建了一个默认项目，我可以从 Eclipse 在我的设备上运行它。

关键是教程到此为止，并且在默认项目中没有任何 HTML/JS 文件，一切都是 java/xml 就像一个普通的 android 项目。所以我从现有资源创建了一个新项目，这次我使用了 PhoneGap（仍然不明白与 Cordova 有什么区别，以及我是否需要两者）所以我选择了 phonegap 中的“示例”文件夹作为我现有的来源。

现在我有一个带有一些 jar 文件的项目，还有一个带有 index.html 和 main.js 的 assets/www 文件夹，所以这似乎很好上手：关键是我找不到任何解释的 android 教程如何从中构建应用程序。

此外，Ecpise 以一种所见即所得的视图（无需编辑）打开 index.html，并且没有任何切换到 html 代码编辑器的功能。我需要安装 Eclipse Web Platform 或其他任何东西吗？

请在这里更清楚地了解所有内容的人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T10:57:46.400

首先，关于 Cordova / PhoneGap 的事情：最初，一家名为 Nitobi 的公司开发了 PhoneGap。然后它们被 Adob​​e 收购，后者在 Apache 基金会下开源了该框架 - 这就是所谓的 Cordova。Adobe 将继续开发商业品牌的 PhoneGap，围绕它提供 PhoneGapBuild 等服务，并继续为仍然是 PhoneGap 核心的 Cordova 项目做出贡献。

你是对的，一旦你开始工作，几乎所有的开发都发生在 assets/www 文件夹中——这就是你所有的 HTML、JavaScript 和图像等将存在的地方。

在 Eclipse 中，您可以通过转到帮助 -> 安装新软件，并展开“Web、XML 和 Java EE 开发”组，然后选中“Eclipse Web 开发者工具”和“网页编辑器”来安装 Web 开发者工具（可选)”。更多详细信息：[https ://stackoverflow.com/questions/54868/what-is-the-best-html-editor-for-eclipse](https://stackoverflow.com/questions/54868/what-is-the-best-html-editor-for-eclipse)

在正在进行的教程方面，我的一位同事目前正在通过博客编写一个使用 Cordova 构建非常简单的 CRM 系统的示例；[您可以在http://www.vsnomad.com/tag/dtw-crm-sample/](http://www.vsnomad.com/tag/dtw-crm-sample/)找到这些帖子。该博客假设您使用的是 Nomad，它允许您在 Visual Studio 中开发 Cordova 项目，但如果您忽略 VS 位，HTML 和 JavaScript 应该仍然适用于您。

（明显的披露：我在为 Visual Studio 构建 Nomad 的团队工作。希望该示例是真正有用的，即使您没有使用该产品！）

# asp.net-mvc - 如何在 CSHTML 文件中引用 CSS？

> ID：14600087
> 
> 赞同：4
> 
> 时间：2013-01-30T08:59:47.877
> 
> 标签：asp.net-mvc, razor

如何在我的 Razor 内容/子页面中应用/放置外部或额外的`<script>`引用和 CSS ？`<link>`

```
@model Portal.Common.Models.TempModel
@{   

    ViewBag.Title = "asdasd";
    ViewBag.MissionId = id;
    ViewBag.id = 0;
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@if (false)
{
    <script src="../../Scripts/jquery-1.7.1-vsdoc.js" type="text/javascript"></script>
    <link href="../../Content/Site.css" rel="stylesheet" type="text/css" />
    <script src="...../ui/jquery.ui.mouse.js"></script>
    <script src="...../ui/jquery.ui.draggable.js"></script>         
}
<style type="text/css">
img[src*="iws3.png"] {
    display: none;
}
@section JavaScript {
<script type="text/javascript" src="https://www.google.com/jsapi"></script>    
<script type="text/javascript"></script> " 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T09:08:20.970

在您的 _Layout 中，您可以有 2 个部分：一个用于脚本，一个用于样式：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    @RenderSection("Styles", false)
</script>
</head>
<body>
    @RenderBody()
    @RenderSection("Scripts", false)
</body>
</html> 
```

然后在您的视图中覆盖您想要的部分：

```
@model Portal.Common.Models.TempModel 

@{
    ViewBag.Title = "asdasd";
    ViewBag.MissionId = id;
    ViewBag.id = 0;
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {
    <!-- main CSS -->
    <link href="@Url.Content("~/Content/Site.css)" rel="stylesheet" type="text/css" />

    <!-- some external CSS -->
    <link href="http://www.example.com/foo.css" rel="stylesheet" type="text/css" />

    <!-- some inline CSS -->
    <style type="text/css">
        img[src*="iws3.png"] {
            display: none;
        }
    </style>
}
@section Scripts {
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>    
    <script src="@Url.Content("~/ui/jquery.ui.mouse.js")></script>
    <script src="@Url.Content("~/ui/jquery.ui.draggable.js")></script>
    <script type="text/javascript">
        // some inline javascript
    </script>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T12:26:14.360

另一种方式，当从不同的 cshtml 文件引用相同的 css 和脚本文件并且您没有使用默认布局时，它很有用。在共享文件夹中创建一个局部视图（让 _Reference.cshtml），并为原始输出添加以下内容：

```
@Html.Raw("<link href='../../Content/Site.css' rel='stylesheet'>")
.....
@Html.Raw("<script src='../../Scripts/jquery-1.5.1.min.js'></script>") 
```

现在在引用 cshtml 的 head 标记中，添加以下内容：

```
<head>
<title>MVC Test</title>
@Html.Partial("_Reference")
</head> 
```

希望这会对某人有所帮助。

# jquery - 编写此代码的更好方法？jQuery

> ID：14600088
> 
> 赞同：3
> 
> 时间：2013-01-30T08:59:51.543
> 
> 标签：jquery, arrays, pagination, each

我有一个数组，我做了一些事情，但现在我试图在“页面”之间划分它（更像是幻灯片）。

我使用该方法循环遍历它`.each()`，调用这段冗长的代码将信息放在正确的页面上（现在至少每页只有 5 个项目）。

有没有办法简化这段代码？

理想情况下，它可以无限继续：

```
if (index > 0 && index <= 5) {
    var page = $('#librarian-page-gallery-1');
} else if (index > 5 && index <= 10) {
    var page = $('#librarian-page-gallery-2');
} else if (index > 10 && index <= 15) {
    var page = $('#librarian-page-gallery-3');
} else if (index > 15 && index <= 20) {
    var page = $('#librarian-page-gallery-4');
} else if (index > 20 && index <= 25) {
    var page = $('#librarian-page-gallery-5');
} else if (index > 25 && index <= 30) {
    var page = $('#librarian-page-gallery-6');
} else if (index > 30 && index <= 35) {
    var page = $('#librarian-page-gallery-7');
} else if (index > 35 && index <= 40) {
    var page = $('#librarian-page-gallery-8');
} else if (index > 45 && index <= 50) {
    var page = $('#librarian-page-gallery-9');
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T09:00:42.017

例如 ：

```
var page = $('#librarian-page-gallery-' + Math.ceil(index/5)); 
```

解释 ：

```
 index/5 builds a float number :
         1 -> 0.2
         4 -> 0.8
         5 -> 1
         6 -> 1.2

   and Math.ceil returns the nearest greater or equal integer :
         0.2 -> 1
         0.8 -> 1
         1   -> 1
         1.2 -> 2 
```

# mysql - 按问题排序 MySQL 与 SQL Server

> ID：14600089
> 
> 赞同：0
> 
> 时间：2013-01-30T08:59:53.410
> 
> 标签：mysql, sql, sql-server, sql-order-by

我在**SQL Server**中有一个这样的 SQL 查询

```
SELECT 
    CASE WHEN ROW_NUMBER() OVER(PARTITION BY _no ORDER BY _no asc) = 1 THEN 
                        _no ELSE '' END 
    as row_no,
    _no,
    _name,
    r._names
FROM
(
    SELECT '1' as _no, 'vikas' as _name UNION ALL
    SELECT '1', 'kratika' UNION ALL
    SELECT '2', 'vikas' UNION ALL
    SELECT '1', 'kratika kastwar' 
) t
INNER JOIN 
(
    SELECT '1' as _nos, 'One' as _names UNION ALL
    SELECT '2', 'two' 
) r
ON r._nos = t._no
ORDER BY _no 
```

输出：

```
row_no _no  _name           _names
------ ---- --------------- ------
1      1    kratika         One
       1    kratika kastwar One
       1    vikas           One
2      2    vikas           two 
```

和我在**MySQL**中做的一样

```
SELECT 
    CASE WHEN _no = @i THEN '' ELSE @i := _no END
    as row_no,
    _no,
    _name,
    r._names
FROM
(
    SELECT '1' as _no, 'vikas' as _name UNION ALL
    SELECT '1', 'kratika' UNION ALL
    SELECT '2', 'vikas' UNION ALL
    SELECT '1', 'kratika kastwar' 
) t
INNER JOIN 
(
    SELECT '1' as _nos, 'One' as _names UNION ALL
    SELECT '2', 'two' 
) r
ON r._nos = t._no
,
(SELECT @i := '') temp
ORDER BY _no 
```

输出 ：

```
1   1   vikas           One
    1   kratika         One
1   1   kratika kastwar One
2   2   vikas           two 
```

但我期待 这样的**MySQL输出**

```
1      1    kratika         One
       1    kratika kastwar One
       1    vikas           One
2      2    vikas           two 
```

我不想在**MySQL**中使用这样的查询作为 desc [MYSQL Order By W/Count](https://stackoverflow.com/questions/14589481/mysql-order-by-w-count)

```
SELECT 
    CASE WHEN _no = @i THEN '' ELSE @i := _no END
    as row_no,
    _no,
    _name,
    _names
FROM
(SELECT 
    *
FROM
(
    SELECT '1' as _no, 'vikas' as _name UNION ALL
    SELECT '1', 'kratika' UNION ALL
    SELECT '2', 'vikas' UNION ALL
    SELECT '1', 'kratika kastwar' 
) t
INNER JOIN 
(
    SELECT '1' as _nos, 'One' as _names UNION ALL
    SELECT '2', 'two' 
) r
ON r._nos = t._no
,
(SELECT @i := '') temp
ORDER BY _no) t 
```

我如何在 MySQL 中实现相同的功能，查询性能是主要参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:16:11.857

我认为这里发生的事情是 MySQL 正在构建结果集，然后通过一个额外的步骤根据 ORDER BY 子句对其进行排序。由于该`'kratika kastwar'`行位于 where `_no`is行之后`2`，因此您会得到意外的输出。

我想，解决方案是将基本`SELECT`（没有特殊的用户变量恶作剧）放在子句的子查询中`FROM`，将`ORDER BY`子句应用于子查询。然后在外部查询中执行用户变量工作。这样订购就已经发生了。

编辑：我看到你说你不想这样做。我认为您别无选择，除非您可以`ORDER BY`通过对计算结果执行文件排序步骤（非常不可能）找到一种方法让 MySQL 不这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:06:53.147

```
SELECT 
    CASE WHEN _no = @i THEN '' ELSE @i := _no END
    as row_no,
    _no,
    _name,
    _names
FROM
(SELECT 
    *
FROM
(
    SELECT '1' as _no, 'vikas' as _name UNION ALL
    SELECT '1', 'kratika' UNION ALL
    SELECT '2', 'vikas' UNION ALL
    SELECT '1', 'kratika kastwar' 
) t
INNER JOIN 
(
    SELECT '1' as _nos, 'One' as _names UNION ALL
    SELECT '2', 'two' 
) r
ON r._nos = t._no
,
(SELECT @i := '') 
```

# android - 动态分配资源与大开关案例

> ID：14600091
> 
> 赞同：1
> 
> 时间：2013-01-30T08:59:56.030
> 
> 标签：android, performance, switch-statement

我对我的 Android 代码的性能和最佳方法有疑问。

我需要做的很简单，我想根据 int 参数动态地将文本值分配给字符串资源：

现在我正在使用一个大开关盒

```
int messagesCategory;
if(extras !=null) {
        messagesCategory = extras.getInt("category");
    }

TextView titleText;
    titleText = (TextView) findViewById(R.id.headerTitle);

switch (messagesCategory) {
    case 1: titleText.setText(R.string.TitleMessageList1); break;
    case 2: titleText.setText(R.string.TitleMessageList2); break;
    case 3: titleText.setText(R.string.TitleMessageList3); break;
    case 4: titleText.setText(R.string.TitleMessageList4); break;

    case ...: titleText.setText(R.string.TitleMessageList...); break;

    case n: titleText.setText(R.string.TitleMessageListn); break;
    default: titleText.setText("a default title");  break;
    } 
```

假设我在这个开关中有 30 行......它可以工作，但在很多情况下，看起来有更好的方法来实现这一点。不幸的是，似乎不可能为 R.string 分配一些动态的东西。

所以我的第一个问题是：1）性能方面，在这种情况下，30 左右的情况下使用大开关是否有问题？2）什么应该是最好的方法？

谢谢，祝你有美好的一天

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T09:02:38.123

简单的，

```
int[] stringIds = {R.string.TitleMessageList1, R.string.TitleMessageList2,...};

int messagesCategory;
TextView titleText = (TextView) findViewById(R.id.headerTitle);
    if(extras !=null) {
            messagesCategory = extras.getInt("category");
            if(messagesCategory  <= n)
            titleText.setText(stringIds[messagesCategory]);
            else  titleText.setText("a default title"); 
 } 
```

现在，**没有 switch-case**和比较，Basic Java 和 Android 基础使其变得简单而简短。

作为在文件`R.string.XXX`中`int value`生成的，`R.java`您必须创建一个包含该值的 int 数组，然后使用您的`int messagesCategory`. 并直接设置为`TextView`..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:37:00.167

你也可以这样做：

```
Field f = R.id.class.getField("TitleMessageList" + String.valueOf(messagesCategory));
int val = f.getInt(null);
titleText.setText(val); 
```

它速度很快，无需将所有 id 加载到内存中。

享受！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:02:02.123

switch case 相当于`GOTO`您的代码中的，并且无需担心性能。

您的代码很好，可能不太好，但它有效且高效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T09:03:50.950

1.  我不认为 30`case`条语句不会造成太大伤害，除非你在循环中执行它们、遍历数组等等。

2.  你为什么不直接使用 R.string 给你的整数？映射真的有必要吗？您可以传递 R.string 标识符。否则，如果您真的担心性能，您可以在数组中查找。

# jquery - 在jquery中动态隐藏/删除/显示导航栏

> ID：14600097
> 
> 赞同：1
> 
> 时间：2013-01-30T09:00:25.347
> 
> 标签：jquery, navbar

我已经为此工作了很长时间..找不到解决方案..

这是具有 3 个元素的导航栏的代码...

```
<div data-role="navbar" style="background:#82C1D7; margin-top:0.5em;">
  <ul  data-autodividers="true" >
                <li>
                <a href="" style="font:Arial, Helvetica, sans-serif; font-size:14px;background:transparent" onClick="mofcall()">MOF</a></li>
                <li>
                <a href="" style="font:Arial, Helvetica, sans-serif; font-size:14px;background:transparent" onClick="remarkcall()">Remarks</a></li>
                <li>
                <a href="" style="font:Arial, Helvetica, sans-serif; font-size:14px;background:transparent" onClick="approvalcall()">Approval</a></li>
            </ul></div> 
```

**我的问题 ：**

我有一个应用程序，来自组织不同部门的成员可以登录并查看他们的请求/消息..

现在这里的问题是我必须只向一个部门的成员显示 MOF、备注（我的代码的前 2 个 href）和备注、仅向其他部门成员显示批准（我的代码的最后 2 个 href）.. 如何我会动态隐藏或显示这些吗？？？你能帮我吗？

**类似的帖子：**

[在此处输入链接描述](https://stackoverflow.com/questions/6285869/how-do-i-add-remove-elements-in-a-jquery-mobile-navbar)转到此并回到我的问题

现在因为它被指定在那里我想动态隐藏我的内容......我的其他两个内容也必须占用 1/2 宽度......

现在清楚了吗？？还是我还需要精确？对不起，伙计们……我对这些东西很陌生……所以如果我不清楚，请指教！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:19:47.363

为此，我必须添加 2 个导航栏，并且我只显示一个或另一个，与[此问题](https://stackoverflow.com/questions/6285869/how-do-i-add-remove-elements-in-a-jquery-mobile-navbar)的解决方案非常相似。

HTML 代码

```
<div id="navbar1" data-role="navbar" style="background:#82C1D7; margin-top:0.5em;">
  <ul data-autodividers="true">
    <li>
      <a href="" style="font:Arial, Helvetica, sans-serif; font-size:14px;background:transparent"
      onClick="remarkcall()">Remarks</a>
    </li>
    <li>
      <a href="" style="font:Arial, Helvetica, sans-serif; font-size:14px;background:transparent"
      onClick="approvalcall()">Approval</a>
    </li>
  </ul>
</div>
<div id="navbar2" data-role="navbar" style="background:#82C1D7; margin-top:0.5em;">
  <ul data-autodividers="true">
    <li>
      <a href="" style="font:Arial, Helvetica, sans-serif; font-size:14px;background:transparent"
      onClick="mofcall()">MOF</a>
    </li>
    <li>
      <a href="" style="font:Arial, Helvetica, sans-serif; font-size:14px;background:transparent"
      onClick="remarkcall()">Remarks</a>
    </li>
  </ul>
</div> 
```

Javascript代码

```
var isOneDepartment = true;
if (isOneDepartment) {
  $("#navbar1").remove();
} else {
  $("#navbar2").remove();
} 
```

[您可以更改 jsfiddle http://jsfiddle.net/c6FHN/2/](http://jsfiddle.net/c6FHN/2/)中的 isOneDepartment 变量，以查看更改。由于我不知道您的登录系统是如何工作的，我假设您有能力在客户端（网页）上检查某人所在的部门。我同意不应该这样做的评论在客户端，通常服务器会处理这个，但如果你必须在客户端做，这是我能想到的最好的方法。

# r - 在 R 或 R Studio（服务器）中交互输入密码？

> ID：14600099
> 
> 赞同：18
> 
> 时间：2013-01-30T09:00:33.373
> 
> 标签：r, passwords, rstudio, rstudio-server

R中是否有办法以交互方式将密码输入命令行并将其隐藏在屏幕上？我知道有`readLine`，但我不知道密码可以隐藏在那里。假设您想使用`ROracle`or连接到数据库，`RMySQL`并且不想将密码存储在脚本中，而是让用户在每次执行查询时都输入密码。

是的，我们在这里有一个类似的[问题](https://stackoverflow.com/questions/2917202/r-way-to-securely-give-a-password-to-r-application)，但我觉得情况已经改变，值得再次解决这个问题。不幸的是`tcltk`，不适用于 RStudio（服务器）。

但是，我看到 R Studio 的人们找到了支持版本控制的解决方案。我记得以前的版本，每次我在 R Studio 中输入我的 repo 密码时，我都可以看到它，但现在这似乎已经修复了。我知道这可能是 R Studio 技术，但是在使用 R Studio Server 时，普通 R 用户是否可以访问它？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-30T15:47:14.160

实际上 R Studio (Server) 提供了一个很好的解决方案。您可以使用`.rs`函数访问它。他们提供了一个无证密码功能，虽然没有保证永远和一天的支持，但它非常好：

```
.rs.askForPassword("foo") 
```

您可以在这里找到 RStudio 的 Josh 的原始提示：http: [//support.rstudio.org/help/discussions/questions/1448-password-interaction-with-dbs-on-rstudio-server](http://support.rstudio.org/help/discussions/questions/1448-password-interaction-with-dbs-on-rstudio-server)

编辑：截至 2015 年，还有另一个很好的交互式输入密码的解决方案。您可以使用`shiny`带有密码表单的基于 Web 的小窗口。我与@hadley 的讨论显示了一个示例片段：[https ://github.com/rstats-db/RPostgres/issues/26](https://github.com/rstats-db/RPostgres/issues/26)

编辑：截至 2017 年，还有另一个更新。@m-dz 向我们指出了这一点： `rstudioapi::askForPassword("Enter your pw")`以及`getPass::getPass()`来自[R Studio 支持网页](https://support.rstudio.com/hc/en-us/community/posts/115000470088-function-rs-askForPassword-and-R-Markdown)。另外，我还意识到有`.rs.api.askForPassword()`一个与最初建议的调用等效的方法——至少就我所见而言。

# iphone - 获取我的应用的评论和评分列表

> ID：14600100
> 
> 赞同：-1
> 
> 时间：2013-01-30T09:00:37.497
> 
> 标签：iphone, ios6, app-store-connect

是否有任何链接可以为我提供 iTunes 商店中我的应用程序的评论列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:07:58.307

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id=APP_APPLE_ID"]];

```

APP_APPLE_ID 是您的 Apple ID，您可以从 iTunes->Manage Your Applications 获取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:11:11.920

是的，**现在**有，几个月前还没有。

只需导航到 iTunes Connect -> 管理您的应用程序 -> MyApp -> 查看客户评分和评论（在 iTunes 链接中）部分

# ios - 延迟交付时间的 XMPPFramework 扩展

> ID：14600103
> 
> 赞同：1
> 
> 时间：2013-01-30T09:00:51.397
> 
> 标签：ios, cocoa-touch, xmppframework

我想在我的聊天中显示时间标签。但是我在解析器之后找不到数据时间。是否可以向我的库添加扩展以获得时间？

我使用[https://github.com/robbiehanson/XMPPFramework](https://github.com/robbiehanson/XMPPFramework) 和简单的客户端示例。

我想使用 XEP-0203 (XMPPElement+Delay.h) 的扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:04:16.630

1.  编译`XMPPElement+Delay.m`并将 for 行添加`XMPPElement+Delay.h`到您的`XMPPFramework.h`.
2.  在您的委托类中，将代码放入`-xmppStream:didReceiveMessage`调用`[message delayedDeliveryDate]`并记录结果。确保你`#import "XMPPFramework.h"`.
3.  如果您获得了正确的日期，请使用 NSDateFormatter 将其呈现为您喜欢的字符串。如果不是，可能需要注销整个消息，以了解服务器是否正确发送日期。

# android - 在 ViewPager 中关闭键盘

> ID：14600104
> 
> 赞同：3
> 
> 时间：2013-01-30T09:00:55.507
> 
> 标签：android, android-layout, android-viewpager, android-softkeyboard

我已经使用 ViewPager 实现了三个选项卡。在右侧选项卡布局中，我有一个编辑文本小部件，当用户单击它时，键盘会出现。如果用户不手动关闭键盘并滑动到中间或左侧选项卡，则键盘将保留在屏幕上。那么如何避免在我不需要的其他两个选项卡中使用键盘。

编辑：这是我的代码。

```
 class ViewPagerActivity extends Activity   {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

            setContentView(R.layout.main);

    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(1);
    TitlePageIndicator titleIndicator = (TitlePageIndicator) findViewById(R.id.titles);
    titleIndicator.setViewPager(myPager);

      } } 
```

第二个文件：MyPagerAdapter.java

```
 class MyPagerAdapter extends PagerAdapter implements OnClickListener,
    OnLongClickListener, AdapterView.OnItemSelectedListener {

public Object instantiateItem(View collection, int position) {

    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    View view;
    switch (position) {

    case 0:
        resId = R.layout.left;
        view = inflater.inflate(resId, null);
        break;
    case 1:

        resId = R.layout.main_c;

        view = inflater.inflate(resId, null);

        btn_no1 = (Button) view.findViewById(R.id.one);
        btn_no1.setOnClickListener(this);
                    ((ViewPager) collection).addView(view, 0);
        return view;
           case 2:
        resId = R.layout.right;

        view = inflater.inflate(resId, null);

        main_spinner = (Spinner) view.findViewById(R.id.spinner1);
        main_spinner.setOnItemSelectedListener(this);

        from_spinner = (Spinner) view.findViewById(R.id.spinner2);
        from_spinner.setOnItemSelectedListener(this);

        to_spinner = (Spinner) view.findViewById(R.id.spinner3);
        to_spinner.setOnItemSelectedListener(this);

        swap = (ImageButton) view.findViewById(R.id.swap_spinner);
        swap.setOnClickListener(this);
        ((ViewPager) collection).addView(view, 0);

        return view;

    }

    view = inflater.inflate(resId, null);

    ((ViewPager) collection).addView(view, 0);

    return view;
} 
```

TitlePageIndicator 看起来像这样：[TitlePageIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/library/src/com/viewpagerindicator/TitlePageIndicator.java)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:10:31.483

在我看来，这不是一个严重的问题。用户打开键盘进行文本输入，并在不再需要时将其隐藏。

引用您的 EditText 对象，这应该隐藏键盘：

```
InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
mgr.hideSoftInputFromWindow(editText.getWindowToken(), 0); 
```

离开右侧选项卡时调用上面的代码段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:07:34.830

试试这个。

首先，监听 ViewPager.OnPageChangeListener 事件。然后检查软键盘是否可见，如果它显示在不需要的页面中，则使用以下代码将其隐藏：

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
if(imm != null){
    imm.toggleSoftInput(0, InputMethodManager.HIDE_IMPLICIT_ONLY);
} 
```

希望有帮助。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-23T13:44:07.623

如果它对某人有帮助，我想出了这个：

实用程序类

```
public void hideKeyboard(Activity activity) {
    if (activity == null || activity.getCurrentFocus() == null || activity.getCurrentFocus().getWindowToken() == null) return;

    InputMethodManager inputManager = (InputMethodManager) activity.getSystemService(Context.INPUT_METHOD_SERVICE);
    inputManager.hideSoftInputFromWindow(activity.getCurrentFocus().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
}

public void hideKeyboard(Fragment fragment) {
    if (fragment == null || fragment.getActivity() == null || fragment.getActivity().getCurrentFocus() == null || fragment.getActivity().getCurrentFocus().getWindowToken() == null) return;

    InputMethodManager inputManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
    inputManager.hideSoftInputFromWindow(fragment.getActivity().getCurrentFocus().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
} 
```

在 MyPagerAdapter 类里面

```
 @Override
public void setPrimaryItem(ViewGroup container, int position, Object object) {
    super.setPrimaryItem(container, position, object);

    //assuming fragment in position 2 should hide the keyboard
    if (position == 2) {
        new SystemGlobal().hideKeyboard((Fragment) object);
    } 
} 
```

# ruby-on-rails - 选择要提交的表单字段

> ID：14600111
> 
> 赞同：0
> 
> 时间：2013-01-30T09:01:35.820
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个`CommercialDocument`具有`discount_amount`属性和`discount_amount_with_tax`虚拟属性的模型。

这是我在模型中定义的方式：

```
def discount_amount_with_tax
  discount_amount * (1 + tax.rate / 100)
end

def discount_amount_with_tax=(amount)
  self.discount_amount = amount.to_f / (1 + tax.rate / 100)
end 
```

在我的表格中，用户可以同时填写`discount_amount`和`discount_amount_tax`：

```
= f.label :discount_amount
= f.text_field :discount_amount
= f.text_field :discount_amount_with_tax 
```

我想优先考虑该`discount_amount_with_tax`字段，这意味着`discount_amount`除非其他字段为空，否则不得考虑。

我的问题是，如果我什么都不放在`discount_amount_with_tax`字段中，比如说 10 in `discount_amount`，那么`discount_amount`将等于 0，这显然不是我想要的。

我怎样才能解决这个问题 ？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:29:11.463

```
"".to_i
# => 0 
```

空白字符串转换*为零*整数。所以：

```
def discount_amount_with_tax=(amount)
  self.discount_amount = amount.to_f / (1 + tax.rate / 100)
end

# same as...

def discount_amount_with_tax=(0)
  self.discount_amount = 0 / (...)
end

# 0 / anything except zero = 0
# self.discount_amount = 0 no matter what 
```

在批量分配期间，`discount_amount_with_tax=`被调用。空白表单输入作为空字符串传递，然后 Active Record 将其转换为整数（零）。无论' 的先前值如何，都`discount_amount_with_tax=`设置为零。`discount_amount``discount_amount`

解决此问题的简单方法是使用条件：

```
def discount_amount_with_tax=(amount)
  self.discount_amount = (amount.to_f / (1 + tax.rate / 100)) if amount > 0
end 
```

请注意，这是*简单的方法*，而不是理想的方法。更好的解决方案是在控制器中编写自定义设置器逻辑来代替批量赋值；基本上是在控制器中*手动*设置这些属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:29:28.583

我认为您可以在此处使用 before_validation 回调来设置 discount_amount 字段。

```
 before_validation :calculate_discount_amount

  def discount_amount_with_tax
    @discount_amount_with_tax ||= discount_amount * (1 + tax.rate / 100.0)
  end

  def discount_amount_with_tax=(amt)
    @discount_amount_with_tax = amt
  end

  def calculate_discount_amount
    self.discount_amount = discount_amount_with_tax / (1 + tax.rate / 100.0)
  end 
```

只是提醒您，您需要使用 100.0 而不是 100，以便您将除以浮点数而不是整数。

# css - 如何在 QWebView 中禁用拖动项

> ID：14600113
> 
> 赞同：0
> 
> 时间：2013-01-30T09:01:46.837
> 
> 标签：css, qt, qwebview

当用户可以在没有 mousepressevent() 函数的情况下拖动 QwebView 的任何项目时，如何禁用鼠标按下事件。因为我不是在推广 QWebView 类。

# sharepoint-2010 - FIM 同步服务器未启动 - SharePoint 2010

> ID：14600118
> 
> 赞同：3
> 
> 时间：2013-01-30T09:02:12.737
> 
> 标签：sharepoint-2010

FIM 同步服务出现问题，无法在应用程序日志中以以下消息启动

* * *

服务器遇到意外错误并停止。

```
 "BAIL: MMS(9948): sql.cpp(8490): 0x80231334 (The sql connection string has unsupported values.)
BAIL: MMS(9948): sql.cpp(8533): 0x80231334 (The sql connection string has unsupported values.)
BAIL: MMS(9948): server.cpp(260): 0x80231334 (The sql connection string has unsupported values.)
BAIL: MMS(9948): server.cpp(3860): 0x80231334 (The sql connection string has unsupported values.)
BAIL: MMS(9948): service.cpp(1539): 0x80231334 (The sql connection string has unsupported values.)
ERR: MMS(9948): service.cpp(988): Error creating com objects. Error code: -2145184972\. This is retry number 0.
BAIL: MMS(9948): clrhost.cpp(283): 0x80131022 
BAIL: MMS(9948): scriptmanagerimpl.cpp(7670): 0x80131022 
BAIL: MMS(9948): server.cpp(251): 0x80131022 
BAIL: MMS(9948): server.cpp(3860): 0x80131022 
BAIL: MMS(9948): service.cpp(1539): 0x80131022 
ERR: MMS(9948): service.cpp(988): Error creating com objects. Error code: -2146234334\. This is retry number 1.
BAIL: MMS(9948): clrhost.cpp(283): 0x80131022 
BAIL: MMS(9948): scriptmanagerimpl.cpp(7670): 0x80131022 
BAIL: MMS(9948): server.cpp(251): 0x80131022 
BAIL: MMS(9948): server.cpp(3860): 0x80131022 
BAIL: MMS(9948): service.cpp(1539): 0x80131022 
ERR: MMS(9948): service.cpp(988): Error creating com objects. Error code: -2146234334\. This is retry number 2.
BAIL: MMS(9948): clrhost.cpp(283): 0x80131022 
BAIL: MMS(9948): scriptmanagerimpl.cpp(7670): 0x80131022 
BAIL: MMS(9948): server.cpp(251): 0x80131022 
BAIL: MMS(9948): server.cpp(3860): 0x80131022 
BAIL: MMS(9948): service.cpp(1539): 0x80131022 
ERR: MMS(9948): service.cpp(988): Error creating com objects. Error code: -2146234334\. This is retry number 3.
BAIL: MMS(9948): service.cpp(1002): 0x80131022 
```

* * *

我们在 12 月 12 日的 CU 补丁上运行。检查以下位置的注册表项，看起来所有键的值都正确 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\FIMSynchronizationService\Parameters

该服务在农场管理员帐户下运行，它也被添加到本地管理员中（暂时只是为了提供 UPS）。

运行任何访问冲突的进程监视器，但它很整洁。

到处搜索，没有任何帮助，如果有人以前遇到过这样的问题，请帮忙？

不确定为什么该服务不会在某些日志文件中记录详细信息。

谢谢， 阿维纳什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:31:22.373

﻿</p>

正如有人在论坛中提到的那样，为 SQL Server 安装了客户端配置实用程序，用于检查网络协议（TCP、namedpipe 都已启用）。这需要重新启动。

再次进入管理中心，尝试运行同步服务，检查事件日志失败，发现以下消息

作业定义 Microsoft.Office.Server.Administration.ProfileSynchronizationSetupJob (ID 23f8c125-f4f5-45a4-8180-576478fdeffd) 的 Execute 方法抛出异常。更多信息包括在下面。发生了更新冲突，您必须重试此操作。对象 ProfileSynchronizationServiceInstance 由 DOMAIN\ADMIN_Farm 在机器 APPSERVER001.blah.com 上的 OWSTIMER (2576) 进程中更新。
查看跟踪日志以获取有关冲突的更多信息。检查 ULS 查看器发现以下

从 owtimer.exe 发现多个错误，但这是一个很好的迹象

ConcurrencyException：旧版本：49462 新版本：49502and 这个

ProfileSynchronizationService：配置 TImer 作业遇到异常：Microsoft.SharePoint.Administration.SPUpdatedConcurrencyException：发生更新冲突，您必须重试此操作。对象 ProfileSynchronizationServiceInstance 由 DOMAIN\ADMIN_Farm 在机器 APPSERVER001.blah.com 上的 OWSTIMER (2576) 进程中更新。查看跟踪日志以获取有关冲突的更多信息。
在 Microsoft.SharePoint.Administration.SPConfigurationDatabase.StoreObject（SPPersistedObject obj，布尔 storeClassIfNecessary，布尔确保）
在 Microsoft.SharePoint.Administration.SPConfigurationDatabase.Microsoft.SharePoint.Administration.ISPPersistedStoreProvider.PutObject（SPPersistedObjectpersistedObject，布尔确保）
在 Microsoft.SharePoint.Administration.SPPersistedObject.BaseUpdate()
在 Microsoft.Office.Server.Administration.UserProfileApplication.SetupSynchronizationService(ProfileSynchronizationServiceInstance profileSyncInstance)
在 Microsoft.Office.Server.Administration.ProfileSynchronizationSetupJob.Execute(SPJobState state)我们最近应用了 CU并运行了配置向导，但似乎所有组件都没有更新。

运行 SharePoint 配置向导，直到它带来中央管理员，选择手动选项并退出屏幕。

转到该服务页面，尝试再次启动该服务，这次成功了。

# fastcgi - fcgi_stdio.h 和 stdio.h 的行为变化

> ID：14600123
> 
> 赞同：0
> 
> 时间：2013-01-30T09:02:34.447
> 
> 标签：fastcgi, cobol, stdio

在讨论将 OpenCOBOL 用于 FastCGI 时，我发布了替换

```
#include <stdio.h> 
```

和

```
#include <fcgi_stdio.h> 
```

对于绝大多数不想调用的程序，应该不会表现出行为变化

```
FCGI_Accept() 
```

我撒谎了吗？有需要考虑的问题吗？我承认还没有查看来源，只有网站上的文档。

编辑：2013-03-08 我做了一些实验，该陈述被证明是积极的，但缺乏足够的证据来宣传该陈述是真实的。我仍然很感激任何内幕消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T14:43:47.347

正如`fcgi_stdio.h`将许多 stdio 符号重新定义为其自己的 FCGI_* 符号集一样，肯定会有一些差异。不过， Fastcgi 也提供了这种可能性`#define NO_FCGI_DEFINES`，它允许您同时使用这两个集合——尽管您必须明确指定 FCGI_ 前缀。

我只是在考虑添加一种方法来确定在运行时使用哪个集合，以便能够在线和从 cli 使用相同的二进制文件，但进一步考虑它我宁愿使用两个`make`目标。

此外，使用 libfcgi-dev v2.4.0 进行编译时，我似乎遇到了与`-ldl`/一起出现的空白输出，`dlopen()`尽管两个二进制文件都链接到同一个 libfcgi.so.0 ...

--

tl;dr 如果您想使用`dlopen()`并查看 stdout/stderr 上的输出，请不要`#include <fcgi_stdio.h>`（不定义`NO_FCGI_DEFINES`）

# wordpress - 跨 WordPress 网络的持久菜单

> ID：14600124
> 
> 赞同：0
> 
> 时间：2013-01-30T09:02:35.007
> 
> 标签：wordpress

我有一个农业公司网络的多站点设置，但我需要有一个持久菜单来访问不同的页面，最好是嵌套访问子页面。

例如：我想在我的页脚中有这样的东西，而不必在某种块中硬编码链接。如何在菜单编辑页面中暴露整个网络？

```
Site 1
-Page 1
-Page 2
Site 2
-Page 1
-Page 2
Site 3
-Page 1
-Page 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:23:32.743

如果您是 Wordpress 开发人员，您可能可以通过使用位于[ekdhl.net/blog/2012/10/19/](http://ekdhl.net/blog/2012/10/19/)的共享侧边栏代码来实现它，然后使用菜单小部件。您需要成为开发人员的原因是小部件可能需要修改才能获得正确的菜单，因为它可能使用依赖于当前博客的系统变量。

# javascript - 自动删除 HTML 和 Javascript 注释

> ID：14600129
> 
> 赞同：1
> 
> 时间：2013-01-30T09:02:51.563
> 
> 标签：javascript, html, comments

我想自动删除 HTML 和 JavaScript 注释。我在服务器上使用 ant 脚本进行部署和 JSF。有哪些可用的选项或工具？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-25T18:22:47.283

用正则表达式替换混合了 HTML 和 JavaScript 的文件中的注释是有风险的。但是，单独地，您可以在不依赖外部工具的情况下获得良好的性能，只需要 node.js：

对于 HTML 注释，请使用正则表达式`/<!--(?!>)[\S\s]*?-->/g`。例子：

```
function stripHtmlComments(content) {
  return content.replace(/<!--(?!>)[\S\s]*?-->/g, '');
} 
```

删除 JavaScript 注释有点复杂，您需要混合几个正则表达式来区分注释何时位于文字字符串或正则表达式中，以及斜杠何时属于正则表达式:)

这个小程序从 JavaScript 文件中删除多行和单行注释：

```
#!/usr/bin/env node
/*
  Removes multiline and single-line comments from a JavaScript source file.
  Author: aMarCruz - https://github.com/aMarCruz
  Usage: node [this-tool] [js-file]
*/
var path = require('path'),
    fs = require('fs'),
    file,
    str;

var RE_BLOCKS = new RegExp([
    /\/(\*)[^*]*\*+(?:[^*\/][^*]*\*+)*\//.source,           // $1: multi-line comment
    /\/(\/)[^\n]*$/.source,                                 // $2 single-line comment
    /"(?:[^"\\]*|\\[\S\s])*"|'(?:[^'\\]*|\\[\S\s])*'/.source, // string, don't care about embedded eols
    /(?:[$\w\)\]]|\+\+|--)\s*\/(?![*\/])/.source,           // division operator
    /\/(?=[^*\/])[^[/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[/\\]*)*?\/[gim]*/.source
    ].join('|'),                                            // regex
    'gm'  // note: global+multiline with replace() need test
    );

file = process.argv[2];
if (!path.extname(file))
    file += '.js';
str = fs.readFileSync(file, { encoding: 'utf8' });

console.log(stripJSComments(str));

// remove comments, keep other blocks
function stripJSComments(str) {
    return str.replace(RE_BLOCKS, function (match, mlc, slc) {
        return mlc ? ' ' :     // multiline comment (must be replaced with one space)
               slc ? '' :      // single-line comment
               match;          // divisor, regex, or string, return as-is
        });
} 
```

现在（示例）另存为`rcomms`并运行：

```
node rcomms source-file > clean-file.js 
```

**注意：** 此代码基于 jspreproc 的正则表达式，如果您需要更高级的处理，请访问[http://github.com/aMarCruz/jspreproc](http://github.com/aMarCruz/jspreproc)。

我写了[jspreproc](http://github.com/aMarCruz/jspreproc)来部署一些[riot](http://github.com/riot/riot)模块。jspreproc 删除空行，支持过滤器以保留 C 风格的一些注释和*条件注释*：#if-else、endif、#define、#include 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:07:56.507

您可以使用正则表达式轻松删除它们。例如，您可以通过将正则表达式的匹配项替换为空来删除 HTML 注释`/\<!--(.*)-\>/gi`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-02T14:31:40.370

库[decomment](https://www.npmjs.com/package/decomment)完全按照您的描述进行 - 从 JSON、JavaScript、CSS、HTML 等中删除注释。

如需在 gulp 系统中使用，请参阅[gulp-decomment](https://github.com/vitaly-t/gulp-decomment)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T09:08:05.327

创建一个新目标并用于`replaceregexp`替换这些文件中不需要的所有注释和其他内容。

你可以做某事。像 html 和 js 类似的东西：

```
<target name="-trim.html.comments">

    <fileset id="html.fileset"
        dir="${build.dir}"
        includes="**/*.jsp, **/*.php, **/*.html"/>

    <!-- HTML Comments -->
    <replaceregexp replace="" flags="g"
        match="\&lt;![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\&gt;">
        <fileset refid="html.fileset"/>
    </replaceregexp>

</target> 
```

来源：[http ://www.julienlecomte.net/blog/2007/09/23/](http://www.julienlecomte.net/blog/2007/09/23/)

# java - Java - 字段实例变量在不需要并且不知道出了什么问题时会覆盖预先存在的值

> ID：14600130
> 
> 赞同：0
> 
> 时间：2013-01-30T09:02:58.437
> 
> 标签：java, arraylist, overwrite

我正在为我的 IB 数学内部评估编写程序。

我有 Calc、Gamble、Inventory、Player 和 Test 类。我有一个字段实例变量 Players （在构造函数中实例化）和方法 playrounds ，这就是问题所在。该方法的来源如下：

```
 ArrayList<Player> Players;

    public ArrayList<ArrayList<ArrayList<Player>>> playrounds(boolean randombets, double initialmoney, double initialbet,
        double betrange, int numberofrounds){

    ArrayList<Player> winningPlayers = new ArrayList<>(0);
    ArrayList<ArrayList<Player>> m = new ArrayList<>(0);
    for(int b = 0; b < numberofrounds; b++){
        if(firstround){
            firstround = false;
            preparePlayersfirst(randombets, initialmoney, initialbet, betrange);
            winningPlayers.clear();
            winningPlayers.trimToSize();
            m.clear();
            m.trimToSize();
        }
        else{
            preparePlayersnext(randombets, initialbet, betrange);
        }
        for(int a = 0; a < playingPlayers.size(); a++){
            Player u = playingPlayers.get(a);
            u.rolldice();
            u.checkdice();
            Players.set(a, u);
            playingPlayers.set(a, u);
        }
        Player t = getwinningPlayer();
        for(int a = 0; a < playingPlayers.size(); a++){
            Player u = playingPlayers.get(a);
            u.setprofits(t, this);
            Players.set(a, u);
            playingPlayers.set(a, u);
        }
        distributegainslosses();
        removebankruptPlayers();
        winningPlayers.add(t);
        m.add(Players);
        for(int x = 0; x < m.size(); x++){
            for(Player y: m.get(x)){
                for(int z = 0; z < y.getdice().size(); z++){
                    System.out.print(y.getdie(z) + " ");
                }
                System.out.print("\t");
            }
            System.out.println();
        }
        System.out.println();
    }
    ArrayList<ArrayList<ArrayList<Player>>> results = new ArrayList<>(0);
    ArrayList<ArrayList<Player>> t = new ArrayList<>(0);
    t.add(winningPlayers);
    results.add(t);
    results.add(m);

    return results;

} 
```

用于打印变量 m 内的值的 for 循环给出如下输出：
2 3

6 4
6 4

5 5
5 5
5 5

6 1
6 1
6 1
6 1

预期的输出是这样的：
2 3

2 3
6 4

2 3
6 4
5 5

2 3
6 4
5 5
6 1

我知道我打印值的方式没有错。它不打印重复项。if(firstround) 和 else 与问题无关。
任何帮助将不胜感激。

-Edit-
@NPE：我尝试了您建议查看的地方的解决方案之一。它仍然不起作用。这是我所做的代码：

```
 public ArrayList<Player> clonePlayers(){

        ArrayList<Player> clone = new ArrayList<>(0);
        for(Player a: Players){
            clone.add(new Player(a));
        }

        return clone;

    } 
```

我做错什么了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:04:41.557

`m`问题是您一遍又一遍地插入相同的引用：

```
 m.add(Players); 
```

如果您需要 的条目`m`彼此独立，则它们必须是不同的对象，而不是对同一对象的引用。

# iphone - 在同一个项目中或在 2 个单独的项目中（Monotouch）开发 iPad / iPhone 应用程序？

> ID：14600136
> 
> 赞同：4
> 
> 时间：2013-01-30T09:03:32.027
> 
> 标签：iphone, ios, ipad, xamarin.ios

我们知道，在 monotouch 中，我们有 2 种解决方案来为 iPhone 和 iPad 开发项目。

首先是使用适用于 iPad 的 Montouch iPad 应用程序项目和适用于 iPhone 的 Monotouch iPhone 应用程序项目，并为每个项目创建两个单独的项目。

另一种解决方案是对它们都使用一个通用项目。

问题是：哪种解决方案更好，而女巫一的结果质量更高？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T10:13:19.590

的优点和缺点`Universal app`。

优点：

*   一个修复应用业务逻辑错误的地方；
*   方便用户（在一台设备上安装后可以自动安装在另一台设备上）；
*   营销成本可以减半；

缺点：

*   它可能是太多的`if`-blocks，这是检查`UIDevice.CurrentDevice.UserInterfaceIdiom`;
*   更大的应用程序大小；
*   某些功能（主要在游戏中）不太适合 iPhone 的显示屏。
*   如果你使用了基于 XIB 的界面，你必须为 iPad 制作单独的 XIB**或者**在 UIViewController 的`ViewWillAppear`事件中更新 XIB 内容布局（其中 iOS 根据显示大小更新 View frame）；
*   如果您的应用程序不是免费的，您将无法以更高的价格发布“高清版”。

基本上，通用应用程序对用户来说更好，但对开发人员和设计师来说更难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T09:11:06.190

我想，你问的是 iPhone 和 iPad。因为，通用应用程序包括 iPhone 和 iPad（不是 iPhone 和 iPod）。

所以考虑到这一点：

由于以下原因，您应该使用通用应用程序：

1) 将有一个应用程序的源文件，可在 iPhone 和 iPad 上运行。

2) 如果用户同时拥有这两种设备（iPhone 和 iPad），那么他们将获得应用程序的一个副本，并且可以在这两种设备上安装。

3）您的应用程序支持这两种设备，因此用户将被高度吸引并快速下载您的应用程序。

4）如果您的应用程序将被更多下载（因为通用应用程序），那么您的应用程序有可能进入苹果的“New and WhatWorthy”部分甚至“Feature”部分。

我们应该选择通用应用程序而不是 iPhone 和 iPad 的单独应用程序，这可能是主要原因。

希望，你有一个想法。

干杯!

# ruby-on-rails - Rspec - 在生产环境中测试未知数据库记录的重定向

> ID：14600140
> 
> 赞同：1
> 
> 时间：2013-01-30T09:03:46.397
> 
> 标签：ruby-on-rails, rspec, tdd

我正在开发 Rails 3.2 应用程序，并希望用户在尝试查找不存在的数据库记录时被重定向到 errors#index 处的自定义错误页面。

这是我在应用程序控制器中执行此操作的代码：

```
if Rails.env.production?
  rescue_from Exception, with: :display_error
  rescue_from ActiveRecord::RecordNotFound, with: :display_error
end

private
def display_error
  render "errors/index", status: 404
end 
```

这实际上在生产模式下工作正常。现在的问题是，我如何事先测试它？我试过这个：

```
it "leads to error page on unknown db record" do
  Rails.stub(:env).and_return("production")

  # Sign in
  @valid_user = FactoryGirl.create(:valid_user)
  visit new_user_session_path
  fill_in "Email", with: @valid_user.email
  fill_in "Password", with: @valid_user.password
  click_button "Sign in"

  # Trigger exception
  visit physician_path id: "this is not an id"
  assert_contain "You blew it!"
end 
```

但是，这给我留下了两个错误：

*   `undefined method 'development?' for "production":String`在`visit new_user_session_path`
*   `Couldn't find Physician with id=this is not an id`在`visit physician_path id: "this is not an id"`

第一个似乎暗示了模拟生产环境的错误；一旦我实现了实际代码，第二个有望消失。

我该如何解决这两个错误？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:41:49.020

它看起来像`Rails.env`存储`ActiveSupport::StringEnquirer`而不是普通字符串：[https ://github.com/rails/rails/blob/3096629d297a77a9b64747a0ac2df6b2cbf47a68/railties/lib/rails.rb#L81](https://github.com/rails/rails/blob/3096629d297a77a9b64747a0ac2df6b2cbf47a68/railties/lib/rails.rb#L81)

将方法存根可能更容易`production?`：

```
Rails.env.stub(:production?).and_return(true) 
```

# jsf - 可视化 JSF 设计器

> ID：14600144
> 
> 赞同：1
> 
> 时间：2013-01-30T09:03:55.120
> 
> 标签：jsf, designer

请任何人告诉我从哪里可以获得可以与 Eclipse 集成的 Visual JSF 设计器？为什么netbeas没有这个功能

我知道 Myeclipse 提供了这种能力，但它只是在 32 位上运行，而且它不是免费的。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:21:40.447

如果您在项目中添加了**Dynamic Web Module** facet 和**JavaServer Faces facet**，请右键单击所需的页面并选择*Open with -> Web Page Editor*。

![在此处输入图像描述](../Images/cbf6dc7f5c05e6f95df8483e60aa7d5e.png)

这仅适用于纯 JSF 标签，不适用于 Primefaces 等第三方库标签。您也可以浏览[JSF Web Page Designer](https://stackoverflow.com/questions/1971629/jsf-eclipse-designer)，但不确定它是如何工作的，因为它看起来很久以前就没有更新过。

# php - .htaccess 文件的重写规则

> ID：14600146
> 
> 赞同：0
> 
> 时间：2013-01-30T09:03:57.577
> 
> 标签：php, .htaccess

我需要在我的网站中编写重定向规则。我正在使用 codeigniter。所以它将对所有页面使用 index.php。所以我使用的第一条规则是

`RewriteRule ^(.*)$ /index.php/$1 [L]`.

现在我想添加一些如下内容。

我的要求首先：

输入 -`example.com/index.php/search/query`

要重定向的网址 -`example.com/search?q=query`

和，

输入 -`example.com/index.php/search/query&c=abc&s=xyz&p=1`

要重定向的网址 -`example.com/search?q=query&c=abc&s=xyz&p=1`

就是这样。

任何人都可以破解这个密码。？请...

提前致谢。

编辑：告诉一些参考网站更多地了解规则和条件语法来编写 .htaccess 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:14:07.093

在你的 html 代码中，你必须这样写：

```
<a href='http://www.domain.com/index/211/title-goes-here'>url_text</a> 
```

并在 htaccess 文件中调整以下内容：

```
Options +SymLinksIfOwnerMatch

RewriteEngine on

RewriteRule ^([a-zA-Z-]+)$ index.php?action=$1 [NC,L]

RewriteRule ^(member)-([0-9-]+)$ index.php?action=member&id=$2 [NC,L]

RewriteRule ^([a-zA-Z-]+)/([a-zA-Z-]+)-([0-9-]+)$ index.php?action=$1&saction=$2&sid=$3 [NC,L]

RewriteRule ^([a-zA-Z-]+)/([0-9-]+)$ index.php?action=$1&id=$2 [NC,L]

RewriteRule ^([0-9-]+)/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/(.*).html$ index.php?action=details&id=$1&p1=$2&p2=$3&p3=$4 [NC,L] 
```

使用 () 标记需要提取和使用的数据；

使用 $x，其中 x=1,2,3, ...

$x 是价值

你拥有的 () 越多，你拥有的 $x 就越多

与： RewriteRule ^(member)-([0-9-]+)$ index.php?action=member&id=$2 [NC,L]

(会员) 是 1 美元， ([0-9]+) 是 2 美元

你明白吗？

# android - 在媒体播放器中设置歌曲的优先级

> ID：14600148
> 
> 赞同：0
> 
> 时间：2013-01-30T09:04:04.487
> 
> 标签：android, media-player

我有歌曲列表，例如`song1`具有高优先级和`song2`低优先级的歌曲。所以每次都`song1`必须先播放`song2`。在播放`song2`时，如果新列表的`song3`优先级较低且优先级`song4`较高，则`song2`必须暂停并`song4`必须播放，因为`song4`优先级较高。播放完毕后`song4`，必须继续播放`song2`。这可能吗，在`mediaplayer`对象中设置优先级？

# javascript - 通过js删除其中一个后排列输入名称元素数组中的数字

> ID：14600150
> 
> 赞同：0
> 
> 时间：2013-01-30T09:04:08.560
> 
> 标签：javascript, jquery, jsfiddle

我想在添加输入并将其删除后，通过 jQuery 排列输入名称元素数组中的数字，但在删除输入后对我不起作用。如何解决？

**演示：http:** [//jsfiddle.net/mUMdW/](http://jsfiddle.net/mUMdW/)

我的代码：

**html:**

```
<div class="ch">
        <a href="#" class="adding">Add</a>
</div>
<p class="ffdd"></p> 
```

**jQuery：**

```
function removeidx(clss, type){
    var remove = $(this).closest(clss);
    remove.fadeOut('slow', function () {
        $(this).remove(); // or change next line to  $('.RowCheck:visible')
        $(clss).each(function (idx) {
            var checkBoxes = $('input[type="'+type+'"]',this);
            checkBoxes.each(function(i) {
              var str = $(this).attr('name');  
              var currentIdx = parseInt(str.match(/\d+/)[0], 10);  
              $(this).attr('name', str.replace(currentIdx,idx));
           })
        });
    });
}
$(document).on('click change', 'a.adding', function(e) {
    e.preventDefault();
    var idx = $('.Row').length;
    $('.ffdd').append('<div class="Row"> <input name="arr['+idx+'][]" type="text" value=""> <a href="#" class="remove_row" title="remove this row">Remove</a></div>');   
});
$('.ffdd').on('click','a', function(e){
    $(this).closest('.Row').remove();
    removeidx('.ffdd', 'text');
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:45:06.420

我猜您想在删除后重新编号输入，以便数组由连续数字组成。

我重写了一些东西，其中包括重新编号函数，使用与父函数相关的索引。

```
function removeidx(context, clss, type) {
    var remove = $(context).closest(clss);
    remove.fadeOut('slow', function () {
        $(this).remove();
        var idx = 0;
        $(clss).each(function () {
            var checkBoxes = $('input[type="' + type + '"]', this);
            checkBoxes.each(function () {
                var name = $(this).attr('name');
                name = name.replace(/\d+/, idx);
                $(this).attr('name', name);
                idx = idx + 1;
            });
        });
    });
}

$(document).on('click change', 'a.adding', function (e) {
    e.preventDefault();
    var idx = $('.Row').length;
    $('.ffdd').append('<div class="Row"> <input name="arr[' + idx + '][]" type="text" value=""> <a href="#" class="remove_row" title="remove this row">Remove</a></div>');
});

$('.ffdd').on('click', 'a', function (e) {
    removeidx(this, '.Row', 'text');
}) 
```

你可以在那里看到一个工作版本：http: [//jsfiddle.net/8sVWp/](http://jsfiddle.net/8sVWp/)

# qt4 - ld 错误：在搜索 -lgstreamer-0.10 时跳过不兼容的.../gst/lib/libgstreamer-0.10.so .Hot to fix？

> ID：14600152
> 
> 赞同：2
> 
> 时间：2013-01-30T09:04:19.200
> 
> 标签：qt4, cross-compiling, gstreamer, qt4.7

我正在尝试为嵌入式系统交叉编译 qt4。我的嵌入式系统基于 armv5，而我的主机 PC 具有 i686-32 位架构。

这是我用来配置 evrything 的命令：

```
 make confclean;PKG_CONFIG_PATH=home/user/ev-sdk/rootfs/armle-fs/lib/pkgconfig ./configure -embedded arm -fast -fontconfig -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/freetype2/freetype/config  -gstreamer -little-endian -no-3dnow -no-accessibility -no-avx -no-cups -no-dbus -no-declarative -no-declarative-debug -no-exceptions -no-g++-exceptions -no-gif -no-javascript-jit -no-largefile -no-libmng -no-libtiff -nomake demos -nomake examples -no-mitshm -no-mmx -no-multimedia -no-nas-sound -no-neon -no-nis -no-opengl -no-openssl -no-openvg -no-qt3support -no-script -no-scripttools -no-sm -no-sql-sqlite -no-sse -no-sse2 -no-sse3 -no-sse4.1 -no-sse4.2 -no-ssse3 -no-stl -no-svg -no-webkit -no-xfixes -no-xinerama -no-xinput -no-xkb -no-xmlpatterns -no-xshape -no-xsync -no-xvideo -opensource -phonon -phonon-backend -prefix /home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/qt_eng -qt-mouse-tslib -qt-zlib -reduce-relocations -release -svg -v -xplatform qws/linux-arm-g++ -lglib-2.0 -lgthread-2.0 -lgstreamer-0.10 -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/glib-2.0 -I/home/user/ev-sdk/rootfs/armle-fs/usr/lib/glib-2.0/include -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/include/gstreamer-0.10 -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/libxml2/include/libxml2 -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/lib -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/libxml2/lib -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/lib/gstreamer-0.10 -I/home/user/ev-sdk/rootfs/armle-fs/usr/include -L/home/user/ev-sdk/rootfs/armle-fs/usr/lib -force-pkg-config -qt-gfx-transformed  ;make 
```

这是输出：

```
b2 -t imx25 g++ -m32 -Wl,-O1 -o alsa alsatest.o     -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/lib -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/libxml2/lib -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/lib/gstreamer-0.10 -L/home/user/ev-sdk/rootfs/armle-fs/usr/lib -lglib-2.0 -lgthread-2.0 -lgstreamer-0.10 -lasound 
alsa enabled.
Stdint auto-detection... ()
sb2 -t imx25 g++ -c -pipe -O2 -Wall -W  -I../../../mkspecs/qws/linux-arm-g++ -I. -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/freetype2/freetype/config -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/glib-2.0 -I/home/user/ev-sdk/rootfs/armle-fs/usr/lib/glib-2.0/include -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/include/gstreamer-0.10 -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/libxml2/include/libxml2 -I/home/user/ev-sdk/rootfs/armle-fs/usr/include -o main.o main.cpp
sb2 -t imx25 g++ -m32 -Wl,-O1 -o stdint main.o     -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/lib -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/libxml2/lib -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/lib/gstreamer-0.10 -L/home/user/ev-sdk/rootfs/armle-fs/usr/lib -lglib-2.0 -lgthread-2.0 -lgstreamer-0.10 
Stdint enabled.
Testing size of pointers ... (/nfs_gea/Sorgenti_librerie/qt-everywhere-opensource-src-4.7.4/mkspecs/qws/linux-arm-g++ yes /nfs_gea/Sorgenti_librerie/qt-everywhere-opensource-src-4.7.4 /nfs_gea/Sorgenti_librerie/qt-everywhere-opensource-src-4.7.4)
rm -f ptrsizetest.o
rm -f *~ core *.core
sb2 -t imx25 g++ -c -pipe -O2 -Wall -W  -I../../../mkspecs/qws/linux-arm-g++ -I. -o ptrsizetest.o ptrsizetest.cpp
ptrsizetest.cpp: In function 'int main(int, char**)':
ptrsizetest.cpp:59: error: 'PointerSize' is not a member of 'QPointerSizeTest<4>'
make: *** [ptrsizetest.o] Error 1
Pointer size: 4
ln: creating symbolic link `/nfs_gea/Sorgenti_librerie/qt-everywhere-opensource-src-4.7.4/include/QtCore/qconfig.h': File exists
ln: creating symbolic link `/nfs_gea/Sorgenti_librerie/qt-everywhere-opensource-src-4.7.4/include/Qt/qconfig.h': File exists

Building on:   qws/linux-x86-g++
Building for:  qws/linux-arm-g++
Architecture:  arm
Host architecture: i386

qmake vars .......... cat: .qmake.vars: No such file or directory
qmake switches ......... 
Build .................. libs docs translations
Configuration ..........  cross_compile release shared dll embedded precompile_header exceptions_off  minimal-config small-config medium-config large-config full-config phonon phonon-backend embedded ipv6 clock-gettime clock-monotonic mremap getaddrinfo ipv6ifname getifaddrs inotify system-jpeg no-mng system-png png no-gif no-tiff freetype zlib glib gstreamer alsa audio-backend svg release
Debug .................. no
Qt 3 compatibility ..... no
QtDBus module .......... no
QtConcurrent code ...... yes
QtGui module ........... yes
QtScript module ........ no
QtScriptTools module ... no
QtXmlPatterns module ... no
Phonon module .......... yes
Multimedia module ...... no
SVG module ............. yes
WebKit module .......... no
Declarative module ..... no
Support for S60 ........ no
Symbian DEF files ...... no
STL support ............ no
PCH support ............ yes
MMX/3DNOW/SSE/SSE2/SSE3\. no/no/no/no/no
SSSE3/SSE4.1/SSE4.2..... no/no/no
AVX..................... no
iWMMXt support ......... no
NEON support ........... no
IPv6 support ........... yes
IPv6 ifname support .... yes
getaddrinfo support .... yes
getifaddrs support ..... yes
Accessibility .......... no
NIS support ............ no
CUPS support ........... no
Iconv support .......... no
Glib support ........... yes
GStreamer support ...... yes
PulseAudio support ..... no
Large File support ..... no
GIF support ............ no
TIFF support ........... no
JPEG support ........... plugin (system)
PNG support ............ yes (system)
MNG support ............ no
zlib support ........... yes
Session management ..... no
Embedded support ....... arm
Freetype2 support ...... auto (yes)
Graphics (qt) .......... linuxfb multiscreen transformed
Graphics (plugin) ...... 
Decorations (qt) ....... styled windows default
Decorations (plugin) ... 
Keyboard driver (qt) ... tty
Keyboard driver (plugin) .. 
Mouse driver (qt) ...... pc linuxtp tslib
Mouse driver (plugin) .. 
OpenGL support ......... no
OpenVG support ......... no
ODBC support ........... plugin
SQLite 2 support ....... plugin
OpenSSL support ........ no 
Alsa support ........... yes
ICD support ............ no

  ...........
ar cqs libbootstrap.a .obj/release-static-emb-arm/qisciicodec.o .obj/release-static-emb-arm/qlatincodec.o .obj/release-static-emb-arm/qsimplecodec.o .obj/release-static-emb-arm/qtextcodec.o .obj/release-static-emb-arm/qtsciicodec.o .obj/release-static-emb-arm/qutfcodec.o .obj/release-static-emb-arm/qglobal.o .obj/release-static-emb-arm/qmalloc.o .obj/release-static-emb-arm/qnumeric.o .obj/release-static-emb-arm/qabstractfileengine.o .obj/release-static-emb-arm/qbuffer.o .obj/release-static-emb-arm/qdatastream.o .obj/release-static-emb-arm/qdir.o .obj/release-static-emb-arm/qdiriterator.o .obj/release-static-emb-arm/qfile.o .obj/release-static-emb-arm/qfileinfo.o .obj/release-static-emb-arm/qfsfileengine.o .obj/release-static-emb-arm/qfsfileengine_iterator.o .obj/release-static-emb-arm/qiodevice.o .obj/release-static-emb-arm/qtemporaryfile.o .obj/release-static-emb-arm/qtextstream.o .obj/release-static-emb-arm/qurl.o .obj/release-static-emb-arm/qmetatype.o .obj/release-static-emb-arm/qvariant.o .obj/release-static-emb-arm/qbitarray.o .obj/release-static-emb-arm/qbytearray.o .obj/release-static-emb-arm/qbytearraymatcher.o .obj/release-static-emb-arm/qdatetime.o .obj/release-static-emb-arm/qhash.o .obj/release-static-emb-arm/qlist.o .obj/release-static-emb-arm/qlocale.o .obj/release-static-emb-arm/qmap.o .obj/release-static-emb-arm/qregexp.o .obj/release-static-emb-arm/qstring.o .obj/release-static-emb-arm/qstringlist.o .obj/release-static-emb-arm/qvector.o .obj/release-static-emb-arm/qvsnprintf.o .obj/release-static-emb-arm/qxmlutils.o .obj/release-static-emb-arm/qxmlstream.o .obj/release-static-emb-arm/qdom.o .obj/release-static-emb-arm/qxml.o .obj/release-static-emb-arm/qfsfileengine_unix.o .obj/release-static-emb-arm/qfsfileengine_iterator_unix.o .obj/release-static-emb-arm/adler32.o .obj/release-static-emb-arm/compress.o .obj/release-static-emb-arm/crc32.o .obj/release-static-emb-arm/deflate.o .obj/release-static-emb-arm/gzio.o .obj/release-static-emb-arm/inffast.o .obj/release-static-emb-arm/inflate.o .obj/release-static-emb-arm/inftrees.o .obj/release-static-emb-arm/trees.o .obj/release-static-emb-arm/uncompr.o .obj/release-static-emb-arm/zutil.o
make[1]: Leaving directory `/nfs_gea/Sorgenti_librerie/qt-everywhere-opensource-src-4.7.4/src/tools/bootstrap'
cd src/tools/moc/ && make -f Makefile 
make[1]: Entering directory `/nfs_gea/Sorgenti_librerie/qt-everywhere-opensource-src-4.7.4/src/tools/moc'
/nfs_gea/Sorgenti_librerie/qt-everywhere-opensource-src-4.7.4/bin/qmake -spec ../../../mkspecs/qws/linux-x86-g++ -o Makefile moc.pro
make[1]: Leaving directory `/nfs_gea/Sorgenti_librerie/qt-everywhere-opensource-src-4.7.4/src/tools/moc'
make[1]: Entering directory `/nfs_gea/Sorgenti_librerie/qt-everywhere-opensource-src-4.7.4/src/tools/moc'
g++ -c -pipe -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/freetype2/freetype/config -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/glib-2.0 -I/home/user/ev-sdk/rootfs/armle-fs/usr/lib/glib-2.0/include -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/include/gstreamer-0.10 -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/libxml2/include/libxml2 -I/home/user/ev-sdk/rootfs/armle-fs/usr/include -fno-exceptions -O2 -Wall -W -DQT_MOC -DQT_BOOTSTRAPPED -DQT_LITE_UNICODE -DQT_TEXTCODEC -DQT_NO_CAST_FROM_ASCII -DQT_NO_CAST_TO_ASCII -DQT_NO_CODECS -DQT_NO_DATASTREAM -DQT_NO_GEOM_VARIANT -DQT_NO_LIBRARY -DQT_NO_QOBJECT -DQT_NO_STL -DQT_NO_SYSTEMLOCALE -DQT_NO_TEXTSTREAM -DQT_NO_THREAD -DQT_NO_UNICODETABLES -DQT_NO_USING_NAMESPACE -I../../../mkspecs/qws/linux-x86-g++ -I. -I. -I. -I../../../include -I../../../include/QtCore -I../../../include/QtXml -I../../xml -o release-shared/moc.o moc.cpp
g++ -c -pipe -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/freetype2/freetype/config -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/glib-2.0 -I/home/user/ev-sdk/rootfs/armle-fs/usr/lib/glib-2.0/include -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/include/gstreamer-0.10 -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/libxml2/include/libxml2 -I/home/user/ev-sdk/rootfs/armle-fs/usr/include -fno-exceptions -O2 -Wall -W -DQT_MOC -DQT_BOOTSTRAPPED -DQT_LITE_UNICODE -DQT_TEXTCODEC -DQT_NO_CAST_FROM_ASCII -DQT_NO_CAST_TO_ASCII -DQT_NO_CODECS -DQT_NO_DATASTREAM -DQT_NO_GEOM_VARIANT -DQT_NO_LIBRARY -DQT_NO_QOBJECT -DQT_NO_STL -DQT_NO_SYSTEMLOCALE -DQT_NO_TEXTSTREAM -DQT_NO_THREAD -DQT_NO_UNICODETABLES -DQT_NO_USING_NAMESPACE -I../../../mkspecs/qws/linux-x86-g++ -I. -I. -I. -I../../../include -I../../../include/QtCore -I../../../include/QtXml -I../../xml -o release-shared/preprocessor.o preprocessor.cpp
g++ -c -pipe -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/freetype2/freetype/config -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/glib-2.0 -I/home/user/ev-sdk/rootfs/armle-fs/usr/lib/glib-2.0/include -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/include/gstreamer-0.10 -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/libxml2/include/libxml2 -I/home/user/ev-sdk/rootfs/armle-fs/usr/include -fno-exceptions -O2 -Wall -W -DQT_MOC -DQT_BOOTSTRAPPED -DQT_LITE_UNICODE -DQT_TEXTCODEC -DQT_NO_CAST_FROM_ASCII -DQT_NO_CAST_TO_ASCII -DQT_NO_CODECS -DQT_NO_DATASTREAM -DQT_NO_GEOM_VARIANT -DQT_NO_LIBRARY -DQT_NO_QOBJECT -DQT_NO_STL -DQT_NO_SYSTEMLOCALE -DQT_NO_TEXTSTREAM -DQT_NO_THREAD -DQT_NO_UNICODETABLES -DQT_NO_USING_NAMESPACE -I../../../mkspecs/qws/linux-x86-g++ -I. -I. -I. -I../../../include -I../../../include/QtCore -I../../../include/QtXml -I../../xml -o release-shared/generator.o generator.cpp
generator.cpp: In member function ‘void Generator::generateCode()’:
generator.cpp:284: warning: ignoring return value of ‘size_t fwrite(const void*, size_t, size_t, FILE*)’, declared with attribute warn_unused_result
g++ -c -pipe -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/freetype2/freetype/config -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/glib-2.0 -I/home/user/ev-sdk/rootfs/armle-fs/usr/lib/glib-2.0/include -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/include/gstreamer-0.10 -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/libxml2/include/libxml2 -I/home/user/ev-sdk/rootfs/armle-fs/usr/include -fno-exceptions -O2 -Wall -W -DQT_MOC -DQT_BOOTSTRAPPED -DQT_LITE_UNICODE -DQT_TEXTCODEC -DQT_NO_CAST_FROM_ASCII -DQT_NO_CAST_TO_ASCII -DQT_NO_CODECS -DQT_NO_DATASTREAM -DQT_NO_GEOM_VARIANT -DQT_NO_LIBRARY -DQT_NO_QOBJECT -DQT_NO_STL -DQT_NO_SYSTEMLOCALE -DQT_NO_TEXTSTREAM -DQT_NO_THREAD -DQT_NO_UNICODETABLES -DQT_NO_USING_NAMESPACE -I../../../mkspecs/qws/linux-x86-g++ -I. -I. -I. -I../../../include -I../../../include/QtCore -I../../../include/QtXml -I../../xml -o release-shared/parser.o parser.cpp
g++ -c -pipe -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/freetype2/freetype/config -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/glib-2.0 -I/home/user/ev-sdk/rootfs/armle-fs/usr/lib/glib-2.0/include -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/include/gstreamer-0.10 -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/libxml2/include/libxml2 -I/home/user/ev-sdk/rootfs/armle-fs/usr/include -fno-exceptions -O2 -Wall -W -DQT_MOC -DQT_BOOTSTRAPPED -DQT_LITE_UNICODE -DQT_TEXTCODEC -DQT_NO_CAST_FROM_ASCII -DQT_NO_CAST_TO_ASCII -DQT_NO_CODECS -DQT_NO_DATASTREAM -DQT_NO_GEOM_VARIANT -DQT_NO_LIBRARY -DQT_NO_QOBJECT -DQT_NO_STL -DQT_NO_SYSTEMLOCALE -DQT_NO_TEXTSTREAM -DQT_NO_THREAD -DQT_NO_UNICODETABLES -DQT_NO_USING_NAMESPACE -I../../../mkspecs/qws/linux-x86-g++ -I. -I. -I. -I../../../include -I../../../include/QtCore -I../../../include/QtXml -I../../xml -o release-shared/token.o token.cpp
g++ -c -pipe -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/freetype2/freetype/config -I/home/user/ev-sdk/rootfs/armle-fs/usr/include/glib-2.0 -I/home/user/ev-sdk/rootfs/armle-fs/usr/lib/glib-2.0/include -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/include/gstreamer-0.10 -I/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/libxml2/include/libxml2 -I/home/user/ev-sdk/rootfs/armle-fs/usr/include -fno-exceptions -O2 -Wall -W -DQT_MOC -DQT_BOOTSTRAPPED -DQT_LITE_UNICODE -DQT_TEXTCODEC -DQT_NO_CAST_FROM_ASCII -DQT_NO_CAST_TO_ASCII -DQT_NO_CODECS -DQT_NO_DATASTREAM -DQT_NO_GEOM_VARIANT -DQT_NO_LIBRARY -DQT_NO_QOBJECT -DQT_NO_STL -DQT_NO_SYSTEMLOCALE -DQT_NO_TEXTSTREAM -DQT_NO_THREAD -DQT_NO_UNICODETABLES -DQT_NO_USING_NAMESPACE -I../../../mkspecs/qws/linux-x86-g++ -I. -I. -I. -I../../../include -I../../../include/QtCore -I../../../include/QtXml -I../../xml -o release-shared/main.o main.cpp
    g++ -fno-exceptions -Wl,-O1 -Wl,-rpath,/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/qt_eng/lib -Wl,-rpath,/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/qt_eng/lib -o ../../../bin/moc release-shared/moc.o release-shared/preprocessor.o release-shared/generator.o release-shared/parser.o release-shared/token.o release-shared/main.o    -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/lib -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/libxml2/lib -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/lib/gstreamer-0.10 -L/home/user/ev-sdk/rootfs/armle-fs/usr/lib -L/nfs_gea/Sorgenti_librerie/qt-everywhere-opensource-src-4.7.4/src/tools/bootstrap -lbootstrap -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/lib -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/libxml2/lib -L/home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/lib/gstreamer-0.10 -L/home/user/ev-sdk/rootfs/armle-fs/usr/lib -lglib-2.0 -lgthread-2.0 -lgstreamer-0.10 
    /usr/bin/ld: skipping incompatible /home/user/ev-sdk/rootfs/armle-fs/usr/lib/libglib-2.0.so when searching for -lglib-2.0
    /usr/bin/ld: skipping incompatible /home/user/ev-sdk/rootfs/armle-fs/usr/lib/libglib-2.0.a when searching for -lglib-2.0
    /usr/bin/ld: skipping incompatible /home/user/ev-sdk/rootfs/armle-fs/usr/lib/libglib-2.0.so when searching for -lglib-2.0
    /usr/bin/ld: skipping incompatible /home/user/ev-sdk/rootfs/armle-fs/usr/lib/libglib-2.0.a when searching for -lglib-2.0
    /usr/bin/ld: skipping incompatible /home/user/ev-sdk/rootfs/armle-fs/usr/lib/libgthread-2.0.so when searching for -lgthread-2.0
    /usr/bin/ld: skipping incompatible /home/user/ev-sdk/rootfs/armle-fs/usr/lib/libgthread-2.0.a when searching for -lgthread-2.0
    /usr/bin/ld: skipping incompatible /home/user/ev-sdk/rootfs/armle-fs/usr/lib/libgthread-2.0.so when searching for -lgthread-2.0
    /usr/bin/ld: skipping incompatible /home/user/ev-sdk/rootfs/armle-fs/usr/lib/libgthread-2.0.a when searching for -lgthread-2.0
    /usr/bin/ld: skipping incompatible /home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/lib/libgstreamer-0.10.so when searching for -lgstreamer-0.10
    /usr/bin/ld: skipping incompatible /home/user/ev-sdk/workspace/evelin-bsp/binaries/usr/share/gst/lib/libgstreamer-0.10.so when searching for -lgstreamer-0.10
    /usr/bin/ld: cannot find -lgstreamer-0.10
    collect2: ld returned 1 exit status
    make[1]: *** [../../../bin/moc] Error 1
    make[1]: Leaving directory `/nfs_gea/Sorgenti_librerie/qt-everywhere-opensource-src-4.7.4/src/tools/moc'
    make: *** [sub-moc-make_default-ordered] Error 2
    user@ubuntu1004desktop:~/Desktop/nfs_gea/Sorgenti_librerie/qt-everywhere-opensource-src-4.7.4$ 
```

问题是链接器不能使用 libgstreamer-0.10.so 和 libglib-2.0.so 库，因为它认为它们与目标体系结构不兼容。所以，它返回：

在搜索 -lglib-2.0 时跳过不兼容的 /home/user/ev-sdk/rootfs/armle-fs/usr/lib/libglib-2.0.so

和其他类似的错误。但是这些库与目标架构（arm）兼容，事实上：

```
readelf -h /home/user/ev-sdk/rootfs/armle-fs/usr/lib/libglib-2.0.so
ELF Header:
  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF32
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              DYN (Shared object file)
  Machine:                           ARM
  Version:                           0x1
  Entry point address:               0xef04
  Start of program headers:          52 (bytes into file)
  Start of section headers:          735080 (bytes into file)
  Flags:                             0x4000002, has entry point, Version4 EABI
  Size of this header:               52 (bytes)
  Size of program headers:           32 (bytes)
  Number of program headers:         4
  Size of section headers:           40 (bytes)
  Number of section headers:         26
  Section header string table index: 25 
```

那么，如何解决这个问题呢？

# c++ - 2 位大小可变

> ID：14600153
> 
> 赞同：5
> 
> 时间：2013-01-30T09:04:22.790
> 
> 标签：c++, size, bit

我需要定义一个结构，它的数据成员大小为 2 位和 6 位。我应该`char`为每个成员使用 type 吗？或者，为了不浪费内存，我可以使用`:2`\ `:6`notation 之类的东西吗？我怎样才能做到这一点？我可以为 2 位或 6 位类型定义 typedef 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T09:06:11.153

你可以使用类似的东西：

```
typedef struct {
    unsigned char SixBits:6;
    unsigned char TwoBits:2;
} tEightBits; 
```

然后使用：

```
tEightBits eight;
eight.SixBits = 31;
eight.TwoBits = 3; 
```

但是，老实说，除非您必须遵守应用程序外部的打包数据，或者您处于*内存非常*受限的情况下，否则这种内存节省通常是不值得的。如果不必一直使用按位和位移操作来打包和解包数据，您会发现您的代码要快得多。

* * *

还要记住，使用 , 以外的任何类型`_Bool`都是`signed int`实现`unsigned int`的问题。具体来说，`unsigned char`可能并非无处不在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T09:06:08.267

最好`uint8_t`用于这样的事情。是的，使用[位字段](http://en.wikipedia.org/wiki/Bit_field)：

```
struct tiny_fields
{
  uint8_t twobits : 2;
  uint8_t sixbits : 6;
} 
```

不过，我认为您不能确定编译器会将其打包成一个字节。此外，在 struct 类型的值占用的字节内，您无法知道这些位是如何排序的。如果您想要更多控制权，通常最好使用显式掩码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T10:24:05.230

就我个人而言，我更喜欢移位运算符和一些宏而​​不是位字段，因此编译器没有“魔法”。这是嵌入式世界的惯例。

```
#define SET_VAL2BIT(_var, _val) ( (_var) | ((_val) & 3) )
#define SET_VAL6BIT(_var, _val) ( (_var) | (((_val) & 63)  << 2) )

#define GET_VAL2BIT(_var) ( (_val) & 3)
#define GET_VAL6BIT(_var) ( ((_var) >> 2) & 63 )

static uint8_t my_var;

<...>
SET_VAL2BIT(my_var, 1);
SET_VAL6BIT(my_var, 5);
int a = GET_VAL2BIT(my_var); /* a == 1 */
int b = GET_VAL6BIT(my_var); /* b == 5 */ 
```

# jquery - Jquery mobile + plugin：页面转换后执行javascript代码

> ID：14600154
> 
> 赞同：0
> 
> 时间：2013-01-30T09:04:29.027
> 
> 标签：jquery, jquery-mobile, event-handling

我找到[了 jquery mobile 的这个插件](http://filamentgroup.com/lab/jquery_mobile_pagination_plugin/) 它工作正常，但我无法在第二页加载时执行任何代码，我尝试了任何类型的 jqmobile 事件但没有...

这是 page1.htm 的代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link href="css/jquery.mobile-1.0b2.min.css" rel="stylesheet" type="text/css" />
    <link href="css/jquery.mobile.pagination.css" rel="stylesheet" type="text/css" />

    <script type='text/javascript' src='Js/Libs/jquery-1.6.2.min.js'></script>
     <script type='text/javascript' src='Js/Libs/jquery.mobile-1.0b2.min.js'></script>
    <script type='text/javascript' src='Js/Libs/jquery.mobile.pagination.js'></script>
</head>
    <body>
        PAGE1
        <ul data-role="pagination">
            <li class="ui-pagination-prev"><a href="page0.htm">Prev</a></li>
            <li class="ui-pagination-next"><a href="page2.htm">Next</a></li>
        </ul>

    </body>
</html> 
```

这是 page2.htm 的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">

    <link href="css/jquery.mobile-1.0b2.min.css" rel="stylesheet" type="text/css" />
    <link href="css/jquery.mobile.pagination.css" rel="stylesheet" type="text/css" />

    <script type='text/javascript' src='Js/Libs/jquery-1.6.2.min.js'></script>
     <script type='text/javascript' src='Js/Libs/jquery.mobile-1.0b2.min.js'></script>
    <script type='text/javascript' src='Js/Libs/jquery.mobile.pagination.js'></script>

    </head>
    <body onload="">
        <script type="text/javascript">

                        $('div').live('pageshow', function (event, ui) {
                            alert('This page was just hidden: ');
                        });

        </script>    
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:50:42.837

页面内容必须用 包裹，如下所示：**`data-role="page"`** **`DIV`**

```
<div data-role="page" id="test2"> 
```

这是一个工作示例：

### 测试.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
            <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
            <link href="http://filamentgroup.com/examples/jqm-pagination/jquery.mobile.pagination.css" rel="stylesheet" type="text/css" />
            <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"/></script>    
            <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"/></script>
            <script src="http://filamentgroup.com/examples/jqm-pagination/jquery.mobile.pagination.js"/></script>    
      </head>
      <body>
                <div data-role="page" id="test">        
                    PAGE1
                    <ul data-role="pagination">
                        <li class="ui-pagination-prev"><a href="test1.html">Prev</a></li>
                        <li class="ui-pagination-next"><a href="test2.html">Next</a></li>
                    </ul>    
            </div>   
      </body>
</html> 
```

### test2.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <link href="http://filamentgroup.com/examples/jqm-pagination/jquery.mobile.pagination.css" rel="stylesheet" type="text/css" />
        <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"/></script>    
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"/></script>
        <script src="http://filamentgroup.com/examples/jqm-pagination/jquery.mobile.pagination.js"/></script>       
        </head>
    <body>
          <div data-role="page" id="test2">     
                    PAGE2
                    <ul data-role="pagination" id="second-page-pagination">
                        <li class="ui-pagination-prev"><a href="test.html">Prev</a></li>
                    </ul>            
                <script type="text/javascript">
                                $(document).on('pagebeforeshow', '#test2', function(event){  
                                      if(event.handled !== true) // This will prevent event triggering more then once
                                      {
                                alert('This page was just hidden: ');       
                                            event.handled = true;
                                      }
                                      return false;                                                             
                                });
                </script>
            </div>
    </body>
</html> 
```

如果您想了解更多为什么这是必要的，请查看这篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，为了透明，这是我的个人博客。或者可以在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到。

# jpa - JPA 中的 Oracle 数据库对象类型导入

> ID：14600155
> 
> 赞同：0
> 
> 时间：2013-01-30T09:04:38.090
> 
> 标签：jpa, oracle-objects

有没有办法在 JPA 中导入 oracle 定义的对象类型。我在数据库中定义了一个复杂的对象：

```
create or replace TYPE "myType"{
someString varchar2(100),
someString2 varchar2(100),
constructor....} 
```

此对象类型比在数据库表中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:30:31.660

JPA 中没有对对象类型的标准支持。

如果您使用的是 EclipseLink，则可以使用 @Struct 注解来映射对象类型，

[http://www.eclipse.org/eclipselink/documentation/2.5/jpa/extensions/a_struct.htm#CBBDCAHG](http://www.eclipse.org/eclipselink/documentation/2.5/jpa/extensions/a_struct.htm#CBBDCAHG)

如果你映射了一个类型的表，并且该类型没有嵌套类型，那么它看起来就像一个普通的关系表，你可以像普通的关系表一样映射。

# php - JQuery Ajax Post：500 内部服务器错误

> ID：14600169
> 
> 赞同：1
> 
> 时间：2013-01-30T09:05:29.603
> 
> 标签：php, jquery

我正在尝试执行此 AJAX 帖子，但由于某种原因，我收到了服务器 500 错误。

```
 $.ajax({
            url: '.../PublicAPI.svc/Register',
    type: 'POST',
    dataType: 'json',
    async: false,
    //contentType: 'application/json; charset=utf-8',
    data: '{ "ApiKey": "'+$('#ApiKey').val()+'", "LanguageId": "'+$('#LanguageId').val()+'", "Password": "'+$('#Password').val()+'","Username": "'+$('#Email').val()+'" }',
    success: function( response, textStatus, jqXHR ) {
        console.log('success');
        console.log(response);
    },
    error: function( jqXHR, textStatus, errorThrown ) {
        console.log(jqXHR);
            console.log(textStatus);
        console.log(errorThrown);
    }
}); 
```

任何机构都可以帮助我找出问题所在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:09:11.200

您在 AJAX URL 中使用了三个点。尝试使用 2 个点，服务器错误应该会消失。

```
url: '../PublicAPI.svc/Register', 
```

请参阅[url 中的三个或更多点后跟斜杠会导致内部服务器错误](https://stackoverflow.com/questions/5210994/three-or-more-dots-followed-by-a-slash-in-url-causes-an-internal-server-error)

# c# - 为 gridview 中的所有行触发 Dropdown_SelectedIndexchange 事件

> ID：14600171
> 
> 赞同：0
> 
> 时间：2013-01-30T09:05:36.563
> 
> 标签：c#, asp.net, gridview, selectedindexchanged

我有 gridview ，它在每一行中都包含下拉列表。下拉列表已选择索引更改事件。现在，当我在网格的任何行中更改下拉列表中的值时，它会为 gridview 中的所有行触发选定的索引更改事件。如何解决这个问题？

下面是 HTML 标记

```
<asp:GridView ID="gvEditFields" runat="server" 
                        AllowSorting="false" AllowPaging="false" OnRowDataBound="gvEditFields_RowDataBound" >
                        <Columns>
                            <asp:TemplateField HeaderText="Project">
                                <ItemTemplate>
                                    <asp:DropDownList ID="ddlProjectList" runat="server" Width="130px" AutoPostBack="true"  OnSelectedIndexChanged="ddlProjectList_SelectedIndexChanged"></asp:DropDownList>
                                    <asp:RequiredFieldValidator ID="rfvProjectList" runat="server" ErrorMessage="* Required"
                                        Display="Dynamic" ControlToValidate="ddlProjectList" SetFocusOnError="True" ValidationGroup="EditGridSave"
                                        Text="Required" ></asp:RequiredFieldValidator>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Task">
                                <ItemTemplate>
                                    <asp:DropDownList ID="ddlTaskList" runat="server" AppendDataBoundItems="false" Width="150px" OnSelectedIndexChanged="ddlTaskList_SelectedIndexChanged"></asp:DropDownList>
                                    <asp:RequiredFieldValidator ID="rfvTaskList" runat="server" ErrorMessage="* Required"
                                        Display="Dynamic" ControlToValidate="ddlTaskList" SetFocusOnError="True" ValidationGroup="EditGridSave"
                                        Text="Required" ></asp:RequiredFieldValidator>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Task Status">
                                <ItemTemplate>
                                    <asp:DropDownList ID="ddlTaskStatus" runat="server"  Width="100px"></asp:DropDownList>
                                    <asp:RequiredFieldValidator ID="rfvTaskStatus" runat="server" ErrorMessage="* Required"
                                        Display="Dynamic" ControlToValidate="ddlTaskStatus" SetFocusOnError="True" ValidationGroup="EditGridSave"
                                        Text="Required" ></asp:RequiredFieldValidator>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Description">
                                <ItemTemplate>
                                    <asp:TextBox ID="txtDescription" runat="server" TextMode="MultiLine" Rows="3" Columns="30" />
                                </ItemTemplate>
                            </asp:TemplateField>
                        </Columns>
                    </asp:GridView> 
```

这是行数据绑定和选定索引更改事件的代码。

```
protected void gvEditFields_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        SetEditFieldsGridRecords(e.Row);
        //DropDownList ddlProjectList = (DropDownList)e.Row.FindControl("ddlProjectList");

    }
}

protected void ddlProjectList_SelectedIndexChanged(object sender, EventArgs e)
{        
    DropDownList ddlProjectList = (DropDownList)sender;
   // GridViewRow Row = (GridViewRow)ddlProjectList.NamingContainer;
    GridViewRow selectedRow = (GridViewRow)ddlProjectList.Parent.Parent;
    int i = selectedRow.RowIndex;
    DropDownList ddlTaskList = (DropDownList)selectedRow.Cells[1].FindControl("ddlTaskList");
    DropDownList ddlTaskStatus = (DropDownList)selectedRow.Cells[2].FindControl("ddlTaskStatus");

    BindTasks(clsCheckDBNull.ToStr(ddlProjectList.SelectedValue), -1, ddlTaskList);
    BindStatus(clsCheckDBNull.ToInt(ddlTaskList.SelectedValue), "", ddlTaskStatus);

} 
```

下面是使用的方法的代码

```
private void BindStatus(int intTaskId, string TaskStatus, DropDownList drpStatus)
{
    DataTable dt = clsProjectTaskStatuses.SelectAll(BTMSession.AccountID);
    DataView dv = new DataView(dt);
    drpStatus.DataTextField = "str_PROJECT_TASK_STATUS_NAME";
    drpStatus.DataValueField = "int_PROJECT_TASK_STATUS_ID";
    drpStatus.DataSource = dv;
    drpStatus.DataBind();
    SiteUtility.BindTooltip(drpStatus);

    if (drpStatus.Items.Count >= 2 && TaskStatus.Trim() != "")
    {
        if (drpStatus.Items.FindByText(TaskStatus.ToString()) != null)
            drpStatus.SelectedIndex = drpStatus.Items.IndexOf(drpStatus.Items.FindByText(TaskStatus.ToString()));
    }
} 
```

* * *

```
private void BindTasks(string ProjectNo, int intTaskid, DropDownList drpTasks)
{
    if (drpTasks.Items.Count >= 1)
        drpTasks.Items.Clear();
    DataSet ds = new DataSet();

    clsImportFileTypeDAL objImportFileTypeDAL = new clsImportFileTypeDAL();
    ds = objImportFileTypeDAL.SelectTaskListByProjectNoUserIDForTimeImport(ProjectNo, clsCheckDBNull.ToInt(BTMSession.UserId));
    CommonHelper.DisposeOf(objImportFileTypeDAL);

    if (ds != null && ds.Tables.Count > 0 && ds.Tables[0].Rows.Count > 0)
    {
        drpTasks.DataTextField = "str_TASK_SUMMERY";
        drpTasks.DataValueField = "int_task_id";
        drpTasks.DataSource = ds;
        drpTasks.DataBind();
    }

    drpTasks.Items.Insert(0, new ListItem("Select Task", "-1"));
    SiteUtility.BindTooltip(drpTasks);
    drpTasks.SelectedValue = "-1";

    if (drpTasks.Items.Count >= 2)
    {
        if (drpTasks.Items.FindByValue(intTaskid.ToString()) != null)
            drpTasks.SelectedIndex = drpTasks.Items.IndexOf(drpTasks.Items.FindByValue(intTaskid.ToString()));
    }
} 
```

* * *

私人无效 SetEditFieldsGridRecords(GridViewRow 行) { DataRowView drv = (DataRowView)row.DataItem;

```
 DropDownList ddlProjectList = (DropDownList)row.FindControl("ddlProjectList");
    BindProjects(clsCheckDBNull.ToStr(drv["str_PROJECT_NO"]), ddlProjectList);

    DropDownList ddlTaskList = (DropDownList)row.FindControl("ddlTaskList");
    BindTasks(ddlProjectList.SelectedValue, clsCheckDBNull.ToInt(drv["int_TASK_NO"]), ddlTaskList);

    DropDownList ddlTaskStatus = (DropDownList)row.FindControl("ddlTaskStatus");
    BindStatus(clsCheckDBNull.ToInt(ddlTaskList.SelectedValue), clsCheckDBNull.ToStr(drv["TaskStatus"]), ddlTaskStatus);

    BTMWeb.Calender.Calender txtWorkDate = (BTMWeb.Calender.Calender)row.FindControl("txtWorkDate");
    DropDownList drpStartHours = (DropDownList)row.FindControl("drpStartHours");
    DropDownList drpStartMinutes = (DropDownList)row.FindControl("drpStartMinutes");
    DropDownList drpEndHours = (DropDownList)row.FindControl("drpEndHours");
    DropDownList drpEndMinutes = (DropDownList)row.FindControl("drpEndMinutes");
    TextBox txtDescription = (TextBox)row.FindControl("txtDescription");

    int StartHours = clsCheckDBNull.ToDate(drv["StartTime"]).Hour;
    int StartMinutes = clsCheckDBNull.ToDate(drv["StartTime"]).Minute;
    int EndHours = clsCheckDBNull.ToDate(drv["EndTime"]).Hour;
    int EndMinutes = clsCheckDBNull.ToDate(drv["EndTime"]).Minute;

    txtWorkDate.DateValue = clsCheckDBNull.ToDate(drv["dt_WORKDATE"]);
    drpStartHours.SelectedValue = StartHours.ToString();
    drpStartMinutes.SelectedValue = StartMinutes.ToString();
    drpEndHours.SelectedValue = EndHours.ToString();
    drpEndMinutes.SelectedValue = EndMinutes.ToString();

    txtDescription.Text = clsCheckDBNull.ToStr(drv["str_Description"]);

} 
```

例如。如果我有行并且如果我更改第一行中的下拉值，则所选索引更改会为两行触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:45:36.273

只是一两个改进建议：

*   使用该`NamingContainer`属性来获取对的引用，`GridViewRow`而不是`Paret.Parent`本质上容易出错（例如，如果您在`TemplateField`容器控件中使用控件。

所以而不是：

```
GridViewRow selectedRow = (GridViewRow)ddlProjectList.Parent.Parent; 
```

这个

```
GridViewRow selectedRow = (GridViewRow)ddlProjectList.NamingContainer; 
```

*   与此相关：始终`FindControl`在`NamingContainer`要查找的控件上使用，即`GridViewRow`在这种情况下，`TableCell`不实现[`INamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.inamingcontainer.aspx).

所以而不是：

```
DropDownList ddlTaskList = (DropDownList)selectedRow.Cells[1].FindControl("ddlTaskList"); 
```

这个

```
DropDownList ddlTaskList = (DropDownList)selectedRow.FindControl("ddlTaskList"); 
```

这更不容易出错。

旁注：不清楚为什么需要像`CommonHelper.DisposeOf`. 我假设您会在`BindTasks`和中找到核心问题`BindStatus`。你能展示给他们看吗？

# extjs - Extjs 4.1 折叠时禁用面板预览

> ID：14600172
> 
> 赞同：2
> 
> 时间：2013-01-30T09:05:35.890
> 
> 标签：extjs, header, panel, preview

假设我们有以下代码：

```
Ext.create ( 'Ext.container.Viewport', {
    layout : 'border',
    items  : [{
        region : 'west',
        xtype  : 'panel',
        collapsible : true,
        id     : 'panel1_id',
        width  : '45%'
    }, {
        region    : 'center',
        xtype     : 'panel',
        id        : 'panel2_id',
        width     : '55%'
    }]
}); 
```

正如我们所见，第一个面板是可折叠的。我的问题是：折叠时是否可以禁用面板的预览（当我们单击折叠面板的标题时）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:13:25.610

不，它没有崩溃。您需要为此进行设置`collapsed: true`。

```
Ext.create ( 'Ext.container.Viewport', {
        layout : 'border',
        items  : [{
                    region : 'west',
                    xtype  : 'panel',
                    collapsible : true, // this show the tool within the header
                    collapsed: true, // this collapses 
                    floatable: false, // prevent floating on header-click when collapsed
                    id     : 'panel1_id',
                    width  : '45%'
                  },{
                    region    : 'center',
                    xtype     : 'panel',
                    id        : 'panel2_id',
                    width     : '55%'
                  }]
}); 
```

# json - 将 json 数据导入 mongo 时出错

> ID：14600174
> 
> 赞同：1
> 
> 时间：2013-01-30T09:05:40.827
> 
> 标签：json, mongodb

我正在尝试将一些 json 数据导入 Mongo 并不断出错。我正在做这样的导入

```
mongoimport --stopOnError --db s  --collection names  < snow.json 
```

它给我的错误是

```
 Failure parsing JSON string near: ,

exception:BSON representation of supplied JSON is too large: Failure parsing JSON string near: , 
```

这是json数据。实际上有更多（大约 9 个）条目，但即使有两个条目，我也会收到错误消息。我从另一个可以导入的 json 文件中复制了这种格式。通过 json 验证器运行它说

```
Expecting 'EOF', '}', ',', ']' 
```

在第一个条目的末尾，但它对我成功导入的文件也说了同样的话。你能告诉我有什么问题吗？

```
{ "firstname" : "Dave", "initial" : "M", "lastname" : "Smore", "firm" : "", "address" : "PO Box 479, Vancouver BC V1L 5R3", 
"email" : "david@smore.ca", "phone" : "(250) 654-6840" , "fax" : "(456) 987-7370", "sex": "m"} 

{ "firstname" : "Kerry", "initial" : "C", "lastname" : "Amber", "firm" : "K Amber Corporation", 
"address" : "980 5th Ave, Snowbank, BC V2L 3H8", "email" : "kamber@gmail.com", "phone" : "604 622 6156" , "fax" : "604 662-4532", "sex": "f"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:56:15.050

感谢@attish 的评论，在我从 json 文件中删除换行符后，导入工作正常进行。

# cobertura - Cobertura -java.lang.IllegalArgumentException：类没有默认接口

> ID：14600178
> 
> 赞同：1
> 
> 时间：2013-01-30T09:06:04.253
> 
> 标签：cobertura

我正在使用 Cobertura 对集成测试的覆盖率进行编码。在 JBoss 服务器中部署检测 jar 时，我面临以下问题。

```
DEPLOYMENTS IN ERROR:  Deployment "vfszip:/D:/jboss-5.1.0.GA/server/test/some_jar.jar/" is in error due to the following reason(s):
java.lang.IllegalArgumentException: 
Class class com.someclass does not have a default interface 
```

以下是我到目前为止所遵循的步骤：

1.  已下载 cobertura-1.9.4.1。
2.  使用这个命令 obertura-instrument.bat C:\some_jar.jar 我为 some_jar.jar 生成了 .ser 文件和检测 jar。
3.  将 jar 放在 JBoss 服务器的 test/ 文件夹中。
4.  将 .ser 文件复制到 JBoss/bin 文件夹。
5.  将 Cobertura.jar 复制到 Jboss/lib 文件夹。
6.  运行 JBoss 服务器。

如果我在这里遗漏任何东西，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:21:05.673

可能是配置文件错误，因为您可能在第一次开始之前没有调整设置。

# ssl - IIS 无法验证我的客户端证书

> ID：14600180
> 
> 赞同：4
> 
> 时间：2013-01-30T09:06:07.083
> 
> 标签：ssl, localhost, http-status-code-403, iis-8

我尝试为运行我的 azure web 角色的 localhost 设置 SSL。

我所做的是创建了自己的 CA，创建了客户端和服务器证书，然后将它们全部安装在我的证书存储中。服务器证书位于本地计算机个人证书中，客户端证书安装在个人下的当前用户存储中，CA 证书安装在两个存储中的受信任根证书中。

我还将我的 IIS 网站配置为使用 SSL，并使用 netsh 将服务器证书绑定到网站运行的 ip。

但是，当我尝试通过 IIS 访问我的网站时，出现错误：

```
HTTP Error 403.16 - Forbidden

Your client certificate is either not trusted or is invalid. 
```

我知道我使用的证书是由同一个 CA 颁发的，所以除了 IIS 可能无法访问我受信任的根存储之外，我真的看不出任何其他原因。当我将我的解决方案部署到 azure 时，它​​不会给我这个错误，所以我很肯定这是我无法解决的本地 IIS 的配置问题。

关于这里可能是什么问题的任何建议？

# android - 如何估算在应用中使用 AdMob 的潜在收入？

> ID：14600194
> 
> 赞同：17
> 
> 时间：2013-01-30T09:06:47.087
> 
> 标签：android, in-app-purchase, admob, ads, in-app-billing

目前，我在 android 应用程序中几乎没有付费功能。我想估算在应用中使用 AdMob 广告的潜在收入并选择最佳策略：付费功能或广告。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T09:13:43.333

据我所知，要真正估计这样的事情是完全不可能的。您在 Admob 中的付款率取决于很多因素，例如填充率和点击率，但总的来说，您可以确定它会非常低。基本上，您所说的数字低至每 1000 次观看 0.04 美元。

但是，真正的问题是您的功能/应用是否值得付费，尤其是假设您的应用和开发者帐户并不为人所知，并且您没有被 Google 挑选到首页的聚光灯下。

基本上这完全取决于您自己的判断，但正如我所见，在寻找最大收入时做出的选择是两者兼而有之。

如果您查看大多数游戏（例如 Angry Birds、Ruzzle、Wordfeud、DrawSomething 等），它们会推出两种选择：1 带有广告，以便人们可以试用您的应用程序，以及 1 为 - 小得多的人群提供的付费版本愿意支付。

应用内支付功能也可以使用相同的功能，只需添加一项功能即可在购买时丢弃横幅。

# javascript - 谷歌可视化数据表：计算总数

> ID：14600199
> 
> 赞同：3
> 
> 时间：2013-01-30T09:06:58.650
> 
> 标签：javascript, google-visualization

我正在寻找一种将一行总计添加到简单 DataTable 的方法。这是我的代码：

```
// Create and populate the data table.
var dt = new google.visualization.DataTable();

dt.addColumn('string', 'Name');
dt.addColumn('number', 'Height');

dt.addRows([
    ['Tong Ning mu', 174],
    ['Huang Ang fa', 523],
    ['Teng nu', 86]
]);

var myTotal;
/* calculate total sum of column Height */
dt.addRow(['TOTAL', myTotal]);

// Create and draw the visualization.
visualization = new google.visualization.Table(document.getElementById('table'));
visualization.draw(dt, null); 
```

如何`myTotal`从`dt`DataTable 计算？

是否可以将最后一行（总计）加粗？

有没有更优雅的方式将总计添加到表格中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-21T04:54:07.220

创建以下函数：

```
function getSum(data, column) {
    var total = 0;
    for (i = 0; i < data.getNumberOfRows(); i++)
        total = total + data.getValue(i, column);
    return total;
} 
```

使用您创建的 google 数据表和列数组索引调用它。在你的情况下：

```
var total = getSum(dt,1); 
```

然后，您可以将该总数添加到新的原始数据中，或者您想用它做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T06:39:00.277

由于@Danny 的回复与我对专栏求和的解决方案相同，所以我不会写它。

要设置*单元格*属性，您`dataTable.setProperty(columnIndex,rowIndex,'style','font-weight:bold;');`

所以在你的情况下你会写
`dt.setProperty(0, 3, 'style','font-weight:bold;'); dt.setProperty(1, 3, 'style','font-weight:bold;');`

假设您提供了一个更大的数据表，为所有单元格键入它可能不方便，您可以使用 for 循环（使整个最后一行变为粗体）：

```
var lastRow = dt.getNumberOfRows()-1
for (i=0, n=dt.getNumberOfColumns(); i < n; i++) {
   dt.setProperty(i, lastRow, 'style', 'font-weight:bold;');
} 
```

遗憾的是，您无法将属性设置为整行/列（请参阅有关此自定义属性的[文档）。](https://developers.google.com/chart/interactive/docs/gallery/table#customproperties)

# c++ - 为什么我应该在函数签名中避免 std::enable_if

> ID：14600201
> 
> 赞同：174
> 
> 时间：2013-01-30T09:07:28.083
> 
> 标签：c++, templates, c++11, sfinae, enable-if

Scott Meyers 发布了他的下一本书 EC++11 的[内容和状态](http://scottmeyers.blogspot.de/2013/01/effective-c11-content-and-status.html)。他写道，书中的一项内容可能是*“Avoid `std::enable_if`in function signatures”*。

`std::enable_if`可以用作函数参数、返回类型或类模板或函数模板参数，以有条件地从重载决议中删除函数或类。

在[这个问题](https://stackoverflow.com/questions/11055923/stdenable-if-parameter-vs-template-parameter)中，显示了所有三个解决方案。

作为函数参数：

```
template<typename T>
struct Check1
{
   template<typename U = T>
   U read(typename std::enable_if<
          std::is_same<U, int>::value >::type* = 0) { return 42; }

   template<typename U = T>
   U read(typename std::enable_if<
          std::is_same<U, double>::value >::type* = 0) { return 3.14; }   
}; 
```

作为模板参数：

```
template<typename T>
struct Check2
{
   template<typename U = T, typename std::enable_if<
            std::is_same<U, int>::value, int>::type = 0>
   U read() { return 42; }

   template<typename U = T, typename std::enable_if<
            std::is_same<U, double>::value, int>::type = 0>
   U read() { return 3.14; }   
}; 
```

作为返回类型：

```
template<typename T>
struct Check3
{
   template<typename U = T>
   typename std::enable_if<std::is_same<U, int>::value, U>::type read() {
      return 42;
   }

   template<typename U = T>
   typename std::enable_if<std::is_same<U, double>::value, U>::type read() {
      return 3.14;
   }   
}; 
```

*   应该首选哪种解决方案，为什么要避免使用其他解决方案？
*   在哪些情况下， “*在函数签名中**避免`std::enable_if`*”涉及用作返回类型（这不是正常函数签名的一部分，而是模板特化的一部分）？
*   成员函数模板和非成员函数模板有什么区别吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-01-31T10:42:28.443

*将 hack 放入模板参数*中。

模板参数方法比`enable_if`其他方法至少有两个优点：

*   *可读性*： enable_if 使用和返回/参数类型没有合并到一个杂乱的类型名称消歧器和嵌套类型访问块中；即使可以使用别名模板来减轻消歧器和嵌套类型的混乱，但这仍然会将两个不相关的东西合并在一起。enable_if 的使用与模板参数有关，与返回类型无关。将它们放在模板参数中意味着它们更接近重要的东西；

*   *普遍适用性*：构造函数没有返回类型，并且一些运算符不能有额外的参数，因此其他两个选项都不能应用于任何地方。将 enable_if 放在模板参数中适用于任何地方，因为无论如何您只能在模板上使用 SFINAE。

对我来说，可读性方面是这个选择的最大动力。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-01-30T09:33:52.313

`std::enable_if`**在模板参数推导**过程中依赖于“[**替换失败不是错误**](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)”（又名 SFINAE）原则。这是一个**非常脆弱**的语言功能，您需要非常小心才能使其正确。

 ****1.  如果您的条件中`enable_if`包含嵌套模板或类型定义（提示：查找`::`标记），那么这些嵌套模板或类型的解析通常**是非推断上下文**。这种非推导上下文的任何替换失败都是**错误**。
2.  多个`enable_if`重载中的各种条件不能有任何重叠，因为重载解析会模棱两可。这是作为作者的你需要自己检查的东西，尽管你会得到很好的编译器警告。
3.  `enable_if`在重载决议期间操纵一组可行的函数，这可能会产生令人惊讶的交互，这取决于从其他范围（例如通过 ADL）引入的其他函数的存在。这使得它不是很健壮。

简而言之，当它工作时它工作，但当它不工作时，它可能很难调试。一个很好的替代方法是使用**标记分派**，即委托给一个实现函数（通常在`detail`命名空间或帮助类中），该函数接收基于您在`enable_if`.

```
template<typename T>
T fun(T arg) 
{ 
    return detail::fun(arg, typename some_template_trait<T>::type() ); 
}

namespace detail {
    template<typename T>
    fun(T arg, std::false_type /* dummy */) { }

    template<typename T>
    fun(T arg, std::true_type /* dummy */) {}
} 
```

标记调度不操纵重载集，但通过编译时表达式（例如，在类型特征中）提供适当的参数，帮助您准确选择所需的函数。以我的经验，这更容易调试和正确。如果你是一个有抱负的复杂类型特征的库作者，你可能需要`enable_if`某种方式，但对于大多数常规使用的编译时条件，不建议这样做。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-03-28T10:56:03.450

> 应该首选哪种解决方案，为什么要避免使用其他解决方案？

### 选项1：`enable_if`在模板参数中

*   它可用于构造函数。

*   它可用于用户定义的转换运算符。

*   它需要 C++11 或更高版本。

*   在我看来，它更具可读性。

*   重载很容易误用并产生错误：

    ```
    template<typename T, typename = std::enable_if_t<std::is_same<T, int>::value>>
    void f() {/*...*/}

    template<typename T, typename = std::enable_if_t<std::is_same<T, float>::value>>
    void f() {/*...*/} // Redefinition: both are just template<typename, typename> f() 
    ```

    注意使用`typename = std::enable_if_t<cond>`而不是正确的`std::enable_if_t<cond, int>::type = 0`

### 选项 2：`enable_if`在返回类型中

*   它不能与构造函数（没有返回类型）一起使用
*   它不能用于用户定义的转换运算符（因为它不可推导）
*   它可以在 C++11 之前使用。
*   第二个更具可读性的 IMO。

### 选项 3：`enable_if`在函数参数中

*   它可以使用 C++11 之前的版本。
*   它可用于构造函数。
*   它不能用于用户定义的转换运算符（它们没有参数）
*   它不能用于具有固定数量参数的方法中，例如一元/二元运算符`+`、`-`等`*`。
*   在继承中使用它是安全的（见下文）。
*   更改函数签名（你基本上有一个额外的作为最后一个参数`void* = nullptr`）；这会导致指向函数的指针的行为不同等等。

> 成员函数模板和非成员函数模板有什么区别吗？

继承和 存在细微差别`using`：

根据`using-declarator`（强调我的）：

[命名空间.udecl](http://www.eel.is/c++draft/namespace.udecl#1)

> 通过对 using-declarator 中的名称执行限定名称查找 ([basic.lookup.qual], [class.member.lookup]) 来找到 using-declarator 引入的声明集，不包括如所述隐藏的函数以下。

> ...

> 当 using-declarator 将基类中的声明带入派生类时，派生类中的成员函数和成员函数模板会覆盖和/或隐藏**具有相同名称的成员函数和成员函数模板，参数类型列表，cv-基类中的限定和引用限定符（如果有）**（而不是冲突）。此类隐藏或覆盖的声明被排除在 using-declarator 引入的声明集中。

因此，对于模板参数和返回类型，方法都隐藏在以下场景中：

```
struct Base
{
    template <std::size_t I, std::enable_if_t<I == 0>* = nullptr>
    void f() {}

    template <std::size_t I>
    std::enable_if_t<I == 0> g() {}
};

struct S : Base
{
    using Base::f; // Useless, f<0> is still hidden
    using Base::g; // Useless, g<0> is still hidden

    template <std::size_t I, std::enable_if_t<I == 1>* = nullptr>
    void f() {}

    template <std::size_t I>
    std::enable_if_t<I == 1> g() {}
}; 
```

[演示](http://coliru.stacked-crooked.com/a/de74c012f6fcafd0)（gcc 错误地找到了基函数）。

而有论点，类似的情况是有效的：

```
struct Base
{
    template <std::size_t I>
    void h(std::enable_if_t<I == 0>* = nullptr) {}
};

struct S : Base
{
    using Base::h; // Base::h<0> is visible

    template <std::size_t I>
    void h(std::enable_if_t<I == 1>* = nullptr) {}
}; 
```

[演示](http://coliru.stacked-crooked.com/a/b5eb2084cca34b9b)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-16T14:47:28.540

“应该首选哪种解决方案，我为什么要避开其他解决方案？”

当问题被问到时，`std::enable_if`from`<type_traits>`是可用的最佳工具，其他答案在 C++17 之前是合理的。

如今在 C++20 中，我们通过`requires`.

```
#include <concepts
template<typename T>
struct Check20
{
   template<typename U = T>
   U read() requires std::same_as <U, int>
   { return 42; }

   template<typename U = T>
   U read() requires std::same_as <U, double>
   { return 3.14; }   
}; 
```****

# jquery - Can't return false to an link which is created by jquery

> ID：14600214
> 
> 赞同：1
> 
> 时间：2013-01-30T09:07:56.257
> 
> 标签：jquery, anchor

Well, I inserted an anchor tag with jquery:

```
 $.post(url, {key:key}, function(data) { 
    $('#links').html(data); 
    }); 
```

data returned from a php file is:

```
<a href="#" class="some-class">Hypertext<a> 
```

When this link is clicked i want to return false so i did:

```
 <a href="#" class="some-class" onclick="someFunction(); return false">Hypertext</a> 
```

but it isn't returning false, but the function is called. I tried to return false from the function it isn't working either.

And when I tried to use:

```
$('.some-class').click(function() {
   // something
   }); 
```

this didn't call the function. I couldn't find a way to fix this, any help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:11:23.103

You need to use event delegation using [jQuery.on](http://api.jquery.com/on/)

```
$('#links').on('click', '.some-class', function(){
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:13:22.943

You need to use `on()` with a delegated event handler as the `.some-class` element is being dynamically appended. You'll also want to use `event.preventDefault()` to stop the standard link behaviour. Try this:

```
$('#links').on('click', '.some-class', function(e) {
    e.preventDefault(); // stop link behaviour
    // do something...
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:14:40.387

Try to bind click when content are loaded.

# javascript - 需要在断开连接的 html 代码（如 /div）之前和之后添加到对象

> ID：14600216
> 
> 赞同：2
> 
> 时间：2013-01-30T09:08:05.150
> 
> 标签：javascript, jquery

有一个简单的问题！我有一个结构像这样的代码：

```
 <a class="adv_link" target="_blank" href="">Link 1</a>
    text here 1
    <div class="adv_separator"></div>

    <a class="adv_link" target="_blank" href="">Link 2</a>
    text here 2
    <div class="adv_separator"></div>

and etc... 
```

我想在每个链接之前添加带有“add_link”类的代码：`<div class="slide">`并在每个div之后添加带有“adv_separator”类的代码：`</div>`我怎么能用jquery做到这一点？

ps 换句话说，我想创建几个嵌套这些链接、文本和 div 的 div，这样我就可以使用 jquery 循环插件来创建一个滑块。

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T09:35:20.013

简单的逻辑，但你必须知道 DOM 是如何工作的。（追加“移动”元素，没有“稀疏选择器”，你需要知道在哪里放置新元素等）

```
$('.adv_link').each(function() {
    var el = $('<div></div>', {'class': 'slide'}),
        link = $(this),
        text = $(this.nextSibling),
        sep = link.nextUntil('.adv_separator');

    // Append each element. Cloned elements, of course.
    el
        .append(link.clone())
        .append(text.clone())
        .append(sep.clone());

    // Remove the separator and the text.
    sep.remove();
    text.remove();

    // And replace the link with the full div containing the cloned elements.
    link.replaceWith(el);            
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T09:38:35.450

### 非常简短的版本：

```
$(".adv_link").each(function() {
    $(this).nextUntil(".adv_separator +")
      .andSelf().add(this.nextSibling)
      .wrapAll("<div class='slide' />");
}); 
```

**演示：http:** [//jsbin.com/ukafip/2/](http://jsbin.com/ukafip/2/)

# .net - 避免运行服务器的 Web 表单页面

> ID：14600223
> 
> 赞同：0
> 
> 时间：2013-01-30T09:08:22.777
> 
> 标签：.net, webforms

我对需要重写的页面有点问题。

基本上，页面`$(document).ready`通过 ajax 调用 Web 服务并返回一个 json 对象，然后使用该对象和模板来生成页面。这完美地工作......直到你关闭js然后你只看到一个空白页面。

无论如何，我被告知让它适用于非 js 人......并且可以索引谷歌

现在通常我会做一些类似的东西`<asp:label id="name" runat="server">`，然后在后面的代码中填充它。但是由于附加到页面的所有其他 JS 到不同的 div 和标签等，我试图避免这种情况。例如 Masonry js 是附加的。

显然，如果我将这些东西更改为 runat 服务器，那么 ID 会更改。

所以问题是，我是否可以在 aspx 页面中包含简单的 html 和例如`<%= presult.Name %>`，以及在后面的代码中`AWebService ws = new AWebService(); var result = ws.Getdata....`，然后将“结果”公开`public MyClass presult {get;set;}`

**问题**：与制作标签相比，这样做是否存在性能问题`runat=server`？这样做是否还有其他明显的问题（我从未在带有 <%%> 标签的 aspx 页面上以这种方式使用过 .net。已经阅读过它，但从未使用过...... weight' 的替代方案，因为如果您使用服务器端控制标签，它可以避免放入所有额外的东西......

注意：我今天在阅读中查看 MVC。我是否正确地说，如果我没有，`runat=server`但上面的其他方式有点像使用 aspx 视图引擎的 MVC？此外，我已经看到重新进行 ajax 调用的帖子，`#!`但如果可能，我们会尽量避免使用这些哈希标签。

提前致谢

干杯，罗宾

**编辑**

请注意，为避免控件上的客户端 ID 混乱，.net 4.0 具有`ClientIDMode`您可以将其设置为静态的...。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:15:27.787

您尝试采用的方法没有任何问题。但我宁愿将结果放在几个 noscript 标记中，以确保它们仅在 js 关闭时显示。

```
<noscript>
    <%= presult.Name %>
</noscript> 
```

# mysql - n个嵌套内连接

> ID：14600225
> 
> 赞同：1
> 
> 时间：2013-01-30T09:08:29.697
> 
> 标签：mysql, sql, sql-server, join, inner-join

我有一个 sql 语句可以正确地从一个表中获取数据。但是，我需要以相同的方式从 n 个名为`table_n`. 所有这些表都包含 和 的 3 字段主`projid`键。我也需要返回，以区分表格。结果将按和/或排序。`docid``revnr``n``docType``projid``docid`

我尝试在 PHP 中对来自不同查询的所有输出进行排序，但速度太慢（在 3MB 数据库上至少需要几秒钟）。我相信 MySQL/MSSQL 会做得更快。

这是我当前的查询：

```
 SELECT a.*  FROM   `table_1` a  
        INNER JOIN (SELECT docid,  
                           Max(revnr) max_val  
                    FROM   `table_1`  
                    WHERE  ( projid = something )  
                    GROUP  BY docid) b  
                ON a.docid = b.docid  
                   AND a.revnr = b.max_val  ORDER  BY docid DESC 
```

`revnr`我当前的查询获取每个`docid`和最高的行`projid`。

我正在开发 MySQL，但我也需要它在 MSSQL 上工作。一个通用的 SQL 解决方案会很棒。

谢谢！

编辑：我目前拥有的表的表模式：

```
CREATE TABLE IF NOT EXISTS `table_1` (
  `projid` int(11) NOT NULL,
  `docid` int(11) NOT NULL,
  `revnr` int(11) NOT NULL,
  `revname` varchar(64) NOT NULL,
  `signedOn` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `sign` int(11) NOT NULL,
  `ritningsnr` varchar(128) NOT NULL,
  `moment` varchar(256) NOT NULL,
  `omrade` varchar(256) NOT NULL,
  `start` datetime NOT NULL,
  `stop` datetime NOT NULL,
  `extTodo` int(11) NOT NULL,
  PRIMARY KEY (`projid`,`docid`,`revnr`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 COMMENT='egenkontroll';

CREATE TABLE IF NOT EXISTS `table_2` (
  `projid` int(11) NOT NULL,
  `docid` int(11) NOT NULL,
  `revnr` int(11) NOT NULL,
  `revname` varchar(64) NOT NULL,
  `signedOn` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `sign` int(11) NOT NULL,
  `extWater` int(11) NOT NULL,
  `extRisk` int(11) NOT NULL,
  `extSystem` int(11) NOT NULL,
  `extHelp` int(11) NOT NULL,
  `extProvtryck` int(11) NOT NULL,
  `extDoc` int(11) NOT NULL,
  `extEgenkontroll` int(11) NOT NULL COMMENT 'exttabell',
  `extOther` int(11) NOT NULL,
  `extMontorer` int(11) NOT NULL,
  PRIMARY KEY (`projid`,`docid`,`revnr`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 COMMENT='arbetsberedning';

CREATE TABLE IF NOT EXISTS `table_3` (
  `projid` int(11) NOT NULL,
  `docid` int(11) NOT NULL,
  `revnr` int(11) NOT NULL,
  `revname` varchar(64) NOT NULL,
  `adress` varchar(256) NOT NULL,
  `pipesMark` tinyint(1) NOT NULL,
  `pipesKulvert` tinyint(1) NOT NULL,
  `pipesBasement` tinyint(1) NOT NULL,
  `pipesVaning` tinyint(1) NOT NULL,
  `pipesIngjutna` tinyint(1) NOT NULL,
  `ledningTappvatten` tinyint(1) NOT NULL,
  `ledningVarmevatten` tinyint(1) NOT NULL,
  `ledningHetvatten` tinyint(1) NOT NULL,
  `ledningKylaPrim` tinyint(1) NOT NULL,
  `ledningKylaSek` tinyint(1) NOT NULL,
  `ledningGas` tinyint(1) NOT NULL,
  `ledningLuft` tinyint(1) NOT NULL,
  `ledningAvlopp` tinyint(1) NOT NULL,
  `ledningOther` varchar(512) NOT NULL,
  `materialGjutjarn` tinyint(1) NOT NULL,
  `materialSteel` tinyint(1) NOT NULL,
  `materialKoppar` tinyint(1) NOT NULL,
  `materialPlast` tinyint(1) NOT NULL,
  `materialRostfritt` tinyint(1) NOT NULL,
  `materialOther` varchar(512) NOT NULL,
  `omfattningLength` int(11) NOT NULL COMMENT 'meter',
  `omfattningDimension` varchar(16) NOT NULL,
  `omfattningRitningnr` varchar(128) NOT NULL,
  `doneWithPump` tinyint(1) NOT NULL,
  `doneWithVattenledning` tinyint(1) NOT NULL,
  `doneWithKompressor` tinyint(1) NOT NULL,
  `doneWithTathetsprovare` tinyint(1) NOT NULL,
  `tryckmedieVatten` tinyint(1) NOT NULL,
  `tryckmedieLuft` tinyint(1) NOT NULL,
  `tryckmedieOther` varchar(128) NOT NULL,
  `manometerDiameter` int(11) NOT NULL COMMENT 'mm',
  `manometerGradering` int(11) NOT NULL COMMENT 'kPa',
  `manometerReadPressure` int(11) NOT NULL,
  `manometerTid` int(11) NOT NULL COMMENT 'sekunder',
  `testedOn` datetime NOT NULL,
  `testedBy` varchar(128) NOT NULL COMMENT '"id_" + (userid)',
  `comments` varchar(1024) NOT NULL,
  `commentsBy` varchar(128) NOT NULL COMMENT '"id_" + (userid)',
  `signedOn` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `sign` int(11) NOT NULL,
  PRIMARY KEY (`projid`,`docid`,`revnr`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

我需要的字段是`projid`, `docid`, `revnr`, `revname`, `signedOn`,`sign`并且存在于所有当前和未来的表中。

# android - 从 android 应用程序验证数据并将其发布到 cakePHP 网站

> ID：14600227
> 
> 赞同：0
> 
> 时间：2013-01-30T09:08:35.337
> 
> 标签：android, cakephp, forms-authentication, restful-authentication

我正在构建一个将数据从 Android 设备发布到 cakephp 后端（Web 服务）的应用程序。我最终制作了自己的身份验证对象并像这样发送访问令牌：

```
class MyAuthenticate extends BaseAuthenticate {

    public function authenticate(CakeRequest $request, CakeResponse $response) {

        $userCont = $this->_Collection->getController();
        $userCont->loadModel($this->_Collection->getController()->modelClass);

        $response = array();

        if (isset($request['data']['access_token']) AND $userCont->User->find('all', array('recursive' => 0, 'conditions' => array('User.access_token' => $request['data']['access_token'])))) {

            //debug( $userCont->User->find('all',array('recursive'=>0,'conditions'=>array('access_token'=>$request['data']['access_token'])))); 
            //die;
            return $userCont->User->find('all', array('recursive' => 0, 'conditions' => array('access_token' => $request['data']['access_token'])));
        }
        else
            return false;//print_r('NOT FOUND');
     } 
```

然后将此添加到身份验证数组

```
public function beforeFilter() {

    $this->Auth->authenticate = array(
        AuthComponent::ALL => array('userModel' => 'User'),

        'Form',
        'My'

    ); 
```

我通过向登录页面发布带有访问令牌的请求来测试它，这将返回主页（重定向 url）。

现在我想将数据发布到其他控制器操作，例如“添加”帖子。如果我使用访问令牌和请求参数将请求发送到例如 mysite/posts/add，它不会发布并返回 ACL 权限错误消息。

我想我需要在登录或某些东西中进行一些重定向或手动重定向？到目前为止，我在构建此身份验证对象时的逻辑是否正确？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:23:39.637

您可以在控制器中使用 $this->Auth->allow('..ACTION..') 。您现在必须在 Cake-handling 中检查请求的标头，所以我建议在 beforeFilter 方法中使用此检查创建一个单独的 WebserviceController...

# ruby-on-rails - 如何更改“设计：密码重置指令电子邮件的主题”

> ID：14600229
> 
> 赞同：30
> 
> 时间：2013-01-30T09:08:38.303
> 
> 标签：ruby-on-rails, ruby, devise, mailer

我只是无法更改“密码重置说明”电子邮件的主题。我已更改 Mailer 中的 notifer.rb 以覆盖设计默认电子邮件主题。但它不起作用。

在我的应用程序中，Devise .yml 文件中有默认的电子邮件主题。但我想通过从数据库中提取数据来动态改变它。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-24T13:43:44.117

您可以在 intilizer 目录的 devise.en.yml 文件中更改它

并为任何邮件设置您自己的主题

```
 mailer:
                     confirmation_instructions:
                       subject: 'Confirmation instructions'
                     reset_password_instructions:
                       subject: 'Reset password instructions'
                     unlock_instructions:
                       subject: 'Unlock Instructions' 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-01-24T23:08:06.657

我通过创建自己的 Devise::Mailer 子类来实现这一点。

```
class DeviseMailer < Devise::Mailer
  def reset_password_instructions(record, token, opts={})
    mail = super
    # your custom logic
    mail.subject = "[SOME DB DATA]"
    mail
  end
end 
```

然后修改 devise.rb 初始化程序以使用我的邮件程序。

```
# Configure the class responsible to send e-mails.
config.mailer = 'DeviseMailer' 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-04-24T20:28:35.710

更改选项`:subject`：

```
class DeviseMailer < Devise::Mailer
  def reset_password_instructions(record, token, opts={})
    opts[:subject] = 'SOME DB DATA'
    super
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T10:03:50.683

您可以在控制器中编写自己的方法并调用相应的邮件模板。这将帮助您.. 否则设计视图，将有一个视图页面发送重置指令。改变那里的内容..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-05T06:14:17.843

对于默认外语（例如日语）

**第 1**步在 config/locales/（或任何文件名）中创建一个“ja.yml”

```
ja:
  devise:    
    mailer:
      confirmation_instructions:
        subject: '仮会員登録完了のお知らせ'
      reset_password_instructions:
        subject: 'パスワード再設定手順のお知らせ' 
```

**步骤 2**在 config/environments/development.rb

```
config.i18n.default_locale = :ja 
```

**STEP 3**重启服务器

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-02T19:56:51.330

如果您愿意翻译您的设计消息，这是我的情况，更好的做法是在其中创建一个新的 yml 文件`config/locale`并更改您的应用程序的语言环境`config/application.rb`

1.  为了说明，我必须在`devise.pt-BR.yml`里面创建`config/locale`.

2.  [然后我在这个链接](https://gist.github.com/mateusg/924555/)上从互联网上复制了它的翻译。

3.  最后，我将应用程序的新语言环境设置`config/application.rb`如下：

    ```
    config.i18n.default_locale = :'pt-BR' 
    ```

希望它可以帮助你们中的一些人和我有同样的问题。

# php - 使用 PHP 或 codeigniter 处理 url 中的空格

> ID：14600230
> 
> 赞同：0
> 
> 时间：2013-01-30T09:08:50.770
> 
> 标签：php, codeigniter, urldecode

我正在从事一个需要我从 URL 获取邮政编码的项目。由于邮政编码中有空间，我有两种选择来实现这一点：1）要么构造一个带有这样空间的邮政编码的URL：

```
 http://myhostname/seven/locator/PC1%201LA 
```

或者

2）从url中获取邮政编码并在解码的url中插入空格：

```
 http://myhostname/seven/locator/PC11LA 
```

但我不知道该怎么做，因为我的邮政编码可能是这样的：MM11 5PW 而不是 PC1 1LA

我怎样才能实现和解决这个问题？我怎样才能在 url 中发送空格，以便它可以给我这样的邮政编码：MM1 5PW 或 PC11 6MP??

注意：我正在使用 QR 码阅读器导航到网站。QR 阅读器无法识别 + 加号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:39:37.400

使用邮政编码创建 url：

```
<?php

$postCode = 'MM11 5PW';
$url = 'http://myhostname/seven/locator?postcode=' . urlencode($postCode );

?> 
```

在您的定位器控制器中的某个地方...

```
<?php

$postCode = urldecode($_GET['postcode']);
echo 'Posted postcode: ' . $postCode;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:10:59.850

百分比编码的空格“%20”效果很好。

但我宁愿将它们发送到查询字符串中：`http://hostname/seven/locator?postcode=PC1%201LA`

# set - 为什么 Python 集不被视为序列？

> ID：14600236
> 
> 赞同：6
> 
> 时间：2013-01-30T09:09:52.043
> 
> 标签：set, sequence

在[2.x 版本的 python 文档中，](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)它明确指出有七种序列数据类型。一段时间后（在同一页面上），文档继续讨论集合和元组，这两者都不包括在上述七个中。有谁知道究竟是什么定义了序列类型？我的直觉定义具有非常适合该法案的集合和元组，而且我没有任何运气找到明确的官方定义。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T09:11:22.607

“[序列](http://www.google.com/search?q=define+sequence)”这个词暗示了一个顺序，但集合并不是一个特定的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:14:02.600

元素*索引*是 Python[序列](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)的基本概念。如果您查看序列操作表，您会看到一些直接使用索引的操作：

```
s[i]        ith item of s, origin 0 (3)
s[i:j]      slice of s from i to j  (3)(4)
s[i:j:k]    slice of s from i to j with step k  (3)(5)
s.index(i)  index of the first occurence of i in s 
```

集合和字典没有元素索引的概念，因此不能被视为序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:14:29.110

> 在数学中，非正式地说，序列是对象（或事件）的有序列表。像集合一样，它包含成员（也称为元素或术语）。有序元素的数量（可能无限）称为序列的长度。与集合不同，顺序很重要，完全相同的元素可以在序列中的不同位置多次出现。最准确地说，序列可以定义为一个函数，其域是一个可数的全序集，例如自然数。

[http://en.wikipedia.org/wiki/Sequence](http://en.wikipedia.org/wiki/Sequence)

;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T09:16:38.377

请参阅[Python 词汇表](http://docs.python.org/2/glossary.html#term-sequence)：

> 顺序
> 
> `__getitem__()`一个支持通过特殊方法使用整数索引进行有效元素访问的迭代，并定义了一个`len()`返回序列长度的方法。一些内置的序列类型是 list、str、tuple 和 unicode。请注意， dict 也支持`__getitem__()`and `__len__()`，但被认为是映射而不是序列，因为查找使用任意不可变键而不是整数。

元组是序列。集合不是序列——它们没有顺序，也不能被索引`set[index]`——它们甚至没有任何索引的概念。（不过，它们是`iterable`- 您可以迭代它们的项目。）

# oracle - 禁用 Oracle Webcenter Portal 中的所有皮肤

> ID：14600237
> 
> 赞同：0
> 
> 时间：2013-01-30T09:09:54.453
> 
> 标签：oracle, webcenter

是否可以禁用 Oracle Webcenter Portal 中的所有皮肤？

默认情况下，我得到大约 300kb 的 css。我不想使用任何默认 css，因为我想编写自己的 css。

我试图扩展“空”皮肤但没有成功。此外，我尝试扩展一个不存在的皮肤，结果只是获得了默认皮肤。

我正在寻找一种禁用所有皮肤的方法，并在 Web 内容文件夹中使用 css。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T10:01:04.697

据我所知，没有办法摆脱所有的束缚。CSS 还用于标准 WebCenter Portal 组件，例如管理控制台和页面编辑功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T15:21:56.647

您可以开始的最低限度是从非常小的皮肤简单皮肤扩展

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T21:34:09.957

我建议创建一个自定义皮肤，您也可以在其中覆盖 ADF 组件选择器。这应该可以帮助您从“空”的皮肤开始。

我认为您不能禁用 ADF 本身附带的基本皮肤。您可能需要查看堆栈描述的其他缓存策略。

高温高压

# performance - Liferay 启动耗时过长

> ID：14600239
> 
> 赞同：8
> 
> 时间：2013-01-30T09:10:00.087
> 
> 标签：performance, liferay, startup

我是 Liferay 开发的新手，我在启动 Liferay Tomcat 服务器时遇到了麻烦。这需要将近 3 分钟（169048 毫秒），这对于开发来说是不可接受的。我想把它缩短到大约一分钟。

以下是我机器的规格：

*   英特尔酷睿双核 T2300 @ 1.66GHz
*   4GB RAM（使用中 3.24GB）
*   带有 Service Pack 1 的 Windows 7 Enterprise 32 位

我在用着：

*   Liferay 6.1.1-ce-ga2 与 Tomcat 7 捆绑在一起
*   Eclipse IDE Juno 发布

为了加快速度，我已经：

*   从 tomcat\webapps 文件夹中删除了所有不必要的 portlet。
*   将Tomcat原生库1.1.24放到tomcat\bin文件夹下
*   调整了我的 portal-ext.properties，如下所示

```
     #禁用一些过滤器  
     com.liferay.portal.servlet.filters.sso.cas.CASFilter = false
     com.liferay.portal.servlet.filters.sso.ntlm.NtlmFilter = false
     com.liferay.portal.servlet.filters.sso.ntlm.NtlmPostFilter = false
     com.liferay.portal.servlet.filters.sso.opensso.OpenSSOFilter=false
     com.liferay.portal.sharepoint.SharepointFilter = false
     com.liferay.portal.servlet.filters.gzip.GZipFilter = false

     #禁用索引  
     index.on.startup=false

```

这是我的启动日志：

```
    2013 年 1 月 30 日上午 8:39:49 org.apache.catalina.core.AprLifecycleListener 初始化
    信息：已加载基于 APR 的 Apache Tomcat 本机库 1.1.24。
    2013 年 1 月 30 日上午 8:39:49 org.apache.catalina.core.AprLifecycleListener 初始化
    信息：APR 功能：IPv6 [true]、sendfile [true]、接受过滤器 [false]、随机 [true]。
    2013 年 1 月 30 日上午 8:39:51 org.apache.coyote.AbstractProtocol 初始化
    信息：初始化 ProtocolHandler ["http-apr-8080"]
    2013 年 1 月 30 日上午 8:39:51 org.apache.coyote.AbstractProtocol 初始化
    信息：初始化 ProtocolHandler ["ajp-apr-8009"]
    2013 年 1 月 30 日上午 8:39:51 org.apache.catalina.startup.Catalina 加载
    INFO：初始化在 2620 毫秒内处理
    2013 年 1 月 30 日上午 8:39:51 org.apache.catalina.core.StandardService startInternal
    信息：启动服务 Catalina
    2013 年 1 月 30 日上午 8:39:51 org.apache.catalina.core.StandardEngine startInternal
    信息：启动 Servlet 引擎：Apache Tomcat/7.0.27
    2013 年 1 月 30 日上午 8:39:51 org.apache.catalina.startup.HostConfig deployDescriptor
    信息：部署配置描述符 C:\Liferay\portal-6.1.1-ce-ga2\tomcat-7.0.27\conf\Catalina\localhost\Hi-portlet.xml
    2013 年 1 月 30 日上午 8:39:51 org.apache.catalina.startup.HostConfig deployDescriptor
    警告：主机 appBase 中的 docBase C:\Liferay\portal-6.1.1-ce-ga2\tomcat-7.0.27\webapps\Hi-portlet 已指定，将被忽略
    2013 年 1 月 30 日上午 8:39:51 org.apache.catalina.startup.SetContextPropertiesRule 开始
    警告：[SetContextPropertiesRule]{Context} 将属性 'source' 设置为 'org.eclipse.jst.jee.server:Hi-portlet' 没有找到匹配的属性。
    2013 年 1 月 30 日上午 8:39:52 org.apache.catalina.startup.HostConfig deployDescriptor
    信息：部署配置描述符 C:\Liferay\portal-6.1.1-ce-ga2\tomcat-7.0.27\conf\Catalina\localhost\ROOT.xml
    正在加载 jar:file:/C:/Liferay/portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-INF/lib/portal-impl.jar!/system.properties
    正在加载 jar:file:/C:/Liferay/portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-INF/lib/portal-impl.jar!/portal.properties
    加载文件：/C:/Liferay/portal-6.1.1-ce-ga2/portal-ide.properties
    加载文件：/C:/Liferay/portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-INF/classes/portal-developer.properties
    加载文件：/C:/Liferay/portal-6.1.1-ce-ga2/portal-ext.properties
    2013 年 1 月 30 日上午 8:39:59 org.apache.catalina.core.ApplicationContext 日志
    信息：初始化 Spring 根 WebApplicationContext
    08:40:16,321 INFO [pool-2-thread-1][DialectDetector:71] 确定 HSQL 数据库引擎 2 的方言
    08:40:16,330 WARN [pool-2-thread-1][DialectDetector:86] Liferay 被配置为使用 Hypersonic 作为其数据库。不要在生产中使用 Hypersonic。Hypersonic 是一个嵌入式数据库，可用于开发和演示目的。可以在 portal-ext.properties 中更改数据库设置。
    08:40:16,484 INFO [pool-2-thread-1][DialectDetector:136] 找到方言 org.hibernate.dialect.HSQLDialect
    启动 Liferay Portal Community Edition 6.1.1 CE GA2（Paton / Build 6101 / 2012 年 7 月 31 日）
    08:41:36,974 INFO [pool-2-thread-1][BaseDB:452] 数据库支持区分大小写的查询
    08:41:37,828 INFO [pool-2-thread-1][ServerDetector:154] 服务器支持热部署
    08:41:37,850 INFO [pool-2-thread-1][PluginPackageUtil:1030] 读取根上下文的插件包
    08:42:19,657 INFO [pool-2-thread-1][AutoDeployDir:106] 为 C:\Liferay\portal-6.1.1-ce-ga2\deploy 启动自动部署扫描程序
    08:42:24,410 INFO [pool-2-thread-1][HotDeployImpl:178] 从队列中部署 Hi-portlet
    08:42:24,415 INFO [pool-2-thread-1][PluginPackageUtil:1033] 读取 Hi-portlet 的插件包
    2013 年 1 月 30 日上午 8:42:24 org.apache.catalina.core.ApplicationContext 日志
    信息：初始化 Spring 根 WebApplicationContext
    2013 年 1 月 30 日上午 8:42:30 org.apache.catalina.core.ApplicationContext 日志
    信息：初始化 Spring FrameworkServlet 'Remoting Servlet'
    2013 年 1 月 30 日上午 8:42:34 org.apache.catalina.startup.HostConfig deployDirectory
    信息：部署 Web 应用程序目录 C:\Liferay\portal-6.1.1-ce-ga2\tomcat-7.0.27\webapps\resources-importer-web
    08:42:35,522 INFO [pool-2-thread-1][HotDeployImpl:178] 从队列中部署资源-importer-web
    08:42:35,523 INFO [pool-2-thread-1][PluginPackageUtil:1033] 读取资源-importer-web 的插件包
    2013 年 1 月 30 日上午 8:42:36 org.apache.catalina.core.ApplicationContext 日志
    信息：初始化 Spring 根 WebApplicationContext
    2013 年 1 月 30 日上午 8:42:36 org.apache.catalina.startup.HostConfig deployDirectory
    信息：部署 Web 应用程序目录 C:\Liferay\portal-6.1.1-ce-ga2\tomcat-7.0.27\webapps\welcome-theme
    08:42:36,609 INFO [pool-2-thread-1][HotDeployEvent:109] 插件欢迎主题需要资源-importer-web
    08:42:37,305 INFO [pool-2-thread-1][HotDeployImpl:178] 从队列中部署欢迎主题
    08:42:37,306 INFO [pool-2-thread-1][PluginPackageUtil:1033] 阅读欢迎主题的插件包
    2013 年 1 月 30 日上午 8:42:37 org.apache.catalina.core.ApplicationContext 日志
    信息：初始化 Spring 根 WebApplicationContext
    08:42:37,787 INFO [pool-2-thread-1][ThemeHotDeployListener:87] 为欢迎主题注册主题
    08:42:39,764 INFO [pool-2-thread-1][ThemeHotDeployListener:100] 欢迎主题的 1 个主题可供使用
    2013 年 1 月 30 日上午 8:42:40 org.apache.coyote.AbstractProtocol 开始
    信息：启动协议处理程序 ["http-apr-8080"]
    08:42:40,167 INFO [liferay/hot_deploy-1][HotDeployMessageListener:142] 公司 liferay.com 的组或布局集原型已经存在
    2013 年 1 月 30 日上午 8:42:40 org.apache.coyote.AbstractProtocol 开始
    信息：启动协议处理程序 [“ajp-apr-8009”]
    2013 年 1 月 30 日上午 8:42:40 org.apache.catalina.startup.Catalina 开始
    信息：服务器在 169048 毫秒内启动

```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:08:36.157

评论已经给出了一些提示。我想说，最重要的问题是检查是否使用了虚拟内存（分页）——一旦操作系统必须将内存分页到磁盘，你就失去了：这可能会对性能造成巨大的影响。

当您升级内存时（例如，如果您使用虚拟内存），您可能需要考虑将操作系统升级到 64 位操作系统 - 32 位只能处理 4G，并且您可能会遇到 appserver 内存的限制，因为每个进程只能获得有限数量的记忆。

您还可以在运行这么多其他应用程序之前测试 Liferay 是否启动得更快 - 这是您遇到内存问题的另一个提示。

SSD 选项将进一步加速您的系统，但价格比 RAM 高得多。此外，SSD 上的虚拟内存不是真的推荐 - 它会更快地磨损驱动器。与其在 SSD 上使用虚拟内存，不如不要使用虚拟内存——这会更快、更便宜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-11T09:06:34.017

服务器速度很大程度上取决于配置良好的 JVM（内存、垃圾收集器类型等）和 Tomcat 连接器线程池。取决于可用的服务器资源。Liferay 提供了一个推荐的配置：

```
`-server -XX:NewSize=1024m -XX:MaxNewSize=1024m -Xms4096m
-Xmx4096m -XX:MetaspaceSize=300m -XX:MaxMetaspaceSize=300m
-XX:SurvivorRatio=12 –XX:TargetSurvivorRatio=90 –
XX:MaxTenuringThreshold=15 -XX:+UseLargePages
-XX:LargePageSizeInBytes=256m -XX:+UseParNewGC
-XX:ParallelGCThreads=16 -XX:+UseConcMarkSweepGC
-XX:+CMSParallelRemarkEnabled -XX:+CMSCompactWhenClearAllSoftRefs
-XX:CMSInitiatingOccupancyFraction=85 -XX:+CMSScavengeBeforeRemark
-XX:+UseLargePages -XX:LargePageSizeInBytes=256m
-XX:+UseCompressedOops -XX:+DisableExplicitGC -XX:-UseBiasedLocking
-XX:+BindGCTaskThreadsToCPUs -XX:+UseFastAccessorMethods
-XX:InitialCodeCacheSize=32m -XX:ReservedCodeCacheSize=96m` 
```

上述 JVM 设置应该为您的性能调整制定一个起点。由于当前用户数量和交易速度等多种因素，每个系统的最终参数都会有所不同。

在 tomcat 服务器中，您可以在 /[tomcat_server]/bin/setenv.[sh or bat] 文件中定义此配置，例如**CATALINA_OPTS环境变量。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-11T07:18:58.107

通过升级到 Liferay 7 解决了这个问题。

尽管 Liferay 7 启动速度并不快，但开发人员真的不需要重新启动它，因为一切都可以通过部署新的 OSGi 组件来覆盖。这实际上是 Liferay 6 和 Liferay 7 最大的区别。

我已经为 Liferay 7 开发了 3 个月，包括非常深入的定制（例如拦截所有文件读取以进行审计），并且从未需要重新启动 Liferay 服务器。

# c# - 将非泛型父类转换为泛型子类

> ID：14600240
> 
> 赞同：1
> 
> 时间：2013-01-30T09:10:04.900
> 
> 标签：c#, .net, generics, inheritance

有一个从非泛型类继承的泛型类，如下结构：

```
public class Result
{
     public string ErrorCode { get; set;}
     public string ErrorMessage { get; set;}
     public boo Success { get; set;}
     //Lots more properties

     public ClientResult ToClientResult()
     {
         //some pretty involved calculations of error coded and status
     }
 }

 public class Result<T> : Result
 {
     public T details {get; set;}

     public ClientResult<T> ToClientResult<T>()
     {
        //Need to call the parent class implementation and convert result to  generic ver  
     }
 } 
```

我的问题是如何调用父`ToClientResult()`级并将结果转换为通用版本，`ClientResult<T>`然后我需要将属性设置`ClientResult<T>`为类的详细信息属性`Result<T>`。

我确定我在这里缺少一个简单的解决方案，我真的不想复制父类逻辑，因为它非常复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:22:54.133

如果将父类型的对象创建为父类型（使用`new ClientResult()`），则不能将其强制转换为子类型。它只是不那样工作。

`Result`您可以做的是将复杂的代码分解到另一种方法中，用于在类和类中进行繁重的工作`Result<T>`：

```
public class Result
{
    public string ErrorCode { get; set;}
    public string ErrorMessage { get; set;}
    public boo Success { get; set;}
    //Lots more properties

     public ClientResult ToClientResult()
     {
         var clientResult = new ClientResult();
         SetupClientResult(clientResult);
         return clientResult;
     }

     protected void SetupClientResult(ClientResult clientResult) 
     {    
         //some pretty involved calculations of error coded and status           
     }

}

public class Result<T> : Result
{
     public T details {get; set;}

     // This now shadows the original ToClientResult method. The trap here is that if
     // you are treating your Result<T> instance as a Result, this method will not be 
     // called, and the return type will be ClientResult and not ClientResult<T>.
     // See: http://stackoverflow.com/questions/392721/difference-between-shadowing-and-overriding-in-c?lq=1
     public ClientResult<T> ToClientResult()
     {
         var clientResult = new ClientResult<T>();
         SetupClientResult(clientResult);

         clientResult.SomeProperty = details;

         return clientResult;
     }
} 
```

这一切都假设`ClientResult<T>`源自`ClientResult`，从您的问题中很难说出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:32:18.663

在`ClientResult<T>`课堂上，您可以进行自定义转换，从 ClientResult 到`ClientResult<T>`

```
public static explicit operator ClientReault<T>(ClientResult result)
{
       //do your conversion from one to the other here
} 
```

然后你可以这样写 ToClientResult

```
 //Generic argument remove from method declaration
 //because it was shadowing the type argument
 public ClientResult<T> ToClientResult()
 {
    var clientResult = ((Result)this).ToClientResult()
    var genericResult = (ClientResult<T>)clientResult;
    //do what you need to do with the generically typed object
    //...
    return genericResult
 } 
```

也就是说，当继承链中存在缺陷时，通常会出现这种情况。例如，当基类和派生类之间没有 is-a 关系时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:41:31.920

您应该明确地进行转换：

```
 public class ClientResult
    {
        public int a {get;set;}
    }

    public class ClientResult<T> : ClientResult
    {
        public ClientResult(ClientResult cr)
        {
            this.a = cr.a;
        }
    }

    public class Result<T> : Result
    {
        public T details { get; set; }

        public ClientResult<T> ToClientResult<T>()
        {
            var cr = base.ToClientResult();
            return new ClientResult<T>(cr);  
        }
    } 
```

如果你有很多类似于 ClientResult 的类，你可以使用像[AutoMapper这样的工具](https://github.com/AutoMapper/AutoMapper/wiki/Getting-started)

# c# - EF DB-first 映射混乱

> ID：14600252
> 
> 赞同：5
> 
> 时间：2013-01-30T09:10:57.423
> 
> 标签：c#, entity-framework, entity-framework-5, database-first

由于 EF 的这个小怪癖，我有一个令人沮丧的情况。这是该行为的简单演示。首先是数据库模式：

![在此处输入图像描述](../Images/5f0ba94b9d274c8dfda58237813e2d57.png)

如您所见，`RestrictedProduct`它是产品的一个特例，我打算`Product`用一些特殊的代码来创建它的子类。

现在我导入到 EF 数据模型：

![在此处输入图像描述](../Images/074e17b44bae9118557480cc7bf0122b.png)

哎呀！EF 看到它只有 2 个字段，都是 FK，因此它将其映射为和`RestrictedProduct`之间的一对多关系。所以我回到数据库并添加一个字段，现在我的 EF 模型看起来好多了：`Product``Restriction``Dummy``RestrictedProduct`

![在此处输入图像描述](../Images/cfabe41d7527e0543b414fc8a6a887c6.png)

但那个`Dummy`领域是愚蠢和毫无意义的。也许我可以删除它？我从数据库表和实体模型中删除了字段，然后从数据库中刷新模型......

![在此处输入图像描述](../Images/c65f92bf25326253a4b068e4d5dc4544.png)

不好了！`Product-Restriction`协会以新名称 ( ) 回来了`RestrictedProduct1`！另外，它不会编译：

> 错误 3034：从行 (x, y) 开始映射片段时出现问题：具有可能不同键的两个实体映射到同一行。确保这两个映射片段将 AssociationSet 的两端映射到相应的列。

`Dummy`除了将字段保留在`RestrictedProduct`表格上之外，有什么方法可以防止这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:12:12.367

我刚刚遇到了同样的问题，作为将虚拟字段放入`RestrictedProduct`表中以强制创建实体的替代方法，您还可以使您的`RestrictedProduct.RestrictionId`字段可为空，然后 EF 将为它生成一个实体。然后您可以修改它以使用继承，并且任何后续的“从数据库更新模型”都不会导致不需要的导航属性。不是一个很好的解决方案，而是一个解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:57:28.450

让我们慢慢解决您的问题。

您需要确定的第一件事是，受限产品是否真的是产品的特殊情况，或者它是否可能是每个产品的扩展。

从您的原始数据库方案看来，任何产品都可能与单个限制有关，但是单个限制可以在许多产品之间共享。所以这是一个简单的一对多情况，这意味着受限产品不是产品！限制是一个独立的实体，与特定的产品无关。

因此 EF 在您的方案的第一次导入中是正确的： 1\. 一个产品可以有 0 或 1 个限制。2\. 限制是可以与许多产品相关的另一个实体。

我没有看到你的问题。

# javascript - 使用 ext js 4.1 突出显示网格中的一行

> ID：14600258
> 
> 赞同：0
> 
> 时间：2013-01-30T09:11:21.767
> 
> 标签：javascript, extjs, extjs4, extjs4.1, extjs4.2

我试图突出显示一行，我已经用谷歌搜索了一段时间，但是所有解决方案都使用甚至不存在的函数，例如`getRow()`or `highlight()`。

有没有人有解决方案？我已经尝试了上述方法，但`getView().select(record)` 两者都没有奏效

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:01:15.707

选择行就足够了吗？

```
gridPanel.getSelectionModel().select([recordToSelect]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:19:11.293

您可以使用 rowClass 根据记录条件修改行。

```
yourGrid.getView().getRowClass = function(record, rowIndex, rowParams, store){ 
     return record.get('status').toLowerCase(); // class selection condition
} 
```

请参阅**[JSFiddle](http://jsfiddle.net/sran/K68Dd/1/)**示例（*非常基本的示例，仅显示行类在每次更改记录后重置。*）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T09:18:11.040

```
grid.getSelectionModel().select(0) 
```

# python - 使用 Python 一次性解析和写入 XML 文件

> ID：14600262
> 
> 赞同：0
> 
> 时间：2013-01-30T09:11:28.040
> 
> 标签：python, xml-parsing

我有一个 .txt 文件，里面有很多 XML 文件。

所以可以说： `content.txt`是我的文件，里面有 40++ XML-“文件”。（当然，没有“真正的”文件，而是带有`<xml>....</xml><xml>...</xml>`等等的标签）。

现在我想在 Python 中创建一个解析器，它读取文本文件，并将每个文件写入`<xml>...</xml>`文件。名称应该`Tag-Data`在 each`<xml>....</xml>`中。

我的问题的最佳解决方案是什么？

我读过很多关于 XML 解析器的文章，但没有人解释如何同时读写。

# linux - 为什么我的应用程序在知道 URL 时无法在两台 LINUX OS 机器上查找和使用文件？

> ID：14600267
> 
> 赞同：0
> 
> 时间：2013-01-30T09:11:47.127
> 
> 标签：linux, yii

我有一个 Yii MVC 应用程序。在 Windows 操作系统下运行应用程序时，应用程序会找到并使用所需的文件。

我现在有 2 个操作系统，Linux 操作系统，一个，我的应用程序找到并使用该文件，另一个，它失败了。

```
$this->font1 = Yii::app()->baseUrl . '/protected/extensions/TextFigletCaptcha/flf/' . $this->font1 . '.flf';
if (!file_exists($this->font1)) {
throw new Exception('Font file not found!<br/>');
} 
```

发生了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:08:02.427

我找到了我的问题的答案：

```
$this->font1 = Yii::app()->getBasePath(true) . '/extensions/TextFigletCaptcha/flf/' . $this->font1 . '.flf'; 
```

# javascript - jquery三元条件运算符中的多个条件

> ID：14600268
> 
> 赞同：0
> 
> 时间：2013-01-30T09:11:55.203
> 
> 标签：javascript, jquery, ternary-operator, conditional-operator

我想在 jquery 中编写三元条件运算符，其中条件由 jquery 变量设置。我的脚本切换类仅适用于特定条件。在我的脚本变量中，来自其他设置。

jQuery：

```
<script type="text/javascript">
$(document).ready(function() {
  $("#my_div")
    .removeClass("horizontal vertical")
    .addClass( my_color == 'red'  ? 'horizontal' : 'vertical');
});
</script> 
```

`my_color`是 jquery 变量，它可能一次只有一个值`red,green,blue,black,white or silver`。

`my_color`如果是红色、蓝色或绿色，我想将类设置为水平，对于其他三个值，我想将类设置为垂直。谁能帮我为上面的jquery编写简化的三元运算符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:14:38.303

在运算符的条件部分使用或运算符。你会是

```
<script type="text/javascript">
  $(document).ready(function() {
    $("#my_div")
        .removeClass("horizontal vertical")
        .addClass( my_color == 'red' ||  my_color == 'blue' ||  my_color == 'green'  ? 'horizontal' : 'vertical');
  });
</script>
 $("#my_div") 
```

如果你有很多颜色，你可以把它们放在数组中并在条件下使用它。

```
 $("#my_div")
 .removeClass("horizontal vertical")
 .addClass( ['red', 'blue', 'green', 'gray'].indexOf(my_color) != -1 ? 'horizontal' : 'vertical'); 
```

# windows - 如何检查 Lotus Notes 客户端中是否安装了升级包？

> ID：14600269
> 
> 赞同：1
> 
> 时间：2013-01-30T09:12:04.670
> 
> 标签：windows, installation, lotus-notes, lotus

使用包管理解决方案将带有 FPx 和升级包 1 的 Lotus Notes 客户端 8.53 安装到客户端。

我需要检查它是否有效并实际安装了升级包。

修复包安装会删除控制面板/程序中的升级包列表，如果我们最后安装升级包，则修复包列表会被删除。

听起来不太对（？）。

谢谢！

/J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:35:57.100

有几种方法。

1.  单击菜单中的“关于 -> Lotus Notes”，选择“插件详细信息”并检查它是否存在。

2.  检查 features/plugins 文件夹中的相关文件夹。

3.  让用户打开一个呈现 extlib 组件的应用程序。如果它报告了问题，那么它没有正确安装。

4.  使用 OSGi 控制台启动注释。创建一个捷径，如。

    C:\Lotus\Notes\notes.exe -RPARAMS -console -debug -separateSysLogFiles -consoleLog

然后键入 SS [package name] 以获取已安装组件的输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T09:44:55.923

可以从菜单轻松检查 ExtLib 安装：

*帮助 -> 关于 IBM Lotus Notes -> 功能详细信息*

对我来说，extlib 的功能有：

![在此处输入图像描述](../Images/ad111ab40adf0097e92ea4aad6ab1220.png)

对于升级包，我相信您应该会看到与 2011 年相同的日期，除了升级包不附带的最后一个“extlibx”（实验）行。

西蒙在我写这篇文章时添加了他的答案，但看起来他提到了“插件细节”，而不是“功能细节”，所以我也会发布这个答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T09:28:57.500

要检查升级包，请检查设计器或注释安装中的以下位置：

*   framework\shared\eclipse\features 和 framework\shared\eclipse\plugins
*   数据\domino\workspace\applications\eclipse\features and data\domino\workspace\applications\eclipse\plugins
*   data\workspace\applications\eclipse\features and data\workspace\applications\eclipse\plugins

检查名称中包含 domino.das、domino.services、wink 或 extlib 的文件。

来源： [http ://www-10.lotus.com/ldd/ddwiki.nsf/xpDocViewer.xsp?lookupName=Domino+Designer+XPages+Extension+Library#action=openDocument&res_title=Installing_the_upgrade_pack_on_Domino_Designer_and_Notes_ddxl853&content=pdcontent](http://www-10.lotus.com/ldd/ddwiki.nsf/xpDocViewer.xsp?lookupName=Domino+Designer+XPages+Extension+Library#action=openDocument&res_title=Installing_the_upgrade_pack_on_Domino_Designer_and_Notes_ddxl853&content=pdcontent)

# android - 验证定位结果

> ID：14600273
> 
> 赞同：2
> 
> 时间：2013-01-30T09:12:11.900
> 
> 标签：android, authentication, location

我开发了一种基于位置的服务，它使用 GPS 识别用户的位置。我想验证来自 GPS 的数据，因为攻击者可以使用模拟器欺骗位置信息。

我从[这里](http://airccse.org/journal/ijsptm/papers/1612ijsptm02.pdf)研究了一种身份验证机制，但我不知道如何实现他们提到的技术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:22:09.713

本文的想法是从两个不同的提供商那里检索地理位置。在您的情况下，您将获得设备的 GPS 位置以获得高精度和单元格 ID 位置以验证此数据。

以下是如何通过单元格 id 获取位置的完整示例：http: [//www.devx.com/wireless/Article/40524](http://www.devx.com/wireless/Article/40524)

您需要为这些位置的差异定义一个阈值。所以我们认为当 GPS 和蜂窝网络之间的距离大于我们的阈值时，GPS 位置是伪造的。

一些抽象代码示例：

```
static final int THRESHOLD = 2000 // maximum discrepancy in meters

Location getLocationFromGPS();
Location getCellularLocation();

boolean isLocationValid(Location gps) {
    Location cell = getCellularLocation();
    return gps.distanceTo(cell) <= THRESHOLD;
} 
```

遵循这种方法可能会出现两种不同类型的错误：

1.  假设 GPS 数据是伪造的，但事实并非如此
2.  相信伪造的 GPS 数据

设置较小的值`THRESHOLD`将越来越多地导致错误＃1。大多数用户永远不会伪造他们的 GPS 数据，因此声称他们是作弊者不会让您的应用成功 ;-)

该论文指出，基于蜂窝网络的精度约为 100 - 1500 米。所以我强烈建议你选择大于 1500 米的值。

请注意 - 正如 Rune FS 所提到的 - 高级用户可能会同时伪造两个位置提供者。

# supervisord - Supervisord：如何在启动命令中使用主机名

> ID：14600275
> 
> 赞同：4
> 
> 时间：2013-01-30T09:12:18.937
> 
> 标签：supervisord

是否可以在 supervisord 启动脚本中以某种方式使用本地主机名？我需要它将 jmx 主机传递给 java 程序。例子：

```
command=HOSTNAME=foo.bar /usr/local/rvm/bin/jruby-1.7.1 script/trinidad.rb --threadsafe -f config/trinidad_user_production.rb 
```

到目前为止，我认为没有简单的选择。

最好的，

托拜厄斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-18T16:09:18.847

在配置文件中使用主机名：

> %(host_node_name)s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T11:30:56.583

`environment=HOSTNAME=foo.bar`应该可以正常工作。

参见：[http ://supervisord.org/subprocess.html#subprocess-environment](http://supervisord.org/subprocess.html#subprocess-environment)

# mysql - 有没有办法在 DQL 中设置全局变量？

> ID：14600276
> 
> 赞同：1
> 
> 时间：2013-01-30T09:12:21.277
> 
> 标签：mysql, symfony, dql

有没有办法将全局变量设置为 DQL？

我在 SQL 中有这段代码（像魅力一样工作），我必须将其转换为 DQL。它不返回任何结果，只需执行操作并完成。

```
//COPIAR A RANKANTERIOR
    UPDATE SistemaPuntuacions SET rankingAnterior = rankingActual
//ACTUALITZAR SEGONS ELS PUNTS DEL USUARI
    set @rank=0;
    UPDATE SistemaPuntuacions SET rankingActual= @rank := @rank +1
    ORDER BY punts DESC; 
```

我找不到任何与此相关的文档...

```
//Copy to oldRank
   UPDATE RankSystem SET oldRank = RankNow
//Update RankNow by points
   set @rank=0;
   UPDATE RankSystem SET RankNow= @rank := @rank +1
   ORDER BY points DESC; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:45:04.873

DQL 是**Doctrine Query Language** [http://docs.doctrine-project.org/en/2.1/reference/dql-doctrine-query-language.html](http://docs.doctrine-project.org/en/2.1/reference/dql-doctrine-query-language.html)

所以 DQL 实际上是一种查询语言，不适合处理全局变量。您可以查询数据库并操作它们，就是这样。

[在 DQL 中，您可以使用 setParameters](https://stackoverflow.com/questions/9988866/doctrine2-using-setparameters)定义要传递给查询的参数， Doctrine2

但是，您的实际 DQL 代码在哪里？

* * *

除了尝试让您的代码注释和关键字为英文，以便我们理解。

* * *

你不需要在dql中翻译它，你也可以使用原生查询。看看这里

[我需要将 SQL 本机放在查询 Builder Doctrine2](https://stackoverflow.com/questions/12436312/i-need-to-put-sql-native-in-query-builder-doctrine2)

[使用没有实体类的原生 SQL 查询](https://stackoverflow.com/questions/6860838/using-native-sql-query-without-entity-class?rq=1)

希望有帮助！

# ios - AES/CFB8 IV 尺寸

> ID：14600277
> 
> 赞同：2
> 
> 时间：2013-01-30T09:12:22.853
> 
> 标签：ios, macos, encryption, cryptography, aes

AFAIK，CFB8 模式的块大小为 1 字节。所以我可以推断IV也是1字节长度。但是，当我进行测试时，将仅 1 个字节的相同 iv 传递给用于加密和解密功能的通用加密创建函数时，加密和解密的消息不匹配。

所以我认为 API 应该占用超过 1 个字节来用作 IV。我想知道为什么？我的理解有什么问题吗？

```
CCCryptorStatus result = CCCryptorCreateWithMode(operation,
                                                 kCCModeCFB8,
                                                 kCCAlgorithmAES128,
                                                 ccNoPadding,
                                                 iv.bytes,
                                                 key.bytes,
                                                 key.length,
                                                 NULL,
                                                 0,
                                                 0,
                                                 0,
                                                 &_cryptor);

if (result == kCCSuccess)
    result = CCCryptorUpdate(_cryptor,
                             data.bytes,
                             data.length,
                             cipherData.mutableBytes,
                             cipherData.length,
                             &outLength);

if (result == kCCSuccess)
    result = CCCryptorFinal(_cryptor,
                            cipherData.mutableBytes,
                            cipherData.length,
                            &outLength);

if (result == kCCSuccess)
    result = CCCryptorRelease(_cryptor); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T09:34:36.210

IV 大小必须与对称算法块大小匹配。因此，对于 AES，您应该有一个 16 字节的 IV。

CFB-8 有一个字节的*移位大小*。它与密码的*块大小*无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T09:34:32.560

它没有 1 个字节的块大小，它只是每 1 个字节重新同步。IV 实际上是 16 个字节（对于 AES）。

# java - 一个类可以同时注释为@Repository 和@Entity 吗？

> ID：14600280
> 
> 赞同：3
> 
> 时间：2013-01-30T09:12:37.907
> 
> 标签：java, spring, hibernate, orm

我对休眠很陌生。我无法理解这些简单的逻辑。我知道 Spring 使用 @Repository 来访问对象。此外，Hibernate 使用 @Entity 来表示映射到数据库表中的实体。我只是想知道一个类是否可以同时使用@Repository 和@Entity 进行注释，因为它们或多或少暗示相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T09:19:44.940

不。

Hibernate 实体由 Hibernate ORM 框架管理，当您通过 get() 或 load() 访问它们时，它们（及其代理）由 hibernate 创建。它们具有与 Spring bean 完全不同（且复杂）的生命周期（它们可以附加/分离/代理/等待移除）

Spring 存储库是单例，由 Spring 框架管理。通常，只要容器实例存在，它们就存在。新的 Hibernate 会话可能会被打开和关闭，新的用户会话可能会被使用然后过期，但仍然会有相同的存储库单例实例。

请参阅[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html#objectstate-overview](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html#objectstate-overview)了解可能的休眠对象状态。

至于存储库实例——通常它们是无状态的，因为它们是服务。

RE：`they more or less imply the same.`不，它们不一样。有[个老笑话](http://www.anvari.org/shortjoke/Computer_Light_Bulb_Jokes/26_how-many-c-programmers-does-it-take-to-change-a-light-bulb.html)

> 换一个灯泡需要多少 C++ 程序员？你还在程序上思考。正确设计的灯泡对象会从通用灯泡类继承更改方法，因此您所要做的就是发送一个灯泡更改消息。

但是优秀的 OOP 程序员不这么认为，根据[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，对象应该有一个单一的理由来改变。存储库与基础设施一起工作，与业务规则无关。基础设施可能会发生变化（例如，您可能需要将对象存储在 XML 而不是 RDBMS 中），但这不应影响封装业务对象状态的类。

您可以通过从实体类引用抽象存储库接口来缓解这个问题（实现一个臭名昭著的[Active Record](http://en.wikipedia.org/wiki/Active_record_pattern)模式 - 这就像从灯泡中引用一些抽象灯泡插座，这似乎不是一个好的解决方案，因为灯泡插座和灯泡有不同的生命周期）。

这就是[高内聚](http://msdn.microsoft.com/en-us/magazine/cc947917.aspx)原则开始发挥作用的地方，根据该原则，对于一个对象来说，它的作用是反映模型的抽象，执行一些完全不相关的事情，比如持久性或通过网络传输，这是不合逻辑的。`Student`当类有`print()`,`saveToXml()`或`transmitByHttp()`方法时，这很奇怪。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T09:25:34.710

它们根本不意味着同样的事情。

***@实体***

@Entity 是代表您的业务领域中的“事物”的事物。它可以是任何东西——客户、大象、产品。. . 它将具有将持久保存到数据库的属性以及与这些属性相关的方法（至少它应该，除非它是一个贫血实体，但这是一种反模式......稍后，当你对基础知识请查看 Spring 的 @Configurable 注解——这允许您为您的实体提供协作者）。

***@Repository***

另一方面，@Repository 提供了一个用于检索和存储这些实体的接口。

有一些框架，特别是在其他语言中，将持久性和实体属性结合在同一个对象上，但是这在 Java/Hibernate/Spring 中并不常见。

# python - Python subprocess.call 似乎忽略了参数

> ID：14600294
> 
> 赞同：1
> 
> 时间：2013-01-30T09:13:31.970
> 
> 标签：python, mysql-python

我在 Python 中编写了两个小函数来调用`mysqldump`和`mysql`从控制台调用，因此我能够创建数据库备份然后恢复它：

```
# Makes a backup current database status
def backupDatabase():
    if(os.path.exists('myDatabaseBackup.sql')):
        os.remove('myDatabaseBackup.sql')
    call(['mysqldump', '-u myUsername myDatabase > myDatabaseBackup.sql'])

# Restores database
def restoreDatabase():
    call(['mysql', '-u myUsername myDatabase < myDatabaseBackup.sql']) 
```

然而，他们没有工作。我已经读过该调用获取两个值：可执行文件和参数，但看起来参数被忽略了，因为调用 backupDatabase 后的输出是：

> 用法：mysqldump [OPTIONS] database [tables] OR ...更多选项，se mysqldump --help

怎么了？我知道我可以使用`Pipes`（我目前不知道如何使用，只知道它们存在并且是替代品），但是由于这看起来是一个非常简单的任务，我想`subprocess.call`应该就足够了。那么，是否有可能解决这个问题`subprocess.call`？（如果没有，请提供一些帮助`Pipes`或任何其他解决方案）。

另外，我将`MySQLdb`包用于其他目的，所以如果可以使用这个包以某种方式备份和恢复，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:21:58.787

首先，`subprocess.call`期望您分别传递每个命令行参数，如下所示：

```
subprocess.call(['mysqldump', '-u', 'myUsername']) 
```

其次，要重定向输出，您需要传递额外的`stdout`参数，其中可以是打开的文件对象：

```
with open('myDatabaseBackup.sql', 'w') as fout:
    subprocess.call(['mysqldump', '-u', 'myUsername'], stdout=fout) 
```

（对于您自然使用的第二次重定向`stdin`。更多详细信息在[常见问题解答](http://docs.python.org/2/library/subprocess.html#frequently-used-arguments)中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:20:06.613

重定向运算符`<`和`>`由 shell 处理。如果没有外壳，它们将无法工作。

尝试传递`shell=True`给[`call()`](http://docs.python.org/2/library/subprocess.html#subprocess.call)：

```
call(['mysqldump', '-u myUsername myDatabase > myDatabaseBackup.sql'], shell=True)
call(['mysql', '-u myUsername myDatabase < myDatabaseBackup.sql'], shell=True) 
```

# php - SQL插入语句不起作用

> ID：14600296
> 
> 赞同：0
> 
> 时间：2013-01-30T09:13:33.767
> 
> 标签：php, mysql, sql, database, phpmyadmin

我似乎无法让插入语句工作，我是 sql 的新手。
我之前使用过相同的代码并且它有效，所以我复制并粘贴并
更改了值。其他一切都验证并正常工作。
问题出在uploadInstallData 函数上

以下是文本格式代码的链接：http:
[//www.bludevelopment.com/php/getdata.txt](http://www.bludevelopment.com/php/getdata.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:16:37.837

首先尝试使用 PDO，其次它是不正确的： `"('$_POST[Timestamp]','$_POST[PMINo]',..."`，你应该转义值： `" ('".$_POST[Timestamp]."','".$_POST[PMINo]."`'，...";

# visual-studio - Visual Studio 2011 与 2010 事件处理程序

> ID：14600297
> 
> 赞同：0
> 
> 时间：2013-01-30T09:13:33.730
> 
> 标签：visual-studio

在工作中我们使用 VS 2010 但有些人有 vs 2011
在 VS 2011 中，当用户在设计器中添加事件时，它会生成如下：

```
this.upDownDeleteControlProbes.ContextChanged += upDownDeleteControlProbes_ContextChanged; 
```

不幸的是，当代码在 VS 2010 中重新生成时，事件消失了。
有没有办法来解决这个问题？

# regex - 即使可能有多个匹配，Perl 正则表达式在列表上下文中也只返回一个值

> ID：14600301
> 
> 赞同：4
> 
> 时间：2013-01-30T09:13:47.827
> 
> 标签：regex, perl

我正在使用这种 Perl 正则表达式：

```
/(^.*)XXX/g 
```

我希望这个正则表达式匹配类型的文本

```
******XXX****XXX***XXX 
```

这样在这种情况下，正则表达式将匹配三次并提供以下结果：

```
******XXX****XXX***
******XXX****
****** 
```

但是，当我将此正则表达式放在这样的列表上下文中时

```
while($_=~/(^.*)XXX/g) 
```

只有一场比赛

```
******XXX****XXX*** 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T09:29:46.230

你需要改变你的循环：

```
$_ = "******XXX****XXX***XXX";
while(/(.*)XXX/) {
    print $1,"\n";
    $_=$1;
} 
```

匹配的结果在`$1`while 您匹配的变量是`$_`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T09:31:51.467

如果您愿意使用`$``( `$PREMATCH`)，这将获得您想要的结果：

```
my $inp = "******XXX****XXX***XXX";
while ($inp =~ /XXX/g) {
  print $`, "\n";
} 
```

输出：

```
******
******XXX****
******XXX****XXX*** 
```

您的正则表达式失败，因为`^.*`贪婪地匹配“一切”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T12:10:57.007

这是查找所有可能匹配项的方式：

```
local our @matches;
/^(.*)XXX(?{ push @matches, $1 })(?!)/sg;
say for @matches;  # Or whatever 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T09:38:03.750

我会这样做：

```
$str = '******XXX****XXX***XXX';

sub backwards {
    if( $_[0] =~ /(.*)XXX.*?$/) {
        print $1, "\n";
        backwards($1);
    }
}

backwards($str); 
```

输出：

```
******XXX****XXX***
******XXX****
****** 
```

# magento - 为什么 magento 会生成两个相同的 cron 作业？

> ID：14600303
> 
> 赞同：2
> 
> 时间：2013-01-30T09:13:52.107
> 
> 标签：magento, cron

crontab：每 5 分钟运行一次 cron.php；

配置文件

```
<crontab>
    <jobs>
            <newsletter_send_all>
                <schedule><cron_expr>20 2 * * *</cron_expr></schedule>
                    <run><model>psteal/observer_psteal::updatefrommagento</model></run>
            </newsletter_send_all> 
    </jobs>
</crontab> 
```

DB ,TABLE 中生成的数据是 cron_schedule：

job_code 状态消息 created_at scheduled_at

newsletter_send_all 未决 NULL 2013-01-25 02:18:46 2013-01-25 02:20:00

newsletter_send_all 未决 NULL 2013-01-25 02:18:46 2013-01-25 02:27:00

我不知道为什么magento会生成两个相同的cron作业？应该只有一个作业（在2013-01-25 02:20:00），有什么想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T10:49:56.993

例如，尝试将 cron 任务名称从**newsletter_send_all**更改为**psteal_newsletter_send_all**，因为 newsletter_send_all 已经在 app/code/core/Mage/Newsletter/etc/config.xml 中定义

# c# - 合并水晶报表中的列

> ID：14600304
> 
> 赞同：0
> 
> 时间：2013-01-30T09:14:00.717
> 
> 标签：c#, visual-studio-2008, crystal-reports

我正在`crystal`Visual Studio 2008 中编写报告。在水晶报告中，我有两个字段`BranchName`和`Types`. 我想要的是如果`BranchName`并且`Types`相同，则合并该特定行的所有列，并在该行中仅显示带有**粗体**样式的 BranchName。

```
--------------------------------------
Branch Name  |  Types   |   Status   |
--------------------------------------
    abc      |    abc   |            |
--------------------------------------
    xyz      |    mnl   |            |
-------------------------------------- 
```

我想要它

```
--------------------------------------
Branch Name  |  Types   |   Status   |
--------------------------------------
               abc                   |
------------------------------------- 
    xyz      |   mnl    |            |
-------------------------------------- 
```

我怎样才能做到这一点？

# excel - 在 VBE 中看不到 excel 表

> ID：14600309
> 
> 赞同：3
> 
> 时间：2013-01-30T09:14:08.773
> 
> 标签：excel, vba, hidden, excel-4.0

我正在使用由其他人创建的 Excel 文件。一张包含宏的工作表似乎受密码保护，但我不明白的是我在工作表列表下的 VBE 中看不到它。工作表选项卡在 Excel 中可见，但我看不到内容。

有没有办法在VBE中取消隐藏它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:17:53.943

> 一张包含宏的工作表

那是指 Excel 4.0 宏吗？

包含 Excel 4.0 宏的工作表在 VBE 的列表中似乎不可见。

在某种程度上，它们似乎可以从 VBA 访问：使用 Excel 2007，我将 Excel 4.0 宏表插入工作簿，然后尝试以下操作：

```
Public Sub TestAccessToXL4MacroSheet()
Dim ws As Worksheet
    Set ws = ThisWorkbook.ActiveSheet ' succeeds
    Debug.Print ws.Name               ' outputs "Macro1"
    Set ws = Worksheets("Macro1")     ' fails: "Subscript out of range"
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:20:14.877

据我所知，您无法从 VBE 中隐藏工作表！但是，您可以在那里重命名它（实际上更改了`.CodeName`工作表的名称）。因此，如果您知道 Excel 工作表名称（您在 Excel 工作表选项卡中看到的名称），但在 VBE 中找不到它，请转到 VBE ( `Ctrl`- `G`) 中的立即窗口并运行

```
? Worksheets("YourName").CodeName
```

- 这应该为您提供可以在 VBE 项目树中找到的名称。

# cryptography - 加密和替换

> ID：14600310
> 
> 赞同：-3
> 
> 时间：2013-01-30T09:14:10.547
> 
> 标签：cryptography

假设我们有下一个字符串：

*13:45:11:17:-65:107*

该字符串是 RSA 加密的产物。每个数字都是加密信息的一个字节。我们用公钥加密它。之后我们决定“隐藏”它，下一个方法：1=q,3=f,4=d,5=o,7=y,6=p,0=b,-=u,:=t;

毕竟，我们有下一个字符串：

*qftdotqqtqytupotqby*

假设服务器端将以相反的方式取消隐藏该字符串。并通过私钥解密。

所以我问：如果有人偷了这个字符串，但**他没有任何访问**我们的软件的权限。他只有一个字符串 - **qftdotqqtqytupotqby**

有没有可能让他明白

**qftdotqqtqytupotqby = 13:45:11:17:-65:107**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:31:40.477

如果您假设攻击者无法访问您的软件，因此他所拥有的只是一些 ECB（替代密码）编码的 RSA 密文，那么答案是否定的，他无法逆转它。（这假设 RSA 密文在没有密钥的情况下实际上是按字节计算的“伪随机”。如果它们有一些明文可预测的标头信息，那么 ECB 可能会受到攻击。）

然而，这是一个需要考虑的非常弱的攻击者位置。一般来说，您应该假设攻击者拥有您的软件的副本，否则您的软件的每个副本实际上都是整个系统的秘密主密钥。

我倾向于使用 AES 和您的自制 ECB 的已编译密钥。至少这限制了密钥的秘密，而不是潜在的整个软件包。您还可以使用此技术将安全风险划分为仅具有相同编译密钥的软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:12:32.260

从严格的安全角度来看，字母编码毫无价值并且不会增加任何保护（请参阅[Kerkoff 原则](http://en.wikipedia.org/wiki/Kerckhoffs%27s_principle)），因为您不能假设攻击者不知道您的实现。安全性必须完全依赖于密钥。

假设 RSA 输出看起来确实与问题中呈现的完全一样（这意味着使用了非常小的 RSA 密钥大小），那么很容易至少部分破坏简单的替换，因为 RSA 密文的 ASCII 表示是高度结构化的。最常见的符号是冒号 ( `:`)，而仅出现在冒号旁边的符号是减号 ( `-`)。如果冒号之间有四个符号，最左边的是减号。如果冒号之间有三个符号，最左边是减号、一个 ( `1`) 或两个 ( `2`)。剩下的 8 位数字并不容易，但结合使用的 RSA 的小密钥大小并不是真正的障碍。

* * *

以下不是问题的直接部分，但也必须说：您的协议的 RSA 部分是否安全取决于许多因素，以至于不可能写出完整的答案。这里只是上述方案如何存在缺陷的两个示例：

*   一个字节的小块大小意味着 8 位的密钥大小，即使只用笔和纸也很容易破解。
*   如果这是没有安全填充的普通教科书 RSA 加密（例如 PKCS#1 2.x OAEP），那么该方案存在致命缺陷。攻击者可以简单地使用公钥来计算一个包含所有 256 字节值的加密版本的字典，并使用该字典来解密所有加密字节。

话虽如此，按字节进行 RSA 效率极低，最好将所有字节放在一个 RSA 块中，或者如果单个块的数据过多，请使用具有对称算法的混合方案进行批量加密和只有 RSA 加密随机会话密钥~~，正如用户 1131467 所建议的那样~~.

# mvvm - ajax调用后kendo mvvm不更新

> ID：14600319
> 
> 赞同：5
> 
> 时间：2013-01-30T09:14:39.583
> 
> 标签：mvvm, kendo-ui, observable

我有一个页面（下面的相关代码）执行以下操作：

1.  用户在自动完成文本框中输入一个值 2，选择自动完成选项后，将进行 ajax 调用以填充 2 个下拉列表
2.  用户需要从每个下拉列表中选择一个值
3.  一旦在两者上都选择了一个值，他们就会单击添加按钮，我的绑定表就会更新
4.  用户可以删除添加到表中的行

在第 4 步中添加的行包含在可观察对象的数组中。页面第一次加载点 1 到 5 按预期工作.....

但是，如果用户在自动完成框中输入新搜索并触发 select 事件，则第二次进行 ajax 调用时，我的视图模型和 UI 对象之间的关系就会中断。

正在执行的代码是相同的，所以请有人能解释一下为什么第二次会中断。

```
<input type="text" id="txtBox" style="width:300px;" />

<div id="fixturesBindable" style="padding:0 !Important;">
<table>
    <thead>
        <tr>
                        <th>Col1</th>
                        <th>Col2</th>
        </tr>
    </thead>

    <tbody data-template="row-template" data-bind="source: Fixtures"></tbody>
</table>

<select id="a_teamsdropdown" data-role="dropdownlist" data-text-field="TeamFullName" data-value-field="Id" data-bind="source: Teams" style="width:200px;"></select>
<select id="a_oppteamsdropdown" data-role="dropdownlist" data-text-field="TeamFullName" data-value-field="Id" data-bind="source: 
OpponentTeams" style="width:200px;"></select>

<button type="button" data-bind="click: addFixture">Add Fixture</button>

<script id="row-template" type="text/x-kendo-template">
<tr>
<td><input type="hidden" id="team"  data-bind="attr: { name: TeamModelName, value: TeamId }" /></td>
<td><input type="hidden" id="oppteam" data-bind="attr: { name: OppModelName, value: OppTeamId }" /></td>
</tr>
</script>

</div>

<script>
$(document).ready(function () {
        var viewModel = kendo.observable({
            Teams: <%= Model.Teams %>,
            OpponentTeams: [],
            Fixtures: [],
            addFixture: function (e) {
                var Fixtures = this.get("Fixtures");
                var teamId = $("#a_teamsdropdown").val();
                var teamName = $("#a_teamsdropdown>option:selected").text();
                var oppteamId = $("#a_oppteamsdropdown").val();
                var oppteamName = $("#a_oppteamsdropdown>option:selected").text();

                    this.get("Fixtures").push({
                        TeamFullName: teamName,
                        TeamId: teamId,
                        OppTeamFullName: oppteamName,
                        OppTeamId: oppteamId,
                        OrderIndex: this.get("Fixtures").length,
                        TeamModelName: 'Fixtures[' + this.get("Fixtures").length + '].TeamId',
                        OppModelName: 'Fixtures[' + this.get("Fixtures").length + '].OpponentTeamId'
                    });
            },
            resetFixture: function(){
                var Fixtures = this.get("Fixtures");
                $.each(Fixtures, function (key, fixture) {
                    Fixtures.splice(0, 1);
                });
            }
        });

    opponents = $("#txtBox").kendoAutoComplete({
            minLength: 3,
            dataTextField: "Name",
            filter: "contains",
            dataSource: new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "/url/Ajax",
                        type: "POST",
                        data: function () { return { searchText: $("#txtBox").val()} 
                        },
                        complete: function (data) {
                            opponents.list.width(400);
                        }
                    }
                },
                pageSize: 10,
                serverPaging: true,
                serverSorting: true,
                schema: {
                    total: "count",
                    data: "data",
                    model: {
                        id: "Id",
                        fields: {
                            Id: { editable: false }
                        }
                    }
                }
            }),
            change: function () {
                this.dataSource.read();
            },
            select: function (e) {
                $.each(opponents.dataSource.data(), function (index, value) {
                    if (e.item.text() == value.Name) {
                        selectedOpponent = value;
                        $('#Fixture_OpponentTeam_Id').val(selectedOpponent.Id);
                        $('#OpponentName').val(selectedOpponent.Name);
                        $.ajax({
                            url: 'GetOpponentTeams',
                            data: { schoolId: selectedOpponent.Id, seasonId: seasonId, sportId: sportsId },
                            type: 'GET',
                            success: function (data) {
                                viewModel.OpponentTeams = data;
                                kendo.bind($("#fixturesBindable"), viewModel);
                            },
                            error: function (xhr, ajaxOptions, thrownError) {
                                //alert('Error during process: \n' + xhr.responseText);
                                alert(thrownError);
                            }
                        });
                        return;
                    }
                });
            }

        }).data("kendoAutoComplete");
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T15:21:31.193

不确定这是否会解决您的问题，但总的来说，我建议不要在您的 ajax 成功回调中重新绑定所有内容。如果您只是`.set("OpponentTeams")`不直接分配值，那有帮助吗？

```
success: function (data) {
    viewModel.set("OpponentTeams", data);
}, 
```

调用应该触发元素`.set()`的刷新。`#a_oppteamsdropdown`

# javascript - 在线索提示中工作的日历插件

> ID：14600323
> 
> 赞同：0
> 
> 时间：2013-01-30T09:14:52.287
> 
> 标签：javascript, jquery, knockout.js, cluetip

是否有任何日历可以在线索提示内工作

请提前帮助thanx

```
<div class="calendar_button"> <a class="cal_box" href="#calendar" rel="#calendar">
        <div class="calendar_side_buton_icon"></div>
        <span>Calendar</span> </a> </div>
      <!-- close photo button -->

      <div class="displaynone" id="calendar">
        <div class="modalbox_header">
          <div class="modalbox_header_icon calen_icon"></div>
          <div class="modalbox_header_txt">Calendar</div>
        </div>
        <!-- close modalbox header -->
        <div class="modalbox_content">
          <div class="cal_container">
            <div class="cal_view">
            <div id="datepicker"></div>
              <div class="caln_header">
                <div class="caln_header_left"></div>
                <div class="caln_header_center">
                  <div class="left_keyring"></div>
                  <div class="right_keyring"></div> 
```

检查我有这么多的div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:05:15.630

现在我知道你的问题了，我提出了（有点老套）的解决方案。你可以[在这里](http://jsbin.com/owaset/7)看到它：

```
$('.cluetip-trigger').cluetip({
  local: true,
  showTitle: false,
  width: '305px',
  sticky: true,
  onShow: function(ct, ci){
    this.calendar = $('<div>').datepicker({
      onSelect: function(dateText, inst) {
        alert('You\'ve selected '+dateText);
      }
    }).appendTo(ci);
  },
  onHide: function(ct, ci){
      this.calendar.datepicker( "destroy" ).remove();
  }
}); 
```

# php - 最近查看的 Cookie 数组 - 需要从数组中提取数据并将 cookie 限制为 5 个 ID

> ID：14600325
> 
> 赞同：0
> 
> 时间：2013-01-30T09:15:02.860
> 
> 标签：php, mysql, cookies

我正在尝试为网站创建最近查看的功能。这个想法是您在右侧导航中有一个框，显示您最近查看的 3 个产品。您不需要登录它，如果用户清除 cookie 也没问题，它只是重新开始。

根据我的研究，最好的方法是通过 cookie 数组（而不是设置 5 个 cookie 或继续添加 cookie 或在 mysql 中执行某些操作）。

我有两个问题：

1.  首先，数组不断添加值，我希望它限制为 3 个值，然后从那里删除最旧的值，然后添加最新的值。因此，如果您按以下顺序访问了 7 个产品页面 ID：100,200,300,400,500,600,150，则 cookie 应存储值 (500,600,150)。第一个是 3 个中最旧的，最后一个是最新的。
2.  其次，我不清楚如何将数组提取成可用的东西。该数组是我想我需要查询数据库的 ID 号。

当我把它放在页面上时：

```
COOKIE:  <?php echo $cookie; ?> 
```

我明白了：

```
COOKIE: a:7:i:0;s:3:"100";i:1;s:3:"200";i:2;s:3:"300";i:3;s:3:"400";i:4;s:3:"500";i:5;s:3:"600";i:6;s:3:"150";} 
```

这是我的代码：

```
//set product id
$product_id = [//some stuff here sets the product id]
// if the cookie exists, read it and unserialize it. If not, create a blank array
if(array_key_exists('recentviews', $_COOKIE)) {
    $cookie = $_COOKIE['recentviews'];
    $cookie = unserialize($cookie);
} else {
    $cookie = array();
}

// add the value to the array and serialize
$cookie[] = $product_id;
$cookie = serialize($cookie);

// save the cookie
setcookie('recentviews', $cookie, time()+3600); 
```

我如何首先让 cookie 保存 3 个值并删除最旧的值？将这些 ID 提取到我可以放入查询中的最佳方法是什么？....str_replace？

这带来了另一个问题，我应该将产品的 URL、锚文本和几个属性放入 cookie 中，而不是使用 php/mysql 查找吗？

与往常一样，提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T21:51:46.530

这是我最终弄清楚 myssef 的答案：

```
// if the cookie exists, read it and unserialize it. If not, create a blank array
    if(array_key_exists('recentviews', $_COOKIE)) {
        $cookie = $_COOKIE['recentviews'];
        $cookie = unserialize($cookie);
            } else {$cookie = array();}

    // grab the values from the original array to use as needed
    $recent3 = $cookie[0];
    $recent2 = $cookie[1];
    $recent1 = $cookie[2]; 
```

# ruby-on-rails - 基于 AdminUser 模型限制 ActiveAdmin 的下载链接

> ID：14600326
> 
> 赞同：2
> 
> 时间：2013-01-30T09:15:09.427
> 
> 标签：ruby-on-rails, activeadmin

我试图根据字段“受限”限制谁可以访问 ActiveAdmin 中的 csv/json/... 导出。我想a）隐藏链接和b）如果路径无论如何都会被击中，什么也不返回

我尝试了以下方法：

```
index downloads_links: !current_admin_user.limited? do
  # ...
end 
```

也

```
csv do
  return if current_admin_user.limited?
  # ...
end 
```

我也简单地尝试过使用 procs 和 lambda，但这可能也不是这里的解决方案？

两者似乎都不起作用，并且分别在 ActiveAdmin::DSLResource 和 ActiveAdmin::CSVBuilder 上给我 nomethoderrors

欢迎任何提示，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T08:42:06.647

我可以通过一个简单的猴子补丁来实现这一点，但我使用的是 cancan。cancan 辅助方法“可以吗？” 工作正常，但我没有测试'current_admin_user'。请尝试一下

```
module ActiveAdmin
  module Views
    class PaginatedCollection
      def build_download_format_links(formats = self.class.formats)
        params = request.query_parameters.except :format, :commit
        links = formats.map { |format| link_to format.to_s.upcase, params: params, format: format }
        unless current_admin_user.limited?
          div :class => "download_links" do
            text_node [I18n.t('active_admin.download'), links].flatten.join("&nbsp;").html_safe
          end
        end
      end
    end
  end
end 
```

upd：我已经尝试过使用 current_admin_user，它确实有效。

此外，如果您需要限制格式，您可以使用您的“有限”方法重新定义此模块的格式方法：

```
module ActiveAdmin
    module Views
        class PaginatedCollection
            def formats
                if current_admin_user.limited?
                    @formats ||= [:csv] # anything you need for limited users
                else
                    @formats ||= [:csv, :xml, :json]
                end

                @formats.clone
            end
        end
    end
end 
```

# php - 基于对象的父=>子关系构建访问矩阵？

> ID：14600328
> 
> 赞同：1
> 
> 时间：2013-01-30T09:15:13.473
> 
> 标签：php, mysql, matrix, parent-child, access-control

一些背景：

A`game`属于 a `round`，
A`round`属于 a `season`，
A`season`属于 a `competition`
A`competition`是无主的。

我们有八张桌子

**名称 => 列**

```
`games`            => `id`, `round_id`,  
`rounds`           => `id`, `season_id`,  
`seasons`          => `id`, `competition_id`,  
`competitions`      => `id`,
----
`user_game`        => `user_id`, `game_id`, 
`user_round`       => `user_id`, `round_id`,
`user_season`      => `user_id`, `season_id`,
`user_competition` => `user_id`, `competition_id` 
```

因此，前四个表将不同的部分链接在一起，
后四个表将用户链接到相应的部分。

一些虚拟数据，请注意，当第二个 id 更改以便于阅读时，我已经拆分了表格。

**前四张表**

```
/--GAMES--------------\      /--ROUNDS-------------\
| id | round_id       |      | id | season_id      |
| 1  | 1              |      | 1  | 1              |
| 2  | 1              |      | 2  | 1              |
|----|----------------|      | 3  | 1              |
| 3  | 2              |      |----|----------------|
| 4  | 2              |      | 4  | 2              |
|----|----------------|      | 5  | 2              |
| 5  | 3              |      | 6  | 2              |
| 6  | 3              |      |----|----------------|
|----|----------------|      | 7  | 3              |
| 7  | 4              |      | 8  | 3              |
| 8  | 4              |      | 9  | 3              |
|----|----------------|      |----|----------------|
| 9  | 5              |      | 10 | 4              |
| 10 | 5              |      \---------------------/
|----|----------------|
| 11 | 6              |      /--SEASONS------------\
| 12 | 6              |      | id | competition_id |
|----|----------------|      | 1  | 1              |
| 13 | 7              |      | 2  | 1              |
| 14 | 7              |      |----|----------------|
|----|----------------|      | 3  | 2              |
| 15 | 8              |      | 4  | 2              |
| 16 | 8              |      \---------------------/
|----|----------------|
| 17 | 9              |      /--COMPETITIONS-------\
| 18 | 9              |      | id                  |
|----|----------------|      | 1                   |
| 19 | 10             |      | 2                   |
| 20 | 10             |      \---------------------/
\---------------------/ 
```

**接下来的四个表在下面的列表中得到了最好的解释**

用户：

*   **用户 1**
    *   仅与游戏 1 相关联：
        `user_game (user_id:1, game_id:1)`
    *   可以`direct`访问游戏 1
    *   可以`parent`访问第 1 轮
    *   可以`parent`在第 1 季访问
    *   可以`parent`参加比赛 1
*   **用户 2**
    *   与第一轮相关：
        `user_round (user_id:2, round_id:1)`
    *   可以`child`访问游戏 1,2
    *   可以`direct`访问第 1 轮
    *   可以`parent`在第 1 季访问
    *   可以`parent`参加比赛 1
*   **用户 3**
    *   与第一轮相关：
        `user_round (user_id:3, round_id:1)`
    *   拥有**用户 2**的所有访问权限
    *   链接到游戏 2：
        `user_game (user_id:3, game_id:2)。
    *   可以`direct`访问游戏 2
    *   还与第 13 场比赛有关：
        `user_game (user_id:3, game_id:13)`
    *   可以`direct`访问游戏 13
    *   可以`parent`进入第 7 轮
    *   可以`parent`访问第 3 季
    *   可以`parent`参加比赛 2

因此，当获取上述三个用户的访问权限时，我希望得到这三个数组，请注意
`parent_access`：：用户具有部分访问权限，因为可以访问子对象（无论是什么对象）
`direct_access`：用户具有完全访问权限，因为已被授予直接
`child access`：用户作为父对象具有完全访问权限（无论是什么对象）已被授予直接访问权限

**用户 1**

```
$user1 = array(
    'games' => array(
        [1] => array(
            'id' => 1,
            'parent_access' => false,
            'direct_access' => true,
            'child_access'  => false
        )
    ),

    'rounds' => array(
        [1] => array(
            'id' => 1,
            'parent_access' => true,
            'direct_access' => false,
            'child_access'  => false
        )
    ),

    'seasons' => array(
        [1] => array(
            'id' => 1,
            'parent_access' => true,
            'direct_access' => false,
            'child_access'  => false
        ),
    ),

    'competitions' => array(
        [1] => array(
            'id' => 1,
            'parent_access' => true,
            'direct_access' => false,
            'child_access'  => false
        ),
    )
); 
```

**用户 2**

```
$user2 = array(
    'games' => array(
        [1] => array(
            'id' => 1,
            'parent_access' => false,
            'direct_access' => false,
            'child_access'  => true
        ),
        [2] => array(
            'id' => 2,
            'parent_access' => false,
            'direct_access' => false,
            'child_access'  => true
        )
    ),

    'rounds' => array(
        [1] => array(
            'id' => 1,
            'parent_access' => false,
            'direct_access' => true,
            'child_access'  => false
        )
    ),

    'seasons' => array(
        [1] => array(
            'id' => 1,
            'parent_access' => true,
            'direct_access' => false,
            'child_access'  => false
        ),
    ),

    'competitions' => array(
        [1] => array(
            'id' => 1,
            'parent_access' => true,
            'direct_access' => false,
            'child_access'  => false
        ),
    )
); 
```

**用户 3**

```
$user3 = array(
    'games' => array(
        [1] => array(
            'id' => 1,
            'parent_access' => false,
            'direct_access' => false,
            'child_access'  => true
        ),
        [2] => array(
            'id' => 2,
            'parent_access' => false,
            'direct_access' => true,
            'child_access'  => true
        ),
        [13] => array(
            'id' => 13,
            'parent_access' => false,
            'direct_access' => true,
            'child_access'  => false
        )
    ),

    'rounds' => array(
        [1] => array(
            'id' => 1,
            'parent_access' => false,
            'direct_access' => true,
            'child_access'  => false
        ),
        [7] => array(
            'id' => 7,
            'parent_access' => true,
            'direct_access' => false,
            'child_access'  => false
        )
    ),

    'seasons' => array(
        [1] => array(
            'id' => 1,
            'parent_access' => true,
            'direct_access' => false,
            'child_access'  => false
        ),
        [3] => array(
            'id' => 3,
            'parent_access' => true,
            'direct_access' => false,
            'child_access'  => false
        )
    ),

    'competitions' => array(
        [1] => array(
            'id' => 1,
            'parent_access' => true,
            'direct_access' => false,
            'child_access'  => false
        ),
        [2] => array(
            'id' => 2,
            'parent_access' => true,
            'direct_access' => false,
            'child_access'  => false
        )
    )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:36:44.230

结果有点不同，但在这里发布是为了展示我目前的工作，它仍然可以作为答案，尽管我不满意。

所以，这是我当前的代码： 行之类的：`$competitions = $this->competitions->disabled(true)->getAll();`在竞争表上运行查询并返回一个自定义对象，所以那里的情况有点不同，但你应该能够通过代码弄清楚它的作用。

你不喜欢这里的是我们有**18 个 foreach 循环！**许多嵌套，所以这是**18 个重新运行的 foreach 循环！**任何人都可以看到减少这种情况的方法吗？

```
public function access($user_id, $action = 'none')
{

    $access = array(
        'competitions' => array()
    );

    /* COMPETITIONS */
    $competitions = $this->competitions->disabled(true)->getAll();
    foreach ($competitions as $competition) {
        $access['competitions'][$competition->data('id')] = array(
            //'item' => $competition,
            'type' => 'competition',
            'id' => $competition->data('id'),
            'child_access' => false,
            'direct_access' => false,
            'parent_access' => false,
            'seasons' => array()
        );

        /* SEASONS */
        $seasons = $competition->seasons(true);
        foreach ($seasons as $season) {
            $access['competitions'][$competition->data('id')]['seasons'][$season->data('id')] = array(
                //'item' => $season,
                'type' => 'season',
                'id' => $season->data('id'),
                'child_access' => false,
                'direct_access' => false,
                'parent_access' => false,
                'rounds' => array()
            );

            /* ROUNDS */

            $rounds = $season->rounds(true);
            foreach ($rounds as $round) {
                $access['competitions'][$competition->data('id')]['seasons'][$season->data('id')]['rounds'][$round->data('id')] = array(
                    //'item' => $round,
                    'type' => 'round',
                    'id' => $round->data('id'),
                    'child_access' => false,
                    'direct_access' => false,
                    'parent_access' => false,
                    'games' => array()
                );

                /* GAMES */
                $games = $round->games(true);
                foreach ($games as $game) {
                    //dump('$access["competitions"]['.$competition->data('id').']["seasons"]['.$season->data('id').']["rounds"]['.$round->data('id').']["games"]['.$game->data('id').']');
                    $access['competitions'][$competition->data('id')]['seasons'][$season->data('id')]['rounds'][$round->data('id')]['games'][$game->data('id')] = array(
                        //'item' => $game,
                        'type' => 'game',
                        'id' => $game->data('id'),
                        'child_access' => false,
                        'direct_access' => false,
                        'parent_access' => false
                    );
                }

            }
        }
    }

    /* CHECK COMPETITIONS */
    $competitions = $this->db->select('competition_id')->from('user_competition')->where('user_id', $user_id)->get();
    foreach ($competitions->result() as $id) {
        $id = $id->competition_id;
        $access['competitions'][$id]['direct_access'] = true;

        /* SEASONS */
        foreach ($access['competitions'][$id]['seasons'] as &$season) {
            $season['child_access'] = true;

            /* ROUNDS */
            foreach ($season['rounds'] as &$round) {
                $round['child_access'] = true;

                /* GAMES */
                foreach ($round['games'] as &$game) {
                    $game['child_access'] = true;
                    unset($game);
                }

                unset($round);

            }
            unset($season);
        }
    }

    /* CHECK SEASONS */
    $seasons = $this->db->select('season_id')->from('user_season')->where('user_id', $user_id)->get();
    foreach ($seasons->result() as $id) {
        $id = $id->season_id;
        $competition_id = $this->seasons->disabled(true)->get($id)->data('competition id');

        $competition = $access['competitions'][$competition_id];
        $competition['parent_access'] = true;

        $season = $competition['seasons'][$id];
        $season['direct_access'] = true;

        /* ROUNDS */
        foreach ($season['rounds'] as &$round) {
            $round['child_access'] = true;

            /* GAMES */
            foreach ($round['games'] as &$game) {
                $game['child_access'] = true;
                unset($game);
            }
            unset($round);

        }
    }

    /* CHECK ROUNDS */
    $rounds = $this->db->select('round_id')->from('user_round')->where('user_id', $user_id)->get();
    foreach ($rounds->result() as $id) {
        $id = $id->round_id;
        $round_obj = $this->rounds->disabled(true)->get($id);
        $season_obj = $round_obj->season();
        $competition_id = $season_obj->data('competition id');

        $access['competitions'][$competition_id]['parent_access'] = true;

        $access['competitions'][$competition_id]['seasons'][$season_obj->data('id')]['parent_access'] = true;

        $access['competitions'][$competition_id]['seasons'][$season_obj->data('id')]['rounds'][$id]['direct_access'] = true;

        /* GAMES */

        foreach ($access['competitions'][$competition_id]['seasons'][$season_obj->data('id')]['rounds'][$id]['games'] as &$game) {
            $game['child_access'] = true;
            unset($game);
        }

    }

    /* CHECK GAMES */
    $games = $this->db->select('game_id')->from('user_game')->where('user_id', $user_id)->get();
    foreach ($games->result() as $id) {
        $id = $id->game_id;
        $game_obj = $this->games->disabled(true)->get($id);
        $round_obj = $game_obj->round();
        $season_obj = $round_obj->season();
        $competition_id = $season_obj->data('competition id');

        $access['competitions'][$competition_id]['parent_access'] = true;

        $access['competitions'][$competition_id]['seasons'][$season_obj->data('id')]['parent_access'] = true;

        $access['competitions'][$competition_id]['seasons'][$season_obj->data('id')]['rounds'][$round_obj->data('id')]['parent_access'] = true;
        $access['competitions'][$competition_id]['seasons'][$season_obj->data('id')]['rounds'][$round_obj->data('id')]['games'][$id]['direct_access'] = true;

    }

    if ($action == 'trim') {
        foreach ($access['competitions'] as $k => &$competition) {
            if ($competition['child_access'] === false &&
                $competition['direct_access'] === false &&
                $competition['parent_access'] === false
            ) {
                unset($access['competitions'][$k]);
                continue;
            }

            foreach ($competition['seasons'] as $k1 => &$season) {
                if ($season['child_access'] === false &&
                    $season['direct_access'] === false &&
                    $season['parent_access'] === false
                ) {
                    unset($competition['seasons'][$k1]);
                    continue;
                }
                foreach ($season['rounds'] as $k2 => &$round) {
                    if ($round['child_access'] === false &&
                        $round['direct_access'] === false &&
                        $round['parent_access'] === false
                    ) {
                        unset($season['rounds'][$k2]);
                        continue;
                    }

                    foreach ($round['games'] as $k3 => $game) {
                        if ($game['child_access'] === false &&
                            $game['direct_access'] === false &&
                            $game['parent_access'] === false
                        ) {
                            unset($round['games'][$k3]);
                            continue;
                        }
                    }
                }
            }
        }
    }

    dump($access);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:24:08.657

您需要使用诸如 XACML 之类的授权语言来表示谁可以访问哪些特定数据。然后，你的表就成了“属性”的来源之一。

使用 XACML，您可以表达以下规则：

*   如果该用户正在参与该游戏，则该用户可以查看该游戏
*   如果该用户可以查看该游戏所属的回合（父子关系），则该用户可以查看该游戏...

# java - 如何让 JInternalFrame 填充 Container 并禁用拖动功能？

> ID：14600332
> 
> 赞同：3
> 
> 时间：2013-01-30T09:15:38.743
> 
> 标签：java, swing, jinternalframe

我正在做一个项目，大型机中有 JInternalFrames。现在，我们需要让它们成为 JFrame。我正在考虑使用 JFrame 来保留 JInternalFrame。问题是内部框架的标题栏在那里，用户可以拖动它。

有没有办法让内部框架像 JFrame 中的窗格一样工作？在互联网上搜索后，我发现有人删除了标题栏。

你对此有什么好主意吗？

谢谢！

更新：也许我走错了路。真正的问题是 JInternal 框架无法脱离主框架，或者有什么办法让它看起来像是在框架之外？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T11:50:14.437

> 有什么方法可以使内部框架像 JFrame 中的窗格一样工作

我不确定您所说的*窗格*是什么意思，但我想像一个`JPanel`？你当然可以，但为什么，这是我的问题，除非你想要某种快速*浮动面板*，但你说你不想让它可拖动？所以我有点不确定你的动机，让我厌倦了回答......

> 问题是Internalframe的标题栏在那里

好吧，这是删除标题窗格的代码*（*在[此处](http://www.coderanch.com/t/505683/GUI/java/JInternalframe-decoration)找到）：

```
//remove title pane http://www.coderanch.com/t/505683/GUI/java/JInternalframe-decoration
BasicInternalFrameTitlePane titlePane =(BasicInternalFrameTitlePane)((BasicInternalFrameUI)jInternalFrame.getUI()).getNorthPane();
jInternalFrame.remove(titlePane); 
```

> 用户可以拖动它。

我发现`JInternalFrame`通过删除使其可移动的`MouseListener`s 使其不可移动，但重要的是要注意它没有必要删除`MouseListener`s 因为用于使其*不可拖动*的方法将删除添加`NorthPane`的s`MouseListener`因此它对我们来说是不必要的自己删除它。：

```
//remove the listeners from UI which make the frame move
BasicInternalFrameUI basicInternalFrameUI = ((javax.swing.plaf.basic.BasicInternalFrameUI) jInternalFrame.getUI());
for (MouseListener listener : basicInternalFrameUI.getNorthPane().getMouseListeners()) {
    basicInternalFrameUI.getNorthPane().removeMouseListener(listener);
} 
```

根据您的标题：

> 如何`JInternalFrame`填充容器

只需使用s和(将通过覆盖)`setSize(int width,int height)`的`JInternalFrame`参数调用。`JDesktopPane``width``height``JDesktopPane``getPreferredSize()`

这会给我们这个：

![在此处输入图像描述](../Images/5e19fdcb5abe9459deb82759357ae20c.png)

```
import java.awt.Dimension;
import java.awt.HeadlessException;
import java.awt.event.MouseListener;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.SwingUtilities;
import javax.swing.plaf.basic.BasicInternalFrameTitlePane;
import javax.swing.plaf.basic.BasicInternalFrameUI;

/**
 *
 * @author David
 */
public class Test {

    public Test() {
        createAndShowGUI();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();

            }
        });
    }

    private void createAndShowGUI() throws HeadlessException {
        JFrame frame = new JFrame();
        frame.setResizable(false);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        final JDesktopPane jdp = new JDesktopPane() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(300, 300);
            }
        };

        frame.setContentPane(jdp);
        frame.pack();

        createAndAddInternalFrame(jdp);

        frame.setVisible(true);
    }

    private void createAndAddInternalFrame(final JDesktopPane jdp) {
        JInternalFrame jInternalFrame = new JInternalFrame("Test", false, false, false, false);
        jInternalFrame.setLocation(0, 0);
        jInternalFrame.setSize(jdp.getWidth(), jdp.getHeight());

        //remove title pane http://www.coderanch.com/t/505683/GUI/java/JInternalframe-decoration
        BasicInternalFrameTitlePane titlePane = (BasicInternalFrameTitlePane) ((BasicInternalFrameUI) jInternalFrame.getUI()).getNorthPane();
        jInternalFrame.remove(titlePane);

        /*
         //remove the listeners from UI which make the frame move
         BasicInternalFrameUI basicInternalFrameUI = ((javax.swing.plaf.basic.BasicInternalFrameUI) jInternalFrame.getUI());
         for (MouseListener listener : basicInternalFrameUI.getNorthPane().getMouseListeners()) {
         basicInternalFrameUI.getNorthPane().removeMouseListener(listener);
         }
         */
        jInternalFrame.setVisible(true);

        jdp.add(jInternalFrame);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T09:16:57.530

`JPanel`鉴于您的要求，我建议您在`JFrame`内容窗格中使用简单的。

# python - Apache/Windows下通过python/wsgi fork进程执行可执行文件

> ID：14600336
> 
> 赞同：0
> 
> 时间：2013-01-30T09:15:43.320
> 
> 标签：python, django, apache, subprocess, mod-wsgi

我目前正在开发一个个人小型 Django 站点，以管理我的音乐和电影资源作为练习。

具体环境：

*   蟒蛇 2.7
*   mod_wsgi 3.3
*   阿帕奇 2.2.22
*   视窗

我遇到的问题是当我使用`subprocess.Popen`fork new process在某个播放器中打开我的电影时，该进程将在后台fork，这意味着我只能在任务管理器中看到它，但没有可见的播放器界面。所以这真的很奇怪，因为我什至可以听到电影中的声音，但看不到画面。（我试图以这种方式打开浏览器和许多其他可执行文件，都在后台运行）

如果我使用 Django 附带的开发服务器，这个问题就消失了。所以我猜这个问题与 Apache 或 mod_wsgi 高度相关？

有什么建议和意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:57:31.127

检查[CREATE_NEW_CONSOLE](http://docs.python.org/2/library/subprocess.html#subprocess.CREATE_NEW_CONSOLE)和[STARTUPINFO.wShowWindow](http://docs.python.org/2/library/subprocess.html#subprocess.STARTUPINFO.wShowWindow)参数。当您通过`subprocess.Popen`.

# backbone.js - 我该如何处理这种情况

> ID：14600337
> 
> 赞同：0
> 
> 时间：2013-01-30T09:15:53.837
> 
> 标签：backbone.js, backbone-views

我正在使用 Backbone.js，但由于这种情况，我现在处于困惑的位置。

我的测试对象：

```
test: {
    "links": {
        "nameLink": {
            "name": "name 1",
            "name": "name 2",
            "name": "name 3"
        },
        "ageLink": {
            "age": "1",
            "age": "2",
            "age": "3"
        }
    },
    "data": {
        "element": {
            "project": "project 1",
            "title": "title1",
            "brand": "brand1"
        },
        "element": {
            "project": "project 2",
            "title": "title2",
            "brand": "brand2"
        },
        "element": {
            "project": "project 3",
            "title": "title3",
            "brand": "brand3"
        }
    }
} 
```

我确实有来自服务器的 josn 数据，它有项目名称、链接（下面有嵌套链接）、时间戳。

1.  如何拆分数据并附加适当的 UL 元素。（按姓名，按年龄等）

2.  单击名称，年龄链接，如何（按名称，年龄）对我附加到正文标签的数据进行排序？- 不排序链接菜单？

3.  我怎样才能保持所有这些更新？

请问有什么好的建议吗？

# jquery - iScroll 重叠 textarea 触摸或点击书写

> ID：14600341
> 
> 赞同：1
> 
> 时间：2013-01-30T09:16:15.873
> 
> 标签：jquery, cordova, textarea, phonegap-plugins, iscroll

我在 iOS 和 Android 的 Phonegap 上开发了一个演示，我选择 iScroll 来使页面可滚动，它工作正常，但我必须在创建 de DOM 元素后生成 iScroll，所以 iScroll 与 textarea touch 重叠，并且通过左键单击或无法写入触碰。

我尝试在创建 DOM 元素时使其成为只读，并在生成 iScroll 后删除只读属性，它做得很好但不起作用，iScroll 继续通过触摸或单击与 textarea 写入功能重叠。

有人知道我能做什么吗？或者如何解决？

谢谢指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T09:30:40.357

我记得在同样的问题上苦苦挣扎。我通过刺伤 iscroll.js 来修复它，但不幸的是我现在无法提供代码。

但是，请检查此提交[https://github.com/cubiq/iscroll/commit/feb0088a996a28ebd0a7a37ee7b9e31a50a4a58e](https://github.com/cubiq/iscroll/commit/feb0088a996a28ebd0a7a37ee7b9e31a50a4a58e)。它类似于我在我的案例中所做的修复，所以它可能解决了这个问题。

# android - 如何在worklight中建立webview和html页面之间的通信？

> ID：14600345
> 
> 赞同：0
> 
> 时间：2013-01-30T09:16:33.233
> 
> 标签：android, cordova, ibm-mobilefirst

我正在使用适用于 Android 的 worklight 框架将浏览器制作为混合应用程序。我将地址栏实现为一个输入元素，它接收用户输入并将参数传递给 webview 以加载页面。但是，我不知道如何做相反的事情：每当用户单击 webview 中的链接时，我希望地址栏更改为新位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:57:09.177

您是否正在实现打开的本机页面？如果是这样，看看[ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)，它基本上做同样的事情。它有一个 TextView 用作地址栏。您可能会决定使用它，或者从中获取您想要的零碎东西。无论如何，我会想象你想做这样的[事情](https://stackoverflow.com/questions/3250034/android-webview-intercept-clicks)。通过覆盖 WebViewClient 中的 onLoadResource，您应该能够获取 url 并更改您的 TextBox。

回应以下评论：在 wlEnvInit() 函数中您环境的主 js 文件中：

```
function wlEnvInit(){
    wlCommonInit();
    // Environment initialization code goes here       

    document.onclick=manageLinks;
} 
```

然后在此函数中获取 url 并设置输入元素的文本：

```
function manageLinks(event) {
    var link = event.target;

    //go up the family tree until we find the A tag 
    while (link && link.tagName != 'A') {
        link = link.parentNode;
    }

    if (link) {
        var url = link.href;
        console.log("url = " + url);

        //You can decide if you want to separate external or 
        //internal links, depending on your application
        var linkIsExternal = ((url.indexOf('http://') == 0) || (url.indexOf('https://') == 0));

        if (linkIsExternal) {
            myInput.setText(url);
            return false;
        }
    }

    return true;
} 
```

在您的 WebView 内部，在插件内部，像这样截取 URL：

```
 webview.setWebViewClient(new WebViewClient() {
        @Override
        public void onPageFinished(WebView view, String url) {
                //use this area to set your input. Depending on how you
                //implemented your plugin, you may need to return this value
                //back to your main activity
                Toast.makeText(cordova.getActivity(), "Loading: " + url, Toast.LENGTH_LONG).show();
        }
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:00:53.427

您是否尝试从 href 获取 url 并分配给输入变量并执行 get/post？我知道在 SDK 中是可能的，我认为在框架中它不会更难。您可以使用解析器或类似的东西将超链接存储在数组中。

示例伪代码：

```
When_hiperlink_clicked:  //could be like a listener (search about it)
url = hiperlink.getURL("myHiperlink");
myinput.setText(url);
execute_input_bar_action(); 
```

没有代码或其他东西很难弄清楚，对不起。

# java - 根据日志文件的大小，应该使用哪个 fileappender 创建新的日志文件

> ID：14600346
> 
> 赞同：0
> 
> 时间：2013-01-30T09:16:33.883
> 
> 标签：java

我有一个要求，我应该将数据记录到日志文件中，如果当前日志文件的大小超过 1 MB，则每次都应该创建一个新的 loglife。

我如何在java中实现要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:18:44.190

请像这样使用 RollFileAppender 如果您使用 log4j

```
<appender name="FILE" class="org.apache.log4j.RollingFileAppender">
         <param name="File" value="${catalina.base}/logs/<logFile>.log"/>
         <param name="MaxFileSize" value="1MB"/>
         <param name="MaxBackupIndex" value="100"/>
         <layout class="org.apache.log4j.PatternLayout">
              <param name="ConversionPattern"
                         value="[%d{dd/MM/yy hh:mm:ss:sss z}] %5p %c{2}: %m%n" />
         </layout>
</appender> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:23:35.607

看看[Log4j](http://logging.apache.org/log4j/1.2/)。要根据大小创建新的日志文件，您需要使用[org.apache.log4j.RollingFileAppender](http://logging.apache.org/log4j/1.2/apidocs/index.html)

# php - 如果复选框未选中，如何删除字段的客户端验证

> ID：14600351
> 
> 赞同：1
> 
> 时间：2013-01-30T09:16:37.773
> 
> 标签：php, yii

这里我的情况是，如果复选框未选中，则相应的字段将被禁用，然后对于禁用的字段，客户端验证不应在此处执行，例如，如果我取消选中（有父亲）的复选框，则与该复选框相关的字段像父亲的名字，姓氏......所以对于这些字段客户端验证不应该执行。如果我再次选中该复选框，则应执行客户端验证

在这里我的问题是，当我取消选中复选框时，客户端验证也在发生并且表单没有提交，在这种情况下任何人都可以帮助我。这是我的示例代码

```
<?php echo $form->checkBox($modelFamilyFather, '[1]type',   array('id'=>'type', 'checked'=>'checked','onChange' => "
    if(this.value==checked)
    {

         $('#" . CHtml::activeId($modelFamilyFather, '[1]firstname') .
    "').removeAttr('disabled','disabled');

            $('#" . CHtml::activeId($modelFamilyFather,
    '[1]lastName') . "').removeAttr('disabled','disabled');

         $('#" . CHtml::activeId($modelFamilyFather, '[1]occupation') .
    "').removeAttr('disabled','disabled');

    $('#" . CHtml::activeId($modelFamilyFather, '[1]averageMonthlyIncome') .
    "').removeAttr('disabled','disabled');

    }

    else {
        $('#" . CHtml::activeId($modelFamilyFather, '[1]firstname') .
    "').attr('disabled','disabled');

            $('#" . CHtml::activeId($modelFamilyFather,
    '[1]lastName') . "').attr('disabled','disabled');

         $('#" . CHtml::activeId($modelFamilyFather, '[1]occupation') .
    "').attr('disabled','disabled');

    $('#" . CHtml::activeId($modelFamilyFather, '[1]averageMonthlyIncome') .
    "').attr('disabled','disabled');

    }

    "))." <label for='Father'>Has a Father</label>";

    ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T19:18:23.837

您可以使用[场景](http://www.yiiframework.com/wiki/266/understanding-scenarios/)来执行此操作。

更改 $modelFamilyFather 的验证规则以包含 'on' => 'hasFather'。例子：

```
array('firstname, lastName, occupation, averageMonthlyIncome', 'required', 'on' => 'hasFather'), 
```

这仅激活“hasFather”场景的规则。

然后编辑控制器的 performAjaxValidation 方法以在复选框的值更改时更改场景：

我不知道您的表单、复选框（是否称为“类型”？）或模型的名称，因此您需要替换下面的“your-form-name”和“checkBoxName”。

```
protected function performAjaxValidation($model)
{
    if(isset($_POST['ajax']) && $_POST['ajax']==='your-form-name')
    {
        if($_POST['ModelFamilyFather']['checkBoxName'] == 1){
            $model->scenario = 'hasFather';
        }
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }
} 
```

然后，您还需要编辑从表单获取输入的方法。同样，我不知道代码的名称或该部分的外观，但您需要执行以下操作：

```
if(isset($_POST['ModelFamilyFather']))
{
    $model->attributes=$_POST['ModelFamilyFather'];
    if($model->checkBoxName == 1)
        $model->scenario = 'hasFather';
    if($model->save())
        $this->redirect(array('view','id'=>$model->id));
} 
```

将“ModelFamilyFather”替换为您的模型名称，将 checkboxName 替换为您的复选框名称。

您需要检查的其他三件事：

1.  确保模型中的复选框具有属性。如果你不这样做，你需要做一个。
2.  将复选框的默认值设置为 0。因此，在您的控制器中，在将模型发送到表单之前，添加 $model->checkBoxName = 0;
3.  确保您的表单具有 'enableAjaxValidation'=>true, 'enableClientValidation' => true,

我已经用我自己的模型、属性和复选框在本地对此进行了测试，并且它有效。

# c# - 在 C# 中访问 Powershell COM 对象？

> ID：14600353
> 
> 赞同：0
> 
> 时间：2013-01-30T09:16:43.043
> 
> 标签：c#, powershell, com-interop, comobject

我需要将 Powershell 脚本转换为 C#。

Powershell 脚本访问 Windows 部署服务 COM 对象：

```
$wdsObject = New-Object -ComObject WdsMgmt.WdsManager
$wdsServer = $wdsObject.getWdsServer("Localhost")
[...] 
```

是否可以在 C# 中访问这些 COM 对象？

我在 Visual C# 中找不到相应的 COM 对象引用。我尝试将`wdsmgmt.dll`来自 System32 的内容添加为 C# 项目中的引用，但这不起作用。否则我很困惑。

编辑：

对评论 1 的回答： [从 C# 访问 COM 对象的最佳方式](https://stackoverflow.com/questions/635839/best-way-to-access-com-objects-from-c-sharp)

有问题的 COM 对象未在参考文献中列出。我已经浏览了大约 5 次列表，以确保我不会错过它。有没有办法让 COM 对象出现在 C# 的 COM 引用列表中？

对评论 2 的回答（什么不起作用）：尝试添加 wdsmgmt.dll 显示以下错误：

`Please make sure the file is accessible, and that it is a valid assembly or COM component.`

该文件是可访问的，但在 C# 眼中它似乎不是一个有效的 COM 组件。

在注册表中搜索 WdsMgmt 显示 COM 对象至少以某种方式存在：

`HKEY_LOCAL_MACHINE\SOFTWARE\Classes\CLSID\{CD583E47-B079-4025-A799-5F951D016D3E}`

也许改写的问题是：

当我知道它在 Powershell 中的名称时，如何添加对 C# 的 COM 对象引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:28:33.287

您是否尝试过使用[TlbImp](http://msdn.microsoft.com/en-us/library/aa645736%28v=vs.71%29.aspx#vcwlkcominteroppart1cclienttutorialanchor1)？

> 创建 COM 类包装器
> 
> 要让 C# 代码引用 COM 对象和接口，您需要在 C# 构建中包含 COM 接口的 .NET Framework 定义。最简单的方法是使用 TlbImp.exe（类型库导入程序），这是 .NET Framework SDK 中包含的命令行工具。TlbImp 将 COM 类型库转换为 .NET Framework 元数据 — 有效地创建可以从任何托管语言调用的托管包装器。使用 TlbImp 创建的 .NET Framework 元数据可以通过 /R 编译器选项包含在 C# 构建中。如果您使用的是 Visual Studio 开发环境，您只需添加对 COM 类型库的引用即可自动为您完成转换。

以下是有关此互操作工具的更多信息：

[Tlbimp.exe（类型库导入器）](http://msdn.microsoft.com/en-us/library/tt0cf3sx%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:30:47.050

您可以使用 直接镜像 PowerShell 所做的事情`dynamic`，并通过 ProgId 创建实例。例如，请参阅[https://stackoverflow.com/a/3251325/8446](https://stackoverflow.com/a/3251325/8446)。

# android - TextView 和太长的文本

> ID：14600355
> 
> 赞同：0
> 
> 时间：2013-01-30T09:16:51.403
> 
> 标签：android

我对某些功能有疑问。我在`TextView`带有文本的操作栏中。当文本太长时，我使用`setEllipsize(TruncateAt.End)`并且一切正常。`TextView`但是当用户在这个地方点击这个显示所有文本的表格时，我想添加功能。我怎么能做到这一点。使用对话框或任何其他方式来显示所有文本的小字段。此文本从未超过 30 个字符。

编辑：

```
<?xml version="1.0" encoding="UTF-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:weightSum="100"
        android:orientation="horizontal"
         >

        <ImageView
            android:id="@+id/homeIcon"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_weight="10"
            android:src="@drawable/ic_launcher" />

        <TextView
            android:id="@+id/loginData"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="25"
            android:layout_marginLeft="5dp"
            android:text="TextView" />

        <ImageView
            android:id="@+id/splitLine"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:src="@drawable/descr_box_left" 
            android:layout_weight="1"
            android:layout_marginLeft="2dp"/>

        <TextView
            android:id="@+id/infoText"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_weight="42"
            android:text="TextView" 
            android:singleLine="true"
            android:ellipsize="marquee"
            android:marqueeRepeatLimit="marquee_forever"
            android:scrollHorizontally="true"
            android:focusable="true" 
            android:focusableInTouchMode="true"/>

        <Button
            android:id="@+id/infoButton"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="15"
            android:layout_marginLeft="5dp"
            android:text="Button" />

        <ImageButton
            android:id="@+id/settingsButton"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_weight="5"
            android:src="@drawable/icon_settings_active" />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:20:21.523

例如

1）您可以弹出自己的自定义对话框，其中包含整个文本，

2）您可以创建一个带有透明背景并包含文本的新活动，

3）您可以扩展您的栏并显示整个文本，

4）你可以在你的标题中实现runnable\scrollable字符串：[Scrolling Textview in android](https://stackoverflow.com/questions/13966782/scrolling-textview-in-android/13966814#13966814)

# java - 找不到类“com.google.gdata.client.calendar.CalendarService”，]

> ID：14600358
> 
> 赞同：-1
> 
> 时间：2013-01-30T09:16:58.830
> 
> 标签：java, android, google-calendar-api, android-calendar

我正在编写一个连接到我的 Google 日历的 android 应用程序。我一直在使用 Google Sample and Docs 来正确使用这些类并导入正确的罐子。

当我在 Eclipse 中创建一个 Java 项目并尝试使用`System.Out.print()`我的日历时，没有问题，并且我的 ID 和我的事件都显示出来了。当我为 android 应用程序（比如说）编写相同的代码时`onCreate`，使用相同的 Jars Import，Eclipse 将 logCat 错误发回给我：

> “找不到类 'com.google.gdata.client.calendar.CalendarService”

关于如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:22:30.367

您必须将 jar 添加到项目设置中。只需将鼠标悬停在类文件中的错误上并选择“修复项目设置”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:29:10.960

那是因为您引用了所需的`.jar`文件并且没有将它们包含到您的 apk 中。

将所需的 jar 文件放在项目`\lib`文件夹中

关注此[线程](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/6eNj4avdfM0)以获取更多信息

# delphi - 如何使用 Win32_NetworkAdapter 或类似方法识别网络“名称”？

> ID：14600367
> 
> 赞同：4
> 
> 时间：2013-01-30T09:17:40.363
> 
> 标签：delphi, wmi

我正在寻找一种方法来识别出现在“网络连接”对话框的“状态”字段中的值，即

![在此处输入图像描述](../Images/4d12c098e79d752fe4a3553b0df5bb33.png)

使用 Win32_NetworkAdapter，这里提供的大多数其他信息似乎都可以从这个来源获取，但据我所知，Status 成员似乎没有填充。任何想法我可以在哪里找到它。正如您从屏幕截图中看到的那样，我需要选择 3G 网络连接的移动/蜂窝提供商的名称。

**更新**：在 DNSDomainSuffixSearchOrder 建议之后添加了此图像

![在此处输入图像描述](../Images/f9c47d22f6180bc5e17da8368a3c8ca2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:20:59.290

有一个类型库可以帮助您获取此值：-

[Delphi Wmi 类生成器](http://code.google.com/p/delphi-wmi-class-generator/wiki/WbemScripting_TLB)

这应该可以帮助你得到你想要的。

# python - 实时 Web 应用程序的 Django 替代方案

> ID：14600368
> 
> 赞同：7
> 
> 时间：2013-01-30T09:17:40.950
> 
> 标签：python, django, web-applications, real-time

去年我一直在用 Django 开发一个 Web 服务器应用程序。堆栈是 Django + Apache + MySql。这个堆栈非常适合我们的需求。最近出现了对一些实时功能的需求以及在服务器应用程序中更改/重写很多东西的机会。令我惊讶的是，Django 并不是这里的最佳选择。

我读了很多书（推送、WebSockets、gunicorn ......很多东西...... [http://curella.org/blog/django-push-using-server-sent-events-and-websocket/](http://curella.org/blog/django-push-using-server-sent-events-and-websocket/)）但我还没有决定是否要使用 Django，或者是否应该使用更适合该工作的新软件堆栈。使用 Django 似乎有点不自然。任何有经验的开发人员可以指出我正确的方向吗？

因此，基本问题是：对于构建实时 Web 应用程序的当前软件堆栈，有哪些替代方案？

谢谢

PS：不是以英语为母语的人。:)

编辑：替代方案需要允许安全连接。

编辑 2：我们开发的网络应用程序是游戏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:26:10.480

查看[http://www.tornadoweb.org/](http://www.tornadoweb.org/) + [http://www.mongodb.org/](http://www.mongodb.org/) + [https://github.com/bitly/asyncmongo](https://github.com/bitly/asyncmongo) + [http://socket.io/](http://socket.io/) 我认为这是个好主意使用它来创建实时应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T09:50:55.640

你需要权衡你的决定和你的目标。

### 你想要一个产品

然后用你最熟悉的语言框架编写代码，*只有*当你有一个产品并且它有限制时才考虑切换工具。

### 你想学习新的东西

尝试新的语言、框架——但生产产品可能需要更长的时间，你可能会发现新工具并不比旧工具好。

### 一半一半

尝试启动两个项目，并在每个项目中构建相同的东西，只使用另一个工具。这将花费更长的时间，但您应该能够很快看到您喜欢/最适合您的任务的工具。

### 备择方案

我不太确定 django 的意思是“不自然”。Django 可以进行服务器/客户端通信 - 只需使用一些 AJAX 与 django 服务器对话，然后调用另一个 pythonic 库来处理请求。django 的 Python 替代品包括出色的[flask](http://flask.pocoo.org/)和[web.py](http://webpy.org/)，但除非您也对它们进行编程（如 django），否则它们都不会进行客户端/服务器通信。如果你不喜欢 python，你可以试试[ruby​​ on rails](http://rubyonrails.org/)。对于客户端，你需要了解一些关于[JavaScript](http://en.wikipedia.org/wiki/JavaScript)的知识，所以去学习一下（[咖啡脚本](http://coffeescript.org/)和[jQuery](http://jquery.com/)可以缓解 JS 的痛苦，但首先要学习 JavaScript）。

当然，你可以硬着头皮用[node.js](http://nodejs.org/)作为服务器基础，显然它非常好（我还没有尝试过）——并且是用 JS 编写的。

编辑：根据您的评论，仔细看看

*   [django-websockets](http://blog.jupo.org/2011/08/13/real-time-web-apps-with-django-and-websockets/) ,
*   [node.js + 推送服务器](http://www.gianlucaguarini.com/blog/nodejs-and-a-simple-push-notification-server/)
*   [网络套接字](http://dev.w3.org/html5/websockets/)

还注意到这个问题是一个潜在的[重复](https://stackoverflow.com/questions/5479741/django-push-http-response-to-users)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:08:26.547

对于实时 Web 应用程序，我建议您使用 websockets，它们可以是安全的，并且响应时间非常快，因为建立连接时不再存在通信开销。如果你精通 python，你可以使用[autobahn在 python 中创建服务器，在](http://autobahn.ws/)[python](http://twistedmatrix.com/trac/)和/或 javascript 中创建客户端。PS[这里](http://krondo.com/blog/?page_id=1327)是一个非常棒的twisted教程。

# ruby-on-rails-3 - 带有新的omniauth-box gem 的Box API 未重定向到我的应用程序（错误Errno::ECONNRESET：对等方重置连接）

> ID：14600369
> 
> 赞同：0
> 
> 时间：2013-01-30T09:17:43.100
> 
> 标签：ruby-on-rails-3, oauth-2.0, omniauth, box-api

我创建了一个 gem 来使用 Box API V2 ( [https://github.com/youpdidou/omniauth-box/](https://github.com/youpdidou/omniauth-box/) )。我在开发中对其进行了测试。身份验证根据需要创建并记录在 DB 中，但在流程结束时重定向到我的页面时出现错误（参见下面的日志）。

我的应用程序可以与其他提供商一起正常工作（我有 Twitter 和 Yammer，使用omniauth-twitter 和omniauth-yammer gem），所以似乎错误可能来自我的Gem 中缺少的东西（与刷新令牌相关的东西？） ，或者它可能与 Box 身份验证过程有 2 个步骤（1 用于凭据，1 用于授权访问文件 - 参见[http://developers.box.com/oauth/](http://developers.box.com/oauth/)）的事实有关...

我在这里想念什么？如何调试这个，我应该看什么？

```
(box) Callback phase initiated.

Started GET "/auth/box/callback?state=7d550f7c0d367d4af73ca3a1d82985c78730126887e3e813&code=fV19In0Elnq1GNX61t32N1h8anezbTiH" for 127.0.0.1 at 2013-01-30 00:28:18 -0800
Processing by AuthenticationsController#create as HTML
  Parameters: {"state"=>"7d550f7c0d367d4af73ca3a1d82985c78730126887e3e813", "code"=>"fV19In0Elnq1GNX61t32N1h8anezbTiH", "provider"=>"box"}
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Authentication Load (0.5ms)  SELECT `authentications`.* FROM `authentications` WHERE `authentications`.`user_id` = 1 AND `authentications`.`provider` = 'box' AND `authentications`.`uid` = '288560' LIMIT 1
   (0.1ms)  BEGIN
  SQL (0.3ms)  INSERT INTO `authentications` (`created_at`, `oauth_secret`, `oauth_token`, `provider`, `uid`, `updated_at`, `user_id`) VALUES ('2013-01-30 08:28:19', NULL, NULL, 'box', '288560', '2013-01-30 08:28:19', 1)
   (1.5ms)  COMMIT
   (0.1ms)  BEGIN
   (0.4ms)  UPDATE `authentications` SET `oauth_token` = 'cZga3uA89eslNAURbJlZaySukIs9IxTF', `updated_at` = '2013-01-30 08:28:19' WHERE `authentications`.`id` = 26
   (0.5ms)  COMMIT
Redirected to http://localhost:3000/services
Completed 302 Found in 14ms (ActiveRecord: 3.7ms)
[2013-01-30 00:28:19] ERROR Errno::ECONNRESET: Connection reset by peer
    /Users/alex/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:80:in `eof?'
    /Users/alex/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:80:in `run'
    /Users/alex/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-22T13:26:28.793

我认为这与框无关，但轨道本身，你可能想看看： [错误 Errno::ECONNRESET: Connection reset by peer](https://stackoverflow.com/questions/3802913/error-errnoeconnreset-connection-reset-by-peer) 因为这个人似乎有足够接近与你完全相同的错误。

已编辑以包括答案：引用自@Matt Smith

> 我的快速猜测是，您的会话似乎有问题，protect_from_forgery 正在启动。
> 
> 我遇到了类似的问题并将头撞在墙上几天，结果是我将整个对象分配给了会话对象，而不仅仅是 id。快速说明，非 GET 请求是触发protect_from_forgery 的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T16:50:45.697

我在非 Rails 应用程序中遇到了类似的问题。在我的情况下，我在客户端上执行了一些 ajax 请求，然后重定向到盒子身份验证页面，而无需等待服务器完成请求。

在请求完成后使用承诺和重定向解决了这个问题。就像是：

```
$.ajax(my_url, {dataType: "json"}).then(function(data){window.location.replace(auth_url)}; 
```

希望你能在这里找到一些灵感。

# java - “jzmq”是否支持 ZeroMQ 版本 3？

> ID：14600371
> 
> 赞同：4
> 
> 时间：2013-01-30T09:17:49.483
> 
> 标签：java, zeromq, jzmq

任何人都知道 ZeroMQ 的 java 绑定“jzmq”是否与 ZeroMQ 版本 3.xx 一起使用？没有关于此的官方信息。任何人的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:11:29.577

确实，不容易找到。但是，浏览 jzmq 代码，似乎支持 3.0（可能更高）版本。看看下面的 java 文件，它包含关于 3.0 的概念，包括对当前 zmq 版本和适当处理的各种检查（例如支持更新的 zmq 3.0+ 功能）：

[https://github.com/zeromq/jzmq/blob/master/src/org/zeromq/ZMQ.java](https://github.com/zeromq/jzmq/blob/master/src/org/zeromq/ZMQ.java)

例如（2013-01-31 第 813 行）：

```
/**
* @since 3.0.0
*/
public void setSndHWM (long sndHWM) {
    if (ZMQ.version_full() < ZMQ.make_version(3, 0, 0))
        return;

    setLongSockopt (SNDHWM, sndHWM);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:05:47.227

[将Mule](https://github.com/claudemamo/mule-transport-zeromq)和[Apache CXF](https://github.com/claudemamo/cxf-rt-transports-zeromq) ZeroMQ 传输与 ZeroMQ 3.2.2 和[jzmq 2.1.0](https://github.com/zeromq/jzmq/tree/2.1.0)一起使用时，我没有遇到任何问题。话虽如此，我不知道下面的 jzmq 是否正在调用 ZeroMQ 3.2.2 中已弃用的方法。

# mysql - 是否可以在表格顶部插入记录？

> ID：14600378
> 
> 赞同：0
> 
> 时间：2013-01-30T09:18:49.153
> 
> 标签：mysql

目前，通过使用以下，它被插入到最后一行之后。

```
INSERT INTO `table` (`text1`,`text2`,`text3`) VALUES('a', 'b', 'c') 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T09:23:53.387

表中的行没有固有的顺序。顺序仅由您查询它的方式指定。如果您不指定如何对其进行排序，则数据库引擎只会以最有效的方式返回行，具体取决于表的布局。

**因此**无法回答****您的问题**，因为数据库表中没有*顶部*和*底部*。只有*数据*。**

 **[另请参阅这个非常相似的问题及其答案](https://stackoverflow.com/questions/1949641/mysql-row-order-for-select-from-table-name)

您想要做的可能是指定一个名为的新列`ordering`并在其中写入您的订购信息，然后使用查询表

```
SELECT * FROM `myTable` ORDER BY `ordering` 
```**

# mysql - Mysql2::Error: The used command is not allowed with this MySQL version: LOAD DATA LOCAL INFILE

> ID：14600379
> 
> 赞同：6
> 
> 时间：2013-01-30T09:18:51.653
> 
> 标签：mysql, ruby-on-rails, rake, rails-activerecord, rakefile

这是我的完整脚本。

我正在尝试制作一个 rake 任务，该任务从目录中的文件中收集数据并将它们加载到 mysql 中。

我修复了 local-infile = 1，没有任何效果。它只是给了我错误

```
namespace :db do
  namespace :load do
    desc "Load Properties into DB"
    task :properties => :environment do
      Mysql2::Client.default_query_options[:connect_flags] |= Mysql2::Client::LOCAL_FILES
      @files = Dir.entries("db/property_website_scripts/")
      connection = ActiveRecord::Base.connection()

      for file in @files
        next if file == "." || file == ".."
        sql = "LOAD DATA LOCAL INFILE '#{Rails.root}/db/property_website_scripts/#{file}'
               INTO TABLE properties
               FIELDS TERMINATED BY '|'
               LINES TERMINATED BY '\r\n'
               (property_type,property_for,city,state,country......);"

        connection.execute(sql)
      end

      #updating created at and updated at
      Property.update_all({:created_at => Time.now, :updated_at => Time.now}, "created_at IS NULL")
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-23T08:47:54.070

这篇文章的解决方案对我有用：[启用 local-infile for loading data into remote mysql from rails](https://stackoverflow.com/questions/21256641/enabling-local-infile-for-loading-data-into-remote-mysql-from-rails)

将此添加到`database.yml`

`local_infile: true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:20:58.920

我突然遇到了与 gem`0.3.11`版本相同的错误。`mysql2`由于我已经使用该版本有一段时间了，我认为这是另一个 gem 的某种依赖问题。尝试升级到 version `0.3.12b5`，它为我修复了它。

# batch-file - 从批处理脚本调用批处理脚本而不暂停父脚本的执行

> ID：14600385
> 
> 赞同：1
> 
> 时间：2013-01-30T09:19:12.287
> 
> 标签：batch-file

我想在特殊情况下从batch1 脚本调用batch2 脚本，但不想等待父batch1 脚本等待batch2 完成。希望 batch1 移动到下一个命令，而 batch2 并行运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:43:44.813

NT shell 命令 START 会将批处理文件传递给它自己的 Window 执行并立即进入下一行。

```
 start 1.bat
    start 2.bat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:42:52.463

启动命令在另一个窗口中启动第二个批处理文件并且两者并行运行

```
@echo off
::This is the second batch file that runs in parallel with this file
start batch_file.bat 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:28:38.813

你可以`start`这样使用

```
echo batch1 command
start batch2.bat
echo batch1 carries on whilst batch2 runs at the same time 
```

# android - 设置 Android 的发布日期

> ID：14600390
> 
> 赞同：-1
> 
> 时间：2013-01-30T09:19:35.970
> 
> 标签：android, windows-phone, distribution

我有一个应用程序需要开发跨平台，根据季节和 PR 等进行零星更新。

我知道我可以为 iPhone 分发设置一个初始可用日期，我也可以为更新做同样的事情。但是我似乎无法找到我是否可以使用 PlayStore 做到这一点。我需要为初始版本计时，然后根据季节更新时间，并希望提前完成。

有谁知道它是否相似？如果您知道是否也可以在 Windows Phone 操作系统上进行类似操作，那将是额外的奖励！呵呵

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:37:05.517

你不能。您必须在希望应用程序在 Play 商店中可用之前的几个小时提交您的 APK。Play 商店不提供“发布日期”。

# iphone - 为什么在 iphone sdk 的所有集合视图中重复相同的图像

> ID：14600396
> 
> 赞同：1
> 
> 时间：2013-01-30T09:19:45.927
> 
> 标签：iphone, ios, ios6

我有一个表格视图，其中列出了作为 URL 检索的 XML 文件中的一组图像。我用集合视图扩展了它，当用户在表格视图中选择图像时，相应的图像将进入下一个窗口，将一组图像显示为集合视图。

在这里我面临一个问题，因为当我单击表格视图中的任何图像时，它会为所有集合视图显示相同的图像。为了更好地理解，我附上了下面的图片，

![集合图像](../Images/8e2c77f5c6751ed33f527d7d60f4ee82.png)

在此，表格视图显示 Image-1、Image-2... 等等。当我单击表视图中的 Image-1 时，集合视图显示为 Image1-1、Image1-2、.. 等等。当我再次单击表格视图中的 Image-2 时，它再次显示相同的 Image-1-1、Image-1-2 ...等等。

谁能告诉我如何解决这个问题，

对应的代码如下所示，

**表视图**

```
- (void)viewDidLoad
   {
     [super viewDidLoad];
     xmlParser = [[myXMLParser alloc] loadXMLByURL:@"http://sample.com/Images.xml"];
     [self.tableView reloadData];
   }

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
   {
     return 1;
   }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
   {
     return [xmlParser.tweets count];
   }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
   {
    static NSString *CellIdentifier = @"images";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }
    UIImage *currentTweet = [[xmlParser tweets] objectAtIndex:indexPath.row];
    UIImageView *tweetImageView = [[UIImageView alloc]initWithFrame:CGRectMake(0,0,cell.frame.size.width , cell.frame.size.height)];
    tweetImageView.image = currentTweet;
    [cell setBackgroundView:tweetImageView];
    return cell;
  }

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  MyCollectionViewController *collectViewController = [[MyCollectionViewController alloc] initWithNibName:@"detail" bundle:nil];
  [self.navigationController pushViewController:collectViewController animated:YES];
} 
```

**集合视图**

```
- (void)viewDidLoad
    {
      [super viewDidLoad];
      xmlParser = [[myXMLParser alloc] loadXMLByURL:@"http://sample.com/Images.xml"];
      UIImage *currentImage = [[xmlParser tweets] objectAtIndex:0];
      customimage.image = currentImage;
      UIImage *currentImage1 = [[xmlParser tweets] objectAtIndex:1];
      customimage1.image = currentImage1;
    }

-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
   {
     return 1;
   }

-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
  {
    return [xmlParser.tweets count];
  }

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
  {
    MyCollectionViewCell *myCell = [collectionView dequeueReusableCellWithReuseIdentifier:@"MyCell" forIndexPath:indexPath];
    UIImage *currentTweet = [[xmlParser tweets] objectAtIndex:indexPath.row];
    UIImageView *tweetImageView = [[UIImageView alloc]initWithFrame:CGRectMake(0,0,myCell.frame.size.width , myCell.frame.size.height)]; 
    tweetImageView.image = currentTweet;
    [myCell setBackgroundView:tweetImageView];
    return myCell;
 } 
```

**更新**

**我的 XML**

```
<?xml version="1.0" encoding="UTF-8"?>
<Products>
<products id="0">
 <img>http://myimage.com/images/logo1.png</img>
</products>
 <products id="1">
 <img>http://myimage.com/images/Main_pic.png</img>
</products>
<products id="2">
<img>http://myimage.com/images/image1.png</img>
</products>
<products id="3">
<img>http://myimage.com/images/image2.png</img>
<img-subproduct>http://myimage.com/images/image2-1.png</img-subproduct>
<img-subproduct>http://myimage.com/images/image2-2.png</img-subproduct>
</products>
<products id="4">
<img>http://myimage.com/images/image3.png</img>
<img-subproduct>http://myimage.com/images/image3-1.png</img-subproduct>
<img-subproduct>http://myimage.com/images/image3-2.png</img-subproduct>
</products>
</Products> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:12:56.953

因为您使用故事板，所以 MyCollectionViewCell 将始终从 stroyboard 加载。

所以，改变 MyCollectionViewCell 接口：

```
@interface MyCollectionViewCell : UICollectionViewCell
@property (weak, nonatomic) IBOutlet UIImageView *tweetImageView;
@end 
```

并链接故事板中的属性。

* * *

好吧，我写给你。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    MyCollectionViewCell *myCell = [collectionView dequeueReusableCellWithReuseIdentifier:@"MyCell" forIndexPath:indexPath];
    if (!myCell) {
        myCell = [[MyCollectionViewCell alloc] initWithFrame:CGRectMake(0,0,myCell.frame.size.width , myCell.frame.size.height)];
    }
    [myCell.tweetImageView setImage:[[xmlParser tweets] objectAtIndex:indexPath.row]];
    return myCell;
} 
```

以及 MyCollectionViewCell 接口和实现：

```
@interface MyCollectionViewCell : UICollectionViewCell
@property (weak, nonatomic) UIImageView *tweetImageView;
@end

@implementation MyCollectionViewCell

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        UIImageView *aImageView = [[UIImageView alloc] initWithFrame:self.bounds];
        aImageView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
        [self addSubview:aImageView];
        self.tweetImageView = aImageView;
    }
    return self;
}

@end 
```

* * *

您将 currentTweet 设置为`[[xmlParser tweets] objectAtIndex:indexPath.row]`?

我认为是零。核实。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    MyCollectionViewCell *myCell = [collectionView dequeueReusableCellWithReuseIdentifier:@"MyCell" forIndexPath:indexPath];
    UIImage *currentTweet = [[xmlParser tweets] objectAtIndex:indexPath.row];
    UIImageView *tweetImageView = [[UIImageView alloc]initWithFrame:CGRectMake(0,0,myCell.frame.size.width , myCell.frame.size.height)]; 
    tweetImageView.image = currentTweet;
    NSLog(@"%@", tweetImageView.image);         // Check tweetImageView.image whether nil or not.
    [myCell setBackgroundView:tweetImageView];
    return myCell;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T07:18:50.493

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

当您单击 tableview 的任何行（例如 Image-2）时，就会调用上述方法。

在这个方法中，你调用 ::: pushViewController 来推送集合视图类

加载此集合视图后 ::: 现在告诉我视图将如何加载方法集合视图类将理解它必须显示对应于 Image-2 的图像

为此，当您调用 pushviewController 时，您还应该传递一些参数，这取决于您应该获取其相应的集合并显示它们。

**更新 ：**

当用户点击表格视图时获取图像：

```
UIImage *selectedIamge = [[xmlParser tweets] objectAtIndex:indexPath.row]; 
```

如果用户单击第一行，则 indexpath.row = 0 并在此数组内>> [xmlParser tweets] >> 零索引处的图像是您需要的数据。这样你就可以得到图像。

您不必获取应用于 tableview 单元格的图像，而是可以从初始化 tableview 单元格的数组中获取图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T09:26:07.923

改变 ：

```
UIImageView *tweetImageView = [[UIImageView alloc]initWithFrame:CGRectMake(0,0,cell.frame.size.width , cell.frame.size.height)]; 
```

到 ：

```
UIImageView *tweetImageView = [[[UIImageView alloc]initWithFrame:CGRectMake(0,0,cell.frame.size.width , cell.frame.size.height)]autorelease]; 
```

# extjs4 - 在 Ext Js 4.0.7 中使用 Ext.grid.Panel 禁用 Tab 索引

> ID：14600399
> 
> 赞同：1
> 
> 时间：2013-01-30T09:19:46.510
> 
> 标签：extjs4

当我点击 TAB 键时如何禁用通过网格单元格的遍历..ie; extjs 中有什么方法可以避免标签索引.. 提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:28:31.273

我有一个解决方案，

selType: 'cellmodel', selModel: Ext.create('Ext.selection.CellModel',{ enableKeyNav: false // 当点击键时禁用单元格遍历(es: TAB) })

**只需将这些行包含到您的网格面板中（我使用单元模型进行选择）**

# linux - 我如何编写 MEX+CUDA 代码并进行编译？

> ID：14600405
> 
> 赞同：2
> 
> 时间：2013-01-30T09:20:16.087
> 
> 标签：linux, matlab, compilation, cuda

我想编写一个同时利用 MATLAB 的 CUDA 和 MEX 的代码。我已经尝试了几次来编译简单的组合代码，但我无法处理。将这两者结合起来的最佳方法是什么？是否可以直接在 MEX 中编写 CUDA 代码，还是需要单独编写它们并将它们链接在一起？如果是这种情况，我该如何处理将这两者联系起来？我对 c++ 不是很满意，但我会一点一点地学习。请在你的回答中表现出来。提前致谢。

顺便说一句，我正在使用 linux。

# c - 并发访问文件linux

> ID：14600406
> 
> 赞同：10
> 
> 时间：2013-01-30T09:20:18.667
> 
> 标签：c, linux, multithreading, concurrency, filesystems

我正在研究如何在 linux 中完成系统调用读/写，我发现了这个：

```
....
loff_t pos = file_pos_read(f.file);
ret = vfs_read(f.file, buf, count, &pos);
file_pos_write(f.file, pos);
fdput(f);
...` 
```

我的问题是：

锁去哪儿了？我会想象这样的事情：

```
....
lock(f.file);  // <-- lock file struct
loff_t pos = file_pos_read(f.file);
ret = vfs_read(f.file, buf, count, &pos);
file_pos_write(f.file, pos);
fdput(f);
unlock(f.file);  // <-- unlock file struct
... 
```

如果多个线程尝试同时读/写，他们可以在相同的偏移量读/写？

如果我的理解是正确的，linux 不使用任何锁定机制来保护偏移量，这是否符合 POSIX 标准？

我确实查看了 POSIX 规范，并没有发现关于这个案例的任何信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T09:22:16.510

Linux 不使用任何锁定机制来保护多线程写入文件。

您必须使用自己的互斥锁来保护您的文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T09:46:11.213

在多线程应用程序中，您有责任序列化对文件描述符的访问。您可以跨进程使用`flock(2)`系统调用来同步对同一文件的访问。

The kernel won't crash if you access the same file from two different processes/threads, but it may overwrite or corrupt the file position and file data in an undefined way.

# actionscript-3 - 尝试访问主时间轴上影片剪辑的第 2 帧上的另一个影片剪辑

> ID：14600407
> 
> 赞同：1
> 
> 时间：2013-01-30T09:20:19.090
> 
> 标签：actionscript-3

我正在处理电影剪辑的嵌套。

我正在尝试访问舞台上主要影片剪辑的第 2 帧中的另一个影片剪辑。

=> test2 影片剪辑出现在测试影片剪辑的第 2 帧上。

由于访问 test2 变量，我收到此错误。

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 Untitled_fla::MainTimeline/Access() 在 Untitled_fla::MainTimeline/Untitled_fla::frame1()

在主影片剪辑的第 2 帧上访问 test2 影片剪辑的任何替代方法？

我的代码是：

```
var test1:MovieClip;
var test2:MovieClip;
test.stop();

function Start(){
    //test.addChild(test1);
    //Test1 = new test1();
    //Test2 = new test2();
    trace(test.numChildren);
    test1 = MovieClip(test.getChildByName("test1"));
    test.gotoAndStop(2);
    test2 = MovieClip(test.getChildByName("test2"));

}
function Access(color:String){
    var r:RegExp=new RegExp(/#/);
    var uintColor:uint = uint(String(color).replace(r,"0x"));
    var c: ColorTransform = new ColorTransform();
    c.alphaMultiplier = 0.9;
    c.color = uintColor;
    test.gotoAndPlay(2);
    test2.transform.colorTransform = c;
}
Start();
Access("#666666"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:17:10.243

在 Flash 中，虽然他的时间线 Flash 播放器仅在帧结束时（第一帧除外）创建嵌套子级，也就是说，如果您`test2`在第二帧中命名了子级`clip`并导航到该帧，则您必须等待 1 帧之前将创建第二帧中的孩子。尝试以下解决方案：

```
function Start(){
    trace(test.numChildren);
    test1 = MovieClip(test.getChildByName("test1"));
    test.gotoAndStop(2);
    addEventListener(Event.ENTER_FRAME, function(event:Event):void
    {
        EventDispatcher(event.target).removeEventListener(event.type, arguments.callee);
        test2 = MovieClip(test.getChildByName("test2"));
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:29:33.327

尝试更改您的访问功能。**如果您正在播放测试**影片剪辑，我认为 test2 将不可用。

```
function Access(color:String){
    var r:RegExp=new RegExp(/#/);
    var uintColor:uint = uint(String(color).replace(r,"0x"));
    var c: ColorTransform = new ColorTransform();
    c.alphaMultiplier = 0.9;
    c.color = uintColor;
    test.gotoAndStop(2);
    test2.transform.colorTransform = c;
} 
```

# visual-studio - 这是 VC++ 优化器或我的代码中的错误吗？

> ID：14600413
> 
> 赞同：1
> 
> 时间：2013-01-30T09:20:40.993
> 
> 标签：visual-studio, visual-c++, visual-studio-2012, visual-c++-2012

使用 VS2012 Update 1 生成的控制台项目尝试了以下向量减法代码。除了禁用全局优化和启用汇编程序列表之外，我并没有真正触及默认选项。

在 Windows 7 x64 SP1 上使用 x64 版本配置编译。

```
#include <stdio.h>
#include <tchar.h>

#include <emmintrin.h>

typedef unsigned short ushort;
typedef unsigned int uint;

void print(__m128i i)
{
    auto& arr = i.m128i_u16;
    printf("[%d %d  %d  %d  %d  %d  %d  %d]\n", arr[0], arr[1], arr[2], arr[3], arr[4], arr[5], arr[6], arr[7]);
}

int _tmain(int argc, _TCHAR* argv[])
{
    const int lineSize = 912;
    ushort input[lineSize];
    ushort vals[lineSize];
//  printf("%X %X\n", input, vals); // note this one

    for (uint i=0; i<lineSize; i+=8)
    {
        __m128i vecinput = _mm_loadu_si128((__m128i*) &input[i]);
        __m128i vecvals = _mm_loadu_si128((__m128i*) &vals[i]);

        __m128i output = _mm_subs_epu16(vecinput, vecvals);
        print(output);
        printf("===\n");
    }

    return 0;
} 
```

在发布模式下生成的程序集：

```
; 20   :    const int lineSize = 912;
; 21   :    ushort input[lineSize];
; 22   :    ushort vals[lineSize];

; without printf
; 23   : // printf("%X %X\n", input, vals);
; with printf
; 23   :    printf("%X %X\n", input, vals);

    lea r8, QWORD PTR vals$[rsp]
    lea rdx, QWORD PTR input$[rsp]
    lea rcx, OFFSET FLAT:??_C@_06NBKGFLKK@?$CFX?5?$CFX?6?$AA@
    call    QWORD PTR __imp_printf

; 24   : 
; 25   :    for (uint i=0; i<lineSize; i+=8)

    xor esi, esi
    lea ebp, QWORD PTR [rsi+114]
    npad    2
$LL3@wmain:

; 26   :    {
; 27   :        __m128i vecinput = _mm_loadu_si128((__m128i*) &input[i]);

    movdqu  xmm1, XMMWORD PTR input$[rsp+rsi]

; 28   :        __m128i vecvals = _mm_loadu_si128((__m128i*) &vals[i]);

; without printf
    movdqu  xmm0, xmm1
; with printf
    movdqu  xmm0, XMMWORD PTR vals$[rsp+rsi]

; 29   : 
; 30   :        __m128i output = _mm_subs_epu16(vecinput, vecvals);

; without printf
    psubusw xmm1, xmm1
; with printf
    psubusw xmm1, xmm0

; 15   :    printf("[%d %d  %d  %d  %d  %d  %d  %d]\n", arr[0], arr[1], arr[2], arr[3], arr[4], arr[5], arr[6], arr[7]);

    pextrw  ax, xmm1, 7
    movzx   edi, ax
    pextrw  ax, xmm1, 6
    movzx   ebx, ax
    pextrw  ax, xmm1, 5
    mov DWORD PTR [rsp+64], edi
    movzx   r11d, ax
    pextrw  ax, xmm1, 4
    mov DWORD PTR [rsp+56], ebx
    movzx   r10d, ax
    pextrw  ax, xmm1, 3
    mov DWORD PTR [rsp+48], r11d
    movzx   ecx, ax
    pextrw  ax, xmm1, 2
    mov DWORD PTR [rsp+40], r10d
    movzx   r9d, ax
    pextrw  ax, xmm1, 1
    mov DWORD PTR [rsp+32], ecx
    movzx   r8d, ax
    lea rcx, OFFSET FLAT:??_C@_0BL@ONEMJFJK@?$FL?$CFd?7?$CFd?7?$CFd?7?$CFd?7?$CFd?7?$CFd?7?$CFd?7?$CFd?$FN?6?$AA@
    movd    eax, xmm1
    movzx   edx, ax
    call    QWORD PTR __imp_printf

; 31   :        print(output);
; 32   :        printf("===\n");

    lea rcx, OFFSET FLAT:??_C@_04LEHBMKOA@?$DN?$DN?$DN?6?$AA@
    call    QWORD PTR __imp_printf
    lea rsi, QWORD PTR [rsi+16]
    dec rbp
    jne $LL3@wmain

; 33   :    }
; 34   : 
; 35   :    return 0;

    xor eax, eax

; 95   : }

    mov rcx, QWORD PTR __$ArrayPad$[rsp]
    xor rcx, rsp
    call    __security_check_cookie
    lea r11, QWORD PTR [rsp+1920]
    mov rbx, QWORD PTR [r11+16]
    mov rbp, QWORD PTR [r11+24]
    mov rsi, QWORD PTR [r11+32]
    mov rsp, r11
    pop rdi
    ret 0
wmain   ENDP 
```

因此 vals 被错误地视为与输入相同，结果将始终为 0。有趣的是 xmm0 由于错误的优化而不再使用，但仍未被丢弃。如果您取消注释 printf 生成的代码是正确的。

所以问题是，我的代码有什么问题吗？对我来说，它看起来完全像是优化器中的一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:59:41.180

您永远不会初始化数组`ushort input[lineSize]`and `ushort vals[lineSize]`，因此优化器恰好将它们视为相同，这对于未定义的行为很好。

当您`printf("%X %X\n", input, vals)`在那里进行调用时，您将数组的地址传递给外部函数，因此优化器有理由相信它们指向的内存可能会被该外部函数更新。

# iis-7 - 如何为 Sitecore 媒体库启用 IIS7 失败请求跟踪？

> ID：14600414
> 
> 赞同：0
> 
> 时间：2013-01-30T09:20:42.463
> 
> 标签：iis-7, sitecore, sitecore6

我想为 Sitecore 媒体库中的一组媒体项启用失败请求跟踪。我最初尝试通过使用规则的自定义设置来做到这一点，这样我就可以使用路径：

```
~/media/mystuff/* 
```

不幸的是，请求跟踪不允许在路径中使用 tilda ~ 并且只允许使用单个通配符 *。路径也必须相对于目录。tilda 是路径的必要部分，我想跟踪 mystuff 文件夹中的所有内容。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T11:57:48.290

您可以更改适用于媒体库 url 的媒体前缀 sitecore。它存储在`web.config`设置中`Media.MediaLinkPrefix`- 我们已将其更改为破折号：

```
<setting name="Media.MediaLinkPrefix" value="-/media" /> 
```

评论中有一条`web.config`关于在该部分中添加相应条目的注释`<customHandlers>`：

```
<handler trigger="-/media/" handler="sitecore_media.ashx" /> 
```

要完成图片，请添加 url 重写以映射`~`到`-`，因此任何索引媒体仍然有效。

# java - 替换（不更改）对象时Java自动更新所有引用？

> ID：14600415
> 
> 赞同：2
> 
> 时间：2013-01-30T09:20:50.473
> 
> 标签：java, reference, undo, deep-copy, redo

所以我有一个我自己类的对象的 ArrayList：

```
public class A
{...} 
```

现在说我有一个变量来保存列表中的这些对象之一。现在我知道如果我更改该对象（例如在该对象上设置一个字段），这会更改保存对象本身的内存，因此两个引用（保存列表中对象的变量和内部数组变量）仍然相同，并且两者仍然显示给相同的，现在修改的对象。正常行为！

但我也希望当我替换变量指向的列表中的对象时也是如此。那是我做的时候

```
myList.set(theObjectPosition, newInstanceOfA); 
```

...在这种情况下，我还希望我的变量自动引用这个新实例。实现这种行为的最简单方法是什么？

这就是为什么我需要这个：

简而言之，我有一组类可以处理对 ArrayList 所做的更改的撤消/重做（我没有扩展，这无论如何都不能解决问题？）。这些类被称为

```
UndoAction, Add, Remove, Modify (the latter 3 inherit from UndoAction) 
```

所有类都有方法 undo() 和 redo()。

描述示例（如果需要，代码在最后）：

假设我想将一个项目添加到列表中：我执行 new Add(myObject)，然后我想修改列表中的项目，因此我执行 new Modify(myObject)，之后它创建对象状态的 DeepCopy 作为备份，然后我更改对象本身（在完成对 new Modify(..) 的调用之后）。然后我在 Modify 对象上执行 undo() 所以它确实 list.set(somePos, previousDeepCopy) （因此这篇文章，从本质上讲，deepcopy 是一个新的实例，它把事情搞砸了！！！）....

所以你可以想象这个 list.set 会带来一些问题。对被替换对象的任何引用都将消失。因此，如果它总是替换对这样的对象的引用，我将无法有效地使用这样的列表，因此我的撤消管理器注定会以这种方式失败。

那么我该如何应对这些设计缺陷呢？欢迎任何建议。

* * *

一些代码：

```
 protected abstract class UndoAction {
    protected HashSet<Integer> ids = new HashSet<Integer>();
    protected Marker marker;

    public UndoAction(List<E> l) {
      for (E e : l) {
        if (!entities.contains(e)) {
          entities.add(e);
          trace.append(entities.indexOf(e), new Stack<UndoAction>());
        }
        ids.add(entities.indexOf(e));
      }
    }

    public boolean sameAffectedTargets(UndoAction undoAction) {
      if (this.ids.containsAll(undoAction.ids) && undoAction.ids.containsAll(this.ids))
        return true;
      return false;
    }

    public Marker getMarker() {
      return new Marker(this);
    }

    public void firstRun() {
    }

    public void undo() {
    }

    public void redo() {
    }

    protected List<Data> getCopyEntities() {
      List<Data> l = new ArrayList<Data>();
      for (Integer id : ids) {
        E e = entities.get(id);
        int pos = adapterList.indexOf(e);
        l.add(new Data(id, pos, e));
      }
      return l;
    }

    protected List<Data> getDeepCopyEntities() {
      List<Data> l = new ArrayList<Data>();
      for (Integer id : ids) {
        E e = DeepCopy.copy(entities.get(id));
        int pos = adapterList.indexOf(entities.get(id));
        l.add(new Data(id, pos, e));
      }
      return l;
    }

    public void addEntities(List<Data> datas) {
      for (Data d : datas)
        d.addEntity();
    }

    public void setEntities(List<Data> datas) {
      for (Data d : datas)
        d.setEntity();
    }

    public void removeEntities(List<Data> datas) {
      for (Data d : datas)
        d.removeEntity();
    }

    protected class Data {
      public int id;
      public int pos;
      public E entity;

      public void addEntity() {
        entities.set(this.id, this.entity);
        adapterList.add(this.pos, this.entity);
      }

      public void setEntity() {
        entities.set(this.id, this.entity);
        E oldEntity = adapterList.get(this.pos);
        adapterList.set(this.pos, this.entity);
        notifyEntityReplaced(oldEntity, adapterList.get(this.pos), this.pos);
      }

      public void removeEntity() {
        entities.set(this.id, null);
        adapterList.remove(this.entity);
      }

      public Data(int id, int pos, E entity) {
        this.id = id;
        this.pos = pos;
        this.entity = entity;
      }
    }
  }

  protected class Add extends UndoAction {
    protected List<Data> addBackup;

    public Add(List<E> l) {
      super(l);
    }

    @Override
    public void undo() {
      super.undo();
      addBackup = getCopyEntities();
      removeEntities(addBackup);
    }

    @Override
    public void firstRun() {
      super.firstRun();
      adapterList.addAll(entities);
    }

    @Override
    public void redo() {
      super.redo();
      addEntities(addBackup);
    }
  }

  // call before modifying
  protected class Modify extends UndoAction {
    protected List<Data> beforeDeepCopies;
    protected List<Data> afterDeepCopies;

    public Modify(List<E> l) {
      super(l);
    }

    @Override
    public void undo() {
      super.undo();
      if (!skipModifying) {
        if (afterDeepCopies == null)
          afterDeepCopies = getDeepCopyEntities();
        setEntities(beforeDeepCopies);
      }
    }

    @Override
    public void firstRun() {
      super.firstRun();
      if (!skipModifying) // TODO
        beforeDeepCopies = getDeepCopyEntities();
    }

    @Override
    public void redo() {
      super.redo();
      if (!skipModifying)
        setEntities(afterDeepCopies);
    }
  }

  protected class Remove extends UndoAction {
    protected List<Data> removeBackup;

    public Remove(List<E> l) {
      super(l);
    }

    public List<E> getRemoved() {
      List<E> l = new ArrayList<E>();
      for (Data data : removeBackup)
        l.add(data.entity);
      return l;
    }

    @Override
    public void undo() {
      super.undo();
      addEntities(removeBackup);
    }

    @Override
    public void firstRun() {
      super.firstRun();
      removeBackup = getCopyEntities();
    }

    @Override
    public void redo() {
      super.redo();
      removeEntities(removeBackup);
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:28:26.780

如果 Java( `ClassName`) 中的对象引用类似于 C 指针( `ClassName*`)，那么您似乎想要 C 指针指向指针( `ClassName**`) 之类的行为。

一种明显的方法是创建 Holder 类，其唯一目的是保存对您的类的引用。这样您就可以更改对对象本身的引用，并且只要所有人都持有对 Holder 的引用，它们现在也将指向新的替换对象。

```
public class AHolder{
    public A aRef; // or private with getter setter.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:31:58.983

我认为您需要额外的间接层。而不是让其他代码引用“A”，您可能希望它引用“Stack<A>”，并使用“peek()”来引用当前值（当您更改数组中的值时，您将可能想要“推送（）”新值）。

然而，为了代码的简洁，你可以通过将“A”变成一个接口并创建一个“A”的实现（我们称之为“DelegatingStackAImpl”）来使其更简洁，它将提供与“A”相同的接口除了支持“push()”和“pop()”并将调用转发到当前位于堆栈顶部的任何实例。因此，您不会破坏“A”的现有用途，同时仍支持这一额外的间接层。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T09:27:42.417

最简单的方法是确保您的类是“可变的”，也就是说，您可以使用新对象之一更改内部状态。

```
myOldObject.replaceValues(myNewObject); 
```

如果对象本身由于某种原因不能做到可变，只需围绕它构建一个包装器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T09:45:27.697

如果您要替换的对象仅通过其接口引用，那么您可以首先使用[JDK 动态代理](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html)，它将委托给实际的实现。要更改实际实现，您需要修改代理调用处理程序。

# javascript - Highcharts：解析多变量 JSON 数据

> ID：14600422
> 
> 赞同：1
> 
> 时间：2013-01-30T09:21:38.247
> 
> 标签：javascript, json, highcharts

我正在尝试使用 json 数据制作一个类似于此演示中的 highcharts 图表：[http](http://www.highcharts.com/demo/column-basic) ://www.highcharts.com/demo/column-basic ，但我看不出如何在明智的情况下解析我的 json 数据. 我的数据按工作日分组，分为三类。下面是一个例子：

```
{ "Monday": { "inv": 1126, "oppm": 276, "perc": "24.51" }, "Tuesday": { "inv": 1072, "oppm": 273, "perc": "25.47" }, "Wednesday": { "inv": 1032, "oppm": 271, "perc": "26.26" }, "Thursday": { "inv": 989, "oppm": 259, "perc": "26.19" }, "Friday": { "inv": 937, "oppm": 240, "perc": "25.61" } } 
```

有没有办法在一个简单的问题上做到这一点？如果我改变我的 json 数据结构会有帮助吗？

提前致谢！

**编辑：解决方案：**

我找到了一种不太复杂的方法，尽管我相信如果你知道你的 JS，它可以更容易地完成。无论如何，此解决方案与我的 JSON 数据配合得很好：

```
//Convert received AJAX data
success: function(data)
{                       
    cleanData = $.parseJSON(data);

    //Make some empty arrays for the categories and data
    days = Array();
    inv = Array();
    oppm = Array();
    perc = Array();

    //Iterate the data and fill in the new arrays
    $.each(cleanData, function(index, value) {
        days.push(index);
        inv.push(parseFloat(value['inv']));
        oppm.push(parseFloat(value['oppm']));
        perc.push(parseFloat(value['perc']));
    });

    //Use the new arrays in the chart
    chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'div_chart',
            type: 'column'
        },
        xAxis:{
            categories: days,
            title: {
                text: 'Week day'
            }
        },
        series: [{
                name: 'Invited',
                data: inv
            }, {
                name: 'Met',
                data: oppm
            }, {
                name: '%',
                data: perc
            }],
   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:51:03.680

您可以在此处在 jsfiddle 中编辑该示例：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-basic/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-basic/)

在查看了它的格式以及如何将数据添加到脚本之后，似乎可以使用几个 for 循环，但我认为您需要稍微更改 JSON 格式。

这是我的做法（伪代码）：

```
var json = [
    {
        "day":"monday",
        "inv": 1126, 
        "oppm": 276, 
        "perc": "24.51"

    },
    {
         "day":"Tuesday",
         "inv": 1072, 
         "oppm": 273, 
         "perc": "25.47" 
    }
]; 
```

然后通过循环并获取所有天数，在 highcharts 调用中设置“类别”选项：

```
var myCategories;
var idx=0;
for (var key in json) {
    myCategories[idx]=json[key]['day'];
    idx++;
} 
```

然后在 highcharts 配置中：

```
 xAxis: {
            categories: myCategories
        }, 
```

然后你需要做的就是再次在 highchars 'series' 调用中设置你的数据点，这将涉及更多一点，但同样的想法。

希望这可以帮助

# javascript - Opera 和 safari 中的 Navigation Timing API 实现

> ID：14600423
> 
> 赞同：4
> 
> 时间：2013-01-30T09:21:40.910
> 
> 标签：javascript, google-chrome, browser, opera, navigation-timing-api

我必须捕获有关其导航的客户端数据，即我的页面的响应时间和导航计时 API 中的其他数据参数，但我只能为 firefox 和 chrome 做到这一点。所以任何人都可以告诉我如何在 Safari 和 Opera 上获取这些内容，或者可以实现的一些替代机制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T13:32:51.930

对于不支持 Navigation Timing API 的浏览器，有[Boomerang 开源项目](https://github.com/lognormal/boomerang)。这最初是几年前的[雅虎项目](https://github.com/yahoo/boomerang)，但现在似乎由[他离开雅虎后](http://www.lognormal.com/boomerang)的同一个人维护。

可能还有其他提供类似功能的，但这个似乎在几年内拥有很多用户并且正在积极维护。

由于这是一个相当古老的问题，也许您还可以向我们更新您从那时起发现的任何其他信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T16:58:04.940

这是一个来自 w3c 规范的人员之一的 polyfill： http: [//nicj.net/usertiming-js/](http://nicj.net/usertiming-js/)

# web-applications - 为什么我还需要服务？只有模型的架构？

> ID：14600425
> 
> 赞同：0
> 
> 时间：2013-01-30T09:21:41.657
> 
> 标签：web-applications, architecture, webserver

我正在构建一个使用 qooxdoo 应用程序作为前端的应用程序，该应用程序使用 javascript 在浏览器中完成所有渲染工作。这个客户端应用程序只像这样调用服务器：“get me all the workers”，服务器端返回一个包含所有 json 格式的 worker 的列表。

现在它是这样工作的：

1.  客户端向服务器发出请求
2.  服务器调用服务“workers/get”
3.  服务调用模型：`Worker.findAll()`例如；
4.  服务器将列表返回给客户端。

现在，由于我已经将所有逻辑从服务转移到模型，我问自己服务在做什么？他们什么都不做，我正在考虑摆脱他们，所以新的流程是：

1.  客户端向服务器发出请求
2.  服务器调用模型“Worker.findAll()”上的方法
3.  服务器将列表返回给客户端。

就这些，你怎么看，我以后可能有问题？谢谢 （：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:39:48.190

服务做最重要的事情 协调

*   模型需要表示业务对象但不实现逻辑
*   编排模型的逻辑需要由业务服务处理
*   您的 MiddleWare 或 WebLayer 服务将与业务服务以及 ValueObjects/RequestObjects 进行交互——因此，它们提供了一个外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:40:34.697

用这么少的信息不可能给出具体的架构建议。

话虽如此，我仍然可以给你一些建议：

不要仅仅为了拥有它而添加图层。仅当在您的上下文中有意义并增加任何实际好处时，才在您的应用程序中添加特定层。

# file - 如何从 Web 下载大型（>1Gb）视频文件并将其保存到 Windows Phone 8 中？

> ID：14600426
> 
> 赞同：1
> 
> 时间：2013-01-30T09:21:42.953
> 
> 标签：file, http, download, windows-phone-8

我正在 windows phone 8 上创建一个应用程序，它需要从 dropbox、skydrive 等下载大型视频文件（> 1GB 或 2 GB），并将它们保存到 windows phone 音乐和视频文件夹中。

所以我的问题是：

1.  如何将大文件下载成块，以避免内存不足异常。
2.  现在我可以将较小的视频文件保存到相机胶卷文件夹中。如何将视频文件保存到 Windows 音乐视频文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:39:29.767

1.  假设服务器支持它，您可以使用 HTTP`Range`标头指定服务器应返回文件的哪些字节以响应请求。
    然后，您发出多个请求以获取文件，然后将它们全部重新组合到设备上。

2.  SDK 目前不支持将视频保存到设备库中的方法。您可以做的最接近的事情是将文件保存在应用程序的 IsolatedStorage 中，然后将项目添加到库中的新列表中（通过[`WriteAcquiredItem`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769558%28v=vs.105%29.aspx)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:45:12.687

从来不需要这样做，所以请原谅我的回答的准确性

我建议您尝试接触底层流。如果是网络请求，请尝试插入响应流。接下来，打开流（到 isostore 中的文件）并附加到它。

我只使用 LiveConnect 上传.. 从不下载，但是检查 live connect / rest api 以查看您是否可以轻松发出网络请求。

看看这篇 SO post [How to split a large file into chunks in c#?](https://stackoverflow.com/questions/5659189/how-to-split-a-large-file-into-chunks-in-c)

# asp.net - 少数用户无法访问我的 Intranet 网站

> ID：14600427
> 
> 赞同：0
> 
> 时间：2013-01-30T09:21:45.667
> 
> 标签：asp.net, active-directory, iis-6

我有一个托管网站的内部 IIS 6 服务器。我将站点设置为集成 Windows 身份验证，它工作正常。最近发布后的问题是5台windows机器无法访问该网站。来自不同地区的其他用户可以照常访问它。

当我使用 Fiddler 查看发生了什么时，网站一直在加载，fiddler 显示 401.1 和 401.2 错误。它说用户名密码错误。据我所知，IE 中的所有设置都与其他 40 或 50 台运行良好的机器相同。有没有人遇到过这样的事情？

# jquery - addClass 仅在 .click 函数中有效？

> ID：14600429
> 
> 赞同：0
> 
> 时间：2013-01-30T09:21:48.717
> 
> 标签：jquery, addclass

我正在尝试在单击元素时添加类，然后我想使用该类元素来执行某些操作（例如警报）

但是当我在 click 函数之外使用新类时，它看起来不起作用，这里：

```
<script type="text/javascript">
    $(document).ready(function(){                      
        $(".notactive").click(function() {  
            $(this).addClass("active");      
        });

        $(".active").hover(function(){
            alert("Hello");
        }); 
    }); 
</script> 
```

现在，如果我把它放在 click 函数中，它就可以工作了，在这里：

```
<script type="text/javascript">
    $(document).ready(function(){             
        $(".notactive").click(function() {  
            $(this).addClass("active");
            $(".active").hover(function(){
                alert("Hello");
            });           
        });
    });
</script> 
```

函数外如何使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T09:23:38.927

您需要使用[on](http://api.jquery.com/on/)将事件注册到应该满足 document.ready 之后绑定事件的选择器标准的元素，因为您在 document.ready 之后添加类并在 document.ready 上绑定事件。在 document.ready 上，该事件将绑定到 DOM 中具有活动类的元素。

```
$(document).ready(function(){

     $(".notactive").click(function() {  
          $(this).addClass("active");      
     });

     $(document).on("mouseover mouseout", ".active", function(){
          alert("rwgweg");
     }); 
}); 
```

# php - 如何在 php 中制作 Solr 多个 dataimporthandler 调度程序

> ID：14600431
> 
> 赞同：3
> 
> 时间：2013-01-30T09:21:55.370
> 
> 标签：php, solr, dataimporthandler

如何在 PHP 中制作 Solr 多个 dataimporthandler 调度程序？

我在 solrconfig.xml 中有多个数据导入

我想制作一个 php 脚本，它将通过运行如下所示的 url 来一一创建索引...

```
/solr/dataimport1?command=full-import
/solr/dataimport2?command=full-import&clean=false
/solr/dataimport3?command=full-import&clean=false 
```

第二个 url 将等到第一个 url 索引未成功完成，或者如果在处理过程中发生某些异常。并且不会丰富到最大执行时间说 230。

请问有人可以帮我写剧本吗？或任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T06:50:36.620

如果您只想通过 DIH 索引数据，可以直接从 php 向 Solr 进行 http 调用。
请注意，上述 url 是异步的，因此您会立即收到响应并需要检查状态 url 以检查索引是否成功完成或遇到问题。

此外，您可以查看 Solr Php Clients

这里有一篇[很好的文章](http://www.ibm.com/developerworks/opensource/library/os-php-apachesolr/)可以帮助您完成 PHP 和 SOLR 的集成：

和[Solr PHP 客户端](http://code.google.com/p/solr-php-client/)

# ruby - 不使用 IRB 时自动评估 Ruby 中的最后一个表达式

> ID：14600439
> 
> 赞同：2
> 
> 时间：2013-01-30T09:22:14.407
> 
> 标签：ruby, debugging, ide

我正在试验 ruby​​ 并遵循一些非常适合学习的教程。使用 IRB 提示时，最后一个表达式总是以这种方式计算：

```
"hello"
=> "hello" 
```

棒极了！现在，我如何在运行 .rb 脚本时完成同样的事情？我承认评估脚本中的每一行可能有点奇怪，但在学习时它很棒。所以 - 无法在其他 IDE（或从命令提示符调用 .rb 脚本）中通过集成控制台/终端重现此行为。我试过 Aptana、jEdit、RubyMine。

我已经阅读了很多关于可以设置的不同常量的信息，例如 $DEBUG、$VERBOSE 和使用一些参数调用 ruby​​.exe，但我似乎在任何地方都没有得到正确的结果。

使用像 PowerShell_ISE 这样的编辑器会很棒，它的强大之处在于其易于使用和运行脚本的简单性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:38:16.560

1.  确定要在终端中键入的命令名称以执行脚本（假设是`test_ruby`）。
2.  确定在编写临时代码时始终使用的文件名（假设是`test_ruby_file`）。
3.  编写一个名为的文件`test_ruby`，内容如下：

    ```
    #!/usr/bin/env ruby

    File.open("path_to_test_ruby_file/test_ruby_file"){|io| p eval(io.read)} 
    ```

4.  给出`test_ruby`可执行状态。

5.  在 中写一些东西`test_ruby_file`。
6.  在终端中，键入`test_ruby`。

# java - c3p0 没有打开足够的连接

> ID：14600442
> 
> 赞同：2
> 
> 时间：2013-01-30T09:22:18.617
> 
> 标签：java, mysql, hibernate, jdbc, c3p0

我正在使用 Hibernate 3.4.0 GA 和 c3p0 0.9.0.4

maxPoolSize 属性设置为 2000，但创建的最大 JDBC 连接数约为 100、110（即使程序需要更多连接）。

这是我的配置：
`<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
<property name="driverClass" value="com.mysql.jdbc.Driver" />
<property name="jdbcUrl" value="${jdbc.url}" />
<property name="user" value="${jdbc.username}" />
<property name="password" value="${jdbc.password}" />
<property name="maxPoolSize" value="2000"/>
<property name="initialPoolSize" value="50"/>
<property name="minPoolSize" value="50"/>
<property name="acquireIncrement" value="3"/>
<property name="maxIdleTime" value="60"/>
</bean>`

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:26:09.233

数据库服务器端的连接数也受到限制。据我记得，MySQL 默认的最大连接数是 100。

有关 MySQL，另请参见[http://www.electrictoolbox.com/update-max-connections-mysql/](http://www.electrictoolbox.com/update-max-connections-mysql/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:30:56.287

我相信您需要在 Hibernate 配置中设置连接池参数，因为 c3p0.properties 中的那些特定参数将被 Hibernate 覆盖。

尝试将以下内容添加到您的 Hibernate 属性配置中：

```
<property name="c3p0.acquire_increment">3</property>  
<property name="c3p0.max_size">2000</property> 
<property name="c3p0.min_size">50</property> 
```

您可以参考以下链接了解更多信息：[https ://community.jboss.org/wiki/HowToConfigureTheC3P0ConnectionPool](https://community.jboss.org/wiki/HowToConfigureTheC3P0ConnectionPool)

# symfony - 在 Symfony2 中使用 Collection 与关系

> ID：14600444
> 
> 赞同：0
> 
> 时间：2013-01-30T09:22:29.610
> 
> 标签：symfony, doctrine-orm

调用关系字段时是否可以使用表单类型的集合？

这就是我想要做的事情：

我在候选人实体和地区实体之间有关系，候选人可以属于多个地区。

我以这种方式设置表单类型：

**候选人类型**

```
$builder
    ->add('name')
    ->add('district', 'collection', array('type'=>new districtsChoiceType())) 
```

**选区类型**

```
$builder
        ->add('candidate', 'entity', array(
                'class' => 'CMSElectionsBundle:districts',
                'query_builder' => function(EntityRepository $get) {
                    return $get->createQueryBuilder('p')->where('p.status = 1')->orderBy('p.id', 'ASC');
                }, 'property' => 'name', 'label' => ' ')) 
```

所以我在这里面临两个问题：

1.  当我想创建一个新候选人时，地区字段显示为空/
2.  当我尝试编辑现有候选人时，我收到以下错误：

    ```
    Expected argument of type "array or (\Traversable and \ArrayAccess)", "Proxies\__CG__\CMS\ElectionsBundle\Entity\districts" given 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:31:39.933

我会为候选类型执行此操作：

```
$builder            
    ->add('districts', 'entity', array(
                'label' => 'Districts',
                'class' => 'CMSElectionsBundle:District',
                'query_builder' => function(\CMS\ElectionsBundle\Entity\DistrictRepository $er) {
                    return $er->createQueryBuilder('a')
                        ;
                },
                'property' => 'choose one property from district',
                'expanded' => true,
                'multiple' => true,
                'required' => true,
            )) 
```

您能否向我们展示您用于在两个实体中创建关系的代码？

# three.js - three.js中不能改变一个粒子的材质贴图

> ID：14600462
> 
> 赞同：0
> 
> 时间：2013-01-30T09:23:53.293
> 
> 标签：three.js

我使用 THREE.Particle() 创建了很多粒子。我的粒子是星星。

我只希望其中一个稍微动画，就像星星一样。

我正在尝试做：

`var oneParticle = scene.children[ Math.floor(Math.random() * (500 + 1))]; oneParticle.material.map = generateSprite();`

generateSprite() 是一个返回有效画布的函数。

问题是 generateSprite() 被应用于每个粒子，而不是唯一的一个。

我意识到我必须使用另一种材料来实现它，但这意味着我应该为每个动画明星创建一个材料，这并不酷。

我是 three.js 的新手，我假设必须有一种简单、友好的方法来用动画只改变一个粒子的纹理，但不明白怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:47:00.817

也许您可以为一颗独特的恒星使用另一种粒子系统（因此，另一种材料）。我不认为你可以有多个。这样，其他粒子仍然可以有效地渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:56:48.857

我已经意识到如何自己解决我的问题。需要时会留在这里。

首先，我正在为粒子“运行时”创建材料：

```
while(particleCount--) {
    var material = new THREE.ParticleBasicMaterial({ 
        map: new THREE.Texture( generateSprite() ), 
    });

    var particle = new THREE.Particle( material );
} 
```

generateSprite() 给我一个画布。是的，我知道它会降低性能，但在我的情况下，我有 500 个粒子。这不是太多，我想。

我写了一个函数，它抓取随机粒子并改变它的上下文：

```
function transformParticle() {
    var oneParticle = scene.children[ Math.floor(Math.random() * (500 + 1))];
    var ctx = oneParticle.material.map.image.getContext('2d');

    // ctx change code here
}; 
```

然后我只是在 requestAnimationFrame 中调用这个函数，它就可以工作了——只改变一个粒子的纹理而不创建独特的材料等。

而且我认为，使用 .getChildByName 可能是一个更好的主意，但找不到任何证据。

# java - 如何使用 Java Regex 丢弃 CSV 文件的某些部分

> ID：14600464
> 
> 赞同：4
> 
> 时间：2013-01-30T09:24:06.583
> 
> 标签：java, regex

我有这种 CSV 文件，我必须用 Java 解析。

```
2012-11-01 00,  1106,   2194.1971066908
2012-11-01 01,  760,    1271.8460526316
.
.
.
2012-11-30 21,  1353,   1464.0014781966
2012-11-30 22,  1810,   1338.8331491713
2012-11-30 23,  1537,   1222.7826935589

720 rows selected.      

Elapsed: 00:37:00.23 
```

这是我创建的 Java 代码，用于分隔每一列并将其存储在列表中。

```
public void extractFile(String fileName){
        try{
            BufferedReader bf = new BufferedReader(new FileReader(fileName));
            try {
                String readBuff = bf.readLine();

                while (readBuff!=null){

                    Pattern checkData = Pattern.compile("[a-zA-Z]");
                    Matcher match = checkData.matcher(readBuff);

                    if (match.find()){
                        readBuff = null;
                    }

                    else if (!match.find()){

                        String[] splitReadBuffByComma = new String[3];
                        splitReadBuffByComma = readBuff.split(",");

                            for (int x=0; x<splitReadBuffByComma.length; x++){

                                if (x==0){
                                    dHourList.add(splitReadBuffByComma[x]);
                                }
                                else if (x==1){
                                    throughputList.add(splitReadBuffByComma[x]);
                                }
                                else if (x==2){
                                    avgRespTimeList.add(splitReadBuffByComma[x]);
                                }
                            }
                    }

                    readBuff = bf.readLine();
                }
            }
            finally{
                bf.close();
            }
        }
        catch(FileNotFoundException e){
            System.out.println("File not found dude: "+ e);
        }
        catch(IOException e){
            System.out.println("Error Exception dude: "+e);
        }
    } 
```

问题是我创建的正则表达式有点错误，因为它仍然包含文本“选择了 720 行”并将它们存储在 dHourList 中。
dHourList 应该只存储像这样表示的日期列 "2012-11-01 00...etc"
throughputList = "1106, 760 ...etc"
avgResponseTime = "2194.192, 1271.846...etc"

正确的 reg 表达式应该是什么？

# 更新

2012-11-30 21 2012-11-30 22 2012-11-30 23

选择了 720 行。

经过：00:37:00.23

日期小时大小：724 吞吐量大小：720 平均响应时间大小：720

我在 checkData 正则表达式中使用了这个，因为如果我使用一个斜杠 \d 编译会说无效的转义序列

```
Pattern checkData = Pattern.compile("^(19|20)\\d\\d([-/.])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])\b.+$"); 
```

但它仍然显示选择了 720 行和另一行不应该在那里。

# 更新 2

工作代码：

```
while (readBuff!=null){

                    Pattern checkData = Pattern.compile("^(19|20)\\d\\d([-/.])(0[1-9]|1[012])\\2(0[1-9]|[12][0-9]|3[01])\\b.+$");

                    Matcher match = checkData.matcher(readBuff);

                    if (!match.find()){
                        readBuff = null;
                    }

                    else{

                        String[] splitReadBuffByComma = new String[3];
                        splitReadBuffByComma = readBuff.split(",");

                            for (int x=0; x<splitReadBuffByComma.length; x++){

                                if (x==0){
                                    dHourList.add(splitReadBuffByComma[x]);
                                }
                                else if (x==1){
                                    throughputList.add(splitReadBuffByComma[x]);
                                }
                                else if (x==2){
                                    avgRespTimeList.add(splitReadBuffByComma[x]);
                                }
                            }
                    }

                    readBuff = bf.readLine();
                } 
```

我删除了 else if 条件并将其更改为 else 并使用 Cylian 建议的正则表达式现在我有输出

```
2012-11-30 21
2012-11-30 22
2012-11-30 23

Size of date-hour: 720 size of throughput: 720 size of avg resp time: 720 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:35:12.990

首先，在正则表达式`^`的开头插入 a 是有意义的。`checkData`然后表达式只会在行首而不是在整个字符串中查找，应该使其更快。

你可以让你的正则表达式以更多的日期格式开始，比如表达式（比如 4 个数字和一个破折号），就像在最后一行一样，行数之后永远不会有破折号。

也许是这样的：

`Pattern checkData = Pattern.compile("^\\d\\d\\d\\d-");`

如果您确定没有收到意外数据，这应该就足够了 - 如果您想确保即使您的 csv 数据格式不正确，您的程序也能正常工作，只需扩展正则表达式以捕获整行并`matches()`改用.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:39:23.137

**试试这个[你的代码，但有点修改]：**

```
public void extractFile(String fileName){
        try{
            BufferedReader bf = new BufferedReader(new FileReader(fileName));
            try {
                String readBuff = bf.readLine();

                while (readBuff!=null){

                    Pattern checkData = Pattern.compile("^(19|20)\\d\\d([-/.])(0[1-9]|1[012])\\2(0[1-9]|[12][0-9]|3[01])\\b.+$");
                    Matcher match = checkData.matcher(readBuff);

                    if (!match.find()){
                        readBuff = null;
                    }

                    else if (match.find()){

                        String[] splitReadBuffByComma = new String[3];
                        splitReadBuffByComma = readBuff.split(",");

                            for (int x=0; x<splitReadBuffByComma.length; x++){

                                if (x==0){
                                    dHourList.add(splitReadBuffByComma[x]);
                                }
                                else if (x==1){
                                    throughputList.add(splitReadBuffByComma[x]);
                                }
                                else if (x==2){
                                    avgRespTimeList.add(splitReadBuffByComma[x]);
                                }
                            }
                    }

                    readBuff = bf.readLine();
                }
            }
            finally{
                bf.close();
            }
        }
        catch(FileNotFoundException e){
            System.out.println("File not found dude: "+ e);
        }
        catch(IOException e){
            System.out.println("Error Exception dude: "+e);
        }
    } 
```

**正则表达式解剖**

```
# ^(19|20)\d\d([-/.])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])\b.+$
# 
# Options: ^ and $ match at line breaks
# 
# Assert position at the beginning of a line (at beginning of the string or after a line break character) «^»
# Match the regular expression below and capture its match into backreference number 1 «(19|20)»
#    Match either the regular expression below (attempting the next alternative only if this one fails) «19»
#       Match the characters “19” literally «19»
#    Or match regular expression number 2 below (the entire group fails if this one fails to match) «20»
#       Match the characters “20” literally «20»
# Match a single digit 0..9 «\d»
# Match a single digit 0..9 «\d»
# Match the regular expression below and capture its match into backreference number 2 «([-/.])»
#    Match a single character present in the list “-/.” «[-/.]»
# Match the regular expression below and capture its match into backreference number 3 «(0[1-9]|1[012])»
#    Match either the regular expression below (attempting the next alternative only if this one fails) «0[1-9]»
#       Match the character “0” literally «0»
#       Match a single character in the range between “1” and “9” «[1-9]»
#    Or match regular expression number 2 below (the entire group fails if this one fails to match) «1[012]»
#       Match the character “1” literally «1»
#       Match a single character present in the list “012” «[012]»
# Match the same text as most recently matched by capturing group number 2 «\2»
# Match the regular expression below and capture its match into backreference number 4 «(0[1-9]|[12][0-9]|3[01])»
#    Match either the regular expression below (attempting the next alternative only if this one fails) «0[1-9]»
#       Match the character “0” literally «0»
#       Match a single character in the range between “1” and “9” «[1-9]»
#    Or match regular expression number 2 below (attempting the next alternative only if this one fails) «[12][0-9]»
#       Match a single character present in the list “12” «[12]»
#       Match a single character in the range between “0” and “9” «[0-9]»
#    Or match regular expression number 3 below (the entire group fails if this one fails to match) «3[01]»
#       Match the character “3” literally «3»
#       Match a single character present in the list “01” «[01]»
# Assert position at a word boundary «\b»
# Match any single character that is not a line break character «.+»
#    Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
# Assert position at the end of a line (at the end of the string or before a line break character) «$» 
```

**更新**

据我了解，您的输入字符串包含许多以日期开头但不包含逗号的行。为此，将先前的模式更改为以下内容：

```
^(19|20)\d\d([-/.])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])\s+\d+,[^,]+,[^,]+$ 
```

或者*`escaped`*

```
^(19|20)\\d\\d([-/.])(0[1-9]|1[012])\\2(0[1-9]|[12][0-9]|3[01])\\s+\\d+,[^,]+,[^,]+$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T09:41:44.487

你不必用正则表达式来做。（***如果它显示为您的示例***）

你可以检查

*   如果该行包含逗号“ `,`”或

*   如果拆分数组的长度为 3 或

*   稍微改变一下while条件，如果行以“ `selected`.”结尾，则跳出。

# ip - 如何在 Linux 中 ping MAC 地址

> ID：14600466
> 
> 赞同：11
> 
> 时间：2013-01-30T09:24:07.340
> 
> 标签：ip, ping, mac-address, arp

我想 ping 一个已知的 MAC 地址，我尝试使用 nmap：

```
sudo nmap -sP 192.168.15.1/24 | grep  20:64:32:3F:B1:A9 
```

但在这种情况下，它 ping 所有 255 个 IP 地址（从 192.168.15.1 到 192.168.15.255）直到获得我的 MAC 地址，这需要很长时间，大约 4 秒！

有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T16:04:54.083

让它更快的唯一方法是测试mac地址是否已经在你的arp表中

```
#!/bin/bash

# extract ip from local arp table
ip=$(arp | grep 20:64:32:3F:B1:A9 | awk ' { print $1 } ')

# found an ip tied to the mac address?
if [ ! -z $ip ]; then

    # if found, do you want to ping it?
    ping $ip
else
    echo "Not found into local arp table. Trying another way..."

    # wanna try your nmap strategy?
    # sudo nmap -sP 192.168.15.1/24 | grep  20:64:32:3F:B1:A9
fi; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-19T22:01:29.477

您无法 ping MAC 地址。您只能 ping 一个 IP 地址，因此您要做的是找出属于某个 MAC 地址的 IP 地址并 ping 该 IP。ARP 用于查找具有特定 IP 地址的机器的 MAC 地址，但您不能真正反过来（技术上存在称为[反向 ARP](http://en.wikipedia.org/wiki/Reverse_Address_Resolution_Protocol)的协议，但在典型的操作系统中从未使用过）。找到 MAC 地址后，它会保存在 ARP 缓存中，因此您不必在几分钟内再次查找它，但这不是找到 MAC 地址的可靠方法，因为条目不会留在缓存长。你知道如何创建一个静态条目，但是如果你将 192.168.15.196 硬编码到那个 MAC 地址，你为什么不直接 ping 192.168.15.196 （这就是你的全部）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-15T14:18:58.820

nmap 有 -T 选项来加速这样的事情。-T 5 是最快的。

您也可以尝试 --min-parallelism 选项。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-04-18T17:40:49.877

将上述好的答案组合成一个脚本：（用法`macping aa:bb:cc:dd:ee:ff`：）

```
#!/bin/bash
network=192.168.1.1/24
if [ "$#" -ne 1 ]; then echo Usage example: $0 aa:bb:cc:dd:ee:ff; exit 2; fi;
nmap -sP -T4 $network >& /dev/null
ip=$(arp -n | grep $1 | awk ' { print $1 }')
ping $ip -n -q -c 2 -i 0.2 -w 1 >& /dev/null
if [ $? -eq 0 ]; then
    echo Device is online \($ip\)
else
    echo Device is offline
    exit 1
fi; 
```

扩展：通过mac地址维护网络设备列表，并显示每个设备的在线/离线状态。
用途包括：

*   监控您的服务器状态
*   检查您的互联网连接是否正常
*   检查特定设备是否已连接到您的 wifi
*   检查您的智能电视是否真的关闭了
*   ETC

每个设备名称在线时显示为绿色，离线时显示为红色。
设备状态更改时会显示桌面通知。

在 linux mint 下测试，应该可以在其他发行版上运行。

```
#!/bin/bash

#Create associated array's 
declare -A devicelist #device name: mac address
declare -A statuslist #device name: online status

devicelist[Server01]=aa:bb:cc:dd:ee:01
devicelist[Server02]=aa:bb:cc:dd:ee:02
devicelist[MyPhone] =aa:bb:cc:dd:ee:03
devicelist[SmartTV] =aa:bb:cc:dd:ee:04

#Colour Constants
BRed='\033[1;31m'  
BGreen='\033[1;32m' 
Reset='\033[m'

function mactoip(){
  echo $(arp -n | grep -i $mac | awk ' { print $1 }')
}

while [ true ]; do
    clear
    arp_cache_rebuilt=no
    for devicename in ${!devicelist[@]}; do
        status=OFFLINE
        mac=${devicelist[${devicename}]}
        ip=$( mactoip $mac )
        if [ -z $ip ] && [ $arp_cache_rebuilt = "no" ]; then
            #we need to rebuild the arp cache...
            nmap -sn -T4 192.168.1.0/24 >& /dev/null
            ip=$( mactoip $mac )
            arp_cache_rebuilt=yes
        fi;

        if [ ! -z $ip ]; then
            ping $ip -n -q -c 2 -i 0.2 -w 1 >& /dev/null
            if [ $? -eq 0 ]; then status=ONLINE; fi
        fi;
        #if device's previous status not yet recorded, then set it now.
        if [ ! ${statuslist[${devicename}]+_} ]; then statuslist[${devicename}]=$status; fi

        if [ $status = "ONLINE" ]; then colour=$BGreen; else colour=$BRed; fi;
        echo -e ${colour}${devicename}${Reset} - $ip
        if [ ${statuslist[${devicename}]} != $status ]; then
          notify-send -i ac-adapter -u critical -t 1000 $status "$devicename"
        fi;
        statuslist[$devicename]=$status
    done
    echo -
    sleep 5
done 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-04T23:12:04.873

这是另一个更简单的答案。

```
ping $(arp-scan --localnet | grep 80:1f:02:fa:90:b7  | awk ' { printf $1 } ') 
```

请注意，mac 地址必须使用小写字母。

arp-scan 似乎比 arp 运行得快得多。

# asp.net-mvc-3 - 在asp.net MVC3中将数据库中的数据显示到DropDownList中

> ID：14600467
> 
> 赞同：0
> 
> 时间：2013-01-30T09:24:08.707
> 
> 标签：asp.net-mvc-3, sql-server-2008, html-select

我正在尝试从数据库中获取字段数据并显示在下拉列表中。我没有得到正确的输出。我在下拉列表中获得模型类名称。

**型号**名称：SearchMDLNoModel

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;

namespace ApricaCRMEvent.Models.CRM.DatabaseEntities
{
    public class SearchMDLNoModel
    {
        [Display(Name = "Request For Id")]
        public string Request_For_Id { get; set; }
    }
} 
```

**数据层类**名：SearchMDLNoDL

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using ApricaCRMEvent.Models.CRM.DatabaseEntities;
using DataLayer;
using System.Data;

namespace ApricaCRMEvent.Models.CRM.DataLayer
{
    public class SearchMDLNoDL
    {
        public static List<SearchMDLNoModel> getAllMDLno() //all details of SQue
        {
            string proc = "SPGetMDLno";
            DataTable table = DataProvider.SelectStoreProcedure(proc);
            List<SearchMDLNoModel> ListMDLno = new List<SearchMDLNoModel>();

            foreach (DataRow row in table.Rows)
            {
                SearchMDLNoModel MDLno_Obj = new SearchMDLNoModel();
                MDLno_Obj.Request_For_Id = Convert.ToString(row["Request_For_Id"]);

                ListMDLno.Add(MDLno_Obj);
            }
            return ListMDLno;
        }

    }
} 
```

**控制器**名称：SearchMDLNoController

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using ApricaCRMEvent.Models.CRM.DataLayer;
using ApricaCRMEvent.Models.CRM.DatabaseEntities;

namespace ApricaCRMEvent.Controllers
{
    public class SearchMDLNoController : Controller
    {
        //
        // GET: /SearchMDLNo/

        public ActionResult Index()
        {

            ViewData["MDLno"] = new SelectList(SearchMDLNoDL.getAllMDLno(),"Request_For_Id");

            return View();

        }

    }
} 
```

**视图**名称：Index.aspx

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<ApricaCRMEvent.Models.CRM.DatabaseEntities.SearchMDLNoModel>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Index
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>Search by MDLNo</h2>
  <% using (Html.BeginForm()) { %>
  <%: Html.ValidationSummary(true, "Profile Updation was unsuccessful. Please correct the errors and try again.") %>
  Select MDLno 
  <%= Html.DropDownList("Request_For_Id", ViewData["MDLno"] as SelectList)%> 
  <input type="submit" value="search" name="SearchMDLNo" />  
  <% } %>
</asp:Content> 
```

我得到这样的输出..我想要那个特定领域的数据。

![在此处输入图像描述](../Images/6033fe8514244374d99de2fa7a82771d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:29:04.023

您使用了[错误的构造函数](http://msdn.microsoft.com/en-us/library/dd460123%28v=vs.108%29.aspx)，`SelectList`其中第二个参数是 `selectedValue`.

您可能需要[此构造函数](http://msdn.microsoft.com/en-us/library/dd505286%28v=vs.108%29.aspx)，您可以在其中指定`dataValueField`和`dataTextField`

所以你应该这样写`SelectList`：

```
ViewData["MDLno"] = 
 new SelectList(SearchMDLNoDL.getAllMDLno(), "Request_For_Id", "Request_For_Id"); 
```

# cuda - CUDA 能力和 CUDA 版本：兼容吗？

> ID：14600468
> 
> 赞同：6
> 
> 时间：2013-01-30T09:24:07.510
> 
> 标签：cuda, compute-capability

我有一台具有 1.1 计算能力 CUDA GPU 的机器。我想重新安装 CUDA，我想我会选择 5.0；

CUDA 功能和 CUDA 版本之间是否存在兼容性？将 CUDA 5.0 与 CC 1.1 一起使用会遇到麻烦吗？显卡？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T09:41:26.987

在撰写本文时，所有 CUDA 版本都向后兼容旧的 CUDA 兼容硬件。

因此，直到 6.5 版的 CUDA 工具包将与具有计算 1.1 功能的设备完美配合，尽管这些旧设备不支持工具包中存在的一些功能。然而，从那时起，新工具包中的旧硬件逐渐被弃用。截至 2019 年 6 月：

*   CUDA 7 中删除了对计算 1.x 功能设备的支持。
*   CUDA 9 中删除了对计算 2.x 功能设备的支持。

# node.js - 保护 Socket.io

> ID：14600472
> 
> 赞同：18
> 
> 时间：2013-01-30T09:24:25.433
> 
> 标签：node.js, authentication, ssl, websocket, socket.io

我正在使用基于 Node.js 的 https 服务器，该服务器使用 HTTP Basic 进行身份验证（这很好，因为数据是通过 SSL 加密连接发送的）。

现在我想提供一个 Socket.io 连接，它应该是

1.  加密和
2.  仅适用于经过身份验证的用户。

问题是如何做到这一点。我已经发现`{ secure: true }`在连接到套接字时需要在客户端 JavaScript 代码中指定，但是如何在服务器端强制套接字连接只能通过 SSL 运行，并且它仅适用于经过身份验证的用户？

我想 SSL 的事情是简单的部分，因为 Socket.io 服务器只绑定到 https 服务器，所以它应该只使用 SSL 运行，并且应该不可能在（另外）运行的 http 服务器上运行它， 对？

关于另一件事，我一点也不知道如何确保只有在用户使用 HTTP Basic 成功进行身份验证后才能建立套接字连接。

有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-30T13:38:33.080

**编辑：**当然 OP 在他们的其他答案中是正确的；更重要的是，使用 socket.io >1.0 你可以使用[socket.io-express-session](https://github.com/xpepermint/socket.io-express-session)。

原答案：

Socket.io 支持通过该`io.set('authorization', callback)`机制进行授权。请参阅相关文档：[授权](https://github.com/LearnBoost/socket.io/wiki/Authorizing)。这是一个简单的示例（使用基于 cookie 的会话和连接/快速会话存储进行身份验证——如果您需要其他内容，只需实现另一个“授权”处理程序）：

```
var utils = require('connect').utils;

// Set up a session store of some kind
var sessionId = 'some id';
var sessionStore = new MemoryStore();
// Make express app use the session store
app.use(express.session({store: sessionStore, key: sessionId});

io.configure(function () {
    io.set('authorization', function (handshakeData, callback) {
        var cookie = utils.parseCookie(handshakeData.headers.cookie);

        if(!(sessionId in cookie)) {
            return callback(null, false);
        }

        sessionStore.get(cookie[sessionId], function (err, session) {
            if(err) {
                return callback(err);
            }

            if(!('user' in session)) {
                return callback(null, false);
            }

            // This is an authenticated user!
            // Store the session on handshakeData, it will be available in connection handler
            handshakeData.session = session;

            callback(null, true);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-16T10:10:03.133

[虽然 Linus 的回答基本上是正确的，但我现在使用session.socket.io](https://github.com/wcamarao/session.socket.io)以更简单的方式解决了它——它基本上做同样的事情，但编写的自定义代码更少。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-13T08:03:24.527

1.  通过以下方式设置要保护的套接字：

    *   设置安全标志 - 正如您所写（{secure：true}）
    *   或者在创建服务器时使用 https 协议（而不是 http） - 这将自动将安全标志设置为 true
2.  简化身份验证过程的好库是：[https ://github.com/auth0/socketio-jwt](https://github.com/auth0/socketio-jwt)

# wcf - 如何在 WCF 服务应用程序中引用 SharePoint 程序集？

> ID：14600475
> 
> 赞同：0
> 
> 时间：2013-01-30T09:24:42.667
> 
> 标签：wcf, sharepoint, sharepoint-2010, wcf-data-services

当我引用 Microsoft.SharePoint.Administration 时，它会出错；WCF 服务应用程序中的 Microsoft.Office.Server dll。它没有识别添加的程序集。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:57:20.233

您的 WCF 服务是在哪个 .NET Framework 版本中编写的？SharePoint 2010 是使用 .NET FX 3.5 实现的，因此如果您的目标是相同的 FX 版本，则只能引用 SharePoint 程序集。

您的 WCF 服务还必须在 SharePoint 框上运行，无法在非 SharePoint 计算机上引用与 SharePoint 相关的程序集。

您的参考资料看起来如何？您必须从 SharePoint 根目录中的 ISAPI 文件夹中引用程序集（`Program Files\Common files\Microsoft Shared\Web Server Extensions\14\ISAPI\`默认情况下）

# java - Hibernate 多对多映射：添加条目不起作用

> ID：14600476
> 
> 赞同：0
> 
> 时间：2013-01-30T09:24:48.890
> 
> 标签：java, hibernate, many-to-many, transactional

你好，我在 Hibernate 中遇到了多对多映射的问题。

![多对多关系表](../Images/44b6051cdd1f678449c89b67a42a7721.png)

上面显示的表通过多对多映射连接。表 tbl_cp_group_relation 是具有 n:m 个连接的表。

在我的实体中，我通过多种方式解决了这个问题。我使用了多对多映射和多对一映射。在这两种方式中，它都起到了部分作用。我得到了一个充电点的组，我得到了一个组的充电点。但我永远无法将充电点添加到一个或多个充电点。如果我将充电点添加到程序运行的组中，并且组中还有更多充电点，直到我离开该功能。如果我尝试将组添加到充电点，我总是会收到重复密钥错误消息。

这是我的团体实体。

```
@Entity
@Table(name = "tbl_cp_group")
public class CpGroupEntity {
    ...    
    @OneToMany(cascade = CascadeType.ALL)
    @JoinTable(name = "tbl_cp_group_relation", joinColumns = { @JoinColumn(name = "cp_group_id") }, inverseJoinColumns = { @JoinColumn(name = "cp_id") })
    private List<ChargingPointEntity> cps = new ArrayList<ChargingPointEntity>();
    ...
} 
```

这是我的充电点实体。

```
@Entity
@Table(name = "tbl_charging_point")
public class ChargingPointEntity {
    ...    
    @OneToMany(cascade = CascadeType.ALL)
    @JoinTable(name = "tbl_cp_group_relation", joinColumns = { @JoinColumn(name = "cp_id") }, inverseJoinColumns = { @JoinColumn(name = "cp_group_id") })
    private List<CpGroupEntity> groups = new ArrayList<CpGroupEntity>();
    ...
} 
```

这是我的函数的代码

```
@Transactional
public void administrateGroupCP(GroupDiff diff, long groupId, String username) throws BadInputRoutingException, NoSuchGroupException,
        NotAuthorizedException, NoSuchChargingPointException {
    try {
        // Create add list
        List<Long> addList = diff.getAdd();

        // Get entities from database
        CpGroupEntity groupEntity = cpGroupDAO.getGroup(groupId);
        UserEntity userEntity = userDAO.getUser(username);

        // Add charging points
        addChargingPoints(addList, groupEntity, userEntity);

        // Remove charging points
        // removeChargingPoints(removeList, groupEntity, userEntity);

    } catch (EntityNotFoundException e) {
        throw new NoSuchGroupException();
    }

}

@Transactional
private void addChargingPoints(List<Long> addList, CpGroupEntity groupEntity, UserEntity userEntity) throws NoSuchChargingPointException,
        BadInputRoutingException {
    ...

        // Add charging points to group
        // 1\. Clear list of charging points. Remove charging points which are to ignore from the charging point list with the add items
        addEntitiesList.removeAll(ignore);
        if (0 < addEntitiesList.size()) {
            // 2\. Add charging points to charging point list of entity
            groupEntity.getCps().addAll(addEntitiesList);
            // 3\. Save changes
            cpGroupDAO.updateChargingPoints(groupEntity);
        }
    }
} 
```

这里是cpGroupDAO的功能

```
public void updateChargingPoints(CpGroupEntity group) {
    entityManager.merge(group);
    entityManager.flush();
} 
```

我不知道我的错误在哪里。但是，当我得到实体时，这不可能是错的。我只能在群组或充电点列表中删除或添加条目。

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:21:46.503

我们找到了问题的解决方案。

问题是，连接有几个属性。并且其中一个连接不起作用，因为连接表是空的。我们编写了一个工具，用默认值填充这个表，现在它以一种神奇的方式工作。

我们不知道这个问题究竟是如何解决的，但现在它已经消失了，一切正常。可能缺少一个“可为空”的语句。

而且我们都讨厌休眠 ;-)

但是还剩下一个问题。无法从添加列表中删除所有实体。但这是另一个问题^^。

```
// Add charging points to group
    // 1\. Clear list of charging points. Remove charging points which are to ignore  from the charging point list with the add items
    addEntitiesList.removeAll(ignore);
    if (0 < addEntitiesList.size()) {
        // 2\. Add charging points to charging point list of entity
        groupEntity.getCps().addAll(addEntitiesList);
        // 3\. Save changes
        cpGroupDAO.updateChargingPoints(groupEntity);
    } 
```

非常感谢您的帮助！

# .htaccess - 删除 php exentsion 在 .htacces 中不起作用

> ID：14600477
> 
> 赞同：1
> 
> 时间：2013-01-30T09:24:59.313
> 
> 标签：.htaccess, redirect, seo

我有一个网站，构建器将此代码放入我的 .htaccess 中：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^\.]*)(\.php)?(\?*)$ index.php/$1$3 [L,QSA] 
```

但是，我还需要的是： - 如果没有目录，则删除斜杠 - 删除扩展名 .php - 如果 index.php 在 de url 中，则删除

我尝试了很多建议，但我认为它在 de .htaccess 中已经存在的代码中。

我已经设法将网站重定向到 www。如果没有在 url 中给出

有人有想法吗？我没主意了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:17:19.143

在您已经拥有的规则之前，请尝试添加这些：

```
# remove trailing slash if not directory
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ /$1 [L,R=301]

# remove index.php
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\ /(.*)index\.php/?([^\?\ ]*)
RewriteRule ^ /%1%2 [L,R=301]

# remove php extension
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\ /(.*)\.php($|\ |\?)
RewriteRule ^ /%1 [L,R=301] 
```

# java - 无法部署 WAR：ClassNotFoundException - 我还缺少什么？

> ID：14600478
> 
> 赞同：1
> 
> 时间：2013-01-30T09:25:03.590
> 
> 标签：java, hibernate, dependencies

我正在构建一个基于 Spring 和 Hibernate 的项目，灵感来自我下载的[Spring MVC 教程。](http://briansjavablog.blogspot.it/2012/08/rest-services-with-spring.html)我基本上`pom.xml`是通过它继承和构建了Eclipse项目，从头开始编写Java代码。无论如何，我确定我的是一个依赖问题。

昨天我在加载 Hibernate 时添加了 Java EE 依赖`pom.xml`项。`NoClassDefFoundError: javax/persistence/Entity`我用谷歌搜索并被建议添加 Java EE

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
</dependency> 
```

但是现在我得到了`SEVERE: Error configuring application listener of class com.sun.faces.config.ConfigureListener java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener`

我的项目是一个 Spring MVC REST API。我已经读到这个错误是由于缺少 JSF 实现引起的，但是我在这里不需要 JSF，如果我真的需要它，我也不知道如何将它添加到 pom.xml 中。

我没有找到对这个类的引用`web.xml`（所以没有它我也可以工作）。Hibernate AFAIK 似乎不需要它（HB 也适用于普通的旧 Java 控制台应用程序，不需要 JSF）。

## 我该如何修复项目？

附加信息：

完整的 web.xml 转储

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>J Trust Wrapper</display-name>
    <!-- Main configuration file for this Spring web application. -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>  
                 /WEB-INF/config/rest-services-config.xml  
            </param-value>
    </context-param>
    <!-- Loads the Spring web application context using the config file defined 
        above. -->
    <!-- <listener> <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class> 
        </listener> -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <!-- Define the Spring Dispatcher Servlet for the REST services. The 'contextConfiguration' 
        param with an empty value means that the Spring Context won't try to load 
        a default file called restservices-servlet.xml -->
    <servlet>
        <servlet-name>restservices</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value></param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <!-- This Servlet mapping means that this Servlet will handle all incoming 
        requests -->
    <servlet-mapping>
        <servlet-name>restservices</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app> 
```

项目布局 ![项目布局](../Images/9196c428eafc361a41e7a3a58dbcc532.png)

添加 Java EE 参考之前**或**遵循[此建议时](https://stackoverflow.com/questions/5967905/error-with-jboss-while-deploying-a-jsp-servlet-web-app-com-sun-faces-config-con)

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/config/rest-services-config.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: javax/persistence/Entity
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4797)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/config/rest-services-config.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: javax/persistence/Entity
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getSingletonFactoryBeanForTypeCheck(AbstractAutowireCapableBeanFactory.java:767)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryBean(AbstractAutowireCapableBeanFactory.java:698)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isTypeMatch(AbstractBeanFactory.java:519)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:319)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:298)
    at org.springframework.context.support.AbstractApplicationContext.getBeanNamesForType(AbstractApplicationContext.java:1150)
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.initHandlerMethods(AbstractHandlerMethodMapping.java:105)
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.initApplicationContext(AbstractHandlerMethodMapping.java:89)
    at org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
    at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)
    at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
    at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:117)
    at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:92)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    ... 21 more
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: javax/persistence/Entity
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:76)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)
    ... 38 more
Caused by: java.lang.NoClassDefFoundError: javax/persistence/Entity
    at org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean.<init>(AnnotationSessionFactoryBean.java:90)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
    ... 40 more
Caused by: java.lang.ClassNotFoundException: javax.persistence.Entity
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 46 more 
```

添加 Java EE 参考后（没有上面链接的答案中建议的范围）

```
SEVERE: Error configuring application listener of class com.sun.faces.config.ConfigureListener
java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:527)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:509)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:137)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4733)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

使用的 JRE 是`/usr/lib64/jvm/java-1.7.0-openjdk-1.7.0`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:22:55.197

升级到 Hibernate 4 解决了这个问题。

我还有其他的，也许我现在可能已经修好了。**现在这个**问题已经解决了。

从 HB 3 迁移到 4 迫使我执行一些 bean 调整

```
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="configLocation">
        <value>classpath:/hibernate.cfg.xml</value>
    </property>
    <!-- <property name="configurationClass"> <value>org.hibernate.cfg.AnnotationConfiguration</value> 
        </property> -->
</bean>

<bean id="session" class="org.springframework.orm.hibernate4.SessionFactoryUtils"
    factory-method="openSession" scope="prototype">
    <constructor-arg ref="sessionFactory" />
    <!-- <constructor-arg value="true" /> -->
    <!-- This is seems to be needed to get rid of the 'No Hibernate Session' 
        error' -->
    <!-- <aop:scoped-proxy /> -->
</bean> 
```

# c# - LINQ to XML 与 idref 连接

> ID：14600479
> 
> 赞同：4
> 
> 时间：2013-01-30T09:25:04.920
> 
> 标签：c#, .net, xml, linq-to-xml

我有一个如下的 XML 结构：

```
[...]
<Fruits>
   <Fruit>
      <Specification>id_1001_0</Specification> 
      <Weight>23</Weight>
   </Fruit>
</Fruits>
<FruitSpecification id="id_1001_0">
   <Type>Apple</Type>
</FruitSpecification>
[...] 
```

我想使用 Linq to XML 将其读入（非匿名）对象。假设我有以下代码：

```
var fruits = from xele in xDoc.Root.Element("Fruits").Elements("Fruit")
             select new Fruit()
             {
                Weight = xele.Element("Weight").Value
             } 
```

如何扩展查询以加入正确的`FruitSpecification`标签？目标是能够这样写：

```
var fruits = from xele in xDoc.Root.Element("Fruits").Elements("Fruit")
             //some join?
             select new Fruit()
             {
                Weight = xele.Element("Weight").Value,
                Type = xjoinedelement.Element("Type").Value
             } 
```

我希望这是可以理解的，我制作了这个“水果”示例，我的实际 XML 要复杂得多......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T09:59:47.510

是的，简单的加入就可以解决问题：

```
var fruits = 
    from f in xdoc.Root.Element("Fruits").Elements("Fruit")
    join fs in xdoc.Root.Elements("FruitSpecification")
         on (string)f.Element("Specification") equals (string)fs.Attribute("id")
    select new Fruit()
    {
         Weight = (int)f.Element("Weight"),
         Type = (string)fs.Element("Type")
    }; 
```

水果类定义：

```
public class Fruit
{
    public int Weight { get; set; }
    public string Type { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:49:24.050

试试这个：

```
class Fruit
{
    public int Weight { get; set; }
    public string Type { get; set; }
}

string xml = @"
            <root>
                <Fruits>
                    <Fruit>
                        <Specification>id_1001_0</Specification> 
                        <Weight>23</Weight>
                    </Fruit>
                    <Fruit>
                        <Specification>id_1002_0</Specification> 
                        <Weight>25</Weight>
                    </Fruit>
                </Fruits>
                <FruitSpecification id='id_1001_0'>
                    <Type>Apple</Type>
                </FruitSpecification>
                <FruitSpecification id='id_1002_0'>
                    <Type>Orange</Type>
                </FruitSpecification>
            </root>";
XElement element = XElement.Parse(xml);

IEnumerable<XElement> xFruites = element.Descendants("Fruit");
IEnumerable<XElement> xFruitSpecifications = element.Descendants("FruitSpecification");
IEnumerable<Fruit> frits = xFruites.Join(
    xFruitSpecifications,
    f => f.Element("Specification").Value,
    s => s.Attribute("id").Value,
    (f, s) =>
    new Fruit
        {
            Type = s.Element("Type").Value,
            Weight = int.Parse(f.Element("Weight").Value)
        }); 
```

# cassandra - 使用 CQL3 创建表时出现 Nullpointer 异常？

> ID：14600481
> 
> 赞同：1
> 
> 时间：2013-01-30T09:25:12.400
> 
> 标签：cassandra, cql, astyanax, cql3

我正在尝试使用 cql3 在 cassandra DB 中创建一个表，它在 cassandra 服务器上抛出此错误并且该表没有创建，谁能告诉，它背后的原因是什么？

脚本 -->

```
use demodb1;

CREATE TABLE fishblogscolumnfamily (
    userid varchar,
    when timestamp,
    fishtype varchar,
    blog varchar,
    image blob,
    PRIMARY KEY (userid, when, fishtype)
); 
```

错误：

```
INFO 14:28:27,057 Create new ColumnFamily: 
org.apache.cassandra.config.CFMetaData@70177017[cfId=1024,ksName=demodb1,cfName=fishblogscolumnfamily,cfType=Standa,comparator=org.apache.cassandra.db.marshal.CompositeType(org.apache.cassandra.db.marshal.DateType,org.apache.cassandra.db.marshal.UTF8Type,org.apache.cassandra.db.marshal.UTF8Type),subcolumncomparator=<null>,comment=,readRepairChance=0.1,dclocalReadRepairChance=0.0,replicateOnWrite=true,gcGraceSeconds=864000,defaultValidator=org.apache.cassandra.db.marshal.UTF8Type,keyValidator=org.apache.cassandra.db.marshal.UTF8Type,minCompactionThreshold=4,maxCompactionThreshold=32,keyAlia
java.nio.HeapByteBuffer[pos=0 lim=6 cap=6],columnAliases=[java.nio.HeapByteBuffer[pos=0 lim=4 cap=4], java.nio.HeapByteBuffer[pos=0 lim=8 cap=8]],valueAlias=<n
l>,column_metadata={java.nio.HeapByteBuffer[pos=0 lim=5 cap=5]=ColumnDefinition{name=696d616765, validator=org.apache.cassandra.db.marshal.BytesType, index_typ
null, index_name='null', component_index=2}, java.nio.HeapByteBuffer[pos=0 lim=4 cap=4]=ColumnDefinition{name=626c6f67, validator=org.apache.cassandra.db.marsh
.UTF8Type, index_type=null, index_name='null', component_index=2}},compactionStrategyClass=class org.apache.cassandra.db.compaction.SizeTieredCompactionStrateg
compactionStrategyOptions={},compressionOptions={sstable_compression=org.apache.cassandra.io.compress.SnappyCompressor},bloomFilterFpChance=<null>,caching=KEYS
NLY]
ERROR 14:28:27,071 Error occurred during processing of message.
java.lang.NullPointerException
        at org.apache.cassandra.utils.FastByteComparisons$LexicographicalComparerHolder$UnsafeComparer.compareTo(FastByteComparisons.java:223)
        at org.apache.cassandra.utils.FastByteComparisons$LexicographicalComparerHolder$UnsafeComparer.compareTo(FastByteComparisons.java:110)
        at org.apache.cassandra.utils.FastByteComparisons.compareTo(FastByteComparisons.java:41)
        at org.apache.cassandra.utils.FBUtilities.compareUnsigned(FBUtilities.java:184)
        at org.apache.cassandra.utils.ByteBufferUtil.compareUnsigned(ByteBufferUtil.java:89)
        at org.apache.cassandra.db.marshal.BytesType.bytesCompare(BytesType.java:58)
        at org.apache.cassandra.db.marshal.AsciiType.compare(AsciiType.java:48)
        at org.apache.cassandra.db.marshal.AsciiType.compare(AsciiType.java:28)
        at org.apache.cassandra.db.marshal.AbstractCompositeType.compare(AbstractCompositeType.java:80)
        at org.apache.cassandra.db.marshal.AbstractCompositeType.compare(AbstractCompositeType.java:32)
        at java.util.TreeMap.rbInsert(Unknown Source)
        at java.util.TreeMap.put(Unknown Source)
        at org.apache.cassandra.db.TreeMapBackedSortedColumns.addColumn(TreeMapBackedSortedColumns.java:95)
        at org.apache.cassandra.db.AbstractColumnContainer.addColumn(AbstractColumnContainer.java:109)
        at org.apache.cassandra.db.AbstractColumnContainer.addColumn(AbstractColumnContainer.java:104)
        at org.apache.cassandra.config.ColumnDefinition.toSchema(ColumnDefinition.java:195)
        at org.apache.cassandra.config.CFMetaData.toSchema(CFMetaData.java:1159) 
```

# spring - tagx 文件：c:set 标记，访问对象的属性

> ID：14600482
> 
> 赞同：2
> 
> 时间：2013-01-30T09:25:14.823
> 
> 标签：spring, spring-roo, jsp-tags

我正在使用 Spring Roo，并且我更改了 list.tagx 文件以在顶部添加标题。此标题是第一项的属性值。问题是我想以一种通用的方式指定这个属性，作为 list.tagx 的一个属性。像这样的东西：

```
<jsp:directive.attribute name="titleValue" type="java.lang.String"
        required="false" rtexprvalue="true"
        description="The value to be shown in the title" />
   ...
   <c:when test="${not empty items}">
      <c:if test="${not empty titleValue}">
         <c:set var="variable" value="${items[0].titleValue}" />
      </c:if>
   ... 
```

有一个问题，因为它试图将名为“titleValue”的属性的值获取到对象 items[0] 中。例如，如果我将 'titleValue' 的值设置为 'firstName'，我想获取**items[0].firstName的值**

有可能这样做吗？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:55:52.190

可以通过使用`spring:eval`命名空间中的标签来实现`xmlns:spring="http://www.springframework.org/tags"`。尝试这个：

```
<jsp:directive.attribute name="titleValue" type="java.lang.String"
        required="false" rtexprvalue="true"
        description="The value to be shown in the title" />
   ...
   <c:when test="${not empty items}">
      <c:if test="${not empty titleValue}">
         <c:set var="variable">
             <spring:eval expression="items[0].${titleValue}" />
         </c:set>
      </c:if>
   ... 
```

编辑：修正错字，对不起。不是`${items[0]}.${..}`但`items[0].${..}`

# emulation - 如何创建 PSP 模拟器？

> ID：14600483
> 
> 赞同：-3
> 
> 时间：2013-01-30T09:25:23.170
> 
> 标签：emulation, device-emulation

我知道我至少需要了解 C 和汇编。在您自己看来，除了知道如何有效地用 C 和汇编编程之外，还需要知道什么？你有什么书可以让我开始吗？我还读到您需要了解您正在模拟的平台的硬件架构。**[您还会推荐这里](http://web.archive.org/web/20111219055347/http://www.noxa.org/blog/2011/08/21/emulation-books/)**列出的书籍吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:42:39.797

**仅供专家使用**

您必须知道 PSP 的所有内部运作和硬件细节，这是索尼的商业机密，因此未公布。大多数仿真器的制作方式是*逆向工程*，即拆解设备本身并研究其内部工作原理的过程。这包括彻底分析芯片、读取 ROM 芯片的内容，有时甚至破译加密数据。全面分析通常需要专门的设备和多年的工程经验。

# ssrs-2008 - 如何在生产环境的 SSRS 中部署自定义程序集

> ID：14600488
> 
> 赞同：2
> 
> 时间：2013-01-30T09:25:36.863
> 
> 标签：ssrs-2008

我创建了一个自定义程序集，该程序集使用第三方程序集。我在本地机器上部署了一个自定义程序集。但是现在，我应该怎么做才能在生产环境中部署报表和那些程序集。是否有任何可用的自动化/向导流程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T00:04:36.330

您需要将该程序集复制到生产服务器的 `Microsoft SQL Server\MSSRS\Reporting Services\ReportServer\bin`文件夹中。然后返回 ReportServer 文件夹并打开`rssrvpolicy.config`文件以授予 FullTrust 权限`CodeGroup`with name`Report_Expressions_Default_Permissions`和`CodeGroup`with class name `FirstMatchCodeGroup`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-18T04:25:34.243

您可以将库复制到 ReportServer\Bin 文件夹，例如：C:\Program Files\Microsoft SQL Server\MSRS10_50.R2\Reporting Services\ReportServer\bin

然后修改ReportServer文件夹下的rssrvpolicy.config，找到“$CodeGen$”并添加如下代码

```
<CodeGroup
    class="UnionCodeGroup"
    version="1"
    PermissionSetName="FullTrust"
    Name="CoDeMagSample"
    Description="CoDe Magazine Sample. ">
   <IMembershipCondition
        class="UrlMembershipCondition"
        version="1"
        Url="C:\Program Files\Microsoft SQL Server\MSRS10_50.R2\Reporting Services\ReportServer\bin\YOURLIBRARY.dll"
/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:13:59.690

有一个工具可以做到这一点。它称为[Reporting Services Scripter](http://www.sqldbatips.com/showarticle.asp?ID=62)

另一种选择是通过`SSRS`.

# c++ - 将数据文件读入二维数组 C++

> ID：14600489
> 
> 赞同：1
> 
> 时间：2013-01-30T09:25:48.583
> 
> 标签：c++, multidimensional-array

我有一个包含 2 列和多行的文本文件。每列由空格分隔。我需要将它们读入二维数组以进行进一步计算。我的数据文件看起来像

```
0.5 0.479425539
1   0.841470985
1.5 0.997494987
2   0.909297427
2.5 0.598472144
3   0.141120008
3.5 -0.350783228
4   -0.756802495
4.5 -0.977530118
5   -0.958924275 
```

我微弱的尝试是

```
#include <iostream>
#include <fstream>
#include <string>
#include <conio.h>
#include <ctype.h>
using namespace std;

int main () {
  char line,element;
  std::ifstream myfile ("C:\\Users\\g\\Desktop\\test.txt");
  if (myfile.is_open())
  {
    while ( myfile.good() )
    {
      getline(myfile,line);
       cout << line<<endl;               
      _getch();
    }
    myfile.close();

  }

  else cout << "Unable to open file"; 

  return 0;

} 
```

问题是我无法正确读取它们......它要么读取整行......如果我将分隔符指定为“空格”，那么它不会读取下一行。

请指出什么是错的。以及我应该怎么做才能将数据存储到二维数组中以进行进一步计算。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:29:33.607

您可以将整行读入 a [`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)，然后用于[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)从行中提取值。

* * *

完整的工作程序：

```
#include <iostream>
#include <string>
#include <sstream>
#include <fstream>

int main()
{
    std::ifstream file("C:\\Users\\g\\Desktop\\test.txt");

    std::string line;

    // Read a line of input from the file
    while (std::getline(file, line))
    {
        // `istringstream` behaves like a normal input stream
        // but can be initialized from a string
        std::istringstream iss(line);

        float value;

        // The input operator `>>` returns the stream
        // And streams can be used as a boolean value
        // A stream is "true" as long as everything is okay
        while (iss >> value)
        {
            std::cout << "Value = " << value << '\t';
        }

        // Flush the standard output stream and print a newline
        std::cout << std::endl;
    }
} 
```

鉴于文件中的内容与问题中的内容相同，输出的前三行应为：

```
值 = 0.5 值 = 0.479425539
值 = 1 值 = 0.841470985
值 = 1.5 值 = 0.997494987

```

* * *

对于二维数组，我会使用 a [`std::vector`](http://en.cppreference.com/w/cpp/container/vector)of [`std::array`](http://en.cppreference.com/w/cpp/container/array)：

```
#include <vector>
#include <array>

...

std::vector<std::array<float, 2>> array;

...

float value1, value2;
if (iss >> value1 >> value2)
{
    std::cout << "Values = " << value1 << ", " << value2;

    array.emplace_back(std::array<int, 2>{{value1, value2}});
} 
```

现在第一行的值为`array[0][0]`and `array[0][1]`，最后一行的值为`array[array.size() - 1][0]`and `array[array.size() - 1][1]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:41:20.983

```
#include <fstream>
#include <string>
#include <sstream>
#include <iostream>
#include <vector>

int main(int argc, char** argv) {
   std::ifstream f(argv[1]);
   std::string l;
   std::vector<std::vector<double> > rows;
   while(std::getline(f, l)) {
       std::stringstream s(l);
       double d1;
       double d2;
       if(s >> d1 >> d2) {
           std::vector<double> row;
            row.push_back(d1);
            row.push_back(d2);
            rows.push_back(row);
        }
    }

    for(int i = 0; i < rows.size(); ++i)
        std::cout << rows[i][0] << " " << rows[i][1] << '\n';
} 
```

最后一个 for 循环显示了如何使用“数组”中的值。变量 rows 严格来说不是一个数组，而是一个向量的向量。但是，向量比 c 风格的数组更安全，并且允许使用 [] 访问其元素。

[当我发布此内容时，我看到一个非常相似的程序作为响应发布。我自己写的。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-07T19:21:28.437

随着 C++ 多年来的发展，以下是现代 C++ 版本。

*   它尽可能使用自动
*   使用 std::pair 保存 2 个值（std::pair 是具有两个元素的 std::tuple 的特定情况）
*   不关闭文件（析构函数在块末尾执行此操作）
*   不逐行读取，因为流使用 <space> 和 <enter> 作为分隔符
*   变量具有有意义的名称，因此程序很容易“读取”，
*   使用范围 for 循环输出数据。
*   不会将整个 std 命名空间带入代码 -[为什么“使用命名空间 std”被认为是不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice)

.

```
#include <fstream>
#include <iostream>
#include <vector>
#include <utility>

int main( int argc, char** argv )
{
    if ( argc < 1 )
        return -1;

    const auto    fileName = argv[ 1 ];
    std::ifstream fileToRead( fileName );

    typedef std::pair< double, double > DoublesPair;
    std::vector< DoublesPair > rowsOfDoublesPair;
    DoublesPair                doublePairFromFile;

    while ( fileToRead >> doublePairFromFile.first >> doublePairFromFile.second )
    {
        rowsOfDoublesPair.push_back( doublePairFromFile );
    }

    for ( const auto row : rowsOfDoublesPair )
        std::cout << row.first << " " << row.second << '\n';
} 
```

# jodatime - 日期解析异常

> ID：14600497
> 
> 赞同：0
> 
> 时间：2013-01-30T09:26:22.683
> 
> 标签：jodatime

我正在使用 joda 在我的 xml 中设置日期。我正在使用 poi 从 excelsheet 获取日期并使用以下代码将其设置在 xml 中：

```
DateTimeFormatter fmt = DateTimeFormat.forPattern("EEE, dd MMM YYYY HH:mm:ss zzz")
                  .withLocale(Locale.getDefault());
                   DateTime dt = fmt.parseDateTime(summaryObj.getCreateDateTime().toString());

                   DateTimeFormatter fmt1 = DateTimeFormat.forPattern("dd/MM/yyyy");
                   //get current date only
                   DateTime currentDate = new DateTime();
                   int day = currentDate.getDayOfMonth();
                   int month = currentDate.getMonthOfYear();
                   int year = currentDate.getYear();
                   DateTime dt1 = fmt1.parseDateTime(String.valueOf(day)+"/"+ String.valueOf(month)+"/"+String.valueOf(year));
                listOfPossibleEntities.add("DateOfCreation");
                gc.setTime(dt1.toDate());
                globalContextObj.setDateOfCreation(DatatypeFactory.newInstance()
                        .newXMLGregorianCalendar(gc)); 
```

summaryObj.getCreateDateTime().toString() 生成一个字符串，如“Sat Sep 16 05:30:00 IST 2006”。我收到函数 parseDateTime() 的异常。

```
java.lang.IllegalArgumentException: Invalid format: "Sat Sep 16 05:30:00 IST 2006" is malformed at " Sep 16 05:30:00 IST 2006"
at org.joda.time.format.DateTimeFormatter.parseDateTime(DateTimeFormatter.java:866)
at scanning.ScanningEngine.getGlobalContext(ScanningEngine.java:2633) 
```

我最初直接使用日期而不是 joda，但是我们在使用 REST 将 xml 作为 json 返回时遇到了杰克逊反序列化器的异常。这就是我决定切换到 joda 的原因，因为我看到一些帖子说 jackson 中有一些用于 java.util.Date 反序列化的错误。

如果有人知道为什么会出现无效格式异常，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:23:06.230

If `summaryObj.getCreateDateTime().toString()`is `Sat Sep 16 05:30:00 IST 2006`parseDateTime 将与您的格式化程序引发异常。'z' 无法解析（来源： http: [//joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)），因此您必须更改`IST`为`+0530`. 然后，修改格式化程序，尝试使用`DateTimeFormat.forPattern("EEE MMM dd HH:mm:ss Z YYYY")`. 格式化程序必须类似于馈送字符串。我根据您的示例编写了此代码，并且可以正常工作。

```
String summaryObj = "Sat Sep 16 05:30:00 +0530 2006";
DateTimeFormatter fmt = DateTimeFormat.forPattern("EEE MMM dd HH:mm:ss Z YYYY")
  .withLocale(Locale.getDefault());
DateTime dt = fmt.parseDateTime(summaryObj); 
```

**根据 kavita 的评论进行编辑，我认为格式化程序的问题需要更好的解释**。**
您正在使用此格式化程序`EEE, dd MMM YYYY HH:mm:ss zzz`，但您的输入字符串看起来像`Sat Sep 16 05:30:00 IST 2006`，所以**

 ***   `Sat`由 图案化`EEE`，这是正确的
*   逗号不在字符串中，这就是我要求您删除它的原因
*   `Sep`正试图以 为`dd`模式，这是几天来的模式，这是对 kavita 评论的答案（为什么在这里而不是在`IST`）。的模式`Sep`必须是`MMM`
*   `16`代表天，所以模式是`dd`
*   `05:30:00`代表小时：分钟：秒，模式是`HH:mm:ss`
*   `IST`是时区缩写，模式是 0 `z`（请注意，单个`z`，而不是原始模式中的 3 ）。不幸的是，它无法解析
*   `2006`代表年份，模式`YYYY`正确

至于另一个问题（如何更改`toString`a 的`Date`）我不知道是否可能，我建议使用[SimpleDateFormatter](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)之类的

```
DateFormatter formatter = new SimpleDateFormatter("EEE MMM dd HH:mm:ss Z YYYY");
String date = formatter.format(summaryObj.getCreateDateTime());
DateTimeFormatter fmt = DateTimeFormat.forPattern("EEE MMM dd HH:mm:ss Z YYYY")
    .withLocale(Locale.getDefault());
DateTime dt = fmt.parseDateTime(date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:05:50.543

我通过使用`new DateTime(summaryObj.getCreateDateTime());` This 解决了这个问题，这并没有给我任何 IST 或其他方面的例外。**

# jquery - Backbone.js 与 RestAPI

> ID：14600498
> 
> 赞同：2
> 
> 时间：2013-01-30T09:26:25.593
> 
> 标签：jquery, ajax, rest, backbone.js, cross-domain

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:31:16.930

This has nothing to do with Backbone specifically. You are loading the page with a file:/// URL and the problem is an AJAX Cross Origin request.

There are ways around it - you could load your web pages through your server which is running the REST services. Alternatively, you could allow cross origin requests. I'll let you search for how to do that.

**EDIT** If you are developing a PhoneGap application, you will not have the issue once you actually run the application since it will not complain about cross origin requests. At that point it is a local app so the request is not cross-origin. The way to get around that at development time is the --allow-file-access flag which you said you could not get to work. You need to make sure to close any other open Chrome windows and then start a new instance with that flag.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:02:45.577

You can use JSONP in your ajax call which allows cross origin requests

Read more at [here](http://en.wikipedia.org/wiki/JSONP) and [here](https://stackoverflow.com/questions/5943630/basic-example-of-using-ajax-with-jsonp)

**EDIT** :

Using jsonp expects back a json object, and it does not work with xml. So mayb you need to wrap your XML into json before sending from the server, or parse your xml to json.

[this](https://stackoverflow.com/questions/3068473/use-jsonp-to-get-xml-cross-domain), [this](https://stackoverflow.com/questions/3009796/how-to-process-xml-returned-from-jsonp-using-jquery) and [this](https://stackoverflow.com/questions/3435454/using-jsonp-when-returning-xml) may prove helpful :)

# byte - 我可以在 4 个字节中以毫秒精度存储多少天？

> ID：14600504
> 
> 赞同：-4
> 
> 时间：2013-01-30T09:26:57.223
> 
> 标签：byte

现在我遇到了一个问题，研究我可以以毫秒精度在 4 个字节中存储多少天。谁知道？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T09:32:01.687

4 字节 = 2^32 = 4294967296 1 天 = 24 * 60 * 60 * 1000 毫秒 = 86400000

4294967296 / 86400000 = 49.71026962962962962962962962963

或约 49 天 17 小时 2 分 47 秒

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T09:30:21.673

1 个字节有 8 位。1 位可以保存 2 个不同的值（0 或 1），因此 1 个字节可以保存 2^8 个不同的值。

一天有 24 * 60 * 60 * 1000 毫秒。

其余的数学应该是微不足道的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T09:31:11.657

在 Java 中以这种方式查找：

```
System.out.println(((long)Integer.MAX_VALUE - Integer.MIN_VALUE) / 1000f / 60 / 60 / 24); 
```

# ios - iOS 属性字符串高度

> ID：14600505
> 
> 赞同：4
> 
> 时间：2013-01-30T09:26:59.200
> 
> 标签：ios

我通过动态长度文本计算 UILabel 的大小（这里只有高度很重要）。我绘制了标签图层的边框以可视化标签的框架。我有时会在标签文本的上方和下方看到“填充”，但并非总是如此。我不想要填充。我怀疑它与属性字符串有关，因为我从未在“正常”字符串标签中遇到过这样的问题。

我看到了这个（注意第一行的填充）：

![在此处输入图像描述](../Images/2f1548f32fe3483bbb8fcb534938b755.png)

我要这个：

![在此处输入图像描述](../Images/63c68c9b59bbd926151fed9ba6f7e518.png)

相关代码：

```
-(void)setupQuestionView
{
    [self.questionView setAttributedText:[self.allContents[_itemIndex] objectForKey:@"Question"]];

    // new question view height
    CGSize constraint = CGSizeMake(kCellWidth - kLeftMargin - kRightMargin, FLT_MAX);

    CGSize size = [self.questionView.text sizeWithFont:[UIFont systemFontOfSize: kFontSize] constrainedToSize:constraint lineBreakMode:NSLineBreakByWordWrapping];

    [self.questionView setFrame:CGRectMake(kRightMargin, kTopMargin, kCellWidth - kRightMargin * 2, size.height)];

    [self.questionView.layer setBorderWidth:1.0f];      // debug
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:06:43.917

kLeftMargin 和 kRightMargin 是否相等？我找不到其他可能出错的地方。

# javascript - 无法选中/取消选中 javascript/jquery 中的复选框

> ID：14600506
> 
> 赞同：2
> 
> 时间：2013-01-30T09:26:59.033
> 
> 标签：javascript, jquery

我有一个复选框，它将切换 html 表单上的一些其他复选框：

```
<input type="checkbox" name="selector" onclick="toggle_all(this);"/>

<script language="javascript">
function toggle_all(source) {
    var checkboxes = $(":input[name^='form[r']");
    if($(source).is(':checked')) {
        checkboxes.attr('checked', 'checked');
    } else {
        checkboxes.removeAttr('checked');
    }
    alert('done');
}
</script> 
```

第一次单击“选择器”复选框时，所有名称以“form[r”开头的复选框都会被选中。然后，当“选择器”复选框未选中时，所有其他复选框也未选中。从那时起选中/取消选中“选择器”复选框不会影响其他复选框。代码正在运行，因为 alert('done') 出现了。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:35:17.457

我会建议改进。更改 HTML，为所有复选框添加一些类：

```
<input class="check" type="checkbox" name="form[r]"> 
```

和 JS：

```
function toggle_all(source) {
    $(".check").prop('checked', source.checked);
} 
```

[http://jsfiddle.net/tFv3G/](http://jsfiddle.net/tFv3G/)

原因是通过属性搜索元素比通过类名慢得多。而且可读性也较差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:30:11.970

您需要转义选择器中的方括号

改变

```
var checkboxes = $(":input[name^='form[r']"); 
```

到

```
var checkboxes = $(":input[name^='form\[r']"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:34:38.123

我建议使用此代码来选择/取消选择所有复选框：

```
$('input#select-all').change(function(){
  var checked = $(this).prop('checked');
  $(":input[name^='form[r']").prop('checked', checked);
}); 
```

# javascript - 使用 Codebehind 方法单击按钮完成后如何继续 Javascript 功能？

> ID：14600507
> 
> 赞同：0
> 
> 时间：2013-01-30T09:27:02.890
> 
> 标签：javascript, asp.net, visual-studio-2008

你好我有一个`javascript`看起来像这样的函数：

```
function WebGrid1_OnAfterAdd(controlId) 
{      
    document.getElementById('TeilnehmerCounterButton').click()    
    var intern = document.getElementById('InterneTeilnehmer').value;
    var extern = document.getElementById('ExterneTeilnehmer').value;
    parent.parentTeilnehmer(intern, extern)
} 
```

只有在`TeilnehmerCounterButton`带有方法的按钮`codebehind`完成后，它才应该加载函数的其余部分。

我怎样才能做到这一点？

在此先感谢您的帮助

# php - 左（）不工作

> ID：14600509
> 
> 赞同：2
> 
> 时间：2013-01-30T09:27:07.070
> 
> 标签：php, mysql, sql

当我使用 LEFT() 使用以下代码从数据库中获取值时

```
$select="SELECT LEFT(description,500) FROM tbl_news where id='$id'";
$quer=mysqli_query($select);
$fetch=mysqli_fetch_array($quer);
$descr=$fetch['description'];

echo $descr; 
```

该值没有回显...... LEFT() 在 while 循环中没有工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:28:03.430

在函数的列上提供一个`ALIAS`传递。

```
$select="SELECT LEFT(description,500) description FROM tbl_news where id='$id'"; 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# java - 如何使用 Jersey API 从 RESTful Web 服务发送和接收 JSON 数据

> ID：14600510
> 
> 赞同：17
> 
> 时间：2013-01-30T09:27:25.833
> 
> 标签：java, json, jersey

```
@Path("/hello")
public class Hello {

    @POST
    @Path("{id}")
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)
    public JSONObject sayPlainTextHello(@PathParam("id")JSONObject inputJsonObj) {

        String input = (String) inputJsonObj.get("input");
        String output="The input you sent is :"+input;
        JSONObject outputJsonObj = new JSONObject();
        outputJsonObj.put("output", output);

        return outputJsonObj;
    }
} 
```

这是我的网络服务（我正在使用 Jersey API）。但是我想不出一种从java rest客户端调用这个方法来发送和接收json数据的方法。我尝试了以下方式来编写客户端

```
ClientConfig config = new DefaultClientConfig();
Client client = Client.create(config);
WebResource service = client.resource(getBaseURI());
JSONObject inputJsonObj = new JSONObject();
inputJsonObj.put("input", "Value");
System.out.println(service.path("rest").path("hello").accept(MediaType.APPLICATION_JSON).entity(inputJsonObj).post(JSONObject.class,JSONObject.class)); 
```

但这显示了以下错误

```
Exception in thread "main" com.sun.jersey.api.client.ClientHandlerException: com.sun.jersey.api.client.ClientHandlerException: A message body writer for Java type, class java.lang.Class, and MIME media type, application/octet-stream, was not found 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-31T08:24:34.983

您对@PathParam 的使用不正确。它不遵循[此处](http://jsr311.java.net/nonav/javadoc/javax/ws/rs/PathParam.html)的 javadoc 中记录的这些要求。我相信您只想发布 JSON 实体。您可以在资源方法中修复此问题以接受 JSON 实体。

```
@Path("/hello")
public class Hello {

  @POST
  @Produces(MediaType.APPLICATION_JSON)
  @Consumes(MediaType.APPLICATION_JSON)
  public JSONObject sayPlainTextHello(JSONObject inputJsonObj) throws Exception {

    String input = (String) inputJsonObj.get("input");
    String output = "The input you sent is :" + input;
    JSONObject outputJsonObj = new JSONObject();
    outputJsonObj.put("output", output);

    return outputJsonObj;
  }
} 
```

而且，您的客户端代码应如下所示：

```
 ClientConfig config = new DefaultClientConfig();
  Client client = Client.create(config);
  client.addFilter(new LoggingFilter());
  WebResource service = client.resource(getBaseURI());
  JSONObject inputJsonObj = new JSONObject();
  inputJsonObj.put("input", "Value");
  System.out.println(service.path("rest").path("hello").accept(MediaType.APPLICATION_JSON).post(JSONObject.class, inputJsonObj)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-23T14:00:00.557

对我来说，参数（JSONObject inputJsonObj）不起作用。我正在使用球衣 2.* 因此我觉得这是

### java(Jax-rs) 和 Angular 方式

我希望它对像我这样使用 JAVA Rest 和 AngularJS 的人有所帮助。

```
@POST
@Consumes(MediaType.TEXT_PLAIN)
@Produces(MediaType.APPLICATION_JSON)
public Map<String, String> methodName(String data) throws Exception {
    JSONObject recoData = new JSONObject(data);
    //Do whatever with json object
} 
```

客户端我使用 AngularJS

```
factory.update = function () {
data = {user:'Shreedhar Bhat',address:[{houseNo:105},{city:'Bengaluru'}]};
        data= JSON.stringify(data);//Convert object to string
        var d = $q.defer();
        $http({
            method: 'POST',
            url: 'REST/webApp/update',
            headers: {'Content-Type': 'text/plain'},
            data:data
        })
        .success(function (response) {
            d.resolve(response);
        })
        .error(function (response) {
            d.reject(response);
        });

        return d.promise;
    }; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-12-06T06:04:00.233

上述问题可以通过在您的项目中添加以下依赖项来解决，因为我遇到了同样的问题。有关此解决方案的更多详细答案，请参阅链接[SEVERE:MessageBodyWriter not found for media type=application/xml type=class java。 util.HashMap](https://stackoverflow.com/questions/13439386/jersey-a-message-body-writer-for-java-class-and-mime-mediatype-application-json/51454244#51454244)

```
 <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.0</version>
    </dependency>

    <!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind -->
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-databind</artifactId>
        <version>2.9.2</version>
    </dependency>   

    <dependency>
        <groupId>org.glassfish.jersey.media</groupId>
        <artifactId>jersey-media-json-jackson</artifactId>
        <version>2.25</version>
    </dependency> 
```

# openssl - 使用 openssl 生成新的 CSR

> ID：14600518
> 
> 赞同：1
> 
> 时间：2013-01-30T09:27:45.990
> 
> 标签：openssl, debian, ssl-certificate, csr

OpenSSL - Debian - Apache

我必须生成新的 CSR 才能安装新的 SSL 证书。我知道我可以从现有的私钥中生成一个，但假设同时生成一个新的私钥是个好主意（？），如果我这样做，我不想每次都输入密码Apache 启动的时间。

如果我的密钥当前是 domain.com.key 和 CSR domain.csr，那么运行以下命令将替换两者并给我我需要的东西？

```
 openssl req -nodes -newkey rsa:2048 -keyout domain.com.key -out domain.csr 
```

由于我必须将 CSR 传递给组织中处理获取证书的其他人，那么这意味着在我等待证书到达我的时候它们将是不准确的（？） - 所以如果我在此调用它们不同的文件名在一代人的阶段，当我来安装证书时，我会注意什么“陷阱”？任何“标准”的地方，不同的文件名会是一个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:18:06.020

除了用于查找文件的软件外，文件名无关紧要。收到证书后，您可以将新密钥移动到位。

# angularjs - 如何在使用 Angular JS 将值推入数组时检查唯一性？

> ID：14600523
> 
> 赞同：13
> 
> 时间：2013-01-30T09:28:13.223
> 
> 标签：angularjs

```
 $scope.displayyears = [];
  $scope.Joinyear = function(display) {
    $scope.yeardisplay = display;       
    $scope.yeardisp = $scope.displayyears.push($scope.yeardisplay);
    $scope.displayyearss = uniq($scope.yeardisp)
  } 
```

它会抛出像“uniq is undefined”这样的错误。我们如何检查唯一性？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-30T09:32:42.363

在添加之前尝试检查 yeardisplay 是否已经在数组中

```
$scope.displayyears = [];
$scope.Joinyear=function(display){
     $scope.yeardisplay=display;        
     if ($scope.displayyears.indexOf(display) == -1) {
         $scope.displayyears.push(display);
     }
} 
```

# python - 无法从 sqlalchemy.ext.declarative 导入 *

> ID：14600530
> 
> 赞同：0
> 
> 时间：2013-01-30T09:28:38.813
> 
> 标签：python, sqlalchemy

如果我尝试执行`from sqlalchemy.ext.declarative import *`它会失败。我试过卸载软件包`pip uninstall sqlalchemy` 并重新安装。我已尝试从 Ubuntu 存储库（-package `python-sqlalchemy`）中删除该版本，但未安装。我已经到一个干净的目录并尝试了相同的命令。还是不行。这适用于 sqlalchemy 0.7.8 和 0.7.9。

这是回溯：

```
In [1]: from sqlalchemy.ext.declarative import *
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/home/nine/slask/<ipython-input-1-7f210e4ec48b> in <module>()
----> 1 from sqlalchemy.ext.declarative import *

/usr/local/lib/python2.7/dist-packages/sqlalchemy/ext/declarative/__init__.py in <module>()
   1252 """
   1253
-> 1254 from .api import declarative_base, synonym_for, comparable_using, \
   1255     instrument_declarative, ConcreteBase, AbstractConcreteBase, \
   1256     DeclarativeMeta, DeferredReflection, has_inherited_table,\

/usr/local/lib/python2.7/dist-packages/sqlalchemy/ext/declarative/api.py in <module>()
    101
    102
--> 103 class declared_attr(interfaces._MappedAttribute, property):
    104     """Mark a class-level method as representing the definition of
    105     a mapped property or special declarative member name.

AttributeError: 'module' object has no attribute '_MappedAttribute' 
```

作为记录，我正在运行 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:54:17.340

现在它起作用了。这就是我所做的：

*   我用 pip 卸载了 sqla
*   手动删除剩余文件 ( `rm -fr /usr/local/lib/python2.7/dist-packages/sqlalchemy`)
*   用 pip 重新安装了 sqla，现在它可以工作了。

# iphone - NSLog 会影响应用程序的速度吗？

> ID：14600534
> 
> 赞同：0
> 
> 时间：2013-01-30T09:29:07.230
> 
> 标签：iphone, ios, objective-c, nslog

> **可能重复：**
> [我需要在发布应用程序之前禁用 NSLog 吗？](https://stackoverflow.com/questions/2025471/do-i-need-to-disable-nslog-before-release-application)

在我的 iPhone 应用程序中有 20 多个类。我使用 NSLog 打印这么多值的每个地方。当我在模拟器上运行我的应用程序时，它有点低，因为一些 NSLogs（特别是打印 NSData 等）

如果我完成应用程序并在制作 ipa 文件后在设备上运行它会很慢吗？或者我应该评论类中的所有 NSLogs 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T09:33:43.467

是的，它确实。如果您想自己检查它，请使用分配进行分析，看看是什么占用了您的大部分内存。它也会显示 NSLogs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:31:55.380

代替 NSLog 到处使用 DLog。在测试和调试时，您会收到调试消息。当您准备发布测试版或最终版时，所有这些 DLog 行都会自动变为空，并且不会发出任何内容。这样就不需要手动设置变量或注释 NSLog。选择你的构建目标会处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:40:21.650

NSLog 会影响速度，因为**它会阻塞**并**导致 IO**。它在当前线程中同步运行。更好的是异步！-- 就像 cocoalumberjack 的 DDLog 一样，它是一种不会阻塞的替代品。[仍然会导致 IO，请参阅下一个有关级别的信息]

* * *

还 DDLog 知道**日志级别**。EG 信息、警告和错误：在发布模式下，您默认将其设置为错误（但可以通过 UserDefault 值更改！）

然后没有记录警告和信息，这使得它只造成非常小的开销

* * *

DDLog 与**log4j**类似，但用于 objC！

# mmc3 - MMC 帮助主题

> ID：14600537
> 
> 赞同：1
> 
> 时间：2013-01-30T09:29:13.260
> 
> 标签：mmc3

首先感谢您在这里的时间，现在，我当前的 MMC 项目中有一个致命的问题。当我在 MMC 中添加我的 snapin 并单击帮助菜单中的 MMC 帮助主题菜单时，我发现它总是在我调试我的项目时运行我的 snapin 类构造。这不是我所期望的，这是一个致命的严重问题，为什么单击帮助主题时构造函数总是再次运行？

任何专家都可以指出我这个问题并给我一个很好的建议！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T11:32:38.277

也许答案为时已晚，但几天前我遇到了同样的问题。我正在使用 c#。刚刚创建的静态布尔变量 isRunning = false。以及很少的构造函数修改：

```
public class MMCcls
{
    private static bool isRunning = false;

    public MMCcls()
    {
      if(!isRunning)
      {
         //constructor
      }

      isRunning = true;
    }
} 
```

# sql-server-data-tools - SSDT 的自定义模板

> ID：14600541
> 
> 赞同：3
> 
> 时间：2013-01-30T09:29:26.883
> 
> 标签：sql-server-data-tools, visual-studio-templates

[存储SQL Server Data Tools](http://msdn.microsoft.com/en-us/library/hh272686%28v=vs.103%29.aspx)数据库项目的[自定义项模板](http://msdn.microsoft.com/en-us/library/ms247119.aspx)的正确文件夹名称是什么？

例如。它应该位于 C:\Users\accountname\Documents\Visual Studio 11\Templates\ItemTemplates 下的哪个子文件夹

SSDT 提供的模板似乎位于 C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\Microsoft\SQLDB\Extensions\SqlServer 下

（对于 VS2010，将上述路径中的 '10' 替换为 '11'）

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2017-07-12T09:53:56.980

您将模板 RDL 保存在 C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\PrivateAssemblies\ProjectItems\ReportProject 中。然后它将在“添加 > 新报告”窗口中可用。

# android - 在图库视图中显示来自特定文件夹的图像

> ID：14600553
> 
> 赞同：1
> 
> 时间：2013-01-30T09:30:02.910
> 
> 标签：android, gallery, galleryview

我得到了一个画廊视图，它根据项目内的可绘制对象显示图像。但现在我希望它显示特定文件夹的图像，但我不确定如何让它以这种方式工作。图像文件夹“mnt/sdcard/ff/”示例任何评论和回答将不胜感激！下面是基于drawables显示图像的代码。

```
private void setupUI() {

    leftArrowImageView = (ImageView) findViewById(R.id.left_arrow_imageview);
    rightArrowImageView = (ImageView) findViewById(R.id.right_arrow_imageview);
    gallery = (Gallery) findViewById(R.id.gallery);

    leftArrowImageView.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (selectedImagePosition > 0) { --selectedImagePosition; }
            gallery.setSelection(selectedImagePosition, false);
        }
    });

    rightArrowImageView.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (selectedImagePosition < drawables.size() - 1) { ++selectedImagePosition; }
            gallery.setSelection(selectedImagePosition, false);
        }
    });

    gallery.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
            selectedImagePosition = pos;
            if (selectedImagePosition > 0 && selectedImagePosition < drawables.size() - 1) {
                leftArrowImageView.setImageDrawable(getResources()
                                  .getDrawable(R.drawable.arrow_left_enabled));
                rightArrowImageView.setImageDrawable(getResources()
                                   .getDrawable(R.drawable.arrow_right_enabled));
            } else if (selectedImagePosition == 0) {
                leftArrowImageView.setImageDrawable(getResources()
                                  .getDrawable(R.drawable.arrow_left_disabled));
            } else if (selectedImagePosition == drawables.size() - 1) {
                rightArrowImageView.setImageDrawable(getResources()
                                   .getDrawable(R.drawable.arrow_right_disabled));
            }
            changeBorderForSelectedImage(selectedImagePosition);
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) { }
    });

    galImageAdapter = new GalleryImageAdapter(this, drawables);
    gallery.setAdapter(galImageAdapter);

    if (drawables.size() > 0) {
        gallery.setSelection(selectedImagePosition, false);
    }

    if (drawables.size() == 1) {
        rightArrowImageView.setImageDrawable(getResources()
                           .getDrawable(R.drawable.arrow_right_disabled));
    }

    gallery.setCallbackDuringFling(false);
}

private void changeBorderForSelectedImage(int selectedItemPos) {
    int count = gallery.getChildCount();

    for (int i = 0; i < count; i++) {
        ImageView imageView = (ImageView) gallery.getChildAt(i);
        imageView.setBackgroundDrawable(getResources()
                 .getDrawable(R.drawable.image_border));
        imageView.setPadding(3, 3, 3, 3);
    }

    ImageView imageView = (ImageView) gallery.getSelectedView();
    imageView.setBackgroundDrawable(getResources()
             .getDrawable(R.drawable.selected_image_border));
    imageView.setPadding(3, 3, 3, 3);
}

private void getDrawablesList() {
    drawables = new ArrayList<Drawable>();
    drawables.add(getResources().getDrawable(R.drawable.ads1));
    drawables.add(getResources().getDrawable(R.drawable.ads2));
    drawables.add(getResources().getDrawable(R.drawable.ads3));
    drawables.add(getResources().getDrawable(R.drawable.ads4));
    drawables.add(getResources().getDrawable(R.drawable.ads5));
    drawables.add(getResources().getDrawable(R.drawable.ads6));
    drawables.add(getResources().getDrawable(R.drawable.ads7));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:36:32.587

在名为 raw (res/raw) 的 res 中创建新文件夹并将您的图像放在这里。

并获取图像 R.raw.imagename.......

# php - 如何检查是否设置了 leftJoin？

> ID：14600557
> 
> 赞同：1
> 
> 时间：2013-01-30T09:30:21.767
> 
> 标签：php, doctrine, symfony-1.4, left-join

我有一个带有几个自定义搜索字段的表单过滤器。

在`addXXXQuery`函数中，我必须在某些字段相同的表上使用连接。

我可以检查该特定表的 innerJoin 是否已设置在另一个表中`addXXXQuery`吗？

[编辑] 示例：

```
public function addIsPaidColumnQuery(Doctrine_Query $query, $field, $values)
{
  if ($values) {
    $rootAlias = $query->getRootAlias();
    $query->leftJoin($rootAlias.".Inscription i");
          ->andWhere("i.is_paid = ?", $values);
  }
}

public function addActTypeColumnQuery(Doctrine_Query $query, $field, $values)
{
  if ($values) {
    $rootAlias = $query->getRootAlias();
    $query->leftJoin($rootAlias.".Inscription i")
          ->leftJoin("i.Act a")

    $query->addWhere("a.act_type_id = ?", $values);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:41:52.293

好吧，您可以`$params`从查询中检索 ，并检查连接是否已经存在，如下所示：

```
public function addIsPaidColumnQuery(Doctrine_Query $query, $field, $values)
{
  if ($values)
  {
    $rootAlias = $query->getRootAlias();
    $leftjoin  = $rootAlias.".Inscription i";
    $params    = $query->getParams();

    if (!isset($params['join']) || (isset($params['join']) && !in_array($leftjoin, $params)))
    {
      $query->leftJoin($leftjoin);
    }

    $query->andWhere("i.is_paid = ?", $values);
  }
} 
```

您可以在代码中看到[leftJoin 是如何添加的](https://github.com/doctrine/doctrine1/blob/master/lib/Doctrine/Query/Abstract.php#L1673)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:47:09.713

我找不到一种方法，它会告诉我是否设置了表的连接。然而我越是想到这种方法的存在，它对它的意义就越小。因此，为了检查我是否已经在过滤器查询中使用了连接，我设置了一个类变量`$leftJoinInscriptionSet`。

```
private $leftJoinInscriptionSet = false;

...

public function addIsPaidColumnQuery(Doctrine_Query $query, $field, $values)
{
  if ($values) {
    $this->setLeftJoinInscription($query);

    $query->andWhere("i.is_paid = ?", $values);
  }
}

...

private function setLeftJoinInscription(Doctrine_Query $query) {
  if (!$this->leftJoinInscriptionSet) {
      $rootAlias = $query->getRootAlias();
      $query->leftJoin($rootAlias.".Inscription i");
      $this->leftJoinInscriptionSet = true;
  }
} 
```

# jquery-plugins - Fancybox - 如何设置默认的 Youtube 视频质量

> ID：14600561
> 
> 赞同：0
> 
> 时间：2013-01-30T09:30:30.377
> 
> 标签：jquery-plugins, youtube, fancybox-2

使用 Fancybox 显示视频时，有没有办法设置默认的 Youtube 视频质量？我尝试`&hd=1`按照 Youtube 的建议在视频 url 中提供查询字符串参数，但是当 Fancybox 嵌入视频时，这看起来会被忽略...有时它嵌入 260p，有时是 320p，有时是 480p，我不知道如何更改此参数.

[http://www.youtube.com/watch?v=VRT0OhHnOzo&autoplay=1&hd=1](http://www.youtube.com/watch?v=VRT0OhHnOzo&autoplay=1&hd=1)

如果 URL 直接输入浏览器，则 yotube 在提供 &hd=1 参数时显示高清版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:19:13.973

[好的，我在这个问题](https://stackoverflow.com/questions/8057047/youtube-iframe-embed-not-starting-in-hd)的帮助下找到了解决方案。

我使用和使用 Fancybox 2 的代码是：

```
$('.fancybox-media').fancybox({
    openEffect  : 'none',
    closeEffect : 'none',
    width : 1000,
    height : 563,
    helpers : {
        media: true
    },
    youtube : {
        autoplay: 1,
        hd: 1,
        vq: 'hd720'
    }
}); 
```

关键是`youtube:`部分......您也可以提供`vq: '1080'`这将强制 1080p 视频质量。

# javascript - 简化 jQuery 代码 简化

> ID：14600564
> 
> 赞同：0
> 
> 时间：2013-01-30T09:30:35.807
> 
> 标签：javascript, jquery, html

```
<!-- Brands -->
<div class="brands">
  <ul class="thumbnails">
    <li class="span3"> <a href="#" class="thumbnail"> hello1 </a> </li>
    <li class="span3"> <a href="#" class="thumbnail"> hello2 </a> </li>
    <li class="span3"> <a href="#" class="thumbnail"> hello3 </a> </li>
    <li class="span3"> <a href="#" class="thumbnail"> hello4 </a> </li>
    <li class="span3"> <a href="#" class="thumbnail"> hello5 </a> </li>
    <li class="span3"> <a href="#" class="thumbnail"> hello6 </a> </li>
    <li class="span3"> <a href="#" class="thumbnail"> hello7 </a> </li>
    <li class="span3"> <a href="#" class="thumbnail"> hello8 </a> </li>
  </ul>
</div> 
```

这是我的 html 代码，这是我的 jQuery 代码。

```
$(document).ready(function () {
$('.brands li').click(function () {
    var index = $(this).index();
    alert(index);

    if (index < 4) {
        alert('less than 4');
    }

    if (index > 4 && index < 8) {
        alert('less than 8');
    }

    if (index > 8 && index < 12) {
        alert('less than 12');
    }

  });
}); 
```

如果 li 小于第 4 个孩子，我稍后尝试在第 4 个 li 之后插入一个新的 li，然后如果 le 小于第 8 个孩子，则在第 8 个 li 之后插入一个 li，依此类推。有没有办法简化而不是有很多 if 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:36:06.987

您可以使用它来计算它是哪个组而不是 if 语句：

```
var group = parseInt((index - 1) / 4) + 1;
alert((group * 4) + " or less"); 
```

或这个：

```
var group = parseInt(index / 4) + 1;
alert("less than " + (group * 4)); 
```

取决于您想要什么，因为您的问题与您的示例代码不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:40:34.187

你可以做的是：

```
var section=4*~~(index/4);
$('.brands li:nth-child('+section+')').append('<span>new li</span>'); 
```

这将对您的索引进行整数除法，留下适合您的值的 4 的倍数。 [https://stackoverflow.com/a/4228528/1260792](https://stackoverflow.com/a/4228528/1260792)

# objective-c - 如何在iOS中的JSON响应中将所有数据与html响应分开

> ID：14600567
> 
> 赞同：0
> 
> 时间：2013-01-30T09:30:54.907
> 
> 标签：objective-c, ios6, html-parsing, xcode4.5

我正在开发一个聊天应用程序，并且我在来自服务器的 JSON 响应中获取 HTML 响应作为聊天历史记录。以下是回应。

```
{ "status": "valid","chats": [{ "ces": "d5c15cf47d8e8684cfbebbc606f7d901", "fav":"0", "text": "<div class='ca'><i>sometext</i></div><><div class='ca'><b>prasad</b> has joined the chat.</div><><cid_1358766005><div class='co'><span class='notranslate'><b>prasad<timestamp_1358766041_co>:</b></span> hi</div></cid_1358766005><><div class='cl'><disconnected><d6>The party has left or disconnected.  Chat session has ended.</div><>" } ] } 
```

我想将它们分开并在表格视图中显示。

我只是尝试使用以下类别剥离 HTML 标记：

```
-(NSString *) stringByStrippingHTML {
    NSRange r;
    NSString *s = [self copy] ;
    while ((r = [s rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound)
        s = [s stringByReplacingCharactersInRange:r withString:@""];
    return s;
} 
```

但我没有得到所有的数据。我从来没有得到时间戳。请任何人指导我如何获取所有数据。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:42:19.727

您可以使用 NSXMLParser。它是 Apple 用于解析 XML 文档的类。

或者有很多开源库，如 TinyXML、Seismic XML 等，用于解析 XML 文档。

希望能帮助到你 ！！！

# model-view-controller - 在指令中更新 angularjs 中的控制器模型

> ID：14600569
> 
> 赞同：2
> 
> 时间：2013-01-30T09:30:55.247
> 
> 标签：model-view-controller, angularjs

我试图理解 angularJS，它的方法与我看到的脏检查模型更新不同。

基本上，我有一个**指令** `ng-draggable`，它使元素......可拖动。我有一个**模型**与每个具有属性的元素链接，`x`并且`y`- 与模型链接的元素的位置 - 我希望指令更​​新模型。

为此，我尝试`$apply`在指令中使用该函数并设置模型值 x 和 y。然后我还使用该`$observe`函数来更新视图：[这是我的 jsfiddle](http://fiddle.jshell.net/Yannik/pCLNb/1/)。*（注意我使用工厂来捕捉鼠标事件）*

```
 var mousemove = function(event) {
           var y = event.screenY - startY;
           var x = event.screenX - startX;
              scope.$apply(function(){
                  attr.$set('ngModel', {'x': x, 'y': y});
              });
         } 
```

它似乎工作正常。但是，当我使用保存按钮检查模型值时（它在控制台中打印模型），位置 x 和 y 不会更新。

所以我的问题是如何让它工作？更一般地说，这里发生了什么？关于 angularJS 中的 MVC 模式的任何阅读建议（我发现开发人员指南对初学者来说有点苛刻）

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:49:18.150

您的方法的问题是您正在更改整个`ngModel`引用，而不是仅更改其属性之一（`x`和/或`y`）。当你这样做时，你失去了与初始`ngModel`（`players`数组内的对象）的连接，因此失去了与“真实”模型（对象`play`）的连接。

尝试这样做：

```
scope.$apply(function() {                 
    model.$modelValue.x = event.screenX - startX;
    model.$modelValue.y = event.screenY - startY;
}); 
```

**jsFiddle：** [http ://fiddle.jshell.net/y7nVJ/](http://fiddle.jshell.net/y7nVJ/)

# c#-4.0 - 如何使用 C# 和 Sharepoint 2010/13 在 Windows 8 应用程序中实现推送通知？

> ID：14600578
> 
> 赞同：0
> 
> 时间：2013-01-30T09:31:40.487
> 
> 标签：c#-4.0, sharepoint-2010, windows-8, push-notification, sharepoint-2013

我有一个特定要求，即使用 C# 和 Sharepoint 2010 在 Windows 8 应用程序中实现推送通知。我能找到的是使用 Windows Phone 和 sharepoint 的几个链接，但没有使用 Windows 8 + sharepoint 2010/13 的链接。这可能吗？那我怎么能做到这一点。请分享一些链接。

我找到的链接：

> [http://msdn.microsoft.com/en-us/library/jj163784.aspx#BKMK_ServerSideSolution](http://msdn.microsoft.com/en-us/library/jj163784.aspx#BKMK_ServerSideSolution)
> 
> [http://msdn.microsoft.com/en-us/library/jj163784.aspx](http://msdn.microsoft.com/en-us/library/jj163784.aspx)

# android - 如何像图片中给出的那样设置标签栏

> ID：14600579
> 
> 赞同：0
> 
> 时间：2013-01-30T09:31:45.957
> 
> 标签：android, tabbar

我试图设置标签栏，就像图中给出的那样 ![在此处输入图像描述](../Images/365c8da72c608cf8d27fd145c4ba20f6.png)

这是我的 xml 文件`

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="30sp"
            android:layout_marginBottom="40sp"
            android:layout_marginLeft="70sp"
            android:layout_marginRight="70sp"
            android:layout_weight="0"
            android:background="@drawable/rounded_corners_white_bg"
            android:tabStripEnabled="false" >
        </TabWidget>

    </LinearLayout>

</TabHost>` 
```

通过设置左、右和下边距，我到![在此处输入图像描述](../Images/b6d6342d41a6386f329a28d8b39e4aeb.png)现在为止。在这个图中，标签栏显示在底部，黑色背景颜色是我不想要的。因为它是黑色背景色，所以我的活动内容不可见，谁能帮帮我？？？？？？？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:47:42.593

我尝试了您的布局文件，它在左侧、右侧和底部提供了空间。在这里它工作正常。您是否在外面使用任何其他布局......？或者可能是由于您的@drawable/rounded_corners_white_bg。在背景中采用任何其他颜色，例如“#cd9089”。

# java - 用字符串表示替换数字

> ID：14600593
> 
> 赞同：0
> 
> 时间：2013-01-30T09:32:03.617
> 
> 标签：java, android, regex, string

我正在尝试制作一个显示相当大数字（BigInteger large）的程序。为了方便用户，我将数字显示为字符串（1 000 000 = 1 百万）。我下面的代码显示了我当前的尝试。我的问题在于，我要替换的实际数字不会很好而且很圆。这个程序不需要**显示**100% 准确的值，而是给出一个球场图。IE：

```
1 234 567 = 1 Million
1 000 000 = 1 Million
1 934 234 = 1 Million 
```

我当前的代码（为简洁而缩短）：

```
 if (!displayNumbers) {
                StringBuffer sb = new StringBuffer(_combinations);
                String t = sb.reverse().toString();

                Toast.makeText(getApplicationContext(), t, 1).show();

                ...

                if (t.contains("000 000 000 000 000")) {
                    t.replace("000 000 000 000 000", "quadrillion");
                }

                if (t.contains("000 000 000 000")) {
                    t.replace("000 000 000 000", "trillion");
                }

                if (t.contains("000 000 000")) {
                    t.replace("000 000 000", "billion");
                }

                if (t.contains("000 000")) {
                    t.replace("000 000", "million");
                }

                sb = new StringBuffer(t);
                _combinations = sb.reverse().toString();
            } 
```

我正在考虑将零替换为这样的东西，`#'s`以便它只会搜索`x lots of 3 digits`并替换为相应的单词，但我不知道如何实现这一点。我还应该注意，我知道`million, billion, etc`当前在最终输出字符串中是向后拼写的。

编辑：应该为英国读者注意我正在使用美国定义的`*illions`.

编辑 2： 做了更多的谷歌搜索，发现了这个 - [java Regex: replace all numeric values with one number](https://stackoverflow.com/questions/7737946/java-regex-replace-all-numerical-values-with-one-number)。除了我不知道如何修改正则表达式来查找`000 000`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:50:23.723

您可以使用 if 和 else 语句来做到这一点，据我了解，您并不是在寻找精确的表示，因此可以说 1400000 为 100 万。为此，您可以使用如下代码：

```
int myValue
String txt = null;
if (myValue> 500 000 000){
       txt = String.ValueOf((int) myValue/1000000000) + " Billion"
} else if (myValue> 500 000){
       txt = String.ValueOf((int) myValue/1000000) + " Million"
} else if (myValue> 500) {
       txt = String.ValueOf((int) myValue/1000) + " Thousand"
} 
```

这应该适用于您描述的简单用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:52:09.980

您的号码（文本）仅用于显示目的。在将数字转换为字符串后对其进行操作是个坏主意。

您为什么不将文本解析为整数并使用正确的显示方式对其进行格式化。 [这是一个你应该看看的例子](http://www.rgagnon.com/javadetails/java-0426.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:07:41.563

我要感谢其他所有人对如何解决这个问题的建议，我相信他们都是可能的。但是，我发现最好的方法仍然是将 BigInteger 转换为字符串，而**不是**添加空格。

如果字符串的长度小于 6，我将其保留原样并简单地添加空格以进行外观。如果它比 6 长，我会根据字符串长度的 Mod 取前 1、2 或 3 个数字，并将它们用作在开始时显示的实际数字（100 万、340 亿、124 万亿等）。

然后查看剩余字符串的长度，如果长度超过一定数量，只需将更多字符串添加到显示文本中。

如果有人需要澄清这一点，请不要犹豫，问我！这是 pastebin 的链接 - [http://pastebin.com/3X681UkG](http://pastebin.com/3X681UkG)

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:31:14.837

将超过一千的数字四舍五入到一个有效数字的示例实现。

可选地，三位数字组可以用逗号或空格分隔。

```
private final static String[] illions = { 
    "m", "b", "tr", "quadr", "quint", "sext", "sept", "oct", "non", "dec",
    "undec", "duodec", "tredec", "quattuordec", "quindec", "sexdec",
    "septendec", "octodec", "novemdec", "vigint", "unvigint", "duovigint", 
    "trevigint", "quattuorvigint", "quinvigint", "sexvigint", "septenvigint",
    "octovigint", "novemvigint", "trigint", "untrigint", "duotrigint" 
};

private static String approximate( String n ) {  
    String approx = n;

    if ( n != null && n.matches( "^\\d{1,3}[\\s,]?(\\d{3}[\\s,]?)*\\d{3}$" ) ) {  
        n = n.replaceAll( "[\\s,]", "" );            
        int i = n.length() + 2;

        if ( i < 105 ) {
            int rnd = (int) Math.round( Double.parseDouble( n.substring( 0, 2 ) ) / 10 )
                    * (int) Math.pow(10, i % 3);
            n = i > 8 ? illions[ i / 3 - 3 ] + "illion" : "thousand";   
            approx = rnd  + " " + n;
        }
    }

    return approx;
} 
```

测试

```
System.out.printf("%s\n%s\n%s\n%s\n%s\n%s\n%s\n%s\n%s\n%s\n%s\n%s\n%s\n%s",
    approximate("999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"),  // "1000 duotrigintillion"    
    approximate("4857476486598746598743265987426598724365987265987324598726598734625987564987456"),  // "5 quinvigintillion"
    approximate("56843584275874587243582837465847326554"),  // "60 undecillion"
    approximate("1 345 678 910 111 213"),                   // "1 quadrillion"
    approximate("47,648,658,437,651"),                      // "50 trillion"
    approximate("9 891 011 123"),                           // "10 billion"
    approximate("687654321"),                               // "700 million"
    approximate("32 456 999"),                              // "30 million"
    approximate("2,678,910"),                               // "3 million"
    approximate("1 234 567"),                               // "1 million"
    approximate("123456"),                                  // "100 thousand"
    approximate("17,654"),                                  // "20 thousand"
    approximate("8765"),                                    // "9 thousand"
    approximate("654")                                      // "654"
); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-30T09:48:45.913

我只是简单地计算数字。从头开始的粗略代码：

```
String result = "";
Pattern pattern = Pattern.compile("[\\s0-9]+");
Matcher matcher = pattern.matcher(t);
int index = 0;
while (matcher.find()) {
    int newIndex = matcher.start();
    result += t.substring(index, newIndex);
    result += convert(matcher.group());

    index = matcher.end() + 1;
}

result += t.substring(index, t.length() - 1);

private String convert(String uglyNumber) {

    // get rid of whitespaces
    String number = uglyNumber.replace("\\s", "");

    // simply count digits
    if( 6 < number.length() && number.length() <= 9 ) {
    return "million";
    } else if( 9 < number.length() && number.length() <= 12 ) {
        return "million";
    } else ...

    return ulgyNumber;
} 
```

如果数字比数字和空格的简单混合更复杂，您可能想看看这个[正则表达式站点](http://www.regular-expressions.info/floatingpoint.html)：

# cordova - 科尔多瓦 Xcode 使用科尔多瓦 2.3.0 构建错误

> ID：14600595
> 
> 赞同：1
> 
> 时间：2013-01-30T09:32:15.727
> 
> 标签：cordova, xcode4.5, phonegap-plugins, phonegap-build

将 Xcode 项目从 Cordova 2.2.0 升级到 2.3.0 构建失败：3 个错误“MainCommandDelegate”不能使用“超级”，因为它是根类”

*   (id)getCommandInstance:(NSString*)className { return [super getCommandInstance:className]; }
*   (BOOL)execute:(CDVInvokedUrlCommand*)command { return [super execute:command]; }
*   (NSString*)pathForResource:(NSString*)resourcepath; { return [super pathForResource:resourcepath]; }

和 1 个错误：''MainCommandQueue' 不能使用 'super'，因为它是一个根类' - (BOOL)execute:(CDVInvokedUrlCommand*)command { return [super execute:command]; }

请帮忙！非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:15:01.253

问题解决了 ：

我们将新的 MainViewController.m 移到了我们的项目中。另外我们要声明这些接口并导入相关的头文件：

```
#import <Cordova/CDVViewController.h>
#import <Cordova/CDVCommandDelegateImpl.h>
#import <Cordova/CDVCommandQueue.h>

@interface MainViewController : CDVViewController
@end

@interface MainCommandDelegate : CDVCommandDelegateImpl
@end

@interface MainCommandQueue : CDVCommandQueue
@end 
```

# jquery - 如何遍历Json数据以在Jquery中检索值

> ID：14600601
> 
> 赞同：0
> 
> 时间：2013-01-30T09:32:28.950
> 
> 标签：jquery, asp.net, ajax, json

嗨伙计们！！！我有一个通过 jason 数据填充的网格。现在我想使用来自服务器端代码的 jquery ajax 调用来检索 jason 值...

下面是我的服务器端代码...

getGriddahico.ashx

```
 string json ="";
                        json = json + "{\n";
                        json = json + " \"page\":\""+intpage+"\",\n";
                        json = json + "\"total\":"+total_pages+",\n";
                        json = json + "\"records\":"+total+",\n";
                        json = json + "\"rows\": [";
                        rc = false;

                        while(rs.Read()){

                            if(rc){
                                json = json + ",";
                            }
                            json = json + "\n{";
                            json = json + "\"price\":\"" + Convert.ToInt32(rs["price"]) + "\",";
                            json = json + "\"cell\":[" + Convert.ToInt32(rs["price"]) + "";
                            json = json + ",\"" + Convert.ToString(rs["username"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["ordinal"]) + "\"";
                            json = json + ",\"" + Convert.ToString(rs["toc"]) + "\"]";
                            json = json + "}";

                            rc=true;
                        }
                        json = json +"]\n";

                        json = json +"}"; 
```

这是我的 Jquery Ajax 调用代码。

```
 $(document).ready(function () {
        $.getJSON('getGriddahico.ashx', function (data) {
            //loop thru  json data
            //data will contain  json values < --
            $.each(data, function (key, val) {
                console.log(val);
            });
        });
    }); 
```

请大家帮我如何将值从服务器端数据读取器检索到客户端变量.. 提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:42:26.773

对我来说，看起来好像您正在返回一个字符串值，然后您需要在 JavaScript 中将其解析为 json 对象。

使用代码[$.parseJSON()](http://api.jquery.com/jQuery.parseJSON/)

```
$.getJSON('getGriddahico.ashx', function (data) {

    /* convert to json object */
    var json $.parseJSON(data);

    //loop thru  json data
    //data will contain  json values
    $.each(json, function (key, val) {
        console.log(val);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:46:24.613

当你得到`-2147483648 -2147483648 150508 []`第四个`([])`是一个数组。
所以你将不得不再次循环以从内部数组中获取值。

您需要多个循环。我认为下面应该工作。
在第一个循环中，您将获得不是数组的值，
在内部循环中，您将获得数组值。 和的
值`page`，在第一个循环 和内部循环中，您将得到和`total``records`
`price``cell`

```
$(document).ready(function () {
    $.getJSON('getGriddahico.ashx', function (data){ 
        $.each(data, function(idx, obj){ 
           $.each(obj, function(key, value){
                console.log(key + ": " + value);
           });
    });
}); 
```

你可以参考这个链接

[用jquery循环一个json对象数组](https://stackoverflow.com/questions/6191646/looping-over-a-json-object-array-with-jquery)

# jquery - live() 的“输入”事件的支持程度如何

> ID：14600606
> 
> 赞同：1
> 
> 时间：2013-01-30T09:32:48.143
> 
> 标签：jquery

我们在一个网站上使用 jQuery 1.4.4，我遇到了一个问题，这是在文本框上使用**keyup**事件引起的。问题是用户以某种方式设法更改值而无需实际输入。我很快注意到三个原因：

*   文本框中的自动完成
*   您可以将一个值拖到文本框中
*   您可以右键单击->粘贴值

我环顾四周，发现我可以使用**更改**事件来解决问题。这适用于自动完成，但不能解决将值拖入文本框的问题。我什么都做不了，然后我遇到了**输入**事件。

这个事件似乎解决了我所有的问题，它是我需要用来解释 keyup、拖动值和使用自动完成的唯一事件。

我的问题很简单：它的支持程度如何？我似乎找不到任何关于它的信息。

编辑：澄清一下，我知道 live 已被弃用，我们必须保持 jquery 版本相同，以免影响我们。感谢您的考虑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:37:37.773

根据[https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/input](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/input)，所有浏览器都存在基本支持。

（*但关于问题标题，[`.live()`](http://api.jquery.com/live)已弃用。使用[`.on()`](http://api.jquery.com/on)语法*）

# java - 错误：不幸的是我的拳头应用程序已停止工作

> ID：14600609
> 
> 赞同：0
> 
> 时间：2013-01-30T09:33:02.640
> 
> 标签：java, android

我正在尝试为 Android 应用程序开发一个聊天室。

在第一个屏幕上，`list view`显示 a。单击 中的一个项目时`listview`，将启动一个活动，其中我显示了两个称为`Chat`和的按钮`Draw`。当我单击聊天时，我将启动另一个名为 as`DisplayMessageActiviy`的活动，其中有一个区域 for`EditText`和一个名为 as 的按钮`Send`。

但是，当我单击 时`Chat`，我收到以下错误 :: `Unfortunately My Fist App has stopped working`。

我正在使用以下代码行：

`SingleListActivity.java`：

```
//chatMessage is the xfunction to be run on clicking on chat button
public void chatMessage(View view) 
{
    Intent intent_chat = new Intent(this, DisplayMessageActivity.class);
    //EditText editText = (EditText) findViewById(R.id.edit_message);
    //String message = editText.getText().toString();
    //intent_chat.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent_chat);
} 
```

`DisplayMessageActivity.java`：

```
public class DisplayMessageActivity extends Activity {

@SuppressLint("NewApi")

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display_message);           

}

public void displayChat(View view) 
{
    onResume();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    TextView text = (TextView) findViewById(R.id.chatWindow);
    EditText editBox = (EditText)findViewById(R.id.chatBox);

    String str = text.getText().toString(); 
    text.setText(str +"\n"+editBox.getText().toString());
    editBox.setText("");       

    editBox.setHint("Type in here");

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

}

我在 LogCat 中收到以下错误：

```
01-30 10:37:40.055: E/AndroidRuntime(724): FATAL EXCEPTION: main
01-30 10:37:40.055: E/AndroidRuntime(724): java.lang.IllegalStateException: Could not execute method of the activity
01-30 10:37:40.055: E/AndroidRuntime(724):  at android.view.View$1.onClick(View.java:3597)
01-30 10:37:40.055: E/AndroidRuntime(724):  at android.view.View.performClick(View.java:4202)
01-30 10:37:40.055: E/AndroidRuntime(724):  at android.view.View$PerformClick.run(View.java:17340)
01-30 10:37:40.055: E/AndroidRuntime(724):  at android.os.Handler.handleCallback(Handler.java:725)
01-30 10:37:40.055: E/AndroidRuntime(724):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-30 10:37:40.055: E/AndroidRuntime(724):  at android.os.Looper.loop(Looper.java:137)
01-30 10:37:40.055: E/AndroidRuntime(724):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-30 10:37:40.055: E/AndroidRuntime(724):  at java.lang.reflect.Method.invokeNative(Native Method)
01-30 10:37:40.055: E/AndroidRuntime(724):  at java.lang.reflect.Method.invoke(Method.java:511)
01-30 10:37:40.055: E/AndroidRuntime(724):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-30 10:37:40.055: E/AndroidRuntime(724):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-30 10:37:40.055: E/AndroidRuntime(724):  at dalvik.system.NativeStart.main(Native Method)
01-30 10:37:40.055: E/AndroidRuntime(724): Caused by: java.lang.reflect.InvocationTargetException
01-30 10:37:40.055: E/AndroidRuntime(724):  at java.lang.reflect.Method.invokeNative(Native Method)
01-30 10:37:40.055: E/AndroidRuntime(724):  at java.lang.reflect.Method.invoke(Method.java:511)
01-30 10:37:40.055: E/AndroidRuntime(724):  at android.view.View$1.onClick(View.java:3592)
01-30 10:37:40.055: E/AndroidRuntime(724):  ... 11 more
01-30 10:37:40.055: E/AndroidRuntime(724): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.myfirstapp/com.example.myfirstapp.DisplayMessageActivity}; have you declared this activity in your AndroidManifest.xml?
01-30 10:37:40.055: E/AndroidRuntime(724):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1618)
01-30 10:37:40.055: E/AndroidRuntime(724):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
01-30 10:37:40.055: E/AndroidRuntime(724):  at   android.app.Activity.startActivityForResult(Activity.java:3370)
01-30 10:37:40.055: E/AndroidRuntime(724):  at android.app.Activity.startActivityForResult(Activity.java:3331)
01-30 10:37:40.055: E/AndroidRuntime(724):  at android.app.Activity.startActivity(Activity.java:3566)
01-30 10:37:40.055: E/AndroidRuntime(724):  at android.app.Activity.startActivity(Activity.java:3534)
01-30 10:37:40.055: E/AndroidRuntime(724):  at com.example.myfirstapp.SingleListActivity.chatMessage(SingleListActivity.java:42)
01-30 10:37:40.055: E/AndroidRuntime(724):  ... 14 more 
```

`AndroidManifet.xml`::

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.myfirstapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".SingleListItem"
        android:label="@string/title_activity_single_list_item" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".SingleListActivity"
        android:label="@string/title_activity_single_list" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.example.appfirst.DisplayMessageActivity"
        android:label="@string/title_activity_display_message"
        android:parentActivityName="com.example.myfirstapp.MainActivity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.myfirstapp.MainActivity" />
    </activity>
</application> 
```

有人可以帮我解决错误吗？谢谢和问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:36:06.627

您必须在您的问题中发布完整的堆栈跟踪（logcat 错误）和完整代码

无论如何只是假设我认为问题就在这里（假设 - 需要更多细节）

```
public void displayChat(View view) 
{
    onResume();
} 
```

您永远不能`onResume()`在 Android Activity 中显式调用..

制作一个具有 UI 更新代码的函数，将其写入`displayChat(View view)`

像，

```
public void displayChat(View view) 
{
     updateUI();
} 
```

**更新：**

```
However, when I click on Chat, I am getting the following error :: Unfortunately My Fist App has stopped working 
```

你确定你已经在文件中插入了**DisplayMessageActivity 。**`activity tag``AndroidManifest.xml`

# ssrs-2008 - 从图表图例向下钻取

> ID：14600610
> 
> 赞同：2
> 
> 时间：2013-01-30T09:33:02.307
> 
> 标签：ssrs-2008, reportbuilder, reportbuilder3.0

我正在使用 SSRS 2008 (Report builder 3.0) 构建报告

恐怕我知道答案，但仍然想知道是否有办法从 Legend 区域链接到钻取报告？我知道我可以从数据标签中做到这一点。

![在此处输入图像描述](../Images/6b38df3439d41fc4cb6b7fad78ca81de.png)

有没有人成功地创造了一些解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:29:13.790

我不会声称这是我自己的，但我一读到它就觉得自己很傻。;)

基本上在图表旁边使用 tablix。

[SSRS（报告服务）将图例（作为 Tablix）与具有向下钻取链接的图表或图形分开](http://roberthydell.blogspot.com.au/2011/07/ssrs-reporting-services-separate-legend.html)

# ios - 如何在网址中使用通配符来下载文件名定期更改的文件

> ID：14600614
> 
> 赞同：0
> 
> 时间：2013-01-30T09:33:14.107
> 
> 标签：ios, url, webaddress

我正在将文件从 Web 服务器下载到我的 IOS iPad 应用程序中。我的问题是，现在硬编码的 url 地址可能会发生变化。如何在我的 url 地址中使用通配符来补偿更改的地址

例如，这是当前的 url 地址 [http://www.testserver/modules/public/sheets/HZ_TECAPET__black_gb_DE_201301.pdf](http://www.testserver/modules/public/sheets/HZ_TECAPET__black_gb_DE_201301.pdf)

201301 发生了变化，那么如何使用通配符对 url 地址进行编码？

例如[http://www.testserver/modules/public/sheets/HZ_TECAPET__black_gb_DE_??????.pdf](http://www.testserver/modules/public/sheets/HZ_TECAPET__black_gb_DE_??????.pdf)

地址的第一部分保持不变，只是末尾的数字可能会发生变化

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:01:58.780

那就有点难了。但是您可以在服务器端执行此操作。您可以编写一个将在服务器上运行的简单脚本 (BASH)。它将统计并列出目录中的所有文件并将结果保存在txt中，您可以通过[http://example.com/files.txt访问](http://example.com/files.txt)

就像是：

```
for file in "$sheets"/*
do
  echo "$file" >> files.txt
done 
```

编辑：

啊哈，所以实际上有一个模式。然后您可以尝试下载每个可能的模式。然后检查 HTTP 状态码是 200（OK）还是 404（Not found）。

# bash - 每次我在 Linux 上自动更改目录时，如何让目录中的文件/文件夹显示出来？

> ID：14600615
> 
> 赞同：1
> 
> 时间：2013-01-30T09:33:15.150
> 
> 标签：bash

我在虚拟机上使用[Crunchbang](http://crunchbang.org/) (linux)，每次更改目录时，我都会自动`ls`检查那里有什么。我假设可以编写一个脚本使其自动执行此操作。我还假设它会是某种 bash 脚本，但我可能曾经写过一个，所以我不知道从哪里开始。谁能给我一些关于如何解决这个问题的指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:45:39.530

将此添加到`~/.bash_profile`

```
foo ()
{
  history 1 >q
  read k <q
  rm q
  set $k
  if [ $2 = cd ]
  then
    ls
  fi
}    
PROMPT_COMMAND=foo 
```

[**参考**](http://github.com/svnpenn/dotfiles/blob/master/.exports)

# mysql - MySQL 日期转换（“2013 年 1 月 30 日”到“2013 年 1 月 28 日”）

> ID：14600617
> 
> 赞同：0
> 
> 时间：2013-01-30T09:33:19.770
> 
> 标签：mysql, sql, date, formatting

在我的页面（PHP）中，我的日期格式如下：“2013 年 1 月 30 日”。我想将此格式转换为“2013-01-28”。

是否可以使用 MySQL 日期格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:34:55.740

用于`STR_TO_DATE`将字符串转换为日期

```
SELECT DATE(STR_TO_DATE(colName, '%d-%b-%Y'))   -- date datatype 
```

或者

```
SELECT DATE_FORMAT(STR_TO_DATE(colName, '%d-%b-%Y'),'%Y-m-%d')  -- string type 
```

# linux - Linux 询问自定义/别名命令的密码？

> ID：14600618
> 
> 赞同：0
> 
> 时间：2013-01-30T09:33:21.200
> 
> 标签：linux, bash, shell, passwords, command

我`alias`在 Linux 中使用了很多命令，但是如何用 p/w 保护每个命令？

可以说我做了：

```
$ vi .bash_profile
alias goto1='echo ip=192.168.1.1, pw=abc; ssh root@192.168.1.1;'
alias goto2='echo ip=192.168.1.2, pw=xyz; ssh root@192.168.1.2;'

$ source .bash_profile
$ goto1
ip=192.168.1.1, pw=abc
root@192.168.1.1's password: _ 
```

这就是基于 Unix/Linux 系统的完美品味。我经常使用这样的东西！
但问题是：

*   如何`alias`通过提示保护这些自定义命令`password`？
*   例如，当我输入`$ goto1`

有什么好主意！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:39:23.860

您可以将这些别名命令添加到 (super_user) /root/.bashrc 文件中。

对于想要使用密码或不使用密码运行该命令的普通用户，您可以使用“sudo”限制。

[http://www.linux.com/learn/tutorials/306766-linux-101-introduction-to-sudo](http://www.linux.com/learn/tutorials/306766-linux-101-introduction-to-sudo)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T10:10:51.473

您可以将凭据放入受限权限文件中，例如

信用证.txt

```
ip=192.168.1.1
pw=abc 
```

然后将其设置为 0600 权限，以便只有您和 root 才能读取它。您的别名将是：

```
alias gotox='cat creds.txt; ssh root@<ip>;' 
```

如果另一个用户尝试使用别名，则他们无权读取 creds.txt，如果他们读取了您的 bashrc，则不存在敏感信息。

# python - 在 sqlalchemy ORM 查询中使用 NOT EXISTS 子句

> ID：14600619
> 
> 赞同：19
> 
> 时间：2013-01-30T09:33:23.467
> 
> 标签：python, sqlalchemy

我想将以下原始 sql 查询转换为 sqlalchemy ORM 查询：

```
SELECT * FROM kwviolations AS kwviol WHERE kwviol.proj_id=1 AND NOT EXISTS (SELECT * FROM
kwmethodmetrics AS kwmetrics WHERE kwmetrics.kw_id=kwviol.kw_id AND kwmetrics.checkpoint_id=5); 
```

我尝试了以下 ORM 查询但没有成功：

```
self.session.query(KWViolations).filter(KWViolations.proj_id==project.id).\
filter(and_(~KWViolations.kw_id.any(KWMethodMetrics.kw_id==KWViolations.kw_id),KWMethodMetrics.checkpoint_id==checkpoint.id)) 
```

有人可以帮忙吗？提前致谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-31T00:21:48.233

`kw_id`这里似乎是一个标量列值，所以你不能调用`any()`它 -`any()`只能从[关系（）](http://docs.sqlalchemy.org/en/rel_0_8/orm/relationships.html#sqlalchemy.orm.relationship)绑定属性中获得。由于我在这里看不到其中之一，因此您可以直接调用[exists()](http://docs.sqlalchemy.org/en/rel_0_8/core/expression_api.html?highlight=exists#sqlalchemy.sql.expression.exists)：

```
from sqlalchemy import exists

session.query(KWViolations).filter(KWViolations.proj_id == project.id).\
    filter(
        ~exists().where(
                and_(
                    KWMethodMetrics.kw_id == KWViolations.kw_id,
                    KWMethodMetrics.checkpoint_id == checkpoint.id
                )
        )
    ) 
```

# python - 在 Python 中的同一个类中创建多个对象

> ID：14600620
> 
> 赞同：2
> 
> 时间：2013-01-30T09:33:27.023
> 
> 标签：python

我希望能够通过使用类中的方法返回一个类的多个对象。像这样的东西。

```
class A:
    def __init__(self,a):
    self.a = a

    def _multiple(self,*l):
        obj = []
        for i in l:
            o = self.__init__(self,i)
            obj.append(o)
        return obj 
```

当我在 iPython（iPython 0.10 和 Python 2.6.6）上执行此操作时，我得到以下信息

```
In [466]: l = [1,2]
In [502]: A._multiple(*l)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

TypeError: unbound method _multiple() must be called with A instance as 
first argument (got int instance instead) 
```

我绝对不清楚调用以及“自我”关键字的使用。你能帮我纠正一下吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:37:28.560

> 类型错误：必须使用 A 实例作为第一个参数调用未绑定的方法 _multiple()（改为获取 int 实例）

错误是不言自明的。这意味着实例方法被称为类方法。要将实例方法作为类方法添加装饰器`@classmethod`

```
>>> class A:
    def __init__(self,a):
        self.a = a
    @classmethod
    def _multiple(cls,*l):
        #Create multiple instances of object `A`
        return [A(i) for i in l]

>>> l = [1,2]
>>> A._multiple(*l)
[<__main__.A instance at 0x066FBB20>, <__main__.A instance at 0x03D94580>]
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:36:56.183

你想要一个类方法：

```
class A:
    def __init__(self,a):
        self.a = a

    @classmethod
    def _multiple(cls,*l):
        obj = []
        for i in l:
            o = cls(i)
            obj.append(o)
        return obj

>>> A._multiple(1, 2) # returns 2 A's
[<__main__.A instance at 0x02B7EFA8>, <__main__.A instance at 0x02B7EFD0>] 
```

`classmethod`装饰器将通常的第一个参数替换为`self`对类的引用（在本例中`A`）。请注意，这样做意味着如果您子类化`A`并调用`_multiple`子类，它将被传递给子类。

```
class B(A): pass

>>> B._multiple(1, 2, 3)
[<__main__.B instance at 0x02B87C10>, <__main__.B instance at 0x02B87D28>, <__main__.B instance at 0x02B87CD8>] 
```

将创建一个`B`对象列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:36:30.357

只需更换：

```
 self.__init__(self, i) 
```

和：

```
 A(i) 
```

这样做的原因是 init 方法改变了调用它的对象，而“self”是当前实例。您使用构造函数（与类同名）来创建一个新实例。

# sencha-touch - 如何隐藏按钮是 Sencha Touch 2.1

> ID：14600623
> 
> 赞同：0
> 
> 时间：2013-01-30T09:33:55.057
> 
> 标签：sencha-touch, sencha-touch-2.1

我在这个网站上发现了类似的问题，但没有一个答案对我有用。这是我要隐藏的按钮（查看）：

```
{
        xtype: 'button',
        id: 'btn_messenger',
        text: 'Messenger'
    } 
```

该视图的控制器具有初始化功能：

```
init : function() {
    var me = this;
    me.callParent();
    me.hideMessengerButton(me);
} 
```

这是应该隐藏按钮的功能：

```
hideMessengerButton: function(me) {
    var user = me.getLoggedUser(); // return user or undefined
    if (user == undefined) {
        Ext.select('#btn_messenger').hide(); // Does nothing
    }
} 
```

我试过这些选项：

`Ext.getCmp('btn_messenger').hide(); // Ext.getCmp('btn_messenger') returns undefined`

`Ext.getCmp('#btn_messenger').hide(); // Ext.getCmp('#btn_messenger') returns undefined`

在控制器的 refs 中有`btn_messenger: '#btn_messenger'`，所以我尝试过：

`this.getBtn_messenger().hide() // this.getBtn_messenger() returns undefined`

提前感谢您的帮助。

PS.：我不知道这是否重要，但上面提到的观点不是主要观点。在主视图上点击按钮后按下它。

**编辑：**

这是控制器：

```
Ext.define('First.controller.HomePage', {
extend : 'First.controller.Controller',
requires : ['First.view.Main', 'First.view.HomePage'],

config : {
    refs : {
        pnl_home: 'pnl_home',
        btn_messenger : '#btn_messenger'
    },

    control : {
        btn_messenger : {
            tap : 'btn_openMessenger'
        }
        pnl_home: {
            show: 'hideMessengerButton'
        }
    },
},

init : function() {
    var me = this;
    me.callParent();
},

btn_openMessenger : function() {
    Ext.Msg.alert('Open', 'Messenger');
},

/**
 * Hide meseenger button when user's not logged in
 */
hideMessengerButton : function() {
    var me = this;
    var user = me.getLoggedUser();
    if (user == undefined) {
        me.getBtn_messenger().setHidden(true);
    }
} 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:24:43.187

[http://docs.sencha.com/touch/2-1/#!/api/Ext.Button-method-setHidden](http://docs.sencha.com/touch/2-1/#!/api/Ext.Button-method-setHidden)

在您的操作中替换参考

```
refs : {
        btnMessenger: '#btn_messenger'
    }, 
```

然后当您需要此按钮时，请使用下一步

```
this.getBtnMessenger().setHidden(true) 
```

我记得在初始化按钮上还没有添加到dom

```
lauch : function() {
    this.hideMessengerButton();
},
hideMessengerButton: function() {
    var user = this.getLoggedUser(); // return user or undefined
    if (user == undefined) {
        this.getBtnMessenger().setHidden(true); // Does nothing
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:27:07.530

我已将`pnl_home: 'pnl_home'`, 添加到 refs 并在面板上调用 show 事件。修改后的代码可以在我最初的帖子中找到。

# wcf - 从 WCF 获取 ServiceContract 方法

> ID：14600627
> 
> 赞同：0
> 
> 时间：2013-01-30T09:34:30.233
> 
> 标签：wcf, operationcontract

我想列出具有“OperationContractAttribute”属性的 WCF 服务中的所有方法

为此，我使用以下代码：

```
var service = assembly.GetType(typeName);
        if (service == null)
            return webMethodsInfo;
        var methodsInfo = service.GetMethods();
        webMethods = methodsInfo.Where(method => method.GetCustomAttributes
             (typeof(OperationContractAttribute), true).Any()).ToList(); 
```

因此，在接口（IClassA）中指定了 OperationContractAttribute，当我尝试在 ClassA 类中搜索此方法属性时，它找不到它，但是我为方法 GetCustomAttributes 指定了标志 true 以搜索祖先

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:41:12.827

这会做

```
 MethodInfo[] methods = typeof(ITimeService).GetMethods();

            foreach (var method in methods)
            {
                if (((System.Attribute)(method.GetCustomAttributes(true)[0])).TypeId.ToString() == "System.ServiceModel.OperationContractAttribute")
                {                 
                    string methodName = method.Name;
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:58:25.603

```
webMethods = service.GetInterface(serviceContract).GetMethods().Where(
    method => method.GetCustomAttributes
      (typeof(OperationContractAttribute)).Any())
      .ToList(); 
```

# keymando - Keymando：发送击键时删除修饰键

> ID：14600629
> 
> 赞同：0
> 
> 时间：2013-01-30T09:34:32.383
> 
> 标签：keymando

使用 Keymando 发送击键时，是否可以删除当前按住的修饰符？

一个例子：

```
map "<Cmd-d>" do
    send("a")
end 
```

这发送`Cmd+a`而不是`a`我想要的。（这是一个虚构的例子，但说明了这一点。）

AutoHotkey（这是一种 Windows 的键重映射和自动化工具）在发送击键时释放任何按住的修饰键（如果需要不释放修饰键，也可以为此指定一个参数）。

我怎样才能在 Keymando 中做同样的事情？即使没有“智能”方式来释放按住的修饰符，我是否可以手动指定我想要释放的修饰符（同样，AutoHotkey 允许发送类似的击键`{Ctrl Up}`。在 Keymando 中是否有类似的东西）

最后，对于 Mac 版 Keymando，还有其他更强大的替代品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:06:18.370

此问题已在最新的 1.4 版本中修复。

[http://keymando.com/download.html](http://keymando.com/download.html)

# java - java在控制台中绘制图形或树

> ID：14600633
> 
> 赞同：9
> 
> 时间：2013-01-30T09:34:40.873
> 
> 标签：java, graphics, charts, console, command-line-interface

有谁知道在控制台模式下“渲染”图或至少树的意思（在控制台中绘制）？

通过以 ASCII 模式绘制一些图形，我将能够在一个非常长的过程结束时渲染小图，以便对收集到过程中的一些统计数据有一个令人讨厌和有趣的视图。

我会很高兴发现一个可以做到这一点的库，并且我会保持 100% java 的进程，没有 shell-hack 或第三方软件。

- 编辑

@lbalazscs 和 @Fortega 给出了有趣的答案，但我的问题的背景是要知道*它是否存在*这样的库，我将添加一些我第一次错过的细节：

输出应该能够显示树、二叉树（[此处由@lbalazscs 链接](https://stackoverflow.com/questions/4965335/how-to-print-binary-tree-diagram)），*还可以*显示简单的图形，例如条形图等。

我会让这个问题“悬而未决”一段时间，如果没有明确的答案，@lbalazscs 会明白的；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T16:57:27.920

您可以用最少的代码打印 ascii 树。请参阅此问题的第二个答案：[如何打印二叉树图？](https://stackoverflow.com/questions/4965335/how-to-print-binary-tree-diagram)

（第二个答案，因为这不仅适用于二叉树）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-04T15:08:59.903

对于来这里寻找纯 Java 树绘图库的人：我推荐[text-tree](https://gitlab.com/barfuin/text-tree)，它可以像这样绘制树（以及其他样式，如果需要的话，还有很多可能的配置）：

```
some text
├─── more text
├─── and more
│    ├─── still more
│    ╰─── more
╰─── the end 
```

*完全披露：我是文本树的作者。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T16:24:07.143

[如果我没记错的话，你可以用javaplot](http://gnujavaplot.sourceforge.net/JavaPlot/About.html)绘制 ascii 图

# html - 向使用图像切片制作的网站添加免责声明

> ID：14600636
> 
> 赞同：1
> 
> 时间：2013-01-29T16:19:44.500
> 
> 标签：html, image

我正在尝试为使用图像切片构建的网站创建免责声明（如果我的术语有误，请随时纠正我）。该域位于[http://elitemedicalsupplyofny.com](http://elitemedicalsupplyofny.com)。我在页面底部添加一行文本所做的每一次尝试都以不希望的结果结束。要么图像被推开，要么文本显示在页面底部，并且需要滚动才能查看免责声明（不理想，但到目前为止，鉴于我对 html 的了解，这似乎是最好的解决方案）。

我想知道是否有人有任何类型的解决方案可以在网站底部添加免责声明，在当前联系信息下方放置一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:20:44.790

这是因为您将版权信息添加到设置大小的表格中，而不是添加到表格中，您应该通过样式更灵活的 DIV 样式添加它。

**在表格下方添加免责声明**

```
<table> Your Table Contents Here </table>

<div>
    <p style="text-align:center;>I am the Disclaimer</p>
</div> 
```

**页面底部的固定免责声明**

```
<table> Your Table Contents Here </table> 

<div style="position:fixed;left:0;bottom:0;width:100%;">
    <p style="text-align:center;>I am the Disclaimer</p>
</div> 
```

# 带有 CSS 的固定位置免责声明或页脚

而不是使用内联样式，您应该使用 css 来发挥自己的优势，如下所示：

**HTML**

```
<table> Your table contents here </table>

<div class="disclaimer">
    <p>I am the Disclaimer</p>
</div> 
```

**CSS**

```
.disclaimer {
            position:fixed;
            width:100%;
            left:0;
            bottom:0;
            }
.disclaimer p {
              text-align:center;
              } 
```

# php - 用破折号替换 URL 中的空格

> ID：14600639
> 
> 赞同：24
> 
> 时间：2013-01-30T09:35:10.980
> 
> 标签：php, url-rewriting

我设法替换了特殊字符，例如：; / 等在我的 URL 中，但现在它又有了空格。这是我的代码：

```
<h3><a href="<?php echo (isset($row_getDisplay['post_id']) ? $row_getDisplay['post_id'] : ''); ?>_<?php echo str_replace(array(':', '\\', '/', '*'), ' ', urldecode($row_getDisplay['title'])); ?>.html" ><?php echo (isset($row_getDisplay['title']) ? $row_getDisplay['title'] : ''); ?></a></h3> 
```

我希望它喜欢它删除特殊字符以及用破折号替换空格。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-30T09:38:24.643

尝试`str_replace(' ', '-', $string);`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-30T09:40:12.417

您可以使用 preg_replace：

```
preg_replace('/[[:space:]]+/', '-', $subject); 
```

这将用一个“-”破折号替换所有空间实例。因此，如果您有双倍、三倍等空间，那么它仍然会给您一个破折号。

编辑：这是我去年用来整理我的 URL 的通用函数

```
 function formatUrl($str, $sep='-')
    {
            $res = strtolower($str);
            $res = preg_replace('/[^[:alnum:]]/', ' ', $res);
            $res = preg_replace('/[[:space:]]+/', $sep, $res);
            return trim($res, $sep);
    } 
```

它将所有非字母数字字符转换为空格，然后将所有空格转换为破折号，然后修剪字符串末尾/开头的任何破折号。这比必须在 str_replace 中列出特殊字符更好

# android - 如何创建服务来下载 XMPP 联系人？

> ID：14600640
> 
> 赞同：0
> 
> 时间：2013-01-30T09:35:12.220
> 
> 标签：android, service, xmpp

在我的应用程序中，我使用 XMPP 进行聊天，在此我必须创建一个服务以将所有联系人从 XMPP 服务器下载到我的数据库。我现在正在做下面的代码，获取所有联系人需要很长时间，我没有兴趣让用户等待完成下载所有联系人。由于这个原因，我想使用服务在后台完成这项工作，然后将它们存储在数据库中，如果数据库有新联系人，我将使用提供程序更新联系人。

我知道如何创建服务，但在这里我无法将 Roster 和 XMPP 连接等参数传递给服务，这些参数是从 XMPP 服务器下载联系人所必需的。请任何人指导我如何解决这个问题。这是我现在使用的代码。

```
public class GmailXmppClient { 

   public GmailXmppClient(ChatAccountsFragment _fragment, Context _context) {

      this.fragment = _fragment;
      this.context = _context;

      ConnectionConfiguration config = new ConnectionConfiguration(server_host, SERVER_PORT, SERVICE_NAME);
      m_connection = new XMPPConnection(config);
      try {
          m_connection.connect();
      } catch (XMPPException e) {
           e.printStackTrace();
      }
  }

  public Roster getRoster() {
     Log.i(TAG, " getRoster ");
     return m_connection.getRoster();
  }

  public boolean Login(String uname, String pass ) throws XMPPException {

    m_connection.login(uname, pass);     
    this.fragment.Gtalk_logInComplete(uname, m_connection);             
    this.setPacketFilters();
    Presence presence = new Presence(Presence.Type.available);
    Log.i("ID", "" + presence);
    m_connection.sendPacket(presence);      
    return true;
  } 

  public void disconnect() {
     m_connection.disconnect();
  }
} 
```

从上面这段代码之后的代码

```
this.fragment.Gtalk_logInComplete(uname, m_connection); 
```

此代码将运行以从 xmpp 服务器获取联系人

```
private void getConts() {

   Roster roster = colors_xmpp_client.getRoster();
   String file_name;
   for (RosterEntry entry : roster.getEntries()) {
     if (entry.getType() == ItemType.to || entry.getType() == ItemType.both) {              

        boolean yes = Contact_data_source.checkUsername(entry.getUser());
        Log.i(TAG, "Con=" + yes);
        if (!yes) {
           String na = entry.getUser();
           String[] me = na.split("@");                     
           Bitmap buddy_img = buddyImage(entry, _connection);
           if (buddy_img != null)
               file_name = Store(buddy_img);
           else
               file_name = "";
           if (entry.getName() == null)
               Contact_data_source.createContact( entry.getUser(), entry.getUser(), Uname, file_name, UsedStrings.SipAccount, me[0] );
           else
               Contact_data_source.createContact( entry.getName(), entry.getUser(), Uname, file_name, UsedStrings.SipAccount, me[0] );
         } else {
          Log.i(TAG, "Con=exist");
         }
      }
    }               
 return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:44:43.280

您可以使用以下流程：
1) 启动 Activity，绑定 RosterService

2) 使用所需的上下文（应用程序上下文或活动）注册 ContentObserver context.getContentResolver().registerContentObserver(uriRosterChanged, true, contentObserver);

3) 将此上下文和 contentObserver 发送到 RosterService

4) 服务中：获取联系人并将其存储到 db 和 !!! >>

5) 在服务中： context.getContentResolver().notifyChange(uriRosterChanged, contentObserver)

6) 为下一个联系人重复 i.4

i.5 -> 将触发 contentObserver.onChange 方法，因此您可以在此处刷新您的联系人列表

2 如何将参数发送到服务**2 种方式**描述了额外和直接方法调用（*setRosterNConnection()*）：

**活动**代码：

```
...
RosterService mService;
@Override public void onCreate(Bundle savedInstanceState) {
    ...
    Intent intent = new Intent(this, RosterService.class);
    intent.putExtra("Key", "Value");
    bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
    ...
}
...
Roster mRoster ;
XMPPConnection mConnection;
...
private ServiceConnection mConnection = new ServiceConnection() {

    public void onServiceConnected(ComponentName className,
            IBinder service) {
        LocalBinder binder = (LocalBinder) service;
        mService = binder.getService();       
        mService.setRosterNConnection(mRoster, mConnection);
        mService.doJob();
    }

    public void onServiceDisconnected(ComponentName arg0) {
                mService = null;
    }
};
... 
```

**名册服务**代码：

```
// some class LocalBinder extends Binder{...} if some needs
private  LocalBinder mBinder = new LocalBinder(); // class LocalBinder extends Binder{...}
...
@Override
public IBinder onBind(Intent intent) {
    Bundle extras = intent.getExtras(); 
    if(extras == null)
        Log.d("RosterService","extras is empty");
    else
    {
        Log.d("RosterService","extras not empty");
        String key = (String) extras.get("Key");
        ...
    }
    return mBinder;
}
...
public void setRosterNConnection (Roster roster , XMPPConnection connection){
...
}
...
public void doJob(){
 // get and save contacts
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:44:22.083

也许你可以在 AsyncTask 中做到这一点。

AsyncTask 只会在另一个线程上完成工作，只要用户关闭您的活动，asyncTask 就会停止。

# jquery - 从 JSON 数据中提取时间

> ID：14600647
> 
> 赞同：0
> 
> 时间：2013-01-30T09:35:22.850
> 
> 标签：jquery, json

我正在调用我的服务器代码以返回 json 数据

```
$.ajax({
type: "POST",
url: "myurl",
data: "{}",
contentType: "application/json; charset=utf-8",
dataType: "json",
success: function (appdata) {

        var testdata = $.parseJSON(appdata.d);

        console.log(testdata);

        $.each(testdata, function (index, appt) {
        //console.log(appt.PRODUCTID);// works fine
        //console.log(appt.ENTRYDATE);// works fine
        // var starttime=??
    }
}); 
```

这是`console.log(testdata)`输出

```
[Object, Object]

0: Object

  PRODUCTID : "51",
  ENTRYDATE : "2013-02-13T12:30:00",
  CATEGORYID : null

__proto__:Object

1: Object

  PRODUCTID : "52",
  ENTRYDATE : "2013-02-13T12:40:00",
  CATEGORYID : null

__proto__: Object
  length: 2
__proto__: Array[0] 
```

如何从第一个对象的 entrydate 中提取 ENTRYDATE 的时间信息，例如（12:30）`2013-02-13T12:30:00`

**编辑**

`console.log(appt.ENTRYDATE)`工作正常，问题只是如何从中提取时间信息`appt.ENTRYDATE`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:59:45.433

您可以使用 javascript split 提取时间信息

```
 var datetime = appt.ENTRYDATE;
 var datedata = datetime.split("T");
 var datevalue = datedata[0]; //date value
 var timevalue = datedata[1]; //time value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:57:11.097

`How can I extract the time information from ENTRYDATE like (12:30)`

对此：http: [//jsfiddle.net/Q4vsk/](http://jsfiddle.net/Q4vsk/)

```
$.each(testdata, function (index, appt) {
    var $getTime = appt.ENTRYDATE;// works fine
    var $Time = $getTime.substr($getTime.indexOf('T')+1).slice(0, -3);
    console.log($Time); // output will be: 12:30, 12:40
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T09:58:45.253

这可能是最糟糕的答案，但您可以尝试**拆分**

```
var starttime="2013-02-13T12:40:00";   // this comes from appt.ENTRYDATE 
var n=starttime.split("T"); 
console.log(n[1]); 
```

# powershell - 如何组合这两个 powershell 脚本行？

> ID：14600649
> 
> 赞同：0
> 
> 时间：2013-01-30T09:35:28.347
> 
> 标签：powershell

我对 powerscript 很陌生，我什至不知道要问的正确问题，所以我什至无法搜索我想象的常见问题。

我有：

```
$temp=$_|Select-String 'Game started at: (.*?)\n'
$timestamp=$temp.matches[0].groups[1].value 
```

我试过了：

```
$timestamp=$_|Select-String 'Game started at: (.*?)\n'.matches[0].groups[1].value 
```

和

```
$timestamp=$_|Select-String 'Game started at: (.*?)\n'|echo $_.matches[0].groups[1].value 
```

这没有用。

如何正确地将两条线合二为一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:51:16.907

我不知道你的管道对象（`$_`）最初是什么，但试试这个：

```
$timestamp = $_| Select-String 'Game started at: (.*?)\n' | % { $_.Matches[0].groups[1].value } 
```

`Select-String`管道数组作为结果，因此您需要使用 foreach-loop(% 是短别名) 循环遍历每个字符串，即使它只是一个字符串，并获得您想要的值。

# php - 如何将实际的 NULL 值插入可空列？

> ID：14600650
> 
> 赞同：9
> 
> 时间：2013-01-30T09:35:35.220
> 
> 标签：php, mysql, null

```
function save($gmt, $name, $address, $phone, $remark)
{
    $query= "INSERT INTO `user` (`gmt`, `name`, `address`, `phone`, `remark`) VALUES ('$gmt', '$name', '$address', '$phone', '$remark')";
    mysql_query($query);
} 
```

在这里，地址、电话和备注都可以`NULL`。`NULL`每当变量设置为并且该列可以为空时，我都需要它来保存`NULL`，而不是插入空字符串。

如何`NULL`使用 PHP 将值插入数据库？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T10:13:25.283

这是 PHP 解决方案，但您必须使用 mysqli 因为 mysql 已弃用，请阅读有关[mysqli](http://php.net/manual/en/book.mysqli.php)的更多信息。此外，您必须考虑[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)

```
function save($gmt, $name, $address, $phone, $remark)
{
  if(empty($phone)){
   $phone = 'NULL';
  }else{
   $phone = "'".$phone."'";
  }
  if(empty($remark)){
   $remark = 'NULL';
  }else{
   $remark = "'".$remark."'";
  }
    $query= "INSERT INTO `user` (`gmt`, `name`, `address`, `phone`, `remark`) VALUES ('$gmt', '$name', '$address', $phone, $remark)";
    mysql_query($query);
}
//tests
save("a", "b", "c", "", "")."<br>";
save("a", "b", "c", "d", "")."<br>";
save("a", "b", "c", "d", "e")."<br>";
/*
INSERT INTO `user` (`gmt`, `name`, `address`, `phone`, `remark`) VALUES ('a', 'b', 'c', NULL, NULL)
INSERT INTO `user` (`gmt`, `name`, `address`, `phone`, `remark`) VALUES ('a', 'b', 'c', 'd', NULL)
INSERT INTO `user` (`gmt`, `name`, `address`, `phone`, `remark`) VALUES ('a', 'b', 'c', 'd', 'e')
*/
?> 
```

[演示](http://phpfiddle.org/main/code/2az-nv1)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T09:46:41.370

尝试切换到准备好的语句（作为奖励，它不太容易发生 SQL 注入）。

```
function save($gmt, $name, $address, $phone, $remark)
{
    if(!isset($phone) || empty($phone)) { $phone = null; }
    if(!isset($remark) || empty($remark) { $remark = null; }

    $db = new PDO(...);

    $stmt = $db->prepare("INSERT INTO `user` (`gmt`, `name`, `address`, `phone`, `remark`) VALUES (:gmt, :name, :address, :phone, :remark)");
    $stmt->bindValue("gmt", $gmt, PDO::PARAM_STR);
    $stmt->bindValue("name", $name, PDO::PARAM_STR);
    $stmt->bindValue("address", $address, PDO::PARAM_STR);
    $stmt->bindValue("phone", $phone, PDO::PARAM_STR);
    $stmt->bindValue("remark", $remark, PDO::PARAM_STR);
    $stmt->execute();
} 
```

这将`null`在 MySQL 中正确处理值

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-30T09:42:20.947

PHP 不打印 NULL - 它只是一个空字符串。因此，在您的示例中，您将尝试插入`''`，这在 SQL 中又是一个空字符串。

您必须使用`NULL`（不带引号）。

实现这一目标的最佳实践是使用带有数据库抽象层的 ORM 或 PHP 框架来为您执行此操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-03T09:43:29.213

使用三元运算符，你也可以使用这个

```
$add = ($address == '' ? NULL : $address);
$phn = ($phone == '' ? NULL : $phone);
$rmk = ($remark == '' ? NULL : $remark); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-06-18T15:07:33.753

字段可以为 NULL

-> qtd_aulas_previstas

-> qtd_aulas_dadas

```
$qtd_aulas_previstas = ( empty($qtd_aulas_previstas) ? 'NULL' : "'".$qtd_aulas_previstas."'");
$qtd_aulas_dadas     = ( empty($qtd_aulas_dadas)     ? 'NULL' : "'".$qtd_aulas_dadas."'");

//insere os dados na tabela
$inserir_tb = mysqli_query($conexao, "INSERT INTO tb_turma_bimestre VALUES('', '$cod_turma', '$cod_bimestre', $qtd_aulas_previstas, $qtd_aulas_dadas, '$data_abertura', '$data_encerramento', '$date_time', '$nome_login')")or die("Error2: " .mysqli_error($conexao)); 
```

# javascript - 如何检查变量是否为空

> ID：14600651
> 
> 赞同：0
> 
> 时间：2013-01-30T09:35:40.447
> 
> 标签：javascript, jquery, jsrender

我有模板这一部分：

```
<td>{{=name}}</td>] 
```

我需要检查 null/empty 的名称而不显示它。

这是怎么做的？

例子：

```
{{#if ($name!= "" && $secondName!= "") }} 
```

我收到错误`Uncaught SyntaxError: Unexpected token &&`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:11:01.950

如果您使用的是[jsrender](https://github.com/BorisMoore/jsrender)那么

```
{{if name}} 
```

应该做的伎俩

[您可以在jsrender 演示部分](http://borismoore.github.com/jsrender/demos/demos.html)找到很多解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:15:22.197

你可以使用`if(name && name !='' )`更多的安全性！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:50:25.473

您是否使用过时的 JsRender 版本？语法是`{{:name}}`，如果名称未定义或为空，它会自动呈现一个空字符串。单元测试：[https ://github.com/BorisMoore/jsrender/blob/master/test/unit-tests/tests-jsrender-no-jquery.js#L108](https://github.com/BorisMoore/jsrender/blob/master/test/unit-tests/tests-jsrender-no-jquery.js#L108)

使用最新版本，您甚至可以编写`{{:a.b.c.name noerror=true}}`它，即使`name`, or`a.b.c`或`a.b`or`a`中的任何一个未定义或为空，它也会呈现空字符串。

你不需要包装在`{{if ...}}...{{/if}}`

# javascript - 如何为每个对象添加 Javascript 函数？

> ID：14600652
> 
> 赞同：0
> 
> 时间：2013-01-30T09:35:46.207
> 
> 标签：javascript, jquery

我想知道如何为页面上的每个对象附加一个可用的功能。我知道我可以这样做：

```
mything = {
    init: function(SELECTOR){

    },
    destroy: function(){

    }
}; 
```

但是我只能通过这种方式使用它：`mything.init(SELECTOR);`

我想要的是能够以这种方式做同样的事情：

```
$('.mydiv, input, whatever').myFunction({ 'my' : 'arg', 'my2' : 'arg2' });
$('.mydiv').myFunction('destroy'); 
```

我知道那里有很多 Javascript 教程，但我不知道如何搜索这种类型的功能。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T09:39:17.430

在您的情况下，看起来它足以让您扩展`jQuery.prototype`.

```
jQuery.extend( jQuery.fn, mything ); 
```

但是，当然可以，即使不是非常推荐，也可以去最终根并扩展`Object.prototype`. 这*确实*会将这些功能添加到每个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T09:39:22.557

这不一定是一个好主意（这是一个糟糕的主意），但您可以使用原型来实现：

```
Object.prototype.myFunction = function() {
  console.log('Called myFunction');
}; 
```

您可以看到任意对象会发生什么：

```
document.myFunction(); 
```

请注意，添加到您自己以外的类的原型（尤其是属于您自己以外的库的内置对象或类）可能会引起很多混乱。这就是为什么 Google 自己的样式指南[不建议这样](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml#Modifying_prototypes_of_builtin_objects)做的原因之一（尽管有很多尝试将 String.startsWith、String.endsWith 和许多其他有用的操作添加到内置类型）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T09:45:39.957

完成您所描述的工作的*干净*方法是将代码包装在 jQuery 插件中。

这是官方的[jquery 插件指南](http://docs.jquery.com/Plugins/Authoring)。通读一遍，其实很容易理解。

关于包装函数的部分（以便`$(selector).myFunction()`调用`init`、`$(selector).myFunction('doThis')`调用`doThis`等）在[这里](http://docs.jquery.com/Plugins/Authoring#Plugin_Methods)。

# c# - 一旦第一组工作线程完成处理，我如何使用 AutoResetEventHandler 向主线程函数发出信号以再次启动线程

> ID：14600653
> 
> 赞同：1
> 
> 时间：2013-01-30T09:35:47.140
> 
> 标签：c#, multithreading

**要求：-**在任何给定时间点，只有 4 个线程应该调用四个不同的函数。一旦这些线程完成，下一个可用线程应该调用相同的函数。

**当前代码：-**这似乎是实现此类目标的最糟糕的方法。While(True) 会导致不必要的 CPU 峰值，运行以下代码时我可以看到 CPU 上升到 70%。

**问题：-**一旦前 4 个工作线程完成处理，我如何使用 AutoResetEventHandler 向主线程 Process() 函数发出信号以再次启动下 4 个线程，而不会浪费 CPU 周期。请建议

```
public class Demo
{
    object protect = new object();
    private int counter;
    public void Process()
    {
        int maxthread = 4;
        while (true)
        {
            if (counter <= maxthread)
            {
                counter++;
                Thread t = new Thread(new ThreadStart(DoSomething));
                t.Start();
            }
        }
    }
    private void DoSomething()
    {
        try
        {
            Thread.Sleep(50000); //simulate long running process
        }
        finally
        {
            lock (protect)
            {
                counter--;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:47:42.653

您可以使用[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)以更简单的方式实现您想要的。如果您运行下面的代码，您会注意到在每个线程终止后写入了一个条目，并且只有在所有四个线程都终止后才`"Finished batch"`写入该条目。

此示例使用[`Task.WaitAll`](http://msdn.microsoft.com/en-us/library/dd270695.aspx)等待所有任务的完成。该代码使用无限循环仅用于说明目的，您应该`hasPendingWork`根据您的要求计算条件，以便仅在需要时启动新的一批任务。

例如：

```
private static void Main(string[] args)
{
    bool hasPendingWork = true;
    do
    {
        var tasks = InitiateTasks();

        Task.WaitAll(tasks);

        Console.WriteLine("Finished batch...");
    } while (hasPendingWork);
}

private static Task[] InitiateTasks()
{
    var tasks = new Task[4];

    for (int i = 0; i < tasks.Length; i++)
    {
        int wait = 1000*i;

        tasks[i] = Task.Factory.StartNew(() =>
        {
            Thread.Sleep(wait);
            Console.WriteLine("Finished waiting: {0}", wait);
        });
    }

    return tasks;
} 
```

另一件事是，从您问题的文本要求部分，我相信一批四个新线程应该只在之前的四个线程完成后才开始。但是，您发布的代码与该要求不兼容，因为它在前一个线程终止后立即启动一个新线程。您应该澄清您的要求到底是什么。

* * *

**更新：**

如果您想在四个线程之一终止后立即启动一个线程，您仍然可以使用 TPL 而不是显式启动新线程，但您可以使用[`SemaphoreSlim`](http://msdn.microsoft.com/en-us/library/system.threading.semaphoreslim.aspx). 例如：

```
private static SemaphoreSlim TaskController = new SemaphoreSlim(4);

private static void Main(string[] args)
{
    var random = new Random(570);

    while (true)
    {
        // Blocks thread without wasting CPU
        // if the number of resources (4) is exhausted
        TaskController.Wait();

        Task.Factory.StartNew(() =>
        {
            Console.WriteLine("Started");
            Thread.Sleep(random.Next(1000, 3000));
            Console.WriteLine("Completed");
            // Releases a resource meaning TaskController.Wait will unblock
            TaskController.Release();
        });
    }
} 
```

# javascript - 解析从网站 (CoovaChilli) 生成的动态 JSON 并将其显示到 Javascript 网页中？

> ID：14600654
> 
> 赞同：0
> 
> 时间：2013-01-30T09:35:48.607
> 
> 标签：javascript, jquery, html, json, jsonp

我真的需要你的帮助来帮助我解决我的问题。我使用 CoovaChilli 设置了一个强制门户，并希望显示 Coova JSON 接口提供的使用反馈，可以通过 url 访问，例如来自 CoovaChilli 所在的内部网络的**[http://login.domain.com:3990/json/status](http://login.domain.com:3990/json/status)**听着。如果您已经登录到强制门户，然后如果您访问该 url，您将在浏览器中看到如下格式的数据：

```
{
    "version": "1.0",
    "clientState": 1,
    "redir": {
        "originalURL": "http://www.gstatic.com/generate_204",
        "redirectionURL": "",
        "logoutURL": "http://10.1.0.1:3990/logoff",
        "ipAddress": "10.1.0.6",
        "macAddress": "AA-BB-CC-DD-EE-FF"
    },
    "session": {
        "sessionId": "5108c39600000003",
        "userName": "user@ri",
        "startTime": 1359529249,
        "sessionTimeout": 0,
        "idleTimeout": 900
    },
    "accounting": {
        "sessionTime": 867,
        "idleTime": 0,
        "inputOctets": 1428643,
        "outputOctets": 391752,
        "inputGigawords": 0,
        "outputGigawords": 0,
        "viewPoint": "client"
    }
} 
```

我的问题是，如果想使用 * ***Javascript*** *******将数据解析到网页中***，我应该怎么做才能看到数据格式更好（html 格式）。例如，我可以通过 url 使用相同的域访问它，例如[http://login.domain.com/status/status.html](http://login.domain.com/status/status.html)，而不是之前 url 中的未格式化数据？*

 *请注意：我想使用 javascript 进行解析，因为登录到该 CoovaChilli 的用户的数据不同，不同的用户有不同的数据，只有登录并访问该 url 的用户只能看到他们自己的统计信息，所以我认为最佳实践是使用客户端语言来解析该数据。

非常感谢您的任何帮助。之前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:50:54.517

尝试这个

这个链接可以帮助你[http://www.w3schools.com/json/json_intro.asp](http://www.w3schools.com/json/json_intro.asp)

```
<!DOCTYPE html>
<html>
<body>
<h2>JSON Object Creation in JavaScript</h2>

<p>
Name: <span id="jname"></span><br>  
Age: <span id="jage"></span><br> 
Address: <span id="jstreet"></span><br> 
Phone: <span id="jphone"></span><br> 
</p>  

<script>
var JSONObject = {
  "name":"John Johnson",
  "street":"Oslo West 16", 
  "age":33,
  "phone":"555 1234567"};
document.getElementById("jname").innerHTML=JSONObject.name  
document.getElementById("jage").innerHTML=JSONObject.age  
document.getElementById("jstreet").innerHTML=JSONObject.street  
document.getElementById("jphone").innerHTML=JSONObject.phone  
</script>

</body>
</html> 
```

编辑

如果要删除 var json，可以使用 ajax 或 jquery，例如：

```
 $.getJSON("your url",function(result){
    $.each(result, function(i, field){
      $("div").append(field + " ");
    });
  }); 
```

[http://www.w3schools.com/jquery/ajax_getjson.asp](http://www.w3schools.com/jquery/ajax_getjson.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T08:25:23.380

```
 <script src="js/jquery.min.js"></script>
  <script>
  $.getJSON("http://10.1.0.1:3990/json/status?callback=?", function(data) {
    console.log(data);
  });
  </script> 
```*

# iphone - 在应用程序中拥有超过 1 个导航控制器

> ID：14600655
> 
> 赞同：0
> 
> 时间：2013-01-30T09:35:52.583
> 
> 标签：iphone, ios, objective-c, ipad

我被要求模拟一个具有以下设计的应用程序。

![在此处输入图像描述](../Images/dbedc9e7b605d6996f090561f041958e.png)

大灰色框是主视图区域。(UIView)

2 个粉红色方块是按钮。它们的功能几乎就像标签栏的标签一样。

我正在努力实现的是在按下按钮时让 2 个 UINavigationbars/Controllers 出现在 UIView（大灰色框）中。当然不是同时，而是显示哪个导航栏/控制器/视图取决于选择的按钮。

我可以通过执行以下操作使 UIViewControllers 视图出现在那里

```
 TabViewOne * vcTab = [[TabViewOne alloc] initWithNibName:@"TabViewOne" bundle:[NSBundle mainBundle]];
[self.mainView addSubview:vcTab.view]; 
```

这使得 TabViewOne 的视图出现在我的 mainView 区域（灰色框）中。

我实际上想要发生的是，我可以让我的视图出现在这里，但带有一个导航栏和它带来的所有功能。我最终将隐藏导航栏，但使用它的功能来上下移动视图堆栈。

这是我试图让它工作但当我尝试这个时视图保持空白：

```
 TabViewOne * vcTab = [[TabViewOne alloc] initWithNibName:@"TabViewOne" bundle:[NSBundle mainBundle]];
UINavigationController * navVC = [[UINavigationController alloc] initWithRootViewController:vcTab];
[[navVC navigationBar] setHidden:YES];

[self.mainView addSubview:navVC.view]; 
```

有人可以告诉我如何正确地做到这一点吗？

非常感谢，-代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:49:57.600

您可以通过一个小技巧来实现您的要求。您可以在那里实现一个标签栏控制器。在标签栏控制器中，每个标签都可以在单独的导航控制器中运行。在两个选项卡项的根视图控制器中，您必须具有 2 个按钮设计。如果您使用通用视图并将其添加为子视图，您可以轻松地重用它。接下来是它会出现在视图底部的标签栏，因为那里有一个标签栏控制器。您可以简单地通过将其框架矩形设置为不可见位置来隐藏它。之后，您的选项卡选择应根据用户按钮单击手动完成。

# deployment - 在 JBoss AS 上部署 JBoss ESB 得到 BUILD FAILED

> ID：14600658
> 
> 赞同：0
> 
> 时间：2013-01-30T09:35:57.580
> 
> 标签：deployment, jboss, esb

首先请原谅，因为我的问题示例在此链接中提出：[How to Deploy a JBoss ESB on a Jboss AS](https://stackoverflow.com/questions/14305859/how-to-deploy-a-jboss-esb-on-a-jboss-as)，但我不能对此发表任何评论，它还没有最佳答案或任何有用的解决方案！

我正在使用 ubuntu 11.04，我的服务器是 jboss-as-7.1.1.Final 和 jbossesb-4.11，我在 jbossesb-4-11 的安装文件夹中遵循 readme.txt 文件，但是在运行“ant deploy”命令后我得到这个输出：

```
user@computer:~/Library/jbossesb-4.11/install$ ant deploy

    Buildfile: /home/user/Library/jbossesb-4.11/install/build.xml

    check.deploy.props:

    dependencies.source:

    dependencies.jbossesb:

    dependencies:

    init.bindings.props:

    undeploy.bindings:

    undeploy.jbossas5:

    undeploy.jbossas6:

    undeploy:

    BUILD FAILED
    /home/user/Library/jbossesb-4.11/install/build.xml:574: Directory does not exist: /home/user/Library/jboss-as-7.1.1.Final/server/default/lib 
```

我在deployment.properties 文件中正确指定了jboss 服务器路径，但我不知道有什么问题！此外，在帮助 pdf 书籍中有一个命令：“cp -pR all all.original”（在运行“ant deply”之前）显示 [jboss-as-7.1.1.Final 中有一个 [all] 文件夹] 文件夹，但是我的服务器文件夹中没有这样的文件夹！

在此先感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:30:11.733

JBoss ESB 不支持在 AS 7 上部署。

# html - Xsltproc 和 Office Web 存档

> ID：14600663
> 
> 赞同：1
> 
> 时间：2013-01-30T09:36:21.117
> 
> 标签：html, xml, xslt, ms-word

我遇到了一个问题`xsltproc`。

我有一个文件保存`Word 2010`为`"Web page in a single file"`（[单击我获取源](http://www.dbtecno.it/upload/test.mht)），其中只有一个字符串**"TEST TEST"**。

我想用取自 XML 的东西替换字符串，所以我认为`xsltproc`这很好。

由于该`mht`文件不是正确的 xml 格式文件，我已经被卡住了。

我的问题`xsltproc`是：

*   我怎样才能让 xsltproc 接受像这样的 xml 实体`<meta name=3DGenerator content=3D"Microsoft Word 14">`？外面的`3D`引用使它生气。
*   我可以跳过没有 xml 格式的部分吗？就像第一行一样：

* * *

```
MIME-Version: 1.0
Content-Type: multipart/related; boundary="----=_NextPart_01CDFED3.EFE26A80"
.. 
```

* * *

提前致谢

# android - Android 应用内购买：签名验证失败

> ID：14600664
> 
> 赞同：71
> 
> 时间：2013-01-30T09:36:21.403
> 
> 标签：android, in-app-billing, signing

我已经尝试了几天来解决这个问题，使用SDK附带的Dungeons演示代码。我试图用谷歌搜索答案，但找不到。

*   在地下城演示中，我从开发控制台传递了我的公钥。
*   签署apk并上传到控制台而不发布。
*   测试`android.test.purchased`在控制台上创建并发布订阅的产品列表（我想要的应用程序的主要功能）。

但是我仍然得到一个错误，`Signature verification failed`然后签名与数据不匹配。我该如何解决这个问题？

```
public static ArrayList<VerifiedPurchase> verifyPurchase(String signedData, String signature)
{
    if (signedData == null) {
        Log.e(TAG, "data is null");
        return null;
    }
    if (Consts.DEBUG) {
        Log.i(TAG, "signedData: " + signedData);
    }
    boolean verified = false;
    if (!TextUtils.isEmpty(signature)) {

        String base64EncodedPublicKey = "MIIBIjA....AQAB";
        PublicKey key = Security.generatePublicKey(base64EncodedPublicKey);
        verified = Security.verify(key, signedData, signature);
        if (!verified) {
            Log.w(TAG, "signature does not match data.");
            return null;
        }
    }
}

public static boolean verify(PublicKey publicKey, String signedData, String signature)
{
    if (Consts.DEBUG) {
        Log.i(TAG, "signature: " + signature);
    }
    Signature sig;
    try {
        sig = Signature.getInstance(SIGNATURE_ALGORITHM);
        sig.initVerify(publicKey);
        sig.update(signedData.getBytes());
        if (!sig.verify(Base64.decode(signature))) {
            Log.e(TAG, "Signature verification failed.");
            return false;
        }
        return true;
    } catch (NoSuchAlgorithmException e) {
        Log.e(TAG, "NoSuchAlgorithmException.");
    } catch (InvalidKeyException e) {
        Log.e(TAG, "Invalid key specification.");
    } catch (SignatureException e) {
        Log.e(TAG, "Signature exception.");
    } catch (Base64DecoderException e) {
        Log.e(TAG, "Base64 decoding failed.");
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2014-02-28T07:18:57.593

在当前的 Google 计费版本中，这个问题仍然存在。基本上**android.test.purchased**坏了；购买 android.test.purchased 后， **Security.java中的****verifyPurchase**函数将始终失败，并且**QueryInventoryFinishedListener**将在**if (result.isFailure())**行停止；这是因为**android.test.purchased**项目总是无法通过 Security.java 中的**TextUtils.isEmpty(signature)**检查，因为它不是真正的项目并且服务器没有返回签名。

 ******我的建议（由于缺乏任何其他解决方案）是永远不要使用“android.test.purchased”。网上有各种代码调整，但没有一个是 100% 工作的。

如果您使用了 android.test.purchased 那么摆脱错误的一种方法是执行以下操作：-

1.  编辑 Security.java 并将 verifyPurchase 中的“return false”行更改为“return true” - 这是暂时的，我们将在一分钟内将其放回原处。
2.  在您的 QueryInventoryFinishedListener 中，在“if (result.isFailure()) {...}”行之后添加以下内容以消耗并摆脱您永无止境的 android.test.purchased 项目：

    ```
    if (inventory.hasPurchase(SKU_ANDROID_TEST_PURCHASE_GOOD)) {  
       mHelper.consumeAsync(inventory.getPurchase(SKU_ANDROID_TEST_PURCHASE_GOOD),null);
       } 
    ```

3.  运行您的应用程序，以便 consunmeAsync 发生，这将摆脱服务器上的“android.test.purchased”项。

4.  删除 consumeAsync 代码（或将其注释掉）。
5.  回到 Security.java，将“return true”改回“return false”。

您的 QueryInventoryFinishedListener 将不再在验证时出错，一切都恢复“正常”（如果您可以这样称呼它）。记住 - 不要再使用 android.test.purchased 了，因为它只会再次导致这个错误......它坏了！测试您购买它的唯一真正方法是上传 APK，等待它出现，然后在启用日志记录的设备上测试它（相同的 APK）。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2015-02-14T12:00:20.523

是的，问题仍然存在。在我购买了 android.test.purchased 之后，我开始在查询库存时遇到错误。只需清除 Google Play Store 应用程序的数据并运行 Google Play 一次即可修复您的手机。当您清除 Google Play 的数据时，它会忘记您购买了 android.test.purchased

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-02-01T13:11:44.403

请检查是否`base64EncodedPublicKey`与*Play 开发者控制台*中的相同。*在Developer Console*中重新上传 APK 后，公钥可能会更改，如果是这样，请更新您的`base64EncodedPublicKey`.

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-06-01T12:35:10.573

您可以跳过那些“android.test.*”产品 ID 的验证过程。如果您使用的是 TrivialDrive 示例中的示例代码，请打开 IabHelper.java，找到以下行代码，将其更改为

```
 if (Security.verifyPurchase(mSignatureBase64, purchaseData, dataSignature)) { ... } 
```

进入

```
 boolean verifySignature = !sku.startsWith("android.test."); // or inplace the condition in the following line
   if (verifySignature && !Security.verifyPurchase(mSignatureBase64, purchaseData, dataSignature)) { ... } 
```

即使您忘记回滚代码，它也是无害的。因此，您可以继续测试进一步的工作流程步骤。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-10-07T15:05:41.670

根据 GMTDev 的回答，我这样做是为了在以**最简单的方式**消费产品时解决测试问题。在 Security.java 中，将 verifyPurchase() 方法替换为：

```
public static boolean verifyPurchase(String base64PublicKey, String signedData, String signature) {
    if (TextUtils.isEmpty(signedData) || TextUtils.isEmpty(base64PublicKey) ||
            TextUtils.isEmpty(signature)) {
        Log.e(TAG, "Purchase verification failed: missing data.");
        return BuildConfig.DEBUG; // Line modified by Cristian. Original line was: return false;
    }

    PublicKey key = Security.generatePublicKey(base64PublicKey);
    return Security.verify(key, signedData, signature);
} 
```

我只修改了一行（见评论），这样你就可以保留这样的代码进行调试，并且仍然安全地发布你的发布版本。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-10-10T07:18:22.990

该错误是由于错误的许可证密钥引起的。也许许可证密钥可能来自您的另一个应用程序。

解决方案是使用正确的许可证密钥：

> Play 控制台 > 应用程序 > 开发工具 > 许可和应用内计费

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-03-30T14:04:56.273

在使用 In-app Billing v3 和包含的实用程序类时，对我有用的是在返回的 onActivityResult 调用中消耗测试购买。

**无需对 IabHelper、Security 或任何应用内计费实用程序类进行更改，以避免在未来的测试购买中发生这种情况。**

如果您已经尝试购买测试产品并且现在卡在购买签名验证失败错误中，您可能是因为您正在查找此错误的答案，那么您应该：

1.  进行 GMTDev 建议的更改
2.  运行应用程序以确保它使用产品
3.  删除/撤消 GMTDev 的更改
4.  在 onActivityResult 中实现下面的代码。

这不仅允许购买测试过程流畅，而且还应该避免与 iab在尝试重新购买测试产品时返回*“**项目已拥有**”错误的任何冲突问题。*

*如果这是从片段中调用的并且您的片段的 onActivityResult 没有被调用，那么请确保在必要时从您的父 ActivityFragment 调用 YourFragmentName.onActivityResult(requestCode, resultCode, data) 。[这在Calling startIntentSenderForResult from Fragment (Android Billing v3)](https://stackoverflow.com/a/14131852/1566836)**中有更详细的解释*。

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUEST_PURCHASE) {

        //this ensures that the mHelper.flagEndAsync() gets called 
        //prior to starting a new async request.
        mHelper.handleActivityResult(requestCode, resultCode, data);

        //get needed data from Intent extra to recreate product object
        int responseCode = data.getIntExtra("RESPONSE_CODE", 0);
        String purchaseData = data.getStringExtra("INAPP_PURCHASE_DATA");
        String dataSignature = data.getStringExtra("INAPP_DATA_SIGNATURE");

        // Strip out getActivity() if not being used within a fragment
        if (resultCode == getActivity().RESULT_OK) {
            try {
                JSONObject jo = new JSONObject(purchaseData);
                String sku = jo.getString("productId");

                //only auto consume the android.test.purchased product
                if (sku.equals("android.test.purchased")) {
                    //build the purchase object from the response data
                    Purchase purchase = new Purchase("inapp", purchaseData, dataSignature);
                    //consume android.test.purchased
                    mHelper.consumeAsync(purchase,null);
                }
            } catch (JSONException je) {
                //failed to parse the purchase data
                je.printStackTrace();
            } catch (IllegalStateException ise) {
                //most likely either disposed, not setup, or 
                //another billing async process is already running
                ise.printStackTrace();
            } catch (Exception e) {
                //unexpected error
                e.printStackTrace();
            }
        }
    }
} 
```

只有当它的 sku 是“android.test.purchased”时它才会删除购买，所以它应该可以安全使用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-04-11T08:57:40.157

[这个](https://stackoverflow.com/questions/19534210/in-app-billing-not-working-after-update-google-store/19539213#19539213)解决方案对我有用。我将购买类中的新 verifyPurchase 方法更改为旧方法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-01-06T17:54:39.910

仅默认测试产品的签名验证失败。快速修复：

*   转到 IabHelper 类。
*   反转 的 if 条件`Security.verifyPurchase`。

而已！

当测试产品被实际产品替换时，请记住还原更改

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-10-30T21:58:20.730

今天（2018 年 10 月 30 日）遇到了同样的问题（签名验证和取消测试购买）。

签名问题可能是由于这些测试 sku 并不是您的应用程序的一部分，因此没有您的应用程序的签名。我确实向谷歌开了一张票，但不确定他们是否能解决这个问题。正如其他人指出的那样，解决方法是替换代码

```
if (verifyValidSignature(purchase.getOriginalJson(), purchase.getSignature())) { 
```

和

```
if (verifyValidSignature(purchase.getOriginalJson(), purchase.getSignature()) ||
                        (purchase.getSku().startsWith("android.test.")) ) { 
```

关于“如何摆脱购买 android.test.purchased SKU”，我发现只需简单地重启设备，然后等待一分钟左右和/或重新启动您的应用程序几次即可修复它对我来说（即我不必通过代码“消费”购买）。我猜需要等待，以便 Play 商店完成与 Google 服务器的同步。（不确定这是否会在未来继续以这种方式工作，但如果它现在对你有用，这可能会帮助你继续前进。）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-12-06T11:00:10.087

检查这个[答案](https://stackoverflow.com/a/10754791/1321401)：

> 您的测试设备上的主帐户是否与您的 Google Play 开发者帐户相同？
> 
> 如果不是，您将不会在 android.test.* 静态响应上获得签名，除非该应用之前已在 Play 上发布。
> 
> [请参阅http://developer.android.com/guide/market/billing/billing_testing.html#static-responses-table](http://developer.android.com/guide/market/billing/billing_testing.html#static-responses-table)中的表格 了解完整的条件。

它的评论：

> 我认为静态 ID 不再返回签名。见 [https://groups.google.com/d/topic/android-developers/PCbCJdOl480/discussion](https://groups.google.com/d/topic/android-developers/PCbCJdOl480/discussion)

此外，以前来自 Google Play 计费库的示例代码（由许多大型应用程序使用）允许空签名。这就是为什么静态购买在那里起作用的原因。
但这是一个安全漏洞，所以当它[发布](http://sufficientlysecure.org/index.php/2013/10/29/google-play-billing-hacked/)时，谷歌提交了[更新](https://code.google.com/p/marketbilling/source/detail?r=7bc191a004483a1034b758e1df0bda062088d840)。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-05-10T09:54:18.350

我有同样的问题，并按照 @Deadolus 所说的基于[https://www.gaffga.de/implementing-in-app-billing-for-android/](https://www.gaffga.de/implementing-in-app-billing-for-android/)

关键是即使库存查询结果失败，我们也需要使 SKU 是可消耗的。下面是我如何做到这一点的示例。

```
IabHelper.QueryInventoryFinishedListener mGotInventoryListener = new IabHelper.QueryInventoryFinishedListener() {
        public void onQueryInventoryFinished(IabResult result, Inventory inventory) {
            Log.d(TAG, "Query inventory finished.");

            // Have we been disposed of in the meantime? If so, quit.
            if (mHelper == null) return;

            // Is it a failure?
            if (result.isFailure()) {
                try {
                    Purchase purchase = new Purchase("inapp", "{\"packageName\":\"PACKAGE_NAME\","+
                            "\"orderId\":\"transactionId.android.test.purchased\","+
                            "\"productId\":\"android.test.purchased\",\"developerPayload\":\"\",\"purchaseTime\":0,"+
                            "\"purchaseState\":0,\"purchaseToken\":\"inapp:PACKAGE_NAME :android.test.purchased\"}",
                            "");
                } catch (JSONException e) {
                    e.printStackTrace();
                }
                mHelper.consumeAsync(purchase, null);
                complain("Failed to query inventory: " + result);
                return;
            }

            Log.d(TAG, "Query inventory was successful.");

            /*
             * Check for items we own. Notice that for each purchase, we check
             * the developer payload to see if it's correct! See
             * verifyDeveloperPayload().
             */                   
        }
    }; 
```

将上面代码中的 PACKAGE_NAME 替换为您的应用程序的包名称。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-06-29T09:30:24.897

这对我有用：

1.  调用 BillingClient.querySkuDetailsAsync 以查询项目是否可用
2.  等待 SkuDetailsResponseListener.onSkuDetailsResponse
3.  再等 500 毫秒
4.  使用 BillingClient.launchBillingFlow 开始购买...

第 3 步应该不是必需的，因为当我收到 onSkuDetailsResponse 时它应该没问题，但它不是，必须稍等片刻。购买成功后，不再出现“项目不可用错误”。这就是我测试它的方式：

1.  清除我的应用数据
2.  清除 Google Play 数据
3.  运行应用
4.  购买 android.test.purchased
5.  尝试购买我的物品（它因物品不可用而失败）
6.  使用我上面的解决方案，它有效

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-01-31T10:01:51.377

对于 Cordova 和 Hybrid 应用程序，您需要使用**this.iap.subscribe(this.productId)**方法来订阅 InAppPurchase。

以下是对我来说工作正常的代码：

```
 getProdutIAP() {
        this.navCtrl.push('subscribeDialogPage');
        this.iap
            .getProducts(['productID1']).then((products: any) => {
                this.buy(products);
            })
            .catch((err) => {
                console.log(JSON.stringify(err));
                alert('Finished Purchase' + JSON.stringify(err));
                console.log(err);
            });
    }

    buy(products: any) {
        // this.getProdutIAP();
        // alert(products[0].productId);
        this.iap.subscribe(products[0].productId).then((buydata: any) => {
            alert('buy Purchase' + JSON.stringify(buydata));
            // this.sub();
        }).catch((err) => {
            // this.navCtrl.push('subscribeDialogPage');
            alert('buyError' + JSON.stringify(err));
        });
    }

    sub() {
        this.platform.ready().then(() => {
            this.iap
                .subscribe(this.productId)
                .then((data) => {
                    console.log('subscribe Purchase' + JSON.stringify(data));
                    alert('subscribe Purchase' + JSON.stringify(data));
                    this.getReceipt();
                }).catch((err) => {
                    this.getReceipt();
                    alert('subscribeError' + JSON.stringify(err));
                    console.log(err);
                });
        })
    } 
```******

# schema - 在 BizTalk 中部署多个相似架构

> ID：14600665
> 
> 赞同：2
> 
> 时间：2013-01-30T09:36:22.553
> 
> 标签：schema, biztalk, biztalk-orchestrations

我有两个不同的服务器，两个类似的 WCF 服务正在其上运行。两种服务完全相同（克隆）。我必须在一个编排中使用这两个服务，因为我必须将它们相互通信。（我正在使用“添加生成的项目”来添加服务参考）。我想从一种名为“Get”的服务方法获取数据并将其发送给其他“Send”方法。部署项目后，我收到错误消息`"Cannot locate document specification because multiple schemas matched the message type #####"`。

我已经阅读了使用特定文档架构创建自定义管道的解决方案，但没有奏效。

我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:55:54.893

问题是您现在在 BizTalk 应用程序中有多个架构，它们具有相同的命名空间和根元素。

您需要设置“获取服务”和“发送服务”的`DocumentSpecNames`属性，以告诉 BizTalk 使用哪一个。`XMLReceivePipeline``XMLTransmitPipeline`

这个值的基本格式是...`Schemaname+Rootname,Assembly`

例子：

```
Company.Schemas.Messages+GetReply,Company.Schemas, 
   Version=1.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:20:50.387

如果服务确实相同，那么您不需要使用向导两次导入架构 - 只需导入第一个服务的 WSDL 以创建架构和端口类型，然后创建一个新的发送端口*并相应地更改绑定指向第二个服务（即特别是服务 URL）。

如果您的 WCF 服务使用`MessageContracts`为多个服务调用接受或返回相同的消息有效负载（而不是`DataContract`，您通常应该获得表单的“唯一”根元素名称`xmlns#MyMethod`和`xmlns#MyMethodResponse`），则通常也会发生这种情况。

在这种情况下（即 common `MessageContracts`），除了 basvo 的回答之外，您还可以通过以下方式绕过此问题：

1.  将所有使用的 WCF 服务的所有工件导入 Visual Studio 中的 BTS 项目。
2.  保留每个请求（或响应模式）的第一个“实例”，然后在 VS 的 Orchestration 视图中，遍历每个第二个和后续端口类型，并删除端口上重复的请求或响应消息（“操作消息”）类型。（在每个端口类型下，您应该看到请求、响应以及任何故障消息类型）
3.  然后，您需要“编辑”已删除的每种消息类型，然后手动将其更改为您保留的架构的原始实例。
4.  您可能还需要从导入的`.xsd`文件中删除或更糟的是破解重复的消息类型。

但是，如果您的 Web 服务发生更改并且您需要再次“刷新”您导入的模式，这将是一个痛苦 - 如果导入向导检测到重复的模式并提供以这种方式为您合并它们，这将是一个很好的功能。

* **更新**- 只是为了澄清，在您的 orch 设计中重用相同的逻辑发送端口，但在部署的 BTS 服务器/集群中创建一个新的发送端口，将发送端口订阅到所需的消息/将第二个 Orch 链接到发送端口（取决于您是否使用直接绑定），并且显然将绑定更改为第二个 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T05:58:42.933

由于这些服务相同，因此只需为其中任何一项添加服务引用即可添加所需的架构。只需在 BizTalk MMC 中为每个服务创建单独的发送端口，并在配置编排时将编排中创建的逻辑端口连接到正确的发送端口。

该解决方案有效.....

# facebook - 更改应用显示名称如何影响应用状态

> ID：14600666
> 
> 赞同：-1
> 
> 时间：2013-01-30T09:36:24.600
> 
> 标签：facebook, status

我的应用程序已提交并处于“活动和上市”状态。那么，如果我更改显示名称字段 - 这会影响应用程序状态和应用程序中心列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:50:48.707

> 提交应用详细信息页面后，在列出应用或取消提交之前，无法更改值。在应用中心列出您的应用详细信息页面后，该页面的所有未来更改也将接受审核。

更多详情：[应用中心教程](https://developers.facebook.com/docs/guides/appcenter/)

# c++ - 正确的结构内存管理

> ID：14600684
> 
> 赞同：0
> 
> 时间：2013-01-30T09:37:21.763
> 
> 标签：c++

我想确保不会发生内存泄漏。

```
 struct tStruct{
       uint32_t id;
       A* a;
       C b;
   };
   std::vector<tStruct*> m_vector; 
```

我按照以下方式将对象推送和擦除到向量中。

推：

```
tStruct* myStruct = new tStruct;
myStruct->id = ID; // Some unique value
myStruct->a= new A();
myStruct->b = c; // c is an object
m_vector.push_back(myStruct); 
```

擦除：

```
 // Some stuff here 
 for (uint32_t i = 0; i < m_vector.size(); i++) {
     if (m_vector.at(i)->id == ID) { // Some filtering
         delete m_vector.at(i);
         m_vector.erase(m_vector.begin() + i);
     }
 } 
```

我理解正确吗

1.  我需要明确删除 myStruct->a ，因为它是在堆中分配的？
2.  对于其他成员，它们将被自动删除，因为它们在堆栈中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:41:51.030

经验法则：如果你有一个`new`，你必须有一个对应的`delete`。与 malloc 和 C 中的 free 相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:50:48.573

您需要手动删除所有由`new operator`. 否则你有潜在的内存泄漏，因为你没有删除`A* a;`

`new`和`delete`,`new []`并且`delete []`应该始终成对使用。

更好的解决方案是使用智能指针：

```
struct tStruct
{
     uint32_t id;
     std::unique_ptr<A> a;
     C b;
};

std::vector<std::unique_ptr<tStruct>> m_vector; 
```

使用[erase remove idiom](http://en.wikipedia.org/wiki/Erase-remove_idiom)从向量中删除项目：

```
m_vector.erase(std::remove_if(m_vector.begin(), m_vector.end(), 
               [](std::unique_ptr<tStruct>& up){ return up->id == ID; }), 
               m_vector.end()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:49:24.583

每次使用 在堆中创建对象时`new`，一定有对应的`delete`地方。否则，您将泄漏资源（在这种情况下为内存）。

但是，一般来说（这适用于您的示例），您能做的最好的事情就是使用辅助类来管理这些资源。在你的情况下，一个智能指针。在 C++11 中，标准库提供`std::shared_ptr<>`的看起来像是适合您情况的智能指针：

```
struct tStruct{
    uint32_t id;
    std::shared_ptr<A> a;
    C b;
};
std::vector<std::shared_ptr<tStruct>> m_vector; 
```

创建智能指针与创建原始指针没有太大区别：

```
std::shared_ptr<tStruct> myStruct (new tStruct);
myStruct->id = ID; // Some unique value
myStruct->a.reset(new A());
myStruct->b = c; // c is an object
m_vector.push_back(myStruct); 
```

但是现在你可以忘记打电话了`delete`，因为`std::shared_ptr<>`会处理好这个：

```
// Some stuff here 
for (uint32_t i = 0; i < m_vector.size(); i++) {
    if (m_vector.at(i)->id == ID) { // Some filtering
        // delete m_vector.at(i); This is no longer needed
        m_vector.erase(m_vector.begin() + i);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T09:51:58.637

您的代码仍然包含几个内存泄漏。如果推送对象失败，您的推送代码没有任何回滚：

```
tStruct* myStruct = new tStruct;
myStruct->id = ID;
myStruct->a= new A(); //could throw, if it does, then `myStruct` will leak
myStruct->b = c; // c is an object
//could throw, if it does, then `myStruct` and `myStruct->a` will leak
m_vector.push_back(myStruct); 
```

一般来说，任何手动调用都`delete`表明您的代码要么泄漏，要么过于复杂。为了使代码不泄漏，您应该使用智能指针：

```
 struct tStruct{
    uint32_t id;
    std::unique_ptr<A> a;
    C b;
};
std::vector<std::unique_ptr<tStruct>> m_vector; 
```

构造：

```
std::unique_ptr<tStruct> myStruct(new tStruct);
myStruct->id = ID;
myStruct->a.reset(new A());
myStruct->b = c; // c is an object
m_vector.push_back(std::move(myStruct)); 
```

不需要特殊的删除代码。

# c++ - 具有未知列表模板参数的 QVariant 到 QList

> ID：14600687
> 
> 赞同：2
> 
> 时间：2013-01-30T09:37:26.657
> 
> 标签：c++, qt

我有几个`QObject`类，它们可能具有`QList`存储`QObject`派生类列表的属性：

```
class Object : public QObject
{
    Q_OBJECT
    Q_PROPERTY(QList<AnotherQObject*> otherObjects READ otherObjects)
public:
    QList<AnotherQObject*> otherObjects() const;
} 
```

`QList<AnotherObject*>`当然已经在`Q_DECLARE_METATYPE`and注册了`qRegisterMetaType()`。

现在我想用 Qt 的元对象系统来读取这个属性。在我想阅读列表的时候，我只关心（并且知道）列表包含指向对象的指针，这些指针是从 派生的`QObject`，而不是确切的类型。

当我将属性转换`QVariant`为`QList<QObject *>`列表时为空。

```
QObject *object = getObjectFromSomeWhere();
const char* propertyName = getPropertyNameFromSomeWhere(); // "otherObjects"

QVariant list = object->property(name);
QList<QObject *> objectList = list.value<QList<QObject *> >(); // empty

QList<AnotherQObject*> anotherObjectList = 
    static_cast<Object*>(object)->otherObjects() // not empty 
```

是否可以访问此列表？您还有其他建议吗？

编辑：虽然我发布了我的解决方案，但我仍然喜欢评论:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-14T02:20:12.303

如果您使用的是 Qt 5.2 或更高版本，则有一个 QSequentialIterable 类，它允许您执行此操作而无需额外模板、修改宏和额外注册的开销。

[http://qt-project.org/doc/qt-5/qsequentialiterable.html](http://qt-project.org/doc/qt-5/qsequentialiterable.html)

如果您将 a`QList<T*>`存储在 a 中`QVariant`，其中 T 派生自`QObject`，则可以从变体中获取一个`QSequentialIterable`实例，这允许您将列表中的每个项目作为 a 进行迭代`QVariant`。然后，您可以简单地将每个项目的值获取为 a `QObject*`，并随时添加到 a `QList<QObject*>`（但请确保您测试了该类型派生自 的假设`QObject`）：

```
QList<QObject*> qobjectList;
if (variant.canConvert(QMetaType::QVariantList)) {
    QSequentialIterable iterable = variant.value<QSequentialIterable>();
    foreach (const QVariant& item, iterable) {
        QObject* object = item.value<QObject*>();
        if (object) { qobjectList.append(object); }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T11:16:38.770

我想我很简单地解决了这个问题。我创建了一个模板类，它可以将`QVariant`包含 a 的 a转换`QList<TemplateParameter *>`为`QList<QObject *>`.

我还有一个单例，它存储一个`QMap<int, Converter *>`，它映射`QVariant::userType()`到相应的转换器。

这允许我注册每个类，我想将其存储在属性中，如下所示：

```
VariantToObjectListConverter::instance()->registerConverter<AnotherQObject>(); 
```

然后我可以转换 unknown `QVariants`：

```
QVariant list = object->property("otherObjects");
QList<QObject *> objects = VariantToObjectListConverter::instance()->convert(variant); 
```

这是必要的代码：

```
class ConverterBase
{
public:
    virtual ~ConverterBase() {}
    virtual QList<QObject *> convert(const QVariant &variant) const = 0;
};

template<class Object>
class Converter : public ConverterBase
{
public:
    QList<QObject *> convert(const QVariant &variant) const
    {
        QList<Object *> list = variant.value<QList<Object *> >();
        QList<QObject *> result;
        Q_FOREACH(Object *object, list) result.append(object);
        return result;
    }
};

class VariantToObjectListConverter
{
public:
    Q_GLOBAL_STATIC(VariantToObjectListConverter, instance)

    ~VariantToObjectListConverter()
    {
        QHashIterator<int, ConverterBase *> i(m_converters);
        while (i.hasNext()) {
            i.next();
            delete i.value();
        }
    }

    template<class Object>
    void registerConverter()
    {
        QVariant v = QVariant::fromValue<QList<Object *> >(QList<Object *>());
        m_converters.insert(v.userType(), new Converter<Object>());
    }

    QList<QObject *> convert(const QVariant &variant) const
    {
        ConverterBase *converter = m_converters.value(variant.userType());
        if (!converter)
            return QList<QObject *>();

        return converter->convert(variant);
    }

private:
    QHash<int, ConverterBase *> m_converters;

    VariantToObjectListConverter() {}
}; 
```

我现在可以添加一个宏，它调用`registerConverter()`,`Q_DECLARE_METATYPE`和`qRegisterMetaType()`, 这样用户只需调用

```
REGISTER_TYPE(TypeName) 
```

# javascript - 加密 HTML 表单

> ID：14600688
> 
> 赞同：2
> 
> 时间：2013-01-30T09:37:27.150
> 
> 标签：javascript, html

我编写了一个简单的演示 html（启用 SSL）表单来通过它访问一些大学服务。它要求用户首先使用他的大学 ID 登录。

我的问题是，即使是我这个页面的所有者，如何加密登录数据？是否可以 ？以便用户可以放心地使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:23:26.210

您可以使用 HTTP Digest Authentication，它执行质询-响应身份验证并始终发送散列密码。

Digest 的问题在于它的 UI 很丑陋，并且注销由浏览器决定（您无法获得可靠的注销链接）。

或者，您可以在 JavaScript 中实现自己的质询-响应机制，例如[http://code.google.com/p/crypto-js/](http://code.google.com/p/crypto-js/)

*但这*毫无意义，因为用户无法保证您正在执行此操作，并且您将来不会用不安全的脚本替换安全脚本。作为网站所有者（或入侵您网站的人），您可以随时更改脚本并“窃取”密码。

SSL 很好。这是您可以在客户端执行的最好的真正安全性。

您可以确保将密码安全地存储在服务器端 — 使用 bcrypt（*而不是*md5/sha1）等慢速哈希对其进行哈希处理，并对每个密码使用唯一的盐。

# linux - 什么是 proc 和 sysfs 条目

> ID：14600692
> 
> 赞同：1
> 
> 时间：2013-01-30T09:37:38.023
> 
> 标签：linux, linux-kernel, filesystems, linux-device-driver

我想了解一下`proc and sysfs entries`。

到目前为止，我所理解的是，proc 条目是设置为 proc 文件系统的值。我不确定我是否正确。谁能详细解释一下它的真正需求以及它的用途？请为我提供链接以更好地了解它。接受任何形式的指导。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T07:08:57.287

/proc 文件系统是一个特殊的、由软件创建的文件系统，内核使用它来向世界输出信息。/proc 下的每个文件都与一个内核函数相关联，该内核函数在读取文件时动态生成文件的“内容”。我们已经看到了其中一些文件的运行情况；例如，/proc/modules 总是返回当前加载的模块的列表。

/proc 在 Linux 系统中被大量使用。现代 Linux 发行版上的许多实用程序，例如 ps、top 和 uptime，都从 /proc 获取它们的信息。一些设备驱动程序还通过 /proc 导出信息，您的也可以这样做。/proc 文件系统是动态的，因此您的模块可以随时添加或删除条目。

功能齐全的 /proc 条目可能是复杂的野兽；除其他外，它们可以被写入和读取。然而，大多数时候，/proc 条目是只读文件。本节涉及简单的只读情况。那些对实现更复杂的东西感兴趣的人可以在这里寻找基础知识；然后可以查阅内核源代码以获取完整的图片。

然而，在我们继续之前，我们应该提到不鼓励在 /proc 下添加文件。/proc 文件系统被内核开发人员视为有点不受控制的混乱，远远超出了其最初的目的（即提供有关系统中运行的进程的信息）。在新代码中提供信息的推荐方法是通过 sysfs。正如建议的那样，使用 sysfs 需要了解 Linux 设备模型，但是，我们不需要

来源 - [http://tjworld.net/books/ldd3/#UsingTheProcFilesystem](http://tjworld.net/books/ldd3/#UsingTheProcFilesystem)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-30T11:20:35.250

您可以查看 ldd3 以获取更多详细信息。它通常用作调试设备驱动程序的工具。我是新手。祝你好运。

# c# - StringComparison.InvariantCultureIgnoreCase 去哪儿了？

> ID：14600694
> 
> 赞同：20
> 
> 时间：2013-01-30T09:37:42.680
> 
> 标签：c#, .net, windows-store-apps

我正在将 C# 代码移植到 Windows 应用商店应用程序。令我惊讶的是，以下代码不再起作用：

```
someString.Equals("someOtherString", StringComparison.InvariantCultureIgnoreCase) 
```

`InvariantCulture`并`InvariantCultureIgnoreCase`已从 中删除（*）`StringComparison`。

**为什么？**

我该如何更换它？

编辑： (*) 严格来说，它并没有被*删除*，它只是*不适*用于 Windows 应用商店应用程序。结果是一样的：你不能使用它。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-30T09:42:44.320

这些特定选项并没有消失，但它们只是不受 Windows 应用商店应用程序的支持。

如果您查看 MSDN for [StringComparison Enumeration](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx)，您会发现 Portable library 或 .NET for Windows Store 不支持这些特定选项。

便携式库或 Windows 应用商店应用程序支持的唯一选项是：

*   当前文化
*   当前文化忽略案例
*   序数
*   序数忽略大小写

我无法说明原因，但没有“替换”选项，因为框架中不存在这些值。您必须使用确实存在的其他选项之一，这`StringComparison.OrdinalIgnoreCase`可能是最容易使用的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T09:48:29.053

看起来它不支持 Windows Store App。

对于 Windows 应用商店应用，仅可与***绿袋***枚举一起使用；

![在此处输入图像描述](../Images/d7c9a5b4057a725ab28bdd660dae399f.png)

对于一般的想法，人们`OrdinalIgnoreCase`在这种情况下使用。

[https://github.com/loqu8/sqlite-net/commit/bfa04a6a40b4f62000bb9c57d5517643404c9109](https://github.com/loqu8/sqlite-net/commit/bfa04a6a40b4f62000bb9c57d5517643404c9109)

# php - 将json解码变量传递给php

> ID：14600697
> 
> 赞同：0
> 
> 时间：2013-01-30T09:37:48.720
> 
> 标签：php, json

我有一个使用 Json 编码/解码的 JQuery 登录请求如下：

```
$('#btn_signin').click(function(){
    var parameters = $('#signin_form').serialize();
    $.ajax({
        url: baseurl + 'site/loginRequest',
        type: 'POST',
        data: parameters,
        dataType: 'json',
        success: function(output_str){
            if(output_str.usertype == "a"){
                var sess_email = output_str.email;
                window.location.replace(baseurl + 'site/page_a');

            }else if(output_str.usertype == "b"){
                var sess_email = output_str.email;
                window.location.replace(baseurl + 'site/page_b');

            }else{
                $('#result_msg').html(output_str);
            }
        }
    });
}); 
```

正如在带有**var sess_email**的脚本上看到的，我如何将它传递给 php 变量？

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:43:38.853

我不确定我是否理解正确，但是如果您想将 PHP 变量的值分配给 Javascript 变量，您可以执行以下操作：

```
var sess_email = <?php echo $someVar ?>; 
```

如果您正在寻找相反的方法，将 var 从 Javascript 传递到 PHP，那么这就是要走的路：

*   使用 AJAX 请求将其发送到服务器（然后我通常对其进行 JSON 编码）。
*   JSON 在服务器上对其进行解码并将其分配给 PHP 变量

例子：

在您的情况下，您将 javascript 变量“参数”发送到服务器。然后服务器端你会在 PHP 中这样做：

```
$parameters = $_POST['parameters']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:50:30.773

您不能将 javascript 变量传递给 PHP 变量。但有一些解决方法可用。你到底想做什么？

# c# - 为什么我们在 .net 框架中需要 MSIL

> ID：14600698
> 
> 赞同：-1
> 
> 时间：2013-01-30T09:37:58.893
> 
> 标签：c#, cil

我想知道当我们编译 .net 源代码时，它首先转换为 MSIL，然后转换为二进制可执行代码。我知道 MSIL 是独立于机器和语言的代码。

但是为什么它在被 CPU 执行之前先转换为 MSIL。我们在.net框架中实际上需要什么MSIL？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T09:43:05.680

我的头顶：

*   它节省了大量时间，因为 MSIL 已经优化，我们称之为预编译
*   MSIL 与语言无关，如果代码是用 C#、VB 或 F# 或 ... 编写的，这不再重要，这意味着“执行运行时”不需要为每种可能的语言提供正确的编译器
*   MSIL 独立于平台
*   去谷歌上查询

# java - Apache HTTP 客户端和 Google HTTP 客户端有什么区别？

> ID：14600699
> 
> 赞同：2
> 
> 时间：2013-01-30T09:38:00.197
> 
> 标签：java, httpclient, google-http-client

***正如标题中所说***

为什么谷歌的http客户端更快？我想知道。。

如果有很多话要解释，请给我链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T10:38:07.267

Google HTTP Client 是一种高级 HTTP 抽象，它允许您使用可插入的传输库（信息直接取自[https://code.google.com/p/google-http-java-client/](https://code.google.com/p/google-http-java-client/)）。其中之一是 Apache HTTP 客户端，这意味着您真的无法在速度方面比较它们两者（因为它们是根本不同的库）。

但是，由于在 Apache HTTP 客户端之上使用 Google 的 HTTP 客户端会引入开销（因为您添加了额外的层），因此仅使用 Apache 会更快。

# oracle - oracle 中的 Package 是什么以及它的语法是什么

> ID：14600704
> 
> 赞同：-1
> 
> 时间：2013-01-30T09:38:06.660
> 
> 标签：oracle

谁能以简单的方式告诉我什么是**包**，以及它有什么用处。**创建包**的语法是什么。因为我是第一次使用 Oracle 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:44:00.543

包提供了一种将相关过程、函数以及相关游标和变量封装在一起作为数据库中的一个单元的方法。

如需更多帮助，您可以查看[此链接](http://docs.oracle.com/cd/A57673_01/DOC/server/doc/SCN73/ch14.htm#packhead)。

# javascript - 使用 d3.js 的六角网格

> ID：14600705
> 
> 赞同：8
> 
> 时间：2013-01-30T09:38:08.240
> 
> 标签：javascript, d3.js

我目前正在尝试使用[d3.js](http://d3js.org/)和 d3.js 的hexbin[插件](http://d3js.org/)[创建](https://github.com/d3/d3-plugins/tree/master/hexbin)一个十六进制网格。我遇到的问题是我的网格中总是有空的六边形或整个空行，而不是所有的六边形都很好。

任何想法如何解决这一问题？

[我的代码](http://jsfiddle.net/AtjDB/1/)：

```
var margin = {
    top: 80,
    right: 20,
    bottom: 50,
    left: 80
},
width = $(window).width() - margin.left - margin.right,
height = $(window).height() - 28 - margin.top - margin.bottom;

var points = [];
for (var i = 0; i < 8; i++) {
    for (var j = 0; j < 12; j++) {
        points.push([Math.floor(width * j / 12), Math.floor(height * i / 8)]);
    }
}

var hexbin = d3.hexbin()
    .size([width, height])
    .radius((width / 12) / 2);

var svg = d3.select($("#grid").get(0)).append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

svg.append("g")
    .selectAll(".hexagon")
    .data(hexbin(points))
    .enter().append("path")
    .attr("class", "hexagon")
    .attr("d", function (d) {
    return hexbin.hexagon();
})
    .attr("transform", function (d) {
    return "translate(" + d.x + "," + d.y + ")";
})
    .attr("stroke", "#fff")
    .attr("stroke-width", "2px")
    .style("fill", function (d) {
    return "#dcdcdc"; //color(d.length); 
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T12:42:48.533

更改您的点数据，以便在添加六边形时，翻译不会将它们推到一个六边形太右或一排太远：

像这样的东西：

```
var points = [];
for (var i = 0; i < 8; i++) {
    for (var j = 0; j < 12; j++) {
        points.push([Math.floor(width * j / 14), Math.floor(height * i / 11)]);
    }
} 
```

# java - YouTubeService 类没有抛出这样的方法异常

> ID：14600707
> 
> 赞同：0
> 
> 时间：2013-01-30T09:38:19.207
> 
> 标签：java, youtube-api

我想使用 gData Java 客户端从 youtube 中检索只读数据，但是当我尝试创建 YouTubeService 类的对象时，它会抛出 No such Method Exception。找不到背后的原因。

```
YouTubeService service = new YouTubeService(clientID); 
```

例外是

> java.lang.NoSuchMethodError: com.google.gdata.data.ExtensionProfile.declareAdditionalNamespace(Lcom/google/gdata/util/common/xml/XmlWriter$Namespace;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:54:09.097

您很可能已经针对缺少方法的类的不同版本编译了一个类，而不是您在运行它时使用的版本。

确保您拥有正确的版本。

查看堆栈跟踪...如果在对库中的对象调用方法时出现异常，则很可能在编译和运行时使用了不同版本的库。

确保在编译时更新了实际运行的类文件。

如果在您创建的类实例化的对象上调用方法时出现异常，那么您的构建过程似乎有问题。

# javascript - Backbone.js Timer - 无用的 setInterval 调用

> ID：14600709
> 
> 赞同：2
> 
> 时间：2013-01-30T09:38:34.380
> 
> 标签：javascript, jquery-mobile, backbone.js

尽管我搜索了解决方案，但我没有找到适合我的问题的解决方案。我使用cordova和jquery mobile。触发事件：document.ready 和cordova 的设备就绪。我想通过检查布尔值来检查加载状态，以了解何时启动主应用程序。

所以看看我的代码：

首先：加载的第一个 js 文件：

```
function checkReadyStates() {
    if(domReady && cordovaReady) {
        timer.stop();
        start();
    }
}

var domReady = false;
var cordovaReady = true;
var timer = new TimerModel({interval : 50, method : checkReadyStates});
timer.start();

// get notified when DOM is loaded
$(document).ready(function() {
    ConsoleController.info('Document ready.');
    domReady = true;
});

// get notified when cordova is ready
document.addEventListener('deviceready', function() {
    ConsoleController.info('Cordova loaded.');
    cordovaReady = true;
}, false); 
```

第二：TimerModel：

```
define(['backbone'],function(Backbone) {

var model = Backbone.Model.extend({

    defaults: {
        timerObject : null,
        active : false,
        interval : 1000,
        method : null,
    },

    // init timer
    initialize : function() {
        _.bindAll(this, 'start', 'stop'); // context bindings
    },

    // starts the timer with given interval
    start : function() {
        if(!this.active) {
            this.active = true;
            this.timerObject = setInterval(this.method, this.interval);
        }
    },

    // stops timer
    stop : function() {
        this.active = false;
        clearInterval(this.timerObject);
    }

});

// return the timer model
return model;

}); 
```

希望有人能够提供帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:42:53.320

在这行代码here

```
this.timerObject = setInterval(this.method, this.interval); 
```

两者`this.method`和`this.interval`都是`undefined`，所以你没有设置*任何*运行*never*。这样做的原因是它`Backbone.Model`没有定义在实例本身的构造函数中传递的属性，而是在一个名为`attributes`. 您可以使用以下方法访问属性`model.get(property)`：

```
this.timerObject = setInterval(this.get('method'), this.get('interval')); 
```

此外，将计时器定义为模型并没有真正意义。毫无疑问，你会得到它的工作，但这不是`Backbone.Model`预期的目的。模型用于表示一部分`data`，而不是功能。我认为一个简单的功能会在这里为您提供更好的服务。

**编辑：**换句话说，模型*不仅*用于数据，还应包含数据。该模型是定义对该数据进行操作的函数（方法）的好地方。另一方面，您`TimerModel`是纯逻辑 - 它不代表或封装任何数据或状态。我觉得逻辑最好封装成一个简单的函数“类”：

```
var Timer = function(options) {
    options = options || {};
    this.active = false;
    this.interval = options.interval || 1000;
    this.method = options.method || null;

    // starts the timer with given interval
    this.start = function() {
        if(!this.active) {
            this.active = true;
            this.timerObject = setInterval(this.method, this.interval);
        }
    };

    // stops timer
    this.stop = function() {
        this.active = false;
        clearInterval(this.timerObject);
    };

    _.bindAll(this, 'start', 'stop')
}); 
```

用法：

```
var timer = new Timer({interval: 50, method:checkReadyStates}); 
```

# cakephp - cakephp 库数据到控制器

> ID：14600710
> 
> 赞同：0
> 
> 时间：2013-01-30T09:38:33.820
> 
> 标签：cakephp, controller

我在 app/Lib/mylibrary.php 中有一个库，它从我们的 ldap 服务器获取用户信息。lib 函数在控制器中被调用并且工作正常。

如何将生成的用户数据从 lib 函数传递到控制器？我知道如何获得真假，但不知道如何将值传递给控制器​​。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T09:05:22.940

只需要返回结果数组。

```
return $array; 
```

它将它传递给控制器​​。

# wordpress - 我们可以在 wp-includes/functions.php 中添加 add_action('admin_init','myfunction')

> ID：14600715
> 
> 赞同：1
> 
> 时间：2013-01-30T09:38:40.800
> 
> 标签：wordpress

我有一个问题`add_action`，我可以补充一下`add_action`吗`functions.php``wp-includes/functions.php`

```
add_action('admin_init','myfunction'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:48:13.297

你可以，但你不应该，因为当你升级 wordpress 时，你所有的修改都会被覆盖。请改用您的主题`functions.php`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:29:19.563

出于 rrikesh 状态的原因，不要将其放入 wp-includes 中。你只是去更新代码。

如果您有很多需要通用功能的主题，请将它们设为父主题的子主题。

父母可以在自己的functions.php文件中保存所有公共代码，孩子将能够使用它。

查看有关儿童主题以及如何实施它们的信息[的法典。](http://codex.wordpress.org/Child_Themes)

# build - 关于集成流上的构建失败并在 UCM Clearcase 环境中修复它

> ID：14600721
> 
> 赞同：1
> 
> 时间：2013-01-30T09:39:07.513
> 
> 标签：build, clearcase-ucm

我们有一个很好的 UCM Clearcase 系统。我们在集成流上进行了适当的夜间构建，并且我已经为各种站点配置了 CruiseControl.NET。

问题是在构建失败的情况下，没有应用基线。这迫使开发人员修复构建服务器本身的问题。

这是非常不希望的。我想应用基线并使其 * *REJECT* * ed。然后要求开发人员通过基于 REJECTed 基线来解决问题。

我应该如何在以下流配置中做到这一点：

```
MainStream

    |
    |---Germany_Stream
           |
          / \
          Multiple developer streams
    |
    |---USA_Stream
           |
          / \
          Multiple developer streams 
```

开发人员将变更集交付到他们的站点。那是德国开发者到德国流和美国开发者到美国流。

然后将这些更改推送到 MainStream。每晚的构建发生在那里。应在 MainStream 应用基线，并建议在构建通过时使用。如果失败，则需要应用基线并 * *REJECT* * ed。如何让低于 MainStream 两个级别的开发人员可以使用* *REJECT *ed 基线？*

请告诉我如何让开发人员遵循最佳实践并阻止他们在构建服务器中进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:51:43.067

> 如何使 *REJECT*ed 基线可供低于 MainStream 两个级别的开发人员使用？

如果您正在考虑变基，则需要在站点流（美国或德国）上变基，*然后*变基开发流。

这可能是一个很好的方法，因为每个流都可以选择从站点流变基（拉取方法）到他们的开发流。
唯一的问题是它需要在流（美国或德国）中进行合并，该流也被开发人员用于交付：可能会发生冲突。

我建议为 Main 创建一个子流，称为`Rejected_Stream`，可以随意重新设置基础（并将获得最新的`REJECT`基线）。
从那里，任何开发人员都可以选择从该流启动交付到他们自己的开发流。

这种方法的问题是每次交付都必须*按顺序*进行。

# vb.net - 应用程序关闭时如何显示通知 Vb.net

> ID：14600723
> 
> 赞同：0
> 
> 时间：2013-01-30T09:39:21.510
> 
> 标签：vb.net, c#-to-vb.net

我是 Java 开发人员，是 Vb.net 的新手，我使用 Win 表单开发 Windows 应用程序，我的应用程序显示数据库中新更改的通知（即添加了新行）那么我如何在 Vb.net 中实现这一点。？我应该为它使用服务吗（但是当我阅读时，服务不能与 UI 交互）我不知道在后台获取数据并在我的应用程序处于后台/关闭时在通知中显示更新。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:20:07.473

你可以看看这样的东西：

[向 vb.net 应用程序发送通知消息](https://stackoverflow.com/questions/13285808/send-a-notification-message-to-vb-net-application)

[在 VB.NET 中创建系统托盘应用程序在](http://www.codeproject.com/Articles/75822/Create-a-System-Tray-Application-in-VB-NET)
这里，您可以允许托盘显示通知，以防 2 个或更多用户正在使用您的应用程序，以便他们可以收到通知。[**但是，您应该考虑这里**](http://www.xtremevbtalk.com/showthread.php?t=5601)提到的数据库集中化[](http://www.xtremevbtalk.com/showthread.php?t=5601)

 **您还可以看到[实现 SQL 通知](http://www.dotnetspark.com/kb/4264-implementing-sql-notification.aspx)**

# javascript - 在 javascript 中，如何读取枚举值？

> ID：14600729
> 
> 赞同：2
> 
> 时间：2013-01-30T09:39:29.913
> 
> 标签：javascript, asp.net-mvc, json, razor, enums

我创建了名为“ **grouptypejson** ”的 json 变量，如下所述：-

```
var grouptypejson = {
    "opt": [
             {
                "n": "@SampleResource.GENERIC",
                "v": 0
             },
             {
                "n": "@SampleResource.DEPARTMENT",
                "v": 1
             }
           ]
}; 
```

上面的 json 变量是在 javascript body 下的 cshtml 页面中全局定义的。

我正在使用硬编码值，即 "v":0 & "v":1

我不想使用硬编码值，而是想通过在模型命名空间下定义的枚举获取数字，即下面提到的：-

```
namespace My.Sample.Models.Enums
{
    public enum FilterEnum
    {
        Generic = 0,
        Department,
        All
    }
} 
```

我想使用上面的枚举读取值并将其存储在硬编码的地方

IE`"v":0 & "v":1`

我不知道如何将枚举值获取为整数并存储在“v”中。

我尝试使用下面提到的以下内容，但结果分别是**通用**和**部门**。在上面的 json 变量中用下面的字符串替换了 0 和 1。

```
 "v":"@FilterEnum.GENERIC" & "v":"@FilterEnum.DEPARTMENT" 
```

请指导我如何做同样的事情，我在我的 html 页面中包含 enum 命名空间。

如果我写错了什么，请纠正我。我是初学者和学习者。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:41:46.780

您可以将枚举转换为 int：

```
var grouptypejson = {
    "opt": [
             {
                "n": "@SampleResource.GENERIC",
                "v": @((int)SampleResource.GENERIC)
             },
             {
                "n": "@SampleResource.DEPARTMENT",
                "v": @((int)SampleResource.DEPARTMENT)
             }
           ]
}; 
```

# design-patterns - 访客模式命名背后的原因是什么？

> ID：14600730
> 
> 赞同：0
> 
> 时间：2013-01-30T09:39:30.313
> 
> 标签：design-patterns, visitor-pattern

GoF 关于设计模式的书说这个`Visitor`模式：

> Visitor 允许您定义一个新的操作，而无需更改它所操作的元素的类。

我从那本书中阅读了该模式，但未能理解命名该模式背后的直觉`Visitor`。为什么叫它`Visitor`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:06:50.667

有一个流行的法语表达/笑话：*“Fais comme chez toi mais n'oublie pas que tu es chez moi”*，我将其翻译*为“让自己在家，但不要忘记这是我的家”*。

我认为很难准确说出最初以这种方式命名该模式的人们的想法，但我认为直观上它与“热情好客”概念的相似之处。

类可以将其公共方法（门？）的访问权限授予访问者。问题是，该类不会尝试根据访客/客人的身份采取特定行动，而是简单地将适当的行为委托给访客（让自己回家......）。也就是说，Visitor 将使用其 Host 类的公共行为（不要忘记它是我的家……）。

# css - CSS 莫名其妙的图像宽度 - 仅在 Chrome 中非常奇怪的行为

> ID：14600731
> 
> 赞同：0
> 
> 时间：2013-01-30T09:39:36.150
> 
> 标签：css, google-chrome

我无法解释这一点：

在[这个页面上](http://www.memoryaid.org/)，页面中间最左边的按钮（读作“DOCTOR APPROVED”）被限制为80px的宽度，我完全不知道为什么......当我将鼠标移到上面时更有趣按钮它回到正常宽度......这仅发生在chrome上，在不同的机器上复制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:47:16.523

如果您删除内联样式 -`style="margin-left: 40px;"`从这里

```
<img src="/files/images/banner3001left.png" class="homepage-box" style="margin-left: 40px;"> 
```

没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:53:19.357

我无法在本地复制它，所以我有几个建议：

*   从图像中删除左边距。
*   为了清楚起见，在这些按钮周围放置一个 div-wrapper
*   给那些 p.homepage-box-p 一个宽度

# cookies - 恢复爬网后无法再次登录。恢复scrapy后cookies不粘

> ID：14600732
> 
> 赞同：1
> 
> 时间：2013-01-30T09:39:37.823
> 
> 标签：cookies, scrapy

我有一个 CrawlSpider，代码如下。我通过 tsocks 使用 Tor。当我启动我的蜘蛛时，一切正常。使用 init_request 我可以登录网站并使用粘性 cookie 进行爬网。

但是当我停止并恢复蜘蛛时出现问题。饼干变得不粘。

我给你来自 Scrapy 的回应。

```
=======================INIT_REQUEST================
2013-01-30 03:03:58+0300 [my] INFO: Spider opened
2013-01-30 03:03:58+0300 [my] INFO: Resuming crawl (675 requests scheduled)
............ And here crawling began 
```

所以... callback=self.login_url 在 def init_request 没有被触发！！！

我认为scrapy引擎不想在登录页面上再次发送请求。在恢复scrapy之前，我将login_page（我可以从站点上的每个页面登录）更改为restrict_xpaths中未包含的不同。

结果是 - 恢复后我无法登录并且以前的 cookie 丢失了。

有人有一些假设吗？

```
from scrapy.contrib.spiders import CrawlSpider,Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.loader import XPathItemLoader
from scrapy.contrib.loader.processor import TakeFirst, MapCompose, Join, Identity
from beles_com_ua.items import Product
from scrapy.utils.response import get_base_url
from scrapy.utils.url import urljoin_rfc
from scrapy.utils.markup import remove_entities
from django.utils.html import strip_tags
from datetime import datetime
from scrapy import log
import re
from scrapy.http import Request, FormRequest

class ProductLoader(XPathItemLoader):
    .... some code is here ...

class MySpider(CrawlSpider):
    name = 'my'
    login_page = 'http://test.com/index.php?section=6&type=12'

    allowed_domains = ['test.com']
    start_urls = [
        'http://test.com/index.php?section=142',
    ]
    rules = (
        Rule(SgmlLinkExtractor(allow=('.',),restrict_xpaths=('...my xpath...')),callback='parse_item', follow=True),
    )
    def start_requests(self):
        return self.init_request()

    def init_request(self):
        print '=======================INIT_REQUEST================'
        return [Request(self.login_page, callback=self.login_url)]

    def login_url(self, response):
        print '=======================LOGIN======================='
        """Generate a login request."""
        return FormRequest.from_response(response,
            formdata={'login': 'mylogin', 'pswd': 'mypass'},
            callback=self.after_login)

    def after_login(self, response):
        print '=======================AFTER_LOGIN ...======================='
        if "images/info_enter.png" in response.body:
               print "==============Bad times :(==============="
        else:
           print "=========Successfully logged in.========="
           for url in self.start_urls:
            yield self.make_requests_from_url(url)

    def parse_item(self, response):
        hxs = HtmlXPathSelector(response)

        entry = hxs.select("//div[@class='price']/text()").extract()
        l = ProductLoader(Product(), hxs)
        if entry:
        name = hxs.select("//div[@class='header_box']/text()").extract()[0]
        l.add_value('name', name)
        ... some code is here ...
        return l.load_item() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:28:42.620

`init_request(self):`仅当您从 not 子类化时才`InitSpider`可用`CrawlSpider`

您需要像这样从 InitSpider 子类化您的蜘蛛

```
class WorkingSpider(InitSpider):

    login_page = 'http://www.example.org/login.php'
    def init_request(self):
        #"""This function is called before crawling starts."""
        return Request(url=self.login_page, callback=self.login) 
```

但是请记住，您不能将其定义`Rules`为`initSpider`唯一可用的，`CrawlSpider`您需要手动提取链接

# php - 致命错误！闭包类的对象无法转换为字符串

> ID：14600735
> 
> 赞同：0
> 
> 时间：2013-01-30T09:39:46.870
> 
> 标签：php, function, email, variables, fatal-error

我已经制作了这个简单的购物车，我在其中制作了这个 if 和 else 函数，该函数位于我的邮件正文中调用的变量中，当您提交值时会显示此错误消息：致命错误！闭包类的对象无法转换为字符串

下面是部分变量函数代码：

```
$varer= function ($string) {
if ($_POST['smu']>= 1) 
{
"===========================================
Pilotjakke pelsforet Grå: \r\n
$pilotjakkegrå \r\n\r\n
===========================================" ;
}
else if($_POST['smu']<= 0)
{
    "";
}

// 
```

这是电子邮件正文部分：

```
$body = "

Bekreftelse på bestilling:
\r\n\r\n 

Navn: $name_field\r\n 
===========================================
E-Mail: $email_field\r\n 
===========================================
Firma: $firma\r\n 
===========================================
Adresse: $adresse\r\n 
===========================================
Poststed: $poststed\r\n 
===========================================
Postnummer: $postnummer\r\n 
===========================================
Firma: $firma\r\n 
===========================================
Telefon: $tlf\r\n 
===========================================
Message: $message\r\n\r\n
=====================================================================================
Takk for at du bestilte hos oss, orderen din vil sett på og du vil motta en faktura snart. 
\r\n\r\n
=====================================================================================
Varebestillingen : 
$varer
\r\n\r\n
===========================================
Total Order Sum: $order kr
===========================================
"; 
```

我得到了 $varer 所在的错误行。我试图将其转换为字符串，但我可能做错了。

您可以在这里查看该网站：http: [//www.premiere-produkter.no/pp/lagersalg/index.php](http://www.premiere-produkter.no/pp/lagersalg/index.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:47:53.297

你的 $varer 不是一个字符串，而是一个对象（类闭包的实例）。您可能想要迭代它的对象属性。

看看这个页面上的例子：

[http://php.net/manual/en/language.oop5.iterations.php](http://php.net/manual/en/language.oop5.iterations.php)

如果你真的想将一个对象转换为一个字符串，你可以使用 'serialize()' （这对闭包不起作用），例如：

```
Varebestillingen : ".serialize($varer)."\r\n\r\n 
```

要检查 var 的结构，请使用：

```
var_dump($varer); 
```

# ios - 减慢动画中的 UIView 动画

> ID：14600736
> 
> 赞同：2
> 
> 时间：2013-01-30T09:39:50.670
> 
> 标签：ios, animation, uiview

我有简单的 UIView 动画块，它为 2 个视图的原点设置动画。我在地图视图视图上的特殊位置上有一个按钮。因此，当我想为地图中心设置动画并随地图移动图钉时，地图的移动速度比按钮快。有没有办法加快按钮的动画或减慢地图的动画？目前看起来地图移动了，按钮跳到了他的结束位置。

```
CGPoint newCenter = mapView.center;
newCenter.x -= 1;
newCenter.y -= (button.frame.size.height/2)

[UIView animateWithDuration:0.3 delay:0 options:UIViewAnimationCurveEaseIn animations:^{

     CGPoint screenPoint = fakePin.frame.origin;
     screenPoint.x -= 5;
     screenPoint.y += button.frame.size.height-4;

     mapView.mapCoord = [mapView.map convertPoint:screenPoint toCoordinateFromView:self.view];
    self.mapView.map.centerCoordinate = mapView.mapCoord;
     [button setCenter:newCenter];
}]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:44:56.543

为什么不将按钮显示为注释？然后它会沿着地图移动。

不过，请尝试在按钮而不是中心上为属性框架设置动画。您需要自己进行计算，但我认为这可能是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:18:37.513

我只是想通了，问题是我的 setCenter: 在没有动画的情况下被调用，不知何故它与 ios5 中的谷歌地图一起工作（动画本身但不在 ios6=

不，它有效！

# android - 我可以获取 android.location.Address getLocality() 的区域设置相关值列表吗？

> ID：14600738
> 
> 赞同：0
> 
> 时间：2013-01-30T09:39:51.067
> 
> 标签：android, location, locale, android-resources

我需要根据 android.location.Address 检查一些西班牙位置的名称，以了解我的应用程序的后端是否能够开箱即用地处理它们，或者是否需要进行一些工作。

在西班牙，有 4 种官方语言（西班牙语、加利西亚语、巴斯克语、加泰罗尼亚语），属于后三种地区的地点可能同时使用西班牙语和他们的地区语言命名，所以我需要确定如果我会得到什么我使用地址来获取位置名称。

有什么网站可以查到吗？

提前致谢。

编辑：这是 google geocoding API 返回的数组中的元素之一（我假设它是 android.location 类使用的元素）。

```
{
           "long_name" : "Rúa da Batundeira",
           "short_name" : "Rúa da Batundeira",
           "types" : [ "route" ]
        },
        {
           "long_name" : "Orense",
           "short_name" : "Orense",
           "types" : [ "locality", "political" ]
        },
        {
           "long_name" : "Ourense",
           "short_name" : "Ourense",
           "types" : [ "administrative_area_level_2", "political" ]
        },
        {
           "long_name" : "Galicia",
           "short_name" : "GA",
           "types" : [ "administrative_area_level_1", "political" ]
        },
        {
           "long_name" : "España",
           "short_name" : "ES",
           "types" : [ "country", "political" ]
        },
        {
           "long_name" : "32960",
           "short_name" : "32960",
           "types" : [ "postal_code" ]
        }
     ], 
```

请注意，此处的“locality”是“Orense”（西班牙名称），“administrative_area_level_2”是“Ourense”（同一地点的加利西亚名称）。

有没有一种方法可以检查完整列表，而不是通过谷歌地理编码 API 处理每个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:25:19.537

如果您有所有语言的名称，无论默认语言环境如何，都可以使用以下代码强制使用某种语言：

```
 String language = "es"; // or the language you want to set

        // creating locale
        Locale locale = new Locale(language); 
        Locale.setDefault(locale);
        Configuration config = new Configuration();
        config.locale = locale;

        // updating locale
        getResources().updateConfiguration(config, null);

        //then you get the string you want normally
        String string = getResources().getString(R.string.whatever); 
```

考虑到之后该活动中的所有内容都将被请求为该语言，如果您想继续正常进行，则需要将其恢复为默认语言。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:25:38.360

最后，我将它们全部输入并将它们包装在此类和资源文件中[https://github.com/alberovalley/GeografiaSpain](https://github.com/alberovalley/GeografiaSpain)该类具有根据需要返回带有数据的字符串数组的方法。

# javascript - 在 JavaScript 中调用带参数的函数列表

> ID：14600745
> 
> 赞同：0
> 
> 时间：2013-01-30T09:40:19.300
> 
> 标签：javascript

我有一个列表，其中包含许多带参数的函数。我如何在列表中循环并调用列表中的所有函数？

```
 list= []; 
```

然后我在 individualWidgetList 中推送许多功能；

```
 list.push(loadPhoneWidget);
 list.push(loadEmailWidget);
 list.push(loadAgentWidget);
 list.push(loadClientWidget); 
```

现在我想调用函数

```
 for (var i = 0; i < individualWidgetList.length; i++) {

   invoke here    
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:41:07.377

像这样做 ：

```
 for (var i = 0; i < individualWidgetList.length; i++) {
     individualWidgetList[i](myParameters);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:42:52.043

假设列表中的对象是函数。

```
 for (var i = 0; i < individualWidgetList.length; i++) {
   individualWidgetList[i](/*Any Parameters*/);    
 } 
```

# jquery - 更改菜单 css 类取决于 url 中的哈希

> ID：14600746
> 
> 赞同：2
> 
> 时间：2013-01-30T09:40:19.163
> 
> 标签：jquery, css, hash, scroll, slider

我想更改菜单链接属性（颜色）取决于哪个 div 聚焦在屏幕上。我正在为我的项目使用窗帘.js，html 看起来像这样：

```
<div id="menu">
<a href="#section-1">link 1</a>
<a href="#section-2">link 2</a>
<a href="#section-3">link 3</a>
</div>
<ol class="curtains">
<li id="section-1" class="cover">
.....
</li>
<li id="section-2" class="cover">
.....
</li>
<li id="section-3" class="cover">
.....
</li>       
</ol> 
```

这是一种页面布局，其中每个部分都将哈希传递给 url：如果 section-1 处于焦点位置，则 url 将为 xxx/index.html#section-1

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:47:55.547

您可以使用哈希作为选择器通过 ID 定位活动元素，然后使用`siblings()`将其他 li 上的颜色设置回默认值：

```
$(window).on('hashchange', function() {
    $('a[href="'+document.location.hash+'"]').css('color', 'red')
                                             .siblings('a')
                                             .css('color', 'black');
}).trigger('hashchange'); 
```

**编辑：**

单击时更改链接上的颜色似乎更容易：

```
$('#menu a').on('click', function() {
    $(this).css('color', 'red').siblings('a').css('color', 'black');
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:45:39.670

使用 jQuery，您可以简单地这样做：

```
$(window).bind('hashchange', function (e){
 // do color change
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T09:45:46.150

使用 Jquery 你应该能够到达那里。首先获取哈希：

```
var hash = window.location.hash; 
```

然后您可以将 css 类添加到您想要使用的任何元素：

```
$('a[href="' + hash + "]').addClass(hash) 
```

自己没有尝试，但试一试

# mysql - MYSQL - 在左表上加入 2 个完整行的表

> ID：14600755
> 
> 赞同：1
> 
> 时间：2013-01-30T09:40:47.610
> 
> 标签：mysql, sql, select, join

你能帮我解决这个问题吗？

我有2个表如下：

**属性**

```
| 编号 | 姓名 |
|----+--------------|
| 1 | 名字 |
| 2 | 姓氏 |
| 3 | 电子邮件 |

```

**属性值**

```
| uid | attr_id | 价值 |
|-------+-----------|------------|
| 1 | 1 | 你好 |
| 1 | 2 | 世界|
|-------+-----------|------------|
| 2 | 1 | 一个 |   
| 2 | 2 | 乙|
| 2 | 3 | a@xzy.com |

```

即使表attribute_values中不存在属性，我也想编写一个查询来选择用户的属性。然后，我想得到空值的结果。

例如选择用户 id 1

```
| 姓名 | 价值 |
|---------------|------------|
| 名字 | 你好 |
| 姓氏 | 世界|
| 电子邮件 | 空 |

```

用户 ID 2

```
| 姓名 | 价值 |
|---------------|------------|
| 名字 | 一个 |
| 姓氏 | 乙|
| 电子邮件 | a@xzy.com |

```

用户 ID 3 **（attribute_values 中不存在）**

```
| 姓名 | 价值 |
|---------------|------------|
| 名字 | 空 |
| 姓氏 | 空 |
| 电子邮件 | 空 |

```

是否有一个查询的最佳方法来获得上述 3 个示例的结果？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:42:42.227

```
SELECT  a.*, b.value
FROM    attributes a
        LEFT JOIN attribute_values b
            ON a.ID = b.attr_id AND b.uid = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/afabf/3)

# haskell - 尝试显示数字时 GHCI 中的堆栈溢出

> ID：14600760
> 
> 赞同：8
> 
> 时间：2013-01-30T09:41:03.637
> 
> 标签：haskell, ghci

在尝试学习 Haskell 时，我实现了一个 pi 计算，以便正确理解函数和递归。

使用[莱布尼茨公式](http://en.wikipedia.org/wiki/Leibniz_formula_for_%CF%80)计算 pi，我想出了以下内容，它将 pi 打印到给定参数的容差，以及递归函数调用的次数以获得该值：

```
reverseSign :: (Fractional a, Ord a) => a -> a 
reverseSign num = ((if num > 0
                        then -1
                        else 1) * (abs(num) + 2))

piCalc :: (Fractional a, Integral b, Ord a) => a -> (a, b)
piCalc tolerance = piCalc' 1 0.0 tolerance 0

piCalc' :: (Ord a, Fractional a, Integral b) => a -> a -> a -> b -> (a, b)
piCalc' denom prevPi tolerance count = if abs(newPi - prevPi) < tolerance
                                        then (newPi, count)
                                        else piCalc' (reverseSign denom) newPi tolerance (count + 1)
                                        where newPi = prevPi + (4 / denom) 
```

因此，当我在 GHCI 中运行它时，它似乎按预期工作：

```
*Main> piCalc 0.001
(3.1420924036835256,2000) 
```

但是，如果我将容差设置得太细，就会发生这种情况：

```
*Main> piCalc 0.0000001
(3.1415927035898146,*** Exception: stack overflow 
```

这对我来说似乎完全违反直觉。实际计算工作正常，但只是试图打印多少递归调用失败？

为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T09:50:07.867

在计算过程中从未对计数进行评估，因此直到最后它都会留下大量的 thunk（溢出堆栈）。

`BangPatterns`您可以在计算期间通过启用扩展和编写来强制其评估`piCalc' denom prevPi tolerance !count = ...`

那么为什么我们只需要强制评估`count`呢？好吧，所有其他参数都在`if`. 我们实际上需要在再次调用之前检查它们`piCalc'`，所以不会产生重复声；我们需要实际值，而不仅仅是“承诺可以计算它们”！`count`另一方面，在计算过程中永远不需要，并且可以作为一系列 thunk 一直保留到最后。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-30T09:51:27.567

这是传统`foldl (+) 0 [1..1000000]`堆栈溢出的变体。问题是在评估 的过程中永远不会评估计数值`piCalc'`。这意味着它只携带一组不断增长的 thunk，表示在需要时要完成的添加。当需要它时，评估它需要与 thunk 数量成比例的堆栈深度这一事实会导致溢出。

最简单的解决方案是使用`BangPatterns`扩展名，将开头更改`piCalc'`为

```
piCalc' denom prevPi tolerance !count = ... 
```

这会强制在`count`匹配模式时评估 的值，这意味着它永远不会长出巨大的 thunk 链。

等效地，并且不使用扩展名，您可以将其编写为

```
piCalc' denom prevPi tolerance count = count `seq` ... 
```

这在语义上与上述解决方案完全相同，但它`seq`通过语言扩展显式使用而不是隐式使用。这使它更便携，但更冗长。

至于为什么 pi 的近似值不是一长串嵌套的 thunk，而是 count 是：在需要、和`piCalc'`的值的计算结果上进行分支。它必须在决定是否完成或是否需要运行另一次迭代之前检查这些值。正是那个分支导致执行评估（当执行函数应用程序时，这通常意味着函数结果的模式匹配。）另一方面，计算中的任何内容都取决于,因此在计算过程中不会对其进行评估。`newPi``prevPi``tolerance``piCalc'``count`

# ios - 通过 cycript 在越狱设备上模拟 Mouseclick-Events

> ID：14600771
> 
> 赞同：1
> 
> 时间：2013-01-30T09:41:43.557
> 
> 标签：ios, mouseevent, jailbreak, tweak

我对来自 Matthias Ringwald的 iOS-Tweak "MouseSupport"[源代码 (Repo)很感兴趣。](http://code.google.com/p/iphone-tweaks/source/browse/trunk/MouseSupport/Tweak.xm?r=114)有人知道如何使用它吗？

我想在连接到 SpringBoard（通过 cycript）时模拟 Mouseclick-Events（例如，目标是以编程方式单击按钮或仅通过坐标模拟在特定点的单击）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:56:54.870

关于你的目标；看看[cocoawithlove.com](http://www.cocoawithlove.com/2008/10/synthesizing-touch-event-on-iphone.html)或查看 Github 上 masbogs 的[Private Framework Header](https://github.com/masbog/PrivateFrameworkHeader-iOS-iPhone-5.-) repo。

# objective-c - 如何在Objective C中检查字符串是否相同或更改

> ID：14600773
> 
> 赞同：0
> 
> 时间：2013-01-30T09:41:45.880
> 
> 标签：objective-c, xcode, uiwebview, nsstring

我检查任何子类的框架，如果它改变或没有用下面的代码。

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    if(imageFrameSize ==  CGRectZero) {
            imageFrameSize = self.recycleBin.frame;
            NSLog(@"Frame: %@", NSStringFromCGRect(imageFrameSize));
        }
} 
```

现在我想检查字符串是否相同或已更改。基本上我将历史记录存储在history.plist 中。我在下面的委托中运行函数以将文档 url 保存在 history.plist 文件中。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    //when push to reload is done it will disappear pulltorefresh
    [(PullToRefreshView *)[self.view viewWithTag:998] finishedLoading];

    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    [self actualizeButtons];

   urlPage =[webView stringByEvaluatingJavaScriptFromString:@"document.title"];    //[[[webView request] URL]absoluteString];

   [self addHistoryFunction];

    NSLog(@"WebView Finish Load %@",[[[webView request] URL]absoluteString] );

} 
```

这个功能很好用。但问题是 webViewDidiFinishLoad 为 google 运行了几乎两次，而为其他网站运行了 3 次或多次。所以 addHistoryFunction 使用相同的页面 url 保存历史两次或多次。我想在添加到历史记录之前检查 urlPage 字符串，如果它是更新的新字符串，则运行 addhistory 函数，如果相同则跳过 addhistory 函数。就像上面的 CGRectZero 代码一样。

这就是我在history.plist 中保存历史的想法。如果有更好的然后我的请帮助我或解决我的问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:17:53.023

如果您想与字符串进行比较，这就是

```
BOOL isTheSameStrings=[mystring isEqualToString:string2];
if (isTheSameStrings){
   NSLog(@"the are the same);
}else{
   NSLog(@"the are NOT the same);
} 
```

或者您想检查是否在数组中找到字符串

```
BOOL myArrayDoesContainMyString=[myArray containsObject:myString];
if (myArrayDoesContainMyString){
   NSLog(@"myArray contain myString);
}else{
   NSLog(@"myArray does not contain myString);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:04:12.400

`- (void)webViewDidFinishLoad:(UIWebView *)webView` 当 webview 完成在网页中加载对象时调用，因此最好的方法是防止多次调用此方法以添加此行：

```
if ([webView isLoading]){return;) 
```

此行将确保您的 webview 将在其仅完成加载时执行命令。这是您在编辑后尝试的功能。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
     if ([webView isLoading]){return;)
    //when push to reload is done it will disappear pulltorefresh
    [(PullToRefreshView *)[self.view viewWithTag:998] finishedLoading];

    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    [self actualizeButtons];

   urlPage =[webView stringByEvaluatingJavaScriptFromString:@"document.title"];    //[[[webView request] URL]absoluteString];

   [self addHistoryFunction];

    NSLog(@"WebView Finish Load %@",[[[webView request] URL]absoluteString] );

} 
```

# java - 是否使用 DTO？

> ID：14600780
> 
> 赞同：0
> 
> 时间：2013-01-30T09:42:08.863
> 
> 标签：java, design-patterns, dao, dto

这似乎是一个非常简单的设计问题，但我很好奇你的意见。

我有一个 DAO 层，一种方法返回某些东西的最大值和最小值。`int[]`所以它返回两个整数值，但使用两个元素作为返回类型，对于方法调用`int[0]=min_val`者`int[1]=max_val`来说不是很清楚，因为他必须准确地知道哪个元素是第一个，哪个是第二个。

我应该在这里使用某种像这样的 DTO ...

```
class RangeValuesDTO {
  private int min_val;

  private int max_val;
} 
```

?

在这种简单的情况下，正确的模式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:40:08.120

您应该问自己为什么需要某种模式。就企业模式而言，没有最佳实践之类的东西。正如@TechExchange 所建议的那样，将数据库中的数据结构包装在一个对象中以保持您的接口紧凑和稳定，这是一个有效的关注点。但正如@Tom Anderson 指出的那样，这应该被称为值对象，而不是 DTO。

请记住，对 DTO 模式的需求有一些历史原因（参见[此处](http://en.wikipedia.org/wiki/Data_Transfer_Object)），主要是在 EJB-3 之前的世界中。这些可能不再适用。

DTOs can help separating higher layers from accessing the data layer directly. In a simple CRUD application this can however add too much indirection and thus unnecessary duplication and complexity, thus more maintainance. You often end up having DTOs that look very similar to the entities that may not leave the data access layer.

DTOs can be especially helpful in distributed systems where they lead to more coarse grained interfaces and reduce network traffic.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:45:02.860

确切地说，您应该始终将数据包装在有意义且可重用的 DataStructures 中。

使用 DTO 将帮助您实现这一目标。

例如，将来如果您的 DAO 返回另一个`int`或`string`您将做什么，如果您使用 DTO，则解决方案很容易将其添加`int`或添加`string`到 DTO，并且不会影响应用程序的其他层。

所以+1 DTO

# python-2.7 - 是否可以对装饰器和函数使用相同的参数

> ID：14600782
> 
> 赞同：0
> 
> 时间：2013-01-30T09:42:18.240
> 
> 标签：python-2.7, arguments, decorator

我需要了解如何访问传递给装饰器中函数的变量。

让我用一个例子来解释一下，是否可以做这样的事情：

```
class test(object):
    ....
    @DecoratorClass(myWrapper(self, x))
    def myFunction(self, x):
        print x
        print self.y 
```

`test-class`在某些时候，会创建一个实例，并`myFunction`从某处调用。我需要将相同的参数传递给`myWrapper`.

我希望这已经足够清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:49:29.373

装饰器用包装它的可调用函数替换函数，因此可调用函数将传递与原始函数相同的参数。因此，例如：

```
def Decorator(original_function):
  def replacement_function(x):
    # You now have 'x' here... do what you want with it.
  return replacement_function

@Decorator
def MyFunction(x):
   # ... 
```

请注意，您需要延迟“myWrapper”的构建，直到函数执行（因为在此之前您将没有函数参数）。

# php - Wordpress 和目录问题

> ID：14600786
> 
> 赞同：0
> 
> 时间：2013-01-30T09:42:36.893
> 
> 标签：php, wordpress, .htaccess

我在使用 WordPress 和我的目录时遇到了一些问题。基本上我的 Wordpress 网站托管在根目录上，但每次我尝试访问另一个目录时，例如

mysite.com/Moodle/

它将我带到 WordPress 站点的 404，而不是其他目录中的文件。我读过 .htaccess 是关键。但是我遇到了这些问题：

**[已解决]：原来我的旧主机 123reg 尚未完成更新导致问题的名称服务器。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:10:56.177

原来我的旧主机 123reg 还没有完成更新导致问题的名称服务器。

# android - Can any one tell me how to use services for various

> ID：14600796
> 
> 赞同：-2
> 
> 时间：2013-01-30T09:42:57.487
> 
> 标签：android, android-mediaplayer

Can any one tell me how to use services for media player for playing the songs in background.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:02:08.570

You don't need any services to play song in the background . Internally media player calls its services and plays the song in the background.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:36:56.907

If reading through the reference and understanding [Media Player](http://developer.android.com/reference/android/media/MediaPlayer.html) is too much trouble check this.

[Android Building Audio Player Tutorial](http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/)

# java - 为 Java 进程提供某种签名/标识符

> ID：14600797
> 
> 赞同：1
> 
> 时间：2013-01-30T09:43:00.700
> 
> 标签：java, linux, jvm, ps

有没有办法从系统`Java`中运行的另一个程序启动我可以轻松识别它的进程`ps`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:46:47.273

`java`您可以使用命令行设置虚拟系统属性。这将在`ps`.

```
java ..... -Djvm.identifier=xyz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:46:58.000

```
java -Dvisualvm.display.name=wibble MyClass 
```

然后你可以找到它：

```
ps -ef | grep "visualvm.display.name=wibble" 
```

如果您使用`visualvm.display.name`属性名称，那么它将在 jvisualvm 中显示您的 java 进程时使用该名称。

# opengl-es-2.0 - glVertexAttributePointer 范围？

> ID：14600799
> 
> 赞同：1
> 
> 时间：2013-01-30T09:43:01.983
> 
> 标签：opengl-es-2.0, vbo, vertexdata

我目前正在 iOS 和 Android 平台上编写 OpenGL ES 2.0 应用程序。

在这个应用程序中，我渲染了多个都使用 VBO 的网格。在优化渲染的过程中，我意识到我渲染的网格共享两种顶点格式。所以我想做以下事情：

首先，设置所有顶点属性指针偏移量，然后简单地绑定每个使用这种顶点格式的 VBO 并渲染它，而无需`glVertexAttribPointer`再次调用该函数。

但它给了我奇怪的结果。

`glVertexAttribPointer`我的问题是：每次我们绑定一个新的 VBO 时都必须调用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:26:17.290

首先，就像每个 OpenGL 状态一样，设置的状态`glVertexAttribPointer`保持不变，直到其他人再次调用`glVertexAttribPointer`（对于相同的属性索引）。但这里重要的是，内部状态更改为`glVertexAttribPointer`不只是存储用于渲染的缓冲区偏移量，调用时偏移到 VBO 范围内`glDraw...`。它还存储调用时绑定**的实际缓冲区对象**`glVertexAttribPointer`。

所以是的，每当您想要从另一个 VBO 获取顶点数据时，您需要绑定此 VBO 并在绑定此 VBO 时执行适当的`glVertexAttribPointer`调用。虽然这在您的情况下可能看起来很麻烦，但这实际上是一件好事。这样，您在渲染某些内容时无需担心当前绑定的缓冲区，而只需担心使用`glVertexAttribPointer`. 更重要的是，让我们在渲染之前绑定不同的 VBO，因此您可以在单个渲染调用中从不同的 VBO 获取不同的顶点属性（否则您会怎么做？）。

**编辑：**但是，您可以使用[顶点数组对象](http://www.khronos.org/registry/gles/extensions/OES/OES_vertex_array_object.txt)来简化设置顶点数据的过程。它们封装了从一堆数组中渲染所需的所有状态（因此所有由 更改的东西`glVertexAttribPointer`，`gl(En/Dis)ableVertexAttribArray`以及绑定到 的缓冲区`GL_ELEMENT_ARRAY_BUFFER`，但就像说的那样，**不是**绑定到 的缓冲区`GL_ARRAY_BUFFER`）。当然，您仍然必须在调用之前正确绑定缓冲区`glVertexAttribPointer`。但是使用 VAO，您只需要在某些设置例程中使用此代码，渲染所需要做的就是调用`glBindVertexArray`. 虽然我不知道您的特定 ES 设备是否支持它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:51:23.653

我在使用 VAO / VBO 绘图时发现的一些很酷的资源

[http://www.arcsynthesis.org/gltut/Positioning/Tutorial%2005.html#d0e4720](http://www.arcsynthesis.org/gltut/Positioning/Tutorial%2005.html#d0e4720)

它展示了如何驱动多个对象，例如具有多个 VAO 和单个 VBO（每个 VAO 持有指向同一个 VBO 的不同偏移量的指针）

绝对值得一看，更不用说你学到的部分

*   `glBindBuffer(GL_ARRAY_BUFFER...`不绑定任何数据，它只是用于`glVertexAttribPointer`执行实际数据绑定的以下调用的全局指针

但

*   `glBindBuffer(GL_ELEMENT_ARRAY_BUFFER...`是否将元素数组绑定/保存到当前 VAO

# javascript - 真正的圆形 通过 css 或 js 表示

> ID：14600800
> 
> 赞同：5
> 
> 时间：2013-01-30T09:43:01.703
> 
> 标签：javascript, jquery, html, css

有没有办法创建一个真正的圆形 div 以便`overflow:hidden`可以将 div 中的所有内容隐藏在圆形区域之外？

我尝试使用`border-radius, -moz-border-radius, -webkit-border-radius`但`overflow:hidden`只隐藏正方形/矩形区域之外的东西。`border-radius`确实只是给人一种圆的错觉。

然后我想我可以创建一个PNG图像，中间有一个透明的圆形区域，周围是不透明的“类似背景”区域，以隐藏圆形区域之外的东西，但这又是另一种错觉，当背景不是静态的，而是会根据屏幕宽度和高度而相应变化。

那么我怎样才能制作一个**真正的**圆形div呢？通过 CSS 还是 JS 的意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:58:56.987

按照这些链接可能对您有帮助[http://www.css3.info/preview/rounded-border/](http://www.css3.info/preview/rounded-border/)
[http://border-radius.com/](http://border-radius.com/)
[http://www.w3schools.com/cssref/css3_pr_border-radius .asp](http://www.w3schools.com/cssref/css3_pr_border-radius.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T09:59:29.517

感谢你们的评论。

我刚刚想通了。事先我只设置`border-radius, -moz-border-radius, -webkit-border-radius`而不设置，`border:1px solid [color]`因此导致形成圆形区域而无法`overflow:hidden`正常工作。CSS3 的另一个奇怪行为。

# javascript - 如何使这个 javascript 代码比它更好？

> ID：14600803
> 
> 赞同：-1
> 
> 时间：2013-01-30T09:43:05.473
> 
> 标签：javascript, rating

我有代码可以根据评级呈现五星级评级，我认为这对每个人来说都很容易，但我不知道如何让这段代码变得更好。

@TJ Crowder 有解决这个问题的想法：

```
// Flags for whether to show stars, based on `average` being
// a fractional number `0 <= average < 5`
var stars = [
    average > 0,
    average > 1,
    average > 2,
    average > 3,
    average > 4
]; 
```

如何实现这个或任何人有任何想法使这个代码更好？

```
var result = '';
var one_star = '';
var two_star = '';
var three_star = '';
var four_star = '';
var five_star = '';

if(data == 0) {}
else if(data == 1) {
    one_star = 'star-rating-on';
    two_star = '';
    three_star = '';
    four_star = '';
    five_star = '';
}
else if(data == 2) {
    one_star = 'star-rating-on';
    two_star = 'star-rating-on';
    three_star = '';
    four_star = '';
    five_star = '';
}
else if(data == 3) {
    one_star = 'star-rating-on';
    two_star = 'star-rating-on';
    three_star = 'star-rating-on';
    four_star = '';
    five_star = '';
}
else if(data == 4) {
    one_star = 'star-rating-on';
    two_star = 'star-rating-on';
    three_star = 'star-rating-on';
    four_star = 'star-rating-on';
    five_star = '';
}
else if(data == 5) {
    one_star = 'star-rating-on';
    two_star = 'star-rating-on';
    three_star = 'star-rating-on';
    four_star = 'star-rating-on';
    five_star = 'star-rating-on';
}

result += '<span class="star-rating-control">';
result += '<div class="star-rating rater-5 star star-rating-applied star-rating-readonly '+ one_star +'"><a title="Poor">1</a></div>';
result += '<div class="star-rating rater-5 star star-rating-applied star-rating-readonly '+ two_star +'"><a title="OK/Fair">2</a></div>';
result += '<div class="star-rating rater-5 star star-rating-applied star-rating-readonly '+ three_star +'"><a title="Good">3</a></div>';
result += '<div class="star-rating rater-5 star star-rating-applied star-rating-readonly '+ four_star +'"><a title="Great">4</a></div>';
result += '<div class="star-rating rater-5 star star-rating-applied star-rating-readonly '+ five_star +'"><a title="Excellent">5</a></div>';
result += '</span>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:03:17.383

您可以利用这样一个事实，即一旦切换条件评估为真，那么它将继续执行所有进一步的条件，直到遇到中断。尝试以下操作：

```
<html>
<head>
</head>
<body>
<div id="stars"></div>
<script language="JavaScript">
html='';
num=4;
switch(num) {
    case 5:
        html+="*";
    case 4:
        html+="*";
    case 3:
        html+="*";
    case 2:
        html+="*";
    case 1:
        html+="*";
    }
document.getElementById("stars").innerHTML=html;
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:46:32.240

尝试这个：

```
var one_star = '', two_star = '', three_star = '', four_star = '', five_star = '';
if(data == 1) { one_star   = 'star-rating-on'; }
if(data <= 2) { two_star   = 'star-rating-on'; }
if(data <= 3) { three_star = 'star-rating-on'; }
if(data <= 4) { four_star  = 'star-rating-on'; }
if(data <= 5) { five_star  = 'star-rating-on'; } 
```

这会将所有变量设置`''`为默认值，然后`star-rating-on`根据需要添加。

* * *

或者，使用数组：

```
var star = ['','','','',''];
for(var i = 0; i < star.length && i <= data -1; i++){
    star[i] = 'star-rating-on';
}

var baseDiv = '<div class="star-rating rater-5 star star-rating-applied star-rating-readonly ';
result += '<span class="star-rating-control">'
  + baseDiv + star[0] +'"><a title="Poor">1</a></div>'
  + baseDiv + star[1] +'"><a title="OK/Fair">2</a></div>'
  + baseDiv + star[2] +'"><a title="Good">3</a></div>'
  + baseDiv + star[3] +'"><a title="Great">4</a></div>'
  + baseDiv + star[4] +'"><a title="Excellent">5</a></div>'
  + '</span>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:56:43.987

你想要的基本上可以在一个循环中完成：

```
var i
  , on
  , titles = [null, 'Poor', 'Ok/Fair', 'Good', 'Great', 'Excellent']
  , result = '<span class="star-rating-control">';
for (i = 1; i <= 5; i++) {
  on = data >= i ? 'star-rating-on' : '';
  result += '<div class="star-rating rater-5 star star-rating-applied star-rating-readonly ' + on +'"><a title="' + titles[i] + '">' + i + '</a></div>'
}
result += '</span>'; 
```

这就是你所需要的，在这里查看一个工作示例（我在示例中将数据设置为 3）：http: [//jsfiddle.net/k7sVC/1/](http://jsfiddle.net/k7sVC/1/)

# objective-c - 带有用户名和密码的 Xcode 登录测试应用程序

> ID：14600804
> 
> 赞同：0
> 
> 时间：2013-01-30T09:43:07.923
> 
> 标签：objective-c, xcode4.2

我正在为真实项目创建一个虚拟应用程序，其中我有登录页面。现在我有一些用户名和密码，当在文本字段中输入并按下登录按钮时，它们应该带我进入下一个视图。有没有办法存储这些用户名和密码？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:47:55.513

将它们存储在常量中？

常量.h

```
extern NSString *const TestUsername;
extern NSString *const TestPassword; 
```

常数.m

```
NSString *const TestUsername = @"TestUsername";
NSString *const TestPassword = @"TestPassword"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:49:18.750

转到此链接：[iOS：如何在应用程序中存储用户名/密码？](https://stackoverflow.com/questions/6972092/ios-how-to-store-username-password-within-an-app)

**或者**

您应该始终使用 Keychain 来存储用户名和密码，并且由于它是安全存储的并且只有您的应用程序可以访问，所以在应用程序退出时无需将其删除（如果您担心的话）。

Apple 提供了存储、读取和删除钥匙串项目的示例代码，这里是如何使用该示例中的钥匙串包装类，这极大地简化了钥匙串的使用。

放置 Security.framework（在 Xcode 3 中右键单击 frameworks 文件夹并添加现有框架。在 Xcode 4 中选择您的项目，然后选择目标，转到 Build Phases 选项卡并单击 Link Binary With Files 下的 +）和 KeychainItemWrapper .h & 。 m 文件到您的项目中，#import .h 文件在您需要使用钥匙串的任何地方，然后创建此类的实例：

```
KeychainItemWrapper *keychainItem = [[KeychainItemWrapper alloc] initWithIdentifier:@"YourAppLogin" accessGroup:nil]; 
```

（YourAppLogin 可以是您选择调用钥匙串项的任何内容，如果需要，您可以拥有多个项）

然后您可以使用以下方法设置用户名和密码：

```
[keychainItem setObject:@"password you are saving" forKey:kSecValueData];
[keychainItem setObject:@"username you are saving" forKey:kSecAttrAccount]; 
```

让他们使用：

```
NSString *password = [keychainItem objectForKey:kSecValueData];
NSString *username = [keychainItem objectForKey:kSecAttrAccount]; 
```

或使用以下方法删除它们：

```
[keychainItem resetKeychainItem]; 
```

# java - 存储键值对的最佳 Java 数据结构

> ID：14600806
> 
> 赞同：19
> 
> 时间：2013-01-30T09:43:15.987
> 
> 标签：java, android

> **可能重复：**
> [Java Hashmap：如何从值中获取键？](https://stackoverflow.com/questions/1383797/java-hashmap-how-to-get-key-from-value)
> [Java中的双向地图？](https://stackoverflow.com/questions/10699492/bi-directional-map-in-java)

我想要一个`key value data structure`用于 Android 应用程序。我可以使用`Map<K,V>`，但`Map`我无法获得特定值的密钥。

是否有任何好的 Java 数据结构，我可以使用它按值检索键，反之亦然。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T09:59:07.290

即使您不知道 Map 中的任何键，您也可以将 Map 与 entrySet 和 Map.Entry 类一起使用来迭代并获取键和值。

```
Map <Integer,String> myMap = new HashMap<Integer,String>();

Iterator<Entry<Integer, String>> iterator = myMap.entrySet().iterator();
while (iterator.hasNext()) {
    Map.Entry<Integer,String> pairs = (Map.Entry<Integer,String>)iterator.next();
    String value =  pairs.getValue();
    Integer key = pairs.getKey();
    System.out.println(key +"--->"+value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:52:54.843

使用 Google Guava [BiMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html)

如何在 Android 中使用 Guava Libraris 就在[这里](https://stackoverflow.com/questions/5925236/using-google-guava-with-android-1-6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:12:54.330

[最好的数据结构是 Java HashMaps 检查这个链接](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html) 你可以使用该`get(Object key)`方法

# ssl - 在 aws 负载均衡器中 sshing 并将其配置为子域路由？

> ID：14600808
> 
> 赞同：3
> 
> 时间：2013-01-30T09:43:19.893
> 
> 标签：ssl, amazon-web-services, subdomain, load-balancing, amazon-elastic-beanstalk

我们想使用 Amazon Elastic BeanStalk 服务在 EC2 Boxes 中进行部署。我们希望以这样一种方式部署我们的 Ruby on Rails 应用程序，以便我们可以对不同的 Rails 应用程序进行基于子域的路由。

我们想为我们的负载均衡器使用单个 SSL 证书，并希望在发生基于子域的路由时配置我们的负载均衡器。HA 代理可以很好地完成这项工作，但是当我们尝试使用 Amazon Elastic BeanStalk 服务进行部署时，aws 创建了一个负载均衡器，但没有将其与任何密钥对关联。因此，我们无法在负载均衡器中使用 ssh 并为基于子域的路由添加我们的配置。

有人可以指点我一些解决方案吗？

谢谢，安基特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:11:07.143

您不需要通过 SSH 连接到 AWS 负载均衡器，它们基本上是一个黑匣子，您只有一组有限的配置选项。您可能需要查看用于 DNS 路由的[Route 53服务。](http://aws.amazon.com/route53/)

您的配置将基于域 DNS 路由到不同的负载均衡器，一个用于您需要的每个单独的服务。您不能让单个 ELB 根据域或 URI 片段将流量路由到不同的 EC2 实例。

# android - Android：将静态库合并为一个

> ID：14600809
> 
> 赞同：2
> 
> 时间：2013-01-30T09:43:21.007
> 
> 标签：android, merge, android-ndk, static-libraries, unix-ar

我使用 Android NDK r8 生成多个**包含 $(BUILD_STATIC_LIBRARY) 的**静态库，并成功获得：lib1.a、lib2.a、lib3.a 等。

现在我想将这些静态库合并为一个。

我尝试使用来自 Android NDK 的 ar.exe 来实现：

```
android-ndk-r8\toolchains\arm-linux-androideabi-4.4.3\prebuilt\windows\arm-linux-androideabi\bin\ar.exe r libALL.a lib1.a lib2.a lib3.a 
```

但是当我在 Android NDK makefile 中使用**libAll.a**时，它会说没有索引。

如何添加此索引？

**其他问题：**

当我显示归档**libAll.a**的内容时，我看到的**是 lib1.a**、**lib2.a**、**lib3.a**而不是这些库中的**.o**符号。

如何更改它（= 从静态库中提取 .o 以将其合并到 libAll.a 中）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:49:05.800

`ar`只是一个像 zip 一样的归档工具。它接受给定的输入文件并生成一个`.a`存档。如果要将所有`.o`文件包含在单个存档中，则必须指定每个单独的文件。我不知道如何在 WINdows 上执行此操作，但在 Linux 上您可以使用类似`ar rs $(find . -name *.o)`.

# c++ - 如何确定当前使用特定 DLL 的进程

> ID：14600811
> 
> 赞同：13
> 
> 时间：2013-01-30T09:43:24.760
> 
> 标签：c++, windows, visual-studio

我在使用 Visual Studio 构建时遇到了一个问题，它说一个 DLL 不可访问，因为它当前被另一个进程使用，我的问题是如何确定“另一个进程”？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T09:47:47.790

[Process Explorer](http://technet.microsoft.com/en-gb/sysinternals/bb896653.aspx)有一个工具，允许您在当前运行的进程中搜索特定文件。要执行此搜索，请转到`Find`-> `Find Handle or DLL...`，然后输入您感兴趣的文件的名称。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-04T16:49:25.503

任务列表 /m thelocked.dll

建议来自

[https://blogs.msdn.microsoft.com/winclient/2004/07/08/how-to-find-out-which-process-is-locking-a-dll/](https://blogs.msdn.microsoft.com/winclient/2004/07/08/how-to-find-out-which-process-is-locking-a-dll/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T09:50:36.733

虽然*Process Explorer*通常是最好的工具，但当 VS 向您抛出此错误时，*通常*意味着**您尝试编译的应用程序**仍在运行（从较早的运行开始），因此链接器无法写入其输出.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T09:48:15.107

使用[SysInternals Process Explorer](http://technet.microsoft.com/en-US/sysinternals)中的查找功能（查找 -> 查找句柄或 DLL） 。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T10:55:52.797

[您也可以在Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653)中使用“关闭句柄”功能。

![在此处输入图像描述](../Images/32e2b35fbf679bf3eb2622f8eae02eff.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T09:45:10.257

我建议你试试[解锁器](http://www.emptyloop.com/unlocker/)。帮了我好几次。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T09:47:26.790

您可以使用[Process Explorer](http://technet.microsoft.com/en-gb/sysinternals/bb896653.aspx)查看哪些进程加载了哪些 Dll。

# multithreading - win 8 应用多线程

> ID：14600819
> 
> 赞同：0
> 
> 时间：2013-01-30T09:43:47.063
> 
> 标签：multithreading, windows-8

我有一个 win8 应用程序，我想在应用程序从服务器获取信息时添加进度环。但是当 proggressRing.isActivate = true; 检查服务器（）；

应用程序冻结，直到从 checkServer() 返回，并且 proggressRing 在冻结时不会激活。我四处询问并说你必须使用多线程我如何在 c# 中使用多线程或者还有其他方法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:00:51.283

对此有多种解决方案 1）首先确保 CheckServer 实现为 Async Task（仍然可以使用基于 Async Event 的）。

2) 如果是 CPU 密集型操作，使用 Task.Run 将 Task 排队在线程池线程上运行。

看看这篇文章 [http://msdn.microsoft.com/en-us/library/windows/apps/hh452713.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh452713.aspx)和这个 [http://msdn.microsoft.com/en-us/library/vstudio/ hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)

# c# - 关于分布式 C# 应用程序的共享数据库选项的建议

> ID：14600821
> 
> 赞同：3
> 
> 时间：2013-01-30T09:43:47.130
> 
> 标签：c#, sql-server

我想知道我对以下情况的选择：

我有一个 C# winforms 应用程序（在 VS 2010 中开发）分发到国内的多个办事处。该应用程序与位于单独位置的主服务器上的 C# Web 服务进行通信，并且在另一个位置有一个数据库 (SQL Server 2012)。（所有服务器运行 Windows Server 2008）

总部（我们所在的地方）使用相同的前端来管理数据库中的某些信息，这些信息需要随时可供所有办公室实时使用。同时，他们更改的任何数据都需要在总部随时提供给我们，因为我们有一个实时仪表板 Web 应用程序来监控站点范围的统计数据。

目前，用户抱怨应用程序的运行速度。他们说这真的很慢。我们在一个关键业务环境中工作，每一分钟的等待都可能意味着失去一个客户。

我研究了以下选项，但不是来自数据库背景，所以不太确定我的方案的最佳路线是什么。

*   终端服务/会话（我刚刚在总部实施，他们说这是一个很大的改进，尽管有一个可怕的滞后——比如远程处理到某人的桌面上，这不是很好的工作。）
*   事务复制（在我的场景中听起来似乎很合理，但需要所有办公室在各自的服务器上拥有自己的 SQL 服务器数据库，并且他们倾向于“摆弄”并破坏他们负责的一切！）希望我们可以接管他们所有的服务器，但他们是特许经营权，所以在现场有自己的 IT 人员。）

我目前在应用程序启动时缓存了很多查找数据，但这也需要 2-3 分钟才能完成，这是不可接受的！

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:19:54.997

由于一切都通过 Web 服务运行，因此无需在客户端本地部署额外的 SQL Server。除非 WS 也部署在本地，否则 WS 将无法与这些数据库通信。

在提出任何具体改进建议之前，您需要对瓶颈发生的位置进行基准测试。各种客户端和 Web 服务之间的延迟是多少，然后来自 Web 服务和数据库的延迟是多少？数据库是否显示任何等待？一旦你知道最坏的情况，改进它，然后按照自己的方式工作。

不过，一些一般的想法：

*   将 WS 移近数据库
*   在 Web 服务级别缓存数据以节省数据库调用
*   查找开销 WS 调用，并尝试优化吞吐量
*   如果查找数据不经常更改，请使用 SQL CE 的本地副本来缓存该数据，并使用 MS Sync Framework 使数据与 SQL Server 保持同步
*   对客户端计算机上的所有内容使用 SQL CE，并使用后台进程在客户端和 WS 之间进行同步

更新在您发表评论后，还有两个想法。如果您的 Web 服务负载很大，您可以尝试在 Web 服务上添加压缩（如果尚未实现）。

您还可以更新您的客户端以异步执行 WS 调用，无论是在线程中，还是在使用 .NET 4.5 时使用 async/await。这至少允许客户端使用 UI，但不需要解决数据加载时间的任何问题。

# c# - 从带有条件的字符串中删除特殊字符

> ID：14600823
> 
> 赞同：0
> 
> 时间：2013-01-30T09:43:52.690
> 
> 标签：c#, .net

我有一个字符串如下 -

```
"This is <h2>a place/h2>
<p>You know its a good place!</p>
<ul>
    <li>Booked your ticket #20130114074912_AN3P703C on Monday, January 14</li>
</ul>" 
```

所以，我希望我的字符串如下

```
"This is a place
You know its a good place.
Booked your ticket #20130114074912_AN3P703C on Monday, January 14" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:49:18.907

我相信这就是你的答案。[关联](http://www.dotnetperls.com/remove-html-tags)

尝试这个：

```
// <summary>
/// Remove HTML from string with Regex.
/// </summary>
public static string StripTagsRegex(string source)
{
   return Regex.Replace(source, "<.*?>", string.Empty);
} 
```

输出：

```
Input:    <p>The <b>dog</b> is <i>cute</i>.</p>
Output:   The dog is cute. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:54:45.420

这将在你的情况下完成工作

```
String neededString = Regex.Replace(source, "<.*?>", string.Empty); 
```

对于包含 CSS、JavaScript 节点的更复杂的字符串，您可以使用以下内容

```
String neededStringRegex.Replace(subjectString, @"<(style|script)[^<>]*>.*?</\1>|</?[a-z][a-z0-9]*[^<>]*>|<!--.*?-->", "") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:52:29.533

您可以使用以下方法从任何字符串中删除 HTML 标记

```
static string StripHTML (string inputString)
{
  return Regex.Replace(inputString, "<.*?>", string.Empty);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:00:02.697

下载并引用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)，然后调用以下命令：

```
var htmlDoc = new HtmlDocument();
htmlDoc.LoadHtml(input);
string output = htmlDoc.DocumentNode.InnerText; 
```

这仍然不会删除您的格式错误的`/h2>`标签，但它应该比正则表达式处理更多的 HTML。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T10:09:36.493

这应该可以解决问题

```
string input = "This is <h2> a place</h2><p>You know its a good place!</p><ul>    <li>Booked your ticket #20130114074912_AN3P703C on Monday, January 14</li></ul>";
input = Regex.Replace(input, "<.*?>", string.Empty); 
```

这将找到包含在“<>”中的所有字符串并将其替换为“”或空字符串

# c++ - 本机 C++ 项目无法在发布模式下编译？

> ID：14600824
> 
> 赞同：0
> 
> 时间：2013-01-30T09:43:52.667
> 
> 标签：c++, word-wrap, win32-process

我正在构建一个 win32 静态库项目，在调试模式下它编译没有任何问题，但是当我将构建模式更改为发布时，我得到了这个链接错误。谁能建议这里出了什么问题？

```
Error   2   error LNK1120: 1 unresolved externals   C:\Users\serak\Desktop\Cimg Wrapper\Release\nativeWin32console.exe  nativeWin32console
Error   1   error LNK2001: unresolved external symbol _main C:\Users\serak\Desktop\Cimg Wrapper\nativeWin32console\MSVCRT.lib(crtexe.obj)   nativeWin32console 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:48:19.817

如果您使用的是 Visual Studio，则还需要添加在发布模式下链接的任何外部库。您可能已经为调试构建配置完成了此操作，但它不会自行转移到发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:44:43.140

我认为在所有配置和平台的项目更改的项目属性页面（在 VS 解决方案资源管理器中单击项目）中，配置属性->项目默认值->配置类型->从应用程序到静态库：您可能已经设置它用于调试，但不适用于发布配置。

# vb.net - none 和 system.DBNull 之间的区别

> ID：14600825
> 
> 赞同：4
> 
> 时间：2013-01-30T09:43:52.147
> 
> 标签：vb.net, winforms, winapp

我在 VB.NET 中工作，我想知道 和 之间的`Nothing`区别`System.DBNull`。

当我当时触发保存查询时，我在运行时从网格中给出值，如下所示：

```
gvMain.Rows(j).Cells("Brand").Value.ToString() 
```

但是当它的值为 时它会向我显示错误，并且当它的`Nothing`值为`System.DBnull`

在这种情况下该怎么办？
提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T09:53:49.757

关键字`Nothing`用于指定或指定引用类型的 var 没有指向任何东西，没有对象为此 var 实例化。

`DBNull.Value`另一方面，是一个对象，用于指出DataBase 的某个字段的类型为空值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-23T16:08:41.460

`Nothing`是类型`System.Object.`

它代表任何数据类型的默认值。

`DBNull.Value`是类型`System.DBNull`

如果某物显示为`System.DBNull`，这意味着即使它没有值，它也有一个有效的指针。您可能已经发现，它不能转换为字符串、整数等。您必须进行检查（最好使用`IsDBNull`.

```
If IsDBNull(gvMain.Rows(j).Cells("Brand").Value) Then
    Return String.Empty
Else
    Return gvMain.Rows(j).Cells("Brand").Value.ToString().Trim()
End If 
```

# inner-join - Ormlite 4.41 版本的内连接

> ID：14600826
> 
> 赞同：1
> 
> 时间：2013-01-30T09:43:57.550
> 
> 标签：inner-join, ormlite

我知道只有 ORMlite 4.42 及更高版本才支持内部连接操作。在以前的 ormlite 版本中是否存在替换内部连接操作功能的方法 - 无需进行单独的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:25:15.170

您始终可以使用原始查询进行自己的联接：

> [http://ormlite.com/docs/raw-queries](http://ormlite.com/docs/raw-queries)

但否则答案是否定的。

# javascript - 在 jquery 中查找可滚动 div 内的不可见元素

> ID：14600834
> 
> 赞同：1
> 
> 时间：2013-01-30T09:44:20.153
> 
> 标签：javascript, jquery-ui, jquery, jquery-plugins

我有一个可滚动`div`的`overflow:scroll`. 我想要的是在滚动`div`时在当前可见的元素`div` 上添加一些 CSS 类，同时我必须`display:none`在 scrollable 中添加一些当前不可见元素的CSS 类`div`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:52:23.740

我为你做了一个例子。

**HTML**

```
<div id="scrollable">
    <div class="hidden">Hidden</div>
    <div>Visible</div>
</div> 
```

**CSS**

```
.hidden{display:none};

.something{background: red;}

.something-else{background: blue;} 
```

**jQuery/Javascript**

```
var hiddenElements= $("#scrollable div:hidden");
hiddenElements.addClass("something");
var visibleElements = $("#scrollable div:visible");
visibleElements.addClass("something-else"); 
```

示例：http: [//jsfiddle.net/jqRCk/1/](http://jsfiddle.net/jqRCk/1/)

# javascript - 如果 $scope 模型发生了变化，但长度保持不变，为什么 Angular-UI 日历没有更新？

> ID：14600836
> 
> 赞同：0
> 
> 时间：2013-01-30T09:44:21.670
> 
> 标签：javascript, angularjs, fullcalendar, angular-ui

我正在 AngularUI 中编写一个带有一些过滤的事件日历。

```
<div
    id="calendar"
    ui-calendar="{ height: 450, editable: false, defaultView: 'month' }" 
    class="span9 pull-right calendar"
    ng-model="events"
</div> 
```

当过滤器下拉列表更改时，会触发一个函数，该函数应该执行一些巫术并更新 $scope.events。

（缩短）

```
// Clear $scope.events
$scope.events = [];

// Initialise new events
var new_events = all_events;

if($scope.events_filter.type != 'all') {

    // Do filter
    new_events = json_service.filter(
        new_events,
        'type',
        $scope.events_filter.type
    );
}

// Update $scope.events
$scope.events = new_events; 
```

让我们从 6 个事件开始。如果有两种“类型”，每个类型有 3 个事件，让我们调用一种类型 A 和一种类型 B，您可以从 All 更改为 A，三个事件将正确显示。如果您改回“全部”，则将有 6 个可见。

如果您从 A 更改为 B，日历不会更新，但是，检查 $scope.events 会显示数据已更改。

过滤有效，并且 $scope.events 正在更新。

问题似乎是，如果 $scope.events 长度没有改变 - 它认为不适合重绘日历。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:34:16.157

你是对的。如果 events 数组的长度没有改变，日历将不会更新。这是因为 Angular 不会检测到整个数组对象的变化（不会引发摘要错误），而是需要观察更集中的变量集或观察返回一个事件源的函数才能正常工作。

两次编辑解决了这个特定问题。将 getOptions() 添加到 watch 方法值，并观察第一个事件源或观察所有事件源并将 equalsTracker 添加到指令的属性。

这是一个日历的链接，它从过滤器服务中切换出 2 个事件数组。（但这并不能解决您的问题）[http://plnkr.co/edit/VbYDNK?p=preview](http://plnkr.co/edit/VbYDNK?p=preview)

日历现在正在查看 eventSources 中的第一个事件数组。因此，现在您可以在范围上使用 angular 控制的任何事件都可以添加到第一个数组中，然后如果您需要拉入任何源，您可以在任何给定时间调用 fullcalendar 的 addSource 方法或您选择的任何其他方法。

这是一个更加开放的日历，它创造了许多攻击角度。

这是一个日历的链接，它正在观察第一个数组本身而不是它的长度。这也有效，所以也许我们应该选择这个。（这解决了你的问题）[http://plnkr.co/edit/AU6KNZ?p=preview](http://plnkr.co/edit/AU6KNZ?p=preview)

我读过它可能会导致观看大型数组的性能问题。

编辑：我已经回到绘图板并找到了一种方法来解决所有这些问题。现在我们不再需要查看事件源中的第一个数组，而只需查看跟踪器变量即可。tracker 变量将观察 eve​​ntSources 中所有事件的长度加上 eventSources 本身的长度。这将允许在 eventSources 内部观察任何数组，并且仍然让 angular 发挥它的魔力。

由于这个特定的用例，一个 equalsTracker 属性已添加到日历中。此 equalsTracker attr 必须是一个数字，并且应该在运行过滤器服务时更新，并且结果事件数组的长度与当前被过滤的 scope.events 数组的长度相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:36:46.397

我找到了解决办法！在 joshkurz 的帮助下，我意识到它只是检查长度变化。

简单的解决方案： -

在过滤 $scope.events 的检查长度之前。

过滤后检查 $scope.events 的长度。

```
var length = $scope.events.length;
$scope.events = [];
var new_events = all_events;

... filter new_events a little bit ...

$scope.events = new_events;

if($scope.events.length == length) {
    $scope.events.push({});
} 
```

长度不再不同了；）

谢谢乔希：）

# php - 从mysql 5.5降级到5.1，utf-8 general_ci

> ID：14600838
> 
> 赞同：0
> 
> 时间：2013-01-30T09:44:28.687
> 
> 标签：php, mysql, utf-8

我在本地使用 wamp，它的 mysql 版本是 5.5。完成网站后，我想将其上传到我的网站（共享主机）。运行（5.1），但我不能再插入阿拉伯字母了。

当我在阿拉伯语中插入任何字段时，它会被存储为奇怪的字符“Ø¶ÙˆÙˆØ¹”。

它在我的电脑上做得很好，但不是在线。

默认情况下，数据库是 myisam，但所有表都是带有 utf8_general_ci 的 innodb。这也是我在我的机器上使用的同一个数据库（默认为 innodb）（我已将它导入到共享主机上的新数据库中）。

到目前为止，我在建立连接后尝试了这些东西

```
mysql_set_charset('utf8'); 
```

和

```
mysql_query("SET NAMES 'utf8'");
mysql_query("SET CHARACTER SET utf8");
mysql_query("SET COLLATION_CONNECTION = 'utf8_unicode_ci'"); 
```

我还能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:02:15.257

如果您`mysql_set_charset('utf8');`在插入数据时正在使用并且没有出现任何错误，则意味着您正确地为数据库提供了 utf-8。另一方面，您可以在其他一些字符集中定义表，例如 Windows-1256（`'cp1256'`由 MySQL 标记），但是从您看到的输出（UTF-8 解码为 Windows-1252）看来这似乎是不可能的。

所以我看到的可能性是您正在从数据库中回显数据，并看到这些字符串。在发送任何输出之前，您需要告诉浏览器数据也是 UTF-8 格式：

```
<?php
header("Content-Type: text/html; charset=utf-8"); 
```

如果您已经在这样做或这样做没有帮助，则您的数据可能在导入过程中被错误地转换。

如果是这种情况，并且可以重新导入，请确保在导出数据时以 utf-8 格式输出，并且在导入导出的数据时，将其视为 utf-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:17:40.960

这发生在我身上一次，我正在使用`htmlentities()`，但是当我使用时`htmlspecialchars($string, ENT_QUOTES, 'UTF-8');`问题解决了。

希望你有同样的问题。

# c# - 将文本框绑定到浮点值。无法输入点/逗号

> ID：14600842
> 
> 赞同：43
> 
> 时间：2013-01-30T09:44:58.133
> 
> 标签：c#, .net, wpf

例如，当我尝试在文本框中输入点或逗号时，`1.02`或者`83,33`文本框阻止我输入这样的值（并且输入变为红色）。文本框绑定到一个浮点属性。为什么？

我已经将一个文本框绑定到一个`Power`实现`INotifyPropertyChanged`.

```
private float _power;

public float Power
{
    get { return _power; }
    set
    {
        _power = value;
        OnPropertyChanged("Power");
    }
} 
```

在 Xaml 中

```
<TextBox Name="txtPower" Height="23" TextWrapping="Wrap" Text="{Binding Path=Power, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></TextBox> 
```

我现在根本没有自定义验证。

也尝试了十进制，但它也不起作用。对于字符串，一切正常。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2016-03-11T14:22:48.767

如果您有 .NET 4.5 或更高版本，则可以强制执行 4.5 之前的行为

```
System.Windows.FrameworkCompatibilityPreferences.KeepTextBoxDisplaySynchronizedWithTextProperty = false; 
```

请参阅[Sebastian Lux 的博客](http://www.sebastianlux.net/2014/06/21/binding-float-values-to-a-net-4-5-wpf-textbox-using-updatesourcetriggerpropertychanged/)：在 .NET 4.5 中，默认情况下无法再输入分隔符（逗号或点）`UpdateSourceTrigger = PropertyChanged`。微软表示，这是有意的。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-30T09:48:10.533

尝试将 StringFormat 定义添加到绑定中。像这样：

```
<TextBox Name="txtPower" Height="23" 
    TextWrapping="Wrap" Text="{Binding Path=Power, Mode=TwoWay, 
    UpdateSourceTrigger=PropertyChanged,StringFormat=N2}"></TextBox> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-06T10:51:44.080

修复文本框绑定到十进制或浮点数中的点和逗号问题

```
1-  UpdateSourceTrigger = LostFocus 
2-  add string format StringFormat={}{0:#.##} to escape unneeded zeros 

<TextBox Name="txtPower" Height="23" 
         TextWrapping="Wrap" Text="{Binding Path=Power, Mode=TwoWay, 
         UpdateSourceTrigger=LostFocus ,StringFormat={}{0:#.##}}"></TextBox> 
```

# session - 在 Firefox 中提交表单时 Session 值发生意外变化

> ID：14600845
> 
> 赞同：1
> 
> 时间：2013-01-30T09:45:06.217
> 
> 标签：session

我在 Firefox 中遇到 PHP 会话问题。每次刷新/页面重新加载后，Session 都会发生变化。在其他浏览器上，它工作正常。

在我的 WordPress 模板中，我已经初始化了会话，比较了 post/session 变量。在执行“the_content()”函数时，将调用 functions.php 文件中定义的短代码“inf_kit”。

functions.php 中定义的简码将调用函数 kit() 和 CSRF()，这将设置会话变量并向表单添加隐藏文本字段，并在我的模板中返回。当我提交表单时，我得到了不同的值。在 IE 中，Chrome 是可以的。有人知道问题可能出在哪里吗？

* * *

**模板文件中的代码**

```
<?php
session_start();

if(isset($_POST["s_405"])){ 
    print_r($_SESSION);
    if($_SESSION['token_valid'] == $_POST['token_valid']) echo 'Good'; else echo 'issue'; 
} 

the_content(); 
?> 
```

**functions.php 中的代码**

```
<?php
add_shortcode( 'inf_kit', 'kit');

function kit($atts){ 
    $form .= '<form name="kit" method="post">
                <input type="hidden" value="'.time().'" name="s_405"/>'
                . CSRF('valid'). 
                '</form>'; 
    return $form; 
} 

function CSRF($key){ 
    $tkn = sha1($key.uniqid(rand(), true)); 
    $_SESSION['token_'.$key] = $tkn; 
    return '<input type="hidden" name="token_'.$key.'" value="'.$tkn.'">'; 
}
?> 
```

# networking - 从 nmap 输出了解子网范围

> ID：14600858
> 
> 赞同：0
> 
> 时间：2013-01-30T09:45:45.840
> 
> 标签：networking, subnet, nmap

我正在尝试在大型网络中查找子网范围，这是我的文章：我使用 nmap 来发现活动主机并为所有主机创建跟踪路由。之后，我可以使用 traceroute 信息绘制网络拓扑，但我无法将每个主机 Ip 与其所属的子网相关联，因为 nmap 无法提供此信息。

这是 nmap 的输出：

```
<?xml version="1.0"?>
<?xml-stylesheet href="file:///usr/local/share/nmap/nmap.xsl" type="text/xsl"?>
<!-- Nmap 6.25 scan initiated Thu Jan 17 14:48:44 2013 as: /usr/local/bin/nmap -&#45;datadir /usr/local/share/nmap -oX - -sn -&#45;traceroute -f -&#45;badsum -T4 aa.bb.*.1-10 -->
<nmaprun scanner="nmap" args="/usr/local/bin/nmap -&#45;datadir /usr/local/share/nmap -oX - -sn -&#45;traceroute -f -&#45;badsum -T4 aa.bb.*.1-10" start="1358430524" startstr="Thu Jan 17 14:48:44 2013" version="6.25" xmloutputversion="1.04">
<verbose level="0"/>
<debugging level="0"/>
<host starttime="1358430524" endtime="1358430527"><status state="up" reason="echo-reply" reason_ttl="61"/>
<address addr="aa.bb.5.5" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.254.13" rtt="435.69"/>
<hop ttl="4" ipaddr="aa.bb.5.5" rtt="6.54"/>
</trace>
<times srtt="8786" rttvar="6087" to="100000"/>
</host>
<host starttime="1358430524" endtime="1358430527"><status state="up" reason="echo-reply" reason_ttl="61"/>
<address addr="aa.bb.5.6" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.254.13" rtt="435.69"/>
<hop ttl="4" ipaddr="aa.bb.5.6" rtt="7.65"/>
</trace>
<times srtt="9876" rttvar="7052" to="100000"/>
</host>
<host starttime="1358430524" endtime="1358430540"><status state="up" reason="echo-reply" reason_ttl="61"/>
<address addr="aa.bb.16.5" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.138" rtt="27.07"/>
<hop ttl="4" ipaddr="aa.bb.16.5" rtt="15.74"/>
</trace>
<times srtt="61488" rttvar="76772" to="368576"/>
</host>
<host starttime="1358430524" endtime="1358430527"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.16.8" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.138" rtt="27.07"/>
<hop ttl="4" ipaddr="aa.bb.16.8" rtt="16.64"/>
</trace>
<times srtt="18283" rttvar="14326" to="100000"/>
</host>
<host starttime="1358430524" endtime="1358430527"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.16.9" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.138" rtt="27.07"/>
<hop ttl="4" ipaddr="aa.bb.16.9" rtt="19.44"/>
</trace>
<times srtt="53411" rttvar="63923" to="309103"/>
</host>
<host starttime="1358430524" endtime="1358430527"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.16.10" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.138" rtt="27.07"/>
<hop ttl="4" ipaddr="aa.bb.16.10" rtt="19.94"/>
</trace>
<times srtt="54037" rttvar="63398" to="307629"/>
</host>
<host starttime="1358430524" endtime="1358430527"><status state="up" reason="echo-reply" reason_ttl="61"/>
<address addr="aa.bb.17.5" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.138" rtt="27.07"/>
<hop ttl="4" ipaddr="aa.bb.17.5" rtt="25.50"/>
</trace>
<times srtt="53848" rttvar="62222" to="302736"/>
</host>
<host starttime="1358430524" endtime="1358430527"><status state="up" reason="echo-reply" reason_ttl="61"/>
<address addr="aa.bb.18.5" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.138" rtt="27.07"/>
<hop ttl="4" ipaddr="aa.bb.18.5" rtt="27.33"/>
</trace>
<times srtt="54679" rttvar="61420" to="300359"/>
</host>
<host starttime="1358430524" endtime="1358430527"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.18.10" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.138" rtt="27.07"/>
<hop ttl="4" ipaddr="aa.bb.18.10" rtt="27.34"/>
</trace>
<times srtt="60353" rttvar="71855" to="347773"/>
</host>
<host starttime="1358430524" endtime="1358430527"><status state="up" reason="echo-reply" reason_ttl="61"/>
<address addr="aa.bb.19.6" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.138" rtt="27.07"/>
<hop ttl="4" ipaddr="aa.bb.19.6" rtt="27.33"/>
</trace>
<times srtt="63600" rttvar="75779" to="366716"/>
</host>
<host starttime="1358430524" endtime="1358430536"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.32.8" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.129" rtt="11.90"/>
<hop ttl="4" ipaddr="aa.bb.32.8" rtt="59.18"/>
</trace>
<times srtt="13005" rttvar="18000" to="100000"/>
</host>
<host starttime="1358430524" endtime="1358430536"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.32.9" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.129" rtt="11.90"/>
<hop ttl="4" ipaddr="aa.bb.32.9" rtt="59.17"/>
</trace>
<times srtt="12991" rttvar="17989" to="100000"/>
</host>
<host starttime="1358430524" endtime="1358430536"><status state="up" reason="echo-reply" reason_ttl="61"/>
<address addr="aa.bb.33.5" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.129" rtt="11.90"/>
<hop ttl="4" ipaddr="aa.bb.33.5" rtt="59.15"/>
</trace>
<times srtt="23099" rttvar="23762" to="118147"/>
</host>
<host starttime="1358430524" endtime="1358430527"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.33.8" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.129" rtt="11.90"/>
<hop ttl="4" ipaddr="aa.bb.33.8" rtt="59.21"/>
</trace>
<times srtt="9802" rttvar="17866" to="100000"/>
</host>
<host starttime="1358430524" endtime="1358430536"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.33.9" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.129" rtt="11.90"/>
<hop ttl="4" ipaddr="aa.bb.33.9" rtt="59.21"/>
</trace>
<times srtt="23098" rttvar="23772" to="118186"/>
</host>
<host starttime="1358430524" endtime="1358430540"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.33.10" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.129" rtt="11.90"/>
<hop ttl="4" ipaddr="aa.bb.33.10" rtt="3.55"/>
</trace>
<times srtt="6560" rttvar="6102" to="100000"/>
</host>
<host starttime="1358430524" endtime="1358430527"><status state="up" reason="echo-reply" reason_ttl="61"/>
<address addr="aa.bb.34.5" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.129" rtt="11.90"/>
<hop ttl="4" ipaddr="aa.bb.34.5" rtt="5.25"/>
</trace>
<times srtt="4278" rttvar="4028" to="100000"/>
</host>
<host starttime="1358430524" endtime="1358430527"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.34.8" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.129" rtt="11.90"/>
<hop ttl="4" ipaddr="aa.bb.34.8" rtt="5.26"/>
</trace>
<times srtt="2360" rttvar="4577" to="100000"/>
</host>
<host starttime="1358430524" endtime="1358430528"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.65.9" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.13" rtt="12.02"/>
<hop ttl="4" ipaddr="aa.bb.65.9" rtt="7.78"/>
</trace>
<times srtt="11350" rttvar="9916" to="100000"/>
</host>
<host starttime="1358430524" endtime="1358430528"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.65.10" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.13" rtt="12.02"/>
<hop ttl="4" ipaddr="aa.bb.65.10" rtt="7.77"/>
</trace>
<times srtt="17875" rttvar="17375" to="100000"/>
</host>
<host starttime="1358430524" endtime="1358430528"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.66.8" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.13" rtt="12.02"/>
<hop ttl="4" ipaddr="aa.bb.66.8" rtt="7.76"/>
</trace>
<times srtt="15675" rttvar="14863" to="100000"/>
</host>
<host starttime="1358430524" endtime="1358430528"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.66.9" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.13" rtt="12.02"/>
<hop ttl="4" ipaddr="aa.bb.66.9" rtt="7.77"/>
</trace>
<times srtt="18615" rttvar="18222" to="100000"/>
</host>
<host starttime="1358430524" endtime="1358430528"><status state="up" reason="echo-reply" reason_ttl="125"/>
<address addr="aa.bb.66.10" addrtype="ipv4"/>
<hostnames>
</hostnames>
<trace proto="icmp">
<hop ttl="1" ipaddr="aa.bb.190.1" rtt="11.64"/>
<hop ttl="2" ipaddr="aa.bb.252.5" rtt="5.03"/>
<hop ttl="3" ipaddr="aa.bb.252.13" rtt="12.02"/>
<hop ttl="4" ipaddr="aa.bb.66.10" rtt="8.98"/>
</trace>
<times srtt="19534" rttvar="18794" to="100000"/>
</host>
<runstats><finished time="1358430750" timestr="Thu Jan 17 14:52:30 2013" elapsed="226.36" summary="Nmap done at Thu Jan 17 14:52:30 2013; 2560 IP addresses (295 hosts up) scanned in 226.36 seconds" exit="success"/><hosts up="295" down="2265" total="2560"/>
</runstats>
</nmaprun> 
```

我有一些疑问：

1.  我找不到可以帮助我解决此问题的 nmap 选项或脚本。你知道这些可以帮助我吗？
2.  如果我有 3 个地址，例如 aa.bb.252.5、aa.bb.252.13 和 aa.bb.252.138，如果它们以 .252.x 结尾，我可以说这些地址属于同一个网络吗？
3.  如果我有aa.bb.16.5、aa.bb.16.9、aa.bb.16.10、aa.bb.17.5、aa.bb.18.5、aa.bb.18.10、aa.bb.19.16这些地址可以属于同一个子网？
4.  如果 aa.bb. 等于 145.132。我可以说子网掩码是 255.255.0.0 吗？
5.  10)? 我可以理解 traceroute 跃点上的子网掩码或子网范围推理吗？

谢谢你们！

莱昂纳多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:53:28.507

您的所有地址都有一个网络地址。如果您使用子网掩码屏蔽地址，您将获得网络地址。

=> 相同的网络地址，相同的网络（子网）。

要做的步骤（也许是为了学习）：

*   写下地址（二进制）。
*   记下子网掩码（二进制并直接在地址下方）
*   做第三行并填写“0”，除非地址和子网掩码在该位置有“1”，然后写下“1”。

现在你有了网络地址。对 2 个地址执行此操作，如果结果具有相同的网络地址，则它们都在同一个子网中。

```
192.168\.  0.1   => 1100 0000 . 1010 1000 . 0000 0000 . 0000 0001
255.255.255.0   => 1111 1111 . 1111 1111 . 1111 1111 . 0000 0000
network address => 1100 0000 . 1010 1000 . 0000 0000 . 0000 0000 => 192.168.0.0

192.168\.  0.2   => 1100 0000 . 1010 1000 . 0000 0000 . 0000 0010
255.255.255.0   => 1111 1111 . 1111 1111 . 1111 1111 . 0000 0000
network address => 1100 0000 . 1010 1000 . 0000 0000 . 0000 0000 => 192.168.0.0 
```

所以 192.168.0.1 和 192.168.0.2 在同一个子网中（称为 192.168.0.0）。

依此类推 (2) 否。子网掩码可以将 252.x 拆分为 2 个子网（可能是 252.0-127 和 252.128 - 255）。(3) 是的。如果子网掩码仅在 aa.bb 级别拆分 (4) 否。原因与 (2) 相同，但向后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:44:50.137

1.  当主机通过网络进行通信时，它们使用它们的 IP 地址进行通信，并且很少通信它们的子网掩码。如果您可以访问实际的路由器/交换机，您将能够检索子网信息，但如果没有，除了通过 SSH 连接到每个主机并运行 ifconfig 之外，我目前无法想到其他方法。

2.  不可以。您不能根据 IP 地址假设子网掩码为 255.255.255.0。虽然这将是一个很好的猜测。

3.  是的，它们都可以属于同一个子网。例如 255.255.0.0 的子网掩码就可以了。但是，正如我在上面第 2 点中回答的那样，您不能假设这一点。

4.  不，请参见上面的 2 和 3。

5.  基本上，使用 trace route 提供的信息不可能 100% 确定地检索子网信息。但是，您可以很好地猜测它们会是什么，并且您可能是正确的。

# mysql - MySQL：将 1 个主表加入 1000 个子表

> ID：14600859
> 
> 赞同：0
> 
> 时间：2013-01-30T09:45:53.433
> 
> 标签：mysql

我有个问题。

我有一个网址主表。UrlId 是主键。从 10000 开始。在这张表中，我有我找到的所有 url 地址。然后我在不同的数据库中有 1000 个表（所以我不能使用外键）。它们彼此相同，例如 urldata.100 到 urldata.999。（在这里我存储元数据等）

例如，假设我想在连接中使用左函数来连接每个主记录

Id 10000 - 加入表 urldata.100 Id 11034 - 加入表 urldata.110

所以我想从主表中的每个 UrlId 中取出前 3 个数字，以进行大规模连接。

这可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:51:37.467

这是一个非常糟糕的设计，因为它限制了可伸缩性以及数据库的性能。

如果你真的想存储不同的元数据`UrlIds`，你只需要创建一个表。调用它`UrlMeta`，或类似的东西。

结构将是`(UrlID, MetaName, MetaValue)`. 这种结构可以`(MetaName, MetaValue)`成对存储尽可能多的元数据。

管理好之后，您的查询将变得非常简单，因为您只需要连接 2 个表，而不是 1001 个！

# c# - 与数据库一起发布应用程序，无需在客户端 c# 上使用 ms sql

> ID：14600864
> 
> 赞同：4
> 
> 时间：2013-01-30T09:46:14.153
> 
> 标签：c#, sql-server, deployment

我是这个论坛的新手，所以请注意我是否在问一个已经在某个地方回答过的问题。

我已经以 Windows 形式制作了一个应用程序，现在我想在另一台客户端 PC 上实现它。我发布了它，我可以将它安装在其他地方，但问题是当涉及数据库时，我无法让它工作。我已经尝试了我所知道的一切，我使用设置向导创建器将数据库附加到设置中，但我无法让它工作。

我的主要问题是：如果可能的话，如何在不在客户端 PC 上安装 MS SQL 的情况下成功发布应用程序及其数据库和一切处于工作状态的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:05:10.580

通常，在使用 SQL Server 时，您在客户端-服务器方案中运行，而 SQL Server 是服务器部分。存储在 app.config 中的连接字符串将指向 SQL Server，用户永远不需要了解有关数据库的更多信息。

如果您的应用程序设计为在网络之外运行（即第 3 方），您有几个选择。首先，如果要使用完整版的SQL Server，可以制作客户端安装程序和服务器安装程序。服务器安装程序用于设置服务器端（包括安装 SQL Server），在客户端设置期间，他们需要输入数据库服务器的名称。

如果客户端安装了 SQL Server Express，您可以提供数据库文件，并直接连接到它，而不是将其安装在 SQL 中。但是，如果客户端还没有安装 Express，这将不起作用。

最后，SQL Server Compact Edition 专为在客户端上运行而设计。您可以执行“bin deploy”——即，将 SQL CE .dll 文件与您的应用程序一起复制，而不是安装软件，并且客户端可以使用提供的数据库。如果您尚未编写 CE 应用程序，则需要进行一些返工。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T05:59:21.707

你也可以使用 sqlLite ，它只需要一些修改，正如 Dave Simione 所说

# wicket-1.6 - 带有固定标题的可滚动 Wicket 数据表

> ID：14600866
> 
> 赞同：0
> 
> 时间：2013-01-30T09:46:25.153
> 
> 标签：wicket-1.6

我想创建一个标题固定且正文可滚动的数据表。我尝试不使用标题工具栏并在 HTML 页面中手动创建标题。但是表格内容和标题没有正确对齐。如果存在冗长的列，则表格内容将向左移动，并且标题固定在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:29:10.750

如果没有太多信息，我会说这不是检票口问题，而是 CSS 问题。您应该考虑使用 CSS 来设置表格和标题的样式

# javascript - 如何加快 FusionTables 图层单击上的 infoBox.open()？

> ID：14600871
> 
> 赞同：2
> 
> 时间：2013-01-30T09:46:41.577
> 
> 标签：javascript, polygon, google-fusion-tables, infowindow, infobox

# 设置

我有[一张南非所有省份的多边形地图](https://www.google.com/fusiontables/DataSource?docid=16L-UK_1OZxGw6DlKR8V8yP4XZrtmNdOMugRRNrQ#map:id=3)。

然后将其拉入 v3 谷歌地图，`FusionTablesLayer`如下所示：

```
// The Google Map object
map =  new google.maps.Map( mapCanvas, mapOptions );

// The FusionTables layer
layer['provinces'] = new google.maps.FusionTablesLayer({
    query: {
        select: '*',
        from: '16L-UK_1OZxGw6DlKR8V8yP4XZrtmNdOMugRRNrQ'
    },
    clickable: true,
    suppressInfoWindows: true // Hide the default FusionTables InfoWindow
}); 
```

之后，我将一个`click`事件侦听器附加到`FusionTablesLayer`，并构建一个自定义 InfoBox 对象，如下所示：

```
google.maps.event.addListener(layer['provinces'], 'click', function(e){

    /*
        Here I build the infoBox HTML using e.row[]
        eg: html = '<div>' + e.row['Province'].value + '</div>';
    */

    // Attach the infoBox to the click
    infoBox.setContent(html);
    infoBox.setPosition(e.latLng);
    infoBox.open(map);

}); 
```

之后，我在地图上渲染图层：

```
// Render the layer on the map
layer['provinces'].setMap(map); 
```

所有这些都有效。没问题。

* * *

# 问题

click 事件返回 FusionTable 相应行中的所有列，并将其附加到上面的变量`e`中。

现在，FusionTable 中的每一行都有一个*很长的*KML 字符串——从 114kb 到 2.5MB——并且`e.infoWindowHtml`在`e.row['Polygon'].value`.

```
e: (Object)
    infoWindowHtml: "_Very_ long string in here."
    latLng: Q
    pixelOffset: T
    row: (Object)
        Number: (Object)
        Polygon: (Object)
        Province: (Object) 
```

由于谷歌这边的缓存很重，请求不需要很长时间，但是点击一个省份后，**信息框弹出大约需要5秒**。

* * *

## tl;博士

该`infoBox.open(map)`方法在单击 FusionTables 多边形后非常慢。我该如何加快速度？

## 更新

数据在第一次点击后被缓存。有没有办法在第一次点击*之前缓存数据？*

或者，有没有办法限制附加到的返回变量`e`，即：从点击请求中删除“多边形”数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:32:12.263

我偶然找到了答案。

*您可以通过在“更改信息窗口布局...”*窗口中选择适当的列来自定义返回的内容。

`Map tab` `Tools `>` Change info window layout...`

我取消选择“多边形”，并选择了“数字”和“省”。

然后将您选择的列附加到`e`eventListener 中`click`：

```
e: (Object)
    infoWindowHtml: "Better string"
    latLng: Q
    pixelOffset: T
    row: (Object)
        Number: (Object)
        Province: (Object) 
```

### 重要提示*（这是运气）*

选择正确的列后，您需要以某种有意义的方式更改 FusionTable*数据，*[以清除 Google 方面的强缓存](http://code.google.com/p/fusion-tables/issues/detail?id=396)。

返回选项卡中选择的列`Automatic`。似乎`Custom`选项卡被忽略了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:38:07.313

第二次打开弹出窗口很快，所以我认为它被缓存了。KML 相当大，那是您的瓶颈 - 您不能简化它们吗？对于一个体面的概述，您不需要那么多细节。那应该加快速度。（尝试用一个矩形替换一个省份，看看是否有帮助）

# excel - 从用户定义的函数获取返回值时出错

> ID：14600879
> 
> 赞同：1
> 
> 时间：2013-01-30T09:47:01.597
> 
> 标签：excel, excel-2007, vba

我的用户定义函数总是返回“公式中使用的值的数据类型错误”（我将单元格区域传递给函数）。我搜索了很多线程并且很确定我的代码应该可以工作：

```
Function SortAndEvaluate(ByRef Probs() As Variant, ByRef ResidualProbs() As Variant, ByRef Costs() As Variant)
    Dim Temp As Double
    Dim i As Integer
    Dim NoExcanges As Integer

    'Exchange values in probs in descending order

    Do
        NoExchanges = True
        ' Loop through each element
        For i = 0 To UBound(Probs) - 1

            'If element is greater than the last exchange, else do nothing

            If Probs(i) > Probs(i + 1) Then
                NoExchanges = False
                ' Exchange probability values
                Temp = Probs(i)
                Probs(i) = Probs(i + 1)
                Probs(i + 1) = Temp
                ' Exchange residual probability values
                Temp = ResidualProbs(i)
                ResidualProbs(i) = ResidualProbs(i + 1)
                ResidualProbs(i + 1) = Temp
                ' Exchange cost values
                Temp = Costs(i)
                Costs(i) = Costs(i + 1)
                Costs(i + 1) = Temp
            End If
        Next i
    Loop While Not (NoExchanges)

    Temp = 0
    For i = 1 To UBound(Probs)
        If i = 1 Then
            Temp = Temp + Probs(i) * Costs(i)
        Else
            Temp = Temp + Probs(i) * ResidualProbs(i - 1) * Costs(i)
        End If
    Next i

    SortAndEvaluate = Temp
End Function 
```

任何人都可以给我任何反馈吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:02:01.807

您没有使用 Option Explicit 并且您的代码中还有一个印刷错误`Dim NoExcanges As Integer`。

当你稍后`NoExchanges = True`隐式地写这个时`Dim`，一个带有引用的新类型的布尔值`NoExchanges`-`NoExcanges`永远不会使用。

您可能还想显式声明函数的返回类型：

`Function SortAndEvaluate(ByRef Probs() As Variant, ByRef ResidualProbs() As Variant, ByRef Costs() As Variant) As Double`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:14:13.840

原因是 Excel VBA 不允许用户定义的函数更改另一个单元格的值。唯一允许 UDF 做的事情（除了一些小例外）是将值返回到调用它的单元格。

`Probs(i) = Probs(i + 1)`函数内部根本不允许使用该行。

查看类似[问题](https://stackoverflow.com/questions/3844792/vba-how-to-change-the-value-of-another-cell-via-a-function)

您可以使用 Sub 执行此操作，但您必须通过单元格以另一种方式排序（可能使用`Selection`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:07:26.947

尝试类似的东西

```
Option Explicit

Function SortAndEvaluate(ByRef Probs As Range, ByRef ResidualProbs As Range, ByRef Costs As Range)

    Dim NumberOfProbs As Long
    Dim NumberOfProbsRows As Long
    Dim NumberOfProbsColumns As Long
    Dim RangeAddressProbs As String

    ' Dim for ResidualProbs and Costs
    ' ...

    NumberOfProbs = Probs.Cells.Count
    NumberOfProbsRows = Probs.Rows.Count
    NumberOfProbsColumns = Probs.Columns.Count
    RangeAddressProbs = Probs.Address

    ' also for ResidualProbs and Costs
    ' ...

    ' Might want some validation, e.g.
    If NumberOfProbsColumns <> 1 Then Exit Function
    If NumberOfResidualProbsColumns <> 1 Then Exit Function

    ' Get Values from range as an array
    Dim ValuesProbs As Variant
    Dim ValuesResidualProbs As Variant
    Dim ValuesCosts As Variant

    ValuesProbs = Probs
    ValuesResidualProbs = ResidualProbs
    ValuesCosts = Costs

    ' Do your logic stuff using the Values... arrays
    ' ...

    ' This example return value shows how to reference the Values... arrays (note you need to index the column too)
    SortAndEvaluate = ValuesProbs(NumberOfProbsRows, 1)

End Function 
```

# product - Prestashop：如何获取产品配件

> ID：14600882
> 
> 赞同：2
> 
> 时间：2013-01-30T09:47:07.733
> 
> 标签：product, prestashop

如何获得每种产品的配件？在一个循环中：

{foreach $products 作为 $product}

// 获取配件

{/foreach}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T09:53:52.053

问题是 HomeFeatured 模块不检索产品的附件，因此它们在模板中不可用。

您有以下选择：

*   编辑模块的 PHP 代码：简单但不升级证明
*   将模块复制到 myhomefeatured ：也很简单，但更少，升级证明

我更喜欢第二个，更多的未来证明，如果需要，您可以在之后添加越来越多的逻辑。

无论您选择什么，这里修改后的 hookDisplayHome 代码都有一个 Smarty 变量 $accessories 由产品的 id 索引：

```
public function hookDisplayHome($params) {
    $category = new Category(Context::getContext()->shop->getCategory(), (int)Context::getContext()->language->id);
    $nb = (int)(Configuration::get('HOME_FEATURED_NBR'));
    $products = $category->getProducts((int)Context::getContext()->language->id, 1, ($nb ? $nb : 10));

    // -- begin -->
    $accessories = array();
    foreach ($products as $product) {
        $p = new Product($product['id_product'], false, (int)Context::getContext()->language->id);
        $accessories[$product['id_product']] = $p->getAccessories((int)Context::getContext()->language->id);
    }
    // <-- end --

    $this->smarty->assign(array(
        'products' => $products,
        'add_prod_display' => Configuration::get('PS_ATTRIBUTE_CATEGORY_DISPLAY'),
        'homeSize' => Image::getSize(ImageType::getFormatedName('home')),
        'accessories' => $accessories // <-- added --
    ));
    return $this->display(__FILE__, 'homefeatured.tpl');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T21:59:44.270

获取属性组合的快速示例：

```
$product = new Product($id_product);                
$comb = $product->getAttributeCombinations($this->context->cookie->id_lang);

                    if (sizeof($comb)){
                        foreach($comb AS $combination){ 
                            //do some stuff here
                        }
                    } 
```

我认为这将有助于另一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-18T13:41:59.620

我不确定它在`.tpl`文件中的外观，但对于 PHP，它是：

```
$product->getAccessories(intval($cookie->id_lang)) 
```

参考您的示例，它可能如下所示：

```
{foreach $products as $product}
  {assign var='accessories' value=$product->getAccessories(intval($cookie->id_lang))}
    {$accessories|@var_dump}
    {foreach from=$accessories item=accessory}
       {$accessory|@var_dump}
    {/foreach}
{/foreach} 
```

# c++ - 这是获取任何函数成员地址的新方法吗？

> ID：14600884
> 
> 赞同：2
> 
> 时间：2013-01-30T09:47:13.983
> 
> 标签：c++, function, structure, member

**“会员功能”**是最顽固的东西。只是我无法将它们转换为`*void`值。我已经做了一些可以解决这个问题的方法；然而，唯一让我恼火的是：我必须为每组参数类型创建一个新定义。所以实现目标的最快方法：

```
struct FOO{

    void ONE_PARAM(int){}
    void TWO_PARAM(int, int){}
    void THREE_PARAM(int, int, int){}
    void FOUR_PARAM(int, int, int, int){}
}; 
```

首先，通过汇编调用结构函数成员：

```
__asm mov ecx, ADDRESS_OF_STRUCTURE
__asm push //parameters
__asm call ADDRESS_OF_MEMBER_FUNCTION 
```

**最长：模板...**

```
template <class F,void (F::*Function)(int)>   //Note : Only for FOO::ONE_PARAM
void * GetFunctionAddress() {

    union ADDRESS  
    { 
        void (F::*func)(int);  
        void * function_address;  
    }address_data;  

    address_data.func = Function;  
    return address_data.function_address; 
} 
```

**更短的方法：定义一个指向成员函数的函数指针**

```
void *function_address;
///////////////////////////////////////////////
void(FOO::*address_ONE_PARAM)(int) = FOO::ONE_PARAM;
void(FOO::*address_TWO_PARAM)(int, int) = FOO::TWO_PARAM;
void(FOO::*address_THREE_PARAM)(int, int, int) = FOO::THREE_PARAM;
void(FOO::*address_FOUR_PARAM)(int, int, int, int) = FOO::FOUR_PARAM;

__asm mov eax, address_ONE_PARAM //OK
__asm mov function_address, eax

__asm mov eax, address_TWO_PARAM //OK
__asm mov function_address, eax

__asm mov eax, address_THREE_PARAM //OK
__asm mov function_address, eax

__asm mov eax, address_FOUR_PARAM //OK
__asm mov function_address, eax 
```

但是还是太长了。

**最方便的方法**：直接使用标准函数：**sprintf**

我发现**__thiscall**函数也可以作为**“...”参数推送，我已经通过函数****printf**仔细检查了它。这很简单，您不需要再次定义它的整套参数类型来接受指针。和代码：

```
unsigned int address;
char buffer[12];
///////////////////////////////////////////////
sprintf(buffer, "0x%X", FOO::ONE_PARAM);
address = strtol(buffer,NULL,16);

sprintf(buffer, "0x%X", FOO::TWO_PARAM);
address = strtol(buffer,NULL,16);

sprintf(buffer, "0x%X", FOO::THREE_PARAM);
address = strtol(buffer,NULL,16);

sprintf(buffer, "0x%X", FOO::FOUR_PARAM);
address = strtol(buffer,NULL,16); 
```

如您所见，这种方法要短得多，而且非常方便。我不需要插入汇编代码，代码看起来更好，但另一方面，我担心速度。代码可以压缩更多吗？假设现在有两个命令，它只需要一个命令就可以工作，这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T09:55:46.513

除非您的编译器损坏，否则您不能直接将任何函数指针（not 的成员）转换为`void*`. 在非成员函数指针与非成员数据指针（Posix 要求）具有相同大小和格式的系统上，您可以做一些花哨的类型双关语：

```
void (*fp)();
void * p = *reinterpret_cast<void**>( &fp ); 
```

根据 C++ 标准，这是未定义的行为，但适用于大多数具有线性寻址的冯诺依曼机器。（它很可能在哈佛架构或具有非线性寻址的机器上做奇怪的事情。）

这仅在类型（原始和目标）具有完全相同的大小和格式时才有效。指向成员函数的指针需要额外的信息，这意味着它们几乎从不具有与普通函数指针相同的大小和格式，更不用说数据指针了。

我可能会补充一点，您描述的任何方法实际上都不起作用，因为您可以以任何方式使用结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:20:07.640

指向成员函数的指针可以转换为指向成员函数类型的另一个指针（根据 5.2.10p10）。因此，`void *`使用`void (*X::)()`一些占位符用户定义类型 X 代替 ：

```
struct X;
typedef void (*X::mem_fun_ptr_t)();

mem_fun_ptr_t mem_fun_ptr = reinterpret_cast<mem_fun_ptr_t>(&FOO::ONE_PARAM);
mem_fun_ptr_t mem_fun_ptr = reinterpret_cast<mem_fun_ptr_t>(&FOO::TWO_PARAM);
mem_fun_ptr_t mem_fun_ptr = reinterpret_cast<mem_fun_ptr_t>(&FOO::THREE_PARAM);
mem_fun_ptr_t mem_fun_ptr = reinterpret_cast<mem_fun_ptr_t>(&FOO::FOUR_PARAM); 
```

这是否有用取决于您打算如何使用强制转换指针；在不知道将其转换回的原始类型的情况下，您无法调用它。

# .net - WinRT、Javascript 和随机“拒绝访问”异常

> ID：14600887
> 
> 赞同：5
> 
> 时间：2013-01-30T09:47:24.097
> 
> 标签：.net, windows, windows-8, windows-runtime, winjs

## 一些背景

在过去的几天里，我一直在开发一些 Windows 8 HTML5/WinJS 应用程序。该应用程序使用 WinRT 组件完成了一些工作。

JavaScript 部分与整个 WinRT 组件协作启动异步操作：回调函数由 JavaScript 提供，WinRT 在有异步结果时调用它。

我忘了提到整个 Windows 8 应用程序不是使用*单页方法*开发的。

## 问题

如果在某个页面中调用了整个异步操作并且您没有导航到其他页面，那么一切都会按预期进行。

但是，*当您导航到其他页面时会发生什么？*当 WinRT 组件需要通知 JavaScript 部分异步操作的结果时：**ACCESS DENIED EXCEPTION**！你的应用程序崩溃了。

## 到目前为止我尝试过的

*   整个 WinRT 组件方法返回一个`IAsyncOperation<T>`: 在导航到其他页面之前，我`.cancel()`在 JavaScript => **NO LUCK中调用该方法**
*   我已将回调函数放入`WinJS.Application.sessionState`以确保垃圾收集器不会破坏整个函数=>**没有运气**

## 问题...

**我是否有机会通知 WinRT 组件取消它的异步操作并且不尝试将控件返回给 JavaScript 回调？**

*提前致谢*

*您可以检查其他人之前是否发现了相同的问题：*

*   [http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/5f9ebfe6-d652-442d-850d-41bda5e370c9](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/5f9ebfe6-d652-442d-850d-41bda5e370c9)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:01:44.587

经过一些试验错误后，我找到了解决方案。

回答我自己的问题：

> 我是否有机会通知 WinRT 组件取消它的异步操作并且不尝试将控件返回给 JavaScript 回调？

是的，但*不是直接*的。

又怎样？

1.  在 WinRT、C# 组件端，`CancellationTokenSource`在 C# WinRT 组件中设计一个属性，并在调用异步操作之前将其分配。
2.  创建一个实例`CancellationTokenSource`并将其设置为在调用异步操作之前在上一步中创建的属性。
3.  `ContinueWith`在将 .NET 任务转换为 WinRT 之前流畅地继续使用异步操作方法，`IAsyncOperation<T>`并将`CancellationToken`创建的作为先前实例化的一部分提供`CancellationTokenSource`给该`ContinueWith`方法（请参阅取消任务：http: [//msdn.microsoft.com/en-us/library /dd997396.aspx](http://msdn.microsoft.com/en-us/library/dd997396.aspx)）。
4.  在 WinRT 组件中实现一个`CancelCurrentAsyncOperation`方法，该方法将调用`CancellationTokenSource.Cancel()`.
5.  在导航到另一个页面之前调用 WinJS/JavaScript 中的先前`CancelCurrentAsyncOperation`方法。

### WinRT 组件示例代码：

```
public sealed class MyWinRTComponent 
{
   private CancellationTokenSource { get; set; }

   public void CancelLastAsyncOperation() 
   {
       if(CancellationTokenSource != null) 
       {
           CancellationTokenSource.Cancel();
       }
   }

   public IAsyncOperation<string> DoSomethingAsync() 
   {
        CancellationTokenSource = new CancellationTokenSource();

        return DoSomethingAsync()
                     .ContinueWith<string>(task => task.Result, CancellationTokenSource);
   }
} 
```

### JavaScript 示例代码：

```
var component = new MyWinRTComponent();
component.doSomethingAsync().then(function(text) {
   // Do stuff
});

// Before navigating to other page
component.cancelCurrentAsyncOperation(); 
```

这对我有用！

# javascript - 简单的jquery源码，混淆了“this”关键字

> ID：14600893
> 
> 赞同：0
> 
> 时间：2013-01-30T09:47:40.753
> 
> 标签：javascript, jquery, this

我对 jquery 1.7.3 source 中的“this”关键字感到非常困惑。下面显示的一些片段：

```
jQuery.fn = jQuery.prototype = {
constructor: jQuery,
init: function( selector, context, rootjQuery ) {
    var match, elem, ret, doc;

    // Handle $(""), $(null), or $(undefined)
    if ( !selector ) {
        return this;   
    }

    // Handle $(DOMElement)
    if ( selector.nodeType ) {
        this.context = this[0] = selector;
        this.length = 1;
        return this;
    } 
```

* * *

```
if ( !selector ) {

  return this;   //why not only one "return" here?
                 //And does "this" refer to jQuery object?
                 //OTOH, this question is about why it returns "this".
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:59:25.067

返回这允许可链接的插件调用，

```
$(whatever).plugin1().plugin2() etc 
```

如果你不在`return this`插件中，你将无法链接它&链接速度很快，&链接很酷你想在你的 jquery 代码中尽可能多地链接

回答您的评论：不（**在插件定义中**）：

```
if ($("#div1").get(0)) {
   //do whatever to $("#div1")
   }
return this; 
```

`return this`出现**在插件定义的末尾，**无需在任何情况下返回它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:01:59.453

是的，**这**是 jquery 对象并返回**this**使您的函数可链接。

```
// chaining
$("#person").slideDown('slow')
   .addClass('grouped')
   .css('margin-left', '11px');

// no chaining
$('#person').slideDown('slow');
$('#person').addClass('grouped');
$('#person').css('margin-left', '11px'); 
```

你看，链接方法可以帮助我们更快、更漂亮地编写代码。

如果您想进一步研究：[http ://en.wikipedia.org/wiki/Method_chaining](http://en.wikipedia.org/wiki/Method_chaining)

# jakarta-ee - 与 Maven 的 changeLogSync

> ID：14600901
> 
> 赞同：2
> 
> 时间：2013-01-30T09:47:54.870
> 
> 标签：jakarta-ee, maven, liquibase

我有一个带有现有 db-schema 的 java ee 项目。现在我想为数据库使用 liquibase。

所以我在命令行从我现有的模式生成了一个变更日志。对现有数据库运行该更改日志`mvn liquibase:changeLogSync`，现在我可以毫无问题地使用 liquibase。

我的问题是：我可以`changeLogSync`在项目中使用该命令而不执行它吗？Fe 喜欢我使用带有变更集的新文件：

```
<include file="changelogs/db.changelog1.xml"/> 
```

有没有类似的方法`changeLogSync`，比如 Ant 中的这个：

```
<changeLogSync
        changeLogFile="${db.changelog.file}"
        driver="${database.driver}"
        url="${database.url}"
        username="${database.username}"
        password="${database.password}"
        classpathref="classpath"
        >
</changeLogSync> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:52:19.570

当然。这是我们的：

```
<plugin>
  <groupId>org.liquibase</groupId>
  <artifactId>liquibase-maven-plugin</artifactId>
  <version>2.0.5</version>
  <dependencies>
     <dependency>
        <groupId>com.oracle</groupId>
        <artifactId>ojdbc6</artifactId>
        <version>${ojdbc.version}</version>
     </dependency>
  </dependencies>
  <configuration>
     <changeLogFile>${db.changelog.file}</changeLogFile>
     <driver>${database.driver}</driver>
     <url>${database.url}</url>
     <username>${database.username}</username>
     <password>${database.password}</password>
  </configuration>
  <executions>
     <execution>
        <phase>process-resources</phase>
        <goals>
           <goal>changeLogSync</goal>
        </goals>
     </execution>
  </executions>
</plugin> 
```

当然可以根据您自己的 DB 风格和构建阶段偏好进行调整。

# events - 当 epoll_ctl(del) 一个 fd 时释放 event.data.ptr

> ID：14600906
> 
> 赞同：1
> 
> 时间：2013-01-30T09:48:09.473
> 
> 标签：events, epoll

我使用 event.data.ptr 指向一个对象。当我 epoll_ctl(del) 事件时，我必须删除对象（由 event.data.ptr 指向）。我怎样才能得到指针？epll_ctl(del) 只是忽略参数“事件”：

int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event);

我是否必须维护这些对象的向量？我觉得它有点脏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:15:08.207

事实上。epoll接口中没有办法查询数据字段。常见的解决方法是将该数据保存在您自己的用户空间列表中。

我认为是时候编写一个 epoll 系统调用来查询该字段以避免与文件描述符关联的重复数据。

# redis - 为什么 Redis 的 SET 性能优于 GET？

> ID：14600908
> 
> 赞同：14
> 
> 时间：2013-01-30T09:48:11.977
> 
> 标签：redis, benchmarking, in-memory-database

根据 Redis[基准](http://redis.io/topics/benchmarks)s ，Redis 每秒可以执行 100'000 次 SET 操作，以及 80'000 次 GET 操作/s。Redis 是一个内存数据库，这似乎令人惊讶，因为通常人们会期望内存写入比读取慢一些，例如考虑到 SET 需要在能够写入值之前分配内存。

有人可以解释为什么 SET 比 GET 快吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T17:16:11.887

实际上，这只是默认情况下测量的 I/O 比实际命令执行时间多的效果。如果您开始在基准测试中启用流水线，它会更多地衡量实际命令性能，并且数字会发生变化：

```
$ redis-benchmark -q -n 1000000 -P 32 set foo bar
set foo bar: 338964.03
$ redis-benchmark -q -n 1000000 -P 32 get foo
get foo: 432713.09 requests per second 
```

现在 GET 更快:-)

我们应该在基准文档页面中包含流水线。

**编辑：**这在这里更加明显：

```
redis 127.0.0.1:6379> info commandstats
# Commandstats
cmdstat_get:calls=1001568,usec=221845,usec_per_call=0.22
cmdstat_set:calls=831104,usec=498235,usec_per_call=0.60 
```

此命令提供 CPU 时间以在内部处理请求，而不考虑 I/O。SET 的处理速度要慢三倍。

# powershell - PowerShell - 删除-DnsServerSigningKey -KeyId $key.KeyId -ZoneName $zonename -Force

> ID：14600912
> 
> 赞同：0
> 
> 时间：2013-01-30T09:48:16.110
> 
> 标签：powershell, dns, key

以下内容根本不起作用：

```
Remove-DnsServerSigningKey -KeyId $key.KeyId -ZoneName $zonename -Force 
```

其中 $zonename 是有效区域，并且 key-id 存在且有效。如果我首先取消签名区域，则此命令有效，但我想在辞职后执行此操作。

逻辑：

*   获取所有当前区域签名密钥
*   添加一个新的 ZSK
*   使用新的 ZSK 退出区域
*   休眠 3 秒（仅用于宽限期）
*   循环遍历所有以前的键*（此时，新键不在列表中）*
    *   删除前一个键

当尝试删除以前的键时，我得到：

```
Remove-DnsServerSigningKey : Failed to delete the signing key __[Key-ID]__ for the zone __[Key-ID]__ on server __[Server-addr]__ Please check 
extended error for additional details.
At C:\Users\Administrator\Desktop\dnssec.ps1:79 char:13
+             Remove-DnsServerSigningKey -KeyId $key.KeyId -ZoneName $zonename -Fo ...
+             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (__[Key-Id]__:root/Microsoft/...erverSigningKey) [Remove-DnsServerSigningKey], CimException
    + FullyQualifiedErrorId : WIN32 9119,Remove-DnsServerSigningKey 
```

代码如下所示：

```
function resign {
    param(
        [string]$zonename
    )
    $zonename + " <- Re-Signing"

    ## Grab all current keys (incl active ones)
    $keys = Get-DnsServerSigningKey -ZoneName $zonename

    $zonename + " <- Creating new ZSK"
    #Add a new ZSK 
    Add-DnsServerSigningKey -ZoneName $zonename -ComputerName 127.0.0.1 -CryptoAlgorithm RsaSha256 -Type ZoneSigningKey

    #Resign the zone with the newly added key 
    Invoke-DnsServerZonesign -ZoneName $zonename –DoResign -Force

    Start-Sleep -s 1

    # After the resign, we delete all previous ZONE signing keys (but keep KSK)
    $zonename + " <- Removing ZSKeys"
    foreach ($key in $keys) {
        if ($key.KeyType -eq "ZoneSigningKey") {
            Remove-DnsServerSigningKey -ComputerName 127.0.0.1 -ZoneName $zonename -KeyId $key.KeyId -Force
        }
    }
} 
```

Notabel 可能是，如果我完全取消对该区域的签名并运行相同的删除键代码，它就可以工作。只是在退出一个区域时它不起作用。我要删除的密钥是 ZoneSigningKey 类型，而不是 KeySigningKey（已验证）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:29:58.917

简而言之，通过删除签名区域、删除旧 ZSK 并保留旧 KSK、生成新 ZSK 并再次签署区域来解决此问题。

基本上我叫 unsign 并在 resign 中再次签名..它很丑陋，不是它的预期工作方式..但它有效..

# ios - 在 iOS 上将具有序号格式的字符串转换为日期

> ID：14600914
> 
> 赞同：-2
> 
> 时间：2013-01-30T09:48:19.907
> 
> 标签：ios, objective-c, nsdate

> **可能重复：**
> [将字符串转换为 NSDate](https://stackoverflow.com/questions/2311421/convert-string-to-nsdate)

* * *

我在字符串中有日期，并想在 NSDate 中进行转换。在字符串日期是：

> “2012 年 6 月 21 日”

如何在 NSDate 中转换它？

当您给出答案时，请专注于“21st”而不是“21”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:50:53.763

您可以使用[NSDateFormatter](https://developer.apple.com/documentation/foundation/nsdateformatter)将 NSString 更改为 NSDate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-09T05:14:41.483

[Stack Overflow 上](https://stackoverflow.com/questions/2311421/convert-string-to-nsdate)有此类问题的通用答案，即[在 Objective-C](https://developer.apple.com/documentation/foundation/nsdateformatter?language=objc)中使用NSDateFormatter /[在 Swift 中使用 DateFormatter](https://developer.apple.com/documentation/foundation/dateformatter)。根据[使用格式字符串指定自定义格式](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW1)，格式遵循[tr35-19](http://www.unicode.org/reports/tr35/tr35-19.html#Date_Format_Patterns)或更高版本。

但是为了处理您对日期格式的变化，这里是您特定要求的 Swift 答案：

```
// Your example
let dateString = "21st June 2012"

// Sanitizing input for 2nd, 3rd, 4th
let normalizedDateString = dateString.replacingOccurrences(of: "nd", with: "st").replacingOccurrences(of: "rd", with: "st").replacingOccurrences(of: "th", with: "st")

// Converting string to date object
let formatter = DateFormatter()
formatter.locale = Locale(identifier: "en_US")
formatter.dateFormat = "d'st' MMMM yyyy"
let date = formatter.date(from: normalizedDateString) 
```

Objective-C 中的逻辑相同。

# azure - 面向客户的 Azure 定价

> ID：14600915
> 
> 赞同：2
> 
> 时间：2013-01-30T09:48:25.777
> 
> 标签：azure

想要将 Windows Azure 用于几个项目，但由于我还没有使用它，所以我想知道如何计算出我需要向最终客户端收取的费用，因为成本会根据使用/存储等而波动。

我会很感激其他人在向最终客户推荐 Azure 时如何首先引用成本以及他们如何按月收费的任何评论，即每月设定的数字可能会发生变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:24:42.400

如果您正在构建软件即服务应用程序或一些类似的多租户应用程序，您应该只在您的客户和 Azure 费用之间进行权衡。在这些情况下，您收取的费用应该仅与 Azure 费用大致相关，并且可能难以弄清楚。例如，您可以测量每个租户的传出字节数，但很困难。

如果您在 Azure 上为一位客户构建应用程序，则没有理由成为收费中介。让客户坐下来，引导他们使用自己的信用卡设置 Azure 帐户。一旦他们创建了帐户，他们就可以让您成为管理员。让 Microsoft 直接向客户开具发票，不要参与其中。这有几个原因：

*   客户知识和成本控制是云的优势之一。拥有一个受过良好教育的客户，了解并控制他们的成本是一个很好的客户 - 并且消除了许多复杂的解释。
*   Azure 定价是公开的。如果您增加保证金，客户可能会感到被敲竹杠。
*   您不知道应用程序的未来负载，也不能冒险设置固定价格。如果您有足够的现金来承担风险，那么您为承担该风险而收取的价格将使其过于昂贵。

首先，使用[Azure 定价计算器](http://www.windowsazure.com/en-us/pricing/calculator/)很好。定价计算器在做更复杂的事情时会崩溃，但对于初始报价来说已经足够了。作为开发人员，您应该了解角色、数据库等的数量，以供初始定价计算使用。

许多事情和许多架构决策都会影响成本，因此必须不断维护和更新成本模型。最大的因素之一是负载，至少在开始时，您可能不知道它是什么。查看[CALM](https://github.com/projectcalm/Azure-EN)并参考生命周期和成本模型以获得更多洞察力。

如果您觉得必须从应用程序中获得持续收入，请使用统一费率或您自己的模式（例如每个角色每月 20 美元）签订支持协议。

总之，使用定价计算器计算大致数字，但让 Microsoft 直接向客户计费。

# javascript - Javascript .replace 搜索字符串中的新行（不是定位？）

> ID：14600919
> 
> 赞同：0
> 
> 时间：2013-01-30T09:48:39.537
> 
> 标签：javascript, jquery, html

我已经写了这个快速但代码：

```
var navTitle = $('#nav ul').html();
    var replacer = navTitle.replace('<li class="page_item page-item-73">
    <a href="xxx/">x training programme</a><ul class=\'children\'>', 
    '<li class="page_item page-item-73"><a href="xxx/">x training programme</a
    <ul id="longDropdown" class=\'children\'>');
    console.log(replacer);
    //$('#nav ul').html(replacer); 
```

在 HTML 中，它看起来像这样：

```
<li class="page_item page-item-73"><a href="xxx/">x training programme</a>
<ul class='children'> 
```

我尝试在搜索字符串之后放置一个 \n 但是字符串没有改变，我认为它找不到 src 字符串。

这里的问题是新行吗？我相信所以不能针对它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:54:09.383

jQuery 提供`.replaceWith()`和`.replaceAll`方法。

```
$('#nav ul .page_item.page-item-73 a').replaceWith('<a href="xxx/"x training programme</a>'); 
```

甚至可能更改文本内容或内部 HTML 对您有用

```
$('#nav ul .page_item.page-item-73 a').text('x training programme'); 
```

分别

```
$('#nav ul .page_item.page-item-73 a').html('x training programme'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:54:01.463

为什么不直接选择 ul 然后使用 .attr 添加 ID？

```
var navTitle = $('#nav ul ul.children').attr('id', 'longdropdown'); 
```

操作 DOM 往往比进行字符串替换更整洁、更安全。

# typo3 - TYPO3 多列图像缩小

> ID：14600922
> 
> 赞同：0
> 
> 时间：2013-01-30T09:48:47.630
> 
> 标签：typo3, typoscript, multiple-columns

我遇到了多列图像收缩功能的问题。

有一个三列布局，其中图像收缩功能（第一列）完美运行。但在我的两列布局中，收缩功能似乎起作用，但图像宽度始终为 450px，但如果必须为 280px。有任何想法吗？

TSConfig 根页面：

```
tx_multicolumn.layoutPreset >
tx_multicolumn.layoutPreset {

# Define a unique key for the layout
twoColumnLayout {

# Backend label (path to a locallang file)
label = 2 Spalten

# Icon (file resource or a path to fileadmin)
icon = fileadmin/layout/images/multi2spalten.png

config {

  #Width of multicolumn container (px or %)
  containerMeasure = px

  containerWidth = 900

  # Number of columns(integer)
  columns = 2

  # Column measure (px or %)
  columnMeasure = px

  # Column width (integer, optionSplit)
  columnWidth = 580 |*| 280

  # Column margin (string, optionSplit)
  columnMargin = 0 20px 0 0 |*| 0 0 0 0

  # Disable auto image shrink for columns (boolean, 0)
  disableImageShrink = 0

  }
}

# Define a unique key for the layout
threeColumnLayout {

# Backend label (path to a locallang file)
label = 3 Spalten

# Icon (file resource or a path to fileadmin)
icon = fileadmin/layout/images/multi3spalten.png

config {

  #Width of multicolumn container (px or %)
  containerMeasure = px

  containerWidth = 900

  # Number of columns(integer)
  columns = 3

  # Column measure (px or %)
  columnMeasure = px

  # Column width (integer, optionSplit)
  columnWidth = 300 |*| 260 |*| 260

  # Column margin (string, optionSplit)
  columnMargin = 0 20px 0 0 |*| 0 20px 0 0 |*| 0 0 0 0

  # Disable auto image shrink for columns (boolean, 0)
  disableImageShrink = 0

  }
}
} 
```

主要模板常量：

```
styles.content.imgtext.colPos0.maxW = 280
styles.content.imgtext.colPos1.maxW = 280
styles.content.imgtext.colPos2.maxW = 280
styles.content.imgtext.colPos3.maxW = 280 
```

主要模板设置：

```
tt_content.image.20.maxW.cObject = CASE
tt_content.image.20.maxW.cObject {
key.field = colPos
## Normal
0 = TEXT
0.value = 280
## Left
1 = TEXT
1.value = 280
## Right
2 = TEXT
2.value = 280
## Border
3 = TEXT
3.value = 280
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:25:43.753

我自己找到了解决方案，但无论如何谢谢。

这是解决方案：

**我将 containerMeasure 设置为 % 而不是 px 并将 containerWidth 设置为 100。**

就是这样，现在收缩效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:32:22.167

请添加以下排版设置：

```
tt_content.image.20.maxW = 280px 
```

# javascript - 如何使用 jquery multifile 选择多个文件

> ID：14600928
> 
> 赞同：2
> 
> 时间：2013-01-30T09:49:06.243
> 
> 标签：javascript, html, jquery

我正在使用 jquery 多文件上传控件[http://www.fyneworks.com/jquery/multiple-file-upload/](http://www.fyneworks.com/jquery/multiple-file-upload/)。我可以一张一张地选择多张图像。但我也想在用户点击浏览按钮时一次选择多个图像。有没有使用 jquery 多文件控制的解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-03T09:03:18.597

我们的插件现在支持 HTML5，所以...

1.  用户可以在 xHTML 和 <= HTML4 中一次选择多个文件
2.  用户可以使用“multiple”属性在 HTML5 中一次选择多个文件

在此处查看新版本的插件： [http ://www.fyneworks.com/jquery/multifile](http://www.fyneworks.com/jquery/multifile)

如果您想帮助我们改进插件，请在此处分叉我们：http: [//github.com/fyneworks/multifile](http://github.com/fyneworks/multifile)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T11:01:18.240

恐怕没有（fyneworks网站说你不能一次选择多个文件），你可以使用HTML5多标签或试试这个[插件](http://blueimp.github.com/jQuery-File-Upload/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T05:21:25.420

HTML5 允许用户选择多个文件，因此无需 jQuery 插件。

# php - 使用 PHP 在 CSS 中搜索内容

> ID：14600930
> 
> 赞同：0
> 
> 时间：2013-01-30T09:49:13.583
> 
> 标签：php, css, regex

我有一个变量：

```
.fontSize10{
font-size:xx-small;
}
.fontSize11{
font-size:x-small;
}
.fontSize12{
font-size:small;
}
.fontSize13{
font-size:medium;
}
.fontSize14{
font-size:large;
}
.fontSize16{
font-size:x-large;
}
.fontSize18{
font-size:xx-large;
} 
```

在这个变量中，我可以有很多其他的 css 指令。

对于以 开头的每条指令，我需要检索`.fontSize`他的姓名（例如 .fontSize14）和他的尺寸（大）。

我需要将名称和大小放在一起（在数组中，例如 $tab[0][0] = "fontSize14" 和 $tab[0][1] = "large"）

你有想法吗 ？也许用正则表达式？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:55:10.207

如果它严格保持这种格式，你可以用这样的正则表达式来做到这一点：

```
=\.(fontSize\d+)\s*\{\s*font-size:([^;]+);\s*\}=is 
```

但是，我建议您编写一个适当的解析器，以便您可以处理错误或不同的格式。这意味着您逐行遍历字符串并将当前定义块的名称存储在变量中。如果遇到 a `font-size:`，您可以使用当前块的名称将找到的值添加到数组中。当您遇到右括号时，您只需将变量设置回 null。它将比正则表达式更健壮，因为它也适用于具有更多属性的 CSS 定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:54:28.817

尝试将你的 CSS 构建为一个数组，然后搜索它，当你完成搜索后，对数组进行内爆（使用 'implode()'）。

数组结构示例：

```
$css = array('.fontSize10' => 'xx-small', '.fontSize11' => 'x-small'); 
```

如果您真的想继续使用 $css 作为字符串，那么正则表达式就是要走的路。

看看以下内容：

*   preg_match(), preg_match_all(), preg_replace()
*   用于测试正则表达式： http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:03:30.680

也许你做了一个包含一些爆炸的循环：

```
$result = array();
$parts1 = explode('}', $css);
foreach($parts1 as $part){
    if(strpos($part, '.fontSize') === 0){
        $subparts = explode('{', $part);
        $name = $subparts[0];
        //continue here to parse out the correct css value, maybe split again at ; and again at :
        //you then can pick out the parts you need and store it in $value or whatever.
        $result[] = array('name' => $name, 'value' => $value);
    }
} 
```

# javascript - 我应该为 ajax 使用什么类型的服务器

> ID：14600932
> 
> 赞同：-1
> 
> 时间：2013-01-30T09:49:17.187
> 
> 标签：javascript, ajax, json

嗨，我正在学习 lynda 课程 JavaScript 和 AJAX。我正在使用 json 更新 dom 和 jquery 来处理 ajax 我的问题是我不知道如何安装正确的服务器以测试我的请求并查看它是否有效，例如我在女巫中得到了一个简单的文件我得到了这些元素

**索引.html**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>JavaScript AJAX</title>
</head>
<body>
<script src="script.js"></script>
</body>
</html> 
```

**脚本.js**

```
var request = new XMLHttpRequest();
request.open('GET', 'data.txt', false);
request.send();
console.log(request); 
```

**data.txt** 你好世界

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:50:51.587

> 我应该为 ajax 使用什么类型的服务器

HTTP 服务器（又名 Web 服务器）。几乎任何 HTTP 服务器。Netcraft 有[一些图表显示最流行的服务器](http://news.netcraft.com/archives/2012/05/02/may-2012-web-server-survey.html)。

> 我不知道如何安装正确的服务器

大多数都附带安装说明。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-30T09:56:10.103

可能您应该做的是使用单元测试框架和模拟库。您不会检查服务器是否正常工作（服务器开发人员已经完成了）；你想要的是看看你自己的代码是否有效。

这是测试自己努力的安全方式。

# mysql - 将这 2 个查询更改为单个查询？

> ID：14600945
> 
> 赞同：0
> 
> 时间：2013-01-30T09:49:57.727
> 
> 标签：mysql

我想要单个查询中的数据和总数：

```
SELECT id, order_name, order_ownurl, order_category, order_id
FROM `order_details`
WHERE ordered_name='nikon d3200'
ORDER BY ordered_price asc 
```

和

```
SELECT count(distinct order_id)
FROM `order_details`
WHERE ordered_name='nikon d3200' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:54:19.913

为此，您可以`COUNT`像这样使用相关子查询：

```
SELECT 
  o1.id, 
  o1.order_name, 
  o1.order_ownurl, 
  o1.order_category, 
  o1.order_id,
  (SELECT count(distinct o2.order_id)
   FROM `order_details` o2
   WHERE o2.ordered_name = o1.ordered_name) AS OrderCount
FROM `order_details` o1
WHERE o1.ordered_name = 'nikon d3200'
ORDER BY o1.ordered_price asc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T13:59:52.097

这是一种更好的方法，**为什么我们需要子查询**？

这是解决方案，如果我遗漏了什么，请告诉我！！

```
SELECT id, order_name, order_ownurl, order_category, order_id,count(distinct order_id)
FROM `order_details`
WHERE ordered_name='nikon d3200'
ORDER BY ordered_price asc 
```

说明：当我们从单个表中选择数据时，我们不需要子查询。子查询看起来很糟糕，如果没有其他方法，我们应该使用。

如果您遇到问题，请告诉我。

干杯！！！！

# cakephp - CakePHP - 如何修改 FormHelper 并在输入后添加 div？

> ID：14600946
> 
> 赞同：0
> 
> 时间：2013-01-30T09:49:57.430
> 
> 标签：cakephp

我正在尝试修改 FormHelper 的行为以满足我的应用程序要求。我想使用本机 FormHelper，但对于所有输入，我需要添加一些短消息，为用户提供帮助并描述特定字段。

我的想法是创建自己的助手并将帮助消息作为参数传递。此函数将修改表单的 inputDefaults 设置并调用本机 FormHelper 输入函数。

例如：

```
class MsgFormHelper extends AppHelper {
      public function input($name, $message, $options) {
        $this->_View->Form->_inputDefaults['after'] .= '<div>'.$message.'</div>';
        return $this->_View->Form->input($name, $options);
    }
} 
```

但是这个解决方案注意到这个错误：

> 注意（8）：间接修改重载属性FormHelper::$_inputDefaults没有效果...

有什么方法可以修改表单的 inputDefaults 设置中的“之后”值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:05:19.107

我可能找到了一个解决方案（它有效，但我不确定它是否违反了一些 CakePHP 的原则）。感谢您的意见。

```
class MsgFormHelper extends AppHelper {

    public function __construct(View $view, $settings = array()) {
        parent::__construct($view, $settings);
    }

    public function input($name, $message, $options) {

        $add_message = true;

        if (isset($options['after'])) {
            $options['after'] = trim($options['after']);
            $add_message = empty($options['after']);
        }

        if ($add_message) {
            $options['after'] = '<div class="input-help">' . $message . '</div>' . $this->_View->Form->_inputDefaults['after'];
        }

        return $this->_View->Form->input($name, $options);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:15:06.857

您应该扩展`FormHelper`本身 not `AppHelper`。然后在您的控制器中使用别名功能，以便您仍然`$this->Form->input()`在您的视图中使用，但它实际上会引用您的自定义助手。

`public $helpers = array('Form' => array('className' => 'MsgForm'))`

# matplotlib - matplotlib - 绘图输出文本为路径，不能被 Inkscape 转换为 LaTeX

> ID：14600948
> 
> 赞同：20
> 
> 时间：2013-01-30T09:50:15.803
> 
> 标签：matplotlib, latex, vector-graphics, inkscape

我有一个`matplotlib`图，我想以矢量图形格式保存，然后在 LaTeX 文档中使用。

我通常从 保存它`matplotlib`，用 Inkscape 打开它并将其保存为 PDF+LaTeX（省略 PDF 中的文本并创建 LaTeX 文件）。这也可以通过以下方式实现：

```
inkscape  -D -z --file=in.pdf --export-pdf=out.pdf --export-latex 
```

但是，对于下面的情节，文本实际上是一系列路径。每个字母都是独立的，导致 Inkscape 无法保存不同的`tex`文件。

为什么文本没有呈现为文本，而是呈现为下面代码中的路径？请注意，使用`usetex=True`并没有什么不同。

谢谢。

```
from scipy.stats import lognorm
from matplotlib import rc

#rc('text', usetex=True)
rc('font', family='Times New Roman')
rc('font', size='20.0')

mu    = 1.7
sigma = 1.1
n, bins, patches = plt.hist(data, bins=10000, facecolor='k', edgecolor='k', 
                            normed=True, alpha=0.3, histtype='stepfilled',
                            label='\\noindent Empirical data')
y = lognorm.pdf( bins, sigma, scale=np.exp(mu))
plt.xlim( (0,50) )
plt.plot(bins, y, '-', color='k', linewidth=2, label='\\noindent Lognormal curve')
plt.ylim( (0, .15) )
plt.xlabel('my x label')
plt.ylabel('my y label')

plt.grid()
plt.legend()
plt.savefig(os.path.expanduser('~/myfile.svg')) 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-21T09:43:04.567

我遇到了同样的问题并修复了它。

[http://matplotlib.org/users/customizing.html](http://matplotlib.org/users/customizing.html)中的 matplotlib 文档声明该参数的默认值为`svg.fonttype`，`'path'`这意味着在导出为 svg 格式时字符将被转换为路径。

我需要做的就是在我的脚本中添加以下行：

```
matplotlib.rcParams['svg.fonttype'] = 'none' 
```

这样所有字符都正确嵌入，我现在可以在 Inkscape 中编辑文本并将我的图形导出为 pdf+Latex，即一个 pdf 文件和一个包含在我的文件中的 pdf_tex`tex`文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-15T16:22:33.360

Another, more permanent option, is to put

```
svg.fonttype : none 
```

in your matplotlibrc (~/.config/matplotlib/matplotlibrc, for example)

# android - Android 微调器和滚动视图

> ID：14600957
> 
> 赞同：-1
> 
> 时间：2013-01-30T09:50:36.753
> 
> 标签：android

我有一个其中有`Activity`几个`spinners`及以上。最后两个取决于彼此的值。我用过一个. 现在，当我选择一个时，它会更改另一个的值。但我的上升。如何停止滚动？`spinners``Textviews``Spinners``ScrollView``Spinner``ScrollView``ScrollView`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:57:54.553

在您的 android 清单文件中，您必须将此标签与您的活动一起添加。

标签- android: configChanges **="keyboardHidden|orientation"**

这将解决您的问题。

# c - 如何使用“##”定义多个相似的宏？

> ID：14600962
> 
> 赞同：3
> 
> 时间：2013-01-30T09:50:43.117
> 
> 标签：c, macros

我不知道是否已经有人问过同样的问题，但我无法使用 [c] [macro] "##" 在这里的高级搜索中找到它。

我想定义多个宏如下：

```
#define CHANNEL_0  0
#define CHANNEL_1  1
...
#define CHANNEL_31 31 
```

我可以用这个符号## 以一种简单的方式来做吗？如何？或者也许有一些方法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:02:58.040

我不认为“##”是这里最好的解决方案。为什么不只使用*enum*？如果只需要 0 到 31 之间的数字，我认为没有理由不能使用它。

```
enum eChannel {
    Channel0, /* evaluates to 0 */
    Channel1, /* evaluates to 1 */
    ...
    Channel31 /* evaluates to 31 */
}; 
```

用法和*#defines一样*

```
if(channel == Channel1) do_smth(); 
```

# d3.js - d3：强制有向图：节点过滤

> ID：14600967
> 
> 赞同：9
> 
> 时间：2013-01-30T09:50:49.557
> 
> 标签：d3.js, force-layout

我正在浏览以下帖子：

[突出显示选定的节点](https://stackoverflow.com/questions/8739072/highlight-selected-node-its-links-and-its-children-in-a-d3-js-force-directed-g)

![在此处输入图像描述](../Images/40d1546f621bd601bb62b78a96e1ffdb.png)

真的是一个很好的解决方案......我是 d3 的新手，并且对它的灵活性着迷。我在某一时刻面临问题。我不想在鼠标悬停时过滤节点，而是想根据在 html 文本框中输入的文本（节点名称或 ID）对其进行过滤。知道如何实现这一目标吗？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-03T18:04:23.020

实际上，我必须为工作中的项目做这样的事情。我想出的解决方案是给每个节点一个布尔属性，我称之为 isInFilter。

用户输入文本后，对其进行处理，然后循环遍历所有节点并为每个节点分配 TRUE 或 FALSE 的 isInFilter。然后，您的节点显示条件（或执行您想做的任何转换）简单地成为对 isInFilter 属性的检查。

# sql - Sql Server 触发器。触发器如何检查更新命令？

> ID：14600968
> 
> 赞同：-1
> 
> 时间：2013-01-30T09:50:51.340
> 
> 标签：sql, sql-server-2008

我有一个审计采购和销售表的触发器。触发器在 INSERT 和 DELETE 上。要检查它是否“插入”，条件是

```
IF (SELECT COUNT(*) FROM INSERTED) > 0

BEGIN

END 
```

如何检查它是否是触发器内的更新命令？

阿伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:52:22.990

INSERT,DELETE 触发器不会触发更新。

…………………………………………………………………………………………………………

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:58:47.703

在一个表中创建一个`INSERT`, `UPDATE`,`DELETE`

```
IF @@ROWCOUNT = 0

BEGIN
   RETURN;
END;

IF EXISTS(SELECT * FROM inserted)
    BEGIN
      IF EXISTS(SELECT * FROM deleted)
          BEGIN
             -- for UPDATE
          END
      ELSE
          BEGIN
             -- for INSERT
          END
    END
ELSE
    BEGIN
      -- for DELETE
    END; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:00:20.340

在更新触发器中运行的“表”仍称为`inserted`and `deleted`，行的旧值在`deleted`表中，新值在`inserted`表中。

您可以使用以下逻辑来检测您是否处于插入、更新或删除状态：

```
CREATE TRIGGER MyTrigger
   ON  MyTable
   AFTER INSERT,DELETE,UPDATE -- you need to add the "update" here, 
                              -- in order to catch updates as well
AS 
BEGIN
    Declare @insertedCount int
    Declare @deletedCount int
    select @insertedCount = COUNT(*) from inserted
    select @deletedCount = COUNT(*) from deleted
    if (@insertedCount != 0) -- we have some new values
      if (@deletedCount = 0)  -- do we have old values?
        print 'Inserting'
      else 
        print 'Updating'
    else
      print 'Deleting'

END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:00:13.957

一旦你更新了你的触发器（如 Mitch[所说](https://stackoverflow.com/a/14600996/15498)）也适用于`UPDATE`s，你需要首先检查更新：

```
IF EXISTS(select * from inserted) and EXISTS(select * from deleted)
BEGIN
   --Update
END 
```

请注意，我已切换到`EXISTS`而不是`COUNT(*)`. Exists 更恰当地描述了我们想要建立的内容——表中存在行。我们不在乎那里有*多少*行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T10:20:58.050

我要感谢“SWeko”提供的线索。

现在，这就是我所做的并且触发器起作用了。

```
CREATE TRIGGER dbo.Sample
  ON TableName
  FOR INSERT, UPDATE, DELETE
AS
IF (SELECT COUNT(*) FROM INSERTED) > 0
BEGIN 
   IF (SELECT COUNT(*) FROM DELETED) > 0
       BEGIN
          -- UPDATE (TABLE). 
       END
   ELSE
       BEGIN
          -- INSERT (TABLE).
       END
END
ELSE
   -- DELETE (TABLE).
   BEGIN 
   END 
```

# java - 使用java的文件名编码

> ID：14600974
> 
> 赞同：0
> 
> 时间：2013-01-30T09:50:56.960
> 
> 标签：java, unix

我想写一个可逆的编码器和相应的解码器，这样任何字符串都可以被编码成一个合法的文件名，对应于Unix文件系统的文件命名规则。如何做到这一点？示例：“xyz.txt”是一个有效的文件名，而“xyz/.txt”不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:57:55.143

**tl;博士**：你的方法有缺陷。坚持文件系统的限制。它们很难优雅地克服（尤其是在没有引入你自己的，甚至更奇怪的限制的情况下）。

* * *

不可能制作出可严格解码的。您正在尝试将较大的域映射到较小的域，这意味着反向映射无法正确可逆。

这很容易用一个简单的例子来证明：你如何编码`/`使它可以反转？“简单，”你可能会说，“我会用令牌替换`x`。” 但是现在你怎么知道什么时候 an`x`是实际的`x`，什么时候 your是应该转换为`x`的“特殊” ？你不能。`x``/`

您当然可以制作一个不太可能发生意外冲突的系统。例如，您可以将其更改`/`为.`-``---`

* * *

哦，同样，对于它的价值，大多数 unix 文件系统实际上认为除`/`空字符以外的任何字符都是有效字符（[more](https://serverfault.com/questions/150740/linux-windows-unix-file-names-which-characters-are-allowed-which-are-unesc)）。显然，使用它是一件很痛苦的事情。

# javascript - d3-tree：如何突出显示子树？

> ID：14600976
> 
> 赞同：3
> 
> 时间：2013-01-30T09:50:58.620
> 
> 标签：javascript, svg, d3.js, tree, highlight

看着像[这个例子](http://bl.ocks.org/4063570)这样的树，我想知道你怎么能用不同的颜色突出树的进化枝/子树。这种树的一个例​​子是[here](http://evolution.berkeley.edu/evolibrary/images/phylogenetics/clade_highlights.gif)

![在此处输入图像描述](../Images/995cc1f721a3a66f55a1bcf0fc4f02c2.png)

是否可以在特定内部节点上覆盖不透明度较低的矩形？

任何帮助深表感谢！

# c# - 选择文件打开 Windows 资源管理器（或焦点，如果存在）的代码

> ID：14600987
> 
> 赞同：17
> 
> 时间：2013-01-30T09:51:38.277
> 
> 标签：c#, .net, directory, explorer, windows-explorer

我的目标是编写一个 C# 代码，该代码将打开一个 Windows 资源管理器窗口，并选择一个特定的文件。如果这样的窗口已经打开，我想把它带到前面。我尝试了两种选择。

首先，我首先明确调用`explorer.exe`：

```
arg = "/select, " + pathToFile;
Process.Start("explorer.exe", arg); 
```

这会打开并很好地选择一个窗口，但问题是它总是会打开一个新窗口，即使存在一个。所以我尝试了这个：

```
Process.Start(pathToDir); 
```

这要么打开一个新窗口，要么聚焦一个旧窗口，但我没有选择文件的选项。

我能做些什么？我查看了[`explorer`的论点](http://www.geoffchappell.com/studies/windows/shell/explorer/cmdline.htm)，但没有看到任何可以使用的东西。我能想到的最后一个选择是获取已经打开的窗口的列表并使用一些 WINAPI 级别的代码来处理它，但这似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T10:25:02.873

我不知道是否可以使用进程启动，但以下代码仅在需要时在包含文件夹上打开 Windows 资源管理器（如果该文件夹已打开，或在另一个文件中选择，则重复使用）并选择所需的文件。

[它在SHOpenFolderAndSelectItems 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762232%28v=vs.85%29.aspx)上使用 p/invoke 互操作代码：

```
public static void OpenFolderAndSelectFile(string filePath)
{
    if (filePath == null)
        throw new ArgumentNullException("filePath");

    IntPtr pidl = ILCreateFromPathW(filePath);
    SHOpenFolderAndSelectItems(pidl, 0, IntPtr.Zero, 0);
    ILFree(pidl);
}

[DllImport("shell32.dll", CharSet = CharSet.Unicode)]
private static extern IntPtr ILCreateFromPathW(string pszPath);

[DllImport("shell32.dll")]
private static extern int SHOpenFolderAndSelectItems(IntPtr pidlFolder, int cild, IntPtr apidl, int dwFlags);

[DllImport("shell32.dll")]
private static extern void ILFree(IntPtr pidl); 
```

# php - wordpress中的ajax不调用php函数

> ID：14600989
> 
> 赞同：1
> 
> 时间：2013-01-30T09:51:48.513
> 
> 标签：php, jquery, ajax, wordpress

想知道是否有人可以提供帮助；我正在尝试通过 jquery 将一些 ajax 实现到 wordpress 模板中的表单上。

jquery 正在工作，我可以在 sucess: 部分记录控制台消息，但数据为 0，此时应该调用 php 函数（此时在同一页面上，我可以直接调用它）

所以我猜jquery正在工作，正在调用admin-ajax，它只是没有调用php函数。有什么想法我可能做错了吗？我不完全理解钩子，所以也许这是一个问题 - 我需要在某个地方钩子？

jquery（域将替换评论）

```
<script type="text/javascript">
    jQuery(function ($) {
        $( "#movies" ).autocomplete({
                minLength:2,
                delay:500,
                source: function( request, response ) {
                    $.ajax({
                        type: 'POST',
                        url: "http://<!--domain here -->/wp-admin/admin-ajax.php",
                        dataType: 'json',
                        data: {
                            action: 'getMoviesForCode',
                            searchString: $("#movies").val()
                        },
                        success: function( data ) {
                            response(data);
                            console.log('jjj'+data);
                        }
                    });
                }           
        });
    });
    </script> 
```

php函数（在同一页面上）

```
<?php

    function getMoviesForCode(){
echo "
        <script type=\"text/javascript\">
        alert(\"hh\");
        </script>
    ";
   $searchString = $_POST['searchString'];
   $results = va_getMoviesForCode($searchString);  
  $results = json_encode($results);
  die($results);
}
 ?> 
```

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T10:02:29.747

你这样做是错的。你的 php 函数应该在你的主题`functions.php`文件中。

You should then hook the function to `wp_ajax_[your_action]` and `wp_ajax_nopriv_[your_action]`.

Example of what should be in your `functions.php` :

```
function getMoviesForCode(){
echo "
        <script type=\"text/javascript\">
        alert(\"hh\");
        </script>
    ";
   $searchString = $_POST['searchString'];
   $results = va_getMoviesForCode($searchString);  
  $results = json_encode($results);
  die($results);
}
add_action('wp_ajax_getMoviesForCode', 'getMoviesForCode');
add_action('wp_ajax_nopriv_getMoviesForCode', 'getMoviesForCode'); 
```

# c# - 是使用并行库调用XRM

> ID：14600993
> 
> 赞同：2
> 
> 时间：2013-01-30T09:52:13.990
> 
> 标签：c#, dynamics-crm-2011, xrm

在对 XRM 的查询中，这样使用并行扩展库是否有帮助

```
xrm.AccountSet.AsParallel().Where(v=>v.ModifiedBy == DateTime.Now).FirstOrDefault() 
```

代替

```
xrm.AccountSet.Where(v=>v.ModifiedBy == DateTime.Now).FirstOrDefault() 
```

还是没有区别？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:19:45.183

我不确定 XRM 库如何将 LINQ 转换为查询表达式，但查询表达式没有并行（）的概念。所以我猜它`xrm.AccountSet.AsParallel()`的性能会比`xrm.AccountSet.FirstOrDefault()`.

但是为了教一个人钓鱼而不是给他钓鱼，请阅读 Eric Lippert 的答案[哪个更快？](http://ericlippert.com/2012/12/17/performance-rant/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:55:40.023

您必须使用`AsParallel()`after `AccountSet`。

具体示例使用

```
xrm.AccountSet.FirstOrDefault(v=>v.ModifiedBy == DateTime.Now); 
```