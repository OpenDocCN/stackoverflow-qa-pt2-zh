# StackOverflow 问答 13933000-13933999

# javascript - 如何检查 Twitter 引导程序是否已加载？

> ID：13933000
> 
> 赞同：95
> 
> 时间：2012-12-18T12:27:29.260
> 
> 标签：javascript, twitter-bootstrap, frontend

如何检查`bootstrap.js`页面上是否加载了文件（`bootstrap.js`文件本身可能被编译/缩小为另一个更大的 JS 文件）？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-02-08T08:42:10.137

您需要做的只是检查是否有特定于 Bootstrap 的方法可用。我将在此示例中使用模态（适用于 Bootstrap 2-4）：

```
// Will be true if bootstrap is loaded, false otherwise
var bootstrap_enabled = (typeof $().modal == 'function'); 
```

它显然不是 100% 可靠的，因为模态函数可以由不同的插件提供，但尽管如此，它还是可以完成这项工作......

您还可以更具体地检查 Bootstrap 3-4（从 3.1+ 开始工作）：

```
// Will be true if Bootstrap 3-4 is loaded, false if Bootstrap 2 or no Bootstrap
var bootstrap_enabled = (typeof $().emulateTransitionEnd == 'function'); 
```

请注意，所有这些检查都要求[jQuery 已经加载](https://stackoverflow.com/questions/7341865/checking-if-jquery-is-loaded-using-javascript)。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-03-04T19:56:09.470

我宁愿检查特定的引导插件，因为模式或工具提示很常见，所以

```
if(typeof($.fn.popover) != 'undefined'){
 // your stuff here
} 
```

或者

```
 if (typeof $.fn.popover == 'function') { 
   // your stuff here
  } 
```

适用于两个引导版本

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-18T12:38:56.287

`if (typeof([?])=='undefined') { /*bootstrap is not loaded */}`

其中 [?] 将是在 JS 文件本身中定义的任何对象或命名空间。

javascript中不存在“包含”的概念。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-07-24T11:34:25.103

见[https://github.com/netdna/bootstrap-cdn/issues/111#issuecomment-14467221](https://github.com/netdna/bootstrap-cdn/issues/111#issuecomment-14467221)

```
<script type="text/javascript">
    // <![CDATA[
    (function($){

        function verifyStyle(selector) {//http://stackoverflow.com/a/983817/579646
            var rules;
            var haveRule = false;

            if (typeof document.styleSheets != "undefined") {   //is this supported
                var cssSheets = document.styleSheets;

                outerloop:
                for (var i = 0; i < cssSheets.length; i++) {

                     //using IE or FireFox/Standards Compliant
                    rules =  (typeof cssSheets[i].cssRules != "undefined") ? cssSheets[i].cssRules : cssSheets[i].rules;

                     for (var j = 0; j < rules.length; j++) {
                         if (rules[j].selectorText == selector) {
                                 haveRule = true;
                                break outerloop;
                         }
                    }//innerloop

                }//outer loop
            }//endif

            return haveRule;
        }//eof

        <!-- BOOTSTRAP JS WITH LOCAL FALLBACK-->
        if(typeof($.fn.modal) === 'undefined') {document.write('<script src="<?=$path_js?>/bootstrap.min.js"><\/script>')}

        <!-- BOOTSTRAP CDN FALLBACK CSS-->
        $(document).ready(function() {

            if( verifyStyle('form-inline') )
            {
                $("head").prepend("<link rel='stylesheet' href='<?=$path_css?>bootstrap.min.css' type='text/css' media='screen'>");
            }
            else
            {
                //alert('bootstrap already loaded');
            }
        });
    })(jQuery);
    // ]]>
    </script> 
```

兼容 jQuery 安全模式，

如果您使用自定义 css，css 检查可能需要调整

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-18T12:52:48.267

AFAIK，简短的回答是

> 无法检测是否加载了 twitter bootstrap

# 细节

Twitter bootstrap 本质上是 css 和 jquery 的一组 js 插件。插件名称是通用的，如 $.fn.button 并且要使用的插件集也是可定制的。仅按名称存在插件无助于确定是否存在引导程序。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-18T12:38:01.900

您可以检索`<script>`元素并检查它们的 src 属性，但正如您所指出的，您要查找的是代码本身而不是文件名，因为代码可能在任何文件中。

检测 JavaScript 服务/类/等的最佳方法。在页面中加载，是在 DOM 中查找您知道由给定 JS 加载的内容。

例如，要检测是否加载了 jQuery，您可以执行`null !== window.jQuery`或找出加载的 jQuery 的版本，`jQuery.prototype.jquery`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-11T20:56:44.677

我发现这是最简单的方法。就 css 而言，我不确定是否有一种简单的方法可以做到这一点。

```
<script>typeof Alert !== 'undefined' || document.write('<script src="/js/bootstrap/bootstrap.min.js">\x3C/script>')</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-07T20:37:56.740

添加引导链接并注意 h1 标签的变化。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2017-06-23T17:42:20.010

如果你在控制台输入这个，它将输出 jQuery 版本： `console.log(jQuery().jquery);`

# android - 如何在 android 中为 salesforce 实现 Oauth？

> ID：13933003
> 
> 赞同：0
> 
> 时间：2012-12-18T12:27:35.697
> 
> 标签：android, salesforce

我正在尝试在 Android 应用程序中实施 Salesforce OAuth。我已经使用 Salesforce Mobile SDK 来实现它。我还在我的项目中添加了“SalesforceSDK-1.0.1.jar”。

MainActivity.java

```
package com.android.templateapp;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

import com.salesforce.androidsdk.app.ForceApp;
import com.salesforce.androidsdk.rest.ClientManager;
import com.salesforce.androidsdk.rest.ClientManager.LoginOptions;
import com.salesforce.androidsdk.rest.ClientManager.RestClientCallback;
import com.salesforce.androidsdk.rest.RestClient;

public class MainActivity extends Activity {

private RestClient client;
private ArrayAdapter<String> listAdapter;
private static String TAG = "TemplateApp";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.v(TAG," onCreate of Main Activity");
    // Setup view
    setContentView(R.layout.main);
}

@Override 
public void onResume() {
    Log.v(TAG," ******* default onResume of Main Activity");
        super.onResume();

        findViewById(R.id.root).setVisibility(View.INVISIBLE);
        Log.v(TAG," ******* default onResume - View.INVISIBLE");

        // Login options
        String accountType = ForceApp.APP.getAccountType();

        Log.v(TAG," ******* default onResume - accountType ::"+accountType);

        LoginOptions loginOptions = new LoginOptions(
                "https://login.salesforce.com/", // login host is chosen by user through the server picker 
                ForceApp.APP.getPasscodeHash(),
                getString(R.string.oauth_callback_url),
                getString(R.string.oauth_client_id),
                new String[] {"api"});
        Log.v(TAG," ******* default onResume - loginOptions ::"+loginOptions);

        // Get a rest client
        new ClientManager(this, accountType, loginOptions).getRestClient(this, 
                       new RestClientCallback() {
            @Override
            public void authenticatedRestClient(RestClient client) {

                // Show everything
                findViewById(R.id.root).setVisibility(View.VISIBLE);

                //User is authenticated, insert Application logic here
            }
        });
    }

protected LoginOptions getLoginOptions() {
    Log.v(TAG," getLoginOptions of Main Activity");
    LoginOptions loginOptions = new LoginOptions(
            null, // login host is chosen by user through the server picker 
            ForceApp.APP.getPasscodeHash(),
            getString(R.string.oauth_callback_url),
            getString(R.string.oauth_client_id),
            new String[] {"api"});
    return loginOptions;
}

public void onResume(RestClient client) {
    Log.v(TAG," onResume of Main Activity");
    // Keeping reference to rest client
    this.client = client; 

    // Show everything
    findViewById(R.id.root).setVisibility(View.VISIBLE);
}

/**
 * Called when "Logout" button is clicked. 
 * 
 * @param v
 */
public void onLogoutClick(View v) {
    ForceApp.APP.logout(this);
}

/**
 * Called when "Clear" button is clicked. 
 * 
 * @param v
 */

public void onClearClick(View v) {
    listAdapter.clear();
}   

/**
 * Called when "Fetch Contacts" button is clicked
 * 
 * @param v
 * @throws UnsupportedEncodingException 
 */

public void onFetchContactsClick(View v) throws UnsupportedEncodingException {
    sendRequest("SELECT Name FROM Contact");
}

public void onFetchAccountsClick(View v) throws UnsupportedEncodingException {
    sendRequest("SELECT Name FROM Account");
}   

private void sendRequest(String soql) throws UnsupportedEncodingException {
    RestRequest restRequest = RestRequest.getRequestForQuery(getString(R.string.api_version), soql);

    client.sendAsync(restRequest, new AsyncRequestCallback() {
        @Override
        public void onSuccess(RestRequest request, RestResponse result) {
            try {
                listAdapter.clear();
                JSONArray records = result.asJSONObject().getJSONArray("records");
                for (int i = 0; i < records.length(); i++) {
                    listAdapter.add(records.getJSONObject(i).getString("Name"));
                }                   
            } catch (Exception e) {
                onError(e);
            }
        }

        @Override
        public void onError(Exception exception) {
            Toast.makeText(MainActivity.this,
                           MainActivity.this.getString(ForceApp.APP.getSalesforceR().stringGenericError(), exception.toString()),
                           Toast.LENGTH_LONG).show();
        }
    });
}

} 
```

我在 logcat 中收到以下错误：

```
12-18 17:47:04.696: E/Trace(1586): error opening trace file: No such file or directory (2)
12-18 17:47:05.256: V/TemplateApp(1586):  onCreate of Main Activity
12-18 17:47:05.526: V/TemplateApp(1586):  ******* default onResume of Main Activity
12-18 17:47:05.526: V/TemplateApp(1586):  ******* default onResume - View.INVISIBLE
12-18 17:47:05.536: D/AndroidRuntime(1586): Shutting down VM
12-18 17:47:05.536: W/dalvikvm(1586): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
12-18 17:47:05.546: E/AndroidRuntime(1586): FATAL EXCEPTION: main
12-18 17:47:05.546: E/AndroidRuntime(1586): java.lang.RuntimeException: Unable to resume activity {com.android.templateapp/com.android.templateapp.MainActivity}: java.lang.NullPointerException
12-18 17:47:05.546: E/AndroidRuntime(1586):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2575)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2603)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2089)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at android.os.Looper.loop(Looper.java:137)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at java.lang.reflect.Method.invokeNative(Native Method)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at java.lang.reflect.Method.invoke(Method.java:511)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at dalvik.system.NativeStart.main(Native Method)
12-18 17:47:05.546: E/AndroidRuntime(1586): Caused by: java.lang.NullPointerException
12-18 17:47:05.546: E/AndroidRuntime(1586):     at com.salesforce.androidsdk.app.ForceApp.getAccountType(ForceApp.java:175)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at com.android.templateapp.MainActivity.onResume(MainActivity.java:85)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1184)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at android.app.Activity.performResume(Activity.java:5082)
12-18 17:47:05.546: E/AndroidRuntime(1586):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2565)
12-18 17:47:05.546: E/AndroidRuntime(1586):     ... 12 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:00:29.847

我想您还没有设置扩展 ForceApp 的应用程序类并将其注册到 AndroidManifest.xml 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:29:05.817

请参阅以下 url 以使用 oAuth 进行身份验证

[http://wiki.developerforce.com/page/Getting_Started_with_the_Mobile_SDK_for_Android#Authentication](http://wiki.developerforce.com/page/Getting_Started_with_the_Mobile_SDK_for_Android#Authentication)

您应该授予对您的 salesforce 组织的远程访问权限，以便授予对移动应用程序的访问权限。您应该在应用程序中指定远程访问使用者密钥以及 oAuth 重定向 URL 和 oauth 登录域 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:42:11.657

我发现了同样的错误，superfell 的回答有所帮助。如果您查看[示例 TemplateApp 应用程序](https://github.com/forcedotcom/SalesforceMobileSDK-Android/tree/master/native/TemplateApp)，TemplateApp.java 扩展了 ForceApp。我可以通过将错误添加到我的清单文件中来删除该错误，例如：

```
<application android:icon="@drawable/icon" android:label="@string/app_name" android:name=".TemplateApp"> 
```

# python - update to matplotlib prepends 'alt' to keyrelease event.key

> ID：13933005
> 
> 赞同：4
> 
> 时间：2012-12-18T12:27:39.980
> 
> 标签：python, windows, matplotlib

I updated matplotlib from v1.1 to v1.2.0 win32\. I use mpl_connect to handle keyevents. Where I used to check keyrelease event.key for e.g. 'q' or 'escape', now all keys are 'alt+q', 'alt+escape'. Any idea why ?

Example code:

```
import matplotlib.pyplot as plt

def close_fig(event):
   print event.key
   if event.key == 'q':
      plt.close(event.canvas.figure)

fig = plt.figure()
ax = fig.add_subplot(111)
fig.canvas.mpl_connect('key_release_event', close_fig)

data = [0,10,11,12]
ax.plot(data)
plt.show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T07:19:08.593

这看起来像是添加到 matplotlib v1.2 的修饰键逻辑中的错误。请将此示例报告给 matplotlib 问题跟踪器[https://github.com/matplotlib/matplotlib/issues/new](https://github.com/matplotlib/matplotlib/issues/new)，上面的示例和相关的详细信息在[http://matplotlib.org/faq/troubleshooting_faq.html#getting-中讨论帮助](http://matplotlib.org/faq/troubleshooting_faq.html#getting-help)。特别是，这很可能是后端问题，因此请提供您正在使用的后端以及操作系统信息。

谢谢！

# apache - 如何使用 VirtualDocumentRoot 在每个请求的基础上覆盖 DocumentRoot

> ID：13933007
> 
> 赞同：3
> 
> 时间：2012-12-18T12:27:57.517
> 
> 标签：apache, mod-rewrite, mod-vhost-alias

因此，人们抱怨在使用 VirtualDocumentRoot 和 mod_vhost_alias 运行 Apache 时，使用 DOCUMENT_ROOT 的 PHP 脚本是如何中断的，因为 DOCUMENT_ROOT 没有正确设置。[Apache 显然在不久前修复了这个问题，简要说明如下：http: //svn.apache.org/viewvc](http://svn.apache.org/viewvc?view=revision&revision=1132494) ?view=revision&revision=1132494

遗憾的是，没有足够的细节解释如何根据每个请求实际覆盖 DocumentRoot。我猜它必须以某种方式使用 mod_rewrite 完成，但我不确定。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:06:38.907

好吧，显然，我问的问题并不正确。以下是我在 Apache2 Bugzilla 列表中直接从 Stephan 那里获得的一些信息：

斯蒂芬 说：

> 错误报告是关于 VirtualDocumentRoot 的，现在可以正确设置 DOCUMENT_ROOT。因此问题得到解决。

我回过头来澄清：

> 也许我错过了一些东西，但我很确定我在 php 中测试了 $_SERVER['DOCUMENT_ROOT'] 并​​且它与 VirtualDocumentRoot 设置的值不匹配。你说它现在应该匹配？

他回答说：

> 是的，在 2.4.x 中。该修复程序不太可能移植到 2.2.x，因为它需要仅存在于 2.4 中的基础架构。

所以我运行了 apache2 -v 并发现我没有运行 2.4.x。Apache2 -v 显示了这一点：

```
Server version: Apache/2.2.16 (Debian)
Server built:   Nov 30 2012 08:33:45 
```

如果你注意到服务器是在今年 11 月底我使用 aptitude -install apache2 时构建的。我不知道 apt-get 是否会改为使用 apache 2.4。这很蹩脚。2.4.3 稳定版于 8 月发布。我不知道为什么 aptitude 会拉到 2.2，但这确实给我制造了一场噩梦。

So in reality, the question I asked was moot. Everything should have worked fine, except that aptitude installed an outdated apache2 and I didn't realize what was going on. There is no bug anymore.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:23:52.293

mod_vhost_alias 是官方发行版中唯一设置每个请求文档根的模块。

预先存在的代码，包括设置 DOCUMENT_ROOT CGI 环境变量的代码，通过 ap_document_root(r) 查找文档根目录会看到这些更改。

此更改还为 mod_userdir 等模块引入了一个新概念，其中“文档根”并不合适。这个新概念有新的 API 和新的 CGI 环境变量（CONTEXT_PREFIX、CONTEXT_DOCUMENT_ROOT），它们不绑定到传统的文档根目录。

我认为唯一相关的真实文档是：

*   开发人员文档（基本完成）
*   为看到由 mod_vhost_alias 设置的 DOCUMENT_ROOT 的迁移人员提供的文档
*   关于新 CONTEXT_* 变量是什么的 CGI/环境变量文档

但是，我不认为这些是待办事项，因为 mod_vhost_alias 和现有的 DocumentRoot API 和环境变量正在协同工作。

如果问题确实是 mod_vhost_alias 之外的“如何”，请查看 mod_userdir 和 mod_vhost_alias 之间关于 ap_set_document_root() 和 ap_set_context_info() 的区别，然后查看它们如何导致 server/util_script.c 中的 CGI 环境变量。

# ssl - Capture google plus https traffic using wireshark?

> ID：13933009
> 
> 赞同：-1
> 
> 时间：2012-12-18T12:28:00.880
> 
> 标签：ssl, https, wireshark, web-traffic, network-traffic

I am using Linux/Wireshark to capture http traffic and it's working great. Now i want to capture some AJAX calls from [https://plus.google.com](https://plus.google.com), but in this case I am not able to see any simple data.

I saw some articles and confused, Can someone explain, what steps should I follow to get the desired results?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:20:42.057

为了能够解密 HTTPS 流量，您需要服务器私钥。由于您无法获取 plus.google.com 的 Google 私钥，因此无法解密捕获的流量。

除了拥有私钥之外，TLS 交易不得使用完美前向保密。

# jquery - 在下面的代码中，我如何在 jquery 的每一行之后添加行

> ID：13933019
> 
> 赞同：0
> 
> 时间：2012-12-18T12:28:27.417
> 
> 标签：jquery

在下面的代码中，我如何在 jquery 的每一行之后添加一行。我正在使用 json 动态创建一个菜单。所以当我获取所有数据时，我将其填充到我的菜单中，但在菜单中所有数据看起来都很简单，因为我无法区分 perticuler 行。所以为什么我必须在每一行之后放置一条水平线。任何人都可以帮助我在 clde 下方的每一行之后放置一条线。在 li 之后。

```
$.each(yourJson.data, function (i) {
    var li = $('<li/></br>').on('click', function () { window.location = "HTMLPage.htm" })
        .addClass('yourCssClass')
        .attr('data-theme', 'c')
        .appendTo(list);
    var aaa = $('<a/>')
        .html(yourJson.data[i].name + " <span class='patient-list_txt2-blue'>" + yourJson.data[i].dateTime + "</span>")
        .attr('data-transition', 'slide')
        .appendTo(li);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:30:20.463

这应该有效：

```
$('li').after('<hr class="line"></hr>'); 
```

之后添加：

```
$.each(yourJson.data, function (i) {
    var li = $('<li/></br>').on('click', function () { window.location = "HTMLPage.htm" })
    .addClass('yourCssClass')
    .attr('data-theme', 'c')
    .appendTo(list);

    var aaa = $('<a/>')
    .html(yourJson.data[i].name + " <span class='patient-list_txt2-blue'>" + yourJson.data[i].dateTime + "</span>")
    .attr('data-transition', 'slide')
    .appendTo(li);
});

// After the loop
$(yourJson.data).find('li').after('<hr class="line"></hr>'); 
```

# android - 在 GallaryView 布局中单击时 Imageview 位于中心位置

> ID：13933023
> 
> 赞同：-2
> 
> 时间：2012-12-18T12:28:44.147
> 
> 标签：android

我正在使用`GalleryView`具有多个`ImageView`. 当我单击`ImageView`该视图时，设备的水平中心位置会出现。有什么办法可以阻止这种情况，意味着点击时视图不会出现在中心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:33:11.407

默认情况下，Android Galery 处于中心锁定状态，因此如果您需要将其锁定。[在https://github.com/TheLevelUp/android-left-locked-gallery](https://github.com/TheLevelUp/android-left-locked-gallery)分叉代码

# excel - 是否可以在 EXCEL VBA 中将多维数组作为参数传递？

> ID：13933025
> 
> 赞同：3
> 
> 时间：2012-12-18T12:28:46.493
> 
> 标签：excel, vba, multidimensional-array

我在一个过程中创建了一个数组，它是最终结果，我想在新过程中利用这些结果作为计算的输入。有没有办法将多维数组作为参数传递给另一个过程？您将如何将其放入调用中，以及如何在将使用它的过程中定义参数？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:33:36.977

通过用括号装饰常规参数来传递单维数组；

```
sub a()
    dim x(1, 1) As long
    x(0, 0) = 1
    x(1, 1) = 4
    process x
end sub

sub process(arr() As long)
    Msgbox arr(0, 0)
    Msgbox arr(1, 1)
end sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:32:08.730

Is this the sort of thing you are after?

```
Sub AAATest()
''''''''''''''''''''''''
' Dynamic array to hold
' the result.
''''''''''''''''''''''''
Dim ReturnArr() As Long
Dim Ndx1 As Long
Dim Ndx2 As Long
Dim NumDims As Long
''''''''''''''''''''''''''
' call the function to get
' the result array.
''''''''''''''''''''''''''
ReturnArr = ReturnMulti()
NumDims = NumberOfArrayDimensions(Arr:=ReturnArr)
Select Case NumDims
    Case 0
        '''''''''''''''''''
        ' unallocated array
        '''''''''''''''''''
    Case 1
        ''''''''''''''''''''''''''
        ' single dimensional array
        ''''''''''''''''''''''''''
        For Ndx1 = LBound(ReturnArr) To UBound(ReturnArr)
            Debug.Print ReturnArr(Ndx1)
        Next Ndx1
    Case 2
        '''''''''''''''''''''''''''
        ' two dimensional array
        '''''''''''''''''''''''''''
        For Ndx1 = LBound(ReturnArr, 1) To UBound(ReturnArr, 1)
            For Ndx2 = LBound(ReturnArr, 2) To UBound(ReturnArr, 2)
                Debug.Print ReturnArr(Ndx1, Ndx2)
            Next Ndx2
        Next Ndx1
    Case Else
        ''''''''''''''''''''''
        ' too many dimensions
        ''''''''''''''''''''''
End Select
End Sub

Function ReturnMulti() As Long()
''''''''''''''''''''''''''''''''''''
' Returns a mutli-dimensional array.
''''''''''''''''''''''''''''''''''''
Dim A(1 To 2, 1 To 3) As Long
'''''''''''''''''''''''''''''
' put in some values.
'''''''''''''''''''''''''''''
A(1, 1) = 100
A(1, 2) = 200
A(1, 3) = 300
A(2, 1) = 400
A(2, 2) = 500
A(2, 3) = 600
ReturnMulti = A()
End Function 
```

# assembly - 汇编编程

> ID：13933027
> 
> 赞同：-1
> 
> 时间：2012-12-18T12:28:53.660
> 
> 标签：assembly, addition, subtraction

```
R0 = 1500 
R1 = 4500
R2 = 1000 
```

在以下每条指令中显示内存的有效地址和寄存器的内容：

```
ADD (R0)+, R2

SUBTRACT - (R1), R2 
```

可能的答案：

添加 ：

```
R2 = M[1500] + 1000 , R0 = 1501 
```

减法：

```
R2 = M[4500] – 1000 , R1 = 4501 
```

什么是正确答案，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:33:08.600

它是什么机器？一些 pdp/vax？该指令：

```
ADD (R0)+, R2 
```

它不应该增加操作数的大小吗？在你的情况下是 16 位，我猜不是 8 位？

子部分不正确，因为肯定使用了自动减量。如果我没记错的话，它是在加载操作数之前完成的。

# python - 使用 Python 的 pickle 打开和保存字典

> ID：13933029
> 
> 赞同：2
> 
> 时间：2012-12-18T12:28:57.810
> 
> 标签：python, python-3.x, pickle

在我的介绍comp sci 课程的最后几天，我们开始创建字典。我们书中的一个家庭作业程序要求我们创建一些可以查找、添加、更改和删除一组姓名和电子邮件地址的东西。它要求我们腌制字典，但对我来说更重要的是它规定每次程序启动时，它都应该从文件中检索字典并取消腌制它。我不知道我是否将自己编码到一个角落，但我无法弄清楚如何用我迄今为止所做的事情来做到这一点。

我的代码：

```
import mMyUtils
import pickle
LOOK_UP = 1
ADD = 2
CHANGE = 3
DELETE = 4
QUIT = 5

def main():
    emails = {}
    choice = 0
    while choice != QUIT:
        choice = getMenuChoice()
        if choice == LOOK_UP:
            lookUp(emails)
        elif choice == ADD:
            add(emails)
        elif choice == CHANGE:
            change(emails)
        elif choice == DELETE:
            delete(emails)
        else:
            exit

def getMenuChoice():
    print()
    print('Name and Email Address Catalog')
    print('------------------------------')
    print('1\. Look up an email address')
    print('2\. Add a new email address')
    print('3\. Change an email address')
    print('4\. Delete an email address')
    print('5\. Quit the program')
    print()

    choice = int(input('Enter the choice: '))
    while choice < LOOK_UP or choice > QUIT:
        choice = int(input('Enter a valid choice: '))

    return choice

def lookUp(emails):
    name = input('Enter a name: ')
    print(emails.get(name, 'Not found.'))

def add(emails):
    name = input('Enter a name: ')
    address = input('Enter an email address: ')
    if name not in emails:
        emails[name] = address
        pickle.dump(emails, open("emails.dat", "wb"))
    else:
        print('That entry already exists.')

def change(emails):
    name = input('Enter a name: ')
    if name in emails:
        address = input('Enter the new address: ')
        emails[name] = address
        pickle.dump(emails, open("emails.dat", "wb"))
    else:
        print('That name is not found.')

def delete(emails):
    name = input('Enter a name: ')
    if name in emails:
        del emails[name]
    else:
        print('That name is not found.')

main() 
```

我知道我应该将我的 emails 变量设置为某种形式的 pickle.load，但我一生都无法弄清楚。mMyUtils 是我为 try/except 逻辑创建的库，一旦我得到新的东西，我就会把它放进去。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:35:40.593

如果您像这样保存字典：

```
pickle.dump(emails, open('emails.dat', 'wb')) 
```

以下将加载它：

```
emails = pickle.load(open('emails.dat', 'rb')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:37:41.430

您必须先加载文件并解压缩数据，然后才能访问它，更改`lookUp()`为：

```
def lookUp(emails):
    with open("emails.dat", "rb") as fo:
        emails = pickle.load(fo)

    name = input('Enter a name: ')
    print(emails.get(name, 'Not found.')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:30:39.170

考虑自己使用 ast.literal_eval 而不是 pickle：[http ://docs.python.org/2/library/ast.html#ast.literal_eval](http://docs.python.org/2/library/ast.html#ast.literal_eval)

```
>>>import ast
>>> print mydict
{'bob': 1, 'danny': 3, 'alan': 2, 'carl': 40}
>>> string="{'bob': 1, 'danny': 3, 'alan': 2, 'carl': 40}"
>>> type(string)
<type 'str'>
>>> type( ast.literal_eval(string) )
<type 'dict'> 
```

要从文件中保存/读取字典，您可以像使用普通字符串一样进行操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:28:24.533

问题是，我想我没有足够强调它，如果字典首先不存在我应该做的。设计文档指出，每次运行程序时都应该加载字典。好吧，如果您是第一次运行该程序，则没有要加载的字典，从而导致错误。我基本上通过使用 try/except 两次执行该功能来解决这个问题。

我的代码：

```
import mMyUtils
import pickle
import dictionaryGenerator
LOOK_UP = 1
ADD = 2
CHANGE = 3
DELETE = 4
QUIT = 5

def main():
    hasError = False
    try:
        emails = pickle.load(open('emails.dat', 'rb'))
        choice = 0
        while choice != QUIT:
            choice = getMenuChoice()
            if choice == LOOK_UP:
                lookUp(emails)
            elif choice == ADD:
                 add(emails)
            elif choice == CHANGE:
                change(emails)
            elif choice == DELETE:
                delete(emails)
            else:
                print("Good-bye!")
                exit
    except Exception as err:
        hasError = True
        mMyUtils.printError("Error: no such file",err)
        mMyUtils.writeToErrorLog()

    finally:
        if hasError:
            emails = {}
        choice = 0
        while choice != QUIT:
            choice = getMenuChoice()
            if choice == LOOK_UP:
                lookUp(emails)
            elif choice == ADD:
                add(emails)
            elif choice == CHANGE:
                change(emails)
            elif choice == DELETE:
                delete(emails)
            else:
                print("Good-bye!")
                exit

def getMenuChoice():
    print()
    print('Name and Email Address Catalog')
    print('------------------------------')
    print('1\. Look up an email address')
    print('2\. Add a new email address')
    print('3\. Change an email address')
    print('4\. Delete an email address')
    print('5\. Quit the program')
    print()

    choice = int(input('Enter the choice: '))
    while choice < LOOK_UP or choice > QUIT:
        choice = int(input('Enter a valid choice: '))

    return choice

def lookUp(emails):

    name = input('Enter a name: ')
    print(emails.get(name, 'Not found.'))

def add(emails):
    name = input('Enter a name: ')
    address = input('Enter an email address: ')
    if name not in emails:
        emails[name] = address
        with open("emails.dat",  "wb") as infile:
            pickle.dump(emails, infile)

    else:
        print('That entry already exists.')

def change(emails):
    name = input('Enter a name: ')
    if name in emails:
        address = input('Enter the new address: ')
        emails[name] = address
        with open("emails.dat", "wb") as infile:
            pickle.dump(emails, infile)

    else:
        print('That name is not found.')

def delete(emails):
    name = input('Enter a name: ')
    if name in emails:
        del emails[name]
    else:
        print('That name is not found.')

main() 
```

# jquery - 单击 Ctrl 或 Shift 时禁用快捷键

> ID：13933034
> 
> 赞同：5
> 
> 时间：2012-12-18T12:29:17.483
> 
> 标签：jquery, keycode

`Ctrl`单击某些键（ / ）时，我试图禁用所有快捷键`Shift`。

这是我的快速片段：

```
$(document).keyup(function(b) {     

    if (b.keyCode == 16) {return false;}
    if (b.keyCode == 17) {return false;}

    $("body").append(b.keyCode + " ");

}); 
```

​当您单击`**Shift**`或时，**不会**`**Click**`打印keyCode 编号，但如果单击**+ ，****则会**打印字母的 keyCode 。**`**Shift**`**`Any Letter`****

 ****示例：http: [//jsfiddle.net/javascript/K4sCx/7/](http://jsfiddle.net/javascript/K4sCx/7/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T12:33:52.797

您可以确定是否在事件对象中按下了“特殊键”。

检测事件对象中的特殊键：

```
if (evtobj.altKey || evtobj.ctrlKey || evtobj.shiftKey)
alert("you pressed one of the 'Alt', 'Ctrl', or 'Shift' keys")
} 
```

代码示例：

```
$(document).keyup(function(evtobj) {     
                if (!(evtobj.altKey || evtobj.ctrlKey || evtobj.shiftKey)){
    if (evtobj.keyCode == 16) {return false;}
                    if (evtobj.keyCode == 17) {return false;}
    $("body").append(evtobj.keyCode + " ");
                }
}); 
```

[提琴手](http://jsfiddle.net/afKUu/4/)

​</p>

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-15T07:11:48.123

```
 $(window).on('keydown',function(event)
    {
    if(event.keyCode==123)
    {
        alert('Entered F12');
        return false;
    }
    else if(event.ctrlKey && event.shiftKey && event.keyCode==73)
    {
        alert('Entered ctrl+shift+i')
        return false;  //Prevent from ctrl+shift+i
    }
    else if(event.ctrlKey && event.keyCode==73)
    {
        alert('Entered ctrl+shift+i')
        return false;  //Prevent from ctrl+shift+i
    }
});
$(document).on("contextmenu",function(e)
{
alert('Right Click Not Allowed')
e.preventDefault();
}); 
```

这将被 Chrome、Firefox、IE 和所有浏览器支持 control+shift+i & F12 & 右键单击​​。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-27T12:28:21.967

请参阅上面的禁用 ctrl + 鼠标滚轮的链接，以通过 ctrl+鼠标滚轮禁用缩放效果。

```
/*above code is added to disabled ctrl + zoom on mouse wheel  by Ñ££¿*/
$( document ).ready( function ()
{
    $( document ).keydown( function ( event )
    {
        if ( event.ctrlKey == true && ( event.which == '61' || event.which == '107' || event.which == '173' || event.which == '109' || event.which == '187' || event.which == '189' ) )
        {event.preventDefault();}
    } );

    $( window ).bind( 'mousewheel DOMMouseScroll', function ( event )
    {
        if ( event.ctrlKey == true ){event.preventDefault();}
    } );
} );
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-08T14:14:27.780

我用谷歌搜索了同样的事情并想出了自己的解决方案。我提出这个问题的原因是在所有浏览器上禁用开发人员工具。

基本上禁用 ctrl 和/或 shift 证明完全没用，因为可以在浏览器中自定义快捷键。

我使用的一种方法是确保如果按键不在输入/文本区域内，则它必须返回 false/ 或弹出窗口或您想要的任何内容。

我是如何做到这一点的，是加载 dom 并立即将焦点放在页面的 body 标签上，然后运行一个间隔函数来检查焦点是否不在 body 上，如果没有，则将焦点返回到 body 标签。

如果同时单击输入，则禁用间隔正文检查并将焦点放在输入上，直到按下输入或输入失去焦点并使用 onblur 函数使用此 onblur 函数将焦点放回正文标签。

将注意力集中在 Dom 上可以访问所有按键。

随着 PWA 的首次亮相，一切都变得更好了，因为现在您可以强制用户进入全屏模式，这会自动将焦点放在 dom 页面/正文标签上，从而可以完全控制按键功能。

我现在无法在任何浏览器上的我自己的页面上调用开发者控制台，我已经尝试了所有可能的方法，希望这对某人有所帮助..****

# magento - 在管理员上更改 magento 订单状态和按钮操作

> ID：13933035
> 
> 赞同：0
> 
> 时间：2012-12-18T12:29:18.347
> 
> 标签：magento, adminhtml

我想在 Magento 管理订单部分更改为按钮操作，在查看了这里的很多帖子后，我找不到满足我问题的答案：

问题：我希望能够单击订单上的打印发票按钮并使其自动更改为已发货状态，当我使用跟踪号将运输添加到订单并单击提交时，我希望该状态更改为已发货..我想知道如何做到这一点？

总结：状态更改为已发货 - 打印发票时 状态更改为完成 - 订单发货时

我假设我将开始编辑本节：app/code/core/Mage/Adminhtml/Block/Sales/Order/View.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:26:50.030

要更改订单的状态，指令是：

```
 $order->setState('your state', true); 
```

前任。：

```
$order->setState('complete', true); 
```

要获得您想要的内容，您应该编辑在打印发票或创建货件时调用的控制器。它的 ：

/app/code/core/Mage/Adminhtml/Controller/Sales/Invoice.php 在 printAction() 方法中的行之后：

```
$pdf = Mage::getModel('sales/order_pdf_invoice')->getPdf(array($invoice)); 
```

用于打印发票和

/app/code/core/Mage/Adminhtml/controllers/Sales/Order/ShipmentController.php 在 saveAction() 方法中的行之后：

```
 $shipment->register(); 
```

但是编辑Controller是最简单但最糟糕的解决方案。如果你熟悉 Magento 和 php，你可以通过模型或事件来做到这一点。

此致，

# python - Python shlex.split 函数的 Powershell 替代方案

> ID：13933037
> 
> 赞同：0
> 
> 时间：2012-12-18T12:29:20.803
> 
> 标签：python, powershell, split, shlex

我正在寻找 Powershell 的 python shlex.split() 函数的替代方法。到目前为止，谷歌还没有帮助我。

如果您不知道此函数的作用，它允许您将字符串拆分为多个“字段”列表，但不包括带引号的子字符串。

**例如：**

以下字符串： *我对此“没有灵感”*

将按以下方式拆分：我，有，没有灵感，因为，这个

我想为此切换到 powershell 的原因是避免在我们的生产 Windows 服务器上安装 python。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:43:41.780

你也许应该搜索`awk powershell`

这导致

[http://windows-powershell-scripts.blogspot.de/2009/06/awk-equivalent-in-windows-powershell.html](http://windows-powershell-scripts.blogspot.de/2009/06/awk-equivalent-in-windows-powershell.html)

# java - 使用 HTTPS 的 Web 服务

> ID：13933048
> 
> 赞同：7
> 
> 时间：2012-12-18T12:30:07.080
> 
> 标签：java, web-services, wsdl

我有一个外部 Web 服务，它通过 https 运行，我可以使用 wsimport 生成 java 类，但是当我调用该服务时，我收到以下异常：

```
Exception in thread "main" com.sun.xml.internal.ws.client.ClientTransportException: HTTP transport error: java.net.UnknownHostException: ECM01
at com.sun.xml.internal.ws.transport.http.client.HttpClientTransport.getOutput(Unknown Source)
at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process(Unknown Source)
at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(Unknown Source)...
Caused by: java.net.UnknownHostException: ECM01
at java.net.PlainSocketImpl.connect(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at sun.net.NetworkClient.doConnect(Unknown Source) 
```

我调用服务的类是这样的：

```
public static void main(String[] args) {
    ColleagueServiceService cs = new ColleagueServiceService();
    ColleagueService service = cs.getColleagueServicePort();

    try {
        service.getColleagues("user", "password", 1);
    } catch (Exception_Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

我尝试使用 SoapUI 调用 web 服务，但它显示了另一个异常：

```
Tue Dec 18 09:40:06 BRST 2012:ERROR:org.apache.http.conn.HttpHostConnectException: Connection to https://my.webservice.url.com refused
org.apache.http.conn.HttpHostConnectException: Connection to https://my.webservice.url.com refused
at com.eviware.soapui.impl.wsdl.support.http.SoapUIMultiThreadedHttpConnectionManager$SoapUIClientConnectionOperator.openConnection(SoapUIMultiThreadedHttpConnectionManager.java:321)
at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:561)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
at com.eviware.soapui.impl.wsdl.support.http.HttpClientSupport$Helper.execute(HttpClientSupport.java:236)
at com.eviware.soapui.impl.wsdl.support.http.HttpClientSupport.execute(HttpClientSupport.java:345)
at com.eviware.soapui.impl.wsdl.submit.transports.http.HttpClientRequestTransport.sendRequest(HttpClientRequestTransport.java:241)
at com.eviware.soapui.impl.wsdl.WsdlSubmit.run(WsdlSubmit.java:123)
at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)...

Caused by: java.net.ConnectException: Connection timed out: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
at java.net.PlainSocketImpl.connect(Unknown Source)... 
```

编辑：

这个网络服务是我的，但它在一个外部服务器中，我看到了我的班级 ColleagueService（不是我做的），它的注释是：

```
@WebService(serviceName="ColleagueServiceService")
@SOAPBinding(style = SOAPBinding.Style.RPC, use = SOAPBinding.Use.LITERAL, parameterStyle = SOAPBinding.ParameterStyle.WRAPPED)
public class ColleagueService { 
```

生成的 wsdl 我有这个：

```
<port binding="tns:ColleagueServiceBinding" name="ColleagueServicePort">
    <soap:address location="http://ECM01:80/services/ColleagueService"/>
</port> 
```

外部服务器（客户端）有一个 jboss 服务器和一个 apache http 服务器，http 服务器通过 ProxyPass 将所有请求重定向到路径 /services/ 到 jboss 服务器（jboss 服务器是主机 ECM01），无论如何 wsdl 是错误的，因为服务是 https 而在 wsdl 我有 http

任何人都可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T13:57:31.253

> 引起：java.net.UnknownHostException：ECM01

这是 WSDL 中指定的主机吗？寻找这样的部分：

```
<wsdl:port binding="tns:FooBinding" name="FooPort">
  <soap:address location="https://ECM01/FooService"/>
</wsdl:port> 
```

如果是这样，您将必须在端口上[设置端点](http://illegalargumentexception.blogspot.co.uk/2011/04/java-jax-ws-web-services-and-clients.html#ws_client)：

```
BindingProvider bindingProvider = (BindingProvider) port;
bindingProvider.getRequestContext()
    .put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, endpoint); 
```

这将是其他任务的补充，例如像[Anders R. Bystrup提到的提供](https://stackoverflow.com/users/687514/anders-r-bystrup)[代理配置](https://stackoverflow.com/questions/6447127/how-can-i-use-an-http-proxy-for-a-jax-ws-request-without-setting-a-system-wide-p)和（可能）[配置 SSL 客户端证书](https://stackoverflow.com/questions/875467/java-client-certificates-over-https-ssl)。

* * *

WSDL 不反映真实的服务端点是完全正常的。在我工作过的任何地方，都会使用已知的错误 URI（例如 localhost，其中所有内容都分布在不同的主机上。）客户端可以通过配置机制显式设置端点（请参阅上面的 JAX-WS 客户端代码。）这允许灵活性在开发过程中，并防止在从开发过渡到生产期间使用错误的主机。

也就是说，当使用自动生成的 WSDL 时，我*认为*SOAP 地址元素的生成方式是您的 JAX-WS 实现的实现细节。我不确定，因为我从来没有依赖过它。我会参考您的容器实现的文档。

# html - 将图像“粘贴”到页面右侧

> ID：13933051
> 
> 赞同：0
> 
> 时间：2012-12-18T12:30:14.447
> 
> 标签：html, css, image, position

我的最后一个问题不是很清楚，我会再试一次。

在我的 Tumblr 博客 (http://anti-standard.tumblr.com) 上，您可以看到一张贴在页面左侧的图片（图片上写着“ANTI STANDARD”）。但是，我希望将图像粘贴到页面的右侧。我怎样才能做到这一点？我有以下 CSS 代码：

```
.image-container1 {
    width:100%;
    position:absolute;
    float:right;
    right:0;
    clear:both;
}

.image-container2 {
    background:url('http://avare.nl/tumblr/as.png') no-repeat fixed;
    background-size:55px 500px;
    height:500px;
    width:55px;
} 
```

以下 HTML 代码位于“body”标签的正下方：

```
<div class="image-container1">
    <div class="image-container2">
    </div>    
</div> 
```

我希望你们能帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:35:19.177

`float:right`在后台添加`.image-container2`和删除固定

```
.image-container2 {
    background:url('http://avare.nl/tumblr/as.png') no-repeat;
    background-size:55px 500px;
    height:500px;
    width:55px;    float:right;
}​ 
```

**[演示](http://jsfiddle.net/SYshT/1/)**

或者以简单的方式这样做

**HTML**

```
<div class="image-container1">lorem ...</div> 
```

**CSS**

```
html, body{height:100%}
.image-container1 {
    width:100%;
    background:url('http://avare.nl/tumblr/as.png') no-repeat right top;
    background-size:55px 500px;
    height:100%
} 
```

​<strong> [DEMO](http://jsfiddle.net/SYshT/3/)

# javafx-2 - JavaFX - TabPane/Tab 如何使标签标题不可见？

> ID：13933053
> 
> 赞同：3
> 
> 时间：2012-12-18T12:30:19.153
> 
> 标签：javafx-2, javafx

我是 JavaFX 的新手，遇到了一些麻烦：

我有一个带有多个选项卡的 TabPane，我想让选项卡标题不可见。因此，用户不应通过单击标题来更改选项卡，但它将以与菜单不同的方式进行更改。

如何使此选项卡标题不可见/隐藏？这就是问题所在。我不想隐藏整个标签或禁用或类似的东西，只是标题。

或者也许你有另一个完全不同的想法，如何在 JavaFX 中解决这个问题。也许有另一个控件？？？

感谢您提供任何线索。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T12:42:28.483

如果您不使用`Tabs`，则不需要`TabPane`.

您可以只引入内容窗格列表并根据菜单命令切换它们。

您可以在下一个问题中找到代码示例：[如何在我的 javaFX 2.0 应用程序中实现 awt.CardLayout 的功能？](https://stackoverflow.com/questions/8309802/how-can-i-implement-the-functionality-of-awt-cardlayout-in-my-javafx-2-0-applica)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T15:04:10.597

我的研究结论：这在 JavaFX 中是不可能做到的。TabPane 标题可以位于控件的顶部、左侧、右侧和底部，但不能隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-25T00:10:38.817

您可以通过包装`TabPane`（`AnchorPane`根容器）并根据需要将 TabPane 的 topAnchor 设置为负数来实现这一点。

## Java代码：

```
...
AnchorPane.setTopAnchor(myTabPane, -29.0);
AnchorPane.setBottomAnchor(myTabPane, 0);
AnchorPane.setLeftAnchor(myTabPane, 0);
AnchorPane.setRightAnchor(myTabPane, 0);
... 
```

## 同样在 FXML 中：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.text.*?>
<?import javafx.scene.control.*?>
<?import java.lang.*?>
<?import javafx.scene.*?>
<?import javafx.scene.layout.*?>

<AnchorPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1">
   <children>
      <TabPane fx:id="myTabPane" prefHeight="200.0" prefWidth="200.0" tabClosingPolicy="UNAVAILABLE" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="-29.0">
        <tabs>
          <Tab fx:id="tab1" text="Tab 1">
            <content>
              <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="180.0" prefWidth="200.0">
                     <children>
                        <Label text="Tab 1" />
                        <Button layoutX="35.0" layoutY="2.0" mnemonicParsing="false" text="Go to Tab 2 (non-functional currently)" />
                     </children>
                  </AnchorPane>
            </content>
          </Tab>
          <Tab fx:id="tab2" text="Tab 2">
            <content>
              <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="180.0" prefWidth="200.0">
                     <children>
                        <Label text="Tab 2" />
                        <Button layoutX="35.0" layoutY="2.0" mnemonicParsing="false" text="Go to Tab 1 (non-functional currently)" />
                     </children>
                  </AnchorPane>
            </content>
          </Tab>
        </tabs>
      </TabPane>
   </children>
</AnchorPane> 
```

# windows-8 - 使用 Webview Windows 8 下载

> ID：13933054
> 
> 赞同：4
> 
> 时间：2012-12-18T12:30:21.910
> 
> 标签：windows-8, microsoft-metro, download

我真的被一个问题困住了。我想从 webview 下载 PDF/ZIP 格式的文件，但我在互联网上找不到任何解决方案/教程，我试图查看 webview 属性类。
我有一个网络视图：

```
WebView x:Name="webviewIntranet" Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" /> 
```

和我的方法：

```
public IntranetPage()
{
   webviewIntranet.Navigate(new Uri("http://www.testme.com"));
           this.InitializeComponent();
} 
```

我可以显示网页内容，但尝试下载/单击下载某些文件时没有任何反应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-25T19:20:00.657

首先阅读一些关于 WebView 控件的新功能 [http://blogs.windows.com/windows/b/appbuilder/archive/2013/07/17/what-s-new-in-webview-in-windows-8 -1.aspx](http://blogs.windows.com/windows/b/appbuilder/archive/2013/07/17/what-s-new-in-webview-in-windows-8-1.aspx)

如您所见，WebView 处理不同的浏览器事件：它不支持只显示网页，但会为它们触发 WebView.UnviewableContentIdentified 事件 [http://msdn.microsoft.com/en-us/library/windows/apps /windows.ui.xaml.controls.webview.unviewablecontentidentified.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.unviewablecontentidentified.aspx)

然后你可以使用文件关联将它扔给操作系统（或者通过uri对文件做你需要的事情......我希望）

```
void webView1_UnviewableContentIdentified(WebView sender, 
    WebViewUnviewableContentIdentifiedEventArgs args)
{
    Windows.Foundation.IAsyncOperation<bool> b = 
    Windows.System.Launcher.LaunchUriAsync(args.Uri);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T07:14:16.300

`WebView`无法下载文件。微软曾试图不成为`WebView`IE 浏览器的替代品。请参阅 MSDN 论坛的[答案](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/af09043a-61e4-4899-b3c2-303cf0fe5baa/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T09:44:30.770

我认为你可以做到这一点，但有相当多的人工干预。使用诸如[BackgroundDownloader](http://msdn.microsoft.com/en-gb/library/windows/apps/xaml/windows.networking.backgroundtransfer.backgrounddownloader.aspx)之类的东西，您可以下载具有 URI 的文件。您是否还想拦截 Web 视图导航，那么有一些解决方法；例如：[这里](https://stackoverflow.com/questions/12671047/how-do-i-capture-a-navigation-event-in-a-webview-on-windows-8)

# php - php cURL LOGIN 不起作用

> ID：13933059
> 
> 赞同：-2
> 
> 时间：2012-12-18T12:30:36.753
> 
> 标签：php, curl, login, authorization

现在我正在尝试使用 PHP 和 CURL 登录我的帐户，但我仍然不确定为什么不起作用。

我试图登录的页面是：[http](http://lardi-trans.com/index.jsp) ://lardi-trans.com/index.jsp 脚本执行后，我在未经授权的情况下获得了相同的页面。提前致谢！

```
<?php

$url = "http://lardi-trans.com/log/index.jsp";
$referer = "http://lardi-trans.com/index.jsp";
$user_agent = "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:17.0) Gecko/20100101 Firefox/17.0";
$post = "action=/log/login.jsp&log=MYLOGIN&passwd=MYPASSWORD&enter=enter&onlog=%D0%92%D0%BE%D0%B9%D1%82%D0%B8";
$header [] = "Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
$header [] = "Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3";
$header [] = "Accept-Encoding:gzip,deflate";
$header [] = "Accept-Language:en-US,en;q=0.5";
$user_cookie = "cookies.txt";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url ); 
curl_setopt($ch, CURLOPT_FAILONERROR, 1);
curl_setopt($ch, CURLOPT_HEADER, 1); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_TIMEOUT, 3);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_REFERER, $referer);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header );
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_ENCODING, "identity");
curl_setopt($ch, CURLOPT_COOKIEFILE, $user_cookie);
curl_setopt($ch, CURLOPT_COOKIEJAR, $user_cookie);
curl_setopt($ch, CURLOPT_FRESH_CONNECT, 1);
curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
$page = curl_exec($ch);
curl_close($ch);

echo $page;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:41:01.603

您应该将 $url 变量设置为登录表单操作的值 - [http://lardi-trans.com/log/login.jsp](http://lardi-trans.com/log/login.jsp)

# c# - CRM 4.0 - FetchXML 从相关实体中检索数据

> ID：13933060
> 
> 赞同：0
> 
> 时间：2012-12-18T12:30:37.990
> 
> 标签：c#, asp.net, dynamics-crm, crm

我正在尝试使用 FetchXML 来提取具有“入门年”相关实体的课程列表。我想做的只是为最近一年的每门课程返回一条记录（可以返回多门课程）（例如，我希望它从 2012 年、2013 年、2014 年中选择最后一年 - 所以在这种情况下是 2014 年） . 所以我目前有：

```
<fetch mapping="logical" distinct="true">
    <entity name="course">
        <all-attributes/>
        <order attribute="name" />
        <link-entity name="course_entryyear" from="courseid" to="courseid">
            <link-entity name="entryyear" from="entryyearid" to="entryyearid">
                <attribute name="year" />
            </link-entity>
        </link-entity>
    </entity>
</fetch> 
```

这是否可以在 FetchXML 中完成，如果可以，我该如何修改上述内容？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:09:18.477

将 count="1" 和内部连接与一些排序一起添加到链接实体中怎么样：

所以它看起来像：

```
<fetch mapping="logical" distinct="true">
    <entity name="course">
        <all-attributes/>
        <order attribute="name" />
        <link-entity name="course_entryyear" from="courseid" to="courseid" link-type="inner">
            <link-entity name="entryyear" from="entryyearid" to="entryyearid" link-type="inner" count="1">
                <attribute name="year" />
                <order attribute="year" descending="true"/>
            </link-entity>
        </link-entity>
    </entity>
</fetch> 
```

根据您显示课程列表的方式，您可能希望将“course-entryyear”的链接类型从**inner**更改为**outer**，以便显示所有课程，即使它们尚未提供服务。

# android - MediaRecorder 启动失败 -2147483648

> ID：13933065
> 
> 赞同：2
> 
> 时间：2012-12-18T12:30:49.540
> 
> 标签：android, mediarecorder

我打算用这个应用程序记录通话。但是当我将 audioSource 设置为 MediaRecorder.AudioSource.VOICE_CALL 时，它会给出一个错误，但是当 audioSource 设置为 MediaRecorder.AudioSource.MIC 时，它工作得非常好。我不确定问题出在哪里。问题的logcat如下。非常感谢任何形式的帮助。谢谢。

```
public class IncomingCallReceiver extends BroadcastReceiver {
private MediaRecorder mRecorder;
@Override
public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();
        if(null == bundle)
                return;
        String state = bundle.getString(TelephonyManager.EXTRA_STATE);
        if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))
        {
        }
        else if (state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_OFFHOOK)){
            Log.i("TelephonyManager", "Call picked up");
            mRecorder = new MediaRecorder();
            mRecorder.setAudioSource(MediaRecorder.AudioSource.VOICE_CALL);
            mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
            mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
            mRecorder.setAudioEncodingBitRate(16);
            mRecorder.setAudioSamplingRate(44100);
            mRecorder.setOutputFile("/sdcard/Recording/callrecord.mp4");
            try{
                mRecorder.prepare();
            }
            catch(IOException e){
            }
            mRecorder.start();
            Log.i("StartRecordingCall", "Recording Call end");
        }
        else if (state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_IDLE)){
            Log.i("TelephonyManager", "Call hunged up");
            mRecorder.stop();
            mRecorder.release();
            mRecorder=null;
        }
} 
```

/

```
 12-18 20:15:56.755: E/MediaRecorder(1577): start failed: -2147483648
    12-18 20:15:56.755: D/AndroidRuntime(1577): Shutting down VM
    12-18 20:15:56.755: W/dalvikvm(1577): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
    12-18 20:15:56.765: E/AndroidRuntime(1577): FATAL EXCEPTION: main
    12-18 20:15:56.765: E/AndroidRuntime(1577): java.lang.RuntimeException: start failed.
    12-18 20:15:56.765: E/AndroidRuntime(1577):     at android.media.MediaRecorder.start(Native Method)
    12-18 20:15:56.765: E/AndroidRuntime(1577):     at com.example.callrecorder.MainActivity.startRecording(MainActivity.java:447)
    12-18 20:15:56.765: E/AndroidRuntime(1577):     at com.example.callrecorder.MainActivity.onClick(MainActivity.java:279)
    12-18 20:15:56.765: E/AndroidRuntime(1577):     at android.view.View.performClick(View.java:3534)
    12-18 20:15:56.765: E/AndroidRuntime(1577):     at android.view.View$PerformClick.run(View.java:14263)
    12-18 20:15:56.765: E/AndroidRuntime(1577):     at android.os.Handler.handleCallback(Handler.java:605)
    12-18 20:15:56.765: E/AndroidRuntime(1577):     at android.os.Handler.dispatchMessage(Handler.java:92)
    12-18 20:15:56.765: E/AndroidRuntime(1577):     at android.os.Looper.loop(Looper.java:137)
    12-18 20:15:56.765: E/AndroidRuntime(1577):     at android.app.ActivityThread.main(ActivityThread.java:4441)
    12-18 20:15:56.765: E/AndroidRuntime(1577):     at java.lang.reflect.Method.invokeNative(Native Method)
    12-18 20:15:56.765: E/AndroidRuntime(1577):     at java.lang.reflect.Method.invoke(Method.java:511)
    12-18 20:15:56.765: E/AndroidRuntime(1577):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    12-18 20:15:56.765: E/AndroidRuntime(1577):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    12-18 20:15:56.765: E/AndroidRuntime(1577):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T19:26:34.870

您运行应用程序的设备可能根本不支持语音通话录音，或者它不喜欢您尝试设置的一个或多个参数。
例如，您可以尝试使用 8000 Hz 采样率而不是 44100 Hz（无论如何，44100 Hz 对 AMR-NB 毫无意义）并完全摆脱对的调用`setAudioEncodingBitRate`。

您的代码的另一个潜在问题是`MediaRecorder`您的对象中有实例`BroadcastReceiver`，并且没有将其声明为静态的。以下是 Android 文档中关于 BroadcastReceivers 的内容：

> BroadcastReceiver 对象仅在调用 onReceive(Context, Intent) 期间有效。一旦您的代码从此函数返回，系统就会认为该对象已完成且不再处于活动状态。

换句话说，`MediaRecorder`当您收到一个包含广播的实例时，您希望在那里的实例`EXTRA_STATE_IDLE`实际上可能不再存在，因为您`BroadcastReceiver`与创建`MediaRecorder`.

# php - Want to manipulate array in response of curl request

> ID：13933068
> 
> 赞同：0
> 
> 时间：2012-12-18T12:30:55.693
> 
> 标签：php, curl

In my application i am making **curl request** and in response getting an array, but somehow not able to **manipulate** that array also **is_array()** not recognize that as an array.

code for curl request is :

```
$curls="http://localhost/myapp/alertentryxml.php?".$compurl; 

           $ch = curl_init();
           curl_setopt($ch,CURLOPT_URL,$curls);
           curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
           $store = curl_exec($ch); 
```

and generating an multidimensional array from **alertentryxml.php** with

```
print_r($data); 
```

**$data** is multidimensional array.

when i checked response in above **$store** variable, it shows an array in response but not working as a array. **What i have done wrong here? is it possible to send array as a response or not?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:35:18.057

您不能只做 a`print_r($data)`并期望 PHP 能够将其作为数组进行交互，它只是文本。查找[print_r](http://php.net/manual/en/function.print-r.php)的作用：

> 打印有关变量的人类可读信息

你应该做的是：

alertentryxml.php

```
echo json_encode($data); 
```

然后在您的 curl 请求中：

```
$store = json_decode(curl_exec($ch)); 
```

在这种情况下，我选择了 JSON，因为它是我个人的偏好，但您也可以将数据作为 XML 或任何其他格式发送，只要您以与另一端的编码相同的方式对其进行解码。

# android - Error with HttpResponse in Android for a web-service

> ID：13933070
> 
> 赞同：0
> 
> 时间：2012-12-18T12:30:56.677
> 
> 标签：android, web-services

I am aware that there has been a lot of questions regarding this but I'm confused and unable to find a solution for my problem.

I have a web service in php which read data from mysql server. The following code is the web-service script.

```
<?php
$username = "XXXXX";
$password = "XXXXX";
$hostname = "localhost"; 

$response=array();

//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password) 
or die("Unable to connect to MySQL");

//select a database to work with
$selected = mysql_select_db("test",$dbhandle) 
or die("Could not select test");

//execute the SQL query and return records
$result = mysql_query("SELECT name, country FROM android");

$response["infos"] = array();

while ($row = mysql_fetch_assoc($result)) {

    $info = array();
    $info["name"]=$row["name"];
    $info["country"]=$row["country"];

    echo json_encode($info);
    }

 //close the connection  
 mysql_close($dbhandle); 
  ?> 
```

This gives me the following output in the web-browser with this "[http://localhost/test.php](http://localhost/test.php)" {"name":"taz","country":"aus"}{"name":"fufu","country":"tutu"}{"name":"chikaka","country":"aceVentura"}

I have the following class in my android application. Very simple class but it returns an exception error on the HttpResponse execution.

```
 public static final String URL = "http://192.168.0.5//test.php";

 public static String connect(){

    try{
        HttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(URL);
        HttpResponse response = httpClient.execute(httpGet);

        String result = "";
        InputStream in = response.getEntity().getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        StringBuilder str = new StringBuilder();
        String line = null;
        while((line = reader.readLine()) != null){
            str.append(line + "\n");
        }
        in.close();
        result = str.toString();

        return result;
     } catch (Exception e) {
        return "Error: " + e.getMessage();
     }
  } 
```

This method is called in the mainActivity class to output the response. Could you give me some ideas what I'm doing wrong.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:43:51.960

确保在读取 InputStream 之前先读取响应状态

```
int statusCode = response.getStatusLine().getStatusCode();
if (statusCode == HttpStatus.SC_OK) {
    HttpEntity entity = response.getEntity();
    if (entity != null) {
        return entity.getContent();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T00:26:16.430

对不起，我已经找到了解决方案。我真是太愚蠢了。我移动了位置，并没有意识到服务器地址发生了变化。

不过还是谢谢你的帮助

# php - 表单未提交 php 和 html

> ID：13933071
> 
> 赞同：0
> 
> 时间：2012-12-18T12:31:08.703
> 
> 标签：php, html

每个人..

尝试提交表单.. 表单和 php 代码在同一个文件 index.php 中

```
if(isset($_POST['post_form'])) {
    echo "ISSET";

    $post_sender=$id;
    $post_reciever=$id2;
    $post_cont=$_POST['news_text'];
    $post_cont=htmlentities($post_cont);
    $post_cont=mysql_real_escape_string($post_cont);

    $post_sql=mysql_query("INSERT INTO wall_posts (from, to, content, date) VALUES ('$post_sender','$post_reciever','$post_cont',now())") or die(mysql_error());

    }else{
        echo "NOT SET";
    } 
```

html表单

```
<form  method='POST' action='index.php' enctype='multipart/form-data' id='news_form' name='post_form' >
<textarea id='news_text' name='news_text' >type here..........</textarea>

<input type='submit' id='wall_post_btn' name='wall_post_btn' value='submit'>

</form> 
```

我的错在哪里..???

**代码没有错误..文件本身已损坏..刚刚在一个新的PHP文件中进行了测试...工作得很好...谢谢大家..**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:36:15.193

`post_form`是表格的名称。您必须检查提交按钮，`wall_post_btn`。

```
if(isset($_POST['wall_post_btn'])) {
  // entire code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:34:41.403

$_POST['wall_post_btn']。提交的名称，而不是表单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:36:11.233

你不应该使用 mysql，因为它已经被贬值了。查看 mysqli 或 PDO

这：

```
"INSERT INTO wall_posts (from, to, content, date) VALUES ('$post_sender','$post_reciever','$post_cont',now())" 
```

应该：

```
"INSERT INTO wall_posts (from, to, content, date) VALUES ('".$post_sender."','".$post_reciever."','".$post_cont."',now())" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:37:54.540

有两个问题：

1.  您需要连接到您的 mysql 服务器才能使用 mysql_real_...
2.  mysql_real_... 已弃用，正在从 php 中删除

看看这里的替代品：http: [//php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T12:38:43.350

问题是您正在检查 中存在的表单的名称，该名称`$_POST`从不存在...

您应该测试的是提交按钮的名称，例如：

```
if(isset($_POST['wall_post_btn'])) { 
```

接下来您可以使用一行来清理输入：

```
$post_cont= mysql_real_escape_string(htmlentities($_POST['news_text'])); 
```

最后一个：开始使用 PDO 和准备好的语句或至少现在不推荐使用的`mysqli_*`函数......`mysql_*`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T12:44:46.307

使用此代码工作正常

```
<?php
if($_SERVER['REQUEST_METHOD']=="POST") {
   echo "ISSET";
    $post_sender=$id;
    $post_reciever=$id2;
    $post_cont=$_POST['news_text'];
    $post_cont=htmlentities($post_cont);
    $post_cont=mysql_real_escape_string($post_cont);

    $post_sql=mysql_query("INSERT INTO wall_posts (from, to, content, date) VALUES ('$post_sender','$post_reciever','$post_cont',now())") or die(mysql_error());

    }else{
        echo "NOT SET";
    }
?>
<form  method='post' action='index.php' enctype='multipart/form-data' id='news_form' name='post_form' >
<textarea id='news_text' name='news_text' >type here..........</textarea>

<input type='submit' id='wall_post_btn' name='wall_post_btn' value='submit'>

</form> 
```

# javascript - jQuery .attr('onclick') 函数何时返回事件对象？

> ID：13933073
> 
> 赞同：0
> 
> 时间：2012-12-18T12:31:09.340
> 
> 标签：javascript, jquery, attr

我只是在 FireBug 中调试 jQuery，并想知道返回值

```
$('.a-selector').attr('onclick'); 
```

原来是一个`onclick(event)`，但我之前读过一些代码，作者只是这样使用它：

```
$('.a-selector').attr('onclick').replace(..., ...); 
```

这意味着它可以被视为一个字符串对象。但是当我这样使用时它会报错。

我的 jQuery 版本是 1.5.2。所以我想知道 jQuery 何时更改 API 以及更改`onclick`HTML 中定义的事件的最佳方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:20:15.580

> 当jQuery`.attr('onclick')`函数返回一个事件对象？

在 jQuery < 1.6 中。这是因为在 1.6 之前，`.attr()`在它认为合适的地方混合了检索属性和属性，较新的版本删除了那层巫术，现在有适当的方法来检索属性 ( [`.attr`](http://api.jquery.com/attr/)) 和属性 ( [`.prop`](http://api.jquery.com/prop/))。

这是一个演示上述内容的[小提琴。](http://jsfiddle.net/taL69/)

附言。顺便说一句，它不返回事件对象，而是作为事件处理程序的函数对象。`=]`

* * *

此外，还有两个注意事项：您应该始终将您的 jquery 升级到可行的最新版本（当前为 1.8.3），它具有更多功能、更好的性能和许多错误修复。

当您拥有 jQuery 时，您不应该真正使用`onclick`s，这违反了 Web 2.0 分离结构 (html) 和行为 (js) 的标准 - jQuery 本身提供了附加方法的跨浏览器处理程序[`.on()`](http://api.jquery.com/on/)（对于 jQuery 1.7+ )，和//[`.bind`](http://api.jquery.com/bind/)对于旧版本。[`.delegate`](http://api.jquery.com/delegate/)[`.live`](http://api.jquery.com/live/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:34:56.260

我假设您想更改某些元素的 onclick 属性的值。

```
$('.a-selector').attr('onclick',''); // leave 2nd parameter blank if you want to remove its value 
```

或者

```
$('.a-selector').attr('onclick','myfunc()'); 
```

＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃ 编辑

您可以如下定义您的功能：

```
<script>
    function myfunc(){
        // Do stuff here
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:33:41.403

您是否有可能重置点击事件？

```
$('.a-selector').unbind('click').click(function() {
    // new function
}); 
```

替换 javascript 代码中的文本通常不是 javascript 应该做的。我认为可能有更好的解决方案。

# spring - Add header elements to SOAP message

> ID：13933076
> 
> 赞同：3
> 
> 时间：2012-12-18T12:31:25.587
> 
> 标签：spring, soap, cxf

I'm trying to find a way to add header elements to a SOAP message. If I use `@WebParam` with `header` set to `true` then it works fine, that parameter is nicely in `<soap:header>`. However, the requires adding a bunch of parameters to my API which is hardly an option.

At first view interceptors do not appear to be possible so I was looking at SOAPHandlers but it is so difficult to find clear information about this.

This is my spring config:

```
<bean id="testWebservice" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean" >
    <property name="serviceInterface" value="com...TestWebService"/>
    <property name="wsdlDocumentUrl" value="http://localhost:9062/test-ws/remoting/test?wsdl"/>
    <property name="serviceName" value="TestWebService"/>
    <property name="namespaceUri" value="http://test.com"/>
    <property name="portName" value="TestServicePort"/>
    <property name="lookupServiceOnStartup" value="false"/>
    <property name="handlerResolver" ref="myResolver"/>
</bean>

<bean id="myResolver" class="com...TestHandlerResolver" /> 
```

My Handler (chained in the TestHandlerResolver):

```
public class TestHandler implements SOAPHandler<SOAPMessageContext> {

    @Override
    public void close(MessageContext context) {
    }

    @Override
    public Set<QName> getHeaders() {
        return null;
    }

    @Override
    public boolean handleFault(SOAPMessageContext context) {
        return true;
    }

    @Override
    public boolean handleMessage(SOAPMessageContext context) {
        if (Boolean.TRUE.equals(context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY))) {

            try {
                List<Header> headers = new ArrayList<Header>();
                Header dummyHeader;
                dummyHeader = new Header(new QName("dummy"), "decapitated", new JAXBDataBinding(String.class));
                headers.add(dummyHeader);
                context.put(Header.HEADER_LIST, headers);
            } catch (Exception e) {
                throw new RuntimeException(e);
            }
        }
        return true;
    }
} 
```

The problem is that I'm a bit at a loss. Is using handler the right way to do this and if so can you give or point me to a nice example? Is there a way to do it with interceptors? Or am I completely of the target here...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:58:34.037

让它像这样工作：

```
 @Override
     public boolean handleMessage(SOAPMessageContext context) {

            try {
                SOAPMessage msg = context.getMessage();
                SOAPPart part = msg.getSOAPPart();
                SOAPEnvelope envelope = part.getEnvelope();

                SOAPHeader header = envelope.getHeader();

                if (Boolean.TRUE.equals(context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY))) {
                    if (header == null) {
                        header = envelope.addHeader();
                    }
                    this.addToHeader(envelope, header, "MessageID", UUID.randomUUID().toString());
    ...
                } else {
                    if (header != null) {
                        Iterator<?> i = header.getChildElements();
                        while (i.hasNext()) {
                            SOAPElement el = (SOAPElement) i.next();
                            String tagName = el.getLocalName();
                            String value = el.getValue();
    ...
                        }
                    }

                }
            } catch (Exception e) {
...

            }
            return true;
        }

        private void addToHeader(SOAPEnvelope envelope, SOAPHeader header, String key, String value) throws SOAPException {
            Name qname = envelope.createName(key, "ns1", "http://ecom.bnpp.com");
            SOAPHeaderElement element = header.addHeaderElement(qname);
            element.addTextNode(value);
        } 
```

# java - Android AlertDialog setOnDismissListener for API lower than 17

> ID：13933077
> 
> 赞同：30
> 
> 时间：2012-12-18T12:31:29.640
> 
> 标签：java, android, dialog

I created an AlertDialog:

```
private CharSequence[] _items = { "item1", "item2", "item3", "item4",
"item5", "item6", "item7" };

AlertDialog.Builder daysBuilder = new AlertDialog.Builder(this);
    daysBuilder.setTitle("SomeCaption");

    daysBuilder.setMultiChoiceItems(_items,new Boolean[] { false, true, false, 
false false false, true }, SetListener);
    daysBuilder.setPositiveButton("OK", OKListener);
    daysBuilder.setNegativeButton("Cancel", CancelListener);

    AlertDialog alert = daysBuilder.create();
    alert.show();` 
```

Through the statement "`new Boolean[] { false, true, false false false false, true }`" the items in the dialog get checked/unchecked by default.

When I open the dialog, change the selection of the items but then dismiss (by pressing cancel or the back-button of the device) the dialog gets dismissed. So far so good.

But when I reopen the dialog, the items have the checked/unchecked state of the previous changes from the last opening of the dialog.

But when the dialog was dismissed at the first opening, I want to have the items checked/unchecked state like when I created the dialog (`new Boolean[] { false, true, false false false false, true }`).

So basically I need an opportunity to get notified when the dialog gets dissmissed so I can then reset the state of the items.

I tried it with the setOnDismissListener for the dialog object. Unfortunately this is just available in API 17.

setOnDismissListener worked perfect for me (exactly what I need) in the emulator (API 17) but not on my device (Android 4.1 => API 16)

Is there something similar in API 16?

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-12-18T15:01:10.453

问题是您使用`setOnDismissListener`的是`AlertDialog.Builder`. 这是在 API 级别 17 中引入的，`setOnDismissListener`它`AlertDialog`本身是从 API 级别 1 开始的。

```
AlertDialog alert = daysBuilder.create();
alert.setOndismissListener(yourdismisslistener);
alert.show();` 
```

# php - Check if user is admin or normal user? PHP $_session and MYSQL

> ID：13933078
> 
> 赞同：3
> 
> 时间：2012-12-18T12:31:31.157
> 
> 标签：php, mysql

I want to show different content if a user is admin(2), or noarmal user(1). Login works fine, but i don't know hot to check if a user have 'usertype' 1 or 2? I want to use PHP $_SESSION.

This is my login form:

```
<!-- Log in -->
<form method="post" action="authentication.php">
  <input type="text" name="userid" placeholder="E-mail" required/>
  <input type="password" name="password" placeholder="Password" required/><br>
  <button type="submit" name="submit" class="btn">Log in</button>
</form> 
```

This is my authentication.php:

```
session_start();
if(isset($_POST['userid']) && isset($_POST['password'])){
$userid     = $_POST['userid'];
$password   = $_POST['password'];

$dbc        = mysqli_connect('localhost', 'root', '', 'news');
if(!$dbc){
echo "Cannot connect to database";
exit;
}

$query      = "SELECT * FROM users_tbl WHERE email = '$userid' AND password = sha1('$password')";
$result     = $dbc->query($query);
if($result->num_rows)
{
$_SESSION['valid_user'] = $userid;
}
$dbc->close();
}
if(isset($_SESSION['valid_user'])){
header("location:prefs.php");
}else{
header("location:login.php");
echo 'Error';
} 
```

This is what i have tried:

```
 <?php 

    mysql_connect('localhost', 'root', '');
    mysql_select_db('news');

    $sql = "SELECT users_tbl.usertype FROM users_tbl";
    $result = mysql_query($sql); 
    $user = mysql_fetch_array($result);
    $_SESSION['user'] = $user['user']; 
    $_SESSION['usertype'] = $user['usertype'];        

    if($_SESSION['user']['usertype'] == 2)
    {?>
    <h1>Only admin stuff</h1>

    <$? }//Endif user is admin(2) ?> 
```

Maybe instead of doing the query for everytime to check if a user is admin, i could save a $_SESSION['usertype'], and then use this to check if a user is 2, for admin, maybe when a user is loggin in? But i do not know how to do this. I'm quite new at this.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:34:49.530

尝试这个

```
 if($_SESSION['usertype'] == 2)
{
   //do stuff here 
}
 if ($_SESSION['usertype']) == 1)

 {
 //do stuff here 
 } 
```

编辑：如果您不想写这么多东西，而只想在其中一个用户中包含管理内容，请执行此操作

```
 if ($_SESSION['usertype']) == 1 or $_SESSION['usertype']) == 2)

   {
              //do stuff here for them both admin and users
         if($_SESSION['usertype'] == 2 ) 
                                   {
                                  //do extra stuff here for only admin 
                                    }
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-15T06:01:18.977

我意识到这是一个老问题，但是我上周一直在网上搜索这个问题的答案，因为我遇到了类似的问题。“echo_Me”有答案，但我看到一些不正确的语法。在本地服务器上玩弄它之后，这就是我所做的。

```
if($_SESSION['usertype']) == 1 or $_SESSION['usertype']) ==2)
//> start           end <                          end <    < end
 {
    //do stuff here for them both admin and users
    if($_SESSION['usertype'] == 2)
     {
      //Do other stuff for usertype 2
     }
  } 
```

你有更多的结束括号然后你开始了。当我为我的网站运行登录脚本时，我设置了我需要的所有会话变量。因此，如果我需要一个会话变量，我将如何处理它：

```
if($_SESSION['user']['usertype'] == 1 OR $_SESSION['user']['usertype'] == 2) { ?>
// Do Stuff for normal user and admin
    <?php } if($_SESSION['user']['usertype'] == 2) { ?>
      // DO Stuff for admin only
    <?php } ?> 
```

如您所见，第一个 if 语句只有一组括号。实际上，您可以删除一些 php 代码，然后只执行常规的 html/css 标记，然后为 2 的用户类型执行 if 语句以供管理员使用。

```
<!-- HTML Markup for both Admin and Regular Users Goes Here above if statement -->
<?php if($_SESSION['user']['usertype'] == 2 { ?>
  // Markup for Admin only
<?php } ?> 
```

另外，我建议不要在会话变量中设置密码。在那个代码中，你可能没有这样做，我只是不熟悉 mysqli，因为我使用 PDO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:44:25.980

尝试将具有**用户类型**的列添加到该表。从表中获取数据时检查该列的值。如果值为**admin**，则显示文本，否则不显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:35:39.213

您可以使用会话变量保存您的用户类型

登录后，您需要使用用户类型 1 或 2 检查 db，并将该变量与会话变量（如 $_SESSION['user_type']）一起存储。

因此，您可以在此基础上进行跟踪。

# sql - Rails / Postgres: “must appear in the GROUP BY clause or be used in an aggregate function”

> ID：13933087
> 
> 赞同：4
> 
> 时间：2012-12-18T12:31:49.230
> 
> 标签：sql, ruby-on-rails, ruby, postgresql, heroku

I'm using this method:

```
 def self.lines_price_report(n)
    Income.group('date(filled_at)').having("date(filled_at) > ?", Date.today - n).sum(:lines_price)
  end 
```

I'm getting this error in Heroku:

```
PG::Error: ERROR:  column "incomes.filled_at" must appear in the GROUP BY clause 
or be used in an aggregate function 
```

How can I fix this? Thank you.

**Executed query:**

```
SELECT SUM("incomes"."lines_price") AS sum_lines_price, date(filled_at)
AS date_filled_at FROM "incomes"
HAVING (date(filled_at) > '2012-12-04')
GROUP BY date(filled_at) ORDER BY filled_at ASC 
```

**Expected result**

```
[["2012-12-04", SUM_FOR_DATE], ["2012-12-05", SUM_FOR_DATE], ...] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T12:56:33.270

您的错误是在默认范围内按顺序使用 fill_at 。

您可以使用 unscoped 修复它以消除默认范围：

```
Income.unscoped
 .group('date(filled_at)')
 .having("date(filled_at) > ?", Date.today - n)
 .sum(:lines_price) 
```

或者

```
Income.unscoped
   .group('date(filled_at)')
   .having("date(filled_at) > ?", Date.today - n)
   .sum(:lines_price)
   .order('date(filled_at) ASC') 
```

但我认为最好使用 where 而不是拥有

```
Income.unscoped
  .where("date(filled_at) > TIMESTAMP ?", Date.today - n)
  .group('date(filled_at)')
  .sum(:lines_price)
  .order('date(filled_at) ASC') 
```

[SQLFiddle](http://www.sqlfiddle.com/#!1/af15e/12)

你必须小心使用 TIMESTAMP 因为 2012-12-04 将变为 2012-12-04 00:00:00 所以如果你不希望这一天在结果中使用 Date.today - (n - 1)

如果您在filled_at 列上创建索引

```
 create index incomes_filled_at on incomes(filled_at); 
```

移民：

```
 add_index :incomes, :filled_at 
```

而且你有很多数据在这个表索引中会用到过滤。所以查询应该快得多。

因此，只需编写两者并测试哪个更快（如果没有，则必须在filled_at 上创建索引）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T12:41:18.280

我想这是因为您`date(filled_at)`在 GROUP BY 中使用但只是`filled at`在 ORDER 中使用。因为我猜 order 是从默认范围中获取的，所以您需要将其覆盖为`reorder`. 我会建议：

```
Income.sum(:lines_price).
    group('date(filled_at)').
    having("date(filled_at) > ?", Date.today - n).
    reorder("date(filled_at) ASC") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T22:32:45.757

当你想在 PostgreSQL 上使用 Group By 时，在 group by 上应该需要 select 选项。

```
Income.select('filled_at').group('date(filled_at)').having("date(filled_at) > ?", Date.today - n).sum(:lines_price) 
```

# tooltip - Will a tooltip work, when an control is in non-visible mode

> ID：13933093
> 
> 赞同：-1
> 
> 时间：2012-12-18T12:32:19.220
> 
> 标签：tooltip

I have a basic question on tooltip. Will a tooltip work if a control say for ex: textbox is set as in-visible mode and a mouse by mistake moved over the invisible textbox. [ understood tooltip will still work if the text box is in non-editable mode]

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:05:57.157

这取决于您的工具包。大多数工具包会禁用无敌元素的工具提示，因为没有必要显示它们。

# c# - 在 C# 中运行终端命令的后端脚本 - 从哪里开始

> ID：13933096
> 
> 赞同：2
> 
> 时间：2012-12-18T12:32:38.393
> 
> 标签：c#, php, .net, terminal

我在 php 中编写了一个脚本，用于从 html 生成 pdf。基本上它是 html 字符串，将其保存为 .html 文件，最后在 phantomjs 中呈现页面，并使用 imagemagick 将 pdf 连接到一个文件中。现在我需要让它为企业人员工作，这意味着将其重写为 C# 并使其可在 MS 服务器上运行。我从来没有做过任何 C# 编程，也没有使用过 .net、asp 等，所以我需要一些资源如何以及从哪里开始。我应该使用什么作为服务器，如何设置它，然后如何在 C# 中为 web 编写代码。

这是我的 php 脚本：

```
<?php
    function curPageURL() {
        $pageURL = 'http';
        if (isset($_SERVER["HTTPS"]) && $_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
            $pageURL .= "://";
        if ($_SERVER["SERVER_PORT"] != "80") {
            $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
        } else {
            $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
        }
        return $pageURL;
    }

    $currentURL  = curPageURL();
    $break       = explode('/', $currentURL);
    $currentURL  = str_replace($break[count($break) - 1], '', $currentURL); 

    $cmd         = '';
    $phantomOut  = array();
    //name of the created single PDF file
    $out         = '-exported'.microtime().'.';
    //path were temporary pdf files will be created
    $outputPath  = dirname(__FILE__);
    //command to run phantomjs in console/terminal
    $phantomPath = 'phantomjs';

    if(isset($_POST['html'])){
        $html        = json_decode($_POST['html'], true);
        $out         = $range.$out.'pdf';        
        $l           = 0;        

        $myFile = $outputPath."/printHtml".microtime().".html";
        $fh     = fopen($myFile, 'w');

        //check if file is writable
        if(is_writable($myFile)){
            fwrite($fh, $html[$i]['html']);
            fclose($fh);
            $myFile = str_replace($outputPath.'/', '', $myFile);
        } else {
            echo '{"success": false, "msg": "Can\'t create or read file."}';
            return 0;
        }

        //check if phantomjs is installed and reachable
        exec($phantomPath.' -v', $phantomOut);
        if (empty($phantomOut)){
            echo '{"success": false, "msg": "PhantomJS not installed or not reachable."}';
            return 0;
        }

        $phantomOut = array();

        //run PhantomJs with parameters : temporary html filenames sent, format of the page and page orientation
        $command = $phantomPath.' '.$outputPath.'/render.js "'.$myFile.'" "'.$currentURL.'"';

        exec($command, $phantomOut);

        //delete temp html file
        unlink($myFile[$i]);

        if (file_exists($phantomOut[0]) && filesize($phantomOut[0]) > 0){
            //return url of the created file
            echo '{"success": true, "path": "'.$outputPath.'/'.$phantomOut[0].'"}';            
        } else {
            echo '{"success": false, "msg": "There was some problem creating the file"}';
        }
    } else {
        echo '{"success": false, "msg": "Error in request data."}'; 
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:51:56.707

.NET 中有很多选项可以实现您想要做的事情。

如果您对 .NET 没有任何经验，我建议您做一个教程来帮助您入门。在 C# .NET 中开发 Web 应用程序非常简单。只需谷歌 ASP.NET C# 教程。在您在 .NET 中完成第一个 Web 应用程序并希望使用库将 HTML 转换为 PDF 后，您可以查看[这篇文章](https://stackoverflow.com/questions/564650/convert-html-to-pdf-in-net)，您会发现几个选项。

只是为了帮助你更多，我建议你做的第一件事是下载一个免费版本的 Visual Studio，如果你还没有安装它。Visual Studio 是一个完整的 IDE，您在开发时不需要服务器，因为它带有自己的网络服务器，所以当您编写一些代码时，您只需单击“运行”按钮，它就会被执行。

最后，当您开发应用程序时，您可以使用我不推荐的[Mono Project在 Linux 服务器上发布它。](http://www.mono-project.com/Main_Page)或者您可以将它安装在 Windows 服务器（无论您拥有什么版本）中，微软中的 Web 服务器称为 IIS，因此您将使用 IIS 代替 Apache，配置起来也非常简单。

希望这可以帮助你

# javascript - Javascript - return dragged image back to its original location

> ID：13933097
> 
> 赞同：0
> 
> 时间：2012-12-18T12:32:44.183
> 
> 标签：javascript, html, html5-video

I am using the following code to drag images into an area of the screen. I want to know, is there a code that I can use to send the image back to its original location, or at least back to its original div. I need to do this, because after a certain time (lets just say 100s) I need a particular image to go back. So lets say I drag both images into the area, after 100s I want the first image back to its original location

```
<!DOCTYPE HTML>
<html>
<head>
<script>
function allowDrop(ev)
{
   ev.preventDefault();
}

function drag(ev)
{
   ev.dataTransfer.setData("Text",ev.target.id);
}

function drop(ev)
{
   ev.preventDefault();
   var data=ev.dataTransfer.getData("Text");
   ev.target.appendChild(document.getElementById(data));
}
</script>
</head>
<body>
   <div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
   <img id="drag1" src="img_logo.gif" draggable="true" ondragstart="drag(event)" width="336" height="69">
   <img id="drag2" src="img_logo2.gif" draggable="true" ondragstart="drag(event)" width="336" height="69">
</body>
</html> 
```

# xampp - XAMPP Apache is starts and then suddenly stops

> ID：13933099
> 
> 赞同：0
> 
> 时间：2012-12-18T12:32:57.270
> 
> 标签：xampp

I have windown 7 and XAMPP version 3.0\. As today I start the XAMPP and try to start Apache in the status panel it displays

```
Status change detected: running
Status change detected: stopped 
```

I checked error.log but no error is there.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-22T18:08:06.487

1）转到配置> apache（httpd.conf）

2）找到“Listen 80”并将其更改为8080之类的内容并保存文件

3）点击管理员，它会说“未找到”

4) 在 localhost 之后的 url 中写入 :8080 或您在 httpd.conf 中写入的端口号

所以它看起来像 localhost:8080

# ios - How will keep track of consumable In-App purchase items by user on multiple iOS devices?

> ID：13933105
> 
> 赞同：0
> 
> 时间：2012-12-18T12:33:07.280
> 
> 标签：ios, in-app

The primary functionality of the iPhone app is to provide different driving routes. The routes are created dynamically from our server side. For each route the user has to pay between $1, $2 and $3\.

Route 1 : $2 , Route 2 : $1 , Route 3 : S2 , Route 4 : $3 , … So on, hundreds of driving routes. In-App purchase type we have used is consumable type with three product Ids(price1,price2,price3). Once user had purchased route ,RouteId and DeviceId set to purchased. Later he can use that route for free on that device.

But Apple had rejected our app with reason, "We found that the Purchasability Type for one or more of your In App Purchase products was inappropriately set, which is not in compliance with the App Store Review Guidelines."

It says, once we have purchased route it must available on all devices. How will keep track of all the purchased driving route by same user on multiple devices. Can we use login with Facebook functionality to keep same track?

please suggest your input for scenario. Thanks in advance.

# drupal - 创建成功登录日志

> ID：13933118
> 
> 赞同：2
> 
> 时间：2012-12-18T12:33:52.747
> 
> 标签：drupal, drupal-7

我需要创建一个包含成功登录和拒绝登录的日志。我必须保存尝试访问的用户。

我不知道是否`hook_user_login`是执行此任务的正确方法。

感谢任何调查指导。谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:59:41.803

[hook_user_login()](http://api.drupal.org/api/drupal/modules!user!user.api.php/function/hook_user_login/7)仅在用户成功登录时调用。

你应该实现的钩子是[hook_watchdog()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_watchdog/7)。

```
function hook_watchdog(array $log_entry) {
  switch ($log_entry['message']) {
    case 'Login attempt failed for %user.':
      // Somebody tried logging in as $log_entry['variables']['%user'],
      // and failed.
      break;

    case 'Session opened for %name.':
      // The login for $log_entry['variables']['%name'] was successful.
      break;
  }
} 
```

请注意：

*   `$log_entry['variables']['%user']`（登录失败时）和`$log_entry['variables']['%name']`（登录成功时）都是用户名，而不是用户对象。

*   登录成功时，`$log_entry['user']`是正确登录用户的用户对象，`$log_entry['uid'] 是用户 ID。

*   其他可能有用的变量是：

    *   `$log_entry['request_uri']`
    *   `$log_entry['referer']`
    *   `$log_entry['ip']`
    *   `$log_entry['timestamp']`
*   Drupal 已经在 admin/reports/dblog 中记录了这些事件；您只需要按类型（用户）过滤它们。

    [![截屏](../Images/86fbcfd628117625b0188adc4c35ee49.png)](https://i.stack.imgur.com/8Xw0u.png)

    但是，可能有理由`hook_watchdog()`为任何失败/成功的登录保留日志：数据库日志仅限于 N 个条目（其中 N 可以是 100、1000、10000、100000、1000000，具体取决于 admin/ config/development/logging)，它用于传递给[watchdog()](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/watchdog/7)的所有消息；一旦达到限制，旧消息就会丢失。

# javascript - Google Apps 脚本地图教程错误

> ID：13933119
> 
> 赞同：2
> 
> 时间：2012-12-18T12:33:52.390
> 
> 标签：javascript, google-apps-script

我对此处指定的地图教程有疑问，[https://developers.google.com/apps-script/articles/maps_tutorial](https://developers.google.com/apps-script/articles/maps_tutorial)

我正在尝试做第一个教程，从地址列表制作地图。

我创建了电子表格和脚本，但在运行脚本时出现此错误。

“找不到方法 getRange(number,number,number,number)。（第 7 行）”

任何提示/解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:38:13.417

如果你看第二行，它应该是这样的：

```
var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('restaurants'); 
```

基本上，脚本希望在电子表格文件中有一个名为“restaurants”的工作表，因此尝试重命名该工作表，它应该不会失败。

# c# - 如何在c#中获取表单的所有控制列表？

> ID：13933120
> 
> 赞同：-3
> 
> 时间：2012-12-18T12:33:54.663
> 
> 标签：c#, winforms

> **可能重复：**
> [如何获得胜利形式的所有控制？](https://stackoverflow.com/questions/2735190/how-to-get-all-controls-of-win-form)

我有一个如下图所示的winform。
![在此处输入图像描述](../Images/d74710803d3785df7a715ef980dbf481.png)
我想要一个 MainForm 的所有控件的列表。
像这样：
MainForm
Button1
Panel1
TextBox1
Panel2
Button2
TextBox2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T12:41:09.000

像这样的东西应该可以工作（无论如何都不是完美的代码......只是为了传达这个想法）：

```
public IEnumerable<Control> GetSelfAndChildrenRecursive(Control parent)
{
    List<Control> controls = new List<Control>();

    foreach(Control child in parent.Controls)
    {
        controls.AddRange(GetSelfAndChildrenRecursive(child));
    }

    controls.Add(parent);

    return controls;
}

var result = GetSelfAndChildrenRecursive(topLevelControl) 
```

# java - 对用户定义的异常使用 throw

> ID：13933123
> 
> 赞同：0
> 
> 时间：2012-12-18T12:33:59.797
> 
> 标签：java, exception, throw

以下是“ throw use; ”显示错误的代码。为什么？如何对用户定义的异常使用 throw？举个例子？

```
class use extends Exception{
public String toString() {
    return "too many exceptions";
}
}   
class user{
public static void main(String s[]) {
    int i=3;
    try {
        if(i>1)
            throw use;
    }
    catch(use e) {
        System.out.println(e.toString());
    }
    finally{
        System.out.println("program executed successfully!");
    }

}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T12:35:30.640

你需要一个异常类的实例来抛出它：

```
throw new use(); 
```

或者

```
use a = new use();
throw a; 
```

将来请遵循 Java 命名约定，这将使您的代码更具可读性。（类名应以大写字母开头）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T12:20:03.287

可以在 Java 中创建和抛出用户定义的异常。

通过继承 Exception 类，您可以创建自己的异常。

并且可以在需要时抛出

以下示例显示了如何创建和抛出用户定义的异常

[http://www.csnotes32.com/2014/09/how-to-create-user-defined-exception-in.html](http://www.csnotes32.com/2014/09/how-to-create-user-defined-exception-in.html)

# c# - 关闭多线程应用程序时的 ObjectDisposed

> ID：13933127
> 
> 赞同：1
> 
> 时间：2012-12-18T12:34:30.457
> 
> 标签：c#, multithreading, invoke, aforge, objectdisposedexception

> **可能重复：**
> [如何在窗体的关闭事件中停止 BackgroundWorker？](https://stackoverflow.com/questions/1731384/how-to-stop-backgroundworker-on-forms-closing-event)

**关于可能的重复 - BackgroundWorker 方法在这里不适用。

下面是我尝试使用 AForge 库从 IP 摄像机接收视频。

每个视频流应该在单独的线程中运行，当新帧到达时通知 UI 线程。事件处理程序在引发它的同一个线程中执行，因此我需要使用 Invoke。

一切顺利，直到我想停止应用程序。标有“>>>”的行会引发 ObjectDisposed 异常，因此我的应用程序不会像运行时那样顺利结束。

我知道问题在于理解多线程，因此看不到真正的问题。有人可以解释一下这里发生了什么吗？

```
Form1.cs

public void generic_NewFrame(object sender, NewFrameEventArgs e)
{
  ...
  if (pictureBox1.InvokeRequired)
  {                            
>>>   pictureBox1.Invoke(new MethodInvoker(delegate()
                         {                                                       
                           pictureBox1.BackgroundImage = (Image)buf;
                         }));
  }
  else
  {
    pictureBox1.BackgroundImage = (Image)buf;
  }
  ...
} 
```

尽可能短，Camera 类：

```
Camera.cs
//Camera thread loop
private void WorkerThread()
{
  while (!stopEvent.WaitOne(0, false))
  {
   ...
     if (!stopEvent.WaitOne(0, false))
     {
       // notify UI thread
       OnNewFrame(new NewFrameEventArgs(Last_frame));
   ...
  }  
}

override public void Play()
{
  stopEvent = new ManualResetEvent(false);

  thread = new Thread(new ThreadStart(WorkerThread));
  thread.Start();
}

override public void Stop()
{
  if (thread != null)
  {
    stopEvent.Set();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:43:18.600

我认为问题在于：库在关闭表单**后**`generic_NewFrame`调用您的回调 ( ) 。你可以用几种不同的方法来修复它。

 **首先，如果您的表单已经处理，您可以跳过回调方法：

```
public void generic_NewFrame(object sender, NewFrameEventArgs e)
{
  // Lets skip this callback if our form already closed
  **if (this.IsDisposed) return;**

  ...
  if (pictureBox1.InvokeRequired)
  {                            
>>>   pictureBox1.Invoke(new MethodInvoker(delegate()
                         {                                                       
                           pictureBox1.BackgroundImage = (Image)buf;
                         }));
  }
  else
  {
    pictureBox1.BackgroundImage = (Image)buf;
  }
  ...
} 
```

另一种方法是等待而不是关闭表单，直到您的库仍在工作并等待`FormClosing`或`FormClosed`事件处理程序：

```
private void FormClosingEventHandler(object sender, CancelEventArgs e)
{
  // Waiting till your worker thread finishes
   _thread.Join();
} 
```

或者您可以在停止方法中等待：

```
override public void Stop()
{
  if (thread != null)
  {
    stopEvent.Set();
    thread.Join();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:36:52.560

为了避免导致这种情况的竞争条件，您可以执行以下操作：

```
pictureBox1.Invoke(new MethodInvoker(delegate()
                     {                             
                       if (!pictureBox1.IsDisposed) 
                       {                      
                           pictureBox1.BackgroundImage = (Image)buf;
                       }
                     })); 
```

在 UI 线程上检查很重要`IsDisposed`，即在被调用的委托内部。**

# attributes - Sahi - 使用自定义属性或多个属性获取元素

> ID：13933131
> 
> 赞同：1
> 
> 时间：2012-12-18T12:34:35.413
> 
> 标签：attributes, custom-attributes, sahi

我想使用我选择的多个自定义属性在 Sahi 脚本中获取一个元素。它`<td >`具有动态生成的不同属性。title 属性为空，即`""`. 元素定义示例如下：

`<td title="" rownumber="1" rmbnum="0,1" rowId="8090.9008.6352.8721" class="my-class my-class2" position="4">`

这里行 id 是动态生成的。单击此元素后，我需要单击此元素，然后生成一个文本框，我们需要在其中填充值-值是文本格式。我想使用 rmbnum 和 position 属性来获取这个元素。

我已经搜索了 sahi 论坛，但无法找到它。

问候， 拉胡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:00:46.700

您可以使用

```
_cell({rmbnum:"0,1",position:"4"}) 
```

文档现已更新。[http://sahi.co.in/w/browser-accessor-apis](http://sahi.co.in/w/browser-accessor-apis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:39:05.730

您也可以尝试使用

```
_cell(_table(“items”), rowIndex, columnIndex)
_cell(_table(“items”), rowName, columnName) 
```

有关示例，请参见[http://sahi.co.in/w/_cell](http://sahi.co.in/w/_cell)。

# php - 从下拉菜单中获取所选项目

> ID：13933135
> 
> 赞同：0
> 
> 时间：2012-12-18T12:34:49.153
> 
> 标签：php, html, drop-down-menu, menu

从下拉菜单中获取所选项目的最佳方法是什么？

如果这很重要，我的下拉菜单会在 while 循环内生成:)

Ps 在你投反对票之前...我尝试了一些我在谷歌和这个网站上找到的技术。

这是我的下拉菜单的示例：

```
<select id="select1">
<?php
$id = 0;
while ($row = mysql_fetch_row($result)) {
    echo "<option value=$id>$row[0]</option>";
    $id++;
}
?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:37:45.597

给它一个`name`：

```
<select id="select1" name="myselect">
<?php
$id = 0;
while ($row = mysql_fetch_row($result)) {
    echo "<option value=\"$id\">{$row[0]}</option>";
    $id++;
}
?>
</select> 
```

然后，当发布时，您将获得 中的可用值`$_REQUEST['myselect']`。

# mvvm - Silverlight DataForm+ChildWindows+MVVM：ComboBox 的 DataField 未填充

> ID：13933141
> 
> 赞同：0
> 
> 时间：2012-12-18T12:35:05.197
> 
> 标签：mvvm, silverlight-5.0

我有一个带有 GridView 控件的视图页面。使用带有以下 xaml 的弹出子窗口编辑网格中的项目：

```
 <toolkit:DataForm.EditTemplate>
            <DataTemplate>
                <StackPanel>

                    <toolkit:DataField Label="Avisar a: ">
                        <ComboBox ItemsSource="{Binding Path=Sucursales}"/>
                    </toolkit:DataField>

                    <toolkit:DataField Label="Mensaje:">
                        <TextBox Text="{Binding mensaje, Mode=TwoWay}"/>
                    </toolkit:DataField>

                    <toolkit:DataField Label="Estado: ">
                        <ComboBox ItemsSource="{Binding Path=EstadosMensaje}"/>
                    </toolkit:DataField>

                </StackPanel>
            </DataTemplate>
        </toolkit:DataForm.EditTemplate>

    </toolkit:DataForm> 
```

此弹出窗口的 DataContext 是从父视图注入的视图构造函数，如下所示：

```
AlertaForm frm = new AlertaForm(DataContext as AlertasViewModel);
frm.Show();

//ChildWindows constructor
public AlertaForm(AlertasViewModel viewModel){
  InitializeComponent();
  DataContext = viewModel;
} 
```

如您所见，ChildWindows 和父视图共享同一个 ViewModel。问题是 ComboBox 控件没有被填充。TextBox 字段已正确绑定，它们显示来自 DataContext 属性的值，这令人困惑，因为这证明 DataForm 识别传递给 ChildWindows AlertaForm 的 ViewModel。显然我在这里遗漏了一些东西，但无法弄清楚是什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T15:19:29.320

> 我最终将用户控件与 DataForm 一起丢弃在 ChildWindows 中并带有公共控件。看来 DataForm 对复杂场景不友好

# asp.net - 同一个 ASP.Net 项目中的 SOAP 和 HTTP 服务

> ID：13933142
> 
> 赞同：0
> 
> 时间：2012-12-18T12:35:14.927
> 
> 标签：asp.net, web-services, cross-domain-proxy

我有一个现有的 Web 服务项目，它使用 SOAP 消息来回通信。我刚刚创建了一个名为“AJAXWebServices”的 HTTP 服务，该服务具有“[System.Web.Script.Services.ScriptService()]”服务类的属性。我希望这个服务利用 HTTP POST/GET 和项目中的其他服务来继续利用他们的 SOAP。如果“.asmx”文件在本地项目中，AJAXWebService 可以正常工作，但是当我发布它然后对其进行 Web 引用时，我将 ajaxToolKit:AutoCompleteExtender 的服务路径设置为“HTTP://server/folder /AJAXWebService.asmx" 页面加载，当我开始输入时，它会发出请求，但会返回整个 HTML 页面，而不仅仅是自动完成的单词。它在解析所有 XML 时冻结了我的 IE。

# r - 如果需要登录和其他先前操作，则在 R 中读取 HTML 表

> ID：13933146
> 
> 赞同：0
> 
> 时间：2012-12-18T12:35:19.930
> 
> 标签：r, xml, web-scraping, html-table

我正在使用`XML`包从网站读取 HTML 表格。

实际上，我正在尝试从本地地址读取表格，例如`http://10.35.0.9:8080/...`.

要获得此表，我通常必须通过输入登录名和密码登录。

因此，当我运行时：

```
library(XML)
acsi.url <- 'http://10.35.0.9:8080/...'
acsi.df <- readHTMLTable(acsi.url, header = T, stringsAsFactors = F)
acsi.df 
```

我看到`acsi.df`的不是我的桌子，而是登录页面。

我怎么知道在阅读表格**之前**`R`输入登录名和密码并登录？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:06:16.950

没有通用的解决方案，您必须分析登录过程的详细信息，但是包 RCurl 和以下链接应该会有所帮助：

[使用 RCurl 登录 WordPress](https://stackoverflow.com/questions/11879142/login-to-wordpress-using-rcurl)**

# java - Java，按关键字对多维数组进行排序

> ID：13933153
> 
> 赞同：0
> 
> 时间：2012-12-18T12:35:37.147
> 
> 标签：java, arrays, sorting, keyword, multidimensional-array

> **可能重复：**
> [基于一列对二维数组进行排序](https://stackoverflow.com/questions/4907683/sort-a-two-dimensional-array-based-on-one-column)

我有数据：

```
"Something1" "TRUE"
"Something2" "FALSE"
"Something3" "FALSE"
"Something4" "TRUE" 
```

然后我将其存储在一个多维数组中：

```
String[][] myData = new String[data.length][2]; 
```

现在我想对这个数组进行排序，使其首先按“TRUE”排序，所以它变成：

```
"Something1" "TRUE"
"Something4" "TRUE"
"Something2" "FALSE"
"Something3" "FALSE" 
```

我在看 Arrays.sort(); 但不确定如何实现这一点，或者这是否是最好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:39:00.937

使用自定义比较器对数组进行排序：

```
Arrays.sort(myData , new Comparator<String[]>() {
            @Override
            public int compare(String[] o1, String[] o2) {
                return ((String) o2[1]).compareTo(o1[1]);
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:40:04.250

如果您必须使用数组，我会使用带有自定义比较器的[Arrays.sort() 。](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)该比较器将对`String[]`传入的适当元素进行排序。

我可能不会使用多维数组，而是为数组的每一行实现一些对象。这些数据看起来紧密联系在一起，而不仅仅是数组中的元素。您可以适当地键入它 - 目前您将布尔值存储为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:27:15.083

好的，这给你。您可以从测试主类运行两个独立的示例解决方案。第一个使用多维数组。

```
 Object values[][] = new Object[][] {
            { "a", Boolean.FALSE }, 
            { "b", Boolean.TRUE }, 
            { "c", Boolean.TRUE },              
    };

    Arrays.sort(values, 
            new Comparator<Object[]>() {
                @Override
                public int compare(Object[] tuple1, Object[] tuple2) {
                    int result = -1*((Boolean) tuple1[1]).compareTo((Boolean) tuple2[1]);
                    if (result == 0) {
                        result = ((String) tuple1[0]).compareTo(((String) tuple2[0]));
                    }                       
                    return result;
                }
            }
    );

    for (Object[] tuple : values) {
        System.out.println(Arrays.toString(tuple));
    } 
```

第二个使用通用（和类型安全）元组。

```
 class Tuple<A, B> {
        private final A first;
        private final B second;

        public Tuple(A first, B second) {
            this.first = first;
            this.second = second;
        }

        public A getFirst() {
            return this.first;
        }

        public B getSecond() {
            return this.second;
        }

        /**
         * {@inheritDoc}
         */
        @Override
        public String toString() {
            return "[first=" + first.toString() + ",second="  + second.toString() + "]";
        }
    };

    Tuple<String, Boolean> values[] = new Tuple[] {
            new Tuple<String, Boolean>("a", Boolean.FALSE), 
            new Tuple<String, Boolean>("b", Boolean.TRUE),
            new Tuple<String, Boolean>("c", Boolean.TRUE),              
    };

    Arrays.sort(values, 
            new Comparator<Tuple<String, Boolean>>() {
                @Override
                public int compare(Tuple<String, Boolean> tuple1, Tuple<String, Boolean> tuple2) {
                    int result = -1*tuple1.getSecond().compareTo(tuple2.getSecond());
                    if (result == 0) {
                        result = tuple1.getFirst().compareTo(tuple2.getFirst());
                    }                       
                    return result;
                }
            }
    );

    for (Tuple<String, Boolean> tuple : values) {
        System.out.println(tuple);
    } 
```

# javascript - $ 和 $$ 和有什么不一样？

> ID：13933157
> 
> 赞同：15
> 
> 时间：2012-12-18T12:35:50.377
> 
> 标签：javascript, jquery, selector

我一直在使用一些 jQuery 功能。

`$`任何人都可以给我一些想法和使用之间的区别`$$`吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T05:08:40.397

`$`并且`$$`可以在谷歌 Chrome、Firefox 和 Safari 浏览器上的任何网页（如果不包括 jQuery）上`$`返回选择器的第一个元素。

这里，

$ 是`document.querySelector`

$$ 是`document.querySelectorAll`

它们是 Google Chrome 和 Firefox 浏览器的原生功能，您也可以在 Safari 中查看`$`和`$$`定义。

在任何 Google Chrome、Firefox 或 Safari 中打开[Google](http://google.com/)，然后打开开发者工具来检查这些结果……（为什么选择 Google，因为他们不会使用 jQuery 或 Moo 工具）

```
$('div');  // returns first DIV in DOM
$$('div'); // returns all DIVs in DOM 
```

[![在此处输入图像描述](../Images/ef442f4c39fe69a4b1a2c72ea9617102.png)](https://i.stack.imgur.com/MgRWt.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-18T12:41:46.223

在 jQuery 文档上没有`$$`声明。jQuery 有一个带`$`字符的默认选择器。也许这个脚本使用了另一个 javascript 包并且与 jQuery 有一些冲突。在这种情况下，您可以使用`jquery.NoConflict`来避免此类问题，并设置另一个 jquery 选择器。

就像是：

```
var s = jQuery.noConflict();

// something with new jQuery selector
s("div p").hide();

// something with another library using $()
$("content").style.display = 'none'; 
```

如果您的代码有类似的东西以避免冲突：`var $$ = jquery.noConfict();`，您可以使用 $$ 作为 jquery 选择器：

```
$$("#element").method(); 
```

查看更多关于文档： [http ://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T12:48:23.287

`jQuery`是 jQuery 提供的对象。`$`是另一个，它只是`jQuery`.

`$$`不是由 jQuery 提供的。它由其他库提供，例如 Mootools 或 Prototype.js。

更重要的`$$`是，现代浏览器的控制台中也提供了`document.querySelectorAll`. 除非它被另一个库覆盖。`$`也以相同的方式提供，作为 . 的别名`document.querySelector`。

有关更多信息，请参阅[此答案](https://stackoverflow.com/questions/13402776/why-am-i-able-to-use-jquery-syntax-in-chromes-js-console-when-current-page-does/13403311#13403311)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T12:39:13.320

$ AND $$ 是 mootools 选择器，$ 也是 jquery 选择器。

见 jquery noconflict-mode

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T12:41:43.387

**Short Anser：** `$$`在 jQuery 规范中**没有**定义，此外，单`$( )`号符号表示您将括号内的内容封装到 jQuery 对象中。

因此，别名`$`是一个缩写词——我使用的是 jQuery 库，而`$$`标准 jQuery 库中没有定义双精度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-18T12:43:48.793

所有 jQuery 功能都封装在`jQuery`对象中，该对象也可以作为`$`. 您正在检查的代码可能正在使用使用函数的不同库（例如 Mootools）`$$`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-18T12:44:23.863

$$ 在 Jquery 中没有意义，但是它在原型框架中使用。

[原型 $$](http://api.prototypejs.org/dom/dollar-dollar/)

还要检查这不是使用`noConflict`.

搜索代码`var $$`以查找旧 jquery 版本的可能分配。

```
var $$ = jquery.noConfict(); 
```

# python - 格式化self，即字典

> ID：13933160
> 
> 赞同：3
> 
> 时间：2012-12-18T12:35:59.173
> 
> 标签：python, python-3.x

`format(self)`在这种情况下如何工作？

```
class Commit:
    number = None
    sha = None
    message = None
    identity = None

    def __init__(self, raw, number):
        r = raw.commits[number]

        self.number = number
        self.sha = r['sha']
        self.message = r['message']
        self.identity = raw.identities[r['identity']]

    def __str__(self):
        return """
Commit {number} {sha}
Message {message}
Identity {identity}
""".format(self)

    def __getitem__(self, attr):
        return getattr(self, attr)
    def __contains__(self, attr):
        return hasattr(self, attr) 
```

如果我然后尝试访问单个属性

```
c = Commit(raw, 170)
print(c['sha']) 
```

例如，它有效。但是，如果我`print(c)`直接说：

> 键错误：“数字”

我本来希望`format()`通过`__getitem__()`.

如何让它发挥作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T12:39:40.380

不，您必须使用`**self`并支持更多的映射方法。

但是，最好使用属性访问的格式支持来代替：

```
 def __str__(self):
        return """
Commit {0.number} {0.sha}
Message {0.message}
Identity {0.identity}
""".format(self) 
```

现在它将使用属性访问从第一个位置参数到`number`，即.`message``.format()``self`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T12:40:24.613

您有一个`self.number`，但想要访问一个`self['number']`. 这是与众不同的...

换一个试试`{0.number}`...

# google-plus - 在 Google+ 即时上传上同步旧照片和视频

> ID：13933162
> 
> 赞同：0
> 
> 时间：2012-12-18T12:36:01.047
> 
> 标签：google-plus

我使用 android 4.2 手机和 google plus 即时上传将媒体同步到云端。我注意到只有我的新照片正在同步。

有没有办法在我的设备上同步旧照片和视频？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T12:36:01.047

[http://support.google.com/plus/bin/static.py?hl=en&page=ts.cs&ts=2769098](http://support.google.com/plus/bin/static.py?hl=en&page=ts.cs&ts=2769098)

即时上传旨在上传您在登录应用程序并打开即时上传功能时拍摄的照片。使用全部上传来上传移动设备上已有的照片。

要使用全部上传功能：

*   打开 Google+ 应用
*   点击菜单并选择设置
*   如果您的设备有物理菜单按钮，请按菜单并选择设置
*   点按即时上传
*   点击全部上传以开始上传。

请记住，根据您设备上的照片数量和数据连接速度，在您的设备上对照片进行编目和上传的过程可能需要一些时间。

# python - 如何在linux中执行python文件

> ID：13933169
> 
> 赞同：31
> 
> 时间：2012-12-18T12:36:17.020
> 
> 标签：python, linux

我正在使用 linux mint，要运行 python 文件，我必须在终端中键入：`python [file path]`，那么有没有办法使文件可执行，并`python`在我双击它时自动运行命令？

而且由于我很久以前就停止处理 Windows，我想知道那里的 .py 文件是否也可以自动执行，或者我是否需要一些步骤。

谢谢

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-18T12:39:27.127

你必须添加一个shebang。shebang 是文件的第一行。它是系统正在寻找以执行文件的内容。

它应该是这样的：

```
#!/usr/bin/env python 
```

或真正的路径

```
#!/usr/bin/python 
```

您还应该检查文件是否有权执行。`chmod +x file.py`

正如 Fabian 所说，请查看 Wikipedia：[Wikipedia - Shebang (en)](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-18T12:44:08.193

我建议你添加

```
#!/usr/bin/env python 
```

而不是`#!/usr/bin/python`在文件的顶部。原因是python安装可能在不同发行版或不同计算机的不同文件夹中。通过使用`env`，您可以确保系统找到 python 并将脚本的执行委托给它。

如前所述，使脚本可执行，例如：

```
chmod u+x name_of_script.py 
```

应该做。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-18T12:39:37.767

就在这里。添加

`#!/usr/bin/env python`

到文件的开头并执行

`chmod u+rx <file>`

假设您的用户拥有该文件，否则可能会调整组或世界权限。

windows下的.py文件与python相关联，作为打开它们时运行的程序，就像打开.docx时运行MS word一样。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-12-20T04:09:00.657

1.使用下面给出的hello world脚本将您的文件名保存为hey.py

```
#! /usr/bin/python
print('Hello, world!') 
```

2.在该目录中打开终端

```
$ python hey.py 
```

* * *

或者如果您使用的是 python3，那么

```
$ python3 hey.py 
```

* * *

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-12-18T12:40:48.220

添加到代码顶部，

```
#!/usr/bin/python 
```

然后，在终端上运行以下命令，

```
chmod +x yourScriptFile 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-18T12:40:36.830

在文件顶部添加：

```
#!/usr/bin/python 
```

这是一个shebang。[您可以在Wikipedia](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)上阅读有关它的更多信息。

之后，您必须通过

```
chmod +x your_script.py 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-08-03T18:05:59.857

如果您安装了 python 3，则将此行添加到文件顶部：

```
 #!/usr/bin/env python3 
```

您还应该检查文件是否有权执行。chmod +x 文件.py

更多详情请关注官方论坛：

[https://askubuntu.com/questions/761365/how-to-run-a-python-program-directly](http://Official%20thread)

# socket.io - 带有 Socket.IO 的书签

> ID：13933173
> 
> 赞同：0
> 
> 时间：2012-12-18T12:36:34.550
> 
> 标签：socket.io, bookmarklet

我正在寻找一个示例书签代码：

*   注入 jQuery
*   设置 Socket.IO 并开始监听消息

这个想法是将 websocket 消息发送到页面，这些消息将被转换为按键事件。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-19T12:12:32.287

我基于此代码构建了自己的书签： [https ://gist.github.com/2897748](https://gist.github.com/2897748)

我包括 jQuery 和 Socket.IO，一切都很好

# android - 适用于多种语言的 Android one values 文件夹

> ID：13933178
> 
> 赞同：2
> 
> 时间：2012-12-18T12:36:38.983
> 
> 标签：android

有没有办法用一种以上的语言（values-en-es）标记字符串资源文件夹？

我的问题是，在某些设备上，希伯来语的语言代码是“iw”，而在其他设备上是“he”。我目前的解决方案是制作两个内容相同的文件夹，只分别更改它们的名称。

我想知道是否有更准确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:29:24.610

资源文件夹名称可以有多个限定符，但每种类型只有一个限定符：

例如

```
values-en-rGB //Language + Region 
```

有效但

```
values-en-fr//Language + Language 
```

无效，因为它对单个限定符有多个值。所以

```
values-iw-he 
```

不可能。

资料来源：Android 开发者，[限定符名称规则。](http://developer.android.com/guide/topics/resources/providing-resources.html#QualifierRules)

但是，这并不意味着您必须复制文件。相反，您可以创建***别名资源***。

Android 开发人员这样解释 Alias Resouces：

> 创建别名资源：当您有一个想要用于多个设备配置的资源（但不想作为默认资源提供）时，您不需要将同一资源放在多个替代资源中目录。相反，您可以（在某些情况下）创建一个替代资源，作为保存在默认资源目录中的资源的别名。

例如，一个文件夹中的字符串资源

```
<string name="app_name">My Awesome App</string> 
```

可以在另一个文件夹中的另一个字符串资源中引用为：

```
<string name="application_name">@string/app_name</string> 
```

更多关于Android 开发者[的别名资源。](http://developer.android.com/guide/topics/resources/providing-resources.html#AliasResources)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:56:13.017

您可以**在 Eclipse 中创建文件链接，如此**[处](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/tasks/tasks-45.htm)所述。因此，您拥有`values-iw/strings.xml`真正的价值，并在文件夹中创建指向该文件的*文件链接*`values-he`。这样做的好处是您不必编辑 2 个文件，链接的“文件”会自动更新。

# css - 一次性为不同主题生成 css？

> ID：13933179
> 
> 赞同：0
> 
> 时间：2012-12-18T12:36:43.420
> 
> 标签：css, less

我使用较少的主题。我有几个不同颜色的主题。我现在要做的是评论其他变量定义，为一个主题省略变量并少编译成 css。我为所有其他主题生成 css，并为其他主题重复此操作。还有其他方法可以一次生成所有主题 css 吗？

我什至准备改变我的less文件的结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:43:40.090

你总是可以把你的样式表分成两个——变量，然后是主题。说 variables.less 和 theme.less

如果您使一般主题变量足够抽象（例如 @primary 和 @secondary 用于颜色），您可以编写尽可能多的 variable.less 工作表，并决定通过 jquery 动态显示哪些工作表。然后，theme.less 将保持不变，填充它的变量将根据您决定使用 jQuery 的方式动态放置在其中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-18T12:40:15.163

是的，

根据该主题名称，您必须创建像 theme1.css,theme2.css 这样的 css 文件。

因此，根据您检查当前运行的主题以及可以加载的 theme.css。

# android - 对togglesoftinput功能感到困惑

> ID：13933183
> 
> 赞同：6
> 
> 时间：2012-12-18T12:36:56.907
> 
> 标签：android

根据文档，我知道该功能用于切换软输入。但是我对作为参数传递的标志如何工作感到困惑。任何例子都会很明显（我也想要解释，以便我得到确切的功能）。谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T12:44:10.020

显示软键盘 -

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
if(imm != null){
        imm.toggleSoftInput(0, InputMethodManager.SHOW_IMPLICIT);
    } 
```

隐藏软键盘 -

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
if(imm != null){
        imm.toggleSoftInput(0, InputMethodManager.HIDE_IMPLICIT_ONLY);
    } 
```

# google-api - Google Map API v3 不会在鼠标悬停时改变其位置

> ID：13933184
> 
> 赞同：1
> 
> 时间：2012-12-18T12:37:00.577
> 
> 标签：google-api

```
<script type="text/javascript">

    var markers = [ 
     <?php 
     $siteCount = count($content);
     $aaa=0;
     foreach($content as $con){
     $aaa++;
     $address = $con['Country'].','.$con['State_Province_Name'].','.$con['address'];
     $arr = $obj->getCoordinates($address);
     ?>
    ['<?php echo $con['name'];?>', <?php echo $arr['lat'];?>, <?php echo $arr['long'];?>]<?php if($siteCount==$aaa){ echo "\n";}else{ echo ",";  echo "\n";}?>
    <?php } ?>
];
</script>

<script>
function initializeMaps() {

    var latlng = new google.maps.LatLng(<?php if($arrval==''){echo "43.1291";} else{echo $arr['lat'];}?>, <?php if($arrval==''){echo "-77.6717";} else{echo $arr['long'];}?>);
    var myOptions = {
        zoom: 17,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.SATELLITE,
        mapTypeControl: true
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

    var infowindow = new google.maps.InfoWindow(), marker, i;
    for (i = 0; i < markers.length; i++) {  
        marker = new google.maps.Marker({
            position: new google.maps.LatLng(markers[i][1], markers[i][2]),
            map: map
        });
        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
                infowindow.setContent(markers[i][0]);
                infowindow.open(map, marker);
            }
        })(marker, i));

         google.maps.event.addListener(marker, 'mouseover', (function(marker, i) {
            return function() {
                infowindow.setContent(markers[i][0]);
                infowindow.open(map, marker);
                marker.setAnimation(google.maps.Animation.BOUNCE);
            }
        })(marker, i));

         google.maps.event.addListener(marker, 'mouseout', (function(marker, i) {
            return function() {
                infowindow.setContent();
                infowindow.open();

    setTimeout(function(){ marker.setAnimation(null); }, 0);
            }
        })(marker, i));

    }
}

    </script> 
```

这是我的代码

我想从页面鼠标悬停更改鼠标悬停的位置仅在地图上工作

这里我从页面调用函数

```
<a  href="javascript:google.maps.event.trigger(markers['<?php echo $content1['name'];?>'],'mouseover'); "><?php echo $content1['name'];?></a> 
```

但这不起作用

# html - Chrome 自动填充表单错误

> ID：13933188
> 
> 赞同：2
> 
> 时间：2012-12-18T12:37:17.693
> 
> 标签：html, forms, google-chrome

我已经对此进行了调查，但无法找出原因-有人有任何想法吗？

[此屏幕截图的形式为](http://cl.ly/image/1G201e2w3s0j)

`<input size=5 name="months_at_address" value="" type="text" placeholder="Months" class="small" />`

上面的代码是填充“英国”的输入

[这是网站的链接](http://www.dacexchange.co.uk)

表单代码从第 246 行开始，邮政编码从第 378 行开始——影响第 408 行的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-28T11:52:01.320

尝试将您的输入字段命名为不包含“地址”的其他名称。Chrome 的自动填充功能依赖于正则表达式来确定输入字段是否要求输入名字、姓氏、地址等。months_at_a 可能会成功。我认为自动填充正则表达式也会将months_at_adr 识别为地址字段。

# git - 为什么 Teamcity 无法下拉 git 子模块

> ID：13933193
> 
> 赞同：10
> 
> 时间：2012-12-18T12:37:23.447
> 
> 标签：git, github, teamcity, git-submodules

我有一个包含子模块的 git 项目。该子模块用于两个存储库中，这两个存储库都在 Teamcity 服务器上构建。Teamcity 能够构建第一个项目，但第二个项目出现以下错误（已引用详细信息以保护有罪者）

> 为 VCS 存储库“TirePlotter”收集更改时出错收集更改失败：org.eclipse.jgit.errors.CorruptObjectException：对象“git hash here”已损坏：“git fetch”命令失败。标准错误：“项目子模块名称 url”：“项目子模块名称 url”/info/refs?service=git-upload-pack 未找到 «隐藏堆栈跟踪 jetbrains.buildServer.vcs.VcsException：收集 VCS 存储库“TirePlotter”的更改时出错收集更改失败：org.eclipse.jgit.errors.CorruptObjectException：对象“git hash here”已损坏：“git fetch”命令失败。标准错误：“项目子模块名称 url”：“项目子模块名称 url”/info/refs?service=git-upload-pack 在 jetbrains.buildServer.buildTriggers.vcs.git.OperationContext 找不到。VcsModificationChecker$1.run(VcsModificationChecker.java:11) at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) at java.util.concurrent。 FutureTask.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source ）引起：org.eclipse.jgit.errors.CorruptObjectException：对象'Git hash here'已损坏：'git fetch'命令失败。标准错误：“项目子模块名称 url”：“项目子模块名称 url”/info/refs?service=git-upload-pack 在 jetbrains.buildServer.buildTriggers.vcs.git.submodules.SubmoduleAwareTreeIterator.movedToEntry（SubmoduleAwareTreeIterator.java: 还有 21 个原因：jetbrains.buildServer.vcs.VcsException: 'git fetch' 命令失败。标准错误：'项目子模块名称 url'：'项目子模块名称 url'/info/refs?service=git-upload-pack 在 jetbrains.buildServer.buildTriggers.vcs.git.CommandLineUtil.getCommandLineError(CommandLineUtil.java:44) 找不到在 jetbrains.buildServer.buildTriggers.vcs.git.FetchCommandImpl.fetchInSeparateProcess(FetchCommandImpl.java:132) 在 jetbrains.buildServer.buildTriggers.vcs.git.FetchCommandImpl.fetch(FetchCommandImpl.java:70) 在 jetbrains.buildServer.buildTriggers.vcs .git.GitVcsSupport.fetch(GitVcsSupport.java:716) at jetbrains.buildServer.buildTriggers.vcs.git.submodules.TeamCitySubmoduleResolver.fetch(TeamCitySubmoduleResolver.java:79) at jetbrains.buildServer.buildTriggers.vcs.git.submodules.SubmoduleResolver . getSubmoduleCommit(SubmoduleResolver.java:76) at jetbrains.buildServer.buildTriggers.vcs.git.submodules.SubmoduleAwareTreeIterator.getSubmoduleCommit(SubmoduleAwareTreeIterator.java:224) at jetbrains.buildServer.buildTriggers.vcs.git.submodules.SubmoduleAwareTreeIterator.movedToEntry(SubmoduleAwareTreeIterator.getSubmoduleCommit(SubmoduleAwareTreeIterator.java:224) java:174) ... 29 更多 org.eclipse.jgit.errors.CorruptObjectException：对象 'git hash here' 已损坏：'git fetch' 命令失败。标准错误：“项目子模块名称 url”：“项目子模块名称 url”/info/refs?service=git-upload-pack 在 jetbrains.buildServer.buildTriggers.vcs.git.submodules.SubmoduleAwareTreeIterator.movedToEntry（SubmoduleAwareTreeIterator.java: 187) 在 jetbrains.buildServer.buildTriggers.vcs.git.submodules.DirectSubmoduleAwareTreeIterator。在 java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) run(Unknown Source) Caused作者：jetbrains.buildServer.vcs.VcsException：“git fetch”命令失败。标准错误：[https://engdeveloper@github.com/rcrenterprises/RCR.Simulation](https://engdeveloper@github.com/rcrenterprises/RCR.Simulation)：[https://engdeveloper@github.com/rcrenterprises/RCR.Simulation/info/refs?service=git-upload-pack](https://engdeveloper@github.com/rcrenterprises/RCR.Simulation/info/refs?service=git-upload-pack)buildTriggers.vcs.git.submodules.SubmoduleAwareTreeIterator.movedToEntry(SubmoduleAwareTreeIterator.java:174) ... 还有 29 个 jetbrains.buildServer.vcs.VcsException: 'git fetch' 命令失败。标准错误：'项目子模块名称 url'：'项目子模块名称 url'/info/refs?service=git-upload-pack 在 jetbrains.buildServer.buildTriggers.vcs.git.CommandLineUtil.getCommandLineError(CommandLineUtil.java:44) 找不到在 jetbrains.buildServer.buildTriggers.vcs.git.FetchCommandImpl.fetchInSeparateProcess(FetchCommandImpl.java:132) 在 jetbrains.buildServer.buildTriggers.vcs.git.FetchCommandImpl.fetch(FetchCommandImpl.java:70) 在 jetbrains.buildServer.buildTriggers.vcs .git.GitVcsSupport.fetch(GitVcsSupport.java:716) 在 jetbrains.buildServer.buildTriggers.vcs.git.submodules.TeamCitySubmoduleResolver。

我试图用一个干净的目录重建它，并验证了 git 存储库是好的。有没有人对如何解决这个问题有任何想法？旁注：如果对任何人有帮助，存储库就在 github 上。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-09T13:48:16.713

我刚刚遇到了同样的问题——在我的例子中，我们将 TeamCity 配置为在签出 Github 存储库时使用 HTTPS 和用户名/密码身份验证，但是 .gitmodules 文件包含`git@github.com:MyCompany/Submodule.git`子模块存储库的 SSH URL ( )。

`.gitmodules`我通过编辑URL 并将其更改为[https://github.com/MyCompany/Submodule.git](https://github.com/MyCompany/Submodule.git)来修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T05:15:45.447

尝试添加`.git`到您的子模块链接：`https://engdeveloper@github.com/rcrenterprises/RCR.Simulation.git`而不是`https://engdeveloper@github.com/rcrenterprises/RCR.Simulation`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-04T09:54:52.137

子树合并后我们有同样的问题: : VCS Root: DPPDev: Commit 'c77771ccd2f5b23aae5eafc3d4bf4cb6e6d6fec4' is not found in repository.

为修复添加了“空”提交 - 然后成功

# tcl - 在 Tcl 8.5 中打开/读取大文件的命令

> ID：13933199
> 
> 赞同：7
> 
> 时间：2012-12-18T12:37:56.317
> 
> 标签：tcl

抱歉，如果标题与我的问题不符，我仍然不确定应该如何表达。

无论如何，我在 Windows ( `wish`) 上使用 Tcl/Tk 已经有一段时间了，直到最近我写的脚本还没有遇到任何问题。该脚本应该将一个大的 txt 文件分解为可以导入到 excel 的较小文件（我说的是分解一个可能有 25M 行的文件，大约 2.55 GB）。

我当前的脚本是这样的：

```
set data [open "file.txt" r]
set data1 [open "File Part1.txt" w]
set data2 [open "File Part2.txt" w]
set data3 [open "File Part3.txt" w]
set data4 [open "File Part4.txt" w]
set data5 [open "File Part5.txt" w]

set count 0
while {[gets $data line] != -1} {
    if {$count > 4000000} {
        puts $data5 $line
    } elseif {$count > 3000000} {
        puts $data4 $line
    } elseif {$count > 2000000} {
        puts $data3 $line
    } elseif {$count > 1000000} {
        puts $data2 $line
    } else {
        puts $data1 $line
    }
    incr count
}

close $data
close $data1
close $data2
close $data3
close $data4
close $data5 
```

我更改 中的数字`if`以获得每个文件所需的行数，或者在需要的地方添加/删除任何内容`elseif`。

问题是，对于我得到的最新文件，我最终只得到了大约一半的数据（1.22 GB 而不是 2.55 GB），我想知道是否有一行告诉 Tcl 忽略它可以读取的限制。我试图寻找它，但我没有找到任何东西（或者任何我能很好理解的东西；我仍然是 Tcl 的业余爱好者 ^^;）。谁能帮我？

**编辑（更新）：** 我找到了一个打开大文本文件的程序，并设法直接预览文件的内容。实际上有 16,756,263 行。我将脚本更改为：

```
set data [open "file.txt" r]
set data1 [open "File Part1.txt" w]

set count 0
while {[gets $data line] != -1} {
    incr count
}
puts $data1 $count
close $data
close $data1 
```

获取脚本阻塞的位置并在此处停止： ![在此处输入图像描述](../Images/3711326eac31be0dcb598f374ccc7277.png)

中间行中有一个文本编辑器无法识别的字符，显示为一个小方块。我尝试`fconfigure`像邪恶的 otto 建议的那样使用，但恐怕我不太明白`channelID`,`name`或如何`value`工作以逃避该角色。嗯……救命？

**重新编辑**：我设法找出了`fconfigure`工作原理！谢谢邪恶的奥托！嗯，我不确定如何“选择”你的答案，因为它是评论而不是正确的答案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:15:01.730

“file.txt”中是否可能有任何二进制数据？`^Z`在 Windows 下，如果 tcl 读取文件中的 a （默认值），它将标记 eof `eofchar`。您可以使用以下命令将其关闭`fconfigure`：

```
fconfigure $data -eofchar {} 
```

有关完整详细信息，请参阅文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:16:05.587

我在基于 Unix 的 Mac 上运行了您的脚本，并注意到以下内容：

1.  `incr count`应该在循环的开头——一个小问题。
2.  更重要的是，*File.txt*包含 25M 行，但您划分不均：前四个各包含 1M，其余进入*File5.txt*。如果要平均划分文件，那么断点应该是20M、15M、10M和5M。
3.  除此之外，我没有注意到任何数据丢失。我没有 Windows 机器来试用它。

# emacs - 在 emacs 中构建项目

> ID：13933202
> 
> 赞同：1
> 
> 时间：2012-12-18T12:38:15.277
> 
> 标签：emacs, ide, compilation, build-process, build-automation

我是 emacs 的新手，我正试图让它像我一直使用的代码块一样像 IDE 一样工作，所以我下载并安装了 cedet 包和 SrSpeedbar 但我不知道如何构建一个项目在 emacs 中，代码块或其他 IDE 的方式相同。因此，任何指向执行此操作的包或简单方法的链接都会非常有帮助。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:32:32.077

CEDET 中有 EDE 包，它提供了一些用于构建项目的功能，但这取决于您使用的语言和构建工具。如果 EDE 不直接支持您的构建工具，您仍然可以使用`ede-generic-project`, 并在项目的局部变量中指定编译命令 - 有关详细信息，请参阅 EDE 信息。

[您可以在我关于 CEDET 的文章](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)中找到一些开始信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T13:36:19.103

也许看看：

1.  emake：[https ://github.com/proofit404/EMake](https://github.com/proofit404/EMake)
2.  快速运行：[https ://github.com/syohex/emacs-quickrun](https://github.com/syohex/emacs-quickrun)

目前我没有使用 cedet 和这两个包，但希望有所帮助。

# objective-c - mac app临时位置中的脚本

> ID：13933204
> 
> 赞同：1
> 
> 时间：2012-12-18T12:38:18.703
> 
> 标签：objective-c, xcode, macos, perl

我对 Mac OS X 应用程序开发有点陌生，我被 Mac OS 卡住了，将一些资源移动到临时位置，因为她的资源保留在资源文件夹中。我已经通过谷歌搜索了几个小时，但没有帮助。

这是我的情况更详细一点：我在 Xcode 中构建了一个应用程序。它由一个 ObjC TaskWrapper 和一个在应用程序运行后调用的 perl 脚本 (main.pl) 组成。还有一个外部文件（比如名称是 extrafunctions（无扩展名）），我需要在应用程序运行时从 perl 脚本加载它。从 xcode 构建后，perl 脚本和外部文件都位于 .app 目录内的 Resources 文件夹中。执行后 main.pl 文件被移动到一个临时位置。extrafunctions 文件保留在 myMacApp.app 文件夹内的 Resources 中。然后，当 main.pl 尝试加载 extrafunctions（以前在同一目录中）并失败时，因为 extrafunctions 没有被复制到 temp 文件夹中。我需要从 perl 脚本访问这个 extrafunctions 文件，

概述： - main.pl = myMacApp.app 内资源中的脚本 - extrafunctions = 由资源中的 main.pl 加载的外部脚本 - main.pl 尝试加载额外功能：不起作用

一些代码：install.pl

```
...
if(-f "extrafunctions") {
   open my $fh, "<", "extrafunctions" or die "Could not open extrafunctions : $!";
   $content = do { local $/; <$fh> };
   close $fh;
} else {
...
} 
```

任何帮助都非常感谢！

# javascript - 导入 jQuery 后 JavaScript 函数“未定义”

> ID：13933205
> 
> 赞同：2
> 
> 时间：2012-12-18T12:38:21.823
> 
> 标签：javascript, jquery

我有以下（简化的）代码：

```
<!DOCTYPE html SYSTEM "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Test</title>

        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js" />

        <script language="javascript" type="text/javascript">
            function testFunction() {
                alert('It works');
            }
        </script>
    </head>
    <body>
        <form method="post" action="test.html" onsubmit="testFunction()">
            <input type="submit" value="Test" />
        </form>
    </body>
</html> 
```

我的`testFunction()`函数本身就可以正常工作，直到我使用该行导入 jQuery

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js" /> 
```

现在它失败并告诉我 **Uncaught ReferenceError: testFunction is not defined**

我希望这是一个新手错误，并且我遗漏了一些明显的东西。请注意，我什至还没有尝试使用 jQuery。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T12:40:59.050

您需要`<script>`完全关闭标签。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script> 
```

更改后在 jsfiddle 上效果很好：http: [//jsfiddle.net/PVYM9/](http://jsfiddle.net/PVYM9/)

此外，在 HTML5 中，您可以将 doctype 缩短为 just `<!DOCTYPE html>`，并且无需为标签定义`type`属性。`<script>`例如，参见 jsfiddle。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:41:29.557

您必须以正确的方式关闭脚本标签

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script> 
```

（注意结束`</script>`标签）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T12:41:14.210

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script> // close the script tag properly

        <script type="text/javascript"> // there is no need of writing language="javascript"
            function testFunction() {
                alert('It works');
            }
        </script> 
```

嘿伙计，不需要写 language="javascript" 因为 type 已经指定了它！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T12:47:02.770

尽管是有效的 XML，但如果您使用尾部斜杠（即 ）关闭它们，许多 HTML 元素（例如`script`等`textarea`）在大多数浏览器中都不能正常工作`<element />`。您需要为它们创建打开和关闭标签才能工作 ( `<element></element>`)。XHTML 似乎也是如此。

其他的，比如你的`input`标签，就可以正常工作。我不知道为什么有些需要结束标签而有些不需要，也不是这些元素的列表，我只是从经验中知道其中一些......

# cakephp - 当我输入错误的网址时，cakephp 错误登录

> ID：13933212
> 
> 赞同：2
> 
> 时间：2012-12-18T12:38:45.693
> 
> 标签：cakephp, redirect

这是我的问题：我有一个管理区域，我通过使用 name 和 password 登录来保护它。
当我输入 url 时，我的意思是类似 localhost/admin/area 它重定向到 localhost/user/admin
问题是如果我输入了错误的地址，例如 localhost/admin/545
它会将我带到管理区域和控制器中的错误
这是我的代码：

**应用控制器：**

```
function beforeFilter()
{
    $this->Auth->loginAction = array('controller'=>'users','action'=>'login','admin'=>false);
    $this->Auth->authorize = array('Controller');
    if(!isset($this->request->params['prefix']))
    {
       $this->Auth->allow();
    }
    if(isset($this->request->params['prefix']) && $this->request->params['prefix'] == 'admin')
    {    
      $this->layout = 'admin';
    }
}

function isAuthorized($user)
{
    if(!isset($this->request->params['prefix']))
    {
        return true;
    }
} 
```

**菜单：**

```
<?php
    $pages = $this->requestAction(array('controller'=>'pages','action'=>'menu','admin'=>false)); ?>
    <a href="/index"><img class="title" src="/img/title.png" alt="studio"></a>
    <ul class="menu">
    <?php foreach($pages as $k => $v): $v = current($v);?> 
```

**其余代码是：**

**登录功能：**

```
function login()
{
    if ($this->request->is('post'))
    {
        if ($this->Auth->login())
        {
            return $this->redirect($this->Auth->redirect());
        } else {
           $this->Session->setFlash("Votre login ou votre mot de passe ne correspond pas");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:07:23.240

我认为您可能对 CakePHP 中的 URL 感到困惑。在这里，我将介绍它们是如何工作的。我将假设您已打开管理路由。

**localhost/admin/area** 这个网址是说带我到控制器中的`admin_index`方法。`area`

**localhost/admin/545** 这个网址是说带我到控制器中的`admin_index`方法。`545`

如果控制器不存在，您将获得一个区域。如果您尝试获取特定的 user_id，您可能正在寻找：

```
localhost/admin/user/view/545 
```

这将尝试将用户路由到控制器中的`admin_view`方法`user`并传递 545 user_id。如果用户无权查看此内容，他们将被重定向到登录。

# performance - 加速以数据库为中心的应用程序的方法

> ID：13933217
> 
> 赞同：0
> 
> 时间：2012-12-18T12:39:06.457
> 
> 标签：performance, sql-server-2008

我们有一个应用程序，其中我在 MSSQL Server 中有 65 GB 的数据。大约有 250 个表和 1000 个存储过程和函数。

现在，该应用程序是完整的数据库特定的，几乎所有的逻辑都编码在过程和函数中。一些存储的 procs 需要超过 4-5 分钟才能执行。现在我们的任务是优化/重新设计这些运行缓慢的存储过程。

我们没有太多关于项目/模式/设计的信息，但我们可以访问模式和数据，幸运的是我们只需要处理一个模块来优化，这很慢。（但这涉及许多 SP 和运行超过 1000 行的函数......包含应用程序逻辑......）

我的问题是如何开始这样的项目。我们已经设定了一些不切实际的最后期限，即在 2-3 天内提出修复，而我已经花了一天的时间进行设置！

应该是什么方法：

1.  建议增加硬件基础设施。
2.  重新设计应用程序（将一些计算推到应用程序端）使其不以数据库为中心？
3.  要求更多时间（多少）来优化这个？有趣的是我们不是最初的编码人员，对应用程序的了解非常少，即 SP 和功能中编码的内容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:36:53.730

在尝试任何修复之前，您需要了解问题区域。

您说您只是从一个模块开始，那么我建议使用 SQL Profiler 之类的东西来确定执行语句的频率以及执行所需的时间，并使用这些数据作为起点来查看逻辑可以优化。寻找任何使用游标的操作，这些操作可能会从基于集合的方法中受益。

至于您的三个选项，我会说您必须选择（3），因为您已表示您对应用程序没有透彻的了解，因此您需要进一步了解才能确定在哪里集中精力。我不认为（1）是一个长期的解决方案，尽管它显然会提供一些好处（多少决定了当前和提议的规格）。一旦您有机会首先确定问题区域，您只会知道 (2) 是否是一个有效选项。

祝你好运。

# c# - How to get the second to last directory in a path string in C#

> ID：13933223
> 
> 赞同：5
> 
> 时间：2012-12-18T12:39:18.360
> 
> 标签：c#, string, path, directory

For example,

```
string path = @"C:\User\Desktop\Drop\images\"; 
```

I need to get only `@"C:\User\Desktop\Drop\`

Is there any easy way of doing this?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T12:45:32.267

You can use the `Path` and `Directory` classes:

```
DirectoryInfo parentDir = Directory.GetParent(Path.GetDirectoryName(path));
string parent = parentDir.FullName; 
```

Note that you would get a different result if the path doesn't end with the directory-separator char `\`. Then `images` would be understood as filename and not as directory.

You can also use a subsequent call of `Path.GetDirectoryName`

```
string parent = Path.GetDirectoryName(Path.GetDirectoryName(path)); 
```

This behaviour is documented [here](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx):

> Because the returned path does not include the DirectorySeparatorChar or AltDirectorySeparatorChar, **passing the returned path back into the GetDirectoryName method will result in the truncation of one folder level per subsequent call on the result string.** For example, passing the path "C:\Directory\SubDirectory\test.txt" into the GetDirectoryName method will return "C:\Directory\SubDirectory". Passing that string, "C:\Directory\SubDirectory", into GetDirectoryName will result in "C:\Directory".

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:08:12.253

```
var parent = ""; 
If(path.EndsWith(System.IO.Path.DirectorySeparatorChar) || path.EndsWith(System.IO.Path.AltDirectorySeparatorChar))
{
  parent = Path.GetDirectoryName(Path.GetDirectoryName(path));
  parent = Directory.GetParent(Path.GetDirectoryName(path)).FullName;
}
else
  parent = Path.GetDirectoryName(path); 
```

As i commented GetDirectoryName is self collapsing it returns path without tralling slash - allowing to get next directory.Using Directory.GetParent for then clouse is also valid.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-19T12:04:24.090

Short Answer :)

```
path = Directory.GetParent(Directory.GetParent(path)).ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:43:58.237

This will return "C:\User\Desktop\Drop\" e.g. everything but the last subdir

```
string path = @"C:\User\Desktop\Drop\images";
string sub = path.Substring(0, path.LastIndexOf(@"\") + 1); 
```

Another solution if you have a trailing slash:

```
string path = @"C:\User\Desktop\Drop\images\";
var splitedPath = path.Split('\\');
var output = String.Join(@"\", splitedPath.Take(splitedPath.Length - 2)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T12:45:20.533

Example on the bottom of the page probably will help: [http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname(v=vs.110).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T12:45:28.647

```
using System;

namespace Programs
{
    public class Program
    {      
        public static void Main(string[] args)
        {
            string inputText = @"C:\User\Desktop\Drop\images\";
            Console.WriteLine(inputText.Substring(0, 21));
        }
    }
} 
```

Output:

> C:\User\Desktop\Drop\

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T12:49:52.193

There is probably some simple way to do this using the File or Path classes, but you could also solve it by doing something like this (Note: not tested):

```
string fullPath = "C:\User\Desktop\Drop\images\";
string[] allDirs = fullPath.split(System.IO.Path.PathSeparator);

string lastDir = allDirs[(allDirs.length - 1)];
string secondToLastDir= allDirs[(allDirs.length - 2)];
// etc... 
```

# javascript - window.location.hash = '' 不会删除散列本身

> ID：13933227
> 
> 赞同：2
> 
> 时间：2012-12-18T12:39:32.797
> 
> 标签：javascript, jquery, hash

> **可能重复：**
> [如何在不刷新页面的情况下使用 JavaScript 从 window.location 中删除哈希？](https://stackoverflow.com/questions/1397329/how-to-remove-the-hash-from-window-location-with-javascript-without-page-refresh)

关闭幻灯片时，我不想让地址恢复正常，但“#”仍然存在，有什么办法可以克服这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:47:04.467

来自[https://developer.mozilla.org/en/DOM/window.location](https://developer.mozilla.org/en/DOM/window.location)：

> 例子
> 
> 每当修改位置对象的属性时，将使用 URL 加载文档，就像使用修改后的 URL 调用 window.location.assign() 一样。

我认为这个问题解决了你想要使用 jQuery 的问题：

[在jQuery中更改哈希而不重新加载](https://stackoverflow.com/questions/1939041/change-hash-without-reload-in-jquery)

其他相关问题：

[更改浏览器中的 URL 而不使用 JavaScript 加载新页面](https://stackoverflow.com/questions/136458/change-the-url-in-the-browser-without-loading-the-new-page-using-javascript)

[如何在不刷新页面的情况下使用 JavaScript 从 window.location 中删除哈希？](https://stackoverflow.com/questions/1397329/how-to-remove-the-hash-from-window-location-with-javascript-without-page-refresh)

[如何在不创建页面重新加载的情况下更改 Firefox window.location.hash？](https://stackoverflow.com/questions/6312518/how-can-i-change-firefox-window-location-hash-without-creating-a-page-reload)

# c# - MessageBox.Show 导致光标更改不被拾取

> ID：13933232
> 
> 赞同：2
> 
> 时间：2012-12-18T12:40:01.180
> 
> 标签：c#, wpf

我有一个标准的 WPF MainWindow 类，我想使用 显示一个消息框`System.Windows.MessageBox`，从用户那里获得响应，然后运行一个长时间运行的操作（下面通过调用来模拟`Sleep(...)`）。我想将光标设置`Cursors.Wait`在操作之前，并在最后恢复正常。这是我所拥有的：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void ui_button_Click(object sender, RoutedEventArgs e)
    {
        if (MessageBox.Show("Do you want to change the background?", "Change background", MessageBoxButton.YesNo) == MessageBoxResult.No)
        {
            return;
        }

        Cursor = Cursors.Wait;

        Dispatcher.BeginInvoke(DispatcherPriority.Normal, new Action(() =>
            {
                System.Threading.Thread.Sleep(1500);

                if (Background != Brushes.Green)
                {
                    Background = Brushes.Green;
                }
                else
                {
                    Background = Brushes.White;
                }
                Cursor = Cursors.Arrow;
            }));
    }
} 
```

这不起作用：光标永远不会作为等待光标出现。但是，如果我注释掉这些`MessageBox`行，它确实有效。这里发生了什么，我怎样才能让它按预期工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T13:07:49.560

以下代码对我有用：而不是

```
Cursor = Cursors.Wait; 
```

试试这个：

```
Mouse.OverrideCursor = Cursors.Wait;
Mouse.UpdateCursor(); 
```

您以相反的方式关闭等待光标：

```
Mouse.OverrideCursor = null;
Mouse.UpdateCursor(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:05:14.540

您在与光标更改相同的 UI 线程中运行背景更改。当然它正忙于睡眠，所以它不显示光标变化。只需按应有的方式举例（有几个线程），一切都会好起来的！

```
 private void ui_button_Click(object sender, RoutedEventArgs e)
  {
     if (MessageBox.Show("Do you want to change the background?", "Change background", MessageBoxButton.YesNo) == MessageBoxResult.No)
     {
        return;
     }

     Cursor = Cursors.Wait;

     BackgroundWorker bw = new BackgroundWorker();
     bw.DoWork += BwOnDoWork;
     bw.RunWorkerCompleted += BwOnRunWorkerCompleted;
     bw.RunWorkerAsync();
  }

  private void BwOnRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs runWorkerCompletedEventArgs)
  {
     if (Background != Brushes.Green)
     {
        Background = Brushes.Green;
     }
     else
     {
        Background = Brushes.White;
     }
     Cursor = Cursors.Arrow;
  }

  private void BwOnDoWork(object sender, DoWorkEventArgs doWorkEventArgs)
  {
     System.Threading.Thread.Sleep(1500);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:50:56.153

尝试

```
DialogResult dialogResult = MessageBox.Show("Do you want to change the background?", "Change background", MessageBoxButtons.YesNo);
if (dialogResult == DialogResult.No)
{
    return;
} 
```

代替

```
if (MessageBox.Show("Do you want to change the background?", "Change background", MessageBoxButton.YesNo) == MessageBoxResult.No) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:09:00.373

尝试将要运行的代码放在其他线程中

```
 ThreadPool.QueueUserWorkItem(delegate
     {
       //your code here...
     }); 
```

# java - java.util.ArrayList 和“Enum”的异常错误消息

> ID：13933235
> 
> 赞同：1
> 
> 时间：2012-12-18T12:40:04.547
> 
> 标签：java, arraylist, syntax-error

我有一个非常简单的家庭作业程序，我正在尝试使用存储在 ArrayList 中的名为“Payment”（可怕的名字，我知道）的类按年和月对账单进行分组（我愿意接受关于更好的容器）。

但是我从 Eclipse 收到一条奇怪的错误消息（将放在最后）。

```
public class Payment {
    private double[] Month;
    private int Year;
    private boolean Paid;

    ....
    // A lot of setters, getters, nothing important
} 
```

现在我想创建一个数组列表

```
import java.util.ArrayList;

public class Bill {
    ArrayList<Payment> Money = new ArrayList<Payment>();
    Money. // error -> Money didn't get highlighted, intellisense did not provide 
                      // a list of methods 
```

错误内容如下：

```
Multiple markers at this line:
    Syntax error, insert "enum Identifier" to complete EnumHeaderName
    Syntax error on token "Money", delete this token
    Syntax error on token "Money", delete this token
    Syntax error, insert "EnumBody" to complete EnumDeclaration 
```

我完全不知道为什么会这样。我进入我的主文件进行测试，它在那里工作，只是不在这里，在“Bill”类中，现在基本上是空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:43:48.740

似乎您正试图在参考上调用某些`ArrayList`方法。`Money`

请注意，您不能在类中直接包含这样的语句。你需要有一些`method`可以放置的地方。

这是一个例子： -

```
public int getListSize() {
    return Money.size();
} 
```

如果你把`Money.size()`所有的方法都放在外面，那将是一个编译器错误。: -

```
public class Demo {
    Money.size();  // Compiler Error

    public void getSize() {
        Money.size();   // Ok. Well, I have just added it plain to show it works
                        // Ideally you would return it, or print it.
    }
} 
```

但是，您可以在 RHS 上调用，将返回值分配给 int：-

```
public class Demo {
    int size = Money.size();  // Now this is fine
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:43:45.943

您似乎想从`Money`类主体中的ArrayList 调用方法`Bill`。将方法调用放入构造函数或方法中。

顺便说一句，尝试遵循 Java[命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)。变量名应为“lowerCamelCase”。

# java - Java/Lucene 在多个字段中搜索子字符串

> ID：13933241
> 
> 赞同：2
> 
> 时间：2012-12-18T12:40:22.113
> 
> 标签：java, search, lucene

我正在使用 Lucence V3.1 和 Java 1.6。

我正在尝试编写允许我进行多字段短语搜索的代码（使用 java 和 lucene）。但是，我不希望该短语与字段中的值完全匹配。我想要的是检查该短语是否实际上是字段中值的子字符串。我尝试了以下但还没有运气：

```
IndexReader reader = IndexReader.Open("<lucene dir>");
Searcher searcher = new IndexSearcher(reader);

BooleanQuery booleanQuery = new BooleanQuery();
Query query1 = new TermQuery(new Term("<field-name>", "<text>"));
booleanQuery.add(query1, BooleanClause.Occur.SHOULD);
Hits hits = searcher.Search(booleanQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:53:02.933

只使用引号？就像“这是子字符串”。这肯定适用于 lucene`QueryParser`

如果要在 a 中`Query`使用 a `PhraseQuery`。另请参阅[http://lucene.apache.org/core/old_versioned_docs/versions/3_1_0/api/core/org/apache/lucene/search/PhraseQuery.html](http://lucene.apache.org/core/old_versioned_docs/versions/3_1_0/api/core/org/apache/lucene/search/PhraseQuery.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:28:46.897

您在索引时使用了哪个分析器？

如果你使用标准分析器，你不应该遇到这样的问题......

PS：始终使用相同的分析器进行索引和搜索

# php - SQL Server 中更新日期记录的问题

> ID：13933246
> 
> 赞同：-1
> 
> 时间：2012-12-18T12:40:30.700
> 
> 标签：php, sql, sql-server

所以我有这个查询，它输出了一些数据。

我在这里有这个查询：

```
$lista="Select * from forma WHERE id=$id" or die(odbc_error()); 
```

格式表有一个数据列，它是日期时间类型，我需要它打印成：Y/m/d 类型。

请问我该怎么做？在查询中？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:46:06.600

您可以使用[**`CONVERT`**](http://www.w3schools.com/sql/func_convert.asp) SQL Server。

看

```
Select convert(varchar(10),yourdatefield,1) AS '[YOUR FORMAT]' from table name 
```

读这个：

*   [**如何在 SQL Server 中格式化日期或日期时间**。](http://weblogs.sqlteam.com/jeffs/archive/2007/04/13/format-date-sql-server.aspx)

# mysql - MySQL - 2 路查询检查

> ID：13933248
> 
> 赞同：1
> 
> 时间：2012-12-18T12:40:34.443
> 
> 标签：mysql, database-design

我正在我的网络应用程序中实现“**添加朋友**”，因此用户可以将其他用户添加为恶魔。

我们有 2 个表：**tbl_users**和**tbl_relations**， tbl_users 具有注册用户的唯一 ID， tbl_relations 将存储朋友用户，例如 tbl_relations 中的一些行是：

```
id     user_id_1     user_id_2
1      4             6
2      4             8
3      8             23
4      12            84
5      3             4
... 
```

在上面的结果中，id 是 tbl_relations 的唯一 id，user_id_1 是 tbl_users 的外键，user_id_2 是 tbl_users 的外键，现在假设我们要查询并检查 id 为“4”的用户是否是 id 用户的朋友“9”与否，这里我们需要以两种方式发送查询，我的意思是：

```
SELECT * FROM tbl_relations WHERE (user_id_1 = '4' AND user_id_2 = '9') OR (user_id_1 = '9' AND user_id_2 = '4') 
```

上面的查询对我来说似乎有点奇怪，我猜应该有另一种实现方式，也许是不同的数据库结构？

或者另一个查询，我们想获取id 为“4”和“8”的用户之间的**共同**朋友，在这种情况下我应该如何获得共同朋友？有没有更好的数据库结构呢？

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:45:10.267

我会去规范化关系，使其对称。也就是说，如果 1 和 2 是朋友，我将有两行 (1,2) 和 (2,1)。

缺点是它的大小是两倍，并且在建立和破坏友谊时必须进行 2 次写入。优点是您的所有读取查询都更简单。这可能是一个很好的权衡，因为大多数时候你是在阅读而不是写作。

这还有一个额外的好处，如果您最终超出了一个数据库并决定进行用户分片，您不必遍历所有其他数据库分片来找出一个人的朋友是谁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:45:44.527

如果这样做，则每次更新时都必须检查重复项。为什么没有

> user_id1 朋友 ID

然后查询为

> select * from tbl_relations where user_id1 in (4,9)

这似乎仍然很奇怪，因为它暗示“朋友”关系是单向的。

为了获得“共同”的朋友——如果你这样做——

> select * from tbl_relations t0
> join tbl_relations t1 on t0.friend_id = t1.friend_id
> where t0.user_id1 = ? 和 t1.user_id1 = ？

# sql - SQL Server WHERE 条件不考虑空格

> ID：13933250
> 
> 赞同：3
> 
> 时间：2012-12-18T12:40:46.567
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我的名字和姓氏带有尾随空格。我有两个 SQL 查询——即使我搜索没有空格，第一个查询也会返回结果。（第一个查询返回不需要的结果）。

1.  这种行为在所有版本的 SQL Server 中是否一致？
2.  这是一种已知的行为吗？它是否记录在`msdn`for 的任何地方`SQL Server 2008 R2`？

**代码**

```
DECLARE @NameTable TABLE (first_name varchar(40),last_name varchar(40))
INSERT INTO @NameTable VALUES ('STEVEN    ','STANLEY   ');

--QUERY 1
SELECT first_name AS [FirstName], last_name AS [LastName]
FROM  @NameTable A
WHERE (first_name = 'STEVEN')
AND (last_name = 'STANLEY')

--QUERY 2       
SELECT first_name AS [FirstName], last_name AS [LastName]
FROM  @NameTable A
WHERE (( ISNULL(first_name,'')+' ' +ISNULL(last_name,'') ) = 'STEVEN STANLEY')

--QUERY 3   (With LTRIM and RTRIM)    
SELECT first_name AS [FirstName], last_name AS [LastName]
FROM  @NameTable A
WHERE (( ISNULL(LTRIM(RTRIM(first_name)),'')+' ' +ISNULL(LTRIM(RTRIM(last_name)),'') ) = 'STEVEN STANLEY') 
```

**参考**：

1.  [数据长度](http://msdn.microsoft.com/en-in/library/ms173486.aspx)
2.  [在 SQL Server 2005 中，len() 和 datalength() 有什么区别？](https://stackoverflow.com/questions/558102/in-sql-server-2005-what-is-the-difference-between-len-and-datalength)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T12:51:17.670

请参阅[http://support.microsoft.com/kb/316626](http://support.microsoft.com/kb/316626)

> SQL Server 遵循关于如何比较字符串和空格的 ANSI/ISO SQL-92 规范（第 8.2 节，一般规则 #3）。ANSI 标准要求对比较中使用的字符串进行填充，以便它们的长度在比较之前匹配。填充直接影响 WHERE 和 HAVING 子句谓词的语义以及其他 Transact-SQL 字符串比较。例如，Transact-SQL 认为字符串“abc”和“abc”对于大多数比较操作是等效的。
> 
> 此规则的唯一例外是 LIKE 谓词。当 LIKE 谓词表达式的右侧包含一个带有尾随空格的值时，SQL Server 不会在比较发生之前将这两个值填充到相同的长度。因为根据定义，LIKE 谓词的目的是促进模式搜索而不是简单的字符串相等测试，所以这并不违反前面提到的 ANSI SQL-92 规范部分。

如果你想避免这种情况，你可以添加一个附加条件，如下所示

参考：[数据长度](http://msdn.microsoft.com/en-in/library/ms173486.aspx)

```
SELECT first_name AS [FirstName], last_name AS [LastName],first_name+last_name,LEN(first_name+last_name)
FROM  @NameTable A
WHERE (first_name = 'STEVEN') and DATALENGTH(first_name)=DATALENGTH(RTRIM(first_name))
AND (last_name = 'STANLEY') and DATALENGTH(last_name)=DATALENGTH(RTRIM(last_name)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:46:23.043

但是我不能说我有一些与字符串与尾随空格的比较相关的东西--- [http://support.microsoft.com/kb/316626](http://support.microsoft.com/kb/316626)

（编辑）

你能检查这个代码吗？

```
SELECT first_name AS [FirstName], last_name AS [LastName]
FROM  @NameTable A
WHERE (left(first_name,6) = 'STEVEN')+' '+(right(last_name,6) = 'STANLEY') 
```

（对于有 6 个字符的名称）

# sql - 递归 SQL Server 查询

> ID：13933255
> 
> 赞同：2
> 
> 时间：2012-12-18T12:40:54.587
> 
> 标签：sql, sql-server, recursion

在具有如下`reviewers`结构的表中：

```
reviewer | reviewee
===================
2        |      1
3        |      2
4        |      3
5        |      4 
```

在函数调用中，我知道 a`reviewer-id`和 a `reviewee-id`（被审核者想要检索的项目的所有者）。

我现在正在尝试发送一个查询，该查询迭代审阅者表中的所有条目，从审阅者开始，到审阅者的 id 结束（并将其与我知道的审阅者 id 匹配）。所以我试图找出reviewee和reviewer之间是否存在联系。

是否可以在单个查询中执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T12:46:51.593

你可以这样做：

```
WITH CTE
AS
(
   SELECT reviewer, reviewee
   FROM TableName 
   WHERE reviewee = @revieweeID
   UNION ALL
   SELECT p.reviewer, p.reviewee 
   FROM CTE c
   INNER JOIN TableName p ON c.reviewee = p.reviewer
)
SELECT * 
FROM CTE;
--- WHERE reviewer = @reviewerID; 
```

## [演示](https://data.stackexchange.com/stackoverflow/query/89270/recursive-sql-server-query)

# javascript - IE9 和 Firefox 的 Crypto.getRandomValues 实现

> ID：13933263
> 
> 赞同：0
> 
> 时间：2012-12-18T12:41:02.520
> 
> 标签：javascript, firefox, cryptography, internet-explorer-9

我正在寻找 crypto.getRandomValues 的实现以在 Internet Explorer 9 和 Firefox 中使用它。从我对 JS/HTML 的基本知识来看，这些浏览器中不可用。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T21:34:55.213

我能找到的最好的例子是`alert(window.crypto.getRandomValues(new Uint8Array(2))[1])`. 这适用于 Firefox 和 chrome，但不适用于 IE。您必须使用第三方库，例如[Clipperz](https://www.clipperz.com/open_source/javascript_crypto_library/)，如果您希望这三个库都具有随机性，请检查其兼容性。

# batch-file - 根据分隔符检索可变长度子字符串

> ID：13933264
> 
> 赞同：4
> 
> 时间：2012-12-18T12:41:03.617
> 
> 标签：batch-file, dos

我正在尝试制作一个简单的命令来删除单词后的所有内容，并回显结果。

例子：

> street-ct-2a21340565364563563
> 这将是不同的-ss-3c63456345645635634 这可能是别的
> 东西-我们-5d23453453634563456

删除所有期望第一部分

就像是：

> 街道ct-221340565364563563

会导致：

> 街道

这不是保存在txt文件或任何东西中，有可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T12:46:56.040

**编辑：**假设您尝试提取的部分具有可变长度，这似乎是一个更好的解决方案：

```
set str=street-ct-2a21340565364563563
for /f "delims=-" %%a in ("%str%") do set part=%%a
echo.%part% 
```

在那个片段中，只要出现“ `-`”，我们就拆分字符串，然后将拆分字符串的第一部分分配给“ `part`”变量。`for`可以在[此处](http://www.dostips.com/DtTipsStringManipulation.php#Snippets.SplitString)找到有关如何使用拆分字符串的其他示例。

* * *

根据[this reference](http://www.dostips.com/DtTipsStringManipulation.php)，您可以执行以下操作：

```
set str=street-ct-2a21340565364563563
set substr=%str:~0,6%
echo.%substr% 
```

# xpath - XPath 1.0 从 XML 获取最高日期

> ID：13933268
> 
> 赞同：1
> 
> 时间：2012-12-18T12:41:12.073
> 
> 标签：xpath

在 XML 文件中，我有许多日期字段。我需要找出哪一个是最高值。不幸的是，我必须使用 XPath 1.0，所以没有一种简单的方法可以做到这一点。

我从这个 XML 开始：

```
<root>
    <value>20120103</value>
    <value>20130103</value>
    <value>20120101</value>
    <value>20140103</value>
    <value>20100103</value>
</root> 
```

由此，我可以使用此 xpath 语句获得最高值：

```
/root/value[not(text() <= preceding-sibling::value/text()) and not(text() <=following-sibling::value/text
())] 
```

然而，我正在使用的真正的 XML 有这样的日期字段：

```
<root>
    <value>2012-01-03</value>
    <value>2013-01-03</value>
    <value>2012-01-01</value>
    <value>2014-01-03</value>
    <value>2010-01-03</value>
</root> 
```

要执行相同的 XPath，我必须使用 substring 和 concat 来删除减号。但是，我使用 XPath 的应用程序和 Oxygen XML 编辑器告诉我 concat 和 substring 不是 Xpath 1.0 函数（尽管有几页告诉我它们是......）

当我告诉 Oxygen 它是 Xpath 2.0 时，我可以使用以下语句获取值：

```
/root/value[not(concat(concat(substring(text(),1,4),substring(text(),6,2)),substring(text(),9,2)) <= preceding-sibling::value/concat(concat(substring(text(),1,4),substring(text(),6,2)),substring(text(),9,2))) and not
(concat(concat(substring(text(),1,4),substring(text(),6,2)),substring(text(),9,2)) <=following-sibling::value/concat(concat(substring(text(),1,4),substring(text(),6,2)),substring(text(),9,2)))] 
```

任何想法为什么它不能与 Xpath 1.0 一起使用以及我如何解决这个问题？

编辑：

我以为我通过使用 translate 来删除减号越来越近了：

```
/root/value[not(translate(text(),'-','') <= translate(preceding-sibling::value/text(),'-','')) and not(translate(text(),'-','') <=translate(following-sibling::value/text(),'-','')
)] 
```

但出于某种原因，这会产生两个值：

2013-01-03 2014-01-03

虽然我只期待第二个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:57:19.483

**这不能用单个 XPath 1.0 表达式来确定，因为**：

1.  在 XPath 1.0 中，没有用于字符串的`<`or`>`运算符。

2.  尽管可以使用`translate()`从上下文节点中删除连字符，但不可能在单个 XPath 1.0 表达式中将其与所有其他值进行比较，每个值都经过相同的转换。

**XPath 2.0 解决方案**：

```
max(/*/*/xs:date(.)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T12:49:33.330

实际上，您的第一个 XPath

```
/root/value[not(text() <= preceding-sibling::value/text()) and not(text() <=following-sibling::value/text())] 
```

在这两种情况下都应该可以正常工作。

只要格式是带前导零的年、月、日顺序...

但是，如果有重复的日子，它将不起作用，因此最好使用：

```
(/root/value[not(text() < preceding-sibling::value/text()) and not(text() < following-sibling::value/text())])[1] 
```

# postgresql - 使用 WAL 文件进行 PostgreSQL 记录版本控制？

> ID：13933275
> 
> 赞同：0
> 
> 时间：2012-12-18T12:41:31.837
> 
> 标签：postgresql, version-control

我希望能够跟踪 PostgreSQL 数据库中记录的更改。我考虑过使用版本字段和更新规则或触发器，以便将以前版本的记录保存在表中（或单独的表中）。这样做的好处是可以使用简单的 select 语句查看记录的版本历史记录。但是，我认为这个功能可能很少使用。

我怎样才能满足能够使用 WAL 文件为记录构建“版本历史”的要求？阅读 PostgreSQL.org 上的 WAL 和时间点恢复文档帮助我了解了如何将整个数据库的状态回滚到任意时间点，但不了解如何处理特定记录中的更新错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T21:44:59.177

不，您目前不能这样做。在 postgresql-hackers 邮件列表（开发列表）上正在进行大量工作，以重做 WAL 并构建一个接口以允许在（可能）PostgreSQL 9.3 中进行逻辑复制。

这基本上是您似乎正在尝试做的事情，并且根据该列表上的讨论，这绝对不是一项微不足道的任务。

# java - 哪个更快？Integer.valueOf(String string) 还是 Integer.parseInt(String string)？

> ID：13933287
> 
> 赞同：11
> 
> 时间：2012-12-18T12:42:20.913
> 
> 标签：java, android

我想知道哪种方法更快？

`Integer.valueOf(String string)`还是`Integer.parseInt(String string)`？

两种方法之间是否有任何性能或内存差异？

我[在java中看到了parseInt和valueOf之间的区别？](https://stackoverflow.com/questions/508665/difference-between-parseint-and-valueof-in-java)但这并不能解释性能方面的差异。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-18T12:45:36.290

我不会看性能。API 表示它`Integer.valueOf(String)`的解释与传递给 的方式相同`Integer.parseInt(String)`，只是它被包装在`Integer`. 我会看看你需要什么：一个`Integer`或一个`int`.

`Integer.valueOf`返回一个`Integer`.

`Integer.parseInt`返回一个`int`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T12:46:48.107

`Integer.valueOf()`在内部使用`Integer.parseInt()`并`valueOf`返回`Integer`Object 而`parseInt()`返回`int`. 所以`parseInt()`更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T12:45:38.960

`valueOf(String)`返回一个`new Integer()`对象，而`parseInt(String)`返回一个原语`int`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:45:09.433

`Integer.valueOf(String string)`返回一个新创建的包装**对象**。

`Integer i = Integer.valueOf("5");`

`Integer.parseInt(String string)`返回命名的**原语**。

`int i = Integer.parseInt("5");`

# sql-server-2008 - URL 在 ssrs2008 中询问用户名和密码？

> ID：13933289
> 
> 赞同：0
> 
> 时间：2012-12-18T12:42:31.687
> 
> 标签：sql-server-2008, ssrs-2008

我在 ssrs 2008 中开发了一份报告，然后部署它，之后我将 URL 发送给其他人进行检查。

但是每当其他大学使用我的 URL 时，它就会向他们询问用户名和密码。

我该如何克服这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:02:40.830

您必须设置此属性才能关闭服务器登录提示 EnableDatabaseLogonPrompt="False"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:45:18.443

由于此报告在您的 ssrs 中，其他用户必须输入您的凭据才能访问它……您无法克服它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:25:21.050

您的 ReportServer 可能需要[使用 Windows 身份验证进行设置，](http://msdn.microsoft.com/en-us/library/cc281253%28v=sql.100%29.aspx)以允许您的 Intranet 用户使用他们自己的凭据访问报告。如果用户在您的网络之外，那么可能会查看可用于身份验证的[其他选项](http://msdn.microsoft.com/en-us/library/bb283249%28v=sql.100%29.aspx)（基本、表单等）。

# iphone - 我在objective-cA头文件中使用了preferences.framework私有框架，没有找到？

> ID：13933290
> 
> 赞同：1
> 
> 时间：2012-12-18T12:42:34.323
> 
> 标签：iphone, ios

我正在使用[PrivateFrameworkHeader-iOS-iPhone-5.- / Preferences.framework](https://github.com/masbog/PrivateFrameworkHeader-iOS-iPhone-5.-/blob/master/Preferences.framework/PSListItemsController.h)。

找不到头文件。一些头文件继承自**pscontroller.h**，但**pscontroller.h 不在**框架中。

如果有人知道这件事，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:57:56.317

转到`Build Phases`您`target`在 Xcode 中的 并展开`Link Binary With Libraries section`. 并从您的查找器中添加库或框架，或者将preferences.framework 拖到您的扩展`Link Binary With Libraries section`中。

我希望这可以帮助你...

# jquery - hide() 到 show() 与内容滑块

> ID：13933291
> 
> 赞同：0
> 
> 时间：2012-12-18T12:42:37.503
> 
> 标签：jquery, slider, hide, show

我是 stackoverflow 的新手，这是我的第一篇文章。我试图让 hide() 到 show() 处理多个对象，但我无法让它与内容滑块（液体滑块）一起工作。 [http://www.alfonsocarmelo.it/margherita/index10.html](http://www.alfonsocarmelo.it/margherita/index10.html) 加载网站时，可以查看滑块（相机滑块），但是，当我点击左下角的“architettura”，然后点击“centroculturee - Expo' Flussi di eVenti, Catania" 应该使用液体滑块脚本查看内容滑块（图像和文本）。脚本单独运行完美，但在网站上有问题；它可见狭窄，而完美视图的宽度为视口的 100%。

HTML

```
<div id="architettura">
    <div class="content">
       <h4><span>A</span>rchitettura<span>/</span></h4>
       <img src="images/architettura/architettura.jpg">  
    </div>
 </div>

 <!-- architettura_centro_culturale_catania--> 
 <div id="architettura_centro_culturale_catania">
    <div class="content">
        <div class="liquid-slider"  id="slider-id">
                <div>
                  <h2 class="title">1</h2>

                   <div class="immagini">
                      <img src="images/pittura_02.jpg"> <!-- ELIMINAZIONE DIV E METTERE X OGNI FOTO align="left" width="60%" height="36%"-->
                      <img src="images/pittura_03.jpg">
                      <img src="images/pittura_04.jpg">
                   </div>

                  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas metus nulla, commodo a sodales sed, dignissim pretium nunc. Nam et lacus neque. Sed volutpat ante id mauris laoreet vestibulum. Nam blandit felis non neque cursus aliquet. Morbi vel enim dignissim massa dignissim commodo vitae quis tellus. Nunc non mollis nulla. Sed consectetur elit id mi consectetur bibendum. Ut enim massa, sodales tempor convallis et, iaculis ac massa. Etiam suscipit nisl eget lorem pellentesque quis iaculis mi mattis. Aliquam sit amet purus lectus. Maecenas tempor ornare sollicitudindasdas</p>
                </div>
                <div>
                  <h2 class="title">2</h2>
                  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas metus nulla, commodo a sodales sed, dignissim pretium nunc. Nam et lacus neque. Sed volutpat ante id mauris laoreet vestibulum. Nam blandit felis non neque cursus aliquet. Morbi vel enim dignissim massa dignissim commodo vitae quis tellus. Nunc non mollis nulla. Sed consectetur elit id mi consectetur bibendum. Ut enim massa, sodales tempor convallis et, iaculis ac massa. Etiam suscipit nisl eget lorem pellentesque quis iaculis mi mattis. Aliquam sit amet purus lectus. Maecenas tempor ornare sollicitudin.</p>
                </div>          
                <div>
                  <h2 class="title">3</h2>
                  <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. Donec non enim in turpis pulvinar facilisis. Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus</p>
                </div>
                <div>
                  <h2 class="title">4</h2>
                  <p>Proin nec turpis eget dolor dictum lacinia. Nullam nunc magna, tincidunt eu porta in, faucibus sed magna. Suspendisse laoreet ornare ullamcorper. Nulla in tortor nibh. Pellentesque sed est vitae odio vestibulum aliquet in nec leo.</p>
                  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas metus nulla, commodo a sodales sed, dignissim pretium nunc. Nam et lacus neque. Sed volutpat ante id mauris laoreet vestibulum. Nam blandit felis non neque cursus aliquet. Morbi vel enim dignissim massa dignissim commodo vitae quis tellus. Nunc non mollis nulla. Sed consectetur elit id mi consectetur bibendum. Ut enim massa, sodales tempor convallis et, iaculis ac massa. Etiam suscipit nisl eget lorem pellentesque quis iaculis mi mattis. Aliquam sit amet purus lectus. Maecenas tempor ornare sollicitudin.</p>
                </div>
        </div>
        <!-- Liquid Slider Ends Here -->

    </div> 
    <!-- end content -->
 </div>
 <!-- end architettura_centro_culturale_catania--> 

 <!-- architettura_centro_culturale_giarre--> 
 <div id="architettura_centro_culturale_giarre"></div>
 <!-- end centro culturale Giarre -->

 <div id="slideshow">
    <div class="content">
          <div class="fluid_container">

              <div class="camera_wrap camera_magenta_skin" id="camera_wrap_1">

                <div data-src="images/slides/prova3_modificata.jpg">

                    <div class="camera_caption fadeFromBottom">
                        pittura <span>/</span> LA RICCHEZZA INTERIORE
                    </div>

                </div>

                <div data-src="images/slides/prova4_modificata.jpg">
                    <div class="camera_caption fadeFromBottom">
                        architettura <span>/</span> MUSEO D&acute;ARTE CONTEMPORANEA E CENTRO POLIFUNZIONALE
                    </div>
                </div>

            </div> <!-- #camera_wrap_1 -->

          </div> <!-- .fluid_container  -->
    </div>
</div>

</section>

<footer>
 <nav>
    <ul id="fmenu">
        <li>
         <a href="#" id="idarchitettura"><span>a</span>rchitettura</a>
            <ul id="fmenu_architettura">
                <li id="centro_culturale_catania"><a href="#">centro culturale - Expo' Flussi di eVenti, Catania </a></li>
                <li id="centro_culturale_giarre"><a href="#">centro culturale, Giarre</a></li>
            </ul>  
        </li>
        <li>
         <a href="#" id="idpittura"><span>p</span>ittura</a>
            <ul id="fmenu_pittura">
                <li id="la_ricchezza_interiore"><a href="#">la ricchezza interiore</a></li>
                <li id="trattenuta_da_1_sentimento"><a href="#">trattenuta da un sentimento</a></li>
                <li id="il_bacio"><a href="#">il bacio</a></li>
                <li id="sguardo_ignoto"><a href="#">sguardo all&acute;Ignoto</a></li>
                <li id="kolorimmersi"><a href="#">kolorimmersi</a></li>    
                <li id="gli_amanti"><a href="#">gli Amanti</a></li>
                <li id="la_danzatrice"><a href="#">la danza(U)trice</a></li>
                <li id="lottare_senza_mani_senza_piedi"><a href="#">lottare senza mani e senza piedi</a></li>
                <li id="kolorinaere"><a href="#">kolorinaere</a></li>
            </ul>
        </li>
        <li>
         <a href="#" id="iddesign"><span>d</span>esign</a>
            <ul id="fmenu_design">
                <li id="borse_accessori"><a href="#">borse e accessori</a></li>
                <li id="monili"><a href="#">monili</a></li>
                <li id="oggetti_arredo"><a href="#">oggetti d&acute;arredo</a></li>
            </ul>   
        </li>
        <li id="pubblication"><a href="#"><span>p</span>ubblicazioni</a></li>
        <li id="profile"><a href="#"><span>p</span>rofilo</a></li>
    </ul>        
 </nav>
    </footer> 
```

查询代码

```
 $('#idarchitettura').click(function() { 

              $('#slideshow').hide();

              $('#architettura_centro_culturale_catania').hide();
              $('#architettura_centro_culturale_giarre').hide(); 
              $('#pittura').hide();
              $('#pittura_la_ricchezza_interiore').hide();  
              $('#pittura_trattenuta_da_1_sentimento').hide(); 
              $('#pittura_il_bacio').hide(); 
              $('#pittura_sguardo_ignoto').hide();  
              $('#pittura_kolorimmersi').hide(); 
              $('#pittura_gli_amanti').hide(); 
              $('#pittura_la_danzatrice').hide();
              $('#pittura_lottare_senza_mani_senza_piedi').hide();
              $('#pittura_kolorinaere').hide();
              $('#profilo').hide();
              $('#pubblicazioni').hide();
              $('#design').hide();
              $('#design_borse_accessori').hide();
              $('#design_monili').hide();
              $('#design_oggetti_arredo').hide();

              $('#architettura').fadeIn('slow');

              /*for menu'*/
              $('#fmenu_architettura').slideToggle();
              $('#fmenu_pittura').slideUp('fast');
              $('#fmenu_design').slideUp('fast');
        }); 

        $('#centro_culturale_catania').click(function() {

              $('#pubblicazioni').hide();
              $('#profilo').hide(); 
              $('#architettura').hide();
              $('#architettura_centro_culturale_giarre').hide(); 
              $('#pittura').hide(); 
              $('#pittura_la_ricchezza_interiore').hide(); 
              $('#pittura_trattenuta_da_1_sentimento').hide(); 
              $('#pittura_sguardo_ignoto').hide();
              $('#pittura_il_bacio').hide();    
              $('#pittura_kolorimmersi').hide();   
              $('#pittura_gli_amanti').hide(); 
              $('#pittura_la_danzatrice').hide();
              $('#pittura_lottare_senza_mani_senza_piedi').hide();
              $('#pittura_kolorinaere').hide();
              $('#design').hide();
              $('#design_borse_accessori').hide();
              $('#design_monili').hide();
              $('#design_oggetti_arredo').hide();

              $('#architettura_centro_culturale_catania').fadeIn('slow');
        });

    }); 
```

我尝试了另一个滑块脚本，但是，我遇到了同样的问题，所以我认为 hide() 到 show() 的滑块脚本有问题..

任何帮助将不胜感激......我不知道如何做到这一点。谢谢你。

阿方索

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:27:17.400

阿方索，执行一定是错的。我确定您共享的 .js 代码不是插件实现的一部分。另外，我不太明白您为什么要使用单独的 ID 隐藏所有这些 div。即使您真的需要所有这些 ID，我也会添加一个类来一次将它们全部隐藏（将使代码运行得更快）。例如：如果您将所有这些 ID 更改为 class="toHide"，或者添加该类，而不是所有这些行，您可以简单地使用：

```
$('.toHide').hide(); 
```

和繁荣。一切都会一样。[我建议你仔细检查你应该如何使用你的滑块插件](http://liquidslider.kevinbatdorf.com/category/tutorials/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:26:43.233

第七点是正确的，你不应该像那样单独隐藏你的元素。它可能会导致性能问题，而且它也只是草率的代码。

但是，关于[Liquid Slider](http://liquidslider.kevinbatdorf.com)的问题，这是因为滑块不知道面板的高度（因为它们是隐藏的）。

如果您查看 DOM 树，您会看到：

```
<div class="liquid-slider" id="slider-id" style="height: 0px;"> 
```

注意高度是0？

[Liquid Slider](http://liquidslider.kevinbatdorf.com)可让您访问大部分内部功能。您首先必须将滑块设置为对象，然后才能调整高度。我想您可以在`adjustHeight()`显示滑块的单击事件上添加该方法。试试看。

```
var sliderObject = $.data( $('#slider-id')[0], 'liquidSlider');

sliderObject.adjustHeight(); 
```

# c# - 从数据库中检索 DbSyncScopeDescription 对象

> ID：13933292
> 
> 赞同：0
> 
> 时间：2012-12-18T12:42:40.323
> 
> 标签：c#, sql-server, microsoft-sync-framework

当我使用同步框架配置表时，我使用该`DbSyncScopDescription`对象将表添加到范围。现在关闭程序后，我想`DbSyncScopeDescription`从数据库中检索我的对象以加载以下内容：

```
private static Dictionary<string,DbSyncScopeDescription> scopes { get; set; } 
```

我想`load()`在启动程序时调用一个方法来填充字典，以了解可用的范围（简单的部分）并检索范围描述对象以控制范围（困难的部分来自我）。

我想我可以使用`scope_info`数据库中的表来取回范围的名称，但我不知道之后该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:38:01.013

当您获得范围名称时，您会遍历范围列表并为每个范围名称调用 GetDescriptionForScope

# ruby-on-rails - 每次更改 routes.rb 时出现“堆栈级别太深错误”

> ID：13933294
> 
> 赞同：4
> 
> 时间：2012-12-18T12:42:43.743
> 
> 标签：ruby-on-rails, routing, devise

每次我更改我的 routes.rb 时，我都会在任何第一次请求时收到“堆栈级别太深错误”，然后我会收到“路由错误”，直到我重新启动我的开发服务器。重新启动后，一切都像魅力一样。

跟踪显示以下内容：

```
SystemStackError (stack level too deep):
actionpack (3.2.9) lib/action_dispatch/middleware/reloader.rb:70

Rendered /Users/timo/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
Rendered /Users/timo/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
Rendered /Users/timo/.rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (15.6ms) 
```

不幸的是，当这个问题开始发生时，我无法追溯，之后更新或代码更改等等。我所知道的是，它最近开始发生，它发生在 rails 3.2.8 和 mri 1.9.3-p125 上，我更新到 rails 3.2.9 和 mri 1.9.3-p327 没有效果。

这实际上只是烦人（因为它在重新启动后工作）但仍然感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T17:58:35.297

引用自 OP 帖子的早期版本：

> 我能够找到罪魁祸首：设计！当我评论以下几行时，一切正常。
> 
> ```
> devise_for :listeners, :controllers => {:registrations => "listeners/registrations", :invitations => "listeners/invitations"}, :path_names => {:sign_in => 'login', :sign_out => 'logout'}
> devise_scope :listener do
>   get "login", :to => "devise/sessions#new"
> end 
> ```
> 
> 现在我也知道这个问题是重复的： [rails 3 routes stack level too deep devise](https://stackoverflow.com/questions/13919070/rails-3-routes-stack-level-too-deep-devise)

# mysql - 选择多位零

> ID：13933295
> 
> 赞同：0
> 
> 时间：2012-12-18T12:42:46.230
> 
> 标签：mysql, sql

我正在解析一个文件并将其名称/值对存储在 mysql 数据库中。零值有多种数字：0、00、0000。是否有一个查询可以选择所有这些数字，而不连接“或”语句？

```
SELECT * FROM APP WHERE VALUE = '0' OR VALUE = '00' OR VALUE = '000'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:49:40.310

虽然有很多选择`VARCHAR`0,00 的可能性，...（例如`RLIKE`和朋友）我建议您在导入时付出一些额外的努力，并将其转换为`INT`导入时

一些选择器：

*   `colname RLIKE '0+';`
*   `CAST(colname AS UNSIGNED)=0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:46:49.433

使用正则表达式：

`SELECT * FROM APP WHERE VALUE REGEXP '0+';`

# python - 在 Tkinter 和 PIL 中使用带有 PhotoImage 的子样本

> ID：13933299
> 
> 赞同：4
> 
> 时间：2012-12-18T12:43:00.143
> 
> 标签：python, tkinter, python-imaging-library

伙计们，我正在尝试使用 PhotoImage 类中的 subsample 方法来调整我在列表中的图像大小，该列表链接到 Tkinter 中的 Label 小部件，但 python 说没有这样的方法。我知道我可以在调用 PhotoImage 之前使用 Image.resize，但由于我想随时调整图像大小，所以一旦将其转换为 PhotoImage，我不知道该怎么做。有人可以告诉我我做错了什么吗？我对 Tkinter 比较陌生，对 PIL 也很陌生……谢谢……

```
from Tkinter import *
from PIL import Image, ImageTk

class imgList(object):
        def __init__(self,imgs):
            self.list=[]
            for i in imgs:
                image=Image.open(i)
                photo=ImageTk.PhotoImage(image)
                self.list.append(photo)

        def resize(self,num,fact):
            self.list[num]=self.list[num].subsample(fact)
            #image=image.resize((50,100),Image.ANTIALIAS)
            #photo=ImageTk.PhotoImage(image)
            #photo.subsample(2,2)
            #self.list[num]=photo

class Slot(object):

    def __init__(self,root,canvas,appimg,x,y):
        self.root=root
        self.canvas=canvas
        self.appimage=appimg
        self.l=Label(self.root,image=self.appimage)
        self.l.place(x=x,y=y)

class View(object):
    def __init__(self,canvas):
        self.canvas=canvas

class win1(View):
    def slotbind(self,event):
        print("heloo")
        self.imglist.resize(0,2)
    def draw(self,root,tv):
        self.canvas.delete(ALL)
        self.root=root
        #self.photolist=pl
        self.imglist=imgList(["pic1.bmp"])
        self.tv=tv
        self.s1=Slot(self.root,self.canvas,self.imglist.list[0],10,10)
        self.s1.l.bind("<1>",self.slotbind)
        self.qbtn=Button(self.root,text="quit",command=self.quit)
        self.qbtn.place(x=270,y=100)
        self.qbtn.lift()
    def quit(self):
        self.qbtn.destroy()
        self.s1.l.destroy()
        self.tv[1].draw(self.root,self.tv)

class win2(View):
    def draw(self,root,tv):
        self.canvas.delete(ALL)
        self.root=root
        self.tv=tv
        imglist=imgList(["pic3.bmp","pic4.bmp"])
        self.s1=Slot(self.root,self.canvas,imglist.list[1],270,10)
        self.qbtn=Button(self.root,text="quit2",command=self.quit)
        self.qbtn.place(x=500,y=100)
        self.qbtn.lift()
    def quit(self):
        self.qbtn.destroy()
        self.s1.l.destroy()
        self.tv[0].draw(self.root,self.tv)

class win3(View):
    def draw(self):
        pass

class App(object):
    def __init__(self, width=640, height=480):

        self.width = width
        self.height = height

        self.root = Tk()
        self.root.title("tkinter_test01")
        self.root.geometry("%sx%s"%(self.width, self.height))

        self.canvas = Canvas(self.root, width=self.width, height=self.height)

        self.theviews=[win1(self.canvas),win2(self.canvas),win3(self.canvas)]
        self.theviews[0].draw(self.root,self.theviews)
        self.canvas.pack()
        self.root.mainloop()

app=App() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:03:01.783

坏消息，`subsample`在`zoom`中不可用`ImageTk.PhotoImage`，仅在 中可用`Tkinter.PhotoImage`。后者仅接受 PPM、PGM、GIF，如果您使用 Python 和 Tk 8.6b2 或更高版本（目前不太可能），那么还支持 PNG 图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:16:06.217

也许这段代码可以解决问题 - 我成功地尝试了：

```
# http://effbot.org/imagingbook/image.htm
import Tkinter
# from PIL 
import Image, ImageTk
im = Image.open('z:/g1.jpg')
# imc=im.copy()
imc=im.transpose(Image.ROTATE_270)
(x0,y0,x1,y1)=imc.getbbox() # returns (0,0,w,h)
print 'x0=%d y0=%d x1=%d y1=%d\n' % (x0,y0,x1,y1)
tkroot=Tkinter.Tk()
# tki=ImageTk.PhotoImage(im)
# tkl=Tkinter.Label(tkroot, image=tki)
# tkl.pack()
imc.thumbnail((1+x1/5,1+y1/5)) # changes image in place!
tkic=ImageTk.PhotoImage(imc)
tklc=Tkinter.Label(tkroot,image=tkic)
tklc.pack()
tkroot.mainloop() # Start the GUI 
```

# google-chrome-devtools - Chrome 开发者工具。DOM子树修改断点？

> ID：13933301
> 
> 赞同：7
> 
> 时间：2012-12-18T12:43:24.390
> 
> 标签：google-chrome-devtools

是否仅在添加/删除子树中的节点时才调用此断点，而不是仅对它们进行修改时才调用？

作为测试，我尝试将带有 JS 的类添加到子树元素，并且断点没有调用。

所以只是想确定一下，唯一会触发这个特定断点的只是添加/删除子节点，而不是修改它们的任何属性或其他任何东西，任何人都可以确认这一点?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T06:35:10.850

子树修改是在以给定节点为根的 DOM [子] 树中的节点插入和删除。

为了打破`class`你需要使用的属性修改......知道吗？`Break on Attribute Modifications`！:-)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T13:06:56.443

我无法对您的问题添加评论，这就是为什么我会将其作为新答案发布。看这里：[如何在 chrome 中设置 DOM 断点](https://stackoverflow.com/questions/10826916/how-to-set-dom-breakpoints-in-chrome)

通常，打开 Chrome 开发者工具，选择第一个名为***Elements***的选项卡，然后找到要放置断点的元素，右键单击它，将打开一个包含多个断点选项的上下文菜单。选项是：

1.  中断子树修改
2.  打破属性修改
3.  节点删除中断

# svn - SVN：提交时忽略外部

> ID：13933305
> 
> 赞同：5
> 
> 时间：2012-12-18T12:43:34.827
> 
> 标签：svn, svn-externals, svnignore

是否可以忽略 SVN 中的外部提交？

**例子：**

我有一个项目，其中一个子文件夹是外部的：

```
svn:externals
my_remote_folder http://svn.whatever.org/blah/trunk/ 
```

这无缝地工作。总是当我执行更新时，外部也会更新。

但是，当我在此外部的本地结帐中更改任何内容时，我的 IDE 会识别更改并为我提供要提交的文件。但也许我只是对外部 SVN 具有读取权限。

我试图按照惯例忽略该文件夹：

```
svn:ignore
my_remote_folder 
```

我也试过

```
my_remote_folder . 
```

但是我的 IDE (PhpStorm) 和 TortoiseSVN 仍然忽略了这个忽略。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T13:08:58.180

答案很大程度上取决于您使用的客户端。

*   **命令行客户端**：默认情况下，命令行客户端在提交期间不包括外部。来自[SVN 书](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)：

    > [...] 如果您想提交您在一个或多个外部工作副本中所做的更改，您必须在这些工作副本上显式运行*svn commit* - 在主工作副本上提交不会递归到任何外部工作副本.

*   **TortoiseSVN**：在提交对话框中，您可以轻松地从外部取消选择文件：![TSVN 提交对话](../Images/7e6c54732bd11f7714e174d0f3cb96aa.png)

*   **PhpStorm**：我不能在这里说，因为我个人不了解 IDE。

# mysql - RIGHT JOIN 不返回所有结果

> ID：13933310
> 
> 赞同：2
> 
> 时间：2012-12-18T12:43:43.793
> 
> 标签：mysql

我有`posts`桌子。每个帖子都有`topic_id`对应于表中相应`id`字段的字段`topics`。

我需要按表`topics`中的`date_created`字段排序`posts`。

此外，每个主题都有`forum_id`，我只需要显示和排序特定的主题`forum_id`。

我试过这样的事情：

```
SELECT 
   topics.id, topics.title 
FROM 
   topics RIGHT JOIN posts ON topics.id = posts.topic_id
WHERE 
   topics.forum_id = 1 
ORDER BY 
   posts.date_created DESC 
```

然而，并非每个主题都有与之相关的帖子。那些没有任何帖子的人不会被退回。

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:45:51.717

尝试使用 LEFT JOIN 而不是 RIGHT JOIN

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:47:47.163

```
SELECT 
   topics.id, topics.title 
FROM 
   (topics RIGHT JOIN posts ON (topics.id = posts.topic_id))  
WHERE 
   topics.forum_id = 1 
ORDER BY 
   posts.date_created DESC 
```

试试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:22:37.787

可能因为帖子上没有数据而丢失了行。尝试使用 ifnull 函数强制转换 null 值，如下所示：

```
SELECT 
   topics.id, topics.title 
FROM 
   topics LEFT JOIN posts ON topics.id = posts.topic_id
WHERE 
   topics.forum_id = 1 
ORDER BY 
   ifnull(posts.date_created, '1900-01-01 00:00:00') DESC 
```

# objective-c - 是否有任何私有 api 来监控 iPhone 上的网络流量？

> ID：13933312
> 
> 赞同：8
> 
> 时间：2012-12-18T12:43:44.977
> 
> 标签：objective-c, ios, cocoa-touch, iphone-privateapi

我需要实现一个应用程序来监控 iPhone 上不同应用程序的入站/出站连接。我的应用程序将使用苹果的 voip 和导航器后台多任务功能在后台运行。我可以使用私有 api，因为我的客户在 appstore 上不需要这个应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T06:52:11.420

我挺过来了。

我不需要任何私有 Api 来获取入站/出站活动连接的信息。它只是您需要了解基本的 C 编程和一些耐心。

我就此事写信给苹果开发论坛，并得到了回应-

```
From my perspective most of what I have to say about this issue is covered in the post referenced below.

<https://devforums.apple.com/message/748272#748272>>

The way to make progress on this is to:

o grab the relevant headers from the Mac OS X SDK

o look at the Darwin source for netstat to see how the pieces fit together

WARNING: There are serious compatibility risks associated with shipping an app that uses this technique; it's fine to use this for debugging and so on, but I recommend against shipping code like this to end users. 
```

我一步一步做的是——

1）从BSD开源下载[的netstat代码-](http://opensource.apple.com/source/network_cmds/network_cmds-396.6/netstat.tproj/)

2）将此添加到您的新iphone项目中。

3）看，ios sdk中不存在一些头文件，所以你需要从opensource.apple.com复制它并将它们添加到你的iphone sdk中的**相关**路径 下 -

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/include 
```

我的 xcode 版本是 4.5.2。所以这是与我的 xcode 相关的路径。您可以根据 xcodes.Anyway 的版本有不同的路径。并记住在 iosSdk 和 iOSSimulatorSdk 中都添加这些标头，以便代码可以在设备和模拟器上运行。

4）您可能会在 netstat 代码中发现一些小错误，这些错误与未在头文件中找到某些结构的定义有关。例如“struct xunpcb64”。不要担心。定义存在那里。您需要在这些头文件中注释一些“#if！TARGET_OS_EMBEDDED”#else，以便 ios sdk 可以在那些 if 条件下访问并访问定义。（需要一些尝试和错误。请耐心等待。）

5）最后你将编译你的代码。干杯！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T20:45:26.207

如果你还没有看到这个，我已经在我的 iPhone 上成功使用了它。

[https://developer.apple.com/library/ios/ipad/#qa/qa1176/_index.html](https://developer.apple.com/library/ios/ipad/#qa/qa1176/_index.html)

我意识到这不是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:09:39.487

一般来说，我同意 Suneet 的观点。您所需要的只是网络嗅探器。

您可以尝试将[WireShark](http://www.wireshark.org/download.html)（它是开源的，适用于 MacOS）的部分移植到 iOS。iOS 和 OS X 共享大部分内核，所以如果它没有在 iOS 上明确禁止，它应该适合你。

WireShark 是一个相当大的产品，所以你可能有兴趣寻找另一个在 OS X 上工作的开源网络嗅探器。

# java - 简单 - XML 引用解析

> ID：13933314
> 
> 赞同：3
> 
> 时间：2012-12-18T12:43:46.773
> 
> 标签：java, unmarshalling, simple-framework

[我的 Jaxb 问题JaxB 参考解决](https://stackoverflow.com/questions/13914372/jaxb-reference-resolving)的原始原因

是我无法在使用简单框架时遇到同样的问题：

[http://old.nabble.com/Two-Phase-support-for-CycleStrategy--td34802791.html](http://old.nabble.com/Two-Phase-support-for-CycleStrategy--td34802791.html)

今天，我将使用持久化调用的事情恢复到与我的 Jaxb 问题相同的点：我得到**副本**- 而不是引用。我再次寻找具有适当参考的解决方案。这次是 Simple XML 框架。

此处的示例具有基类“ModelElement”，而不是其他问题中的 Person。否则问题是一样的。

我再次调用解组两次以获取 PASS 1 中的所有 ID，并使用在 PASS2 中创建的查找 HashMap 收集的结果。

获得适当参考的解决方案是什么？我的假设是添加一个实际上让被调用函数修改解组结果的回调（请参阅[How to use an output parameter in Java?](https://stackoverflow.com/questions/2824910/how-to-use-an-output-parameter-in-java/13913668#13913668) for a wrapping approach）可以解决问题（与我同时发布的 JaxB 解决方案相比） ）。

```
Persister serializer = new Persister();
ModelElementSimpleXmlImpl.lookup.clear();
serializer.read(result, xml);
System.err.println("PASS 2");
serializer.read(result, xml); 
```

此代码来自 ModelElementSimpleXmlImpl 基类：...

```
 protected String ref;

  /**
   * getter for xsd:string/String id
   * @return id
   */
  @org.simpleframework.xml.Attribute(name="ref",required=false)
  public String getRef() { 
    return ref; 
  }

  /**
   * setter for xsd:string/String id
   * @param pid - new value for id
   */
  @org.simpleframework.xml.Attribute(name="ref",required=false)
  public void setRef(String pRef) { 
    ref=pRef; 
  }

  private boolean debug=true;
  /**
     * show debug information
     * @param title
     * @param key
     * @param me
     * @param found
     */
    public void showDebug(String title,String key,ModelElementSimpleXmlImpl me, ModelElementSimpleXmlImpl found) {
        String deref="?";
        if (found!=null)
            deref="->"+found.getId()+"("+found.getClass().getSimpleName()+")";
        if (debug)
            System.err.println(title+": "+key+"("+me.getClass().getSimpleName()+")"+deref+" - "+this);
    }
    /**
     * keep track of the elements already seen
     */
    public static Map<String,ModelElementSimpleXmlImpl> lookup=new HashMap<String,ModelElementSimpleXmlImpl>();

  @Validate
  public void validate() {
    ModelElementSimpleXmlImpl me=this;
    String key=me.getId();
        if (key!=null) {
            showDebug("id",key,me,null);
            lookup.put(key, me);
        }
        key=me.getRef();
        if (key!=null) {
            if (lookup.containsKey(key)) {
                ModelElementSimpleXmlImpl meRef=lookup.get(key);
                showDebug("ref",key,me,meRef);
                me.setRef(null);
        me.copyFrom(meRef);
            } else {
                if (debug)
                    showDebug("ref",me.getRef(),me,null);
            }
        }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:15:26.350

尼尔·加拉格尔建议：

*使用 CycleStrategy 之类的东西应该很容易做到。只需创建 MyCycleStrategy ，如果出现“无效引用”异常，只需返回 null 并记住引用。当您拾取所有 id 和值后，再进行第二次传递。在第二遍中，将值分配给 ref 或 id 的第一次出现。然后应为所有以下引用赋予相同的值。这应该有效。*

他是对的。以下扩展周期策略按建议工作：

```
/**
 * Two Path Cycle Strategy
 * 
 * @author wf
 * 
 */
public static class TwoPathCycleStrategy extends CycleStrategy {
    String id;
    String ref;
    public static boolean debug = false;

    /**
     * create a twoPath Cycle Strategy
     * 
     * @param id
     * @param ref
     */
    public TwoPathCycleStrategy(String id, String ref) {
        super(id, ref);
        this.id = id;
        this.ref = ref;
    }

    /**
     * show debug information
     * 
     * @param title
     * @param key
     * @param value
     */
    public void showDebug(String title, String key, Value value) {
        if (debug) {
            String id = "?";
            Object v = value;
            while ((v instanceof Value) && ((Value) v).isReference()) {
                v = ((Value) v).getValue();
            }
            if (v == null) {
                id = "null";
            } else {
                // FIXME - adapt to your code or comment out
                //if (v instanceof ModelElement) {
                //  ModelElement me = (ModelElement) v;
                //  id = me.getId();
                //}
            }
            System.err.println(title + ":" + key + "->"
                    + v.getClass().getSimpleName() + ":"
                    + value.getType().getSimpleName() + ":" + value.isReference() + ":"
                    + id);
        }
    }

    public Map<String, Value> lookup = new HashMap<String, Value>();

    @SuppressWarnings("rawtypes")
    @Override
    public Value read(Type type, NodeMap node, Map map) throws Exception {
        Value value = null;
        Node refNode = node.get(ref);
        Node keyNode = node.get(id);
        try {
            value = super.read(type, node, map);
            if (keyNode != null) {
                String key = keyNode.getValue();
                if (value != null) {
                    showDebug("id", key, value);
                    lookup.put(key, value);
                } else {
                    showDebug("id?", key, value);
                }
            }
        } catch (CycleException ce) {
            if (ce.getMessage().contains("Invalid reference")) {
                if (refNode != null) {
                    String key = refNode.getValue();
                    if (lookup.containsKey(key)) {
                        value = lookup.get(key);
                        showDebug("ref", key, value);
                    } else {
                        showDebug("ref?",key,null);
                    }
                }
            } else {
                throw ce;
            }
        }
        return value;
    }

} 
```

# html - 使用css更改悬停时的图像

> ID：13933322
> 
> 赞同：0
> 
> 时间：2012-12-18T12:44:07.303
> 
> 标签：html, css

![在此处输入图像描述](../Images/0bdad13f1efa36967cc3f89c41f32bb5.png)

我对 CSS 不太了解，但我能做些什么来更改子菜单上的项目符号图像？

```
#leftCntr .menuBox ul li a { padding: 0px 0px 0px 54px; color: #7d9696; text-decoration: none; background: url(../images/menuDisc.gif) 10px 4px no-repeat; }
        #leftCntr .menuBox ul li a.active { color: #949494; background: url(../images/menuDiscHover.gif) 10px 4px no-repeat; }
        #leftCntr .menuBox ul li a:hover { color: #000000; background: url(../images/menuDiscHover.gif) 10px 4px no-repeat; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:48:10.607

没有看到你的 HTML 代码很难说，但我猜应该这样做：

```
#leftCntr .menuBox ul li a {
    padding: 0px 0px 0px 54px;
    color: #7d9696;
    text-decoration: none;
    background: url(../images/menuDisc.gif) 10px 4px no-repeat;
}

#leftCntr .menuBox ul li a.active {
    color: #949494;
    background: url(../images/menuDiscHover.gif) 10px 4px no-repeat;
}

#leftCntr .menuBox ul li a:hover {
    color: #000000;
    background: url(../images/menuDiscHover.gif) 10px 4px no-repeat;
}

#leftCntr .menuBox ul li li a {
    background: url(../images/submenuDisc.gif) 10px 4px no-repeat; /* Set the image here */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:47:04.887

将以下内容添加到您的 CSS 中。它将从另一个列表中的 li 中删除背景。

如果您想显示不同的图像，当然也可以设置不同的背景。

```
#leftCntr .menuBox ul li ul li a:active {
    background: none;
}

#leftCntr .menuBox ul li ul li a:hover {
    background: none;
} 
```

（编辑以匹配 A 元素。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:48:42.370

将您的代码更改为

```
#leftCntr .menuBox ul li a { padding: 0px 0px 0px 54px; color: #7d9696; text-decoration: none; background: url(../images/menuDisc.gif) 10px 4px no-repeat; }
        #leftCntr .menuBox ul li a.active { color: #949494; background: url(../images/menuDiscHover.gif) 10px 4px no-repeat; }
        #leftCntr .menuBox ul li a:hover { color: #000000; background: url(../images/menuDiscHover.gif) 10px 4px no-repeat; }

/* New Added */

 #leftCntr .menuBox ul li li a.active { color: #949494; background: url(../images/menuDiscHover.gif) 10px 4px no-repeat; }
            #leftCntr .menuBox ul li li a:hover { color: #000000; background: url(../images/menuDiscHover.gif) 10px 4px no-repeat; } 
```

# linux - 对应用程序可以使用多长时间实施时间限制

> ID：13933326
> 
> 赞同：0
> 
> 时间：2012-12-18T12:44:14.607
> 
> 标签：linux, algorithm, security, unix

用户从服务器下载一个应用程序（假设是一个游戏）。我需要对用户可以在系统上运行应用程序多长时间实施时间限制。

例如。从安装之日起，用户只能使用该应用程序至 5 天。

我的问题是，如果我依赖系统时间/日期等来实现此逻辑，用户可能会更改系统时间并克服逻辑。

平台：Linux/C++

PS：我必须假设用户在下载应用程序后决定根本不连接到互联网。由于我没有网络访问权限，因此不能依赖基于服务器的存储来了解应用程序的安装日期/时间等。

有人可以提供线索如何在应用程序中实现这种行为，并提供试用期吗？

* * *

编辑：

我正在添加我正在考虑的算法：

安装时：

1.  在安装时存储当前系统日期。
2.  将此信息以加密形式存储到文件 DRM.txt 中

在应用程序启动时：

1.  打开文件并解密安装日期。
2.  从系统获取当前日期。
3.  匹配是否允许根据用户安装后已过去的天数执行应用程序。
4.  如果允许，启动应用程序，否则给出错误信息并返回。

问题：

1.  让在安装系统日期为 19/12/2012 时，用户只能使用该应用程序 4 天，即到 2012 年 12 月 22 日。因此，19/12/2012 存储到 DRM.txt 中。

2.  4 天后，用户将系统日期更改回 20/12/2012，然后我的检查逻辑将允许此应用程序运行。

希望这能澄清我想说的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:49:52.437

保存并检查启动和停止APP的时间。如果当前时间比保存的时间短很多，那么你可以认为这是作弊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:16:58.943

这可以通过加密来实现，例如将日期存储到加密文件中，注意这不会阻止逆向工程等

# perl - 在连接 (.) 或 image_magick.pl 第 XX 行的字符串中使用 XXXX 中的未初始化值

> ID：13933327
> 
> 赞同：0
> 
> 时间：2012-12-18T12:44:16.553
> 
> 标签：perl, compare, undefined, perlmagick

我编写了一个程序来比较两个文件夹（每个有 1000 个文件）的图像文件和一些逻辑[（参见这个 SO question）](https://stackoverflow.com/questions/13741033/how-can-i-compare-more-number-of-images-in-two-folders-using-perl)。

在执行时，它成功比较直到 900 个图像，但随后它给出了一个错误，如`Use of uninitialized value within @tfiles2 in concatenation (.) or string at C:\dropbox\Image_Compare\image_magick.pl line 55`(#3)。然后我收到一个类似的弹出错误`Perl Command Line Interpreter has stopped working`，所以我关闭了程序。

我的代码如下：

```
#!/usr/bin/perl
 use Image::Magick;
 no warnings 'uninitialized';
 use warnings;
 use diagnostics;
#use strict;
 use List::Util qw(first);

    my $directory1="C:/dropbox/Image_Compare/folder1";
    opendir(DIR, $directory1) or die "couldn't open $directory1: $!\n";
    my @files1 = grep { (!/^\./) && -f "$directory1/$_" } readdir(DIR);
    closedir DIR;
    print @files1;
    print 'end of files1';
    my $directory2="C:/dropbox/Image_Compare/folder2";
    opendir(DIR, $directory2) or die "couldn't open $directory2: $!\n";
    my @files2= grep { (!/^\./) && -f "$directory2/$_" } readdir(DIR);
    closedir DIR;
    print @files2;
    print 'end of files2';
    print $files1[0];
    foreach my $fils2 (@files2)
    {
        $g1 = Image::Magick->new;
        $g2 = Image::Magick->new;
        $temp1 = $g1->Read( filename=>"C:/dropbox/Image_Compare/folder1/".$files1[0].""); 
        $temp1 = $g2->Read( filename=>"C:/dropbox/Image_Compare/folder2/".$fils2."");
        $g3 = $g1->Compare( image=>$g2, metric=>'AE' ); # compare
        $error1 = $g3->Get( 'error' );
        #print $error1;
        if ($error1 == '0') 
        {
            print "Matching image is:"; 
            print $fils2 . "\n"; 
            my $tdirectory2="C:/dropbox/Image_Compare/folder2";
            opendir(DIR, $tdirectory2) or die "couldn't open $directory2: $!\n";
            my @tfiles2 = grep { (!/^\./) && -f "$tdirectory2/$_" } readdir(DIR);
            closedir DIR;
            #my $index = firstidx { $_ eq'"' .$fils2.'"' } @tfiles2;
            my $index = first { $tfiles2[$_] eq $fils2} 0..$#tfiles2;
            #print $fils2;
            print $index;
            my $i=0;
            foreach my $fils1 (@files1)
            {
                print 'ganesh';
                print $files1[$i];
                print $tfiles2[$index];
                print 'gowtham'; print "<br />";
                #print @tfiles2;
                $g4 = Image::Magick->new;
                $g5 = Image::Magick->new;
                $temp2 = $g4->Read( filename=>"C:/dropbox/Image_Compare/folder1/".$files1[$i].""); 
                $temp2 = $g5->Read( filename=>"C:/dropbox/Image_Compare/folder2/".$tfiles2[$index]."");
                $g6 = $g4->Compare( image=>$g5, metric=>'AE' ); # compare
                $error2 = $g6->Get( 'error' );
                $i++;
                $index++;
                if ($error2 == '0') {}
                else {print "Image not matching:"; print $tfiles2[$index]; last;}
                #if ($i == '800') {last;}

            }
            last
        }
    } 
```

谁能帮忙，我在哪里做错了。

文件夹1文件名：0025.bmp到1051.bmp；

文件夹2文件名：0000.bmp到1008.bmp；

谢谢 Ganesh

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:52:42.053

我不知道有问题的线路是哪一条，但其中一条很可能是候选线路：

```
$temp2 = $g5->Read( filename=>"C:/dropbox/Image_Compare/folder2/".$tfiles2[$index].""); 
```

或者

```
else {print "Image not matching:"; print $tfiles2[$index]; last;} 
```

请注意，`$index`无论它是否在数组边界内，您都会递增。您不检查 condition `$index > $#tfiles`，这应该会中断循环。

您可能想要断言两个输入数组都包含 >> 900 个元素，方法是打印类似`print "length: ", scalar @array, "\n";`.

`undefined`您可以通过测试数组中元素的定义性来测试错误实际发生在哪个索引处：

```
if (not defined $tfiles[$index] or not defined $files1[$i]) {
   die "There was an undefined element at index=$index, i=$i";
} 
```

但是话又说回来，`$i`和之间的偏移量`$index`是恒定的（如[我的回答](https://stackoverflow.com/a/13741593/1521179)中所述），因此您实际上不必携带两个变量。

一个简单的比较器子例程可以使您的代码更具可读性，从而有助于调试（请参阅[过程编程](https://en.wikipedia.org/wiki/Procedural_programming)）。

```
# return true if matching, false otherwise.
sub compare_images {
   my ($file1, $file2) = @_;
   my $image1 = Image::Magick->new;
   $image1->Read(filename => $file1);
   my $image2 = Image::Magick->new;
   $image2->Read(filename => $file2);
   my $result = $image1->Compare(image => $image2, metric => 'AE')->Get('error');
   # free memory
   undef $image1;
   undef $image2;
   return 0 == $result;
} 
```

叫喜欢

```
my $image_root = "C:/dropbox/Image_Compare";
my ($folder1, $folder2) = qw(folder1 folder2);
unless (compare_images("$image_root/$folder1/$files1[$i]", 
                       "$image_root/$folder2/$tfiles[$index]")) {
   print "Images not matching at index=$index, i=$i\n";
   print "filename: $tfiles[$index]\n";
   last;
} 
```

您可以阅读您的目录，例如

```
sub get_images_from_dir {
   my ($dirname) = @_;
   -d $dirname or die qq(The path "$dirname" doesn't point to a directory!);
   opendir my $dir => $dirname or die qq(Can't open "$dirname": $!);
   my @files = grep {!/^\./ and -f "$dirname/$_"} readdir $dir;
   closedir $dir;
   unless (@files) { die qq(There were no interesting files in "$dirname".) }
   return @files;
} 
```

像这样的步骤使代码更具可读性，并使插入检查变得容易。

# c# - 如何在自定义控件中强制执行声明性属性分配

> ID：13933328
> 
> 赞同：1
> 
> 时间：2012-12-18T12:44:21.993
> 
> 标签：c#, asp.net, custom-controls

我正在制作一个自定义控件，它是一个带有 Image 和 2 ImageButton 控件的简单图像查看器。我希望这些控件的`ImageUrl`属性由控件的用户决定，但由于这些属性具有空值并不是一个好主意，因此我希望能够在设计时强制分配这些值。例如，Visual Studio 会提示您声明`'runat="server'`所有自定义控件的属性。

我真的不知道这是否可以通过自定义控件实现，但如果有人可以为此提供解决方案，那就太棒了。

# database - Magento Checkout 条款和条件，它们存储在哪里？

> ID：13933333
> 
> 赞同：5
> 
> 时间：2012-12-18T12:44:43.997
> 
> 标签：database, magento, model

Magento 可以启用**结帐条款和条件**，因此在结帐页面中显示一些文本和一个复选框。

该功能可按照以下步骤操作：http: [//www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/checkout_agreement/index](http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/checkout_agreement/index)

现在我想知道：

1.  复选框的值保存在某处？
2.  可以在后台查看吗？

如果 1 为真，2 为假，如何在订单表中添加一列以显示它？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-18T13:01:47.607

是的，它可以从后端进行审查，也可以进行如下修改：- 销售=>条款和条件

# iphone - 我可以从带有 alpha 通道的图像中获取 CGPath 吗？

> ID：13933335
> 
> 赞同：4
> 
> 时间：2012-12-18T12:44:45.883
> 
> 标签：iphone, ios, core-graphics, calayer

我设法使用与此处类似的方法来屏蔽视图：[How to mask UIViews in iOS](https://stackoverflow.com/questions/4559743/how-to-mask-uiviews-in-ios) 但是现在我需要在这个屏蔽视图中检测触摸。`Gesture recognisers`和按钮会检测`bounds`区域内的触摸，基本上忽略了面具。所以我想如果我`CGPath` 能从我的蒙版图像中得到，它会很容易处理触摸。关于如何`CGPath`从蒙版图像中获取任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:08:29.950

您可以设置`UIGestureRecognizer`的委托和覆盖`- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch`

1\. 在识别器的视图中获取触摸的位置

`- (CGPoint)locationInView:(UIView *)view`

2\. 找出该位置图像的 Alpha 通道。为此，请使用此代码（为了提高效率，您可以提前重新计算整个图像的透明值，并将它们存储到缓冲区中，这样您就不必每次都复制 alpha 缓冲区。我在这里保持简单并且只针对单个像素进行。如果您想了解如何一次完成整个图像，请查看此[帖子](https://stackoverflow.com/questions/11686489/how-to-get-the-alpha-channel-alone-in-ios)。

```
unsigned char pixelData[1] = {0};
CGContextRef context = CGBitmapContextCreate(pixelData, 1, 1, 8, 1, NULL, kCGImageAlphaOnly);
UIGraphicsPushContext(context);
[im drawAtPoint:CGPointMake(-point.x, -point.y)];
UIGraphicsPopContext();
CGContextRelease(context);
CGFloat alphaChannel = pixel[0]/255.0;
BOOL transparent = alphaChannel < 0.01; 
```

3.  基于该值，返回 YES 或 NO

# jquery - 在 jQuery 中延迟页面导航/离开

> ID：13933342
> 
> 赞同：0
> 
> 时间：2012-12-18T12:45:25.570
> 
> 标签：jquery, navigation

我正在尝试编写一个 jQuery 插件，它应该在离开页面或关闭浏览器之前注销用户。我已经捕获了页面的每个退出点（例如 f5、关闭选项卡、刷新、关闭浏览器、导航），但是当我在离开页面之前尝试发送 jQuery.post() 请求时，无法发出请求，因为浏览器没有时间发送请求。

有没有办法将任何页面导航/页面离开/浏览器关闭延迟 1 秒或更长时间，以便我可以在实际离开页面之前挤入 jQuery.post() 请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:51:18.010

执行此操作的传统方法是让客户端每分钟向服务器发送一次请求`x`，让它知道用户仍然处于活动状态。如果服务器在某个时间范围内没有收到请求，它应该使会话过期（从而将用户注销）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:58:48.590

我认为这可能会回答您的问题：[使用 Javascript 延迟页面关闭？](https://stackoverflow.com/questions/8350215/delay-page-close-with-javascript)

不过，这是一个有问题的解决方案，主要是因为现代浏览器出于安全原因实际上不允许这样的东西。

如果您使用 cookie 来保存会话信息，您不能使用 onunload 事件销毁 cookie 并因此让用户注销吗？

希望有帮助。

# jquery - jquery 动态 $.post

> ID：13933346
> 
> 赞同：-2
> 
> 时间：2012-12-18T12:45:34.510
> 
> 标签：jquery

我有一个动态生成的复选框列表。经验：

```
<input class="cb1" var1="1" var2="2" var3="3" type="checkbox" /><label>Checkbox1</label> 
```

我正在尝试将“var1”、“var2”和“var3”的值 $.post 到每个选中的复选框的 php 文件“data.php”中。

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:23:57.870

如果要序列化所有表单元素，可以使用 $('#form').serialize() ，但在您的情况下，您可以使用 $().find() 函数扫描生成的复选框，并使用 $.each 来迭代找到的每个元素

假设您的复选框保留在 id='checkbox_conrainer' 的 div 中，并且它具有名称属性'checkbox[]'

```
<div id="checkbox_container">
    <input name="checkbox[]" class="cb1" var1="1" var2="2" var3="3" type="checkbox" /><label>Checkbox1</label>
    <input name="checkbox[]" class="cb2" var1="1" var2="2" var3="3" type="checkbox" /><label>Checkbox2</label>
</div> 
```

在 javascript 部分你可以写：

```
 var $postData = '';
 $('#checkbox_conrainter').find('input[type=checkbox]').each(function(){
    var $checkbox = $(this); //just for object caching
    if($checkbox).is(':checked')){
        var $checkbox_name = $checkbox.attr('name');
        var $checkbox_val1 = $checkbox.attr('val1'); //you can use loop if you want
        var $checkbox_val2 = $checkbox.attr('val2');
        var $checkbox_val3 = $checkbox.attr('val3');
    }
    $postData +='&'+$checkbox_name+'[val1]='+$checkbox_val1
               +'&'+$checkbox_name+'[val2]='+$checkbox_val2
               +'&'+$checkbox_name+'[val3]='+$checkbox_val3;
});
$.post('data.php',$postData); 
```

在您的 php 页面中，变量的结构将是这样的

```
$_POST = Array(
    checkbox[0] => Array(
        [val1] => 1 //val1 value,
        [val2] => 2 //val2 value,
        [val3] => 3 //val3 value
    ),
    checkbox[1] => Array(  //if you have more checkbox
        [val1] => 1 //val1 value,
        [val2] => 2 //val2 value,
        [val3] => 3 //val3 value
    ),
) 
```

cmiiw

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:58:48.867

首先，将所有复选框包含在具有 id 或 name 属性的标签中。

然后在任何事件或按钮上单击，您可以通过

```
 $(document).ready(function(){
             $("#input_form").submit(function(){
                 var querystring = $(this).serialize();
                   $.ajax({
                   type: 'POST',
                   url: url,
                   data: querystring,
                   success: success,
                         dataType: dataType
                     });
                 });
        }); 
```

并在 PHP 文件中尝试获取循环中的值

```
 foreach($_POST as $val){
             //TODO make a query string again for inserting in db etc
        } 
```

# random - 使用循环的 MS Access 中的合格随机选择？

> ID：13933348
> 
> 赞同：1
> 
> 时间：2012-12-18T12:45:35.807
> 
> 标签：random, selection, ms-access-2010

我正在使用 Windows 7、Access 2010

我有一个数据库，我需要从中返回一组随机记录。这些表是相关的。

我有以下表格：

*   能力
*   元素
*   部分
*   例子

我使用对记录进行编号的表达式创建了一个查询，并且能够随机选择 x 条记录。

问题是：在元素中，我需要在每个元素中随机选择 x 个部分。因此，根据我当前的设置，我得到了 x 个部分，但它不包括每个元素中的至少一个部分。我想从每个元素中返回 25% 的部分。

即元素：7.1、7.2、7.3、7.4 部分：7.1.1、7.1.2、7.1.3：7.2.1、7.2.2、7.3.3 等

我的查询随机返回，但不是从每个元素返回。所以我可能拥有元素 7.1 的所有内容，7.2 的 1 和 7.3 或 7.4 的任何内容。

有没有办法做到这一点？我想我可能需要一个循环，但我完全不熟悉它，所以我需要适当的 VBA 代码帮助才能让它工作。

我用谷歌搜索了所有我能想到的东西，但我一无所获。

任何帮助将不胜感激！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:10:33.767

您应该能够使用“从组中选择 n”类型的查询，但您需要一个唯一的 ID：

```
SELECT
  t.ID, 
  t.Element, 
  t.Section
FROM Elements AS t
WHERE t.ID In (
     SELECT Top 2 ID 
     FROM Elements q 
     WHERE q.Element=t.Element 
     ORDER BY Rnd([id])*1000) 
```

我已经经历过很多次了，我认为您将不得不为随机排序添加一个字段，然后在运行查询之前更新该字段。这将更新 [Competency Elements] 中名为 RandomNumber 的字段

```
 UPDATE [Competency Elements] 
 SET [Competency Elements].RandomNumber = Rnd([element id])*1000; 
```

然后百分比选择，我认为对于这个特定的数据集它必须大于 33：

```
SELECT Val([comp section number]) AS [Sect No],
       s.[section description],
       e.[element number],
       e.[element description],
       Rnd(e.[element id])        AS Expr1,
       s.[section id],
       e.[element id],
       x.example,
       s.[competency id],
       c.[comp number],
       c.[competency category]
FROM   competencies AS c
       INNER JOIN (([competency sections] AS s
                    INNER JOIN [competency elements] AS e
                            ON s.[section id] = e.[section id])
                   INNER JOIN examples AS x
                           ON e.[element id] = x.[element id])
               ON c.[competency id] = s.[competency id]
WHERE  (( ( e.[element id] ) IN (SELECT TOP 35 PERCENT [element id]
                                 FROM   [competency elements] q
                                 WHERE  q.[section id] = e.[section id]
                                 ORDER  BY randomnumber) ))
ORDER  BY Val([comp section number]); 
```

There are a number of issues around getting a random selection from a group.

# c# - C# WebForm - 使用 Javascript 设置文本框的焦点

> ID：13933352
> 
> 赞同：1
> 
> 时间：2012-12-18T12:45:50.097
> 
> 标签：c#, javascript, webforms

我有一个 Javascript，当我在一个文本框中写入时，它会填充另一个文本框。但我需要将焦点留在第三个文本框中。

实际上，我的代码是：

```
<script type="text/javascript" language="javascript">
        function SelectValue(source, eventArgs) {
            document.getElementById('<%= txtCodeProduct.ClientID %>').value = eventArgs.get_value();
            document.getElementById('<%= txtQuantity.ClientID %>').focus();
            }
</script> 
```

但是焦点不起作用......如果我在代码中发出警报，焦点就会起作用：

```
<script type="text/javascript" language="javascript">
        function SelectValue(source, eventArgs) {
            document.getElementById('<%= txtCodeProduct.ClientID %>').value = eventArgs.get_value();
            document.getElementById('<%= txtQuantity.ClientID %>').focus();
            alert("test");
            } 
```

我如何在不使用警报的情况下解决这个问题？我的文本框采用更新面板的形式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:48:05.377

尝试：

```
 function SelectValue(source, eventArgs) {
    document.getElementById('<%= txtCodeProduct.ClientID %>').value = eventArgs.get_value();
    setTimeout( function(){
            document.getElementById('<%= txtQuantity.ClientID %>').focus();
        }, 0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:00:56.363

您使用什么版本的 Asp.Net？否则你可以使用`ClientIDMode` [http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)

```
<asp:TextBox ID="txtCodeProduct" runat="server" ClientIDMode="static" />
<asp:TextBox ID="txtQuantity"    runat="server" ClientIDMode="static" /> 
```

我还推荐使用 jQuery：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" ></script>
<script type="text/javascript">
    function SelectValue(source, eventArgs) {
        $("#txtCodeProduct").val(eventArgs.get_value());
        $("#txtQuantity").focus();
    } 
```

[http://api.jquery.com/focus/](http://api.jquery.com/focus/)

# java - WebDriver 退出

> ID：13933359
> 
> 赞同：0
> 
> 时间：2012-12-18T12:46:24.357
> 
> 标签：java, selenium-webdriver

Selenium WebDriver 在执行一次后退出 for 循环时遇到问题。大概是在页面加载之前获取内容和循环开始的问题。是否有可能让 webdriver 等到页面加载？

```
List<WebElement> albums = new ArrayList<WebElement>();
    albums = driver.findElements(By.className("album_title"));

    for (WebElement we : albums) {

        we.click();
        if (driver.findElement(By.id("delete_album_prompt")).isDisplayed()) {
            driver.findElement(By.id("delete_album_prompt")).click();
            driver.findElement(By.id("delete_album_yes")).click();
        } else {
            break;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:59:32.757

您需要等待一个元素被加载。

在[Selenium 文档](http://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example)中，他们提供了以下示例，该示例将等到加载 google 页面。在这种情况下，它最多等待 10 秒，以等待标题元素被加载并具有指定的值。

```
// Google's search is rendered dynamically with JavaScript.
// Wait for the page to load, timeout after 10 seconds
(new WebDriverWait(driver, 10)).until(new ExpectedCondition<Boolean>() {
    public Boolean apply(WebDriver d) {
       return d.getTitle().toLowerCase().startsWith("cheese!");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T05:29:41.200

使用这个，其中`TimeOut`定义为`int`值。

```
Wait wait = DriverManager.getWait(Driver.TIMEOUT);
wait.until(ExpectedConditions.visibilityOfElementLocated(by)); 
```

基本上等待一个元素被加载。这比提供睡眠要好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:36:00.310

您可以使用 Thread.sleep(20000); 在循环开始之前使用此方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:36:41.597

我想，您正在检查列表中的项目

```
driver.findElement(By.id("delete_album_prompt")).isDisplayed() 
```

这将为第一项返回 true，但对于列表中的其余项目，它将返回 false，因为这些项目不会显示。这就是它退出循环的原因。

您可以使用以下功能检查项目存在`if`

```
private boolean isElementPresent(WebDriver driver, By by){
try{
driver.findElement(by);
return true;
}catch(NoSuchElementException e){
return false;
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-01T07:13:26.910

我正在使用 - wait.until(elementToBeClickable(By.id("id"))); 有用 ！

# .htaccess - htaccess - 重写 URL 以使查询字符串更好

> ID：13933363
> 
> 赞同：0
> 
> 时间：2012-12-18T12:46:42.070
> 
> 标签：.htaccess

我有一个带有文件夹的站点，以及该文件夹中的 htaccess 文件。对于该文件夹中的 index.php 文件，我想为某个参数重写查询字符串，以便输入以下 URL：

```
www.example.com/myfolder/myparameter 
```

像这样表现（即`$_GET['parameter'] = 'myparameter'`在我的代码中制作）

```
www.example.com/myfolder/index.php?parameter=myparameter 
```

我在 StackOverflow 上查看了很多问题，但没有设法让它发挥作用。到目前为止我的代码是

```
RewriteEngine on
RewriteCond %{QUERY_STRING} ^(.*) [NC]
RewriteRule ^$ %0 [QSA] 
```

但这根本行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:54:24.730

请使用此代码

```
RewriteEngine on
RewriteRule (.*) index\.php?parameter=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:24:32.077

```
RewriteEngine on
RewriteRule (^.*/)([^/]+)$  $1index\.php?parameter=$2   [L,QSA] 
```

**更新**
对不起使用@somasundaram 的答案。每个目录的 .htaccess 重写规则会丢失目录前缀：

> 在 .htaccess 文件中使用重写引擎时，每个目录的前缀（对于特定目录始终相同）会自动删除以进行 RewriteRule 模式匹配，并在任何相对（不以斜杠或协议名称开头）替换后自动添加遇到规则集的结尾。有关将哪些前缀添加回相对替换的更多信息，请参阅 RewriteBase 指令。

（来自[apache 文档](https://httpd.apache.org/docs/2.4/mod/mod_rewrite.html)）

# sql - 更新计算列，将 VARCHAR 转换为 BIT

> ID：13933364
> 
> 赞同：0
> 
> 时间：2012-12-18T12:46:43.013
> 
> 标签：sql, sql-server

目前我有一个将布尔字段存储为 VARCHAR(1) （'T' 或 'F'）的数据库。我想用 BIT 替换这些。问题是这需要对使用数据库的程序进行大量更改。所以我认为合乎逻辑的步骤是添加一个 BIT 字段并将现有的 VARCHAR(1) 字段替换为我访问的计算列而不是访问 BIT 字段（因此程序可以继续按原样工作而无需更改，并被更改随着时间的推移使用 BIT 字段）。

我知道这不起作用（UPDATE 和 INSERT 不适用于计算列）。我知道一种选择是重命名现有表并添加一个视图来访问它，但我不认为这是一个可行的解决方案，因为添加和删除列、更改依赖视图等会容易出错（在我看来，这不是一个很好的解决方案）。

我的问题是 - 我有什么选择来实现上述行为（这样程序可以继续按原样工作）？

一个例子：

```
User (Active VARCHAR(1), ...) 
```

更改为使用计算列：（不起作用）

```
User (Active_B BIT, Active AS CASE Active_B WHEN 1 THEN 'T' ELSE 'F' END, ...) 
```

**更新：**修复了示例中的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:54:34.357

它必须是：

```
ALTER TABLE dbo.User
ADD Active AS CASE Active_B WHEN 1 THEN 'T' ELSE 'F' END PERSISTED 
```

**您**需要在`CASE`. 而且我建议也使计算列**保持**不变 - 以便该值实际存储在磁盘上（并且每次访问它时都不会重新计算）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:33:44.437

一种选择是同时拥有 VARCHAR 和 BIT 字段并使用触发器在它们之间进行更新。

我只需要弄清楚如何防止无限递归（一个想法是让一个字段仅用于检查此触发器是否是由另一个触发器中的更新引起的（检查我们是否正在更新它并包含它）在触发器的更新中））。更新需要双向进行，以便轻松向后兼容。

# android - 无法将项目添加到 lrucache

> ID：13933368
> 
> 赞同：1
> 
> 时间：2012-12-18T12:46:53.543
> 
> 标签：android, android-lru-cache

我正在尝试使用 LRUcache 来缓存我的应用程序从 Web 下载的一些图像。我已经阅读了来自 android 开发人员的教程，但我无法在我的 LRUcache 中添加任何内容。这是我的代码，

```
class myloader extends Activity{ String url;ImageView imview;Bitmap map;LruCache<String, Bitmap> myCache=new LruCache<String, Bitmap> (5*1024*1024)  
    class load extends AsyncTask<String, Void, Bitmap>{
    WeakReference <ImageView> ref=new WeakReference<ImageView>(imview);
    String url2;
    public load(ImageView imageView) {  
        ref = new WeakReference<ImageView>(imageView);
    }

    @Override
    protected Bitmap doInBackground(String... params) {                 
        try {
             u=new URL(params[0]);           
             map=BitmapFactory.decodeStream(u.openConnection().getInputStream(),null,listDimensions());
             myCache.put(url,map);
        } catch (MalformedURLException e) {e.printStackTrace();
        } catch (IOException e) {e.printStackTrace();}
        return map;
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        if (ref != null) {
            ImageView imageView = ref.get();
            toLoad bitmapDownloaderTask = getBitmapDownloaderTask(imageView);
           if (this == bitmapDownloaderTask) {
                imageView.setImageBitmap(result);
            }
        }
    }  public void download(String theurl,ImageView im) {   url=theurl;  // here i check for lrucache items
    imview=im;
     if (cancelPotentialDownload(url, imview)) {
         toLoad task = new toLoad(imview);
         DownloadedDrawable downloadedDrawable = new DownloadedDrawable(task);
         Bitmap finalBit=myCache.get(url);

         if (finalBit!=null){
             imview.setImageBitmap(finalBit);
         }else{
         imview.setImageDrawable(downloadedDrawable);
         task.execute(url);
         }
        t=myCache.putCount();
     }
} 
```

然后从我的适配器类的 getview() 我调用 myloader，传递一个 imageview 和一个图像 url

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-30T12:59:29.383

我有同样的问题。确保您分配的缓存大小足以接受一个元素。如果你尝试插入一个太大的元素，LruCache 不会抱怨，它会默默地失败。

# java - 审计没有 Hibernate Envers 的 java 实体

> ID：13933375
> 
> 赞同：1
> 
> 时间：2012-12-18T12:47:12.030
> 
> 标签：java, audit, hibernate-envers

我面临一个问题。我想审核我的 java 实体，但我使用了我扩展的自定义电子商务解决方案，我无法用 Envers 注释他的默认实体。

您是否知道像 Envers 这样的其他项目通过使用 XML 配置来实现完整的审计，或者我必须使用自定义实体侦听器？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T15:22:39.517

[Audit4j](http://audit4j.org)提供了这样的功能。您可以在不同的环境中使用不同的配置选项。

# bash - `ssh` 执行和格式化中的变量

> ID：13933381
> 
> 赞同：0
> 
> 时间：2012-12-18T12:47:37.153
> 
> 标签：bash, shell, ssh

我正在编写一个 shell 脚本，我需要通过 SSH 连接到服务器，执行一些操作，然后退出。

为此，我使用如下代码：

```
ssh -t username@server '
cd uploads/; \
tar -xvzf torrent.tar.gz; \
' 
```

但是，我需要使用这样的变量：

```
DIR="uploads/";

ssh -t username@server '
cd $DIR; \
tar -xvzf torrent.tar.gz; \
' 
```

这似乎不起作用，因为显然在`cd`建立 SSH 连接之前不会执行，到那时没有`$DIR`变量（我的猜测）。但是，有什么办法可以使用变量吗？

也许一个更好的问题是，一旦建立 SSH 连接，有没有更好的方法可以布置我的脚本来执行操作？我必须小心，转义撇号，并且有一次我实际上是从 SSH 连接内部通过 SSH 连接到另一台服务器。这是丑陋的代码！

**编辑：**请阅读，如果我使用“而不是”，该变量将起作用。但是我的问题仍然是关于格式的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:49:27.777

而不是单引号 (') 为什么不使用双引号 (") 那么 $DIR 应该被扩展

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:49:39.727

使用双引号允许展开。例如试试这个：

```
echo "$DIR" 
```

对比

```
echo '$DIR' 
```

并注意结果。

值得将其包装在 shell 脚本中，因此：

```
#!/bin/bash -x
# ... 
```

并且 -x 将输出 shell 扩展等。它使调试变得非常容易。

[您可以使用heredoc](http://tldp.org/LDP/abs/html/here-docs.html)，而不是使用上述方法来输入命令。例如

```
ssh username@host <<EOF
ls
EOF 
```

将在远程主机上执行“ls”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:52:31.653

我想你必须写：

```
 ssh username@server "( cd $DIR; tar -xvzf torrent.tar.gz; )" 
```

这应该在连接后执行..如果不尝试使用*("*而不是*"(*并且显然然后关闭

# iphone - Microsoft Sync Framework Toolkit iPhone 示例：加载 ListViewController 时出现 NSInternalInconsistencyException

> ID：13933384
> 
> 赞同：1
> 
> 时间：2012-12-18T12:47:47.107
> 
> 标签：iphone, list, frameworks, sync, sample

我正在使用 Microsoft Sync Framework iPhone 示例，该示例由[http://code.msdn.microsoft.com/Sync-Framework-Toolkit-4dc10f0e](http://code.msdn.microsoft.com/Sync-Framework-Toolkit-4dc10f0e)提供的 Sync Framework Toolkit 提供。

我已经更正了 DownloadChanges 和 UploadChanges 的请求 URL，如[Microsoft Sync Framework Toolkit iPhone 示例中所述 - 日期格式错误？](https://stackoverflow.com/questions/13169754/microsoft-sync-framework-toolkit-iphone-example-date-format-wrong).

服务 URL 指向我本地 Windows 开发机器的 IP 地址。我尝试将其更改为我在[http://www.agronom.pl/ListService](http://www.agronom.pl/ListService)上在线找到的 Sync Framework Sample Service 的一个实例，但也没有运气。

现在 DownloadChanges 请求工作正常，但列表视图没有显示。LoginPage.m 中的以下代码行：

```
[self.navigationController pushViewController:listViewController animated:YES]; 
```

导致异常：

```
exception 'NSInternalInconsistencyException', reason: '-[UIViewController _loadViewFromNibNamed:bundle:] loaded the "ListViewController" nib but the view outlet was not set.' 
```

发生异常时，调试检查器将 [self navigationController] 的值显示为“无效表达式”。

我是IOS开发的初学者，所以我不能轻易地从类似的问题中找出一个简单的解决方案。我尝试了以下代码，但没有任何运气：

```
 // Create navigation controller. Then we can navigate to any UIViewController
    // --> https://stackoverflow.com/questions/6164525/self-navigationcontroller-pushviewcontroller-not-working?rq=1
    UINavigationController *navCtrlr = [[UINavigationController alloc] initWithRootViewController:listViewController];
    navCtrlr.navigationBarHidden = YES;
    [navCtrlr pushViewController:listViewController animated:YES];
    [navCtrlr release]; 
```

非常感谢任何帮助。

# android - 如何在运行时更改 R.string.some_variable？

> ID：13933388
> 
> 赞同：2
> 
> 时间：2012-12-18T12:47:54.690
> 
> 标签：android, android-layout

如何在运行时更改 R.string.app_name？

我从清单文件中找出了我的 Android 应用程序的版本。现在我想从 res 文件夹中获取这个字符串 R.string.app_name 。我想在运行时使用此 app_name 附加我的应用程序版本。

我们可以在 Android 中这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:48:54.517

**不**，这是不可能的，因为所有 R *..* 资源在您的 R.java 文件中被定义为常量。稍后 Android 不会编辑这些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:54:02.857

您必须在这里了解的一件事是，当您将数据作为资源提供时，它不能在运行时进行修改。例如，您在可绘制文件夹中的可绘制对象无法在运行时进行修改。准确地说，“res”文件夹不能以编程方式修改。

这也适用于 Strings.xml，即“Values”文件夹。如果您想要一个必须在运行时修改的字符串，请创建一个单独的类并将您的字符串放在该类中并在运行时访问。这是我找到的最好的解决方案。

如果您尝试以持久的方式存储值，请查看[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html)

# php - 从存储在 MySql 中的数据创建 json API 请求响应

> ID：13933397
> 
> 赞同：0
> 
> 时间：2012-12-18T12:48:41.457
> 
> 标签：php, mysql, json, codeigniter, getjson

我在我的 Codeigniter 网站中开发了一个函数，通过 API 调用请求数据以检索存储在 mysql 表中的时间线数据。我的 json 响应没有正确输出。

我需要创建一个对 $.getJSON 的 json 响应，我是在 php 中完成的。下面是我为从 mysql 获取数据并创建 json 响应而编写的代码。

```
public function index_get() {

            $rs = mysql_query("SELECT headline, type, text, media, credit, caption FROM media"); 

            $timeline = '
                { 
                    "@headline": "' . $row[ 'headline' ] . '",
                    "@type": "' . $row[ 'type' ] . '",
                    "@text": "' . $row[ 'text' ] . '",            
                    "asset": {
                        "@media": "' . $row[ 'type' ] . '",
                        "@credit": "' . $row[ 'type' ] . '",
                        "@caption": "' . $row[ 'type' ] . '",            
             ';            

            $newsdate = mysql_query("SELECT startDate, endDate, headline, text, tag, media, thumbnail, credit, caption FROM news"); 

            while( $row = mysql_fetch_array( $newsdate ) ){ 
                    $newsitem[] = array( 
                        'startDate'=> $row[ 'startDate' ], 
                        'endDate' => $row[ 'endDate' ],             
                        'headline' => $row[ 'headline' ], 
                        'text' => $row[ 'text' ], 
                        'tag' => $row[ 'tag' ],
                        'asset' => array(
                            'media' => $row[ 'media' ],
                            'thumbnail' => $row[ 'thumbnail' ],
                            'credit' => $row[ 'credit' ],
                            'caption' => $row[ 'caption' ]                
                    )); 

            $row1 = mysql_query("SELECT startDate, endDate, headline, tag FROM era"); 

            $era = '
                "era": {
                    "@startDate": "' . $row1[ 'startDate' ] . '",
                    "@endDate": "' . $row1[ 'endDate' ] . '",
                    "@headline": "' . $row1[ 'headline' ] . '",            
                    "@tag": "' . $row1[ 'tag' ] . '"            
            ';            

            $row2 = mysql_query("SELECT startDate, endDate, headline, value FROM chart"); 

            $chart = '
                 "chart": {
                    "@startDate": "' . $row2[ 'startDate' ] . '",
                    "@endDate": "' . $row2[ 'endDate' ] . '",
                    "@headline": "' . $row2[ 'headline' ] . '",            
                    "@value": "' . $row2[ 'value' ] . '"            
                    }
                }       
              }
            }';            

    $this->response(array(
        'timeline' => 
                $newsitem,
                    'date' => $date,        
                    'era' => $era,        
                    'chart' => $chart ), 200);     
  } 
```

我喜欢的结果如下所示，我遇到的问题是我的 json 响应中没有得到所有结束的 { 和 [，请参见下面的粗体代码。从存储在mysql中的数据中，在json中执行如下时间线的正确方法是什么？

```
 $jsonresponse = '
          { "timeline":
           {
    "headline":"The Main Timeline Headline Goes here",
    "type":"default",
    "text":"<p>Intro body text goes here, some HTML is ok</p>",
    "asset": {
        "media":"http://yourdomain_or_socialmedialink_goes_here.jpg",
        "credit":"Credit Name Goes Here",
        "caption":"Caption text goes here"
    },
    "date": **[**
        {
            "startDate":"2011,12,10",
            "endDate":"2011,12,11",
            "headline":"Headline Goes Here",
            "text":"<p>Body text goes here, some HTML is OK</p>",
            "tag":"This is Optional",
            "asset": {
                "media":"http://twitter.com",
                "thumbnail":"optional-32x32px.jpg",
                "credit":"Credit Name Goes Here",
                "caption":"Caption text goes here"
            }
                    {,
                    {
                            "startDate":"2012,1,26",
                        "endDate":"2012,1,27",
                            "headline":"Sh*t Politicians Say",
                            "text":"<p>In true political fashion",
                            "asset": {
                                    "media":"http://youtu.be/u4XpeU9erbg",
                                    "credit":"",
                                    "caption":""
                             }
                    },
                    {
                            "startDate":"2012,1,10",
                            "headline":"Sh*t Nobody Says",
                            "text":"<p>Have you ever heard someone say</p>",
                            "asset": {
                                    "media":"http://youtu.be/f-x8t0JOnVw",
                                    "credit":"",
                                    "caption":""
                             }
                    },
    **]**,
    "era": **[**
        {
            "startDate":"2011,12,10",
            "endDate":"2011,12,11",
            "headline":"Headline Goes Here",
            "tag":"This is Optional"
        }

    **]**,
    "chart": **[**
        {
            "startDate":"2011,12,10",
            "endDate":"2011,12,11",
            "headline":"Headline Goes Here",
            "value":"28"
        }

    **]**

     }
     }
    '; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:53:08.953

构建一个[数组](http://php.net/manual/en/function.array.php)。完成后，只需使用[json_encode](http://php.net/manual/en/function.json-encode.php) ($array) 以正确有效的 json 格式输出。

这样做将保护您的代码，您不会得到意想不到的结果 - 因为与 json 格式的代码相比，处理数组要容易得多。

**代码示例**

```
<?php
$arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);

echo json_encode($arr);

//Output: {"a":1,"b":2,"c":3,"d":4,"e":5}
?> 
```

# knockout.js - 淘汰赛映射验证

> ID：13933401
> 
> 赞同：20
> 
> 时间：2012-12-18T12:48:46.410
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-validation

我正在尝试将验证附加到映射视图。我正在使用 Knockout 映射和验证插件。伪模型：

```
Person {
    int Id;
    string Name;
    Book[] Books;
}

Book {
    int Id;
    string Name;
} 
```

Javascript：

```
function viewModel() {
    var self = this;
    self.persons = ko.observableArray();

    // persons are retrieved via AJAX...
    ko.mapping.fromJS(persons, {}, self.persons);
}

jQuery(function( $ ) {
    ko.applyBindings(new viewModel());
}); 
```

如何扩展 people observableArray 以设置验证规则和消息？我需要验证人员和书籍子数组属性。我发现只有使用显式模型设置的示例，没有自动映射，例如：

```
Name: ko.observable().extend({ required: true }) 
```

然后我需要设置 ko.validatedObservable、isValid 和 validation.init，但我真的不知道如何处理/组织这个。你能提供一些帮助吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-02T03:13:00.237

我发现至少有两种方法可以为通过 ko.mapping 插件创建的模型或视图模型对象提供验证：

1.  在创建某些属性时使用映射选项附加验证规则
2.  HTML5 属性。这仅支持某些验证（即必需的模式）。有关详细信息，请参阅[Knockout-Validation 插件的文档](https://github.com/ericmbarnard/Knockout-Validation#html5-validation-attributes)

上述两种技术也可以结合使用。有关示例，请参见以下[小提琴。](http://jsfiddle.net/thedude458/ysfYc/)

* * *

## 1\. 使用映射选项

Knockout Mapping 插件允许在要自定义的映射对象上创建某些属性。利用此功能，您可以覆盖插件的默认行为并为您的映射属性添加验证。下面是一个例子

**HTML**

```
<input data-bind="value: name" /> 
```

**Javascript**

```
var data = { name: "Joe Shmo" };

var validationMapping = {
    // customize the creation of the name property so that it provides validation
    name: {
        create: function(options) {
            return ko.observable(options.data).extend( {required: true} );
        }
    }
};

var viewModel = ko.validatedObservable(ko.mapping.fromJS(data, validationMapping));
ko.applyBindings(viewModel); 
```

## 2\. HTML5 属性

Knockout Validation 插件支持一组有限的 HTML5 验证属性，可用于您的 HTML 控件。但是，使用它们需要启用该`parseInputAttributes`选项。这是一个简单的例子：

**HTML**

```
<input data-bind="value: name" required /> 
```

**Javascript**

```
// this can also be configured through the "validationOptions" binding (https://github.com/ericmbarnard/Knockout-Validation/wiki/Validation-Bindings)
ko.validation.configure({
    parseInputAttributes: true
});

var data = { name: "Joe Shmo" };

var viewModel = ko.validatedObservable(ko.mapping.fromJS(data));
ko.applyBindings(viewModel); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-12T21:08:42.843

另一种方法是在映射后扩展可观察对象。

```
function viewModel() {
    var self = this;
    self.persons = ko.observableArray();

    // persons are retrieved via AJAX...
    ko.mapping.fromJS(persons, {}, self.persons);

    self.Name.extend({ required: true });
} 
```

# java - 如何在 JTextPane 中垂直居中文本和 JComponent？

> ID：13933402
> 
> 赞同：4
> 
> 时间：2012-12-18T12:48:45.060
> 
> 标签：java, swing, alignment, jtextpane, jcomponent

目前看起来如此

![在此处输入图像描述](../Images/99279ac2ded89fad3931ccfc610e2262.png)

该怎么做才能让它看起来如此？

![在此处输入图像描述](../Images/fc7fd6781b4d9d813b096fecf2b47655.png)

下面是我的代码：

```
 JFrame f = new JFrame();
    JTextPane textPane = new JTextPane();

    JTextField component = new JTextField("      ");
    component.setMaximumSize(component.getPreferredSize());
    textPane.setSelectionStart(textPane.getDocument().getLength());
    textPane.setSelectionEnd(textPane.getDocument().getLength());
    textPane.insertComponent(component);
    try {
        textPane.getDocument().insertString(textPane.getDocument().getLength(), "text",
            new SimpleAttributeSet());
    } catch (BadLocationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    f.add(new JScrollPane(textPane));
    f.setSize(200, 100);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setVisible(true); 
```

我发现与该主题相关的单个问题：[JTextPane 插入组件，垂直对齐错误](https://stackoverflow.com/questions/6506712/jtextpane-insert-component-faulty-vertical-alignment) 但是没有答案如何更改对齐方式。但根据那里的讨论，它必须是可能的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T13:12:38.753

你可以使用这个[http://java-sl.com/tip_center_vertically.html](http://java-sl.com/tip_center_vertically.html)

它也应该适用`JComponents`。

您还可以覆盖`LabelView's` `getPreferredSpan()`在底部添加一些空间。

或者，您可以尝试覆盖`RowView`内部类`ParagraphView`

[http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/javax/swing/text/ParagraphView.java#ParagraphView.Row](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/javax/swing/text/ParagraphView.java#ParagraphView.Row)

那指向内部类 Row 扩展 BoxView

你应该用自己的替换它。尝试覆盖

```
public float getAlignment(int axis) 
```

返回中心 (0.5)。如果这无助于覆盖 layoutMinorAxis(0 以返回正确的偏移量（移位）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T08:40:55.083

使用 JLabel 为您的文档定义样式并在其上设置垂直对齐方式：

```
Style s = doc.addStyle("icUf", regular);        
ImageIcon icUf = createImageIcon("uf.png", "Unidad Funcional");
if (icUf != null) {
    JLabel jl = new JLabel(icUf);
    jl.setVerticalAlignment(JLabel.CENTER);
    StyleConstants.setComponent(s, jl);
} 
```

插入标签：

```
doc.insertString(doc.getLength(), " ", doc.getStyle("icUf")); 
```

和文字：

```
doc.insertString(doc.getLength(), " text ", doc.getStyle("bold")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-18T12:59:53.340

根据上面的答案（这对我不起作用，但帮助我找到了这个），我使用了：

```
Style s = doc.addStyle("icUf", regular);        
ImageIcon icUf = createImageIcon("uf.png", "Unidad Funcional");
if (icUf != null) {
    // create label with icon AND text
    JLabel jl = new JLabel("some text",icUf, SwingConstants.LEFT);
    StyleConstants.setComponent(s, jl);
}
doc.insertString(doc.getLength(), " ", doc.getStyle("icUf")) 
```

这正确对齐了文本“一些文本”和图标。

# sql - 将表规范化为 1NF

> ID：13933403
> 
> 赞同：0
> 
> 时间：2012-12-18T12:48:48.443
> 
> 标签：sql, database, database-design, normalization

我正在努力将数据库分解为第一范式。

注意：我已将数据要求分解为 UNF 平面文件表，我将把图片放在下面，但我的声誉目前不高于 10。但是我会列出我的联合国基金会代表

这些是数据要求；

*   每个办公室都有一名经理（往往也是一名高级讲师）、数名高级讲师、讲师和行政人员。经理负责办公室的日常运作。
*   客户必须首先在办公室注册，其中包括填写一份申请表，其中记录了他们的个人详细信息。在第一节课之前，客户被要求参加与教练的面谈，以评估客户的需求并确保客户持有有效的临时驾驶执照。在整个学习驾驶过程的任何阶段，客户都可以自由地要求特定的教练或要求更换教练。面试结束后，第一节课就预定好了。客户可以要求单独的课程或以优惠的费用预订一组课程。
*   一节课为一小时，在办公室开始和结束。课程是在特定时间与特定教练在特定汽车上进行的。课程最早可以在上午 08:00 开始，最晚可以在晚上 8:00 开始。每节课结束后，教练都会记录客户的进度，并记下课程中使用的里程数。
*   学校有汽车库，可用于教学目的。每个教练都被分配到一辆特定的汽车上。除了教学之外，教师还可以免费使用汽车供个人使用。定期检查汽车是否存在故障。
*   准备好后，客户申请驾驶考试日期。要获得正式驾驶执照，客户必须通过驾驶和笔试部分。教师有责任确保客户为考试的各个方面做好最好的准备。教练不负责测试客户，并且在测试期间不在车内，但应该可以在测试中心之前和之后接送客户。如果客户未能通过测试，教师必须记录失败的原因。

驾校UNF的归一化表示：

```
OFFICE(
OfficeID,OfficeName,OfficeAddress,OfficePostcode,ManagerID,ManagerNAME,
ManagerTelephone,

[StaffID,StaffRole,StaffName,StaffSurname,StaffAddress,StaffPostcode,StaffSex,StaffD.O.B,
InstructorID,InstructorName,InstructorSurname,InstructorTelephone, CarID,CarRegistration,CarFaults,FaultDescription,

[ClientID,ClientName,ClientSurname,ClientAddress,ClientPostcode,ClientTelephone,ClientSex, 
InterviewID,Interviewer,ValidProvisional LessonID,LessonTime,LessonType,LessonPrice,LessonMileage,LessonProgress,
TestID,TestType,TestResult,Attempts,Failure Reason,Date Achieved]
) 
```

如果你想看联合国基金会，我会给你发电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:42:14.493

您将需要以下表格：

```
ROLES
role_id
role_name

EMPLOYEES
employee_id
forename
surname
role  (fk, -> roles.role_id)
telephone 
gender
address
postcode
dob 
```

如果您要为一个人提供多个电话号码，请考虑将它们存储在不同的表中；还要注意单个地址字段的问题。你不应该需要一个单独的桌子供教师使用；这些只是员工，他们的角色是指导员。

```
OFFICES
office_id
office_name
address
manager (fk, -> employees.employee_id)

CLIENTS
client_id
forename
surname
address
postcode
telephone
gender
has_driving_license
interviewdate
interviewer   (fk, -> employees.employee_id) 
```

我认为你不需要单独的面试表，只要每个客户只面试一次

```
CARS
license
description

LESSONS
lesson_id
curdate
client   (fk, -> clients.client_id)
instructor  (fk, -> employees.employee_id)
car      (fk, -> cars.license)
price
invoice
receipt

RESULTS
result_id
description

TESTS
test_id
client   (fk, -> clients.client_id)
curdate
result   (fk, -> results.result_id) 
```

不需要“尝试”字段 - 您可以计算每个客户端的“测试”表中有多少条目，以便了解每个客户端尝试测试的次数。

我希望这足以让您开始使用数据库。

编辑 19/12/12：我添加了外键关系和一个新表 RESULTS。

# android - 如何为 gridview 图像创建滑动动作？

> ID：13933404
> 
> 赞同：0
> 
> 时间：2012-12-18T12:48:52.253
> 
> 标签：android, image, gridview, swipe

我想为 gridview 图像创建 fling(swipe) 动作。 当我单击网格视图图像时，我使用此链接[http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/](http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/)实现了网格视图图像它将进入全屏图像。现在显示完整图像后，然后用手指触摸从左到右和从右到左滑动图像。这里不使用视图翻转器，因为这里有更多图像。这里单击哪个图像显示并向右或向左滑动。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:12:46.037

为此，您可以使用 GestureDetector 和 View.onTouchListener

这是我之前使用的一些代码的摘录：

```
private int SWIPE_MIN_DISTANCE = 160;
private int SWIPE_MAX_OFF_PATH = 250;
private int SWIPE_THRESHOLD_VELOCITY = 200;
private class MyGestureDetector extends SimpleOnGestureListener {
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
        try {
            // Move vertical too much?
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                return false;

            float x1 = e1.getX(),
                  x2 = e2.getX();

            // Right to left swipe
            if (x1 - x2 > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                next();

            // Left to right swipe
            } else if (x2 - x1 > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                previous();
            }
        } catch (Exception e) {
            // nothing
        }
        return false;
    }
} 
```

# android - Android：删除动态创建的字段

> ID：13933406
> 
> 赞同：1
> 
> 时间：2012-12-18T12:48:55.667
> 
> 标签：android, android-view, android-spinner

在我的android 应用程序中，我动态创建了一个 **TableRow**，并在这个tableRow 中插入了一个textView 和一个editTextView。

还有一个字段是微调器。根据微调器上的选择，创建或删除此 TableRow。

[在这里](https://stackoverflow.com/questions/3995215/add-and-remove-views-in-android-dynamically)，他们提到了如何从布局中删除字段，但问题是我如何获得视图。

这里我的代码是：

```
spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View v,
                int pos, long id) {

            if (pos > 1) {
                tableRowName = new TableRow(this);
                tableRowName.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

                textViewName = new TextView(this);
                textViewName.setText("Name*");
                textViewName.setTextColor(Color.WHITE);
                textViewName.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

                editTextPersonName = new EditText(this);
                editTextPersonName.setHint("Name");
                editTextPersonName.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

                tableRowName.addView(textViewName);
                tableRowName.addView(editTextPersonName);

                tableLayout.addView(tableRowName, new TableLayout.LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
            } else {

                tableRowName.removeView((View) v.getParent());
            }
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            Toast.makeText(getApplicationContext(),
                    "onNothingSelected() method is called by Stage Spinner",
                        Toast.LENGTH_LONG).show();
        }
    }); 
```

此代码能够创建 tableRow 但无法删除此 tableRow。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:54:30.660

您最好将视图添加到布局 xml 中，然后动态地将可见性设置为 GONE 或 VISIBLE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:51:23.547

将标签设置为视图，`v.setTag("my textView");` 然后当您想找到它时使用`findViewByTag("my textView");`

# iphone - 是否有任何用于检测发送或接收短信的 iphone 专用 API

> ID：13933407
> 
> 赞同：2
> 
> 时间：2012-12-18T12:48:55.950
> 
> 标签：iphone, ios, iphone-privateapi

我需要实现一个在 iPhone 上接收或发送短信时检测事件的应用程序。不需要阅读短信。

我的应用程序将使用苹果的 voip 和导航器后台多任务功能在后台运行。

我可以使用私有 api，因为我的客户在 appstore 上不需要这个应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-01T15:36:21.483

在不越狱设备的情况下，绝对可以检测到何时接收或发送短信，但我相信您只能访问短信的电话号码，而不是实际的短信文本。

您需要链接 CoreTelephony 私有 api，然后向 CTTelephonyCenterAddObserver 注册事件观察器。有关示例，请参见[http://tech.ruimaninfo.com/?p=83 。](http://tech.ruimaninfo.com/?p=83)我已经确认这适用于 iOS4、5 和 6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:32:02.403

我自己从来没有做过，所以我不确定这是否可能。

但是，如果您愿意加倍努力。

我建议你看看几个地方（拆开它们，看看它们是如何工作的）：

*   /System/Library/Frameworks/PrivateFrameworks/ChatKit.framework
*   /System/Libray/Messages/PlugIns/SMS.imservice
*   /System/Library/BulletinBoardPlugins/SMSBBPlugin
*   /System/Library/CoreServices/Springboard.app
*   /System/Library/PrivateFrameworks/IMFoundation.framework

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:58:12.963

不，没有任何此类 API 可以在未越狱的 iPhone 上获取短信发送/接收通知。Verizon 等一些服务提供 API，但此类 API 仅适用于 Verizon 网络。在越狱的 iPhone 上，您可以访问内部 SQLITE 数据库。

# php - OpenCart 是否针对 OWASP 前 10 强？

> ID：13933408
> 
> 赞同：4
> 
> 时间：2012-12-18T12:49:00.653
> 
> 标签：php, opencart, owasp

我找到了“测试指南”，但它有[300 页](https://www.owasp.org/images/5/56/OWASP_Testing_Guide_v3.pdf)。阅读它并为自己测试会很好，但我想知道是否有人已经完成了这项工作。[当我搜索这个时，我在 OC论坛](http://forum.opencart.com/viewtopic.php?f=10&t=12043#p59061)上找到了一个关于 PCI 合规性的帖子，但这是一个切题。

那么，有谁知道，*具体来说*，OpenCart 是否针对 OWASP 前 10 名威胁列表进行了强化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:14:14.077

AFAIK, and from my poor testing (and because I know how the OC is written), I could say, that **base OC** (without any 3^(rd) party extensions) is safe from:

*   **broken access control**
*   all user **input is validated**, thus **safe from SQL** or other **injection**
*   **XSS**
*   **insecure cryptographic storage** - OC does not store any sensitive data and default online payment options are processed via SSL
*   **DoS** (indirectly - nowadays server firewalls distinguish a DoS attack and block the communication from that IPs)
*   **insecure direct object references** (only allowed types of resources could be uploaded and downloaded unless direct access to an FTP)
*   **security misconfiguration** - OC config files are not accessible, users should keep their stores up to date themselves...

What I did not check/encounter so far:

*   **Buffer overflow** due to a foreign language (different encoding set) input

Weaker points (**not defects!**):

*   OC **frontend** is not well protected against **CSRF**, backend is
*   **session management** - problem with possibility of decrypting the session information is the same as over the 95% of web applications
*   until directly set/unset, OC will report and **display** any **error message** that may occur that helps an attacker to easily find possible exploits...

**From my view, OC is very well safe-written open source e-commerce solution!** [(Unless compromited with a poorly written extensions...)]

# android - 如何使用 Google Maps Android API v2 绘制动态线（路线）

> ID：13933411
> 
> 赞同：5
> 
> 时间：2012-12-18T12:49:23.283
> 
> 标签：android, google-maps-android-api-2

我想知道使用 Google Maps API v2 在地图上绘制动态路线的最佳做法是什么。我想要一张能够在用户移动时延长路线的地图。使用折线和折线选项似乎有明显的解决方案。但是在实例化折线**后，**我找不到一种简单的方法来添加点。绘制折线是这样的：

```
PolylineOptions polylineOptions = new PolylineOptions();
polylineOptions.add(POINT1, POINT2, POINT3);
Polyline line = googleMap.addPolyline(polylineOptions); 
```

但是在我将这条线传递给 GoogleMap 之后，我无法向它添加任何新点。就像是

```
polylineOptions.add(POINT1, POINT2, POINT3); 
```

不会向我的路线添加任何内容。

我可以添加完整的新折线。但是没有办法延长现有的吗？我想出了一种方法，获取折线的所有点，添加新点，然后将它们写回线：

```
List<LatLng> points = line.getPoints();
points.add(POINT4);
line.setPoints(points); 
```

但这对我来说似乎很麻烦。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-17T17:06:16.667

在`mainActivity`类中，定义一个名为的私有静态`LatLng`变量并将`prev`其初始化为`(0,0)`first。还要创建一个标志变量并为其分配 0。在 Listener 的`OnLocationChanged`方法中，创建一个局部变量，`LatLng`命名为`current`并在此处获取当前坐标...先检查 flag 的值，如果为 0 则赋值`current`给`prev`。然后添加一条折线。

`current`再次分配`prev`（这将在第一次之后每次发生，标志将为 1）

例如：

```
public void onLocationChanged(Location location) 
{

    LatLng current = new LatLng(location.getLatitude(), location.getLongitude());

    if(flag==0)  //when the first update comes, we have no previous points,hence this 
    {
        prev=current;
        flag=1;
    }
    CameraUpdate update = CameraUpdateFactory.newLatLngZoom(current, 16);
    map.animateCamera(update);
    map.addPolyline((new PolylineOptions())
        .add(prev, current).width(6).color(Color.BLUE)
        .visible(true));
    prev=current;
    current = null;                    
} 
```

像这样的东西。当然可以进行性能改进，这只是一个示例代码。但它应该工作。每次折线将只添加前一个点和当前点，从而逐点扩展它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:07:10.507

查看文档，似乎`polylineOptions.add(LatLng)`and `googleMap.addPolyline(polylineOptions)`方法返回了该`polylineOptions`对象。第一种方法也将返回`polylineOptions` **与**添加到末尾的点。

我认为您必须再次添加`polylineOptions`to`googleMap.addPolyline(polylineOptions)`或`googleMap.clear()`在第二次添加之前使用。像这样的东西：

```
polylineOptions = googleMap.addPolyline(polylineOptions);
// googleMap.clear();
googleMap.addPolyline(polylineOptions.add(point)); 
```

# objective-c - ios中的__block和CLGecoder问题？

> ID：13933414
> 
> 赞同：0
> 
> 时间：2012-12-18T12:49:31.570
> 
> 标签：objective-c, ios, objective-c-blocks, clgeocoder

我写了CLGecoder的代码，代码是

```
-(NSString *)GetCurrentAddress:(CLLocation *)Location
{
  __block NSString  *locatedaddress;
    CLGeocoder *Gecoder=[[CLGeocoder alloc]init];
    [Gecoder reverseGeocodeLocation: Location completionHandler: 
     ^(NSArray *placemarks, NSError *error) {

         //Get address
         CLPlacemark *placemark = [placemarks objectAtIndex:0];

         NSLog(@"Placemark array: %@",placemark.addressDictionary );

         //String to address
       locatedaddress = [[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];

         //Print the location in the console
         NSLog(@"Currently address is: %@",locatedaddress);

     }];
    return locatedaddress;
} 
```

问题出在address里面的completionHandler有值但是外面不是吗？任何人都可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:46:05.827

地理编码器是异步的——根据定义，这意味着您无法立即获得结果。您必须使用完成处理程序对结果执行您想要执行的任何操作。

# c# - 从一个文本框单击“Tab”到另一个文本框，图形消失了

> ID：13933417
> 
> 赞同：0
> 
> 时间：2012-12-18T12:49:33.643
> 
> 标签：c#, winforms

我有 2 个文本框，一个面板，在面板中我有一个图形：

```
Graphics g=myPanel.CreateGraphics(); 
```

当我从第一个文本框中单击“Tab”时，焦点移动到第二个文本框，我的图形神奇地消失了！

# python - Python：快速而肮脏的数据类型 (DTO)

> ID：13933419
> 
> 赞同：26
> 
> 时间：2012-12-18T12:49:35.537
> 
> 标签：python, dto

很多时候，我发现自己在编写一些琐碎的数据类型，比如

```
class Pruefer:
    def __init__(self, ident, maxNum=float('inf'), name=""):
        self.ident  = ident
        self.maxNum = maxNum
        self.name   = name 
```

虽然这非常有用（显然我不想用匿名 3 元组替换上面的内容），但它也是非常样板的。

现在例如，当我想在字典中使用该类时，我必须添加更多样板，例如

```
 def __hash__(self):
        return hash(self.ident, self.maxNum, self.name) 
```

我承认在我的所有样板类中可能很难识别出一般模式，但尽管如此，我还是想提出这个问题：

*   python 中是否有任何流行的习惯用法可以使用命名访问器派生快速而肮脏的数据类型？

*   或者如果没有，也许 Python 大师可能想炫耀一些元类黑客或类工厂，以使我的生活更轻松？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-18T12:52:22.533

```
>>> from collections import namedtuple
>>> Pruefer = namedtuple("Pruefer", "ident maxNum name")
>>> pr = Pruefer(1,2,3)
>>> pr.ident
1
>>> pr.maxNum
2
>>> pr.name
3
>>> hash(pr)
2528502973977326415 
```

要提供默认值，您需要做更多的事情......简单的解决方案是编写带有重新定义`__new__`方法的子类：

```
>>> class Pruefer(namedtuple("Pruefer", "ident maxNum name")):
...     def __new__(cls, ident, maxNum=float('inf'), name=""):
...         return super(Pruefer, cls).__new__(cls, ident, maxNum, name)
... 
>>> Pruefer(1)
Pruefer(ident=1, maxNum=inf, name='') 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-01-25T21:25:36.317

Python 3.6 中最有希望的事情之一是变量注释。他们允许以下一种方式将 namedtuple 定义为类：

```
In [1]: from typing import NamedTuple

In [2]: class Pruefer(NamedTuple):
   ...:     ident: int
   ...:     max_num: int
   ...:     name: str
   ...:     

In [3]: Pruefer(1,4,"name")
Out[3]: Pruefer(ident=1, max_num=4, name='name') 
```

它与命名元组相同，但保存注释并允许使用 mypy 等静态类型分析器检查类型。

更新：15.05.2018

现在，在 Python 3.7中存在[数据类](https://hackernoon.com/a-brief-tour-of-python-3-7-data-classes-22ee5e046517)，因此这是定义 DTO 的首选方式，也为了向后兼容，您可以使用[attrs](http://www.attrs.org/en/stable/)库。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-09-13T17:36:51.303

> python 中是否有任何流行的习语可以通过命名访问器派生快速...数据类型？

[数据库](https://docs.python.org/3.9/library/dataclasses.html#dataclasses.dataclass)。他们完成了这个确切的需求。

一些答案提到了数据类，但这里有一个例子。

**代码**

```
import dataclasses as dc

@dc.dataclass(unsafe_hash=True)
class Pruefer:
    ident : int
    maxnum : float = float("inf")
    name : str  = "" 
```

**演示**

```
pr = Pruefer(1, 2.0, "3")

pr
# Pruefer(ident=1, maxnum=2.0, name='3')

pr.ident
# 1

pr.maxnum
# 2.0

pr.name
# '3'

hash(pr)
# -5655986875063568239 
```

* * *

**细节**

你得到：

*   漂亮的代表
*   默认值
*   散列
*   点属性访问
*   ... 多得多

你不会（直接）得到：

*   元组解包（与 namedtuple 不同）

这是有关数据类详细信息的[指南](https://realpython.com/python-data-classes/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T13:32:34.380

对于 Alexey Kachayev 已经非常出色的答案，我没有什么要补充的——但是，*可能*有用的一件事是以下模式：

```
Pruefer.__new__.func_defaults = (1,float('inf'),"") 
```

这将允许您创建一个工厂函数，该函数返回一个可以具有默认参数的新命名元组：

```
def default_named_tuple(name,args,defaults=None):
    named_tuple = collections.namedtuple(name,args)
    if defaults is not None:
        named_tuple.__new__.func_defaults = defaults
    return named_tuple 
```

这可能看起来像黑魔法——起初它对我有用，但它都记录在[数据模型中并在](http://docs.python.org/2/reference/datamodel.html)[这篇文章](https://stackoverflow.com/questions/13784840/are-you-allowed-to-modify-func-defaults-defaults-in-python-3-x-in-python)中进行了讨论。

在行动：

```
>>> default_named_tuple("Pruefer", "ident maxNum name",(1,float('inf'),''))
<class '__main__.Pruefer'>
>>> Pruefer = default_named_tuple("Pruefer", "ident maxNum name",(1,float('inf'),''))
>>> Pruefer()
Pruefer(ident=1, maxNum=inf, name='')
>>> Pruefer(3)
Pruefer(ident=3, maxNum=inf, name='')
>>> Pruefer(3,10050)
Pruefer(ident=3, maxNum=10050, name='')
>>> Pruefer(3,10050,"cowhide")
Pruefer(ident=3, maxNum=10050, name='cowhide')
>>> Pruefer(maxNum=12)
Pruefer(ident=1, maxNum=12, name='') 
```

并且仅将一些参数指定为默认值：

```
>>> Pruefer = default_named_tuple("Pruefer", "ident maxNum name",(float('inf'),''))
>>> Pruefer(maxNum=12)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: __new__() takes at least 2 arguments (2 given)
>>> Pruefer(1,maxNum=12)
Pruefer(ident=1, maxNum=12, name='') 
```

请注意，正如所写，将 a 传入`tuple`as可能是安全的`defaults`。`tuple`但是，通过确保函数中有一个合理的对象，您可以轻松获得更多花哨的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T13:51:35.840

可以帮助您使样板代码更通用的另一种方法是对（本地）变量字典的迭代。这使您可以将变量放在列表中，并在循环中处理这些变量。例如：

```
class Pruefer:
     def __init__(self, ident, maxNum=float('inf'), name=""):
         for n in "ident maxNum name".split():
             v = locals()[n]  # extract value from local variables
             setattr(self, n, v)  # set member variable

     def printMemberVars(self):
         print("Member variables are:")
         for k,v in vars(self).items():
             print("  {}: '{}'".format(k, v))

P = Pruefer("Id", 100, "John")
P.printMemberVars() 
```

给出：

```
Member Variables are:
  ident: 'Id'
  maxNum: '100'
  name: 'John' 
```

从有效利用资源的角度来看，这种方法当然不是最理想的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-08T21:23:40.293

如果使用 Python 3.7，您可以使用数据类；数据类可以被认为是“具有默认值的可变命名元组”

[https://docs.python.org/3/library/dataclasses.html](https://docs.python.org/3/library/dataclasses.html)

[https://www.python.org/dev/peps/pep-0557/](https://www.python.org/dev/peps/pep-0557/)

# javascript - jQuery jScrollPane Plugin IE 8 滚动对于大数据/内容非常慢

> ID：13933428
> 
> 赞同：5
> 
> 时间：2012-12-18T12:49:53.233
> 
> 标签：javascript, jquery, jquery-plugins, internet-explorer-8, jscrollpane

IE 8 滚动中的 jQuery jScrollPane 插件加载和滚动非常缓慢。在 IE 9 中也是如此，但是由于我已经应用了 [jScrollPane 中提到的修复程序导致脚本缓慢警告](https://stackoverflow.com/questions/8135948/jscrollpane-causes-slow-script-warning)它在 IE 9 中工作正常，但在 IE 8 中问题仍然存在。请帮忙 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:51:17.613

您可以在 jscroll 库的代码中更改滚动速度。如果您编写代码来读取内容高度并根据高度设置滚动量，那就更好了

# android - LibGDX - 如何将纹理属性传递给球体着色器

> ID：13933431
> 
> 赞同：0
> 
> 时间：2012-12-18T12:50:18.437
> 
> 标签：android, 3d, opengl-es-2.0, libgdx

我有下一个顶点和片段着色器：

```
String vertexShader = "attribute vec4 a_position;    \n"
    + "attribute vec4 a_color;\n" 
    + "attribute vec2 a_texCoords;\n"
    + "uniform mat4 u_worldView;\n" 
    + "varying vec4 v_color;"
    + "varying vec2 v_texCoords;"
    + "void main()                  \n"
    + "{                            \n"
    + "   v_color = vec4(1, 1, 1, 1); \n"
    + "   v_texCoords = a_texCoords; \n"
    + "   gl_Position =  u_worldView * a_position;  \n"
    + "}                            \n";
String fragmentShader = "#ifdef GL_ES\n"
    + "precision mediump float;\n"
    + "#endif\n"
    + "varying vec4 v_color;\n"
    + "varying vec2 v_texCoords;\n"
    + "uniform sampler2D u_texture;\n"
    + "void main()                                  \n"
    + "{                                            \n"      
     + "  gl_FragColor = texture2D(u_texture, v_texCoords);\n"
    + "}"; 
```

如何设置属性`a_position`，`a_color`以及`a_texCoords`3D 球体？要设置制服，我使用：

```
texture.bind();
shader.begin();
shader.setUniformMatrix("u_worldView", matrix);
shader.setUniformi("u_texture", 0);
//HOW TO?
//shader.setAttributef("a_texture", value1, value2, value3, value4)
mesh.render(shader, GL20.GL_TRIANGLE_STRIP);
shader.end(); 
```

# html - 全宽背景图像限制高度

> ID：13933432
> 
> 赞同：6
> 
> 时间：2012-12-18T12:50:28.700
> 
> 标签：html, css

我想获得全屏背景图像，但只有宽度，而不是高度，就像[这里](https://www.edx.org/)

我一直在玩，`background-size:cover;`但它覆盖了整个页面 - 我只想覆盖一定的高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T06:16:14.560

怎么样`background-size: 100% 80%`（例如）。
您可以更改第二个值，即高度。

这是一个[小提琴](http://jsfiddle.net/zq83e/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:55:35.197

您提到的网站只是在具有固定`height`和`width: 100%`.

例如，您提到的网站使用：

```
header {
   height: 460px;
   margin-top: -69px;
   overflow: hidden;
   padding: 0px;
   width: 100%;
} 
```

注意代码块中的高度，`background-image: cover`只是意味着缩放背景图像以适应空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T21:05:20.353

所以我找到了我要找的东西：

***CSS：***

```
#header-wrapper{
   top: 0;
   left: 0;
   height: auto;
   position: absolute;
   width: 100%;
} 
```

***HTML：***

```
<div id="header-wrapper">
    <img src="image.jpg" width="100%" style="border-bottom:1px solid black;">
</div> 
```

感谢所有的帮助！

# c# - 如何获取字段类型名称？

> ID：13933434
> 
> 赞同：2
> 
> 时间：2012-12-18T12:50:38.527
> 
> 标签：c#, reflection

如何在反射中获取字段的类型？我已经尝试过`FieldInfo.Name`其他一些选择，但没有成功。

假设我有`int x = 5;`. 我怎样才能得到`"System.Int32"`or`"int"`字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T12:54:52.437

你想要的是[FieldInfo.FieldType](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.fieldtype.aspx)。

如果您想要完整的类型名，请使用；

```
myFieldInfo.FieldType.FullName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:57:22.113

```
string type = x.GetType().FullName; 
```

类型将是：`"System.Int32"`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-18T12:52:45.560

使用 GetType 方法 -`x.GetType().Name;`

# mysql - Doctrine2 / Symfony2 - 每个包使用不同的数据库

> ID：13933444
> 
> 赞同：4
> 
> 时间：2012-12-18T12:51:00.837
> 
> 标签：mysql, symfony, doctrine-orm

如何在每个带有 Doctrine2 的 Symfony2 捆绑包中使用不同的数据库？

FooBundle <- 数据库“Foo”

BarBundle <- 数据库“酒吧”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T12:53:23.807

这可能有助于[How to work with Multiple Entity Managers and Connections](http://symfony.com/doc/2.0/cookbook/doctrine/multiple_entity_managers.html)。

因此，您可以定义与您的数据库连接相关的多个[实体管理器，然后您可以将您的捆绑包映射到正确的](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/EntityManager.php)[实体管理器](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/EntityManager.php)。

[文档](http://symfony.com/doc/2.0/cookbook/doctrine/multiple_entity_managers.html)中的示例得到了很好的解释。

```
doctrine:
    dbal:
        default_connection:   foo_connection
        connections:
            foo_connection:
                # ...
                # Foo connection parameters
                # ...
            bar_connection:
                # ...
                # Bar connection parameters
                # ...

    orm:
        default_entity_manager:   foo_manager
        entity_managers:
            foo_manager:
                connection:        foo_connection
                mappings:
                    FooBundle: ~
            bar_manager:
                connection:       bar_connection
                mappings:
                    BarBundle: ~ 
```

# azure - 防止未经授权的用户访问 WA 中的公共 blob

> ID：13933445
> 
> 赞同：0
> 
> 时间：2012-12-18T12:51:11.617
> 
> 标签：azure, azure-storage, azure-blob-storage

我创建了一个“公共 Blob”容器。我们的应用程序可以将文件添加到此容器中。问题是每个人都可以看到文件（PDF 文件），如果他们知道 url 并浏览它们。

我们可以做些什么来防止未经授权的用户看到这些文件？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:28:57.463

如果您想防止未经授权的访问，您需要将容器更改回**private**。这样，只有拥有有效帐户/密钥组合的人或拥有有效 SAS 的人才能访问这些 blob。

SAS 可以以不同的方式使用：通过在 SDK 中使用它（如果您希望您的客户端应用程序使用它）或通过将其附加到 blob 的 URL。

查看 Maarten 关于 SAS 的博客文章以开始使用：[Storing user uploads in Windows Azure blob storage](http://blog.maartenballiauw.be/post/2012/12/18/Storing-user-uploads-in-Windows-Azure-blob-storage.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:35:01.337

Azure Blob 的访问控制：http: [//convective.wordpress.com/2010/01/20/access-control-for-azure-blobs/](http://convective.wordpress.com/2010/01/20/access-control-for-azure-blobs/)

# vb.net - 将 XmlDocumentType 和 XmlDeclaration 都插入到 XmlDocument

> ID：13933451
> 
> 赞同：1
> 
> 时间：2012-12-18T12:51:20.853
> 
> 标签：vb.net, vb.net-2010

我在创建 XmlDocument 类时遇到了一些麻烦。这是我试图做的：

```
Dim myDoc = New XmlDocument()

Dim docType As XmlDocumentType = myDoc.CreateDocumentType("DtdAttribute", Nothing, "DtdFile.dtd", Nothing)
myDoc.XmlResolver = Nothing
myDoc.AppendChild(docType)

Dim xmldecl As XmlDeclaration = myDoc.CreateXmlDeclaration("1.0", Encoding.GetEncoding("ISO-8859-15").BodyName, "yes")

Dim root As XmlElement = myDoc.CreateElement("RootElement")

myDoc.AppendChild(root)
myDoc.InsertBefore(xmldecl, root) 
```

这将导致错误：无法在指定位置插入节点。抛出此错误的行是`myDoc.InsertBefore(xmldecl, root)`

只是无法弄清楚这一点。我应该按什么顺序插入这些元素？我尝试了不同的命令，但我认为我只是在做一些完全错误的事情，这甚至不应该放在首位:) 但是那该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:58:18.133

这对我有用：

```
Dim myDoc As New XmlDocument()
Dim xmldecl As XmlDeclaration = myDoc.CreateXmlDeclaration("1.0", Encoding.GetEncoding("ISO-8859-15").BodyName, "yes")
myDoc.AppendChild(xmldecl)
Dim docType As XmlDocumentType = myDoc.CreateDocumentType("DtdAttribute", Nothing, "DtdFile.dtd", Nothing)
myDoc.XmlResolver = Nothing
myDoc.AppendChild(docType)
Dim root As XmlElement = myDoc.CreateElement("DtdAttribute")
myDoc.AppendChild(root) 
```

请注意，根元素名称必须与`name`给定的参数相同`XmlDocument.CreateDocumentType`。

但是，您可能会发现，要像这样从头开始构建 XML 文档，使用以下命令会更容易`XmlTextWriter`：

```
Using writer As New XmlTextWriter("C:\Test.xml", Encoding.GetEncoding("ISO-8859-15"))
    writer.WriteStartDocument()
    writer.WriteDocType("DtdAttribute", Nothing, "DtdFile.dtd", Nothing)
    writer.WriteStartElement("DtdAttribute")
    writer.WriteEndElement()
    writer.WriteEndDocument()
End Using 
```

# uiviewcontroller - 通过操作重新加载应用程序需要正确的方向

> ID：13933452
> 
> 赞同：0
> 
> 时间：2012-12-18T12:51:21.727
> 
> 标签：uiviewcontroller

我的场景是 UIView 控制器以编程方式显示不同的子视图......就像一个游戏板。现在我处于一个令人难以置信的境地：

游戏结束后我找不到重新加载应用程序的方法！？我想做的是在 IBAction 上为明星新游戏终止场景 clic 之后。我的疑问是关于 ViewDidLoad 或调用 Main。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:44:19.253

尝试将您的代码从 viewDidLoad 移动到新函数中，例如 -(void)startGame 或 -(void)refreshViews: 并在您想要重新加载视图时调用该函数。即使在 viewDidLoad 中，您也可以使用此功能加载您的视图。

```
-(void)viewDidLoad
{
[super viewDidLoad];

[self startGame];

} 
```

请记住，如果您正在创建分配并在此函数之外添加一些子视图，那么它们将一直可见，除非您在调用 startGame 之前将它们从 superView 中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:10:53.680

我用这段代码解决了它：

```
(IBAction)newGame:(id)sender{

    UIView *parent = self.view.superview;
    [self.view removeFromSuperview];
    self.view = nil; // unloads the view
    [parent addSubview:self.view];

} 
```

# php - 获取具有特定键/值对的二维数组中的子数组

> ID：13933454
> 
> 赞同：4
> 
> 时间：2012-12-18T12:51:28.983
> 
> 标签：php, arrays, foreach, keyvaluepair, sub-array

我有一个大型 PHP 数组，类似于：

```
$list = array(
    array(
        'id'     = '3243'
        'link'   = 'fruits'
        'lev'    = '1'
    ),
    array(
        'id'     = '6546'
        'link'   = 'apple'
        'lev'    = '2'
    ),
    array(
        'id'     = '9348'
        'link'   = 'orange'
        'lev'    = '2'
    )
) 
```

我想获取包含特定`id`.

目前我使用以下代码：

```
$id = '3243'
foreach ($list as $link) {
    if (in_array($id, $link)) {
        $result = $link;
    }
} 
```

它有效，但我希望有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T12:53:46.230

你可以

*   write`$link['id']==$id`而不是`in_array($id, $link)`whitch 会更便宜。
*   在之后添加`break;`指令`$result = $link;`以避免无用的循环

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-22T23:59:46.167

虽然在提出问题时这个答案不起作用，但现在有一种很简单的方法可以解决这个难题。

您可以在 PHP 5.5 中执行以下操作：

```
$newList = array_combine(array_column($list,'id'),$list); 
```

那么以下情况将成立：

```
$newList[3243] = array(
                         'id'   = '3243';
                         'link' = 'fruits'; etc... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-27T11:37:41.470

PHP 5.4 及更高版本中最简单的方法是结合其回调函数中[`array_filter`](http://php.net/manual/en/function.array-filter.php)的[`use`语言结构：](http://php.net/manual/en/functions.anonymous.php#example-165)

```
function subarray_element($arr, $id_key, $id_val = NULL) {
  return current(array_filter(
    $arr,
    function ($subarr) use($id_key, $id_val) {
      if(array_key_exists($id_key, $subarr))
        return $subarr[$id_key] == $id_val;
    }
  ));
}
var_export(subarray_element($list, 'id', '3243')); // returns:
// array (
//   'id' => '9348',
//   'link' => 'orange',
//   'lev' => '2',
// ) 
```

[`current`](http://php.net/manual/en/function.current.php) just returns the first element of the filtered array. A few more [online 3v4l examples of getting different sub-arrays](https://3v4l.org/XioRa) from OP's `$list`.

# objective-c - 从视图控制器显示新的视图控制器

> ID：13933456
> 
> 赞同：0
> 
> 时间：2012-12-18T12:51:50.667
> 
> 标签：objective-c, xcode, uiviewcontroller

我正在编写一个与 CPP 代码集成的 iPhone 应用程序，我使用 C 接口文件作为 Objective-C 和 CPP 代码之间的通用接口。

我正在尝试使用以下代码从当前视图中显示新视图：

```
viewTowController *screen = [[viewTwoController alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:screen animated:YES]; 
```

我以前也使用过此代码，但它是在按钮单击事件上，它工作得非常好，但我需要根据 CPP 代码生成的事件（在从 CPP 调用的回调函数上）显示一些视图。

当我从 CPP 回调函数调用此代码时，如下所示：

```
-(void) displayView
{
    viewTwoController *screen = [[viewTwoController alloc] initWithNibName:nil bundle:nil];
    [self presentModalViewController:screen animated:YES];
}

//-- C Interface Function Implementation --//
void onDisplayView(void *self)
{
    [(id) self displayView]; 
} 
```

我无法看到添加到屏幕的视图，并且在控制台日志窗口中出现以下错误。

```
2012-12-18 18:03:02.128 p2pwebrtc[5637:5637] *** _NSAutoreleaseNoPool(): Object 0x4f04520 of class UIView autoreleased with no pool in place - just leaking
Stack: (0x305a2e6f 0x30504682 0x309778ac 0x7db6 0x7d28 0x33bb 0x6fb0 0x1af865 0x1afb4a 0x1afc5e 0x62a1 0x373e 0x4672 0x39937f 0x3ca1e4 0x3ca265 0x3cc6 0x926d8155 0x926d8012) 
```

我在这方面做错了什么，还是有其他方法？

****更新 ******

 **正如答案中所建议的，我需要在 UI Thread 中执行此代码，为此我需要执行以下代码：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [(id) self displayView];
}); 
```

当我在 Objective-C 函数或 CPP 函数中调用此代码时，我得到 ERROR `'dispatch_get_main_queue' was not declared in this scope`。

我也在使用 OSX 版本 10.5.8 和 Xcode 版本 3.1.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:56:59.330

确保您在主线程上调用 UIKit，如下所示：

```
void onDisplayView(void *self) {
    dispatch_async(dispatch_get_main_queue(), ^{
        [(id) self displayView];
    });
} 
```

如果您的目标是旧版本的 iOS（GCD 之前），您可以这样做

```
// assuming `self` inherits from NSObject, of course
void onDisplayView(void *self) {
    [self performSelectorOnMainThread:@selector(displayView) withObject:nil waitUntilDone:NO];
} 
```**

# objective-c - UITextView 中的多个文本对齐（iOS 4 兼容）

> ID：13933457
> 
> 赞同：0
> 
> 时间：2012-12-18T12:51:53.850
> 
> 标签：objective-c, ios, uitextview, core-text, text-alignment

我需要在单个中使用多个 textAlignments，`UITextView`即一个 para LeftAligned 和另一个 Para Right。

我实现了这一点，`NSMutableAttributedString`但这仅适用于 iOS 6，因为它在使用旧操作系统的设备上崩溃。我正在寻找一些适用于以前`iOS`版本的解决方案。理想`iOS4.3`兼容的解决方案。我已经检查了在 SO here 上上传的几个解决方案，但找不到哪个确实设置了多个对齐方式。可能是由于我对核心文本知之甚少，我无法使用它。一些有关示例代码的具体帮助将有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:56:53.077

如果您只显示文本（不进行编辑），则可以使用 UIWebView 和 CSS 进行文本样式设置。

# angularjs - ngOptions 导致选项值错误

> ID：13933461
> 
> 赞同：5
> 
> 时间：2012-12-18T12:51:55.670
> 
> 标签：angularjs

我正在尝试渲染选择框，但它没有按预期工作 - 选项值不正确。我检查了[手册](http://docs.angularjs.org/api/ng.directive%3aselect)，根据它，数组的语法（在我的例子中是对象数组）是

```
select as label for value in array 
```

所以这就是我正在做的事情：

数据：

```
[{"id":"3","name":"asdasd","code":"asdads","group":"2","cost":"0"},{"id":"4","name":"adrf fg df ","code":"dasfasd","group":"2","cost":"0"}] 
```

模板：

```
<select ng-model="productToBuy" ng-options="item.id as item.id for item in products"></select> 
```

渲染结果：

```
<select ng-model="productToBuy" ng-options="item.id as item.id for item in products" class="ng-pristine ng-valid">
    <option value="0" selected="selected">3</option>
    <option value="1">4</option>
</select> 
```

正如我们所看到的，选项值没有设置为项目的 ID。

此外，当源是数组时，这可能不是正确的语法，但我在尝试这样的时候得到相同的结果：

```
<select ng-model="productToBuy" ng-options="item.id as item.id for (key, item) in products"></select> 
```

我把这段代码放在[jsfiddle](http://jsfiddle.net/ADukg/1547/)上。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T14:22:50.873

这是 ngOptions 指令的行为（您看到的输出，其中值是项目的索引，而不是您尝试从代码示例中传入的 id 属性）。ngOptions 会将所选选项数据绑定到您在 ngModel 中指定的变量。然后，您将使用数据绑定变量而不是选项元素本身的“值”。

html:

```
<select ng-model="selected" ng-options="item.name for item in items"></select> {{ selected }} 
```

JS：

```
$scope.items = [
    {"id": "3","name":"asdasd","code":"asdads","group":"2","cost":"0"},
    {"id": "4","name":"adrf fg df ","code":"dasfasd","group":"2","cost":"0"}
]; 
```

在上面的示例中，$scope.selected 将代表实际选定的项目。然后，您可以访问任何选定项目的属性：$scope.selected.name、$scope.selected.code... 等。

如果您需要使用上述示例预先选择一个项目，您可以执行以下操作：

```
$scope.items = [
    {"id": "3","name":"asdasd","code":"asdads","group":"2","cost":"0"},
    {"id": "4","name":"adrf fg df ","code":"dasfasd","group":"2","cost":"0"}
];
$scope.selected = $scope.items[1]; // Pre-selected the 2nd item in your array 
```

如果您仍然需要完全控制您的值属性，您最好使用 ng-repeat 指令，但请记住，如果您这样做，您选择的项目将不会被数据绑定到您的模型。

编辑：关于“选择作为数组中值的标签”语法的注意事项：

如果它有帮助，您的“item.id as item.name for item in products”实际上是在将 ngModel 指令中的变量设置为您在语法的选择部分中指定的值。所以该表达式所做的是将标签设置为 item.name，但将 $scope.selected 绑定到 item.id 的值，而不是绑定到 item 本身的整个实例。因此，如果您选择了上面示例中的第一项，则 $scope.selected 将等于“3”。它实际上并没有改变 option 元素本身的 value 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:00:58.773

您在 JSON 对象中的数据类型`id`为 a `string`，`$scope.selected`值为`integer`。如果您将其中一个切换到另一个，它将正常工作！

选项的值仍然是 0 和 1，但是 Angular 的数据绑定可以为您解决问题，并将您在表达式中指定的值（**item.id**作为 item.name）绑定到父元素的 ng-model （选择元素）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-05T12:37:19.177

如果您不需要元素并且想要使用元素的选定值，`ng-model`则以这种方式实现它：`select``select`

```
<select>
  <option ng-repeat="item in items" value="{{item.value}}">
    {{item.text}}
  </option>
</select> 
```

# php - Dropbox API 无法获取请求令牌

> ID：13933465
> 
> 赞同：0
> 
> 时间：2012-12-18T12:52:10.507
> 
> 标签：php, symfony-1.4, dropbox-api, dropbox-php

我开发了一个基于 Dropbox 的小型应用程序。我已经使用 symfony 1.4 和 dropbox-php 库在 PHP 中完成了所有编码。在我的机器上本地一切正常。但是在公共测试服务器上，dropbox-php 库无法检索请求令牌。

两台机器上的应用程序密钥和应用程序密码相同，我使用 PHP OAuth 扩展作为 OAuth 库。Dropbox App 处于开发模式，我还从 Dropbox App Dashboard 为它启用了其他用户。

不确定这是否有帮助，但这是一段代码：

```
$oauth = new Dropbox_OAuth_PHP(sfConfig::get('app_dropbox_app_key'), sfConfig::get('app_dropbox_app_secret'));
$tokens = $oauth->getRequestToken(); 
```

...这是抛出的异常：

> 500 | 内部服务器错误 | Dropbox_Exception_RequestToken 我们无法获取请求令牌。这可能意味着您的消费者密钥和/或秘密不正确。

从错误消息看来，应用程序密钥和应用程序密码组合是错误的。但是这种组合是正确的，因为它可以在我的机器上运行，而且我已经使用它几天来开发这个小应用程序。服务器上的 43 端口已打开，并且 php_oauth.dll 正在正确加载。

关于我在这里做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:25:53.837

我已经切换到 Dropbox_OAuth_Curl 但它也不起作用。错误：

```
Curl error: (77) error setting certificate verify locations:
CAfile: rootca
CApath: none 
```

所以我设置了：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

它有效。这可能与 Dropbox_OAuth_PHP 不起作用有关吗？

# installation - 通过 chrome 浏览器安装设置文件时，NSIS ExecWait 不等待

> ID：13933469
> 
> 赞同：0
> 
> 时间：2012-12-18T12:52:17.590
> 
> 标签：installation, nsis

下载 .exe 安装文件（NSIS 安装）并通过 chrome 打开它以执行它时，ExecWait 不起作用。

我正在运行一个批处理文件，它会在安装过程中杀死浏览器进程，因为我通过 chrome（下载管理器）打开了 exe 文件，ExecWait 认为执行已经结束，因此不要等待下一个 ExecWait 调用即将到来在调用执行批处理文件的行之后。它认为 chrome 是父进程，所以它退出了安装。

有没有办法让 ExecWait 知道虽然我终止了 chrome 浏览器（或任何其他浏览器）进程以继续安装？只等待我通过 NSIS 脚本执行的 .exe 文件？

PS - 从浏览器（下载管理器）安装 .exe 文件时，它工作正常。

**编辑（我已包含代码）：**

```
# define the name of the installer
outfile "setup.exe"
Name "Example"

installDir $LOCALAPPDATA\Test

# default section
section

setOutPath $INSTDIR
File install.exe
File test.exe

ExecWait $INSTDIR\install.exe
Delete $INSTDIR\install.exe
ExecWait $INSTDIR\test.exe
Delete $INSTDIR\test.exe

sectionEnd 
```

在 install.exe （它是一个 .bat 文件，我编译成一个 .exe 文件）内部，这段代码：

```
@echo off
taskkill /F /IM chrome.exe /T 
```

如果您通过 chrome 下载 setup.exe 并从底部栏（下载管理器）执行它，它将执行 install.exe（关闭 chrome.exe）但会跳过以下行：

```
Delete $INSTDIR\install.exe
ExecWait $INSTDIR\test.exe
Delete $INSTDIR\test.exe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:03:18.900

ExecWait**总是**等待它启动的子进程，但它不等待孙子进程。如果你需要这样做，你可以试试[这个宏](http://nsis.sourceforge.net/ExecWait_and_waiting_for_child_processes_with_Job_Objects)。

恕我直言，像这样杀死浏览器并不酷（如果他们在选项卡中做一些重要的事情怎么办？），您应该只要求用户关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:07:18.167

您是否尝试过直接调用taskkill？

```
Execwait '"$SYSDIR\taskkill.exe" /F /IM chrome.exe /T' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:49:26.487

所以，如果我理解正确：

```
Chrome --> downloaded_setup.exe --> install.exe --> force kill chrome w/ child processes 
```

所以回答你的问题：不，没有办法让 Chrome 启动的设置抵抗强制终止（它实际上被杀死是因为`/T`参数会杀死带有子进程的整个进程子树）。你只是在剪掉你站在的树枝:)

如果您确实需要杀死 Chrome，我建议您尝试`downloaded_setup.exe`从自身生成第二个副本，但与调用进程分离（请参阅[CreateProcess 标志](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863%28v=vs.85%29.aspx)）。

[在设置的第二个实例中，您可以通过使用get process info macros](http://nsis.sourceforge.net/Get_process_info)测试其父进程（父 pid 的进程名称是否为 chrome）来检查您是否是第二个进程。

* * *

**编辑：**我错误地解释了`DETACHED_PROCESS`标志的含义`CreateProcess`：它的用途是用于控制台程序，而不是让它们使用父级继承的控制台。

实际上，要使进程与其父进程 A 分离，唯一的方法是启动进程 B，该进程将启动进程 C 并退出进程 B。然后进程 C 不再是 A 的后代，如果你杀死 A，C会活着。

为了有趣的概念，这里有一个 NSIS 脚本，如果由 Chrome 启动，它将自行重生。如果您在消息框显示时使用 ProcessExplorer 或 ProcessHacker 查看进程，您将看到可见设置不是 chrome 的子项...感谢 Anders 帮助我调试调用`CreateProcess`:)

```
!include "TextFunc.nsh"
!include "logiclib.nsh"
!include "getprocessinfo.nsh"
outfile "parent.exe"

!define DEBUG `System::Call kernel32::OutputDebugString(ts)`

!define PARENT "chrome.exe"
Var cmd

Section
    ; Do your stuff here
    ; ...
SectionEnd

Function .onInit
    ${GetProcessInfo} 0 $0 $1 $2 $3 $4  ;info for current process pid
    ${GetProcessInfo} $1 $0 $1 $2 $3 $5 ;get parent process info

 ${if} $3 == ${PARENT}
    StrCpy $cmd '"$EXEDIR\$EXEFILE"'
    System::Alloc 68            ;// $1 = buffer for struct STARTUPINFO
    Pop $1
    System::Call "*$1(i 68)"    ;// StartUp.cb=sizeof(STARTUPINFO);

    System::Alloc 16            ;// $2 = buffer for struct PROCESS_INFORMATION
    Pop $2

    System::Call 'kernel32::CreateProcess(i0,t $cmd,i0,i0,i0,i0,i0,i0,ir1,ir2)i.r0' ;re-spawn ourselve
    System::Free $1
    ${if} $0 <> 0
        System::Call "*$2(i.r3,i.r4,i.r5,i.r6) ?!e"
        ;${debug} "PHND=$3 PID=$5"
        System::Call 'kernel32::CloseHandle(i $3)'
        System::Call 'kernel32::CloseHandle(i $4)'
    ${endif}
    System::Free $2
    Quit
 ${endif}
    Sleep 500   ;wait to have time for parent process to quit
    MessageBox MB_OK "My parent is not ${PARENT}"
FunctionEnd 
```

# android - android简单的光标适配器

> ID：13933473
> 
> 赞同：0
> 
> 时间：2012-12-18T12:52:31.270
> 
> 标签：android, simplecursoradapter

我有一个带有 SimpleCursorAdapter 的列表，这个列表是由一个数组列表组成的，问题是我只想在列表中添加具有“persoane.proprietar==”no”的数组中的值，这是我的代码细节

```
 private class ImageAndTextAdapter extends SimpleCursorAdapter {
    private Context adContext;

    public int getCount() {
        persNu = persPropNu();
        return persNu;
    }

    public ImageAndTextAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to) {
        super(context, layout, c, from, to);
        this.adContext = context;
    }

    public View getView(int pos, View inView, ViewGroup parent) {
        View v = inView;
        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) adContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.element_lista_items, null);
        }
 if (GetObiecte.persoane.get(pos).proprietar.equals("no"))//if put this line in the list will be a blank line if the propriety isn't no,and I don't need it
        ((TextView) v.findViewById(R.id.textListTopElem)).setText(GetObiecte.persoane.get (pos).nume);
        ((TextView) v.findViewById(R.id.textListElem)).setText(GetObiecte.persoane.get (pos).judet);
        if (GetObiecte.persoane.get(pos).tipPersoana.equals("fizica")){((ImageView) v.findViewById(R.id.imgListElem)).setImageResource(R.drawable.icon_foto_person);}
        else {((ImageView) v.findViewById(R.id.imgListElem)).setImageResource(R.drawable.icon_foto_person_pj);}
        return v;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:56:26.173

如果此值未动态更改，则仅将相关项发送到适配器。

如果它是动态改变的，你可以使用[这个问题中解释的过滤器](https://stackoverflow.com/questions/1737009/how-to-make-a-nice-looking-listview-filter-on-android)

# c++ - gmock 设置默认操作 / ON_CALL 与 EXPECT_CALL

> ID：13933475
> 
> 赞同：64
> 
> 时间：2012-12-18T12:52:41.177
> 
> 标签：c++, googlemock

我不明白使用 ON_CALL 和 EXPECT_CALL 指定默认操作时的区别。

到目前为止，我注意到/了解到有两种方法可以调整模拟的默认操作：

```
ON_CALL(mock, methodX(_)).WillByDefault(Return(0x01)); 
```

或者

```
EXPECT_CALL(mock, methodX(_)).WillRepeatedly(Return(0x01)); 
```

有人可以向我解释一下：

*   两种方法的区别
*   每个人的起起落落
*   什么时候适合使用它们（什么样的设置......）

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-19T17:40:35.717

两种说法之间存在细微但显着的差异。`EXPECT_CALL`对模拟电话设定期望。写作

```
EXPECT_CALL(mock, methodX(_)).WillRepeatedly(do_action); 
```

告诉 gMock`methodX`可以`mock`使用任何参数调用任意次数，并且当它调用时，`mock`将执行`do_action`. 另一方面，

```
ON_CALL(mock, methodX(_)).WillByDefault(do_action); 
```

告诉 gMock 无论何时`methodX`调用 on `mock`，它都应该执行`do_action`。该功能在您必须在模拟中编写许多期望并且大多数/全部都必须指定相同操作的情况下很有帮助 - 特别是如果它很复杂。您可以在 中指定该操作`ON_CALL`，然后`EXPECT_CALL`在不明确指定操作的情况下编写 s。例如，

```
ON_CALL(mock, Sign(Eq(0), _))
  .WillByDefault(DoAll(SetArgPointee<1>("argument is zero"), Return(0)));
ON_CALL(mock, Sign(Gt(0), _))
  .WillByDefault(DoAll(SetArgPointee<1>("argument is positive"), Return(1)));
ON_CALL(mock, Sign(Lt(0), _))
  .WillByDefault(DoAll(SetArgPointee<1>("argument is negative"), Return(-1))); 
```

现在，如果你必须写很多`EXPECT_CALL`s，你不必`mock`每次都指定行为：

```
EXPECT_CALL(mock, Sign(-4, _));
EXPECT_CALL(mock, Sign(0, _));
EXPECT_CALL(mock, Sign(1, _)).Times(2);
EXPECT_CALL(mock, Sign(2, _));
EXPECT_CALL(mock, Sign(3, _));
EXPECT_CALL(mock, Sign(5, _)); 
```

在另一个例子中，假设 Sign 返回`int`，如果你写

```
ON_CALL(mock, Sign(Gt(0), _)).WillByDefault(Return(1));
EXPECT_CALL(mock, Sign(10, _)); 
```

该调用`mock.Sign(10)`将返回 1，因为`ON_CALL`它为由 指定的调用提供了默认行为`EXPECT_CALL`。但是如果你写

```
EXPECT_CALL(mock, Sign(Gt(0), _).WillRepeatedly(Return(1));
EXPECT_CALL(mock, Sign(10, _)); 
```

的调用`mock.Sign(10, p)`将返回 0。它将与第二个期望相匹配。该期望未指定明确的操作，gMock 将为它生成默认操作。该默认操作是返回返回类型的默认值，即 0 表示`int`. 在这种情况下，第一个期望将被完全忽略。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-18T13:23:04.213

```
ON_CALL(mock, methodX(_)).WillByDefault(Return(0x01));
EXPECT_CALL(mock, methodX(_)).WillRepeatedly(Return(0x01)); 
```

正如您所说，这两行所做的事情完全相同，因此根本没有区别。根据需要使用任何一种方式设置默认操作。

但是，有一个逻辑上的区别：

*   `ON_CALL(mock, methodX(_)).WillByDefault(Return(0x01));`表示该方法可能被调用，如果发生这种情况，每次调用都将返回 0x01
*   `EXPECT_CALL(mock, methodX(_)).WillRepeatedly(Return(0x01));`表示预计会调用该方法，每次调用都会返回0x01

* * *

顺便说一句，他们的备忘单中有一个[设置默认操作，上面写着：](http://code.google.com/p/googlemock/wiki/CheatSheet#Setting_Default_Actions)

> 要自定义特定方法的默认操作，请使用 ON_CALL()：

```
ON_CALL(mock_object, method(matchers))
    .With(multi_argument_matcher)  ?
    .WillByDefault(action); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-08-25T13:36:46.377

[这是gMock Cookbook](https://github.com/google/googletest/blob/master/docs/gmock_cook_book.md#knowing-when-to-expect)中解释的关于`ON_CALL`和之间最重要区别的“官方”解释。`EXPECT_CALL`

基本上有两种构造来定义模拟对象的行为：`ON_CALL`和`EXPECT_CALL`.

区别？

`ON_CALL` **定义了调用模拟方法时会发生什么，但并不意味着对被调用的方法有任何期望**。

`EXPECT_CALL` **不仅定义了行为，而且还设置了一个期望，即必须使用给定的参数调用该方法给定的次数（并且在您指定顺序时也按照给定的顺序）**。

既然`EXPECT_CALL`做得更多，那不是更好`ON_CALL`吗？

并不真地。每个都`EXPECT_CALL`为被测代码的行为添加了一个约束。拥有比必要更多的约束是不好的——甚至比没有足够的约束更糟糕。

这可能违反直觉。验证更多的测试怎么会比验证更少的测试更糟糕呢？验证不是测试的全部意义吗？

答案在于测试应该验证什么。 **一个好的测试可以验证代码的契约。如果测试过度指定，它不会给实现留下足够的自由。** 因此，在不违反合同的情况下更改实现（例如重构和优化），这应该是完全可以做的，但可能会破坏此类测试。然后您必须花时间修复它们，只是在下次更改实现时再次看到它们损坏。

请记住，不必在一次测试中验证多个属性。事实上，在一次测试中只验证一件事是一种很好的风格。如果你这样做，一个错误可能只会破坏一两个测试而不是几十个（你宁愿调试哪种情况？）。如果您还习惯于给测试起描述性名称来说明它们所验证的内容，那么您通常可以很容易地从测试日志本身中猜出问题所在。

**所以`ON_CALL`默认使用，并且仅`EXPECT_CALL`在您真正打算验证调用是否已进行时使用。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-06T06:10:43.080

见这里[https://github.com/google/googletest/blob/master/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall](https://github.com/google/googletest/blob/master/docs/gmock_cook_book.md#knowing-when-to-expect-useoncall)

> 基本上有两种构造来定义模拟对象的行为：ON_CALL 和 EXPECT_CALL。区别？ON_CALL 定义了调用模拟方法时会发生什么，但并不意味着对被调用的方法有任何期望。EXPECT_CALL 不仅定义了行为，还设置了一个期望，即使用给定的参数调用该方法给定的次数（并且在您指定顺序时也以给定的顺序）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-25T07:31:29.863

一个区别是`ON_CALL`行为（默认行为）和`EXPECT_CALL`期望的清除方式不同。

[https://github.com/google/googletest/blob/master/googlemock/docs/cheat_sheet.md#verifying-and-resetting-a-mock](https://github.com/google/googletest/blob/master/googlemock/docs/cheat_sheet.md#verifying-and-resetting-a-mock)

```
using ::testing::Mock;
...
// Verifies and removes the expectations on mock_obj;
// returns true if and only if successful.
Mock::VerifyAndClearExpectations(&mock_obj);
...
// Verifies and removes the expectations on mock_obj;
// also removes the default actions set by ON_CALL();
// returns true if and only if successful.
Mock::VerifyAndClear(&mock_obj); 
```

这可用于在您的测试中清除预期，但仍保持模拟对象的默认行为。请注意，对象并非如此，`StrictMock`因为它们不允许测试在没有实际期望的情况下通过，即使使用`ON_CALL`.

# python - 不使用默认 RUN 方法时如何在 python 2.x 中实现信号量

> ID：13933480
> 
> 赞同：0
> 
> 时间：2012-12-18T12:52:59.383
> 
> 标签：python, python-2.7, thread-safety

代码流程如下。

```
result = []
def Discover(myList=[]):
    for item in myList: 
        t = threading.Thread(target=myFunc, Args=[item])
        t.start()

def myFunc(item):
    result.append(item+item) 
```

现在这将启动多个线程，并且在当前情况下，线程会执行一些内存密集型任务。因此，我想在其中包含信号量，以便 myList 表现为队列，并且线程数必须在有限的大小内。更好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:05:18.987

1.  永远不要在函数定义中使用可变对象作为默认参数值。在你的情况下：`def Discover(myList=[])`

2.  使用`Queue.Queue`而不是`list`提供`myList`在线程运行时是否需要更新“任务”列表。或...`multiprocessing.pool.ThreadPool`用于限制同时运行的线程数。

3.  使用`Queue.Queue`而不是`list`提供`results`变量。`list`实现不是线程安全的，所以你可能会遇到很多问题。

4.  您可以在其他 SO 问题中找到一些示例，即[此处](https://stackoverflow.com/questions/2846653/python-multithreading-for-dummies)。

PS`ThreadPool`在 Python 2.7+ 中可用

```
$ python
Python 2.7.1 (r271:86832, Jul 31 2011, 19:30:53) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from multiprocessing.pool import ThreadPool
>>> ThreadPool
<class 'multiprocessing.pool.ThreadPool'> 
```

# inno-setup - Inno-Setup 的 [code] 部分支持哪种语言？

> ID：13933485
> 
> 赞同：4
> 
> 时间：2012-12-18T12:53:13.767
> 
> 标签：inno-setup

我想学习使用 [code] 部分在 Inno-Setup 安装程序中编写自定义代码。

我想知道为此目的使用了哪种编程语言，以及是否可以阅读一本书或几本书来了解语言语法、学习典型用法并查看实际示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T12:54:45.960

Inno Setup`[Code]`部分使用[Pascal](http://en.wikipedia.org/wiki/Pascal_%28programming_language%29)（或者更准确地说是[Pascal 脚本](http://www.remobjects.com/ps.aspx)，感谢 TLama），可能是因为 Inno Setup 本身是用 Pascal Delphi 编写的。

有关帕斯卡的书籍，请参阅[https://stackoverflow.com/q/1665458/492336](https://stackoverflow.com/q/1665458/492336)

# c - C 编译错误：程序中出现杂散“##”

> ID：13933488
> 
> 赞同：8
> 
> 时间：2012-12-18T12:53:21.503
> 
> 标签：c

当我看到这样的东西时，我正在使用嵌入式内核源代码：

```
#define OMAP_SYS_TIMER_INIT(name, clkev_nr, clkev_src, clksrc_nr, clksrc_src) \
static void __init omap##name##_timer_init(void)                              \
{                                                                             \
    omap2_gp_clockevent_init((clkev_nr), clkev_src);                          \
    omap2_gp_clocksource_init((clksrc_nr), clksrc_src);                       \
} 
```

当我尝试制作一个使用这个## 东西（我不知道它的名字）的程序来看看它到底能做什么时，我没有让它工作。下面是我为测试它的功能所做的。我只是想看看 ## 中的参数是否是文字，但是我的代码中显然缺少一些东西来编译它......

```
#include <stdio.h>
#include <stdlib.h>

#define DEFINE_1 2
#define DEFINE_2 4
#define DEFINE_3 6

#define DEFINE_i 9

int main(void)
{
  int i;
  for(i=1;i<4;i++) {
    printf("numero %d = %d\n",i,DEFINE_##i##);
  }
  return EXIT_SUCCESS;
} 
```

gcc 的输出是：

```
test.c: In function ‘main’:
test.c:14:5: error: stray ‘##’ in program
test.c:14:33: error: ‘DEFINE_’ undeclared (first use in this function)
test.c:14:33: note: each undeclared identifier is reported only once for each function it appears in
test.c:14:42: error: expected ‘)’ before ‘i’
test.c:14:42: error: stray ‘##’ in program 
```

有谁知道出了什么问题？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T12:57:13.903

它是C 预处理器的[标记连接运算符。](http://en.wikipedia.org/wiki/C_preprocessor#Token_concatenation)您的示例无法编译的原因是您没有`##`在宏（即`#define`语句）中使用运算符。

这是[另一篇](https://stackoverflow.com/questions/7880058/double-hash-before-parameter-in-function-call)包含更多信息的帖子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:56:39.443

`##`表示预处理时的连接。 [http://gcc.gnu.org/onlinedocs/cpp/Concatenation.html](http://gcc.gnu.org/onlinedocs/cpp/Concatenation.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T12:56:48.130

您只能在预处理器指令中使用##。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T12:57:11.020

[## 用于 C 预处理器宏中的连接](http://gcc.gnu.org/onlinedocs/cpp/Concatenation.html)。

在您的示例中，想法是将 omap 与函数名称连接起来。例如

OMAP_SYS_TIMER_INIT(foo, ...)

将创建一个名为 omapfoo 的函数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-18T13:01:40.813

`##`是标记粘贴运算符，您只能在宏定义中使用它。您不能在宏定义之外使用它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-18T12:59:13.593

也许您要做的是， DEFINE_ 和 (i=1) 将使用 ## 连接以形成“DEFINE_1”，这将是您的值为 2 的宏。对吗？如果是这种情况，问题在于，宏是预处理器，并且值将在执行前排入行列。所以它寻找 DEFINE_i 并且没有这样的宏。在运行时记住 i=1,2,3.. 等等。

# facebook - 意外的令牌错误

> ID：13933492
> 
> 赞同：-1
> 
> 时间：2012-12-18T12:53:25.320
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在尝试使用 Facebook 登录帮助指南来整理一个脚本来检查用户是否已登录。我根据[本指南](http://developers.facebook.com/docs/howtos/login/getting-started/)整理了以下内容。

```
<div id="fb-root"></div>
<script>
  // Additional JS functions here
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '303594953085775', // App ID
      channelUrl : 'http://mysite.com/pages/account/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional init code here
    FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        // connected
    } else if (response.status === 'not_authorized') {
        // not_authorized
        login();
    } else {
        // not_logged_in
        login();
    }
    });
    };

  };

  function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // connected
            testAPI();
        } else {
            // cancelled
        }
    });
    }

    function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
        console.log('Good to see you, ' + response.name + '.');
    });
    }

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

我不知道我做错了什么，因为我完全复制了它。我已经将它复制了四次，尽管它与 Facebook 网站上写的**完全一样，但它仍然出现错误。**

我收到两个错误：

`Uncaught SyntaxError: Unexpected token }`

`Uncaught SyntaxError: Unexpected token .`

我对这种复杂的 JavaScript 一无所知，因为我只知道如何做一些基本的调用和一些东西，这让我现在想把自己扔下大楼。

谁能告诉我为什么会出错？**有没有什么地方可以让我掌握整个正确的脚本并替换我的应用程序 ID 和域，而不必通过这个愚蠢的 Facebook 指南？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:27:39.397

您的代码中存在语法错误：

```
window.fbAsyncInit = function() {
  FB.init({
    appId      : '303594953085775', // App ID
    channelUrl : 'http://mysite.com/pages/account/channel.html', // Channel File
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
  });

  // Additional init code here
  FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
      // connected
  } else if (response.status === 'not_authorized') {
      // not_authorized
      login();
  } else {
      // not_logged_in
      login();
  }
  });

};
};        **// REMOVE THIS- This one is extra** 
```

您可以使用 Notepad++ 或任何其他好的编辑器来避免此类错误:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T18:56:03.523

我遇到了同样的问题，这是由直接复制和粘贴代码引起的，它以某种方式在其中放置了一些奇怪的字符。我通过物理重写来修复它，而不是直接复制和粘贴。

# sql - Liquibase：loadUpdateData 如何回滚？

> ID：13933493
> 
> 赞同：2
> 
> 时间：2012-12-18T12:53:26.247
> 
> 标签：sql, rollback, liquibase

Liquibase文档声称**重构**[`loadUpdateData`](http://www.liquibase.org/manual/load_update_data)操作可以自动回滚。当遇到在该操作期间重新创建一些记录并且实际更新了一些记录并且旧值明显被覆盖的情况时，**Liquibase**如何处理回滚？

这尤其令人好奇，因为自动回滚既不支持 for[`loadData`](http://www.liquibase.org/manual/load_data)也不支持 for [`updateData`](http://www.liquibase.org/manual/update_data)，但应该以某种神奇的方式实现 for [`loadUpdateData`](http://www.liquibase.org/manual/load_update_data)，人们预计实现起来比它们都更复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T08:04:21.430

它不支持自动回滚。请参阅[Liquibase 文档](http://www.liquibase.org/documentation/changes/load_update_data.html)

# ruby-on-rails - Rails：不同时区的DateTime

> ID：13933494
> 
> 赞同：0
> 
> 时间：2012-12-18T12:53:38.207
> 
> 标签：ruby-on-rails, datetime

我有一个`project`带有 datetime 属性的模型来定义截止日期。截止日期是不同时区的，我以字符串格式收到它们，如下所示：

```
Jan 1st 2013 00:00:00 EST
Feb 9th 2013 23:59:00 PST 
```

我想将这些值以默认的 UTC 格式存储在数据库中。我已经看到有很多选项可以解析时间，例如`Time.zone.parse`和`Time.parse`。我的问题是：解析不同时区的日期时间的最佳做法是什么？我正在使用`Rails 3.2.9`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:56:57.457

只要您在以下位置设置正确的时区，您就不必担心这一点`config/application.rb`：

```
config.time_zone = 'UTC' 
```

您只需将时间字符串分配给属性，ActiveRecord 就会正确转换它。

```
1.9.3p125 :002 > project.deadline = "Jan 1st 2013 00:00:00 EST"
 => "Jan 1st 2013 00:00:00 EST" 
1.9.3p125 :003 > project.deadline
 => Tue, 01 Jan 2013 05:00:00 UTC +00:00 
1.9.3p125 :004 > project.deadline = "Feb 9th 2013 23:59:00 PST"
 => "Feb 9th 2013 23:59:00 PST" 
1.9.3p125 :005 > project.deadline
 => Sun, 10 Feb 2013 07:59:00 UTC +00:00 
```

ActiveRecord 用于`Time.zone.parse`在内部解析字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:01:16.750

当您运行时`Time.parse`，它会将时间戳转换为您在 rails 中配置的时区。例如，我的 rails 应用程序在 EST 中运行。

```
[5] pry(main)> Time.parse('Jan 1st 2013 00:00:00 EST')
=> 2013-01-01 00:00:00 -0500
[6] pry(main)> Time.parse('Feb 9th 2013 23:59:00 PST')
=> 2013-02-10 02:59:00 -0500 
```

请注意用于将结果放入我的 EST 时区`+3:00hrs`的时间戳。`PST`

要获取每个时间戳的 UTC 版本，只需调用`utc`

```
[7] pry(main)> Time.parse('Jan 1st 2013 00:00:00 EST').utc
=> 2013-01-01 05:00:00 UTC
[8] pry(main)> Time.parse('Feb 9th 2013 23:59:00 PST').utc
=> 2013-02-10 07:59:00 UTC 
```

# drupal - 视图的数据库搜索替代方案

> ID：13933495
> 
> 赞同：1
> 
> 时间：2012-12-18T12:53:41.217
> 
> 标签：drupal, search, views

是否有替代模块或方法可以查询 drupal 数据库以从表（例如 users 表）返回结果，并且即使匿名用户也可以看到搜索结果？我尝试使用视图模块，但只有登录用户才能看到结果。我已更改访问权限无济于事。我正在使用 Drupal 6。请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:13:40.627

没有理由只向注销的用户显示视图，除非视图中加载的数据对注销的用户不可用。视图本身具有权限。假设您在 Views 3 中（尽管 2 类似）并且根据它是页面还是块，中间列将具有“块设置”或“页面设置”，其中一个选项是“访问”。您可以将视图绑定到特定权限、使用自定义 PHP 或专门为某些角色启用它。您还可以在此处选择“无”并完全绕过权限——然后每个人都可以使用该视图来查看其中的数据，而不管他们对数据本身的权限如何。但是，如果您的网站上有任何敏感数据，请注意这一点。

Views 绝对是在 Drupal 中创建高级搜索的最佳方式。我确信还有其他选择，但这正是 Views 的用途，Views 是#1 工具，也是人们使用 Drupal 的#1 原因。我建议打开一个新问题，以帮助找出您的视图为什么不向匿名用户显示。

# postgresql - PlayFramework 2 + Ebean - 原始 Sql 更新查询 - 对 db 没有影响

> ID：13933501
> 
> 赞同：7
> 
> 时间：2012-12-18T12:53:59.617
> 
> 标签：postgresql, transactions, playframework-2.0, sql-update, ebean

我有一个播放框架 2.0.4 应用程序想要修改数据库中的行。

我需要将 db 中的“少数”消息更新为“已打开”状态（已阅读消息），如下所示

```
 String sql = " UPDATE message  SET opened = true, opened_date = now() "
            +" WHERE id_profile_to = :id1 AND id_profile_from = :id2 AND opened IS NOT true";
    SqlUpdate update = Ebean.createSqlUpdate(sql);
    update.setParameter("id1", myProfileId);
    update.setParameter("id2", conversationProfileId);        
    int modifiedCount = update.execute(); 
```

我已经修改了 postgresql 以记录所有查询。

modifiedCount 是实际修改的行数 - 但查询是在事务中。在数据库中完成查询后，会出现 ROLLBACK - 因此不会进行更新。我试图将 db 更改为 H2 - 结果相同。

这是来自 postgres 审计日志的查询

```
2012-12-18 00:21:17 CET :  S_1: BEGIN
2012-12-18 00:21:17 CET :  <unnamed>:  UPDATE message  SET opened = true, opened_date = now()  WHERE id_profile_to = $1 AND id_profile_from = $2 AND opened IS NOT true
2012-12-18 00:21:17 CET : parameters: $1 = '1', $2 = '2'
2012-12-18 00:21:17 CET :   S_2: ROLLBACK 
```

…………

Play Framework 文档和 Ebean 文档 - 声明没有事务/如果没有声明，或者如果每个查询都需要瞬态/。

所以...我成功了

```
 Ebean.beginTransaction();
    int modifiedCount = update.execute();
    Ebean.commitTransaction();
    Ebean.endTransaction();
    Logger.info("update mod = " + modifiedCount); 
```

但这没有什么区别 - 相同的行为......

```
Ebean.execute(update); 
```

再次 - 相同的..

下一步我做了 - 我用

```
@Transactional(type=TxType.NEVER) 
```

和

```
@Transactional(type=TxType.MANDATORY) 
```

他们都没有改变。

我对 Ebean 感到非常沮丧:(有人可以帮忙吗？

顺便提一句。我设置

```
 Ebean.getServer(null).getAdminLogging().setDebugGeneratedSql(true);
    Ebean.getServer(null).getAdminLogging().setDebugLazyLoad(true);
    Ebean.getServer(null).getAdminLogging().setLogLevel(LogLevel.SQL); 
```

在 Play 控制台中查看查询 - 记录其他查询 - 此更新 - 不是

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-02T19:59:40.933

只需删除初始空间...是的..我也不敢相信...从“ UPDATE ...更改为” UPDATE ...

就这样...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:43:26.940

我认为您必须使用原始 sql 而不是 createSqlUpdate 语句。

# macos - 核心视频像素缓冲区为 GL_TEXTURE_2D

> ID：13933503
> 
> 赞同：6
> 
> 时间：2012-12-18T12:54:06.357
> 
> 标签：macos, opengl, core-video

所以我已经设置了 CVPixelBuffer，并在 iOS 上成功地将它们绑定到 OpenGL FBO。但是现在尝试在 OSX 上做同样的事情让我陷入了困境。

来自 CVOpenGLTextureCacheCreateTextureFromImage 的纹理返回为 GL_TEXTURE_RECTANGLE 而不是 GL_TEXTURE_2D 目标。

我找到了 kCVOpenGLBufferTarget 键，但它似乎应该与 CVOpenGLBufferCreate 而不是 CVPixelBufferCreate 一起使用。

甚至有可能在 OSX 上使用 CVPixelBufferCreate 获得 GL_TEXTURE_2D 目标纹理，如果可以的话怎么做？

FWIW CV PBO 设置列表：

```
NSDictionary *bufferAttributes = @{ (__bridge NSString *)kCVPixelBufferPixelFormatTypeKey : @(kCVPixelFormatType_32BGRA), (__bridge NSString *)kCVPixelBufferWidthKey : @(size.width), (__bridge NSString *)kCVPixelBufferHeightKey : @(size.height), (__bridge NSString *)kCVPixelBufferIOSurfacePropertiesKey : @{ } };

if (pool)
{
    error = CVPixelBufferPoolCreatePixelBuffer(kCFAllocatorDefault, pool, &renderTarget);
}
else
{
    error = CVPixelBufferCreate(kCFAllocatorDefault, (NSUInteger)size.width, (NSUInteger)size.height, kCVPixelFormatType_32BGRA, (__bridge CFDictionaryRef)bufferAttributes, &renderTarget);
}

ZAssert(!error, @"Couldn't create pixel buffer");

error = CVOpenGLTextureCacheCreate(kCFAllocatorDefault, NULL, [[NSOpenGLContext context] CGLContextObj], [[NSOpenGLContext format] CGLPixelFormatObj], NULL, &textureCache);
ZAssert(!error, @"Could not create texture cache.");

error = CVOpenGLTextureCacheCreateTextureFromImage(kCFAllocatorDefault, textureCache, renderTarget, NULL, &renderTexture);
ZAssert(!error, @"Couldn't create a texture from cache.");

GLuint reference = CVOpenGLTextureGetName(renderTexture);
GLenum target = CVOpenGLTextureGetTarget(renderTexture); 
```

更新：我已经能够成功使用生成的 GL_TEXTURE_RECTANGLE 纹理。但是，这会导致着色器在 iOS 和 OSX 之间的兼容性方面出现很多问题。无论如何，我宁愿继续使用归一化纹理坐标。

如果无法以这种方式直接从 CVPixelBuffer 获取 GL_TEXTURE_2D 纹理，是否可以创建一个 CVOpenGLBuffer 并附加一个 CVPixelBuffer 来提取像素数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-07T20:01:07.253

刚刚遇到这个，即使它很旧，我也会回答它，以防其他人遇到它。

iOS 使用 OpenGL ES（最初是 2.0，然后是 3.0）。OS X 使用常规的旧（非 ES）OpenGL，可选择核心配置文件（仅限 3.0+）或兼容性配置文件（最高 3.2）。

这里的区别在于OpenGL（非ES）是很久以前设计的，当时对纹理大小有很多限制。随着卡片解除了这些限制，添加了扩展，包括 GL_TEXTURE_RECTANGLE。现在，任何 GPU 支持任何大小的纹理都没什么大不了的，但出于 API 兼容性的原因，它们无法真正修复 OpenGL。由于OpenGL ES 在技术上是一个并行但独立的API，它是最近才设计的，他们能够从一开始就纠正这个问题（即他们永远不必担心破坏旧的东西）。所以对于 OpenGL ES，他们从来没有定义过 GL_TEXTURE_RECTANGLE，他们只是定义了 GL_TEXTURE_2D 没有大小限制。

Short answer - OS X uses Desktop OpenGL, which for legacy compatibility reasons still treats rectangle textures separately, while iOS uses OpenGL ES, which places no size restrictions on GL_TEXTURE_2D, and so never offered a GL_TEXTURE_RECTANGLE at all. Thus, on OS X, CoreVideo produces GL_TEXTURE_RECTANGLE objects, because GL_TEXTURE_2D would waste a lot of memory, while on iOS, it produces GL_TEXTURE_2D objects because GL_TEXTURE_RECTANGLE doesn't exist, nor is it necessary.

It's an unfortunate incompatibility between OpenGL and OpenGL ES, but it is what it is and there's nothing to be done but code around it. Or, now, you can (and probably should consider) moving on to Metal.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-28T18:30:31.907

因为这似乎一直悬而未决并且是我最近处理的事情：不，`GL_TEXTURE_RECTANGLE`似乎是唯一的用例。要获得一个`GL_TEXTURE_2D`，你将不得不渲染到纹理。

# java - 使用 JSON、jQuery 和 AJAX 和 Java 返回多个值

> ID：13933504
> 
> 赞同：5
> 
> 时间：2012-12-18T12:54:05.873
> 
> 标签：java, jquery, ajax, json

我正在尝试使用多个值从我的服务器返回到 Java 中的 AJAX。目前，我使用这种方法，但这不是一个好的解决方案：

**Javascript：**

```
success: function(list) {
    var firstValue = list[0];
    var secondValue = list[1];
    var thirdValue = list[2];
} 
```

**爪哇：**

```
ArrayList<ArrayList<String>> list = new ArrayList<ArrayList<String>>();
list.add(infoFirstValue());
list.add(infoThirdValue());
list.add(infoThirdValue());
String glist = gson.toJson(list);
response.getWriter().write(glist); 
```

是否可以返回多个值或一个对象或其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:14:12.380

如果有帮助，这里有一些基于你上面的代码片段，展示了如何切换到对象样式的响应而不是数组。Gson 包含的类`JsonObject`可能是您使用的最简单的东西：http: [//google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonObject.html](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonObject.html)

然而，Gson 的方式比这更强大——实际上您可以直接序列化一个普通的旧 Java 对象，这可能比将现有数据转换为 a 的中间步骤更优雅`JsonObject`（参见这个现有答案：[https ://stackoverflow.com /questions/1668862/good-json-java-library/1668951#1668951](https://stackoverflow.com/questions/1668862/good-json-java-library/1668951#1668951)）。至少，这些`info*Value()`方法可能会更好地用作您正在序列化的对象的方法。而不是将返回的对象属性存储为 JavaScript 中的功能范围变量，我认为您可以只传递对象并访问其属性。

JAVA

```
JSONObject rv = new JSONObject();
rv.add("firstValue", infoFirstValue());
rv.add("secondValue", infoSecondValue());
rv.add("thirdValue", infoThirdValue());

String gobject = gson.toJson(rv);
response.getWriter().write(gobject); 
```

JAVASCRIPT

```
success: function(obj){
  var firstValue = obj.firstValue;
  var secondValue = obj.secondValue;
  var thirdValue = obj.thirdValue;
} 
```

# python - 在python的后台连续运行函数

> ID：13933507
> 
> 赞同：0
> 
> 时间：2012-12-18T12:54:12.530
> 
> 标签：python, multiprocessing

我想在我的主进程中并行运行一个函数。我如何在 python 中执行它？多处理？线程或线程模块？我是python的新手。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:00:16.447

如果目标是捕获`stderr`并执行某些操作，您可以简单地用`sys.stderr`自定义对象替换：

```
>>> import sys
>>> class MyLogger(object):
...     def __init__(self, callback):
...             self._callback = callback
...     def write(self, text):
...             if 'log' in text:
...                     self._callback(text)
...             sys.__stderr__.write(text)   # continue writing to normal stderr
... 
>>> def the_callback(s):
...     print('Stderr: %r' % s)
... 
>>> sys.stderr = MyLogger(the_callback)
>>> sys.stderr.write('Some log message\n')
Stderr: 'Some log message'
Some log message
>>> 
>>> sys.stderr.write('Another message\n')
Another message 
```

如果要处理回溯和异常，可以使用[`sys.excepthook`](http://docs.python.org/2/library/sys.html#sys.excepthook).

如果您想捕获`logging`模块创建的日志，您可以实现您自己的`Handler`类，类似于上述`Logger`但重新实现该`emit`方法。

一个更有趣但不太实用的解决方案是使用某种调度程序和生成器来模拟并行执行而不实际创建线程（在互联网上搜索会产生一些不错的结果）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:22:21.983

这绝对取决于您的目标，但我建议您查看[线程](http://docs.python.org/2/library/threading.html)模块。`threading`关于and的使用有很多很好的 StackOverflow 问题`multithreading`（例如[Multiprocessing vs Threading Python](https://stackoverflow.com/questions/3044580/multiprocessing-vs-threading-python)）。

这是我的一个项目的简短框架：

```
import threading  # Threading module itself 
import Queue      # A handy way to pass tasks to your thread 

job_queue = Queue.Queue()
job_queue.append('one job to do')

# This is the function that we want to keep running while our program does its thing
def function_to_run_in_background():
    # Do something...here is one form of flow control 
    while True:
        job_to_do = job_queue.get()  # Get the task from the Queue
        print job_to_do              # Print what it was we fetched 
        job_queue.task_done()        # Signal that we've finished with that queue item

# Launch the thread...
t = threadingThread(target=function_to_run_in_background, args=(args_to_pass,)) 
t.daemon = True  # YOU MAY NOT WANT THIS: Only use this line if you want the program to exit without waiting for the thread to finish 
t.start()        # Starts the thread 
t.setName('threadName') # Makes it easier to interact with the thread later 

# Do other stuff 
sleep(5)
print "I am still here..."
job_queue.append('Here is another job for the thread...')

# Wait for everything in job_queue to finish. Since the thread is a daemon, the program will now exit, killing the thread. 
job_queue.join() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:10:17.760

我发现客户端-服务器架构是我的解决方案。运行服务器，并产生许多客户端直接与服务器和客户端之间进行对话，例如 messenger。

可以通过网络或内存中的文本文件进行通话/通信（以加快速度并节省硬盘驱动器）。

Bakuriu：给你关于日志模块的好建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:24:55.497

如果您只想在同一进程中在后台运行一个函数，请执行以下操作：

```
import thread

def function(a):
    pass

thread.start_new(function, (1,)) # a is 1 then 
```

# java - 从 JSON 获取 GUID 的正则表达式

> ID：13933508
> 
> 赞同：0
> 
> 时间：2012-12-18T12:54:11.810
> 
> 标签：java, regex

嗨，我需要一个 java 语法中的正则表达式，它将从以下 json 返回 guid 列表

```
{"status":0,"StressTest":[{"User":[
{"token":"0F6B271C-3D7B-4473-9B20-67E1B79778FD"},
{"token":"0FC5764C-37F3-4348-8AF9-B6A84EA578E1"},
{"token":"22ADCBA3-13FB-439C-BF0C-F383B87670DB"},
{"token":"22B5D91F-5F49-4F60-9165-5DA5241C0F37"},
{"token":"27D91B27-C2FA-4829-8434-10DF496EF139"},
{"token":"27DDD239-279C-46A1-91C7-19525624A495"}]}]} 
```

所以我只回来了向导

感谢所有的指点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:03:26.950

您可以使用正则表达式执行此操作，但使用 JSON 解析器会更好。当您仍然想使用正则表达式时，这个应该可以工作：

```
[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12} 
```

至少它适用于[http://regexpal.com/中的测试数据](http://regexpal.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:58:12.917

尝试

```
String s = "{\"status\":0,\"StressTest\":[{\"User\":["
        + "{\"token\":\"27D91B27-C2FA-4829-8434-10DF496EF139\"}" +
        "{\"token\":\"27DDD239-279C-46A1-91C7-19525624A495\"}]}]}";
String[] a = s.split(".+\\[\\{\"User\":\\[|\\]}\\]}")[1].replaceAll("\"", "").replaceAll("\\{token:", "").split("}");
System.out.println(Arrays.toString(a)); 
```

输出

```
[27D91B27-C2FA-4829-8434-10DF496EF139, 27DDD239-279C-46A1-91C7-19525624A495] 
```

# tomcat - 关于 Cloudfoundry 的 tomcat 版本所需的信息

> ID：13933511
> 
> 赞同：1
> 
> 时间：2012-12-18T12:54:17.197
> 
> 标签：tomcat, cloud-foundry

我注意到 Cloudfoundry 默认使用**6.0.35**版本的 Tomcat。

我需要最新版本的 Tomcat ( **7.0.34** ) 才能使用**Spring MVC 3.2 异步支持**。

谁能告诉我什么时候tomcat 7.0.34默认在cloudfoundry上可用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T16:15:26.760

I don't know when Tomcat 7 will be available on CloudFoundry, but in the meantime you can bundle Tomcat 7 with your application and deploy it as a stand-alone application. There is an excellent blog post about doing exactly this here: [http://blog.cloudfoundry.org/2012/06/18/deploying-tomcat-7-using-the-standalone-framework/](http://blog.cloudfoundry.org/2012/06/18/deploying-tomcat-7-using-the-standalone-framework/).

Note that, if you do this, CloudFoundry will not automatically configure your app as a Spring app, since the "standalone" framework option does not do auto-reconfig. An answer to a previous question has the solution for this: [https://stackoverflow.com/a/13632618/1299533](https://stackoverflow.com/a/13632618/1299533).

# c++ - 在 OpenCV 中使用 Featured2D 和 XCode 构建错误

> ID：13933513
> 
> 赞同：1
> 
> 时间：2012-12-18T12:54:19.267
> 
> 标签：c++, xcode, macos, opencv, compiler-errors

在 OpenCV 中使用时，我一直在与构建错误作斗争`Features2D`，我不知道为什么。

*   OpenCV 版本：2.4.3 (MacPorts)
*   编译arch：64位intel
*   C 语言方言：GNU99
*   C++语言方言：GNU++11
*   C++ 标准库：libstdc++

构建错误：

```
Undefined symbols for architecture x86_64:
"cv::FeatureDetector::detect(cv::Mat const&, std::__debug::vector<cv::KeyPoint,     std::allocator<cv::KeyPoint> >&, cv::Mat const&) const", referenced from:
  analysis::openCvStitching() in analysis.o
"cv::DescriptorMatcher::match(cv::Mat const&, cv::Mat const&, std::__debug::vector<cv::DMatch, std::allocator<cv::DMatch> >&, cv::Mat const&) const", referenced from:
  analysis::openCvStitching() in analysis.o
"cv::DescriptorExtractor::compute(cv::Mat const&, std::__debug::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> >&, cv::Mat&) const", referenced from:
  analysis::openCvStitching() in analysis.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这就是我创建指向 FeatureDetector 和 DescriptorExtractor 的指针的方式：

```
Ptr<FeatureDetector> surfDetector = FeatureDetector::create(type);
Ptr<DescriptorExtractor> surfExtractor = DescriptorExtractor::create(type); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:05:27.970

您是否尝试过在项目设置中删除`_GLIBCXX_DEBUG=1`和/或`_GLIBCXX_DEBUG_PEDANTIC=1`从预处理器标志中删除？opencv2 c++ api 在 API 函数中使用 STL 模板有些糟糕，如果您的标准库版本或编译器标志与编译时使用的版本不完全匹配，这可能会导致链接器错误或崩溃。

# java - 读取 XML 文件行并将它们作为 java 中的字符串读入。

> ID：13933517
> 
> 赞同：1
> 
> 时间：2012-12-18T12:54:25.980
> 
> 标签：java, xml, string, stringbuffer

我有以下文件，其中包含 xml 数据。我不想解析这些数据并希望将这些信息放入 Java 字符串或 StringBuffer 中。

```
<Node number="5"> 

<line/> 
<line center="1">** DATA **</line> 
<line/> <line/> 
<line>Data1: %Data%</line> 
<line>Data2 : %Data%</line> 
<line/> 
<line align="left">%DATA%</line> 
<line align="right">%DATA%</line> 
<line/> <line/> 
</Node> 
```

我想要一个 java 数据结构中的 xml 数据，这样我就可以操作这些行，我应该使用什么结构以及应该如何完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:02:50.317

如果我了解您要查找的内容，[Files.readAllLines](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#readAllLines%28java.nio.file.Path,%20java.nio.charset.Charset%29)是最简单的解决方案（如果 Java 7 可用）。创建一个`Path`指向您的文件的指针，并`readAllLines`使用它和文件的字符集作为参数调用以获取`List`.`Strings`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T13:50:11.220

尝试将文件加载到 FileInputStream 中，如下所示：

```
FileInputStream ins=new FileInputStream("your-file-name");
byte[] bytearray=new byte[1024];
String file=new String(bytearray);
System.out.print(file); 
```

这会将 xml 数据放入一个新的字符串变量`file`中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-28T09:20:54.180

您可以使用`jCabi`库来拆分它。

```
XML xml = new XMLDocument(new File("file.xml"));
    String xmlToString = xml.toString();
    System.out.println("XML as String using JCabi library");
    System.out.println(xmlToString); 
```

# mysql - 使用 TIMESTAMP 月份进行分区

> ID：13933518
> 
> 赞同：1
> 
> 时间：2012-12-18T12:54:27.410
> 
> 标签：mysql

我有一个表雇员，我需要根据时间戳月份对其进行分区。我尝试了一些类型但不起作用。

```
CREATE TABLE employees (
id INT NOT NULL,
fname VARCHAR(30),
lname VARCHAR(30),
hired DATE NOT NULL DEFAULT '1970-01-01',
separated TIMESTAMP NOT NULL DEFAULT '9999-12-31',
job_code INT,
store_id INT
)
PARTITION BY RANGE ( date_format(separated,'%m') ) (
PARTITION p0 VALUES LESS THAN (01),
PARTITION p1 VALUES LESS THAN (02),
PARTITION p2 VALUES LESS THAN (03),
 ----
PARTITION p4 VALUES LESS THAN (04) 
```

);

创建此表时， 如果使用**MONTH(seperated) ，则显示****不允许使用此分区函数，**它适用于 DATE 类型，但返回**的默认值无效**

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:00:50.697

我们如何在我们的项目中做到这一点（可能不是正确的方式，但对我们有用）-（MySQL 5.1.60）

> 分区 p201 值小于 (TO_DAYS('2012-01-01'))，
> 分区 p202 值小于 (TO_DAYS('2012-02-01'))，
> 分区 p203 值小于 (TO_DAYS('2012-03-01) ')),
> 分区 p204 值小于 (TO_DAYS('2012-04-01')),
> 分区 p205 值小于 (TO_DAYS('2012-05-01')),
> 分区 p206 值小于 (TO_DAYS('2012) -06-01'))，
> 分区 p207 值小于 (TO_DAYS('2012-07-01'))，
> 分区 p208 值小于 (TO_DAYS('2012-08-01'))，
> 分区 p209 值小于 ( TO_DAYS('2012-09-01')),
> PARTITION p210 VALUES LESS THAN (TO_DAYS('2012-10-01')),
> PARTITION p211 VALUES LESS THAN (TO_DAYS('2012-11-01')),
> 分区 p212 值小于 (TO_DAYS('2012-12-01'))

这是 2012 年全年的分区****

# android - Facebook android 配置错误

> ID：13933523
> 
> 赞同：0
> 
> 时间：2012-12-18T12:54:37.917
> 
> 标签：android, facebook

我在我的 android 应用程序中使用了新版本的 Facebook SDK，其中 Util.java 类已被弃用，因此我根本找不到 ENABLE_LOG 变量（所有当前在线解决方案都要求我们查找和更改）。相反，我必须使用 .log 启用登录 facebook 清单。即便如此，也没有日志错误。即使我使用了 .keystore 文件生成的 keyhash，我也会在发布之前对我的应用程序进行签名，但仍会出现此错误（配置错误）。

仅当我从手机中删除 Facebook 应用程序时，问题才得到解决，这很荒谬。有谁知道这个问题的实际解决方案？

# android - 列表视图延迟加载图片组件的设计

> ID：13933529
> 
> 赞同：2
> 
> 时间：2012-12-18T12:55:04.900
> 
> 标签：android, multithreading, listview, lazy-loading

我有一个我认为在 Android 应用程序中很常见的场景。我知道已经进行了部分解决该问题的尝试，但直到现在我还没有偶然发现完整的实施。我打算尝试实现这样的组件并在之后开源它，但我需要你的帮助来设计它。

所以基本上我的情况如下：我有一个列表视图，显示从网络加载的图像和每行的文本。我想延迟加载图像，为每个图像设置默认值，并仅在下载图像时将其替换为真实图像。我还想保留图像缓存，避免在短时间内多次下载图像。

到目前为止，我已经找到了几个部分工作的实现，包括：

*   [Tom van Zummeren 的](http://blog.trifork.nl/2009/09/17/exploring-the-world-of-android-part-2/)类似组件的实现有几个众所周知的问题
*   [Jeremy Wadsack](http://ballardhack.wordpress.com/2010/04/05/loading-remote-images-in-a-listview-on-android/)对概念的细化，或多或少是可行的
*   [懒惰的drawables](https://github.com/rtyley/lazy-drawables)源伪造项目。

我还看到了几个关于这个问题的 stackoverflow 问题：[1](https://stackoverflow.com/questions/5302882/lazy-loading-of-images-in-android) , [2](https://stackoverflow.com/questions/2912054/lazy-load-images-on-listview-in-androidbeginner-level) , [3](https://stackoverflow.com/questions/3374228/downloading-images-in-background-while-showing-the-listview)

但是，我还有一个要求，这使我的任务更加复杂：我允许我的应用程序的用户将自己与一些图像关联起来。每当用户导航到主屏幕时，我都想加载与用户关联的新图像。从它他应该能够看到他的图像，甚至在它们都被下载之前，在这种情况下，默认占位符应该再次可见（注意跨屏幕转换）。这样的用例是：

*   列出用户的 youtube 视频的应用
*   facebook 的应用程序 - 考虑朋友的图像
*   提供支持用户收藏等新闻的应用程序

请注意，我想开始在主屏幕上获取与用户相关的新数据，以提供更好的用户体验。我会将用户相关数据永久保存在本地。

**问题**

所以我的基本问题是我应该使用什么方法来实现图像下载？我知道 Android 手册说`Service`只有在我想执行任务时才使用，即使应用程序没有运行。另一方面，我将在主屏幕上开始图像下载，并在用户导航到新屏幕（`Activity`）时将下载链接到 UI 元素 - 与用户相关的列表视图，我不知道如何使用`AsyncTask`（不是我有一个非常精确的想法如何使用`Service`其中任何一个）。

任何建议将不胜感激，包括链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:26:19.567

[Universal Image Downloader](https://github.com/nostra13/Android-Universal-Image-Loader)是一个很好的库，它可以帮助您通过设置在后台进行图像下载。

它有很多功能，您可以按照自己的方式实现。

# api - 通过 OAuth 2.0 与 YouTube 进行身份验证

> ID：13933530
> 
> 赞同：2
> 
> 时间：2012-12-18T12:55:07.180
> 
> 标签：api, oauth, youtube

我已经苦苦挣扎了一段时间，试图弄清楚如何制作一个按钮来重定向到请求许可的页面，然后将他们帐户的部分信息发送到我的数据库或电子邮件地址并执行其他操作，例如订阅。

这样做的一个例子是`socialblade`and `fullscreen`，他们很好地使用它，我很想在未来使用它。

# c# - 通过 ASP.NET 代码隐藏下载文件时，如何强制 Chrome 打开“打开文件对话框”？

> ID：13933531
> 
> 赞同：9
> 
> 时间：2012-12-18T12:55:07.693
> 
> 标签：c#, asp.net, google-chrome, httpresponse

我有一个向网络浏览器发送二进制文件、pdf、word 或 excel 的页面。在 Firefox 和 IE 中都会打开一个对话框，询问您要如何处理此文件，“打开”或“保存”

![在此处输入图像描述](../Images/d36af7d02ab9d7790a590bfe0418ee84.png)

但**Chrome**直接将其保存到您的计算机。

是否可以**让 Chrome 询问您要如何处理此文件**，在将文件发送到浏览器之前将一些元数据放入 Web 响应中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T14:11:46.850

无法强制 Chrome 提示保存对话框。**用户必须在 chrome 的配置（高级设置）**上更改该行为。

![在此处输入图像描述](../Images/1f598afdd505630fc21cf62156d58144.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:59:59.840

您需要发送一些标头，以便浏览器知道如何处理您正在流式传输的内容，例如：

```
Response.ContentType 
Content-Disposition, application,and 
filename=" + FileName 
```

这将强制下载。另请参阅此链接以获取更多信息：

[http://www.devtoolshed.com/aspnet-download-file-web-browser](http://www.devtoolshed.com/aspnet-download-file-web-browser)

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T13:15:06.063

也许会有所帮助

```
System.String filePath = "c:\\tempFile.pdf"
System.IO.FileInfo fileInfo = new FileInfo(filePath);

System.Web.HttpContext context = System.Web.HttpContext.Current;
System.Web.HttpResponse response = context.Response;
response.Clear();
response.ClearHeaders();
response.ClearContent();
response.ContentType = "application/pdf";
response.AppendHeader("content-type", "application/pdf");
response.AppendHeader("content-length", fileInfo.Length.ToString());
response.AppendHeader("content-disposition", String.Format("attachment; filename={0}.pdf", outputFileName));
response.TransmitFile(filePath);
response.Flush(); // this make stream and without it open chrome save dialog
context.ApplicationInstance.CompleteRequest(); // send headers and c# server-side code still continue

System.IO.File.Delete(filePath); // clean cache here if you need

response.End(); 
```

# spring - fetchType.Lazy 的问题...！

> ID：13933532
> 
> 赞同：2
> 
> 时间：2012-12-18T12:55:10.117
> 
> 标签：spring, hibernate, spring-mvc

我是基于注释的事务管理的新手。我正在使用 Spring 3.1、Hibernate 3.2 开发 Web 应用程序。我对@Transactional 有一些问题。我将加载具有以下子集的 POJO：父类是具有 DealerMember 集的 DealerMaster，因此我声明为

**在 DealerMaster 中：**

```
@OneToMany(fetch = FetchType.LAZY,mappedBy = "dealerMaster")
    @Cascade({ CascadeType.SAVE_UPDATE, CascadeType.DELETE_ORPHAN})
    public Set<DealerMember> getDealerMembers() {
        return this.dealerMembers;
    } 
```

我正在使用我的 HibernateUtil 类来执行任何查询，所以我使用的是加载方法：

```
public static Object loadObject(Session paramSession, Object paramObject)
    throws Exception
  {
    try
    {       
      paramObject = paramSession.load(paramObject.getClass(), getId(paramObject));
    }
    catch (HibernateException localHibernateException)
    {
      setErrorMessage(paramObject, localHibernateException.getMessage());
      localHibernateException.printStackTrace();
    } 
```

现在我的问题是我的加载方法成功运行但是当在 paramObject 上移动 courser 时它显示：

```
com.sun.jdi.InvocationException occurred invoking method. 
```

并且只有当我尝试在控制器端访问它时，所有值都可以在服务层访问，它会抛出错误：

```
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.lbt.model.DealerMaster.dealerMember, no session or session was closed 
```

当我在同一问题上搜索时，我发现这与延迟加载有关，但我尝试作为 lazy = false 也 fetchType.Eager 但同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:35:08.947

您必须了解有关 LazyInitialzation 异常的一件事。它发生在休眠无法初始化已设置为延迟获取的对象时，并且主要发生在包含设置为延迟获取的其他对象集的对象上的会话关闭时。

虽然将 fetch 设置为 EAGER 有效，但在涉及对象层次结构的某些情况下，它可能不起作用。例如：用户-->包含角色和角色集--> 包含权限集。现在，如果所有人都在延迟获取。如果我获取用户对象并关闭会话，然后尝试从中获取角色，我会得到异常。如果我在用户 POJO 中设置 fetch 渴望角色，我仍然会得到该异常，因为角色 POJO 包含延迟获取的权限。

因此，要么将所有层次结构设置为 EAGER（有性能问题但会起作用）。或在您完成对象处理后关闭会话（保持惰性获取）。

事情会奏效:)

# objective-c - AVAudioPlayer 中 setVolume 的值是什么意思？

> ID：13933537
> 
> 赞同：0
> 
> 时间：2012-12-18T12:55:23.777
> 
> 标签：objective-c, audio, avaudioplayer, volume

我在 Xcode 4.5.1 工作并为 iPhone 开发。

我正在使用 AVAudioPlayer 播放声音。我正在播放两种声音，并希望将它们的平均音量相对于彼此进行比率。

我使用 averagePowerForChannel: 结合 NSTimer 收集相关信息，每隔一段时间检查两个声音文件的音量。但是，我发现，无论我在 setVolume 输入的值如何，特定的声音文件总是会返回相同的平均音量，例如 -20,0。我得出的结论是，它没有考虑您使用 setVolume 应用的任何音量更改。

您可以在 setVolume 中输入值 0-1。有没有办法将这些值转换为有意义的值，我可以将其应用于使用 averagePowerForChannel: 收集的音量信息？我假设我不能简单地将我的平均音量值乘以 setVolume 值。我查看了类参考，但找不到任何有用的东西。

请指出我正确的方向。任何输入表示赞赏。

# jasper-reports - 在单个 jasperreport 中显示一列的多条记录

> ID：13933538
> 
> 赞同：2
> 
> 时间：2012-12-18T12:55:26.717
> 
> 标签：jasper-reports

我正在使用 jasper 报告 5.0.0 并使用如下所述的场景创建报告：在我的 ireport 中，我需要显示学生姓名、班级、id、目标、proficiencyForGoal。每个学生都有多个目标，每个目标都有进步。我的 sql 查询如下：从 2 或 3 个按 prog.goal_id 连接和分组的表中选择 stud.name、stud.class、stud.id、prog.goal_id、prog.proficiency。此查询为每个学生提供多行。并且 ireport 每行创建多个 PDF（使用 PDF 预览）。**但我想在单个 PDF 中显示所有目标和目标熟练程度以及学生详细信息，如姓名、班级、身份证**。那就是我想要每个学生一份包含所有详细信息的 PDF。因此，如果有 500 个学生，那么 500 个 pdf。

假设每个学生有 10 个目标，那么现在我得到的是 10 个 PDF，其中一名学生的姓名、班级、ID 重复，而对于 500 名学生，我得到 500*10=5000 个我不想要的 pdf。

感谢您对如何实现此要求的快速输入或想法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:08:05.357

在您已经在报告中添加了 sql 查询之后，我认为至少应该在报告中放置字段（名称、类等）；此外，如果每个学生有多个详细信息，您可以在报告中为每个学生使用子报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:38:02.323

不知道如何将其添加为评论，所以我把它放在这里。

要将值传递给您的数据集，它的工作原理与子报表很相似，但参数选项不在 Ireport 的属性部分中。
就像在子报表中一样，您首先需要将参数添加到数据集 (student_id)

然后要进入参数屏幕，您需要：

右键单击您的列表选择参数选项卡下的“编辑列表数据源”单击“添加”在顶部拉您将在值中有您的数据集参数（student_id）[您只会从数据集中获得有效参数的列表]表达你将有你的主报告`$F{student_id}`

这会将student_id从您的主报告传递到您的数据集（用于列表、表格和交叉表）

然后当然你需要添加到你的数据集的 where 子句中

`where $P{student_id} = student_id`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T06:34:58.130

在查询中，您可以为 student_id 添加参数化条件

```
Like:  where student_id=$P{p_student_id} 
```

并将文本字段和静态文本等所有内容保留在摘要带中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-13T20:50:05.963

假设您的查询是由学生订购的更简单的方法。在 Ireport 添加一个组（在报告检查器中右键单击根并单击“添加报告组”）您很可能不需要页眉或页脚放置您可能想要的所有字段（名称、类、id、goal_id、熟练程度）联合国单击名称，类，id 上的“打印重复值”属性选择您的组（在报告检查器中）选择“在新页面上开始”（您可能还想重置页面＃并重新打印标题）也“保持在一起”

这是一个示例，您需要将查询放入其中才能正常工作

```
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report9" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="5ac8f93f-0f1f-4f1c-8c7c-41a15b76ef65">
<?xml version="1.0" encoding="UTF-8"?>
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <queryString>
        <![CDATA[select sysdate from dual ]]>
    </queryString>
    <field name="name" class="java.lang.String"/>
    <field name="class" class="java.lang.String"/>
    <field name="id" class="java.lang.String"/>
    <field name="goal_id" class="java.lang.String"/>
    <field name="proficiency" class="java.lang.String"/>
    <group name="Student Name" isStartNewPage="true" isResetPageNumber="true" isReprintHeaderOnEachPage="true" keepTogether="true">
        <groupExpression><![CDATA[$F{name}]]></groupExpression>
    </group>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="20" splitType="Stretch">
            <staticText>
                <reportElement uuid="b78d9294-5efc-4d3a-a08b-749493ecf242" x="0" y="0" width="111" height="20"/>
                <textElement/>
                <text><![CDATA[name]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="8eeacd33-15c4-416e-981e-f8aac2586443" x="111" y="0" width="111" height="20"/>
                <textElement/>
                <text><![CDATA[class]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="dc878516-ecc7-405d-a288-ead78229e564" x="222" y="0" width="111" height="20"/>
                <textElement/>
                <text><![CDATA[id]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="0eb5c805-4358-4d85-b567-d513a318a54d" x="333" y="0" width="111" height="20"/>
                <textElement/>
                <text><![CDATA[goal_id]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="b9675b06-87ac-4441-a207-0cbd58dbf925" x="444" y="0" width="111" height="20"/>
                <textElement/>
                <text><![CDATA[proficiency]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement uuid="b284aaa5-475e-4b54-a1bd-ce4772cf79a2" isPrintRepeatedValues="false" x="0" y="0" width="111" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="80f38abc-1cb3-41c0-a9c6-2473e84a8c6d" isPrintRepeatedValues="false" x="111" y="0" width="111" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{class}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="30a371f8-4d08-4125-8e85-497b2697e9d3" x="222" y="0" width="111" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="53757283-0c03-4248-9848-1eba9ee168b7" x="333" y="0" width="111" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{goal_id}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="3d2bbbc0-0fe1-4442-809f-acee606db5ac" x="444" y="0" width="111" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{proficiency}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

# batch-file - 将文件重命名为其所在目录的名称

> ID：13933545
> 
> 赞同：0
> 
> 时间：2012-12-18T12:56:25.417
> 
> 标签：batch-file, rename

我认为这是一项简单的任务，但我是批处理脚本的菜鸟。

这是结构的样子：

```
MAINDIR
    directory name
        nameof.file 
```

我正在寻找将目录中的所有文件批量重命名为与目录相同的名称。

基本上是：

扫描子文件夹并找到所有`*.file`.

将 重命名为`*.file`它已经在的目录的名称

最终结果`nameof.file`是`directory name.file`

更具体地说，我有 350 个文件需要重命名。它们都在相应的目录中，我希望每个文件夹中的 1 个文件都将文件夹的名称作为文件名。

```
c:\folder 1\file1.ext
c:\folder 2\file2.ext
c:\folder 3\file3.ext 
```

所有`.ext`文件都需要将其文件夹名称作为文件名。

```
c:\folder 1\folder 1.ext
c:\folder 2\folder 2.ext
c:\folder 3\folder 3.ext 
```

我希望这更清楚。因此，一旦准备好脚本，我可以将所有 350 个文件一个一个地拖放到脚本上，它会获取文件并重命名它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:18:09.803

这会将拖到其上的任何文件重命名为其父目录名称。

```
setlocal enabledelayedexpansion
for %%a in (%1) do (
set p=%%~dpa
set p=!p:~0,-1!
for %%b in ("!p!") do ren %%a "%%~nb.*"
) 
```

要通过固定根目录下所有子文件夹中的所有文件递归执行此操作，您可以使用此

```
setlocal enabledelayedexpansion
for /r C:\folder %%a in (*) do (
set p=%%~dpa
set p=!p:~0,-1!
for %%b in ("!p!") do ren "%%a" "%%~nb.*"
) 
```

这将使您不必单独拖放它们。除非你一次只能做一个，在这种情况下，第一个解决方案就足够了。

# java - 为什么这个 String.split() 会拆分我的字符串？

> ID：13933549
> 
> 赞同：-2
> 
> 时间：2012-12-18T12:56:39.460
> 
> 标签：java

为什么这段代码不起作用？

```
String s = "0.1";
String[] sa = s.split(".");
System.out.println(sa[0] + "Hello " + sa[1]); 
```

它给出的错误为：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0
    at com.test.A.main(A.java:8) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:00:45.720

[String.split](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)不会将字符串拆分为另一个字符串，而是将其拆分为[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)。在`.`正则表达式中具有特殊含义（它代表“任何字符”）。所以当你想明确匹配点时，你需要对它们进行转义。改为使用`"\\."`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:58:17.057

试试这个 ：

```
 String[] sa = s.split("\\."); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T12:58:21.793

采用

```
String[] sa = s.split("\\."); 
```

点是一个特殊的`.`正则表达式字符，除非您对其进行转义，否则它将匹配任何内容。

您的`ArrayIndexOutOfBoundsException`发生是因为您超出了数组的范围。

你拥有它的方式`sa.length`是 0，所以任何数组访问都会导致你的异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T12:59:54.027

split 是基于正则表达式的。[看这里](http://www.rgagnon.com/javadetails/java-0438.html)的第二段

简而言之。答案是逃避，如

```
split("\\.") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T12:59:11.720

转义`"."`- 它被视为特殊字符。您可能想阅读[此](http://www.javapractices.com/topic/TopicAction.do?Id=96)内容。

```
String[] sa = s.split("\\."); 
```

# android - 为什么 Android GPS 未在建筑物内显示位置？

> ID：13933563
> 
> 赞同：0
> 
> 时间：2012-12-18T12:57:22.780
> 
> 标签：android

我使用 Android GPS 创建了一个应用程序。此应用程序在 Android 手机中显示用户的当前位置名称、经纬度、GPS 精度。我已经在我的 android 设备中测试了这个应用程序。它完美地在我的手机中运行。但是当我在家里或建筑物时，我无法获得位置名称、纬度、经度和准确度。当我没有获得 GPS 覆盖时，如何创建 Toast 文本？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T13:14:25.623

GPS 的工作原理是连接到四个或更多卫星，然后通过测量来自各个卫星的信号到达您所需的时间来三角测量您的位置，简而言之。

因此，您必须清楚地看到天空（有时甚至云也会干扰），而且 GPS 不可靠，通常无法在建筑物内和地下位置工作。

尝试使用不同形式的位置跟踪（例如蜂窝网络）来跟踪建筑物内的用户。

# c# - 如何使用 C# 中的类型创建泛型委托？

> ID：13933565
> 
> 赞同：2
> 
> 时间：2012-12-18T12:57:26.823
> 
> 标签：c#, types, delegates, unity3d

如果我有一个类型，比如：

```
Type type = myObject.GetType (); 
```

如何制作使用该类型对象作为参数的通用委托？我希望代码类似于：

```
myDelegate = Action<type> (type parameter); 
```

上面的代码显然不会也不能按原样工作，但我怎样才能让它工作呢？我什至可以让它工作吗？

最终，我有一个 Dictionary < Type, List < Action < > > 字典，其中包含一个类型和一个委托列表，这些委托应该将该类型的对象作为参数。

并且应该像这样执行：

```
myDict[myType][i] (objectOfMyType); 
```

任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:03:32.437

如您所料，您不能`Action<>`直接在字典中使用该类型的实例化。您必须将其键入`System.Delegate`并使用`DynamicInvoke`：

```
Dictionary<Type, List<Delegate>> dict;

dict[myType][i].DynamicInvoke(objectOfMyType); 
```

并首先创建代表，使用反射：

```
Type delegateType = typeof(Action<>).MakeGenericType(myType);

MethodInfo delegatedMethod = typeof(ContainingType).GetMethod("MethodToInvoke");

Delegate myDelegate = Delegate.CreateDelegate(delegateType, delegatedMethod);
dict.Add(myType, new List<Delegate> {myDelegate}); 
```

# sql - 使用 Select 语句进行 SQL 更新

> ID：13933567
> 
> 赞同：1
> 
> 时间：2012-12-18T12:57:40.393
> 
> 标签：sql, sql-server-2005, select

我必须通过查询联系人表将联系人姓名添加到分配表中。

`Contact`桌子：

```
 ID     First_name     Last_Name
 -----------------------------------
 1234   John           Jones
 9876   Mary           Smith 
```

`Assignment`桌子

```
 ContactID   Name
 -----------------
  1234
  9876 
```

使用这个查询我得到

> *子查询返回超过 1 个值。*

询问：

```
 update A  
 set Name = (select  distinct first_name + ' ' + last_name from contacts c join        Assignments A on c.id = A.contact_id where A.contact_id = c.id)
 from Assignments  A 
 join contacts c on c.id = A.contact_id
 where c.id = A.contact_id 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T13:00:35.720

`JOIN`他们直接，像这样：

```
UPDATE a
SET a.Name = c.first_name + ' ' + c.last_name
FROM Assignments a
INNER JOIN Contacts c  ON c.id = A.contact_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T13:01:43.253

尝试

```
Update A
Set A.name = c.First_name + ' ' + c.Last_name
From Assignment A JOIN Contacts C ON A.ContactID = C.ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T13:01:58.007

不需要子选择

```
UPDATE A  
   SET Name = c.first_name + ' ' + c.last_name
FROM Assignments  A 
JOIN contacts c 
   ON c.id = A.contact_id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T13:06:09.430

试试这个

```
UPDATE a
SET a.Name = c.first_name + ' ' + c.last_name
FROM Assignments a
INNER JOIN Contacts c  ON c.id = A.contact_id 
```

# c# - EntityFramework 匿名复合键属性名冲突

> ID：13933569
> 
> 赞同：7
> 
> 时间：2012-12-18T12:57:50.887
> 
> 标签：c#, ef-code-first, anonymous-types, entity-framework-4.3, entity-framework-migrations

我正在使用 EntityFramework 5（或 .Net Framework 4.0 的 4.3）

在我的 DbContext 对象中，我已经设置了正确的 DbSet，并且这些对象包含对彼此的正确引用。这对我来说并不新鲜，而且一切都很好。

现在在这种情况下，我有一些复合键，有时包括表（或本例中的对象）的外键。为此，我在 DbContext`HasKey<>()`的方法上使用该函数。`OnModelCreating`当这些属性名称不同时，没有问题，但是当这些属性名称相同时，则无法进行迁移。

一个例子：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // ...

        modelBuilder.Entity<PatientVisit>().ToTable("PatientVisits");
        modelBuilder.Entity<PatientVisit>().HasKey(x => 
            new { x.Patient.Code, x.Code });

        // ...

        base.OnModelCreating(modelBuilder);
    } 
```

正如您在提供的代码中看到的，对象 PatientVisit 有一个名为 Code 的属性，但只要与不同的患者重复此属性，就可以重复此属性。实体 Patient 还定义了一个名为 Code 的键。

匿名类型不能有两个属性推断出相同的名称（很明显）。典型的解决方案是像这样命名匿名类型的属性：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // ...

        modelBuilder.Entity<PatientVisit>().ToTable("PatientVisits");
        modelBuilder.Entity<PatientVisit>().HasKey(x => 
            new { PatientCode = x.Patient.Code, VisitCode = x.Code });

        // ...

        base.OnModelCreating(modelBuilder);
    } 
```

但是这样做，当我尝试添加迁移时，会抛出此错误消息。

```
The properties expression 'x => new <>f__AnonymousType3`2(PatientCode 
= x.Patient.Code, VisitCode = x.Code)' is not valid. The expression 
should represent a property: C#: 't => t.MyProperty'  VB.Net: 'Function(t)
t.MyProperty'. When specifying multiple properties use an anonymous 
type: C#: 't => new { t.MyProperty1, t.MyProperty2 }'  
VB.Net: 'Function(t) New With { t.MyProperty1, t.MyProperty2 }'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:15:14.310

我认为你需要在这里做的是给`PatientVisit`一个新的财产`PatientCode`。这将是`Patient`. 例如

```
 HasRequired<PatientVisit>(v => v.Patient).WithMany()
                                             .HasForeignKey(v => v.PatientCode) 
```

然后你可以做

```
 modelBuilder.Entity<PatientVisit>().HasKey(x => 
        new { x.PatientCode, x.Code }); 
```

# joomla - 我想在 Joomla 2.5 中使用数据库（用户表）上的一些附加字段自定义配置文件编辑

> ID：13933570
> 
> 赞同：0
> 
> 时间：2012-12-18T12:57:52.130
> 
> 标签：joomla, joomla2.5, user-profile

我试图通过将`profile.xml`文件与`edit.php`（查看文件）放在一起来覆盖文件`templates/template_name/html/com_users/profile folder`，并且还确保`edit.php`文件知道新的`profile.xml ($this->form->loadFile( dirname(__FILE__) . DS . "profile.xml");)`但我似乎无法在从前端的配置文件编辑页面更新自定义字段时使其工作。我还可以看到自定义字段没有按照应有的顺序排列`profile.xml`。请有人帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:31:40.670

您不能覆盖 Joomla xml 文件。您需要创建一个用户插件以单独安装以显示表单字段。默认 Joomla 安装附带一个配置文件插件。可以在[此处](http://docs.joomla.org/Creating_a_profile_plugin)找到有关此的更多详细信息。

# html - 为什么这个 css/html 显示额外的填充？

> ID：13933572
> 
> 赞同：0
> 
> 时间：2012-12-18T12:57:56.490
> 
> 标签：html, css, padding

在过去的几天里，我一直在为我正在构建的网站上的一些奇怪的间距而苦苦挣扎。最初，我认为这是 Chrome 的显示问题，但我已经能够在 IE8、IE9、Firefox 和 Safari 中复制该问题。我使用老式的 HTML/CSS 来实现向后兼容性，所以我可以说这不是 IE 处理 HTML5 或其他一些前沿更新。

虽然网上的一些解决方案让我尝试了不同的事情，包括浮动头部，但没有任何成功，而且我总是在其中一个长边上填充。

我已将其简化为重现问题的基本要素，并包含了我可以在最后看到的填充的屏幕截图。我当然会欣赏另一组或七只眼睛向我展示我错过的东西。

编辑：行高是这个问题的罪魁祸首，但是根据建议将图像垂直对齐到顶部，将*文本*留在了 div 的顶部。我的感觉是标题标签将保留默认值，但标题中的 the 和 img 标签将覆盖它。还是每个 div 只能有一个垂直对齐？

其次，有没有办法用 CSS 折叠 line-height？

代码

```
<html>  
        <head>
             <title>Test</title>
             <LINK rel="stylesheet" href="test.css">
        </head>
        <body>
             <div id="header">
             <img src="bluespacer.gif" height=125 width=400>
             TEST
             </div>
        </body>
    </html> 
```

CSS 代码

```
#header {
        font: serif;
        color: blue;
        background-color: gray;
    } 
```

我的输出如下所示

![屏幕截图](../Images/b394e0287e55667257b1231e403642ad.png)

这是 bluespacer.gif；1 像素 x 1 像素。仔细看，就像尘埃一样！

( ![bluespacer.gif](../Images/6bff5d644d298aaba6d4798a62961d38.png)) <---

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T12:59:28.623

你看错地方了。产生空白的不是填充而是行高。

尝试垂直对齐图像：

```
#header img {
  vertical-align: bottom;
} 
```

说明：在默认样式中，图像放置在文本的基线上。也就是说，下边缘大致与字母“x”的下边缘对齐。但是因为文本有下降（如'g'或'j'），周围的框被绘制得更高，这导致图像下方有额外的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:38:22.623

这是一个奇怪的问题。你可以这样做。

```
#header img { line-height: 0; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:06:39.460

```
#header img {
    display: block;
} 
```

# regex - Autohotkey 使用正则表达式修剪文本

> ID：13933574
> 
> 赞同：0
> 
> 时间：2012-12-18T12:57:59.663
> 
> 标签：regex, autohotkey

我使用 Autohotkey（版本 1.0.48.05）和 HiEdit 控件制作了一个编辑器。我努力实现的一个功能是从文本块中修剪空白 - 而不删除空行。

如何停止以下 RE 删除空行：

块 := RegExReplace(块,"m)\s*$","")

块 := RegExReplace(块,"m)^\s*","")

提前谢谢了。

G

亲爱的阿卜杜勒，

伟大的 [ \t] 对我的探针进行了排序。我现在知道 \s 匹配 EOL，而 [ \t] 或 [:BLANK:] 不匹配。非常感谢您的帮助

G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:14:58.680

尝试使用`[:blank:]`or`[ \t]`代替`\s`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-26T11:19:58.780

为什么要使用正则表达式？

```
VarSetCapacity(fir, 20)  ; Ensure the variable is large enough to accept the new string.
fir.="text`nhello`n`n`n`n`n"

DllCall("Shlwapi.dll\StrTrim", "Str", fir, "Str", " `r`n",  "Cdecl")  ; Requires the Cdecl calling convention.
MsgBox, % fir 
```

似乎也有效

# spring - 将 Spring bean 注入 EJB3

> ID：13933575
> 
> 赞同：1
> 
> 时间：2012-12-18T12:58:07.413
> 
> 标签：spring, ejb-3.0, code-injection

我创建了一个 Remote StatelessSession Bean，我想将 Spring bean 注入到我的 UserServiceImpl EJB 中。

```
@Stateless

@Interceptors(SpringBeanAutowiringInterceptor.class)

public class UserServiceImpl implements IUserService{

    @Autowired

    IRegisterService registerService; 
```

根据文档，我已将 beanRefContext.xml 添加到具有 Spring bean 配置条目的类路径中。

我的问题是，当我尝试不使用`@Interceptors(SpringBeanAutowiringInterceptor.class)`.

但是，当我将 bean 注入 EJB 部署失败时，出现以下异常：

```
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_29]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_29]
        at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_29]

Caused by: java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy
        at sun.reflect.annotation.AnnotationParser.parseClassArray(AnnotationParser.java:653) [rt.jar:1.6.0_29]
        at sun.reflect.annotation.AnnotationParser.parseArray(AnnotationParser.java:460) [rt.jar:1.6.0_29]
        at sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:286) [rt.jar:1.6.0_29]
        at sun.reflect.annotation.AnnotationParser.parseAnnotation(AnnotationParser.java:222) [rt.jar:1.6.0_29]
        at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:69) [rt.jar:1.6.0_29]
        at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:52) [rt.jar:1.6.0_29]
        at java.lang.Class.initAnnotationsIfNecessary(Class.java:3070) [rt.jar:1.6.0_29]
        at java.lang.Class.getAnnotation(Class.java:3029) [rt.jar:1.6.0_29]
        at org.jboss.as.ejb3.deployment.processors.BusinessViewAnnotationProcessor.getRemoteBusinessInterfaces(BusinessViewAnnotationProcessor.java:150)
        at org.jboss.as.ejb3.deployment.processors.BusinessViewAnnotationProcessor.processViewAnnotations(BusinessViewAnnotationProcessor.java:123)
        at org.jboss.as.ejb3.deployment.processors.BusinessViewAnnotationProcessor.deploy(BusinessViewAnnotationProcessor.java:98)

        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
        ... 5 more 
```

有没有人遇到过这个问题并有解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-22T17:16:00.020

我确切地知道为什么会发生这种异常，这是由 JDK 错误[JDK-7183985](https://bugs.openjdk.java.net/browse/JDK-7183985)引起的。根本问题可能是您的容器无法加载`SpringBeanAutowiringInterceptor`。这可能是您的应用程序中的包装问题。请提供有关如何打包应用程序以及如何在应用程序中打包 Spring 的更多详细信息。

# jquery - jQuery mousemove（光标“概述”）错误计算

> ID：13933576
> 
> 赞同：1
> 
> 时间：2012-12-18T12:58:11.513
> 
> 标签：jquery, position, mousemove, jquery-calculation

我正在尝试创建一个文档/光标“地图概览”，但是我坚持计算。指针仍超出概览框。

这[是我](http://jsfiddle.net/ARTsinn/8jJNV/0)到目前为止所做的：

```
var box = $('#box'),
    pointer = box.find('i');

$(window).on('mousemove', function(e) {

    var pageX = e.clientX,
        pageY = e.clientY,
        winW = $(this).width(),
        winH = $(this).height(),
        percentX = 100 * pageX / winW,
        percentY = 100 * pageY / winH;

    pointer.css({
        top: percentY + '%',
        left: percentX + '%'
    });

}); 
```

我知道，这不是使用百分比的最佳方法，但我不知道如何计算正确的尺寸......有什么建议可以让它变得更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:09:40.960

光标将始终与框的边框重叠，因为

a) 它具有定义的宽度 > 1

b）您将其放置在实际位置的右下角，因此它将与右侧和底部重叠，并且

c）您应该将框的溢出设置为隐藏。

见例子：http: [//jsfiddle.net/8jJNV/7](http://jsfiddle.net/8jJNV/7)

编辑：适应 jsfiddle 的最新变化

CSS：

```
#box {
   position: fixed;
   bottom:0;
   left:0;
   width: 180px;
   height: 180px;
   background: #aaa;
   overflow: hidden;
} 
```

jQuery：

```
$(window).on('mousemove', function(e) {

   var pageX = e.clientX;
   var pageY = e.clientY;
   var winW = $(this).width();
   var winH = $(this).height();

   if(pageX > winW-5) pageX = winW-5; // deal with scrollbar

   var boxWidth = 172;
   var boxHeight = 172;

   var posX = pageX / winW * boxWidth;
   var posY = pageY / winH * boxHeight;

   pointer.css({
      top: posY + 'px',
      left: posX + 'px'
   });

}); 
```

# php - Drupal、hook_node_view 和搜索创建无限循环

> ID：13933582
> 
> 赞同：1
> 
> 时间：2012-12-18T12:58:25.140
> 
> 标签：php, search, drupal-7, infinite-loop

我对drupal有一个非常奇怪的问题。如果您查看某种类型的节点，我有一个自定义模块会执行 goto（请参见下面的代码）。问题是，过了一会儿，我进入了一个无限循环，其中 datafile_flow_node_view 被无限调用（发生在每个页面上，也发生在不包含 CT 的页面上）。

最有趣的部分是（尽管我没有在任何地方使用搜索）视图模式是 search_index。禁用搜索模块后，问题就消失了。当我重新启用模块时，问题消失了一段时间，然后它返回（我不知道何时以及为什么）。

任何人都可以解释为什么会这样吗？

```
function datafile_flow_node_view($node, $view_mode, $langcode) {
  if ($node->type == 'datafile') {
    drupal_goto('node/' . $node->nid . '/edit');
  }
} 
```

@EDIT 显然这发生在运行 cron 期间。有没有办法避免在 cron 期间执行 hook_node_views ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:42:14.040

没有办法避免在 cron 任务期间执行，但是当被调用以构建用于填充搜索索引的节点内容`hook_user_view()`时，您可以避免将用户重定向到另一个 URL 。`hook_node_view()`

```
function mymodule_node_view($node, $view_mode, $langcode) {
  if ($view_mode != 'search_result') {
    if ($node->type == 'datafile') {
      drupal_goto('node/' . $node->nid . '/edit');
    }
  }
} 
```

一般来说，调用`drupal_goto()`inside是个坏主意`hook_node_view()`；钩子应该改变`$node->content`，而不是重定向用户。

会发生什么：

*   在 cron 任务期间，搜索模块会更新其索引
*   Node 模块更新搜索索引，并为此调用`node_view()`，它调用 的任何实现`hook_node_view()`，包括您显示的那个
*   正如`drupal_goto()`在 cron 任务期间所说，Drupal 有问题

用户查看节点时调用的假设`hook_node_view()`是不正确的。您确定用户正在查看节点的唯一时刻是调用 node/%node 的页面回调时。

您可以做的是实现类似于以下的代码。（我正在编写简化代码只是为了展示正确的方法。）

```
function datafile_flow_menu_alter(&$items) {
  if (isset($items['node/%node'])) {
    $items['node/%node']['page callback'] = 'datafile_flow_node_view';
  }
}

function datafile_flow_node_view($node) {
  if ($node->type == 'datafile') {
    drupal_goto('node/' . $node->nid . '/edit');
  }

  return node_page_view($node);
} 
```

代码被简化了，因为它假设页面回调是`node_page_view()`（Drupal 使用的默认值），并且没有模块更改它。可以编写不对此做出任何假设的代码，以及从该页面回调中使用的参数。（留给读者作为练习。`;)`）

### 参考

*   [node_search_execute()](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_search_execute/7)
*   [节点视图（）](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_view/7)

# java - 如何将最终字符串转换为函数以供另一个函数使用？

> ID：13933583
> 
> 赞同：0
> 
> 时间：2012-12-18T12:58:29.833
> 
> 标签：java, string, function, handler, final

如何将最终字符串“数据”放入此函数`beginListenForData`（）以供另一个函数`upload`（）使用？`BeginListen`从蓝牙获取数据...

```
 void beginListenForData()
  {
  final Handler handler = new Handler(); 

  workerThread = new Thread(new Runnable()
  {
      public void run()
      {              
              try {        
                        final String data = new String(encodedBytes, "US-ASCII");
                        readBufferPosition = 0;
                        //data2=data;
                              handler.post(new Runnable()
                              {
                                  public void run()
                                  {
                                      myLabel.setText(data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:22:59.503

我在谷歌上查看了你的代码，我想问：

你为什么要在 ListenBt() 中重新声明“数据”而不是操作全局最终数据变量？

**编辑：** [你不能通过重新分配别名来操纵最终变量，你会得到一个异常。](https://stackoverflow.com/questions/4704320/how-to-deal-with-final-strings)
*...好吧，也许有反思，但那是作弊！*

您可以通过调用“this.data”来实现您正在寻找的内容，而 data 是一个公共全局变量并将其设置为所需的内容。

如果您在调用上传函数时当前得到“0”，这意味着它正在引用全局最终变量数据，而不是在 ListenBt() 中所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:25:39.920

将数据作为字段而不是局部变量。

```
 String data;

 void beginListenForData()
  {
  final Handler handler = new Handler(); 

  workerThread = new Thread(new Runnable()
  {
      public void run()
      {              
              try {        
                        data = new String(encodedBytes, "US-ASCII");
                        readBufferPosition = 0;
                        //data2=data;
                              handler.post(new Runnable()
                              {
                                  public void run()
                                  {
                                      myLabel.setText(data); 
```

# php - 插入中不必要的字符

> ID：13933585
> 
> 赞同：0
> 
> 时间：2012-12-18T12:58:35.713
> 
> 标签：php, mysql

我尝试插入到表中一些值，但我有一个问题。字段 key1、key2、key3、key4 中有不必要的字符 (\n)。这是一个例子：

```
INSERT INTO questions (`key1`,`key2`, `key3`, `key4`, `user_id`, `creation_date`, `taksi`, `type`, `permission`)
        VALUES ('\n17','\n18','\n19','\n20','5','2012-12-18 14:37:31', '1', 'multiple_choice', '0') 
```

我怎样才能避免 \n ？

原始代码：

```
$user_id = $_SESSION['id'];

      $key1 = mysql_real_escape_string($_GET['key1']);
      $key2 = mysql_real_escape_string($_GET['key2']);
      $key3 = mysql_real_escape_string($_GET['key3']);
      $key4 = mysql_real_escape_string($_GET['key4']);

      $taksi = mysql_real_escape_string($_GET['taksi']);
      $permission = mysql_real_escape_string($_GET['permission']);

$sql = "INSERT INTO questions (`key1`,`key2`, `key3`, `key4`, `user_id`, `creation_date`, `taksi`, `type`, `permission`)
        VALUES ('".$key1."','".$key2."','".$key3."','".$key4."','".$user_id."','".$today."', '".$taksi."', '".$type."', '".$permission."')";
        mysql_query($sql); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:00:07.410

PHP `str_replace`。将您的查询创建为字符串变量，然后将所有实例替换为`\n`虚无。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:36:05.073

在通过 $_GET 发送这些密钥之前尝试对 URIComponent 进行编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:09:36.140

尝试这样做希望它会奏效-

```
VALUES (nl2br('\n17'), nl2br('\n18'), nl2br('\n19'), nl2br('\n20') ..... 
```

# c++ - Google 协议缓冲区 - 即使所有字段都明显存在，但缺少必填字段

> ID：13933587
> 
> 赞同：10
> 
> 时间：2012-12-18T12:58:44.193
> 
> 标签：c++, boost-asio, protocol-buffers

我正在尝试通过 TCP 发送协议缓冲区消息，但在接收端我在尝试解析时收到“缺少必填字段”错误，即使显然所有字段都在那里。我在包含消息长度的消息之前发送了一个 4 字节的标头。

这是消息定义：

```
message ReplayRequest {
  required string channel = 1;
  required uint32 start = 2;
  required uint32 end = 3;
} 
```

在客户端，我正在对标头进行编码并将消息序列化为向量。

```
ReplayRequest req;
req.set_channel( "channel" )
req.set_start( 1 );
req.set_end( 5 );
int byte_size = req.ByteSize();
std::vector<uint8_t> write_buffer( HEADER_SIZE + byte_size );
encode_header( ... );
req.SerializeToArray( &write_buffer[HEADER_SIZE], byte_size ); 
```

这是生成缓冲区的十六进制打印，其中前 4 个字节是编码的消息长度（13 个字节）。

```
00 00 00 0d 0a 07 63 68 61 6e 6e 65 6c 10 01 18 05 
```

在服务器端，我收到标头，对其进行解码，然后接收 N 个字节，其中 N 是标头中报告的消息大小。删除了标头的服务器中的缓冲区是：

```
0a 07 63 68 61 6e 6e 65 6c 10 01 18 05 
```

这与一个编码客户端减去标头完全相同，但是当我尝试 ParseFromArray 这个缓冲区时，我得到一个错误：

```
libprotobuf ERROR c:\umdf_runtime\protobuf-2.4.1\src\google\protobuf\message_lit
e.cc:123] Can't parse message of type "ReplayRequest" because it is missing 
required fields: channel, start, end 
```

在调试时，我注意到解码失败的地方在于 protobuf 生成的代码的这一部分：

```
bool ReplayRequest::IsInitialized() const {
  if ((_has_bits_[0] & 0x00000007) != 0x00000007) return false;

  return true;
} 
```

has_bits_ 由于某种原因在服务器端被读取为零，但我不知道为什么。

有任何想法吗？

如果重要，我将 boost::asio 用于网络部分。

**更新**

根据要求，我发布了调用 parseFromArray 的代码。

```
request_.ParseFromArray( &data_buffer_, data_buffer_.size() ); 
```

request_ 是一个 ReplayRequest 成员变量，在此调用之前没有对其进行任何操作。

data_buffer_ 是接收 TCP 数据的向量<uint8_t>。

我确认它的大小正确为 13 个字节，这是它的十六进制转储，这与我在序列化后转储缓冲区客户端时得到的相同。

```
0a 07 63 68 61 6e 6e 65 6c 10 01 18 05 
```

**更新 2**

我能够将缓冲区解析为客户端的另一个 ReplayRequest 实例，即：

```
...snip...
req.SerializeToArray( &write_buffer[HEADER_SIZE], byte_size );
ReplayRequest test;
test.ParseFromArray( &write_buffer[HEADER_SIZE], byte_size ); 
```

测试已成功填充正确的字段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T13:38:09.003

问题是您传递的是指向向量的指针，而不是指向向量数据的指针。

代替
`request_.ParseFromArray( &data_buffer_, data_buffer_.size() );`

尝试
`request_.ParseFromArray( &data_buffer_[0], data_buffer_.size() );`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-30T10:25:33.503

如果缺少必填字段但您不需要并且无法在原型文件中将该字段更改为可选字段，则可以使用另一种解决方案，您可以使用 ParsePartialFromArray 而不是 ParseFromArray。

请参阅 protobuf 文档：[https ://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.message_lite](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.message_lite)

# multithreading - Qt GUI 用户从 QThread 对象中与 QMessageBox 交互

> ID：13933591
> 
> 赞同：2
> 
> 时间：2012-12-18T12:58:53.287
> 
> 标签：multithreading, qt, user-interface

我将 QThread 与`MyObject->moveToThread(myThread);`需要一段时间的通信功能一起使用。一些 Signals 和 Slots 让 GUI 发布有关进度的信息。

但是，在需要用户交互的线程通信期间可能会发生某些情况 - 由于无法在线程内创建 QMessageBox，我正在考虑发出一个信号，允许我暂停线程并显示对话框。但首先，似乎没有办法暂停线程，其次，这种尝试可能会失败，因为它需要一种在恢复线程时将参数传回线程的方法。

一种不同的方法可能是预先将所有有问题的参数传递给线程，但这可能并不总是一种选择。

这通常是怎么做的？

**编辑**

感谢您的评论 #1 并让我寄予厚望，但请详细说明如何从线程中的对象创建例如对话框以及如何暂停它..

以下使用 Qt 4.8.1 和 MSVC++ 2010 的示例代码导致：

```
MyClass::MyClass created 
MainWindow::MainWindow thread started 
MyClass::start run 
ASSERT failure in QWidget: "Widgets must be created in the GUI thread.", file kernel\qwidget.cpp, line 1299 
```

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    Ui::MainWindow *ui;
};

#endif // MAINWINDOW_H 
```

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

#include "myclass.h"
#include <QThread>
#include <QDebug>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    QThread *thread = new QThread();
    MyClass* myObject = new MyClass();

    myObject->moveToThread( thread );
    connect(thread,     SIGNAL( started()),     myObject, SLOT(start()));
    connect(myObject,   SIGNAL( finished()),    thread, SLOT(quit()));
    connect(myObject,   SIGNAL( finished()),    myObject, SLOT(deleteLater()));
    connect(thread,     SIGNAL( finished()),    thread, SLOT(deleteLater()));

    thread->start();
    if( thread->isRunning() )
    {
        qDebug() << __FUNCTION__ << "thread started";
    }
}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

我的班级.h

```
#ifndef MYCLASS_H
#define MYCLASS_H

#include <QObject>

class MyClass : public QObject
{
    Q_OBJECT
public:
    explicit MyClass(QObject *parent = 0);

signals:
    void finished();

public slots:
    void start();

};

#endif // MYCLASS_H 
```

我的类.cpp

```
#include "myclass.h"

#include <QMessageBox>
#include <QDebug>

MyClass::MyClass(QObject *parent) :
    QObject(parent)
{
    qDebug() << __FUNCTION__ << "created";
}

void MyClass::start()
{
    qDebug() << __FUNCTION__ << "run";

    // do stuff ...

    // get information from user (blocking)

    QMessageBox *msgBox = new QMessageBox();
    msgBox->setWindowTitle(      tr("WindowTitle") );
    msgBox->setText(             tr("Text") );
    msgBox->setInformativeText(  tr("InformativeText") );
    msgBox->setStandardButtons(  QMessageBox::Ok | QMessageBox::Cancel);
    msgBox->setDefaultButton(    QMessageBox::Ok);
    msgBox->setEscapeButton(     QMessageBox::Cancel);
    msgBox->setIcon(             QMessageBox::Information);

    int ret = msgBox->exec();

    // continue doing stuff (based on user input) ...

    switch (ret) 
    {
        case QMessageBox::Ok:
            break;

        case QMessageBox::Cancel:
            break;

        default:
            break;
    }

    // do even more stuff

    emit finished();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T16:42:45.287

在信号/槽连接中使用 Qt::BlockingQueuedConnection（对 QObject::connect() 的调用）。

[http://doc.qt.digia.com/qt/qt.html#ConnectionType-enum](http://doc.qt.digia.com/qt/qt.html#ConnectionType-enum)

这将阻塞您的线程，直到 UI 线程上的插槽返回，然后 UI 线程中的插槽可以自由显示消息框/模式对话框/您想做的任何事情。

您*必须*确保您的工作线程实际上不在 UI 线程上，因为正如文档所说，如果信号和插槽位于同一线程上，这将导致死锁（因为它会自行阻塞）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:38:01.353

我现在不能给出任何具体的代码，但我会这样做：

1.  在`MyClass::start()`锁定一个`QMutex`.
2.  发出信号，例如`messageBoxRequired()`。
3.  等待最近的互斥锁上的共享`QWaitCondition`。这也将在线程等待时解锁互斥锁。
4.  在您的 MainWindow 中的一个插槽中，例如`showMessageBox()`，显示消息框。
5.  将返回值存储在 的成员中`MyClass`。您可以通过提供使用互斥锁的 setter 和 getter 来保护成员。显然`MyClass`，它本身应该只使用那些 setter/getter 本身访问该成员。（另请参阅[QMutexLocker](http://qt-project.org/doc/qt-4.8/QMutexLocker.html)）。
6.  通话`wakeOne()`或`wakeAll()`上共享`QWaitCondition`。
7.  先前的`wait()`调用将返回并`MyClass::start()`继续执行。如果我正确理解文档，`QWaitCondition`将在互斥锁从`wait()`. `wait()`这意味着您必须在调用后直接解锁互斥锁。
8.  您可以从您的类成员访问消息框的返回值（使用线程安全的 getter）

线程安全的 setter/getter 的实现如下：

```
void MyClass::setVariable( int value )
{
    QMutexLocker( &_mutex );
    _value = value;
}

int MyClass::getVariable() // Not sure if a 'const' modifier would work here
{
    QMutexLocker( &_mutex );
    return _value;
} 
```

# c++ - 如何在原生 c++ 应用程序上通过 WP8 认证 6.5.1？

> ID：13933593
> 
> 赞同：3
> 
> 时间：2012-12-18T12:58:59.570
> 
> 标签：c++, windows-phone-8

我的应用刚刚被 WP8 商店拒绝，因为它在媒体播放器启动时停止（并开始播放自己的一些音乐）。这正是 WP8 样本 Marble Maze 的做法。然而他们拒绝了。

认证要求：6.5.1

```
When the user is already playing music on the phone when the app is launched,
the app must not pause, resume, or stop the active music in the phone MediaQueue
by calling the Microsoft.Xna.Framework.Media.MediaPlayer class. 
```

那么，如何通过 c++ 应用程序通过此要求？我不能使用 XNA，因为许多消息来源都建议解决这个问题，而且我收到的媒体播放器界面实例无法知道我的进程之外发生了什么。

我以为我只是在每次用户开始请求他们允许播放音乐时向他们显示一个消息框，但即使是消息框也超出了 c++ 的范围。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:14:45.270

您将需要在[此处执行类似此答案的](https://stackoverflow.com/a/13828239/10893)操作。由于您无权访问消息框，因此您需要创建自己的 UI 来提示用户，但您需要提示用户通过认证。[我猜你可能会在这个构建演讲中](http://channel9.msdn.com/Events/Build/2012/3-049)找到一些关于如何处理这个问题的有用信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T11:30:55.257

正如您在链接中看到的：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184838%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184838%28v=vs.105%29.aspx)

要求 6.5.1 – 初始启动功能：

> “此要求仅适用于 Windows Phone OS 7.1 和 Windows Phone OS 8.0 XAML 应用程序。”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T01:56:28.787

鉴于你不能做一个“原生 C++ 应用程序”，而只能做一个带有 C++ 原生组件的 C#/XAML 应用程序，或者一个 C++/DirectX 应用程序（游戏），我不认为你说的是​​完全正确的.

C++ / DirectX 游戏需要满足不同的认证要求。

此外，XNA 在 WP8 上根本不可用，并且 XAudio2（在 C++ 中）不应该导致这个问题。

# java - 提供保存图像的选项

> ID：13933600
> 
> 赞同：0
> 
> 时间：2012-12-18T12:59:24.280
> 
> 标签：java, html, image

我的服务调用返回图像。

它返回 png 图像，并且它的 header 中的 content-type 为 image/jpeg ，它在同一页面中打开图像。我想为用户提供将该图像保存到磁盘的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:04:08.470

您需要`Content-Disposition`服务器响应中的标头

[例如](http://classicasp.aspfaq.com/general/how-do-i-prompt-a-save-as-dialog-for-an-accepted-mime-type.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:17:34.120

Content-Disposition 可以是内联的，将 content-disposition 指定为附件

```
response.setContentType("image/jpeg");
response.setHeader("Content-Disposition", "attachment; filename=" + imageName + ".jpg"); 
```

# ms-word - 如何在更改前后从文件生成跟踪更改？

> ID：13933602
> 
> 赞同：0
> 
> 时间：2012-12-18T12:59:28.047
> 
> 标签：ms-word

我有两个版本的 word 文档作为两个不同的文件。如何获得曲目更改版本？有没有办法比较它们并将它们合并为这两个文档的跟踪更改版本？

PS：MS Word 的比较工具似乎是一个对我不起作用的解决方案。我需要它的“跟踪更改”版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T05:34:03.290

首先，开启音轨改变

在“审阅”选项卡的“跟踪”组中，单击“跟踪更改”图像。

要将跟踪更改指示器添加到状态栏，请右键单击状态栏并单击跟踪更改。单击状态栏上的 Track Changes 指示器以打开或关闭 Track Changes。

注意如果“修订”命令不可用，您可能必须关闭文档保护。在“审阅”选项卡的“保护”组中，单击“保护文档”，然后单击“保护文档”任务窗格底部的“停止保护”。（您可能需要知道文档密码。）

现在，

在工具菜单上，单击跟踪更改。启用 Track Changes 功能后，TRK 会出现在文档底部的状态栏上。当您关闭更改跟踪时，TRK 会变暗。

通过插入、删除或移动文本或图形来进行所需的更改。您还可以更改格式。

编辑时跟踪更改

在文档中工作时，您可以轻松地进行和查看修订和评论。默认情况下，Microsoft Office Word 2007 使用气球来显示删除、注释、格式更改和已移动的内容。如果您想在线查看所有更改，您可以更改设置，以便跟踪的更改和评论以您想要的方式显示。

气球显示格式更改、注释和删除。注意 为了防止您无意中分发包含修订和批注的文档，Word 默认显示修订和批注。Final Showing Markup 是 Display for Review 框中的默认选项。

**编辑时跟踪更改**

打开要修改的文档。在“审阅”选项卡的“跟踪”组中，单击“跟踪更改”图像。要将跟踪更改指示器添加到状态栏，请右键单击状态栏并单击跟踪更改。单击状态栏上的跟踪更改指示器以打开或关闭跟踪更改。通过插入、删除、移动或格式化文本或图形来进行所需的更改。您还可以添加评论。

# c# - 如何在不使用 try-catch 的情况下检查路径是否有效？

> ID：13933607
> 
> 赞同：3
> 
> 时间：2012-12-18T12:59:39.890
> 
> 标签：c#, exception-handling, path, directory

我想检查一个文件夹是否存在，如果不存在则创建它。但我不知道提供的路径是否有效。当路径无效时，会发生以下情况。

```
string path = "this is an invalid path";

if (!Directory.Exists(path))
    Directory.CreateDirectory(path); //Exception thrown here 
```

如果您提供无效路径，它将引发`DirectoryNotFoundException`异常。

如何阻止此异常的发生？我不想使用try-catch。我想在异常发生之前检测到这个异常是否会发生。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T13:00:40.137

使用[Directory.Exists](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)方法检查文件夹是否存在

```
if(Directory.Exists(path))
{
  //Directory exists
}
else
{
 // doesn't exist
} 
```

记得包括`System.IO;`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-18T13:02:12.053

您的代码失败的解释是路径无效。文档说：

> **DirectoryNotFoundException**
> 
> 指定的路径无效（例如，它位于未映射的驱动器上）。

试图提前预测是否可以创建目录是一项工作的恶魔。您需要考虑安全性、操作系统名称规则和限制、文件系统名称规则和限制，以及驱动器是否已映射。可能还有更多的担忧。我不会考虑重新实现系统免费提供的功能。

无论如何，虽然您可以调用`Directory.Exists`，但您仍然需要允许抛出异常。如果文件系统在对 的调用`Directory.Exists`和随后的对 的调用之间发生变化`Directory.CreateDirectory`，则会引发异常。例如，如果另一个进程创建了您尝试创建的目录。诚然，这是一个不太可能发生的事件，但完全有可能。

总而言之，最好的选择是捕捉异常。俗话说，请求宽恕不如请求许可。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T14:24:21.557

为什么不想捕获（特定）异常？这被认为是一种很好的做法......无论如何，这些是我没有尝试/捕获的解决方案：

1.  解决方案：

    ```
    string path = "C:\test";
    if (!Directory.Exists(path) && path.IndexOfAny(Path.GetInvalidFileNameChars()) == -1)
    {
        Directory.CreateDirectory(path);
    } 
    ```

2.  解决方案：

    ```
    string path = "C:\test";
    var canCreate = true;
    foreach (var c in path.Where(Path.GetInvalidFileNameChars().Contains))
    {
        canCreate = false;
    }

    if (canCreate && !Directory.Exists(path))
    {
        Directory.CreateDirectory(path);
    } 
    ```

3.  解决方案：

    ```
    if (path.Any(c => Path.GetInvalidFileNameChars().Contains(c)) && !Directory.Exists(path))
    {
        Directory.CreateDirectory(path);
    } 
    ```

请注意，此代码仍然可能失败...例如考虑 SecurityExeption （您是否有凭证在那里创建目录？！？

另请注意，在您使用 Exists() 进行测试之后但在调用 CreateDirectory() 之前，仍然有一个（很小的）机会（由另一个进程/线程/...）创建目录。这是两个调用，在查询/修改文件系统时它们不是原子的（一起）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:15:53.530

您还可以使用`Path.GetInvalidFileNameChars()`检查提供的目录名称是否对*新*目录名称有效：

```
// Directory.Exists will return false because path is not even valid
var path = "1:1 comparison?";
var firstBad = Path.GetInvalidFileNameChars().Cast<char?>()
                   .FirstOrDefault(c => path.Contains(c.Value));
if (firstBad != null)
    Console.WriteLine("Char '{0}' is invalid for a directory name", firstBad.Value); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T06:31:27.670

试试这个

string path = "这是一个无效的路径";

```
 if (Path.IsPathRooted(path)
        {
            Directory.CreateDirectory(path); 
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-10T09:24:58.177

我认为测试路径是否有效并且文件是否存在而不在 C# 中引发异常的最简单方法是[`PathFileExists`](https://msdn.microsoft.com/en-us/library/windows/desktop/bb773584(v=vs.85).aspx)直接在 shlwapi.dll 中调用非托管函数。

```
[DllImport("shlwapi.dll", EntryPoint = "PathFileExistsW",  SetLastError = true, CharSet = CharSet.Unicode)]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool PathFileExists([MarshalAs(UnmanagedType.LPTStr)]string pszPath); 
```

请注意，正如大卫在[他的回答](https://stackoverflow.com/a/13933657/127670)中所写，当您尝试创建目录时，您可能仍然会遇到异常。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-18T13:03:33.873

您可以使用单个 if-else 语句

```
if(!Directory.Exists(path))
   Directory.CreateDirectory(path)
else
   //Show user a custom error message 
```

# sql - 可以监视/模拟 Sql Server 用户定义函数吗？

> ID：13933614
> 
> 赞同：2
> 
> 时间：2012-12-18T13:00:04.393
> 
> 标签：sql, tsql, unit-testing

是否可以使用 T-SQL 模拟/监视函数？我找不到任何提及它的东西。我正在考虑使用 SpyProcedure 作为指导创建自己的实现（如果不存在实现）。有人在这方面取得过成功吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T21:55:29.187

在 SQL Server 中，函数不能有副作用。这意味着，在您的测试中，您可以将内部函数替换为返回固定结果的 on，但无法将过去的参数记录到函数中。

有一个例外：如果函数返回一个字符串并且该字符串不必遵循特定格式，您可以连接传入的参数，然后稍后断言返回的值包含所有正确的值，但是是一个非常特殊的情况，通常不可能。

要伪造一个函数，只需删除或重命名原始函数并在测试中创建自己的函数。我会将这段代码放入一个辅助函数中，因为它可能会从多个测试中调用。

# objective-c - NSBundle的加载和卸载

> ID：13933617
> 
> 赞同：2
> 
> 时间：2012-12-18T13:00:21.777
> 
> 标签：objective-c, cocoa, nsbundle

我正在为我的应用程序构建可插拔接口。我坚持使用插件的更新机制。

这是让我感到困惑的代码。

```
- (void) unloadBundle{
    [_pluginInstance release], _pluginInstance = nil;
    [[self bundle] unload];
    [_bundle release], _bundle = nil;
}

- (void) loadBundleWithURL:(NSURL *)bundleURL{
    NSBundle *newBundle = [NSBundle bundleWithURL:bundleURL];
    if (newBundle){
        [self setBundle:newBundle];
        [self setPluginInstance:[[[[self.bundle principalClass] alloc] init] autorelease]];

        NSLog(@"New bundle: %@", self.bundle);
        NSLog(@"New bundle's principal class %@", [self.bundle principalClass]);
        NSLog(@"Principal class' bundle is %@", [NSBundle bundleForClass:[self.bundle principalClass]]);
        NSLog(@"Plugin's class %@", [self.pluginInstance class]);
    }
} 
```

这些是我的插件主体类包装器的方法。我只是调用`unloadBundle`，然后`loadBundleWithURL`使用新版本捆绑包的 URL。执行时，它将以下内容记录到控制台中：

```
New bundle: NSBundle </Users/prudnikov/Work/Projects/***/Name.pluginextension> (loaded)
New bundle's principal class MyPluginClass
Principal class' bundle is NSBundle </Users/prudnikov/Library/Application Support/MyApp/PlugIns/Name.pluginextension> (not yet loaded)
Plugin's class MyPluginClass 
```

意味着我从新捆绑包中获取主体类，获取它的捆绑包`[NSBundle bundleForClass:]`并且它是旧捆绑包。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:00:41.120

这种情况下的问题是我忘记在不同的地方卸载捆绑包。我有一种方法可以验证该包是一个有效的插件包。

调用`principalClass`会自动加载包。所以，需要调用`unload`。

# c# - 将图像附加到剪贴板

> ID：13933631
> 
> 赞同：2
> 
> 时间：2012-12-18T13:00:58.043
> 
> 标签：c#, wpf, image, charts, bitmapsource

我有`Chart`具有`CopyToClipboard(size)`功能的第三方控件。同样的方法`BitMapSource`也返回。

所以我的需要是：将另一个附加`BitMapSource`到剪贴板。如何实现此功能？

这两个图像之间的相似性可能是相同的宽度和不同的高度。我必须在另一个下面附加一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:24:52.643

如果您不介意将图像保存到磁盘，可以这样做：

```
string[] listOfFileNames = new string[]{@"C:\DSC00761.JPG",@"C:\DSC00758.JPG"};
Clipboard.Clear();
Clipboard.SetData("FileDrop", listOfFileNames);
Clipboard.GetDataObject().GetFormats().Dump(); 
```

其中 listOfFileNames 被文件的临时名称替换。退出应用程序时清除剪贴板并删除文件。

# android - In-App Billing v3，找不到 bindService() Intent

> ID：13933632
> 
> 赞同：5
> 
> 时间：2012-12-18T13:01:00.857
> 
> 标签：android, in-app-purchase, in-app-billing

我第一次使用 Google for Android 的应用内结算。但是，如果用户没有互联网连接或没有安装 google 框架（例如使用自定义 rom），并且可能在其他情况下（如错误/旧市场版本等）此方法（在提供的 IabHelper 类中）：

```
 mContext.bindService(new Intent("com.android.vending.billing.InAppBillingService.BIND"),
                         mServiceConn, Context.BIND_AUTO_CREATE); 
```

不起作用，也没有建立服务。使用“活动管理器”中的小调试信息：

```
12-17 19:58:31.184: W/ActivityManager(76): Unable to start service Intent { act=com.android.vending.billing.InAppBillingService.BIND }: not found 
```

有没有人找到任何方法以有意义的方式“捕捉”这个错误，或者有任何解决方法来检查 Intent/Package 是否可用？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T13:10:57.050

啊，不久之后自己找到了答案：

您必须通过实施此处建议的方法来检查意图接收器是否可用：[我可以使用此意图 - 博客文章][1]

（编辑）但是，此方法需要进行一些重大更改才能适用于计费服务，因为原始方法仅检查默认意图，这不是我们想要的。

但是，我的实现如下所示，并且似乎可以正常工作，至少在我测试的那些设备、规格等上：（仅针对 V3 OF IN APP BILLING 进行了测试）

```
public static boolean isBillingAvailable(Context context) {
    final PackageManager packageManager = context.getPackageManager();
    final Intent intent = new Intent("com.android.vending.billing.InAppBillingService.BIND");
    List<ResolveInfo> list = packageManager.queryIntentServices(intent, 0);
    return list.size() > 0;
} 
```

# c# - 带有 Guid 的空 LINQ 异常的左外连接

> ID：13933635
> 
> 赞同：0
> 
> 时间：2012-12-18T13:01:12.287
> 
> 标签：c#, linq, entity-framework, guid

我正在尝试在 linq 中对一个列表进行左外连接，因此如果我有一个带有 {1,2,3,4} 的列表和另一个带有 {1,2,3,5} 的列表，我想要 { 4}。

![在此处输入图像描述](../Images/e0a640f7f201145500234bf559fe731f.png)

```
IEnumerable<AlertChangeSet> listToClear = from a in AlertsCached
                                                  join b in loadedAlerts on a.AlertId equals b.AlertId into c
                                                  from b in c.DefaultIfEmpty()
                                                  select new AlertChangeSet()
                                                       {
                                                           AlertId = b.AlertId == Guid.Empty ? a.AlertId : Guid.Empty

                                                       };
  if (listToClear.Any())
        {
            foreach (AlertChangeSet alertChangeSet in listToClear)
            {
                Guid a = alertChangeSet.AlertId;
                //SystemMonitoringService.ClearAlertAsync(alertChangeSet.AlertId.ToString(), null);
            }
        } 
```

当我运行这段代码时，我得到了这个异常：

> 测试方法 Tgw.Systems.Alerting.Server.Test.ConfigurationTests.UpdateCacheWith2recordsSameIdWorking 抛出异常：System.NullReferenceException：对象引用未设置为对象的实例。在 Tgw.Wcs.Alerting.MonitoringAddIn.Oms.Wcf.OmsWcfSystemMonitor.b__c(<>f__AnonymousType0 `2 <>h__TransparentIdentifier2, AlertChangeSet b) in OmsWcfSystemMonitor.cs: line 255 at System.Linq.Enumerable.<SelectManyIterator>d__31`3.MoveNext() 在 Tgw.Wcs.Alerting.MonitoringAddIn.Oms.Wcf.OmsWcfSystemMonitor.UpdateAlertsFromCache(IList`1 loadedAlerts) 在 OmsWcfSystemMonitor。 cs：ConfigurationTests.ServerCoreTests.cs 中 Tgw.Systems.Alerting.Server.Test.ConfigurationTests.UpdateCacheWith2recordsSameIdWorking() 的第 275 行：第 243 行

我认为问题是Guid！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:32:05.610

尝试

```
AlertId = b.AlertId ?? a.AlertId ?? Guid.Empty; 
```

因为 b 可以是`null`您无法将其与 Guid.Empty 进行比较

`??`是空合并运算符。这意味着该语句将使用第一个非空值进行赋值。

//**编辑**：

你说的对。我没有测试它。

```
AlertId = ( b == null ) ? a.AlertId : Guid.Empty; 
```

这在这里应该工作。Guid 是一个特例，因为它在设计上不能为空。

# android - 未绑定到 TTS 引擎

> ID：13933637
> 
> 赞同：3
> 
> 时间：2012-12-18T13:01:14.713
> 
> 标签：android, text-to-speech, google-text-to-speech

我正在尝试制作口语词典。

LogCat 显示*"Successfully bound to com.android.tts"*但是当`Speak`点击按钮时，它显示*"failed speak : not bound to tts engine"*。

但是在 AVD 上运行流畅，为什么？

**这是我的 goTranslator 类：**

```
package sk.team;

import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioButton;
import android.speech.tts.TextToSpeech;
import android.widget.Toast;
import android.content.Intent;
import android.content.res.Configuration;

import java.util.Locale;

public class goTranslator extends Activity implements TextToSpeech.OnInitListener{

    private int MY_DATA_CHECK_CODE = 0;
    private TextToSpeech tts;
    private SQLiteDatabase db = null;
    private Cursor translatorCursor = null;
    private EditText txtSearch;
    private EditText txtResult;
    private AppDatabase dbtranslator = null;
    private RadioButton Eng,Ind;
    private Button Translate,Speak;
    public static final String ENGLISH = "english";
    public static final String INDONESIA = "indonesia";

    public void onInit(int status) { 
        if (status == TextToSpeech.SUCCESS) {
            Toast.makeText(goTranslator.this,
                    "Text-To-Speech engine is initialized", Toast.LENGTH_LONG).show();
        } else if (status == TextToSpeech.ERROR) {
            Toast.makeText(goTranslator.this,
                    "Error occurred while initializing Text-To-Speech engine",
                    Toast.LENGTH_LONG).show();
        }
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == MY_DATA_CHECK_CODE) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                tts = new TextToSpeech(this, this);
            } else {
                Intent installIntent = new Intent();
                installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installIntent);
            }
        }
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        dbtranslator = new AppDatabase(this);
        db = dbtranslator.getWritableDatabase();
        setContentView(R.layout.main);

        dbtranslator.createTable(db);
        dbtranslator.generateData(db);

        Eng = (RadioButton) findViewById(R.id.Eng);
        Ind = (RadioButton) findViewById(R.id.Ind);
        Translate = (Button) findViewById(R.id.Translate);
        Speak = (Button) findViewById(R.id.Speak);
        txtSearch = (EditText) findViewById(R.id.txtSearch);
        txtResult = (EditText) findViewById(R.id.txtResult);

        Intent checkIntent = new Intent();
        checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkIntent, MY_DATA_CHECK_CODE);

        Speak.setOnClickListener(new View.OnClickListener() {   

            public void onClick(View v) {
                String text = txtResult.getText().toString();

                if (text!=null && text.length()>0) {
                    Toast.makeText(goTranslator.this, "Saying: " + text,
                            Toast.LENGTH_LONG).show();
                    tts.speak(text, TextToSpeech.QUEUE_ADD, null);
                }
            }
        });
    }

    public void Translate (View view) {
        if (view == Translate) {
            if (Eng.isChecked()) {
                txtSearch.setHint("Masukkan Kata");

                Locale loc = new Locale ("es_ES");
                tts.setLanguage(loc);

                String result = "";
                String englishword = txtSearch.getText().toString().trim().toLowerCase();
                translatorCursor = db.rawQuery("SELECT ID, ENGLISH, INDONESIA "
                        + "FROM translator where ENGLISH='" + englishword
                        + "' ORDER BY ENGLISH", null);

                if (translatorCursor.moveToFirst()) {
                    result = translatorCursor.getString(2);
                    for (; !translatorCursor.isAfterLast(); translatorCursor.moveToNext()) {
                        result = translatorCursor.getString(2);
                    }
                }
                if (result.equals("")) {
                    result = "Kata Tidak Tersedia";
                }
                txtResult.setText(result);
            }

            if (Ind.isChecked()) {
                txtSearch.setHint("Enter Word");

                Locale loc = new Locale ("en_US");
                tts.setLanguage(loc);

                String result = "";
                String indonesiaword = txtSearch.getText().toString().trim().toLowerCase();
                translatorCursor = db.rawQuery("SELECT ID, ENGLISH, INDONESIA "
                        + "FROM translator where INDONESIA='" + indonesiaword
                        + "' ORDER BY INDONESIA", null);

                if (translatorCursor.moveToFirst()) {
                    result = translatorCursor.getString(1);
                    for (; !translatorCursor.isAfterLast(); translatorCursor.moveToNext()) {
                        result = translatorCursor.getString(1);
                    }
                }
                if (result.equals("")) {
                    result = "Result Not Found";
                }
                txtResult.setText(result);
            }
        }
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        setContentView(R.layout.main);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();

        if (tts != null) {
            tts.stop();
            tts.shutdown();
        }

        if (translatorCursor != null) {
            translatorCursor.close();
            db.close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:13:06.633

```
Log.w(TAG, method + " failed: not bound to TTS engine"); 
```

我造成的

```
mServiceConnection; 
```

为空

您的测试设备是否缺少互联网连接？

# android - 使用 stORM 的数据库使用（Android SQLite 的 ORM 轻量级 ORM）

> ID：13933639
> 
> 赞同：0
> 
> 时间：2012-12-18T13:01:19.183
> 
> 标签：android, database

为了理解 David Chandler 对 stORM 的使用，我构建了一个示例应用程序来插入和从数据库中获取值。

项目是这样的：

我有一个 EditText，我在其中输入名称并单击按钮（插入）。这应该将名称插入数据库。

我有另一个按钮（FETCH），它应该在单击并打印到 Logcat 时从数据库中获取所有名称。

就这样。

我已经完成了项目设置并包含了所有需要的 .jar 文件。插入工作正常，但我不知道如何获取数据库中的名称并将其显示到 Logcat。

我执行插入和获取的活动。

```
package com.example.stormdemo;

import java.util.Arrays;
import java.util.Iterator;
import java.util.List;

import com.example.stormdemo.dao.PersonDao;
import com.example.stormdemo.dao.PersonTable;

import android.os.Bundle;
import android.app.Activity;
import android.content.ContentValues;
import android.database.Cursor;
import android.text.Editable;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {

    long my_id = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final EditText e_name = (EditText) findViewById(R.id.editText1);

        final PersonDao dao = new PersonDao(this);
        final Person newPerson = new Person();

        final PersonTable pt = new PersonTable();

        Button insert = (Button) findViewById(R.id.buttonInsert);
        Button fetch = (Button) findViewById(R.id.buttonFetch);
        Button clear = (Button) findViewById(R.id.buttonClear);

        insert.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                String name = e_name.getText().toString();

                newPerson.setName(name);
                System.out.println(name);

                long newPersonId = dao.insert(newPerson);

                my_id = newPersonId;

                System.out.println(my_id);

            }
        });

        fetch.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Person p = dao.get(my_id);

                List<Person> list = dao.listAll();

                int ind = list.indexOf(list.iterator());

                System.out.println(p.getName());
            }
        });

        clear.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                dao.deleteAll();

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T03:50:33.113

[http://www.youtube.com/watch?v=6fU17zdW9Ks](http://www.youtube.com/watch?v=6fU17zdW9Ks) 我正在做几乎同样的事情。我想将一个 android Location 类型存储到数据库中，上面的链接是一个好的开始，但我的问题是你存储的文本是字符串还是 XML 按钮？Storm 允许您编写自定义类型转换器，但我还没有弄清楚。

# vim - Vim - 从当前光标位置拉到行首

> ID：13933651
> 
> 赞同：17
> 
> 时间：2012-12-18T13:01:57.387
> 
> 标签：vim

在 VIM 中，我知道我们可以使用 yank 直到行尾，`y$`但是如果我的文本是`abcdefg`并且我的光标位于**'g'**并且我输入`y^`的行将被复制而没有**g**。我的想法是在没有换行符的情况下复制整行，任何类似的操作都可以。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T13:13:18.567

0y$$ - 复制没有换行符的行并将光标移回末尾

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T13:17:38.377

使其成为视觉选择，然后将光标下的字符包括在内：

```
v0y 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T15:11:34.273

如果所有字符确实在一起并且符合“vim 语句”，则可以对`sentence`对象使用视觉选择。在这种情况下， A`sentence`会匹配`abcdefg`，即使它不是从行首开始，也不包括行尾：

```
visy 
```

如果你想包含尾随空格，你可以使用`a`而不是`i`（“内部”的助记符）：

```
vasy 
```

这种方法的唯一问题（这可能是您不想要的）是它不会包含*前导*空格。所以如果你有类似的东西：

```
 abcdefg 
```

选择将不包括前导的空白块，只是`abcdefg`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-19T01:32:20.963

事实证明，拉到行尾是你会发现自己经常做的事情。因此，以下映射非常流行。

```
noremap Y y$ 
```

它是如此受欢迎，它甚至被列在下面`:h Y`！

如果您使用此映射，您的问题的答案将是`0Y`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T15:27:40.763

```
0yg_ 
```

是另一种选择。

但视觉模式更好：

```
v0y
v^y 
```

# c++ - N 个并发读者和 1 个生产者的成语或模式

> ID：13933653
> 
> 赞同：0
> 
> 时间：2012-12-18T13:01:59.910
> 
> 标签：c++, concurrency, c++11

使用 C++11 标准库（在最终的唯一帮助下`boost::thread`）是否有一种干净的方法来实现 N 个读者 - 1 个生产者解决方案，其中所有读者，一旦由生产者同时通知（`std::condition_variable::notify_all()`例如） ，保证在生产者最终第二次进入其临界区之前进入其临界区。换句话说，所有被通知的读者必须观察到共享资源的相同状态。一旦生产者通知了 N 个读者，它就不能修改共享资源，直到所有 N 个读者都读完。请注意， boost::barrier 并不是我真正需要的，因为我事先不知道 N 。N 可能因一个通知而异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:16:56.707

您可以使用[原子计数器](http://en.cppreference.com/w/cpp/atomic)，并从生产者线程进行一些轮询。

当柜台到达`N`或`0`（由你决定）时，生产者开始工作并生产它需要生产的任何东西。在通知条件变量之前，生产者将计数器设置为`0`（或`N`）。

当阅读器完成时，它只是增加（或减少）计数器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:21:39.457

你所描述的叫做[障碍](http://www.boost.org/doc/libs/1_52_0/doc/html/thread/synchronization.html#thread.synchronization.barriers)

# c# - 将 UTC DateTime 转换为 DateTimeOffset

> ID：13933654
> 
> 赞同：30
> 
> 时间：2012-12-18T13:02:01.777
> 
> 标签：c#, .net, datetime, datetimeoffset

我需要将`UTC`日期字符串转换为`DateTimeOffsets`.

**这必须使用与计算机时区不同的时区。** 例如，当前计算机时区是 +02:00，但我想创建一个偏移量为 -4:00 的 DateTimeOffset。

我已经在 stackoverflow 上阅读了很多问题，但没有一个能解决我的问题。

这就是我需要做的：

**输入：** “2012-11-20T00:00:00Z”

**输出：** DateTimeOffset 与：

*   UtcDateTime **2012-11-20 00:00**
*   定义时区的正确 Utc 偏移量（在本例中为 01:00）
*   LocalDateTime: **2012-11-20 01:00** (= UtcDateTime + Offset)

当然必须考虑夏令时。

**编辑**：为了让事情更清楚，请尝试完成以下代码片段：

```
DateTimeOffset result;
const string dateString = "2012-11-20T00:00:00Z";
var timezone = TimeZoneInfo.FindSystemTimeZoneById("W. Europe Standard Time"); //this timezone has an offset of +01:00:00 on this date

//do conversion here

Assert.AreEqual(result.Offset, new TimeSpan(1, 0, 0));  //the correct utc offset, in this case +01:00:00
Assert.AreEqual(result.UtcDateTime, new DateTime(2012, 11, 20, 0, 0, 0)); //equals the original date
Assert.AreEqual(result.LocalDateTime, new DateTime(2012, 11, 20, 1, 0, 0)); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-14T16:45:58.357

这是您正在寻找的解决方案：

```
const string dateString = "2012-11-20T00:00:00Z";
TimeZoneInfo timezone = TimeZoneInfo.FindSystemTimeZoneById("W. Europe Standard Time"); //this timezone has an offset of +01:00:00 on this date

DateTimeOffset utc = DateTimeOffset.Parse(dateString);
DateTimeOffset result = TimeZoneInfo.ConvertTime(utc, timezone);

Assert.AreEqual(result.Offset, new TimeSpan(1, 0, 0));  //the correct utc offset, in this case +01:00:00
Assert.AreEqual(result.UtcDateTime, new DateTime(2012, 11, 20, 0, 0, 0)); //equals the original date
Assert.AreEqual(result.DateTime, new DateTime(2012, 11, 20, 1, 0, 0)); 
```

请注意，您错误地测试了该`.LocalDateTime`属性 - 它*总是*会将结果转换为计算机的本地时区。您只需要该`.DateTime`属性即可。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T13:34:28.140

这是你想要的吗：

```
[Test]
public void ParseUtcDateTimeTest()
{
    DateTime dateTime = DateTime.Parse("2012-11-20T00:00:00Z");
    Assert.AreEqual(new DateTime(2012, 11, 20, 01, 00, 00), dateTime);
    DateTimeOffset dateTimeOffset = new DateTimeOffset(dateTime);
    Assert.AreEqual(new TimeSpan(0, 1, 0, 0), dateTimeOffset.Offset);
} 
```

*   请注意，我的断言在瑞典 (CET) 有效
*   有几个重载[`DateTime.Parse()`](http://msdn.microsoft.com/en-us/library/6fw7727c.aspx)

这对您的转换有用吗：

```
[Test]
public void ConvertTimeTest()
{
    DateTime dateTime = DateTime.Parse("2012-11-20T00:00:00Z");
    TimeZoneInfo cstZone = TimeZoneInfo.FindSystemTimeZoneById("Central Standard     Time");
    DateTime convertedTime = TimeZoneInfo.ConvertTime(dateTime, cstZone);
    Assert.AreEqual(new DateTime(2012, 11, 19, 18, 00, 00), convertedTime);
    TimeSpan baseUtcOffset = cstZone.BaseUtcOffset;
    Assert.AreEqual(new TimeSpan(0, -6, 0, 0), baseUtcOffset);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-18T13:41:09.553

```
const String dateString = "2012-11-20T00:00:00Z"; 
var offsetDate = DateTimeOffset.Parse(dateString); 
var offsetDate2 = DateTime.Parse(dateString); 
```

输出是

```
offsetDate  {20-11-2012 0:00:00 +00:00}    System.DateTimeOffset
offsetDate2 {20-11-2012 1:00:00}           System.DateTime 
```

# javascript - 在线 JS 编辑器以可读格式显示 JS 代码

> ID：13933655
> 
> 赞同：0
> 
> 时间：2012-12-18T13:02:00.970
> 
> 标签：javascript

在尝试通过 FF 中的 FireBug 调试问题时，我找到了一个运行 100 行且没有新行、空格和缩进的 JS。虽然我对 JS 有一点了解，但是阅读这段 JS 代码简直是不可能的。

```
Math.random().toString().replace(/90\./,"");this.res=[];this.req=[];this.ret=null;this.retry=true;this.timeout=null;this.getDuration=function(precision){precision=!isNaN(precision)?(3-precision):0;};..........................and so on non-stop.... 
```

FireBug 中有没有办法或通过在线工具将此 JS 代码格式转换为适当的人类可读格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:05:34.473

尝试[jsBeautifier](http://jsbeautifier.org/)。这是一个非常酷的工具，并且是基于网络的，所以不需要下载。

如果您愿意，您还可以找到浏览器扩展下载列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:14:53.297

您看到的是经过混淆/缩小的 JavaScript 代码。

这是作为预生产步骤完成的，以减少网站访问者的脚本下载大小。

您可以选择使用更具可读性的内容（为了便于使用）：

1.  如果您可以访问原始 JavaScript 文件并且可以修改网站，那是您最好的选择
2.  如果您可以访问源地图（[http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)），您可以告诉浏览器使用这些
3.  按照@AlexMihai 的建议运行离线美化器

# css - 如何强制 CQ5.5 忽略 CSS data-uri-schemes？

> ID：13933658
> 
> 赞同：5
> 
> 时间：2012-12-18T13:02:23.610
> 
> 标签：css, base64, aem, data-uri

我正在尝试使用 data-uri-scheme 将自定义字体包含到 css 中。CQ5（我使用的是 5.5 版）正在将 clientlib 目录中的路径添加到带有 data-uri-scheme 字体数据的 css 文件所在的位置。

因此，不要仅仅忽略 css 属性：

```
@font-face {
  font-family: 'CustomFont';
  src: url(data:application/x-font-woff;...
  ...
} 
```

CQ5 执行以下操作：

```
@font-face {
  font-family: 'CustomFont';
  src: url(desktop/css/data:application/x-font-woff;...
  ...
} 
```

这是 CQ5.5 中的错误还是我可以添加/做一些事情来**防止添加“桌面/css”**？

结果是，我得到 404 HTTP 状态，因为字体“未找到”。

**[更新]**：

css 文件包含在`base.jsp`html`<head>`部分中。

```
<link rel="stylesheet" 
    href="/etc/designs/myproject/clientlib/desktop.css" type="text/css"/ > 
```

地点`base.jsp`：

```
/apps/myproject/pages/base/base.jsp 
```

地点`css.txt`：

```
/etc/designs/myproject/clientlib/desktop/css.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T23:00:03.070

它看起来像一个错误。CSS 通过一个方法传递，该方法专门在连接在一起的 CSS 文件中查找 url('{}') 以创建组合的 CSS 文件 - CssFileBuilder#resolveUrl(String[], String[], String)。此方法似乎没有考虑数据方案，而是仅在 URL 长度为 0、以斜杠 (/) 开头或匹配模式“^[A-Za-z][ A-Za-z0-9+\-.] *://.* "（有效的外部链接）。我的假设是它这样做是为了修改相对 url('{}') 值，但它们没有考虑数据方案。

我建议使用 Adob​​e 开一张 Daycare 票以更新此方法以支持 data-uri-scheme。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:52:55.217

解决 CQ5（通常很有帮助）链接重写的两种策略：

(1) 将@font-face 代码放在CQ5 为您组装的外部.css 文件中。除了使用[<cq:includeClientLib>](http://dev.day.com/docs/en/cq/current/developing/components.html#%3Ccq%3aincludeClientLib%3E)标记将其包含在您的 HTML 中，您可能会发现您必须显式编码 <link> 标记，例如：

```
<link rel="stylesheet" href="<%= currentDesign.getPath() %>/clientlibs/themes/default.css" type="text/css" media="screen" /> 
```

(2) 使用 document.write() 调用注入@font-face 代码：

```
<script type="text/javascript">
    document.write("@font-face { font-family: 'CustomFont'; src: url(data:application/x-font-woff;
    ...}");
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T14:10:01.407

这是一个错误，将在 5.6 中修复。直接包含单个 css 文件（如前所述）避免了 clientlib 重写，否则我不知道 clientlib 中的解决方法。

原因是客户端库正在重写相对路径，因为基础从单个 css 文件更改为连接的客户端库 css。“数据：” uris 在这里根本没有被正确考虑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T17:58:40.950

在没有检查导致错误重写的原因的情况下，我认为它是`Day CQ Link Checker Service`.

您可能想要添加一个`Special Link Prefix`or`Special Link Pattern`来防止此模式被识别为链接并被重写。

因此，只需将您的自定义链接检查器配置添加到 /apps/.. （libs 下相应配置的覆盖）并进行上述更改，您应该没问题。

# iphone - 是否有任何私有 api 来检测 iPhone 上不同应用程序对相机的访问？

> ID：13933662
> 
> 赞同：1
> 
> 时间：2012-12-18T13:02:43.373
> 
> 标签：iphone, ios, iphone-privateapi

我需要实现一个监控相机使用的应用程序，即哪个应用程序在 iPhone 上使用了相机（启动/停止）。

我的应用程序将使用苹果的 voip 和导航器后台多任务功能在后台运行。

我可以使用私有 api，因为我的客户在 appstore 上不需要这个应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:36:31.460

看看这个私有框架： [https ://github.com/masbog/PrivateFrameworkHeader-iOS-iPhone-5.-/tree/master/ImageCapture.framework](https://github.com/masbog/PrivateFrameworkHeader-iOS-iPhone-5.-/tree/master/ImageCapture.framework)

它有一些有趣的类（包括锁定属性的 ICCameraProperties）

# restkit - RestKit 0.2 不记录

> ID：13933669
> 
> 赞同：1
> 
> 时间：2012-12-18T13:03:03.070
> 
> 标签：restkit, libcomponentlogging

我正在更新我的应用程序以使用 RestKit 0.2pre3，但在这个过程中我丢失了 RestKit 提供的日志系统，它不再显示任何内容。我使用 cocoapods 来安装 RestKit。

这是我的 Podfile

```
platform :ios , '5.1'

pod 'SSPullToRefresh'
pod 'MBProgressHUD'
pod 'Facebook-iOS-SDK'
pod 'TestFlightSDK'
pod 'SDWebImage'
pod 'KISSmetrics'
pod 'CustomBadge'
pod 'GoogleAnalytics-iOS-SDK'
pod 'JSONKit'

pod 'LibComponentLogging-Core'
pod 'LibComponentLogging-LogFile'
pod 'LibComponentLogging-qlog'
pod 'LibComponentLogging-pods'
pod 'RestKit/Testing'
pod 'RestKit'

pod 'OHAttributedLabel' 
```

而且，当然，在我的代码中，我正在调用

```
RKLogConfigureByName("RestKit", RKLogLevelTrace);
RKLogConfigureByName("RestKit/Network", RKLogLevelTrace);
RKLogConfigureByName("RestKit/CoreData", RKLogLevelDebug); 
```

我什至可以发出成功的请求并获取映射的对象，但我无法看到我的服务器返回了什么、映射过程是如何执行的或其他任何事情，这是至关重要的。

我认为问题在于 LCL 中的某些内容配置错误，但我找不到任何关于它的线索。

问题可能出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:59:20.800

经过长时间的调试，我发现 LCL 现在带有一组默认配置，在 LCLLogFileConfig.h 上我有：

```
// Tell LCLLogFile whether it should mirror the log messages to stderr.
#define _LCLLogFile_MirrorMessagesToStdErr /* (BOOL) */                        \
    NO 
```

我将其设置为**YES**，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T20:23:05.680

此行为是由 Podfile 中的以下 2 个 pod 引起的：

```
pod 'LibComponentLogging-pods'
pod 'LibComponentLogging-LogFile' 
```

`LibComponentLogging-pods`pod 导致 RestKit 的日志记录与通过 Podfile 安装的 LibComponentLogging 文件集成，例如，RestKit 的日志组件现在可以通过标准...`lcl_configure`配置函数进行配置，RestKit 将使用通过 Podfile 配置的日志写入器（而不是其内置的日志编写器）。

`LibComponentLogging-LogFile`pod 为 LibComponentLogging 选择基于文件的日志写入器。默认情况下，此日志写入器不会将其消息镜像到 stderr。`_LCLLogFile_MirrorMessagesToStdErr`in`LCLLogFileConfig.h`可用于更改此行为。

# c# - C# 对象到 MySql - 反向对象工厂

> ID：13933670
> 
> 赞同：0
> 
> 时间：2012-12-18T13:03:04.553
> 
> 标签：c#, mysql, objectfactory

我正在使用以下内容从数据库查询中创建对象：

```
public static T Query<T>(this MySqlConnection conn, string query) where T : new()
    {
        T obj = default(T);
        conn.Open();
        using (MySqlCommand command = new MySqlCommand(query, conn))
        {
            using (MySqlDataReader reader = command.ExecuteReader())
            {
                while (reader.Read())
                {
                    obj = new T();

                    PropertyInfo[] propertyInfos;
                    propertyInfos = typeof(T).GetProperties();

                    for (int i = 0; i < reader.FieldCount; i++)
                    {
                        var name = reader.GetName(i);

                        foreach (var item in propertyInfos)
                        {
                            if (item.Name.Equals(name, StringComparison.InvariantCultureIgnoreCase) && item.CanWrite)
                            {
                                item.SetValue(obj, reader[i], null);
                            }
                        }

                    }
                }
            }
        }
        conn.Dispose();

        return obj;
    } 
```

我知道那里的图书馆和使用 linq 等。但我真正追求的是上面的有效反转。我想将它传递给一个对象并将其插入数据库但无法弄清楚：

我有以下但无法获取对象的值来构建插入查询：

```
public static T Insert<T>(this MySqlConnection conn) where T : new()
    {
        string query = "INSERT INTO " + typeof(T).Name;
        string fields = "(";
        string values = "(";

        T obj = default(T);
        conn.Open();
        using (MySqlCommand command = conn.CreateCommand())
        {
            obj = new T();

            PropertyInfo[] propertyInfos;
            propertyInfos = typeof(T).GetProperties();

            command.CommandText = query;
            command.ExecuteNonQuery();
        }
        conn.Close();

        return obj;

    } 
```

帮助表示赞赏。我只想要一个从传递的对象构建的插入查询。第一部分适用于以下类以从属性表中进行选择：

```
public class Property : ManagedObject
{
    private int id; //(most sites the property will have a unique ID)
    private string address;
    private string city;
    private string state;
    private string zipCode;
    private string propertyUrl;
    private string status; //Status of the Property (most have that option, and it either says “in contract” or “price reduced” (most sites will have this don’t worry about the one that don’t)
    private Propertytype type;

    private double price;
    private double squareFeet;

    private DateTime listDate; //(date it first appeared on the site or if one is given, that date)
    private DateTime yearBuilt;

    private List<PriceDrop> priceDrops;

    public Property()
    {
        priceDrops = new List<PriceDrop>();
    }

    public int ID
    {
        get { return this.id; }
        set
        {
            this.CheckPropertyChanged<int>
            ("ID", ref this.id, ref value);
        }
    }

    public string Address
    {
        get { return this.address; }
        set
        {
            this.CheckPropertyChanged<string>
            ("Address", ref this.address, ref value);
        }
    }

    public string City
    {
        get { return this.city; }
        set
        {
            this.CheckPropertyChanged<string>
            ("City", ref this.city, ref value);
        }
    }

    public string State
    {
        get { return this.state; }
        set
        {
            this.CheckPropertyChanged<string>
            ("State", ref this.state, ref value);
        }
    }

    public string ZipCode
    {   
        get { return this.zipCode; }
        set
        {
            this.CheckPropertyChanged<string>
            ("ZipCode", ref this.zipCode, ref value);
        }
    }

    public string PropertyUrl
    {   
        get { return this.propertyUrl; }
        set
        {
            this.CheckPropertyChanged<string>
            ("PropertyUrl", ref this.propertyUrl, ref value);
        }
    }

    public string Status
    {   
        get { return this.status; }
        set
        {
            this.CheckPropertyChanged<string>
            ("Status", ref this.status, ref value);
        }
    }

    public Propertytype Type
    {
        get { return this.type; }
        set
        {
            this.CheckPropertyChanged<Propertytype>
            ("Type", ref this.type, ref value);
        }

    }

    public double Price
    {
        get { return this.price; }
        set
        {
            this.CheckPropertyChanged<double>
            ("Price", ref this.price, ref value);
        }
    }

    public double SquareFeet
    {   
        get { return this.squareFeet; }
        set
        {
            this.CheckPropertyChanged<double>
            ("SquareFeet", ref this.squareFeet, ref value);
        }
    }

    public DateTime ListDate
    {
        get { return this.listDate; }
        set
        {
            this.CheckPropertyChanged<DateTime>
            ("ListDate", ref this.listDate, ref value);
        }
    }

    public DateTime YearBuilt
    {
        get { return this.yearBuilt; }
        set
        {   
            this.CheckPropertyChanged<DateTime>
            ("YearBuilt", ref this.yearBuilt, ref value);
        }
    }

    public List<PriceDrop> PriceDrops
    {
        get { return this.priceDrops; }
        set
        {
            this.CheckPropertyChanged<List<PriceDrop>>
            ("PriceDrops", ref this.priceDrops, ref value);
        }
    }

}

var query = ObjectFactory.Query<Property>(AppSettings.Instance.MySqlConn, "SELECT * FROM Property"); 
```

现在我只需要插入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:12:57.130

我认为您正在寻找的是像[Dapper-dot-net](https://github.com/SamSaffron/dapper-dot-net)这样的 Micro ORM 。您可以使用 Microsoft 的 Entity Framework，但对于您的场景来说，它似乎相当繁重。我认为像 dapper 这样的 Micro ORM 是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:17:28.227

我最终在当前项目中回到了这个问题并整理了我想要做的事情，下面是用于 Sql 数据库连接并在表中插入共享相同名称和字段值的对象，所以我不必编写再次插入任何对象：

```
public static void Insert(this SqlConnection conn, object p)
        {
            string query = "INSERT INTO {0} ({1}) VALUES ({2})";
            conn.Open();

            using (SqlCommand command = conn.CreateCommand())
            {
                PropertyInfo[] propertyInfos;
                propertyInfos = p.GetType().GetProperties();

                var objF = String.Join(",", propertyInfos.Select(i => i.Name).ToArray());
                //var objV = String.Join(",", propertyInfos.Select(i => i.GetValue(p, null)).ToArray());

                var objV = "";
                string[] array = new string[p.GetType().GetProperties().Count()];
                foreach (PropertyInfo info in p.GetType().GetProperties())
                {
                    if (info.GetValue(p,null).GetType() == typeof(string))
                    {
                        objV += "'"+(string)info.GetValue(p, null) + "',";
                    }
                    else if (info.GetValue(p, null).GetType() == typeof(DateTime))
                    {
                        objV += "CAST('" + ((DateTime)info.GetValue(p, null)).ToString("yyyy-MM-dd hh:mm:ss")+ "' AS DATETIME),";
                    }
                    else if (info.GetValue(p, null).GetType() == typeof(bool))
                    {
                        objV += "'" + ((bool)info.GetValue(p, null) == true ? "1" : "0") +"',";
                    }
                    else
                    {
                        objV += "'" + (string)info.GetValue(p, null) + "',";
                    }
                }

                command.CommandText = string.Format(string.Format(query, p.GetType().Name, objF, objV.TrimEnd(new char[] { ',' })));
                command.ExecuteNonQuery();
            }
            conn.Close();

        } 
```

下面是一个与调用表和对象一起使用的快速示例：

```
Business.Objects.Call c = new Business.Objects.Call();
            c.Number = "07889876774";
            c.StartTime = DateTime.Now;
            c.EndTime = DateTime.Now.AddHours(1);
            ObjectFactory.Insert(AppSettings.Instance.SqlConn, c); 
```

怪胎布亚。

# php - 在 PHP“gdata.io.handleScriptLoaded”中解析 JSON 字符串

> ID：13933672
> 
> 赞同：2
> 
> 时间：2012-12-18T13:03:21.880
> 
> 标签：php, json

我从 YouTube 获取 JSON 格式的数据，但它返回 JSON 为`gdata.io.handleScriptLoaded({key:value})`；

`key`由于响应不是 JSON 对象，我如何访问in php

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T07:48:30.753

我自己找到了答案。

我将值传递给请求 url `script-in-json`。simplay 将其更改为`json`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:14:47.200

```
$json = gdata.io.handleScriptLoaded({key:value});
    $res = json_decode($json);
    print $res->{'key'}; // it prints your value 
```

# php - cakephp彗星睡眠阻止一切

> ID：13933674
> 
> 赞同：5
> 
> 时间：2012-12-18T13:03:26.760
> 
> 标签：php, mysql, cakephp, comet

下面是我最终使用成功的彗星实现的代码。

```
$lastmodif = isset($this->params['form']['timestamp']) ? $this->params['form']['timestamp'] : 0;
$currentmodif = $already_updated[0]['Update']['lastmodified'];

while ($currentmodif <= $lastmodif)
{
    usleep(5000000);
    clearstatcache();
    $already_updated_new = $this->Update->find('all',array
    (
        'conditions' => array
        ( 
            'Update.receiver_id' =>  $this->Auth->user('id'),
            'Update.table_name' =>  "request_responses"
        )
    ));
    $currentmodif = $already_updated_new[0]['Update']['lastmodified'];
}
```

`$already_updated[0]['Update']['lastmodified']`是获取表的最后更新时间戳的查询结果。

在上面的代码中，$lastmodif 和 $currentmodif 是每次成功的彗星响应后传递的时间戳。

但现在的问题是，当我点击同一页面上的其他链接时，什么也没有发生，但在等待这么长时间后它的重定向。

我认为 usleep 正在阻止其他`**HTTP**`请求。

我正在使用 mysql 和 cakephp 请大家指导我应该怎么做才能解决这个问题。

我试图在调用页面时刷新，但它显示无法修改标头错误，因为输出已发送。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:02:14.563

I've met similar situation several times. It looks like Session is blocked by your sleeping script.

**How to solve it in CakePHP:**
call `session_write_close();` at the start of your script.
There is no way to do that via Cake's Session Component or Helper
**Note**: If something inside script uses session - Cake will reopen session and hang all requests that use same session again. In this case you will need to close session before sleep or before any operations that take a lot of time to be finished

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:36:53.133

如果您的脚本使用会话，那么您可能会注意到这种行为。PHP 会锁定会话文件，直到脚本完成。

这意味着一旦脚本启动会话，任何其他尝试使用相同会话 ID 启动会话的脚本都会被阻止，直到前一个脚本释放锁定（或终止）。

解决方法是在任何冗长的过程之前解锁会话：

*   称呼`session_start()`
*   读/写任何会话变量
*   称呼`session_write_close()`
*   做冗长的处理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T10:10:28.960

是的，usleep 正在阻止进一步的请求。根据您的托管环境，您可能只有有限数量的可用进程。我假设您的聊天中有多个用户->除非没有可用的进程，否则他们都会发出阻塞进程，这就是您的其他“链接”超时的原因。

我建议在客户端浏览器端实现等待，例如

```
setTimeout(function() {
    fetchAndPrintTheNewChats();
}, 50000000); 
```

在您的 PHP 代码中执行此操作的任何方法都会导致相同的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T19:41:08.920

您能否分享您正在使用的 cakephp 版本，以防其他人可能有解决方案？

Cake 有一个会话组件：[http ://book.cakephp.org/2.0/en/core-libraries/components/sessions.html](http://book.cakephp.org/2.0/en/core-libraries/components/sessions.html)

和一个会话助手：[http ://book.cakephp.org/2.0/en/core-libraries/helpers/session.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/session.html)

# python - python中日期的迭代器

> ID：13933678
> 
> 赞同：4
> 
> 时间：2012-12-18T13:03:35.187
> 
> 标签：python, date, iterator

我有一个 begin_date`datetime.date(2012, 9, 1)`和一个 end_date`datetime.date(2012, 9, 30)`

我想要一个迭代器或包含日期 2012/9/1 到 2012/9/30 的列表。除了循环之外还有什么方法可以制作迭代器或列表

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T13:06:54.957

使用生成器：

```
from datetime import date, timedelta

def dategenerator(start, end):
    current = start
    while current <= end:
        yield current
        current += timedelta(days=1) 
```

演示：

```
>>> for dt in dategenerator(date(2012, 9, 1), date(2012, 9, 30)):
...     print dt
... 
2012-09-01
2012-09-02
2012-09-03
2012-09-04
2012-09-05
2012-09-06
2012-09-07
2012-09-08
2012-09-09
2012-09-10
2012-09-11
2012-09-12
2012-09-13
2012-09-14
2012-09-15
2012-09-16
2012-09-17
2012-09-18
2012-09-19
2012-09-20
2012-09-21
2012-09-22
2012-09-23
2012-09-24
2012-09-25
2012-09-26
2012-09-27
2012-09-28
2012-09-29
2012-09-30 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T13:25:00.037

如果没有隐式循环，您可以执行以下操作：

```
from datetime import date
from dateutil.rrule import rrule, DAILY

iterdates=iter(rrule(DAILY, dtstart=date(2012, 9, 1), until=date(2012, 9, 30))) 
```

# winforms - 如何使用实体框架发布 Windows 窗体应用程序

> ID：13933679
> 
> 赞同：0
> 
> 时间：2012-12-18T13:03:39.750
> 
> 标签：winforms, entity-framework, publishing

大家好我已经使用 VS 2010、Entity Framework 和 MYSQL 数据库创建了一个 Windows 窗体应用程序。数据库托管在某个托管公司，并且可以从任何地方访问。现在，当我创建应用程序的升级并安装在其他系统上时，它会停止工作。没有任何错误信息。如果有人使用实体框架构建 Windows 窗体应用程序并成功安装在其他机器上，请提供帮助。

在谷歌上尝试了很多，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T04:22:25.233

大家好，我找到了解决方案。问题在于我的应用程序中使用了 MYSQL 数据库。我使用了 MYSQL 连接器，它导致了问题。我只需将 MYSQL 连接器安装到远程机器上即可解决问题。

# android - android xml文件修改

> ID：13933680
> 
> 赞同：0
> 
> 时间：2012-12-18T13:03:39.877
> 
> 标签：android, xml, xml-parsing

我从服务器收到一个`XML`结构如下的字符串：

```
<item_list>
    <category>
        <item id="1" name="name1" base64="base64String1" />
        <item id="2" name="name2" base64="base64String2" />
        <item id="3" name="name3" base64="base64String3" />
        <item id="4" name="name4" base64="base64String4" />
        ........
    </category>
    <category>
    ........
    </category>
<item_list> 
```

我需要做的是：当我第一次读取字符串时，读取`Base64`字符串，将它们保存在一个文件中，然后从这个字符串中删除它们。然后将此字符串写入`XML`文件。所以在那之后，这`XML`将是这样的：

```
<item_list>
    <category>
        <item id="1" name="name1" />
        <item id="2" name="name2" />
        <item id="3" name="name3" />
        <item id="4" name="name4" />
        ........
    </category>
    <category>
    ........
    </category>
<item_list> 
```

我使用哪个解析器显示来读取和删除`Base64`字符串？哪个最适合这个？

如果有人能给我一个例子或教程如何做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:40:31.453

您可以将 XPath 与表达式查询“//*[@base64]”一起使用。

```
try {
            DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
            builderFactory.setNamespaceAware(true);
            DocumentBuilder builder = builderFactory.newDocumentBuilder();
            Document document = builder.parse(new File("your_xml.xml"));

            XPath xpath = XPathFactory.newInstance().newXPath();
            String expression = "//*[@base64]";

            NodeList nodes = (NodeList) xpath.evaluate(expression, document, XPathConstants.NODESET);
            for (int i = 0; i < nodes.getLength(); i++) {
                Element element = (Element) nodes.item(i);
                String base64 = element.getAttribute("base64");
                element.removeAttribute("base64");
            }

            String newXML = getStringFromNode(document);
        }
        catch (Exception e) {

        } 
```

getStringFromNode 方法

```
public static String getStringFromNode(Node root) {

        StringBuilder result = new StringBuilder();

        if (root.getNodeType() == 3)
            result.append(root.getNodeValue());
        else { 
            if (root.getNodeType() != 9) {
                StringBuffer attrs = new StringBuffer();
                for (int k = 0; k < root.getAttributes().getLength(); ++k) {
                    attrs.append(" ").append(
                            root.getAttributes().item(k).getNodeName()).append(
                            "=\"").append(
                            TextUtils.htmlEncode(root.getAttributes().item(k).getNodeValue()))
                            .append("\" ");
                }
                result.append("<").append(root.getNodeName()).append(" ")
                        .append(attrs).append(">");
            } else {
                result.append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
            }

            NodeList nodes = root.getChildNodes();
            for (int i = 0, j = nodes.getLength(); i < j; i++) {
                Node node = nodes.item(i);
                result.append(getStringFromNode(node));
            }

            if (root.getNodeType() != 9) {
                result.append("</").append(root.getNodeName()).append(">");
            }
        }
        return result.toString();
    } 
```

**已编辑**

同样也可以用于解析字符串。请参阅下面的方法，它将字符串解析为 DOM 文档。现在您可以将此文档用作 XPath 的输入。

```
public static Document ReadDocument(String xml)
    {
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {
            dbf.setNamespaceAware(true);
            DocumentBuilder db = dbf.newDocumentBuilder();
            InputSource is = new InputSource();
            StringReader reader = new StringReader(xml);
            is.setCharacterStream(reader);
            doc = db.parse(is); 
        } catch (Exception e) {
            Log.e("Error", "Error while Parsing Document", e);
            return null;
        }
        return doc;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:25:52.150

Vivek 功能的小改进 -> 处理 CDATA + 使用字段常量：

```
public static String getStringFromNode(Node root) throws IOException 
{
    StringBuilder result = new StringBuilder();

    if (root.getNodeType() == Node.TEXT_NODE)
        result.append(root.getNodeValue());
    else if(root.getNodeType() == Node.CDATA_SECTION_NODE)
        result.append("<![CDATA["+root.getNodeValue()+"]]>");
    else {
        if (root.getNodeType() != Node.DOCUMENT_NODE) {
            StringBuffer attrs = new StringBuffer();

            for (int k = 0; k < root.getAttributes().getLength(); ++k) {
                attrs.append(" ").append(
                        root.getAttributes().item(k).getNodeName()).append(
                        "=\"").append(
                        root.getAttributes().item(k).getNodeValue())
                        .append("\" ");
            }
            result.append("<").append(root.getNodeName()).append(" ")
                    .append(attrs).append(">");
        } else {
            result.append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
        }

        NodeList nodes = root.getChildNodes();
        for (int i = 0, j = nodes.getLength(); i < j; i++) {
            Node node = nodes.item(i);
            result.append(getStringFromNode(node));
        }

        if (root.getNodeType() != Node.DOCUMENT_NODE) {
            result.append("</").append(root.getNodeName()).append(">");
        }
    }
    return result.toString();
} 
```

# javascript - 更改表格的排序方式 jquery tablesorter

> ID：13933681
> 
> 赞同：0
> 
> 时间：2012-12-18T13:03:48.630
> 
> 标签：javascript, jquery, tablesorter

我正在使用 jquery tablesorter 对我的表进行排序。我试图用谷歌搜索我的问题，但没有找到我要找的东西。

我有一个内容动态变化的表格，所以我想改变项目的排序方式。

一种情况下，我的表格填充了文本，默认情况下可以排序，`.tablesorter()`而另一种情况是数字在表格中，所以我需要像这样调用 tablesorter：

```
$('table').tablesorter({
        headers : { 
                0 : {sorter:'digit'},
                1 : {sorter:'digit'},
                2 : {sorter:'digit'},
                3 : {sorter:'digit'}
        }
    }); 
```

我有一种方法可以在表格内容中的数字/文本之间重新加载表格切换，如何更改表格的排序方式。

在示例中（伪代码）：

```
function reloadTableData
if table contains numbers user this tablesorter (I have a way to know if table contains numbers) 
$('table').tablesorter({
            headers : { 
                    0 : {sorter:'digit'},
                    1 : {sorter:'digit'},
                    2 : {sorter:'digit'},
                    3 : {sorter:'digit'}
            }
        });
if table contains text use ordinary table sorter 
$('table').tablesorter();
end 
```

我可以使用文本/数字重新加载表格数据 n 次。

我尝试了以下方法：

```
function initTablesorter(n) {

    switch(n)
    {
    case "number":
      digitTableSorter();
      break;
    case "text":
     defaultTableSorter();
      break;
    default:

    }
}

function digitTableSorter(){
$('table').tablesorter({
        headers : { 
                0 : {sorter:'digit'},
                1 : {sorter:'digit'},
                2 : {sorter:'digit'},
                3 : {sorter:'digit'}
        }
    });
}

function defaultTableSorter(){
$('table').tablesorter();
} 
```

不用说它不起作用，我希望以前有人做过这样的事情，我现在被困了一段时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:03:41.260

那么它不起作用是因为您要在桌子上重新初始化 tablesorter 吗？您可以在重新绑定之前尝试取消绑定 tablesorter。

```
$('table')
 .unbind('appendCache applyWidgetId applyWidgets sorton update updateCell')
 .removeClass('tablesorter')
 .find('thead th')
 .unbind('click mousedown')
 .removeClass('header headerSortDown headerSortUp'); 
```

看看[Remove jQuery tablesorter from table](https://stackoverflow.com/questions/8171530/remove-jquery-tablesorter-from-table)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:42:33.377

我认为您正在寻找这个-您将需要[MetatData 插件](https://github.com/jquery/jquery-metadata)来获得喜欢的类`"{sorter: 'digit'}"`

[http://tablesorter.com/docs/example-trigger-sort.html](http://tablesorter.com/docs/example-trigger-sort.html)

```
 $("#trigger-link").click(function() { 
    // set sorting column and direction, this will sort on the first and third column the column index starts at zero 
    var sorting = [[0,0],[2,0]]; 
    // sort on the first column 
    $("table").trigger("sorton",[sorting]); 
    // return false to stop default link action 
    return false; 
}); 
```

# objective-c - 从不带索引的 nsmutable 数组中检查并删除特定字符串

> ID：13933682
> 
> 赞同：8
> 
> 时间：2012-12-18T13:03:49.833
> 
> 标签：objective-c, ios, xcode, nsstring, nsmutablearray

在 Xcode 中，我将一些存储`NSString`在`NSMutableArray`.

```
Hello
Here
MyBook
Bible
Array
Name2
There
IamCriminal 
```

用户可以输入字符串。

```
Name2 
```

我需要在`NSMutableArray`不知道字符串索引的情况下删除该特定字符串。我有一些想法，使用迭代。任何其他最佳方式。请提供示例编码。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-18T13:07:11.963

你可以`containsObject`在一个`NSMutableArray`

```
if ([yourArray containsObject:@"object"]) {
    [yourArray removeObject:@"object"];
} 
```

**迅速：**

```
if yourArray.contains("object") {
    yourArray = yourArray.filter{ $0 != "object" } 
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-18T13:23:36.933

```
[array removeObject:@"Name2"]; 
```

NSMutableArray 的 removeObject: 方法的文档说明：

> 匹配是根据对象对 isEqual: 消息的响应确定的

换句话说，此方法遍历您的数组，将对象与`@"Name2"`. 如果对象等于`@"Name2"`，则将其从数组中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:14:02.730

你可以简单地使用

```
[yourArray removeObject:stringObjectToDelete]; 
```

此方法使用 indexOfObject: 定位匹配项，然后使用 removeObjectAtIndex: 将其删除。因此，匹配是根据对象对 isEqual: 消息的响应来确定的。如果数组不包含对象，则该方法无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:06:32.323

尝试这个，

```
BOOL flag = [arrayName containsObject:Str];   

if (flag == YES)
{   
     [arrayName removeObject:Str];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T13:06:49.143

```
[array removeObject:@"name2"]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T13:21:14.617

你可以试试这个

```
for(NSString *string in array)
{
    if([[string lowercasestring] isEqualToSring:[yourString lowercasestring]])
    {
        [array removeObject:string];
        break;
    }
} 
```

# oracle - 按钮标签中的立陶宛字符未正确显示

> ID：13933683
> 
> 赞同：1
> 
> 时间：2012-12-18T13:03:58.867
> 
> 标签：oracle, oracle10g, oracleforms

我尝试更改按钮标签以使用立陶宛字符，但表单生成器无法正确显示它们。我需要更改 Oracle Form Builder 中的某些内容以正确显示这些字符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:05:32.927

请检查您的 Oracle 主目录的 NLS_LANG 设置。在 Windows 上，您可以在 HKEY_LOCAL_MACHINE/SOFTWARE/ORACLE/ 下的注册表中找到它。如果它是类似 AMERICAN_AMERICA 的东西。请务必将其更改为类似 AMERICAN_LITHUANIA... 同时确保 NLS_LANG 的字符集部分设置为包含您的立陶宛字符的字符集。**第二，虽然这个字符集设置最像你的问题的原因。**

# android - Android Spinner 在 ICS 中不清晰可见

> ID：13933685
> 
> 赞同：0
> 
> 时间：2012-12-18T13:04:04.273
> 
> 标签：android, android-layout, android-widget, spinner

我正在使用工作正常`Spinner`的`Android 2.3 Ginger Bread`版本。但是当我运行应用程序时`Android ICS 4.0`，文本的可见性 `Spinner`很差。它不清晰可见。

任何人都可以帮忙吗？当我试图改变背景但箭头`Spinner`消失了。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:12:29.313

您的目标版本可能在`Android 4.0 ICS`并使用`Android 4.0 ICS`. 所以它的节目就是这样。您想显示与设置`Spinner`相同`Android 2.3`

`android:targetSdkVersion="10"`在 android 清单文件中，并将 project.properties 中的编译版本更改为`target=android-10`

# java - 找出按钮被点击了多少次

> ID：13933686
> 
> 赞同：0
> 
> 时间：2012-12-18T13:04:04.603
> 
> 标签：java, events

> **可能重复：**
> [计算按下 JButton 的次数？](https://stackoverflow.com/questions/5602463/count-how-many-times-a-jbutton-is-pressed)

假设我有一个按钮

```
JButton button1=new JButton(); 
```

我有一个`int count=0`

什么是找到按钮被点击多少次的代码？（它类似于 C# 中的 mouseup 事件，但我想在 java 中使用它）谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:05:34.100

```
button1.addMouseListener( new MouseAdapter() {
   @Override
   public void mousePressed(MouseEvent e){
      count += 1;
   }

}); 
```

Where`count`必须是一个实例变量，并且在您的课程之后立即声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:07:26.003

将鼠标侦听器添加到递增计数器的按钮。

```
button1.addMouseListener(new MouseAdapter(){
    public void mouseClicked(MouseEvent e){
        count++;
    }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-18T13:09:02.690

1.  为 button1 实现动作监听器。
2.  将计数（实例变量）加一。
3.  然后您可以获得点击次数。

> ```
> int count = 0; // Instance variable
> button1.addActionListener(new java.awt.event.ActionListener() {
>             public void actionPerformed(java.awt.event.ActionEvent evt) {
>                count++;
>                JOptionPane.showMessageDialog(this, "Clicked count is : " + count);
>             }
>         }); 
> ```

# c# - DateTime.Add 中的异常

> ID：13933690
> 
> 赞同：1
> 
> 时间：2012-12-18T13:04:32.400
> 
> 标签：c#, .net, exception, datetime

使用 C#、.NET 4.0 更新 4.0.3、Windows 7 64 位：

由于超出我职责范围的原因，我必须在后台处理消息时让 GUI 线程“休眠”。到目前为止，这完美无缺：

```
 private void SleepWithEventLoop(int ms)
    {
        var timeout = DateTime.UtcNow.AddMilliseconds(ms);
        while (DateTime.UtcNow < timeout && !disposed)
        {
            System.Windows.Forms.Application.DoEvents();
            Thread.Sleep(1);
        }
    } 
```

自从我今天早上启动 PC 以来，没有明显的原因，我开始收到这样的异常（来自日志文件的片段）：

```
2012-12-18 12:50:41.204 | - None -             | Exception | Exception caught: Der hinzuzufügende Wert war außerhalb des Bereichs.
                        |                      |           | Parametername: value
                        |                      |           | Details:
                        |                      |           |    bei System.DateTime.Add(Double value, Int32 scale)
                        |                      |           |    bei System.DateTime.AddMilliseconds(Double value)
                        |                      |           |    bei com.<...>.CanOpenProxyServer.SleepWithEventLoop(Int32 ms) in C:\Users\<...>\CanOpenProxy.cs:Zeile 78.
                        |                      |           |    bei com.<...>.CanOpenProxyServer.HandleConnection(MessageChannel channel) in C:\Users\<...>\CanOpenProxy.cs:Zeile 55. 
```

我在使用 DateTime.Now 时遇到了一些问题，涉及切换到 DateTime.UtcNow 后消失的 DST，但上述异常仍然存在。IT 部门最近没有安装任何更新，我当然没有安装或删除任何程序或弄乱注册表。DateTime 怎么会突然“中断”？！？

我将上面的代码复制到一个新项目中单独测试它

```
while (true) SleepWithEventLoop(5); 
```

它仍然崩溃了。重新安装 .NET 也不起作用。有任何想法吗？

编辑：在两位同事的 PC 上存在同样的问题，但在新安装的 VmWare 系统上却没有。开始看起来我们公司的 PC 配置有点滑稽。DateTime 是否需要任何“特殊”配置？

编辑 2：所以我通过 P-Invoking 到一个小的 C DLL 中“修复”了这个问题，该 DLL 暴露了 time.h 函数，包装在一个 DateTime 类中。在所有项目中搜索/替换。我觉得这样做很脏，但它至少解决了症状。当日程安排变得不那么紧张时，我会再次研究这个问题（是的，正确的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:40:19.727

当我的代码在一台计算机上正常工作而在另一台计算机上不正确时，我预计问题是我的应用程序正在使用的 DLL。所以我的建议是这样的：

*   在您的机器和它工作的 VM 上运行该应用程序。
*   在两台机器上运行 ProcessExplorer。
*   在 ProcessExplorer 的下部窗格中显示 DLL。
*   比较 DLL 版本以查看哪些版本不同（如果有）。

# java - 用于.pdf文件的java文件复制程序在输出中获取损坏的文件

> ID：13933692
> 
> 赞同：2
> 
> 时间：2012-12-18T13:04:50.763
> 
> 标签：java, fileinputstream

我编写了这个程序来将一个 pdf 文件复制到另一个文件，但是我在 .txt 文件的 o/p 中得到了 currupt 字段，这段代码工作正常。

**代码：**

```
public class FileCopy {

    public static void main(String args[]) {

        try {
            FileInputStream fs = new FileInputStream("C:\\dev1.pdf");
            byte b;
            FileOutputStream os = new FileOutputStream("C:\\dev2.pdf");
            while ((b = (byte) fs.read()) != -1) {
                os.write(b);
            }
            os.close();
            fs.close();
        } catch (Exception E) {
            E.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:10:38.657

这是因为您正在混合整数和字节。这应该按预期工作：

```
int b;
while ((b = fs.read()) != -1) {
    os.write(b);
} 
```

特别是，当`fs.read()`返回 255 时，`(byte) fs.read`返回 -1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T13:25:30.327

试试这个

```
try {          
   FileInputStream fs = new FileInputStream("C:\\dev1.pdf");

   FileOutputStream os = new FileOutputStream("C:\\dev2.pdf");
   while ((int b = (byte) fs.read()) != -1) {
       os.write(b);
   }
   os.close();
   fs.close();
} catch (Exception E) {
    E.printStackTrace();
} 
```

# html - 打印嵌入在对象标签中的 HTML 文档

> ID：13933695
> 
> 赞同：0
> 
> 时间：2012-12-18T13:05:11.790
> 
> 标签：html, printing, object-tag

我有一个嵌入在“对象”标签中的 HTML 文档。

```
<object data="scroll.html" type="text/html" width="100%" style="height:2700px;"/> 
```

该 HTML 文档跨越多个页面。当我尝试在 Firefox 或 IE9 中打印文档时，它们只打印 HTML 中的第一个可见页面，而不是所有页面。我在这里错过了什么吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:10:37.123

尝试使高度

```
 height="50%"  // just a try of 50 u can use how much u like 
```

编辑：

```
 <object data="scroll.html" type="text/html" width="732" height="95" style="overflow:hidden; width: 732px; height: 2700px""/> 
```

您已经在使用 style ，所以不要再使用 style=....

# javascript - HTML5 - 调整画布大小时图像质量差

> ID：13933697
> 
> 赞同：9
> 
> 时间：2012-12-18T13:05:12.267
> 
> 标签：javascript, html, canvas

我正在使用客户端图像调整大小（使用 HTML5 画布）制作和图像上传页面。一切正常，但问题是图像质量不是很好。

[这是一个](http://mark.carthousefurniture.co.uk/MiniExperiments/gallery.php?gallery=samplegallery)（正在进行的）照片库的链接，其中包含我的调整大小/上传代码生成的图像。

你明白我说的质量差是什么意思吗？许多锯齿状边缘，尤其是在缩略图上。关于如何解决这个问题的任何想法？

这是我用于生成缩略图的 javascript：

```
img.onload = function()
{
   var canvasWidth = 150;
   var canvasHeight = 150;
   var Rz = resizeCanvasSmall(img,canvasID,canvasWidth,canvasHeight);

   ctx.drawImage(img,Rz[0],Rz[1],Rz[2],Rz[3],Rz[4],Rz[5],Rz[6],Rz[7]);
   dataurl = canvas.toDataURL("image/jpeg",0.8);  // File type and quality (0.0->1.0)
   UploadFile();
}

// Function to resize canvas (for thumbnail images)
// img = image object, canvas = canvas element ID
function resizeCanvasSmall(img,canvas,width,height)
{
var sx; //The x coordinate where to start clipping
var sy; //The y coordinate where to start clipping
var swidth; //The width of the clipped image
var sheight; //The height of the clipped image

var aspectRatio = width / height;

if (img.width > img.height) // If landscape
{
    sheight = img.height;
    swidth = img.height * aspectRatio;
    sy = 0;
    sx = (img.width - swidth) / 2;
}
else //If portrait
{
    swidth = img.width;
    sheight = img.width / aspectRatio;
    sx = 0;
    sy = (img.height - sheight) / 2;
}

document.getElementById(canvas).width = width;
document.getElementById(canvas).height = height;

return [sx,sy,swidth,sheight,0,0,width,height];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T03:47:15.500

大量调整大小的一般规则是进行 2 次方的跳跃，以减少混叠伪影，然后在余下的过程中只进行一次最终调整。例如：如果您需要将 1000 像素重新缩放到 68 像素，则将其缩小到 500 像素，然后是 250 像素，然后是 125 像素，然后是 68 像素。在最后一个之前，它始终是 2 的幂。

此外，您应该保留纵横比，否则您会在对角线处获得时髦的锯齿。如果您需要来自非方形源图像的方形缩略图，则在尽可能接近目标方形的同时缩小尺寸，同时仍然更大，然后在中心裁剪它。（或者变小并填充它）。您必须不惜一切代价保持纵横比。

要获得比我所描述的更好的结果，您必须实现自己的大小调整算法，这将慢得多（因为它们将在 JS 中而不是在优化的本机代码中）。跳入 WebGL 也可能是一种选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-30T19:29:22.180

[http://output.jsbin.com/palota/1/](http://output.jsbin.com/palota/1/)

我做了一个画布调整大小插件。其中一个文件可以包含在前端。它逐个像素地进行。它不是抓取附近的像素，而是平均颜色，因此从原始图像到新图像的平均像素颜色是相同的。

[https://github.com/danschumann/limby-resize](https://github.com/danschumann/limby-resize)

并且要包含的实际文件是

[https://github.com/danschumann/limby-resize/blob/master/lib/canvas_resize.js](https://github.com/danschumann/limby-resize/blob/master/lib/canvas_resize.js)

# 这将产生与 Photoshop 或 imagemagick 相同类型的调整大小。

它有点慢，因为我们必须查看所有像素并重新分配每一点颜色，但对于不经常完成的工作，它可以工作。

**算法背后的数学**

假设我们将 3 个像素调整为 2 个像素。

通常，每个像素将有 4 个数字：红色、绿色、蓝色、alpha。让我们看一个简化版本，其中像素只是 1 个数字。

假设原始图像是：0 | 100 | 255

常规画布 drawImage 调整大小将导致 0 | 100 或 0 | 255

这有时很好，但它会丢失细节，并且可能是一个非常丑陋和锯齿状的图像。如果你仔细想想，原来所有颜色的总和是 355（0 + 100 + 255），剩下的平均像素是 118.33。调整后的平均像素为 50 或 127.5，看起来还可以或非常不同！

在limby-resize中实现的图像算法会产生与imagemagick相似的图像，保留所有像素数据，因此平均像素将是相同的。

我们的算法将生成以下图像： 33 | 201.3

(0 * .66 + 100 * .33) | (100 * .33 + 255 * .66)

我们的总数是 234.3，剩下的平均值是 117.15，这将等于第一张图像（如果我们在此示例中不四舍五入到小数点后 2 位）。

### 浏览器支持

`canvas_resize.js`应该能够包含在前端以便更好地调整客户端的大小。

```
var img, canvas, resized;
img = new Image;
img.onload = function(){
  canvas = document.createElement('canvas');
  canvas.width = img.width;
  canvas.height = img.height;
  canvas.getContext('2d').drawImage(img, 0, 0, img.width, img.height);
  resized = document.createElement('canvas');
  resized.width = 300;
  resized.height = 500;
  // see lib/canvas_resize for window.canvasResize = function(){...}
  canvasResize(canvas, resized);
  // resized will now be a properly resized version of canvas
}

img.src = '/path/to/img.jpg'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:46:49.930

我不确定幕后使用了什么，但我一直认为[Processing.js 有一个相当不错的 image resize](http://processingjs.org/reference/PImage_resize_/)。该文档有一些示例用法。（**更新**：查看调整大小的代码，它看起来与您正在执行的操作类似。除了它从一张图像中获取数据并将其移动到另一张图像。）

调整大小时要注意的另一件事是，如果可能，始终将图像大小减半，以便像素排列得更好。理想调整大小的示例是 50%、25% 等。

# c++ - QGraphicsLineItem::paint() 工件

> ID：13933699
> 
> 赞同：2
> 
> 时间：2012-12-18T13:05:16.647
> 
> 标签：c++, qt, qt4, qgraphicsitem

我有自己的类，它继承`QGraphicsLineItem`并覆盖了`paint()`用箭头绘制粗线的方法：

```
void MyGraphicsItem::paint( QPainter* aPainter,
                            const QStyleOptionGraphicsItem* aOption,
                            QWidget* aWidget /*= nullptr*/ )
{
    Q_UNUSED( aOption );
    Q_UNUSED( aWidget );

    QLineF cLine = line();

    aPainter->setPen( QPen( Qt::black, 6, Qt::SolidLine ) );
    aPainter->drawLine( cLine );

    qreal lineAngle = cLine.angle();

    const qreal radius = 2.0;
    QLineF head1 = cLine;
    head1.setAngle(lineAngle+32);
    head1.setLength( 12 );
    QLineF head2 = cLine;
    head2.setAngle(lineAngle-32);
    head2.setLength( 12 );

    aPainter->drawLine( head1 );
    aPainter->drawLine( head2 );

    aPainter->setPen( QPen( Qt::yellow, 2, Qt::SolidLine ) );

    aPainter->drawLine( cLine );

    aPainter->drawLine( head1 );
    aPainter->drawLine( head2 );
} 
```

当我在场景周围绘制项目时，这似乎会导致渲染伪影。据我所知，因为我已经设置了厚度，`QPen`这让我相信我必须以某种方式在项目矩形之外绘制？

是什么导致了我的渲染问题，我该如何解决？

![在此处输入图像描述](../Images/64f9af9568a05c7d0bb2ba2e71a73993.png)

请注意图像中没有重新绘制背景 - 这也发生在场景中箭头被拖过的任何其他对象上。

编辑：我认为这实际上是我的问题：

[子类化 QGraphicsView 并设置 drawBackground](https://stackoverflow.com/questions/10709694/subclassing-qgraphicsview-and-setting-drawbackground?rq=1)

再次编辑：似乎绘制背景是问题，但使用全视图端口更新会降低性能，所以我想出了这个方法，它似乎将 CPU 使用率保持在 3%，而不是将一个核心与 100% 的使用率挂钩。

```
// This code lives in the QGraphicsScene constructor, doesn't have to be there though since QGraphicsScene::setBackgroundBrush is public.
int gridSizeX = 25;
int gridSizeY = 20;
QImage singleGrid( gridSizeX, gridSizeY, QImage::Format_RGB32 );
singleGrid.fill( Qt::white );
{
    QPainter painter( &singleGrid );

    // Lighter background
    painter.setPen( QPen( QColor( 240, 240, 240 ) ));

    qreal midx = gridSizeX / 2;
    qreal midy = gridSizeY / 2;
    painter.drawLine( 0, midy, gridSizeX, midy );
    painter.drawLine( midx, 0, midx, gridSizeY );

    // Darker foregound
    painter.setPen( QPen( QColor( 180, 180, 180 ) ));
    painter.drawRect( 0, 0, gridSizeX, gridSizeY );

    painter.end();
}
QBrush brushBackground( singleGrid );
setBackgroundBrush( brushBackground ); 
```

然后场景在各处重复此笔刷，从而产生相同的网格背景效果，甚至在缩放/缩放时也能按预期工作。:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:45:51.007

当您覆盖paint() 函数时，您还需要在您的类中覆盖QGraphicsItem::boundingRect() 以定义您的自定义图形项的外部边界。如果你在边界之外绘制，你最终会得到渲染工件。现在你依赖于 QGraphicsLineItem 的 boundingRect() 实现，它当然不知道你的paint() 函数的实现。有关详细信息，请参阅[http://doc.qt.digia.com/main-snapshot/qgraphicsitem.html#boundingRect](http://doc.qt.digia.com/main-snapshot/qgraphicsitem.html#boundingRect)。

# java - 在richfaces4树中设置默认选定节点

> ID：13933701
> 
> 赞同：1
> 
> 时间：2012-12-18T13:05:19.240
> 
> 标签：java, jsf, tree, richfaces

我正在使用richfaces 4.2.2。我的页面上有一个树组件。每次进入页面我都需要默认选择根节点。我有一些麻烦来完成这个。任何帮助将不胜感激。

# post - Varnish 3.0.2 POST 请求的问题

> ID：13933703
> 
> 赞同：2
> 
> 时间：2012-12-18T13:05:27.377
> 
> 标签：post, request, submit, varnish

我们通过负载平衡的 Amazon AWS 环境为多个 Typo3 网站使用 Varnish 3.0.2 前端缓存。一切正常，但使用 POST 方法提交信息的联系表单无法按预期工作。我填写表格并按下提交，浏览器开始运行，但返回表格并保留我输入的信息。如果我在后端 PHP Web 服务器上做同样的事情，那么对于 Post 来说一切正常。所以我认为我的 default.vcl 存在一些问题。我希望这里有一些 Varnish 专家，他们可以帮助 Varnish 新手。

```
backend default{
    .host = "10.0.0.10";
    .port = "80";
}

acl ClearCache {
    "localhost";
    "10.0.0.10";
    "10.0.0.96";
}

#acl purge {
#   "localhost";
#   "10.0.0.96";

#}
sub vcl_recv {
    if (req.http.x-forwarded-for) {
        set req.http.X-Forwarded-For =
        req.http.X-Forwarded-For + ", " + client.ip;
    } else {
        set req.http.X-Forwarded-For = client.ip;
    }

    set req.backend = default;

    if (req.request == "POST") {
        ban("req.url == " + req.url);
        set req.http.X-Test = req.url;
        return (pass);
    }

    if (req.request == "BAN") {
    if (!client.ip ~ ClearCache) {
        error 405 "Not allowed.";
    }

    # This option is to clear any cached object containing the req.url
    ban("req.url ~ "+req.url);

    # This option is to clear any cached object matches the exact req.url
    # ban("req.url == "+req.url);

    # This option is to clear any cached object containing the req.url
    # AND matching the hostname.
    # ban("req.url ~ "+req.url+" && req.http.host == "+req.http.host);

    error 200 "Cached Cleared Successfully.";
    }

    if (req.request != "GET" &&
        req.request != "HEAD" &&
        req.request != "PUT" &&
        req.request != "POST" &&
        req.request != "TRACE" &&
        req.request != "OPTIONS" &&
        req.request != "DELETE") {
        return (pipe);
    }
    if (req.request != "GET" && req.request != "HEAD") {
        return (pass);
    }
    if (req.http.Authorization || req.http.Cookie) {
        return (pass);
    }
    if(req.http.host ~ "typo3.lygie.de"){
        ##TYPO3-Backend nicht cachen
        if (req.http.cookie ~ "be_typo_user"){
            ##Inhalten löschen wenn Shift+reload gedrückt wird, aber nur bei eingeloggtem user (Backend-Cookie)
            if (req.http.Cache-Control ~ "no-cache") {
                set req.ttl = 0s;
                ban("req.url == " + req.url);
                return (pass);
            }
        }
        else{
            ##Cookies von TYPO3-Seiten löschen
            unset req.http.Cookie;
        }
    }
    return (lookup);
}

sub vcl_fetch {
    set beresp.ttl = 12h;
    set req.grace = 24h;
    if (req.url ~ "\.(jpeg|jpg|png|gif|ico|swf|js|css|txt|gz|zip|rar|bz2|tgz|tbz|html|htm|pdf|pls|torrent)$") {
            set beresp.ttl = 48h;
    }

    if (req.url ~ "/typo3") {
    }else {
        unset beresp.http.set-cookie;
    }
    return (deliver);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:39:26.580

我之前遇到了一些问题`return(pipe)`。我的解决方案很简单。只需在相同的条件下进行一次输入，`return(hit_for_pass)`然后`vcl_recv`再进行一次输入。这不是一个很好的解决方案，但它确实工作正常。`return(deliver)``vcl_fetch`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T23:37:10.277

很多时候，您不再需要通过 php 来跟踪用户（例如在提交表单之后）。如果您不需要根据里面的数据做出反应，请尝试清除 PHPSESSID cookie。

```
if (req.http.Cookie ~ "PHPSESSID"){
          remove req.http.Cookie;
} 
```

我是清漆新手，所以我仍在考虑任何负面影响

*   注意是否使用基于会话的 ajax。
*   基于 PHP 的跟踪可能会带来一些麻烦。
*   更多的想法任何人？

（可能看起来离题，但我遇到了完全相同的情况并以这种方式解决了它。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-29T20:11:51.663

这篇文章很旧，但很金。这个版本还在使用。我有相同版本的清漆，当我做一个 POST 时我有 503。如果你有这个问题（昨天和今天）： 注意：在 vcl_recv 里面如果 PUT/POST/DELETE 做一个返回（通过），如果你需要使缓存无效，做一个 ban() 首先尝试确定 503 是否由超时生成和

```
backend default{
    .host = "10.0.0.10";
    .port = "80";
    .connect_timeout = 300s;
    .first_byte_timeout = 300s;
    .between_bytes_timeout = 300s;
} 
```

第二次尝试替换

```
return (pipe); 
```

和

```
return (pass); 
```

因为不好用。记住：varnishlog 是你最好的朋友。

# eclipse - Azure Eclipse：cspack.exe：错误：指定的路径、文件名或两者都太长

> ID：13933705
> 
> 赞同：2
> 
> 时间：2012-12-18T13:05:32.310
> 
> 标签：eclipse, azure

当我尝试在本地的 tomcat 上使用 eclipse 部署应用程序时，出现此错误：

> [windowsazurepackage] cspack.exe：错误：指定的路径、文件名或两者都太长。完全限定的文件名必须少于 260 个字符，目录名必须少于 248 个字符。

我已经更改了环境变量`_CSRUN_STATE_DIRECTORY`。

但是当我在创建 Azure 项目部署时没有选择 JDK 和我的 Tomcat 时，我没有这个错误。但在这种情况下，我的应用程序没有启动。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:57:14.123

我通过`package.xml`在部署项目根目录中进行编辑并通过搜索以下行来更改目标文件夹来解决此问题：

```
<!-- This is the directory where the Windows Azure deployment package or folder will be saved --> 
<property location="${basedir}\deploy" name="wapackagedir"/> 
```

...然后更改`${basedir}`为更短的绝对路径，例如`c:\publish`

# c# - 如何通过对话框选择文件夹并处理其中包含的所有文件

> ID：13933709
> 
> 赞同：1
> 
> 时间：2012-12-18T13:05:34.600
> 
> 标签：c#, excel

我想从一个文件夹中一个一个地读取 xlsx 文件。我目前正在使用一个按钮来浏览单个文件，但我想使用此按钮来浏览我拥有文件的文件夹。所以，当我选择这个文件夹时，程序应该会自动运行文件夹中的所有文件，一个接一个。

这是我的代码：

```
class RatWalk 
{ 
    public List steps = new List();

    // reads data from excel file
    public void LoadFromFile(String fileName)                       
    {
        steps.Clear();

        XlsFile file = new XlsFile(fileName);
        try
        {
            //everything I want to do
        }
        catch
        {
        } 
    }

    private void InitializeComponent()                             
    {
        EventHandler handler = new EventHandler(OnClick);
        button.Text = "Browse for the XLS file";                    
        // button properties                                       
        this.Controls.Add(button);
    }

    // Browses for the file and loads the selected Excel file
    private void OnClick(object sender, EventArgs e)            
    {
        OpenFileDialog fileDialog = new OpenFileDialog();
        if (fileDialog.ShowDialog() != DialogResult.OK)
            return;
        ratWalk.LoadFromFile(fileDialog.FileName);

        // Whatever I want to do   
    }
} 
```

我想以这样的方式更改它，当我单击按钮并选择文件夹时，它会一个一个地运行文件夹中的所有文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:30:37.743

这将适用于所选文件夹中的每个 xlsx 文件：

```
string selectedFolder = string.Empty;
        FolderBrowserDialog selectFolderDialog = new FolderBrowserDialog();
        if (selectFolderDialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            selectedFolder = selectFolderDialog.SelectedPath;
            DirectoryInfo dir = new DirectoryInfo(selectedFolder);
            foreach (var file in dir.GetFiles("*.xlsx"))
            {
                ratWalk.LoadFromFile(file.FullName);
                //
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T13:25:02.330

你可以试试这个。这会有所帮助

```
 FolderBrowserDialog fi = new FolderBrowserDialog();
 DialogResult result = fi.ShowDialog();
 if (result == DialogResult.OK)
 {
   string[] files = Directory.GetFiles(fi.SelectedPath);
 } 
```

files 数组包含文件夹中的所有文件。为您的进程使用文件数组...

# css - IE8、IE7透明背景问题

> ID：13933713
> 
> 赞同：3
> 
> 时间：2012-12-18T13:05:47.613
> 
> 标签：css, internet-explorer-8, internet-explorer-7, png, background-image

为我的菜单使用图标（.png 透明背景）。IE9、Chrome、Firefox、safari、opera 没有任何问题。但如果我用 IE7 或 IE8 打开页面，图像周围会出现黑色边框。CSS 代码；

```
.menu-item1{
  background:url(img/spriteimage.png) no-repeat 0 0;
  height:20px;
  width:20px;
  opacity:0.5;
 } 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T13:07:23.600

IE7 和 IE8 对 alpha-transparencies 具有原生 PNG 支持，但一旦出现不透明度，它就会崩溃

尝试伪造背景图像或将其设置为 blank.gif 而不是使其透明。

```
 background:url(blank.gif); 
```

或者

```
 /* IE 8 */
 -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";

  /* IE 7 */
  filter: alpha(opacity=50); 
```

# python - 如何对文本文件中的单词进行排序？

> ID：13933717
> 
> 赞同：3
> 
> 时间：2012-12-18T13:06:08.260
> 
> 标签：python

在“test_wordss.txt”中

```
A
sentence
is
a
grammatical
unit
consisting
of
one
or
more
words
A 
```

我的代码：

```
for line2 in open('C://Users/Desktop/test_wordss.txt'):
    fields2 = line2.rstrip('\n').split('\t')
    print fields2.sort() 
```

我的代码结果显示为无...

我做错什么了吗？对文本文件中的单词进行排序有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T13:09:58.750

尝试：

```
words = sorted(open('C://Users/Desktop/test_wordss.txt').read().split())
print(words) 
```

您的代码有几个问题：

1.  `sort()`不返回排序列表。它对列表进行适当的排序，然后返回`None`.
2.  您的代码尝试对每一行中的单词进行排序，并且每行只有一个单词。它不会尝试一次处理整个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:11:46.610

`sort`对列表进行就地排序[（doc）](http://docs.python.org/2.7/tutorial/datastructures.html#more-on-lists)并返回`None`以说明这一点（所以你不要忘记副作用，你只会得到副作用）。要么使用

```
print sorted(fields2) 
```

或者

```
fields2.sort()
print fields2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:08:48.940

`sort`不返回`sorted`列表，它`sort`是到位的列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:10:05.927

试试这个：

```
for line in sorted(file('C://Users/Desktop/test_wordss.txt').read().split("\n")):
    print line 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-22T07:48:24.480

```
for x in word_list:
    ordered = True
    last = ord(x[0])

    for char in x[1:]:
        if ord(char) < last:
            flag = False
            break
        last = ord(char)

    if ordered:
        print(word) 
```

# java - Json Obect 在 ajax 调用中返回空值

> ID：13933719
> 
> 赞同：-1
> 
> 时间：2012-12-18T13:06:11.123
> 
> 标签：java, ajax, json, struts

在我的 struts 应用程序运行时，有时 json 对象从服务器返回 null 值（它并非总是发生），来自 ajax 的请求将转到 action 类并每次在那里执行逻辑但返回 null（有时） .（它不是在我的本地系统中复制，而是在生产中发生），请帮助我为什么会发生，.....提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:53:10.320

如果您在 JSON 操作中使用 Session 属性，

考虑到它总是在本地工作（单个服务器）

它进入生产中的随机问题（我猜是一个集群），

您应确保已部署为**Session Replication**配置的应用程序，以实现会话*故障转移* （每次会话数据发生更改时，会话都会复制到集群的其他成员）。

例如，

在**JBoss**中，您必须插入`<distributable />`标签`web.xml`以[启用会话复制](http://docs.jboss.org/jbossas/docs/Clustering_Guide/beta422/html/clustering-http-app.html)

在**Apache Tomcat**中，您必须添加

`<Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/>`

到您`<Engine>`或您的`<Host>`元素以[启用集群](http://tomcat.apache.org/tomcat-6.0-doc/cluster-howto.html)。

等等

# asp.net-mvc - MVC 视图/表单不回发给自身

> ID：13933721
> 
> 赞同：0
> 
> 时间：2012-12-18T13:06:16.743
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

**我已经用更多信息更新了这个问题。**

我有这样的看法（简化版）：

```
@using (Html.BeginForm())
        {
            @Html.ValidationSummary(false)

            <fieldset>
                <div class="editor-label">
                    @Html.LabelFor(model => model.UserName)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.UserName)
                    @Html.ValidationMessageFor(model => model.UserName)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.Password)
                </div>
                <div class="editor-field">
                    @Html.PasswordFor(model => model.Password)
                    @Html.ValidationMessageFor(model => model.Password)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.RememberMe)
                </div>
                <div class="editor-field">
                    @Html.CheckBoxFor(model => model.RememberMe)
                </div>

                <input type="image" src="@Url.Content("~/Images/login_button.png")" alt="Login" />

            </fieldset>
        } 
```

突然，在过去 3 小时内集成了许多其他代码时，我刚刚注意到我的视图已经停止导致回帖/回帖。这是一个简单的登录表单。

我看到这里没有提交类型。但我想知道它是如何早些时候发回给自己的。我应该改变什么？

**更新**

我刚刚意识到它没有回发到索引（httpPost），因为我在同一个控制器中有一个 CheckUserName 远程验证。当我删除远程验证时，它可以工作。如果我把它介绍回来，它不会。这是我的远程验证。

```
[AllowAnonymous]
public JsonResult CheckUserName(string userName)
{
    using (var context = new Presentation.Models.PMSEntities())
    {
        context.ContextOptions.LazyLoadingEnabled = false;

        Func<User, bool> predicate = u => u.UserName.SameAs(userName) && u.Status.SameAs("Active");

        return Json(context.Users.Any(predicate), JsonRequestBehavior.AllowGet);
    }
} 
```

我`RemoteAttribute`在适当的领域有一套。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:11:45.877

尝试这个

您可以在简单表单的 Action 方法上使用 [HttpPost]

或者

您可以在上传文件或处理复杂表单时尝试此操作

@Html.BeginForm("Action", "Controller", new { SearchModel = Model }, FormMethod.Post)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:13:54.627

`input`with`type="image"`充当提交按钮。您缺少 src 属性的引号 -`@Url.Content`返回不带引号的 url，因此请尝试添加它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:24:27.327

调用`Html.BeginForm()`会创建一个`<form>`POST 到当前操作的 POST。您需要将操作名称传递给`BeginForm`.

前任：

```
 @using (Html.BeginForm("ActionName", "ControllerName", FormMethod.Post))
    {
    } 
```

# c# - 以编程方式访问 RDL 文件-（抛出异常）

> ID：13933722
> 
> 赞同：0
> 
> 时间：2012-12-18T13:06:19.580
> 
> 标签：c#, .net, reporting-services

我有 1000 多个 rdl 文件，并希望记录每个文件中数据源的名称。我正在尝试在 C# 中以编程方式加载和访问单个 rdl 文件，并尝试了以下代码行。

```
Microsoft.ReportingServices.RdlObjectModel.Report.Load("C:\\abc.rdl"); 
```

但抛出以下异常。为什么抛出这个异常？

* * *

> System.Xml.XmlException 未处理 Message="Deserialization failed: 无法加载文件或程序集 'Microsoft.ReportingServices.ReportDesign.Common, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' 或其依赖项之一。系统找不到指定的文件。第 5 行，第 6 位。” Source="Microsoft.ReportingServices.Designer.Controls" LineNumber=5 LinePosition=6 StackTrace：在 Microsoft.ReportingServices.RdlObjectModel.Serialization.RdlReader.ReadRoot（类型类型）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:43:59.337

尝试使用 fuslogvw.exe 查看缺少哪个程序集。或者只是将 RDL 加载到 XmlDocument 或 XDocument 并使用 XPath 或 Xlinq。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T13:15:21.827

> 该系统找不到指定的文件。

我猜你可能缺少依赖项或其他东西。确定 Microsoft.ReportingServices.ReportDesign.Common 程序集在您的系统上？

# java - 绘制/使用 100 万个节点

> ID：13933724
> 
> 赞同：3
> 
> 时间：2012-12-18T13:06:28.507
> 
> 标签：java, javafx-2, javafx, nodes

我正忙于在窗格上绘制节点的练习。我的第一个目标是使用 100 万个节点，然后将其增加到 1500 万个。

我有一个自定义对象图，我可以向这个对象添加边和节点。每个节点对象都有一个椭圆，我可以调用和绘制它，并且与边缘对象相同。目前我有一个为节点生成随机位置的函数。

我目前正在使用滚动窗格来启用窗格周围的平移并查看所有节点。

我认为一个好主意是使用哈希图

```
Map<String, ArrayList<Node>> mapX = new HashMap<String, ArrayList<Node>>();
Map<String, ArrayList<Node>> mapY = new HashMap<String, ArrayList<Node>>(); 
```

我使用以下代码将节点添加到哈希图中：

```
int  tempXFloor = (int)Math.floor(tempX);
ArrayList<Node> tempList = mapX.get(tempXFloor+"");
if(tempList == null){
tempList = new ArrayList<>();
}
tempList.add(node); 
mapX.put(tempXFloor+"",tempList); 
```

然后，当我平移时，我得到当前位置，将其放置并检查地图中是否存在条目。如果存在条目，我将 ArrayList 中的所有节点添加到 nodesOnScreen。nodesOnScreen 是一个 ArrayList 类型，我将在平移时将节点添加到该列表中，同样，屏幕外的节点将从 nodesOnScreen 变量中删除。

我只绘制 ArrayList nodesOnScreen 中的节点。

我将不胜感激在这件事上的一些指导，以及如何处理这样的大数据结构。我是朝着正确的方向前进还是我错过了一个明显的“技巧”来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:19:39.053

你想要的属于[空间分区结构](http://en.wikipedia.org/wiki/Space_partitioning)的范畴。

你所描述的东西是一种特殊形式的[统一网格或垃圾箱](http://en.wikipedia.org/wiki/Bin_%28computational_geometry%29)。通用版本与您的不同，因为每个 bin 的大小可能超过 1 个单位，因此更适合不同分辨率的数据集。Bins 通常对于或多或少均匀分布的数据集很有用，实现起来也非常简单。查找屏幕上的元素只需要查找您的视口所在的所有 bin。

如果您的数据集不均匀，即有紧密的团块和大的空白空间，您可能想尝试另一种结构，如[四叉树](http://en.wikipedia.org/wiki/Quadtree)。

此外，如果您使用的是哈希表或任何其他 java 容器，请通过将 int 装箱为 Integer ( `Map<Integer, ...>`) 来使用 int，不要将其转换为字符串，这会慢得多并且消耗更多内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T17:21:17.467

有几点需要思考：

1.  你的节点有多复杂？如果它们只是点，您可以考虑在[WritableImage](http://docs.oracle.com/javafx/2/api/javafx/scene/image/WritableImage.html)上绘制它们并节省大量内存。对于更复杂的情况，您可能需要使用[Canvas](http://docs.oracle.com/javafx/2/api/javafx/scene/canvas/Canvas.html)。无论哪种方式，您都将节省大量的事件处理程序、属性和其他小东西。

2.  另一个重要的问题是数据视图的相关性。如果您提供地图或类似的东西，那么用户只关心可见部分。其余的可以存储在磁盘缓存中，根据[帕累托原则](http://en.wikipedia.org/wiki/Pareto_principle)，只有 20% 的数据会有很大用处。因此，您可以相应地进行计划，并且仅针对可见部分使用真实的图形节点（并且可能为了用户体验而预加载一些调整后的部分）。

3.  “分而治之”的构想。即使您不想根据计划 (2) 限制用户视图，您也不能一直需要 1500 万个节点。不在 UI 库中，恐怕没有足够大的显示器。因此，将您的数据分成多个段并一次加载一个段。如果您需要对整个集合执行任何类型的计算——不要使用节点，使用最简单的实现并在某些后台进程中执行计算。

4.  现有的解决方案总是在做大事之前进行调查。例如，有很多像[PojoCache](http://www.samaxes.com/2009/03/jboss-pojocache-configuration/)这样的缓存库，只有在您将数十亿个节点分成组时，它们才能无缝地允许您使用相关数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T13:31:53.520

您可以尝试使用数据虚拟化和数据提供程序“即时”构建它。不要使用 RAM 来保存大数据。使用数据库查询。实现您的 List 类型并在那里实现索引器，它将从数据库中返回一个项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T17:47:40.443

考虑详细程度。您不可能在屏幕上看到 1500 万个不同的点（没有足够的像素使单个节点前景在背景之上可见）。有两种类型的详细级别方法可用：

*   图形：使用一个非常大的画布（例如，10M x 10M），一次绘制小图块（例如，1K x 1K 像素）并缩小这些图块以组成最终图像（例如，1K x 1K -> 10 x 10，两次，允许您的 10M x 10M 虚拟画布缩小为 1K x 1K 图像）。

*   语义：将节点簇聚合成单个节点，并绘制簇节点而不是单个节点。您可以在多个级别上执行此操作。实际上，如果您计划绘制图形，这正是图形绘制算法将在下面执行的操作（在没有某种层次分解的情况下，没有图形绘制算法在合理的时间内处理超过 50K 的节点）。

在这两种情况下，您都会按需提供某种缩放和详细信息；主概览仅用于平移和放大特定细节。某种空间索引（四叉树是最常见的）将允许您从磁盘或辅助存储中快速检索切片。在语义缩放场景中，您将改为向每个节点添加“父”字段，构建一个巨大的（外部序列化；除非您真的必须在内存中加载 15M 节点，否则不要在内存中加载）节点树。

# jquery - 带有嵌套元素的 Tooltip v1.3

> ID：13933735
> 
> 赞同：0
> 
> 时间：2012-12-18T13:06:59.767
> 
> 标签：jquery, plugins, nested, tooltip

我有嵌套 div 的工具提示问题，使用 1.3 版本的[jquery 工具提示插件](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)。

有两个div：

```
<div class="div1" title="title1">
    <p>some text</p>
    <div class="div2" title="title2">
        some content
    </div>
</div> 
```

这工作正常：

```
$('.div1').tooltip(); 
```

现在，当我为嵌套 div 设置工具提示时：

```
$('.div2').tooltip(); 
```

它不起作用。工具提示`.div1`一直显示，无论鼠标是否悬停`.div1`或`.div2`

问题出在哪里？

# arrays - 遍历 stdClass 对象数组

> ID：13933744
> 
> 赞同：0
> 
> 时间：2012-12-18T13:07:28.407
> 
> 标签：arrays, foreach, loops, stdclass

我在 PHP 方面非常非常新手，但慢慢学习 :) 我有一个函数可以返回一个带有多个数组的 stdClass 对象（见下面的摘录）。

我想用 foreach 循环遍历它，并用某些值进行一些计算。有人能指出我的好方向吗？

** 摘录输出 print_r $result **

```
stdClass Object
(
    [processor] => stdClass Object
        (
            [code] => 0
            [message] => OK
            [rid] => 289411
            [testmode] => 1
        )

    [handler] => stdClass Object
        (
            [statistics] => Array
                (
                    [0] => Array
                        (
                            [eventdate] => data
                            [eventstatus] => data
                            [programid] => data
                            [programname] => data
                            [eventcurrency] => data
                            [clicks] => data
                        )
                    [1] => Array
                        (
                            [eventdate] => data
                            [eventstatus] => data
                            [programid] => data
                            [programname] => data
                            [eventcurrency] => data
                            [clicks] => data
                        )

                        )

                    ) 
```

例如，我想做的是将所有 [clicks] 值相加，然后打印所有 [clicks] 值的总和。

非常感谢您提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:11:21.087

尝试这个：

```
$clicks = 0;
foreach($result->handler->statistics as $arrData){
    //calc like this
    $clicks += $arrData['clicks'];
}
echo "Clicks: " . $clicks; 
```

# svn - 如何将两个功能分支与颠覆合并？

> ID：13933745
> 
> 赞同：0
> 
> 时间：2012-12-18T13:07:38.720
> 
> 标签：svn, version-control, branch

我正在开发一个功能分支，该分支是一个月前从开发分支分支出来的。
我的朋友正在开发另一个功能分支，该分支也是从 dev 分支分支出来的。
问题是，我想更新他的一些提交。我不想用我的提交来更新他。我不想等到他将他的分支与树干合并。

我尝试将我的分支与他的分支“干合并”，但没有得到任何结果。
请问有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:15:13.060

一种方法是让您的朋友导出带有更改的补丁，然后您可以将补丁应用到您的分支。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/643868/how-to-apply-a-patch-using-svn-export)。

附带说明一下，如果您打算长期进行这种分布式开发，您可能会认真考虑切换到 git 之类的东西。它的学习曲线可能比 svn 更陡峭，但它使处理这样的多个分支变得更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-05T21:00:32.277

老问题，但是因为我在这里寻找正确答案并找到了正确答案，所以答案在`svn help merge`文档中详细描述的“2-URL合并”中

简而言之，

1.  从 b1 和 b2 上的主干进行追赶合并
2.  `svn sw ^/branches/b1`
3.  `svn merge ^/trunk ^/branches/b2`
4.  解决任何冲突
5.  `svn commit -m "Merging the changes from b2 into b1 to continue working on both features in b1"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T17:58:24.183

你**必须阅读文档**，特别是 -`svn help merge`

简而言之：在 SVN 中，您可以将**任何源**合并到**任何目标**，即您可以将他分支中的一些修订合并到您的。“一些修订”意味着您必须使用第二种合并形式

> 这种形式称为 'cherry-pick' 合并：
> 
> ```
>  svn merge [-c M[,N...] | -r N:M ...] SOURCE[@REV] [TARGET_WCPATH] 
> ```

# android - 片段隐藏动画未播放

> ID：13933749
> 
> 赞同：8
> 
> 时间：2012-12-18T13:08:04.183
> 
> 标签：android, android-fragments, android-animation

我正在尝试用幻灯片动画切换我的片段

使用此代码：

```
FragmentManager manager = getSupportFragmentManager();
FragmentTransaction transaction = manager.beginTransaction();        
SearchPanelFragment existingFragment = (SearchPanelFragment) manager.findFragmentByTag(SearchPanelFragment.FRAGMENT_NAME);        
transaction.setCustomAnimations(R.xml.slide_down_search_panel, R.xml.slide_up_search_panel);        
if (existingFragment != null) {
    if (existingFragment.isVisible())
        transaction.remove(existingFragment);       
} else {
    transaction.add(R.id.top_panel_fragment, new SearchPanelFragment(this), SearchPanelFragment.FRAGMENT_NAME);
}

    transaction.commit(); 
```

到目前为止，我只能在`transaction.add`何时播放退出动画？我只能在使用时得到它，`transaction.replace`但后来我只是用相同的新片段交换一个旧片段，我想要的是隐藏/删除/分离/任何必要的东西，让它在播放退出动画时消失

编辑：我尝试隐藏、删除和分离。无论我做什么，动画都不会播放。它仅在添加、显示和替换时播放

编辑2：第二个动画可能有问题。请看一下它们。第一个滑下来，似乎工作得很好。

滑下

```
<translate
    android:duration="500"
    android:fromXDelta="0%"
    android:fromYDelta="-100%"
    android:toXDelta="0%"
    android:toYDelta="0%" /> 
```

向上滑动

```
<translate
    android:duration="700"
    android:fromXDelta="0%"
    android:fromYDelta="0%"
    android:toXDelta="0%"
    android:toYDelta="-100%" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T00:13:00.453

您实际上使用了错误的功能。

根据以下文档[`setCustomAnimations(int enter, int exit)`](http://developer.android.com/reference/android/app/FragmentTransaction.html#setCustomAnimations%28int,%20int%29)：

> 为在此事务中进入和退出的片段设置要运行的特定动画资源。**弹出回栈时不会播放这些动画。**

相反，您应该使用[`setCustomAnimations (int enter, int exit, int popEnter, int popExit)`](http://developer.android.com/reference/android/app/FragmentTransaction.html#setCustomAnimations%28int,%20int,%20int,%20int%29)：

> Set specific animation resources to run for the fragments that are entering and exiting in this transaction. **The `popEnter` and `popExit` animations will be played for enter/exit operations specifically when popping the back stack.**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T13:18:00.400

## 编辑

[该错误已于 2013 年 6 月 7 日修复。](https://github.com/android/platform_frameworks_support/commit/495efcad8c8865e3e6f14e4ea3d79cfb1d2410f9)我相信从修订版 18 开始，该错误已得到修复。

如果您使用的是最新的支持库修订版，这不再是问题

## 旧答案

[http://code.google.com/p/android/issues/detail?id=32405](http://code.google.com/p/android/issues/detail?id=32405)支持库中存在错误。让它工作的唯一机会是获取支持库源并自己重新编译

# iphone - 在逗号分隔值文件中搜索值

> ID：13933752
> 
> 赞同：1
> 
> 时间：2012-12-18T13:08:17.843
> 
> 标签：iphone, csv, nsstring, full-text-search, nsautoreleasepool

您好我已经实现了以下在 csv 文件中搜索值的方法：

```
- (void)recordsForValue:(NSString*)searchedValue {

NSAutoreleasePool *pool = [[NSAutoreleasePool alloc]init];

NSError*  err;

    NSString *csvFilePath = //path of csv file
    NSString *csvString = nil;
    csvString = [[NSString alloc]initWithContentsOfFile:csvFilePath encoding:NSASCIIStringEncoding error:&err];
    csvFilePath = nil;
    NSRange searchRange = NSMakeRange(0,csvString.length);
    NSRange foundRange;
    int i=0;

    locationRecordsArray = [NSMutableArray array];

    while (searchRange.location <= csvString.length) {
        NSString *sFinalResult = nil;

        searchRange.length = csvString.length-searchRange.location;
        foundRange = [csvString rangeOfString:searchedValue options:NSCaseInsensitiveSearch range:searchRange];
        if (foundRange.location != NSNotFound) {
            i++;

            NSRange endDivRange;
            NSRange startRange;

            endDivRange.location = foundRange.length + foundRange.location;
            endDivRange.length   = [csvString length] - endDivRange.location;
            endDivRange = [csvString rangeOfString:@"\n" options:NSCaseInsensitiveSearch range:endDivRange];

            if (endDivRange.location != NSNotFound)
            {
                // Tags found: retrieve string between them
                foundRange.location += foundRange.length;
                foundRange.length = endDivRange.location - foundRange.location;
            }

            startRange.location = 0;
            startRange.length = foundRange.location;
            NSString* sTemp = nil;
            sTemp = [[NSString alloc]initWithString:[csvString substringWithRange:startRange]];

            startRange = [sTemp rangeOfString:@"\n" options:NSBackwardsSearch range:startRange];
            [sTemp release];
            if (startRange.location != NSNotFound)
            {
                // Tags found: retrieve string between them
                foundRange.location = startRange.location;
                foundRange.length =   endDivRange.location - foundRange.location;

                sFinalResult = nil;
                sFinalResult = [[NSString alloc]initWithString:[csvString substringWithRange:foundRange]];
                if(sFinalResult != nil)
                    [locationRecordsArray addObject:sFinalResult];
                [sFinalResult release];

            }

            // found an occurrence of the substring! do stuff here
            searchRange.location = foundRange.location+foundRange.length;
        } else {
            // no more substring to find
            break;
        }
    }
    [csvString release];

    [self insertLocationRecordsInDatabase]; // insert records of locationArray

[self performSelectorOnMainThread:@selector(showScanningView) withObject:nil waitUntilDone:NO];
[pool drain];
} 
```

1.上面的方法是在单独的线程中调用的，所以我们要在单独的自动释放池中处理。

```
2\. The 'searchedValue' is a value to be searched in the CSV file string.

3\. Whenever we get a location for the value searched in the csvString, we add the complete line of string in an array.The line
is extracted by searching for newline (i.e \n) character.
4\. This code is running fine if the length of csvString is small. But in case of a very large csvString, the app is crashing with low
memory warning. I checked in Instruments. The problem is with some
String variable which is reaching the size of 100s of MB and the app
is closing because of low memory.But I am not able to solve how to
optimise the memory of my string variables.Please give some
solution. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:22:35.477

我的问题终于解决了！！我使用以下代码来优化内存：

```
- (void)recordsForLocationValue:(NSString*) searchedValue
 {

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc]init];

    NSError*  err;

         NSString *csvFilePath = //path of csv file
        NSMutableString *csvString = [NSMutableString stringWithContentsOfFile:csvFilePath encoding:NSASCIIStringEncoding error:&err];
        csvFilePath = nil;
        NSRange searchRange = NSMakeRange(0,csvString.length);
        NSRange foundRange;
        int i=0;
        NSString* sTemp = nil;

        locationRecordsArray = [[NSMutableArray alloc]init];

        while ([csvString length] > 1) {

            searchRange.length = csvString.length-searchRange.location;
            foundRange = [csvString rangeOfString: searchedValue
 options:NSCaseInsensitiveSearch range:searchRange];
            if (foundRange.location != NSNotFound) {
                i++;

                NSRange endDivRange;
                NSRange startRange;

                endDivRange.location = foundRange.length + foundRange.location;
                endDivRange.length   = [csvString length] - endDivRange.location;
                endDivRange = [csvString rangeOfString:@"\n" options:NSCaseInsensitiveSearch range:endDivRange];

                if (endDivRange.location != NSNotFound)
                {
                    // Tags found: retrieve string between them
                    foundRange.location += foundRange.length;
                    foundRange.length = endDivRange.location - foundRange.location;
                }

                startRange.location = 0;
                startRange.length = foundRange.location;
                sTemp = [csvString substringWithRange:startRange];
                startRange = [sTemp rangeOfString:@"\n" options:NSBackwardsSearch range:startRange];
                if (startRange.location != NSNotFound)
                {
                    // Tags found: retrieve string between them
                    foundRange.location = startRange.location;
                    foundRange.length =   endDivRange.location - foundRange.location;

                    sTemp = [csvString substringWithRange:foundRange];
                    if(sTemp != nil)
                        [locationRecordsArray addObject:sTemp];
                }

                // found an occurrence of the substring! do stuff here
                searchRange.location = foundRange.location+foundRange.length;

                [csvString deleteCharactersInRange:NSMakeRange(0, searchRange.location-1)];

                searchRange.location = 0;
            }
            else {
                NSLog(@"no more substring to find");

                // no more substring to find
                break;
            }
        }

        [self insertLocationRecordsInDatabase];

    [self performSelectorOnMainThread:@selector(showScanningView) withObject:nil waitUntilDone:NO];
    [pool drain];
    [NSThread exit];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:11:12.647

使用内存映射，因此您不必一次加载所有内容。
请参阅：[替代 NSData 已弃用的 dataWithContentsOfMappedFile](https://stackoverflow.com/questions/12623622/substitute-for-nsdata-deprecated-datawithcontentsofmappedfile)

或者

将文件拆分为几个较小的文件

# objective-c - NSDateFormatter 提前一年的日期为 2012 年 12 月 30 日和 2012 年 12 月 31 日

> ID：13933754
> 
> 赞同：3
> 
> 时间：2012-12-18T13:08:29.243
> 
> 标签：objective-c

我是这个领域的新手。这个问题可能很愚蠢。

`NSDateFormatter`提前一年的日期为 2012 年 12 月 30 日和 2012 年 12 月 31 日。对于 2013 年 12 月 30 日和 2013 年 12 月 31 日，它还将把这一年推迟到 2014 年。

我的代码是：

```
 -(NSString*)getDateOrTime:(NSDate *)inDate formatter:(NSString *)lformat
 {
 NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
     [formatter setDateFormat:lformat];//@"MMM-dd-yyyy"];
     NSString *currentDate = [formatter stringFromDate:inDate];// here it is giving wrong    date
     // it is happening for only mentioned specific dates only
     [formatter release];

     return currentDate;
 } 
```

我怎样才能得到它给我正确的日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:28:39.443

由于您没有提供有关时区的格式化程序信息，因此 NSDateFormatter 将日期假定为 GMT 时间。您需要设置正确的时区 — 设置为 dateFormatter 或将其添加到字符串中。在 Stack Overflow 上有数百篇关于此的帖子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T13:14:30.557

格式应如下所示。

提供的日期格式应该是`@"MM-dd-yyyy"`

```
 [formatter setDateFormat:lformat];//@"MM-dd-yyyy"]; 
```

您`MM`只能按照日期格式使用。

# php - Zend Framework 2 - 自定义表单验证

> ID：13933755
> 
> 赞同：1
> 
> 时间：2012-12-18T13:08:29.267
> 
> 标签：php, validation, zend-framework2

我需要一个自定义表单验证。所以我写了一个类似[这个](http://framework.zend.com/manual/2.0/en/modules/zend.validator.writing-validators.html)的函数。

到现在为止还挺好。但我真的有问题把 PHP 文件/类放在哪里。

它应该把它放在 vendor/ 作为一个似乎合乎逻辑的库。我使用了这个路径：vendor/company/Validator/MyValidator.php。但我不知道如何包括我的课程。

谁能给我一个简短的方法来设置供应商模块或使用自定义验证器所需的任何东西？

互联网上有很多教程，但大多数都是关于验证逻辑的，而不是 Zend 的“基础知识”。

谢谢！

**编辑：**

我找到[了这个链接](https://stackoverflow.com/a/13529998/1331671)并将我的代码配置如下：

我的代码如下：

```
 use MyStuff\Validator\CustomValidator as CustomValidator;
        ...
        $inputFilter->add($factory->createInput(array(
            'name'     => 'zip',
            'required' => false,
            'filters'  => array(
                array('name' => 'Int'),
            ),
             'validators' => array(
                  array(
                      'name' => array( new CustomValidator ),
                      'options' => array(
                          'min' => 1,
                      ),
                  ),
                ),
        )));
        ... 
```

当我尝试提交表单时，我看到部分验证器代码为纯文本，并收到一个无法找到该类的致命错误......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:52:04.790

我现在将假设一个目录结构。

供应商名称：`MyStuff`

FQCN:`MyStuff\Validator\AwesomeValidator;`

文件路径：`./vendor/mystuff/library/MyStuff/Validator/AwesomeValidator`

鉴于 Zend Framework 2 遵循[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)自动加载标准，您需要将自动加载器路径添加到供应商自动加载器。ZF2 使用 Composer 来处理自动加载。当您通过 Composer 安装 OWN Vendor 时，这是自动完成的。如果您需要手动执行此操作，请在内部执行`composer.json`

```
"autoload": {
    "psr-0": {
        "Mystuff\\": "vendor/mystuff/library/"
    }
} 
```

我希望这会给你足够的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:04:20.273

使用 composer 的替代方法是一种更手动的方法，它可能会避免您的包含问题。此页面上的评论可能有助于向您展示手动放置内容的位置：http: [//framework.zend.com/manual/2.0/en/modules/zend.validator.writing-validators.html](http://framework.zend.com/manual/2.0/en/modules/zend.validator.writing-validators.html)

# magento - Magento 1.7 收集和加入字段

> ID：13933766
> 
> 赞同：1
> 
> 时间：2012-12-18T13:09:20.920
> 
> 标签：magento, magento-1.7

我有一个`starmall_config_shop`带有列的自定义表`id`和`name`.

`shop_id`我在产品表中添加了自定义属性。

我想`name`从`starmall_config_shop`

当我做

```
$rs = Mage::getModel('catalog/product')
                ->getCollection()
                ->addAttributeToSelect('shop_id');

$rs->joinField('shop_name','starmall_config/shop','name','id=shop_id'
    ,NULL,'left'); 
```

我得到错误

`Unknown column 'at_shop_id.value' in 'on clause'`

`$rs->printlogquery(true)`给出：

```
SELECT `e`.*, `at_shop_name`.`name` AS `shop_name` FROM `catalog_product_entity` AS `e`
 LEFT JOIN `starmall_config_shop` AS `at_shop_name` ON (at_shop_name.`id`=at_shop_id.value) 
```

我看到我可能缺少对属性表的连接。

从哪里来`at_shop_id.value`？如何获取`name`查询中的列？

====================

当前的工作解决方案是使用：

`->addAttributeToSelect('shop_id', 'left')` ---> 作品

`->addAttributeToSelect('shop_id')` ---> 不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:19:15.807

问题是

```
'id=shop_id'. 
```

尝试使用

```
"entity_id=shop_id" 
```

如果 shop_id 它是表 at_shop_name 中的一个字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:37:28.547

在 system.log 我看到：

> 可恢复的错误：Mage_Catalog_Model_Resource_Product_Collection 类的对象无法转换为字符串

我搜索了一下，发现还有第二个参数：

```
addAttributeToSelect($attribute, $joinType=false) 
```

当我现在使用它时它可以工作：

```
addAttributeToSelect('shop_id', 'left'); 
```

然后生成的查询是：

```
SELECT e.*, at_shop_id.value AS shop_id, at_shop_name.name AS shop_name
FROM catalog_product_entity AS e
LEFT JOIN catalog_product_entity_int 
    AS at_shop_id 
   ON (at_shop_id.entity_id = e.entity_id) 
  AND (at_shop_id.attribute_id = 973) 
  AND (at_shop_id.store_id = 0)
LEFT JOIN starmall_config_shop 
    AS at_shop_name 
   ON (at_shop_name.id=at_shop_id.value) 
```

但是我还是不知道为什么？？

# c# - 将选择时间限制为特定小时

> ID：13933767
> 
> 赞同：-2
> 
> 时间：2012-12-18T13:09:27.283
> 
> 标签：c#, winforms, time, datepicker

我有一个`DateTimePicker`格式为 00:00 的申请表。我需要用户能够选择直到 05:00 的时间。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:12:46.300

将[`MaxDate`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.maxdate.aspx)控件的属性设置为您喜欢的任何内容。
这将限制选择直到 this `Datetime`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:16:31.893

检查这些属性：[DisplayDateStart](http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker.displaydatestart%28v=vs.95%29.aspx)、[DisplayDateEnd](http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker.displaydateend%28v=vs.95%29.aspx)、[MinDate](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.mindate.aspx)和[MaxDate](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.maxdate.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:18:16.137

这可以像下面这样完成假设我想将我的时间设置为 6:30 你可以这样做

```
DateTimePicker1.Value = new DateTime( DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day, 6, 30, 0 ) 
```

查看 MSDN 站点以获取更多参考

[DateTimePicker.Value 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.value.aspx)

# python - 芹菜 - 链内组

> ID：13933768
> 
> 赞同：10
> 
> 时间：2012-12-18T13:09:27.847
> 
> 标签：python, celery, celery-task

我想在链中使用一个组（或块），例如：

```
chain(getRange.s(3),  GROUP() , xsum.s() ) 
```

`GROUP()`一组任务在哪里`double()`，即`group(double(0),double(1),double(2))`。[How to chain a Celery task that return a list into a group?](https://stackoverflow.com/questions/13271056/how-to-chain-a-celery-task-that-returns-a-list-into-a-group)中发布了一个类似的问题？但没有解释如何将输出从组传递到链中的下一个任务。

```
@task
def getRange(x):
    return range(x)

@task
def double(nr):
    return nr*2

@task
def xsum(list):
    return sum(list) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T05:18:07.387

我不相信有一种方法可以使用单个链中的当前原语来做到这一点。在您提到的问题中传递回调将不允许您在小组任务完成时收听。您可以获得的最接近的是：

```
@task
def get_range(x):
  return range(x)

@task
def mapper(nr):
  return nr * 2

@task
def reducer(nrs):
  return sum(nrs)

@task
def double_then_sum(nrs):
  return (
    group([mapper.s(nr) for nr in nrs]) |
    reducer.s()
  )()

ar = (get_range.s(3) | double_then_sum.s())() # call the procedure
ar.result.result # get the result 
```

否则，您可以尝试使用[动态链接](https://github.com/celery/celery/pull/817)，这将导致更简单的解决方案，或者仅`map`在您不需要分组任务并行运行时使用。

# php - 备份和迁移安装错误

> ID：13933773
> 
> 赞同：1
> 
> 时间：2012-12-18T13:09:47.877
> 
> 标签：php, drupal, drupal-7, drupal-modules

我已经安装了 Drupal 7，并且正在尝试安装 Backup & Migrate 模块。我收到以下错误：

> 警告：fileowner(): stat failed for temporary://updD58A.tmp in update_manager_local_transfers_allowed()
> （C:\inetpub\wwwroot\DrupalDev\modues\update\update.manager.inc 的第 932 行）。

任何人都知道我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:27:01.707

转到`admin/config/media/file-system`管理文件系统设置并确保将值设置`Temporary directory`为有效文件夹。

您可以将 的值设置`Temporary directory`为`/tmp`。

我相信在您解决此问题之前，您将无法上传任何文件。

# ocaml - 模块和接口的设计

> ID：13933782
> 
> 赞同：6
> 
> 时间：2012-12-18T13:10:40.450
> 
> 标签：ocaml

我想定义一个 interface `PROPERTY`，以及至少 2 个模块`Type`并`Formula`与之匹配：

```
module type PROPERTY =
sig
  type t
  val top : t
  val bot : t
  val to_string: t -> string
  val union: t -> t -> t
  val intersection: t -> t -> t
end

module Type = (struct
  type t =
   | Tbot
   | Tint
   | Tbool
   | Ttop
  ...      
end: PROPERTY)

module Formula = (struct
  type t =
   | Fbot
   | Ftop
   | Fplus of int * Type.t
   ...
  let union = 
   ... Type.union ...
  ...      
end: PROPERTY) 
```

有两个要求：

1）我希望`Type`可以在外部调用的构造函数（如有必要，所有程序）

2) 某些值的一部分`Formula`包含 的值`Types`，例如`Fplus (5, Type.Tint)`类型为`Formula`；还有一些函数`Formula`需要调用一些函数`Type`，例如`Formula.union`需要调用`Type.union`

谁能告诉我如何修改上述声明以满足我的要求？如有必要，可以添加额外的模块...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T13:47:59.683

不要将`: PROPERTY`密封铸件应用于模块声明。这隐藏了返回模块的额外信息。你应该使用：

```
 module Type = struct .. end
 module Formula = struct .. end 
```

如果您仍然想检查`Type`并`Formula`满足`PROPERTY`界面，您可以单独执行此操作：

```
 let () =
   ignore (module Type : PROPERTY);
   ignore (module Formula : PROPERTY);
   () 
```

# javascript - 使用javascript获取客户端的本地IP地址

> ID：13933783
> 
> 赞同：-3
> 
> 时间：2012-12-18T13:10:42.040
> 
> 标签：javascript, .net, ip

> **可能重复：**
> [仅使用 Javascript 获取客户端 IP？](https://stackoverflow.com/questions/391979/get-client-ip-using-just-javascript)

如何检索/获取客户端 IP 地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:25:48.283

如果您需要服务器端脚本，我的意思是**`Java`**代码，然后参考这个

```
import java.net.InetAddress;
import java.net.UnknownHostException;
import java.util.logging.Level;
import java.util.logging.Logger;

public class IPAddress{
    public static void main(String[] a) {

        try {
            InetAddress thisIp = InetAddress.getLocalHost();
            System.out.print(thisIp.getHostAddress());     
        } catch (UnknownHostException ex) {
            Logger.getLogger(study.class.getName()).log(Level.SEVERE, null, ex);
        }

    }
} 
```

**更新**

正如你所说，你需要在`javaScript`. 请参考下面的代码，让我知道。

```
<html>
<head>
<script type="text/javascript" language="javascript">
  function myIP() {
    if (window.XMLHttpRequest) 
   xmlhttp = new XMLHttpRequest();
    else 
   xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

    xmlhttp.open("GET","http://jsonip.appspot.com/",false);
    xmlhttp.send();

    hostipInfo = xmlhttp.responseText;
    obj = JSON.parse(hostipInfo);
    document.getElementById("IP").value=obj.ip;
    document.getElementById("ADDRESS").value=obj.address;
}
</script>
</head>
<body onload="myIP()">
IP :<input type="text" id="IP" name="IP" />
ADDRESS :<input type="text" id="ADDRESS" name="ADDRESS" />

</body>
</html> 
```

您也可以参考[如何显示客户端 IP 地址](https://apptech-solution.blogspot.com/2016/08/how-to-display-client-ip-address.html)。

# visual-studio-2010 - Visual Studio 2010 和断点

> ID：13933788
> 
> 赞同：4
> 
> 时间：2012-12-18T13:11:13.447
> 
> 标签：visual-studio-2010, debugging, breakpoints

我正在调试我的项目，在调试时我需要监控两套“东西”。
有时设置 A 有时设置 B，对于这两个设置我需要不同的断点，我可以将断点收集到组然后禁用/启用断点组吗？
否则，我必须每次为每个流设置正确的断点，然后更改它们..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:38:24.613

断点有`Labels`.

1.  首先为每个 BreakPoint `Alt F9`+`L`或设置一个标签`Right Click -> Edit Labels`。

2.  命名它们`SetA`并`SetB`

3.  使用搜索文本框并输入`SetB`- 您只会看到与该标签匹配的断点。

4.  现在按下`Enable or Disable all breakpoints matching the current search criteria`按钮。只有那些断点会被启用。

现在只需在 TextBox 中键入 SetA 或 SetB 即可启用/禁用整个组

请注意，您还具有导出和导入按钮，因此您可以保存这些设置并在需要时重新加载它们。

# php - XAMPP 1.7.4 错误：myst be run on root directory

> ID：13933789
> 
> 赞同：-1
> 
> 时间：2012-12-18T13:11:18.630
> 
> 标签：php, mysql, xampp

我最新的 XAMPP 运行良好，但卸载了它，因为我的同学制作的代码无法在我的身上运行，她只能使用旧 XAMPP 运行它。但它不会运行。我试过 1.7.5 还是不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:25:31.253

PHP.INI 添加：

扩展=php_openssl.dll

扩展=php_intl.dll

# google-drive-api - 无法从 google drive API 检索文件内容

> ID：13933790
> 
> 赞同：10
> 
> 时间：2012-12-18T13:11:17.790
> 
> 标签：google-drive-api

我似乎无法通过 google drive SDK 检索文件的内容。为了重现这个问题，我使用[API Explorer](https://developers.google.com/drive/v2/reference/files/get#try-it)来获取一个小文本文件的元数据：

```
200 OK

- Show headers -

{

 "kind": "drive#file",
 "id": "0B75zvzRT_NusaDBtSTVmWWk1cVk",
 "etag": "\"B6kWtzuiQYCrVi2MWyRaub0CRyo/MTM1NTgzNDEzMjU5MA\"",
 "selfLink": "https://www.googleapis.com/drive/v2/files/0B75zvzRT_NusaDBtSTVmWWk1cVk",
 "webContentLink": "https://docs.google.com/uc?id=0B75zvzRT_NusaDBtSTVmWWk1cVk&export=download",
 "alternateLink": "https://docs.google.com/file/d/0B75zvzRT_NusaDBtSTVmWWk1cVk/edit",
 "iconLink": "https://ssl.gstatic.com/docs/doclist/images/icon_10_text_list.png",
 "thumbnailLink":     "https://lh4.googleusercontent.com/ntOMGJ9Is5KigDUzpOe6xKRqVqHPyeeXPImG1vZTF2FDM5YOyeCZT62FsdBWTnetBA=s220",
 "title": "sync.txt",
 "mimeType": "text/plain",
 "description": "description",
 "labels": {
  "starred": false,
  "hidden": false,
  "trashed": false,
  "restricted": false,
  "viewed": true
 },
 "createdDate": "2012-12-18T11:49:21.710Z",
 "modifiedDate": "2012-12-18T12:35:32.590Z",
 "modifiedByMeDate": "2012-12-18T12:35:32.590Z",
 "lastViewedByMeDate": "2012-12-18T12:35:32.416Z",
 "parents": [
  {

   "kind": "drive#parentReference",
   "id": "0B75zvzRT_NusdVVJeGk2dVc2VHM",
   "selfLink": "https://www.googleapis.com/drive/v2/files/0B75zvzRT_NusaDBtSTVmWWk1cVk/parents/0B75zvzRT_NusdVVJeGk2dVc2VHM",
   "parentLink": "https://www.googleapis.com/drive/v2/files/0B75zvzRT_NusdVVJeGk2dVc2VHM",
   "isRoot": false
  }
 ],
 "downloadUrl": "https://doc-0g-0-docs.googleusercontent.com/docs/securesc/b2hod7vud4bdud0ju4mut5hh2assmdju/rmi0iqd62g0im724ngmc5uva7femfffo/1355832000000/00903399969355284739/00903399969355284739/0B75zvzRT_NusaDBtSTVmWWk1cVk?h=16653014193614665626&e=download&gd=true",
 "userPermission": {
  "kind": "drive#permission",
  "etag": "\"B6kWtzuiQYCrVi2MWyRaub0CRyo/kH0lkP-s4aFu1o5itR2fFqyLM6o\"",
  "id": "me",
  "selfLink": "https://www.googleapis.com/drive/v2/files/0B75zvzRT_NusaDBtSTVmWWk1cVk/permissions/me",
  "role": "owner",
  "type": "user"
 },
 "originalFilename": "sync.txt",
 "fileExtension": "txt",
 "md5Checksum": "ecd21579645508d1c206d5e6e20fd101",
 "fileSize": "156",
 "quotaBytesUsed": "156",
 "ownerNames": [
  "Sam Smith"
 ],
 "lastModifyingUserName": "Sam Smith",
 "editable": true,
 "writersCanShare": true
} 
```

然后我单击downloadUrl 链接，我总是得到一个空响应，即200 响应与一个空的正文。如果我从 URL 的末尾删除“gd=true”参数，它会很好地下载。在我的程序中，除了删除“gd = true”也不起作用（可能是因为程序在服务器上运行，因此我没有登录到我的帐户）之外，同样的事情发生了。

我的主要问题是为什么 downloadUrl 链接在不摆弄参数的情况下不返回响应？

[更新：发现其他人在此处](https://stackoverflow.com/questions/13382707/download-using-google-drive-api-no-error-but-not-result)、[此处](https://stackoverflow.com/questions/12173712/google-drive-and-authorized-http-get-for-downloading-a-file)和[此处](https://stackoverflow.com/questions/13429348/ios-google-drive-sdk-api-to-download-the-file-data)报告完全相同的问题

解决方案：好的，我终于解决了。对于downloadURL 上的GET 请求，您需要在标头中发送访问令牌，即发送“授权：承载{您的访问令牌}”标头。不要将访问令牌作为查询字符串的一部分发送。我在 Drive SDK 中使用的所有其他 API 调用都可以使用访问令牌作为查询字符串的一部分 - 除了这个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T09:14:52.237

好的，我终于解决了。对于downloadURL 上的GET 请求，您需要在标头中发送访问令牌，即发送“授权：承载{您的访问令牌}”标头。不要将访问令牌作为查询字符串的一部分发送。我在 Drive SDK 中使用的所有其他 API 调用都可以使用访问令牌作为查询字符串的一部分 - 除了这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-05T09:04:41.140

尝试使用以下代码进行请求

```
var service1=SetCredential();
var AccessToken=((Google.Apis.Auth.OAuth2.UserCredential)service1.HttpClientInitializer).Token.AccessToken;
String link = "https://www.googleapis.com/drive/v2/files/" + fileId ;

HttpWebRequest request = WebRequest.Create(link) as HttpWebRequest;
request.Method = "GET";
request.Headers.Add("Authorization", "Bearer " + AccessToken);
WebResponse response = request.GetResponse(); 
```

# linux - 如何使用 CRON 和 SCP 安排脚本每小时将文件从远程服务器复制到本地计算机，并带有时间戳？

> ID：13933791
> 
> 赞同：0
> 
> 时间：2012-12-18T13:11:16.813
> 
> 标签：linux, shell, ubuntu, cron

我是一名编程学徒，最近得到了一份要在终端上完成的工作，我需要一些帮助，或者只是一些关于我需要做什么的正确方向的指示。

我需要从远程服务器复制某个文件并每小时备份一次，其中包含时间戳。我知道如何使用 SSH 连接到服务器，我也知道如何使用 SCP 传输文件——它只是在编写我需要帮助的脚本。我知道我需要使用 CRON 来安排它我只是不知道如何将所有内容放在一起。我正在使用最新版本的 Ubuntu。

任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:13:54.230

只需创建一个shell脚本：

```
#!/bin/bash
scp username@host:file.log file.log.`date +%H%M%S` 
```

（省略了错误检查 - 不要忘记通过 使其可执行`chmod u+x`）

日期调用采用当前日期/时间，创建时间戳并将其附加到目标日志文件名。所以你会得到类似的东西：

```
file.log.131504 
```

这是基于时间的，但您可能需要一个日期。有关更多信息，请参见[此处](http://nixshell.wordpress.com/2007/03/11/timestamps-for-log-files/)和格式选项的[日期手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?date)。

请注意，cron 下的作业在缩减的环境（缩减的 PATH 等）下运行。所以一定要在你的脚本中设置所有适当的环境变量，cd 到正确的目录等，并通过以下方式记录结果：

```
* * * * * /home/user/mycronscript.sh 2>&1 >/tmp/test.log 
```

# javascript - 现在可以将 0.9.9 中的 Backbone 对象用作中介替代品吗？

> ID：13933793
> 
> 赞同：3
> 
> 时间：2012-12-18T13:11:24.153
> 
> 标签：javascript, backbone.js, backbone-events, mediator

我一直在阅读[Backbone Fundamentals](http://addyosmani.github.com/backbone-fundamentals/)并且一直计划在一个新项目中使用中介和外观模式，但是在阅读时我想知道为什么不能只使用应用程序主路由器对象或任何扩展的对象Backbone.Events 作为中介，而不是实现书中概述的订阅和发布方法。

现在 Backbone 0.9.9 的文档明确提到使用 Backbone 对象（现在从 Backbone.Events 扩展）作为全局事件总线，我对此更加好奇。谁能澄清这是否是一个不错的选择，如果不是，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T13:28:55.807

我认为使用`Backbone`根对象作为中介没有任何问题。将应用程序的主路由器用作事件总线不一定是一个好主意，因为这将要求路由器实例可被应用程序的每个部分全局访问。使用 Backbone 根对象在很大程度上避免了这个陷阱，因为它已经是一个全局单例实例。

*如果有人真的*想寻找不用`Backbone`作中介的理由，您可能会争辩说，这样做会将所有发布者和订阅者耦合到`Backbone`.，从而降低消费者代码的可移植性。此外，您失去了对您公开的界面的控制。在 AMD/Module 模式中，这意味着您必须将 Backbone 导入到没有访问`Backbone`根对象的业务的模块中。

我不认为这是一个问题，因为您的应用程序很可能完全依赖于 Backbone。但是，如果您感到偏执，则可以在`Backbone.Events`不暴露全局对象的情况下使用该实现：

```
//mediator.js
define(['backbone', 'underscore'], function(Backbone, _) {
    return _.extend({}, Backbone.Events);
}); 
```

在这种情况下，消费者只依赖接口而不是实现，并且可以通过自己实现`on`,`off`和`trigger`方法来更改中介中介的实现细节。

# php - 如何在会话中设置变量？

> ID：13933794
> 
> 赞同：0
> 
> 时间：2012-12-18T13:11:26.550
> 
> 标签：php, html, session, session-variables

您好，我想使用会话来设置语言设置。

所以我将从 http_language_accept 获得首选语言：

```
if (isset($_SERVER["HTTP_ACCEPT_LANGUAGE"])){
    $max   = 0.0;
    $languages = explode(",", (strtolower($_SERVER["HTTP_ACCEPT_LANGUAGE"])));
    foreach($languages as $language){
        $language = explode(';', $language);
        $q    = (isset($language[1])) ? ((float) $language[1]) : 1.0;
        if ($q > $max){
            $max = $q;
            $pref_language = $language[0];
        }
    }
    $pref_language = trim($pref_language);
} 
```

现在我想检查是否已经保存了以前访问中保存的设置：

```
if (isset($_SESSION['pref_lang'])){
    $_SESSION['pref_lang'] = $pref_language;
} 
```

这是第一个问题。调用页面时会显示错误 500。

此外，我想在发送 $_POST 时更改 $pref_language：

所以我有这个代码：

```
$one = $_POST['one'];

if(isset($_SESSION['pref_lang']) AND isset($one) ){
    $_SESSION['pref_lang'] = 'one';
    $_SESSION['pref_lang'] = $pref_language;
} 
```

如果有人能告诉我这是否是在使用会话时设置和更改变量的正确方法，那就太好了。

多谢。

更新：

好吧，关于答案，我使用了用户 olaf Dietsche 的方法。

所以我这样做了：

```
if (!isset($_SESSION['pref_lang'])){ //if the session does not exist
    if (isset($pref_language)){ //but the given $pref_language from above
        $_SESSION['pref_lang'] = $pref_language; //the session will be registered with the value of $pref_language
    }
}else{ 
    if (isset($_SESSION['pref_lang'])){ //in case of that an existing session from a previous visit
        if (isset($pref_language)){ //and the pref_language is set from above
            $_SESSION['pref_lang'] = $pref_language; //the session will be given a variable
            if (isset($one)){ // this will be the problem now when isset $_post 
                    $pref_language = 'one'; //$pref_language or even session will get a new value
                }
                if (isset($two)){
                    $pref_language = 'two';
                }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:22:12.490

当您查看您的 Web 服务器日志时，您将看到具体的错误消息。

我猜，在

```
if (isset($_SESSION['pref_lang'])){
    $_SESSION['pref_lang'] = $pref_language;
} 
```

`$pref_language`没有设置。尝试将其更改为

```
if (isset($_SESSION['pref_lang'])){
    if (isset($pref_language))
        $_SESSION['pref_lang'] = $pref_language;
    else
        echo 'pref_language is not set';
} 
```

看看错误是否消失了。否则如上所述，请查看您的服务器日志。

您不需要`isset($_SESSION['pref_lang'])`再次签入 else 部分，因为您已经在 if 部分中这样做了。

```
session_start();
...
if (!isset($_SESSION['pref_lang'])){ //if the session does not exist
    if (isset($pref_language)){ //but the given $pref_language from above
        $_SESSION['pref_lang'] = $pref_language; //the session will be registered with the value of $pref_language
    }
}else{ 
    //in case of that an existing session from a previous visit
    if (isset($pref_language)){ //and the pref_language is set from above
        $_SESSION['pref_lang'] = $pref_language; //the session will be given a variable
        if (isset($one)){ // this will be the problem now when isset $_post 
            $pref_language = 'one'; //$pref_language or even session will get a new value
        }
        if (isset($two)){
            $pref_language = 'two';
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:23:03.403

你不能检查`if (isset($_SESSION['pref_lang']))`

但你必须像那样通过邮件检查

```
 if (isset($_POST['pref_lang']))

   {
     $_SESSION['pref_lang']) = $_POST['pref_lang']) ;  // HERE you define the session variable
   } 
```

然后你可以 `$_SESSION['pref_lang'])`在你的代码中使用

*   发布/获取提交后的会话存储数据，因此您可以从发布/获取变量定义会话

# php - CMS 仅更新现有网站的一部分

> ID：13933798
> 
> 赞同：0
> 
> 时间：2012-12-18T13:11:40.463
> 
> 标签：php, content-management-system, simplepie

假设我有一个包含此类页面的静态站点：

[http://example.com/events.php](http://example.com/events.php)

我想使用 CMS 以仅更新博客时尚中的该页面，即多篇文章、分页和单篇文章的单页。我正在考虑一种方法来达到这样的结果。我记得 Blogger.com 有一个类似的功能，但我似乎再也找不到了。或者，也许我可以设置一个 WP/Tumblr 并通过 SimplePie 获取它的提要。

你有什么建议？

非常感谢，

-N。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:14:48.500

你知道任何 PHP 或 SQL 吗？您可以使用这些服务器端语言构建自己的简单 CMS（内容管理系统）。

如果您需要使用 FTP，那么它并不是真正的 CMS，而且看起来好像您会直接编辑页面，除非您更新单个 conf 文件。

使用 SQL，您可以设置 ACP（管理控制面板），您可以在其中动态更改所有内容，具体取决于您构建页面的方式。

如果您想了解如何构建自己的 SIMPLE CMS，请参阅[此链接。](http://css-tricks.com/php-for-beginners-building-your-first-simple-cms/)

因为您拥有自己的自定义网站，所以几乎不可能找到能够完全满足您需求的预构建系统。

# c# - c# linq 生成的查询长度超过限制。我们有什么办法可以提高这个限制吗？

> ID：13933801
> 
> 赞同：4
> 
> 时间：2012-12-18T13:11:45.380
> 
> 标签：c#, sql, linq, entity-framework

嗨，我正在构建一个 MVC 4 报告，并使用 EF5。数据库在 SQL 2005 上。

The report has a large amount of long string filters, when there are a lot of them selected, I got this error:"Some part of your SQL statement is nested too deeply. Rewrite the query or break it up into smaller queries."

选择过滤器并返回一个列表，在我使用的 LINQ 查询中：

```
DataContext.Entity.Where(list.Contains(column));
return IQueryable<Entity>; 
```

我猜这是超过限制的 LINQ 生成的 SQL 查询，我不知道限制是什么。

有什么办法可以控制这个限制吗？或者请指出我的猜测是否错误。

非常感谢。

感谢@AdrianFaciu 提供的以下链接，它真的很有帮助，我认为这是类似的问题。（我猜我的每个字符串过滤器的长度都太长了，而且数量很多。） [使用 Contains() 时达到 2100 参数限制（SQL Server）](https://stackoverflow.com/questions/656167/hitting-the-2100-parameter-limit-sql-server-when-using-contains)

我已经阅读了一些解决方法，但仍在寻找合适的解决方案，而不是通过生成字符串查询。至少现在看来，我必须逐步加载数据以减少查询的长度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:41:40.147

正确的解决方案是直接使用 SQL。EF 和 Linq 不是编写报告查询的工具。它是 ORM - 您可以使用它从数据库中获取对象与它们一起工作，也可能修改它们并将它们存储回数据库。

如果您需要复杂的查询只是为了从数据库中提取数据以构建报告或一些复杂的搜索引擎，您应该简单地传递 ORM 的复杂性并转到低级 SQL - 如果您达到查询或参数的大小限制，您真的需要它. 它将使您的查询更简单、更小、更快，并且允许您使用一些高级功能，如表值参数，以避免大的包含调用。

将所有报告从 SProcs 更改为 Linq 真的很愚蠢……您正在浪费时间来产生更糟糕的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T14:33:44.693

我在 EF 和 Firebird 上遇到了类似的问题——当 where 子句中的 linq 查询有两个包含时。解决方案简单但不优雅——LoadAll，并在内存中过滤它们。

建立列表.RemoveAll(x=> !RolesList.contains(x.id));

# sql-server - SSIS 包执行成功但没有发送邮件

> ID：13933803
> 
> 赞同：10
> 
> 时间：2012-12-18T13:12:18.607
> 
> 标签：sql-server, ssis

我已经创建了 SSIS 项目，它执行以下操作

控制流 ：-

![在此处输入图像描述](../Images/419f2f01988acdafa3582f3becfd71b6.png)

数据流：-

![在此处输入图像描述](../Images/52a4baba687e1a47f19c2463626a3fbc.png)

*   它首先删除excel表中的数据
*   创建新的 Excel 工作表
*   将数据库中的数据插入到excel文件中
*   发送该excel文件的邮件

当我通过右键单击包执行它并说执行它运行良好（已发送邮件）。但是当我在 Sql Server Agent 作业中安排包运行时，它显示“包执行成功”但没有发送邮件。虽然它能够将数据插入到 Excel 工作表中。

**那么为什么 SQL Server 代理作业没有发送邮件？**

SQL 作业在 SQL 服务帐户中运行，因此我为 SQL Server 作业代理用户授予了对我的 excel 文件的“完全访问”权限。

**没有错误 [有警告] 根据 SQL 代理作业但没有发送邮件**

```
The package execution returned DTSER_SUCCESS (0) but had warnings, with warnings being treated as errors.  Started:  4:16:51 PM  Finished: 4:17:04 PM  Elapsed:  13.119 seconds.  The command line parameters are invalid.  The step failed. 
```

电子邮件脚本代码：-

```
using System;
using System.Data;
using Microsoft.SqlServer.Dts.Runtime;
using System.Windows.Forms;
using System.Net.Mail;
using System.Text.RegularExpressions;

namespace ST_cb3e2bf527bb45c58359315bb058656e.csproj
{
    [System.AddIn.AddIn("ScriptMain", Version = "1.0", Publisher = "", Description = "")]
    public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
    {

        #region VSTA generated code
        enum ScriptResults
        {
            Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
            Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
        };
        #endregion    

        public void Main()
        {
            string sSubject = "Monitum : ICICI Cash Balance : "+DateTime.Now.ToShortDateString()+" : "+DateTime.Now.ToShortTimeString();
            string sBody = "";
            int iPriority = 2;

            if (SendMail(sSubject, sBody, iPriority))
            {
                Dts.TaskResult = (int)ScriptResults.Success;
            }
            else
            {
                //Fails the Task
                Dts.TaskResult = (int)ScriptResults.Failure;
            }
        }

        public bool SendMail(string sSubject, string sMessage, int iPriority)
        {
            try
            {
                string sEmailServer = Dts.Variables["User::sEmailServer"].Value.ToString();                
                string sEmailPort = Dts.Variables["User::sEmailPort"].Value.ToString();                
                string sEmailUser = Dts.Variables["User::sEmailUser"].Value.ToString();                
                string sEmailPassword = Dts.Variables["User::sEmailPassword"].Value.ToString();                
                string sEmailSendTo = Dts.Variables["User::sEmailSendTo"].Value.ToString();                
                string sEmailSendFrom = Dts.Variables["User::sEmailSendFrom"].Value.ToString();                
                string sEmailSendFromName = Dts.Variables["User::sEmailSendFromName"].Value.ToString();                

                SmtpClient smtpClient = new SmtpClient();
                MailMessage message = new MailMessage();
                Attachment attach = new Attachment("C:\\Users\\Administrator\\Documents\\ICICI Cash Balance.xls");
                attach.Name = "ICICI_Cash_Balance_"+DateTime.Now.ToLongDateString()+"_"+DateTime.Now.ToLongTimeString()+".xls";
                message.Attachments.Add(attach);
                MailAddress fromAddress = new MailAddress(sEmailSendFrom, sEmailSendFromName);
                message.Bcc.Add("sagar.dumbre@agsindia.com");
                //You can have multiple emails separated by ;
                string[] sEmailTo = Regex.Split(sEmailSendTo, ";");
                //string[] sEmailCC = Regex.Split(sEmailSendCC, ";");
                int sEmailServerSMTP = int.Parse(sEmailPort);

                smtpClient.Host = sEmailServer;
                smtpClient.Port = sEmailServerSMTP;

                System.Net.NetworkCredential myCredentials =
                   new System.Net.NetworkCredential(sEmailUser, sEmailPassword);
                smtpClient.Credentials = myCredentials;

                message.From = fromAddress;

                if (sEmailTo != null)
                {
                    for (int i = 0; i < sEmailTo.Length; ++i)
                    {
                        if (sEmailTo[i] != null && sEmailTo[i] != "")
                        {
                            message.To.Add(sEmailTo[i]);
                        }
                    }
                }
                switch (iPriority)
                {
                    case 1:
                        message.Priority = MailPriority.High;
                        break;
                    case 3:
                        message.Priority = MailPriority.Low;
                        break;
                    default:
                        message.Priority = MailPriority.Normal;
                        break;
                }

                message.Subject = sSubject;
                message.IsBodyHtml = true;
                message.Body = sMessage;

                smtpClient.Send(message);
                return true;
            }
            catch (Exception ex)
            {
                Dts.Events.FireError(0, "Script Task Example", ex.Message + "\r" + ex.StackTrace, String.Empty, 0);
                return false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T18:07:14.973

我感到很幸运，所以我会在没有所有细节的情况下发布。

我的前 N ​​个原因它不起作用

1.  不允许SQL Server 代理**帐户与 Exchange 通信。**Domain\SqlServiceAccount 不是 Exchange 中的用户，因此无法发送邮件。Domain\SagarDumbre*是*Exchange 中的用户，可以发送邮件，这就是它适合您的原因。

2.  **服务器**无权与 Exchange 通信。您的 Exchange 管理员可以授权 IP 地址，即使运行 SQL Server 的帐户可以与 Exchange 通信，地址 192.168.1.101 也不允许与邮件服务器通信。我们在 Exchange 升级/维护期间对此有所了解。管理员打开了该功能，以防止从未经授权的地址发送垃圾邮件，并且服务器不在列表中。

3.  防火墙和/或病毒扫描程序。由于您没有指定是否可以从您的计算机或相关服务器成功发送电子邮件，因此我还看到这些产品阻止了对邮件服务器的访问，因为请求不是来自 Outlook。

4.  错误的代码。您的邮件发送代码中的某些内容失败，或者它从 MTA 接收到一条错误消息，说它无法处理您的请求并且代码没有在监听或谁知道是什么。触发一些信息事件，以便您可以从脚本任务中获得反馈。

与您的 Exchange 管理员交谈，看看他们的日志中是否有正在发生的事情的详细信息。他们可能希望在包触发时观察他们的界面以捕获适当的事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T22:56:44.890

基于此：

> 先生，我在服务器本身上执行了我的包，它运行良好。正在发送邮件，但是当我在 sql server 作业中配置包（.dtsx）时，只有发送的邮件失败，其余三个步骤都成功。

我目前无法发表评论，因为 StackOverflow 不允许我这样做，所以不要将此作为答案，而是根据您上面的评论进行验证。当您选择 SSIS 包以匹配您在服务器上的运行方式时，您是否配置了这些值？如果我没有完全按原样配置它（特别是当我使用配置文件或以不同方式设置连接字符串时），我从服务器移动到作业代理时会遇到麻烦。请注意，这里的麻烦*仍然会在没有错误的情况下运行包，但不会做它应该做的事情*。

在上述段落之外，您的代码和步骤看起来不错，如果不好，您的包将在服务器本身上中断；这样就消除了一些可能的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T23:16:07.170

您的脚本引用了以 C:\Users\Administrator 开头的附件的路径。我怀疑用于运行 SQL Server 代理服务的帐户无权访问该文件夹。

您可以通过将这些文件移动到非用户目录并确保用于运行 SQL Server 代理服务的帐户有权访问该目录来解决此问题。

您还应确保允许用于运行 SQL Server 代理服务的帐户使用您的 SMTP 服务。

您也可以考虑为此使用 SSIS 发送邮件任务 - 您将避免大量代码。

# linux - glXSwapIntervalSGI 段错误

> ID：13933805
> 
> 赞同：1
> 
> 时间：2012-12-18T13:12:37.323
> 
> 标签：linux, opengl, segmentation-fault, sdl, vsync

我试图在围绕 SDL 和 openGL 构建的程序中禁用 Linux 上的垂直同步。我正在运行一个以镓 0.4 作为驱动程序的旧集成 ATI 卡。

我尝试通过调用`glXSwapInterval(0)`我的代码来禁用 vsync，但是当我这样做时，虽然程序编译得很好，但当我尝试运行它时会出现段错误。

gdb 给了我相当无益的信息：

```
Program received signal SIGSEGV, Segmentation fault.
0x00000000 in ?? () 
```

有谁知道可能会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:18:11.407

glXSwapIntervalEXT 和 glXSwapIntervalSGI 是扩展函数；您通常通过 glXGetProcAddress 访问扩展的函数地址，尽管某些 libGL.so 可能会直接导出它们。

最简单的解决方案：获取一个 OpenGL 扩展加载程序库，例如 GLEW（它位于所有主要 Linux 发行版的软件包存储库中）。替换所有出现的`#include <GL/gl.h>`with`#include <GL/glew.h>`和`#include <GL/glx.h>`with `#include <GL/glxew.h>`，将 libGLEW.so 添加到链接库列表中，并`glewInit()`在创建和绑定 OpenGL 上下文后立即调用。*然后测试扩展是否真的可用！*

# project-management - 项目经理最重要的书籍

> ID：13933811
> 
> 赞同：0
> 
> 时间：2012-12-18T13:12:48.497
> 
> 标签：project-management

我正在尝试了解 PM 的关键技能以及如何开发这些技能，因此我正在寻找可以帮助我的书籍。

“Peopleware”和“Code Complete”我认为是“必备”，但还有其他更重要的书籍或其他必备品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:17:17.580

Robert Martin 的 Clean Coder 是必须的。很好地描述了 PM 和开发团队之间的关系。

# vba - Visual Basic - 当 AD 中的属性为空时，如何继续脚本

> ID：13933821
> 
> 赞同：0
> 
> 时间：2012-12-18T13:13:31.170
> 
> 标签：vba, ldap

我创建了一个宏，它将从 LDAP 中提取信息并通过 Word 文档中的书签将其插入。这完美地工作，除非属性为空。因此，在 Word 文档中，标题插入到用户名之前，但是当用户没有标题时，脚本会停止并给出错误消息。如果 AD 中的属性为空，如何使脚本跳过该函数？

这是部分脚本，当用户没有标题时它会停止（最后）：

```
Sub AutoNew()
 With ActiveDocument.Bookmarks("MyTitle").Range
 .InsertBefore GetTitle
 End With
 With ActiveDocument.Bookmarks("MygivenName").Range
 .InsertBefore GetgivenName
 End With
 With ActiveDocument.Bookmarks("Mysn").Range
 .InsertBefore Getsn
 End With
 With ActiveDocument.Bookmarks("MytelephoneNumber").Range
 .InsertBefore GettelephoneNumber
 End With
 With ActiveDocument.Bookmarks("Mymail").Range
 .InsertBefore Getmail
 End With

End Sub

Function GetTitle() As String
Dim objSysinfo As Object
Dim objUser As Object

Dim strUser As String 'Distinguished Name

Set objSysinfo = CreateObject("ADSystemInfo")
strUser = objSysinfo.UserName
Set objUser = GetObject("LDAP://" & strUser)

GetTitle = objUser.get("Title")

End Function 
```

如果有人可以帮助我，我会很高兴。干杯，索尼娅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:20:11.093

在获取值之前检查是否`objUser.get("Title")`为**空**或为**空。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:37:31.233

If IsNothing(objUser.get("Title")) then GetTitle = objUser.get("Title") Else GetTitle = "" End If

# php - 我如何在php中获取上个月的名称

> ID：13933825
> 
> 赞同：8
> 
> 时间：2012-12-18T13:13:45.967
> 
> 标签：php, string, date

> **可能重复：**
> [php中给定月份的下个月和上个月](https://stackoverflow.com/questions/9172035/next-and-previous-month-from-a-given-month-in-php)

我使用这段代码：

```
$prev_month = strtolower(date('F',strtotime('February - 1 month'))); 
```

并且总是返回 12 月，即使我将月份更改为 3 月。

请帮忙！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-18T13:16:49.020

```
$currentMonth = date('F');
echo Date('F', strtotime($currentMonth . " last month")); 
```

如果您不希望它相对于当前月份，请设置：

```
$currentMonth = 'February';
// outputs January 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T13:18:52.323

`strtotime()`明白`'last month'`。

```
$last_month = date('F', strtotime('last month')); 
```

您还可以使用[`\DateTime`](http://php.net/datetime)该类：

```
$date_time = new \DateTime('last month');
$last_month = $date_time->format('F'); 
```

这取决于你需要什么。如果您只想要上个月的名称，那么第一个示例就可以了。如果您想玩弄日期（例如在一年中的月份循环），那么该`\DateTime`课程使这变得非常容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T13:23:50.800

使用此代码

```
$submonth = date("F", strtotime ( '-1 month' , strtotime ( 'February' ) )) ;
echo $submonth; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:15:17.613

**使用以下代码：**

```
echo date("F", time()-date("j")*24*60*60); 
```

您还可以使用：

```
echo date("F", strtotime("last month")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T13:16:42.813

PHP代码

```
 $days_passed_this_month = date("j");

    $timestamp_last_month = time() - $days_passed_this_month *24*60*60;

    $last_month = date("F", $timestamp_last_month); 
```

只需使用 date() 和 time() 函数，看看你在哪里。

# c# - 如何以编程方式处理 x509 证书和集中式密钥库？

> ID：13933827
> 
> 赞同：0
> 
> 时间：2012-12-18T13:13:48.083
> 
> 标签：c#, wcf, x509certificate

我正在开发一个应该能够处理 x509 证书的 WCF 应用程序。在最终设置中，应用程序的多个实例将存在于不同的服务器上，因此我们的想法是使用集中式存储。到目前为止，我只知道特定于用户或机器并且相对容易以编程方式访问的证书存储，缺点是它们绑定到一台服务器/PC。那么有没有一种简单的方法来拥有某种集中式存储并以编程方式访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:21:41.203

您可以将证书存储在所有服务器都可以访问的数据库中。关于如何做到这一点的确切方法在关于 SO 的几个问题中进行了描述（[示例](https://stackoverflow.com/questions/11334951/how-to-store-a-x509certificate2-in-db-c-sharp)）

当然，您需要实现一些额外的安全性（即存储加密的证书或至少使用受 SSL 保护的数据库连接），但总的来说这是可以管理的。

# sql - 数据库查询优化

> ID：13933828
> 
> 赞同：0
> 
> 时间：2012-12-18T13:13:49.603
> 
> 标签：sql, oracle, optimization

我正在查询一列，例如

```
select * 
  from X1, X2, X3
 where X1.a = X2.a 
   and X2.b = X3.b 
   and X3.c IN ('c1a','c1b','c1c') 
```

可能会有大约 10 个这样的 c1% 值

另一个查询是：

```
select * 
  from X1, X2, X3
 where X1.a = X2.a 
   and X2.b = X3.b 
   and X3.c like 'c1%' 
```

此处的表 X3 已编入索引`c`

我理解这两个查询的含义是不同的，但在我的用例中它们将返回相同的结果。我想知道哪个查询会更快（并且它是否重要，例如在一种情况下可能不使用索引）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:44:36.560

> “哪个查询会更快”

...不是我们可以回答的问题。因为你没有提供任何有用的信息。查询性能很大程度上取决于两个因素：数量和偏差。

体积的意思：

*   X1 有多少行？
*   X2 有多少行？
*   X3 有多少行？

歪斜的意思：

*   X1 中有多少行匹配 X2 中的行？
*   X2 中有多少行匹配 X3 中的行？
*   X3 中有多少行在 C 中有与“c1%”匹配的值？

这就是为什么收集统计数据很重要，这样数据库才能了解数据分布并制定适当的执行计划。

例如，如果 X1 是一个小表并且几乎不匹配 X2 中的任何行，并且 X2 几乎不匹配 X3 中的任何行，那么访问路径是 `X1 -> X2 -> X3' 并且 C 的值只是过滤，所以它不会不管你如何指定它们。

而如果 X1 和 X2 以及大型表并匹配大量行，则 X3.C 可能是最佳访问路径，因此如何构建查询非常重要：哪个选项最有可能导致优化器使用索引（如果那是更好的计划）还是不使用索引（如果那是更好的计划）？

我认为优化器更有可能选择使用索引进行`IN`过度`LIKE`操作。但是，如果我对您的数据库的了解比我现在所知道*的*要多，我不会在它上面投入很多钱。

> “它是否重要，例如在一种情况下可能不使用索引”

当然是。索引读取可以更快地获取我们想要的数据。但它们也可能比全表扫描慢。同样是关于数据分布：将返回多少百分比的表行？如果超过 1-2%，则很可能存在比索引更快的访问路径。虽然`X3(c, b)`在这种情况下索引会提供良好的性能（可惜我们不能总是建立一个索引来适应每个单独的查询）。

# ios - iOS 推送通知 - 我可以在一分钟内从我的服务器发送多少？

> ID：13933836
> 
> 赞同：4
> 
> 时间：2012-12-18T13:14:22.897
> 
> 标签：ios, performance, apple-push-notifications

我计划通过推送支持更新我的应用程序。我使用 php 脚本连接到 Apple 服务器并立即发送所有推送，关闭连接。

我可以在一分钟内发送多少？你们有这方面的经验吗？

一切顺利，约翰

PS：你能推荐 pushwoosh.com 或 urbanairship.com 吗？他们交付推送的速度有多快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T00:36:05.163

以下是 Apple 在其[技术说明](https://developer.apple.com/library/mac/#technotes/tn2265/_index.html)中关于推送速度的说法：

> **推送通知吞吐量和错误检查**
> 
> 使用 APN 没有上限或批量大小限制。iOS 6.1 新闻稿称，APNs 自成立以来已发送超过 4 万亿条推送通知。在 WWDC 2012 上宣布，APN 每天发送 70 亿条通知。
> 
> 如果您看到吞吐量低于每秒 9,000 条通知，则您的服务器可能会受益于改进的错误处理逻辑。

我们可以从这句话中假设您应该能够每秒至少发送 9000 条通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T14:39:01.697

我建议您尝试使用 Urban、parse、push.io 等众多推送通知服务之一。我正在使用 www.pushapps.mobi，速度是每秒 2000-3000 次推送。

# linux - 查找两个数字中的最大/最小

> ID：13933838
> 
> 赞同：1
> 
> 时间：2012-12-18T13:14:26.843
> 
> 标签：linux, awk, csh

我有一个 csh 脚本，可以在其中访问多个头文件以提取各种边界框的 xmin、ymin 坐标。有没有一种简单的方法可以从通过管道传输到 awk 之类的回声中找到 minx、maxx、miny maxy。例如

```
set minx=`echo $x1\t$x2 | awk {something}`

set maxx = `echo $x1\t$x2 | awk {something else} 
```

我怀疑 awk 是最好的方法，我不确定是什么。这是我的一些代码：

```
 set bb1 = `label_file -g "bounding box[0]" r$start_roi`

@ bb1_x = $bb1[1]
@ bb1_y = 1023 - $bb1[4]
@ bb1_h = $bb1[4] - $bb1[2]
@ bb1_w = $bb1[3] - $bb1[1] 
```

这将返回感兴趣的矩形区域的 xmin、ymin 宽度和高度。我将调整并重复上述代码以找到第二个区域的相同参数。

然后我想做的是找到全局 xmin、ymin、xmax 和 ymax 以定义一个更大的矩形，它完全包含较小的 2。

即将 xmin 设置为 $bb1[1] 和 $bb2[1] 中的较小数字 将 xmax 设置为 $bb1[3] 和 $bb2[3] 中的较大数字

ETC

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:16:09.153

这将打印给定管道或文件或数字的最小值和最大值：

```
awk '{
   min = ($0 =< min ? $0 : min)
   max = ($0 >= max ? $0 : max)
}
END {
   print min, max
}' 
```

如果这不是您想要的，请提供一些示例输入和预期输出。

通过在 (c)shell 中解析文件并调用 awk 进行算术运算，您几乎可以肯定是以完全错误的方式处理更大的任务。awk 旨在解析文本文件。

编辑：基于您更新的问题中的此代码段：

```
set bb1 = `label_file -g "bounding box[0]" r$start_roi`
@ bb1_x = $bb1[1]
@ bb1_y = 1023 - $bb1[4]
@ bb1_h = $bb1[4] - $bb1[2]
@ bb1_w = $bb1[3] - $bb1[1] 
```

并假设“label_file”是一些输出 4 个空格分隔数字的命令，您可以这样做：

```
label_file -g "bounding box[0]" "r$start_roi" |
awk '{
   bb1_x = $1
   bb1_y = 1023 - $4
   bb1_h = $4 - $2
   bb1_w = $3 - $1
}' 
```

你说你也有第二个地区。让我们假设“$start_roi”是 label_file 改变的参数。然后你可以做类似的事情：

```
( label_file -g "bounding box[0]" "r$start_roi";
  label_file -g "bounding box[0]" "r$other_roi" ) |
awk '{
   bb1_x[NR] = $1
   bb1_y[NR] = 1023 - $4
   bb1_h[NR] = $4 - $2
   bb1_w[NR] = $3 - $1
}' 
```

并且此时 bbl_x[1] 将保存 start_roi 框的 X 值，而 bbl_x[2] 将保存 other_roi 框的 X 值。您可以通过以下方式看到：

```
( label_file -g "bounding box[0]" "r$start_roi";
  label_file -g "bounding box[0]" "r$other_roi" ) |
awk '{
   bb1_x[NR] = $1
   bb1_y[NR] = 1023 - $4
   bb1_h[NR] = $4 - $2
   bb1_w[NR] = $3 - $1
}
END {
   for (i=1; i<=NR; i++) {
      print i, bbl_x[i], bbl_y[i], bbl_h[i], bbl_w[i]
   }
}' 
```

如果您需要帮助确定从那里做什么，请告诉我们。

# emma - EMMA报告不停止tomcat服务？

> ID：13933841
> 
> 赞同：1
> 
> 时间：2012-12-18T13:14:42.550
> 
> 标签：emma

如何在不停止 tomcat 服务的情况下获取 ECL EMMA 中的 Coverage.ec 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:22:20.173

从这个网站得到答案：

sourceforge.net/project/shownotes.php?release_id=336859

新处理器 CtlProcessor（由新的“emma ctl”命令行工具和新的 ANT 任务使用）可以通过 TCP 套接字与运行 EMMA 检测类的 JVM 通信。每次调用时，处理器都会调度一系列控制命令，例如“coverage.get”、“coverage.dump”和“coverage.reset”，例如：

```
 <emma>
    <ctl connect="localhost:47653" >
      <command name="coverage.get" args="mycoverage.ec" />
      <command>coverage.reset</command> <!-- alternate command syntax -->
    </ctl>
  </emma>
or
  java -cp ... emma ctl -connect localhost:47653 \
                        -command coverage.get,mycoverage.ec \
                        -command coverage.reset 
```

# c# - 我如何在 wpf 应用程序中使用 wcf

> ID：13933847
> 
> 赞同：-5
> 
> 时间：2012-12-18T13:14:52.253
> 
> 标签：c#, wpf, wcf, mobile

嗨，我有一个 wpf 应用程序来为汽车服务预留时间，我想要一个移动应用程序，我如何制作一个同步展位应用程序。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:21:31.983

> WPF 是一个计算机软件图形子系统，用于在基于 Windows 的应用程序中呈现用户界面。
> 
> WCF 是 .NET Framework 中的一组 API，用于构建连接的、面向服务的应用程序。

有一篇很酷的[博客文章](http://www.itprotoday.com/microsoft-visual-studio/how-consume-wcf-service-using-wpf)介绍了如何实现 WCF 服务，然后使用 WPF 客户端使用它。

# jquery - 关闭对话框后将 ui 对话框的内容保留在 div 中

> ID：13933863
> 
> 赞同：0
> 
> 时间：2012-12-18T13:15:57.267
> 
> 标签：jquery, jquery-ui

我`<div id='A'>`有一些信息`</div>`

然后我发射命令

```
$('#A').dialog(); 
```

做完某事后我关闭对话框

```
$('#A').dialog('close'); 
```

它以我的所有信息关闭。但我希望它关闭，但我的信息仍保留在 DIV 中。

问题是在关闭时，ui对话框也会删除整个div，所以关闭后什么都没有了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:01:51.053

'close' 方法不会像所指出的那样删除 div，它确实将其设置为 'display:none' 并且一旦它是一个对话框，选择器就不能按预期工作；至少这是我发现的。使用 control+f 找不到它，因为它没有显示出来。如果您使用 Firebug 或开发人员工具查看该页面，您会发现它仍然存在。

试试这个：

```
var theA = $('#A');
theA.dialog();

//do ajax stuff here;

//some where else instead of closing the dialog

theA.dialog('destroy'); //returns the div to its pre-dialog state
theA.css('display','block'); 
```

我做了一个小提琴来展示我做了什么来看看这是否有效。我使用了一个锁定标志来确保我在关闭的同时没有“对话”。但我能够按照您所说的更改 div 的内容，然后将其放回页面。我使用破坏而不是关闭来显示它回到页面。

[http://jsfiddle.net/jvSb3/3/](http://jsfiddle.net/jvSb3/3/)

在小提琴中，我使用了一个文本框来更改对话框形式的 div 的内容。然后在关闭处理程序中，我销毁对话框，然后再次使其可见。

# javascript - jQuery with table 如何计算用户输入值的总和？

> ID：13933866
> 
> 赞同：3
> 
> 时间：2012-12-18T13:16:13.833
> 
> 标签：javascript, jquery

我有一个 jquery 问题，我正在从我的 sql 数据库中获取数组中的结果。这些项目在一个`table tr td`. 每行都有一个唯一的 id。

但是当我对一个文本框进行求和或 onkeyup 时，所有的总变化也会发生变化。

我正在`onKeyUp`为`Qty`.

例如。：

> 数量 = 3
> 
> 贝德拉格 = 20
> 
> 总计（预期）= 60

这是一个屏幕截图： ![在此处输入图像描述](../Images/1266a54d8c1059ba505be63d60c43a27.png)

我的 jQuery 代码错了吗？

```
jQuery(document).ready(function(){

    var j = 0;
    /* COMPUTATION new item */
    jQuery('input[id=new_quan_'+j+']').keyup(function(){
        j++;
        var new_sum = parseInt($('input[id=new_quan_'+j+']').val(), 10);
        new_sum *= parseInt($('input[id=new_amt_'+j+']').val(), 10);
        jQuery('input[id=new_total_'+j+']').val(new_sum);
    });
}); 
```

这是 HTML 和 PHP 代码：

```
<table cellpadding="5" cellspacing="0" width="100%" id="computation_table">
    <tbody>
    <tr>
        <th>Categories</th>
        <th>Qty</th>
        <th>Omschrijving</th>
        <th>Bedrag</th>
        <th>Totaal</th>
        <th>BTW</th>
        <th></th>
    </tr>
    <?
    $quo_com = mysql_query( "SELECT * FROM jon_com_quo_computation WHERE user_code = '".$_GET['uc']."' and footnote = 'new' and active='1' " ) or die ( mysql_error() );
    $get_btw = mysql_fetch_array( $quo_com );
    if ( $get_btw['currency'] == 'euro' ) {
        $msg_tot = '&euro;';
    } elseif ( $get_btw['currency'] == 'usd' ) {
        $msg_tot = '&#36;';
    }

    $sqlview = mysql_query( "SELECT * FROM jon_com_quo_computation WHERE user_code = '".$_GET['uc']."' and footnote = 'new' and active='1' " ) or die ( mysql_error() );
    $j = 0;
    while( $row = mysql_fetch_array( $sqlview ) ) {
    ?>
    <tr>
        <td>
            <input type="hidden" name="id_<?=$j?>" value="<?=$row['q_id'];?>" />
            <input type="hidden" name="counter" value="<?=$j?>" />
            <input type="text" name="category_<?=$j?>" class="text_com" value="<?=$row['category'];?>" />
        </td>
        <td>
            <input type="text" name="quantity_<?=$j?>" id="new_quan_<?=$j?>" class="text_com" value="<?=$row['quo_quantity'];?>" /> x
        </td>
        <td width="200">
            <input type="text" name="quo_definition_<?=$j?>" class="input" value="<?=$row['quo_definition'];?>" />
        </td>
        <td>
            <input type="text" name="quo_amt_<?=$j?>" id="new_amt_<?=$j?>" class="text_com" value="<?=$row['quo_amt'];?>" />
        </td>
        <td id="total">
            <input type="text" name="quo_total_<?=$j?>" id="new_total_<?=$j?>" class="text_com" value="<?=$row['quo_total'];?>" />
        </td>
        <td>
            <input type="text" name="quo_btw_<?=$j?>" class="text_com" value="<?=$row['quo_btw'];?>" />
        </td>
    </tr>
<?
    $j++;
    }
?>
    </tbody>
</table>
</div>
<br />
<!-- END OF COMPUTATION UPDATE -->
<input type="submit" name="up_item_list" value="Werk de vorm" /> - <input type="submit" name="new_save_list" value="Opslaan nieuw item" /> - <a href="">Annuleren</a>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:31:06.750

最好使用类来查找相应的元素，而不是使用构建的 id `j`（甚至不知道它应该如何工作查看您的代码）

```
jQuery('.new_quan').keyup(function(){        
        var new_sum = parseInt(jQuery(this).val(), 10);
        new_sum *= parseInt(jQuery(this).closest('tr').find('.new_amt').val(), 10);
        jQuery(this).closest('tr').find('.new_total').val(new_sum);
    }); 
```

并更新php代码：

```
 while( $row = mysql_fetch_array( $sqlview ) ) {
    ?>
    <tr>
        <td>
            <input type="hidden" name="id_<?=$j?>" value="<?=$row['q_id'];?>" />
            <input type="hidden" name="counter" value="<?=$j?>" />
            <input type="text" name="category_<?=$j?>" class="text_com" value="<?=$row['category'];?>" />
        </td>
        <td>
            <input type="text" name="quantity_<?=$j?>" id="new_quan_<?=$j?>" class="text_com new_quan" value="<?=$row['quo_quantity'];?>" /> x
        </td>
        <td width="200">
            <input type="text" name="quo_definition_<?=$j?>" class="input" value="<?=$row['quo_definition'];?>" />
        </td>
        <td>
            <input type="text" name="quo_amt_<?=$j?>" id="new_amt_<?=$j?>" class="text_com new_amt" value="<?=$row['quo_amt'];?>" />
        </td>
        <td id="total">
            <input type="text" name="quo_total_<?=$j?>" id="new_total_<?=$j?>" class="text_com new_total" value="<?=$row['quo_total'];?>" />
        </td>
        <td>
            <input type="text" name="quo_btw_<?=$j?>" class="text_com" value="<?=$row['quo_btw'];?>" />
        </td>
    </tr>
<?
    $j++;
    } 
```

在这里，我为您的输入添加了一些类，因此可以使用 find`.find('.new_total')`和`.find('.new_amt')`

`.closest("tr")`将找到一个包含您需要更新总数的所有输入的 tr。并将`find('...')`仅在该 tr 内搜索，仅以这种方式仅更新相关的输入值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:32:18.890

也许你需要使用`$(this)`和`this.id`这样的：

```
jQuery(document).ready(function(){
  $('input[type=text]').each(function(){
    $(this).keyup(function(){
      var j = this.id.split('_')[2];
      var new_sum = parseInt($('input[id=new_quan_'+j+']').val(), 10);
      new_sum *= parseInt($('input[id=new_amt_'+j+']').val(), 10);
      jQuery('input[id=new_total_'+j+']').val(new_sum);
    });
  });
}); 
```

# android - Android上的溢出滚动不起作用？

> ID：13933868
> 
> 赞同：4
> 
> 时间：2012-12-18T13:16:17.460
> 
> 标签：android, web-applications, scroll, native, momentum

是的，我是这些想用 HTML5 开发移动应用程序的人之一。在 Android 和 iOS 上。我知道听起来很疯狂。可惜我有问题...

我有一个带有页脚和页眉的经典应用程序以及应该可以滚动的内容。在 iOS 上，这非常棒！页眉和页脚在顶部/底部具有“位置：固定”，并且内容使用带有“-webkit-overflow-scrolling: touch;”的本机滚动动量。我知道“-webkit-overflow-scrolling: touch;” 在 Android 上不可用，但这个属性不仅被忽略，滚动根本不起作用！

所以请谁能告诉我如何在 iOS 上获得“本机”滚动和在 Android 上以相同的标记和样式获得“好”滚动？例如，如果我可以使用具有动量的原生滚动 - 很好，如果不是 - 普通滚动。

注意：我现在只需要支持最新版本（没有 Android 2.3！），所以我不想要像 iScroll 4 这样的 JS-Fallbacks。

```
.content {
    // no(!) scrolling on Android - why?
    overflow-x: hidden;
    overflow-y: scroll;
    -webkit-overflow-scrolling: touch;
} 
```

JSFiddle：http: [//jsfiddle.net/bmJxN/](http://jsfiddle.net/bmJxN/)

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-17T09:59:11.550

很抱歉挖了一篇旧帖子，但似乎没有令人满意的答案，我想我会为像我这样最终来到这里的任何人加 2 美分。

谈论移动 WebApps 中滚动的一般问题，移动浏览器上的滚动和动力是一个痛苦，因为根据平台的不同，有各种各样不同的实现：Android 浏览器！= Chrome！= Safari！= Opera 等，Android < 3 不支持滚动以及较新的版本，就像 iOS < 5 一样。

情况很复杂，对于大多数设备都在 iOS 5 或 6 上的 iOS 来说可能不是问题，但它是 Android 碎片化的真正问题。

为了更好地掌握这一点，你可以阅读[这个](http://bradfrostweb.com/blog/mobile/fixed-position/)。

为了回应这一点，正如您已经指出的那样，有诸如 iScroll 或最近的 Overthrow 之类的后备，您可以更好地处理本机实现和 JS 后备。最近，金融时报团队发布了看起来也很有前途的 FTScroller 库。

现在，对于您的情况，如果您只想支持 Android 4+ 和 iOS5+，您应该能够使其在仅使用固定定位的动量和

```
overflow: auto;
-webkit-overflow-scrolling: touch; 
```

在您的可滚动内容上（如果使用自动属性，则无需指定“overflow-x:hidden”）。如果没有，您可能在固定位置或其他一些 css 布局属性中犯了错误？（继承的身体道具等）。

更新：我应该在发布答案之前完成此操作，但我刚刚在我的 Nexus4 上测试了小提琴，并且您的代码在 Chrome 中确实有效：这可能意味着您在没有 Android 4+ 或浏览器没有的旧设备上进行了测试支持溢出属性？

旁注：

*   请注意，虽然动量效果在 android 和 iOS 上默认处于活动状态，但将应用特定于平台的动量：它们彼此不同，这与使滚动动量平台独立的 JS polyfill 相反。此外，在 iOS 上，滚动比 Android 流畅得多，尽管在新设备和 Android 4.0+ 上情况变得更好（在此之前，它在大多数人口密集的视图中都无法使用）。
*   在 iOS 上，您将拥有平台原生的弹跳效果，但在 Android 上则不会，因为原生浏览器 UX 不包含此弹跳效果（这很奇怪，因为此效果存在于 OS UX 的其他部分，例如设置）。您可以通过库在 Android 上实现这一点，但要小心恐怖谷。
*   即使在较新的浏览器上也存在其他问题，例如此处指出的 Android 浏览器中缺少滚动位置指示器：http: [//barrow.io/overflow-scrolling](http://barrow.io/overflow-scrolling)。在 iOS 上，您可能会在整个页面上出现臭名昭著的“橡皮筋滚动效果”问题，同时在特定元素内滚动，如“[如何在 iOS 网络应用程序中禁用橡皮筋？](https://stackoverflow.com/questions/10357844/how-to-disable-rubber-band-in-ios-web-apps) ”中指出的那样。对于 WP8 webApps，您将拥有一个类似的 pb。

所有这一切都表明，像滚动这样简单的事情在移动 WebApps 中远非完美，在 WebViews 性能方面甚至更糟（例如在开发 PhoneGap 应用程序时）。祝你好运 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T09:17:57.460

由于在其他地方似乎没有正确解释的行为，请在此处添加附加说明。

使用“溢出：自动”或“溢出：滚动”时，Android 版 Chrome 将仅在页面加载时暂时显示滚动条指示器，然后隐藏它们（与桌面浏览器的典型行为不同）。更复杂的是，这些指标非常薄且半透明，很容易被遗漏。

对于一般的页面滚动，这可能不是问题；但是，当用于滚动页面区域（例如全页应用程序）时，用于指示附加内容的滚动条的丢失会带来严重的用户体验问题。

要纠正这个问题，您可以添加自定义滚动条。当使用 'overflow:auto' 时，这些滚动条只会在内容超出可见区域时显示（就像在桌面浏览器上一样）。

将以下代码添加到您的 CSS 中：

```
::-webkit-scrollbar-track {
  background-color: #F5F5F5;
}

::-webkit-scrollbar {
  width: 12px;
  background-color: rgba(0,0,0,0);
}

::-webkit-scrollbar:hover {
  background-color: rgba(0, 0, 0, 0.09);
}

::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.3);
  border: 2px solid #F5F5F5;
  -webkit-border-radius: 100px;
}

::-webkit-scrollbar-thumb:active {
  background: rgba(0,0,0,0.61);
  -webkit-border-radius: 100px;
} 
```

您还可以使用下面的代码添加垂直箭头。类似地，水平箭头可以通过将垂直替换为水平来包含。

```
::-webkit-scrollbar-button {
  width: 12px;
  height: 12px;
  background-color: #F5F5F5;
  background-size: 100%;
}

::-webkit-scrollbar-button:vertical:increment {
  background-image: url('../images/arrows/arrow-down.png');
}

::-webkit-scrollbar-button:vertical:decrement {
  background-image: url('../images/arrows/arrow-up.png');
} 
```

请注意，最后两行需要存在箭头图像，但无法将它们添加到帖子中（可能是由于它们的尺寸小）。

也可以自定义其他滚动条属性。以下指南提供了详细说明：

[http://poselab.com/en/custom-scrollbars-in-webkit/](http://poselab.com/en/custom-scrollbars-in-webkit/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-18T13:26:23.717

它现在可以工作了，有很多原因。您可以做的是使用任何第三方库来完成此任务。我使用了来自 github 的开源库之一来获得结果：- 库在[这里](https://github.com/watusi/jquery-mobile-iscrollview)

希望它会有用...

# mysql - 获取 java.sql.SQLException：连接到远程 mysql 数据库时用户异常访问被拒绝

> ID：13933869
> 
> 赞同：1
> 
> 时间：2012-12-18T13:16:19.357
> 
> 标签：mysql, jdbc

我正在尝试使用 jdbc 连接连接到远程 mysql 数据库。但我得到

java.sql.SQLException: 运行 java 类时拒绝用户访问此异常。但我可以使用 mysql 查询浏览器或 mysql 命令连接到该数据库。我用以前的版本替换了 jdbc 驱动程序，但我仍然收到此错误。我只有对远程数据库的只读访问权限。请帮我解决这个问题。

> try { // 这将加载 MySQL 驱动程序，每个 DB 都有自己的驱动程序 Class.forName("com.mysql.jdbc.Driver"); //设置与数据库的连接
> 
> ```
>  connect = DriverManager
>       .getConnection("jdbc:mysql://myremotehost/remotedatabase?user=username&password=password");
> 
>   // Statements allow to issue SQL queries to the database
>   statement = connect.createStatement();
>   // Result set get the result of the SQL query
>   resultSet = statement
>       .executeQuery("select * from mytable limit 10");
>   writeResultSet(resultSet);
> 
> } catch (Exception e) {
>   throw e;
> } finally {
>   close();
> } 
> ```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:08:43.717

嗨，我找到了解决这个问题的方法。出现此错误是因为密码包含 & 符号。我们在 jdbc 连接字符串中使用 & 符号作为分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:23:26.797

假设您提供了正确的用户名和密码，这仅意味着用户没有足够的权限远程访问服务器。

通过创建一个用于远程访问您的应用程序到服务器的新用户来尝试以下操作，

```
CREATE USER 'newUser'@'%' IDENTIFIED BY 'newPass123';
GRANT ALL PRIVILEGES ON *.* TO 'newUser'@'%' WITH GRANT OPTION; 
```

现在，使用`newUser`和`newPass123`远程连接。

*   [添加用户帐户](http://dev.mysql.com/doc/refman/5.1/en/adding-users.html)
*   [如何允许 MySQL 客户端连接到远程 MySQL 服务器](http://www.thegeekstuff.com/2010/08/allow-mysql-client-connection/)

# asp.net-mvc - 从视图访问模型时出错

> ID：13933870
> 
> 赞同：0
> 
> 时间：2012-12-18T13:16:21.220
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

在项目中有点太晚了，但我正在整理我的项目以尝试改进我收到的错误。我在我的许多方法中使用我的一些模型类`HolidayCotroller`，所以我试图从一个模型中运行一种方法。`index`重命名了所有文件，除了我的方法之外，一切似乎都很好

在我的视图中，我正在`Index`使用`@model HolidayBookingApp.Models.IndexModel`

但是当我点击 UI 中的以下链接时：

```
<p>
    @Html.ActionLink("Holidays Remaining", "HolidaysRemaining")
</p> 
```

错误状态：

**传入字典的模型项的类型为“HolidayBookingApp.Models.IndexModel”，但此字典需要“HolidayBookingApp.Models.HolidaysRemainingModel”类型的模型项**

所以我将模型更改为：

```
@model HolidayBookingApp.Models.HolidaysRemainingModel 
```

但它仍然给我同样的错误消息。

所以在我的`IndexModel.cs`我创建了前一个的新实例`HolidayremainingModel.cs`

```
HolidaysRemainingModel model = new HolidaysRemainingModel(); 
```

现在怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:23:35.030

用这个

```
@Html.ActionLink("Holidays Remaining", Model.model) 
```

而不是你以前的代码

```
@Html.ActionLink("Holidays Remaining", "HolidaysRemaining") 
```

# httpwebrequest - LINQPad 和 System.Net 跟踪

> ID：13933874
> 
> 赞同：1
> 
> 时间：2012-12-18T13:16:40.080
> 
> 标签：httpwebrequest, linqpad, trace, system.net

我正在尝试跟踪 LINQPad 脚本。我已经根据[http://msdn.microsoft.com/en-us/library/ty48b824.aspx](http://msdn.microsoft.com/en-us/library/ty48b824.aspx)设置了 System.Net 跟踪。

我已将以下几行放入`LINQPad.exe.config`文件中：

```
 <system.diagnostics>
    <sources>
      <source name="System.Net" tracemode="includehex" maxdatasize="1024">
        <listeners>
          <add name="System.Net"/>
        </listeners>
      </source>
      <source name="System.Net.Sockets">
        <listeners>
          <add name="System.Net"/>
        </listeners>
      </source>
      <source name="System.Net.Cache">
        <listeners>
          <add name="System.Net"/>
        </listeners>
      </source>
    </sources>
    <switches>
      <add name="System.Net" value="Verbose"/>
      <add name="System.Net.Sockets" value="Verbose"/>
      <add name="System.Net.Cache" value="Verbose"/>
    </switches>
    <sharedListeners>
      <add name="System.Net"
        type="System.Diagnostics.TextWriterTraceListener"
        initializeData="network.log"
      />
    </sharedListeners>
    <trace autoflush="true"/>
  </system.diagnostics> 
```

文件已`network.log`创建。它包含来自 LINQPad 版本检查的日志：

```
System.Net Verbose: 0 : [1220] WebClient#3359025::DownloadString(http://www.linqpad.net/updates40/version.txt)
System.Net Verbose: 0 : [1220] WebClient#3359025::DownloadData(http://www.linqpad.net/updates40/version.txt)
System.Net Verbose: 0 : [1220] WebRequest::Create(http://www.linqpad.net/updates40/version.txt)
System.Net Verbose: 0 : [1220] HttpWebRequest::HttpWebRequest(http://www.linqpad.net/updates40/version.txt)
... 
```

但是，在运行使用 WebRequest 下载 url 的 LINQPad 脚本后，不会记录此请求。

为什么没有记录 LINQPad 脚本？是否可以记录它们？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:51:19.550

使用 LinqPad.config 而不是 Linqpad.exe.config

来自[http://www.linqpad.net/FAQ.aspx](http://www.linqpad.net/FAQ.aspx)

> 我正在引用一个从应用程序配置文件 (app.config) 读取设置的自定义程序集。我应该把我的应用程序配置文件放在哪里，以便 LINQPad 查询可以获取它？
> 
> 放入一个名为 linqpad.config 的文件中。这在[这里](http://coding.infoconex.com/post/2012/06/01/Getting-LINQPad-to-read-your-applications-AppConfig-settings.aspx)详细解释。

# php - PHP数组显示列表仅包含值

> ID：13933875
> 
> 赞同：0
> 
> 时间：2012-12-18T13:16:39.260
> 
> 标签：php, arrays

当我这样做时，我有下面的输出

> 打印_r（$图像）；

是否可以列出没有 [0] 等的值

```
Array ( [0] => 225403a4491411e2b4f022000a1f9ac6_7.jpg 
[1] => 62605578491011e2815722000a1fa518_7.jpg 
[2] => 0b5c9316490d11e283e822000a1f8e5b_7.jpg ) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T13:18:47.020

肯定是的！

```
for ($i = 0; $i < count($images); $i++)
{
    echo $images[$i] . "\n";
} 
```

甚至

```
echo implode("\n", $images); 
```

并按照建议

```
foreach ($images as $key => $value)
{
    echo $value . "\n";
} 
```

浏览这些方便的页面

[http://php.net/for](http://php.net/for) , [http://php.net/foreach](http://php.net/foreach) , [http://php.net/implode](http://php.net/implode)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T13:18:59.593

您需要循环数组并回显每个值：

```
foreach ($images as $image) {
  echo $image;
} 
```

`print_r`打印有关变量的信息 - 不是它的值；

# excel - 从 Crystal 报表 XI（交叉表）导出到 excel 电子表格——动态列在某些行之后不应重复

> ID：13933882
> 
> 赞同：0
> 
> 时间：2012-12-18T13:17:01.007
> 
> 标签：excel, crystal-reports, crystal-reports-xi

我从 Crystal 报告 XI 中得到了这个：

```
NAME          DESCRIPTION      SUBJECT1       SUBJECT2  ....  SUBJECTx      TOTAL    
JACK          CLASS 1           30                              80          110  
AMIT          CLASS 2           50              20                           70  
RAM           CLASS 3           20              30              10           60    
SHYAM         CLASS 4           90              10              10           110 
```

但是当我尝试将水晶报表 XI 导出到 XLS（excel 电子表格）时，我得到的输出是：

```
 NAME          DESCRIPTION      SUBJECT1       SUBJECT2  ....  SUBJECTx      TOTAL    
    JACK          CLASS 1           30                              80          110  
    AMIT          CLASS 2           50              20                           70  
    RAM           CLASS 3           20              30              10           60    
                                SUBJECT1          SUBJECT2  ....  SUBJECTx      TOTAL  
    SHYAM         CLASS 4           90              10              10           110 
```

我不希望列标题
**SUBJECT1 SUBJECT2 .... SUBJECTx TOTAL**）在某些行之后重复，

有什么解决办法吗，求指教！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:52:17.050

要消除重复的标题，您必须在抑制属性 X-2 的列标题上插入此代码：

```
PageNumber > 1 
```

# delphi - Delphi XE3中流的底层读/写方法是什么

> ID：13933884
> 
> 赞同：4
> 
> 时间：2012-12-18T13:17:03.350
> 
> 标签：delphi, delphi-xe3, tstream

我有一些用于旧版本 RADStudio 的派生 Stream 类，它们只是重新实现了 Read、Write、Seek 方法以及 Size 和 Position 属性。

我希望将这些移植到 XE3，但我看到现在（例如）有三个重载`Read`- 原来的一个，加上两个以 TBytes 作为参数的重载。

德尔福

```
function Read(var Buffer; Count: Longint): Longint; overload; virtual;
function Read(Buffer: TBytes; Offset, Count: Longint): Longint; overload; virtual;
function Read(var Buffer: TBytes; Count: Longint): Longint; overload; 
```

C++

```
virtual int __fastcall Read(void *Buffer, int Count)/* overload */;
virtual int __fastcall Read(System::DynamicArray<System::Byte> Buffer, int Offset, int Count)/* overload */;
int __fastcall Read(System::DynamicArray<System::Byte> &Buffer, int Count)/* overload */; 
```

我需要实现所有三个，还是只实现一个？如果只有一个，哪一个......？

通常我可以从 VCL 源代码中找到它，但目前我刚刚获得了试用版（无源代码）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T14:16:30.480

您只需要使用这些签名实现方法 read 和 write

```
function Read(var Buffer; Count: Longint): Longint; overload; virtual;
function Write(const Buffer; Count: Longint): Longint 
```

因为使用`TBytes`(and `System::DynamicArray<System::Byte>`) 作为参数的重载版本在内部调用了上述版本的 Read 和 Write。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T15:39:07.230

您需要覆盖的最少的虚拟`TStream`方法是：

```
function Read(var Buffer; Count: Longint): Longint; overload; virtual;
function Write(const Buffer; Count: Longint): Longint; overload; virtual;
function Seek(const Offset: Int64; Origin: TSeekOrigin): Int64; overload; virtual; 
```

如果您想支持分配给`Size`您需要覆盖的属性：

```
procedure SetSize(NewSize: Longint); overload; virtual;
procedure SetSize(const NewSize: Int64); overload; virtual; 
```

32位的实现`SetSize`必须调用64位`SetSize`。而 64 位`SetSize`的工作。

如果您不覆盖这些方法，那么分配给流的`Size`属性将无声无息地执行任何操作。

# python - 重命名python模块中的子模块

> ID：13933885
> 
> 赞同：1
> 
> 时间：2012-12-18T13:17:07.773
> 
> 标签：python, module

我正在阅读 python 代码并遇到这样的代码。

```
import mod1 as m

# ...

do_something(m.sub_a) #1 
```

然而，在`m`,`sub_a`中缺失，但`sub_aa`存在。如何在不更改代码的情况下更改要重命名`sub_a`的`sub_aa`代码`#1`？像，

```
import mod1 as m

import mod1.sub_aa as mod1.sub_a # do something like this

do_something(m.sub_a) 
```

ps 因为`sub_a`已经在很多文件中使用过，`mod1`不建议修改，我必须编写一些包装器来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:22:30.580

`import mod1.sub_aa as mod1.sub_a`是一个语法错误，因为你只能在右侧有一个简单的名称`as`，而不是模块内的名称。

您可以使用赋值在模块内创建一个新名称：

```
m.sub_a = m.sub_aa 
```

# asp.net - 在设计模式下自定义 Visual Studio IntelliSense（webforms aspx）

> ID：13933888
> 
> 赞同：0
> 
> 时间：2012-12-18T13:17:24.110
> 
> 标签：asp.net, visual-studio-2010, intellisense

在许多情况下，intelliSense 会在为属性或属性设置值时提供帮助。

因此，一旦您点击`=`（或`:`在样式属性内），它将建议所有可用的选项进行设置。（根据您选择分配值的参数）

例如：`font-family`在风格上，只要你一打字`:`，你就会被所有可用的字体提供。

我的问题是**如何提出自定义建议？**

看起来它在`C#`, 一个`enum`类型中。

**在我的情况下** [（如果它与答案相关......）]

我想将我自己的参数值列表添加到 intelliSense，所以只要我点击`=` 它就会为我提供设置选项（我之前添加到 Visual Studio 的选项）。

这是我想要实现的一个例子，

如果您选择，`Ajax AutoCompleteExtender` 可能是另外一个要设置的参数。`ContextKey`

```
<cc1:ToolkitScriptManager ID="ToolKitScrptMan1" runat="server">
</cc1:ToolkitScriptManager>

 <cc1:AutoCompleteExtender ID="AutoCompleteExtender1"
        TargetControlID="TBX_FontsAC" runat="server"
        MinimumPrefixLength="1" EnableCaching="true"  
        ServiceMethod="FontNamesList_AutoCompDataSrc"
        FirstRowSelected="true".... and some more parameters......>
 </cc1:AutoCompleteExtender> 
```

因为这只是其中一种选择，这就是我现在想要的，因为我记得还有一些其他的场景我正在考虑它，所以我决定尝试实现这个想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:41:05.390

据我所知，您可以编辑 Intellisense 文件`C:\Program Files\Microsoft Visual Studio 9.0\Xml\Schemas`，这里有一些信息：

[http://blog.whconsult.com/2008/11/20/AddingIntellisenseToVisualStudioForCustomConfigurationSections.aspx](http://blog.whconsult.com/2008/11/20/AddingIntellisenseToVisualStudioForCustomConfigurationSections.aspx)

不过要小心！首先备份所有内容！

# java - 对等方重置连接：文件传输程序的 java 中的套接字写入错误

> ID：13933892
> 
> 赞同：-1
> 
> 时间：2012-12-18T13:17:34.760
> 
> 标签：java, sockets, websocket

我正在尝试使用服务器套接字编程 java 将 2000 个文件从 1 个位置发送到同一服务器中的其他位置，我正在使用 10 个线程来执行该程序，如果

1.  在负载较少的夜间
2.  较少的文件作为输入给出

它为 2000 个文件提供错误，因为对等方重置连接：套接字写入错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:27:02.237

服务器正在关闭套接字，可能是由于开销（连接过多或其他原因）。

您应该将此发布到 SuperUser 或 ServerFault，以了解如何增加您正在击中的树桩，无论它是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:42:09.467

如果您在任何 Unix 上，请使用 . 检查文件描述符限制[`ulimit -n`](http://www.manpagez.com/man/1/ulimit/)。可能是 1024 或类似的东西。

# iphone - 页面视图控制器是否支持 iOS 4.3

> ID：13933898
> 
> 赞同：0
> 
> 时间：2012-12-18T13:17:55.640
> 
> 标签：iphone, ios, ipad

我正在为 iPad 使用基于页面视图控制器的应用程序。它正在模拟器上运行，但不适用于具有 ios 4.3 的设备。这是否意味着 ios 4.3 不支持它或其他任何东西。我也通过了苹果参考，但没有找到任何解决方案。任何人都可以指导它。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:20:51.097

是的，UIPageViewController 在 iOS 5.0 及更高版本中可用。

# asp.net - 为什么 Membership 和 Role Manager 和 Profile 最初位于 Machine.config 中？

> ID：13933900
> 
> 赞同：0
> 
> 时间：2012-12-18T13:17:58.060
> 
> 标签：asp.net, asp.net-membership

首次创建 ASPNETDB 时，为什么最初在 Machine.config 中生成成员资格和角色管理器和配置文件？

重新配置我的应用程序以使其工作很痛苦，我不得不将代码从 Machine.config 移动到 Web.config 以使我的应用程序服务再次工作以准备发布到我的 ISP 网络空间。

敬茶

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:06:52.933

您不必触摸 Machine.config。大多数托管服务甚至不允许您更改他们的 Machine.config。

您可以在应用程序的 web.config 中使用，也`<clear/>`可以在其中使用。`<remove name="DefaultMembershipProvider" />`

[常见问题：添加提供程序时不要忘记](http://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)

**2012 年 12 月 20 日更新**

默认情况下，如果您在 Visual Studio 2012 中创建新项目，则会自动创建成员资格标签。

或者你甚至可以使用 NutGet

![在此处输入图像描述](../Images/4cae35824a5b90605ba88d66d49bd684.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:46:55.550

要回答这个问题，它一直在 machine.config 中。您之前没有注意到它，因为 Visual Studio 会在您的 web.config 中自动为您生成一个新的提供程序条目。作为减少 web.configs 大小的举措的一部分，Microsoft 不再生成许多条目，包括这个条目，如果需要，您可以添加自己的条目。

# android - 我从我的登录 WS 调用中获得了一个包含会话令牌的 cookie 吗？

> ID：13933901
> 
> 赞同：0
> 
> 时间：2012-12-18T13:17:59.820
> 
> 标签：android, web-services, post, cookies, web

它总是给我登录页面作为响应，因为它没有看到我已登录。这是我的 POST 方法的代码（我在登录和其他 Web 服务上都调用它）：

```
protected WebEntity sendPOST(WebServiceTask.InputParam param) throws Exception {
    WebEntity result = null;
    httppost = new HttpPost(param.url);

    if ((param.nameValuePairs != null) && !param.nameValuePairs.isEmpty()) {
        httppost.setEntity(new UrlEncodedFormEntity(param.nameValuePairs, "UTF-8"));
        LogService.log("sendPOST", "======params========" + param.nameValuePairs);
    }
    System.out.println("----blabla_session : "+blabla_session);
    if (blabla_session != null) {
        CookieStore cookieStore = httpclient.getCookieStore();
        BasicClientCookie cookie = new BasicClientCookie("blabla_session", blabla_session);
        cookie.setDomain("http://blbla.kz");
        cookieStore.addCookie(cookie);
        httpclient.setCookieStore(cookieStore);
        httppost.setHeader("Set-Cookie", blabla_session);

    }
    LogService.log("WEB-SERVER-CLIENT POST : ", httppost.getURI().toString());
    HttpResponse response = httpclient.execute(httppost);

    if (response.getStatusLine().getStatusCode() >= 400) {
        String maybeThereIsSomeExtraMessageInBody = "";
        try {
            maybeThereIsSomeExtraMessageInBody = (String) getResponseStream(response, response.getEntity(), String.class);
        } catch (Exception e) {
            e.printStackTrace();
            // DO NOTHING
        }
        return new WebEntity(response.getStatusLine().getStatusCode(), response.getStatusLine().getReasonPhrase() + "\n" + maybeThereIsSomeExtraMessageInBody);
    }
    Header cp = response.getFirstHeader("Set-Cookie");
    if(cp!=null){
        HeaderElement[] he = cp.getElements();
        for (int i = 0; i < he.length; i++) {
            if(he[i].getName().equalsIgnoreCase("blabla_session")){
                blabla_session = he[i].getValue();
                break;
            }
        }
    }
    HttpEntity responseEntity = response.getEntity();
    if (responseEntity != null) {
        if (result != null) {
            result.success = true;
        } else {
            result = new WebEntity(false);
        }
    }
    return result;
} 
```

现在我做的第一个WS调用，是Login WS，此时blabla_session为null，所以那部分代码，没有发起。从第二个 WS 调用开始，blabla_session（它是静态的）是使用我从会话中获得的必要 session_code 启动的。这就是为什么它进入代码的 (blabla_session != null) 部分，它应该在其中创建 cookie，并与 WS 调用一起发送

这是他们用于 WebService 的代码，我称之为：

```
r = requests.post('http://blabla.kz/api/login/',data={'username':'USERNAME','password':'123'})
rr = requests.get('http://blabla.kz/api/validate_coupon/bsdfsdfsd/', cookies=r.cookies)
rr.text 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:17:08.100

当我调用 web 服务调用时，我有一个不应该存在的参数，在 nameValuePairs 中，这就是它崩溃的原因

# cocoa - 我可以在使用同一窗口上的另一个控件时重绘自定义 NSView 吗？

> ID：13933902
> 
> 赞同：1
> 
> 时间：2012-12-18T13:18:02.370
> 
> 标签：cocoa, user-interface, window, nsview

在我正在处理的程序中，我正在执行大量数据处理，并希望能够绘制自定义 NSView 以直观地表示该过程。

使用 GCD 在主线程外处理数据处理（使用 dispatch_sync 作为需要保留的顺序）：

```
for (int i=0; i<iterations; i++) {

    dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        // Add a data crunching task to the queue!
    });
} 
```

当开始处理时，我初始化了一个计时器，用于要求自定义显示定期重绘（一旦所有处理任务完成，此计时器将失效）：

```
-(void)onTick:(NSTimer *)timer {

    [_customView setNeedsDisplay:YES];
    // Update some other UI object (labels etc.)    
} 
```

我可以按预期工作，但是我现在注意到的唯一问题是，如果我在同一个窗口上单击并按住按钮，或者在进程进行时开始拖动滑块，自定义视图的重绘在我放开鼠标之前被阻止！

有什么办法可以防止这种情况发生，最好不要将所有控件移动到单独的窗口上！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:32:45.863

是的，计时器在运行循环上，而在拖放/跟踪模式下，它不会被触发，因为运行循环对于普通模式不是高级的

将其添加到所需的模式中：

```
NSRunLoop *runloop = [NSRunLoop currentRunLoop];
NSTimer *timer = [NSTimer timerWithTimeInterval:0.1 target:self selector:@selector(myTimerAction:) userInfo:nil repeats:YES];
[runloop addTimer:timer forMode:NSRunLoopCommonModes];
[runloop addTimer:timer forMode: NSEventTrackingRunLoopMode]; 
```

编辑：runloop 基本上是苹果的 while 循环，用于将任何事件发送到应用程序。它根据所谓的模式过滤它调度的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-30T09:51:10.703

谢谢大家的问题，答案和评论。

使用 NSEventTrackingRunLoopMode 解决了我不断用给定参数重绘 OpenGL 视图的情况。

```
class MyOpenGLView: NSOpenGLView {

  var timer: Timer?

  required init?(coder: NSCoder) {
    super.init(coder: coder)

    timer = Timer.scheduledTimer(withTimeInterval: 1.0/60, repeats: true) { (t) in
      self.needsDisplay = true
    }

    let runloop = RunLoop.current
    runloop.add(timer!, forMode: .commonModes)
    // runloop.add(timer!, forMode: .eventTrackingRunLoopMode)
  }

  override func draw(_ dirtyRect: NSRect) {
    // draw moving 3D-cubes
  }

} 
```

现在，即使我拖动滑块来更新其参数，它也会继续绘制。此外，调整窗口大小变得平滑。

对于其他解决方案“异步执行”，很有趣！我稍后会试一试。谢谢！

**编辑：**

我改变主意使用 NSRunLoopCommonModes (RunLoopMode.commonModes)，而不是 NSEventTrackingRunLoopMode。

两者都运作良好，但 Apple 的文档暗示在我的情况下 Common Modes 更好。

[https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html)

# c - C 字符超过 128

> ID：13933907
> 
> 赞同：3
> 
> 时间：2012-12-18T13:18:22.063
> 
> 标签：c, character-encoding, character

我有一个关于在 C char 数组中保存字符的问题。

我必须将文件中的文本读入“char”类型的数组（我不能使用无符号字符）。当某些字符的值超过 127 时（例如 €、ä、ö、...），它会将它们保存为负值，但它们通常会占用更多空间（例如 € 需要 3 个负值）。

如何将这些负值计算回无符号字符。有人可以将我链接到有关该问题的教程或指南吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T13:22:19.327

我认为您应该阅读以下内容： http: [//www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:28:46.477

这取决于您使用的编码。

传统的 1 字节编码不会造成任何问题。是的，有些字符被视为负值，但它们仍然是读取时的字符。如果您按原样写回它们，它们将保持原样。

由于您确定`char`每个欧元符号有 3 s，因此您正在处理一些 Unicode 编码，例如 UTF-8。

这意味着，您应该将它们存储在一些多字节类型中，例如`wchar_t`. 但这与您将数据存储在`char`.

我建议您先将文件转换为 1 字节编码，例如转换为[Win1252](http://en.wikipedia.org/wiki/Windows-1252)。此编码有 1 个字节用于欧元符号。

如果您希望使用 Unicode，恐怕很难处理否定的`char`. 传统上用正整数表示 Unicode 值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-18T13:24:27.513

```
char x = 128;

unsigned char y = (unsigned char) x;

printf("%c %u\n", x, y); 
```

# mysql - 使用mysql查询随机选择列

> ID：13933915
> 
> 赞同：-2
> 
> 时间：2012-12-18T13:18:43.877
> 
> 标签：mysql

我需要使用 php 实现一个问答表单，我需要选择问题以及选项值。以一种方式，选项值应该是随机的。

例如从 Questtable 中选择 quest,option1,option2,option3 ；如何以随机顺序为每个请求获取选项 1、选项 2、选项 3，我们可以使用 mysql 实现任何方式。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:21:23.083

您可以使用`RAND()`

```
SELECT * FROM table_name ORDER BY RAND() LIMIT 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:24:14.310

使用 MySQL 查询来执行此操作是不可能的，但您可以使 php 随机化输出。将选项写入一个空数组，然后随机化该数组。

如果你喜欢用 MySQL 做这件事，你必须制作 2 个表，一个包含问题，一个包含答案，每行 1 个答案。

然后你可以这样做：

```
SELECT option FROM tbl_answers WHERE questionId = X ORDER BY RAND() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:24:38.553

不，只有 mysql 是不可能的

您可以`SELECT quest,option1,option2,option3`通过 php 进行 a 和 shuffle

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:34:40.497

尽管您应该如前所述更改您的表格设计，但您可以尝试这个非常粗略的设计（但粗略的设计会导致粗略的解决方案）

```
SELECT
  quest,
  CASE rval WHEN 0 THEN option1 WHEN 1 THEN option2 WHEN 2 THEN option3 END option_1,
  CASE rval WHEN 0 THEN option2 WHEN 1 THEN option3 WHEN 2 THEN option1 END option_2,
  CASE rval WHEN 0 THEN option3 WHEN 1 THEN option1 WHEN 2 THEN option2 END option_3
FROM (
SELECT
  *,
  FLOOR( RAND() * 3 ) rval
FROM tbl_answers ) tmp 
```

并且请：“**不要在家里这样做！** ”

# spring - 使用显示标签导出 pdf 无法正常工作

> ID：13933922
> 
> 赞同：0
> 
> 时间：2012-12-18T13:19:19.537
> 
> 标签：spring, jsp, spring-mvc, pdf-generation, displaytag

我的视图页面中有以下代码。

```
<display:setProperty name="export.excel" value="true" />
<display:setProperty name="export.pdf" value="true" />
<display:setProperty name="export.pdf.filename" value="EmployeeList" />
<display:setProperty name="export.amount" value="list"/>
<display:setProperty name="export.xml" value="true"/>
<display:setProperty name="export.csv" value="true"/> 
```

使用上面的代码，我可以成功导出“excel”、“xml”和“csv”表，但不能导出“PDF”。
我不知道问题所在。没有错误显示。事实上，没有出现 PDF 的链接。它很奇怪。
谁能帮我解决这个问题？
我错过了任何罐子吗？或者可能是别的什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-13T09:25:25.190

我在我的项目中也遇到了同样的问题，并通过在项目类路径中添加 itext-1.3 jar 得到了解决。请确保您的项目类路径中存在以下 jar。Itext jar API 负责显示 PDF 导出功能

itext-1.3.jar displaytag-1.2.jar displaytag-portlet-1.2.jar

# c#-4.0 - 在 C# 报告 rdlc 中排序

> ID：13933925
> 
> 赞同：0
> 
> 时间：2012-12-18T13:19:40.180
> 
> 标签：c#-4.0, reporting

我做了一个报告，其中包含一个表，其中包含 3 个数据库表的 DatabaseView，如下所示：

```
 table name
datbase1 row1
database2 row1
database3 row1 
```

问题是数据库 2 有不止一行，并且报告重复所有表，而不是在中间推送数据库 2 行。我想这样显示表格：

```
 table name
datbase1 row1
database2 row1
          row2
          row3 ..
database3 row1 
```

使用 VS2010、C#、Windows 窗体。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:41:06.150

似乎是 of`Grouping`而不是 of的情况`Sorting`。

为了满足您的需求，您必须根据您的`table`值创建一个行组：这不会复制表的值。

预期的输出将是这样的

```
+----------------+
|Table    | Name |
|----------------|
|database1| row1 |
|---------|------|
|database2| row1 |
|         |------|
|         | row2 |
|         |------|
|         | row3 |
|---------|------|
|database3| row1 |
+----------------+ 
```

[MSDN 库的如何在报表中对数据进行分组](http://msdn.microsoft.com/en-us/library/ms251700%28v=vs.100%29.aspx)

# c++ - 选择性继承 C++

> ID：13933926
> 
> 赞同：18
> 
> 时间：2012-12-18T13:19:44.800
> 
> 标签：c++, inheritance

您能否解释一下为什么以下代码可以编译并正常工作（在 gcc-4.3.4 上检查）。我认为选择性继承不能削弱甚至加强对成员/方法的访问。它不会破坏封装规则吗？

```
#include <iostream>

class A {
protected:
    void foo() { std::cout << "foo" << std::endl;  }
};

class B : private A {
public:
    using A::foo;   //foo() becomes public?!
};

int main() {
    B b;
    b.foo();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T13:21:40.073

从语言的角度来看，这并没有错（设计好不好是另外一回事）。

任何班级都可以选择向更广泛的受众公开它可以访问的内容。

原则上，您的示例与以下内容没有什么不同：

```
class B : private A {
public:
    void bar() { foo(); }
}; 
```

除了这里`foo()`是通过代理公开的。

你不能做的是相反的事情：公共派生类不能限制对可通过基类访问的东西的访问。

# javascript - 获取存储在数据库中的选定下拉列表项的一些信息

> ID：13933928
> 
> 赞同：0
> 
> 时间：2012-12-18T13:19:50.657
> 
> 标签：javascript, asp.net-mvc, razor, client-side

我在使用 razor 的 asp.net mvc3 项目中。

获取存储在数据库中的选定下拉列表项的一些信息的最简单方法是什么？应该是客户端 - 将鼠标悬停在下拉列表后面的图像图标上...

我试过这个，但它并不完整，因为我不想在 javascript 代码中硬编码“Acronis”。

看法：

<

```
script type="text/javascript">
    $(function () {
        var backup = document.getElementById("backupList")
        $('#backupList').change(function () {

            if (this.options[this.selectedIndex].text == 'Acronis') {
                $("#imageQm").show();
                $("#imageQm").attr('title', '@(Html.GetBackupDescription("Acronis"))');             }

        }).trigger('change');
    });
</script>
 @Html.DropDownList("backupList")

 <img id="imageQm" src="Images/question-icon.png" alt="?"  /> 
```

数据库：

```
Backup

ID Name      Description

1  Acronis   ... 
```

```
public static class HtmlHelpers {

  public static string GetBackupDescription(this HtmlHelper helper, string s) {

    ChecklisteEntities db = new Entities();

    IQueryable<server_backup> query = from p in db.server_backup

                                      where p.name == s

                                      select p;

    List<server_backup> liste = query.ToList();

    return liste[0].description;

} 
```

有任何问题请回复:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:08:58.877

如果我理解正确，您需要添加一些内容才能使其正常工作。您在剃刀视图中包含的内容将在构建视图时进行评估，而**不是**在下拉列表中选择项目时进行评估。

您将需要提供附加描述作为最初发送到视图的模型的一部分，或者创建一个服务来调用，该服务将返回您期望的数据。

请记住，您必须在视图中以“@”开头的任何内容仅在视图在服务器上构建时进行评估，一旦完成，它就是传递给浏览器的简单 html。

我的建议是使用初始视图发送两条数据，并让您的 javascript 简单地将该值从 dom 中拉出以使其可见。

# javascript - 与 asp.net 集成时，滑块脚本无法正常工作

> ID：13933930
> 
> 赞同：-1
> 
> 时间：2012-12-18T13:20:03.603
> 
> 标签：javascript, jquery, asp.net

我正在研究一个包含内容、图像和缩略图的滑块。所以我开始研究[以下运行良好的脚本](http://demo.kashmirsouq.com/LOF-Slider/demo2.html)。

现在我想将 asp.net 网站中的相同脚本与来自数据库的内容集成。

我的 asp.net 滑块开始给我带来各种各样的问题，最后设法解决了大部分问题，除了我面临的那个我从 asp.net 网页输出创建 HTML 文件供您[参考](http://demo.kashmirsouq.com/TEST.HTML)

它与工作示例中的代码几乎相同，我无法弄清楚为什么滑块在[TEST.HTML](http://demo.kashmirsouq.com/TEST.HTML)页面上不起作用。

[http://jsfiddle.net/WGqbb/](http://jsfiddle.net/WGqbb/)

**此问题已解决，问题出在 HTML 标记中。**

代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head id="Head1"><title>

</title><meta http-equiv="content-type" content="text/html;charset=utf-8" /><link href="../styles/english_css.css" rel="stylesheet" type="text/css" /></head>
<body id="body"  dir="ltr">
    <form method="post" action="Default.aspx?language=en-us&amp;issue=5" id="frmMasterPage">

    <script src="http://demo.kashmirsouq.com/scripts/slider/jquery.js" type="text/javascript"></script>              
    <script src="http://demo.kashmirsouq.com/scripts/slider/jquery.easing.js" type="text/javascript"></script>
    <script src="http://demo.kashmirsouq.com/scripts/slider/script.js" type="text/javascript"></script>
<link href="http://demo.kashmirsouq.com/styles/slider-en.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
    $(document).ready(function () {
        var buttons = { previous: $('#jslidernews2 .button-previous'),
            next: $('#jslidernews2 .button-next')
        };
        $('#jslidernews2').lofJSidernews({ interval: 5000,
            direction: 'opacity', // for fading effect
            easing: 'linear', // for fading effect
            //easing:'easeInOutQuad',  // for transition effect
            duration: 1200,
            auto: true,
            mainWidth: 590,
            mainHeight: 300,
            navigatorHeight: 76,
            navigatorWidth: 160,
            maxItemDisplay: 4,
            buttons: buttons
        });
    });

</script>
<style>

    ul.lof-main-wapper li {
        position:relative;    
    }
</style>

 <div id="jslidernews2" class="lof-slidecontent" style="width:750px; height:300px;">

            <div  class="button-previous">Previous</div>

             <!-- MAIN CONTENT -->

                    <div class="main-slider-content" style="width:590px; height:300px; float:right;">
                        <ul class="sliders-wrap-inner">
                            <li>
                                   <img  src="http://demo.kashmirsouq.com/images/article/94618045-044c-4977-a5d7-bf2a44f19f1e.png" />      
                                  <div class="slider-description">
                                    <h4>Sheikh Mohammed holds fast to his father’s le...</h4>
                                    <a class="readmore" href="#">Read more </a>
                                 </div>
                            </li>

                          </ul>      
                    </div>

                    <div class="main-slider-content" style="width:590px; height:300px; float:right;">
                        <ul class="sliders-wrap-inner">
                            <li>
                                   <img  src="http://demo.kashmirsouq.com/images/article/5daed017-e3aa-49d8-b477-ce607dfcbd51.png" />      
                                  <div class="slider-description">
                                    <h4>It’s time the Lebanese removed their shackles...</h4>
                                    <a class="readmore" href="#">Read more </a>
                                 </div>
                            </li>

                          </ul>      
                    </div>

                    <div class="main-slider-content" style="width:590px; height:300px; float:right;">
                        <ul class="sliders-wrap-inner">
                            <li>
                                   <img  src="http://demo.kashmirsouq.com/images/article/d158c479-6559-46c9-bae7-e7e04a1cbf9b.png" />      
                                  <div class="slider-description">
                                    <h4>Belarus is open for business</h4>
                                    <a class="readmore" href="#">Read more </a>
                                 </div>
                            </li>

                          </ul>      
                    </div>

                    <div class="main-slider-content" style="width:590px; height:300px; float:right;">
                        <ul class="sliders-wrap-inner">
                            <li>
                                   <img  src="http://demo.kashmirsouq.com/images/article/de155ceb-c148-495b-9aa0-ad1f9f0f463c.png" />      
                                  <div class="slider-description">
                                    <h4>A Royal Visit</h4>
                                    <a class="readmore" href="#">Read more </a>
                                 </div>
                            </li>

                          </ul>      
                    </div>

                    <div class="main-slider-content" style="width:590px; height:300px; float:right;">
                        <ul class="sliders-wrap-inner">
                            <li>
                                   <img  src="http://demo.kashmirsouq.com/images/article/ff435532-635a-4089-b7e3-858a305cbfed.png" />      
                                  <div class="slider-description">
                                    <h4>Building Dubai together</h4>
                                    <a class="readmore" href="#">Read more </a>
                                 </div>
                            </li>

                          </ul>      
                    </div>

                    <div class="main-slider-content" style="width:590px; height:300px; float:right;">
                        <ul class="sliders-wrap-inner">
                            <li>
                                   <img  src="http://demo.kashmirsouq.com/images/article/5a2d74a8-5ce8-4816-895b-7235ac2b3081.png" />      
                                  <div class="slider-description">
                                    <h4>Two new debuts from Mitsubishi</h4>
                                    <a class="readmore" href="#">Read more </a>
                                 </div>
                            </li>

                          </ul>      
                    </div>

                           <div class="navigator-content">
                              <div class="navigator-wrapper">
                                    <ul class="navigator-wrap-inner">
                                      <li>
                                            <div>
                                            <img  src="http://demo.kashmirsouq.com/images/article/94618045-044c-4977-a5d7-bf2a44f19f1e.png" />
                                            </div>    
                                        </li>              

                                    </ul>
                              </div>

                         </div>

                           <div class="navigator-content">
                              <div class="navigator-wrapper">
                                    <ul class="navigator-wrap-inner">
                                      <li>
                                            <div>
                                            <img  src="http://demo.kashmirsouq.com/images/article/5daed017-e3aa-49d8-b477-ce607dfcbd51.png" />
                                            </div>    
                                        </li>              

                                    </ul>
                              </div>

                         </div>

                           <div class="navigator-content">
                              <div class="navigator-wrapper">
                                    <ul class="navigator-wrap-inner">
                                      <li>
                                            <div>
                                            <img src="http://demo.kashmirsouq.com/images/article/d158c479-6559-46c9-bae7-e7e04a1cbf9b.png" />
                                            </div>    
                                        </li>              

                                    </ul>
                              </div>

                         </div>

                           <div class="navigator-content">
                              <div class="navigator-wrapper">
                                    <ul class="navigator-wrap-inner">
                                      <li>
                                            <div>
                                            <img  src="http://demo.kashmirsouq.com/images/article/de155ceb-c148-495b-9aa0-ad1f9f0f463c.png" />
                                            </div>    
                                        </li>              

                                    </ul>
                              </div>

                         </div>

                           <div class="navigator-content">
                              <div class="navigator-wrapper">
                                    <ul class="navigator-wrap-inner">
                                      <li>
                                            <div>
                                            <img  src="http://demo.kashmirsouq.com/images/article/ff435532-635a-4089-b7e3-858a305cbfed.png" />
                                            </div>    
                                        </li>              

                                    </ul>
                              </div>

                         </div>

                           <div class="navigator-content">
                              <div class="navigator-wrapper">
                                    <ul class="navigator-wrap-inner">
                                      <li>
                                            <div>
                                            <img src="http://demo.kashmirsouq.com/images/article/5a2d74a8-5ce8-4816-895b-7235ac2b3081.png" />
                                            </div>    
                                        </li>              

                                    </ul>
                              </div>

                         </div>

          <!-- MAIN CONTENT -->
          <div class="button-next">Next</div>

          <!-- BUTTON PLAY-STOP -->
          <div class="button-control"><span></span></div>
          <!-- END OF BUTTON PLAY-STOP -->

 </div>

        </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:50:15.333

这正是我告诉你的。

您的 html 标记设置不正确。你把你所有的图片都放在了自己的里面`<div><ul>`

我把你的标记固定在一个`<div>`和一个`<ul>`中，图像在他们自己的`<li>`

[http://jsfiddle.net/Morlock0821/WGqbb/1/](http://jsfiddle.net/Morlock0821/WGqbb/1/)

# java - 在 STS 的 spring 模板 mvc 项目中添加 spring 安全依赖项时出错

> ID：13933934
> 
> 赞同：0
> 
> 时间：2012-12-18T13:20:15.500
> 
> 标签：java, spring, spring-mvc, spring-security

我开始学习spring框架。我使用 Springsource Toolsuite Version:3.1.0.RELEASE) 作为我的 IDE。我的 spring 版本是 3。它可以选择创建新的 Spring Mvc 模板项目。我通过单击创建了它，并找到了一个很好的启动和运行的 mvc 项目。

但是，在 POM.XML 中添加 spring 安全依赖项时，我遇到了一些问题。我添加了以下依赖项：

```
spring-security-core; spring-security-web; spring-security-config; 
```

它们都是 3.1.3 版本。

然后我清理它并更新 Maven 依赖项。它得到错误。问题是，错误的类型有时是不同的。我厌倦了寻找每种类型的东西。

我的问题是，我做错了什么？我不认为在未触及的模板项目的 POM.XML 中添加一些依赖项会导致这种灾难。

谁能给我一些建议？这将非常有帮助。

提前致谢。

# c# - 打开保存文件对话框

> ID：13933940
> 
> 赞同：-5
> 
> 时间：2012-12-18T13:20:50.483
> 
> 标签：c#, silverlight-4.0

我有一个调用异步方法的按钮，我想在这个方法的回调中打开 SaveFileDialog，我知道它会引发安全异常

但是任何解决方法，我都依赖回调来知道参数将在保存对话框中使用

例如我调用 webservice 来检查文件是否存在

如果存在和 word 版本，我会将 savefiledilaoge 的属性设置为 word 等等

调用 webservice 进行检查是异步的，所以在回调中我得到了我想知道的所有信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:38:27.367

如果您使用的是 MVVM Light 之类的框架，您可以从回调中向 UI 线程发送消息（传递保存所需的参数）。

编辑。添加示例

在您的代码隐藏页面中，您很可能需要为我们将发送的自定义消息设置一个侦听器。在您的 onload 或 onnavigateto 方法中执行此操作是一种很好的做法。我假设您的回调将加载一个名为`CustomObjectWithParams`您从 db 获取的自定义对象。

在您背后的 xaml 代码中：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        // the "MyViewModel.OpenSaveDialogRequest" can be any string.. it just needs to synch up with what was sent from the viewmodel below
        Messenger.Default.Register<CustomObjectWithParams>(this, "MyViewModel.OpenSaveDialogRequest", objParams => ShowSaveDialog(objParams));
        base.OnNavigatedTo(e);
    }

    private void ShowSaveDialog(CustomObjectWithParams obj) {
        // do your  open save here in the UI thread
    }

    // be smart, make sure you unregister this listener when you navigate away!
    protected override void OnNavigatedFrom(NavigationEventArgs e)
    {

        Messenger.Default.Unregister<CustomObjectWithParams>(this);
        base.OnNavigatedFrom(e);
    } 
```

现在在您的视图模型回调函数中（未在 UI 线程上运行）...您想要发送您获得异步的参数。你可以这样做：

```
protected void your_asynch_callbackfunction(your args) {
            CustomObjectWithParams objParams = new CustomObjectWithParams();
            // fill up this object here....

            // now send the object to the UI to do something with it
            Messenger.Default.Send<CustomObjectWithParams>(objParams, "MyViewModel.OpenSaveDialogRequest");

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:48:10.050

搞砸这个我在一个小型测试项目中尝试过这个，也许你想做这样的事情..既然你拒绝发布相关代码，让别人和我一样依赖我们的读心技巧

```
public class AsyncSaveTester : 'put yourclassIheritance Here'
{
    private SaveFileDialog asyncSaveDialog;

    public SaveFileDialog AsyncSaveDialog
    {
        get { return asyncSaveDialog; }
        set { asyncSaveDialog = value; }
    }

    private void Button_Click(object sender, EventArgs e)
    {
        asyncSaveDialog = new SaveFileDialog();
        //Write your code to Show the Dialog here
    }

    // where is the handler for your webservice call...find that and call the Save method from there
    private void Save(string fileToSave)
    {
        Stream fileStream = asyncSaveDialog.OpenFile();
        // If you choose to use Streaming, then you would write the code here to do the file Streaming from 
        // the web Service call
    }
} 
```

# windows - 重命名不带括号的多个文件/删除括号窗口

> ID：13933944
> 
> 赞同：10
> 
> 时间：2012-12-18T13:21:08.037
> 
> 标签：windows, cmd, rename

我想从任何地方开始以数字递增的顺序重命名大量文件。但是当我重命名多个文件时，它给我留下了括号。例如，我将文件重命名为 abc_.jpeg 它会导致 abc_(1).jpeg、abc_(2).jpeg 等等。

我尝试使用命令提示符重命名

`ren abc_(*).jpeg abc_*.jpeg`
不起作用。可能是因为括号

`ren abc_"("*")".jpeg abc_*.jpeg`
重命名文件，但产生与以前相同的文件名。我只是想以某种方式删除括号。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T17:04:42.563

要删除括号，您必须进行一些字符串操作。我已经编写了一个批处理文件来执行此操作（另存为`.bat`）

```
cd C:\folder
setlocal enabledelayedexpansion
for %%a in (abc_*.jpeg) do (
set f=%%a
set f=!f:^(=!
set f=!f:^)=!
ren "%%a" "!f!"
) 
```

我不认为你可以从命令行轻松地在一行中做到这一点，它可能是可能的，但它不会很漂亮。如果你能帮助它使用这个批处理文件来删除括号。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-24T06:19:48.230

在文件资源管理器窗口中，选择所有文件，右键单击并选择重命名。Windows 将选择起始数字作为圆括号之间提供的数字，因此使用比所需位数多 1 位的数字命名文件。

**示例**：我们想要模式“test_xxx”。使用文件资源管理器，将文件重命名为“tes(1000)”。您的文件现在将命名为 ["tes(1000)"、"tes(1001)"、"tes(1002)" 等..]。按住 SHIFT 并右键单击文件资源管理器的打开区域，然后选择“在此处打开命令窗口”。发出以下命令：

```
ren *.* test_???.* 
```

这会将所有文件重命名为正确的格式 [“test_000”、“test_001”、“test_002”等。]。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-08-01T16:31:55.077

聚会有点晚了，但这里是删除**括号**和自动创建的**空白空间的组合。**此代码通过将 .bat 文件放在包含您要修改的所有文件的文件夹中来工作。

将代码复制并粘贴到记事本中并将其另存为sequentialFileNameCleaner.bat

您的文件名必须与第一行中写入的文件名**相同**。话虽如此，如果要更改文件名，可以手动更新第一行。

```
:sequentialFileNameCleaner  [/R]  [FolderPath]
setlocal enabledelayedexpansion
for %%a in (*.jpg) do (
set f=%%a
set f=!f:^(=!
set f=!f:^)=!
ren "%%a" "!f!"
)
@echo off
setlocal disableDelayedExpansion
if /i "%~1"=="/R" (
  set "forOption=%~1 %2"
  set "inPath="
) else (
  set "forOption="
  if "%~1" neq "" (set "inPath=%~1\") else set "inPath="
)
for %forOption% %%F in ("%inPath%* *") do (
  if /i "%~f0" neq "%%~fF" (
    set "folder=%%~dpF"
    set "file=%%~nxF"
    setlocal enableDelayedExpansion
    echo ren "!folder!!file!" "!file: =!"
    ren "!folder!!file!" "!file: =!"
    endlocal
  )

) 
```

默认情况下，此代码只会定位 .jpg 文件。在第 3 行，更改`(*.jpg)`to`(*.png)`或 to`(*.mp4)`或任何您想要的扩展名将使代码兼容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-21T22:56:59.000

当我们需要将包含特定括号的文件名列表传递给脚本时，问题就出现了。以下确实适用于此。在此示例中，我们将括号更改为下划线。

```
SET fileList=%*
SET delim1=aaaaaaaaaaaaa
SET delim2=zzzzzzzzzzzzz
setlocal enabledelayedexpansion
SET fileList=!fileList:^(=%delim1%!
SET fileList=!fileList:^)=%delim2%!
FOR %%f in (%fileList%) DO (
 SET f1=%%~f
 SET f1=!f1:%delim1%=^(!
 SET f1=!f1:%delim2%=^)!
 SET f2=%%f
 SET f2=!f2:%delim1%=_!
 SET f2=!f2:%delim2%=_!
 FOR %%i IN (!f2!) DO RENAME "!f1!" "%%~nxi"
) 
```

# c++ - 使用从 Solaris 64 位或 Linux 32 位到 Linux 64 位的内存映射文件

> ID：13933947
> 
> 赞同：1
> 
> 时间：2012-12-18T13:21:15.897
> 
> 标签：c++, shared-memory, file-conversion

我们的应用程序使用多个内存映射文件在多个进程之间进行通信。生产运行在 64 位的 solaris 上，开发机器是 32 位的 linux。将来我们希望在所有环境中使用 64 位 linux。编译已经完成，现在我需要存储在内存映射文件中的数据。不幸的是，如果我使用 32 位 linux 中的文件，我会收到“总线错误”。如果我使用了 64 位 solaris 的文件，进程就会崩溃。

据我了解，发生总线错误是因为 32 位文件中的寻址错误（地址超出文件末尾）。此外，solaris 文件似乎与 linux 系统不兼容。因此，我在 64 位 linux 上创建了新的内存映射文件，并且应用程序可以工作，但显然没有数据。

有没有办法可以在我的新 64 位 linux 系统上读取这些文件的旧版本？我想编写自己的转换程序来提取数据并填充新生成的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:30:16.543

它崩溃的原因是您将文件加载到内存中，然后尝试使用不同的数据结构访问它 -**即使它们在源代码中看起来相同，但它们在运行时并不相同**，而不是在针对不同架构编译时。

# matlab - 包含在单元格数组中时如何删除矩阵行？

> ID：13933951
> 
> 赞同：3
> 
> 时间：2012-12-18T13:21:34.217
> 
> 标签：matlab, octave

与往常一样，我意识到这是一个简单的问题，但对 Octave 的力量相对较新，我正在努力解决这个问题。我有一个单元格数组 A，其中包含向量。我希望从每个向量中删除最后两个值，最后将另一个单元格数组中包含的向量附加到每个向量中。这是一个最小的例子：

```
A = {[1 2 11 12] [1 2 11 12] [1 2 11 12]}
A = 
{
[1,1] =
      1        2        11        12
[1,2] =
      1        2        11        12
[1,3] =
      1        2        11        12
}
B = {[3 4 5] [3 4 5] [3 4 5]}
B = 
{
[1,1] =
      3        4        5
[1,2] =
      3        4        5
[1,3] =
      3        4        5
} 
```

因此，我想结束：

```
C =
{
[1,1] =
      1        2        3       4       5
[1,2] =
      1        2        3       4       5
[1,3] =
      1        2        3       4       5
} 
```

任何指向有关此等的文档的指针都会很棒。

谢谢，马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:24:34.300

使用`cellfun`：

```
C = cellfun( @(x, y) [x(1:end-2) y], A, B, 'UniformOutput', false); 
```

# ios - FACEBOOK SDK 不允许以读取权限请求发布或管理权限

> ID：13933955
> 
> 赞同：4
> 
> 时间：2012-12-18T13:21:42.217
> 
> 标签：ios, facebook, facebook-ios-sdk

我目前正在尝试在我们的应用程序中实现 Facebook 登录和注册流程。但是有一个小问题。我已经从我们的 Web-Api 获得了权限，如果我尝试将它们传递给`openActiveSessionWithReadPermissions`Facebook SDK 的方法，则会出现以下消息的错误：

```
> Terminating app due to uncaught exception
> 'com.facebook.sdk:InvalidOperationException', reason: 'FBSession:
> Publish or manage permissions are not permited to to be requested with
> read permissions. 
```

因此，我似乎无法使用此方法传递发布或管理权限。我现在的问题是：为什么我不能将此参数传递给 openActiveSession，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T13:43:03.580

如果您想以 以外的权限打开活动会话`ReadPermissions`，您可以尝试

```
 openActiveSessionWithPublishPermissions:(NSArray *)permissions 
                         defaultAudience:(FBSessionDefaultAudience) 
                            allowLoginUI:(BOOL)allowLoginUI
                       completionHandler:^(FBSession *session, FBSessionState status, NSError *error)handler 
```

方法。或者，如果您想用其他权限重新授权已经打开的会话，您可以使用

```
- (void)reauthorizeWithReadPermissions:(NSArray*)readPermissions
                 completionHandler:(FBSessionReauthorizeResultHandler)handler; 
```

或者

```
 - (void)reauthorizeWithPublishPermissions:(NSArray*)writePermissions
                    defaultAudience:(FBSessionDefaultAudience)defaultAudience
                  completionHandler:(FBSessionReauthorizeResultHandler)handler; 
```

方法。尝试通过 FBSession.h 类。

# gwt - 在 GWT 中带有过滤器的 RemoteServiceServlet

> ID：13933957
> 
> 赞同：2
> 
> 时间：2012-12-18T13:21:53.333
> 
> 标签：gwt, servlets

我正在尝试使用带有过滤器的 RemoteServiceServlet 来捕获请求以跟踪在我的用户的 webapplicaiton 中请求的方法。

我无法做到这一点......

任何人都可以建议一种最佳方法来跟踪称为 ServletFilter 之类的方法。

注意我喜欢跟踪用户和他请求的请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:27:51.160

在每个方法 java.util.logging.Logger 的开头使用，然后写入参数和用户信息。该信息将写入您的 tomcat 日志中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:11:53.817

您可以使用[“Spring MVC”](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)或[“Google Guice”](http://code.google.com/p/google-guice/)来实现，这个想法背后的步骤是：

1.  编写一个通用 servlet 并将所有 RPC 的 URL 映射到它。
2.  通用 servlet 必须扩展“RemoteServiceServlet”类。
3.  重写 processCall 方法，以便您可以找出客户端要调用哪个类的哪个方法。

    @Override public String processCall(String payload) 抛出 SerializationException {

    ```
    try {
        RPCRequest rpcRequest = RPC.decodeRequest(payload);

        RemoteService service = getServiceInstance(rpcRequest.getMethod().getDeclaringClass());

        return RPC.invokeAndEncodeResponse(service, rpcRequest.getMethod(),
                rpcRequest.getParameters(), rpcRequest.getSerializationPolicy());

    } catch (IncompatibleRemoteServiceException ex) {
        getServletContext()
                .log("An IncompatibleRemoteServiceException was thrown while processing this call.", ex);
        return RPC.encodeResponseForFailure(null, ex);
    } 
    ```

    }

您可以看到这个使用 Google guice 的[示例。](http://pavelgj.blogspot.nl/2008/02/gwt-remoteserviceservlet-guice.html)

玩得开心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:07:48.427

您可以在 RemoteServiceServlet 的实现中覆盖`public boolean preProcess(HttpExchange exchange)`如下。

```
public boolean preProcess(HttpExchange exchange) {
    String body = null;
    RPCRequest req = null;

    // Read and parse the request
    byte[] bytes = null;
    Object bytebuf = getAttribute("RequestBody");
    if ((bytebuf != null) && (bytebuf instanceof ByteBuffer)) {
        bytes = ((ByteBuffer) bytebuf).array();
    }

    if (bytes == null) {
        setAttribute("ResponseCode", new Integer(500));
        setAttribute("ResponseBody", "Missing Request Body.");
        return true;
    }

    body = new String(bytes, "UTF-8");

    req = RPC.decodeRequest(body, this.getClass());

    String methodName = req.getMethod().toString();
    //Here you have name of a method
    //You can get parameters
    //Object[] parms = req.getParameters();
    return true;
} 
```

# c# - 是否有像 Visual Studio 调试输出这样的 WPF 输出监视器控件

> ID：13933958
> 
> 赞同：7
> 
> 时间：2012-12-18T13:21:55.103
> 
> 标签：c#, wpf, visual-studio, wpf-controls

我正在尝试将输出监视器添加到我的 WPF 应用程序。类似于 Visual Studio 中的调试输出的只读监视器。

是否有一个 WPF 控件已经提供了我需要的功能？或者有没有办法可以重用 Visual Studio 中的控件？

目前我正在使用由 StringBuilder 支持的标准文本框。更新转到 StringBuilder，而 TextBox 每 200 毫秒获取最新的字符串。

我的问题是，随着输出字符串变长，这会变得非常慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:03:32.537

我会使用 RichTextBox 控件来输出数据。

在这个示例中，我的性能完全没有问题。

```
public partial class MainWindow : Window
{
    private int counter = 0;
    public MainWindow()
    {
        InitializeComponent();
        Loaded+=OnLoaded;
    }

    private void OnLoaded(object sender, RoutedEventArgs routedEventArgs)
    {

        for (int i = 0; i < 200; i++)
        {
            AddLine(counter++ + ": Initial data");
        }

        var timer = new DispatcherTimer();
        timer.Interval = new TimeSpan(0, 0, 0, 0, 200);
        timer.Tick += TimerOnTick;
        timer.IsEnabled = true;
    }

    private void TimerOnTick(object sender, EventArgs eventArgs)
    {
        AddLine(counter++ + ": Random text");
    }

    public void AddLine(string text)
    {
        outputBox.AppendText(text);
        outputBox.AppendText("\u2028"); // Linebreak, not paragraph break
        outputBox.ScrollToEnd();
    }
} 
```

和 XAML

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <RichTextBox x:Name="outputBox"
                     VerticalScrollBarVisibility="Visible" 
                     HorizontalScrollBarVisibility="Visible" 
                     IsReadOnly="True">
            <FlowDocument/>
        </RichTextBox>

    </Grid>
</Window> 
```

并且可能很容易扩展它。如果滚动位置不在末尾，请不要滚动到末尾，例如，以便您可以在文本框仍在更新时查看旧数据。

# java - 注入一个Java方法_before_另一个方法被调用

> ID：13933960
> 
> 赞同：11
> 
> 时间：2012-12-18T13:22:01.823
> 
> 标签：java, java-bytecode-asm, bytecode-manipulation

我正在使用 ASM 并想重写如下内容：

```
someMethod().targetMethod(args...) 
```

至：

```
someMethod().injectedMethod(arg).targetMethod(args...) 
```

问题是我不知道之前的方法是什么，我只知道目标方法（因此`someMethod()`在此之后查找和注入不是一种选择）。

我也有许多版本的目标方法，我希望它使用不同的参数集。

使用 ASM 我可以很容易地找到目标方法调用，但不幸的是，此时的操作数堆栈是：

```
[ argN, ..., arg1, instance, ... ] 
```

虽然我可以计算出实例将下降多远，但我无法注入可以读取它的字节码。我知道你最多可以使用 dup 命令的技巧来处理 4 个参数，但我需要一个通用的解决方案。

我可以添加一堆局部变量并从堆栈中复制所有内容，复制指向的实例并将所有内容放回原处，但这是我真的不想要的运行时效率低下。

我认为可行的是，如果我可以跟踪哪些指令负责将实例指针放在堆栈上，然后我可以将我的方法调用注入那里而不是目标方法调用。但是，我没有运气找到任何可以帮助我做到这一点的东西。

我知道像 AspectJ 这样的东西允许这样做，但是在加载很多类时必须这样做，而且 AspectJ 太慢了。

谁能指出基于 ASM 构建的分析工具可能让我这样做，或者任何人都可以想到一种更好的方法来在另一个方法调用之前注入一个方法调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:07:29.503

如果我正确理解了您的问题，那么我已经实现了与您想要做的相同的事情，但方式不同。

使用 ASM 事件驱动的字节码修改，我首先将 someMethod( arg, arg, arg ) 重命名为 copyOf_someMethod( arg, arg, arg )。然后我创建了一个名为 someMethod( arg, arg, arg ) 的新方法，它进行了一些处理，然后调用了 copyOf_someMethod( arg, arg, arg )。

我在我实现的 ClassVisitor 的 visitMethod(..) 方法中进行了方法重命名：

```
MethodVisitor methodVisitor =
    super.visitMethod(
        methodAccess, "copyOf_" + methodName, methodDesc,
            methodSignature, methodExceptions );

return methodVisitor; 
```

在 visitMethod(..) 中，我还将所有方法签名详细信息存储在类变量中，以便在 visitEnd() 方法中使用。

我实际上将方法详细信息存储在 MethodDetail 对象中并将其放入队列中：

```
private Queue<MethodDetail> methodDetails = new LinkedList<MethodDetail>(); 
```

我使用我实现的 ClassVisitor 的 visitEnd() 方法创建了 someMethod( arg, arg, arg ) 的新实现。我使用 ASMFier 生成代码以放入 visitEnd() 方法。该实现利用了我之前存储在 visitMethod(..) 中的详细信息。新实现做了一些处理，然后调用了 copyOf_someMethod()。在 visitEnd() 方法中，我弹出了队列的所有 MethodDetail，并为每个 MethodDetail 调用了我之前由 ASMFier 生成的 ASM 代码。

使用这种设计，我为一种方法创建了一个代理，该方法进行了一些处理，然后调用了原始方法。请注意，原始方法已重命名为 copyOf_someMethod(..)。另请注意，我为充当代理的原始方法提供了一个新实现。

为了支持多个参数，我使用 ASMFier 为 1 arg、2 arg、3 arg 等生成不同的代码，我最多支持 7 个参数，如果被代理的方法有超过 7 个参数，则抛出 Unsupported Exception。在 visitEnd(..) 方法中，我调用了不同的代码（由 ASMFier 生成），具体取决于原始方法有多少方法参数。

我使用 javaagent 来拦截类加载并修改字节。

由于我是 ASM 的新手，也许我没有正确理解您的问题 - 但是，如果您的问题是关于创建一个代理来进行一些处理然后调用原始方法，那么我的解决方案就可以了。它似乎并不慢。其方法被代理的类的类加载时间并不比没有修改字节码慢得多。引入代码的运行速度并不慢，ASMFier 生成的 ASM 代码看起来非常快。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T04:54:52.427

在一般情况下，您可以将堆栈中的值卸载到临时局部变量中。[ASM commons 包中的LocalVariableSorter](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/commons/LocalVariablesSorter.html)适配器使它变得非常简单。但实际上具有超过 4 个参数的方法很少见。无论如何，它仍然比在运行时进行全面的数据流分析更简单、更可靠。

ASM 的[org.objectweb.asm.tree.analysis](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/tree/analysis/package-summary.html)为数据流分析提供了便利，例如，您可以使用[SourceInterpreter](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/tree/analysis/SourceInterpreter.html)跟踪哪些指令在每个变量和堆栈槽上产生了值。有关详细信息，请参阅[ASM 用户指南。](http://download.forge.objectweb.org/asm/asm4-guide.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T16:21:59.430

查看 org.objectweb.asm.tree.analysis。SourceIterpreter 应该为您提供将值放入堆栈的指令。

# asp.net - Ldap 用户身份验证不适用于锁定或禁用的帐户

> ID：13933962
> 
> 赞同：1
> 
> 时间：2012-12-18T13:22:06.737
> 
> 标签：asp.net, c#-4.0, ldap

我正在开发一个网站来管理 ldap。我陷入了一种情况，当我尝试对帐户锁定或禁用的用户进行身份验证时，它失败了。我想要做的是在显示帐户被锁定或禁用的消息之后首先对用户进行身份验证。

我正在这样编码

```
LdapConnection connection = new LdapConnection(new       LdapDirectoryIdentifier("SJTPNOC.com", 636));
connection.SessionOptions.VerifyServerCertificate = new VerifyServerCertificateCallback((con, cer) => true);
connection.SessionOptions.ProtocolVersion = 3;        
connection.AuthType = AuthType.Basic;       
connection.SessionOptions.SecureSocketLayer = true;
connection.Timeout = new TimeSpan(0, 0, 10);   
connection.Credential = new NetworkCredential(username, password);
using (connection){
connection.Bind();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:37:17.117

不确定我是否理解这一点 - 如果用户被锁定或禁用，他们将无法进行身份验证。您应该捕获从 LDAP 返回的错误并使用该信息向用户显示友好的消息，或者查找用户并读取指示用户状态的属性（例如 AD 中的 userAccountControl）。

# jquery - 使用 JQuery 提交 JSF 表单并调用服务器端函数

> ID：13933971
> 
> 赞同：1
> 
> 时间：2012-12-18T13:22:29.900
> 
> 标签：jquery, forms, jsf

我可以使用以下代码提交我的 JSF 生成的表单：

```
<h:commandButton  id="btnValidate" type="submit"  value="#{rb.REGISTER}" action="#{login.registerAccount}" /> 
```

但我想在提交表单之前处理 JS 代码，所以我添加`onClick="test();"`了`commandButton`type 到`button`：

```
<h:commandButton  id="btnValidate" type="button"  value="#{rb.REGISTER}" action="#{login.registerAccount}" onClick="test();" /> 
```

我的`test`功能：

```
function test(){    
   $('#j_idt14\\:register_form').submit(); 
```

}

使用此代码，我的表单已提交，但`login.registerAccount`不再调用我的函数。

如何用JS提交表单并调用服务器端函数（属性`action`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:33:49.467

不需要自己通过JS提交表单。它只会干扰 JSF 自己处理表单提交的工作。只是为您提供了一个在提交表单*之前*`onclick`执行一些 JavaScript 代码的钩子。除非您从处理程序内部返回，否则将始终提交表单。*`false``onclick`*

 *因此，如果您对阻止表单提交不感兴趣并且总是想提交它，只需删除该`submit()`调用即可。

例如

```
<h:commandButton ... onclick="onbeforesubmit()" /> 
```

和

```
function onbeforesubmit() {
    // ...
} 
```

或者，如果您真的有兴趣根据处理程序中的逻辑阻止表单提交，则返回`true`或`false`相应地。返回`false`将阻止表单提交。

例如

```
<h:commandButton ... onclick="return validate(this.form)" /> 
```

和

```
function validate(form) {
    var valid = true;

    // ... (some logic which may set it to false)

    return valid;
} 
```

*（请注意，我已经演示了一种比使用更简单的方法来获取函数内部的父表单`$('#j_idt14\\:register_form')`；如果需要，您只需将`$(form)`其包装在 jQuery 对象中）**

# vim - 在 mac vim 上使用 ant 编译时寻找更好的错误格式

> ID：13933973
> 
> 赞同：1
> 
> 时间：2012-12-18T13:22:41.230
> 
> 标签：vim, ant

目前`efm`我在 mac 上使用的是`set efm=%A\ %#[javac]\ %f:%l:\ %m,%A\ %#[aapt]\ %f:%l:\ %m,%-Z\ %#[javac]\ %p^,%-C%.%#`. 它实际上可以定位错误位置并显示简短的错误信息，但我只能通过切换到终端来获得详细信息。

顺便说一句，efm 在archlinux 上工作得很好。

这是输出：

```
-compile:
    [javac] Compiling 8 source files to /Users/ccheng/workspace_tb/Android_RollingBall/bin/classes
    [javac] /Users/ccheng/workspace_tb/Android_RollingBall/src/hongbosb/rollingball/GLDrawable.java:22: incompatible types
    [javac] found   : void
    [javac] required: int
    [javac]         mEnvProgram = Utils.loadProgram(context, "environment_vertex_shader.glsl", "environment_fragment_shader.glsl");
    [javac]                                        ^
    [javac] /Users/ccheng/workspace_tb/Android_RollingBall/src/hongbosb/rollingball/EnvironmentGLDrawable.java:15: cannot find symbol
    [javac] symbol  : constructor GLDrawable()
    [javac] location: class hongbosb.rollingball.GLDrawable
    [javac]     public EnvironmentGLDrawable(Context context) {
    [javac]                                                   ^
    [javac] /Users/ccheng/workspace_tb/Android_RollingBall/src/hongbosb/rollingball/MyRenderer.java:31: cannot find symbol
    [javac] symbol  : variable context
    [javac] location: class hongbosb.rollingball.MyRenderer
    [javac]         mEnvironment = new EnvironmentGLDrawable(context);
    [javac]                                                  ^
    [javac] 3 errors 
```

以下是我的 vim 错过的内容。

```
[javac] found   : void
        [javac] required: int
        [javac]         mEnvProgram = Utils.loadProgram(context, "environment_vertex_shader.glsl", "environment_fragment_shader.glsl");
        [javac]                                        ^
        [javac] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T02:32:18.067

好的，我将重新格式化它，以便（对我）更容易处理......

```
let fmt = '%A\ %#[javac]\ %f:%l:\ %m,'
      \ . '%A\ %#[aapt]\ %f:%l:\ %m,'
      \ . '%-Z\ %#[javac]\ %p^,'
      \ . '%-C%.%#'
execute 'set errorformat=' . fmt 
```

javac 检测器中只有一行可以获取消息。您只需要添加更多。在该行上方的某处添加以下内容`%-C`：

```
 \ . '%C\ %#[javac]\ %m,' 
```

您可能还想为 aapt 消息做类似的事情，尽管如果这些是单行的，那么我认为您只需敲击`%A`开始其行的部分；`%A`意味着它是多行消息的开始，因此它会将其后的所有内容视为 aapt 消息的一部分，直到`%Z`匹配到 a。位说“这个`%-C`匹配是无趣的”；这些是您告诉 vim 跳过的多行消息中的内容（例如未显示的内容）。

# wso2 - WSO2 ELB 是否在内部使用任何云服务集群 (IaaS)？

> ID：13933974
> 
> 赞同：1
> 
> 时间：2012-12-18T13:22:45.120
> 
> 标签：wso2, openstack, wso2carbon, iaas

WSO2 ELB 如何从 OpenStack 等云服务集群 (IaaS) 中提取信息以执行自动扩展？WSO2 ELB 是否在内部使用任何云服务集群？如果是这样，哪些 IaaS 供应商是开箱即用的？

WSO2 甚至会提取任何信息吗？它是否只需要主机在集群中才能使工作人员/管理器或自动扩展算法工作？

谢谢你的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:20:37.153

[WSO2 ELB](http://wso2.com/products/elastic-load-balancer/)支持使用 jclouds API 的 IaaS 集成。从理论上讲，这意味着我们可以支持 jclouds 支持的任何 IaaS。目前，我们为 AWS EC2 和 Openstack-nova IaaS 提供商提供支持。[请从此处](http://docs.wso2.org/wiki/display/ELB203/Auto-Scaling+in+Load+Balancer)阅读有关使用 WSO2 ELB 进行自动缩放的更多信息。

从我们的产品页面下载我们的最新版本 (WSO2 ELB 2.0.3)。

# csv - 如何在期望脚本中使用具有 2 列的 CSV 作为输入来设置主机名

> ID：13933979
> 
> 赞同：2
> 
> 时间：2012-12-18T13:23:03.123
> 
> 标签：csv, expect

我有一个包含两列格式为“IP 地址；主机名”的 CSV。我有这段脚本可以打开一个主机文件并登录到交换机/路由器并将配置备份到 tftp 服务器。

现在我需要调整脚本来打开 csv，这样我就可以在交换机上设置主机名。我唯一需要知道的是如何打开 CSV 并从每行中获取两个变量，即 IP 地址和主机名。其余的都没有问题。

```
 #! /bin/expect

    set timeout 20
    set hostnamefile [lindex $argv 0]
    set tftpip [lindex $argv 1]
    set user [lindex $argv 2]
    set password [lindex $argv 3]
    set prompt "*#"

    set send_slow {10 .001}
    log_user 0

    if {[llength $argv] == 0} {
      send_user "Usage: scriptname hostnamefile \'TFTPserver IP\' username         \'userpassword\'\n"
      exit 1
    }

    ;# -- main activity

    proc dostuff { currenthost {tftpserver 1} } {

       ;# do something with currenthost

       send_user "\n#####\n# $currenthost\n#####\n"

       send -- "copy running-config tftp:\r"
       expect "Address or name of remote host []?"
       send "$tftpserver\r"
       expect "Destination filename*"
       send "\r"
       expect {
           "*bytes copied*" {
           send_user "TFTP copy succeeded\n"
           }
           "*Error*"{
           send_user "TFTP copy failed\n"
           }
       }
       send "\r"
       return
    }

    ;# -- start of task

    set fd [open ./$hostnamefile r]
    set hosts [read -nonewline $fd]
    close $fd

    foreach host [split $hosts "\n" ] {

        spawn /usr/bin/ssh $user@$host

        while (1) {
            expect {

            "no)? " {
               send -- "yes\r"
            }

            "*assword*:" {
                send -- "$password\r"
            }

            "*>" {
              send "enable\r"
            }

            "$prompt" {
               dostuff $host $tftpip
               break
            }
          }
       }

       expect "$prompt"
       send -- "exit\r"

    }

    expect eof 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:24:25.390

我设法围绕起到作用的期望脚本构建了一个 bash 脚本。如果有人有更好的方法，请告诉我。

```
#!/bin/bash
input=./list.csv
oldifs=$ifs
ifs=,
[ ! -f $input ] && { echo "$input file not found"; exit 99; }

if [ $# -ne 2 ]
then
    echo "Usage: scriptname username password"
    exit 1
fi

username=$1
password=$2

while read line
do
eval $(echo "$line" | awk -F';' '{print "ip="$1";hostname="$2}')
#echo $ip
#echo $hostname

/usr/bin/expect - << EndMark
set prompt "*#"
set cprompt "*(config)#"

spawn /usr/bin/ssh $username@$ip

while (1) {
   expect {
       "no)? " {
          send -- "yes\r"
       }
       "*assword*:" {
          send -- "$password\r"
       }
       "*>" {
          send "enable\r"
       }
       "$prompt" {
          break
       }
   }
}
sleep 2

send -- "conf t\r"
expect "$cprompt"
send -- "hostname $hostname\r"
expect "$cprompt"
send -- "end\r"
expect "$prompt"
send -- "copy running-config startup-config\r"
expect "Destination filename*"
send -- "\r"
expect "$prompt"
send -- "exit\r"

send_user "\n#####\n# hostname $hostname\n# set on $ip\n#####\n"
send -- "exit\r"

expect eof

EndMark

done < $input
ifs=$oldifs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-12T17:28:45.743

一年后......但它仍然可能有用！

```
#! /bin/expect

set f [open "list.csv"] #associate your csv to a var
set lines [split [read $f] "\n"] #build a list named "lines": each list item is a line

# create a while loop until "x" reach the length of your list -1
set x 0
while {$x<[expr [llength $lines] -1]} {   
    set line [lindex $lines $x]           
    regexp (.*);(.*) $line match_regex ip host 
    puts $match_regex
    puts $ip
    puts $host
    incr x
}

# set line... # var "line" will be at each cycle an item of your list
# regex...    # split var "line" into 3 vars: 
# "match_regex" will match all the string
# "ip" will match regex included in first "(.*)" 
# "host" regex in the second "(.*)" 
```

# node.js - 使用 passport.js 和 express.js (node.js) 制作安全的 oauth API

> ID：13933980
> 
> 赞同：18
> 
> 时间：2012-12-18T13:23:06.570
> 
> 标签：node.js, api, express, oauth, passport.js

我有我认为一个特定的问题，除非我没有以正确的方式做事。

我有一个应用程序有两个方面，一个客户端（html 站点）和一个 API（使用 express + mongodb 构建）。API 需要被安全访问。他们都在不同的域上，现在假设我的网站在 domain.com 上，我的 API 在 api.com:3000 上。

当我使用他们的数据创建用户时，我添加了护照以从 Github 获取访问令牌，因此我基本上可以拥有“使用 Github 登录”。

我目前的流程是：

1) 客户端（站点），在 API 上打开一个弹出窗口

```
window.open("http://api.com:3000/oauth") 
```

2）快递服务器，启动护照进程：

```
app.get('/oauth', passport.authenticate('github'), function(req, res) {

}); 
```

对于策略，我使用[了这段代码](https://github.com/jaredhanson/passport-github/blob/master/examples/login/app.js)。

3）我将回调重定向到关闭弹出窗口的url（带有window.close（）的javascript）：

```
app.get('/oauth/callback', passport.authenticate('github', { failureRedirect: '/' }), function(req, res) {
    res.redirect('/auth_close');
}); 
```

到那时，一切都很好，我现在登录了 API。我的问题是如何将数据返回给客户端，因为客户端对 accessToken、用户或用户 ID 一无所知。

因此，从客户端（打开弹出窗口的站点），我尝试了不同的方法：

*   从弹出窗口中获取值：由于重定向而不起作用，我忘记了弹出窗口的 javascript 信息

*   调用我的 API 来获取会话中的“当前用户”，例如[http://api.com:3000/current](http://api.com:3000/current) 再请求一个，不理想，但这一个有效。但是，我仍然有一个问题。

如果我从浏览器访问此 /current url，它将返回用户，因为浏览器在标头中发送快速会话 cookie：

```
Cookie:connect.sid=s%3AmDrM5MRA34UuNZqiL%2BV7TMv6.Paw6O%2BtnxQRo0vYNKrher026CIAnNsHn4OJdptb8KqE 
```

问题是我需要从 jquery 或类似的请求中发出这个请求，这就是它失败的地方，因为没有发送会话。所以用户没有返回：

```
app.get('/current', function() {
    // PROBLEM HERE, req.user is undefined with ajax calls because of the session!
}); 
```

我找到了一种让它工作的方法，但我不满意，因为我会遇到跨浏览器的 CORS 问题，它正在添加以表达：

```
res.header("Access-Control-Allow-Credentials", "true"); 
```

并在 jquery ajax 调用中添加 withCredentials 字段，如此[处](http://api.jquery.com/jQuery.ajax/)所述。

要在本机 XHR 对象上设置的 fieldName-fieldValue 对的映射。例如，如果需要，您可以使用它为跨域请求设置 withCredentials 为 true。

```
$.ajax({
   url: a_cross_domain_url,
   xhrFields: {
      withCredentials: true
   }
}); 
```

我对此也不满意，因为我丢失了标题上的通配符：`Access-Control-Allow-Origin`，我需要指定一个域，如此[处](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS?redirectlocale=en-US&redirectslug=HTTP_access_control#Requests_with_credentials)所述。

所以，我不确定我应该在这里采取的方法，我唯一需要的是客户端从护照 oauth 过程中获取 accessToken 或 userID。这个想法是在每次调用 API 时使用该令牌来验证调用。

有什么线索吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T16:00:15.300

我遇到过同样的问题。我在登录页面上使用本地策略，然后检查用户是否在其他请求的会话中。

正如您所说，解决方案是使用 CORS 以便使用 XMLHTTPRequest 在 cookie 中传递会话 ID。

我决定在其他请求上使用访问令牌，而不是使用尚未在所有浏览器上工作的 CORS。我使用的工作流程如下：

```
POST /login 
```

*   用户名和密码在正文中传递。
*   使用本地策略进行身份验证。
*   响应返回用户对象，包括 access_token

获取 /endpoint/abc123?access_token=abcdefg

*   从登录响应中获取的令牌
*   使用承载策略进行身份验证（在 passport-http-bearer 中）

Express 中现在不需要会话。

我希望这种替代方法有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T13:52:20.430

在快速应用程序中配置任何内容之前，请使用以下（完全相同）设置跨域响应的标头：

```
app.use(function(req, res, next) {
res.header('Access-Control-Allow-Credentials', true);
res.header('Access-Control-Allow-Origin', req.headers.origin);
res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE');
res.header('Access-Control-Allow-Headers', 'X-Requested-With, X-HTTP-Method-Override, Content-Type, Accept');
if ('OPTIONS' == req.method) {
     res.send(200);
 } else {
     next();
 }
}); 
```

# javascript - 如何在 10 次迭代后设置 setTimeout？

> ID：13933982
> 
> 赞同：0
> 
> 时间：2012-12-18T13:23:12.707
> 
> 标签：javascript, jquery

我有一个如下所示的每个循环

```
$('#goldBarList tr:not(:eq(0))').filter(':has(:checkbox:checked)').each(function() {  
    $(this).remove();  
}); 
```

因为我有 4000 行，每行都有一个复选框。我需要删除选中复选框的那些行。
但是，浏览器给出停止运行这个脚本的错误？
因为这个循环需要更多时间才能完成。
所以我只想`setTimeout`在 10 次迭代后使用并在 0.5 秒后继续循环..
意味着我希望循环在每 10 次迭代后休眠 1/2 秒.. 请给我一些代码参考...

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:38:44.347

好吧，在重新阅读您的问题后，我意识到我完全误解了您的意思。

这是我修改后的函数，允许您一次只处理数组的一小块“块”。但是，如果 DOM 重排让您头疼，请先尝试使用文档片段来构建树。

修改后的答案：

```
function _each(arr, fn/*callback(elem,i)*/, limit/*items per pass*/) {
    limit = limit || 10;
    var count = 0,
        len = arr.length;

    function run() {
        var d = limit;
        while (d-- && len >= count) {
            fn(arr[count], count++);
        }
        if (len > count) setTimeout(run, 1000); // one second is just to show you it working.
    }
    run();
} 
```

[演示在这里](http://jsfiddle.net/rlemon/z9dzt/3/)。

回答完这个问题后，我看到了将方法扩展一点以接受完整回调的一些价值。

[http://jsfiddle.net/rlemon/hAUcX/7/](http://jsfiddle.net/rlemon/hAUcX/7/)（[可读性较差但版本较小](http://jsfiddle.net/rlemon/hAUcX/6/)）这里是一个带有修改功能的演示。将超时从 0 更改为 1 毫秒时，我确实注意到了相当显着的感知性能差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:50:35.440

您似乎真正在寻找的是能够在浏览器不超时的情况下删除这些元素。使用 window.setTimeout 拆分调用可以解决问题，即使超时为 0。下面的代码以 500 个批次执行此操作。

**编辑：**更新以提高性能。（谢谢伯吉。）

```
var removeTds = function($el) {
    var elements = $el.filter(":lt(500)"),
        count = elements.length;

    elements.remove();
    $el = $el.filter(":gt(499)");
    if (count === 500) {
        window.setTimeout(function() {
            removeTds($el);
        }, 0);
    }
};

removeTds($('tbody tr:not(:eq(0))').filter(':has(:checkbox:checked)')); 
```

这是[小提琴](http://jsfiddle.net/wzsjV/5/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:25:41.723

使用`.each`耦合内的参数引用`return`：

```
$(...).each(function(i,e){
  if (i >= 10) return; // dtop after 10 iterations
  // original code
}) 
```

您也可以使用[`.slice()`](http://api.jquery.com/slice/)仅选择 10 个项目，然后转到`.each`：

```
$(...).slice(0,10).each(function(){
  // original code
}); 
```

如果您想在组中执行此操作，`.slice()`也会使这更容易，因为您基本上可以啜饮`n`元素并抓取`m`元素（然后处理该组）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:30:02.047

您可以通过使用计数器然后使用 break 语句在 10 次迭代后中断循环

```
var i = 0; 
$('#goldBarList tr:not(:eq(0))').filter(':has(:checkbox:checked)').each(function() {  
   if(i >= 10)
   {  
       break;
   }
   else
   {
       $(this).remove();
       i++;
   }

}); 
```

# c# - C# - Webclient 发布数据

> ID：13933987
> 
> 赞同：1
> 
> 时间：2012-12-18T13:23:36.970
> 
> 标签：c#, post, webclient

我试图复制一个站点帖子，如下所示： [https ://www.usbank.com/cgi_w/cfm/personal/products_and_services/reoPropertiesReq.cfm](https://www.usbank.com/cgi_w/cfm/personal/products_and_services/reoPropertiesReq.cfm)

我只想发布任何状态以查看结果，因为它们最终会出现在电子邮件中。这是我的发布方法，它适用于其他网站上的登录等，所以我知道它有效

```
public HtmlDocument POST(string url, string postData)
    {//string myParameters = "param1=value1&param2=value2&param3=value3";

        HtmlDocument hdoc = new HtmlDocument();
        wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
        using (wc)
        {
            hdoc.LoadHtml(wc.UploadString(url, postData));
        }

        return hdoc;
    } 
```

我像这样使用它：

```
HtmlDocument mainDoc = POST("https://www.usbank.com/cgi_w/cfm/personal/products_and_services/reoPropertiesReq.cfm",
            "selState=4&StateNM=Arizona"); 
```

但这似乎不正确。任何人都可以分析这个网站并确定它是我的代码还是缺少数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:52:46.210

前段时间我已经为我编写了此功能，希望对您有所帮助

```
 private void POST(string url, string data)
    {
        HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create(new Uri(url));
        req.Method = "POST";
        req.Headers.Add(HttpRequestHeader.AcceptLanguage, "de-DE,de;q=0.8,en-US;q=0.7,en;q=0.3");

        req.Timeout = req.ReadWriteTimeout = 15000;

        ASCIIEncoding encoding = new ASCIIEncoding();
        byte[] dataBytes = encoding.GetBytes(data);
        req.ContentLength = dataBytes.Length;
        Stream stream = req.GetRequestStream();
        stream.Write(dataBytes, 0, dataBytes.Length);
        stream.Close();

        req.GetResponse();
    } 
```

# css - IE 8 及以下版本的 CSS - div 背景图像大小

> ID：13933989
> 
> 赞同：0
> 
> 时间：2012-12-18T13:23:40.167
> 
> 标签：css, internet-explorer-8, internet-explorer-7, background-image

我有一个具有以下样式的 div：

```
.pricemark {
  background: url(/Files/System/ui/vispris.png) no-repeat scroll 0 0 transparent;
  background-position: center center;
  background-size: 110%;
  background-size: 30%\9; } 
```

但是，在 IE8 及以下，图像大小 110% 被解释为图像大小的 110%，而所有其他浏览器都将其视为 div 大小。

因此，在 IE8 及以下版本中显示不正确。我尝试过黑客攻击：

```
background-size: 30%\9; 
```

但结果还是一样。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:11:15.007

IE8 及以下不支持 background-size 属性。

处理它的一种方法是：

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='/Files/System/ui/vispris.png',
sizingMethod='scale');

-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='/Files/System/ui/vispris.png',
sizingMethod='scale')"; 
```

# java - 有没有办法在 Javadoc 中引用 bean 的属性（getter 和 setter）？

> ID：13933994
> 
> 赞同：0
> 
> 时间：2012-12-18T13:23:49.137
> 
> 标签：java, hyperlink, javabeans, javadoc

假设我有一个带有 bean 属性的类`sum`，它是用 setter`void setSum(double value)`和 getter实现的`double getSum()`。

是否可以通过 javadoc 中的单个链接来引用它？假设我希望在类的序言中描述一些属性。例如，像这样：

```
/**
 * A Value class is a bunch of aggregation values
 * 
 * {@beanlink #sum} - sum of all values (hypothetic way)
 * 
 * {@link #getSum()} - sum of all values (conventional way)
 * 
 */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:42:54.313

javadoc 注释中没有任何`@beanlink`类型的标签。[查看 javadoc 的允许标记javadoc 的](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javadoc.html#javadoctags)完整列表；）

有一个[`-tag`](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javadoc.html#tag)选项可用于创建自定义标签。但这并不完全适合您的解决方案，即创建链接。

# java - 具有多个声明的 Java 泛型

> ID：13933997
> 
> 赞同：2
> 
> 时间：2012-12-18T13:23:59.893
> 
> 标签：java, generics

我正在使用这样的泛型实现一个类：

```
public abstract class AbstractTask<T,V>
{
  public void method1 (T param1, V param2) {}
} 
```

声明`<T,K>`可以是可变的吗？我想通过这种方式扩展该类：

```
public class TaskOne extends AbstractTask<Integer,String>
{
  public void method1 (Integer param1, String param2) {}
}

public class TaskTwo extends AbstractTask<Number,Object,Double>
{
  public void method1 (Number param1, Object param2, Double param3) {}
} 
```

有可能这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:29:17.217

不，你不能。

您应该`V`从普通`java.lang`类型更改为参数的包装器。

```
public class TaskOne extends AbstractTask<Integer,StringWrapper>
{
  public void method1 (Integer param1, StringWrapper param2) {}
}

public class TaskTwo extends AbstractTask<Number,ObjectAndDoubleWrapper>
{
  public void method1 (Number param1, ObjectAndDoubleWrapper param3) {}
}

class ObjectAndDoubleWrapper {
    Object obj;
    Double doub;
} 
```

等等

显然，选择一个更明智的名称，以反映您要解决的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:28:20.677

不，这是不可能的，Java 编译器强制使用泛型，你会得到编译错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:40:27.210

不，对于泛型类的所有实例，类型和方法参数的数量必须相同。

如果我们知道您要完成的工作，我们可能会提出替代方案。例如，如果这是关于将任务提交到线程池，您可以执行以下操作：

```
final int x = ...;
final String y = ...;
final Number n = ...;
new Runnable {
    @Override public void run() {
        // do something with x, y and n
    }
} 
```

或者您可以使用 AOP 代理捕获参数。

或者（如果您不需要类型安全），您可以简单地拥有

```
void method1(Object... args); 
```

或者 ...