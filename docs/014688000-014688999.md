# StackOverflow 问答 14688000-14688999

# java - zkoss 中的 JasperReports 找不到 .jasper

> ID：14688001
> 
> 赞同：0
> 
> 时间：2013-02-04T13:41:16.060
> 
> 标签：java, jasper-reports, zk

我正在使用*ZK 6.0.1*和*JasperReports 4.1.1*

我得到了这个糟糕的结果

```
HTTP Status 410 - /view/z_b72/eMvPx1/gvv/0/D:/wrk/.html - <Jasperreport eMvPx1> not found.

type Status report

message /view/z_b72/eMvPx1/gvv/0/D:/wrk/.html - <Jasperreport eMvPx1> not found.

description The requested resource is no longer available, and no forwarding address is known.
Apache Tomcat/7.0.34 
```

我认为它似乎找不到您的 .jasper 文件

这是我的java代码：

```
String path=Sessions.getCurrent().getWebApp().getRealPath("/WEB-INF/report/cobaReport.jasper");
Jasperreport rpt=new Jasperreport();
List<AccountGroup> accountGroups;
accountGroups = masterCoaManager.findAllAccg();
Map parameters = new HashMap();
parameters.put("terranTitle", "Hoax");
parameters.put("terranDataSource", new AccountGroupDataSource(accountGroups));

rpt.setSrc(path);
rpt.setParameters(parameters);
rpt.setType("html");
divReport.appendChild(rpt); 
```

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:10:34.063

参见[ZK Web 应用程序中 Jasper Report 的集成](http://zkframeworkhint.blogspot.in/2012/10/integrate-dyanmic-jasper-reprot-with-zk.html)

# iis - 使用网站特定的 php.ini 文件

> ID：14688003
> 
> 赞同：0
> 
> 时间：2013-02-04T13:41:21.857
> 
> 标签：iis, web-hosting, php

我有一个在共享 IIS 服务器上运行的网站。托管服务提供商未对文件进行更改。我需要设置**`display_errors`**为**`off`**. 我要求他们将服务器上的 php.ini 文件邮寄给我。我可以将默认的 ini 文件覆盖到我的根目录中的 php.ini 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:02:39.507

我找到了一个更简单的解决方案。我曾经`error_reporting(0);`关闭显示错误。这可能会帮助其他人寻找相同的解决方案。

# java - 如何用整数创建一个简单的 HashMap？

> ID：14688007
> 
> 赞同：4
> 
> 时间：2013-02-04T13:41:29.580
> 
> 标签：java, map

以下情况：我们有一个带有元素的向量，并希望将每个元素映射到一个整数。元素的映射应该与向量内元素的索引完全相同。例子：

```
Vector<String> v = new Vector<String>();
v.add("s1");
v.add("s2"); 
```

映射应该是：

```
"s1" -> 0
"s2" -> 1 
```

方法一：`v.indexOf("s1")`用于获取整数。但是这种方法很慢，因为每次都必须搜索正确的索引。

方法 2：创建一个`HashMap`并`put`在 for 循环中使用以将每个元素放入地图。

方法 2 还可以，但是有更好的解决方案来更直接地创建地图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:46:01.160

如果`Map`s where 是为了这样的目的而设计的，为什么你觉得很奇怪？我知道，这是一个简单的映射，`Map`对于一个简单的任务，比如获取给定字符串的索引，使用 a 似乎真的很自大。

但是请考虑一下，方法 1 的行为就像`Map<Integer,String>`您按值查找并获取其相关键的地方，因此您可以坚持相反`Map<String,Integer>`，除非您被限制使用`Vector`.

我只是担心这是有人将“性能与内存”讨论提升到纳米级别的情况之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:01:06.867

您可能要考虑的 HashMap 的替代方法是使用带有 Collections.binarySearch 的字符串的 ArrayList 来获取整数值。根据您计划有多少元素，这可能与 HashMap 方法相当。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T13:47:00.673

> 但是直接映射地图有更好的解决方案吗？

`HashMap`将是最适合使用的数据结构。

> 如何用整数创建一个简单的 HashMap？

```
HashMap<String, Integer> aHMap = new HashMap<String, Integer>();
aHMap.put("S1", 0); 
aHMap.get("S1"); 
```

或者

```
HashMap<Integer, String> aHMap = new HashMap<Integer, String>();
aHMap.put(0, "S1"); 
aHMap.get(0); 
```

# c - C中gmp库的mdi_init的实现

> ID：14688010
> 
> 赞同：0
> 
> 时间：2013-02-04T13:41:44.287
> 
> 标签：c, gmp

我正在尝试在 C 中实现我自己的 GMP mpz_t 数据类型版本。为此，我在定义 mpz_t 的结构时遇到了问题。

这是因为我这样定义我的 mpz_t

```
typedef struct integer
{
int array[100];
int no_digits;
}mdi; 
```

显然，我将我的大值存储为整数数据类型的数组，而 no_digits 是结构中的位数。但是现在，对于init函数，我要满足下面的原型

```
void mdi_init(mdi x); // Initialises the data-type. 
```

这里返回类型为 void，输入参数为 mdi 类型。我对如何通过我对 mdi 的定义来满足这一要求感到困惑。

需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:41:19.743

> 我对如何通过我对 mdi 的定义来满足这一要求感到困惑。

你不能。

`struct`s 是按值传递的，因此以 an`mdi`作为参数的函数不能更改传递的参数。

GMP 定义`mpz_t`为 s 的数组（长度为 1）`__mpz_struct`，

```
typedef __mpz_struct mpz_t[1]; 
```

并且`__mpz_struct`类似于您的`mdi`结构。所以`mpz_init()`接收到一个指向`__mpz_struct`. 你需要做同样的事情，你可以`mdi_init()`明确地将一个指针`mdi`作为参数，或者像 GMP 一样，创建`mdi`一个 s 的数组（长度为 1）`mdi_struct`。

# visual-studio-2010 - 有没有办法控制 MsTest 中的 DataCollector 调用序列

> ID：14688015
> 
> 赞同：2
> 
> 时间：2013-02-04T13:42:01.603
> 
> 标签：visual-studio-2010, tfs, mstest

我们使用 MsTest 和 Tfs 作为测试基础设施。几个自定义数据收集器安装在测试机器上。但我想控制调用这些收集器的过程。有没有办法配置 QtAgent 将如何加载和执行 DataCollectors 的方案。我已经挖掘了所有的 msdn，但没有成功。我需要知道所有数据收集器何时完成他们的工作以运行重新启动过程和其他辅助操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T18:22:07.923

如果您只使用自定义数据收集器，那么您可以自己构建此逻辑。创建一个通用数据收集器类，您的所有自定义收集器都从该类派生以及`count++`接收到的所有会话开始事件。同样`count--`，会话结束事件，然后在执行您的自定义任务时`count==0`

# ruby-on-rails - Mongoid 版本混乱:)

> ID：14688017
> 
> 赞同：0
> 
> 时间：2013-02-04T13:42:07.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

:) 有一个新任务，有点挣扎。我需要在我的 Rails 应用程序中实现版本控制。所以我尝试了一些 gem，比如 mongoid history、mongoid papertrail 和最简单的 Mongoid:Versioning。想使用最后一个，只是找不到合适的 api 码头，不知道如何让我们说从版本 5 反向到版本 2。你有类似 versions.count、versions.first、versions.last、versions 的东西.where......就是这样:)感谢您的任何建议或帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:20:47.077

鉴于您有一篇更改其版本的文章，要还原：

```
article = Article.find("the-id")
article.attributes = article.versions.where(version: 0).first.attributes
article.save 
```

请注意，这只会将新版本放入版本列表中，并将其放在堆栈的顶部。

列出所有版本：

```
article.versions 
```

要显示特定修订：

```
article.versions.where(version: 4).first 
```

# opencv - 在 Opencv 中使用 Mat& 和 Mat 有什么区别？

> ID：14688018
> 
> 赞同：1
> 
> 时间：2013-02-04T13:42:10.987
> 
> 标签：opencv, mat, iplimage

我见过像`Mat& img = imread("image")`和这样的声明`Mat img = imread("image")`。两者有什么区别 ？

有什么类似的`Mat*`吗？

我怎样才能`IplImage`以类似的方式使用`Mat&`？

请帮忙！

# security - 如何从 iReport 生成安全的 PDF 报告？

> ID：14688019
> 
> 赞同：0
> 
> 时间：2013-02-04T13:42:12.890
> 
> 标签：security, pdf, jasper-reports, adobe, ireport

我正在使用导出为 PDF 的 iReport Designer 生成报告。已要求保护报告免于复制文本、编辑等。如何在 iReport 本身或使用 jasperreports 库包中执行此操作？

这个[示例 PDF](http://www.assenagon.com/WebReporting/doDownload?fileId=1093)是我希望 PDF 得到保护的方式。我意识到使用不同的操作系统/PDF 查看器可以轻松绕过这些安全措施，但我仍然需要它们来满足这个要求。

注意：我不想为获得这些证券而支付 Adob​​e 认证订阅费用。特别是因为它正在为虚假安全付出代价。

我还想避免密码验证来打开文档。与示例 PDF 一样，任何人都可以打开和查看，只有复制和编辑被禁用。

我知道“工具”>“选项”>“导出选项”选项卡>“PDF”下的选项。我尝试选择各种权限，添加 128 位密钥加密（与示例 PDF 相同），并添加所有者密码。这没有奏效。在这里我会注意到，出于某种原因，“JasperReports 属性”选项卡中的属性不会更改以匹配导出选项。

例如，“net.sf.jasperreports.export.pdf.encrypted”属性设置为 false。在导出选项中选择 pdf 加密时，这不会更改为 true。我在 iReport 上手动更改了此设置，无法打开任何生成的报告，并且恢复默认设置不起作用。我不得不重新安装 iReports 来解决这个问题，所以如果您尝试更改这些属性，请小心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-23T09:02:39.410

JasperReports 中的加密 PDF（我在版本 6 中测试过）
**简单代码**

```
SimplePdfExporterConfiguration configuration = new SimplePdfExporterConfiguration();
  configuration.setEncrypted(true);
  configuration.set128BitKey(true);
  configuration.setUserPassword("jasper");
  configuration.setOwnerPassword("reports");
  configuration.setPermissions(PdfWriter.ALLOW_COPY | PdfWriter.ALLOW_PRINTING);
  exporter.setConfiguration(configuration); 
```

[参考链接](http://jasperreports.sourceforge.net/sample.reference/pdfencrypt/index.html)

# python - BeautifulSoup HTML 提取表格数据

> ID：14688025
> 
> 赞同：4
> 
> 时间：2013-02-04T13:42:38.577
> 
> 标签：python, beautifulsoup, extraction

我有这个 HTML 表格，我需要其中的一些数据：

```
<table id="curFullTable" class="tablesorter" style="width:728px;margin-left:auto;margin-right:auto;">
    <tr>
        <td>Euro</td>
        <td align="center">EUR</td>
        <td align="center">€&lt;/td>
        <td align="center">1</td>
        <td align="center">110.9416</td>
        <td align="center">111.2754</td>
        <td align="center">111.6092</td>
        </tr>
    <tr>
        <td>Australian dollar</td>
        <td align="center">AUD</td>
        <td align="center">$</td>
        <td align="center">1</td>
        <td align="center">84.9671</td>
        <td align="center">85.2228</td>
        <td align="center">85.4785</td>
    </tr>
    <tr>
        <td>Canadian dollar</td>
        <td align="center">CAD</td>
        <td align="center">$</td>
        <td align="center">1</td>
        <td align="center">81.6167</td>
        <td align="center">81.8623</td>
        <td align="center">82.1079</td>
    </tr>
</table> 
```

使用此代码：

```
tableData = htmlText.find("table", attrs={"class":"tablesorter"})
rows = tableData.findAll('tr') 
```

我在一个列表中获取所有表格行和表格单元格。到目前为止，我已经设法一一提取货币名称，但我真的需要一个货币名称列表，像这样

```
currencies = ['Euro','Australian dollar','Canadian dollar'] 
```

实现这一目标的方法是什么？稍后，我还需要从每个 TR 元素的最后一个 TD 元素中提取数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T13:53:18.173

```
In [70]: from bs4 import BeautifulSoup

In [71]: soup = BeautifulSoup(html)

In [72]: [tr.find('td').text for tr in soup.findAll('tr')]
Out[72]: [u'Euro', u'Australian dollar', u'Canadian dollar'] 
```

最后一项：

```
In [73]: [tr.findAll('td')[-1].text for tr in soup.findAll('tr')]
Out[73]: [u'111.6092', u'85.4785', u'82.1079'] 
```

# c# - 如何将列表转换为数组

> ID：14688026
> 
> 赞同：-4
> 
> 时间：2013-02-04T13:42:45.403
> 
> 标签：c#, arrays, list

问题是列表是我的一类的类型，所以我不能简单地做数组..这是我的代码：

```
public List<PhoneBookCore> elements = new List<PhoneBookCore>(); 
```

这是课程：

```
{
abstract class PhoneBookCore
{
    protected string _group;

    public PhoneBookCore(string group)
    {
        this._group = group;
    }

    public abstract void Add(PhoneBookCore d);
    public abstract void Remove(PhoneBookCore d);
    public abstract void Display(int indent);
} 
```

}

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:44:41.017

如果你想要列表中的一个数组，你可以简单地使用`ToArray`：

```
PhoneBookCore[] bookCores = elements.ToArray(); 
```

如果您想要一个属性数组`_group`，则为`string[]`：

```
string[] groups = elements.Select(pbc => pbc._group).ToArray(); 
```

请注意，您需要添加`using.System.Linq`for`Enumerable.ToArray`并且第二种方法只是演示如何从您的类中选择一个属性并创建一个数组。它还没有编译，因为`_group`它受到了lazyberezovsky 提到的保护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:44:27.963

您是否尝试过 Linq 方法[`ToArray()`](http://msdn.microsoft.com/en-us/library/x303t819.aspx)？（你必须添加`using System.Linq`）

```
PhoneBookCore[] myArray = elements.ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T13:45:00.317

您可以使用[`.ToArray()`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)LINQ 扩展方法：

```
List<PhoneBookCore> elements = new List<PhoneBookCore>();
PhoneBookCore[] array = elements.ToArray(); 
```

# c# - 如何绑定 ObservableCollection 到 SQL 表？是否可以？

> ID：14688029
> 
> 赞同：1
> 
> 时间：2013-02-04T13:42:51.293
> 
> 标签：c#, sql

例如：

我有一堂课

```
MyClass //Dirty code
{
public int Id;
public string Name;
} 
```

我在 DB 中有一个带有 Id 和 Name 字段的表。我可以将 MyClass 对象的 ObservableCollection 绑定到这个数据库表吗？如何做到这一点？另外我想在 ObservableCollection 中进行更改，并且更改必须在 DB 中进行镜像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:43:59.960

如果数据更改，数据库不会自动更新您的应用程序，如果您的应用程序更改值，它也不会写回数据库。实现您所追求的最基本方法是轮询服务器以按设定的时间间隔检查更改并从那里更新屏幕。

如果您使用的是 SQL Server，您可以查看[CDC](http://msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx)，这将有助于确定发生了什么变化（如果有的话）。不过，这些都不是自动的，您每次都需要重新运行查询并执行相反的操作以回写。

我假设您正在使用 WPF / Silverlight，所以可以使用这样的东西：

```
// Background timer used to refresh...
private DispatcherTimer _timer = null;

public MainViewModel()
{
    // Do initial load
    initializeload();

    // Start the timer to refresh every 100ms thereafter (change as required)
    _timer = new DispatcherTimer();
    _timer.Tick += Each_Tick;
    _timer.Interval = new TimeSpan(0, 0, 0, 0, 100);
    _timer.Start(); 
}

// Raised every time the timer goes off
private void Each_Tick(object o, EventArgs sender)
{
    // Refresh from database etc ...

    // Anything else you need ...
} 
```

# android - 将 WebView 设置为查看桌面站点而不是移动站点

> ID：14688030
> 
> 赞同：28
> 
> 时间：2013-02-04T13:42:53.673
> 
> 标签：android, android-webview

我已经对 Stack Overflow 和 Google 进行了大量研究，但我发现没有任何东西真正适合我。我希望该站点查看桌面站点而不是移动站点。我该怎么做呢？我希望它直接转到桌面站点。

```
WebView myWebView = (WebView) findViewById(R.id.webview); 
    myWebView.loadUrl("http://www.apotter96.webs.com/");
} 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-04T13:47:09.183

更改 webview 的用户代理

```
 String newUA="Foo/"; // Change this to desired UA 
```

像

```
 String newUA= "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.4) Gecko/20100101 Firefox/4.0";
 mWebView.getSettings().setUserAgentString(newUA); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-08-04T15:45:24.160

此方法可帮助您在 webview 上设置 DesktopMode

```
public void setDesktopMode(WebView webView,boolean enabled) {
    String newUserAgent = webView.getSettings().getUserAgentString();
    if (enabled) {
        try {
            String ua = webView.getSettings().getUserAgentString();
            String androidOSString = webView.getSettings().getUserAgentString().substring(ua.indexOf("("), ua.indexOf(")") + 1);
            newUserAgent = webView.getSettings().getUserAgentString().replace(androidOSString, "(X11; Linux x86_64)");
        } catch (Exception e) {
            e.printStackTrace();
        }
    } else {
        newUserAgent = null;
    }

    webView.getSettings().setUserAgentString(newUserAgent);
    webView.getSettings().setUseWideViewPort(enabled);
    webView.getSettings().setLoadWithOverviewMode(enabled);
    webView.reload();
} 
```

就这样称呼

移动模式：`setDesktopMode(webView, false);`

桌面模式：`setDesktopMode(webView, true);`

**对于科特林：**

```
fun setDesktopMode(webView: WebView, enabled: Boolean) {
    var newUserAgent: String? = webView.settings.userAgentString
    if (enabled) {
        try {
            val ua: String = webView.settings.userAgentString
            val androidOSString: String = webView.settings.userAgentString.substring(
                ua.indexOf("("),
                ua.indexOf(")") + 1
            )
            newUserAgent = webView.settings.userAgentString.replace(androidOSString, "(X11; Linux x86_64)")
        } catch (e: Exception) {
            e.printStackTrace()
        }
    } else {
        newUserAgent = null
    }
    webView.settings.apply {
        userAgentString = newUserAgent
        useWideViewPort = enabled
        loadWithOverviewMode = enabled
    }
    webView.reload()
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-09-16T05:34:33.393

您可以使用 WebView 将视图显示为适合移动显示的桌面站点。

```
 webView = (WebView)findViewById(R.id.webView1);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.getSettings().setLoadWithOverviewMode(true);
        webView.getSettings().setUseWideViewPort(true);

        webView.getSettings().setSupportZoom(true);
        webView.getSettings().setBuiltInZoomControls(true);
        webView.getSettings().setDisplayZoomControls(false);

        webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        webView.setScrollbarFadingEnabled(false); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-03-10T15:58:03.343

唯一对我有用的解决方案（javascript将被执行多次，但这是目前唯一可行的解​​决方案）

```
 @Override
        public void onLoadResource(WebView view, String url) {
           view.evaluateJavascript("document.querySelector('meta[name=\"viewport\"]').setAttribute('content', 'width=1024px, initial-scale=' + (document.documentElement.clientWidth / 1024));", null);
        } 
```

您也可以设置桌面 UA 字符串

```
webView.getSettings().setUserAgentString("Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-31T09:05:20.097

一些网站不使用用户代理来确定是否必须显示页面的移动版或桌面版。某些页面使用屏幕大小来执行此操作。

我构建了一个应用程序以在桌面模式下使用页面，但它无法正常工作。始终显示移动版本，因为页面使用屏幕大小而不是用户代理字符串。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-16T10:03:57.620

对已接受答案的一点更新。这是新字符串。写这个是因为有人在评论中遇到了“更新浏览器”的问题。

```
String newUA= "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:40.0) Gecko/20100101 Firefox/40.1";
mWebView.getSettings().setUserAgentString(newUA); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-15T14:44:34.090

如果您有更新浏览器错误，您可以尝试设置 Apple Safari UA 或将 UA 替换为`Mozilla/5.0 (Windows NT 10.0; WOW64; rv:47.0) Gecko/20100101 Firefox/47.0` This works 100% for me。

```
webview =(WebView)findViewById(R.id.webView);
        webview.getSettings().setMinimumFontSize(12);
        webview.getSettings().setJavaScriptEnabled(true);
        webview.getSettings().setLoadWithOverviewMode(true);
        webview.getSettings().setUseWideViewPort(true);
        webview.getSettings().setSupportZoom(true);
        webview.getSettings().setBuiltInZoomControls(true);
        webview.getSettings().setDisplayZoomControls(false);
        webview.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        webview.setScrollbarFadingEnabled(false);
        String newUA= "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12) AppleWebKit/602.1.50 (KHTML, like Gecko) Version/10.0 Safari/602.1.50";
        webview.getSettings().setUserAgentString(newUA);
        webview.loadUrl("https://solveforum.com"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-04T13:45:36.760

您需要更改用户代理： http: [//developer.android.com/reference/android/webkit/WebSettings.html#setUserAgentString(java.lang.String)](http://developer.android.com/reference/android/webkit/WebSettings.html#setUserAgentString(java.lang.String))

这是一个示例：
[在 WebView 中加载 html 数据](https://stackoverflow.com/questions/7397838/loading-html-data-in-webview)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-06-06T14:57:28.830

经过长时间的搜索，这对我有用 -

```
 webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setLoadWithOverviewMode(true);
    webView.getSettings().setUseWideViewPort(true);

    webView.getSettings().setSupportZoom(true);
    webView.getSettings().setBuiltInZoomControls(true);
    webView.getSettings().setDisplayZoomControls(false);

    webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
    webView.setScrollbarFadingEnabled(false); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-13T05:24:21.207

试试这个

```
String ua = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36"; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-15T13:29:36.343

**这对我有用**

```
 webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setLoadsImagesAutomatically(true);
    webView.getSettings().setLoadWithOverviewMode(true);
    webView.getSettings().setUseWideViewPort(true);
    webView.getSettings().setDomStorageEnabled(true);
    webView.getSettings().setBuiltInZoomControls(true);

    webView.loadUrl("https://web.whatsapp.com/");

    String userAgent = webView.getSettings().getUserAgentString();

    try {
        String androidString = webView.getSettings().getUserAgentString().
                substring(userAgent.indexOf("("),userAgent.indexOf(")")+ 1);

        userAgent = webView.getSettings().getUserAgentString().replace(androidString,"X11; Linux x86_64");

    }catch (Exception e){
        e.printStackTrace();
    }

    webView.getSettings().setUserAgentString(userAgent);
    webView.reload(); 
```

# macos - 多个存储库的 SVN 存储库访问控制

> ID：14688031
> 
> 赞同：0
> 
> 时间：2013-02-04T13:43:10.340
> 
> 标签：macos, apache, svn

似乎无法限制对我的多个存储库的访问。它似乎是一个全有或全无的配置。我有一个位置有 8 个或更多不同的存储库。示例：[http://mydomain.com/svn/repos/repo1](http://mydomain.com/svn/repos/repo1)和 /repo2 等...

似乎所有人都可以阅读每个回购？不知道为什么？

我的大部分设置来自 Mountain Lion 上的这个配置示例： [https ://discussions.apple.com/thread/3874020](https://discussions.apple.com/thread/3874020)

所有回购都在同一个目录下。Mac 上的 Apache 服务器，https.conf 设置了正确的模块，我使用单独的服务器 name.conf 文件进行主 SVN 访问控制：

server.conf 文件如下所示：

```
<Directory "/Users/iMac/Sites/">
    Options Indexes MultiViews
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>

LoadModule dav_svn_module     libexec/apache2/mod_dav_svn.so
LoadModule authz_svn_module   libexec/apache2/mod_authz_svn.so

<Location /repos>
    DAV svn
    SVNParentPath /usr/local/svn/repos
    AuthType Basic
    AuthName "Restricted Files"
    AuthUserFile /etc/apache2/passwd/passwords
    SVNPathAuthz on
    AuthzSVNAccessFile /etc/apache2/passwd/htauthz
    Satisfy Any
    Require valid-user
</Location>

<Location /websvn>
    AuthType Basic
    AuthName "Restricted Files"
    AuthUserFile /etc/apache2/passwd/passwords
    Require valid-user
</Location> 
```

我的访问文件如下所示：

```
[groups]
all = tom, dick, harry\

[/]
# * = r

[helloworld:/]
@all = r
tom = rw

[repo1:/]
tom = rw
harry = r
dick = r

[repo2]
dick = rw

[repo3]
harry  = rw

[xcode]
tom = rw 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:20:37.140

1.  消除`Satisfy Any`
2.  在 htauthz 中使用

    `[/]`

    `* =`

# unit-testing - 使用 AsyncHttpTastCase 测试异步方法时龙卷风被阻止

> ID：14688042
> 
> 赞同：3
> 
> 时间：2013-02-04T13:43:39.727
> 
> 标签：unit-testing, asynchronous, tornado

我是 python 和 tornado 的新手，并尝试使用 @tornado.web.asynchronous 为 GET 方法编写单元测试。但它总是阻塞并输出以下错误消息：

```
Failure
Traceback (most recent call last):
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/case.py", line 327, in run
    testMethod()
File "/Developer/PycharmProjects/CanMusic/tornadotestcase.py", line 19, in test_gen
    response = self.fetch(r'/gen')
File "/Developer/python/canmusic_env/lib/python2.7/site-packages/tornado/testing.py", line 265, in fetch
    return self.wait()
File "/Developer/python/canmusic_env/lib/python2.7/site-packages/tornado/testing.py", line 205, in wait
    self.__rethrow()
File "/Developer/python/canmusic_env/lib/python2.7/site-packages/tornado/testing.py", line 149, in __rethrow
    raise_exc_info(failure)
File "/Developer/python/canmusic_env/lib/python2.7/site-packages/tornado/testing.py", line 186, in timeout_func
    timeout)
AssertionError: Async operation timed out after 5 seconds 
```

我编写以下代码作为示例。将其作为单元测试（鼻子）运行，出现上述错误。在将其作为独立应用程序运行并通过浏览器访问 url 时，它工作正常。我还尝试了异步回调版本（没有@tornado.gen.engine 和yield），结果相同。

为什么？我错过了什么？

```
import tornado.web, tornado.gen, tornado.httpclient, tornado.testing

class GenHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    @tornado.gen.engine
    def get(self):
        http = tornado.httpclient.AsyncHTTPClient()
        response = yield tornado.gen.Task(http.fetch, 'http://www.google.com')
        self.finish()

# code for run nose test
class GenTestCase(tornado.testing.AsyncHTTPTestCase):
    def get_app(self):
        return tornado.web.Application([(r'/gen', GenHandler)])
    def test_gen(self):
        response = self.fetch(r'/gen')
        assert response.code == 200

# code for run standalone
application = tornado.web.Application([(r'/gen', GenHandler),])
if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T18:49:22.617

发生的事情是您的 RequestHandler 中的 AsyncHTTPClient 正在另一个 IOLoop 上运行，该 IOLoop 永远不会启动。

您可以通过`get_new_ioloop`在测试用例中覆盖来解决此问题：

```
def get_new_ioloop(self):
    return tornado.ioloop.IOLoop.instance() 
```

这有点奇怪，但它发生是因为每个 AsyncTestCase/AsyncHTTPTestCase 方法都会生成它自己的 IOLoop，以实现更大的隔离。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-29T03:21:12.663

就我而言，默认超时是不够的，因为我正在对远程服务进行集成测试。

我在我的设置方法中覆盖了默认超时。

```
def setUp(self):
    super(AsyncHTTPTestCase, self).setUp()
    ## allow more time before timeout since we are doing remote access..
    os.environ["ASYNC_TEST_TIMEOUT"] = str(60) 
```

# memory-management - 何时在 mono touch / mvvmcross 中释放对象

> ID：14688044
> 
> 赞同：2
> 
> 时间：2013-02-04T13:43:46.483
> 
> 标签：memory-management, xamarin.ios, mvvmcross

我们正在实现一个似乎存在重大内存泄漏的应用程序。例如，我们有一个视图及其对应的视图模型，该视图模型在单分析器中注册了 38 次，但它应该被垃圾回收。我们有很多自定义控件等，但是应该在哪里处理这些 - 从 ios 6 开始不再调用 viewdidunload 那么我们应该在哪里进行清理？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T14:10:14.797

这是一个很大的问题……对于一般情况，不容易回答。

一般来说，如果您编写了简单的 ViewModel 和简单的 View，那么您将不会遇到任何内存泄漏。

但是，如果您有引用 ViewModel 的 View，而后者又具有以某种方式引用 View 的回调，那么很可能会发生内存泄漏——尤其是当您的 View Model 订阅服务上的事件时。

* * *

一种特别糟糕的情况是 ObjC 和 C# 都引用了对象。在[http://forums.xamarin.com/discussion/97/correct-way-to-pop-a-dialogviewcontroller-mine-are-staying-in-memory](http://forums.xamarin.com/discussion/97/correct-way-to-pop-a-dialogviewcontroller-mine-are-staying-in-memory)上对此进行了一些讨论，其中也提到了我们曾经遇到的问题SQL 位示例 - [https://github.com/slodge/MvvmCross/issues/19](https://github.com/slodge/MvvmCross/issues/19)

您当前的泄漏可能不是这种情况，但值得阅读 Rolf 的回答 - [http://forums.xamarin.com/discussion/comment/535/#Comment_535](http://forums.xamarin.com/discussion/comment/535/#Comment_535) - 几次 - 这不是入门级解释，但它最终是有道理的！

* * *

因此，为了解决您当前的问题...

1.  找出泄漏的内容

2.  找出原因 - 是什么保留了参考资料。

3.  修理它。

关键是在对 3 进行错误修复之前投入大量精力来研究 1 和 2。在不真正知道“它”是什么的情况下尝试“修复它”是没有意义的。

好消息是，Mono 分析器 - 具有用于识别哪些内容引用了哪些内容的内置工具 - 非常有助于完成这项工作。

根据您的描述，我知道您已经找到了这个工具 - 但对于其他阅读者，请参阅 - [http://docs.xamarin.com/ios/Guides/Deployment%252c_Testing%252c_and_Metrics/Monotouch_Profiler](http://docs.xamarin.com/ios/Guides/Deployment%252c_Testing%252c_and_Metrics/Monotouch_Profiler)

* * *

一旦您确定了泄漏的原因和原因，那么第 3 步将需要一些思考，但希望很容易回答。

有时解决方案是：

*   只需修复一行错误的代码......哪一行是难点。
*   使用“返回”检测来确定何时断开绑定或事件。
*   使用 'willappear'、'willdisappear' 添加生命周期事件以更改您订阅/取消订阅事件的方式
*   使用 C# 事件以外的替代方法 - 例如使用 TinyMessenger（或 MvvmCross 插件信使）之类的 Messenger - 这些具有通常使用`WeakReference`类来避免泄漏的优点。
*   在“适当的时间”处理“某事”——再次解决“某事”和“适当的时间”是其中的难点

无论发生什么，不要惊慌，从工程的角度来解决这个问题。这些泄漏也发生在非 MvvmCross 和非 MonoTouch 代码中 - 使用 MvvmCross 和干净的 IoC 架构应该更容易找到和删除它们。

* * *

如果问题确实出在某处的 MvvmCross 绑定中，请务必将其记录为错误 - 我非常重视这些问题！

MvvmCross repo 上关于我们是否不应该对所有绑定代码使用 Wea​​kReferences 的长时间讨论中仍然存在一个未解决的错误 - 请参阅[https://github.com/slodge/MvvmCross/issues/17](https://github.com/slodge/MvvmCross/issues/17) - 我已经考虑过这 - 它会帮助人们避免一些错误......但不是全部。这个问题仍然悬而未决。

* * *

**更新**：我没有回答

> 我们有很多自定义控件等，但是应该在哪里处理这些

框架应该为你处理这些。

如果没有，那可能是因为其他东西正在泄漏并保留在您的 View 上，而后者又保留在您的 Controls 上。您需要修复该潜在问题，而不是过早地调用控件上的 Dispose()。内存泄漏调试并不容易，但很有趣（有时）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:42:11.810

一个好的规则是添加到基于 NSObject 的类的容器应该只引用使用 Wea​​kReference 对象的容器。

像这样：

```
 // MyView is a UIView, which is an NSObject, so the rule will apply here
 class MyView : UIView {
       WeakReference<UIViewController> myController;

       public MyView (RectangleF bounds, UIViewController myContainer) 
           : base (bounds) {
           this.myController = myContainer;
       }
 } 
```

# android - 在自定义布局中显示 PDF？

> ID：14688050
> 
> 赞同：0
> 
> 时间：2013-02-04T13:44:00.570
> 
> 标签：android, pdf, itext

我想设计一个 android 应用程序，它由 Activity 组成，我在其中使用 iText 创建 PDF 文件。单击同一活动中的按钮后，我想显示具有不同按钮的 PDF 文件的内容。此外，我不想使用 `Intent intent = new Intent(Intent.ACTION_VIEW);`将显示可用 PDF 支持应用程序列表的列表。

那么您能否提出一些解决方案，我可以如何实现这一目标。

提前致谢。

# c# - 更改参数类型

> ID：14688053
> 
> 赞同：0
> 
> 时间：2013-02-04T13:44:03.833
> 
> 标签：c#, .net, expression

我有一个`Expression`实例（不是通用的）。它实际上是类型，我需要通过更改传入参数的类型`Expression<Func<TModel, bool>>`来创建一个新的类型。`Expression<Func<TEntity, bool>>`什么是最简单和完整的解决方案？

**错过的信息：**

`Model`'s 和`Entity`' 参与表达式的属性是相等的。

# jquery - jQuery(document).bind 在 Opera 中不起作用

> ID：14688054
> 
> 赞同：0
> 
> 时间：2013-02-04T13:44:04.250
> 
> 标签：jquery, callback, bind, opera

我在 Opera 中遇到了绑定功能的问题。

**案子：**

jQuery：v1.8
Opera：v12.13 构建：1734
操作系统：Windows 7 64bit

我正在绑定文档以监视 DOM 子树中的更改。

```
jQuery(document).bind('DOMSubtreeModified', function() {
    console.log("DOMSubtreeModified");
}); 
```

在 Chrome/FireFox/IE8+ 上运行良好。但在 Opera 中，回调永远不会被触发。我一直在看论坛，但没有看到任何报告的问题。关于为什么会发生这种情况的任何见解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:50:40.010

Opera 不支持：

[http://my.opera.com/community/forums/topic.dml?id=154019](http://my.opera.com/community/forums/topic.dml?id=154019)和 [http://help.dottoro.com/ljrmcldi.php](http://help.dottoro.com/ljrmcldi.php)

[在这里](https://stackoverflow.com/questions/3219758/detect-changes-in-the-dom)，您可以找到一些有关如何检查 DOM 是否在没有该事件的情况下被修改的信息。

# jsf - PrimeFaces fileUpload 两次添加文件

> ID：14688057
> 
> 赞同：1
> 
> 时间：2013-02-04T13:44:12.873
> 
> 标签：jsf, file-upload, primefaces

在我的项目中使用 FileUpload 时，如下所示：

看法

```
<h2>#{bundle['upload']}</h2>
<p:scrollPanel id="upload" styleClass="ui-widget-filebucket-upload">
    <h:form enctype="multipart/form-data">
        <p:fileUpload fileUploadListener="#{fileBucket.handleFileUpload}"
            mode="advanced" update=":download:files :messages"
            multiple="false" label="#{bundle['choose_button']}"
            uploadLabel="#{bundle['upload_button']}"
            cancelLabel="#{bundle['cancel_button']}" />
    </h:form>
</p:scrollPanel>
<p:resizable for="upload" /> 
```

视图模型

```
@ViewScoped
@Named("fileBucket")
public class DefaultFileBucketViewModel implements IFileBucketViewModel, Observer, Serializable {
    // ...
    public void handleFileUpload(FileUploadEvent event) {
        try {
            model.write(id, event.getFile().getFileName(), event.getFile().getInputstream());
        } catch (final Exception e) {
            log.error(e);
            messages.error(new BundleKey(Literals.BUNDLE_NAME, Literals.FILE_UPLOAD_ERROR));
        }
    }
} 
```

上传按预期工作。文件被存储，所有注册的组件都被更新，就像它应该的那样。但是，无论我是使用拖放还是“选择”按钮添加文件，文件总是会添加两次到上传列表中。

![文件上传添加了两次。](../Images/eaaa565ee936a17a4f5c475967fa8e8c.png)

这里发生了什么，我该如何解决这个问题？

感谢您的任何建议和最好的问候

帕斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:19:42.470

我偶然发现了解决方案。似乎包装滚动面板导致了这种行为。以下代码可以正常工作：

```
<h2>#{bundle['upload']}</h2>
<h:form enctype="multipart/form-data" id="upload"
    styleClass="ui-widget-filebucket-upload ui-widget-content ui-corner-bottom ui-corner-top">
    <p:fileUpload id="upload_control"
        fileUploadListener="#{fileBucket.handleFileUpload}" mode="advanced"
        update=":download:files :messages" multiple="false"
        label="#{bundle['choose_button']}"
        uploadLabel="#{bundle['upload_button']}"
        cancelLabel="#{bundle['cancel_button']}" />
</h:form>
<p:resizable for="upload" /> 
```

必须是 PrimeFaces 3.4 中的错误。

# sencha-touch-2 - ST2 ListItem setHtml 获取不到子节点的值

> ID：14688060
> 
> 赞同：0
> 
> 时间：2013-02-04T13:44:27.713
> 
> 标签：sencha-touch-2, dataview, listitem

我有两个模型“状态”属于：“用户”，我正在学习名为 touchtweets 的 sencha touch 2 示例。这是我的 json 文件

```
{
"statuses" : [{
    "text" : "test",
    "user" : {
        "name" : foo,
              }
             }]
} 
```

官方文档说'当记录更新时，获取文本配置，并`setText`使用记录的'文本'字段调用。但我尝试 setHtml:'user.name' 它没有工作我不明白. 这是我的视图代码，

```
Ext.define('Demo.view.StatusesListItem', {
extend : 'Ext.dataview.component.ListItem',
xtype : 'statuseslistitem',
requires : ['Demo.view.StatusesListItemText', 'Ext.Img'],

config : {
    dataMap : {
        getText : {
            setHtml : 'text',        //work well
        },
        getUserName : {
            setHtml : 'user.name',   //didn't work
        }
    },
    userName : {
        cls : 'username'
    },
    text : {
        cls : 'text'
    },
    layout : {
        type : 'vbox'
    }
},
applyUserName : function(config) {
    console.log(Ext.factory(config, Ext.Component, this.getUserName()))
    return Ext.factory(config, Ext.Component, this.getUserName());
},
applyText : function(config) {
    return Ext.factory(config, Sin.view.StatusesListItemText, this.getText());
},
updateTpl : Ext.emptyFn,

});  

Ext.define('Demo.view.StatusesListItemText', {
extend : 'Ext.Component',

applyHtml : function(html) {
    html = html.replace(/(http:\/\/[^\s]*)/g, "<a class=\"link\"       target=\"_blank\" href=\"$1\">$1</a>");
    return html;
}
}); 
```

setHtml 获取不到子节点use的值

任何人都可以帮助我吗？谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:53:29.380

不幸的是，这是不可能的。

绕过它的一个技巧是设置 to 的值，`getUserName`然后`user`更改您的`applyUserName`方法以访问该`name`属性。

```
applyUserName : function(config) {
    var name = config.name;

    return Ext.factory(name, Ext.Component, this.getUserName());
} 
```

# linux - diff 的奇怪行为 | grep | sed

> ID：14688061
> 
> 赞同：0
> 
> 时间：2013-02-04T13:44:28.123
> 
> 标签：linux, bash, unix, sed, grep

我的目标是提取那些`File1`不存在于`File2`

比方说`File1`：

```
String A
String B
String C 
```

比方说`File2`：

```
String B
String C 
```

行已排序，我的输出应为：

```
String A 
```

所以我为它写了这个命令：

```
diff File1 File2 | grep '^<' | sed 's/< //g' 
```

这适用于我的 10 - 20 行的示例文件。

我也试过这个命令：

```
grep -Fxv -f File2 File1 
```

这也适用于我的示例文件。

**但问题是：**

它似乎不适用于我的实际数据集，这是两个文件，每个文件大约 100 万行。

怎么了？我忽略了什么？什么是要做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T13:50:29.080

这就是该工具`comm`的用途：

```
$ comm -23 file1 file2
String A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:48:44.360

试试这个：

```
awk 'NR==FNR{a[$0];next}!($0 in a)' file2 file1 
```

如果这适用于您的实际文件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:19:33.580

听起来您可能遇到了空格问题。

你有没有尝试过：

```
diff -uBb File1 File2 
```

从手册页：

```
 -b  --ignore-space-change
          Ignore changes in the amount of white space.

   -B  --ignore-blank-lines
          Ignore changes whose lines are all blank. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T15:27:01.463

你的两个文件都排序了吗？如果数据有问题，差异将无法工作...
检查：

```
diff -uBb <(sort File1) <(sort File2) 
```

注意：包含 Anew 的答案。

# android - Url android在imageView中的空异常

> ID：14688062
> 
> 赞同：1
> 
> 时间：2013-02-04T13:44:38.293
> 
> 标签：android, bitmap, imageview

我正在从 url 检索图像并将它们显示在`imageview`. 但我的代码给了我空消息。

```
ImageView imageview = (ImageView) findViewById(R.id.imageView1);
try {
    Uri uri=Uri.parse("http://10.0.2.2:8083/call/rahul.jpg");
    // uri.buildUpon().appendQueryParameter("key", "Android developer");
    URI u = new URI(uri.toString());
    System.out.println("path is "+u);
    HttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet();
    httpget.setURI(u);
    //httpget.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httpget);
    HttpEntity entity = response.getEntity();
    is = entity.getContent(); 

    Bitmap bitmap = BitmapFactory.decodeStream(is);
    imageview.setImageBitmap(bitmap); 
} catch(Exception e) {
    System.out.println("this is the error "+e.getMessage()); 
} 
```

日志猫：-

```
02-04 19:32:35.355: D/dalvikvm(679): threadid=1: still suspended after undo (sc=1 dc=1)
02-04 19:32:35.355: I/dalvikvm(679): Wrote stack traces to '/data/anr/traces.txt'
02-04 19:32:35.895: I/dalvikvm(679): threadid=3: reacting to signal 3
02-04 19:32:35.915: D/dalvikvm(679): threadid=1: still suspended after undo (sc=1 dc=1)
02-04 19:32:35.915: I/dalvikvm(679): Wrote stack traces to '/data/anr/traces.txt'
02-04 19:32:36.425: I/dalvikvm(679): threadid=3: reacting to signal 3
02-04 19:32:36.445: D/dalvikvm(679): threadid=1: still suspended after undo (sc=1 dc=1)
02-04 19:32:36.445: I/dalvikvm(679): Wrote stack traces to '/data/anr/traces.txt'
02-04 19:32:36.992: I/dalvikvm(679): threadid=3: reacting to signal 3
02-04 19:32:37.005: D/dalvikvm(679): threadid=1: still suspended after undo (sc=1 dc=1)
02-04 19:32:37.005: I/dalvikvm(679): Wrote stack traces to '/data/anr/traces.txt'
02-04 19:32:37.565: I/dalvikvm(679): threadid=3: reacting to signal 3
02-04 19:32:37.585: D/dalvikvm(679): threadid=1: still suspended after undo (sc=1 dc=1)
02-04 19:32:37.585: I/dalvikvm(679): Wrote stack traces to '/data/anr/traces.txt'
02-04 19:32:38.105: I/dalvikvm(679): threadid=3: reacting to signal 3
02-04 19:32:38.125: D/dalvikvm(679): threadid=1: still suspended after undo (sc=1 dc=1)
02-04 19:32:38.125: I/dalvikvm(679): Wrote stack traces to '/data/anr/traces.txt'
02-04 19:32:38.645: I/dalvikvm(679): threadid=3: reacting to signal 3
02-04 19:32:38.665: D/dalvikvm(679): threadid=1: still suspended after undo (sc=1 dc=1)
02-04 19:32:38.665: I/dalvikvm(679): Wrote stack traces to '/data/anr/traces.txt'
02-04 19:32:39.175: I/dalvikvm(679): threadid=3: reacting to signal 3
02-04 19:32:39.195: D/dalvikvm(679): threadid=1: still suspended after undo (sc=1 dc=1)
02-04 19:32:39.205: I/dalvikvm(679): Wrote stack traces to '/data/anr/traces.txt'
02-04 19:32:39.695: I/dalvikvm(679): threadid=3: reacting to signal 3
02-04 19:32:39.716: D/dalvikvm(679): threadid=1: still suspended after undo (sc=1 dc=1)
02-04 19:32:39.716: I/dalvikvm(679): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:14:33.437

尝试这个：

```
ImageView imageview = (ImageView) findViewById(R.id.imageView1);
mBitmap = BitmapFactory.decodeStream((InputStream) new URL(http://10.0.2.2:8083/call/rahul.jpg).getContent());
imageview .setImageBitmap(mBitmap); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:59:34.120

好吧，既然您说我的建议对您很有效，我想我应该将其作为答案提交。[我观察到您似乎距离一个可行的解决方案还有很长的路要走，而且由于在您可能希望使用诸如android-query](http://code.google.com/p/android-query/)之类的库之前，这个问题已经解决了很多次。我与那个图书馆没有任何关系——我以前自己也用过。另外，由于我没有从技术上回答你的问题，虽然我解决了你的问题，但我最好为绿色勾号多做一点，嗯？

您对库的使用看起来不错，并且[您不需要调用回收](https://groups.google.com/forum/?fromgroups=#!topic/android-query/OmlgVHXJglI)（顺便说一句，您可以在 Google 上轻松找到）。请注意，您也可以用它做很多其他的好事情，例如在加载图像时淡入淡出，如果它们非常大，则在加载时对其进行下采样等等。[您可以在 android-query 网站上](http://code.google.com/p/android-query/wiki/ImageLoading)找到很多示例。

至于您对它是否免费的询问，许可证是在我链接到的主页上声明的，在靠近顶部的左侧。它是[Apache 许可证 2.0](http://www.apache.org/licenses/LICENSE-2.0)。简而言之，此许可证允许您自由使用该库，只要您在您的应用程序的任何发行版中包含 Apache 许可证的副本并明确提及您在该许可证下使用的任何库。或者您可以[阅读他们的常见问题解答](http://www.apache.org/foundation/license-faq.html#WhatDoesItMEAN)中的简介。您通常会在您的应用程序中为此类事情放置一个 about 屏幕，这清楚地表明您正在使用 Apache 2.0 许可证下的 android-query 库，并带有可查看的许可证副本。正确的归属：我想你会同意，在这个许可下你可以找到这么多有用的东西，这是一个很小的代价：o）

祝你的应用好运！

# nhibernate - NHibernate 不保存对象更新

> ID：14688066
> 
> 赞同：0
> 
> 时间：2013-02-04T13:44:48.867
> 
> 标签：nhibernate, generics, sql-update

我遇到了问题，只是在某些课程中，大部分时间都在工作，而我不知道为什么其他人没有。A 可以创建新对象并毫无问题地保存，但在这种特殊情况下，我无法保存更改

我有一个父抽象类：

```
[DataContract]
public abstract class BaseClass<T> where T : Object
{
    public BaseClass(){}

    [DataMember]
    public virtual int Id{ get; set; }

    [DataMember]
    public virtual string Code { get; set; }
} 
```

而我的班级，有问题：

```
public class NewClass: BaseClass<OtherClass>
{
    public NewClass(){}
} 
```

如果我创建一个 NewClass 对象并保存它可以正常工作：

```
var newClass = new NewClass{Code="1"};
Session.SaveOrUpdate(newClass); 
```

现在，如果我更改 Code 属性值并保存，则不会在数据库中执行更新。

```
var newClass = Session.Load<NewClass>(id);
newClass.Code = '01';
Session.SaveOrUpdate(newClass); 
```

编辑：如果我进行交易并提交更改，它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:38:47.750

这是正常行为。NH 在必要时刷新更新。`SaveOrUpdate`在最后一个片段中完全没有必要。只需将新的或分离的对象放入会话中。对象进入会话后，NH 决定何时将其存储到数据库中。这对您的代码应该是透明的。

NH冲洗：

*   提交时
*   打电话时`session.Flush()`
*   查询前（对实际数据执行查询）

# php - php mysql 选择 WHERE

> ID：14688075
> 
> 赞同：0
> 
> 时间：2013-02-04T13:45:26.790
> 
> 标签：php, mysql, sql, select, video

**您好** 我想通过以下方式从数据库中获取

```
SELECT title FROM video WHERE REPLACE(title, '-', title) < title='video 03' ; 
```

所以我想替换'-'或任何其他符号然后如果它们更小则选择结果 exp ：'video 03'

现在，例如，我有

'视频-01，视频_02 ...'

注意：随机存储，名称不稳定，有时10个字符有时15个字符...所以不可能使用SUBSTRING

现在我遇到了麻烦，一些标题包含阿拉伯字符，我怎样才能替换所有字符并只保留数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:59:36.113

或者你可以做很多请求：

```
//string that needs to be customized
$title = "video 03";
$title = str_replace("-", " ", $title);

$title_array=explode(' ', $title);
$number=$title_array[1];

echo $number;
echo $title; 
```

通过检索视频编号下的所有视频来执行您的 SQL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:55:38.447

如果我正确理解您的问题，您可以这样使用 REPLACE 功能：

```
SELECT title
FROM video
WHERE REPLACE(REPLACE(title, '-', ' '), '_', ' ') < 'video 03'; 
```

这将返回“video 01”、“video-02”、“video_02”等。

**编辑：**您也可以使用它，将标题的字母数字部分与数字部分分开：

```
select
  title,
  first_digit,
  left(title, first_digit-1) as alphanumeric_part,
  mid(title, first_digit, length(title)-first_digit+1) as digits
from (
  select
    least(case when locate('0', title)>0 then locate('0', title) else length(title)+1 end,
          case when locate('1', title)>0 then locate('1', title) else length(title)+1 end,
          case when locate('2', title)>0 then locate('2', title) else length(title)+1 end,
          case when locate('3', title)>0 then locate('3', title) else length(title)+1 end,
          case when locate('4', title)>0 then locate('4', title) else length(title)+1 end,
          case when locate('5', title)>0 then locate('5', title) else length(title)+1 end,
          case when locate('6', title)>0 then locate('6', title) else length(title)+1 end,
          case when locate('7', title)>0 then locate('7', title) else length(title)+1 end,
          case when locate('8', title)>0 then locate('8', title) else length(title)+1 end,
          case when locate('9', title)>0 then locate('9', title) else length(title)+1 end) first_digit,
    title
  from
    video
) video_pos
where mid(title, first_digit, length(title)-first_digit+1)+0 < 2 
```

[在这里](http://sqlfiddle.com/#!2/477a3/1)看到它。

# hibernate-validator - 为什么方法验证不适用于自定义 Hibernate Validator 注解？

> ID：14688079
> 
> 赞同：0
> 
> 时间：2013-02-04T13:45:45.407
> 
> 标签：hibernate-validator

我正在试验 Hibernate Validator 的方法验证。

我已经编写了我能想象到的最简单的 EJB 并注释了它的约束。

但是，它不适用于我的自定义注释。

```
public String checkString(@NotNull @NotBlank @Characters(invalidCharacters = { '1' }) String string); 
```

最后一个注释检查字符串是否包含字符集的某些字符（具有默认值）并且是自定义约束。这适用于正常的验证器环境。

但是在我的测试中，只有标准注释起作用，我的自定义注释不起作用。

```
 this.parameterValidation.checkString(null); // Throws Exception

  this.parameterValidation.checkString(""); // Throws Exception

  this.parameterValidation.checkString("123"); // Does NOT throw Exception - why? 
```

我还测试了另一个自定义注释，它也仍然处于非活动状态。

我究竟做错了什么？

* * *

下面是自定义注解的代码：

```
/**
 * Checks if a String contains only characters from the given character set. Note that this sets a parameter
 * {@code positions} with a comma-separated list of the positions of invalid characters (based on 1, not 0!).
 */
@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target({ ElementType.FIELD, ElementType.PARAMETER, ElementType.METHOD, ElementType.ANNOTATION_TYPE })
@Constraint(validatedBy = CharactersCheck.class)
public @interface Characters {
  /**
   * The I18N key of the error message.
   */
  public static final String I18N_KEY = "ipi.msg.validation.characters";

  /**
   * Error message.
   */
  String message() default LEFT_CURLY_BRACKET + I18N_KEY + RIGHT_CURLY_BRACKET;

  /**
   * The associated violation groups.
   */
  Class<?>[] groups() default {};

  /**
   * The payload.
   */
  Class<? extends Payload>[] payload() default {};

  /**
   * The character set to which the text must conform.
   */
  CharacterSet characterSet() default CharacterSet.ISO_8859_15;

  /**
   * Additional characters which must not be found in the text.
   */
  char[] invalidCharacters() default {};

  /**
   * If this is {@code true}, carriage returns and line feeds are allowed in the text, making it a multi-line text.
   */
  boolean carriageReturnAllowed() default false;

  /**
   * Defines several {@link Characters} annotations on the same element.
   */
  @Documented
  @Retention(RetentionPolicy.RUNTIME)
  @Target({ ElementType.FIELD, ElementType.PARAMETER, ElementType.METHOD, ElementType.ANNOTATION_TYPE })
  @interface List {

    /**
     * The {@link Characters} annotations.
     */
    Characters[] value();
  }
} 
```

这是实现：

```
public class CharactersCheck implements ConstraintValidator<Characters, CharSequence>, MessageAttributeModifier {

  /**
   * The character set to check.
   */
  private CharacterSet characterSet;

  /**
   * Additional invalid characters.
   */
  private char[] invalidCharacters;

  /**
   * If this is {@code true}, carriage returns and line feeds are allowed in the text, making it a multi-line text.
   */
  private boolean carriageReturnAllowed;

  private SortedSet<Integer> invalidCharacterPositions;

  /**
   * {@inheritDoc}
   */
  @Override
  public void initialize(final Characters constraintAnnotation) {
    this.characterSet = constraintAnnotation.characterSet();
    this.carriageReturnAllowed = constraintAnnotation.carriageReturnAllowed();
    if (this.carriageReturnAllowed) {
      this.invalidCharacters = constraintAnnotation.invalidCharacters();
    } else {
      final int invalidCharactersLength = constraintAnnotation.invalidCharacters().length;
      this.invalidCharacters = Arrays.copyOf(constraintAnnotation.invalidCharacters(), invalidCharactersLength + 2);
      this.invalidCharacters[invalidCharactersLength] = '\r';
      this.invalidCharacters[invalidCharactersLength + 1] = '\n';
    }
    this.invalidCharacterPositions = new TreeSet<>();
  }

  /**
   * {@inheritDoc}
   */
  @Override
  public boolean isValid(final CharSequence value, final ConstraintValidatorContext context) {
    if (value == null) {
      return true;
    } else {
      setInvalidCharacterPositions(value);
      return this.invalidCharacterPositions.isEmpty();
    }
  }

  private void setInvalidCharacterPositions(final CharSequence value) {
    this.invalidCharacterPositions = CharacterChecker.checkCharacters(String.valueOf(value), this.characterSet,
        this.invalidCharacters);
  }

  /**
   * {@inheritDoc}
   */
  @Override
  public void modifyAttributes(final Map<String, Object> attributes, final Context context) {
    setInvalidCharacterPositions((CharSequence) context.getValidatedValue());
    if (!this.invalidCharacterPositions.isEmpty()) {
      attributes.put(MessageVariables.POSITIONS, StringUtils.join(this.invalidCharacterPositions, ", "));
    }
  }
} 
```

请注意，我创建了一个自定义消息插值器，它允许检查将消息变量添加到给定的 Map。为此，我在消息插值器中创建了一个新的检查实例，并使用此接口调用它：

```
/**
 * Modifies attributes within a validation message.
 */
public interface MessageAttributeModifier {

  /**
   * Modifies the attributes within the validation message.
   * @param attributes The existing attributes, which can be modified; the attributes already contain the values from
   * the annotation and additionally also {@link MessageVariables#VALIDATED_VALUE}
   * @param context The validation context
   */
  public void modifyAttributes(Map<String, Object> attributes, final Context context);
} 
```

# c# - 实体框架 5 部分类不起作用

> ID：14688082
> 
> 赞同：1
> 
> 时间：2013-02-04T13:45:58.327
> 
> 标签：c#, .net, entity-framework, entity-framework-5

我正在使用 EF 5，并且我已经从数据库生成了我的模型。然后我想创建一些部分类来扩展 EF 生成类的功能。在 EF 4 中，我过去可以简单地将我想用于这些类的命名空间放入 edmx 文件的“自定义工具命名空间”属性中。但是在 EF 5 中，这似乎被忽略了。无论我在“自定义工具命名空间”中放入什么，它都会在默认命名空间中不断生成 EF 类！我显然可以更改部分类的名称空间，但我宁愿能够为它们使用我自己的名称空间。我到底如何在 EF5 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:02:01.103

在模式下的模型设计器 (.edmx) 的属性中有一个命名空间属性，您可以在此处设置命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:02:53.190

尝试打开 edmx 文件（在设计器中），右键单击设计器的表面并选择属性 - 您可以选择在那里设置命名空间，我相信这是 EF5 现在使用的。

# python - Python - fusiontables 表 id 的无效文字错误

> ID：14688088
> 
> 赞同：0
> 
> 时间：2013-02-04T13:46:18.320
> 
> 标签：python, python-2.7, google-fusion-tables

我有[这个](http://code.google.com/p/fusion-tables-client-python/source/browse/trunk/src/samples/clientlogin_example.py)将数据插入到 funsiontables 中的示例......

该代码基本上创建了一个新表并将其 id 存储到一个变量中以支持插入、更新或删除功能。该代码来自 2010/2011 年，我认为谷歌从那时起更改了 table_id 格式，因为我在以下行中收到以下错误：

```
return 'INSERT INTO %d (%s) VALUES (%s)' % \
  (int(table_id), ','.join(["'%s'" % col for col in cols]), stringValues) 
```

错误：

```
 (int(table_id), ','.join(["'%s'" % col for col in cols]), stringValues)
ValueError: invalid literal for int() with base 10: '1PHHo1h0tA0VxI09mAH0AH_IDNUpN5Hm-aTaAqO0' 
```

我可以简单地将其更改为一个简单的 SQL 语句，但我确信我需要在项目的后续步骤中处理 table_id 或 row_id。所以，我想保持它已经完成的方式，如果可能的话修复它。但是，我无法理解通过 table_id "1PHHo1h0tA0VxI09mAH0AH_IDNUpN5Hm-aTaAqO0" 转换为 int 的问题......

函数 int() 支持任何整数或字符串...

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:32:47.280

`table_id`似乎不是数字整数。

您可以尝试修改代码如下：

```
return 'INSERT INTO %s (%s) VALUES (%s)' % \
 (table_id, ','.join(["'%s'" % col for col in cols]), stringValues) 
```

换句话说，`table_id`作为一个简单的字符串使用。

# php - 如何从 PHP 将空关联数组 ({}) 写入 MongoDB

> ID：14688089
> 
> 赞同：4
> 
> 时间：2013-02-04T13:46:23.500
> 
> 标签：php, mongodb, associative-array

当我尝试从 PHP 向 MongoDB 插入空**关联**数组 ( `hashmap`/ `dictionary`/ `dict`/ `{}`) 时，它总是作为非关联空数组 ( `list`/ `[]`) 插入。我可以强制关联数组吗？

例子：

```
$m = new Mongo('mongodb://localhost:27017');
$db = $m->selectDB('test');
$collection = $db->selectCollection('test');

// 1: inserts []
$d = array( 'x' => array() );
$collection->insert($d);

// 2: inserts []
$d = array( 'y' => array('a'=>'123') );
unset($d['y']['a']);
$collection->insert($d);

// 3: inserts {}
$d = array( 'z' => array('a'=>'123') );
$collection->insert($d);
$collection->update(array('_id' => $d['_id']), array('$unset' => array('z.a'=>true))); 
```

结果：

```
> db.test.find().pretty()
{ "_id" : ObjectId("510fb9ede695c5381a000000"), "x" : [ ] }
{ "_id" : ObjectId("510fb9ede695c5381a000001"), "y" : [ ] }
{ "_id" : ObjectId("510fb9ede695c5381a000002"), "z" : { } } 
```

第三种方式做我想要的，但有点尴尬，需要两个查询。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T14:48:31.823

不管你存储的是空对象还是数组，有什么区别呢？在 BSON 中，[数组和对象的存储方式与 dict 相同](http://bsonspec.org/#/specification)。无论如何，对于你的问题。

对于 PHP MongoDB 驱动程序，一个空数组就是这样，一个空数组，所以它将它存储为一个数组。当您向数组添加键/值对时，驱动程序就是这样理解它应该存储一个对象的。

如果您真的想存储一个空对象，请尝试：

```
$d = new \stdClass();
$collection->insert(array('z' => $d)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-20T10:27:55.797

实际上有一个区别，如果为空，它将被视为非关联 [] 并且不允许设置关联键，从而引发异常：

```
MongoCursorException: can't append to array using string field name 
```

您应该像这样转换为对象：

```
$d = array( 'x' => (object) array() );
$collection->insert($d); 
```

[https://jira.mongodb.org/browse/PHP-172](https://jira.mongodb.org/browse/PHP-172)

# ios - iOS在播放视频时处理音频流

> ID：14688092
> 
> 赞同：4
> 
> 时间：2013-02-04T13:46:30.860
> 
> 标签：ios, audio, video, real-time, avfoundation

我正在尝试为 iOS 创建一个视频播放器，但有一些额外的音轨阅读。我一直在检查 MPVideoPlayerController，以及 AV Foundation 中的 AVPlayer，但都有些模糊。我想做的是播放视频（来自本地.mp4），在播放电影时**获取当前的音频缓冲区/帧**，所以我可以进行一些计算和其他（与视频/音频无关）操作在当前播放的音频上。这意味着视频应该继续播放，它的音轨，但我也想要实时的原始音频数据进行计算（比如：获取特定频率的幅度）。

有没有人有这样做的例子或提示？当然，我查看了 Apple 的 AV Foundation 库文档，但对我来说还不够清楚。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T11:49:41.083

经过非常（非常）长时间的谷歌搜索，我找到了一篇描述**MTAudioProcessingTap**的博客文章。在 iOS 6.0 中引入，它完美地解决了我的问题。

操作方法/博客文章可以在这里找到：[http ://chritto.wordpress.com/2013/01/07/processing-avplayers-audio-with-mtaudioprocessingtap/](http://chritto.wordpress.com/2013/01/07/processing-avplayers-audio-with-mtaudioprocessingtap/)

我希望它现在对其他人有所帮助.......对我来说，谷歌搜索（有很多不同的术语）唯一出现的是我自己的帖子。只要你不知道 MTAudioProcessingTap 的存在，你就不知道如何用谷歌搜索它:-)

# google-drive-api - 通知共享文件的其他用户

> ID：14688097
> 
> 赞同：0
> 
> 时间：2013-02-04T13:46:53.223
> 
> 标签：google-drive-api

如果一个文件被加星标，我尝试使用 appengine Python 找出 SDK。我使用服务帐户进行授权。但加星标的标签不共享。是否有解决方案来查看其他用户的加星标文件或通知其他用户的简单方法。我不使用 Google 文档文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:39:50.417

该`labels.starred`属性是您应该在文件资源中查找的内容，但这当然是针对每个用户的设置（因此对于与 3 个用户共享的文件，2 可能会将其加星标并且此属性会显示，但第 3 可能不会）。如果您使用服务帐户来模拟用户，您应该能够通过成为他们并查找属性来查看谁为文件加了星标。

[https://developers.google.com/drive/v2/reference/files#resource](https://developers.google.com/drive/v2/reference/files#resource)

# c# - 没有端点监听

> ID：14688101
> 
> 赞同：1
> 
> 时间：2013-02-04T13:47:10.040
> 
> 标签：c#, .net, wcf

当我尝试在 WCF 主机中调用该方法时，出现此错误：

> 在 net.pipe://localhost/PipeReverse 上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

我有一个启动 WCF 主机的类：

```
public class ProcessUnderMouseServer
{
    public ProcessUnderMouseServer()
    {
        using (host = new ServiceHost(
            typeof(PrcoessUnderMouse),
            new Uri[]
            {
                new Uri("net.pipe://localhost")
            }))
        {  
                host.AddServiceEndpoint(
                    typeof(IPrcoessUnderMouse),
                    new NetNamedPipeBinding(),
                    "PipeReverse");

                host.Open();
        }
    }
} 
```

此类与消费项目位于不同的库项目中

然后我尝试像这样消费它：

```
ProcessUnderMouseServer ProcessUnderMouseServer = new ProcessUnderMouseServer();

ChannelFactory<IPrcoessUnderMouse> pipeFactory =
        new ChannelFactory<IPrcoessUnderMouse>(
          new NetNamedPipeBinding(),
          new EndpointAddress(
            "net.pipe://localhost/PipeReverse"));

            IPrcoessUnderMouse pipeProxy = pipeFactory.CreateChannel();
            string str = Console.ReadLine();

            Console.WriteLine("pipe: " + pipeProxy.GetProcessUnderMouse()); 
```

不应该

```
host.AddServiceEndpoint(typeof(IPrcoessUnderMouse),new NetNamedPipeBinding(), "PipeReverse"); 
```

添加终点就足够了吗？为什么这么说`no endpoint listening at net.pipe://localhost/PipeReverse`？？

# reporting-services - SSRS 2008 R2 中的交替颜色和单元格特定颜色

> ID：14688105
> 
> 赞同：0
> 
> 时间：2013-02-04T13:47:16.203
> 
> 标签：reporting-services, ssrs-2008

是否可以在 Tablix SSRS 2008 R2 中同时使用交替颜色的行 + 用特定单元格上的另一个表达式覆盖颜色？

我能够单独为单元格和单独的行着色，但不能两者兼得。任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:59:02.837

`BackgroundColor`一个简单的例子，只是用一些嵌套`IIf`函数扩展属性中的逻辑。我使用了以下表达式：

```
=IIf(Fields!val.Value = 3
    , "Red"
    ,IIf(RowNumber(Nothing) Mod 2 = 0, "LightGrey", "LightSteelBlue")
) 
```

结果如下：

![在此处输入图像描述](../Images/25b830267686ff49e6f7f488a55cf3f7.png)

# scala - Spark 中的 takeSample() 函数

> ID：14688107
> 
> 赞同：7
> 
> 时间：2013-02-04T13:47:25.403
> 
> 标签：scala, random, seeding

我正在尝试在[Spark](https://github.com/apache/spark)`takeSample()`中使用该函数，参数是 -**数据、要采集的样本数和种子**。但我不想使用种子。我想每次都有不同的答案。我无法弄清楚我该怎么做。我尝试使用作为种子值，但它给出了一个错误，因为我认为数据类型不匹配。有没有其他类似的功能可以在没有种子的情况下使用？或者我可以使用任何其他实现，以便每次都能得到不同的输出。**`System.nanoTime``takeSample()``takeSample()`**

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T13:56:20.047

`System.nanoTime`is of type `long`，所期望的种子`takeSample`is of type `Int`。因此，`takeSample(..., System.nanoTime.toInt)`应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:54:50.930

`System.nanoTime`返回 Long，而 takeSample 需要一个 Int。
您可以将`scala.util.Random.nextInt`作为种子值提供给 takeSample 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-08T14:27:59.057

从 Spark 版本 1.0.0 开始，该`seed`参数是可选的。请参阅[https://issues.apache.org/jira/browse/SPARK-1438](https://issues.apache.org/jira/browse/SPARK-1438)。**

# image - gif图像不循环

> ID：14688108
> 
> 赞同：2
> 
> 时间：2013-02-04T13:47:26.833
> 
> 标签：image, photoshop, gif

我在 Photoshop 中创建了一个 gif。它有两帧，每帧显示 4 秒，并且永远循环播放。

由于某种原因，图像在第二帧冻结并且无法继续在某些浏览器中加载（有关浏览器和/或版本的确切信息目前尚不清楚，但它已发生在最新版本的 chrome 中）。

图像以标准方式嵌入代码中，不使用 javascript，也没有改变元素。

有谁知道是什么原因造成的？到目前为止，我搜索的所有内容似乎都导致人们说“哦，我忘了永远制作 gif 循环”，而不是导致此问题的任何真正原因。

谢谢您的帮助！

编辑：抱歉，我没有考虑在原始帖子中放置图像。他是一个似乎不起作用的广告的例子。

[![示例图像](../Images/a100991e0bf18c10efab56ab8ea1c9b0.png)](https://i.stack.imgur.com/fwYom.gif)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:10:39.520

因为当前图像在我迄今为止尝试过的所有东西中都能正确显示，所以尝试在不同的应用程序中创建图像。
您可以尝试的一些应用程序：

1.  [GIMP](http://www.gimp.org/downloads/) -[教程](http://www.gimp.org/tutorials/Simple_Animations/)
2.  [一些免费软件的废话](http://www.techsupportalert.com/best-free-gif-animator.htm)。

我会投票给 GIMP。它很复杂，但它是免费的，并且有广泛的用户支持。

### 如果还是失败...

现在是检查环境的时候了。首先，在不同的机器上打开图像。可能是您的浏览器安装有问题。在这种情况下，请重新安装。
尝试在不同的服务器上上传。可能您的浏览器没有正确解压缩压缩数据或存在其他通信问题。

# python - 事件处理在 Python 3.3.0 中不起作用？

> ID：14688113
> 
> 赞同：0
> 
> 时间：2013-02-04T13:47:29.807
> 
> 标签：python

我尝试运行 Goldwasser 和 Letscher 的 Python 中的面向对象编程附带的第 15 章程序。第 15 章讨论事件处理。由于某种原因，它不起作用。当我运行它时，它总是使程序崩溃。我的 Python 版本是 3.3.0，具体代码如下：

```
from cs1graphics import *

class BasicHandler(EventHandler):
  def handle(self, event):
    print( 'Event Triggered')

if __name__ == '__main__':
  simple = BasicHandler()
  paper = Canvas()
  paper.addHandler(simple) 
```

当我运行这个程序时，它会立即使 Python 崩溃。为什么？

编辑：我下载了 Python 2.7.3 只是为了在那个版本中尝试一下，它成功了！所以问题是 Python 3.3.0 中有一些不同的东西导致这个程序崩溃，但我不知道有什么不同或应该有什么不同。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:31:07.440

曼尼，

最新版本的 cs1graphics (v 1.2a) 增加了对 Python 3 的支持，但它仍然是一个 alpha 版本。它支持大部分的Ch。我们书中的 3 种材料，但第 15 章中的事件处理材料尚未得到完全支持。此外，在 IDLE 中运行事件处理示例时存在更多问题的风险，因为 IDLE 也是一个 Tkinter 应用程序监视事件。

如果您想探索这些功能，可以使用我们早期的 Python 2.x 稳定版本之一。

也欢迎您通过电子邮件将您当前的错误报告发送至 bugs@cs1graphics.org，因为这可能有助于我们改进最新版本。

# android - 如何在 Android 中制作圆形自定义进度条

> ID：14688117
> 
> 赞同：53
> 
> 时间：2013-02-04T13:47:38.570
> 
> 标签：android

我想自定义圆形进度条，就像在 google play shop中[下载西装外套应用程序一样。我希望像下面的屏幕截图：](https://play.google.com/store/apps/details?id=com.mdjsoftware.download&feature=search_result)

![在此处输入图像描述](../Images/eb3ed2bf6a06e9ffbc6f4a4b32eeea1f.png)

有人帮我怎么做吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-07-23T21:08:18.843

我在网上找到的最好的两个库在 github 上：

*   [https://github.com/Todd-Davies/ProgressWheel](https://github.com/Todd-Davies/ProgressWheel)
*   [https://github.com/f2pratek/progressbutton?source=c](https://github.com/f2prateek/progressbutton?source=c)

希望对你有帮助

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-11-07T17:29:24.273

我遇到了同样的问题，但没有找到适合我的情况的解决方案，所以我决定换一种方式。我创建了自定义可绘制类。在这个类中，我为进度线和背景线创建了 2 个油漆（有一些更大的笔划）。首先在构造函数中设置 startAngle 和 sweepAngle：

```
 mSweepAngle = 0;
    mStartAngle = 270; 
```

这是此类的 onDraw 方法：

```
@Override
public void draw(Canvas canvas) {
    // draw background line
    canvas.drawArc(mRectF, 0, 360, false, mPaintBackground);
    // draw progress line
    canvas.drawArc(mRectF, mStartAngle, mSweepAngle, false, mPaintProgress);
} 
```

所以现在你需要做的就是将此drawable设置为视图的背景，在后台线程更改sweepAngle：

```
mSweepAngle += 360 / totalTimerTime // this is mStep 
```

并在具有此可绘制对象作为背景的视图上以一定的时间间隔（例如，如果您想要平滑的进度更改，则每 1 秒或更频繁）直接调用 InvalidateSelf()。而已！

PS我知道，我知道......当然你想要更多的代码。所以这里都是流程：

1.  创建 XML 视图：

    ```
     <View
     android:id="@+id/timer"
     android:layout_width="match_parent"
     android:layout_height="match_parent"/> 
    ```

2.  创建和配置自定义可绘制类（如上所述）。不要忘记为线条设置油漆。这里绘制进度线：

    ```
    mPaintProgress = new Paint();
    mPaintProgress.setAntiAlias(true);
    mPaintProgress.setStyle(Paint.Style.STROKE);
    mPaintProgress.setStrokeWidth(widthProgress);
    mPaintProgress.setStrokeCap(Paint.Cap.ROUND);
    mPaintProgress.setColor(colorThatYouWant); 
    ```

背景油漆也一样（如果你愿意，可以多设置一点宽度）

3.  在drawable类中create方法进行更新（上面描述的Step计算）

    ```
    public void update() {
        mSweepAngle += mStep;
        invalidateSelf();
    } 
    ```

4.  将此可绘制类设置为 YourTimerView（我是在运行时完成的）- 使用上面 xml 中的 @+id/timer 查看：

    `OurSuperDrawableClass superDrawable = new OurSuperDrawableClass(); YourTimerView.setBackgroundDrawable(superDrawable);`

5.  使用可运行和更新视图创建后台线程：

    ```
    YourTimerView.post(new Runnable() {
        @Override
        public void run() {
            // update progress view
            superDrawable.update();
        }
    }); 
    ```

而已 ！享受你很酷的进度条。如果您对这么多的文字感到厌烦，这里是结果的屏幕截图。![在此处输入图像描述](../Images/d1765677f2a8b9abc3734ac168049030.png)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-03-21T12:25:24.540

![Circle Android 自定义进度条](../Images/18880d94844cfad2516f690e5183896b.png)

[有关如何创建 Circle Android 自定义进度条的更多信息，请查看此链接](http://mycodingworld1.blogspot.com/2015/02/crating-circle-android-custom-progress.html)

步骤 01 您应该在可绘制文件上创建一个 xml 文件以配置进度条的外观。所以我将我的 xml 文件创建为 circular_progress_bar.xml。

```
<?xml version="1.0" encoding="UTF-8"?>

<layer-list xmlns:android="http://schemas.android.com/apk/res/android"
android:fromDegrees="120"
android:pivotX="50%"
android:pivotY="50%"
android:toDegrees="140">
<item android:id="@android:id/background">
<shape
    android:innerRadiusRatio="3"
    android:shape="ring"
    android:useLevel="false"
     android:angle="0"
     android:type="sweep"
    android:thicknessRatio="50.0">
    <solid android:color="#000000"/>
</shape>

 </item>
 <item android:id="@android:id/progress">
   <rotate
    android:fromDegrees="120"
    android:toDegrees="120">
<shape
    android:innerRadiusRatio="3"
    android:shape="ring"
     android:angle="0"
     android:type="sweep"
    android:thicknessRatio="50.0">
    <solid android:color="#ffffff"/>
</shape>
</rotate>
</item>
</layer-list> 
```

步骤 02 然后在你的 xml 文件上创建进度条然后在你的 drawable 文件夹中给出 xml 文件的名称作为 android:progressDrawable 的一部分

```
 <ProgressBar
            android:id="@+id/progressBar"
            style="?android:attr/progressBarStyleHorizontal"
            android:layout_width="150dp"
            android:layout_height="150dp"
            android:layout_marginLeft="0dp"
            android:layout_centerHorizontal="true"
            android:indeterminate="false"
            android:max="100"
            android:progressDrawable="@drawable/circular_progress_bar" /> 
```

Step 03 使用线程可视化进度条

```
package com.example.progress;
import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.view.Menu;
import android.view.animation.Animation;
 import android.view.animation.TranslateAnimation;
 import android.widget.ProgressBar;
 import android.widget.TextView;

 public class MainActivity extends Activity {

  private ProgressBar progBar;
  private TextView text;
     private Handler mHandler = new Handler();
     private int mProgressStatus=0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    progBar= (ProgressBar)findViewById(R.id.progressBar);
    text = (TextView)findViewById(R.id.textView1);

    dosomething();
}

  public void dosomething() {

  new Thread(new Runnable() {
        public void run() {
        final int presentage=0;
            while (mProgressStatus < 63) {
                mProgressStatus += 1;
                // Update the progress bar
                mHandler.post(new Runnable() {
                    public void run() {
                        progBar.setProgress(mProgressStatus);
                        text.setText(""+mProgressStatus+"%");

                    }
                });
                try {

                    Thread.sleep(50);

                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    }).start();
  }

 } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-10-30T12:57:43.027

试试这段代码来创建圆形进度条（饼图）。传递它整数值以绘制填充区域的百分比。:)

```
private void circularImageBar(ImageView iv2, int i) {

    Bitmap b = Bitmap.createBitmap(300, 300,Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(b); 
    Paint paint = new Paint();

        paint.setColor(Color.parseColor("#c4c4c4"));
        paint.setStrokeWidth(10);
        paint.setAntiAlias(true);
        paint.setStyle(Paint.Style.STROKE);
        canvas.drawCircle(150, 150, 140, paint);
        paint.setColor(Color.parseColor("#FFDB4C"));
        paint.setStrokeWidth(10);   
        paint.setStyle(Paint.Style.FILL);
        final RectF oval = new RectF();
        paint.setStyle(Paint.Style.STROKE);
        oval.set(10,10,290,290);
        canvas.drawArc(oval, 270, ((i*360)/100), false, paint);
        paint.setStrokeWidth(0);    
        paint.setTextAlign(Align.CENTER);
        paint.setColor(Color.parseColor("#8E8E93")); 
        paint.setTextSize(140);
        canvas.drawText(""+i, 150, 150+(paint.getTextSize()/3), paint); 
        iv2.setImageBitmap(b);
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-10-30T05:46:10.307

一个非常有用的[库](https://github.com/ylyc/circular_progress_bar/blob/master/README.md)，用于 android 中的自定义进度条。

在您的布局文件中

```
<com.lylc.widget.circularprogressbar.example.CircularProgressBar
android:id="@+id/mycustom_progressbar"
.
.
.
 /> 
```

和Java文件

```
CircularProgressBar progressBar = (CircularProgressBar) findViewById(R.id.mycustom_progressbar);
progressBar.setTitle("Circular Progress Bar"); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-04-27T10:13:21.680

我通过创建自定义视图解决了这个很酷的自定义进度条。我已经重写了 onDraw() 方法来在画布上绘制圆圈、填充弧和文本。

以下是自定义进度条

```
import android.annotation.TargetApi;

import android.content.Context;

import android.graphics.Canvas;

import android.graphics.Paint;

import android.graphics.Path;

import android.graphics.Rect;

import android.graphics.RectF;

import android.os.Build;

import android.util.AttributeSet;

import android.view.View;

import com.investorfinder.utils.UiUtils;

public class CustomProgressBar extends View {

private int max = 100;

private int progress;

private Path path = new Path();

int color = 0xff44C8E5;

private Paint paint;

private Paint mPaintProgress;

private RectF mRectF;

private Paint textPaint;

private String text = "0%";

private final Rect textBounds = new Rect();

private int centerY;

private int centerX;

private int swipeAndgle = 0;

public CustomProgressBar(Context context) {
    super(context);
    initUI();
}

public CustomProgressBar(Context context, AttributeSet attrs) {
    super(context, attrs);
    initUI();
}

public CustomProgressBar(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);
    initUI();
}

@TargetApi(Build.VERSION_CODES.LOLLIPOP)
public CustomProgressBar(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
    super(context, attrs, defStyleAttr, defStyleRes);
    initUI();
}

private void initUI() {
    paint = new Paint();
    paint.setAntiAlias(true);
    paint.setStrokeWidth(UiUtils.dpToPx(getContext(), 1));
    paint.setStyle(Paint.Style.STROKE);
    paint.setColor(color);

    mPaintProgress = new Paint();
    mPaintProgress.setAntiAlias(true);
    mPaintProgress.setStyle(Paint.Style.STROKE);
    mPaintProgress.setStrokeWidth(UiUtils.dpToPx(getContext(), 9));
    mPaintProgress.setColor(color);

    textPaint = new Paint();
    textPaint.setAntiAlias(true);
    textPaint.setStyle(Paint.Style.FILL);
    textPaint.setColor(color);
    textPaint.setStrokeWidth(2);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    int viewWidth = MeasureSpec.getSize(widthMeasureSpec);
    int viewHeight = MeasureSpec.getSize(heightMeasureSpec);

    int radius = (Math.min(viewWidth, viewHeight) - UiUtils.dpToPx(getContext(), 2)) / 2;

    path.reset();

    centerX = viewWidth / 2;
    centerY = viewHeight / 2;
    path.addCircle(centerX, centerY, radius, Path.Direction.CW);

    int smallCirclRadius = radius - UiUtils.dpToPx(getContext(), 7);
    path.addCircle(centerX, centerY, smallCirclRadius, Path.Direction.CW);
    smallCirclRadius += UiUtils.dpToPx(getContext(), 4);

    mRectF = new RectF(centerX - smallCirclRadius, centerY - smallCirclRadius, centerX + smallCirclRadius, centerY + smallCirclRadius);

    textPaint.setTextSize(radius * 0.5f);
}

@Override
protected void onDraw(Canvas canvas) {

    super.onDraw(canvas);

    canvas.drawPath(path, paint);

    canvas.drawArc(mRectF, 270, swipeAndgle, false, mPaintProgress);

    drawTextCentred(canvas);

}

public void drawTextCentred(Canvas canvas) {

    textPaint.getTextBounds(text, 0, text.length(), textBounds);

    canvas.drawText(text, centerX - textBounds.exactCenterX(), centerY - textBounds.exactCenterY(), textPaint);
}

public void setMax(int max) {
    this.max = max;
}

public void setProgress(int progress) {
    this.progress = progress;

    int percentage = progress * 100 / max;

    swipeAndgle = percentage * 360 / 100;

    text = percentage + "%";

    invalidate();
}

public void setColor(int color) {
    this.color = color;
}
} 
```

在布局 XML

```
<com.your.package.name.CustomProgressBar
            android:id="@+id/progress_bar"
            android:layout_width="70dp"
            android:layout_height="70dp"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/txt_title"
            android:layout_marginRight="15dp" /> 
```

在活动中

```
CustomProgressBar progressBar = (CustomProgressBar)findViewById(R.id.progress_bar);

    progressBar.setMax(9);

    progressBar.setProgress(5); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-04T13:54:53.107

我会创建一个新的视图类并从现有的 ProgressBar 派生。然后重写 onDraw 函数。为此，您将需要对画布进行直接绘制调用，因为它是如此自定义 - drawText、drawArc 和 drawOval 的组合应该做到这一点 - 外环和空部分的椭圆形和弧形部分着色。您可能最终还需要覆盖 onMeasure 和 onLayout。然后在你的xml中，当你想使用它时，像这样通过类名引用这个视图。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-23T13:18:36.513

# 其余代码

# utils方法的代码：

```
public static int[] resourcesIDsToColors(Context context, int[] resIDs){
            int[] colors = new int[resIDs.length];
            for(int i=0; i < resIDs.length; i++){
                colors[i] = ActivityCompat.getColor(context, resIDs[i]);
            }
            return colors;
        }

    public static void setSubClassFieldIntValue(Object objField, Class<?> superClass, String subName, String fieldName, int fieldValue){
            Class<?> subClass = getSubClass(superClass, subName);
            if(subClass != null) {
                Field field = getClassField(subClass, fieldName);
                if (field != null) {
                    setFieldValue(objField, field, fieldValue);
                }
            }
        }

        public static Class<?> getSubClass(Class<?> superClass, String subName){
            Class<?>[] classes = superClass.getDeclaredClasses();
            if(classes != null && classes.length > 0){
                for(Class<?> clss : classes){
                    if(clss.getSimpleName().equals(subName)){
                        return clss;
                    }
                }
            }
            return null;
        }

        public static Field getClassField(Class<?> clss, String fieldName){
            try {
                Field field = clss.getDeclaredField(fieldName);
                field.setAccessible(true);
                return field;
            } catch (NoSuchFieldException nsfE) {
                Log.e(TAG, nsfE.getMessage());
            } catch (SecurityException sE){
                Log.e(TAG, sE.getMessage());
            } catch (Exception e){
                Log.e(TAG, e.getMessage());
            }
            return null;
        }

    public static int[][] arrayToMatrix(int[] array, int numColumns){
            int numRows = array.length / numColumns;
            int[][] matrix = new int[numRows][numColumns];
            int nElemens = array.length;
            for(int i=0; i < nElemens; i++){
                matrix[i / numColumns][i % numColumns] = array[i];
            }
            return matrix;
        }

public static int[] matrixToArray(int[][] matrix){
        /** [+] Square matrix of order n        ->      A matrix with n rows and n columns, same number of rows and columns.
         *  [+] Matrix rows & columns number annotations:
         *          matrix[rows][columns]           matrix (rows x columns)         matrix rows, columns        rows by columns matrix
         * **/
        int numRows = matrix.length;
        int[] arr = new int[]{};
        for(int i=0; i < numRows; i++){
            int numColumns = matrix[i].length;
            int[] row = new int[numColumns];
            for(int j=0; j < numColumns; j++){
                row[j] = matrix[i][j];
            }
            arr = ArrayUtils.addAll(arr, row);
        }
        return arr;
    } 
```

# 默认布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@color/transparent">
    <LinearLayout
        android:id="@+id/layout_progress_bar_only"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:visibility="gone">
        <android.support.constraint.ConstraintLayout
            android:id="@+id/dpb_constraint_layout"
            android:layout_width="match_parent"
            android:layout_height="match_parent">
            <me.zhanghai.android.materialprogressbar.MaterialProgressBar
                android:id="@+id/dpb_progress_bar"
                android:layout_width="@dimen/pbd_progressbar_width_2"
                android:layout_height="@dimen/pbd_progressbar_height_2"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintHorizontal_bias="0.5"/>
            <LinearLayout
                android:id="@+id/dpb_text_container"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintHorizontal_bias="0.5"/>
        </android.support.constraint.ConstraintLayout>
    </LinearLayout>
    <LinearLayout
        android:id="@+id/layout_progress_bar_and_msg"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:visibility="gone"
        style="@style/PBDTextualMainLayoutStyle">
        <android.support.v7.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:cardElevation="@dimen/pbd_textual_card_elevation">
            <TextView
                android:id="@+id/pbd_title"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                style="@style/PBDTextualTitle"/>
        </android.support.v7.widget.CardView>
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="@dimen/pbd_textual_main_layout_height"
            android:orientation="horizontal">
            <android.support.v7.widget.CardView
                android:layout_width="@dimen/pbd_textual_progressbar_width"
                android:layout_height="@dimen/pbd_textual_progressbar_height">
                <me.zhanghai.android.materialprogressbar.MaterialProgressBar
                    android:id="@+id/dpb_progress_bar_and_msg"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    style="@style/PBDProgressBarStyle"/>
            </android.support.v7.widget.CardView>
            <android.support.v7.widget.CardView
                android:layout_width="match_parent"
                android:layout_height="@dimen/pbd_textual_msg_container_height">
                <TextView
                    android:id="@+id/dpb_progress_msg"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    style="@style/PBDTextualProgressMsgStyle"/>
            </android.support.v7.widget.CardView>
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

# 进度条环：

```
<layer-list
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <rotate
            android:fromDegrees="300"
            android:toDegrees="660">
            <shape
                android:shape="ring"
                android:useLevel="false">
                <gradient
                    android:type="sweep"/>
            </shape>
        </rotate>
    </item>
    <item>
        <rotate
            android:fromDegrees="210"
            android:toDegrees="570">
            <shape
                android:shape="ring"
                android:useLevel="false">
                <gradient
                    android:type="sweep"/>
            </shape>
        </rotate>
    </item>
    <item>
        <rotate
            android:fromDegrees="120"
            android:toDegrees="480">
            <shape
                android:shape="ring"
                android:useLevel="false">
                <gradient
                    android:type="sweep"
                    android:startColor="#00000000"
                    android:centerColor="#00000000"/>
            </shape>
        </rotate>
    </item>
    <item>
        <rotate
            android:fromDegrees="30"
            android:toDegrees="390">
            <shape
                android:shape="ring"
                android:useLevel="false">
                <solid android:color="#000000"/>
                <gradient
                    android:type="sweep"/>
            </shape>
        </rotate>
    </item>
</layer-list> 
```

# 维度资源：

```
 <!-- ProgressBarDialog Dimens (Normal & Textual Versions) -->
        <dimen name="pbd_window_width">250dp</dimen>
        <dimen name="pbd_window_height">250dp</dimen>
        <dimen name="pbd_progressbar_width_1">250dp</dimen>
        <dimen name="pbd_progressbar_height_1">250dp</dimen>
        <dimen name="pbd_progressbar_width_2">400dp</dimen>
        <dimen name="pbd_progressbar_height_2">400dp</dimen>
        <dimen name="pbd_textual_window_height">170dp</dimen>
        <dimen name="pbd_textual_main_layout_height">150dp</dimen>
        <dimen name="pbd_textual_progressbar_width">150dp</dimen>
        <dimen name="pbd_textual_progressbar_height">150dp</dimen>
        <dimen name="pbd_textual_msg_container_height">150dp</dimen>
        <dimen name="pbd_textual_main_layout_margin_horizontal">50dp</dimen>
        <dimen name="pbd_textual_main_layout_padding_horizontal">5dp</dimen>
        <dimen name="pbd_textual_main_layout_padding_bottom">15dp</dimen>
        <dimen name="pbd_textual_title_padding">4dp</dimen>
        <dimen name="pbd_textual_msg_container_margin">3dp</dimen>
        <dimen name="pbd_textual_msg_container_padding">3dp</dimen>
        <dimen name="pbd_textual_card_elevation">15dp</dimen>
        <dimen name="pbd_textual_progressmsg_padding_start">10dp</dimen>
        <dimen name="pbd_inner_radius_30dp">30dp</dimen>
        <dimen name="pbd_inner_radius_60dp">60dp</dimen>
        <dimen name="pbd_inner_radius_90dp">90dp</dimen>
        <dimen name="pbd_inner_radius_120dp">120dp</dimen>
        <dimen name="pbd_thickness_40dp">40dp</dimen>
        <dimen name="pbd_thickness_30dp">30dp</dimen>
        <dimen name="pbd_thickness_25dp">25dp</dimen>
        <dimen name="pbd_thickness_20dp">20dp</dimen>
        <dimen name="pbd_thickness_15dp">15dp</dimen>
        <dimen name="pbd_thickness_10dp">10dp</dimen> 
```

# 样式资源：

```
<!-- PROGRESS BAR DIALOG STYLES -->
    <style name="PBDCenterTextStyleWhite">
        <item name="android:textAlignment">center</item>
        <item name="android:textAppearance">?android:attr/textAppearanceLarge</item>
        <item name="android:textStyle">bold|italic</item>
        <item name="android:textColor">@color/material_white</item>
        <item name="android:layout_gravity">center</item>
        <item name="android:gravity">center</item>
    </style>

    <style name="PBDTextualTitle">
        <item name="android:textAlignment">viewStart</item>
        <item name="android:textAppearance">?android:attr/textAppearanceLargeInverse</item>
        <item name="android:textStyle">bold|italic</item>
        <item name="android:textColor">@color/colorAccent</item>
        <item name="android:padding">@dimen/pbd_textual_title_padding</item>
        <item name="android:layout_gravity">start</item>
        <item name="android:gravity">center_vertical|start</item>
        <item name="android:background">@color/colorPrimaryDark</item>
    </style>

    <style name="PBDTextualProgressMsgStyle">
        <item name="android:textAlignment">viewStart</item>
        <item name="android:textAppearance">?android:attr/textAppearanceMedium</item>
        <item name="android:textColor">@color/material_black</item>
        <item name="android:textStyle">normal|italic</item>
        <item name="android:paddingStart">@dimen/pbd_textual_progressmsg_padding_start</item>
        <item name="android:layout_gravity">start</item>
        <item name="android:gravity">center_vertical|start</item>
        <item name="android:background">@color/material_yellow_A100</item>
    </style>

    <style name="PBDTextualMainLayoutStyle">
        <item name="android:paddingLeft">@dimen/pbd_textual_main_layout_padding_horizontal</item>
        <item name="android:paddingRight">@dimen/pbd_textual_main_layout_padding_horizontal</item>
        <item name="android:paddingBottom">@dimen/pbd_textual_main_layout_padding_bottom</item>
        <item name="android:background">@color/colorPrimaryDark</item>
    </style>

    <style name="PBDProgressBarStyle">
        <item name="android:layout_gravity">center</item>
        <item name="android:gravity">center</item>
    </style> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-23T13:08:20.040

我做了一个简单的类，你可以用它来制作自定义 ProgressBar 对话框。实际上它有 2 个默认布局： - 第一个对话框，没有面板，进度条和动画文本居中 - 第二个普通对话框，面板，进度条，标题和消息

它只是一个类，因此不是您可以在项目中导入的可自定义库，因此您需要复制它并根据需要进行更改。它是一个 DialogFragment 类，但您可以在 Activity 中将其用作普通片段，就像使用 FragmentManager 使用经典片段一样。

# 对话框类的代码：

```
public class ProgressBarDialog extends DialogFragment {

private static final String TAG = ProgressBarDialog.class.getSimpleName();
private static final String KEY = TAG.concat(".key");
// Argument Keys
private static final String KEY_DIALOG_TYPE = KEY.concat(".dialogType");
private static final String KEY_TITLE = KEY.concat(".title");
private static final String KEY_PROGRESS_TEXT = KEY.concat(".progressText");
private static final String KEY_CUSTOM_LAYOUT_BUILDER = KEY.concat(".customLayoutBuilder");
// Class Names
private static final String CLASS_GRADIENT_STATE = "GradientState";
// Field Names
private static final String FIELD_THICKNESS = "mThickness";
private static final String FIELD_INNER_RADIUS = "mInnerRadius";

/** Dialog Types **/
private static final int TYPE_PROGRESS_BAR_ONLY_NO_ANIM = 0x0;
private static final int TYPE_PROGRESS_BAR_ONLY_ROTATE_ANIM = 0x1;
private static final int TYPE_PROGRESS_BAR_ONLY_FADE_ANIM = 0x2;
private static final int TYPE_PROGRESS_BAR_AND_MSG = 0xF;

/** Animations Values **/
private static final long CENTER_TEXT_VIEWS_ANIMATION_DURATION = 250L;
private static final long CENTER_TEXT_VIEWS_START_OFFSET_MULTIPLIER = 250L;

private MaterialProgressBar mProgressBar;
private LinearLayout mllTextContainer;
private TextView mtvTitle;
private TextView mtvProgressText;

private List<TextView> mCenterTextViews;
private int mDialogType;
private String mTitle;
private String mProgressText;
private CustomLayoutBuilder mCustomLayoutBuilder;

/** Public Static Factory Methods **/
public static ProgressBarDialog initLayoutProgressBarOnlyNoAnim(String text, CustomLayoutBuilder builder){
    return initLayoutProgressBarOnly(TYPE_PROGRESS_BAR_ONLY_NO_ANIM, text, builder);
}

public static ProgressBarDialog initLayoutProgressBarOnlyRotateAnim(String text, CustomLayoutBuilder builder){
    return initLayoutProgressBarOnly(TYPE_PROGRESS_BAR_ONLY_ROTATE_ANIM, text, builder);
}

public static ProgressBarDialog initLayoutProgressBarOnlyFadeAnim(String text, CustomLayoutBuilder builder){
    return initLayoutProgressBarOnly(TYPE_PROGRESS_BAR_ONLY_FADE_ANIM, text, builder);
}

public static ProgressBarDialog initLayoutProgressBarAndMsg(String title, String text, CustomLayoutBuilder builder){
    ProgressBarDialog mInstance = new ProgressBarDialog();
    Bundle args = new Bundle();
    args.putInt(KEY_DIALOG_TYPE, TYPE_PROGRESS_BAR_AND_MSG);
    args.putString(KEY_TITLE, title);
    args.putString(KEY_PROGRESS_TEXT, text);
    args.putParcelable(KEY_CUSTOM_LAYOUT_BUILDER, builder);
    mInstance.setArguments(args);
    return mInstance;
}

/** Private Static Factory Methods **/
private static ProgressBarDialog initLayoutProgressBarOnly(int animation, String text, CustomLayoutBuilder builder){
    ProgressBarDialog mInstance = new ProgressBarDialog();
    Bundle args = new Bundle();
    args.putInt(KEY_DIALOG_TYPE, animation);
    args.putString(KEY_PROGRESS_TEXT, text);
    args.putParcelable(KEY_CUSTOM_LAYOUT_BUILDER, builder);
    mInstance.setArguments(args);
    return mInstance;
}

/** Override Lifecycle Methods **/
@Override
public void onCreate(@Nullable Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    initData();
}

@Override @Nullable
public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);
    View view = inflater.inflate(R.layout.dialog_progress_bar, container, false);
    initViews(view);
    if(getContext() != null && mCustomLayoutBuilder != null) {
        mProgressBar.setIndeterminateDrawable(getResources().getDrawable(mCustomLayoutBuilder.getLayoutResID()));
        initShapes();
    }
    return view;
}

private void initShapes(){
    if(mProgressBar.getIndeterminateDrawable() instanceof LayerDrawable) {
        LayerDrawable layerDrawable = (LayerDrawable) mProgressBar.getIndeterminateDrawable();
        for (int i = 0; i < layerDrawable.getNumberOfLayers(); i++) {
            if(layerDrawable.getDrawable(i) instanceof RotateDrawable) {
                RotateDrawable rotateDrawable = (RotateDrawable) layerDrawable.getDrawable(i);
                int[] fromToDeg = mCustomLayoutBuilder.getDegreesMatrixRow(i);
                if(fromToDeg.length > 0){
                    rotateDrawable.setFromDegrees(fromToDeg[CustomLayoutBuilder.INDEX_FROM_DEGREES]);
                    rotateDrawable.setToDegrees(fromToDeg[CustomLayoutBuilder.INDEX_TO_DEGREES]);
                }
                if(rotateDrawable.getDrawable() instanceof GradientDrawable){
                    GradientDrawable gradientDrawable = (GradientDrawable) rotateDrawable.getDrawable();
                    int innerRadius = getResources().getDimensionPixelSize(mCustomLayoutBuilder.getInnerRadius(i));
                    if(mDialogType == TYPE_PROGRESS_BAR_AND_MSG){
                        innerRadius /= 3;
                    }
                    int thickness = getResources().getDimensionPixelSize(mCustomLayoutBuilder.getThickness(i));
                    int[] colors = mCustomLayoutBuilder.getColorsMatrixRow(i);
                    if(colors.length > 0x0){
                        gradientDrawable.setColors(DataUtils.resourcesIDsToColors(this.getContext(), colors));
                    }
                    if(innerRadius != -0x1){
                        DataUtils.setSubClassFieldIntValue(gradientDrawable.getConstantState(), gradientDrawable.getClass(), CLASS_GRADIENT_STATE, FIELD_INNER_RADIUS, innerRadius);
                    }
                    if(thickness != -0x1){
                        DataUtils.setSubClassFieldIntValue(gradientDrawable.getConstantState(), gradientDrawable.getClass(), CLASS_GRADIENT_STATE, FIELD_THICKNESS, thickness);
                    }
                }
            }
        }
    }
}

@Override
public void onStart() {
    super.onStart();
    setWindowSize();
    startAnimation();
}

/** Public Methods **/
public void changeTextViews(String progressText){
    mProgressText = progressText;
    initTextViews();
    startAnimation();
}

public String getProgressText(){
    return mProgressText;
}

/** Private Methods **//** Init Methods **/
private void initData(){
    if(getArguments() != null) {
        if (getArguments().containsKey(KEY_DIALOG_TYPE)) {
            mDialogType = getArguments().getInt(KEY_DIALOG_TYPE);
        }
        if(getArguments().containsKey(KEY_TITLE)){
            mTitle = getArguments().getString(KEY_TITLE);
        }
        if (getArguments().containsKey(KEY_PROGRESS_TEXT)) {
            mProgressText = getArguments().getString(KEY_PROGRESS_TEXT);
        }
        if (getArguments().containsKey(KEY_CUSTOM_LAYOUT_BUILDER)){
            mCustomLayoutBuilder = getArguments().getParcelable(KEY_CUSTOM_LAYOUT_BUILDER);
        }
    }
    mCenterTextViews = new ArrayList<>();
}

private void initViews(View layout){
    if(layout != null){
        switch(mDialogType){
            case TYPE_PROGRESS_BAR_ONLY_NO_ANIM:
            case TYPE_PROGRESS_BAR_ONLY_ROTATE_ANIM:
            case TYPE_PROGRESS_BAR_ONLY_FADE_ANIM:
                if(getDialog() != null && getDialog().getWindow() != null) {
                    getDialog().getWindow().setBackgroundDrawableResource(android.R.color.transparent);
                }
                LinearLayout mLayoutProgressBarOnly = layout.findViewById(R.id.layout_progress_bar_only);
                mLayoutProgressBarOnly.setVisibility(LinearLayout.VISIBLE);
                mProgressBar = layout.findViewById(R.id.dpb_progress_bar);
                if(mCustomLayoutBuilder.getProgressBarWidthDimen() != -0x1){
                    ConstraintLayout.LayoutParams lp = (ConstraintLayout.LayoutParams) mProgressBar.getLayoutParams();
                    lp.width = getResources().getDimensionPixelSize(mCustomLayoutBuilder.getProgressBarWidthDimen());
                    lp.height = getResources().getDimensionPixelSize(mCustomLayoutBuilder.getProgressBarHeightDimen());
                    mProgressBar.setLayoutParams(lp);
                }
                mllTextContainer = layout.findViewById(R.id.dpb_text_container);
                initTextViews();
                break;
            case TYPE_PROGRESS_BAR_AND_MSG:
                LinearLayout mLayoutProgressBarAndMsg = layout.findViewById(R.id.layout_progress_bar_and_msg);
                mLayoutProgressBarAndMsg.setVisibility(LinearLayout.VISIBLE);
                mProgressBar = layout.findViewById(R.id.dpb_progress_bar_and_msg);
                mtvTitle = layout.findViewById(R.id.pbd_title);
                mtvProgressText = layout.findViewById(R.id.dpb_progress_msg);
                initProgressMsg();
                break;
        }
    }
}

private void initTextViews(){
    if(!TextUtils.isEmpty(mProgressText)){
        clearTextContainer();
        for(char digit : mProgressText.toCharArray()){
            TextView tv = new TextView(getContext(), null, 0x0, R.style.PBDCenterTextStyleWhite);
            if(mCustomLayoutBuilder.getProgressMsgColor() != CustomLayoutBuilder.DEFAULT_COLOR && getContext() != null){
                tv.setTextColor(ActivityCompat.getColor(getContext(), mCustomLayoutBuilder.getProgressMsgColor()));
            }
            if(mCustomLayoutBuilder.getProgressMsgDimen() != CustomLayoutBuilder.DEFAULT_DIMEN){
                tv.setTextSize(getResources().getDimension(mCustomLayoutBuilder.getProgressMsgDimen()));
            }
            tv.setText(String.valueOf(digit));
            mCenterTextViews.add(tv);
            mllTextContainer.addView(tv);
        }
    }
}

private void initProgressMsg(){
    mtvTitle.setText(mTitle);
    mtvProgressText.setText(mProgressText);
    if(mCustomLayoutBuilder.getProgressMsgColor() != CustomLayoutBuilder.DEFAULT_COLOR){
        mtvProgressText.setTextColor(mCustomLayoutBuilder.getProgressMsgColor());
    }
    if(mCustomLayoutBuilder.getProgressMsgDimen() != CustomLayoutBuilder.DEFAULT_DIMEN){
        mtvProgressText.setTextSize(getResources().getDimension(mCustomLayoutBuilder.getProgressMsgDimen()));
    }
}

private void clearTextContainer(){
    if(mllTextContainer.getChildCount() >= 0x0){
        for(int i=0; i < mllTextContainer.getChildCount(); i++){
            View v = mllTextContainer.getChildAt(i);
            if(v instanceof TextView){
                TextView tv = (TextView) v;
                if(tv.getAnimation() != null){
                    tv.clearAnimation();
                }
            }
        }
    }
    mllTextContainer.removeAllViews();
}

private void setWindowSize(){
    Dialog dialog = getDialog();
    if(dialog != null && dialog.getWindow() != null){
        int width = 0x0, height = 0x0;
        switch(mDialogType){
            case TYPE_PROGRESS_BAR_ONLY_NO_ANIM:
            case TYPE_PROGRESS_BAR_ONLY_ROTATE_ANIM:
            case TYPE_PROGRESS_BAR_ONLY_FADE_ANIM:
                width = ViewGroup.LayoutParams.WRAP_CONTENT;        //getResources().getDimensionPixelSize(R.dimen.pbd_window_width);
                height = ViewGroup.LayoutParams.WRAP_CONTENT;       //getResources().getDimensionPixelSize(R.dimen.pbd_window_height);
                break;
            case TYPE_PROGRESS_BAR_AND_MSG:
                width = ViewGroup.LayoutParams.MATCH_PARENT;
                height = ViewGroup.LayoutParams.WRAP_CONTENT;       //getResources().getDimensionPixelSize(R.dimen.pbd_textual_window_height);
                break;
        }
        dialog.getWindow().setLayout(width, height);
    }
}

/** Animation Methods **/
private void startAnimation(){
    switch(mDialogType){
        case TYPE_PROGRESS_BAR_ONLY_ROTATE_ANIM:
        startRotateAnimations();
        break;
        case TYPE_PROGRESS_BAR_ONLY_FADE_ANIM:
        startFadeInAnimations();
        break;
    }
}

private void startRotateAnimations(){
    for(TextView tv : mCenterTextViews){
        if(tv != null && tv.getText() != null && !TextUtils.isEmpty(tv.getText().toString().trim())) {
            int i = mCenterTextViews.indexOf(tv);
            RotateAnimation anim = new RotateAnimation(0, 360, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
            anim.setDuration(CENTER_TEXT_VIEWS_ANIMATION_DURATION);
            anim.setFillAfter(true);
            anim.setStartOffset(CENTER_TEXT_VIEWS_START_OFFSET_MULTIPLIER * i);
            if (i == (mCenterTextViews.size() - 0x1)) {
                anim.setAnimationListener(new Animation.AnimationListener() {
                    @Override
                    public void onAnimationStart(Animation animation) {

                    }

                    @Override
                    public void onAnimationEnd(Animation animation) {
                        startRotateAnimations();
                    }

                    @Override
                    public void onAnimationRepeat(Animation animation) {

                    }
                });
            }
            tv.startAnimation(anim);
        }
    }
}

private void startFadeInAnimations(){
    for(TextView tv : mCenterTextViews){
        if(tv != null && tv.getText() != null && !TextUtils.isEmpty(tv.getText().toString().trim())) {
            int i = mCenterTextViews.indexOf(tv);
            AlphaAnimation anim = new AlphaAnimation(0x1, 0x0);
            anim.setDuration(CENTER_TEXT_VIEWS_ANIMATION_DURATION);
            anim.setFillAfter(true);
            anim.setStartOffset(CENTER_TEXT_VIEWS_START_OFFSET_MULTIPLIER * i);
            if (i == (mCenterTextViews.size() - 0x1)) {
                anim.setAnimationListener(new Animation.AnimationListener() {
                    @Override
                    public void onAnimationStart(Animation animation) {

                    }

                    @Override
                    public void onAnimationEnd(Animation animation) {
                        startFadeOutAnimations();
                    }

                    @Override
                    public void onAnimationRepeat(Animation animation) {

                    }
                });
            }
            tv.startAnimation(anim);
        }
    }
}

private void startFadeOutAnimations(){
    for(TextView tv : mCenterTextViews){
        int i = mCenterTextViews.indexOf(tv);
        AlphaAnimation anim = new AlphaAnimation(0x0, 0x1);
        anim.setDuration(CENTER_TEXT_VIEWS_ANIMATION_DURATION);
        anim.setFillAfter(true);
        anim.setStartOffset(CENTER_TEXT_VIEWS_START_OFFSET_MULTIPLIER * i);
        if(i == (mCenterTextViews.size() - 0x1)){
            anim.setAnimationListener(new Animation.AnimationListener() {
                @Override
                public void onAnimationStart(Animation animation) {

                }

                @Override
                public void onAnimationEnd(Animation animation) {
                    startFadeInAnimations();
                }

                @Override
                public void onAnimationRepeat(Animation animation) {

                }
            });
        }
        tv.startAnimation(anim);
    }
}

/** Progress Bar Custom Layout Builder Class **/
public static class CustomLayoutBuilder implements Parcelable {

    /** Shapes **/
    private static final int RING = GradientDrawable.RING;

    /** Colors **/
    private static final int[][] COLORS_MATRIX_RYGB = new int[][]{
        new int[]{ R.color.transparent, R.color.transparent, R.color.material_red_A700 },
        new int[]{ R.color.transparent, R.color.transparent, R.color.material_amber_A700 },
        new int[]{ R.color.transparent, R.color.transparent, R.color.material_light_green_A700 },
        new int[]{ R.color.transparent, R.color.transparent, R.color.material_blue_A700 }
    };
    private static final int DEFAULT_COLOR = -0x1;

    /** Dimens **/
    private static final int DEFAULT_DIMEN = -0x1;
    private static final int[] DEFAULT_PROGRESS_BAR_DIMEN = new int[]{};

    /** Indexes **/
    private static final int INDEX_PROGRESS_BAR_WIDTH = 0x0;
    private static final int INDEX_PROGRESS_BAR_HEIGHT = 0x1;
    private static final int INDEX_FROM_DEGREES = 0x0;
    private static final int INDEX_TO_DEGREES = 0x1;

    /** Arrays Sizes **/
    private static final int SIZE_PROGRESS_BAR_DIMENS_ARRAY = 0x2;

    /** Matrix Columns Number **/
    private static final int NUM_COLUMNS_DEGREES_MATRIX = 0x2;      /* Degrees Matrix Index                     ->  degrees[3]  =   { fromDegrees, toDegrees } */
    private static final int NUM_COLUMNS_COLORS_MATRIX = 0x3;       /* GradientDrawable Colors Matrix Index     ->  colors[3]   =   { startColor, centerColor, endColor } */

    /** Drawables Layout Resource IDs **/
    private static final int LAYOUT_RES_PROGRESS_BAR_RINGS = R.drawable.progress_bar_rings;

    /** Layout Data: Four Rings Overlaid **/
    private static final int RINGS_OVERLAID_LAYERS = 0x4;
    private static final int[][] RINGS_OVERLAID_DEGREES = new int[][]{ new int[]{ 300, 660 }, new int[]{ 210, 570 }, new int[]{ 120, 480 }, new int[]{ 30, 390 } };
    private static final int[] RINGS_OVERLAID_SHAPES = new int[]{ RING, RING, RING, RING };
    private static final int[] RINGS_OVERLAID_INNER_RADIUS = new int[]{ R.dimen.pbd_inner_radius_60dp, R.dimen.pbd_inner_radius_60dp, R.dimen.pbd_inner_radius_60dp, R.dimen.pbd_inner_radius_60dp};
    private static final int[] RINGS_OVERLAID_THICKNESS = new int[]{ R.dimen.pbd_thickness_40dp, R.dimen.pbd_thickness_30dp, R.dimen.pbd_thickness_20dp, R.dimen.pbd_thickness_10dp };

    /** Layout Data: Four Rings Spaced **/
    private static final int RINGS_SPACED_LAYERS = 0x4;
    private static final int[][] RINGS_SPACED_DEGREES = new int[][]{ new int[]{ 180, 540 }, new int[]{ 0, 360 }, new int[]{ 90, 450 }, new int[]{ 270, 630 } };
    private static final int[] RINGS_SPACED_SHAPES = new int[]{ RING, RING, RING, RING };
    private static final int[] RINGS_SPACED_INNER_RADIUS = new int[]{ R.dimen.pbd_inner_radius_30dp, R.dimen.pbd_inner_radius_60dp, R.dimen.pbd_inner_radius_90dp, R.dimen.pbd_inner_radius_120dp };
    private static final int[] RINGS_SPACED_THICKNESS = new int[]{ R.dimen.pbd_thickness_10dp, R.dimen.pbd_thickness_15dp, R.dimen.pbd_thickness_20dp, R.dimen.pbd_thickness_25dp };

    private int mLayoutResID;
    private int[] mProgressBarDimens;
    private int mNumLayers;
    private int[][] mRotateDegrees;
    private int[] mShapes;
    private int[] mInnerRadius;
    private int[] mThickness;
    private int[][] mColors;
    private int mProgressMsgColor;
    private int mProgressMsgDimen;

    public static Parcelable.Creator CREATOR = new CreatorCustomLayoutBuilder();

    /** Constructors **/
    private CustomLayoutBuilder(int layoutResID, int[] progressBarDimens, int numLayers, int[][] degreesMatrix, int[] shapes, int[] innerRadius, int[] thickness,
                                int[][] colorsMatrix, int msgColor, int progressMsgDimen){
        mLayoutResID = layoutResID;
        mProgressBarDimens = progressBarDimens;
        mNumLayers = numLayers;
        mRotateDegrees = degreesMatrix;
        mShapes = shapes;
        mInnerRadius = innerRadius;
        mThickness = thickness;
        mColors = colorsMatrix;
        mProgressMsgColor = msgColor;
        mProgressMsgDimen = progressMsgDimen;
    }

    private CustomLayoutBuilder(Parcel in){
        mLayoutResID = in.readInt();
        mProgressBarDimens = new int[SIZE_PROGRESS_BAR_DIMENS_ARRAY];
        in.readIntArray(mProgressBarDimens);
        mNumLayers = in.readInt();
        int[] tempArray = new int[NUM_COLUMNS_DEGREES_MATRIX * mNumLayers];
        in.readIntArray(tempArray);
        mRotateDegrees = DataUtils.arrayToMatrix(tempArray, NUM_COLUMNS_DEGREES_MATRIX);
        mShapes = new int[mNumLayers];
        in.readIntArray(mShapes);
        mInnerRadius = new int[mNumLayers];
        in.readIntArray(mInnerRadius);
        mThickness = new int[mNumLayers];
        in.readIntArray(mThickness);
        tempArray = new int[NUM_COLUMNS_COLORS_MATRIX * mNumLayers];
        in.readIntArray(tempArray);
        mColors = DataUtils.arrayToMatrix(tempArray, NUM_COLUMNS_COLORS_MATRIX);
        mProgressMsgColor = in.readInt();
        mProgressMsgDimen = in.readInt();
    }

    /** Public Static Factory Methods **/
    public static CustomLayoutBuilder initLayoutRingsOverlaid(){
        return new CustomLayoutBuilder(LAYOUT_RES_PROGRESS_BAR_RINGS, DEFAULT_PROGRESS_BAR_DIMEN, RINGS_OVERLAID_LAYERS, RINGS_OVERLAID_DEGREES, RINGS_OVERLAID_SHAPES,
                RINGS_OVERLAID_INNER_RADIUS, RINGS_OVERLAID_THICKNESS, COLORS_MATRIX_RYGB, R.color.material_white, DEFAULT_DIMEN);
    }

    public static CustomLayoutBuilder initLayoutRingsOverlaid(int[] resProgBarDimens, int resProgMsgColor, int resProgMsgDimen){
        return new CustomLayoutBuilder(LAYOUT_RES_PROGRESS_BAR_RINGS, resProgBarDimens, RINGS_OVERLAID_LAYERS, RINGS_OVERLAID_DEGREES, RINGS_OVERLAID_SHAPES,
                RINGS_OVERLAID_INNER_RADIUS, RINGS_OVERLAID_THICKNESS, COLORS_MATRIX_RYGB, resProgMsgColor, resProgMsgDimen);
    }

    public static CustomLayoutBuilder initLayoutRingsSpaced(){
        return new CustomLayoutBuilder(LAYOUT_RES_PROGRESS_BAR_RINGS, DEFAULT_PROGRESS_BAR_DIMEN, RINGS_SPACED_LAYERS, RINGS_SPACED_DEGREES, RINGS_SPACED_SHAPES,
                RINGS_SPACED_INNER_RADIUS, RINGS_SPACED_THICKNESS, COLORS_MATRIX_RYGB, DEFAULT_COLOR, DEFAULT_DIMEN);
    }

    /** Override Parcelable Methods **/
    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel out, int flags) {
        out.writeInt(mLayoutResID);
        out.writeIntArray(mProgressBarDimens);
        out.writeInt(mNumLayers);
        out.writeIntArray(DataUtils.matrixToArray(mRotateDegrees));
        out.writeIntArray(mShapes);
        out.writeIntArray(mInnerRadius);
        out.writeIntArray(mThickness);
        out.writeIntArray(DataUtils.matrixToArray(mColors));
        out.writeInt(mProgressMsgColor);
        out.writeInt(mProgressMsgDimen);
    }

    /** Getter & Setter Methods **/
    private int getLayoutResID() {
        return mLayoutResID;
    }

    private void setLayoutResID(int layoutResID) {
        this.mLayoutResID = layoutResID;
    }

    private int[] getProgressBarDimens() {
        return mProgressBarDimens;
    }

    private void setProgressBarDimens(int[] progressBarDimens) {
        this.mProgressBarDimens = progressBarDimens;
    }

    private int getProgressBarWidthDimen(){         // Used to check if 'mProgressBarDimens' array is set.
        if(mProgressBarDimens != null && mProgressBarDimens.length == SIZE_PROGRESS_BAR_DIMENS_ARRAY){
            return mProgressBarDimens[INDEX_PROGRESS_BAR_WIDTH];
        } else {
            return -0x1;
        }
    }

    private int getProgressBarHeightDimen(){
        return mProgressBarDimens[INDEX_PROGRESS_BAR_HEIGHT];
    }

    private int getNumLayers() {
        return mNumLayers;
    }

    private void setNumLayers(int numLayers) {
        this.mNumLayers = numLayers;
    }

    private int[][] getRotateDegrees() {
        return mRotateDegrees;
    }

    private void setRotateDegrees(int[][] rotateDegrees) {
        this.mRotateDegrees = rotateDegrees;
    }

    private int[] getShapes() {
        return mShapes;
    }

    private void setShapes(int[] shapes) {
        this.mShapes = shapes;
    }

    private int[] getInnerRadius() {
        return mInnerRadius;
    }

    private void setInnerRadius(int[] innerRadius) {
        this.mInnerRadius = innerRadius;
    }

    private int[] getThickness() {
        return mThickness;
    }

    private void setThickness(int[] thickness) {
        this.mThickness = thickness;
    }

    private int[][] getColorsMatrix() {
        return mColors;
    }

    private void setColorsMatrix(int[][] colorsMatrix) {
        this.mColors = colorsMatrix;
    }

    private int getProgressMsgColor() {
        return mProgressMsgColor;
    }

    private void setProgressMsgColor(int progressMsgColor) {
        this.mProgressMsgColor = progressMsgColor;
    }

    private int getProgressMsgDimen() {
        return mProgressMsgDimen;
    }

    private void setProgressMsgDimen(int progressMsgDimen) {
        this.mProgressMsgDimen = progressMsgDimen;
    }

    /** Public Methods **/
    private int[] getDegreesMatrixRow(int numRow){
        if(mRotateDegrees != null && mRotateDegrees.length > numRow) {
            return mRotateDegrees[numRow];
        } else {
            return new int[]{};
        }
    }

    private int getShape(int position){
        if(mShapes != null && mShapes.length > position){
            return mShapes[position];
        } else {
            return -0x1;
        }
    }

    private int getInnerRadius(int position){
        if(mInnerRadius != null && mInnerRadius.length > position){
            return mInnerRadius[position];
        } else {
            return -0x1;
        }
    }

    private int getThickness(int position){
        if(mThickness != null && mThickness.length > position){
            return mThickness[position];
        } else {
            return -0x1;
        }
    }

    private int[] getColorsMatrixRow(int numRow) {
        if(mColors != null && mColors.length > numRow){
            return mColors[numRow];
        } else {
            return new int[]{};
        }
    }

    /** Private Static Class Parcelable Creator **/
    private static class CreatorCustomLayoutBuilder implements Parcelable.Creator<CustomLayoutBuilder> {

        @Override
        public CustomLayoutBuilder createFromParcel(Parcel in) {
            return new CustomLayoutBuilder(in);
        }

        @Override
        public CustomLayoutBuilder[] newArray(int size) {
            return new CustomLayoutBuilder[size];
        }

    }

}
} 
```

*   该类有一个进度条，上面没有对话框和自定义文本。文本可以有 2 个动画：

*   Fade In -> Fade Out 动画：数字将从左到右依次淡出。在文本的末尾将从左侧重新开始。

*   旋转动画：相同的顺序行为，但数字自己一个接一个地旋转而不是淡出。

*   另一种方式是带有对话框的进度条（标题+消息）

[![旋转动画](../Images/9e9875b9b86f48b1ba9d87144df719d8.png)](https://i.stack.imgur.com/dn8b1.jpg)

[![对话框进度条](../Images/40a9c10b9baafc272ca361bce34665ba.png)](https://i.stack.imgur.com/CEjx1.jpg)

# haskell - 将 Haskell GHCi 输出重定向到文本文件

> ID：14688119
> 
> 赞同：4
> 
> 时间：2013-02-04T13:47:58.417
> 
> 标签：haskell, file-io, cmd, executable, exe

> **可能重复：**
> [将 Haskell GHCi 命令结果输出到 txt 文件](https://stackoverflow.com/questions/14595934/outputting-haskell-ghci-command-results-to-a-txt-file)

我是 Haskell 的新手，我正在尝试将测试用例输出结果重定向到文本文件。它现在的设置方式是`AddAllTestCases.hs`包含我需要运行的所有测试用例，以测试我创建的功能。我通过加载在 GHCi 上运行测试用例`AddAllTestCases.hs`，然后只需键入`main`并按 Enter。这会导致测试用例输出结果完美地打印在 GHCi 中。

因为有数百个测试用例，我需要将输出结果重定向到文本文件。

尝试#1：

```
writeFile "myoutput.txt" $ show $ main 
```

我收到以下错误：

`No instance for (Show(IO())) arising from a use of show`

在 CMD 中尝试 #2（尝试创建可执行文件，然后将可执行结果输出到文本文件）：

`ghc --make AddAllTests.hs -o testResults.exe`

这给了我以下错误：

`Warning: output was redirected with -o, but no output will be generated because there is no Min module`

这很奇怪，因为当我使用 GHCi（尝试 #1）并且我输入`main`它时，它会完美地执行所有内容，我认为这意味着有一个主模块？

我非常感谢将测试用例结果重定向到文本文件的任何帮助。

提前谢谢了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T13:52:23.167

您需要一个`Main`模块（和一个`main`操作）来生成可执行文件。您可以将模块重命名为，也可以在命令行`Main`中指定要考虑的模块，`Main`

```
ghc --make -main-is AddAllTests AddAllTests.hs -o testResults.exe 
```

生成没有名为`Main`.

没有编译的方法是

```
ghc AddAllTests.hs -e "main" > testResults.txt 
```

另一种方法是创建一个文件，在其中列出所有测试用例，

```
3 + 2 :: Rational
reverse "foobar"
:q 
```

并`ghci`使用重定向的输入和输出运行

```
ghci < testCases > testResults.txt 
```

# c# - wpf datagrid xaml 和实体框架

> ID：14688120
> 
> 赞同：0
> 
> 时间：2013-02-04T13:47:58.807
> 
> 标签：c#, wpf, entity-framework, xaml

我想在像 city_Name 这样的列导航属性中显示我写了这段代码但什么也没发生

```
 <DataGrid Margin="210,15"  Grid.Row="1" CanUserAddRows="False" AutoGenerateColumns="False" Name="dg_Super" RowHeight="20" >
        <DataGrid.Columns>
            <DataGridTextColumn Width="*" Header="Super Name"   Binding="{Binding Path=SupermarketName, Mode=OneTime}"></DataGridTextColumn>
            <DataGridTextColumn Width="*" Header="City"  Binding="{Binding Path=City1.CityName, Mode=OneTime}"></DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

和 c# 代码

```
 var super = mh.Supermarkets;
            dg_Super.ItemsSource = super.ToList(); 
```

City1 是 ef 模型的导航属性。请问这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:52:45.180

在您的查询中 - 也许添加 Include 方法：

```
var super = mh.Supermarkets.Include("City1") 
```

因为 EF 不知道它必须从“City”表中获取数据。如果查询使用 City 表中的字段，则不必包含`Include("City")`- 然后 EF 可以检测到您需要表中的数据，因此它会自动加载 City 表

# firefox - WebDriver / 打开上传文件窗口时卡住

> ID：14688123
> 
> 赞同：3
> 
> 时间：2013-02-04T13:48:04.903
> 
> 标签：firefox, selenium, webdriver, selenium-webdriver, xpath

我使用我的 WebDriver 和 FireFox。

我有一个元素：//input[@class="uploadFiles"]，当我点击它时：driver.findElement(By.xpath("//input[@class="uploadFiles"]"))，一个窗口的上传文件（Windows 操作系统的窗口）打开，但测试没有继续到下一行，并且卡住了。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:57:14.397

Webdriver 不与操作系统级别的对话框交互，这就是它不继续下一行的原因。这里有一些可以帮助你的东西：http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q: [_Does_WebDriver_support_file_uploads](http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q:_Does_WebDriver_support_file_uploads)？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T14:03:14.807

不，您不能将 WebDriver 用作 niharika_neo 答案，但您可以下一步：

```
string filepath = "my local path";
_driver.FindElement(By.Id("attachments")).SendKeys(filepath);
_driver.FindElement(By.Id("attachments")).SendKeys(Keys.Return); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T14:20:53.597

您不能直接与操作系统级别的 Windows 交互。您可以通过 niharika_neo 给出的路径，或者您可以使用 Auto IT 工具来处理操作系统级别的窗口。最好的选择是使用 Auto IT 工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:22:15.393

我在使用 FF 时遇到了同样的问题，然后我发现它是特定于我正在使用的 FF 版本的。我在 FF 11 上安装并运行了测试，我能够成功地运行他的测试。尝试更改您正在使用的 FF 版本。

# lync - 检测来电是否发往响应组

> ID：14688124
> 
> 赞同：0
> 
> 时间：2013-02-04T13:48:08.693
> 
> 标签：lync, ucma

我有一个正在接收来电的 UCMA 3.0 可信应用程序。

我的来电代表如下：

```
private void incomingAVCall_CallReceived(object sender, CallReceivedEventArgs<AudioVideoCall> e) 
```

有没有办法确定呼叫是否最初是发往响应组的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:37:22.943

我最终在 DiversionContext 中检查了 ms-retarget-reason 标头。它可能并不完全可靠，但对我有用。

```
private void incomingAVCall_CallReceived(object sender, CallReceivedEventArgs<AudioVideoCall> e)
{
     bool isResponseGroup = false;
     foreach (var dd in e.DiversionContext.GetAllDivertedDestinations())
     {
          string[] values = dd.DiversionHeader.GetValue().Split(';');
          foreach (string s in values)
          {
                if (s == "ms-retarget-reason=acd")
                {
                    isResponseGroup = true;
                    break;
                }
          }
          if (isResponseGroup)
              break;
     }
} 
```

# c# - 使用 NuGet、PostSharp 和 Jenkins 编译 .NET 项目

> ID：14688125
> 
> 赞同：0
> 
> 时间：2013-02-04T13:48:12.220
> 
> 标签：c#, jenkins, nuget, postsharp

我在尝试在 Jenkins 中编译 C# 项目时遇到了一些严重的问题，该项目需要 NuGet 进行包管理，PostSharp 用于方面。我添加`EnableNuGetPackageRestore=true`为环境变量，每次都会检索所有包。PostSharp已经安装在系统中，但每次我仍然得到错误：

```
error CS1029: #error: 'PostSharp is not introduced in the build process. If NuGet just restored the PostSharp package, you need to rebuild the solution.' 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:09:23.640

在 Jenkins 中编译/构建之前，您可能必须配置以获取 NuGet 包（尤其是 PostSharp）。

此博客文章描述了使用批处理文件的可能解决方法：http: [//blog.overridethis.com/blog/post/2012/02/17/Enable-NuGet-Package-Restore-e28093-When-the-basics-fails！ .aspx](http://blog.overridethis.com/blog/post/2012/02/17/Enable-NuGet-Package-Restore-e28093-When-the-basics-fails!.aspx)

# c++ - 将浮点数复制到字符串

> ID：14688126
> 
> 赞同：-2
> 
> 时间：2013-02-04T13:48:14.923
> 
> 标签：c++, floating-point, stringstream

我想将浮点数的内容复制到 C++ 中的字符串。这行不通。

```
#include <iostream>
#include <sstream>

using namespace std;

int main() {
   float ans = getFloat();
   stringstream ss;
   string strAns;
   ss >> ans;
   strAns = ss.str();
   cout << strAns << "\n";     // displays "0"
   return 0;
} 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T13:50:22.387

我认为

```
 ss>>ans; 
```

应该

```
 ss<<ans; 
```

编辑：正如 James Kanze 所指出的，你最好使用`std::ostringstream`而不是`std::stringstream`因为你没有使用第一个的双向功能。这样编译器也会抛出一个错误，你从字符串中提取 ans 而不是将它插入到字符串中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T13:50:21.340

`ss << ans;`而不是，`ss >> ans`它会工作

要使用字符串流，您必须使用 PUT TO 运算符（`<<`），右侧有一个对象。这会将运算符转换为字符串（如果运算符是为特定类型定义的）（这`operator<<`已经为带有`stringstream`对象的`float`对象定义）。

然后，将字符串流转换为字符串......您将成功将对象转换为字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T13:58:06.537

正如其他答案所示，它应该是`ss << ans`，因为`<<`用于 ostreams 并`>>`用于 istreams。

如果您只想将 float 打印到`cout`，您当然可以避免绕道而只是 write `std::cout << ans;`，但我想您想使用字符串。

但是，您应该注意 Boost 和 C++11 库提供的简化：

```
#include <iostream>
#include <string> //for std::string and std::to_string
#include <boost/lexical_cast.hpp> 

using namesapce std;
int main() {
   float ans=getFloat();
   string strAns1 = boost::lexical_cast<string>(ans); //boost way

   auto strAns2 = std::to_string(ans); //C++11 way

   cout << "boost: " << strAns1 << "\n"
        << "C++11: " << strAns2 << "\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T13:50:36.650

您使用了错误的运算符：

```
#include <iostream>
#include <sstream>
using namespace std;
int main() {
   float ans=getFloat();
   stringstream ss;
   string strAns;
   ss << ans;
   strAns=ss.str();
   cout<<strAns<<"\n";     // displays "0"
   return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T13:50:37.427

从外观上看，这里只有一行错误。您需要像这样将浮点数流式传输*到*字符串中：

```
ss << ans; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T22:22:05.957

采用

```
strAns = std::to_string(ans); 
```

# python - 谷歌应用引擎中的 Html 301 重定向

> ID：14688129
> 
> 赞同：0
> 
> 时间：2013-02-04T13:48:27.030
> 
> 标签：python, html, google-app-engine, redirect

我正在使用 python 在 google appengine 上托管一个网站。我在目录中有单独的页面，我需要知道如何从例如：“www.example.com/page”重定向。我没有在页面后添加另一个“/”，它会出现“404 not found”。如何更改我的重定向脚本以添加它？这是我的 app.yaml：

```
 application: example-app
    version: 4
    runtime: python 
    api_version: 1

    handlers:
    - url: (.*)/
      static_files: static\1/index.html
      upload: static/index.html

    - url: /
      static_dir: static

    - url: /apps/(.*\.apk)
      mime_type: application/vnd.android.package-archive
      static_files: static/apps/\1
      upload: static/apps/(.*\.apk)

    - url: (.*)/apps
      script: directory.py

    - url: /comingsoon
      script: DirecotryHandler.py

    - url: /directory
      script: DirecotryHandler.py 
```

这是我的 directoryhandler.py：

```
 import os
    from google.appengine.ext import webapp
    from google.appengine.ext.webapp.util import run_wsgi_app

    class DirecotryHandler(webapp.RequestHandler):
    def get(self, tail):
    if tail == î:
    self.redirect(ë/directory/í, permanent=True)
    #TODO: respond to ì/directory/î request

    def head(self, tail):
    if tail == î:
    self.redirect(ë/directory/í, permanent=True)
    #TODO: respond to ì/directory/î request

    application = webapp.WSGIApplication(
    [
    (r'^/directory(/?)$', DirectoryPage),
    ])

    def main():
    run_wsgi_app(application)

    if __name__ == ì__main__î:
    main() 
```

如何编辑我的 DirectryHandler.py 以处理 301 重定向？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T03:48:07.617

实际上，处理 301 重定向的是您的浏览器。您的代码只是缺少`(r'^/comingsoon$', DirecotryHandler),`生成 301 重定向的路线。

然后，当您的浏览器调用 时`www.example.com/comingsoon`，您的 DirecotryHandler 类会处理请求并调用`self.redirect("/directory/", permanent=True)`。这会生成 301 重定向作为对浏览器的响应，浏览器会看到新的 URL`/directory/`并请求它，它会调用您的`DirectoryPage`类。

# wpf - 在自定义控件中找不到提供 DataContext 的元素

> ID：14688132
> 
> 赞同：1
> 
> 时间：2013-02-04T13:48:38.557
> 
> 标签：wpf, custom-controls, datacontext

您好我有一个自定义控件，用于呈现其他 xaml 内容。

在所述控件的实现中，我有一个用户控件，它期望视图模型绑定到其数据上下文，但是数据上下文始终为空，并且我收到以下错误消息：

> System.Windows.Data 错误：3：找不到提供 DataContext 的元素。BindingExpression:Path=OutcomeRestrictionVM; 数据项=空；目标元素是'XsdEnumRestrictionView'（名称=''）；目标属性是“DataContext”（类型“对象”）

我的自定义控件的 Generic.xaml 是：

```
<ControlTemplate TargetType="{x:Type local:ContextGroupBox}" x:Key="ContextGroupBoxTemplate">
    <Grid SnapsToDevicePixels="true" >
        <Grid.Resources>
            <ControlTemplate x:Key="tplFlatButton" TargetType="{x:Type Button}">
                <Border Width="{TemplateBinding Width}"
                        Height="{TemplateBinding Height}"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                      VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                      TextElement.Foreground="{TemplateBinding Foreground}"
                      TextElement.FontFamily="{TemplateBinding FontFamily}"
                      TextElement.FontSize="{TemplateBinding FontSize}"
                      TextElement.FontStretch="{TemplateBinding FontStretch}"
                      TextElement.FontWeight="{TemplateBinding FontWeight}"/>
                </Border>
            </ControlTemplate>
            <Style x:Key="stlFlatButton" TargetType="{x:Type Button}">
                <Setter Property="Background" Value="{x:Null}" />
                <Setter Property="BorderBrush" Value="{x:Null}" />
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="Template" Value="{StaticResource tplFlatButton}" />
            </Style>
        </Grid.Resources>
        <Rectangle RadiusX="10" RadiusY="10" StrokeThickness="{TemplateBinding BorderThickness}"  Stroke="{TemplateBinding BorderBrush}" Fill="{TemplateBinding Background}"/>
        <Grid Margin="{TemplateBinding BorderThickness}">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <!-- Group Title -->
            <Grid Grid.Row="0" Margin="5,5,5,1" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="auto"/>
                </Grid.ColumnDefinitions>
                <ContentPresenter Content="{TemplateBinding Header}" RecognizesAccessKey="true" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" TextElement.Foreground="{TemplateBinding Foreground}" TextElement.FontSize="{TemplateBinding HeaderFontSize}" TextElement.FontWeight="Bold"/>
                <!--<TextBlock Grid.Column="0" Text="Record Access" Foreground="#4E86B8" FontWeight="Bold" FontSize="14" VerticalAlignment="Center"/>-->
                <Button Command="{TemplateBinding ShowHelpCommand}" CommandParameter="{TemplateBinding ShowHelpParameter}" Style="{StaticResource stlFlatButton}" Grid.Column="1" HorizontalAlignment="Right">
                    <Image  Source="/Hornbill.Resources.Image;component/Shared/information.png" Width="16" Height="16" Visibility="Visible" >
                    </Image>
                </Button>
            </Grid>
            <ContentControl DataContext="{TemplateBinding DataContext}" Content="{TemplateBinding Content}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Grid.Row="1" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
        </Grid>
    </Grid>
</ControlTemplate>

<Style TargetType="{x:Type local:ContextGroupBox}">
    <Setter Property="Template" Value="{StaticResource ContextGroupBoxTemplate}" />
    <Setter Property="Padding" Value="7,4,7,7" />
    <Setter Property="VerticalContentAlignment" Value="Stretch" />
</Style> 
```

自定义控件 ContextGroupBox.cs

```
public static double defaultHeaderFontSize = 14;

public double HeaderFontSize
{
    get { return (double)GetValue(HeaderFontSizeProperty); }
    set { SetValue(HeaderFontSizeProperty, value); }
}

// Using a DependencyProperty as the backing store for HeaderFontSize.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty HeaderFontSizeProperty =
    DependencyProperty.Register("HeaderFontSize", typeof(double), typeof(ContextGroupBox), new PropertyMetadata(defaultHeaderFontSize));

public object Header
{
    get { return (object)GetValue(HeaderProperty); }
    set { SetValue(HeaderProperty, value); }
}

// Using a DependencyProperty as the backing store for Header.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty HeaderProperty =
    DependencyProperty.Register("Header", typeof(object), typeof(ContextGroupBox));

public FrameworkElement Content
{
    get { return (FrameworkElement)GetValue(ContentProperty); }
    set { SetValue(ContentProperty, value); }
}

// Using a DependencyProperty as the backing store for Content.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty ContentProperty =
    DependencyProperty.Register("Content", typeof(FrameworkElement), typeof(ContextGroupBox));

public ICommand ShowHelpCommand
{
    get { return (ICommand)GetValue(ShowHelpCommandProperty); }
    set { SetValue(ShowHelpCommandProperty, value); }
}

// Using a DependencyProperty as the backing store for ShowHelpCommand.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty ShowHelpCommandProperty =
    DependencyProperty.Register("ShowHelpCommand", typeof(ICommand), typeof(ContextGroupBox));

public object ShowHelpParameter
{
    get { return (object)GetValue(ShowHelpParameterProperty); }
    set { SetValue(ShowHelpParameterProperty, value); }
}

// Using a DependencyProperty as the backing store for ShowHelpParameter.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty ShowHelpParameterProperty =
    DependencyProperty.Register("ShowHelpParameter", typeof(object), typeof(ContextGroupBox));

static ContextGroupBox()
{
    DefaultStyleKeyProperty.OverrideMetadata(typeof(ContextGroupBox), new FrameworkPropertyMetadata(typeof(ContextGroupBox)));
} 
```

我的实现是：

```
<hctrl:ContextGroupBox Grid.Column="1" DataContextChanged="gbOutcomeParam_DataContextChanged_1"  Header="{l:Translate Outcome}" Name="gbOutcomeParam" VerticalAlignment="Stretch" Margin="5 5">
                        <ctrl:XsdEnumRestrictionView DataContext="{Binding OutcomeRestrictionVM, Mode=OneWay}" DataContextChanged="XsdEnumRestrictionView_DataContextChanged" />
                    </hctrl:ContextGroupBox> 
```

疯狂的是，如果我在我的用户控件 (ctrl:XsdEnumRestrictionView) 中创建一个依赖属性并绑定到该属性，一切正常，但当我显式绑定到 DataContext 时却不行。

好的，也许用户控件无论如何都应该使用属性，但我对丢失 DataContext 感到沮丧，并想了解为什么我的自定义控件似乎没有属性。

任何帮助都感激不尽

谢谢

基兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:14:15.900

好的，所以要显式绑定到 DataContext 工作，我必须将自定义控件的基类设置为 HeaderedContentControl 并删除 Header 和 Content 属性。现在一切似乎都运行良好，尽管我仍然不太明白为什么当基类是 Control 时它不起作用。

# casting - 循环遍历stackPanel.children

> ID：14688136
> 
> 赞同：1
> 
> 时间：2013-02-04T13:48:41.910
> 
> 标签：casting, combobox, foreach, controls, stackpanel

在代码中，我正在动态添加控件（例如，TextBox、ComboBox、Label 等），我现在希望循环并从用户输入数据的每个适用（例如，非标签）控件中获取值。

```
 foreach (Control control in EditForm.Children)
        {
            values = new List<string>();
            fieldName = control.Name;

            if (control is ComboBox)
            {
                ComboBox cmb = control as ComboBox;

                string value = cmb.SelectedValue.ToString();
            }
         } 
```

问题是我在运行时遇到错误

> 无法将“System.Windows.Controls.TextBlock”类型的对象转换为“System.Windows.Controls.Control”类型。

我应该使用更通用的类而不是“控制”吗？如何遍历每个控件并访问所需的值（包括控件的名称）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:59:13.680

“UIElement”很可能是一个安全的选择。

如果您只对特定类型的元素感兴趣，您还可以考虑使用 Linq 按类类型过滤元素（不要忘记包含“using System.Linq”指令）：

```
foreach (ComboBox combo in EditForm.Children.OfType<ComboBox>())
{
   //...
} 
```

# android - 从应用程序发送电子邮件

> ID：14688140
> 
> 赞同：0
> 
> 时间：2013-02-04T13:48:47.667
> 
> 标签：android, email, notifications

我开发了一个应用程序，用户可以在设置中输入电子邮件地址，并在某些特定事件中向该地址发送电子邮件（作为通知）。

问题是：从应用程序发送电子邮件的最佳方式是什么？

最好的方法是从应用用户的谷歌帐户发送电子邮件，但这是不可能的，对吧？

我现在正在做的是做一个 HTTP 帖子并通过 php 发送一封电子邮件。这很好用，但由于该应用程序被许多人使用，邮件发送总是由于大量邮件发送而被禁用......我能做什么？

我真的需要托管自己的服务器吗？

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:06:42.573

我发现在没有用户交互的情况下向用户发送电子邮件类似于垃圾邮件。我总是选择最简单和 IMO 诚实的替代方案：只需`android.content.Intent.ACTION_SEND`使用计算数据填充意图，让用户决定是否发送电子邮件。

# javascript - 将输入框中的第一个字母转换为大写

> ID：14688141
> 
> 赞同：7
> 
> 时间：2013-02-04T13:48:50.663
> 
> 标签：javascript, jquery

[JS Bin 演示](https://jsbin.com/dopika/4/edit?js,console,output)

此[正则表达式](http://regexr.com/3cfmd)将每个小写单词转换为大写。我有一个全名输入字段。我确实希望用户看到他/她按下的每个单词的第一个字母在输入字段中都转换为大写。

我不知道如何正确替换当前输入字段中的选定字符。

```
$('input').on('keypress', function(event) {
  var $this = $(this),
      val = $this.val(),
      regex = /\b[a-z]/g;

  val = val.toLowerCase().replace(regex, function(letter) {
    return letter.toUpperCase();
  });

  // I want this value to be in the input field.
  console.log(val);
}); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-04T13:50:24.107

给定即：`const str = "hello world"`成为`Hello world`

```
const firstUpper = str.substr(0, 1).toUpperCase() + str.substr(1); 
```

或者：

```
const firstUpper = str.charAt(0).toUpperCase() + str.substr(1); 
```

或者：

```
const firstUpper = str[0] + str.substr(1); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T14:31:43.887

```
input {
    text-transform: capitalize;
} 
```

[http://jsfiddle.net/yuMZq/1/](http://jsfiddle.net/yuMZq/1/)

使用[文本转换](http://en.wikipedia.org/wiki/Occam%27s_razor)会更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T17:17:47.597

您可以通过检查插入符号位置并重置插入符号位置，将第一个字母转换为大写字母，并且仍然避免光标跳到行首的烦人问题。我通过定义几个函数在表单上执行此操作，一个用于所有大写字母，一个用于正确大小写，一个用于仅初始大写字母...然后两个用于插入符号位置的函数，一个用于获取，一个用于设置：

```
function ProperCase(el) {
  pos = getInputSelection(el);
  s = $(el).val();
  s = s.toLowerCase().replace(/^(.)|\s(.)|'(.)/g, 
          function($1) { return $1.toUpperCase(); });
  $(el).val(s);
  setCaretPosition(el,pos.start);
}

function UpperCase(el) {
  pos = getInputSelection(el);
  s = $(el).val();
  s = s.toUpperCase();
  $(el).val(s);
  setCaretPosition(el,pos.start);
}

function initialCap(el) {
  pos = getInputSelection(el);
  s = $(el).val();
  s = s.substr(0, 1).toUpperCase() + s.substr(1);
  $(el).val(s);
  setCaretPosition(el,pos.start);
}

/* GETS CARET POSITION */
function getInputSelection(el) {
    var start = 0, end = 0, normalizedValue, range,
        textInputRange, len, endRange;

    if (typeof el.selectionStart == 'number' && typeof el.selectionEnd == 'number') {
        start = el.selectionStart;
        end = el.selectionEnd;
    } else {
        range = document.selection.createRange();

        if (range && range.parentElement() == el) {
            len = el.value.length;
            normalizedValue = el.value.replace(/\r\n/g, "\n");

            // Create a working TextRange that lives only in the input
            textInputRange = el.createTextRange();
            textInputRange.moveToBookmark(range.getBookmark());

            // Check if the start and end of the selection are at the very end
            // of the input, since moveStart/moveEnd doesn't return what we want
            // in those cases
            endRange = el.createTextRange();
            endRange.collapse(false);

            if (textInputRange.compareEndPoints("StartToEnd", endRange) > -1) {
                start = end = len;
            } else {
                start = -textInputRange.moveStart("character", -len);
                start += normalizedValue.slice(0, start).split("\n").length - 1;

                if (textInputRange.compareEndPoints("EndToEnd", endRange) > -1) {
                    end = len;
                } else {
                    end = -textInputRange.moveEnd("character", -len);
                    end += normalizedValue.slice(0, end).split("\n").length - 1;
                }
            }
        }
    }

    return {
        start: start,
        end: end
    };
}

/* SETS CARET POSITION */
function setCaretPosition(el, caretPos) {

    el.value = el.value;

    // ^ this is used to not only get "focus", but
    // to make sure we don't have it everything -selected-
    // (it causes an issue in chrome, and having it doesn't hurt any other browser)

    if (el !== null) {

        if (el.createTextRange) {
            var range = el.createTextRange();
            range.move('character', caretPos);
            range.select();
            return true;
        }

        else {
            // (el.selectionStart === 0 added for Firefox bug)
            if (el.selectionStart || el.selectionStart === 0) {
                el.focus();
                el.setSelectionRange(caretPos, caretPos);
                return true;
            }

            else  { // fail city, fortunately this never happens (as far as I've tested) :)
                el.focus();
                return false;
            }
        }
    }
} 
```

然后在准备好文档时，我将 keyup 事件侦听器应用于要检查的字段，但我只侦听可以实际修改字段内容的键（例如，我跳过“Shift”键......），如果用户点击“Esc”我恢复了字段的原始值...

```
 $('.updatablefield', $('#myform')).keyup(function(e) {
    myfield=this.id;
    myfieldname=this.name;
    el = document.getElementById(myfield);
    // or the jquery way:
    // el = $(this)[0];
      if (e.keyCode == 27) {                                 // if esc character is pressed
        $('#'+myfield).val(original_field_values[myfield]); // I stored the original value of the fields in an array...
        // if you only need to do the initial letter uppercase, you can apply it here directly like this:
        initialCap(el);
      }                                                    // end if (e.keyCode == 27)
      // if any other character is pressed that will modify the field (letters, numbers, symbols, space, backspace, del...)
      else if (e.keyCode == 8||e.keycode == 32||e.keyCode > 45 && e.keyCode < 91||e.keyCode > 95 && e.keyCode < 112||e.keyCode > 185 && e.keyCode < 223||e.keyCode == 226) {
        // if you only need to do the initial letter uppercase, you can apply it here directly like this:
        initialCap(el);
      } // end else = if any other character is pressed                      //
  }); // end $(document).keyup(function(e) 
```

你可以在这里看到这个例子的工作小提琴：http: [//jsfiddle.net/ZSDXA/](http://jsfiddle.net/ZSDXA/ "初始大写插入符号位置示例小提琴")

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T13:51:18.360

简单的说：

```
$this.val(val); 
```

* * *

```
$(document).ready(function() {    
    $('input').on('keypress', function(event) {
        var $this = $(this),
            val = $this.val();

        val = val.toLowerCase().replace(/\b[a-z]/g, function(letter) {
            return letter.toUpperCase();
        }); 
        console.log(val);
        $this.val(val);
    });
}); 
```

* * *

正如[@roXon](https://stackoverflow.com/a/14688170/370103)所示，这可以简化：

```
$(document).ready(function() {
    //alert('ready');

    $('input').on('keypress', function(event) {
        var $this = $(this),
            val = $this.val();

        val = val.substr(0, 1).toUpperCase() + val.substr(1).toLowerCase();
        $this.val(val);
    });
}); 
```

* * *

在我看来，另一种更好的解决方案是仅将元素*样式*设置为[大写](http://lexipixel.com/wordpress/fun-with-css/capitalize-text-css)，然后执行逻辑服务器端。

这消除了任何 javascript 的开销，并确保在服务器端处理逻辑（无论如何都应该如此！）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T14:01:10.130

```
$('input').on('keyup', function(event) {
    $(this).val(function(i, v){
        return v.replace(/[a-zA-Z]/, function(c){
           return c.toUpperCase();
        })
    })
}); 
```

[http://jsfiddle.net/AbxVx/](http://jsfiddle.net/AbxVx/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-17T07:31:20.263

这将适用于 keyup 上的每个文本字段调用函数

其中 id 是您的文本字段的 ID，而 value 是您在文本字段中键入的值

```
function capitalizeFirstLetter(value,id)
{

    if(value.length>0){

        var str= value.replace(value.substr(0,1),value.substr(0,1).toUpperCase());
        document.getElementById(id).value=str;

    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-14T06:29:43.787

只使用这个**这个工作在大写字符中的名字**

```
style="text-transform:capitalize; 
```

像

```
<asp:TextBox ID="txtName" style="text-transform:capitalize;" runat="server" placeholder="Your Name" required=""></asp:TextBox> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-02T07:55:55.243

```
 $('.form-capitalize').keyup(function(event) {
        var $this = $(this),
        val = $this.val(),
        regex = /\b[a-z]/g;
        val = val.toLowerCase().replace(regex, function(letter) {
            return letter.toUpperCase();
        });
        this.value = val;
        // I want this value to be in the input field.
      console.log(val);
    }); 
```

# asp.net - 模板只能与字段访问、属性访问、一维数组索引或单参数自定义索引器表达式一起使用

> ID：14688143
> 
> 赞同：4
> 
> 时间：2013-02-04T13:49:02.053
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我的模型：

```
public class EmployeeModel
{
    [Required]
    [StringLength(50)]
    [Display(Name = "Employee Name")]
    public string EmpName { get; set; }

    [Required]
    [StringLength(150)]
    [Display(Name = "Email Id")]
    public string Email { get; set; }

    [Required]
    [Range(18, 150)]
    public int Age { get; set; }

} 
```

在我看来：

```
 @Html.MyEditFor(model=>model.EmpName)
 @Html.MyEditFor(model=>model.Email)
 @Html.MyEditFor(model=>model.Age) 
```

我的自定义助手：

```
public static MvcHtmlString MyEditFor<TModel>(this HtmlHelper<TModel> html, Expression<Func<TModel, object>> expression)
    {
        var partial = html.Partial("Item", new LabelEditorValidation() { Label = html.LabelFor(expression), Editor = html.EditorFor(expression), Validation = html.ValidationMessageFor(expression) }).ToString();
        return MvcHtmlString.Create(partial);
    } 
```

Item.cshtml - 部分视图：

```
 @model MyClientCustomValidation.Models.LabelEditorValidation 
        <tr>
            <td class="editor-label" style="border: 0;">
                @Model.Label
            </td>
            <td class="editor-field" style="border: 0">
                @Model.Editor
                @Model.Validation
            </td>
        </tr> 
```

LabelEditorValidation - Item.cshtml 的模型：

```
 public class LabelEditorValidation
{
    public MvcHtmlString Validation { get; set; }
    public MvcHtmlString Label { get; set; }
    public MvcHtmlString Editor { get; set; }
} 
```

我有例外

> 模板只能与字段访问、属性访问、一维数组索引或单参数自定义索引器表达式一起使用

在线的：

```
 var partial = html.Partial("Item", new LabelEditorValidation() { Label = html.LabelFor(expression), Editor = html.EditorFor(expression), Validation = html.ValidationMessageFor(expression) }).ToString(); 
```

`@Html.MyEditFor`调用时发生异常 `model.Age`。

```
 @Html.MyEditFor(model=>model.Age) 
```

但它不会在`@Html.MyEditFor`被调用时发生`model.EmpName`and `model.Email`。那是因为`model.EmpName`and`model.Email`是字符串但是`model.Age`是`int`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-29T18:51:55.737

*对于谷歌搜索用户*，不要调用任何`Html.XyzFor`这样的方法

```
@Html.CheckBoxFor(model => model.Property***.MyMethod()***) 
```

改为使用`view models`，将其应用于`MyMethod`给定的属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-04T16:04:23.580

你可以让你的助手更通用一点，并摆脱`object`争论：

```
public static MvcHtmlString MyEditFor<TModel, TProperty>(
    this HtmlHelper<TModel> html, 
    Expression<Func<TModel, TProperty>> expression
)
{
    var partial = html.Partial(
        "Item", 
        new LabelEditorValidation 
        { 
            Label = html.LabelFor(expression), 
            Editor = html.EditorFor(expression), 
            Validation = html.ValidationMessageFor(expression) 
        }
    ).ToString();
    return MvcHtmlString.Create(partial);
} 
```

现在你的表情不会中断，因为不会有不必要的拳击。

# ruby-on-rails-3 - 解释重定向？

> ID：14688145
> 
> 赞同：0
> 
> 时间：2013-02-04T13:49:09.780
> 
> 标签：ruby-on-rails-3

这是 users_controller.rb 中的方法

```
def create
    @user = User.new(params[:user])

    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
end 
```

这里的代码

```
redirect_to @user 
```

自动重定向到表演动作，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:12:45.457

您成功创建了一个用户。结果，您将通过新创建的 id 重定向到您刚刚创建的用户。Redirect_to 表示您正在重定向到其他操作，在本例中为显示操作。换句话说，您不再使用创建操作中的@user，而是使用显示操作中的@user (User.find(params[:id])。如果您将redirect_to @user 更改为redirect_to @users，您将是成功创建后重定向到用户的索引操作。

如果您想了解更多详细信息： http: [//api.rubyonrails.org/classes/ActionController/Base.html](http://api.rubyonrails.org/classes/ActionController/Base.html)

例如：

> “与 index 不同，create 操作不会呈现模板。在执行其主要目的（创建新帖子）后，它会启动重定向。此重定向通过返回外部“302 Moved”HTTP 响应来工作，该响应将用户带到显示或索引操作，具体取决于重定向。”

# jquery - 当文本输入与选择之一相同的值时，触发 Google Places Autocomplete Places 地点发生变化

> ID：14688150
> 
> 赞同：4
> 
> 时间：2013-02-04T13:49:19.067
> 
> 标签：jquery, google-api, google-places-api

我正在使用 Google Places Autocomplete API 和 jQuery。它的基本功能运行良好。我想做的是，如果有人在自动完成中键入了与我希望选择该项目并`place_changed`触发事件的选择之一完全相同的内容。这是因为我在需要触发的地方更改了侦听器中有一些逻辑。这个想法是，如果有人键入与自动完成选项之一完全相同的文本，那么它应该表现得好像有人单击了该选项。

这是我尝试过的，其中 userLocation 是输入：

```
$("#userLocation").keyup(function(e){
    //if the text is at least 4 chars long
    if($("#userLocation").val().length > 4)
    {
        //iterate through each of the autocomplete options
        $(".pac-item").each(function(){
            if($(this).text() == $("#userLocation").val() )
            {
                //does not do what I need it to
                $(this).trigger("place_changed");
            }
        });
    }
}); 
```

我也尝试过替换`trigger("place_changed")`，`.trigger("click")`但无济于事。

有没有人这样做过？任何人都可以建议另一种方法来尝试使这项工作吗？任何建议将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T02:07:17.503

正如[这里](https://stackoverflow.com/questions/12816428/)的答案所述：

您必须调用`google.maps.event.trigger`导致如下调用的函数。

```
$("#userLocation").keyup(function(e){
    //if the text is at least 4 chars long
    if($("#userLocation").val().length > 4)
    {
        //iterate through each of the autocomplete options
        $(".pac-item").each(function(){
            if($(this).text() == $("#userLocation").val() )
            {
                google.maps.event.trigger(autocomplete, 'place_changed');
            }
        });
    }
}); 
```

[文档](https://developers.google.com/maps/documentation/javascript/3.exp/reference#event)显示您还可以将参数传递`trigger`给将传递给“place_changed”事件的事件侦听器的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-07T06:00:59.837

您还可以尝试使用自动完成输入键事件并使用 javascript 触发。

请尝试以下代码。

```
//For Set Location pin point
var searchtext = "New York, NY";
var input = document.getElementById('pac-input');
$('#pac-input').val(searchtext);                        
setTimeout(function () {
google.maps.event.trigger(input, 'focus');
google.maps.event.trigger(input, 'keydown', { keyCode: 13 });                            
}, 10);
//End 
```

# c# - 更新仅适用于最后一个方法调用

> ID：14688151
> 
> 赞同：0
> 
> 时间：2013-02-04T13:49:21.907
> 
> 标签：c#, sql-server-2008

我有一个非常简单的`UPDATE`声明，它可以正常工作，但**只有**一个电话。我在数据库中的项目（FAI）很少，我想更换负责人。

如果我想更改两个或多个负责人，它只会更改最后一个项目的负责人。我没有任何错误消息。所有值都正确发送到更新查询，但查询只是不将其发送到数据库。

```
public void updateFaiUBazu(string orderNumber, FAI fai, int serialNumber)
{
    konekcija.Open();
    MessageBox.Show(fai.Reviewer);
    komanda = new SqlCommand("
        update FAI set 
            AircraftFK = @AircraftFK, GlassFK = @GlassFK, PartNumber = @PartNumber, 
            SerialNumber = @SerialNumber, ReportNumber = @ReportNumber, 
            Reviewer = @Reviewer, Comment = @Comment, DateTime = @DateTime, 
            Iges = @Iges, IgesName = @IgesName, Status = @Status 
            where 
                 AircraftFK = " + fai.AircraftFK1 + 
                 " and GlassFK = " + fai.GlassFK1 +
                 " and SerialNumber = " + serialNumber, 
         konekcija);
    try
    {
        komanda.Parameters.Clear();
        komanda.Parameters.AddWithValue("@AircraftFK", fai.AircraftFK1);
        komanda.Parameters.AddWithValue("@GlassFK", fai.GlassFK1);
        // komanda.Parameters.AddWithValue("@OrderNumberFK", fai[i].OrderNumerFK);
        komanda.Parameters.AddWithValue("@PartNumber", fai.PartNumber);
        komanda.Parameters.AddWithValue("@SerialNumber", fai.SerialNumber);
        komanda.Parameters.AddWithValue("@ReportNumber", fai.ReportNumber);
        komanda.Parameters.AddWithValue("@Reviewer", fai.Reviewer);
        komanda.Parameters.AddWithValue("@Comment", fai.Comment);
        komanda.Parameters.Add("@DateTime", fai.DateAndTime);  

        if (fai.IgesFile.Length != 0)
        {
            komanda.Parameters.AddWithValue("@Iges", fai.IgesFile);
        }
        else
        {
            komanda.Parameters.Add("@Iges", SqlDbType.VarBinary, -1);
            komanda.Parameters["@Iges"].Value = DBNull.Value;
        }

        if (string.IsNullOrEmpty(fai.IgesName))
        {
            komanda.Parameters.Add("@IgesName", fai.IgesName).Value = DBNull.Value;
        }
        else
        {
            komanda.Parameters.AddWithValue("@IgesName", fai.IgesName);
        }

        komanda.Parameters.AddWithValue("@Status", "Not Tested");

        komanda.ExecuteNonQuery();

    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
    }
    konekcija.Close();
} 
```

这可能是 SqlServer 更新语句的一些限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:55:40.360

按照几个步骤来解决您的问题。

1.  记录您的更新查询。就在你创建它之后。当您从循环中调用更新时，这将告诉您是否真的执行了更新。
2.  如果记录了所有更新，请将它们复制到 SSMS 查询窗口并依次执行。如果查询的形成方式有任何问题，或者导致问题的参数之一中有任何特定值，这将为您提供正确的想法。这也将帮助您确定上述@Steve 指定的问题是否存在。

# c# - 在c#的下拉列表中选择随机字符串

> ID：14688154
> 
> 赞同：1
> 
> 时间：2013-02-04T13:49:37.757
> 
> 标签：c#, random, names

我试图弄清楚如何让我的方法从下拉列表中随机选择一个帐户类型。基本上，在我的 Web 应用程序中，用户将从下拉列表中选择：活动、非活动、潜在客户或暂停。我想要做的是测试这个功能，并让我的方法在我运行测试时随机选择一个值。

如果有意义的话，我很难将该方法引用到代码中的字符串值。任何帮助都会很棒，如果您需要更多信息，请告诉我！

这是我到目前为止所拥有的：

```
 public void RandomStatusTypes()
     {
         List<string> statusTypes = new List<string> { "ACTIVE", "INACTIVE", "PROSPECT", "SUSPENDED" };
         Random randStatus = new Random();
         int index = randStatus.Next(0, 6);
         string value = statusTypes[index];
     } 
```

该代码将有一行说`StatusTyp = _Status,`，希望我可以为该值分配一个随机状态，因此每次我运行程序时它都会随机选择一个值。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:59:39.567

也许：

```
private static List<string> StatusTypes = new List<string>(){ "ACTIVE", "INACTIVE", "PROSPECT", "SUSPENDED" };
private static Random randStatus = new Random();

public string RandomStatusTypes()
{
    int index = randStatus.Next(0, StatusTypes.Count);
    return StatusTypes[index];
} 
```

不要在方法本身中创建随机实例。否则，当方法调用非常快（循环中的fe）时，您将创建相同的状态。您应该使用一个字段（如上所示）或将随机数作为参数传递给该方法。

我也将列表移到了方法之外，因为当它没有改变时总是创建它是无效的。最后，我曾经`StatusTypes.Count`确保您始终使用有效范围，即使您将来会更改列表（fe 添加新状态）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:56:49.403

如果您只是对从 DropdownList 中选择一个值感兴趣，您应该随机更改该`SelectedIndex`属性：

```
 Random randStatus = new Random();
 public void RandomStatusTypes()
 {
          ddlStatus.SelectedIndex = randStatus.Next(ddlStatus.Items.Count);
 } 
```

这将随机更改为下拉列表中的任何值。请注意它的用途`ddlStatus.Items.Count`，因此如果您添加或删除项目，您将不必修改此代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:04:32.077

首先，您需要从该方法返回一个索引（void = 它不返回任何内容）以用作`selected value`您的`DropDownList`.

```
public int RandomStatusTypes()
 {
     List<string> statusTypes = new List<string> { "ACTIVE", "INACTIVE", "PROSPECT", "SUSPENDED" };
     Random randStatus = new Random();
     return randStatus.Next(0, statusTypes.Count);
 } 
```

之后，您可以在这样的地方调用该方法

```
 var statusForDropDown= RandomStatusTypes(); 
```

并分配`statusForDropDown`给您的`DropDownList`

```
 MyDropDownList.SelectedIndex=statusForDropDown; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T13:59:56.533

如果您需要 DropdownList 的随机值，则应将该`SelectedIndex`属性设置为随机数

```
 public void RandomStatusTypes()
     {
         List<string> statusTypes = new List<string> { "ACTIVE", "INACTIVE", "PROSPECT", "SUSPENDED" };
         Random randStatus = new Random();
         dropList.Items.AddRange(statusTypes);
         dropList.SelectedIndex = randStatus.Next(0, 3);
     } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T14:02:32.077

试试这个`function`从`returns a random item`过去的`myList`

```
public string RandomListItem(List<string> myList)
{
    int randNo = new Random().Next(0, myList.Count());
    return myList[randNo];
} 
```

# mysql - 两个表的sql求和

> ID：14688155
> 
> 赞同：0
> 
> 时间：2013-02-04T13:49:45.760
> 
> 标签：mysql, sql, database, sum

**我需要一些基本 sql 的帮助...** 问题是：在第一个表中，我有

```
ID (primary key) 
data column (varchar) 
```

其中包含产品，在其他我有

```
ID (primary) 
second ID (foreign key) //references to ID from first table
price (decimal 8,2) 
```

我需要的是从第二个表中求和与第一个表中的产品相对应的价格。它也应该保存为视图。 *有什么帮助吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:51:06.157

`JOIN`这两个表，`GROUP BY`以及一个像这样的聚合函数`SUM`：

```
CREATE VIEW DataPrices
AS
    SELECT 
      p.id,
      p.data,
      SUM(t.price) 
    FROM products p
    INNER JOIN secondtable t ON p.ID = t.ForeignKeyToTable1
    GROUP BY p.Id, p.data; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:52:39.903

```
select table1.id, table1.data, sum(table2.price) as `total`
from   table1 inner join table2  
         on table1.id = table2.foreignkeyId
group  by table1.id, table1.data 
```

# ruby-on-rails - 在 Spree 中将图像分配给资产

> ID：14688159
> 
> 赞同：2
> 
> 时间：2013-02-04T13:49:54.557
> 
> 标签：ruby-on-rails, spree, assign

如果我手动创建图像并分配产品。它在控制台中运行良好：

```
p = Spree::Product.first
i = Spree::Image.create!(<create info>)

p.images << i

p.save! 
```

当我尝试在程序中运行它时。它什么也没做。它运行就像`p.images << i`从未运行过一样。

我尝试搜索，但不知道如何很好地搜索 <<。

**更新**

如果我添加到程序中：

```
p = Spree::Product.first
i = Spree::Image.create!(<create info>)

i = Spree::Image.find(i.id) #this line

p.images << i

p.save! 
```

这很好用，但我不明白这里发生了什么。

先谢谢了！贾斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T01:33:19.490

所以这在 ORM 中很常见。

> collection<< 方法通过将一个或多个对象的外键设置为调用模型的主键来将一个或多个对象添加到集合中。

根据 Rails 教程： http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

如果您转到该页面，您可以按 ctrl+f 并搜索：<<

这将为您提供大量有关此的信息。

另外我会推荐一个更多的来源。我更喜欢这个 ORM 的文档：http: [//datamapper.org/docs/associations.html](http://datamapper.org/docs/associations.html)

它不是活动记录，但非常相似。对我来说，使用 datamapper 帮助我更好地掌握了活动记录。

希望有帮助。

# antlr - ANTLR：修复左递归和相互左递归

> ID：14688162
> 
> 赞同：2
> 
> 时间：2013-02-04T13:49:57.913
> 
> 标签：antlr, mutual-recursion, left-recursion

这是我正在研究的语法的一部分，用于开发一个解析器工具，这对我的研究很重要。它在 ANTLR IDE 下给我一个错误在 eclipse 中说`paraction, action, cspaction`是相互左递归的。

我已经在网上扫描了一个解决方案，但不知道我该怎么做。由于这种语言是研究领域的标准，我没有改变语言语义细节的先决条件。

```
paraction : action | decl '\circspot' paraction;
action : schemaexp | command | INDEX | cspaction | action '['INDEX+ ':=' exp+']';

cspaction   : 'Skip'|'Stop'|'Chaos'|comm '\circthen' action | pred '&' action
        |action ';' action | action '\extchoice' action | action '\intchoice' action
        |action '\lpar' nsexp | csexp | nsexp '\rpar' action
        |action '\lpar' nsexp | nsexp '\rpar' action
        |action '\\' csexp | paraction '('exp+')' | '\circmu' INDEX '\circspot' action
        | ';' decl '\circspot' action | 'extchoice' decl '\circspot' action 
        | '\intchoice' decl '\circspot' action
        | '\lpar' csexp '\rpar' decl '\circspot' '\lpar' nsexp '\rpar' '\circspot' action 
        | '\interleave' decl '\circspot' '\lpar' nsexp '\rpar' action; 
```

我实际上正在尝试为“Circus”创建一个语法文件，它是一种状态丰富的形式建模语言，它结合了一种称为 Z 的规范语言和一种称为 CSP（通信顺序过程）的过程建模语言，所以是的，这是一个现有语言。由于正在开发中的语言，它现在在学术界使用。我有该语言的 EBNF，我正在尝试将 EBNF 翻译成 ANTLR 中的语法。我已经设法使以下两条规则起作用。但`cspaction`似乎很难。

```
paraction : (decl '\circspot' (paraction)+ | action)  ;
action  : ((schemaexp | command | N | cspaction)('[' IDENT+ ':=' exp+']')?)* ; 
```

反斜杠是乳胶的一部分，现在可以省略，因为它们用作字符串。请在下面找到 Circus 的完整 EBNF。它来自已发表的论文，[马戏团的指称语义](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.105.7285&rep=rep1&type=pdf&ei=nVAQUezAI-TK0QXp6IDQDQ&usg=AFQjCNFh0FmjtBgrjRJAJLvLVXWdGbPZrw&bvm=bv.41867550,d.d2k)。

马戏团的完整 EBNF - [http://www.use.com/b1ad2df0609961615fff](http://www.use.com/b1ad2df0609961615fff)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:31:00.510

我建议您使用 ANTLR v4。ANTLR 的先前版本 v3 不支持左递归（既不间接也不直接）。但 ANTLR v4*确实*支持直接左递归。因此，在消除了间接左递归规则，并删除了产生式`ParAction`，也就是`(Decl '•')* Action`，我最终得到了以下语法：

```
grammar Circus;

// parser rules
program
 : circus_par* EOF
 ;

circus_par
 : par
 | CHANNEL cdecl
 | CHANSET n '==' csexp
 | proc_decl
 ;

cdecl
 : simple_cdecl (';' simple_cdecl)*
 ;

simple_cdecl
 : n+ ':' exp
 | n+
 | '[' n+ ']' n+ ':' exp
 | schema_exp
 ;

proc_decl
 : PROCESS n '[' n+ ']' '^=' proc_def
 | PROCESS n '^=' proc_def
 ;

proc_def
 : decl '•' proc_def
 | decl '⊙' proc_def
 | proc
 ;

proc
 : BEGIN ppar* STATE schema_exp ppar* '•' action END
 | proc ';' proc
 | proc '□' proc
 | proc '⊓' proc
 | proc '|[' csexp ']|' proc
 | proc '|||' proc
 | proc '\\' proc
 | '(' decl '•' proc_def ')' '(' exp+ ')'
 | n '(' exp+ ')'
 | '(' decl '⊙' proc_def ')' '⌊' exp+ '⌋'
 | n '⌊' exp+ '⌋'
 | proc '[' n+ ':=' n+ ']'
 | n '[' exp+ ']'
 | ';' decl '•' proc
 | '□' decl '•' proc
 | '⊓' decl '•' proc 
 ;

ppar
 : par
 | n '^=' (decl '•')* action
 | NAMESET n '==' nsexp
 ;     

action
 : schema_exp
 | command
 | n
 | action '[' n+ ':=' exp+ ']'
 | SKIP
 | STOP
 | CHAOS
 | comm '→' action
 | pred '&' action
 | action ';' action
 | action '□' action
 | action '⊓' action
 | action '[|' nsexp
 | csexp
 | nsexp ']|' action
 | action '||[' nsexp
 | nsexp ']||' action
 | action '\\' csexp
 | (decl '•')+ action '(' exp+ ')'  
 | action '(' exp+ ')'  
 | 'μ' n '•' action
 | ';' decl '•' action
 | '□' decl '•' action
 | '⊓' decl '•' 
 | '|[' csexp ']|' decl '•' '|[' nsexp ']|' '•' action
 | '|||' decl '•' '|[' nsexp ']|' action
 ;

comm
 : n '[' exp+ ']' cparameter*
 | n cparameter*
 ;

cparameter
 : '?' n ':' pred
 | '?' n
 | '!' exp
 | '.' exp
 ;

command
 : n+ ':=' exp+
 | IF gactions FI
 | n+ ':' '[' pred ',' pred ']'
 | '[' pred ']'
 | '{' pred '}'
 | VAR decl '•' action
 | VAL decl '•' action
 | RES decl '•' action
 | VRES decl '•' action
 ;

gactions
 : pred '→' action '□' gactions
 | pred '→' action
 ;

n
 : ZID
 ;

par : 'TODO';
decl : 'TODO';
nsexp : 'TODO';
exp : 'TODO';
csexp : 'TODO';
schema_exp : 'TODO';
pred : 'TODO';

// lexer rules
CHANNEL : 'channel';
CHANSET : 'chanset';
PROCESS : 'process';
BEGIN : 'begin';
END : 'end';
STATE : 'state';
NAMESET : 'nameset';
SKIP : 'Skip';
STOP : 'Stop';
CHAOS : 'Chaos';
IF : 'if';
FI : 'fi';
VAL : 'val';
VAR : 'var';
RES : 'res';    
VRES : 'vres';

ZID : [a-zA-Z]+; 
```

[这与您发布的链接](http://www.use.com/b1ad2df0609961615fff)非常相​​似。

像这样生成一个词法分析器和解析器：

```
java -cp antlr-4.0-complete.jar org.antlr.v4.Tool Circus.g4
```

请注意，如果要匹配文字反斜杠，则需要对其进行转义：

```
CIRCSPOT : '\\circspot'; 
```

# php - PHP MYSQL 数据获取问题

> ID：14688164
> 
> 赞同：0
> 
> 时间：2013-02-04T13:49:59.493
> 
> 标签：php, mysql, sql

我在从 SQL 中获取数据时遇到了一些问题。

当我使用以下语句时，它工作正常

```
$sql = 'SELECT `Name`, `Des`, `Url`, `about`, `date` FROM `data` where name = \'facebook\''; 
$retval = mysql_query( $sql, $conn ); 
```

当我使用参数名称时，我遇到了一些问题，我使用的代码是

```
$name = $_GET['name'];
$sql = 'SELECT `Name`, `Des`, `Url`, `about`, `date` FROM `data` where name = \'$name''; 
$retval = mysql_query( $sql, $conn ); 
```

我也尝试通过连接名称，如`\'facebook\'`

```
$name1 = "\'".$name . " \'";  but it is also not working . 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:52:32.707

使用`Double quotes`所以你不需要任何单引号的转义。

```
$sql = "SELECT  Name, Des, Url, about, date
        FROM    data 
        where   name = '$name'"; 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:54:09.493

使用 Mysqli 而不是 Mysql。

您的查询的解决方案：

```
$name = $_GET['name']; 
$sql = "SELECT Name, Des, Url, about, date FROM data where name = '".mysql_real_escape_string($name)."'";
$retval = mysql_query( $sql, $conn ); 
```

# actionscript-3 - HttpService 错误 #2096

> ID：14688165
> 
> 赞同：0
> 
> 时间：2013-02-04T13:50:04.253
> 
> 标签：actionscript-3, apache-flex, http-headers, httpservice

我编写了一个 Httpservice 来从服务器获取数据，但是当我尝试运行该服务时，它得到了错误（#2096）。下面是我的代码：

```
package 
```

{

```
import flash.net.URLRequestHeader;

import mx.collections.ArrayCollection;
import mx.controls.Alert;
import mx.messaging.AbstractConsumer;
import mx.rpc.events.FaultEvent;
import mx.rpc.events.ResultEvent;
import mx.rpc.http.HTTPService;

public class JSONDataLoader
{

    private var httpService:HTTPService;

    private var errVO:ErrVO;
    [Bindable]
    public var errAC:ArrayCollection = new ArrayCollection();

    [Bindable]
    public var errStr:String;

    public function JSONDataLoader(url:String)
    {
        httpService = new HTTPService();
        httpService.url = url;
        httpService.method = "POST";
        httpService.contentType = "application/json";

        var headerParams:Object = new Object();

        headerParams["Host"] = "192.168.11.59:3333";
        headerParams["Content-Length"] = 347;

        httpService.headers = headerParams;

        var parameters:Object = new Object();
        parameters["FromDate"] = "01-01-2013 18:30";
        parameters["Location"] = "String content";
        parameters["LocationId"] = 2147483647;
        parameters["ReportId"] = 9223372036854775807;
        parameters["ReportName"] = "String content";
        parameters["Team"] = "17,22,30,1,40,53,55,69,70,73,77";
        parameters["TeamId"] = 2147483647;
        parameters["ToDate"] = "01-01-2013 18:30";

        httpService.send(parameters);
        httpService.addEventListener(ResultEvent.RESULT, resultHandler);
        httpService.addEventListener(FaultEvent.FAULT, faultHandler);
    }

    private function resultHandler(event:ResultEvent):void
    {
        var rawData:String = String(event.result);
        var obj:Object = JSON.parse(rawData);

        Alert.show("Data: " + rawData);
    }

    private function faultHandler(event:FaultEvent):void 
    {
        errStr = event.fault.faultString+" "+event.message;
        Alert.show("Error!!!" + errStr);

    }
} 
```

}

我在这里做什么。我的标头或请求正文是否有问题。

请帮助我，因为我在过去 2 天一直坚持这一点。

这是完整的错误消息...

错误！！！错误#2096 (mx.messaging.messages::HTTPRequestMessage)#0 body = (Object)#1 FromDate = "01-01-2013 18:30" Location = "String content" LocationId = 2147483647 ReportId = 9223372036854776000 ReportName = "字符串内容" Team = "17,22,30,1,40,53,55,69,70,73,77" TeamId = 2147483647 ToDate = "01-01-2013 18:30" clientId = (null ) contentType = "application/json" destination = "DefaultHTTP" headers = (Object)#2 DSEndpoint = "direct_http_channel" httpHeaders = (Object)#3 Content-Length = 347 Host = "192.168.11.59:3333" messageId = "C130487E -0EBA-375E-E71D-A580EFE175EE" 方法 = "POST" recordHeaders = false 时间戳 = 0 timeToLive = 0 url = "我的 url"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-12T08:45:44.347

您可能需要检查参数的内容是否包含非法字符，例如“<”或“>”。用 '& lt;' 替换它们 或'>' （不带空格）可以解决问题。

HttpService 发送或接收包含这两个标记的字符串时可能会发生错误。

使用 URLRequest 将是一个更好的选择，因为它不会出现这个问题。

# sql - 如何创建 oracle 程序以将数据导出到历史表中？

> ID：14688166
> 
> 赞同：2
> 
> 时间：2013-02-04T13:50:12.343
> 
> 标签：sql, oracle, plsql

在 Oracle 数据库中，我们创建了 22 个物化视图，并创建了一个过程来刷新所有这些 MV。22 个物化视图全部刷新成功。

在每个月的最后一天，我们想刷新物化视图并将数据复制到历史表中。这些历史表具有相同的结构以及另外三个包含数据复制日期以及数据所代表的月份和年份的列。

*   `copy_date`将是`sysdate`数据复制到历史表的时间
*   `month`并将`year`传递给存储过程。

例如，如果我在 1 月底忘记刷新并记得在 2 月 4 日

*   `copy_date`: 2月4日
*   'month' 和 'year' 是：FEB 和 2012

报告团队将使用这些列来过滤数据以进行分析。

示例：表 A

```
study country state
abc    india    ap
bcd    china    xx 
```

我需要一个将数据复制到历史表的过程，例如：

```
month year copy_date     study  country state
jan   2013 01-01-2013    abc    india   ap 
```

当我运行此过程时，我想输入`month`和`year`参数的值（在本例中为 jan 和 2013）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:09:20.557

首先，我不确定您为什么要费心传入`month`and`year`参数，而不是简单地从`sysdate`. 在您的示例中，无论您在 1 月 30 日还是 2 月 4 日复制数据`month`，`year`都基于当前。`sysdate`

一种选择是

```
CREATE OR REPLACE PROCEDURE copy_a( p_month IN VARCHAR2, p_year IN NUMBER )
AS
BEGIN
  INSERT INTO a_history( month, year, copy_date, study, country, state )
    SELECT p_month, p_year, sysdate, study, country, state
      FROM a;
END; 
```

您还可以使用动态 SQL 来避免创建 22 个单独的存储过程。如果历史表始终将`month`、`year`和`copy_date`作为前三列，并且其余列的顺序与基表完全相同

```
CREATE OR REPLACE PROCEDURE copy_table( p_table_name IN VARCHAR2, 
                                        p_month IN VARCHAR2, 
                                        p_year IN NUMBER )
AS
  l_sql_stmt VARCHAR2(10000);
BEGIN
  l_sql_stmt := 'INSERT INTO ' || p_table_name || '_hist ' ||
                ' SELECT :mnth, :yr, sysdate, a.* ' ||
                '   FROM ' || p_table_name;
  EXECUTE IMMEDIATE l_sql_stmt 
    USING p_month, p_year;
END; 
```

# c++ - 如果我们从某个地址开始，我们如何确定变量在整个程序中占据的地址？

> ID：14688167
> 
> 赞同：-4
> 
> 时间：2013-02-04T13:50:16.600
> 
> 标签：c++, c

假设内存位置从地址 100 开始，请考虑：

```
int a;
struct{
    char b;
    struct{
        short *c[20];
        char d;
    }e;
}f;
double g;
char *h; 
```

我知道`a`地址为 100-103，但我无法确定当你有一个结构时会发生什么。我知道结构的起始地址是根据最大字段对齐的，并且整个结构的大小是最大字段的倍数，但是当两个结构如上所述嵌套时，我很难区分两者。另外，如果我们有一个指针，或者一个数字数组，`short *c[20]`我们如何确定这个声明占用的内存？如果有人可以解释每一行的地址布局，我将不胜感激。更重要的是，我希望能解释一下为什么以这种方式分配内存。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:55:53.517

没有真正的规则。这取决于编译器。您可以保证的只是 的地址`b`低于 的地址`e`，而 的地址`c`低于 的地址`d`。并且每个元素的第一个元素`struct`的地址与`struct`. 另一方面，对于任何结构之外的元素，都没有任何保证。编译器可以分配`a`, `f`,`g`和`h`以任何它喜欢的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:05:32.437

在 x86-16 位上：

```
int a;      // two bytes
struct{
    char b;    // One byte. 
    struct{     // Struct itself is aligned to the size of pointer
        short *c[20];    // pointers may be 2 or 4 bytes depending on compile mode. 
        char d;          // one byte
    }e;
}f;
double g;     // 8 bytes aligned to 8 bytes. 
char *h;    // 2 or 4 bytes. 
```

在 x86-32 位上：

```
int a;    // four bytes. 
struct{
    char b;   // one byte. 
    struct{   // struct padding to size of pointer. 
        short *c[20];  // pointers are 4 bytes. 
        char d;        // one byte. 
    }e;
}f;
double g;     // 8 bytes, aligned to 8 bytes. 
char *h;      // 4 bytes. 
```

在 x86-64 上：

```
int a;      // 4 bytes. 
struct{
    char b;  // One byte.
    struct{   // struct aligned to size of pointer
        short *c[20];   // Pointers are 4 or 8 bytes (typically 8)
        char d;   // One byte.
    }e;
}f;
double g;    // 8 bytes. Aligned to 8 bytes. 
char *h;     // 4 or 8 byte pointer, aligned to size of pointer. 
```

在其他一些架构中，这是完全有效的：

```
int a;      // 8 bytes
struct{
    char b;   // 4 bytes. 
    struct{   // Struct is not aligned to anything.
        short *c[20];  // Pointers are 8 bytes. 
        char d;       // 4 bytes
    }e;    
}f;
double g;  // 12 bytes, aligned to 4 bytes.  
char *h;   // pointers are 8 bytes. 
```

我会让您为每个示例进行数学运算，以计算实际地址是什么。但就像其他人所说的那样，布局完全取决于编译器，如果不了解特定编译器/处理器架构的规则，就无法确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:06:22.200

每个指针占用 32 位或 64 位，具体取决于您的平台。一个包含 20 个元素的数组的大小是一个此类元素的 20 倍，以此类推。

出于对齐原因，会占用额外的空格。内存通常可以同时读/写几个字节，只要它们在同一个字或双字中。字节 100-103 形成一个双字。下一个从 104 开始......所有这些都完全依赖于平台。在某些平台上，读取非字对齐地址中的字甚至是非法的。

# objective-c - Objective-C 与僵尸对象崩溃

> ID：14688179
> 
> 赞同：1
> 
> 时间：2013-02-04T13:50:54.320
> 
> 标签：objective-c, cocoa, automatic-ref-counting, gcdasyncsocket

我已经使用 GCDAsyncSocket 库在 Objective-c 中实现了 JSON-RPC（稍作修改）服务器/客户端。但应用程序在响应请求时崩溃。没有调试僵尸我得到这个错误：

```
JSONRPCTestServer(1301,0x7fff7f887960) malloc: *** error for object 0x10014db10: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug 
```

xcode 中的屏幕截图显示错误出现在 GCDAsyncSocket 库的 completeCurrentRead 方法中。 ![在此处输入图像描述](../Images/75a5d41786042f77c56ffd28d22eeac4.png)

在调试僵尸时，它会记录以下内容：

2013-02-04 14:36:16.430 JSONRPCTestServer[1367:603] *** -[__NSArrayI release]: 消息发送到释放的实例 0x1005b6fd0

仪器显示了这一点： ![仪器](../Images/360a2398e9ece152630e2936d90cedbd.png)

因为当对 rpc 调用的响应是 nsarray 类型时会发生这种情况，我猜它的这个数组是导致错误的。RPC 方法是：

```
-(NSArray *)testArray:(GCDAsyncSocket *)sock {
    return [NSArray arrayWithObjects:@"test1",@"test2", nil];
} 
```

JSON-RPC 标头是：

```
#import <Foundation/Foundation.h>

#import "JSONRPCMethod.h"
#import "JSONRPCResponse.h"
#import "JSONRPCError.h"
#import "JSONRPCArgument.h"
#import "JSONRPCRequest.h"
#import "GCDAsyncSocket.h"

@class GCDAsyncSocket;

@protocol JSONRPCResponseDelegate <NSObject>
@optional
-(void)rpcSocket:(GCDAsyncSocket*)sock returnedValue:(id)retVal forMethod:(NSString*)m id:(id)i;
-(void)rpcSocket:(GCDAsyncSocket*)sock returnedError:(JSONRPCError*)err forMethod:(NSString*)m id:(id)i;
-(void)rpcReturnedValue:(id)retVal forMethod:(NSString*)m id:(id)i;
-(void)rpcReturnedError:(JSONRPCError*)err forMethod:(NSString*)m id:(id)i;
@end

@interface JSONRPC : NSObject {
    NSMutableArray *supportedMethods;

    GCDAsyncSocket *mainSocket;
    NSMutableArray *connectedSockets;

    NSMutableArray *responseDelegates;
    BOOL isServer;
}

+(JSONRPC*)sharedConnection;

-(BOOL)startServer:(NSUInteger)port;
-(BOOL)connectToServer:(NSString*)host port:(NSUInteger)port;

-(BOOL)addMethod:(JSONRPCMethod*)method;
-(void)removeMethod:(JSONRPCMethod*)method;
-(void)removeMethodsWithTarget:(id)target;

-(void)sendRequest:(JSONRPCRequest*)req toSocket:(GCDAsyncSocket*)sock;
-(void)sendRequest:(JSONRPCRequest*)req;

-(void)sendNotification:(JSONRPCRequest*)req toSocket:(GCDAsyncSocket*)sock;
-(void)sendNotification:(JSONRPCRequest*)req;
-(void)sendNotification:(JSONRPCRequest*)req toSocketsWithUserData:(id)userData;

@end 
```

.m 是：

```
#import "JSONRPC.h"
#import "GCDAsyncSocket.h"

#define kGeneralReadTimeout -1.0
#define kGeneralWriteTimeout -1.0

@implementation JSONRPC

- (id)init
{
    self = [super init];
    if (self) {
        isServer = NO;
        supportedMethods = [[NSMutableArray alloc] init];
        mainSocket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];
        connectedSockets = [[NSMutableArray alloc] init];
        responseDelegates = [[NSMutableArray alloc] init];
    }
    return self;
}

+ (JSONRPC *)sharedConnection {
    static JSONRPC *sharedSingleton;

    @synchronized(self)
    {
        if (!sharedSingleton)
            sharedSingleton = [[JSONRPC alloc] init];

        return sharedSingleton;
    }
}

-(BOOL)startServer:(NSUInteger)port {
    // Now we tell the socket to accept incoming connections.
    // We don't care what port it listens on, so we pass zero for the port number.
    // This allows the operating system to automatically assign us an available port.
    isServer = YES;
    NSError *err = nil;
    if ([mainSocket acceptOnPort:port error:&err]) {

    } else {
        DDLogError(@"Error while starting JSON-RPC Server: %@",err);
        return NO;
    }

    DDLogInfo(@"Started JSON-RPC Server on port %hu",[mainSocket localPort]);
    return YES;
}

-(BOOL)connectToServer:(NSString *)host port:(NSUInteger)port {
    NSError *err = nil;
    mainSocket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];
    [mainSocket connectToHost:host onPort:port error:&err];
    if(err != nil) {
        DDLogError(@"Couldn't connect to host %@:%lu (Error: %@)",host,port,err);
        return NO;
    }
    return YES;
}

-(BOOL)addMethod:(JSONRPCMethod *)method {
    for (JSONRPCMethod *meth in supportedMethods) {
        if([meth.name isEqualToString:method.name]) {
            return NO;
        }
    }
    [supportedMethods addObject:method];
    return YES;
}

-(void)removeMethod:(JSONRPCMethod *)method {
    [supportedMethods removeObject:method];
}

-(void)removeMethodsWithTarget:(id)target {
    NSMutableArray *toRemove = [[NSMutableArray alloc] init];
    for (JSONRPCMethod *meth in supportedMethods) {
        if(meth.target == target) {
            [toRemove addObject:meth];
        }
    }
    [supportedMethods removeObjectsInArray:toRemove];
}

-(void)sendRequest:(JSONRPCRequest *)req toSocket:(GCDAsyncSocket*)sock {
    [responseDelegates addObject:req];
    [req setIdentifier:[NSNumber numberWithUnsignedInteger:[responseDelegates count]-1]];
    [self sendPackage:[req dictionary] toSocket:sock];
}

-(void)sendRequest:(JSONRPCRequest *)req {
    [self sendRequest:req toSocket:mainSocket];
}

-(void)sendNotification:(JSONRPCRequest *)req toSocket:(GCDAsyncSocket*)sock{
    [req setIdentifier:nil];
    [self sendPackage:[req dictionary] toSocket:sock];
}

-(void)sendNotification:(JSONRPCRequest *)req {
    [self sendNotification:req toSocket:mainSocket];
}

-(void)sendNotification:(JSONRPCRequest *)req toSocketsWithUserData:(id)userData {
    NSMutableArray *matchingSockets = [[NSMutableArray alloc] init];
    for (GCDAsyncSocket*sock in connectedSockets) {
        if(sock.userData == userData) {
            [matchingSockets addObject:sock];
        }
    }
    if(matchingSockets.count == 0)
        return;

    [req setIdentifier:nil];
    NSData *pkgData = [self writableDataFromDictionary:[req dictionary]];
    for (GCDAsyncSocket*sock in matchingSockets) {
        [sock writeData:pkgData withTimeout:kGeneralWriteTimeout tag:0];
    }
}

#pragma mark Socket Delegate

- (void)socket:(GCDAsyncSocket *)sock didAcceptNewSocket:(GCDAsyncSocket *)newSocket {
    [connectedSockets addObject:newSocket];
    [newSocket readDataToData:[GCDAsyncSocket ZeroData] withTimeout:kGeneralReadTimeout tag:0];
}

- (void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port {
    DDLogVerbose(@"socket:didConnectToHost:%@ port:%hu", host, port);
    [sock readDataToData:[GCDAsyncSocket ZeroData] withTimeout:kGeneralReadTimeout tag:0];
}

- (void)socketDidDisconnect:(GCDAsyncSocket *)sock withError:(NSError *)err {
    DDLogVerbose(@"socketDidDisconnect:%@", err);
    if(isServer)
        [connectedSockets removeObject:sock];
}

-(void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag {
    // So, we've received something from the client
    // As we have to cut out the last 0x00 for JSONSerialization it has to be longer than 1 byte
    if(data.length > 1) {
        // Shorten out that 0x00
        data = [data subdataWithRange:NSMakeRange(0, data.length-1)];
        // Try to serialize
        NSError *err;
        NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:data options:0 error:&err];
        DDLogVerbose(@"Dict: %@",dict);
        if(err != nil) {
            // The package isn't json
            JSONRPCResponse *response = [JSONRPCResponse responseWithError:[JSONRPCError invalidRequest]];
            [self sendPackage:[response dictionary] toSocket:sock];
        } else {
            JSONRPCResponse *response = [self handleDictionary:dict fromSocket:sock];
            if(response != nil) {
                [self sendPackage:[response dictionary] toSocket:sock];
            }
        }
    }
    [sock readDataToData:[GCDAsyncSocket ZeroData] withTimeout:kGeneralReadTimeout tag:0];
}

-(JSONRPCResponse*)handleDictionary:(NSDictionary*)dict fromSocket:(GCDAsyncSocket*)sock {
    // Check if the "id" is of a correct value/type
    id identifier = [dict valueForKey:@"id"];
    if(!(identifier == nil || [identifier isKindOfClass:[NSNumber class]])) {
        return [JSONRPCResponse responseWithError:[JSONRPCError invalidRequest]];
    }

    // Handle the package
    NSString *methodName = [dict valueForKey:@"method"];
    id errorValue = [dict valueForKey:@"error"];
    id resultValue = [dict valueForKey:@"result"];
    if([methodName isKindOfClass:[NSString class]]) {
        // We have a string as method
        DDLogInfo(@"Method: %@, object: %@",methodName,[dict valueForKey:@"params"]);
        for (JSONRPCMethod *method in supportedMethods) {
            if([method.name isEqualToString:methodName]) {
                id result = nil;
                if(isServer == YES) {
                    // It is a server and the method needs to know from where the call comes
                    result = [method invoke:[dict valueForKey:@"params"] fromSocket:sock];
                } else {
                    // It is a client and we don't need to know where the call is from. it can only be the server.
                    result = [method invoke:[dict valueForKey:@"params"]];
                }
                if([result isKindOfClass:[JSONRPCError class]]) {
                    return [JSONRPCResponse responseWithError:result id:identifier];
                } else if(result != nil) {
                    return [JSONRPCResponse responseWithResult:result id:identifier];
                } else {
                    return nil;
                }
            }
        }
    } else if(resultValue != nil) {
        // We have a response from our partner
        //DDLogInfo(@"Result: %@",resultValue);
        NSUInteger responseDelegateId = [identifier unsignedIntegerValue];
        if(responseDelegateId < [responseDelegates count]) {
            JSONRPCRequest *originalRequest = [responseDelegates objectAtIndex:responseDelegateId];
            if(originalRequest.sender == nil) {
                return nil;
            }
            @try {
                SEL selector;
                if(isServer) {
                    selector = @selector(rpcSocket:returnedValue:forMethod:id:);
                } else {
                    selector = @selector(rpcReturnedValue:forMethod:id:);
                }
                NSMethodSignature *signature = [originalRequest.sender methodSignatureForSelector:selector];
                NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];
                [invocation setTarget:originalRequest.sender];
                [invocation setSelector:selector];
                NSUInteger startArg = 2;
                if(isServer) {
                    [invocation setArgument:&sock atIndex:startArg];
                    startArg++;
                }
                NSString *method = [originalRequest method];
                id orgId = [originalRequest identifier];
                [invocation setArgument:&resultValue atIndex:startArg];
                [invocation setArgument:&method atIndex:startArg+1];
                [invocation setArgument:&orgId atIndex:startArg+2];
                [invocation invoke];
            }
            @catch (NSException *exception) {
                DDLogWarn(@"Couldn't find a response: %@",exception);
            }
        }
    } else if(errorValue != nil) {
        // We have a string as method
        DDLogInfo(@"Error: %@",errorValue);
    } else {
        return [JSONRPCResponse responseWithError:[JSONRPCError invalidRequest] id:identifier];
    }
    return nil;
}

-(void)sendPackage:(NSDictionary *)dict toSocket:(GCDAsyncSocket *)sock {
    NSData *answerData = [self writableDataFromDictionary:dict];
    [sock writeData:answerData withTimeout:kGeneralWriteTimeout tag:0];
}

-(NSData*)writableDataFromDictionary:(NSDictionary*)dict {
    NSMutableData *answerData = [[NSMutableData alloc] init];
    // Serialize the answer
    NSError *err = nil;
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dict options:0 error:&err];
    if(err != nil) {
        // Log
        DDLogError(@"JSON-RPC had an internal error while converting the answer to JSON. The answer-dictionary is: %@",dict);
        // Form answer manually
        jsonData = [NSData dataWithBytes:"{\"error\":{\"code\":-32700,\"message\":\"Parse error\"}}"
                                  length:49];
    }
    // Format the answer
    [answerData appendData:jsonData];
    [answerData appendData:[GCDAsyncSocket ZeroData]];
    return answerData;
} 
```

我只是不知道如何解决这个问题。为什么我总是收到一个 nsarray 错误，但是当我返回一个 nsnumber 时它可以工作？我怎样才能解决这个问题？

# ajax - 使用 jsonp 时跨域 ajax 的安全问题

> ID：14688180
> 
> 赞同：0
> 
> 时间：2013-02-04T13:50:56.857
> 
> 标签：ajax, security, jsonp

我正在将 JSONP 用于跨域 ajax。它完美地工作。我的疑问是，使用 jsonp 时是否存在任何安全问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:19:33.660

**编辑** 刚刚看到已经有同样的问题：（[JSONP 可以安全使用吗？](https://stackoverflow.com/questions/613962/is-jsonp-safe-to-use)）

那么你需要记住，如果你使用'jsonp'，任何外部站点也可以调用这个脚本并得到你响应的结果。

当操作或响应以某种方式限制为用户登录时，就会出现安全问题。例如，如果您仅在用户登录时返回某些信息

如果您只有在用户登录时才发送给客户端的信息，或者如果只有在用户登录时才允许某些操作，那么它就是。因此，如果用户登录并浏览到另一个页面，理论上该页面可以为该用户执行 jsonp 请求。

# asp.net - 最佳工具：asp.net 应用程序的分布式负载测试

> ID：14688190
> 
> 赞同：0
> 
> 时间：2013-02-04T13:51:40.937
> 
> 标签：asp.net, .net, testing, load-testing

我们想要一个用于分布式场景的高性能测试工具

我们希望从客户端和服务器收集数据（内存使用情况、cpu 使用情况、响应时间、.net 调用等）。

我们的大多数应用程序都使用 .Net 4.0 或 Classic Asp。

我们有 4 台服务器。我们希望 1 个控制器和 3 个代理一起工作以进行测试、收集数据。

这种情况下最好的工具是什么？

ps：我们试过Visual Studio 2012 Ultimate，看起来很有希望。我不知道其他适合该场景的工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:20:34.247

看看[Rational Performance Tester](http://www-01.ibm.com/software/awdtools/tester/performance/workflow.html)。我正要为我们的一个项目购买许可证，但由于与软件无关的原因没有通过。当时看起来很有希望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:37:46.880

我会把事情分开来保持简单。

首先，我会检查使用服务器生成负载时每秒的平均请求数。为此，Apache Http Server 中包含一个名为`ab.exe`. 很容易设置生成请求。

如果您认为您获得了可接受的响应时间，那么一切都很好。

如果没有，请在从一台服务器生成负载时使用类似 Jetbrains DotTrace（在您的应用程序中）来收集数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T18:36:50.783

试试负载测试器：[http](http://www.webperformance.com/load-testing/) ://www.webperformance.com/load-testing/ （免责声明：我在那里工作）。它有一个监控代理，将在您的 Windows 服务器上运行，以收集您提到的指标等等。它还收集客户端指标，例如页面加载时间。LITE 版本是免费的，可以对无限用户运行简单的测试。

# winforms - Visual Studio 2010 项目 - 无法调整相对路径

> ID：14688194
> 
> 赞同：1
> 
> 时间：2013-02-04T13:52:02.737
> 
> 标签：winforms, visual-studio-2010, relative-path

我有一个`Windows Forms`项目。我有一个`Resources`文件夹，我想使用相对路径使用那里的文件。这是我的项目树的打印屏幕

![在此处输入图像描述](../Images/73a5e7e6baafd76b73c32e89060b176c.png)

如您所见，我有一个文件夹`UserControls`，其中`FileExplorer.cs`包含 aa `openFileDialog`+ `pictureBox`。`Forms`我在文件夹中的一些表单中使用此控件。情况是，在`Resources`文件夹中我有这个`T380.jpg`图像，我想默认加载，但现在我只能通过插入完整路径来完成它。这是我尝试加载图像的代码：

```
 private void FileExplorer_Load(object sender, EventArgs e)
        {
            pictureBox1.ImageLocation = @"ShoesUnlimitedAdmin\Resources\T380.jpg";
            pictureBox1.Load();
        } 
```

我使用`Load`用户控件的事件来加载我的图像，但它仅在我设置图像的完整路径时才有效`C:\\...`，等等。如何`Resources`使用相对路径指向项目的文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:13:23.317

如果这些图像很小，那么倾向于将它们作为资源添加到可执行文件中，这样您就可以在代码中使用 Properties.Resources 而不必在用户的机器上部署文件。使用项目 + 属性、资源。单击“添加资源”按钮上的箭头并选择添加现有文件。

如果它们很大（超过几兆字节），那么您确实希望将它们部署为单独的文件。您可以使用 EXE 程序的位置找到它们，这是一个帮助方法，为了清楚起见，拼写出来：

```
 public static string GetResourcePath(string filename) {
        string exepath = System.Reflection.Assembly.GetEntryAssembly().Location;
        string exedir = System.IO.Path.GetDirectoryName(exepath);
        string resdir = System.IO.Path.Combine(exedir, "Resources");
        return System.IO.Path.Combine(resdir, filename);
    } 
```

# jsf-2 - liferay ：此页面调用以前缀 c 声明的 xml 命名空间 http://java.sun.com//jstl/core 但该命名空间不存在标记库

> ID：14688195
> 
> 赞同：0
> 
> 时间：2013-02-04T13:52:05.040
> 
> 标签：jsf-2, liferay

我正在使用 JSF 项目作为 liferay 中的 portlet。
在这里，我的页面包括模板和`viewScoped`托管 bean，并且我的页面还`<ui:include>`使用`<ui:composition>`.

我没有使用核心库，但是当我将 portlet 添加到 liferay 时，门户页面中会显示警告，此页面调用`http://java.sun.com//jstl/core`使用前缀声明的xml 命名空间，`c`但该命名空间不存在标记库。

# ios6 - ios 6 emojis 源图像

> ID：14688196
> 
> 赞同：0
> 
> 时间：2013-02-04T13:52:05.223
> 
> 标签：ios6

那么，我在哪里可以下载表情符号图标？说，我想在我的桌面应用程序中使用它们？不太关心编码，我只需要图标。

我浏览了很多网站，但我只能看到它们的截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:12:05.637

在 iOS 和 Mac OS X 上，图标是一种字体，而不是单个图像。

# c# - Ninject NamedScope 条件绑定

> ID：14688198
> 
> 赞同：2
> 
> 时间：2013-02-04T13:52:13.153
> 
> 标签：c#, .net, dependency-injection, ninject, ninject-extensions

我正在尝试对我是否在命名范围内进行条件绑定。

我的接口 ILogger - 使用 Ninject Logger 扩展的默认行为，我们将特定类型的记录器实现注入到每个类中。但是，在系统的一部分中，我们需要一个范围范围的记录器实例，它是在 NamedScope 的生命周期内生成和处置的......

目前（基本上）我们有这个：

```
Bind<IEventViewModel>().To<EventViewModel>().DefinesNamedScope("Event").Named("Event");
Bind<IEventChild>().To<EventChild>().InNamedScope("Event");
Bind<Ninject.Extensions.Logging.ILogger>().To<EventWideLogger>().WhenAnyAnchestorNamed("Event").InEventScope(); 
```

但是，我真正想要的是：

```
Bind<IEventViewModel>().To<EventViewModel>().DefinesNamedScope("Event");
Bind<IEventChild>().To<EventChild>().InNamedScope("Event");
Bind<Ninject.Extensions.Logging.ILogger>().To<EventWideLogger>().WhenInNamedScope("Event").InEventScope(); 
```

因为这将允许更改事件范围定义对象并保持相同的行为。

我试过这个但无济于事：

```
public static class WhenEx
{
    public static IBindingInNamedWithOrOnSyntax<T> WhenInNamedScoped<T>(this IBindingWhenSyntax<T> binding, string scopeName)
    {
        return binding.When(req => req.IsInNamedScope(scopeName));
    }

    public static bool IsInNamedScope(this IRequest req, string scopeName)
    {
        if (req.ParentContext != null && req.ParentContext.Parameters.OfType<NamedScopeParameter>().SingleOrDefault(parameter => parameter.Name == scopeName) != null)
            return true;

        return req.ParentRequest != null && req.ParentRequest.IsInNamedScope(scopeName);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:06:41.757

在提示从 Remo 重试（谢谢）之后，我在初始帖子中描述的代码确实有效：

```
Bind<IEventViewModel>().To<EventViewModel>().DefinesNamedScope("Event");
Bind<IEventChild>().To<EventChild>().InNamedScope("Event");
Bind<Ninject.Extensions.Logging.ILogger>().To<EventWideLogger>().WhenInNamedScope("Event").InNamedScope("Event");

public static class WhenEx
{
    public static IBindingInNamedWithOrOnSyntax<T> WhenInNamedScoped<T>(this IBindingWhenSyntax<T> binding, string scopeName)
    {
        return binding.When(req => req.IsInNamedScope(scopeName));
    }

    public static bool IsInNamedScope(this IRequest req, string scopeName)
    {
        if (req.ParentContext != null && req.ParentContext.Parameters.OfType<NamedScopeParameter>().SingleOrDefault(parameter => parameter.Name == scopeName) != null)
            return true;

        return req.ParentRequest != null && req.ParentRequest.IsInNamedScope(scopeName);
    }
} 
```

# python - 从架构的角度来看，这个例子有什么问题

> ID：14688201
> 
> 赞同：-1
> 
> 时间：2013-02-04T13:52:20.747
> 
> 标签：python

从架构的角度来看，这个例子可能有什么问题：

```
class Base(object):
    def say_hello(self):
        self.hello()

class Child1(Base):
    def hello(self):
        print 'Hello child 1'

class Child2(Base):
    def hello(self):
        print 'Hello child 2'

c = Child1()
c.say_hello() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:54:49.437

唯一的问题`say_hello`是没有意义：你应该放弃它，`hello()`直接使用。 `say_hello`没有给你任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:54:57.037

基类没有`hello`方法；可能导致`say_hello`破裂。不需要`hello`在子类中实现，但话又说回来：Python 不会介意你在脚下开枪，那只是你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:55:07.257

`Child2`已过时-您从不调用它，`Base`隐式引用子函数，并且`say_hello`是多余的-除了 call 之外，它什么也不做`hello`。

另外-您要求SO为您回答面试问题，这可能被认为是不好的形式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T16:24:57.417

假设这只是一个简化的示例，该方法没有任何问题。此外，它还有一个名字：[模板方法](http://en.wikipedia.org/wiki/Template_method_pattern)。

# r - 使用自定义颜色、图例等在 ggplot 中绘制多个数据系列的正确方法

> ID：14688204
> 
> 赞同：1
> 
> 时间：2013-02-04T13:52:31.197
> 
> 标签：r, ggplot2

我想逐步构建一个包含多个不同长度的数据系列的图。我的目标是能够控制每个数据系列的外观，给它们自定义名称并拥有适当的图例。我的数据系列有不同的长度，所以我不能把它们放在一个数据框中。在下面的代码中，我预计有 4 行：最短的是红色，接下来的分别是蓝色、绿色和黑色

```
 library(ggplot2)
    set.seed(12345)
    plt <- ggplot()
    colors <- c('red', 'blue', 'green', 'black')
    for(i in seq(length(colors))) { 
      x <- seq(1, 2*i)
      y <- x * i + rnorm(length(x))
      df <- data.frame(x=x, y=y)
      plt <- plt +  geom_point(aes(x, y), data=df, color=colors[i]) + 
        geom_line(aes(x, y), data=df, color=colors[i]) 
    }
    print(plt) 
```

这就是我得到的。 ![我的阴谋](../Images/4969669db36a22bab9fff78e2c02a81b.png)

如何给线条命名并显示图例？有没有更好的方法来实现我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:02:53.203

这样做的方法是创建一个*长格式*的单个数据框：

像这样：

```
library(ggplot2)
set.seed(12345)
colors <- c('red', 'blue', 'green', 'black')
dat <- lapply(seq_along(colors), function(i){
  x <- seq(1, 2*i)
  data.frame(
    series = colors[i],
    x = x,
    y = x * i + rnorm(length(x))
  )}
)
dat <- do.call(rbind, dat) 
```

现在情节

```
ggplot(dat, aes(x, y, color=series)) + geom_line() 
```

![在此处输入图像描述](../Images/64ebaf5575776d0d5002dc75dc39da88.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T14:03:04.940

您不必`for-loop`在构建数据后每次都使用 a 和 plot ，因为它们的长度不等。这就是为什么`ggplot2`很棒！您可以`group`为每个数据集创建一个。您可以将线命名为您想要的任何名称，`group`就像它会出现在图例中一样（当然，您也可以在图例中直接更改它，稍后，如果您愿意）。这就是我认为你所期望的：

```
set.seed(12345)
require(ggplot2)
require(plyr)
# to group your data. change the letters to whatever you want to appear as legend
line_names <- letters[1:4]
# Use plyr to create your x and y for each i and add the group.
dat <- ldply(1:length(colors), function(i) {
    x <- seq(1, 2*i)
    y <- x * i + rnorm(length(x))
    data.frame(x=x, y=y, grp=line_names[i])
})

# just plot here.
ggplot(data = dat, aes(x=x, y=y)) + geom_line(aes(colour=grp)) + geom_point() 
```

![ggplot2_multiple_lines](../Images/59559fe1b3759fa912dd4df253d9fee1.png)

# python - 将函数的结果复制为类变量或多次调用 Python

> ID：14688206
> 
> 赞同：0
> 
> 时间：2013-02-04T13:52:35.317
> 
> 标签：python, class

我正在编写一个类，它多次使用几个非成员函数（所有返回列表）的结果。

我想知道处理这个问题的标准方法是什么——我最初的想法是写一些类似的东西：

```
class Y_and_Z_matrices(object):
    def __init__(self, roots_p, roots):
        self.deltas = deltas(roots)
        self.deltas_p = deltas(roots_p)
        self.thetas = thetas(roots)
        self.thetas_p = thetas_p(roots_p)
        self.epsilons = epsilons(roots)
        self.epsilons_p = epsilons(roots_p)

    def _func_a (self, roots_p, roots, param):
        #refers to the member variables

    def _func_b (self, roots_p, roots, param):
        #refers to the member variables

    def Ymatrix(self, roots_p, roots):
        #refers to the member variables

    def Zmatrix(self, roots_p, roots):
        #refers to member variables 
```

我认为只调用一次而不是多次调用函数会更快，但是由于`deltas`,`thetas`和`epsilons`函数都很小，我不确定它是否重要。

现在我想知道在这种情况下python是如何工作的，这是否比`deltas`在我将使用它们的每个函数中调用函数更好？保存列表`roots`并引用它们而不是将它们传递给许多函数会更好吗？

即重写上述内容的（缺点）优点是什么：

```
class Y_and_Z_matrices(object):
    def __init__ (self, roots_p, roots, param):
        self.roots_p = roots_p
        self.roots = roots
        self.param = param

    def _func_a (self):
        #uses 'roots_p', 'roots', and 'param' member variables
        #passes 'roots' and 'roots_p' to 'deltas', 'epsilons' and 'thetas' when needed

    def _func_b (self):
        #uses 'roots_p', 'roots', and 'param' member variables
        #passes 'roots' and 'roots_p' to 'deltas', 'epsilons' and 'thetas' when needed

    def Ymatrix(self):
        #uses 'roots_p', and 'roots' member variables
        #passes 'roots' and 'roots_p' to 'deltas', 'epsilons' and 'thetas' when needed

    def Zmatrix(self):
        #uses 'roots_p', and 'roots' member variables
        #passes 'roots' and 'roots_p' to 'deltas', 'epsilons' and 'thetas' when needed 
```

我想以第二种方式编写类，但唯一的原因是因为我喜欢具有尽可能小的参数列表的函数的外观，而且我不喜欢我的`__init__`函数看起来如此笨拙。

总结一下这个问题：-

将函数的返回值保存为成员变量而不是在多个成员函数中调用函数，客观上是更好还是更差？

保存参数（在整个类中都是相同的）或使用所需参数调用函数客观上是更好还是更差？

或者

只是在某个地方（如果有，在哪里）有一个权衡吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:58:31.657

Python3 的最新版本对此有一个很好的解决方案：`functools`' [`lru_cache`](http://docs.python.org/3.2/library/functools.html). 这个装饰器允许你让 Python 记住对特定参数组合的函数调用的结果（这假设如果使用相同的参数，所述函数的结果将是相同的）。

# cloudbees - CloudBees 中特定于环境的全局配置参数 run@cloud

> ID：14688209
> 
> 赞同：1
> 
> 时间：2013-02-04T13:52:45.673
> 
> 标签：cloudbees, paas

可以使用命令设置全局配置参数`bees config:set -ac account`，但是否也可以通过某种方式告诉全局参数是指哪个环境？

例如，我有 2 个环境，生产和演示。我想将所有应用程序部署到生产环境的数据库 URI 参数设置为相同，并为演示环境设置另一个值。我当然可以为每个应用程序单独设置参数，但是我有很多应用程序，最好只设置一次，因为对于部署在相同环境的所有应用程序，它是相同的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:14:12.513

我倾向于将不同的环境作为不同的应用程序——这意味着我可以让它们全部运行（这意味着在我部署时自然会应用不同的环境设置）。

模式的另一个想法（我没有使用过） - 在您引用环境特定的环境变量/系统属性的地方，您使用另一个 var 的前缀，即环境名称。

例如

```
DB = System.getProperty(System.getProperty("ENV_NAME") + "_DB"); 
```

因此，您可以拥有遵循以下模式的环境变量/属性：

```
bees config:set -ac blah PROD_DB=<url here>
bees config:set -ac blah DEV_DB=<url here>
bees config:set -ac blah ENV_NAME=DEV #this is the default 
```

然后为应用程序设置特定环境：

```
bees config:set -a appId ENV_NAME=PROD 
```

因此，无论您将 ENV_NAME 设置为什么，都意味着它会选择适用的“一组”变量。

只是一个想法（虽然从未使用过）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:13:59.737

配置参数是每个应用程序 ID，而不是每个帐户，因此您无法为所有应用程序设置一次。需要配置：设置您已部署的所有应用程序

# computational-geometry - 查找区域内的格点数

> ID：14688210
> 
> 赞同：1
> 
> 时间：2013-02-04T13:52:52.397
> 
> 标签：computational-geometry, kdtree

给定二维平面中的一组点，如何找到位于任意三角形上或内部的点数。
一种方法是检查所有点是否位于给定三角形内。
但我读到 Kd-tree 可用于在 O(log n) 时间内找到位于区域内的点数，其中“n”是点数。但我不明白如何实现。
有没有其他更简单的方法可以做到这一点？
或者 kd-tree 会起作用吗？如果是这样，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:26:30.417

可以通过递归检查三角形的子分区位置来完成。要查看树节点的哪些点在三角形中，请检查每个节点分区（kd 树中有 2 个）是否完整在三角形中，是否在三角形之外或是否与三角形相交。如果分区在三角形中，则将该分区中的点数添加到结果中，如果分区不在三角形中，则对该分区不执行任何操作，如果分区与三角形相交，则对该分区的子分区进行相同的检查。

为此，每个树节点都必须在其子树中存储点数，这在树的创建中很容易做到。

运行时间取决于三角形边与分区边界相交的数量。我不确定是不是`O(log n)`最坏的情况。

# css - 使用 HTML5 文档类型时忽略 CSS 文件

> ID：14688218
> 
> 赞同：3
> 
> 时间：2013-02-04T13:53:19.413
> 
> 标签：css, html, jsp

我有一个 HTML 页面，它使用 CSS 和 JavaScript 在调整浏览器窗口大小时将页面内容居中放在浏览器中间。

当我使用标准的 HTML5 Doctype 声明时，所有浏览器都会完全忽略我的 CSS 文件。我不知道为什么。当我删除 HTML5 Doctype 时，它​​们又可以正常工作了。该页面在 Chrome、FF 和 IE 中显示相同（错误）。都错了。

这是页面的开头：

```
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="/stylesheet-mobile.jsp" >
    <link rel="stylesheet" type="text/css" href="/stylesheet-mobile-frontpage.jsp" >

    <meta name="viewport" content="width=device-width" />
    <script src="/javascript/jquery/jquery-1.8.3.min.js"></script>
    <script src="/javascript/resize-fit.jsp"></script>
    <link rel="shortcut icon"  href="/favicon.ico" />
</head> 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T13:54:12.750

您确定要为这些文件发送正确的内容类型标头吗？我看到您正在使用 Java 生成 CSS。如果没有正确的内容类型，浏览器可能无法理解或尊重它们。

```
Content-type: text/css 
```

# android - Android中的应用程序CPU使用率很高？

> ID：14688222
> 
> 赞同：2
> 
> 时间：2013-02-04T13:53:41.967
> 
> 标签：android, performance

在应用程序中，CPU 使用率达到 10 到 20%，然后应用程序将太慢，在我的应用程序中，完全使用 JSON 进程从服务器获取数据。如何减少 CPU 使用率。任何知道的请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:58:26.547

您可以使用很少的工具来分析您的应用程序，以了解哪些方法的执行成本最高。

看看这篇文章：

[http://developer.android.com/tools/debugging/debugging-tracing.html](http://developer.android.com/tools/debugging/debugging-tracing.html)
[http://www.curious-creature.org/2012/12/01/android-performance-case-study/](http://www.curious-creature.org/2012/12/01/android-performance-case-study/)

# android - 为什么在屏幕底部对齐标签不是好的设计

> ID：14688223
> 
> 赞同：1
> 
> 时间：2013-02-04T13:53:47.470
> 
> 标签：android, android-tabhost, android-tabs

我知道我们可以通过顶部对齐或底部对齐来方便地放置标签。但是当我阅读 developer.android.com 时。横向导航的培训部分强调了标签不应该在底部使用的事实屏幕。但我没有找到任何理由让他们坚持不使用底部的标签。任何人都可以解释我吗？

[你可以在这里找到这篇文章](http://developer.android.com/training/design-navigation/descendant-lateral.html)

您可以在段落末尾找到图 5 下面的行。

提前感谢您关注问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:01:37.253

1.  **一致性**：它在大多数应用程序中处于顶部
2.  **可用性**：如果您使用眼动仪，您会看到用户从上到下阅读页面。如果选项卡位于顶部，则更容易找到。
3.  **选项菜单**：底部已经有一个[选项菜单。](http://developer.android.com/guide/topics/ui/menus.html#options-menu)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T13:58:05.710

这很简单，都是关于 UserInterface 概念（那里有很多，android 有自己的：http: [//developer.android.com/guide/practices/ui_guidelines/index.html](http://developer.android.com/guide/practices/ui_guidelines/index.html)）。其中之一是“**一致性**”——我们用户期望标签（尤其是在 android 中，但也在浏览器中）位于顶部，这就是他们应该留在那里的原因。

用户界面也有一些“著名的”规则。例如，一组来自 Shneidermann：[http ://faculty.washington.edu/jtenenbg/courses/360/f04/sessions/schneidermanGoldenRules.html](http://faculty.washington.edu/jtenenbg/courses/360/f04/sessions/schneidermanGoldenRules.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:59:54.027

我不是专家，但我认为这只是一个惯例问题。用户可能希望标签位于页面顶部。这类似于将文件菜单放在菜单栏的最右侧而不是左侧。

# java - 如何使用非常精确的浮点值初始化 BigDecimal

> ID：14688227
> 
> 赞同：2
> 
> 时间：2013-02-04T13:54:09.457
> 
> 标签：java

我有一个 Decimal(19,5) 大小的数据库列，我想要一个 Java 中的 BigDecimal 来存储值但是如果我写

```
 BigDecimal(999999999999999.9999); 
```

该值四舍五入为 1+E15，这是我不希望的，所以我怎样才能获得数字的完整精度。

我知道的一种方法是使用

```
BigDecimal("999999999999999.9999"); 
```

我认为应该有更好的选择来指定精度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T13:56:22.983

您需要使用带有 a 的构造函数，`String`因为`double`常量的值在到达 的构造函数之前就已被编译器四舍五入`BigDecimal`。换句话说，编译器会看到您的`999999999999999.9999`常量，并将其转换为`double`. 该`double`类型没有足够的精度来存储所有的九，因此该值被四舍五入为`1+E15`，这就是传递给`BigDecimal`的构造函数的值。在程序开始执行它的第一条指令之前，精度就消失了。

另一方面，当你传递一个字符串时，你`BigDecimal`可以解释九的序列，确保你得到你需要的精确度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T13:56:48.657

您必须在此处使用的主要原因`BigDecimal`是该值不适合 double 类型。double 值在传递给 的构造函数时会被四舍五入`BigDecimal`，所以无论你做什么都无法恢复原始值，如果你只传递一个 double。所以你没有更好的选择——`BigDecimal`像你一样使用。

# f# - F# - 纯函数式设计而不是 oop 设计

> ID：14688232
> 
> 赞同：2
> 
> 时间：2013-02-04T13:54:43.247
> 
> 标签：f#, functional-programming, domain-driven-design

我想创建一个由三个代理组成的简单“多代理”系统。对于每个代理，都会创建一个封装邮箱处理器的类型。所有代理（位置、id 等）和功能（sendMessage、move）都有共同的属性，并且代理因邮箱处理器的实现（如何处理消息）而彼此不同。此外，它们可能因特定于特定代理的其他功能而有所不同。每个代理还应包含（作为其属性之一）其他代理的列表，它将向其发送消息。这是一个非常简单的模型，我计划在此基础上使用 F# 中的邮箱处理器。

在 OOP 中，这意味着创建一个代理接口（或抽象类），并且所有特定的代理都将从该接口继承并具有自己的实现。

我知道 OOP 在 F# 中是可能的，但我宁愿坚持纯函数式设计。但是，在我看来，在这种情况下，OOP 是最合适的方法。如果您能给我关于功能（F#）设计的任何想法，我会很高兴？谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-04T14:39:53.403

首先，F# 中的*函数式风格*和*面向对象的风格*并没有真正的冲突。

*   函数式风格包括使用不可变类型、没有副作用的纯函数和 F# 数据类型，如可区分联合、函数等。

*   面向对象的风格更侧重于如何组织代码（使用类和接口），但代码仍然可以是纯函数式的，而不使用任何可变状态。

在基于代理的系统中，在代理的实现中使用函数式风格是很有意义的，但使用类来组织代理。我认为这可能是 F# 中的最佳实践（另请参阅[这篇关于 MSDN 上封装 F# 代理的文章](http://msdn.microsoft.com/en-us/library/hh297127.aspx)）。

在您的示例中，您说代理保留了它向其发送消息的其他代理的列表。有一些替代方案值得考虑（如果你想避免接口）：

*   Expose an F# event (`Event<'T>`). This way, the agent simply exposes a notification and does not have to explicitly manage a list of other agents (and this design also allows other types of subscribers).

*   Keep a list of functions. If you just need to send messages to other agents, then you essentially need just an interface with a single method. In that case, you could keep a list of functions such as
    `Message -> unit`.

I generally prefer exposing events - this way, the system is less tightly coupled and you can more easily compose agents in various ways (they do not have to implement a specific interface to be composed). This article discusses [agent-based architectures from a higher-level perspective](http://www.developerfusion.com/article/140677/writing-concurrent-applications-using-f-agents/), and may be useful too.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T13:57:20.963

为什么要坚持纯功能设计？*F# 允许功能和*OOP 原则的干净组合，我将利用*这两种*机制并利用语言的力量。

如果你想结合功能和 OOP 方面，我会先让你的对象*不可变*。因此，您正在使用对象，但在功能范式中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T14:25:23.017

您提出了 OOD，OOP 解决方案似乎是最自然的，这是否令人惊讶？

如果您用流程和数据转换来重写设计描述，那么它自然会作为 FP 设计而失败，并且在具有许多类的 OO 中听起来真的很尴尬。事实上，对数据类型或需要进行哪些转换的描述几乎为零。乍一看，我会说代理是三个参数的函数：邮箱、消息处理程序（或消息处理程序列表）和要联系的其他代理邮箱列表。如果将来的调度基于消息，那么消息处理程序是两个参数的函数。邮件和邮箱列表。

# r - 标准化回归公式中的所有数值预测变量

> ID：14688235
> 
> 赞同：1
> 
> 时间：2013-02-04T07:46:52.043
> 
> 标签：r, regression

您如何仅标准化线性模型中的数值预测变量？

我知道我可以简单地缩放原始数值数据。但是，我想编写一个函数，该函数将`lm`对象作为参数并仅返回数值预测变量的标准化 beta 系数。

这是一个例子：

```
data(iris)
mod1 <- lm(Sepal.Length ~ Petal.Width, data = iris)
summary(mod1)
mod1.b <- update(mod1, scale(.) ~ scale(.))
summary(mod1.b) 
```

这没有问题。但是当我包含一个因素时，它会给出一条错误消息。

```
mod2 <- lm(Sepal.Length ~ Petal.Width + Species, data = iris)
summary(mod2)
mod2.b <- update(mod2, scale(.) ~ scale(.)) #Gives an error 
```

那么，如何仅缩放第二个示例中的数值预测变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:24:33.397

尝试更改 lm 对象的设计矩阵。例如，我们可以执行以下操作：

```
design.matrix <- mod2$model

numeric.columns <- design.matrix[,unlist(lapply(design.matrix,is.numeric))]
scaled.numeric.columns <- scale(numeric.columns) 
```

现在我们将 data.frame 中的数字列替换为比例列：

```
design.matrix[,unlist(lapply(design.matrix,is.numeric))] <- scaled.numeric.columns 
```

最后，更新 lm 对象：

```
mod2.b <- update(mod2, data = design.matrix) 
```

# c# - 进程 waitForExit() 不起作用

> ID：14688239
> 
> 赞同：-1
> 
> 时间：2013-02-04T13:54:56.973
> 
> 标签：c#, process, waitforexit

我有以下代码：

```
Process p = new Process();
p.StartInfo.FileName = Path.GetDirectoryName(Application.ExecutablePath) + "\\unRAR.exe";

p.StartInfo.Arguments = @"e c:\appData.rar c:\folderek\";

p.Start();
p.WaitForExit(9000); 
```

我希望在提取文件（`unRAR.exe`提取它们）后不要关闭窗口。`WaitForExit(9000)`似乎不起作用。我阅读了数十个网站，但仍然找不到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:03:05.653

[http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)阅读这篇文章告诉你，`WaitForExit()`不会让程序保持活动状态，它只是等待相关的程序退出。如果相关程序（此处为 unzip.exe）退出，您将*无法*阻止该`unzip.exe`程序退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:03:26.427

`Process.WaitForExit`使*您的*应用程序等待*其他*进程退出。它对启动的进程本身没有任何影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:07:39.213

尝试创建bat文件并在那里插入命令等待（使用命令超时或线程[睡眠中的其他解决方案在批处理文件中](https://stackoverflow.com/questions/166044/sleeping-in-a-batch-file)

并开始处理你的 bat 文件

# c# - Monotouch对话框多行元素高度没有增长

> ID：14688243
> 
> 赞同：2
> 
> 时间：2013-02-04T13:55:15.490
> 
> 标签：c#, ios, xamarin.ios, monotouch.dialog, xamarin.mobile

我有一个简单的自定义多行元素，我将其换行模式设置为自动换行，并将行属性设置为 7。我的文本似乎可以很好地换行，但单元格高度保持不变，因此文本扩展了单元格的边界. 我尝试增加单元格的框架并覆盖 GetHeight，但在这两种情况下似乎都不起作用。此外，似乎我的 GetHeight 甚至没有被调用。

有人面对类似的事情吗？或者关于问题可能是什么的任何想法？

```
public class DisclaimerMultilineElement : MultilineElement
{
    public DisclaimerMultilineElement (string caption) : base(caption)
    {
    }

    public DisclaimerMultilineElement (string caption, string value) : base(caption, value)
    {
    }

    public DisclaimerMultilineElement (string caption, NSAction tapped) : base(caption, tapped)
    {
    }

    public override float GetHeight (UITableView tableView, NSIndexPath indexPath)
    {
        var ht = base.GetHeight (tableView, indexPath);
        //return base.GetHeight (tableView, indexPath);
        return 400.0f;
    }

    public override UITableViewCell GetCell (MonoTouch.UIKit.UITableView tv)
    {
        UITableViewCell cell = base.GetCell (tv);
        var frame = cell.Frame;
        frame.Height = 300f;
        //cell.Frame = new System.Drawing.RectangleF(frame.X, frame.Y, frame.Width, frame.Height);
        cell.BackgroundColor = UIColor.Clear;
        cell.TextLabel.Font = UIFont.BoldSystemFontOfSize (12);
        cell.TextLabel.LineBreakMode = UILineBreakMode.WordWrap;
        cell.TextLabel.Lines = 7;
        cell.TextLabel.TextAlignment = UITextAlignment.Left;
        cell.TextLabel.Text = Value;
        return cell;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T14:21:11.807

确保在您的 Root 元素`UnevenRows`中设置为。`true`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T14:06:02.927

`GetHeightForRow`您需要覆盖`UITableViewSource`并返回适当的高度。

# ida - 解决间接 API 调用的 IDA Pro 脚本？

> ID：14688247
> 
> 赞同：1
> 
> 时间：2013-02-04T13:55:42.810
> 
> 标签：ida

通常，尤其是在处理恶意软件文件时，您最终会遇到所有 API 在运行时在给定缓冲区内动态解析的情况，这种方法大大减慢了逆向过程（并使反编译器无用：（DWORD *） dword_123456(INT, UINT)()) 因为分析师必须运行恶意软件、解析 api 并在每个 api 调用旁边手动添加注释。我找到了间接调用插件，但它似乎只适用于“标准”C++ 方法。是否有任何脚本或我不知道的功能能够修补可执行文件，即使在调试期间，以便用他们的真实姓名调用 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:41:56.377

在IDA 安装目录的文件夹中，有一个名为`renimp.idc`IDA的脚本。`idc`只需在运行时附加 IDA（在恶意软件分析的情况下，您可能最好使用远程调试器），导航到解包器创建的 API 地址表并选择所有条目。然后运行上述脚本。它将重命名所有指向它指向的正确 API 的指针，因此 IDA 的类型库能够再次从它的内部数据库中为它解析正确的 typedef。

# php - AJAX 加载 url 但没有哈希

> ID：14688253
> 
> 赞同：2
> 
> 时间：2013-02-04T13:56:09.677
> 
> 标签：php, ajax, hash

现在我已经设置了我的网站，以便每个页面的 url 就像[http://www.tri-peoria.org/#Schedule](http://www.tri-peoria.org/#Schedule)或[http://www.tri-peoria.org/#JoinUs](http://www.tri-peoria.org/#JoinUs)这样我就可以使用 AJAX 加载器更改页面而不重新加载标题。我如何让我的网址在没有哈希的情况下工作，以便它们看起来像[http://www.tri-peoria.org/Schedule](http://www.tri-peoria.org/Schedule)或[http://www.tri-peoria.org/JoinUs](http://www.tri-peoria.org/JoinUs)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:58:29.893

您可以使用历史 API 来实现这一点，假设您在服务器上正确处理了所有这些 url（意思是，它们都转到同一个页面）。

看`history.pushState()` `.replaceState()`和`.popState()`

[https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

（请注意，这在 IE9 或更低版本中不起作用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:59:23.950

使用`history.pushState`方法。有一些支持问题，所以我建议你使用像[https://github.com/browserstate/History.js/](https://github.com/browserstate/History.js/)这样的库。

# ruby-on-rails-3.2 - Ruby On Rails 路由错误 - 没有路由匹配

> ID：14688255
> 
> 赞同：0
> 
> 时间：2013-02-04T13:56:11.523
> 
> 标签：ruby-on-rails-3.2, rails-routing

我知道以前有很多相同标题的问题，但我无法找到适合我情况的答案。

网址：`http:// localhost:3000/user/register`

错误：`No route matches {:action=>"about", :controller=>"user"}`

日志：

```
Processing by UserController#index as HTML
Rendered user/index.html.erb within layouts/application (12.0ms)
Completed 500 Internal Server Error in 82ms

ActionController::RoutingError (No route matches {:action=>"about", :controller=>"user"}):
app/views/layouts/application.html.erb:14:in `_app_views_layouts_application_html_erb__379156404_34959024' 
```

我的路线：

```
Sample::Application.routes.draw do
  root :to => "site#index"

  get "site/index"

  get "site/about"

  get "site/help"

  get "user/index"

  get "user/register" => "user#register" 
```

红宝石版本：`ruby 1.9.3p125 (2012-02-16) [i386-mingw32]`

导轨版本：`Rails 3.2.11`

请帮我解决这个路由问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:10:44.157

不应该这样`get "user/register" => "users#register"`吗？控制器通常是复数。

# forms - Yii 单选按钮问题

> ID：14688256
> 
> 赞同：1
> 
> 时间：2013-02-04T13:56:11.793
> 
> 标签：forms, yii, radio-button

我使用 Yii 生成单选按钮，代码看起来像

```
 <span class="gender">
       <?php echo CHtml::activeRadioButton($model,'gender',array('value' => 'male')); ?>
    </span>

  <span class="gender">
       <?php echo CHtml::activeRadioButton($model,'gender',array('value' => 'female')); ?>
  </span> 
```

它会生成下一个 HTML 代码

```
 <span class="gender">
<input id="ytweb\models\register_gender" type="hidden" value="0" name="web\models\register[gender]">

<input value="male" class="male" name="web\models\register[gender]"id="web\models\register_gender" type="radio"></span>

<span class="gender">
<input id="ytweb\models\register_gender" type="hidden" value="0" name="web\models\register[gender]">

<input value="female" class="female" name="web\models\register[gender]" id="web\models\register_gender" type="radio">

</span> 
```

当我从这个表格中得到 POST 时，如果我检查女性，它返回女性，但如果我检查男性，它返回 0。我认为这是因为相同的输入 ID。但是我该如何避免呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T14:28:50.093

您可以配置`activeRadioButton`为不输出带有 value 的“保护输入” `0`。通过将参数`'uncheckValue' => null`作为选项数组的一部分传递来执行此操作：

```
echo CHtml::activeRadioButton($model,'gender',
    array('value' => 'male', 'uncheckValue' => null));
echo CHtml::activeRadioButton($model,'gender',
   array('value' => 'female', 'uncheckValue' => null)); 
```

也就是说，使用[`activeRadioButtonList`](http://www.yiiframework.com/doc/api/1.1/CHtml#activeRadioButtonList-detail)是这里的最佳选择。您可以配置其`template`参数以指定您的自定义 HTML：

```
$genders = array('male' => 'male', 'female' => 'female');
$options = array(
    'template'     => '<span class="gender">{input</span>',
    'uncheckValue' => null,
);
echo CHtml::activeRadioButtonList($model, 'genger', $genders, $options); 
```

# javascript - 转换在数组 javascript 中接收到的字符串

> ID：14688261
> 
> 赞同：1
> 
> 时间：2013-02-04T13:56:24.230
> 
> 标签：javascript, arrays, string, converter

> **可能重复：**
> [如何在 JavaScript 中解析 JSON](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)

我得到一个这样的字符串

```
 [["1","Pagamento de Placa","N","N"], ["2,""Contrato","N","N"], ["3","Ajuste de preço","N","N"],["4", "Abertura de cliente","N","N"], ["9","Outros","N","S"]] 
```

我试试

```
 var arr = new Array([["1","Pagamento de Placa","N","N"], ["2,""Contrato","N","N"], ["3","Ajuste de preço","N","N"],["4", "Abertura de cliente","N","N"], ["9","Outros","N","S"]]); 
```

但不工作

我想变成一个真正的数组，知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T13:58:14.773

使用[JSON.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)：

```
var arrayString = '[["1","Pagamento de Placa","N","N"], ["2,"Contrato","N","N"], ["3","Ajuste de preço","N","N"],["4", "Abertura de cliente","N","N"], ["9","Outros","N","S"]]';
var array = JSON.parse(arrayString); 
```

`"`（原始字符串中有重复项- 我将其删除。）

如果您需要支持旧版浏览器，请使用[json2.js](https://github.com/douglascrockford/JSON-js)或[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)之类的库。

# java - 我想从 Groovy Script 启动我的 Spring Application Context

> ID：14688262
> 
> 赞同：0
> 
> 时间：2013-02-04T13:56:30.357
> 
> 标签：java, spring, groovy

我有一个用 Java 实现并运行的稳定应用程序。这个 java 应用程序使用 Spring Context，在我的另一个项目中，我必须使用 Groovy Script 启动这个 java 应用程序。但是 Java 应用程序中的 Spring XML 使用如下环境变量

```
<util:properties id="props" location="file:${external.config.dir}/$[ext.errors.file]"/> 
```

我不想用这个更改来更新我的 java 应用程序。

**如何将环境变量传递给 Groovy Script 并正确启动 Spring Context？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:07:34.993

您是否尝试过使用 JAVA_OPTS？据我所知，groovy 将它们传递给 JVM。也可以`-D...`直接在命令行传递。

# neo4j - Cypher：有没有可能在我的朋友后面找到令人毛骨悚然的人？

> ID：14688263
> 
> 赞同：0
> 
> 时间：2013-02-04T13:56:41.153
> 
> 标签：neo4j, cypher

假设我已将自己本地的 Twitter 图拉到 Neo4J 中。我想找到更多关注我朋友的人，这应该是预期的。更具体地说，我想找到关注我关注的人的人，但我希望对结果进行排序，以便将关注我朋友数量最多的人排在第一位。在 Cypher 中可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T14:35:25.707

这是一个控制台示例：

[http://console.neo4j.org/r/p36cgj](http://console.neo4j.org/r/p36cgj)

```
create (me {n:"a"}), (fo1 {n:"fo1"}), (fo2 {n:"fo2"}), (fo3 {n:"fo3"}), (fr1 {n:"fr1"}),
(fr2 {n:"fr2"}), (fr3 {n:"fr3"}),
fo1-[:follows]->me, fo2-[:follows]->me, fo3-[:follows]->me, me-[:follows]->fr1, 
me-[:follows]->fr2, me-[:follows]->fr3, fo1-[:follows]->fr1, fo2-[:follows]->fr2, 
fo1-[:follows]->fr2, fo1-[:follows]->fr3;

start me=node:node_auto_index(n="me") 
match me-[:follows]->friends<-[:follows]-follower-[:follows]->me 
return follower, count(friends) as creepinessFactor, length(me-[:follows]->()) as countIFollow 
order by creepinessFactor desc; 
```

我很想知道结果，顺便说一句。:P

你也可以投个`where`赞：

```
where not(me-[:follows]->follower) 
```

为了避免在你的圈子里结交朋友。

# php - 订购课程的最佳方式是什么？

> ID：14688266
> 
> 赞同：0
> 
> 时间：2013-02-04T13:57:01.813
> 
> 标签：php, class

我有一个大项目，所以我创建了这些类：

*   形式
*   会员
*   消息

现在我有一个包含文件，它调用每个类并启动这些类，如下所示：

```
require_once('forms.php');
require_once('members.php');
require_once('messages.php');

$forms = new forms();
$members = new members();
$messages = new messages(); 
```

在每个类中都有另一个类需要像成员类作为示例：

```
class members() {
      function __construct()
    {
        global $forms;

        $this->forms =  $forms;
    }
    { function list that use $this->forms... }
} 
```

有没有更好的方法可以将“表单”类设为全局或其他？因为在每个类文件中，我都会调用一些全局类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:14:08.930

一步步 ：

# 加载：

```
require_once('forms.php');
require_once('members.php');
require_once('messages.php'); 
```

应该由一个自动加载脚本来处理`spl_autoload_register`：

```
spl_autoload_register(function($class){ require($class.'.php');}); 
```

一个*非常*好的做法是尊重`PSR-0`规范并`composer`用作自动加载器。要被允许使用`PSR-0`，请确保您至少拥有 PHP 5.3

## 什么是 PSR-0？

PHPFIG 建议制作可以轻松包含在每个 php 框架中的标准模块。它列出了要遵循的规则列表，以确保您的代码可以以标准方式自动加载。因此，您将使用与目录架构同步的命名空间。

Composer 是一个强大的工具，它依赖于 PSR-0 来自动加载你的类。更重要的是，它能够创建一个依赖树来加载每个尊重 PSR-0 的组件，例如每个 Symfony2 包都可以独立于 Symfony 本身加载，你只需要加载包所依赖的 Symfony 组件（例如 HTTPFundation或 YamlComponent）。如果您的项目依赖于 Symfony Yaml 组件，则在名为`composer.json`您的配置文件中`require`添加

```
'Symfony\Component\Yaml': *; 
```

每次你使用`php composer.phar update`它都会得到它的最新版本并将它包含到你的项目中。

# 关于依赖和循环：

永远不要使用全局！维护是一种痛苦。它只能用于绝望的情况。对于您的，您可以通过将分配分成两部分来打破构造循环：

```
class members() {
  function __construct($forms)
    {

        $this->forms =  $forms;
        $form->setMembers($this);// here is the trick
    }

}

class forms(){
   public function __construct($members = null){
        $this->members = $members;
   }
   public function setMembers(Members $m){
         $this->members = $members;
   }
 } 
```

# url - 域名注册

> ID：14688271
> 
> 赞同：3
> 
> 时间：2013-02-04T13:57:19.233
> 
> 标签：url, web, dns

如何在没有主机的情况下仅注册域名（**.com）。对我来说也很重要，因为我拥有所有权利。谁能告诉我注册域名的网站或廉价主机的域名谁是合法的，谁会在我的名字上注册域名？我知道一些注册域名的网站，但我将如何确定会在我的名字上注册域名。

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T14:01:06.517

这种公司/网站称为`domain name registrar`.

使用`namecheap.com`，**您**将成为该域名的所有者。不是主机或其他任何人。网络托管只是可选的。

**免责声明：**我不为 namecheap.com 工作，我只是碰巧喜欢他们的服务和定价。

# java - 将文件（.zip、.jar、...）下载到文件夹

> ID：14688274
> 
> 赞同：0
> 
> 时间：2013-02-04T13:57:28.153
> 
> 标签：java, file, url, file-io, download

我一直在尝试多种从 URL 下载文件并将其放入文件夹的方法。

```
public static void saveFile(String fileName,String fileUrl) throws MalformedURLException, IOException {
FileUtils.copyURLToFile(new URL(fileUrl), new File(fileName));
}

boolean success = (new File("File")).mkdirs();
if (!success) {
Status.setText("Failed");
}
    try {
        saveFile("DownloadedFileName", "ADirectDownloadLinkForAFile");
    } catch (MalformedURLException ex) {
        Status.setText("MalformedURLException");
        Logger.getLogger(DownloadFile.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException ex) {
        Status.setText("IOException Error");
        Logger.getLogger(DownloadFile.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

我在网上找到了这段代码，我是否正确使用它？

如果我这样做了： saveFile("FolderName", "ADirectDownloadLinkForAFile")

我会收到`IOException`错误

我想要我的代码做的是：

1.  创建文件夹
2.  下载文件
3.  下载的文件转到刚刚创建的文件夹

我是这里的新手对不起。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:02:20.833

Java 中有多种方法可以从 Internet 下载文件。最简单的一种是使用缓冲区和流：

```
File theDir = new File("new folder");

  // if the directory does not exist, create it
  if (!theDir.exists())
  {
    System.out.println("creating directory: " + directoryName);
    boolean result = theDir.mkdir();  
    if(result){    
       System.out.println("DIR created");  
     }

  }
FileOutputStream out = new FileOutputStream(new File(theDir.getAbsolutePath() +"filename"));
BufferedInputStream in = new BufferedInputStream(new URL("URLtoYourFIle").openStream());
byte data[] = new byte[1024];
int count;
        while((count = in.read(data,0,1024)) != -1)
        {
            out.write(data, 0, count);
        } 
```

只是基本概念。不要忘记关闭流；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:01:25.733

该`File.mkdirs()`语句似乎正在创建一个名为 的文件夹`Files`，但该`saveFile()`方法似乎没有使用它，只是将文件保存在当前目录中。

# cookies - 打开 X 托管安装错误

> ID：14688275
> 
> 赞同：1
> 
> 时间：2013-02-04T13:57:30.177
> 
> 标签：cookies, openx

我想知道在安装 Open X 托管之前是否有人遇到过这个问题。错误读取，

> 您的网络服务器配置不符合 OpenX 的要求。

接着

> 浏览器 cookie：您需要启用 cookie 才能使用 OpenX

问题是我的浏览器中启用了 cookie。以前没有遇到过这个问题，Open X 文档在这个特定情况下非常糟糕。

你能帮我吗？

# python - 将 python 模块导入 XBMC 以在插件中使用

> ID：14688278
> 
> 赞同：1
> 
> 时间：2013-02-04T13:57:38.580
> 
> 标签：python, add-on, xbmc

我正在尝试将 python 模块 requests 导入 XBMC。

我从 github 下载了模块的 zip，并将 requests 文件夹放入我的 XBMC 插件的 resources/lib 文件夹中。

然后我将文件夹重命名为 script.module.requests 并将导入请求添加到我的 addon.py 顶部

我在 XBMC.log 中不断收到名为 requests 的无模块错误。

在这方面，我完全是个菜鸟。

请帮忙！

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:36:00.620

首先，`import requests`当您的文件夹被调用`script.module.requests`时将不匹配

其次，您可能需要将**init**控制文件添加到资源和 lib 文件夹，以便脚本可以找到模块（并执行 a `import resources.lib.requests`）或将文件夹添加到您的路径，如下所示：

`sys.path.append (xbmc.translatePath( os.path.join( os.getcwd(), 'resources', 'lib' ) ))`

第三，有这个包：[https](https://github.com/beenje/script.module.requests) ://github.com/beenje/script.module.requests然后你只需将它添加到你的 addon.xml 文件中的 requires 部分，但是，我也对 XBMC 如何感到困惑如果用户尚未安装包，会找到它...

# php - 如何匹配这些数字？

> ID：14688279
> 
> 赞同：0
> 
> 时间：2013-02-04T13:57:40.213
> 
> 标签：php, regex

我有一个数字数组，例如：

10001234
10002345

现在我有一个数字，它应该与数组中的所有数字相匹配。例如，该数字可以是 10001234（这很容易匹配），但也可以是 100001234（4 个零而不是 3）或 101234（一个零而不是 3）。任何组合都是可能的。唯一固定的部分是最后的1234。

我无法获得最后 4 个字符，因为它也可以是 3 或 5 或 6 ...，例如 1000123456。

有什么好的方法来匹配它？也许它很容易，我看不到树木的木材：D。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:03:34.950

如果总是第一个数字是一个，你可以使用这个

```
$Num=1000436346;
echo(int)ltrim($Num."","1"); 
```

输出：

```
436346 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:02:11.943

```
$number % 10000 
```

将返回一个数字除以 10000 的余数。意思是最后四位数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:15:05.463

这个问题并没有使匹配的标准非常清楚。不过，我会试一试。

首先，我的假设：

*   该数字始终以 a 开头，`1`后跟未知数量的`0`s。

*   在那之后，我们有一个数字序列，可以是任何东西（但大概不是从零开始？），你想从字符串中提取？

鉴于上述情况，我们可以相当容易地制定一个表达式：

```
$input='10002345';
if(preg_match('/10+(\d+)/',$input,$matches)) {
     $output = $matches[1];
} 
```

`$output`现在包含数字的第二部分——即`2345`。

如果您需要匹配的不仅仅是一个前导`1`，您可以将表达式中的替换`\d`为匹配任何数字。并在其后添加一个加号以允许此处有多个数字（尽管我们仍然依赖于数字的第一部分和第二部分之间至少有一个零）。

```
$input='10002345';
if(preg_match('/\d+0+(\d+)/',$input,$matches)) {
     $output = $matches[1];
} 
```

# c - 如何在 c 中对公共数据成员/变量进行分组？

> ID：14688281
> 
> 赞同：0
> 
> 时间：2013-02-04T13:57:48.580
> 
> 标签：c, header, include

我正在用 C 编写代码，它具有以下基本结构：

A部分：主模块的启动/初始化，各个子模块的调用以及子模块结果的最终编译。

B 部分：子模块的实际执行。

```
Now, part A has its own main.c and main.h file
Part B has three modules: 
sub1.c/sub1.h
sub2.c/sub2.h
sub3.c/sub3.h 
```

子模块中有很多常用的变量和函数。我想要一个通用模块，可以在所有子模块中#included，并使用所有通用函数/变量。（common.c 和 common.h）

现在，对于通用函数，我可以在 common.h 中声明它们，然后在 common.c 中定义，然后它们可以直接在所有子模块中使用。但是有很多常见的数据变量/成员也是我想要“共同”出来的。

这样做最有效的方法是什么，以便我可以直接在所有子模块中使用它们？

在 c++ 中，它可以只添加到 common.h 中，然后可以与任何包含 common.h 的文件一起使用，但我相信它在 c 中有点不同。有人可以帮忙解释一下区别吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:31:23.480

**在 C 或 C++ 中：**

应该进入`.h`：

```
// declaration, means it's defined somewhere else
// can declare it as many times as you want
extern int yourVariable; 
```

每个想要使用变量的对象（如在编译过程中为 a `.c`or文件生成的中间文件`.cpp`，而不是 OOP 中的对象）都需要了解它（因此在某处有定义）。

应该进入`.c`/ `.cpp`：

```
int yourVariable = 3; // definition, should only define it once
int yourVariable2; // also a definition 
```

`extern`关键字对于函数是可选的。

```
int square(int num); // function declaration (.h)
extern int square(int num); // same as above
int square(int num) { return num*num; } // function definition (.c) 
```

**在 C++ 中：**

应该进入`.h`：

```
// this is a declaration
class yourClass
{
  int yourVariable;
} 
```

应该进入`.cpp`：

```
int yourClass::yourVariable = 3; 
```

我可能是错的，但我不知道 C 和 C++ 在这方面的区别（除了 C++ 有类）。

# c# - Clickonce 完全信任应用程序更新失败并在 Windows 8 上出现 TrustNotGrantedException

> ID：14688282
> 
> 赞同：9
> 
> 时间：2013-02-04T13:57:55.853
> 
> 标签：c#, .net, winforms, visual-studio, clickonce

我们在 C# 中有一个 winforms clickonce 应用程序，它被授予完全信任并使用有效证书签名。

该应用程序在 Windows XP、Windows 7 上运行良好并正确更新。但是，在 Windows 8 机器上，它只是无法更新。该应用程序运行正常。但是，第一个升级到更高版本的更新请求失败，并显示：`System.Deployment.Application.TrustNotGrantedException`

调用失败后代码`ApplicationDeployment::CheckForDetailedUpdate()`失败。想知道为什么会发生这种情况，因为完全相同的代码在所有以前的 Windows 版本上运行良好。任何帮助将不胜感激。以下是相关的堆栈跟踪：

```
System.Deployment.Application.TrustNotGrantedException: User has refused to grant required permissions to the application.
   at System.Deployment.Application.ApplicationTrust.RequestTrust(SubscriptionState subState, Boolean isShellVisible, Boolean isUpdate, ActivationContext actCtx, TrustManagerContext tmc)
   at System.Deployment.Application.DeploymentManager.DetermineTrustCore(Boolean blocking, TrustParams tp)
   at System.Deployment.Application.DeploymentManager.DetermineTrust(TrustParams trustParams)
   at System.Deployment.Application.ApplicationDeployment.CheckForDetailedUpdate(Boolean persistUpdateCheckResult)
   at System.Deployment.Application.ApplicationDeployment.CheckForDetailedUpdate() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-29T14:16:22.243

我唯一一次看到这个堆栈跟踪是当我尝试在`CheckForDetailedUpdate()`没有事先设置显式信任的情况下调用。添加下面的代码后，更新检查工作。

```
// Setup the trust level
var deployment = ApplicationDeployment.CurrentDeployment;
var appId = new ApplicationIdentity(deployment.UpdatedApplicationFullName);
var unrestrictedPerms = new PermissionSet(PermissionState.Unrestricted);
var appTrust = new ApplicationTrust(appId) {
    DefaultGrantSet = new PolicyStatement(unrestrictedPerms),
    IsApplicationTrustedToRun = true,
    Persist = true
};
ApplicationSecurityManager.UserApplicationTrusts.Add(appTrust);

// Check for update
var info = deployment.CheckForDetailedUpdate(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-15T01:46:42.580

从这个[MSDN 页面](https://msdn.microsoft.com/en-us/library/system.deployment.application.trustnotgrantedexception(v=vs.110).aspx)有两个原因。`TrustNotGrantedException`但是，当部署了比以前版本使用更多权限的新 ClickOnce 更新时，似乎 通常会引发这种情况......

> *   应用程序使用权限提升，用户拒绝提升信任的请求；或者
> *   应用程序使用受信任的应用程序部署，并且用于签署应用程序的数字证书未列为本地计算机上的受信任发布者。**如果您已将更新部署到应用程序，并且更新使用的权限比以前的版本更多，并且 ClickOnce 引发了 TrustNotGrantedException，则新版本将不会安装**。

因此，它无法更新是有道理的，因为自用户上次安装以来应用程序的安全级别发生了变化——因此他们需要重新安装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-26T13:08:30.753

我们遇到了同样的问题，最终使用了[InPlaceHostingManager](https://docs.microsoft.com/en-gb/dotnet/api/system.deployment.application.inplacehostingmanager?view=netframework-4.7.2)类。它用于安装或更新 ClickOnce 部署。`GetManifestAsync()`触发`GetManifestCompleted`事件，它会为您提供版本号。然后您可以调用`DownloadApplicationAsync()`并处理该`DownloadApplicationCompleted`事件。到目前为止，这是可行的，并且没有抛出 TrustNotGrantedException。

# actionscript-3 - 循环自定义光标不透明度陷入无限循环

> ID：14688284
> 
> 赞同：0
> 
> 时间：2013-02-04T13:57:59.090
> 
> 标签：actionscript-3, flash, loops, opacity

我正在尝试通过更改其不透明度来使自定义光标缓慢发光。问题是我可以看到它工作的唯一方法是制作 a `while`，这会创建一个无限循环。有没有办法让我的光标从 0 不透明度变为 1 不透明度并上下移动。这是我目前的代码......我正在尝试寻找另一种方法来继续，但我真的没有看到任何其他方法。

```
public var Alpha:Number = 1;
public var sense:String = "down";

private function thisMouseOver(e:MouseEvent):void{

        Mouse.hide();

        //draws the cursor
        drawCursor();

        //Animates cursor
        if(!this.animationStarted)
        {
            this.animationStarted = true;
            animateCursor();
        }

    }

private function animateCursor():void{
        while(this.animationStarted)
        {
            if(this.Alpha==1)
            {
                this.sense = "down";
            }
            else if(this.Alpha == 0)
            {
                this.sense = "up";
            }

            if(this.sense == "up")
                this.Alpha += 0.1;
            else
                this.Alpha -= 0.1;

            this.graphics.beginFill(0x333333);
            this.graphics.drawRect(0,0,25,25);
            this.graphics.endFill();

            drawCursor();
        }
    }

private function drawCursor():void{
        this.graphics.beginFill(0x00BFFF,this.Alpha);
        //top left
        this.graphics.drawRect(0,0,6,2);
        //bottom left
        this.graphics.drawRect(0,23,6,2);
        //left top
        this.graphics.drawRect(0,0,2,6);
        //left bottom
        this.graphics.drawRect(0,19,2,6);
        //top righ
        this.graphics.drawRect(19,0,6,2);
        //right top
        this.graphics.drawRect(23,0,2,6);
        //bottom right
        this.graphics.drawRect(19,23,6,2);
        //right bottom
        this.graphics.drawRect(23,19,2,6);
        this.graphics.endFill();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:14:29.147

最好的方法是使用 tweener，我最喜欢的是[GTween](http://www.gskinner.com/libraries/gtween/#download)：

```
private function test():void
{
    var shape:Shape = new Shape();
    addChild(shape);

    shape.graphics.beginFill(0xFF0000, 1);
    shape.graphics.drawCircle(100, 100, 50);
    shape.graphics.endFill();

    var tween:GTween = new GTween(shape, 1, {alpha:0}, {reflect:true, repeatCount:2});
    tween.nextTween = tween;

} 
```

用于`tween.paused = true/false`播放（）/停止（）补间。

还有另一个没有 tween 的变体（但我建议使用 tween，因为代码更清晰、可读且资源成本更低）更像你的，但不是 while 循环使用 EnterFrame 事件方法 - 从`animateCursor()`方法中删除 while 循环，添加`Event.ENTER_FRAME`侦听器在`animateCursor();`呼叫点：

```
if(!this.animationStarted)
{
     this.animationStarted = true;
     addEventListener(Event.ENTER_FRAME, onEnterFrame);
} 

private function onEnterFrame():void
{
    animateCursor();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:31:04.797

您可以将 animateCursor 中的代码放在不同的方法中，并使用 Timer 来调用该方法。通过这种方式，您可以控制光标闪烁的“速度”和时间。

```
Timer timer = new Timer( 25, 0 );

private function animateCursor():void
{
    timer.addEventListener( TimerEvent.TIMER, timerHandler );
    timer.start()
}
private function timerListener( e:TimerEvent ):void
{
    if(this.Alpha==1)
    {
       this.sense = "down";
    }
    else if(this.Alpha == 0)
    {
       this.sense = "up";
    }

    if(this.sense == "up")
       this.Alpha += 0.1;
    else
       this.Alpha -= 0.1;

    this.graphics.beginFill(0x333333);
    this.graphics.drawRect(0,0,25,25);
    this.graphics.endFill();

    drawCursor();
} 
```

将 alpha 条件从 this.Alpha == 0 更改为 this.Alpha <= 0 也是一个好主意，因为您可以选择将修改 alpha 的数量更改为不总是加起来为 0 或1.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T07:42:36.310

避免无限循环问题的一种方法是将 animateCursor 代码放在 ENTER_FRAME 事件处理程序中。

这是它的外观：[http ://www.swfcabin.com/open/1360303185](http://www.swfcabin.com/open/1360303185)

（您的自定义光标形状看起来很棒；）

这是您在 MiniBuilder 中重新编写的代码（函数按字母顺序排列）：

```
package com.glowingcursor {
import flash.display.*;
import flash.events.*;
import flash.geom.*;
import flash.ui.*;

public class Application extends Sprite {
    private var cursor:Sprite;
    private var cursorOffset:Point;
    private var sense:Boolean;

    public function 
    Application() {
        addEventListener( Event.ADDED_TO_STAGE, onAdded );
    }

    private function 
    animateCursor( e:Event ):void {
        if ( cursor.alpha >= 1 ) sense = false;
        else if ( cursor.alpha <= 0.2 ) sense = true;

        if( sense ) cursor.alpha += 0.08;
        else cursor.alpha -= 0.08;
    }

    private function
    hideCursor( e:MouseEvent ):void {
        Mouse.show();
        removeChild( cursor );
        removeEventListener( Event.ENTER_FRAME, moveCursor );
        removeEventListener( Event.ENTER_FRAME, animateCursor );
    }

    private function
    initCursor():void {
        cursor = new Sprite();
        cursor.graphics.beginFill( 0xff0000 );
        cursor.graphics.drawRect(  0,  0, 6, 2 ); // top left
        cursor.graphics.drawRect(  0, 23, 6, 2 ); // bottom left
        cursor.graphics.drawRect(  0,  0, 2, 6 ); // left top
        cursor.graphics.drawRect(  0, 19, 2, 6 ); // left bottom
        cursor.graphics.drawRect( 19,  0, 6, 2 ); // top right
        cursor.graphics.drawRect( 23,  0, 2, 6 ); // right top
        cursor.graphics.drawRect( 19, 23, 6, 2 ); // bottom right
        cursor.graphics.drawRect( 23, 19, 2, 6 ); // right bottom
        cursor.graphics.endFill();

        // So InteractiveObjects react to the custom cursor properly
        cursor.mouseEnabled = false;

        // For cursor centering
        cursorOffset = new Point( cursor.width / 2, cursor.height / 2 );
    }

    private function 
    moveCursor( e:Event ):void {
        cursor.x = mouseX - cursorOffset.x;
        cursor.y = mouseY - cursorOffset.y;
    }

    private function
    onAdded( e:Event ):void {
        initCursor();
        showCursor();
    }

    private function
    showCursor():void {
        Mouse.hide();
        addChild( cursor );
        addEventListener( Event.ENTER_FRAME, moveCursor );
        addEventListener( Event.ENTER_FRAME, animateCursor );
    }
}
} 
```

# c++ - C++局部变量销毁顺序

> ID：14688285
> 
> 赞同：71
> 
> 时间：2013-02-04T13:57:59.953
> 
> 标签：c++, c++11, destructor, local-variables

在 C++ (11) 中释放局部变量是否有定义的顺序？更简洁地说：同一范围内的两个局部变量的析构函数的副作用将以什么顺序变得可见？

例如：

```
struct X{
  ~X(){/*do something*/}
}

int main(){
   X x1;
   X x2;
   return 0;
} 
```

当 main 返回或 C++11 中未定义顺序时，是先销毁`x1`还是先销毁？`x2`

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-04T14:00:33.443

在每一类存储类中（动态分配的对象除外），对象以相反的构造顺序被销毁。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-09-14T12:55:30.753

**一、关于局部变量**

1.  局部变量在*Stack*上分配。

2.  *Stack*基于( `LIFO`)`Last-In-First-Out`模式。

3.  因此，变量以分配和构造的相反顺序被销毁和释放。

**二、关于你的例子**

你的函数`main()`被称为：

*   `x1`*在Stack*上分配和构造，
*   `x2`*在堆栈*上分配和构造

 *当`main()`到达函数范围的末尾时：

*   `x2`被销毁并从*Stack*中释放，
*   `x1`被销毁并从*堆栈中释放*

**三、而且**

*堆栈*看起来像这样：

（使用方案似乎更容易理解*堆栈的行为）*

[![堆栈方案](../Images/4903d2795cbd8b57def13603dcaedbeb.png)](https://i.stack.imgur.com/jLlQz.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-04T14:37:24.180

这是一种`Stack Data Structure`行为，因此局部变量作为数据结构存储在 Stack 中`LIFO (Last-In-First-Out)`，您可以想象在 LIFO 数据结构中，最后添加到结构中的变量必须是第一个要删除的变量。变量是`removed`从堆栈中`reverse order`到它们相加的顺序。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-04T14:02:40.970

它们以相反的分配顺序被销毁，请参阅[这个 SO question](https://stackoverflow.com/questions/5257768/local-variables-construction-and-destruction-with-optimizer-involved)。在这种情况下，这意味着`x2`将在 之前被销毁`x1`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-04T13:59:53.777

它们将按照相反的建造顺序被摧毁。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-03-16T19:02:17.527

[https://isocpp.org/wiki/faq/dtors#order-dtors-for-locals](https://isocpp.org/wiki/faq/dtors#order-dtors-for-locals)

isocpp.org 有一个关于这个主题的常见问题解答，它说它**是以相反的顺序进行的**。我认为当这个原始问题被问到时，官方网站并不存在。*

# javascript - 在Angularjs中模块的“运行”方法中注入依赖项

> ID：14688290
> 
> 赞同：51
> 
> 时间：2013-02-04T13:58:19.207
> 
> 标签：javascript, angularjs

我试图了解如何使用 Angularjs。它看起来像一个不错的框架，但我遇到了 DI 的一个小问题......

如何在模块的“运行”方法中注入依赖项？我的意思是我能够做到，但只有当我的服务/工厂/值与“运行”参数名称同名时它才有效。我构建了一个简单的应用程序来说明我的意思：

```
var CONFIGURATION = "Configuration"; //I would like to have App.Configuration
var LOG_SERVICE = "LogService"; //I would like to have App.Services.LogService
var LOGIN_CONTROLLER = "LoginController";

var App = {};
App.Services = {};
App.Controllers = {};

App = angular.extend(App, angular.module("App", [])
            .run(function ($rootScope, $location, Configuration, LogService) {

                //How to force LogService to be the logger in params?
                //not var = logger = LogService :)
                LogService.log("app run");
            }));
//App.$inject = [CONFIGURATION, LOG_SERVICE]; /* NOT WORKS */

App.Services.LogService = function (config) {
    this.log = function (message) { 
                   config.hasConsole ? console.log(message) : alert(message); 
               };
};
App.Services.LogService.$inject = [CONFIGURATION];
App.service(LOG_SERVICE, App.Services.LogService);

App.Controllers.LoginController = function (config, logger) {
    logger.log("Controller constructed");
}
//The line below, required only because of problem described
App.Controllers.LoginController.$inject = [CONFIGURATION, LOG_SERVICE];

App.factory(CONFIGURATION, function () { return { hasConsole: console && console.log }; }); 
```

为什么我需要它，您可能会问 :) 但在我看来，首先要有有意义的名称空间来组织代码。它还将最小化名称冲突，最后，在缩小 JS 时，事情会崩溃，因为它重命名为更短的名称。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-04T14:07:08.700

我认为原因

```
App.$inject = [CONFIGURATION, LOG_SERVICE]; 
```

不起作用，是因为您有 2 个其他参数`$rootScope`&`$location`您需要在`$inject`. 所以它需要是：

```
App.$inject = ["$rootScope", "$location", CONFIGURATION, LOG_SERVICE]; 
```

注入服务的另一种方法是使用此版本：

```
app.run(["$rootScope", "$location", CONFIGURATION, LOG_SERVICE, 
         function ($rootScope, $location, Configuration, LogService) {

}] ); 
```

# matlab - 使用“内联”函数在同一基础上绘制不同的图形

> ID：14688293
> 
> 赞同：0
> 
> 时间：2013-02-04T13:58:29.783
> 
> 标签：matlab, plot

这是我的代码的一部分：-

```
t = -4 : 0.01  :4;
f = inline('(-1.5*t+1) .* ((t>-3)&(t<0)) + (1.5*t+1) .* ((t>0)&(t<3))');
plot(t, f(t), 'r','linewidth', 2);
grid on; 
```

在这里我得到 f(0) = 0 的值

```
>> f(0)

ans =

     0 
```

我想用`f(0) = 3`
For 来绘制函数，我试过了

```
f = inline('(-1.5*t) .* ((t>-3)&(t<0)) + (3) .* (t = 0) +(t) .* ((t>0)&(t<3))'); 
```

但是当我使用相同的`plot`命令时出现错误。

```
plot(t, f(t), 'r','linewidth', 2); 
```

有人可以建议正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:09:07.723

错误是因为你有`(t = 0)`但你可能想要`(t == 0)`

IE

```
f = inline('(-1.5*t) .* ((t>-3)&(t<0)) + (3) .* (t == 0) +(t) .* ((t>0)&(t<3))'); 
```

现在`f(0)`给 3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:12:41.380

这很容易......错误是 t == 0 而不是 t= 0

# c++ - 如何用 zlib 解压 gzipstream

> ID：14688296
> 
> 赞同：5
> 
> 时间：2013-02-04T13:58:32.187
> 
> 标签：c++, compression, zlib

有人可以告诉我需要使用哪个函数来解压缩一个用 vb.net 的 gzipstream 压缩的字节数组。我想使用zlib。

我已经包含了 zlib.h，但我无法弄清楚我应该使用什么函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T14:01:51.667

您可以查看[Boost Iostreams 库](http://www.boost.org/doc/libs/1_52_0/libs/iostreams/doc/index.html)：

```
#include <fstream>
#include <boost/iostreams/filtering_stream.hpp>
#include <boost/iostreams/filter/gzip.hpp>

std::ifstream file;
file.exceptions(std::ios::failbit | std::ios::badbit);
file.open(filename, std::ios_base::in | std::ios_base::binary);

boost::iostreams::filtering_stream<boost::iostreams::input> decompressor;
decompressor.push(boost::iostreams::gzip_decompressor());
decompressor.push(file); 
```

然后逐行解压：

```
for(std::string line; getline(decompressor, line);) {
    // decompressed a line
} 
```

或将整个文件放入一个数组中：

```
std::vector<char> data(
      std::istreambuf_iterator<char>(decompressor)
    , std::istreambuf_iterator<char>()
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:32:24.240

您需要使用`inflateInit2()`来请求 gzip 解码。阅读[zlib.h](http://zlib.net/manual.html)中的文档。

[zlib 发行版](http://zlib.net/current/zlib.tar.gz)中有很多示例代码。还可以看看[这个 zlib 使用的大量文档示例](http://zlib.net/zlib_how.html)。您可以修改那个以使用`inflateInit2()`而不是`inflateInit()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-07T22:29:02.183

这是一个使用 zlib 完成工作的 C 函数：

```
int gzip_inflate(char *compr, int comprLen, char *uncompr, int uncomprLen)
{
    int err;
    z_stream d_stream; /* decompression stream */

    d_stream.zalloc = (alloc_func)0;
    d_stream.zfree = (free_func)0;
    d_stream.opaque = (voidpf)0;

    d_stream.next_in  = (unsigned char *)compr;
    d_stream.avail_in = comprLen;

    d_stream.next_out = (unsigned char *)uncompr;
    d_stream.avail_out = uncomprLen;

    err = inflateInit2(&d_stream, 16+MAX_WBITS);
    if (err != Z_OK) return err;

    while (err != Z_STREAM_END) err = inflate(&d_stream, Z_NO_FLUSH);

    err = inflateEnd(&d_stream);
    return err;
} 
```

未压缩的字符串在 uncompr 中返回。它是一个以 null 结尾的 C 字符串，因此您可以执行 puts(uncompr)。上述功能仅在输出为文本时才有效。我已经对其进行了测试，并且可以正常工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-04T14:01:54.290

查看 zlib 使用示例。[http://www.zlib.net/zpipe.c](http://www.zlib.net/zpipe.c)

真正起作用的函数是 inflate()，但你需要 inflateInit() 等。

# javascript - 在 JavaScript(node.js) 中传递参数的成本

> ID：14688297
> 
> 赞同：1
> 
> 时间：2013-02-04T13:58:41.090
> 
> 标签：javascript, performance, node.js

我正在创建一个基于 node.js 的网站，我要求用户填写包含大量详细信息的表单，因此每个表单都成为一个参数。

我编写代码的方式是不断地将这些参数从一个函数传递到另一个函数。我认为这些参数至少经历了 4 个函数，因为我的代码对单独的模型和控制器感到讨厌。

我的问题是在 JavaScript 中传递这么多参数的成本是多少。他们会将我的参数作为一些引用/指针传递还是整个对象将被复制。我真的不希望复制整个对象，因为某些参数可能包含大量文本或数字信息。

是否有任何已知的信息来源？google 上的前 5 个结果没有产生有用的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T14:03:50.430

不复制对象。从语义上讲，对对象的引用会被复制，但在内部，这甚至不会发生，直到您更改它们（请参阅[http://en.wikipedia.org/wiki/Copy-on-write](http://en.wikipedia.org/wiki/Copy-on-write)）。

javascript 本身的参数传递非常便宜，因为没有类型检查或检查所需参数。

# javascript - 访问标签外的评论节点

> ID：14688299
> 
> 赞同：3
> 
> 时间：2013-02-04T13:58:50.127
> 
> 标签：javascript, jquery, html, dom

我正在开发一个 chrome 扩展程序，它从页面读取 html 注释并将它们呈现在操作弹出窗口中。

`<html>`但是，我不知道如何（如果可能的话）获取标签前后的一些评论。例如：

```
<!-- test test test -->
<DOCTYPE html>
<html>
...
</html> 
```

在 jQuery 中，`$("html").before()`两者`$("html").after()`都返回与`$("html")`.

是否可以使用 jQuery 或纯 Javascript 获取这些类型的评论？

编辑：带有评论的页面如下所示：

```
<!-- Comment I'd like to fetch -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" >
<head>
<title>Featured Designers for WOMEN</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /> 
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta http-equiv="Content-Style-Type" content="text/css" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:20:48.300

有了这份文件：

```
<!-- comment 1 -->
<!DOCTYPE html>
<!-- comment 2 -->
<html>
<body>
hello world
</body>
</html> 
```

你会得到这样的第一条评论：

```
document.firstChild.nodeValue 
```

第二条评论是这样找到的：

```
document.childNodes[2].nodeValue 
```

要获取下面的所有评论`document`：

```
var nodes = document.childNodes;
for (var i = 0, len = nodes.length; i !== len; ++i) {
    if (nodes[i].nodeType === 8) {
        console.log('Found comment' + nodes[i].nodeValue);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:01:53.623

`document.firstChild`应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:56:18.680

`$("html").siblings();`这将返回与我相信的 html 标记相同级别的所有 dom 对象元素。我想通过使用 JSfiddle 来确认，但我现在使用 IE8 在他们的网站上收到 Javascript 错误。如果它在您的测试中对您不起作用，我可以稍后回家确认。

# java - 将字符串发送到活动中

> ID：14688300
> 
> 赞同：0
> 
> 时间：2013-02-04T13:58:50.493
> 
> 标签：java, android, android-activity

我想将一个字符串发送到一个活动中：

```
public class MyHttpClientUsage {

  public MyHttpClientUsage(){}

  public void getInfoAbout() throws HttpException{

    RequestParams params = new RequestParams();
    params.put("a", "Static");
    params.put("content", "47");

    MyHttpClient.get("", params, new AsyncHttpResponseHandler(){
      @Override
      public void onSuccess(String response) {
        System.out.println(response);
        //How can I send this response
      }

    });
  }
} 
```

我不能使用意图，因为`get()`方法是静态的，所以我不能实例化 Context 或`MyHttpClient`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:05:55.910

您可以创建一个侦听器以处理字符串。像这样：[http ://docs.oracle.com/javase/tutorial/uiswing/events/index.html](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:06:12.710

```
Bundle basket2 = new Bundle();
    basket2.putInt("ID", 3);
            Intent yourIntent = new Intent("YourActivity");
            yourIntent.putExtras(basket2);
            startActivity(YourIntent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:12:35.000

尝试这个...

在第一个活动中

```
inputName = (EditText) findViewById(R.id.name);
        Button btnNextScreen = (Button) findViewById(R.id.btnNextScreen);

        //Listening to button event
        btnNextScreen.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                //Starting a new Intent
                Intent nextScreen = new Intent(getApplicationContext(), SecondScreenActivity.class);

                //Sending data to another Activity
                nextScreen.putExtra("name", inputName.getText().toString());

                Log.e("n", inputName.getText());

                startActivity(nextScreen);

            }
        }); 
```

在下一个活动中

```
 Intent i = getIntent();
        // Receiving the Data
        String name = i.getStringExtra("name");
        Log.e("Second Screen", name);

        // Displaying Received data
        txtName.setText(name); 
```

# c++ - 查找两个字符串向量的交集

> ID：14688301
> 
> 赞同：1
> 
> 时间：2013-02-04T13:58:59.433
> 
> 标签：c++, algorithm, vector

我有两个字符串向量，想找到两者中都存在的字符串，用公共元素填充第三个向量。编辑：我已经添加了带有相应输出的完整代码列表，以便清楚。

```
 std::cout << "size " << m_HLTMap->size() << std::endl;

  /// Vector to store the wanted, present and found triggers
  std::vector<std::string> wantedTriggers;
  wantedTriggers.push_back("L2_xe25");
  wantedTriggers.push_back("L2_vtxbeamspot_FSTracks_L2Star_A");
  std::vector<std::string> allTriggers;

  // Push all the trigger names to a vector
  std::map<std::string, int>::iterator itr = m_HLTMap->begin();
  std::map<std::string, int>::iterator itrLast = m_HLTMap->end();
  for(;itr!=itrLast;++itr)
  {
    allTriggers.push_back((*itr).first);
  }; // End itr

  /// Sort the list of trigger names and find the intersection
  /// Build a typdef to make things clearer
  std::vector<std::string>::iterator wFirst = wantedTriggers.begin();
  std::vector<std::string>::iterator wLast = wantedTriggers.end();
  std::vector<std::string>::iterator aFirst = allTriggers.begin();
  std::vector<std::string>::iterator aLast = allTriggers.end();

  std::vector<std::string> foundTriggers;

  for(;aFirst!=aLast;++aFirst)
  {
    std::cout << "Found:" << (*aFirst) << std::endl; 
  };

  std::vector<std::string>::iterator it;

  std::sort(wFirst, wLast);
  std::sort(aFirst, aLast);
  std::set_intersection(wFirst, wLast, aFirst, aLast, back_inserter(foundTriggers));

  std::cout << "Found this many triggers: " << foundTriggers.size() << std::endl;
  for(it=foundTriggers.begin();it!=foundTriggers.end();++it)
  {
    std::cout << "Found in both" << (*it) << std::endl;
  }; // End for intersection 
```

那么输出是

这是部分输出，向量中有超过 1000 个元素，所以我没有包含完整输出：

```
Found:L2_te1400
Found:L2_te1600
Found:L2_te600
Found:L2_trk16_Central_Tau_IDCalib
Found:L2_trk16_Fwd_Tau_IDCalib
Found:L2_trk29_Central_Tau_IDCalib
Found:L2_trk29_Fwd_Tau_IDCalib
Found:L2_trk9_Central_Tau_IDCalib
Found:L2_trk9_Fwd_Tau_IDCalib
Found:L2_vtxbeamspot_FSTracks_L2Star_A
Found:L2_vtxbeamspot_FSTracks_L2Star_B
Found:L2_vtxbeamspot_activeTE_L2Star_A_peb
Found:L2_vtxbeamspot_activeTE_L2Star_B_peb
Found:L2_vtxbeamspot_allTE_L2Star_A_peb
Found:L2_vtxbeamspot_allTE_L2Star_B_peb
Found:L2_xe25
Found:L2_xe35
Found:L2_xe40
Found:L2_xe45
Found:L2_xe45T
Found:L2_xe55
Found:L2_xe55T
Found:L2_xe55_LArNoiseBurst
Found:L2_xe65
Found:L2_xe65_tight
Found:L2_xe75
Found:L2_xe90
Found:L2_xe90_tight
Found:L2_xe_NoCut_allL1
Found:L2_xs15
Found:L2_xs30
Found:L2_xs45
Found:L2_xs50
Found:L2_xs60
Found:L2_xs65
Found:L2_zerobias_NoAlg
Found:L2_zerobias_Overlay_NoAlg
Found this many triggers: 0 
```

# 可能的原因

我开始认为我编译代码的方式是罪魁祸首。我目前正在使用 ROOT（物理数据分析框架）进行编译，而不是进行独立编译。我觉得它不能很好地与 STL 算法库一起工作，这就是问题的原因，特别是考虑到有多少人似乎有代码为他们工作。我将尝试进行独立编译并重新运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T14:04:15.443

传递`foundTriggers.begin()`, 为`foundTriggers`空，作为输出参数不会导致输出被推送到`foundTriggers`。相反，它将增加迭代器超过向量的末尾而不调整它的大小，随机破坏内存。

您想使用插入迭代器：

```
std::set_intersection(wFirst, wLast, aFirst, aLast, 
    std::back_inserter(foundTriggers)); 
```

**更新：**正如评论中所指出的，向量的大小已调整为至少足够大以获得结果，因此您的代码应该可以工作。请注意，您应该使用从返回的迭代器`set_intersection`来指示交集的结束 - 您的代码会忽略它，因此您还将遍历输出末尾留下的空字符串。

您能否发布一个完整的测试用例，以便我们可以查看交集是否实际上是空的？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T14:25:02.090

~~毕竟，您的`allTrigers`向量**是**空的。`itr`填充地图时，您永远不会重置到地图的开头。~~

编辑：

实际上，您永远不会重置`aFirst`：

```
for(;aFirst!=aLast;++aFirst)
  {
    std::cout << "Found:" << (*aFirst) << std::endl; 
  };

  // here aFirst == aLast

  std::vector<std::string>::iterator it;

  std::sort(wFirst, wLast);
  std::sort(aFirst, aLast);  // **** sorting empty range ****
  std::set_intersection(wFirst, wLast, aFirst, aLast, back_inserter(foundTrigger));
                               //      ^^^^^^^^^^^^^^
                               // ***** empty range ***** 
```

我希望您现在可以明白为什么缩小变量范围是一种好习惯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T14:15:18.163

你永远不会使用`set_intersection`. 在这种情况下，您可以在返回`foundIterators`后使用它来调整大小`set_intersection`，或者作为 for 循环的上限。否则，您的代码似乎可以工作。我们可以看看完整的可编译程序及其实际输出吗？

# continuous-integration - TeamCity / TestFlight API 上传错误

> ID：14688302
> 
> 赞同：0
> 
> 时间：2013-02-04T13:58:59.827
> 
> 标签：continuous-integration, teamcity, testflight

我正在尝试将 TestFlighApp.com API 与我的 TeamCity 持续集成环境集成。但是，在生成 .ipa 之后，我进入以下步骤：

```
 curl http://testflightapp.com/api/builds.json \
    --form file=@%teamcity.build.checkoutDir%/application.ipa \
    --form api_token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX \
    --form team_token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX \
    --form notes='Built from TeamCity. %env.TEAMCITY_BUILDCONF_NAME%'  \
    --form notify=True  \
    --form distribution_lists='API' 
```

我得到以下结果：

```
步骤 3/4：分发到 TestFlight（命令行）（1m）
开始：/Applications/buildAgent/temp/agentTmp/custom_script2782333615207409098
在目录中：/Applications/buildAgent/work/7a1d432fea96afc0
  % 总计 % 接收 % Xferd 平均速度 时间 时间 时间 当前
                                 下载上传总花费剩余速度
  0 0 0 0 0 0 0 0 --:--:-- --:--:-- --:--:-- 0
 89 985 0 0 89 883 0 759 0:00:01 0:00:01 --:--:-- 815
 89 985 0 0 89 883 0 408 0:00:02 0:00:02 --:--:-- 423
 89 985 0 0 89 883 0 279 0:00:03 0:00:03 --:--:-- 286
 89 985 0 0 89 883 0 211 0:00:04 0:00:04 --:--:-- 216
 89 985 0 0 89 883 0 170 0:00:05 0:00:05 --:--:-- 173
 89 985 0 0 89 883 0 143 0:00:06 0:00:06 --:--:-- 0
 89 985 0 0 89 883 0 123 0:00:08 0:00:07 0:00:01 0
 89 985 0 0 89 883 0 108 0:00:09 0:00:08 0:00:01 0
 89 985 0 0 89 883 0 96 0:00:10 0:00:09 0:00:01 0
 89 985 0 0 89 883 0 86 0:00:11 0:00:10 0:00:01 0
 89 985 0 0 89 883 0 79 0:00:12 0:00:11 0:00:01 0
 89 985 0 0 89 883 0 72 0:00:13 0:00:12 0:00:01 0
 89 985 0 0 89 883 0 67 0:00:14 0:00:13 0:00:01 0
 89 985 0 0 89 883 0 62 0:00:15 0:00:14 0:00:01 0
 89 985 0 0 89 883 0 58 0:00:16 0:00:15 0:00:01 0
 89 985 0 0 89 883 0 54 0:00:18 0:00:16 0:00:02 0
 89 985 0 0 89 883 0 51 0:00:19 0:00:17 0:00:02 0
 89 985 0 0 89 883 0 48 0:00:20 0:00:18 0:00:02 0
 89 985 0 0 89 883 0 46 0:00:21 0:00:19 0:00:02 0
 89 985 0 0 89 883 0 43 0:00:22 0:00:20 0:00:02 0
 89 985 0 0 89 883 0 41 0:00:24 0:00:21 0:00:03 0
 89 985 0 0 89 883 0 39 0:00:25 0:00:22 0:00:03 0
 89 985 0 0 89 883 0 38 0:00:25 0:00:23 0:00:02 0
 89 985 0 0 89 883 0 36 0:00:27 0:00:24 0:00:03 0
 89 985 0 0 89 883 0 35 0:00:28 0:00:25 0:00:03 0
 89 985 0 0 89 883 0 33 0:00:29 0:00:26 0:00:03 0
 89 985 0 0 89 883 0 32 0:00:30 0:00:27 0:00:03 0
 89 985 0 0 89 883 0 31 0:00:31 0:00:28 0:00:03 0
 89 985 0 0 89 883 0 30 0:00:32 0:00:29 0:00:03 0
 89 985 0 0 89 883 0 29 0:00:33 0:00:30 0:00:03 0
 89 985 0 0 89 883 0 28 0:00:35 0:00:31 0:00:04 0
 89 985 0 0 89 883 0 27 0:00:36 0:00:32 0:00:04 0
 89 985 0 0 89 883 0 26 0:00:37 0:00:33 0:00:04 0
 89 985 0 0 89 883 0 25 0:00:39 0:00:34 0:00:05 0
 89 985 0 0 89 883 0 25 0:00:39 0:00:35 0:00:04 0
 89 985 0 0 89 883 0 24 0:00:41 0:00:36 0:00:05 0
 89 985 0 0 89 883 0 23 0:00:42 0:00:37 0:00:05 0
 89 985 0 0 89 883 0 23 0:00:42 0:00:38 0:00:04 0
 89 985 0 0 89 883 0 22 0:00:44 0:00:39 0:00:05 0
 89 985 0 0 89 883 0 21 0:00:46 0:00:40 0:00:06 0
 89 985 0 0 89 883 0 21 0:00:46 0:00:41 0:00:05 0
 89 985 0 0 89 883 0 20 0:00:49 0:00:42 0:00:07 0
 89 985 0 0 89 883 0 20 0:00:49 0:00:43 0:00:06 0
 89 985 0 0 89 883 0 19 0:00:51 0:00:44 0:00:07 0
 89 985 0 0 89 883 0 19 0:00:51 0:00:45 0:00:06 0
 89 985 0 0 89 883 0 19 0:00:51 0:00:46 0:00:05 0
 89 985 0 0 89 883 0 18 0:00:54 0:00:47 0:00:07 0
 89 985 0 0 89 883 0 18 0:00:54 0:00:48 0:00:06 0
 89 985 0 0 89 883 0 17 0:00:57 0:00:49 0:00:08 0
 89 985 0 0 89 883 0 17 0:00:57 0:00:50 0:00:07 0
 89 985 0 0 89 883 0 17 0:00:57 0:00:51 0:00:06 0
 89 985 0 0 89 883 0 16 0:01:01 0:00:52 0:00:09 0
 89 985 0 0 89 883 0 16 0:01:01 0:00:53 0:00:08 0
 89 985 0 0 89 883 0 16 0:01:01 0:00:54 0:00:07 0
 89 985 0 0 89 883 0 15 0:01:05 0:00:55 0:00:10 0
 89 985 0 0 89 883 0 15 0:01:05 0:00:56 0:00:09 0
 89 985 0 0 89 883 0 15 0:01:05 0:00:57 0:00:08 0
 89 985 0 0 89 883 0 15 0:01:05 0:00:58 0:00:07 0
 89 985 0 0 89 883 0 14 0:01:10 0:00:59 0:00:11 0
 89 985 0 0 89 883 0 14 0:01:10 0:01:00 0:00:10 0
 89 985 0 0 89 883 0 14 0:01:10 0:01:00 0:00:10 0
curl：（52）来自服务器的空回复
进程以代码 52 退出
步骤分发到 TestFlight（命令行）失败

```

对此的任何帮助将不胜感激！

谢谢瑞恩

# python - 将元信息/元数据添加到 pandas DataFrame

> ID：14688306
> 
> 赞同：117
> 
> 时间：2013-02-04T13:59:18.650
> 
> 标签：python, pandas

是否可以向 pandas DataFrame 添加一些元信息/元数据？

例如，用于测量数据的仪器名称、负责的仪器等。

*一种解决方法是使用该信息创建一个列，但在每一行中存储一条信息似乎很浪费！*

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-02-04T14:03:39.750

当然，像大多数 Python 对象一样，您可以将新属性附加到 a `pandas.DataFrame`：

```
import pandas as pd
df = pd.DataFrame([])
df.instrument_name = 'Binky' 
```

但是请注意，虽然您可以将属性附加到 DataFrame ，但对 DataFrame 执行的操作（例如`groupby`、`pivot`或仅举几例）可能会返回一个*没有*附加元数据的新 DataFrame。Pandas 还没有一种强大的方法来*传播*[附加到 DataFrames 的元数据](https://github.com/pydata/pandas/issues/2485)。`join``loc`

 **可以将元数据保存*在文件*中。[您可以在此处](https://stackoverflow.com/a/29130146/190597)找到有关如何将元数据存储在 HDF5 文件中的示例。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2020-02-04T18:32:23.340

从 pandas 1.0 开始，可能更早，现在有一个`Dataframe.attrs`属性。它是实验性的，但这可能是您将来想要的。例如：

```
import pandas as pd
df = pd.DataFrame([])
df.attrs['instrument_name'] = 'Binky' 
```

[在此处](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.attrs.html)的文档中找到它。

尝试使用`to_parquet`and then `from_parquet`，它似乎不会持续存在，因此请务必使用您的用例进行检查。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-09-07T23:31:15.983

我自己也遇到了这个问题。从 pandas 0.13 开始，DataFrame 上有一个 _metadata 属性，该属性通过返回新 DataFrame 的函数持续存在。似乎也可以在序列化中幸存下来（我只尝试过 json，但我想 hdf 也被覆盖了）。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-02-04T14:12:33.190

并不真地。尽管您可以像@unutbu 提到的那样将包含元数据的属性添加到 DataFrame 类中，但许多 DataFrame 方法会返回一个新的 DataFrame，因此您的元数据会丢失。如果您需要操作数据框，那么最好的选择是将元数据和数据框包装在另一个类中。请参阅 GitHub 上的此讨论：[https ://github.com/pydata/pandas/issues/2485](https://github.com/pydata/pandas/issues/2485)

目前有一个开放的[拉取请求](https://github.com/pydata/pandas/pull/2695)来添加一个 MetaDataFrame 对象，这将更好地支持元数据。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-01-10T22:00:26.953

将任意属性附加到 DataFrame 对象的最佳答案是好的，但是如果您使用字典、列表或元组，它将发出“Pandas 不允许通过新属性名称创建列”的错误。以下解决方案适用于存储任意属性。

```
from types import SimpleNamespace
df = pd.DataFrame()
df.meta = SimpleNamespace()
df.meta.foo = [1,2,3] 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-09-28T01:04:19.797

正如@choldgraf 所提到的，我发现[xarray](http://xarray.pydata.org/en/stable/)是在比较数据和绘制多个数据帧之间的结果时附加元数据的绝佳工具。

在我的工作中，我们经常会比较几个固件版本和不同测试场景的结果，添加这些信息就这么简单：

```
df = pd.read_csv(meaningless_test)
metadata = {'fw': foo, 'test_name': bar, 'scenario': sc_01}
ds = xr.Dataset.from_dataframe(df)
ds.attrs = metadata 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-11-09T19:35:55.480

正如其他答案和评论中提到的，`_metadata`它不是公共 API 的一部分，因此在生产环境中使用它绝对不是一个好主意。但是您仍然可能希望在研究原型中使用它并在它停止工作时更换它。现在它可以与`groupby`/一起使用`apply`，这很有帮助。这是一个例子（我在其他答案中找不到）：

```
df = pd.DataFrame([1, 2, 2, 3, 3], columns=['val']) 
df.my_attribute = "my_value"
df._metadata.append('my_attribute')
df.groupby('val').apply(lambda group: group.my_attribute) 
```

输出：

```
val
1    my_value
2    my_value
3    my_value
dtype: object 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-01-13T21:53:08.213

来晚了，我认为如果您需要元数据通过 I/O 持久化，这可能会有所帮助。我一直在使用一个相对较新的包[h5io](https://github.com/h5io/h5io)来完成此任务。

它应该可以让您从 HDF5 快速读取/写入一些常见格式，其中之一是数据帧。因此，例如，您可以将数据框放入字典中，并将元数据作为字段包含在字典中。例如：

```
save_dict = dict(data=my_df, name='chris', record_date='1/1/2016')
h5io.write_hdf5('path/to/file.hdf5', save_dict)
in_data = h5io.read_hdf5('path/to/file.hdf5')
df = in_data['data']
name = in_data['name']
etc... 
```

另一种选择是研究像[xray](https://github.com/pydata/xarray)这样的项目，它在某些方面更复杂，但我认为它确实允许您使用元数据并且很容易转换为 DataFrame。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-04-10T10:35:42.367

我一直在寻找解决方案，发现pandas框架有这个属性`attrs`

```
pd.DataFrame().attrs.update({'your_attribute' : 'value'})
frame.attrs['your_attribute'] 
```

每当您通过它时，此属性将始终粘在您的框架上！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-07-19T13:18:41.160

我遇到了同样的问题，并使用了一种解决方法，即从带有元数据的字典中创建一个新的、更小的 DF：

```
 meta = {"name": "Sample Dataframe", "Created": "19/07/2019"}
    dfMeta = pd.DataFrame.from_dict(meta, orient='index') 
```

然后可以将此 dfMeta 与您的原始 DF 一起保存在 pickle 等中

请参阅[在泡菜文件中保存和加载多个对象？](https://stackoverflow.com/questions/20716812/saving-and-loading-multiple-objects-in-pickle-file)（Lutz 的回答）对于使用 pickle 保存和检索多个数据帧的出色回答

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-06-11T15:53:10.050

使用 pandas（例如`df.my_metadata = "source.csv"`）添加原始属性*不是*一个好主意。

即使在最新版本（python 3.8 上的 1.2.4）上，当使用`read_csv`. 这将很难调试，因为`read_csv`可以正常工作，但稍后（似乎是随机的）您会发现数据帧已从内存中释放。

似乎与 pandas 相关的 cpython 扩展似乎对数据帧的数据布局做出了非常明确的假设。

`attrs`是目前使用元数据属性的唯一安全方法： [https ://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.attrs.html](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.attrs.html)

例如

```
df.attrs.update({'my_metadata' : "source.csv"}) 
```

attrs 在所有场景中的行为方式并没有完全充实。您可以帮助提供有关此问题中预期行为的反馈`attrs`：[https ://github.com/pandas-dev/pandas/issues/28283](https://github.com/pandas-dev/pandas/issues/28283)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-06-15T21:04:56.933

参考*[定义原始属性](https://pandas.pydata.org/pandas-docs/stable/development/extending.html#define-original-properties)*^(部分（*[官方 Pandas 文档](https://pandas.pydata.org/pandas-docs/stable)*）)，如果[子类](https://stackoverflow.com/questions/5072780/what-is-subclassing)化[`pandas.DataFrame`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html)是一个选项，请注意：

> 要让原始数据结构具有附加属性，您应该`pandas`知道添加了哪些属性。

因此，您可以做的事情 -*任意选择**名称`MetaedDataFrame`*- 是

```
class MetaedDataFrame(pd.DataFrame):
    """s/e."""
    _metadata = ['instrument_name']

    @property
    def _constructor(self):
        return self.__class__

    # Define the following if providing attribute(s) at instantiation
    # is a requirement, otherwise, if YAGNI, don't.
    def __init__(
        self, *args, instrument_name: str = None, **kwargs
    ):
        super().__init__(*args, **kwargs)
        self.instrument_name = instrument_name 
```

然后使用您的（`_metadata`-prespecified）属性实例化您的数据框

```
>>> mdf = MetaedDataFrame(instrument_name='Binky')
>>> mdf.instrument_name
'Binky' 
```

甚至在实例化之后

```
>>> mdf = MetaedDataFrame()
>>> mdf.instrument_name = 'Binky'
'Binky' 
```

没有任何警告（截至 2021 年 6 月 15 日）：[序列化](https://en.wikipedia.org/wiki/Serialization)并[`~.copy`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.copy.html)像魅力一样工作。此外，这种方法允许丰富您的 API，例如通过向 中添加一些`instrument_name`基于 - 的成员`MetaedDataFrame`，例如[属性](https://docs.python.org/3/howto/descriptor.html#properties)（或方法）：

```
 [...]

    @property
    def lower_instrument_name(self) -> str:
        if self.instrument_name is not None:
            return self.instrument_name.lower()

    [...] 
```

```
>>> mdf.lower_instrument_name
'binky' 
```

...*但这超出了这个问题的范围*...

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-07-06T01:22:13.630

[根据pandas.pydata.org](https://pandas.pydata.org/pandas-docs/dev/user_guide/cookbook.html)的说法，对于那些希望将数据帧存储在 HDFStore 中的人，推荐的方法是：

```
import pandas as pd

df = pd.DataFrame(dict(keys=['a', 'b', 'c'], values=['1', '2', '3']))
df.to_hdf('/tmp/temp_df.h5', key='temp_df')
store = pd.HDFStore('/tmp/temp_df.h5') 
store.get_storer('temp_df').attrs.attr_key = 'attr_value'
store.close() 
```**

# c++ - 在 dll 中使用 HBITMAP（罗技 SDK）

> ID：14688309
> 
> 赞同：-1
> 
> 时间：2013-02-04T13:59:23.500
> 
> 标签：c++, plugins, dll, sdk, logitech

我正在为名为 MusicBee 的音乐播放器编写一个插件。该插件适用于罗技 G 键盘 LCD。对于 Logitech G19 键盘，我将从位图文件中添加漂亮的背景。sdk说我必须使用HBITMAP来创建背景。现在我使用 HBITMAP 并且背景不显示。这是插件主页上的背景和徽标的代码。

```
m_lcd.ModifyDisplay(LG_COLOR);
    background =(HBITMAP) LoadImage( NULL, L"Logitech/G19logo.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
    m_lcd.SetBackground(background);
    logo = m_lcd.AddText(LG_STATIC_TEXT, LG_BIG, DT_CENTER, LGLCD_QVGA_BMP_WIDTH);
    m_lcd.SetOrigin(logo, 0, 50);
    m_lcd.SetText(logo, _T("MusicBee"));
    m_lcd.SetTextFontColor(logo, RGB(0,0,0));
    m_lcd.Update(); 
```

我的罗技课程的完整代码：

```
//-----------------------------------------------------------------
// Logitech File
// C++ Source - Logitech.cpp - version 2012 v1.0
//-----------------------------------------------------------------

//-----------------------------------------------------------------
// Include Files
//-----------------------------------------------------------------
#include "stdafx.h"
#include "Logitech.h"

//-----------------------------------------------------------------
// Logitech methods
//-----------------------------------------------------------------

//This LogitechObject is a instance of the Logitech class for using in the thread
Logitech * Logitech::LogitechObject;

Logitech::Logitech():   stopthread(false), firstTime(true), position(0), duration(0)
{
    LogitechObject = this;
}

Logitech::~Logitech()
{
    stopthread = true;
    this->state = StatePlay::Undefined;
    timerThread.detach();
}

void CALLBACK Logitech::TimerProc(void* lpParameter, BOOLEAN TimerOrWaitFired)
{
    if(LogitechObject->m_lcd.ButtonTriggered(LG_BUTTON_4))
    {
    LogitechObject->time = 0;
    LogitechObject->m_lcd.SetProgressBarPosition(LogitechObject->progressbar, static_cast<FLOAT>(100));
    LogitechObject->m_lcd.Update();
    }
}

bool Logitech::getFirstTime()
{
    return firstTime;
}

//Initialise Logitech LCD
BOOL Logitech::OnInitDialog()
{
    HRESULT hRes = m_lcd.Initialize(_T("MusicBee"), LG_DUAL_MODE, FALSE, TRUE);

    if (hRes != S_OK)
    {
        return FALSE;
    }

    m_lcd.SetAsForeground(true);

    //Create home screen Logitech Color LCD
    if(m_lcd.IsDeviceAvailable(LG_COLOR))
    {
        m_lcd.ModifyDisplay(LG_COLOR);
        //m_lcd.SetBackground(RGB(245,245,245));
        background =(HBITMAP) LoadImage( NULL, L"Logitech/G19logo.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
        m_lcd.SetBackground(background);
        logo = m_lcd.AddText(LG_STATIC_TEXT, LG_BIG, DT_CENTER, LGLCD_QVGA_BMP_WIDTH);
        m_lcd.SetOrigin(logo, 0, 50);
        m_lcd.SetText(logo, _T("MusicBee"));
        m_lcd.SetTextFontColor(logo, RGB(0,0,0));
        m_lcd.Update();
    }

    //Create home screen Logitech Monochrome LCD
    else if(m_lcd.IsDeviceAvailable(LG_MONOCHROME))
    {
        m_lcd.ModifyDisplay(LG_MONOCHROME);
        logo = m_lcd.AddText(LG_STATIC_TEXT, LG_BIG, DT_CENTER, LGLCD_BW_BMP_WIDTH);
        m_lcd.SetOrigin(logo, 0, 5);
        m_lcd.SetText(logo, _T("MusicBee"));
        m_lcd.Update();
    }

    //Start thread
    timerThread = thread(&Logitech::startThread);

    //CreateTimerQueueTimer(NULL,NULL,&Logitech::TimerProc,this,0,1250,WT_EXECUTEDEFAULT);

    return TRUE;  // return TRUE  unless you set the focus to a control
}

//Create playing screen for Logitech Monochrome LCD
VOID Logitech::createMonochrome()
{
    m_lcd.RemovePage(0);
    m_lcd.AddNewPage();
    m_lcd.ShowPage(0);

    if (logo != 0)
    {
        delete logo;
        logo = 0;
    }

    artist = m_lcd.AddText(LG_SCROLLING_TEXT, LG_MEDIUM, DT_CENTER, LGLCD_BW_BMP_WIDTH);
    m_lcd.SetOrigin(artist, 0, 0);

    title = m_lcd.AddText(LG_SCROLLING_TEXT, LG_MEDIUM, DT_CENTER, LGLCD_BW_BMP_WIDTH);
    m_lcd.SetOrigin(title, 0, 13);

    progressbar = m_lcd.AddProgressBar(LG_FILLED);
    m_lcd.SetProgressBarSize(progressbar, 136, 5);
    m_lcd.SetOrigin(progressbar, 12, 38);

    time = m_lcd.AddText(LG_STATIC_TEXT, LG_SMALL, DT_LEFT, 80);
    m_lcd.SetOrigin(time, 12, 29);

    time1 = m_lcd.AddText(LG_STATIC_TEXT, LG_SMALL, DT_LEFT, 80);
    m_lcd.SetOrigin(time1, 125, 29);

    /*      playIcon = static_cast<HICON>(LoadImage(GetModuleHandle(NULL), MAKEINTRESOURCE(IDB_PNG2), IMAGE_BITMAP, 16, 16, LR_MONOCHROME));
    playIconHandle = m_lcd.AddIcon(playIcon, 16, 16);
    m_lcd.SetOrigin(playIconHandle, 2, 29);*/

    firstTime = false;
    changeArtistTitle(this->artistString, this->albumString, this->titleString, this->duration, this->position);
}

//Create playing screen for Logitech Color LCD
VOID Logitech::createColor()
{
    m_lcd.RemovePage(0);
    m_lcd.AddNewPage();
    m_lcd.ShowPage(0);

    if (logo != 0)
    {
        delete logo;
        logo = 0;
    }

    //background.LoadFromResource(NULL, AfxGetInstanceHandle(), IDB_BITMAP2, _T("BMP"));
    background =(HBITMAP) LoadImage( NULL, L"Logitech/G19Background.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);

    //HBITMAP bmpBkg_ = background.GetHBITMAP();
    m_lcd.SetBackground(background);

    //m_lcd.SetBackground(RGB(184,220,240));

    artist = m_lcd.AddText(LG_SCROLLING_TEXT, LG_MEDIUM, DT_CENTER, LGLCD_QVGA_BMP_WIDTH);
    m_lcd.SetOrigin(artist, 5, 5);
    m_lcd.SetTextFontColor(artist, RGB(0,0,0));

    album = m_lcd.AddText(LG_SCROLLING_TEXT, LG_MEDIUM, DT_CENTER, LGLCD_QVGA_BMP_WIDTH);
    m_lcd.SetOrigin(album, 5, 30);
    m_lcd.SetTextFontColor(album, RGB(0,0,0));

    title = m_lcd.AddText(LG_SCROLLING_TEXT, LG_MEDIUM, DT_CENTER, LGLCD_QVGA_BMP_WIDTH);
    m_lcd.SetOrigin(title, 5, 55);
    m_lcd.SetTextFontColor(title, RGB(0,0,0));

    time = m_lcd.AddText(LG_STATIC_TEXT, LG_SMALL, DT_LEFT, 80);
    m_lcd.SetOrigin(time, 5, 80);
    m_lcd.SetTextFontColor(time, RGB(0,0,0));

    time1 = m_lcd.AddText(LG_STATIC_TEXT, LG_SMALL, DT_LEFT, 40);
    m_lcd.SetOrigin(time1, 275, 80);
    m_lcd.SetTextFontColor(time1, RGB(0,0,0));

    progressbar = m_lcd.AddProgressBar(LG_FILLED);//320�240 pixel color screen
    m_lcd.SetProgressBarSize(progressbar, 310, 20);
    m_lcd.SetProgressBarColors(progressbar, RGB(25,71,94),NULL);
    m_lcd.SetOrigin(progressbar, 5, 100);

    /*playIcon = static_cast<HICON>(LoadImage(AfxGetInstanceHandle(), MAKEINTRESOURCE(IDB_PNG1), IMAGE_ICON, 16, 16, LR_COLOR));
    playIconHandle = m_lcd.AddIcon(playIcon, 16, 16);
    m_lcd.SetOrigin(playIconHandle, 5, 29);*/

    firstTime = false;
    changeArtistTitle(this->artistString, this->albumString, this->titleString, this->duration, this->position);
}

void Logitech::startThread()
{
    while(!LogitechObject->stopthread)
    {
        this_thread::sleep_for( chrono::milliseconds(500) );

        if(!LogitechObject->stopthread && LogitechObject->progressbar != NULL)
        {
            //Update progressbar and position time on the screen after 1 second of music.
            if(LogitechObject->state == StatePlay::Playing)
            {
                this_thread::sleep_for( chrono::milliseconds(500) );
                LogitechObject->position++;
                float progresstime = ((float)LogitechObject->position / (float)LogitechObject->duration)*100;
                LogitechObject->m_lcd.SetProgressBarPosition(LogitechObject->progressbar, static_cast<FLOAT>(progresstime));
                LogitechObject->m_lcd.SetText(LogitechObject->time, LogitechObject->getTimeString(LogitechObject->position).c_str());
            }

            //If music stopped then the progressbar and time must stop immediately
            else if(LogitechObject->state == StatePlay::Stopped)
            {
                LogitechObject->position = 0;
                LogitechObject->m_lcd.SetProgressBarPosition(LogitechObject->progressbar, 0);
                LogitechObject->m_lcd.SetText(LogitechObject->time, LogitechObject->getTimeString(LogitechObject->position).c_str());
            }

            LogitechObject->m_lcd.Update();
        }
    }
}

void Logitech::changeArtistTitle(wstring artistStr, wstring albumStr, wstring titleStr, int duration, int position)
{
    this->artistString = artistStr;
    this->albumString = albumStr;
    this->titleString = titleStr;
    this->durationString = getTimeString(duration/1000);
    this->position = position;
    this->duration = duration/1000;

    if(!firstTime)
    {
        if(m_lcd.IsDeviceAvailable(LG_COLOR))
        {
            m_lcd.SetText(album, albumStr.c_str());
        }

        m_lcd.SetText(artist, artistStr.c_str());
        m_lcd.SetText(title, titleStr.c_str());
        m_lcd.SetText(time, getTimeString(position).c_str());

        string s( durationString.begin(), durationString.end() );

        if(s.size() < 5)
        {
            s = "0" + s;
        }

        wstring ws( s.begin(), s.end() );

        m_lcd.SetText(time1, ws.c_str());
        ws.clear();

        ///*playIcon = static_cast<HICON>(LoadImage(AfxGetInstanceHandle(), MAKEINTRESOURCE(IDB_PNG1), IMAGE_ICON, 16, 16, LR_COLOR));
        //playIconHandle = m_lcd.AddIcon(playIcon, 16, 16);
        //m_lcd.SetOrigin(playIconHandle, 5, 29);*/

        m_lcd.Update();

        artistStr.clear();
        albumStr.clear();
        titleStr.clear();

    }
}

//Set current playing position
void Logitech::setPosition(int pos)
{
    this->position = pos/1000;
    m_lcd.SetText(time, getTimeString(this->position).c_str());
    m_lcd.Update();
}

void Logitech::setDuration(int duration)
{
    this->duration = duration/1000;
    m_lcd.SetText(time1, getTimeString(this->duration).c_str());
    m_lcd.Update();
}

//Change play state of the current playing song
void Logitech::changeState(StatePlay state)
{
    this->state = state;

    if(state == StatePlay::Playing && firstTime)
    {
        if(m_lcd.IsDeviceAvailable(LG_COLOR))
        {
            createColor();
        }

        else if(m_lcd.IsDeviceAvailable(LG_MONOCHROME))
        {
            createMonochrome();
        }
    }
}

//Change int of time to string
wstring Logitech::getTimeString(int time)
{
    string minutes = to_string((int)time /60);
    string seconds = to_string((int)time%60);

    if(minutes.size() < 2)
    {
        minutes = "0" + minutes;
    }

    if(seconds.size() < 2)
    {
        seconds = "0" + seconds;
    }

    string timeString = minutes + ":" + seconds;

    return wstring( timeString.begin(), timeString.end() );
} 
```

背景nog显示的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:15:04.397

从您在评论中的回复来看，问题似乎出在 LoadImage 调用上，因此我们现在可以忽略其余代码。在 LoadImage调用[`GetLastError`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360%28v=vs.85%29.aspx)失败后立即调用并查看它返回的内容。

像这样的 LoadImage 调用只会出现一些问题：

*   你可能有错误的文件名。（GetLastError 将返回 ERROR_FILE_NOT_FOUND）
*   您使用的是相对路径，但当前工作目录可能不是您认为的位置。（GetLastError 将返回 ERROR_FILE_NOT_FOUND 或 ERROR_PATH_NOT_FOUND。）
*   也许该 API 不能使用斜杠代替反斜杠。
*   也许您无权读取该文件。（GetLastError 将返回 ERROR_ACCESS_DENIED 或 ERROR_NETWORK_ACCESS_DENIED。）
*   也许另一个应用程序打开了文件而不共享。（GetLastError 将返回 ERROR_SHARING_VIOLATION。）
*   也许该文件不是有效的位图。（我不确定 GetLastError 会在这里返回什么。可能类似于 ERROR_INVALID_PARAMETER。）
*   也许它是一个巨大的位图，没有足够的内存来加载它。（GetLastError 将返回 ERROR_NOT_ENOUGH_MEMORY。）

通常，在调试时，隔离代码中出现问题的点（一旦您知道 LoadImage 失败，您就可以不再担心之后发生的所有代码）。然后尽可能多地获取信息（例如，如果是失败的 Windows API 调用，则调用 GetLastError 并重新读取该 API 的整个 MSDN 页面，使用调试器检查此时的相对状态）。从那里开始，通常会很明显该做什么。如果没有，请编写执行相同步骤的最简单程序。如果可行，请研究您的简单示例和实际代码之间的差异。

# android - 如何防止多次调用 onHandleIntent() - IntentService

> ID：14688310
> 
> 赞同：1
> 
> 时间：2013-02-04T13:59:24.860
> 
> 标签：android, android-service, intentservice

当我启动服务（IntentService）时，它会调用 onHandleIntent() 这是服务功能。在它运行时，如果我再次调用 startService()，它会缓存调用，并再次调用 onHandleIntent()。实际上我想要做的是，将一些新数据传递给当前正在运行的服务实例，而无需创建额外的。（就像线程或侦听器中的信令）。我该怎么做？在我的 onHandleIntent() 我想使用`while(true){....}`，所以它会永远运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:26:52.790

扩展正常的服务类。在您收到的第一个 onStartCommand() 上，启动一个包含“while(true) {...}”代码的后台线程。在此后的 onStartCommand() 调用中，检查您的工作线程是否存在，当它存在时，发出信号。

在不知道您将使用此服务的目的的情况下，很难为您提供任何更好的建议。但是，需要考虑一些事情： - 查看 IntentService 也使用的 Looper/Handler 类。它们可能会为您提供一些很好的方法来编写“while(true)”循环，包括信号。- 请记住 onStartCommand() 方法应该在几秒钟内返回（它在主线程上运行）所以如果你想交出新工作（通过 onStartCommand 中传递的 Intent 接收）你应该确保这个手-关闭不需要太长时间。Looper/Handler 类也可以在这里为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-15T12:01:07.733

检查您的服务是否已经启动，如果没有启动它：

```
private boolean isMyServiceRunning() {
    ActivityManager manager = (ActivityManager) this.getSystemService(Context.ACTIVITY_SERVICE);
    for (ActivityManager.RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
        if ("com.example.Service".equals(service.service.getClassName())) {
            return true;
        }
    }
    return false;
} 
```

# actionscript-3 - 如何从 Flex 应用程序、外部、本地存储的 SWF 中获取参数？

> ID：14688311
> 
> 赞同：0
> 
> 时间：2013-02-04T13:59:34.017
> 
> 标签：actionscript-3, apache-flex, flash-builder

我正在使用 LoaderMax 加载和显示各种资产（视频、图像和 SWF）

SWF 保存在本地，需要访问通过我的 Flex Mobile 应用程序传递的参数。

这个项目之前是用Flash Pro构建的，代码：

```
var foo = root.loaderInfo.parameters['foo']; 
```

以前工作得很好。

现在我在 Flex 中（并使用 LoaderMax）我不确定如何传递参数/拾取它们。

当 LoaderMax 加载 SWF 时，我得到：

> SecurityError：错误 #3207：应用程序沙盒内容无法访问此功能。在 flash.system::Security$/allowDomain()

我尝试使用：

```
Security.allowDomain("*"); 
```

但该应用程序似乎在初始屏幕上冻结。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:25:05.467

试试这个[LINK](https://stackoverflow.com/questions/10425505/as3-air-for-android-application-sandbox-content-error)。显然是同样的问题。在此链接中使用此代码：

```
try {Security.allowDomain("*");}catch (e) { }; 
```

我希望它会有所帮助。

# svn - 我怎样才能做一个反向的svn忽略

> ID：14688312
> 
> 赞同：0
> 
> 时间：2013-02-04T13:59:34.393
> 
> 标签：svn, tortoisesvn, ignore

我有一个存储库，里面有很多好东西。我想将所有这些东西都保留在 repo 中，但我想在检索时忽略一些文件和文件夹。

我理解使用 svn 忽略文件和文件夹的方式是它会忽略我的本地文件，因此它们不会被签入。我想要相反的。我想忽略存储库中已经存在的一些文件。

为什么？因为我们的构建过程使用了某些文件，但是为了调试我们使用其他文件，我不想因为我们的库的多个版本而混淆我的 IDE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:05:36.203

使用 svn，您可以选择仅签出某些子文件夹而不是整个项目，但除此之外，您对选择性地仅签出某些文件没有太多控制权。您是正确的，设置忽略属性更多是为了避免签入本地文件，尤其是日志文件、构建工件和其他“临时”或定期重新生成的文件。

我认为您可能需要找到一种不同的方法来管理这些文件，可能更好地使用您的 IDE 或完全切换 IDE。这不是源代码控制软件旨在解决的问题。

# mongodb - 优先考虑特定的长时间运行的操作

> ID：14688315
> 
> 赞同：0
> 
> 时间：2013-02-04T13:59:37.990
> 
> 标签：mongodb

我有一个 mongo 集合，其中包含不到 200 万个文档，并且我有一个希望运行的查询，它将根据日期字段删除大约 700.000 个文档。

删除查询如下所示：

```
db.collection.remove({'timestamp': { $lt: ISODate('XXXXX') }}) 
```

在这种情况下，确切的日期并不重要，语法是正确的，我知道它会起作用。但是，我也知道这将需要很长时间（上次我们做类似的事情花了不到 2 个小时）。

还有另一个我无法停止的同时插入和更新记录的过程。但是，只要这些插入/更新“最终”被执行，我不介意它们被推迟。

我的问题是：有没有办法设置特定查询/操作的优先级，使其运行得更快/在之后发送的所有查询之前？在这种情况下，我假设 mongo 必须在数据库中进行大量数据交换，这对性能没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:19:17.303

我不知道优先级是否可以微调，所以可能会有更好的答案。

一个简单的解决方法可能是[文档](http://docs.mongodb.org/manual/applications/delete/)中建议的：

> **注意**：对于大型删除操作，将要保存的文档复制到新集合然后`drop()`在原始集合上使用可能更有效 [原文如此]。

另一种方法是编写一个简单的脚本，获取例如 500 个元素，然后使用`$in`. 您可以添加某种`sleep()`来限制删除过程。这是[在新闻组中推荐的](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/WbPWMLThZac)。

如果您将来会遇到此问题，您可能希望

*   使用逐日收集，这样您就可以在数据变得足够老时简单地删除整个收集（这使得聚合更加困难），**或者**
*   使用[TTL-Collection](http://docs.mongodb.org/manual/tutorial/expire-data/)，其中项目将自动超时，无需大量删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:31:28.600

如果您的应用程序需要删除超过一定时间的数据，我建议使用[TTL 索引](http://docs.mongodb.org/manual/tutorial/expire-data/)。前（来自 mongodb 网站）：

```
db.log.events.ensureIndex( { "status": 1 }, { expireAfterSeconds: 3600 } ) 
```

这就像一个有上限的集合，除了数据是按时间删除的。对您来说最大的胜利是它在后台线程中工作，您的插入/更新几乎不会受到伤害。我在生产中基于 SaaS 的产品上使用了这种技术，就像一个魅力。

这可能不是您的用例，但我希望对您有所帮助。

# ios - 点击时的 UIwebview 文件类型

> ID：14688317
> 
> 赞同：0
> 
> 时间：2013-02-04T13:59:48.157
> 
> 标签：ios, uiwebview, download, hyperlink

我在 gmail 中有一个包含 excel 文件的链接，我在 ios 设备的 safari 浏览器中打开它。当我单击链接并将该文件下载到应用程序文档目录时，我想打开我的应用程序。可能吗 ？如果是这样，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:04:23.627

你应该用 ios 注册支持的类型，在你的情况下是一个 excel 文件

阅读更多@ [https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html#//apple_ref/doc/uid/TP40010411-SW1](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html#//apple_ref/doc/uid/TP40010411-SW1)

# watin - 在 Watin + Visual Studio 中维护对象属性文件

> ID：14688321
> 
> 赞同：0
> 
> 时间：2013-02-04T13:59:54.880
> 
> 标签：watin

我正在使用 Watin 并维护用于列出对象属性的 excel 文件。我从 excel 文件中读取对象属性需要很多时间。有没有其他方法可以将这些对象属性存储在集中位置，以便我们可以引用对象属性，并且任何对象的更改都会反映在使用该对象的所有 TC 中。

简而言之，excel文件的内容如下：

菜单----------------------------id

username_txtfield------------uname

密码_txt字段------------通过

ok_webedit-------提交

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:47:54.510

您可以使用`appSettings`in`App.config`来管理键值对 - 访问速度非常快。

您还需要创建一个数据访问类，该类抽象出设置实际存储的位置，以便如果（何时？）您更改属性的存储位置，您只需更改一个类，而不是遍历整个代码库进行更改.

# facebook - manage_pages 只有一个粉丝专页

> ID：14688324
> 
> 赞同：0
> 
> 时间：2013-02-04T13:59:57.173
> 
> 标签：facebook, permissions, fan-page

我需要获得单个粉丝页面的许可，而不是全部，我见​​过这样做的应用程序，我想知道是否有人知道该怎么做！

是否可以仅将“manage_pages”权限授予一页？我该怎么做？

谢谢！

# jsp - 从 jsp 自定义标签访问 spring 模型对象

> ID：14688334
> 
> 赞同：1
> 
> 时间：2013-02-04T14:00:45.567
> 
> 标签：jsp, spring-mvc, jsp-tags

我正在尝试访问我的 spring mvc 模型对象，它是这样分配的

```
@RequestMapping(value = "{id}", method = RequestMethod.GET)
public String getMethod(@PathVariable Long id, Model model) {
     model.addAttribute("attrib", attribute);
} 
```

我正在尝试访问我的自定义标签库中的属性对象，这是代码。

```
 @Override
    public void doTag() throws JspException {
        final JspWriter writer = getJspContext().getOut();
        try {
            attribute = (Attribute)
                    getJspContext().getAttribute("attrib");
            if (attribute != null) {
                System.out.print(attribute.getId());
            }
            writer.println("sandeep");

        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

但是属性总是为空，谁能告诉我如何从我的自定义标签库中访问属性对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:20:06.240

尝试使用 ExpressionEvaluationUtils 中的评估方法，如下所示：

```
ExpressionEvaluationUtils.evaluate("", "attrib", this.pageContext); 
```

在此处参考 JavaDoc：http: [//static.springsource.org/spring-framework/docs/3.2.0.M2/api/org/springframework/web/util/ExpressionEvaluationUtils.html](http://static.springsource.org/spring-framework/docs/3.2.0.M2/api/org/springframework/web/util/ExpressionEvaluationUtils.html)

# azure - 与 T-SQL 删除表命令等效的 Azure 表存储是什么？

> ID：14688335
> 
> 赞同：0
> 
> 时间：2013-02-04T14:01:01.120
> 
> 标签：azure, azure-table-storage

我正在开发一个将测试消息记录到 Azure 表存储的应用程序。我想清理表，以便我可以快速查看最近的一组记录。通过指定时间戳在 Azure 存储资源管理器中进行查询需要 30 秒左右。

删除表存储中特定表中所有记录的最快方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:05:32.867

删除整个表。您可能需要等待几分钟（取决于要删除的表的大小），然后才能重新创建具有相同名称的表。

# zope - zmi：添加产品列表中的重复项

> ID：14688340
> 
> 赞同：1
> 
> 时间：2013-02-04T14:01:09.123
> 
> 标签：zope

我有一个有几个类的老式产品。在课堂上，我已经定义了 meta_type 并且我也将它们注册在 中`__init__.py`，即：

```
def initialize(context):
    context.registerClass(
        ClassA.ClassA,
        permission = "Add ClassA",
        constructors = (ClassA.manage_addClassA,
                        ClassA.manage_addClassA),
        icon = 'www/images/ClassA.gif'
    ) 
```

在我将 Zope 从 2.9 更新到 2.13 之前，这一直很好。现在在 zmi 中，在“添加产品”下拉列表中，这些 meta_types 每次显示两次。

我试图追踪这个错误的来源：

1.  ObjectManager.py，filtered_meta_types
2.  ObjectManager.py, all_meta_types
3.  getattr（产品，'meta_types'，（））

现在我不知道下一步该往哪里看 :)

这只是一个麻烦，它不会对产品的功能造成任何问题。也许我应该将它更新为一种新型的 zope 产品，但我很好奇这个错误是从哪里来的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:12:14.353

您需要`<five:registerPackage />`从文件中删除您的注册`configure.zcml`，因为您的旧包正在使用`Products.`命名空间。

`Products.`命名空间一直是自动加载的；该`initialize(context)`函数是为该命名空间隐式加载的，因为在它是官方命名空间之前。

然而，当 Zope 开始支持命名空间*之外*的包`Products.`时，决定（明智地）改为显式注册，并且`<five:registerPackage />`引入了允许您在仍然需要旧注册钩子时使用它。

但是，在您的情况下，这意味着您的`initialize()`函数被调用了两次；一次是因为它是一个`Products.`包，一次是因为您明确注册了它。

# php - 使用变量创建 url

> ID：14688343
> 
> 赞同：0
> 
> 时间：2013-02-04T14:01:15.840
> 
> 标签：php, html, url, post, get

我有一个登录页面，用户在其中输入他的电子邮件和密码。然后将其传递到另一个页面（成功），在那里它们将具有不同的选项。

我需要做的是从我可以做的 prevoius 页面（登录）获取电子邮件地址，但随后我想将其添加到如下所示的 url。

第一部分工作正常（membersgoods.php?email= 但我无法获得电子邮件地址，我只收到文本 $email.

```
$email = $_POST['email']
echo '<a href="membersgoods.php?email=$email">    Click here to see your purchased goods</a>'; 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:03:25.743

它仅适用于双引号：

```
echo "<a href=\"membersgoods.php?email=$email\">Click here to see your purchased goods</a>"; 
```

* * *

**解释**

如果字符串用双引号 (") 括起来，PHP 将为特殊字符解释更多转义序列：

```
\n  linefeed (LF or 0x0A (10) in ASCII)
\r  carriage return (CR or 0x0D (13) in ASCII)
\t  horizontal tab (HT or 0x09 (9) in ASCII)
\v  vertical tab (VT or 0x0B (11) in ASCII) (since PHP 5.2.5)
\e  escape (ESC or 0x1B (27) in ASCII) (since PHP 5.4.0)
\f  form feed (FF or 0x0C (12) in ASCII) (since PHP 5.2.5)
\\  backslash
\$  dollar sign
\"  double-quote 
```

*   双引号字符串最重要的特性是**变量名将**被扩展。
*   当用双引号或 heredoc 指定字符串时，会在其中**解析**变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:03:52.983

您不能在 ' 中使用变量，但可以在 " 中使用它

```
echo "<a href=\"membersgoods.php?email=$email\">    Click here to see your purchased goods</a>"; 
```

或者

```
echo '<a href="membersgoods.php?email='.$email.'">    Click here to see your purchased goods</a>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:05:05.763

你把你的字符串放在单引号里..

`echo '<a href="membersgoods.php?email='.$email.'"> Click here to see your purchased goods</a>';`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T14:05:42.000

尝试这样的事情：

```
<?php
   $query_string = 'mail=' . $_POST['email'];
   echo '<a href="mySite.php?' . htmlentities($query_string) . '">click</a>';
?> 
```

希望这可以帮助。

\似乎我迟到了聚会:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T14:20:28.970

我认为您合并了表单的两种方法：获取和发布。

如果您使用“get”，所有属性都将写入 URL，您可以按 $_GET（或 $_REQUEST）访问。

如果您不使用“发布”，那么该操作将写入 url，您可以通过 $_POST（或 $_REQUEST）访问属性。

有了`<form action="index.php" method="post">...</form>`它就可以正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T14:31:10.437

您在字符串周围有单引号，以防止变量扩展。

尝试

```
echo '<a href="membersgoods.php?email='. $email .'">    Click here to see your purchased goods</a>' ; 
```

进一步阅读：[stackoverflow.com 问题 14688343](https://stackoverflow.com/questions/3446216/difference-between-single-quote-and-double-quote-string-in-php)

# c# - TabItem - 悬停时显示弹出窗口

> ID：14688345
> 
> 赞同：0
> 
> 时间：2013-02-04T14:01:22.983
> 
> 标签：c#, wpf, popup, tabcontrol

我有一个带有多个 TabItems 的 TabControl，每个 TabItem 在内容区域中包含多个部分。当用户将鼠标悬停在任何选项卡上时，我想显示一个弹出窗口，显示该选项卡中的部分列表，并允许用户单击该部分并导航到它。

对于这个问题，我需要帮助的部分是当用户将鼠标悬停在每个选项卡上时弹出窗口的关闭/打开。主要的难点是：

1.  允许用户将光标从选项卡移动到弹出区域。打开弹出窗口后，它拒绝在 TabItem MouseLeave 上关闭。
2.  如果用户从一个选项卡移动到另一个选项卡，前一个选项卡的弹出窗口应该关闭并打开一个新选项卡。
3.  用户只需单击一下即可导航。这意味着他们不必为了显示另一个弹出窗口而从一个选项卡中“单击”弹出窗口。

我的想法是公开一个 DependencyProperty 来测试鼠标在哪个 Tab 上，然后触发 Popup。

为清楚起见进行了编辑：将鼠标移到选项卡上时，我会显示一个弹出窗口。当我将鼠标从选项卡上移开时，我希望弹出窗口关闭。它必须是一个弹出窗口（而不是工具提示），因为用户必须能够点击弹出窗口中的内容。

我已经对 TabControl 进行了子类化和重新模板化，但我想要一些关于如何在 MouseLeave 事件上关闭 Popup 的帮助。我已经触发了 MouseLeave 事件，但是当 Popup 打开时，焦点转移到了 Popup，因此 TabItem MouseLeave 事件没有被正确触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:39:03.713

`Interaction.Triggers`当鼠标离开弹出窗口时，您可以使用**[Blend SDK](http://www.microsoft.com/en-us/download/details.aspx?id=10801)**中的触发弹出窗口关闭。这是一个简短的例子：

```
<Popup Height="300" x:Name="MyPopup">
        <Label Content="MyLabel"></Label>
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="MouseLeave">
                <ei:ChangePropertyAction TargetObject="{Binding ElementName=MyPopup}" PropertyName="IsOpen" Value="False"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>
</Popup> 
```

您将需要以下命名空间：

```
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"                  
xmlns:ei="clr-namespace:Microsoft.Expression.Interactivity.Core;assembly=Microsoft.Expression.Interactions" 
```

# jquery - jQuery 不起作用

> ID：14688347
> 
> 赞同：-3
> 
> 时间：2013-02-04T14:01:24.927
> 
> 标签：jquery

当我提交表单时，无论我编写的 jquery 代码如何，页面都会自行刷新。谁能指出我错在哪里？

我的html文件：

```
<html>
<head>
<script type="text/javascript" src="./js/up.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
</head>
<body>
<form id="up" action="" method="post">
<input id="image" type="text" name="file"/><input id="submit" type="submit"/>
</form>
</body>
</html> 
```

我的 javascript 文件

```
$(document).ready(function(){
    $('input#submit').click(function(){
        alert('hi');
            /*some codes goes here*/
    });
}); 
```

当页面加载时，控制台显示此错误：`Uncaught ReferenceError: $ is not defined`即使我没有调用任何 jquery 函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:03:16.573

您需要在 jQuery 之后包含依赖于 jQuery 的脚本：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="./js/up.js"></script> 
```

你应该只有一个 jQuery 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T14:03:41.730

你需要删除你的第一个`script`到 jquery，它是一个旧版本..

另外我认为您的 javascript 在`up.js`文件中。该文件在 jQuery 之前被请求。您应该先加载 jQuery，然后再加载您的自定义代码。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="../js/up.js"></script> 
```

您也错误地链接到`up.js`文件。您应该使用`../`而不是`./`, 去父文件夹。

# c# - nHibernate 不冒泡错误

> ID：14688350
> 
> 赞同：1
> 
> 时间：2013-02-04T14:01:43.837
> 
> 标签：c#, sql-server, nhibernate

我确定这是有效的，现在已经停止，我不知道为什么。我的课程太复杂而无法发布，但我制作了一个简单的课程来测试它仍在发生。

我创建了一个类“abc”，它有几个在数据库中不为空的属性。我创建了该类的一个实例，并故意将属性保留为 null，以便它会引发错误。在输出窗口中，错误显示为

> System.Data.dll 中出现“System.Data.SqlClient.SqlException”类型的第一次机会异常 NHibernate.DLL 中出现“NHibernate.Exceptions.GenericADOException”类型的第一次机会异常

但是异常并没有冒泡到我的代码并且没有问题地运行。该行不在数据库中，如果我从 SQL 探查器复制 SQL，我会得到正确的错误“无法将 null 插入列......”

问题是我在事务中创建了几个对象，如果一个对象失败，我希望抛出一个错误，以便我可以回滚所有对象，但是由于错误没有冒泡，我无法捕获它们，所以我无法回滚。

下面实际上不是代码，而是为了演示我的意思：

```
using (NHibernate.ITransaction tx = Session.BeginTransaction())
{
    try
    {
        // Should Fail
        ABC a1 = new ABC();
        a1.prop1 = "1234";
        Session.SaveOrUpdate(a1);

        // Should Save
        ABC a2 = new ABC();
        a2.prop1 = "1234";
        a2.prop2 = "1234";
        Session.SaveOrUpdate(a2);

        // Should Fail
        ABC a3 = new ABC();
        Session.SaveOrUpdate(a3);

        tx.Commit()

    }
    catch (Exception ex)
    {
        tx.Rollback()
        throw ex;
    }
} 
```

在上面的对象中`a1`，`a3`当插入失败时应该抛出错误（并在输出窗口中看到），但它不会被`catch {}`语句捕获，它只是逐步执行并因此`tx.commit`运行并`a2`持久化到数据库（`shouldn't`发生这种情况）。

有任何想法吗？泰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:01:29.373

尝试`Session.Close()`在事务提交后调用。

延迟加载和 NHibernate 缓存有时会出现奇怪的行为。

# angularjs - 如何使用 AngularJS 过滤器默认表搜索结果隐藏？

> ID：14688353
> 
> 赞同：4
> 
> 时间：2013-02-04T14:01:49.327
> 
> 标签：angularjs

在下面的 Angularjs 片段中，默认情况下会显示整个表格，并在您开始输入时被过滤掉。

1.  将其更改为默认不显示任何结果并且仅在至少 3 个结果与搜索查询匹配之后才开始显示结果的最佳做法是什么？

2.  额外的问题，如果输入了至少 2 个字符，你将如何只显示结果？

**网页**：

```
<div ng-app="myApp">
    <div ng-controller="PeopleCtrl">
        <input type="text" ng-model="search.$">
        <table>
            <tr ng-repeat="person in population.sample | filter:search">
                <td>{{person.name}}</td>
                <td>{{person.job}}</td>
            </tr>
        </table>
    </div>
</div> 
```

**主.js**：

```
var myApp = angular.module('myApp', []);
myApp.factory('Population', function () {
    var Population = {};
    Population.sample = [
        {
            name: "Bob",
            job: "Truck driver"
        }
        // etc.
    ];
    return Population;
});

function PeopleCtrl($scope, Population) {
    $scope.people = Population;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T14:26:40.767

实际上，您可以在标记中完成所有这些操作...[这里有一个演示](http://plnkr.co/edit/wPsD0rsC8zMIHXakKJJY?p=preview)

这是您的标记的变化：

```
<input type="text" ng-model="search">
<table ng-show="(filteredData = (population.sample | filter:search)) && filteredData.length >= 3 && search && search.length >= 2">
    <tr ng-repeat="person in filteredData">
        <td>{{person.name}}</td>
        <td>{{person.job}}</td>
    </tr>
</table> 
```

**编辑：更改了我的答案以反映您的要求。**

# git - 需要从另一个存储库复制特定的 Git 提交

> ID：14688359
> 
> 赞同：1
> 
> 时间：2013-02-04T14:02:01.533
> 
> 标签：git, commit

我是 git 新手

我需要得到这个提交[https://github.com/DJNoXD/candied-kernel/commit/3a9f10b82d9a5b6dc54ceab4d7edb60c5a7f19e6](https://github.com/DJNoXD/candied-kernel/commit/3a9f10b82d9a5b6dc54ceab4d7edb60c5a7f19e6)

到我的 git [https://github.com/nayak94/nayak-kernel/commits/0.1](https://github.com/nayak94/nayak-kernel/commits/0.1)

我不知道该怎么做，任何帮助都会很棒

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:07:14.877

这应该可以解决问题：

```
git remote add candied-kernel git@github.com:DJNoXD/candied-kernel.git
git fetch candied-kernel master
git cherry-pick 3a9f10b 
```

如果这是一次性的，您可能希望通过附加`.patch`到 URL（即[https://github.com/DJNoXD/candied-kernel/commit/3a9f10b82d9a5b6dc54ceab4d7edb60c5a7f19e6.patch](https://github.com/DJNoXD/candied-kernel/commit/3a9f10b82d9a5b6dc54ceab4d7edb60c5a7f19e6.patch)）来下载补丁文件，然后使用

```
git am /path/to/3a9f10b82d9a5b6dc54ceab4d7edb60c5a7f19e6.patch 
```

# wpf - 如何通过 WPF 应用程序发送电子邮件并标记为 UnJunk

> ID：14688370
> 
> 赞同：-1
> 
> 时间：2013-02-04T14:02:34.400
> 
> 标签：wpf, vb.net, email, send

嗨，我试图在事件发生时发送通知电子邮件，但问题是标记为垃圾邮件并列在垃圾邮件中的电子邮件，如何避免垃圾邮件并将电子邮件直接发送到收件箱:)

这是我的代码：

```
 Function SendResignEmail(PF As String, User As String, First_Name As String, Last_Name As String, Unit As String, EndDate As Date, Reason As String, JMTS As String, EmailTo() As String, EmailCC() As String, EmailSub As String)
    Dim EmailBody As String = "<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'><html xmlns='http://www.w3.org/1999/xhtml'><head><meta content='en-us' http-equiv='Content-Language' /><meta content='text/html; charset=utf-8' http-equiv='Content-Type' /><title>Untitled 1</title><style type='text/css'> p.MsoNormal    {margin-bottom:.0001pt; font-size:11.0pt;   font-family:'Calibri','sans-serif'; margin-left: 0in;   margin-right: 0in;  margin-top: 0in;} table.MsoNormalTable  {font-size:10.0pt;  font-family:'Times New Roman','serif';}a:link   {color:blue;    text-decoration:underline;  text-underline:single;}.auto-style1 {   font-family: Arial, sans-serif; font-size: 10pt;    color: #9B5F9B;}</style></head><body><p class='MsoNormal'><span style='color:black'>Dear team,</span></p><p class='MsoNormal'><span style='color:black'><o:p>&nbsp;</o:p></span></p><p class='MsoNormal'><span style='color:black'><o:p>&nbsp;</o:p></span></p><p class='MsoNormal'><span style='color:black'>Kindly be informed that the below agent had resigned and his last working day is " & EndDate.ToShortDateString & " </span><b><span style='font-size:12.0pt;color:black'>.</span></b><span style='color:black'><o:p></o:p></span></p><p class='MsoNormal'><span style='color:black'><o:p>&nbsp;</o:p></span></p><table border='0' cellpadding='0' cellspacing='0' class='MsoNormalTable' style='width:491.55pt;margin-left:-1.15pt;border-collapse:collapse;mso-yfti-tbllook: 1184;mso-padding-alt:0in 0in 0in 0in' width='655'>   <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;height:15.75pt'>       <td nowrap style='width: 48.0pt; border: solid windowtext 1.0pt; border-bottom: none; background: #CCC0DA; padding: 0in 5.4pt 0in 5.4pt; height: 15.75pt' width='64'>       <p align='center' class='MsoNormal' style='text-align:center'>      <span style='color:black'>User<o:p></o:p></span></p>        </td>       <td nowrap style='width: 48.0pt; border-top: solid windowtext 1.0pt; border-left: none; border-bottom: none; border-right: solid windowtext 1.0pt; background: #CCC0DA; padding: 0in 5.4pt 0in 5.4pt; height: 15.75pt' width='64'>      <p align='center' class='MsoNormal' style='text-align:center'>      <span style='color:black'>PF<o:p></o:p></span></p>      </td>       <td nowrap style='width: 138.75pt; border-top: solid windowtext 1.0pt; border-left: none; border-bottom: none; border-right: solid windowtext 1.0pt; background: #CCC0DA; padding: 0in 5.4pt 0in 5.4pt; height: 15.75pt' width='185'>       <p align='center' class='MsoNormal' style='text-align:center'>      <span style='color:black'>Name<o:p></o:p></span></p>        </td>       <td nowrap style='width: 85.5pt; border-top: solid windowtext 1.0pt; border-left: none; border-bottom: none; border-right: solid windowtext 1.0pt; background: #CCC0DA; padding: 0in 5.4pt 0in 5.4pt; height: 15.75pt' width='114'>     <p align='center' class='MsoNormal' style='text-align:center'>      <span style='color:black'>Area<o:p></o:p></span></p>        </td>       <td nowrap style='width: 43.05pt; border-top: solid windowtext 1.0pt; border-left: none; border-bottom: none; border-right: solid windowtext 1.0pt; background: #CCC0DA; padding: 0in 5.4pt 0in 5.4pt; height: 15.75pt' width='57'>     <p align='center' class='MsoNormal' style='text-align:center'>      <span style='color:black'>End Date<o:p></o:p></span></p>        </td>       <td nowrap style='width: 70.2pt; border-top: solid windowtext 1.0pt; border-left: none; border-bottom: none; border-right: solid windowtext 1.0pt; background: #CCC0DA; padding: 0in 5.4pt 0in 5.4pt; height: 15.75pt' width='94'>      <p align='center' class='MsoNormal' style='text-align:center'>      <span style='color:black'>Reason<o:p></o:p></span></p>      </td>       <td style='width: 58.05pt; border-top: solid windowtext 1.0pt; border-left: none; border-bottom: none; border-right: solid windowtext 1.0pt; background: #CCC0DA; padding: 0in 5.4pt 0in 5.4pt; height: 15.75pt' width='77'>        <p align='center' class='MsoNormal' style='text-align:center'>      <span style='color:black'>Mob #<o:p></o:p></span></p>       </td>   </tr>   <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes;height:15.75pt'>        <td nowrap style='width:48.0pt;border:solid windowtext 1.0pt;  padding:0in 5.4pt 0in 5.4pt;height:15.75pt' width='64'>      <p align='center' class='MsoNormal' style='text-align:center'>      <span style='font-size:9.0pt;font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;;color:black'>        6303<o:p></o:p></span></p>      </td>       <td nowrap style='width:48.0pt;border:solid windowtext 1.0pt;  border-left:none;padding:0in 5.4pt 0in 5.4pt;height:15.75pt' width='64'>     <p align='center' class='MsoNormal' style='text-align:center'>      <span style='font-size:9.0pt;font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;;color:black'>        " & PF & "<o:p></o:p></span></p>        </td>       <td nowrap style='width:138.75pt;border:solid windowtext 1.0pt;  border-left:none;padding:0in 5.4pt 0in 5.4pt;height:15.75pt' width='185'>      <p align='center' class='MsoNormal' style='text-align:center'>      <span style='color:black'>" & First_Name & " " & Last_Name & "</span><span style='font-size:9.0pt;  font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;;color:black'><o:p></o:p></span></p>       </td>       <td nowrap style='width:85.5pt;border:solid windowtext 1.0pt;  border-left:none;padding:0in 5.4pt 0in 5.4pt;height:15.75pt' width='114'>        <p align='center' class='MsoNormal' style='text-align:center'>      <span style='color:black'>" & Unit & "<o:p></o:p></span></p>        </td>       <td nowrap style='width:43.05pt;border:solid windowtext 1.0pt;  border-left:none;padding:0in 5.4pt 0in 5.4pt;height:15.75pt' width='57'>        <p align='center' class='MsoNormal' style='text-align:center'>      <span style='color:black'>" & EndDate.Day & "/" & EndDate.Month & "/" & EndDate.Year & "<o:p></o:p></span></p>      </td>       <td nowrap style='width:70.2pt;border:solid windowtext 1.0pt;  border-left:none;padding:0in 5.4pt 0in 5.4pt;height:15.75pt' width='94'>     <p align='center' class='MsoNormal' style='text-align:center'>      <span style='color:black'>" & Reason & "<o:p></o:p></span></p>      </td>       <td style='width:58.05pt;border:solid windowtext 1.0pt;border-left:  none;padding:0in 5.4pt 0in 5.4pt;height:15.75pt' width='77'>       <p align='center' class='MsoNormal' style='text-align:center'>      <span style='color:black'>" & JMTS & "<o:p></o:p></span></p>        </td>   </tr></table><p class='MsoNormal'><span style='color:black'><o:p>&nbsp;</o:p></span></p><p class='MsoNormal'><span style='color:#1F497D'><o:p>&nbsp;</o:p></span></p><p class='MsoNormal'><span style='color:black'>For your kind action if any .<o:p></o:p></span></p><p class='MsoNormal'><span style='color:#1F497D'><o:p>&nbsp;</o:p></span></p><p class='MsoNormal'><span style='color:#1F497D'><o:p>&nbsp;</o:p></span></p><p class='MsoNormal'>Thanks!</p><p class='MsoNormal'>&nbsp;</p><p class='MsoNormal'><o:p>&nbsp;</o:p></p><p class='MsoNormal'><span style='font-size:10.0pt;font-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;color:black'><img height='80' src=cid:companylogo width='52' /><!--[if gte vml 1]><v:shapetype id='_x0000_t75' coordsize='21600,21600' o:spt='75' o:preferrelative='t' path='m@4@5l@4@11@9@11@9@5xe' filled='f' stroked='f'><v:stroke joinstyle='miter' xmlns:v='urn:schemas-microsoft-com:vml'/><v:formulas><v:f eqn='if lineDrawn pixelLineWidth 0' xmlns:v='urn:schemas-microsoft-com:vml'/><v:f eqn='sum @0 1 0' xmlns:v='urn:schemas-microsoft-com:vml'/><v:f eqn='sum 0 0 @1' xmlns:v='urn:schemas-microsoft-com:vml'/><v:f eqn='prod @2 1 2' xmlns:v='urn:schemas-microsoft-com:vml'/><v:f eqn='prod @3 21600 pixelWidth' xmlns:v='urn:schemas-microsoft-com:vml'/><v:f eqn='prod @3 21600 pixelHeight' xmlns:v='urn:schemas-microsoft-com:vml'/><v:f eqn='sum @0 0 1' xmlns:v='urn:schemas-microsoft-com:vml'/><v:f eqn='prod @6 1 2' xmlns:v='urn:schemas-microsoft-com:vml'/><v:f eqn='prod @7 21600 pixelWidth' xmlns:v='urn:schemas-microsoft-com:vml'/><v:f eqn='sum @8 21600 0' xmlns:v='urn:schemas-microsoft-com:vml'/><v:f eqn='prod @7 21600 pixelHeight' xmlns:v='urn:schemas-microsoft-com:vml'/><v:f eqn='sum @10 21600 0' xmlns:v='urn:schemas-microsoft-com:vml'/></v:formulas><v:path o:extrusionok='f' gradientshapeok='t' o:connecttype='rect' xmlnsv='urn:schemas-microsoft-com:vml'/><o:lock v:ext='edit' aspectratio='t' xmlns:o='urn:schemas-microsoft-com:office:office'/></v:shapetype><![endif]--><![if !vml]><![endif]><br />&nbsp;</span><span style='font-size:12.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#9B5F9B'><br />Contact Center Notifications on behalf of " & Name & "</span><span style='font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black'> </span><span style='font-size:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;serif&quot;'><o:p></o:p></span></p><p class='MsoNormal' style='margin-bottom:12.0pt'><span class='auto-style1'>Headcount</span><span style='font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#9B5F9B'><br /><br />Zain Jordan <br />PO Box 940821, Amman 11194, Jordan</span><span style='font-size:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;serif&quot;'><o:p></o:p></span></p><p class='MsoNormal' style='margin-bottom:12.0pt'></p></body></html>"
    Try
        Dim SmtpServer As New SmtpClient()
        Dim mail As New MailMessage()
        SmtpServer.Credentials = New Net.NetworkCredential("CCNotifications@xxxxx.com", "xxxxxx")
        SmtpServer.Port = 25
        SmtpServer.Host = "192.168.10.232"
        mail = New MailMessage()

        Dim plainView As AlternateView = AlternateView.CreateAlternateViewFromString(System.Text.RegularExpressions.Regex.Replace(EmailBody, "@<(.|\n)*?>", String.Empty), Nothing, "text/plain")
        Dim htmlView As AlternateView = AlternateView.CreateAlternateViewFromString(EmailBody, Nothing, "text/html")

        'create the LinkedResource (embedded image) 
        Dim logo As New LinkedResource("\\fastdell\users\sales\users\lo'ais\Head_Count\IMG\Zain_logo.jpg")
        logo.ContentId = "companylogo"
        'add the LinkedResource to the appropriate view 
        htmlView.LinkedResources.Add(logo)
        plainView.LinkedResources.Add(logo)

        mail.BodyEncoding = System.Text.Encoding.GetEncoding("utf-8")
        'add the views 

        mail.AlternateViews.Add(htmlView)
        mail.AlternateViews.Add(plainView)

        mail.From = New MailAddress("CCNotifications@xxxx.com", "CC Notifications")
        For i As Integer = 0 To EmailTo.Length - 1
            mail.To.Add(EmailTo(i))
        Next
        For i As Integer = 0 To EmailCC.Length - 1
            mail.CC.Add(EmailCC(i))
        Next
        'mail.Bcc.Add("wall.of.ey3s@gmail.com")

        mail.Subject = EmailSub
        mail.IsBodyHtml = True
        'mail.Body = EmailBody

        SmtpServer.Send(mail)
        'MsgBox("mail send")
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try
    Return Nothing
End Function 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:08:18.307

发送邮件的代码不会影响接收邮件服务器是否将您的邮件解释为垃圾邮件。考虑一下。这将使所有反垃圾邮件措施变得无用，因为垃圾邮件发送者也只会使用该功能。

您唯一能做的就是将发件人邮件地址添加到已知地址列表中。但这必须在接收服务器端完成 - 同样，您的程序无法控制。

# c - 未知长度的可变参数列表的问题

> ID：14688373
> 
> 赞同：1
> 
> 时间：2013-02-04T14:02:36.290
> 
> 标签：c, variadic-functions

有一个函数 my_init(...) 使用变量参数列表。该列表的长度未知，但最多为 100，并且元素始终是字符数组（意味着纯 C 字符串）。

这就是我尝试解码它们的方式：

```
void my_init(...)
{
    va_list vl; 
    int     tagCnt,tagLen=100; 
    char   *listTag,*listValue;

    va_start(vl,tagLen);
    for (tagCnt=0; tagCnt<50; tagCnt++)
    {
        listTag=va_arg(vl,char*);
        if (listTag==0) break;
        listValue=va_arg(vl,char*);

        ... // do some usefult things here
    }
    va_end(vl);
} 
```

...我这样称呼这个函数：

```
my_init("tag1","value1",
        "tag2","value2",
        0); 
```

所以总是有对，列表的末尾用 0 标记。不幸的是 my_init() 失败，在调用 va_start() 之后，vl 包含一些与输入参数无关的废话，并且对 va_arg() 的调用返回无效指针. 那么我的代码有什么问题？

上面给出的代码被缩短了一点，所以它可能无法编译......

谢谢！

==================================================== =================================

编辑：

我更改了代码并以这种方式调用：

```
void my_init(int dummy,...)
{
    va_list vl; 
    int     tagCnt,tagLen=100; 
    char   *listTag,*listValue;

    va_start(vl,dummy);
    for (tagCnt=0; tagCnt<50; tagCnt++)
    {
        listTag=va_arg(vl,char*);
        if (listTag==0) break;
        listValue=va_arg(vl,char*);

        ... // do some usefult things here
    }
    va_end(vl);
}

my_init(0,
        "tag1","value1",
        "tag2","value2",
        0); 
```

独立于使用的头文件，我现在在我的 vl 中得到其他废话，stdargs.h 或 varargs.h 没有任何区别......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:03:45.237

的第二个参数`va_start`必须是最后**命名的函数参数**。换句话说，规范用法是这样的：

```
void my_func(int arg1, float arg2, ...) {

    va_list vl;

    va_start(vl, arg2);

    // Stuff
} 
```

# android - 如何在 Android 的 viewFlipper 侧的文本视图上设置 Click Listener？

> ID：14688374
> 
> 赞同：3
> 
> 时间：2013-02-04T14:02:37.367
> 
> 标签：android, viewflipper

在我的示例新闻应用程序中，我有一个显示新闻标题的视图 Flipper，您可以在下面看到 ViewFlipper 的 XML 代码。

```
<ViewFlipper android:id="@+id/pushFlipper"
        android:layout_width="fill_parent"
        android:layout_height="25dp"
        android:background="#90333333"
        android:flipInterval="4000"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginBottom="10dip"
        >

    </ViewFlipper> 
```

我动态地将 TextViews 添加到此 ViewFlipper 中，以便以动画形式显示新闻标题。这是我将 TextViews 添加到 Flipper 的代码。

现在，我面临的问题是如何在动态 TextViews 上设置监听器，我可以在 textview 上显示的标题的新 Activity 中显示适当的新闻描述。请在这方面帮助我，您的帮助将不胜感激。

```
pushFlipper = ((ViewFlipper) this.findViewById(R.id.pushFlipper));
            pushFlipper.startFlipping();
try
            {
                RSSdata = new RSSHandler();
                for (int i = 2; i < RSSdata.getTitle().size(); i++)
                {
                    TextView tvNewsRSS = new TextView(this);
                    tvNewsRSS.setText(RSSdata.getTitle().get(i).toString());
                    tvNewsRSS.setTextColor(Color.parseColor("#FFFFFF"));
                    tvNewsRSS.setTextSize(14);
                    tvNewsRSS.setGravity(Gravity.CENTER_VERTICAL);

                    pushFlipper.addView(tvNewsRSS);

                }     
            }
            catch(Exception e)
            {
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:24:20.373

一种解决方案可以是从 textview 标签中单击项目时获取 newsId，然后在下一个活动中使用此 newsId 来获取并显示适当的新闻。

代码：

```
try
    {

        for (int i = 0; i < 10; i++)
        {
            TextView tvNewsRSS = new TextView(this);
            tvNewsRSS.setText(RSSdata.getTitle().get(i));
            tvNewsRSS.setTextColor(Color.parseColor("#FFFFFF"));
            tvNewsRSS.setTextSize(14);
            tvNewsRSS.setTag(RSSdata.getId().get(i));
            tvNewsRSS.setGravity(Gravity.CENTER_VERTICAL);
            tvNewsRSS.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    String newsId = v.getTag().toString();

                    // Pass this newsId to next activity via intent putExtra.

                }
            });
            pushFlipper.addView(tvNewsRSS);

        }     
    }
    catch(Exception e)
    {
    } 
```

# matlab - MATLAB GUI 中的优化选项卡

> ID：14688378
> 
> 赞同：14
> 
> 时间：2013-02-04T14:02:50.090
> 
> 标签：matlab, user-interface, tabs, visibility, matlab-guide

我在 MATLAB 的 GUI 中工作，我使用选项卡来组织信息。由于 MATLAB GUIDE 不支持这些选项卡，我只创建了几个`uipanel`s 并更改它们的`'Visible'`字段。但是，当每个面板中的控件数量很大时，在面板之间切换需要一些时间。有谁知道让标签切换更快的方法？

我包括一个基于选项卡的界面的简单示例。

**tab_example_gui.m**

```
% Figure
handles.figure_window = figure(...
    'Units','characters',...
    'Tag','figure_window',...
    'Position',[50 50 80 25],...
    'Name','Tab Example',...
    'DockControls','off',...
    'IntegerHandle','off',...
    'MenuBar','none',...
    'NumberTitle','off',...
    'Resize','off');

% Buttons
handles.tab_panel = uibuttongroup(...
    'Parent',handles.figure_window,...
    'Tag','tab_panel',...
    'Units','characters',...
    'Position',[0 23 80 2],...
    'SelectionChangeFcn',@(hObject,eventdata)tab_example_callback(hObject,eventdata,guidata(hObject)),...
    'BorderType','none');
handles.tab_a = uicontrol(...
    'Parent',handles.tab_panel,...
    'Tag','tab_a',...
    'Units','characters',...
    'Position',[0 0 40 2],...
    'Style','togglebutton',...
    'String','Tab A');
handles.tab_b = uicontrol(...
    'Parent',handles.tab_panel,...
    'Tag','tab_b',...
    'Units','characters',...
    'Position',[40 0 40 2],...
    'Style','togglebutton',...
    'String','Tab B');

% Panel A
handles.panel_a = uipanel(...
    'Parent',handles.figure_window,...
    'Tag','panel_menu',...
    'Units','characters',...
    'Position',[0.1 0 79.8 23],...
    'Visible','On');
handles.panel_a_text = uicontrol(...
    'Parent',handles.panel_a,...
    'Tag','panel_menu_load_id_text',...
    'Units','characters',...
    'Position',[0 0 77 22],...
    'Style','text',...
    'String','This is the tab A');

% Panel B
handles.panel_b = uipanel(...
    'Parent',handles.figure_window,...
    'Tag','panel_menu',...
    'Units','characters',...
    'Position',[0.1 0 79.8 23],...
    'Visible','Off');
handles.panel_b_text = uicontrol(...
    'Parent',handles.panel_b,...
    'Tag','panel_menu_load_id_text',...
    'Units','characters',...
    'Position',[0 0 77 22],...
    'Style','text',...
    'String','This is the tab B');

guidata(handles.figure_window, handles); 
```

**tab_example_callback.m**

```
function tab_example_callback(hObject,eventdata,handles)
    switch get(get(hObject,'SelectedObject'),'Tag')
        case 'tab_a', set(handles.panel_a,'Visible','On'); set(handles.panel_b,'Visible','Off');
        case 'tab_b', set(handles.panel_a,'Visible','Off'); set(handles.panel_b,'Visible','On');
    end
    guidata(handles.figure_window, handles);
end 
```

注意：GUI 将在 5 个选项卡中引入模拟参数。在每个选项卡中，我有大约 15 行；并且每一行都有一个`text`，一`checkbox`和三个`edit`s。对我来说，它看起来并不拥挤。此外，我用最少的代码和开销自行完成了布局和回调。但是，它仍然有非常烦人的标签转换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:35:55.457

也许如果你把手柄放在一个数组中。这样，您就不必逐一检查。这对我来说似乎很快，但“快速”可能意味着很多事情:)

我删除了一些属性以使示例更短...

```
function test(N) % N is the number of tabs
if nargin == 0
    N = 3;
end

% Figure
handles.figure_window = figure(...
    'Units','characters',...
    'Position',[50 50 80 25]);
% Buttons
handles.tab_panel = uibuttongroup(...
    'Parent',handles.figure_window,...
    'Units','characters',...
    'Position',[0 23 80 2]);

alpha = 'ABCDEFGHIJKLMNOPQRSTUVXYZ';
for i_tab=1:N
    % button
    handles.tabs(i_tab) = uicontrol(...
        'Parent',handles.tab_panel,...
        'Units','characters',...
        'Position',[80/N*(i_tab-1) 0 80/N 2],...
        'Style','togglebutton',...
        'String',['Tab ' alpha(i_tab)]);

    % Panel i
    handles.panels(i_tab) = uipanel(...
        'Parent',handles.figure_window,...
        'Units','characters',...
        'Position',[0.1 0 79.8 23],...
        'Visible','Off');
    handles.panel_a_text = uicontrol(...
        'Parent',handles.panels(i_tab),...
        'Units','characters',...
        'Position',[0 0 77 22],...
        'Style','text',...
        'String',['This is the tab ', alpha(i_tab)]);
end
% set callback for all buttons
set(handles.tabs, 'callback', {@tab_example_callback  handles})
% choose tab 1 as active
set(handles.panels(1), 'Visible','On');
guidata(handles.figure_window, handles);

function tab_example_callback(hObject,eventdata,handles)
% set everything invisible
set(handles.panels,'Visible','Off');
% turn on selected panel
set(handles.panels(handles.tabs == hObject), 'Visible','On');
guidata(handles.figure_window, handles); 
```

这对你有帮助吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-12T17:40:26.793

我强烈建议，如果您正在创建任何复杂的 GUI，请查看[GUI Layout Toolbox](http://www.mathworks.co.uk/matlabcentral/fileexchange/27758-gui-layout-toolbox)，并且不要使用 GUIDE - 它只是不适合创建复杂 GUI 的目的（这不是批评，只是它只是设计用于制作快速、简单的 GUI）。

GUI Layout Toolbox 使创建专业标准的 GUI 变得更加容易，并且包括选项卡功能以及其他许多功能，例如轻松调整大小和附加小部件。

解决您在对其他答案的评论中提出的一些问题。GUI Layout Toolbox 不使用 MATLAB 的未记录/不支持/隐藏功能。尽管它不是 MathWorks 的官方产品，但它是由 MathWorks 咨询小组的 Ben Tordoff 和 David Sampson 开发的，并且可以根据许可证免费提供，这意味着您可以使用并包含在已部署的产品中。

作为旁注，您在一条评论中提到您的选项卡每个都包含大约 50 个控件。我想知道真正的解决方案是否可能是重新设计您的 GUI？当然，您会比我更了解什么适合您的应用程序，但是从可用性的角度来看，一次对用户可见的 50 个控件似乎不是一个好主意，并且会给 GUI 重绘时间带来困难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T13:32:47.043

如果您可以随意使用未记录的功能，我建议使用`uitab`or `tabdlg`。请参阅[undocumentedmatlab.com 上的这篇文章](http://undocumentedmatlab.com/blog/tab-panels-uitab-and-relatives/)。

# c++ - 将 std::istream 直接连接到 C-Array/unsigned char *

> ID：14688382
> 
> 赞同：3
> 
> 时间：2013-02-04T14:02:53.487
> 
> 标签：c++, istream

我目前正在处理一个自定义缓冲区类，该类在其内部以经典 C 数组（无符号字符 []）的形式携带其数据。

为了获得对该缓冲区的更舒适的读/写访问，我正在寻找一种方法来构造一个直接连接到 POD 内容的 std::istream 对象......也就是 C-Array 内存。目标是使用所有 std::stream 格式化程序，并且应将实际数据“lorem ipsum”直接写入缓冲区。所以是这样的：

```
std::istream QuirkyBuffer::getIStream() { return std::istream(this->ptr, this->size); }

QuirkyBuffer d;
auto is = d.getIStream();
"lorem ipsum" >> is; 
```

有可能这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:04:33.177

你可以用`std::ostrstream`这个。它已被弃用，但考虑到它的用处，我无法想象它很快就会消失。

否则，编写自己的`omemstream`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:48:10.670

istream 不是问题，问题在于编写流缓冲区，因为例如 ifstream 只是从 istream 派生的一个类，并且包含流缓冲区和一些胶水代码。现在，为了编写流缓冲区，您需要覆盖私有虚拟输入函数。我认为 underflow() 和 uflow() 就足够了，但是使用这些关键字你应该能够自己找到所需的信息。

顺便说一句：流是不可复制的，除非在 C++11 中改变了，所以按值返回是不行的。

# ios - 获取并显示流 URL 数据

> ID：14688384
> 
> 赞同：0
> 
> 时间：2013-02-04T14:02:58.507
> 
> 标签：ios, xcode, url, stream

以下是流 url，不在浏览器中显示任何结果。

[http://streamerapi.finance.yahoo.com/streamer/1.0?s=MSFT,GOOG&k=l10,c10,p20,g00,h00&callback=parent.yfs_u1f&mktmcb=parent.yfs_mktmcb&gencallback=parent.yfs_gencb](http://streamerapi.finance.yahoo.com/streamer/1.0?s=MSFT,GOOG&k=l10,c10,p20,g00,h00&callback=parent.yfs_u1f&mktmcb=parent.yfs_mktmcb&gencallback=parent.yfs_gencb)

如何从上面的 url 获取数据并在 xcode 中显示？

我有用户以下代码：

```
NSURL *url = [NSURL URLWithString:@"http://streamerapi.finance.yahoo.com/streamer/1.0?s=MSFT,GOOG&k=l10,c10,p20,g00,h00&callback=parent.yfs_u1f&mktmcb=parent.yfs_mktmcb&gencallback=parent.yfs_gencb"];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];

NSString *loginString = [NSString stringWithFormat:@"%@:%@", API_USERNAME, API_PASSWORD];

NSData *postData = [loginString dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

[request setURL:url];
[request setHTTPMethod:@"GET"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];

NSError *error;
NSURLResponse *response;
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSLog(@"Data : %@",data); 
```

但它返回`NULL`结果。请告诉我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:27:20.123

这可能无法回答您的问题，但我建议您使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)而不是 NSURLRequest。它使用起来非常简单，并且有一个惊人的文档。

# python - 如何在 scikit-learn 中对 SVM 应用标准化？

> ID：14688391
> 
> 赞同：26
> 
> 时间：2013-02-04T14:03:14.600
> 
> 标签：python, scikit-learn, classification, svm, normalization

我正在使用 scikit-learn 的当前稳定版本 0.13。我正在使用类对一些数据应用线性支持向量分类器[`sklearn.svm.LinearSVC`](http://scikit-learn.org/stable/modules/generated/sklearn.svm.LinearSVC.html#sklearn.svm.LinearSVC)。

在scikit-learn 文档中[关于预处理的章节](http://scikit-learn.org/stable/modules/preprocessing.html)中，我阅读了以下内容：

> 学习算法的目标函数中使用的许多元素（例如支持向量机的 RBF 内核或线性模型的 l1 和 l2 正则化器）假设所有特征都以零为中心并且具有相同顺序的方差。如果一个特征的方差比其他特征大几个数量级，它可能会主导目标函数并使估计器无法按预期正确地从其他特征中学习。

**问题 1：**标准化对于一般的 SVM 有用吗，也适用于像我这样具有线性核函数的那些？

**问题 2：**据我了解，我必须计算训练数据的均值和标准差，并使用 class 对测试数据应用相同的转换[`sklearn.preprocessing.StandardScaler`](http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.StandardScaler.html#sklearn.preprocessing.StandardScaler)。但是，我不明白的是，在将训练数据输入 SVM 分类器之前，我是否必须同时转换训练数据或仅转换测试数据。

也就是说，我是否必须这样做：

```
scaler = StandardScaler()
scaler.fit(X_train)                # only compute mean and std here
X_test = scaler.transform(X_test)  # perform standardization by centering and scaling

clf = LinearSVC()
clf.fit(X_train, y_train)
clf.predict(X_test) 
```

还是我必须这样做：

```
scaler = StandardScaler()
X_train = scaler.fit_transform(X_train)  # compute mean, std and transform training data as well
X_test = scaler.transform(X_test)  # same as above

clf = LinearSVC()
clf.fit(X_train, y_train)
clf.predict(X_test) 
```

简而言之，我是否必须使用`scaler.fit(X_train)`或`scaler.fit_transform(X_train)`在训练数据上才能获得合理的结果`LinearSVC`？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-04T18:45:05.273

两者都不。

`scaler.transform(X_train)`没有任何效果。`transform`操作不到位。你所要做的

```
X_train = scaler.fit_transform(X_train)

X_test = scaler.transform(X_test) 
```

或者

```
X_train = scaler.fit(X_train).transform(X_train) 
```

您总是需要对训练或测试数据进行相同的预处理。是的，标准化总是好的，如果它反映了你对数据的信念。特别是对于 kernel-svm，它通常是至关重要的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-09-16T20:26:04.677

为什么不一次性使用`Pipeline`链接（或组合）转换器和估算器？为您省去分别拟合和转换数据然后使用估算器的麻烦。它也会节省一些空间。

```
from sklearn.pipeline import Pipeline

pipe_lrSVC = Pipeline([('scaler', StandardScaler()), ('clf', LinearSVC())])
pipe_lrSVC.fit(X_train, y_train)
y_pred = pipe_lrSVC.predict(X_test) 
```

# ruby - 如何强制所有请求来自我的网站以避免在 RoR 3.2 中进行欺骗

> ID：14688392
> 
> 赞同：-1
> 
> 时间：2013-02-04T14:03:15.970
> 
> 标签：ruby, ruby-on-rails-3, rewrite, spoofing, rack-rewrite

我的网站刚刚得到恶搞。

我正在使用 RoR 3.2.11 并安装了 rack-rewrite gem。

我在 /app 中创建了 /middleware 目录，并在其中创建了一个 .rb 文件。

现在，我应该如何编写规则以仅允许来自我的页面的请求？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:03:11.807

如果有人使用 HTTP 抓取来复制您的网站，那么除了让他们的生活变得困难和烦人之外，您通常无能为力。

您需要考虑到，您所做的任何使其他站点更难克隆您的站点的操作都会使普通读者变得*非常*困难。强制注册？你会失去访客。加密页面并需要 JavaScript？你会失去读者。

我建议阻止你不喜欢的机器人的 IP，向他们的 ISP 提交关于侵犯版权的报告，如果事情真的很糟糕，请聘请律师。

# ios - Parse.com PFQueryTableViewController 和 Storyboard

> ID：14688399
> 
> 赞同：0
> 
> 时间：2013-02-04T14:03:41.423
> 
> 标签：ios, xcode, parse-platform

我正在尝试使用 Storyboard 设置 PFQueryTableViewController 并且我正在关注[本教程](https://parse.com/tutorials/geolocations)，特别是第 2 节。当我使用 initWithStyle 方法时一切正常，但是当我尝试 Storyboard 方法时，我得到：'NSInvalidArgumentException'，原因：'** * setObjectForKey: 对象不能为 nil (key: classname)'。

这是我的 MasterViewController.h：

```
#import <Parse/Parse.h>

@interface MasterViewController : PFQueryTableViewController

@end 
```

这是我的身份检查员的照片：

![身份检查员](../Images/4ec6566c8e2f2a75a352d8cb62e426c4.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:02:15.437

解决了。问题是 Xcode 缓存是从同名的旧项目中提取的。清除缓存解决了我所有的问题。

# php - 使用 strpos 与数组进行比较

> ID：14688409
> 
> 赞同：1
> 
> 时间：2013-02-04T14:04:20.360
> 
> 标签：php

我有以下代码：

```
if ( (strpos($page,array('careers','employers','specialist-areas','job-search','job-details','job-apply','register-your-cv') == true)) ) { echo ' class="selected"'; } 
```

这应该是在数组中找到与`$page`变量的任何匹配项。

但是它不起作用......我是否使用了`strpos`错误的数组？

`$page`可能包含的示例：`"default careers page"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:06:00.053

Strpos 用于在字符串中查找字符串。你需要的是[in_array](http://www.php.net/manual/en/function.in-array.php)。编辑：误解了你的问题。这是应该工作的代码。

```
if((count(array_intersect(array('careers','employers','specialist-areas','job-search','job-details','job-apply','register-your-cv'), explode(' ', $page)))) ) 
{
  echo ' class="selected"';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:08:04.617

使用此代码：

```
$array = array(
    'careers',
    'employers',
    'specialist-areas',
    'job-search',
    'job-details',
    'job-apply',
    'register-your-cv',
);

foreach($array as $string) {
    if((strpos($page,$string) !== false))  {
        echo ' class="selected"';
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T14:09:42.437

你需要`$page`在数组的每个元素中寻找，所以你需要一些这样的函数：

```
function strpos_array($haystack, $needles) {
    if ( is_array($needles) ) {
        foreach ($needles as $str) {
            if ( is_array($str) ) {
                $pos = strpos_array($haystack, $str);
            } else {
                $pos = strpos($haystack, $str);
            }
            if ($pos !== FALSE) {
                return $pos;
            }
        }
    } else {
        return strpos($haystack, $needles);
    }
}
if (strpos_array($page, $pages) !== FALSE) {
    echo ' class="selected"'; 
} 
```

另外，请确保您不要像这样编写代码：

```
if (strpos($page, $url) == true) {} 
```

因为 if`$page`位于 的开头`$url`， strpos 将返回 0 ，这将使您的比较失败。

# ajax - 在页面加载时启动 AJAX 调用是一种不好的做法吗？

> ID：14688411
> 
> 赞同：0
> 
> 时间：2013-02-04T14:04:25.797
> 
> 标签：ajax

我对所有前端都使用 javascript，仅提供服务的 PHP 具有 RESTful API。

在页面加载以从 API 获取数据时立即启动 AJAX 调用是一种不好的做法吗？我应该先从 PHP 后端发送初始数据，然后才使用 javascript 进行最终修改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:27:51.187

这不是坏习惯。今天的大多数页面都包含一个或多个脚本，并且这些脚本尚未按顺序加载。

因此，假设您的内容提供后端足够快，这只会给现有请求增加一个请求。如果您在 DOM 准备就绪时立即启动此 ajax 调用（即不等待所有资源都被加载），则内容很可能在图像加载之前可用。

这就是为什么在 Ajax 应用程序中越来越普遍的做法是只在最初发送应用程序，然后让它获取其数据。

# delphi - TListView 标题列中的复选框 - 如何防止它窃取焦点？

> ID：14688420
> 
> 赞同：8
> 
> 时间：2013-02-04T14:04:45.773
> 
> 标签：delphi, listview, checkbox, delphi-5

这与问题[如何在 TListView 标题列中显示复选框有关？](https://stackoverflow.com/questions/8730212/how-to-show-a-check-box-in-tlistview-header-column).

我想使用[这个答案](https://stackoverflow.com/a/8735733/937125)中的代码`@Sertac Akyuz`。（我也需要这个在 WinXP 中工作）

但我想让标题 CheckBox 不会从 ListView 或其他活动控件中窃取焦点。

一个快速的解决方法是将焦点*始终*设置到 ListView 中`ListHeaderWndProc`：

```
...
FListHeaderChk.Checked := not FListHeaderChk.Checked;
ListView1.SetFocus;
// code that checks/clears all items 
```

但这有点丑。因为CheckBox首先聚焦，然后焦点又回到ListView。另外，如果我单击 CheckBox 并将鼠标拖到 CheckBox 外，则无法接收到`BN_CLICKED`消息。

我也试过：

```
TCheckBox = class(StdCtrls.TCheckBox)
  private
    procedure WMMouseActivate(var Message: TWMMouseActivate); message WM_MOUSEACTIVATE;
  protected
    procedure CreateParams(var Params: TCreateParams); override;
  public
    procedure DefaultHandler(var Message); override;
  end;

procedure TCheckBox.WMMouseActivate(var Message: TWMMouseActivate);
begin
  Message.Result := MA_NOACTIVATE; // no effect!
end;

procedure TCheckBox.CreateParams(var Params: TCreateParams);
const
  WS_EX_NOACTIVATE = $08000000;
begin
  inherited;
  Params.ExStyle := Params.ExStyle or WS_EX_NOACTIVATE; // no effect!
end;

procedure TCheckBox.DefaultHandler(var Message);
begin
  case TMessage(Message).Msg of
    WM_SETFOCUS:
    begin
      if IsWindow(TWMSetFocus(Message).FocusedWnd) then
      begin
        TMessage(Message).Result := 1; // ???
        // inherited // ??? 
        Windows.SetFocus(TWMSetFocus(Message).FocusedWnd);
        Exit;
        // Checkbox fails to receive `BN_CLICKED` message
      end;
    end;
  end;
  inherited;
end; 
```

没有任何效果。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T19:28:49.500

不要处理通知`WM_COMMAND`消息，否则`BN_CLICKED`您希望在按下按钮时单击然后在单击后*向外拖动*的行为将不起作用。单击包括按下和释放控件上的按钮。

相反，您可以查找是否在控件内单击了鼠标，如果是，则切换选中状态。之后您可以吃掉鼠标消息，因此控件不会获得焦点。但这应该在复选框的窗口过程中检查，而不是列表视图。修改后的代码：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ComCtrls, StdCtrls;

type
  TForm1 = class(TForm)
    ListView1: TListView;
    CheckBox1: TCheckBox;
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    FListHeaderChk: TCheckBox;
    FSaveListHeaderChkWndProc: TWndMethod;
    FListHeaderWnd: HWND;
    procedure ListHeaderChkWndProc(var Msg: TMessage);
  end;

var
  Form1: TForm1;

implementation

uses
  commctrl;

{$R *.dfm}

function GetCheckSize: TPoint;     // from checklst.pas
begin
  with TBitmap.Create do
    try
      Handle := LoadBitmap(0, PChar(OBM_CHECKBOXES));
      Result.X := Width div 4;
      Result.Y := Height div 3;
    finally
      Free;
    end;
end;

procedure TForm1.FormCreate(Sender: TObject);
var
  CheckSize: TPoint;
  HeaderSize: TRect;
begin
  ListView1.HandleNeeded;
  FListHeaderWnd := ListView_GetHeader(ListView1.Handle);

  FListHeaderChk := TCheckBox.Create(nil);
  CheckSize := GetCheckSize;
  FListHeaderChk.Height := CheckSize.X;
  FListHeaderChk.Width := CheckSize.Y;

  ShowWindow(ListView1.Handle, SW_SHOWNORMAL);
  windows.GetClientRect(FListHeaderWnd, HeaderSize);
  FListHeaderChk.Top := (HeaderSize.Bottom - FListHeaderChk.Height) div 2;
  FListHeaderChk.Left := FListHeaderChk.Top;

  FListHeaderChk.Parent := Self;
  FListHeaderChk.TabStop := False;
  windows.SetParent(FListHeaderChk.Handle, FListHeaderWnd);
  FSaveListHeaderChkWndProc := FListHeaderChk.WindowProc;
  FListHeaderChk.WindowProc := ListHeaderChkWndProc;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  FListHeaderChk.Free;
end;

procedure TForm1.ListHeaderChkWndProc(var Msg: TMessage);
begin
  if (Msg.Msg = WM_MOUSEACTIVATE) and (Msg.LParamLo = HTCLIENT) then begin
    Msg.Result := MA_NOACTIVATEANDEAT;
    FListHeaderChk.Checked := not FListHeaderChk.Checked;
    Exit;
  end;

  FSaveListHeaderChkWndProc(Msg);
end;

end. 
```

# jquery - IE上的帧/无帧之间的jquery淡入行为不一致

> ID：14688421
> 
> 赞同：0
> 
> 时间：2013-02-04T14:04:52.650
> 
> 标签：jquery, internet-explorer, frameset

如果主站点在**框架集中**运行，我会遇到不一致的**jQuery** 方法行为。效果仅在**IE**上（在 IE 9 上测试）。`fadeIn`

 ****我有阻塞的 UI 元素：

```
.ui-widget-overlay {
    background-color: #2b2922;
    opacity: 0.3;
    filter: Alpha(Opacity = 30);
} 
```

该元素使用`fadeIn`方法显示。详细地说，它是 PrimeFaces 代码的一部分。更改`fadeIn`为后`fateTo`，一切正常：

```
this.blocker.fadeTo(0, 0.3); 
```

现在，挡板是透明的，所以它是可见的，但下面的所有东西也可以通过“玻璃”看到。正是为什么要使用透明度。当整个应用程序在企业门户上运行时，它在除 IE 之外的任何东西上都以这种方式工作，它在**框架集**内运行。阻挡“玻璃”完全不透明，就好像不透明度被忽略了一样。

走近一看，发现添加了inplace样式`filter:alpha`，使元素不透明，是通过`fadeIn`方法制作的。出于某种原因，只有在框架集中运行应用程序时才会这样做......

所以我的问题是，为什么 jQuery 在使用框架集时会特别表现这种行为？我正在使用 jQuery 版本**1.8.1**。****

# java - 如何告诉“appengine-maven-plugin”不要使用 oauth2 部署到 appengine？

> ID：14688424
> 
> 赞同：0
> 
> 时间：2013-02-04T14:05:05.607
> 
> 标签：java, google-app-engine, maven, appengine-maven-plugin

我们正在从非官方的“kidleit”maven 插件切换到使用官方的“appengine-maven-plugin” [http://code.google.com/p/appengine-maven-plugin/](http://code.google.com/p/appengine-maven-plugin/)

我们的应用程序不是新的，但是现在部署时，我们收到错误：

```
404 Not Found This application does not exist (app_id=u'appname') 
```

`appcfg.sh`在命令行和 Eclipse 中运行时，当告知用于身份验证时会弹出相同的消息`--oauth2`，结果证明这是“appengine-maven-plugin”的默认设置。

有没有办法告诉官方 maven 插件不要使用 Oauth2 身份验证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T14:49:40.010

通过阅读源代码弄清楚了。我可以将`oauth2`属性指定`false`在插件的 pom 配置中：

```
<plugin>
    <groupId>com.google.appengine</groupId>
    <artifactId>appengine-maven-plugin</artifactId>
    <version>${appengine.target.version}</version>
    <!-- below specify oauth2 to be false, as it's true by default -->
    <configuration>
      <oauth2>false</oauth2>
    </configuration>
  </plugin> 
```

# xml - xml解析器错误：xml编码错误

> ID：14688425
> 
> 赞同：0
> 
> 时间：2013-02-04T14:05:15.390
> 
> 标签：xml, encoding, xml-parsing, php

我有一个 html 表单从用户（姓名-密码-邮件-电话）接收输入数据，当我尝试通过插入阿拉伯语数据对其进行测试时，它将其保存到 xml 为“????” ，我将这一行添加到我的 php 脚本中

```
header('Content-Type: text/html; charset=Windows-1256'); 
```

来处理这个问题，但数据在第一次测试时像“íÇÓãíä”一样存储，然后我一直收到这个错误。谁能告诉我那是什么，我该如何解决？

> 警告：simplexml_load_file() [function.simplexml-load-file]：mowasla.xml:12：解析器错误：输入不正确的 UTF-8，指示编码！字节：第 25 行 D:\wamp\www\mowasla\sign.php 中的 0xED 0xC7 0xD3 0xE3

# php - zend2：如何销毁确切的会话？

> ID：14688426
> 
> 赞同：1
> 
> 时间：2013-02-04T14:05:23.523
> 
> 标签：php, zend-framework2

我是 Zend2 的新手。我不知道如何销毁特定会话。

```
$check_username = $session->offsetExists('sess_chk_usr_name');
if(empty($check_username))
{
   $session->offsetSet('sess_chk_usr_name', 'test user');
} 
```

我需要删除会话 sess_chk_usr_name，请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T15:03:44.600

我意识到它已被回答，但它被问了很多。ZF2 中的会话容器本质上是[ArrayObjects](http://php.net/manual/en/class.arrayobject.php)，并设置了标志[ARRAY_AS_PROPS](http://www.php.net/manual/en/class.arrayobject.php#arrayobject.constants.array-as-props)。这意味着它们的行为类似于数组和对象，因此您不仅可以使用对象提供的方法来访问属性，还可以像数组一样对它们进行操作（尽管应该注意，`array_*`函数族不工作）

二传手

```
$session = new Container('foo');

// these are all equivalent means to the same end
$session['bar'] = 'foobar';

$session->bar = 'foobar';

$session->offsetSet('bar', 'foobar'); 
```

吸气剂

```
$bar = $session['bar'];

$bar = $session->bar;

$bar = $session->offsetGet('bar'); 
```

伊塞特（）

```
$test = isset($session['bar']);

$test = isset($session->bar);

$test = $session->offsetExists('bar'); 
```

未设置（）

```
unset($session['bar']);

unset($session->bar);

$session->offsetUnset('bar'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T10:18:48.593

销毁特定会话：\

```
 $session->getManager()->getStorage()->clear('ses_variable');

  or

 unset($_SESSION['ses_variable']); 

 or

 session_destroy('ses_variable'); 
```

# c# - 扩展 Sitecore 并使用纯粹的 UI 问题

> ID：14688433
> 
> 赞同：0
> 
> 时间：2013-02-04T14:05:48.013
> 
> 标签：c#, sitecore

如何按顺序显示两个 Sheer UI 对话框？我想要做的是显示一个`Input`对话框，然后`Confirm`在`Input`对话框成功完成后显示一个对话框。

目前，在`Command.Run()`我刚刚拥有的方法中：

```
 if (!args.IsPostBack) {
               SheerResponse.Input(
                    "Enter the new event date (ISO format YYYY-MM-DD):",
                    "",
                    @"\d{4}\-\d{2}\-\d{2}",
                    "'$Input' is not a valid date.",
                    100
                );

                args.WaitForPostBack();
        } else {
            ...do stuff...
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:14:05.843

在示例代码中，我们显示第一个对话框而不是确认对话框。希望这有帮助

```
 public void Run(ClientPipelineArgs args)
    {
        try
        {
            if (!args.IsPostBack)
            {
                Context.ClientPage.ClientResponse.ShowModalDialog(url.ToString(), true);
                args.WaitForPostBack();
            }
            else if (args.HasResult)
            {
                // Small job confirmation. User decide 'no'
                if (args.Result == "no")
                {
                    return;
                }

                if(args.Result == "result")
                {
                  SheerResponse.Confirm("message");
                  args.WaitForPostBack();
                }
            }
        }
        catch (EndpointNotFoundException ex)
        {
    //something 
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:57:42.340

看来我需要获取`Command`要调用的命令的实例，然后调用`Execute()`它，例如：

```
 private void CreateEvent(ClientPipelineArgs args)
    {
        var org_lang = Language.Current;
        Language lang = Language.Parse("en-gb");
        Language.Current = lang;
        Database db = Configuration.Factory.GetDatabase(args.Parameters["database"]);
        Item parent = db.GetItem(args.Parameters["id"], lang);

        try {
            // Create command context
            CommandContext command_context = new CommandContext(parent);

            // Get command
            Command command = CommandManager.GetCommand("fairsite:createcampaign");

            // Execute command
            command.Execute(command_context);
        } finally {
            Language.Current = org_lang;
        }
    } 
```

# r - 如何在每行 2 个向量中找到对并计算结果

> ID：14688434
> 
> 赞同：0
> 
> 时间：2013-02-04T14:05:49.033
> 
> 标签：r

我有一个带有 2 个向量的文本文件（我将它们作为 data.frame 读取）作为示例。

```
x =c(1,2,1,7,5,8) ; y = c(1,2,1,8,4,8) 
```

我希望找到 2 个向量之间的所有对。我目前正在写入文件并使用系统调用：

```
ans11 = system('grep "^1,1" | wc -l ') to get the result. 
```

使用我使用的 grep

```
'grep "^1,1" | wc -l '  and I get a result of 2
'grep "^2,2" | wc -l '  and I get a result of 1
'grep "^8,8" | wc -l '  and I get a result of 1 
```

我如何用 R 做到这一点？我会使用 grep 和 wc 但在 R 中必须有一种方法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:08:03.900

这就是你所追求的吗？

```
expand.grid(unique(x),unique(y)) 
```

**编辑：**既然你说计数，我假设你想知道每对出现多少次。你可以这样做：

```
require(data.table)
dt <- data.table(expand.grid(x,y))
setkey(dt, "Var1", "Var2")
dt[, .N, by="Var1,Var2"]

#     Var1 Var2 N
#  1:    1    1 4
#  2:    1    2 2
#  3:    1    4 2
#  4:    1    8 4
#  5:    2    1 2
#  6:    2    2 1
#  7:    2    4 1
#  8:    2    8 2
#  9:    5    1 2
# 10:    5    2 1
# 11:    5    4 1
# 12:    5    8 2
# 13:    7    1 2
# 14:    7    2 1
# 15:    7    4 1
# 16:    7    8 2
# 17:    8    1 2
# 18:    8    2 1
# 19:    8    4 1
# 20:    8    8 2 
```

# java - 如何扫描所有 mp3 文件，而不仅仅是从我制作的 android 媒体播放器的特定路径

> ID：14688439
> 
> 赞同：1
> 
> 时间：2013-02-04T14:06:01.003
> 
> 标签：java, android, eclipse, recursion, android-mediaplayer

所以我找到了这个 关于如何制作音乐播放器的教程[http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/ 。](http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/)

问题是它只获取 /sdcard/Music/ 内的 mp3 文件，我还想获取 Music 文件夹内的文件夹内的 mp3 文件。

所以我已经将返回歌曲列表的函数更改为递归函数，但它不起作用。你能在代码中发现我的错误吗？

filesList 来自 File[] 类型，而 songList 是 ArrayList>。当这个函数第一次被调用时，它会得到 path="/sdcards/Music/"

```
 public ArrayList<HashMap<String, String>> getPlayList(String path)
{

    File home = new File(path);
    filesList=home.listFiles();

    if (home.listFiles(new FileExtensionFilter()).length > 0) 
    {

        for (File file : home.listFiles(new FileExtensionFilter()))
        {
            HashMap<String, String> song = new HashMap<String, String>();
            song.put("songTitle", file.getName().substring(0, (file.getName().length() - 4)));
            song.put("songPath", file.getPath());

            // Adding each song to SongList
            songsList.add(song);
        }

    }

        for(int i=0;i<filesList.length;i++)
    {
        if((filesList[i].isDirectory()))
        getPlayList(filesList[i].getAbsolutePath());
    }

    return songsList;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:25:29.843

我可以看到一些错误，但最大的错误是当您递归时，您会丢弃生成的地图。

其他问题：

*   您对没有列出的后缀之一的每个文件进行递归......但您实际上应该只对目录进行递归。

*   您的方法每个目录最多调用`listFiles(...)`3 次。

*   您的方法可以调用`listFiles(...)`表示`File`文件而不是目录的 a 。这将返回 a `null`，如果您不对其进行测试，您将获得 NPE。（而且因为你也递归文件......）

*   HashMap 可能是代表“歌曲”的糟糕选择。创建一个自定义类。

*   测试一些布尔表达式`== false`是蹩脚的。使用`!`运算符！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-26T01:09:37.017

此代码对我有用，请尝试添加

```
String media_path = Environment.getExternalStorageDirectory().getPath();
    String[] splitPath= media_path .split("/");
    final String MEDIA_PATH = "/" + splitPath[1] + "/";
    private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
    private String mp3Pattern = ".mp3"; 
```

并将您的 java 代码替换为此

```
// Constructor
    public SongsManager() {

    }

    /**
     * Function to read all mp3 files and store the details in
     * ArrayList
     * */
    public ArrayList<HashMap<String, String>> getPlayList() {
        System.out.println(MEDIA_PATH);
        if (MEDIA_PATH != null) {
            File home = new File(MEDIA_PATH);
            File[] listFiles = home.listFiles();
            if (listFiles != null && listFiles.length > 0) {
                for (File file : listFiles) {
                    System.out.println(file.getAbsolutePath());
                    if (file.isDirectory()) {
                        scanDirectory(file);
                    } else {
                        addSongToList(file);
                    }
                }
            }
        }
        // return songs list array
        return songsList;
    }

    private void scanDirectory(File directory) {
        if (directory != null) {
            File[] listFiles = directory.listFiles();
            if (listFiles != null && listFiles.length > 0) {
                for (File file : listFiles) {
                    if (file.isDirectory()) {
                        scanDirectory(file);
                    } else {
                        addSongToList(file);
                    }

                }
            }
        }
    }

    private void addSongToList(File song) {
        if (song.getName().endsWith(mp3Pattern)) {
            HashMap<String, String> songMap = new HashMap<String, String>();
            songMap.put("songTitle",
                    song.getName().substring(0, (song.getName().length() - 4)));
            songMap.put("songPath", song.getPath());

            // Adding each song to SongList
            songsList.add(songMap);
        }
    } 
```

但是这段代码加载缓慢:(

# java - 如何在 JTable 中执行搜索并显示结果

> ID：14688441
> 
> 赞同：-1
> 
> 时间：2013-02-04T14:06:02.740
> 
> 标签：java, swing, jtextfield

我不确定如何通过双击另一个框架来填充一个框架`JTextField`。`JTable`我希望当用户双击记录`JTable`并关闭框架时，应该将相同的数据放入`JTextField`框架中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:56:58.397

将您添加`JTable`到模态[`JDialog`](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)或[`JOptionPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#features).

*   对于单击，添加一个，如此[处](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)`ListSelectionListener`所示。

*   对于双击，添加一个，如此[处](https://stackoverflow.com/a/8305989/230513)`MouseListener`所示。

无论哪种情况，您都可以使用`getSelectedRow()`. 注意：结果是在*视图*坐标中。如果您使用该结果来访问您的`TableModel`，“永远记得[翻译](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)单元格坐标”。

# android - 如何在客户端发送和接收消息？

> ID：14688442
> 
> 赞同：0
> 
> 时间：2013-02-04T14:06:12.633
> 
> 标签：android

我正在构建一个非常简单的应用程序，它由一个客户端组成，用户在其中输入一个发送到服务器的字符串。然后，一旦服务器收到消息，它就会将相同的消息发送回客户端。我的问题是，当我尝试读取服务器发送的消息时，客户端出现错误。

打开套接字后，以下代码段显示了客户端如何尝试发送和接收消息：

```
PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket
                      .getOutputStream())),true);
BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

out.println(message);

if (in.readLine()!=null)

    response=in.readLine(); 
```

读取“in”变量 (in.readLine()) 时出现 strictMode$AndroidBlockGuardPolicy.onNetwork() 异常

服务器端如下：

```
while ((line = in.readLine()) != null) {
                            final String line2=line;
                            handler.post(new Runnable() {
                                @Override
                                public void run() {
                                    serverStatus.setText(line2);
                                }
                            });
                            out.println("Message received:"+line2); 
```

我唯一想要的是向客户端发送一条消息，确认已收到服务器上的一条消息。我面临的另一个问题是需要让服务器有时间接收消息，读取它并将其发送回客户端，因此客户端应该等待一秒钟。我可以为此目的使用什么？睡眠方法合适吗？

```
Thread.sleep(1000); 
```

或者

```
systemClock.sleep(1000); 
```

提前致谢

**[更新]**

这是客户端的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_client);

    serverIp = (EditText) findViewById(R.id.server_ip);
    connectPhones = (Button) findViewById(R.id.connect_phones);
    connectPhones.setOnClickListener(connectListener);

    messageServer = (EditText) findViewById(R.id.message);
    communicatePhones = (Button) findViewById(R.id.send_message);
    messageServer.setVisibility(View.GONE);
    communicatePhones.setVisibility(View.GONE);

}

private OnClickListener connectListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        if (!connected) {
            serverIpAddress = serverIp.getText().toString();
            if (!serverIpAddress.equals("")) {
                Thread cThread = new Thread(new ClientThread());
                cThread.start();
            }
        }
    }
};

public class ClientThread implements Runnable {

    public void run() {
        try {
            Log.d("ClientActivity", serverIpAddress);
            InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
            Log.d("ClientActivity", "C: Connecting...");
            socket = new Socket(serverAddr, ServerActivity.SERVERPORT);

            handler.post(new Runnable() {
                  @Override
                  public void run() {
                      serverIp.setVisibility(View.GONE);
                      connectPhones.setVisibility(View.GONE);
                      messageServer.setVisibility(View.VISIBLE);
                      communicatePhones.setVisibility(View.VISIBLE);

                      communicatePhones.setOnClickListener(communicateListener);

                      mensajeRecibido = (TextView) findViewById(R.id.mensaje_recibido);
                      mensajeRecibido.append(response);
                  }
            });
            //socket.close();
            Log.d("ClientActivity", "C: Closed.");
        } catch (Exception e) {
            Log.e("ClientActivity", "C: Error", e);
            connected = false;
        }
    }

    private OnClickListener communicateListener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            message = messageServer.getText().toString();
            if (!serverIpAddress.equals("")) {
                try {
                    PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket
                            .getOutputStream())), true);        

                    BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                    out.println(message);
                    Log.d("ClientActivity", "C: Sent.");
                    //Thread.sleep(6000);
                    SystemClock.sleep(2000);
                  /*  handler.postDelayed(new Runnable() { 
                         public void run() { 
                              my_button.setBackgroundResource(R.drawable.defaultcard); 
                         } 
                    }, 2000); */
                    if (in.readLine()!=null)
                        response=in.readLine();

                } catch (IOException e) {
                    Log.e("ClientActivity", "S: Error", e);
                }              
            }
        }
    };
} 
```

}

我应该在哪里为communicateListener 创建OnClickListener 对象？我试图将它放在 run 方法中，但出现了未知的communicateListener 变量或无效的私有修饰符之类的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:23:06.443

你知道你不应该通过不是主线程的线程来访问 GUI 元素吗？

通过主线程访问网络是一种不好的做法……在我看来，communicateListener 完全错了……它是在 GUI 线程还是在 ClientThread 中运行？它假设作为 onClick 事件在 GUI 线程中运行 - 但里面的逻辑看起来像网络线程。

您的主线程（GUI 线程）应该向网络线程发送消息（您可以使用处理程序来执行此操作，或者只是调用网络线程的方法，该方法可以是主线程的数据成员 - 但 onClick 应该是在主线程中实现！）。

# rstudio - 在 R-Studio 中搜索所有打开的文件

> ID：14688446
> 
> 赞同：18
> 
> 时间：2013-02-04T14:06:24.380
> 
> 标签：rstudio

R-Studio 中的普通搜索功能 (ctrl + f) 只是搜索当前选择的文件。有没有办法搜索所有打开的文件？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-04T14:45:23.077

汤姆，

查看以下文档：

[http://www.rstudio.com/ide/docs/using/navigation](http://www.rstudio.com/ide/docs/using/navigation)

没有办法专门在源代码编辑器中的打开文件中搜索给定的字符串，但您可以使用“在文件中查找”或“转到文件/函数”。

乔什

产品经理 - RStudio

# python - 使用 lxml 从 xml 中查找不同的节点和值

> ID：14688453
> 
> 赞同：1
> 
> 时间：2013-02-04T14:06:50.953
> 
> 标签：python, xml, lxml

我弄清楚为什么 lxml 会解析我正在查看的部分 xml 而不是其他位。

以下代码段有效，并为我提供了我需要的所有标题：

```
doc = lh.fromstring(resp)
for product in doc.xpath('.//item'):
    prices = product.xpath(".//title/text()") 
```

然而，一个简单的改变

```
doc = lh.fromstring(resp)
for product in doc.xpath('.//item'):
    prices = product.xpath(".//itemId/text()") 
```

或者

```
doc = lh.fromstring(resp)
for product in doc.xpath('.//item'):
    prices = product.xpath(".//globalId/text()") 
```

只是将价格作为空结果的数量返回。

下面给出的 XML...

```
<findItemsByProductResponse>
  <ack>Success</ack>
  <version>1.12.0</version>
  <timestamp>2013-02-04T13:35:57.106Z</timestamp>
  <searchResult count="31">
    <item>
      <itemId>130842622974</itemId>
      <title>BONES - COMPLETE SEASON 4 - BLURAY</title>
      <globalId>EBAY-US</globalId>
    <primaryCategory>
      <categoryId>617</categoryId>
      <categoryName>DVDs & Blu-ray Discs</categoryName>
    </primaryCategory>
    <galleryURL>
      http://thumbs3.ebaystatic.com/m/mnuTBPOWZ-6F4kIHS1mj3gg/140.jpg
    </galleryURL>
    <viewItemURL>
      http://www.ebay.com/itm/BONES-COMPLETE-SEASON-4-BLURAY-/130842622974?pt=US_DVD_HD_DVD_Blu_ray
    </viewItemURL>
    <productId type="ReferenceID">78523575</productId>
    <paymentMethod>PayPal</paymentMethod>
    <autoPay>false</autoPay>
    <postalCode>60544</postalCode>
    <location>Plainfield,IL,USA</location>
    <country>US</country>
    <shippingInfo>
      <shippingServiceCost currencyId="USD">0.0</shippingServiceCost>
      <shippingType>Free</shippingType>
      <shipToLocations>Worldwide</shipToLocations>
      <expeditedShipping>true</expeditedShipping>
      <oneDayShippingAvailable>false</oneDayShippingAvailable>
      <handlingTime>1</handlingTime>
    </shippingInfo>
    <sellingStatus>
      <currentPrice currencyId="USD">12.99</currentPrice>
      <convertedCurrentPrice currencyId="USD">12.99</convertedCurrentPrice>  
      <sellingState>Active</sellingState>
      <timeLeft>P3DT23H12M7S</timeLeft>
    </sellingStatus>
    <listingInfo>
      <bestOfferEnabled>false</bestOfferEnabled>
      <buyItNowAvailable>false</buyItNowAvailable>
      <startTime>2013-01-29T12:48:04.000Z</startTime>
      <endTime>2013-02-08T12:48:04.000Z</endTime>
      <listingType>FixedPrice</listingType>
      <gift>false</gift>
    </listingInfo>
    <returnsAccepted>true</returnsAccepted>
    <condition>
      <conditionId>1000</conditionId>
      <conditionDisplayName>Brand New</conditionDisplayName>
    </condition>
    <isMultiVariationListing>false</isMultiVariationListing>
    <topRatedListing>true</topRatedListing>
  </item> 
```

ps 以获得额外的奖励，我将寻找已转换的CurrentPrice 作为下一步（只是想我应该一次解决一个谜） - 我要使用的代码看起来像

```
doc = lh.fromstring(resp)
for product in doc.xpath('.//item'):
    prices = product.xpath(".//sellingStatus/convertedCurrentPrice/text()") 
```

这似乎是正确的还是有更好的方法来做到这一点？

谢谢，

马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:23:39.987

尝试使用`itemid`，因为我认为`lxml`将标签转换为小写。还有为什么不使用：

```
doc.xpath('.//item/itemid/text()") 
```

# c++ - 从 char* 到流

> ID：14688460
> 
> 赞同：0
> 
> 时间：2013-02-04T14:07:36.960
> 
> 标签：c++, compression

我想使用字节对编码来解压缩字节数组。我拥有的源代码（不是我的）是使用文件流逐字节读取文件。但是，我想解压缩`char *`.

我一直在尝试使用 stringstream 和其他东西来转换它，但我不知道如何做到这一点。

我想这样使用它：`expand(char *inputarray, char *outputarray)`

我是 C++ 新手，刚从 vb.net 切换过来，所以不要对我太苛刻 :)

这是代码：

```
/* expand.c */
/* Copyright 1994 by Philip Gage */

#include <stdio.h>

/* decompress data from input to output */
void expand (FILE *input, FILE *output)
{
  unsigned char left[256], right[256], stack[30];
  short int c, count, i, size;

  /* unpack each block until end of file */
  while (( count = getc ( input )) != EOF )
  {
    /* set left to itself as literal flag */
    for ( i = 0 ; i < 256; i++ )
    {
      left[i] = i;
    }

    /* read pair table */
    for ( c = 0 ; ; )
    {
      /* skip range of literal bytes */
      if ( count > 127 )
      {
        c += count -127;
        count = 0;
      }
      if ( c==256 )
      { 
        break;
      }

      /* read pairs, skip right if literal */
      for ( i = 0; i <= count; i++, c++ )
      {
        left[c] = getc(input);
        if ( c != left[c] )
        {
          right[c] = getc(input);
        }
      }
      if (c == 256)
      {
        break;
      }
      count = getc(input);
    }

    /* calculate packed data block size */
    size = 256 * getc(input) + getc(input);

    /* unpack data block */
    for ( i = 0 ; ; )
    {
      /* pop byte from stack or read byte */
      if ( i )
      { 
        c = stack[--i];
      }
      else
      {
        if ( !size--)
        {
          break;
        }
        c = getc(input);
      }

      /* output byte or push pair on stack */
      if ( c == left[c] )
      {
        putc(c, output);
      }
      else
      {
        stack[i++] = right[c];
        stack[i++] = left[c];
      }
    }
  }
}

void main ( int argc, char *argv[] )
{
  FILE *infile, *outfile;

  if ( argc != 3 )
  {
    printf("Usage: expand infile outfile\n");
  }
  else
  {
    if (( infile = fopen(argv[1],"rb"))==NULL)
    {
      printf("Error opening input %s\n",argv[1]);
    }
    else
    {  
      if ((outfile=fopen(argv[2],"wb"))==NULL)
      {
        printf("Error opening output %s\n", argv[2]);
      }
      else
      {
        expand ( infile, outfile );
        fclose ( outfile );
        fclose ( infile );
      }
    }
  }
}

/* end of file */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:21:34.480

我猜这可以满足您的要求。函数`str_getc()`和`str_putc()`等价于`putc(int , FILE *)`和`getc(FILE *)`

```
int sCtr = 0, dCtr = 0;
int str_getc(char *str) { return str[sCtr++]; } //char * equivalent of getc()
void str_putc(int c, char *str) { str[dCtr++] = c; } //char * equivalent of putc()

void expand (char *input, char *output)
{
  unsigned char left[256], right[256], stack[30];
  short int c, count, i, size;

  /* unpack each block until end of file */
  while (( count = str_getc ( input )) != -1)
  {
    /* set left to itself as literal flag */
    for ( i = 0 ; i < 256; i++ )
    {
      left[i] = i;
    }

    /* read pair table */
    for ( c = 0 ; ; )
    {
      /* skip range of literal bytes */
      if ( count > 127 )
      {
        c += count -127;
        count = 0;
      }
      if ( c==256 )
      { 
        break;
      }

      /* read pairs, skip right if literal */
      for ( i = 0; i <= count; i++, c++ )
      {
        left[c] = str_getc(input);
        if ( c != left[c] )
        {
          right[c] = str_getc(input);
        }
      }
      if (c == 256)
      {
        break;
      }
      count = str_getc(input);
    }

    /* calculate packed data block size */
    size = 256 * str_getc(input) + str_getc(input);

    /* unpack data block */
    for ( i = 0 ; ; )
    {
      /* pop byte from stack or read byte */
      if ( i )
      { 
        c = stack[--i];
      }
      else
      {
        if ( !size--)
        {
          break;
        }
        c = str_getc(input);
      }

      /* output byte or push pair on stack */
      if ( c == left[c] )
      {
        str_putc(c, output);
      }
      else
      {
        stack[i++] = right[c];
        stack[i++] = left[c];
      }
    }
  }
}

/* end of file */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:11:48.900

所有 C++ 输入流都有一个[`get`](http://en.cppreference.com/w/cpp/io/basic_istream/get)函数，可用于一次获取一个字符。并且输出流具有相应的[`put`](http://en.cppreference.com/w/cpp/io/basic_ostream/put)功能。

只需在需要的地方更换。

当然，普通的输入输出操作符`>>`也`<<`可以使用。

* * *

如果你想直接处理数组，这也很容易，只要你学会了如何处理指针。然后只需将输入和输出数组传递给函数，并在获取字节时使用 eg`left[c] = *input++;`并在编写时使用 eg `*output++ = c;`。

* * *

您还可以使用标准 C++ 容器[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)来存储数据。在这种情况下，您使用 eg `std::vector<char>`，并使用迭代器来获取和设置单个字符。

* * *

这实际上都是非常基本的东西，你应该自己快速学习。只需阅读有关指针、数组、C++[标准 I/O 功能](http://en.cppreference.com/w/cpp/io)和[标准容器的更多信息](http://en.cppreference.com/w/cpp/container)

# php - 替换PHP上引号内所有出现的char

> ID：14688462
> 
> 赞同：0
> 
> 时间：2013-02-04T14:07:39.713
> 
> 标签：php, regex, escaping, preg-replace

我怎么能转换这样的东西：

```
"hi (text here) and (other text)" come (again) 
```

对此：

```
"hi \(text here\) and \(other text\)" come (again) 
```

基本上，我想“只”转义引号内的括号。

**编辑**

我是正则表达式的新手，所以我尝试了这个：

```
$params = preg_replace('/(\'[^\(]*)[\(]+/', '$1\\\($2', $string); 
```

但这只会逃避第一次出现的 (.

**编辑 2**

也许我应该提到我的字符串可能已经转义了这些括号，在这种情况下，我不想再次转义它们。

顺便说一句，我需要它同时适用于双引号和单引号，但我认为只要我有其中一个的工作示例，我就可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:20:06.750

这应该适用于单引号和双引号：

```
$str = '"hi \(text here)" and (other text) come \'(again)\'';

$str = preg_replace_callback('`("|\').*?\1`', function ($matches) {
    return preg_replace('`(?<!\\\)[()]`', '\\\$0', $matches[0]);
}, $str);

echo $str; 
```

输出

```
"hi \(text here\)" and (other text) come '\(again\)' 
```

它适用于 PHP >= 5.3。如果您有较低版本（> = 5），则必须将回调中的匿名函数替换为单独的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:27:04.570

您可以为此使用[preg_replace_callback ；](http://php.net/preg_replace_callback)

```
// outputs: hi \(text here\) and \(other text\) come (again)
print preg_replace_callback('~"(.*?)"~', function($m) {
    return '"'. preg_replace('~([\(\)])~', '\\\$1', $m[1]) .'"';
}, '"hi (text here) and (other text)" come (again)'); 
```

已经转义的字符串呢？

```
// outputs: hi \(text here\) and \(other text\) come (again)
print preg_replace_callback('~"(.*?)"~', function($m) {
    return '"'. preg_replace('~(?:\\\?)([\(\)])~', '\\\$1', $m[1]) .'"';
}, '"hi \(text here\) and (other text)" come (again)'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T14:41:44.713

给定字符串

```
$str = '"hi (text here) and (other text)" come (again) "maybe (to)morrow?" (yes)'; 
```

迭代法

```
 for ($i=$q=0,$res='' ; $i<strlen($str) ; $i++) {
   if ($str[$i] == '"') $q ^= 1;
   elseif ($q && ($str[$i]=='(' || $str[$i]==')')) $res .= '\\';
   $res .= $str[$i];
 }

 echo "$res\n"; 
```

但是如果你是递归的粉丝

```
 function rec($i, $n, $q) {
   global $str;
   if ($i >= $n) return '';
   $c = $str[$i];
   if ($c == '"') $q ^= 1;
   elseif ($q && ($c == '(' || $c == ')')) $c = '\\' . $c;
   return $c . rec($i+1, $n, $q);
 }

 echo rec(0, strlen($str), 0) . "\n"; 
```

结果：

```
"hi \(text here\) and \(other text\)" come (again) "maybe \(to\)morrow?" (yes) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T14:49:13.870

这是使用该[`preg_replace_callback()`](http://php.net/manual/en/function.preg-replace-callback.php)功能的方法。

```
$str = '"hi (text here) and (other text)" come (again)';
$escaped = preg_replace_callback('~(["\']).*?\1~','normalizeParens',$str);
// my original suggestion was '~(?<=").*?(?=")~' and I had to change it
// due to your 2nd edit in your question. But there's still a chance that
// both single and double quotes might exist in your string.

function normalizeParens($m) {
    return preg_replace('~(?<!\\\)[()]~','\\\$0',$m[0]);
    // replace parens without preceding backshashes
}
var_dump($str);
var_dump($escaped); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-17T10:39:35.643

这可以在没有在 regex 调用中嵌套 regex 调用的情况下完成。我也不赞同带有条件和临时变量的冗长循环。

这项任务需要召唤的英雄是`\G`——“继续”元字符。它允许从字符串中的某个位置开始匹配，并从最后一次匹配完成的位置继续匹配。

代码：（[演示](https://3v4l.org/hcCCk)）

```
$str = '"hi (text here) and (other text)" come (again) and "(again)", right?';

echo preg_replace(
         '~(?:\G(?!^)|"(?=[^"]+"))[^"()]*(?:"(*SKIP)(*FAIL)|\K[()])~',
         '\\\$0',
         $str
     ); 
```

输出：

```
"hi \(text here\) and \(other text\)" come (again) and "\(again\)", right? 
```

细分：（[演示](https://regex101.com/r/EZ0Lgt/1)）

```
(?:               #start noncapturing group 1
  \G(?!^)         #continue, do not match from start of string
  |               #OR
  "(?=[^"]+")     #match double quote then lookahead for the second double quote
)                 #end noncapturing group 1
[^"()]*           #match zero or more characters not (, ), or "
(?:               #start noncapturing group 2
  "(*SKIP)(*FAIL) #consume but do not replace
  |               #OR
  \K              #forget any previously matched characters
  [()]            #match an opening or closing parenthesis
)                 #end noncapturing group 2 
```

当转义字符应被取消其在字符串/模式中的正常含义时，此解决方案不适应边缘场景。

# python - 将数字转换为字典中的整数

> ID：14688463
> 
> 赞同：0
> 
> 时间：2013-02-04T14:07:39.617
> 
> 标签：python

```
dic = { 'a': '3','b':'4'} 
```

我希望它变成这样：

```
dic = {'a':3,'b':4} 
```

换句话说，我想从数字中删除引号。我正在使用 Python。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T14:08:49.143

使用 dict-comprehension 并将值转换为`int`：

```
dic = {k:int(v) for k,v in dic.iteritems()} 
```

如果您不使用 2.7+，则必须使用以下内容：

```
dic = dict( (k, int(v)) for k, v in dic.iteritems() ) 
```

如果您使用 >= Py 3，`iteritems`则不存在，因此您使用：

```
dic = {k:int(v) for k,v in dic.items()} 
```

而且，在我得到另一条评论之前，我将提出一种通用（就地）方法：

```
for key in dic:
    dic[key] = int(dic[key]) 
```

# css - '显示：表格；' 在容器和 'display:table-cell;' 对孩子？

> ID：14688464
> 
> 赞同：1
> 
> 时间：2013-02-04T14:07:43.153
> 
> 标签：css, responsive-design, css-tables

可以`display: table;`在容器元素`display: table-cell;`及其子元素上使用，还是应该有一个`display: table-row;`中间的包装器？

**我是说...**

```
<div style="display: table;">
   <div style="display: table-cell;"></div>
   <div style="display: table-cell;"></div>
</div> 
```

**或者**

```
<div style="display: table;">
   <div style="display: table-row;">
      <div style="display: table-cell;"></div>
      <div style="display: table-cell;"></div>
   </div>
</div> 
```

`display: table-row;`当您有多行时才有意义。但就我而言，我仅将它用于多列响应式布局（这显然意味着单行），因为它比使用`float`或其他东西更简单。

所以，问题是，对于单行多列布局，是否可以`display: table;`在容器元素`display: table-cell;`及其子元素上设置中间没有`display: table-row;`包装器？

我见过一些网站这样做（即他们不使用`display: table-row;`）。[这是一个例子](http://mashable.com/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:10:40.890

将在您的外部（表格）中生成一个[匿名表格行框](http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes)`div`以包含所有内部`div`s（表格单元格），因此如果您知道您希望所有表格单元格属于同一行，这是完全可以接受的。

# java - Java Connect 数据源永无止境

> ID：14688465
> 
> 赞同：2
> 
> 时间：2013-02-04T14:07:48.883
> 
> 标签：java, unit-testing, datasource, glassfish-3, junit4

我正在编写一个 JUnit 测试，试图测试与 SqlServer 数据库的连接（我知道，我知道......我不应该对数据库进行单元测试）。问题是，我已经在 glassfish 中设置了数据源，实际上，ping 测试“成功”了。但是！，当我尝试这个时：

注意：配置是：来自本地 Glassfish 的单元测试（ping OK），远程数据库

```
@Test
public void simpleConnect() {

    try {
        Context ctx = new InitialContext();
        DataSource dataSource = (DataSource) ctx.lookup("MyDataSource");
        Connection con = dataSource.getConnection();
        assertTrue(con != null && dataSource != null);
    }
    catch (NamingException ex) {
        fail("Cannot get connection: " + ex);
    }
    catch (SQLException ex) {
        fail("Cannot get connection: " + ex);
    }

} 
```

什么都没有发生，测试永远不会结束，NO 抛出 Ok 或 Fail。我不知道我是否真的得到了联系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:13:43.313

尝试关闭连接。

```
finally{ con.close; } 
```

通常在数据源上进行 Junit 测试是不行的，真的需要吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:14:49.333

测试中没有任何明显导致它挂起的东西。我建议在调试器中运行它以隔离它挂起的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:25:07.100

要连接到远程 Glassfish 服务器的 JNDI 上下文，需要将属性传递给 InitialContext 构造函数：

```
Properties props = new Properties();
props.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.enterprise.naming.SerialInitContextFactory");
props.setProperty("org.omg.CORBA.ORBInitialHost", "localhost");
props.setProperty("org.omg.CORBA.ORBInitialPort", "3700");
InitialContext ctx = new InitialContext(props); 
```

您可以将其称为集成测试而不是单元测试，并且您没有违法！

就个人而言，我不会在集成测试中使用这种从远程 Glassfish 实例中查找 DataSource 的方法，我会使用[Commons DBCP](http://commons.apache.org/dbcp/)或类似方法创建一个 DataSource，以便在 GlassFish 关闭时进行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T16:04:46.010

这个想法最初是尝试测试与数据源的连接，我正在尝试 JUnit，但在我的情况下不起作用，所以，我找到了使用 JSP 页面的解决方案。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@page import="java.sql.ResultSet"%>
<%@page import="java.sql.PreparedStatement"%>
<%@page import="java.sql.SQLException"%>
<%@page import="java.sql.Connection"%>
<%@page import="javax.sql.DataSource"%>
<%@page import="javax.naming.InitialContext"%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                   "http://www.w3.org/TR/html4/loose.dtd">

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Test DataSource Connection</title>
  </head>
<body>
<h1>Connecting to Pooled Database</h1>  
<%
    InitialContext ctx = new InitialContext();
    DataSource ds = (DataSource) ctx.lookup("MyDataSource");
    Connection connection = ds.getConnection();

    if (connection == null) {
        throw new SQLException("Error establishing connection!");
    }

    PreparedStatement stmt = null;
    ResultSet result = null;
    stmt = connection.prepareStatement("{call StoredProcedure(?,?)}");
    stmt.setString(1, "1");
    stmt.setString(2, "2");
    result = stmt.executeQuery();

    while (result.next()) {
        out.print(result.getString(1) + "<br>");
    }
%>

<h2>DataSource Working!</h2>
</body>
</html> 
```

当您运行 JSP 时，这将检索对存储过程的调用的结果集。显然你可以用一个简单的查询替换调用（从表中选择*）

如果您可能需要有关如何创建、连接和配置数据源的信息，请查看以下链接： http: [//netbeans.dzone.com/connection-pooling-glassfish-nb](http://netbeans.dzone.com/connection-pooling-glassfish-nb)

# php - 在 Doctrine 2 (Symfony 2) 中对具有可排序行为的实体进行排序

> ID：14688469
> 
> 赞同：5
> 
> 时间：2013-02-04T14:08:00.827
> 
> 标签：php, symfony, doctrine-orm, doctrine-extensions

我创建了一个具有可[排序](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/sortable.md)行为的实体，并且有一个关于使用它的问题。
设置和获取位置的方法对我来说还不够，所以我想 用下面的代码做简单的**moveUp**和**moveDown方法：**

```
public function moveUp() {
    ++$this->position;
}

public function moveDown() {
    if($this->position != 0)
        --$this->position;
} 
```

有了这个实现，**moveUp**方法对增加已经是最大位置的项目没有限制。*禁止增加此类项目的最佳方法是什么？*我听说直接在实体中进行自定义查询不是一个好习惯，那么如何检查项目是否已经具有最大值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T09:39:12.303

同样的问题，通过阅读我注意到的代码：

```
// Compute position if it is negative
if ($newPosition < 0) {
    $newPosition += $this->maxPositions[$hash] + 2; // position == -1 => append at end of list
    if ($newPosition < 0) $newPosition = 0;
} 
```

（在[SortableListener:141](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/lib/Gedmo/Sortable/SortableListener.php#L141)中）

我想通过设置`-1`为位置，它将被移动到列表的末尾。并将`-2`其放在倒数第二位。

* * *

**编辑**：对不起，我回答得太快了，我还想补充：

我认为你不需要自己限制位置，`SortableListener`意志：

```
// Set position to max position if it is too big
$newPosition = min(array($this->maxPositions[$hash] + 1, $newPosition)); 
```

因此，您的`moveUp()`功能可能是（顺便说一句，您是否反转了`moveUp`？`moveDown`）：

```
public function moveUp()
{
    if ($this->position != 0) {
        $this->position--;
    }
}
public function moveDown()
{
    $this->position++;
} 
```

* * *

**更新**：经过一些测试，事实证明该功能存在错误。

`setPosition(-1)`会将对象放在列表的末尾，但会在位置上产生间隙。

我在这里转载了它：[https ://github.com/l3pp4rd/DoctrineExtensions/pull/908](https://github.com/l3pp4rd/DoctrineExtensions/pull/908)

我希望它会得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:41:02.317

好吧，您可以连接一个事件侦听器，该侦听器将使用从数据库中获取的最大值填充 SortableMaxAware 接口 d 实体。这当然很麻烦，但是您正在使用 ORM :) 玩得开心。

# rotation - 使用 imagemagick 旋转透明 gif

> ID：14688472
> 
> 赞同：2
> 
> 时间：2013-02-04T14:08:06.763
> 
> 标签：rotation, imagemagick, transparent, gif

我要用透明颜色旋转一个 gif 图像。但是在旋转之后，图像失去了透明度并且具有不透明的背景。我怎么能用透明颜色和透明背景正确地做到这一点？

这是我的命令：

```
convert test.gif -alpha set -rotate 30 -background transparent rotate.gif 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:50:52.193

使用“-background none”。像这样：

```
convert -background none -rotate 30 test.gif rotate.gif 
```

这应该保留原始图像中的任何透明度，同时使原始图像未覆盖的额外画布空间也透明。

# implementation - 类图操作

> ID：14688473
> 
> 赞同：3
> 
> 时间：2013-02-04T14:08:07.763
> 
> 标签：implementation, uml, class-diagram, operation

建模类图需要一组相互关联的类，每个类都有一组属性和操作。

我的问题是：我应该如何以及在哪里为这些操作建模实现（主体）？

问是因为我在理解概念的应用方面感到困惑`class`，，`interface``abstract class`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:20:40.573

我同意 Interface 和 Abstract 是一组“空”（即没有代码）操作。它实际上并不存在模型实现的地方我的意思是每个工具 RSx、Rhapsody、Modelio 等都有自己的策略。它可以是作为 UML 注释、OpaqueBehavior 或操作拥有的活动的模型。UML 没有定义代码（操作体）的位置和方式。

我使用 Modelio 添加了 Java 代码建模的屏幕截图。正如您所看到的特定 UML Comment ，在 UML 操作下创建了名为 Code 并且该注释的主体是方法的代码![Java你好词](../Images/4e176d85a9059809de153a9501ff74cd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:19:14.147

当在 UML 中表示一个类时，该框将包含三个部分。第一部分是类的名称 第二部分是类变量的名称。第三部分是类方法的名称（包括参数类型和返回值）。

类（具有实现）和接口（基本上是没有实现的空方法列表）之间的区别在于接口将在其名称上方有一个专用标记。

当一个类使用一个接口时，它“承诺”实现该接口中描述的所有功能。

总结一下： - 抽象类：可以包含变量、抽象方法（没有实现的“空”方法）和常规方法。抽象类不能被实例化。

*   接口：一组“空”方法

*   类：一个类可以扩展一个（也只能是一个）抽象类，在这种情况下，它需要实现抽象方法。一个类还可以实现多个接口（同样，该类必须实现接口中定义的方法）。

# java - Jitterbit客户端启动错误：

> ID：14688474
> 
> 赞同：1
> 
> 时间：2013-02-04T14:08:14.797
> 
> 标签：java, jdk1.5, jitterbit

我已经安装了 jittrbit 客户端 4.0.7.14。我正在尝试开始使用

```
jitterbit_client 
```

我收到以下错误：

```
The specified Java(TM) Virtual machine '/usr/lib/jvm/jdk1.5.0' is not in the current users        PATH
The Jitterbit client requires Java 1.5.0.
You can download it for free from Sun: http://java.sun.com/j2se/1.5.0/download.jsp
Also check out http://www.jitterbit.com/forums. 
```

我的java版本是：

```
java -version
java version "1.5.0_22"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_22-b03)
Java HotSpot(TM) Server VM (build 1.5.0_22-b03, mixed mode) 
```

我的 $JAVA_HOME 变量包含：

```
/usr/lib/jvm/jdk1.5.0 
```

和 $PATH 变量是：

```
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/lib/jvm/jdk1.5.0/bin 
```

我哪里错了？

# java - 如何在应用程序的 UI 部分中找到服务的“句柄”或编写主 Activity 的更好方法

> ID：14688484
> 
> 赞同：2
> 
> 时间：2013-02-04T14:09:16.927
> 
> 标签：java, android, service

我编写了一个包含服务来执行工作的应用程序。主 Activity 有一个 UI，该 UI 在创建服务期间使用传递的消息进行更新。我的问题是，在主 Activity 初始创建服务期间，消息处理程序是有效的，并且可以很好地报告来自服务的消息。如果我按下“返回”或“主页”按钮，主 Activity 似乎已被丢弃，但服务仍在执行。

最后，当我再次启动应用程序时，我可以告诉服务正在运行（因为它通过蓝牙与硬件进行通信）但 UI 更新程序的句柄不再有效，并且应用程序没有收到状态更新。

那么，有没有办法获得服务的“句柄”或“意图”，这样我就可以将它传递给新的消息处理程序，或者有没有更好的方法来“分类”主活动，这样它就不会被破坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:03:34.150

请按照以下步骤操作，或者如果您正在执行此操作，请再次验证

1.  onbind()-->返回绑定器；
2.  扩展一个名为 Binder 的类，覆盖从那里返回此服务引用的方法。
3.  制作一个实用方法说：服务中的getText，它从服务返回数据
4.  在您的主要活动中实现服务连接接口覆盖服务连接/断开的两个方法

5.on serviceconnected -> 使用 ibinder 对象调用 getService 方法将其转换回您的服务。

1.  因此，现在您通过上述步骤获得了服务对象，现在您可以在主要活动中调用服务的 getText 方法，因此您可以说 -- **String text_returned=your_service.getText()**将此文本设置在您想要的任何位置。

我希望它有帮助。

# scala - 如何在 Play 中结合身体解析器和安全性

> ID：14688485
> 
> 赞同：3
> 
> 时间：2013-02-04T14:09:21.747
> 
> 标签：scala, functional-programming, playframework-2.0, playframework-2.1

我在示例项目中使用 ZenTask 中实现的安全解决方案的变体：

目标是结合`withAuth`，`Action(parse.json)`但我不知道如何。

我的安全特质

```
def withAuth(f: => Int => Request[AnyContent] => Result) = {
    Security.Authenticated(userid, onUnauthorized) { userid =>
      Action(request => f(userid.toInt)(request))
    }
  } 
```

我想像往常一样使用内置的身体解析器：

```
def newReport() = Action(parse.json) { request => 
```

而不是在我的控制器中手动将正文解析为 json。

```
def newReport() = withAuth { userId =>
    { request =>
      request.body.asJson match {
        case Some(json) =>
          json.validate[Report](Reports.readsWithoutUser).map {
            case _: Report =>
              Reports.newReport(_)
              Ok("")
          }.recoverTotal {
            e =>
              val errors = JsError.toFlatJson(e)
              Logger.error(errors.toString)
              BadRequest("Detected error:" + errors)
          }
        case None => BadRequest("Json object missing from request")
      }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:16:34.247

然后，您应该简单地使用带有主体解析器 ( `apply[A](bodyParser: BodyParser[A])(block: Request[A] => Result)`) 的重载 Action。

```
def withAuth[A](p: BodyParser[A])(f: => Int => Request[A] => Result): Action[(Action[A], A)] = {
  Security.Authenticated(userid, onUnauthorized) { userid =>
    Action(p)(request => f(userid.toInt)(request))
  }
}

// Convenience for when you don't need a BP
def withAuth(f: => Int => Request[AnyContent] => Result): Action[(Action[AnyContent], AnyContent)] = {
  withAuth(BodyParsers.parse.anyContent)(f)
} 
```

# jquery - 搜索引擎可见性和 jquery 加载功能

> ID：14688490
> 
> 赞同：0
> 
> 时间：2013-02-04T14:09:42.347
> 
> 标签：jquery, search, indexing, search-engine, dynamic-content

由于标题可能有点神秘，我会直截了当地说：我开发了一个网站，它在结构上提供了一个菜单，一旦你点击而不是重定向你，页面内容就会被导入到一个特定的容器中（一个 div #container)，使用函数 jquery $(#container).load(content_page.php)。

因此，我有一个 index.php 页面，其中包含整个网站的结构和许多其他 php 页面，其内容可以根据菜单部分在 index.php 页面（在 div #container 内）加载。

现在我想知道：搜索引擎索引是否有问题？每个php页面的内容都会被索引？

为了帮助索引，我暂时只是在索引中输入了一组关键字作为元标记。几个飞蛾已经过去了，但是当我在谷歌中查找时，我只能通过输入其名称作为搜索参数来找到我的站点。仅仅插入页面中的关键字或其他单词，我无法获得相同的结果。有什么建议么？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:24:22.950

搜索引擎不执行 JavaScript。如果您`index.php`只包含没有任何内容的结构标记，那么您将不会获得很好的排名。这些搜索引擎不会知道您的内容实际上是在其他页面上，例如`content_page.php`他们无法在 HTML 中找到这些内容。

更好的方法是确保您的重要链接（链接到内容页面）指向实际的内容页面。也就是说，它们实际上链接到包含完整标记（结构和内容）的实际页面。然后，您可以使用 JavaScript**逐步增强**这些链接。也就是说，您捕获他们的点击事件，将内容加载到容器中并阻止默认操作（即重定向到链接页面）。

有几种方法可以实现这一点：

*   提供每个页面的完整版本和纯内容版本。例如，让您的链接指向整个页面`index.php?p=about`并让您的 JavaScript 仅加载`about.php`（或`content.php?p=about`或其他）。`include()`在您的服务器端，通过ing 页面结构内的内容为每个页面生成完整版本应该是微不足道的。这样做的好处是您的 JavaScript 请求需要下载的更少，从而为访问者节省了带宽。
*   仅提供每个页面的完整版本并仅替换 JavaScript 中的内容。`$.load()`允许您[仅将一个页面片段](http://api.jquery.com/load/#loading-page-fragments)而不是整个页面加载到目标容器中。缺点是您将始终在每个请求上下载一个完整的页面（包括结构标记）。

# sql - 如果更新查询影响多于一行，则跳过更新查询

> ID：14688491
> 
> 赞同：0
> 
> 时间：2013-02-04T14:09:44.293
> 
> 标签：sql, tsql, sql-server-2005, sql-update

> **可能重复：**
> [仅当一行受到影响时如何执行更新？](https://stackoverflow.com/questions/14650197/how-to-execute-an-update-only-if-one-row-would-be-affected)

我在 SQL Server 2005 中有一个更新查询

```
update custom_graphics_files 
set actual_file_Name = @CorrectName 
where actual_file_Name = @FileName 
```

现在如果有多个`actual_file_name`，我想跳过更新查询，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:11:29.687

```
update t
set t.actual_file_Name = @CorrectName 
FROM custom_graphics_files t
INNER JOIN
(
   SELECT actual_file_Name, COUNT(*) TheCount
   FROM custom_graphics_files 
   GROUP BY actual_file_Name
) t2 ON t.actual_file_Name = t2.actual_file_Name AND TheCount = 1
where t.actual_file_Name = @FileName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:27:02.053

这是您可以获得的最“可读”的查询：

```
update custom_graphics_files 
set actual_file_Name = @CorrectName 
where actual_file_Name = @FileName
and (select count(1) from custom_graphics_files where actual_file_Name = @FileName) = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:20:35.247

我喜欢为此目的使用窗口函数：

```
with toupdate as (
      select cgf.*, COUNT(*) over (PARTITION by actual_file_name) as ActCnt
      from custom_graphics_files
     )
update toupdate
    set actual_file_Name = @CorrectName 
    where actual_file_Name = @FileName and ActCnt = 1 
```

在大表上，这可能不是最有效的解决方案，具体取决于`actual_file_Name = @FileName`.

# php - 在 Mountain Lion 上使用 Homebrew 安装 mcrypt 支持 php54 的问题

> ID：14688492
> 
> 赞同：4
> 
> 时间：2013-02-04T14:09:48.943
> 
> 标签：php, macos, homebrew, mcrypt

我正在尝试使用 Homebrew 在 Mountain Lion 上的 php 5.4.11 中安装 mcrypt 支持，但遇到了无法解决的问题。

我已经在我的 Mac 上手动安装了 PHP 5.4.11。mcrypt 以前是使用 Homebrew 安装的。

当我加载 phpMyAdmin 时，它会告诉我未启用 mcrypt。

所以，搜索谷歌，我意识到不知何故，mcrypt 没有被加载，因为当我加载我的 phpinfo 文件时没有引用它。

@DavidYell 在回答另一个问题时，[在 OSX Mountain Lion 上为 PHP 安装 mcrypt 扩展](https://stackoverflow.com/questions/14595841/installing-mcrypt-extension-for-php-on-osx-mountain-lion)建议进行以下修复

`brew install mcrypt php53-mcrypt`

以下是我发出命令的结果：

```
$ brew install mcrypt php54-mcrypt
Error: mcrypt-2.5.8 already installed
==> Installing php54-mcrypt dependency: autoconf
==> Downloading http://ftpmirror.gnu.org/autoconf/autoconf-2.69.tar.gz
######################################################################## 100.0%
==> ./configure --prefix=/usr/local/Cellar/autoconf/2.69
==> make install
  /usr/local/Cellar/autoconf/2.69: 69 files, 2.0M, built in 29 seconds
==> Installing php54-mcrypt dependency: freetype
==> Downloading https://downloads.sf.net/project/machomebrew/Bottles/freetype-2.4.10.mountainlion.bottle.tar.gz
######################################################################## 100.0%
==> Pouring freetype-2.4.10.mountainlion.bottle.tar.gz
  /usr/local/Cellar/freetype/2.4.10: 56 files, 2.5M
==> Installing php54-mcrypt dependency: gettext
==> Downloading https://downloads.sf.net/project/machomebrew/Bottles/gettext-0.18.2.mountain_lion.bottle.tar.gz
######################################################################## 100.0%
==> Pouring gettext-0.18.2.mountain_lion.bottle.tar.gz
==> Caveats
This formula is keg-only: so it was not symlinked into /usr/local.

OS X provides the BSD gettext library and some software gets confused if both are in the library path.

Generally there are no consequences of this for you. If you build your
own software and it requires this formula, you'll need to add to your
build variables:

    LDFLAGS:  -L/usr/local/opt/gettext/lib
    CPPFLAGS: -I/usr/local/opt/gettext/include

==> Summary
  /usr/local/Cellar/gettext/0.18.2: 366 files, 11M
==> Installing php54-mcrypt dependency: libpng
==> Downloading https://downloads.sf.net/project/machomebrew/Bottles/libpng-1.5.13.mountainlion.bottle.tar.gz
######################################################################## 100.0%
==> Pouring libpng-1.5.13.mountainlion.bottle.tar.gz
  /usr/local/Cellar/libpng/1.5.13: 14 files, 1.0M
==> Installing php54-mcrypt dependency: zlib
==> Downloading http://zlib.net/zlib-1.2.7.tar.gz
######################################################################## 100.0%
==> Patching
patching file configure
==> ./configure --prefix=/usr/local/Cellar/zlib/1.2.7
==> make install
==> Caveats
This formula is keg-only: so it was not symlinked into /usr/local.

Mac OS X already provides this software and installing another version in
parallel can cause all kinds of trouble.

Generally there are no consequences of this for you. If you build your
own software and it requires this formula, you'll need to add to your
build variables:

    LDFLAGS:  -L/usr/local/opt/zlib/lib
    CPPFLAGS: -I/usr/local/opt/zlib/include

==> Summary
  /usr/local/Cellar/zlib/1.2.7: 9 files, 384K, built in 15 seconds
==> Installing php54-mcrypt dependency: php54
==> Downloading http://www.php.net/get/php-5.4.11.tar.bz2/from/this/mirror
######################################################################## 100.0%
==> Downloading patches
######################################################################## 100.0%
==> Patching
patching file Makefile.global
patch unexpectedly ends in middle of line
==> ./configure --prefix=/usr/local/Cellar/php54/5.4.11 --localstatedir=/usr/local/var --sysconfdir=/usr/local/etc/php/5.4 --with-config-file-path=/usr/local/etc/php/5.4 --with-config-file-scan-dir=/usr/local/etc/php/5.4/conf.d --with-iconv-dir=/usr --enable-dba --with-ndbm=/usr --enable-exif --enable-soap --enable-w
==> make
==> make install
==> /usr/local/Cellar/php54/5.4.11/bin/pear config-set php_ini /usr/local/etc/php/5.4/php.ini
==> Caveats
To enable PHP in Apache add the following to httpd.conf and restart Apache:
    LoadModule php5_module    /usr/local/Cellar/php54/5.4.11/libexec/apache2/libphp5.so

The php.ini file can be found in:
    /usr/local/etc/php/5.4/php.ini

✩✩✩✩ PEAR ✩✩✩✩

If PEAR complains about permissions, 'fix' the default PEAR permissions and config:
    chmod -R ug+w /usr/local/Cellar/php54/5.4.11/lib/php
    pear config-set php_ini /usr/local/etc/php/5.4/php.ini

✩✩✩✩ Extensions ✩✩✩✩

If you are having issues with custom extension compiling, ensure that this php is
in your PATH:
    PATH="$(brew --prefix josegonzalez/php/php54)/bin:$PATH"

PHP54 Extensions will always be compiled against this PHP. Please install them
using --without-homebrew-php to enable compiling against system PHP.
==> Summary
  /usr/local/Cellar/php54/5.4.11: 485 files, 37M, built in 7.2 minutes
==> Installing php54-mcrypt
==> Downloading http://www.php.net/get/php-5.4.11.tar.bz2/from/this/mirror
######################################################################## 100.0%
==> /usr/local/Cellar/php54/5.4.11/bin/phpize
==> ./configure --prefix=/usr/local/Cellar/php54-mcrypt/5.4.11 --with-php-config=/usr/local/Cellar/php54/5.4.11/bin/php-config --with-mcrypt=/usr/local/Cellar
==> make
==> Caveats
To finish installing mcrypt for PHP 5.4:
  * /usr/local/etc/php/5.4/conf.d/ext-mcrypt.ini was created,
    do not forget to remove it upon extension removal.
  * Restart your webserver.
  * Write a PHP page that calls "phpinfo();"
  * Load it in a browser and look for the info on the mcrypt module.
  * If you see it, you have been successful!
==> Summary
  /usr/local/Cellar/php54-mcrypt/5.4.11: 3 files, 56K, built in 111 seconds 
```

重新启动 apache 后，`sudo apachectl restart`我重新加载了 phpinfo，但仍然没有 mcrypt。

由于 php54-mcrypt 安装在 php 的 Homebrew 安装中，因此我继续`brew uninstall php54-mcrypt`使用 将其卸载，然后使用`brew install php54-mcrypt --without-homebrew-php`.

重新启动apache并加载phpinfo，仍然没有mcrypt。

我该如何解决这个问题。我很乐意让 homebrew 为我安装 php、crypt 和 phpmyadmin，但我目前的设置似乎无法解决这个问题，这是基于[http://mac.tutsplus.com中的建议/tutorials/server/upgrading-the-native-php-installation-on-os-x-mountain-lion/](http://mac.tutsplus.com/tutorials/server/upgrading-the-native-php-installation-on-os-x-mountain-lion/)。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T11:21:19.357

好吧，经过多次试验和错误，我解决了这个问题。

我首先必须再次卸载 php54-mcrypt 以删除该`--without-homebrew-php`标志并重新安装它，以支持 homebrew 安装的 php 版本。

```
$ brew uninstall php54-mcrypt
Uninstalling /usr/local/Cellar/php54-mcrypt/5.4.11...
$ brew install php54-mcrypt
...
==> Summary
  /usr/local/Cellar/php54-mcrypt/5.4.11: 3 files, 56K, built in 33 seconds 
```

然后，我编辑了我的 httpd.conf 文件并更改了 php 的位置。我刚刚注释掉了系统 PHP，并在通过 Homebrew 安装的 PHP 的 LoadModule 指令中添加了一个新行。

```
#LoadModule php5_module libexec/apache2/libphp5.so
LoadModule php5_module /usr/local/Cellar/php54/5.4.11/libexec/apache2/libphp5.so 
```

然后我通过 Homebrew 安装了 phpmyadmin

`brew install phpmyadmin`

然后我将以下内容添加到 httpd.conf 的底部

```
Alias /phpmyadmin /usr/local/share/phpmyadmin
    <Directory /usr/local/share/phpmyadmin/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory> 
```

我在 homebrew 安装的 php.ini 中进行了需要进行的任何更改，`/usr/local/etc/php/5.4/php.ini`并修改了 phpmyadmin 的配置文件`/usr/local/share/phpmyadmin/config.inc.php`。

然后我使用重新启动apache`sudo apachectl restart`

一切顺利！

# android - 如何为 Android 应用正确缩放图像？

> ID：14688493
> 
> 赞同：0
> 
> 时间：2013-02-04T14:09:55.243
> 
> 标签：android, image, scale, android-imageview

我不明白如何在 android 中正确缩放图像。我有一张 640*125 像素的 iPhone 应用图片。我需要在 Android 应用程序中使用它，但我不知道如何正确缩放它。

在下图中，我使用“FitEnd”作为 ScaleType，除了高度大约是它应该大小的两倍（它应该只与灰色图形的最高部分一样高）之外，这看起来还不错。

我该如何解决？

![选择显示我需要缩放的图像](../Images/4d963d15e541e930e9f91c5a41fa11b5.png)

编辑：包括 .xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/main"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ViewFlipper
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@+id/buttonrow" >

            <ViewFlipper
                android:id="@+id/flipper"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <include
                    android:id="@+id/first"
                    layout="@layout/activity_events" />
                <include
                    android:id="@+id/second"
                    layout="@layout/event_detail" />
            </ViewFlipper>  
            <include
                android:id="@+id/second"
                layout="@layout/event_detail" />
        </ViewFlipper>

        <RelativeLayout
            android:id="@+id/buttonrow"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:scaleType="fitEnd"
                android:src="@drawable/bottombar" />

        </RelativeLayout>

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:15:52.047

我有两个版本：

1.  图像具有不透明的背景。所以图像参数是好的，问题出在你的图片中

2.  如果不是第一个版本，请告诉我你的 .xml 文件

# android - 动态注册 BroadcastReceiver - 接收者未注册

> ID：14688496
> 
> 赞同：1
> 
> 时间：2013-02-04T14:10:14.827
> 
> 标签：android, broadcastreceiver, intentfilter

我在动态注册 BroacasrReceiver 时遇到问题`CallReceiver`。当触发`onReceive`方法时，`CallReceiver`会抛出致命异常。

```
...
private boolean isCRRegistered = false;

public int onStartCommand (Intent intent, int flags, int startId) {

     if(!isCRRegistered)    {
     IntentFilter filter2 = new IntentFilter("android.intent.action.PHONE_STATE");
     CallReceiver mCallReceiver = new CallReceiver();
     registerReceiver(mCallReceiver, filter2);

     //registering some listener
     mCallReceiver.registerListener(this);
     }
} 
```

注销：

```
if(isCRRegistered)  {
        unregisterReceiver (mCallReceiver);
} 
```

日志猫：

```
02-04 14:41:50.286: E/AndroidRuntime(28328): FATAL EXCEPTION: main
02-04 14:41:50.286: E/AndroidRuntime(28328): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.intent.action.PHONE_STATE flg=0x20000000 (has extras) } in com.kris.intellignetringer.CallReceiver@448162b8
02-04 14:41:50.286: E/AndroidRuntime(28328):    at android.app.ActivityThread$PackageInfo$ReceiverDispatcher$Args.run(ActivityThread.java:934)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at android.os.Handler.handleCallback(Handler.java:587)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at android.os.Looper.loop(Looper.java:143)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at android.app.ActivityThread.main(ActivityThread.java:4914)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at java.lang.reflect.Method.invokeNative(Native Method)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at java.lang.reflect.Method.invoke(Method.java:521)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at dalvik.system.NativeStart.main(Native Method)
02-04 14:41:50.286: E/AndroidRuntime(28328): Caused by: java.lang.IllegalArgumentException: Receiver not registered: com.kris.intellignetringer.ScreenReceiver@44816d60
02-04 14:41:50.286: E/AndroidRuntime(28328):    at android.app.ActivityThread$PackageInfo.forgetReceiverDispatcher(ActivityThread.java:812)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:822)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:331)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at com.kris.intellignetringer.StateChecker.serviceDestroy(StateChecker.java:126)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at com.kris.intellignetringer.StateChecker.onPhoneStateChange(StateChecker.java:36)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at com.kris.intellignetringer.CallReceiver.onReceive(CallReceiver.java:50)
02-04 14:41:50.286: E/AndroidRuntime(28328):    at  android.app.ActivityThread$PackageInfo$ReceiverDispatcher$Args.run(ActivityThread.java:917)
02-04 14:41:50.286: E/AndroidRuntime(28328):    ... 9 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T14:17:08.057

错误不在这里！错误是当您取消注册接收器时。看来您正在有条件地注册接收器。

因此，在注销接收器之前，请确保您已经真正注册了它。

您可以使用注册接收器后设置的布尔值。然后，当您想注销接收器时，请确保设置了布尔值，否则（如果不是（false））您不会注销。

# html - 网页左侧的额外空间

> ID：14688500
> 
> 赞同：1
> 
> 时间：2013-02-04T14:10:31.743
> 
> 标签：html, css

我正在开发一个新网站。我在网站的右侧有一个额外的空间，我无法确定它是从哪里来的。

我使用 CSSEdit 和 Firebug 来检查页面的 CSS，但没有帮助。我只能说，当我移除图像滑块时，这个间隙就会消失。但我再次无法理解这个 div 中的什么导致了问题。

会是什么呢？

[链接到网站](http://shanoga-work.com/?page_id=159)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:20:45.627

在 flex-direction-nav ( `flexslider.css`:54) 中，您设置以下样式：

```
.flex-direction-nav .flex-prev {
    left: -36px;
} 
```

由于元素位于最左侧，这使得站点更大。移除 flexslider，将其放在更右侧，或更改/删除该（有问题的）CSS 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:21:56.383

尽量隐藏溢出的内容

```
#site {
position: relative;
overflow-x: hidden;
} 
```

它肯定会起作用

# c# - DirectoryEntry 绑定上的访问被拒绝

> ID：14688501
> 
> 赞同：1
> 
> 时间：2013-02-04T14:10:35.007
> 
> 标签：c#, .net, vb.net, iis

你能帮忙吗

我绑定`"access denied"`_`DirectoryEntry`

你能帮忙吗？

我不是我电脑上的 windows 7 pro，我使用的是本地 iis 7.5 版本。

而且我不明白这个答案是什么意思 [DirectoryEntry.NativeObject 在 Windows 2008 中为管理员组中的用户抛出访问被拒绝](https://stackoverflow.com/questions/263552/directoryentry-nativeobject-throws-access-denied-for-a-user-in-administrators-gr)

解决方案1：以管理员身份运行不起作用。

我的 iis 服务器上有三个站点，`local:2001/` `local:2002/` `local:2003/` 还会有更多站点，但现在这是一个测试

在后面的代码中，`local:2001/`我试图获取例如的文件夹路径

`local:2003/`但我只有它的端口号，但我得到`"access denied"`了`DirectoryEntry`绑定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:19:38.853

如果您尝试访问或写入网站范围之外的文件夹，请在 IIS -> AppPools 下找到您的 appPool 并将身份从 ApplicationPoolIdentity 更改为 NetworkService。

这应该可以解决您的问题。

**仅供参考**要更改身份，您需要查看高级设置。

但没有更多细节，我们只是猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:51:17.910

Read these articles in regards to apppoolidentity vs network service [http://blogs.iis.net/webdevelopertips/archive/2009/10/02/tip-98-did-you-know-the-default-application-pool-identity-in-iis-7-5-windows-7-changed-from-networkservice-to-apppoolidentity.aspx](http://blogs.iis.net/webdevelopertips/archive/2009/10/02/tip-98-did-you-know-the-default-application-pool-identity-in-iis-7-5-windows-7-changed-from-networkservice-to-apppoolidentity.aspx) [http://blogs.msdn.com/b/vijaysk/archive/2009/02/13/goodbye-network-service.aspx](http://blogs.msdn.com/b/vijaysk/archive/2009/02/13/goodbye-network-service.aspx)

# html - chrome上的css填充问题

> ID：14688507
> 
> 赞同：2
> 
> 时间：2013-02-04T14:11:12.190
> 
> 标签：html, css, padding

我已经使用 css 设计了一个导航列表。下面是我的代码

```
ul#mainnavigation li a {
    font: 14px/20px 'Open Sans', Open Sans, Helvetica, Arial, sans-serif;
    position:relative;
    font-weight:600;
    color:#686868;
    margin:0;
    padding:0 19.7px;
    height:50px;
    line-height:50px;
    display:inline-block;
    -webkit-transition:color 0.1s linear, background 0.1s linear, border-left-color 0.1s linear, border-bottom-color 0.1s linear;
    -moz-transition:color 0.1s linear, background 0.1s linear, border-left-color 0.1s linear, border-bottom-color 0.1s linear;
    -o-transition:color 0.1s linear, background 0.1s linear, border-left-color 0.1s linear, border-bottom-color 0.1s linear;
    transition:color 0.1s linear, background 0.1s linear, border-left-color 0.1s linear, border-bottom-color 0.1s linear;
    z-index:100;
} 
```

我遇到的问题是在 Firefox 中它工作得很好，但在 chrome 中最后一个导航元素在下面消失了。

在 Firefox`padding:0 25.7px;`中给出了正确的结果

在 chrome`padding: 0 26.5px;`中给出了正确的结果

如何确保填充在两个浏览器上都能正常工作？

注意：我已将文档类型定义为`<!DOCTYPE html>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:40:39.727

正如您所发现的，不同的浏览器通常会为相同的元素呈现略微不同的像素大小 - 这通常是因为字体大小以及浏览器缩放字体的方式，但可能有多种原因。

我的建议是：

1）如果导航菜单必须是 50px 高，缩放里面的元素，为浏览器留下一点额外的空间导致问题，或者：

2）您还可以删除菜单上硬编码的 50px 高度，并让它自动缩放以适合其元素。如果菜单中的任何内容是浮动的，则删除菜单容器上的“height”属性并添加“overflow:hidden;” CSS 的属性应该会导致菜单扩展到其中所有内容的高度。

# python - 为什么这个 Python 逻辑索引会占用这么多内存

> ID：14688510
> 
> 赞同：2
> 
> 时间：2013-02-04T14:11:22.760
> 
> 标签：python, numpy, python-2.7

我有一个长度为 1e8 的一维时间序列（100,000,000 个元素）。[这](https://www.dropbox.com/s/3eb6ywjzoo468rd/ch008.ddt)是我在 Dropbox 上使用的数据的链接。（文件大小为 382 MB。）

**更新**

基于memory_profiling，错误出现在该行

```
data[absolute(data-dc)< m*std(data)]=dc. 
```

更具体地说，该操作`absolute(data-dc)`耗尽了所有内存。`Data`如上所述，`dc`是一个常数。也许这是一个微妙的语法错误？

我想从中删除异常值和伪影，并用中位数替换这些值。我尝试使用以下功能来做到这一点。

```
 from numpy import *

 from sys import argv

 from scipy.io import savemat
 from scipy.stats import scoreatpercentile

 def reject_outliers(data,dc,m=3):
      data[data==0] = dc
      data[bp.absolute(data-dc) < m*np.std(data)] = dc
      return data

 def butter_bandpass(lowcut,highcut,fs,order=8):
    nyq = 0.5*fs
    low = lowcut/nyq
    high = highcut/nyq

    b,a= butter(order, [low, high], btype='band')
    return b,a

 def butter_bandpass_filter(data,lowcut,highcut,fs,order=8):
    b,a = butter_bandpass(lowcut,highcut,fs,order=order)
    return lfilter(b,a,data) 

 OFFSET = 432
 filename = argv[1]
 outname = argv[2]  

 print 'Opening '+ filename
 with open(filename,'rb') as stream:
      stream.seek(OFFSET)
      data=fromfile(stream,dtype='int16')
 print 'Removing Artifacts, accounting for zero-filling'
 dc = median(data)
 data = reject_outliers(data,dc)

 threshold = scoreatpercentile(absolute(data),85)   
 print 'Filtering and Detrending'
 data = butter_bandpass_filter(data,300,7000,20000)
 savemat(outname+'.mat',mdict={'data':data}) 
```

在一个文件上调用它会占用 4 GB 的 RAM 和 3 GB 的虚拟内存。我确定这是该函数的第二行，因为我单步执行了我编写的脚本并且它总是挂在这部分。我什至可以看到（在 OS X 上的 Finder 中）可用硬盘空间一秒一秒地下降。

时间序列不足以解释它。第二行有什么问题`reject-outliers`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T14:26:46.707

我刚刚生成了 100,000,000 个随机浮点数并进行了与您描述的相同的索引。整个内存使用量远低于 1 GB。您的代码还做了哪些您没有告诉我们的事情？[尝试通过出色的memory_profiler](http://pypi.python.org/pypi/memory_profiler)运行您的代码。

* * *

编辑：添加了 memory_profiler 的代码和输出：

```
from numpy.random import uniform
import numpy

@profile
def go(m=3):
    data = uniform(size=100000000)
    dc = numpy.median(data)
    data[numpy.absolute(data-dc) < m*numpy.std(data)] = dc
    return data

if __name__ == '__main__':
    go() 
```

输出：

```
Filename: example.py

Line #    Mem usage    Increment   Line Contents
================================================
     3                             @profile
     4     15.89 MB      0.00 MB   def go(m=3):
     5    778.84 MB    762.95 MB    data = uniform(size=100000000)
     6    778.91 MB      0.06 MB    dc = numpy.median(data)
     7    874.34 MB     95.44 MB    data[numpy.absolute(data-dc) < m*numpy.std(data)] = dc
     8    874.34 MB      0.00 MB    return data 
```

如您所见，100M 的浮点数不会占用那么多内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T15:36:05.907

您的数据和修改[@mbatchkarov 代码的](https://stackoverflow.com/a/14688786/4279)结果：

```
$ python mbatchkarov.py 
Filename: mbatchkarov.py

Line #    Mem usage    Increment   Line Contents
================================================
     5                             @profile
     6     15.74 MB      0.00 MB   def go(m=3):
     7     15.74 MB      0.00 MB       header_size = 432
     8     15.74 MB      0.00 MB       with open('ch008.ddt', 'rb') as file:
     9     15.75 MB      0.00 MB           file.seek(header_size)
    10    380.10 MB    364.36 MB           data = np.fromfile(file, dtype=np.int16) # 2 bytes per item                                                             
    11    380.20 MB      0.10 MB       dc = np.median(data)
    12                             
    13                                 # data[np.absolute(data - dc) < m*np.std(data)] = dc                                                                        
    14                                 # `data - dc` => temporary array 8 bytes per item                                                                           
    15    744.56 MB    364.36 MB       t = data.copy()
    16    744.66 MB      0.09 MB       t -= dc
    17    744.66 MB      0.00 MB       np.absolute(t, t)
    18    926.86 MB    182.20 MB       b = t < m*np.std(data) # boolean => 1 byte per item                                                                         
    19    926.87 MB      0.01 MB       data[b] = dc
    20    926.87 MB      0.00 MB       return data 
```

`data - dc`将需要多倍的内存：200M 个项目 x 每个项目 8 个字节，即`data - dc`由于广播而导致创建一个或两个临时双数组。为避免这种情况，请在原地进行显式复制和子结构：

```
t = data.copy() # 200M items x 2 bytes per item
t -= dc 
```

似乎`memory_profiler`没有显示临时数组的内存。该程序的最大内存约为 3GB。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T08:46:48.343

Memory_profiler在执行给定行**后将**Python 虚拟机的状态作为一行的内存。因此，在一行中创建和销毁的数组不会出现在配置文件中。

以@mbatchkarov 为例，您可以将“data[numpy.absolute(data-dc) < m*numpy.std(data)] = dc” 行展开成更小的块，以查看临时数组对内存的影响：

```
from numpy.random import uniform
import numpy

@profile
def go(m=3):
    data = uniform(size=100000000)
    dc = numpy.median(data)
    t1 = data-dc
    t2 = numpy.absolute(t1) < m*numpy.std(data)
    data[t2] = dc
    return data

if __name__ == '__main__':
    go() 
```

这使

```
$ python -m memory_profiler t1.py 
Filename: t1.py

Line #    Mem usage    Increment   Line Contents
================================================
     4                             @profile
     5     16.61 MB      0.00 MB   def go(m=3):
     6    779.56 MB    762.95 MB       data = uniform(size=100000000)
     7    779.62 MB      0.06 MB       dc = numpy.median(data)
     8   1542.57 MB    762.95 MB       t1 = data-dc
     9   1637.99 MB     95.42 MB       t2 = numpy.absolute(t1) < m*numpy.std(data)
    10   1638.00 MB      0.02 MB       data[t2] = dc
    11   1638.00 MB      0.00 MB       return data 
```

很明显，“data-dc”指令复制了您的内存布局。解决此问题的方法是就地执行减法，即将“t1 = data - dc”替换为“data -= dc”：

```
$ python -m memory_profiler t1.py 
Filename: t1.py

Line #    Mem usage    Increment   Line Contents
================================================
     4                             @profile
     5     16.61 MB      0.00 MB   def go(m=3):
     6    779.56 MB    762.95 MB       data = uniform(size=100000000)
     7    779.62 MB      0.06 MB       dc = numpy.median(data)
     8    779.63 MB      0.01 MB       data -= dc
     9    875.05 MB     95.42 MB       t2 = numpy.absolute(data) < m*numpy.std(data)
    10    875.07 MB      0.02 MB       data[t2] = dc
    11    875.07 MB      0.00 MB       return data 
```

如您所见，“data -= dc”现在几乎不会增加内存。

# mysql - CONCAT 列并复制到其他表 MySQL

> ID：14688514
> 
> 赞同：1
> 
> 时间：2013-02-04T14:11:46.047
> 
> 标签：mysql, concat

我想要做的是将一些列复制到其他表`obj_id`

```
UPDATE obj_object
INNER JOIN obj_extract as address ON (obj_object.id = address.obj_id AND address.category_id = 1)
INNER JOIN obj_extract as city ON (obj_object.id = city.obj_id AND city.category_id = 2)
INNER JOIN obj_extract as country ON (obj_object.id = country.obj_id AND country.category_id = 3)
INNER JOIN obj_extract as phone ON (obj_object.id = phone.obj_id AND phone.category_id = 4)
SET obj_object.address = address.info,
    obj_object.city = city.info,
    obj_object.country = country.info,
    obj_object.phone = phone.info 
```

但是有些`obj_extract`行有相同`category_id`的，我需要计算包含相同的记录`obj_id`是否有不止一行相同`category_id`，如果是，我需要`concat`这些条目并复制到`obj_object`表列。表格示例：

```
+----+--------------+---------+---------+
| ID |  category_id |  info   | obj_id  |
+----+--------------+---------+---------+
|  1 |        1     |   test  |    2    |
+----+--------------+---------+---------+
|  2 |        1     |  test1  |    2    |
+----+--------------+---------+---------+
|  3 |        2     |   test2 |    2    |
+----+--------------+---------+---------+ 
```

我需要变得像：

```
 obj_object.address = 'test - test1', // // value from address.info
 obj_object.city = 'test2', // value from city.info 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:19:38.000

您需要考虑使用`GROUP_CONCAT`：

```
UPDATE obj_object o
SET o.address = (SELECT GROUP_CONCAT(info) 
                FROM obj_extract o2 
                WHERE o.id = o2.obj_id AND o2.category_id = 1),
   o.city = (SELECT GROUP_CONCAT(info) 
            FROM obj_extract o3 
            WHERE o.id = o3.obj_id AND o3.category_id = 2),
   o.country = (SELECT GROUP_CONCAT(info) 
               FROM obj_extract o4 
               WHERE o.id = o4.obj_id AND o4.category_id = 3),
   o.phone = (SELECT GROUP_CONCAT(info) 
             FROM obj_extract o5 
             WHERE o.id = o5.obj_id AND o5.category_id = 4) 
```

祝你好运。

# postgresql - 添加主键：表包含重复值

> ID：14688523
> 
> 赞同：1
> 
> 时间：2013-02-04T14:12:08.757
> 
> 标签：postgresql, foreign-keys, primary-key, plpgsql, postgresql-8.4

在 PostgreSQL 8.4.13 中，我有 2 个表和一个填充第二个表的过程：

```
 create table pref_users (
            id varchar(32) primary key,
            first_name varchar(64),
            last_name varchar(64),
            female boolean,
            avatar varchar(128),
            city varchar(64),
            login timestamp default current_timestamp,
            logout timestamp,
            last_ip inet,
            vip timestamp,
            mail varchar(256)
    );

    create table pref_rep (
            rep_id serial,
            id varchar(32) references pref_users(id) check (id <> author) on delete cascade,
            author varchar(32) references pref_users(id) on delete cascade,
            author_ip inet,
            good boolean,
            fair boolean,
            nice boolean,
            about varchar(256),
            stamp timestamp default current_timestamp
            /* primary key(id, author) */
    );

   create or replace function pref_update_rep(_id varchar,
            _author varchar, _author_ip inet,
            _good boolean, _fair boolean, _nice boolean,
            _about varchar) returns void as $BODY$
            begin

            delete from pref_rep
            where id = _id and
            age(stamp) < interval '1 hour' and
            (author_ip & '255.255.255.0'::inet) =
            (_author_ip & '255.255.255.0'::inet);

            update pref_rep set
                author    = _author,
                author_ip = _author_ip,
                good      = _good,
                fair      = _fair,
                nice      = _nice,
                about     = _about,
                stamp     = current_timestamp
            where id = _id and author = _author;

            if not found then
                    insert into pref_rep(id, author, author_ip, good, fair, nice, about)
                    values (_id, _author, _author_ip, _good, _fair, _nice, _about);
            end if;
            end;
    $BODY$ language plpgsql; 
```

该`pref_users`表包含有关用户的一般信息。

`pref_rep`保存由其他用户（列）创建的`about`关于用户（列）的评论（列）。`id``author`

对于第二张表，我忘记声明[主键](http://www.postgresql.org/docs/8.4/static/ddl-constraints.html)对（该行已在上面注释）。

我正在尝试在 psql 提示符下添加该主键，但它失败了 - 可能是因为某些原因（我不知道我上面的过程怎么会发生这种情况？）我很少有记录，其中多次相同的`author`注释`id`：

```
# alter table pref_rep add primary key(id, author);
NOTICE:  ALTER TABLE / ADD PRIMARY KEY will create implicit index "pref_rep_pkey" for table "pref_rep"
ERROR:  could not create unique index "pref_rep_pkey"
DETAIL:  Table contains duplicated values. 
```

我的问题是如何找到那些重复的`id`and对`author`？

我试过了：

```
# select id, count(id) from pref_rep group by id order by count desc limit 5;
       id       | count
----------------+-------
 OK408547485023 |   706
 OK261593357402 |   582
 DE11198        |   561
 DE13041        |   560
 OK347613386893 |   556
(5 rows) 
```

但这当然不会给我配对...

**更新：** Catcall 的建议（谢谢！）给了我 190 个这样的重复对：

```
 id           |         author         | count
------------------------+------------------------+-------
 DE10598                | OK495480409724         |     2
 DE12188                | MR17925810634439466500 |     3
 DE13529                | OK471161192902         |     2
 DE13963                | OK434087948702         |     2
 DE14037                | DE7692                 |     2
......
 VK45132921             | DE3544                 |     2
 VK6152782              | OK261593357402         |     2
 VK72883921             | OK506067284178         |     2
(190 rows) 
```

但实际上我真正的问题是如何删除旧的（按`stamp`列）重复项？我在 psql 提示符下尝试了许多查询，但均未成功...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:21:23.030

这应该识别重复项。

```
select id, author 
from pref_rep
group by id, author
having count(id) > 1 
```

您可能还必须查看 NULL，因为这两个列都允许 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:20:22.867

这个查询怎么样（也在[SQL Fiddle](http://sqlfiddle.com/#!11/59fbc/11)上）？

```
DELETE FROM pref_rep p USING (
  SELECT id, author, max(stamp) stamp
    FROM pref_rep
   GROUP BY id, author
  HAVING count(1) > 1) AS f
WHERE p.id=f.id AND p.author=f.author AND p.stamp<f.stamp; 
```

* * *

检查功能[手册](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html)。`count()`

您可以指定任何表达式。`1`表示将计算所有行，'cos `1`is never `NULL`. 如果使用 . 效果相同`count(*)`。实际上我更喜欢后者，不知道为什么我`count(1)`这次使用:)

# java - 将 XMLGregorianCalendar 转换为 MM/dd/yyyy hh:mm 字符串的最佳方法是什么？

> ID：14688526
> 
> 赞同：26
> 
> 时间：2013-02-04T14:12:17.777
> 
> 标签：java, xml

将 XMLGregorianCalendar 对象转换为 'MM/dd/yyyy hh:mm' 字符串的最佳方法是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-04T14:16:09.893

首先用于[`XMLGregorianCalendar#toGregorianCalendar()`](http://docs.oracle.com/javase/7/docs/api/javax/xml/datatype/XMLGregorianCalendar.html#toGregorianCalendar%28%29)从中获取[`java.util.Calendar`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)实例。

```
Calendar calendar = xmlGregorianCalendar.toGregorianCalendar(); 
```

从那一步开始，[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)在通常的方式的帮助下，一切都很明显。

```
SimpleDateFormat formatter = new SimpleDateFormat("MM/dd/yyyy hh:mm");
formatter.setTimeZone(calendar.getTimeZone());
String dateString = formatter.format(calendar.getTime()); 
```

我只是想知道您是否真的不想使用`HH`，而不是`hh`因为您没有在任何地方格式化 am/pm 标记。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-04T14:22:25.640

您可以 [`toGregorianCalendar()`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/datatype/XMLGregorianCalendar.html#toGregorianCalendar%28java.util.TimeZone,%20java.util.Locale,%20javax.xml.datatype.XMLGregorianCalendar%29)为此使用方法。

例如：

```
SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy hh:mm");
String date = sdf.format(xmlGregorianCalendar.toGregorianCalendar().getTime()); 
```

如果您需要将该日历转换为不同的 TimeZone 和 Locale，请使用[`toGregorianCalendar(TimeZone timezone, Locale aLocale, XMLGregorianCalendar defaults)`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/datatype/XMLGregorianCalendar.html#toGregorianCalendar%28java.util.TimeZone,%20java.util.Locale,%20javax.xml.datatype.XMLGregorianCalendar%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T14:17:33.640

这是您正在寻找的示例：

```
XMLGregorianCalendar date = ...; // initialization is out of scope for this example
SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy hh:mm");
GregorianCalendar gc = date.toGregorianCalendar();
String formatted_string = sdf.format(gc.getTime()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-04T07:24:09.157

请检查此静态实用程序。您刚刚提到了诸如“ddMMyy”或“HHmm”之类的模式或任何您想要的模式......这将非常有效。

```
public static String getDateTime(XMLGregorianCalendar gDate, String pattern){

    return Optional.ofNullable(gDate)
            .map(gdate -> {
                Calendar calendar = gDate.toGregorianCalendar();
                SimpleDateFormat formatter = new SimpleDateFormat(pattern);
                formatter.setTimeZone(calendar.getTimeZone());
                return formatter.format(calendar.getTime());
            })
            .orElse(null);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-06T14:31:52.133

此示例[将 XMLGregorianCalendar 转换为日期](http://javabycode.com/java-core/java-xml/convert-xmlgregoriancalendar-to-date.html)

```
XMLGregorianCalendar xmlCalendar = DatatypeFactory.newInstance().newXMLGregorianCalendar(new GregorianCalendar());
Date date = xmlCalendar.toGregorianCalendar().getTime(); 
```

此示例[将日期转换为字符串](http://javabycode.com/java-core/java-common/convert-date-to-string-in-java.html)

```
DateFormat df = new SimpleDateFormat("MM/dd/yyyy hh:mm");
String dateStr = df.format(GregorianCalendar.getInstance().getTime()); 
```

# highcharts - Highchart 堆积面积空白（负值）

> ID：14688530
> 
> 赞同：2
> 
> 时间：2013-02-04T14:12:33.957
> 
> 标签：highcharts

我已经堆叠了一个低于零的区域。我的问题是图表上有空格 ![空白处](../Images/d9a4d043a5f23977e358fe772fc15bd3.png)

我的系列价值观：

```
series: [{
                fillColor: '#FF3F3F',
                name: 'Alarm',
                data: [500, 500, 500, 500, 500, 500, 500]
            },
{
                fillColor: '#FFFF14',
                name: 'Middle',
                data: [100, 400, 150, 150, 200, 200, 250]
            }, 
            {
                fillColor: '#78C43A',
                name: 'Target',             
                data: [-300, 100, 150, -150, 200, -200, 250]
            },... 
```

顺便说一句 - 如何用绿色区域（以及类似的红色区域直到 y 轴最大值）填充图表底部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T07:38:54.477

使用最新的highcharts（3.0+），可以解决这个问题。差距已经出现，因为面积图的阈值为零。将阈值更改为图表中的最小值并尝试。

您可以将阈值设置为

```
plotOptions: {
areac: {
threshold: -5//i've take -5 as example
}
} 
```

[我猜这](http://jsfiddle.net/kgnHu/)就是你想要的

# vim - 移动相邻选项卡以拆分？

> ID：14688536
> 
> 赞同：43
> 
> 时间：2013-02-04T14:12:45.920
> 
> 标签：vim

有没有一种简单的方法可以将 Vim 中的相邻选项卡作为拆分移动到当前窗口？

环顾四周时，我遇到了一个邮件列表讨论，有人说这是`Ctrl`+操作的反面`W`，`T`但没有提供解决方案。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-04T14:56:34.103

您的问题的问题是选项卡未绑定到特定缓冲区。您可以在一个选项卡中拥有 10 个具有尽可能多的缓冲区的窗口，因此“将选项卡移动到拆分中”没有多大意义。

更有意义的是“将缓冲区 x 显示为一个拆分”，这可以通过

```
:sb <name_of_buffer> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-04T14:54:01.443

我提供了两个解决方案，第一个是我自己检查的，我可以保证它可以正常工作。第二个，我很快就会尝试。第一个解决方案：通过简单地创建文件夹并将文件下载到文件夹中来
安装这个插件[http://www.vim.org/scripts/script.php?script_id=1961](http://www.vim.org/scripts/script.php?script_id=1961)。然后，当您有两个选项卡并键入`~/.vim/plugin``Tabmerge.vim`

```
:Tabmerge 
```

您将两个选项卡合并为一个，水平拆分并`top`对齐。查看链接以找到完整的使用指南。

或者，查看此页面[http://vim.wikia.com/wiki/Move_current_window_between_tabs](http://vim.wikia.com/wiki/Move_current_window_between_tabs)以获取在选项卡之间移动当前窗口的两个函数的代码。这里的功能（我还没有尝试过）：

```
function MoveToPrevTab()
  "there is only one window
  if tabpagenr('$') == 1 && winnr('$') == 1
    return
  endif
  "preparing new window
  let l:tab_nr = tabpagenr('$')
  let l:cur_buf = bufnr('%')
  if tabpagenr() != 1
    close!
    if l:tab_nr == tabpagenr('$')
      tabprev
    endif
    sp
  else
    close!
    exe "0tabnew"
  endif
  "opening current buffer in new window
  exe "b".l:cur_buf
endfunc 
```

和

```
function MoveToNextTab()
  "there is only one window
  if tabpagenr('$') == 1 && winnr('$') == 1
    return
  endif
  "preparing new window
  let l:tab_nr = tabpagenr('$')
  let l:cur_buf = bufnr('%')
  if tabpagenr() < tab_nr
    close!
    if l:tab_nr == tabpagenr('$')
      tabnext
    endif
    sp
  else
    close!
    tabnew
  endif
  "opening current buffer in new window
  exe "b".l:cur_buf
endfunc 
```

# c# - 如何计算总金额？

> ID：14688539
> 
> 赞同：-2
> 
> 时间：2013-02-04T14:13:06.120
> 
> 标签：c#, winforms, math

我对 C# 相当陌生，所以我在理解 C# 中的计算时遇到了问题。

首先，我要销售的产品位于标签控件的标签页中。复选框和数字向上向下用于指示数量以及是否添加到我的购物车中，该购物车在另一个标签页中。通过按钮将商品添加到购物车。

我如何编写数量（数字向上向下）*价格等于总数的代码？我必须为几种产品这样做。

我仍然不太了解浮点数、十进制等。所以这对我来说真的很头疼。

顺便说一句，我在 Windows 窗体上这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:19:31.877

使用小数进行财务计算。 [来自 C# 论坛](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/5a120cf8-c12a-474d-9a6a-1add6a59122f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:23:46.740

decimal 关键字表示 128 位数据类型，它具有更高的精度和更小的范围，这使其适用于金融和货币计算。

你想看看 Winforms 中的事件变化：

```
public void Quantity_TextChanged(object sender, KeyEventArgs e)
{
      var total = Price.Text * Quantity.Text;  // store the price * the quantity in the total variable

      MessageBox.Show(total);  // show the total in a message box
} 
```

**注意 Quantity_TextChanged**是一个在名为 Quantity 的控件更改时触发的事件，您的值可能不同，必须进行相应调整。这也适用于应该位于您的选项卡控件上的价格控件。

[http://msdn.microsoft.com/en-us/library/364x0z75(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/364x0z75(v=vs.100).aspx)

# android - 如何在android中通过IPC传递光标

> ID：14688540
> 
> 赞同：1
> 
> 时间：2013-02-04T14:13:10.363
> 
> 标签：android

我有一个游标，它作为内容提供者查询（）的一部分在单独的进程中生成。我想将此光标返回到 UI。由于我使用 AIDL 进行内容提供者和单独进程之间的通信，因此无法在 AIDL 文件中定义游标，因为它没有实现 Parcelable 接口。我该如何解决这个问题？

耆那教 CS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:55:53.760

我没有找到解决此问题的任何直接方法。但是我所做的是通过 DataUtils 我们可以将光标中的行添加到列表中。这个列表我已传递给 ContentProvider。contentProvider 创建一个 MatrixCursor 并转换为 Cursor并发送回 UI。如果能够从 CursorWindow 读取 raws[]，可能会有更好的解决方案。

# php - PHP更新MongoDB子数组

> ID：14688542
> 
> 赞同：0
> 
> 时间：2013-02-04T14:13:15.480
> 
> 标签：php, mongodb

我想在 MongoDB 中更新我的子数组 这是 MongoDB 集合的样子

```
 array (
      '_id' => new MongoId("510fb81638fc5d2966000000"),
      'items' => 
      array (
        '0' => 
        array (
          'id' => '510bb69538fc5d0c2d000000',
          'quantity' => '1',
        ),
        '1' => 
        array (
          'id' => '510bca8138fc5d6e38000000',
          'quantity' => '1',
        ),
      ),
      'session' => '1359964785.85203874781',
      'status' => 'cart'
) 
```

我创建了我的表单以发送以下内容

但是，当我尝试将其 $set 为 mongo

```
$filter =  array('session' => $_SESSION["redi-Shop"]);
$data2 = array(
                '$set' => array($_POST['items'])
            );
$options = array("upsert" => true);
$collection->update( $filter, $data2, $options ); 
```

好像没有更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:32:15.960

你的设置是错误的：

```
$filter =  array('session' => $_SESSION["redi-Shop"]);
$data2 = array('$set' =>array('items' => array($_POST['items'])));

$options = array("upsert" => true);
$collection->update( $filter, $data2, $options ); 
```

我应该提到`$_POST`以这种方式使用是要求某人入侵您的购物网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:59:40.370

正如 Sammaye 所说，您忽略了您的查询。而且，您要更新、替换还是推送到数组？

要**替换**所有项目：

```
$data2 = array('$set' => array('items' => array($_POST['items'])));
$collection->update( array('session' => $_SESSION["redi-Shop"]), $data2, array("upsert" => true) ); 
```

要**更新**第一个项目数组：

```
$data2 = array('$set' => array('items.0' => $_POST['items']));
$collection->update(array('session' => $_SESSION["redi-Shop"]), $data2, array("upsert" => true) ); 
```

并**推**送到 items 数组：

```
$data2 = array('$push' => array('items' => $_POST['items']));
$collection->update(array('session' => $_SESSION["redi-Shop"]), $data2, array("upsert" => true) ); 
```

# javascript - 隐藏/显示复选框，一旦其他复选框被选中，其值的条件

> ID：14688548
> 
> 赞同：1
> 
> 时间：2013-02-04T14:13:50.323
> 
> 标签：javascript, jquery, checkbox

我试图在选中其中一个复选框时隐藏一组复选框，并在未选中时让它们重新出现。条件**必须基于它们的值**。

```
var input = document.getElementsByTagName("input");

for(i=0;i<input.length;i++){

input[i].onchange = function(){
    if(this.checked){
var value = $(this).val();
$("input[type=checkbox]:not(." + '60' + ")").hide();
$("input[type=checkbox]." + '60').show();
}
  }
     } 
```

要隐藏的复选框组属于值 60 和 90（不能选择两个武器配件），想法是不能选择两个复选框，只有一个，所以这就是为什么我需要隐藏其中一个' 被选中，并让它们在未选中后重新出现。

```
 <input type="checkbox" value="50" /> conductive plastic foot cup $50<br/>
        <input type="checkbox" value="60" /> <a>T-arms 2 $60</a><br/>
        <input type="checkbox" value="90" /> <a>T-arms 1 $90</a><br/>
        <input type="checkbox" value="80" /> metal rails $80<br/>
        <input type="checkbox" value="30" /> plastic rails $30<br/>
        <input type="checkbox" value="70" /> foot rest ring $70<br/>
        <input type="checkbox" value="120" />plastic five star foot $120 <br/> 
```

这是我的小提琴：[JS fiddle](http://jsfiddle.net/2H5kB/7/ "JS小提琴")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:27:33.913

我建议使用以下 jQuery：

```
$('.arms').change(
    function(){
        $('.arms').not(this).prop('disabled',this.checked);
    }); 
```

再加上修改后的 HTML：

```
<input id="check1" type="checkbox" value="50" />
<label for="check1">conductive plastic foot cup $50</label>
<input id="check2" type="checkbox" value="60" class="arms" />
<label for="check2">T-arms 2 $60</label>
<input id="check3" type="checkbox" value="90" class="arms" />
<label for="check3">T-arms 1 $90</label>
<input id="check4" type="checkbox" value="80" />
<label for="check4">metal rails $80</label>
<input id="check5" type="checkbox" value="30" />
<label for="check5">plastic rails $30</label>
<input id="check6" type="checkbox" value="70" />
<label for="check6">foot rest ring $70</label>
<input id="check7" type="checkbox" value="120" />
<label for="check7">plastic five star foot $120</label> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/2H5kB/11/)。

以上使用`label`带有`for`属性（或属性）的元素将文本与相关的`checkbox`.

我已将 a 添加`class`到`input`互斥的 s 中，以便使用选择器轻松定位它们，该选择器根据是否选中或未选中来设置*其他*元素（或添加更多互斥的元素）的`disabled`属性, 元素被选中或未选中。*`checkboxes`*

 *顺便说一句，通常最好禁用表单字段，而不是删除/隐藏它们，这样如果用户意外点击，他们不会想知道另一个选项去了哪里，或者当它突然重新出现时感到惊讶。

但是，如果您*真的*想显示/隐藏“其他”元素，则可以使用以下内容：

```
$('.arms').change(
    function(){
        $('.arms').not(this).add($(this).next())[this.checked ? 'hide' : 'show']();
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/2H5kB/12/)。

或者您甚至可以使用第一种方法（使用`prop('disabled',this.checked)`）和以下 CSS（在实现`:disabled`伪选择器的兼容浏览器中：

```
input:disabled,
input:disabled + label {
    display: none;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/2H5kB/13/)。

参考：

*   [`add()`](http://api.jquery.com/add/).
*   [`change()`](http://api.jquery.com/change/).
*   [`next()`](http://api.jquery.com/next/).
*   [`not()`](http://api.jquery.com/not/).
*   [`prop()`](http://api.jquery.com/prop/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:26:05.173

我喜欢对`data`这类东西使用属性：

## HTML

```
<input type="checkbox" value="50" /> conductive plastic foot cup $50<br/>
<input type="checkbox" value="60" data-exclude="input[value=90]" /> T-arms 2 $60<br/>
<input type="checkbox" value="90" data-exclude="input[value=60]" /> T-arms 1 $90<br/>
<input type="checkbox" value="80" /> metal rails $80<br/>
<input type="checkbox" value="30" /> plastic rails $30<br/>
<input type="checkbox" value="70" /> foot rest ring $70<br/>
<input type="checkbox" value="120" />plastic five star foot $120 <br/> 
```

## JavaScript

```
var input = document.getElementsByTagName("input");

$('input').each(function() {
    var $input = $(this);
    $input.change(function() {
        var $exclude = $($input.data('exclude'));
        $exclude.toggle(! $input.is(':checked'));
    });
}); 
```

## 现场演示

[http://jsfiddle.net/bikeshedder/2H5kB/10/](http://jsfiddle.net/bikeshedder/2H5kB/10/)

顺便提一句。我宁愿禁用复选框而不是隐藏它。*

# c# - 饱和和冲击波（波纹）效果

> ID：14688549
> 
> 赞同：1
> 
> 时间：2013-02-04T14:13:53.373
> 
> 标签：c#, xna, shader, effects

目前，我在我的 2D 游戏中使用饱和效果，但我对 HLSL 很陌生，而且很迷茫。

```
 protected override void LoadContent()
    {
    ...things to load...
        //saturation
        desaturateEffect = Content.Load<Effect>("desaturate");
    }

    protected override void Draw(GameTime gameTime)
    {
        desaturateEffect.Parameters["saturationLevel"].SetValue(1 * Life / LifeMax);
        spriteBatch.Begin(SpriteSortMode.Deferred,
                          BlendState.AlphaBlend,
                          SamplerState.LinearClamp,
                          null,
                          null,
                          desaturateEffect,
                          transform);
        ...things to draw...
        spriteBatch.End();
    } 
```

我认为它是一个像素着色器，但我不知道它是否是一个后处理效果。你能解释一下`post-processing`和之间的区别`others`吗？例如，此效果应用于`spriteBatch.begin()`. 对于其他人，它们在哪里应用？

第二件事，我想使用冲击波效果（或涟漪效果），它也是后处理吗？

希望你能指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:27:27.173

说真的，我已经搜索了几天，并没有找到任何关于此的内容。但是在发布这个主题将近一个小时后，我发现这个回答了我的问题......

[http://www.stromcode.com/2008/03/09/intro-to-effects-and-post-processing/](http://www.stromcode.com/2008/03/09/intro-to-effects-and-post-processing/)

# wpf - 来自 Windows 服务的 Viewport3d 渲染

> ID：14688555
> 
> 赞同：1
> 
> 时间：2013-02-04T14:14:16.087
> 
> 标签：wpf, xaml, viewport3d

我有一个 WPF 应用程序生成一些报告。我需要从 WindowService 启动此应用程序，而我目前正在从作为 LocalSystem 运行的服务执行该应用程序。除 Pie 3d 外，所有渲染均已正确完成，显示在 Viewport3D 对象中。这是显示行为的代码提取：

```
static class VisualSaver
    {
        public static void Save(Visual v, int width, int height, string file,Brush background)
        {
            RenderTargetBitmap bmp = new RenderTargetBitmap(
                        width, height, 96, 96, PixelFormats.Pbgra32);

            Rectangle vRect = new Rectangle();
            vRect.Width = width;
            vRect.Height = height;
            vRect.Fill = background;
            vRect.Arrange(new Rect(0, 0, vRect.Width, vRect.Height));

            bmp.Render(vRect);
            bmp.Render(v);

            PngBitmapEncoder png = new PngBitmapEncoder();
            png.Frames.Add(BitmapFrame.Create(bmp));

            using (Stream stm = File.Create(file))
            {
                png.Save(stm);
            }
        }
    } 
```

这是调用代码：

```
VisualSaver.Save(viewport,310,340,PathExtension.GetTempFileWithExtension("png"),Brushes.White); 
```

是的，视口是正确测量/排列的。

从 3d 对象的非交互式应用程序渲染是否有一些限制，我在 Windows7 - 2008 服务器环境中。? 有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:09:17.153

不幸的是，由于这项政策：

*在 Windows XP®、Windows Server® 2003 和早期版本的 Windows® 操作系统中，所有服务都在与登录控制台的第一个用户相同的会话中运行。此会话称为会话 0。在会话 0 中同时运行服务和用户应用程序会带来安全风险，因为服务以提升的权限运行，因此是寻求提升自己权限级别的方法的恶意代理的目标。*

* * *

*Windows Vista® 和 Windows Server® 2008 操作系统通过隔离 Session 0 中的服务并使 Session 0 非交互来降低这种安全风险。在 Windows Vista 和 Windows Server 2008 中，只有系统进程和服务在 Session 0 中运行。第一个用户登录到 Session 1，后续用户登录到后续会话。这种方法意味着服务永远不会与用户的应用程序在同一会话中运行，因此可以防止源自应用程序代码的攻击。*

在 Windows 7 2008 上，所有涉及视频驱动程序的渲染都会失败。所以唯一的解决方案是让应用程序公开服务并在桌面上运行。

# r - 绘制 describe.by{psych} 输出的结果

> ID：14688556
> 
> 赞同：0
> 
> 时间：2013-02-04T14:14:16.843
> 
> 标签：r, ggplot2, summary, psych, describe

我将 describe.by{psych} 的结果应用于数据帧。结果是一个列表。

```
List of 1000
 $ 1   :Classes ‘psych’, ‘describe’ and 'data.frame':   20 obs. of  13 variables:
  ..$ var     : int [1:20] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ n       : num [1:20] 24 24 24 24 24 24 24 24 24 24 ...
  ..$ mean    : num [1:20] 24 30.8 24 31.6 240 ...
  ..$ sd      : num [1:20] 0.937 3.667 0.937 3.537 9.367 ...
  ..$ median  : num [1:20] 23.9 31 23.9 31.9 238.6 ...
  ..$ trimmed : num [1:20] 24 30.9 24 31.7 239.7 ...
  ..$ mad     : num [1:20] 1.11 4.12 1.11 3.29 11.09 ...
  ..$ min     : num [1:20] 22.6 24 22.6 25.3 225.9 ...
  ..$ max     : num [1:20] 25.6 36.9 25.6 36.9 256 ...
  ..$ range   : num [1:20] 3 12.9 3 11.6 30 ...
  ..$ skew    : num [1:20] 0.309 -0.258 0.309 -0.411 0.309 ...
  ..$ kurtosis: num [1:20] -1.163 -0.898 -1.163 -0.819 -1.163 ...
  ..$ se      : num [1:20] 0.191 0.749 0.191 0.722 1.912 ...
 $ 2   :Classes ‘psych’, ‘describe’ and 'data.frame':   20 obs. of  13 variables:
  ..$ var     : int [1:20] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ n       : num [1:20] 7 7 7 7 7 7 7 7 7 7 ...
  ..$ mean    : num [1:20] 16.3 39.3 16.3 40.7 162.9 ...
  ..$ sd      : num [1:20] 0.609 8.045 0.609 8.394 6.086 ...
  ..$ median  : num [1:20] 16.4 39.1 16.4 39.6 164.2 ...
  ..$ trimmed : num [1:20] 16.3 39.3 16.3 40.7 162.9 ... 
```

我想用这个样本为 13 个指标中的每一个绘制一个图表（可能是烛台）或箱线图。是否有一个包可以直接利用计算的摘要统计信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:58:50.217

你的问题很模糊。

`describeBy`（describe.by 已弃用），按分组变量报告基本汇总统计信息。所以我猜`boxplot`它是最近的情节。

例如 ：

```
describeBy(sat.act,sat.act$gender) 
group: 1
          var   n   mean     sd median trimmed    mad min max range  skew kurtosis   se
gender      1 247   1.00   0.00      1    1.00   0.00   1   1     0   NaN      NaN 0.00
education   2 247   3.00   1.54      3    3.12   1.48   0   5     5 -0.54    -0.60 0.10
age         3 247  25.86   9.74     22   24.23   5.93  14  58    44  1.43     1.43 0.62
ACT         4 247  28.79   5.06     30   29.23   4.45   3  36    33 -1.06     1.89 0.32
SATV        5 247 615.11 114.16    630  622.07 118.61 200 800   600 -0.63     0.13 7.26
SATQ        6 245 635.87 116.02    660  645.53  94.89 300 800   500 -0.72    -0.12 7.41
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
group: 2
          var   n   mean     sd median trimmed    mad min max range  skew kurtosis   se
gender      1 453   2.00   0.00      2    2.00   0.00   2   2     0   NaN      NaN 0.00
education   2 453   3.26   1.35      3    3.40   1.48   0   5     5 -0.74     0.27 0.06
age         3 453  25.45   9.37     22   23.70   5.93  13  65    52  1.77     3.03 0.44
ACT         4 453  28.42   4.69     29   28.63   4.45  15  36    21 -0.39    -0.42 0.22
SATV        5 453 610.66 112.31    620  617.91 103.78 200 800   600 -0.65     0.42 5.28
SATQ        6 442 596.00 113.07    600  602.21 133.43 200 800   600 -0.58     0.13 5.38
> 
```

你可以这样绘制：

```
boxplot(sat.act,sat.act$gender, col ='pink') 
```

![在此处输入图像描述](../Images/69933186490fccabbf68db409ea69cba.png)

# c# - 从另一方收到不安全或不正确安全的故障。（使用 SAML 时）

> ID：14688561
> 
> 赞同：2
> 
> 时间：2013-02-04T14:14:33.360
> 
> 标签：c#, wcf, web-services, saml, federated-identity

我是 WCF Web 服务的新手。目前我正在使用联合绑定（SAML）开发联合 Web 服务。我在“SAML 令牌提供者”上使用了 MSDN 示例。但问题是我无法使用该服务，当我使用它时，它抛出“**从另一方收到不安全或不正确安全的故障” *，内部异常为* “处理消息中的安全令牌时发生错误”。**

这是我在服务器端的网络配置文件

```
 <?xml version="1.0"?>
  <configuration>
   <system.web>
     <compilation debug="true" targetFramework="4.0"/>
   </system.web>
   <system.serviceModel>
     <bindings>
       <wsFederationHttpBinding>
          <binding name="Binding1">
            <security mode="Message" >
              <message negotiateServiceCredential ="false" issuedKeyType ="AsymmetricKey" 
                             issuedTokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1">
              </message>
            </security>
          </binding>
          <!-- Binding that expect SAML tokens with Asymmetric proof keys -->
          <binding name="Binding2">
             <security mode="Message">
                <message negotiateServiceCredential ="false"
                             issuedTokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1">
                </message>
             </security>
          </binding>
       </wsFederationHttpBinding>
    </bindings>
    <services>
    <!--<service name="MobileInterfaceWCFService.MobileService" behaviorConfiguration="MobileInterfacebehavior">
            <endpoint address="" binding="basicHttpBinding" bindingConfiguration="basic_http" contract="MobileInterfaceWCFService.IMobileInterface" />
        </service>
        <service name ="MobileInterfaceWCFService.MobileService" behaviorConfiguration="MobileInterfaceWCFService.Service1Behavior">
            <endpoint address="" binding="wsHttpBinding" contract="MobileInterfaceWCFService.IMobileInterface" bindingName="wsHttpBinding_ITMNetWCFService_ITMMobileSharedWebService" bindingConfiguration="wsHttpBinding_ITMNetWCFService_ITMMobileSharedWebService">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
        </service> -->
        <service name ="MobileInterfaceWCFService.MobileService" behaviorConfiguration="MobileInterfaceWCFService.SamlTokenBehavior">
            <endpoint address="" binding="wsFederationHttpBinding" contract="MobileInterfaceWCFService.IMobileInterface" bindingName="Binding1" bindingConfiguration="Binding1">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
        </service>
    </services>
    <client>
        <endpoint address="http://host-root/MobileSharedWebService/MobileSharedWebService.svc" binding="wsHttpBinding" bindingConfiguration="wsHttpBinding_ITMNetWCFService_ITMMobileSharedWebService" contract="ServiceReference1.ITMMobileSharedWebService" name="wsHttpBinding_ITMNetWCFService_ITMMobileSharedWebService">
            <identity>
                <dns value="localhost"/>
            </identity>
        </endpoint>
    </client>
    <behaviors>
        <serviceBehaviors>
            <behavior name="MobileInterfacebehavior">
                <!--<serviceMetadata httpGetEnabled="true" />-->
            </behavior>
            <behavior name="MobileInterfaceWCFService.Service1Behavior">
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
            <!--    <serviceMetadata httpGetEnabled="true"/> -->
                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior>

            <behavior name="MobileInterfaceWCFService.SamlTokenBehavior">
                <serviceMetadata httpGetEnabled="true"  /> 
                <!-- 
                    The serviceCredentials behavior allows one to define a service certificate.
                    A service certificate is used by a client to authenticate the service and provide message protection.
                    This configuration references the "localhost" certificate installed during the setup instructions.
                    -->
                <serviceCredentials>
                    <!-- Set allowUntrustedRsaIssuers to true to allow self-signed, asymmetric key based SAML tokens -->
                    <issuedTokenAuthentication allowUntrustedRsaIssuers ="false" >
                        <!-- Add Alice to the list of certs trusted to issue SAML tokens -->
                        <knownCertificates>
                            <add storeLocation="LocalMachine" 
                                 storeName="TrustedPeople"
                                 x509FindType="FindBySubjectName"
                                 findValue="Alice"/>
                            </knownCertificates>
                    </issuedTokenAuthentication>
                    <serviceCertificate storeLocation="LocalMachine"
                                        storeName="My"
                                        x509FindType="FindBySubjectName"
                                        findValue="localhost"  />
                </serviceCredentials>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
</system.serviceModel>
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <handlers accessPolicy="Read, Script" />
    <security>
        <authentication>
            <anonymousAuthentication enabled="true" />
            <windowsAuthentication enabled="true" />
        </authentication>
    </security>
    <asp enableParentPaths="true" />
</system.webServer>

<system.diagnostics>
        <sources>
            <source name="System.ServiceModel"
                    switchValue="Information, ActivityTracing"
                    propagateActivity="true">
                <listeners>
                    <add name="traceListener"
                        type="System.Diagnostics.XmlWriterTraceListener"
                        initializeData= "c:\log\Traces.svclog" />
                </listeners>
            </source>
        </sources>
    </system.diagnostics>

     </configuration> 
```

这是我在消费者端的配置文件

```
<?xml version="1.0" encoding="utf-8" ?>
    <configuration>
      <system.serviceModel>
    <bindings>
        <wsFederationHttpBinding>
         <binding name="Binding1_IMobileInterface"  >
            <security mode="Message">
                <message issuedKeyType="AsymmetricKey"      issuedTokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1"
                    negotiateServiceCredential="false"  >   
                </message>
                </security>
            </binding>
        </wsFederationHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost/WCF_MobileInterface/MobileService.svc"
            binding="wsFederationHttpBinding" bindingConfiguration="Binding1_IMobileInterface"
            contract="ServiceReference1.IMobileInterface" name="Binding1_IMobileInterface">
            <identity>
                <dns value="localhost" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel>
  </configuration> 
```

*注意：我已经尝试了所有与 stackoverflow 和 google 上相同类型的错误/问题相关的解决方案，但无法解决问题*

**任何快速帮助将不胜感激**

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:14:15.790

我已经解决了上面提到的错误。我必须在我的下面添加以下标签`wsfederationbinding`

```
<allowedAudienceUris>
    <add allowedAudienceUri="http://localhost/WCF_MobileInterface/MobileService.svc"/>
</allowedAudienceUris> 
```

**allowedAudienceuri**属性中提到的 uri是主机 WCF 服务。

实际上，当我将以下标记添加到托管 WCF 服务的 Web 配置文件（）时，我知道这是错误，

```
<serviceSecurityAudit  auditLogLocation="Application" serviceAuthorizationAuditLevel="Failure" messageAuthenticationAuditLevel="Failure" suppressAuditFailure="true" /> 
```

在映射到我的**wsfederationbinding**的行为标记下，此标记在系统事件查看器的应用程序日志类别中记录确切的错误消息。

***注意：我在服务器和消费者级别启用了跟踪，它没有给出正确的错误消息。但是我通过检查事件查看器中的错误日志发现了问题***

希望这可以帮助那些正在努力解决类似错误的人。

# html - python html弹出打开

> ID：14688563
> 
> 赞同：0
> 
> 时间：2013-02-04T14:14:41.333
> 
> 标签：html, python-3.x, file-handling

我使用 Python 3.3 编写了一个 Python 程序。输出保存为 HTML 文件。我希望 HTML 文件自动弹出并在程序结束时显示结果。有没有解决方案？我会感谢你的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:20:29.270

这应该有效：

```
>>> import webbrowser
>>> webbrowser.get('/usr/bin/google-chrome %s').open('http://google.com')
True 
```

**这将打开带有 Google 主页的 Chrome 网络浏览器。

更改为`url path`html`file path`页面并使用`file://{ followed by the html page path }`

```
>>> webbrowser.get('/usr/bin/google-chrome %s').open('file://the/path/to/the/html/page') 
```

更新：

尝试：

```
>>> webbrowser.get('windows-default').open('{ url path for static html page }') 
```

参考：[python的webbrowser在windows 7上启动IE而不是默认](https://stackoverflow.com/questions/5916270/pythons-webbrowser-launches-ie-instead-of-default-on-windows-7)

# ios - Facebook IOS SDK 登录适用于模拟器，而不是设备

> ID：14688564
> 
> 赞同：0
> 
> 时间：2013-02-04T14:14:44.497
> 
> 标签：ios, facebook, facebook-login

Facebook 登录，让自己陷入了困境。

不幸的是，对于我正在做的工作，我只能访问运行 xcode 3.2.6 的 Snow Leopard，并且无法改变。我知道过去的爆炸。

为了使用 FB SDK 3.0 让 facebook 登录工作，我使用了：

AppDelegate.h：

```
 #import <FacebookSDK/FacebookSDK.h>
....
    @property (retain, nonatomic) FBSession *session; 
```

AppDelegate.m:

```
@synthesize session = _session;
...
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation { 
     return [self.session handleOpenURL:url];
} 
```

然后在我的 FBLoginViewController.m viewDidLoad 中：

```
MyAppDelegate *appDelegate;
appDelegate = [[UIApplication sharedApplication]delegate];

   if (!appDelegate.session.isOpen) {
       appDelegate.session = [[FBSession alloc] init]; 

       if (appDelegate.session.state == FBSessionStateCreatedTokenLoaded) {
         [appDelegate.session openWithCompletionHandler:^(FBSession *session, 
                                                       FBSessionState status, 
                                                              NSError *error) {
                }];
            }
      } 
```

现在这适用于模拟器 4.3。我想确认我在 plist 中正确设置了 fb App Id，正确设置了应用程序等。

但是，在使用 IOS 6 的设备上进行测试时，它会因崩溃日志的相关部分而崩溃：

```
Exception Type:  EXC_CRASH (SIGSYS)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   MyApp                       0x000e7cac 0x59000 + 584876
1   libdispatch.dylib               0x34a384b4 0x34a37000 + 5300
2   libdispatch.dylib               0x34a39836 0x34a37000 + 10294
3   MyApp                       0x000e7ca0 0x59000 + 584864
4   MyApp                           0x000d9d08 0x59000 + 527624
5   MyApp                           0x000d9934 0x59000 + 526644
6   MyApp                           0x000da6c6 0x59000 + 530118
7   MyApp                           0x0005b1f0 0x59000 + 8688
8   MyApp                           0x000660a4 0x59000 + 53412
9   UIKit                           0x336130a0 0x33525000 + 975008
10  UIKit                           0x33613052 0x33525000 + 974930
11  UIKit                           0x33613030 0x33525000 + 974896
12  UIKit                           0x336128e6 0x33525000 + 973030
13  UIKit                           0x33612ddc 0x33525000 + 974300
14  UIKit                           0x3353b5ec 0x33525000 + 91628
15  UIKit                           0x335287fc 0x33525000 + 14332
16  UIKit                           0x33528116 0x33525000 + 12566
17  GraphicsServices                0x382ab5a0 0x382a5000 + 26016
18  GraphicsServices                0x382ab1ce 0x382a5000 + 25038
19  CoreFoundation                  0x3331c170 0x33285000 + 618864
20  CoreFoundation                  0x3331c112 0x33285000 + 618770
21  CoreFoundation                  0x3331af94 0x33285000 + 614292
22  CoreFoundation                  0x3328deb8 0x33285000 + 36536
23  CoreFoundation                  0x3328dd44 0x33285000 + 36164
24  GraphicsServices                0x382aa2e6 0x382a5000 + 21222
25  UIKit                           0x3357c2f4 0x33525000 + 357108
26  MyApp                       0x0005b012 0x59000 + 8210
27  MyApp                       0x0005afc8 0x59000 + 8136
Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x0000004e    r1: 0x00000000      r2: 0x00000000      r3: 0x00000000
    r4: 0x3b091bd0    r5: 0x2fda7c0c      r6: 0x1cd560e0      r7: 0x2fda6734
    r8: 0x00000000    r9: 0x2fda6764     r10: 0x1cd560e0     r11: 0x1cdac4d0
    ip: 0x000e7c0d    sp: 0x2fda672c      lr: 0x34a384b7      pc: 0x000e7cac
  cpsr: 0x60000010 
```

我试过的：

现在显然使用 xcode 3.2.6 我无法通过 xcode 运行并访问控制台以在我的 IOS 6 设备上进行进一步调试。所以我把项目发给了一个朋友（没有付费账户，所以不能在设备上测试），他确认它在 xcode 4.5 和模拟器 6 上工作。

那么，如果它适用于模拟器 6 和 4.3，为什么它不能在 IOS 6 设备上运行？我有点难过......

在玩了之后（只是注释掉等）我认为它在这一行崩溃了：

```
appdelagate.session = [[FBSession aloc] init]; 
```

但我发现很难确定或知道原因。

希望有一些想法或帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T00:55:54.173

我能找到的唯一解决方案是为雪豹升级到 xcode 4.2。我没有意识到 xcode 4.2 是雪豹的一个选项。然而它是。上面的代码立即生效，在 xcode 4.2 中没有任何变化。

# wpf - 如何在 wpf 中更新我的 TreeView？

> ID：14688565
> 
> 赞同：1
> 
> 时间：2013-02-04T14:14:46.570
> 
> 标签：wpf, treeview

晚上好。我开始研究技术 - c# 中的 wpf 现在我停在这部分 - 使用树视图我想在我的任务中的树视图中添加一个新节点。

我在这个表单上有一个表单和按钮：

```
...
<Button Name="btn1" Click="ShowForWriteAdrBookName" Content="TestBtn"/>
... 
```

当您在我的表单上运行程序时，加载了具有树视图的 UserControl：

```
...
<TreeView Name="treeView1"></TreeView>
... 
```

当我按下

```
...
<Grid>
        <Label Name="Label1" Content="Имя адресной книги:" Margin="0,20,0,0"></Label>
        <TextBox Name="TextBox1" Width="200" Height="30" Margin="90,-40,0,0"></TextBox>
        <Button Content="Ок" Width="80" Height="30" Margin="0,50,0,0" Click="GetAdrBookName"></Button>
        <Button Content="Отмена" Width="80" Height="30" Margin="200,50,0,0" Click="MyExit"></Button>
</Grid>
... 
```

在 TextBox 中输入文本后，单击“确定”。函数调用：

```
...
public void GetAdrBookName(object sender, RoutedEventArgs e) 
        {
            if (String.Compare(TextBox1.Text.ToString(), "") != 0)
            {
                adrName = TextBox1.Text.ToString().Trim();
                this.Close();
                CreateAdrBook(adrName);
            }
            else 
            {
                ...
            }
        }
... 
```

在这个函数中，我从文本框中读取信息。然后调用另一个函数：

```
...
public void CreateAdrBook(string adrNameFromTextBox1)
        {
            mylist.Add(adrNameFromTextBox1);
            int s = mylist.Count;
            TreeView();
    }
... 
```

在这个函数中，我将从我的文本框中获取信息添加到我的集合中：

```
...
ObservableCollection<string> mylist = new ObservableCollection<string>() 
        { 
        "A",
        "B",
        "C"
        };
... 
```

在我的集合中添加更多信息后，我将此信息添加到我的 TreeView 函数中：

```
...
void TreeView()
        {
            foreach (var drive in mylist)
            {
                TreeViewItem item = new TreeViewItem();
                item.Tag = drive;
                item.Header = drive.ToString();
                item.Items.Add("*");
                treeView1.Items.Add(item);
                treeView1.Items.Refresh();
                treeView1.UpdateLayout();

            }
        }
... 
```

**问题：** 在此 TreeView 中添加新元素后如何更新我的 TreeView？谢谢！

# iphone - 以编程方式在 iPad 中截屏

> ID：14688566
> 
> 赞同：-5
> 
> 时间：2013-02-04T14:14:49.100
> 
> 标签：iphone, ios, objective-c, ipad, ios5

在我的 iPad 应用程序中，我想实现一个功能，例如当用户单击应用程序中的按钮时，当前屏幕的屏幕截图应存储在数据库中。我是 ios 开发的新手，我完全不知道如何实现它。请指导我如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:18:20.377

请参阅[此链接](https://stackoverflow.com/questions/3610604/how-to-take-a-screenshot-of-the-iphone-programmatically)。在这里，您将找到有关如何截取屏幕截图的代码。

不要将图像保存在数据库中，将图像保存在 iPad 的 Document Directory 中。只需将该图像的文件名保存在数据库中，这将帮助您轻松获取图像。

希望这些信息对你有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:22:16.840

试试这个...

```
- (UIImage*)captureView:(UIView *)view 
{
    CGRect rect = [[UIScreen mainScreen] bounds];
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [view.layer renderInContext:context];
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;
}

- (void)saveScreenshotToPhotosAlbum:(UIView *)view 
{
    appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];  
    UIImageWriteToSavedPhotosAlbum([self captureView:self.view], nil, nil,nil);
} 
```

只需将您要捕获的任何 Uiview 发送到 - (UIImage*)captureView:(UIView *)view 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:31:16.787

其他答案中的链接确实提供了很好的解决方案。正如 PJ 建议的那样，最好将图像保存在文档目录中，并将文件名保存在数据库中是一个很好的方法。

但是，如果您迫切希望将图像保存在数据库中，那么这里就是我使用过的示例

```
NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO TABLE_NAME (NAME, IMAGE) VALUES (\"%@\", (?))", name];

 if(sqlite3_prepare_v2(databaseObj,[insertSQL cStringUsingEncoding:NSUTF8StringEncoding], -1, &statement, NULL) == SQLITE_OK)
                {
                    NSData* imageData = UIImagePNGRepresentation(image);
                    sqlite3_bind_blob(statement, 2, [imageData bytes], [imageData length], SQLITE_STATIC);

                if(sqlite3_step(statement) != SQLITE_DONE )
                    NSLog( @"Error: %s", sqlite3_errmsg(databaseObj) );
                else
                    NSLog( @"Insert into row id = %lld", (sqlite3_last_insert_rowid(playerDB)));
                sqlite3_finalize(statement);
            } 
```

# c# - 在多个word文档文件中搜索指定的单词

> ID：14688568
> 
> 赞同：0
> 
> 时间：2013-02-04T14:14:50.960
> 
> 标签：c#, full-text-search, search-engine

我有许多 word 和 excel 文件，我想在这些文件的内容中搜索指定的词（用户将其作为参数提供给我的应用程序）。那我该怎么做呢？我想用 C# 做这项工作，我可以做吗？

**我的文件内容是波斯语。**

事实上，我想用这些文件做一个搜索引擎。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:17:23.183

查看 Lucene 引擎或实施 yourslef [Inveted Index](http://en.wikipedia.org/wiki/Inverted_index)

5 分钟内来自[lucene 的](http://www.lucenetutorial.com/lucene-in-5-minutes.html)示例（仅更改为“PersianAnalyzer”）

```
StandardAnalyzer analyzer = new PersianAnalyzer(Version.LUCENE_40);
Directory index = new RAMDirectory();

IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_40, analyzer);

IndexWriter w = new IndexWriter(index, config);
addDoc(w, "Lucene in Action", "193398817");
addDoc(w, "Lucene for Dummies", "55320055Z");
addDoc(w, "Managing Gigabytes", "55063554A");
addDoc(w, "The Art of Computer Science", "9900333X");
w.close() 
```

# php - Display only the newest record for each row in MySQL db using PHP

> ID：14688569
> 
> 赞同：-1
> 
> 时间：2013-02-04T14:14:50.880
> 
> 标签：php, mysql, sql, greatest-n-per-group

I have two tables of which one is updated daily. I would like to display "only" the latest record for each row.

This is the query I am using now that of course returns all the records.

```
SELECT * 
FROM ss_pumps, secondary_systems WHERE ss_pumps.id=secondary_systems.segment_id 
ORDER BY id ASC 
```

Any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:18:26.677

You can find the latest record for every `segment_id` by `ID` using subquery. The result of the subquery is then join against the two tables: `ss_pumps` and `secondary_systems`.

```
SELECT  a.*, c.* 
FROM    ss_pumps a
        INNER JOIN 
        (
            SELECT  segment_id, MAX(datefield) max_val
            FROM    secondary_systems
            GROUP   BY segment_id
        )b ON a.id = b.segment_id
        INNER JOIN secondary_systems c
            ON  b.segment_id = c.segment_id AND
                b.max_val = c.datefield 
```

Actually, I'm not sure how your tables: `ss_pumps` and `secondary_systems` are related with each other.

I think you want it the other ways,

```
SELECT  a.*, b.*
FROM    secondary_systems a
        INNER JOIN ss_pumps b
            ON a.segment_ID = b.segment
        INNER JOIN
        (
            SELECT  segment, MAX(ID) max_val
            FROM    ss_pumps
            GROUP   BY segment
        ) c ON  b.segment = c.segment AND
                b.ID = c.max_val 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:16:16.227

Use this query:

`SELECT * FROM ss_pumps, secondary_systems WHERE ss_pumps.id=secondary_systems.segment_id ORDER BY id DESC LIMIT 1`

This is assuming that id is an auto increment column and will always be inserted in order.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-04T14:44:49.307

Here's what I got:

```
SELECT * 
FROM
    ss_pumps ssp
    LEFT JOIN ( SELECT * FROM secondary_systems ORDER BY id DESC ) ss ON ( ssp.id = ss.segment_id )
GROUP BY
    ssp.id
ORDER BY
    ssp.id ASC 
```

> **CAVEAT:** I'm assuming that the `secondary_systems` has its own `id` field that also autoincrements. That's the only way you can make sure you're getting *"only" the latest record for each row*.

* * *

**Demo:** [http://sqlfiddle.com/#!2/f816b/2/0](http://sqlfiddle.com/#!2/f816b/2/0)

In my demo `ss_pumps` held the parents while `secondary_systems` held the children. Each parent has 3 children. All but the last children are boys. The last child is always a girl. According to your problem, the resulting query should yield only girls.

```
| ID | PARENT | SEGMENT_ID | CHILD |
------------------------------------
|  1 | mother |          1 | betty |
|  2 | father |          2 |  tina | 
```

# c++ - 如何在 Eclipse CDT ( C++ ) 上调试外部 .cpp 文件

> ID：14688570
> 
> 赞同：0
> 
> 时间：2013-02-04T14:14:51.763
> 
> 标签：c++, eclipse, eclipse-cdt

我在目录“项目”中有一个大项目。我使用 cmake 将这个项目构建到另一个目录“build”中。对于编码，我尝试使用 Eclipse，但是当我尝试将代码导入 Eclipse 时（ File->Import->C/C++->Existing Code as Makefile Project ），当然我只能导入“build”目录而没有“project "（因为 make 文件在 "build" 中，而 Eclipse 的 "project" 是空的）。

当我在调试模式下运行我的构建时，我只能调试二进制数据，因为调试器在“项目”目录中看不到源。如何设置调试器以使用“项目”目录中的源？谢谢有人回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:51:06.150

如果您在系统上构建应用程序，则不需要工作区中的源来调试应用程序 - 构建目录和路径在您的可执行调试信息中。

1.  确保将 -g 都传递给编译器和链接器。
2.  尝试命令行 GDB - 它也应该找到源代码。
3.  在设置启动配置时，您可以在 Eclipse CDT 调试器中设置自定义源映射 - 但我相信这主要适用于在构建应用程序之后移动源或构建在另一个系统上的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:20:47.270

将您的项目（rootdir not build）作为 MakeFile 项目导入工作区（选择 GNU 工具链或 Linux GCC）。现在打开您的项目属性 - > c++ build 并选择项目中的构建文件夹。

现在您可以编译它并创建一个新的运行配置以进行调试。

格力兹祖色

编辑：

我假设你的根文件夹看起来像这样

制作/

CmakeList.txt

源/

部门/

../

现在你创建一个文件夹 build 你切换到 build 并运行 cmake cmake ../ -flags （没有 eclipse-project，使用默认 gcc）

完成此操作后，您可以将根文件夹导入 eclipse cdt 并选择 root/build 作为构建文件夹。问题出在哪里？Eclipse CDT 现在只想知道 makefile 在构建时的位置（这就是为什么您需要手动选择构建文件夹）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T13:23:43.813

这是我如何做的，一步一步。这是我从 github 下载的一个简单的 cmake 项目。像伤害一样工作。[imagebam.com http://thumbnails101.imagebam.com/23645/1e5c42236445850.jpg](http://thumbnails101.imagebam.com/23645/1e5c42236445850.jpg) [imagebam.com http://thumbnails101.imagebam.com/23645/64cb47236445860.jpg](http://thumbnails101.imagebam.com/23645/64cb47236445860.jpg)[![imagebam.com](../Images/972a13d5cfb9282595fe9d263d4f7b7e.png)](http://www.imagebam.com/image/1fa0ac236445844) [![imagebam.com](../Images/6e466293f1dadbc2f8bfe4a9fd39551b.png)](http://www.imagebam.com/image/92c5ff236445847) [![imagebam.com](../Images/0ff901b3e545126df53c44b0b5b19744.png)](http://www.imagebam.com/image/cc236a236445849) [![imagebam.com](../Images/f4f115609163535a5a9f4d9e62ce9486.png)](http://www.imagebam.com/image/fca51e236445851) [![imagebam.com](../Images/65d50c900c2d37288d82bef2d21bcf17.png)](http://www.imagebam.com/image/a619f3236445853) [![imagebam.com](../Images/707ad4063df55e338ed088909df663da.png)](http://www.imagebam.com/image/cb56c9236445858) [![imagebam.com](../Images/63dcd80ad0f8831aa002dd8552798adb.png)](http://www.imagebam.com/image/4dbfba236445862)

# ajax - 通过 javascript 安全地将 POST 数据发送到 PHP

> ID：14688571
> 
> 赞同：2
> 
> 时间：2013-02-04T14:15:00.803
> 
> 标签：ajax, json, twitter, http-post

我试图通过让客户端调用 Twitter（通过我的脚本给出的参数，如 last_id、用户名等）来解决 twitter 使用调用限制的事实，并通过发布它们给我新发现的推文之后我存储在数据库中的 AJAX 请求。

但是，如果我找出通过 JSON 数组从我的 getTweets javascript 函数发送到我的 save_tweets.php 的参数，那么使用 chrome 中的 REST 控制台之类的扩展名发布随机内容并不难。

显然，我希望推文是合法的，并且不能被任何人操纵（或发布）。我知道 javascript 是客户端，因此对被抓取和收起的内容没有太多控制，但是有没有办法确保您发送的 POST 数据来自允许这样做的用户/网页？

我已经尝试过考虑 PHP 会话令牌或其他东西，但这并不奏效，因为您必须交叉检查该令牌，因此您必须将其与 JSON 数组一起发送到我的 PHP。

提前致谢，

ps 如果您知道不被 Twitter 的呼叫限制阻碍的不同方法，我也会很高兴的。但是，如果您的页面每小时有 1000 多个用户访问，那么来自服务器的 150 个调用并不算多。

# java - Java将参数传递给子进程

> ID：14688576
> 
> 赞同：1
> 
> 时间：2013-02-04T14:15:34.030
> 
> 标签：java, process, runtime, runtime.exec

我正在使用`Runtime.getRuntime().exec(cmd)`启动 PostgreSQL 服务器。使用上述命令启动服务器时，我看到正在创建一个新进程来启动进程之外的`Runtime.getRuntime().exec()`进程。

```
john 14330  0.0  0.0 128244  2568 pts/88   S+   19:35   0:00 pg_ctl -D /u/john/postgre_test/data/ start -w
john 14334  9.5  0.0 124592  3736 pts/88   S+   19:35   0:00 /usr/bin/postgres -D /u/john/postgre_test/data 
```

如您所见，由于 exec() 方法创建了第一个，并且还创建了新的第二个。现在，由于服务器需要必须传递的 SSL 私钥密码。如果我通过它使用

```
 PrintStream ps = new PrintStream(process.getOutputStream());
    ps.println(keyPassword);
    ps.flush(); 
```

我猜它没有设置为预期的过程，所以服务器没有启动。如何将参数传递给最近创建的进程？或者有没有其他方法可以让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:20:48.133

您所做的不是传递参数，而是写入进程 STDIN。

要将参数传递给进程，请使用[`Runtime.getRuntime().exec(String[] command)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5b%5d%29); 数组的第一个位置是命令，其余的是参数。

# c# - 确定当前执行的方法

> ID：14688580
> 
> 赞同：2
> 
> 时间：2013-02-04T14:15:58.303
> 
> 标签：c#, events, clr, autoresetevent

**假设以下代码**

```
private AutoResetEvent m_MethodDone = new AutoResetEvent(false);

private void Method1()
{
    // Do something
    Method2();
}

private void Method2()
{
    // All done
    m_MethodDone.Set();
}

private void Method3()
{
}

private void Program()
{
    Task t = New Task(() => { // Code In Question
        m_MethodDone.WaitOne()
        Method3();
    });

    t.Start();
    // Do other things.
} 
```

**问题**

有没有办法“捕获” CLR 事件，无论是来自我线程中的事件还是循环？

```
if(SomeRunTimeThing.LastMethodExecuted.Name == "Method2")
     Method3(); 
```

**为什么**

我不想在软件的内部编写调用挂钩，这是一个*可观察到*的问题（嗯，想法来了……）（它实际上观察了自动化类型功能的 UI 调用模式）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:30:17.750

据我所知，CLR 不支持这种情况。

如果是这样，这将导致各种并发症。例如，请注意编译器可能会*内联*您的私有方法，因此实际代码可能看起来更像这样：

```
private void Method1()
{
    // Body of Method 1
    // Body of Method 2
} 
```

在那种情况下，`SomeRunTimeThing.LastMethodExecuted.Name`永远不会取值`Method2`。（这也是为什么您不应该将堆栈跟踪信息用于除日志记录和调试之外的任何事情的原因。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:31:44.320

如果我理解：有必要在不更改方法代码的情况下确定最后调用的方法。想到一个解决方案：对 socope 中的所有类使用拦截。并在拦截代码存储中调用了什么方法。

**例如，您可以使用统一的**UPD ，请参阅：http:** [//msdn.microsoft.com/en-us/library/ff660861%28v=pandp.20%29.aspx](http://msdn.microsoft.com/en-us/library/ff660861%28v=pandp.20%29.aspx)**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:39:09.870

没有简单的方法可以跟踪事后进行了哪些调用，但是您*可以*查看哪个方法调用了特定方法。也许您可以使用调用堆栈来解决您的问题。有关示例，请参见[http://www.csharp-examples.net/reflection-callstack/ 。](http://www.csharp-examples.net/reflection-callstack/)**

# c# - Excel - 获取单元格格式很慢

> ID：14688583
> 
> 赞同：0
> 
> 时间：2013-02-04T14:16:15.473
> 
> 标签：c#, performance, excel, optimization

我正在使用 C# 从 Excel 文件中提取数据。我需要从工作表中获取文本和一些次要格式数据。我的测试表有 115 行和 10 列。表现似乎迟缓。如果我只使用下面的代码提取文本，则运行大约需要 2 秒。如果我检查字体（在 if(c.Font.Bold==null..... 行中），它​​会上升到 8 秒。如果我得到边框信息，那么它会上升到 17 秒。

问题是我需要从很多很多工作表中提取数据，并且速度将成为一个问题。关于我可以做些什么来加快速度的任何建议？我真的很感激任何帮助。

```
foreach (Range c in oSheet.UsedRange.Cells)
{
    var txt = c.Text;
    if (c.Font.Bold == null || c.Font.Italic == null || Convert.ToInt32(c.Font.Underline) > 0 || Convert.ToBoolean(c.Font.Bold) || Convert.ToBoolean(c.Font.Italic))
        txt = "";

    var borderBottom = c.Borders.Item[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeBottom].LineStyle;
    var borderTop = c.Borders.Item[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeTop].LineStyle;
    var borderLeft = c.Borders.Item[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeLeft].LineStyle;
    var borderRight = c.Borders.Item[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeRight].LineStyle;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:30:29.610

如果您的 Excel 文件是 Excel 2007/2010 文件 (.xlsx)，您可以使用[ExcelPackage](http://excelpackage.codeplex.com/)或[EPPlus](http://epplus.codeplex.com/)组件来读取文件。他们必须比办公室互操作更快。

我使用了[EPPlus](http://epplus.codeplex.com/)，它几乎立即迭代了 2000 多个单元格！

```
ExcelPackage ep = new ExcelPackage(new FileStream(path, FileMode.Open, FileAccess.Read));
var sheet = ep.Workbook.Worksheets[1];
foreach (var cell in sheet.Cells[sheet.Dimension.Address])
{
    var txt = cell.Text;
    var font = cell.Style.Font;
    if (!font.Bold || font.Italic || font.UnderLine)
        txt = "";
    var borderBottom = cell.Style.Border.Bottom.Style;
    var borderTop = cell.Style.Border.Top.Style;
    var borderLeft = cell.Style.Border.Left.Style;
    var borderRight = cell.Style.Border.Right.Style;
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:21:23.333

我对 C# 完全不熟悉，但在 VBA 中，我`Application.ScreenUpdating`在开始时使用属性设置为 false，并在完成时设置回 true。在一般情况下，这会显着提高速度，尤其是在宏执行任何可见工作表更新时。

我很确定这样的属性也应该在 C# 中可用。希望对您有所帮助）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-10T11:26:06.027

您可以使用以下步骤。这是非常快的一行代码（不需要循环和所有）。我在这里用一个简单的excel来解释：

**之前**

[![在此处输入图像描述](../Images/9e7be63a5cd2a0b539b7e14e9d58903f.png)](https://i.stack.imgur.com/pZdk8.jpg)

我设法将范围作为`A1:C4`变量动态存储在**exRange**中，并使用下面的代码给出边框

```
((Range)excelSheet.get_Range(exRange)).Cells.Borders.LineStyle = XlLineStyle.xlContinuous; 
```

**后**

[![在此处输入图像描述](../Images/c985c745972bc60553064ccfd3fa501b.png)](https://i.stack.imgur.com/ItdCr.jpg)

# c# - 在按钮上分配和解除分配事件

> ID：14688588
> 
> 赞同：1
> 
> 时间：2013-02-04T14:16:21.097
> 
> 标签：c#, asp.net

我正忙于将新事件分配给在设计器中创建的现有按钮。

现在这是在运行时之前创建的按钮，它位于 modalpopupexteder5 -

```
<asp:Button runat="server" ID="btnClose" Text="Close" OnClick="btnClose_Click" /> 
```

这是代码隐藏 -

```
 protected void btnAddAccount_Click(object sender, EventArgs e)
    {
        btnClose.Click -= new EventHandler(btnClose_Click);
        btnClose.Click += new EventHandler(btnCancel_Click);
        ModalPopupExtender5.Show();            
    }

    protected void btnCancel_Click(object sender, EventArgs e)
    {
        ModalPopupExtender11.Hide();
    }

    protected void btnClose_Click(object sender, EventArgs e)
    {
        ModalPopupExtender5.Hide();

    } 
```

所以一开始的按钮有 btnClose_Click 事件连接到它。但我想将其更改为 btnCancel_Click

但它不会执行 btnCancel_Click。它执行原始的 btnClose_Click

任何想法可能导致这种情况？

这与页面生命周期有关吗？

**--EDIT--** 我应该让你知道 btnAddAccount_Click 确实被执行了。

基本上我不会创建相同的 modalpopupextender，我想使用现有的，但根据用户选择将确定应该调用哪个事件处理程序，在这种情况下，btnAccount_Click 已选择要分配给按钮的 btnCancel_Click。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:33:54.223

ASP.NET 不会在任何地方为服务器端按钮分配 Click 事件。这些按钮被呈现为普通的提交按钮，后面的内部代码正在检查提交的值，然后基于它找到“点击”按钮并调用正确的处理程序。

这意味着您当前的逻辑正在走向死胡同。

而不是弄乱事件，`btnClose_Click`作为处理程序，并在那里检查当前活动/可见的弹出窗口并将其隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:19:43.160

我不太确定您到底在问什么，但是您可以`Handles`在事件中添加一个，从而控制按钮上的事件。就像是：

```
protected void btnCancel_Click(object sender, EventArgs e) Handles btnCancel.Click, btnClose.Click
{
    //do stuff 
} 
```

# c# - 如何在 C# .NET 中读取 HDD SMART 寄存器并获取该寄存器的所有相关值？

> ID：14688589
> 
> 赞同：8
> 
> 时间：2013-02-04T14:16:31.440
> 
> 标签：c#, .net, wmi, hard-drive

如何使用 WMI 或其他方式在 .NET 中读取**HDD 的 SMART 寄存器**，从而获得以下数据：

*   注册名称
*   当前值
*   最差价值
*   阈值
*   数据（供应商）
*   智能状态

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-15T11:42:00.573

经过一些工作，我整理了代码，使用 C#/WMI 返回了有关 HDD 的所有相关 SMART 信息的综合报告。

```
/*
Copyright (c) 2013, Llewellyn Kruger
All rights reserved.
Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS “AS IS” AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. 
*/
using System;
using System.Collections.Generic;
using System.Management;

  public class HDD
  {

    public int Index { get; set; }
    public bool IsOK { get; set; }
    public string Model { get; set; }
    public string Type { get; set; }
    public string Serial { get; set; }
    public Dictionary<int, Smart> Attributes = new Dictionary<int, Smart>() {
                {0x00, new Smart("Invalid")},
                {0x01, new Smart("Raw read error rate")},
                {0x02, new Smart("Throughput performance")},
                {0x03, new Smart("Spinup time")},
                {0x04, new Smart("Start/Stop count")},
                {0x05, new Smart("Reallocated sector count")},
                {0x06, new Smart("Read channel margin")},
                {0x07, new Smart("Seek error rate")},
                {0x08, new Smart("Seek timer performance")},
                {0x09, new Smart("Power-on hours count")},
                {0x0A, new Smart("Spinup retry count")},
                {0x0B, new Smart("Calibration retry count")},
                {0x0C, new Smart("Power cycle count")},
                {0x0D, new Smart("Soft read error rate")},
                {0xB8, new Smart("End-to-End error")},
                {0xBE, new Smart("Airflow Temperature")},
                {0xBF, new Smart("G-sense error rate")},
                {0xC0, new Smart("Power-off retract count")},
                {0xC1, new Smart("Load/Unload cycle count")},
                {0xC2, new Smart("HDD temperature")},
                {0xC3, new Smart("Hardware ECC recovered")},
                {0xC4, new Smart("Reallocation count")},
                {0xC5, new Smart("Current pending sector count")},
                {0xC6, new Smart("Offline scan uncorrectable count")},
                {0xC7, new Smart("UDMA CRC error rate")},
                {0xC8, new Smart("Write error rate")},
                {0xC9, new Smart("Soft read error rate")},
                {0xCA, new Smart("Data Address Mark errors")},
                {0xCB, new Smart("Run out cancel")},
                {0xCC, new Smart("Soft ECC correction")},
                {0xCD, new Smart("Thermal asperity rate (TAR)")},
                {0xCE, new Smart("Flying height")},
                {0xCF, new Smart("Spin high current")},
                {0xD0, new Smart("Spin buzz")},
                {0xD1, new Smart("Offline seek performance")},
                {0xDC, new Smart("Disk shift")},
                {0xDD, new Smart("G-sense error rate")},
                {0xDE, new Smart("Loaded hours")},
                {0xDF, new Smart("Load/unload retry count")},
                {0xE0, new Smart("Load friction")},
                {0xE1, new Smart("Load/Unload cycle count")},
                {0xE2, new Smart("Load-in time")},
                {0xE3, new Smart("Torque amplification count")},
                {0xE4, new Smart("Power-off retract count")},
                {0xE6, new Smart("GMR head amplitude")},
                {0xE7, new Smart("Temperature")},
                {0xF0, new Smart("Head flying hours")},
                {0xFA, new Smart("Read error retry rate")},
                /* slot in any new codes you find in here */
            };

  }

  public class Smart
  {
    public bool HasData
    {
      get
      {
        if (Current == 0 && Worst == 0 && Threshold == 0 && Data == 0)
          return false;
        return true;
      }
    }
    public string Attribute { get; set; }
    public int Current { get; set; }
    public int Worst { get; set; }
    public int Threshold { get; set; }
    public int Data { get; set; }
    public bool IsOK{ get; set; }

    public Smart()
    {

    }

    public Smart(string attributeName)
    {
      this.Attribute = attributeName;
    }
  }

  /// <summary>
  /// Tested against Crystal Disk Info 5.3.1 and HD Tune Pro 3.5 on 15 Feb 2013.
  /// Findings; I do not trust the individual smart register "OK" status reported back frm the drives.
  /// I have tested faulty drives and they return an OK status on nearly all applications except HD Tune. 
  /// After further research I see HD Tune is checking specific attribute values against their thresholds
  /// and and making a determination of their own (which is good) for whether the disk is in good condition or not.
  /// I recommend whoever uses this code to do the same. For example -->
  /// "Reallocated sector count" - the general threshold is 36, but even if 1 sector is reallocated I want to know about it and it should be flagged.   
  /// </summary>
  public class Program
  {
    public static void Main()
    {
      try
      {          

          // retrieve list of drives on computer (this will return both HDD's and CDROM's and Virtual CDROM's)                    
          var dicDrives = new Dictionary<int, HDD>();

          var wdSearcher = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive");

          // extract model and interface information
          int iDriveIndex = 0;
          foreach (ManagementObject drive in wdSearcher.Get())
          {
            var hdd = new HDD();
            hdd.Model = drive["Model"].ToString().Trim();
            hdd.Type = drive["InterfaceType"].ToString().Trim();
            dicDrives.Add(iDriveIndex, hdd); 
            iDriveIndex++;
          }

          var pmsearcher = new ManagementObjectSearcher("SELECT * FROM Win32_PhysicalMedia");          

          // retrieve hdd serial number
          iDriveIndex = 0;
          foreach (ManagementObject drive in pmsearcher.Get())
          {
            // because all physical media will be returned we need to exit
            // after the hard drives serial info is extracted
            if (iDriveIndex >= dicDrives.Count)
              break;

            dicDrives[iDriveIndex].Serial = drive["SerialNumber"] == null ? "None" : drive["SerialNumber"].ToString().Trim();                   
            iDriveIndex++;
          }

          // get wmi access to hdd 
          var searcher = new ManagementObjectSearcher("Select * from Win32_DiskDrive");
          searcher.Scope = new ManagementScope(@"\root\wmi");      

          // check if SMART reports the drive is failing
          searcher.Query = new ObjectQuery("Select * from MSStorageDriver_FailurePredictStatus");          
          iDriveIndex = 0;
          foreach (ManagementObject drive in searcher.Get())
          {
            dicDrives[iDriveIndex].IsOK = (bool)drive.Properties["PredictFailure"].Value == false;       
            iDriveIndex++;
          }

          // retrive attribute flags, value worste and vendor data information
          searcher.Query = new ObjectQuery("Select * from MSStorageDriver_FailurePredictData");
          iDriveIndex = 0;  
          foreach (ManagementObject data in searcher.Get())
          {              
              Byte[] bytes = (Byte[])data.Properties["VendorSpecific"].Value;
              for (int i = 0; i < 30; ++i)
              {
                try
                {                  
                  int id = bytes[i*12 + 2];

                  int flags = bytes[i * 12 + 4]; // least significant status byte, +3 most significant byte, but not used so ignored.
                  //bool advisory = (flags & 0x1) == 0x0;
                  bool failureImminent = (flags & 0x1) == 0x1;
                  //bool onlineDataCollection = (flags & 0x2) == 0x2;

                  int value = bytes[i*12 + 5];
                  int worst = bytes[i*12 + 6];
                  int vendordata = BitConverter.ToInt32(bytes, i*12 + 7);
                  if (id == 0) continue;

                  var attr = dicDrives[iDriveIndex].Attributes[id];
                  attr.Current = value;
                  attr.Worst = worst;
                  attr.Data = vendordata;
                  attr.IsOK = failureImminent == false;
                }
                catch
                {
                  // given key does not exist in attribute collection (attribute not in the dictionary of attributes)
                }                
              }
              iDriveIndex++;
          }

          // retreive threshold values foreach attribute
          searcher.Query = new ObjectQuery("Select * from MSStorageDriver_FailurePredictThresholds");
          iDriveIndex = 0;
          foreach (ManagementObject data in searcher.Get())
          {
            Byte[] bytes = (Byte[])data.Properties["VendorSpecific"].Value;
            for (int i = 0; i < 30; ++i)
            {
              try
              {

                int id = bytes[i*12 + 2];
                int thresh = bytes[i*12 + 3];
                if (id == 0) continue;

                var attr = dicDrives[iDriveIndex].Attributes[id];
                attr.Threshold = thresh;
              }
              catch
              {
                // given key does not exist in attribute collection (attribute not in the dictionary of attributes)
              }
            }

            iDriveIndex++;
          }

        // print
        foreach (var drive in dicDrives)
        {
          Console.WriteLine("-----------------------------------------------------");
          Console.WriteLine(" DRIVE ({0}): " + drive.Value.Serial + " - " + drive.Value.Model + " - " + drive.Value.Type, ((drive.Value.IsOK) ? "OK" : "BAD"));
          Console.WriteLine("-----------------------------------------------------");
          Console.WriteLine("");

          Console.WriteLine("ID                   Current  Worst  Threshold  Data  Status");
          foreach (var attr in drive.Value.Attributes)
          {
            if (attr.Value.HasData)
              Console.WriteLine("{0}\t {1}\t {2}\t {3}\t " + attr.Value.Data + " " + ((attr.Value.IsOK) ? "OK" : ""), attr.Value.Attribute, attr.Value.Current, attr.Value.Worst, attr.Value.Threshold);            
          }
          Console.WriteLine();
          Console.WriteLine();
          Console.WriteLine();
        }

        Console.ReadLine();
      }
      catch (ManagementException e)
      {
        Console.WriteLine("An error occurred while querying for WMI data: " + e.Message);
      }
    }
  } 
```

* * *

**更新 - 2017 年 12 月 19 日**

我整理了一个类库，可以简化查询您需要的所有智能数据。它包括一个演示项目。

**GitHub 存储库：** [Smart.Net 库](https://github.com/krugertech/SMART.Net)

**用法：**

```
var drives = Simplified.IO.Smart.GetDrives(); // Static Method 
```

# c++ - 返回临时（右值）时，为什么在移动构造函数之前调用析构函数

> ID：14688598
> 
> 赞同：2
> 
> 时间：2013-02-04T14:17:01.803
> 
> 标签：c++, move-semantics, temporary

我怀疑我对移动语义一无所知。鉴于以下代码，我希望调试器（MSVC2010SP1）按以下顺序调用 Proxy 的成员：

*   `Proxy(Resource*)`建造临时的`getProxy`
*   `Proxy(Proxy&& other)`移动建设`p`
*   `~Proxy()`破坏临时的空壳，它的胆量被移动占据了
*   `~Proxy() p`超出范围

    ```
    class Resource
    {
        void open(){}
    public:
        void close(){}
        Proxy && getProxy();
    };
    class Proxy
    {
        Resource *pResource_;
        Proxy(const Proxy& other); //disabled
        Proxy& operator=(const Proxy& other); //disabled
    public:
        Proxy(Resource *pResource):pResource_(pResource){}
        Proxy(Proxy&& other):pResource_(other.pResource_){other.pResource_ = nullptr;}
        ~Proxy()
        {
            if(pResource_)
                pResource_->close();
            pResource_ = nullptr;
        }
    };

    Proxy && Resource::getProxy()
    {
            open();
            return Proxy(this);
    }

    //somewhere else, lets say in main()
    Resource r;
    {
        auto p = r.getProxy(); 
    }   // p goes out of scope 
    ```

相反，顺序是：

*   `Proxy(Proxy*)`
*   `~Proxy()` //这已经`close()`比预期的更早调用了
*   `Proxy(Proxy&& other)` //在销毁后移动给出`p.pResource_`一个值`nullptr`
*   `~Proxy()` //`p`超出范围

这对我来说毫无意义。我想要做的是跟踪代理类的生命周期，通过移动构造函数将关闭资源的工作从一个对象传递到另一个对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T14:23:52.783

`getProxy()`返回对临时对象的引用，该引用在函数结束时超出范围并导致悬空引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T14:34:50.037

通过右值引用返回实际上不会导致任何东西被移动。它只是通过引用返回。但是，它与返回左值引用不同，因为调用返回右值引用的函数的表达式是 xvalue（与左值相反）。然后可以从中移动 xvalue（作为右值表达式的子集）。如果您想从返回左值引用的函数的返回对象中移动，则必须使用`std::move`它使其成为右值。

你很少会想要真正返回一个右值引用。它唯一模糊的常见用途是允许移动对象的私有成员。如果您希望在从函数返回时移动对象，只需按值返回即可。在您的情况下，如果返回类型`getProxy`为 just `Proxy`，则临时对象将从返回的对象中移出，然后将其移入`p`（保存任何省略）。

正如您所拥有的，您的临时对象（由 构造`Proxy(this)`）在语句结束时被销毁`return`- 这是析构函数的第一次调用。返回的引用现在引用了一个无效的对象，并且`p`是通过从这个无效的引用移动来构造的。这给了你未定义的行为。

# regex - 使用正则表达式从 youtube 嵌入中获取 Youtube ID

> ID：14688603
> 
> 赞同：1
> 
> 时间：2013-02-04T14:17:28.070
> 
> 标签：regex, youtube

> **可能重复：**
> [php regex - 在字符串中查找所有 youtube 视频 ID](https://stackoverflow.com/questions/5830387/php-regex-find-all-youtube-video-ids-in-string)

如何使用正则表达式从嵌入中获取 youtube ID，即使它是旧格式或 ifarme

例子

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/ghc8cYOA1Vo" frameborder="0" allowfullscreen></iframe> 
```

或者

```
<object width="560" height="315"><param name="movie" value="http://www.youtube.com/v/ghc8cYOA1Vo?hl=en_US&amp;version=3"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/ghc8cYOA1Vo?hl=en_US&amp;version=3" type="application/x-shockwave-flash" width="560" height="315" allowscriptaccess="always" allowfullscreen="true"></embed></object> 
```

请指教，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:22:42.403

```
youtube.com/((v|embed)/)?[a-zA-Z0-9]+ 
```

Youtube 最近从 10 个字符的 ID 变为 11 个字符，而且他们最终可能会增加这个数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:21:39.893

使用 regexp `youtube[.]com/(v|embed)/([^"?]+)`，YouTube ID 将被捕获到第二组中。

[演示](http://regexr.com?33l8b)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T14:47:43.787

我测试了这个正则表达式 `((v|embed))\/?[a-zA-Z0-9_-]+` ，它工作正常

# binary - 计算将十进制转换为浮点时哪些数字会导致问题？

> ID：14688609
> 
> 赞同：0
> 
> 时间：2013-02-04T14:17:51.860
> 
> 标签：binary, decimal, floating

我知道将一些数字从二进制转换为浮点时可能会出现问题。

例如：1.4 结果为 1.39999。6.2 是 6.1999999，6.6 是 6.599999，等等。

有没有办法计算哪些数字会导致这些问题？就像创建某种电子表格或数据库，其中的数字从 1 到 50,000 不完全转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:41:41.447

浮点计算中的错误根源于浮点数的存储方式。取决于您使用的精度（通常是单精度（浮点）或双精度）。双精度浮点数占用更多空间，但精度大约是其两倍。

浮点数通常以 IEEE 格式存储，因此仅包括最高有效位。

在以这种方式存储以表示浮点数的一串位中，有不同的部分组成该数字。首先，有一个符号位指示数字是正数还是负数。接下来，存储数字的指数部分（在单精度浮点数中，这需要 8 位）。在指数之后，所有剩余的位代表数字的有效数字。因此，位 1 10000000 01000000000000000000000 表示 -0.5 符号位（第一个）表示该数字为负数。接下来的八位是指数。通常，指数存储时带有偏差，因此除了大数字之外，还可以精确存储小数字。为此，用于计算的指数是 -127（如果是 8 位指数）+ 解释为整数的指数位（在我们的例子中是 128）。

再举个例子，[这里](http://www.h-schmidt.net/FloatConverter/IEEE754.html)有一个转换器，它使用复选框来指示位。在最坏的情况下，您可以编写一个机器人来测试您关心的所有组合。

一般来说，如果不能用不是直接由 2 的幂的组合组成的分数来描述，则将其四舍五入。（如果你不能用 1/2 + 1/4 + 1/8 等得到它。它可能会被四舍五入）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:40:18.070

几乎所有的数字都很麻烦。次要的例外是，当反复乘以 2 时，会去掉小数部分并最终小于 2^24。

例如

```
0.125 -> 0.25 -> 0.5 -> 1.0 !  OK
6.4 --> 12.8 --> 25.6 -> 51.2 -> 102.4 : we got a cycle! (.4 .8 .6 .2 ... ) 
```

**编辑**

鉴于问题的目的/背景，当浮点数四舍五入为零时，不精确性似乎会造成麻烦。

例如

```
10.2 == 10.199999809, when the next floating point would be  
next == 10.200000763  <-- the difference to the wanted value is ~4 times higher
vs.
10.3 == 10.300000197, when the previous (rounded down fp would be)
prev == 10.299992370, <-- this would have been also ~4x further from away 
```

也许是时候和 CNC 驱动程序的程序员谈谈了……

# javascript - jQuery Isotope - 砌体容器高度设置为 0（零）

> ID：14688611
> 
> 赞同：1
> 
> 时间：2013-02-04T14:17:58.000
> 
> 标签：javascript, jquery, css, jquery-masonry, jquery-isotope

我有以下问题。`Isotope`将我的容器的高度始终设置为`0px`.

我检查了浮动和其他常见的问题来源。一切似乎都很好。

我的待安排元素类如下所示：

```
div#image-area div {
    width: 6.25%;
    height: 6.25%;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T14:17:58.000

好吧，我花了很长时间才弄清楚！

**同位素不支持百分比图像大小。**

只需选择一个静态宽度`100px`，一切都很好！

# java - Java中的时间减法

> ID：14688614
> 
> 赞同：1
> 
> 时间：2013-02-04T14:18:00.883
> 
> 标签：java, date, time

您好我正在尝试创建一个教师实用程序来移植到 android 操作系统。但是我遇到了一些麻烦。我想创建一个名为 Period 的类。此类将包含该时期的开始和结束时间。IE。第一阶段从 7:45 开始，到 8:45 结束。我也想有一个时间剩余的方法。例如，现在是 8 点 10 分，还剩 35 分钟。我能够从 System.currentTimeMillis() 获取当前时间。但是，我在尝试找出存储期间开始和结束时间的最佳方法时遇到了麻烦。我查看了 Java 中的 Calendar 类，似乎时间总是与日期和时间相关联。这似乎对我的申请没有帮助，因为该期间的结束时间发生在多天，而不仅仅是在一个特定日期。任何帮助理解这将是一个很大的帮助。谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:24:26.050

如果您的目标是能够将时段的开始和结束时间与当前时间进行比较，那么您需要一种方法来计算今天的时段边界的日期和时间。

因此，获取今天的 Calendar 实例，将其时间设置为 7:45，并将日历的时间与当前时间进行比较（当然，上限相同）。

为了表示每个界限，您可以简单地使用一个 int 表示小时，使用第二个 int 表示分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:23:47.910

查看[JodaTime](http://joda-time.sourceforge.net/api-release/index.html)库。DateTime 对象有你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:24:08.050

看看[JodaTime](http://joda-time.sourceforge.net/)。

具体来说，期间：http: [//joda-time.sourceforge.net/key_period.html](http://joda-time.sourceforge.net/key_period.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T14:25:30.740

Calendar 是 Date 类的包装之王，它具有大部分已弃用的功能。我听说 JodoTime API 非常适合比较两个时间戳（[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)）。

存储时段的开始和结束时间的一种方法是实例化日期的 ArrayList，以便您可以将任何给定时间与课程时段进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T14:29:17.033

据我所知，您应该将时间存储为从上个午夜开始的秒数（可选毫秒）。因此，您的第一个周期 7.45 开始于 45*60（45 分钟 * 60 秒每分钟）+ 7*60*60（7 小时乘以分钟乘以秒！）= 2 700 + 25 200 = **27 900**。

对您的结束日期进行相同的计算，只要它们在同一天开始和结束，您就可以轻松减去差异，从而得到两者之间的间隔。如果它们不是发生在同一日期，那么 Java 的时间和日期类既优秀又是必须的。这些类本质上使用相同的算法，但不计算从“最后一个午夜”开始的秒数，而是从 UNIX 纪元时间（1970 年 1 月 1 日）开始计算毫秒数。

# axis2 - 使axis2使用特定的返回类型

> ID：14688620
> 
> 赞同：1
> 
> 时间：2013-02-04T14:18:13.260
> 
> 标签：axis2

我正在使用axis2 Web服务，其中我使用以下messageFormatter（org.apache.axis2.json.JSONMessageFormatter）：

```
<messageFormatter contentType="application/json" class="org.apache.axis2.json.JSONMessageFormatter"/> 
```

并遵循 messageBuilder（org.apache.axis2.json.JSONOMBuilder）：

```
<messageBuilder contentType="application/json" class="org.apache.axis2.json.JSONOMBuilder"/>. 
```

我有一个作为字符串返回的元素，其 Wsdl 合同如下：

```
<xs:element minOccurs="0" name="totalCostStr" nillable="true" type="xs:String"> 
```

我的问题是当我收到相应的 JSON 并且如果 totalCostStr 大于 0.00，我将在 JSON 中的客户端获取 totalCostStr 作为字符串“0.00”

当值 totalCostStr 大于 0 时，我在客户端获取值，在 JSON 中作为浮点数（例如 12.65）而不是字符串“12.65”。

有没有办法强制轴总是将 totalCostStr 作为浮点数或字符串返回？

提前致谢， 切坦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:25:52.277

这是一个奇怪的行为：/

您可以使用 wsdl 元素中的 float 类型始终将其用作 float

```
<xs:element minOccurs="0" name="totalCostStr" nillable="true" type="xs:float"/> 
```

这应该工作...

# r - 在R中使用lowess方法计算加权平均值

> ID：14688621
> 
> 赞同：1
> 
> 时间：2013-02-04T14:18:17.413
> 
> 标签：r, smooth

我正在尝试使用 R 中的 lowess 方法来计算沿 x 轴不均匀分布的数据集的加权平均值。例如，前 5 个数据点是这样的，其中第一列是 x，第二列是 y。

> 375.0 2040.0
> 472.0 5538.0
> 510.0 4488.0
> 573.0 2668.0
> 586.0 7664.0

我在 R 中使用了以下命令：

```
x<-read.table(add,header=FALSE,sep="\t")
y<-lowess(x[,1],x[,2],f=0.01)
write.table(y, file = results , sep = "\t", col.names =FALSE, row.names =FALSE) 
```

输出如下所示：

![在此处输入图像描述](../Images/2526ef7c4d232f9cc47f77fe1a44933a.png)

绿线是matlab（三三次核）中平滑函数计算的平均值，红线是R中lowess方法计算的平均线。蓝点是数据点。我找不到为什么 R 中的方法不起作用。你有什么主意吗？

这是部分数据的[链接。](http://temp-share.com/show/gFHK22S6Y/data?w=AAA2EsyW90G5lFmZe7H4FqR78noo75pEupq3hwdfshAhwA)

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:37:00.007

[中的平滑](http://www.mathworks.fr/fr/help/curvefit/smooth.html)函数就像`matlab`一个过滤器，

```
yy = smooth(y)
yy(1) = y(1)
yy(2) = (y(1) + y(2) + y(3))/3
yy(3) = (y(1) + y(2) + y(3) + y(4) + y(5))/5  ## convolution of size 5
yy(4) = (y(2) + y(3) + y(4) + y(5) + y(6))/5 
```

我认为最好在这里做一个简单的平滑。

这里有一些尝试使用**loess**，**lowesss** f = 0.2(1/5) 和使用**smooth.spline**

我正在使用 ggplot2 进行绘图（使用 geom_jitter 和一些 alpha ）

```
library(ggplot2)
dat <-  subset(data, V2 < 5000)
#dat <-  data
xy <- lowess(dat$V1,dat$V2,f = 0.8)
xy <- as.data.frame(do.call(cbind,xy))

p1<- ggplot(data = dat, aes(x= V1, y = V2))+
  geom_jitter(position = position_jitter(width = .2), alpha= 0.1)+
  geom_smooth()

xy <- lowess(dat$V1,dat$V2,f = 0.2)
xy <- as.data.frame(do.call(cbind,xy))
xy.smooth <- smooth.spline(dat$V1,dat$V2)
xy.smooth <- data.frame(x= xy.smooth$x,y = xy.smooth$y)

p2 <- ggplot(data = dat, aes(x= V1, y = V2))+  
  geom_jitter(position = position_jitter(width = .2), alpha= 0.1)+
  geom_line(data = xy, aes(x=x, y = y, group = 1 ), color = 'red')+
  geom_line(data = xy.smooth, aes(x=x, y = y, group = 1 ), color = 'blue')

library(gridExtra)               
grid.arrange(p1,p2) 
```

![在此处输入图像描述](../Images/717efff1bfbb2a8d120734b7b059feb0.png)

# android - Android / 如何最好地定义主题 / 价值观

> ID：14688622
> 
> 赞同：1
> 
> 时间：2013-02-04T14:18:18.433
> 
> 标签：android, android-theme

我正在尝试找出为新旧 Android 版本选择最佳主题的最佳方法，例如通过阅读此[Trying to use holo theme in Android not working](https://stackoverflow.com/questions/11130313/trying-to-use-holo-theme-in-android-not-working) where they **defined Holo** in **values-11** and **Black** in **values**

黑色的

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="Theme.MyTheme" parent="@android:style/Theme.Black" />
</resources> 
```

全息

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="Theme.MyTheme" parent="@android:style/Theme.Holo" />
</resources> 
```

问题 1）无论我使用什么 minSdkVersion 设置，它都会起作用吗？我猜 Android for never 版本将假定**values-11**比**values** .fallback 当没有特定文件夹匹配时更好匹配

问题 2）假设以上（我认为是这种情况），我如何/在哪里最好地定义我的*MyTheme*扩展。假设我有：

```
<style name="MyTheme2" parent="MyTheme">
  <item name="android:windowTitleSize">44dip</item>
  <item name="android:windowTitleBackgroundStyle">@style/MyWindowTitleBackground</item>            
</style>               
<style name="MyWindowTitleBackground">
  <item name="android:background">@android:color/transparent</item>
  <item name="android:padding">0px</item>
</style> 
```

我是否必须在两个*值* *styles.xml*文件中复制它？或者我可以以某种方式将其放在共享文件夹中吗？据我了解，我认为这不可能吗？

我是 Android 新手，所以我只是想弄清楚最好的办法是什么:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:23:08.830

应在**values/styles**中创建独立定制。遵循此模板：（ANDROID 默认）

在**价值观/风格**

```
<resources>

    <!--
        Base application theme, dependent on API level. This theme is replaced
        by AppBaseTheme from res/values-vXX/styles.xml on newer devices.

    -->
    <style name="AppBaseTheme" parent="@android:style/Theme.Black">
        <!--
            Theme customizations available in newer API levels can go in
            res/values-vXX/styles.xml, while customizations related to
            backward-compatibility can go here.

        -->
    </style>

    <!-- Application theme. -->
    <style name="AppTheme" parent="AppBaseTheme">
        <!-- All customizations that are NOT specific to a particular API-level can go here. -->
    </style>

</resources> 
```

在**values-v11/styles**

```
<resources>

    <!--
        Base application theme for API 11+. This theme completely replaces
        AppBaseTheme from res/values/styles.xml on API 11+ devices.
    -->
    <style name="AppBaseTheme" parent="@android:style/Theme.Light.NoTitleBar">
        <!-- API 11 theme customizations can go here. -->
    </style>

</resources> 
```

# c# - linq查询选择某个值的所有元素，但没有另一个值

> ID：14688625
> 
> 赞同：2
> 
> 时间：2013-02-04T14:18:26.057
> 
> 标签：c#, linq, linq-to-sql

我有一个看起来有点像这样的表：

```
| FruitID | BasketID | FruitType | 
```

我在查询中传递了一个列表，`BasketIDs`我希望该列表`FruitIDs`在`BasketID`AND 中仅属于某个`FruitType`（值只能为 1 或 2）。

这就是我所拥有的：

```
var TheQuery = (from a in MyDC.MyTable

                where TheBasketIDs.Contains(a.BasketID) &&
                      a.FruitType == 1 // need help here

                select a.FruitID).ToList(); 
```

我在表达第二个`where`条件时遇到了一些困难。我想要`FruitIDs`所有`FruitType`都是 1 而没有一个是 2 的地方。

```
| FruitID | BasketID | FruitType |
|   23    |    2     |    1      |
|   23    |    5     |    1      |  
|   19    |    2     |    1      |
|   19    |    5     |    2      | 
```

例如，水果 23 可以，因为它`FruitType`始终为 1，但水果 19 不行，因为它也有`FruitType`2，即使`TheBasketIDs`我传入的列表不包含 5。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T14:23:56.577

一种方法是按水果 id 分组，然后使用 LINQ 表达式检查结果组：

```
var ids = MyDC.MyTable
    .GroupBy(r => r.FruitID)
    // The following condition examines g, the group of rows with identical FruitID:
    .Where(g => g.Any(item => TheBasketIDs.Contains(item.BasketID))
             && g.Any(item => item.FruitType == 1)
             && g.All(item => item.FruitType != 2))
    .Select(g => g.Key); 
```

这将生成`FruitID`您所需类型的 s 列表。

**编辑：（**回应下面的评论）

> 类型只有 1 或 2 但绝不是 3

然后，您可以按如下方式简化查询：

```
var ids = MyDC.MyTable
    .GroupBy(r => r.FruitID)
    // The following condition examines g, the group of rows with identical FruitID:
    .Where(g => g.Any(item => TheBasketIDs.Contains(item.BasketID))
              // When there is no 3-rd state, FruitType==1 will keep FruitType==2 out
             && g.All(item => item.FruitType == 1))
    .Select(g => g.Key); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:24:42.593

```
var TheQuery = (from a in MyDC.MyTable
                group a by a.FruitID into g
                where g.Any(b => TheBasketIDs.Contains(b.BasketID)) && g.All(b => b.FruitType == 1)
                select g.Key).ToList(); 
```

# haskell - Haskell XML 拉解析器

> ID：14688627
> 
> 赞同：2
> 
> 时间：2013-02-04T14:18:32.950
> 
> 标签：haskell, xml-parsing

Haskell 是否有 XML 拉解析器（类似于 Java StAX）？

我设想将它与一个接受解析器的纯函数一起使用。我的函数将调用类似于`nextItem parser`结果的模式匹配（`StartElement`, `EndElement`, `Text`,`EntityRef`等）。然后我的函数可以递归调用自身来处理子元素等，在遍历 XML“树”时构造一个私有数据结构。

据我了解，拉解析应该比构建 DOM 的内部表示然后遍历它具有更好的性能，尽管我不知道这在惰性语言中是否正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T15:29:13.787

您可以使用[xml-conduit](http://hackage.haskell.org/package/xml-conduit)，它提供流式传输和完整文档模块。流解析模块[Text.XML.Stream.Parse](http://hackage.haskell.org/packages/archive/xml-conduit/1.0.3.3/doc/html/Text-XML-Stream-Parse.html)还提供了许多辅助组合器。

确实，如果您有一个真正的惰性数据源，那么拉式解析器和处理惰性列表之间就不会有（显着的）性能差异。然而，XML 解析通常涉及 I/O。管道旨在为您提供解决此类解析问题的高级方法。

# ios - 确定 iOS 应用程序的总磁盘使用量/文件大小

> ID：14688629
> 
> 赞同：0
> 
> 时间：2013-02-04T14:18:49.243
> 
> 标签：ios, objective-c, filesize, disk-access

我有一个应用程序，允许用户下载文件并将它们保存到设备的内部存储器中。我需要能够在任何给定时间显示应用程序磁盘的总使用量。我找到了如何检查总设备磁盘大小和使用情况，但不是特别是应用程序的磁盘使用情况。我将如何获得可以在应用程序的“设置”->“使用”屏幕中看到的相同值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T14:25:30.420

您可以使用它`NSFileManager`来检查文件和目录。就像桌面应用程序一样，您的应用程序可以访问其沙箱以及那里的目录和文件。您最有可能保存文件的位置是在您的应用程序`Documents`目录中，因此您可以要求`NSFileManager`迭代该目录的内容以获得您感兴趣的文件，然后获取这些文件的属性（如大小）。这一切都[在 docs 中](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)。

# android - 处理无法创建 AVD

> ID：14688630
> 
> 赞同：2
> 
> 时间：2013-02-04T14:18:59.707
> 
> 标签：android, processing

我正在尝试在 Android 模拟器上运行一个处理草图。我收到以下错误-

```
debug:
Unhappy inside exists()
D:\android-sdks\tools\android.bat list avds
status: 1
375ms
stdout:

stderr:

D:\android-sdks\tools\android.bat create avd -n Processing-0215 -t android-10 -c 64M -s WVGA800
status: 1
308ms
stdout:

stderr:

at bottom of ensure proper 
```

我尝试单独运行 android.bat 并且也不会运行。但 AVD Manager 运行良好。我可以使用 AVD Manager 创建、运行和删除模拟器。是 Android SDK 安装或处理的问题吗？我该如何解决？操作系统：Windows 7（64 位） 处理：2.0b7 Android SDK：API 级别 10

编辑：
运行 android.bat 给了我这个-

错误：未找到合适的 Java。为了正确使用 Android 开发者工具，您需要在系统上安装合适版本的 Java JDK。我们建议您安装 JavaSE 的 JDK 版本，可在此处获得： [http ://www.oracle.com/technetwork/java/javase/downloads](http://www.oracle.com/technetwork/java/javase/downloads)

您可以在此处找到完整的 Android SDK 要求：http: [//developer.android.com/sdk/requirements.html](http://developer.android.com/sdk/requirements.html)

我对 AVD Manager 运行但 android.bat 没有这一事实感到困惑。

# jquery - jQuery .width() 有时有效；有时不？

> ID：14688631
> 
> 赞同：3
> 
> 时间：2013-02-04T14:19:15.907
> 
> 标签：jquery, html, css

简单代码：

```
$(document).ready(function(){
    console.log($('.slide-background').width());
}); 
```

和简单的html：

```
<div class="testdiv">
      <img class="slide-background" src="img/slide.png"/>
</div> 
```

以及简单的 CSS：

```
 body {
            margin: 0; padding: 0;
            height: 100%; width: 100%;
        }

        html {
            margin: 0; padding: 0;
            height: 100%; width: 100%;
        }   
        .testdiv {

            overflow: hidden;
            width: 100%; 
            height: 100%; 
            background-color: black;
        } 
```

为什么它会随时输出宽度？有时宽度实际上会被记录，但大多数时候会返回 0。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T14:22:36.327

在 jQuery`$(document).ready()`中，在加载 DOM（不包括图像）时`$(window).load()`运行代码，在加载所有内容时运行代码。

简而言之，图像宽度为 0，因为它在您的代码运行时尚未加载。

改为使用`$(window).load()`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T14:21:33.283

DOM 已准备就绪，但浏览器仍在渲染您的图像。

```
var $image = $('.testdiv img');

var img = new Image();          // in memory image
img.src = $image[0].src;        // set SRC
img.onload = function(){        // as soon it's loaded
   alert( img.width ) ;         // WORKS!
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T14:21:19.417

因为在图像加载之前宽度是未知的。

正如 W3C 建议的那样，您应该设置`width`和`height`属性，`<img>`以便在图像完成加载之前显示（并且已知）正确的宽度和高度。如果您有一个非常大的图像，您的布局可能会因为它在加载之前不占用任何空间而完全搞砸。

# jsf - 绑定多个 JSF dataTables 来查看

> ID：14688634
> 
> 赞同：2
> 
> 时间：2013-02-04T14:19:22.097
> 
> 标签：jsf, jsf-2, binding, datatable, composite-component

为了获取数据表的行号，我在这里得到了一个答案，我可以将 dataTable 直接绑定到视图（[JSF 2 dataTable row index without dataModel](https://stackoverflow.com/questions/14633008/jsf-2-datatable-row-index-without-datamodel)）。

我在复合组件中使用该功能，同一页面中可能有几个。我相信绑定使得在每个页面上使用多个组件是不可能的；是否可以以某种方式“单独”绑定每个表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:38:13.343

创建具有`UIData`属性的支持组件类。

```
@FacesComponent("fooComponent")
public class FooComponent extends UINamingContainer {

    private UIData table;

    // +getter +setter
} 
```

并将其绑定到`#{cc.table}`（`#{cc}`引用当前支持组件实例）。

```
<cc:interface componentType="fooComponent">
    ...
</cc:interface>
<cc:implementation>
    <h:dataTable binding="#{cc.table}" ...>
        <h:column>#{cc.table.rowIndex + 1}</h:column>
        ...
    </h:dataTable>
</cc:implementation> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-08T00:45:23.253

只需使用 ui:repeat 代替，它已通过 varStatus.index 内置支持。

# c - C 中的 getchar() 函数：为什么在我使用 getchar 后它不会立即打印字符？

> ID：14688637
> 
> 赞同：2
> 
> 时间：2013-02-04T14:19:25.740
> 
> 标签：c, input, inputstream, getchar

我只是编程的初学者。我正在学习 K&R 的书，C 编程语言。当我阅读时，我对这个问题越来越好奇——当有一个循环从输入中一个一个地获取字符时，我在循环中放置了一个输出函数，我认为它的结果就像打印每个字符在它被输入之后。但是，结果似乎只有在我点击一个键后计算机才会打印出一整套字符。

如 K&R 书中练习 1-22 的答案：

```
/* K&R Exercise 1-22 p.34 
 *
 * Write a program to "fold" long input lines into two or more
 * shorter lines after the last non-blank character that occurs before the n-th
 * column of input.  Make sure your program does something intelligent with very
 * long lines, and if there are no blanks or tabs before the specified column.
 */

#include <stdio.h>

#define LINE_LENGTH 80
#define TAB '\t'
#define SPACE ' '
#define NEWLINE '\n'

void entab(int);

int main()
{
    int i, j, c;
    int n = -1;     /* The last column with a space. */
    char buff[LINE_LENGTH + 1];

    for ( i=0; (c = getchar()) != EOF; ++i )
    {
        /* Save the SPACE to the buffer. */
        if ( c == SPACE )
        {
            buff[i] = c;
        }
        /* Save the character to the buffer and note its position. */ 
        else
        {
            n = i;
            buff[i] = c;
        }

        /* Print the line and reset counts if a NEWLINE is encountered. */
        if ( c == NEWLINE )
        {
            buff[i+1] = '\0';
            printf("%s", buff);

            n = -1;
            i = -1;
        }
        /* If the LINE_LENGTH was reached instead, then print up to the last
         * non-space character. */
        else if ( i == LINE_LENGTH - 1 )
        {
            buff[n+1] = '\0';
            printf("%s\n", buff);

            n = -1;
            i = -1;
        }
    }
} 
```

我想程序会变成这样，它只会打印出一行字符，长度为 80，就在我输入了 80 个字符之后（我还没有点击 ENTER 键）。然而，它并没有以这种方式出现！无论有多少字符，我都可以完全输入整个字符串。当我最终决定结束这一行时，我只需点击 ENTER 键，它就会给我正确的输出：长字符串被切割成几个短的片段/行，它们有 80 个字符（当然最后一个可能包含更少超过 80 个字符）。

我想知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:20:07.363

通常（在您的情况下）`stdin`是行缓冲的，因此您的程序不会在输入字符时接收字符，而是在用户输入换行符（`Return`）时或系统缓冲区已满时以块的形式接收.

因此，当用户输入最终发送到您的程序时，它会被复制到程序的输入缓冲区中。这就是`getchar()`从填充字符读取的地方`buff`。

如果输入足够长，`buff`将用`LINE_LENGTH`输入缓冲区中的字符填充，然后打印几次（直到输入缓冲区的全部内容都被消耗完）。

在 Linux 上（我认为通常是在 Unix-ish 系统上，但我不确定），您还可以通过在非空行上键入`Ctrl`+将输入发送到程序而无需输入换行符（作为一行的第一个输入，`D`关闭`stdin`；在输入行的稍后位置，您可以`stdin`通过键入两次来关闭），因此如果您在输入 [或更多] 个字符后键入`Ctrl`+而没有换行符，则 [至少初始部分] 将立即打印输入然后。`D``LINE_LENGTH`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:28:43.580

很高兴在这里见到你，因为我也来自中国。事实上，我的英语很差。而且，我也是编程的初学者。所以，我不太了解你的目的。

但是，我在您的代码中发现了一个问题。循环可能不会停止。EOF 是文件结尾，但您没有打开任何文件。

我对 getchar() 的了解是将标准输入输入到黄油缓存中。getchar() 通常用于停止输入（或循环）。

希望我的回答能帮到你。

# java - 在 GAE 之外测试 Google App Engine ThreadManager

> ID：14688645
> 
> 赞同：5
> 
> 时间：2013-02-04T14:19:42.467
> 
> 标签：java, unit-testing, google-app-engine, junit

我编写了一个 JUnit (4.10) 单元测试，它对以下内容进行了调用`com.google.appengine.api.ThreadManager`：

```
ThreadManager.currentRequestThreadFactory(); 
```

当这个测试运行时，我`NullPointerException`从这个`currentRequestThreadFactory`方法中被抛出：

```
Caused by: java.lang.NullPointerException
    at com.google.appengine.api.ThreadManager.currentRequestThreadFactory(ThreadManager.java:39)
    at com.myapp.server.plumbing.di.BaseModule.providesThreadFactory(BaseModule.java:50)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 
```

当我拉下 的源代码`ThreadManager`并查看第 39 行（这是 NPE 的源代码）时，我看到：

```
public static ThreadFactory currentRequestThreadFactory() {
        return (ThreadFactory) ApiProxy.getCurrentEnvironment().getAttributes()
            .get(REQUEST_THREAD_FACTORY_ATTR);
} 
```

所以看起来`ApiProxy.getCurrentEnvironment()`是null，当它的`getAttribute()`方法被调用时，NPE被抛出。我已经通过在我的单元测试代码中添加一些新的打印语句来确认这一点：

```
if(ApiProxy.getCurrentEnvironment() == null)
    System.out.println("Environment is null."); 
```

我隐约知道 GAE 为其所有服务提供“测试版本”，但无法（特别是）找到如何使用和设置它们。所以我问：GAE 是否提供这样的测试版本？如果是这样，我如何`ApiProxy`在此处添加测试版本？如果没有，那我有什么选择？我认为我不能模拟任何一种方法（`ThreadManager#currentRequestThreadFactory`或`ApiProxy#getCurrentEnvironment`），因为它们都是静态的。提前致谢。

**编辑**：我看到`appengine-testing.jar`SDK 附带了一个。在这个 JAR 里面是一个`ApiProxyLocal.class`我*相信*可以在 JUnit 测试期间使用的版本，`ApiProxy`它可以在不抛出 NPE 的情况下工作。如果是这种情况（我什至不确定），那么问题是：我如何将它注入我`ThreadManager`的测试中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-18T20:04:41.023

如果按照以下几行设置 LocalServiceTestHelper，您将从存根中获得正确的线程。

```
private static final LocalServiceTestHelper helper = new LocalServiceTestHelper( new    LocalDatastoreServiceTestConfig());

@BeforeClass
public static void initialSetup() {
    helper.setUp();
}

@AfterClass
public static void finalTearDown() {
    helper.tearDown();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:43:52.560

`ThreadManager.currentRequestThreadFactory()`我建议避免直接从您的代码中调用。相反，将 注入`ThreadFactory`到需要创建线程的类中。

一种简单的方法是使用 Guice：

```
public static class MyService {
  private final ThreadFactory threadFactory;

  @Inject
  MyService(ThreadFactory threadFactory) {
    this.threadFactory = threadFactory;
  }

  ...
} 
```

在您的测试中`MyService`，您可以将假传递`ThreadFactory`给`MyService`构造函数或注入`Executors.defaultThreadFactory()`。

在您的生产代码中，您将创建一个绑定：

```
bind(ThreadFactory.class)
    .toInstance(ThreadManager.currentRequestThreadFactory()); 
```

当然，如果你还没有准备好进入依赖注入，你可以创建自己的访问器来获取和设置`ThreadFactory`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T23:06:40.360

如果您按照[http://code.google.com/appengine/docs/java/howto/unittesting.html](http://code.google.com/appengine/docs/java/howto/unittesting.html)`ApiProxy.Environment`中的建议 实施

那么该`getAttributes()`方法就是您在地图中找不到条目的地方`REQUEST_THREAD_FACTORY_ATTR`。

您可以添加：

```
attributes.put(REQUEST_THREAD_FACTORY_ATTR, new RequestThreadFactory()); 
```

有关其他有用的补充，请参阅：http: [//googleappengine.googlecode.com/svn-history/trunk/java/src/main/com/google/appengine/tools/development/LocalEnvironment.java](http://googleappengine.googlecode.com/svn-history/trunk/java/src/main/com/google/appengine/tools/development/LocalEnvironment.java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T20:34:19.937

要添加到最后一个答案，如果您在单元测试用例中启动一个线程，则该 java 线程也需要设置 ApiProxy 环境。

在您的类 LocalServiceTestCase 扩展 TestCase 中，设置方法可能如下所示：

```
super.setUp();

helper1.setUp();

setEnvironment(); 
```

在哪里：

```
public static void setEnvironment() {

    if (ApiProxy.getCurrentEnvironment() == null) {  

        ApiProxyLocal apl = LocalServiceTestHelper.getApiProxyLocal();

        ApiProxy.setEnvironmentForCurrentThread(new TEnvironment());

        ApiProxy.setDelegate(apl);

    }
} 
```

上述网址中给出了 TEnvironment。

您可能也想制作一个静态的 unsetEnvironment() 。

在您的单元测试用例中，如果您启动了一个新的 java 线程，您可以在 run 方法的开头使用静态方法：

```
public void run() {

    LocalServiceTestCase.setEnvironment(); 
```

# rest - 发布到restful服务器时的Angular.js动态绑定

> ID：14688649
> 
> 赞同：3
> 
> 时间：2013-02-04T14:19:54.040
> 
> 标签：rest, post, data-binding, angularjs

在发布到我的服务器时，我对实现双向数据绑定的方式有些困惑。

我这样定义我的资源：

```
angular.module('todoServices', ['ngResource']).
    factory('Todo', function($resource){
  return $resource('api/v1-0/todos/:todoId', {}, {
    query: {method: 'GET', params:{todoId:''}, isArray: true},
    save: {method: 'POST', isArray: true}
  });
}) 
```

我将 Todo 资源作为依赖项传递给我的控制器。

然后在我的控制器中，我有一个方法可以将一个新的 Todo 项目添加到我的列表中：

```
 $scope.addTodo = function() {
        var savedModel = new Todo();
        savedModel.title =  $scope.title;
        savedModel.description = $scope.description,
        //...
        savedModel.$save();
        $scope.todos.push(savedModel);
    } 
```

只要我的待办事项出现在列表中，这就是有效的，对服务器的调用有效并且该项目被添加到我的数据库中。但是，因为当我将它推送到我的列表时，它还没有 ID。ID 由我的 MySQL 数据库中的自动增量 ID 生成。我的服务器以 JSON 格式返回对象，所以我假设，我必须指定某种回调函数才能使数据绑定工作？我到底需要做什么，所以一旦我的服务器返回数据，我添加的待办事项就会更新为正确的 ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:48:47.173

只需将返回的对象分配给*savedModel*对象。由于对资源的调用是异步的并返回一个 Promise，因此您应该以这种方式使用 success 函数：

```
 savedModel.$save(
     function success(savedModel) {
         $scope.todos.push(savedModel);
     }); 
```

顺便检查一下*save方法的**isArray*属性，通常应该是*false*。

# model-view-controller - 使用自动映射器

> ID：14688650
> 
> 赞同：0
> 
> 时间：2013-02-04T14:19:54.600
> 
> 标签：model-view-controller, mapping, automapper

我有一个客户端类，我需要将其映射到一个不太复杂的 clientViewModel 类，这里有两个类：

```
public class client
{
public int clientRef{get;set;}
public string Title{get;set;}
public string Forename { get; set; }
public string Initials { get; set; }
public string Surname { get; set; }
Public Address address{get;set;}
 } 
```

和

```
public class ClientsViewModel
{
    public int ClientRef { get; set; }
    public string Title { get; set; }
    public string Forename { get; set; }
    public string Initials { get; set; }
    public string Surname { get; set; }
    public string Line1 { get; set; }
    public string Line2 { get; set; }
    public string Line3 { get; set; }
    public string Town { get; set; }
    public string County { get; set; }
    public string Postcode { get; set; }
    public string Country { get; set; }       
} 
```

这就是我映射模型的方式（它仍然是一个概念证明）

```
 IList<ClientsViewModel> _clientsViewModelsclients = new List<ClientsViewModel>(); 

        var model =
            new Clients().Get(10);
        Mapper.CreateMap<Client, ClientsViewModel>();

       ClientsViewModel cv = Mapper.Map<Client, ClientsViewModel>(model);

       _clientsViewModelsclients.Add(cv);

       return View(_clientsViewModelsclients); 
```

问题出在视图上，我可以看到名称和标题，但看不到地址。我应该做任何其他映射吗，确保地址类 1 odf 中的任何内容都映射到 clientViewModel 类的 Line1？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:35:42.520

从评论中

> *看看这里： http: [//github.com/AutoMapper/AutoMapper/wiki/Nested-mappings](http://github.com/AutoMapper/AutoMapper/wiki/Nested-mappings)或者你可以创建一个自定义解析器.. [http://github.com/AutoMapper/AutoMapper/wiki/Custom-value-resolvers](http://github.com/AutoMapper/AutoMapper/wiki/Custom-value-resolvers)*

# scala - 高阶函数映射中不需要的隐式参数解析

> ID：14688651
> 
> 赞同：1
> 
> 时间：2013-02-04T14:19:55.600
> 
> 标签：scala, implicit, higher-order-functions

我在尝试`map`使用隐式参数定义的某些方法时遇到问题`Option`。

假设我使用上述方法定义了一个 custom`class`和 a`trait``class`

```
class MyClass

trait Processor {

  def stringy(implicit arg: MyClass) = arg.toString

  def lengthy(implicit arg: MyClass) = arg.toString.length

  def inty(implicit arg: MyClass) = arg.toString.map(_.toInt).sum

} 
```

然后我用一些测试创建一个实现

```
object TestProcessing extends Processor {

  //Here everything works fine, the argument is passed explicitly    
  def test() {
    val my = new MyClass

    val res = List(stringy(my), lengthy(my), inty(my))

    println(res.mkString("\n"))
  }

  //Still everything ok, the argument is passed implicitly    
  def testImplicit() {
    implicit val my = new MyClass

    val res = List(stringy, lengthy, inty)

    println(res.mkString("\n"))
  }

  object Mapper {
    //class wrapped in an Option
    val optional = Some(new MyClass)

    //trying to factor out common code
    def optionally[T](processFunction: MyClass => T): Option[T] = optional map processFunction

    //now the specific processing methods that should work on the optional value
    def s: Option[String] = optionally(stringy)
    def l: Option[Int] = optionally(lengthy)
    def i: Option[Int] = optionally(inty)

    /*
     * Here the compiler complains that
     *
     *<console>:40: error: could not find implicit value for parameter arg: MyClass
     *                def s: Option[String] = optionally(stringy)
     *                                                   ^
     *<console>:41: error: could not find implicit value for parameter arg: MyClass
     *                def l: Option[Int] = optionally(lengthy)
     *                                                ^
     *<console>:42: error: could not find implicit value for parameter arg: MyClass
     *                def i: Option[Int] = optionally(inty)
     *                                                ^
     */    
  }

} 
```

虽然`optionally`被设想显式地将可选值显式传递给它的参数函数，但当我在实际函数上使用它时，编译器需要一个隐式定义。

我有两种可能的解决方案，但都不令人满意：

1.  将隐式参数传递给`optionally`as in

    `optionally(implicit my => stringy)`

2.  避免将特定函数的参数定义为`implicit`，如

    `def stringy(arg: MyClass)`

每个解决方案都违背了实现可读性和可用性的目标。

有没有第三条路可以走？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:11:26.457

如果我理解正确，问题是编译器似乎没有认识到您想要将方法部分应用/提升到这里的函数（相反它“认为”您想要省略隐式参数），所以明确地这样做似乎工作：

```
def s: Option[String] = optionally(stringy(_))
def l: Option[Int] = optionally(lengthy(_))
def i: Option[Int] = optionally(inty(_)) 
```

# php - --dump-sql 有什么作用？

> ID：14688652
> 
> 赞同：0
> 
> 时间：2013-02-04T14:19:57.793
> 
> 标签：php, mysql, doctrine-orm

我正在将 Doctrine 与 CodeIgniter 一起使用。我通常使用 更新数据库`orm:schema-tool:update --force`，这使得数据库与我的模型相同。现在我有一些敏感的更新，我不想对我的数据库造成任何损害。

我读[了这个答案](https://stackoverflow.com/a/7375067/847773)。似乎 `--dump-sql`返回更新表所需的 SQL，它实际上是否也更新表是问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:24:21.483

它不会更新表。

`--dump-sql`只需打印 SQL 并`--force`执行 SQL 而不打印它。

`--dump-sql`帮助您了解具体`--force`要做什么。

# java - 获取辅助监视器的位置。（主要的右侧/左侧）

> ID：14688653
> 
> 赞同：2
> 
> 时间：2013-02-04T14:20:03.310
> 
> 标签：java, multiple-monitors

我正在开发一个需要在屏幕上查找对象的程序，到目前为止工作正常，但是我遇到了多显示器配置的问题。

`GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices()`-class 能够提供几乎所有我需要在多个屏幕上定义搜索区域的详细信息，但不能提供设备的顺序。（例如，辅助监视器位于主监视器的右侧）。

因此，我正在寻找一种方法来找出 Java 中主要和辅助监视器的屏幕位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:33:23.197

您可以尝试读取[`GraphicsDevice.html#getIDstring()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/GraphicsDevice.html#getIDstring%28%29)值以确定监视器的 ID。

```
GraphicsEnvironment ge = GraphicsEnvironment.
getLocalGraphicsEnvironment();
GraphicsDevice[] gs = ge.getScreenDevices();
for (int j = 0; j < gs.length; j++) { 
   GraphicsDevice gd = gs[j];
   System.out.println("ID#: " + gd.getDeviceID());
} 
```

给我这个：

```
ID#: \Display0
ID#: \Display1 
```

请记住，有时辅助监视器可能位于主监视器的左侧。在这种情况下，它将具有负界限。

为了确定屏幕区域的整个边界，您可以使用 JDK Javadocs 站点上提供的示例： [`GraphicsConfiguration`](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/GraphicsConfiguration.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:23:53.450

您可能必须从每个设备的 x 和 y 坐标中得出这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:27:40.983

x 和 y 坐标会将辅助屏幕放在右侧。

但是，您无法知道主屏幕实际上是在左侧、中间还是右侧。这取决于插入显示器的人。

实际上，有一种方法可以在一个工作站上配置 9 个面板。（我希望我有这个。）所以屏幕方向取决于用户。

# uml - 我应该使用什么包含或扩展

> ID：14688655
> 
> 赞同：0
> 
> 时间：2013-02-04T14:20:14.340
> 
> 标签：uml, tool-uml, argouml, staruml

考虑以下情况。我无法找到一个很好的答案。

我有一个用例 A。执行后，将遵循两个可能的用例之一：

1.  执行用例 B
2.  执行用例 C

我应该使用什么？A 包括 B 和 A 包括 C？OR B 扩展 A 和 C 扩展 A？

我不确定，因为 C 和 B 是这里的潜力。其中一项必须完成。

感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:18:28.893

根据您的示例用例 A“编写一个号码”（在电话上），那么您有两种可能性是用例 B“呼叫号码”还是用例 C“删除号码”

正确的选择是将用例 A 和 B 定义为主要用例，包括用例 A：

用例 B \ --include--> 用例 A 用例 C /

用例应由参与者目标定义，在您的示例中，参与者的目标是呼叫号码或删除号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:16:35.223

我不确定用例是否是对替代方案进行建模的正确方法。如果您在两个用例之间创建包含，这意味着包含链接的源**将始终包含**在包含的目标中。如果您在两个 UC 之间创建扩展，这与两个类之间的泛化具有或多或少相同的含义，即扩展的目标是源的泛化。

# python - 如何在 Windows XP 上安装 Python 图像库？

> ID：14688658
> 
> 赞同：1
> 
> 时间：2013-02-04T14:20:23.640
> 
> 标签：python, c, python-imaging-library

这是我下载的链接：

> Python Imaging Library 1.1.7 Source Kit（所有平台）（2009 年 11 月 15 日）
> 
> [http://effbot.org/downloads/Imaging-1.1.7.ta​​r.gz](http://effbot.org/downloads/Imaging-1.1.7.tar.gz)

如何执行`setup.py`？我正在使用 Python 3.X

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:10:04.920

试试 Christoph Gohlke 的优秀二进制文件：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#pil](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pil)

您必须选择正确的 python 版本和 32/64 位。

# logging - 如何让 log4j 的控制台附加程序以 hh:mm:milisec 格式写入经过时间值？

> ID：14688660
> 
> 赞同：0
> 
> 时间：2013-02-04T14:20:28.230
> 
> 标签：logging, log4j, format, timestamp

我使用带有转换模式的 log4j（和一些包装器）`"%r [%t] %p %c %x - %m%n"`。最左边的值 ( `%r`) 是自执行开始以来经过的毫秒数。我希望这个值以 mm:ss 或 mm:ss:milisecs 打印 - 但我仍然希望它是经过的时间，而不是当前时间。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-12T09:29:38.907

您应该编写自己的布局。最简单的只是扩展`org.apache.log4j.PatternLayout`和覆盖格式方法。

com.stackoverflow.MyPattern

```
public class MyPattern extends PatternLayout {
@Override public String format(LoggingEvent event) {
    return "MyOwnString" + super.format(event);
} 
```

然后像往常一样配置它：

```
log4j.appender.A1.layout=com.stackoverflow.MyPattern
log4j.appender.A1.layout=com.farmnet365.main.impl.jpa.extensions.TimeElapsedPatternLayout 
```

您可以随意扩展布局。这是一个使用 joda 添加经过时间的完整工作示例：[gist](https://gist.github.com/estani/29c58bf1f9b71f120dde1b056136fa15)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T04:39:22.527

您可以尝试以这种方式设置布局模式：

```
<appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="[%d{yyyy-MM-dd HH:mm:ss:sss z}] %5p %c{2}: %m%n" />
    </layout>
</appender> 
```

您可以[在此处](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)参考您可以使用的所有模式。

# logging - 来自 Graylog2 的电子邮件通知

> ID：14688666
> 
> 赞同：2
> 
> 时间：2013-02-04T14:20:34.923
> 
> 标签：logging, graylog2

我的客户设置了一个 Greylog2 服务器来聚合我们的日志文件。我们定义了几个流。

我希望每天发送电子邮件通知 - 至少“系统在过去 24 小时内收到 x 个错误”，理想情况下是前十个最常见错误的列表。

以前有没有人实施过这样的事情 - 你能提供任何提示或建议吗？我在一些论坛帖子中看到提到了 REST api，但找不到更多信息......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T00:48:02.797

在我的工作场所，我们配置了基于 rake 任务 + crontab 的警报任务。这是在 graylog2-server 中的警报 API 可用之前（[插件目录](http://graylog2.org/plugins)）。我们仍然使用 rake 任务，因为它们让我们使用 rails 模型和控制器。

将以下内容添加到 general.yaml 中，以便我们可以找到流 id。

```
# section in general.yaml

streamalarms:
  error_stream: 50ef145471de3516b900000d 
```

以下是实际的 rake 任务：

```
namespace :gl2rake

    # Helper method for recording how long jobs took, which is used to debug / tune the jobs.
    def monitoring_wrapper(task)
    btime = Time.now
    task_name = task.name
    task_starting(task_name)

    if block_given?
      yield
    else 
      puts "No block given to monitoring_wrapper!"
    end

    etime = Time.now
    duration = (etime - btime)
    puts "Time elapsed: #{duration} seconds"
    task_completed(task_name, duration)
  end

    desc "Send an email if a job is written to the error queue. If there are more than 5 errored jobs in the last 6 minutes then send sms"
  task :error_queue => :environment do |task|
    monitoring_wrapper(task) do

      # the streams to check
      # I have customised the configuration class so that all of the stream ids are available. This can be automated.
      streams = Configuration.streamalarm_config('error_stream', '')

      # this method has been added to app/models/configuration.rb as a convenience.
      # def self.streamalarm_config(key, default)
      #   nested_general_config :streamalarms, key, default
      # end

      # get unix epoch time of 6 minutes ago
      six_mins_ago = 6.minutes.ago

      filters = {
        # optionally apply a message filter to the stream
        :message => "\"Writing job to error queue.\"",
        :date => "from #{six_mins_ago}" 
      }

      # get the stream
      stream = Stream.find_by_id(stream_id)

      if !stream
        $stderr.puts "Invalid stream id #{stream_id}"
        next
      end

      messages = MessageGateway.all_by_quickfilter(filters, nil, {:stream_id => stream_id})

      if messages.size > 0

        #alert - jobs written to error queue
        if messages.size > 5
            # send_sms_for_stream is a custom method we wrote that hooks into an sms api.
          send_sms_for_stream("There are #{messages.size} errored job(s) in the last 6 minutes. Check email for details", 'error_queue', stream.title)
        end

        message = "There are #{messages.size} errored job(s) in the last 6 minutes. (Stream #{stream.title})\n"

        messages.each do |m|
          message += "\t#{m.message}\n"
        end

        # sends an email to our designated alerting email
        send_mail("There are  #{messages.size} errored job(s)", message, 'error_queue', stream.title)
      end
    end
  end
end 
```

现在可以通过 cron 作业调用它：例如

```
3-59/5 * * * * sudo rake -f /opt/graylog2-web-interface/Rakefile gl2rake:error_queue RAILS_ENV=production 
```

# java - JPA，同一张表上的左外连接

> ID：14688668
> 
> 赞同：0
> 
> 时间：2013-02-04T14:20:37.187
> 
> 标签：java, jpa

如何在 JPA 中使用同一张表执行左外连接？当我尝试这个时：

```
sql.append("SELECT e1 FROM ");
sql.append(getPersistentClass().getName());
sql.append(" e1 LEFT OUTER JOIN ");
sql.append(getPersistentClass().getName());
sql.append(" e2 ON e1.username = e2.username AND e1.radacctid < e2.radacctid ");
sql.append("WHERE e2.radacctid IS NULL ");
sql.append("AND e1.acctstoptime IS NOT NULL ");
sql.append("AND DATEDIFF(NOW(), e1.acctstoptime) > ?1"); 
```

我收到错误消息：“意外令牌：在第 1 行第 122 列附近打开 [SELECT e1 FROM com.homersoft.wh.db.entity.radius.RadAcct e1 LEFT OUTER JOIN com.homersoft.wh.db.entity.radius.RadAcct e2 ON e1.username = e2.username AND e1.radacctid < e2.radacctid 其中 e2.radacctid 为 NULL 且 e1.acctstoptime 不为 NULL 且 DATEDIFF(NOW(), e1.acctstoptime) > ?1]"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:54:38.290

我已经改变了这样的查询：

```
 StringBuilder sql = new StringBuilder();
    sql.append("SELECT e1 FROM ");
    sql.append(getPersistentClass().getName());
    sql.append(" e1 ");
    sql.append("WHERE e1.id = (");

    sql.append(" SELECT MAX(e2.id) FROM ");
    sql.append(getPersistentClass().getName());
    sql.append(" e2 WHERE e1.userName = e2.userName)");

    sql.append("AND e1.stopTime IS NOT NULL ");
    sql.append("AND e1.stopTime < ?1"); 
```

当然，它比原来的慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:21:51.817

（JPQL 的）FROM 子句中的“ON”在 JPA2.1 之前是无效的语法，这还不是最终的。可能将“ON”子句放在 WHERE 中，尽管意义不同。请注意，一些 JPA 实现已经提供了对它的支持（例如[DataNucleus JPA](http://www.datanucleus.org/products/accessplatform_3_2)）

# ms-access - SSMA 停止 Windows 7

> ID：14688678
> 
> 赞同：0
> 
> 时间：2013-02-04T14:21:17.513
> 
> 标签：ms-access, windows-7, azure, tcp-ip

我有一个 500M 访问表 470K 行，我尝试使用 SSMA 32 位 windows 7 反复上传到 Azure。它停在大约 140K 行。我减少了批量大小。被告知要增加keepalive，但在WINdows 7的注册表项中没有看到。这么基本的东西怎么会这么复杂。帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:43:50.673

您如何首先尝试将本地升迁到本地 sql server 副本以查看此处是否存在其他问题？

我会进行测试运行并将数据发送到 SQL 服务器的本地副本。这至少会消除任何数据问题或其他原因。如果上传运行没有问题，那么您的互联网连接（甚至可能是您的本地网络连接）可能是此失败中的一些问题。

# c - 在 pthread 中计算 pi

> ID：14688685
> 
> 赞同：0
> 
> 时间：2013-02-04T14:21:39.980
> 
> 标签：c, multithreading, pthreads

我正在尝试使用 bpp 方法计算 pi，但我的结果一直为 0。整个想法是让每个线程计算它的一部分，然后使用 join 方法对每个线程的总和求和

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <time.h>

#define NUM_THREADS     20

void *pi_function(void *p);//returns the value of pi
pthread_mutex_t mutex1 = PTHREAD_MUTEX_INITIALIZER; //creates a mutex variable
double pi=0,p16=1;int k=0;
double sumvalue=0,sum=0;

main()
{
    pthread_t threads[NUM_THREADS];  //creates the number of threads NUM_THREADS
    int iret1;   //used to ensure that threads are created properly
    //pthread_create(thread,attr,start_routine,arg)

    int i;
    pthread_mutex_init(&mutex1, NULL);

    for(i=0;i<NUM_THREADS;i++){
        iret1= pthread_create(&threads[i],NULL,pie_function,(void *) i);
        if(iret1){
            printf("ERROR; return code from pthread_create() is %d\n", iret1);
            exit(-1);
        }
    }

    for(i=0;i<NUM_THREADS;i++){
        iret1=pthread_join(threads[i],&sumvalue);
        if(iret1){
            printf("ERROR; return code from pthread_create() is %d\n", iret1);
            exit(-1);
        }

        pi=pi+sumvalue;  //my result here keeps returning 0

    }

    pthread_mutex_destroy(&mutex1);
    printf("Main: program completed. Exiting.\n");
    printf("The value of pi is  : %f\n",pi);

    exit(0);
}

void *pie_function(void * p){
    int rc;
    int k=(int)p;
    sumvalue += 1.0/p16 * (4.0/(8* k + 1) - 2.0/(8*k + 4)
                                          - 1.0/(8*k + 5) - 1.0/(8*k+6));
    pthread_mutex_lock( &mutex1 ); //locks the share variable pi and p16

    p16 *=16;
    rc=pthread_mutex_unlock( &mutex1 );
    if(rc){
        printf("ERROR; return code from pthread_create() is %d\n", rc);
    }
    pthread_exit(&sumvalue); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:14:30.260

出于您的目的，您不需要有互斥体或其他复杂的结构。只需让每个线程都根据自己的局部变量进行计算。向每个线程提供`double`他接收他的地址`k`并可能返回结果，就像您已经`ptread_t`为每个线程分离变量一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-31T04:24:54.747

为了避免得到 0 作为输出。将 pi=pi+sumvalue 放入 join for 循环中。因为当 sumvalue 非常小时且 pi=0 时 pi=pi+sumvalue 只执行一次。pi=0 是输出。只需将 pi=pi+sumvalue 放在 join for 循环中。

要获得一致的 pi 值，请遵循以下提到的详细信息。

您必须确保有两个想法：-

1.  只需将 pi 作为全局变量并删除所有全局变量。限制使用许多全局变量，因为更新它们将成为关键部分。将 pi 更新为

pthread 互斥锁(&mutex1);

pi += pi + 我的总和；

pthread 互斥锁解锁（&mutex1）；

2.  您还可以将 sum_values 计算为： void *pie_function(void* rank) {

    long my_rank =（长）排名；

//printf("%ld \n",my_rank);

双倍因子，总和 = 0.0；

长长我；

长长n=1000000；

long long my_n = n/thread_count;

长长 my_first_i = my_n*my_rank;

长长的 my_last_i = my_first_i + my_n;

如果 (my_first_i % 2 == 0) 因子 = 1.0;

否则因子 = -1.0;

for (i = my_first_i; i < my_last_i; i++, factor = -factor) sumvalue+= 4 *factor/(2* i+1);

pthread_exit(&sumvalue);
}

# java - 在eclipse java上的Processing2中调整图像大小

> ID：14688689
> 
> 赞同：0
> 
> 时间：2013-02-04T14:21:46.600
> 
> 标签：java, eclipse, processing

我是 Processing 的新手，并且一直在玩弄它的功能，但我一生都无法弄清楚如何正确调整图像大小。下面是教程中的一个函数示例，但我似乎无法正确调整图像大小以使其适合窗口，有人有什么建议吗？

导入处理.core.*；

```
public class Adjusting_image_brightness extends PApplet
{
    //intiallize image
    PImage img;
    public void setup()
    {
        //set the size
        size(320,240);
        //load the image
        img = loadImage("Conn4Board2.jpg");     
        //img.resize(400, 400);

    }
    public void draw()
    {
        //call the pixels
        loadPixels();
        //run through the pixels
        for(int x = 0; x < img.width; x++)
        {
            for(int y = 0; y <img.height ; y++)
            {
                //calculate the 1D pixel location 
                int loc = x + y*width;
                //get the R G B values from the picture
                float r = red(img.pixels[loc]);
                float b= blue(img.pixels[loc]);
                float g = green(img.pixels[loc]);

                //change the brightness acording to the mouse here
                double  adjustBrightness = ((float) mouseX / width) * 8.0;
                r *= adjustBrightness;
                b *= adjustBrightness;
                g *= adjustBrightness;

                    //Constrainr RGB to between 0 - 255
                    r = constrain(r, 0 , 255);
                    g = constrain(g, 0 , 255);
                    b = constrain(b, 0, 255);

                    //make a new colour and set pixel in the window 
                    int c = color(r,g,b);
                    pixels[loc] = c;

            }
        }
         updatePixels();
    }
} 
```

谢谢斯蒂芬。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:25:03.913

如果您只想调整图像大小以使其适合窗口，则代码过多。**image()**函数已经让你说它应该适合哪个边界框，所以只需使用这个：

```
image(img, 0, 0, width, height); 
```

并且您的图像将按比例绘制。

# sql - SQL Server加密pdf文件

> ID：14688690
> 
> 赞同：2
> 
> 时间：2013-02-04T14:21:48.683
> 
> 标签：sql, sql-server-2008, encryption

我正在使用 SQL Server 存储允许用户在应用程序中上传的 pdf 文件。

我将列定义为`VARBINARY(MAX)`. 最近有人要求我加密列，这可能吗，加密`VARBINARY(MAX)`列？

如果我需要更改 pdf 文件的列类型，我可以将其更改为什么？我需要允许存储最大为 2mb 的文件。我们正在使用对称密钥加密。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:22:14.887

我能够在网上找到一篇文章，其中谈到了 SQL Server 2005 加密的数据长度限制。作者还提供了允许将数据分块加密并保存，然后以同样的方式解密回来的功能，这对我有用。文章在这个网址：http: [//blogs.msdn.com/b/yukondoit/archive/2005/11/24/496521.aspx](http://blogs.msdn.com/b/yukondoit/archive/2005/11/24/496521.aspx)

# actionscript-3 - AS3 可检查字体选择器

> ID：14688694
> 
> 赞同：0
> 
> 时间：2013-02-04T14:21:58.300
> 
> 标签：actionscript-3, flash-component

我正在构建一个组件，并且需要能够从字体列表中选择字体。我显示了字体列表，但我不确定正确的数据类型是什么或我应该如何设置它。我已经尝试过 String 和 Font，但似乎遇到了错误。

```
private var _tfFormat:TextFormat;
_tfFormat = new TextFormat(); 
```

这将产生 1067：String 类型的隐式强制转换为不相关的 flash.text:Font。

```
private var _font:Font = null;
_tfFormat.font = font.fontName;
[Inspectable(type="Font Name", name="font", defaultValue="Arial")]
public function get font():Font 
{
    return _font;
}

public function set font(value:Font):void 
{
    _font = value;
    invalidate();
} 
```

这给了我一个 1065 变量未定义。

```
private var _font:String = "";

var __cls:Class = getDefinitionByName(font) as Class;
var __fnFont:Font   = new __cls() as Font;              
_tfFormat.font  = __fnFont.fontName;

[Inspectable(type="Font Name", name="font", defaultValue="")]
public function get font():String 
{
    return _font;
}

public function set font(value:String):void 
{
    _font = value;
    invalidate();
} 
```

我觉得我已经很接近了，而且我忽略了这件事非常容易。任何一双眼睛都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:56:52.853

好的，我解决了这个问题。

我将字体的数据类型改回字符串。事实证明，如果使用嵌入字体，Flash 会在名称中添加一个星号；例如：ArialBold* 但该星号不包含在字体的链接标识符中。所以在我的设置器中，我删除了星号，然后像往常一样从字符串创建一个类。这是（缩短的）代码。

如果有更好的方法，我仍然全神贯注。:)

```
private var _font:String = "";
private var _tfFormat:TextFormat;
_tfFormat = new TextFormat();
var __cls:Class = getDefinitionByName(font) as Class;
var __fnFont:Font = new __cls() as Font;
_tfFormat.font = __fnFont.fontName;

[Inspectable(type="Font Name", name="font", defaultValue="")]
public function get font():String 
{
    return _font;
}

public function set font(value:String):void 
{
    _font = value.split("*").join('');
    invalidate();
} 
```

# iphone - 在 iPhone 上使用 sqlite3_create_collat ion

> ID：14688695
> 
> 赞同：2
> 
> 时间：2013-02-04T14:21:59.843
> 
> 标签：iphone, objective-c, sqlite, accent-insensitive

我想创建一个排序规则，以便在数据库中不区分大小写并且没有重音搜索。

这是我的代码：

```
static int sqlite3NoCaseNoAccentCollate(void * foo, int ll, const void *l, int rl,
                         const void *r){
    NSLog(@"comparing");
    NSString *left = [NSString stringWithCharacters:l length:ll];
    NSString *right = [NSString stringWithCharacters:r length:rl];
    NSComparisonResult rs = [left compare:right options:NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch|NSForcedOrderingSearch];

    NSLog("%d",rs);
    return rs;
}

sqlite3 *db;
if (SQLITE_OK==sqlite3_open([pathToDataBase UTF8String], &db)){
    sqlite3_create_collation(db, "MYNOCASENOACCENT", SQLITE_UTF8, NULL, &sqlite3NoCaseNoAccentCollate);
} 
```

当我执行此查询时：

```
SELECT ('teste' LIKE 'testé' COLLATE MYNOCASENOACCENT) 
```

它返回 0 而不是 1，并且从不调用我的自定义函数（我在函数中放置断点进行测试）。

当我使用“PRAGMA collat​​ion_list”列出所有排序规则时，我的自定义排序规则就存在了。

知道这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T10:46:53.187

可能为时已晚，因此简要介绍一下：

您定义了整理功能。将用于比较指定排序规则的表列。如您所见，它不适用于like 运算符。

你需要做的是定义和注册一个like函数，例如

```
static void utf8likeFunc(sqlite3_context *context, int argc, sqlite3_value **argv)
{
    //...
}

sqlite3_create_function(db, "like", 2, SQLITE_UTF8, (void*)&likeInfoNorm, utf8likeFunc, 0, 0); 
```

样例函数可以在 sqlite 源代码中找到。

# python - 配置文件管理器类

> ID：14688698
> 
> 赞同：0
> 
> 时间：2013-02-04T14:22:10.167
> 
> 标签：python, design-patterns, configuration

我必须为“配置管理器”创建代码。这个想法是拥有一个包含所有连接字符串、另一个配置文件的路径、数据库主机名、用户和密码等的文件，并使用某种配置管理器访问该信息，以使其在所有模块中统一代码。它甚至可能是在整个代码执行期间（需要几个小时）存在于内存中的单例对象。

我用谷歌搜索并在stackoverflow上搜索了类似的东西，但并没有真正找到任何有用的东西。我不需要大的解释或例子，只需要对我应该采取的方向的提示或想法。另外，文件是xml格式还是ini格式更好？到目前为止，加密不是问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:12:21.497

像[ConfigParser](http://docs.python.org/2/library/configparser.html)这样的东西应该可以工作。如果您需要更多定制的东西，那么您需要提供更多规范，以便我们了解建议的内容。

# android - 异步任务 < Android 3.0

> ID：14688708
> 
> 赞同：3
> 
> 时间：2013-02-04T14:22:37.500
> 
> 标签：android, android-asynctask

我注意到，在 Android 3.0 及更高版本中，所有 AsyncTask 都被推送到堆栈中并按顺序执行，但在早期版本中它们是独立执行的。我可以以某种方式在 Android <3.0 上应用与 >=3.0 中相同的样式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:26:44.570

我没有对此进行测试，但是应该使用这个类而不是默认的 AsyncTask，它应该可以在任何具有单个工作线程的 API 上工作。

```
package com.shush.util.comm;

import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;
import java.util.concurrent.ThreadFactory;
import java.util.concurrent.Callable;
import java.util.concurrent.FutureTask;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.TimeoutException;
import java.util.concurrent.CancellationException;
import java.util.concurrent.atomic.AtomicInteger;

import android.os.Handler;
import android.os.Message;

public abstract class MyAsyncTask<Params, Progress, Result> {
    private static final String LOG_TAG = "AsyncTask";

    private static final int CORE_POOL_SIZE = 1;
    private static final int MAXIMUM_POOL_SIZE = 1;
    private static final int KEEP_ALIVE = 10;

    private static final BlockingQueue<Runnable> sWorkQueue =
            new LinkedBlockingQueue<Runnable>(10);

    private static final ThreadFactory sThreadFactory = new ThreadFactory() {
        private final AtomicInteger mCount = new AtomicInteger(1);

        public Thread newThread(Runnable r) {
            return new Thread(r, "AsyncTask #" + mCount.getAndIncrement());
        }
    };

    private static final ThreadPoolExecutor sExecutor = new ThreadPoolExecutor(CORE_POOL_SIZE,
            MAXIMUM_POOL_SIZE, KEEP_ALIVE, TimeUnit.SECONDS, sWorkQueue, sThreadFactory);

    private static final int MESSAGE_POST_RESULT = 0x1;
    private static final int MESSAGE_POST_PROGRESS = 0x2;
    private static final int MESSAGE_POST_CANCEL = 0x3;

    private static final InternalHandler sHandler = new InternalHandler();

    private final WorkerRunnable<Params, Result> mWorker;
    private final FutureTask<Result> mFuture;

    private volatile Status mStatus = Status.PENDING;

    /**
     * Indicates the current status of the task. Each status will be set only once
     * during the lifetime of a task.
     */
    public enum Status {
        /**
         * Indicates that the task has not been executed yet.
         */
        PENDING,
        /**
         * Indicates that the task is running.
         */
        RUNNING,
        /**
         * Indicates that {@link AsyncTask#onPostExecute} has finished.
         */
        FINISHED,
    }

    /**
     * Creates a new asynchronous task. This constructor must be invoked on the UI thread.
     */
    public MyAsyncTask() {
        mWorker = new WorkerRunnable<Params, Result>() {
            public Result call() throws Exception {
//                Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
                return doInBackground(mParams);
            }
        };

        mFuture = new FutureTask<Result>(mWorker) {
            @Override
            protected void done() {
                Message message;
                Result result = null;

                try {
                    result = get();
                } catch (InterruptedException e) {
                    android.util.Log.w(LOG_TAG, e);
                } catch (ExecutionException e) {
                    throw new RuntimeException("An error occured while executing doInBackground()",
                            e.getCause());
                } catch (CancellationException e) {
                    message = sHandler.obtainMessage(MESSAGE_POST_CANCEL,
                            new AsyncTaskResult<Result>(MyAsyncTask.this, (Result[]) null));
                    message.sendToTarget();
                    return;
                } catch (Throwable t) {
                    throw new RuntimeException("An error occured while executing "
                            + "doInBackground()", t);
                }

                message = sHandler.obtainMessage(MESSAGE_POST_RESULT,
                        new AsyncTaskResult<Result>(MyAsyncTask.this, result));
                message.sendToTarget();
            }
        };
    }

    /**
     * Returns the current status of this task.
     *
     * @return The current status.
     */
    public final Status getStatus() {
        return mStatus;
    }

    /**
     * Override this method to perform a computation on a background thread. The
     * specified parameters are the parameters passed to {@link #execute}
     * by the caller of this task.
     *
     * This method can call {@link #publishProgress} to publish updates
     * on the UI thread.
     *
     * @param params The parameters of the task.
     *
     * @return A result, defined by the subclass of this task.
     *
     * @see #onPreExecute()
     * @see #onPostExecute
     * @see #publishProgress
     */
    protected abstract Result doInBackground(Params... params);

    /**
     * Runs on the UI thread before {@link #doInBackground}.
     *
     * @see #onPostExecute
     * @see #doInBackground
     */
    protected void onPreExecute() {
    }

    /**
     * Runs on the UI thread after {@link #doInBackground}. The
     * specified result is the value returned by {@link #doInBackground}
     * or null if the task was cancelled or an exception occured.
     *
     * @param result The result of the operation computed by {@link #doInBackground}.
     *
     * @see #onPreExecute
     * @see #doInBackground
     */
    @SuppressWarnings({"UnusedDeclaration"})
    protected void onPostExecute(Result result) {
    }

    /**
     * Runs on the UI thread after {@link #publishProgress} is invoked.
     * The specified values are the values passed to {@link #publishProgress}.
     *
     * @param values The values indicating progress.
     *
     * @see #publishProgress
     * @see #doInBackground
     */
    @SuppressWarnings({"UnusedDeclaration"})
    protected void onProgressUpdate(Progress... values) {
    }

    /**
     * Runs on the UI thread after {@link #cancel(boolean)} is invoked.
     *
     * @see #cancel(boolean)
     * @see #isCancelled()
     */
    protected void onCancelled() {
    }

    /**
     * Returns <tt>true</tt> if this task was cancelled before it completed
     * normally.
     *
     * @return <tt>true</tt> if task was cancelled before it completed
     *
     * @see #cancel(boolean)
     */
    public final boolean isCancelled() {
        return mFuture.isCancelled();
    }

    /**
     * Attempts to cancel execution of this task.  This attempt will
     * fail if the task has already completed, already been cancelled,
     * or could not be cancelled for some other reason. If successful,
     * and this task has not started when <tt>cancel</tt> is called,
     * this task should never run.  If the task has already started,
     * then the <tt>mayInterruptIfRunning</tt> parameter determines
     * whether the thread executing this task should be interrupted in
     * an attempt to stop the task.
     *
     * @param mayInterruptIfRunning <tt>true</tt> if the thread executing this
     *        task should be interrupted; otherwise, in-progress tasks are allowed
     *        to complete.
     *
     * @return <tt>false</tt> if the task could not be cancelled,
     *         typically because it has already completed normally;
     *         <tt>true</tt> otherwise
     *
     * @see #isCancelled()
     * @see #onCancelled()
     */
    public final boolean cancel(boolean mayInterruptIfRunning) {
        return mFuture.cancel(mayInterruptIfRunning);
    }

    /**
     * Waits if necessary for the computation to complete, and then
     * retrieves its result.
     *
     * @return The computed result.
     *
     * @throws CancellationException If the computation was cancelled.
     * @throws ExecutionException If the computation threw an exception.
     * @throws InterruptedException If the current thread was interrupted
     *         while waiting.
     */
    public final Result get() throws InterruptedException, ExecutionException {
        return mFuture.get();
    }

    /**
     * Waits if necessary for at most the given time for the computation
     * to complete, and then retrieves its result.
     *
     * @param timeout Time to wait before cancelling the operation.
     * @param unit The time unit for the timeout.
     *
     * @return The computed result.
     *
     * @throws CancellationException If the computation was cancelled.
     * @throws ExecutionException If the computation threw an exception.
     * @throws InterruptedException If the current thread was interrupted
     *         while waiting.
     * @throws TimeoutException If the wait timed out.
     */
    public final Result get(long timeout, TimeUnit unit) throws InterruptedException,
            ExecutionException, TimeoutException {
        return mFuture.get(timeout, unit);
    }

    /**
     * Executes the task with the specified parameters. The task returns
     * itself (this) so that the caller can keep a reference to it.
     *
     * This method must be invoked on the UI thread.
     *
     * @param params The parameters of the task.
     *
     * @return This instance of AsyncTask.
     *
     * @throws IllegalStateException If {@link #getStatus()} returns either
     *         {@link AsyncTask.Status#RUNNING} or {@link AsyncTask.Status#FINISHED}.
     */
    public final MyAsyncTask<Params, Progress, Result> execute(Params... params) {
        if (mStatus != Status.PENDING) {
            switch (mStatus) {
                case RUNNING:
                    throw new IllegalStateException("Cannot execute task:"
                            + " the task is already running.");
                case FINISHED:
                    throw new IllegalStateException("Cannot execute task:"
                            + " the task has already been executed "
                            + "(a task can be executed only once)");
            }
        }

        mStatus = Status.RUNNING;

        onPreExecute();

        mWorker.mParams = params;
        sExecutor.execute(mFuture);

        return this;
    }

    /**
     * This method can be invoked from {@link #doInBackground} to
     * publish updates on the UI thread while the background computation is
     * still running. Each call to this method will trigger the execution of
     * {@link #onProgressUpdate} on the UI thread.
     *
     * @param values The progress values to update the UI with.
     *
     * @see #onProgressUpdate
     * @see #doInBackground
     */
    protected final void publishProgress(Progress... values) {
        sHandler.obtainMessage(MESSAGE_POST_PROGRESS,
                new AsyncTaskResult<Progress>(this, values)).sendToTarget();
    }

    private void finish(Result result) {
        if (isCancelled()) result = null;
        onPostExecute(result);
        mStatus = Status.FINISHED;
    }

    private static class InternalHandler extends Handler {
        @SuppressWarnings({"unchecked", "RawUseOfParameterizedType"})
        @Override
        public void handleMessage(Message msg) {
            AsyncTaskResult result = (AsyncTaskResult) msg.obj;
            switch (msg.what) {
                case MESSAGE_POST_RESULT:
                    // There is only one result
                    result.mTask.finish(result.mData[0]);
                    break;
                case MESSAGE_POST_PROGRESS:
                    result.mTask.onProgressUpdate(result.mData);
                    break;
                case MESSAGE_POST_CANCEL:
                    result.mTask.onCancelled();
                    break;
            }
        }
    }

    private static abstract class WorkerRunnable<Params, Result> implements Callable<Result> {
        Params[] mParams;
    }

    @SuppressWarnings({"RawUseOfParameterizedType"})
    private static class AsyncTaskResult<Data> {
        final MyAsyncTask mTask;
        final Data[] mData;

        AsyncTaskResult(MyAsyncTask task, Data... data) {
            mTask = task;
            mData = data;
        }
    }
} 
```

* * *

如果你想要相反的行为：

使用此 AsyncTask 而不是默认任务。使用`run()`函数来启动它而不是`execute`

```
package mobi.sherif.util;

import android.annotation.SuppressLint;
import android.os.AsyncTask;

/**
 * @author Sherif elKhatib
 *
 * Helper AsyncTask that will execute on Thread pool regardless of the api level
 */
public abstract class MyTask<Params, Progress, Result> extends AsyncTask<Params, Progress, Result> {

    @SuppressLint({ "NewApi", "NewApi" })
    public void run(Params... params) {
        if(android.os.Build.VERSION.SDK_INT<android.os.Build.VERSION_CODES.HONEYCOMB)
            execute(params);
        else
            executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, params);

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:00:23.397

就像是：

```
 if (Build.VERSION.SDK_INT >= 11 ) {
            //--post GB use serial executor by default --
            task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, new Void[]{});
        } else {
            //--GB uses ThreadPoolExecutor by default--
            task.execute(new Void[]{});
        } 
```

使用 11 代替`Build.VERSION_CODES`，Gingerbread 不知道 Honeycomb 的。

# networking - 通过袜子服务器传递https请求？

> ID：14688713
> 
> 赞同：0
> 
> 时间：2013-02-04T14:22:49.877
> 
> 标签：networking, socks

我尝试在我的 Firefox 网络设置中从 sockslist 网站设置 socks 服务器。然后我尝试正常的网站，看看它是否有效，事实上，我所有的流量都是通过那个 socks 服务器路由的。

但是，当我尝试使用**https**流量时，浏览器会跳过 socks 服务器并直接连接到目的地。为什么它会这样做？毕竟 https 是应用层，socks 是在较低的 TCP 层运行的，所以它应该可以工作..不是吗？

# python - 从django中的复杂字典生成复杂的xls文件

> ID：14688714
> 
> 赞同：0
> 
> 时间：2013-02-04T14:23:05.413
> 
> 标签：python, django, xls, xlwt

我有一本这样结构的字典。

```
data_dict = {'man_id':{'news_name_one':
                             'zc_one':{'id':2, 'name': 'nameone', 'adrs':'adrsone',      'state':'stateone'} 
                             'zc_two':{'id':3, 'name': 'nametwo', 'adrs':'adrstwo', 'state':'statetwo'}  
                             'zc_three':{'id':4, 'name': 'namethree', 'adrs':'adrsthree', 'state':'statethree'}    
                      },
                      {'news_name_two':
                             'zc_one':{'id':2, 'name': 'namefour', 'adrs':'adrsfour', 'state':'statefour'} 
                             'zc_two':{'id':3, 'name': 'namefive', 'adrs':'adrsfive', 'state':'statefive'}  
                             'zc_three':{'id':4, 'name': 'namesix', 'adrs':'adrssix', 'state':'statesix'}    
                      }
            } 
```

现在我必须在 python/django 中生成一个复杂的 xls 文件。xls 文件的格式可以在这里找到。“ [http://ge.tt/4B7xfQX](http://ge.tt/4B7xfQX) ”。怎么做到呢。我也在尝试在 html 页面中执行此操作。但是太糊涂了。

# list - 从列表中删除 x 的第一个实例

> ID：14688716
> 
> 赞同：3
> 
> 时间：2013-02-04T14:23:13.947
> 
> 标签：list, haskell

我是 Haskell 的新手，一直在努力学习基础知识。

假设我有以下列表 y：

`3:3:2:1:9:7:3:[]`

我正在尝试找到一种方法来删除列表 y 中第一次出现的 3。这可以使用简单的列表理解吗？

我尝试了什么（此方法从列表中删除所有实例）：

```
deleteFirst _ [] = [] 
deleteFirst a (b:bc) | a == b    = deleteFirst a bc 
                     | otherwise = b : deleteFirst a bc 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T14:27:16.213

不，不可能使用列表理解。在列表理解中，您仅根据该元素决定保留哪个元素。在您的示例中，您希望将遇到的前 3 个与其他 3 区别对待（因为您只想删除第一个），因此该决定不仅仅取决于元素。所以列表理解是行不通的。

您使用递归函数的尝试已经非常接近了，只是，正如您所说，它删除了所有实例。为什么它会删除所有实例？因为在删除第一个实例后，您`deleteFirst`再次调用列表的其余部分，这将删除下一个实例，依此类推。`deleteFirst`要解决此问题，请在删除第一个实例后不要再次调用。所以在那种情况下只使用`bc`而不是。`deleteFirst a bc`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T16:06:03.970

由于其他已经提到的列表理解不是此任务的适当解决方案（很难在一个步骤中终止执行）。

您几乎已经编写了正确的解决方案，只是在与匹配值相等的情况下，您必须通过返回没有匹配元素的列表的其余部分来终止计算：

```
deleteFirst _ [] = [] 
deleteFirst a (b:bc) | a == b    = bc 
                     | otherwise = b : deleteFirst a bc

> print $ deleteFirst 3 (3:3:2:1:9:7:3:[])
> [3,2,1,9,7,3] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T14:26:37.673

我不相信可以通过列表理解来做到这一点（至少不是以任何惯用的方式）。

你的`deleteFirst`作品差不多。您需要更改的只是在第一次匹配后停止删除，即`deleteFirst a bc`在第一个子句中替换为`bc`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T21:31:30.383

sepp2k 关于列表推导的评论很重要。像`map`, `filter`,`foldr`等等这样的列表操作对所有列表项进行统一处理，了解它们的重要一点是每个步骤可以获得哪些信息，以及每个步骤的结果如何与其他步骤的结果相结合。

但我想强调的一点是，我认为你真的应该尝试从库函数的角度来解决这些问题。[将我的旧答案中](https://stackoverflow.com/questions/14137172/replace-an-element-in-a-list-only-once-haskell/14150282#14150282)的解决方案改编为您的问题：

```
deleteFirst x xs = beforeX ++ afterX
    -- Split the list into two pieces:
    --   * prefix = all items before first x
    --   * suffix = all items after first x
    where (beforeX, xAndLater) = break (/=x) xs
          afterX = case xAndLater of
                     [] -> []
                     (_:xs) -> xs 
```

诀窍是它`break`已经内置了“直到第一次命中”行为。作为进一步的练习，您可以尝试编写自己的`break`; 学习如何编写这些小型、通用和可重用的函数总是很有启发性的。

# apache - Raspberry pi - 如何更快地运行 apache

> ID：14688731
> 
> 赞同：0
> 
> 时间：2013-02-04T14:23:54.547
> 
> 标签：apache, webserver, raspberry-pi

我正在寻找方法，如何在我的树莓上更快地运行 apache2 服务器。

你有什么建议吗？

还是我应该使用另一个服务器应用程序？（我不想再次重建整个网络。

谢谢你的建议，克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:45:56.700

我会说更轻的网络服务器可能更适合 Pi。您是否尝试过 lighthttpd 或 nginx？你得到多少请求/秒，你希望达到多少？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T21:52:17.067

我会使用 Nginx。内存占用小，速度惊人。您甚至可以将 PHP 与它一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-22T16:29:36.983

如果您想保留 apache，并且您使用的是 php，那么您可以做的一件事来加快响应时间，那就是缓存。这可以显着减少动态网页的加载时间。为了做到这一点，我使用的解决方案是 PHP-APC。为了使用它，安装它，`sudo apt-get install php-apc`然后用 `cd /etc/php5/conf.d`,配置它`sudo nano 20-apc.ini`，然后将其后的值更改`apc.shm_size=`为 20M 或更大。

到文件（不要忘记保存更改！）。

# vba - 使用 vb 脚本从网页的下拉列表中选择特定值

> ID：14688735
> 
> 赞同：-3
> 
> 时间：2013-02-04T14:24:02.660
> 
> 标签：vba

我在网页的下拉菜单中有一些值。

我想使用 VBA 从该下拉列表中选择一个特定的值。

提前致谢，

希滕德拉

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-02-04T14:27:43.003

应该：

```
ddlMyDropDownList.Items(index) //starting with 0 
```

# javascript - Dojo 小部件变量引用在 doh 测试后仍然保持

> ID：14688745
> 
> 赞同：0
> 
> 时间：2013-02-04T14:24:26.580
> 
> 标签：javascript, unit-testing, dojo, doh

我一直在为我的 Dojo 小部件创建一些测试，以检查布尔标志是否设置正确。但是，我发现由于我更改了构造函数以传入对象，因此之前运行的测试似乎会影响后续测试。

我尝试在拆卸方法中破坏小部件，但无论我做什么，该值仍然存在。

谁能建议我可能做错了什么？

我的小部件代码：

```
var showControls = true;

    return declare([WidgetBase, TemplatedMixin, _WidgetsInTemplateMixin], {

        templateString: template,

        constructor: function (params) {

            this.showControls = (typeof params.showControls === "undefined" || typeof params.showControls != "boolean") ? this.showControls : params.showControls;
        }
    }); 
```

我的测试课是：

```
var customWidget;

doh.register("Test controls", [ 
    {
        name: "Test controls are not visible when set in constructor",
        runTest: function() {
            var params = { showControls: false };
            customWidget = new CustomWidget(params);
            doh.assertFalse(customWidget.getShowControls());
        }
    },
    {
        name: "Test controls are visible when set in constructor with string instead of boolean",
        runTest: function() {
            var params = { showControls: "wrong" };
            customWidget= new CustomWidget(params);
            doh.assertTrue(customWidget.getShowControls());
        }
    }
]); 
```

因此，第一个测试通过，因为 showControls 设置为 false，但是第二个测试尝试创建一个新实例，构造函数将在其中检查该值是否为布尔值。然而，当我调试它时，它认为 showControls 以“假”开始，而不是真的。

有什么线索吗？！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:32:03.950

`dijit/_WidgetBase`具有[混合构造函数参数的机制，](http://livedocs.dojotoolkit.org/dijit/_WidgetBase#attributes)这就是您描述的行为的原因。一种可能的解决方案是将**自定义设置器**定义为方法`_set[PropertyName]Attr`：

```
var defaults = {
    showControls: true
}

var CustomWidget = declare([_WidgetBase, _TemplatedMixin], {
    templateString: "<div></div>",

    constructor: function(params) {
        declare.safeMixin(this, defaults);
    },

    _setShowControlsAttr: function(value) {
        this.showControls = (typeof value === "boolean") ? value : defaults.showControls;
    }
}); 
```

看看它在行动：http: [//jsfiddle.net/phusick/wrBHp/](http://jsfiddle.net/phusick/wrBHp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:51:43.757

我建议您列出小部件的任何成员，如果不列出，则可能无法正确识别传递给构造函数的内容。看来你想使用 this.showControls，所以你应该有一个 showControls 成员。像这样 ：

```
return declare([WidgetBase, TemplatedMixin, _WidgetsInTemplateMixin], {

    templateString: template,

    showControls: true, // default value

    constructor: function (params) {
         // no further action, params are automatically mixed in already
    }
}); 
```

列出成员时要小心，dojo 将数组和对象解释为类成员（如 Java 中的静态，AFAIK 它们附加到原型）所以如果您希望每个对象具有例如单独的值数组，请将其列为 null 和在您的构造函数中初始化。

# java - GWT：如何滚动到页面底部？

> ID：14688746
> 
> 赞同：2
> 
> 时间：2013-02-04T14:24:30.653
> 
> 标签：java, gwt, scrollbar

在我的页面上，我有一个默认隐藏的面板。必要时我可以通过显示`myPanel.setVisible(true)`。在此之后，窗口的高度增加并出现窗口滚动条。

问题是窗口不会自动滚动到底部，这是一种理想的行为。我该如何解决？我只想将我的页面滚动到底部。

我知道`Window.scrollTo (LEFT, TOP)`可以帮助我。但问题是我不知道如何计算页面相对于顶部的高度——我需要提供给这个方法的第二个参数。我真的尝试了很多方法：

```
Window.getClientHeight();
Document.get().getScrollHeight();
Document.get().getBody().getOffsetHeight();
Document.get().getBody().getAbsoluteBottom(); 
```

在隐藏面板变得可见后，其中的前两个不会更改其值。第二对给了我 0 和 8 (???) 值。

那么我该如何解决我的问题呢？

ps 如果情况有点不同，并且我有一个带有滚动条的 div，而不是窗口滚动条，是否可以通过编程将其滚动到底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:04:29.970

您可以使用[setVerticalScrollPostion](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/ScrollPanel.html#setVerticalScrollPosition%28int%29) API 并设置滚动的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:03:09.733

它是简单的 Panel 还是它的某个子类。

无论如何，首先尝试：

```
int top = myPanel.getAbsoluteTop(); 
```

然后滚动到与 top 聚合的某个值。

来自 API：

***公共 int getAbsoluteTop()***

获取对象的绝对顶部位置（以像素为单位），从浏览器窗口的客户区测量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-06T09:07:04.950

要向下滚动文档，您应该使用 Window 对象中的 scrollTo 方法，即：

```
Window.scrollTo(0, Window.getScrollTop() + Window.getClientHeight()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-26T20:32:05.293

你实际上不需要知道页面的大小来滚动到它的底部。只需使用

`Window.scrollTo(0, Integer.MAX_VALUE);`

至少这一直对我有用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-04-11T12:12:01.147

如果需要，您可以创建一个带有 id 的小部件句柄。例如 ：`widget.getElement().setId("scrollPanel");`

然后，您可以使用它更简单地滚动小部件上的视图`Document.get().getElementById("scrollPanelFooter").scrollIntoView();` ！

# android - Android：TextChangedListener 问题

> ID：14688753
> 
> 赞同：0
> 
> 时间：2013-02-04T14:24:53.587
> 
> 标签：android

我有一个编辑文本和一个包含所有联系人的列表视图。当我搜索名称并显示结果时，当我输入名称时，它会显示类似 AutoComplete 的结果，下面是我的代码

```
final EditText editTxt = (EditText) findViewById(R.id.txtContName);

    editTxt.addTextChangedListener(new TextWatcher() {

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        public void afterTextChanged(Editable s) {
            inputName = s.toString();
            if(inputName!=null&&!inputName.trim().equals("")){

                ((Button) findViewById(R.id.btnsearch)).setBackgroundResource(R.drawable.search);

            Log.d(TAG, "LoadMoreEntries --> Constants.loadEntries : "
                    + Constants.loadEntries);
            try {
                if (Constants.loadEntries != null) {
                    Constants.loadEntries.cancel(true);
                }
            } catch (Exception e) {
                Log.e(TAG, "Loading Data-------------------------------", e);
            }
            Constants.loadEntries = new LoadEntries();
            Constants.loadEntries.execute();
        }
        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

        }
    }); 
```

我在尝试清除编辑文本时遇到问题，当编辑文本清除但没有发生时，所有结果都应该显示。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:29:45.590

那是因为当输入为空白时，您没有得到所有结果？

```
if(inputName!=null&&!inputName.trim().equals("")){
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:30:06.700

所以我更改了代码以获得更好的格式。这应该可以解决你的问题。我不知道什么是 Constants.loadEntries = new LoadEntries(); 和常量.loadEntries.execute()；

做，但也许也有问题。但是试试下面的代码：

```
 final EditText editTxt = (EditText) findViewById(R.id.txtContName);

    editTxt.addTextChangedListener(new TextWatcher()
    {

        public void beforeTextChanged(CharSequence s, int start, int count,
                                      int after)
        {
        }

        public void afterTextChanged(Editable s)
        {
            inputName = s.toString();
            if (inputName != null && !inputName.trim().equals(""))
            {

                ((Button) findViewById(R.id.btnsearch)).setBackgroundResource(R.drawable.search);

                Log.d(TAG, "LoadMoreEntries --> Constants.loadEntries : "
                        + Constants.loadEntries);
                try
                {
                    if (Constants.loadEntries != null)
                    {
                        Constants.loadEntries.cancel(true);
                    }
                } catch (Exception e)
                {
                    Log.e(TAG, "Loading Data-------------------------------", e);
                }
                Constants.loadEntries = new LoadEntries();
                Constants.loadEntries.execute();
            }
            //Here do the else and call the LoadEntries
            else
            {
                Constants.loadEntries = new LoadEntries();
                Constants.loadEntries.execute();
            }
        }

        public void onTextChanged(CharSequence s, int start, int before,
                                  int count)
        {

        }
    }); 
```

更好的代码格式肯定会帮助你。

# c# - 没有main方法的C#类

> ID：14688756
> 
> 赞同：12
> 
> 时间：2013-02-04T14:25:04.703
> 
> 标签：c#, class, main

我正在学习 C#，我对它很陌生，所以请原谅我这个看似愚蠢的问题。我有一些 Java 经验，我注意到 C# 程序`main()`在其主类中也需要一个方法。

如果我想创建一个不是主类的类，即我导入到主类中的类怎么办？

我试图这样做，当我编译（通过 cmd using `csc File.cs`）时，编译器说它将生成的 .exe 没有`main()`方法。这是否意味着我错了，*每个*类都需要一个`main()`方法，或者我错误地编译它？

也许问题出在代码中（因为我依赖于我对 Java 语法的了解），如下所示：

```
public class Class
{
    int stuff;
    public Class(int stuff)
    {
        this.stuff = stuff;
        stuff();
    }
    public void method()
    {
        stuff();
    }
} 
```

**编辑：**恐怕这被严重误解了。我不是在问文件是否需要 main 方法，而是在问我如何将这个类导入另一个类，因为我意识到如果我要这样做，我就不能有一个 main 方法（正如我所说，我有一些 Java 经验），但是每当我尝试在没有 Java 的情况下进行编译时，编译器都会告诉我我需要一个。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-04T14:26:26.340

##并非所有类都需要`Main`方法。

正如 MSDN 所说

> Main 方法是 C# 控制台应用程序或 Windows 应用程序的入口点。（库和服务不需要 Main 方法作为入口点。）。启动应用程序时，Main 方法是调用的第一个方法。
> 
> C# 程序中只能有一个入口点。如果您有多个具有 Main 方法的类，则必须使用 /main 编译器选项来编译程序，以指定将哪个 Main 方法用作入口点。

* * *

只有一个类需要保留`Main`方法，即作为应用程序入口点的类。

主要方法的签名是：`static void Main(string[] args)`或`static void Main()`或`static int Main(string[] args)`或`static int Main()`

查看此链接了解更多详情[`Main() and Command-Line Arguments (C# Programming Guide`：）](http://msdn.microsoft.com/en-in/library/acy3edy3%28v=vs.100%29.aspx)

* * *

对于您上面的示例：

```
public class MyClassName // changed the class name, avoid using the reserved keyword :P
{
    int stuff;
    public MyClassName(int stuff)  // is the constructor
    {
        this.stuff = stuff;
    }
    public void method()
    {
        stuff = 1;
    }
} 
```

如果需要使用该类，可以使用 main 方法创建一个静态类：

```
class ProgramEntry
{
    static void Main(string[] args)
    {
        MyClassName classInstance = new MyClassName(2);
        classInstance.method();
    }
} 
```

* * *

从**C# 9**开始，引入了没有 Main 方法的程序选项。无需声明 Main 方法，您现在可以直接在类外部的文件中编写代码。有关更多详细信息，请参阅[顶级语句 - 没有 Main 方法的程序](https://docs.microsoft.com/en-us/dotnet/csharp/fundamentals/program-structure/top-level-statements)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:27:52.783

在这种情况下，您的代码中至少需要一个类以及其中的`Main`方法。其他类不需要该`Main`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T14:28:26.520

`main`构建可执行程序集 (.exe) 时只需要一个方法，并且只在一个类中需要它。此方法将是执行开始的默认入口点。`main`当您将代码构建为类库 (.dll) 时，您不需要方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T14:28:45.537

尝试`/t:library`在编译器中使用 switch。默认情况下，它会尝试创建一个`.exe`，当然，它需要一个入口点（即`main`方法）。如果你编译成 a`.dll`你就不需要了。

但是正如 HighCore 建议的那样，如果您正在学习，只需使用 Visual Studio（如果您还没有下载免费版本之一）并让它担心编译器标志。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T14:30:08.987

C#**应用程序**必须至少有一个具有 Main 方法的类，以便可以从它开始执行。应用程序可以有很多类，但只需要一个类和一个 Main 方法。

C#**库**不必具有 Main 方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-04T14:30:23.567

如果这是一个控制台应用程序，您需要一个 Main 方法开始。否则（例如 Web 应用程序），您不需要一个。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-04T15:36:41.397

只有一个类和一种方法应该没问题。如果需要，可以在设置中设置 Visual Studio 中的启动对象。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-25T19:45:32.167

没有 Main() 的 C# 类意味着，您可以将其编译为库 (.dll) csc /target:library YourClassFileName.cs 或 csc /t:library YourClassFileName.cs 使其成为 YourClassFileName.dll 文件，然后您可以使用它在另一个具有 Main() 方法（入口点）的类文件中

csc /reference:YourClassFileName.cs YourMainClassFileName.cs 或 csc /r:YourClassFileName.cs YourMainClassFileName.cs

制作 YourMainClassFileName.exe 文件

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-04T14:27:49.707

`static void main(string[] args)` C# 程序中的方法是执行的起点。如果您尝试编译单个 C# 文件，编译器会找到此方法来开始执行。您不需要在用作模型的类中创建方法，但您必须在控制台程序、WinForms 等中使用此方法...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-14T13:54:58.630

Main 是必需的，但 C#9 具有此功能，因此您不会编写 Main，但它将充当 Main。

在 C# 9.0 中，您可以选择在顶层编写主程序：

```
using System;

Console.WriteLine("Hello World!"); 
```

允许任何陈述。该程序必须在文件中的 usings 之后和任何类型或命名空间声明之前发生，并且您只能在一个文件中执行此操作，就像您现在只能有一个 Main 方法一样。

如果你想返回一个状态码，你可以这样做。如果你想等待事情，你可以这样做。如果你想访问命令行参数，可以使用 args 作为“神奇”参数。

局部函数是一种语句形式，在顶层程序中也是允许的。从顶级语句部分之外的任何地方调用它们都是错误的。

**参考**：[https ://devblogs.microsoft.com/dotnet/welcome-to-c-9-0/#top-level-programs](https://devblogs.microsoft.com/dotnet/welcome-to-c-9-0/#top-level-programs)

# ruby-on-rails - 使用分页时如何将默认页面设置为最后一页？

> ID：14688761
> 
> 赞同：0
> 
> 时间：2013-02-04T14:25:27.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pagination

假设有 115 个社区。
然后它每页显示 10 个社区，并带有分页。

当我要去 时`example.com/communities`，它会显示 10 条最旧的记录。

`example.com/communities?page=12`但是，我希望它默认链接到 。
它应该链接到社区的最后一页。

是否可以？

现在我的链接是这样的

```
<%= link_to "Communities", communities_path %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:31:57.400

这是可能的，但您必须添加一些逻辑

```
communities = Community.page(params[:page])
communities.total_pages # 12
communities_path(page: communities.total_pages) 
```

或者您可以颠倒查询的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:30:52.950

另一种思考方式。更改您的订单，使其显示最新的。

因此，在您的 arel 查询中，请执行以下操作：

```
Blog.all.order("id desc") 
```

我离开了分页调用，因为我不知道您使用的是什么分页库:)。

# file-upload - 如何在外部IP地址vbscript中上传文件

> ID：14688762
> 
> 赞同：-1
> 
> 时间：2013-02-04T14:25:29.053
> 
> 标签：file-upload, asp-classic, vbscript, ftp

我在 asp 经典中使用 vbscript。我还使用了 FreeASPUpload 类。我想上传文件不是在本地，而是使用其 IP 地址作为路径上传到服务器。

如果我将在本地上传，这是代码工作..

```
 Dim uploadsDirVar
  uploadsDirVar = Server.MapPath("../temp/")

  Set Upload = New FreeASPUpload
  Upload.Save(uploadsDirVar) 
```

但我想将它上传到带有 ip 地址的路径中。下面是我尝试过的代码，但它导致 HTTP 500 内部服务器错误。

```
Dim uploadsDirVar
uploadsDirVar = "\\123.45.6.789\DocFolder\"

Set Upload = New FreeASPUpload
Upload.Save(uploadsDirVar) 
```

由于登录，我已经在本地映射了文件夹 \123.45.6.789\DocFolder\。我也尝试了带有凭据的代码，但仍然出现同样的错误。见下文：

```
Dim ServerShare 
Dim UserName 
Dim Password 
Dim NetworkObject 
Dim FSO

ServerShare = "\\123.45.6.789\DocFolder\"
UserName = "domain\username"
Password = "password"

Set NetworkObject = CreateObject("WScript.Network")
Set FSO = CreateObject("Scripting.FileSystemObject")

NetworkObject.MapNetworkDrive "", ServerShare, False, UserName, Password

Dim uploadsDirVar
uploadsDirVar = "\\123.45.6.789\DocFolder\"

Set Upload = New FreeASPUpload
Upload.Save(uploadsDirVar) 
```

结果还是一样..有人可以帮忙吗？我是 asp classic 和 vbscript 的新手，尤其是在文件上传及其行为方面。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:22:53.933

您在 IIS 中的网站通常在特定于 IIS 的计算机用户帐户 (IUsr_computername) 下运行。它在您尝试通过网络访问的远程计算机上没有任何权限。您需要在 IIS 计算机和远程共享所在的域中创建一个用户，并将该网站设置为作为该新域用户运行。然后，您可以授予该新域用户在远程计算机上共享的文件夹中读/写的权限。

# php - 在 codeigniter 上使用 ajax 表单提交

> ID：14688763
> 
> 赞同：0
> 
> 时间：2013-02-04T14:25:29.563
> 
> 标签：php, jquery, mysql, ajax, codeigniter

我试图在 jquery ajax 的帮助下在 codeigniter 中创建一个表单，但我似乎在使它工作时遇到了问题

我想做的是……

1.  创建一个表单，该表单将在将数据插入数据库之前检查用户是否填写了所有必要的字段

2.  如果有一个字段不包含任何答案，则会出现一个 div 说明哪些字段需要回答

3.  如果所有字段都填满，表单将提交，更新数据库，然后会出现一个 div 表示表单已成功提交

这是我的代码

**控制器**

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

    class Site extends CI_controller {

        public function __construct()
        {
            parent::__construct();
            // Your own constructor code
            $this->load->model("site_model");

            //$cms_db = $this->load->database('cms', TRUE); /* database conection for write operation */
            $site_db = $this->load->database('default', TRUE);  
        } 
        public function index()
        {
        //$this->load->helper('form');

        $data = $this->_initialize_data();
        $data['about'] = $this->site_model->get_about();
        $this->load->vars($data);
        $this->load->view('site/index');
        }

        public function learner()
        {
            $this->site_model->submit_learner();
            redirect(base_url() . "site/index");
        }

        public function _initialize_data()
        {
            $data['cp'] = $this->site_model->get_cp();
            $data['op'] = $this->site_model->get_op();
            $data['learnedu'] = $this->site_model->get_learnedu();
            $data['learnals'] = $this->site_model->get_learnals();
            $data['learnbrgy'] = $this->site_model->get_learnbrgy();
            $data['learnben'] = $this->site_model->get_learnben();
            return $data;
        }
} 
```

**模型**

```
 <?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

    //  CI 2.0 Compatibility
    if(!class_exists('CI_Model')) { class CI_Model extends Model {} }

    class Site_model extends CI_Model
    {

                function submit_learner()
        {
            //$this->load->helper('date');
            $cms_db = $this->load->database('cms', TRUE); 

                    $fname = $this->input->post("fname");
                    $mname = $this->input->post("mname");
                    $lname = $this->input->post("lname");
                    $ename = $this->input->post("ename");
                    $bday = $this->input->post("bday");
                    $opt = $this->input->post("opt");
                    $educ = $this->input->post("educ");
                    $als = $this->input->post("als");
                    $brgy = $this->input->post("brgy");
                    $guardian = $this->input->post("guardian");
                    $relation = $this->input->post("relation");
                    $benefit = $this->input->post("benefit");

                    $newdata = array('first_name'=>$fname,
                                        'middle_name'=>$mname,
                                        'last_name'=>$lname,
                                        'extension_name'=>$ename,
                                        'bday'=>$bday,
                                        'gender'=>$opt,
                                        'education'=>$educ,
                                        'als'=>$als,
                                        'brgy'=>$brgy,
                                        'guardian'=>$guardian,
                                        'relationship'=>$relation,
                                        'added_by'=>'OTH',
                                        'added_id'=>''
                                        );

                    $cms_db->insert('records', $newdata); 
                    $id = $cms_db->insert_id();

                    foreach($benefit as $b)
                    {
                        $ben = array('record_id'=>$id,'beneficiary_id'=>$b);
                        $cms_db->insert('is_beneficiary', $ben); 
                    }

                    $date = date('Y-m-d g:ia');

                    $date_logged = array('action'=>'Added','action_date'=>$date,'activity'=>$fname . " " . $mname . " " . $lname . ' was added through the Abot Alam Website');
                    $cms_db->insert('date_logged', $date_logged); 

        }
} 
```

**看法**

```
 <?php
        $attributes = array('class' => 'form-vertical','id'=>'form_learner','name'=>'form_learner');

        echo form_open(base_url() . 'site/learner', $attributes);
       ?>                   

      <div class="control-group">
        <label class="control-label" >First Name</label>
        <div class="controls">
          <input type="text" class="input input-xlarge" name="fname" id="fname"  placeholder="">
        </div>
      </div>

/*-------- Theres a bunch of other fields here that asks things like last name, middle name but i decided to omit it to make the post shorter ----------------*/ 

<input type="submit" class="btn btn-primary" value="Save" placeholder="" name="submit_learner" id="submit_learner"> 
</form>
</div> 
```

**脚本.js**

```
 $("#submit_learner").click(function(e) {
            e.preventDefault();
            fname = $("#fname").val();
            mname = $("#mname").val();
            lname = $("#lname").val();
            ename = $("#ename").val();
            bday = $("#bday").val();
            educ = $("#educ").val();
            als = $("#als").val();
            brgy = $("#brgy").val();
            guardian = $("#guardian").val();
            relation = $("#relation").val();

            if(fname==''){
                    $("#learner_status").show();
                    $("#learner_status").html("<h4>Input First Name</h4>");
                    $("#fname").focus();

                }

            else if(mname==''){
                    $("#learner_status").show();
                    $("#learner_status").html("<h4>Input Middle Name</h4>");
                    $("#mname").focus();

                }

            else if(lname==''){
                    $("#learner_status").show();
                    $("#learner_status").html("<h4>Input Last Name</h4>");
                    $("#lname").focus();

                }

            else if(ename==''){
                    $("#learner_status").show();
                    $("#learner_status").html("<h4>Input Extention Name</h4>");
                    $("#ename").focus();

                }

            else if(bday==''){
                    $("#learner_status").show();
                    $("#learner_status").html("<h4>Input Birthdate</h4>");
                    $("#bday").focus();

                }

            else if(educ==''){
                    $("#learner_status").show();
                    $("#learner_status").html("<h4>Input Highest Formal Education</h4>");
                    $("#educ").focus();

                }

            else if(als==''){
                    $("#learner_status").show();
                    $("#learner_status").html("<h4>Input ALS Programs Involved</h4>");
                    $("#als").focus();

                }

            else if(brgy==''){
                    $("#learner_status").show();
                    $("#learner_status").html("<h4>Input Barangay</h4>");
                    $("#brgy").focus();

                }

            else if(guardian==''){
                    $("#learner_status").show();
                    $("#learner_status").html("<h4>Input Guradian</h4>");
                    $("#guradian").focus();

                }

            else if(relation==''){
                    $("#learner_status").show();
                    $("#learner_status").html("<h4>Input Relationship to Guardian</h4>");
                    $("#relation").focus();

                }

            else{
                var datastr = 'fname='+fname + '&mname='+mname + '&lname='+lname + '&ename='+ename + '&bday='+bday + '&educ='+educ + '&als='+als + '&brgy='+brgy + '&guardian='+guardian + '&relation='+relation; 
                $.ajax({
                    url:"<?php echo base_url(); ?>site/learner",
                    type:'POST',
                    data:datastr,
                    dataType:"json",
                    success:function(result){
                    $("#learner_status").show();
                    $("#learner_status").attr('class', 'span 12 alert alert-success');
                    $("#learner_status").html("<h4>Form Successfully Submitted</h4>");
                    }

                });

                }

         }); 
```

我有一种感觉，错误在我的 javascript 中的某个地方

特别是这条线

```
$.ajax({
                url:"<?php echo base_url(); ?>site/learner", 
```

如果我错了，请纠正我，但据我所知，你不能在脚本标签中使用 php 标签

但这就是人们在互联网上看到的其他示例中的做法

我错过了什么吗？

谢谢

编辑：顺便说一句，我忘了提到我的代码的问题是它没有插入数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:17:16.387

在你的 html 中，在你加载之前`script.js`，你可以把这个：

```
<script>var base_url = '<?php echo base_url(); ?>' + 'site/learner';</script> 
```

`base_url`然后应该可以访问js 变量`script.js`，因此：

```
$.ajax({
            url: base_url, //etc 
```

# php - PHP改进我的显示消息功能

> ID：14688767
> 
> 赞同：2
> 
> 时间：2013-02-04T14:25:31.683
> 
> 标签：php, get, user-defined-functions

如果可能的话，我需要一些帮助。

我创建了两个函数，以便在重定向后设置 $_GET 时显示一些消息。代码如下：

```
function display(){
if(isset($_GET['cnf_upd']) && $_GET['cnf_upd'] == '1'){
  $value = "The update was successful!";
  $type = "confirm";
  construct_the_div($value, $type);
}
if(isset($_GET['err_upd']) && $_GET['err_upd'] == '1'){
  $value = "The Update failed.";
  $type = "error";
  construct_the_div($value, $type);
}
if(isset($_GET['cnf_del']) && $_GET['cnf_del'] == '1'){
  $value = "Deleted completely.";
  $type = "confirm";
  construct_the_div($value, $type);
}
if(isset($_GET['err_del']) && $_GET['err_del'] == '1'){
  $value = "Unable to delete.";
  $type = "error";
  construct_the_div($value, $type);
}
}
function construct_the_div($value, $type){
// creating a div to display the message results
$div = "<div class=\"{$type}Msg\">\n";
$div .= "<p>{$value}</p>\n";
$div .= "</div><!-- end of {$type}Msg -->\n";
echo $div;
} 
```

我想做的是尝试改进显示功能，因为它越来越长，所以如果可能的话，应该只有一个（或最多两个）if语句。因此，GET 的值将动态地在 if 条件内，如果它具有前缀“cnf_”，它将是一个“confirmMsg”，如果它具有前缀“err_”，它将是一个“errorMsg”。

有可能做这样的事情吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:34:49.963

```
function display() {
    $messages = array(
        'cnf_upd' => 'The update was successful!',
        'cnf_err' => 'The Update failed.!',
        // ...
        // add all error and confirm there
        // ...
    );
    foreach($_GET as $key => $value) {

        if(strpos($key, 'cnf_')===0) {
            $type = 'confirm';
            $value = isset($messages[$key])
                ? $messages[$key]
                : $key;
            construct_the_div($value, $type);
        }

        if(strpos($key, 'err_')===0) {
            $type = 'error';
            $value = isset($messages[$key])
                ? $messages[$key]
                : $key;
            construct_the_div($value, $type);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:30:02.613

我将提出一个不同的解决方案。不是`$_GET`根据要发送的消息设置不同的参数，而是设置*一个*参数并解析其值。

```
// Start by setting integer constants:
define(CNF_UPD, 1);
define(ERR_UPD, 2);
define(CNF_DEL, 3);
define(ERR_DEL, 4); 
```

然后，当您设置值时 un `$_GET`，使用常量：

```
// Build the URL with a deletion error...
header("Location: http://example.com/script.php?msg=" . ERR_DEL); 
```

最后，使用 a`switch`来解析它们

```
if (isset($_GET['msg'])) {
  switch ($_GET['msg']) {
    case CNF_UPD:
      // Updated...
      break;
    case ERR_UPD:
      // failed...
      break;
    // etc...
    default:
      // invalid code.
  } 
} 
```

如果您`confirm/error/confirm/error`对整数常量使用 的模式，则可以通过取`$_GET['msg'] % 2`. 奇数是确认，偶数是错误。当然，还有很多其他的方式可以列出，我只是碰巧按照你使用的交替顺序输入了它们。例如，您还可以对确认使用正整数，对错误使用负数。

```
$type = $_GET['msg'] % 2 == 1 ? $confirm : $error; 
```

这很容易扩展到使用多个消息。由于它们是整数值，因此您可以安全地构造一个逗号分隔的列表，`explode()`并在收到它们时构造它们。

```
$messages = implode(array(ERR_DEL,CNF_UPD));
header("Location: http://example.com/script.php?msg=$messages"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:33:50.673

该方法不正确，似乎一次只能出现一条消息（不能同时“完全删除”和“无法删除”）。尝试以这种方式构造参数：?msg=upd&msgType=cnf

```
function display(){
if (isset($_GET['msg']) && isset($_GET['msgType']))
{
  $messages = array('cnf_upd'=>'The update was successful!',
    'err_upd'=>'The update failed!',
    'cnf_del'=>'The deletion was successful!',
    'cnf_upd'=>'The deletion failed!',
  );
  if (isset($messages[$_GET['msgType'].'_'.$_GET['msg']))
    construct_the_div($messages[$_GET['msgType'].'_'.$_GET['msg']], htmlspecialchars($_GET['msgType']));
} 
```

还有很多需要改进的地方，但首先这更清洁、更安全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T14:37:02.667

除非您可以基于 $_GET 参数以某种方式生成 $value 和 $type （我看不出您会怎么做），否则您可以执行以下操作：

```
$messages = array();
$messages[] = array('id' => 'cnf_upd', 'value' => 'The update was successful!', 'type' => 'Confirm');
$messages[] = array('id' => 'err_upd', 'value' => 'The Update failed.', 'type' => 'error');
...
foreach ($messages as $message) {
    if(isset($_GET[$message['id']]) && $_GET[$message['id']] == '1'){
        construct_the_div($message['value'], $message['type']);
    }
} 
```

# c# - 使用 NUnit 在 VS2012 中调试而不抛出异常？

> ID：14688768
> 
> 赞同：4
> 
> 时间：2013-02-04T14:25:49.793
> 
> 标签：c#, debugging, nunit

我让 NUnit 使用 NUnit 测试适配器运行到 VS2012 中，我可以很好地运行所有测试，但是如果我想在每次点击断言时都调试所有测试，它会引发异常。如何使它不为断言抛出异常？我做错了什么可怕的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T14:30:23.823

附加调试器时，失败的断言会引发异常。这是预期的行为。无需惊慌。

您*可以*阻止 Visual Studio 在某些异常处停止，方法是进入 Debug -> Exceptions... 并取消选中相应组中的所有或某些项目，从“Break when an exception is:”框中的“Thrown”列。

![例外对话框](../Images/eaf8eeebb7b6508f3e1ca336395c9bf1.png)

# c# - 以 Page 作为 pivotItem 的 Pivot

> ID：14688770
> 
> 赞同：0
> 
> 时间：2013-02-04T14:25:55.283
> 
> 标签：c#, .net, silverlight, windows-phone-7

我想`Pivot`在我的应用程序中创建 4 个`PivotItem`，每个`PivoeItem`都是电话页面，并且将使用自己的类进行管理。

这就是我为每个页面构建没有页面的数据透视页面的方式：

```
<Grid x:Name="LayoutRoot" Background="Transparent">
  <!--Pivot Control-->
  <controls:Pivot Title="my application">
    <!--Pivot item one-->
    <controls:PivotItem Header="item1">
      <Grid>
    </controls:PivotItem>

    <!--Pivot item two-->
    <controls:PivotItem Header="item2">
      <Grid>
    </controls:PivotItem>
  </controls:Pivot>
</Grid> 
```

我可以`PivotItem`用 Page 制作吗？( `Xaml`+ `cs`)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:32:29.643

不。如果您在两个地方需要相同的内容（例如：作为 PivotItem 和作为独立页面），我会将功能包装在自定义 UserControl 中，您可以在两者上使用它。

# javascript - 使用参数创建动画队列

> ID：14688771
> 
> 赞同：1
> 
> 时间：2013-02-04T14:25:56.020
> 
> 标签：javascript, jquery, queue

我正在尝试利用 jquery 队列按顺序执行一系列函数。这些“排队”功能实际上是在页面上为对象设置动画。

这是我构建队列的原始代码：

```
this.queue = function(fx, params) {
    this.animation_queue.push({fx: fx, params: params});
}; 
```

然后，一旦所有功能都排队，我会像这样使用它：

```
this.animate = function() {     
    for(var i=0; i<this.animation_queue.length; i++) {  
        this.animation_queue[i].fx.apply(this, [this.animation_queue[i].params]);
}}; 
```

显然，我遇到的问题是队列元素没有正确执行。虽然它们确实是按顺序执行的，但因为每个函数都执行了一个动画，我实际上需要每个队列元素在前一个元素的动画完成后执行。

我研究了使用 jquery 队列，如下所示：

```
this.queue = function(fx, params) {
    this.animation_queue.delay(500, 'animations');

    this.animation_queue.queue('animations', function(next) {
         next();

    });
}; 
```

但是我不确定如何像以前一样使用参数调用我的函数。

关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:44:23.160

根据文档：

[http://api.jquery.com/queue/](http://api.jquery.com/queue/)

您不必担心构建和管理您自己的队列，当您在元素上调用 queue 时，队列由 jQuery 管理。

这是他们的示例的小提琴，效果很好：

[http://jsfiddle.net/7GxwR/](http://jsfiddle.net/7GxwR/)

因此，为了将动画输入队列，只需创建一个函数，将所有动画按顺序堆叠到元素上，然后调用`.queue(...)`元素强制它在队列中执行。

如果您想动态更改/构建队列，您需要停止所有动画，`runIt`使用循环在存储动画参数和时间的动态 JSON 对象数组上构建小提琴中的函数，然后`showIt`调用`runIt`jQuery API 中的小提琴和示例。

这里的基本点是，不要构建你自己的队列/数组，如果你在一个已经应用了多种效果的元素上调用队列，jQuery 会为你做这件事。

希望这可以帮助。

# video - OpenMax 读取媒体

> ID：14688773
> 
> 赞同：0
> 
> 时间：2013-02-04T14:25:56.477
> 
> 标签：video, gpu, decode, raspberry-pi, openmax

我尝试使用 read_media 组件来硬件读取媒体文件[http://home.nouwen.name/RaspberryPi/doc](http://home.nouwen.name/RaspberryPi/doc) ... media.html 首先我创建组件：

```
 // create read_media
   if(status == 0 && ilclient_create_component(client, &read_media, "read_media",ILCLIENT_DISABLE_ALL_PORTS) != 0){status = -14; printf("=> ilclient_create_component() for read_media failed!!\n");exit(1);}
   list[0] = read_media; 
```

接下来我创建参数：

```
OMX_PARAM_CONTENTURITYPE *in_file_uri; 
```

然后我分配内存并将uri设置为文件：

```
 //read_media
   OMX_U8 *file_name="/home/pi/git_video/firmware/opt/vc/src/hello_pi/hello_video/test.h264";
             size_t lenght=strlen(file_name)+1;
             size_t param_size=sizeof(OMX_PARAM_CONTENTURITYPE)+lenght-1;
   //memset(&in_file_uri, 0,param_size);
   in_file_uri=malloc(param_size);
   in_file_uri->nSize = param_size;
   in_file_uri->nVersion.nVersion = OMX_VERSION;
   memcpy(in_file_uri->contentURI,file_name,lenght);

  printf("==>URI: SIZE %d, %s \n",in_file_uri->nSize,in_file_uri->contentURI); 
```

最后我将参数设置为 read_media 组件：

```
OMX_ERRORTYPE r=OMX_SetParameter(ILC_GET_HANDLE(read_media), OMX_IndexParamContentURI,in_file_uri);
         if(r!=OMX_ErrorNone){printf("=> Failed set  port params (read_media),error %f \n",r);status=-1;} 
```

但是设置组件文件的参数，有什么问题吗？有什么可以帮助我的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:57:48.640

在 Raspberry read_media 组件上无权访问文件系统！

# javascript - 有没有办法在 Internet Explorer 中更改对象的原型？

> ID：14688774
> 
> 赞同：0
> 
> 时间：2013-02-04T14:25:56.993
> 
> 标签：javascript, internet-explorer, prototype

在 IE 中你不能使用`obj.__proto__ = some_proto`，但你可以通过函数使用继承来解决这个缺陷，例如：

```
func = function(){}
func.prototype = proto
obj = new func 
```

这个回旋处的问题是旧的引用`obj`丢失了，并且不会指向新`obj`的`proto`作为原型。有没有办法改变 IE 中现有对象的原型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:01:48.730

不，没有。

`__proto__`只是一个 hack，无论如何你都不应该使用它（它不是标准功能）。目前无法在 JS 中更改现有对象的原型。

相关问题/答案：[更改使用文字初始化创建的对象的原型](https://stackoverflow.com/q/13235313/218196)，[https://stackoverflow.com/a/7223353/218196](https://stackoverflow.com/a/7223353/218196)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-18T09:20:18.640

为了回答我自己的问题，IE 11 支持新的 Object.setPrototypeOf 方法。需谨慎使用。[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf)

# angularjs - 拦截 Angular 模板加载以与 Meteor+Blade 一起使用

> ID：14688777
> 
> 赞同：1
> 
> 时间：2013-02-04T14:26:13.810
> 
> 标签：angularjs, meteor, node-blade

**简短的介绍：**我将 AngularJs 与 Meteor+ [Blade](https://github.com/bminer/node-blade)一起使用，而没有为流星使用[Meteor_angularjs](https://github.com/lvbreda/Meteor_angularjs)包。Blade 在服务器中构造页面的主体，然后我在客户端手动引导 angular。

Blade 下有可用的模板文件，`Template['template_name']`因此它们可以轻松地在客户端上呈现。我想做类似的事情：

```
div(ng-include='content.blade')
// HTML => <div ng-include='content.blade'></div> 
```

并以某种方式使其工作。
为了保持兼容性并且不创建新指令，我认为可以拦截 Angular 对静态模板的 XHR 请求并添加条件

```
if(URI ends with '.blade') then
    name <- strip '.blade' in URI
    return Template[name]() 
```

哪个应该返回该模板的编译 HTML。

**更新：**
巧合的是，我遇到了 $templateCache，现在我认为这是要走的路。
我创建了一个 'ngMeteor' 模块，用于流星角积分。

```
angular.module 'ngMeteor',[], ->
  throw 'Meteor object undefined.' unless Meteor? # Is it fine to put here?

angular.module('ngMeteor.blade',['ngMeteor']).
  run ($templateCache) ->
    $templateCache.put "#{name}.blade", render() for own name, render of Template 
```

在我的应用程序中：

```
angular.element(document).ready ->
  angular.bootstrap document, ['app']

app = angular.module 'app', ['ngMeteor.blade'], ->
app.controller 'mainCtrl', ($scope,$templateCache) ->
  $scope.content = $templateCache.get "content.blade" # Works!! 
```

刀片（body.blade）：

```
#main(ng-controller='mainCtrl') {{ content }} 
```

现在它可以工作了，我可以在注入 $templateCache 并通过其名称获取模板后从控制器获取呈现的模板，但`ng-include`仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:27:26.793

我之前对问题的更新实际上是正确的答案，ngInclude 对我不起作用，因为`div(ng-include="'content.blade'")`......是的，内部引号！这就像我第 N 次遇到这个问题。
在简历中，答案是：

```
angular.module('blade').
  run ($templateCache) ->
    $templateCache.put "#{name}.blade", render() for own name, render of Template 
```

模板是流星全局变量，刀片将存储准备渲染的模板，然后使用 $templateCache 我将渲染的模板与相应的名称/ID 放在一起，这样 Angular 就可以使用它们。
**编辑**：基于这个问题，我创建了一个流星包[ng-meteor](https://github.com/olanod/ng-meteor)用于流星中的无支架角度发展。

# linux - 如何强制所有请求来自我的网站以避免使用 Apache 进行欺骗

> ID：14688789
> 
> 赞同：-1
> 
> 时间：2013-02-04T14:27:01.490
> 
> 标签：linux, apache, ubuntu, spoofing, spoof

我的网站被欺骗了，我不希望其他域再通过 http 请求获取我的网站信息/数据。

如何拒绝来自我网站外部的所有请求？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:56:14.500

从这个问题，我猜你想避免你的资源的热链接。在这种情况下，您可以将以下文件添加到您的 .htaccess 文件中。

```
RewriteEngine on  
RewriteCond %{HTTP_REFERER} !^$  
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?yourdomain.com [NC]  
RewriteRule \.(jpg|jpeg|png|gif)$ http://yourdomain.com/showerror.gif [NC,R,L] 
```

上面的代码会将不是来自 yourdomain.com 的用户重定向到某个随机页面或资源以显示消息。在这种情况下`showerror.gif`。

上面的代码还将检查空白引用并允许它们，因此不会阻止合法用户在代理/防火墙后面浏览。

大括号中的文件扩展名可以用 | 更改。将它们分开。

另一种情况是表单，您希望用户从您网站的表单中发布数据，而不是从其他任何地方进行热链接。在这种情况下，您可以将`csrf`令牌用作表单中的隐藏字段。对照存储的会话令牌检查此令牌，并在每次请求时重新生成它以使其保持新鲜。

希望这可以帮助。

# c++ - 将 int* 转换为 const short int*

> ID：14688791
> 
> 赞同：2
> 
> 时间：2013-02-04T14:27:03.860
> 
> 标签：c++, pointers, casting, int

我正在使用库中的函数，其中最重要的函数采用 type 的参数`const short int*`。相反，我所拥有的是`int *`并且想知道是否有办法将 a`int *`转换为`const short int*`. 以下代码片段突出显示了我面临的问题：

```
/* simple program to convert int* to const short* */

    #include <stdio.h>
    #include <iostream>
    #include <stdlib.h>

    void disp(const short* arr, int len) {

      int i = 0;
      for(i = 0; i < len; i++) {
        printf("ith index = %hd\n", arr[i]);
      }
    }

    int main(int argc, char* argv[]) {

      int len = 10, i = 0;
      int *arr = (int *) malloc(sizeof(int) * len);

      for(i = 0; i < len; i++) {
        arr[i] = i;
      }

      disp(arr, len);

      return 0;
    } 
```

上面的代码片段编译。这是我到目前为止所尝试的：
1\. 尝试了 c 风格的演员表。函数调用看起来像这样：
`disp((const short*) arr, len)`. 结果输出很奇怪：

```
ith index = 0
ith index = 0
ith index = 1
ith index = 0
ith index = 2
ith index = 0
ith index = 3
ith index = 0
ith index = 4
ith index = 0 
```

1.  尝试了 const-ness 演员表。函数调用看起来像：
    `disp(const_cast<const short*> arr, len);`
    这导致编译时出错。

我的问题：
1\. 为什么方法 1 的输出如此奇怪？那边是怎么回事？
2\. 我看到了一些使用方法 2 中的 const cast 删除 const-ness 的示例。我不知道如何添加相同的内容。
3\. 有没有办法把 an`int*`转换成 a `const short int*`？

PS：如果以前有过此类问题，请告诉我。我用谷歌搜索并没有找到任何具体的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T14:28:53.570

一般来说，转换 from `int *`to`short *`不会给出有用的行为（事实上，如果您尝试取消引用结果指针，它可能会导致未定义的行为）。它们是指向根本不同类型的指针。

如果你的函数需要一个指向一堆`short`s 的指针，那么这就是你需要给它的。您需要创建一个 数组`short`，并从原始数组中填充它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T14:33:29.903

演员表几乎总是设计问题的标志。如果您有一个接受`short*`(`const`或其他) 的函数，则需要使用`short*`. 因此，与其分配 的数组`int`，不如分配 的数组`short`。

当您将 an`int*`转换为 a时`short*`，您是在告诉编译器假装 the`int*`确实是指向`short`. 它会这样做，但是对编译器撒了谎，你要为后果负责。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T14:33:38.367

是的，所以在许多环境中 a 的 SIZE 与 a`short`不同`int`（它不一定是，并且肯定有编译器，例如具有 16-bit`int`和 16-bit `short`）。

因此，以这种方式投射指针的结果是，a) 未定义的行为，b) 除非您确切知道自己在做什么，否则可能不是您想要的。

您的代码输出看起来完全符合我的预期，所以很明显您并没有告诉我们您正在尝试做什么！

编辑：请注意，由于指针是“大小相关的”，如果将一个大小的指针转换为指向不同大小类型的指针，数据的对齐方式将是错误的，这就是为什么其他所有值都为零的原因你的输出 - 因为 an`int`是 4 个字节 [通常] 并且 a`short`是 2 个字节，指针将为每个索引“步进” 2 个字节，（所以`arr[i]`将是原始`arr`的 + i * 2 个字节。其中的`int * arr`'step' 为 4 个字节, 所以`arr + i * 4`字节。根据你的整数值，你会得到一些“半个整数”值——因为你的数字很小，所以这是零。

因此，尽管编译器正在执行您要求它执行的操作：创建一个指向`short`包含. 为此，您必须执行以下操作：`int``int``short`

```
short **sarr = malloc(sizof(short *) * 10); 

for(i = 0; i < 10; i++)
{
    sarr[i] = (short *)(&arr[i]);       // This may well not work, since you get the "wrong half" of the int.
} 
```

如果这给出了错误的一半，您可以这样做：

```
 sarr[i] = (short *)(&arr[i])+1;      // Get second half of int. 
```

但这取决于“字节顺序”（大端或小端），因此它不可移植。在一般代码中这样做是非常糟糕的编码风格。

或者：short *sarr = malloc(sizof(short *) * 10);

```
for(i = 0; i < 10; i++)
{
    sarr[i] = (short)(arr[i]);
} 
```

第二种方法的工作原理是将整数数组的副本复制到一个短数组中。这也不取决于内容存储的顺序，或类似的东西。当然，如果 in 的值`arr[i]`大于 a 可以容纳的值`short`，则不会得到`arr[i]`与`short`!

在这两种情况下，不要忘记在不再需要时释放您的阵列。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T14:53:17.377

**回答 q.1**
输出一点也不奇怪。显然，您的编译器分配每个`int`4 个字节和每个`short`2 个字节。因此，您`arr`的大小为 10x4 = 40 字节。当您为其分配数字 0..9 时，您在内存中拥有（每个字节一个字符，按 分组`int`）：

> 0 0 0 0
> 0 0 0 1
> 0 0 0 2
> 0 0 0 3
> 0 0 0 4
> ...

当您投射`arr`到`short`内存时，现在“分组”为 2 个字节：

> 0 0
> 0 0
> 0 0
> 0 1
> 0 0
> 0 2
> 0 0
> ...

我希望你能看到效果，以及为什么你`0`在分配的数字之间突然有 -s。

**对问题2的回答**函数中
声明的只是表示在执行过程中不会改变的内容。您无需将参数显式转换为数组即可调用.`const``display``arr``display``const``display`

**对 q.3 的回答**
请参阅@Pete 和@Mats 的回答

# tfs - TFS 2010 个人分支

> ID：14688793
> 
> 赞同：1
> 
> 时间：2013-02-04T14:27:06.293
> 
> 标签：tfs

> 在 TFS 中，如果你想创建一个个人分支来尝试你的想法，你必须在 TFS 服务器上创建一个分支——即使没有其他人需要访问你的代码。当你创建这个分支时，项目中的每个文件都将被复制——即使你的分支与原始分支相比几乎没有变化。现在，您在服务器和本地使用了两倍的磁盘空间！

这是真的吗，并且是非分布式 VCS 的缺点之一？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T15:04:38.613

两种说法都是错误的。（你在哪里读到这个？）

> 在 TFS 中，如果你想创建一个个人分支来尝试你的想法，你必须在 TFS 服务器上创建一个分支

不，如果你只是“尝试一个想法”，你并不总是需要一个分支。当然，这取决于你想做什么。将您的工作保存在服务器上以防止驱动器崩溃是 TFS 中的搁置集（其他 VCS 可能不提供任何类似的东西，这就是为什么您需要为那里的每个想法创建一个分支的原因）。您甚至可以与他人共享您的代码，而无需使用搁置集实际签入。即使是简单的版本控制也可以通过在搁置集的名称中包含时间戳来完成，但这很乏味，可能比创建分支更乏味；）在服务器上构建代码是搁置集可以做的另一件事。

您应该阅读 MSDN 上何时使用搁置集而不是变更集（某处有一篇文章）来决定是否需要新分支。

> 现在，您在服务器和本地使用了两倍的磁盘空间！

代码的复制只是虚拟地发生。TFS Server 后面的 SQL Server*不会*占用两倍的空间，除非每个文件都在这些分支中的任何一个上实际更改。在此之前，两个分支上的两个文件都将“指向”SQL Server 上完全相同的内存。如果您需要同时处理两个分支并将它们映射到您的工作区，那么您当然需要两倍的本地空间。对于我所知道的任何 VCS，两者都是正确的，因此这不是特定于 TFS 的问题。

# mysql - 设置变量 MySQL

> ID：14688798
> 
> 赞同：0
> 
> 时间：2013-02-04T14:27:21.553
> 
> 标签：mysql, parameters

我试图调试我的 MySQL 存储过程。调试时发现，我无法设置参数，非常有趣。如下：

```
USE MyDatabase;

SET @myParam := 3;

Select @myParam; 
```

什么不见​​了？

# python - 安装 pylibmc 时出现 Heroku/Django 错误

> ID：14688799
> 
> 赞同：4
> 
> 时间：2013-02-04T14:27:26.193
> 
> 标签：python, heroku, memcached

尝试部署到 Heroku 时，我收到了一英里长的错误列表。我按照他们的指导开始，但显然它缺乏且不准确。

我的设置是一个模块，我的要求是一个包含每个环境的不同 .txt 文件的文件夹：

```
settings/
  base.py
  dev.py
  heroku.py

requirements/
  base.txt
  dev.txt
  heroku.txt 
```

我尝试`pylibmc==1.2.2 django-pylibmc-sasl==0.2.4`在 base.txt 和 heroku.txt（扩展 base.txt）中部署到 Heroku，但还是一样。

错误跟踪（小样本）：

```
_pylibmcmodule.c:2097: warning: passing argument 1 of ‘PyInt_FromLong’ makes integer from pointer without a cast

       /app/.heroku/python/include/python2.7/intobject.h:38: note: expected ‘long int’ but argument is of type ‘struct PylibMC_Behavior *’

       _pylibmcmodule.c:2097: warning: passing argument 1 of ‘PyObject_SetAttrString’ from incompatible pointer type

       /app/.heroku/python/include/python2.7/object.h:472: note: expected ‘struct PyObject *’ but argument is of type ‘struct PylibMC_Behavior *’

       _pylibmcmodule.c:2098: error: ‘PylibMC_McErr’ has no member named ‘name’

       _pylibmcmodule.c:2098: error: ‘PylibMC_McErr’ has no member named ‘exc’

       _pylibmcmodule.c:2098: warning: passing argument 2 of ‘PyModule_AddObject’ from incompatible pointer type

       /app/.heroku/python/include/python2.7/modsupport.h:40: note: expected ‘const char *’ but argument is of type ‘struct PylibMC_Behavior *’

       _pylibmcmodule.c:2100: error: ‘PylibMC_McErr’ has no member named ‘name’

       _pylibmcmodule.c:2100: error: ‘PylibMC_McErr’ has no member named ‘exc’

       _pylibmcmodule.c: In function ‘init_pylibmc’:

       _pylibmcmodule.c:2176: error: ‘LIBMEMCACHED_VERSION_STRING’ undeclared (first use in this function)

       _pylibmcmodule.c:2176: warning: passing argument 3 of ‘PyModule_AddStringConstant’ from incompatible pointer type

       /app/.heroku/python/include/python2.7/modsupport.h:42: note: expected ‘const char *’ but argument is of type ‘struct PylibMC_Behavior *’

       error: command 'gcc' failed with exit status 1

       ----------------------------------------
       Command /app/.heroku/python/bin/python -c "import setuptools;__file__='/app/build/pylibmc/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-i0GDaz-record/install-record.txt failed with error code 1 in /app/build/pylibmc
       Storing complete log in /app/.pip/pip.log
 !     Heroku push rejected, failed to compile Python app 
```

我找到[了这个](https://stackoverflow.com/questions/11507639/memcached-on-heroku-w-django-cant-install-pylibmc-memcacheify)相关的帖子，这就是尝试将库添加到 base.txt 的想法，但仍然没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:39:46.353

如果您在 requirements.txt 中存在 Pylibmc，它会自动得到支持。

拥有所有这些需求文件只是额外的开销。查看[Twelve-Factor 的 Dev/Prod Parity](http://12factor.net/dev-prod-parity)文章。

# c# - 正确处理空值

> ID：14688802
> 
> 赞同：1
> 
> 时间：2013-02-04T14:27:41.763
> 
> 标签：c#, asp.net, .net, null

我有以下代码 -

```
int lat = System.Convert.ToInt16(latTextBox1.Text); 
```

这发生在更改的事件上。

但是我的代码在这条线上打破了 -

```
Input string was not in a correct format. 
```

其中`latTextBox1.Text`=`""`是一个空字符串。我认为这是破坏性的，因为它无法将空字符串转换为空值。

如何修改我的代码以考虑空值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:31:22.113

好的，根据您的评论，您可以使用：

```
int? lat = string.IsNullOrEmpty(latTextBox1.Text) 
               ? (int?)null : Convert.ToInt32(latTextBox1.Text); 
```

`int?`是一个可为空的 int。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T14:31:35.530

好吧，*并不是*`Convert.ToInt16`要将空字符串转换为空值……事实上它不能，因为返回类型是不可为空的（又名）。*`Int16``short`*

 *我怀疑您实际上想要更多类似的东西：

```
int lat;
if (int.TryParse(latTextBox1.Text, out lat))
{
    // Use lat
}
else
{
    // Invalid or empty input. Handle appropriately.
} 
```

如果您想以与无效输入不同的方式处理空字符串，则需要明确地执行此操作 - 尽管您还应该考虑“仅空格”是否等同于“空”或“无效”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T14:31:40.600

一个简单的怎么样：

```
int? lat = null;
int dummyLat;
if (Int32.TryParse(latTextBox1.Text, out dummyLat)
    lat = dummyLat; 
```

附带说明：
我*从来没有*在`TextChanged`事件中转换字符串！为什么？因为它会在每次按键时触发一个事件！使用其他触发器来启动转换（例如按钮）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T14:30:47.927

在尝试将其转换为整数之前，您应该首先检查当前值不是空值，请查看以下代码片段 int lat = 0;

```
 If(! string.IsNullorEmpty(latTextBox1.Text))
    {
     lat = System.Convert.ToInt32(latTextBox1.Text);
    }
// use your lat variable here 
```

**更新：**

根据您上面的评论，`lat`可能会保存该`NULL`值，因此您必须将其设为可为空的 Int 才能使其保存值为 NULL

考虑这个更新的代码片段 int? 纬度 = 0;

```
 If(! string.IsNullorEmpty(latTextBox1.Text))
    {
     lat.value = System.Convert.ToInt32(latTextBox1.Text);
    }
// use your lat variable here by accessing the lat.value property 
```

注意：纬度和经度值应存储在**双**精度数据类型中以保持精度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T14:31:19.790

您可以使用以下方法：

`Int16.TryParse`：

或者您可以在执行逻辑之前检查字符串是否不为空或为空：

```
if (!string.IsNullOrEmpty(latTextBox1.Text)) {
     lat = System.Convert.ToInt16(latTextBox1.Text);
} 
```

[http://msdn.microsoft.com/en-us/library/system.int16.tryparse.aspx](http://msdn.microsoft.com/en-us/library/system.int16.tryparse.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T14:31:06.467

```
int lat = 0;

if (Int32.TryParse(laTextBox1.Text, out lat))
{
    //success, textbox contained an int, now lat has the value of that int
}
else
{
    //failure, textbox did not contain an int
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-04T14:31:14.953

您必须检查正在设置的字符串：

```
int lat = 0;
if (string.IsNullOrEmpty(latTextBox1.Text)
{
    // Your null case here
}
else
{
    lat = System.Convert.ToInt16(latTextBox1.Text);
} 
```

尽管：

```
int lat = 0;
if (!Int32.TryParse(latTextBox1.Text, out lat)
{
    // Error handling here
} 
```

可能是一种更好的方法，因为它可以处理非数字输入。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-04T14:33:02.610

```
int i = 0;

if (!Int32.TryParse(latTextBox1.Text, out i)) {

    i = 0; // or default value;
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-02-04T14:33:40.343

一个班轮：

```
int lat = System.Convert.ToInt16(latTextBox1.Text.Length == 0 ? 0 : latTextBox1.Text); 
```

基本上像合并一样工作，如果 latTextBox1.Text 没有值，则将其设置为零，否则来自 latTextBox1.Text 的值*

# java - 如何将对象从一个 JVM 迁移到另一个 JVM

> ID：14688806
> 
> 赞同：0
> 
> 时间：2013-02-04T14:27:51.927
> 
> 标签：java, tomcat, failover

如果我的应用程序（在两台机器上运行）崩溃并且另一个可以从中获取，任何人都可以帮助我实现如何将对象从一个 JVM 迁移到另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:35:26.523

此功能在 JVM 中不可用，但存在一些第三方解决方案。以[兵马俑](http://terracotta.org/)为例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:47:26.823

例如，如果您使您的对象可序列化并通过流将其发送到服务器，它不会起作用吗？

# hibernate - Hibernate - 使用 where in 子句更新查询

> ID：14688810
> 
> 赞同：1
> 
> 时间：2013-02-04T14:27:58.643
> 
> 标签：hibernate, sql-update

我将从一个单挑警告开始，我是一个冬眠新手。假设我有这样的查询：

```
UPDATE entity SET attribute='value' WHERE anotherAttribute IN (val1, val2); 
```

如果我的项目使用休眠，执行此类查询的正确方法是什么？我应该使用简单的 createSQLQuery() 吗？我想以一种更“面向对象”的方式来做，但我似乎在从现有数据库中获取数据并更新它时遇到了问题。我是否使用 createQuery() 并获取要更新的数据，然后考虑结果列表并使用设置器？另一个问题是 where in 子句...

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:41:19.967

Hibernate 支持的“面向对象”方式是通过标准 API，但它不支持更新，只支持选择。您需要遍历它并调用 setter 进行更新（这对于小型集合来说很好，并且适用于 2 级缓存，但灾难是您的数据集很大）。否则使用 HQL 或本机 SQL。

休眠条件查询：

```
 session.createCriteria(Entity.class)
    .add(Restrictions.eq("attribute", "value"))
    .add(Restrictions.in("anotherAttribute", <collection-of-values>)
    .list(); 
```

另一个值得探索的选择是[QueryDSL](http://www.querydsl.com)。

# c# - TryValidateObject 未显示错误

> ID：14688812
> 
> 赞同：0
> 
> 时间：2013-02-04T14:28:16.253
> 
> 标签：c#, silverlight, validation, data-annotations

我正在尝试通过 DataAnnotations 验证 Silverlight 5 应用程序中的数据。我编写了几个自定义 ValidationAttributes，只要我在属性的 Setter 中进行验证，它们就可以正常工作。如果用户打开我正在执行此验证的数据表单并仅按下“保存”按钮，而不对属性进行任何更改，我想验证整个对象。在这部分，我的实现没有按预期工作。我编写了一个使用 Validator.TryValidateObject() 的方法。在结果中，我看到 ValidationExceptions 被抛出，但它们没有显示在 UI 上。有谁知道我做错了什么？我猜系统不知道抛出异常的属性是什么？

```
public bool ValidateObject()
{
    var validationItems = new List<ValidationResult>();
    var result = new List<ValidationResult>();

    Validator.TryValidateObject(this, new ValidationContext(this), result, true);

    if (result.Count > 0)
    {
        foreach (var error in result)
        {
            throw new ValidationException(error.ErrorMessage = LanguageManager.Instance.GetLanguageString(error.ErrorMessage));
        }
    }

    return result.Count != 0;
} 
```

LanguageManager 是一个以当前选择的语言返回错误消息的对象。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:59:31.363

绑定引擎处理验证异常，并会在实现 IDataErrorInfo 的地方读取错误，但在这两种情况下，这只会在目标属性更改时发生。

如果你想在集合操作范围之外引发验证错误，你应该实现[INotifyDataErrorInfo](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifydataerrorinfo%28v=vs.95%29.aspx)。此界面将使您能够在 Click 处理程序中构建错误列表。然后，您为那些无效的属性引发 ErrorsChanged 事件，而 Binding 引擎会处理其余的事情。

# c# - 使用单例在 wp8 应用程序中的页面上填充数据 - 生成错误

> ID：14688817
> 
> 赞同：1
> 
> 时间：2013-02-04T14:28:35.607
> 
> 标签：c#, telerik, windows-phone-8

我正在使用 RadDataForm，它是 telerik for wp8 的 UI 控件的一部分。我认为我遇到的问题与控制无关，而更多的是与我做过或不理解的愚蠢行为有关。

我有一个名为 ProfileFormData 的类，用于在 DataForm 中填充 DatFields。它从一个名为 Profile 的类中获取其属性，该类位于单例中。

好的，首先是代码。

```
Public class Profile
{
   Public sting Name {get;set;}
   Public int Gender {get;set;}
} 
```

单身人士

```
public sealed class Globals
{
    /// <summary>
    /// Current profile
    /// </summary>
    public Profile profile        

    private static readonly SingleInstance<Globals> lazy =
        new SingleInstance<Globals>(() => new Globals());

    public static Globals Instance { get { return lazy.Instance; } }
}

  internal sealed class SingleInstance<T> where T : class
  {
    private readonly Object m_lockObj = new object();
    private readonly Func<T> m_delegate;
    private Boolean m_isDelegateInvoked;

    private T m_value;

    /// <summary>
    /// Initializes a new instance of the 
    /// <see cref="SingleInstance&lt;T&gt;"/> class.
    /// </summary>
    public SingleInstance() : this(() => default(T)) { }

    /// <summary>
    /// Initializes a new instance of the 
    /// <see cref="SingleInstance&lt;T&gt;"/> class.
    /// </summary>
    /// <param name="delegate">The @delegate</param>
    public SingleInstance(Func<T> @delegate)
    {
        m_delegate = @delegate;
    }

    /// <summary>
    /// gets the instance
    /// </summary>
    /// <value>The instance</value>
    public T Instance
    {
        get
        {
            if (!m_isDelegateInvoked)
            {
                T temp = m_delegate();
                Interlocked.CompareExchange<T>(ref m_value, temp, null);

                Boolean lockTaken = false;

                try
                {
                    // WP7 does not support the overload with the
                    // boolean indicating if the Lock was taken
                    Monitor.Enter(m_lockObj); lockTaken = true;
                    m_isDelegateInvoked = true;
                }
                finally
                {
                    if (lockTaken) { Monitor.Exit(m_lockObj); }
                }
            }

            return m_value;
        }
    }
} 
```

ProfileFormData

```
 public class ProfileFormData
 {
    public string Name
    {
        get { return Globals.Instance.profile.UserName; }
        set { Globals.Instance.profile.UserName = value; }
    }

    [GenericListEditor(typeof(GenderInfoProvider))]
    public Gender Gender
    {
        get { return (Gender)Globals.Instance.profile.Gender; }
        set { Globals.Instance.profile.Gender = (int)value; }
    }
} 
```

现在是在混合和 vs 设计器中都显示错误的 xaml

```
<Grid Grid.Row="1" Margin="0,6,0,6">
        <ScrollViewer>
            <telerikInput:RadDataForm Grid.Row="1" Margin="12,0,12,12" x:Name="DataForm">
                <telerikInput:RadDataForm.CurrentItem>
                    <models:ProfileFormData/>
                </telerikInput:RadDataForm.CurrentItem>
                <Grid>
                    <telerikInput:DataField Header="Name" TargetProperty="Name"/>
                    <telerikInput:DataField Header="Gender" TargetProperty="Gender"/>
                </Grid>
            </telerikInput:RadDataForm>
        </ScrollViewer>
    </Grid> 
```

上面所有的 xaml 下面都有一条红线，我得到了错误

> 对象未设置为对象实例

部署和运行应用程序工作正常。

哦，我在 App.xaml.c 中创建了这样的配置文件

```
 /// <summary>
    /// Constructor for the Application object.
    /// </summary>
    public App()
    {
        // Global handler for uncaught exceptions. 
        UnhandledException += Application_UnhandledException;

        // Standard Silverlight initialization
        InitializeComponent();

        // Phone-specific initialization
        InitializePhoneApplication();

        Globals.Instance.profile = new Profile();
    } 
```

# c - 找到最小 n 的快速方法使得对于 X <= n*n

> ID：14688823
> 
> 赞同：0
> 
> 时间：2013-02-04T14:28:51.610
> 
> 标签：c

抱歉标题不好。我找不到更好的标题。（欢迎编辑：p）

假设有一个数字 X=8。我知道 2*2=4 所以它不包含数字 8。

**编辑：想象一个 2x2 网格 ... 1,2,3,4 ...它不包含 8**

现在，3*3 = 9，我们找到了获胜者（n=3）！

为此目的我的（糟糕的）代码

```
 long long int i=0; N = 8;
 while (i*i <N)
    {
        i++;
    }
    l = i; // l is to store he number "3"; say 8 is in a 3x3 grid 
```

这不是计算 N = 100000000 时的有效方法。

获取包含 X 的 i*i 的更有效方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T14:32:49.160

使用 中的`sqrt`函数`<math.h>`。这将是一个（相当）有效的算法，并且应该比你的循环运行得快得多。然后四舍五入，你就有了答案。

```
int find_containing_int(double x)
{
  const double sqr = sqrt(x);

  return ceil(sqr);
} 
```

# unix - grep 特定匹配

> ID：14688825
> 
> 赞同：0
> 
> 时间：2013-02-04T14:28:53.397
> 
> 标签：unix, grep

我在 1.txt 中有这些：

```
Modified Reference MM-EE-145 by:
Reference MM-EE-145
Reference S1-123-BCD :
Reference S43-FF-F3-SMY_3 :
Reference PB-xx-xx 
```

因此，我需要对以 Reference -whateverhere- 开头并以 ':' 结尾的匹配项进行 grep

```
 grep '^Reference' 1.txt 
```

但在比赛中，我也得到没有'：'的线条，我不需要那些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:31:09.267

添加`.*:$`以匹配以 结尾的行`:`，如下所示：

```
$ grep "^Reference.*:$" file
Reference S1-123-BCD :
Reference S43-FF-F3-SMY_3 : 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:31:06.793

尝试：

```
grep "^Reference.*:$" 1.txt 
```

该`:$`位是您告诉 grep 您只想要以冒号结尾的行的地方。

# c# - Unity Container，解析单个对象

> ID：14688827
> 
> 赞同：5
> 
> 时间：2013-02-04T14:28:57.723
> 
> 标签：c#, unity-container

我开始了解 Unity 容器和依赖注入。我很难理解我的对象模型应该是什么样子。

对于我的示例，我创建了一个非常简单的 Employee 类（我省略了 Constructor，因为这是我感到困惑的地方）：

```
public class Employee
{
    private int _id;
    private string _name;
    private DateTime _birthDate;

    public int Id
    {
        get { return _id; }
    }

    public string Name
    {
        get { return _name; }
    }

    public DateTime BirthDate
    {
        get { return _birthDate; }
    }
} 
```

这个 Employee 对象应该从数据库中获取它的信息。这是一个 shim 数据库适配器，只是为了开发一个依赖项：

```
public class DataAdapter
{
    public DbParameter NewParameter(string name, object value)
    {
        return new OracleParameter(name, value);
    }

    public DataRow ExecuteDataRow(string command, CommandType commandType, List<DbParameter> parameters)
    {
        DataTable dt = new DataTable();

        dt.Columns.Add(new DataColumn("ID"));
        dt.Columns.Add(new DataColumn("NAME"));
        dt.Columns.Add(new DataColumn("BIRTH_DATE"));

        DataRow dr = dt.NewRow();

        dr["ID"] = new Random().Next();
        dr["NAME"] = "John Smith";
        dr["BIRTH_DATE"] = DateTime.Now;

        return dr;
    }
} 
```

理想情况下，员工对象应该采用“id”参数，以便知道从数据库中检索哪个员工。假设我们使用如下所示的 Employee 构造函数：

```
public Employee(int id, DataAdapter dataAdapter)
{
    List<DbParameter> parameters = new List<DbParameter>();

    parameters.Add(dataAdapter.NewParameter("ID", id));

    DataRow dr = dataAdapter.ExecuteDataRow("GetEmployee", CommandType.StoredProcedure, parameters);

    if (dr == null)
        throw new EmployeeNotFoundException();

    _id = id;
    _name = Convert.ToString(dr["NAME"]);
    _birthDate = Convert.ToDateTime(dr["BIRTH_DATE"]);

    _id = employeeData.Id;
    _name = employeeData.Name;
    _birthDate = employeeData.BirthDate;
} 
```

除了使用 ParameterOverride 之外，我不确定如何使用 Unity 的解析器指定员工的 id：

```
class Program
{
    static void Main(string[] args)
    {
        UnityContainer container = new UnityContainer();

        container.RegisterType(typeof(EmployeeData));

        Employee emp = container.Resolve<Employee>(new ParameterOverride("id", 45));

        Console.WriteLine(emp.Id);
        Console.WriteLine(emp.Name);
        Console.WriteLine(emp.BirthDate);
        Console.ReadKey();
    }
} 
```

我不喜欢这样，因为没有编译时检查参数名称是否正确。像这样的问题让我认为我错误地应用了模式。任何人都可以阐明我的误解吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T14:45:28.053

依赖注入不适用于域模型/业务对象。主要是解析服务，即用于处理业务逻辑的类。

因此，您的人员通常使用存储库或任何其他数据访问模式加载。

所以：

1.  您的数据访问类是使用 DI 注入的
2.  您的数据访问类充当工厂并生成人员。

就像是

```
public class PersonRepository
{
    public PersonRepository(IDbConnection iGetInjected)
    {
    }

    public Person Get(int id)
    {
        // I create and return a person
        // using the connection to generate and execute a command
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:41:04.497

您错误地使用了此模式。DI 是关于注入依赖项，主要是通过接口。

您的代码应如下所示：

界面

```
public interface IEmployee
{
    int Id { get; set;}
    string name { get; set;}
    DateTime BirthDate { get; set; }
} 
```

和实施

```
public class Employee : IEmployee
{
    public int Id { get; set;}
    public string name { get; set;}
    public DateTime BirthDate { get; set; }
} 
```

那么您可以通过以下方式解决依赖关系：

```
class Program
{
    static void Main(string[] args)
    {
        UnityContainer container = new UnityContainer();

        container.RegisterType(typeof(IEmployee), typeof(Employee));

        IEmployee emp = container.Resolve<IEmployee>();

        Console.ReadKey();
    }
} 
```

现在，您可以根据需要使用不同的 IEmployee 接口实现。

# html - 从视频库中的视频图像中删除外边框

> ID：14688828
> 
> 赞同：0
> 
> 时间：2013-02-04T14:29:04.803
> 
> 标签：html, css, google-chrome, styles

这是该页面的链接。

```
http://www.braddockinfotech.com/demo/dvnonline/vod1/ 
```

从右侧的视频库中选择视频时，会在其周围看到橙色虚线边框。如何删除此边框。我正在查看这个`chrome`。在 Firefox 中它似乎工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:35:04.613

您必须为列表重置大纲样式

```
#divplaylist ul li {
  list-style-type: none;
  outline: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:48:13.383

试着穿上`outline: none`你`li`的或你`a`的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:49:00.577

用这个：

```
ul li a {box-shadow: none;} 
```

# r - ggplot2的连续色标和knitr的tikzDevice不兼容吗？

> ID：14688829
> 
> 赞同：12
> 
> 时间：2013-02-04T14:29:06.160
> 
> 标签：r, graphics, ggplot2, knitr, tikz

我一直在使用带有 R 基础图形和 tikz 输出的 knitr 一段时间，并想尝试一下`ggplot2`。但是，这个最小的示例无法使用 knitr 1.0.5 生成任何输出：

```
\documentclass{article}
\begin{document}
<<dev = 'tikz'>>=
library(ggplot2)
d = data.frame(a = c(1, 2, 3), b = c(4, 5, 6), c = c(7, 8, 9))
ggplot(d, aes(a, b, color = c)) + geom_point()
@
\end{document} 
```

相反，它失败并显示 message `Error in UseMethod("depth"): no applicable method for 'depth' applied to an object of class "NULL"`。在 R 中执行代码或选择 png 设备将产生预期的图形。也省略了 tikzDevice 的颜色美学或分解`c`工作，因此连续色标似乎是问题所在。

有什么我做错了，还是一个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-26T00:03:30.507

我可以`tikzDevice`通过添加`dev.off()`到代码块的末尾来处理您的代码。例如：

```
cat("
    \\documentclass{article}
    \\begin{document}
    <<dev = 'tikz'>>=
    library(ggplot2)
    d = data.frame(a = c(1, 2, 3), b = c(4, 5, 6), c = c(7, 8, 9))
    ggplot(d, aes(a, b, color = c)) + geom_point()
    dev.off()
    @
    \\end{document}
", "test_works.Rtex")
knit("test_works.Rtex") 
```

工作正常。

我还注意到，如果`knit()`通过（原始）代码上的活动 R 会话调用，我会留下一个活动的 tikz 设备......

```
cat("
    \\documentclass{article}
    \\begin{document}
    <<dev = 'tikz'>>=
    library(ggplot2)
    d = data.frame(a = c(1, 2, 3), b = c(4, 5, 6), c = c(7, 8, 9))
    ggplot(d, aes(a, b, color = c)) + geom_point()
    @
    \\end{document}
    ", file = "test_fails.Rtex")
knit("test_fails.Rtex")
dev.list() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-03T13:12:10.100

这是一个[错误](https://github.com/yihui/tikzDevice/issues/132)，现已在 0.10 的开发版本中解决，`tikzDevice`很快就会出现在 CRAN 中。在那之前，安装使用

```
devtools::install_github("yihui/tikzDevice") 
```

# php - 强制“Content-Type: text/plain”在浏览器页面中显示

> ID：14688832
> 
> 赞同：1
> 
> 时间：2013-02-04T14:29:15.473
> 
> 标签：php, character-encoding, plaintext

我曾经设置：

> header("内容类型：文本/纯文本");

当我想显示 PHP 输出的所有字符时，但现在似乎如果此输出中有特殊字符（\x00 \x01 等），浏览器会尝试下载页面而不是显示它。

我尝试以这种方式设置字符集：

> header('Content-Type:text/plain; charset=ISO-8859-1');

但结果是一样的。

即使这个有效（浏览器显示为页面而不是尝试下载）：

> header('Content-Type:text/plain; charset=ISO-8859-15');

这不是很好，因为有些字符没有真正显示（如 \x88 或 \x91 等）。

那么有什么方法可以输出包含特殊字符并使用 ISO-8859-1 字符集的文本/纯文本并强制浏览器在页面中显示此输出而不是尝试下载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:57:12.033

这听起来像是一个奇怪的实验，您可能应该发送 text/html 代替，可能带有`pre`标记。

无论如何，八位字节 88 和 91（十六进制）表示 ISO-8859-1 中的控制字符，没有普遍接受的分配。如果它们应该是可打印的字符，您可能应该改为声明 windows-1252。

# php - php oci8 - 如何设置oracle时间戳返回格式

> ID：14688834
> 
> 赞同：4
> 
> 时间：2013-02-04T14:29:19.630
> 
> 标签：php, oracle

我正在使用 php5 脚本从 Oracle 数据库中检索数据。我希望返回特定的时间戳格式。我在 SO 上找到了答案，说类似于 Oracle 本身的声明可以解决问题：

```
$stid = oci_parse ($connection, "alter session set nls_date_format = 'yyyy-mm-dd hh24:mi:ss.ff3'");
oci_execute ($stid); 
```

这应该确保后续查询像

```
$stid = oci_parse ($connection, 'select * from table');
oci_execute ($stid); 
```

导致时间戳格式以正确的格式返回。

但无论我做什么，我总是得到像这样的格式

```
28-NOV-12 05:37:24.000000 PM 
```

所以我的问题是：怎么了？在 php 中执行什么语句以确保检索所需的时间戳格式？

附带问题：如何确保 php 检索 ISO 8601 格式的时间戳，因此字符串如*2012-11-28T17:37:24.000Z*？

在这种情况下如何确保'Z'，因此不是像*2012-11-28T16:37:24.000+01:00*这样的字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T16:57:39.080

`ff3`对数据类型无效`DATE`，因为它不包含小数秒。

至于您的 ISO8601 格式，只有`TIMESTAMP WITH TIME ZONE`一个实际的时区。如果你想用 Z（即 UTC）格式化，你可以这样做；

```
ALTER SESSION SET TIME_ZONE = 'UTC';
ALTER SESSION SET NLS_TIMESTAMP_TZ_FORMAT = 'yyyy-mm-dd"T"hh24:mi:ss.ff3"Z"'; 
```

然后，当您选择 a 时`TIMESTAMP WITH TIME ZONE`，您将以该格式获得它。

如果您需要格式化`DATE`或`TIMESTAMP`类似的，您可以使用格式来伪造时区部分；

```
ALTER SESSION SET NLS_DATE_FORMAT = 'yyyy-mm-dd"T"hh24:mi:ss".000Z"'
ALTER SESSION SET NLS_TIMESTAMP_FORMAT = 'yyyy-mm-dd"T"hh24:mi:ss.ff3"Z"' 
```

[SQLfiddle 在这里进行测试](http://sqlfiddle.com/#!4/e4aed/5)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:53:18.703

使用函数：TO_CHAR

示例：to_char(<>,'YYYY-MM-DD"T"HH24:MI:SS:FF3"Z"')

文件：

[http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions200.htm#SQLRF06129](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions200.htm#SQLRF06129)

格式模型：

[http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#i34510](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#i34510)

# ada - 这是 Ada 教科书示例垃圾吗？

> ID：14688836
> 
> 赞同：1
> 
> 时间：2013-02-04T14:29:39.640
> 
> 标签：ada

以下是“软件工程师的 Ada”示例程序的来源：

[http://www.springer.com/cda/content/document/cda_downloaddocument/978-1-84882-313-6_programs.zip](http://www.springer.com/cda/content/document/cda_downloaddocument/978-1-84882-313-6_programs.zip)

提取后转到 c04-arrays/justify

```
$ gnatmake justify.adb 
```

运行 justify，并将输出与作为输入的“example.txt”进行比较。我得到的输出是交织在一起的，与理由无关。如果我保存输出：

```
$ justify > result.txt 
```

然后看着我可以得出结论，有些行写在终端中的其他行之上。但即使我忽略了这个问题，结果也很难被称为正当性。

我的问题：你得到同样的意外输出吗？你得到的输出是否类似于理由？

请注意，输入也与源一起提供！所以我什至不想破坏这个程序。

我在终端上得到的输出：

```
  敏捷的棕色狐狸跳过了懒惰的狗。
          棕狐跳过了这只懒狗。
          迅捷棕狐跳过了懒狗迅捷棕狐跳了起来
 敏捷的棕色狐狸跳过了懒惰的狗。
  敏捷的棕色狐狸在懒惰的狗身上。
 敏捷的棕色狐狸跳过了狗。
 敏捷的棕狐跳过懒惰的
 你慢吞吞的灰狼跳过了这只活泼的猫。
 慢吞吞的灰狼跳过了活泼的猫。
  缓慢的灰狼狼吞虎咽地咬住了这只活泼的猫。
 慢吞吞的灰太狼猫。
 慢吞吞的灰狼跳过了
 慢条斯理的灰狼跳过了活泼的
          猫。

```

重定向后的输出：

```
          敏捷的棕色狐狸跳过了懒惰的狗。
  快的
          棕狐跳过了这只懒狗。
          迅捷棕狐跳过了懒狗迅捷棕狐跳了起来
          敏捷的棕色狐狸跳过了懒惰的狗。
 快的
          棕狐跳过了这只懒狗。
  敏捷的棕色狐狸
          跳过了懒惰的狗。
 敏捷的棕狐跳了过去
          懒惰的狗。
 敏捷的棕狐跳过懒惰的
          狗。
  慢吞吞的灰狼跳过了活泼的猫。
 这
          慢吞吞的灰太狼跳过了这只活泼的猫。
 慢灰色
          狼跳过了活泼的猫。
  缓慢的灰狼
          跳过了活泼的猫。
 慢吞吞的灰狼跳过
          在活泼的猫。
 慢吞吞的灰狼跳过了
          活泼的猫。
 慢条斯理的灰狼跳过了活泼的
          猫。

```

这应该是正当理由吗？这个问题与我的机器/系统/终端/外壳特别有关，还是其他地方的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:28:37.987

我在 Mac OS X 上得到相同的输出。

问题是这`example.txt`是一个带有 CR/LF 行结尾的 Windows 文件，并且您在 Unix 系统上运行，它只需要 LF；并且 Ada RTS 将 CR 留在每个输入行的末尾。（我怀疑 C RTS 可能会做同样的事情；Python 处理得更好）。

[Wikipedia](http://en.wikipedia.org/wiki/Newline)中有很多信息，包括您可以`cat -v`用来查看控制字符的信息：

```
 The quick brown fox jumped over the  lazy  dog.^M  The  quick
      brown     fox     jumped     over     the     lazy     dog.^M
      ThequickbrownfoxjumpedoverthelazydogThequickbrownfoxjumpedov
      The  quick  brown  fox  jumped over the lazy dog.^M The quick
      brown fox jumped over the lazy dog.^M  The  quick  brown  fox
      jumped  over  the lazy dog.^M The quick brown fox jumped over
      the lazy dog.^M The quick brown  fox  jumped  over  the  lazy
      dog.^M  The  slow gray wolf skipped over the frisky cat.^M The
      slow gray wolf skipped over the frisky cat.^M The  slow  gray
      wolf  skipped  over  the  frisky  cat.^M  The  slow gray wolf
      skipped over the frisky cat.^M The  slow  gray  wolf  skipped
      over  the  frisky  cat.^M The slow gray wolf skipped over the
      frisky cat.^M The slow gray  wolf  skipped  over  the  frisky
      cat.^M ^M 
```

我不知道您的系统是否有`dos2unix`实用程序，但无论如何您都可以使用`tr`：

```
$ tr -d '\r' <example.txt >example.lf
$ mv example.lf example.txt 
```

通常，您可以提取归档文件，以转换原始标识为文本`unzip -a`的所有文件的行尾；`zip`在这种情况下，它将所有文件都标识为二进制文件，因此您可以使用它`unzip -aa`来强制转换（鉴于这些是教科书示例，可以肯定的是，其中不会有任何实际的二进制文件！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:49:57.373

答案可能是您的控制台使制表符看起来像空格，从而产生不同的外观结果。

* * *

您可以使用以下方法进行测试：

```
Ada.Text_IO.Put( ASCII.HT & '.' );
Ada.Text_IO.Put( ' ' & '.'); 
```

看看这两个时期是否在同一列。

# linux - 由于 libx264，无法在 Centos 上编译 xuggle-xuggler

> ID：14688842
> 
> 赞同：2
> 
> 时间：2013-02-04T14:30:01.187
> 
> 标签：linux, configure, xuggler, xuggle

我正在尝试在我的 CentOS 6.3 final 上编译 xuggle-xuggler 并且遇到了一些麻烦。由于在 libx264 中没有找到 makefile，所以根目录中的一般 make 失败。

所以我尝试进入 captive/libx264/csrc 并再次运行配置。这是输出：

```
[test@localhost:~/Documents/02_Xuggle/xuggle-xuggler/captive/libx264/csrc]$ ./configure 
platform:      X86_64
system:        LINUX
cli:           yes
libx264:       internal
shared:        no
static:        no
asm:           yes
interlaced:    yes
avs:           no
lavf:          no
ffms:          no
gpac:          no
gpl:           yes
thread:        posix
filters:       crop select_every 
debug:         no
gprof:         no
strip:         no
PIC:           no
visualize:     no
bit depth:     8
chroma format: all
You can run 'make' or 'make fprofiled' now. 
```

即使似乎没有任何错误，也没有创建任何生成文件：

```
[test@localhost:~/Documents/02_Xuggle/xuggle-xuggler/captive/libx264/csrc]$ make
make: *** No targets specified and no makefile found.  Stop. 
```

这正常吗？到目前为止，我没有在网上找到与此问题相关的任何内容，我自己也很难找到解决方案：s

任何方向将不胜感激。谢谢！

朱利安

# c - C中的DNS服务器返回IP地址和端口号

> ID：14688846
> 
> 赞同：1
> 
> 时间：2013-02-04T14:30:05.390
> 
> 标签：c, visual-studio, dns

根据我对 DNS 服务器的理解，一个简单的解释是，对于给定的主机名，DNS 服务器使用查找表来返回主机名的 IP 地址。

对于我的一个项目，我曾经通过 wifi 网络将客户端连接到服务器，并指定服务器在客户端上侦听的 IP 地址和端口。出现了一个新要求，要求在网络设置中指定 DNS 服务器，然后 DNS 服务器会返回我服务器的 IP 地址和端口号。

我上网查看了对A DNS服务器的请求/响应，我发现很多地方都提到端口号不是由DNS服务器发送的。这样对吗？

我已经在 Visual Studio 2005 中对我的项目进行了编码。是否有任何可以与现有 Visual Studio 项目集成的 DNS 服务器库/代码？是否有可能，对于特定的主机名，我可以在响应中指定端口号？

我已经检查了许多 C 语言中 DNS 服务器的源代码，例如 ldns/bind，但我还没有找到与 Visual Studio 集成的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:59:22.727

You can specify an additional information about given domain in TXT DNS record. So, you could add text tag:value part into your domain TXT record.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:50:30.607

这可能是用户试图定义的吗？[DNS SRV 记录](http://en.wikipedia.org/wiki/SRV_record)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:34:08.423

这没有任何意义，端口不是主机域名的一部分。给定主机（=单个域名）可以运行任意数量的应用程序，即打开任意数量的端口。

您的想法需要将所需应用程序的某种形式的身份发送到 DNS 服务器以进行查找，或者它可以回复正在运行的服务及其端口的列表。它只是不能那样工作，至少据我所知。

没有什么可以阻止您在任何其他端口上运行 Web 服务器（通常在端口 80 上），例如在开发过程中经常使用的 8080。然后 URL 将是`http://example.com:8080`，并且由于浏览器仅在 DNS 中查找`example.com`部分，因此 DNS 无法覆盖端口号。

# c++ - 没有循环和内置函数的字符串长度

> ID：14688849
> 
> 赞同：-6
> 
> 时间：2013-02-04T14:30:06.687
> 
> 标签：c++, c, string

我如何在不使用循环和字符串类函数（如 strlen() ）的情况下找出字符串的长度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:32:17.183

后续`if`s?

```
if (str[0] == 0) return 0;
if (str[1] == 0) return 1;
///keep going until fingers start bleeding 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T18:23:53.933

```
int length (const char* p) 
{
    return *p == 0 ? 0 : 1 + length(p+1);
} 
```

任何迭代函数理论上都可以递归实现，反之亦然。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T17:37:34.697

```
#include <stdio.h>

void main()

{
    char string[50];

    int i, length = 0;

    printf("Enter a string \n");
    gets(string);

    for (i = 0; string[i] != '\0'; i++)
    {
        length++;
    }
    printf("The length of a string is the number of characters in it \n");
    printf("So, the length of %s = %d\n", string, length);
} 
```

# nginx - nginx 反向代理和端口

> ID：14688852
> 
> 赞同：1
> 
> 时间：2013-02-04T14:30:10.483
> 
> 标签：nginx, reverse-proxy

我有一个关于代理通行证的问题。许多教程以某种方式或形式显示了这样的配置，并标识了端口：

```
location / {
  proxy_pass        http://x.x.x.100:80;
  proxy_set_header  X-Real-IP  $remote_addr;
} 
```

有人可以向我解释为什么需要使用该端口吗？它需要是一个特定的数字，还是有必要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:46:07.663

明确指定的端口是：

*   如果您在默认 http (80) 或 https (443) 端口上反向代理某些东西，则没有必要
*   如果您要对在任何非默认端口上运行的东西进行反向代理（当您的应用程序服务器和 Web 服务器位于同一主机上时很常见），则这是必需的

[http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass)显示示例 显示没有端口号的示例

# php - 在 Laravel 中检查会话超时

> ID：14688853
> 
> 赞同：22
> 
> 时间：2013-02-04T14:30:13.670
> 
> 标签：php, laravel, laravel-3

我只是想知道是否有人知道如何在 Laravel 中检查会话超时。

您可以检查会话是否具有特定项目：

```
if (Session::has('name'))
{
     $name = Session::get('name');
} 
```

但是您无法检查会话是否已过期。如果我能以更具体的方式向用户报告，那就太好了。“您的会话已超时，请重新开始。”

有什么想法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-04T17:27:30.790

只需使用与会话类本身相同的逻辑即可。

```
if ((time() - Session::activity()) > (Config::get('session.lifetime') * 60))
{
   // Session expired
} 
```

将它放在您的“之前”过滤器中 - 它会在每个请求上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T16:05:45.423

为什么不这样做？

```
if (!Session::has('name'))
{
     $sessionTimeout = 1;
} 
```

如果会话超时，则不再设置名称。然后您可以编写一些代码来响应 $sessionTimeout == 1;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-03T10:26:18.933

顺便说一句，特别是如果您需要会话生命周期，

用这个：

```
{{ session('lifetime') }} 
```

在描述这一点时，

用这个：

```
session(['User' => $user, 'lifetime' => 3600]); 
```

# asp.net - CustomValidator 中的 ControlToValidate 属性为空？

> ID：14688857
> 
> 赞同：0
> 
> 时间：2013-02-04T14:30:31.547
> 
> 标签：asp.net, vb.net, webforms

我在 ASP.NET 文件中定义了以下代码：

```
<asp:CustomValidator ID="CustomValidator6"
            ControlToValidate="Weight1" OnServerValidate="TotalWeight" runat="server" ErrorMessage="Must equal 100%"></asp:CustomValidator> 
```

然而，当我尝试单步调试代码时，我收到一个 Javascript 错误，提示“''的 ControlToValidate 属性不能为空”。这让我抓狂——我知道是这个特殊的控件导致了问题，因为如果我将其注释掉，页面运行良好。

有没有人见过这个并且知道修复？我尝试在页面上放置一个新的自定义验证器，手动设置属性并通过属性窗口，两者都有一点，但我仍然得到这个错误。

# android - 从服务获取位置数据？

> ID：14688863
> 
> 赞同：1
> 
> 时间：2013-02-04T14:31:05.633
> 
> 标签：android, android-service, android-location

我尝试提供定位服务，但不知何故我无法使其工作。Lat 和 Lng 始终为 NULL。

我有一些异常，`locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);`所以我把它放在**run()**方法中，现在异常消失了。可能是什么问题呢？

那么使定位服务工作的解决方案是什么？

代码：

```
public class LocationService extends Service {

    private Timer timer = new Timer();

    private LocationManager locManager;
    private LocationListener locListener = new MyLocationListener();

    private String latitude;
    private String longitude;
    private String providerToSend;

    Messenger messenger;
    Timer t = new Timer();

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    public void onCreate() {
        super.onCreate();

        locListener = new MyLocationListener();
        locationProviderInit();
        startService();

    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        shutdownService();

    }

    private void startService() {

        locManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

        String token = new SharedPreffer(this).loadPreferences("token");

            Log.d("Debug - token: ", "Van Token: " + token);

            t.schedule(new TimerTask() {

                @Override
                public void run() {

                    locationProviderInit();

                    if (latitude != null && longitude != null) {

                        Log.d("Debug - lat: ", latitude);
                        Log.d("Debug - lng: ", longitude);

                    } else {

                        Log.d("Debug - lat and lng are: ", "NULL");
                    }

                }
            }, 0, 5000);

    }

    private void locationProviderInit() {

        new Runnable() {

            @Override
            public void run() {

                try {

                    boolean gps_enabled = locManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
                    boolean network_enabled = locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

                    if (gps_enabled) {
                        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);
                        providerToSend = LocationManager.GPS_PROVIDER;
                    }

                    if (network_enabled) {
                        locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);
                        providerToSend = LocationManager.NETWORK_PROVIDER;
                    }

                } catch (Exception e) {
                    Log.d("Debug", e.toString());
                }
            }
        };

    }

    class MyLocationListener implements LocationListener {
        public void onLocationChanged(Location location) {

            if (location != null) {
                longitude = Double.toString(location.getLongitude());
                latitude = Double.toString(location.getLatitude());
            }
        }

        public void onProviderDisabled(String arg) {
        }

        public void onProviderEnabled(String arg) {
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    }

    private void shutdownService() {
        if (timer != null)
            timer.cancel();
        Log.i(getClass().getSimpleName(), "Timer stopped!!!");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:56:18.200

您没有在 locationProviderInit 中执行 Runnable ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:45:12.137

您是否尝试在 Runnable 对象的方法 run() 中放置调试消息，并查看它是否曾经被执行过？

定义一个 Runnable 实例而不使用它，例如在一个线程中，是行不通的。

以下是一些开源 GPS 日志记录服务示例，您可以将其用作指南。

[GPSLoggerService](http://code.google.com/p/gpslogger/source/browse/trunk/GPSLogger/src/com/prom2m/android/gpslogger/service/GPSLoggerService.java)

[GPS记录服务](https://github.com/mendhak/gpslogger/blob/master/GPSLogger/src/com/mendhak/gpslogger/GpsLoggingService.java)

# android - Eclipse 找不到 android 类

> ID：14688867
> 
> 赞同：-2
> 
> 时间：2013-02-04T14:31:09.667
> 
> 标签：android, eclipse, sdk

> **可能重复：**
> [导入 Android 平台类的问题](https://stackoverflow.com/questions/12785607/problems-with-importing-android-platform-classes)

我在使用 android 类的代码中有错误，它们无法解析为类型。我已经安装了 android sdk、adt 插件、avd 管理器。我应该如何设置构建路径以使我的项目看到 android 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:44:03.793

如果问题只是 android.support 中的类，则必须将 android-support-v4.jar 放在 libs 文件夹中。它是支持库。

# c++ - 未定义的引用和非虚拟 thunk to

> ID：14688871
> 
> 赞同：8
> 
> 时间：2013-02-04T14:31:14.587
> 
> 标签：c++, abstract-class

我有这样的课程：

```
class Product
    {
        public :
            virtual double getPrice();
            virtual void setPrice(double price);
    };

class MusicProduct
    {
        protected:

            string author;
            double price;

        public :

            virtual string getAuthor();
            virtual void setAuthor(string author);
            ~MusicProduct();
    };

class CD : public MusicProduct, public Product
    {
        public :

            string getAuthor();
            void setAuthor(string author);
            double getPrice();
            void setPrice(double price);
    };

string CD::getAuthor()
    {
        return MusicProduct::author;
    }

    void CD::setAuthor(string author)
    {
        MusicProduct:author = author;
    }

    void setPrice(double price)
    {
    MusicProduct::price = price;
    }

    double getPrice()
    {
        return MusicProduct::price;
    } 
```

我有这些错误：

```
/home/katie/Desktop/Temp/MusicStore.cpp||In member function ‘virtual bool  MusicStore::hasProduct( Product)’:|
/home/katie/Desktop/Temp/MusicStore.cpp|15|warning: no return statement in function returning non-void [-Wreturn-type]|
/home/katie/Desktop/Temp/MusicStore.cpp||In member function ‘virtual  Product  MusicStore::getProduct( Product)’:|
/home/katie/Desktop/Temp/MusicStore.cpp|20|warning: no return statement in function returning non-void [-Wreturn-type]|
/home/katie/Desktop/Temp/MusicStore.cpp||In member function ‘virtual bool  MusicStore::buyProduct( Product)’:|
/home/katie/Desktop/Temp/MusicStore.cpp|25|warning: no return statement in function returning non-void [-Wreturn-type]|
/home/katie/Desktop/Temp/MusicStore.cpp||In member function ‘virtual bool  MusicStore::returnProduct( Product)’:|
/home/katie/Desktop/Temp/MusicStore.cpp|30|warning: no return statement in function returning non-void [-Wreturn-type]|
/home/katie/Desktop/Temp/Store/CD.cpp||In member function ‘virtual void  CD::setAuthor(std::string)’:|
/home/katie/Desktop/Temp/Store/CD.cpp|12|warning: label ‘MusicProduct’ defined but not used [-Wunused-label]|
obj/Debug/Store/CD.o:(.rodata._ZTVN5Music2CDE[vtable for  CD]+0x10)||undefined reference to ` CD::getPrice()'|
obj/Debug/Store/CD.o:(.rodata._ZTVN5Music2CDE[vtable for  CD]+0x14)||undefined reference to ` CD::setPrice(double)'|
obj/Debug/Store/CD.o:(.rodata._ZTVN5Music2CDE[vtable for  CD]+0x20)||undefined reference to `non-virtual thunk to  CD::getPrice()'|
obj/Debug/Store/CD.o:(.rodata._ZTVN5Music2CDE[vtable for  CD]+0x24)||undefined reference to `non-virtual thunk to  CD::setPrice(double)'|
obj/Debug/Store/CD.o:(.rodata._ZTIN5Music2CDE[typeinfo for  CD]+0x10)||undefined reference to `typeinfo for  MusicProduct'|
obj/Debug/Store/CD.o:(.rodata._ZTIN5Music2CDE[typeinfo for  CD]+0x18)||undefined reference to `typeinfo for  Product'|
||=== Build finished: 6 errors, 5 warnings ===| 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-04T14:43:48.963

除了 momogentoo 提到的缺少 CD:: 限定符错误之外，这是另一个非常狡猾的错误：

```
void CD::setAuthor(string author)
{
    MusicProduct:author = author; // <-- !!!
} 
```

由于您使用了单个冒号，因此它不会被解释为解析运算符，而是作为标签（用于 goto）。该语句实际上所做的只是对同一字符串对象进行自赋值（对于 std::string 将无效）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T14:52:19.620

第一个问题：

```
undefined reference to `CD::getPrice()' 
```

您对该功能的定义缺少`CD::`资格；所以它改为声明并定义一个非成员函数。

```
double CD::getPrice()
{//    ^^^^ Add this
MusicProduct::price = price;
} 
```

同样对于`CD::setPrice`.

第二个问题：

```
undefined reference to `typeinfo for  MusicProduct' 
```

据推测，`MusicProduct`应该是一个抽象类，并且您不想为其虚函数提供定义。在这种情况下，您必须将它们声明为*纯虚拟*：

```
virtual double getPrice() = 0;
//                        ^^^ Add this 
```

如果它不应该是抽象的，那么您将需要实现这些功能。

第三个问题：

```
In member function ‘virtual bool  MusicStore::hasProduct( Product)’:
warning: no return statement in function returning non-void [-Wreturn-type] 
```

大概，你有一个函数被调用`MusicStore::hasProduct`，它应该返回一个布尔值，但没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T14:33:29.270

void setPrice(double price) -> void CD::setPrice(double price)

getPrice() 相同

# java - 字符串到 char 到 字符串到 int

> ID：14688877
> 
> 赞同：0
> 
> 时间：2013-02-04T14:31:21.983
> 
> 标签：java

基本上，这段代码的作用是从用户那里获取一个任意长度的数字，然后以每数字形式加上给定数字上所有数字的总和（例如 1234= 1、2、3、 4.总和=10)。但是，我不能让它对负数起作用。

```
 Scanner s= new Scanner(System.in);

    String num= s.nextLine();

    char arr[]= new char[num.length()];
    int numsarray[]= new int[num.length()];
    String number[]= new String[num.length()];
    int sum=0;

    for(int i=0; i<num.length();i++)
    {
        arr[i]=num.charAt(i);
        System.out.println(arr[i]);

        number[i]=Character.toString(arr[i]);

        numsarray[i]=Integer.parseInt(number[i]);
    }

    for(int i=0;i<num.length();i++)
    {   
        sum+=numsarray[i];
    }
    System.out.println("Sum:"+sum); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:45:20.307

有什么理由不先检查数字是否小于 0？然后，您可以使用 abs 使其成为正值并通过您的函数运行它。省去了在 arr[0] 处处理连字符的麻烦。当然你应该有一些布尔来存储标志:-)

# java - toString(); 爪哇

> ID：14688881
> 
> 赞同：0
> 
> 时间：2013-02-04T14:31:34.323
> 
> 标签：java, tostring

谁能看到为什么我的`toString()`方法不起作用？它编译得很好，但是当我运行它时出现运行时错误：

这是我的代码：

```
import java.util.*;

public class ExamMarks {

    // fields
    private String moduleName;
    private int moduleCode;
    private int year;
    private int[] numbers;

    // methods
    public static int highestMark(int[] numbers) {
        int highest = numbers[numbers.length - 1];
        int i = numbers[0];
        for (i = 0; i < numbers.length - 1; i++) {
            if (numbers[i] > numbers[i + 1]) {
                highest = numbers[i];
            }
        }
        return highest;
    }

    public static double averageMark(int[] numbers) {
        int sum = 0;
        double average = 0.000;
        for (int i = 0; i < numbers.length; i++) {
            sum = numbers[i] + sum;
            average = sum / numbers.length;
        }
        return average;
    }

    // Constructor
    public ExamMarks() {
        moduleName = "Object Oriented Programming";
        moduleCode = 5015;
        year = 2013;
    }

    // toString
    @Override
    public String toString() {
        String result = ("The title of this module is : " + moduleName
                + "The code number of this module is: " + moduleCode
                + "The year of the Exam is: " + year + "Array average = "
                + averageMark(numbers) + "Highest grade = " + highestMark(numbers));
        return result;
    }

    // Tester
    public static void main(String[] args) {
        ExamMarks grade = new ExamMarks();
        Scanner percentages = new Scanner(System.in);
        int[] numbers = new int[20];
        double x = averageMark(numbers);

        System.out.println("Please enter 20 marks");

        for (int i = 0; i < numbers.length; i++) {
            numbers[i] = percentages.nextInt();

        }

        System.out.println(grade);
    }
} 
```

这是我得到的错误

```
java.lang.NullPointerException at ExamMarks.averageMark(ExamMarks.java:26) 
    at ExamMarks.toString(ExamMarks.java:42) 
    at java.lang.String.valueOf(Unknown Source) 
    at java.io.PrintStream.println(Unknown Source) 
    at ExamMarks.main(ExamMarks.java:65) 
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 
    at java.lang.reflect.Method.invoke(Unknown Source) 
    at edu.rice.cs.drjava.model.compiler.JavacCompiler.runCommand(JavacCompiler.java:27‌​2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:36:03.777

NullPointerException 在这里。私有 int [] 数字；

numbers 在您的实例中为空。

当您调用grade.toString() 时，该方法调用

```
 public static double averageMark(int [] numbers){
    int sum = 0;  
    double average = 0.000;
    for (int i = 0; i < numbers.length; i++){   // !!!! numbers is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:36:18.047

你从来没有设置类的`private int [] numbers;`字段`ExamMarks`。

`numbers`in`toString()`方法属于`ExamMarks`类的实例，而`numbers`in`main(...)`只是一个局部变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:34:01.573

未设置“moduleName”、“moduleCode”和“year”字段。尝试在调用 System.out.println(grade); 之前设置它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T14:34:27.923

你需要让你的`toString()`函数对异常有弹性。

在最基本的层面上，您可以在整个实现周围添加一个`try`and或制作函数并处理空指针异常。`catch``averageMark(numbers)``highestMark(numbers)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T14:37:20.190

你打过电话了

```
averageMark(numbers); 
```

直接地。因此，您用作参数的数字很好。

但是 toString() 方法也调用了这个方法，但是带有一个未初始化的类字段“数字”。

您也必须将“数字”设为静态并为其设置一些值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T14:38:16.760

在与 + 运算符连接之前，您应该检查您的成员是否为 != null。

如果您使用 eclipse 使用 rightclick -> source -> generate toString() ...它会`toString`在您的类中生成一个简单的方法，您只需要更改文本即可。

效果一般很好，而且很容易使用。

# azure - 从 Azure VM 使用 Windows Azure SQL 数据库

> ID：14688888
> 
> 赞同：0
> 
> 时间：2013-02-04T14:31:51.937
> 
> 标签：azure, azure-sql-database

从 Windows Azure VM 托管的 Web 应用程序中使用 Windows Azure SQL 数据库（以前称为 SQL Azure）是否有任何性能损失？我想知道它的性能是否比使用 Azure 保留实例上运行的网站上的 Azure SQL 数据库更差。这两种情况下的假设是 Azure SQL 数据库部署在与应用相同的区域中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:05:29.930

在使用 SQL Azure 方面应该没有任何区别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:29:58.187

正如@Igorek 指出的那样，使用虚拟机和网站访问Windows Azure SQL 之间没有区别（假设相同的数据中心）。也就是说：可能不太明显的一件事是，今天，虚拟机（和云服务）支持 XL 实例（意味着 NIC 上的 800Mbps）与目前仅限于大型保留实例 (400Mbps) 的网站。所以...如果您要移动大量数据，那么使用 XL 虚拟机与大型网站实例相比，您将获得更好的吞吐量。

我意识到这是一个边缘案例，但只是想我会把它扔在那里......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-29T15:53:15.780

性能可能会有所不同，具体取决于虚拟机上的配置和托管网站的网站基础架构。

连接入站和出站性能取决于 Azure 中抽象的负载平衡。这与现有的基础设施有关。

例如，如果 VM 处于 Basic Tier[更多关于 VM Sizing](https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-size-specs/)的状态，并且网站以更高的配置托管，则您可能会在性能方面遇到一些差异。

# php - Symfony2 扩展了异常类

> ID：14688889
> 
> 赞同：0
> 
> 时间：2013-02-04T14:31:52.370
> 
> 标签：php, exception, symfony, namespaces

我正在做一个 Symfony2 项目。对于有用的技术实践，我需要导入外部库。所以我做到了。但是这个库创建了一些从 Exception 扩展的 *_Exception 类。

我的外部库文件以：

```
class CloudKey_Exception extends Exception {}
class CloudKey_RPCException extends CloudKey_Exception {public $data = null;}
class CloudKey_ProcessorException extends CloudKey_RPCException {}
class CloudKey_TransportException extends CloudKey_RPCException {}
class CloudKey_SerializerException extends CloudKey_RPCException {}
class CloudKey_AuthenticationErrorException extends CloudKey_RPCException {}
class CloudKey_RateLimitExceededException extends CloudKey_AuthenticationErrorException {}

class CloudKey_InvalidRequestException extends CloudKey_RPCException {}
class CloudKey_InvalidObjectException extends CloudKey_InvalidRequestException {}
class CloudKey_InvalidMethodException extends CloudKey_InvalidRequestException {}
class CloudKey_InvalidParamException extends CloudKey_InvalidRequestException {}

class CloudKey_ApplicationException extends CloudKey_RPCException {}
class CloudKey_NotFoundException extends CloudKey_ApplicationException {}
class CloudKey_ExistsException extends CloudKey_ApplicationException {}
class CloudKey_LimitExceededException extends CloudKey_ApplicationException {} 
```

当我尝试在控制器中实例化我的对象时，Symfony 会返回：

> 致命错误：在第 513 行的 /var/www/carpediese/src/CD/DMBundle/Entity/CloudKey.php 中找不到类“CD\DMBundle\Entity\Exception”

我认为异常类是原生 PHP5+ 类。我怎样才能告诉 Symfony？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:50:36.893

请记住在使用该类的文件中正确设置`use`语句。`Exception`

编辑：

当您在声明下方引用 PHP 5.3+ 中的任何类时，`namespace`您需要添加要用于被引用类的命名空间（或在引用类时使用整个命名空间）。所以，如果`Exception`你使用的类属于说`someLibrary\ClouKey\Exceptions\`命名空间，你应该有

```
use someLibrary\CloudKey\Exceptions\Exception; 
```

在文件的开头，就在下面`namespace`，或者在定义新类时使用整个命名空间：

```
class CloudKey_Exception extends someLibrary\CloudKey\Exceptions\Exception {} 
```

编辑2：

在您使用的类中，`Exception`确实是原生 PHP 类，所以`\Exception`应该使用。您得到的错误是由该类的这一部分生成的`CloudKey`：

```
public function __get($name)
{
    if (!isset($this->objects[$name]))
    {
        $class = 'CloudKey_' . ucfirst($name);
        if (!class_exists($class))
        {
            $class = 'CloudKey_Api';
        }
        $this->objects[$name] = new $class($this->user_id, $this->api_key, $this->base_url, $this->cdn_url, $name, $this->proxy, $this->timeout);
        $this->objects[$name]->parent = $this;
    }

    return $this->objects[$name];
} 
```

根据文档（[http://php.net/manual/en/language.oop5.basic.php](http://php.net/manual/en/language.oop5.basic.php)）：

> 如果包含类名的字符串与 new 一起使用，则将创建该类的新实例。如果该类位于命名空间中，则在执行此操作时必须使用其完全限定名称。

因此，您必须编辑代码的引用部分以使用字符串中的整个命名空间作为类名。

# cocoa-touch - NSImage 的 resizableImageWithCapInsets？

> ID：14688894
> 
> 赞同：6
> 
> 时间：2013-02-04T14:32:04.583
> 
> 标签：cocoa-touch, cocoa

在`UIKit`我们有`- (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets`.

`AppKit`创建 tileable是否有类似的东西`NSImage`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-05T04:38:10.737

NSImage 在 10.10 (Yosemite) 中确实得到了轻微的改进。NSImage 现在具有以下属性：

```
@property NSEdgeInsets capInsets 
```

使用此属性，您可以像在 iOS 中一样设置 cap insets。如果您调用`[image drawInRect:rect]`，它将考虑这些插图。请注意，这仅适用于运行 10.10 或更高版本的系统；在较旧的系统上，它只会拉伸图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T01:49:27.437

没有。NSImage 不包含这样的智能。您将不得不自己切碎、调整大小并重新组合图像。

您可能会考虑创建一个实现此功能的 NSCustomImageRep 子类，然后您可以使用它来实现相同方法的 OS X 版本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-22T09:28:54.287

您可以使用 [NSImage drawAtPoint] 来代替，如下所示：

```
@implementation NSImage (CapInsets)

- (void)drawImageWithLeftCapWidth:(NSInteger)left topCapHeight:(NSInteger)top destRect:(NSRect)dstRect
{
    NSSize imgSize = self.size;
    [self drawAtPoint:dstRect.origin fromRect:NSMakeRect(0, 0, left, top) operation:NSCompositeSourceOver fraction:1];
    [self drawInRect:NSMakeRect(left, 0, dstRect.size.width-2*left, top) fromRect:NSMakeRect(left, 0, imgSize.width-2*left, top) operation:NSCompositeSourceOver fraction:1];
    [self drawAtPoint:NSMakePoint(dstRect.origin.x+dstRect.size.width-left, dstRect.origin.y) fromRect:NSMakeRect(imgSize.width-left, 0, left, top) operation:NSCompositeSourceOver fraction:1]; 
}

@end 
```

# couchdb - iriscouch 上 couchdb 的日志在哪里？

> ID：14688901
> 
> 赞同：5
> 
> 时间：2013-02-04T14:32:53.673
> 
> 标签：couchdb

我在 iriscouch.com 上使用 CouchDB。

我制作了一个数据库，其中填充了一些数据。我正在运行 map 和 reduce 函数来过滤掉一些项目，但它不起作用。由于 console.log 不起作用，我正在尝试使用 CouchDB 提供的 log() 函数。但是我找不到日志文件。我在配置中找到了路径，但那是服务器上的文件路径，我只能访问蒲团（我认为）。

我可以要求阅读日志吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T04:28:12.027

your.iriscouch.com/_log

如果您想在日志中更进一步，请使用 bytes=x 查询字符串，例如

your.iriscouch.com/_log?bytes=2000

此外，您需要以管理员身份登录才能访问上述网址。

# sharepoint-2010 - 如何在 Sharepoint 2010 中合并两个内容源？

> ID：14688902
> 
> 赞同：0
> 
> 时间：2013-02-04T14:33:00.610
> 
> 标签：sharepoint-2010

在我的 share point 2010 网站中，我添加了两个内容源

1.  文件系统（共享文件夹）
2.  BDC 数据（业务线数据）

![外部内容源](../Images/a077de7bea5620f63b08ff5f1309ac4c.png)

我添加了托管属性来映射 BDC 数据的元数据。

我的搜索结果即将链接此

![搜索结果](../Images/dedfa8a8ebe6b25d4c70302dbc6d4434.png)

我想链接两个内容源，我的第二个内容源具有文件相关信息，例如（选项卡、类别、文件号、案例名称）

我添加了该列，还更改了搜索结果 Web 部件中的 xslt。结果如下链接。

![修改后的搜索结果](../Images/8f23c14ba12e9e2761ba57c452fb6111.png)

从结果来看，第三个（120）来自数据库，因此所有属性都被映射（caseid、casename、fileno、doctab、description）

但它没有映射到文件系统。文件系统与具有文件名的表以及具有一些信息的文件的路径有关系：

file://192.168.25.231/FolderName/ **CaseID** / **documenttab** / **filename**

CaseId 是我添加为第二个内容源的表的主键。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:29:53.087

这可能是一个过于简单化的解释，以保持响应尽可能短。

对于您的搜索结果页面，同时检索应用程序数据的最佳方法是不在核心搜索结果 Web 部件中显示该信息。将其从默认范围中排除。而是使用添加到结果页面的联合搜索结果 Web 部件。您还需要为范围创建相应的联合位置（很容易做到），然后您可以使用 XSLT 设置结果显示的样式 - 应用程序数据需要以不同的方式呈现给文件和网页的链接。

然后，搜索案例 ID，将在核心搜索结果 Web 部件中显示包含该信息的所有文件，并将在联合结果 Web 部件中显示任何匹配的应用程序数据，并应用不同的格式。注意 - 两者之间不会有任何联系。唯一的关系是它们都匹配搜索查询。可以连接 Web 部件以根据另一个中的选定值过滤一个，但这是一种完全不同的方法，使用搜索结果不容易完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:36:41.770

嗯，不看环境很难添加更多。但这是B计划

假设您正在使用 BCS 并希望显示非结构化内容（文件）和与文件共享元数据的应用程序数据，您可以尝试以下操作。这将需要一些编码知识。您可以在 SharePoint Designer 中的 Web 部件之间建立连接，但这需要 Visual Studio

*   创建自定义搜索结果网页，并使用标准核心搜索结果 Web 部件以及单独的数据 Web 部件来显示应用程序数据

*   创建用于输入搜索查询的自定义查询框，最好使用元数据的单独字段来完成 - 案例 ID、案例名称等。（您通常会使用数据过滤器 Web 部件，但这不会将结果传递到正常的搜索结果 - 您需要编写代码来运行两个查询）

*   格式化并将查询传递到核心搜索结果 Web 部件和 BCS 数据 Web 部件，以显示与查询匹配的项目

这大概就是我能帮上的忙了。MSDN 上的 SharePoint 部分应该是下一个停靠点。祝你好运！

# wordpress - 是否可以在 WordPress 中拆分“自定义帖子类型”？

> ID：14688905
> 
> 赞同：0
> 
> 时间：2013-02-04T14:33:08.417
> 
> 标签：wordpress

为什么`<!--nextpage-->`适用于页面，但不适用于自定义帖子类型？

这是single-custom_type.php文件的代码。我自己添加了“ `<?php wp_link_pages(); ?>`”。我希望这会奏效，但事实并非如此。其实也没什么好说的了。

```
<?php get_header(); ?>

<div id="content">

<div id="inner-content" class="wrap clearfix">
<div id="main" class="eightcol first clearfix" role="main">
<?php include(TEMPLATEPATH . '/template-logo.php'); ?>
<div class="content">

<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

<article id="post-<?php the_ID(); ?>" <?php post_class('clearfix'); ?> role="article">

<header class="article-header">

<h2 class="h2"><?php the_title(); ?></h2>

</header> <!-- end article header -->

<section class="entry-content clearfix">
    <?php if ( function_exists("has_post_thumbnail") && has_post_thumbnail() ) { ?>
    <a href="<?php the_permalink(); ?>" title="Permanent Link to <?php the_title(); ?>">
    <?php the_post_thumbnail(array(200,200), array("class" => "alignleft post_thumbnail")); ?>
    </a>
    <?php } ?>
    <?php the_content(); ?>
    <?php wp_link_pages(); ?>

    <hr>
</section> <!-- end article section -->

<footer class="article-footer">
<p class="tags"><?php the_tags('<span class="tags-title">Tags:</span> ', ', ', ''); ?></p>
</footer> <!-- end article footer -->

<?php // comments_template(); // uncomment if you want to use them ?>

</article> <!-- end article -->

<?php endwhile; ?>          

<?php else : ?>

<article id="post-not-found" class="hentry clearfix">
    <header class="article-header">
        <h1><?php _e("Oops, Post Not Found!", "bonestheme"); ?></h1>
    </header>
    <section class="entry-content">
    <p><?php _e("Uh Oh. Something is missing. Try double checking things.", "bonestheme"); ?></p>
    </section>
    <footer class="article-footer">
        <p><?php _e("This is the error message in the single-custom_type.php template.", "bonestheme"); ?></p>
    </footer>
</article>

<?php endif; ?>
[...] 
```

# ruby - Nokogiri 多个域

> ID：14688906
> 
> 赞同：0
> 
> 时间：2013-02-04T14:33:11.090
> 
> 标签：ruby, web-scraping, nokogiri

是否可以使用 Nokogiri 进行多域搜索。我知道您可以对单个域/页面进行多个 Xpath/CSS 搜索，但可以搜索多个域？

例如我想抓取[http://www.asus.com/Notebooks_Ultrabooks/S56CA/#specifications](http://www.asus.com/Notebooks_Ultrabooks/S56CA/#specifications)和[http://www.asus.com/Notebooks_Ultrabooks/ASUS_TAICHI_21/#specifications](http://www.asus.com/Notebooks_Ultrabooks/ASUS_TAICHI_21/#specifications)

**我的代码**

```
require 'nokogiri'
require 'open-uri'
require 'spreadsheet'

doc = Nokogiri::HTML(open("http://www.asus.com/Notebooks_Ultrabooks/ASUS_TAICHI_21/#specifications"))

#Grab our product specifications
data = doc.css('div#specifications div#spec-area ul.product-spec li')

#Modify our data
lines = data.map(&:text)

#Create the Spreadsheet
Spreadsheet.client_encoding = 'UTF-8'
book = Spreadsheet::Workbook.new

sheet1 = book.create_worksheet
sheet1.name = 'My First Worksheet'

#Output our data  to the Spreadsheet
lines.each.with_index do |line, i|                                                        
  sheet1[i, 0] = line                                                                     
end    

book.write 'C:/Users/Barry/Desktop/output.xls' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:52:17.403

Nokogiri 没有 URL 的概念，它只知道 XML 或 HTML 的字符串或 IO 流。您将 OpenURI 的目的与 Nokogiri 的目的混淆了。

如果您想从多个站点读取，只需遍历 URL，并将当前 URL 传递给 OpenURI 到`open`页面：

```
%w[
  http://www.asus.com/Notebooks_Ultrabooks/S56CA/#specifications 
  http://www.asus.com/Notebooks_Ultrabooks/ASUS_TAICHI_21/#specifications
].each do |url|

  doc = Nokogiri::HTML(open(url))
  # do somethng with the document...
end 
```

OpenURI 将读取页面，并将其内容传递给 Nokogiri 进行解析。Nokogiri 仍然一次只能看到一页，因为这就是 OpenURI 传递的全部内容。

# php - exif_imagetype() [function.exif-imagetype]:

> ID：14688911
> 
> 赞同：0
> 
> 时间：2013-02-04T14:33:21.870
> 
> 标签：php, file-upload, exif

大家好，使用 exif_imagetype() [function.exif-imagetype]：如果用户在未上传任何内容的情况下点击提交按钮，则用于检查图像的函数 exif 函数在网页本身中返回错误。我的问题是如何摆脱这个错误。我在下面粘贴错误

```
Warning: exif_imagetype() [function.exif-imagetype]: Filename cannot be empty in /mounted-    storage/home98a/sub009/sc61374-HGPS/sitakalyanam.com/newsita/php4upload.class.php on line 88 
```

```
 <?php
 /*

 - PHP4 Image upload script

  */

   class imageupload
   {
//pblic variables
var $path = '';
var $errorStr = '';
var $imgurl = '';

        //private variables
  var $_errors = array();
  var $_params = array();
  var $_lang = array();
  var $_maxsize = 1048576;

    var $_im_status = false;

    //public methods
    function imageupload ()
    {
        //require 'photouploadconfig.php';

 if($_GET['Choice']=="1")
  {             
  require 'Photouploddir1.php';
  }
  elseif ($_GET['Choice']=="2")
  {
  require 'Photouploddir2.php';
 }
 elseif ($_GET['Choice']=="3")
 {
 require 'Photouploddir3.php';
 }
 elseif ($_GET['horoschoice']=="1")
 {
require 'horosuploaddir.php';
}
elseif ($_GET['videoChoice']=="5")
{
require 'videouploaddir.php';
}  

        $this->_types = $types;
    $this->_lang = $lang;
        $this->_upload_dir = $upload_dir;
        $this->_maxsize = $maxsize;

        $this->path = $PHP_SELF;

        if (is_array($_FILES['__upload']))
        {
            $this->_params = $_FILES['__upload'];
            if (function_exists('exif_imagetype'))
                $this->_doSafeUpload();
            else
                $this->_doUpload();

            if (count($this->_errors) > 0)
                $this->_errorMsg();
        }
    }

    function allowTypes ()
    {
        $str = '';
        if (count($this->_types) > 0) {
            $str = 'Allowed types: (';
            $str .= implode(', ', $this->_types);
            $str .= ')';
        }

        return $str;
    }

    // private methods

    function _doSafeUpload ()
    {

         preg_match('/\.([a-zA-Z]+?)$/', $this->_params['name'], $matches);
          if (exif_imagetype($this->_params['tmp_name']) && in_a    rray(strtolower($matches[1]), $this->_types))
        {
            if ($this->_params['size'] > $this->_maxsize)
                $this->_errors[] = $this->_lang['E_SIZE'];
            else
                $this->_im_status = true;

            if ($this->_im_status == true)
            {
                $ext = substr($this->_params['name'], -4);
                $this->new_name = md5(time()).$ext;

                move_uploaded_file($this->_params['tmp_name'], $this->_up     load_dir.$this->new_name);

            $this->imgurl =$this->new_name;

            //$this->imgurl = .$this->new_name;

            }
        }
        else

        $this->_errors[] = $this->_lang['E_TYPE'];
    }

    function _doUpload ()
    {
        preg_match('/\.([a-zA-Z]+?)$/', $this->_params['name'], $matches);
        if(in_array(strtolower($matches[1]), $this->_types))
        {
            if ($this->_params['size'] > $this->_maxsize)
                $this->_errors[] = $this->_lang['E_SIZE'];
            else
                $this->_im_status = true;

            if ($this->_im_status == true)
            {
                $ext = substr($this->_params['name'], -3);
                $this->new_name = md5(time()).$ext;

                move_uploaded_file($this->_params['tmp_name'], $this-    >_upload_dir.$this->new_name);

                $this->imgurl = ''.$this->new_name;

        //$this->imgurl = ''.$this->_upload_dir.''.$this->new_name;
        //$this->imgurl = ''.$this->new_name;

                //$this->imgurl = $this->_upload_dir.'/'.$this->new_name;

            }
        }
        else
            $this->_errors[] = $this->_lang['E_TYPE'];
    }

    function _errorMsg()
    {

        $this->errorStr = implode('<br />', $this->_errors);
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T04:28:48.397

将您的代码更改为此代码，然后尝试

```
 if (isset($_FILES['__upload']))
    {
        $this->_params = $_FILES['__upload'];
        if (function_exists('exif_imagetype'))
            $this->_doSafeUpload();
        else
            $this->_doUpload();

        if (count($this->_errors) > 0)
            $this->_errorMsg();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:28:09.377

您收到该消息是因为您从不检查用户是否上传了文件，您只是假设他们是。当用户不上传文件时，`$_FILES`将是一个空数组。

这意味着`$this->_params['tmp_name']`它将不存在。您需要检查文件是否已上传，而不仅仅是假设已上传。

只需检查`$_FILES`.

```
if(count($_FILES) === 0){
    echo "no file uploaded";
} 
```

# sql - 识别关系的行没有排

> ID：14688916
> 
> 赞同：0
> 
> 时间：2013-02-04T14:33:31.403
> 
> 标签：sql, sqlite, indexing, row

我在 SQLite DB 中有一个关系。我有四列，没有 id 列。例如，我需要删除第 3 行。如何编写 SQL 查询以在许多其他行中识别第三行？最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:18:02.260

你不可以做这个。SQL 中的表本质上是无序的。因此，数据库没有“第三行”或第一行或最后一行的概念。

您需要修改表的结构以包含行号标识符。也许最简单的方法就是添加一个自动增量 ID。这是可行的，除非您希望数据库跟踪可能会更改排序的删除和更新。

您可以比较每个值，但如果数据中存在重复项，则会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:41:33.997

从表中删除 column1=.. and column2=.. and column3=.. and column4=..

使用 where 子句，您可以找到要删除的行女巫

# ios - 向 S3BucketLifecycleConfiguration 添加规则

> ID：14688930
> 
> 赞同：0
> 
> 时间：2013-02-04T14:34:00.903
> 
> 标签：ios, objective-c, amazon-web-services, amazon-s3

我正在尝试为我的存储桶设置一个新的到期日期，但是我很难将规则添加到存储桶中。这就是我得到的：

```
 S3BucketLifecycleConfigurationRule *testRule = [[S3BucketLifecycleConfigurationRule alloc] initWithId:@"My Rule" andPrefix:self.newRuleTextField.text andExpirationInDays:1 andStatus:@"ENABLE"]; 
```

在此之后我知道我需要将此规则添加到 S3BucketLifecycleConfiguration 实例，以便我最终可以调用请求方法，但我不知道如何将其添加到 S3BucketLifecycleConfiguration

```
 S3SetBucketLifecycleConfigurationRequest *setBucketLifecycleConfigurationRequest = [[S3SetBucketLifecycleConfigurationRequest alloc] initWithBucketName:self.bucketName withConfiguration:myConfig; 
```

提前谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:00:37.367

`S3BucketLifecycleConfiguration`有一个名为的属性`rules`，其中包含`S3BucketLifecycleConfigurationRule`s 的列表。以下应该有效：

```
S3BucketLifecycleConfiguration *myConfig = [S3BucketLifecycleConfiguration new];
myConfig.rules = [NSArray arrayWithObject:testRule]; 
```

# seam - 如何使用 Seam 为 Hibernate Validator 的方法验证自定义 Validator？

> ID：14688935
> 
> 赞同：0
> 
> 时间：2013-02-04T14:34:12.013
> 
> 标签：seam, hibernate-validator

我正在使用 Hibernate Validator 并添加了一些自定义验证注释、资源包位置和自定义消息插值器。这一切都是通过在引导时自定义验证器来完成的。

现在我正在尝试验证方法，但当然我没有得到配置良好的验证器，因为标准验证器是为`@AutoValidating`.

如何在 Seam Validation 中自定义 Validator？

* * *

以下是我创建验证器的方式：

```
public static javax.validation.Validator getBeanValidator(final Locale locale,
    final ResourceBundle... resourceBundles) {
  HibernateValidatorConfiguration configuration = Validation.byProvider(HibernateValidator.class).configure();
  FallbackResourceBundleLocator resourceBundleLocator = new FallbackResourceBundleLocator(
      configuration.getDefaultResourceBundleLocator(), resourceBundles);
  configuration.messageInterpolator(new FieldMessageInterpolator(locale, resourceBundleLocator));
  javax.validation.ValidatorFactory validatorFactory = configuration.buildValidatorFactory();
  return validatorFactory.getValidator();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:23:53.520

您可以尝试使用[META-INF/validation.xml](http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html_single/#d0e2218)配置默认验证器，这是 Seam Validation 使用的验证器。

或者，您可以根据Seam Validation 中的拦截器创建自己的拦截器，并使用您在此处配置的自定义[拦截](https://github.com/seam/validation/blob/develop/impl/src/main/java/org/jboss/seam/validation/ValidationInterceptor.java)器`Validator`。

# liferay - 如何从 WIKI for Power User 中删除配置选项？

> ID：14688937
> 
> 赞同：1
> 
> 时间：2013-02-04T14:34:22.040
> 
> 标签：liferay, liferay-6, liferay-ide

在我的 Liferay 站点中，高级用户正在获得更改配置选项的权限，例如；外观、配置和导出/导入选项。我不知道这是怎么回事。猜测是一些权限问题。但无法修复它。我没有对高级用户角色进行任何更改。我只想为高级用户隐藏此配置选项。

![图片上传到这里...请帮助..](../Images/be3251d565c5f17bb696c7f07f9f50e6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:32:36.300

该 portlet 是由该特定用户添加的。这样配置选项就来了。因此，如果我们不想授予该权限，则应由管理员添加 portlet。

# php - 性能和优化codeigniter

> ID：14688942
> 
> 赞同：0
> 
> 时间：2013-02-04T14:34:43.530
> 
> 标签：php, codeigniter, variable-assignment

我想知道这两种形式中哪一种在 Codeigniter 中更有效。在选项 1 中，数据数组被传递给所有视图。在选项 2 中，每个数据数组都有不同的名称，以免忘记每个视图的所有信息。我想假设选项 2 是正确的，我的意思是重命名每个数组，而不是在每个视图上花费不必要的信息。我对么？Codeigniter 是否重要？感谢您阅读帖子问候

选项1

```
public function alguna_funcion(){

       $data['datos1'] = $this->modelo->function1();
       $data['widget1'] = $this->load->view('widget1',$data,TRUE);
       $data['datos2'] = $this->modelo->function2();
       $data['widget2'] = $this->load->view('widget2',$data,TRUE);
       $data['datos3'] = $this->modelo->function3();
       $data['widget3'] = $this->load->view('widget3',$data,TRUE);
       $data['datos4'] = $this->modelo->function4();
       $data['widget4'] = $this->load->view('widget4',$data,TRUE);

       $this->load->view('home_view',$data);

   } 
```

选项 2

```
public function alguna_funcion(){

       $data1['datos1'] = $this->modelo->function1();
       $data['widget1'] = $this->load->view('widget1',$data1,TRUE);
       $data2['datos2'] = $this->modelo->function2();
       $data['widget2'] = $this->load->view('widget2',$data2,TRUE);
       $data3['datos3'] = $this->modelo->function3();
       $data['widget3'] = $this->load->view('widget3',$data3,TRUE);
       $data4['datos4'] = $this->modelo->function4();
       $data['widget4'] = $this->load->view('widget4',$data4,TRUE);

       $this->load->view('home_view',$data);

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:48:08.113

那么你可以这样做

```
public function alguna_funcion()
{
    $data['datos'] = $this->modelo->function1();
    $data['widget1'] = $this->load->view('widget1',$data,TRUE);
    unset($data['datos']);

    $data['datos'] = $this->modelo->function2();
    $data['widget2'] = $this->load->view('widget2',$data,TRUE);
    unset($data['datos']);

    $data['datos'] = $this->modelo->function3();
    $data['widget3'] = $this->load->view('widget3',$data,TRUE);
    unset($data['datos']);

    $data['datos'] = $this->modelo->function4();
    $data['widget4'] = $this->load->view('widget4',$data,TRUE);
    unset($data['datos']);

    // Now you have only widgets pass them to view
    $this->load->view('home_view',$data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:41:24.690

这不是 CodeIgniter 的错。只要 data_i 都相同，就可以通过所示的两种方式之一来访问它们的元素，然后后一种情况似乎是多余的。-

# mysql - SQL Query 从许多表中选择

> ID：14688943
> 
> 赞同：-2
> 
> 时间：2013-02-04T14:34:46.380
> 
> 标签：mysql, sql, database

我有 5 个这样的表：

*   **表 1：** PRIMARY_KEY,NAME,FK_TABLE2
*   **表 2：** PRIMARY_KEY、FK_TABLE3
*   **表 3：** PRIMARY_KEY、FK_TABLE4
*   **表 4：** PRIMARY_KEY、FK_TABLE5
*   **表 5：** PRIMARY_KEY、DIAGRAM_NAME

而我想要的是，当我在搜索栏中搜索名称时，它会`Name`从中返回`Table1`，也`DIAGRAM_NAME`从中返回`table 5`。第一部分很简单：

```
SELECT `TABLE1`.name 
from Table 1 
Where `TABLE1`.name LIKE '%$search%' 
```

但对于第二部分，我需要你的帮助......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:36:51.113

您需要考虑使用`JOIN`：

```
SELECT T.Name, T5.Diagram_Name
FROM Table1 T
   JOIN Table2 T2 ON T.FK_TABLE2 = T2.PRIMARY_KEY
   JOIN Table3 T3 ON T2.FK_TABLE3 = T3.PRIMARY_KEY
   JOIN Table4 T4 ON T3.FK_TABLE4 = T4.PRIMARY_KEY
   JOIN Table5 T5 ON T4.FK_TABLE5 = T5.PRIMARY_KEY
WHERE T.Name LIKE '%$search%' 
```

如果要返回没有匹配图表名称的名称，请`LEFT JOIN`改用。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:39:14.393

您将需要`JOIN`使用`Primary Key`和`FK`值的表：

```
select t1.name, t5.DIAGRAM_NAME
from table1 t1
left join table2 t2
    on t1.FK_TABLE2 = t2.PRIMARY_KEY
left join table3 t3
    on t2.FK_TABLE2 = t3.PRIMARY_KEY
left join table4 t4
    on t3.FK_TABLE3 = t4.PRIMARY_KEY
left join table5 t5
    on t4.FK_TABLE4 = t5.PRIMARY_KEY    
Where t1.name LIKE '%$search%' 
```

如果您在学习`JOIN`语法方面需要帮助，这里有一个很好[的 joins 可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

我在示例查询中使用了 a ，即使其余表中没有匹配的行`LEFT JOIN`，它也会返回所有行。`table1`

如果您知道要加入的所有表中都有匹配的行，那么您可以使用`INNER JOIN`.

# php - 使用 AJAX 将数据发送到 PHP 文件并使用该数据运行 PHP 脚本

> ID：14688946
> 
> 赞同：0
> 
> 时间：2013-02-04T14:34:50.433
> 
> 标签：php, ajax, forms, validation

我目前正在尝试使用 PHP 和 AJAX 进行实时表单验证。所以基本上 - 我需要通过 AJAX 将字段的值发送到 PHP 脚本（我可以这样做），然后我需要使用我发送的数据在该 PHP 文件中运行一个函数。我怎样才能做到这一点？

查询：

```
$.ajax({
  type: 'POST',
  url: 'validate.php',
  data: 'user=' + t.value,   //(t.value = this.value),
  cache: false,
  success: function(data) {
    someId.html(data);
  }
}); 
```

验证.php：

// 现在我需要使用我在这个函数中发送的“用户”值，我该怎么做？

```
function check_user($user) {
  //process the data
} 
```

如果我不使用函数，而只是在 validate.php 中使用原始 php，则数据会被发送并执行其中的代码，并且一切都按我喜欢的方式运行，但是如果我添加每个功能，我希望事情变得非常混乱，所以我更喜欢使用单独的函数.

我删除了很多与缩短无关的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:41:16.297

1）这看起来不太好

```
data: 'user=' + t.value,   //(t.value = this.value), 
```

这很好

```
data: {user: t.value}, 
```

2) 使用 $_POST

```
function check_user($user) {
    //process the data
}
check_user($_POST['user']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:39:44.560

您只需要在文件中调用该函数。

```
if(isset($_REQUEST['user'])){
    check_user($_REQUEST['user']);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T14:47:14.560

在您的 validate.php 中，您将收到经典的 POST 请求。您可以根据要测试的变量轻松调用该函数，如下所示：

```
<?php

if (isset($_POST['user'])) {
    $result = check_user($_POST['user']);
}
elseif (isset($_POST['email'])) {
    $result = check_email($_POST['email']);
}
elseif (...) {
    // ...
}

// returning validation result as JSON
echo json_encode(array("result" => $result));
exit();

function check_user($user) {
   //process the data
   return true; // or flase
}

function check_email($email) {
   //process the data
   return true; // or false
}

// ...
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T14:40:50.813

数据在`$_POST`全局变量中发送。您可以在调用 check_user 函数时访问它：

```
check_user($_POST['user']); 
```

但是，如果您这样做，请记住检查字段值，是否在其中没有发送恶意内容。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-04T14:42:02.380

这是我的做法

**jQuery 请求**

```
$.ajax({
            type: 'POST',
            url: "ajax/transferstation-lookup.php",
            data: {
                'supplier': $("select#usedsupplier").val(),
                'csl': $("#csl").val()
            },
            success: function(data){
                if (data["queryresult"]==true) {
                    //add returned html to page
                    $("#destinationtd").html(data["returnedhtml"]);
                } else {
                    jAlert('No waste destinations found for this supplier please select a different supplier', 'NO WASTE DESTINATIONS FOR SUPPLIER', function(result){ return false; });
                }
            },
            dataType: 'json'
        }); 
```

**PHP页面** 只需要2个输入

```
$supplier = mysqli_real_escape_string($db->mysqli,$_POST["supplier"]);
$clientservicelevel = mysqli_real_escape_string($db->mysqli,$_POST["csl"]); 
```

通过查询运行它们。现在，在我的情况下，我只返回存储在 json 数组中的原始 html，并带有一个检查标志，表示查询已经成功或失败，就像这样

```
$messages = array("queryresult"=>true,"returnedhtml"=>$html);
echo json_encode($messages); //encode and send message back to javascript 
```

如果您回顾我最初的 javascript，您会发现我对 queryresult 有条件，然后只需将原始 html 吐回到 div 中，您可以用它做任何您需要的事情。

# hibernate - 我应该在 setter 中使用 Hibernate Validator 进行验证吗？

> ID：14688948
> 
> 赞同：0
> 
> 时间：2013-02-04T14:35:02.537
> 
> 标签：hibernate, validation, annotations, setter, hibernate-validator

我了解应用程序的多个层都需要验证。但是，如果要施加的验证在所有层上都是相同的（大多数时候都是这种情况），那么使用通用的验证框架是有意义的。这是 Hibernate Validator 的目标之一。

为了确保对象的有效状态，我计划将验证放在实体的设置器中。此外，我在实体上放置了注释约束，以便 Hibernate 可以在持久化之前使用它们来验证实体对象。然后，与其编写我自己的验证（本质上检查与 Hibernate 注释相同的约束），我为什么不应该在 setter 中使用 Validator 实例来验证属性。我可以用`validator.validateProperty()`它。

但是，我担心的是性能。构建一个 ValidatorFactory 并在每个 setter 中获取一个验证器实例是一件昂贵的事情吗？还是我对性能考虑太多了？如果我不使用 Validator，那么我将选择 Apache Commons 库在 setter 中进行验证。

那么，哪种方式更好呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:10:49.123

您可能会看一下[方法级验证](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customoptions-methodvalidation)，它是自 4.2 以来的 Hibernate Validator 的一部分（并将成为 1.1 版的 Bean Validation API 的一部分），并允许在调用时自动验证参数值。这样你就可以根据你的架构使用 AOP、动态代理等来验证 setter 参数。

关于性能，您通常应该`ValidatorFactory`为您的应用程序只创建一个并缓存它。从同一工厂检索验证器通常是一项廉价的操作。当然实际成本取决于约束的类型和数量，因此您可以自己运行一些性能分析以查看是否有任何热点。

# asp.net - 有没有办法将模型、LINQ to SQL 类和数据库图结合起来？

> ID：14688956
> 
> 赞同：0
> 
> 时间：2013-02-04T14:35:29.613
> 
> 标签：asp.net, visual-studio

我正在创建一个轻量级数据库来租借电影。

我真的很喜欢 LINQ，所以想坚持下去。我的表单需要验证，因此这是一项要求（ComponentModel.DataAnnotations）。

是否有一个模型工具/模板/事物将它们结合在一起，让我有机会创建类，将它们生成到数据库（如 ADO.NET 实体数据模型），给我 LINQ（如 LINQ to SQL 类）和表单验证（让我实现 ComponentModel.DataAnnotations）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:42:33.240

只需使用实体框架 - 它支持您所需要的一切。查看[此 ScottGu 的文章](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)以获取更多信息。

# sitecore - Sitecore：部署期间的多列表

> ID：14688959
> 
> 赞同：1
> 
> 时间：2013-02-04T14:35:57.680
> 
> 标签：sitecore, sitecore6

如何在内容编辑器中启用多列表控制？例如，我有一个项目列表，从 item1 到 item10。在标准模板值中，我定义了 item1,2,3。部署解决方案后，如何让内容编辑器模式或页面编辑器模式的用户选择 item7、8、9 和 10？

而且，在我测试/渲染了多列表之后，只渲染了 RAW VALUES，是否有可能渲染项目名称，例如 item1？我需要自定义多列表吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T16:09:31.460

多列表控件应在内容编辑器中对用户直接可见，您无需执行任何其他操作。由于您在标准值中定义了一些项目，因此在首次创建该项目时将“预先选择”这些项目。然后，用户可以根据需要添加附加项目。

要允许用户从页面编辑器中选择值，您可以在 PageEdit 中[使用 Sitecore EditFrame](http://briancaos.wordpress.com/2011/11/28/using-sitecore-editframe-in-pageedit/)

该项目被呈现为原始值的原因是因为您需要获取该项目，然后迭代目标 ID。这里有[一个例子](http://learnsitecore.cmsuniverse.net/en/Developers/Articles/2009/06/ProgramaticallyItems.aspx)

```
//Get a multilist field from the current item
Sitecore.Data.Fields.MultilistField multilistField = Sitecore.Context.Item.Fields["myMultilistField"];
if (multilistField != null)
{
  //Iterate over all the selected items by using the property TargetIDs
  foreach (ID id in multilistField.TargetIDs)
  {
    Item targetItem = Sitecore.Context.Database.Items[id];
    litItemTitle = targetItem.DisplayName;
    // Do something with the target items
    // ...
  }
} 
```

您可以将以下内容用于转发器的数据源

```
Sitecore.Data.Fields.MultilistField multilistField = Sitecore.Context.Item.Fields["myMultilistField"];
Sitecore.Data.Items.Item[] items = multilistField.GetItems(); 
```

# git - git clone 通过http:// 不会克隆所有标签

> ID：14688960
> 
> 赞同：1
> 
> 时间：2013-02-04T14:36:01.590
> 
> 标签：git, http, ssh, tags, clone

当我执行 a`git clone http://<url-to-my-repo>/repo.git`时，并非存储库的所有标签都被复制。当我通过 克隆时`ssh://`，我*没有*这个问题。

我不知道这怎么可能。我确保`_www`运行为文件提供服务的 apache 进程的用户可以访问服务器上的所有裸仓库文件。

## 在服务器上

### 标签

```
bash-3.2# git tag
1.9
1.9.1
1.9.2
1.9.3
1.9.4
1.9.5
2.0
2.1
2.1.1
2.1.2
2.2
2.2.1
2.2.2
2.2.3
2.2.4
2.3
2.3.1
2.3.2
2.4.0
2.4.1
2.4.2
2.4.3
2.4.4 
```

### repo 的文件权限

```
bash-3.2# ls -alh
total 24
drwxr-x---   10 git  _www    340B Dec  3 12:12 .
drwxr-xr-x    9 git  staff   306B Feb  1 16:46 ..
-rwxrwxrwx    1 git  _www     23B Dec  3 12:12 HEAD
drwxrwxrwx    2 git  _www     68B Dec  3 12:12 branches
-rwxrwxrwx    1 git  _www    112B Dec  3 12:12 config
-rwxrwxrwx    1 git  _www     73B Dec  3 12:12 description
drwxrwxrwx   10 git  _www    340B Dec  3 12:12 hooks
drwxrwxrwx    4 git  _www    136B Jan  8 23:19 info
drwxrwxrwx  220 git  _www    7.3K Feb  1 23:14 objects
drwxrwxrwx    4 git  _www    136B Dec  3 12:12 refs 
```

## 克隆时

### 通过`http://`

```
/Library/WebServer/TrinchHosts/www master $ git tag
1.9
1.9.1
1.9.2
1.9.3
1.9.4
1.9.5
2.0
2.1
2.1.1
2.1.2
2.2
2.2.1
2.2.2
2.2.3
2.2.4
2.3
2.3.1
2.3.2
2.4.0
2.4.1
2.4.2 
```

### 通过`ssh://`

```
/Library/WebServer/TrinchHosts/www master $ git tag
1.9
1.9.1
1.9.2
1.9.3
1.9.4
1.9.5
2.0
2.1
2.1.1
2.1.2
2.2
2.2.1
2.2.2
2.2.3
2.2.4
2.3
2.3.1
2.3.2
2.4.0
2.4.1
2.4.2
2.4.3
2.4.4 
```

我不知道为什么当我通过克隆 repo 时没有复制`2.4.3`和标签`2.4.4``http://`

有什么帮助或想法吗？可能是什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:50:16.770

检查您的服务器存储库中是否启用了 post-update 挂钩，该挂钩调用 update-server-info 来记录 http 哑服务器可能遗漏的一些细节。有关这方面的一些详细信息，请参阅[手册页](http://www.kernel.org/pub/software/scm/git/docs/git-update-server-info.html)。

# unsigned - 将 16 位有符号 PCM 转换为无符号 16 位

> ID：14688964
> 
> 赞同：1
> 
> 时间：2013-02-04T14:36:05.373
> 
> 标签：unsigned, signed, pcm

我有一个音频波形文件 (*.wav)，并且音频数据格式为有符号 16 位（从 -32767 到 +32768）。我想将它们转换为无符号 16 位（从 0 到 +65535）。是否有一些想法如何使用大胆，sox 或任何其他 otol 来做到这一点？甚至欢迎交流程序。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T14:37:09.817

将 32768 添加到每个样本中。请注意，这相当于反转每个样本的 MSB（最高有效位）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T06:17:13.933

在 Audacity 中尝试使用 export 命令。（文件 - 导出）

# google-drive-api - 使用 Documents List API 会导致文件出现在更改列表中吗？

> ID：14688966
> 
> 赞同：1
> 
> 时间：2013-02-04T14:36:11.660
> 
> 标签：google-drive-api, google-docs-api

我的应用程序当前正在使用文档列表 API 来使用 Changelist 跟踪文件和元数据更改。当我们发现文件发生了变化时，我们会抓取元数据、acl 信息和实际文件。最近我们发现，每次我们检查时，都会有一定比例的文件不断出现在更改列表中。

经过一番调查，文件中几乎没有元数据发生变化。以下是来自两个不同文件的示例，这些文件不断出现在更改列表中。

无论如何我可以避免一遍又一遍地看到这些文件吗？我已经进行了部分优化，不再下载文件，但是从变更列表中清除误报仍然需要额外的开销。有谁知道更新我的应用程序以使用 Drive API 是否可以解决此问题？

这是我所看到的示例：

文件 1 - 通过文档列表 API 初始信息

> 条目：etag=\""CkcaSU1LASt7ImBk"\"
> 
> id:...feeds/id/电子表格%3A0AgVqS9FfzZOCdGhZSVZ4UEtyT2tmRnZsR3lGNFBrVWc
> 
> ```
>  published:2010-12-13T01:58:22.467Z
> 
>  updated:2010-12-13T02:03:22.269Z 
> ```
> 
> ...
> 
> 链接：rel=\"缩略图\" type=\"image/jpeg\" href=...?id=0AgVqS9FfzZOCdGhZSVZ4UEtyT2tmRnZsR3lGNFBrVWc&v=1&s=AMedNnoAAAAAUQHGlnP_b5jppjlFLN9OHRY5VSP2KZNR&sz=s220\"
> 
> ...
> 
> /入口

下次我查看更改列表时

> 条目 etag=\""CkUFR0sIQyt7ImBk"\" id:...feeds/id/spreadsheet%3A0AgVqS9FfzZOCdGhZSVZ4UEtyT2tmRnZsR3lGNFBrVWc
> 
> ```
>  published:2010-12-13T01:58:22.467Z
> 
>  updated:2010-12-13T02:03:22.269Z 
> ```
> 
> ...链接：rel=\"缩略图\" type=\"image/jpeg\" href=\"...?id=0AgVqS9FfzZOCdGhZSVZ4UEtyT2tmRnZsR3lGNFBrVWc&v=1&s=AMedNnoAAAAAUQMH4STQC7QSN1CJivPIl0U5KvMD8eKe&sz=s220\"
> 
> ...
> 
> /入口

唯一的区别是 etag、更新时间和缩略图。文件本身根本没有改变。

文件 2 - 我使用 API 资源管理器获取的此信息（使用 DriveAPI 2 changes.get）

> {
> 
> ```
>  "kind": "drive#change",
> 
> "id": "21012",
> 
>  "fileId": "0AgVqS9FfzZOCdGQyQUNjWkF0alVpNGd0WXNLMnpNU2c", 
> ```
> 
> ...
> 
> ```
>  "thumbnailLink": ".../feeds/vt?gd=true&id=0AgVqS9FfzZOCdGQyQUNjWkF0alVpNGd0WXNLMnpNU2c&v=1&s=AMedNnoAAAAAUQlhSo3rF73K5WnN7E0qSR0uMhWEqM-t&sz=s220", 
> ```
> 
> ...
> 
> }

从 Documents List API 抓取更改，然后再次检查更改列表。

> {
> 
> ```
> "kind": "drive#change",
> 
> "id": "21013",
> 
> "fileId": "0AgVqS9FfzZOCdGQyQUNjWkF0alVpNGd0WXNLMnpNU2c", 
> ```
> 
> ...
> 
> ```
>  "thumbnailLink": ".../feeds/vt?gd=true&id=0AgVqS9FfzZOCdGQyQUNjWkF0alVpNGd0WXNLMnpNU2c&v=1&s=AMedNnoAAAAAUQlh69m8ZG_MzNujmmu80HN9XJ2jpG61&sz=s220", 
> ```
> 
> ...
> 
> }

在这种情况下，缩略图链接再次发生了变化，并且不再有 id 21012 的变化。

# php - Jquery 可排序小部件

> ID：14688967
> 
> 赞同：0
> 
> 时间：2013-02-04T14:36:14.313
> 
> 标签：php, jquery, jquery-ui-sortable

我有一个框，里面有几个基于表 ID 的条目：

```
 <ul id="sortable">
 <?php do { ?> <li class="ui-state-default" id="<?php echo $row_Recordset1['entry']; ?>">
     <?php echo $row_Recordset1['PartNo']; ?></li>
 <?php } while ($row_Recordset1 = mysql_fetch_assoc($Recordset1)); ?> 
```

我已经定义了可排序的 jQuery：

```
 $(function() { 
   $( "#sortable" ).sortable();
 });
 var newp = $("#sortable" ).sortable('toArray'); 
```

而我想要做的只是将这个数组传递到数据库记录过程中的下一页：

```
window.location.href = "quotations_build_itemsorder2.php?newp[]="+newp; 
```

我不断得到一个空数组。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:47:47.320

看一下[sortable("serialize")](http://api.jqueryui.com/sortable/#method-serialize)方法：

```
var newp = $("#sortable").sortable( "serialize" ) 
```

您必须根据序列化方法所需的格式重命名列表项的 ID（请参阅文档）。像这样：

```
<?php do { ?> <li class="ui-state-default" id="sort_<?php echo $row_Recordset1['entry']; ?>"> 
```

编辑：也看看这个[jsfiddle 例子](http://jsfiddle.net/jStWW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:43:13.130

由于`newp`已经是一个数组，因此您不会将其传递为`newp[]`，而只是`newp`.

此外，`toArray`返回一个数组（大概），而不是一个字符串。您不能将其连接到字符串。处理此问题的最简单方法是将其转换为 JSON：

```
"...?newp=" + JSON.stringify(newp) 
```

然后您可以使用`json_decode`在 PHP 端获取您的数组。

# javascript - 动画一个 - 停止另一个 | jQuery

> ID：14688971
> 
> 赞同：1
> 
> 时间：2013-02-04T14:36:29.613
> 
> 标签：javascript, jquery, html, css

我不知道我做错了什么，但没有什么是正确的。基本上它工作得很好，但是如果我将鼠标悬停在另一个列表项上，它会启动动画并且前一个仍然存在。

这是JS部分...

```
$('nav#topMenu li').on('mouseenter mouseleave', function(e) {
    if(e.type === 'mouseenter') {
        $(this).append('<span class="active"></span>');
        $('span.active').stop().slideDown('200');
    } else {
        $('span.active').stop().slideUp('200', function() {
            $(this).remove();
        });
    }
}); 
```

这是 JS 小提琴： [JS 小提琴重定向](http://jsfiddle.net/HL7Aj/)

对不起那个丑陋的悬停背景颜色......我不知道虽然我做错了什么......似乎一切都错了！任何解决方案表示赞赏。谢谢你。

**编辑：** 似乎我也在每次悬停时附加该跨度，即使它已经附加到列表项。天啊 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:40:54.647

发生这种情况是因为两个 span 仍然有 class `active`。首先`mouseleave`发生，但会在*两个*跨度上`mouseenter`触发。`.stop().slideDown()`

 *有几种可能的解决方案，但我认为一个只是`.removeClass('active')`在跨度上使用（可能添加另一个具有相同样式的类）。这将导致它一直向上滑动，而真正的活动跨度向下滑动：

[http://jsfiddle.net/ExplosionPIlls/HL7Aj/1/](http://jsfiddle.net/ExplosionPIlls/HL7Aj/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:44:46.960

检查动画是否完成`.is(":animated")`。由于`$('span.active')`选择了`active`该类的所有元素，因此当您在元素上移动光标时，您可以有效地停止所有元素上的动画。您应该在这些元素不执行任何现有动画的情况下对这些元素应用进一步的动画。

见[演示](http://jsfiddle.net/5ggGL/)。

```
$(function () {
    $('nav#topMenu li').on('mouseenter mouseleave', function(e) {
        if(e.type === 'mouseenter') {
            $(this).append('<span class="active"></span>');
            $('span.active').each(function() {
                if (!$(this).is(":animated")) {
                    $(this).stop().slideDown('200');
                }
            });
        } else {
            $('span.active').stop().slideUp('200', function() {
                    $(this).remove();
            });
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:47:06.550

我想更换

> $('span.active').stop()

和

> $(this).find('span.active').stop()

可以帮助你。*

# android - 如何在android上从浏览器打开应用程序

> ID：14688972
> 
> 赞同：0
> 
> 时间：2013-02-04T14:36:31.330
> 
> 标签：android

我想通过手机点击某些网站上的按钮或图像来调用 android 应用程序。假设我在 android 浏览器上打开一个图像或 url，并且我想在单击该站点提供的按钮时调用另一个应用程序。怎么做？？

我是博主，当我的读者点击 Google Play 徽章图片时，我想从浏览器打开 Play 商店应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:44:17.797

可以从 WebView 启动应用程序：
[Android SDK WebView call Activity](https://stackoverflow.com/questions/4846296/android-sdk-webview-call-activity)
[http://developer.android.com/guide/webapps/webview.html#BindingJavaScript](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)

**但不可能从常规网络浏览器发送意图。**

编辑：

如果您需要打开 Google Play，只需使用带有 Google Play 上应用程序 url 的常规 html a href。

PS：看看这个有用的线程[在Android浏览器中创建一个链接启动我的应用程序？](https://stackoverflow.com/questions/3469908/make-a-link-in-the-android-browser-start-up-my-app)

# mysql - SQL - 如何连接其中一列

> ID：14688973
> 
> 赞同：-1
> 
> 时间：2013-02-04T14:36:36.960
> 
> 标签：mysql, sql

> **可能重复：**
> [将多行连接成一个文本字符串？](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

我的 SQL：我有一个包含 3 列的表：

```
╔═════╦═════╦════════╗
║ ID1 ║ ID2 ║ ANSWER ║
╠═════╬═════╬════════╣
║   1 ║   2 ║      4 ║
║   1 ║   2 ║      5 ║
║   1 ║   4 ║      8 ║
╚═════╩═════╩════════╝ 
```

我想要一个看起来像这样的表：

```
╔═════╦═════╦════════╗
║ ID1 ║ ID2 ║ ANSWER ║
╠═════╬═════╬════════╣
║   1 ║   2 ║ 4 + 5  ║
║   1 ║   4 ║ 8      ║
╚═════╩═════╩════════╝ 
```

含义：如果我对 id1&id2 有不同的答案，我希望它们与某个分隔符排成一行（可以是 + 或其他东西），并且每对 id1、id2 只有一行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:43:07.420

在 MySQL 中，您可以使用[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)带有 a 的函数`GROUP BY`来获取`Answer`连接到同一行的值：

```
select id1,
  id2,
  group_concat(answer SEPARATOR ' + ') as Answer
from yourtable
group by id1,  id2 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/170a6/3)。

这会产生结果：

```
| ID1 | ID2 | ANSWER |
----------------------
|   1 |   2 |  4 + 5 |
|   1 |   4 |      8 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:43:36.580

既然你现在提到你正在使用`MySQL`，你可以利用`GROUP_CONCAT`.

```
SELECT ID1, ID2, GROUP_CONCAT(Answer SEPARATOR ' + ') AnswerList
FROM tableName
GROUP BY ID1, ID2 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/8f1bb/4)
*   [GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

# android - Android 在不丢失图像清晰度的情况下调整 ImageButton 的大小

> ID：14688976
> 
> 赞同：0
> 
> 时间：2013-02-04T14:36:39.237
> 
> 标签：android, android-layout, imagebutton

我在相对布局中添加了一个 ImageButton，我的 xml 代码是

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".HomePageActivity" >

<ImageButton
    android:id="@+id/imageButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="132dp"
    android:background="@null"
    android:scaleType="fitXY"
    android:src="@drawable/book" />

</RelativeLayout> 
```

由于宽度和高度是 wrap_content 的日志，因此图像很清晰，但是当我指定更大的宽度和高度时，例如：

```
android:layout_width="80dp"
android:layout_height="80dp" 
```

然后，在 AVD 上运行时，图像按钮会失去清晰度。有什么解决办法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:51:03.680

默认情况下`ImageView`/`ImageButton`将缩放图像以适合中心。

您可以使用`android:scaleType = "center"`. 这将使图像保持其原始大小并保持居中。

如果图像不是对象的图片，而只是一个矩形，则将其转换为 9-patch 可绘制对象。

# visual-studio-2010 - VS 2010 安装项目不会删除以前的版本

> ID：14688980
> 
> 赞同：4
> 
> 时间：2013-02-04T14:36:59.020
> 
> 标签：visual-studio-2010, visual-studio-setup-proje

我正在使用 VS 2010 中的安装项目来安装我创建的 Windows 窗体应用程序。安装项目运行良好，但是，如果我更新应用程序并更改安装项目的版本号和升级代码，当安装项目再次运行时，它不会更新用户机器上的应用程序。它将通过安装步骤并说安装成功，但是，用户计算机上的应用程序仍然完全相同，而不是较新的版本。奇怪的是，如果您再次运行安装项目，则会出现一个错误，提示此版本的应用程序已安装，您必须使用添加/删除程序删除当前版本才能继续安装。以前有没有其他人遇到过这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T17:30:32.250

您不应该更改`UpgradeCode`属性，这将产生您所看到的效果：

> 警告
> 
> 只应为第一个版本设置UpgradeCode **；**它不应该针对应用程序的后续版本进行更改，也不应该针对不同的语言版本进行更改。更改此属性将使**DetectNewerInstalledVersion**和**RemovePreviousVersions**属性无法正常工作。

（通过[https://wayback.archive.org/web/20121029130031/https://msdn.microsoft.com/en-us/library/465253cd(v=vs.100).aspx](https://wayback.archive.org/web/20121029130031/https://msdn.microsoft.com/en-us/library/465253cd(v=vs.100).aspx)）

假设您要删除旧版本并将其替换为新版本（而不是将它们并排安装，这实际上是您正在做的），您应该更改`Version`（MSI 和文件（ s) 正在更新) 和`ProductCode`(MSI) 并设置[`RemovePreviousVersions`](https://wayback.archive.org/web/20170730093353/https://msdn.microsoft.com/en-us/library/y63fxdw6(v=vs.100).aspx)为`True`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-17T17:11:27.457

我遇到了同样的问题。
我决定改变这四个。
（我使用了 Visual Studio Community 2019）

[设置项目]
・版本

[.Net 项目]
・Assembly 版本
・Assembly 文件版本
・GUID

[![更改装配信息](../Images/a4d96feb38ad3984d8251b6b0136e2ef.png)](https://i.stack.imgur.com/3YGtu.png)

# php - 试图在 wordpress / php 脚本中捕获 IP 地址

> ID：14688989
> 
> 赞同：-1
> 
> 时间：2013-02-04T14:37:20.270
> 
> 标签：php, wordpress, ip

我想跟踪访问我网站的 IP 地址，因为它有助于确定我应该托管哪些内容。

我真的不是程序员，所以我一直在寻找预先构建的解决方案。

我找到了这个脚本：

```
<?php
$LogFileLocation = "/public_html/cms/iplog.txt";
$fh = fopen($_SERVER['DOCUMENT_ROOT'].$LogFileLocation,'at');
fwrite($fh,date('dMy    H:i:s')."\t".$_SERVER['REMOTE_ADDR']."\t".$_SERVER['REQUEST_URI']."\n");
fclose($fh);
?> 
```

但是，当我创建 iplog.txt 并浏览到它时，什么也没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:33:29.910

如果您只需要访问您网站的统计信息，为什么不使用 Google Analitics ( [http://www.google.com/analytics/](http://www.google.com/analytics/) )？它提供了有关如何跟踪对网站的访问的完整信息。您的方法只为您提供带有日期、用户 IP 和用户访问页面的文本文件；但如果你不是程序员，你不会对这些信息进行排序和操作这些数据。如果您仍然决定使用存储信息的方法并且不想使用 Google Analitics，则将有关用户和访问过的页面的数据保存在数据库中的特殊创建表（id、date、ip、uri）中。此方法将允许显示日期统计、ip 和单页统计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T08:16:15.427

您可以使用以下代码捕获访问者的 IP。 `$ip=$_SERVER['REMOTE_ADDR'];`

现在您可以将其存储在您的数据库中。为此，您必须在存储 IP 地址的数据库表中创建一个列。除了 IP 地址，您还可以在数据库中存储许多其他信息，以跟踪用户，例如时间戳、持续时间、页面访问量等。有许多可用的工具，如 Google Analytic 和其他免费为您提供此类服务的工具，但它们没有'不要将记录存储在您网站的数据库中。所以据此选择。

# sql - 记录不同种类的 INSERT 语句

> ID：14688993
> 
> 赞同：2
> 
> 时间：2013-02-04T14:37:46.250
> 
> 标签：sql, sql-server, tsql

SQL中的表插入数据有四种：

```
INSERT INTO TableName (ColumnList) VALUES (ValuesList)

INSERT INTO TableName (ColumnList) SELECT Columns FROM OtherTable

INSERT INTO TableName (ColumnList) EXEC SomeProc

SELECT Columns INTO TableName FROM OtherTable 
```

每个 INSERT 语句都记录在事务日志中，我的问题是哪种 INSERT 的日志记录最少？

根据性能，使用顺序是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:15:59.313

[数据加载性能指南](http://msdn.microsoft.com/en-us/library/dd425070%28v=sql.100%29.aspx)对最少记录的操作进行了很好的总结：

> 为了支持大容量数据加载方案，SQL Server 实现了最少记录的操作。与使用事务日志跟踪每行更改的完全记录操作不同，最少记录操作仅跟踪范围分配和元数据更改。因为在事务日志中跟踪的信息要少得多，所以如果日志记录是瓶颈，则最少记录的操作通常比完全记录的操作快。此外，由于事务日志的写入更少，因此具有更轻 I/O 要求的更小日志文件变得可行。

在您提供的不同类型的插入语句中，有两种可以归类为批量加载操作，如果满足其他先决条件，它们有*机会*被最低限度地记录：

> *   `INSERT ... SELECT`– 从本地查询或任何 OLE DB 源使用 SQL Server 在进程中执行批量加载的方法。此方法仅在 SQL Server 2008 中作为最小记录操作可用。
> *   `SELECT INTO`– 创建包含查询结果的新表的方法；利用批量加载优化。

但是，请注意，需要满足一些先决条件和条件才能最小化记录这些批量加载操作之一......

*   [在Bulk-Logged](http://msdn.microsoft.com/en-us/library/ms190692%28v=sql.100%29.aspx)或[Simple](http://msdn.microsoft.com/en-us/library/ms191164%28v=sql.100%29.aspx)恢复模式下运行数据库
*   [如果您正在运行 Sql Server 2008 或更高版本，则启用跟踪标志 610](http://blogs.msdn.com/b/sqlserverstorageengine/archive/2008/10/24/new-update-on-minimal-logging-for-sql-server-2008.aspx)
*   表是否有聚集索引
*   表是否为空
*   甚至*优化器选择的执行计划*

如果您满足这些条件，那么您可能会通过执行`insert`文章中所述的批量记录来获得更好的性能...

但是同样，发生这种情况的先决条件非常复杂，所以我建议在创建/更改命令之前阅读这篇文章，并期望它们将被最小化记录。

编辑：

一个澄清......请注意，它是相关的目标数据库的恢复模型。例如，如果您要从具有完整恢复模型的数据库中的表中插入临时表...由于临时表位于`tempdb`具有简单恢复模型的 中，因此插入临时表是一个很好的候选者被写成一个大容量记录的操作，以便最小化记录。

# java - Java for 循环性能

> ID：14688996
> 
> 赞同：6
> 
> 时间：2013-02-04T14:37:59.600
> 
> 标签：java, performance

for循环中什么更好

这：

```
for(int i = 0; i<someMethod(); i++)
{//some code
 } 
```

或者：

```
int a = someMethod();
for(int i = 0; i<a; i++)
{//some code
 } 
```

让我们说**someMethod()**返回一些大的东西。

第一种方法将在每个循环中执行**someMethod()**从而降低速度，第二种方法更快，但是假设应用程序中有很多类似的循环，因此声明**变量**vill 会消耗更多内存。

那么什么更好，或者我只是在愚蠢地思考。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T14:39:40.780

第二个更好——假设`someMethod()`没有[*副作用*](http://en.wikipedia.org/wiki/Side_effect_%28computer_science%29)。
它实际上缓存了由`someMethod()`- 计算的值，因此您不必重新计算它（假设它是一个相对扩展的操作）。

如果确实如此（有副作用）——**这两个代码快照是不等价的**——你应该做**正确**的事情。

关于“变量 a 的大小” - 无论如何这都不是问题，在计算之前无论如何都**需要将返回的****值`someMethod()`**存储在某个中间临时变量中（即使不是这种情况，一个整数的大小也可以忽略不计）。

PS
在某些情况下，编译器/JIT 优化器可能会将第一个代码优化为第二个，当然前提是没有副作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T14:39:47.617

如有疑问，请测试。使用分析器。措施。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-04T14:40:06.167

假设迭代顺序不相关，并且假设您真的想对代码进行纳米优化，您可以这样做：

```
for (int i=someMethod(); i-->0;) {
  //some code
} 
```

但是一个额外的局部变量（你的`a`）并不是这样的负担。实际上，这与您的第二个版本没有太大区别。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-04T14:46:09.050

如果循环后不需要这个变量，有一种简单的方法可以将它隐藏在里面：

```
for (int count = someMethod (), i = 0; i < count; i++)
{
    // some code
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-04T14:44:02.123

这实际上取决于生成 someMethod() 的输出需要多长时间。内存使用量也是一样的，因为 someMethod() 首先必须生成输出并存储它。第二种方法可以保护您的 cpu 在每个循环中计算相同的输出，并且它不应该占用更多内存。所以第二个更好。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-04T14:45:11.537

我不会认为变量 a 的内存消耗是一个问题，因为它是一个 int 并且在 64 位机器上需要 192 位。所以我更喜欢第二种选择，因为它的执行效率更好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-06T08:15:11.800

关于循环优化最重要的部分是允许 JVM 展开循环。要在第一个变体中这样做，它必须能够内联对`someMethod()`. 内联有一些预算，它可能会在某个时候被破坏。如果 someMethod() 足够长，JVM 可能会决定它不喜欢内联。

第二个变体更有帮助（对 JIT 编译器）并且可能工作得更好。

我放下循环的方法是： `for (int i=0, max=someMethod(); i<max; i++){...}`

`max`不会污染代码，您可以确保多次调用 someMethod() 没有副作用，并且它很紧凑（单衬里）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-04T14:55:49.963

如果您需要对此进行优化，那么这是干净/明显的方法：

```
int a = someMethod();
for (int i = 0; i < a; i++) {
    //some code
} 
```

@dystroy 建议的替代版本

```
for (int i=someMethod(); i-->0;) {
    //some code
} 
```

...有三个问题。

*   他正在向相反的方向迭代。

*   该迭代是非惯用的，因此可读性较差。特别是如果您忽略 Java 样式指南并且不要将空格放在您应该放置的位置。

*   没有证据表明代码实际上会比更惯用的版本更快……尤其是在 JIT 编译器对它们都进行了优化之后。（即使可读性较低的版本更快，差异也可能可以忽略不计。）

另一方面，如果`someMethod()`很昂贵（如您所假设的），那么“提升”呼叫以使其仅执行一次可能是值得的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-14T08:50:59.103

我对此有点困惑，并对其进行了健全性测试，其中包含 10,000,000 个整数的列表。差异超过两秒，后者更快：

`int a = someMethod(); for(int i = 0; i<a; i++) {//some code }`

我在 Java 8（MacBook Pro，2.2 GHz Intel Core i7）上的结果是：

使用列表对象：开始 - 1565772380899，结束 - 1565772381632

'for' 表达式中的调用列表：开始 - 1565772381633，结束 - 1565772384888

# r - R中的非线性回归显示错误

> ID：14688997
> 
> 赞同：2
> 
> 时间：2013-02-04T14:38:00.483
> 
> 标签：r, nonlinear-optimization

我正在使用`nlsLM`包中的 R 函数，`minpack.LM` 但出现以下错误。

我用噪声生成自己的信号，所以我知道所有参数，我试图使用相同的函数进行回归分析，我曾经用来生成信号。

问题是，该`nlsLM`函数运行良好，它甚至可以找到正确的参数值，但最后，当它找到它们时，错误出现如下：

它。23，RSS = 14.4698，标准杆。= 42.6727 0.78112 1 65.2211 15.6065 1

它。24，RSS = 14.4698，标准杆。= 42.671 0.781102 1 65.2212 15.6069 1

**stats:::nlsModel(formula, mf, start, wts) 中的错误：初始参数估计处的奇异梯度矩阵**

我不知道该怎么办。请解释它可能是什么，以及我如何解决它！

附加信息：

```
#This is how i generate my signal (it is convolution of gaussian with exp(-kt)

set.seed(100)

Yexp=sim_str_exp(error=10)

time=Yexp[[1]]

y=Yexp[[2]]

dataset_nls=data.frame(time,y)

start=c(tau1=.5,beta1=.5,exp_A1=.5,gaus_pos=.5,gaus_width=.5,gaus_A=0.5)

lower=c(tau1=0.01,beta1=0.01,exp_A1=0.01,gaus_pos=0.01,gaus_width=0.01,gaus_A=0.01)

upper=c(tau1=100,beta1=1,exp_A1=1,gaus_pos=100,gaus_width=850,gaus_A=1)

#here i do fitting

FIT=nlsLM(y ~ str_exp_model(time,tau1,beta1,exp_A1,gaus_pos,gaus_width,gaus_A),data=dataset_nls,start=start,lower=lower,upper=upper,trace=TRUE,algorithm="LM",na.action=na.pass,control=nls.lm.control(maxiter=200,nprint=1))

#Model_function

str_exp_model<-function(time, tau1,beta1,exp_A1,gaus_pos,gaus_width,gaus_A){
F_gen_V<-vector(length=length(time))

F_gaus_V=vector(length=length(time))
F_exp_V=vector(length=length(time))
for (i in 1:length(time)) {
F_gaus_V[i]=gaus_A*exp(-2.77*((i-gaus_pos)/gaus_width)^2)
F_exp_V[i]=exp_A1*exp(-1*(i/tau1)^beta1)
}

convolve(F_gaus_V, F_exp_V,FALSE)
} 
```

# 信号生成功能

```
sim_str_exp<- function(num_points=512,time_scale=512,tau1=45,beta1=.80,exp_A1=1,gaus_pos=65, 
```

gaus_width=15, gaus_A=1,Y0=0, error=2.0, show_graph=TRUE, norm="False"){

```
F_gen_V<-vector(length=num_points)
time_gen_V<-vector(length=num_points)
F_gaus_V=vector(length=num_points)
F_exp_V=vector(length=num_points)
ts=time_scale/num_points
sigma=vector(length=num_points)

for (i in 1:num_points) {
F_gaus_V[i]=gaus_A*exp(-2.77*((i*ts-gaus_pos)/gaus_width)^2)
F_exp_V[i]=exp_A1*exp(-1*(i*ts/tau1)^beta1)
time_gen_V[i]=i*ts
}

F_gen_V<-(convolve(F_gaus_V, F_exp_V,FALSE))+Y0

if(norm==TRUE){
F_gen_V=F_gen_V/max(F_gen_V)}
else{;}

error_V=runif(512,-1*error, error)

for(i in 1:num_points){
F_gen_V[i]=error_V[i]/100*F_gen_V[i]+F_gen_V[i]
sigma[i]=(error_V[i]/100*F_gen_V[i])
}

RETURN=list(time=time_gen_V,y=F_gen_V,sigma=sigma)

if (show_graph==TRUE){
plot(RETURN[[1]],RETURN[[2]], type="l", main="Generated signal with noise",xlab="time,        pixel",ylab="Intensity");}
else {;}

return(RETURN)

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:51:53.930

你还没有向我们展示`sim_str_exp`，所以这个例子不是完全可重现的，但我会在这里猜测一下。你说“我用噪声生成我自己的信号”，但你用`Yexp=sim_str_exp(error=0)`它来生成数据，所以看起来你实际上并没有添加任何噪声。（另外，您在最后一步报告的 RSS 是`1.37e-28`...）

我的猜测是您遇到了 中记录的问题`?nls`，即`nls()`当噪声为零时效果不佳。这*没有*记录在 中`?nlsLM`，但如果它也保留在那里，我不会感到惊讶。

为方便起见，这是我所指的部分`?nls`：

> *不要在人工“零残差”数据上使用“nls”。*
> 
> ```
>  The ‘nls’ function uses a relative-offset convergence criterion
>  that compares the numerical imprecision at the current parameter
>  estimates to the residual sum-of-squares.  This performs well on
>  data of the form
> 
>                         y = f(x, theta) + eps                       
> 
>  (with ‘var(eps) > 0’).  It fails to indicate convergence on data
>  of the form
> 
>                            y = f(x, theta)                          
> 
>  because the criterion amounts to comparing two components of the
>  round-off error.  If you wish to test ‘nls’ on artificial data
>  please add a noise component, as shown in the example below. 
> ```

如果我的假设是正确的，那么如果您将噪声幅度设置为大于零，那么您应该能够没有错误地进行拟合。

# c# - 如何在 C# 应用程序中将结果从一个数据库插入另一个数据库

> ID：14688998
> 
> 赞同：1
> 
> 时间：2013-02-04T14:38:01.717
> 
> 标签：c#, sql

如何连接来自一个数据库的查询结果并将其插入 ac# 应用程序中的另一个？

这是我到目前为止所拥有的，但它不起作用。

```
// select from first database
string sCMD_All = "SELECT * FROM table";
SqlDataAdapter da = new SqlDataAdapter();
DataSet ds = new DataSet();

using (SqlConnection myConn = new SqlConnection(ConnectionString))
{
    using (SqlCommand myCommand = new SqlCommand(sCMD_All, myConn))
    {
        myConn.Open();
        SqlDataReader reader = myCommand.ExecuteReader();
        da.Fill(ds);
        myConn.Close();
    }
}
DataTable sqTable = ds.Tables[0];

//insert into 2nd database
DataTable newTable = new DataTable();
newTable = sqTable;
using (SqlConnection myConn = new SqlConnection(ConnectionString_M))
{
    string sCMD_I = "INSERT INTO tableNew @newTable";

    using (SqlCommand myCommand = new SqlCommand(sCMD_I, myConn))
    {
        myConn.Open();
        SqlDataReader reader = myCommand.ExecuteReader();
        myConn.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:41:16.510

```
var commandText = 
    @"insert into [server].[database2].[schema].[table] (col1, col2, ...)
    select col1, col2, ... from [server].[database1].[schema].[table]";

using (var connection = new SqlConnection(connectionString))
{
    using (var command = new SqlCommand(commandText, connection))
    {
        connection.Open();
        command.ExecuteNonQuery();
    }
} 
```

**注意**：如果数据库位于不同的服务器上，您应该链接服务器：

`exec sp_addlinkedserver @server = 'server2'`

# javascript - 按键事件输入字段的JQuery SetAttribute

> ID：14688999
> 
> 赞同：-1
> 
> 时间：2013-02-04T14:38:07.847
> 
> 标签：javascript, jquery

如果用户在文本/复选框中输入一些字符，我想设置输入字段的属性。这是我正在尝试的 Java Script的[链接。](http://jsfiddle.net/sirishkumar/dFBzW/51/)下面是代码

```
<input type="text" />
<div id="output"></div> 
```

```
$('input').bind('input keyup', function() {
    $('#output').html($(this).val());
    $(this).setAttribute('aria-invalid', 'true');
}); 
```

但它不起作用，有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:40:38.910

您混淆了 jQuery 对象和实际的 DOM 节点。在该事件处理程序中，`this`是 DOM 节点，并且`$(this)`是引用它的 jQuery 对象。

DOM节点本身有`setAttribute`功能，jQuery对象有`.attr()`功能，所以：

```
this.setAttribute('aria-invalid', 'true');
or
$(this).attr('aria-invalid', 'true'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:54:25.610

`**[LIVE DEMO](http://jsbin.com/eteleg/1/edit)**`

尝试使用`data`属性而不是`.data()`方法。这很容易：

```
$('input').on('input keyup', function() {
    $('#output').html( this.value );
    $(this).data('aria_invalid', 'true');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:40:00.187

jQuery 对象没有`.setAttribute()`方法。使用 JQuery 的 .attr() 方法（或 Dom Element .setAttribute() 方法）

```
$('input').bind('input keyup', function() {
    $('#output').html($(this).val());

    $(this).attr('aria-invalid', 'true');
    // or
    // this.setAttribute('aria-invalid', 'true');
}); 
```