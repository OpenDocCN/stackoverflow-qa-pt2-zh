# StackOverflow 问答 14887000-14887999

# jquery - HTML5 内容可编辑 DIV 焦点

> ID：14887002
> 
> 赞同：1
> 
> 时间：2013-02-15T01:23:40.580
> 
> 标签：jquery, html

我有一个带有 的 DIV `<div contentEditable="true" id="content"></div>`，我的问题是在使用 javascript 发布 div 的内容后，光标仍在 DIV 内闪烁，我希望这个 div 在提交其内容后失去焦点，这就是我怎样才能得到光标提交后从DIV中删除？我已经尝试在提交后将模糊设置为此 DIV，但无济于事。

```
 $('.save-button').on('click',function(){
    var newBio = $("#content").text();
    newBio = $.trim(newBio);

    $.post(postdatahere,
            function(data) {
            $("#content").blur();
            $('.save-button').hide();
        });
}); 
```

`.text()`此外，使用从可编辑 DIV 获取数据更好还是`.html()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T04:05:16.800

您可以尝试在提交/ajax 请求之前使 div 不可编辑，并在它的/ajax 请求结束后启用编辑。无论天气如何，都需要这样做，因为它可以解决您的问题，因为这样做是一个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T02:52:20.697

我想通了，您需要关注不同的用户文本输入来移动光标，因为在内容可编辑 div 模糊后光标会停留在那里。

所以你的代码看起来像这样：

```
 $('.save-button').on('click',function(){
    var newBio = $("#content").text();
    newBio = $.trim(newBio);

    $.post(postdatahere,
            function(data) {
            $("#SomeUserInput").focus();
            $(".save-button").focus();
            $('.save-button').hide();
        });
}); 
```

虽然不应该`.save-button`是一个 id 而不是一个类？如果是这样的话

```
 $.post(postdatahere,
            function(data) {
            $("#SomeUserInput").focus(); //blur #content by focusing on different element
            $('#save-button').focus(); // focus on the button to remove focus from #SomeUserInput and because it is going to be hidden anyways.
            $('#save-button').hide();
        });
}); 
```

（是的，这有点像黑客攻击。）

至于是否使用`.text()`或`.html()`，这取决于您想要什么。如果你想要样式（斜体、粗体等），你会想要使用`.html()`，但如果你这样做，请确保你有某种服务器端过滤器，这样你的网站上就不会出现任何错误的脚本。否则，`.text()`会做得很好。

希望这可以帮助！

# regex - sed 正则表达式可以模拟后视和前瞻吗？

> ID：14887007
> 
> 赞同：9
> 
> 时间：2013-02-15T01:24:04.870
> 
> 标签：regex, sed, awk, regex-negation, regex-lookarounds

我正在尝试编写一个 sed 脚本，它将捕获文本文件中的所有“裸”URL 并将它们替换为`<a href=[URL]>[URL]</a>`. “裸”是指未包含在锚标记内的 URL。

我最初的想法是我应该匹配前面没有 " 或 > 并且后面也没有 < 或 " 的 URL。但是，我在表达“没有前面或后面”的概念时遇到了困难，因为据我所知 sed 没有前瞻或后视。

样本输入：

```
[Beginning of File]http://foo.bar arbitrary text
http://test.com other text
<a href="http://foobar.com">http://foobar.com</a>
Nearing end of file!!! http://yahoo.com[End of File] 
```

样本期望输出：

```
[Beginning of File]<a href="http://foo.bar">http://foo.bar</a> arbitrary text
<a href="http://test.com">http://test.com</a> other text
<a href="http://foo.bar">http://foo.bar</a>
Nearing end of file!!! <a href="http://yahoo.com">http://yahoo.com</a>[End of File] 
```

观察到第三行没有被修改，因为它已经在里面了`<a href>`。另一方面，第一行和第二行都被修改了。最后，观察所有非 URL 文本都未修改。

最终，我正在尝试做类似的事情：

```
sed s/[^>"](http:\/\/[^\s]\+)/<a href="\1">\1<\/a>/g 2-7-2013 
```

我首先验证以下内容是否正确匹配并删除 URL：

```
sed 's/http:\/\/[^\s]\+//g' 
```

然后我尝试了这个，但它无法匹配从文件/输入开头开始的 URL：

```
sed 's/[^\>"]http:\/\/[^\s]\+//g' 
```

有没有办法在 sed 中解决这个问题，或者通过模拟后向/前瞻，或者显式匹配文件的开头和文件的结尾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T14:59:34.103

sed 是用于在单行上进行简单替换的出色工具，对于任何其他文本操作问题，只需使用 awk。

检查我在下面的 BEGIN 部​​分中使用的定义，以获取匹配 URL 的正则表达式。它适用于您的示例，但我不知道它是否捕获所有可能的 URL 格式。即使它没有，但它可能足以满足您的需求。

```
$ cat file
[Beginning of File]http://foo.bar arbitrary text
http://test.com other text
<a href="http://foobar.com">http://foobar.com</a>
Nearing end of file!!! http://yahoo.com[End of File]
$
$ awk -f tst.awk file
[Beginning of File]<a href="http://foo.bar">http://foo.bar</a> arbitrary text
<a href="http://test.com">http://test.com</a> other text
<a href="http://foobar.com">http://foobar.com</a>
Nearing end of file!!! <a href="http://yahoo.com">http://yahoo.com</a>[End of File]
$
$ cat tst.awk
BEGIN{ urlRe="http:[/][/][[:alnum:]._]+" }
{
    head = ""
    tail = $0
    while ( match(tail,urlRe) ) {
       url  = substr(tail,RSTART,RLENGTH)
       href = "href=\"" url "\""

       if (index(tail,href) == (RSTART - 6) ) {
          # this url is inside href="url" so skip processing it and the next url match.
          count = 2
       }

       if (! (count && count--)) {
          url = "<a " href ">" url "</a>"
       }

       head = head substr(tail,1,RSTART-1) url
       tail = substr(tail,RSTART+RLENGTH)
    }

    print head tail
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T01:36:43.960

您的命令的明显问题是

```
You did not escape the parenthesis "(" 
```

`sed`这是正则表达式的奇怪之处。与 Perl 正则表达式不同的是，许多符号默认为“文字”。您必须将它们转义为“功能”。尝试：

```
s/\([^>"]\?\)\(http:\/\/[^\s]\+\)/\1<a href="\2">\2<\/a>/g 
```

# c++ - opengl中的对象加载器

> ID：14887012
> 
> 赞同：0
> 
> 时间：2013-02-15T01:25:02.480
> 
> 标签：c++, opengl, visual-studio-2008, wavefront

我在 C++ 中创建了一个包含 opengl 的程序，我还想创建一个 obj 加载器以加载我拥有的 obj 文件！我已经创建了两个函数，它们是：

```
void ReadFile(model *md)
{
    // Open the file for reading OBJINFO.TXT
    ifstream obj_file("tree.obj");

    if (obj_file.fail())
        exit(1);

    // Get the number of vertices
    obj_file >> md->vertices;
    // Get the number of faces
    obj_file >> md->faces;                                  

    // Get the vertex coordinates
    for (int i = 0; i < md->vertices; i++)
    {
        obj_file >> md->obj_points[i].x;
        obj_file >> md->obj_points[i].y;
        obj_file >> md->obj_points[i].z;
    }

    // Get the face structure
    for (int i = 0; i < md->faces; i++)
    {
        obj_file >> md->obj_faces[i].vn[0];
        obj_file >> md->obj_faces[i].vn[1];
        obj_file >> md->obj_faces[i].vn[2];
        obj_file >> md->obj_faces[i].vn[3];
    }

    obj_file.close();
}

void DisplayModel(model md)
{
    glPushMatrix();
    glBegin(GL_TRIANGLES);

    for (int i = 0; i < md.faces; i++)
    {
        glVertex3f(md.obj_points[md.obj_faces[i].vn[0]-1].x, md.obj_points[md.obj_faces[i].vn[0]-1].y, md.obj_points[md.obj_faces[i].vn[0]-1].z);
        glVertex3f(md.obj_points[md.obj_faces[i].vn[1]-1].x, md.obj_points[md.obj_faces[i].vn[1]-1].y, md.obj_points[md.obj_faces[i].vn[1]-1].z);
        glVertex3f(md.obj_points[md.obj_faces[i].vn[2]-1].x, md.obj_points[md.obj_faces[i].vn[2]-1].y, md.obj_points[md.obj_faces[i].vn[2]-1].z);
        glVertex3f(md.obj_points[md.obj_faces[i].vn[2]-1].x, md.obj_points[md.obj_faces[i].vn[2]-1].y, md.obj_points[md.obj_faces[i].vn[3]-1].z);
    }

    glEnd();
    glPopMatrix();
} 
```

主要问题是当我编译项目并运行它时，视口中什么也没有出现。我还增加了视口的尺寸，以防它很小以显示对象，但情况保持不变！所以我得出的结果是我在这些功能中做错了！谁能帮帮我？！

我还给出了我的 obj 文件的一些值：

```
v 0.158000 0.975000 0.151491 1.000000 
v 0.188743 0.025000 0.173826 1.000000
v 0.196000 0.025000 0.151491 1.000000
v 0.158000 0.025000 0.151491 1.000000
v 0.169743 0.025000 0.187631 1.000000
v 0.146257 0.025000 0.187631 1.000000
v 0.127257 0.025000 0.173826 1.000000
vn 0.950370 0.038015 0.308791
vn 0.950370 0.038015 0.308791
vn 0.950370 0.038015 0.308791
vn 0.000000 -1.000000 0.000000
vn 0.000000 -1.000000 0.000000
vn 0.000000 -1.000000 -0.000000
vn 0.587380 0.038015 0.808418
f 1//1 2//2 3//3
f 4//4 3//5 2//6
f 1//7 5//8 2//9
f 4//10 2//11 5//12
f 1//13 6//14 5//15
f 4//16 5//17 6//18
f 1//19 7//20 6//21 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T01:31:30.973

```
// Get the number of vertices
obj_file >> md->vertices;
// Get the number of faces
obj_file >> md->faces; 
```

再次阅读[规范](http://www.martinreddy.net/gfx/3d/OBJ.spec)。这不是 OBJ 的工作方式。您必须在进行过程中解析出顶点/纹理坐标/法线/面。

使用这样的东西：

```
#include <GL/glut.h>
#include <glm/glm.hpp>
#define GLM_ENABLE_EXPERIMENTAL 
#include <glm/gtx/component_wise.hpp>
#include <vector>
#include <fstream>
#include <sstream>

struct Vertex
{
    glm::vec3 position;
    glm::vec2 texcoord;
    glm::vec3 normal;
};

struct VertRef
{
    VertRef( int v, int vt, int vn ) : v(v), vt(vt), vn(vn) { }
    int v, vt, vn;
};

std::vector< Vertex > LoadOBJ( std::istream& in )
{
    std::vector< Vertex > verts;

    std::vector< glm::vec4 > positions( 1, glm::vec4( 0, 0, 0, 0 ) );
    std::vector< glm::vec3 > texcoords( 1, glm::vec3( 0, 0, 0 ) );
    std::vector< glm::vec3 > normals( 1, glm::vec3( 0, 0, 0 ) );
    std::string lineStr;
    while( std::getline( in, lineStr ) )
    {
        std::istringstream lineSS( lineStr );
        std::string lineType;
        lineSS >> lineType;

        // vertex
        if( lineType == "v" )
        {
            float x = 0, y = 0, z = 0, w = 1;
            lineSS >> x >> y >> z >> w;
            positions.push_back( glm::vec4( x, y, z, w ) );
        }

        // texture
        if( lineType == "vt" )
        {
            float u = 0, v = 0, w = 0;
            lineSS >> u >> v >> w;
            texcoords.push_back( glm::vec3( u, v, w ) );
        }

        // normal
        if( lineType == "vn" )
        {
            float i = 0, j = 0, k = 0;
            lineSS >> i >> j >> k;
            normals.push_back( glm::normalize( glm::vec3( i, j, k ) ) );
        }

        // polygon
        if( lineType == "f" )
        {
            std::vector< VertRef > refs;
            std::string refStr;
            while( lineSS >> refStr )
            {
                std::istringstream ref( refStr );
                std::string vStr, vtStr, vnStr;
                std::getline( ref, vStr, '/' );
                std::getline( ref, vtStr, '/' );
                std::getline( ref, vnStr, '/' );
                int v = atoi( vStr.c_str() );
                int vt = atoi( vtStr.c_str() );
                int vn = atoi( vnStr.c_str() );
                v  = (  v >= 0 ?  v : positions.size() +  v );
                vt = ( vt >= 0 ? vt : texcoords.size() + vt );
                vn = ( vn >= 0 ? vn : normals.size()   + vn );
                refs.push_back( VertRef( v, vt, vn ) );
            }

            // triangulate, assuming n>3-gons are convex and coplanar
            for( size_t i = 1; i+1 < refs.size(); ++i )
            {
                const VertRef* p[3] = { &refs[0], &refs[i], &refs[i+1] };

                // http://www.opengl.org/wiki/Calculating_a_Surface_Normal
                glm::vec3 U( positions[ p[1]->v ] - positions[ p[0]->v ] );
                glm::vec3 V( positions[ p[2]->v ] - positions[ p[0]->v ] );
                glm::vec3 faceNormal = glm::normalize( glm::cross( U, V ) );

                for( size_t j = 0; j < 3; ++j )
                {
                    Vertex vert;
                    vert.position = glm::vec3( positions[ p[j]->v ] );
                    vert.texcoord = glm::vec2( texcoords[ p[j]->vt ] );
                    vert.normal = ( p[j]->vn != 0 ? normals[ p[j]->vn ] : faceNormal );
                    verts.push_back( vert );
                }
            }
        }
    }

    return verts;
}

int btn;
glm::ivec2 startMouse;
glm::ivec2 startRot, curRot;
glm::ivec2 startTrans, curTrans;
void mouse(int button, int state, int x, int y )
{
    if( button == GLUT_LEFT_BUTTON && state == GLUT_DOWN )
    {
        btn = button;
        startMouse = glm::ivec2( x, glutGet( GLUT_WINDOW_HEIGHT ) - y );
        startRot = curRot;
    }
    if( button == GLUT_RIGHT_BUTTON && state == GLUT_DOWN )
    {
        btn = button;
        startMouse = glm::ivec2( x, glutGet( GLUT_WINDOW_HEIGHT ) - y );
        startTrans = curTrans;
    }
}

void motion( int x, int y )
{
    glm::ivec2 curMouse( x, glutGet( GLUT_WINDOW_HEIGHT ) - y );
    if( btn == GLUT_LEFT_BUTTON )
    {
        curRot = startRot + ( curMouse - startMouse );
    }
    else if( btn == GLUT_RIGHT_BUTTON )
    {
        curTrans = startTrans + ( curMouse - startMouse );
    }
    glutPostRedisplay();
}

std::vector< Vertex > model;
void display()
{
    glClearColor( 0.2f, 0.2f, 0.2f, 1.0f );
    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    double ar = w / h;
    glTranslatef( curTrans.x / w * 2, curTrans.y / h * 2, 0 );
    gluPerspective( 60, ar, 0.1, 100 );

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();
    glTranslatef( 0, 0, -10 );

    glPushMatrix();
    {
        glRotatef( curRot.x % 360, 0, 1, 0 );
        glRotatef( -curRot.y % 360, 1, 0, 0 );

        // object
        glColor3ub( 255, 0, 0 );
        glEnableClientState( GL_VERTEX_ARRAY );
        glEnableClientState( GL_TEXTURE_COORD_ARRAY );
        glEnableClientState( GL_NORMAL_ARRAY );
        glVertexPointer( 3, GL_FLOAT, sizeof(Vertex), &model[0].position );
        glTexCoordPointer( 2, GL_FLOAT, sizeof(Vertex), &model[0].texcoord );
        glNormalPointer( GL_FLOAT, sizeof(Vertex), &model[0].normal );
        glDrawArrays( GL_TRIANGLES, 0, model.size() );
        glDisableClientState( GL_VERTEX_ARRAY );
        glDisableClientState( GL_TEXTURE_COORD_ARRAY );
        glDisableClientState( GL_NORMAL_ARRAY );

        // bounding cube
        glDisable( GL_LIGHTING );
        glColor3ub( 255, 255, 255 );
        glutWireCube( 7 );
        glEnable( GL_LIGHTING );
    }
    glPopMatrix();

    glutSwapBuffers();
}

// return the min/max points of pts
template< typename Vec >
std::pair< Vec, Vec > GetExtents( const Vec* pts, size_t stride, size_t count )
{
    unsigned char* base = (unsigned char*)pts;
    Vec pmin( *(Vec*)base );
    Vec pmax( *(Vec*)base );
    for( size_t i = 0; i < count; ++i, base += stride )
    {
        const Vec& pt = *(Vec*)base;
        pmin = glm::min( pmin, pt );
        pmax = glm::max( pmax, pt );
    }

    return std::make_pair( pmin, pmax );
}

// centers geometry around the origin
// and scales it to fit in a size^3 box
template< typename Vec > 
void CenterAndScale( Vec* pts, size_t stride, size_t count, const typename Vec::value_type& size )
{
    typedef typename Vec::value_type Scalar;

    // get min/max extents
    std::pair< Vec, Vec > exts = GetExtents( pts, stride, count );

    // center and scale 
    const Vec center = ( exts.first * Scalar( 0.5 ) ) + ( exts.second * Scalar( 0.5f ) );

    const Scalar factor = size / glm::compMax( exts.second - exts.first );
    unsigned char* base = (unsigned char*)pts;
    for( size_t i = 0; i < count; ++i, base += stride )
    {
        Vec& pt = *(Vec*)base;
        pt = ( ( pt - center ) * factor );
    }    
}

int main( int argc, char **argv )
{
    // https://en.wikipedia.org/wiki/Stanford_bunny
    std::ifstream ifile( "bunny.obj" );
    model = LoadOBJ( ifile );
    CenterAndScale( &model[0].position, sizeof( Vertex ), model.size(), 7 );

    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE );
    glutInitWindowSize( 640, 480 );
    glutCreateWindow( "OBJ" );
    glutDisplayFunc( display );
    glutMouseFunc( mouse );
    glutMotionFunc( motion );

    glEnable( GL_DEPTH_TEST );

    // set up "headlamp"-like light
    glShadeModel( GL_SMOOTH );
    glEnable( GL_COLOR_MATERIAL );
    glColorMaterial( GL_FRONT_AND_BACK, GL_AMBIENT_AND_DIFFUSE ) ;
    glEnable( GL_LIGHTING );
    glEnable( GL_LIGHT0 );
    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();
    GLfloat position[] = { 0, 0, 1, 0 };
    glLightfv( GL_LIGHT0, GL_POSITION, position );

    glPolygonMode( GL_FRONT, GL_FILL );
    glPolygonMode( GL_BACK, GL_LINE );
    glutMainLoop();
    return 0;
} 
```

LMB-拖动旋转，RMB-拖动“平移”。

并使用这个：

```
v 0.000000 2.000000 2.000000
v 0.000000 0.000000 2.000000
v 2.000000 0.000000 2.000000
v 2.000000 2.000000 2.000000
f -4 -3 -2 -1

v 2.000000 2.000000 0.000000
v 2.000000 0.000000 0.000000
v 0.000000 0.000000 0.000000
v 0.000000 2.000000 0.000000
f -4 -3 -2 -1

v 2.000000 2.000000 2.000000
v 2.000000 0.000000 2.000000
v 2.000000 0.000000 0.000000
v 2.000000 2.000000 0.000000
f -4 -3 -2 -1

v 0.000000 2.000000 0.000000
v 0.000000 2.000000 2.000000
v 2.000000 2.000000 2.000000
v 2.000000 2.000000 0.000000
f -4 -3 -2 -1

v 0.000000 2.000000 0.000000
v 0.000000 0.000000 0.000000
v 0.000000 0.000000 2.000000
v 0.000000 2.000000 2.000000
f -4 -3 -2 -1

v 0.000000 0.000000 2.000000
v 0.000000 0.000000 0.000000
v 2.000000 0.000000 0.000000
v 2.000000 0.000000 2.000000
f -4 -3 -2 -1 
```

或这个：

```
v 0.000000 2.000000 0.000000
v 0.000000 0.000000 0.000000
v 2.000000 0.000000 0.000000
v 2.000000 2.000000 0.000000
v 4.000000 0.000000 -1.255298
v 4.000000 2.000000 -1.255298
vn 0.000000 0.000000 1.000000
vn 0.000000 0.000000 1.000000
vn 0.276597 0.000000 0.960986
vn 0.276597 0.000000 0.960986
vn 0.531611 0.000000 0.846988
vn 0.531611 0.000000 0.846988
# 6 vertices

# 6 normals

g all
s 1
f 1//1 2//2 3//3 4//4
f 4//4 3//3 5//5 6//6
# 2 elements 
```

为`test.obj`.

`glm.hpp`来自[GLM 库](http://glm.g-truc.net/)。

# c# - 文本框上的拼写检查

> ID：14887015
> 
> 赞同：0
> 
> 时间：2013-02-15T01:25:22.747
> 
> 标签：c#, asp.net, textbox, spell-checking

有什么方法可以在我的文本框中插入拼写检查。

**程序**
1\. 当我在多行文本框中键入文本时，它会在拼写错误的单词下方显示红色波浪线。
2.当我点击红色波浪下划线的拼错单词时，它将显示所有建议的单词。

**注意**
a. 如果这是不可能的，它将只显示红色波浪线。
湾。我也在用IE8。
C。不得使用任何按钮。仅限文本框。
我尝试使用 javascriptspellchecker，但它不适用于文本框。

如果你能给我一些与我的问题相似的链接。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T01:39:46.920

我知道（并且可以建议） UltimateSpell 控件，它可以满足您的要求，但不是免费的。

[http://www.karamasoft.com/Samples.aspx?component=UltimateSpell](http://www.karamasoft.com/Samples.aspx?component=UltimateSpell)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T01:39:17.947

尝试使用 asp.net 拼写检查器

[http://www.asp.net/community/control-gallery/Item.aspx?i=865](http://www.asp.net/community/control-gallery/Item.aspx?i=865)

# php - 如何将长数组从android发送到php服务器

> ID：14887017
> 
> 赞同：2
> 
> 时间：2013-02-15T01:25:42.713
> 
> 标签：php, android, json

我尝试通过 JSON 将长数组从 android 发送到 PHP。我用 Javascript 做了同样的事情并且工作了，但是用 JAVA 就变得混乱了。当我发送参数时，长数组列表会发生变化。

这是创建列表的部分。

```
JSONArray list = new JSONArray();

for (int i = 0; i < users.size(); i++) {
    list.put(users.get(i).getId());                             
} 
```

这是发送数据的 JAVA 代码。

```
public JSONObject sendFacebookFriendList(JSONArray list) {

    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("list", list.toString()));

    JSONParser jsonParser = new JSONParser();
    JSONObject json = jsonParser.getJSONFromUrl(accountServer, params);
    return json;
} 
```

这是在 PHP 中接收数据的代码。

```
 $list = $_POST['list'];
    $result = array("success" => 1, "list" => $list); 
```

在使用 Javascript 发送时，$list 变量直接变成了长数组，但我不能用 JAVA 以同样的方式发送它。

当我将列表从 PHP 发送回 JAVA 而没有任何更改时，我看到每个数组元素的开头和结尾都有 \"

所以这个列表：

```
list= ["517565130","523709375","524503024","524620558","524965930", ... 
```

变成这样：

```
"list":"[\"517565130\",\"523709375\",\"524503024\",\"524620558\", ... 
```

所以我无法在 PHP 中解析这个数组。

我找不到以正确方式发送 long/int 数组的任何方法。如果有人可以解决此问题或提出其他建议，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T17:33:17.537

我解决了这个问题。我跳过的事情是解码在 android 部分编码的 json 数组。所以在得到发布的数据后，需要像这样解码；

```
$list = $_POST['list'];

$obj = json_decode($list); 
```

然后我可以使用 $obj 作为数组。

# ios - 有没有一种从目标 C 文件中外部化面向用户的字符串的好方法？

> ID：14887018
> 
> 赞同：0
> 
> 时间：2013-02-15T01:25:49.330
> 
> 标签：ios, localization

我已经阅读了一些关于 iOS 的 i18n/l10n 工具和流程的教程，并且对我所看到的感到非常惊讶。似乎没有一种可靠的方法可以将面向用户的字符串从目标 C 文件中外部化。我错过了什么吗？

问题描述：存在将英文字符串直接放入 .m 文件的趋势，Apple 文档似乎鼓励这样做。虽然这在 Android 中也是可能的，但至少在 Android 中，外部化字符串和非外部化字符串之间存在明显区别。另一方面，在 iOS 中，调用字符串的代码往往如下所示：

```
NSLocalizedString(@"There was an error loading the image.", nil) 
```

在这种情况下，“加载图像时出错。” 是此字符串资源的键。因此，如果我想在其他地方再次引用相同的字符串，我们必须再次编写如下代码：

```
NSLocalizedString(@"There was an error loading the image.", nil) 
```

但是现在我必须确保这两个字符串的拼写相同，并且没有编译时检查来帮助我确认。我可以编写一个名为 createErrorString 的辅助函数，但这并不好玩。我可以替换“加载图像时出错”。使用像“ERROR_IMAGE_LOAD”这样更明智的键，但这似乎不是一种常见的做法，Apple 似乎不鼓励这种明智的行为。以下是他们的文档所述：

> “开发应用程序时的一个常见约定是使用与用于开发应用程序的语言中的值相同的键名。”

看起来 Apple 建议您将完整的英文字符串放入源代码中。因此，我必须设法说服我的同事反对苹果的指导。

现在我已经在源代码中获得了所有这些面向用户的英文字符串（或键），Apple 包含了一个名为 genstrings 的工具，它可以解析 .m 文件，并输出一个 Localizable.strings 文件，然后我可以将其发送出去用于翻译。如果您只打算让您的应用程序本地化一次，这可能会奏效，但在我们公司，本地化是一个持续的迭代过程。查看 Apple 文档的建议：

> “对于后续运行，最好在运行 genstrings 之前保存当前字符串文件的副本。然后您可以区分新旧版本以确定哪些字符串已添加到（或更改）到您的项目中。然后您可以使用此信息更新字符串文件的任何已本地化版本，而不是替换这些文件并再次本地化它们。”

这似乎不太好。在 Android 和 Windows8 中，您曾经国际化您的源代码树，从那一刻起，您的外部化字符串在它们所属的 xml 文件中拥有；在 iOS 中，它们属于源代码（有点），然后被一些疯狂的工具制成一些中间文件（或者是吗？）。Localizable.strings 文件是中间文件还是应该提交到 git 中 - 我们仍在我公司讨论这个问题。

（据我所知，这只是一个开始。在 xib-land 中，90% 的面向用户的字符串都存在于此，l10n 似乎也存在一种效率低下的机制[。Wil Shipley 的文章](http://blog.wilshipley.com/2009/10/pimp-my-code-part-17-lost-in.html)详细描述了这一点.)

有没有人对在 iOS 中外部化字符串的好方法有任何建议？我的主要问题涉及objective-C 字符串，但也非常感谢有关xib 文件的答案。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T01:45:10.130

我发现建议将键命名为英语字符串也很奇怪。
我命名键，值例如“Menu1SettingsTitle”=“设置”。
我不需要 genstrings 工具，只需手动外部化。
不，字符串文件不是中间步骤，它们应该在 git 中。

然而，通过这种方法，我注意到了三个缺点：
1）我检测到重复的名称，但可以将其移动到字符串的公共部分，如“取消、删除”

2）如果你忘记在那个语言文件里放一个字符串，就找不到了，然后显示key，当然看起来很奇怪。否则苹果推荐，如果关键是英文单词，它看起来“只有英文”但不会更糟。

3）如果总是留下英文而不是“Menu1SettingsTitle”，翻译过程会更容易。为了解决这个问题，我在上面发表了评论，但不知道翻译服务是否会对此感到满意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-21T21:03:16.277

经过几个小时的搜索，我决定使用两种不同的方法：一种用于情节提要，另一种用于 .m 文件中的文本。结果是两个文件 Localizable.strings 用于 Objective C 文本和国际化故事板。

update_storyboard_strings.sh 可以自动从故事板中提取可翻译的字符串并更新字符串文件。源代码（由 mikezang 提供）可以在以下位置找到：

[http://forums.macrumors.com/showpost.php?p=16060008&postcount=4](http://forums.macrumors.com/showpost.php?p=16060008&postcount=4)

对于目标 C NLS，我在 Frédéric Sagnes 的 xcode-tools 周围使用了另一个脚本： [https ://github.com/ndfred/xcode-tools](https://github.com/ndfred/xcode-tools)

为了获得所需的结果，我必须为每种语言调用它：

```
python scripts/xcode-tools/update_strings.py --import=MyProject/Base.lproj/Localizable.strings MyProject/Base.lproj/Localizable.strings

python scripts/xcode-tools/update_strings.py --import=MyProject/de.lproj/Localizable.strings MyProject/de.lproj/Localizable.strings 
```

现在将两者都放在一个脚本中，并将其作为最后一个构建阶段添加到您的 Xcode 项目中。

# perl - mojolicious 中路由名称的目的是什么？

> ID：14887024
> 
> 赞同：6
> 
> 时间：2013-02-15T01:26:50.107
> 
> 标签：perl, routes, mojolicious

我一直在学习如何使用 Mojolicious 框架对应用程序进行编程，我对你为什么使用路由名称感到困惑。例如一条路线可以说

```
$r->route('/cities/new')
      ->via('get')
      ->to(controller => 'cities', action => 'new_form')
      ->name('cities_new_form'); 
```

但是 name 参数的目的是什么？我是网络框架的新手，所以也许这对它有一个微不足道的答案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T02:19:00.473

如果您想动态生成 URL，命名路由允许您稍后引用它。使用您的示例，您可以稍后在代码中执行此操作：

```
my $link = $self->url_for( 'cities_new_form' ) 
```

并且`$link`会自动填充以 . 结尾的 URL `/cities/new`。如果您的路线有动态部分，您会觉得很有趣。例如：

```
$r->route( '/cities/:cityname' )
    ->via( 'get' )
    ->to( controller => 'cities', action => 'new_form' )
    ->name( 'cities_new_form' ); 
```

然后你可以生成一个像

```
my $link = $self->url_for( 'cities_new_form', cityname => 'newyork' ); 
```

`$link`最终会`/cities/newyork`得到.

这些都是微不足道的例子，但是一旦你的路线参与更多，你就可以建立相当复杂的东西。

如果您不命名路线，它会获得一个默认名称，该名称只是其中的字母数字字符的串联。对于长途路线来说，这可能会变得乏味，因此您可以使用名称来缩写它们。

另请参阅Mojolicious 文档中的[命名路由](http://mojolicio.us/perldoc/Mojolicious/Guides/Routing#Named_routes)。

# tomcat - 重命名tomcat http线程

> ID：14887030
> 
> 赞同：4
> 
> 时间：2013-02-15T01:27:29.097
> 
> 标签：tomcat, tomcat6

与 http-8080-4 等相比，是否可以让 Tomcat 将它创建的用于服务 http 请求的线程重命名为有意义的东西？

即，不仅仅是将线程命名为“http-8080-4”，而是将线程命名为请求的 URL，然后是一些计数器等，例如“/xyz_app/resource_name~1”等。

我之所以试图找到这样的东西，是因为当您查看分析器/监控工具（例如 jvisualvm）时，线程名称“http-8080-4”并没有提供很多细节。

在tomcat中甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T02:25:10.313

您可以尝试在**conf/server.xml**中激活提供线程名称前缀的[Executor 。](http://tomcat.apache.org/tomcat-6.0-doc/config/executor.html)

 **```
<Executor name="tomcatThreadPool" namePrefix="xyz_app/resource_name" 
    maxThreads="150" minSpareThreads="4"/> 
```

然后更改您的**连接器**以使用此**Executor**：

```
<Connector executor="tomcatThreadPool"
           port="8080" protocol="HTTP/1.1" 
           connectionTimeout="20000" 
           redirectPort="8443" /> 
```

这不适用于所有线程，但应该有助于识别正在处理您的请求的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T04:13:52.130

尝试创建一个`Filter`处理每个请求并在其方法中执行以下操作的`doFilter`方法：

```
Thread t = Thread.currentThread();
String oldName = t.getName();
String newName = ...; // whatever you want
boolean isNameChanged = false;
try {
    t.setName(newName);
    isNameChanged = true;
} catch (SecurityException ignore) {}
try {
    chain.doFilter(request, response);
} finally {
    if (isNameChanged) {
        try {
            t.setName(oldName);
        } catch (SecurityException ignore) {}
    }
} 
```**

# php - 不传播到 PHP 包含文件的变量

> ID：14887031
> 
> 赞同：0
> 
> 时间：2013-02-15T01:27:28.837
> 
> 标签：php, include

我有一个名为的文件`index.php`，在这个文件中有一个名为 的变量`$mainDir`，我希望在包含的文件中使用这个变量，

**例子：**

```
<?php // index.php
    $mainDir = dirname(__FILE__);
    if ($isTest){ // presume this is true
        include $mainDir . 'test.php';
    }
?>
// Different File:
<?php // test.php
    echo $mainDir;
?> 
```

我查看了其他解决方案，并将我想要的变量放在了 include 语句之前，并且 include 语句被正确调用，它只是给我一个警告，我想在包含的文件中使用的变量没有设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T01:35:34.770

`dirname(__FILE__);`我相信最后不包括“/”。要解决此问题，只需将其用作您的包含：

```
 include $mainDir.'/test.php'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T01:54:16.200

也许你可以试试这个：

```
<?php // index.php
    $mainDir = dirname(__FILE__);
    if ($isTest){ // presume this is true
        include $mainDir . 'test.php';
    }
    $_GET["mainDir"] = $mainDir;
?>
// Different File:
<?php // test.php
    echo $_GET["mainDir"];
?> 
```

这很可怕，但它应该有效。

# mysql - MYSQL 查询，形成具有特定结果的下拉列表

> ID：14887032
> 
> 赞同：1
> 
> 时间：2013-02-15T01:27:30.303
> 
> 标签：mysql, distinct

我有一个 MYSQL 表，其中包含以下信息。它保存某人可以注册的事件的日期和时间。

## id 日期 时间 注册

1 1362981600 9-NOON 0
2 1 1364191200 9-NOON 0 4
136291200 9-NOON 0
4 1362981600 1-4 PM 0
5 1364191200 1-4 PM 0
6 1364191200 1-4 PM 0
7 1363240800 1-4PM 0
8 1363845600 1-4PM 0
9 1363327200 9-中午 0
10 1363327200 1-4 pm 0
11 1363327200 3-7 pm 1

我需要一个 mysql 查询来提取所有已注册的字段 = 0，并且只显示具有时隙的每一天（星期一或星期二等的一天）。

因此，如果我执行 select * from table where registered=0 我会得到这些结果，使用时间戳来获取星期几，我使用 PHP while 循环通过查询生成以下内容。

周一 9 点
周一 9 点
周一 9 点
周一 1-4 点
周一 1-4 点
周一 1-4 点
周四 1-4 点
周四 1-4 点
周五 9 点
周五，下午 1-4 点

我想得到的是：
周一，9-noon
周一，1-4 pm
周四，1-4 pm
周五，9-noon
周五，1-4 pm

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T01:38:21.273

您需要添加一个“分组依据”子句，然后一切就绪。我不知道你用什么公式来推算一天，所以我在下面随便用一个来说明：

```
select date(from_unixtime(date)) as date
    , dayname(from_unixtime(date)) as day
    , time
    , min(date) as cronos
from table
where registered=0
group by date, day, time
order by cronos asc, time asc 
```

不同的查询以匹配下面评论中添加的描述：

```
select dayofweek(from_unixtime(date)) as day_num
    , dayname(from_unixtime(date)) as day_name
    , time
from table
where registered=0
group by day_num, day_name, time
order by day_num asc, time asc; 
```

# javascript - 执行javascript函数onkeydown

> ID：14887034
> 
> 赞同：0
> 
> 时间：2013-02-15T01:27:50.067
> 
> 标签：javascript, html, function, keyboard

我正在寻找一种在按下特定键时执行javascript函数的方法，例如按下向下键将导致`function down()`左键将执行`function left()`。最好使用javascript吗？我可以使用 jquery，但我更喜欢 javascript。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T01:39:54.020

当然有可能：

```
document.addEventListener('keydown', function(e){
    if(e.keyCode === 40) {
        down();
    } else if(e.keyCode === 38) {
        up();
    }
},false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T02:04:39.430

bfavaretto 的回答很好，但它并不支持所有浏览器。试试这个：

```
document.addEventListener('keydown', function(event){
    event = event || window.event;
    var keycode = event.charCode || event.keyCode;
    if(keycode == 37) 
        left();
    if(keycode == 39) 
        right();
    if(keycode == 38) 
        up();
    if(keycode == 40) 
        down();
}); 
```

# python - python中的多线程与循环

> ID：14887035
> 
> 赞同：2
> 
> 时间：2013-02-15T01:27:58.740
> 
> 标签：python, multithreading

我正在尝试使用python中的多线程技术解决项目欧拉中的[问题8 。](https://projecteuler.net/problem=8)

> 找出 1000 位数字中连续五位数字的最大乘积。该号码可以在[这里](http://projecteuler.net/problem=8)找到。

我的方法是从原始列表中的 5 个块中生成产品，并重复此过程 5 次，每次起始索引向右移动一个。

这是我的线程类

```
class pThread(threading.Thread):
    def __init__(self, l):
        threading.Thread.__init__(self)
        self.l = l
        self.p = 0

    def run(self):

        def greatest_product(l):
        """
        Divide the list into chunks of 5 and find the greatest product
        """
            def product(seq):
                return reduce(lambda x,y : x*y, seq)

            def chunk_product(l, n=5):
                for i in range(0, len(l), n):
                    yield product(l[i:i+n])

            result = 0
            for p in chunk_product(num):
                result = result > p and result or p 

            return result

        self.p = greatest_product(self.l) 
```

当我尝试创建 5 个线程来覆盖原始列表中的所有 5 位块时，下面的手动方法给出了正确的答案，`num`即我从文本中解析的个位数字列表：

```
thread1 = pThread(num)
del num[0]
thread2 = pThread(num)
del num[0]
thread3 = pThread(num)
del num[0]
thread4 = pThread(num)
del num[0]
thread5 = pThread(num)

thread1.start()
thread2.start()
thread3.start()
thread4.start()
thread5.start()

thread1.join()
thread2.join()
thread3.join()
thread4.join()
thread5.join()

def max(*args):
    result = 0
    for i in args:
        result = i > result and i or result
    return result

print max(thread1.p, thread2.p, thread3.p, thread4.p, thread5.p) 
```

但这并没有给出正确的结果：

```
threads = []
for i in range(0, 4):
    tmp = num[:]
    del tmp[0:i+1]
    thread = pThread(tmp)
    thread.start()
    threads.append(thread)

for i in range(0, 4):
    threads[i].join() 
```

我在这里做错了什么？我对多线程很陌生，所以请温柔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T06:46:29.793

有3个问题：

1.  首先是“手动”方法没有给出正确答案。恰好问题的正确答案在列表开头的偏移量 4 处。您可以通过以下方式看到这一点：

    ```
    import operator as op
    print max(reduce(op.mul, num[i:i+5]) for i in range(1000))
    for k in range(5):
        print max(reduce(op.mul, num[i:i+5]) for i in range(k, 1000, 5)) 
    ```

    您的“手动”方法的一个问题是线程共享`num`变量，每个都有相同的列表。因此，当您这样做时`del num[0]`，所有人都会`threadX.l`受到影响。您始终得到相同答案的事实是由于第二个问题。

2.  线

    ```
    for p in chunk_product(num): 
    ```

    应该：

    ```
    for p in chunk_product(l): 
    ```

    因为你想使用函数的参数`greatest_product(l)`而不是全局变量`num`。

3.  在第二种方法中，您只产生 4 个线程，因为循环范围超过`[0, 1, 2, 3]`. 此外，您要删除这些值`tmp[0:i]`而不是`tmp[0:i+1]`. 这是代码：

    ```
    threads = []
    for i in range(5):
        tmp = num[:]
        del tmp[0:i]
        thread = pThread(tmp)
        thread.start()
        threads.append(thread)

    for i in range(5):
        threads[i].join()

    print len(threads), map(lambda th: th.p, threads)
    print max(map(lambda th: th.p, threads)) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:12:49.397

我对此进行了尝试，主要是为了练习多处理，并学习如何使用 argparse。

这需要大约 4-5 gigs 的内存，以防万一你的机器没有很多。

```
python euler.py -l 50000000 -n 100 -p 8

Took 5.836833333969116 minutes
The largest product of 100 consecutive numbers is: a very large number 
```

如果你在命令行输入 python euler.py -h 你会得到：

```
usage: euler.py [-h] -l L [L ...] -n N [-p P]

Calculates the product of consecutive numbers and return the largest product.

optional arguments:
  -h, --help    show this help message and exit
  -l L [L ...]  A single number or list of numbers, where each # is seperated
                by a space
  -n N          A number that specifies how many consecutive numbers should be
                multiplied together.
  -p P          Number of processes to create. Optional, defaults to the # of
                cores on the pc. 
```

和代码：

```
"""A multiprocess iplementation for calculation the maximum product of N consecutive
numbers in a given range (list of numbers)."""

import multiprocessing
import math
import time
import operator
from functools import reduce
import argparse

def euler8(alist,lenNums):
    """Returns the largest product of N consecutive numbers in a given range"""
    return max(reduce(operator.mul, alist[i:i+lenNums]) for i in range(len(alist)))

def split_list_multi(listOfNumbers,numLength,threads):
    """Split a list into N parts where N is the # of processes."""
    fullLength = len(listOfNumbers)
    single = math.floor(fullLength/threads)
    results = {}
    counter = 0
    while counter < threads:
        if counter == (threads-1):
            temp = listOfNumbers[single*counter::]
            if counter == 0:
                results[str(counter)] = listOfNumbers[single*counter::]
            else:
                prevListIndex = results[str(counter-1)][-int('{}'.format(numLength-1))::]
                newlist = prevListIndex + temp
                results[str(counter)] = newlist
        else:
            temp = listOfNumbers[single*counter:single*(counter+1)]
            if counter == 0:
                newlist = temp
            else:
                prevListIndex = results[str(counter-1)][-int('{}'.format(numLength-1))::]
                newlist = prevListIndex + temp
            results[str(counter)] = newlist
        counter += 1
    return results,threads

def worker(listNumbers,number,output):
    """A worker. Used to run seperate processes and put the results in the queue"""
    result = euler8(listNumbers,number)
    output.put(result)

def main(listOfNums,lengthNumbers,numCores=multiprocessing.cpu_count()):
    """Runs the module.
    listOfNums must be a list of ints, or single int
    lengthNumbers is N (an int) where N is the # of consecutive numbers to multiply together
    numCores (an int) defaults to however many the cpu has, can specify a number if you choose."""

    if isinstance(listOfNums,list):
        if len(listOfNums) == 1:
            valuesToSplit = [i for i in range(int(listOfNums[0]))]
        else:
            valuesToSplit = [int(i) for i in listOfNums]
    elif isinstance(listOfNums,int):
        valuesToSplit = [i for i in range(listOfNums)]
    else:
        print('First arg must be a number or a list of numbers')

    split = split_list_multi(valuesToSplit,lengthNumbers,numCores)
    done_queue = multiprocessing.Queue()
    jobs = []
    startTime = time.time()

    for num in range(split[1]):
        numChunks = split[0][str(num)]
        thread = multiprocessing.Process(target=worker, args=(numChunks,lengthNumbers,done_queue))
        jobs.append(thread)
        thread.start()

    resultlist = []
    for i in range(split[1]):
        resultlist.append(done_queue.get())

    for j in jobs:
        j.join()

    resultlist = max(resultlist)
    endTime = time.time()
    totalTime = (endTime-startTime)/60
    print("Took {} minutes".format(totalTime))

    return print("The largest product of {} consecutive numbers is: {}".format(lengthNumbers, resultlist))            

if __name__ == '__main__':
    #To call the module from the commandline with arguments
    parser = argparse.ArgumentParser(description="""Calculates the product of consecutive numbers \
    and return the largest product.""")
    parser.add_argument('-l', nargs='+', required=True,
                       help='A single number or list of numbers, where each # is seperated by a space')
    parser.add_argument('-n', required=True, type=int,
                        help = 'A number that specifies how many consecutive numbers should be \
                        multiplied together.')
    parser.add_argument('-p', default=multiprocessing.cpu_count(), type=int,
                       help='Number of processes to create. Optional, defaults to the # of cores on the pc.')
    args = parser.parse_args()
    main(args.l, args.n, args.p) 
```

# c++ - 我需要从 GetNamedSecurityInfo API 中释放哪些返回参数？

> ID：14887038
> 
> 赞同：1
> 
> 时间：2013-02-15T01:28:15.450
> 
> 标签：c++, winapi, advapi32

当我调用[GetNamedSecurityInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446645%28v=vs.85%29.aspx) API 并且它成功时，MSDN 声明我需要调用`LocalFree`on `ppSecurityDescriptor`，但是`ppDacl`and`ppSacl`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T01:31:54.973

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446645%28v=vs.85%29.aspx)：

> 指向变量的指针，该变量接收指向安全描述符中所有者 SID 的指针
> 
> 指向变量的指针，该变量接收指向返回的安全描述符中的主要组 SID 的指针
> 
> 指向变量的指针，该变量接收指向返回的安全描述符中的 DACL 的指针
> 
> 指向变量的指针，该变量接收指向返回的安全描述符中的 SACL 的指针
> 
> 这些参数将指向 ppSecurityDescriptor 返回的安全描述符中的相应参数。

您只需要释放`ppSecurityDescriptor`其他指针指向安全描述符中的字段。

# c++ - 在八叉树数组上调用 delete

> ID：14887040
> 
> 赞同：0
> 
> 时间：2013-02-15T01:28:33.600
> 
> 标签：c++, destructor, octree

于是我写了一个八叉树结构体，如下：

```
struct octree{
    static const int maxdepth=8;
    octree* child[8];
    uint32_t rgb;//candidates for the extra 8 bits: alpha, lighting, shape(to reduce size)
    uint8_t shape;
    ~octree(){delete[] child;}
}; 
```

我担心的是析构函数......
它会调用孩子的析构函数还是我必须自己做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T01:34:31.597

不，这完全坏了。调用`delete`数组会导致未定义的行为。您需要单独删除每个元素（假设删除它们是合适的）。

一个更好的解决方案是使用容器类（例如`std::vector`or `std::array`），它会自动为您处理清理工作。如果您不准备使用现有的解决方案，那么您需要阅读[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T01:42:41.523

由于您尚未为`child`数组分配动态内存，因此不应使用`delete[]`运算符来释放它。但是，您可以`delete`将该数组的每个单独元素释放每个单独的 child `octree`。然后这将调用每个孩子的析构函数。

A good rule to remember is that each `new` must have a matching `delete` (and vice versa). And each `new[]` must have a matching `delete[]` (and vice versa).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T01:33:35.977

事实上，析构函数只会删除数组，不会删除子八叉树对象。您必须明确删除它们（当然，在删除数组之前）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T01:34:23.930

您声明的是一个包含 8 个`octree*`值的数组。您不能删除阵列本身。

你应该这样做：

```
for( int i = 0; i < 8; i++ )
    if( child[i] ) delete child[i]; 
```

如果你想一次性删除它们，你可以这样定义：

```
octree * child;

//...
child = new octree [8];

//...
delete [] child; 
```

原因是在八叉树中，您要么没有孩子，要么没有 8 个孩子。

是的：当你删除一个`octree`实例时，它的析构函数将被调用。

# c++ - OOP C++ - 错误，因为 Ah 包含 Bh，而 Bh 又包含 Ah

> ID：14887042
> 
> 赞同：0
> 
> 时间：2013-02-15T01:28:34.023
> 
> 标签：c++, oop, header, include

我正在学习 OOP 并且有疑问。假设我有一个包含**ClassA.h的文件****ClassB.h**，并且在某些时候我的**ClassB.h**需要包含**ClassA.h**。

 ******这会产生一个错误，我想我理解为什么会发生这种情况，因为我得到了一个无限的包含循环。但是在这种情况下该怎么办？有没有办法解决这个错误？或者我应该重新考虑我的课程以避免它？这是否意味着我的班级组织设计不佳？如果是这样，安排我的“类图”并避免这种情况的方法是什么？

我只想知道在这种情况下最佳实践是什么。另外，为什么“#pragma once”指令不能解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T01:32:31.897

有一种方法可以修复它，但这也意味着你的班级组织被破坏了。

修复它的方法称为“包含保护”，尽管许多编译器也支持该`#pragma once`指令。我想它不起作用，因为`#pragma once`在解析整个内容之前可能不会考虑包含头文件。而且由于递归包含发生在头文件的中间，它还没有完成解析。

包含守卫是这样的：

在 ClassA.h 中：

```
#pragma once // Just because. It really should help.
#ifndef INCLUDED_CLASSA_H
#define INCLUDED_CLASSA_H

#include "ClassB.h"

//... rest of header file

#endif 
```

在 ClassB.h 中：

```
#pragma once // Just because. It really should help.
#ifndef INCLUDED_CLASSB_H
#define INCLUDED_CLASSB_H

#include "ClassA.h"

//... rest of header file

#endif 
```

组织问题被称为循环依赖，循环依赖通常是个坏主意。有许多不同的方法可以打破它们，但使用哪种方法取决于依赖的确切性质和最初的原因。

根据问题，您可以使用多种技术之一：

*   从公共基类继承
*   将两个类中的一个转换为另一个的基类*- 这是前一个的变体。*
*   前向声明 - 这不是那么理想，因为它并没有真正打破循环依赖，它只是安排它，所以你不需要也有一个有问题的循环包含依赖。
*   将两个类的某些部分变成一个它们都可以使用的类*- 这是通用基类的另一种变体，它使用组合而不是继承。*

还有其他技术。事实上，有一本书在各种情况下使用了非常广泛的技术，因为消除循环依赖是这本书的一个重要主题。那本书是[John Lakos 的“Large-Scale C++ Software Design”](https://rads.stackoverflow.com/amzn/click/com/0201633620)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T01:52:45.103

您也可以通过使用前向声明来解决这个问题。如果您没有创建包含在标题中的类的实际对象或没有从它继承，例如如果您只需要标题中的指针，您可以这样做。

例子：

```
ClassA.h
class ClassB;
//rest of the codes here

ClassB.h
class ClassA;
//rest of the codes here

ClassA.cpp
#include ClassA.h
#include ClassB.h

ClassB.cpp
#include ClassB.h
#inlcude ClassA.h 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T01:44:23.237

在我过去的经验中，我通过使用继承解决了同样的问题。

我解决的方法是。ClassA -> ClassB : ClassB 被 ClassA 继承。ClassA 有 ClassB 和 ClassA 想要的共同需求。

然后我解决了“递归包含问题”******

# sql - 使用 SQL 插入一对多关系

> ID：14887043
> 
> 赞同：0
> 
> 时间：2013-02-15T01:28:52.383
> 
> 标签：sql, sqlite

请让我知道如何在单个查询中插入一对多关系。我有表 A (aId,name,surname) 表 B (bId, street, pincode,aId)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T01:38:05.860

你没有。这就是[交易](http://en.wikipedia.org/wiki/Database_transaction)存在的原因。您开始一个事务，提交所有查询，然后提交事务。数据库从没有完成任何查询的状态进入完成所有查询的状态。无需担心中间状态。事务是 RDBMS 实现[ACID的](http://en.wikipedia.org/wiki/ACID)[原子性](http://en.wikipedia.org/wiki/Atomicity_%28database_systems%29)组件的方式。

# wpf - 为什么我的双向 WPF 绑定变得分离？

> ID：14887045
> 
> 赞同：4
> 
> 时间：2013-02-15T01:28:57.477
> 
> 标签：wpf, data-binding

在初始值设置为 true 后，我与切换按钮的双向绑定被分离。当我取消按钮时，它不再被绑定。

我有两个切换按钮：

```
<RadioButton x:Name="BackupButton" Style="{StaticResource {x:Type ToggleButton}}" DataContext="{Binding BackupVM}" IsChecked="{Binding Mode=TwoWay, Path=IsViewVisible}">Backup</RadioButton>
<RadioButton x:Name="RestoreButton" Style="{StaticResource {x:Type ToggleButton}}">Restore</RadioButton> 
```

我希望绑定到的 BackupViewModel（例如 BackupVM）中的属性：

```
private bool _IsViewVisible = true;
public bool IsViewVisible
{
        get { return _IsViewVisible; }
        set
        {
            if (value != _IsViewVisible)
            {
                _IsViewVisible = value;
                if (PropertyChanged != null)
                    PropertyChanged(this, new PropertyChangedEventArgs("IsViewVisible"));
            }
        }
    } 
```

当一个被切换时，我会显示一个特定的用户控件（视图）并隐藏另一个。我需要做的是告诉我的底层视图模型该视图是隐藏的，这样我就可以停止一个刷新一些数据的计时器。在加载时设置 IsChecked 值后，绑定由于某种原因被分离。这是运行跟踪后的输出：

```
System.Windows.Data Warning: 52 : Created BindingExpression (hash=9343812) for Binding (hash=58368655)
System.Windows.Data Warning: 54 :   Path: 'IsViewVisible'
System.Windows.Data Warning: 57 : BindingExpression (hash=9343812): Default update trigger resolved to PropertyChanged
System.Windows.Data Warning: 58 : BindingExpression (hash=9343812): Attach to         System.Windows.Controls.RadioButton.IsChecked (hash=17818390)
System.Windows.Data Warning: 63 : BindingExpression (hash=9343812): Resolving source 
System.Windows.Data Warning: 66 : BindingExpression (hash=9343812): Found data context element: RadioButton (hash=17818390) (OK)
System.Windows.Data Warning: 74 : BindingExpression (hash=9343812): Activate with root item <null>
System.Windows.Data Warning: 102 : BindingExpression (hash=9343812):   Item at level 0 is null - no accessor
System.Windows.Data Warning: 76 : BindingExpression (hash=9343812): TransferValue - got raw value {DependencyProperty.UnsetValue}
System.Windows.Data Warning: 84 : BindingExpression (hash=9343812): TransferValue - using fallback/default value 'False'
System.Windows.Data Warning: 85 : BindingExpression (hash=9343812): TransferValue - using final value 'False'
System.Windows.Data Warning: 92 : BindingExpression (hash=9343812): Got PropertyChanged event from RadioButton (hash=17818390) for DataContext
System.Windows.Data Warning: 75 : BindingExpression (hash=9343812): Deactivate
System.Windows.Data Warning: 99 : BindingExpression (hash=9343812): Replace item at level 0 with {NullDataItem}
System.Windows.Data Warning: 74 : BindingExpression (hash=9343812): Activate with root item BackupViewModel (hash=58266349)
System.Windows.Data Warning: 104 : BindingExpression (hash=9343812):   At level 0 - for BackupViewModel.IsViewVisible found accessor RuntimePropertyInfo(IsViewVisible)
System.Windows.Data Warning: 100 : BindingExpression (hash=9343812): Replace item at level 0 with BackupViewModel (hash=58266349), using accessor RuntimePropertyInfo(IsViewVisible)
System.Windows.Data Warning: 97 : BindingExpression (hash=9343812): GetValue at level 0 from BackupViewModel (hash=58266349) using RuntimePropertyInfo(IsViewVisible): 'True'
System.Windows.Data Warning: 76 : BindingExpression (hash=9343812): TransferValue - got raw value 'True'
System.Windows.Data Warning: 85 : BindingExpression (hash=9343812): TransferValue - using final value 'True'
System.Windows.Data Warning: 75 : BindingExpression (hash=9343812): Deactivate
System.Windows.Data Warning: 99 : BindingExpression (hash=9343812): Replace item at level 0 with {NullDataItem}
System.Windows.Data Warning: 59 : BindingExpression (hash=9343812): Detach 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:20:40.357

你确定它真的没有“绑定”吗？我也遇到过这种情况，看起来好像在你的身上不见了......你没有任何迹象表明

NotifyOnSourceUpdated=true

在您的 {binding Mode.... } 内容中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:22:23.250

似乎这是一个语法问题......它似乎根本没有绑定到你`ViewModel`。尝试这个：

```
<RadioButton Grid.Row="0" x:Name="BackupButton" Style="{StaticResource {x:Type ToggleButton}}" IsChecked="{Binding IsViewVisible, Mode=TwoWay}">
    Backup
    <RadioButton.DataContext>
        <local:BackupVM />
    </RadioButton.DataContext>
</RadioButton> 
```

您将其定义`local namespace`为：

```
xmlns:local="clr-namespace:WpfApplication1" 
```

注意：替换`WpfApplication1`为您的命名空间的名称。

# c# - 防止数组上的 IndexOutOfRangeException

> ID：14887047
> 
> 赞同：2
> 
> 时间：2013-02-15T01:29:09.067
> 
> 标签：c#

当我尝试访问特定的数组索引时，我正在寻找一种防止 IndexOutOfRangeException 的方法。

我有一个通用代码，有时它的值为`array[index]`，而其他时候则没有。

所以，在试图获得它的价值之前，我已经尝试了这些检查：

```
if(array[index] != null) {
    ... Do Stuff
} 
```

也试过：

```
if(!String.IsNullOrEmpty(array[index])) {
    ... Do Stuff
} 
```

他们都引发了 IndexOutOfRangeException

我该如何执行此检查？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T01:30:46.077

很简单：

```
if (index < array.Length) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T01:43:27.823

您也可以使用 try...catch 来抑制错误。蛮横的？

```
try
{
   var x = array[index];
}
catch(Exception ex)
{
} 
```

而且更好

```
if(array.Length > index)
   var x = array[index]; 
```

# javascript - jQuery - 找到一个类并返回真/假

> ID：14887055
> 
> 赞同：18
> 
> 时间：2013-02-15T01:30:14.277
> 
> 标签：javascript, jquery, find

我想检查类是否存在于子级中`li`，如果类存在返回`true`或`defined`。

**HTML**

```
<li class="show-more">
<a> if found selected then add to this</a>
<ul>
<li><a> sub-menu</a></li>
<li><a> sub-menu</a></li>
<li><a class="selected"> sub-menu</a></li>
<li><a> sub-menu</a></li>
</ul>
</li> 
```

这是我的代码，但不会返回 true 或 false，它返回锚的 url

```
var active_sub_menu = $('li.show-more ul li').find('selected');

alert(active_sub_menu);
if(typeof active_sub_menu == 'defined'){
    $('li.show-more > a').addClass('selected');
} 
```

请不要建议使用 CSS，我只需要 javascript

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-15T01:36:41.323

为什么不简单地选择`.hasClass()`or `length`：

```
if ( $("selector").length ) {   /*EXISTS (greater than 0) */  } 
```

或者

```
if ( $("selector")[0] ) {   /*EXISTS (not undefined) */  } 
```

或者

```
if ( $("selector").hasClass("someClass") ) {   /*EXISTS (has class) */  } 
```

```
$('.show-more').each(function () {

  if ( $(this).find("li a.seleted").length ) {
    console.log('FOUND');
    $(this).children("a").addClass('selected'); // Make main anchor  also selected 
  } else {
    console.log('NOT FOUND');
  }

});
```

```
.selected {
  background: red;
}
```

```
<ul>
  <li class="show-more">
    <a> if found .selected then add also to this anchor</a>
    <ul>
      <li><a> sub-menu</a></li>
      <li><a> sub-menu</a></li>
      <li><a class="selected"> sub-menu</a></li>
      <li><a> sub-menu</a></li>
    </ul>
  </li>
</ul>

<script src="//code.jquery.com/jquery-3.1.0.js"></script>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T01:33:39.873

```
if($('li.show-more ul li').hasClass('defined')) {
    $('li.show-more > a').addClass('selected');
} 
```

我想这就是你想要的[`typeof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)？

另外一个选项：

```
var active_sub_menu = $('li.show-more ul li').find('.selected');
if(active_sub_menu.length) {
    $('li.show-more > a').addClass('selected');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T01:33:28.237

用于`length`测试选择器是否返回元素

```
if( $('li.show-more ul li').find('selected').length){
   $('li.show-more > a').addClass('selected');
} 
```

# windows - 在自定义 GINA 上执行 telnet 命令

> ID：14887056
> 
> 赞同：0
> 
> 时间：2013-02-15T01:30:18.920
> 
> 标签：windows, telnet, gina

我有一个自定义 GINA (Windows Server 2003 R2)，它在 WlxLoggedOnSAS 和 WlxLoggedOffSAS 中启动一个模式窗口，其中包含我的所有工作流程。它链接到 MS GINA。

当我尝试使用 telnet（如关机）执行远程脚本时，它失败了。有谁知道为什么会这样？有没有办法处理这个？可能在 GINA 中处理事件？

我一直在寻找解决方案，但没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:20:26.537

我设法弄清楚了这一点。只是为了其他遇到相同情况的人的利益而回答我自己的问题。基本上，我将 GINA 分为 3 个州——

1.  安全访问序列 (CAD) 屏幕：这是提示用户输入 Ctrl-Alt-Del 的屏幕。远程 telnet 命令将在这里工作。

2.  WlxLoggedOffSAS 屏幕：这是创建自定义 GINA UI 或 MS GINA UI 的登录状态。通常，该线程被阻塞。此时，远程关机命令将不起作用。要处理这种情况，请继续阅读。

3.  WlxLoggedOnSAS 屏幕：这是创建自定义 GINA UI 或 MS GINA UI 的桌面锁定状态。此时，关闭命令将与 /f 开关一起使用（强制关闭）。

要绕过状态 2，您可以执行以下两项操作之一：

1.  使用类似 Windows 任务计划程序来启动重新启动。
2.  向您的自定义 GINA DLL 添加一个新方法，该方法实质上切换到 CAD 屏幕（状态 1）。您可以使用 rundll32.exe 调用该 DLL 方法。一个切换到状态 1，只需调用关机，它就会工作。

# sql - Oracle：将相似的名称组合在一起

> ID：14887061
> 
> 赞同：0
> 
> 时间：2013-02-15T01:30:49.897
> 
> 标签：sql, oracle, normalization

```
ItemNo  Name      Requested Qty
850045  MICHAEL         46  1045
850045  MICHAEL JACKSON 38  834
850045  LARRY SHEARIN   22  473
850045  Michael Jackson 11  233
850045  Larry           5   84 
```

我有一个请求者名称未标准化的表。迈克尔和迈克尔杰克是同一个人。拉里和拉里·希林也是同一个人。有没有办法组合行数据，以便 Requested 和 Qty 也正确总结？我在想可能有某种Oracle函数或分析可以做到这一点......

```
ItemNo  Name      Requested Qty
850045  MICHAEL JACKSON 95  2112
850045  LARRY SHEARIN   27  557 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T01:55:22.623

可能还有另一种方法，但这应该使用 UPPER 并将任何名字（不带空格）匹配到任何全名（带空格） - 如果多个全名匹配，则结果将不准确。

```
SELECT T.ItemNo, 
  T.Name, 
  T.Requested + T2.Requested Requested,
  T.Qty + T2.Qty Qty
FROM (
    SELECT ItemNo, UPPER(Name) as Name, SUM(Requested) Requested, SUM(Qty) Qty
    FROM YourTable
    WHERE Name LIKE '% %'
    GROUP BY ItemNo, UPPER(Name)
  ) T
  JOIN (
    SELECT ItemNo, UPPER(Name) as Name, SUM(Requested) Requested, SUM(Qty) Qty
    FROM YourTable
    WHERE Name NOT LIKE '% %'
    GROUP BY ItemNo, UPPER(Name)
  ) T2 ON T.ItemNo = T2.ItemNo AND T.Name LIKE T2.Name||' %' 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!4/2486e/4)。

结果如下：

```
ITEMNO  NAME            REQUESTED  QTY
850045  MICHAEL JACKSON 95         2112
850045  LARRY SHEARIN   27         557 
```

我假设你是总（32）拉里被误认为上面（22 + 5）？

希望这可以帮助。

# android - android，动态更改选项卡内的片段

> ID：14887065
> 
> 赞同：1
> 
> 时间：2013-02-15T01:31:05.283
> 
> 标签：android, tabs, android-tabhost

我正在尝试更改使用`FragmentTabHost`and创建的选项卡的内容`getSupportFragmentManager()`，但我不知道该怎么做。这是我所拥有的：

```
mTabHost = new FragmentTabHost(this);
    setContentView(mTabHost);

    mTabHost.setup(this, getSupportFragmentManager(),R.id.menu_settings);
    mTabHost.addTab(mTabHost.newTabSpec("A").setIndicator("A"),
            A.class, null);
    mTabHost.addTab(mTabHost.newTabSpec("B").setIndicator("B"),
            B.class, null);
    mTabHost.addTab(mTabHost.newTabSpec("C").setIndicator("C"),
            C.class, null); 
```

每个加载的类都扩展了片段，并在`onCreateView`它们上膨胀了它们的布局。

问题是我在其中一个中有一个对话框（例如 A.class ），并且根据对话框的响应，我需要导航到片段 D，将其放在选项卡 C 上我应该怎么做？我可以从对话框与创建选项卡并指定片段的活动进行通信，但我不知道如何更改选项卡内的片段（在本例中为 C ）。

作为总结，我需要在放置 C 的选项卡内将片段 C 更改为 D。我正在使用支持库。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:31:19.933

创建一个类就像一个片段容器。

例如：

```
public class FragmentContainer extends SherlockFragment implements OnBackStackChangedListener {
public static final String PARAM_CONTENT_FRAGMENT = "param_content_fragment";

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    return inflater.inflate(R.layout.frag_container, null);
}

public void replaceContent(Class<? extends Fragment> clz, Bundle args) {
    FragmentTransaction tx = getChildFragmentManager().beginTransaction();

    tx.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);

    // save
    Fragment curFrag = getChildFragmentManager().findFragmentById(R.id.fragment_content);
    tx.addToBackStack(curFrag.getClass().getSimpleName());

    // change
    try {
        Fragment newFragment = clz.newInstance();
        newFragment.setArguments(args);
        tx.replace(R.id.fragment_content, newFragment, clz.getClass().getSimpleName());
        tx.commit();
    } catch (Exception e) {
        throw new RuntimeException(e);
    }

}

@Override
public void onResume() {
    super.onResume();
    Fragment f = getChildFragmentManager().findFragmentById(R.id.fragment_content);
    if (f == null) {
        Class<? extends Fragment> claz = (Class<? extends Fragment>) getArguments().getSerializable(
                PARAM_CONTENT_FRAGMENT);
        FragmentTransaction tx = getChildFragmentManager().beginTransaction();
        try {
            f = claz.newInstance();
            f.setTargetFragment(this, 0);
            tx.add(R.id.fragment_content, f);
            tx.commit();
        } catch (Exception e) {
            e.printStackTrace();
            throw new RuntimeException(e);
        }

    }
} 
```

这里有几个关键点：

1.  使用 FragmentContainer.class 初始化第三个选项卡，并提供 C.class 作为片段参数。（参数键是 PARAM_CONTENT_FRAGMENT）

2.  onCreateView() 只需创建一个带有 id @+id/fragment_content 的 FrameLayout，这是我们放置子片段的地方。

3.  onResume() 如果不存在，则将子片段放入 FrameLayout。

4.  replaceContent() 当 Fragment-C 想要将其自身更改为 Fragment-D 时调用此方法。

在 Frament-C 中，例如：

```
((FragmentContainer)getParentFragment() ).replaceContent( D.class, null ); 
```

# css - css - 定义兄弟元素的样式

> ID：14887066
> 
> 赞同：3
> 
> 时间：2013-02-15T01:31:05.613
> 
> 标签：css

我正在尝试根据第一个兄弟的类定义第二个兄弟的子元素的样式。

这是我想要实现的一个例子

```
<div >
      <div class="one">
          <div class="find edit">
              Find me
          </div>
      </div>
      <div class="two">
          <div class="change">
              Change me
          </div>
      </div>
</div> 
```

在此示例中，如果找到“编辑”类，我希望“更改我”为绿色。是否有可能纯粹基于css来实现？

非常感谢帮助。

谢谢， 美达

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T01:54:44.483

据我所知，无法访问父选择器（我希望是这样）。如果您可以考虑这种结构，那将完全没有问题：

### HTML

```
<div>
  <div class="one edit">
    <div class="find">
      Find me
    </div>
  </div>
  <div class="two">
    <div class="change">
      Change me
    </div>
  </div>
</div> 
```

### CSS

```
.one.edit + .two .change { color: green; } 
```

* * *

如果没有，您可以使用一点 JavaScript 轻松完成您的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T01:41:37.440

**更新：**

现在我注意到`edit`孩子需要的课程。你不能。

只是你需要一个`parent`选择器之类的东西，这在 CSS 3 中不存在，但它在 CSS 4 中被建议，但这远不会很快发生。

更多在这里：

[“包含 bar 的 foo”的 CSS 选择器？](https://stackoverflow.com/questions/2000582/css-selector-for-foo-that-contains-bar/2000614#2000614)

.

**原来的：**

根据您关心的浏览器，这可能有效：

```
div.one + div.two > div.change {
    color: green;
} 
```

参考：

[http://www.w3.org/TR/CSS21/selector.html#adjacent-selectors](http://www.w3.org/TR/CSS21/selector.html#adjacent-selectors)

现场示例：

[http://jsfiddle.net/Meligy/NVjq6/](http://jsfiddle.net/Meligy/NVjq6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T01:52:13.780

在这里你可以找到答案：

[活动孩子的父母的复杂 CSS 选择器](https://stackoverflow.com/questions/45004/complex-css-selector-for-parent-of-active-child)

从链接复制的简短答案：

> **选择器无法上升**
> 
> CSS 无法选择满足特定条件的元素的父级或祖先。更高级的选择器方案（例如 XPath）将支持更复杂的样式表。然而，CSS 工作组拒绝父选择器提案的主要原因与浏览器性能和增量渲染问题有关。

# c++ - 如何优雅地唤醒或终止睡眠的 std::thread？

> ID：14887067
> 
> 赞同：1
> 
> 时间：2013-02-15T01:31:20.090
> 
> 标签：c++, multithreading, c++11, cross-platform, portability

```
#include <thread>
#include <chrono>

using namespace std:

void f()
{
    // Sleeping for a very long while
    while (SOCKET s = accept(listening_socket, ...))
    {
         // ...
    }

}

int main()
{
    std::thread t(f);
    DoSomething();
    t.???(); /* What to place here to wake/terminate thread f? */
} 
```

在Win32下，我可以用`TerminateThread()`杀死一个线程。但我想要的是一种跨平台的方法来做到这一点。

我应该如何在 C++ 中优雅地做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T01:38:48.070

我建议在广播信号、信号量、条件变量或其他东西上睡觉，而不是阻塞睡眠。然后您的应用程序只需设置信号，任何正在*睡觉*的人都会醒来并可以退出。这是一个更清洁的解决方案，因为它让线程体有机会清理它可能正在做的任何事情——包括释放锁！

*对更新的响应*
在这种特定情况下，在调用`select`之前调用超时`accept`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T02:02:33.603

第一个问题来自阻塞模式套接字接受，你应该使用非阻塞套接字模式。

您可以在 while 循环中设置标志，例如：

```
struct AcceptHandler
{
  AcceptHandler()
  : is_terminated(false)
  {
  }

  void accept()
  {
    while(!is_terminated)
    {
       // select
       // accept
      cout << " in loop " << endl;
    }
  }

  void terminate()
  {
    is_terminated = true;
  }

private:
  std::atomic<bool> is_terminated;
};

int main()
{
  AcceptHandler ah;
  std::thread t(std::bind(&AcceptHandler::accept, std::ref(ah)));
  t.join(); /// this is just demo, it blocks here

  ah.terminate();

  return 0;
} 
```

我在示例中使用了一个标志（is_terminated），您可以使用条件变量（首选方式）。

# android - 使用服务的 tabactivity 和 mainactivity 问题

> ID：14887076
> 
> 赞同：0
> 
> 时间：2013-02-15T01:31:59.030
> 
> 标签：android, android-layout, android-tabhost, android-service, android-tabactivity

嗨，我有我的应用程序 aacplayer，但我试图实现一个选项卡菜单，我实现了这一点，但是当我的应用程序打开时，我的问题在这里必须运行 MainActivity.java 但是那个有音频服务，但我添加了另一个选项卡并且工作完美，那些没有使用服务。

这是错误日志：

```
02-14 19:24:11.685: E/AndroidRuntime(31027): java.lang.RuntimeException: Error receiving broadcast Intent { act=STARTED flg=0x10 } in com.webcraftbd.radio.MainActivity$RadioUpdateReceiver@42e09468 
```

tabactivity.java：

```
public class AndroidTabLayoutActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TabHost tabHost = getTabHost();

        // Tab for Photos
        TabSpec photospec = tabHost.newTabSpec("En Vivo");
        photospec.setIndicator("En Vivo", getResources().getDrawable(R.drawable.icon_songs_tab));
        Intent photosIntent = new Intent(this, MainActivity.class);
        photospec.setContent(photosIntent);

        // Tab for Songs
        TabSpec songspec = tabHost.newTabSpec("Twitter");
        // setting Title and Icon for the Tab
        songspec.setIndicator("Twitter", getResources().getDrawable(R.drawable.icon_photos_tab));
        Intent songsIntent = new Intent(this, SongsActivity.class);
        songspec.setContent(songsIntent);

        // Tab for Videos
        TabSpec videospec = tabHost.newTabSpec("Contactenos");
        videospec.setIndicator("Contactenos", getResources().getDrawable(R.drawable.icon_videos_tab));
        Intent videosIntent = new Intent(this, VideosActivity.class);
        videospec.setContent(videosIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(photospec); // Adding photos tab
        tabHost.addTab(songspec); // Adding songs tab
        tabHost.addTab(videospec); // Adding videos tab

        for(int i=0;i<tabHost.getTabWidget().getChildCount();i++) 
        {
            TextView tv = (TextView) tabHost.getTabWidget().getChildAt(i).findViewById(android.R.id.title);
            tv.setTextColor(Color.WHITE);
            tv.setPadding(0, 0, 0, 5);
            tv.setShadowLayer(2, 2, 2, Color.BLACK);
        } 

    }

} 
```

MainActivity.java：

```
public class MainActivity extends BaseActivity{     

    private static boolean displayAd;

    private Button playButton;
    private Button pauseButton;
    private Button stopButton;
    private Button nextButton;
    private Button previousButton;
    private ImageView stationImageView;

    private TextView albumTextView;
    private TextView artistTextView;
    private TextView trackTextView;
    private TextView statusTextView;    
    private TextView timeTextView;

    private Intent bindIntent;
    private TelephonyManager telephonyManager;
    private boolean wasPlayingBeforePhoneCall = false;
    private RadioUpdateReceiver radioUpdateReceiver;
    private RadioService radioService;
    private AdView adView;

    private String STATUS_BUFFERING;
    private static final String TYPE_AAC = "aac";
    private static final String TYPE_MP3 = "mp3";
    private SeekBar volumeSeekbar = null;
    private AudioManager audioManager = null;

    private Handler handler;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
        setVolumeControlStream(AudioManager.STREAM_MUSIC);

        setContentView(R.layout.activity_main);
        initControls();
        // Bind to the service  
        try {
            bindIntent = new Intent(this, RadioService.class);
            bindService(bindIntent, radioConnection, Context.BIND_AUTO_CREATE);
        }
        catch(Exception e) {

        }

        telephonyManager = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
        if(telephonyManager != null) {
            telephonyManager.listen(phoneStateListener, PhoneStateListener.LISTEN_CALL_STATE);
        }

        handler = new Handler();

        initialize();       
    }

    private void initControls() {
        try {
            volumeSeekbar = (SeekBar) findViewById(R.id.seekBar1);
            audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
            volumeSeekbar.setMax(audioManager
                    .getStreamMaxVolume(AudioManager.STREAM_MUSIC));
            volumeSeekbar.setProgress(audioManager
                    .getStreamVolume(AudioManager.STREAM_MUSIC));

            volumeSeekbar
                    .setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
                        @Override
                        public void onStopTrackingTouch(SeekBar arg0) {
                        }

                        @Override
                        public void onStartTrackingTouch(SeekBar arg0) {
                        }

                        @Override
                        public void onProgressChanged(SeekBar arg0,
                                int progress, boolean arg2) {
                            audioManager.setStreamVolume(
                                    AudioManager.STREAM_MUSIC, progress, 0);
                        }
                    });
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

        if (keyCode == KeyEvent.KEYCODE_VOLUME_UP) {
            int index = volumeSeekbar.getProgress();
            volumeSeekbar.setProgress(index + 1);
            return false;
        } else if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
            int index = volumeSeekbar.getProgress();
            volumeSeekbar.setProgress(index - 1);
            return false;
        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

        if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT || newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
            setContentView(R.layout.activity_main);

            try {

                handler.post( new Runnable() {
                    public void run() {
                        initialize();

                        if(radioService.getTotalStationNumber()<=1) {
                            nextButton.setEnabled(false);
                            nextButton.setVisibility(View.INVISIBLE);
                            previousButton.setEnabled(false);
                            previousButton.setVisibility(View.INVISIBLE);
                        }

                        updateStatus();
                        updateMetadata();
                        //updateAlbum();

                        System.out.println("radioService.isPreparingStarted() = "+radioService.isPreparingStarted());                           
                    }
                });
            }
            catch(Exception e) {
                e.printStackTrace();
            }
        }
    }

    public void initialize() {
        try {

            displayAd = (boolean) Boolean.parseBoolean(getResources().getString(R.string.is_display_ad));

            STATUS_BUFFERING = getResources().getString(R.string.status_buffering);

            playButton = (Button) this.findViewById(R.id.PlayButton);
            pauseButton = (Button) this.findViewById(R.id.PauseButton);
            stopButton = (Button) this.findViewById(R.id.StopButton);   
            nextButton = (Button) this.findViewById(R.id.NextButton);
            previousButton = (Button) this.findViewById(R.id.PreviousButton);
            pauseButton.setEnabled(false);
            pauseButton.setVisibility(View.INVISIBLE);
            stationImageView = (ImageView) findViewById(R.id.stationImageView);

            playButton.setEnabled(true);
            stopButton.setEnabled(false);

            albumTextView = (TextView) this.findViewById(R.id.albumTextView);
            artistTextView = (TextView) this.findViewById(R.id.artistTextView);
            trackTextView = (TextView) this.findViewById(R.id.trackTextView);
            statusTextView = (TextView) this.findViewById(R.id.statusTextView);
            timeTextView = (TextView) this.findViewById(R.id.timeTextView);

            startService(new Intent(this, RadioService.class));

            displayAd();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void displayAd() {
        if(displayAd==true) {
            // Create the adView
            try {

                if (adView != null) {
                  adView.destroy();
                }

                adView = new AdView(this, AdSize.SMART_BANNER, this.getString(R.string.admob_publisher_id));
                LinearLayout layout = (LinearLayout)findViewById(R.id.adLayout);
                layout.addView(adView);
                adView.loadAd(new AdRequest());
            } catch (OutOfMemoryError e) {
                e.printStackTrace();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        else {
            LinearLayout layout = (LinearLayout)findViewById(R.id.adLayout);
            layout.setLayoutParams(new LinearLayout.LayoutParams(0,0));
            layout.setVisibility(View.INVISIBLE);
        }
    }

    public void updatePlayTimer() {
        timeTextView.setText(radioService.getPlayingTime());

        final Handler handler = new Handler();
        Timer timer = new Timer();
        TimerTask doAsynchronousTask = new TimerTask() {   
            @Override
            public void run() {
                handler.post(new Runnable() {
                    public void run() {    
                        timeTextView.setText(radioService.getPlayingTime());                        
                    }
                });
            }
        };
        timer.schedule(doAsynchronousTask, 0, 1000);        
    }

    public void onClickPlayButton(View view) {
        radioService.play();
    }

    public void onClickPauseButton(View view) {
        radioService.pause();
    }

    public void onClickStopButton(View view) {      
        radioService.stop();
        //resetMetadata();
        //updateDefaultCoverImage();
    }

    public void onClickNextButton(View view) {
        resetMetadata();
        playNextStation();
        //updateDefaultCoverImage();        
    }

    public void onClickPreviousButton(View view) {
        resetMetadata();
        playPreviousStation();
        //updateDefaultCoverImage();                
    }

    public void playNextStation() {
        radioService.stop();
        radioService.setNextStation();      

        /*
        if(radioService.isPlaying()) {
            radioService.setStatus(STATUS_BUFFERING);
            updateStatus();
            radioService.stop();
            radioService.play();
        }
        else {
            radioService.stop();
        }
        */
    }

    public void playPreviousStation() {
        radioService.stop();
        radioService.setPreviousStation();      

        /*
        if(radioService.isPlaying()) {
            radioService.setStatus(STATUS_BUFFERING);
            updateStatus();
            radioService.stop();
            radioService.play();
        }
        else {
            radioService.stop();
        }
        */
    }

    public void updateDefaultCoverImage() {

        String mDrawableName = "station_"+(radioService.getCurrentStationID()+1);
        int resID = getResources().getIdentifier(mDrawableName , "drawable", getPackageName());

        stationImageView.setImageResource(resID);
        albumTextView.setText("");
    }

    public void updateAlbum() {

        String album = radioService.getAlbum();
        String artist = radioService.getArtist();
        String track = radioService.getTrack();
        Bitmap albumCover = radioService.getAlbumCover();

        albumTextView.setText(album);

        if(albumCover==null || (artist.equals("") && track.equals("")))
            updateDefaultCoverImage();
        else {
            stationImageView.setImageBitmap(albumCover);
            radioService.setAlbum(LastFMCover.album);

            if(radioService.getAlbum().length() + radioService.getArtist().length()>50) {
                albumTextView.setText("");
            }
        }
    }

    public void updateMetadata() {
        String artist = radioService.getArtist();
        String track = radioService.getTrack();
        //if(artist.length()>30)
            //artist = artist.substring(0, 30)+"...";
        artistTextView.setText(artist);
        trackTextView.setText(track);
        albumTextView.setText("");
    }

    public void resetMetadata() {
        radioService.resetMetadata();
        artistTextView.setText("");
        albumTextView.setText("");
        trackTextView.setText("");
    }

    @Override
    public void onDestroy() {

        super.onDestroy();

        if(radioService!=null) {
            if(!radioService.isPlaying() && !radioService.isPreparingStarted()) {
                //radioService.stopSelf();
                radioService.stopService(bindIntent);
            }
        }           

        if (adView != null) {
          adView.destroy();
        }

        if(telephonyManager != null) {
            telephonyManager.listen(phoneStateListener, PhoneStateListener.LISTEN_NONE);
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        if (radioUpdateReceiver != null) 
            unregisterReceiver(radioUpdateReceiver);
    }

    @Override
    protected void onResume() {     
        super.onResume();

        /* Register for receiving broadcast messages */
        if (radioUpdateReceiver == null) radioUpdateReceiver = new RadioUpdateReceiver();   
        registerReceiver(radioUpdateReceiver, new IntentFilter(RadioService.MODE_CREATED));
        registerReceiver(radioUpdateReceiver, new IntentFilter(RadioService.MODE_DESTROYED));
        registerReceiver(radioUpdateReceiver, new IntentFilter(RadioService.MODE_STARTED));
        registerReceiver(radioUpdateReceiver, new IntentFilter(RadioService.MODE_START_PREPARING));
        registerReceiver(radioUpdateReceiver, new IntentFilter(RadioService.MODE_PREPARED));
        registerReceiver(radioUpdateReceiver, new IntentFilter(RadioService.MODE_PLAYING));
        registerReceiver(radioUpdateReceiver, new IntentFilter(RadioService.MODE_PAUSED));
        registerReceiver(radioUpdateReceiver, new IntentFilter(RadioService.MODE_STOPPED));
        registerReceiver(radioUpdateReceiver, new IntentFilter(RadioService.MODE_COMPLETED));
        registerReceiver(radioUpdateReceiver, new IntentFilter(RadioService.MODE_ERROR));
        registerReceiver(radioUpdateReceiver, new IntentFilter(RadioService.MODE_BUFFERING_START));
        registerReceiver(radioUpdateReceiver, new IntentFilter(RadioService.MODE_BUFFERING_END));
        registerReceiver(radioUpdateReceiver, new IntentFilter(RadioService.MODE_METADATA_UPDATED));
        registerReceiver(radioUpdateReceiver, new IntentFilter(RadioService.MODE_ALBUM_UPDATED));

        if(wasPlayingBeforePhoneCall) {
            radioService.play();
            wasPlayingBeforePhoneCall = false;
        }
    }

    /* Receive Broadcast Messages from RadioService */
    private class RadioUpdateReceiver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {

            if (intent.getAction().equals(RadioService.MODE_CREATED)) {

            }
            else if (intent.getAction().equals(RadioService.MODE_DESTROYED)) {
                playButton.setEnabled(true);
                pauseButton.setEnabled(false);
                stopButton.setEnabled(false);
                playButton.setVisibility(View.VISIBLE);
                pauseButton.setVisibility(View.INVISIBLE);
                //updateDefaultCoverImage();
                updateMetadata();
                updateStatus();
            }
            else if (intent.getAction().equals(RadioService.MODE_STARTED)) {                
                pauseButton.setEnabled(false);              
                playButton.setVisibility(View.VISIBLE);
                pauseButton.setVisibility(View.INVISIBLE);              

                playButton.setEnabled(true);
                stopButton.setEnabled(false);
                updateStatus();             
            }
            else if (intent.getAction().equals(RadioService.MODE_START_PREPARING)) {                
                pauseButton.setEnabled(false);              
                playButton.setVisibility(View.VISIBLE);
                pauseButton.setVisibility(View.INVISIBLE);              
                playButton.setEnabled(false);           
                stopButton.setEnabled(true);
                updateStatus();
            }
            else if (intent.getAction().equals(RadioService.MODE_PREPARED)) {
                playButton.setEnabled(true);
                pauseButton.setEnabled(false);
                stopButton.setEnabled(false);
                playButton.setVisibility(View.VISIBLE);
                pauseButton.setVisibility(View.INVISIBLE);
                updateStatus();
            }
            else if (intent.getAction().equals(RadioService.MODE_BUFFERING_START)) {
                updateStatus();
            }
            else if (intent.getAction().equals(RadioService.MODE_BUFFERING_END)) {
                updateStatus();
            }
            else if (intent.getAction().equals(RadioService.MODE_PLAYING)) {
                if(radioService.getCurrentStationType().equals(TYPE_AAC)) {
                    playButton.setEnabled(false);
                    stopButton.setEnabled(true);
                }
                else {
                    playButton.setEnabled(false);
                    pauseButton.setEnabled(true);
                    stopButton.setEnabled(true);
                    playButton.setVisibility(View.INVISIBLE);
                    pauseButton.setVisibility(View.VISIBLE);
                }
                updateStatus();
            }
            else if(intent.getAction().equals(RadioService.MODE_PAUSED)) {
                playButton.setEnabled(true);
                pauseButton.setEnabled(false);
                stopButton.setEnabled(true);
                playButton.setVisibility(View.VISIBLE);
                pauseButton.setVisibility(View.INVISIBLE);
                updateStatus();
            }
            else if(intent.getAction().equals(RadioService.MODE_STOPPED)) {
                playButton.setEnabled(true);
                pauseButton.setEnabled(false);
                stopButton.setEnabled(false);
                playButton.setVisibility(View.VISIBLE);
                pauseButton.setVisibility(View.INVISIBLE);
                updateStatus();
            }
            else if(intent.getAction().equals(RadioService.MODE_COMPLETED)) {
                playButton.setEnabled(true);
                pauseButton.setEnabled(false);
                stopButton.setEnabled(false);
                playButton.setVisibility(View.VISIBLE);
                pauseButton.setVisibility(View.INVISIBLE);
                updateStatus();
            }
            else if(intent.getAction().equals(RadioService.MODE_ERROR)) {
                playButton.setEnabled(true);
                pauseButton.setEnabled(false);
                stopButton.setEnabled(false);
                playButton.setVisibility(View.VISIBLE);
                pauseButton.setVisibility(View.INVISIBLE);
                updateStatus();
            }
            else if(intent.getAction().equals(RadioService.MODE_METADATA_UPDATED)) {
                updateMetadata();
                updateStatus();
                //updateDefaultCoverImage();
            }
            else if(intent.getAction().equals(RadioService.MODE_ALBUM_UPDATED)) {
                //updateAlbum();
            }
        }
    }

    PhoneStateListener phoneStateListener = new PhoneStateListener() {
        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            if (state == TelephonyManager.CALL_STATE_RINGING) {
                wasPlayingBeforePhoneCall = radioService.isPlaying();
                radioService.stop();
            } else if(state == TelephonyManager.CALL_STATE_IDLE) {
                if(wasPlayingBeforePhoneCall) {
                    radioService.play();
                }
            } else if(state == TelephonyManager.CALL_STATE_OFFHOOK) {
                //A call is dialing, active or on hold
                wasPlayingBeforePhoneCall = radioService.isPlaying();
                radioService.stop();
            }
            super.onCallStateChanged(state, incomingNumber);
        }
    };

    public void updateStatus() {
        String status = radioService.getStatus();
        if(radioService.getTotalStationNumber() > 1) {
            if(status!="")
                status = radioService.getCurrentStationName()+" - "+status;
            else
                status = radioService.getCurrentStationName();
        }

        try {   
                statusTextView.setText(status);
        }
        catch(Exception e) {
            e.printStackTrace();
        }
    }

    // Handles the connection between the service and activity
    private ServiceConnection radioConnection = new ServiceConnection() {
        public void onServiceConnected(ComponentName className, IBinder service) {
            radioService = ((RadioService.RadioBinder)service).getService();

            if(radioService.getTotalStationNumber()<=1) {
                nextButton.setEnabled(false);
                nextButton.setVisibility(View.INVISIBLE);
                previousButton.setEnabled(false);
                previousButton.setVisibility(View.INVISIBLE);
            }
            updateStatus();
            updateMetadata();
            //updateAlbum();
            updatePlayTimer();
            radioService.showNotification();
            //radioService.play();

        }
        public void onServiceDisconnected(ComponentName className) {
            radioService = null;
        }
    };

} 
```

基本活动.java：

```
public class BaseActivity extends Activity {

    private Intent bindIntent;
    private RadioService radioService;

    private static boolean isExitMenuClicked;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        isExitMenuClicked = false;

        // Bind to the service  
        bindIntent = new Intent(this, RadioService.class);
        bindService(bindIntent, radioConnection, Context.BIND_AUTO_CREATE);

        setVolumeControlStream(AudioManager.STREAM_MUSIC);
    }

    @Override
    protected void onResume() {     
        super.onResume();
        if(isExitMenuClicked==true)
            finish();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Intent i;

        final String thisClassName = this.getClass().getName();
        final String thisPackageName = this.getPackageName();

        switch (item.getItemId()) {
        case R.id.radio:
            if(!thisClassName.equals(thisPackageName+".MainActivity")) {
                i = new Intent(this, MainActivity.class);
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(i);
                return true;
            }
            break;
        case R.id.facebook:
            if(!thisClassName.equals(thisPackageName+".FacebookActivity")) {
                i = new Intent(this, FacebookActivity.class);
                startActivity(i);
                return true;
            }
            break;
        case R.id.twitter:
            if(!thisClassName.equals(thisPackageName+".TwitterActivity")) {
                i = new Intent(this, TwitterActivity.class);
                startActivity(i);
                return true;
            }
            break;
        case R.id.about:
            if(!thisClassName.equals(thisPackageName+".AboutActivity")) {
                i = new Intent(this, AboutActivity.class);
                startActivity(i);
                return true;
            }
            break;
        case R.id.exit:
            String title = "Exit Radio";
            String message = "Desea salir de la aplicacion?";
            String buttonYesString = "Si";
            String buttonNoString = "No";

            isExitMenuClicked = true;

            AlertDialog.Builder ad = new AlertDialog.Builder(this);
            //ad.setTitle(title);
            ad.setMessage(message);
            ad.setCancelable(true);
            ad.setPositiveButton(buttonYesString, new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {                    

                    if(radioService!=null) {
                        radioService.exitNotification();
                        radioService.stop();                        
                        radioService.stopService(bindIntent);                       
                        isExitMenuClicked = true;
                        finish();
                    }
                }
            });

            ad.setNegativeButton(buttonNoString, null);

            ad.show();

            return true;
        }
        return super.onOptionsItemSelected(item);
    }

    // Handles the connection between the service and activity
    private ServiceConnection radioConnection = new ServiceConnection() {
        public void onServiceConnected(ComponentName className, IBinder service) {
            radioService = ((RadioService.RadioBinder)service).getService();            
        }
        public void onServiceDisconnected(ComponentName className) {
            radioService = null;
        }
    };

} 
```

我不知道我还能做些什么来修复我的主要活动。

非常感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T13:05:39.097

```
bindService(bindIntent, radioConnection, Context.BIND_AUTO_CREATE); 
```

在 MainActivity.java 中，此代码必须如下；

```
getApplicationContext().bindService(bindIntent, radioConnection, Context.BIND_AUTO_CREATE); 
```

# c# - 异步和匿名类型

> ID：14887078
> 
> 赞同：0
> 
> 时间：2013-02-15T01:32:14.160
> 
> 标签：c#, linq, async-await

这种方法：

```
private async Task readFileInfo(string folderId) 
```

调用了另一个方法：

```
importCount = await VM.importVehicles(myXDoc); 
```

在此处定义：（注意：我将其从 for 循环更改为 for each，但我得到了类似的结果）。

```
public async Task<Int32> importVehicles(XDocument importXMLDocument)
{
    var Importedvehicles = from vehicle in importXMLDocument.Descendants("vehicle")
                           select new
                           {
                               VehicleName = vehicle.Element("VehicleName").Value,
                               VehicleYear = vehicle.Element("VehicleYear").Value,
                               Odometer = vehicle.Element("Odometer").Value,
                               LicensePlate = vehicle.Element("LicensePlate").Value,
                               OilWeight = vehicle.Element("OilWeight").Value,
                               OilQuantity = vehicle.Element("OilQuantity").Value,
                               OilFilterModelNumber = vehicle.Element("OilFilterModelNumber"),
                               AirFilterModelNumber = vehicle.Element("AirFilterModelNumber"),
                               OilChangedDate = vehicle.Element("OilChangedDate"),
                               OilChangedOdometer = vehicle.Element("OilChangedOdometer"),
                               NextOilChangeDate = vehicle.Element("NextOilChangeDate"),
                               NextOilChangeOdometer = vehicle.Element("NextOilChangeOdometer"),
                               SettingDistance = vehicle.Element("SettingDistance"),
                               SettingMonths = vehicle.Element("SettingMonths"),
                           };

    Int32 vehicleId;
    vehicleId = await getMaxVehicleId();
    try
    {

        foreach (var item in Importedvehicles)
        {
            vehicle myImportedVehicle = new vehicle();
            myImportedVehicle.VehicleId = vehicleId += 1;
            myImportedVehicle.ImagePath = "Assets/car2.png";
            myImportedVehicle.VehicleName = item.VehicleName;
            myImportedVehicle.VehicleModel = item.VehicleName;

            myImportedVehicle.VehicleYear = short.Parse(item.VehicleYear);
            myImportedVehicle.CurrentOdometer = Convert.ToInt32(item.Odometer);
            myImportedVehicle.LicensePlate = item.LicensePlate;
            myImportedVehicle.LastOilChangedDate = Convert.ToDateTime(item.OilChangedDate.Value.ToString()).ToString("d");
            myImportedVehicle.LastOilChangedOdometer = (Int32)item.OilChangedOdometer;
            myImportedVehicle.ReminderDistance = (Int32)item.SettingDistance;
            myImportedVehicle.ReminderMonths = (Int32)item.SettingMonths;

            vehicleInformation myImportVI = new vehicleInformation();
            myImportVI.OilWeight = item.OilWeight;
            myImportVI.OilAmount = item.OilQuantity;
            myImportVI.OilFilterNumber = item.OilFilterModelNumber.Value.ToString();
            myImportVI.AirFilterNumber = item.AirFilterModelNumber.Value.ToString();

            myImportedVehicle.vehicleInfo = myImportVI;
            m_vehicles.Add(myImportedVehicle);
        }
    }
    catch (Exception ex)
    {
        System.Diagnostics.Debug.WriteLine(ex.Message.ToString());
    }

        await SaveList();
        return Importedvehicles.Count();
    } 
```

我收到一个错误：

> 你调用的对象是空的。

当我单步执行时，它`iVehicle`会突出显示，但随后会直接转到 for 语句。然后它看起来错误，因为它还没有得到结果`iVehicle`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:07:07.130

这并不能 100% 回答您的问题，但它应该给您一个良好的开端。

调试器直接跳到`for...loop`, 声明之后的原因`iVehicle`是因为您的查询在声明时没有被执行。因此，此时的 iVehicle 不是匿名类型的集合。

当您调用`.Count()`时，查询正在执行并`iVehicle`试图转换为适当的匿名类型集合。但是，因为查询中的某些内容（在您调用 后正在执行`.Count()`）是`null`，所以您收到的是`NullReferenceException`.

您应该首先验证`importXMLDocument`调用的返回值和返回值`Descendants()`是否不为空。

希望无论如何都会有所帮助。

**编辑：**

现在你已经给出了一个完整的例子，你有很多地方可能是`null`.

每次你使用这个：

```
vehicle.Element("SomeElementNameHere") 
```

那可能是`null`。然后你调用`.Value`一个`null`对象的属性。

您需要确保每个元素都确实存在。隔离每个案例，并确定哪一个是`null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T02:12:59.467

尝试像这样编写代码：

```
var query =
    from vehicle in importXMLDocument.Descendants("vehicle")
    select new { ... };

var  iVehicle = query.ToArray();

for (var i = 0; i <= iVehicle.Count(); i++)
{
    ...
} 
```

您需要强制评估查询。这就是`.ToArray`正在做的事情。查询本身只是查询的定义，而不是结果。

# c# - 如何在 C# 中实现 C++ 风格的 Union？

> ID：14887079
> 
> 赞同：1
> 
> 时间：2013-02-15T01:32:15.223
> 
> 标签：c#, windows-8, windows-runtime

有没有办法在 C# 中实现 C++ 风格的联合？我还需要将此“联合”序列化到磁盘。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T01:38:04.353

您可以使用 and 模拟`StructLayoutAttribute`它`FieldOffsetAttribute`：

```
[StructLayout(LayoutKind.Explicit)]
struct ExampleStruct
{
    [FieldOffset(0)]
    public int a;

    [FieldOffset(0)]
    public int b;

    [FieldOffset(0)]
    public int c;

    [FieldOffset(0)]
    public int d;
} 
```

C# 没有对它们的直接支持.. 但这让你更接近。请参阅此 MSDN 示例： http: [//msdn.microsoft.com/en-us/library/acxa5b99](http://msdn.microsoft.com/en-us/library/acxa5b99(v=vs.80).aspx) (v=vs.80).aspx 。

至于你将如何序列化它..我自己没有尝试过（没有必要..）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T01:35:54.940

没有办法在 C# 中实现 C 风格的联合，但您可以实现具有联合语义的东西。

在这一点上你真正要问自己的问题是：**你首先需要一个 C 风格的联合的确切原因是什么？**该问题的答案可能会引导您进入下一个问题。

C 风格的联合解决了一个在 C 上下文中有意义的问题，其中内存过去相当稀疏，类型系统不是很严格，就像 .NET 的情况一样

在 C# 中，您可以使用结构和属性来获取联合语义，但您应该认真考虑您要解决的潜在问题！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T01:38:51.127

```
using System;
using System.Runtime.InteropServices;

namespace ipv4
{

    [StructLayout(LayoutKind.Explicit)]
    struct IPv4Address
    {
        [FieldOffset(0)]
        public uint Address;
        [FieldOffset(0)]
        public byte b3;
        [FieldOffset(1)]
        public byte b2;
        [FieldOffset(2)]
        public byte b1;
        [FieldOffset(3)]
        public byte b0;
    }

    class MainClass
    {
        public static void Main(string[] args)
        {
            IPv4Address myAddress;

            // Assign localhost to the IPv4 address
            myAddress.Address = 0; // Avoid CS0170: Unassigned Field error
            myAddress.b0 = 127;
            myAddress.b1 = 0;
            myAddress.b2 = 0;
            myAddress.b3 = 1;

            Console.WriteLine("The address in hexadecimal: {0:x}",myAddress.Address);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T01:39:56.103

`dynamic`可以认为有点接近联合，因为这种类型的变量可以容纳任何东西。

```
dynamic a = 3;
a = "test"; 
```

# wso2 - 开发者工作室 2.1.0 和 jdk 1.7

> ID：14887082
> 
> 赞同：0
> 
> 时间：2013-02-15T01:32:35.833
> 
> 标签：wso2

我正在使用我在 11 月下载的 WSO2 Developer Studio 版本 2.1.0。我想使用 jdk 1.7 来编译我的项目。

我将此添加到 eclipse.ini 文件中：-vm C:/Program Files/Java/jdk1.7.0_11/bin

当我尝试设置 Java Compiler 首选项时，最高 Compiler Compliance 级别是 1.6 - 知道如何让 eclipse 允许我为 1.7 编译吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:03:05.093

假设您使用的是 Developer Studio 2.1.0 预装的 Eclipse 发行版，我将回答您的问题。

我不相信 Eclipse Helios 默认支持 Java 1.7。因此，您需要将 JDK 1.7 添加到您的 JDK 列表中，如此[处](https://stackoverflow.com/questions/2030434/eclipse-no-java-jre-jdk-no-virtual-machine/2843837#2843837)所述。

之后，您应该能够将 Developer Studio 与 JDK 1.7 一起使用。

但是，由于 JDK 1.7 实现中的一些更改，Eclipse 实例在使用 Eclipse P2 Updater 安装新插件时遇到了一些问题，因此我们看到了一些使用 JDK 1.7 运行 Eclipse Helios、Indigo 和 Juno 的问题。因此，我强烈建议您使用 JDK 1.6 而不是 JDK 1.7，除非您使用的是 Juno SR2。

/哈莎娜

# php - PHP正则表达式有条件地替换字符串的第一次出现

> ID：14887097
> 
> 赞同：0
> 
> 时间：2013-02-15T01:34:26.193
> 
> 标签：php, regex

我需要对看起来像这样的字符串进行一些清理：

```
$author_name = '<a href="http://en.wikipedia.org/wiki/Robert_Jones_Burdette>Robert Jones Burdette </a>'; 
```

请注意，href 标记没有右引号——我在其中的一个大表上使用 DOMParser 来提取文本，这很糟糕。

我想看看 $author_name 中的字符串；

如果第一个 > 前面没有 "，则将其替换为 "> 以正确关闭标签。如果没问题，请跳过并执行下一步。确保根本不替换第二个 >。

使用 php 正则表达式，我无法找到一个可行的解决方案 - 我可以将整个事情切碎并检查它的部分，但这会很慢，我认为必须有一个正则表达式可以做我想要的。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:02:52.850

您可以做的是，找到第一个结束标记，带或不带双引号 (")，并将其替换为 (">)：

```
$author_name = preg_replace('/(.+?)"?>(.+?)/', '$1">$2', $author_name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T01:51:54.123

[http://www.barattalo.it/html-fixer/](http://www.barattalo.it/html-fixer/)

下载它，然后将其包含在您的 php.ini 文件中。其余的很容易：

```
$dirty_html = ".....bad html here......";

$a = new HtmlFixer();
$clean_html = $a->getFixedHtml($dirty_html); 
```

人们想要使用正则表达式是很常见的，但你必须记住[HTML 不是正则](http://welbog.homeip.net/glue/53/XML_is_not_regular)的。

# html - div 在 IE 和 Opera 中没有正确定位？

> ID：14887100
> 
> 赞同：0
> 
> 时间：2013-02-15T01:35:03.370
> 
> 标签：html, css, positioning, css-position

我有一个带有丝带背景图像的 div。我想将我的 div 与丝带背景放在另一个 div （div 2）上，所以看起来丝带缠绕在第二个 div 周围。

现在这在 Chrome 和 safari 中运行良好，我不得不为 firefox 使用 assitional css 设置，但 IE 和 Opera 都显示我的功能区 div 比在 chrome 或 safari 中高约 25px。

我不知道为什么会这样，而且我似乎无法让它做正确的位置（我只需要在这两个浏览器中以某种方式将它向下移动大约 25px）

```
(div 1)
<div class="side-ribbon4"><img src="assets/img/sidebar/1.png" width="118" height="118" /></div> 
```

div 1 css：

```
.side-ribbon4 {
    width:28px;
    height:21px;
    margin-left:111px;
    padding-right:0px;
    float:right;
    text-align:center;
    margin-top:2273px;
    position:absolute;
    z-index:30;

} 
```

我把它放在这个 div 的顶部（div 2）

分区 2 CSS：

```
.categories-box2 {
    width: 200px;
    float: left;
    border:solid;
    border: 1px solid #cccccc;
    -khtml-border-radius: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
    behavior: url(border-radius.htc);
    -moz-box-shadow: 0px 0px 8px rgba(0,0,0,0.3);
    -khtml-box-shadow: 0px 0px 8px rgba(0,0,0,0.3);
    -webkit-box-shadow: 0px 0px 8px rgba(0,0,0,0.3);
    box-shadow: 0px 0px 8px rgba(0,0,0,0.3);
    margin-bottom: 30px;
    margin-top:10px;
    margin-left: 20px;
    text-align: center;
    background-color: #FFF;
    /* [disabled]margin-left: 30px; */
    overflow: hidden;
    padding-top: 20px;
    padding-bottom: 20px;
    position:relative;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:10:02.193

[http://jsfiddle.net/ZnRSm/3/](http://jsfiddle.net/ZnRSm/3/)

```
.side-ribbon4 {position: relative;}
.categories-box2 {position: absolute;}

<div class="side-ribbon4">
    <img src="http://placehold.it/118x118" width="118" height="118" />
    <div class="categories-box2">&nbsp;</div>
</div> 
```

您需要研究一下 CSS 定位以及为什么它通常不应该与浮动结合使用。一方面，绝对定位的元素通常放置在（因此相对于）相对定位的元素内部。

另一个提示是，如果您遇到此类问题，即浏览器以不同方式呈现您的布局，则可能意味着您的布局不好。IE9+、Firefox、Chrome 和 Safari 都非常符合标准，应该会显示几乎相同的结果。

由于您是 SO 新手，因此我会提醒您选择一个答案（如果提供），请单击复选标记。

# ruby-on-rails - Facebook登录设计邀请

> ID：14887103
> 
> 赞同：4
> 
> 时间：2013-02-15T01:35:35.103
> 
> 标签：ruby-on-rails, ruby, devise

我在我的应用程序上使用[Devise Invitable](https://github.com/scambra/devise_invitable)，并`Omniauth`允许用户使用 Facebook 登录。

我唯一遇到的问题是，当用户选择使用“接受邀请”页面中的链接使用 Facebook 登录时，他们会被重定向到“新用户注册”页面，其中已经填写了一些详细信息。问题出在 Devise Invitable 在发送邀请时会创建一个新用户，用户无法使用发送邀请时提供的电子邮件登录。

`Omniauth Callbacks Controller`

```
def all
  user = User.from_omniauth(request.env["omniauth.auth"])
  if user.persisted?
    flash.notice = "Signed in!"
    sign_in_and_redirect user
  else
    session["devise.user_attributes"] = user.attributes
    redirect_to new_user_registration_url
  end
end
alias_method :facebook, :all 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-23T19:19:57.513

您已经诊断出问题，即您有类似 a`User`但不是真的。您必须检测是否是这种情况，并使用您从 Facebook 收集的数据更新您现有的记录。

```
if user.persisted?
  flash.notice = "Signed in!"
  sign_in_and_redirect user
elsif user.previously_invited?
  invited_user = User.where(email: user.email).first
  invited_user.attributes = user.attributes
  invited_user.save
  sign_in_and_redirect invited_user
else
  session["devise.user_attributes"] = user.attributes
  redirect_to new_user_registration_url
end 
```

`User#previously_invited?`留给读者作为练习，但它将包含`where`对电子邮件的查找，其中包含查询中包含的一些设计邀请维护字段。

这不太可能是一个完整的解决方案，因为 devise-invitable 维护了许多`invited_user`在此操作后可能需要调整的字段。您是否将邀请视为已完成取决于您。您可能会发现这个原因足以转移到除设计邀请之外的其他邀请机制。

# bash - 尝试使用 bash 从文件中计算 unsigned long long 的平均值

> ID：14887105
> 
> 赞同：0
> 
> 时间：2013-02-15T01:35:44.723
> 
> 标签：bash, file-io, printing, awk

尝试使用 bash 从文件中计算 unsigned long long 的平均值。

所以我有一个文本文件，它在一列中有无符号长长（例如18446743829774150033），我想计算文件中数字的平均值并将其输出到文件中。我试过 awk 但我认为它不适用于 unsigned long long。

```
awk '{a+=$1; b++} END{print a/b}' file.txt 
```

有人对如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T01:52:07.097

问题是当数字太大时，awk 会退回到浮点数，从而导致不准确。您可以使用 a use bc 代替，它支持任意精度：

```
a=($(cut -f1 file.txt))
echo "($(IFS=+; echo "${a[*]}"))/${#a[@]}" | bc 
```

这有点神奇，但如果你只是删除`bc`，你会看到它把一组数字 `1 2 3`变成`(1+2+3)/3`， bc 可以处理。

如果你想要小数，你可以设置比例：

```
a=($(cut -f1 file.txt))
echo "scale=4; ($(IFS=+; echo "${a[*]}"))/${#a[@]}" | bc 
```

# javascript - MVC 4 EditorFor bool Checkbox 总是发布 True

> ID：14887106
> 
> 赞同：1
> 
> 时间：2013-02-15T01:35:54.680
> 
> 标签：javascript, asp.net-mvc, razor

我的模型中有一个 bool 属性。渲染视图时其值为 false。但是当我提交表单时，TRUE 的值被传递给控制器​​。我正在使用自定义 js 函数从表单中获取值以提交给控制器操作。我不确定如何从复选框中获取正确的值。

我的模型属性：

```
public bool RushOrderFlag { get; set; } 
```

视图标记：

```
@Html.EditorFor(model => model.RushOrderFlag) 
```

呈现的 HTML：

```
<input class="chkbx" data-val="true" data-val-required="The Rush? field is required." id="RushOrderFlag" name="RushOrderFlag" type="checkbox" value="true">
<input name="RushOrderFlag" type="hidden" value="false"> 
```

我的 JS 函数

```
function GetFilterCriteria() {
var Criteria = {};
$('#frmCriteria input').each(function () {
    Criteria[this.name] = $("#" + this.name).val();
});
return Criteria;
}; 
```

即使我在控制台中输入了 $('[name="RushOrderFlag"]').val()，在打开和关闭复选框后，它总是返回 true。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:55:20.383

尝试

```
function GetFilterCriteria() {
var Criteria = {};
$('#frmCriteria input').each(function () {
    Criteria[this.name] = false;
    if ($("#" + this.name).is(':checked'))
        Criteria[this.name] = true;

});
return Criteria;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:32:56.237

感谢所有的提示......最后，由于剃须刀为复选框创建 2 个输入控件的方式，它必须更复杂一些。所以这就是我必须做的：

```
function GetFilterCriteria() {
var Criteria = {};
$('#frmCriteria input').each(function () {
    if ($(this).attr('type') != 'hidden') {
        if ($(this).attr('type') == 'checkbox') {
            Criteria[this.name] = this.checked;
        } else {
            Criteria[this.name] = $("#" + this.name).val();
        }
    }
});
return Criteria;
}; 
```

我不喜欢它，因为如果我想要一个隐藏的输入，这将跳过它。但现在它有效。我很难相信它必须如此困难:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:22:03.697

你可以尝试使用`.CheckBoxFor()`你只会得到一个输入元素。

对于选中的属性，您可以使用：

```
$('#CurrentMailTemplateEnabled').get()[0].checked 
```

通过首先获取 DOM 元素来获取值。至少这对我有用。

# jquery - 如何在提交表单上使用 jQuery 和 jQuery Mobile 在序列化字符串中给出重复项？

> ID：14887111
> 
> 赞同：2
> 
> 时间：2013-02-15T01:36:30.647
> 
> 标签：jquery, json, forms, jquery-mobile, serialization

我有一个带有简单表单的简单页面：

```
<div data-role="page" id="main">
    <div data-role="header">
        <h1>Page Title</h1>
    </div>
    <div data-role="content">
        <form id="add_form">
            <input type="text" name="name" placeholder="Name" />
            <textarea name="description" placeholder="Description"></textarea>
            <button data-role="button" id="cancel-form" >Cancel</button>
            <input type="submit" value="Add" />
        </form>
    </div>
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div> 
```

然后

```
$(document).on( "pageshow", "#main", function() {
    new MAIN();
});

var MAIN = (function () {
    function MAIN() {
        $("#add_form").submit(function(){
            console.log($(this).serialize());
            return false;
        });
    }

    return MAIN;
})(); 
```

问题是我得到了`name=&name=test&description=&description=some content`，

基本上在序列化字符串中重复..

在[jQuery](http://api.jquery.com/serialize/)页面上它说：

```
Warning: selecting both the form and its children will cause duplicates in the serialized string. 
```

但我没有那样做，是吗？

关于这个问题的任何想法？

编辑：

我找到了一种可行的解决方案

```
var MAIN = (function () {
    function MAIN() {
        var _this = this;
        $("#add_form").submit(function(){
            console.log(_this.serializeObject($(this).serializeArray()));
            return false;
        });
    }

    MAIN.prototype.serializeObject = function(a) {
        var o = {};
        $.each(a, function() {
            if (o[this.name]) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    };

    return MAIN;
})(); 
```

这将 console.log`Object {name: "werwerwer", description: "erewwewerwerw"}`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-17T19:05:14.897

```
var MAIN = (function () {
    function MAIN() {
        var _this = this;
        $("#add_form").submit(function(){
            console.log(_this.serializeObject($(this).serializeArray()));
            return false;
        });
    }

    MAIN.prototype.serializeObject = function(a) {
        var o = {};
        $.each(a, function() {
            if (o[this.name]) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    };

    return MAIN;
})(); 
```

# javascript - 将他们引导至页面的 Google 关键字

> ID：14887115
> 
> 赞同：0
> 
> 时间：2013-02-15T01:37:16.017
> 
> 标签：javascript

是否有可能发现谷歌搜索是引导他们进入页面的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T01:39:14.950

是的，您应该查看[Google Analytics](http://www.google.ca/analytics/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T01:41:14.213

是的，`document.referrer`会告诉你用户来自哪里的 URL。您可以分析使用了哪些搜索词的 URL。

# python - 将字符串与正则表达式匹配

> ID：14887121
> 
> 赞同：1
> 
> 时间：2013-02-15T01:38:05.540
> 
> 标签：python, regex

我想检查一个字符串是否与正则表达式描述的字符串系列的一部分匹配。

所需的行为类似于：

```
>>> re.findall("hi", "h[ia]t")
["hi"]
>>> re.findall("at", "h[ia]t")
["at"]
>>> re.findall("hat", "h[ia]t")
["hat"]
>>> re.findall("cat", "h[ia]t")
[] 
```

但是 re.findall() 的第二个参数是按字面解释的。

当然，在上面的简单示例中，我可以显式地检查“hit”和“hat”，但更复杂的表达式看起来很笨拙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T01:46:57.790

正则表达式不是生成器。您可以将字符串与正则表达式进行匹配，但不能构造与给定正则表达式匹配的所有字符串。您可能需要类似 shell 的大括号扩展，但我认为 stdlib 中没有提供类似的东西（`fnmatch`很接近但只提供匹配）。

# javascript - 如果 iPhone 为 4" (iPhone 5) 不工作，iOS Phonegap javascript 函数会更改 div 的高度

> ID：14887130
> 
> 赞同：0
> 
> 时间：2013-02-15T01:38:46.087
> 
> 标签：javascript, ios, html, cordova

如果手机是 Iphone 5，我想更改 div 的高度。我不太了解 javascript，所以这对我来说有点困难。这是我的 index.html 中的 JS 函数：

```
 <script>
        function resizeDiv("divId")
        {
            if (window.screen.height==568) { // iPhone 4"
                document.querySelector("meta[name=viewport]").content="width=320.1";
            var obj = document.getElementById(id);
            if (obj)
            {
                obj.setAttribute("style", "height:200px;");
            }
        }

        }
        </script> 
```

我的脑海中也有这些元标记：

```
 <meta name="viewport" content="initial-scale=1.0">
    <meta name="viewport" content="width=320.1"> 
```

请帮忙=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:27:23.307

使用 jQuery：

```
function resizeDiv(divId) {
    if ( $(window).width() == 480 || $(window).height() == 480 ) {
        $("#" + divId).height(200); // iphone 4                      
    }
    else {
        $("#" + divId).height(200); // iphone 5               
    }
} 
```

# jquery - 文档准备好后如何调用 Backbone 初始路由？

> ID：14887133
> 
> 赞同：3
> 
> 时间：2013-02-15T01:38:55.457
> 
> 标签：jquery, backbone.js

[codeschool.com](http://www.codeschool.com) Backbone 课程的第 7 级有以下代码，并声明整个事情可以使用以下 jquery 开始

```
$(function(){ TodoApp.start() }) 
```

这将调用`Backbone.history.start`. 但是如何调用`Backbone.history.start`最终导致`index`被调用以便`fetch`调用以填充模型集合`todoList`。

```
var TodoApp = new (Backbone.Router.extend({
  routes: { "": "index", "todos/:id": "show" },
  initialize: function() {
    this.todoList = new TodoList();
    this.todosView = new TodoListView({collection: this.todoList});
    $('#app').append(this.todosView.el);
  },
  start: function(){
    Backbone.history.start({pushState: true});
  },
  index: function(){
    this.todoList.fetch();
  },
  show: function(id){
    this.todoList.focusOnTodoItem(id);
  }
})); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T02:00:00.377

如果您查看[Backbone 源代码](http://backbonejs.org/backbone.js)，您可以看到正在发生的事情。

在 的末尾`History.start`，您可以看到它调用了`loadUrl`，如下所示：

```
// Attempt to load the current URL fragment. If a route succeeds with a
// match, returns `true`. If no defined routes matches the fragment,
// returns `false`.
loadUrl: function(fragmentOverride) {
  var fragment = this.fragment = this.getFragment(fragmentOverride);
  var matched = _.any(this.handlers, function(handler) {
    if (handler.route.test(fragment)) {
      handler.callback(fragment);
      return true;
    }
  });
  return matched;
}, 
```

当您添加路线时，它们会添加到`this.handlers`. 由于有一个与“索引”匹配的处理程序，因此调用了该回调。

# java - HttpServletRequestWrapper 删除的参数仍然显示

> ID：14887139
> 
> 赞同：1
> 
> 时间：2013-02-15T01:39:08.303
> 
> 标签：java, jsp, servlets, servlet-filters

我正在尝试使用 java/jsp 中的过滤器过滤出名为“原因”的查询参数。

基本上，过滤器已经到位，以确保用户输入了查看页面的“原因”。如果他们没有，它需要将他们重定向到“输入原因”页面。一旦他们输入了一个有效的理由，他们就可以继续访问他们请求的页面。

所以它的基础工作。但是，“原因”是通过查询参数（即 GET 参数）发送的。一旦用户选择了一个原因，原因参数就会被转发到他们想要查看的页面。这是一个问题，因为检查参数是否存在是过滤器确定用户是否可以继续前进的主要方式之一。

我尝试过扩展`HttpServletRequestWrapper`，并覆盖了一堆方法（即`getPameter`等），以努力删除“原因”参数。但是，我无法看到该参数被删除。一旦过滤器转发到请求的页面，'reason' 参数总是作为 GET 参数出现在查询字符串（即浏览器 url 栏中的 url）中。

我的过滤器类看起来像：

```
public final class AccessRequestFilter implements Filter {

    public class FilteredRequest extends HttpServletRequestWrapper {

        public FilteredRequest(ServletRequest request) {
            super((HttpServletRequest)request);
        }

        @Override
        public String getParameter(String paramName) {
            String value = super.getParameter(paramName);

            if ("reason".equals(paramName)) {
                value = null;
            }

            return value;
        }

        @Override
        public String[] getParameterValues(String paramName) {
            String[] values = super.getParameterValues(paramName);

            if ("reason".equals(paramName)) {
                values = null;
            }

            return values;
        }

        @Override
        public Enumeration<String> getParameterNames() {
            return Collections.enumeration(getParameterMap().keySet());
        }

        @Override
        public Map<String, String[]> getParameterMap() {            
            Map<String, String[]> params = new HashMap<String, String[]>();
            Map<String, String[]> originalParams = super.getParameterMap();

            for(Object o : originalParams.entrySet()) {
                Map.Entry<String, String[]> pairs = (Map.Entry<String, String[]>) o;
                params.put(pairs.getKey(), pairs.getValue());
            }

            params.remove("reason");

            return params;
        }

        @Override
        public String getQueryString() {
            String qs = super.getQueryString();

            return qs.replaceAll("reason=", "old_reason=");
        }

        @Override
        public StringBuffer getRequestURL() {
            String qs = super.getRequestURL().toString();

            return new StringBuffer( qs.replaceAll("reason=", "old_reason=") );
        }
    }

    private FilterConfig filterConfig = null;  
    private static final Logger logger = MiscUtils.getLogger();

    public void init(FilterConfig filterConfig) throws ServletException {  
        this.filterConfig = filterConfig;  
    }  

    public void destroy() {  
        this.filterConfig = null;  
    }  

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {  
        logger.debug("Entering AccessRequestFilter.doFilter()");

        HttpServletRequest httpRequest = (HttpServletRequest) request;
        HttpServletResponse httpResponse = (HttpServletResponse) response;
        HttpSession session = httpRequest.getSession();

        boolean canView = false;
        long echartAccessTime = 0L;
        String demographicNo = "";
        String reason = "";
        Date current = new Date();

        String user_no = (String) session.getAttribute("user");

        ProgramProviderDAO programProviderDAO = (ProgramProviderDAO)SpringUtils.getBean("programProviderDAO");
        ProgramQueueDao programQueueDao = (ProgramQueueDao)SpringUtils.getBean("programQueueDao");

        // Check to see if user has submitted a reason
        reason = request.getParameter("reason");
        demographicNo = request.getParameter("demographicNo");
        Long demographicNoAsLong = 0L;
        try {
            demographicNoAsLong = Long.parseLong( demographicNo );
        } catch (Exception e) {
            logger.error("Unable to parse demographic number.", e);
        }

        if (reason == null) {
            // If no reason was submitted, see if user still has time remaining on previous submission (if there was one)
            try {
                echartAccessTime = (Long)session.getServletContext().getAttribute("echartAccessTime_" + demographicNo);
            } catch (Exception e) {
                logger.warn("No access time found");
            }

            if (current.getTime() - echartAccessTime < 30000) {
                canView = true;
            }
        } else if (!reason.equals("")) {
            // TODO: validate reason
            canView = true;
            session.getServletContext().setAttribute("echartAccessTime_" + demographicNo, current.getTime());
            String ip = request.getRemoteAddr();
            // Log the access request and the reason given for access
            LogAction.addLog(user_no, "access", "eChart", demographicNo, ip, demographicNo, reason);
        }

        if (!canView) {
            // Check if provider is part of circle of care
            List<Long> programIds = new ArrayList<Long>();

            List<ProgramQueue> programQueues = programQueueDao.getAdmittedProgramQueuesByDemographicId( demographicNoAsLong );
            if (programQueues != null && programQueues.size() > 0) {
                for (ProgramQueue pq : programQueues) {
                    programIds.add( pq.getProgramId() );
                }

                List<ProgramProvider> programProviders = programProviderDAO.getProgramProviderByProviderProgramId(user_no, programIds);

                if (programProviders != null && programProviders.size() > 0) {
                    canView = true;
                }
            }
        }

        String useNewCaseMgmt;
        if((useNewCaseMgmt = request.getParameter("newCaseManagement")) != null ) {     
            session.setAttribute("newCaseManagement", useNewCaseMgmt); 
            ArrayList<String> users = (ArrayList<String>)session.getServletContext().getAttribute("CaseMgmtUsers");
            if( users != null ) {
                users.add(request.getParameter("providerNo"));
                session.getServletContext().setAttribute("CaseMgmtUsers", users);
            }
        }
        else {
            useNewCaseMgmt = (String)session.getAttribute("newCaseManagement");             
        }

        String requestURI = httpRequest.getRequestURI();
        String contextPath = httpRequest.getContextPath();

        if (!canView && !requestURI.startsWith(contextPath + "/casemgmt/accessRequest.jsp")) {
            httpResponse.sendRedirect(contextPath + "/casemgmt/accessRequest.jsp?" + httpRequest.getQueryString());
            return;
        }

        logger.debug("AccessRequestFilter chainning");
        chain.doFilter( new FilteredRequest(request), response);
    }
} 
```

过滤器设置为拦截所有请求并转发进入名为 的子目录`casemgmt`。web.xml 中的过滤器如下：

```
<filter>
        <filter-name>AccessRequestFilter</filter-name>
        <filter-class>org.oscarehr.casemgmt.filter.AccessRequestFilter</filter-class>
    </filter>
...
<filter-mapping>
        <filter-name>AccessRequestFilter</filter-name>
        <url-pattern>/casemgmt/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping> 
```

任何人都知道如何实际删除“原因”参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T01:50:18.807

在服务器端包装和操作`HttpServletRequest`绝对不会神奇地影响您在浏览器地址栏中看到的 URL。该 URL 保持原样，因为它是浏览器用来请求所需资源的 URL。包装的请求只会影响在同一请求的过滤器之后运行的服务器端代码。

如果您想更改浏览器地址栏中的 URL，那么您应该将重定向发送到所需的 URL。

基本上，

```
if (reasonParameterIsIn(queryString)) {
    response.sendRedirect(requestURL + "?" + removeReasonParameterFrom(queryString));
    return;
} 
```

# uml - 如何正确使用用例 < > 在用例图中？

> ID：14887147
> 
> 赞同：1
> 
> 时间：2013-02-15T01:39:43.910
> 
> 标签：uml, use-case, activity-diagram

我开始学习UML，我有点困惑。我有以下用例图：

![音量控制用例图](../Images/717a90d3d2d2e30a91a4541cf7f22e69.png)

我问这个是因为我想正确地绘制我的图表，以便任何具有正确 UML 知识的人都能理解，而不仅仅是以我理解的方式绘制图表。

现在，我在这里使用**用例泛化**的原因就是原因；

在阅读了 UML 2 和统一流程一书的 5.3 节之后，我认为我正在尝试做的是**用例泛化**，特别是在查看了第 100 页中的示例之后。这个示例显示了一个名为**FindProduct**的用例，如第 101 页中所述的是一个*抽象用例*。

我们读到

> *FindBook 用例更加具体。它专门处理更抽象的父类来处理特定类型的产品，书籍。如果父用例没有事件流或事件流不完整，则它是一个抽象用例。抽象用例非常普遍，因为您可以使用它们来捕获最高抽象级别的行为。因为抽象用例有缺失或不完整的事件流，它们永远无法被系统执行*

这就是我试图在我的图表中表示的内容。我有一个*抽象*用例**打开**，这个用例永远不会按原样执行。它需要孩子，或者在这种情况下，需要孩子来专门化它，因为系统将通过 IR 或 KNOB 打开，而永远不会只是打开，这是抽象的。

所以这里的事情是我不确定多重概括，如果这样做是正确的。或者我应该更改例如**使用 IR**开启和**使用 KNOB 开启的**用例，**以使用 IR**开启和**使用 KNOW 开启**用例，并使这些成为**Turn ON**的子项，并添加**使用 IR**关闭和**使用 KNOB 关闭**用例和使这些成为**Turn OFF**的孩子，等等？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T02:24:34.460

关于你的问题：我见过的最常见的方法是每个用例都有一个活动图。

关于您的用例图的几点：

1-我从未在用例图中看到过多种专业化。您可能需要重新考虑这一点。当用例 A（子）专门化用例 B（父）时，它继承了所有前置条件、后置条件、主要流程和备选流程步骤。我可以猜到，对于您的父用例，此功能并不相同（例如调高音量并打开）；因此，至少可以说，多重专业化在这里没有意义。

2- 应避免用例泛化，除非它为您的模型增加了真正的价值。它不是很直观，会使您的图表模糊。

3- 这个用例图似乎倾向于将用例视为类，将泛化视为继承；这是不正确的。

4-您可能还想重新考虑用例的粒度级别；使用 IR/Knob 打开和使用 IR/Knob 关闭可能都集成在一个合理大小的用例中，并带有一些替代流程。但这是您作为需求工程师做出的选择，任何人都可能以不同的方式做这件事。

我建议您查看[UML 2 的第 5.3 节和关于用例泛化的统一流程](http://www.amazon.ca/UML-Unified-Process-Practical-Object-Oriented/dp/0321321278)书。

**建议：**

假设您想保留单独的打开和关闭用例，并专注于一个用例（打开）：

1- 如果使用 IR 打开的步骤与使用旋钮打开的步骤完全不同，请将打开用例抽象化，不要为其编写任何规范（文本）或绘制任何活动图。然后专门使用两个用例，称为用旋钮打开和用 IR 打开，它们具体具有单独的规格和/或活动图。

2-如果用IR打开的步骤与用旋钮打开的步骤几乎相同，除了用户选择IR或Knob的一步；您可以使用替代流程。在这种情况下，您只能拥有一个带有一个规范和/或一个活动图的用例。

对其他三个用例执行相同的操作。

# android - 创建用于同步两个数据库的触发器时遇到问题

> ID：14887154
> 
> 赞同：0
> 
> 时间：2013-02-15T01:40:05.307
> 
> 标签：android, sql, database, triggers

我想知道是否有人可以确认我正在正确地创建 TRIGGER。为了能够使用搜索，我将普通表同步到 FTS 表。但由于某种原因，我不能只使用 FTS，因为每次搜索我都会获得一个空游标，而且它只适用于普通数据库。

```
public static final String DATABASE_NAME = "CONTACT";
public static final String DATABASE_TABLE = "CONTACTS";
private static final String DATABASE_TABLE_FTS = "CONTACTS_FTS";
private static final int DATABASE_VERSION = 20;
private Context ourContext;
private DbHelper DBHelper;
private static SQLiteDatabase db;
private static final String DATABASE_CREATE = 
        "CREATE TABLE " + DATABASE_TABLE + " (" +
         COL_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
         COL_NAME + " TEXT NOT NULL, " + 
         COL_EMAIL + " TEXT NOT NULL, " +
         COL_CELL + " TEXT NOT NULL, " + 
         COL_ARRIVAL + " TEXT NOT NULL, " +
         COL_DEPARTURE + " TEXT NOT NULL, " + 
         COL_FLIGHT_NUMBER + " TEXT NOT NULL, " +
         COL_HOTEL_ROOM_NUMBER + " TEXT NOT NULL, " + 
         COL_EVENT1 + " TEXT NOT NULL, " +
         COL_EVENT2 + " TEXT NOT NULL, " + 
         COL_EVENT1_ROOM + " TEXT NOT NULL, " +
         COL_EVENT2_ROOM + " TEXT NOT NULL);";

private static final String DATABASE_CREATE_FTS = 
        "CREATE VIRTUAL TABLE " + DATABASE_TABLE_FTS + " USING fts3(" +
        "content=" + "\"CONTACTS\", " + 
        COL_NAME + ");";

private static final String Trigger = 
        "CREATE TRIGGER contacts_Trigger " + 
        "AFTER INSERT "+ "ON " + DATABASE_TABLE +
        " BEGIN " +
        "INSERT " + DATABASE_TABLE_FTS + " SET " + COL_NAME + " = new.COL_NAME WHERE " + COL_ID + " = old.COL_ID;" +
        " END;"; 
```

# macos - 在终端中编写脚本以将文件从子文件夹移动到父文件夹

> ID：14887157
> 
> 赞同：1
> 
> 时间：2013-02-15T01:40:32.153
> 
> 标签：macos, unix, terminal

我有一个父文件夹 X ，其中包括子文件夹 X1 、 X2 和 X3 .... 这些子文件夹中的每一个都包含音乐文件。我想将这些文件移动到主文件夹 X 并删除子文件夹 X1、X2 ..etc。

我怎样才能在终端（mac）中做到这一点？

预先感谢一百万，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:10:15.740

您可能不需要完整的脚本来执行此操作；它应该可以从命令行执行。假设您要移动的所有音乐文件都以 .mp3 结尾，并且没有其他文件（您不想移动的文件）以这种方式结束。如果是这种情况，您可以使用 cd 进入目录 X，然后运行：

```
mv X1/*.mp3 . 
```

...等等其他两个子目录。
或者，如果你想同时处理所有文件，你可以这样做：

```
i=0; while [ $i -lt 3 ]; do i=$(( $i + 1 )); mv X$i/*.mp3 .; done 
```

其中“-lt”后面的数字是您要从中提取文件的最终目录的后缀。

完成后，您可以使用

```
rmdir X1 
```

如果目录为空，则删除目录，或

```
rm -r X1 
```

如果他们不是。您也可以像这样将其构建到上面的单行中：

```
i=0; while [ $i -lt 3 ]; do i=$(( $i + 1 )); mv X$i/*.mp3 .; rm -r X$i; done 
```

...只需确保在您要保留的这些目录中没有任何其他内容。

**更新**：如果子目录没有系统地命名，还有另一种方法。请注意，如果您想从父目录的所有子目录中提取文件，这只会在没有错误的情况下工作：

```
for i in `ls -l | egrep '^d'| awk '{print $10}'`; do  mv $i/*.mp3 .; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:18:06.410

如果您在顶级目录中有任何文件并且有关无法删除“X”的错误，以下将发出一些错误消息，但可以安全地忽略它们：

```
find X -type f -exec mv {} X \;    # Move all files into X
find X -depth -type d -exec rmdir {} \;  # Remove all subdirectories of X 
```

这将移动*所有*文件。如果要将文件限制为某个集合，`-name`请在第一个命令上使用（或其他）限定符`find`来过滤移动的文件。

# javascript - 无法使用 Javascript 回调时

> ID：14887159
> 
> 赞同：6
> 
> 时间：2013-02-15T01:41:04.867
> 
> 标签：javascript, html, asynchronous, html2canvas, downloadify

我知道您不应该在 Javascript 中进行阻塞，而且我从来没有无法重构而不必这样做。但是我遇到了一些我不知道如何处理回调的东西。我正在尝试将 Downloadify 与 html2canvas 一起使用（这仅适用于 IE，下载数据 URI 在 IE 中不起作用）。您必须指定一个数据函数，以便 Flash 对象知道要下载什么。不幸的是，html2canvas 是异步的。我需要能够等到 onrendered 事件被填写后才能获取数据 URI。

```
$('#snapshot').downloadify({
        filename: function(){
            return 'timeline.png';
        },
        data: function(){
            var d = null;
            html2canvas($('#timeline'),{
                onrendered:function(canvas){
                    d = canvas.toDataURL();
                }
            });

            //need to be able to block until d isn't null

            return d;
        },
        swf: '../static/bin/downloadify.swf',
        downloadImage: '../static/img/camera_icon_32.png?rev=1',
        width: 32,
        height: 32,
        transparent: true,
        append: false
}); 
```

我愿意接受有关其他方法的建议，但我被困住了。

**编辑**- 一些评论表明需要更多关于 Downloadify 的信息（[https://github.com/dcneiner/Downloadify](https://github.com/dcneiner/Downloadify)）。Downloadify 是一个 Flash 对象，可用于触发浏览器的另存为窗口。downloadify() 函数只是简单地初始化 Flash 对象并`<object/>`在元素中粘贴标签。由于它是一个 Flash 对象，因此您无法从 Javascript 触发事件而不会导致安全违规。

我将它用于 IE 仅用于下载 Canvas 元素的图像。在所有其他浏览器中，我可以只使用数据 URI，但 IE 是一朵特殊的花。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T02:50:10.340

对于花了一整夜试图让 HTML5 功能在 IE9 上运行的可怜的灵魂，这就是我最终使用的。我可以稍微摆脱它，因为我们不太担心 IE 用户会获得不那么友好的体验，而且这是一个内部应用程序。但是，YMMV。

基本上，当返回字符串为空时，Downloadify 什么都不做。所以，由于 html2canvas 渲染的异步特性，用户第一次点击时，什么都不会发生。第二次（假设渲染完成，如果不是什么都不会继续发生，直到它完成），值不为空并且保存继续。我使用 onCancel 和 onCoplete 回调再次清除该值，以确保用户下次尝试保存时，图像不会太陈旧。

这并没有考虑到用户在两次点击之间以某种方式更改 DOM 的事件，但我不知道可以为此做些什么。我一点也不为此感到自豪，但 IE 就是这样。它可以工作，现在就足够了。

```
 var renderedPng = '';
    var rendering = false;

    $('#snapshot').downloadify({
        filename: function(){
            return 'timeline.png';
        },
        data: function(){
            if(!rendering && renderedPng == ''){
                rendering = true;
                html2canvas($('#timeline'),{
                    onrendered:function(canvas){
                        renderedPng = canvas.toDataURL().replace('data:image/png;base64,','');
                        rendering = false;
                    }
                });
            }
            return renderedPng;
        },
        onComplete:function(){
            renderedPng = '';
        },
        onCancel: function(){
            renderedPng = '';
        },
        dataType: 'base64',
        swf: '../static/bin/downloadify.swf',
        downloadImage: '../static/img/camera_icon_32.png?rev=1',
        width: 32,
        height: 32,
        transparent: true,
        append: false
    }); 
```

# python - 通过 REST API 将原始值推送到 Firebase

> ID：14887162
> 
> 赞同：2
> 
> 时间：2013-02-15T01:41:19.087
> 
> 标签：python, firebase

我正在尝试使用`requests`Python 中的库将数据（原始值）推送到 firebase 位置。

说，我有`urladd`（`url`带有身份验证令牌的位置）。在该位置，我想推一个`string`，比如说`International`。根据[这里](https://stackoverflow.com/questions/10924774/push-to-firebase-via-rest-api-with-priority)的答案，我尝试了

```
data = {'.value': 'International'}

p = requests.post(urladd, data = sjson.dumps(data)) 
```

我明白了`<Response [400]>`。`p.text`给我：

```
u'{\n  "error" : "Invalid data; couldn\'t parse JSON object, array, or value. Perhaps you\'re using invalid characters in your key names."\n}\n' 
```

他们的密钥似乎`.value`无效。但这就是上面链接的答案所暗示的。知道为什么这可能不起作用，或者我如何通过 Python 做到这一点？连接或身份验证没有问题，因为以下工作。但是，这会推送一个对象而不是原始值。

```
data = {'name': 'International'}

p = requests.post(urladd, data = sjson.dumps(data)) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:16:32.530

您链接的答案是您想要为值分配优先级的特殊情况。通常，'.value' 是一个无效名称，会引发错误。

如果您只想编写“国际”，则应编写该数据的字符串化 JSON 版本。我面前没有 python 示例，但 curl 命令将是：

curl -X POST -d "\"国际\"" https://...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T12:27:50.670

安德鲁上面的回答有效。如果其他人想知道如何使用`requests`Python 中的库来做到这一点，我认为这会有所帮助。

```
import simplejson as sjson

data = sjson.dumps("International")

p = requests.post(urladd, data = data) 
```

出于某种原因，我认为数据在转换为字符串化 JSON 版本之前必须采用字典格式。情况并非如此，一个简单的字符串可以用作`sjson.dumps()`.

# c++ - C++ 和 UML 图

> ID：14887164
> 
> 赞同：1
> 
> 时间：2013-02-15T01:41:23.033
> 
> 标签：c++, design-patterns

假设是 A 和 B 类，它们是 C 类的继承。所有这些都与 Main 类的方法 main 一起位于 file.cpp 中。如果我想创建一个 A 类的实例，那么......

文件.cpp

```
 class C{
 }

 class A : public C{
 }

 class B : public C{
 }
 class Main{
 .
 .
 .
 void main(){
    C *c = new A();
 }
 } 
```

图 UML 在哪里

![在此处输入图像描述](../Images/2c930b1734f8f77759ca6bfdbaf8fd97.png)

现在，假设我有相同的类，但每个类都在不同的文件中。如果我想实例化类 A，如上所述，我将在 Main 类中插入一个 #include Ah 指令，这将在我的图表中显示一个依赖项：

我的问题是：如果我想这样做，哪种情况是正确的？或者我在 C++ 中解释错误的关系 UML？

![在此处输入图像描述](../Images/e1e3c4a660c4b2038f9e0d7da1c13889.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:09:19.033

~~您需要使用**组合**关系来显示`Main` *has-a 的*实例`C`。~~

我从来没有记录过哪些文件需要被包含，因为假设如果你需要一个存在于另一个文件中的类的功能，你可能需要一个包含。

**编辑：**实际上，*没有*组合，因为看起来你`Main`的类有一个调用的方法`main()`，它创建`C`类的实例，而不是成员本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T02:26:54.053

我认为它不需要像第二个图中那样具有has-a 关系，因为它是隐含的。

A is-a a C, B is-a C and Main has-a C.

它更多地是关于你的设计结构而不是你的文件中包含的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T03:19:09.300

首先，除非您知道自己在做什么，否则不应将代码放在 .h 文件中（请参阅[内联函数](http://www.parashift.com/c++-faq/inline-functions.html)，主要用于提高速度）

然后在 main.h 中，您不需要对 A 的任何引用。然而，在 main.cpp 中，您将需要包含 Ah 请记住，UML 与语言无关，它用于绘制“谁与谁交谈”而不是“谁与谁编译”。

通常情况下，您的 c++ 编译器将为每个 cpp 文件生成一个输出文件（使用 gcc 这些是 .o 文件，Visual Studio 也这样做，但透明地）。然后，所有输出文件将在您的应用程序或库中（大部分时间）合并在一起，然后您的函数才会链接在一起。

您可能还想查看[前向引用](http://www.cplusplus.com/forum/unices/21527/)。它是告诉编译器（而不是链接器）“这个类确实存在，你现在可能不知道它，但我向上帝发誓，它会存在于链接器输出 blob 中”。

在您的特定情况下，无论您是仅使用一个还是多个 cpp 文件，我都会像您的第二个示例一样绘制类图。您的主要课程确实知道 A。

现在想象你的 C 类有类似的方法

```
A* C::createA()
{
    return new A;
}

B* C::createB()
{
    return new B;
} 
```

那么你的主要课程会有

```
int main()
{
    C* instance1 = C::createA();
    C* instance2 = C::createB();
} 
```

在这种情况下，您的主类将失去 A 和 B 的所有亲密知识，这与您的第一个图表一致。这当然会在 A、B 和 C 之间产生更多的耦合，这会带来自己的问题，但更接近于[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)

# php - 根据属性值选择 XML 元素

> ID：14887167
> 
> 赞同：0
> 
> 时间：2013-02-15T01:41:44.670
> 
> 标签：php, xml, parsing, simplexml

我有一个 Web 应用程序（在 PHP 中），它根据属性的值选择 XML 元素的数据。

但是，我在尝试实际执行此操作时遇到了麻烦。这是我正在使用的 XML：

```
 <meta> <!-- Data about data -->

        <genre genre_name="edm">
            <amount_of_bands>3</amount_of_bands>
        /genre>

        <genre genre_name="pop">
            <amount_of_bands>3</amount_of_bands>
        </genre>

        <genre genre_name="hip-hop">
            <amount_of_bands>1</amount_of_bands>
        </genre>

    </meta> 
```

我正在尝试访问标签中的数字。我尝试过使用`$xml_root->meta->genre['genre_name = edm']->amount_of_bands;`（使用 SimpleXML）），但没有产生任何结果。我试过研究，但我仍然一无所获。

**编辑，哟**- 我通过替换元素内的`<genre genre_name="hip-hop">`额外元素来解决我的问题。更容易阅读、维护和编码。`<genre_name>hip-hop</genre_name>``<genre>...</genre>`

感谢您的回答，无论如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T01:46:48.957

检查示例 #1： http: [//php.net/manual/en/simplexmlelement.attributes.php](http://php.net/manual/en/simplexmlelement.attributes.php)

不要回显数据，而是将属性列表推送到关联数组中，稍后您将能够引用该数组。

类似的问题： [如何从 PHP 中的 XML 文件中获取属性的值？](https://stackoverflow.com/questions/1256796/how-to-get-the-value-of-an-attribute-from-xml-file-in-php)

# r - 将大文本文件加载到 R 中的列表中

> ID：14887168
> 
> 赞同：0
> 
> 时间：2013-02-15T01:41:48.807
> 
> 标签：r, list, text, large-files

所以我有一个文本文件，其中包含正确格式的数据，它应该在 R 的列表中，但它是 14 Mb，显然 2Mb 是一个限制？我需要将此文本文件作为列表加载到 R 中。

这里有另一个帖子，但是那个命令（见下文）只是出错了

```
inlist <- strsplit(readLines("myList.txt"), "[[:space:]]+") 
```

谢谢我的意思是它的样子，因为它在这里很大，它是如何开始的

```
structure(list(inputsTrain = structure(c(-73, -69, -48, 13, -86, -147, -65, -71, -32, 100, -73, -196, -102, 37, 14, 55, ........ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T02:02:19.320

看来您的数据是`dput(mylist, file = 'mylist.txt')`

我建议使用 的倒数`dput`，即`dget`

```
inlist <-dget('mylist.txt') 
```

这只是一个包装器

```
eval(parse(file = 'mylist.txt')) 
```

我已经在一个 9mb 的文件上进行了测试，没有错误或警告。

例如

```
dput(as.list(seq_len(1e6)), 'foo')
# foo is a 9.3 megabyte file
x <- dget('foo')
# works nicely 
```

将来，不要将 R 对象保存为 ascii 表示，而是用于`saveRDS`保存序列化版本，可以通过`readRDS`

# django - 如何将用户模型与分类模型链接？

> ID：14887172
> 
> 赞同：0
> 
> 时间：2013-02-15T01:42:14.527
> 
> 标签：django, django-models, django-users, django-contenttypes

如何将用户模型与分类模型链接。如何为特定用户添加术语以及如何检索它们？

我对 Django 很陌生，所以你必须原谅我缺乏知识并且还没有掌握具体的术语。

我有以下模型女巫扩展了基本用户：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    birthday = models.DateField(blank=True)
    about_me = models.TextField(blank=True,null=True)
    avatar = models.ForeignKey(Picture,blank=True, null=True)
    class Meta:
        db_table = 'auth_user_profile' 
```

我还有以下分类模型：

```
class TaxonomyGroup(models.Model):
    related taxonomy items"""
    name = models.CharField(max_length=25, db_index=True)
    slug = AutoSlugField(populate_from='name', unique = True)

    def __unicode__(self):
        return u'%s' %self.name

    class Meta:
        db_table = 'taxonomies'
        ordering = ['name']

class TaxonomyItem(models.Model):
    taxonomy_group = models.ForeignKey(TaxonomyGroup, db_index=True)
    name = models.CharField(max_length=55, db_index=True)
    slug = AutoSlugField(populate_from='name', unique = True)

    def __unicode__(self):
        return u'%s' %self.name

class TaxonomyMap(models.Model):
    taxonomy_group = models.ForeignKey(TaxonomyGroup, db_index=True)
    taxonomy_item = models.ForeignKey(TaxonomyItem, db_index=True)
    content_type = models.ForeignKey(ContentType, db_index=True)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type','object_id')

    objects = TaxonomyManager()

    class Meta:
        db_table = 'term2object'
        unique_together = ('taxonomy_item', 'content_type', 'object_id') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:37:51.333

在我看来，您希望分类和用户模型之间存在多对多关系，因此您可以将其添加到 UserProfile 模型中。

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    birthday = models.DateField(blank=True)
    about_me = models.TextField(blank=True,null=True)
    avatar = models.ForeignKey(Picture,blank=True, null=True)
    taxonomies = models.ManyToManyField(TaxonomyItem) 
```

然后，当您为特定用户添加条款时，您将执行以下操作：

```
taxonomy = TaxonomyItem.objects.create(taxonomy_group=<some_group>, name=<some_name>,...)
profile = user.get_profile()
profile.taxonomies.add(taxonomy) 
```

检索你可以做

```
profile.taxonomies.all() 
```

# excel - 搜索和连接？查找字符串并将相邻单元格中的值连接到“主单元格”中

> ID：14887174
> 
> 赞同：0
> 
> 时间：2013-02-15T01:42:25.190
> 
> 标签：excel, excel-formula, string-concatenation

以下是数据的布局方式：

**公司票号**
Apple 123456
Bestbuy 121457
Target 123458
Apple 123479
Target 123446

我需要为苹果查找每张票#，然后放入一个单元格中，例如：(123456, 123479)

我在想我可以使用某些版本的搜索和连接功能来完成此操作。到目前为止没有运气

宁愿没有 VBA / 数据透视表 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:47:01.820

您需要额外的一行来正确测试它：

```
Company Ticket #
Apple   123456
Bestbuy 121457
Target  123458
Apple   123479
Target  123446
Apple   124 
```

它不是很优雅，但这里有：

在 C 列 (C7) 的最后一行（比如第 7 行）中：

`=B7`

在上面的 C 列 (C6) 行中： `=IF(ISNA(INDEX($A$7:C7,MATCH(A6,$A$7:A7,0),3)),B6,INDEX($A$7:C7,MATCH(A6,$A$7:A7,0),3)&", "&B6)`

你必须倒着做，因为 match 会找到第一个向下的匹配。

将该公式拖到顶行 (C2)。公司遗嘱的第一行将有一个以“，”分隔的所有票号的列表：

```
Company Ticket  
Apple   123456  124, 123479, 123456
Bestbuy 121457  121457
Target  123458  123446, 123458
Apple   123479  124, 123479
Target  123446  123446
Apple   124 124 
```

# c++ - Printf 不弹出

> ID：14887177
> 
> 赞同：0
> 
> 时间：2013-02-15T01:42:30.237
> 
> 标签：c++, printf

我是 C++ 编程的新手，在学习 lynda.com 教程时遇到了问题。教程视频上似乎还可以，但这不适用于我。

```
#include <stdio.h>

enum { max_string = 127 };

static char string[max_string + 1 ] = "";

int main( int argc, char ** argv ) {
    printf("Type a string: ");
    fgets(string, max_string, stdin);
    printf("The string is %s", string);
    return 0;
} 
```

当我运行这个时，会出现一些空白，当我在毯子空间中纠正“嘿”之类的东西时，会发生这种情况：

```
hey
Type a string: The string is hey 
```

这对我来说完全奇怪，我不知道我做错了什么。我正在使用 Eclipse 顺便说一句。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T01:46:34.100

您的标准输出流似乎是行缓冲的，这意味着您打印的文本在您打印完整行之前不会出现。如果您正在写入交互式设备，它*应该是无缓冲的；*也许有什么东西阻止了系统意识到输出设备是交互式的。

添加

```
fflush(stdout); 
```

在您的第一个`printf`应该强制`"Type a string: "`提示立即出现之后（即使您的输出没有缓冲，`fflush(stdout)`也是无害的）。

我正要建议改变你的第二个`printf`：

```
printf("The string is %s", string); 
```

至：

```
printf("The string is %s\n", string); 
```

以确保您的程序的输出以换行符结尾（如果不是，某些系统可能会出现异常） - 但`fgets()`实际上将换行符留在您的字符串中（除非输入行很长）。最终你会希望能够处理这种事情。

# c# - 如何在桌面图标后面放置表格？

> ID：14887185
> 
> 赞同：1
> 
> 时间：2013-02-15T01:43:54.307
> 
> 标签：c#, winforms, winapi, icons, desktop

您如何将 WinForms 表单放在桌面图标后面但在墙纸前面？为了使桌面成为表单的父级，我使用：

```
 [DllImport("user32.dll", SetLastError = true)]
    static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

    [DllImport("user32.dll", SetLastError = true)]
    static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

    IntPtr desktopHandle = (IntPtr)FindWindow("Progman", null);
    WallForm wallWindow = new WallForm();//WinForms Form

    ...

    private void SwitchParent()
    {
        wallWindow.Show();
        SetParent(wallWindow.Handle, desktopHandle);
        //wallWindow.SendToBack();
    } 
```

这可行，但它将表单放在桌面图标的前面。如果我在表单上调用 SendToBack，它就会消失，大概是在墙纸后面。我怎样才能让表单位于图标和桌面背景之间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:09:40.467

我不相信这是可能的。桌面窗口是呈现桌面图像和图标的单个窗口，因此无法在桌面图像和图标之间插入窗口。

除了编写一个以不同方式处理背景图像和桌面图标的外壳替换（一项具有许多障碍的主要开发任务）之外，我能想到的唯一其他选择是挂钩桌面的事件并拦截 WM_ERASEBKGND 或类似的东西来做你自己的绘图。（有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/1411718/drawing-under-icons-on-desktop)或[此问题](https://stackoverflow.com/questions/835175/replacing-desktop-wallpaper-draw-on-the-desktop)。）

不幸的是，这不会让你在图标后面放一个 WinForm，只有一个图像。您必须处理许多其他 Windows 消息来模拟实际表单。无论如何，这都是一项重大任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T10:58:48.483

这个问题有一个解决方案，至少在 Windows 8 上是这样。我以 CodeProject 上的文章的形式发布了它，所以你可以在这里阅读：

[http://www.codeproject.com/Articles/856020/Draw-behind-Desktop-Icons-in-Windows](http://www.codeproject.com/Articles/856020/Draw-behind-Desktop-Icons-in-Windows)

这适用于简单的绘图、windows 窗体、wpf、directx 等。该文章中提出的解决方案仅适用于 Windows 8。

# python - PYTHON - 倒数猜谜游戏 -

> ID：14887186
> 
> 赞同：0
> 
> 时间：2013-02-15T01:43:56.167
> 
> 标签：python

所以我一直在试图找出一种方法来编写一个程序，让计算机尝试猜测我正在考虑的数字，而不是让你猜测计算机选择的数字。它在大多数情况下都有效，但是在某些情况下，它确实会在链中重复数字，即使我之前已经告诉过它，例如我正在考虑的值高于“7”。在某些情况下，即使我告诉它更高或更低，它也会再次重复相同的数字。如果更有经验的人可以看看这个并告诉我我在这些循环中缺少什么，那将有很大帮助。

```
#computer enters a value x
#lower - computer guesses lower than x
#higher - computer guesses higher than x
#when string "You got it!" - game over

import random

lowBound = 0
highBound = 100
randomNumber = random.randint(lowBound,highBound)

print ("Is it ", randomNumber, " ?")
response = input()

while response != "You got it!":
    if response == "higher":
        lowBound = randomNumber    
        randomNumber = random.randint (lowBound, highBound)
        print ("Is it ", randomNumber, " ?")
        response = input()

    elif response == "lower":
        highBound = randomNumber
        randomNumber = random.randint (lowBound, highBound)
        print ("Is it ", randomNumber, " ?")
        response = input()

    if response == "You got it!":

        print ("Woohooo, I'm so bitchin'") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T01:55:22.457

`random.randint`是包容性的，所以：

```
if response == 'higher':
    lowBound = randomNumber + 1 
```

和

```
if response == 'lower':
    highBound = randomNumber - 1 
```

此外，如果用户没有输入有效的响应，`input()`将永远不会被再次调用，程序将陷入无限循环。

更强大的东西，但不处理骗子：

```
import random

lowBound = 0
highBound = 100
response = ''
randomNumber = random.randint(lowBound,highBound)

while response != "yes":
    print ("Is it ", randomNumber, " ?")
    response = input()
    if response == "higher":
        lowBound = randomNumber + 1   
        randomNumber = random.randint(lowBound,highBound)
    elif response == "lower":
        highBound = randomNumber - 1
        randomNumber = random.randint(lowBound,highBound)
    elif response == "yes":
        print ("Woohooo, I'm so bitchin'")
        break
    else:
        print ('Huh? "higher", "lower", or "yes" are valid responses.') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T01:54:52.717

`random.randint(a, b)`返回一个介于 和 之间的数字，包括`a`和`b`。生成新的随机数时，您应该使用`random.randint(lowBound+1, highBound-1)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T01:58:10.340

在提到的其他问题中，您的一个问题是在这些方面：

```
highBound = randomNumber
randomNumber = random.randint (lowBound, highBound) 
```

您正在设置一个新的界限，这很好，但是您正在选择另一个随机数！

您应该做的是将界限*减半*，并从那里询问用户更高或更低。看看**二进制搜索**算法。

```
highBound = randomNumber
randomNumber = randomNumber / 2 
```

您的程序仍然可以工作（这里提到的其他更改），但这会在大多数情况下更快地猜出您的号码。

实际上[在维基百科上有一个这个游戏的例子。](http://en.wikipedia.org/wiki/Binary_search_algorithm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-13T16:47:15.827

这是 Michael Dawson 书中的这个练习的版本，我试图尽量减少计算机使用的尝试次数。我知道代码看起来很狡猾，这只是我的第二天:)

* * *

```
answer=""
guess=50
counter=3
x=25

print("hi, guess the number from 1 too 100")
input("\n")

print ("i will try to guess it")
print ("is it ", guess, "?")

while answer not in ("y","l","s"):
    print ("sorry, i didn't understand \n")
    answer=input("type in: (Y) for yes, or (L) if it is to large, or (S) if it is to small:")

if answer in ("s","l"):
    while answer!="y":

        if answer=="l":
            guess=int(guess-x)
            print ("how about", guess,"?")
            answer=input("\nis it? type in: (Y) for yes, or (L) if it is to large, or (S) if it is to small:")
            x=100/2**counter
            counter=counter+1
            if x<1:
                x=1

        elif answer=="s":
            guess=int(guess+x)
            print ("how about", guess,"?")
            answer=input("\nis it? type in: (Y) for yes, or (L) if it is to large, or (S) if it is to small:")
            x=100/2**counter
            counter=counter+1
            if x<1:
                x=1

        elif answer=="y":
            break
else:
    pass

print("\ngreat! the number that you guessed is", guess)
print("i can read your mind with no guesses!")
input("\n") 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-15T01:55:06.113

你会得到两次数字，因为[`random.randint`](http://docs.python.org/3/library/random.html#random.randint)的边界是包容性的；`random.randint(1, 3)`可以返回 1,2 或 3。请注意，如果响应既不是“更高”、“更低”或“你知道了！”，您还应该继续询问人类：

```
import random
lowBound = 0
highBound = 100

while True:
    randomNumber = random.randint(lowBound, highBound)
    print ("Is it ", randomNumber, " ?")
    response = input()

    if response == "higher":
        lowBound = randomNumber + 1
    elif response == "lower":
        highBound = randomNumber - 1

    if response == "You got it!":
        print ("Woohooo, I'm so bitchin'")
        break 
```

# mysql - 将表连接在一起Mysql 3次

> ID：14887191
> 
> 赞同：1
> 
> 时间：2013-02-15T01:44:33.550
> 
> 标签：mysql, sql, join

我有 4 张桌子。它们是客户、物品、图像和规格。目标是将这 4 个表连接在一起。现在我正在组合这样的项目和图像：

```
SELECT item_id, item_name, item_price,images_id, GROUP_CONCAT(images_fullname) AS images, images_itemid
FROM items
LEFT OUTER JOIN images ON item_id=images_itemid 
```

但是加入第三张桌子规格的最佳方式是什么？specs 包含：spec_id、spec_itemid、spec_name、spec_value（specs 是特定项目的规范）。我想最好的做法是不要再复制一次 Left Outer Joine？

我需要的布局如下：

```
Item name 1
image1, image2, image 3 (is working now with concat)
spec_name, spec_value
spec_name, spec_value
spec_name, spec_value

Item name 2
image1, image2, image 3 (is working now with concat)
spec_name, spec_value
spec_name, spec_value
spec_name, spec_value 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T01:47:42.533

仅当连接表可以为空时，才需要外部连接。目前尚不清楚这里是否是这种情况，但请记住这一点。

```
SELECT
    various_columns
FROM
    items
    LEFT JOIN images ON item_id = images_itemid
    LEFT JOIN specs ON item_id = spec_itemid 
```

添加另一个联接没有错；您仍在加入关键列（我假设）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T02:40:47.720

如果我正确理解了您的要求，那么您选择的每个项目的规格表中都有一组规格吗？

如果是这种情况，您有几个选择：

1.  在单个查询中获取所有内容，获取每个项目的多个记录（每个图像/规范/等一行），然后在代码中对其进行排序（非常难看）

2.  使用子查询和`group concat`您当前正在处理图像的规范（我认为这也很混乱，并且在您为规范设置的键值对设置中更是如此。

3.  多次调用数据库以在代码中构建您的对象<-如果我正确猜测您的数据模型，这就是我认为您应该处理它的方式。

我假设您有一个项目，除了*标准*项目字段之外：

1.  一些图片
2.  几个指定项目特定属性的键值对

您尝试创建的东西与购物网站没有什么不同？

在你的鞋子里，我会有几个单独的查询来做到这一点（伪代码）：

```
 items = SELECT item_id, item_name, item_price,images_id FROM items 
```

然后在这些项目的 foreach 循环中，如果使用 OO 语言，您将在循环中的 Item 对象中填充列表：

```
foreach (item in items) {
   SELECT images_fullname, images_itemid FROM images WHERE item_id=images_itemid;
   // put into a list of type image in the item object
   SELECT * FROM specs WHERE item_id=spec_itemid;
   // put into a list of type spec in the item object 
} 
```

如果关注的是减少数据库调用并将此信息合并到代码中（即您要获取数千个项目），那么您最终会执行类似联接的操作，但要获取（例如）您感兴趣的所有项目的图像使用一个查询并将它们映射到代码中的项目。

# .net - 基于按钮的选择是单击。不使用 buttonclick 事件

> ID：14887193
> 
> 赞同：1
> 
> 时间：2013-02-15T01:44:59.383
> 
> 标签：.net, wpf, radio-button

我正在开发一个 WPF 应用程序，其中我有 2 个具有“相同组名”的单选按钮。

1.  蓝色的
2.  黑色的

我也有清除按钮。打开应用程序后，默认选择“蓝色”单选按钮。

如果我点击“黑色”单选按钮，如果我点击清除按钮，我希望控制回到蓝色。

我不想在 .cs 文件或类似文件中使用 Buttonclick 事件。我想使用 IsChecked 属性绑定到按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T02:38:02.970

您可以`EventTrigger`在事件上使用 on`Button.Click`来运行 a`BooleanAnimationUsingKeyFrames`来设置`RadioButton` `IsChecked`属性

例子

```
 <StackPanel>
        <RadioButton x:Name="blue" Content="Blue" IsChecked="True"/>
        <RadioButton Content="Black" />
        <Button Content="Clear">
            <Button.Triggers>
                <EventTrigger RoutedEvent="Button.Click">
                    <EventTrigger.Actions>
                        <BeginStoryboard>
                            <Storyboard>
                                <BooleanAnimationUsingKeyFrames Storyboard.TargetName="blue" Storyboard.TargetProperty="IsChecked">
                                    <DiscreteBooleanKeyFrame KeyTime="00:00:00" Value="True" />
                                </BooleanAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger.Actions>
                </EventTrigger>
            </Button.Triggers>
        </Button>
    </StackPanel> 
```

所以这将检查点击`Blue` `RadioButton`的时间`Button`

# php - ACL 是我的错误模块的原因吗？

> ID：14887195
> 
> 赞同：0
> 
> 时间：2013-02-15T01:45:40.357
> 
> 标签：php, magento, module, acl, adminhtml

我制作了一个自定义模块，它成功地在 admin->configuration 部分添加了一个新菜单，并将一些设置保存到 magento 配置中，并且还在第一次运行/安装时创建了一个表。一切都在本地运行良好，但是当我将模块移动到另一台服务器时，单击管理区域中添加的链接时出现 404 错误，并且似乎没有任何效果 - 可能持续了几个小时。最终它才开始起作用。我通常第二天才回来，404 消失了，一切都按预期工作，但如果我尝试清除所有缓存，重新索引站点，甚至手动清除 var 文件夹 - 没有任何帮助。直到几个小时或一天后，它仍然会给我一个 404 错误。

我没有完全掌握我应该做些什么来避免错误 - 但我只是对这个问题如何在一段时间后自行消失感到困惑？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:27:53.013

这在安装新扩展（添加管理页面）时很常见。您需要做的就是注销，然后重新登录。

# bibtex - 批量下载bibtex数据？

> ID：14887201
> 
> 赞同：3
> 
> 时间：2013-02-15T01:46:22.690
> 
> 标签：bibtex, google-scholar

有没有办法从 Google Scholar 或其他地方批量下载 bibtex 数据？

我尝试了一些 GS Scraper，例如 [https://github.com/gimoya/theBioBucket-Archives/blob/master/R/Functions/GScholarScraper_3.1.R](https://github.com/gimoya/theBioBucket-Archives/blob/master/R/Functions/GScholarScraper_3.1.R)

但他们都不能下载 bibtex 文件。获取文件需要一个神秘的**scisig密钥。**

我也试过 Jabref。它可以批量获取 bibtex 文件。但是GS中的高级搜索功能都被禁用了。

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-21T10:30:35.787

我用这个功能更新了scholar.py。见[http://www.github.com/hildensia/scholar](http://www.github.com/hildensia/scholar)

```
$ ./scholar.py "Alan Turing Entscheidungsproblem" --bibtex --count 1

@article{turing1936computable,
  title={On computable numbers, with an application to the Entscheidungsproblem},
  author={Turing, Alan M},
  journal={Proceedings of the London mathematical society},
  volume={42},
  number={2},
  pages={230--265},
  year={1936},
  publisher={London, UK}
}

$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T01:45:37.653

您可以使用 Mendely 批量下载 bibtex，前提是您使用此软件维护论文库

# c# - Asp.net 中的会话是否在网站用户之间共享？

> ID：14887203
> 
> 赞同：6
> 
> 时间：2013-02-15T01:46:35.980
> 
> 标签：c#, session

Asp.net 中的会话是否在网站用户之间共享？

客户端 1 在页面加载中的会话中存储值，如下所示：

```
 Session["editStudentID"] = editStudentID.ToString(); 
```

客户端 2 同时访问客户端 1 的同一页面，因此将存储其他会话

```
Session["editStudentID"] = editStudentID.ToString(); 
```

那么客户端 1 或 2 会话可以相互中断吗？！或者会话对于每个客户端都是唯一的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T02:24:59.930

不，它不共享。

客户端发送请求以启动新会话的服务器为该客户端分配一个新的会话 ID。这是每个客户的唯一 ID 或令牌。每个 Post 或 Get 到服务器通常会发送该 Session ID 或 Token 以告诉服务器它是谁（标识符）。

此外，所有会话变量数据都存储在服务器上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T01:49:44.310

会话是每个会话 ID，会话 ID 通常是每个浏览器（通过 cookie 或 URL 参数）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T01:52:40.950

不它不是。

当客户端第一次连接到服务时，初始响应包括一个 cookie，用于跟踪来自该客户端的后续连接。然后，每当您引用 Session 对象以确定引用了支持 Session 存储中的哪些数据时，就会使用 cookie 的值。

因此，更改任何请求中的 Session 数据只会更改该客户端的数据。如果您需要在多个客户端之间共享数据，则必须为此提供不同的机制 - 静态字典或类似的。

# vba - Excel vba计算一列的平均值

> ID：14887210
> 
> 赞同：2
> 
> 时间：2013-02-15T01:47:12.953
> 
> 标签：vba, excel

我想计算一列的平均值并将值放在下面。
我在 VBA 中编写了这段代码，但返回值始终为 0。

```
Sub Macro4()
'
' Macro4 Macro
'
' Keyboard Shortcut: Ctrl+Shift+C
Dim sum As Integer
Dim count As Integer
count = 0
sum = 0
Do While ActiveCell.Value <> ""
    ActiveCell.Offset(1, 0).Activate
    sum = sum + ActiveCell.Value
    count = count + 1
    Loop
ActiveCell.Value = sum / count
ActiveCell.Offset(0, 5).Select
Selection.End(xlUp).Select
Selection.End(xlUp).Select
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:48:13.087

正如@Tahbaza 指出的那样，除非您`ActiveCell`位于行的顶部，否则它只会从活动单元格所在的列中的行开始计数。

您的代码还有一个错误，即它不会在循环的第一次迭代中计算活动单元格，因此该值将从平均值中丢失。

我已经在下面的代码集中解决了这两个问题，但是如果没有下面的建议，还会有其他改进（即根本不使用`Select`）。

```
Sub Macro4()
   '
   ' Macro4 Macro
   '
   ' Keyboard Shortcut: Ctrl+Shift+C
   Dim sum As Integer
   Dim count As Integer
   count = 0
   sum = 0
   Selection.End(xlUp).Select              '<---Go to the top of the range
   Do While ActiveCell.Value <> ""
       sum = sum + ActiveCell.Value
       count = count + 1
       ActiveCell.Offset(1, 0).Activate    '<---Move down *after* you done the sumcount
   Loop
   ActiveCell.Value = sum / count
   ActiveCell.Offset(0, 5).Select
   Selection.End(xlUp).Select
   Selection.End(xlUp).Select
End Sub 
```

您可以使用如下一行代码实现您想要的结果。这假设您希望平均的单元格是连续的并且没有空单元格。它还假定您的值从工作表的第一行开始，*并且必须至少有两行值*。

```
Sub ColumnAverage()
    Cells(1, ActiveCell.Column).End(xlDown).Offset(1, 0).Value = Application.WorksheetFunction.Average(ActiveSheet.Columns(ActiveCell.Column))
End Sub 
```

编辑：事实上，如果您不需要静态值，但可以在列的最后一个单元格中使用工作表函数公式。它有点像野兽，但如果你分解它应该是有道理的：

```
Sub ColumnAverageFormula()
    Cells(1, ActiveCell.Column).End(xlDown).Offset(1, 0).Formula = "=Average(" & Cells(1, ActiveCell.Column).Address(0, 0) & ":" & Cells(1, ActiveCell.Column).End(xlDown).Address(0, 0) & ")"
End Sub 
```

# jsp - 加强跨站点脚本：验证不佳

> ID：14887212
> 
> 赞同：0
> 
> 时间：2013-02-15T01:47:25.883
> 
> 标签：jsp, jstl, xss, fortify

我已经使用 JSTL 标签修​​复了 Fortify 在我的 JSP 上报告的 XSS 漏洞问题。但是使用后，虽然 XSS 漏洞问题得到了解决，但它导致了一个新问题，即“XSS：验证不良”。我可以实施哪些其他可能的解决方案来解决这个糟糕的验证问题？

Fortify 建议 HTML/ XML/ URL 编码不是一个好的做法，因为代码将在运行时被解码，这仍然可能导致 XSS 攻击。

我正在使用注入spring的struts框架。我有用户可以提供输入的字段以及从数据库中读取的字段。我已经搜索了可能的解决方案，但还没有找到任何解决方案。

谢谢，迪娜

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T19:59:08.883

根据输出数据的位置使用正确的编码。可以在[OWASP XSS 预防备忘单](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)中找到详细信息 - 以及有关 OWASP`AntiSamy`和`Java HTML Sanitizer`.

此外，可以在适当的情况下使用 [白名单。](https://www.owasp.org/index.php/Input_Validation_Cheat_Sheet)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-05T18:36:31.793

使用 OWASP 编码器 Jar。Fortify 解决了我的跨站点脚本问题。

从以下 URL 下载 jar。第二个选项卡有示例。 [https://www.owasp.org/index.php/OWASP_Java_Encoder_Project](https://www.owasp.org/index.php/OWASP_Java_Encoder_Project)

片段：

```
<body><%= Encode.forHtml(UNTRUSTED) %></body> 
```

[http://owasp.github.io/owasp-java-encoder/encoder/apidocs/index.html?index-all.html](http://owasp.github.io/owasp-java-encoder/encoder/apidocs/index.html?index-all.html)

# javascript - 如何使用 jQuery 过滤带有菜单列表的表格数据？

> ID：14887215
> 
> 赞同：3
> 
> 时间：2013-02-15T01:48:11.923
> 
> 标签：javascript, jquery, html, css

我正在开发一个商店目录，它在一行中显示每个商店，其中包含带有各种商店信息的表格单元格。为了帮助过滤结果，我还有一个基本的商店类型列表，例如男士时装、女士时装等

```
<li>--Store Type--</li> 
```

格式。

当用户单击这些列表项之一时，例如 Men's Fashion，我希望它过滤包含术语 Men's Fashion 的所有表格行，并隐藏没有该术语的行。一些表格单元格将有多个术语，因为一些商店同时销售男士和女士时装，所以我希望它根据所有术语而不是单个术语进行过滤。

我将如何使用 jQuery 来做这件事？

这是我的列表结构

```
<ul>
   <li>Women's Fashion</li>
   <li>Men's Fashion</li>
   <li>Shoes &amp; Footwear</li>
   <li>Communication &amp; Technology</li>
</ul> 
```

这是我的表结构

```
<tr class="row" data="">
   <td class="name list-background-dark">Ted Baker<img class="store-logo" src="Logo.jpg" alt="Ted Baker" title="Ted Baker"></td>
   <td class="location list-background-dark"><span class="location-image-dark">Level 1</span></td>
   <td class="numeric number"><span class="telephone-dark">5555555</span></td>
   <td class="category"><span class="category-dark">Men's Fashion, Women's Fashion, Communication &amp; Technology</span></td>
</tr> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T01:51:53.527

**更新：**我以前的答案使用过[`$.grep`](http://api.jquery.com/jQuery.grep/)，但更好的选择是[`filter`](http://api.jquery.com/filter/)：

```
$(".row").hide().filter(function() {
    return $(this).find(".category span").text().indexOf(searchTerm) >= 0;
}).show(); 
```

[jsFiddle](http://jsfiddle.net/mgibsonbr/WrgPA/1/)的工作示例。

### 细节：

这将选择所有行，隐藏它们，并返回相同的数组

```
$(".row").hide() 
```

...然后将被传递给`filter`（它将通过某些条件过滤它）。

```
$(".row").hide().filter(function() {
    // "this" refers to the element being tested
    return ...
}); 
```

我们想要的是具有`category`类元素的行，并且在其内部`span`应该有我们正在寻找的文本：

```
$(this).find(".category span").text().indexOf(searchTerm) >= 0 
```

最后，显示了结果元素：

```
}).show(); 
```

# celery - Django Celery 工作流链暂停/恢复

> ID：14887222
> 
> 赞同：6
> 
> 时间：2013-02-15T01:49:14.073
> 
> 标签：celery, django-celery

有什么方法可以暂停/恢复使用 celery 3.0 中的链创建的正在运行的工作流程？

基本上，我们的系统中有两种不同类型的任务：交互式任务和非交互式任务。我们拥有所有参数的非交互式的，但交互式的需要用户输入。请注意，对于交互任务，我们只能在链中所有先前的任务都完成后才请求用户输入，因为它们的结果会影响交互任务（即我们不能在创建实际链之前请求用户输入）。

关于如何解决这个问题的任何建议？在这里真的很茫然。。

目前的想法：

*   创建 Task 的两个子类（来自 celery import Task）。向 Interactive 任​​务子类添加一个额外的实例（类成员）变量，该变量默认设置为 false，表示仍需要一些用户输入。不知何故可以访问 Task 的实例，并从 celery worker 外部将其设置为 true （尽管我已经对此进行了相当多的查找，并且似乎无法直接从另一个模块访问 Task 对象）
*   将链划分为由交互式作业分隔的多个链。一旦链到达末端并触发交互式任务的交互式客户端组件，celery worker 外部的某种机制就会检测到。一旦用户输入了所有这些数据，获取数据并启动新链，其中交互式任务位于新链的头部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-03T13:23:07.967

我们已经在我们的项目中实施了类似于您的第二个想法的东西，并且效果很好。这是实现的要点。

将新字段添加`status`到您的模型并覆盖保存方法。

**模型.py：**

```
class My_Model(models.Model):
    # some fields
    status = models.IntegerField(default=0)

    def save(self, *args, **kwargs):
        super(My_Model, self).save(*args, **kwargs)
        from .functions import custom_func
        custom_func(self.status) 
```

**任务.py**

```
@celery.task()
def non_interactive_task():
    #do something.

@celery.task()
def interactive_task():
    #do something. 
```

**函数.py**

```
def custom_func(status):
    #Change status after non interactive task is completed.
    #Based on status, start interactive task. 
```

将变量传递`status`给模板，这对于显示 UI 元素以供用户输入信息很有用。当用户输入所需信息时，更改状态。这`custom_func`会触发您的`interactive_task`.

# iphone - 如何仅从 UIImage 中提取白色像素？

> ID：14887226
> 
> 赞同：1
> 
> 时间：2013-02-15T01:50:01.490
> 
> 标签：iphone, ios, core-graphics

我需要使用一些现有的图像，其中包含一些白色图标字形，并且只提取字形部分。想象一下 iPhone 的 Phone.app 图标，它的周围是绿色的，中间有一个白色的电话图标。我只需要提取电话图标，没有绿色背景（并在其周围保持透明度）。

我尝试使用 CGDataProviderCopyData 并遍历像素值并更改它们，但我不熟悉图形技术并且我没有运气。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:08:38.677

您是否有固定数量的图像要从中提取 while 字形，或者它是连续的？

如果它是固定数量，那么这是 Photoshop 的工作，而不是这里的问题。如果它是连续图像流，那么我建议再次查看像素值。

白色像素是 (255,255,255) 如果您想在搜索中包含接近白色的像素，您可以包含高于某个阈值的任何像素。例如，所有三个值都高于 230 的任何像素。

所以.. (<230,<230,<230)

希望这可以帮助 ：）

# c# - 如何让 mongo TTL 在 C# 中过期

> ID：14887227
> 
> 赞同：4
> 
> 时间：2013-02-15T01:50:10.120
> 
> 标签：c#, mongodb

Mongo 不会过期旧集合。我检查以确保我的索引是类型日期。

```
var keys = IndexKeys.Ascending("expiry");
var options = IndexOptions.SetTimeToLive(TimeSpan.FromMinutes(1));

collection.EnsureIndex(keys, options);
this.ExpireDate = new BsonDateTime(DateTime.UtcNow.AddMinutes(5));
var insertResult = collection.Insert(this); 
```

任何提示将不胜感激。

```
[
    {
            "v" : 1,
            "key" : {
                    "_id" : 1
            },
            "ns" : "Showsv1.ShowInfo",
            "name" : "_id_"
    },
    {
            "v" : 1,
            "key" : {
                    "expiry" : 1
            },
            "ns" : "Showsv1.ShowInfo",
            "name" : "expiry_1",
            "expireAfterSeconds" : 60
    } 
```

]

```
"expiry" : ISODate("2013-02-15T02:40:45.876Z") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T03:32:28.367

代码在 ExpireTime 属性顶部缺少 [BsonElement("expiry")]。感谢@WiredPrairie 的提示。

# java - UTF-8 到 UTF16 解析

> ID：14887228
> 
> 赞同：1
> 
> 时间：2013-02-15T01:50:13.337
> 
> 标签：java, xml, utf-8, xml-parsing, utf-16

我有一个 UTF-8 的 XML 并且有一些中文特殊字符，我需要解析这个 xml。

```
DocumentBuilderFactory factory = DocumentBuilderFactory
                    .newInstance();
factory.setIgnoringElementContentWhitespace(true);
factory.setNamespaceAware(true);
factory.setValidating(true);

//byte[] buffer = xmlMsg.getBytes("UTF-16");

logger.info("transformToUTP " + xmlMsg);

//byte[] buffer = soapMessage.getBytes();
//ByteArrayInputStream stream = new ByteArrayInputStream(buffer);               

InputSource is = new InputSource(new ByteArrayInputStream(
                   xmlMsg.getBytes("UTF-16")));

Document doc = factory.newDocumentBuilder().parse(is);
//Document doc = factory.newDocumentBuilder().parse(
                   new InputSource(new StringReader(xmlMsg)));                              

XPath xpath = XPathFactory.newInstance().newXPath();
xpath.setNamespaceContext(getNameSpace());

XPathExpression soapBodyExpr = xpath.compile(BODY_XPATH_EXP);
Node soapBody = (Node) soapBodyExpr.evaluate(doc,
            XPathConstants.NODE);

Node reqMsgNode = soapBody.getFirstChild(); 
```

我在 reqMsgNode 上收到空指针异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:20:12.750

不要将 xml 转换为字符串，按原样解析，使用

`DocummentBuilder.parse(File)`或者`DocumentBuilder.parse(InputStream)`

解析器将从 xml 声明中获取编码，例如`<?xml version="1.0" encoding="UTF-8"?>`，如果缺少，则默认使用 UTF-8

# php - 主页无法立即识别会话 PHP

> ID：14887230
> 
> 赞同：0
> 
> 时间：2013-02-15T01:50:26.113
> 
> 标签：php, session

我有一个网站，根据用户是否登录，显示两个不同版本的导航部分。

```
<?php 
    if(isset($_SESSION['myusername'])){
        echo '<a href="'.$baseRoot.$defaultPage.'?com=logout&cxid='.uniqid(),'">Log Out</a>';
    }else{
        echo '<a href="'.$baseRoot.$defaultPage.'?com=login&cxid='.uniqid(),'" class="signupbutton">Sign Up</a>';
    }
?> 
```

当用户登录然后关闭浏览器而不注销（并假设他们没有在浏览器退出时清除缓存/cookie）时，就会出现问题。

当他们稍后打开浏览器并返回该站点时，导航显示就好像他们没有登录一样。如果他们随后单击站点上其他地方的链接，即*My Account*，则导航将更改为显示他们已登录在。

有什么想法可能导致这种情况吗？我希望导航显示他们在返回站点后立即登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:23:38.230

首先，检查`session_start()`出现在任何 html 之前的页面上，甚至是 !DOCTYPE 规则。

现在，在您的索引页面上添加以下内容：

```
 <?php
  session_start();
  if(isset($_SESSION['username'])){
  header("location: home.php"); // or whatever page you want your users to be redirected to... 

  }else {
  ?>
  //  here your html page should start 
  <html><head></head><body>
  // all the DOM elements on your page
  </body></html>
  <?php  
   } // closing end of the else block started above  
  ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:34:23.287

必须如下。

```
ob_start();
session_start();
//code to check session and other
```

`ob_start()`用于省略标头已发送错误。

# css - 当 Parent 仅为 50% 时显示 100% Child Width

> ID：14887233
> 
> 赞同：1
> 
> 时间：2013-02-15T01:51:08.513
> 
> 标签：css

有没有办法让一个子元素成为屏幕的 100% 宽度，而它的父元素只有 50%？

例如，我需要使该站点的黑色页脚扩展屏幕的整个宽度，同时保持站点其余部分的完整性。msdnw.com/

我创建了#blackback 的自定义 div，并尝试了各种方法使其工作，但不能。有任何想法吗？PS 是的，我已经尝试将 div 放在页脚代码下方，以包装页脚。但也许我使用的代码没有按我的需要工作。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:04:26.557

将您的`#blackback`CSS 更新为：

```
#blackback {
    width: 100%;
    height: 300px;
    background-color: #000;
    position: absolute;
    left: 0;
} 
```

应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T01:57:04.427

你想去使用绝对定位：

```
.child {
    left: 0;
    right: 0;
    position: absolute;
} 
```

希望有帮助

# java - 有没有办法让一个对象在类外只读？

> ID：14887234
> 
> 赞同：0
> 
> 时间：2013-02-15T01:51:10.547
> 
> 标签：java, class, object, readonly

所以可以说我有这样的课程：

```
public class MyClass
{
    public int myInt = 5;
} 
```

现在我不希望这种情况发生：

```
MyClass myObject = new MyClass();
myObject.myInt = 10; 
```

我只想让“myInt”只读。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T01:55:26.167

`I just want "myInt" to be read only`做了`final`

```
public class MyClass
{
    public final int myInt = 5;
} 
```

或`private`添加getter方法

```
public class MyClass
{
    private int myInt = 5;

    public int getMyInt(){
       return myInt;
    }
} 
```

两种解决方案都有优点但也有缺点：

*   final 将使其在课堂内也只读，
*   私人不会保证它不会被更改`reflection`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T01:53:12.117

用于`private`使其不可访问，或使其`final`不可变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T01:55:40.897

将变量设为私有并添加一个 getter 方法。

```
public class MyClass
{
    private int myInt = 5;

    public int getMyInt(){
      return this.myInt;
    }
}

MyClass myObject = new MyClass();
myObject.getMyInt();    //This will return 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T01:56:50.723

AFAIK 没有办法做到这一点。将 myInt 设为私有并声明一个公共 getter 函数。你想达到什么目的？

```
public class MyClass
{
    private int myInt = 5;

    public int getInt() { return myInt; }
} 
```

# windows - 更新 AD 中的用户信息

> ID：14887235
> 
> 赞同：2
> 
> 时间：2013-02-15T01:51:33.787
> 
> 标签：windows, active-directory

我之前发布过一个问题，但可能是我没有清楚地描述我的问题，因此我重新编写了我的问题，希望大家能理解它。

在我的 Windows 服务器中，大约有 1500 个用户，Active Directory 中的用户信息不正确，需要更新。邮箱字段要更新，比如当前邮箱是`tom.chan@email.com`，我想改成`"user name" + email.com`

例如：

1.  `tom.chan@email.com`==> `user1@email.com`;
2.  `amy.yuen@email.com`==> `user2@email.com`;
3.  `jacky.hung@email.com`==>`user3@email.com`

任何人都可以帮忙提供建议吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:58:35.477

您可以使用 a`PrincipalSearcher`和“按示例查询”主体进行搜索：

```
// create your domain context
using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
{
    // define a "query-by-example" principal - here, we search for a UserPrincipal 
    // with last name (Surname) that starts with "A"
    UserPrincipal qbeUser = new UserPrincipal(ctx);
    qbeUser.Surname = "A*";

    // create your principal searcher passing in the QBE principal    
    using (PrincipalSearcher srch = new PrincipalSearcher(qbeUser))
    {
       // find all matches
       foreach(var found in srch.FindAll())
       {
           // now here you need to do the update - I'm not sure exactly *WHICH*
           // attribute you mean by "username" - just debug into this code and see
           // for yourself which AD attribute you want to use
           UserPrincipal foundUser = found as UserPrincipal;

           if(foundUser != null)
           {
              string newEmail = foundUser.SamAccountName + "@email.com";
              foundUser.EmailAddress = newEmail;
              foundUser.Save();
           }
       }
    }
} 
```

使用这种方法，您可以遍历您的用户并更新它们 - 再次：我不完全确定我理解您想要用作*新*电子邮件地址的内容.....所以也许您需要调整它以适应您的需求。

另外：我建议**不要**一次对您的整个用户群执行此操作！以组的形式运行它，例如按 OU，或按姓氏的首字母或其他方式 - 不要一次对所有 1500 个用户进行大规模更新 - 将其分解为可管理的部分。

如果您还没有 - 一定要阅读 MSDN 文章[Managing Directory Security Principals in the .NET Framework 3.5](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)，它很好地展示了如何充分利用 .NET Framework 中的新功能`System.DirectoryServices.AccountManagement`。或查看[System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)命名空间上的 MSDN 文档。

当然，根据您的需要，您可能希望在您创建的“示例查询”用户主体上指定其他属性：

*   `DisplayName`（通常：名字 + 空格 + 姓氏）
*   `SAM Account Name`- 您的 Windows/AD 帐户名称
*   `User Principal Name`- 您的“username@yourcompany.com”样式名称

您可以在 上指定任何属性`UserPrincipal`并将其用作`PrincipalSearcher`.

# asp.net-mvc - ASP.NET MVC 路由不起作用，为什么？

> ID：14887237
> 
> 赞同：0
> 
> 时间：2013-02-15T01:51:37.783
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有这条路线：

```
routes.MapRoute(
    name: "ThreadList",
    url: "Forums/{category}/",
    defaults: new { controller = "Forums", action = "ThreadList" }
); 
```

它与此链接不匹配：

```
http://localhost:11227/Forums/MyCategory 
```

我在哪里犯了错误？

# wordpress - Wordpress 博客中的第一篇文章显示不正确

> ID：14887238
> 
> 赞同：0
> 
> 时间：2013-02-15T01:51:41.353
> 
> 标签：wordpress

我正在设计一个 wordpress 主题，而顶部的博客文章总是显示不正确。代码在这里：

```
 <div class="bordered centered">
    <p class="negative-margin alignleft header"><?php the_title(); ?></p><p class="negative-margin alignright date"><?php the_date(); ?></p><div style="clear:both;"></div>
    <?php if ( is_search() ) : // Only display Excerpts for Search ?>
    <div class="entry-summary">
        <?php the_excerpt(); ?>
    </div><!-- .entry-summary -->
<?php else : ?>
<div class="entry-content">
    <?php if ( has_post_thumbnail() ):?>
    <div id="entry-left"><?php   $large_image_url = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'large');
    echo '<a href="' . $large_image_url[0] . '" title="' . the_title_attribute('echo=0') . '" >';
    echo get_the_post_thumbnail($post->ID, 'large'); 
    echo '</a>';?>
</div>
<div class="entry-right">
    <?php the_content( __( 'More <span class="meta-nav">&rarr;</span>', 'huckleberry' ) ); ?>
    <?php wp_link_pages( array( 'before' => '<div class="page-links">' . __( 'Pages:', 'huckleberry' ), 'after' => '</div>' ) ); ?>
</div>
<div class="entry-right">
    <table>
        <tr>
            <td><p class="header">Details</p><br />
                <?php $my_meta = get_post_meta( $post->ID, 'link', false ); ?>
                <?php if ($my_meta): var_dump($my_meta) ?>
                <?php foreach ($my_meta as $currMeta): ?>
                <?php if( $currMeta && '' != $currMeta ): $currMeta=explode($currMeta,";",2);?>
                     <a href="<?php echo $my_meta[1] ?>"><?php $my_meta[0];?></a>
                <?php endif; endforeach; endif; ?>
            </td>
            <td>
                 <a href="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'secondary-image');?>">
                <?php if (class_exists('MultiPostThumbnails')) : MultiPostThumbnails::the_post_thumbnail(get_post_type(), 'secondary-image'); endif; ?>
                </a>
            </td>
            <td>
                 <a href="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'tertiary-image');?>">
                    <?php if (class_exists('MultiPostThumbnails')) : MultiPostThumbnails::the_post_thumbnail(get_post_type(), 'tertiary-image'); endif; ?>
                 </a>
            </td>
            <td>
                 <a href="<?php echo MultiPostThumbnails::get_post_thumbnail_url(get_post_type(), 'fourth-image');?>">
                 <?php if (class_exists('MultiPostThumbnails')) : MultiPostThumbnails::the_post_thumbnail(get_post_type(), 'fourth-image'); endif; ?>
                </a>
            <td>
        </tr>
     </table>
</div> 
```

这里有相关的CSS：

```
.alignleft {
float:left;
}
.alignright {
float:right;
}
.bordered {
border:2px solid black;
}
.negative-margin {
margin-top:-25px;
margin-left:5px;
background:white;
}
.header {
font-size:200%;
}
.date {
font-size:150%;
}
.centered {
width:640px;
margin-left:auto;
margin-right:auto;
}
#entry-left {
float:left;
width:200px;
}
.entry-right {
    float:right;
width:430px;
} 
```

所有其他帖子都有边框，标题和日期在边框上，但顶部的帖子有一个越过标题的边框，如下所示：http: [//imgur.com/6pE79ro](http://imgur.com/6pE79ro)

我对 Wordpress 比较陌生，似乎无法弄清楚这里发生了什么。

另外，我正在尝试使用自定义字段在“详细信息”下显示链接。这个想法是让链接的键始终是“链接”，值的格式为“description;url”，这样我就可以将值分成两个值来进行链接描述和 URL 显示。我无法让它实际显示任何链接。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:01:02.260

也许无关紧要，但是您在哪里关闭以下 div？`<div class="bordered centered">`和`<div id="entry-left">`？

这并不完全回答您的第二个问题，但至于自定义字段：我建议使用一个很棒的 WP 模块 - ACF。它允许您轻松创建和读取自定义字段的值，并附带许多有用的功能。该插件可以在这里找到：[http ://wordpress.org/extend/plugins/advanced-custom-fields/](http://wordpress.org/extend/plugins/advanced-custom-fields/)

# facebook - Facebook 评论 - 高度被剪裁

> ID：14887240
> 
> 赞同：1
> 
> 时间：2013-02-15T01:51:54.197
> 
> 标签：facebook, facebook-apps

我在我的网站上使用较旧的 FB xfbml 评论模块（如果不是因为迁移问题，我会升级），并使用此代码嵌入它

```
window.fbAsyncInit = function() {
    FB.init({
    appId      : 'xxxxxxxxx',
    channelUrl : '//www.site_etc.com/channel.html',
    status     : true,
    cookie     : true,
    xfbml      : true
  });
  FB.Canvas.setAutoGrow();
}
(function(d){ var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0]; if (d.getElementById(id)) {return;} js = d.createElement('script'); js.id = id; js.async = true; js.src = "//connect.facebook.net/en_US/all.js"; ref.parentNode.insertBefore(js, ref); }(document)); 
```

我遇到的问题是，每当 FB 加载 Comments iframe 时，它​​的高度都会被剪裁。它始终以大约 160 像素的高度加载，无论有多少评论等，我都无法让它相应地扩展。我相当确定没有冲突的 CSS、容器等。

我不知道发生了什么，也不知道从哪里开始寻找这个。谷歌有一些有趣的点击，但最终没有解决方案 -

[http://bit.ly/11JzGh8](http://bit.ly/11JzGh8)

# c++ - 如何让 Luabind 属性工作？

> ID：14887246
> 
> 赞同：2
> 
> 时间：2013-02-15T01:53:03.020
> 
> 标签：c++, luabind

我在导入类时尝试使用 Luabind 的属性。定义都是正确的，我敢肯定，但是当我调用一个属性时，例如如果它是一个字符串或数字就打印它，我会得到这样的东西

> 功能：009EC440

现在我不知道为什么会发生这种情况，但我在互联网上环顾四周，发现有几个人有同样的问题。他们说您应该使用以下参数构建 Luabind：

> bjam 工具集=msvc-9.0 变体=调试线程=多链接=共享定义=_BIND_TO_CURRENT_VCLIBS_VERSION

现在我已经尝试过了，但我仍然得到同样的错误。另一件需要注意的是，我使用的是 MSVC 2012，所以我尝试使用 toolset=msvc-11.0 构建它，但再次无济于事。我已经读过，如果您不使用 Boost build 来构建您的项目，您需要定义 LUABIND_DYNAMIC_LINK，这在包含 Luabind 之前也已完成。这仍然导致此错误。我也尝试过自己构建 Luabind，但在链接它时遇到了麻烦，因为它会引发许多符号错误（我不确定在哪里定义 LUABIND_DYNAMIC_LINK，所以如果有人知道这可能会解决问题）。有谁知道如何解决这个问题？

* * *

下面是声明属性的代码：

```
luabind::module(luaState)[
luabind::class_<Weapon>("Weapon")
    .def(luabind::constructor<float, float>())
    .def_readwrite("onFire", &Weapon::onFireFunc)
    .def_readonly("modifier", &Weapon::modifier)
]; 
```

他们正试图像这样被访问，武器是 Weapon 类的一个实例，正如它的构造函数声明的那样：

```
print(weapon.modifier)
weapon.onFire = onFire 
```

* * *

静态链接有效，但我想使用以下参数使其与动态链接一起使用：

> bjam 工具集=msvc-9.0 变体=调试线程=多链接=静态定义=_BIND_TO_CURRENT_VCLIBS_VERSION

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T18:26:21.837

我在VS2008上遇到了同样的问题。（*这是发布后的 6 个月，但可能对其他人有所帮助*）

我通过添加 LUABIND_DYNAMIC_LINK 预处理器指令来修复它。

**项目->属性->C/C++->预处理器**

将**LUABIND_DYNAMIC_LINK**添加到预处理器定义列表中。

我使用您在帖子顶部的相同 bjam 命令构建了 luabind。

# php - Silex 重定向将端口 80 添加到位置

> ID：14887250
> 
> 赞同：0
> 
> 时间：2013-02-15T01:53:26.757
> 
> 标签：php, symfony, silex, openshift

我有一个使用带有安全防火墙的 Silex 的应用程序。[当我在https://app.com/web](https://app.com/web)加载我的应用程序并且我尚未通过身份验证时，我被重定向到[https://app.com:80/web/user/login_check](https://app.com:80/web/user/login_check)

当我尝试在非 ssl 端口上建立 ssl 连接时，这会产生 SSL 错误。

我的防火墙配置如下所示，

```
$app['security.firewalls'] = array(
'login' => array(
    'pattern' => '^/user/login$',
),
'admin' => array(
    'pattern' => '^.*$',
    'form' => array('login_path' => '/user/login', 'check_path' => '/user/login_check'),
    'logout' => array('logout_path' => '/user/logout'),
    'users' => array(
        // raw password is demo
        'test' => array('ROLE_ADMIN', 'qldD7MO0Ol7e2LijC1qdNxQJpkIdHQLPjHUM0rN/N6AjEHqGzZFsYPh94R/AeFrM8aEt9Y6L$
    ),
),
); 
```

我知道我可以在不添加端口的情况下访问[https://app.com/web/index.php](https://app.com/web/index.php)，因此它不是我的 Web 服务器，它是当我被重定向到 /user/login 页面时。

我读到 symfony 不使用 url 中的端口，而是在 _SERVER SERVER_PORT 中定义的端口，设置

```
$_SERVER['HTTPS'] = 'on';
$_SERVER['SERVER_PORT'] = 443; 
```

对我没有帮助。

重定向的初始请求在其标头中返回 this，

请求网址：[https](https://app.com/web/) ://app.com/web/ 请求方法：GET 状态码：302 找到

位置：[https ://app.com:80/web/user/login](https://app.com:80/web/user/login)

有人知道如何阻止 silex 将端口 80 重定向到该位置吗？

编辑：我应该提到这是在 Redhat 的 OpenShift 云基础架构上运行的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:15:34.160

从理论上讲，您应该能够通过在请求中设置“受信任的代理”来解决此问题，如此处所述[http://symfony.com/blog/security-release-symfony-2-0-19-and-2-1- 4](http://symfony.com/blog/security-release-symfony-2-0-19-and-2-1-4)

不过，我在使用 CloudFlare 时遇到了这个问题，它有数百个 IP，将它们全部列为“受信任”是不切实际的，所以这是我能够解决问题的最简单方法。我把它放在自动加载器之前的引导文件顶部：

```
// Fix IP for cloudflare
if (isset($_SERVER['HTTP_CF_CONNECTING_IP'])) {
    $_SERVER['HTTP_X_FORWARDED_FOR'] = $_SERVER['HTTP_CF_CONNECTING_IP'];
    $_SERVER['HTTP_CLIENT_IP'] = $_SERVER['HTTP_CF_CONNECTING_IP'];
    $_SERVER['REMOTE_ADDR'] = $_SERVER['HTTP_CF_CONNECTING_IP'];
}

// Fix SSL for cloudflare
if (isset($_SERVER['HTTP_CF_VISITOR'])) {
    if (preg_match('/https/i', $_SERVER['HTTP_CF_VISITOR'])) {
        $_SERVER['HTTPS'] = 'On';
        $_SERVER['HTTP_X_FORWARDED_PORT'] = 443;
        $_SERVER['SERVER_PORT'] = 443;
    }
} 
```

# javascript - 参数和局部变量有什么区别？

> ID：14887252
> 
> 赞同：3
> 
> 时间：2013-02-15T01:54:04.120
> 
> 标签：javascript

为一个看起来*非常*愚蠢的问题道歉。

我目前正在通过 codecadamy 工作，这让我很失望：

```
 var greeting = function(name) {
    name = "sausage";
    console.log(name); 
};

greeting(name); 
```

我明白我会得到`sausage`

为什么我不写`var name = "sausage";`？有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T02:00:21.980

`name`in`function(name)`是一个参数。也就是说，它用于将数据传递给函数。但是，参数是局部变量。不过，在函数内部分配一个值`name`有点奇怪。我会假设你想做这样的事情：

```
 var greeting = function(name) {         
     console.log(name); 
  };

  greeting("sausage"); 
```

在此版本的代码中，您通过参数将值“香肠”传递给函数`name`。这很有用，因为您可以多次调用该函数，并且每次该函数可能会根据您传递的内容打印不同的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T01:56:54.300

在您的函数定义中：

```
function(name) { 
```

名称已被声明。它是函数的参数。如果要更改名称，可以，但不需要使用 var 将其声明为新变量。

另一方面，如果你想添加风味，你应该使用 var then 因为它还没有定义。

```
var flavor = 'savory'; 
```

在这种情况下，flavor 是一个局部变量，name 是一个参数。参数是一种在函数声明中声明的局部变量，但局部变量不一定是参数，因为它可能在函数的其他地方声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T01:57:49.560

从技术上讲，没有真正的区别。

在这里不给你巨大的背景，你必须明白，在底层实现中，形成了一个特殊的对象（不是 javascript 对象，在 C/C++ 级别），称为*激活对象*（ES3）或*词法环境记录*（ES5） .

但是，这个*散列/对象*结构是用来存储

*   声明的变量`var`
*   形式参数
*   函数声明

如您所见，`var`变量和参数都存储在此结构中。

这个结构最有可能使用一些*默认值*来表示未传入的参数。在现实世界的例子中，这可能看起来更像

```
var greeting = function( name ) {
    name = name || 'default';

    console.log( name );
};

greeting('john');  // 'john'
greeting();        // 'default' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T01:58:12.240

参数是一种通用的编程结构，是在世界编程中做任何理智的事情所必需的（处理大量的全局变量是*不*理智的。

`var name`将在函数范围内声明一个新变量，该变量将覆盖参数的值`name`，因此您将无法再使用该参数。

CodeAcadmy 示例有点奇怪，因为您很少需要覆盖参数的值——尤其是在您使用它之前。

# javascript - 逐渐改变动画的值

> ID：14887254
> 
> 赞同：0
> 
> 时间：2013-02-15T01:54:29.920
> 
> 标签：javascript, math, animation

假设我有一个变量`dimension`，我想将它从 value 更改`a`为 value `b`。 `a`和`b`是整数，第一个比第二个大。

要线性地做到这一点，我应该这样做：

```
while (dimension < a)
dimension = dimension + 1 
```

但是，如果我希望它成倍增长呢？我完全不擅长数学，我无法弄清楚这一点。我在尝试：

```
while (dimension < a)
dimension = dimension * dimension 
```

关键是价值几乎立即失控，它变得巨大（远大于`a`）

即使我尝试使用巨大的比例（通过设置`a`一个巨大的值）我也无法完成这个......但似乎[这些人](http://javascript.info/tutorial/animation)做到了，我认为这也应该很容易！

他们还设法对各种疯狂的方程式做同样的事情，只要我能够实现一个，所有这些对我来说都很容易！

我只想要一个值从 1 增加到 2 但逐渐......

希望有人能帮忙，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T01:59:19.713

一种非常简单的方法是让第二个计数器在每次迭代中增加一个较小的量，然后将它乘以原始计数器来设置它。例如，在您的情况下：

```
step = 1.2;

while(dimension < a) {
    dimension = Math.max(dimension * step, a);
    step += 0.1;
} 
```

可能需要调整这些值才能达到确切的预期效果，但这就是它的总体思路。对 Math.max 的调用将确保该值永远不会超过您的目标。

# scala - 惯用的 Scala - 对元组值执行函数

> ID：14887255
> 
> 赞同：0
> 
> 时间：2013-02-15T01:54:30.813
> 
> 标签：scala, collections, map, tuples

伙计们，我已经定义了以下地图和结构类型：

```
type Mergeable = { def mergeFrom(data: Array[Byte]): com.google.protobuf.GeneratedMessageLite }
  val dispatchMap = Map(
    1 -> (ZombieSighting.defaultInstance.asInstanceOf[Mergeable], "akka://UlyssesAgenda/user/ServerCore/DispatchTarget")
  ) 
```

基本上我正在做的是定义一个映射，上面写着“当我从网络中读取 protobuf 消息类型 1 时，从字节创建一个 ZombieSighting，并将其发送给在指定字符串中找到的演员”。

所以，这就是我今天的代码，它创建一个消息，一个演员，并将消息发送给演员：

```
val dispatchInfo = dispatchMap.get(messageType)
val theMessage = dispatchInfo.map { _._1.mergeFrom(theBytes) }.get
val actorPath = dispatchInfo.map { _._2 } 
val targetActor = actorPath.map { SocketServer.system.actorFor(_) }
targetActor.map { _ ! theMessage } 
```

当我看到这个时，我能想到的就是这看起来有多少行非函数式编程，我不禁想到有一种更优雅的方法可以做到这一点。我知道我可以编写将元组作为参数并返回修改后的元组的函数，但我认为这对我来说并没有什么干净的惯用 scala。

我的直觉告诉我，我可以在“dispatchMap.get(messageType)”上运行一个 map 语句，它会给我一个基于 tuple._2 的 Akka actor 实例和一个基于 tuple._1 的合并 protobuf 对象。

有人可以建议一种方法来拉皮条此代码并减少行数并使其更具功能性吗？例如

```
val (targetActor, theMessage) = ????
targetActor ! theMessage 
```

编辑：这是我第一次尝试重构。这是“Scala 方式”吗？

```
val (msg, actor) = dispatchMap.get(messageType).map {
    case (m:Mergeable, path:String) => 
        (m.mergeFrom(theBytes), SocketServer.system.actorFor(path) )
}.get
actor ! msg 
```

编辑2：这是下面评论者建议的版本，但我不知道这是否真的是惯用的：

```
 def dispatchMessage: IO.Iteratee[Unit] =
    repeat {
    for {
        (messageType, byteString) <- readMessage
    } yield {
        for (
            (protoMessage, actorPath) <- dispatchMap.get(messageType);
            theMessage = protoMessage.mergeFrom(byteString.toArray);
            targetActor = SocketServer.system.actorFor(actorPath) )
        yield 
            targetActor ! theMessage
    }
} 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:24:46.787

你的代码可能是这样写的：

```
val akkaResponseFuture =
  for ((bytes, actorPath) <- dispatchMap.get(messageType);
       theMessage         <- bytes.mergeFrom(theBytes);
       targetActor        =  SocketServer.system.actorFor(actorPath))
  yield
    targetActor ! theMessage 
```

这很可能是不对的。我没有尝试创建工作代码就做到了，因为您的示例不是独立的。此外，`theBytes`无处定义。

但我很确定您可以使用 for comprehension 来澄清和简化它。

# actionscript-3 - Adobe AIR 的 parse.com 等价物？

> ID：14887256
> 
> 赞同：0
> 
> 时间：2013-02-15T01:54:36.113
> 
> 标签：actionscript-3, air, webserver, parse-platform

我目前正在开发 Obj-c/iOS 中的游戏项目。我是一名 AS3/Flash 开发人员，所以我想知道我是否可以在 Adob​​e AIR 中做游戏。问题是将游戏/玩家详细信息保存到服务器，将它们取回等。Parse.com 在这方面做得很好，但我想知道是否有与 Adob​​e AIR 一起使用的等价物？我知道有一个用于使用解析的 AS3 REST API，但这似乎不像解析 iOS SDK 那样直接使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:15:46.007

我们使用 playerio 来保存我们的游戏数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T20:51:36.213

您可能会对[http://parse-ane.launchrock.co/](http://parse-ane.launchrock.co/)用于解析的 Adob​​e air 原生扩展感兴趣

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T04:05:05.403

有人创建了一个新的 AS3 解析 API，[https://github.com/camdagr8/AS3-Parse-Class/blob/master/com/illumifi/Parse.as](https://github.com/camdagr8/AS3-Parse-Class/blob/master/com/illumifi/Parse.as)（我忘了​​我从哪里得到这个链接，所以我链接你到 github)，要使用它，你必须更改第 17 和 18 行，并将这行代码添加到导入部分以使代码工作

```
import flash.net.URLVariables; 
```

作者忘记导入了

对于注册，如果你想使用

`Parse.SignUp(username,password,....)`

将第 108 - 110 行更改为

```
public static function SignUp(username:String, password:String, success:Function = null, error:Function = null):void {
    var params:Object = {username: username, password: password};
    Parse.User.Post(params, success, error);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-15T10:10:40.660

区刚刚发布了适用于 android 和 iOS 的 parse ane

[http://airnativeextensions.com/extension/com.distriqt.Parse](http://airnativeextensions.com/extension/com.distriqt.Parse)

ps 我不隶属于他们

# sql - VB.NET -> SQL 导出字符串“901-0656”不是 245（901 减去 656）

> ID：14887259
> 
> 赞同：2
> 
> 时间：2013-02-15T01:54:47.987
> 
> 标签：sql, vb.net, ms-access-2007

我正在尝试通过 VB.NET 将新记录添加到 Access 数据库中。“数量”表包含三列：

> PartNumber（字符串）、PadsPerStrip（整数）和 Verified（布尔）

我们用于 PartNumber 的格式是###-####-###（即 901-0656-000）。当我运行我的代码时，所有内容都已正确添加，但对零件号执行数学运算，因此 - 被视为减号，即使它是一个字符串。这是我的sql命令：

```
cmdInsert.CommandText = "INSERT INTO Quantities (PartNumber, PadsPerStrip, Verified) VALUES ( " & partNum & ", " & updatingPPS.ToString() & ", No);" 
```

在 MsgBox 中查看命令时，它显示为：

```
INSERT INTO Quantities (PartNumber, PadsPerStrip, Verified) VALUES (901-0656-000, 3, No); 
```

导出零件号时有没有办法让它跳过数学运算符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:05:30.643

确保用引号将零件号括起来。否则，在数据库中运行时，该值不会被视为字符串。

# c# - 我可以像 Windows Forms App 中的 AppServ 一样制作服务器数据库吗？

> ID：14887260
> 
> 赞同：1
> 
> 时间：2013-02-15T01:54:49.160
> 
> 标签：c#, database, webserver, appserver

我正在尝试在我的应用程序中创建一个服务器数据库，以便客户端可以访问服务器中的文件。

为了更清楚我的意思，我只是想尝试在 Visual Studio 2008 中制作类似于 AppServ 的应用程序。我该怎么做？

# c++ - MetaTrader4 在 WinXP 模式虚拟 PC 上的 deinit() + dll 线程上关闭（崩溃？）

> ID：14887263
> 
> 赞同：0
> 
> 时间：2013-02-15T01:55:04.750
> 
> 标签：c++, multithreading, dll, mutex, metatrader4

我有一个使用 Visual Studio 2012 构建的本机库。所需的项目配置属性：

*   常规/平台工具集 = Visual Studio 2012 - Windows XP (v110_xp)
*   C/C++ / 代码生成 / 运行时库 = 多线程 (/MT)

ExpertSample.cpp：

```
#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include <mutex>

BOOL APIENTRY DllMain(HANDLE hModule,DWORD ul_reason_for_call,LPVOID lpReserved) {
    return(TRUE);
}

#define MT4_EXPFUNC __declspec(dllexport)
static std::mutex mutex;

MT4_EXPFUNC void __stdcall libInit() {
    std::lock_guard<std::mutex> guard(mutex);
    OutputDebugStringA("libInit");
}
MT4_EXPFUNC void __stdcall libDeInit() {
    std::lock_guard<std::mutex> guard(mutex);
    OutputDebugStringA("libDeInit");
} 
```

ExpertSampleTest.mq4：

```
#import "ExpertSample.dll"
void libInit();
void libDeInit();
#import

int init() {
    libInit();
    return(0);
}
int deinit() {
    libDeInit();
    return(0);
}
int start() {
//    libDeInit();
    return(0);
} 
```

在 Windows 7 (x64) 上使用 MetaTrader build 451（也适用于 build 438）对其进行测试正常工作。

在**WinXP Mode Virtual PC**（在相同的 Windows 7 中运行）中对其进行测试，当 EA 从图表中移除时，整个终端将关闭。日志文件中没有崩溃报告对话框或任何内容。

*   如果我从 start() 调用 libDeInit() 它工作正常。
*   如果我从 libDeInit()中移除**锁保护，它工作正常。**

上面的代码只是一个更大项目的一个子集。在那个项目中，当使用各种调试信息和大量输出构建库时，问题似乎不太经常发生。

有谁知道如何修复它，或者它是 MetaTrader 4 还是 WinXP 模式虚拟 PC 问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:39:48.780

C++ 代码本身看起来不错。我看到的可能问题：

*   如果加载了 DLL 但未调用互斥锁的构造函数，则可以解释您的问题。这将是加载 DLL 的环境中的问题。
*   检查调用约定。是stdcall还是cdecl？使用错误的可能会导致各种问题，在某些情况下甚至可能没有问题。
*   尝试将互斥锁替换为返回对互斥锁的引用的函数，该互斥锁作为函数静态实例放置在该函数内。如果这有帮助，我会说它证明构造函数没有被调用。
*   你不需要 DllMain()，我只会用它来调用 DisableThreadLibraryCalls()。

# php - 如何处理数百万数据选择

> ID：14887265
> 
> 赞同：0
> 
> 时间：2013-02-15T01:55:10.260
> 
> 标签：php, mysql, database-performance

我有一个存储所有客户的特定更新的表。

一些样本表：

`record_id | customer_id | unit_id | time_stamp | data1 | data2 | data3 | data4 | more`

当我创建应用程序时，我没有意识到这张表会增长多少——目前我在 1 个月内拥有超过 1000 万条记录。当 php 由于花费的时间而停止执行时，我遇到了问题。一些查询会产生前 1个结果，基于`time_stamp`++`customer_id``unit_id`

您建议如何处理此类问题？例如，我可以为每个客户创建新表，尽管我认为这不是一个好的解决方案。

我一直没有好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:03:09.690

我建议您按照某些标准对数据进行分区。

您可以对数据进行水平或垂直分区。

例如，使用他的 id 模块 10 将您的 customer_id 分组为 10 个分区。

因此，以 0 结尾的 customer_id 进入分区 0，以 1 结束的进入分区 1

[MySQL 可以](http://dev.mysql.com/doc/refman/5.5/en/partitioning.html)轻松地为您做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T02:24:55.660

如果您在云上（在服务器和数据库之间移动数据需要付费），请忽略。

**将所有逻辑移至服务器**

最快的查询是`SELECT` `WHERE`ing `PRIMARY`。无论您的数据库有多大，它都会以 1 行表的速度返回（只要您的硬件不失衡）。

我不能确切地告诉你你的查询在做什么，但首先将所有排序和限制数据下载到 PHP 中。一旦你得到了你需要`SELECT`的东西，数据就会直接`WHERE`进入`record_id`（我假设那是你的`PRIMARY`）。

看起来您的按需数据计算量非常大且非常庞大，因此我建议使用更快的语言。 [http://blog.famzah.net/2010/07/01/cpp-vs-python-vs-perl-vs-php-performance-benchmark/](http://blog.famzah.net/2010/07/01/cpp-vs-python-vs-perl-vs-php-performance-benchmark/)

此外，当您开始在服务器而不是数据库上进行排序和限制时，您可以开始识别快捷方式以进一步加快速度。

这就是服务器的用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T02:02:52.490

表中的记录数是多少？通常，对于关系数据库，重要的不是您拥有多少数据（数百万对关系数据库来说不算什么），而是您检索数据的方式。

从你的select来看，其实你可能只需要优化语句本身，避免多次子select，这可能是导致速度变慢的主要原因。尝试对该语句运行解释，或者仅获取 id 并在第一次运行中实际找到并检索的记录的 id 上单独运行内部选择。

仅在您的整体语句中有这些子选择这一事实意味着您还没有在流程中优化到那么远。`SELECT gps_unit.idgps_unit`例如，您可能正在运行一个每晚或每小时一次**的**cron 作业，该作业将集合像由表上的飞行。

如果您发现自己无法有效地优化该 select 语句，您可以选择“最终”选项，例如：

*   通过一些标准进行分类并分成不同的表格。
*   保留一个深度存档，以便第一年左右的任何内容都迁移到使用较少的表中，并且需要特殊检索。
*   最后，如果您有如此多的小数据，您可能能够完全归档某些表并仅以文件形式保存它们，然后在某个日期之后截断。通常使用不那么重要且有点垃圾邮件的网络跟踪数据，几年后我最终会这样做，那时数据真的不会再对任何人有任何好处了。

# macos - 更改 OS X 目录中所有文件的文件扩展名

> ID：14887275
> 
> 赞同：74
> 
> 时间：2013-02-15T01:55:56.600
> 
> 标签：macos, terminal, file-extension

我有一个目录，其中包含一个扩展名（在本例中为 .txt）的文件，我想自动将其转换为另一个扩展名（.md）。

是否有一个简单的终端单行程序可以用来将此目录中的所有文件转换为不同的文件扩展名？

还是我需要用正则表达式编写脚本？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2013-02-15T02:11:44.183

你可以使用这样的东西：

```
for old in *.txt; do mv $old `basename $old .txt`.md; done 
```

先复制一份吧！

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2015-02-13T07:24:40.963

或者，您可以安装`ren`（重命名）实用程序

```
brew install ren

ren '*.txt' '#1.md' 
```

如果要重命名文件名中带有前缀或后缀的文件

```
ren 'prefix_*.txt' 'prefix_#1.md' 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2015-01-29T02:49:16.137

不需要终端...只需突出显示要重命名的所有文件。右键单击并选择“重命名##项目”，然后在“查找：”框中键入“.txt”，在“替换为：”框中键入“.md”。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-04-18T22:31:28.667

执行此操作的首选 Unix 方式（是的，OS X 基于 Unix）是：

`ls | sed 's/^\(.*\)\.txt$/mv "\1.txt" "\1.md"/' | sh`

为什么通过设计循环使用`for`if`ls`循环遍历整个文件名列表？你有管道，使用它们。您不仅可以使用命令创建/修改输出，还可以使用命令（对，即由命令创建的命令，这是 Unix 的发明者之一 Brian Kernighan 在 Unix 上最喜欢的），所以让我们来看看和`ls`通过`sed`移除管道产生`sh`：

```
$ ls | sed 's/^\(.*\)\.txt$/mv "\1.txt" "\1.md"/'
mv "firstfile.txt" "firstfile.md"
mv "second file.txt" "second file.md"
$ 
```

如您所见，它不仅是一个单行脚本，而且是一个完整的脚本，它还通过创建另一个脚本作为输出来工作。因此，让我们将单行脚本生成的脚本提供给OS X*的*脚本解释器。当然，它甚至适用于其中包含空格的文件名`sh`。

 *顺便说一句：每次您在*终端*中键入内容时，您都会创建一个脚本，即使它只是一个带有诸如`ls`或之类的单词的单个命令`date`。在 Unix shell 中运行的所有内容始终是一个脚本/程序，它只是一些基于 ASCII 的流（在这种情况下，指令流与数据流相对）。

要查看由 执行的实际命令`sh`，只需在 之后添加一个`-x`选项`sh`，它会在 shell 中打开调试输出，因此您将看到每个`mv`命令都使用`sed`编辑器脚本传递的实际参数执行（是的，脚本中的另一个脚本： -))。

但是，如果您喜欢复杂性，您甚至可以使用`awk`，如果您喜欢安装其他程序来完成基本工作，那么`ren`. 我认识甚至愿意`perl`为这个简单的日常任务编写一个 50 行左右的脚本的人。

也许在finder中重命名文件更容易，但如果远程连接到Mac（例如通过`ssh`），则根本无法使用finder。这就是为什么 cmd 行仍然非常有用的原因。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-08-14T23:49:32.440

根据上面选择的最准确的答案，这里有一个 bash 可重用函数：

```
function change_all_extensions() {
    for old in *."$1"; do mv $old `basename $old ."$1"`."$2"; done
} 
```

用法：

```
$ change_all_extensions txt md 
```

（我无法弄清楚如何在对该答案的评论中获得干净的代码格式。）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-08-29T04:01:11.453

无需为它编写脚本只需点击此命令

```
find ./ -name "*.txt" | xargs -I '{}' basename '{}' | sed 's/\.txt//' | xargs -I '{}' mv '{}.txt'  '{}.md' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-14T14:17:05.900

我有一个类似的问题，文件`.gifx.gif`在最后命名，这在 OS X 中可以删除最后一个`.gif`：

```
for old in *.gifx.gif; do
    mv $(echo "$old") $(echo "$old" | sed 's/x.gif//');
done 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-21T08:57:37.877

```
 cd $YOUR_DIR
    ls *.txt > abc
    mkdir target // say i want to move it to another directory target in this case
    while read line
    do 
    file=$(echo $line |awk -F. '{ print $1 }')
    cp $line target/$file.md  // depends if u want  to move(mv) or copy(cp)
    done < abc 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-15T23:30:52.673

list= `ls` for file in $list do newf= `echo $file|cut -f1 -d'.'` echo "The newf is $newf" mv $file $newf.jpg done

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-05T05:49:57.900

你不需要这个终端；这是**MacOS Big Sur**中的示例演示。

*   选择所有文件，右键单击并选择`"rename..."` [![在此处输入图像描述](../Images/a613a9ef4315fa6aac16321c77135b55.png)](https://i.stack.imgur.com/HKuil.png)

*   添加现有文件扩展名`"Find"`和要替换为`"Replace with"`. [![在此处输入图像描述](../Images/df45778f42e6604961be3bbbd1cb49b2.png)](https://i.stack.imgur.com/d2hV0.png)

并做了！*

# java - 如果类路径中存在超过 1 个，如何加载特定的 log4j.properties 文件

> ID：14887276
> 
> 赞同：0
> 
> 时间：2013-02-15T01:56:01.100
> 
> 标签：java, log4j

下面是我的场景..

我正在开发一个新的 webapp，它将部署在 weblogic 服务器上。但是已经有一个现有的 webapp 在同一个 weblogic 服务器上运行。特定于这个现有应用程序，在外部位置有一个 log4j.properties 文件。

此位置将添加到 weblogicStart.sh 文件中的类路径中。我的要求是添加一个新的 log4j.properties 文件，我的新应用程序应该比旧应用程序检测到它。那么，是否有一些配置可以让我的应用程序获取新的 log4j 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:33:32.377

将 log4j.jar 添加到您的 webapp WEB-INF/lib 并将 log4j.properties 添加到 WEB-INF/。确保为 `prefer-web-inf-classes`模式配置了 Weblogic Server，请参阅[http://docs.oracle.com/cd/E15051_01/wls/docs103/programming/classloading.html](http://docs.oracle.com/cd/E15051_01/wls/docs103/programming/classloading.html)。这可确保您的 webabb 加载并初始化其自己的 log4j 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T02:02:16.373

和`PropertyConfigurator.configure().`

请参见[PropertyConfigurator](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PropertyConfigurator.html)

# objective-c - 在 Objective-C 中打印 NSString 数组

> ID：14887279
> 
> 赞同：0
> 
> 时间：2013-02-15T01:56:25.533
> 
> 标签：objective-c, arrays

所以我有一个大小为 100 的 NSMutableArray，我想一次打印 10 个单元格（所以它看起来像一个网格）。一次打印 10 个索引的最简单方法是什么？谢谢。

这就是我所做的，它一次只打印 1 个索引。

-（无效）打印板{

```
for(int i =0; i<_board.count; i++){
    NSLog(@"%@ |", [_board objectAtIndex:i]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T02:20:10.163

如果要将连续数组打印为二维数组，可以使用如下内容：

```
- (NSString *) description 
{
    NSMutableString *result = [NSMutableString string];

    for (int y = 0; y < 100; y += 10)
    {
        NSArray *row = [_board subarrayWithRange:NSMakeRange(y, 10)];
        NSString *rowString = [row componentsJoinedByString:@" | "];
        [result appendFormat:@"%@\n", rowString];
    }

    return result;
} 
```

如果你把这个实例方法放在你的类中，那么你可以`NSLog()`直接在你的实例上使用（而不是`[object printBoard]` 你会使用`NSLog(@"%@", object);`）。

# c# - SharePoint 2010“W3WP.EXE 中发生未处理的 win32 异常”

> ID：14887285
> 
> 赞同：2
> 
> 时间：2013-02-15T01:57:19.450
> 
> 标签：c#, debugging, sharepoint-2010

我收到一个需要帮助调试的 win32 异常。我有一个包含自定义 Web 部件的 SharePoint 页面，当我浏览到该页面时，我收到以下消息：

```
In w3wp.dmp the assembly instruction at ntdll!RtlReportCriticalFailure+62 in 
C:\Windows\System32\ntdll.dll from Microsoft Corporation has caused an unknown
exception (0xc0000374) on thread 43

Unhandled exception at 0xHEX in w3wp.exe: 0xc0000374: 
A heap has been corrupted 
```

我真的不知道从哪里开始调试这个问题并且搜索互联网产生的结果很少。

我已保存 DMP 文件并将其加载到调试诊断工具中进行分析。我不知道哪些部分最重要，所以如果有人可以告诉我应该发布哪些部分，我会发布它们。

## 我认为问题出在哪里：

我已经缩小了问题*可能*出现的位置。如果我不调用这些方法，我不会得到错误。我访问 TermStore 的方式有问题吗？

```
 private void GetTerms()
    {
        using (SPSite site = new SPSite(PhaseListUrl.Value))
        {
            var session = new TaxonomySession(site);
            if (session.TermStores == null || session.TermStores.Count == 0) return;

            OfficeDropdown.Items.Clear();
            OfficeDropdown.Items.Add("");

            var termStore = session
                .TermStores
                .FirstOrDefault(ts => ts.Groups.Any(g => g.Name == TaxonomyName.Value));
            try
            {
                var group = termStore.Groups[TaxonomyName.Value];
                foreach (var ts in group.TermSets)
                {
                    if (!ts.IsAvailableForTagging) continue;

                    AddTerms(site, termStore, ts.Id, ts.Terms);
                }
            }
            catch (NullReferenceException) { OfficeDropdown.Items.Add("ERROR: Check your Org Term Store Name"); }
            catch (ArgumentOutOfRangeException) { OfficeDropdown.Items.Add("ERROR: Check your Org Term Store Name"); }
        }
    }

    private void AddTerms(SPSite site, TermStore termStore, Guid tsId, TermCollection coll)
    {
        foreach (var t in coll)
        {
            if (t.IsAvailableForTagging)
            {
                var wssIds = TaxonomyField.GetWssIdsOfTerm(site, termStore.Id, tsId, t.Id, true, 1000);

                if (wssIds.Length != 0)
                {
                    var id = wssIds[0];
                    var validatedString = string.Format("{0};#{1}{2}{3}", id, t.Name, TaxonomyField.TaxonomyGuidLabelDelimiter, t.Id);
                    OfficeDropdown.Items.Add(new ListItem(t.Name, validatedString));
                }
                else
                {
                    int id = -1;
                    var value = new TaxonomyFieldValue(SPContext.Current.Web.AvailableFields[new Guid("{a64c1f69-c0d6-421a-8c8a-9ef8f459d7a2}")]);
                    value.TermGuid = t.Id.ToString();

                    var dummy = value.ValidatedString;
                    if (dummy != null)
                        id = value.WssId;

                    var validatedString = string.Format("{0};#{1}{2}{3}", id, t.Name, TaxonomyField.TaxonomyGuidLabelDelimiter, t.Id);
                    OfficeDropdown.Items.Add(new ListItem(t.Name, validatedString));
                }
            }
            AddTerms(site, termStore, tsId, t.Terms);
        }
    } 
```

## 更新：

该错误在`TaxonomyField`. 我正在访问术语跨站点集合，但尚未生成 ID。还要注意`TermStore`不是同一个跨站点集合的 ID（并知道您从哪里呼叫以及呼叫到哪里！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T02:12:22.583

这里有一些建议。

1.  拉起`ULS`日志查看器并研究日志，如果您点击该页面并收到该错误，则应该将其记录在那里。

2.  检查 Web 前端服务器上的应用程序事件日志。

3.  您是否也尝试过附加到`W3P.exe`流程并调试解决方案？（假设它当然不是生产环境）。

# c++ - 独立的多线程进程同时阻塞

> ID：14887290
> 
> 赞同：8
> 
> 时间：2013-02-15T01:57:40.650
> 
> 标签：c++, linux-kernel, mutex, blocking, scheduler

系统是Linux（Gentoo x64），代码是C++。我有一个守护程序应用程序，其中的几个实例在同一台机器上运行。该应用程序本身是多线程的。一段时间以来，我一直在观察它的性能出现奇怪的延迟。

在放置了一些调试代码之后，我想出了一个奇怪的事情，即多个守护进程实例同时阻塞，据称这是由某种外部原因或其他原因引起的。简单地说，我有一个这样的序列：

1.  记录时间（**t1**）
2.  锁定互斥锁
3.  调用 C++ `std::list::push_back()`/ `pop_back()` （即非常简单的数学）
4.  解锁互斥锁
5.  记录时间（**t2**）

有时，我清楚地看到上面的序列在步骤 2（或可能在步骤 4）在几个独立的（！）进程块中运行，在步骤 3 的数学运算中花费了一些非常多的时间（例如，0.5 - 1.0 秒）。作为证明，我看到所有进程的日志中的**t2**实际上是相同的（在几微秒内不同）。看起来进程的某些线程在相对不同的时间进入该部分（我可以清楚地看到**t1**的 0.5 - 1 秒差异），锁定互斥锁，并在同一时间解锁，据称在锁定中花费了不合理的时间根据日志（**t2** - **t1**差异）。让我觉得毛骨悚然。

该问题的表现比较少见，中等负载下大约5-10分钟一次。测试中没有记录 NTP 时间变化（这实际上是我的第一个想法）。如果是 NTP，则不会有实际的服务延迟，只会在日志中出现错误的时间。

我从哪说起呢？我是否开始调整调度程序？理论上什么可以阻塞Linux中的整个多线程进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:35:58.957

运行你的程序：

```
valgrind --tool=helgrind ./your_program 
```

您会发现更多您期望的问题。

Valgrind (Helgrind) 将为您提供线程应用程序的详细场景，如今这是部署之前的必备条件。

# python - Python：set.add() 函数不添加重复项吗？

> ID：14887302
> 
> 赞同：11
> 
> 时间：2013-02-15T01:58:45.587
> 
> 标签：python, set

我有多个元组存储在一个集合中，我试图通过嵌套的 for 循环将两个重复的元组添加到集合中，该循环基本上迭代另一组元组并检查元组中的条件，然后将元组添加到如果元组满足条件，则设置。但是，有些元组是重复的，我注意到没有添加重复项。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-15T02:00:22.010

集合不能包含重复项[。](http://docs.python.org/2/library/stdtypes.html#set)这就是集合的重点。如果您想要重复，请考虑使用列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T02:01:33.410

根据定义设置是唯一元素的无序集合，因此它们不允许重复。请检查 python 的[文档](http://docs.python.org/2/tutorial/datastructures.html#sets)。

# html - Flowplayer 5.3.2 iframe 中缺少全屏按钮

> ID：14887305
> 
> 赞同：1
> 
> 时间：2013-02-15T01:59:17.193
> 
> 标签：html, iframe, fullscreen, flowplayer

我有想要使用 Flowplayer 流式传输的 .mp4 视频。它工作得很好，但是当我把它放在 iframe 中时，全屏按钮不见了。

有人在这里回答了这个问题：[如何在 iframe 中的 Flowplayer 5.2 中启用全屏？](https://stackoverflow.com/questions/13799804/how-can-i-enable-fullscreen-in-flowplayer-5-2-thats-in-an-iframe)

但我不知道该放在哪里`flowplayer.conf.fullscreen = true;`

到目前为止，这是我的 index.html 代码：

```
<head>
</style>

   <!-- player skin -->
   <link rel="stylesheet" type="text/css" href="skin/minimalist.css" />

   <!-- site specific styling -->
   <style>
     body { text-align: center; padding-top: 5%; }
     .flowplayer { width: 80%; background-color: green;}
   </style>

   <!-- flowplayer depends on jQuery 1.7.1+ (for now) -->
   <!-- leave out http/https from the src to fix issue with controls not loading in Chrome -->
   <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

   <!-- include flowplayer -->
   <script type="text/javascript" src="flowplayer.min.js"></script>

</head>
<body>

   <!-- the player -->
   <div class="flowplayer" data-swf="flowplayer.swf" >
      <video>
        <source type="video/mp4" src="myvid.mp4"/>
      </video>
   </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T14:20:33.707

这些应该在 Flowplayer 包含在您的页面中之后立即设置（使用脚本 src）。

```
<script type="text/javascript" src="flowplayer/5.3.2/flowplayer.min.js"></script>

<script type="text/javascript">
flowplayer.conf.embed = false;
flowplayer.conf.fullscreen = true;
</script> 
```

此链接[http://flowplayer.org/docs/#global-configuration](http://flowplayer.org/docs/#global-configuration)对此进行了更多解释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:53:12.623

尝试手动初始化 flowplayer`$(".player").flowplayer({ swf: "/path/to/flowplayer.swf" });`

# python - 如何让 Windows 资源管理器在 Python 中将文件的路径作为字符串返回？

> ID：14887311
> 
> 赞同：1
> 
> 时间：2013-02-15T02:00:05.360
> 
> 标签：python, windows, tkinter, subprocess, windows-explorer

**背景**

我正在开发一个基本的文本编辑器，需要使用 Windows 资源管理器来获取文件的路径。这是我目前的代码，但它只是打开文件 - 我需要它以字符串形式返回路径：

```
import subprocess
subprocess.Popen(r'explorer /select, "C:\"') 
```

**问题）**

1.  我如何让它以字符串形式返回路径？
2.  我将如何使用路径来访问特定文件？例如，如果我想打开 file `myFile`，但它与我的程序不在同一个文件夹中，我将如何让它在不同的文件夹中访问该文件？对歧义感到抱歉！

**技术规格**

操作系统：Windows 7
语言：Python 2.7.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:24:42.780

我不建议为此使用 Windows Explorer，您可能想查看 Tkinter。[这与其他问题](https://stackoverflow.com/questions/3579568/choosing-a-file-in-python-simple-gui)非常接近。

使用第三方库的主要原因是python运行在多个平台上。在 OSX 和 Windows 7 和 Ubuntu 上选择文件当然是完全不同的。这是它不属于 python 运行时的主要原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-06T08:09:31.707

关于问题 2，要打开位于进程工作目录中的文件，您可以使用：

```
file = open('filename.txt', 'r') 
```

要打开位于不同目录中的文件，您可以使用：

```
directory = 'C:\Users\MyName\Documents\example.txt'
file = open(directory, 'r') 
```

这也可以，在指定的目录中打开文件。如果目录中没有这样的文件，您将收到以下错误：

```
 File "filename.py", line #, in <module>
   file = open('filename.txt', 'r')
 IOError: [Errno 2] No such file or directory: 'filename.txt' 
```

# coffeescript - 在 CoffeeScript 中使用范围的 for 循环

> ID：14887315
> 
> 赞同：7
> 
> 时间：2013-02-15T02:00:54.650
> 
> 标签：coffeescript

菜鸟问题。我正在尝试编写一个带有范围的 for 循环。例如，这是我想用 JavaScript 生成的：

```
var i, a, j, b, len = arr.length;
for (i = 0; i < len - 1; i++) {
    a = arr[i];
    for (j = i + 1; i < len; j++) {
        b = arr[j];
        doSomething(a, b);
    }
} 
```

到目前为止我最接近的是以下，但是

1.  它会生成不必要且昂贵的切片调用
2.  访问内部循环内的数组长度

咖啡脚本：

```
for a, i in a[0...a.length-1]
    for b, j in a[i+1...a.length]
        doSomething a, b 
```

生成的代码：

```
var a, b, i, j, _i, _j, _len, _len1, _ref, _ref1;

_ref = a.slice(0, a.length - 1);
for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
  a = _ref[i];
  _ref1 = a.slice(i + 1, a.length);
  for (j = _j = 0, _len1 = _ref1.length; _j < _len1; j = ++_j) {
    b = _ref1[j];
    doSomething(a, b);
  }
} 
```

（如何）这可以用 CoffeeScript 来表达吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T02:43:18.610

基本上，将您的第一个 JS 代码转录为 CS：

```
len = arr.length
for i in [0...len - 1] by 1
  a = arr[i]
  for j in [i + 1...len] by 1
    b = arr[j]
    doSomething a, b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-29T23:03:23.670

似乎避免额外变量的唯一方法是使用`while`循环[http://js2.coffee](http://js2.coffee)

```
i = 0
len = arr.length 

while i < len - 1
  a = arr[i]
  j = i + 1
  while j < len
    b = arr[j]
    doSomething a, b
    j++
  i++ 
```

或者可读性差一点：

```
i = 0; len = arr.length - 1
while i < len
  a = arr[i++]; j = i
  while j <= len
    doSomething a, arr[j++] 
```

# hadoop - 链接 Hadoop MapReduce 1.1.1 示例

> ID：14887317
> 
> 赞同：3
> 
> 时间：2013-02-15T02:01:07.797
> 
> 标签：hadoop, mapreduce

我是 Hadoop 初学者，但在 Hadoop 1.1.1 中，我正在尝试执行 map -> reduce -> map -> reduce。我很难找到如何在 Java 中执行此操作的具体示例。我真的很好奇整个驱动方法会是什么样子。我目前正在使用这些`org.apache.hadoop.mapreduce`库（我相信这是最新的代码库）。

另外，如果不需要的话，我不想安装像 Oozie 这样的另一个库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T01:20:31.897

我认为这可能会对您有所帮助：http: [//blogs.msdn.com/b/avkashchauhan/archive/2012/03/29/how-to-chain-multiple-mapreduce-jobs-in-hadoop.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2012/03/29/how-to-chain-multiple-mapreduce-jobs-in-hadoop.aspx)

您还可以根据您要实现的目标查看 ChainMapper（[http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/lib/ChainMapper.html ）。](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/lib/ChainMapper.html)不过，这只适用于一个减少。如果你想专门去 map -> reduce -> map -> reduce，我会选择我的第一个链接。

# jquery - 使用 css3 或 jquery 的背景图像动画？

> ID：14887331
> 
> 赞同：3
> 
> 时间：2013-02-15T02:02:56.340
> 
> 标签：jquery, css, plugins, background-image, css-animations

任何人都可以帮助我了解如何为这个网站上的背景图像设置动画

[http://breakpoint-sass.com/](http://breakpoint-sass.com/)

在学分部分，背景图像似乎在移动，我不知道它是使用 css3 还是 jquery。

有没有关于如何做到这一点或通过使用插件的教程。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:26:06.633

只是一个简单的 BG 精灵图像动画演示

[http://jsbin.com/ohulok/1/edit](http://jsbin.com/ohulok/1/edit)

```
var c = 0 ;
function loop(){
  c = ++c%5;
  $('#bird').css({backgroundPosition: (240*c)+'px 0px'});
}
setInterval(loop, 42); 
```

信息：如果你想要一个 24fps 的速率，那就是 ~42 (41.666ms)

**[http://jsbin.com/ohulok/7/edit](http://jsbin.com/ohulok/7/edit)**

# java - 使用队列的广度搜索第一个迷宫求解器

> ID：14887332
> 
> 赞同：0
> 
> 时间：2013-02-15T02:03:00.010
> 
> 标签：java, queue

我必须编写一个程序，该程序遵循使用队列的广度优先搜索来解决迷宫。我想我差不多完成了，但是当我运行它时，它说它不包含主要类型。也有人可以向我解释第 47 行和第 48 行的代码有什么问题（i = current.i 和 j=current.j）应该没问题，但我收到一条错误消息，说它“无法解决或者是不在现场，我虽然在 while 循环上方声明就可以了。这也不是关键，但我的老师要求我们使用 repaint() 方法，以便我们可以看到迷宫自行解决。我不太确定如何使用这种方法，但我也包含了该代码。任何帮助使该程序运行将不胜感激。

```
import java.awt.Point;
import java.util.Queue;
import java.util.concurrent.ConcurrentLinkedQueue;

public class MazeSolver {
public static final int WALL = 1, OPEN = 0, GOAL = 2, START = 3;
public static final int ACTIVE = 4, SOLUTION = 5;
    private int[][] maze = {
        {1, 1, 1, 1, 1, 1, 1, 1},
        {1, 3, 0, 0, 0, 0, 0, 1},
        {1, 1, 0, 1, 1, 1, 0, 1},
        {1, 1, 0, 1, 0, 1, 0, 1},
        {1, 0, 0, 0, 0, 1, 0, 1},
        {1, 1, 0, 1, 1, 1, 0, 1},
        {1, 0, 0, 0, 0, 1, 2, 1},
        {1, 1, 1, 1, 1, 1, 1, 1},
    };

public static Point startSearch(int[][] grid) {
    int x = -1, y = -1;
    for (int col = 0; col < grid.length; col++) {
        for (int row = 0; row < grid.length; row++) {
            if (grid[col][row] == 3) {
                x = col;
                y = row;
                return new Point(x, y);
            }
        }
    }
    return null;
}

public static Point[] algorithm(int[][] maze) {
    ConcurrentLinkedQueue<Point> path = new ConcurrentLinkedQueue<Point>();
    ConcurrentLinkedQueue<Point> predecessor = new ConcurrentLinkedQueue<Point>();

    Point start = startSearch(maze);
    Point current;
    Point north, south, east, west;

    int i = 0;
    int j = 0;
    path.offer(start);
    while (!path.isEmpty()) {
        current = path.poll();
        i = current.i;
        j = current.j;
        if (i == maze.length - 1 && j == maze.length - 1
                && maze[i][j] == '0') {
            Point[] trail = new Point[path.size()];
            while (path.isEmpty()) {
                for (int k = 0; k < path.size(); k++) {
                    trail[k] = path.poll();
                } return trail;
            }
        }

        east = new Point(i, j + 1);
        south = new Point(i + 1, j);
        west = new Point(i, j - 1);
        north = new Point(i - 1, j);
        if (j + 1 >= 0 && j + 1 < maze.length && maze[i][j + 1] == '0'
                && predecessor.contains(east) == false) {
            predecessor.offer(east);
            path.offer(current);
            path.offer(east);
        } else if (i + 1 >= 0 && i + 1 < maze.length
                && maze[i + 1][j] == '0'
                && predecessor.contains(south) == false) {
            predecessor.offer(south);
            path.offer(current);
            path.offer(south);
        } else if (j - 1 >= 0 && j - 1 < maze.length
                && maze[i][j - 1] == '0'
                && predecessor.contains(west) == false) {
            predecessor.offer(west);
            path.offer(current);
            path.offer(west);
        } else if (i - 1 >= 0 && i - 1 < maze.length
                && maze[i - 1][j] == '0'
                && predecessor.contains(north) == false) {
            predecessor.offer(north);
            path.offer(current);
            path.offer(north);
        }

    }

    return null;
}

public int[][] getMaze() {
    return maze;
}

public static void main(String args) {
    new MazeSolver();
} 
```

这是我们应该用于 repaint() 的方法，这部分并不重要，但一些帮助或解释它是如何工作的会很棒。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import javax.swing.JComponent;

public class MazeViewer extends JComponent {
    private static final long serialVersionUID = 1L;
    private final MazeSolver parent;
    public MazeViewer(MazeSolver parent) {
        this.parent = parent;
        setPreferredSize(new Dimension(500, 500));
    }
    @Override
    public void paintComponent(Graphics graphics) {
        int[][] maze = parent.getMaze();
        int cellSize = Math.min(getWidth() / maze[0].length, getHeight()
                / maze.length);
        graphics.setColor(Color.GRAY);
        graphics.fillRect(0, 0, getWidth(), getHeight());

        for (int row = 0; row < maze.length; row++)
            for (int col = 0; col < maze[0].length; col++)
                drawCell(graphics, maze[row][col], row, col, cellSize);
    }
    private void drawCell(Graphics graphics, int mazeCellValue, int row,
            int col, int cellSize) {
        switch (mazeCellValue) {
        case MazeSolver.WALL:
            graphics.setColor(Color.BLACK);
            break;
        case MazeSolver.OPEN:
            graphics.setColor(Color.WHITE);
            break;
        case MazeSolver.GOAL:
            graphics.setColor(Color.RED);
            break;
        case MazeSolver.START:
            graphics.setColor(Color.GREEN);
            break;
        case MazeSolver.ACTIVE:
            graphics.setColor(Color.CYAN);
            break;
        case MazeSolver.SOLUTION:
            graphics.setColor(Color.GREEN);
            break;
        }
        graphics.fillRect(col * cellSize, row * cellSize, cellSize,
                cellSize);
        graphics.setColor(Color.GRAY); // border
        graphics.drawRect(col * cellSize, row * cellSize, cellSize,
                cellSize);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T02:14:13.320

我认为您的程序无法运行的原因是您已将 main 函数声明为

```
public static void main(String args) 
```

但它实际上应该有一个字符串数组作为参数。IE。这个

```
public static void main(String[] args) 
```

# ruby - 为什么在输入 (LoadError) 中找不到 Ruby 脚本？

> ID：14887335
> 
> 赞同：9
> 
> 时间：2013-02-15T02:03:13.947
> 
> 标签：ruby, sass, rbenv

Ruby 由 rbenv 安装。

```
$ ruby -v  
ruby 1.9.3p327 (2012-11-10 revision 37606) [i686-linux]

$ which ruby  
/home/user/.rbenv/shims/ruby

$ which sass  
/home/user/.rbenv/shims/sass

$ gem list
*** LOCAL GEMS ***

bigdecimal (1.1.0) 
bundler (1.2.4)
io-console (0.3)
json (1.5.4)
minitest (2.5.1)
rake (0.9.2.2)
rdoc (3.9.4)
sass (3.2.5) 
```

这是我的 config.yml：

```
# Assetic Configuration
assetic:
    // ...

    ruby: /home/user/.rbenv/shims/ruby

    filters:
        cssrewrite: ~
        sass:
            bin: /home/user/.rbenv/shims/sass

        // ... 
```

这是我得到的错误：

```
[message] An error occurred while running:
'/home/user/.rbenv/shims/ruby' '/home/user/.rbenv/shims/sass' '--load-path' '/path/to/symfony2/src/My/AnyBundle/Resources/public/css' '--cache-location' '/tmp' '/tmp/assetic_sassYbl6MI'

Error Output:
ruby: no Ruby script found in input (LoadError) 
```

我的其他设置中的错误：

配置.yml：

```
# Assetic Configuration
assetic:
    // ...

    ruby: /home/user/.rbenv/shims/ruby

    filters:
        cssrewrite: ~
        sass: ~

        // ... 
```

这是我得到的错误：

```
Error Output:
ruby: No such file or directory -- /usr/bin/sass (LoadError) 
```

萨斯不起作用。引用 gem 有问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-17T05:28:04.220

克隆 rails repo 后出现此错误：

```
$ rails server
c:/RailsInstaller/Ruby1.9.3/bin/ruby.exe: no Ruby script found in input (LoadError) 
```

问题出在`bin/rails`和中`bin/rake`。顶线是`#!/usr/bin/env`，但应该是`#!/usr/bin/env ruby`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T11:19:03.990

Sf 2.1.7, rvm installed, installed compass,sass as gem, 特别基于[Unable to load Sass / Compass after install RVM, to use with Assetic in Symfony2](https://stackoverflow.com/questions/11752142/unable-to-load-sass-compass-after-installing-rvm-to-use-with-assetic-in-symfo)

```
parameters:
# Assetic
  assetic.filter.compass.images_dir: %kernel.root_dir%/../web/images
  assetic.filter.compass.http_path:  /images
  assetic.ruby.bin: 'pathToRubyBin' 
```

ruby bin 的路径，您可以通过以下方式检查：

```
which ruby 
```

如上。对于 sass 和 scss 使用罗盘过滤器：

```
assetic:
    debug:          "%kernel.debug%"
    use_controller: false
    bundles:        [ FOSUserBundle, XcomplSomeBundle ]
    #java: /usr/bin/java
    filters:
        lessphp:
            file: %kernel.root_dir%/../vendor/leafo/lessphp/lessc.inc.php
            apply_to: "\.less$"
        sass: ~
        compass:
            bin: 'pathtocompass'
            apply_to: "~\.(sass|scss)$~"
        cssrewrite: ~ 
```

这是警告！如果您使用 rvm 或系统 ruby​​，则无需创建 100500 个包装器。只是：

```
$ which compass 
```

它是你的指南针。

现在：

```
{% block stylesheets %}
    {% stylesheets 'css/general.scss(or .sass)' filter='compass, cssrewrite' output='css/general.css' %}
        <link rel="stylesheet" type="text/css" media="screen" href={{ asset_url }} />
    {% endstylesheets %}
{% endblock %} 
```

最后，我的宝石清单：

```
~$ gem list

*** LOCAL GEMS ***

bigdecimal (1.1.0)
bundler (1.2.4)
chunky_png (1.2.7)
compass (0.12.2)
fssm (0.2.10)
io-console (0.3)
json (1.5.5)
minitest (2.5.1)
rake (10.0.3, 0.9.2.2)
rdoc (3.9.5)
rubygems-bundler (1.1.0)
rvm (1.11.3.6)
sass (3.2.6) 
```

# firebase - 有没有办法仅在数据更改时获取“价值”事件？

> ID：14887337
> 
> 赞同：2
> 
> 时间：2013-02-15T02:03:34.703
> 
> 标签：firebase

根据 Firebase 文档：

> 'value' 事件用于读取 Firebase 位置的全部内容。它使用初始数据触发一次，每次数据更改时都会触发一次。

有没有办法仅在数据更改时获取快照上的所有数据？

这背后的原因是因为我仅将 Firebase 用于协作模式，这意味着当启用协作时，已经有来自我的数据库的数据应该与 FB 数据匹配。我可以忽略第一个回调（初始化回调），但我想知道是否有更优雅的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T02:48:58.297

我们实际上故意不区分初始状态和更新。我们是同步服务，而不是消息服务。

您绝对可以简单地忽略第一个回调。那应该可以正常工作。

另一种方法是使用 Firebase 作为您的主要数据存储，并让您的服务器在 Firebase 中填充数据，而不是直接将数据提供给最终用户。

# inheritance - 打印给了我一个类列表上的内存地址，而不是一个特定的 STR

> ID：14887338
> 
> 赞同：2
> 
> 时间：2013-02-15T02:04:16.473
> 
> 标签：inheritance, python-2.7

[这可能是一个基本问题，因为我是从Think Python](http://www.greenteapress.com/thinkpython/thinkpython.pdf)这本书开始自学的。还有一个练习，我不知道为什么不打印卡字符串，而是打印内存地址。

这是整个代码：

```
import random

class Card(object):
    '''Represents a standard playing card'''

    def __init__(self, suit=0, rank=2):
        self.suit = suit
        self.rank = rank

    suit_names = ['Clubs', 'Diamonds', 'Hearts', 'Spades']
    rank_names = [None, 'Ace', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'Jack', 'Queen', 'King']

    def __str__(self):
        return '%s of %s' % (Card.rank_names[self.rank], Card.suit_names[self.suit])

    def __cmp__(self, other):
        t1= self.suit, self.rank
        t2 = other.suit, other.rank
        return cmp(t1, t2)

class Deck(object):

    def __init__(self):
        self.cards = []
        for suit in range(4):
            for rank in range(1,14):
                card = Card(suit, rank)
                self.cards.append(card)

    def __str__(self):
        res = []
        for card in self.cards:
            res.append(str(card))
        return '\n'.join(res)

    def pop_card(self):
        return self.cards.pop()

    def add_card(self, card):
        self.cards.append(card)

    def shuffle(self):
        random.shuffle(self.cards)

    def sort(self):
        self.cards.sort()

    def move_card(self, hand, num):
        for i in range(num):
            hand.add_card(self.pop_card())

    def deal_hands(self, _cards, hands):
        handsdeal = []
        for i in range(hands):
            hand = Hand()
            self.move_card(hand, _cards)
            handsdeal.append(hand.cards)
        return handsdeal

class Hand(Deck):

    def __init__(self, label=''):
        self.cards = []
        self.label = label 
```

让我解释：

我用甲板 j (j = Deck()) 和 _cards= 2 和 hands= 3 调用方法 deal_hands。结果是 Hand 的列表，但是当我打印该列表时，我得到的列表与预期的一样，但内存地址丑陋作为元素。为什么会发生这种情况，如何解决？

**str**也应该被 Hand 使用，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:46:00.530

要让列表打印除实例信息之外的其他内容，您需要在 Card 类上实现 __repr__ 。列表容器使用此函数而不是 __str__ 来获取它包含的对象的字符串表示形式。这主要用于调试目的，并且应该唯一地标识对象。

所以...首先我将以下内容添加到您的 Card 类中。

```
def __repr__(self):
    return '%s of %s' % (Card.rank_names[self.rank], Card.suit_names[self.suit]) 
```

然后我在文件底部使用以下内容生成输出。

```
# Printing the whole list (which uses __repr__)
j=Deck()
foo = j.deal_hands(2,3)
print foo

# Printing the lists (which uses __str__)
for hand in foo:
  for card in hand:
    print card 
```

我的输出

```
$ python test.py 
[[King of Spades, Queen of Spades], [Jack of Spades, 10 of Spades], [9 of Spades, 8 of Spades]]
King of Spades
Queen of Spades
Jack of Spades
10 of Spades
9 of Spades
8 of Spades 
```

更新：只是认为 pprint 模块可能也值得一提，因为当想要在 python 中获得复杂结构的良好输出时它很方便。尝试在我上面的嵌套 for 循环下添加以下内容。

```
import pprint
pp = pprint.PrettyPrinter(indent=4)
pp.pprint(foo) 
```

输出

```
[   [King of Spades, Queen of Spades],
    [Jack of Spades, 10 of Spades],
    [9 of Spades, 8 of Spades]] 
```

# linux - STASM-ASM 在 linux 中不起作用

> ID：14887341
> 
> 赞同：0
> 
> 时间：2013-02-15T02:04:55.430
> 
> 标签：linux, gcc, ubuntu, opencv

我正在开发一个图像处理项目，我需要在其中定位和标记一些面部属性（即：嘴巴、鼻子、眼睛等）。我正在尝试使用 STASM-ASM 算法 ( [http://www.milbo.users.sonic.net/stasm/](http://www.milbo.users.sonic.net/stasm/) )，我已经在以前在 Windows 中完成的项目中使用了这种技术，并获得了非常好的结果。

尝试在 Linux 中使用此实用程序时出现问题，我按照作者提供的说明构建了对象 .o 文件。然后，我按照[如何使用 g++ 创建静态库中的说明创建了一个静态库？](https://stackoverflow.com/questions/5947067/how-to-create-a-static-library-with-g). 然后，我将此静态库链接到我的项目并包含以下头文件：

```
// stasm.h

#ifndef STASM_H_
#define STASM_H_
void AsmSearchDll(int *pnlandmarks, int landmarks[], const char image_name[], const char          image_data[], const int width, const int height, const int is_color, const char con f_file0[], const char conf_file1[]);

#endif 
```

尝试构建此项目时，出现以下错误：

```
undefined reference to `AsmSearchDll(int*, int*, char const*, char const*, int, int, int, char const*, char const*)' 
```

这对我来说似乎很奇怪，因为我确定头文件已正确包含。我还尝试了作者在包中包含的 .hpp 文件，并获得了相同的确切结果。这个问题类似于[Trying to get stasm to work on Ubuntu 中](https://stackoverflow.com/questions/13735735/trying-to-get-stasm-to-work-on-ubuntu)处理的问题。但是，该帖子仍然没有最终解决方案。我希望有人能帮我解决这个问题，STASM-ASM 实用程序真的很棒，可惜它不能在 linux 中使用，因为它提供了。

我认为问题不在于类型不匹配，我在分析了对 ASMSearchDll 函数的调用及其声明后得出了这一结论。该函数调用如下：

```
AsmSearchDll(&nlandmarks, landmarks, image_name, img->imageData, img->width, img->height,1 /* is_color */, NULL /* conf_file0 */, NULL /* conf_file1 */); 
```

函数定义如下：

```
// stasm_dll.hpp

#ifndef stasm_dll_hpp
#define stasm_dll_hpp

extern "C"
void AsmSearchDll(
int *pnlandmarks,          // out: number of landmarks, 0 if can't get landmarks
int landmarks[],           // out: the landmarks, caller must allocate
const char image_name[],   // in: used in internal error messages, if necessary
const char image_data[],   // in: image data, 3 bytes per pixel if is_color
const int width,           // in: the width of the image
const int height,          // in: the height of the image
const int is_color,        // in: 1 if RGB image, 0 for grayscale
const char conf_file0[],   // in: 1st config filename, NULL for default
const char conf_file1[]);  // in: 2nd config filename, NULL for default, "" if none
#endif // stasm_dll_hpp 
```

此外，如果我更改传递给函数的参数之一的格式，我会收到如下错误：

```
../src/PruebaStasm.cpp:44:155: error: invalid conversion from ‘int’ to ‘int*’ [-fpermissive]
../src/stasm_dll.hpp:6:6: error:   initializing argument 1 of ‘void AsmSearchDll(int*, int*, const char*, const char*, int, int, int, const char*, const char*)’ [-fpermissive] 
```

我使用提供的 makefile 再次编译了 .o 文件，这些 .o 文件是我按照本教程创建的共享和动态库：[http ://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)

我不明白问题出在哪里。

此致，

路易斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:14:02.507

正如所评论的那样，ASMSearchDLL 函数被认为只能在 Windows 中使用，因此不能在 linux 中轻松使用。

最后，我设法在 linux 中使用了 AsmSearch 函数，并进行了一些小改动。为了使用这个功能，我构建了一个静态库，其中包含从 stasm-asm 包中包含的源文件获得的 .o 文件。

更准确地说，我在 makefile 文件中添加了以下内容：

```
LIB_OBJ=\
       stasmlibrary.o\
       $(STASM_OBJ)

lib: $(LIB_OBJ)
       ar rs libstasm.a $(LIB_OBJ) 
```

其中 stasmlibrary.cpp 和 stasmlibrary.hpp 包含我在包中提供的 AsmSearch 中定义的函数。STASM_OBJ 变量包括以下目标文件：

```
stasm.o\
atface.o\
ezfont.o\
find.o\
follow.o\
forward.o\
imfile.o\
imwrite.o\
imgiven.o\
imshape.o\
imutil.o\
initnet.o\
jpegutil.o\
landmarks.o\
mat.o\
matvec.o\
mchol.o\
mrand.o\
prof.o\
readconf.o\
rgbimutil.o\
rowley.o\
rowleyhand.o\
search.o\
shapefile.o\
shapemodel.o\
sparsemat.o\
startshape.o\
safe_alloc.o\
tclHash.o\
util.o\
violajones.o\
vjhand.o\
wrbmp.o\
asmsearch.o\
initasm.o\
readasm.o\
err.o\
release.o\
tab.o 
```

感谢所有回答这个问题的人的时间和善意的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:32:17.093

如此处所示：

[http://www.milbo.users.sonic.net/stasm/minimal.html](http://www.milbo.users.sonic.net/stasm/minimal.html)

你需要调用：

```
 SHAPE                               // results returned as a SHAPE
    AsmSearch(
      SHAPE &StartShape,              // out: start shape returned in here
      DET_PARAMS &DetParams,          // out: face detector parameters
      double &MeanTime,               // out: mean time per image (face det failed excluded)
      const RgbImage &RgbImg,         // in: find face features in this image
      const char sImage[],            // in: file path for RgbImg, for err msgs
      const bool fRowley=false,       // in: true to use VJ detector, else Rowley
      const char sConfFile0[]="../data/mu-68-1d.conf", // in: 1st config filename
      const char sConfFile1[]="../data/mu-76-2d.conf", // in: 2nd config filename
      const char sDataDir[]="../data",// in: data directory
      const char sShapeFile[]=NULL,   // in: if not NULL then use face detector in here
      bool fIssueWarnings=true);      // in: true to issue warnings if needed 
```

我不确定你是否可以在 Linux 下调用 AsmSearchDll。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:22:45.667

由于 stasm_dll.hpp 中的定义是用 extern "C" 包裹的，我认为当您稍后在程序中包含 stasm.h 时，您必须这样做，例如：

```
extern "C" {
 #include "stasm.h"
} 
```

这应该得到调用约定，C/C++ 问题正确

# c# - 使用 DevExpress 在运行时将数据绑定到使用 DevExpress Windows 窗体的特定列

> ID：14887345
> 
> 赞同：0
> 
> 时间：2013-02-15T02:05:30.683
> 
> 标签：c#, winforms, devexpress, runtime, xtragrid

我用 DevExpress 制作了 WinForm 应用程序，它是我的代码（C#）的一部分：

```
public partial class XtraForm1 : DevExpress.XtraEditors.XtraForm
{
    private DataTable _Tbl;
    private DataTable CreateTable(int RowCount)
    {
        _Tbl = new DataTable();
        _Tbl.Columns.Add("New Field", typeof(string));

        for (int i = 0; i < RowCount; i++)
            _Tbl.Rows.Add(new object[] { });

        return _Tbl;
    }

    int i = 0;

    private void simpleButton1_Click_1(object sender, EventArgs e)
    {
        i++;
        int index = i % _Tbl.Columns.Count;
        DevExpress.XtraGrid.Columns.GridColumn col = gridView1.Columns.AddVisible(_Tbl.Columns[index].ColumnName);
        col.Name = "Column_{0}" + i;
                }

    public XtraForm1()
    {

        InitializeComponent();
        gridControl1.DataSource = CreateTable(20);
        gridView1.Columns.Clear();

    }
} 
```

当按下按钮时，代码将在运行时创建一列，我的问题是**如何将 XtraGrid 中的选定列与任何 DBMS 中的数据与运行时选定的数据库中选定表中的选定列绑定**

对不起，我的英语不好。我希望你们都可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:27:01.423

您需要将 DataTable 列的名称设置为 GridColumn 的 FieldName 属性。

如果我理解正确，这应该会有所帮助：

```
private void simpleButton1_Click_1(object sender, EventArgs e)
{
    i++;
    int index = i % _Tbl.Columns.Count;
    DevExpress.XtraGrid.Columns.GridColumn col = gridView1.Columns.AddVisible(_Tbl.Columns[index].ColumnName);
    col.Name = "Column_{0}" + i;
    col.FieldName = "Column_{0}" + i";
} 
```

FieldName 属性告诉网格在哪里可以找到数据。如果您使用列表作为数据源，这可能是数据列的名称或属性的名称。

# jquery - jQuery验证与切换功能冲突

> ID：14887348
> 
> 赞同：0
> 
> 时间：2013-02-15T02:06:01.737
> 
> 标签：jquery, jquery-validate

我尝试使用 jquery validate 验证我的简单表单，并且在我的表单中，当用户单击时，我有一个复选框，它将切换 tr 并显示额外的输入字段。

但现在我无法验证我的表单，除非我删除切换复选框

```
<input type="checkbox" onClick="popup('#item1','.box1')" id="item1" />Tick to show 
```

，下面是我的切换功能：

```
function popup(checkbox, box){
     $(checkbox).change(function() {                
     $(box).toggle(this.checked); //if checkbox checked show div
  }).change(); //ensure visible state matches initially
}; 
```

你可以查看我的[jSFiddle](http://jsfiddle.net/ruslyrossi/2TfB2/5/)

*是的，我也尝试使用 jQuery.noConflict(); 但结果还是一样*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T02:33:44.313

**当我们使用jquery.validate.js**实现 jquery 验证时

 **```
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script> 
```

所有输入类型都必须`name`包含`type="button"`以避免jquery冲突，即使输入类型只是为了触发某些功能。**

# javascript - 传递给javascript时html中断的等价物是什么

> ID：14887349
> 
> 赞同：0
> 
> 时间：2013-02-15T02:06:07.097
> 
> 标签：javascript, html, newline

我正在将字符串从 HTML 传递到 Javascript

```
<textarea ></textarea> 
```

如果用户在文本区域内按“ENTER”...

例如

```
hello there
I hit the enter key 
```

一旦这个字符串被提交到 javascript，它会是什么样子？

是这样的吗？

```
pass_character = "hello there \n I hit the enter key"; 
```

但 '\n' 似乎是错误的。我做了一个测试

```
text = pass_character.split(' ');
if(text[i] == '\n')
       do something 
```

当它已经传递给javascript时，我想知道换行符或“输入”的等价物，这样我就可以在以后的代码中管理文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:13:54.307

我会`\r\n`在将文本添加到文本区域时使用，因为它保留了格式并且不呈现 HTML 实体。如果您打算将该文本用作 HTML，则可能需要将其转换为换行符。Using`\n`将适用于基于 Unix 的系统，但您可能会或可能不会在旧版本的 IE 中遇到问题。更重要的是 - 当用户复制文本并粘贴时，原始格式也将被保留，您可能需要考虑是否有条件地应用换行符作为回车和/或换行符。

[http://jsfiddle.net/NgcuF/1/](http://jsfiddle.net/NgcuF/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T02:09:31.390

是的，等效代码将是换行符，但在您的示例中，`\n`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T07:33:35.600

根据 HTML 规范，[换行符](http://www.w3.org/TR/html401/struct/text.html#line-breaks)可以是换行符 (LF)、回车符 (CR) 或 CR LF 对。这意味着从 JavaScript 的角度来看，HTML 换行可能是`'\n'`或`'\r'`或`'\r\n'`，具体取决于实现。

当提交包含文本区域的表单时，浏览器需要将换行符规范化为 CR LF，这是对它们的 Internet 约定。这就是浏览器所做的。但他们不需要在内部为元素内容这样做，仅在准备提交表单数据时。

# javascript - JQuery：从.each（）选择器中排除元素？

> ID：14887350
> 
> 赞同：3
> 
> 时间：2013-02-15T02:06:12.890
> 
> 标签：javascript, jquery, jquery-selectors

我想遍历包含在 3 个嵌套`<ul>`s 中的一系列菜单项，但只从嵌套 s 的第二层检索 .HTML() `<li>`，例如：

```
<ul>
<li><a href="#">Ignore</a></li>
<li><a href="#">Ignore</a></li>
<li><a href="#">Ignore</a>
   <ul>
   <li><a href="#">Retrive me</a></li>
   <li><a href="#">Retrive me</a></li>
   <li><a href="#">Retrive me</a>
       <ul>
       <li><a href="#">Ignore</a></li>
       <li><a href="#">Ignore</a></li>
       <li><a href="#">Ignore</a></li>
       </ul>
   </li>
   </ul>
</li>
</ul> 
```

通常我会使用 .not() 例如：

```
$.each($("#menu ul li ul li a").not("#menu ul li ul li ul li a"), function() {
  var linktext = $(this).html();
  console.log(linktext);
}); 
```

但这仍然从第二和第三级 a 标签返回所有 .html() 。

有人知道如何修改吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:07:48.217

您可以使用[子选择器*^([docs])*](http://api.jquery.com/child-selector/)：

```
$("#menu > ul > li > ul > li > a").each(...); 
```

或者计算祖先的数量，`li's`尽管这可能会降低性能：

```
$('#menu ul a').filter(function() {
    return $(this).parentsUntil('#menu', 'li').length === 2;
}).each(...); 
```

# c++ - 如何避免使用静态多态性重复代码

> ID：14887351
> 
> 赞同：4
> 
> 时间：2013-02-15T02:06:15.987
> 
> 标签：c++

我有一个这样的界面（除了在真正的库代码中比这长得多）

```
struct IFoo
{
    virtual void onA(A& a) = 0;
    virtual void onB(A& a) = 0;
    virtual void onC(A& a) = 0;
}; 
```

对我来说实现不同的监听器是很常见的`IFoo`。正因为如此，我设计了一个这样的辅助类：

```
template <class T>
struct IFooHelper {
    virtual void onA(A& a) { static_cast<T*>(this)->onGeneric(a); }
    virtual void onB(B& b) { static_cast<T*>(this)->onGeneric(b); }
    virtual void onC(C& c) { static_cast<T*>(this)->onGeneric(c); }
}; 
```

所以现在，当我在侦听器中有很多常见行为时，不必为每个`IFoo`函数提供虚拟覆盖，我可以执行以下操作：

```
struct Fox : public IFooHelper<Fox>
{
    template <class T> void onGeneric(T& t) { //do something general }
    void onD(D& d) { //special behavior only for a type D }
}; 
```

这工作得非常好，但现在我正在实现一个我想要一些常见行为的监听器，然后更新一个计数器，比如它是哪种类型的调用。换句话说，假设我只有`A,B,C`上述类型，我的听众将是：

```
struct Ugly : public IFooHelper<Ugly>
{
    void onA(A& a) { //8 lines of common code; //update some counter for type A objs; }
    void onB(B& b) { //8 lines of common code; //update some counter for type B objs; }
    void onC(C& c) { //8 lines of common code; //update some counter for type C objs; }
}; 
```

在这里，调用必须非常快（所以没有查找），理想情况下，我将能够利用 将`IFooHelper`常见行为提升到模板方法中，然后以某种方式仍然能够区分类型。我在想一个模板专门的结构，它带有一个静态 cons char* 数组的偏移量..或本身的值是 char* 取决于`T`..有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:05:46.860

不确定我是否完全理解您在寻找什么，但我会试一试。作为第一步，请考虑以下问题：

```
struct NotSoUgly : public IFooHelper<NotSoUgly>
{
    void updateCounter(A& a) { //update some counter for type A objs; }
    void updateCounter(B& b) { //update some counter for type B objs; }
    void updateCounter(C& c) { //update some counter for type C objs; }

    template <class T> void onGeneric(T& t) {
        //8 lines of common code;
        updateCounter(t);
    }
}; 
```

如果您向我们展示`updateCounter()`方法的内容，我们也可以为此提出一个通用实现，但如果没有看到代码，就很难猜出进一步的改进。

# backbone.js - 在backbone.js 中修改一个集合

> ID：14887356
> 
> 赞同：1
> 
> 时间：2013-02-15T02:07:34.040
> 
> 标签：backbone.js

我有一个使用 Coffeescript 的集合，如下所示。

> ```
> class ListCollection extends Backbone.Collection
>     model: List
>     localStorage:
>         new Backbone.LocalStorage("TodoList") 
> ```

我希望能够动态更改 ListCollection 实例的“模型”或“localStorage”属性。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:55:49.020

如果您希望创建具有不同类型模型的集合（而不是具有特定模型的不同集合）。也许这更适合你：

```
class ListCollection extends Backbone.Collection
    model: (attrs, options) ->
       switch attrs.type
          when "car"
              new Car(attrs, options)
           else
              new Bus(attrs, options)
    localStorage:
        new Backbone.LocalStorage("TodoList") 
```

如果将对象添加到集合中，它将查找它的类型属性。然后它将通过一个开关来确定它的类型。这样，单个集合可以有不同类型的模型（以及不同的解析器、验证、url 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:13:48.010

这将相当简单：

```
class newClass extends ListCollection
    model: somethingElse 
```

我唯一不确定的是咖啡脚本类。但是`var NewModel = SomeModel.extend()`通过传递选项对象来使用将覆盖在父级上定义的函数/属性（基本上它会更改/扩展 的原型`NewModel`）。

在此处查看文档：http: [//backbonejs.org/#Model-extend](http://backbonejs.org/#Model-extend)（这适用于每个 Backbone 对象：模型、视图、集合等）

# opengl - openGL相机问题

> ID：14887358
> 
> 赞同：0
> 
> 时间：2013-02-15T02:07:47.720
> 
> 标签：opengl, graphics, camera, rendering, textures

所以我在让openGL相机做我想做的事情时遇到了一点麻烦。基本上我希望它根据我的键盘输入移动到某个位置，将场景渲染为纹理，然后移回其先前的位置，然后将纹理渲染为四边形。我想要的效果是场景在我的四边形上移动，而四边形保持静止。然而，无论我做什么，四边形本身总是会随着纹理一起移动。

我基本上在做以下事情：

```
SetMatrices;
gluLookAt(randomposition);
renderSceneToTexture;
gluLookAt(originalPosition)
texturemap my quad/render to screen. 
```

我在这里想念什么？我的渲染代码很好，因为当我不乱用相机时，一切都会正确渲染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T02:18:47.910

您需要在使用之前加载单位矩阵（或您在 中设置的其他规范矩阵`SetMatrices`）`gluLookAt`，`gluLookAt`将新矩阵与现有模型视图矩阵相乘。

或者，您可以使用推送和弹出矩阵的工作方式：

*   设置你的矩阵
*   推模型视图矩阵
*   看随机位置
*   将场景渲染到纹理
*   弹出模型视图矩阵
*   查看原始位置（可能没有必要）
*   渲染你的四边形

# xargs - 带有 -d 标志并使用替换的 xargs 会导致处理额外的“空”项

> ID：14887360
> 
> 赞同：0
> 
> 时间：2013-02-15T02:07:49.283
> 
> 标签：xargs

使用`-d`xargs 中的标志来指定分隔符似乎会在最后一个值之后添加换行符。无论哪种方式，当使用替换将值粘贴到命令中间时，它都会导致命令中断（与让 xargs 将值传递到命令末尾的更“标准”方式相比）。

换句话说，这只发生在使用`-d`和`-I`标记并将值粘贴到命令中间时。

我怎样才能解决这个问题？

例子：

```
# echo "server1 server2 server3 server4"|xargs -r -d" " -I+ echo ssh + "sudo service myservice restart"
ssh server1 sudo service myservice restart
ssh server2 sudo service myservice restart
ssh server3 sudo service myservice restart
ssh server4
 sudo service myservice restart 
```

请注意，最后一个命令由换行符偏移。如果命令以换行符结束，这将不是问题，但在这种情况下不会。

我`" null"`通过添加到传递给 xargs 的列表末尾并忽略由此产生的错误来解决此问题。但这是一个糟糕的解决方案，在某些情况下是危险的。

我的解决方法：

```
# echo "server1 server2 server3 server4 null"|xargs -r -d" " -I+ echo ssh + "sudo service myservice restart"
ssh server1 sudo service myservice restart
ssh server2 sudo service myservice restart
ssh server3 sudo service myservice restart
ssh server4 sudo service myservice restart
ssh null
 sudo service myservice restart 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:16:59.957

xargs 没有添加换行符；只是因为换行不再是分隔符，所以*已经在您的输入*中的换行将按字面意思进行。

如果您实际上`echo`用于向 xargs 提供输入，请使用`echo -n`它以使其不添加换行符。如果您使用的是 echo 以外的其他内容，请研究如何使其不添加尾随换行符，或使用`tr`or`sed`或or 删除换行符`perl`。

# database - SQL SERVER 中的字符串到金钱数据类型

> ID：14887362
> 
> 赞同：1
> 
> 时间：2013-02-15T02:07:51.137
> 
> 标签：database, visual-studio-2010, sql-server-2005, parameters, sqlclient

我试图插入一个`STRING`从一个`TextBox`到`COLUMN`有一个`MONEY DATA TYPE`但出现错误提示并说：*发生错误，无法添加患者！不允许从数据类型 nvarchar 到数据类型 money、表 'TblName'、列 'pTotalDue' 的隐式转换。使用 CONVERT 函数运行此查询*

我怎样才能转换它？有人能告诉我怎么做吗？

这是我的代码：

```
Private Function INSERT() As String
        Dim SQLcon As New SqlConnection
        Dim SQLdr As SqlDataReader
        Try
            SQLcon.ConnectionString = "Data Source=#####;Initial Catalog=#####;Persist Security Info=True;User ID=#####;Password=#####"
            Dim SQLcmd As New SqlCommand("INSERT INTO dbo.Patients" & _
                                         "(pIDNo,pLName,pFName,pMI,pSex,pStatus,pTelNo,pDocID,pAddr,pStreet,pBarangay,pCity,pProvince,pLNameKIN,pFNameKIN,pMIKIN,pRelationKIN,pTotalDue)" & _
                                         "VALUES(@pIDNo,@pLName,@pFName,@pMI,@pSex,@pStatus,@pTelNo,@pDocID,@pAddr,@pStreet,@pBarangay,@pCity,@pProvince,@pLNameKIN,@pFNameKIN,@pMIKIN,@pRelationKIN,@totaldue)", SQLcon)
            SQLcmd.Parameters.AddWithValue("@pIDNo", txtPNumber.Text)
            SQLcmd.Parameters.AddWithValue("@pLName", txtLname.Text)
            SQLcmd.Parameters.AddWithValue("@pFName", txtFname.Text)
            SQLcmd.Parameters.AddWithValue("@pMI", txtMI.Text)
            SQLcmd.Parameters.AddWithValue("@pSex", txtPatientSex.Text)
            SQLcmd.Parameters.AddWithValue("@pStatus", txtStatus.Text)
            SQLcmd.Parameters.AddWithValue("@pTelNo", txtPatientTelNo.Text)
            SQLcmd.Parameters.AddWithValue("@pDocID", txtPatientDoctor.Text)
            SQLcmd.Parameters.AddWithValue("@pAddr", txtStreetNumber.Text)
            SQLcmd.Parameters.AddWithValue("@pStreet", txtStreetName.Text)
            SQLcmd.Parameters.AddWithValue("@pBarangay", txtBarangay.Text)
            SQLcmd.Parameters.AddWithValue("@pCity", txtCity.Text)
            SQLcmd.Parameters.AddWithValue("@pProvince", txtProvince.Text)
            SQLcmd.Parameters.AddWithValue("@pLnameKIN", txtKinLname.Text)
            SQLcmd.Parameters.AddWithValue("@pFnameKIN", txtKinFname.Text)
            SQLcmd.Parameters.AddWithValue("@pMIKIN", txtKinMI.Text)
            SQLcmd.Parameters.AddWithValue("@pRelationKIN", txtRelationToPatient.Text)
            SQLcmd.Parameters.AddWithValue("@totaldue", txtTotalDue.Text)
            SQLcon.Open()
            MsgBox("Patient Added!", MsgBoxStyle.Information)
            SQLdr = SQLcmd.ExecuteReader()
        Catch ex As Exception
            MessageBox.Show("Error Occured, Can't Add Patient!" & ex.Message)
        Finally
            SQLcon.Close()
        End Try
        Return ""
    End Function 
```

顺便说一句，我目前使用的 SQL SERVER 版本是 2005。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:13:20.510

尝试更改此行：

```
SQLcmd.Parameters.AddWithValue("@totaldue", txtTotalDue.Text) 
```

对此：

```
SQLcmd.Parameters.Add("@totaldue", SqlDbType.Money).Value = Decimal.Parse(txtTotalDue.Text) 
```

# java - ioio.waitForConnect() 抛出 ConnectionLostException

> ID：14887363
> 
> 赞同：0
> 
> 时间：2013-02-15T02:07:51.247
> 
> 标签：java, android, ioio

我正在尝试将 IOIO 板与 Galaxy SIII 一起使用。我已经成功地能够运行 HelloIOIO 程序。

我不知道为什么这个程序如此失败。从电话上的控制台输出中，我可以看到它在 ioio.waitForConnect(); 行失败。根据文档，这条线会阻塞线程，直到建立通信。我还尝试将连接线放在每个异步线程内，并且出现相同的症状（除了无法访问 UI，程序强制关闭）。我正在做一些愚蠢的事情......帮助任何人？

[代码]

```
package com.example.pressure_test;

import ioio.lib.api.DigitalInput;
import ioio.lib.api.DigitalOutput;
import ioio.lib.api.IOIO;
import ioio.lib.api.IOIOFactory;
import ioio.lib.api.TwiMaster;
import android.app.Activity;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {

    IOIO ioio = null;
    long CalibrationData[];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /*Find elements */
        Button Calibrate_Button = (Button)findViewById(R.id.Calibrate_Button);
        Button ReadSensor_Button = (Button)findViewById(R.id.Read_Button);
        TextView ConIO = (TextView)findViewById(R.id.Con_IO);

        try
        {
            ConIO.append("1.1\n");
            ioio = IOIOFactory.create();
            ConIO.append("2.2\n");
            ioio.waitForConnect(); //THIS THROWS AN EXCEPTION INSTANTLY!!!
            ConIO.append("3.3\n");

            /*Set onclick listeners to async threads*/
            Calibrate_Button.setOnClickListener(new OnClickListener()
            {
                public void onClick(View v)
                {
                    /*Run Async Thread*/
                    new GetSensorCalibration().execute();
                }

            });

            ReadSensor_Button.setOnClickListener(new OnClickListener()
            {
                public void onClick(View v)
                {
                    /*Run Async thread!*/
                }

            });

            ConIO.append("OnClickListeners created successfully\n");
        }
        catch (Exception e)
        {
            ConIO.append("Error: IO coms unsuccessful. \n");
            String s = e.toString();
            ConIO.append(s);
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

     protected class GetSensorCalibration extends AsyncTask<Context, Integer, String>
        {

            /*Modifies ConstantArray[][], uses XCLR_Array[]*/
            protected String doInBackground(Context...params)
            {
                //TextView Console_IO = (TextView)findViewById(R.id.Con_IO);

                //Console_IO.append("\nSTARTING CALIBRATION\n*****************************************\n");

                try
                {
                    //Console_IO.append("Connected!\n");
                    TwiMaster i2c = ioio.openTwiMaster(0, TwiMaster.Rate.RATE_1MHz, true);
                    DigitalOutput X_CLR = ioio.openDigitalOutput(6);
                    byte Start[] = {(byte)0xAA}; //pointer to first register to read for calibration
                    X_CLR.write(true);
                    for (int j = 0; j < 11; j++)
                    {

                        byte MSBResponse[] = new byte[1];
                        byte LSBResponse[] = new byte[1];

                        i2c.writeRead(238, false, Start, 1, MSBResponse, 1); //first argument is decimal equivilant of 0xEE...Eclipse wouldn't compile with 0xEE, even with casts!

                        Start[0] += 1; //increment to read next bit

                        i2c.writeRead(238, false, Start, 1, LSBResponse, 1);

                        Start[0] += 1; //point to next address

                        /* Read the data into the array */
                        CalibrationData[j] = ((int)MSBResponse[0] << 8) + (int)LSBResponse[0];

                        /* Write the data to the console */
                        String s = String.format("\tJust read: %ld\n", CalibrationData[j]);

                        //Console_IO.append(s);

                        MSBResponse[0] = (byte)0;
                        LSBResponse[0] = (byte)0;
                    }
                    //Console_IO.append("*******************************************\n");
                    //X_CLR.write(false);
                    ioio.waitForDisconnect();
                    //Console_IO.append("Disconnected\n");
                    return "Done!";
                }
                catch (Exception e)
                {
                    //TextView Con_IO = (TextView)findViewById(R.id.Con_IO);
                    String s = e.toString();
                    //Con_IO.append(s);
                    //Con_IO.append("BLURGH\n");
                    return null;
                }

            }

            protected void onPostExecute(String Result)
            {
                TextView Con_IO = (TextView)findViewById(R.id.Con_IO);
                Con_IO.append("yay!\n");
                /*Catch bad results*/
                if (!(Result.equals("Done!")))
                {
                    Con_IO.append("Calibration Sequence Returned Unsuccessfully.\n");
                    return;
                }

                Con_IO.append("\n\nBEGIN_PLAYBACK\n");

                for (int i = 0; i < CalibrationData.length; i++)
                {
                    String s = String.format("\tThe next Calibration Constant is %ld\n", CalibrationData[i]);
                    Con_IO.append(s);
                }

                return;
            }

            protected void onPreExecute ()
            {
                TextView Con_IO = (TextView)findViewById(R.id.Con_IO);
                Con_IO.append("Starting Thread!\n");
            }
        }
     /*An async class for getting sensor data */
        protected class GetSensorAsync extends AsyncTask<Context, Integer, String> 
        {

            IOIO ioio;
            @Override
            protected String doInBackground( Context... params )
            {
                /* TODO: Write TWI interface */

                /********************************/
                /* Read in the pressure sensors */
                /********************************/

                /* Static variables */

                int oss = 0; //Oversampling parameter
                int i = 0;
                byte WriteAddress = (byte)0xEE;
                byte ReadAddress = (byte)0xEF;
                long Temperature;
                long Pressure;

                TextView Con_IO = (TextView) findViewById(R.id.Con_IO);

                /*For optimization purposes, we will use this array to precompute the powers of two */

                long _2[] = {1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536};

                try
                {
                    TwiMaster i2c = ioio.openTwiMaster(0, TwiMaster.Rate.RATE_1MHz, true); 

                    DigitalInput EOC_Pin = ioio.openDigitalInput(7);

                    /* Write 0x2E to register 0xF4 */

                    byte[] Response = {(byte)0x00, (byte)0x00, (byte)0x00}; //dummy for now...
                    byte[] SequenceToWrite = {(byte)0xEE, (byte)0xF4, (byte)0x2E}; //Write, Reg, Data

                    i2c.writeReadAsync(WriteAddress, false, SequenceToWrite, SequenceToWrite.length, Response, Response.length);

                    /* Wait until EOC goes high */

                    EOC_Pin.waitForValue(true);

                    /* Read data back in from 0xF6 and 0xF7 */
                    /* From the timing diagram, I think the data points are going to come back in series, so we don't need to 
                     * go about switching registers manually. 
                     */
                    byte SelectData[] = {(byte)0xEE, (byte) 0xF6};
                    byte Read[] = {(byte)0xEF};

                    i2c.writeReadAsync(WriteAddress, false, SelectData, SelectData.length, Response, Response.length);
                    i2c.writeRead(ReadAddress, false, Read, Read.length, Response, Response.length);
                    /* Now, we actually care about the value in Response! */
                    /* Convert the read data back into a long. */

                    Temperature = (((long)Response[0] << 16) + ((long)Response[1] << 8) + (long)Response[2]) >> (8 - oss); 

                    /* Send start command to sensor for pressure reading */
                    /* Write 0x34 + (oss << 6) to register 0xF4 */

                    byte PressureByte = (byte)0x34;
                    PressureByte += (byte)(oss << 6); //For some reason, eclipse whined when I put this on the same line

                    SequenceToWrite[3] = PressureByte;
                    i2c.writeReadAsync(WriteAddress, false, SequenceToWrite, SequenceToWrite.length, Response, Response.length);

                    EOC_Pin.waitForValue(true); //wait for action to complete

                    /* Read in pressure for each sensor. */
                    /* Pressure = [(Register 0xF6 << 16) + (Register0xF7 << 8) + (Register 0xF8) >> (8-oss)] */

                    Response[0] = (byte)0x00;
                    Response[1] = (byte)0x00;
                    Response[2] = (byte)0x00;

                    i2c.writeReadAsync(WriteAddress, false, SelectData, SelectData.length, Response, Response.length);
                    i2c.writeRead(ReadAddress, false, Read, Read.length, Response, Response.length);

                    Pressure = (((long)Response[0] << 16) + ((long)Response[1] << 8) + Response[2]) >> (8 - oss);

                    /* Compute temperature for each element of the temperature array */
                    /* Also compute B5 value (lol...who designed these freaking sensors?!) */

                    long TempArray[] = TemperatureFunction(Temperature, CalibrationData, oss, _2); //for CalibrationData, pass in the applicable array of sensor calibration values.
                    long ComputedTemperature = TempArray[0]; //Final Temperature

                    /* Compute true pressure for each sensor reading. */

                    long ComputedPressure = PressureFunction(TempArray, CalibrationData, oss, _2);

                    String s = String.format("Pressure: %ld\t Temperature: %ld\n", ComputedPressure, ComputedTemperature);
                    Con_IO.append(s);

                    /*********************************************/
                    /* Pressure sensors done by this point       */
                    /* ADD STUFF FOR OTHER SENSORS STARTING HERE */
                    /*********************************************/

                    return "Done!";
                }
                catch (Exception e)
                {
                    TextView Console_IO = (TextView)findViewById(R.id.Con_IO);

                    Console_IO.append("BLEURGH\n");
                    return "Error!";
                }
            }

            @Override
            protected void onCancelled()
            {
                /* Function for if we cancel threading */
                TextView ConIO = (TextView)findViewById(R.id.Con_IO);
                ConIO.append("Interrupted!\n");
            }

            private long[] TemperatureFunction(long UncompensatedTemp, long[] CalibrationData, int oss, long _2[])
            {
                /* The CalibrationData array must have the calibration coefficients of the sensors in the following order */
                /* [AC1, AC2, AC3, AC4, AC5, AC6, B1, B2, MB, MC, MD] */

                /* Let's define some variables to make this more readable */
                /* This whole block will remain constant, but I commented out the values not used in this function */
                //final int AC1 = 0;
                //final int AC2 = 1;
                //final int AC3 = 2;
                //final int AC4 = 3;
                final int AC5 = 4;
                final int AC6 = 5;
                //final int B1 = 6;
                //final int B2 = 7;
                //final int MB = 8;
                final int MC = 9;
                final int MD = 10;

                /* These formulas come straight from the datasheet...lol?*/

                long X1 = ((UncompensatedTemp - CalibrationData[AC6]) * CalibrationData[AC5]) / _2[15];
                long X2 = (CalibrationData[MC] * _2[11]) / (X1 + CalibrationData[MD]);
                long B5 = X1 + X2; 
                long FinalTemperature = (B5 + 8) / _2[4];

                /* Kind of a hack, TODO: Figure out a better way to do this */
                long ReturnArray[] = new long[2];
                ReturnArray[0] = FinalTemperature;
                ReturnArray[1] = B5;
                return ReturnArray;
            }

            private long PressureFunction(long[] InArray, long[] CalibrationData, int oss, long _2[])
            {
                /* The CalibrationData array must have the calibration coefficients of the sensors in the following order */
                /* [AC1, AC2, AC3, AC4, AC5, AC6, B1, B2, MB, MC, MD] */

                /* Let's define some variables to make this more readable */
                /* The same as in the previous function, but unused variables are commented out for readability */
                final int AC1 = 0;
                final int AC2 = 1;
                final int AC3 = 2;
                final int AC4 = 3;
                //final int AC5 = 4;
                //final int AC6 = 5;
                final int B1 = 6;
                final int B2 = 7;
                //final int MB = 8;
                //final int MC = 9;
                //final int MD = 10;

                final int UT = 0;
                final int B5 = 1;

                /* Again, straight from the datasheet...I do not want to think about how much heartache went into creating this algo...*/

                long B6 = InArray[B5] - 4000;
                long X1 = (CalibrationData[B2] * (long)(java.lang.Math.pow(B6, 2) / _2[11]));
                long X2 = (CalibrationData[AC2] * B6) / _2[11];
                long X3 = X1 + X2;
                long B3 = (((CalibrationData[AC1] * 4) + X3 ) << (oss + 2)) / 4;
                X1 = (CalibrationData[AC3] * B6) / _2[13];
                X2 = (CalibrationData[B1] * ((long)java.lang.Math.pow(B6,2) / _2[12])) / _2[16];
                X3 = ((X1 + X2) +2 ) / 4;
                /* Note: Java's 'long' datatype is equivilant to C's 'long long' datatype. Both have 64 bits */
                /* So, even though the example code asks for an unsigned long, it was written in C, so the numbers should
                 * fit within 32 bits. So, it should fit within a java long */
                long B4 = (CalibrationData[AC4] * (X3 + 32768)) / _2[15];
                long B7 = (InArray[UT] - B3) * (50000 >> oss);
                long p;
                if (B7 < (long)2147483648L) //0x80000000 in decimal
                {
                    p = (B7 * 2) / B4;
                }
                else
                {
                    p = (B7 / B4) * 2;
                }

                X1 = (long)java.lang.Math.pow((p / _2[8]) , 2);
                X1 = (X1 * 3038) / _2[16];
                X2 = (-7357 * p) / _2[16];
                p = p + ((X1 + X2 + 3791) / _2[4]);
                return p;
            }
        } 
```

} [/代码]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:55:15.403

问题已解决 - 我没有正确的权限。

# linux - Autofs 启动但似乎什么也没做——甚至没有记录？

> ID：14887364
> 
> 赞同：2
> 
> 时间：2013-02-15T02:08:03.230
> 
> 标签：linux

我试图在使用 autofs 插入时自动挂载 NTFS 格式的 USB RAID 阵列，但我发现没有挂载 - 事实上，甚至没有尝试挂载 - 正在发生。我什至似乎无法在日志中显示任何内容。我很困惑。

我创建了一个符号链接，因此当我插入驱动器时，它会自动映射到 /dev/usbraid。现在我只需要它自动将该设备挂载到文件系统的某个位置。

我在 Rikomagic MK802III 上使用 picuntu（一个精简的 debian 发行版）。

我已经使用 apt-get 安装了 autofs，并编辑了 /etc/auto.master 文件，内容如下：

```
+auto.master
/media    /etc/auto.removable 
```

我的 /etc/auto.removable 文件内容如下：

```
/media/usbraid  -fstype=ntfs  :/dev/usbraid 
```

我能够成功启动该服务，但我没有看到任何反馈表明 auto.master 文件已被读取或已尝试安装。当我调用“service autofs status”时，我会收到粗略的“auto fs start/running”消息。

我预计至少会出现错误或其他情况。无奈之下，我修改了 '/etc/default/autofs' 文件以设置 'LOGGING="verbose"'，但是当 autofs 服务启动和停止时，除了系统日志之外，我仍然在任何日志中看不到任何内容。

我显然做错了什么，但无法弄清楚是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:02:11.973

好的，感谢这里的一些信息，确定了这个：http: [//www.clearfoundation.com/component/option,com_kunena/Itemid,232/catid,13/func,view/id,14038/](http://www.clearfoundation.com/component/option,com_kunena/Itemid,232/catid,13/func,view/id,14038/)

基本上，问题在于未加载 autofs4 模块。如果我跑

```
modprobe autofs4 
```

说找不到模块。看来 autofs 模块没有编译到我的内核中。我想我可以重新编译内核，但这可能比它值得付出更多的努力。

# php - 涉及 switch 语句的 PHP 函数的问题

> ID：14887365
> 
> 赞同：0
> 
> 时间：2013-02-15T02:08:08.530
> 
> 标签：php, switch-statement

我收到一个语法错误，“第 38 行出现意外的 ':'”，我想不通：

```
public static function clearTasks($type){
    $con = taskDB::connectDB();

    switch ($type){
        /* line 38: */
        case: 'completed':
            $type='=1';
            break;
        case: 'failed':
            $type='=0';
            break;
        case: 'pending':
            $type='is null';
            break;
        case: 'all':
            $type='=1 or completed=0 or is null';
            break;
    }
    $result = $con->query("DELETE FROM taskage WHERE completed".$type);
    $con->close();  
} 
```

谁能告诉我为什么会这样？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:08:56.610

没有`:`后`case`

```
case: 'completed': 
```

应该

```
case 'completed': 
```

# powershell - 是否可以在 Powershell 中将 update-typedata 与泛型类型定义一起使用？

> ID：14887366
> 
> 赞同：1
> 
> 时间：2013-02-15T02:08:12.820
> 
> 标签：powershell, powershell-3.0

我在这里实现了 Bart de Smet 的解决方案，用于向 Powershell 添加扩展方法：

[http://bartdesmet.net/blogs/bart/archive/2007/09/06/extension-methods-in-windows-powershell.aspx](http://bartdesmet.net/blogs/bart/archive/2007/09/06/extension-methods-in-windows-powershell.aspx)

效果很好！几乎！他正在过滤掉泛型，但那是在黑暗时代（2007 年），所以我试图弄清楚今天是否可以使用 Powershell 3.0。这是我正在尝试做的一个简单示例：

```
$ls = new-object collections.generic.list[string]

'generic'
update-typedata -force -typename collections.generic.list`1 `
    -membertype scriptmethod -membername test -value {'test!'}

$ls.test() # fail

'string'
update-typedata -force -typename collections.generic.list[string] `
    -membertype scriptmethod -membername test -value {'test!'}

$ls.test() # works! 
```

这输出：

```
generic
Method invocation failed because [System.Collections.Generic.List`1[[System.String, mscorlib, 
Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]] doesn't contain a method 
named 'test'.
At C:\Temp\blah5.ps1:12 char:1
+ $ls.test()
+ ~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (:) [], RuntimeException
    + FullyQualifiedErrorId : MethodNotFound

string
test! 
```

现在，Powershell 能够使用泛型类型定义。它似乎没有与 typedata 系统集成......

还是我做错了？您有什么办法可以使这项工作发挥作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:23:15.400

自定义类型扩展取决于`$object.PSTypeNames`- PowerShell 在决定给定扩展是否适用于某个类型时，将使用您看到的任何内容。

在您的第一个示例中，您正在“挂钩”您的输入方法，该方法可能不会出现在任何对象的 PSTypeNames 中：

```
$ls.PSTypeNames
System.Collections.Generic.List`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]
System.Object 
```

显然，应该与 System.Object 的任何泛型一起使用的链接方法是矫枉过正的（至少可以这么说）。您可以通过使用一些专门的函数创建泛型来解决它，这将包装 New-Object + 向 PSTypeNames 添加一些内容：

```
Update-TypeData -Force -TypeName System.Collections.Generic.List -Value {
    'Works!'
} -MemberName Test -MemberType ScriptMethod

function New-GenericObject {
param (
    [Parameter(Mandatory)]
    $TypeName
)
    $out = New-Object @PSBoundParameters
    $out.PSTypeNames.Insert(
        0,
        ($out.GetType().FullName -split '`')[0]
    )
    , $out
}

$ls = New-GenericObject -TypeName Collections.Generic.List[string]
$ls.Test() 
```

这更像是一个草图而不是实际实现......我想真正的代理功能会比一个简单的包装器好得多。

# gwt - GWT CellTree 创建问题

> ID：14887367
> 
> 赞同：0
> 
> 时间：2013-02-15T02:08:14.713
> 
> 标签：gwt, uibinder

我正在尝试为我的 GWT 应用程序创建一个 CellTree，在初始化 Showcase [即 onModuleLoad] 期间，我收到以下错误。我要做的就是复制 GWT [Showcase](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html)应用程序并从头开始构建。

```
17:47:04.519 [ERROR] [ChannelView] Failed to create an instance of 
'com.app.capture.client.ClientFactory' via deferred binding 
java.lang.IllegalStateException: TreeNode no longer exists.
at com.google.gwt.user.cellview.client.CellTreeNodeView$TreeNodeImpl.assertNotDestroyed(CellTreeNodeView.java:653)
at com.google.gwt.user.cellview.client.CellTreeNodeView$TreeNodeImpl.setChildOpen(CellTreeNodeView.java:642)
at com.google.gwt.user.cellview.client.CellTreeNodeView$TreeNodeImpl.setChildOpen(CellTreeNodeView.java:637)
at com.app.capture.client.ui.MainMenuViewImpl.<init>(MainMenuViewImpl.java:35)
at com.app.capture.client.ClientFactory.<clinit>(ClientFactory.java:13)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at com.google.gwt.dev.shell.ModuleSpace.loadClassFromSourceName(ModuleSpace.java:665)
at com.google.gwt.dev.shell.ModuleSpace.rebindAndCreate(ModuleSpace.java:468)
at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:49)
at com.google.gwt.core.shared.GWT.create(GWT.java:57)
at com.google.gwt.core.client.GWT.create(GWT.java:85)
at com.app.capture.client.ChannelViewEntryPoint.onModuleLoad(ChannelViewEntryPoint.java:59)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:406)
at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:526)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
at java.lang.Thread.run(Thread.java:722) 
```

UI 由 2 个并排垂直放置的面板组成。左侧是导航面板，我想在其中添加单元树。

celltree 视图模型类是

```
package com.app.capture.client.ui.model;
import java.util.ArrayList;
import java.util.List;
import com.google.gwt.cell.client.AbstractCell;
import com.google.gwt.cell.client.Cell;
import com.google.gwt.cell.client.TextCell;
import com.google.gwt.safehtml.shared.SafeHtmlBuilder;
import com.google.gwt.view.client.ListDataProvider;
import com.google.gwt.view.client.SingleSelectionModel;
import com.google.gwt.view.client.TreeViewModel;

public class MainMenuViewModel implements TreeViewModel {

private static class Category {
    private final String       name;
    private final List<String> items = new ArrayList<String>();

    public Category(final String name) {
        this.name = name;
    }

    public List<String> getItems() {
        return this.items;
    }

    public String getName() {
        return this.name;
    }

    public void addCategoryItem(String item) {
        items.add(item);
    }
}

private final List<Category>               categories;
private final SingleSelectionModel<String> selectionModel = new SingleSelectionModel<String>();

public MainMenuViewModel() {
    categories = new ArrayList<Category>();

    Category apg = new Category("A");
    apg.addCategoryItem("11");
    apg.addCategoryItem("22");

    Category channel = new Category("B");
    channel.addCategoryItem("33");
    channel.addCategoryItem("44");
    channel.addCategoryItem("55");

    categories.add(apg);
    categories.add(channel);
}

@Override
public <T> NodeInfo<?> getNodeInfo(T value) {
    if (value == null) {
        // Root Level
        ListDataProvider<Category> dataProvider = new ListDataProvider<Category>(categories);
        Cell<Category> cell = new AbstractCell<Category>() {
            @Override
            public void render(com.google.gwt.cell.client.Cell.Context context, Category value, SafeHtmlBuilder sb) {
                if (value != null) {
                    sb.appendEscaped(value.getName());
                }
            }
        };
        return new DefaultNodeInfo<Category>(dataProvider, cell);
    } else if (value instanceof Category) {
        ListDataProvider<String> dataProvider = new ListDataProvider<String>(((Category) value).getItems());            
        return new DefaultNodeInfo<String>(dataProvider, new TextCell(), selectionModel, null);
    }
    return null;
}

@Override
public boolean isLeaf(Object value) {
    if (value instanceof String) {
        return true;
    }
    return false;
} 
```

}

我对主菜单视图的类定义是

```
public class MainMenuViewImpl extends Composite implements MainMenuView {

interface MainMenuViewImplUiBinder extends UiBinder<Widget, MainMenuViewImpl> {
}

private static MainMenuViewImplUiBinder uiBinder = GWT.create(MainMenuViewImplUiBinder.class);

private Presenter                       presenter;

@UiField(provided = true)
CellTree                                mainMenu;

private MainMenuViewModel mainMenuModel;

public MainMenuViewImpl() {
    mainMenuModel = new MainMenuViewModel();
    mainMenu = new CellTree(mainMenuModel, null);
    mainMenu.setKeyboardSelectionPolicy(KeyboardSelectionPolicy.ENABLED);
    TreeNode treeNode = mainMenu.getRootTreeNode();
    // This is where the exception is throw. If i remove the following line, no menu is displayed
    treeNode.setChildOpen(0, true);
    initWidget(uiBinder.createAndBindUi(this));

}

@Override
public void setPresenter(Presenter presenter) {
    this.presenter = presenter;
} 
```

}

我的主菜单的 UI 活页夹定义是

```
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
xmlns:g="urn:import:com.google.gwt.user.client.ui"
xmlns:c="urn:import:com.google.gwt.user.cellview.client">
<ui:style>
    .mainMenu {
        background-color: #d7dde8;
        border: 1px solid #c3c3c3;
    }
</ui:style>

<g:VerticalPanel styleName="{style.mainMenu}">
    <c:CellTree ui:field="mainMenu" />      
</g:VerticalPanel>
</ui:UiBinder> 
```

我正在使用 GWT 2.5.0。

任何调试此问题的帮助/指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:08:26.723

对于引用此内容的任何人，代码中都没有问题。我认为这个问题与Eclipse有关。

今天（发布此问题后的第二天），我执行了以下步骤。

1.  重启 Eclipse
2.  GWT 在项目上编译
3.  运行项目。

这解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T11:02:18.757

你必须把“initWidget”方法

```
initWidget(uiBinder.createAndBindUi(this)); 
```

在视图构造函数的第一行。
您的构造函数可能如下所示：

```
public MainMenuViewImpl() 
{
  initWidget(uiBinder.createAndBindUi(this));
  mainMenuModel = new MainMenuViewModel();
  mainMenu = new CellTree(mainMenuModel, null);
  mainMenu.setKeyboardSelectionPolicy(KeyboardSelectionPolicy.ENABLED);
  TreeNode treeNode = mainMenu.getRootTreeNode();
  // This is where the exception is throw. If i remove the following line, no menu is displayed
  treeNode.setChildOpen(0, true);
} 
```

;)

# javascript - 如何使用 javascript 函数从 div 中减去 50px？

> ID：14887368
> 
> 赞同：0
> 
> 时间：2013-02-15T02:08:23.263
> 
> 标签：javascript, html, function

当我设置了一个值但我希望能够在调用它时从 div 中减去 50px，因为它总是根据发生的情况改变大小。

我不知道设定值需要是什么。

```
function resizeDiv(id)
{
    var obj = document.getElementById(id);
    if (obj)
    {
        obj.setAttribute("style", "height:CHANGE VALUE");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T02:11:09.127

你去喜欢

```
obj.style.height = ( parseFloat( obj.style.height ) - 50 ) + 'px'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:24:13.527

您可以使用 jQuery 并使用它：

```
obj.css({height: (obj.height() - 50).toString + 'px'}); 
```

如果你这样做，你会想要改变

```
var obj = document.getElementById(id); 
```

对此：

```
var obj = $(id) 
```

我还没有尝试过，但它应该可以工作

# node.js - Socket.io 连接错误

> ID：14887369
> 
> 赞同：0
> 
> 时间：2013-02-15T02:08:37.500
> 
> 标签：node.js, socket.io

我在 Ubuntu 12.04 LTS 服务器上安装了 node v0.8.19。我为 express 和 socket.io 安装了 npm 模块。

[从如何使用](http://socket.io/#how-to-use)的第一个示例中复制代码后，我在 Chrome 中遇到如下错误： ![在此处输入图像描述](../Images/1cc8c830e3a91dfcf9c0b2a4efdbdd5a.png)

客户端能够加载 socket.io.js 源，但我没有在服务器或客户端收到任何 emit() 消息。任何想法如何让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:16:46.827

看起来您的服务器是 54.235.156.108，但 socket.io 使用 localhost。

您是否忘记从示例中更改此内容？

# python - Python & C：是否可以将 Ctypes 和 Swig 混合在一起？

> ID：14887374
> 
> 赞同：0
> 
> 时间：2013-02-15T02:09:32.817
> 
> 标签：python, c, swig, ctypes

我正在尝试找到一种方法来使用 python 脚本测试我的 C 代码。到目前为止，我的发现是

1）使用Ctypes，我可以轻松加载so并直接从python调用函数。另外，一切都发生在运行时，所以没有额外的编译/包装东西。

2) 然而，在 python 中重写每种类型是乏味且容易出错的，尤其是对于复杂的数据类型。每当定义发生变化时，我都必须更新 python 脚本中的定义。

我想知道既然 Swig 可以自动导出数据类型，是否可以将 Swig 和 Ctypes 混合在一起？即使用Swig导出数据类型，可以通过Ctypes调用函数。

ps 我不确定 Cython 是否更适合，但我们的环境中没有 Cython。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:18:11.787

我最终使用 Swig 动态链接到由 C 代码生成的 so 库。这样，我只需要在 swig 接口文件中包含头文件，就可以告诉 swig 要公开哪些函数/数据类型。这种方法的另一个优点是我可以用 C 编写测试辅助函数，并且也可以轻松地公开它们。

# c++ - 如何使用 ctypes 将数组从 C++ 函数返回到 Python

> ID：14887378
> 
> 赞同：28
> 
> 时间：2013-02-15T02:09:58.183
> 
> 标签：c++, python, arrays, return, ctypes

我正在使用 ctypes 在 Python 中实现 C++ 函数。C++ 函数应该返回一个指向数组的指针。不幸的是，我还没有弄清楚如何在 Python 中访问数组。我尝试了 numpy.frombuffer，但没有成功。它只是返回了一个任意数字的数组。显然我没有正确使用它。这是一个大小为 10 的数组的简单示例：

function.cpp的内容：

```
extern "C" int* function(){
int* information = new int[10];
for(int k=0;k<10;k++){
    information[k] = k;
}
return information;
} 
```

wrapper.py 的内容：

```
import ctypes
import numpy as np

output = ctypes.CDLL('./library.so').function()

ArrayType = ctypes.c_double*10
array_pointer = ctypes.cast(output, ctypes.POINTER(ArrayType))
print np.frombuffer(array_pointer.contents) 
```

要编译我正在使用的 C++ 文件：

```
g++ -c -fPIC function.cpp -o function.o
g++ -shared -Wl,-soname,library.so -o library.so function.o 
```

你有什么建议我必须做些什么来访问 Python 中的数组值？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-15T10:45:28.277

您的 python 代码将在一些小的修改后工作：

```
import ctypes

f = ctypes.CDLL('./library.so').function
f.restype = ctypes.POINTER(ctypes.c_int * 10)
print [i for i in f().contents] # output: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

基本上有两个变化：

1.  删除与 numpy 相关的代码并`ctypes.cast`调用，因为我们不需要它们。

2.  指定返回类型为`ctypes.POINTER(ctypes.c_int * 10)`.

    默认情况下，假定外部函数返回 C int 类型，因此我们需要将其更改为所需的指针类型。

顺便说一句，将`new`ed 数组从 C 代码返回到 Python 代码似乎不合适。谁以及何时释放内存？最好在 Python 代码中创建数组并将它们传递给 C 代码。这样，很明显 Python 代码**拥有**数组并负责创建和回收它们的空间。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-15T02:56:40.630

`function.cpp`返回一个 int 数组，同时`wrapper.py`尝试将它们解释为双精度数。更改`ArrayType`为`ctypes.c_int * 10`它应该可以工作。

* * *

只使用[`np.ctypeslib`](http://docs.scipy.org/doc/numpy/reference/routines.ctypeslib.html)而不是`frombuffer`自己使用可能更容易。这应该看起来像

```
import ctypes
from numpy.ctypeslib import ndpointer

lib = ctypes.CDLL('./library.so')
lib.function.restype = ndpointer(dtype=ctypes.c_int, shape=(10,))

res = lib.function() 
```

# objective-c - Objective-C 是否引用分配的字段或创建新实例

> ID：14887382
> 
> 赞同：1
> 
> 时间：2013-02-15T02:10:40.357
> 
> 标签：objective-c, memory, memory-management, reference, field

例如说我有以下定义`MyClass`：

```
@interface MyClass
{
    ClassWithBigMemoryUsage* cwbmu;
}

-(void) setClassWithBigMemoryUsage:(ClassWithBigMemoryUsage*) assignment; // where cwbmu = assignment; 
```

如果我将a创建`myClassInstance`为`MyClass`实例和实例，然后调用设置为为对象分配了额外的内存）。`cwbmuInstance``ClassWithBigMemoryUsage``[myClassInstance setClassWithBigMemoryUsage:cwbmuInstance]``cwbmuInstance``myClassInstance``ClassWithBigMemoryUsage``myClassInstance``myClassInstance``cwbmuInstance`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:13:54.917

所有 Objective-C 对象都是指针（因此是`*`in `ClassWithBigMemoryUsage *`），因此对象将通过引用传递，您不必担心在传递时它会被复制。

但是，当方法实际执行赋值时是否复制对象显然取决于您的 setter 方法的实现。如果你这样做：

```
cwbmu = assignment; 
```

您只需设置指针值，不进行复制。当然，既然它是一个对象，你可能应该保留它，方法是：

```
[cwbmu autorelease];
cwbmu = [assignment retain]; 
```

但结果是一样的。真正可靠地复制 Objective-C 实例的唯一方法是显式发送`copy`消息：

```
[cwbmu autorelease];
cwbmu = [assignment copy]; 
```

这仅适用于符合`NSCopying`协议的类。

最后一点，如果您使用`@property`声明以及`@synthesize`'d 方法，您可以指定您想要的这些行为中的哪一个。以下三种方式声明一个属性，将分别使用所描述的三种方式：

```
@property (assign) ClassWithBigMemoryUsage* cwbmu;
@property (retain) ClassWithBigMemoryUsage* cwbmu;
@property (copy) ClassWithBigMemoryUsage* cwbmu; 
```

另请注意，在ARC下，这个内存管理是为你完成的，所以你不能直接控制它。相反，您将使用`weak`选项（而不是`assign`）或`strong`选项（而不是`retain`），即使旧名称仍然有效，新名称也可以更清楚地说明您实际在做什么。该`copy`选项在 ARC 下仍然有效。

最后，如果您使用 ARC，但*不*使用`@property`，则默认情况下，实例变量被管理为`strong`. `__weak`您可以通过添加到他们的 ivar 声明来更改此设置。但是，`weak`并非所有体系结构都支持，在这种情况下`__unsafe_unretained`可以使用，但在后一种情况下，释放的对象指针将*不会*被清零（设置为`nil`），它们将在使用`__weak`.

# wso2 - 带有数据服务器插件的 ESB 4.6.0 - 无法使用 REF_CURSOR 执行存储过程

> ID：14887383
> 
> 赞同：1
> 
> 时间：2013-02-15T02:10:57.583
> 
> 标签：wso2, wso2esb, wso2dss

我正在使用带有 WSO2 ESB 4.6.0 和数据服务功能的 MAC OS X - 10.7.5 - 4.0.5

Java java 版本“1.6.0_37” Java(TM) SE 运行时环境（内部版本 1.6.0_37-b06-434-11M3909） Java HotSpot(TM) 64 位服务器 VM（内部版本 20.12-b01-434，混合模式）

我正在尝试使用 ref 游标执行存储过程。

这是我的DS

```
<data name="RZM">
   <config id="RZS_Data">
      <property name="driverClassName">oracle.jdbc.driver.OracleDriver</property>
      <property name="url">XXXX</property>
      <property name="username">XXXX</property>
      <property name="password">XXXX</property>
      <property name="defaultTransactionIsolation">TRANSACTION_READ_COMMITTED</property>
   </config>
   <query id="TEST" useConfig="RZS_Data">
      <sql>call RT_PROC_GET_VERSION(:in_app_id,:in_version_id,?,?,?)</sql>
      <result element="Results" rowName="Result">
         <element column="app_url" name="app_url" optional="true" xsdType="string"/>
         <element column="out_message" name="OutMessage" optional="true" xsdType="string"/>
         <element column="out_err_message" name="out_err_message" optional="true" xsdType="string"/>
      </result>
      <param name="in_app_id" ordinal="1" sqlType="INTEGER" type="INOUT"/>
      <param name="in_version_id" ordinal="2" sqlType="STRING" type="INOUT"/>
      <param name="compare_from_id" ordinal="3" paramType="ARRAY" sqlType="ORACLE_REF_CURSOR" type="OUT"/>
      <param name="out_message" ordinal="4" sqlType="STRING" type="OUT"/>
      <param name="out_err_message" ordinal="5" sqlType="STRING" type="OUT"/>
   </query>
   <operation name="TOP">
      <call-query href="TEST">
         <with-param name="in_app_id" query-param="in_app_id"/>
         <with-param name="in_version_id" query-param="in_version_id"/>
      </call-query>
   </operation>
</data> 
```

我一直收到以下错误

```
[2013-02-14 18:00:14,400] ERROR - DataService DS Fault Message: Error in 'CallQuery.extractParams', cannot find parameter with type:query-param name:in_version_id
DS Code: INCOMPATIBLE_PARAMETERS_ERROR
Source Data Service:-
Name: RZM
Location: /RZM.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: TOP
Current Params: {}

DS Fault Message: Error in 'CallQuery.extractParams', cannot find parameter with type:query-param name:in_version_id
DS Code: INCOMPATIBLE_PARAMETERS_ERROR
Source Data Service:-
Name: RZM
Location: /RZM.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: TOP
Current Params: {}

    at org.wso2.carbon.dataservices.core.engine.CallQuery.extractParams(CallQuery.java:208)
    at org.wso2.carbon.dataservices.core.engine.CallQuery.executeElement(CallQuery.java:177)
    at org.wso2.carbon.dataservices.core.engine.CallQueryGroup.executeElement(CallQueryGroup.java:111)
    at org.wso2.carbon.dataservices.core.engine.OutputElement.execute(OutputElement.java:89)
    at org.wso2.carbon.dataservices.core.description.operation.Operation.execute(Operation.java:71)
    at org.wso2.carbon.dataservices.core.engine.DataService.invoke(DataService.java:548)
    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.execute(DSOMDataSource.java:99)
    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.serialize(DSOMDataSource.java:110)
    at org.apache.axiom.om.impl.llom.OMSourcedElementImpl.internalSerialize(OMSourcedElementImpl.java:691)
    at org.apache.axiom.om.impl.util.OMSerializerUtil.serializeChildren(OMSerializerUtil.java:562)
    at org.apache.axiom.om.impl.llom.OMElementImpl.internalSerialize(OMElementImpl.java:875)
    at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.serializeInternally(SOAPEnvelopeImpl.java:283)
    at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.internalSerialize(SOAPEnvelopeImpl.java:245)
    at org.apache.axiom.om.impl.llom.OMSerializableImpl.serializeAndConsume(OMSerializableImpl.java:193)
    at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:74)
    at org.apache.synapse.transport.passthru.PassThroughHttpSender.submitResponse(PassThroughHttpSender.java:435)
    at org.apache.synapse.transport.passthru.PassThroughHttpSender.invoke(PassThroughHttpSender.java:227)
    at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:442)
    at org.apache.axis2.receivers.AbstractInOutSyncMessageReceiver.invokeBusinessLogic(AbstractInOutSyncMessageReceiver.java:45)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:180)
    at org.apache.synapse.transport.passthru.ServerWorker.processEntityEnclosingRequest(ServerWorker.java:434)
    at org.apache.synapse.transport.passthru.ServerWorker.run(ServerWorker.java:219)
    at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:172)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
[2013-02-14 18:00:14,402] ERROR - PassThroughHttpSender Failed to submit the response
org.apache.axis2.AxisFault: DS Fault Message: Error in 'CallQuery.extractParams', cannot find parameter with type:query-param name:in_version_id
DS Code: INCOMPATIBLE_PARAMETERS_ERROR
Source Data Service:-
Name: RZM
Location: /RZM.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: TOP
Current Params: {}

    at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
    at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:78)
    at org.apache.synapse.transport.passthru.PassThroughHttpSender.submitResponse(PassThroughHttpSender.java:435)
    at org.apache.synapse.transport.passthru.PassThroughHttpSender.invoke(PassThroughHttpSender.java:227)
    at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:442)
    at org.apache.axis2.receivers.AbstractInOutSyncMessageReceiver.invokeBusinessLogic(AbstractInOutSyncMessageReceiver.java:45)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:180)
    at org.apache.synapse.transport.passthru.ServerWorker.processEntityEnclosingRequest(ServerWorker.java:434)
    at org.apache.synapse.transport.passthru.ServerWorker.run(ServerWorker.java:219)
    at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:172)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: javax.xml.stream.XMLStreamException: DS Fault Message: Error in 'CallQuery.extractParams', cannot find parameter with type:query-param name:in_version_id
DS Code: INCOMPATIBLE_PARAMETERS_ERROR
Source Data Service:-
Name: RZM
Location: /RZM.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: TOP
Current Params: {}

    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.execute(DSOMDataSource.java:105)
    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.serialize(DSOMDataSource.java:110)
    at org.apache.axiom.om.impl.llom.OMSourcedElementImpl.internalSerialize(OMSourcedElementImpl.java:691)
    at org.apache.axiom.om.impl.util.OMSerializerUtil.serializeChildren(OMSerializerUtil.java:562)
    at org.apache.axiom.om.impl.llom.OMElementImpl.internalSerialize(OMElementImpl.java:875)
    at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.serializeInternally(SOAPEnvelopeImpl.java:283)
    at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.internalSerialize(SOAPEnvelopeImpl.java:245)
    at org.apache.axiom.om.impl.llom.OMSerializableImpl.serializeAndConsume(OMSerializableImpl.java:193)
    at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:74)
    ... 12 more
[2013-02-14 18:00:14,403] ERROR - ServerWorker Error processing POST request for : /services/RZM.SOAP12Endpoint/TOP
org.apache.axis2.AxisFault: Failed to submit the response
    at org.apache.synapse.transport.passthru.PassThroughHttpSender.handleException(PassThroughHttpSender.java:496)
    at org.apache.synapse.transport.passthru.PassThroughHttpSender.invoke(PassThroughHttpSender.java:229)
    at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:442)
    at org.apache.axis2.receivers.AbstractInOutSyncMessageReceiver.invokeBusinessLogic(AbstractInOutSyncMessageReceiver.java:45)
    at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:180)
    at org.apache.synapse.transport.passthru.ServerWorker.processEntityEnclosingRequest(ServerWorker.java:434)
    at org.apache.synapse.transport.passthru.ServerWorker.run(ServerWorker.java:219)
    at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:172)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: org.apache.axis2.AxisFault: DS Fault Message: Error in 'CallQuery.extractParams', cannot find parameter with type:query-param name:in_version_id
DS Code: INCOMPATIBLE_PARAMETERS_ERROR
Source Data Service:-
Name: RZM
Location: /RZM.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: TOP
Current Params: {}

    at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
    at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:78)
    at org.apache.synapse.transport.passthru.PassThroughHttpSender.submitResponse(PassThroughHttpSender.java:435)
    at org.apache.synapse.transport.passthru.PassThroughHttpSender.invoke(PassThroughHttpSender.java:227)
    ... 10 more
Caused by: javax.xml.stream.XMLStreamException: DS Fault Message: Error in 'CallQuery.extractParams', cannot find parameter with type:query-param name:in_version_id
DS Code: INCOMPATIBLE_PARAMETERS_ERROR
Source Data Service:-
Name: RZM
Location: /RZM.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: TOP
Current Params: {}

    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.execute(DSOMDataSource.java:105)
    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.serialize(DSOMDataSource.java:110)
    at org.apache.axiom.om.impl.llom.OMSourcedElementImpl.internalSerialize(OMSourcedElementImpl.java:691)
    at org.apache.axiom.om.impl.util.OMSerializerUtil.serializeChildren(OMSerializerUtil.java:562)
    at org.apache.axiom.om.impl.llom.OMElementImpl.internalSerialize(OMElementImpl.java:875)
    at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.serializeInternally(SOAPEnvelopeImpl.java:283)
    at org.apache.axiom.soap.impl.llom.SOAPEnvelopeImpl.internalSerialize(SOAPEnvelopeImpl.java:245)
    at org.apache.axiom.om.impl.llom.OMSerializableImpl.serializeAndConsume(OMSerializableImpl.java:193)
    at org.apache.axis2.transport.http.SOAPMessageFormatter.writeTo(SOAPMessageFormatter.java:74)
    ... 12 more 
```

我不确定为什么会收到此错误。我正在尝试使用“TryIt”服务执行 DS。输入 XML 如下

```
<body>
   <p:TOP xmlns:p="http://ws.wso2.org/dataservice">
      <!--Exactly 1 occurrence-->
      <p:in_app_id>1296</p:in_app_id>
      <!--Exactly 1 occurrence-->
      <p:in_version_id>2.2</p:in_version_id>
   </p:TOP>
</body> 
```

存储过程定义从以下开始

```
 create or replace procedure RT_PROC_GET_VERSION (in_app_id                in number,
                                                    in_version_id           in varchar2,
                                                    out_version_detail      out sys_refcursor,
                                                    out_message             out varchar2,
                                                    out_err_message         out varchar2)
    is
    begin
            open out_version_detail for
            select
                    app_url, switch_board_url, version
.
.

end RT_PROC_GET_VERSION; 
```

你能帮忙吗？谢谢阿比吉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:21:55.707

我也一直在与它作斗争，我花了一些时间调试代码，并认为原因是 MessageContext 中的请求为“空”。所以它导致了 Axis2 传输配置影响了它的事实。事实上，WSO2 ESB 4.6.0 带有默认的直通 http 传输，它不会创建消息正文，这就是为什么您传递给服务的任何内容都不起作用的原因。因此，为了使其工作，您需要重新启用替代 http 传输（例如 find 和 uncomment `org.wso2.carbon.core.transports.http.HttpTransportListener`），`repository/conf/axis2/axis2.xml` 这应该以禁用路径为代价来解决您的问题。也许有办法在不同的端口上并排配置传输（稍后的任务）

需要注意的是，通常您应该将 ESB 和 DSS 分开保存，因为解决不同的任务并需要特定的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:34:10.817

试试这个调用 RT_PROC_GET_VERSION(?,?,?,?,?)

并在输入映射选项中列出所有带有序数的 in 和 out 参数。序数将基于问号。一件事是上述查询中出现的问号应该与您的存储过程相同。在此之后，如果有任何数据来自存储过程，则将它们列在 out 参数中

例如：如果您的结果集带有 id 和 address，则在输出映射中列出这两个。注意：输入映射名称应与存储过程中的名称相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T03:20:50.027

阿比吉特，

同时使用“命名参数”和“序数”（参数以数字排序）会导致参数提取和分配中的一些问题。我建议您统一使用“命名参数”选项或“序数”（两者中只有一个）来分配所有输入参数映射。那将解决问题。

希望这可以帮助！

# ruby - Sinatra：指定使用多个应用程序时搜索路线的顺序？

> ID：14887385
> 
> 赞同：2
> 
> 时间：2013-02-15T02:11:03.073
> 
> 标签：ruby, sinatra

我有一个经典风格的 Sinatra 应用程序，我正在向它添加一个模块化应用程序`use MyModularApp`。

这很好用，当我运行经典应用程序时，经典应用程序和模块化应用程序的路由都可用。问题是，似乎首先搜索来自模块化应用程序的路线，然后才搜索来自经典应用程序的应用程序。我想要相反的行为。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T04:05:19.700

Sinatra 应用程序可以[用作 Rack 中间件](http://www.sinatrarb.com/intro.html#Using%20Sinatra%20as%20Middleware)以及它们自己的应用程序。随着`use MyModularApp`您[将模块添加到中间件堆栈](http://www.sinatrarb.com/intro.html#Rack%20Middleware)中，它会在主应用程序之前看到请求；无论您`use`的源文件中有方法，这都会发生。

当充当中间件时，如果当前应用程序中没有匹配的路由，Sinatra 应用程序会将请求向下转发，这就是您看到当前行为的原因。

让它按您的意愿工作的一种方法是设置一个`not_found`调用您的模块化应用程序的客户处理程序：

```
not_found do
  MyModularApp.call(env)
end 
```

现在，如果您的主应用程序没有与请求匹配的路由，则将调用模块化应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T02:33:43.257

根据[Sinatra 文档](http://www.sinatrarb.com/intro#Routes)：

> 路由按照定义的顺序进行匹配。调用与请求匹配的第一个路由。

# c# - JSON.Net 不调用 CanConvert 收集项目？

> ID：14887389
> 
> 赞同：5
> 
> 时间：2013-02-15T02:11:28.673
> 
> 标签：c#, json.net

我有一个我只想在反序列化时使用的转换器。所以我将 CanWrite 设置为 false，它工作正常并且一切都可以序列化。然后，Json 字符串包含一个对象图，其中有一个 SantaClauseCollection，其中包含一个 SantaClause 项目数组和一个 $type，表明它们是具体类型 SantaClause。

但是，当它在反序列化时遇到 SantaClaus 的集合时，它从不调用 CanConvert(我有一个断点并看到 SantaClausCollection，按 F5 继续，当遇到 SantaClaus 集合中的项目时，它应该再次点击断点，但它没有）。当它到达 SantaClaus 项目时，它不会尝试调用 CanConvert。甚至没有为该项目调用 CanConvert 来检查我的转换器是否会处理它，而是尝试自行反序列化它，这不起作用，因为该类没有默认构造函数，也没有具有属性名称匹配约定的构造函数：

> 找不到用于 SantaClaus 类型的构造函数。一个类应该有一个默认构造函数、一个带参数的构造函数或一个标有 JsonConstructor 属性的构造函数。

我理解为什么会出现这个错误，但问题是它表明 Json.net 试图反序列化对象，而不是调用 CanConvert 来检查我的转换器是否想要处理反序列化。

**为什么没有为集合中的每个项目调用 CanConvert？**

我的转换器：

```
class SantaClaus2JsonConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(SantaClaus);          
    }

    /// <summary>
    /// Deserializes a SantaClaus as a SantaClausEx which has a matching constructor that allows it to deserialize naturally.
    /// </summary>       
    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        return serializer.Deserialize<SantaClausEx>(reader);
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        serializer.Serialize(writer, value);
    }

    public override bool CanRead
    {
        get
        {
            return true;
        }
    }

    public override bool CanWrite
    {
        get
        {
            return false;//We only need this converter when reading.
        }
    }

} 
```

SantaClausEx 只是继承自 SantaClaus 添加一个带有重命名参数的构造函数来匹配属性：

```
class SantaClaus //a third party class I can't modify
{
    string Name {get;set;}
    public SantaClaus(string santaClauseName) { this.Name = santaClauseName }
}

class SantaClausEx:SantaClaus 
{
    //provide a constructor with param names matching property names
    public SantaClausEx(string name) : base(name)
} 
```

Json.net 不能反序列化 SantaClaus，但它可以反序列化 SantaClauseEx。

我在任何地方都使用 SantaClauseEx 类，它工作得很好，但我想制作一个转换器来自动执行此操作。

这是集合中 Json 的样子：

```
SantaClausCollection: [
{
  $type: "SantaClaus, XMasClasses.NET20"
  Name: "St. Bob"
},
{
  $type: "SantaClaus, XMasClasses.NET20"
  Name: "St. Jim"
}
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T22:06:17.493

我想您已将转换器添加到`Converters`设置对象的集合中。

我用可以工作的转换器编写了简单的测试

```
public class SantaClausJsonTest
{
    public SantaClausJsonTest()
    {
        Settings = new JsonSerializerSettings();
        Settings.TypeNameHandling = TypeNameHandling.Objects;
        Settings.Converters.Add(new SantaClaus2JsonConverter());
    }

    private JsonSerializerSettings Settings;

    [Fact]
    public void SerializeAndDeserialize()
    {
        var collection = new []
            {
                new SantaClaus("St. Bob"),
                new SantaClaus("St. Jim"),
            };

        var serialized = JsonConvert.SerializeObject(collection, Settings);

        Console.WriteLine(serialized);
        Assert.False(string.IsNullOrEmpty(serialized));

        var deserialized = JsonConvert.DeserializeObject<SantaClaus[]>(serialized, Settings);

        Console.WriteLine(deserialized.GetType().ToString());
        Assert.NotNull(deserialized);
        Assert.True(deserialized.Any(a => a.Name == "St. Bob"));
        Assert.True(deserialized.Any(a => a.Name == "St. Jim"));
    }
}

public class SantaClaus
{
    public SantaClaus(string santaClauseName)
    {
        Name = santaClauseName;
    }

    public string Name { get; private set; }
}

public class SantaClaus2JsonConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(SantaClaus);
    }

    /// <summary>
    /// Deserializes a SantaClaus as a SantaClausEx which has a matching constructor that allows it to deserialize naturally.
    /// </summary>       
    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        var name = string.Empty;

        while (reader.Read())
        {
            if (reader.TokenType == JsonToken.String && reader.Path.EndsWith("Name"))
            {
                name = reader.Value as string;
            }
            if (reader.TokenType == JsonToken.EndObject)
            {
                break;
            }
        }

        return Activator.CreateInstance(objectType, name);
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        throw new NotSupportedException();
    }

    public override bool CanRead
    {
        get
        {
            return true;
        }
    }

    public override bool CanWrite
    {
        get
        {
            return false;//We only need this converter when reading.
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T21:01:27.640

我在反序列化从基类继承的对象时遇到了类似的问题（类似于您需要反序列化 SantaClauseEx 对象的方式，但它们都被定义为 SantaClause 对象）。问题在于 JSon.Net 无法识别子类型。

请参阅[stackoverflow.com/questions/8030538/how-to-implement-custom-jsonconverter-in-json-net-to-deserialize-a-list-of-base](https://stackoverflow.com/questions/8030538/how-to-implement-custom-jsonconverter-in-json-net-to-deserialize-a-list-of-base)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T23:37:47.787

一旦我得到了 Rudus 的答案，我就用我最初的尝试确定了这个问题。当你有一个没有默认构造函数的类型时，他很棒，但可以将属性值映射到它的其他构造函数之一，并且对于我的具体情况当然更容易。

如果由于某种原因你确实需要像我最初尝试做的那样在反序列化时创建不同类型的东西，我就能让它工作。

```
public class SantaClaus2JsonConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(SantaClaus);
    }

    /// <summary>
    /// Deserializes a SantaClaus as a SantaClausEx which has a matching constructor that allows it to deserialize naturally.
    /// </summary>       
    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        //temporarily switch off name handling so it ignores "SantaClaus" type when
        //explicitely deserialize as SantaClausEx
        //This could cause issues with nested types however in a more complicated object graph
        var temp = serializer.TypeNameHandling;
        serializer.TypeNameHandling = TypeNameHandling.None;
        var desr = serializer.Deserialize<SantaClausEx>(reader);
        serializer.TypeNameHandling = temp;//restore previous setting

        return desr;
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer) {
        throw new NotSupportedException();
    }

    public override bool CanRead { get { return true; } }

    public override bool CanWrite { get { false; } } //only for reading

} 
```

# github - 传输错误：无法获取远程存储库引用

> ID：14887390
> 
> 赞同：5
> 
> 时间：2013-02-15T02:11:34.417
> 
> 标签：github, ssh, egit

尝试将本地 git 存储库推送到 github 存储库时出现以下错误。从终端访问我的远程 github 存储库没有问题，但 EGit 无法正常工作。

![EGit 错误](../Images/730db77972feee03bfe645b74f473ac6.png)

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T06:06:49.473

[EGit 和 GitHub 的“Auth Failed”错误](https://stackoverflow.com/questions/3601805/auth-failed-error-with-egit-and-github/7629938#7629938)解决了这个问题。

简单来说，

```
cd ~
echo "export GIT_SSH=/usr/bin/ssh" >> .profile 
```

然后重启Eclipse生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-09T11:42:03.650

我使用带有身份验证的 Http Url 而不是 ssh URL。

# java - 创建比请求更多的线程

> ID：14887398
> 
> 赞同：0
> 
> 时间：2013-02-15T02:12:48.463
> 
> 标签：java, multithreading

我正在编写一个多线程客户端程序，它侦听来自 Web 浏览器的连接。我的问题是创建的线程多于应有的线程。例如，如果我在浏览器中输入一个 url，应该只创建一个线程但是就我而言，创建了多个线程。

```
public void running() {

    try {
        for(;;){
        Socket socket=server.accept();
        Thread t= new Thread( new ClientHandler(socket));
        t.start();
         // calls the start method to start a thread which also starts the run method
        System.out.println("Thread id is " +t.getId() );}
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
             public static void main(String[] args) {

    Server server= new Server();
    server.running();
}
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:23:47.097

呈现的代码将为每个传入连接创建一个线程。不再。

如果您获得的线程数比您预期的要多，那么最明显的解释是 Web 浏览器打开的与您的服务器的连接比您预期的要多。例如，浏览器可能会尝试为您的“站点”获取“favico”……或者在尝试 GET 之前发送 HEAD。

另一种可能性是您看到的那些额外线程是由 JVM 创建的守护线程；例如垃圾收集器线程、终结器线程等等。或者，也许它们实际上从未存在过……而您误解了某些东西。

* * *

需要注意的另一件事是，使用普通 TCP/IP 套接字实现 HTTP 服务是一个坏主意。正确实现 HTTP 需要做很多工作，而且您可能会得到一点……或很多……错误，导致服务无法与不同的浏览器很好地互操作。最好使用现有的 HTTP“堆栈”；例如，现有的 Web 应用程序服务器/框架，或者可能是 Apache HttpComponents 堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T02:44:44.667

> .例如，如果我在浏览器中输入一个 url，应该只创建一个线程，但在我的情况下，会创建多个线程。

仅当您假设浏览器将创建一个连接时。你不知道，证据对你不利。如果 URL 返回的数据包含图像等的相对 URL，浏览器将打开其他连接以同时检索它们。

# ios - 使用 RMShape 和 RMMapView 创建路径

> ID：14887403
> 
> 赞同：0
> 
> 时间：2013-02-15T02:13:32.583
> 
> 标签：ios, map, path, annotations, mapbox

我使用 mapbox sdk 实现地图应用程序。我需要一起显示标记和路径，我四处搜索，但仍然没有得到主要想法。

到目前为止，我已经做了...

```
- (RMMapLayer *)mapView:(RMMapView *)aMapView layerForAnnotation:(RMAnnotation *)annotation {

RMMarker *marker = [[RMMarker alloc] initWithUIImage:[UIImage imageNamed:@"pin-blue.png"]];
if ([annotation isKindOfClass:[MyAnnotation class]]) {
    if ([annotation.annotationType isEqualToString:@"marker"]) {
        [marker replaceUIImage:[self imageWithImage:[UIImage imageNamed:@"ic_marker.png"] scaledToSize:CGSizeMake(32, 48)]];
        [marker setAnchorPoint:CGPointMake(0.5, 1)];
        return marker;
    } else if ([annotation.annotationType isEqualToString:@"path"]) {
        path.lineWidth = 3;
        for (int i=0; i<[myCoordinateArray count]; i++) {
            NSLog(@"my coord count : %d", [myCoordinateArray count]);
            CLLocationCoordinate2D myLoc = [[myCoordinateArray objectAtIndex:i] coordinate];
            if (i>0) {
                [path addLineToCoordinate:myLoc];
            } else {
                [path moveToCoordinate:myLoc];
            }
        }
        [path closePath];
        return path;
    }
} 
return nil; 
```

}

//添加注解

```
myPin = [[MyAnnotation alloc] init];
        [myPin setMapView:mapView];

        [myPin setCoordinate:myLatLng];
        [myPin setTitle:@"Marker"];

        myPin.annotationType = @"marker";
        [mapView addAnnotation:myPin];
        [mapView setNeedsDisplay];

myPath = [[MyAnnotation alloc] init];
        [myPath setCoordinate:myLatLng];
        myPath.annotationType = @"path";
        [mapView addAnnotation:myPath]; 
```

我做错了什么，还是我错过了什么？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:55:36.450

首先，在您的第二个代码块中，您不需要调用`setMapView:`or `setNeedsDisplay`。

其次，什么不起作用？该代码看起来应该可以工作并在地图上显示一个点和一个路径。

# android - Android：如何使用意图获取活动值？

> ID：14887412
> 
> 赞同：0
> 
> 时间：2013-02-15T02:14:17.150
> 
> 标签：android, android-intent, android-activity

我想在活动之间制作加载页面。
因此，我尝试制作新的 Activity 仅用于加载，但存在一个问题。
我无法通过使用意图来获得“活动”价值，例如，

```
 Intent i = new Intent(activity1.this, activity2.class); 
 i.putExtra("Activity", activity1.this);
 startActivity(i); 
```

但是，我无法获得此额外值，因为没有“getActivityExtras()”。
我怎样才能做到这一点..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-17T11:49:54.383

您无法从意图对象获取活动，但您可以从该方法获取活动名称：

```
intent.getComponent().getShortClassName() 
```

**注意：** 如果您的活动文件在文件夹中，则方法的结果包含文件夹名称。“活动”文件夹中的活动文件示例：

```
.activities.SubActivity1 
```

并且必须使用来自：

```
intent.getComponent().getShortClassName().split("\\.")[2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:10:14.120

```
// define NAME in Activity 1
public const NAME = "Activity1";       

Intent i = new Intent(activity1.this, activity2.class); 
i.putExtra("Activity", "Activity1.NAME");
startActivity(i);

// in Activity 2
activity = getStringExtra("Activity");

switch(activity) {
 case Activity1.NAME:
 // do whatever you want here
 break; 
```

}

# java - Android：Java：SlidingDrawer 的弃用

> ID：14887416
> 
> 赞同：6
> 
> 时间：2013-02-15T02:15:24.847
> 
> 标签：java, android, menu, navigation, drawer

在 developer.android.com 上做了一些阅读后，我正在认真考虑从我的应用程序中删除菜单抽屉导航。

然而，在我这样做之前，我想听听您的意见：为什么`android.widget.SlidingDrawer`从 API 17 开始被弃用？

**编辑：**

这是一个有效的问题。为什么`android.widget.SlidingDrawer`被弃用了？还有什么可以用来代替滑动抽屉来达到同样的效果？

# php - 试图循环通过 html 下拉

> ID：14887421
> 
> 赞同：2
> 
> 时间：2013-02-15T02:16:14.283
> 
> 标签：php, html

这里有一些这样的问题，但我想要做的是遍历每个选项元素并将它们回显出来，到目前为止，它只是回显所选项目，理想情况下我将遍历每个项目。

```
<?php
if (isset($_POST['submit'])) {
    $st_campaigns = $_POST['campaigns'];

    foreach ($st_campaigns as $st) {
        echo $st;
    }
}
?>

<form action="" method="post">
<select name="campaigns[]" id="campaigns[]" size="15" multiple="multiple"   style="width:150">
<option>item</option>
<option>item1</option>
<option>item</option>
<option>item</option>
<option>item</option>
<option>item</option>
<option>item</option>
</select>
<input type="submit" name="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:18:37.450

只有选定的项目与表单数据一起提交。如果您想要所有可能的选择项，您需要将它们放在一个数组中，然后您可以使用该数组来填充/生成选择字段，并在提交表单后出于任何原因循环它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T02:52:44.800

您将需要一种解决方法。

1.  在名为“options”的表单中添加一个隐藏字段（例如）

2.  提交时，使用 Javascript 循环遍历项目并生成一个字符串。逗号分隔或 JSON 可能是更好的选择。因此，无论是否选择所有选项都将在字符串中。

3.  将隐藏字段（选项）的值更改为 JSON 字符串

4.  当表单提交时，使用 php 读取`$_POST['options']`而不是`campaigns`，将 JSON 更改为数组（或根据您的选择拆分 csv）并循环遍历它。

您始终可以通过首先循环`campaigns`并创建键值然后使用 php`array_key_exists`查看键是否存在或者`in_array`您是否只是将所选项目添加到数组来匹配所选项目。

# python - 将 perl soap 应用程序移植到 python

> ID：14887422
> 
> 赞同：3
> 
> 时间：2013-02-15T02:16:22.770
> 
> 标签：python, perl, soap

我目前正在尝试将我的 Perl SOAP 通信应用程序移植到 Python 等价物，但似乎无法克服`urllib2`通过`suds`. 我的工作 perl 肥皂脚本是：

```
use myStub;
$ENV{HTTPS_PKCS12_FILE} = '/path/to/certificate';
$ENV{HTTPS_PKCS12_PASSWORD} = 'password';
my $client = new myStub;
my $output = $client->foo('test', 'something');
print $output 
```

作为 .pm 的一部分`myStub`创建的 .pm 在哪里？`stubmaker.pl``SOAP::Lite`

我设置我的python脚本如下：

```
from suds.client import Client
import os

os.environ['HTTPS_PKCS12_FILE'] = '/path/to/certificate'
os.environ['HTTPS_PKCS12_PASSWORD'] = 'password'
client = Client('file:WSDL')
output = client.service.foo('test', 'something')
print output 
```

这给了我：

```
File "test.py", line 12, in <module>
    output = client.service.foo('test', 'something')
  File "/usr/lib/python2.6/site-packages/suds/client.py", line 542, in __call__
    return client.invoke(args, kwargs)
  File "/usr/lib/python2.6/site-packages/suds/client.py", line 602, in invoke
    result = self.send(soapenv)
  File "/usr/lib/python2.6/site-packages/suds/client.py", line 643, in send
    reply = transport.send(request)
  File "/usr/lib/python2.6/site-packages/suds/transport/https.py", line 64, in send
    return  HttpTransport.send(self, request)
  File "/usr/lib/python2.6/site-packages/suds/transport/http.py", line 77, in send
    fp = self.u2open(u2request)
  File "/usr/lib/python2.6/site-packages/suds/transport/http.py", line 118, in u2open
    return url.open(u2request, timeout=tm)
  File "/usr/lib64/python2.6/urllib2.py", line 391, in open
    response = self._open(req, data)
  File "/usr/lib64/python2.6/urllib2.py", line 409, in _open
    '_open', req)
  File "/usr/lib64/python2.6/urllib2.py", line 369, in _call_chain
    result = func(*args)
  File "/usr/lib64/python2.6/urllib2.py", line 1198, in https_open
    return self.do_open(httplib.HTTPSConnection, req)
  File "/usr/lib64/python2.6/urllib2.py", line 1165, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error [Errno 8] _ssl.c:490: EOF occurred in violation of protocol> 
```

客户端创建得`suds`很好，如果我打印出来，我会列出预期的方法等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T16:03:34.223

看起来`urllib2`无法与服务器通信。我怀疑`urllib2`是否注意`HTTPS_PKCS12_*`环境变量。我的猜测是那些特定于您正在使用的 Perl 库或 Perl 本身。`urllib2`根本不做任何 SSL 证书验证，如果你想要你最好使用[pycurl](http://pycurl.sourceforge.net/)。

这两个问题可能会为您指明正确的方向：

*   [带有证书的 https 泡沫](https://stackoverflow.com/questions/6277027/suds-over-https-with-cert)
*   [使用 Python 验证 SSL 证书](https://stackoverflow.com/questions/1087227/validate-ssl-certificates-with-python)

# jquery - 当其他元素进入视图时，将 CSS 类添加到 DOM 元素

> ID：14887424
> 
> 赞同：2
> 
> 时间：2013-02-15T02:16:50.040
> 
> 标签：jquery, html, css, responsive-design

这是一个现场演示：[http ://www.lazarogamio.com/sfgn/single_page](http://www.lazarogamio.com/sfgn/single_page)

我有一个粘性面板，当您开始向下滚动时它会固定，然后在页脚出现时停止。或者至少我愿意。您可以在演示中看到粘滞的一边越过页脚。

我尝试了多种方法，一次使用 jQuery 出现插件： http: [//morr.github.com/appear.html](http://morr.github.com/appear.html)。我写了这个：

```
$('footer').on('appear', 'aside', function() {
            $(this).removeClass('fixed_aside').addClass('bottom_fixed_aside');
   }); 
```

我创建了一个 .bottom_fixed_aside 类，然后使用 display:inline-block 使 side 元素粘在容器底部。

在朋友的帮助下，我也尝试了这个，它不依赖于 jQuery 出现插件：

```
$(document).scroll(function(){

    var windowHeight = $(document).height();
    var footerHeight = $(footer).height();
    var positionToReach = windowHeight - footerHeight;
    if( $(document).scrollTop() >= positionToReach ){
         $('aside').removeClass('fixed_aside').addClass('bottom_fixed_aside');
                } else {
         $('aside').removeClass('bottom_fixed_aside');
                }
   }
}); 
```

它也没有工作。我错过了什么很明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:25:31.920

[我在这里](http://aramk.com/javascript/floating-elements-on-screen-when-scrolling-past/)做了类似的事情。我认为您希望[offset()](http://api.jquery.com/offset/)确定元素相对于文档的位置。此外，`positionToReach`将通过`offset().top`页脚。

# c++ - 使用 Map 实现 Trie

> ID：14887433
> 
> 赞同：6
> 
> 时间：2013-02-15T02:18:44.060
> 
> 标签：c++, dictionary, data-structures, trie

我今天正在解决一个问题。但我被卡住了。我知道 trie 是如何工作的，但问题是我知道如何使用静态数组和类来实现它。今天在网上冲浪时，我读到有一种方法可以使用 stl::map 实现尝试。我今天尝试了，但我仍然不知道如何在 int 上插入元素。这种结构。

Edit1：我正在尝试解决这个问题：spoj.com/problems/TAP2012D 我想知道如何使用 edit2 将单词添加到 trie 中：我知道地图是如何工作的，我只是不知道带有地图的 trie作品。我想要知道尝试的人。

这是我到目前为止所做的

```
const int ALPH_SIZE = 26;
using namespace std;

struct trie{
    map<char,int> M;
    int x,y;
    trie();
};

trie T[1000000];

trie::trie()
{
    x=y=0;
}
int maximo;

void addtrie(string palabra)
{
    int tam=palabra.size();
    int pos=0;
    for(int i=0;i<tam;i++)
    {
        if(T[pos].M.find(palabra[i])==T[pos].M.end())
        {
            T[pos].M[palabra[i]]=new trie();
            T[pos].M[palabra[i]]=
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-21T20:32:33.547

trie 节点存储现有输出字符的映射和指示该节点是否对应于 trie 中的单词的标志。

```
struct Node
{   map<char, Node*> a;
    bool flag;

    Node() { flag = false; }
}; 
```

现在插入类似于您对静态数组所做的操作，不同之处在于您在此处使用地图。

```
void insert(Node *x, string s)
{   for(int i = 0; i < s.size(); i++)
    {   if(x->a.count(s[i]) == 0)
        /* no outgoing edge with label = s[i] so make one */
        {   x->a[ s[i] ] = new Node;
        }
        x = x->a[ s[i] ];
    }
    x->flag = true; /* new word */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-18T15:21:55.717

在我看来，使用 unordered_map 更好。

```
 struct TrieNode {
        char c;
        unordered_map<char, TrieNode*>links;
        bool end;
    };

    TrieNode* insert(TrieNode* root, string word) {
        TrieNode* current  = root;

        for (auto it: word) {
           if (current->links.find(it) == current->links.end()) {
           TrieNode* node = new TrieNode(); // possible memory leak?
           node->c = it;
           node->links = {};
           node->end = false;

           current->links[it] = node;
           }

        current = current->links[it];
       }

    current->end = true;
    return root;
    }; 
```

当然，使用 new 运算符创建的 TrieNode 可能存在内存泄漏问题。也许某种树遍历（基于 DFS）以自下而上的方式访问所有节点并删除它们，可以帮助避免内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-18T02:53:16.850

使用地图的问题是你失去了位置。除了缩小可能的键之外，拥有一个实际的字母表并没有任何好处。

一次解析一个字符会在内存中跳跃。如果字符串一次解析三个字符，那么对于给定字符串的序列加载以及在其保留在缓存中时廉价加载其邻居的机会都会有更高的局部性。

这也利用了一些后来的语言特性，其中大部分可以通过手动加载 char<256> 轻松完成。可能还有更好的方法来做到这一点。

```
#include <map>
#include <array>
#include <string>
#include <cstddef>
#include <cstdint>
#include <iostream>

// MAP
template<char ... Args>
class mkmap;

// Walk the tuple
template<char count, char tuple_sz, char tuple_cnt, char grab, char ... alpha>
class mkmap<count, tuple_sz, tuple_cnt, grab, alpha...> {
public:
    static constexpr void map(std::array<char, 256>& map) {
        map[grab] = count;
        mkmap<count, tuple_sz, tuple_cnt - 1, alpha...>::map(map);
    }
};

// Next tuple
template<char count, char tuple_sz, char grab, char ... alpha>
class mkmap<count, tuple_sz, 1, grab, alpha...> {
public:
    static constexpr void map(std::array<char, 256>& map) {
        map[grab] = count;;
        mkmap<count + 1, tuple_sz, tuple_sz, alpha...>::map(map);
    }
};

// End recursion
template<char count, char tuple_sz, char tuple_cnt>
class mkmap<count, tuple_sz, tuple_cnt> {
public:
    static constexpr void map(std::array<char, 256>& map) {
    }
};

template<int tuple_sz, char ... alpha>
class cvtmap {
public:
    constexpr cvtmap() : map{} {
        mkmap<1, tuple_sz, tuple_sz, alpha...>::map(map);
    }
    constexpr char operator[](char input) const {
        return map[input];
    }
    std::array<char, 256> map;
};

// UNMAP
template<char ... Args>
class mkunmap;

// Walk the tuple
template<char count, char tuple_sz, char tuple_cnt, char grab, char ... alpha>
class mkunmap<count, tuple_sz, tuple_cnt, grab, alpha...> {
public:
    static constexpr void map(std::array<std::array<char, tuple_sz>, 256>& map) {
        map[count][tuple_sz - tuple_cnt] = grab;
        mkunmap<count, tuple_sz, tuple_cnt - 1, alpha...>::map(map);
    }
};

// Next tuple
template<char count, char tuple_sz, char grab, char ... alpha>
class mkunmap<count, tuple_sz, 1, grab, alpha...> {
public:
    static constexpr void map(std::array<std::array<char, tuple_sz>, 256>& map) {
        map[count][tuple_sz - 1] = grab;;
        mkunmap<count + 1, tuple_sz, tuple_sz, alpha...>::map(map);
    }
};

// End recursion
template<char count, char tuple_sz, char tuple_cnt>
class mkunmap<count, tuple_sz, tuple_cnt> {
public:
    static constexpr void map(std::array<std::array<char, tuple_sz>, 256>& map) {
    }
};

template<int tuple_sz, char ... alpha>
class cvtunmap {
public:
    constexpr cvtunmap() : map{} {
        mkunmap<1, tuple_sz, tuple_sz, alpha...>::map(map);
    }
    constexpr std::array<char, tuple_sz> operator[](char input) const {
        return map[input];
    }
    std::array<std::array<char, tuple_sz>, 256> map;
};

template<int tuple_sz, char ... alpha>
class cvt
{
public:
    enum consts : char { SENTINAL = 0 };

    static constexpr int size() { return sizeof...(alpha) / tuple_sz + 1; }
    cvt(char c) : a{ map[c] } {
    }
    char to_char()
    {
        return unmap[a][0];
    }
    unsigned short value() const {
        return a;
    }
private:
    char a;
    static const cvtmap<tuple_sz, alpha...> map;
    static const cvtunmap<tuple_sz, alpha...> unmap;
};

template<int tuple_sz, char ... alpha>
const cvtmap<tuple_sz, alpha...> cvt<tuple_sz, alpha...>::map;

template<int tuple_sz, char ... alpha>
const cvtunmap<tuple_sz, alpha...> cvt<tuple_sz, alpha...>::unmap;

using ASCII_ignore_case = cvt <2,
    'a', 'A', 'b', 'B', 'c', 'C', 'd', 'D', 'e', 'E', 'f', 'F', 'g', 'G', 'h', 'H', 'i', 'I', 'j', 'J', 'k', 'K', 'l', 'L', 'm', 'M', 'n', 'N', 'o', 'O', 'p', 'P', 'q', 'Q', 'r', 'R', 's', 'S', 't', 'T', 'u', 'U', 'v', 'V', 'w', 'W', 'x', 'X', 'y', 'Y', 'z', 'Z'
>;

template <class alphabet>
class Node {
public:
    enum consts { SHIFT = 32 };
    static short make_key(alphabet a, alphabet b, alphabet c) {
        // max is Z (26) * 27 * 27 == 18954 which fits under SHRT_MAX (32767)
        return
            a.value() * SHIFT * SHIFT
            + b.value() * SHIFT
            + c.value();
    }
    static std::array<char, 3> to_string(short x) {
        char a = (x / (SHIFT * SHIFT)) & 0xFF;
        x -= a * SHIFT * SHIFT;
        char b = (x / SHIFT) &0xFF;
        x -= b * SHIFT;
        char c = x &0xFF;
        return { a,b,c };
    }
    Node* add(short key) {
        if (idx.contains(key)) {
            return idx[key];
        }
        Node* ret = new Node;
        idx[key] = ret;
        return ret;
    }
    static Node* sentinal() {
        static Node fixed;
        return &fixed;
    }
    void add_final(short key) {
        if (!idx.contains(key)) {
            idx[key] = sentinal();
        }
    }
    const Node* get(short key) const {
        auto it = idx.find(key);
        if (it != idx.end()) { // avoid creating nodes
            return it->second;
        }
        return 0;
    }
    bool is_final(short key) const {
        auto it = idx.find(key);
        if (it != idx.end()) { // avoid creating nodes
            return it->second == sentinal();
        }

        return false;
    }
    ~Node() = default;
private:
    std::map <short, Node*> idx;
};

template <class alphabet>
class TriTrie {
public:
    void add(std::string& str) {
        std::string::iterator i = str.begin();
        const std::string::iterator e = str.end();
        Node<alphabet>* where = &top;
        for (;;) {
            std::size_t len = e - i;
            alphabet a = alphabet::SENTINAL;
            alphabet b = alphabet::SENTINAL;
            alphabet c = alphabet::SENTINAL;
            switch (len)
            {
            default: [[likely]] {
                a = alphabet(*(i++));
                b = alphabet(*(i++));
                c = alphabet(*(i++));

                short key = Node<alphabet>::make_key(a,b,c);
                where = where->add(key);
            }
                   break;
            case 3:
                c = alphabet(*(i + 2));
                [[fallthrough]];
            case 2:
                b = alphabet(*(i + 1));
                [[fallthrough]];
            case 1:
                a = alphabet(*i);
                [[fallthrough]];
            case 0: {
                short key = Node<alphabet>::make_key(a, b, c);
                where->add_final(key);
                return;
            }
            }
        }
    }
    bool contains(std::string& str) const {
        std::string::iterator i = str.begin();
        const std::string::iterator e = str.end();
        const Node<alphabet>* where = &top;
        while (where) {
            std::size_t len = e - i;
            alphabet a = alphabet::SENTINAL;
            alphabet b = alphabet::SENTINAL;
            alphabet c = alphabet::SENTINAL;
            switch (len) {
                default: [[likely]] {
                    a = alphabet(*(i++));
                    b = alphabet(*(i++));
                    c = alphabet(*(i++));

                    short key = Node<alphabet>::make_key(a,b,c);
                    where = where->get(key);
                }
                    break;
                case 3:
                    c = alphabet(*(i + 2));
                    [[fallthrough]];
                case 2:
                    b = alphabet(*(i + 1));
                    [[fallthrough]];
                case 1:
                    a = alphabet(*i);
                    [[fallthrough]];
                case 0: {
                    short key = Node<alphabet>::make_key(a, b, c);
                    return where->is_final(key);
                }
            }
        }
        return false;
    }
private:
    Node<alphabet> top;
};

using ASCII_TriTrie = TriTrie<ASCII_ignore_case>;

int main()
{
    ASCII_TriTrie tt;

    for (std::string s : {
        "hello", "goodbye", "big", "little", "hi", "hit", "hitch", "him"
    }) {
        std::cout << s << ":" << std::endl;
        if (tt.contains(s)) {
            return -1;
        }
        tt.add(s);
        if (!tt.contains(s)) {
            return -2;
        }
    }

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-05T14:15:03.397

在我看来，我认为你也可以在添加元素之前加上一个检查。

```
 StrCheck(str); // check string is empty

    if (root == nullptr) // check root is nullptr
    {
        root = new Node<T>;
    }

void StrCheck(string str)
 {  
    if (str.empty())
    {
        throw exception("str is empty!");
    }
  } 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-02-15T02:45:18.027

将元素插入 stl::map 的正确方法应按以下方式完成

```
std::map<char,int> M;

  M.insert ( std::pair<char,int>('aaa',1) );
  M.insert ( std::pair<char,int>('bbb',2) ); 
```

# cmake - cmake中-D选项中的间距

> ID：14887438
> 
> 赞同：12
> 
> 时间：2013-02-15T02:19:10.833
> 
> 标签：cmake

`-D CMAKE_C_COMPILER`是我用来选择我的编译器的。但是，如果我有打开/关闭的 CMake 选项`USEIPHONEFLAG`，我需要这样做`-DUSEIPHONEFLAG=1`，`-D USEIPHONEFLAG=1`但不起作用。我想知道`-D`CMake 中的空间是如何工作的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-19T02:26:21.280

不幸的是，CMake 的命令行解析不是很一致或健壮。

这个问题可能取决于您传递参数的顺序。

在内部，CMake 对命令行参数进行两次迭代。它第一次寻找非缓存参数并跳过任何以`-D`. 任何不适合正确参数列表的内容都被假定为 CMakeLists.txt 文件（或目录，或 CMakeCache.txt）的路径。

它假设只有一条路径通过，并且没有做任何事情来验证该假设。问题就在这里。如果你通过了`-D Foo=1`，`-D`则被视为一个完整的参数并被跳过，并被`Foo=1`视为一条路径。

在通过 args 的第二次迭代中，它现在获取 via 给出的值`-D`，但在这次运行中，它正确处理`-D`. 所以它知道`-D Foo=1`设置`Foo`为`1`.

因此，命令行中路径的位置在这里非常重要。

```
cmake -D Foo=1 MyProject/CMakeLists.txt  # --> Works
cmake MyProject/CMakeLists.txt -D Foo=1  # --> Fails 
```

为了使事情进一步复杂化，您可以将空格括在引号中并让 CMake 解析它，但变量名随后包含空格并且在 CMakeLists 文件中不可用。

```
cmake MyProject/CMakeLists.txt "-D Foo=1"  # --> Defines the unusable var ${ Foo} 
```

另一个不一致的地方是其他命令行标志可以使用或不使用空格（例如`-G`），而其他命令行标志需要空格（例如`-E`）。

我自己的建议是始终避免在标志后添加空格，除非需要。我想总是最后通过路径也会有所帮助，尽管如果您不添加额外的空格，则不需要这样做。

# java - 从数组中查找给定元素的前驱

> ID：14887439
> 
> 赞同：2
> 
> 时间：2013-02-15T02:19:12.783
> 
> 标签：java, arrays, algorithm

如何从给定的数字数组中找到给定数字的前任？例如，如果给定数组包含 `-2,1,0,3`
且输入数字为`0`，则前驱为`-2`。

我写了以下代码：

```
public static int getPredecessor(int[] inpArr, int key) {
    int minDiff = key<=0 ? (key-inpArr[0]) : key;
    int predecessor = key;
    for(int i=0;i<inpArr.length;i++) {
        if(inpArr[i] < key && (key - inpArr[i])<=minDiff)
        {
            minDiff = key - inpArr[i];
            predecessor = inpArr[i];
        }   
    }
    return predecessor;
} 
```

我所做的基本上是跟踪提供的数字与数组中每个数字之间的最小差异；每当遇到最小差异时，数组中的那个特定数字就被存储为前任。如果最终的 return 语句将返回与输入数字相同的数字，那么这意味着在给定的数组中没有找到前任。

**我的问题是：**
可以以任何方式优化代码吗？它以 O(n) 时间和 O(1) 空间复杂度运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T02:38:01.780

对于未排序数组的单个查询（如示例数组），O(N) 时间是可以实现的最佳时间，因为不可避免地必须与数组中的每个元素进行比较。

首先对数组进行排序将花费 O(N log N) 时间，但是，如果需要对数组进行许多查询，则每个查询都可以通过二进制搜索在 O(log N) 时间内完成。因此，如果有足够的查询，查询的平均成本可能低于 O(N)。

或者，如果期望许多查询使用相同的小（ish）键值集，则使用例如哈希表来记忆每个键的结果，最终将在每次查询时提供平均 O(1) 性能O(N) 空间的成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:38:05.610

上面的代码不适用于 inpArr=[-5,-2] 和 key=-4, inpArr=[-5,-2,-3], key=+1 等情况。于是改正了。这是更正后的代码。

```
public static int getPredecessorv2(int[] inpArr, int key) {
    int minDiff = Math.abs(key);
    int pred = key;
    if(inpArr[0] < key) {
        minDiff = key - inpArr[0];
        pred = inpArr[0];
    } 
    for(int i=0;i<inpArr.length;i++) {
        if(inpArr[i] < key && (key - inpArr[i])<=minDiff)
        {
            minDiff = key - inpArr[i];
            pred = inpArr[i];
        }   
    }
    return pred;
} 
```

# arrays - Wordpress update_post_meta 和数组值问题

> ID：14887442
> 
> 赞同：1
> 
> 时间：2013-02-15T02:19:59.903
> 
> 标签：arrays, wordpress, metadata, frontend

我正在研究允许用户从前端发布/编辑/管理帖子的功能，但我坚持使用数组更新。

```
update_post_meta($post_id, 'lapp_appmenu',$_POST['appmenu']); 
```

此方法适用于单个值，但在处理 Array 时失败（提交时它只是删除先前设置的值）。

先感谢您，

尼古拉

编辑：

该数组是无限的项目列表。

```
<?php
                    $i = 0;
                    if ($appmenu) {
                        foreach($appmenu as $row) { ?>
                            <li><span class="sort hndle">|||</span>
                                <input type="text" name="lapp_appmenu[<?php echo $i; ?>]" id="lapp_appmenu" value="<?php echo $row; ?>" size="30" />
                                <a class="repeatable-remove button" href="#">-</a></li>
                        <?php

                        $i++;
                        }
                    } else { ?>

                        <li><span class="sort hndle">|||</span>
                                    <input type="text" name="lapp_appmenu[<?php echo $i; ?>]" id="lapp_appmenu" value="" size="30" />
                                    <a class="repeatable-remove button" href="#">-</a></li>

                    <?php   }?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:15:36.380

Wordpress 将元值存储为字符串。当您传递`update_post_meta`一个数组时，它会自动将其转换为字符串。`unserialize`当您尝试读取数据时，您需要做的是。

[http://codex.wordpress.org/Function_Reference/update_post_meta](http://codex.wordpress.org/Function_Reference/update_post_meta)（说明将值转换为字符串）

[http://php.net/manual/en/function.unserialize.php](http://php.net/manual/en/function.unserialize.php)

# php - php登录pdo更新

> ID：14887447
> 
> 赞同：1
> 
> 时间：2013-02-15T02:21:11.220
> 
> 标签：php, mysql, pdo

所以我试图转移到 PDO 连接，但我目前真的被卡住了。现在需要一些帮助。包括 - 我的 login.php 和我的类文件。我也知道 MD5 根本不安全，正在修复它。谢谢你。

```
if(isset($_POST['submit'])) {

  $object = new Login();
  $object->verifyDatabase();

  if($object->isLoggedIn())
     header('location: index.php');
  else
    $object->showErrors();

}
$token = $_SESSION['token'] = md5(uniqid(mt_rand(),true));
?>
<form method="post" action="<?php echo $_SERVER['PHP_SELF'];?>">
    Username: <input type="text" name="username"/>
    Password: <input type="password" name="password"/>
    <input type="hidden" name="token" value="<?php echo $token;?>" />
    <input type="submit" name="submit" value="Login"/> 
```

```
<?php
include_once('class.mysql.php');

class Login {

  private $_id;
  private $_username;
  private $_password;
  private $_passmd5;

  private $_errors;
  private $_access;
  private $_login;
  private $_token;
  private $db;

  public function __construct() {
    $this->_errors = array();
    $this->_login  = isset($_POST['login'])? 1 : 0;
    $this->_access = 0;
    $this->_token  = $_POST['token'];

    $this->_id       = 0;
    $this->_username = ($this->_login)? $this->filter($_POST['username']) : $_SESSION['username'];
    $this->_password = ($this->_login)? $this->filter($_POST['password']) : '';
    $this->_passmd5  = ($this->_login)? md5($this->_password) : $_SESSION['password'];
    $this->db = new Connection();
    $this->db = $this->db->dbConnect();
  }

  public function isLoggedIn() {
    ($this->_login)? $this->verifyPost() : $this->verifySession();

    return $this->_access;
  }

  public function filter($var) {
    return preg_replace('/[^a-zA-Z0-9]/','',$var);
  }

  public function verifyPost() {
    try {
      if(!$this->isTokenValid())
         throw new Exception('Invalid Form Submission');

      if(!$this->isDataValid())
         throw new Exception('Invalid Form Data');

      if(!$this->verifyDatabase())
         throw new Exception('Invalid Username/Password');

    $this->_access = 1;
    $this->registerSession();
    }
    catch(Exception $e) {
      $this->_errors[] = $e->getMessage();
    }
  }

  public function verifySession() {
    if($this->sessionExist() && $this->verifyDatabase())
       $this->_access = 1;
  }
  /////Old verifyDatabase/////
  ///////////////////////////////
  //public function verifyDatabase() {

  //mysql_connect("localhost", "root", "") or die(mysql_error());
  //mysql_select_db("example") or die(mysql_error());

  //$data = mysql_query("SELECT ID FROM users WHERE username = '{$this->_username}' AND password = '{$this->_passmd5}'");

  //if(mysql_num_rows($data))
  //  {
  //    list($this->_id) = @array_values(mysql_fetch_assoc($data));
  //    return true;
  //  }
  //else
  //  { return false; }
  //}

  public function verifyDatabase() {
        $st = $this->db->prepare("SELECT * FROM users WHERE username='{$this->_username}' AND password='{$this->_password}'");
        $st->bindParam(1, $this->_username);
        $st->bindParam(2, $this->_password);
        $st->execute();

        if($st->rowCount() == 1) {
            echo "User verified";
        } else {
            echo "Incorrect username or password";
        }
  }

  public function isDataValid() {
    return (preg_match('/^[a-zA-Z0-9]{5,12}$/',$this->_username) && preg_match('/^[a-zA-Z0-9]{5,12}$/',$this->_password))? 1 : 0;
  }

  public function isTokenValid() {
    return (!isset($_SESSION['token']) || $this->_token != $_SESSION['token'])? 0 : 1;
  }

  public function registerSession() {
    $_SESSION['ID'] = $this->_id;
    $_SESSION['username'] = $this->_username;
    $_SESSION['password'] = $this->_passmd5;
  }

  public function sessionExist() {
    return (isset($_SESSION['username']) && isset($_SESSION['password']))? 1 : 0;
  }

  public function showErrors() {
    echo "<h3>Errors</h3>";

    foreach($this->_errors as $key=>$value)
      echo $value."<br>";
  }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:05:17.457

带参数的查询语法不正确。如果您使用的是位置参数，那么您需要编写如下查询：

```
SELECT * FROM users WHERE username=? AND password=? 
```

# excel - Excel VBA脚本将两个单元格内容合并为一个

> ID：14887448
> 
> 赞同：-3
> 
> 时间：2013-02-15T02:21:16.337
> 
> 标签：excel, vba

```
Sub Concat()

   Do While ActiveCell <> "" 

      'The rows are filtered to display only "London"
      'The changes required are for "London" only

      If ActiveCell.Offset(0,0) = "London" Then
        ActiveCell.Offset(0, 0).FormulaR1C1 = _
           ActiveCell.Offset(0, 0) & " " & ActiveCell.Offset(0, 1)

        ActiveCell.Offset(0, 1) = ""
      End If
      ActiveCell.Offset(1, 0).Select
   Loop

End Sub 
```

我有接近 13500 行。这行不通。我看不到任何明显的变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:34:33.273

```
Sub Concat()

   Do While ActiveCell <> "" 

      With ActiveCell
         If .Value = "London" Then
             .Value = .Value & .Offset(0, 1).Value
             .Offset(0, 1).Value = ""
         End If
      End With

      ActiveCell.Offset(1, 0).Select

    Loop

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:27:43.667

您可以使用`for each`语句编写一个循环，以遍历工作表的 UsedRange 中的所有行。对于每一行，检查该行第一列中的值是否为“London”，如果是，则使用 column1 和 column2 的组合覆盖该列的内容。

然后只需将 column3 中的值复制到 column2 并使用以下命令清除 column3 的值`ClearContents`：

```
Sub Concat()

    'Loop through all the rows
    For Each Row In ActiveSheet.UsedRange.Rows

    'Look at the cell in the first column of the current row
    'If value is "London" concatinate column 1 and 2 and store in column1
    'Note, the check for "London" is an exact, case sensative check!

        If Row.Columns(1) = "London" Then
            Row.Columns(1) = Row.Columns(1) & " " & Row.Columns(2)
            Row.Columns(2) = Row.Columns(3)
            Row.Columns(3).ClearContents
        End If
    Next Row
End Sub 
```

# php - 如何将 PHP 返回的输出插入 HTML ? （我正在使用 WordPress）

> ID：14887451
> 
> 赞同：2
> 
> 时间：2013-02-15T02:21:32.220
> 
> 标签：php, javascript, wordpress

我创建了一个快速的 Wordpress 短代码，这样我的作者就可以轻松地在帖子的可视化编辑器中设置字幕样式：

```
function subtitle( $atts, $content = null ) {
    return '<p class="subtitle">' . $content . '</p>';
} 
```

我想将此输出移动到文档中指定的其他位置，例如：

```
<div id="output_here_please"></div>

<?php the_content(); /* It is returned here wherever they place the shortcode */ ?> 
```

做这个的最好方式是什么？是否有要使用的 PHP 或 WordPress 函数，或者我应该创建一个 javascript 来替换 innerHTML（我试过这个，但不知道如何在页面加载后插入它）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T02:24:12.530

如果您的函数被称为 subtitle ，那么他们可以将其插入：

```
<div id="output_here_please">
  <?php subtitle("value", "This is some sample content"); ?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T02:41:26.933

快速而肮脏的做法是声明一个全局变量——比如说`$subtitle_content`，并使用它来临时存储您希望在*其他地方*显示的 html 片段。

```
function subtitle( $atts, $content = null ) {
    $GLOBALS["subtitle_content"] = '<p class="subtitle">' . $content . '</p>';
    return "";
}

function the_content(){
    echo $GLOBALS["subtitle_content"];
    /* unset $GLOBALS["subtitle_content"]; */
} 
```

一旦它变得不必要，您可能希望取消定义该变量，如上面注释掉的代码中所写。

[`$GLOBAL`](http://php.net/manual/en/reserved.variables.globals.php)供您参考的[文档。](http://php.net/manual/en/reserved.variables.globals.php)

笔记：

*   您可能希望为您的函数使用更具体的名称，以避免与其他函数发生名称冲突（尽管如果发生这种情况，PHP 会突然告诉您）。
*   不要为此使用 javascript，这是严格的服务器端美食。

# spring - spring 3.1.2 无法使用 jdbcdaosupport 自动装配数据源

> ID：14887454
> 
> 赞同：1
> 
> 时间：2013-02-15T02:21:42.053
> 
> 标签：spring, jdbc

我正在尝试使用带有 spring 3.1.2.RELEASE 的 spring mvc 创建一个 Web 应用程序，并且在尝试访问应用程序时出现错误。

该应用程序在 tomcat 7 上运行。

道：

```
@Repository
public class CustomerDao extends JdbcDaoSupport{
    @Autowired
    public CustomerDao(DataSource dataSource){
        super();
        setDataSource(dataSource);
    }
    public void teste(){
        System.out.println("teste");
    }
} 
```

Spring MVC Servlet

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:xsi="http://www.w3.org  /2001/XMLSchema-instance"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<mvc:annotation-driven />
<context:component-scan base-package="org.samples.example1" />

<mvc:resources mapping="/resources/**" location="/resources/" />

<bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
          <property name="prefix">
              <value>/WEB-INF/views/</value>
           </property>
          <property name="suffix">
             <value>.jsp</value>
          </property>
    </bean>

</beans> 
```

应用环境：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:annotation-config />
    <context:component-scan base-package="org.samples.example1" />

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/exemplo" />
        <property name="username" value="root" />
        <property name="password" value="root"/>
    </bean>

    <bean id="customerDao" class="org.samples.example1.repository.CustomerDao">
        <constructor-arg ref="dataSource" />
    </bean>

</beans> 
```

有什么问题？

错误：

根本原因：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [javax.sql.DataSource] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:26:14.237

原因可能是您的 Web 应用程序上下文的这一行（针对 DispatcherServlet 注册的）：

```
<context:component-scan base-package="org.samples.example1" /> 
```

这将尝试创建 CustomerDao 实例的实例，并且 Datasource 在 Web 应用程序上下文级别不可用。

相反，通过这种方式将 Web 上下文中的组件扫描限制为 @Controllers：

```
<context:component-scan base-package="org.samples.example1" >
    <context:include-filter expression="org.springframework.stereotype.Controller" type="annotation" />
</context:component-scan> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:32:22.893

我意识到我忘记在文件 web.xml 上添加文件 applicationContext.xml 的映射

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">

    <display-name>Exemplo 01</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>exemplo1</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>    
    </servlet>

    <servlet-mapping>
        <servlet-name>exemplo1</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

web.xml 上缺少下面的标签

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

即使有了这个改变，我也不得不遵循 Biju 的建议来改变 web 控制器 xml：

```
<!-- The controllers are autodetected POJOs labeled with the @Controller annotation. -->
<context:component-scan base-package="org.samples.example1" use-default-filters="false">
    <context:include-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
</context:component-scan> 
```

在 applicationContext.xml 我让：

```
<context:component-scan base-package="org.samples.example1" /> 
```

现在应用程序正在运行:)

# bash - 如何在shell脚本后台读取文件描述符

> ID：14887455
> 
> 赞同：0
> 
> 时间：2013-02-15T02:21:43.280
> 
> 标签：bash, shell, file-descriptor

我的问题是当我从 bash 文件中读取时`/dev/fd/3`会`cat`挂起。我希望有一种方法可以在后台从文件描述符中读取，这样我就可以继续阅读其余的 shell 代码。

```
#hangs here. pipe file descriptor 3 to yummy-stdin.pl
cat /dev/fd/3 | yummy-stdin.pl

./this-shall-never-run.pl 
```

我试过了：

```
cat /dev/fd/3 | yummy-stdin.pl & this-shall-never-run.pl; 
```

上面的问题是在处理 this-shall-never-run.pl 时，它将停止从文件描述符中读取。完成后，它将继续阅读……但这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:36:00.543

尝试这种形式的 bash 重定向，并将其标记为后台任务：

```
yummy-stdin.pl $(< /dev/fd/3) &
./this-shall-never-run.pl 
```

# windows-phone-8 - Microsoft 是否提供任何方法来获取 Windows phone 8 下正在运行的进程列表？

> ID：14887461
> 
> 赞同：1
> 
> 时间：2013-02-15T02:22:51.813
> 
> 标签：windows-phone-8

我知道在 Windows Phone 7 之前无法获得正在运行的进程列表，并且在某种程度上我的问题类似于[Stack Overflow 上的这个问题](https://stackoverflow.com/questions/8699050/how-to-list-running-processes-in-windows-phone-7)。但是，我只是碰巧在[windowsphonehacker](http://windowsphonehacker.com/articles/exclusive_wph_taskviewer_released_video-05-14-11)上查看了一个链接，该链接显示了 Windows phone 上正在运行的进程列表，我不太确定我知道他是如何做到这一点的。如果不控制它们，Windows 8 是否提供任何方法来获取正在运行的进程列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:19:25.217

Windows Phone 8 上没有支持的 API。

（从外观上看，进程查看器使用了一些不受支持的 API - 如果您曾经将包含它们的应用程序提交到应用商店，这些 API 会被阻止）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:37:13.783

> 自然，这将需要开发人员解锁的设备。

所以，当然，你可以调用*verboten* api函数。您只需对手机上可用的进行逆向工程。有点典型的这类博客文章，他们从不告诉你你真正想知道什么。您可能可以通过从手机上复制操作系统 DLL 并在其上运行 Dumpbin.exe /exports 来达到目的。

# jquery - 单击时，隐藏 div 并删除所需的属性

> ID：14887462
> 
> 赞同：7
> 
> 时间：2013-02-15T02:23:20.877
> 
> 标签：jquery, html, input, attributes

我有一个可以出现在不同页面上的表单，并且根据情况，这些字段并不总是必需的。

我有隐藏 div 的代码，但不再需要输入字段。使用 HTML5 必需属性。无法使代码正常工作。代码如下：

```
$('#detailssame').click(function() {
    if($(this).is(':checked')) {
        $(\"#detailssamehide\").hide();
    } else {
        $(\"#detailssamehide\").show();
    }               
});
$('.fullboxform input[type=text], .fullboxform select').each(function() {
            $(this).removeAttr('required');
}); 
```

非常感谢所有帮助。

原来上面的代码确实可以正常工作，但可以使用 prop 提供替代答案

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T02:32:20.430

尝试使用[prop()](http://api.jquery.com/prop/)函数来设置 HTML5 属性。

```
$(function () {
    $('#detailssame').click(function() {
        var checked = $(this).is(':checked');
        if(checked) {
            $("#detailssamehide").hide();
        } else {
            $("#detailssamehide").show();
        }     
        $('.fullboxform input[type=text], .fullboxform select').each(function() {
            $(this).prop('required', !checked);
        });
    });
}); 
```

[http://jsfiddle.net/ThsXU/](http://jsfiddle.net/ThsXU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T02:37:00.203

删除反斜杠足以让我以所需的效果运行您的代码。

# java - 从超类数组访问子类字段？

> ID：14887463
> 
> 赞同：3
> 
> 时间：2013-02-15T02:23:44.213
> 
> 标签：java, arrays, polymorphism

我最近才开始学习 java，所以我在理解我认为是多态性问题时遇到了一些麻烦。我正在尝试编写一个国际象棋游戏，所以我有一个超类数组，`GamePiece`子类`PawnPiece`扩展了该数组。我在两个类中都有一个方法，`MovePiece()`它改变了一块的位置。当我使用 时`MovePiece()`，会更改 的位置值`PawnPiece`，但是当我尝试在我的主代码中调用位置时，它给了我“GamePiece”的未更改位置。这是我的一些代码：

```
public class GamePiece {
    int position;

    //Constructor
    public GamePiece(int x){
       position=x;
    }
    public void MovePiece(int positionOfMove){};
}

public class PawnPiece extends GamePiece{
    int positionPawn;

    //Subclass Constructor
    public PawnPiece(int x){
        super(x);
    }

    public void MovePiece(int positionOfMovePawn){
       positionPawn=x;
}

public classChessMain{
    public static void main(String[] arg){
        GamePiece[] allPieces = new GamePiece[32];
        int startPositionPawn = 9;     //Arbitrary#
        allPieces[8]=new PawnPiece(int startPositionPawn); //index is arbitrary
        int playerMove = 5;     //Arbitrary#
        allPieces[8].MovePiece(playerMove);
    }
} 
```

最后一行给了我初始位置（在这种情况下为 9），但我知道如果我可以访问 的位置`PawnPiece`，它会给我 5。对所有编码向导有什么帮助吗？我真的很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T02:33:20.773

几个问题：

1.  类`GamePiece`和方法`MovePiece`应该是抽象的。这样，您将强制选择成为 a 的任何子类`GamePiece`实现其自己的`MovePiece`方法。
2.  您将位置存储在两个地方：

    *   你`int position`有`GamePiece`
    *   你有`int positionPawn`在`PawnPiece`.

    您可能只想要其中之一：摆脱`positionPawn`in`PawnPiece`并使用`position`in `GamePiece`。

3.  （可选）Java 约定是让方法名称以小写字母开头：重命名`MovePiece`为`movePiece`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T02:32:22.490

从给出的代码中，我可以猜到在 PawnPiece 中您正在更新变量**positionPawn**，然后检查变量**position**。所以你写错地方了。

# ruby - 通过迭代生成浮点数

> ID：14887464
> 
> 赞同：0
> 
> 时间：2013-02-15T02:23:46.200
> 
> 标签：ruby

我想生成`1.1`, `2.2`, `3.3`, ... 但我能想出的唯一方法是：

```
100.times do |i|
  ary << "#{i}.#{i}".to_f
end 
```

有没有更优雅或更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:32:29.193

做事总是有不同的方式，但我认为你所拥有的一切都很好。

# git - 用于 Web 部署的 Git 与 FTP

> ID：14887470
> 
> 赞同：15
> 
> 时间：2013-02-15T02:24:59.273
> 
> 标签：git, ftp, web-deployment, web-deployment-project

我知道 git 的用途以及如何使用它，（一点点）但有一个概念我仍然不完全理解。我最近听到很多 web 开发人员说他们在每个 web 项目中都使用 git，即使他们没有合作，他们只是使用 git 作为 FTP 的替代品，实际上他们声称 FTP 是上传网站的一种旧方法。

我的问题是，我如何使用 git 来上传我的网站而无需支付诸如 beanstalk 之类的服务？

FTP 真的被认为是一项古老的技术，我们应该使用 git 吗？

非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T02:32:33.690

有关如何将 Git 存储库部署到服务器的说明，请参阅以下链接：

*   [使用 git 部署站点](https://gist.github.com/oodavid/1809044)
*   [如何从 GitHub 自动部署代码](http://writing.markchristian.org/2011/03/10/how-to-deploy-your-code-from-github-automatically.html)
*   [以 Web 为中心的 Git 工作流程](http://joemaller.com/990/a-web-focused-git-workflow/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-15T02:39:43.950

使用*您最喜欢的*版本控制是部署任何东西的唯一明智方式。

Git 不仅是关于协作和分布式 VCS，它还是一个无服务器 VCS（根据定义）——因此您可以从您的开发机器部署到您的部署目标。

总结一下何时正确设置以部署您的更改非常简单：

```
git push hub master 
```

更多信息[以 Web 为中心的 Git 工作流程](http://joemaller.com/990/a-web-focused-git-workflow/)和[使用 Git 进行部署](http://danbarber.me/using-git-for-deployment/)

我不打算回答这个问题的主观部分。我不赞成使用 FTP 的原因有很多——但只要您了解该技术的局限性，它就是一种有效的文件传输方式。

但是，我会说您绝对必须在部署策略中使用版本控制。

# c++ - 使用两个链表

> ID：14887477
> 
> 赞同：0
> 
> 时间：2013-02-15T02:25:32.570
> 
> 标签：c++, pointers, error-handling, operator-overloading

我需要创建两个单独的链表，然后比较它们。但是，当我尝试为构造函数创建具有相同运算符重载的第二个列表时，出现错误：

“多项式2* 类型的值不能用于初始化多项式* 类型的实体”

这是我的这些部分的代码：

标题：

```
#include <iostream>
#include <string>

using namespace std; 

struct polynomial
{ 
    polynomial();
    polynomial(string newCoefficient, string newPower, polynomial *nextPtr);
    string coefficient;
    string power;
    polynomial *next; 
};

struct polynomial2
{ 
    polynomial2();
    polynomial2(string newCoefficient2, string newPower2, polynomial2 *nextPtr2);
    string coefficient2;
    string power2;
    polynomial *next2; 
};

class linkedList
{
public:
    linkedList();
    void callFunctions();
private:
    polynomial *head;
    polynomial2 *head2;
    void makeList(polynomial *head, polynomial2 *head2);
    void showList(polynomial *head);
    void compareNodes(polynomial *head, polynomial2 *head2);
};

#endif
/* defined(__Assignment3__Polynomial__) */ 
```

.CPP 代码：

```
linkedList::linkedList()
{
    head = 0; 
};

polynomial::polynomial()
{
    coefficient = " "; 
    power = " "; 
    next = NULL;
};

polynomial2::polynomial2()
{
    coefficient2 = " "; 
    power2 = " "; 
    next2 = NULL
};

polynomial::polynomial(string newCoefficient, string newPower, polynomial *nextPtr )
    :
coefficient(newCoefficient),
    power(newPower), 
    next(nextPtr) 

{}

polynomial2::polynomial2(string newCoefficient2, string newPower2, polynomial2 *nextPtr2)
    :
coefficient2(newCoefficient2),
    power2(newPower2), 
    next2(nextPtr2)

{} 
```

错误出现在 .cpp 文件的最后一行“next2(nextPtr2)”。“nextPtr2”有下划线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T02:27:32.613

在您的 polynomial2 定义中，您的意思是说：

```
polynomial2 *next2; 
```

代替

```
polynomial *next2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T02:33:00.023

暂时把错误编译一下，我想你可能是在找错误的树。

这里的关键是您要比较两个本质上具有相同数据类型的列表。

我有一种强烈的感觉，你实际上并不想要两个单独的列表数据类型——你只想要一个。

所以你真的应该摆脱`polynomial2`并这样做：

```
polynomial *list1;
polynomial *list2; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T02:44:15.410

而且，既然您已经在使用 stl，那么不使用 std::list<> 的原因是什么？

```
struct polynomial
{ 
    polynomial()
      :coefficient(" "), power(" ") {}
    polynomial(string newCoefficient, string newPower)
      :coefficient(newCoefficient), power(newPower) {}
    string coefficient;
    string power;
}; 
```

进而

```
list<polynomial> list1; 
```

如果多项式上有相等运算符，则可以比较列表是否相等。并且可能还会做您需要做的所有其他事情。除非你得到的任务不允许使用 std::list，我猜它可能会这样。

# php - 如何将表格收件箱与表格电话簿联系起来？

> ID：14887479
> 
> 赞同：-3
> 
> 时间：2013-02-15T02:25:50.873
> 
> 标签：php, mysql, sms, inbox

我的办公室项目有问题

我的桌子

tbl_phonebook
号码名称
0814432 ahmad

tbl_inbox
SenderNumb text
0814432 coba coba
0942042 sekalian

如何显示收件箱表格中的数据 如果收件箱中的号码与电话簿表格中的号码相同，则在收件箱中显示姓名和号码 如果没有/与电话簿表格中的号码不同，则显示原始号码发件人

tq 之前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T02:33:59.793

我不完全确定我理解你的问题。我想你想用它`LEFT JOIN`来查看电话簿表中是否存在记录。

也许用于`IFNULL`显示姓名或发件人号码：

```
SELECT i.sendernumb,
    IFNULL(p.name,i.sendernumb) name,
    i.text text
FROM tbl_inbox i
    LEFT JOIN tbl_phonebook p ON i.SenderNumb = p.number 
```

# java - 在Java中匹配两个坐标

> ID：14887489
> 
> 赞同：0
> 
> 时间：2013-02-15T02:27:10.543
> 
> 标签：java, while-loop, compare, java.util.scanner

我有这个程序，我正在读取一行 x 和 y 坐标，并且必须找到最长的共线点线。我正在读取它们并将所有 xCoordinates 存储在 ArrayList 中，并将所有 yCoordinates 存储在另一个列表中。我需要比较斜率并打印出最长的线。我计算了斜率，但不知道如何将它们相互比较。这是我到目前为止所拥有的：

```
import java.util.ArrayList;
import java.util.Scanner;

public class Main {

    /**
     * @param args
     */
    public static void main(String[] args) {

        Scanner scanner = new Scanner(System.in);
        ArrayList<Double> list = new ArrayList<Double>();
        ArrayList<Double> xCoord = new ArrayList<Double>();
        ArrayList<Double> yCoord = new ArrayList<Double>();
        //      double xCoord[] = null;
        //      double yCoord[] = null;
        int i = 0;
        int count = 0; 
        double slope = 0;
        double slope2 = 0;

        while(scanner.hasNext()) {
            //grabs x and y coordinate
            xCoord.add(scanner.nextDouble());
            yCoord.add(scanner.nextDouble());

            //formatting
            if(i == 0) {
                System.out.println(" X  Y");
                System.out.println(" -  -");
            }
            System.out.print(xCoord.get(i) + " ");
            System.out.print(yCoord.get(i));
            System.out.print("\n");

            //ending case
            if((i > 0) && (xCoord.get(i).equals(xCoord.get(i-1)) && yCoord.get(i).equals(yCoord.get(i-1)))) {
                System.out.println("Hey, they matched");
                break;
            }

            if(i > 0) {
                slope = (xCoord.get(i-1) - xCoord.get(i))/(yCoord.get(i-1) - yCoord.get(i));
                System.out.println("Slope: " + slope);
            }

            i+=1;
        }

    }

} 
```

当您获得两个相同的 x,y 坐标时，程序终止（我有这个工作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:38:37.117

这是你的代码，我做了一些小的（？）修改，还添加了一些新代码来获得一条线上的最长点

```
import java.util.ArrayList;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Scanner;
import java.util.TreeMap;
public class CollinearPoints {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        List<Coordinate> coordinates = new ArrayList<Coordinate>();
        List<Slope> slopes = new ArrayList<Slope>();
        int i = 0;
        while (scanner.hasNext()) {
            // grabs x and y coordinate
            Coordinate coordinate = new Coordinate(scanner.nextDouble(), scanner.nextDouble());

            // formatting
            if (i == 0) {
                System.out.println(" X  Y");
                System.out.println(" -  -");
            }
            System.out.print(coordinate.getX() + " ");
            System.out.print(coordinate.getY());
            System.out.print("\n");

            // ending case
            if ((i > 0)
                    && (coordinate.getX() == coordinates.get(i-1).getX() && 
                            coordinate.getY() == coordinates.get(i-1).getY())) {
                System.out.println("Hey, they matched");
                break;
            }
            coordinates.add(coordinate);
            i += 1;
        }
        /* Calculate slopes between all the points */
        for(i =0; i < coordinates.size(); i++){
            for(int j = i+1; j < coordinates.size(); j++){
                Coordinate coordinate1 = coordinates.get(i);
                Coordinate coordinate2 = coordinates.get(j);
                double slope = getSlope(coordinate1, coordinate2);
                slopes.add(new Slope(coordinate1, coordinate2, slope));
            }
        }
        /* Calculate slope counts (to know which one occurs max times) */
        Map<String, Double> slopeCountsMap = new HashMap<String, Double>();
        for(Slope slope : slopes){
            slopeCountsMap.put(String.valueOf(slope.getSlope()), Double.valueOf(String.valueOf(getMatchingSlopeCount(slope.getSlope(), slopes))));
        }
        /* Sort the slope :: slope-count map */
        ValueComparator bvc =  new ValueComparator(slopeCountsMap);
        TreeMap<String,Double> sorted_map = new TreeMap<String,Double>(bvc);
        sorted_map.putAll(slopeCountsMap);

        /* get the maximum occurring slope */
        double maxSlope = Double.parseDouble(sorted_map.firstKey());

        /* Collect the list of co-ordinates having the max occurring slope and which are collinear */
        List<Coordinate> colinearPoints = new ArrayList<Coordinate>();
        for(Slope slope : slopes){
            if(maxSlope == slope.getSlope()){
                if(colinearPoints.size() < 2){
                    if(!colinearPoints.contains(slope.getCoordinate1())){
                        colinearPoints.add(slope.getCoordinate1());
                    }
                    if(!colinearPoints.contains(slope.getCoordinate2())){
                        colinearPoints.add(slope.getCoordinate2());
                    }
                } else {
                    if(colinearPoints.contains(slope.getCoordinate1()) &&
                            !colinearPoints.contains(slope.getCoordinate2())){
                        colinearPoints.add(slope.getCoordinate2());
                    } else if(colinearPoints.contains(slope.getCoordinate2()) &&
                            !colinearPoints.contains(slope.getCoordinate1())){
                        colinearPoints.add(slope.getCoordinate1());
                    }
                }
            }
        }
        System.out.println("Colinear points: ");
        System.out.println(colinearPoints);
    }

    private static int getMatchingSlopeCount(double slope, List<Slope> slopes){
        int count = 0;
        for(Slope slope2 : slopes){
            if(slope == slope2.getSlope()){
                count ++;
            }
        }
        return count;
    }
    /* Calculate slope between two points */
    private static double getSlope(Coordinate coordinate1, Coordinate coordinate2){
        return ((coordinate2.getY() - coordinate1.getY()) / (coordinate2.getX() - coordinate1.getX()));
    }
}
/* Class to hold co-ordinates */
class Coordinate {
    private double x;
    private double y;

    @Override
    public String toString() {
        return "(" + x + "," + y + ")";
    }
    public double getX() {
        return x;
    }
    public void setX(double x) {
        this.x = x;
    }
    public double getY() {
        return y;
    }
    public void setY(double y) {
        this.y = y;
    }
    public Coordinate() {
    }
    public Coordinate(double x, double y) {
        super();
        this.x = x;
        this.y = y;
    }
    @Override
    public boolean equals(Object o) {
        return (((Coordinate)o).getX() == this.getX() && ((Coordinate)o).getY() == this.getY());
    }
}
/* Class to hold slope between two points */
class Slope {
    private Coordinate coordinate1;
    private Coordinate coordinate2;
    private double slope;
    @Override
    public String toString() {
        return "(" + coordinate1.getX() + "," + coordinate1.getY() + ")(" + coordinate2.getX() + "," + coordinate2.getY() + ")";
    }
    public double getSlope() {
        return slope;
    }
    public void setSlope(double slope) {
        this.slope = slope;
    }
    public Coordinate getCoordinate1() {
        return coordinate1;
    }
    public void setCoordinate1(Coordinate coordinate1) {
        this.coordinate1 = coordinate1;
    }
    public Coordinate getCoordinate2() {
        return coordinate2;
    }
    public void setCoordinate2(Coordinate coordinate2) {
        this.coordinate2 = coordinate2;
    }
    public Slope() {
    }
    public Slope(Coordinate coordinate1, Coordinate coordinate2, double slope) {
        super();
        this.coordinate1 = coordinate1;
        this.coordinate2 = coordinate2;
        this.slope = slope;
    }
}
/* Comparator to sort the map */
class ValueComparator implements Comparator<String> {
    Map<String, Double> base;
    public ValueComparator(Map<String, Double> base) {
        this.base = base;
    }
    // Note: this comparator imposes orderings that are inconsistent with equals.    
    public int compare(String a, String b) {
        if (base.get(a) >= base.get(b)) {
            return -1;
        } else {
            return 1;
        } // returning 0 would merge keys
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T02:39:23.583

首先声明一个变量来保存迄今为止发现的最长行。说最长到目前为止。将此设置为一个较小的数字，例如 0，因为您不会得到任何短于 0 的行。在循环中，当您找到行的长度时，只需将其与 longSoFar 进行比较。

```
 if(lengthOfCurrentLine > longestSoFar){
         longestSoFar = lengthOfCurrentLine;
  } 
```

当然，您将保留迄今为止给出最长线的点。

在循环结束时，该变量中存储的任何内容都是您的答案。

# javascript - Javascript src 属性不起作用

> ID：14887491
> 
> 赞同：4
> 
> 时间：2013-02-15T02:28:09.687
> 
> 标签：javascript, html, src

这是一个非常简单的。网页的来源是

```
<script type="text/javascript" src="/jscript.js"></script>
<html><body>
<h1>It works</h1>
<p>This is the default web page for this server.</p>
<p>The web server software is running but no content has been added, yet.</p>
</body></html> 
```

我把js放在最开始。

在 jscript.js 中，它是：

```
<script type="text/javascript">
    document.write("test text from bill!");
</script> 
```

但它不显示文本。如果我将js嵌入到html中，它就可以工作。

而且奇怪的是，当我从网络浏览器直接访问 jscript.js 时，内容是这样的：

```
<script type="text/javascript" src="/jscript.js">
</script><script type="text/javascript">
document.write("test text from bill!"); 
</script> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T02:29:45.773

您的 javascript 文件中不需要`<script type="text/javascript">`or `</script>`。事实上，这就是破坏一切的原因。删除它们，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T02:30:24.577

您不应该在 JavaScript 文件中包含标签。

即使您删除它们，您的文本也会在页面中写得太早，所以我不确定它是否会正确显示。当前*，*您正在编写`<html>`.

我不确定您的`<script>`位置是否有效。此外，您已经排除了`<head>`文档的 ，这是必需的。

您的页面要写入的正确结构`body`是：

```
<html>
<head>

</head>
<body>
    <script type="text/javascript" src="/jscript.js"></script>
    <!-- your script will write the content right here -->

    <h1>It works</h1>
    <p>This is the default web page for this server.</p>
    <p>The web server software is running but no content has been added, yet.</p>
</body>
</html> 
```

# iphone - 使用 iPhone 推送通知

> ID：14887493
> 
> 赞同：1
> 
> 时间：2013-02-15T02:28:33.233
> 
> 标签：iphone, push-notification

假设我正在为 5 个位置的餐厅构建应用程序。用户将选择他们将允许从哪个餐厅“推送通知”。这可能吗？是否可以允许应用程序的特定部分向特定用户部分发送通知？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:41:17.383

答案是肯定的，可以在 iOS 和 android 应用程序中向一部分用户发送通知。

对于 iOS 和 android，推送通知请求会发送到 Apple 或 Google 服务器，请求将消息发送给*特定*用户。因此，请求这些推送通知的应用程序（我们在我公司称之为“推送服务器”）可以选择性地发送推送通知。

那么，唯一的要求是您的推送服务器能够动态确定哪些用户应该接收给定的通知。您必须执行以下操作：

*   当用户选择他们的餐厅偏好时，对您的后端进行（可能是异步的）调用，这些偏好将存储在其中（例如，在数据库表中）。
*   当您准备好发送推送通知时，查询此数据源以确定您的哪些用户子集已选择接收来自相应餐厅的通知
*   遍历要接收通知的用户列表，检索每个用户的相关推送令牌，并通过向相应服务器（即 Google/Apple）发送消息来发起推送请求

希望这可以帮助！

# java - 资源警告java

> ID：14887494
> 
> 赞同：3
> 
> 时间：2013-02-15T02:28:34.060
> 
> 标签：java, eclipse, resources, io, memory-leaks

Eclipse(Juno) 表示此示例中存在**资源泄漏警告**。这是有效的吗？
当异常抛出点在`for`循环中时会发生这种情况。

```
package kuni;

import java.io.FileWriter;
import java.util.Arrays;

public class ResourceWarn {
    public static void main(String[] args){

        try {
            FileWriter f = null;
            try{
                f = new FileWriter("test.txt");
                for(String s : Arrays.asList("a","b","c")){
                    if(s.equals("c"))throw new RuntimeException("aa"); //resource leak warn here
                    f.write(s);
                }
            }finally{
                try{
                    f.close();
                }catch(Exception ignore){
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T03:12:39.663

我想我知道 Eclipse 在抱怨什么。

```
 } finally {
            try {
                System.err.println("closing f");
                f.close();
            } catch(Exception ignore) {
            }
        } 
```

问题是`println`！！！

Eclipse 认为`System.err.println(...)`调用可能会引发异常。如果发生这种情况，那么`f.close()`通话就不会发生......因此，泄漏。

你和我都知道这“不可能发生”……但是 Eclipse 代码分析器可能不理解`System.err`.

此外，我们可能在代码的其他地方做了一些*会*导致`System.err.println(...)`失败的事情；例如，我们可能习惯用某个自定义子类的实例`System.setErr(...)`替换普通`System.err`实例，该实例在`PrintWriter`每个月的第二个星期二抛出未经检查的异常。

尝试在通话后移除`println`或移动它。`close`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T02:38:52.103

不，您那里没有资源泄漏。我不知道eclipse在抱怨什么。

我对您的代码的唯一评论是：

1.  如果您在关键字和左/右大括号之间包含空格，则会更容易阅读。

2.  您不应该在 finally 块中丢弃 IOException，而应该记录它并继续（就像您目前所做的那样）。当清理代码抛出异常时会发生奇怪的错误，并且认真地记录会为您节省极其痛苦的调试会话。

3.  对于这样的演示，打印堆栈跟踪很好，但通常您应该记录它，并且只向 stderr 打印一条简短的错误消息。用户看到堆栈跟踪时会感到恐慌，即使是良性的。

除此之外，代码对我来说看起来不错，以上都没有表明资源泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T02:40:41.490

当你扔一个新的`RuntimeException`时，你会立即被带到`catch`街区而没有机会关闭你的`FileWriter`。在抛出`FileWriter`a 的情况下，您需要关闭您的。`RuntimeException`

```
public static void main(String[] arg) {
    FileWriter f = null;
    try {
        f = new FileWriter("test.txt");
        for (String s : Arrays.asList("a", "b", "c")) {
            if (s.equals("c"))
                throw new RuntimeException("aa"); // resource leak warn here
            f.write(s);
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            if (f != null) {
                f.close();
            }
        } catch (Exception ignore) {
        }
    }
} 
```

# javascript - jquery ajax 响应：Chrome 和 Firefox 的区别

> ID：14887497
> 
> 赞同：2
> 
> 时间：2013-02-15T02:29:37.880
> 
> 标签：javascript, ajax, jquery

我不是前端开发人员，我正在做一个休闲项目，这需要 AJAX 获取一段 JSON。

```
$('#btn1').click(function() {
    $.ajax({
        url: 'http://mywebsite.com/persons/mike',
        type: "get",
        success: function(response, textStatus, jqXHR){
            var age1 = JSON.parse(response).data.age; // works for Firefox
            var age2 = response.data.age; // works for Chrome
        },
        error: function(jqXHR, textStatus, errorThrown){
            console.log('Error')
        },
        complete: function(){
            console.log('Complete')
        }
    });
}); 
```

我在 Firefox 中使用 Firebug，在 Chrome 中使用开发者工具。是Chrome中的`response`类型，在 Firefox 中是 a。`Object``String`

有没有一种通用的方法在 jQuery 中执行 AJAX 并成功解析响应？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T02:32:08.403

设置`dataType: 'json'`在您的`$.ajax`.

这将强制`success`/`done`处理程序中的响应成为已解析的对象，否则，如果响应不是有效的 JSON，则`error`/`fail`处理程序将被调用。

注意：`dataType`即使您没有`Content-Type: application/json`在响应中指定标头，使用也会强制将响应解析为 JSON。

但是，如果您指定标头，`jQuery.ajax`即使您没有指定`dataType`.

因此，您可以使用`dataType: 'json'`in`$.ajax`或`Content-Type: application/json`从后端输出标头，它会正常工作。或者两者兼而有之，如果你想贯穿始终。`=]`

# background - bsd后台应用程序不会立即返回

> ID：14887502
> 
> 赞同：1
> 
> 时间：2013-02-15T02:30:05.330
> 
> 标签：background, return, bsd

我在freebsd上运行后台应用程序，每次关闭应用程序时，都必须按回车键才能看到应用程序已经完成。某事喜欢

```
$ emacs &
[5] 24515
$ ## close emacs & press return
[5]+  Done                    emacs 
```

我在这里使用 bash。

在其他系统上，我可以看到后台应用程序在关闭后立即返回。

我怎样才能得到这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T21:52:55.863

尝试`set -o notify`或`set -b`启用异步作业通知。

在现代 shell 中默认情况下不启用此功能，因为它会弄乱您的显示，或者更确切地说，您当前正在键入的命令行。

# ios - 连接卫星电视接收器、电视遥控器 iOS

> ID：14887504
> 
> 赞同：1
> 
> 时间：2013-02-15T02:30:14.530
> 
> 标签：ios, iphone, television

我已经在谷歌上搜索了一段时间，寻找如何开发卫星电视接收器的遥控器。我听说 LG 电视有一个内部服务器，它接收来自应用程序的请求，例如，电视和移动设备必须在同一个 WiFi 连接中。卫星电视接收器也有这个服务器吗？谁能指出我如何实现这一目标的正确方向？或者给我一个起点。

有什么建议么？

# jquery - jQuery .serializeArray() 返回空数组

> ID：14887509
> 
> 赞同：6
> 
> 时间：2013-02-15T02:31:02.657
> 
> 标签：jquery, backbone.js, requirejs, amd

我正在使用 Jquery 和主干来构建我的应用程序。最近我用require.js重写了AMD架构中的项目。然后开始发布表单的问题。这是我的表格：

```
*<div data-role="page" id="login" data-theme="a">
    <form class="loginPageForm">
        <div data-role="content" style="padding: 15px">
            <h3 id="login_heading">
                Login
            </h3>
            <div data-role="fieldcontain">
                <fieldset data-role="controlgroup" id="email_fieldset">
                    <label for="email_textinput" >
                        Email
                    </label>
                    <input id="email_textinput" placeholder="john@doe.com" value="" type="text" />
                </fieldset>
            </div>
            <div data-role="fieldcontain">
                <fieldset data-role="controlgroup" id="password_fieldset">
                    <label for="password_textinput">
                        Password
                    </label>
                    <input id="password_textinput" placeholder="Secret Password" value="" type="password" />
                </fieldset>
            </div>
            <input type="submit" class="btn" value="Login"/>
            <a data-role="button" data-transition="none" data-theme="f" href="#register" id="registerButton">Register</a>
        </div>
    </form>
</div>* 
```

我正在使用：

```
 **$.fn.serializeObject = function(){
            var arrayData, objectData;
            arrayData = $(this).serializeArray();
            objectData = {};
            $.each(arrayData, function() {
                var value;

                if (this.value != null) {
                    value = this.value;
                } else {
                    value = '';
                }

                if (objectData[this.name] != null) {
                    if (!objectData[this.name].push) {
                        objectData[this.name] = [objectData[this.name]];
                    }

                    objectData[this.name].push(value);
                } else {
                    objectData[this.name] = value;
                }
            });

            return objectData;
        }** 
```

用于创建 Json.. 问题是 $(this).serializeArray(); 它返回一个空数组： $(this).serializeArray(): Array[0] length: 0 **proto** : Array[0]

我的对象“this”看起来像：

```
arrayData: Array[0]
objectData: undefined
this: v.fn.v.init[1]
0: form.loginPageForm
0: fieldset#email_fieldset
1: input#email_textinput
2: fieldset#password_fieldset
3: input#password_textinput
4: input.btn 
```

你知道我应该如何避免这个问题，这种形式在我使用 AMD 架构之前就可以工作了吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-15T03:17:28.187

您的表单元素没有名称属性。当您提交表单时，元素的值将以其名称作为键发布到服务器。所以名字很重要。

根据[jQuery serializeArray Docs](http://api.jquery.com/serializeArray/)

> .serializeArray() 方法使用成功控制的标准 W3C 规则来确定它应该包含哪些元素；特别是该元素不能被禁用，并且必须包含名称属性。由于未使用按钮提交表单，因此没有序列化提交按钮值。来自文件选择元素的数据未序列化。

# ios - 在 Titanium Studio 中处理 iOS 的方向更改？

> ID：14887510
> 
> 赞同：0
> 
> 时间：2013-02-15T02:31:32.940
> 
> 标签：ios, titanium, titanium-mobile

我已经阅读了文档并拥有下面的代码，但显然遗漏了一些东西。

```
 Ti.Gesture.addEventListener('orientationchange', function (ev) {
      if (Ti.Gesture.isLandscape(ev.orientation)) {
        // Update your UI for landscape orientation
      } else {
        // Update your UI for portrait orientation
      }
    }); 
```

如上面评论中所述，我应该怎么做才能更新我的 UI？我有一个简单的 TabGroup，里面有 WebViews。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T04:50:17.423

如果你想改变你的窗户

用这个

```
var window = Ti.UI.createWindow({
   orientationModes: [
      Ti.UI.LANDSCAPE_LEFT,
      Ti.UI.LANDSCAPE_RIGHT,
      Ti.UI.PORTRAIT,
      Ti.UI.UPSIDE_PORTRAIT
     ] 
```

});

这段代码告诉你的窗口现在有所有的oreintaions

现在您需要进行一些 ui 更改，例如在 portaint 中您有宽度：320 和高度 480

您需要知道更改发生的时间。使用了 soo oreintchange 事件

```
Ti.Gesture.addEventListener('orientationchange', function(e) {
      Titanium.API.info('Orientation changed to '+e.orientation);
        if(e.orientaion=="Ti.UI.PORTRAIT")
        {

                width:320,height:480
        }
    else{

  width:480,height:320

 }

 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T10:40:00.087

[KitchenSink 获取方向](https://github.com/appcelerator/KitchenSink/blob/master/Resources/ui/common/phone/orientation.js)

看看这个例子。它会有所帮助

# ibm-mq - IBM MQ MQRC 未授权

> ID：14887512
> 
> 赞同：0
> 
> 时间：2013-02-15T02:31:47.590
> 
> 标签：ibm-mq, userid

所以我已经尝试了我能想到的一切，这是我最后的手段。

我是 IBM MQ 的新手，我编写了一个小应用程序来连接到远程队列管理器。但是它不起作用。我收到一个错误：`MQRC_NOT_AUTHORIZED`。

到目前为止，我已经在网上查看过，显然我正在使用的用户 ID 需要被授予权限才能连接到队列。然而，在与系统管理员交谈后，他们告诉我任何用户 ID 都可以。

当我在没有用户 ID 的情况下连接到队列管理器时，消息会通过但没有得到处理，因为它需要用户 ID。当我提供用户 ID（任何 id）时，我收到上述错误。

任何帮助将不胜感激，我连接到队列管理器的代码如下：

```
 Hashtable myTable = new Hashtable();

            myTable.Add(MQC.USER_ID_PROPERTY, " ");
            myTable.Add(MQC.HOST_NAME_PROPERTY, "10.100.89.66");
            myTable.Add(MQC.CHANNEL_PROPERTY, "CHARLESAPP.SVRCONN");
            myTable.Add(MQC.PORT_PROPERTY, "1412");

            mqQueueManager = new MQQueueManager("THOEX",myTable); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:13:09.377

如果您让 MQ 管理员检查队列管理器错误日志 AMQERR01.LOG，它将告诉您用户的名称以及他们缺少哪些权限。然后，您可以使用此信息在队列管理器上使用 setauth 命令相应地设置特权。

# highcharts - Highcharts TypeScript，y轴标签

> ID：14887513
> 
> 赞同：7
> 
> 时间：2013-02-15T02:31:49.013
> 
> 标签：highcharts, typescript

请参阅讨论[Highcharts y 轴文本标签](https://stackoverflow.com/questions/4987457/highcharts-text-labels-for-y-axis)设置 y 轴标签的方式。

我在我的 TypeScript 定义中使用了[https://github.com/borisyankov/DefinitelyTyped/blob/master/highcharts/highcharts.d.ts](https://github.com/borisyankov/DefinitelyTyped/blob/master/highcharts/highcharts.d.ts)，但我找不到定义 y 轴格式化程序的方法。

以前有人试过吗？

--**更新**--

我的原始 JavaScript 代码是

```
var yearChartOptions = {
    yAxis: {
        plotLines: [{
            label: {
                formatter: function () {
                    return '$' + Highcharts.numberFormat(this.value/1000, 0) +'k ';
                }
            },
        }]
    },
};

// Create the chart
var yearChart = new Highcharts.Chart(yearChartOptions); 
```

在代码中，我有一个 this.value，它是每个条形图（我使用条形图）的值。在 TypeScript 中（我还没有更改为删除数组）。

```
 var yearChartOptions: HighchartsOptions = {};
    yearChartOptions.chart = {};
    yearChartOptions.yAxis = [];
    yearChartOptions.yAxis[0] = {};
    yearChartOptions.yAxis[0].plotLines = {};
    yearChartOptions.yAxis[0].plotLines.label = {};
    yearChartOptions.yAxis[0].plotLines.label.style.formatter(() => "$" + Highcharts.numberFormat(this.value / 1000, 0) + "k ");

    // Create the chart
    var yearChart = new Highcharts.Chart(yearChartOptions); 
```

输出是

```
/*
Compile Error. 
See error list for details
 D:/MyProject/Scripts/test.ts(36,56): The property 'formatter' does not exist on value of type 'HighchartsCSSObject'
D:/MyProject/Scripts/test.ts(36,107): The property 'value' does not exist on value of type 'Dashboard'
*/ 
```

而且它不会编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:58:32.750

**更新**-[绝对类型的 Highcharts 定义](https://github.com/borisyankov/DefinitelyTyped/blob/master/highcharts/highcharts.d.ts)现在有我的修复，所以你可以下载最新版本，希望它能解决你的问题。

Highcharts 的类型定义建议您需要将 amd 选项数组传递给 yAxis。这在 TypeScript 中编译。

```
var chart = new Highcharts.Chart({
    yAxis: [{
        labels: {
            formatter: function (): string {
                return 'My Label';
            }
        }
    }]
}); 
```

但是，我不确定这是否与文档匹配[，该文档建议您将 yAxis 选项作为 object 传递](http://api.highcharts.com/highcharts#yAxis)，而不是作为许多这些对象的数组。从您有一个 yAxis 的角度来看，这也是有道理的。

为了实现我认为是有效版本（即不是数组）：

```
/// <reference path="highchart.d.ts" />

var yearChartOptions: HighchartsOptions = {
    yAxis: {
        plotLines: {
            label: {
                formatter: function (): string {
                    return '$' + Highcharts.numberFormat(this.value / 1000, 0) + 'k ';
                }
            },
        }
    }
};

// Create the chart
var yearChart = new Highcharts.Chart(yearChartOptions); 
```

您可以在此处调整您的 highchart.d.ts 文件...

```
interface HighchartsOptions {
    chart?: HighchartsChartOptions;
    // others...
    yAxis?: HighchartsAxisOptions; // <-- remove the [] from this line
} 
```

我已经提交了一个pull request到Definite Typed来解决这个问题。

基于您的代码的完整工作示例：

# javascript - 用户从下拉列表中构建过滤器（“选择”）

> ID：14887518
> 
> 赞同：2
> 
> 时间：2013-02-15T02:32:25.393
> 
> 标签：javascript, jquery, html, css

我写了这段代码：

```
<script language="JavaScript" type="text/javascript">  
<!--  
function PassClient(){  
    var InputValueClient = document.getElementById('ValueClient').value;
    if(document.getElementById('storevaluesClient').value == false ) {document.getElementById('storevaluesClient').innerHTML = InputValueClient;}

    else {
        document.getElementById('storevaluesClient').innerHTML += ", "+InputValueClient;    
        } 
}     
//-->  
</script>

<select multiple="multiple" style="height:80px" name="ValueClient" id="ValueClient" onclick="PassClient()">
    <option value="Mike">Mike</option>
    <option value="Bell">Bell</option>
    <option value="Natal">Natal</option>
    <option value="Charlie">Charlie</option>
    <option value="Nour">Nour</option>
</select>

<textarea rows="6" cols="80" id="storevaluesClient" name="storevaluesClient"  style="font-family:Zurich Ex BT; color:#98AFC7"></textarea> 
```

基本上，当您单击列表时，元素会移动到 Textarea，它是用户构建选择的 SORT，列表中有 100 多个名称。

问题是，当您从客户端框到客户端选择来回单击以删除或更新选定的客户端名称时，一旦您单击框并对其进行更改，表单就不允许您选择更多客户端。

你们是否有任何解决方案或替代方法的建议来做类似的事情。

任何想法我们的帮助将不胜感激！

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:51:03.723

将两者都更改`.innerHTML`为`.value`.`document.getElementById('storevaluesClient').value`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T02:57:01.270

```
<script language="JavaScript" type="text/javascript">  
<!--
var InputValueClient;
var ValueClient;
function PassClient(){  
    InputValueClient = document.getElementById('ValueClient');
    ValueClient = document.getElementById('storevaluesClient');

    if(ValueClient.value == false ) {
        ValueClient.value = InputValueClient.value;
    }else {
        ValueClient.value += ", "+InputValueClient.value;    
    } 
}
//-->
</script>

<select multiple="multiple" style="height:80px" name="ValueClient" id="ValueClient" onclick="PassClient()">
    <option value="Mike">Mike</option>
    <option value="Bell">Bell</option>
    <option value="Natal">Natal</option>
    <option value="Charlie">Charlie</option>
    <option value="Nour">Nour</option>
</select>

<textarea rows="6" cols="80" id="storevaluesClient" name="storevaluesClient" style="font-family:Zurich Ex BT; color:#98AFC7"></textarea> 
```

# iphone - Dropbox 登录 查看示例代码

> ID：14887521
> 
> 赞同：1
> 
> 时间：2013-02-15T02:32:48.967
> 
> 标签：iphone, objective-c, dropbox, dropbox-api

我正在关注 Dropbox[教程](https://www.dropbox.com/developers/sync/tutorial/ios)，它给了我以下代码：

```
- (IBAction)pressLink {
[[DBAccountManager sharedManager] linkFromController:YOUR_ROOT_CONTROLLER];
} 
```

这应该链接到一个按钮，它应该显示 dropbox 的登录屏幕，我将`YOUR_ROOT_CONTROLLER`代码部分更改为`settings`，这是保存正在按下的按钮的视图。但是当我按下按钮时，什么也没有发生。它说`ROOT`，所以它要求我的实际`initial`视图控制器吗？

这是我的代码：

```
- (IBAction)pressLink
{
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];
SettingsViewController * settings = (SettingsViewController *) [storyboard instantiateViewControllerWithIdentifier:@"settings"];
[[DBAccountManager sharedManager] linkFromController:settings];
} 
```

这就是我将按钮方法更改为的原因，因为就`YOUR_ROOT_CONTROLLER`在那里，它给了我一个错误，但是现在，正如我所说的，它什么也没做。任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:25:55.493

如果您说设置是您拥有上述代码的控制器，那么您不应该实例化 SettingsViewController 的新实例。您应该将 self 传递给 linkFromController：

# c++ - Boost Phoenix 运算符重载/重新定义？

> ID：14887522
> 
> 赞同：2
> 
> 时间：2013-02-15T02:32:49.473
> 
> 标签：c++, boost, boost-phoenix

有没有（最好是简单的）方法来重新定义 Phoenix 中的标准运算符之一？我想有“>>”例如调用我自己的（懒惰的）仿函数。

简单用例：我可能想定义一个“管道”运算符，以便：

```
function2(function1(arg1)); 
```

可以用一种非常棘手的方式写成

```
arg1 >> function1 >> function2 
```

然后调用为

```
(arg1 >> function1 >> function2)(42) 
```

# eclipse - Eclipse Mingw 不会运行我的 makefile

> ID：14887533
> 
> 赞同：2
> 
> 时间：2013-02-15T02:33:49.267
> 
> 标签：eclipse, makefile, mingw

我的文件夹的根目录中有一个makefile，但是由于某种原因，当我尝试构建项目时，它从不使用我的makefile，而是尝试编译所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:32:59.640

我遇到了同样的问题——我最终使用了 CDT 提供的“Make-Targets”功能也许这可以被认为是一种解决方法而不是真正的解决方案无论如何，我开始在 eclipse 3.2 中使用这种方法并一直坚持下去

1.  禁用自动构建 - 在处理大型项目时无论如何都是一个好主意
2.  启用 Make 目标：`Window/Show View/Make Targets`
3.  创建 Make Targets：直接，只需单击`New Make Target`，请`Makefile View`务必禁用该`Run all Project Builders`选项
4.  通过双击目标开始构建过程

这允许使用编译器输出解析功能以及源代码中相关的错误和警告突出显示。无论如何，我无法以这种方式设置基于 gdb 的调试

# jenkins - 从工件重新部署构建 - 通用

> ID：14887536
> 
> 赞同：2
> 
> 时间：2013-02-15T02:34:10.900
> 
> 标签：jenkins, setup-deployment, artifactory

我有兴趣找出从工件部署构建的最佳方法。目前我正在生成很多二进制文件并将它们转储到工件的存储库中。

我想通过 jenkins 找到一种方法，它允许我从已将二进制文件上传到工件的构建作业中选择构建，然后重新部署它。

我假设进行工件上传的詹金斯作业会跟踪它正在上传的网址。然后其他作业可以通过参数化作业以某种方式利用这些 url/位置来收集和部署这些构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:53:36.150

您应该为此使用[Artifactory Jenkins 插件](https://wiki.jenkins-ci.org/display/JENKINS/Artifactory+Plugin)。
Jenkins Artifactory 插件为 Jenkins 带来了 Artifactory 的构建集成支持。这种集成允许您的构建作业自动将工件部署到 Artifactory 并将它们链接到创建它们的构建作业。作为部署的一部分，插件会记录附加信息，以便您全面了解已部署的工件、使用的依赖项和有关原始构建环境的信息。作为一个重要的方面，该插件还支持优化的仅构建结束部署。

一旦您在 Artifactory 中获得了有关构建生成的工件的所有信息，就可以使用[REST API](http://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API)从 Artifactory 中检索它们。
例如，[Build Info](http://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-BuildInfo) API 将为您提供有关特定构建运行生成的工件的所有信息。作为部署过程的一部分，您可以使用提供的信息从 Artifactory 下载工件。

# php - 数组和在 PHP 中使用数组组合

> ID：14887539
> 
> 赞同：0
> 
> 时间：2013-02-15T02:35:06.330
> 
> 标签：php, arrays, loops, foreach

我有两个完整的数组，每个数组大约有 10 个值。我已经组合了这些数组并通过这行代码显示它们。

```
foreach(array_combine($hpictures, $highschools) as $pictures => $hschool) 
```

并将它们回显为 css 格式。

数组的组合和代码完美地工作，唯一的问题是，由于某种原因，它只显示数组中的值，而不是显示所有 10 个。我想知道 foreach 或 array_combine 是不是这个原因。

编辑：

```
 if(!empty($highschools)){
               echo "<h3>High School Division</h3>";
               echo "<ul>";
                foreach(array_combine($hpictures, $highschools) as $pictures => $hschool){
                        echo "<li><img src='$pictures'/><a href='./schoolpage.php?school=$hschool'><strong>$hschool</strong></a></li>";
                    }

               echo "</ul>";
               } 
```

感谢您的帮助，并希望这对其他人也有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:40:34.747

在不知道数据结构的情况下，我只能假设您可能需要 array_merge() 而不是 array_combine()

```
foreach(array_merge($hpictures, $highschools) as $pictures => $hschool) 
```

对于复杂的数组结构，请尝试 array_merge_recursive()

```
foreach(array_merge_recursive($hpictures, $highschools) as $pictures => $hschool) 
```

**差异**

```
array_combine(array('dog','cat'),array('fred','felix')) 
```

将创建一个数组，如：

```
array('dog'=>'fred','cat'=>'felix') 
```

然而

```
array_merge(array('dog','cat'),array('fred','felix')) 
```

会产生

```
array('dog','cat','fred','felix'); 
```

# javascript - 触摸屏和 Javascript DOM Mousedown 事件

> ID：14887541
> 
> 赞同：8
> 
> 时间：2013-02-15T02:35:50.747
> 
> 标签：javascript, dom

我有一个使用触摸屏的 javascript Web 应用程序，浏览器是基于 webkit 的。

我对此有疑问：

```
addEventListener("mousedown", function(event){  
    console.log('down fired');
    event.target.classList.add('down');
}, true); 
```

使用鼠标时，按住鼠标时会立即添加目标元素类，但使用触摸屏时，将手指放在元素上时不会改变目标元素类。

然而，奇怪的是，控制台日志消息是在鼠标单击和 ts 按下的 down 事件中发送的。

关于如何解决这个问题的任何建议？

谢谢

# 编辑

我添加了 touchstart 事件侦听器，但它不会触发触摸事件：

```
addEventListener("touchstart", function(event){ 
    cl('touch fired');
}, true); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-07-22T08:16:29.260

为时已晚，但也许其他人可以使用它：

`event.target`在触摸屏上不起作用，因为您可以使用超过 1 个手指，因此有更多目标：

```
addEventListener("mousedown", function(event){  
  console.log('down fired');
  var t = /touch/.test(event.type) ? event.targetTouches[0] : event.target;
  t.classList.add('down');
}, true); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T02:49:33.097

请改用 touchstart 和 touchend 事件。

```
addEventListener("touchstart", function(event){  
    console.log('down fired');
    event.target.classList.add('down');
}, true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T02:46:01.623

尽管通常触摸设备确实会按预期发送鼠标事件，但触摸屏也有特殊事件。具体来说，“touchstart”相当于“mousedown”，“touchend”/“touchcancel”相当于“mouseup”。如果您不检查正在触摸的按钮或位置，通常可以直接替换它们。

顺便说一句，touchend 意味着用户停止触摸屏幕。touchcancel 发生在发生拦截触摸的事情（如非浏览器警报）时。

# google-chrome-extension - 延迟后自动隐藏弹出窗口

> ID：14887542
> 
> 赞同：0
> 
> 时间：2013-02-15T02:36:20.907
> 
> 标签：google-chrome-extension

单击扩展程序图标时，我希望弹出窗口打开几秒钟然后消失。

默认行为是单击页面上的任何其他位置后弹出窗口将消失。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T03:08:22.607

当用户在弹出窗口外部单击时，您无法阻止弹出窗口关闭。但是，您可以随时关闭弹出窗口。

`window.close()`在你的使用`popup.html`

```
setTimeout(function () {
    window.close();
}, fewSeconds); 
```

如果您想将此功能内嵌在弹出窗口中，则必须放宽[内容安全策略。](http://developer.chrome.com/extensions/contentSecurityPolicy.html)你最好把它放在一个外部文件中供你的弹出窗口获取。

# javascript - 传单标记

> ID：14887544
> 
> 赞同：7
> 
> 时间：2013-02-15T02:36:33.893
> 
> 标签：javascript, maps, leaflet, tilemill

我是传单的新手，我正在尝试显示标记。这些教程似乎对我不起作用。地图显示得很好，但是我无法显示标记。下面是我的示例代码：

```
wax.tilejson('http://localhost:8888/v2/DigitalHumanities.json',
  function(tilejson) {
        var map = new L.Map('map-div')
            .addLayer(new wax.leaf.connector(tilejson))
            .setView(new L.LatLng(-17.1828,137.4609), 4);

    var markers = new L.marker(-17.1828,137.4609);
    map.addLayer(markers);

    var markerx = new L.marker(137.4609,-17.1828);
    map.addLayer(markerx);

  }); 
```

我已经尝试过教程中的示例，即：`.addTo(map);`等`map.addLayer(markers);`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-15T07:10:08.890

L.marker 构造函数应该用作：

```
var markers = L.marker([-17.1828,137.4609]);
map.addLayer(markers); 
```

[您可以在此处](http://leafletjs.com/reference.html#marker)查看 API 参考

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-13T13:04:58.603

创建传单标记的实际语法是

```
L.marker(<LatLng> latlng, <Marker options> options? ); 
```

[您可以在此处](http://leafletjs.com/reference.html#marker) 查看 API 参考
下面是您的代码

> 正确的代码

```
wax.tilejson('http://localhost:8888/v2/DigitalHumanities.json',
  function(tilejson) {
        var map = new L.Map('map-div')
            .addLayer(new wax.leaf.connector(tilejson))
            .setView(new L.LatLng(-17.1828,137.4609), 4);

    var markers = new L.marker([-17.1828,137.4609],{clickable:true});
    map.addLayer(markers);

    var markerx = new L.marker([137.4609,-17.1828]);
    map.addLayer(markerx);

  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-29T07:47:17.810

您可以在此处找到工作示例< [https://jsfiddle.net/viswanathamsantosh/x63kzb31/](https://jsfiddle.net/viswanathamsantosh/x63kzb31/) >。当单击标记时，下面的行将添加一个标记以及一个弹出窗口到您的地图。

```
new L.Marker([46.947, 7.4448]).addTo(map).bindPopup('hello world!!!'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-20T00:59:12.447

您可以通过使用工厂或类上的“新”关键字来做到这一点（我相信无论如何工厂都是这样做的。不同之处在于使用的情况。

我相信这些都应该以相同的方式工作：

```
var markerx = new L.Marker(L.latLng(137.4609,-17.1828));
map.addLayer(markerx); 
```

.

```
var markerx = L.marker(L.latLng(137.4609,-17.1828));
map.addLayer(markerx); 
```

但是你不能将它们结合起来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-19T06:48:24.357

```
let markers = L.marker([-17.1828,137.4609]); 
```

或者

```
let markers = L.marker({lat: -17.1828,lng: 137.4609});` 
```

然后：

```
map.addLayer(markers); 
```

# vb6 - 如何将VB项目导出为dll

> ID：14887547
> 
> 赞同：0
> 
> 时间：2013-02-15T02:36:43.663
> 
> 标签：vb6, dllexport

有没有办法将VB项目导出到DLL？我刚刚找到了将 VB 项目 (VB6) 导出为 .exe 文件的唯一方法。如果您有这方面的经验，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:45:42.823

您需要使用 Visual Basic 6 而不是应用程序项目来创建[ActiveX项目。](http://msdn.microsoft.com/en-us/library/aa229332%28v=vs.60%29.aspx)

> 组件以对象的形式提供可重用的代码。通过创建对象并调用其属性和方法来使用组件代码的应用程序称为*客户端*。
> 
> 对于使用其对象的客户端，组件可以在进程内或进程外运行。进程内组件或 ActiveX DLL 在另一个应用程序的进程中运行。客户端可能是应用程序本身，也可能是应用程序正在使用的另一个进程内组件。

请注意，如果您打算将此由 VB6 创建的 DLL 引用到 VB.Net 项目，则需要在 VB.Net 代码中添加一些内容。[这是一个非常好的教程来解释这一点。](http://www.dreamincode.net/forums/topic/85026-how-to-create-a-dll-using-visual-basic-60/#post_id_535945)

# javascript - 使用 __MSG_@@extension_id__ 和 jQuery 在 Chrome 扩展弹出窗口中创建链接

> ID：14887553
> 
> 赞同：1
> 
> 时间：2013-02-15T02:38:45.300
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

我正在编写一个 chrome 扩展，其中有一个弹出窗口。当用户身份验证失败时，**弹出窗口**会显示登录失败的通知，我希望在该通知中包含指向我的扩展**选项页面**的链接。所以我在弹出窗口javascript文件中这样做：

```
function notifyHTML(html) {
    $("#notification_bar").html(html);
    $("#cont").fadeIn(30).delay(3000).fadeOut(300); //notify    
}
function onLoginFailed() {
    console.log("From extension: Login failed. Check username-password");
    notifyHTML("Login Failed. Update in <a href=\"chrome-extension://__MSG_@@extension_id__/html/options.html\">Options</a> page");
} 
```

相关HTML：

```
<div>
          <div id="cont"><div id="notification_bar"></div></div>
          <!-- More HTML -->
</div> 
```

但这样做会导致该通知中的链接无效。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:38:30.427

使用以下代码

```
function onLoginFailed() {
    console.log("From extension: Login failed. Check username-password");
    retStr = "Login Failed. Update in <a href=\"chrome-extension://" + chrome.i18n.getMessage("@@extension_id") + "/html/options.html\">Options</a> page";
    notifyHTML(retStr);
} 
```

您应该使用**`chrome.i18n.getMessage()`**API 来使用任何预定义的消息。

# 参考

*   [chome.i18n](https://developer.chrome.com/extensions/i18n.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T09:43:05.647

更好的选择是使用`chrome.extension.getURL`：

```
function onLoginFailed() {
  console.log("From extension: Login failed. Check username-password");
  notifyHTML('Login Failed. Update in <a href="' + chrome.extension.getURL("/html/options.html") + '">Options</a> page');
} 
```

[http://developer.chrome.com/extensions/extension#method-getURL](http://developer.chrome.com/extensions/extension#method-getURL)

# r - 带有单独训练和测试的 RSNNS 包

> ID：14887555
> 
> 赞同：0
> 
> 时间：2013-02-15T02:38:48.497
> 
> 标签：r, neural-network

所以我已经将训练集和测试集分开了，这样每一行都是在数据的每一列（微阵列值）中分割的唯一数据行，最后一列是类（0或1）。

我使用 iris 示例来获取与加载数据集相同的数据集，但我看到的每个示例都使用 splitForTrainingAndTest 函数将数据集拆分为训练和测试。但是，如果就我而言，它们已经分开了怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:28:14.420

如果您仔细阅读[RSNNS:Examples](http://dicits.ugr.es/software/RSNNS/index.php?view=Examples%20of%20high-level%20API)中提供的示例，您会发现最终命令应该如下所示

```
model <-  mlp(your_inputs_training, your_targets_training, size = 5, 
  +      learnFuncParams = c(0.1), maxit = 60, inputsTest = your_inputs_crossval, 
  +      targetsTest = your_inputs_crossval) 
```

# javascript - jQuery click 事件在页面加载时立即触发，仅在 IE8 中

> ID：14887557
> 
> 赞同：1
> 
> 时间：2013-02-15T02:39:11.013
> 
> 标签：javascript, jquery, redirect, internet-explorer-8, click

这是有问题的代码

```
$('.consejosTab').on("click", function(e){
    //window.location = 'http://encuentratrabajoonline.es/consejos/';
    console.log('Clicked' , e , this);
}); 
```

如果您在 IE8 中查看页面[http://encuentratrabajoonline.es/](http://encuentratrabajoonline.es/)，该页面将立即重定向到子域。似乎正在发生的是，这不是将 click 事件绑定到元素，而是调用 consejosTab 上的 click 函数。我已经做了一些初步测试，我已经注释掉了重定位，只是在声明中放了一个 console.log。我还确认没有其他单击功能正在运行并单击该元素。

除了页面上所有其他糟糕的标准（这只是我要在这个网站上进行的清理工作的开始），我需要知道为什么这只发生在 IE8 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T16:11:00.033

我也为此苦苦挣扎了一段时间，发现我无意中调用了对 myfunction 的调用，但正如标准所预期的那样，[在这个 SOF question 中有更好的描述](https://stackoverflow.com/questions/1558584/why-is-jquery-click-event-triggered-when-page-loaded)。通过定义内联函数，它将自动执行。

以下三个语法行导致相同的问题（立即执行）

```
$('.consejosTab').on("click", function(e){ alert("I will execute immediately");});
$('.consejosTab').on("click",myFunc()); 
$('.consejosTab').click(myFunc()); 
```

一种解决方案是使用以下任一选项调用命名函数 - 请注意括号的删除。传入 'myFunc()' 意味着返回一个值，传入 'myFunc' 是对应该执行的函数的引用。

```
$('.consejosTab').on("click", mmyFunc); */ JS */
$('.consejosTab').click(myFunc); */ JQuery Shorthand */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T02:42:22.013

根据您使用的 jQuery 版本（希望是最新版本），请改用以下构造：

```
$('.nav').on("click", function(e){
  // your code here
}); 
```

# javascript - 将 excel 格式的数据从 Web 复制到剪贴板

> ID：14887560
> 
> 赞同：5
> 
> 时间：2013-02-15T02:39:47.090
> 
> 标签：javascript, jquery, excel

我希望在我的页面上提供一个按钮，单击该按钮时，会将（excel 格式的）数据复制到用户剪贴板，并且他们能够将值以列分隔的值粘贴到 excel 中。这可能吗，也许是jquery？我对 OOP 有一定的了解和经验。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:59:08.100

在跨浏览器的 JS 中似乎很难找到一个简单的解决方案（对于 IE 来说很简单，但对于其他浏览器则不然），所以你可以看看 ZerClipboard，它是使用 Javascript 和 Flash 的一个很好的解决方案。

[零剪贴板](https://github.com/jonrohan/ZeroClipboard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:50:34.360

```
function ClipBoard()
{
var tab      = "    ";
var ticket   = $('#Userid').text();
var queue    = $('#queue').text();
var customer = $('#customer').text();
var res      = $('#res').text();

var str      = ticket+tab+queue+tab+customer+tab+res;

$('#holdtext').append(str);
Copied = holdtext.createTextRange();
Copied.execCommand("Copy");
} 
```

使用 Jquery 并在每个 var 之间插入制表符将格式化为 excel。但这仅适用于 IE。

```
<TEXTAREA ID="holdtext" STYLE="display:none;"></TEXTAREA>
<span id="ticket">767-45</span><br />
<span id="queue">john_doe</span><br />
<span id="customer">Citibank</span><br />
<span id="res">jan_doe</span><br />
<BUTTON onClick="ClipBoard();">Copy to Clipboard</BUTTON> 
```

# javascript - 如何加载 Javascript 库以使其可用于 Windows Phone 中 WebBrowser 控件中页面上的 Javascript？

> ID：14887561
> 
> 赞同：1
> 
> 时间：2013-02-15T02:39:46.697
> 
> 标签：javascript, windows-phone, browser

我需要构建对 MRAID 兼容广告的支持，这些广告将显示在 Windows Phone 8 设备上的 WebBrowser 控件中。MRAID 定义了一组 23 种方法和 5 个事件，可供广告设计人员在其 JavaScript 中使用。所以，我需要构建一个包含 23 个 JavaScript 方法和 5 个 JavaScript 事件的库。他们每个人都将使用 windows.external.Notify 调用一个 C# 函数，该函数将提供实际方法并将请求的数据返回给使用 webBrowser.InvokeScript 的 JavaScript 函数。

所以让我难过的问题是如何加载我构建的 JavaScript 库，以便广告设计人员可以使用这些功能？

我唯一的想法是在将 WebBrowser 控件指向它之前动态解析广告的 HTML 并将我的 JavaScript 注入广告，但这似乎非常笨拙且容易出错。

您的想法和建议将不胜感激。

# sql-server - 表值函数不返回结果

> ID：14887562
> 
> 赞同：0
> 
> 时间：2013-02-15T02:40:14.160
> 
> 标签：sql-server, tsql, function

我的表值函数将返回空结果。我不确定我的表值函数格式是否正确。

我已经对所有变量进行了硬编码并自行运行每个 select 语句，但我无法让表返回结果。

我还填写了一个表变量并选择了@Table_Var，这确实返回了正确的结果，所以它与我的代码结构方式有关。

所有语句都正常工作，我无法从函数返回数据。

任何人都立即看到我做错了什么？

## 编辑

我已经将那个松散的代码移到一个函数中，这样它就不会那么混乱了。

该功能正常工作，其他一切，当我尝试返回表格时接受。

```
--select * from  [dbo].[fn_Professionals_GetMiniUserInfo](null,'a9cec535-ac48-4197-b8a0-87702cb14e52') 
ALTER FUNCTION [dbo].[fn_NonPros_GetMiniUserInfo] 
(
 @NonProID  INT = NULL,
 @UserID UNIQUEIDENTIFIER = NULL
) 
RETURNS 
    @Table_Var TABLE 
(
    -- Add the column definitions for the TABLE variable here
    Avatar     NVARCHAR(50), 
    ID         int,
    FName      varchar(50),
    LName      varchar(50),
    Title      varchar(20),
    UserID     UNIQUEIDENTIFIER,
    CompanyID  INT,
    CoWorkers  INT,
    Street     varchar(60),
    City       varchar(30),
    StateCD    char(2),
    ZipCode    varchar(5),
    WorksFor   VARCHAR(30),
    Phone      VARCHAR(12),
    Email      NVARCHAR(256)
)
AS
BEGIN

INSERT INTO @Table_Var

SELECT
    (SELECT [AFCCInc_Com].[dbo].[aspnet_fn_GetProfileElement]('Avatar',ap.PropertyNames,ap.PropertyValuesString )FROM AFCCInc_Com.dbo.aspnet_Profile ap
                                                                                                                 WHERE ap.UserId = nonPro.UserID)as'Avatar',
            na.NonProID'ID',c.FirstName'FName',c.LastName'LName',c.Title,@UserID 'UserID',
            ci.CompanyID,ci.CoWorkers,a.AddressLine, cit.City,s.StateCD,z.ZIPCode,ci.CompanyName'WorksFor',
            p.Phone,
                  (SELECT Email FROM AFCCInc_Com.dbo.aspnet_Membership m WHERE m.UserId = nonPro.UserID)'Email'

                  FROM  NonPros.NonPros nonPro         with(nolock)                                   JOIN
                  NonPros.utbNonProsUtbAddresses    na with(nolock) on na.NonProID = nonPro.NonProID  JOIN
                  dbo.fn_GetCompanyInfo(@UserID)    ci              ON ci.UserID   = nonPro.UserID    JOIN
                  Person.utbAddresses                a with(nolock) ON a.AddressID = na.AddressID     JOIN
                  [Person].[UtbAddressesutbContact] ac with(nolock)on ac.AddressID = a.AddressID      JOIN
                  Person.utbContact                  c with(nolock)ON ac.ContactID = c.ContactID      JOIN
                  Person.utbContactUtbPhones        cp with(nolock)ON c.ContactID = cp.ContactID      JOIN
                  Person.utbPhones                   p with(nolock)ON p.PhoneID = cp.PhonesID         JOIN
                  Person.utbZipCodes                 z WITH(NOLOCK) ON z.ZipCodeID = a.ZipCodeID      JOIN
                  Person.utbCitys                  cit WITH(NOLOCK) ON cit.CityID  = z.CityID         JOIN
                  Person.utbStates                   s WITH(NOLOCK) ON s.StateCD = z.StateCD

                  WHERE c.ContactTypeID = 7/*me*/ 
                  AND p.PhoneTypeID = 6/*main*/
                  AND nonPro.UserID = 'a9cec535-ac48-4197-b8a0-87702cb14e52';
    RETURN 
    END;

    alter FUNCTION fn_GetCompanyInfo (@UserID UNIQUEIDENTIFIER)
RETURNS 
@Table_Var TABLE 
(
    UserID      UNIQUEIDENTIFIER,
    CompanyID   INT, 
    CompanyName VARCHAR(50),
    CoWorkers   INT
)
AS
BEGIN

    INSERT INTO @Table_Var

          SELECT @UserID,
                 p.ProfessionalID, 
                 p.ProfessionalName,
                (SELECT COUNT(NonProID)'CoWorkers' FROM BuildingPros.utbProfessionalsUtbNonPros with(nolock)WHERE ProfessionalID = p.ProfessionalID)

                                    FROM BuildingPros.utbProfessionalsUtbNonPros bp with(nolock)                                       JOIN
                                         BuildingPros.utbProfessionals            p with(nolock)ON p.ProfessionalID = bp.ProfessionalID

                      WHERE bp.NonProID = (SELECT NonProID FROM NonPros.NonPros where UserID = @UserID);
    RETURN 
END 
```

去

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:09:42.707

在我清理代码并将插入上方的那些选择移动到我的表变量中之后，一切正常。

我相信这部分是我的问题。

```
**(SELECT [AFCCInc_Com].[dbo].[aspnet_fn_GetProfileElement]('Avatar',ap.PropertyNames,ap.PropertyValuesString)),** 
```

.

```
SELECT
    (SELECT [AFCCInc_Com].[dbo].[aspnet_fn_GetProfileElement]('Avatar',ap.PropertyNames,ap.PropertyValuesString)),
            na.NonProID'ID',c.FirstName'FName',c.LastName'LName',c.Title,'a9cec535-ac48-4197-b8a0-87702cb14e52' 'UserID',
            ci.CompanyID,ci.CoWorkers,a.AddressLine, cit.City,s.StateCD,z.ZIPCode,ci.CompanyName'WorksFor',
            p.Phone,
                  (SELECT Email FROM AFCCInc_Com.dbo.aspnet_Membership m WHERE m.UserId = nonPro.UserID)'Email'

                  FROM  
                  NonPros.NonPros nonPro                                                  JOIN
                  AFCCInc_Com.dbo.aspnet_Profile ap      ON ap.UserId =nonPro.UserID       JOIN
                  NonPros.utbNonProsUtbAddresses    na   ON na.NonProID = nonPro.NonProID  JOIN
                  dbo.fn_GetCompanyInfo('a9cec535-ac48-4197-b8a0-87702cb14e52')    ci   ON ci.UserID   = nonPro.UserID    JOIN
                  Person.utbAddresses                a   ON a.AddressID = na.AddressID     JOIN
                  [Person].[UtbAddressesutbContact] ac   ON ac.AddressID = a.AddressID     JOIN
                  Person.utbContact                  c   ON ac.ContactID = c.ContactID     JOIN
                  Person.utbContactUtbPhones        cp   ON c.ContactID = cp.ContactID    JOIN
                  Person.utbPhones                   p   ON p.PhoneID = cp.PhonesID       JOIN
                  Person.utbZipCodes                 z   ON z.ZipCodeID = a.ZipCodeID      JOIN
                  Person.utbCitys                  cit   ON cit.CityID  = z.CityID         JOIN
                  Person.utbStates                   s   ON s.StateCD = z.StateCD

                  WHERE c.ContactTypeID = 7/*me*/ 
                  AND p.PhoneTypeID = 6/*main*/
                  AND nonPro.UserID = 'a9cec535-ac48-4197-b8a0-87702cb14e52'
    RETURN 
```

# asp.net-mvc - ASP.Net MVC FormsAuthentication - 在使用“记住我”持久 cookie 时禁用用户的能力

> ID：14887568
> 
> 赞同：0
> 
> 时间：2013-02-15T02:40:52.307
> 
> 标签：asp.net-mvc, asp.net-mvc-3, forms-authentication

我正在使用内置的`Membership`FormsAuthentication 登录。我想让管理员禁用其他用户帐户，我曾想过`IsApproved`将用户的属性更改为 false，但它不起作用，仍然显示用户已登录。我认为这是因为持久性 cookie 而发生的之前`SetAuthCookie`为用户设置过。

我已经研究过`FormsAuthenticationTicket`，`SetAuthCookie`我似乎无法找到如何偶尔针对存储库重新验证它们以确保用户仍然存在/处于活动状态。

这是否包含在现有功能中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:03:16.230

这实际上取决于您的身份验证管道的工作方式，这是一个一般的想法：每个请求都从数据库中获取用户的数据：

```
public User CurrentUser
        {
            get
            {
                if (_CurrentUser == null && Request.IsAuthenticated)
                {
                    //your method to get the user
                    _CurrentUser = _UserRepository.GetUserByEmail(HttpContext.User.Identity.Name); 
                }
                return _CurrentUser;
            }
        } 
```

然后使用 ActionFilter 您可以检查：

```
 protected override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            //user enabled?
            if (CurrentUser != null && !CurrentUser.IsApproved)
            {
                //Force LogOut
                //Redirect to LogOut
                filterContext.Result = new RedirectToRouteResult(
                new RouteValueDictionary {{ "Controller", "Account" },
                                      { "Action", "LogOff" } });
            }
} 
```

# ruby-on-rails - 路由到特定于用户的索引页面

> ID：14887576
> 
> 赞同：1
> 
> 时间：2013-02-15T02:43:04.093
> 
> 标签：ruby-on-rails

我有一个帖子模型和一个用户模型。帖子属于用户。在用户/显示页面上，我想链接到这个 url：

```
/users/1/posts 
```

在此页面上，我将显示用户创建的所有帖子。

我试过像

用户/节目

```
<%= link_to "Posts", posts_path(@user) %> 
```

帖子/索引

```
<% @posts.each do |post| %>
  <li>
    <%= link_to post.title, post %>
  </li>
<% end %> 
```

但这是路由到

```
/posts.1 
```

并显示属于所有用户的所有帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:44:24.360

正确的助手是`user_posts_path(@user)`这要求您在您的路线中将帖子资源嵌套在您的用户资源下。

在您的帖子控制器中，您需要以下代码：

```
def index
  @user = User.find(params[:user_id])
  @posts = @user.posts
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T02:48:19.577

您发布的链接的 url 助手将如下所示：

```
user_posts_path(@user) # => /users/123/posts
user_post_path(@user, @post) # => /users/123/posts/1 
```

为了做你想做的事，你必须添加正确的路线：

```
resources :users do
  resources :posts
end 
```

`rake routes`然后您可以通过运行任务来查看所有可用的 url 助手。它们可能看起来像这样：

```
users_path GET  /users(.:format)                         users#index
user_path GET  /user/:id(.:format)                       users#show
...
user_posts_path GET  /users/:user_id/posts(.:format)     posts#index
user_post_path  GET  /user/:user_id/posts/:id(.:format)  posts#show
... 
```

请注意，在 中`tasks_controller`，用户 id 可以通过 url 访问`params[:user_id]`

您可能想查看有关[嵌套路由的 Rails 指南](http://guides.rubyonrails.org/routing.html#nested-resources)

# python - 在 Python 中使用 Regex 解析网站

> ID：14887577
> 
> 赞同：0
> 
> 时间：2013-02-15T02:43:13.903
> 
> 标签：python, html-parsing

我正在尝试使用正则表达式来解析网站

```
blahblahblah 
<a  href="THIS IS WHAT I WANT" title="NOT THIS">I DONT CARE ABOUT THIS EITHER</a>
blahblahblah 
```

（其中有很多，我希望它们都以某种标记化的形式出现）。问题是“a href”实际上有两个空格，而不仅仅是一个（有些是“a href”，有一个我不想检索的空格），所以使用 LXML 被证明是一件很痛苦的事，我不想使用 BeautifulSoup（出于其他原因）。有谁知道我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:54:08.700

根据您想要的稳健性级别，您可以在第一次拍摄中获取标签并将其存储，然后在您的字符串包含“”时将“”替换为“”。这将有效地删除字符串中的任何多个空格。

需要注意的[是，不推荐使用正则表达式来解析 HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454) =)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:31:15.807

每次有人问与您相同的问题时，不要让您对链接给出的答案印象深刻。它显然被认为是被很多人半自动引用的教理问答页面。然而，在编程中，就像在日常生活中一样，有教理问答，还有我们在现实生活中所做的事情。
就个人而言，如果我不认为 HTML 可以完全用正则表达式**解析**，我认为可以用正则表达式完成对 HTML 某些部分的有限**分析**。这是务实的观点。
而且我确实使用正则表达式实现了对网页的此类分析。有时会出现一些问题，但它们可以由开发人员管理。正则表达式很快。有一次我测量到 Beautiful Soup 比正则表达式慢 10 倍，而且`lxml`慢了大约 50 倍。
我相对熟练地使用正则表达式获取网络数据，如果您想获得提示，我可以提供一些提示，我的电子邮件在我的页面上。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T03:59:20.743

我相信这回答了你的问题。这只是几个正则表达式，它们将获得所有在开始的“a”标记后正好两个空格的href。

```
fh = open("index.html", 'r')
rawString = fh.read()   # read entire file to string
fh.close()

temp =  re.findall("<a  href=\".*?\"", rawString) 
if temp:
    for i in range(len(temp)): # process each match
        temp[i] = re.search("\".*?\"", temp[i]).group(0) # remove 'href='
    print temp    
else:
    print "Not found" 
```

对于您的示例，输出为：

> ['“这就是我要的”']

# django - html中的大括号和百分号是什么意思？

> ID：14887579
> 
> 赞同：10
> 
> 时间：2013-02-15T02:43:23.720
> 
> 标签：django, html, django-templates

我正在学习如何在 Django 框架中开发网站。关于模板 html 文件，我有一些不明白的地方。

我看到教程使用花括号（`<% if ... %> <% endif %>`等）在代码中嵌入逻辑。但是当我尝试在非 Django 服务器（Apache）中使用这种语法时，这种语法没有被解释，我可以`<% if ... %>`在我的页面上看到我的 ...。

我不知道这是为什么。

所以这个语法不是 HTML 的一部分，而是 Django 的一部分，所以它可以被它解释？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-15T03:02:51.270

首先，Django 模板语言的正确标签是`{% %}`，而不是`<? ?>`。

你说得对，这是 Django 的一部分。[这是领域特定语言](http://en.wikipedia.org/wiki/Domain-specific_language)的一个示例，正如维基百科所说，它是为特定任务发明的语言。在这种情况下，构建 Django 模板语言是为了处理模板。

它之所以有效，是因为 Django 带有一个[解析器](http://en.wikipedia.org/wiki/Parsing#Programming_languages)来解释语言并理解它。解析器接受一个在 HTML 或任何其他语言中可能没有意义的字符串，例如 {% block Pasta %} 并将其转换为有意义的东西。在这种情况下，它最终会输出 HTML。

碰巧你可以用任何语言编写自己的解析器来解释 Django 模板语言，甚至完全编写一种新语言。但是，随着您的语言变得越来越复杂，此类任务的难度也会增加，并且还取决于您选择的语言。众所周知，PHP 不擅长解析，而众所周知，其他语言（如 Perl）更擅长解析。一般来说，只[运行搜索](https://www.google.com/search?q=php+template+engine&oq=php+template+engine&aqs=chrome.0.57j65j0j62l2j60.2693&sourceid=chrome&ie=UTF-8#q=php+template+system&hl=en&tbo=d&ei=haUdUYvgDvON0QG6jIHgDw&start=0&sa=N&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.42553238,d.dmQ&fp=d5bbde17dd6cca0a&biw=1041&bih=927)并使用预先构建的解析器而不是重新发明轮子要容易得多。虽然这当然是一种不那么有趣的方式:)

[ps 这可能是您感兴趣的。](https://github.com/django/django/blob/master/django/template/__init__.py)

# web - 如何购买自定义字体以在客户的项目中使用

> ID：14887587
> 
> 赞同：0
> 
> 时间：2013-02-15T02:45:06.900
> 
> 标签：web, fonts, visual-web-developer, embedded-fonts

我一直想知道是否要为 TypeKit 等字体服务付费，以便能够使用他们提供的一些很棒的字体，但我也想知道如何管理这笔费用，我说的是客户的网站，你怎么办告诉他们“你需要继续为这项服务付费，否则你的网站可能看起来不一样”一年后。

字体服务是否更适合个人使用（在您自己的网站上使用）？

您在客户工作中使用付费字体服务吗？如果你这样做，你如何管理它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:17:14.160

Typekit 有不同的定价层，上层（目前从 49 美元起）允许您在无限的网站上使用字体（尽管不是无限的流量）。您可以自己承担成本并提高价格来弥补它。

# ios - 无法触发 segue

> ID：14887589
> 
> 赞同：0
> 
> 时间：2013-02-15T02:45:33.143
> 
> 标签：ios, xcode, storyboard, uistoryboard, uistoryboardsegue

由于我使用的是 tapku 日历，因此我想在按下日期时触发手动 segue。所以我实例化了我想要转场的视图控制器，转场，然后执行转场。

```
DisplayScheduleViewController *vc = [[DisplayScheduleViewController alloc] init];

mySegue = [[UIStoryboardSegue alloc] initWithIdentifier:@"Day G" source:self destination:vc];

[self performSegueWithIdentifier:@"Day G" sender:self];

} 
```

但是，一旦按下日期，程序就会崩溃，这是异常消息：

由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'Receiver（）没有标识符'Day G'的segue'

同样在运行程序之前，我在情节提要中收到此警告消息：

由于缺少入口点，场景无法访问，并且没有通过 -instantiateViewControllerWithIdentifier: 进行运行时访问的标识符。

你知道如何让它工作吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T07:08:37.837

以下是如何在情节提要中连接 segue 并从代码中调用它：

1.  在情节提要中创建两个视图控制器。
2.  控制从源场景中的视图控制器图标拖动到目标场景。
3.  选择合适的转场类型。
4.  在检查器中，为 segue 分配一个标识符。
5.  在运行时，从源视图控制器调用

    [self performSegueWithIdentifier:<#identifier#> sender:nil];

6.  在源视图控制器中覆盖 -[UIViewController prepareForSegue:sender:] 以在源控制器和目标控制器之间传递状态。

顺便说一句， -[UIStoryboardSegue initWithIdentifier:source:destination:] 方法可供您在创建将从情节提要实例化的自定义 segues 子类时覆盖。像这样直接创建故事板 segue 实例是不适用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:22:24.167

这个警告：

```
Scene is unreachable due to lack of entry points and does not have an identifier for runtime access via -instantiateViewControllerWithIdentifier:. 
```

表示你没有起始 VC。我猜这也导致了segue问题。看起来您正在实例化一个 VC 并从上面的代码中触发一个 segue，但您实际上是在上面代码中的 VC 中吗？

我建议您直接在情节提要中添加 ViewController（以图形方式）并更改其类 - 这是一个标准流程，但您可以根据您在项目中的位置开始

1.  开始一个新项目，然后选择模板“Single View Application”
2.  转到项目的情节提要
3.  打开实用程序菜单（右）。
4.  从实用程序菜单底部的列表中拖出第二个视图控制器对象并将其拖到情节提要 - 现在您将拥有 2 个视图控制器（模板随附的一个 - 自动分配为入口点 - 和您添加的新的）
5.  选择您在情节提要中添加的第二个视图控制器
6.  转到实用程序菜单中的“身份检查器”
7.  将第二个 VC 的类更改为您的类名。现在你有 2 个视图控制器
8.  现在您已经在情节提要中创建了 2 个 VC。
9.  现在您可以将上面的代码包含在第一个 VC 代码中。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:26:55.137

如果您无法在 StoryBoards 中设置 segue，那么您最好的机会可能是设置一个新的 xib（在 Storybards 之外），在该 xib 中设计您的 ViewController，然后通过 UIViewController 实例化该 vc `initWithNibName: bundle:` 您可以使用`presentViewController: animated: completion:`. 如果您不确定如何使用这些方法，请查看 UIViewController 的文档，但我发现它们非常不言自明。

仅当您可以在情节提要中设置它们时，使用 segues 才能很好地工作，而且，AFAIK，如果没有它，它们几乎毫无用处。

顺便说一句：您收到的警告只是意味着您可能在 Storyboards 中设置的 VC 没有用于实例化的标识符。转到该 vc 的 StoryBoard 身份检查器并在“Storyboard ID”中输入任意名称将抑制它。

玩得开心

# directx - 使用计算着色器、多个交换链进行延迟着色？

> ID：14887594
> 
> 赞同：0
> 
> 时间：2013-02-15T02:46:07.630
> 
> 标签：directx, directx-11, compute-shader, deferred-shading

再次嗨。我准备在我的 dx11 引擎中添加延迟着色，但我有一个架构问题。我正在考虑首先使用 MRT 渲染 gbuffer，将其传递给计算着色器，调度，然后输出结果。我的问题是，我应该创建两个交换链，一个用于渲染 gbuffer，一个 uav 用于将计算着色器渲染到后台缓冲区并呈现，还是有另一种方法可以做到这一点？我在这里要避免的是必须使用全屏四边形并在其上渲染 cs 的输出。开销太大。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:56:17.257

编辑：我需要补充一点，您会收到一些状态警告，因此请谨慎使用。

最后，不需要两个交换链。您首先使用 DXGI_USAGE_UNORDERED_ACCESS 标志创建您的后备缓冲区。然后创建一个渲染目标。将场景渲染到该目标，将其作为 Texture2D 传递给计算着色器，并将后缓冲区作为 RWTexture2D 传递给计算着色器。然后只需发送 cs，呈现并完成！你在屏幕上得到了 cs 输出。

# php - PHP文件编辑问题

> ID：14887597
> 
> 赞同：0
> 
> 时间：2013-02-15T02:47:09.133
> 
> 标签：php, iis, file-io, windows-7, webserver

我最近一直在使用 IIS 和 PHP，但无法编辑文件。我允许将 wwwroot 文件编辑到 IIS_IUSRS，但这似乎没有任何作用。我仍然收到以下警告：

```
Thanks for your request, *My IP Here* The robot moved forward. Warning: fopen(Ips.txt): failed to open stream: Permission denied in C:\inetpub\wwwroot\CMD.php on line 20 Unable to open file, Ips.txtPermission denied in C:\inetpub\wwwroot\CMD.php on line 20 Unable to open file, Ips.txt 
```

如果我理解正确，这意味着 wwwroot 未对 php 编辑开放。这是我的代码：

```
<?php
$cmd=$_GET["cmd"];
$ip=$_SERVER['REMOTE_ADDR'];
if($cmd=="Forward") {
//insert forward code here.
    echo "Thanks for your request, ".$ip." The robot moved forward.";

} else if($cmd=="Backward") {
//insert backwards code here.
    echo "Thanks for your request, ".$ip." The robot moved backwards.";
} else if($cmd=="Left") {
//insert left code here.
    echo "Thanks for your request, ".$ip." The robot moved left.";
} else if($cmd=="Right") {
//insert right code here.
    echo "Thanks for your request, ".$ip." The robot moved right.";
} else {
    echo "Got invalid command: ".$cmd." From IP: ".$ip;
}
$ipfile = fopen("C:/inetpub/wwwroot/Ips.txt",'w') or exit("Unable to open file, Ips.txt");
if(!strpos(file_get_contents("C:/inetpub/wwwroot/Ips.txt"),$ip)) {
    fwrite($ipfile,$ip);
}
echo "\nYour IP has been logged for security purposes.";
fclose($ipfile);
$log=fopen("C:/inetpub/wwwroot/Logs.txt",'w') or exit("Unable to open file, Logs.txt");
fwrite($log,"Got command, ".$cmd." from a computer at the adress, ".$ip);
fclose($log);
?> 
```

找了半天，也发现了类似的情况，但是要么没找到解决办法，要么就是IIS文件权限不合适。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:43:56.913

我想通了，原来 IPs.txt 不知何故失去了用户编辑的权限，我添加了权限，并解决了问题，感谢所有帮助！

# android - 如何在Android中设置到期日期

> ID：14887599
> 
> 赞同：7
> 
> 时间：2013-02-15T02:48:03.863
> 
> 标签：android, android-calendar

我有一个 Android 应用程序，我想将它用于测试目的，在到期日期之后，应用程序必须显示一个对话框并阻止命令。

这是我的代码来显示对话框和阻止命令

```
public void expired(){
    bt1.setEnabled(false)
    bt2.setEnabled(false)
    bt3.setEnabled(false)
    bt4.setEnabled(false)
    bt5.setEnabled(false)
Alerts.AppExpiredMessage(Home.this);
} 
```

但是如何在表单中设置Android中的到期日期

```
if(appLicenseExpired){
void expired();
} 
```

验证实际日期是否早于设定的到期日期（例如 2013 年 3 月 3 日）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T03:12:50.617

截至 2014 年 12 月 31日的以下套装`isExpired`：

```
GregorianCalendar expDate = new GregorianCalendar( 2013, 11, 31 ); // midnight
GregorianCalendar now = new GregorianCalendar();

boolean isExpired = now.after( expDate ); 
```

注意：月份是从 0 开始的。一月 = 0，十二月 = 11。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T02:59:32.573

首先，没有一种方法可以 100% 保证防止黑客入侵，因为有经验的程序员拥有 root 手机几乎可以做任何事情（包括反编译您的应用程序并对其进行黑客攻击）

最简单的方法是将到期日期设为固定日期，您可以在应用程序中简单地对其进行硬编码。

如果您想让应用程序在安装时间（例如 30 天）后的一段时间后过期，只需首先获取手机标识符（例如 IMEI）和/或 Android 帐户（例如电子邮件），然后将其存储到服务器安装日期。您也可以将安装日期存储在手机上（例如 SharedPreference），这样您就可以检查每次运行而无需访问服务器。

**编辑**

检查到期日期的最简单方法是使用`System.currentTimeMillis()`以避免处理 TimeZone。您可以使用[Epoch Time Converter](http://www.esqsoft.com/javascript_examples/date-to-epoch.htm)等在线服务来了解到`epoch`期日期的值并在您的代码中检查它

```
if(System.currentTimeMillis() >= EXPIRY_EPOCH){

} 
```

# python - 硒没有连接

> ID：14887601
> 
> 赞同：0
> 
> 时间：2013-02-15T02:48:07.830
> 
> 标签：python, unit-testing, sockets, selenium

我试图进行一些测试，却遇到了障碍，

这是被捕获的脚本的开始。

```
from selenium import selenium
import subprocess
import time
import sys
import socket
from os.path import dirname
import unittest
from pushdata import push

class selenium_tests(unittest.TestCase):

    @classmethod
    def setUpClass(self):
        directory = dirname(__file__)
        path = directory + '/selenium-server-standalone-2.28.0.jar'
        sub = subprocess.Popen('exec java -jar ' + path,
                               stdout=subprocess.PIPE,
                               stderr=subprocess.STDOUT,
                               shell=True)
        self.selenium_server = sub
        count = 0
        while True:  # ensure the server is established
            try:
                self.selenium = selenium("localhost",
                                         4444,
                                         "*chrome",
                                         "http://127.0.0.1:8000/resources/")
                self.selenium.start()
                break
            except socket.error, v:
                count += 1
                if count == 10:
                    message = "- Selenium server took to long to establish"
                    print "\n", v, message
                    sys.exit()
                time.sleep(1) 
```

要运行测试，我使用以下命令：

```
python -m unittest -v selenium_tests_mod 
```

这引发了：

```
[Errno 111] Connection refused - Selenium server took to long to establish 
```

所以我知道它无法建立连接，只是不知道为什么？

注意：当我使用 django 测试框架运行它时，它可以工作，而不是当我尝试手动运行它时

编辑：

当我在单独的 shell 中运行 selenium 服务器时，它可以工作

```
java -jar selenium-server-standalone-2.28.0.jar 
```

所以现在我假设这可能是原因：

```
sub = subprocess.Popen('exec java -jar ' + path,
                               stdout=subprocess.PIPE,
                               stderr=subprocess.STDOUT,
                               shell=True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T02:52:57.513

算出来了

```
dirname(__file__) 
```

正在返回一个空字符串，因此四处搜索并发现：[查找当前目录和文件的目录](https://stackoverflow.com/questions/5137497/find-current-directory-and-files-directory)

所以 Piotr Dobrogost 发布的答案是使用

```
dirname(realpath(__file)) 
```

# ruby-on-rails - Rails 数据库设计：组合、排序

> ID：14887603
> 
> 赞同：0
> 
> 时间：2013-02-15T02:48:18.330
> 
> 标签：ruby-on-rails, database, sorting, model

在我的居民协会 Rails 数据库中，我有 User、Plot 和 House 模型。（空地，拥有一栋或多栋房屋的地块，业主或租户居住的地方）。从数据库的角度来看，我将需要各种关系，例如

*   PlotHouse - plot_id 上的 house_id
*   PlotOwnership - user_id 拥有 plot_id
*   HouseOwnership - user_id 只拥有 house_id 但不拥有地块
*   出租 - user_id 出租 house_id
*   亲属 - 业主或租户的关系

从功能和用户界面的角度来看，我需要具有不同角色的成员模型 - PlotOwners、HouseOwners、Tenants、Owner's Relatives、Tenant's relatives。我可以用现有的模型和关系做到这一点。

问题：在显示居民时，我无法根据用户或房屋属性中的任何一个对它们进行排序，因为它们来自不同的表。如果我使用来自 User、Plot、House 模型的列创建成员模型，我将复制这些列，因此存在数据库中不一致的风险。

我有 CS 背景，但不是生产级数据库设计、Rails 或其他。由于经常需要成员数据，只要我可以在系统中强制执行完整性，复制这些列是否合理？除了对内存中的数据进行排序之外，还有其他选择吗？

我将不同角色的成员视为报告，但由于经常需要它们，因此需要保留它们，因此需要重复查看，但用户/绘图/模型的基本模型似乎是管理员没有重复的方法。我的理解有差距吗？

*   贾亚万特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:32:44.260

我认为你可以用四个模型来做到这一点。

1.  用户（id，其他列）
2.  绘图（id，其他列）
3.  房屋（id、plot_id、其他列）
4.  UserAssociation/一些直观的名称，用于将用户与地块/房屋相关联（id、user_id、associable_id、associable_type、角色）

您可以使用[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)将您的用户与仅来自一个模型的地块和房屋相关联。以下是您需要的关联。

```
class User < ActiveRecord:Base
  has_many :user_associations
  has_many :plots, :through => :user_associations, :source => :associable, :source_type => 'Plot'
  has_many :houses, :through => :user_associations, :source => :associable, :source_type => 'House'
end

class Plot < ActiveRecord:Base
  has_many :houses
  has_many :user_associations, :as => :associable
  has_many :users, :through => :user_associations
end

class House < ActiveRecord:Base
  belongs_to :plot
  has_many :user_associations, :as => :associable
  has_many :users, :through => :user_associations
end

class UserAssociation < ActiveRecord:Base
  belongs_to :user
  belongs_to :associable, :polymorphic => true
end 
```

# c# - 如何将目录和文件从一个外部复制到另一个 C# 控制台

> ID：14887605
> 
> 赞同：1
> 
> 时间：2013-02-15T02:48:25.233
> 
> 标签：c#, file, directory, copy

我在外部驱动器出现故障时非常幸运，并且在很多情况下几乎失去了一切。最后，我有了创建一个控制台应用程序的想法，该应用程序可以自动“突袭”我的两个驱动器。现在就获取目录信息而言，我得到了它。出于某种原因，尽管当我尝试从一个复制到另一个时，它说访问被拒绝？有任何想法吗？这是我到目前为止所做的。（我只是先做我的电影和电视测试）

错误是“未经授权的访问例外：访问路径 'D:\External Backup\Movies and TV\Alien Quadrilogy' 被拒绝。”

```
 string _movieDIR = @"D:\External Backup\Movies and TV";
        string _movieDIR2 = @"G:\TEMP";
        string[] movies = Directory.GetDirectories(_movieDIR);

        foreach(string movie in movies)
        {
            File.Copy(movie, _movieDIR2);
        }
        Console.ReadLine(); 
```

## 更新完成的代码

```
 string _movieDIR = @"D:\External Backup\Movies and TV";
        string _movieDIR2 = @"G:\Movies and TV";
        string[] movies = Directory.GetDirectories(_movieDIR);

        if(Directory.Exists(@"G:\Movies and TV")){
            Console.WriteLine("Purging old Movies Folder in G:");
            Directory.Delete(@"G:\Movies and TV",true);
        }
        Console.WriteLine("Creating New Movies Folder in G:");
        Directory.CreateDirectory(@"G:\Movies and TV");

        double size = movies.Length;
        double percent = 0.00;
        double counter = 0;

        foreach(string movie in movies)
        {

           Console.Write("\n\nCopying " + movie.ToString());
           int pos = movie.IndexOf(@"V\");
           Microsoft.VisualBasic.FileIO.FileSystem.CopyDirectory(movie, _movieDIR2+ @"\" + movie.Substring(pos+2).ToString(),true);

           counter++;               
           percent = (counter / size)*100;
           percent = Math.Round(percent,2);
           Console.WriteLine("\n\nPercent Copied " + percent + "%\n\n");
        }
        Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T03:05:19.513

如果要复制目录，可以使用命名空间中的方便`FileIO`方法`Microsoft.VisualBasic`。

```
 string _movieDIR = @"D:\External Backup\Movies and TV";
    string _movieDIR2 = @"G:\TEMP";
    string[] movies = Directory.GetDirectories(_movieDIR);

    foreach(string movie in movies)
    {
        Microsoft.VisualBasic.FileIO.FileSystem.CopyDirectory(_movieDIR, _movieDIR2);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T03:33:12.607

这不是您认为的“权限”问题。每个说这是因为您将文件夹传递给期望文件的 API 的人都是正确的。这可以很简单地验证（在此处使用 powershell）：

```
ps c:\temp> [io.file]::openwrite("c:\temp")
Exception calling "OpenWrite" with "1" argument(s): "Access to the path 'c:\temp' is denied."
At line:1 char:1                                                                             
+ [io.file]::OpenWrite("c:\temp")                                                            
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~                                                            
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException                
    + FullyQualifiedErrorId : UnauthorizedAccessException 
```

是的，这有点奇怪，但这完全是故意的。底层的 win32 API 将返回一个访问被拒绝的 HR，最终成为 .NET 阿联酋。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T03:39:18.977

现在我回到办公桌前，我可以完全回答了。

您的代码不正确。该`File.Copy`方法的定义是：

```
string sourceFileName, string destFileName 
```

您需要为两者提供完整路径。所以：

```
foreach(string movie in movies)
{
    File.Copy(movie, _movieDIR2 + "\\" + Path.GetFileName(movie));
    //                          ^^^^^ Extract the filename and append it to the directory
} 
```

本质上，您是在说：

```
Copy D:\file.avi to G:\ 
```

当你应该说：

```
 Copy D:\file.avi to G:\file.avi 
```

我已验证您的代码适用于上述修复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T02:57:55.153

看起来您正在使用 File.Copy 尝试复制目录。

尝试使用以下链接中示例中的代码：http: [//msdn.microsoft.com/en-us/library/cc148994.aspx](http://msdn.microsoft.com/en-us/library/cc148994.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T03:00:26.987

您正在尝试复制目录，但您不能。您需要遍历每个文件并单独复制它们。您还需要一些代码来确保在目标目录中复制正确的文件夹树

# sql - 部署 Worklight 项目时出错

> ID：14887607
> 
> 赞同：-3
> 
> 时间：2013-02-15T02:48:39.560
> 
> 标签：sql, adapter, ibm-mobilefirst

您好，我正在运行来自[http://www.ibm.com/developerworks/mobile/worklight/getting-started/的示例模块 6.1](http://www.ibm.com/developerworks/mobile/worklight/getting-started/)

启动 worklight 服务器时出现以下错误：

事务期间发生意外异常，回滚：java.lang.RuntimeException：无法从适配器文件夹中提取适配器名称

事务回滚：1535419154（新：true；已完成：false；rollbackOnly:false） FWLSE0074E：从数据库同步适配器失败。com.worklight.integration.services.impl.DeployServiceImpl$ClusterSyncAdaptersTransaction.run(DeployServiceImpl.java:441) com.worklight.integration.services.impl.DeployServiceImpl$ClusterSyncAdaptersTransaction.run(DeployServiceImpl.java:420) com.worklight.core。 util.RssBrokerUtils.doInTransaction(RssBrokerUtils.java:119) com.worklight.integration.services.impl.DeployServiceImpl.syncAdaptersFromDBTransaction(DeployServiceImpl.java:417) com.worklight.gadgets.bean.ClusterDataSynchronizationTask.step(ClusterDataSynchronizationTask.java:

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-15T13:43:29.523

我知道这已经晚了大约两年，但我自己也遇到了这个问题，并且能够通过一些猜测来解决它。万一有人从谷歌来到这里......

1.  停止 Liberty Worklight 开发服务器
2.  右键单击它并选择“下次启动时清理服务器”
3.  再次启动 Liberty 服务器
4.  重新安装适配器

自从这样做以来，我再也没有遇到同样的问题。我不确定我的适配器名称是否有问题，或者只是侥幸，但如果我发现我会更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T23:18:29.347

得到它的工作。似乎我的 Eclipse 安装或 Windows 上的 Java 存在问题。所以我切换回导致我的 Eclipse 和 Java 安装在 IOS 上并且一切正常。此外，IBM 文档还不清楚，但现在我在我的 Project\server\lib 文件夹中使用 mysql-connector-java-5.1.23-bin.jar。

# html - 固定菜单，但主体覆盖菜单

> ID：14887608
> 
> 赞同：0
> 
> 时间：2013-02-15T02:48:56.283
> 
> 标签：html, css

我试图在这个网站上制作一个固定菜单：[http ://www.thethingswemake.co.uk/web_carsonified.htm](http://www.thethingswemake.co.uk/web_carsonified.htm)

菜单是固定的，就像我想要的一样，但是主包装器在菜单的顶部而不是在菜单的下方：这就是我所拥有的[http://jsfiddle.net/qacaT/](http://jsfiddle.net/qacaT/)

HTML：

```
<div id="topWrapper">
    <div id="topContainer">
         <a href="index.html">
        <header id="top_header">
            <h1>MacroPlay Games</h1>
        </header>
    </a>

    <nav id="topnav">
        <ul>
            <a href="index.html"><li>Home</li></a>
            <a href="about.html"><li>About</li></a>
            <a href="video.html"><li>Trailers</li></a>
            <button type="button" data-state="0" style="float:right">Cinema Mode</button>
        </ul>
    </nav>   

        <div id="logoTop"></div>
        <div class="clear"></div>
    </div>
</div>

<div id="wrapper">
        <div id="body_div">
        <div id="dimPlayer" class="dim"></div>
        <div id="video_container">
            <video id="trailers" poster="poster.jpg">
                <source src="vLast.mp4" type="video/mp4">
                <source src="vLast.webm" type="video/webm">
            </video>
            <nav>
               <div id="controls" class="cAnimated cFadeInRight">
                    <div id="defaultBar">
                        <div id="progressBar"></div>
                    </div>
                    <button id="playButton">Play</button>
                    <button id="vol" onclick="showSlider()">Vol</button>      
                    <button id="containSlider"> 
                                <input type="range" id="vSlider" min="0" max="1" step="0.1" value="0.5"/></button>
                    <div id='containTime'><span id='timeDisplay'>0:00</span><span>/</span><span id='duration'>0:00</span></div>
                    <button id="full">Full</button>
                    <button id="mute">Mute</button>

               </div> 
               <div id="playlist" class="animated fadeInRight">
                    <div class="thumb" id="tb1"><img src="TbGow.jpg" onClick="changeTrailer('vGow')"/></div>
                    <div class="thumb" id="tb2"><img src="TbLast.jpg" onClick="changeTrailer('vLast')"/></div>
                    <div class="thumb" id="tb3"><img src="TbTwo.jpg" onClick="changeTrailer('vTwo')"/></div>
               </div>
            </nav>
        </div>

    <aside id="sidebar">
    <div id="side_events">
        <h1>News</h1>
        <ul id="events">
            <li>Half-Life 3 Release: <time>04/01/13</time></li>
            <li>Borderlands 3 Release: <time>05/29/13</time></li>
            <li>E3 2013 Starting: <time>08/11/13</time></li>
            <li>Playstation 4 Release: <time>08/31/13</time></li>
            <li>Xbox 720 Release: <time>09/01/13</time></li>
        </ul>
    </div>

        <div id="side_trailer">
            <a href="video.html"><img src="TbGow.jpg" /></a>
        </div>

    <div id="side_advert">
        <img src="http://i.imgur.com/W65o9R2.jpg" alt="Blackberry's Z10" title="Blackberry's Z10" id="advert">
    </div>                     
</aside>

</div>

<footer id="footer">
    &copy; Copyright  by SimKessy
</footer> 
```

CSS：

```
#topWrapper {
    /*border:1px solid #00ffff;*/
    background-color:#0d0d0d;
    text-align:center;
    position:fixed;
    width:100%;
}
#topContainer {
    /*border:1px solid #00ff00;*/
    height:56px;
    width:784px;
    margin:0px auto;
    text-align:left;
    padding:0px 0px 0px 0px;
}
#wrapper{
    max-width: 850px;
    display: -moz-box;
    display: -webkit-box; /*means this is a box with children inside*/
    -moz-box-orient:vertical;
    -moz-box-flex:1;
    -webkit-box-orient:vertical;
    -webkit-box-flex: 1; /*allows site to grow or shrink 1 = flex 0 = statix*/
    background-color: #B137D6;
    margin: 0px auto;
    position: static;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:52:39.930

您需要将“z-index”css 属性添加到菜单中。菜单必须具有比包装器更大的 z-index 才能保持在顶部。例子：

```
#menu {
z-index:2;
}

#wrapper {
z-index:1;
} 
```

默认情况下，所有元素都有`z-index:0;`，所以如果你只添加`z-index:1;`到菜单中你是安全的。

添加 z-index 后，您需要为 #body div 提供上边距，如下所示：

```
#body_div{
    display: -webkit-box;
    -webkit-box-orient:horizontal;
    display: -moz-box;
    -moz-box-orient:horizontal;
    color:#000000;
    margin-top:200px;

} 
```

查看更新的 jsfiddle：http: [//jsfiddle.net/qacaT/1/](http://jsfiddle.net/qacaT/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T02:52:52.910

请使用 z-index 属性

```
#topWrapper {
/*border:1px solid #00ffff;*/
background-color:#0d0d0d;
text-align:center;
position:fixed;
width:100%;
z-index:9999; /*like this*/
} 
```

# python - 以像素为单位指定 Tkinter 文本框的尺寸

> ID：14887610
> 
> 赞同：32
> 
> 时间：2013-02-15T02:49:00.030
> 
> 标签：python, tkinter

如何使用像素指定 Tkinter 文本框的尺寸？我不是要更改字体大小，而是使用它来帮助我将其缩放到窗口的大小。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-15T14:47:14.070

您可以通过将其放在框架内，通过停用大小传播并将条目配置为固定到框架边界来强制框架为固定大小。也应该以类似的方式与 pack 一起工作。

```
import Tkinter  # tkinter with small t for python 3
#import ttk  # nicer widgets

root = Tkinter.Tk()

mainFrame = Tkinter.Frame(root)
mainFrame.grid()
button = Tkinter.Button(mainFrame, text="dummy")
button.grid()

entryFrame = Tkinter.Frame(mainFrame, width=454, height=20)
entryFrame.grid(row=0, column=1)

# allow the column inside the entryFrame to grow    
entryFrame.columnconfigure(0, weight=10)  

# By default the frame will shrink to whatever is inside of it and 
# ignore width & height. We change that:
entryFrame.grid_propagate(False)
# as far as I know you can not set this for x / y separately so you
# have to choose a proper height for the frame or do something more sophisticated

# input entry
inValue = Tkinter.StringVar()
inValueEntry = Tkinter.Entry(entryFrame, textvariable=inValue)
inValueEntry.grid(sticky="we")

root.mainloop() 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-11-15T19:41:41.900

我有同样的问题，似乎最简单的答案是实例化一个指定大小的 Frame 对象，打包它，然后使用 place 方法在其中放置和调整小部件的大小。我发现对 Frame 对象调用 pack_propagate(0) 方法是不必要的。

这是一小段代码，它在几个小部件上举例说明了这种方法。

根据您的问题，此脚本中实例化的最后一个小部件是一个文本框小部件，其大小以像素为单位。

```
from Tkinter import * #For python 3 use: from Tkinter import *

root = Tk()
root.title("Fee Fie Foe Fum")
frame=Frame(root, width=300, height=160)
frame.pack()
button1 = Button(frame, text="Mercy!")
button1.place(x=10, y=10, height=30, width=100)
button2 = Button(frame, text="Justice!")
button2.place(x=10, y=50, height=30, width=100)
text1 = Label(text="Verdict:")
text1.place(x=10, y=90)
tbox1 = Text(frame)
tbox1.place(x=10, y=115, height=30, width=200)

root.mainloop() 
```

当然，这确实将您锁定在设计 Tkinter UI 的 place 方法中，但它确实允许您以像素为单位指定许多小部件的尺寸。随后在子小部件上使用 pack 方法将覆盖您的展示位置和大小。

如果您以面向对象的方式表达您的代码可能会更好地组织它，但这个示例仅显示了以像素而不是其他单位来完成小部件大小调整所需的操作序列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-08T18:55:10.350

像这样做：

```
from tkinter import *
root = Tk()
t = Text(root)
t.pack(fill=BOTH, expand=1)
root.mainloop() 
```

the`fill=BOTH`和 the`expand=1`是最重要的部分。它们使它随窗口一起扩展，如果没有它们中的一个，窗口就不会向某个方向扩展。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-28T10:03:43.733

这是我的做法。我将 Text 对象的尺寸放在 place 标记内

```
 firstname = Text()
    firstname.place(x = 170, y = 20, height = 25, width = 200) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-05T08:06:01.220

这对我帮助很大：

> 您还可以使用高度和宽度选项来显式设置大小。如果您在按钮中显示文本，这些选项以文本单位定义按钮的大小。如果您改为显示位图或图像，它们以像素（或其他屏幕单位）为单位定义大小。您甚至可以为文本按钮指定像素大小，但这需要一些技巧。这是一种方法（还有其他方法）：
> 
> f = Frame(master, height=32, width=32) f.pack_propagate(0) # 不收缩 f.pack()
> 
> b = Button(f, text="Sure!") b.pack(fill=BOTH, expand=1)

来源：[http ://effbot.org/tkinterbook/button.htm](http://effbot.org/tkinterbook/button.htm)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-12-19T17:53:45.277

您不能将`width`Text 的选项设置为表示字符数的整数以外的任何值。但是当您知道您的字体时，您可以计算该字体中字符串的宽度。相反，如果您知道您希望 Text 的宽度是多少像素，则可以计算多少字符适合该像素长度并将 Text 宽度设置为该字符数（大致）。使用固定宽度的字体很简单，但使用可变宽度的字体会变得更棘手。

文本小部件的默认字体是“TkFixedFont”。

```
import tkinter as tk
tk.font.Font(font='TkFixedFont').actual() 
```

给出：

> {'family': 'Courier New', 'size': 10, 'weight': 'normal', 'slant': 'roman', 'underline': 0, 'overstrike': 0}

它可能不是问题的完美答案，但它可以让您获得接近的东西，而无需引入额外的小部件。如果你想要更精确的东西，框架包装器可能是要走的路。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-15T03:03:56.843

这是我经常这样做的方式：

```
from tkinter import *

class App:
    def __init__(self):
        self.tk = Tk()
        self.canvas = Canvas(self.tk, width = 500, height = 500)
        self.canvas.pack() 
```

这会将每个方向的尺寸设置为 500 像素。当你创建这个类的一个实例时，它会显示一个这个大小的窗口。希望这可以帮助！

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-10-04T21:01:13.783

可以使用configure设置高度

```
var = tk.Text(self)
var.configure(height=1) 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2020-04-16T16:24:33.417

```
entry_2 = Entry(win, justify = 'center')
entry_2.grid(row =2,column = 7,ipadx=10, ipady=10) 
```

# android - listview在android的每个列表项中都有viewpager

> ID：14887619
> 
> 赞同：4
> 
> 时间：2013-02-15T02:51:02.753
> 
> 标签：android, listview, android-viewpager

在将数据设置为列表视图中的列表项时，我需要您的帮助。在我的列表视图中，每个项目都有一个 ViewPager，每个 viewpager 应该有不同的数据。我不知道如何为每个 viewpager 设置不同的数据。实际上基于 listitem 索引我需要设置数据查看器。请仔细阅读我粘贴在下面的代码片段并尝试帮助我。

```
public class MyListAdapter extends BaseAdapter {

private Activity activity;
private String [] titleData;
private int [] imageData;
private static LayoutInflater inflater=null;

private int iListPosition;
private GraphicalView graphView ;
ListView dashListView;
private Context context;
public MyListAdapter(View listView, Activity a, String[] titles, int[] images) {
    activity = a;

    context = a.getApplicationContext();
    dashListView = (ListView)listView;
}

public int getCount() {
    return titleData.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    iListPosition = position;
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) activity.getApplicationContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.dash_board_list_row, parent, false);

MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) rowView.findViewById(R.id.threepageviewer);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);

    return rowView;
} 

private class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
            return 3;
    }

    public Object instantiateItem(View collection, int position) {

            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            int resId = 0;
            switch (position) {
            case 0:
                    resId = R.layout.weight_middle;

                    break;
            case 1:
                    resId = R.layout.weight_left;
                    break;
            case 2:
                    resId = R.layout.weight_right;
                    break;
            }

            View view = inflater.inflate(resId, null);
            if(resId == R.layout.weight_left  && iListPosition == 0){
            LinearLayout layout = (LinearLayout) view.findViewById(R.id.chartView);
            layout.addView(graphView);
           }

            ((ViewPager) collection).addView(view, 0);

            return view;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
            ((ViewPager) arg0).removeView((View) arg2);

    }

    @Override
    public void finishUpdate(View arg0) {
            // TODO Auto-generated method stub

    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
            return arg0 == ((View) arg1);

    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {
            // TODO Auto-generated method stub

    }

    @Override
    public Parcelable saveState() {
            // TODO Auto-generated method stub
            return null;
    }

    @Override
    public void startUpdate(View arg0) {
            // TODO Auto-generated method stub

    }
}
} 
```

但是在这里，所有列表项的 Viewpagers 都设置了相同的数据。理想情况下，我的要求是设置不同的数据。如果您有/知道任何解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-15T14:06:29.487

将 Viewpager 用作 ListItem 是一个坏主意，在您的情况下，要使其正常工作，请进行以下更改。

```
 MyPagerAdapter adapter = new MyPagerAdapter(position); 
```

在 PagerAdapter 中：

```
private class MyPagerAdapter extends PagerAdapter {
    int mListPosition;
MyPagerAdapter(int listPosition) {
   mListPosition = listPosition;
}
public int getCount() {
        return 3;
} 
```

在开关中：

```
 switch (mListPosition) {
......
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T13:44:19.983

尝试这个

1) 使用其中的 ViewPager 设计您的项目布局。2）注意您的适配器代码以根据项目位置填充 viewpager 3）在 Viewholder 中保留 Viewpager 的引用

我认为应该这样做。此外，从 UI 的角度来看，将 ViewPager 放在每个列表视图项中是个坏主意。您可以尝试在 listItem 中单击某些按钮时过度打开。

# asp.net-mvc - MVC 下拉列表：设置类名和默认选中项

> ID：14887621
> 
> 赞同：0
> 
> 时间：2013-02-15T02:51:22.707
> 
> 标签：asp.net-mvc, drop-down-menu, selecteditem

我有一个下拉使用

```
@Html.DropDownListFor(model => model.param, new SelectList
      (Model.MyList, "Value", "Text"), "Select") 
```

这会将列表的第一项设置为“选择”。我有两个问题：我可以为这个下拉列表和选定的值分配一个类吗？我试过

```
 @Html.DropDownListFor(model => model.param, new SelectList
      (Model.MyList, "Value", "Text"), new{@class="clname", @value="Select") 
```

但它不起作用

另外，我可以为默认文本设置一个值，`select`这样它的值就不会是空字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:27:36.773

我将我的选择列表加载到控制器中。所以它作为视图模型的一部分出现在页面上。

以下将加载带有 css 类的下拉列表，`clname`第一个选项将是`"-- Select --"`

```
@Html.DropDownListFor(model => model.param, 
          Model.MySelectList, 
          "-- Select --", 
          new { @class = "clname"}) 
```

> 另外，我可以为默认文本选择设置一个值，使其值不会是空字符串吗？

为此，您应该使用适当的值在控制器中加载选择列表。

视图模型：

```
public class HomeViewModel
{
    public string MyParam {get;set;}
    public List<SelectListItem> MySelectList {get;set;}
} 
```

控制器：

```
public class HomeController
{
    public ActionResult Index()
    {
          var model = new HomeViewModel();
          // to load the list, you could put a function in a repository or just load it in your viewmodel constructor if it remains the same.
          model.MySelectList = repository.LoadMyList();
          model.MyParam = "Select"; // This will be the selected item in the list.
          return View(model);
    }
} 
```

看法：

```
@model MyProject.HomeViewModel

<p>Select:
@Html.DropDownListFor(model => model.MyParam, 
          Model.MySelectList, 
          new { @class = "clname"})
</p> 
```

希望这说明清楚。

# caching - 指定 EclipseLink 2.0.2 最大缓存大小以防止其增长以消耗所有可用 JVM HEAP 的方法

> ID：14887623
> 
> 赞同：0
> 
> 时间：2013-02-15T02:51:27.267
> 
> 标签：caching, jpa-2.0, eclipselink

我所有的业务方法都会创建一个新的 EntityManager 并在 finally 块中显式关闭它们。

```
 EntityManagerFactory entityManagerFactory = PersistenceManager.getInstance().getEntityManagerFactory(); //Singleton
            EntityManager em = entityManagerFactory.createEntityManager();
            EntityTransaction tx = em.getTransaction();
            try {
                tx.begin();
                em.persist(someEntity);
                tx.commit();

            } 
            catch (Exception e) {
                e.printStackTrace();
            }
            finally {
                if (em!=null) {
                    em.close();
                }
            } 
```

我定义了一个非常基本的 persistence.xml 文件。除了数据库连接信息之外，我并没有真正指定任何其他内容。

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="db" transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>package.class</class>
        <exclude-unlisted-classes>false</exclude-unlisted-classes>
        <properties>
            <property name="eclipselink.logging.level" value="INFO" />
            <property name="javax.persistence.jdbc.driver" value="org.postgresql.Driver" />
            <property name="javax.persistence.jdbc.url"
                value="url" />
            <property name="javax.persistence.jdbc.user" value="scott" />
            <property name="javax.persistence.jdbc.password" value=tiger" />
        </properties>
    </persistence-unit>
</persistence> 
```

我在应用程序中看到的行为是分配的内存开始增长并最终达到最大限制，直到我开始出现内存不足错误。一段时间后，这些错误清除，JVM 分配的堆恢复到最大值的 95% 左右。我假设此时发生了 GC，尽管我没有附加分析器来确认。

这被认为是默认行为吗？调整缓存的一些最佳实践是什么。我可以在 persistence.xml 文件中设置哪些属性来限制最大缓存大小？我可以在全球范围内进行还是需要为每个实体类定义它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:15:11.360

如果不使用分析器查看它，很难说出是什么保留了你的记忆。最常见的原因通常是重用 EntityManager 而不清除它们，因为 EntityManager 需要在其生命周期内保留每个托管实体，除非被清除。您没有使用您显示的持久实体的代码来执行此操作，但您没有显示您如何读取它们，因此它可能是可能的，并且在用户自己管理 EntityManagers 而不是让容器执行时更常见它为他们。

要回答有关 EclipseLink 缓存的问题：EclispeLink 有一个二级缓存，它将保留内存。此处显示了不同的缓存类型和选项 [http://www.eclipse.org/eclipselink/documentation/2.4/concepts/cache002.htm](http://www.eclipse.org/eclipselink/documentation/2.4/concepts/cache002.htm) 默认情况下，它使用一个softweakidentitymap，它有两个部分；使用软引用的缓存和使用弱引用的标识映射。如果您的应用程序不再被引用，软引用允许对对象进行垃圾回收，并且默认情况下每个描述符的大小为 100。

[JPA 的缓存选项在此页面http://wiki.eclipse.org/EclipseLink/Examples/JPA/Caching](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Caching)上进行了讨论 ，您可以关闭共享缓存以查看这是否有助于您的应用程序。我会很惊讶它有帮助。您提到在垃圾收集发生后仍保留 95% 的应用程序内存，这表明应用程序仍然具有对资源的引用。

我建议您检查内存中的内容并评估您的应用程序中是否存在问题，或者只是您的应用程序需要比配置更多的内存量。

# mongodb - 数据集<1M的聚合查询性能和改进

> ID：14887626
> 
> 赞同：0
> 
> 时间：2013-02-15T02:52:06.637
> 
> 标签：mongodb, aggregation-framework

所以我正在使用 MongoDB 的聚合框架，并对当前包含大约 700K 文档的集合执行查询。这是查询：

```
 db.logs.aggregate(
    {'$match' : { 'tag' : 'TAG-XYZ' }},
    {'$project' : {
      'tag' : '$common_tag.bId'
    }},
    {'$unwind' : '$tag'},
    {'$group' : {
      '_id' : '$tag',
      'total' : {'$sum' : 1}
    }},
    {'$sort':{'_id':1}},
    {'$skip':0},
    {'$limit':20}
    ) 
```

`logs`包含大约 20 个字段。`tag`是一个平均包含 10 个标签的数组，它`common_tag`只是一个嵌入文档，它将一些分类标签与标签数组分开，以消除使用. 我使用分页，所以值是可变的。请注意，使用了查询，因此没有一组固定结果。`$unwind``tag``skip`

问题是查询至少需要 30 秒才能执行。我担心数据集不断增长，它可能不支持我的实时（或近实时）查询需求。有没有更好的方法来改进查询？

# asp.net-mvc - 在 MVC 中使用带有 Create 操作的 ViewModel 的正确方法

> ID：14887627
> 
> 赞同：0
> 
> 时间：2013-02-15T02:52:07.300
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我的控制器中有以下内容：

```
[HttpGet]
public ActionResult Create(int setId)
{
    // create new viewModel
    var model = new CreateCardViewModel() {SetId = setId, Sides = new List<string>(){"Front Side", "Back Side"}};

    return View(model);
} 
```

我应该将 int 传递给 CreateCardViewModel 来构建模型吗？或者这种方法合适吗？

ViewModel 是否经常包含业务逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:18:01.460

ViewModel 不包含业务逻辑。它们基本上是一个用于输出到视图的虚拟类。

我不会说有一种“正确”的方式来加载 ViewModel，但有多种方法可以做到这一点。我个人在 viewmodel 的构造函数方法中加载页面的任何**默认值**，并在控制器中加载任何特定于页面的内容，就像您在示例中一样。

我还使用了一个基本视图模型，它被设置为`_layout`页面的模型。这包含您的页面标题/元内容/等内容。

例如

```
public abstract class BaseViewModel
{
    public string Title {get;set;}

}

public sealed class HomeViewModel : BaseViewModel
{
    public string HomeText {get;set;}
} 
```

我不相信这样的方法是对还是错，只要使用你觉得舒服的技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:13:31.913

如果您想确保将对象放在一个地方，构造函数很有用。它们有助于避免对象在无效状态下初始化的情况（例如，您忘记设置对象属性之一，这是进一步处理所必需的）。在视图模型的情况下，最好有输出模型的构造函数。但是您不能对输入模型（操作方法的参数）使用构造函数，因为它们被需要公共构造函数的 MVC 运行时反序列化。

# sql - 触发器从不同的表中减去

> ID：14887636
> 
> 赞同：-1
> 
> 时间：2013-02-15T02:53:08.353
> 
> 标签：sql, sql-server, sql-server-2005, triggers

我有两张桌子

```
Table Number1              Table:  Number2 

Position1                    Position2
   2                           2
   3                           3
   4                           1 
```

**表 Number3**将是**Number1 - Number2**的结果。
我怎么能触发这样做呢？
我一直在寻找，但它只是说我不能做那样的事情。请给我一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:57:54.583

你不能这样做，因为你不能轻易找到“最后”行。您需要一个 ID 或创建日期或版本。

将接近您想要的 SQL 查询是：

```
select n1.number - n2.number
from (select n1.*, row_number() over (order by (select null)) as seqnum
      from number1 n1 
     ) n1 join
     (select n2.*, row_number() over (order by (select null)) as seqnum
      from number2 n2
     ) n2
     on n1.number = n2.number 
```

这会尝试为每个表中的行按顺序分配一个序号。但是，这并不能保证。它可能适用于小桌子。当您只有一个线程进行处理时，它可能会起作用。但没有任何保证。

# java - XADisk - 试图将字节数组保存到文件中

> ID：14887643
> 
> 赞同：0
> 
> 时间：2013-02-15T02:55:34.440
> 
> 标签：java, xadisk

每当我尝试使用[XADisk](http://xadisk.java.net/)将 byte[] 保存到文件时，我都会收到 XASystemNoMoreAvailableException：

org.xdisk.filesystem.exceptions.XASystemNoMoreAvailableException：XADisk 实例遇到严重问题，不再可用。这种情况非常罕见。如果您认为您已经为 XADisk 工作设置了正确的设置，请考虑在 XADisk 论坛中讨论，或提出带有详细信息的错误

根据示例，我的代码是最基本的......

```
public static void main(String[] args) throws Exception
{
    StandaloneFileSystemConfiguration configuration = new StandaloneFileSystemConfiguration("xadiskFolder", "1");
    XAFileSystem XAF = XAFileSystemProxy.bootNativeXAFileSystem(configuration);
    XAF.waitForBootup(-1);

    Session session = XAF.createSessionForLocalTransaction();

    byte[] myByteArray = getByteArrayFromSomewhere();

    File myFile = new File("outputFile.test");
    session.createFile(myFile, false);
    XAFileOutputStream output = session.createXAFileOutputStream(myFile, true);
    output.write(myByteArray);
    output.close();
    session.commit();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:26:25.847

愚蠢的错误！！

如果您调用，可能会导致此异常

```
XAF.shutdown(); 
```

在您尝试写入/读取文件之前。在我的实际代码中，我使用包含关闭 xdisk 的代码的 finally 块而不是在 catch 中使用 try/catch/finally。不要问我为什么。在任何情况下，因为 xdisk 已经关闭，所以会导致错误。

如果可能的话，我会向 xdisk 的人们推荐的是改进更新中的异常。基本上是说引擎没有运行或已经关闭。是的，这是我的错，但如果也有更好的异常消息也会很棒。

# android - android webview-youtube嵌入不起作用

> ID：14887645
> 
> 赞同：0
> 
> 时间：2013-02-15T02:55:50.037
> 
> 标签：android, html

嗨，我正在尝试在 android 中嵌入 youtube 视频。这就是屏​​幕上显示的内容 - [http://imgur.com/5YEVq24](http://imgur.com/5YEVq24)

这是我的 webview 代码

```
<img src="illustration.jpg" />
<video src="http://www.youtube.com/watch?v=dvWy9NXiZZI"  width="320" height="240" autobuffer controls onclick="this.play();"/> 
```

图像显示正常，但图像下方的视频没有显示，当我点击它时也没有播放。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T08:52:22.620

清单中应用程序级别的这个小补充可以解决问题：

```
android:hardwareAccelerated="true" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T04:29:55.117

轻松解决。

只需使用 iframe 。

```
<iframe width="350" height="240" src="https://www.youtube.com/embed/VIDEO_ID" frameborder="0" allowfullscreen></iframe> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T03:20:15.237

你在你的webview中启用了javascript吗？如果不试试这个，我在这里启用 javascript

```
WebView web=(WebView) findViewById(R.id.webView1);
web.getSettings().setJavaScriptEnabled(true);
web.loadUrl("http://www.youtube.com/watch?v=dvWy9NXiZZI"); 
```

这是xml

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<android.webkit.WebView
    android:id="@+id/webView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</android.webkit.WebView> 
```

还有一个问题是，由于硬件资源有限，视频无法在某些设备上播放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T04:01:18.453

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.house"
android:versionCode="1"
android:versionName="1.0" xmlns:tools="http://schemas.android.com/tools"> 
```

尝试把“xmlns:tools="http://schemas.android.com/tools"

和清单中的 android:hardwareAccelerated="true"

```
<activity android:name="Main_Webview" android:hardwareAccelerated="true" android:theme="@android:style/Theme.NoTitleBar.Fullscreen" android:configChanges="orientation|keyboardHidden"></activity> 
```

# c++ - 应用程序可以为一个小部件的一个属性覆盖 gtk 主题吗？

> ID：14887646
> 
> 赞同：2
> 
> 时间：2013-02-15T02:55:54.317
> 
> 标签：c++, gtk

我正在编写一个 gtk 应用程序，但它与我的主题不符。具体来说，应用程序需要适合仅 50 像素宽的工具栏，并且需要包含进度条，但主题的 ProgressBar::min-horizo​​ntal-bar-width = 150（这是默认值）。我想在代码中告诉 gtk 这个特定的小部件可以忽略那个特定的样式属性。

我意识到我可以改变我系统的主题，但是如果我以后做任何与主题相关的事情，应用程序就会崩溃。我更喜欢一个强大的解决方案。

我也更喜欢保留主题其余部分的解决方案，因此进度条看起来很正常（除了更小）。

编辑：这是gtk3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T19:53:30.013

知道了！感谢@iain 为我指明了正确的方向。

```
GtkCssProvider* provider = gtk_css_provider_new();
const char* css = "GtkProgressBar#small { -GtkProgressBar-min-horizontal-bar-width: 1; }";
gtk_css_provider_load_from_data(provider, css, strlen(css), NULL);
GdkDisplay *display = gdk_display_get_default ();
GdkScreen *screen = gdk_display_get_default_screen (display);
gtk_style_context_add_provider_for_screen (screen,
                       GTK_STYLE_PROVIDER (provider),
                       GTK_STYLE_PROVIDER_PRIORITY_APPLICATION);
g_object_unref (provider);
peakProgressBar.set_name("small"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T11:56:40.193

是的你可以。您尚未指定是否需要 GTk+ 2 或 3。

在 2 中，您通过在代码中创建仅适用于命名小部件的资源来实现。然后您可以设置进度条的名称。

```
char *custom_theme = "style \"Custom\" { ProgressBar::min-horizontal-bar-width = 10 }\n widget \"*.GtkProgressBar.my_progress_bar\" style \"Custom\"";

. . .

// After you've initialised the gtk system
gtk_rc_parse_string (custom_theme); 
```

然后，每当您创建要忽略主题的进度条时，请致电

```
gtk_widget_set_name (progress_bar, "my_progress_bar"); 
```

它应该得到应用到它的自定义样式。

主题系统很难获得正确的路径，因此可能需要一些摆弄。

资源文件的文档在这里：http: [//developer.gnome.org/gtk2/stable/gtk2-Resource-Files.html](http://developer.gnome.org/gtk2/stable/gtk2-Resource-Files.html)

然而，所有这些都已被 GTK+ 3 弃用，虽然它应该仍然有效，但正确的方法是使用这里描述的 CSS 样式：http: [//developer.gnome.org/gtk3/stable/GtkCssProvider.html](http://developer.gnome.org/gtk3/stable/GtkCssProvider.html)但是我不得不承认我不确定它们是如何工作的，尽管我认为它是类似的，但是使用了类似 CSS 的语法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T21:02:42.837

谢谢，这对我也很有用。

对于一个小部件而不是添加到屏幕上，函数 gtk_widget_get_style_context() 和 gtk_style_context_add_provider() 可以使用......像这样：

```
void style_to_widget(GtkWidget * w, GtkStyleProvider * s)
{
    gtk_style_context_add_provider(gtk_widget_get_style_context(w),
                                   s, GTK_STYLE_PROVIDER_PRIORITY_APPLICATION);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-16T17:16:05.283

Gtk（和 Gtkmm）为此目的使用 CSS。我在下面解释的是设置您的程序以使用外部 CSS 文件，而不是与在 .cpp 文件中对其进行编码相关的现有答案。

# 准备自定义 CSS

您首先需要创建一个[CssProvider](https://developer.gnome.org/gtkmm/stable/classGtk_1_1CssProvider.html#details)、一个[Style Context](https://developer.gnome.org/gtkmm/stable/classGtk_1_1StyleContext.html#details)和一个[Screen](https://developer.gnome.org/gtkmm/stable/classGdk_1_1Screen.html#details)。

**在运行**程序之前，这三个对象需要在主循环中。

```
// Create CssProvider
Glib::RefPtr<Gtk::CssProvider> cssProvider = Gtk::CssProvider::create();
cssProvider->load_from_path("relative or absolute path to YourTheme.css");

// Create StyleContext
Glib::RefPtr<Gtk::StyleContext> styleContext = Gtk::StyleContext::create();

//get default screen
Glib::RefPtr<Gdk::Screen> screen = Gdk::Screen::get_default();

//add provider for screen in all application
styleContext->add_provider_for_screen(screen, cssProvider, GTK_STYLE_PROVIDER_PRIORITY_APPLICATION); 
```

# 使用 CSS

因为文档低于 Gtkmm，所以使用 Gtk+ 文档更容易找到小部件的“类”或“样式”名称。或者，您可以找到现有主题并打开它们的 CSS 文件以查找名称（'/usr/share/themes/'）。

Gtk/mm 遵循与普通 CSS 类似的选择器。

以下是您可以在[此处](https://developer.gnome.org/gtk3/stable/chap-css-overview.html)找到的完整列表的摘录（尽管被标记为 GTK+，但它适用于所有包装器，包括 Gtkmm）。

`*`任何节点。
`E`任何名称为“E”的节点。
`E.class`具有给定样式类的任何 E 节点。
`E#id#`具有给定 ID 的任何 E 节点。（GTK 使用小部件名称作为 ID）。
`E:nth-child`任何 E 节点，它是其父节点的第 n 个子节点。
`E:active, E:hover, E:focus`作为具有相应状态的小部件的一部分的任何 E 节点。
`E>F` 作为 E 节点的子节点的任何 F 节点。

## 例子：

以下是我用于我自己的一个程序的 CSS 的示例摘录。

```
.background{
	background-color: @shade0;
	color: @mainTextColour;
}

#EngineTabSidePanel > GtkGrid{

	background-color: @shade1;
}

/* BUTTONS:*/
.button{
	border: none;
	border-radius: 0;
	background-color: @shade1;
	color: rgb(175, 175, 175);
}

.button:insensitive{
	background-color: @shade0;
	color: rgb(150, 150, 150);
}

.button:hover {
	background-color: @shade2;
}

.button:active{
	background-color: @shade1;
}

.stack-switcher .button{
	border-bottom: 3.5px solid @primary_4;
}

.stack-switcher .button:checked,
.stack-switcher .button:active{
	background-color: @shade2;
	border-bottom: 7.5px solid @primary_0;
}

.stack-switcher .requires-attention{
	border-bottom: 7.5px solid @altprimary_0;
}
```

* * *

# 陷阱和附加链接：

*   如果您的 CSS 文件包含任何语法错误，程序*将无法运行*。
*   ID/类名称可能会相互混淆。例如，有一个 '.progressbar' 和一个 'GtkProgressBar'
*   与 Gtk 中的主题相关[的索引页面。](https://developer.gnome.org/gtk3/stable/theming.html)
*   特定于 GTK CSS[的页面。](https://developer.gnome.org/gtk3/stable/chap-css-overview.html)

# php - php5 上的 cURL 问题

> ID：14887650
> 
> 赞同：2
> 
> 时间：2013-02-15T02:56:41.023
> 
> 标签：php, curl, installation

我最近将我的服务器更改为 php5，以下代码在旧服务器（php 4）上运行良好，但现在它停止在我的新服务器（php5）上运行。它没有显示任何错误消息。

```
 ini_set('display_errors', true);
    ini_set('error_reporting', E_ALL);

    $ch = curl_init();                                                    
    curl_setopt($ch, CURLOPT_URL, $url); // set url to post to 
    curl_setopt($ch, CURLOPT_FAILONERROR, 1); 
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);// allow redirects 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); // return into a variable 
    curl_setopt($ch, CURLOPT_TIMEOUT, 10); // times out after 10s 
    curl_setopt($ch, CURLOPT_POST, 1); // set POST method 
    curl_setopt($ch, CURLOPT_POSTFIELDS, "category=".$heading."&county=".$county."&sorttype=1"); // add POST fields 

    $myHeader = array("Content-Type: application/x-www-form-urlencoded", "Accept-Charset: utf-8");
    curl_setopt($ch, CURLOPT_HTTPHEADER, $myHeader); 

    $result = curl_exec($ch); // run the whole process 

    curl_close($ch); 
```

如果在 php4 和 php5 之间有什么我需要关心的，请帮助我

# python - Python：如何在使用 for 循环和文件时对列表进行排序。（家庭作业）

> ID：14887652
> 
> 赞同：0
> 
> 时间：2013-02-15T02:57:01.540
> 
> 标签：python, file, list, for-loop

基本上，我需要将学生的姓名按列表的顺序归属于他们各自的成绩。所以这就是我到目前为止所拥有的：

```
def main(): 
```

定义 myFile 并打开/读取 grades.txt 文件

```
myFile = open("grade.txt", "r") 
```

定义作业、测验和考试的学生人数和成绩百分比

```
numStudents = int(myFile.readline())
prctgs = myFile.readline().split()
students = ["Amy", "Jack", "Arron", "Zack", "Jen", "Jane"] 
```

创建for循环遍历每个学生的分数

```
for i in range(numStudents): 
```

存储每个学生的成绩

```
stdntGrades = myFile.readline().split() 
```

计算成绩百分比

```
grade = 0
for j in range(len(prctgs)):
    grade = grade + float(prctgs[j]) * int(stdntGrades[j])
    print("Student #", i+1, ": ", " %.2f" % grade, sep="")

myFile.close()

main() 
```

'students' 是有问题的列表，我也曾尝试将名称直接输入到文件中，但失败得很惨

“grade.txt”文件包含以下内容：

```
6
.3 .1 .6
90 89 78
96 92 79
85 100 94
87 92 96
81 88 93
85 91 99 
```

注意：这是我的第五个程序，所以我是一个完整的初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:48:27.590

假设我们有 2 个字符串...

```
weights = "0.3 0.1 0.3"
grades =  "90   87  92" 
```

您已经知道可以将它们拆分为列表：

```
weights.split() #['0.3', '0.1', '0.3]
grades.split() #['90', '87', '92'] 
```

现在你对自己说——“如果我能同时得到匹配的数字不是很好吗？” 嗯，你可以。这就是`zip`为：

```
total = 0
for weight,grade in zip(weights.split(),grades.split()):
    total += float(weight)*float(grade) 
```

`sum`如果您愿意，甚至可以使用以下方法缩短：

```
total = sum( float(w)*float(g) for w,g in zip(weights.split(),grades.split() ) 
```

所以，这给了你一个人的总数。现在，我们可以在处理文件时使用相同的概念。我们想用他们的成绩信息“压缩”这个人的名字。就是这样：

```
with open('grade.txt') as data: #fancy way of opening files...
    npeople = int(next(data)) #read first line, make an integer
    weights = [float(x) for x in next(data).split()] #get the weights as a list of floats
    people = ['jack','jill','mary','little miss muffet','kermit','animal']
    for person, grade_info in zip(people,data):
        grade = sum( w*float(g) for w,g in zip(weights,grade_info.split() )
        print person,grade 
```

我在这里使用的另一个技巧是`next(fileobject)`. 这只是一种花哨的说法`fileobject.readline()`。其实在python3.x中，`fileobject.readline()`已经不存在了……还不如现在习惯使用`next`:)。

我在这里使用的4 个[内置函数](http://docs.python.org/2/library/functions.html)`zip`是、`next`和。 并且很明显它们是如何工作的，所以他们不需要做太多的工作来解释。 并且有点棘手。阅读链接的文档，直到您理解它们。它们非常有用。我还使用[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)来构建一些列表。它们也非常有用。绝对是你想要的蟒蛇实用腰带。`float``sum``float``sum``zip``next`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:20:37.623

学生的姓名应该是数据的一部分，而不是代码：

```
6
.3 .1 .6
Amy 90 89 78
Jack 96 92 79
Aaron 85 100 94
Zack 87 92 96
Jen 81 88 93
Jane 85 91 99 
```

然后将它们与数据一起读入：

```
line = file.readline().split()
student = line[0]
prctgs = line[1:] 
```

# php - 对于每个 PHP 函数不起作用？

> ID：14887653
> 
> 赞同：0
> 
> 时间：2013-02-15T02:57:01.893
> 
> 标签：php

我正在关注一个视频系列，并且由于某种原因，与我使用的代码相同的代码不起作用。我收到此错误：

**警告：****第 8 行 /Applications/XAMPP/xamppfiles/htdocs/projects/lr/core/functions/general.php 中**为 foreach() 提供的参数无效

 **我的 general.php 页面是：

```
<?php
function sanitize($data)    {
    return mysql_real_escape_string($data);
}

function output_errors($errors) {
    $output = array();
    foreach($errors as $error) {
        echo $error, ', ';
    }
} 
```

我的 login.php 页面是：

```
<?php
include 'core/init.php';

if (empty($_POST) === false)    {
$username = $_POST['username'];
$password = $_POST['password']; 

if (empty($username) === true|| empty($password) === true)  {
    $errors[] = 'You need to enter a username and/or password.';
} else if (user_exists($username) === false) {
    $errors[] = 'We can\'t find that username. Have you registered?';
} else if (user_active($username) === false) {
    $errors[] = 'You haven\'t activated your account! Check your email.'; 
} else {

    $login = login($username, $password);
    if ($login === false) {
        $errors = 'That username/password combination is incorrect.';
    } else{
        $_SESSION['user_id'] = $login;
        ?>
        <meta http-equiv="refresh" content="0;url=index.php">
        <?php
        exit();
    }   
}
}else {
$errors[] = 'No data received';
}

include 'includes/overall/overall_header.php';
output_errors($errors);
include 'includes/overall/overall_footer.php';
?> 
```

视频集在这里：[http](http://www.youtube.com/watch?v=-XvbXxqJ4xQ&list=ECE134D877783367C7) ://www.youtube.com/watch?v=-XvbXxqJ4xQ&list=ECE134D877783367C7但我没有得到相同的结果。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:00:07.450

您可以在处理之前通过一些快速检查来更新 general.php `foreach()`。`foreach()`期望传递一个数组，您看到的错误表明它是一个非数组或空成员数组。

该`is_array()`函数验证 $errors 实际上是一个数组，`count()`比较确保至少有一个数组成员可以循环使用 using `foreach()`。

```
<?php
function sanitize($data)    {
    return mysql_real_escape_string($data);
}

function output_errors($errors) {
    $output = array();
    if ( is_array( $errors) && count( $errors ) > 0 ){
        foreach($errors as $error) {
            echo $error, ', ';
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T03:02:22.170

`$errors`您应该在分支上方正确初始化变量：

```
<?php
include 'core/init.php';

$errors = array(); // <-- added

if (empty($_POST) === false)    { 
```

没有这个，`$errors`将隐式传递`null`给您的函数（并引发通知），并且`null`显然不是数组。**

# php - 使用 php mysql 的更新语句不起作用

> ID：14887655
> 
> 赞同：0
> 
> 时间：2013-02-15T02:57:23.127
> 
> 标签：php, mysql, sql-update

我有一个包含以下值的表：

```
Table
-----------------------------------------------------------
Column               | Type           | Default
-----------------------------------------------------------
name                   varchar(100)     none
loginCount             int(11)          0
lastLoginDate          datetime         0000-00-00 00:00:00
----------------------------------------------------------- 
```

现在，我想检查用户是否正确登录，如果是，则`loginCount`相应地更新`lastLoginDate`。

`php`脚本如下：

```
<?php
  // Verification query..
  if($row = mysql_fetch_array($result, MYSQL_ASSOC)){
    $sql = "UPDATE table
               SET `loginCount` = `loginCount` + 1,
                   `lastLoginDate` = now()
             WHERE `name` = '".$username"'";
    $result = mysql_query($sql);
  }
?> 
```

**问题是，这不起作用！**

但是，如果我通过直接登录`mysql`控制台来使用相同的内容，则会发生更新！

你能告诉我我在这里做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T03:05:13.220

你在`.`结束引号之前缺少一个 for 连接

```
WHERE `name` = '".$username"'";
//------------------------^^^ 
```

应该

```
WHERE `name` = '".$username . "'";
//--------------------------^^^ 
```

或者更好的是，省略连接，因为你用双引号括起来。

```
$sql = "UPDATE `table` SET ..... WHERE `name` = '$username'"; 
```

这意味着您可能没有启用 error_reporting，或者您会看到语法错误。

就像是：

> 解析错误：语法错误，意外 '"'"' (T_CONSTANT_ENCAPSED_STRING)...

```
ini_set('display_errors', 1);
error_reporting(E_ALL); 
```

最后，它不应该引起问题，根据发布的代码我不会期望，但是重用是不明智的`$result`，这是您第一次（在这里看不到）查询的结果资源变量。`TRUE/FALSE`如果需要，一旦它被`UPDATE`语句覆盖，您将无法再次从中获取。`UPDATE`为成功/失败使用不同的变量。

```
$other_var_not_result_for_clarity = mysql_query($sql); 
```

# tsql - 使用公用表表达式和相关更新标记同一表中的重复数据

> ID：14887660
> 
> 赞同：-3
> 
> 时间：2013-02-15T02:58:40.943
> 
> 标签：tsql, common-table-expression

我有条不紊的疯狂不起作用......我错过了一些东西。第一次，我的任务是清理同一张表中的重复项。我用谷歌搜索了很多东西，比如用公用表表达式删除等等……但我真的没有什么可以使用的。

我的地址表是这样的：

```
Address
--------
id
add1
add2
city 
state
zip
parentidofthisdup 
```

我想获得重复项和行号。我认为第 1 行的 id 是父级。对于我拉回的任何后续的 dup 地址行，我想在 arentidofthisdup 中用父级的 id 标记那些。我最终会保留父级并处理在 parentidofthisdup 中具有父级 ID 的父级。

我正在尝试通过执行公用表表达式然后在相关更新中使用 cte 来进行此更新，但是哎呀，这不起作用。我得到的只是所有记录都已更新，但只有空值导致 parentidofthisdup。

也许我没有以正确的方式编码。我对大规模更新相当陌生。

```
-- My common table expression of the set that I want stamped
with tbFlagTheseWithPk as
(
Select * from 

(
 select  
    myaddress.id,
    myaddress.parentidofthisdup,              
    myaddress.add1, 
    myaddress.add2,
    myaddress.state,
    myaddress.zip,
    row_number() over (partition by add1, state, zip order by add1, state, zip, add2) as [rn]   
    from myaddress
  where     add1 !=''
) as a
where a.rn > 1)

-- Now use our Common Table Expression using a correlated subquery to make them children of rn 1

Update tbFlagTheseWithPk
set 
set parentidofthisdup = 
(   Select id from                                                                                                  
     (Select * from  
    (   select      myaddress.pkey,                                                                          myaddress.parentidofthisdup,                                                                   myaddress.add1,                                                                                 myaddress.add2,
myaddress.state,
myaddress.zip,
row_number() over (partition by add1, state, zip order by a1, state, zip, add2) as [rn]
from myaddress where add1 !=''   
    ) as a                                                                                                  
    where a.rn > 1) as  b  

    where   b.a1 = tbFlagTheseWithPk.add1                                                                                
    and 
 b.state = tbFlagTheseWithPk.state
 and
 b.zip = tbFlagTheseWithPk.zip

    and 
 tbFlagTheseWithPk.rn = 1 
```

没有更好的方法吗？如何克服这种大规模更新学习曲线？我觉得我应该能够以一种优雅的方式做到这一点，但如果我不能很快解决这个问题，我将求助于循环游标并对 SQL 的美丽视而不见......但是那将是一场悲剧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:45:18.530

永远不要使用游标。

你在正确的轨道上。这些链接可能有助于 [SQL Server - 更新时的内部连接](https://stackoverflow.com/questions/9588423/sql-server-inner-join-when-updating) ， Row_Number [http://msdn.microsoft.com/en-us/library/ms186734.aspx，CTE](http://msdn.microsoft.com/en-us/library/ms186734.aspx) [http://msdn.microsoft.com/en-us/library/ ms190766(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)

```
DECLARE  @myAddress table
(id int, parentidofthisdup int, add1 nvarchar(10),add2 nvarchar(10) , [state] nvarchar(10),zip nvarchar(10) ) ;

Insert into @myAddress Values(1,null,'a','b','c','d');
Insert into @myAddress Values(2,null,'a','b','c','d');
Insert into @myAddress Values(3,null,'a','b','c','d');
Insert into @myAddress Values(5,null,'a','b','c','d');
Insert into @myAddress Values(6,null,'a','f','c','d');
Insert into @myAddress Values(7,null,'a','b','g','d');
Insert into @myAddress Values(8,null,'a','f','c','d');
with cte AS 
(
select  
    myaddress.id,
    myaddress.parentidofthisdup,              
    myaddress.add1, 
    myaddress.add2,
    myaddress.state,
    myaddress.zip,
    row_number() over (partition by add1, add2, state, zip order by id,add1, [state], zip, add2) as [rn]   
    from @myaddress myaddress

)

update r SET parentidOfthisDup
    = cte.id
    From cte Inner join @myAddress r
    ON cte.add1 = r.add1
          AND cte.add2 =r.add2
          AND cte.Zip =r.zip
          AND  cte.[state] =r.[state]
          and cte.id<>r.id
    WHERE cte.rn = 1 

select * from @myAddress 
```

# java - Eclipse：如何在方法声明中更改返回类型的颜色

> ID：14887667
> 
> 赞同：3
> 
> 时间：2013-02-15T02:59:39.567
> 
> 标签：java, eclipse

通过使用不同的颜色使方法返回类型从方法名称中更加突出会很好。我尝试了 Window -> Preferences -> Java -> Editor -> Syntax Coloring，但我想要的不在那里。我想知道它是否隐藏在其他地方，或者是否有扩展名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T03:19:55.650

我从来不知道这件事......但我去了你指出的地方，并设法按照你描述的方式改变了颜色。有一个“关键字不包括'return'”选项（包括方法名称之前的关键字，如“public”和“static”）和一个“方法声明”选项（这是方法本身的名称，而不是默认启用）。还有一个用于“Others”，它控制返回类型（还有很多其他的东西，所以你可能不想弄乱它）。无论如何，您可以更改其中一种或多种颜色以获得所需的效果。

# c++ - Eclipse CDT 顾问中的奇怪输出

> ID：14887668
> 
> 赞同：1
> 
> 时间：2013-02-15T03:00:00.240
> 
> 标签：c++, eclipse-cdt, cout, cin

当我运行我的程序时，我在 eclipse CDT 上得到以下信息：

```
There are 11 sticks left.

3
Enter Move:*stopped,reason="end-stepping-range",frame={addr="0x004015b4",func="_fu4___ZSt3cin",args=[],file="..\src\PlayerUser\PlayerUser.cpp",fullname="C:\Users\...\Desktop\workspace_eclipse\StickGame\src\PlayerUser\PlayerUser.cpp",line="26"},thread-id="1",stopped-threads="all" 
```

直到“进入移动”的所有内容都有意义，但其余的则没有。出现此问题后，它一直让我输入内容，但程序似乎被冻结了。

我有很多代码，所以这里只是相关的部分：

主功能：

```
int main() {
    int sticks = 10;

    PlayerUser u(sticks);
    PlayerComputer c(sticks);

    StickGame game (u, c);
    game.startGame(11);
    return 0;
} 
```

函数：PlayerUser::getMove

```
int PlayerUser::getMove(int n_left){
int on = 0;

while(true){
    cout << "There are " << n_left << " sticks left." << endl;
    cout << "Enter Move:" << flush; //where error occurs 
    cin >> on;
    if(on <= 3 && on >= 1)
        break;
}

setMove(n_left, on);
return on;
} 
```

据我所知，它似乎与“详细控制台模式”有关，但我不明白那是什么或如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T09:35:51.860

每次我在**cout之后使用****cin**时，我都会在调试器中遇到同样的问题，最后我通过添加**<< endl;解决了这个问题** **考特**后

 ******```
bool isDone()
    {
        char c;
        cout << "Enter 'Y' if food is done:";
        cin >> c;
        return ((c == 'Y') || (c == 'y'));
    } 
```

这会产生错误，例如：

```
*stopped,reason="end-stepping-range",frame=... 
```

但这工作得很好：

```
bool isDone()
    {
        char c;
        cout << "Enter 'Y' if food is done:" << endl;
        cin >> c;
        return ((c == 'Y') || (c == 'y'));
    } 
```******

# php - mod_rewrite 与 web.config 如何激活 GET 功能？

> ID：14887672
> 
> 赞同：0
> 
> 时间：2013-02-15T03:00:29.523
> 
> 标签：php, mod-rewrite, web-config

大家好，就我而言，我拥有的 web.config 文件会重写 url，以便显示[http://www.site.com/page.php](http://www.site.com/page.php)而不是显示[http://www.site.com /page](http://www.site.com/page)现在 GET 函数将不起作用。

这是web.config的代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="Imported Rule 1">
                    <match url="^(|/)$" ignoreCase="false" />
                    <action type="Rewrite" url="index.php?url={R:1}" appendQueryString="false" />
                </rule>
                <rule name="Imported Rule 2">
                    <match url="^([a-zA-Z0-9_-]+)(|/)$" ignoreCase="false" />
                    <action type="Rewrite" url="index.php?url={R:1}" appendQueryString="false" />
                </rule>
                <rule name="Imported Rule 3">
                    <match url="^(.*)\.htm$" />
                    <action type="Rewrite" url="{R:1}.php" />
                </rule>
                <rule name="Imported Rule 4">
                    <match url="^(|/)$" ignoreCase="false" />
                    <action type="Rewrite" url="index.php?page={R:1}" appendQueryString="false" />
                </rule>
                <rule name="Imported Rule 5">
                    <match url="^([a-zA-Z0-9_-]+)(|/)$" ignoreCase="false" />
                    <action type="Rewrite" url="index.php?url={R:1}" appendQueryString="false" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

关于如何允许 PHP $_GET 函数的任何想法？

**编辑：通过将 appendQueryString="false" 更改为 appendQueryString="true" 进行修复 感谢您的帮助！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:20:38.617

这是因为 "appendQueryString=" **false** " 完成的，因此将属性更改为**true**可以解决问题。

# sitecore - 如何在大型内容交付 webfarm 中维护 Sitecore Lucene 索引？

> ID：14887673
> 
> 赞同：10
> 
> 时间：2013-02-15T03:00:47.820
> 
> 标签：sitecore, sitecore6, lucene

我知道不能共享 Lucene 索引：

> Sitecore 在每个实例的文件系统中保留一份 Lucene 索引的本地副本，不支持在实例之间共享索引。

是否可以`xcopy`在 CM 和 CD 之间建立 Lucene 索引？

是否有其他方法或建议可以在 30 多个内容交付服务器中维护索引？

更新：我完全清楚 CD 必须启动自己的索引更新。拥有超过 30 台 CD 服务器，我认为可能会有一段时间并非所有 CD 服务器都具有相同的索引集。恐怕由于某种原因，某些 CD 服务器中的索引会失败，并跟踪为什么/在哪里会是地狱。这就是为什么试图发现是否有一些替代方法可以将索引维护在一个地方（某种共享）并基本上立即复制到所有 CD

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T08:31:59.283

您需要为 CM 和 CD 服务器 Web 数据库启用历史引擎。

请参阅 Sitecore 扩展指南的摘录。

> 为 Sitecore 数据库启用历史引擎： 在 web.config 文件中，将以下部分添加到 /configuration/sitecore/databases/database 元素，其中 id 等于数据库的名称：

```
<Engines.HistoryEngine.Storage>
  <obj type="Sitecore.Data.$(database).$(database)HistoryStorage, Sitecore.Kernel">
   <param connectionStringName="$(id)" />
   <EntryLifeTime>30.00:00:00</EntryLifeTime>
  </obj>
</Engines.HistoryEngine.Storage>
<Engines.HistoryEngine.SaveDotNetCallStack>false</Engines.HistoryEngine.SaveDotNetCallStack> 
```

> 当 Sitecore 项目发生更改时，Lucene 索引会立即在进行更改的 Sitecore 实例上更新。在多服务器环境中的远程服务器上，Lucene 索引不会在项目更改后立即更新。Lucene 索引在 web.config 文件中定义的时间间隔后自动更新，在 Indexing.UpdateInterval 设置中以及在 Indexing.UpdateJobThrottle 设置中定义的两个后续更新之间的最短等待时间。

看[这里](http://sdn.sitecore.net/upload/sitecore6/64/scaling_guide_sc63-64-a4.pdf#search=%22lucene%22)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T19:28:55.083

您还可以考虑使用开源的[Sitecore Lucene Refresher](https://github.com/Velir/Sitecore-Lucene-Refresher)，它将在内存中运行索引抓取操作并将索引提交回文件系统，这样您就不会在重建过程中丢失任何索引内容。这至少可以提供帮助。然后也许，设置某种代理以在一天中的特定时间运行此爬网/重建操作，以使所有 CD 服务器同时同步执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T14:14:26.420

Wesley Lomax 的答案是正确的。但是，我想指出，我也遇到了同样的情况，即我的数据文件夹中有 1000 个项目。我像这样更新了我的 web.config 设置：

```
 <!--  INDEX FOLDER
        The path to the folder where the Lucene.Net search indexes are stored.
        Default value: $(dataFolder)/indexes
  -->
  <setting name="IndexFolder" value="$(dataFolder)/indexes" />
  <!--  INDEX UPDATE INTERVAL
        Gets the interval between the IndexingManager checking its queue for pending actions.
        Default value: "00:01:00" (1 minute)
  -->
  <setting name="Indexing.UpdateInterval" value="00:00:30" />
  <!--  INDEX UPDATE JOB THROTTLE
        Gets the minimum time to wait between individual index update jobs.
        Default value: "00:00:01" (1 second)
  -->
  <setting name="Indexing.UpdateJobThrottle" value="00:00:01" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-31T14:07:33.380

应该指出的是，sitecore 现在建议您在这种情况下使用[Solr ，而](https://lucene.apache.org/solr/)**不是**尝试同步多个 Lucene 索引：

> 使用 Solr 而不是 Lucene 的一般原因是......
> 
> 如果您使用多个内容交付服务器（或计划稍后这样做），请使用 Solr。Solr 在这样的环境中自动工作。您可以使用 Lucene，但您必须确保索引在服务器之间同步。
> 
> 因此，如果您计划扩展您的站点（具有多台服务器的分布式设置），您应该使用 Solr。

## 从[使用 Solr 或 Lucene](https://doc.sitecore.net/sitecore_experience_platform/setting_up__maintaining/search_and_indexing/indexing/using_solr_or_lucene)

# javascript - Handlebars 辅助函数 - 提取属性名称

> ID：14887677
> 
> 赞同：0
> 
> 时间：2013-02-15T03:01:13.610
> 
> 标签：javascript, handlebars.js

我有一个类似于下面的 JSON 结构。

```
"markers": {
   "Lifestyle" : [
      {"Name1" : "Something"},
      {"Name2" : "Something"}
   ],  
   "Transport" : [
      {"Name1" : "Something"},
      {"Name2" : "Something"}
   ] 
```

我想使用上面的 JSON 创建一个带有嵌套列表项的菜单。

```
<ul id="menu">
   <li class="Lifestyle">Lifestyle
      <ul class="sub-cat">
         <li>Something</li>
         <li>Something</li>
      </ul>
   </li>
   <li class="Transport">Transport
      <ul class="sub-cat">
         <li>Something</li>
         <li>Something</li>
      </ul>
   </li>
</ul> 
```

我尝试添加一个辅助函数来提取属性的名称，但我不确定如何添加子类别。任何建议表示赞赏。

编辑：添加代码

```
Handlebars.registerHelper('getCategory',function(object) {
                var categories = [];
                for(var x in object) {
                    categories.push(x);
                }
                console.log(categories);
                return categories;
            }); 
```

这只是返回类别名称。我知道我可以使用相同的助手返回 HTML，但我不确定如何添加嵌套结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-14T00:47:37.163

[`{{@key}}`](http://handlebarsjs.com/#iteration)如果要迭代，可以使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T16:44:17.583

在您的情况下，助手将是一个迭代器¹将对象转换为 (key, value) 对的列表。请注意，助手必须返回 HTML：

```
// context : object you wish to transform
// options.fn will contain the HTML block
Handlebars.registerHelper('pairs', function(context, options) {
    var cells = [], html, k;
    for (k in context) {
        if (context.hasOwnProperty(k)) {
            html = options.fn({
                key: k,
                value: context[k]
            }); 
            cells.push(html);
        }
    }
    return cells.join('');
}); 
```

你的模板可能看起来像这样

```
<ul id="menu">
   {{#pairs .}}
   <li class="{{key}}">{{key}}
      <ul class="sub-cat">
      {{#each value}}
      {{#pairs .}}
          <li>{{key}}: {{value}}</li>
      {{/pairs}}
      {{/each}}
      </ul>
   </li>
    {{/pairs}}
</ul> 
```

由于数组中的基础数据，嵌套级别必须经过一个 each 助手，然后才能转换为一对。

最后，使用 Fiddle [http://jsfiddle.net/hnrQC/](http://jsfiddle.net/hnrQC/)来查看此代码的运行情况。

¹请参阅[Handlebars 中的块助手：简单的迭代器](http://handlebarsjs.com/block_helpers.html#iterators)

# c# - WebRequest.DefaultWebProxy 和 WebRequest.GetSystemWebProxy() 有什么区别？

> ID：14887679
> 
> 赞同：24
> 
> 时间：2013-02-15T03:01:57.850
> 
> 标签：c#, .net, networking, proxy

我想知道`DefaultWebProxy`和之间的主要区别是什么`GetSystemWebProxy()`。MSDN上有一些描述，但我仍然觉得我需要更多细节才能更好地理解。

另外，假设我在 C# winform 应用程序上有以下代理配置选项

1.  自动检测代理设置
2.  使用系统默认设置
3.  没有代理

那么哪个方法去哪个选项？说`Auto-detect proxy`有点等于`Use system default`设置对吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-15T04:26:22.667

根据[MSDN 文章](http://msdn.microsoft.com/en-us/library/system.net.webrequest.defaultwebproxy.aspx)，`WebRequest.DefaultWebProxy`此属性将提供`app.config`文件中指定的代理信息。看起来[.NET Framework v3.5 MSDN 文章](http://msdn.microsoft.com/en-us/library/system.net.webrequest.defaultwebproxy%28v=vs.90%29.aspx)缺少此特定细节。

就目前`WebRequest.GetSystemWebProxy()`而言，[MSDN 文章](http://msdn.microsoft.com/en-us/library/system.net.webrequest.getsystemwebproxy.aspx)指出此方法将提供系统范围的配置代理（控制面板> Internet 选项）。

* * *

这就是我建议您实施概述的三个选项的方式：

1.  **自动检测代理设置**
    *   实现自己的代理发现逻辑；**或者**
    *   更改系统设置以匹配您的应用程序的设置，并使用`WebRequest.GetSystemWebProxy()`（*我不推荐这种方法*）；**或者**
    *   最好不要包含此选项，让用户使用相应的系统范围设置以及“使用系统默认设置”选项；
2.  **使用系统默认设置**
    *   使用`WebRequest.GetSystemWebProxy()`；
3.  **没有代理**
    *   确保取消设置`WebRequest.DefaultWebProxy`和`WebRequest.Proxy`属性；

* * *

**编辑：**如果*app.config* `WebRequest.DefaultWebRequest`中没有配置代理，则与（至少对于 .NET 4.5）*几乎*相同。`WebRequest.GetSystemWebProxy()`不同之处在于`WebRequest.GetSystemWebProxy()`它将运行 PAC 脚本（如果有）以进行代理定义。
[感谢[Gabrielius](https://stackoverflow.com/questions/14887679/whats-the-difference-between-webrequest-defaultwebproxy-and-webrequest-getsyste/14888220#comment50423799_14888220)和[23W](https://stackoverflow.com/questions/14887679/whats-the-difference-between-webrequest-defaultwebproxy-and-webrequest-getsyste/14888220#comment85555676_14888220)的以下评论。]

# jquery - 快速解析 req.body 中的 multipart/form-data 帖子

> ID：14887681
> 
> 赞同：1
> 
> 时间：2013-02-15T03:02:32.790
> 
> 标签：jquery, node.js, express, form-data

我正在尝试使用 Chrome 和 Firefox 浏览器上的 jQuery Ajax + FormData 对象上传文件。我用来执行此操作的代码如下：

```
var formData = new FormData();
    formData.append('image', $scope.image.data);

     $.ajax({
       url: '/wines/'+id+'/image',
       type: 'POST',
       data: formData,
        processData:false,
        contentType:false
     }).done(function(){
       $location.path('/');
     }); 
```

通过查看开发人员工具，我可以看到请求的格式正确，但是 express 识别的是 req.body 而不是 req.files 中的内容。这是请求有效负载图像：

![请求有效载荷](../Images/e57e302760cba7508ffec6e483834a1e.png)

快速配置：

```
app.configure(function(){
app.set('views', __dirname + '/app');
app.engine('.html', require('ejs').renderFile)
app.use(express.static(__dirname + '/app'));
app.use(express.bodyParser());
app.use(express.methodOverride());

app.use(app.router);
}); 
```

我做错了什么？？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:21:34.103

因为它不是一个文件，它只是一个字符串。要使用 AJAX 文件，`FormData`您必须将 File 对象传递给 `FormData.append`您所传递的数据 uri，它只是一个字符串。

正文中的文件`multipart/form-data`看起来像这样

```
------WebKitFormBoundaryNBylbsEYlWSsq2lB
内容处置：表单数据；名称=“图像”；文件名="999.jpg"
内容类型：图片/jpeg

文件内容在这里
------WebKitFormBoundaryNBylbsEYlWSsq2lB--
```

# android - Android项目依赖java项目

> ID：14887683
> 
> 赞同：1
> 
> 时间：2013-02-15T03:03:00.803
> 
> 标签：android, magento, soap, magento-1.7

我一直在一个“普通”Java 项目中使用名为 magja ( [https://github.com/magja/magja ) 的 Java 的 Magento 连接器。](https://github.com/magja/magja)到目前为止，一切都运行良好。

之后，我启动了一个简单的 Android 应用程序，该应用程序将使用 magja 代码来使用来自 Magento 的此类信息。

问题是：我应该如何配置我的 Android 项目来处理“普通”Java 项目（不是库）？这个另一个项目使用几个 xml 文件来配置和 Maven 来处理依赖关系。这对我的 Android 应用有何影响？

非常感谢！

**已编辑**

实际上，我已经尝试过这种方法（[Android 项目无法在 eclipse 中引用其他项目](https://stackoverflow.com/questions/10778865/android-project-unable-to-reference-other-project-in-eclipse/10778983#10778983)），但总是当应用程序尝试运行“项目 B”（magja）代码时，它会导致
`java.lang.NoClassDefFoundError: org.apache.commons.httpclient.params.HttpConnectionManagerParams`

我相信它与 magja 使用的一些 .jar 文件有关。如果我可以在项目之间共享这样的库，看起来我会解决这个问题。

# c - 无线 NIC 如何在硬件级别和功能上工作？

> ID：14887689
> 
> 赞同：1
> 
> 时间：2013-02-15T03:03:53.137
> 
> 标签：c, networking, assembly

我想不出一个更好的标题名称，但切中要害。

我想知道无线网卡/网卡如何与它所连接的系统一起运行（不是通过连接，而是通过内部连接或 pci、usb 或任何其他外围设备），以及卡本身可以用系统（除了连接到某些路由器或 AP，或任何不处理硬件内部的东西），或者它可以与本地系统通信什么？

我不确定这些是在程序集级别还是在用户空间级别定义的，所以如果可能的话，我也想知道这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T03:14:14.397

外部无线网卡通过 USB 连接；内部的通常使用 PCI 或 PCIe。

这些设备如何与主机通信的细节都是特定于设备的。在许多情况下，NIC 运行一个固件，主机必须在启动时将其上传到设备。该固件必须包含的详细信息基本上从未记录在案。一些无线网卡（通常是较旧的网卡）实际上实现了硬件命令来执行与 AP 关联等操作，但大多数都没有。

这里没有标准。每个设备都有点不同。也几乎没有任何文档。如果您想了解更多信息，最好的办法是找到您感兴趣的设备的 Linux 驱动程序的源代码，深入研究它，并希望它得到很好的评论。

# utf-8 - 如何让 Tanuki Wrapper 日志文件进行 UTF-8 编码？

> ID：14887690
> 
> 赞同：3
> 
> 时间：2013-02-15T03:03:53.873
> 
> 标签：utf-8, character-encoding, java-service-wrapper

我有一个使用 Tanuki 包装器的工作 Java 程序。我遇到的问题是包装器日志文件不是 UTF-8 编码的，但似乎是 ASCII。包装器配置文件以：

```
#encoding=UTF-8
#include ..\..\Tomcat\conf\wrapper-license.conf
wrapper.java.command.loglevel=INFO
wrapper.lang.encoding=UTF-8
wrapper.debug=true 
```

包装器启动并成功启动 JVM。但是当我编辑包装器日志文件时，日文字符（例如）以问号字符的形式出现，即 ASCII 字符 0x3f。我通过在十六进制编辑器中加载日志文件进行了仔细检查。

Tanuki Wrapper 日志文件被放入包含日文字符的目录中——用于测试目的。日志文件在该文件夹中成功创建，因此包装器显然能够读取和处理 UTF-8 字符。但是，当它记录将在其中创建日志的文件夹名称时，文件夹名称将记录为所有 ASCII 0x3f 字符（“？”）。

如何让 Tanuki Wrapper 以 UTF-8 对其日志文件进行编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:50:14.023

我从 Tanuki 那里得到确认，当前的包装软件将始终使用当前系统编码写入其日志。目前（从 3.5.17 开始）无法配置包装器以任何不同的编码（例如 UTF-8）写入其日志。

同样，您可以配置包装器读取配置文件的编码，但不能配置它写入其日志文件的编码。

# php - 如何在没有 php 脚本的 smarty 2.x 模板中分配关联数组值

> ID：14887694
> 
> 赞同：2
> 
> 时间：2013-02-15T03:04:47.773
> 
> 标签：php, arrays, templates, smarty, associative

如何将关联数组值分配给变量说，

```
{* $a = array('key1'=>123) *}
{assign var="a.key2" value=234} 
```

没有在 php 脚本中预先分配或使用 {php} 标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-18T19:40:33.513

聪明的代码

```
{assign var="keys" value=','|explode:'key1,key2,key3'}
{assign var="values" value=','|explode:'value1,value2,value3'}

{assign var="a" value=$keys|@array_combine:$values}

{foreach from=$a item="value" key="key"}

{$key} | {$value}<br>

{/foreach}
and {$a.key2} 
```

结果

```
key1 | value1
key2 | value2
key3 | value3
and value2 
```

# php - 这个 PHP 命名空间代码块是什么意思？

> ID：14887699
> 
> 赞同：2
> 
> 时间：2013-02-15T03:05:21.940
> 
> 标签：php, namespaces

我目前在代码审查期间遇到了这个命名空间代码块，我看起来像这样。我对在 youtube 中看到的命名空间和示例不熟悉，教程中没有类似的示例。

我只理解第一个命名空间意味着代码块将在全局空间上。但是第二个命名空间到底是什么意思呢？

```
namespace
{
     class Logging{} 
}

namespace Admin\Logging
{
      class Logged_in
      {
          public function __construct()
          {
                /* some code here */
          }
      }

      /* other classes here */
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:10:02.420

第二个声明是[子命名空间](http://www.php.net/manual/en/language.namespaces.nested.php)或嵌套命名空间。

在您的示例中，该类`Logged_in`的规范名称为`\Admin\Logging\Logged_in`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:20:02.280

命名空间的语法类似于目录层次结构：反斜杠 ( `\`) 充当子命名空间的分隔符。

因此，第二个符号表示命名空间的定义`Admin`，以及其中的命名空间的定义`Logging`。

有关更多信息，请参阅[文档](http://www.php.net/manual/en/language.namespaces.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T03:59:14.607

要回答我自己的问题，希望我做对了......

用外行的话来说，Admin\Logging 的意思是“我在哪里可以找到这个文件”

```
|--admin
|  |-- Logging.php 
```

然后

```
namespace
{
    class Logging {}
} 
```

因为两个命名空间都在同一个文件中，所以它可以作为一个库并被自动加载......

Wew...我不是真正的技术，但这就是我理解它的方式......谢谢大家的帮助。

感谢：[http ://www.mwop.net/blog/254-Why-PHP-Namespaces-Matter.html](http://www.mwop.net/blog/254-Why-PHP-Namespaces-Matter.html)

# excel - 操作基于记录的数据、数组或范围的更好方法是什么？

> ID：14887702
> 
> 赞同：-1
> 
> 时间：2013-02-15T03:05:57.113
> 
> 标签：excel, vba

我目前正在构建一个宏，以允许我导入 Excel 电子表格并将数据格式化为类似报告的结构。

到目前为止，我已经能够使用公式手动完成此操作来聚合数据，但我想自动化其中的许多步骤。

所以，我觉得我有一个决定要做。

由于我要将另一个 Excel 文件导入启用宏的工作簿，我是通过引用范围来处理数据，还是将文件的内容转储到 Variant Array/Collection/Dict？

我想其他人最终会想要使用这个“报告生成器”，所以我试图使转换尽可能无缝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:57:31.647

那里有很多报告构建工具。除非我不明白这个问题，否则自己制作似乎是浪费精力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:22:23.353

除非您要处理大量数据并且速度至关重要，否则我强烈建议您使用 Ranges 作为主要对象。主要优点是：

*   寻址范围非常灵活，例如`Range("A1:B10")`, `Range(TopCell, BottomCell)`,`Range("NamedRange")`
*   `.Resize(Rows, Cols)`和 '.Offset(Rows, Cols)` 用于灵活引用
*   您基本上可以修改范围/单元格的所有属性，即不仅可以修改 , 还可以修改`.Value`, `.Formula`, `.Font`, `.Border`...
*   大量方法允许高级处理（例如`.SpecialCells`查找公式/值/...、`.Rows.Visible`隐藏等）
*   用一个简单的`For Each c in Range("YourRange").Cells`循环遍历一个范围内的所有单元格

如果要修改值本身以外的任何内容，则需要使用 Ranges。只有当您想对更大的数据集进行一些复杂的计算时，您才能通过将范围（或任何数据源）的内容读取到数组中来提高性能，在数组/内存中对其进行处理，然后将结果写回范围一冲。这种方法将显着提高计算速度 - 但仅适用于少数情况，如果性能确实很重要，则值得推荐。

关于集合/字典：
不要将它们与范围进行比较——它们是某些任务的有用工具，尤其是。当您想遍历一组成员时。但是范围本身是一种集合，即您可以循环其元素（只是不能删除/添加新成员）。如果你想比较 Collections 和 Dictionary 类的使用，这里是我的快速总结：

集合内置于 VBA 中，因此无需引用。对于我想要循环或寻址的简单聚合，这是我的主要选择。字典的优点是它们提供了额外的功能，主要是一个`.Exists`属性和一个`.Keys`集合，允许你也循环遍历散列的键。因此，每当我需要这些功能时，我都会参考 Dictionary（在*Microsoft Scripting Runtime*中），但在其他方面坚持使用 Collections。

# java - JPA，从实体与数据库模式开始

> ID：14887703
> 
> 赞同：2
> 
> 时间：2013-02-15T03:05:57.580
> 
> 标签：java, jpa, database-schema, entities

使用 JPA 时哪个更好，尤其是在开始一个新项目时？从设计实体开始，然后让 JPA 生成数据库，还是从数据库模式开始，让工具生成实体类？

我是一家小公司的一员。我既是软件开发人员又是 DBA。我对应用程序和数据库设计有完全的自由

我刚刚开始这个项目

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T05:44:46.707

如果你想设计一个数据库，那么从模式开始。如果你想写软件，那就从实体开始。ORM 的目的是让您考虑对象模型而不必担心存储它的数据库，因此这种类型的问题实际上通过暗示领域之间的交叉来混淆问题。您是软件开发人员还是 DBA？这比您使用 JPA 的事实要重要得多，这将为您确定正确的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:06:42.010

嗯——也没有？JPA 的强大之处在于您不必从另一个*生成一个！*如果您已经有了实体或数据库模式，那么生成实体或数据库模式可能是一个很好的*起点；*但生成的东西不是你想要长期使用的东西。

您不能简单地设计映射的一侧而不考虑另一侧。如果您将与其他应用程序共享数据库，则需要更加重视数据库模式。如果您的应用程序有一个复杂的模型，您将希望首先关注对象模型，让它由您在开发应用程序时发现的用例驱动。

我倾向于首先从对象模型开始（即使没有后备数据库开始），因为这使我能够更早地看到应用程序的运行情况并了解我们真正想要构建的内容。但是与数据库的集成必须早点而不是晚点发生；因为它的约束会很快地强加在你的对象模型上。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T13:17:07.777

It depends on one's needs . Usually in a product development environment , there are different teams which work on database design , interface design and implementation . So in that case , you have no option than generating the JPA entities from the already database design. Secondly , if you are starting from the scratch and you know what are you upto then you can probably start writing your own entities (java class) and then generate the database from that.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T03:24:12.260

最好选择数据库方案。因为某些功能在 JPA 生成的数据库中不可用。在 JPA 中，我们不能为我们的列提供默认值。[在此处](http://www.objectdb.com/api/java/jpa/Column)查看JPA 中允许的属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T03:26:46.347

由你决定。是自上而下还是自下而上的方法。如果此模式是您的应用程序独有的，请查看您的团队成员和分析师如何理解 ORM 或 DB。根据我的经验，分析师对表格的理解更好。但是，如果它们适合在类或 UML 图方面进行讨论，请使用 JPA。此外，还要考虑您的 DBA 和构建工程师的观点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-27T18:52:35.280

If you have complete flexibility and are not restricted to a DB schema and want a clean object model in your java application then start with with the model first and generate the schema from the model. This also allows you to generate clean JSON representations from the clean model to serve as on-the-wire format for your objects using technologies like Jackson (or GSON).

Doing DB Schema first and reverse engineering model classes from it will result in relational concepts seeping into your model classes resulting in poor (polluted) model.

In summary do model first unless your hands are tied and you must map to some existing schema.

# java - 将用户输入的两个点绘制成java中的图形

> ID：14887704
> 
> 赞同：0
> 
> 时间：2013-02-15T03:06:00.890
> 
> 标签：java, graph, for-loop, plot

基本上我必须要求用户输入两个点，然后使用这些点以点斜率形式显示方程，然后我必须在显示这些点的图形中编码。我已经完成并编写了第一部分，如下所示：

```
 import java.util.*;
import java.text.*;

public class Proj3 {
public static void main(String[] args) {
Scanner s= new Scanner(System.in);
String input;

double xOne = 0;
double yOne = 0;
double xTwo = 0;
double yTwo = 0;
double slope;
DecimalFormat df = new DecimalFormat("#0.00");

System.out.print("Enter x1: ");
input = s.nextLine();
xOne=Double.parseDouble(input);

System.out.print("Enter y1: ");
input = s.nextLine();
yOne=Double.parseDouble(input);

System.out.print("Enter x2: ");
input = s.nextLine();
xTwo=Double.parseDouble(input);

System.out.print("Enter y2: ");
input = s.nextLine();
yTwo=Double.parseDouble(input);

slope=((yTwo-yOne)/(xTwo-xOne));

System.out.println("y = " + (df.format(slope)) + "x + " + (df.format(yOne-slope*xOne)));

for(){

}

}
    } 
```

但我不知道如何做图表部分，我很确定我的导师希望我使用 for 和 if 循环，但我不知道如何去做。它必须使用简单的 java 代码进行编码，我只在 java 的第一学期。

对此的任何帮助将不胜感激，谢谢，我的目标是今晚完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:03:17.907

以防万一有人在寻找与我相同的东西，我能够弄清楚，这就是我做到的。

```
import java.util.*;
import java.text.*;

public class Proj3 {
public static void main(String[] args) {
Scanner s= new Scanner(System.in);
String input;

double xOne = 0;
double yOne = 0;
double xTwo = 0;
double yTwo = 0;
double slope;
DecimalFormat df = new DecimalFormat("#0.00");

do
{
do
{
    xOne=0;
System.out.print("Enter x1: ");
input = s.nextLine();
xOne=Double.parseDouble(input);

if(xOne<0||xOne>9)
    {
    System.out.println("Point entered is not between 0 and 9, enter again");
    }
}while(xOne<0||xOne>9);

do
{
    yOne=0;
System.out.print("Enter y1: ");
input = s.nextLine();
yOne=Double.parseDouble(input);

if(yOne<0||yOne>9)
    {
    System.out.println("Point entered is not between 0 and 9, enter again");
    }
}while(yOne<0||yOne>9);

do
{
    xTwo=0;
System.out.print("Enter x2: ");
input = s.nextLine();
xTwo=Double.parseDouble(input);

if(xTwo<0||xTwo>9)
    {
    System.out.println("Point entered is not between 0 and 9, enter again");
    }
}while(xTwo<0||xTwo>9);

do
{
    yTwo=0;
System.out.print("Enter y2: ");
input = s.nextLine();
yTwo=Double.parseDouble(input);

if(yTwo<0||yTwo>9)
    {
    System.out.println("Point entered is not between 0 and 9, enter again");
    }
}while(yTwo<0||yTwo>9);

slope=((yTwo-yOne)/(xTwo-xOne));

if((xOne==xTwo)&&(yOne==yTwo))
{
    System.out.println("Same point entered twice, enter again");
}

else if(xOne==xTwo)
{
    System.out.println("Slope is undefined, enter again");
}

}while((xOne==xTwo)||((xOne==xTwo)&&(yOne==yTwo)));

System.out.println("y = " + (df.format(slope)) + "x + " + (df.format(yOne-slope*xOne)));

for(int i=9; i>=0;i--){

if(xOne==0||xTwo==0)
{
    if((i==9)&&(((xOne==0&&yOne==9)||(xTwo==0&&yTwo==9))))
        System.out.println(i + " *");
    else if((i==8)&&(((xOne==0&&yOne==8)||(xTwo==0&&yTwo==8))))
        System.out.println(i + " *");
    else if((i==7)&&(((xOne==0&&yOne==7)||(xTwo==0&&yTwo==7))))
        System.out.println(i + " *");
    else if((i==6)&&(((xOne==0&&yOne==6)||(xTwo==0&&yTwo==6))))
        System.out.println(i + " *");
    else if((i==5)&&(((xOne==0&&yOne==5)||(xTwo==0&&yTwo==5))))
        System.out.println(i + " *");
    else if((i==4)&&(((xOne==0&&yOne==4)||(xTwo==0&&yTwo==4))))
        System.out.println(i + " *");
    else if((i==3)&&(((xOne==0&&yOne==3)||(xTwo==0&&yTwo==3))))
        System.out.println(i + " *");
    else if((i==2)&&(((xOne==0&&yOne==2)||(xTwo==0&&yTwo==2))))
        System.out.println(i + " *");
    else if((i==1)&&(((xOne==0&&yOne==1)||(xTwo==0&&yTwo==1))))
        System.out.println(i + " *");
    else if((i==0)&&(((xOne==0&&yOne==0)||(xTwo==0&&yTwo==0))))
        System.out.println(i + " * — — — — — — — — — — — — — — — — — — —");
}

if(xOne==1||xTwo==1)    
{
    if((i==9)&&(((xOne==1&&yOne==9)||(xTwo==1&&yTwo==9))))
        System.out.println(i + " |   *");
    else if((i==8)&&(((xOne==1&&yOne==8)||(xTwo==1&&yTwo==8))))
        System.out.println(i + " |   *");
    else if((i==7)&&(((xOne==1&&yOne==7)||(xTwo==1&&yTwo==7))))
        System.out.println(i + " |   *");
    else if((i==6)&&(((xOne==1&&yOne==6)||(xTwo==1&&yTwo==6))))
        System.out.println(i + " |   *");
    else if((i==5)&&(((xOne==1&&yOne==5)||(xTwo==1&&yTwo==5))))
        System.out.println(i + " |   *");
    else if((i==4)&&(((xOne==1&&yOne==4)||(xTwo==1&&yTwo==4))))
        System.out.println(i + " |   *");
    else if((i==3)&&(((xOne==1&&yOne==3)||(xTwo==1&&yTwo==3))))
        System.out.println(i + " |   *");
    else if((i==2)&&(((xOne==1&&yOne==2)||(xTwo==1&&yTwo==2))))
        System.out.println(i + " |   *");
    else if((i==1)&&(((xOne==1&&yOne==1)||(xTwo==1&&yTwo==1))))
        System.out.println(i + " |   *");
    else if((i==0)&&(((xOne==1&&yOne==0)||(xTwo==1&&yTwo==0))))
        System.out.println(i + " + — * — — — — — — — — — — — — — — — — —");
}

if(xOne==2||xTwo==2)    
{
    if((i==9)&&(((xOne==2&&yOne==9)||(xTwo==2&&yTwo==9))))
        System.out.println(i + " |       *");
    else if((i==8)&&(((xOne==2&&yOne==8)||(xTwo==2&&yTwo==8))))
        System.out.println(i + " |       *");
    else if((i==7)&&(((xOne==2&&yOne==7)||(xTwo==2&&yTwo==7))))
        System.out.println(i + " |       *");
    else if((i==6)&&(((xOne==2&&yOne==6)||(xTwo==2&&yTwo==6))))
        System.out.println(i + " |       *");
    else if((i==5)&&(((xOne==2&&yOne==5)||(xTwo==2&&yTwo==5))))
        System.out.println(i + " |       *");
    else if((i==4)&&(((xOne==2&&yOne==4)||(xTwo==2&&yTwo==4))))
        System.out.println(i + " |       *");
    else if((i==3)&&(((xOne==2&&yOne==3)||(xTwo==2&&yTwo==3))))
        System.out.println(i + " |       *");
    else if((i==2)&&(((xOne==2&&yOne==2)||(xTwo==2&&yTwo==2))))
        System.out.println(i + " |       *");
    else if((i==1)&&(((xOne==2&&yOne==1)||(xTwo==2&&yTwo==1))))
        System.out.println(i + " |       *");
    else if((i==0)&&(((xOne==2&&yOne==0)||(xTwo==2&&yTwo==0))))
        System.out.println(i + " + — — — * — — — — — — — — — — — — — — —");
}

if(xOne==3||xTwo==3)    
{
    if((i==9)&&(((xOne==3&&yOne==9)||(xTwo==3&&yTwo==9))))
        System.out.println(i + " |           *");
    else if((i==8)&&(((xOne==3&&yOne==8)||(xTwo==3&&yTwo==8))))
        System.out.println(i + " |           *");
    else if((i==7)&&(((xOne==3&&yOne==7)||(xTwo==3&&yTwo==7))))
        System.out.println(i + " |           *");
    else if((i==6)&&(((xOne==3&&yOne==6)||(xTwo==3&&yTwo==6))))
        System.out.println(i + " |           *");
    else if((i==5)&&(((xOne==3&&yOne==5)||(xTwo==3&&yTwo==5))))
        System.out.println(i + " |           *");
    else if((i==4)&&(((xOne==3&&yOne==4)||(xTwo==3&&yTwo==4))))
        System.out.println(i + " |           *");
    else if((i==3)&&(((xOne==3&&yOne==3)||(xTwo==3&&yTwo==3))))
        System.out.println(i + " |           *");
    else if((i==2)&&(((xOne==3&&yOne==2)||(xTwo==3&&yTwo==2))))
        System.out.println(i + " |           *");
    else if((i==1)&&(((xOne==3&&yOne==1)||(xTwo==3&&yTwo==1))))
        System.out.println(i + " |           *");
    else if((i==0)&&(((xOne==3&&yOne==0)||(xTwo==3&&yTwo==0))))
        System.out.println(i + " + — — — — — * — — — — — — — — — — — — —");
}

if(xOne==4||xTwo==4)    
{
    if((i==9)&&(((xOne==4&&yOne==9)||(xTwo==4&&yTwo==9))))
        System.out.println(i + " |               *");
    else if((i==8)&&(((xOne==4&&yOne==8)||(xTwo==4&&yTwo==8))))
        System.out.println(i + " |               *");
    else if((i==7)&&(((xOne==4&&yOne==7)||(xTwo==4&&yTwo==7))))
        System.out.println(i + " |               *");
    else if((i==6)&&(((xOne==4&&yOne==6)||(xTwo==4&&yTwo==6))))
        System.out.println(i + " |               *");
    else if((i==5)&&(((xOne==4&&yOne==5)||(xTwo==4&&yTwo==5))))
        System.out.println(i + " |               *");
    else if((i==4)&&(((xOne==4&&yOne==4)||(xTwo==4&&yTwo==4))))
        System.out.println(i + " |               *");
    else if((i==3)&&(((xOne==4&&yOne==3)||(xTwo==4&&yTwo==3))))
        System.out.println(i + " |               *");
    else if((i==2)&&(((xOne==4&&yOne==2)||(xTwo==4&&yTwo==2))))
        System.out.println(i + " |               *");
    else if((i==1)&&(((xOne==4&&yOne==1)||(xTwo==4&&yTwo==1))))
        System.out.println(i + " |               *");
    else if((i==0)&&(((xOne==4&&yOne==0)||(xTwo==4&&yTwo==0))))
        System.out.println(i + " + — — — — — — — * — — — — — — — — — — —");
}

if(xOne==5||xTwo==5)    
{
    if((i==9)&&(((xOne==5&&yOne==9)||(xTwo==5&&yTwo==9))))
        System.out.println(i + " |                   *");
    else if((i==8)&&(((xOne==5&&yOne==8)||(xTwo==5&&yTwo==8))))
        System.out.println(i + " |                   *");
    else if((i==7)&&(((xOne==5&&yOne==7)||(xTwo==5&&yTwo==7))))
        System.out.println(i + " |                   *");
    else if((i==6)&&(((xOne==5&&yOne==6)||(xTwo==5&&yTwo==6))))
        System.out.println(i + " |                   *");
    else if((i==5)&&(((xOne==5&&yOne==5)||(xTwo==5&&yTwo==5))))
        System.out.println(i + " |                   *");
    else if((i==4)&&(((xOne==5&&yOne==4)||(xTwo==5&&yTwo==4))))
        System.out.println(i + " |                   *");
    else if((i==3)&&(((xOne==5&&yOne==3)||(xTwo==5&&yTwo==3))))
        System.out.println(i + " |                   *");
    else if((i==2)&&(((xOne==5&&yOne==2)||(xTwo==5&&yTwo==2))))
        System.out.println(i + " |                   *");
    else if((i==1)&&(((xOne==5&&yOne==1)||(xTwo==5&&yTwo==1))))
        System.out.println(i + " |                   *");
    else if((i==0)&&(((xOne==5&&yOne==0)||(xTwo==5&&yTwo==0))))
        System.out.println(i + " + — — — — — — — — — * — — — — — — — — —");
}

if(xOne==6||xTwo==6)    
{
    if((i==9)&&(((xOne==6&&yOne==9)||(xTwo==6&&yTwo==9))))
        System.out.println(i + " |                       *");
    else if((i==8)&&(((xOne==6&&yOne==8)||(xTwo==6&&yTwo==8))))
        System.out.println(i + " |                       *");
    else if((i==7)&&(((xOne==6&&yOne==7)||(xTwo==6&&yTwo==7))))
        System.out.println(i + " |                       *");
    else if((i==6)&&(((xOne==6&&yOne==6)||(xTwo==6&&yTwo==6))))
        System.out.println(i + " |                       *");
    else if((i==5)&&(((xOne==6&&yOne==5)||(xTwo==6&&yTwo==5))))
        System.out.println(i + " |                       *");
    else if((i==4)&&(((xOne==6&&yOne==4)||(xTwo==6&&yTwo==4))))
        System.out.println(i + " |                       *");
    else if((i==3)&&(((xOne==6&&yOne==3)||(xTwo==6&&yTwo==3))))
        System.out.println(i + " |                       *");
    else if((i==2)&&(((xOne==6&&yOne==2)||(xTwo==6&&yTwo==2))))
        System.out.println(i + " |                       *");
    else if((i==1)&&(((xOne==6&&yOne==1)||(xTwo==6&&yTwo==1))))
        System.out.println(i + " |                       *");
    else if((i==0)&&(((xOne==6&&yOne==0)||(xTwo==6&&yTwo==0))))
        System.out.println(i + " + — — — — — — — — — — — * — — — — — — —");
}

if(xOne==7||xTwo==7)    
{
    if((i==9)&&(((xOne==7&&yOne==9)||(xTwo==7&&yTwo==9))))
        System.out.println(i + " |                           *");
    else if((i==8)&&(((xOne==7&&yOne==8)||(xTwo==7&&yTwo==8))))
        System.out.println(i + " |                           *");
    else if((i==7)&&(((xOne==7&&yOne==7)||(xTwo==7&&yTwo==7))))
        System.out.println(i + " |                           *");
    else if((i==6)&&(((xOne==7&&yOne==6)||(xTwo==7&&yTwo==6))))
        System.out.println(i + " |                           *");
    else if((i==5)&&(((xOne==7&&yOne==5)||(xTwo==7&&yTwo==5))))
        System.out.println(i + " |                           *");
    else if((i==4)&&(((xOne==7&&yOne==4)||(xTwo==7&&yTwo==4))))
        System.out.println(i + " |                           *");
    else if((i==3)&&(((xOne==7&&yOne==3)||(xTwo==7&&yTwo==3))))
        System.out.println(i + " |                           *");
    else if((i==2)&&(((xOne==7&&yOne==2)||(xTwo==7&&yTwo==2))))
        System.out.println(i + " |                           *");
    else if((i==1)&&(((xOne==7&&yOne==1)||(xTwo==7&&yTwo==1))))
        System.out.println(i + " |                           *");
    else if((i==0)&&(((xOne==7&&yOne==0)||(xTwo==7&&yTwo==0))))
        System.out.println(i + " + — — — — — — — — — — — — — * — — — — —");
}

if(xOne==8||xTwo==8)    
{
    if((i==9)&&(((xOne==8&&yOne==9)||(xTwo==8&&yTwo==9))))
        System.out.println(i + " |                               *");
    else if((i==8)&&(((xOne==8&&yOne==8)||(xTwo==8&&yTwo==8))))
        System.out.println(i + " |                               *");
    else if((i==7)&&(((xOne==8&&yOne==7)||(xTwo==8&&yTwo==7))))
        System.out.println(i + " |                               *");
    else if((i==6)&&(((xOne==8&&yOne==6)||(xTwo==8&&yTwo==6))))
        System.out.println(i + " |                               *");
    else if((i==5)&&(((xOne==8&&yOne==5)||(xTwo==8&&yTwo==5))))
        System.out.println(i + " |                               *");
    else if((i==4)&&(((xOne==8&&yOne==4)||(xTwo==8&&yTwo==4))))
        System.out.println(i + " |                               *");
    else if((i==3)&&(((xOne==8&&yOne==3)||(xTwo==8&&yTwo==3))))
        System.out.println(i + " |                               *");
    else if((i==2)&&(((xOne==8&&yOne==2)||(xTwo==8&&yTwo==2))))
        System.out.println(i + " |                               *");
    else if((i==1)&&(((xOne==8&&yOne==1)||(xTwo==8&&yTwo==1))))
        System.out.println(i + " |                               *");
    else if((i==0)&&(((xOne==8&&yOne==0)||(xTwo==8&&yTwo==0))))
        System.out.println(i + " + — — — — — — — — — — — — — — — * — — —");
}

if(xOne==9||xTwo==9)    
{
    if((i==9)&&(((xOne==9&&yOne==9)||(xTwo==9&&yTwo==9))))
        System.out.println(i + " |                                   *");
    else if((i==8)&&(((xOne==9&&yOne==8)||(xTwo==9&&yTwo==8))))
        System.out.println(i + " |                                   *");
    else if((i==7)&&(((xOne==9&&yOne==7)||(xTwo==9&&yTwo==7))))
        System.out.println(i + " |                                   *");
    else if((i==6)&&(((xOne==9&&yOne==6)||(xTwo==9&&yTwo==6))))
        System.out.println(i + " |                                   *");
    else if((i==5)&&(((xOne==9&&yOne==5)||(xTwo==9&&yTwo==5))))
        System.out.println(i + " |                                   *");
    else if((i==4)&&(((xOne==9&&yOne==4)||(xTwo==9&&yTwo==4))))
        System.out.println(i + " |                                   *");
    else if((i==3)&&(((xOne==9&&yOne==3)||(xTwo==9&&yTwo==3))))
        System.out.println(i + " |                                   *");
    else if((i==2)&&(((xOne==9&&yOne==2)||(xTwo==9&&yTwo==2))))
        System.out.println(i + " |                                   *");
    else if((i==1)&&(((xOne==9&&yOne==1)||(xTwo==9&&yTwo==1))))
        System.out.println(i + " |                                   *");
    else if((i==0)&&(((xOne==9&&yOne==0)||(xTwo==9&&yTwo==0))))
        System.out.println(i + " + — — — — — — — — — — — — — — — — — * —");
}

if(i==9&&(yOne!=9&&yTwo!=9))
    System.out.println(i + " |");
if(i==8&&(yOne!=8&&yTwo!=8))
    System.out.println(i + " |");
if(i==7&&(yOne!=7&&yTwo!=7))
    System.out.println(i + " |");
if(i==6&&(yOne!=6&&yTwo!=6))
    System.out.println(i + " |");
if(i==5&&(yOne!=5&&yTwo!=5))
    System.out.println(i + " |");
if(i==4&&(yOne!=4&&yTwo!=4))
    System.out.println(i + " |");
if(i==3&&(yOne!=3&&yTwo!=3))
    System.out.println(i + " |");
if(i==2&&(yOne!=2&&yTwo!=2))
    System.out.println(i + " |");
if(i==1&&(yOne!=1&&yTwo!=1))
    System.out.println(i + " |");
if(i==0&&(yOne!=0&&yTwo!=0))
    System.out.println(i + " + — — — — — — — — — — — — — — — — — — —");
}

System.out.println("  0   1   2   3   4   5   6   7   8   9");
}

} 
```

# html - html5画布大图导出

> ID：14887705
> 
> 赞同：1
> 
> 时间：2013-02-15T03:06:08.777
> 
> 标签：html, canvas, export, fabricjs

我希望将画布导出为 1500x1500 300dpi 最终产品。

我只想拖放图像，而不是在画布上绘图，以创建像相册/拼贴画之类的东西。所以人们会将图像从右侧面板拖到画布中，调整大小，旋转等。

看来我最好的选择是渲染一个 500x500 并跟踪/记录所有图像/对象活动，然后在 PHP 中将记录的动作处理/模拟到一个更大的文件（1500x1500），然后保存/导出该文件。

我认为我不希望浏览器尝试处理大画布 + 高分辨率图像，以及屏幕上可能出现的许多图像 (15+)。（在本地测试中，它在导出时崩溃了几次）。

基本上使用画布作为预览模式 (500x500)，创建照片拼贴，然后 PHP 导出到大/高分辨率 (1500x1500) - 完全按比例。

主要寻找文件、方向或建议。有什么我需要注意的吗？可能的问题？建议非常感谢。

目前使用 FabricJS，但对任何解决方案都开放。还有关于实现 300dpi 的任何见解。会考虑为这个项目招聘，只是想看看最好的路线，谢谢。

# ios - 推送通知 iOS 重置

> ID：14887708
> 
> 赞同：1
> 
> 时间：2013-02-15T03:06:18.190
> 
> 标签：ios, push-notification, apple-push-notifications, ios6.1

我想为我的应用重置推送通知设置。我已经阅读了有关重置设置的苹果文档（没有帮助）以及这里的一些问题（也没有帮助）。所以最后我通过设置->常规->重置->删除所有内容和设置来重置我的iPhone（效果不佳。）

还有其他解决方案吗？

顺便说一句，我正在使用 iOS 6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:56:08.910

[https://developer.apple.com/library/archive/technotes/tn2265/_index.html](https://developer.apple.com/library/archive/technotes/tn2265/_index.html)

启用推送的应用第一次注册推送通知时，iOS 会询问用户是否希望接收该应用的通知。一旦用户对此警报做出响应，除非设备已恢复或应用程序已卸载至少一天，否则它不会再次显示。

您也可以在卸载应用程序后将时钟移动一天并尝试。

# bash - 如何使用 bash 重命名文档？

> ID：14887709
> 
> 赞同：0
> 
> 时间：2013-02-15T03:06:24.547
> 
> 标签：bash, rename, hosts

我需要制作这个 bash 脚本：

```
#!bin/bash
echo "Checking if root…."
if [[ $(/usr/bin/id -u) -ne 0 ]]; then
    echo "Not running as root"
    exit
fi
echo -ne "Downloading NEW hosts blocking file: "
wget -qO /tmp/hosts.txt http://deathsrepo.webege.com/hosts.txt
echo "DONE!"
mv /tmp/hosts.text -b etc/
wget -qO /tmp/hosts.bak http://deathsrepo.webege.com/hosts.bak
mv /tmp/hosts.bak -b etc/
rename .txt . *.text 
```

能够将 hosts.text 重命名为 hosts。此外，当这个包被删除时，我需要以 hosts.bak 命名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:44:42.317

1 - 删除原始**主机：**

```
rm /etc/hosts 
```

2 - 重命名**hosts.text：**

```
mv /tmp/hosts.text /tmp/hosts 
```

3 - 将**hosts.text**移动到**/etc：**

```
mv /tmp/hosts.text /etc 
```

**您可以使用mv**同时移动*和*重命名。我还建议进行备份而不是删除原始主机：

 **```
mv /etc/hosts /etc/hosts.bak   # Make a backup
mv /tmp/hosts.text /etc/hosts  # Move and rename 
```

我并没有真正明白你想要做什么，但我认为你的完整脚本会变成这样：

```
#!bin/bash
echo "Checking if root…."
if [[ $(/usr/bin/id -u) -ne 0 ]]; then
    echo "Not running as root"
    exit
fi
echo -ne "Downloading NEW hosts blocking file: "
wget -qO /tmp/hosts.txt http://deathsrepo.webege.com/hosts.txt
echo "DONE!"
mv /tmp/hosts.txt /etc/hosts  # replace original hosts with downloaded hosts.txt
wget -qO /tmp/hosts.bak http://deathsrepo.webege.com/hosts.bak
mv /tmp/hosts.bak /etc        # move downloaded hosts.bak to /etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:10:48.233

要重命名文件，只需移动它：

```
mv hosts.text /etc/hosts 
```

如果您的目标是一个目录，您的文件将被移入其中，名称不变：

```
mv hosts.text /etc/  # file is moved to /etc/hosts.text 
```

如果目标是文件，并且目标文件存在，则源将移动到指定的目标文件，并覆盖该目标的文件：

```
mv hosts.text /etc/hosts   # file is moved and renamed to /etc/hosts 
```

如果目标不存在，并且缺少尾部斜杠，您的文件将被重命名为目标：

```
mv hosts.text foobar.txt  # file is renamed to foobar.txt 
```**

# ajax - Ajax / 深度链接和谷歌索引 / SEO - 这是一个坏主意吗？

> ID：14887710
> 
> 赞同：-3
> 
> 时间：2013-02-15T03:06:31.303
> 
> 标签：ajax, seo, search-engine, googlebot, deep-linking

我即将着手为朋友的乐队建立一个面向音乐的网站，我想建立一个类似[这个模板的东西。](http://radykal.de/themeforest/stylico/?page=features.html)它使用 ajax 和深度链接。

我担心这个网站不会被谷歌抓取。有什么我可以做的，或者我可以调整代码以使其可抓取吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:56:44.670

该模板对我来说看起来不可抓取。Googlebot 永远不会找到您的内容。如果我转到模板页面并查看源代码，然后搜索“带有过滤器的 Gigs schedule”，我在页面源代码中找不到它。这是因为该特定内容是使用 AJAX 加载的，而不是页面源的一部分。

`#!`该模板在 url中不使用 Google 的可抓取 AJAX 标准。[https://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/) 如果您使用该模板，Googlebot 将不会为您网站上的内容编制索引。

此外，似乎存在一些 url 问题。我看到这两个非常相似的 URL`http://radykal.de/themeforest/stylico/features.html`和`http://radykal.de/themeforest/stylico/?page=features.html`. 作为用户，如果我访问第二个 url，我会得到内容，但看不到导航。如果 googbot 要找到内容，它似乎很可能会索引第二个 url 并将其用作访问者的登录页面。在这种情况下，缺少导航将不会是良好的用户体验，因为用户将无法浏览您的网站。

# java - 如何将字符串转换为数组列表

> ID：14887711
> 
> 赞同：0
> 
> 时间：2013-02-15T03:06:34.637
> 
> 标签：java, string, arraylist

假设我有这个字符串 -

```
string = "AEIOU"; 
```

我想将它转换为`ArrayList<String>`，其中每个字符都是它自己的`String`个体`ArrayList<String>`

```
[A, E, I, O, U] 
```

编辑：我不想转换为`ArrayList<Character>`（是的，这很简单，我在课堂上也很注意），但我确实想转换为`ArrayList<String>`.

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T03:14:52.887

将 转换`String`为`char`数组，

```
char[] cArray = "AEIOU".toCharArray(); 
```

当您遍历数组时，将每个`char`转换为 a `String`，然后将其添加到列表中，

```
List<String> list = new ArrayList<String>(cArray.length);

for(char c : cArray){
    list.add(String.valueOf(c));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T03:09:11.400

循环并使用`String.charAt(i)`, 构建新列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-06T16:47:43.347

您可以使用 split 方法并将分隔符设置为空字符串，如下所示：

`ArrayList<String> strings = new ArrayList<>(Arrays.asList(string.split("")));`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T03:23:49.370

首先，您必须定义arrayList，然后遍历字符串并创建一个变量来保存字符串中每个点的字符。然后你只需使用 add 命令。不过，您将不得不导入 arraylist 实用程序。

```
String string = "AEIOU";
ArrayList<char> arrayList = new ArrayList<char>();

for (int i = 0; i < string.length; i++)
{
  char c = string.charAt(i);
  arrayList.add(c);
} 
```

导入语句如下所示： import java.util.ArrayList;

要将其设置为字符串数组列表，您只需将我们给您的 char 变量转换为字符串，然后添加它：（并导入上述语句）

```
ArrayList<String> arrayList = new ArrayList<String>();
String string = "AEIOU"

for (int i = 0; i < string.length; i++)
{
  char c = string.charAt(i);
  String answer = Character.toString(c);
  arrayList.add(answer);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T05:59:13.933

对于单行答案，请使用以下代码：

```
 Arrays.asList(string .toCharArray()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T03:32:15.277

因为今天晚上每个人都在做作业……

```
String myString = "AEIOU";
List<String> myList = new ArrayList<String>(myString.length());
for (int i = 0; i < myString.length(); i++) {
    myList.add(String.valueOf(myString.charAt(i)));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-22T16:52:50.863

Kotlin 方法：

```
fun String.toArrayList(): ArrayList<String> {
    return ArrayList(this.split("").drop(1).dropLast(1))
}

var letterArray = "abcd".toArrayList()
print(letterArray) // arrayListOf("a", "b", "c", "d") 
```

# soa - SOA 建模术语

> ID：14887713
> 
> 赞同：0
> 
> 时间：2013-02-15T03:06:38.433
> 
> 标签：soa

我正在为我们的新项目学习 SOA。我想了解有关 SOA 建模技术的基本信息。我在互联网上看到了很多术语，例如 SoaML、BPMN、SOMF、SOMA、SOBA ......并且对何时/何地使用什么建模技术感到困惑。
请帮助我确定准确的技术来模拟我们的服务。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T09:33:18.373

*   SOAML - 用于建模 SOA 的 UML 配置文件（建模表示法）。
*   BPMN - 用于建模业务流程的建模符号。
*   SOMF - 设计 SOA 架构的方法。来自迈克尔·贝尔。由 Sparx Enterprise Architect 等工具支持
*   SOMA - 设计 SOA 架构的方法。来自 IBM。受 RSA 支持。

没听说过SOBA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T05:23:26.163

使用最简单的工具对您的服务进行建模，我使用块和线图作为概览（服务）级别模型，并使用 UML 序列图来描述内部编排。

建模语言不会帮助您学习如何构建 SOA，实践经验和遵循最佳实践会有所帮助。

祝你好运，享受旅程

# c - K&R 书中的散列函数

> ID：14887714
> 
> 赞同：0
> 
> 时间：2013-02-15T03:07:10.903
> 
> 标签：c, hash, x86, 32-bit, integer-overflow

考虑这个函数：

```
unsigned hash(char *s)
{
  char *p;
  unsigned hashval;
  for(p = s; *p; p++)
    hashval = *p + 31 * hashval;
  return hashval;
} 
```

如何测量`s`将返回错误结果的字节数，例如溢出？我在 32 位平台上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T03:12:00.373

如果您将其更改为阅读

```
unsigned hash(const char *s)
{
  const unsigned char *p;
  unsigned hashval = 0;
  for (p = (const unsigned char *) s; *p; p++)
    hashval = *p + 31u * hashval;
  return hashval;
} 
```

那么由于整数溢出，不再有任何未定义行为的可能性，因为算术中涉及的所有类型都是无符号的，所以一切都包装了 mod 2 ^n（其中*n*是`unsigned`in 位的宽度）。我还修复了未初始化变量的使用，并制作了`s`and `p` `const`，这可能会改进优化和/或捕获函数体中的错误。

（我现在不记得确切的算术转换规则；一开始可能不可能。但是，这样写*显然*不可能。）

顺便说一句，现在已知有更好的哈希函数：如果您没有强烈的理由这样做，我建议使用[SipHash](https://131002.net/siphash/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T03:38:34.220

几个想法：

首先，在散列函数中会出现溢出。

其次，由于您的函数包含 a `31*hashval`，并且 string 中的每个元素的值必须至少为 1，因此您会期望在溢出之前可以拥有的最长字符串是所有 \x01 的字符串，它会溢出散列当它的长度为 6 时（由于该`*31`操作将整个数字分布在左侧的 5 位上，因此会有进位，这意味着您可能会影响第六位，并且 6*6 = 36 > 32 ）。当字节更大时，数字会更少（第一个字节几乎定义了行为 - 当它很大时，您可能会在五个字节后溢出）。用真实的位和字节更容易显示这一点。我将使用 a`*32`而不是`*31`算法（不太正确，但不用担心进位，你会明白的）：

```
byte      hash is less than:
0000a000  00000000 00000000 00000000 0000a000
10000000  00000000 00000000 000000a0 10000000
b0000000  00000000 00000000 a0100000 b0000000
c0000000  00000000 00a01000 00b00000 c0000000
d0000000  0000a010 0000b000 00c00000 d0000000
anything  OVERFLOW! 
```

As was pointed out above, you can improve the predictable behavior of your (rather poor) hashing algorithm by declaring everything as unsigned integer; I would also recommend initializing the hash (and a value other than zero might be a good idea), rather than assuming that the compiler will set it to zero (I am not 100% sure that's defined behavior). Finally, if you are wondering about overflow, and want to get a warning, I would modify the code as follows:

```
for(p = s; *p; p++) {
    if((hashval > 0xFFFFFFFF/31) || (*p>>1 + 31 * (hashval>>1)) > 0x7FFFFFFF) {
        printf("hash is about to overflow at character %c\n", *p);
    }
    hashval = *p + 31 * hashval;
} 
```

# iphone - iOS 上的 Google Analytics（分析）事件和社交报告

> ID：14887715
> 
> 赞同：1
> 
> 时间：2013-02-15T03:07:25.147
> 
> 标签：iphone, ios, ipad, google-analytics

我正在使用适用于 iOS 的最新版本的 Google 分析（截至本发布日期）。pageViews 被正确记录和报告，但**事件**和**社交**事件不是。以下是我的一些代码片段：

```
@interface RootViewController : GAITrackedViewController 
```

我所有的 ViewControllers 都继承了**GAITrackedViewController**

```
[self.tracker sendEventWithCategory:@"Twitter" withAction:@"Tweet" withLabel:@"Tweet App Info" withValue:nil];
[self.tracker sendSocial:@"Twitter" withAction:@"Tweet App Info" withTarget:nil]; 
```

我从我的视图控制器调用它来记录发送推文的事件，但是当我检查我的谷歌分析（Engagement->Events->OverView）时，没有记录任何事件。这不是实时数据，我说的是 3 天没有报告事件的测试。

我正在遵循[Google Mobile App Analytics](https://developers.google.com/analytics/devguides/collection/ios/v2/events "移动分析")的本指南，但是在使用时

```
[tracker sendEvent] 
```

我收到错误，所以我使用

```
[self.tracker sendEvent] 
```

我认为它使用了应用程序的默认跟踪器。

对这个问题有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T15:15:27.253

对我来说， [self.tracker ...] 或 [tracker ...] 调用不起作用。我最终使用了共享实例默认跟踪器，如下所示：

```
[[GAI sharedInstance].defaultTracker sendEventWithCategory:@"TAC_Agree" withAction:@"buttonClick" withLabel:@"" withValue:[NSNumber numberWithInt:0]]; 
```

这绝对适合我。

# hadoop - 哪个版本的 Sqoop 适用于 Hadoop 1.0.4？

> ID：14887716
> 
> 赞同：1
> 
> 时间：2013-02-15T03:07:32.403
> 
> 标签：hadoop, sqoop

我正在使用 hadoop 1.0.4 和 hive 0.9.0 谁能建议我们可以配置哪个版本的 Sqoop？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:35:15.443

我建议使用最新的 Sqoop 版本 1.4.2。您可以从[官方镜像](http://www.apache.org/dist/sqoop/1.4.2/)中获取这些位。请确保下载以“hadoop-1.0.0.tar.gz”结尾的文件，其中包含与您的 Hadoop 版本兼容的二进制工件。

# c# - Elmah 自定义记录器不工作

> ID：14887725
> 
> 赞同：1
> 
> 时间：2013-02-15T03:10:05.177
> 
> 标签：c#, asp.net-mvc, elmah

我希望有一个全局点来处理 asp.mvc3 应用程序中的所有异常。我创建了新应用程序，使用 nuget 添加了 elmah 并实现了 ElmahCustomLogger 类。我还在 web.config elmah 部分注册了这个自定义记录器。

出于某种原因，ElmahCustomLogger::Log 方法永远不会被调用（我在那里设置了一个刹车点）

```
public class ElmahCustomLogger : ErrorLog 
{
    public override string Log(Error error)
    {
        throw new NotImplementedException();
    }

    public override ErrorLogEntry GetError(string id)
    {
        throw new NotImplementedException();
    }

    public override int GetErrors(int pageIndex, int pageSize, IList errorEntryList)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:18:31.177

看起来我只需要声明特定的构造函数即可使其工作：

```
public class ElmahCustomLogger : Elmah.ErrorLog
{
    public ElmahCustomLogger(IDictionary config) {}
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T22:30:48.340

受这篇[文章的启发](http://blog.ivanovtech.com/post/Adding-Exception-Data-Dictionary-to-ELMAH-log.aspx)

这是我的解决方案：

```
namespace CompanyName.Models.Platform.Exceptions
{
    /// <summary>
    /// Custom SQL Elmah logger with more details from the Exception.Data Collection
    /// </summary>
    public class EnhancedSqlErrorLog : SqlErrorLog
    {
        public EnhancedSqlErrorLog(IDictionary config) : base(config)
        {
            // Must define for Elmah to work
        }

        public EnhancedSqlErrorLog(string connectString) : base(connectString)
        {
            // Must define for Elmah to work
        }

        public override string Log(Error error)
        {
            // If there is data on the exception, log it
            if (error.Exception.Data != null && error.Exception.Data.Keys.Count > 0)
            {
                var sb = new StringBuilder();

                foreach (var key in error.Exception.Data.Keys)
                {
                    sb.AppendLine(key + " - " + error.Exception.Data[key]);
                }

                // Be sure to append to whatever is already there
                error.Detail += sb.ToString();
            }

            return base.Log(error);
        }
    }
} 
```

然后在你的 web.config 点 Elmah 使用新的记录器

```
<errorLog type="CompanyName.Models.Platform.Exceptions.EnhancedSqlErrorLog, YourDllName" connectionString="Data Source=.;Initial Catalog=YourDatabase;Integrated Security=True;MultipleActiveResultSets=True;" /> 
```

# c# - 游戏客户端更新

> ID：14887732
> 
> 赞同：2
> 
> 时间：2013-02-15T03:11:21.007
> 
> 标签：c#, auto-update

我是一名 MMORPG 私人服务器开发人员，我期待为用户的客户端创建一个多合一的更新程序，因为使用必须手动下载的补丁非常烦人和蹩脚。

我是 C# 的新手，但我已经成功地使用自己的界面和基本的游戏开始/选项按钮制作了自己的启动器，并注意从我的网络服务器读取。

现在，我想为此制作一个集成的更新功能，但我很迷茫，我不知道从哪里开始。这就是它的样子，它只是一个概念

![在此处输入图像描述](../Images/50a84c0528b1c5a2dc7bc47f85cdffc0.png)

它将具有用于启动游戏和更新它的主按钮，基本上，当您打开程序时，该按钮将写入“更新”并被禁用（当它搜索新更新时），如果找到，它会转进入一个可点击的按钮，然后在下载更新后它会自动变为“开始游戏”。

一个用于整体更新的进度条，另一个用于查看当前正在下载的文件的进度，所有这些都包含基本信息，如百分比和需要下载多少文件。

我需要找到一种方法让启动器通过 HTTP 方法检查网络服务器上的文件，并检查它们是否与客户端或更新的文件相同，因此它总是重新下载已经相同版本的文件以及一种方法，以便更新程序将下载更新为压缩存档，并在下载完成后自动提取和覆盖现有文件。

注意：正在更新的文件不是 .exe，它们主要是纹理/配置文件/地图/图像/等...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T05:06:00.983

我将为这个系统绘制一个可能的架构。它不完整，您应该将其视为前半部分的详细伪 C# 代码形式和后半部分的一组提示和建议。

我相信您可能需要两个应用程序：

*   AC# WinForms 客户端。
*   AC# 服务器端应用程序，可能是 Web 服务。

我不会关注这个答案的安全问题，但它们显然非常重要。我希望可以在更高级别上实现安全性，也许可以使用 SSL。Web 服务将在 IIS 中运行，实现某种形式的安全性应该主要是配置问题。

服务器端部分不是严格要求的，特别是如果您不想要压缩；可能有一种方法可以配置您的服务器，以便在**website.com/updater**发出 HTTP 请求时返回一个易于解析的文件列表。然而，拥有 Web 服务更灵活，而且可能更容易实现。您可以从查看[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms733766.aspx)开始。如果您确实想要压缩，您可以将服务器配置为透明地压缩单个文件。我将尝试绘制所有可能的变体。

在单个更新 ZIP 文件的情况下，基本上更新程序 Web 服务应该能够响应两个不同的请求；首先，它可以返回相对于服务器目录**website.com/updater**的所有游戏文件的列表，以及它们的最后写入时间戳（**GetUpdateInfo**Web 服务中的方法）。客户端会将这个列表与本地文件进行比较；服务器上可能不再存在某些文件（可能客户端必须删除本地副本），客户端上可能不存在某些文件（它们是全新的内容），并且客户端和服务器上可能同时存在一些其他文件，在这种情况下，客户端需要检查最后一次写入时间以确定它是否需要更新版本。客户端将构建这些文件相对于游戏内容目录的路径列表。游戏内容目录应镜像服务器**website.com/updater**目录。

其次，客户端将此列表发送到服务器（ Web 服务中的**GetUpdateURL**）。服务器将创建一个包含更新的 ZIP 并使用其 URL 进行回复。

```
[ServiceContract]
public interface IUpdater
{
    [OperationContract]
    public FileModified[] GetUpdateInfo();

    [OperationContract]
    public string GetUpdateURL();
}

[DataContract]
public class FileModified
{
    [DataMember]
    public string Path;

    [DataMember]
    public DateTime Modified;
}

public class Updater : IUpdater
{
    public FileModified[] GetUpdateInfo()
    {
        // Get the physical directory
        string updateDir = HostingEnvironment.MapPath("website.com/updater");

        IList<FileModified> updateInfo = new List<FileModified>();

        foreach (string path in Directory.GetFiles(updateDir))
        {
            FileModified fm = new FileModified();
            fm.Path = // You may need to adjust path so that it is local with respect to updateDir
            fm.Modified = new FileInfo(path).LastWriteTime;
            updateInfo.Add(fm);
        }

        return updateInfo.ToArray();
    }

    [OperationContract]
    public string GetUpdateURL(string[] files)
    {
        // You could use System.IO.Compression.ZipArchive and its
        // method CreateEntryFromFile. You create a ZipArchive by
        // calling ZipFile.Open. The name of the file should probably
        // be unique for the update session, to avoid that two concurrent
        // updates from different clients will conflict. You could also
        // cache the ZIP packages you create, in a way that if a future
        // update requires the same exact file you would return the same
        // ZIP.

        // You have to return the URL of the ZIP, not its local path on the
        // server. There may be several ways to do this, and they tend to
        // depend on the server configuration.

        return urlOfTheUpdate;
    }
} 
```

客户端将使用**HttpWebRequest**和**HttpWebResponse**对象下载 ZIP 文件。要更新进度条（在此设置中您只有一个进度条，请查看我对您问题的评论），您需要创建一个**BackgroundWorker**。[本文](http://www.codeproject.com/Articles/17979/Downloading-Files-in-NET-With-All-Information-Prog)和[另一篇文章](http://www.codeproject.com/Articles/35787/VB-NET-Background-File-Downloader)涵盖了相关方面（不幸的是，该示例是用 VB.NET 编写的，但看起来与 C# 中的非常相似）。要推进进度条，您需要跟踪收到的字节数：

```
int nTotalRead = 0;
HttpWebRequest theRequest;
HttpWebResponse theResponse;

...

byte[] readBytes = new byte[1024];
int bytesRead = theResponse.GetResponseStream.Read(readBytes, 0, 4096);

nTotalRead += bytesread;
int percent = (int)((nTotalRead * 100.0) / length); 
```

收到文件后，您可以使用**System.IO.Compression.ZipArchive.ExtractToDirectory**更新您的游戏。

如果您不想使用 .NET 显式压缩文件，您仍然可以使用 Web 服务的第一种方法来获取更新文件的列表，并使用**HttpWebRequest/HttpWebResponse**对在客户端复制您需要的文件每个。这样你实际上可以有两个进度条。计算文件的那个将简单地设置为一个百分比，例如：

```
int filesPercent = (int)((nCurrentFile * 100.0) / nTotalFiles); 
```

如果您有其他方式获取列表，您甚至不需要 Web 服务。

如果你想单独压缩你的文件，但你不能让服务器自动实现这个功能，你应该用这个接口定义一个 web 服务：

```
[ServiceContract]
public interface IUpdater
{
    [OperationContract]
    public FileModified[] GetUpdateInfo();

    [OperationContract]
    public string CompressFileAndGetURL(string path);
} 
```

您可以在其中要求服务器压缩特定文件并返回压缩的单文件存档的 URL。

**编辑 - 重要**

特别是在你的更新非常频繁的情况下，你需要特别注意*时区*。

**编辑 - 另一种选择**

我应该重申，这里的主要问题之一是从服务器获取*当前版本中的文件列表；*该文件应包括每个文件的最后写入时间。像 Apache 这样的服务器可以免费提供这样的列表，虽然它通常是供*人类*使用的，但是它很容易被程序解析。我确信必须有一些脚本/扩展名才能以更机器友好的方式格式化该列表。

还有另一种获取该列表的方法；你可以在服务器上有一个文本文件，对于每个*游戏内容*文件，它会存储它的最后写入时间，或者甚至更好的是，一个渐进的版本号。您将比较版本号而不是日期来检查您需要哪些文件。这将使您免受时区问题的影响。但是，在这种情况下，您需要维护此列表的本地副本，因为文件没有版本号之类的东西，而只有一个名称和一组日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T03:54:39.410

这是一个广泛而多样的问题，根据不同的实施要求，有几个可以称为“正确”的答案。这里有一些想法......

1.  我的方法是使用`System.Security.Cryptography.SHA1`为每个游戏资产生成哈希码列表。然后更新程序可以下载列表，将其与本地文件系统进行比较（缓存本地生成的哈希以提高效率）并构建要下载的新/更改文件列表。

2.  如果游戏数据使用存档，则该过程会涉及更多，因为当内部可能只有一个小文件已更改时，您不希望下载巨大的存档。在这种情况下，您希望对存档中的每个文件进行哈希处理并提供一种下载这些包含文件的方法，然后使用您从服务器下载的文件更新存档。

3.  最后，考虑一下使用 Binary Diff/Patch 算法通过下载更小的补丁文件来减少带宽需求。在这种情况下，客户端将请求从当前版本更新到文件最新版本的补丁，发送本地文件的哈希，以便服务器知道要发送哪个补丁。这要求您在服务器上为您希望能够修补的每个先前版本维护一堆补丁，这可能比您感兴趣的要多。

以下是一些可能相关的链接：

*   [SHA1 类](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha1.aspx)- SHA1 哈希类的 Microsoft 文档
*   [SevenZipSharp](http://sevenzipsharp.codeplex.com/) - 在 C# 中使用 7Zip
*   [bsdiff.net](https://github.com/LogosBible/bsdiff.net) - 一个实现 bsdiff 的 .NET 库

哦，考虑使用多部分下载器来更好地使客户端的可用带宽饱和。这会导致服务器上的负载更高，但可以大大改善客户端体验。

# image - IE8/9 中缩放图像的质量比 IE7 差

> ID：14887733
> 
> 赞同：9
> 
> 时间：2013-02-15T03:11:29.710
> 
> 标签：image, internet-explorer-8, internet-explorer-9, internet-explorer-7, scale

尝试在 IE7 和 IE9 中打开[此页面。](https://developer.mozilla.org/en-US/docs/CSS/image-rendering#Live_Examples)

正如页面所述，它使用`-ms-interpolation-mode:bicubic`.

我读过这个设置在 IE8/9 中被禁用，因为它现在是默认样式（在 IE7 中，最近邻是默认的插值模式）。

但是，IE8/9 的图像质量比 IE7 差很多，如下所示：

![例子](../Images/7c944eff889cfb481c2d5e1ec2a0078d.png)

是什么赋予了？有没有办法在 IE8/9 中获得更好的缩小图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T01:15:13.513

使用 CSS fit-and-shrink 技术，如下所示：

*   [CSS fit-and-shrink 演示](http://www.cssplay.co.uk/menu/fast.html)

它基本上将图像的两个副本分层，一个具有固定宽度，另一个具有固定高度，以保持纵横比。

# ios5 - CLLocation 区域监控在 iOS 5.1 和 iOS 6 中的行为不同

> ID：14887735
> 
> 赞同：0
> 
> 时间：2013-02-15T03:11:41.897
> 
> 标签：ios5, ios6, core-location, cllocationmanager

**更新：我正在寻找解决 iOS5.1 中这个问题的方法。目前，我有证据表明这个问题实际上是已知的。但是，我认为它与更新的 xcode 相关，而不是 iOS5.1 实际上区域监控不起作用。**

下面的简单代码在 iOS5 和 iOS6 之间的行为不同。它在 iOS6 中按预期工作。

但是在 iOS5 中，didEnterRegion 回调只在第一次进入区域时触发。如果退出该区域，然后重新进入该区域，则不会触发。如果关闭并重启应用，进入区域不会触发回调。

在 iOS5 和 iOS6 模拟器上可以看到行为上的差异。在装有 iOS5 的 iPhone 4S 上可以看到损坏的 iOS5 行为。使用了 Xcode 4.6。CoreLocation 框架已正确添加，并且 locMan 是 AppDelegate 的属性。为此测试创建了一个干净的新项目。

有人可以找到解决此问题的方法吗？该修复需要使用区域监控，而不是主动位置更新。

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate, CLLocationManagerDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, strong) CLLocationManager *locMan;

@end

// AppDelegate implementation file

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    /// LocationManager
    self.locMan = [[CLLocationManager alloc] init];
    self.locMan.delegate = self;

    CLLocationCoordinate2D coordinates = CLLocationCoordinate2DMake(40.0, 40.0);
    CLLocationDistance distance = 100.0;
    CLRegion *region = [[CLRegion alloc] initCircularRegionWithCenter:coordinates radius:distance identifier:@"hello"];
    [self.locMan startMonitoringForRegion:region];

    [self.window makeKeyAndVisible];
    return YES;
}

-(void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region {
    NSLog(@"didEnterRegion");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:14:26.707

将这个问题搁置一周后，我觉得我有足够的证据表明 iOS5.1 中的区域监控已被破坏。是时候结束这个问题了。

# image - 这个 URL 怎么在 www 之前有东西？

> ID：14887740
> 
> 赞同：1
> 
> 时间：2013-02-15T03:12:19.977
> 
> 标签：image, dns, icann

我以前从未见过！效果如何？我知道 ICANN 现在允许自定义域名，但它在**www**之前！我尝试在**欢迎**之前添加另一个 www ，它返回 404。

![欢迎.www](../Images/7a5c922045d099ee6b791a117b83a64d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T03:17:54.943

www 不是什么特别的东西。www 或 www1 或 Welcome 之间的服务器没有区别。有些网站根本没有www。实际上 www 是子域，您可以创建两个不同的网站：一个在 www 上，另一个没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T03:19:18.270

[RFC 1035](https://www.rfc-editor.org/rfc/rfc1035)定义了下面的语法。此外，您可能希望查看[此维基百科文章](http://en.wikipedia.org/wiki/Domain_name)。

```
<domain> ::= <subdomain> | " "

<subdomain> ::= <label> | <subdomain> "." <label>

<label> ::= <letter> [ [ <ldh-str> ] <let-dig> ]

<ldh-str> ::= <let-dig-hyp> | <let-dig-hyp> <ldh-str>

<let-dig-hyp> ::= <let-dig> | "-"

<let-dig> ::= <letter> | <digit>

<letter> ::= any one of the 52 alphabetic characters A through Z in
upper case and a through z in lower case

<digit> ::= any one of the ten digits 0 through 9

Note that while upper and lower case letters are allowed in domain
names, no significance is attached to the case.  That is, two names with
the same spelling but different case are to be treated as if identical.

The labels must follow the rules for ARPANET host names.  They must
start with a letter, end with a letter or digit, and have as interior
characters only letters, digits, and hyphen.  There are also some
restrictions on the length.  Labels must be 63 characters or less.

For example, the following strings identify hosts in the Internet:

A.ISI.EDU XX.LCS.MIT.EDU SRI-NIC.ARPA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T03:18:22.653

人们可以将他们喜欢的任何东西放在子域中，然后告诉服务器“对待`example.com.au`相同`www.example.com.au`”

因此，您可以拥有一个“真实”的 URL，例如：

```
www.abc.www.example.com 
```

然后告诉服务器允许：

```
abc.www.example.com 
```

这*可能*是你所看到的......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T03:23:00.507

这是第 4 级子域，其中 www.example.com 的 www 是第 3 级，因为 example 是 .com 的子域。

因此，子域可以向下执行 127 级，这样 my.desktop.www.example.com 将是一个有效的 URL，在这种情况下，中间是 www。

看看类似 traceRT 的东西，你可能会看到类似 dsl123.sfv.la.example.com （或其他）的东西，重点是，有很多多级子域的情况，有或没有 WWW - 另一个例子可能是邮件.phx.example.com，一家公司凤凰办公室的邮件服务器。

# python - 如果 python 中的某些文件类型，移动文件并创建目录

> ID：14887743
> 
> 赞同：4
> 
> 时间：2013-02-15T03:12:56.730
> 
> 标签：python, os.walk

这可能是一个简单的问题，但我对 python 和一般编程是全新的。

我正在开发一个简单的程序来将 .mp3 文件从一个位置复制/移动到另一个位置，同时镜像源位置的目录结构。到目前为止我所做的工作，但是即使源文件夹不包含 mp3 文件，它也会在目标位置创建新文件夹。如果源包含 .mp3，我只想创建新目录，否则可能会导致目标中出现一堆空文件夹。

这是我到目前为止所拥有的：

```
import os
import shutil #Used for copying files

##CONFIG
source_dir = "C:\Users\username\Desktop\iTunes\\" #set the root folder that you want to     scan and move files from.  This script will scan recursively.
destPath = "C:\Users\username\Desktop\converted From iTunes" #set the destination root that you want to move files to.  Any non-existing sub directories will be created.
ext = ".mp3" #set the type of file you want to search for.
count = 0 #initialize counter variable to count number of files moved
##

##FIND FILES
for dirName, subdirList, fileList in os.walk(source_dir):

    #set the path for the destination folder(s)
    dest = destPath + dirName.replace(source_dir, '\\') 

    #if the source directory doesn't exist in the destination folder
    #then create a new folder
    if not os.path.isdir(dest):
        os.mkdir(dest)
        print('Directory created at: ' + dest)

    for fname in fileList:
        if fname.endswith(ext) :
            #determine source & new file locations
            oldLoc = dirName + '\\' + fname
            newLoc = dest + '\\' + fname

            if os.path.isfile(newLoc): # check to see if the file already exists.  If it does print out a message saying so.
                print ('file "' + newLoc + fname + '" already exists')

            if not os.path.isfile(newLoc): #if the file doesnt exist then copy it and print out confirmation that is was copied/moved
                try:
                    shutil.move(oldLoc, newLoc)
                    print('File ' + fname + ' copied.')
                    count = count + 1
                except IOError:
                    print('There was an error copying the file:  "' + fname + '"')
                    print 'error'            

print "\n"
print str(count) + " files were moved."
print "\n" 
```

所以如果文件夹结构是这样的：

```
root->
 band 1->
  album name->
   song.m4a,
   song2.m4a 
```

现在它将在目标目录中创建所有这些文件夹，即使没有要复制的 .mp3 文件.....

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:22:39.177

我想我会为这种事情创建自己的副本包装器：

```
def fcopy(src,dest):
    """
    Copy file from source to dest.  dest can include an absolute or relative path
    If the path doesn't exist, it gets created
    """
    dest_dir = os.path.dirname(dest)
    try:
        os.makedirs(dest_dir)
    except os.error as e:
        pass #Assume it exists.  This could fail if you don't have permissions, etc...
    shutil.copy(src,dest) 
```

`.mp3`现在您可以在任何文件上调用此函数的树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:18:47.637

不会[`shutils.copytree`](http://docs.python.org/2/library/shutil.html)用更少的行做你想做的事吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T04:55:36.807

对于您现有的代码，我能想到的最简单的事情就是让它跳过其中没有任何 .mp3 文件的任何文件夹。这可以通过将以下项目和`if`语句添加到循环顶部来轻松完成。和函数可以一起使用以简化检查具有适当扩展名的文件[`itertools.ifilter()`](http://docs.python.org/2/library/itertools.html?highlight=ifilter#itertools.ifilter)。[`fnmatch.fnmatch()`](http://docs.python.org/2/library/fnmatch.html#fnmatch.fnmatch)

```
from itertools import ifilter
from fnmatch import fnmatch

ext = '.mp3'
fnPattern = '*'+ext

for dirName, subdirList, fileList in os.walk(source_dir):
    if not any(ifilter(lambda fname: fnmatch(fname, fnPattern), fileList)):
        print '  skipping "{}"'.format(dirName)
        continue
    ... 
```

您还必须进一步更改代码中的`os.mkdir(dest)`to`os.makedirs(dest)`以确保在需要将文件复制到目标目录的相应子分支时创建早期迭代跳过的任何子目录。

您可以通过创建和保存具有扩展名的匹配文件的可能为空的迭代器来稍微优化一下，然后稍后再次使用它来确定要复制的文件：

```
from itertools import ifilter
from fnmatch import fnmatch

ext = '.mp3'
fnPattern = '*'+ext

for dirName, subdirList, fileList in os.walk(source_dir):

    # generate list of files in directory with desired extension
    matches = ifilter(lambda fname: fnmatch(fname, fnPattern), fileList)

    # skip subdirectory if it does not contain any files of interest
    if not matches:
        continue
    ...
    ... create destination directory with os.makedirs()
    ...
    #  copy each file to destination directory
    for fname in matches:
      ... copy file 
```

# emacs - 如何在 Emacs 中浏览最近的文件（不仅仅是文件名）？

> ID：14887744
> 
> 赞同：0
> 
> 时间：2013-02-15T03:13:13.030
> 
> 标签：emacs, org-mode, ido, recent-file-list

我使用一个名为[buffer-stack](http://emacswiki.org/emacs/buffer-stack.el)的 Emacs 库来分页浏览我当前打开的缓冲区。这很棒，因为它允许我排除无趣的缓冲区，如*消息*，并仅浏览包含我创建的内容的缓冲区。我用一个按键 A-right 浏览这些缓冲区。

我还使用 Ido 模式[浏览​​最近打开的文件的名称](http://www.masteringemacs.org/articles/2011/01/27/find-files-faster-recent-files-package/)。

但是，我希望不仅可以浏览文件名，还可以浏览实际文件，最好是一次按键。

如何浏览最近打开的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T06:13:16.403

您可以将`helm-recentf`其`persistent-action`用于此目的。

您可以选择最近的文件，`helm-recentf`如下所示。

![在此处输入图像描述](../Images/506860ce8ac83d16c478e71a4677789a.png)

您可以通过按`Ctrl-z`(persistent-action) 查看文件内容。您按`Ctrl-z`，然后将其内容临时显示到另一个窗口（在本例中为上窗口）。

了解helm请看[官方文档](https://github.com/emacs-helm/helm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:59:14.227

这里有两种可能的解决方案（具体取决于您想要的用例）。

```
(defun zin/open-recent-file ()
  "Open the most recent currently closed file.

This will omit currently open files, instead it will retrieve the
next oldest file in recentf-list."
  (interactive)
  (let* ((count    0)
         (recent   recentf-list)
         (r-length (length recent))
         (buffers  (mapcar 'buffer-file-name (buffer-list))))
    ;; Compare next file on the list to open buffers, if open skip it.
    (while (member (nth count recent)
                   buffers)
      (setq count (1+ count))
      (if (= r-length count)
          (error "All recent buffers already open")))
    (find-file (nth count recent)))) 
```

```
(lexical-let ((recent-count 0))
  (defun zin/visit-recent-file ()
    "Visit files on the recentf-list in descending order.

This will work backwards through recentf-list visiting each file
in turn."
    (interactive)
    ;; If last command was not to cycle through the files, then start
    ;; back at the first in the list.
    (unless (eq last-command 'zin/visit-recent-file)
      (setq recent-count 0))
    ;; If current buffer is the current entry on the list, increment.
    (if (equal (buffer-file-name) (nth 0 recentf-list))
        (setq recent-count (1+ recent-count)))
    ;; Error if all entries have been processed
    (if (= recent-count (length recentf-list))
        (error "At oldest recent buffer"))
    ;; Open appropriate file.
    (find-file (nth recent-count recentf-list)))) 
```

第一个将浏览最近的文件列表 ( `recentf-list`) 并打开下一个未打开的文件。第二个将用于`recentf-list`循环到列表中的下一个缓冲区，直到所有内容都被访问然后出错（因为列表顺序将随着文件的重新打开而改变）。

要让它在到达终点时重新开始循环，只需`(error ...)`将

```
(setq recent-count 0) 
```

# php - PDO lastInsertID 返回 0

> ID：14887750
> 
> 赞同：-1
> 
> 时间：2013-02-15T03:14:33.273
> 
> 标签：php, pdo

我在 lastInsertID 返回 0 时遇到问题。它在另一个页面中工作，所以我这里有问题。

以下是在 try/catch 块中。

```
$idCount = "42";
/** set the database **/
$db = new PDO("mysql:host=$db_host;dbname=$db_name", $db_user, $db_pass);
/** set the error reporting attribute **/
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);            
$stmt = $db->prepare("SELECT image1 FROM items WHERE `id` = :id");    
/** bind the parameters **/
$stmt->bindParam(':id', $idCount, PDO::PARAM_STR);   
$stmt->execute();                 
$idCount = $db->lastInsertId();
echo $idCount; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T03:16:02.347

`lastInsertId()`如果您实际进行插入，则只会返回最后一个插入 id。你只是在做一个`select`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T03:17:57.707

函数名称`->lastInsertId()`应该提示您 SELECT 语句通常不会设置最后一个插入 ID。

通常，只有在具有列的表上的 INSERT 语句才会`auto_increment`表现出这种行为。

但也有例外，例如何时[`LAST_INSERT_ID(expr)`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)使用：

```
SELECT LAST_INSERT_ID(`id`) AS `id`, image1 FROM items WHERE `id` = :id 
```

# ssrs-2008 - SSRS - 将地址输入 Bing 地图以进行缩放？

> ID：14887756
> 
> 赞同：0
> 
> 时间：2013-02-15T03:15:09.650
> 
> 标签：ssrs-2008, reporting-services, bing-maps

我有一个包含地址数据的数据源。外部应用程序调用报告并提供一些表格数据，包括地址字段。

为简化起见，假设我只是传递了一条包含一些地址信息的记录。

我想生成一个顶部有 Bing 地图的报告，但是通过提供的地址字段，我希望地图对提供的地址字段进行地理编码，缩放到该地理编码结果周围的视口，并放置一个图钉标记在结果之上。

这可以通过 SSRS 和 Bing 地图/地理编码 API 实现吗？

我的实际工作流程将传递多条记录，并在单独的页面上为每条记录显示地图，以及一些图表和表格，显示有关特定记录的其他信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:18:36.107

你当然可以！（顺便说一句，这与地图无关`Bing`，`Bing`地图只是一个带有附加信息的图层，位于`ESRI shapefile`地图之上）

但为了做到这一点，您需要做一些准备工作：

**首先**，您需要将地址数据存储`Geospatial`在数据库中。

*[你可以在这里找到很好的信息](http://www.mssqltips.com/sqlservertip/1926/data-storage-and-retrieval-for-geospatial-data-in-sql-server-2008/)*

**其次**，您需要将`ESRI`地图和`Bing`图层添加到您的报告中，并使用地图上的点来定义`Geospatial`数据**集**。

*[有关更多信息和示例这里](http://www.solidq.com/sqj/Pages/2010_December_Issue/Map-It-Displaying-Geospatial-Data-in-Reporting-Services-2008-R2.aspx)*

.

就我个人而言，我必须补充一点，您可以使用 Map 主题做一些令人惊奇的事情。我用它来计算和显示位置之间的距离，甚至添加箭头来导航地图中的 L/R/U/D。

祝你好运 ！

# php - 堆叠ajax请求

> ID：14887761
> 
> 赞同：2
> 
> 时间：2013-02-15T03:15:57.093
> 
> 标签：php, mysql, ajax

感谢您检查这一点。

我在 mysql 中有一个数据库，它当前填充一个下拉菜单，在选择时使用 ajax 填充第二个下拉菜单`xmlhttprequest`到运行 mysql 查询的 php 文件。

然后，我想根据第二个下拉菜单中的选择显示一个表格，同时仍然保留第一个下拉菜单的功能。

到目前为止，我已经尝试向主文档添加第二个 js 调用，并尝试将该 js 调用放入第一个调用的 php 文件的输出中。

这两种选择似乎都不起作用。

我正在尝试做的事情可能吗？

日志文件从未显示它试图获取 getclubs.php，所以我假设 GetClub 调用永远不会被触发。

**测试.php：**

```
<html>
<title>
demo </title>
<head>
<script>
function GetCounty(str)
 {
 if (str=="")
   {
   document.getElementById("countymenu").innerHTML="";
    return;
    } 
 if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
 xmlhttp=new XMLHttpRequest();
  }
      else
      {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
   {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("countymenu").innerHTML=xmlhttp.responseText;
     }
}
xmlhttp.open("GET","getcounty.php?q="+str,true);
xmlhttp.send();
}
</script>
<script>
 function GetClubs(str)
 {
 if (str=="")
   {
   document.getElementById("clubtable").innerHTML="";
   return;
   } 
if (window.XMLHttpRequest)
   {// code for IE7+, Firefox, Chrome, Opera, Safari
   xmlhttp=new XMLHttpRequest();
   }
  else
   {// code for IE6, IE5
   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
  xmlhttp.onreadystatechange=function()
    {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
 {
 document.getElementById("clubtable").innerHTML=xmlhttp.responseText;
 }
   }
 xmlhttp.open("GET","getclub.php?q="+str,true);
 xmlhttp.send();
  }
  </script>
  </head>
  <body>

<?
 // Load field datas into List box
 $cn=mysql_connect("localhost","user","password") or die("Note: " . mysql_error());
 echo "Conn ok<br>";
 $res=mysql_select_db("snowusa_clubs",$cn) or die("Note: " . mysql_error());
 echo " Database opened<br>";
 //$rescounty=mysql_query("SELECT * FROM county WHERE state_id='33' ORDER by name;") or die ("Note: " . mysql_error());
    $resstate=mysql_query("SELECT * FROM state ORDER by longstate;") or die("Note: " . mysql_error());
echo " qry executed<br>";
 ?>
 <h1>Select</h1>

State:
 <select name="State" size=1 onchange="GetCounty(this.value)">
 <option value="">Select a State</option>
 <?
  while($rs = mysql_fetch_array($resstate))
 {
 echo "<option value=" .$rs['id'] . ">" . $rs['longstate'] . "</option>";
 }
 echo "</select> "
 ?>
 <p>
</p>
<div id="countymenu"><b>County menu for selected state will be listed here.</b></div>

 </body>
 </html> 
```

**获取县：php：**

```
<?php
$q=$_GET["q"];

$cn=mysql_connect("localhost","user","password");
if (!$cn)
   {
   die('Could not connect: ' . mysql_error());
    }

 mysql_select_db("snowusa_clubs", $cn);

 $sql="SELECT * FROM county WHERE state_id = '".$q."' ORDER by name";

 $result = mysql_query($sql);

 $fulllist="SELECT * FROM allclubs WHERE stateid = '".$q."' ORDER by clubname";
 $listresult = mysql_query($fulllist);

 echo "County : <select name=\"County\" size=1 onchange=\"GetClub(this.value)\">";

 echo "<option value=\"\">Select County</option>";

 while($rc = mysql_fetch_array($result))
 {
 echo "<option value=" .$rc['id'] . ">" . $rc['name'] . "</option>";
 }
 echo "</select>";

 echo "<p></p>";
 echo "Table of All Clubs in Selected State:</br>";

 echo "<table border='1'>
 <tr>
 <th>County</th>
 <th>Club Name</th>
 <th>Address</th>
 <th>Phone</th>
 <th>Website</th>
 <th>Email</th>

 </tr>";

 while($row = mysql_fetch_array($listresult))
   {
   echo "<tr>";
   echo "<td>" . $row['county'] . "</td>";
   echo "<td>" . $row['clubname'] . "</td>";
   echo "<td>" . $row['address'] . "</td>";
   echo "<td>" . $row['phone'] . "</td>";
   echo "<td>" . $row['website'] . "</td>";
   echo "<td>" . $row['email'] . "</td>";
   echo "</tr>";
     }
   echo "</table>";

   echo "<div id='clubtable'><b>Club Listing will appear as a table here.</b></div>";

   mysql_close($cn);
   ?> 
```

**获取俱乐部.php**

```
<?php
$q=$_GET["q"];

$cn=mysql_connect("localhost","user","password");
if (!$cn)
   {
   die('Could not connect: ' . mysql_error());
   }

 mysql_select_db("snowusa_clubs", $cn);

$sql="SELECT * FROM allclubs WHERE countyid = '".$q."' ORDER by clubname";

$clubresult = mysql_query($sql);

echo "<table border='1'>
<tr>
<th>County</th>
<th>Club Name</th>
<th>Address</th>
<th>Phone</th>
<th>Website</th>
<th>Email</th>

</tr>";

 while($row = mysql_fetch_array($clubresult))
  {
  echo "<tr>";
  echo "<td>" . $row['county'] . "</td>";
  echo "<td>" . $row['clubname'] . "</td>";
  echo "<td>" . $row['address'] . "</td>";
  echo "<td>" . $row['phone'] . "</td>";
  echo "<td>" . $row['website'] . "</td>";
  echo "<td>" . $row['email'] . "</td>";
  echo "</tr>";
   }
  echo "</table>";

 mysql_close($cn);
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:31:36.430

我的建议是按照一些小步骤重新组织代码：

1.  服务器端代码响应将是 json 数据
2.  使用 jquery 进行客户端调用，避免管理低级 HTTP 调用
3.  使用 jquery handlers injection 即时渲染代码并在客户端添加事件处理程序

关于 jquery 的一些参考资料：

```
- GET HTTP calls with : http://api.jquery.com/jQuery.get/
- how to add a event : http://api.jquery.com/bind/ 
```

一些例子 ：

对 test.php 的简单 GET HTTP 调用

```
$.get("test.php", function(data) {
  alert("Data Loaded: " + data);
}); 
```

向 id = foo 的元素添加点击

```
$('#foo').bind('click', function() {
  alert('User clicked on "foo."');
}); 
```

# excel - Excel vba 宏在 2007 年出现类型不匹配错误，但在 2010 年有效

> ID：14887765
> 
> 赞同：2
> 
> 时间：2013-02-15T03:16:32.177
> 
> 标签：excel, vba, types, foreach, mismatch

我在 Windows 7 上的 Excel 2010 中制作并测试了这个宏，还使用另一台 Windows 7 计算机进行了测试，但使用的是 Excel 2007。两者都可以使用，但是当我尝试在我的工作计算机（Windows 7、Excel 2007）上使用它时，我得到了第一个“下一个”语句中的“类型不匹配错误”。查找并发现我可以使用“Exit For”而不是“next”，但它只是抱怨包含“End If”的下一行。现在它声称“End If without block If”。我想我只是无法理解这在一台 Win7\Excel 2007 计算机上是如何工作的，而在另一台计算机上却不是。

该宏仅在电子邮件主题中搜索所选单元格的值（如果该单元格尚未着色），如果匹配，则更改该单元格的颜色。

```
Sub MultipleCellSubjectSearch()

'This macro searches for the selected cell values (if there is no cell color), when it finds a match it turns the cell color yellow

Dim olApp As Outlook.Application
Dim olNamespace As Outlook.Namespace
Dim olItem As MailItem
Dim olInbox  As Outlook.MAPIFolder
Dim olFolder As Outlook.MAPIFolder
Dim oCell As Range

'The following sets the Outlook folder to search
Set olApp = New Outlook.Application
Set olNamespace = olApp.GetNamespace("MAPI")
Set olInbox = olNamespace.GetDefaultFolder(olFolderInbox)

'The following searches for cell value string in subject
For Each oCell In Selection
    If oCell.Interior.Pattern = xlNone Then
        For Each olItem In olInbox.Items
            If InStr(olItem.Subject, (oCell.Value)) <> 0 Then
            oCell.Interior.ColorIndex = 6
            End If
        Next
    End If
Next

Set olInbox = Nothing
Set olNamespace = Nothing
Set olApp = Nothing

End Sub 
```

如果有人有任何想法，他们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T05:53:48.817

这是一个想法-您`olItem`的定义为`mailItem`. 当邮箱中的下一个项目不是邮件项目时，代码可能会失败？日历请求或其他原因会导致这种情况吗？您可能希望在内部循环中放置一个 Debug.Print 语句，以查看正在查看哪些对象 - 并查看循环是否确实执行，直到它遇到收件箱中的一个奇怪项目......

作为一个快速修复，如果您允许它成为一个变体，您将不会收到类型错误。因此，您只需将其声明为

```
Dim olItem 
```

没有`as mailItem`

这是一个长镜头。

# linq - 用于执行全文搜索的 Linq 查询

> ID：14887766
> 
> 赞同：2
> 
> 时间：2013-02-15T03:16:33.470
> 
> 标签：linq

如何使用 linq 语句完成以下操作？

```
SELECT Description 
FROM Production.ProductDescription 
WHERE FREETEXT(Description, 'Some Keywords') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T03:23:28.337

不，TSQL 中的全文搜索功能 FREETEXT 不能通过 Linq to SQL 直接访问。

您必须直接在数据库函数中执行该查询，然后您可以使用 Linq to SQL 将结果集拉回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T03:37:16.170

我不确定，但您可能必须根据关键字搜索表格的每一列/属性以模仿自由文本。前任：

```
 context.Production.ProductDescription
.Where(pd=>pd.Property1.Contains("Keyword") || pd.Property2.Contains("Keyword"); 
```

# regex - Perl - 解析最后一次出现的空格

> ID：14887767
> 
> 赞同：0
> 
> 时间：2013-02-15T03:16:56.023
> 
> 标签：regex, perl, whitespace, filenames

我正在尝试解析以下行的最后一块：

```
77      0       wl1271/wpa_supplicant_lib/driver_ti.h 
```

不幸的是，这些空间并不总是相同的长度。我假设 printf 或类似的东西被用来输出数据，所以它排成列。这意味着有时我有空格，有时我有制表符。

我已经通过在 perl 中使用正则表达式成功地获得了前两个数字。我认为我会得到最后一点的方式是搜索任何空白字符的最后一次出现，然后从那里抓取字符串的其余部分。我尝试使用`rindex`，但它只接受可搜索参数的字符而不是正则表达式（我认为这`\s`可以解决问题）。

谁能解决我在这里遇到的问题，或者通过介绍如何获取最后一个空格字符或帮助我解决以其他方式获取该字符串的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T03:42:35.017

为什么不`split`呢？

```
use strict;
use warnings;

my $string = '77      0       wl1271/wpa_supplicant_lib/driver_ti.h';
my ( $num1, $num2, $lastPart ) = split ' ', $string;

print "$num1\n$num2\n$lastPart"; 
```

输出：

```
77
0
wl1271/wpa_supplicant_lib/driver_ti.h 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T03:25:38.327

为什么不只匹配正则表达式`\S+$`- 即字符串中的最后一组非空白字符？

*   `\S`= 非空白字符
*   `$`= 行尾

编辑：你真的应该使用`split`，正如 Kenosis 所建议的那样。

# ios - ios实时音频分析电池续航提升

> ID：14887768
> 
> 赞同：0
> 
> 时间：2013-02-15T03:17:00.477
> 
> 标签：ios, objective-c, accelerate-framework

我正在使用加速框架进行实时音频分析，我的应用程序消耗了太多电池，如何在分析中不丢失数据的情况下延长电池寿命。

# google-apps-script - 是否可以在公式上触发 onEdit 函数

> ID：14887769
> 
> 赞同：0
> 
> 时间：2013-02-15T03:17:26.160
> 
> 标签：google-apps-script, google-sheets

我在 P 列中有一个复杂的公式，它检查大约 6 个条件并返回 1 或 0。我想在 P 列中隐藏每一行 1。我使用这个脚本：

```
function onEdit(e){
  var sheet = e.source.getActiveSheet();
  var r = sheet.getActiveRange();
  if (r.getColumnIndex() == 16 && r.getValue() == "1")
    sheet.hideRows(r.getRowIndex(),1);
} 
```

由于未知原因，该脚本不起作用。好像onEdit不能在公式上触发……真的是这样吗？我怎样才能使脚本工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:38:37.497

它不起作用，因为带有公式本身的单元格没有被编辑。这不是活动范围，因此`r.getValue() != 1`，它等于您刚刚输入的任何内容，并且`r.getColumnIndex()`永远不应该是 16。

放：

```
var r=sheet.getActiveRange();
var row=r.getRowIndex();
var p=sheet.getRange("P"+row); 
```

和

```
if(p.getValue()==1)
    sheet.hideRows(row,1); 
```

这应该可行，假设您的条件与`p`您要测试的条件在同一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T20:47:24.153

2013 年 5 月，为电子表格添加了“更改”触发器，并为公式更改提供了一个事件。

# java - 在eclipse中我正在尝试使用boxbug，但是，它一直告诉我公共无效行为正在覆盖info.gridworld.actor.Bug

> ID：14887776
> 
> 赞同：0
> 
> 时间：2013-02-15T03:18:30.477
> 
> 标签：java, gridworld

这是我正在尝试使用的代码（在 Mac 上）：

```
import info.gridworld.actor.Bug;
/**
* A <code>BoxBug</code> traces out a square "box" of a given size. <br />
* The implementation of this class is testable on the AP CS A and AB exams.
*/
public class BoxBug extends Bug
{
private int steps;
private int sideLength;

 /**
 * Constructs a box bug that traces a square of a given side length
 * @param length the side length
 */
public BoxBug(int length)
{
    steps = 0;
    sideLength = length;
}

/**
 * Moves to the next location of the square.
 */

public void act()
{

    if (steps < sideLength && canMove())
    {
        move();
        steps++;
    }
    else
    {
        turn();
        turn();
        steps = 0;
    }
}
} 
```

当我单击侧面的错误三角形时，它一直告诉我找不到“附加源”。我不知道该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T01:03:59.037

我从字面上将代码复制并粘贴到 Eclipse 中，它工作正常。检查您的方法是否具有与 Bug 类相同的返回值。并且为了记录，*GridWorld*的代码都不是最终的。它是要改变的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:13:29.797

可能该方法在 Bug 超类上被声明为 final。

final 方法的 Java 文档说明如下：

> 您可以将类的部分或全部方法声明为 final。在方法声明中使用 final 关键字来指示该方法不能被子类覆盖

[http://docs.oracle.com/javase/tutorial/java/IandI/final.html](http://docs.oracle.com/javase/tutorial/java/IandI/final.html)

# objective-c - NSAlert 中的附件视图无法以适当的大小呈现文本

> ID：14887777
> 
> 赞同：0
> 
> 时间：2013-02-15T03:18:44.113
> 
> 标签：objective-c, font-size, nsalert

我正在尝试显示`NSAlert`带有附件视图的链接，以便可以在信息性消息下方的文本块中显示链接。这是我的代码。

```
#import "AppDelegate.h"

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSAlert *activateAlert = [NSAlert alertWithMessageText: @"Some message text"
                                         defaultButton: @"OK"
                                       alternateButton: nil
                                           otherButton: nil
                             informativeTextWithFormat: @"Some informative text"];

    NSTextView *accessory = [[NSTextView alloc] initWithFrame: NSMakeRect(0,0,300,15)];
    NSFont *font = [NSFont systemFontOfSize:[NSFont smallSystemFontSize]];
    NSDictionary *textAttributes = @{NSFontAttributeName: font};
    [accessory insertText:[[NSAttributedString alloc] initWithString:@"Some text in an accessory view"
                                                      attributes: textAttributes]];
    accessory.editable = NO;
    accessory.drawsBackground = NO;
    [accessory setAutomaticLinkDetectionEnabled: YES];

    activateAlert.accessoryView = accessory;

    [activateAlert beginSheetModalForWindow: self.window
                              modalDelegate: nil
                             didEndSelector: nil
                                contextInfo: nil];
}

@end 
```

[Apple 文档](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AppleHIGuidelines/Windows/Windows.html#//apple_ref/doc/uid/20000961-TP10)说“信息性文本（使用小型系统字体）”，所以我正在使用`[NSFont smallSystemFontSize]`但它不能正确呈现（[请参阅](http://d.pr/i/hm65)）：

*   它没有对齐
*   它没有使用小字体（我尝试过使用其他值，例如 1.0），但似乎忽略了字体属性。

有什么提示吗？我应该创建自己的`NSAlert`组件吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:31:50.527

您是否尝试过为 textView 创建一个 IBOutlet 并将其用作 NSAlert 的附件视图？

# java - 如何修复此 ActionListener 以将字符串传回小部件

> ID：14887781
> 
> 赞同：0
> 
> 时间：2013-02-15T03:19:11.803
> 
> 标签：java, actionlistener, jtextfield, jtextarea

我真的是 Java 新手，只是练习 ActionListeners。作为我处理的应用程序的一部分，我将有一个 JTextField 让用户搜索名称，然后有一个 JTextArea 来显示搜索结果。我有一个用于搜索和优化名称的 api，唯一的问题是将小部件连接到方法和动作侦听器文件。

以下是部分代码：

小部件文件：

```
//Text Field
JTextField searchbox = new JTextField();
leftSide.add(searchbox, cnt);

String userText = searchbox.getText();
ActionListener sendsText = new SearchListener(search box);
searchbox.addActionListener(sendsText);

//TextArea              
JTextArea stationList = new JTextArea(12, 0);
leftSide.add(stationList, cnt);

String entered = userText;
stationList.append(entered); 
```

搜索监听器：

```
 public class SearchListener implements ActionListener {
      private JTextField searchbox;
      private JTextArea stationList;

    public SearchListener(JTextField search box) {
        this.searchbox = searchbox;
    }
    public void ListF(JTextArea stationList){
        this.stationList = stationList;

    public void actionPerformed(ActionEvent event) {
       XXXX<NAMES> stations = HHHH.SimilarNames(searchbox.getText());

        for (NAMES station : stations) {
            //System.out.println(station);

*Problem*>    String result = (searchbox.getText());
*Problem*>    stationList.append(result);

    } 
```

所以在这个程序中，TextFiels 已连接并且 ActionListener 工作，但它会在 CMD 中打印出类似名称的列表（我在这里评论过）。但我希望它将列表发送回 API 中的文本区域。（小部件文件）。所以我不确定我在 SearchListener 顶部的 ActionListener 方法是否正确。代码中的*问题*>也是我厌倦将搜索结果传递给文本字段的地方，这不起作用。

所以有人知道如何解决吗？

感谢是提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:37:48.490

我认为你可能会扭曲一些事情，但也许这就是你想要完成的事情：

一个搜索字段，其值决定了文本区域的填充内容。

如果是这种情况，那么必须改变一些事情。首先，只有 ActionListener 中的代码会在 UI 事件上被执行，因此没有理由`getText()`在初始化期间调用任何 UI 元素。

其次，在这个 UI 中添加一个按钮大大简化了这里的逻辑。如果将侦听器附加到搜索框，就会出现诸如“我什么时候知道用户完成输入文本？”之类的问题。和“如何处理部分文本？”，但是使用“搜索”按钮会将这个逻辑交到用户手中。

单击“搜索”按钮后，将触发来自附加到按钮的侦听器的操作事件，并且`stationListArea`将使用`similarNames(<text from search box>)`.

请注意，尽管下面显示的不是执行此任务的最简洁方式（这将涉及字段和匿名内部类），但它简单易懂。

小部件（不确定是什么`cnt`，所以我在下面的示例代码中省略了）

```
//Create the search text box
JTextField searchBox = new JTextField();
leftSide.add(searchBox);

// Create a button that will serve as the "Action" for the search box
JButton searchButton = new JButton("Search");
lefSide.add(searchButton);

// Create the station-list text area that will display text
//  based on results from the search box
JTextArea stationListArea = new JTextArea(12, 0);
leftSide.add(stationListArea);

// Create a listener that listens to the Button, then performs an
//   action from the search box to the text area
ActionListener searchButtonListener = new SearchListener(searchBox, stationListArea);
searchButton.addActionListener(searchButtonListener); 
```

搜索监听器

注意：`stationListArea`每次单击按钮时，此处的逻辑都会继续向您添加文本并`HHHH.SimilarNames()`返回一个值。要`stationListArea`每次都使用新文本更新，替换旧文本，请`stationListArea.setText("")`在`actionPerformed()`.

```
public class SearchListener implements ActionListener {
    private JTextField searchBox;
    private JTextArea stationListArea;

    public SearchListener(JTextField searchBox, JTextArea stationListArea) {
        this.searchBox = searchBox;
        this.stationListArea = stationListArea;
    }

    public void actionPerformed(ActionEvent event) {
        XXXX<NAMES> stations = HHHH.SimilarNames(searchBox.getText());

        for (NAMES station : stations) {
            stationListArea.append(station);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:06:39.167

**根据主要评论中的反馈进行了更新**

您的`NAMES`对象需要某种方式来提供`String`自身的表示。这样，您就可以将该值附加到您的文本区域。

```
public class SearchListener implements ActionListener {
    private JTextField searchbox;
    private JTextArea stationList;

    public SearchListener(JTextField search box) {
        this.searchbox = searchbox;
    }

    public void actionPerformed(ActionEvent event) {
        XXXX<NAMES> stations = HHHH.SimilarNames(searchbox.getText());

        for (NAMES station : stations) {
            stationList.append(station.getLocationName()());
        }

} 
```

# html - 声明向字体元素添加 2px padding-top

> ID：14887783
> 
> 赞同：3
> 
> 时间：2013-02-15T03:19:22.210
> 
> 标签：html, padding, doctype

下面是一些简单的 HTML 代码：

```
<!doctype html>
<html>
    <head>
        <style type="text/css">
            body{ padding:0px; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:12px; line-height:normal; }
            .pingBtCon{ display:block; margin:0px; border:1px solid; }
            .pingFavoriteMe{ font-size:10px; color:#666; cursor:pointer; display:inline-block; }
            .pingFavoriteMe:hover{ color:#333; }
        </style>
    </head>
    <body>
        <div class="pingBtCon"><a class="pingFavoriteMe">Favorite</a></div>
    </body>
</html> 
```

当我在 Chrome 中运行它时，它会`2px` `padding-top`在`div.pingBtCon`. 这样它的总高度就变成`17px`了，否则应该只有`15px`。而且看起来不太好。

但令人惊讶的是，当我删除时`<!doctype html>`，`.pingBtCon`没有就可以了`padding-top`。

发生了什么？

![使用 <!doctype html>](../Images/9419be22d9cd2edeeb8e33639be9d8b2.png)

![没有 <!doctype html>](../Images/8a68427c7e1669d4e7b0c14aec2d82c9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:32:18.410

添加 doctype 时，您将浏览器置于标准模式。标准模式和其他模式（怪癖和几乎标准）之间的一个重要区别是，在计算包含的行框的高度时，会考虑包含块级框的字体高度。

因此，如果没有标准模式的 doctype 类 pingBtCon 的 div，它包含一个行框，其高度与“收藏”文本的高度成正比，即 k * (10px)。

使用标准模式 doctyoe，具有 pingBtCon 类的 div 包含一个行框，其高度与“收藏夹”文本的高度和为 div 指定的字体高度的最大值成正比（在您的情况下从 body 元素继承其字体大小）。即 k * max(10px, 12px)。

因此，对于标准模式 doctype，行框略高，因此其包含的 div 也是如此。

要修复它，只需将 pingBtCon 类的 div 的字体大小设置为与 pingFavoriteMe 类的 a 元素的字体大小相同，即 10px。

所以添加`.pingBtCon { font-size:10px; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:22:05.253

您正在使用[已弃用](http://www.tutorialspoint.com/html5/html5_deprecated_tags.htm) `font`的标签。当您可以使用 CSS 时，没有理由这样做。

```
<a class="pingFavoriteMe pingBtCon">Favorite</a> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-15T03:37:10.317

[所有新网页都需要有一个 doctype](http://developers.whatwg.org/syntax.html#the-doctype)才能使您进入标准模式。不使用 doctype 会使您进入[怪癖模式](http://en.wikipedia.org/wiki/Quirks_mode)，就像 1999 年又一次一样，其中边距和填充等等都是由内而外的，简单地说。

保留文档类型，并确保它是您在添加任何其他内容之前放在每个页面上的第一件事，以免您继续遇到像现在这样的问题，让自己陷入一个受伤的世界。

# qt - 将 mp3 编解码器添加到 qt-project

> ID：14887785
> 
> 赞同：5
> 
> 时间：2013-02-15T03:19:55.703
> 
> 标签：qt, audio, codec, qt5

我对 Qt 开发和音频编解码器真的很陌生。我最近找到了一种使用 QSound 播放 mp3 声音的方法。我想使用 QAudioOutput 在我的 qt 项目中播放它，但是 QAudioDeviceInfo::supportedCodecs() 中没有 mp3 编解码器。

我尝试安装 mp3 编解码器，但它仍未在 QAudioDeviceInfo::supportedCodecs() 中列出。如何将编解码器添加到 QAudioDeviceInfo::supportedCodecs()？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:56:41.140

根据定义`QAudioDeviceInfo`，它提供了一个接口来查询音频设备及其功能。这意味着返回的任何编解码`QAudioDeviceInfo::supportedCodecs()`器都是设备能够直接播放的编解码器格式，并且可能是原始音频格式，例如`pcm`. 另一方面`mp3`需要先通过软件解码器，所以它不会在这个列表中。

查看[Media Player 示例](http://qt-project.org/doc/qt-5/qtmultimediawidgets-player-example.html)以获取参考。它应该可以播放mp3和其他格式。该项目应该在您机器的 Qt 源代码或安装目录中可用，位于**demo**或**examples**文件夹下。

从源头上看，它所做的不仅仅是仅仅播放音频。所以重点关注类的构造函数`Player`以及方法`Player::addToPlaylist()`

ps：我用条件时态说话是因为我对 Qt 4 比对 Qt 5 更熟悉。

编辑：

只要 windows media player 不能播放 mp3，你的 Qt 应用程序就不会完全支持 mp3，`Player`我给你的例子也不会工作。在您的系统中下载一些编解码器，直到 Windows 媒体播放器可以播放 mp3。

# database - 应该在只有 2 列的表上使用主键，两者都是唯一的

> ID：14887789
> 
> 赞同：1
> 
> 时间：2013-02-15T03:20:19.463
> 
> 标签：database, database-design, primary-key, composite-key, primary-key-design

如果我有如下表

客户地址（客户 ID，地址 ID）

我是否还需要一个额外的主键，例如 int auto increment？或者将两列都设置为主键就足够了？

假设：删除时，我只会按 customerId 删除，绝不会同时按 customerId 和 AddressId

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:23:22.597

看来这是一个`join table`. 在这种情况下，我会在依赖对象之间进行级联删除，例如，当删除客户时，`customerAddress`属于该客户的所有 es 也会被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:28:42.890

我建议你保留一个主键。虽然现在用不上，但以后可能会有用。可能是组合`customerid`，`addressid`可能有新的领域，如`current_address_flag`. 它只是关于创建一个几乎由数据库系统操作的字段。

# java - Spring Security 允许替代用户名

> ID：14887790
> 
> 赞同：0
> 
> 时间：2013-02-15T03:20:26.683
> 
> 标签：java, spring, security, login

我正在使用 Spring 安全 3.x。在我的登录页面中，有一个额外的字段，用户可以扫描身份证来填充。如果他们这样做，则不需要用户名（根据扫描的 ID 进行查找），但密码仍然是。

问题是我的自定义用户名是必需的`AuthenticationProvider`。ID 在此之前的过滤器中捕获 ( `UsernamePasswordAuthenticationFilter`)。我不知道如何连接它们，所以我`AuthProvider`知道它不需要用户名（而且，由于它传递了一个 Authentication 对象，所以此时它如何获取 ID？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:34:12.353

您可能需要一种特殊类型的身份验证接口，它不是 UsernamePasswordAuthenticationToken，因此不需要用户名和密码。然后您的 AuthenticationProcessingFilter/AuthenticationProvider 可能会创建其中之一。以 spring-cas-client 和[CasAuthenticationToken](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/cas/authentication/CasAuthenticationToken.html)为例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:23:53.547

我正在扩展的过滤器是 FORM_LOGIN_FILTER，这是正确的，但是我需要在此处执行所有检索（j_username，j_password）并手动调用身份验证管理器，而不是调用将检索和身份验证管理器调用传递给的 super() 方法春天。这也需要扩展 UsernamePasswordAuthenticationToken。一旦我这样做了，它们就会连接起来。

# python - for循环通过dict找到最大值

> ID：14887795
> 
> 赞同：0
> 
> 时间：2013-02-15T03:20:58.617
> 
> 标签：python, dictionary, for-loop, max

有许多可用示例展示了如何在 dict 中找到最大值。我很好奇为什么无法以这种方式找到最大键/值。

```
from random import randint

# Create dict with random keys and values.
d = {randint(1, 99): randint(1, 99) for i, j in enumerate(range(20))}

# Loop through dict to find max value
maxi = 0
for key in d:
    if d[key] > maxi:
        maxi = key

print(d, d[maxi]) 
```

目测d，可以看出d[maxi]不是最大值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T03:23:01.067

`if d[key] > maxi`正在将当前*值*与最大*键*进行比较。最简单的更改是编写`if d[key] > d[maxi]`. （您也可以将最大值保留为自己的变量）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T03:44:40.900

```
>>> d = {"a": 5, "b": 99, "c": 3}
>>> max(d, key=d.get)
'b' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T03:47:01.157

您的代码的问题是，当您第一次找到大于 0 的值时，您存储的是**键**而不是值。然后将下一个**值**与您存储的最后一个**键进行比较。**

最后，您存储了一个不是您想要的数字（我不知道最终的数字是否有逻辑`maxi`- 我猜这只是另一个随机数）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-20T15:23:15.977

另一种方法是使用字典**items()**函数获取**键、值**并比较值以找到最大值。

 **```
max_key = None
max_val = None

for key, val in your_dict.items():

    if max_val is None or val > max_val:
        max_val = val
        max_key = key

print(max_key, max_val) 
```**

# ios - 在 iOS 项目的 Core Data 中存储度量单位的好策略

> ID：14887796
> 
> 赞同：0
> 
> 时间：2013-02-15T03:21:16.087
> 
> 标签：ios, core-data, localization, units-of-measurement

我正在编写一个跟踪某个项目的长度和高度的应用程序。本质上，我想让应用程序同时支持公制和英制测量系统。我目前的策略是将一定的测量数据存储到 Core Data 中，并提出一个特定的对象，在将数据显示在屏幕上之前，在这两个系统之间进行计算和转换。

但是，由于iOS对本地化的支持很大，我想知道是否应该有比自己编写单位转换器更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:52:44.643

存储公制或英制之一（我个人会使用公制），然后为每个创建一个访问器。

```
- (NSString *)metricUnitsString
{
   // format your string.
   return formattedString;
}

- (NSString *)imperialUnitsString
{
   // convert value to imperial units.
   // format your string.
   return formattedString;
} 
```

如果要根据用户的语言环境显示字符串，可以查询`[NSLocale currentLocale]`并检查`NSLocaleMeasurementSystem`.

[NSLocaleMeasurementSystem](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html)：

> 与语言环境关联的测量系统的键。相应的值是一个 NSString 对象，其中包含对区域设置使用的测量系统的描述，例如“Metric”或“US”。

# asp.net - 在 asp.net mvc 中实现精细的上传器 javascripts

> ID：14887799
> 
> 赞同：-1
> 
> 时间：2013-02-15T03:21:34.890
> 
> 标签：asp.net, asp.net-mvc, file-upload, valums-file-uploader, fine-uploader

最后经过这么多的测试等等，我让它工作了。但是我很困惑我需要哪些文件以及为什么会出错。

我有

/脚本/fineupload/

*   handler.base.js
*   handler.form.js
*   处理程序.xhr.js
*   上传者.basic.js
*   实用程序.js

我的脚本包是

```
 BundleTable.Bundles.Add(new AmazonS3ScriptBundle("~/bundles/gzip/fineuploader")
                .Include("~/Scripts/fineuploader/handler.base.js")
                .Include("~/Scripts/fineuploader/handler.form.js")
                .Include("~/Scripts/fineuploader/handler.xhr.js")
                .Include("~/Scripts/fineuploader/uploader.basic.js")
                .Include("~/Scripts/fineuploader/util.js")                   
                ); 
```

当我尝试加载我的页面时出现错误

我的页面

```
 <div id="fine-uploader" class="btn btn-primary"><div>Select Files</div></div>
....
   @Scripts.Render("~/bundles/gzip/fineuploader")
... 
```

精细上传器 javascript 呈现为单个文件 ex。somemd5.js

我尝试在准备好的文档上初始化我的上传器

```
 uploader = new qq.FineUploaderBasic({
        multiple: false,
        autoUpload: false,
        button: $("#fubUploadButton")[0],
        request: {
            endpoint: "http://localhost:64247/upload/uploadfile"
        },
        callbacks: {
            onError: errorHandler
        }
    }); 
```

我遇到了很多错误，但从最后一个开始.. ![最后一个错误](../Images/bc0701b3bb7668bad331a74eb51ec7df.png)

如果我只包含uploader.basic.js，我会收到类似的错误 ![jsut bacis js](../Images/e445869cea6e74c07e08c994d37e1c43.png)

我需要哪些文件？在来自 github 的 zip 文件中，有 10 个 javascript 文件（有些是空的）。奇怪的是为什么在 zip 的测试页面上，一切正常，但是当我在我的项目中实现时，它不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:08:56.083

这正是为什么可以使用带有组合/缩小和版本标记的 js 以及带版本标记的 css 和资源文件的 zip 文件的原因。单击[主页](http://fineuploader.com)上或主分支自述文件顶部的下载链接。

# ruby-on-rails-3 - Ruby on Rails 3未定义方法“名称”用于nil：NilClass嵌套形式

> ID：14887800
> 
> 赞同：0
> 
> 时间：2013-02-15T03:21:50.367
> 
> 标签：ruby-on-rails-3, nested-forms, nested-attributes, image-upload

我已经为此工作了几天，到处搜索让我以某种方式接近我的目标。

我正在尝试在我的应用程序中上传多个图像。

电影.rb

```
class Movie < ActiveRecord::Base
  attr_accessible :title, :notes, :link, :screenshots_attributes
  has_many :comments, :as => :commentable
  has_many :screenshots
  accepts_nested_attributes_for :screenshots, allow_destroy: true
  belongs_to :cast
end 
```

截图.rb

```
class Screenshot < ActiveRecord::Base
  attr_accessible :image, :movie_id
  belongs_to :movie
  mount_uploader :image, ImageUploader
end 
```

电影控制器.rb

```
 def create
    @movie = Movie.new(params[:movie])
    @cast = Cast.find(params[:cast_id])
    if @release.save
      redirect_to cast_movie_path(params[:cast_id], @movie), notice: "#{t 'movie.created'}"
    else
      render action: "new"
    end
  end 
```

_form.html.rb（电影）

```
 <%= form_for [@cast, @movie], :id => 'fileupload' do |f| %>
    <%= f.text_field :movie %></div><%= t 'movie.title' %><br />

    <%= f.fields_for :screenshots do |s| %>
      <%= s.file_field :image, multiple: true %><%= t 'movie.screenshots' %><br />
    <% end %>

    <%= f.text_area :notes %></div><%= t 'movie.notes' %></div><br />

    <div class="actions">
    <%= f.submit "#{ t 'general.submit'}", :class => "btn"%>
    </div>
  <% end %> 
```

当我提交表单时，只有一个图像被上传，尽管当我“提高 params.to_yaml”（用于调试目的）时，我得到 NoMethodError

```
undefined method `name' for nil:NilClass 
```

和请求参数[http://pastebin.com/4iZ​​vtnED](http://pastebin.com/4iZvtnED)

# c# - 在 C# 中使用 OleCreateFromFile 调用 OLE 返回 0x800004016 禁用需要 DDE 窗口的 Ole1 服务

> ID：14887802
> 
> 赞同：1
> 
> 时间：2013-02-15T03:21:56.720
> 
> 标签：c#, c++, pinvoke, ole

我正在尝试在这篇文章中使用 c# 转换的代码： [Releating an OLE IStorage file handle in C#](https://stackoverflow.com/questions/2688054/releasing-an-ole-istorage-file-handle-in-c-sharp)

在这篇文章中，OP 似乎创建了一个自定义类 OLE32，它使用 pinvoke 来声明 IStorage 和 IOleObject 接口以及不同的方法。我也做过同样的事情。我的问题是，当我尝试调用 OLE32.OleCreateFromFile 时，我得到的返回值为 -2147467242 。

此返回值转换为十六进制的 0x80004016，根据我能找到的所有内容，这是以下错误：

禁用需要 DDE 窗口的 Ole1 服务

该方法应该输出一个 IOleObject，但 pOle 为空，并且此方法后面的方法失败。

有谁知道我为什么会收到此错误以及如何修复它？下面我包含了完整的代码以及我的 OLE32 类。

方法：

```
 public static string ExportOleFile(string _inputFileName, string oleOutputFileName, string emfOutputFileName)
    {
        StringBuilder resultString = new StringBuilder();

        string newInput = MultibyteToUnicodeNETOnly(_inputFileName, 1252); 

        OLE32.IStorage storage;
        var result = OLE32.StgCreateStorageEx(oleOutputFileName,
            Convert.ToInt32(OLE32.STGM.STGM_READWRITE | OLE32.STGM.STGM_SHARE_EXCLUSIVE | OLE32.STGM.STGM_CREATE | OLE32.STGM.STGM_TRANSACTED),
            Convert.ToInt32(OLE32.STGFMT.STGFMT_DOCFILE),
            0,
            IntPtr.Zero,
            IntPtr.Zero,
            ref OLE32.IID_IStorage,
            out storage
        );

        resultString.AppendLine("CreateStorageEx Result: " + result.ToString());

       var CLSID_NULL = Guid.Empty;

        OLE32.IOleObject pOle;
        result = OLE32.OleCreateFromFile(
            ref CLSID_NULL,
            _inputFileName,
            ref OLE32.IID_IOleObject,
            (uint)OLE32.OLERENDER.OLERENDER_NONE,
            IntPtr.Zero,
            null,
            storage,
            out pOle
        );

        resultString.AppendLine("OleCreateFromFile Result: " + result.ToString());
        try
        {

            result = OLE32.OleRun(pOle);
        }
        catch (Exception ex)
        {
            resultString.AppendLine(ex.ToString());
            return resultString.ToString();
        }

        resultString.AppendLine("OleRun Result: " + result.ToString());

        try
        {

            IntPtr unknownFromOle = Marshal.GetIUnknownForObject(pOle);
            IntPtr unknownForDataObj;
            Marshal.QueryInterface(unknownFromOle, ref OLE32.IID_IDataObject, out unknownForDataObj);
            var pdo = Marshal.GetObjectForIUnknown(unknownForDataObj) as System.Runtime.InteropServices.ComTypes.IDataObject;

            var fetc = new System.Runtime.InteropServices.ComTypes.FORMATETC();

            fetc.cfFormat = (short)OLE32.CLIPFORMAT.CF_ENHMETAFILE;
            fetc.dwAspect = System.Runtime.InteropServices.ComTypes.DVASPECT.DVASPECT_CONTENT;
            fetc.lindex = -1;
            fetc.ptd = IntPtr.Zero;
            fetc.tymed = System.Runtime.InteropServices.ComTypes.TYMED.TYMED_ENHMF;

            var stgm = new System.Runtime.InteropServices.ComTypes.STGMEDIUM();
            stgm.unionmember = IntPtr.Zero;
            stgm.tymed = System.Runtime.InteropServices.ComTypes.TYMED.TYMED_ENHMF;
            pdo.GetData(ref fetc, out stgm);

            var hemf = GDI32.CopyEnhMetaFile(stgm.unionmember, emfOutputFileName);
            storage.Commit((int)OLE32.STGC.DEFAULT);

            pOle.Close(0);
            GDI32.DeleteEnhMetaFile(stgm.unionmember);
            GDI32.DeleteEnhMetaFile(hemf);
        }
        catch (Exception ex)
        {
            resultString.AppendLine(ex.ToString());
            return resultString.ToString();
        }

        return resultString.ToString();

    } 
```

OLE32.cs：

```
 public static class OLE32
    {
        [StructLayout(LayoutKind.Sequential)]
        public struct STGOPTIONS
        {
            ushort usVersion;
            ushort reserved;
            ulong ulSectorSize;
            [MarshalAsAttribute(UnmanagedType.LPWStr)]
            public string pwcsTemplateFile;
        };

        public enum OLERENDER
        {
            OLERENDER_NONE = 0,
            OLERENDER_DRAW = 1,
            OLERENDER_FORMAT = 2,
            OLERENDER_ASIS = 3
        }

        internal enum CLIPFORMAT : int
        {
            CF_TEXT = 1,
            CF_BITMAP = 2,
            CF_METAFILEPICT = 3,
            CF_SYLK = 4,
            CF_DIF = 5,
            CF_TIFF = 6,
            CF_OEMTEXT = 7,
            CF_DIB = 8,
            CF_PALETTE = 9,
            CF_PENDATA = 10,
            CF_RIFF = 11,
            CF_WAVE = 12,
            CF_UNICODETEXT = 13,
            CF_ENHMETAFILE = 14,
            CF_HDROP = 15,
            CF_LOCALE = 16,
            CF_MAX = 17,
            CF_OWNERDISPLAY = 0x80,
            CF_DSPTEXT = 0x81,
            CF_DSPBITMAP = 0x82,
            CF_DSPMETAFILEPICT = 0x83,
            CF_DSPENHMETAFILE = 0x8E,
        }

        internal enum STGFMT : int
        {
            STGFMT_STORAGE = 0,
            STGFMT_FILE = 3,
            STGFMT_ANY = 4,
            STGFMT_DOCFILE = 5
        }

        [Flags]
        internal enum STGM : int
        {
            STGM_READ = 0x0,
            STGM_WRITE = 0x1,
            STGM_READWRITE = 0x2,
            STGM_SHARE_DENY_NONE = 0x40,
            STGM_SHARE_DENY_READ = 0x30,
            STGM_SHARE_DENY_WRITE = 0x20,
            STGM_SHARE_EXCLUSIVE = 0x10,
            STGM_PRIORITY = 0x40000,
            STGM_CREATE = 0x1000,
            STGM_CONVERT = 0x20000,
            STGM_FAILIFTHERE = 0x0,
            STGM_DIRECT = 0x0,
            STGM_TRANSACTED = 0x10000,
            STGM_NOSCRATCH = 0x100000,
            STGM_NOSNAPSHOT = 0x200000,
            STGM_SIMPLE = 0x8000000,
            STGM_DIRECT_SWMR = 0x400000,
            STGM_DELETEONRELEASE = 0x4000000
        }

        public enum STGC
        {
            DEFAULT = 0,
            OVERWRITE = 1,
            ONLYIFCURRENT = 2,
            DANGEROUSLYCOMMITMERELYTODISKCACHE = 4,
            CONSOLIDATE = 8
        }

        public static Guid IID_IDataObject = new Guid("{0000010e-0000-0000-C000-000000000046}");

        public static Guid IID_IOleObject = new Guid("{00000112-0000-0000-C000-000000000046}");

        public static Guid IID_IStorage = new Guid("0000000B-0000-0000-C000-000000000046");

        [DllImport("ole32.dll")]
        public static extern int StgCreateStorageEx([MarshalAs(UnmanagedType.LPWStr)] string
           pwcsName, int grfMode, int stgfmt, int grfAttrs, IntPtr pStgOptions, IntPtr reserved2, ref Guid riid,
           out IStorage ppObjectOpen);

        [DllImport("ole32.dll")]
        public static extern int OleCreateFromFile([In] ref Guid rclsid,
           [MarshalAs(UnmanagedType.LPWStr)] string lpszFileName, ref Guid riid,
           uint renderopt, IntPtr pFormatEtc, IOleClientSite pClientSite,
           IStorage pStg, out IOleObject ppvObj);

        [DllImport("ole32.dll")]
        public static extern int OleRun([MarshalAs(UnmanagedType.IUnknown)] object pUnknown);

        [ComImport]
        [Guid("00000118-0000-0000-C000-000000000046")]
        [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
        public interface IOleClientSite
        {
            void SaveObject();
            void GetMoniker(uint dwAssign, uint dwWhichMoniker, ref object ppmk);
            void GetContainer(ref object ppContainer);
            void ShowObject();
            void OnShowWindow(bool fShow);
            void RequestNewObjectLayout();
        }

        [ComImport]
        [Guid("0000000b-0000-0000-C000-000000000046")]
        [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
        public interface IStorage
        {
            void CreateStream(
                /* [string][in] */ string pwcsName,
                /* [in] */ uint grfMode,
                /* [in] */ uint reserved1,
                /* [in] */ uint reserved2,
                /* [out] */ out IStream ppstm);

            void OpenStream(
                /* [string][in] */ string pwcsName,
                /* [unique][in] */ IntPtr reserved1,
                /* [in] */ uint grfMode,
                /* [in] */ uint reserved2,
                /* [out] */ out IStream ppstm);

            void CreateStorage(
                /* [string][in] */ string pwcsName,
                /* [in] */ uint grfMode,
                /* [in] */ uint reserved1,
                /* [in] */ uint reserved2,
                /* [out] */ out IStorage ppstg);

            void OpenStorage(
                /* [string][unique][in] */ string pwcsName,
                /* [unique][in] */ IStorage pstgPriority,
                /* [in] */ uint grfMode,
                /* [unique][in] */ IntPtr snbExclude,
                /* [in] */ uint reserved,
                /* [out] */ out IStorage ppstg);

            void CopyTo(
                /* [in] */ uint ciidExclude,
                /* [size_is][unique][in] */ Guid rgiidExclude, // should this be an array?
                /* [unique][in] */ IntPtr snbExclude,
                /* [unique][in] */ IStorage pstgDest);

            void MoveElementTo(
                /* [string][in] */ string pwcsName,
                /* [unique][in] */ IStorage pstgDest,
                /* [string][in] */ string pwcsNewName,
                /* [in] */ uint grfFlags);

            void Commit(
                /* [in] */ uint grfCommitFlags);

            void Revert();

            void EnumElements(
                /* [in] */ uint reserved1,
                /* [size_is][unique][in] */ IntPtr reserved2,
                /* [in] */ uint reserved3,
                /* [out] */ out IEnumSTATSTG ppenum);

            void DestroyElement(
                /* [string][in] */ string pwcsName);

            void RenameElement(
                /* [string][in] */ string pwcsOldName,
                /* [string][in] */ string pwcsNewName);

            void SetElementTimes(
                /* [string][unique][in] */ string pwcsName,
                /* [unique][in] */ System.Runtime.InteropServices.FILETIME pctime,
                /* [unique][in] */ System.Runtime.InteropServices.FILETIME patime,
                /* [unique][in] */ System.Runtime.InteropServices.FILETIME pmtime);

            void SetClass(
                /* [in] */ Guid clsid);

            void SetStateBits(
                /* [in] */ uint grfStateBits,
                /* [in] */ uint grfMask);

            void Stat(
                /* [out] */ out System.Runtime.InteropServices.STATSTG pstatstg,
                /* [in] */ uint grfStatFlag);

        }

        [ComImport]
        [Guid("00000112-0000-0000-C000-000000000046")]
        [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
        public interface IOleObject
        {
            void SetClientSite(IOleClientSite pClientSite);
            void GetClientSite(ref IOleClientSite ppClientSite);
            void SetHostNames(object szContainerApp, object szContainerObj);
            void Close(uint dwSaveOption);
            void SetMoniker(uint dwWhichMoniker, object pmk);
            void GetMoniker(uint dwAssign, uint dwWhichMoniker, object ppmk);
            void InitFromData(IDataObject pDataObject, bool fCreation, uint dwReserved);
            void GetClipboardData(uint dwReserved, ref IDataObject ppDataObject);
            void DoVerb(uint iVerb, uint lpmsg, object pActiveSite, uint lindex, uint hwndParent, uint lprcPosRect);
            void EnumVerbs(ref object ppEnumOleVerb);
            void Update();
            void IsUpToDate();
            void GetUserClassID(uint pClsid);
            void GetUserType(uint dwFormOfType, uint pszUserType);
            void SetExtent(uint dwDrawAspect, uint psizel);
            void GetExtent(uint dwDrawAspect, uint psizel);
            void Advise(object pAdvSink, uint pdwConnection);
            void Unadvise(uint dwConnection);
            void EnumAdvise(ref object ppenumAdvise);
            void GetMiscStatus(uint dwAspect, uint pdwStatus);
            void SetColorScheme(object pLogpal);
        };

        [ComImport]
        [Guid("0000000d-0000-0000-C000-000000000046")]
        [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
        public interface IEnumSTATSTG
        {
            // The user needs to allocate an STATSTG array whose size is celt.
            [PreserveSig]
            uint
            Next(
            uint celt,
            [MarshalAs(UnmanagedType.LPArray), Out]
    System.Runtime.InteropServices.STATSTG[] rgelt,
            out uint pceltFetched
            );

            void Skip(uint celt);

            void Reset();

            [return: MarshalAs(UnmanagedType.Interface)]
            IEnumSTATSTG Clone();
        }

        [ComImport, Guid("0000000c-0000-0000-C000-000000000046"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
        public interface IStream
        {
            void Read([Out, MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)] byte[] pv, uint cb, out uint pcbRead);
            void Write([MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)] byte[] pv, uint cb, out uint pcbWritten);
            void Seek(long dlibMove, uint dwOrigin, out long plibNewPosition);
            void SetSize(long libNewSize);
            void CopyTo(IStream pstm, long cb, out long pcbRead, out long pcbWritten);
            void Commit(uint grfCommitFlags);
            void Revert();
            void LockRegion(long libOffset, long cb, uint dwLockType);
            void UnlockRegion(long libOffset, long cb, uint dwLockType);
            void Stat(out System.Runtime.InteropServices.STATSTG pstatstg, uint grfStatFlag);
            void Clone(out IStream ppstm);
        }

        [ComImport, InterfaceType(ComInterfaceType.InterfaceIsIUnknown), Guid("0000010E-0000-0000-C000-000000000046")]
        public interface IDataObject
        {
            void GetData([In] ref FORMATETC format, out STGMEDIUM medium);
            void GetDataHere([In] ref FORMATETC format, ref STGMEDIUM medium);
            [PreserveSig]
            int QueryGetData([In] ref FORMATETC format);
            [PreserveSig]
            int GetCanonicalFormatEtc([In] ref FORMATETC formatIn, out FORMATETC formatOut);
            void SetData([In] ref FORMATETC formatIn, [In] ref STGMEDIUM medium, [MarshalAs(UnmanagedType.Bool)] bool release);
            IEnumFORMATETC EnumFormatEtc(DATADIR direction);
            [PreserveSig]
            int DAdvise([In] ref FORMATETC pFormatetc, ADVF advf, IAdviseSink adviseSink, out int connection);
            void DUnadvise(int connection);
            [PreserveSig]
            int EnumDAdvise(out IEnumSTATDATA enumAdvise);
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:07:55.903

代码没有明显的问题，在添加缺少的声明后，我可以在 .NET 3.5 和 4.5 上运行 pdo.GetData() 调用。我没有正确类型的输入文件来继续。

对于 0x80004016 错误代码，只有一种体面的解释。如果您运行此代码的线程使用 COINIT_DISABLE_OLE1DDE 选项调用[了 OleInitializeEx() ，则会发生这种情况。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms695279%28v=vs.85%29.aspx).NET 不这样做。因此，我不得不猜测该线程是由本机代码启动并转换为该托管代码的。它适合那种代码，这通常是用 C++ 编写的。

您将需要查找该 OleInitializeEx 调用并进行更改。如果这很困难，那么您可以考虑启动自己的线程来运行此代码，这样它就不会受到调用本机线程的不良状态的影响。

# cuda - Nsight 分析器显示的“其他”问题停顿原因是什么？

> ID：14887807
> 
> 赞同：7
> 
> 时间：2013-02-15T03:22:33.173
> 
> 标签：cuda, profiling

我的内核在 CC 3.0 (Kepler) 上的性能比 CC 2.0 (Fermi) 差。在 Nsight 分析器中，`Warp Issue Efficiency`图表显示 60% 的时间没有符合条件的扭曲，`Issue Stall Reasons`图表显示其中 60% 是由于“其他”造成的。

我想知道其他问题停滞的原因是什么，以及我可以做些什么来减少它们。

CUDA 5.0。/Nsight 3.0。RC / CC 3.0。

![问题停顿原因](../Images/ca78dc13deeed4e9a18908377db24097.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T22:31:20.993

在 Nsight Visual Studio Edition 3.0 CUDA Profiler 中，问题效率显示了扭曲停止原因的饼图。停顿的原因是指令获取、执行依赖、数据请求、纹理、同步和其他。

对于 Compute Capability 3.* 设备，Other 类别是由于以下原因导致活动扭曲停止的时间百分比：

*   执行单元繁忙（减少使用低吞吐量整数操作）
*   寄存器库冲突（编译器问题有时会因大量使用矢量数据类型而变得更糟）
*   每个调度程序的扭曲太少

对于 Compute Capability 5.* 和 6.* 设备，Other 类别是由于以下原因导致活动扭曲停止的时间百分比：

*   寄存器库冲突（编译器问题有时会因大量使用矢量数据类型而变得更糟）
*   等待解决分支的经线
*   优先级较低且当前未考虑调度的 warp

对于 5.* 和 6.*，尤其是 gp100，如果内核达到每个 warp 调度程序 32 个 warp，最后一个原因可能非常高（~75%）。

这些停顿原因归入另一类，因为很难确定开发人员可以采取哪些措施来解决这些问题。

# javascript - 如何根据对象的“蓝图”将给定对象与类别匹配

> ID：14887815
> 
> 赞同：1
> 
> 时间：2013-02-15T03:23:38.757
> 
> 标签：javascript, node.js

我正在尝试对从客户那里收到的对象进行分类。

在服务器端，我已经定义了我的“蓝图”，如下所示：

```
{ // "type1"
    type: 1,
    name: String,
    password: String
}

{ // "type2"
    type: 2,
    user_id: Number,
    action: String
}

{ // "type3", and yes, this says type: 2....
    type: 2,
    object_id: Number,
    action: String
} 
```

根据客户发送的内容，我想将它们分类如下：

```
{ type: 1, name: 'user', password: 'pass' }                    // -> type1
{ type: 1, name: 'user', password: 'pass', remember_me: true } // -> type1
{ type: 2, name: 'user', password: 'pass' }                    // -> N/A
{ type: 2, user_id: 5, action: 'hello' }                       // -> type2
{ type: 2, object_id: 5, action: 'hello' }                     // -> type3 
```

识别需要基于键名、值的数据类型和值的实际值。每秒将发送数千个对象，并且可能有数千个蓝图。`< O(n)`因此，如果可以在其中 n 是蓝图的数量时完成，那就太好了。

我是从头开始编写的，因此可以将蓝图和元数据存储在所需的任何数据结构中。

谢谢您的帮助。我期待听到这方面的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:05:27.267

对可能降低复杂性的方法的随机思考：

这里真正的限制因素将是您可以如何减少类型集。最明显的方法之一是仅基于对象的键来做某事。数据中有额外键的问题是我们不能只依赖`Object.keys( data ).sort().join(",")`，我们还必须尝试我们拥有的每个键组合。

```
// Assuming the "types" list is called "types":
// using underscore.js api
var _ = require('underscore');
var keyMap = _.chain( types ).map(function( typeDef, typeIndex ) {
        // get an index with the definition, in case its 
        return { index: typeIndex, def: typeDef };
    }).groupBy(function( data ) {
        return _.keys( data.def ).sort().join(",");
    }).value();

// empty map needed
keyMap[""] = [];

// assumes sorted key list
function getPossibleMaps( keys ) {
  // if we have a map for this, use it
  if ( keyMap[ keys.join(",") ] ) {
    return keyMap[ keys.join(",") ];
  } else {
    // create a map of possible types by removing every key from the list of keys
    // and then looking for maps that match, cache our result
    return keyMap[ keys.join(",") ] = recursiveMapTest( keys );
  }
}  

function recursiveMapTest( keys ) {
    return _.chain( keys )
      .map(function( key ) {
        return getPossibleMaps( _.without( keys, key ) );
      }).flatten().value();
}

// we must also include "lesser" definitions for each of the key lists we found:
_.each( keyMap, function( results, index ) {
    var keys = index.split(",");
    keyMap[index] = results.concat( recursiveMapTest( keys ) );
});

function getType( data ) {
  function checkType( typeData ) {
    var def = typeData.def;
    return _.every(typeData.def, function( value, key ) {
      // these checks are probably not quite right
      if ( value === null ) {
        return true;
      } else if ( value === Number ) {
        return typeof data[key] === "number" || data instanceof Number;
      } else if ( value === String ) {
        return typeof data[key] === "string" || data instanceof String;
      } else {
        return data[ key ] === value;
      }
    });
  }
  var match = _.find( getPossibleMaps( _.keys( data ).sort() ), checkType );
  return match && match.index;
}

// Retrieve
var clientTypes = [
  { type: 1, name: 'user', password: 'pass' },
  { type: 2, name: 'user', password: 'pass' },
  { type: 2, user_id: 5, action: 'hello' },
  { type: 2, object_id: 5, action: 'hello' },
  { type: 1, name: 'user', password: 'pass', remember_me: true }
];

console.log('Client types:');
for (var i = 0; i < clientTypes.length; i++) {
    var type = clientTypes[i];
    // The type object from the map
    console.log("getType", type, getType(type));
} 
```

[jsbin](http://jsbin.com/uvarad/2/edit)

当然，这只是意味着可能的传入键列表越多，存储“快速”查找表所消耗的内存就越多。

* * *

此外，如果一切都有数字类型，您显然可以使用它来加速该子类型中可能的“对象类型”的一大块。

* * *

我认为你最好的选择是首先避免需要做任何这些。使用您的对象传递更好的类型提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:30:11.090

蓝图将以对象或数组的形式发送。如果您可以将它们作为对象发送，请使用类型 ID 作为键，使用值作为类型对象。在确定类型时，`O(1)`及时访问该类型的key。

即使您将类型作为数组接收，`O(n)`传递也允许您将它们存储在内部对象中，并将其用作哈希表以在运行时检索所需的类型信息。

如果您不能依赖类型本身作为键，请为每种类型生成一个唯一键并使用相同的函数进行检索。

```
var types = [{ // Will refer to this JSON object as type1
    type: 1,
    name: String,
    password: String
},
{ // type2
    type: 2,
    user_id: Number,
    action: String
},
{ // type3
    type: 2,
    object_id: Number,
    action: String
}];

console.log(types);

// Prepare map
var typeMap = {};
for (var i = 0; i < types.length; i++) {
    var type = types[i];
    typeMap[typeKey(type)] = type;
}
console.log(typeMap);

function typeKey(type) {
    var key = '';
    for (var i in type) {
        if (i == 'type') {
            key += type[i].toString() + ':';
        }
        key += ':' + i;
    }
    return key;
}

function getType(type) {
    return typeMap[typeKey(type)];
}

// Retrieve
var clientTypes = [
    { type: 1, name: 'user', password: 'pass' },
    { type: 2, name: 'user', password: 'pass' },
    { type: 2, user_id: 5, action: 'hello' },
    { type: 2, object_id: 5, action: 'hello' }
];
console.log('Client types:');
for (var i = 0; i < clientTypes.length; i++) {
    var type = clientTypes[i];
    // The type object from the map
    console.log(getType(type));
} 
```

如果未找到“客户端”类型的类型，`undefined`则从 getType 中返回。

[http://jsfiddle.net/Kt2sq/1](http://jsfiddle.net/Kt2sq/1)

输出：

```
Client types:
Object {type: 1, name: function, password: function}
undefined
Object {type: 2, user_id: function, action: function}
Object {type: 2, object_id: function, action: function} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T04:24:16.277

你可以这样做

```
var obj1={ type: 1, name: 'user', password: 'pass' };
var obj2={ type: 2, name: 'user', password: 'pass' };

//match JSON keys
var keys1 = Object.keys(obj1);
var keys2 = Object.keys(obj2);
if (JSON.stringify(keys1) === JSON.stringify(keys2))
console.log("matched all keys");

//match JSON value datatypes
for (var key in obj1) {
   if (typeof(obj1[key]) == typeof(obj2[key]))
   console.log(key +' data type matched');
}

//match 'type' field
if (obj1.type == obj2.type)
console.log("woooo total match"); 
```

这是时间复杂度：

1.  关键匹配是 O(n)
2.  字段数据类型匹配为 O(n)
3.  类型字段检查是 O(1)

因此，如果订购了 JSON，则总数为 O(n)，否则排序将需要额外的时间。

# javascript - 我如何清除画布？

> ID：14887819
> 
> 赞同：2
> 
> 时间：2013-02-15T03:24:06.623
> 
> 标签：javascript, html, canvas, html5-canvas

我有一个函数可以在触发 if 语句后在画布上绘制一些东西。我想知道从坐标中删除画布后如何清除画布（在 if 语句之外），我不知道该怎么做。

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title></title>
        <script type="text/javascript">
            function startCanvas() {
                var c = document.getElementById("myCanvas");
                var ctx = c.getContext("2d");

                var one = c.getContext("2d");
                var two = c.getContext("2d");
                var three = c.getContext("2d");
                var four = c.getContext("2d");
                var five = c.getContext("2d");
                var clearCanvas = false;

                var image = new Image();
                var imageone = new Image();

                image.onload = function () {
                    ctx.drawImage(image, 69, 50);

                    //draw a circle
                    one.beginPath();
                    one.arc(180, 90, 10, 0, Math.PI * 2, true);
                    one.closePath();
                    one.fill();

                    two.beginPath();
                    two.arc(155, 138, 10, 0, Math.PI * 2, true);
                    two.closePath();
                    two.fill();

                    three.beginPath();
                    three.arc(160, 180, 10, 0, Math.PI * 2, true);
                    three.closePath();
                    three.fill();

                    four.beginPath();
                    four.arc(257, 210, 10, 0, Math.PI * 2, true);
                    four.closePath();
                    four.fill();

                    five.beginPath();
                    five.arc(238, 235, 10, 0, Math.PI * 2, true);
                    five.closePath();
                    five.fill();
                };

                image.src = 'denmark.jpg';

                c.addEventListener(
                    'mousemove',
                    function (e) {
                        if ((e.x >= 170 && e.x <= 190) && (e.y >= 80 && e.y <= 100)) {
                            alert('this is a test');
                        }
                    },
                    false);

                c.addEventListener(
                    'mousemove',
                    function (e) {
                        if ((e.x >= 145 && e.x <= 190) && (e.y >= 128 && e.y <= 148)) {
                            ctx.font = "30px Arial";
                            ctx.fillText("Hello World", 400, 20);
                            ctx.drawImage(imageone, 400, 60);
                            imageone.src = 'alborg.jpg';
                        } else if ((e.x < 145 && e.x < 190) && (e.y > 128 && e.y < 148)) {
                            ctx.clearRect(0, 0, 400, 60);
                        }
                    },
                    false);

                c.addEventListener(
                    'mousemove',
                    function (e) {
                        if ((e.x >= 150 && e.x <= 190) && (e.y >= 170 && e.y <= 190)) {
                            alert('also work');
                        }
                    },
                    false);

                c.addEventListener(
                    'mousemove',
                    function (e) {
                        if ((e.x >= 247 && e.x <= 290) && (e.y >= 200 && e.y <= 220)) {
                            alert('ok');
                        }
                    },
                    false);

                c.addEventListener(
                    'mousemove',
                    function (e) {
                        if ((e.x >= 228 && e.x <= 290) && (e.y >= 225 && e.y <= 245)) {
                            alert('yes');
                        }
                    },
                    false);
            }
        </script>
    </head>
    <body onload="startCanvas()">
        <canvas id="myCanvas" width="600" height="600">Your browser does not support the HTML5 canvas tag.</canvas>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T04:14:37.053

利用

```
ctx.clearRect(x, y, canvas_width, canvas_height);
//In your code x=0,y=0, canvas_width=400 and canvas_height=60 
```

代替

```
ctx.clearRect(400,60,0,0); 
```

### 更新：-

试试这个更新...

```
 else if ((e.x < 145 && e.x < 190) && (e.y > 128 && e.y < 148)) { 
 ctx.clearRect(0,0,400,60);
 one.clearRect(0,0,400,60);
 two.clearRect(0,0,400,60);
 three.clearRect(0,0,400,60);
 four.clearRect(0,0,400,60);
 five.clearRect(0,0,400,60);
} 
```

### 更新

```
 c.addEventListener('mousemove',function (e) {
  if ((e.x >= 145 && e.x <= 190) && (e.y >= 128 && e.y <= 148)) {
   console.log("Hello"); 
      ctx.clearRect(0, 0, 400, 60);
      one.clearRect(0, 0, 400, 60);
      two.clearRect(0, 0, 400, 400);
      three.clearRect(0, 0, 400, 60);
      four.clearRect(0, 0, 400, 60);
  five.clearRect(0, 0, 400, 60);

  }  else if ((e.x < 145 && e.x < 190) && (e.y > 128 && e.y < 148)) {         
  console.log("hi");      
  }
  }, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:26:54.610

要清除“Hello World”和“alborg.jpg”的画布，请使用：ctx.clearRect(400,0,200,600)

示例代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>

<script type="text/javascript">
    function startCanvas() {
        var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");

        var one = c.getContext("2d");
        var two = c.getContext("2d");
        var three = c.getContext("2d");
        var four = c.getContext("2d");
        var five = c.getContext("2d");
        var clearCanvas = false;

        var image = new Image();
        var imageone = new Image();

        image.onload = function () {
            ctx.drawImage(image, 69, 50);

            //draw a circle
            one.beginPath();
            one.arc(180, 90, 10, 0, Math.PI * 2, true);
            one.closePath();
            one.fill();

            two.beginPath();
            two.arc(155, 138, 10, 0, Math.PI * 2, true);
            two.closePath();
            two.fill();

            three.beginPath();
            three.arc(160, 180, 10, 0, Math.PI * 2, true);
            three.closePath();
            three.fill();

            four.beginPath();
            four.arc(257, 210, 10, 0, Math.PI * 2, true);
            four.closePath();
            four.fill();

            five.beginPath();
            five.arc(238, 235, 10, 0, Math.PI * 2, true);
            five.closePath();
            five.fill();
        };

        image.src = 'coffee.png';

     c.addEventListener('mousemove',
     function (e) {
         if ((e.x >= 170 && e.x <= 190) && (e.y >= 80 && e.y <= 100)) {
             alert('this is a test');
         }
     }
     , false);

     c.addEventListener('mousemove',
     function (e) {
      if ((e.x >= 145 && e.x <= 190) && (e.y >= 128 && e.y <= 148)) {
          ctx.font = "30px Arial";
          ctx.fillText("Hello World", 400, 20);
          ctx.drawImage(imageone, 400, 60);
          imageone.src = 'house-icon.png';
      } else if ((e.x < 145 && e.x < 190) && (e.y > 128 && e.y < 148)) {
      //
      //
      // HERE IS THE CHANGE TO MAKE YOUR CODE WORK !!!
      //
      // Use this to clear only the "Hello World" and "alborg.jpg"
      //
      //
                ctx.clearRect(400,0,200,600);
      //
      //
      //
            }
        }
        , false);

      c.addEventListener('mousemove',
      function (e) {
           if ((e.x >= 150 && e.x <= 190) && (e.y >= 170 && e.y <= 190)) {
               alert('also work');
           }
       }
       , false);

       c.addEventListener('mousemove',
          function (e) {
              if ((e.x >= 247 && e.x <= 290) && (e.y >= 200 && e.y <= 220)) {
                  alert('ok');
              }
          }
          , false);

        c.addEventListener('mousemove',
        function (e) {
            if ((e.x >= 228 && e.x <= 290) && (e.y >= 225 && e.y <= 245)) {
                alert('yes');
            }
        }
        , false);

    }
</script>
</head>
<body onload="startCanvas()">
<canvas id="myCanvas" width="600" height="600";">
Your browser does not support the HTML5 canvas tag.</canvas>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T03:28:47.390

`clearRect`接受四个参数：x、y、宽度和高度。另外，是`ctx`还是`context`？使用正确的变量。

# java - Java 访问修饰符和 NullPointerException

> ID：14887820
> 
> 赞同：0
> 
> 时间：2013-02-15T03:24:07.317
> 
> 标签：java, nullpointerexception, access-modifiers

我的 Java 代码出现运行时错误，我试图了解其背后的原因。双星号之间的两个静态访问修饰符是有问题的项目。代码在有或没有这些修饰符的情况下编译（当然删除了星号）。但是在运行时，它只有在存在修饰符时才会运行而不会出错。为什么是这样？当静态修饰符不存在时在运行时生成的错误粘贴在代码下方。非常感谢你的帮助！

这是代码：

```
public class Blue {

    public int[][] multiArray(int x, int y){

        int[][] myArray = new int[x][y];
        return myArray;

    }

    static Blue blueObject = new Blue();

    public **static** int[][] one = blueObject.multiArray(3,3); 
    public **static** int[][] two = blueObject.multiArray(3,3);

    public static void main(String[] args){

        System.out.println("Hello world!");

    }

} 
```

**没有**静态访问修饰符的运行时生成的错误：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
Caused by: java.lang.NullPointerException
    at Blue.<init>(Blue.java:13)
    at Blue.<clinit>(Blue.java:11) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:36:06.137

这是因为您将 blueObject 声明为静态，将定义更改为：

```
Test blueObject = new Test(); 
```

它会运行！

要么在“单例模式”（一切都是静态的）下工作，要么在“对象模式”（你创建一个对象并通过对象调用类方法）下工作——你不能同时拥有这两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T01:46:24.050

@user1419674 **通常**JVM 会先初始化静态变量，然后再初始化实例变量。并且静态变量在第一次调用代码时只初始化一次。

```
public class Test {
    public Test(){
        System.out.println("constructor of class Test");
    }
}

public class App {
    private Test test = new Test();
    private static int s_i;
    static {
        s_i = 1;
        System.out.println("initializing static field");
    }

    public static void main(String args[]) {
        App app1 = new App();
        App app2 = new App();
    }
} 
```

上面的运行代码将打印出来：

```
initializing static field
constructor of class Test
constructor of class Test 
```

但是，在您的代码中，静态变量是 Blue 本身的类型。并且它变得像**静态 Blue blueObject**的初始化取决于**int[][]**的初始化，这实际上需要**静态 Blue blueObject**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T03:50:26.703

这个问题与JVM如何处理类加载以及你的类是如何定义的有关。当你有 一个**静态**int[][] 时，它可以工作，因为 JVM 读取/加载静态代码的顺序与它们在类中表示的顺序相同。因此，当 JVM 尝试初始化 int[][] 1 时，**静态**Blue BlueObject 就可以使用了。

但是，如果您将 int[][] 声明为**non-static**，则当 JVM 尝试创建**静态**Blue BlueObject 时，它必须创建一个完全初始化的 Blue 对象并将其分配给**静态**blueobject，因此它会尝试初始化 int[][ ]; 但此时，您的静态**blueObject** .multiArray(3,3); 还没有准备好。

我希望这对你的问题有意义。

# ruby-on-rails - 如何为访客用户正确配置 Devise+Cancan

> ID：14887822
> 
> 赞同：0
> 
> 时间：2013-02-15T03:24:24.613
> 
> 标签：ruby-on-rails, devise, cancan

在 Rails 3.2 应用程序中，我使用的是 Devise + CanCan。该应用程序以前仅限于登录用户访问。我正在添加能够阅读网站某些部分的访客用户/能力。

我无法理解设置它的“正确”方法，特别是控制器中需要`before_filter :authenticate!`什么组合。`load_and_authorize_resource`

在做这个的时候，我已经把能力等级降到了最低限度。

```
#Ability.rb
class Ability
  include CanCan::Ability

  def initialize(user_or_admin)
    user_or_admin ||= User.new

    can :manage, :all
  end
end 
```

在无模型/静态页面 Home 控制器中

```
#home_controller.rb
class HomeController < ApplicationController
  load_and_authorize_resource
  def index
    ...some stuff
  end
end 
```

和

```
#application_controller.rb
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :authenticate!
  ...more stuff
end 
```

通过此设置，未登录的用户将被重定向到 Devise 登录页面。

如果我从应用程序控制器中删除，我会收到`before_filter :authenticate!`一个错误`uninitialized constant Home``activesupport-3.2.11/lib/active_support/inflector/methods.rb`

如果我`load_and_authorize_resource`从家庭控制器中移除，这个错误就会消失。

这对我的简化测试能力类来说没问题，但是当我开始添加角色和能力时，我需要让 CanCan 处理 Home 控制器，即需要`load_and_authorize_resource`调用。

任何人都可以帮助我理解为什么在`before_filter :authenticate!`删除时会发生此错误，并指出任何解释为来宾用户设置 Devise+Cancan 的“正确”方法的信息。到目前为止我发现的信息只解释了如何设置能力类，而不是如何配置设计。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T03:26:59.537

问题是没有资源可以授权。因此，您只需调用`authorize_resource`not `load_and_authorize_resource`。有关更多信息，请参阅cancan 文档中的[授权控制器操作](https://github.com/ryanb/cancan/wiki/Authorizing-Controller-Actions)。

更新：您还必须将类指定为 false: `authorize_resource class: false`。

然后您的家庭控制器将如下所示：

```
class HomeController < ActionController::Base
  authorize_resource class: false

  def show
    # automatically calls authorize!(:show, :home)
  end
end 
```

此信息位于[非 RESTful 控制器部分](https://github.com/ryanb/cancan/wiki/Non-RESTful-Controllers)。对于那个很抱歉。

# python - 使用 BeautifulSoup4 和 Python 3.3 解析错误

> ID：14887829
> 
> 赞同：1
> 
> 时间：2013-02-15T03:25:44.583
> 
> 标签：python, parsing, encoding, python-3.x, beautifulsoup

运行此代码：

```
from bs4 import BeautifulSoup
soup = BeautifulSoup (open("my.html"))
print(soup.prettify()) 
```

产生此错误：

```
Traceback (most recent call last):
  File "soup.py", line 5, in <module>
    print(soup.prettify())
  File "C:\Python33\lib\encodings\cp437.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_map)[0]
UnicodeEncodeError: 'charmap' codec can't encode character '\u25ba' in position
9001: character maps to <undefined> 
```

然后我尝试了：

```
print(soup.encode('UTF-8').prettify()) 
```

但是由于使用 bytes 对象的字符串格式化，这失败了：

```
Traceback (most recent call last):
  File "soup.py", line 11, in <module>
    print(soup.encode('UTF-8').prettify())
AttributeError: 'bytes' object has no attribute 'prettify' 
```

不知道如何解决这个问题。任何投入将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T06:26:30.457

您的 (Windows) 控制台正在使用`cp437`编码，并且该编码不支持汤中有一个字符。默认是在这种情况下抛出异常，但您可以更改它。

```
import sys,io
from bs4 import BeautifulSoup
sys.stdout = io.TextIOWrapper(sys.stdout.buffer,'cp437','backslashreplace')
soup = BeautifulSoup (open("my.html"))
print(soup.prettify()) 
```

或者，将汤写入文件并使用支持编码的编辑器读取：

```
# On Windows, utf-8-sig will allow the file to be read by Notepad.
with open('out.txt','w',encoding='utf-8-sig') as f:
   f.write(soup.prettify()) 
```

# ruby - 在命令行上启动 Pry 错误

> ID：14887834
> 
> 赞同：0
> 
> 时间：2013-02-15T03:26:27.923
> 
> 标签：ruby, rvm, pry

这就是我`pry`在 Zsh 上启动命令时得到的结果。我尝试使用重新安装

```
rvm reinstall 1.9.3
rvm repair all 
```

乃至

```
rvm reinstall all --force 
```

不知如何摆脱这种情况。

```
/Users/tsax/.rvm/gems/ruby-1.9.3-p374/gems/pry-debugger-0.2.1/lib/pry- debugger/processor.rb:98: warning: don't put space before argument parentheses 
dyld: lazy symbol binding failed: Symbol not found: _rb_iseq_translate_threaded_code
  Referenced from: /Users/tsax/.rvm/gems/ruby-1.9.3-p374/gems/debugger-1.2.4/lib/ruby_debug.bundle
  Expected in: flat namespace

 dyld: Symbol not found: _rb_iseq_translate_threaded_code
  Referenced from: /Users/tsax/.rvm/gems/ruby-1.9.3-p374/gems/debugger- 1.2.4/lib/ruby_debug.bundle
  Expected in: flat namespace

[1]    67115 trace trap  pry 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:47:32.127

我对 vim-ruby-debugger 有同样的问题，看起来你的系统中没有正确的 libxml2，试试

```
 $ brew install libxml2 
```

放下你的 gemset 并再次创建它

# javascript - 带有处理程序的jqueryui可拖动移动图像

> ID：14887839
> 
> 赞同：0
> 
> 时间：2013-02-15T03:27:38.763
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable

如何使用处理程序获得可拖动的图像？我已经读过处理程序应该在可拖动的内部，但我真的不能在图像中包含另一个元素。

我在这里有一个小提琴可以更好地展示：

[http://jsfiddle.net/index/bfpWv/10/](http://jsfiddle.net/index/bfpWv/10/)

问题是我应该如何能够在里面拖动`#viewport`并仍然移动`#image`？

**编辑**

我觉得这个问题有点含糊：

因为现在（在小提琴上）当您单击第`#image`一个并拖动时，它会拖动`#image`. 但是当你点击第`#viewport`一个时，它没有。这就是我想要发生的事情，当您单击第`#viewport`一个并拖动时，它仍然会拖动`#image`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T04:41:37.383

似乎 jquery draggable 需要将处理程序放在可拖动的内部。只需几行代码，您就可以编写自己的可拖动对象。[在这里](http://jsfiddle.net/bfpWv/22/)查看我的演示

HTML：

```
<div id="container">
    <img id="image" src="http://thechive.files.wordpress.com/2011/03/hot-sexy-redheads-12.jpg" />
    <div id="viewport"></div>
</div> 
```

JS：

```
$(document).ready(function(){
    var isDragging, 
        top = 0, left = 0,
        curX, curY;

    $("#image").mousedown(function (e) {
        e.preventDefault();
    });

    $("#container").mousedown(function (e) {
        isDragging = true;

        curX = e.pageX;
        curY = e.pageY;

        left = Number($("#image").css("margin-left").
                      toString().replace("px", ""));
        top = Number($("#image").css("margin-top").
                     toString().replace("px", ""));
    });

    $(document).mouseup(function () {
        if (isDragging){
            // reset
            isDragging = false;
            top = 0;
            left = 0;
        }
    });

    $("#container").mousemove(function(e){
        if (!isDragging) {
            return;
        }

        left += e.pageX - curX;
        top += e.pageY - curY;

        // set the position
        $("#image").css("margin-left", left + "px").
            css("margin-top", top + "px");

        curX = e.pageX;
        curY = e.pageY;  
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:51:02.537

更新了你的[小提琴](http://jsfiddle.net/bfpWv/2/)。请从这里阅读文档：http: [//api.jqueryui.com/draggable/#option-containment](http://api.jqueryui.com/draggable/#option-containment)

您必须在您的`.draggable`方法中使用包含选项，并且您还需要将图像放入 中`#viewport`，以便最初将其放入`#viewport`. 你也可以把它放在外面`#viewport`，一旦你把它拖到里面，`#viewport`它就不会让你再把它拖到外面了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:42:23.383

考虑到您的描述 **，我应该如何能够在内部拖动`#viewport`并仍然移动`#image`** - 使用简单的 z-index css 样式做到这一点。希望这次能有所帮助。 [小提琴](http://jsfiddle.net/bfpWv/9/#run)

# android - 崩溃时自动重启 android mono 应用程序

> ID：14887846
> 
> 赞同：0
> 
> 时间：2013-02-15T03:29:31.057
> 
> 标签：android, mono, xamarin.android

如果触发未捕获的异常导致应用程序退出，我对自动重启基于 android 的应用程序的选项有疑问。我实现这个请求的想法如下，

1.  在 MainLauncher 的 OnCreate 函数中创建一个 PendingIntent。在这种情况下，这个 PendingIntent 是否会指向一个 BroadCastReceiver，然后它可以触发 MainLauncher Activity 以重新启动应用程序？

    protected override void OnCreate(Bundle bundle) { base.OnCreate(bundle); restartIntent = PendingIntent.GetActivity(this, 0, new Intent(this, typeof(aBroadcastReceiverMaybe)), 0); }

2.  为我的应用捕获任何未捕获的异常。我的理解是你可能会覆盖一个函数 Thread.setDefaultUncaughtExceptionHandler() ，但这是在 android 的 Java 实现中。我不太确定这在 xamarin 框架下是如何工作的

3.  在未捕获的异常覆盖中，创建一个 AlarmManager，它将在 4 秒后从第 1 步触发 PendingIntent。使用 exit() 函数强制退出应用程序，再次不确定在 xamarin 框架下的实现。

4.  在第 3 步延迟 4 秒后，将通知 BroadcastReceiver。收到通知后，启动 MainLauncher Activity 以重新启动应用程序。

如果有更合适的实现来完成这项任务，我很乐意接受。希望能尽快收到您的回音。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T06:08:04.627

你最好处理错误队友。作为用户，如果我的手机上有一个有问题的应用程序，并且每次它崩溃时它都会自动重新启动，那只会成为一种烦恼。

# sql - 如何在 pl/sql 开发工具中替换绑定变量

> ID：14887848
> 
> 赞同：1
> 
> 时间：2013-02-15T03:29:40.887
> 
> 标签：sql, oracle, plsqldeveloper

我想在 PL/SQL 开发人员中运行一个 SQL 脚本，如下例所示。

```
variable vTest varchar2;
(exec/set) :vTest := 'ABC'
select :vTest from dual;
select :vTest ||'XYZ' from dual ;
select * from table  where columnname = :vTest; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T06:56:08.627

您可以在测试窗口中执行此操作。

首先做一个

```
grant debug connect session to <schema> 
```

然后打开一个新的测试窗口。在屏幕底部声明您的绑定变量。你在那里给他们一个名字、一个类型和一个值。

# php - PHP：在 HTML 文档中的某处搜索特定元素

> ID：14887849
> 
> 赞同：0
> 
> 时间：2013-02-15T03:30:06.417
> 
> 标签：php, search, dom, xpath

我有一个相当大的 HTML 文档，我试图从中提取信息。我已经弄清楚我可能需要使用 DOMDocument 对象和 xPath。我需要返回特定 DIV 的内容。好消息是它有一个与之关联的类标签。坏消息是它隐藏在 HTML 文档中的某个非特定位置，在其他 DIV 的几层内，并且该位置可能会改变。所以，我希望返回 div 的内容。

```
<div class='target'>Return all of this stuff</div> 
```

诀窍似乎在于我不知道这个特定 div 将位于的特定位置。我需要一种方法来说“在整个 DOM 中搜索具有目标类名的 div”。可能有多个共同保险，但可能没有。但是，一旦我获得了可能是元素内容的数组，我就可以从那里获取它。再次，使用 PHP 5.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T03:42:30.000

您需要的 xpath 查询是：

```
$query = "//div[@class='target']"; 
```

您可以`DOMXPath`通过调用`query`方法将其与对象一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:43:56.300

*如果*我理解正确，这可以单独使用原生 php 字符串处理来完成。

你有没有尝试过类似的东西。

```
$start = stripos($STRINGYOUARESEARCHING, "<div class='target'>")
$end= stripos($STRINGYOUARESEARCHING, "</div>",start);
$contents= substr($STRINGYOUARESEARCHING, $start, $end-$start) 
```

如果这不是您要寻找*的*答案，请告诉我...在这里，我假设您有一大块 HTML，其中包含您的目标？

（注意：您可能需要将 $end 或 $start 偏移`strlen(<div class='target'>)`

# c++ - 野牛警告：键入非终结符的空规则

> ID：14887852
> 
> 赞同：0
> 
> 时间：2013-02-15T03:30:24.287
> 
> 标签：c++, c, grammar, bison

我从 Bison 那里得到一个我不太明白的警告。

```
warning: empty rule for typed non-terminal, and no action 
```

它适用于我的每个非终端字符。我不明白的部分是，如果我不给他们一个类型，那么我会收到编译错误，指出所有的 $ns 都是未定义的。这是我的野牛文件的语法部分。

```
%union {
  char *sval;
}

%token <sval> PLUS TIMES LPAREN RPAREN ID
%type  <sval> s e t f 
%%

s : e                   { cout << GetNonConstCharStar(std::string("(e ") + $1 + ")") << endl; }

e :                                     
    | e PLUS t          { $$ = GetNonConstCharStar(std::string("(e ") + $1 + ")" + " (PLUS " + $2 + ") " + "(t " + $3 + ")" ); }
    | t                 { $$ = GetNonConstCharStar(std::string("(t ") + $1 + ")"); }
    ;
t : 
    | t TIMES f         { $$ = GetNonConstCharStar(std::string("(t ") + $1 + ")" + " (TIMES " + $2 + ") " + "(f " + $3 + ")"); }  
    | f                 { $$ = GetNonConstCharStar(std::string("(f ") + $1 + ")"); }
    ;

f :  
    | LPAREN e RPAREN   { $$ = GetNonConstCharStar(std::string("(LPAREN \\")+ $1 + ") (e " + $2 + ") (RPAREN \\" + $3 + ")") ; }
    | ID                { $$ = GetNonConstCharStar(std::string("(ID ") + $1 + ")") ; }
    ;

%% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T03:34:13.357

```
e :                                     
    | e PLUS t
    | t 
```

是`e: | e PLUS t | t`，即*没有*或`e PLUS t`或`t`。删除第一个`|`.

# android - 如何恢复 FastScroller android 框架提交，并在 listfragment 中实现？

> ID：14887853
> 
> 赞同：0
> 
> 时间：2013-02-15T03:30:26.417
> 
> 标签：android, android-listfragment, fastscroll

我有一个带有 fastscroller 的 listfragment，它无法正常工作。

根据此处的答案之一：[快速滚动拇指在滚动 AlphabetIndexer](https://stackoverflow.com/questions/9780792/fast-scroll-thumb-disappears-while-scrolling-alphabetindexer)时消失，android 框架中有一个提交导致 FastScroller.java 出现问题（[https://github.com/android/platform_frameworks_base/commit/32c3a6929af9d63de3bf45a61be6e1a4bde136d3](https://github.com/android/platform_frameworks_base/commit/32c3a6929af9d63de3bf45a61be6e1a4bde136d3)）

我想将 FastScroller.java 代码复制到我自己的项目中，手动还原提交并将更改后的“Fast Scroller”实施到我自己的列表片段中。

目前，我通过实现以下内容来使用 fastscroller：

```
 ListView lv = getListView();
        lv.setFastScrollEnabled(true);
.
.
. 
```

我还有一个sectionIndexer。

当对 FastScroller 的唯一引用是时，如何实现自定义 FastScroller.java `lv.setFastScrollEnabled(true)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:04:06.273

这不像从android源复制类那么简单。它有很多依赖，复制非常困难甚至不可能实现。这里有一个示例实现：[https ://github.com/nolanlawson/CustomFastScrollViewDemo](https://github.com/nolanlawson/CustomFastScrollViewDemo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:15:47.197

您是否尝试过使用常规`Fragment`，但其中包含一个列表？

可能是`ListFragment`实现并没有完全按照您想要的方式执行，但是标准`Fragment`实现，您将 a`ListView`放入布局中可能会有所不同。

# css - CSS 溢出：隐藏的错误

> ID：14887857
> 
> 赞同：1
> 
> 时间：2013-02-15T03:31:07.417
> 
> 标签：css, overflow

我依靠 CSS 属性`overflow:hidden`来包含 3 个嵌套 & 浮动`div`s。`overflow:hidden`应用于此 html 的父级`div`。

当我不使用时，`overflow:hidden`我的 last`div`在一行 float 中不合适`div`，但是当我使用时`overflow:hidden`，整个`div`结构向下移动。

希望有人能理解我上面文字的意思，但如果不是，我也会提供 CSS 代码。

**CSS：**

```
#header {
  display: block;
  width: 590px;
  height: 50px;
  background: #336699;
  margin: 0 auto;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;

  overflow: hidden;
}

.header-left-wrapper {
  float: left;
  width: 150px; height: 50px;
  background: #ff0000;
}
.header-input-wrapper {
  float: left;
  width: 300px; height: 50px;
  background: #00ff00;
}
.header-right-wrapper {
  float: right;
  width: 140px; height: 50px;
  background: #ff0000;
  overflow: hidden;
} 
```

澄清一下，由于某种原因，当我申请`overflow:hidden`时`.header-right-wrapper`，整个标题向下移动，就好像我刚刚申请了`margin`or一样`position`。有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:09:33.637

.header-right-wrapper 正在下降，因为作为浮动元素，它需要清除页面上的其他内容（.close）。当你给#header {overflow: hidden} 它被迫包含它的孩子，至少到它达到它的{height}，包括那个浮动的div。因此它向下移动。问题不是您与#header 相关的标记，而是整个灯箱布局。这是一个修复：

```
.close {margin-bottom: -100px;} 
```

[http://jsfiddle.net/ZETus/4/](http://jsfiddle.net/ZETus/4/)

另一种方法是使用绝对定位将 .close 从流中取出，这样浮动就不必清除它：

[http://jsfiddle.net/ZETus/5/](http://jsfiddle.net/ZETus/5/)

```
.close {
    position: absolute;
    right: -10px;
    top: -10px;
} 
```

# android - 如何在英特尔 x86 模拟器上使用 GCM

> ID：14887859
> 
> 赞同：8
> 
> 时间：2013-02-15T03:31:42.817
> 
> 标签：android, android-emulator

我正在使用 x86 Intel Android 模拟器来开发 Android 应用程序。

但是当我使用谷歌 croud 消息 API 时，发生了错误。

`java.lang.UnsupportedOperationException: Device does not have package com.google.android.gsf`

如果切换使用 Google API 的模拟器，错误很明显。但速度很慢......

我搜索了同样的情况，并找到了谷歌地图 API。

[如何使用谷歌 api 为英特尔 x86 原子图像创建 avd？](https://stackoverflow.com/questions/13289540/how-to-create-avd-with-google-api-for-intel-x86-atom-image)

[http://38911bytes.blogspot.de/2012/03/how-to-use-google-maps-api-in-android.html](http://38911bytes.blogspot.de/2012/03/how-to-use-google-maps-api-in-android.html)

但这些文章只是谷歌地图问题，不适用于 GCM API。

有解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T10:46:41.493

我建议您使用[AndroVM](https://androvm.org/)。

[![安卓虚拟机](../Images/39b964c862e4c8bd9d78d77b9d402668.png)](https://i.stack.imgur.com/O4QwV.jpg)
[（来源：[androvm.org](http://androvm.org/wp-uploads/2012/09/logo-androvm-final1.jpg)）]

它实际上是 VirtualBox 的 x86 Android VM 映像（使用 Google API），您可以在其中有效地部署和测试您的应用程序。在我看来，它的速度与真正的 Android 设备差不多，并且让我在开发 Android 应用程序时更有效率。

要设置 AndroVM，您可以在此处查看官方[文档](https://web.archive.org/web/20140717005348/http://androvm.org:80/blog/androvm-documentation/)，我认为这很清楚。

你可以从[下载页面](https://web.archive.org/web/20140802084115/http://androvm.org/blog/download/)获取你的虚拟机镜像，别忘了下载**带有 gapps 和 houdini**的镜像。

我刚刚检查了我的安装，并在 /system/app 下找到了 GoogleServicesFramework.apk。所以它应该满足你的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T19:09:36.570

您现在可以使用 Genymotion，AndroVM 已被弃用。

您可以使用插件和 Android Studio 从 Eclipse 启动模拟器。

关于我遇到这个问题的问题...按照第一个答案（带有谷歌应用程序的图片）然后创建一个谷歌帐户并打开 Play 商店以便它可以更新，因为 GCM 需要 Google Play 服务。

就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:31:53.090

这发生在使用错误的模拟器的情况下

默认模拟器未配置为运行 gcm API，您将模拟器与 Google API 一起使用。

您需要创建新的模拟器，选择 Google API 级别 xx，然后在该模拟器上运行项目，希望它能正常工作。

# google-chrome - Is there any way to manipulate pop-up on Chrome? (WebDriver Selenium)

> ID：14887863
> 
> 赞同：0
> 
> 时间：2013-02-15T03:32:23.460
> 
> 标签：google-chrome, xpath, popup

I am running a test using WebDriver (Chrome). The first step I need to accomplish is to install Chrome Auto Refresh Plus. However, when I click on the link, a pop-up window shows up with "Add" and "Cancel" options, and there is no xpath for it, so I cannot click on "Add".

```
WebDriver driver = new ChromeDriver();
driver.get("https://chrome.google.com/webstore/search-extensions/auto%20refresh?hl=en");
WebDriverWait wait = new WebDriverWait(driver, 60);
wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//div [@class='webstore-A-B-H webstore-test-button-label']")));
WebElement element= driver.findElement(By.xpath("//div [@class='webstore-A-B-H webstore-test-button-label']"));
element.click();
 \\ now a pop-up window shows up. is there any way to click on "Add"? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:28:42.137

There is no way to deal with it. However you may try to use Alert. It does not help all the time. Check this:

[Click in OK button inside an Alert (Selenium IDE)](https://stackoverflow.com/questions/1348937/click-in-ok-button-inside-an-alert-selenium-ide)

# c++ - 双向链表中的访问冲突

> ID：14887867
> 
> 赞同：0
> 
> 时间：2013-02-15T03:32:37.430
> 
> 标签：c++, access-violation, doubly-linked-list

我之前发布过并且在弄清楚如何深度复制我的双向链表方面得到了很好的帮助。我现在遇到了访问冲突“0xC000000005”的问题，我认为这是由尝试延迟空指针引起的。这是一项家庭作业，而且我是 C++ 新手，所以我只想得到一些帮助，找出我哪里出错了，而不是有人只给我工作代码。

这是我的教授给我的界面。我不能以任何方式修改它。

```
#ifndef TEXTANALYZER_H
#define TEXTANALYZER_H

#include <iostream>
#include <string>

using namespace std;

class TextAnalyzer {
private:

/*
* Class: Node
*
* This class represents a node in a sorted doubly linked list that stores a
* list of words and their frequency of occurrency.
*/
class Node {
public:
string word;
int wordFrequency;
Node* previous;
Node* next;

Node(const string& word,
     const int wordFrequency,
     Node* const previous,
     Node* const next)
: word(word),
      wordFrequency(wordFrequency),
      previous(previous),
      next(next)
    {}
}; // end ListNode
/*********************************************************************/

Node* head;
Node* tail;

/*
* Releases all the memory allocated to the list.
*/
void releaseNodes();

/*
* Makes a deep copy of the object.
*/
void copyNodes(Node* const copyHead);

/*
* Returns a populated Node.
* Throws a bad_alloc exception if memory is not allocated.
*/
Node* createNode(const string& word,
             const int wordFrequency,
             Node* const previous,
             Node* const next);

public:
/* 
* Initializes head and tail, each to a dymmy node.
*/
TextAnalyzer();

/*
* Makes a deep copy of the object passed in.
* Calls copyNodes() to do the actual work.     
*/
TextAnalyzer(const TextAnalyzer& copyObject);

/* 
* Releases all the memory allocated to the object.
* Calls the releaseNodes() method to do the actual work.
*/
~TextAnalyzer();

/* 
* Makes a deep copy of the rhs object.
*/
TextAnalyzer operator =(const TextAnalyzer& assignObject);

/*
* Inserts the word in a sorted order into the list. 
*
* If no Node exists with that initial character, one is added in
* sorted order. If one does exist (same word), then the word frequency
* of that word is incremented by one.
*/
void insertWord(const string& word);

/*
* Returns a count of all the words in the list.
*/
int wordCount() const;

/* 
* Returns a count of all the words with the initial character.
*/
int wordCountWithInitialCharacter(const char startsWith);

/*
* Returns a description of the object. The string is formatted as:
* [A words:]
*     [<word>(<count>)]
*     [<word>(<count>)]
*     ...
*
* [B words:]
*     [<word>(<count>)]
*     [<word>(<count>)]
*     ...
*
*...
*/
string toString() const;

};

#endif 
```

这是我的类定义：

```
#include "textAnalyzer.h"
#include <string>
#include <iostream>
#include <sstream>

TextAnalyzer::Node* TextAnalyzer::createNode(const string& word, const int wordFrequency, 
Node* const previous, Node* const next)
{
return new Node(word, wordFrequency, previous, next);
}
void TextAnalyzer::releaseNodes()
{
Node* del = tail;

while(tail != NULL)
{
    tail = tail->previous;
    tail->next = del;
    delete del;
    del = tail;
}

delete [] head;
delete [] tail;

head = tail = del = NULL;
}

void TextAnalyzer::copyNodes(Node* const copyHead)
{
head = new Node(*copyHead);
Node* iter = head->next;

for(Node* np = copyHead->next; np != NULL; np = np->next)
{
iter->next = new Node(*np);
iter = iter->next;
}

iter = NULL;
}

TextAnalyzer::TextAnalyzer():head(createNode("0",0,NULL,NULL)),tail(head)
{}

TextAnalyzer::TextAnalyzer(const TextAnalyzer& copyObject)
{
copyNodes(copyObject.head);
}

TextAnalyzer::~TextAnalyzer()
{
releaseNodes();
}

TextAnalyzer TextAnalyzer::operator=(const TextAnalyzer& assignObject)
{
return TextAnalyzer(assignObject);
}

void TextAnalyzer::insertWord(const string& word)
{
Node* iter = head->next;

while(iter != NULL)
{
if(iter->word == word)
    iter->wordFrequency++;
else if(iter->word[0] == word[0] && iter->next != NULL)
{
    Node* temp = iter->next;
    iter->next = createNode(word, 1, iter, temp);
    iter = iter->next;
    temp->previous = iter;

    temp = NULL;
}
else if(iter->word[0] == word[0] && iter->next == NULL)
{
    iter = createNode(word, 1, tail, NULL);
    tail = iter;
}
else
    iter = iter->next;
}

iter = NULL;
}

int TextAnalyzer::wordCount() const
{
Node* iter = head->next;
int count = 0;

while(iter != NULL)
count++;

return count;
}

int TextAnalyzer::wordCountWithInitialCharacter(const char startsWith)
{
Node* iter = head->next;
int count = 0;

for(int i = 0; i < wordCount(); i++)
{
if(startsWith == iter->word[0])
    count++;

iter->previous = iter;
iter = iter->next;
}

iter = NULL;

return count;
}

string TextAnalyzer::toString() const
{
Node* iter = head->next;
string desc = "List of words: \n";
ostringstream convert;

for(int i = 0; i < wordCount(); i++)
{
convert << iter->word[0] << " words:\n"
        << iter->word    << "(" 
        << iter->wordFrequency
        << ")\n";
iter->previous = iter;
iter = iter->next;
}

iter = NULL;

return desc + convert.str();
} 
```

根据调试器，问题出现在我的 releaseNodes() 方法中。我已经添加了一条评论来指出它出现的特定行：

```
void TextAnalyzer::releaseNodes()
{
Node* del = tail;

while(tail != NULL)
{
    tail = tail->previous; //debugger flags this line when error occurs
    tail->next = del;
    delete del;
    del = tail;
}

delete [] head;
delete [] tail;

head = tail = del = NULL;
} 
```

我不确定是什么导致了访问冲突，但就像我说的我是 C++ 新手。任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:34:25.650

你不分配`head and tail`with `new []`，所以你不删除它们`delete []`

```
delete [] head;
delete [] tail; 
```

应该：

```
delete head;
delete tail; 
```

混合`new`是未定义`delete []`的**行为。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:40:23.300

除了比尔兹的回答之外，您的删除循环还有一些可疑之处。据我了解，您想将列表从前删除。是什么导致您进入现在的循环？似乎更自然的方法是：维护一个`curr`指针，从`tail`. 然后循环：递减`curr`，删除`curr->next`。`curr`时停止`head`。然后删除`head`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:52:06.177

在您的 copyNodes 中，您还需要设置前一个指针

# asp.net-mvc - 为我的 MVC 应用程序创建服务层？

> ID：14887871
> 
> 赞同：83
> 
> 时间：2013-02-15T03:33:10.247
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

据我了解，MVC 通过作为控制器的“胶水”将类定义（模型）与表示（视图）分开。控制器应该有一个单一的职责，因此是可测试的。ViewModel 用于将来自多个实体的数据汇集在一起​​，并为视图“按摩”来自控制器的数据。

似乎业务逻辑并没有真正占有一席之地......所以我认为另一个服务层是合适的。我只是不确定在哪里放置这一层，或者如何构建服务 - 它应该是一个名为“服务”的类，其中包含一堆功能吗？我对 MVC 有点陌生，所以任何阅读材料、示例或一般的新手提示都会很棒。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-02-15T14:16:25.983

在开发 ASP.NET MVC 应用程序时，我通常使用服务层。它类似于Martin Fowler 在*企业应用架构模式中讨论的*[服务层模式](http://martinfowler.com/eaaCatalog/serviceLayer.html)。它封装了您的业务逻辑并使控制器非常薄。基本上，控制器使用服务层来获取域模型，然后将其转换为视图模型。我还使用[工作单元设计模式](http://msdn.microsoft.com/en-us/magazine/dd882510.aspx)来处理事务，并使用[存储库设计模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)来封装数据访问层，以便于进行单元测试并能够轻松地更换 ORM。此图显示了我在 MVC 应用程序中使用的典型层。

 *![MVC 架构](../Images/222a6250a92410c76118dce4fbb9d779.png)

在此图中，服务层被标记为“应用程序或域层”，因为我发现人们在使用“服务层”一词时会感到困惑。他们倾向于认为这是一项网络服务。它实际上是一个程序集，您可以使用您喜欢的 Web 服务技术，例如 ASP.NET Web API 或 WCF，以及一个控制器。

至于命名约定，我通常使用描述域的东西，然后是服务。例如，如果我有一个处理用户成员资格的服务层，那么我将有一个名为 MembershipService 的类，它具有控制器和 Web 服务所需的所有方法来查询和操作成员资格域。请注意，同一应用程序中可能有多个域，因此您可以拥有多个服务层。我的意思是，您不必拥有一个处理整个应用程序的单一服务。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-15T09:55:11.687

我的建议是创建一个名为“服务”的单独类。将它们放在不同的类库（或命名空间）项目中，并使它们独立于 MVC 框架基础设施。我建议也使用某种依赖注入（最好是构造函数注入）。那么您的服务类可能如下所示：

```
 public class MyService : IMyService
 {
     IFirstDependency _firstService;
     ISecondDependency _secondService;

     public MyService(IFirstDependency firstService, ISecondDependency secondService)
     {
     }

     public Result DoStuf(InputDTO)
     {
         // some important logic         
     }
 } 
```

然后你从你的控制器中使用这些服务。[在这里](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvcdependencyinjection_topic2)查看完整的示例。

根据存储库-我的建议是，如果您要使用一些现代 ORM（NHibernate、EntityFramework），则不要使用它们，因为您的业务逻辑将封装在服务层中，而您的数据库将已经封装在 ORM 框架中。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-02-26T12:46:27.963

引用[“业务逻辑应该在服务中，而不是在模型中”？](https://softwareengineering.stackexchange.com/a/218394/173682)：

在 MVP/MVC/MVVM/MV* 架构中，根本不存在服务。或者如果他们这样做，该术语用于指代任何可以注入控制器或视图模型的通用对象。业务逻辑在您的模型中。如果你想创建“服务对象”来编排复杂的操作，这被视为一个实现细节。可悲的是，很多人都像这样实现 MVC，但它被认为是一种反模式（贫血域模型），因为模型本身什么都不做，它只是 UI 的一堆属性。

有些人错误地认为采用 100 行控制器的方法并将其全部放入服务中会以某种方式获得更好的架构。真的没有；它所做的只是添加另一个可能不必要的间接层。实际上，控制器仍在做这项工作，它只是通过一个命名不佳的“帮助器”对象来做。我强烈推荐 Jimmy Bogard 的[Wicked Domain Models](http://vimeo.com/43598193)演示文稿，这是一个清晰的示例，说明如何将贫血的域模型变成有用的模型。它涉及仔细检查您公开的模型以及哪些操作在业务环境中实际上是有效的。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-15T09:43:25.320

查看来自 MSDN 最佳实践的[文章。](http://msdn.microsoft.com/en-us/library/hh404093.aspx)

文章中的应用程序源代码可以在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=27290)找到。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-15T03:44:05.323

听起来您会追求存储库模式之类的东西。你可以在这里读到它：

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net- mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

这里的答案也可能有所帮助：

[ASP.NET MVC 的最佳存储库模式](https://stackoverflow.com/questions/10925257/best-repository-pattern-for-asp-net-mvc)*

# hadoop - 请澄清我对 Hadoop/HBase 的理解

> ID：14887876
> 
> 赞同：2
> 
> 时间：2013-02-15T03:33:50.567
> 
> 标签：hadoop, hbase

我已经看了半天的白皮书和 youtube 视频，并且相信我对这项技术有适当的了解，但在我开始我的项目之前，我想确保它是正确的。

因此，这就是我认为我知道的。

当我了解 hadoop 和 hbase 的架构时，它们几乎像这样建模

```
-----------------------------------------
|               Mapreduce               |
-----------------------------------------
| Hadoop  | <-- hbase export--|  HBase  |
|         |  --apache pig --> |         |
-----------------------------------------
|       HDFS                            |
 ---------------------------------------- 
```

简而言之，HBase 是一个完全不同的数据库引擎，针对恰好在 HDFS 上运行的实时更新和查询进行了调整，并且与 Mapreduce 兼容。

现在，假设以上是正确的，这就是我认为我知道的其他内容。

1.  Hadoop 从头到尾都是为大数据而设计的。该引擎使用分布式仅附加系统，这意味着一旦插入数据，您就无法删除数据。要访问数据，您可以使用 Mapreduce，或 HDFS shell 和 HDFS API。
2.  Hadoop 不喜欢小块，它从来没有打算成为一个实时系统。您不想在每个文件中存储一个人和地址，实际上您会在每个文件中存储一百万个人和地址并插入大文件。
3.  另一方面，HBase 是一个非常典型的 NoSql 数据库引擎，在精神上与 CouchDB、RavenDB 等相比。显着的区别是它使用 hadoop 的 HDFS 构建，使其能够可靠地扩展到仅受钱包限制的大小。
4.  Hadoop 是文件系统 (HDFS) 和 Java API 的集合，用于在 HDFS 上执行计算。HBase 是一个 NoSql 数据库引擎，它使用 HDFS 跨集群高效地存储数据
5.  要构建一个 Mapreduce 作业来访问来自 Hadoop 和 HBase 的数据，最好使用 HBase 导出将 HBase 数据推送到 Hadoop 并编写您的作业来处理数据，但是 Mapreduce 可以一次访问两个系统。
6.  设计 HBase 文件时必须非常小心，因为 HBase 本身不支持该文件中的索引字段，HBase 仅索引主键。许多提示和技巧有助于解决这个问题。

好的，所以如果我仍然准确到这一点，这将是一个有效的用例。

您使用 HBase 构建站点。您可以像使用任何其他 NoSql 或 RDBMS 一样使用 HBase 来构建您的功能。完成后，您将指标记录点放入代码中，以便在 log4j 中记录指标。您在 log4j 中创建一个新的附加程序，其规则是当日志文件达到 1 gig 大小时，将其推送到 hadoop 集群，删除它，创建一个新文件，继续生活。

之后，Mapreduce 开发人员可以编写一个例程，使用 HBase 导出从 HBase 获取数据集，例如用户 ID 列表，然后转到存储在 Hadoop 中的日志并通过系统查找每个用户的面包屑路径对于给定的时间跨度。

好的，说了这么多，现在针对具体问题。陈述 1 - 6 是否准确？

****** *** ** *** ***** *编辑一个，我根据收到的答案更新了我上面的信念。**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T05:19:20.610

1.  您可以通过[HDFS shell](http://hadoop.apache.org/docs/stable/file_system_shell.html)或[HDFS API](http://wiki.apache.org/hadoop/HDFS-APIs)直接访问 HDFS 中的文件。
2.  正确的。
3.  我不熟悉 CouchDB 或 RavenDB，但是在 HBase 中你不能有二级索引，所以你必须仔细设计你的行键来加快你的查询。互联网上有很多 HBase 架构设计技巧，你可以用谷歌搜索。
4.  我认为说Hadoop是数据库引擎的计算引擎更合适。如果要将 HDFS 数据导入 HBase，可以使用 Apache Pig，如[本文](https://stackoverflow.com/questions/8644261/import-data-from-hdfs-to-hbase-cdh3u2)所述。如果要将 HBase 数据导出到 HDFS，可以使用[导出实用程序](http://hbase.apache.org/book/ops_mgt.html#export)。
5.  MapReduce 是 Hadoop 框架的一个组件，它并不位于 HBase 之上。您可以在 MapReduce 作业中访问 HBase 数据，因为 HBase 使用 HDFS 进行存储。我认为您不想直接从 MapReduce 作业访问 HFile，因为原始文件以[特殊格式](http://blog.cloudera.com/blog/2012/06/hbase-io-hfile-input-output/)编码，不易解析，并且可能会在未来的版本中发生变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:19:45.917

```
Since HBase and Hadoop are different database engines, one can not access the data in the other directly. For HBase to get something out of Hadoop, it must go thru Mapreduce and vice versa. 
```

这是不正确的，因为 Hadoop 不是数据库引擎。Hadoop 是文件系统 (HDFS) 和 Java API 的集合，用于在 HDFS 上执行计算。

此外，Map Reduce 不是技术，它是一个模型，您可以在其中并行处理 HDFS 数据。**

# javascript - javascript中的RTP RTSP实现

> ID：14887877
> 
> 赞同：1
> 
> 时间：2013-02-15T03:33:57.397
> 
> 标签：javascript, rtsp

我有一个客户端程序和一个服务器程序。服务器在我的本地主机上，它有我的 .mpeg 视频。

使用节点 JS 我应该从服务器流式传输视频。客户端请求消息，例如播放/暂停/恢复/倒带等，所以我想我必须使用 RTSP 来确定通过 RTP 发送什么。但我不知道从哪里开始。

到目前为止，我所拥有的只是过滤消息的正则表达式，例如在客户端上有播放/暂停/设置等按钮，因此我可以获取该文本。我有一个开关。但是，如果我得到设置，我应该怎么做？

PS 我不允许使用 RTSP 模块或 RTP 模块。必须从头开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:54:39.983

通过网络传输 mpeg 文件时，您必须分别处理 RTSP 和 RTP。RTSP 用于信令、会话建立和启动底层 RTP 流。如果您需要在 node.js 中执行此操作，我建议加载一个已经实现 RTSP/RTP 的库（创建自己的库是一项艰巨的任务，但它是可行的以及）。

有关在 node.js 中加载 c++ 库的一些信息：[如何使用 node.js 中的 C++ 库？](https://stackoverflow.com/questions/9629677/how-can-i-use-a-c-library-from-node-js)

所以基本上，从你的 mpeg 文件中，你需要提取原始的 h264 流。为此，我推荐 ffmpeg 或其他一些了解 mpeg 文件结构的库/代码。然后您需要将 RTP 数据包内的编码帧打包；然后，您将从服务器发送回客户端。客户端然后将编码帧解包成实际帧；然后在屏幕上解码/显示它们。

我建议阅读[http://www.ietf.org/rfc/rfc3984.txt](http://www.ietf.org/rfc/rfc3984.txt)以了解有关打包 H264 视频的标准方式的信息。

这都是非常通用的方法，但它给了你一个大致的想法。希望这些信息有帮助，祝你好运。

# c# - 如何将项目更新发送到 DotNetNuke 模块中的数据库？

> ID：14887878
> 
> 赞同：2
> 
> 时间：2013-02-15T03:34:02.330
> 
> 标签：c#, sql, dotnetnuke

我是 DotNetNuke 的新手，我正在创建一个新模块，我试图找出在数据库中上传数据的最佳方式是什么。

我使用了这段代码：

```
public void UpdateStudentByID(int studentID, Student student)
{
    using (IDataContext ctx = DataContext.Instance())
    {
        var rep = ctx.GetRepository<Student>();
        rep.Update(student);
    }
} 
```

但问题是它没有更新数据库中的任何内容，当我检查 SQL 配置文件时，我发现它生成了这个查询：

```
exec sp_executesql N'UPDATE [Attendance_Students] SET [Surname] = @0, [GivenNames] = @1, [Birthdate] = @2, [Gender] = @3, [Address1] = @4, [Address2] = @5, [State] = @6, [PostCode] = @7, [Notes] = @8, [CreatedByUserId] = @9, [LastModifiedOnDate] = @10 WHERE [StudentId] = @11',N'@0 nvarchar(4000),@1 nvarchar(4000),@2 datetime,@3 nvarchar(4000),@4 nvarchar(4000),@5 nvarchar(4000),@6 nvarchar(4000),@7 nvarchar(4000),@8 nvarchar(4000),@9 int,@10 datetime,@11 int',@0=N'Good',@1=N'Good',@2='2013-02-20 00:00:00',@3=N'Male',@4=N'dsfdfsdfdf',@5=N'',@6=N'SA',@7=N'',@8=N'good',@9=1,@10='2013-02-15 02:58:39.047',@11=0 
```

从查询中可以明显看出，没有产生更新特定项目的 where 条件。

那么将对象更新到数据库中的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T04:00:51.433

您传入的 Student 对象没有将 StudentId 属性设置为值——这就是为什么您的 where 条件试图更新 where studentid = 0 的原因。在调用函数之前设置值，您应该可以开始了。

通过这样做，您无需调用 UpdateStudentByID 并传递 studentId 和 student，而只需调用 UpdateStudent 并传递 student。

```
...
//Before calling UpdateStudent, make sure your StudentId property is set
student.StudentId = 123;
....

public void UpdateStudent(Student student)
{
    using (IDataContext ctx = DataContext.Instance())
    {
        var rep = ctx.GetRepository<Student>();
        rep.Update(student);
    }
} 
```

希望这可以帮助。

# ruby-on-rails - 如何显示来自 ajax 表单提交的 Flash 消息？

> ID：14887880
> 
> 赞同：1
> 
> 时间：2013-02-15T03:34:10.477
> 
> 标签：ruby-on-rails, ajax

在 Rails 3.2 应用程序中，我有一个通过 Ajax 提交的表单，通过 Flash 消息向用户提供反馈。

有两种（或更多？）方法可以解决这个问题。

我可以`format js`在控制器中定义，然后重新加载部分 Flash 消息

```
#template.js.erb
`$(".flash-container").html("<%= escape_javascript(render partial: 'shared/flash_messages') %>");` 
```

[或者我可以从 jquery 函数（例如this](https://gist.github.com/linjunpop/3410235)）呈现 flash html 。

我的问题是，这两种方法有什么优点或缺点吗？

我了解 jquery 函数的工作原理，但我（尚未）完全了解使用 js 方法的 Rails 内部发生了什么。两者之间是否存在性能影响？

一种方法是否被认为比另一种更“Railsy”？

我很想知道其他人如何处理这个问题，这是首选的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:18:01.667

在您的控制器中创建

```
respond_to do |format|
    format.js { render 'your_js_file' }
end 
```

同样明智的是，您在 js.erb 中要渲染的内容是完成您所做工作的最佳方式。

1：这是最常见的方式，阅读您的代码的其他人会更好地理解发生了什么。我已经看到很多人这样做了几次，所以我理解它是如何工作的。“吻”

2：至于您展示的第二种方法，它“看起来”不错，但是由于您还缺乏理解它并且觉得需要调试它，这会告诉您它的阅读能力应该与代码的酷炫程度一样重要看起来。如果您必须调试它，请考虑这种方式，其他阅读您的代码的人也将如此。

有时最好的方法，就是你知道如何做的方法。

# ruby-on-rails - 将 Rails / ClearDB 应用程序推送到 Heroku 错误“无法连接到 '127.0.0.1' 上的 MySQL 服务器”

> ID：14887882
> 
> 赞同：6
> 
> 时间：2013-02-15T03:34:16.713
> 
> 标签：ruby-on-rails, ruby, heroku

每次我跑：

```
git push heroku master 
```

我收到以下错误：

```
Running: rake assets:precompile
rake aborted!
Can't connect to MySQL server on '127.0.0.1' 
```

我在跑步

```
rails -v Rails 3.2.11 
```

和

```
ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.2.0] 
```

我已经通过 Heroku CLI 安装了 ClearDB，它似乎工作正常，但我无法弄清楚这个错误。

这是我用于生产的 yml：

```
production:
  adapter: mysql2
  encoding: utf8
  host: localhost
  database: pm_production
  username: root
  password: root
  allow_concurrency: true
  pool: 5 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T03:45:32.557

您的应用程序正在尝试在资产编译期间进行初始化。[heroku 文档](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)明确建议您通过修改以下内容在预编译时禁用应用程序初始化`config/application.rb`：

```
config.assets.initialize_on_precompile = false 
```

# java - 从科学计数法转换双精度

> ID：14887884
> 
> 赞同：1
> 
> 时间：2013-02-15T03:34:23.850
> 
> 标签：java, type-conversion

这是我尝试过的。

```
long varOne = 902621492492L;
double varTwo = (double) varOne * 0.0001;
System.out.println(varTwo); 
```

输出：9.02621492492E7。为什么不是 90262149.2492，我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T03:43:17.173

输出：9.02621492492E7。和 90262149.2492 代表相同的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:37:39.390

应该可以

```
long varOne = 902621492492L;
double varTwo = varOne.doubleValue() * 0.0001;
System.out.println(varTwo); 
```

但据我所知`9.02621492492E7`，答案是。

# objective-c - 在多线程 ios 6 应用程序中处理对象相互依赖关系

> ID：14887886
> 
> 赞同：0
> 
> 时间：2013-02-15T03:34:25.773
> 
> 标签：objective-c, multithreading, ios6, dependencies, nsoperationqueue

我有一个 ios 6 应用程序，它在 App Delegate 中实例化 3 个单例，如下所示：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {
     Constants *constSingleton = [Constants getSingleton];
     EntryContainerSingleton * eSingle = [EntryContainerSingleton getSingleton];   
     LocationMgrSingleton *loc = [LocationMgrSingleton getSingleton];
     return YES; 
 } 
```

然而，问题发生在所有三个调用同时在不同的线程中执行。EntryContainerSingleton 依赖于常量来完成一些任务。但是在执行这些任务时，常量并没有完全实例化。

我该如何处理这种情况？我在谷歌上搜索，在以前的 iOS 版本中，人们使用 NSOperation 队列来执行此操作。

但是，我不确定这在 iOS 6 中是否是一个好方法。即使它是我之前没有使用过 NSOperation 队列，并且网络上的所有示例都来自以前的版本，并且在某个不是 APP 的类中实例化代表。

如果有人可以给我一些关于如何在 App Delegate 中执行此操作的示例代码让我开始我真的很感激

编辑

* * *

条目控制器单例

```
 -(id)init
 {
    self = [super init];
    NSLog(@"%s %d", __PRETTY_FUNCTION__, __LINE__);

    [self getEntriesFromServer];
      ..............
      .............   
    constSingleton = [Constants getSingleton];
    [self addSelfAsObserverToNotifications];
    return self;
  } 
```

* * *

内部条目控制器单例

```
 -(void)getEntriesFromServer
 {
     NSLog(@"%s %d", __PRETTY_FUNCTION__, __LINE__);
     if(!constSingleton)
     {
        NSLog(@"constSingleton is null");
     }
     __block NSString *dateString1 = [constSingleton getCurrentDateTime];
     NSLog(@"Sending notification: Async Call started successfully at time %@", dateString1);
     [[NSNotificationCenter defaultCenter] postNotificationName:@"didStartAsyncProcess"
                                                    object:self];

  ....... 
```

}

* * *

控制台输出

```
 [96894:c07] -[AppDelegate application:didFinishLaunchingWithOptions:] 21
 [96894:c07] +[Constants getSingleton] 39
 [96894:c07] -[Constants init] 65
 [96894:c07] -[EntryContainerSingleton init] 75
 [96894:c07] -[EntryContainerSingleton getEntriesFromServer] 154
 [96894:c07] constSingleton is null
 [96894:c07] Sending notification: Async Call started successfully at time (null)
 [96894:c07] -[Constants incrementNumBackgroundNetworkTasksBy1:] 87 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:53:07.057

如果 Entries 单例需要访问 Constants 单例，它应该调用 [Constants getSingleton] 来获取它。确保您正确实现了单例方法（请参阅[Objective-C 单例实现，我做得对吗？](https://stackoverflow.com/questions/8177406/objective-c-singleton-implementation-am-i-doing-it-right/8177426#8177426)）

每次需要访问单例对象时，都应该调用 [ClassName getSingleton]。没有任何理由将单例存储为应用程序委托中的实例变量。

# php - CodeIgniter 'MY_' 在...中找不到错误

> ID：14887888
> 
> 赞同：2
> 
> 时间：2013-02-15T03:35:34.933
> 
> 标签：php, codeigniter, session, session-state

我一直在为我的登录进行会话验证，以确保用户登录以查看页面。我不断收到此错误：

> 致命错误：在第 3 行的 /usr/local/var/www/CodeTest /ci/application/controllers/staff_c.php 中找不到类 'MY_Staffcontroller'

我的`staff_c`页面看起来像这样：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Staff_c extends MY_Staffcontroller {

    function homepage()
    {
        $data['main_content'] = 'homepage_view';
        $this->load->view('includes/template', $data);
    }
} 
```

我一直在到处阅读相同的问题，他们说的几乎一样...

> *您的控制器是否位于应用程序/核心中？*

嗯，是的。我似乎无法通过这个驼峰！

![控制器图像](../Images/d75cb75c2191e75e12bd77c2efd5bfb3.png)

这是里面的代码`My_Staffcontroller.php`：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_staffcontroller extends CI_Controller {

    function __construct()
    {
        parent::__construct();

        $loggedin = $this->session->userdata('loggedin');
        if(!isset($loggedin) || $loggedin != TRUE);
        {
            die($this->load->view('denied'));
        }
    }
} 
```

我知道这是用户错误，因为这只是我使用 CodeIgniter 的第二天，但我似乎找不到合适的解决方法？

我已经尝试过[这个](https://stackoverflow.com/questions/3678798/codeigniter-check-for-user-session-in-every-controller)教程，但仍然没有，还有[这个](https://stackoverflow.com/questions/6026170/codeigniter-sessions-checking-from-a-header-view-file)

即使关注[这个视频](http://blip.tv/nettuts/codeigniter-from-scratch-day-6-2973653)也让我停留在会话部分。

而我就是无法让它发挥作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T03:43:23.877

**请记住**，Linux 是*区分大小写的，*而 Windows 是不区分大小写的。

把你`MY_Staffcontroller`放在`application/core/MY_Controller.php`文件里面

您的`MY_Controller.php`文件应如下所示（减去所有其他功能，这是一个最小的示例）

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Controller extends CI_Controller
{
   public function __construct() 
   {
       parent::__construct(); 
   }
}
class MY_Staffcontroller extends MY_Controller 
{
    public function __construct() 
    {
       parent::__construct();
    }
    public function sayHello()
    { 
        echo "Hello, I am a function within MY_Staffcontroller.php";
    }
} 
```

**例子**

这将位于`/application/controllers`目录中 基本上任何位于OR中`protected`的函数都可以从扩展扩展控制器的派生控制器访问。在这种情况下，它将是`public``MY_Controller``MY_Staffcontroller``MY_Staffcontroller`

```
class Public_Staff_Controller extends MY_Staffcontroller 
{
    public function __construct()
    {
        parent::__construct();
    }
    public function index()
    {
        $this->sayHello();
    }
}

/* end of file /application/core/MY_Controller.php */ 
```

# java - java dispatcher.forward 抛出空异常

> ID：14887891
> 
> 赞同：-1
> 
> 时间：2013-02-15T03:36:29.007
> 
> 标签：java, eclipse, jsp, servlets, requestdispatcher

我收到以下错误

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: java.lang.NullPointerException
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:548)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:471)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    ahp.CompareCriterionSlider.doGet(CompareCriterionSlider.java:35)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

java.lang.NullPointerException
    org.apache.jsp.CompareCriterionSlider_jsp._jspService(CompareCriterionSlider_jsp.java:91)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    ahp.CompareCriterionSlider.doGet(CompareCriterionSlider.java:35)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

对于线路：`dispatcher.forward(request, response);`

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        HttpSession session = request.getSession(true);
        session.setAttribute("criterions", CriterionRecommander.values() );
        RequestDispatcher dispatcher = getServletContext().getRequestDispatcher("/CompareCriterionSlider.jsp");
        dispatcher.forward(request, response);
    } 
```

我`CompareCriterionSlider.jsp`在目录里`WebContent/`

我试图设置断点来调试它，但是 eclipse(Version: Indigo Service Release 2) 给了我：`Source not found.`

![在此处输入图像描述](../Images/9db6e1e7740b74f2c12ac461f9cc10d3.png)

谁投票给我一个理由？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T03:59:51.783

您的 JSP 抛出了一个空指针异常，您需要在 JSP 中找到导致该异常的确切代码行。
一种方法是简单地打开 jsp 的已编译 java 文件，即 CompareCriterionSlider_jsp.java:91，然后将其映射到 JSP 中的行。
一旦你这样做了，鉴于它是一个空指针，它应该很容易找出错误。

# authentication - 保留身份验证 cookie，但不允许在不同站点进行并发访问

> ID：14887897
> 
> 赞同：4
> 
> 时间：2013-02-15T03:37:45.680
> 
> 标签：authentication, web-applications, cookies

我有一个 Web 应用程序，我希望用户只能从一个位置使用它（这意味着用户不能在两个位置主动使用该应用程序）。目前，我以一种非常常见的方式进行这项工作，只允许 1 个 cookie 会话有效并在用户登录时删除任何现有的会话。不幸的是，我被告知我只允许 1 个 cookie 的方法是不可接受的，因为我的用户移动到不同的站点有很多，并且厌倦了每次都必须登录。一个简单的解决方案就是允许超过 1 个 cookie，但我不能这样做，因为我需要确保一个用户帐户不会同时在两个位置使用。

我想知道实现这样一个系统的最佳方法是什么，用户不能在超过 1 个位置处于活动状态，但不一定必须在他们访问的每个位置登录。

我的一个可能的想法是允许记录多个 cookie，但是一旦 cookie 变为活动状态（这意味着我注意到会话导航应用程序），所有其他 cookie 都会被锁定一段时间，例如 15 分钟。如果 15 分钟内没有任何 cookie 会话处于活动状态，则允许任何 cookie 登录并获得对其他 cookie 的支配，直到超过时间限制。

编辑：他们离开一个位置后保持登录状态是可以的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:48:57.480

浏览器允许用户存储他们的凭据。让他们使用此功能轻松重新登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:04:37.883

一种方法是记录他们的最后一个 IP 地址以及访问时间。在每次访问时，您都可以检查他们的最后一次访问。

如果最后一次访问来自同一个 ip，让他们通过。

如果最后一次访问来自不同的 ip，请检查那是多久以前的。然后，您可以定义他们需要空闲多长时间才能从其他位置访问它的截止点。15分钟似乎是合理的。

所有这些都可以在后端完成，这可能会提供更高级别的安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:44:26.360

无需超时。允许多个 cookie，但只有一个活动的。

指示您的用户在离开工作站时关闭应用程序。让这件事变得容易做到。在每个页面上放置一个关闭按钮，或者可能捕获`onBeforeUnload`并通知服务器该页面不再显示。当用户关闭应用程序时保持会话，但将其标记为当前不活动。

当您收到带有属于非活动会话的 cookie 的请求时，如果用户没有其他活动会话，请激活该会话而不会抱怨。

如果用户仍然有另一个会话处于活动状态，则说明问题正在发生。所以删除所有会话并将用户发送到登录屏幕。（那会教他们:)）

# scala - Scala Eclipse 插件中的有效注释注释？

> ID：14887899
> 
> 赞同：2
> 
> 时间：2013-02-15T03:38:05.487
> 
> 标签：scala, eclipse-plugin

我想知道是否有人可以解释 Scala 中的注释文档在何处以及如何适用 - 特别是 Eclipse 插件。例如，有没有一种方法可以注释一个过程，以后在使用 Eclipse 时可能会显示为帮助提示？我不完全确定在使用 Scala Eclipse 时如何获得这些类似 Javadoc 的效果。我已经检查了插件的各种常见问题解答，它可能不受支持，但我找不到任何解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:41:31.747

您需要使用[Scaladoc](http://docs.scala-lang.org/style/scaladoc.html)，但目前还不[完全](https://scala-ide-portfolio.assembla.com/spaces/scala-ide/search?utf8=%E2%9C%93&object_scope=60&q=scaladoc+)支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:10:32.543

ScalaDoc 悬停/完成尚未集成到 Scala IDE 中。

好消息是此功能目前正在开发中，我们计划在未来几个月内对其提供初步支持。[最近合并](https://github.com/scala/scala/pull/2075)了一个在 Scala Presentation Compiler 中添加 ScalaDoc 支持的拉取请求。

[Scala IDE 项目](https://github.com/scala-ide/scala-ide)的 Pull Request将随之而来。[您可以在此处](https://scala-ide-portfolio.assembla.com/spaces/scala-ide/tickets/1000210)跟踪此功能的进度

# android - 构建Android项目时无法识别新版本代码

> ID：14887901
> 
> 赞同：1
> 
> 时间：2013-02-15T03:38:15.213
> 
> 标签：android, build, version, google-play, apk

我最近完成了对我的应用程序的更新，因此我构建了它并尝试将其上传到市场。我将版本代码增加到下一个数字（7），但是当尝试上传它时，我被告知我仍然需要更改版本代码，因为它是 6。我为我的项目中的清单更改了它，我什至尝试过将其更改为 8 但我得到了同样的错误。我尝试在没有 proguard 的情况下构建，将 apk 保存到不同的位置，在构建之前删除以前的 apk，但我仍然收到相同的错误。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T03:44:24.407

使用 Eclipse？清理您的项目并再次构建。

智能？构建 > 重建项目。

可能缓存了一些东西，并且由于某种原因而忽略了重新编译该文件。

# javascript - 如何让 Node Js Hello World 应用程序工作？

> ID：14887904
> 
> 赞同：1
> 
> 时间：2013-02-15T03:38:30.617
> 
> 标签：javascript, node.js

## 编辑

好吧，它突然神奇地开始工作了。伙计们别管了。你可以忽略这个问题。

* * *

# 编辑 2

我明白为什么了。我没有意识到在输入 node hello_world_app.js 后我必须让它继续运行。我正在打字`CNTRL + C`以取回外壳。你会认为教程会提到这一点。哦，好吧，“你知道的越多（彩虹切割）”。

* * *

我正在尝试遵循节点教程。至此安装顺利。我已经完成了制作 hello world 脚本的部分，但我陷入了困境。

这是创建的 hello world 应用程序：

```
// Load the http module to create an http server.
var http = require('http');

// Configure our HTTP server to respond with Hello World to all requests.
var server = http.createServer(function (request, response) {
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.end("Hello World\n");
});

// Listen on port 8000, IP defaults to 127.0.0.1
server.listen(8000, '192.168.163.129');

// Put a friendly message on the terminal
console.log("Server running at http://192.168.163.129:8000/"); 
```

在本教程中，他们将 ip 指向 localhost，但我正在使用外部机器（托管在我的笔记本电脑上但在 vmware 内），所以我输入了用于访问它的内部 IP：

```
192.168.163.129 
```

那是我用来成功地通过 ssh 进入那台机器的 IP。但它不起作用。当我去：

```
http://192.168.163.129:8000 
```

我得到服务器未找到错误。

如何让它工作？

当我输入命令时，我还应该提到：

```
node hello_world_app.js 
```

我得到这个回应：

```
Server running at http://127.0.0.1:8000 
```

即使在脚本中我指定了不同的 IP。

# android - 如何将生成文件取消为 gcc 选项？

> ID：14887906
> 
> 赞同：0
> 
> 时间：2013-02-15T03:38:38.587
> 
> 标签：android, linux, gcc, makefile

由于[Android gcc sysroot 和链接器](https://stackoverflow.com/questions/14680791/android-gcc-sysroot-and-linker)给出的原因，我正在编译我的 Android NDK 项目`arm-linux-gnueabi-gcc`。

这需要使用 makefile 中指定的选项编译源代码，例如在

[如何在 native-activity 中使用共享库](https://stackoverflow.com/questions/9111107/how-to-use-a-shared-library-in-native-activity)。

有没有办法取消，或者换句话说，将 gcc makefile 反转为等效的命令行选项？

例如，您将如何反转`LOCAL_STATIC_LIBRARIES := android_native_app_glue`

# javascript - CSS/JavaScript 如何在单击/鼠标悬停事件上创建下推效果？

> ID：14887907
> 
> 赞同：1
> 
> 时间：2013-02-15T03:38:40.773
> 
> 标签：javascript, css, button, user-interface, css-animations

当您通过 gmail 或类似方式登录 stackoverflow.com 时，当您单击 gmail 按钮时，它似乎被按下了。

你是如何达到这个效果的？

我知道如何使用 CSS3 使用投影使某些东西看起来凸起。但是你如何让它看起来向下移动。

看起来他们正在移除阴影，同时将 div 移动到阴影的前一个位置。

但是我更喜欢更连续的效果。我只需要它在现代浏览器中工作。

此外，他们在悬停事件上移动，我需要在点击事件上使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T03:43:28.887

这是按钮的 CSS。不需要 JS。

```
.login-page .openid_large_btn {

    width: 100px;
    height: 60px;
    border: 2px solid #DDD;
    border-right: 2px solid #ccc;
    border-bottom: 2px solid #ccc;
    margin: 3px;
    float: left;
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    box-shadow: 2px 2px 4px #ddd;
    -moz-box-shadow: 2px 2px 4px #ddd;
    -webkit-box-shadow: 2px 2px 4px #ddd;
}

.login-page .openid_large_btn:hover {

    margin: 4px 0px 0px 6px;
    border: 2px solid #999;
    box-shadow: none;
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
}

element.style {

    background: #fff url(http://cdn.sstatic.net/Img/openid/openid-logos.png?v=8);
    background-position: -1px -1px;
} 
```

如上所述，

margin-top 和 left 增加，而其他边设置为 0，从 3px：

```
margin: 4px 0px 0px 6px; 
```

边框变暗：

```
border: 2px solid #999; 
```

阴影被移除：

```
box-shadow: none;
-moz-box-shadow: none;
-webkit-box-shadow: none; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T04:11:11.810

要添加过渡，请添加以下内容：

```
.login-page .openid_large_btn {

    -webkit-transition: all 0.05s ease-in-out;
       -moz-transition: all 0.05s ease-in-out;
         -o-transition: all 0.05s ease-in-out;
            transition: all 0.05s ease-in-out; 
```

# ios - 为什么 dispatch_async 不好？完成相同任务的更好方法是什么？

> ID：14887909
> 
> 赞同：2
> 
> 时间：2013-02-15T03:38:49.030
> 
> 标签：ios, objective-c

```
 dispatch_async(dispatch_get_main_queue(), ^{
         [self.teamName becomeFirstResponder];
     }); 
```

我和一个朋友聊天，他告诉我他听说使用 dispatch_async 不是很好，但他不知道为什么。

我在谷歌上查了一下，没有发现这段代码错误的任何原因

**如何改进此代码？有没有更好的方法来做到这一点？**

注意：我还在学习 iOS 编程，所以我对这一切都很陌生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T03:46:33.070

您的朋友错误地认为 dispatch_async 是“坏的”。

但是要求另一个处理器做像 becomeFirstResponder 这样简单的事情是没有意义的！设置调度需要一些时间，而成为第一响应者几乎不需要时间。~~更糟糕的是，如果作为第一响应者的副作用可能涉及需要在主线程上完成的事情，例如绘图。~~

使用 dispatch_async 将处理器或网络密集型任务转移到其他线程。专门阅读 Grand Central Dispatch 和一般的并发编程。它很强大，但就像所有强大的编程结构一样，如果您不了解自己在做什么，它可能会导致麻烦。

您的朋友*可能*一直在想的只是 iPhone 和 iPad 没有典型的 Macintosh 那么多的处理核心，而且有些只有一个核心。在这些方面，您不会获得一次使用多个处理器的好处。但是仍然有充分的理由来执行异步获取网页之类的操作，因此它们不会中断滚动或导航动画之类的操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T03:47:00.930

我不确定你的朋友指的是什么，但

```
dispatch_async(dispatch_get_main_queue(), ^{
     [self.teamName becomeFirstResponder];
 }); 
```

dispatch_async 非常健壮。作为新手，您将主要使用它在与 UI 不同的队列中运行一些密集的代码，以便 UI 保持响应，并且一旦您有了一个值（或图像或任何与您需要更新的 UI 相关的内容），您将最终像上面那样调用主队列。

坚持事实......不要担心你的朋友。

# kendo-ui - 如何让 Backbone 路由器 + Kendo UI Mobile (tabstrip) 一起工作？

> ID：14887910
> 
> 赞同：3
> 
> 时间：2013-02-15T03:39:08.480
> 
> 标签：kendo-ui

如何让 Backbone 路由器 + Kendo UI Mobile (tabstrip) 一起工作？

我刚刚开始使用 Backbone，并且一直在考虑将它与 UI 一起使用。通过禁用 JQM 的路由，我能够使用 Backbone 和 jQuery Mobile (JQM) 做到这一点，如本文所述：[http ://coenraets.org/blog/2012/03/using-backbone-js-with-jquery-mobile/](http://coenraets.org/blog/2012/03/using-backbone-js-with-jquery-mobile/)

```
// Disable JQM routing
$(document).bind("mobileinit", function () {
    $.mobile.ajaxEnabled = false;
    $.mobile.linkBindingEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false;
});

// Backbone Router
// Create backbone view, append it to the body, and then use JQM to change to that page
home: function () {
    page = new HomeView();
    page.render();
    $('body').append( $(page.el) );
    $.mobile.changePage( $(page.el), {changeHash:false} );  
} 
```

通过 Kendo UI Mobile 文档，我有这个工作页面：

```
<!DOCTYPE html>
<html>
<head>
    <title>My App</title>
    <link href="http://cdn.kendostatic.com/2012.3.1315/styles/kendo.mobile.all.min.css" rel="stylesheet" />
</head>
<body>

    <section data-role="layout" data-id="default">
        <header data-role="header">
            <div data-role="navbar">My App</div>
        </header>

        <!--View content will render here-->

        <footer data-role="footer">
            <div data-role="tabstrip">
                <a class="tab-a" data-icon="home" href="#home">Home</a>
                <a class="tab-a" data-icon="bookmarks" href="#about">About</a>
            </div>
        </footer>
    </section>

    <div data-role="view" data-layout="default" id="home">Home Page</div>
    <div data-role="view" data-layout="default" id="about">About Page</div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="http://cdn.kendostatic.com/2012.3.1315/js/kendo.all.min.js"></script>

    <script>
        var app = new kendo.mobile.Application();
    </script>

</body>
</html> 
```

它有一个带有 2 个按钮的标签条，可让您在 2 个视图之间切换。

我可以让它与 Backbone 路由器一起工作 - 其中路由“home”和“about”被称为作为 tabstrip 按钮被点击，但无法弄清楚如何拦截点击事件，使我能够生成一个视图，附加它到 DOM，然后确保更改相关的 tabstrip 按钮类以表示选定状态。

我尝试向 tabstrip 链接添加一个类 - $('.tabstrip-link').click( function () { alert( 'Clicked' ); } ) - 但无济于事（偶尔被解雇）。如何从 body 标签之间删除视图，并通过 Backbone 路由生成这些视图，将它们附加到页眉和页脚部分之间的布局，然后让 tabstrip 更改继续它的业务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T00:35:01.340

如果您希望使用 Backbone 路由器，您可能需要禁用 Kendo 路由器。移动设备中的剑道路由器并非旨在禁用。但是乍一看，如果在创建应用程序之前放置，以下内容对我有用。

```
kendo.mobile.Application.prototype._startHistory = function() {};
kendo.mobile.Application.prototype.router = {destroy: function() {}}; 
```

它之所以有效，是因为如果未创建路由器，Pane 有它自己的历史管理。

# multithreading - ISAPI DLL 无法启动线程

> ID：14887917
> 
> 赞同：1
> 
> 时间：2013-02-15T03:40:57.493
> 
> 标签：multithreading, delphi, iis

我有一个使用线程辅助对象的 ISAPI 扩展 DLL。在我的 QA 服务器上，线程成功执行，而在实时服务器上却没有。两种环境中的服务器硬件相同。开发语言为 Delphi XE2。

```
unit uRemoteTest2Intf;

interface
uses Soap.InvokeRegistry, System.Types, Soap.XSBuiltIns;

type
  { Invokable interfaces must derive from IInvokable }
  IRemoteTest = interface(IInvokable)
  ['{9F4E3DF8-5D22-46FE-B3DC-B6CD8EE971AD}']
    function LogData(const Value: string): string; stdcall;
  end;

implementation

initialization
  InvRegistry.RegisterInterface(TypeInfo(IRemoteTest));

end.

unit uRemoteTest2Impl;

interface
uses Soap.InvokeRegistry, System.Types, Soap.XSBuiltIns, uRemoteTest2Intf, uThread;

type
  { TRemoteTest }
  TRemoteTest = class(TInvokableClass, IRemoteTest)
  private
    worker: TWorkerThread;
  public
    function LogData(const Value: string): string; stdcall;
    constructor Create; override;
    destructor Destroy; override;
  end;

implementation

uses
  uLog, Winapi.Windows, Winapi.Messages;

procedure RemoteTestFactory(out obj: TObject);
{$J+}
const
  iInstance: IRemoteTest = nil;
  instance: TRemoteTest = nil;
begin
  if instance = nil then
  begin
    instance := TRemoteTest.Create;
    instance.GetInterface(IRemoteTest, iInstance)
  end;
  obj := instance
end;

constructor TRemoteTest.Create;
begin
  inherited;
  //SetApplicationLogLevel(2);
  //SetApplicationLogFilename('c:\temp\test.txt');

  Log('Calling TRemoteTest.Create');
  worker := TWorkerThread.Create;
  worker.Start;
  if worker.Suspended then
    Log('worker is  suspended')
  else
    Log('worker is not suspended');

  Log('Called TRemoteTest.Create');
end;

destructor TRemoteTest.Destroy;
begin
  Log('Calling TRemoteTest.Destroy');
  worker.Free;
  inherited;
end;

function TRemoteTest.LogData(const Value: string): string;
begin
  Log('Calling TRemoteTest.LogData');
end;

initialization

InvRegistry.RegisterInvokableClass(TRemoteTest, RemoteTestFactory);

end.

unit uThread;

interface
uses
  System.Classes;

type
  TWorkerThread = class(TThread)
  protected
    procedure Execute; override;
  public
    constructor Create;
    destructor Destroy; override;
  end;

implementation

uses
  uLog;

constructor TWorkerThread.Create;
begin
  inherited Create(true);
  Log('Calling TWorkerThread.Create');
end;

destructor TWorkerThread.Destroy;
begin
  Log('Calling TWorkerThread.Destroy');
  inherited;
end;

procedure TWorkerThread.Execute;
begin
  NameThreadForDebugging('WorkerThread');
  Log('Executing Thread');
  while not Terminated do
  begin
    sleep(1000);
    Log('Executing thread');
  end;
  Log('Executed Thread');
end;

end. 
```

{Log 过程是引用的 uLog.pas 文件中的内部日志记录例程}

在 IIS 服务器上，要运行的最后一段代码是 TWorkerThread.Start（在主线程内）。线程的 Execute 方法（应该在该线程的上下文中运行）永远不会被调用。

# ruby-on-rails-3 - Rails 中的 Texticle 没有提供我想要的响应。它的可配置性如何？还是我弄错了？

> ID：14887922
> 
> 赞同：1
> 
> 时间：2013-02-15T03:41:29.853
> 
> 标签：ruby-on-rails-3, full-text-search, texticle

我在 Rails 3 应用程序中使用 texticle gem。

我有一桌食物的名字，比如洋葱、大葱、洋葱粉等等。

我正在搜索表格

```
    foodnames = FoodName.search(params[:search])
        返回渲染：json => foodnames

```

当我尝试搜索“切碎的洋葱”时，我曾希望得到一个匹配的“洋葱”列表，因为它们有点接近，但我得到的是一个空集。

如果我只使用“洋葱”或“洋葱”，我会得到我期望的列表。

似乎有与 texticle 冲突的文档。github存储库页面，[https://github.com/texticle/texticle](https://github.com/texticle/texticle) 显示了类似的方法`fuzzy_search`，但是当我尝试运行时，我得到`undefined method`了#Class`的fuzzy_search'

其他文档[http://texticle.github.com/texticle/](http://texticle.github.com/texticle/)没有提及模糊搜索或类似功能。

我的 gem 文件有`gem 'texticle', '~> 2.0', require: 'texticle/rails'`，尽管我确实在没有版本或要求语句的情况下添加了它并重新捆绑安装。

谁能澄清这里发生了什么，以及如何获得更好的搜索结果？对于我的需求来说，这似乎太严格了，我怀疑事情并没有像他们应该的那样工作。

# codeigniter - 声音完成后刷新页面

> ID：14887934
> 
> 赞同：0
> 
> 时间：2013-02-15T03:43:40.060
> 
> 标签：codeigniter, audio, embed

我正在为我的网站使用 codeigniter。我希望在用户单击菜单时触发声音。但是我点击后页面刷新太快以至于听不到声音。声音完成后如何让页面刷新？

这是html：

```
<ul class="navigation">
    <li><a href="[link1]">Menu 1</a></li>
    <li><a href="[link2]">Menu 2</a></li>
    <li><a href="[link3]">Menu 3</a></li>
</ul>
<span id="dummy"></span> 
```

这是javascript：

```
$(document).ready(function(){
    $(".navigation").click(function(){
        $("#dummy").html("<embed src='<?=base_url()?>sound/testing.mp3' hidden='true' autostart='true' loop='false' />");
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:51:01.470

在您的函数内添加一个`return false`以避免在单击后刷新。

```
$(document).ready(function(){
        $(".navigation").click(function(){
            $("#dummy").html("<embed src='<?=base_url()?>sound/testing.mp3' hidden='true' autostart='true' loop='false' />");
return false;
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:25:15.253

我没有对音频做太多的工作，所以我不确定它的兼容性如何，但你的解决方案应该在某个地方

```
$(document).ready(function(){
    $(".navigation a").click(function(e){
        document.nextPage = $(this).attr('href')
        $("#dummy").html("<embed src='<?=base_url()?>sound/testing.mp3' hidden='true' autostart='true' loop='false' onended='followLink();' />");
        e.preventDefault();
    });
});

function followLink(){
   document.location.href = document.nextPage;
} 
```

您正在使用 onended 事件继续前进的地方。

## 更新

这是做同样事情的最佳方式[http://jsfiddle.net/joshK/d5eNu/](http://jsfiddle.net/joshK/d5eNu/)

```
$(document).ready(function(){
   $(".navigation a").click(function(e){
        var nextPage = $(this).attr('href');
        var audioObj = $("<audio>").attr({
            "hidden":true,
            "src":"<?=base_url()?>sound/testing.mp3"
        }).bind("ended",function(){//when sound finished playing follow the link

           document.location.href = nextPage;

        }).appendTo("#dummy");

        audioObj[0].play();
        e.preventDefault(); //prevent the page from refreshing 
    });
}); 
```

# c# - 在 Emgu CV 中使用 Kinect ColorImageFrame 时遇到问题

> ID：14887938
> 
> 赞同：1
> 
> 时间：2013-02-15T03:44:00.043
> 
> 标签：c#, kinect, emgucv, computer-vision

我正在为一个涉及 C#、Kinect 和 Emgu CV 的学校项目工作。我对 C# 和 Emgu CV 都很陌生，所以我可能会遗漏一些简单的东西。我想要做的是使用来自 Kinect 的图像作为 Emgu CV 图像进行处理，但我不断收到错误消息。出现的错误是“TypeInitializationException 未处理”和“'Emgu.Cv.CVInvoke' 的类型初始化程序引发了异常。”

我用来从 Kinect 获取图像的代码是：

```
using (ColorImageFrame colorFrame = e.OpenColorImageFrame()) 
{
    if (colorFrame != null)
    {           
        byte[] pixels = new byte[colorFrame.PixelDataLength];
        colorFrame.CopyPixelDataTo(pixels);

        int stride = colorFrame.Width * 4;
        BitmapSource color = BitmapImage.Create(colorFrame.Width, colorFrame.Height,96, 96, PixelFormats.Bgr32, null, pixels, stride);
        liveFeed.Source = color;

        EmguCVProcessing(color); 
    }
    else
    {
        return;
    }
} 
```

我还发现了一些用于将 BitmapSource 转换为 Bitmap 的代码：[Is there a good way to convert between BitmapSource and Bitmap?](https://stackoverflow.com/questions/2284353/is-there-a-good-way-to-convert-between-bitmapsource-and-bitmap)

不工作的代码如下：

```
void EmguCVProcessing(BitmapSource bitmap)
{
    Bitmap bmp = GetBitmap(bitmap);

    Image<Bgr, Byte> imgLiveFeed = new Image<Bgr, Byte>(bmp);
} 
```

据我所知，这应该将位图转换为 Emgu CV 图像，但由于某种原因它不是。

只是更多信息：

InnerException：确保文件图像是有效的托管程序集。

InnerException：确保您为程序集提供了正确的文件路径。

我最好的猜测是该程序使用不同版本的 .NET Framework，但我不确定如何解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:03:11.377

我遇到了同样的问题和一个半合适的解决方案。所以我也希望有人有一个好主意。

我目前做的是逐像素转换图像：

```
private KinectSensor sensor;
private byte[] colorPixels;
private Image<Gray, UInt16> grayImage;
// during init:
this.colorPixels = new byte[this.sensor.ColorStream.FramePixelDataLength];
grayImage = new Emgu.CV.Image<Gray, UInt16>(this.sensor.ColorStream.FrameWidth, this.sensor.ColorStream.FrameHeight, new Gray(0));

// the callback for the Kinect SDK
private void SensorColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
{
    using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
    {
        if (colorFrame != null)
        {
            // Copy the pixel data from the image to a temporary array
            colorFrame.CopyPixelDataTo(this.colorPixels);

            int width = 640;
            int height = 480;
            int bytesPerPx = 2;
            if (nthShot == 0)
            {
                for (int y = 0; y < height; y++)
                {
                    for (int x = 0; x < width; x++)
                    {
                        grayImage[height - y -1, x] = new Gray(((this.colorPixels[(y * width + x) * bytesPerPx + 1])));
                    }
                }
                // *** processing of the image comes here ***
            }
            nthShot++;
            if (nthShot == 4)
                nthShot = 0;
        }
    }
} 
```

但是，这种方法很慢，所以我只处理每第 n 个样本。

如果有人有更好/更快的解决方案，那就太棒了:)

谢谢，

弗洛

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-08T18:21:52.863

这`TypeInitializationException`可能与二进制文件无法找到 Emgu CV 的必要 DLL 有关。

这个问题解决了你的问题： [EmguCV TypeInitializationException](https://stackoverflow.com/questions/11369684/emgucv-typeinitializationexception)

此外，如果您想将`ColorFrame`Kinect v2 中的 a 转换为 Emgu CV 可处理图像 ( `Image<Bgra,byte>`)，您可以使用此功能：

```
/**
 * Converts the ColorFrame of the Kinect v2 to an image applicable for Emgu CV
 */
    public static Image<Bgra, byte> ToImage(this ColorFrame frame)
    {
        int width = frame.FrameDescription.Width;
        int height = frame.FrameDescription.Height;
        PixelFormat format = PixelFormats.Bgr32;

        byte[] pixels = new byte[width * height * ((format.BitsPerPixel + 7) / 8)];

        if (frame.RawColorImageFormat == ColorImageFormat.Bgra)
        {
            frame.CopyRawFrameDataToArray(pixels);
        }
        else
        {
            frame.CopyConvertedFrameDataToArray(pixels, ColorImageFormat.Bgra);
        }

        Image<Bgra, byte> img = new Image<Bgra, byte>(width, height);
        img.Bytes = pixels;

        return img;
    } 
```

# iphone - 如何减少 MapView 中的内存增加

> ID：14887940
> 
> 赞同：1
> 
> 时间：2013-02-15T03:44:06.573
> 
> 标签：iphone, mkmapview

![在此处输入图像描述](../Images/16bd5c8e552c60590ae3541035b3c390.png)

我开发了一个 iPad 应用程序，其中包含一个`MapView`. 当我使用 Instruments（分配工具）检查我的应用程序的内存状态时，我看到在尝试实例化 时`MapView`，内存增量很高。

请参阅我在此处附加的屏幕。

我很确定这是关于`MapView`. 项目在 iOS 6.1

这可能会发生什么？

# c# - Exchange Web 服务 - 读取子文件夹

> ID：14887942
> 
> 赞同：1
> 
> 时间：2013-02-15T03:44:09.790
> 
> 标签：c#, webdav, exchangewebservices

我使用 Microsoft 的 Exchange Web Services (EWS)。

我的代码是这样的：

```
ExchangeService server = new ExchangeService(ExchangeVersion.Exchange2007_SP1); 
```

等等

我使用以下代码获取文件夹：

```
Folder rootfolder = Folder.Bind(server, WellKnownFolderName.MsgFolderRoot); 
```

我在 Exchange Server 上的文件夹结构是：

```
Inbox
|
|
Folder1
|
|_Sub_Folder1
| |
| |_Sub_Sub_Folder1
|   |
|   |_Sub_Sub_Sub_Folder1
|
|_Sub_Folder2
| |
| |_Sub_Sub_Folder1
|
Folder2
|
|_Sub_Folder1
|
|_Sub_Folder2 
```

当我使用上面介绍的功能时，我只收到主要文件夹：

`Inbox`,`Folder1`和`Folder2`.

我也想收到`SubFolders`...，接下来我想从`SubFolders`.

例如：

```
Folder1
|
|_Sub_Folder1
| |
| |_Sub_Sub_Folder1
|   |
|   |_Sub_Sub_Sub_Folder1 -> I want to get these items 
```

你能帮我并提供一些代码的例子吗？我应该使用什么功能？

我尝试使用：

```
FindFoldersResults findFoldersResults2 = folder.FindFolders(new FolderView(100)); 
```

但是，当我收到例如文件夹：`Inbox`，，并且我阅读时`Folder1`，我没有收到ex 的数量。-> 我收到 count 。`Folder2``ChildFolderCount``subfolders``2``0`

怎么了？我需要从`subfolders`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:04:28.333

我想你有2个问题。第一个：“如何获取子文件夹”和第二个“为什么 ChildFolderCoun = 0”。

第二个的答案很简单。您必须调用 folder.Load() 并提供一个包含 FolderSchema.ChildFolderCount 属性定义的属性集。

第一个问题的答案是，您必须在递归循环中为每个文件夹调用 FindFolders()。至少我没有找到一个参数或类似的东西告诉 FindFolders-Method 包括所有子文件夹。

希望对你有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-31T19:54:26.340

您正在寻找方法来验证文件夹是否存在。您可以使用以下方法。它递归地搜索每个子文件夹。更改 FolderView 的 Traversal 属性以进行深/浅搜索。

```
FolderId subfolderInfo;
// Call Method
bool folderExist = isFolderExist(exchange, "Folder1", out subfolderInfo);

//Implementation 

private bool isFolderExist(ExchangeService exchange, string subFolder, out FolderId subfolderInfo)
        {
            try
            {
                FolderView view = new FolderView(100);
                view.PropertySet = new PropertySet(BasePropertySet.IdOnly);
                view.PropertySet.Add(FolderSchema.DisplayName);
                view.Traversal = FolderTraversal.Deep;
                FindFoldersResults findFolderResults = exchange.FindFolders(WellKnownFolderName.Root, view);
                foreach (Folder folder in findFolderResults)
                {
                    if (folder.DisplayName == subFolder)
                    {                        
                        subfolderInfo = folder.Id;
                        return true;
                    }
                }
            }
            catch (Exception Ex)
            {
               ...
            }          
            subfolderInfo = null;
            return false;
        } 
```

# android - Android：通过 AOSP 源代码创建新的系统权限。

> ID：14887948
> 
> 赞同：21
> 
> 时间：2013-02-15T03:44:51.900
> 
> 标签：android, permissions, operating-system, kernel, android-source

我想知道如何编辑 Android OS 源代码以施加新的权限。例如我们有蓝牙权限，如果设备提供了一个新的传感器，那么如何创建适当的权限以便应用程序使用新的传感器，在应用程序级别使用 android rom 中可用的新权限的清单条目。

有人知道如何在 AOSP 源代码的操作系统级别上创建新权限吗？

而且我认为如果我们修改了android源以添加新的权限，我们必须编译我们的自定义SDK以便在应用程序开发中使用权限，否则现有的SDK会给出编译时错误，因为它不会识别我们的自定义权限......

任何想法，想法高度赞赏。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-15T03:49:22.043

在 framework/base/data/etc/platform.xml

您可以使用相应的 gid 定义新创建的权限。

```
<permissions>

    <!-- ================================================================== -->
    <!-- ================================================================== -->
    <!-- ================================================================== -->

    <!-- The following tags are associating low-level group IDs with
         permission names.  By specifying such a mapping, you are saying
         that any application process granted the given permission will
         also be running with the given group ID attached to its process,
         so it can perform any filesystem (read, write, execute) operations
         allowed for that group. -->

    <permission name="android.permission.BLUETOOTH_ADMIN" >
        <group gid="net_bt_admin" />
    </permission>

    <permission name="android.permission.BLUETOOTH" >
        <group gid="net_bt" />
    </permission>

    <permission name="android.permission.BLUETOOTH_STACK" >
        <group gid="net_bt_stack" />
    </permission>

    <permission name="android.permission.NET_TUNNELING" >
        <group gid="vpn" />
    </permission>

    <permission name="android.permission.INTERNET" >
        <group gid="inet" />
    </permission>

    <permission name="android.permission.CAMERA" >
        <group gid="camera" />
    </permission>

    <permission name="android.permission.READ_LOGS" >
        <group gid="log" />
    </permission>

    ...
</permission> 
```

其他权限定义没有在上面的文件中，因为Android中实际上有两种权限，如下图所示。该文件中仅定义了 Linux 内核强制执行的权限。

![Android 中的权限执行](../Images/4a34e6f863620f854ddeaad7b7fc5376.png)

ACCESS_FINE_LOCATION、READ_CONTACTS 等其他权限在系统应用程序（packages/.../AndroidManifest.xml）和框架（frameworks/base/core/res/AndroidManifest.xml）的 AndroidManifest.xml 中定义。

添加您的权限和相关代码后，根据[构建说明编译和构建项目](http://source.android.com/source/building.html)

# git - Git可以忽略具有相同内容但更新时间戳的文件吗

> ID：14887950
> 
> 赞同：15
> 
> 时间：2013-02-15T03:45:40.263
> 
> 标签：git

我在最近的 Web 项目中使用 FTP。我尝试使用 git 对 FTP 上的所有更改进行本地备份。似乎 FTP 服务器不支持 MFMT 命令（或者我弄错了其他一些东西），下载的文件不保留它们的时间戳。

当我对新下载的文件执行 git diff 时，Git 会将每个文件标记为已更改。

无论如何我可以告诉Git根据差异结果而不是时间戳提交吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T03:53:13.443

Git 只查看文件的内容来确定它是否被更改。如果内容相同，则不关心时间戳。确保内容*确实*没有任何变化，包括行尾。`autocrlf`如果是这样，请尝试根据您的操作系统设置正确的配置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-10T14:49:00.247

另一种可能性是文件权限被更改为 FTP 进程的副作用。内容相同但权限不同的文件被视为被 Git 修改。

如果您在不同的操作系统之间移动文件，这种情况尤其可能发生。我遇到过使用 USB 记忆棒在 OS X 和 Windows 之间移动文件的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T14:19:41.990

我有同样的问题（Windows 8.1 Enterprise，git 版本 1.8.4.msysgit.0）。我不能拉，因为有 7 个文件被修改，尽管二进制（包括 lineendings）相同。还原没有帮助。将报告为已修改的第一个文件的时间戳更改为修订时间（在 TotalCommander 中，精度为 1 秒）使拉取工作。存储库是由旧磁盘上的文件复制创建的。我还做了几个原始存储库的克隆，还有其他“不同”的文件。

希望这将帮助其他人解决这个问题。这可能是Turtoise的问题。

顺便说一句：请先测试 lineending，因为这是一个更常见的问题。

# java - URL编码任意字符

> ID：14887951
> 
> 赞同：1
> 
> 时间：2013-02-15T03:45:41.827
> 
> 标签：java, url, urlencode

我需要将 application/x-www-form-urlencoded 数据提交到 Web 服务器。服务器期望使用 ISO-8859-1 对数据进行编码。

不幸的是*URLEncoder.encode(string, "ISO-8859-1");* 并不总是有效。

任何不属于 ISO-8859-1 的字符都被编码为 %3F（即 '?'）。

Firefox 以在服务器端工作的其他方式处理这些字符。

\uFEFF（零宽度不间断空格）被编码为**%26%2365279%3B**这正是我所需要的。

谁能告诉我如何模仿这种行为/FF做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:36:14.840

回答我自己的问题：

FF 将不可映射的字符转换为十进制 HTML 实体，并使用字符集对这些实体进行编码。

\uFEFF -> & #65279; （忽略中间的空格）-> %26%2365279%3B

( %26 = & | %23 = # | %3B = ; )

这是一个在 Java 中执行第一步的方法：

```
public static String htmlEscapeUnmappableCharaters(String source, String charset) {
    CharsetEncoder cse = Charset.forName(charset).newEncoder();

    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < source.length(); i++) {

        if (cse.canEncode(source.charAt(i))) {
            sb.append(source.charAt(i));
        } else {
            sb.append('&');
            sb.append('#');
            sb.append(source.codePointAt(i));
            sb.append(';');
        }
    }

    return sb.toString();
} 
```

# symfony-2.1 - Symfony2.1 FosUserBundle 翻译损坏

> ID：14887952
> 
> 赞同：1
> 
> 时间：2013-02-15T03:46:10.700
> 
> 标签：symfony-2.1, fosuserbundle

我有一个使用 Symfony 2.0 和 FOSUserBundle 1.2.0 的项目，一切正常。当我从 master 分支升级到最新的 Symfony 2.1 版本和最新的 FOSUserBundle 时，在修复了很多东西之后，标签没有被翻译，即“form.username”。

我的用户包被我制作的自定义包覆盖了。我已经覆盖了以下内容：

*   控制器

    *   更改密码控制器
    *   组控制器
    *   注册控制器
    *   用户控制器
*   形式

    *   类型
        *   更改密码表单类型
        *   注册表格类型
*   资源

    *   配置
        *   路由.yml
    *   意见
        *   更改密码
            *   changePassword_content.html.twig
            *   更改密码.html.twig
        *   形式
            *   form_group.html.twig
            *   form_user.html.twig
        *   团体
            *   编辑.html.twig
            *   list.html.twig
            *   新的.html.twig
            *   show.html.twig
        *   登记
            *   checkEmail.html.twig
            *   email.txt.twig
            *   register_content.html.twig
            *   register.html.twig
        *   用户
            *   编辑.html.twig
            *   index.html.twig
            *   show.html.twig

我还有一个自定义用户和组实体，以及我在上一棵树中省略的自定义 UserType 和 GroupType。

在 app/Resources/translations/FOSUserBundle.en.yml 的翻译文件我也尝试将它们复制到我的包中，src/Acme/UserBundle/Resources/translations/FOSUserBundle.en.yml 它们都没有与 symfony 2.1 一起使用。

当然，我清理了缓存、生产缓存和重新生成的资产以防万一，并刷新了浏览器……一切都几次了，什么也没有。

我在这里和谷歌上搜索，我找不到任何线索，我尝试了一些东西但没有成功。

我将复制下面一些文件的内容。

> Acme/UserBundle/Controller/RegistrationController.php

```
<?php

namespace Acme\UserBundle\Controller;

use Symfony\Component\HttpFoundation\RedirectResponse;

class RegistrationController extends BaseController
{
public function registerAction()
{
    $form = $this->container->get('fos_user.registration.form');
    $formHandler = $this->container->get('fos_user.registration.form.handler');
    $confirmationEnabled = $this->container->getParameter('fos_user.registration.confirmation.enabled');

    $process = $formHandler->process($confirmationEnabled);
    if ($process) {
        $user = $form->getData();

        $authUser = false;
        if ($confirmationEnabled) {
            $this->container->get('session')->set('fos_user_send_confirmation_email/email', $user->getEmail());
            $route = 'fos_user_registration_check_email';
        } else {
            $authUser = true;
            $route = 'AcmeUserBundle_admin_user_index';
        }

        $this->setFlash('fos_user_success', 'registration.flash.user_created');
        $url = $this->container->get('router')->generate($route);
        $response = new RedirectResponse($url);

        if ($authUser) {
            $this->authenticateUser($user, $response);
        }

        return $response;
    }

    return $this->container->get('templating')->renderResponse('FOSUserBundle:Registration:register.html.'.$this->getEngine(), array(
        'form' => $form->createView(),
    ));
}
} 
```

> Acme/UserBundle/Form/Type/RegistrationFormType.php

```
<?php

namespace Acme\UserBundle\Form\Type;

use Doctrine\ORM\EntityManager;

class RegistrationFormType extends BaseType
{
private $entityManager;

public function __construct($class, EntityManager $entityManager)
{
    parent::__construct($class);
    $this->entityManager = $entityManager;
}

public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('username', null, array('label' => 'form.username', 'translation_domain' => 'FOSUserBundle', 'error_bubbling' => true))
        ->add('nombre', 'text', array('error_bubbling' => true))
        ->add('apellido', 'text', array('error_bubbling' => true))
        ->add('email', 'email', array('label' => 'form.email', 'translation_domain' => 'FOSUserBundle', 'error_bubbling' => true))
        ->add('plainPassword', 'repeated', array(
                'type' => 'password',
                'options' => array('translation_domain' => 'FOSUserBundle'),
                'first_options' => array('label' => 'form.password'),
                'second_options' => array('label' => 'form.password_confirmation'),
                'invalid_message' => 'fos_user.password.mismatch',
                'error_bubbling' => true,
        ))
        ->add('groups', 'entity', array(
                'class' => 'Acme\\UserBundle\\Entity\\Group',
                'property' => 'name',
                'label' => 'Grupos',
                'empty_value' => 'Seleccione Grupos',
                'multiple'  =>  true,
                'expanded'  =>  true,
                'required'  =>  false,
        ));
}

public function getName()
{
    return 'acme_user_registration';
}    
} 
```

> Acme/Resources/views/Registration/register_content.html.twig

```
<form action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form) }} method="POST" class="fos_user_registration_register">
<div class="content no-padding" {{ block('container_attributes') }}>            
    {{ form_widget(form) }}
</div>
<div class="actions">
    <div class="actions-left" style="margin-top: 8px;"></div>
    <div class="actions-right">
        <input type="submit" value="{{ 'registration.submit'|trans({}, 'FOSUserBundle') }}" />
    </div>
</div> 
```

> Acme/Resources/views/Registration/register.html.twig

```
{% extends "AcmeAdminBundle:Base:base_auth.html.twig" %}
{% form_theme form 'AcmeUserBundle:Form:form_user.html.twig' %}

*[...] Here are stylesheets and JS[...]*

{% block main_content %}
<!-- Start of the main content -->
<div id="main_content">
    <h2 class="grid_12">{% block title "Crear Usuario" %}</h2>
    <div class="clean"></div>
        <div class="grid_6">
            <div class="box">
                <div class="header">
                    <img src="{{ asset('bundles/acmeadmin/img/icons/packs/fugue/16x16/ui-text-field-format.png') }}" alt="" width="16"
                    height="16">
                    <h3>Información Básica</h3>
                    <span></span>
                </div>
                {% block fos_user_content %}
                    {% include "AcmeUserBundle:Registration:register_content.html.twig" %}
                {% endblock fos_user_content %}
            </div> <!-- End of .box -->
        </div> <!-- End of .grid_6 -->
</div> <!-- End of #main_content -->
<div class="push clear"></div>
{% endblock main_content %} 
```

如果我禁用我的包，删除

```
 public function getParent()
{
    return 'FOSUserBundle';
} 
```

标签按预期显示。我不知道还能做什么。有什么建议么？

# namespaces - 如何解决 d 中的“冲突”错误？

> ID：14887954
> 
> 赞同：3
> 
> 时间：2013-02-15T03:46:26.383
> 
> 标签：namespaces, d, conflict

我正在尝试编译一些 D。我编写的代码使用该`std.string`库以及`std.algorithm`. 我的一个函数调用`indexOf`一个字符串：不幸的是，显然还有一个`indexOf`函数 in `std.algorithm`，编译器不喜欢它：

```
assembler.d(81): Error: std.algorithm.indexOf!("a == b", string, immutable(char)).indexOf at /usr/share/dmd/src/phobos/std/algorithm.d(4431) conflicts with std.string.indexOf!(char).indexOf at /usr/share/dmd/src/phobos/std/string.d(334)
assembler.d(81): Deprecation: function std.algorithm.indexOf!("a == b", string, immutable(char)).indexOf is deprecated 
```

我该如何解决这个问题？在 C++ 中，我可以使用`::`来明确说明我所在的命名空间...... D 呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T04:38:35.433

如果要`std.string.indexOf`显式调用，请使用or`std.string.indexOf(str, c)`代替。`indexOf(str, c)``str.indexOf(c)`

或者您可以使用别名：

```
alias std.string.indexOf indexOf; 
```

如果你把它放在你正在调用的函数中`indexOf`，那么它应该考虑`indexOf`用于`std.string.indexOf`函数的其余部分。或者如果你把它放在模块级别，那么它会影响整个模块。

但是，由于一个[错误](http://d.puremagic.com/issues/show_bug.cgi?id=6185)，UFCS（通用函数调用语法）目前不适用于本地别名，因此如果将别名放在函数中，则必须`indexOf(str, c)`使用`str.indexOf(c)`.

第三种选择是使用选择性导入：

```
import std.string : indexOf; 
```

通过该导入，仅从`indexOf`std.string 导入，当您使用 时`indexOf`，它将使用该`string`版本（即使您还导入了 std.algorithm）。而且你甚至可以在选择性导入的同时定期导入std.string来获取std.string的其余部分，选择性导入仍然可以解决冲突（在这种情况下，它与导入std.string然后别名`indexOf`）。但是，由于一个[错误](http://d.puremagic.com/issues/show_bug.cgi?id=314)，选择性导入总是被视为公共的，因此`indexOf`在模块中进行选择性导入会影响导入它的每个模块（可能会导致新的冲突），因此此时您可能希望避免它。

# xml - 使用 xslt 输入 xml 到输出 xml 转换

> ID：14887958
> 
> 赞同：0
> 
> 时间：2013-02-15T03:46:53.613
> 
> 标签：xml, xslt, transform

我有一个输入和所需的输出 xml 文件，但无法为此编写通用 xsl 转换器。这里有人可以帮我吗？address/billing 在运行时可能有更多元素，应直接复制到 main person 块。

```
<searchPersonResponse>
 <persons>
  <person>
   <name>name2</name>
   <address>
   <billing>
     <city>xx</city>
     <state>yyyy</state>
     <zip>zzzzz</zip>
   </billing>
   </address>
  </person>
  <person>
    <name>name1</name>
    <address>
      <billing>
       <city>xx</city>
       <state>yyyy</state>
       <zip>zzzzz</zip>
      </billing>
    </address>
   </person>
  </persons>
 </searchPersonResponse> 
```

所需的输出 xml

```
<searchPersonResponse>
 <persons>
  <person>
     <name>name2</name>
     <city>xx</city>
     <state>yyyy</state>
     <zip>zzzzz</zip>
  </person>
  <person>
       <name>name1</name>
       <city>xx</city>
       <state>yyyy</state>
       <zip>zzzzz</zip>
   </person>
  </persons>
 </searchPersonResponse> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T03:51:04.410

已编辑：当地址与计费子项一起存在时，OP 仅希望“解包”地址和计费元素。XSLT 现在可以做到这一点。此外，OP 提到需要 XSLT 1.0 解决方案；没有使用 XSLT 2.0 功能，所以我只是将版本更改为“1.0”。

**这个 XSLT：**

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:template match="@*|node()">
        <xsl:copy>
                <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="address[child::billing]|billing[parent::address]">
        <xsl:apply-templates/>
    </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 时：**

```
<searchPersonResponse>
    <persons>
        <person>
            <name>name2</name>
            <address>
                <billing>
                <city>xx</city>
                <state>yyyy</state>
                <zip>zzzzz</zip>
                </billing>
            </address>
        </person>
        <person>
            <name>name1</name>
            <address>
                <billing>
                <city>xx</city>
                <state>yyyy</state>
                <zip>zzzzz</zip>
                </billing>
            </address>
        </person>
    </persons>
</searchPersonResponse> 
```

**产生所需的结果：**

```
<searchPersonResponse>
    <persons>
        <person>
            <name>name2</name>
            <city>xx</city>
            <state>yyyy</state>
            <zip>zzzzz</zip>
        </person>
        <person>
            <name>name1</name>
            <city>xx</city>
            <state>yyyy</state>
            <zip>zzzzz</zip>
        </person>
    </persons>
</searchPersonResponse> 
```

身份模板将复制所有节点和属性。地址和帐单匹配模板（匹配任一元素）将复制其子代，但不会复制它们自己。

# android - 如何在 API 级别 8 上使用选项卡 + 滑动导航

> ID：14887962
> 
> 赞同：3
> 
> 时间：2013-02-15T03:47:35.817
> 
> 标签：android, navigation

我正在使用导航类型的 tabs + swipe 创建一个活动。但它说 ir 要求最低 API 级别为 11，而我目前的最低 API 级别是 8。但我看到很多应用程序都有这种导航，甚至在姜饼上运行。所以我想问如何在 API 8 上做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-09T05:08:58.817

下载pagerIndicator，就是你想要的： [viewpagerindicator.com](http://viewpagerindicator.com/)

# c# - 使用 Ajax 请求使用 Wcf 服务时配置文件错误

> ID：14887963
> 
> 赞同：3
> 
> 时间：2013-02-15T03:47:54.030
> 
> 标签：c#, ajax, wcf, jquery

我在使用 jquery 使用 WCF 服务时遇到了问题。我收到错误“找不到配置绑定扩展 'system.serviceModel/bindings/webHttpbinding'。验证此绑定扩展已在 system.serviceModel/extensions/bindingExtensions 中正确注册并且拼写正确。”

这是我的 Web.Config 文件：

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" />
      </webHttpBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="RestfulServiceBehavior">
          <webHttp helpEnabled="true"/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="WebServiceBehavior">

          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="WcfService1.RestfulServiceImp" behaviorConfiguration="WebServiceBehavior">
        <endpoint address="" behaviorConfiguration="RestfulServiceBehavior" 
             bindingConfiguration="webHttpBindingWithJsonP" binding="webHttpbinding" contract="WcfService1.IRestfulServiceImp"/>
        <!--<endpoint address="mex" binding="mexHttpBinding" contract="WcfService1.IRestfulServiceImp"/>-->
        <endpoint address="soap" binding="basicHttpBinding" contract="WcfService1.IRestfulServiceImp"/>
      </service>
    </services> 
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"  aspNetCompatibilityEnabled="false"/>

  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Headers" value="Content-Type" />
      </customHeaders>
    </httpProtocol>
  </system.webServer>
  <system.diagnostics>
    <sources>
      <source name="System.ServiceModel"
          switchValue="Information, ActivityTracing"
          propagateActivity="true">
        <listeners>
          <add name="xml"
   type="System.Diagnostics.XmlWriterTraceListener"
   initializeData="c:\log\Traces.svclog" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics> 
```

这是我的服务名称 RestfulServiceImp 和我的合同是 IRestfulServiceImp 请需要您对这些的宝贵建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T07:04:25.550

您的配置中存在大小写不匹配，

```
<bindings>
      <webHttpBinding>
        <binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" />
      </webHttpBinding>
    </bindings> 
```

和

```
<endpoint address="" behaviorConfiguration="RestfulServiceBehavior" 
             bindingConfiguration="webHttpBindingWithJsonP" binding="webHttpbinding" contract="WcfService1.IRestfulServiceImp"/>
        <!--<endpoint address="mex" binding="mexHttpBinding" contract="WcfService1.IRestfulServiceImp"/>-->
        <endpoint address="soap" binding="basicHttpBinding" contract="WcfService1.IRestfulServiceImp"/> 
```

检查 webHttpBinding 中的大小写差异。您使用的**是 webHttpbinding**而不是**webHttpBinding。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:24:56.317

我目前没有打开 VS 来查看，但请确保这种情况并不重要。

```
'system.serviceModel/bindings/webHttpbinding 
```

对比

```
<webHttpBinding> 
```

编辑：所以我打开 VS 并将绑定名称更改为小写并得到相同的错误。尝试修复您的案例差异。

![在此处输入图像描述](../Images/99a7398ebe9ed2f17dfa3bd507ce8444.png)

# javascript - 向 Pinterest Pin It Button iframe 添加其他类

> ID：14887964
> 
> 赞同：4
> 
> 时间：2013-02-15T03:47:55.607
> 
> 标签：javascript, class, iframe, pinterest

我在使用 Pinterest Pin it 按钮时遇到问题。[Pinterest JS](http://business.pinterest.com/widget-builder/#code)`iframe`默认创建一个。然而，`iframe`在我的页脚中创建了不需要的空间。我试图通过隐藏`iframe`. 我无法隐藏所有`iframe`s，因为页面上还有其他需要。而且`class`在`iframe`不断变化，所以我不能使用它。

有没有办法添加额外的`class`或`ID`动态加载的`iframe`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T11:49:50.553

你可以这样定位它：

```
iframe[src^="//assets.pinterest"] {
 display: none;
} 
```

# parsing - ocaml 解析器和词法分析器

> ID：14887971
> 
> 赞同：1
> 
> 时间：2013-02-15T03:49:37.700
> 
> 标签：parsing, ocaml, lexer, parser-generator

嗨，我有 3 个文件 nano.ml，它是类型，还有一个 paser 和 lexer 文件。我不知道如何为解析器编写规则，我尝试编写规则，但它给了我错误的说法，即不接受参数。
当我尝试编译时，它给了我这个

```
:File "nanoParse.mly", line 31: $1 refers to terminal `LET', which has no argument
Compiling (to byte code) OCAML module nanoLex.ml
ocamlc -dtypes -c nanoLex.ml -o nanoLex.cmo
File "nanoLex.mll", line 10, characters 32-37:
Error: The constructor LET expects 1 argument(s),
but is here applied to 0 argument(s) 
```

并且程序假设做这样的事情：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:07:05.657

我怀疑你想要`{Let($2, $3, $5)}`而不是`{Let($1, $2, $3)}`. 但是，这是需要查看的大量代码。你可能想从一个小例子开始，然后从那里开始。

# haskell - Haskell笛卡尔积递归

> ID：14887973
> 
> 赞同：3
> 
> 时间：2013-02-15T03:50:04.323
> 
> 标签：haskell, cartesian-product

我知道如何使用列表推导来做到这一点，但是如何实现一个函数，该函数将递归计算给定两组的笛卡尔积？

这就是我被困的地方（而且我是菜鸟）

```
crossProd :: [Int] -> [Int] -> [(Int,Int)]
crossProd xs ys | xs == [] || ys == [] = []
                | otherwise = (head xs, head ys) : crossProd (tail xs) (ys) 
```

这个输出给了我

> [(1,4),(1,5),(1,6)]

如果集合是`[1,2,3]`和`[4,5,6]`分别.. 我将如何获得其余部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T04:30:16.633

最基本的情况是这样的：

```
{-crossProdAux :: Int -> [Int] -> [(Int,Int)]-}
crossProdAux x []    = []
crossProdAux x (a:b) = (x, a):(crossProdAux x b)

{-crossProd :: [Int] -> [Int] -> [(Int,Int)]-}
crossProd [] ys   = []
crossProd (a:b) ys= (crossProdAux a ys)++(crossProd b ys) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T11:06:42.040

这可以在一个函数中完成：

```
crossProd :: [a] -> [b] -> [(a, b)]
crossProd (x:xs) ys = map (\y -> (x, y)) ys ++ crossProd xs ys
crossProd _      _  = [] 
```

请注意，我已经概括了您的类型，因此这适用于任何`a`and `b`，而不仅仅是`Int`s。

此函数的关键是了解您希望将第一个列表中的每个元素与第二个列表中的每个元素配对。因此，此解决方案从第一个列表中获取一个元素`x`，并将其与`ys`. 这是通过映射一个函数来完成的，该函数`y`从中获取每个值`ys`，并将其转换为一对`(x, y)`。我们将它添加到与列表的其余部分一起递归的前面`xs`。

在基本情况下，没有任何东西可以配对，因此输出为空。

# java - 无重复的可排序 Java 集合

> ID：14887976
> 
> 赞同：3
> 
> 时间：2013-02-15T03:50:22.753
> 
> 标签：java, sorting, collections, duplicates

我正在搜索可排序的（我的意思是在初始化后排序并多次使用 Comparator）Java 类集合，没有重复。有没有比编写不透明的代码更纯粹的解决方案，例如阻止一些 ArrayList 添加另一个具有相同值的对象已经存在？

编辑1：我应该添加一些关于排序的解释。我需要使用不同的比较器（实现的多样性）多次对这组值进行排序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T03:52:06.113

使用[一套](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)！常见的实现是[HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)和[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)。后者在实现[SortedSet](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)时保留了项目的顺序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T03:56:34.610

```
Set Interface---->SortedSet Interface----->TreeSet Class
Set Interface---->HashSet Class
Set Interface---->LinkedHashSet Class 
```

您可以使用`TreeSet`. 它将删除重复项。

`TreeSet`实现`SortedSet`接口，以便对输入的元素进行排序

```
 SortedSet s=new TreeSet();
        s.add(12);
        s.add(12);
        s.add(1);
        s.add(56);
        s.add(6);
        s.add(47);
        s.add(1);
        System.out.println(s); 
```

**输出**

```
[1, 6, 12, 47, 56] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T05:51:26.473

将*Set*用于唯一元素。您始终可以使用*Collections.sort()*对您使用的任何集合进行排序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-08T15:04:03.257

最好扩展一个标准集合或从头开始实现一个。例如：

```
class SetList<E> extends ArrayList<E> {
  boolean add(E e) {
    if (contains(e)) {
      return false;
    } else {
      super.add(e);
      return true;
    }
  }

  void add(int index, E e) { .. }

  void addAll(..) {..}

  void addAll(..) {..}
} 
```

然后你得到了`Collections.sort`如前所述。不过，我想仔细检查所有内容——我可以想象库方法对 SetList 做出错误的假设，因为它扩展了 ArrayList，从而导致灾难。首先阅读 ArrayList、List 和 Collection 的 javadocs，然后真正考虑从头开始做一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T03:54:58.323

这是[一套](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)。

用法：

```
Collection collection = new HashSet(); 
```

# ruby-on-rails - RABL 排序结果

> ID：14887985
> 
> 赞同：0
> 
> 时间：2013-02-15T03:52:12.057
> 
> 标签：ruby-on-rails, json, rabl, rails-api

刚开始使用带有 Rails 3.2.6 的 RABL Gem 并开始了解它。我对这个堆栈的某些部分也很陌生，所以谢谢你对我的包容。

我有一个课堂模型，通过注册有多个孩子，我可以使用 RABL 输出我的 JSON。

```
object @classroom
attributes :id, :name

child :enrollments => :children do |classroom|
    child :child do
        attributes :c_name
    end
end 
```

现在我想按一些属性对孩子进行排序（比如 c_name 以保持简单）。我该怎么办？我尝试使用辅助方法将其拾起，但并没有走得太远。任何想法表示赞赏和欢迎。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:43:25.867

尝试进入子模型并输入：

```
default_scope :order => 'c_name ASC' 
```

我认为这应该有效。当然，这会改变模型的默认排序。

# c# - 可定制的表格/标签以制作矩阵

> ID：14887986
> 
> 赞同：0
> 
> 时间：2013-02-15T03:52:21.423
> 
> 标签：c#, winforms, user-interface, datagridview, controls

我正在尝试使用 Visual C# 制作可编辑的行/列矩阵。基本上我想做的是：

![在此处输入图像描述](../Images/442fa7ef5430675ad9b5e9875aceec51.png)

Row 和 Col 值将是可编辑的，我希望单元格的数量在其范围内调整大小。也就是说，如果我将行更改为：

![在此处输入图像描述](../Images/e5f0059bcc80fa287f87c28c9af6e8ae.png)

界限应该保持不变。

我应该开始使用哪种容器？我尝试了带有彩色标签的面板控件，但我想不出如何调整它们的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:26:00.217

只需将`DataGridView`控件从工具箱拖到表单上：

![dgv](../Images/58fcb1a3208793818207b9cdd89f9033.png)

我之前使用过以下代码来均匀分布列宽：

```
base.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill; 
```

`AutoSizeRowsMode`属性也存在。

# php - PHP：使用 unset() 或赋值为 null 后内存未释放

> ID：14887988
> 
> 赞同：1
> 
> 时间：2013-02-15T03:52:37.673
> 
> 标签：php, memory-management

我编写了一个 PHP 插件，可将记录从 Endnote XML 书目文件导入数据库。导入过程涉及几个阶段，其中之一是将尾注记录初始读取到内存中，并为它们创建一个内部的、基于对象的表示。其次，必须扫描所有要导入的记录，以查看其作者、出版物、关键字等是否在数据库中已经有相应的记录。

我在 OS X 10.8.2 上运行 PHP 5.4.7（64 位）。

为了快速完成这些任务，我将几乎所有的数据存储在内存中，而不是将数据写入数据库或反复查询数据库……所有必要的数据都一次读入并根据需要进行查询。

这当然是内存密集型的。但是，我已经制定了许多减少内存占用的策略，这些策略在减少使用的内存量方面非常有效。特别是，我广泛使用原生 PHP 序列化/反序列化工具以及 zlib 来压缩序列化表示。尽管如此，内存使用率仍然高得令人不安，仅导入 500 条 Endnote 记录后就耗尽了最大内存。

为了解决这个问题，我尝试使用`unset()`内部函数来释放我不再需要的*所有*变量、数组和对象，一旦我完成了它们。其中一些对象在实例化时非常大，这就是我尽快处理它们的原因。但是，在进行了一些内存使用分析之后，我发现报告的内存使用情况`memory_get_usage(true)`并没有下降，尽管有`unset`变量，启用垃圾收集`gc_enable()`并通过`gc_collect_cycles()`.

我已经阅读了其他帖子，这些帖子表明只要特定变量的引用计数没有下降到零，PHP 就不会释放相关的内存，这是我理解的。我设计了我的代码以避免循环引用......每个不同的内存消耗对象都有一组独立的内部存储数组，它们都不与其他对象共享数据。因此，在销毁宿主对象后，理论上，应该立即释放其所有私有数据。但是，我没有看到这种情况发生。

如果有人想查看我的代码，可以在[Github](https://github.com/enorvelle/importendnote/)上找到。

**1.**在文件中找到了对各种高内存使用对象进行测试的主要单元测试，并测量内存使用情况（处理 500 条 Endnote 记录，总共使用 122MB）`/test/ObjectStoreTest.php`

**2.**解析 Endnote 数据并将其转换为基于对象的表示的例程（在运行期间使用大约 15MB）在`/controller/ParseAndStoreEndnoteRecordsHandler.class.php`

**3.**发现主库已有作者的类（好像用了30MB左右）在`/model/resolvers/CreatorExternalReferenceResolver.class.php`

我提供这些信息以供参考，以防需要它来回答问题......显然，我不希望任何人花半天时间来分析我的代码。但是，希望这些信息足以清楚地说明我遇到的特定内存使用问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:01:56.177

The problem your seeing is due to the fact that that PHP's Garbage Collector has not kicked in yet, or the reference count for the memory consuming objects are not zero yet. The GC is more likely to kick in with a lower memory limit, but it looks like you need all of that memory space. I would set the memory limit 'as is' or higher and let the engine do its job.

The only true fix for this is to use to upgrade to the alpha version of PHP 5.5.0 and use [Generators or Co-routines](https://wiki.php.net/rfc/generators) found in that build to keep the memory foot print down. It allows you to only peek at the value of the object in question and does not keep that value in RAM when it moves onto the next object. This allows for the garbage collector to do it's job as the reference counts for the objects are all zero and can thus be removed from memory.

# python-3.x - 如何将地图对象写入 csv？

> ID：14887989
> 
> 赞同：0
> 
> 时间：2013-02-15T03:52:38.493
> 
> 标签：python-3.x

我有一个地图对象 x 这样

```
list(x) 
```

产生一个列表。我目前正在尝试：

```
def writethis(name, mapObject):
    import csv
    with open(name, 'wb') as f:
        csv.writer(f, delimiter = ',').writerows(list(mapObject)) 
```

但是得到一个错误，说生成的列表不是一个有效的序列，或者，如果我有另一个函数在解释器中传递一个映射对象或列表，一个空白的 CSV 文件。

我对 csv 模块不是很熟悉。这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:45:26.207

首先，请注意，您在 Python 3 中以不同方式打开 CSV 写入文件。您想要

```
with open(name, 'w', newline='') as f: 
```

反而。其次，`writerows`需要一个序列序列，看起来你只是在传递一个序列。如果你只有一行要写，那么

```
def writethis(name, mapObject):
    with open(name, 'w', newline='') as f:
        csv.writer(f, delimiter = ',').writerow(list(mapObject)) 
```

应该管用。

# ruby - rvm 安装 1.8.7 错误

> ID：14887999
> 
> 赞同：1
> 
> 时间：2013-02-15T03:53:58.957
> 
> 标签：ruby, gcc, rvm

我正在尝试安装 ruby​​ 1.8.7

```
Searching for binary rubies, this might take some time.
No binary rubies available for: ubuntu/12.04/x86_64/ruby-1.8.7-p371.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing Ruby from source to: ~/.rvm/rubies/ruby-1.8.7-p371, this may take a while depending on your cpu(s)...
ruby-1.8.7-p371 - #downloading ruby-1.8.7-p371, this may take a while depending on your connection...
ruby-1.8.7-p371 - #extracted to ~/.rvm/src/ruby-1.8.7-p371 (already extracted)
Patch stdout-rouge-fix was already applied.
Patch no_sslv2 was already applied.
ruby-1.8.7-p371 - #configuring
ruby-1.8.7-p371 - #compiling
Error running 'make', please read ~/.rvm/log/ruby-1.8.7-p371/make.log
There has been an error while running make. Halting the installation.
Please be aware that you just installed a ruby that requires 2 patches just to be compiled on up to date linux system.
This may have known and unaccounted for security vulnerabilities.
Please consider upgrading to ruby-1.9.3-p385 which will have all of the latest security patches. 
```

猫 ~/.rvm/log/ruby-1.8.7-p371/make.log

```
gcc -g -O2  -fPIC    -DRUBY_EXPORT -D_GNU_SOURCE=1  -L.  -rdynamic -Wl,-export-dynamic   main.o  libruby-static.a -lrt -ldl -lcrypt -lm   -o miniruby
./lib/fileutils.rb:1410:  is not a class/module (TypeError)
        from ./mkconfig.rb:11:in `require'
        from ./mkconfig.rb:11
make: *** [.rbconfig.time] Error 1 
```

gcc -v

```
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.6/lto-wrapper
: x86_64-linux-gnu
: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.3-1ubuntu5' --with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
: posix
gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
```

rvm 1.18.6（稳定）

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T04:51:49.000

我刚刚安装了 RVM 的新版本（1.20.5），并且能够安装 ruby​​ 版本 1.8.7

 ~~我从 ubuntu repos 安装 rvm -v

```
rvm 1.6.9 
```

然后再试一次

```
rvm install 1.8.7-p371 
```

它对我有用

```
Install of ruby-1.8.7-p371 - #complete 
```

 ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:41:02.557

尝试：

```
rvm remove 1.8.7
rvm install 1.8.7 
```

请注意**生命周期结束**`ruby-1.8.7`-将不会针对错误或安全问题进行更新，您需要考虑更新到 ruby​​ // ，我的投票将在几天内发布**`1.9.2``1.9.3``2.0.0``2.0.0`**~~~~