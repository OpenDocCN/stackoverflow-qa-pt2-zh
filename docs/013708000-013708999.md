# StackOverflow 问答 13708000-13708999

# android - 为网站和移动应用程序创建数据库

> ID：13708002
> 
> 赞同：2
> 
> 时间：2012-12-04T16:58:29.460
> 
> 标签：android, mysql, database, mobile

我想创建一个数据库，以便我的网站和移动应用程序都可以从那里获取信息。我知道如何使用网站执行查询，但我几乎没有使用移动应用程序的经验。我听说我不能只使用任何形式的数据库（mysql，mongodb），因为它们不兼容或其他东西。那么如何创建我的数据库，使其与 android iOS 和 PC 兼容。一些让我开始的指导方针会很棒:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:05:27.370

听起来您需要构建一个 API 来处理移动应用程序和数据库之间的交互，就像您的网站与数据库进行通信一样。主要区别在于您将向应用程序返回 JSON/XML，而不是向用户显示 HTML。

我彻底推荐 JSON 而不是 XML，因为它不那么冗长，并且数据使用量会急剧下降。但是，如果您的数据结构非常详细/复杂，请使用 XML。

要开始构建 API，我会推荐[Slim PHP](http://www.slimframework.com/)。您可能还需要某种形式的 ORM，为此我强烈推荐[idiorm/paris](http://j4mie.github.com/idiormandparis/)

这两个框架的文档都很棒，所以请仔细研究一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:05:14.573

您可以使用 MySQL 创建数据库，并使用 mysql 查询从您的站点中提取信息。至于您的移动应用程序，您可以使用一些 php 页面和 JSON Parser 从数据库中提取数据。查看[示例](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:09:42.347

正如您所说，android 不支持外部数据库，例如 MySQL。最简单的做法是创建一个您的网站和安卓应用程序可以访问的 MySQL 数据库。

该网站将正常访问 MySQL 数据库，但 android 应用程序将变量等数据发布到 PHP 脚本，然后 PHP 脚本可以获取检索到的数据并执行 mysql 查询和`json_encode`输出并打印编码数据。然后，android 应用程序将接收输出的 json 格式，然后 android 应用程序可以解码 json 并相应地处理数据。

[http://www.helloandroid.com/tutorials/connecting-mysql-database](http://www.helloandroid.com/tutorials/connecting-mysql-database)有一些关于如何做到这一点的教程

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-11T16:32:34.633

您需要使用**面向服务的体系结构**。

您可以使用 REST API 方法来创建接口。

请参阅此示例 [www.hassanpur.com/blog/2010/09/android-development-implementing-a-simple-client-server-model/](http://www.hassanpur.com/blog/2010/09/android-development-implementing-a-simple-client-server-model/)

# datepicker - 原型日期选择器，如 Google Analytics

> ID：13708007
> 
> 赞同：1
> 
> 时间：2012-12-04T16:58:50.127
> 
> 标签：datepicker, prototypejs

我发现[了这个基于 Jquery 的 Datepicker](http://filamentgroup.com/examples/daterangepicker/)并喜欢它，但是我的应用程序与 Prototype 非常纠缠，我遇到了错误

```
Error: TypeError: element.dispatchEvent is not a function 
```

与其花时间让 Jquery 与 Protptype 很好地配合，是否有一个很好的基于 Prototype 的日期选择器，类似于 Google Analytics 使用的（或上面链接的那个）？

编辑：按照[这些指示](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)，我添加了

```
 <script type="text/javascript"> 
             jQuery.noConflict()
         </script> 
```

在加载了 Prototype 和 JQuery 库之后。我现在没有收到任何错误，但[日期选择器](http://filamentgroup.com/examples/daterangepicker/)不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:19:45.443

我决定将所有内容迁移到 jquery。问题解决了。:)

# php - Codeigniter - 引导模式 - 传递数据

> ID：13708010
> 
> 赞同：5
> 
> 时间：2012-12-04T16:58:57.893
> 
> 标签：php, codeigniter, twitter-bootstrap

我对 Codeigniter 还很陌生，我的目标是在学习时遵循最佳实践。目前我有一个通过 DB 生成的表

**HTML 表格**

```
<tr>
    <td>
      <a class="galName" href="#myModal" data-toggle="modal" >
        <?php echo $gal['name']; ?>
      </a>
    </td>
    <td>
      <?php echo $gal['clientName']; ?>
    </td>
</tr>
<?php endforeach; ?> 
```

**模态**

```
<div class="modal fade hide modal-creator" id="myModal" style="display: none;" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h3>Edit Gallery</h3>
    </div>
    <div class="modal-body"><?php echo form_open('url'); ?>

    <div class="row">
        <div class="span5">
            <?php print_r($galleryName); ?>
            <div class="control-group">
                <?php
                    $galleryName = array(
                        'id'            => 'galleryName',
                        'name'          => 'galleryName',
                        'placeholder'   => 'Gallery Name',
                        'required'      => 'required',
                    );
                    echo form_label('Gallery Name:', 'galleryName');
                    echo form_input($galleryName);
                ?>
            </div><!-- /control-group -->
       </div><!--/span5-->
   </div><!--/row-->
</div><!-- /modal-body -->

<div class="modal-footer">
    <!-- <p class="span3 resize">The following images are sized incorrectly. Click to edit</p> -->
    <a href="javascript:;" class="btn" data-dismiss="modal">Close</a>
    <a href="javascript:;" class="btn btn-primary">Next</a>
</div> 
```

该链接调用一个引导模式，我想在其中传递所选画廊的数据。我知道我可以通过 jQuery 传递数据，但是是否可以在 MVC 框架中保留此模式，如果可以，如何通过模式链接调用控制器？

非常感谢您的帮助，并且很乐意接受有关 CodeIgniter 资源的任何建议。我目前正在浏览 Nettuts 视频，尽管它们已经过时了，并且还在浏览用户指南。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T14:43:09.073

我真的认为你误解了 modal 是什么以及控制器是什么，如果没有 ajax 调用，你就无法做到这一点： `how does one go about calling the controller via the modal link`

我通常做的是创建一个`view/modals/`文件夹，然后将我所有的引导模式放在那里，例如：

```
application/views/modals/my_modal_form.php 
```

这看起来就像你展示的那样，里面：

```
<div class="modal fade hide modal-creator" id="myModal" style="display: none;" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h3>Edit Gallery</h3>
    </div>
    <div class="modal-body"><?php echo form_open('url'); ?>

    <div class="row">
        <div class="span5">
            <?php print_r($galleryName); ?>
            <div class="control-group">
                <?php
                    $galleryName = array(
                        'id'            => 'galleryName',
                        'name'          => 'galleryName',
                        'placeholder'   => 'Gallery Name',
                        'required'      => 'required',
                    );
                    echo form_label('Gallery Name:', 'galleryName');
                    echo form_input($galleryName);
                ?>
            </div><!-- /control-group -->
       </div><!--/span5-->
   </div><!--/row-->
</div><!-- /modal-body -->

<div class="modal-footer">
    <!-- <p class="span3 resize">The following images are sized incorrectly. Click to edit</p> -->
    <a href="javascript:;" class="btn" data-dismiss="modal">Close</a>
    <a href="javascript:;" class="btn btn-primary">Next</a>
</div> 
```

所以当我需要那个单一的模态时，我只需将它加载到主控制器视图中，我想简单地显示那个模态：

```
 <body>
    <?php echo $this->load->view('modals/my_modal_form'); ?>

    <tr>
    <td>
      <a class="galName" href="#myModal" data-toggle="modal" >
        <?php echo $gal['name']; ?>
      </a>
    </td>
    <td>
      <?php echo $gal['clientName']; ?>
    </td>
</tr>
<?php endforeach; ?>
    </body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:10:39.750

Ajax 是要走的路，我制作了一个模板库，我在其中加载了所有模态，以便可以从应用程序上的任何位置由 javscript 调用它们，然后使用 ajax 提交表单

# c# - 尝试上传文件时出现 401 / 403 错误

> ID：13708011
> 
> 赞同：0
> 
> 时间：2012-12-04T16:58:59.503
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2, swfupload

我正在使用[这个](http://blog.stevensanderson.com/2008/11/24/jquery-ajax-uploader-plugin-with-progress-bar/)使用 SWFUpload 的 jquery 插件。

目前它根本不起作用。我在以下位置设置了断点：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{

} 
```

当我选择我的文件时，它似乎甚至都没有命中服务器。如果我继续尝试上传文件而不刷新页面，我会交替出现 401/403 错误。我在桌面、文档文件夹等地方尝试了很多不同的文件。

如何停止此问题并让 SWFUpload 正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:01:54.220

该插件使用 AJax，它需要在你的控制器中点击一个 ActionMethod

```
public ActionResult SomeMethod(){

//find the code somwhere

} 
```

# node.js - 如何从 NodeJS 程序中获取 Monit 的状态？

> ID：13708012
> 
> 赞同：1
> 
> 时间：2012-12-04T16:58:58.913
> 
> 标签：node.js, monit

我正在尝试从 NodeJS 程序中获取 Monit 的状态。在我的监视器中，我将其设置为使用端口 2812，但我不确定在我的节点程序中该做什么。任何建议将不胜感激。

我要补充一点，我目前一无所知，但我已经尝试过：

```
var net = require('net');

var client = net.connect({port: 2812},
    function() { //'connect' listener
  console.log('client connected');
  client.write('monit status');
});
client.on('data', function(data) {
  console.log(data.toString());
  client.end();
});
client.on('end', function() {
  console.log('client disconnected');
}); 
```

哪个输出：

```
client connected
HTTP/1.0 400 Bad Request
Date: Tue, 04 Dec 2012 17:03:15 GMT
Server: monit 5.3.2
Content-Type: text/html
Connection: close

<html><head><title>Bad Request</title></head><body bgcolor=#FFFFFF><h2>Bad Request</h2>Cannot parse request<p><hr><a href='http://mmonit.com/monit/'><font size=-1>monit 5.3.2</font></a></body></html>

client disconnected 
```

这不仅仅是什么，因为它实际上将 monit 列为服务器，但我不知道如何使它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:12:02.553

我想到了。原来我想做的是：

```
var http = require('http');

var options = {
  hostname: '127.0.0.1',
  port: 2812,
  method: 'GET'
};

var req = http.request(options, function(res) {
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (data) {
    console.log('BODY: ' + data);
  });
});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

req.end(); 
```

# eclipse - 保存eclipse工作区而不重新启动

> ID：13708017
> 
> 赞同：6
> 
> 时间：2012-12-04T16:59:06.867
> 
> 标签：eclipse, workspace

**保存 Eclipse 工作区而不重启 **

也许你遇到过这种情况：

您自定义您的 Eclipse 工作区并让它恰到好处......然后操作系统更新发生并且系统重新启动......在重新启动期间，Eclipse 被意外强制关闭并且不保存工作区。

当你回来时，你所有的工作区自定义设置都消失了，你的 Eclipse 工作区是空的！

有没有办法在不重新启动 eclipse 的情况下保存工作区？如果看到更改，也许可以让它每 30 分钟自动保存一次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T17:11:43.033

目前这是不可能的。有一个长期存在的错误/请求来解决这个问题。[https://bugs.eclipse.org/bugs/show_bug.cgi?id=2369](https://bugs.eclipse.org/bugs/show_bug.cgi?id=2369)

以下设置保存核心状态，但不保存 UI 状态。

```
Window > Preferences > General > Workspace : Workspace save interval 
```

# ssis - 将 SSIS WebService 任务连接到 Spring WevService

> ID：13708020
> 
> 赞同：0
> 
> 时间：2012-12-04T16:59:16.613
> 
> 标签：ssis, wireshark, spring-ws

我有一个 SSIS 包，我在其中使用 WebService 任务来调用 Spring WS。身份验证由客户端证书和用户名和密码完成。

我试图像这样简单的 HttpConnection 和 WebService 任务 - 错误 504 网关超时。当我编辑 HttpConnection 并单击测试连接时，我收到一条错误消息：“底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。”

我试过用脚本任务和同样的错误来做。我什至尝试过使用虚拟控制台应用程序并获得相同的结果。

我还有一个 java 编写的应用程序，它实际上可以完成这项工作，但我无法访问它的代码隐藏。这基本上证明了问题不在于服务器本身。java 应用程序有它自己的密钥库和我在服务器上安装的相同证书。

我打开了一个wireshark捕获，我看到当我使用我的任何一个应用程序时，主机向一个我没有在任何地方配置的地址发出了DNS请求（它看起来像是来自Intranet的代理地址），而Java应用程序则产生了一个DNS请求正确的地址。

我被困在这里，我不知道问题可能是什么，或者我还能做什么，这样我就会得到一个正确的错误。

请指教！

编辑：

这是调用 WS 的代码：

```
public static void CallWebService()
        {
            var _url = "https://<IP>/App/soap/DataService";
            string action = "getData";
            Dictionary<string, string> parameters = new Dictionary<string, string>();

            parameters.Add("param1", "0");
            parameters.Add("param2", "0");
            parameters.Add("param3", "value");

            XmlDocument soapEnvelopeXml = CreateSoapEnvelope(action, parameters);
            HttpWebRequest webRequest = CreateWebRequest(_url);
            InsertSoapEnvelopeIntoWebRequest(soapEnvelopeXml, webRequest);

            // begin async call to web request.
            IAsyncResult asyncResult = webRequest.BeginGetResponse(null, null);

            // suspend this thread until call is complete. You might want to
            // do something usefull here like update your UI.
            asyncResult.AsyncWaitHandle.WaitOne();

            // get the response from the completed web request.
            string soapResult;

            using (WebResponse webResponse = webRequest.EndGetResponse(asyncResult))
            {
                using (StreamReader rd = new StreamReader(webResponse.GetResponseStream()))
                {
                    soapResult = rd.ReadToEnd();
                }
            }

            Console.WriteLine(soapResult);
        }

        private static HttpWebRequest CreateWebRequest(string url)
        {
            HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
            webRequest.ContentType = "text/xml;charset=\"utf-8\"";
            webRequest.Accept = "text/xml";
            webRequest.Method = "POST";

            string thumbprint = "CERTIFICATE THUMBPRINT";
            byte[] thumbprintArray = new byte[thumbprint.Split(new char[]{ ' ' }).Length];
            string[] stringArray = thumbprint.Split(new char[] { ' ' });
            for (int i = 0; i < thumbprintArray.Length; i++)
            {
                thumbprintArray[i] = Convert.ToByte(stringArray[i], 16);
            }

            X509Store localStore = new X509Store("My");
            localStore.Open(OpenFlags.ReadOnly);
            X509Certificate2Collection certCol = localStore.Certificates.Find(X509FindType.FindByTimeValid, DateTime.Now, true);

            foreach (X509Certificate cert in certCol)
            {
                if (cert.GetCertHashString() == thumbprint)
                {
                    webRequest.ClientCertificates.Add(cert);
                    break;
                }
            }

            webRequest.UseDefaultCredentials = false;
            webRequest.Credentials = new NetworkCredential("USER", "PASSWORD");

            return webRequest;
        }

        private static XmlDocument CreateSoapEnvelope(string action, Dictionary<string, string> parameters)
        {
            string formatedParameters = string.Empty;
            string paramFormat = "<{0}>{1}</{0}>";

            foreach (string key in parameters.Keys)
            {
                formatedParameters += string.Format(paramFormat, key, parameters[key]);
            }

            XmlDocument soapEnvelop = new XmlDocument();
            soapEnvelop.LoadXml(string.Format(@"
<soapenv:Envelope xmlns:soap=""http://custom/soap/"" xmlns:soapenv=""http://schemas.xmlsoap.org/soap/envelope/"">
    <soapenv:Header/>
    <soapenv:Body>
        <soap:{0}>
            {1}
        </soap:{0}>
    </soapenv:Body>
</soapenv:Envelope>", action, formatedParameters));
            return soapEnvelop;
        }

        private static void InsertSoapEnvelopeIntoWebRequest(XmlDocument soapEnvelopeXml, HttpWebRequest webRequest)
        {
            using (Stream stream = webRequest.GetRequestStream())
            {
                soapEnvelopeXml.Save(stream);
            }
        } 
```

# jquery - 子选择器和 ID

> ID：13708022
> 
> 赞同：1
> 
> 时间：2012-12-04T16:59:21.623
> 
> 标签：jquery, jquery-selectors

我只是不明白为什么 ID 不是有效的父母： [http ://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

有效的：

```
$("#listequestions tr").click(function() {
  $(this).addClass("success");
}); 
```

无效：

```
$("#listequestions > tr").click(function() {
  $(this).addClass("success");
}); 
```

有人可以帮我理解为什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T17:02:43.687

如果没有，则自动将A`tbody`插入表中。

这就是为什么唯一可能的匹配`"#listequestions > tr"`方法是将 id 赋予 a `thead`、 a`tfoot`或 a `tbody`。

这是子选择器的危险之一。

假设您有以下 HTML：

```
<table id=listequestions>
    <tr><td>some text</td></tr>
</table>​ 
```

然后`tr`将由这两个查询匹配：

*   `$('#listequestions > tbody > tr')`
*   `$('#listequestions tr')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:03:28.473

在这里，您正在选择带有 id listequestions 的元素内的直接子元素

```
$("#listequestions > tr").click(function() {
  $(this).addClass("success");
}); 
```

在这里，您正在选择包含子子项的 id 为 listequestions 的元素内的所有元素。

```
$("#listequestions tr").click(function() {
  $(this).addClass("success");
}); 
```

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T17:04:16.623

```
$("#listequestions  tr") 
```

将尝试匹配`all the children which are tr`

```
$("#listequestions > tr") 
```

会匹配`only the immediate children`..

因此，如果 tr 不是直接孩子，那么第二个将不起作用..

正如dystroy指出的那样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T17:01:21.120

这会起作用吗？

```
$("#listequestions").children("tr").click(function() {
      $(this).addClass("success");
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T17:03:21.560

```
$("#listequestions").find("tr").click(function() {
      $(this).addClass("success");
}); 
```

# python - python性能-关系的元组列表或字典？

> ID：13708025
> 
> 赞同：0
> 
> 时间：2012-12-04T16:59:49.160
> 
> 标签：python, performance, list, dictionary, tuples

我想定义一个简单的替换字典，它将被迭代以清理字符串。例如，清理地址，哪个是更好的做法（性能、样式等）？

一个）

```
dictionary = {'North': 'N', 'South': 'S', 'East': 'E', 'West': 'W'}
address = 'North South East West'
for key in dictionary:
    address = address.replace(key, dictionary[key]) 
```

或 b)

```
tuple_list = [('North', 'N'), ('South', 'S'), ('East', 'E'), ('West', 'W')]
address = 'North South East West'
for tuple in tuple_list:
    address = address.replace(tuple[0], tuple[1]) 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:02:14.653

两者之间不会有太大的速度差异。您正在迭代两个序列，只有这些结构的确切数据类型不同。

通过使用以下方法，您的`dictionary`循环可能会更加高效：`.iteritems()`

```
dictionary = {'North': 'N', 'South': 'S', 'East': 'E', 'West': 'W'}
address = 'North South East West'
for key, value in dictionary.iteritems():
    address = address.replace(key, value) 
```

由于`.iteritems()`为您提供了可迭代的`(key, value)`对，因此此方法与使用元组完全相同。

使用[`timeit`module](http://docs.python.org/2/library/timeit.html)，您可以看到两种方法之间没有真正的区别：

```
>>> import timeit
>>> def dictionary(address, d={'North': 'N', 'South': 'S', 'East': 'E', 'West': 'W'}):
...     for s, repl in d.iteritems():
...         address = address.replace(s, repl)
... 
>>> def tuples(address, t=[('North', 'N'), ('South', 'S'), ('East', 'E'), ('West', 'W')]):
...     for s, repl in t:
...         address = address.replace(s, repl)
... 
>>> timeit.timeit("test('North South East West')", 'from __main__ import dictionary as test')
2.5873939990997314
>>> timeit.timeit("test('North South East West')", 'from __main__ import tuples as test')
2.5879111289978027 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T17:05:00.990

对于仅对其进行迭代，您将使用一个列表。

要查找键，请使用字典。

在第一种情况下不一定慢，只是它不是 dict 的用途。

如果您使用 dict，按键查找将快得多（比尝试线性查找元素），因此如果您打算为此目的使用集合，请使用一个。否则不要。

在您的情况下，您没有在字典中找到“北”“南”“东”和“西”，而是在做相反的事情 - 在“地址”字符串中找到它们。

您最快的算法可能是标记（拆分）您的地址字符串，遍历每个元素并在字典中查找以查看是否应该替换它，然后重新加入。

它不仅会更有效率，而且会避免乱七八糟的替换，除非你当然想要这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:05:14.637

```
%%timeit
dictionary = {'North': 'N', 'South': 'S', 'East': 'E', 'West': 'W'}
address = 'North South East West'
for key in dictionary:
    address = address.replace(key, dictionary[key])
1000000 loops, best of 3: 1.84 us per loop

%%timeit
tuple_list = [('North', 'N'), ('South', 'S'), ('East', 'E'), ('West', 'W')]
address = 'North South East West'
for tuple in tuple_list:
    address = address.replace(tuple[0], tuple[1])
100000 loops, best of 3: 1.9 us per loop 
```

就像 Martijn 所说，实际上没有区别。

# php - 调用 php 脚本结束时 PHP 后台作业停止

> ID：13708032
> 
> 赞同：2
> 
> 时间：2012-12-04T17:00:18.677
> 
> 标签：php, linux, scp

在 LAMP 盒子上，我通过 PHP 的 exec 函数循环调用 SCP 复制函数，将多个图像复制到远程服务器：

```
exec("scp ".$this->GetUploadPath(true)." ".$currentServer->Scp.":".$this->GetServerPath($currentServer, true)); 
```

结果：工作正常，但 PHP 脚本需要几秒钟才能完成。

但是我不希望 PHP 脚本等待 SCP 作业完成，所以我尝试了以下方法之一：

```
exec("nohup scp ".$this->GetUploadPath(true)." ".$currentServer->Scp.":".$this->GetServerPath($currentServer, true) . " 1>/dev/null/ 2>&1 &"); 
```

结果：PHP 脚本要快得多，但 SCP 尚未完成。图像不会复制到远程服务器。

```
exec("nohup scp ".$this->GetUploadPath(true)." ".$currentServer->Scp.":".$this->GetServerPath($currentServer, true) . " &"); 
```

结果：图像被复制，但是 php 脚本运行时间没有改善，所以我猜 php 脚本仍然等待 SCP 例程完成，尽管我“后台”调用。

任何想法如何实现它，PHP脚本不等待，但SCP过程已经完成？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:41:20.743

Exceeding the maximum simultaneous connection to the server could be the problem. So limit the simultaneous connections or simply upload it one by one. If waiting before the browser is your problem, you could add the following to your php script

```
ignore_user_abort(true);
set_time_limit(0); 
```

and upload using looping the following

```
exec("scp ".$this->GetUploadPath(true)." ".$currentServer->Scp.":".$this->GetServerPath($currentServer, true) . " 1>/dev/null/ 2>&1"); 
```

after triggering the php script from your browser, you could even close browser, the above piece of code will do the magic for you.

# sql-server - SQL 服务器递归查询错误。在语句完成之前，最大递归 100 已用完

> ID：13708035
> 
> 赞同：1
> 
> 时间：2012-12-04T17:00:33.573
> 
> 标签：sql-server, recursion, recursive-query

我有一个递归查询，当我运行它时会返回错误；在其他数据库中（有更多数据）我没有问题。在我的情况下，此查询返回 2 个列（ID_PARENT 和 ID_CHILD）进行递归，因为我的树可以有多个级别，我只想有“直接”父级。

注意：我尝试将 OPTION (MAXRECURSION 0) 放在查询的末尾，但没有运气。以下查询只是整个查询的一部分，我尝试仅将 OPTION 放在具有连续运行查询的“大查询”的末尾，但没有显示错误。

SQL Server 中出现错误：

> “语句终止。在语句完成之前，最大递归 100 已用完”

查询如下：

```
WITH q
     AS (SELECT ID_ITEM,
                ID_ITEM AS ID_ITEM_ANCESTOR
         FROM   ITEMS_TABLE i
                JOIN ITEMS_TYPES_TABLE itt
                  ON itt.ID_ITEM_TYPE = i.ID_ITEM_TYPE
         UNION ALL
         SELECT i.ID_ITEM,
                q.ID_ITEM_ANCESTOR
         FROM   q
                JOIN ITEMS_TABLE i
                  ON i.ID_ITEM_PADRE = q.ID_ITEM
                JOIN ITEMS_TYPES_TABLE itt
                  ON itt.ID_ITEM_TYPE = i.ID_ITEM_TYPE)
SELECT ID_ITEM          AS ID_CHILD,
       ID_ITEM_ANCESTOR AS ID_PARENT
FROM   q 
```

我需要一个建议来重新编写此查询以避免递归错误并查看很少的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:26:25.237

好的，经过一番调查，由于某种原因，在 2 条记录中存在循环引用：ITEM 1 是 ITEM 2 的子项，ITEM 2 是 ITEM 1 的子项。

手动更改值，查询运行完美。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T06:26:30.003

```
WITH    q AS ( SELECT   ID_ITEM ,
                        ID_ITEM AS ID_ITEM_ANCESTOR
               FROM     ITEMS_TABLE i
                        JOIN ITEMS_TYPES_TABLE itt ON itt.ID_ITEM_TYPE = i.ID_ITEM_TYPE
               UNION ALL
               SELECT   i.ID_ITEM ,
                        q.ID_ITEM_ANCESTOR
               FROM     q
                        JOIN ITEMS_TABLE i ON i.ID_ITEM_PADRE = q.ID_ITEM
                        JOIN ITEMS_TYPES_TABLE itt ON itt.ID_ITEM_TYPE = i.ID_ITEM_TYPE
             )
    SELECT  ID_ITEM AS ID_CHILD ,
            ID_ITEM_ANCESTOR AS ID_PARENT
    FROM    q
OPTION  ( MAXRECURSION 500 ) 
```

# objective-c - 了解弱参考与强参考

> ID：13708040
> 
> 赞同：1
> 
> 时间：2012-12-04T17:00:47.223
> 
> 标签：objective-c, ios, reference

> **可能重复：**
> [objective-c 中强弱的区别](https://stackoverflow.com/questions/11013587/differences-between-strong-and-weak-in-objective-c)

假设我有一个显示模型对象数据的表格视图。如果我在我的 UITableViewController 中声明...

```
@property (strong, nonatomic) NSArray *modelObject; 
```

如果我将此数组传递给 segue 中的另一个视图控制器属性，是否应该`weak`在我的目标视图控制器中声明它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:25:51.440

在这种特定情况下，任何一个都应该工作。

`strong`如果该属性可以保持`strong`对引用对象的循环引用，则会出现问题。我想这是一种可能性，但是假设控制器不被视为数据，这不太可能。由于您的初始控制器将在目标控制器的生命周期内保留并保持`strong`引用，因此在目标中拥有一个`weak`属性也应该没问题。

我可能会选择的一个原因`strong`是，随着应用程序的发展，可以防止出现问题。如果目的地有可能有一天会`modelObject`从其他来源收到它，你会记住提供者必须有一个强有力的参考吗？

# c - linux上的TCP发送语义

> ID：13708048
> 
> 赞同：0
> 
> 时间：2012-12-04T17:01:02.923
> 
> 标签：c, linux, tcp

我对 linux 上的 send() 的理解是，如果发送进程的数据可以成功复制到内核缓冲区中，则 send() 返回。然后应用程序可以自由地继续前进。

1.  如果这是真的，并且说 TCP 无法传递该数据包，那么 TCP 如何报告错误？

2.  如果在多次 send()（开始时 Rwnd 很大）之后收到错误，应用程序如何知道哪个特定的 send() 失败，或者换句话说，哪个消息未能到达？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:04:35.990

> 如果这是真的，并且说 TCP 无法传递该数据包，那么 TCP 如何报告错误？

TCP 将静默重试/重新发送，直到连接结束或异常终止。

如果您想知道是否已收到，则需要接收应用程序发送确认（应用程序级消息）。

* * *

**编辑：**

TCP 协议接收一个端到端的 ACK ......但是那个 ACK​​ 被 TCP 堆栈吞没了：我不认为它是通过普通的“套接字”API 暴露给应用程序的。

数据包嗅探器以使其能够看到 ACK 的级别连接到网络/TCP 堆栈：例如，请参阅[如何验证 TCP 数据包已在 C# 中收到 ACK 的答案？](https://stackoverflow.com/q/1863101/49942)...我不知道 Linux 的等价物是什么，但必须有一个。

请注意[这个答案](https://stackoverflow.com/a/1863141/49942)，它警告说，即使远程 TCP 堆栈接收到消息，也不能保证接收应用程序已处理（即从堆栈中检索）它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:04:07.100

*您将收到另一个 send 或 recv最终*报告的错误。*最终*——默认情况下，TCP 可能需要很长时间才能确定连接中存在问题。您可能会首先选择“成功”发送，这取决于错误情况。您可能只能通过发送缓冲区已满的抱怨来发现事情已经出错了。

# ruby-on-rails-3 - Rails 3 重写设计邮件程序

> ID：13708052
> 
> 赞同：9
> 
> 时间：2012-12-04T17:01:17.973
> 
> 标签：ruby-on-rails-3, devise, actionmailer, mailchimp

我正在开发一个与 Mandrill（MailChimp 的事务性电子邮件服务）紧密集成的应用程序，我正在尝试覆盖 Devise Mailer，但由于某种原因，当我向 Mandrill 发送 API 调用时，我收到了他们的电子邮件，但也设计了给我发一封电子邮件（空白）。

这是我的`DeviseMailer`

```
class MyDeviseMailer < Devise::Mailer
  def reset_password_instructions(record)
    mandrill = Mandrill::API.new("#{MandrillConfig.api_key}")
    mandrill.messages 'send-template',
            { 
              :template_name => 'Forgot Password', 
              :template_content => "",
              :message => {
                :subject => "Forgot Password",
                :from_email => "test@test123.com",
                :from_name => "Company Support",
                :to => [
                  {
                    :email => record.email
                  }
                ],
                :global_merge_vars => [
                  {
                    :name => "FIRST_NAME",
                    :content => record.first_name
                  },
                  {
                    :name => "FORGOT_PASSWORD_URL",
                    :content => "<a href='#{edit_user_password_url(:reset_password_token => record.reset_password_token)}'>Change My Password</a>"
                  }
                ]
              }
            }
      #We need to call super because Devise doesn't think we have sent any mail 
      super
  end
end 
```

`super`我在这里找到的电话：http://qnundrum.com/answer.php?q= [254917](http://qnundrum.com/answer.php?q=254917)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T20:01:19.373

我遇到了类似的问题。

您是否更新了设计初始化文件 (devise.rb) 以指定以下内容：

```
config.mailer = "MyDeviseMailer" 
```

您还需要将views/devise/mailer 中的所有文件移动到views/mydevisemailer。

我也会重新启动你的服务器。

# git - 提交时是否可以更改 Git 标准消息？

> ID：13708054
> 
> 赞同：1
> 
> 时间：2012-12-04T17:01:22.967
> 
> 标签：git, githooks, git-commit

是否可以更改零件：

```
# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# On branch master
# Changes to be committed: 
```

说：

```
# Staged: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T18:59:23.543

是的，使用`prepare-commit-msg`钩子。这是一个脚本，`.git/hooks/`在 Git 生成提交消息和在编辑器中打开提交消息之间运行。

作为一个简单的示例，将以下文本复制到一个名为`prepare-commit-msg`in的新文件中`.git/hooks/`。

```
#!/bin/sh
sed -i '0,/# Changes to be committed:/c# Staged:' "$1" 
```

如果您发现它不能立即工作，请检查它的可执行性：运行`chmod +x .git/hooks/prepare-commit-msg`。

（该脚本是一个`sed`单行代码，用文本“# Staged:”替换每一行，包括“要提交的更改”行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:38:51.720

以一种简单的方式，只是那部分，不。

但是您可以使用 commit-msg 挂钩来修改提交消息。

# php - 使用自定义 FormHelper (cakephp 1.3) 在 div 类中显式设置“必需”

> ID：13708057
> 
> 赞同：0
> 
> 时间：2012-12-04T17:01:32.717
> 
> 标签：php, cakephp, cakephp-1.3

我正在使用 cakephp 1.3，并且希望将表单输入明确设置为“必需”，而不是依赖模型验证。表单输入示例：

```
<div class="input text required">
  <label for="ClaimClaimantFirstName">First Name</label>
  <input name="data[ClaimClaimant][first_name]" type="text" id="ClaimClaimantFirstName" /> 
</div> 
```

我还想维护 FormHelper 命名，而不是使用自定义表单助手名称。例子：

```
$this->Form->input(...) 
```

我想出的解决方案是

1.  实现 MyFormHelper，从 FormHelper 扩展并覆盖输入法。具体来说，在 FormHelper 的第 804 行附近，替换

    ```
    if (
      isset($this->fieldset[$modelKey]) 
      && in_array($fieldKey, $this->fieldset[$modelKey]['validates'])
    ) {
      $divOptions = $this->addClass($divOptions, 'required');
    } 
    ```

    和

    ```
    if (isset($options['required'])) {
      if ($options['required'] === true) {
        $divOptions = $this->addClass($divOptions, 'required');
      } elseif ($options['required'] === false) {
        // do not add class 'required'
      }
    } elseif (
      isset($this->fieldset[$modelKey]) 
      && in_array($fieldKey, $this->fieldset[$modelKey]['validates'])
    ) {
      $divOptions = $this->addClass($divOptions, 'required');
    } 
    ```

    这确保了在我们依赖模型验证之前存在`$options['required']`优先。

2.  使用 Joe Beeson 的[模拟插件](https://github.com/joebeeson/analogue)，将 MyForm 别名为 Form：

    ```
    public $helpers = array(
      'Analogue.Analogue' => array(
        array(
          'helper' => 'MyForm',
          'rename' => 'Form'
    ) ) ) 
    ```

3.  然后，根据需要指定表单输入，如下所示：

    ```
    $this->Form->Input(
      'SomeModel.SomeField',
      array('required' => true)
    ) 
    ```

还有比这更好的方法，或者这个解决方案的潜在问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T21:09:01.883

原始问题指定了 1.3，但这里是为那些在 2.0 中寻找方法的人提供的更新

对于 Cake 2.0 或更高版本，您可以`'required'=>true`在输入选项数组中指定密钥对值，以对元素启用 html5 浏览器验证。

[http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#creating-form-elements](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#creating-form-elements)

# iphone - MKPolygon ontouch detailview

> ID：13708059
> 
> 赞同：3
> 
> 时间：2012-12-04T17:01:38.137
> 
> 标签：iphone, objective-c, ios, uigesturerecognizer, mkoverlay

我已经根据坐标创建了一个`MKMapView`with s 。`MKPolygon`地图上有多个多边形（[在此处](http://azimuth.mlgw.org/OutageSummary.php)查看我作为应用程序重新创建的示例）。

我想要做的是当用户触摸多边形时，它会打开一个包含位置信息的弹出视图。此信息当前存储在带有坐标的 plist 文件中。

到目前为止，我能够获得触摸事件并打印到多边形被触摸的日志。

**我的问题是：**
一旦用户点击 pin，就 可以`MKPolygonView`像`MKAnnotationView`where 一样使用更多关于当前位置的信息？

我想对多边形视图做同样的事情。触摸时，用户将看到有关存储在 plist 中的位置的更多信息。如果可能的话，让它发挥作用的最佳方法是什么？

我当前的代码如下。

```
#import "outagemapViewController.h"
#import "MyAnnotation.h"
#import "WildcardGestureRecognizer.h"
#define METERS_PER_MILE 46309.344
@interface outagemapViewController ()

@end

@implementation outagemapViewController
- (void)viewDidLoad {

outages = [[NSArray alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"outages"ofType:@"plist"]];

for (NSDictionary *coloredAreas in outages) {
   coordinateData = coloredAreas[@"coords"];
test = coloredAreas[@"outages"];

    NSLog(@"test %@", test);
    coordsLen = [coordinateData count];
      NSLog(@"coords %d", coordsLen);
    CLLocationCoordinate2D coords[coordsLen];
    for (i=0; i < coordsLen; i++) {
        NSString *lat = coordinateData[i];
        NSArray *latt = [lat componentsSeparatedByString:@","];
        double latitude = [[latt objectAtIndex:0] doubleValue];
        double longitude = [[latt objectAtIndex:1] doubleValue];
       coords[i] = CLLocationCoordinate2DMake(latitude, longitude);

    }

 MKPolygon* poly2 = [MKPolygon polygonWithCoordinates:coords count:coordsLen];
 poly2.title=@"test";
 [self.mapView addOverlay:poly2];
 }
 }
 - (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay {
{
    if ([overlay isKindOfClass:[MKPolygon class]])
    {

        MKPolygonView*    aView = [[MKPolygonView alloc] initWithPolygon:(MKPolygon*)overlay];

        int numbers = [test intValue];

        if(numbers >= 10){
            aView.fillColor = [[UIColor greenColor] colorWithAlphaComponent:0.6];
            aView.strokeColor = [[UIColor greenColor] colorWithAlphaComponent:1.0];
            aView.lineWidth = 3;
        }else if(numbers < 10){
            aView.fillColor = [[UIColor yellowColor] colorWithAlphaComponent:0.6];
            aView.strokeColor = [[UIColor yellowColor] colorWithAlphaComponent:1.0];
            aView.lineWidth = 3;

                    }

        return aView;
    }

    return nil;
}
 }

-(void)viewWillAppear:(BOOL)animated{
CLLocationCoordinate2D zoomLocation;
zoomLocation.latitude = 35.20418;
zoomLocation.longitude = -89.86862;

MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation,         0.5*METERS_PER_MILE, 0.5*METERS_PER_MILE);

[_mapView setRegion:viewRegion animated:YES];

WildcardGestureRecognizer * tapInterceptor = [[WildcardGestureRecognizer alloc] init];
tapInterceptor.touchesBeganCallback = ^(NSSet * touches, UIEvent * event) {
    UITouch *touch = [touches anyObject];
    CGPoint point = [touch locationInView:self.mapView];

    CLLocationCoordinate2D coord = [self.mapView convertPoint:point toCoordinateFromView:self.mapView];
    MKMapPoint mapPoint = MKMapPointForCoordinate(coord);
    for (id overlay in self.mapView.overlays)
    {
        if ([overlay isKindOfClass:[MKPolygon class]])
        {
            MKPolygon *poly = (MKPolygon*) overlay;
            id view = [self.mapView viewForOverlay:poly];
            if ([view isKindOfClass:[MKPolygonView class]])
            {
                MKPolygonView *polyView = (MKPolygonView*) view;
                CGPoint polygonViewPoint = [polyView pointForMapPoint:mapPoint];
                BOOL mapCoordinateIsInPolygon = CGPathContainsPoint(polyView.path, NULL, polygonViewPoint, NO);
                if (mapCoordinateIsInPolygon) {
                   // debug(@"hit!");
                    NSLog(@"hit");
                } else {
                     NSLog(@"miss");
                }
            }
        }
    }

};
[self.mapView addGestureRecognizer:tapInterceptor];
}

- (void)didReceiveMemoryWarning
{
 [super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:04:01.400

不幸的是，对于叠加层，没有像注释那样的内置触摸检测和标注视图。

您必须像已经在做的那样手动进行触摸检测（看起来应该可以工作）。
（更不幸的是，直接将手势识别器添加到覆盖视图中是行不通的——您必须将其添加到整个地图中，然后检查触摸点是否在任何覆盖中。）

对于覆盖标注视图，一旦您检测到覆盖上的触摸，您可以创建自定义`UIView`并执行`addSubview`. 我建议将其添加到地图而不是覆盖视图中，您也许可以使用`CGPoint point`您已经在计算的来确定自定义标注视图的框架。

您可能还希望保留对覆盖标注视图的 ivar/属性引用，以便在用户点击另一个覆盖层而另一个覆盖层的标注已经显示时可以轻松删除和重新添加它。

另一个可能更容易的选项是创建自定义`UIViewController`并呈现或推送它。显示它的细节取决于您是否使用导航控制器和/或情节提要。

如果您的应用程序也是为 iPad 构建的，您还可以使用`UIPopoverController`.
请参阅[如何将 UIPopoverView 显示为地图视图的注释？(iPad)](https://stackoverflow.com/questions/5582564/how-do-i-display-a-uipopoverview-as-a-annotation-to-the-map-view-ipad/5583505#5583505)用于代码示例（它带有注释，但您应该能够对其进行调整以适应覆盖）。

* * *

一旦您确定了哪个覆盖被点击，您需要显示原始数据源（`outages`数组）中的相关数据。现在，创建并添加了叠加层，但没有对原始数据对象（`outages`数组中的中断字典）的引用。

（`MKPolygon`添加自定义属性的子类化[存在问题和解决方法](https://stackoverflow.com/questions/5286961/objective-c-sub-classing-basics-how-to-add-custom-property)，创建完全自定义的`MKOverlay`类会引入许多其他额外的工作。）

对于您当前的数据源结构，一个简单、快速（并且有点粗略）的选项是将覆盖的`title`属性设置为`outages`与覆盖关联的中断对象的数组中的索引。由于`title`属性是 an`NSString`并且数组索引是整数，我们将其转换为字符串：

```
NSUInteger outageIndex = [outages indexOfObject:coloredAreas];
poly2.title = [NSString stringWithFormat:@"%d", outageIndex];
[self.mapView addOverlay:poly2]; 
```

在`viewForOverlay`中，您似乎正在使用`test`（来自中断对象）来确定多边形的颜色。外部声明/设置`test`变量的值不一定与`overlay`当前调用的委托方法同步（映射可以`viewForOverlay`为同一个叠加层调用多次，不一定按照添加它们的顺序）。您必须根据`overlay`参数的某些属性来检索中断对象。由于我们将覆盖的`title`属性设置为中断的索引：

```
//int numbers = [test intValue];  <-- remove this line

int outageIndex = [overlay.title intValue];
NSDictionary *outageDict = [outages objectAtIndex:outageIndex];
id outageNumbersObject = outageDict[@"outages"]; 
//replace id above with actual type
//can't tell from code in question whether it's NSString or NSNumber 
int numbers = [outageNumbersObject intValue];

//use "numbers" to set polygon color... 
```

最后，当点击覆盖时，您可以使用与中相同的方法`viewForOverlay`来获取中断对象：

```
if (mapCoordinateIsInPolygon) {
    int outageIndex = [overlay.title intValue];
    NSDictionary *outageDict = [outages objectAtIndex:outageIndex];
    NSLog(@"hit, outageDict = %@", outageDict);
    //show view with info from outageDict...
} 
```

# php - 维基百科卷曲请求错误

> ID：13708062
> 
> 赞同：2
> 
> 时间：2012-12-04T17:01:42.390
> 
> 标签：php, curl, wikipedia-api

我正在尝试使用 Curl 从 Wikipedia 获取页面摘要。我的代码是

```
<?php

$title = <input from user>;

$url = 'http://en.wikipedia.org/w/api.php?action=query&titles='.$title.'&format=xml&prop=revisions&rvprop=content&redirects';
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($curl, CURLOPT_USERAGENT, 'testing wikipedia services');
$result = curl_exec($curl);
print $result;

//$content = $c->query->pages->page->revisions->rev;
//print $content;
?> 
```

我最初想测试代码以查看我的代码是否返回整个页面。但我收到一个错误，上面写着

> 请求：[未知方法] [http://en.wikipedia.org:80/w/api.php?action=query&titles=US](http://en.wikipedia.org:80/w/api.php?action=query&titles=US) Environmental Protection Agency&format=xml&prop=revisions&rvprop=content&redirects, from 161.80.8.53 via cp1005.eqiad.wmnet ( squid/2.7.STABLE9) 到 [unknown host] ([unknown]) 错误：ERR_INVALID_URL, errno [No Error] 2012 年 12 月 4 日星期二 16:55:52 GMT

该 URL 有效，但仍会产生未知方法错误！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:10:56.217

您需要`urlencode($title)`在您的网址中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:07:57.223

您忘记对 $title 变量进行编码。例子 ：

```
str_replace(' ', '_', $title); 
```

# javascript - 跨浏览器确定背景颜色或数字格式的颜色

> ID：13708069
> 
> 赞同：2
> 
> 时间：2012-12-04T17:02:09.347
> 
> 标签：javascript, jquery

我已经通过一些类似问题的回答。我只想澄清我是否理解正确。我的目的是做一些颜色计算。

我一直在火狐工作：

```
var bkg_Colour = $("#test_Box_1").css("background-color");  // is red
var fgd_Colour = $("#test_Box_2").css("background-color");  // is blue 
```

分别返回 rgb(255, 0, 0) 和 rgb(0, 0, 255)。

这很好，我已经通过拆分元组并比较它们来适当地计算前景和背景之间的距离。

**但：**

在 Internet Explorer 中，同样的代码返回“红色”和“蓝色”，当然计算会失败。

从前面的答案看来，如果使用 $(...).css，则似乎没有一致的方法可以以数字格式恢复颜色（无论是背景颜色还是颜色）。而且似乎必须跳过各种箍才能覆盖所有基地。

那么有没有办法在不使用 $(...).css 的情况下做到这一点？

**编辑**

[当我在我的脚本中应用此处](http://api.jquery.com/css/)给出的示例代码并在 FF 中运行它时，只需跟进这一点，当我 在 IE 中运行它时，我会得到 rgb(255,0,0)，我会在结果中看到“红色”这个词。**但是** 当我在 IE 中运行上面的链接时，结果是 rgb(xxx,xx,xx) 我因此很困惑。是否有服务器设置或导致 IE 在我正在服务的页面上以这种方式运行的东西？

**编辑**

据我目前在 IE 中可以看出，它会报告 css 中指定的颜色，即“绿色”“蓝色”“红色”或 #808080 等，而在 ff 中它总是将其报告为 rgb 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:14:39.540

我认为您将不得不求助于颜色名称字典。这类似于这个问题：[Javascript function to convert color names to hex codes](https://stackoverflow.com/questions/1573053/javascript-function-to-convert-color-names-to-hex-codes) at least in concept.

# flash - AIR 从 StageWebView 获取 LocationChangeEvent.LOCATION_CHANGING 的哈希值

> ID：13708074
> 
> 赞同：0
> 
> 时间：2012-12-04T17:02:22.750
> 
> 标签：flash, apache-flex, air, stagewebview

我正在构建一个基于 HTML 的 AIR 应用程序，为了调用 ActionScript 方法，我在 HTML 应用程序的 URL 上附加了带有特定模式 (#AIRBRIDGE_methodName_arguments) 的哈希标记。使用 window.location = '#AIRBRIDGE_methodName_arguments'; 在 HTML 应用程序的 JavaScript 中调用 AIR LocationChangeEvent.LOCATION_CHANGING 事件，但是当我尝试访问 StageWebView.location 值时，不会返回哈希值。

有没有人有这方面的经验？这是动作脚本代码：

```
public function LoadHtmlPageByName(pageName:String, stage:Stage):void
    {
        stage.scaleMode = StageScaleMode.EXACT_FIT;

        webView = new StageWebView(); 
        webView.stage = stage;
        webView.addEventListener(LocationChangeEvent.LOCATION_CHANGING, onLocationChange);
        webView.viewPort = new Rectangle(0, 0, stage.stageWidth, stage.stageHeight);

        var htmlPath:String = new File(new File("app:/assets/html/" +  pageName + "#something").nativePath).url;
        webView.loadURL(htmlPath);
    }

    public function onLocationChange(event:LocationChangeEvent):void
    {
        trace("you are now at: ", webView.location);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T07:47:36.900

而不是#（哈希锚定），对window.location使用未知协议。

示例：window.location="unknown:/and_add_here_your_method_info"。

Adobe Air 可以通过 LocationChangeEvent.LOCATION_CHANGE 或 LOCATION_CHANGING 捕获它。

iOS 的注意事项：还要听 EventError.Error。在我使用 Adob​​e Air 3.4 的情况下，window.location 的值被传递给 EventError.text。所以也检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:13:48.997

我猜如果您的页面没有重新加载，“位置”将不会改变。您可以尝试更改和阅读页面的标题，但我不确定如果页面没有重新加载它会改变。

# php - PHP 数组，添加和移动当前数组索引

> ID：13708078
> 
> 赞同：0
> 
> 时间：2012-12-04T17:02:33.007
> 
> 标签：php, arrays

我懂了：

```
$arr = array();
$arr[0] = "Test";
$arr[1] = "Bla";
$arr[2] = "Boo"; 
```

现在我想将“SO”添加到这个数组中，但是在数组的开头，[0] 索引。但是在不删除当前内容的情况下，它应该移动其余内容，因此“Test”变为 [1]，Bla 为 [2]，Boo 为 [3]。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:04:19.390

我相信你想利用[array_unshift()](http://www.php.net/array_unshift)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:04:42.730

查看数组操作函数。`array_unshift()`应该做你想做的。其他类似的函数是 array_shift()、array_pop() 和 array_push()

# reporting-services - SSRS 如何防止向下钻取显示在 Web 服务 URL 中

> ID：13708082
> 
> 赞同：0
> 
> 时间：2012-12-04T17:02:40.747
> 
> 标签：reporting-services, ssrs-2012

我有一个看起来很简单的问题。我们使用 SSRS（SQL Server Reporting Services）2012 构建了一个包含 3 个报表的项目。一个主报表和 2 个从主项目调用的向下钻取报表。像这样的东西：

*   主要报告
*   详情 1
*   详情 2

当使用主报告中的必要参数调用详细信息 1 或详细信息 2 时，一切正常。问题是当我转到发布报告的 Web 服务 URL 时，用户会看到 2 个在自己运行时不相关的向下钻取报告。我需要尝试做的是从 Web 服务 URL 中隐藏详细信息 1 和详细信息 2，以便它们不会出现。我不知道如何/在哪里做到这一点。

任何建议，将不胜感激。

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:20:57.930

Web 服务 URL 也称为 Reporting Services 接口，通常具有类似于 的地址`http://servername/reportserver/`。此界面不适用于用户访问。您无法在此界面中隐藏报告。

报告管理器（默认 URL 为`http://server/reports/`）旨在供用户访问。在报表、数据源和文件夹的属性中，您会找到一个标有“在平铺视图中隐藏”的复选框。这是尽可能接近您所描述的内容，而无需构建自己的前端。

# twitter-bootstrap - 如何使用 twitter bootstrap 创建“选择语言下拉菜单”？

> ID：13708083
> 
> 赞同：2
> 
> 时间：2012-12-04T17:02:40.933
> 
> 标签：twitter-bootstrap

我正在做一个项目，我使用优秀的 twitter bootstrap 作为基础。现在我想创建一个菜单项，访问者可以在其中选择站点应显示的语言。这并不像最初预期的那么容易，我想知道我如何执行以下操作。

1.  使下拉菜单项向右浮动。
2.  在各个 li 项目上包含一个小标志。
3.  使激活的语言显示在菜单上，这意味着取决于哪个 li 项目处于活动状态，它应该在菜单中。

在菜单中。

感谢所有帮助。

/斯坦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:57:36.407

1.  要使下拉菜单向右浮动，请添加 [ul class="nav pull-right"]，这适用于所有菜单项。在下拉列表之前添加它。
2.  我找到了标志图标和有关如何在 Twitter Bootstrap 中集成新的 css sprite 图标的教程。它以比我更全面的方式解释，所以我建议点击链接。

[http://favbulous.com/post/1006/create-custom-icons-for-twitter-bootstrap-easily](http://favbulous.com/post/1006/create-custom-icons-for-twitter-bootstrap-easily)

3\. 我还不知道如何使活动链接显示在菜单栏的顶部，但我决定解决这个问题，因为我必须为所有不同的语言创建单独的站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:06:18.130

您应该知道社区就是互相帮助，但您不会找到任何人为您做这项工作。如果您正在寻找它，请尝试 Elance。否则，搜索谷歌并尝试它并发布一些代码。从那里你会发现你会更快地找到解决方案。

# javascript - CSV 文件编辑器

> ID：13708084
> 
> 赞同：0
> 
> 时间：2012-12-04T17:02:45.353
> 
> 标签：javascript, html, csv

我需要创建一个 CSV 文件编辑器。用户应该能够上传 CSV 文件，并且数据应该自动加载到文本区域中。我已经看到很多 CSV 数据从文本区域传输到例如表格的示例，但我找不到可以帮助我实际上传文件、将数据读取到 2D 数组的东西，然后将其放置在文本区域中。

我可以毫无问题地将数据从文本区域传输到可编辑的表格中。

所以问题是：如何上传文件，从中读取数据（并保持 CSV 的格式）并在文本区域元素中显示正确的格式？

我目前不关心检查 CSV 是否正确等。我只需要知道如何处理数据。抱歉，我的 Ajax 知识非常有限。任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:10:23.627

上传它与任何其他表单在 HTML 中的工作方式没有什么不同。

您可以使用文件输入来选择一个文件，然后将其作为表单数据的一部分上传（它是自动的），或者为用户提供一个文本区域来粘贴。提交表单会将数据“上传”到服务器。您不需要 AJAX 来执行这些操作，但它是一种选择。

您如何处理服务器上的数据取决于您自己。

# gwt - GWT：TabPanelLayoutPanel 隐藏或显示 Tabbaritems

> ID：13708085
> 
> 赞同：1
> 
> 时间：2012-12-04T17:02:55.430
> 
> 标签：gwt, gwt2

有什么方法可以在 TablayoutPanel 中隐藏/显示 TabBar 项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:00:14.103

setVisible 只会将样式属性***display***设置为***none***。所以你可以像这样创建自己的 API，

```
 public void hideTabItem ( Widget tabItem, boolean hideFl )
 {
     hideTabItem ( tabItem.getElement(), hideFl );
                        OR
     tabItem.setVisible ( hideFl );
 }

private static native void hideTabItem (Element elem, boolean visible) 
/*-{
     elem.style.display = visible ? '' : 'none';
     elem.setAttribute('aria-hidden', String(!visible));
 }-*/; 
```

**注意：**要了解有关 aria-hidden 属性的更多信息，请访问链接[Aria-Hidden-Property](http://www.paciellogroup.com/blog/2012/05/html5-accessibility-chops-hidden-and-aria-hidden/)

# c# - ASP.NET MVC - 在内存中存储数据

> ID：13708086
> 
> 赞同：-1
> 
> 时间：2012-12-04T17:02:57.150
> 
> 标签：c#, asp.net-mvc

我在 .txt 文件中有一些数据，我想在 Application_Start() 期间将这些数据加载到 RAM 内存中，这样我就可以在我的 asp.net mvc 应用程序上全局使用这些数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:38:18.227

如果数据来自客户端，则使用 Session

```
Session["value"] = valueForCurrentUser; 
```

如果数据是全局的并且对于每个用户都是相同的，那么使用缓存。

```
Cache.Add("value", valueForEveryUser, null, DateTime.Now.AddSeconds(60), Cache.NoSlidingExpiration, CacheItemPriority.High, onRemove); 
```

来自：http: [//msdn.microsoft.com/en-us/library/system.web.caching.cache.add.aspx](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.add.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:14:08.603

将文本存储在 Session 中，以便在用户关闭浏览器后将其处理掉`Session["MyText"] = txtfile.ToString();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T17:38:50.350

那比我认为的会话更好，你可以在所有应用程序上使用吗？

```
 public class WebApiApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        HttpContext.Current.Application["PerfilLevel"] = "0";

        AreaRegistration.RegisterAllAreas(); 
```

在 DAL 上

```
int teste = Convert.ToInt32(HttpContext.Current.Application["PerfilLevel"]); 
```

在控制器上

```
int teste = Convert.ToInt32(HttpContext.Application["PerfilLevel"]); 
```

注意：相同的值...

# android - 无法让 admob 工作：configChanges 错误

> ID：13708088
> 
> 赞同：0
> 
> 时间：2012-12-04T17:03:02.437
> 
> 标签：android, admob

我知道有一些关于它的话题，但我开始这个话题的原因是我似乎无法通过给出的解决方案来解决它。我想将 admob 添加到我的项目中。我下载了 GoogleAdMobAdsSdk-6.2.1 并将其添加到我的项目中。当我启动它说你必须有`AdActivity declared in AndroidManifest with configChanges`。所以找到了解决方案，将其设置为：

```
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" 
```

和

```
<uses-sdk
        android:minSdkVersion="3"
        android:targetSdkVersion="15" /> 
```

洗干净再试试 但是现在我收到一条错误消息，尽管我的 targetSdkVersion 设置为 min 12，但我真的不知道为什么我仍然会收到此错误：

```
String types not allowed (at 'configChanges' with value 'keyboard|keyboardHidden|orientation|
 screenLayout|uiMode|screenSize|smallestScreenSize') 
```

对此有什么想法吗？我看过的可能还有另一个设置错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:01:43.173

右键单击您的项目并转到属性。然后点击安卓标签。选择您的目标至少为 13 岁，您就完成了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:09:22.917

首先，在您的`project.properties`文件中，您需要项目目标，因此

`target=android-15`

然后一旦你完成了，清理你的项目

# html - 如何使一个文本很少的表格在整个屏幕上延伸？

> ID：13708093
> 
> 赞同：1
> 
> 时间：2012-12-04T17:03:14.310
> 
> 标签：html, css

我有一个非常简单的表格，有两列，我希望该表格在页面的整个宽度上延伸，而不管它包含的内容（它几乎不包含任何文本，这就是问题所在）：

```
<div>
  <table>
    <tr>
      <th>Title</th>
      <td>Some text</td>
    </tr>
  </table>
</div> 
```

问题是：这在 Firefox 中不起作用（我什至不敢尝试 Internet Explorer）。

这是CSS：

```
div {
  max-width: 640px;
  float: left;
}

table {
  width: 100%;
}

table th,
table td {
  width: 100%; /* looks strange, but gives both columns equal length in Safari */
} 
```

谁能告诉我我在这里想念什么？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:07:42.753

让你的`th`和`td`50% 宽，而不是 100% -[**演示**](http://jsfiddle.net/Eed4x/)

```
html, body {
    margin: 0;
    padding: 0;
}

table {   
    width: 100%;
    padding: 0;
}

table th, table td {   
    width: 50%;
    border: 1px solid red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:09:08.163

只需将CSS更改为

```
table th,
table td {
  width: 50%;
} 
```

您目前遇到的问题是表格中的每个单元格都试图成为表格宽度的 100%。

[参见例如](http://jsfiddle.net/BC9tX/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:16:30.207

从 100%更改`td`为 50% 是正确的，但您还应该添加`border-collapse`到表格中，因为您在单元格上使用了边框。

`width:80%`也可以正常工作——不需要明确的 px 宽度（至少在 FF、Chrome 中不需要）

[http://jsfiddle.net/UdbRQ/](http://jsfiddle.net/UdbRQ/)

# vb.net - VB.NET - 日期值（“0:0:0”）

> ID：13708094
> 
> 赞同：1
> 
> 时间：2012-12-04T17:03:15.447
> 
> 标签：vb.net

请看下面的变量声明：

```
dim DateTest As Date = DateValue("0:0:0") 
```

DateTest 实际上是用什么初始化的。如果我单步执行代码，则会显示：#12:00:00 AM#。如果我尝试将此输入数据库（日期时间字段），则会引发 SQLTypeException，其中显示：“SqlDateTime 溢出。必须介于 1/1/1753 12:00:00 AM 和 12/31/9999 11:59 之间：晚上 59 点。”

DateValue("0:0:0") 是否使用日期值初始化日期变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:08:03.427

显然它返回[`Date.MinValue`](http://msdn.microsoft.com/en-us/library/system.datetime.minvalue.aspx)的是 的最小可能值`Date`。该常量的值相当于 00:00:00.0000000, 0001 年 1 月 1 日。由于 0001 年小于 1753 年，因此数据库抛出异常。

我不知道`DateValue`，但我会使用 .NET 方法而不是旧的 VB 函数，例如[`Date.Parse`](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx). 例如：

```
Dim DateTest As Date = Date.Parse("2008-05-01") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T17:07:00.900

啊，.net 中 datetime 字段的 min 远小于 Sql Server 中 datetime 字段的 min date。如果您想存储匹配的值，我建议在 sql server 中使用 DateTime2(7) 数据类型。

请参阅以下有关最小日期时间的文章：

tsql 最小日期时间 [http://technet.microsoft.com/en-us/library/ms187819.aspx](http://technet.microsoft.com/en-us/library/ms187819.aspx)

.net 最小日期时间 [http://msdn.microsoft.com/en-us/library/system.datetime.minvalue.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.minvalue.aspx)

tsql datetime2 描述： [http ://technet.microsoft.com/en-us/library/bb677335.aspx](http://technet.microsoft.com/en-us/library/bb677335.aspx)

# html - 背景图像的自动调整大小

> ID：13708101
> 
> 赞同：-1
> 
> 时间：2012-12-04T17:03:48.773
> 
> 标签：html, css, background, background-image

您好，我在使用背景图形时遇到问题。

该网站的结构如下：

header 包含两种颜色，固定高度为 100px。大型机应包含具有可变高度的切片图像。页脚包含一种颜色，并且具有 100 像素的固定高度。

所以我的切片图像的高度为 550 像素，并且在页眉和页脚之间完全适合，以防内容不会更大。

```
<html>
<body>
    <div class="wrapper">

        <div id="header">header</div>

        <div id="mainframe">INSIDE HERE SHOULD BE PLACED THE SLICED IMAGE BUT THE CONTENT IS MORE THAN 550PX</div>

        <div class="push"></div><!--Push for sticky footer-->

</div><!--Wrapper -->

    <div class="footer">footer</div>
</body> 
```

[例子](http://jsfiddle.net/qUzjX/)

现在的问题是，我的内容将大于 550 像素，并且由于颜色褪色，边缘会变硬，您可以看到图像的结束位置。所以我认为可以自动调整切片背景图像的大小会很好。

有没有办法通过使用 css 来实现这一点？

多谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:29:57.497

简短的回答：不幸的是，没有办法使用 CSS 调整背景图像的大小。

通常，使用 background-repeat:repeat-x; 有一个聪明的解决方法。或背景重复：重复-y；属性，并使用仔细切割的背景图像。

如果您有图像示例，我可能会提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:19:12.730

你可以试试

```
background-size:cover; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:07:19.197

尝试

```
background-size: 100% Auto; 
```

# javascript - 使用Javascript将数值插入单元格

> ID：13708103
> 
> 赞同：1
> 
> 时间：2012-12-04T17:03:49.513
> 
> 标签：javascript, html, cell

我的教授有一个独特的任务，它阻止我们使用任何 JQuery 或基本上任何不是 Javascript 或 HTML/CSS 的东西。

我必须在鼠标点击时用一些数值更新单元格中的值。我是 Javascript 新手，基本上这就是我正在使用的。

```
<table id="score">
                <tr>
                    <td> One's </td>
                    <td class="scoring" id="ones" onClick="inputScore()">  </td>
                </tr>
</table> 
```

我想要做的是单击 id=ones 的单元格并使用函数 inputScore() 插入值 50。仅使用 Javascript 来解决此问题的最佳方法是什么？提前致谢。

### 编辑：从评论移植的代码：

```
<script>
  function inputScore() { 
    var x = 50; 
    document.getElementById("ones") = x; 
  } 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:11:15.247

您已使用 正确定位元素`getElementById()`，但您需要设置其`innerHTML`属性以修改单元格的内容。

```
function inputScore() { 
  var x = 50; 
  document.getElementById("ones").innerHTML = x; 
} 
```

你就快到了。在这种情况下，您也可以使用`.innerText`，因为您没有添加任何额外的 HTML 标记，只添加了 number `50`。

如果需要，您可以考虑修改此函数以接受新值作为参数：

```
function inputScore(value) {
  // Set the contents to value
  document.getElementById("ones").innerHTML = parseInt(value, 10);
}
// Called as
inputScore(50) 
```

正如您所了解的，建议使用 MDN 文档作为您的参考点。[这是关于`.innerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML).

# jquery - jQuery：将内联样式顶部位置值放入变量中

> ID：13708105
> 
> 赞同：0
> 
> 时间：2012-12-04T17:03:53.790
> 
> 标签：jquery

style 属性总是难倒我，因为 style 属性中有很多值。无论如何，请看下面我正在尝试调整的标记...

```
<div class="fancybox-wrap fancybox-default fancybox-opened" tabindex="-1" style="width: 798px; height: 542px; position: fixed; top: 82px; left: 20px; display: block; "> 
```

如您所见，我正在尝试调整样式： top: 82px; 价值。我怎样才能得到这个值，以便我可以添加一个值呢？请参阅下面的实例，了解我是如何使用它的。

我`currentTop`想要一些变量如何获取`.fancybox-wrap`div 的当前顶部内联位置？

```
$("a.gallery-thumb").fancybox({
  afterLoad : function() {
    FB.Canvas.getPageInfo(function(info) {
      var scrollPosition = info.scrollTop,
      currentTop = /* how can I get the current top inline position? */ ;
      $('.fancybox-wrap').css('top', (scrollPosition + currentTop) + 'px');
    });
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:08:03.323

您可以使用以下方法获取它

```
$('.fancybox-wrap').css('top'); 
```

并将其与滚动条相加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:06:03.550

尝试这个 ：

```
$('.fancybox-wrap').css('top', '+='+scrollPosition +'px'); 
```

# drupal - 如何从页面节点 Drupal 隐藏标题

> ID：13708108
> 
> 赞同：5
> 
> 时间：2012-12-04T17:04:00.797
> 
> 标签：drupal, drupal-7

我正在尝试删除 Drupal 上页面节点的标题。我有这个页面：

![在此处输入图像描述](../Images/93324beab7c01e72666e56a44f02bde2.png)

我希望它看起来像这样：

![在此处输入图像描述](../Images/165159d188e4d492b58e6e9efb7744ba.png)

如您所见，我希望删除标题，但**仅**适用于分类术语。如果我尝试使用 CSS 擦除它，我会擦除所有页面标题，所以我想使用[这个模块](http://drupal.org/project/auto_nodetitle)，它允许管理员自动生成节点标题并隐藏它。

我去**structure -> type content -> my type content**，然后编辑它。我激活了模块，我想根据节点类别自动生成标题。我认为它应该看起来像这样，但它不起作用......

![在此处输入图像描述](../Images/1d20983604fc1998643c36572bf21803.png)

任何想法为什么？

**编辑：**对不起，我忘了说：是的，当我激活模块时，使用它，然后选择类别作为自动生成的标题，它就可以工作。但它并没有隐藏标题...

它也会引发这个错误：

![在此处输入图像描述](../Images/658c267b2d89afaf4e8d138574e4680c.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-08T06:19:06.887

使用排除节点标题模块。

[https://drupal.org/project/exclude_node_title](https://drupal.org/project/exclude_node_title)

此模块的设置：

![在此处输入图像描述](../Images/870c0d722ccf02ebf410e7cee63cb95c.png)

```
Click on Module->Exclude node title->configure
Home » Administration » Configuration » Content authoring
Select All nodes from Basic Page
Check Full Content for hide title from all cms page except home page
Check Teaser for hide title from home page. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T17:10:21.693

如果要删除标题，则应考虑覆盖页面和节点模板。

[page.tpl.php](http://api.drupal.org/api/drupal/modules!system!page.tpl.php/7)和[node.tpl.php](http://api.drupal.org/api/drupal/modules!node!node.tpl.php/7)

您需要做的就是在这两个上单击“查看源代码”并将它们复制到您的主题文件夹中。从那里您可以根据需要修改两者。

据我所知，您需要`$title`从 node.tpl.php 中删除打印。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T03:04:11.627

通过使用 Context 模块，您可以将类添加到正文中，以便您可以仅针对 CSS 中的分类页面。

[使用 Context 模块设置 body 类](http://drupaleasy.com/quicktips/using-context-module-set-body-classes)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T09:29:12.677

对不起，这就像在“管理演示文稿”上隐藏标题标签一样简单......

你的回答很好，但它们并不是我所需要的......谢谢！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-05T10:49:42.183

之前有类似的问题，据我记得，我只是`if`在代码中添加了一些语句：

```
<?php if (blah-blah-blah): ?>
   <h2> <?php echo $title; ?> </h2>
<?php endif; ?> 
```

希望，它会给你一个线索。

其他一些想法：您不仅可以创建一个 if 语句或重写它，还可以`page.tpl.php`创建一些特定`page-node-type.tpl.php`文件并仅覆盖其`$title`，或者您也可以尝试通过 Views/Panels 模块自定义页面的输出。

另外，您能否更清楚一点，您要删除什么标题？页面标题或节点标题？并且只有在您查看与某些分类术语相关的节点时才应该删除它（换句话说，当您在`/taxonomy/term/n`页面上时），对吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-20T07:18:44.570

使用**排除节点标题**模块。

[https://drupal.org/project/exclude_node_title](https://drupal.org/project/exclude_node_title)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-18T14:49:51.423

这就是我的做法，Switch 声明

// 获取节点名称

$node_name = node_type_get_name($node);

// 然后只需通过用空字符串覆盖 // $title 对象来添加您希望排除的内容类型

```
 switch ($node_name) {
           case 'Home page':
                $title = '' ;
                 break;
           case 'Event':
                $title = '';
                 break;
           case 'Offer':
                $title = '';
               break;
             } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-03T15:12:48.153

针对特定节点的另一个不错的解决方案是使用标准的 $title_prefix/suffix vars，每个主题都应该实现它。在页面预处理中使用标准类元素不可见..

喜欢：

```
/**
 * Implements hook_preprocess_page().
 */
function YOUR_THEME_preprocess_page(&$variables) {

  if (isset($variables['node']) && $variables['node']->nid == 1) {
    $variables['title_prefix'] = array('#markup' => '<div class="element-invisible">');
    $variables['title_suffix'] = array('#markup' => '</div>');
  }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-12T10:57:12.253

每个页面都应该包含一个标题。

您应该始终在任何网页中维护结构化的标题层次结构。你永远不应该有一个空白标题，甚至用 display:none; 隐藏它。隐藏访问者无法查看但搜索引擎可以查看的任何内容违反了 Google 的准则，因为您的意图是仅通过包含这些内容来操纵搜索引擎结果。重新设计 H1 以使其适合您的设计是最佳选择。

如果您仍然需要隐藏它，那么更好的选择是为该节点、内容类型或页面创建一个模板，而根本不打印标题。

> 或者，如果您想使用 CSS，请使用**position:absolute**，这样标题就不会使用它在页面中的任何空间和**text-indent:-9999px;** 因此文本被移出屏幕，不再可见，但至少可以被屏幕阅读器和搜索引擎阅读。

# r - 如何在没有观察的情况下降低因子水平？

> ID：13708120
> 
> 赞同：2
> 
> 时间：2012-12-04T17:04:23.030
> 
> 标签：r, r-factor

> **可能重复：**
> [在 R 中的子集数据框中删除因子级别](https://stackoverflow.com/questions/1195826/dropping-factor-levels-in-a-subsetted-data-frame-in-r)

我有一个包含几个变量的数据框，我正在使用`lme()`. 其中一个变量 ForAgeCat 有五个因子水平：1、2、3、4、5。

```
str(mvthab.3hr.fc$ForAgeCat)
 >Factor w/ 5 levels "1","2","3","4",..: 5 5 5 5 5 5 5 5 5 5 ... 
```

问题是因子级别 3 实际上不存在，也就是说，在这个数据集（它是更大数据集的一个子集）中，没有来自因子级别 3 的观察结果，我认为这会干扰我在 lme() 中的建模. 有人可以帮我从因子级别列表中删除/消除因子级别 3 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T17:08:44.457

使用函数***droplevels***，如下所示：

```
> DF$factor_var = droplevels(DF$factor_var) 
```

更多详情：

```
> # create a sample dataframe:
> col1 = runif(10)
> col1
    [1] 0.6971600 0.1649196 0.5451907 0.9660817 0.8207766 0.9527764 
        0.9643410 0.2179709 0.9302741 0.4195046
> col2 = gl(n=2, k=5, labels=c("M", "F"))
> col2
    [1] M M M M M F F F F F
    Levels: M F
> DF = data.frame(Col1=col1, Col2=col2)
> DF
     Col1 Col2
 1  0.697    M
 2  0.165    M
 3  0.545    M
 4  0.966    M
 5  0.821    M
 6  0.953    F
 7  0.964    F
 8  0.218    F
 9  0.930    F
 10 0.420    F

> # now filter DF so that only *one* factor value remains
> DF1 = DF[DF$Col2=="M",]
> DF1
   Col1 Col2
1 0.697    M
2 0.165    M
3 0.545    M
4 0.966    M
5 0.821    M

> str(DF1)
    'data.frame':   5 obs. of  2 variables:
   $ Col1: num  0.697 0.165 0.545 0.966 0.821
   $ Col2: Factor w/ 2 levels "M","F": 1 1 1 1 1

> # but still 2 factor *levels*, even though only one value

> DF1$Col2 = droplevels(DF1$Col2)
> # now Col2 has only a single level:
> str(DF1)
   'data.frame':    5 obs. of  2 variables:
  $ Col1: num  0.697 0.165 0.545 0.966 0.821
  $ Col2: Factor w/ 1 level "M": 1 1 1 1 1 
```

# c++ - 如何使 STL 与一种类型的“空结构”配对只占用另一种类型的空间？

> ID：13708130
> 
> 赞同：2
> 
> 时间：2012-12-04T17:04:49.993
> 
> 标签：c++, data-structures

我正在处理一个需要键和值类型的模板化键/值存储类，并将它们在内部存储为`std::pair`. 然而，我发现了一个我只想存储一个键并且仍然利用这个类的索引的情况。我需要完全重构这个东西以只处理一个键而不是一个键/值对（或浪费大量空间），所以我想知道是否有办法让一个`std::pair`对象采用一个空结构（或其他东西） , 并且只占用与对中的其他类型相同的空间量。

我用这个试过：

```
struct EmptyStruct
{
}; 
```

并运行了这个：

```
typedef std::pair<int, EmptyStruct> TestPair;
std::cout << sizeof(TestPair) << " vs " << sizeof(int) << "\n"; 
```

但是得到了这个输出：

```
8 vs 4 
```

在 VC++ 2012 中的“发布”模式下启用了优化，包括 /O1“最小化大小”。

有没有办法在 a 的上下文中使结构被认为是“无大小的” `std::pair`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T17:09:25.077

您不能使用 Boost 来做到这一点`std::pair`，而是使用[Boostcompressed_pa​​ir](http://www.boost.org/libs/utility/compressed_pair.htm)。

在您着手编写自己的完全符合`pair`压缩的模板之前，请注意这比看起来更难。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T17:07:40.483

> 有没有办法在 std::pair 的上下文中使结构被认为是“无大小的”？

否：因为一个类的单独实例必须具有不同/可区分的地址......所以有一个最小（非零）大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T17:09:16.577

没有办法做到这一点，`std::pair`但创建自己的结构相当容易 - <code>compressed_pa​​ir 这样做：如果任一类型为空以仅容纳一个成员，只需专门化模板即可。

有一个库——SeqAn——有[这样的类型](http://docs.seqan.de/seqan/dev2/?i=Spec.Packed%20Pair)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T17:10:16.443

如果第二种类型是，您可能会专注`pair`于不实际存储价值`EmptyStruct`

# c++ - 无法在 Visual Studio 2010 中更改输出的文本颜色和文本背景

> ID：13708132
> 
> 赞同：0
> 
> 时间：2012-12-04T17:04:58.160
> 
> 标签：c++, c, visual-studio-2010, visual-studio

如何在 Visual Studio 2010 中更改输出的文本颜色和文本背景？ `textcolor() ,textbackground(), textmode()`功能不工作。有什么选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:12:10.393

如果我正确理解了您的问题，并且您正在谈论更改 c/c++*控制台*应用程序中的颜色。
您可以使用[SetConsoleAttribute](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686047%28v=vs.85%29.aspx)更改控制台中的颜色。这是一个**[例子](http://www.daniweb.com/software-development/cpp/code/216345/add-a-little-color-to-your-console-text)**

# java - Java Swing中单元格和列的间距

> ID：13708136
> 
> 赞同：1
> 
> 时间：2012-12-04T17:05:04.673
> 
> 标签：java, swing, constraints, gridbaglayout

我的问题是我的第二个 gridbagconstraints 变量的最后两列间隔太多。我使用了一个 gridbagconstraint 来管理第一列，第二列处理最后 3 列。

遗憾的是，由于是新用户，我无法提供屏幕截图:(

```
 import java.awt.*;

  import javax.swing.*;

   public class Main_Window_Frame extends JFrame{

     //The tabbed pane object is constructed
    JTabbedPane TabGroup = new JTabbedPane();
    //Jpanels to be added to TabGroup
    JPanel panelAddEmployee = new JPanel();//This will create the first tab "Add Employee"
    JPanel panelSearchEmployee = new JPanel();//This will create the second tab "Search for an Employee        
    JPanel panelRemoveEmployee = new JPanel();//This will create the third tab "Remove an Employee"
    JPanel panelListAllEmployees = new JPanel();//This will create the fourth tab "List all Employees"
    JPanel panelSysOptions = new JPanel();//This will create the fifth tab "System options"
    //Construct GridBagConstraints for the objects within panelAddEmployee JPanel
    GridBagConstraints c = new GridBagConstraints();
    GridBagConstraints gbc = new GridBagConstraints();
    //Add employee panel Label declarations
    JLabel lblAddEmployee;
    JLabel lblEmpID;
    JLabel lblEmpIDout;
    JLabel lblForename;
    JLabel lblSurname;
    JLabel lblGender;
    JLabel lblDateBirth;
    JLabel lblAddress;
    JLabel lblPhoneNo;
    JLabel lblEmail;
    JLabel lblJobTitle;
    JLabel lblSalary;
    JLabel lblNatNo;
    JLabel lblStartDate;
    //Add employee panel TextField declarations
    JTextField txtForename;
    JTextField txtSurname;
    JTextField txtAddress;
    JTextField txtPhoneNo;
    JTextField txtEmail;
    JTextField txtJobTitle;
    JTextField txtSalary;
    JTextField txtNatNo;
    //Add employee panel RadioButton declarations
    JRadioButton radMale;
    JRadioButton radFemale;
    //Add employee panel ComboBox declarations
    JComboBox cbDob1;
    JComboBox cbDob2;
    JComboBox cbDob3;
    JComboBox cbDateStart1;
    JComboBox cbDateStart2;
    JComboBox cbDateStart3;
    //Add employee panel label array
    JLabel[] addEmployeeLabels = new JLabel[13];
    //Add employee panel textField array
    JTextField[] addEmployeeTextFields = new JTextField[8];

    protected String[] DDBirthDate = {"01","02","03","04","05","06","07",
            "08","09","10","11","12",
            "13","14","15","16","17","18","19",
            "20","21","22","23","24","25","26",
            "27","28","29","30","31"};
    protected String[] MMBirthDate = {"01","02","03","04","05","06","07",
            "08","09","10","11","12"};
    protected String[] YYYYBirthDate = {"1996","1995","1994","1993","1992",
              "1991","1990","1989","1988","1987",
              "1986","1985","1984","1983","1982",
              "1981","1980 "," 1979 ","1978","1977",
              "1976","1975","1974","1973","1972","1971",
              "1970","1969","1968","1967 ","1966",
              "1965","1964","1963","1962","1961","1960",
              "1959","1958","1957","1956","1955",
              "1954","1953","1952","1951","1950",
              "1949","1948","1947","1946","1945",
              "1944","1943","1942","1941"};
    protected String[] YYYYStartDate = {"2012","2011","2010"};

    public Main_Window_Frame() {

        super("Employee Record System");

        setSize(750,500); //set the size of the form

        //This creates the template for the multiple tabs using JTabbedPane
        getContentPane().add(TabGroup);

        //Add the GridBagLayout manager to the panelAddEmployee JPanel
        panelAddEmployee.setLayout(new GridBagLayout());
        //Add the GridBagLayout manager to the panelAddEmployee JPanel
        panelSearchEmployee.setLayout(new GridBagLayout());

        generateEmployeeAttributeLabels();
        addEmployeePanelObjects();
        addListAllEmployeesPanelObjects();
        addSystemOptionsPanelObjects();

        //This adds the first, second, third and final tab to the tabbedPanel Object
        TabGroup.addTab("Add Employee", panelAddEmployee);
        TabGroup.addTab("Search for an Employee", panelSearchEmployee);
        TabGroup.addTab("Remove an Employee", panelRemoveEmployee);
        TabGroup.addTab("List all Employees", panelListAllEmployees);
        TabGroup.addTab("System Options", panelSysOptions);

    }

    public void generateEmployeeAttributeLabels(){
        //Labels are assigned to a label array
        addEmployeeLabels[0] = lblAddEmployee = new JLabel(); lblAddEmployee.setText("Add Employee"); //Set the text to "Add Employee"
        addEmployeeLabels[1] = lblEmpID = new JLabel(); lblEmpID.setText("Employee ID:"); 
        addEmployeeLabels[2] = lblForename = new JLabel(); lblForename.setText("Forename:"); 
        addEmployeeLabels[3] = lblSurname = new JLabel(); lblSurname.setText("Surname:");  
        addEmployeeLabels[4] = lblGender = new JLabel(); lblGender.setText("Gender:");   
        addEmployeeLabels[5] = lblDateBirth = new JLabel(); lblDateBirth.setText("Date of Birth:");
        addEmployeeLabels[6] = lblAddress = new JLabel(); lblAddress.setText("Address:"); 
        addEmployeeLabels[7] = lblPhoneNo = new JLabel(); lblPhoneNo.setText("Phone Number:"); 
        addEmployeeLabels[8] = lblEmail = new JLabel(); lblEmail.setText("Email Address:"); 
        addEmployeeLabels[9] = lblJobTitle = new JLabel(); lblJobTitle.setText("Job Title:"); 
        addEmployeeLabels[10] = lblSalary = new JLabel(); lblSalary.setText("Salary:");
        addEmployeeLabels[11] = lblNatNo = new JLabel(); lblNatNo.setText("National Insurance no:");
        addEmployeeLabels[12] = lblStartDate = new JLabel(); lblStartDate.setText("Start Date:");
        //GridBagConstraints for the title label "Add Employee"
        c.fill = GridBagConstraints.HORIZONTAL;
        int j = 0;
        //This for loop adds all of the labels to the add employee panel.
        //More efficient than multiple lines of code for each label.
        for(int i = 0; i < 13; i++){
         //If the element is the "Add Employee" label then we give it the appropriate sizes
            if(i == 0){
                 c.insets = new Insets(0,0,0,0); //Insets are 0, assigned to upper-most top left
                 c.weightx = 0.5; //horizontal weight is 0.5
                 c.gridx = 0; //Place in column 0
                 c.gridy = 0; //Place in row 0
                 addEmployeeLabels[0].setFont(new Font("Arial",Font.BOLD,24)); 

                }else{
                    //If the element is the "Start Date" Label then
                    if (i == 12){
                        c.weighty = 1.0; //vertical weight is 0.5
                        c.anchor = GridBagConstraints.PAGE_START; //Ensures last label is at the edge of its display area
                        c.gridx = 0;  //Place in column 0     
                        c.gridy = 12; //Place in column 12
                        addEmployeeLabels[12].setFont(new Font("Arial",Font.PLAIN,12));

                        //For every other label, a default size and relational location is assigned.
                        }else{
                            c.insets = new Insets(15,5,0,0);
                            c.weightx = 0.5;
                            c.gridx = 0; //Place in column 0
                            c.gridy = i; //Place in column i (relational positioning based on element index value)

                            addEmployeeLabels[i].setFont(new Font("Arial",Font.PLAIN,12));
                        }
                }
            //Adds each label in the array to the "panelAddEmployee" Panel
            panelAddEmployee.add(addEmployeeLabels[i], c);
            //Adds each label in the array to the "panelAddEmployee" Panel
            //panelSearchEmployee.add(addEmployeeLabels[i], c);
        }

    }

    public void addEmployeePanelObjects(){

        gbc.gridwidth = 1;
        //Construct lblEmpIDout label
        lblEmpIDout = new JLabel();
        lblEmpIDout.setText("0");
        //Construct radMale radio button
        radMale = new JRadioButton();
        radMale.setText("Male?");
        //Construct radFemale radio button
        radFemale = new JRadioButton();
        radFemale.setText("Female?");

        cbDob1 = new JComboBox();
        cbDateStart1 = new JComboBox();

           for(int i = 0; i < DDBirthDate.length; i++){

               cbDob1.addItem(DDBirthDate[i]);
               cbDateStart1.addItem(DDBirthDate[i]);
           }

         cbDob2 = new JComboBox();
         cbDateStart2 = new JComboBox();

           for(int i = 0; i < MMBirthDate.length; i++){

               cbDob2.addItem(MMBirthDate[i]);
               cbDateStart2.addItem(MMBirthDate[i]);
           }

         cbDob3 = new JComboBox();
         cbDateStart3 = new JComboBox();

           for(int i = 0; i < YYYYBirthDate.length; i++){

               cbDob3.addItem(YYYYBirthDate[i]);
               cbDateStart3.addItem(YYYYBirthDate[i]);
           }

        //TextFields are assigned to a TextField array
        addEmployeeTextFields[0] =  txtForename = new JTextField();
        addEmployeeTextFields[1] =  txtSurname = new JTextField();
        addEmployeeTextFields[2] =  txtAddress = new JTextField();
        addEmployeeTextFields[3] =  txtPhoneNo = new JTextField();
        addEmployeeTextFields[4] =  txtEmail = new JTextField();
        addEmployeeTextFields[5] =  txtJobTitle = new JTextField();
        addEmployeeTextFields[6] =  txtSalary = new JTextField();
        addEmployeeTextFields[7] =  txtNatNo = new JTextField();

        int j = 0;
        //This for loop adds all of the labels to the add employee panel.
        //More efficient than multiple lines of code for each label.
        for(int i = 0; i < 13; i++){

           gbc.insets = new Insets(15,5,0,0);
           gbc.gridy = i;
           gbc.gridx = 0;
           gbc.weightx = 1;
           gbc.weighty = 1;

                if (i == 0 || i == 1 ||i == 4 || i == 5 || i == 12 ){

                        if(i==1){
                            panelAddEmployee.add(lblEmpIDout, gbc);
                        }

                        if(i==4){   
                            panelAddEmployee.add(radMale,gbc);
                            gbc.gridx = 1;
                            panelAddEmployee.add(radFemale,gbc);
                            gbc.gridx = 0;
                        }

                        if(i==5){
                            panelAddEmployee.add(cbDob1,gbc);
                            gbc.gridx = 1;
                            panelAddEmployee.add(cbDob2,gbc);
                            gbc.gridx = 2;
                            panelAddEmployee.add(cbDob3,gbc);
                            gbc.gridx = 0;
                        }

                        if(i==12){
                            panelAddEmployee.add(cbDateStart1,gbc);
                            gbc.gridx = 1;
                            panelAddEmployee.add(cbDateStart2,gbc);
                            gbc.gridx = 2;
                            panelAddEmployee.add(cbDateStart3,gbc);
                            gbc.gridx = 0;
                        }
                        //Do not add a text box to title, ID
                        //gender, date of birth or start date

                    }else{

                            //Adds each textfield in the array to the "panelAddEmployee" Panel
                            panelAddEmployee.add(addEmployeeTextFields[j], gbc);
                            j++;
                    }
                    }
                }

    public void addSearchEmployeePanelObjects(){
    }
    public void addListAllEmployeesPanelObjects(){
    }

    public void addSystemOptionsPanelObjects(){
    }

    } 
```

[截屏](http://i.stack.imgur.com/cKIS0.png)

# c# - 可以从c#中的类派生结构吗？

> ID：13708137
> 
> 赞同：8
> 
> 时间：2012-12-04T17:05:07.837
> 
> 标签：c#, class, struct

可以从c#中的类派生结构吗？

如果不是，为什么原始数据类型（例如 int）可以从类派生`object`？由于数据类型 int 基本上是结构类型（值类型）。

这只是规则的例外吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T17:14:42.847

整数和其他值类型（例如 bool）是对象，因为它允许它们利用继承（即它们可以访问公共`.Equals()`, `.GetType()`,`.ToString()`函数）。

这是 .NET 框架中的设计决策。他们没有为 System.ValueType 下的所有值类型编写单独的函数，而是使用公共代码库。

[Microsoft 关于类型的文档](http://msdn.microsoft.com/en-us/library/ms173104.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T17:06:22.157

所有结构都继承`System.ValueType`，而后者又继承`Object`。

你无法改变这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T18:59:23.437

当运行时为一个类型分配一个存储位置，或生成操作一个类型的代码时，它会检查该类型是否派生自`System.ValueType`但不是`System.ValueType`它自己。除非存储位置满足这些条件，否则它将持有一个堆对象引用，并且任何对其成员（字段、方法、属性等）进行操作的代码都将作用于被引用的对象。否则，存储位置将保存该类型的所有公共和私有字段（将在该类型的所有存储位置中以相同的方式布局），并且对其成员进行操作的任何代码都将在存储位置本身上进行操作。

如果尝试将值类型存储到 class`ValueType`的存储位置，或者不是从 派生的存储位置`ValueType`，系统将生成该存储位置类型的新堆对象，然后将对该对象的引用存储在适当的存储位置。虽然派生自 的类型的存储位置`System.ValueType`和访问它们的代码由运行时特殊处理，但继承自的堆对象实例`System.ValueType`（例如刚刚提到的新创建的实例）只是碰巧派生自的堆对象`System.ValueType`，并且具有与其他类型基本相同的继承行为，因此可以通过期望处理堆引用的代码传递。

像这样的陈述`Object Foo = New System.Drawing.Point(3,4);`实际上涉及三种事情：

1.  `System.Drawing.Point(3,4)` 类型的未命名临时存储位置，它保存该类型的私有字段（两个整数），并初始化为 (3,4)。请注意，此存储位置不包含“对象”；它包含两个整数，编译器知道它们代表它的字段。
2.  `System.Drawing.Point` 类型的堆对象。因为这是一个堆对象，它继承自 `System.Object`，所有堆对象也是如此。
3.  `Object` 类型的存储位置，由变量名 `Foo` 表示。

所有这一切的结果是，虽然值类型可以被定义为继承自`ValueType`which 继承自`Object`，而其类型继承自的堆对象`ValueType`确实继承自`Object`，但值类型的*存储位置*`Object`不包含继承自的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T17:15:23.397

类层次结构如下（简化）：

对象 -> 值类型 -> 整数对象 -> 值类型 -> 结构

c# 定义的结构不允许继承。

这是一篇很好的文章，描述了结构在 C# 语言中的作用：

[http://msdn.microsoft.com/en-us/library/aa288471(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288471(v=vs.71).aspx)

# java - 单击时画一个点

> ID：13708141
> 
> 赞同：0
> 
> 时间：2012-12-04T17:05:14.513
> 
> 标签：java, swing, graphics, paintcomponent

您好，我想知道如何在 MouseClicked 方法之外获取鼠标的位置，我需要在有人点击的地方画一个点。这是我现在使用的代码。有人可以帮我弄这个吗？

```
 Dot punt = new Dot();

public void paintComponent(Graphics g) {
    super.paintComponent(g);

    punt.setDot(g, getX(), getY(), 5);

    repaint();
}

@Override
public void mouseClicked(MouseEvent m) {
    // TODO Auto-generated method stub
    gebeurtenisverslag.setText( 
            m.getClickCount() + " keer geklikt op " + m.getX() + "," + m.getY());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T17:10:18.713

为 mouseClicked 修改的类设置一个变量。

```
private int X;
private int Y;

@Override
public void mouseClicked(MouseEvent m) {
    gebeurtenisverslag.setText( 
            m.getClickCount() + " keer geklikt op " + m.getX() + "," + m.getY());
    X = m.getX();
    Y = m.getY();
}

public void paintComponent(Graphics g) {
    super.paintComponent(g);
    //Probably want to add logic here to verify X & Y have been set
    punt.setDot(g, X, Y, 5);
    repaint();
} 
```

# django - 将 auth_user 与 django 中的模型用户相关联

> ID：13708142
> 
> 赞同：0
> 
> 时间：2012-12-04T17:05:19.927
> 
> 标签：django, django-authentication, django-registration

我正在 django 中创建一个应用程序，最终将允许用户发布图片。图片包含用户的外键。

我希望能够像上面那样将 User 类作为模型类进行操作，但我也希望它能够提供 django-registration/auth 现在正在处理的授权等功能。

所以基本上我有两节课；我自己的 User 类和 auth_user 类，每个类在 sqlite 中都有自己的表。

我应该如何将两者联系起来？我应该使用 OneToOne 字段还是应该扩展 auth_user 类以包含模型 User 类的所有功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:13:31.723

我相信这就是您正在寻找的：

[https://docs.djangoproject.com/en/1.4/topics/auth/#auth-profiles](https://docs.djangoproject.com/en/1.4/topics/auth/#auth-profiles)

你需要在你的 settings.py 文件中指定你的自定义类，比如：

```
AUTH_PROFILE_MODULE = 'accounts.UserProfile' 
```

希望有帮助。

# jsf-2 - Primefaces 自动完成小部件出现错误：在 java.lang.String 类型上找不到属性“标签”

> ID：13708143
> 
> 赞同：2
> 
> 时间：2012-12-04T17:05:24.060
> 
> 标签：jsf-2, autocomplete, primefaces

我无法成功让“p:autocomplete”小部件工作......

**使用自动完成小部件，如此处所示...**

```
<p:autoComplete id="abc"  dropdown="true" value="#{testBean.parmMap['inputval']}" completeMethod="#{testBean.testList}" var="items" itemLabel="#{items.label}" itemValue="#{items}" converter="#{itemConverter}" ></p:autoComplete> 
```

**我收到以下错误消息...**

> javax.el.PropertyNotFoundException：/index.xhtml @18,245 itemLabel="#{items.label}"：在 java.lang.String 类型上找不到属性“标签”

**我无法克服这个错误。不确定问题出在哪里**——我 已经包含了下面显示的大部分相关代码。感谢您为我提供的任何指导！

**这是整个 facelets 页面 - index.xhtml...**

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:util="http://java.sun.com/jsf/composite/util"      
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">      
    <f:view contentType="text/html">
        <h:head>
            <title>testprimeac</title>
            <meta charset="utf-8" />
        </h:head>
        <h:body>
            <h:form id="form1">
                <p:autoComplete id="abc"  dropdown="true" value="#{testBean.parmMap['inputval']}" completeMethod="#{testBean.testList}" var="items" itemLabel="#{items.label}" itemValue="#{items}" converter="#{itemConverter}" ></p:autoComplete>
            </h:form>
        </h:body>
    </f:view>
</html>` 
```

**这是“项目”类...**

`package aaa.bbb.ccc.war;`

 ````
public class Item
{

    private String label;
    private String value;

    public String getLabel()
    {
        return label;
    }

    public void setLabel(String label)
    {
        this.label = label;
    }

    public String getValue()
    {
        return value;
    }

    public void setValue(String value)
    {
        this.value = value;
    }
} 
````  `**这是 ItemConverter 类...** `package aaa.bbb.ccc.war;`

 ````
import java.util.List;
import javax.faces.application.FacesMessage;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.ConverterException;

public class ItemConverter implements Converter
{

    @Override
    public Object getAsObject(FacesContext facesContext, UIComponent component, String submittedValue)
    {
        if (submittedValue.trim().equals(""))
        {
            return null;
        }
        else
        {
            itemList = getItemList();

            try
            {
                for (Item item : itemList)
                {
                    if (item.getValue().equalsIgnoreCase(submittedValue))
                    {
                        return item;
                    }
                }

            }
            catch (Exception e)
            {
                throw new ConverterException(new FacesMessage(FacesMessage.SEVERITY_ERROR, "Conversion Error", "Not a valid item object"));
            }
        }

        return null;
    }

    @Override
    public String getAsString(FacesContext facesContext, UIComponent component, Object value)
    {
        if (value == null || value.equals(""))
        {
            return "";
        }
        else
        {
            return String.valueOf(((Item) value).getValue());
        }
    }
    private static List<Item> itemList;

    private static List<Item> getItemList()
    {
        if (null == itemList)
        {
            refData = getRefData();
            itemList = refData.getTestList();
        }

        return itemList;
    }
    private static RefData refData;

    private static RefData getRefData()
    {
        refData = (RefData) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("refData");
        if (null == refData)
        {
            refData = new RefData();
            FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("refData", refData);
        }
        return refData;
    }
} 
````  `**这是 TestBean 类...** `package aaa.bbb.ccc.war;`

 ````
import java.io.Serializable;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;
import javax.faces.context.FacesContext;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;

@Component("testBean")
@Scope("request")
public class TestBean implements Serializable
{

    private RefData refData;
    private LinkedHashMap<String, String> parmMap;

    public TestBean()
    {
    }

    public Map<String, String> getParmMap()
    {
        refData = getRefData();
        return refData.getParmMap();
    }

    public void setParmMap(LinkedHashMap<String, String> m)
    {
        refData = getRefData();
        refData.setParmMap(m);
        storeRefData(refData);
    }

    public void setTestList(List<Item> list) throws Exception
    {
        try
        {
            refData = getRefData();
            refData.setTestList(list);
            storeRefData(refData);
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    public List<Item> getTestList()
    {
        refData = getRefData();
        return refData.getTestList();
    }

    private static RefData getRefData()
    {
        RefData refData = (RefData) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("refData");
        if (null == refData)
        {
            refData = new RefData();
            FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("refData", refData);
        }
        return refData;
    }

    private static void storeRefData(RefData r)
    {
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("refData", r);
    }
} 
````  `**这里是 RefData 类（在 TestBean 中引用）...** `package aaa.bbb.ccc.war;`

 ````
import java.io.IOException;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.HashMap;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;
import java.util.logging.Level;

public class RefData implements Serializable
{

    public RefData() //(String key)
    {
    }
    private static final Map<String, String> listBoxEntryMap;

    static
    {
        Map<String, String> m = new LinkedHashMap<String, String>();
        m.put("aaavalue", "aaalabel");
        m.put("bbbvalue", "aablabel");
        m.put("cccvalue", "abblabel");
        m.put("dddvalue", "bbblabel");
        m.put("eeevalue", "bbclabel");
        m.put("fffvalue", "bcclabel");
        m.put("gggvalue", "ccclabel");
        m.put("hhhvalue", "ccalabel");
        m.put("iiivalue", "caalabel");
        m.put("jjjvalue", "aaclabel");
        m.put("kkkvalue", "acclabel");
        m.put("lllvalue", "bbalabel");
        m.put("mmmvalue", "baalabel");

        listBoxEntryMap = Collections.unmodifiableMap(m);
    }
    private Map<String, String> parmMap;

    public Map getParmMap()
    {
        if (null == this.parmMap)
        {
            this.parmMap = new LinkedHashMap<String, String>();
            this.parmMap.put("inputval", "");
        }

        return this.parmMap;
    }

    public void setParmMap(Map m)
    {
        this.parmMap = m;
    }
    List<Item> testList = new ArrayList<Item>();

    public void setTestList(List<Item> data) throws IOException
    {
        testList = data;
    }

    public List<Item> getTestList()
    {
        try
        {
            if (null == testList || testList.isEmpty())
            {
                testList = getListOfItems();
            }

            return testList; //(list);
        }
        catch (Exception ex)
        {
            java.util.logging.Logger.getLogger(RefData.class.getName()).log(Level.SEVERE, null, ex);
        }

        return null;
    }

    public static List<Item> getListOfItems()
    {
        List<Item> list = null;
        try
        {
            Map<String, String> map = listBoxEntryMap;
            Iterator iter = map.keySet().iterator();

            list = new ArrayList<Item>();
            Item item = null;

            while (iter.hasNext())
            {
                String key = (String) iter.next();
                String val = (String) map.get(key);
                item = new Item();
                item.setLabel(key);
                item.setValue(val);
                list.add(item);
            }
        }
        catch (Exception e)
        {
            System.out.println("Exception during query call..." + e.getMessage());
            e.printStackTrace();
        }

        return list;
    }
} 
````  `**FWIW - 这是 pom.xml （其中包括 primefaces 依赖项）......**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>aaa.bbb.ccc</groupId>
    <artifactId>testprimeac-war</artifactId>
    <packaging>war</packaging>
    <version>1</version>
    <name>testprimeac-war</name>
    <url>http://maven.apache.org</url>
    <properties>
        <org.springframework-version>3.1.1.RELEASE</org.springframework-version>
        <jsf-version>2.1.11</jsf-version>
    </properties>    
    <dependencies>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.6</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>                
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.11</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.11</version>
        </dependency>
        <dependency>
            <groupId>javax.el</groupId>
            <artifactId>el-api</artifactId>
            <version>2.2</version>
        </dependency>
        <dependency>
            <groupId>org.glassfish.web</groupId>
            <artifactId>el-impl</artifactId>
            <version>2.2</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>        
        <dependency>
            <groupId>org.primefaces</groupId>
            <artifactId>primefaces</artifactId>
            <version>3.4.2</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.3</version>
            </plugin>
        </plugins>
        <finalName>testprimeac-${project.version}</finalName>       
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:38:53.153

+1 对于您在第一段中所做的断言：您在此处确实有太多信息，并且转换器是不必要的，因为您绑定到基本`String`类型。

我在这里看到的两个主要问题是

1.  您选择在值绑定中不使用类型安全集合。使用纯文本`LinkedHashMap`保存字符串值很可能会导致问题，因为它们将作为对象存储，我认为编译器没有义务在这里为您进行任何自动装箱。

2.  您的支持`completeMethod`实现本质上是返回lkp`String`对象存储。这就是为`var`autocomplete 提供变量的原因。很明显，你不能这么`getLabel()`说。

您可以通过以下两种方式中的任何一种进行

1.  将您的数据存储更改`LinkedList`为 Strings 的类型安全，丢失转换器，您应该没问题。你的 `var`意志是平淡无奇`item`的，`itemLabel`而且`itemValue`都将是`#{item}`。

2.  实现一个 POJO 来封装选择对象，保留转换器，然后您的支持数据存储成为您的 POJO 的简单列表，并且您的选择成为 POJO 的实例而不是字符串

编辑：通过您的澄清，问题是由于自动完成下拉列表（Type `item`）返回的类型存在差异以及`value`自动完成与后备bean（类型）的绑定`String`。下拉选择返回的类型必须与您在支持 bean 中绑定的类型相同。````

# grails - 确定列表是否是另一个列表 HQL 的子集

> ID：13708150
> 
> 赞同：1
> 
> 时间：2012-12-04T17:05:44.090
> 
> 标签：grails, hql

我正在尝试为我的 Grails 应用程序编写一个查询，该应用程序选择所有`Apple`与`Orange`. 在这里，“相关”一词意味着与 的实例相关联的所有实例`Banana`都与与我们关注的实例相关联的实例`Apple`的某种组合`Cherry`相关联。`Orange`我在[这里](https://stackoverflow.com/questions/11469575/hql-hibernate-how-to-check-if-a-list-of-elements-is-a-subset-of-another-list)查看了问题，但我的查询有点复杂，我没有看到如何将给定的答案应用于我的问题。

以下是我正在处理的课程：

```
class Apple {
    static hasMany = [ bananas: Banana ]
}

class Banana {
}

class Cherry {
    static hasMany = [ bananas: Bannna ]
}

class Orange {
    static hasMany = [ cherries: Cherry ]
} 
```

以如下所示的图片形式：

![在此处输入图像描述](../Images/855d192e44ca42f1fbd76208825c3452.png)

在下面显示的场景 1 中，所需的查询将仅返回“Apple 1”，因为`Banana`与“Apple 2”相关的所有实例都通过“Cherry”实例的某种组合与“Orange 1”无关。

![在此处输入图像描述](../Images/f7486a799e373a67f63e789823e805cb.png)

在下面显示的场景 2 中，所需查询将返回“Apple 1”和“Apple 2”，因为`Banana`与“Apple 2”相关的所有实例都通过“Cherry”实例的某种组合与“Orange 1”相关.

![在此处输入图像描述](../Images/506040353b56d17ababe6ea3d3d433a3.png)

这是我一直在使用的查询：

```
Apple.executeQuery(
    "SELECT DISTINCT apples
    FROM Apple apples
    INNER JOIN apples.banannas banannas
    WHERE banannas IN(
        SELECT DISTINCT banannas
        FROM Cherry cherries
        INNER JOIN cherries.banannas banannas
        WHERE cherries IN(
            SELECT DISTINCT cherries
            FROM Orange orange
            INNER JOIN orange.cherries cherries
            WHERE orange =:myOrange
        )
    )
    ORDER BY apples.id ASC",
    myOrange: myOrange
) 
```

问题是我的查询为场景 1 和 2 返回“Apple 1”和“Apple 2”。

**更新＃1：**

根据要求，这里是 HQL 查询生成的 SQL。对不起，水果混淆了**<<<双关语**

```
SELECT DISTINCT apple0_.id                     AS id10_,
                apple0_.version                AS version10_,
                apple0_.description            AS descript3_10_,
                apple0_.apple_priority_type_id AS apple4_10_,
                apple0_.apple_status_type_id   AS apple5_10_,
                apple0_.internal_need_date     AS internal6_10_,
                apple0_.name                   AS name10_
FROM   apple apple0_
       INNER JOIN apple_priority_type applepri1_
               ON apple0_.apple_priority_type_id = applepri1_.id
       INNER JOIN apple_status_type applesta2_
               ON apple0_.apple_status_type_id = applesta2_.id
       INNER JOIN apple_banana banana3_
               ON apple0_.id = banana3_.apple_bananas_id
       INNER JOIN banana banana4_
               ON banana3_.banana_id = banana4_.id
WHERE  banana4_.id IN (SELECT DISTINCT banana7_.id
                       FROM   cherry plum5_
                              INNER JOIN cherry_banana banana6_
                                      ON plum5_.id = banana6_.cherry_bananas_id
                              INNER JOIN banana banana7_
                                      ON banana6_.banana_id = banana7_.id
                       WHERE  plum5_.id IN (SELECT DISTINCT plum10_.id
                                            FROM   orange orange8_
                                                   INNER JOIN orange_cherry
                                                              plum9_
                                                           ON
orange8_.id = plum9_.orange_cherrys_id
INNER JOIN cherry plum10_
        ON
plum9_.cherry_id = plum10_.id
WHERE  orange8_.id = 248))
ORDER  BY apple0_.id ASC
LIMIT  100 
```

**更新#2：**

我实际上有一种方法可以使用 HQL 来完成这项工作，但它不像我在其他地方找到的所有类型都与其他类型的实例相关的所有类型一样好。这是我的工作：

```
 def bananas= myOrange.cherries.bananas.flatten().unique()
    def apples = Apple.getAll().collectMany{ !it.bananas.isEmpty() && bananas.containsAll( it.bananas ) ? [ it ] : [] }.flatten().unique()
    namedParams.put( "apples", apples )
    if( !apples.isEmpty() ) {
        apples = Apple.executeQuery( "SELECT DISTINCT apples FROM Apple apples WHERE apples IN(:apples) ${additionalQuery} ORDER BY ${sortname} ${sortorder}", namedParams )
    }
    return apples 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:05:04.483

那是因为如果您的 Apple 与香蕉至少有一个关系，它将永远返回。

```
select
    distinct apple0_.id as id0_,
    apple0_.version as version0_ 
from
    apple apple0_ 
inner join
    apple_banana bananas1_ 
where bananas1_.banana_id in (1,2,3) 
```

您需要做的是从您的结果中排除**不存在**与您的樱桃相关的香蕉的苹果。您将不得不查看您的数据库是否具有类似 oracle **minus**的功能。

**编辑**：此查询从列表中删除具有不在樱桃香蕉中的香蕉的苹果。

注意：我没有检查这个的性能。

```
 SELECT DISTINCT apples
    FROM Apple apples
    INNER JOIN apples.bananas bananas
    WHERE bananas IN(
        SELECT DISTINCT bananas
        FROM Cherry cherries
        INNER JOIN cherries.bananas bananas
        WHERE cherries IN(
            SELECT DISTINCT cherries
            FROM Orange orange
            INNER JOIN orange.cherries cherries
            WHERE orange =:myOrange
        )
    )
  and apples not in (
    SELECT DISTINCT apples
      FROM Apple apples
     INNER JOIN apples.bananas bananas
      WHERE bananas NOT IN(
        SELECT DISTINCT bananas
          FROM Cherry cherries
          INNER JOIN cherries.bananas bananas
          WHERE cherries IN(
            SELECT DISTINCT cherries
            FROM Orange orange
            INNER JOIN orange.cherries cherries
            WHERE orange = :myOrange
          )
      )
    ) 
```

# azure - 如何管理我添加到 WAMS 的表，或将我的 WAMS 与现有 SQL DB 表关联？

> ID：13708152
> 
> 赞同：4
> 
> 时间：2012-12-04T17:05:44.810
> 
> 标签：azure, windows-phone-8, windows-store-apps, azure-mobile-services

我允许 WAMS 向导创建“测试”表（“项目”），它非常适合在设置我的 WAMS 后创建。

然后我想创建一个对我真正有用的表。向导中的说明确实说，“您可以稍后使用上面的“数据”选项卡添加和删除表。”

所以我这样做了，我*确实*创建了一个表，但我现在看不到我可以在哪里更改表的结构（IOW，添加列）。我尝试过 2 次单击服务、2 次单击表、选择“新建”按钮、右键单击表中唯一的列名 (id) 等，但都无济于事。

我也感到困惑的是，我以这种方式创建的表与我现有的 SQL DB 表之间的关系——或者我现在可以不用那个 SQL DB（一旦我设置了这些 WAMSical 表）？

或者为什么我不能将现有的 SQL DB 表关联到我的 WAMS？如果我可以 - 怎么做？

## 更新

此外，似乎所写的内容与我实际体验的内容不匹配。这（来自[http://msdn.microsoft.com/en-us/magazine/jj721590.aspx](http://msdn.microsoft.com/en-us/magazine/jj721590.aspx)）不是真的/没有发生在我身上：

“2.创建一个关系表来存储您的数据。当您单击“创建 TodoItem 表”按钮时，该向导将根据您之前创建（或重复使用）的 Windows Azure SQL 数据库自动创建一个表。

我尝试“从头开始”创建一个新的 WAMS。同样，当我选择现有的 SQL 数据库时，我得到“数据库和移动服务不在同一区域 - 性能会下降......此外，从数据库发送到移动服务的数据将被计为计费带宽使用量。我们建议您选择与移动服务位于同一位置的数据库。”

我也想，但是怎么做？为什么 WAMS 不自动为我调整这个 - 或者至少让我选择将我的数据库和移动服务放在同一个地方？

## 更新 2

有趣的是我可以在 LINQPad 中看到新表。我已经有两个 SQL DB 表显示在该连接信息下，但与这些表处于同一级别的是我的 WAMS 名称，在其下是“默认”Items 表和我自己创建的一个表（不过，这两个表，只有一列，特别是“Id (Int64)”

IOW，我在 LINQPad 中看到的是：

```
blaBlaBla.database.windows.net,1433.blaBla
BlaBla
    BlaBlaSQLDB_Table1
    BlaBlaSQLDB_Table2
    wamsName
        Items
            Id (Int64)
        BlaBlaWAMSTable
            Id (Int64) 
```

...所以我如何扩展/管理“BlaBlaWAMSTable”是现在的问题...

## 更新 3

好吧，看这里；LINQPad 再次救援：

```
select * from <WAMSName>.<TableName> 
```

...显示在我通过项目中的一个类创建我想要的表后有一条记录（不在 Azure/WAMS 管理区域中*）*

...当然，LINQPad 会显示以这种方式添加的新添加的列。

我需要做的就是按照提供的步骤（参考 Azure SDK，添加相应的 using 子句等），然后添加这个方法来测试它：

```
private async void InsertTestRecordIntoWAMSSQLDBTable()
{
    <WAMS Table class name> invitation = new <WAMS Table class name> { SenderID = "donkeyKongSioux@supermax.gov", ReaderDeviceID = "00-AA-11-BB-01-AB-10-BA", ReaderName = "B. Clay Shannon", SenderUTCOffset = 5, SenderDeviceID = "BA-10-AB-01-BB-11-AA-00" };
    await App.MobileService.GetTable<<WAMS Table class name>>().InsertAsync(invitation);
} 
```

......它奏效了。现在最好有一些用于选择查询和更新的示例/示例。

还有我剩下的一个大问题（到目前为止）：我可以装饰/注释我的表类的列/成员吗？IOW，我可以改变这个：

公共类 { 公共 int Id { 获取；放; } 公共字符串 SenderID { 获取；放; } 公共字符串 ReaderDeviceID { 获取；放; } 公共字符串 ReaderName { 获取；放; } 公共 int SenderUTCOffset { 获取；放; } 公共字符串 SenderDeviceID { 获取；放; } }

...到这样的事情：

公共类 { [Primary, AutoInc] public int Id { get; 放; } [索引] 公共字符串 SenderID { 获取；放; } [唯一] 公共字符串 ReaderDeviceID { get; 放; } [MaxLength(255)] 公共字符串 ReaderName { get; 放; } 公共 int SenderUTCOffset { 获取；放; } 公共字符串 SenderDeviceID { 获取；放; } }

?

我不能完全做到这一点，因为这些是 SQLite 注释，但由于我无法从 Azure/WAMS 门户管理我的表，我该如何指定这些属性？

在代码中更改表的设计后，我可以看到这些列已添加到我在 WAMS 门户中的表中，但似乎我对这些列唯一能做的就是添加索引......

## 更新 4

事实证明，在 WAMS 中创建表就像馅饼一样容易（但不像 pi 那样容易/像 pi 那样难）——只要你知道如何去做。

创建 WAMS 后，选择*Data*，然后选择*Create*以创建表。给它一个名字，然后选择你想要的权限。这将为您提供一个致命的单调但“活”的数据库表，其中包含一个，count 'em，一个，列：ID，一个 BigInt，索引。

然后，要实际向表中添加更多列，我发现的最简单的方法（我发现的唯一方法是，而且很容易）是：

1）创建一个对应数据库表的类，一个la SQLite，如：

```
public class WAMS_DUCKBILL
{
    public int Id { get; set; }
    public string PlatypusID { get; set; }
    public DateTime UpdateTimeUTC { get; set; }
    public double Income { get; set; }
    public double Outgo { get; set; }
} 
```

2）编写一个方法，将记录添加到该表中，例如：

```
 private async void InsertTestRecordIntoWAMSDuckbillTable()
        {
            WAMS_DUCKBILL duckbill = new WAMS_DUCKBILL { PlatypusID = "42", UpdateTimeUTC =     
DateTime.Now, Income = 3.85, Outgo = 8311.79 };
            await MobileService.GetTable<WAMS_DUCKBILL>().InsertAsync(duckbill);
        } 
```

3) 从 App.xaml.cs 的 OnLaunched 事件中调用该方法

4）然后可以通过在 LINQPad 中运行以下查询来看到（或者您希望 pee[k,r] 进入数据库）：

```
SELECT * FROM platypi.WAMS_DUCKBILL 
```

称我为老式的，但请注意我在这里使用的是旧的 SQL 而不是 LINQ；所以起诉我。无论如何，LINQPad 显示测试记录确实已插入到 WAMS 表中。瞧！就像吃蜗牛、戴着贝雷帽的猫说的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T18:38:22.423

Windows Azure 移动服务 (WAMS) 的重点是那些不想投入大量时间来开发后端的应用程序开发人员。因此，数据模型比您想象的要容易。

WAMS 中的表始终由 SQL 数据库中的表支持。您可以通过门户创建和删除表。

创建列有点不同。您只需使用它们即可创建列。一旦您为不存在的列写入数据，WAMS 就会自动创建该列。这就是所谓的动态模式。开发后，您应该禁用动态模式。您可以在移动服务的配置中找到它。

文档：[Windows Azure 移动服务中的数据访问](http://msdn.microsoft.com/en-us/library/windowsazure/dn167695.aspx)

# ruby - Padrino：模型的未定义方法会话

> ID：13708155
> 
> 赞同：0
> 
> 时间：2012-12-04T17:06:00.913
> 
> 标签：ruby, session, sinatra, datamapper, padrino

我不断收到“NoMethodError at /dataset_requests/create undefined method `session' for #”。DatasetRequest 是一个模型，而不是控制器。该问题是由闪存和重定向方法引起的。可能是什么问题？

我的控制器：

```
Ims.controllers :dataset_requests do

  get :index do
    @requests = DatasetRequest.all(:account_id => current_account.id, :order => [:date_requested.desc])
    render 'dataset_requests/index'
  end

  post :create do
    @request = DatasetRequest.new(params[:dataset_request])
    @request.account_id = current_account.id
    @request.date_requested = DateTime.now

    if @request.save
      flash[:notice] = 'Request was successfully created.'
      redirect url(:dataset_requests, :index)
    else
      flash[:error] = 'Request could not be created.'
      render 'dataset_requests/index'
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:29:15.580

现在我知道我犯的错误了。这是命名冲突。永远不要将你的 var 命名为“@request”。

# database - 如何存储数据库密码？

> ID：13708158
> 
> 赞同：-1
> 
> 时间：2012-12-04T17:06:02.687
> 
> 标签：database, web-services, security

在连接到一堆数据库的 Web 应用程序中，存储数据库用户名和密码的最安全方法是什么？我不能散列它们，因为我仍然必须使用它们来连接数据库。纯文本并没有真正削减它，因为数据库可能包含敏感信息。什么是最安全的存储它们以便它们仍然可以使用的方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:26:06.487

您可以在单独的文件中定义这些变量并将它们存储在不可通过网络访问的文件夹中，或者使文件不可通过网络访问并将其包含在您的连接文件中。

即配置文件

如果你使用 PHP

**凭证文件**

```
<?php 

define("database_username", "*****");

define("database_password", "*****");

define("database_server", "*****");

define("database_name", "*****");

?> 
```

..................................................... .....................................

**连接脚本**

```
 <?php 
    require ('../non-webaccessible-folder/credentials.php');

    class Databased {

    public static $connection;

    function __construct() {
        $this->connection = new mysqli(
                        database_server,
                        database_username,
                        database_password,
                        database_name
        );
    }

    public static function connect() {
        if (!isset(self::$connection)) {
            self::$connection = new mysqli(database_server, database_username, database_password, database_name);
        }
        return self::$connection;
    }

}

    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:25:20.570

有一些解决方案可以为这个问题提供一些解决方案，但在我看来，纯文本配置文件是完全可以接受的。如果入侵者可以访问您的文件系统，他们无论如何都可以获取原始数据库文件。

# php - 在php中写入带有特殊字符的文件

> ID：13708159
> 
> 赞同：0
> 
> 时间：2012-12-04T17:06:08.993
> 
> 标签：php

解决方案：

```
 $output = '–– € ––'; 
//written like this php 5 does not understand because it interprets it as single-byte chars.
//so i found the function below to write a multi-byte char in a string.

//unicode version of php's chr()
function uchr ($codes) {
    if (is_scalar($codes)) $codes= func_get_args();
    $str= '';
    foreach ($codes as $code) $str.= html_entity_decode('&#'.$code.';',ENT_NOQUOTES,'UTF-8');
    return $str;
}

//decimal values of unicode chars: – 8211 - 8211, [space] 32, € 8364,[space] 32, – 8211 - 8211
$output = uchr(8211,8211,32,8364,32,8211,8211);

//or
$output = uchr(8211,8211).' '.uchr(8364).' '.uchr(8211,8211);

echo $output; 
```

问题：

我怎样才能将这些特殊字符写入一个简单的文件？

```
$file = "./upload/myfile.txt";
$output = "–– € ––".PHP_EOL; // the "–" is not an underscore _ or - but –
file_put_contents($file, $output); 
```

如果我从浏览器[http://mydomain.com/upload/myfile.txt](http://mydomain.com/upload/myfile.txt)访问此文件，我只会得到“�”字符。

但是，如果我使用 Zend Developer 或我的本地文本编辑器（在 OSX 上）保存“–– € ––”并上传这一切都很好。浏览器正确显示它。

我怎样才能用php实现这一点？似乎php使用与我的macbook不同的方式来编写文件。以为我认为 php 的标准是 UTF-8，我还在本地文本编辑器中将文件保存为 UTF-8。

额外信息：在上传文件夹中的 .htaccess 文件中，我写道：

```
 AddDefaultCharset utf-8
  AddCharset utf-8 .txt 
```

否则，来自 firefox 的 firebug 插件会显示未指定字符集的消息。

有任何想法吗？它与保存文件有关，因为我上传的文件显示正确。

我在保存文件时尝试了不同的选项，例如：

```
$output = mb_convert_encoding($output, 'UTF-8', 'OLD-ENCODING'); 
```

和php的iconv函数，但我找不到解决方案。

任何帮助是极大的赞赏。

编辑：如果我从上传的文件中获取内容并回显它，则会发生以下情况

```
$output = file_get_contents('./upload/myuploadedfile.txt',FILE_USE_INCLUDE_PATH); 
//it show correctly –– € ––
$output = $output[1]; //it shows a �
$output = $output[3]; //it shows a �

echo $output; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:25:14.443

PHP 将完全按照源代码中的内容写入文件的内容。它完全按照 .php 文件中编码的字节获取字节并将它们放入文件中。从那时起，这取决于文件的解释方式。假设您的源代码实际上是 UTF-8 编码的，那么文件也是如此。尝试使用可以理解 UTF-8 的文本编辑器打开它。将浏览器解释它的编码更改为 UTF-8（查看菜单 > 编码）。当您在浏览器中打开 Web 服务器时，检查 Web 服务器是否确实设置了正确的字符集标头（Firebug 网络选项卡，响应标头）。

显示损坏的 UTF-8 字符是正确`$output[0]`的，因为 PHP 只为您提供多字节字符“-”的第一个字节。

有关更深入的信息，请参阅[每个程序员绝对、肯定需要了解的关于使用文本的编码和字符集](http://kunststube.net/encoding/)的知识。

# c# - ASP.Net MVC 中带有 OfficeOpenXml 的新 Excel 文件：不返回任何内容

> ID：13708165
> 
> 赞同：1
> 
> 时间：2012-12-04T17:06:31.617
> 
> 标签：c#, javascript, ajax, asp.net-mvc, excel

# 语境

[我使用OfficeOpenXml](http://epplus.codeplex.com/)创建了一个 Excel 文件，但浏览器没有返回任何内容。

知道为什么吗？

# 代码

**[C＃] ：**

```
public ActionResult ExportToExcel(string[] mails)
{
    using (var ep = new ExcelPackage())
    {
        var ws = ep.Workbook.Worksheets.Add("Contacts");

        for (var i = 0; i < mails.Length; i++)
        {
            ws.Cells[i + 1, 1].Value = mails[i];
        }

        Byte[] bytes = ep.GetAsByteArray();

        return new FileContentResult(bytes, "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet") { FileDownloadName = "Contacts.xls" };
    }
} 
```

**[JavaScript]：**

```
$('#contacts-excel-btn').click(function () {
    var mails = [],
        uniqueMails = [];

    $('.email-td').each(function () {
        var txt = $(this).text();
        if (txt) {
            mails.push(txt);
        }
    });

    $.each(mails, function (i, el) {
        if ($.inArray(el, uniqueMails) === -1) {
            uniqueMails.push(el);
        }
    });

    if (uniqueMails[0]) {
        $.ajax({
            type: 'POST',
            url: '/Contact/ExportToExcel',
            dataType: 'json',
            traditional: true,
            data: { mails: uniqueMails }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:33:20.830

好的，我解决了我的问题。

根据[这篇文章](http://slodge.blogspot.fr/2012/09/downloading-dynamic-excel-files-from.html)，我将我的替换`return`为：

```
var butes = ep.GetAsByteArray();
var fileName = "Contacts.xlsx";

return base.File(bytes, "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", fileName); 
```

根据[这篇文章](http://www.sitepoint.com/forums/showthread.php?380625-AJAX-s-XMLHttpRequest-used-to-bring-back-PDF-and-Excel-docs)，我用 html 表单方法替换了我的 ajax 方法：

**[JS]：**

```
$.each(uniqueMails, function (i, el) {
    $('#contacts-excel-form').append('<input type="hidden" name="mails[' + i + ']" value="' + el + '" />');
});

$('#contacts-excel-form').submit(); 
```

**[C＃] ：**

```
var mails = Request.Form.AllKeys;

for (var i = 0; i < mails.Length; i++)
{
    ws.Cells[i + 1, 1].Value = Request.Form[mails[i]];
} 
```

# eclipse - Eclipse：为特定视图转换命令中的操作

> ID：13708167
> 
> 赞同：3
> 
> 时间：2012-12-04T17:06:35.213
> 
> 标签：eclipse, eclipse-rcp, e4

我最初的 RCP 是在 3.x 中启动的，目前我在 Juno 上使用兼容层运行它。我正在考虑进行软迁移，所以我开始慢慢改变我的做法。我正在做的一件事就是把我的行动变成命令。

我目前有一个视图（类似于目录资源管理器），可以将操作添加到视图的工具栏和弹出菜单。这些动作调用视图中的特定方法，例如上一个目录。

通过操作很容易做到这一点，因为我只是在 View 类本身中创建我的操作并以编程方式将它们添加到工具栏

```
IToolBarManager mgr = getViewSite().getActionBars().getToolBarManager();
        mgr.add(upDirectory);
        mgr.add(refresh);
        mgr.add(changeRoot); 
```

并且动作的创建是从`createPartControl()`

```
upDirectory = new Action("Go up one directory") {
            public void run() {
                goUpOneDirectory();
            }
        }; 
```

`goUpOneDirectory()`视图中的方法在哪里

如果我想将其转换为命令，我希望能够在我的处理程序中访问视图的这个方法。所以我尝试了以下方法，

```
private void createHandlers()
    {
        IHandlerService handlerService = (IHandlerService) getSite().getService(IHandlerService.class);
IHandler upDirHandler = new AbstractHandler() {
            public Object execute(ExecutionEvent event)
                    throws ExecutionException {
                goUpOneDirectory();
                return null;
            }
        };
        handlerService.activateHandler("updir.id", upDirHandler);
    } 
```

`createHandlers`中调用并`createPartControl`通过plugin.xml将命令添加到视图的工具栏。问题是，当我的视图失去焦点时，它会禁用工具栏中这些命令的按钮。

我希望它们始终保持启用状态。我怎样才能做到这一点？

我知道`isEnabled()`返回结果一直为真，所以我不确定它为什么会发生。activateHanlder 被调用一次，`createPartControl`所以我觉得它应该一直保持活动状态。

编辑：好的，我刚看到[这个](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/workbench_cmd_handlers.htm)，

> 来自工作台部件站点的 IHandlerService 是部件处理程序服务。通过部件处理程序服务激活的任何处理程序仅在该部件处于活动状态时才处于活动状态。当部件被释放时，添加到部件处理程序服务的任何侦听器都将被删除，并且任何活动的处理程序都将被停用（但不被释放）。

那么我怎样才能得到这个，

> 工作台中的 IHandlerService 是全局处理程序服务。它没有提供特殊的激活范围或生命周期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:21:49.460

对不起，我应该再等一会儿再问，我想通了！

我改变了，

```
IHandlerService handlerService = (IHandlerService) getSite().getService(IHandlerService.class); 
```

至

```
IHandlerService handlerService = (IHandlerService) PlatformUI.getWorkbench().getService(IHandlerService.class); 
```

它奏效了。我会留下这个问题，以防它帮助其他人。

# c# - 如果不在合并的可执行文件上使用 csc.exe，ApplicationSettingsBase 和 XmlSerialization 将无法工作

> ID：13708171
> 
> 赞同：1
> 
> 时间：2012-12-04T17:06:56.423
> 
> 标签：c#, .net, xml-serialization

我尝试使用 ApplicationSettingsBase 类的 Save 方法保存一些应用程序数据。我有一个 net 2.0 exe (BugTest.exe) 和一个 net 2.0 dll (MyLibrary.dll)。Exe 正在使用 dll（引用它）。我的主要exe代码是这样的：

```
public class ApplicationSettings : ApplicationSettingsBase
{
    [UserScopedSetting]
    [DefaultSettingValue(null)]
    public Settings Settings
    {
        get
        {
            return ((Settings)this["Settings"]);
        }
        set
        {
            this["Settings"] = value;
        }
    }

    [UserScopedSetting]
    [DefaultSettingValue(null)]
    public LibrarySettings LibrarySettings
    {
        get
        {
            return ((LibrarySettings)this["LibrarySettings"]);
        }
        set
        {
            this["LibrarySettings"] = value;
        }
    }  
}

public class Settings
{
    public string FirstValue { get; set; }
    public string LastValue { get; set; }
}

private void btnSave_Click(object sender, EventArgs e)
{
    Settings settings = new Settings {FirstValue = "1", LastValue = "2"};
    LibrarySettings librarySettings = new LibrarySettings { LibrarySettings1Value = "1", LibrarySettings2Value = "2" };

    ApplicationSettings applicationSettings  = new ApplicationSettings {Settings =  settings, LibrarySettings =  librarySettings};
    applicationSettings.Save();
} 
```

MyLibrary.dll 代码是：

```
public class LibrarySettings
{
    public string LibrarySettings1Value { get; set; }
    public string LibrarySettings2Value { get; set; }
} 
```

为我的项目使用预构建的 xmlSerialization dll 对我来说很重要。所以，然后我添加**“$(FrameworkSDKDir)\Bin\sgen” /a:"$(TargetPath)" /force**后建事件命令行（对于 exe 和 dll 都适用）。然后我的发布目录上有两个 xmlSerialization dll：**（BugTest.XmlSerializers.dll 和 MyLibrary.XmlSerializers.dll）**

我启动我的应用程序并启动进程监视器。一切正常，我的应用程序设置已成功保存。而且我看到 csc.exe（运行时编译器）在序列化期间从不运行。在没有 csc.exe 的情况下进行 Xmlserialization 对我来说也很重要。所以对我来说一切都很好。

同样在我的项目中，我必须合并 BugTest.exe 和 Mylibrary.dll。**所以我使用 ILMerge 并合并了 BugTest.exe 和 MyLibrary.dll**。输出是 BugTest.exe。（BugTest.XmlSerializers.dll 和 MyLibrary.XmlSerializers.dll 未合并。）当我运行并单击此合并的 BugTest.exe 的保存按钮时，可以再次将应用程序数据保存到文件中，但进程监视器屏幕提醒我此 xmlserialization 由csc.exe。BugTest.XmlSerializers.dll 和 MyLibrary.XmlSerializers.dll 与 BugTest.exe 位于同一目录中，但**为什么我的应用程序这次使用 csc.exe 进行 XmlSerialization 而不是 XmlSerializers.dlls ？如何强制合并的可执行文件使用 XmlSerializers.dlls ？**

> 注意：由于 OOP 设计，我不应该将 LibrarySettings 类代码从 MyLibrary.dll 带到 BugTest.exe 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:56:04.130

我刚刚通过更改某些进程的顺序解决了这个问题。

如果我在不生成 XMLSerialization dll 的情况下编译项目，然后将 BugTest.exe 和 MyLibrary.dll 合并为新的 BugTest.exe，然后从这个新的 BugTest.exe（使用 sgen）生成 BugTest.XmlSerialization.dll，那么我的应用程序可以完美运行。

这篇文章[http://blog.bits-in-motion.com/2009/11/xmlserializers-moduleversionid-ilmerge.html](http://blog.bits-in-motion.com/2009/11/xmlserializers-moduleversionid-ilmerge.html)对我的解决方案非常有用。

# javascript - 根据 url 子域替换或隐藏元素

> ID：13708173
> 
> 赞同：0
> 
> 时间：2012-12-04T17:07:01.447
> 
> 标签：javascript, jquery, html, url, dom

尝试根据子域替换和隐藏某些元素。例如，如果 url 是“www.uownrealestate.com”，则加载普通站点，但如果它是“justin2.uownrealestate.com”，则隐藏包含带有文本“Agents”的锚链接的元素。

```
$(document).ready(function() {
    var option = 'justin2';
    var full = window.location.host
    //window.location.host is subdomain.domain.com
    var parts = full.split('.')
    var subDomain = parts[0]
    var domain = parts[1]

    if (subDomain == option) {

        showDiv();
    }
});

function showDiv() {
    $("li:has(a:contains('Agents'))").hide();

}​ 
```

**编辑**

```
$(document).ready(function() {
var option = 'justin2';

var full = window.location.host
if(full.indexOf(option) > -1){
showDiv(); 
}
});
function showDiv() {
$("li:has(a:contains('Agents'))").hide();

} 
```

仍然没有任何事情发生。还有其他建议吗？此脚本也在外部 js 文件中。这根本不重要吗？这是 li 元素的片段。

```
 <li><a href="only-at-uown.html">Only at uOwn</a>
    <ul>
<li><a href="showing-simulations.html"><span> Showing Simulations</span></a></li>
<li><a href="3d-mapping.html"><span> 3D Mapping</span></a></li>
<li><a href="solar-signs.html"><span> Solar-Powered Yard Signs</span></a></li>
<li><a href="paper-free-office.html"> Paper-Free Offices</a></li>
    <li><a href="prestige-package.html"> Prestige Package</a></li>
<li><a href="only-at-uown.html"> <em>Much more...</em></a></li>

    </ul>
   </li>

 <li><a href="realtors-agents.html">Agents</a></li>

 <li><a href="3d-showcase.html">3D Showcase</a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:09:02.067

尝试使用`.indexOf(`

```
var full = window.location.host;
if(full.indexOf(option) > -1){
   showDiv(); 
} 
```

# sql - 在 Teradata SQL 中查找给定列的哪些行具有不同的值

> ID：13708176
> 
> 赞同：24
> 
> 时间：2012-12-04T17:07:15.430
> 
> 标签：sql, join, teradata, rows, matching

我正在尝试比较来自同一 ID 的两个地址以查看它们是否匹配。例如：

```
Id  Adress Code     Address
1   1               123 Main
1   2               123 Main
2   1               456 Wall
2   2               456 Wall
3   1               789 Right
3   2               100 Left 
```

我只是想弄清楚每个 ID 的地址是否匹配。所以在这种情况下，我只想返回 ID 3，因为地址代码 1 和 2 具有不同的地址。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-04T17:15:52.010

将表与自身连接起来，并给它两个不同的别名（`A`在`B`下面的例子中）。这允许比较同一个表的不同行。

```
SELECT DISTINCT A.Id
FROM
    Address A
    INNER JOIN Address B
        ON A.Id = B.Id AND A.[Adress Code] < B.[Adress Code]
WHERE
    A.Address <> B.Address 
```

“小于”比较`<`可确保您获得 2 个不同的地址，并且不会两次获得相同的 2 个地址代码。改用“不等于” `<>`，将产生代码为 (1, 2) 和 (2, 1); 它们中的每一个都为`A`别名和`B`别名。

join 子句负责配对 where 子句作为 where 子句测试附加条件的行。

* * *

上面的查询适用于任何地址代码。如果您想将地址与特定地址代码进行比较，您可以将查询更改为

```
SELECT A.Id
FROM
    Address A
    INNER JOIN Address B
        ON A.Id = B.Id
WHERE                     
    A.[Adress Code] = 1 AND
    B.[Adress Code] = 2 AND
    A.Address <> B.Address 
```

我想这可能有助于查找帐单地址（例如，地址代码 = 1）与送货地址（地址代码 = 2）不同的客户。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T17:18:37.157

这适用于 PL/SQL：

```
select count(*), id,address from table group by id,address having count(*)<2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T17:17:32.133

您可以通过以下方式使用组来执行此操作：

```
select id, addressCode
from t
group by id, addressCode
having min(address) <> max(address) 
```

另一种写法可能看起来更清晰，但效果不佳：

```
select id, addressCode
from t
group by id, addressCode
having count(distinct address) > 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T17:14:38.793

就个人而言，我会使用 Perl 或 Python 以格式将它们打印到文件中

```
<COL_NAME>:  <COL_VAL> 
```

对于每一行，以便文件的行数与列数一样多。然后我会`diff`在这两个文件之间做一个，假设你在 Unix 上或者在另一个操作系统上使用一些等效的工具来比较它们。如果您有多个记录集（即多于一行），我会在每个文件行之前添加，然后该文件将有 NUM_DB_ROWS * NUM_COLS 行

# javascript - 表单在 Internet Explorer 中不工作，但在其他浏览器中工作

> ID：13708179
> 
> 赞同：0
> 
> 时间：2012-12-04T17:07:18.943
> 
> 标签：javascript, html

出于某种原因，我的表单可以在除 Internet Explorer 之外的所有浏览器中使用。

**这是 HTML：** 这是由我以外的其他人设计的。

```
 <label for="name">Name:</label><br />
    <input name="name" type="text" /><br />
    <label for="address">Address:</label><br />
    <input name="address" type="text" /><br />
    <label for="phone">Phone:</label><br />
    <input name="phone" type="text" /><br />
    <label for="email">Email:</label><br />
    <input name="email" type="text" /><br />
    <input class="button" name="submit" style="margin-top:10px;" type="button" value="Join Club" /></div> 
```

**这是 JavaScript：**这是由我以外的人设计的。

```
 <script type="text/javascript">
    ///////////////////////////////////////////////ARRAY DUMP FUNCTION
    function dump(a,b){var c="";if(!b)b=0;var d="";for(var e=0;e<b+1;e++)d+="            ";if(typeof a=="object"){for(var f in a){var g=a[f];if(typeof g=="object"){c+=d+"'"+f+"' ...\n";c+=dump(g,b+1)}else{c+=d+"'"+f+"' => \""+g+'"\n'}}}else{c="===>"+a+"<===("+typeof a+")"}return c}
  /////////////////////////////////////////////
$(document).ready( function() {
    $('.clubregister  input[name="submit"]').click( function(event) {
        event.preventDefault();
                    /*alert('This section is under construction, please contact us to get set up!\n Sorry for the inconvenience');return false;*/
        //CREATE ARRAY FROM FORM DATA SERIALIZED
        var $formData = $('.clubregister input[type="text"], .clubregister textarea').serializeArray();
        //PUSH ACTION TO ARRAY
        $formData.push({'name':'action','value':'registerForClub'});
        //SEND DATA TO HANDLER
        $.ajax({
            url:'http://torkliftcentralrv.com/club_register_handle.php',
            dataType:'json',
            async:false,
            data:$formData,
            success: function(data) {
                //console.log(dump(data));
                //CREATE MESSAGE
                var message = '';
                var consolemessage = '';
                //IF ERRORS
                if(typeof data['error'] !== 'undefined') {
                    //APPEND ERRORS TO MESSAGE
                    $.each( data['error'], function( index,data) {
                        message += (data + "\n");
                    });
                }
                //IF MESSAGES
                if(typeof data['message'] !== 'undefined') {
                    //APPEND MESSAGES TO MESSAGE
                    $.each( data['message'], function( index,data) {
                        message += (data + "\n");
                    });
                }

                //IF CONSOLE MESSAGES
                if(typeof data['console'] !== 'undefined') {
                    //APPEND CONSOLE MESSAGES TO MESSAGE
                    $.each( data['console'], function( index,data) {
                        consolemessage += (data + "\n");
                    });
                }
                //IF SUCCESS SENT FROM SERVER
                if(typeof data['success'] !== 'undefined') {
                    //CLEAR FORM
                    $('.clubregister input[type="text"], .clubregister textarea').val('');
                }
                alert(message);
                console.log(consolemessage);
            }
        });
    });
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:16:46.533

您正在尝试执行跨域 Ajax 请求。IE8 和 IE9 支持跨域请求，但它们使用自定义 API，`XDomainRequest`有[**几个限制**](https://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx?Redirected=true)。

即，链接文档中的#4：“请求**标头****仅`text/plain`支持`Content-Type`**”。您要求 JSON，但不能`Content-Type: text/json`使用`XDomainRequest`.

尝试删除该`dataType:'json'`行并添加`data = $.parseJSON(data)`到`success`处理程序的第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:17:16.717

删除行：

`console.log(consolemessage);`

IE 无法处理此问题，并会导致您出现问题。

# python - python-dev安装错误：ImportError: No module named apt_pkg

> ID：13708180
> 
> 赞同：141
> 
> 时间：2012-12-04T17:07:20.163
> 
> 标签：python, linux, installation, debian

我是 Debian 用户，我想安装 python-dev，但是当我以 root 身份在 shell 中运行代码时：

```
# aptitude install python-dev 
```

我收到以下错误：

```
Traceback (most recent call last):       
  File "/usr/bin/apt-listchanges", line 28, in <module>
    import apt_pkg
ImportError: No module named apt_pkg 
```

似乎是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2016-03-26T07:57:16.953

我在做的时候遇到了这个问题`sudo apt-get update`。我的环境是 debian8，带有 python2.7 + 3.4（默认）+ 3.5。

以下代码只会`apt_pkg....so`为 python 3.5 重新创建一个文件

```
sudo apt-get install python3-apt --reinstall 
```

以下代码解决了我的问题，

```
cd /usr/lib/python3/dist-packages
sudo ln -s apt_pkg.cpython-{your-version-number}-x86_64-linux-gnu.so apt_pkg.so 
```

适当更换`{your-version-number}`。

**注意**，以下将创建一个从 apt_pkg37m 到 apt_pkg36m 的符号链接。**确保您链接到正确的版本，或者至少链接到现有版本**，`ll apt_pkg.cpython-*`并查看您安装了哪些版本。

```
sudo ln -s apt_pkg.cpython-{36m,37m}-x86_64-linux-gnu.so 
```

因此，很明显，python3-apt 检查的是最高的 Python 版本，而不是当前使用的 Python 版本。

* * *

## 回答 #2

> 赞同：141
> 
> 时间：2017-06-18T06:02:39.860

通过这个解决它：

```
cd /usr/lib/python3/dist-packages
cp apt_pkg.cpython-34m-i386-linux-gnu.so apt_pkg.so 
```

或者：

```
cd /usr/lib/python3/dist-packages
cp apt_pkg.cpython-35m-x86_64-linux-gnu.so apt_pkg.so 
```

基本上，如果你得到一个`No such file or directory`只是`ls`试图得到正确的名字。

* * *

## 回答 #3

> 赞同：90
> 
> 时间：2019-07-22T14:08:48.410

在我尝试从 deadsnakes 存储库安装 Python3.7 后，这发生在 Ubuntu 18.04.2 上。

解决方案是这样的

1)`cd /usr/lib/python3/dist-packages/`

2)`sudo ln -s apt_pkg.cpython-36m-x86_64-linux-gnu.so apt_pkg.so`

* * *

## 回答 #4

> 赞同：73
> 
> 时间：2012-12-05T06:46:16.437

确保你有一个可以工作的 python-apt 包。您可以尝试删除并再次安装该软件包以解决无法找到 apt_pkg.so 的问题。

```
apt-get install python-apt 
```

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2018-11-05T11:59:07.960

当新版本的 python 与旧版本一起安装时，通常会发生此错误，例如；

*   Ubuntu 18.04.1 附带 python 版本 3.6.6
*   安装 ppa:deadsnakes/python3.7.1 或替代
*   运行一个使用 apt_pkg 模块的命令并得到一个错误，例如；

    ```
     from CommandNotFound.db.db import SqliteDatabase
    File "/usr/lib/python3/dist-packages/CommandNotFound/db/db.py", line 5, in <module>
        import apt_pkg 
    ```

当我们使用 apt 安装非发行版 python3 版本时，它会将共享模块目录设置为 python3 的目录，通常它将是`/usr/lib/python3`.

大多数时候这没问题，但在某些情况下，不同版本的 python 依赖于不同的库或共享对象/库，而不是其他 python 版本，所以正如其他答案指出的那样，我们需要将 .SO 链接到正确的python版本。因此，如果我们在 64 位系统上安装了 python3.6，那么 apt_pkg .SO 链接将是

```
sudo ln -s apt_pkg.cpython-36m-x86_64-linux-gnu.so apt_pkg.so 
```

但问题在于，当我们安装较新的python版本时，链接会更新为指向最新的python版本，这导致找不到apt_pkg模块的错误。通过检查发行版附带的 python 版本，您可以创建如上所示的链接。或者我们使用一种方法为命令提供选择 python 版本来链接 .SO 的方法，例如；

```
sudo ln -s apt_pkg.cpython-{36m,35m,34m}-x86_64-linux-gnu.so apt_pkg.so 
```

因为 python 将创建指向最新安装的 python 版本的链接，所以我们为命令提供了从 3 个 python 版本中进行选择的选项，其中它将选择给定的最高版本。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2020-03-31T22:04:40.423

在 ubuntu18.04 上更新 python3.7 后，这对我有用

```
cd /usr/lib/python3/dist-packages
sudo cp apt_pkg.cpython-36m-x86_64-linux-gnu.so apt_pkg.so 
```

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2019-11-28T13:21:39.290

[@user8178061](https://stackoverflow.com/a/44612200/9885430)的解决方案运行良好，但我对我的版本进行了一些修改，即`python3.7`Ubuntu

我`apt_pkg.cpython-3m-i386-linux-gnu.so`用`apt_pkg.cpython-36m-x86_64-linux-gnu.so`

这里要执行的两个命令：

`cd /usr/lib/python3/dist-packages`

`sudo cp apt_pkg.cpython-36m-x86_64-linux-gnu.so apt_pkg.so`

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2020-10-07T09:58:23.407

我看到每个人都在说如何通过奇怪的复制等来解决它，但没有人真正说出问题发生的***原因。***

所以让我解释一下，对于那些像我一样不想仅仅因为 SO 上的某人告诉他们而弄乱系统文件的人。

* * *

问题是：

*   许多系统脚本都将 python3 shebang 硬编码到其中。你可以自己检查一下：

```
~$ grep -R "\#\!/usr/bin/python3" /usr/lib/*

/usr/lib/cnf-update-db:#!/usr/bin/python3
/usr/lib/command-not-found:#!/usr/bin/python3
/usr/lib/cups/filter/pstotiff:#!/usr/bin/python3
/usr/lib/cups/filter/rastertosag-gdi:#!/usr/bin/python3 -u
grep: /usr/lib/cups/backend/cups-brf: Permission denied
/usr/lib/cups/backend/hpfax:#!/usr/bin/python3
/usr/lib/language-selector/ls-dbus-backend:#!/usr/bin/python3
/usr/lib/python3/dist-packages/language_support_pkgs.py:#!/usr/bin/python3
/usr/lib/python3/dist-packages/softwareproperties/MirrorTest.py:#!/usr/bin/python3
/usr/lib/python3/dist-packages/cupshelpers/installdriver.py:#!/usr/bin/python3
/usr/lib/python3/dist-packages/cupshelpers/openprinting.py:#!/usr/bin/python3
/usr/lib/python3/dist-packages/cupshelpers/xmldriverprefs.py:#!/usr/bin/python3
/usr/lib/python3/dist-packages/cupshelpers/smburi.py:#!/usr/bin/python3
/usr/lib/python3/dist-packages/cupshelpers/ppds.py:#!/usr/bin/python3
/usr/lib/python3/dist-packages/cupshelpers/debug.py:#!/usr/bin/python3
/usr/lib/python3/dist-packages/DistUpgrade/dist-upgrade.py:#!/usr/bin/python3
/usr/lib/python3/dist-packages/CommandNotFound/db/creator.py:#!/usr/bin/python3
/usr/lib/python3/dist-packages/CommandNotFound/db/db.py:#!/usr/bin/python3
/usr/lib/python3/dist-packages/Quirks/quirkreader.py:#!/usr/bin/python3
grep: /usr/lib/ssl/private: Permission denied
/usr/lib/system-service/system-service-d:#!/usr/bin/python3
/usr/lib/ubuntu-release-upgrader/check-new-release-gtk:#!/usr/bin/python3
/usr/lib/ubuntu-release-upgrader/do-partial-upgrade:#!/usr/bin/python3
/usr/lib/ubuntu-release-upgrader/check-new-release:#!/usr/bin/python3
/usr/lib/update-notifier/package-data-downloader:#!/usr/bin/python3
/usr/lib/update-notifier/backend_helper.py:#!/usr/bin/python3
/usr/lib/update-notifier/apt_check.py:#!/usr/bin/python3
/usr/lib/update-notifier/apt-check:#!/usr/bin/python3 
```

*   python apt package `python-apt`/`python3-apt`是系统包，所以是默认系统python

**因此，脚本将始终获取当前链接到的版本`python3`，但由于 apt 包不存在而失败。**

* * *

**一般解决方案：永远不要更改默认`python3`链接。曾经。**这也适用于`python`链接——如果一个应用程序是用 Python2 编写的，其中包含一些在 Python3 中不起作用的旧语法元素，则该应用程序将无法工作。

[我的终端出现这种情况是因为我使用了 Terminator，它显然是用 Python2.7 编写的，与 Python3 不兼容。]

* * *

**此处提供的解决方案建议复制/链接 apt 包文件或更改`python3`链接。**

让我们分析一下：

1.  复制/链接apt包

这*应该不是*问题，因为从 Python3.4 开始，所有 python 脚本也可以在较新的版本上运行。

至今。但它可能会在未来中断 - 如果您将系统保持足够长的时间。

2.  换回`python3`链接

这是一个很好的解决方案，因为我们可以回到“永不更改链接”

* * *

*“但我喜欢只需要打字`python`！”* - 我也喜欢这个！这就是我首先解决这个问题的方式！

1.  **一般来说，您应该避免手动更改系统链接 -`update-alternatives`而是使用链接不同的版本**。这适用于具有多个版本的任何应用程序。这仍然会破坏那些系统脚本（因为它确实会更改链接），但是您可以轻松地来回切换，而不必担心您是否将链接和目标按正确的顺序放置或打错了。

2.  考虑为您的链接或别名使用除`python`/之外的其他名称。`python3`

3.  或者将您自己的`python`/`python3`链接添加到 PATH（就像虚拟环境一样），而不更改系统链接。

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2020-04-27T11:39:47.437

1.  检查您的默认 Python 3 版本：

    ```
    python3 --version
    Python 3.7.5 
    ```

2.  `cd`进入`/usr/lib/python3/dist-packages`并检查`apt_pkg.*`文件。你会发现你的默认 Python 版本没有：

    ```
    ll apt_pkg.*
    apt_pkg.cpython-36m-x86_64-linux-gnu.so 
    ```

3.  创建符号链接：

    ```
    sudo ln -s apt_pkg.cpython-36m-x86_64-linux-gnu.so apt_pkg.cpython-37m-x86_64-linux-gnu.so 
    ```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2013-12-13T00:16:42.940

`apt_pkg.so`由于某种原因，python3 dist-packages 目录中缺少我的安装。（`apt_pkg.cpython-33m-x86_64-linux-gnu.so`在那里？！）但是我必须`apt_pkg.so -> apt_pkg.cpython-33m-x86_64-linux-gnu.so` 在`/usr/lib/python3/dist-packages`

我不确定我的升级是否损坏或为什么会这样。尝试升级后发生（精确->稀有->量子升级）

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2019-10-13T15:07:55.113

如果您使用 python 3.7 通过更新替代品将其降级到 python 3.6，这对我有用

```
sudo update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.6 1

sudo update-alternatives --config python3 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2018-08-29T21:24:53.930

最后的手段是`sudo cp /usr/lib/python3/dist-packages/apt_pkg.cpython-35m-x86_64-linux-gnu.so /usr/lib/python3/dist-packages/apt_pkg.cpython-36m-x86_64-linux-gnu.so` 如果`ln`命令对你来说太多了，或者不知何故神奇地不起作用。

`cp``mv`如果您只专注于使用一个 Python 版本，也可以使用上述方法。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-07-07T14:24:11.463

我在 Ubuntu 16.04 上，并升级到 Python 3.7。这是我在尝试添加 PPA 时遇到的错误

```
 sudo add-apt-repository ppa:ubuntu-toolchain-r/test                                           
Traceback (most recent call last):
  File "/usr/bin/add-apt-repository", line 11, in <module>
    from softwareproperties.SoftwareProperties import SoftwareProperties, shortcut_handler
  File "/usr/lib/python3/dist-packages/softwareproperties/SoftwareProperties.py", line 27, in <module>
    import apt_pkg
ModuleNotFoundError: No module named 'apt_pkg' 
```

我能够`apt_pkg.cpython-34m-x86_64-linux-gnu.so` 通过创建以下符号链接与我的初始 python 3.4 建立符号链接来修复此错误

```
sudo ln -s apt_pkg.cpython-34m-x86_64-linux-gnu.so apt_pkg.so 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-08-22T17:51:45.880

如果您使用的是 python 3.5，请降级到 3.4。这是最安全的做法。

在下面`/usr/lib/python3/dist-packages`你会看到`*34m*`哪个 python 3.5 不能使用。扎扎回答符号链接就可以了。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2018-10-05T04:07:39.430

除了为 制作符号链接外`apt_pkg.so`，您可能还想以`apt_inst.so`相同的方式制作`apt_pkg.so`。

```
ln -s apt_inst.cpython-35m-x86_64-linux-gnu.so apt_inst.so 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-03-07T12:09:48.930

Windows 10 WSL v1 (Ubuntu 16.04.6 LTS)

这个[reddit 答案](https://www.reddit.com/r/Python/comments/dw02l8/no_module_named_apt_pkg/f917wm4?utm_source=share&utm_medium=web2x)（稍作修改对我有用）

`sudo ln -sfn /usr/lib/python3/dist-packages/apt_pkg.cpython-35m-x86_64-linux-gnu.so apt_pkg.so`

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-04-29T00:42:02.040

花了 4 个小时后，我得到了这个最终对我有用的解决方案，我希望这会有所帮助......

重要的是要了解，有时当您从较旧的 python 版本升级时，某些包会保留在以前的版本路径中，所以这就是我所做的：

```
cd /usr/lib/python3/dist-packages 
```

检查是否存在名为`apt_pkg.cpython-35m-x86_64-linux-gnu.so`或 34m 或 36m 列出文件的文件，找到后删除当前`apt_pkg.so`文件

```
/usr/lib/python3/dist-packages 
```

最后使用如下方法创建一个具有正确路径的链接`apt_pkg.so`：

```
cd /usr/lib/python3/dist-packages
sudo ln -s apt_pkg.cpython-35m-x86_64-linux-gnu.so apt_pkg.so 
```

现在您可以再试一次，它应该可以工作。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-07-19T13:16:56.560

这个变体对我有用。

```
cd  /usr/lib/python3/dist-packages
ls -la /usr/lib/python3/dist-packages
sudo cp apt_pkg.cpython-38-x86_64-linux-gnu.so apt_pkg.so 
```

如果您收到一条错误消息，说明符号链接的级别太多，如下所示：

```
cp: failed to access '/usr/lib/python3/dist-packages/apt_pkg.so': Too many levels of symbolic links 
```

然后您需要简单地取消链接 apt_pkg.so 文件。使用以下命令：

```
sudo unlink apt_pkg.so 
```

然后使用命令

```
sudo cp apt_pkg.cpython-38-x86_64-linux-gnu.so apt_pkg.so 
```

祝你好运！

原始答案：[https ://askubuntu.com/a/1227625](https://askubuntu.com/a/1227625)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-07-29T18:57:21.843

我试图创建链接，但发生了许多其他问题。所以，你可以选择旧版本的python来安装东西：

```
sudo update-alternatives --config python3 
```

并在使用相同的命令后立即返回所需的版本。希望它有效。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-04-23T00:30:40.593

没有一个答案对我有用（我使用的是 Ubuntu 16.04 和 Python 3.6）。所以我最终解决了以下问题：

1-连接到服务器的FTP

2-转到文件夹“/usr/lib/python3/dist-packages/”

3-复制文件“apt_pkg.cpython-3 **5** m-x86_64-linux-gnu.so”

4-将此重复的文件重命名为“apt_pkg.cpython-3 **6** m-x86_64-linux-gnu.so”

而已！

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-12-20T20:48:18.817

好吧，对我来说最干净的解决方案是在其特定空间中使用您的新 Python 版本重建相关库。

我现在正在这样做，从 Python3.9 切换到 Python3.10.1。

所以：

> ```
> cd /tmp/
> apt source python3-apt
> cd python-apt-version-ecc
> python3-new-version setup.py build
> python3-new-version setup.py install 
> ```

也可以使用依赖包（`software-properties`,`python-launchpadlib`等）完成此操作，现在`add-apt-repository`就像一个魅力。

哪些要重新编译？只需注意跑步的抱怨`add-apt-repository`。

顺便说一句，我在`Ubuntu 21.04`，但在任何类似 Debian 的系统上，逻辑都是相同的。

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2020-03-18T19:23:14.713

请查看以下文档。

它可以帮助您解决问题。

[解决python版本替换为ModuleNotFoundError: No module named 'apt_pkg'的问题](http://www.programmersought.com/article/55001874709/)

* * *

## 回答 #23

> 赞同：-4
> 
> 时间：2019-02-21T05:27:20.890

请尝试通过设置语言环境变量来解决此问题：

```
export LC_ALL="en_US.UTF-8"

export LC_CTYPE="en_US.UTF-8" 
```

* * *

## 回答 #24

> 赞同：-6
> 
> 时间：2018-01-05T15:37:22.250

以防万一它有助于另一个，我终于解决了这个问题，这显然是由python版本冲突引起的，通过重定向链接python3，然后将其重定向到正确的python版本：

```
sudo rm /usr/bin/python3
sudo ln -s /usr/bin/python3.4 
```

您可能需要输入正确的 python 版本，通过以下方式找到：

```
python3 -V 
```

# java - 方法名称交换 - public abstract 或 abstract public

> ID：13708181
> 
> 赞同：15
> 
> 时间：2012-12-04T17:07:24.490
> 
> 标签：java

我最近遇到了以下方法。我尝试使用谷歌搜索并通过定义如下方法来查看差异；两者似乎都是一样的。但是，我需要知道它是否真的一样？

```
public abstract void methodName();
abstract public void methodName(); 
```

注： `public`和`abstract`已在上述两种方法中互换。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-04T17:11:47.137

就功能而言没有区别，但无论您选择哪种方式，最好保持一致。

话虽如此，我以前几乎从未见过`abstract public`使用过的。因此，从编码标准的角度来看，`public abstract`可能会更容易被更多人识别。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-04T17:08:47.757

一样的。不用担心。两个类似的`abstract`方法声明。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T17:10:42.713

两者都是修饰符，您可以按任何顺序使用

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T17:38:15.170

```
public abstract void methodName();
abstract public void methodName(); 
```

这两种方法是相同的，类似的例子是

```
public static void main(String args[]);
static public void main(String args[]); 
```

因此以上两个是相同的。这只是我们想要如何写的愿望。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-21T17:01:26.863

James Gosling 等人的“Java 语言规范，第三版”一书。人。第 8.4.3 节“方法修饰符”（第 214 页）中的状态：“如果两个或多个方法修饰符出现在方法声明中，尽管不是必需的，但习惯上它们的出现顺序与上面在产生式中显示的顺序一致用于方法修饰符。”

生产是：

MethodModifier：其中之一：Annotation public protected private abstract static final synchronized native strictfp。

因此：是的，形式上，顺序无关紧要，但 Java 发明者自己更喜欢“公共抽象”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-05T06:16:28.513

两个代码是相同的，如果您反编译代码，编译器会将其转换为相同的字节码。然而，通常的做法（不是经验法则）以访问说明符而不是其他关键字开始代码。

```
public abstract void methodName();
abstract public void methodName(); 
```

编译器将这两种方法都转换为下面的代码

```
public abstract void methodName(); 
```

# javascript - 加载 JSP 页面时显示加载 gif

> ID：13708183
> 
> 赞同：0
> 
> 时间：2012-12-04T17:07:35.287
> 
> 标签：javascript, jquery

假设我有一个 JSP。当我调用我的 JSP 时，它会访问数据库并显示适当的结果。言归正传，因为我的 JSP 加载了一个巨大的值，所以加载我的页面需要一些时间。因此，当我的页面加载时，我需要一个加载 gif，并且当我的 JSP 完全加载时，该 gif 应该消失。任何人都可以通过提供示例代码来帮助我吗？

例如，我的代码如下所示：

```
 <html>
    <head>

    </head>
    <body>
    Hello

    </body>
    </html> 
```

所以任何人都可以帮助我在哪里插入加载 gif 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:38:07.590

为此，您需要两个 JSP。第一个返回“请稍候”的 GIF 加上一些调用第二个 JSP 的 JavaScript，可能是[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。

当第二个 JSP 返回 HTML 时，JavaScript 可以将其添加到现有页面。

为此，您需要使用[jQuery 之](http://jquery.com/)类的 JavaScript 框架。该文档包含许多如何将 AJAX 请求发送到 Web 服务器并处理结果的示例。

# html - Ruby On Rails Bootstrap 字形图标无法正常工作

> ID：13708189
> 
> 赞同：4
> 
> 时间：2012-12-04T17:07:51.163
> 
> 标签：html, ruby-on-rails, ruby, twitter-bootstrap

出于某种原因，我的应用程序在我的 Aseets 文件夹中找不到我的字形图标。这是我收到的消息

```
ActionController::RoutingError (No route matches [GET] "/assets/images/glyphicons-halflings.png"): 
```

对不起，如果这是一个愚蠢的问题，或者它已经得到了回答，我对 Rails 还很陌生，我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T20:26:57.293

这取决于您使用的是什么。尝试将此添加到您的 application.css.scss 或您用来覆盖一些引导程序的任何文件中。

```
[class^="icon-"], [class*=" icon-"] {
  background-image: url(/assets/glyphicons-halflings.png)
} 
```

我的猜测是它没有在正确的位置搜索。因此，找出它在哪里，然后将链接指向那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T07:36:04.503

有很多正确的答案。但要解决此问题，您应该执行以下操作：

1.  转到他的公共文件夹（不是资产）
2.  创建文件夹调用 img
3.  将您的图形放在该文件夹中

那应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T00:09:09.047

好吧，该文件的默认位置在 img 中。你确定它不在 assets/img 中吗？

考虑到该文件是一个精灵表，我不确定您为什么要尝试将其加载到图像标签之类的东西中。

如果您尝试使用引导站点建议您执行的图像（[此处](http://twitter.github.com/bootstrap/base-css.html#icons)），您可能需要进入 bootstrap.css 文件并编辑查找 glyphicons-halflings.png 文件的路径。默认路径是“../img/glyph.png”，这可能会阻止您的图像显示（如果您正在尝试这样做）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:52:25.257

如果您的视图代码名为 /assets/images/glyphicons-halflings.png，它将在该*绝对*路径中查找它们。发布您的视图代码和您的 application.js/application.css 文件会有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-27T21:18:03.037

我在尝试使用手动安装的 2.3.2 引导程序版本时遇到了这个问题。在 bootstrap.css 文件中，如果你`CTRL`/ `command`+ `F`for 'glyphicon'，你会看到它正在寻找`url(../img/glyphicons-halflings.png)`

您需要将找到的两个实例更改为`url(/assets/glyphicons-halflings.png)`

我尝试将原件更改`(../img/glyph...)`为很多东西，`only /assets/glyph...`工作

# cakephp - CakePHP - ACL 中更细粒度的 ACO

> ID：13708190
> 
> 赞同：0
> 
> 时间：2012-12-04T17:07:54.523
> 
> 标签：cakephp, acl

我的产品表：

```
select * from products;
+------+----------------+
| id   | name           |
+------+----------------+
|    1 | product XYZ    |
|    2 | product XPTO   |
|    3 | procudt ABC    |
|    4 | procudt QWERTY |
|    5 | procudt 1234   |
+------+----------------+ 
```

我可以允许/拒绝某些用户组访问模型“产品”，例如：

```
$group->id = 3;
$this->Acl->deny($group, 'controllers');
$this->Acl->allow($group, 'controllers/Products');

$group->id = 4;
$this->Acl->deny($group, 'controllers');
$this->Acl->allow($group, 'controllers/Products/view'); 
```

但是如何允许/拒绝某些组访问某些特定产品，例如：

```
$group->id = 5;
$this->Acl->deny($group, 'controllers');
$this->Acl->allow($group, 'product XYZ');

$group->id = 6;
$this->Acl->deny($group, 'controllers');
$this->Acl->allow($group, 'product XPTO');
$this->Acl->allow($group, 'product 1234'); 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T04:11:13.943

You want row level access control. There are several ways of going about that in CakePHP (some using Cake's ACL functionality, some not) so you should [look around](https://www.google.com/search?q=cakephp%20acl%20row%20level) and see what is best for your situation.

One thing to keep in mind, though, is that the out of the box ACL functionality in Cake was designed for implementing access control against controller actions, and not specific database rows. Depending on the amount of data you need to check things could get out of hand fairly quickly. You might want to reconsider your design to see if you truly need to check access at the record level.

# c# - 使用 Oracle 参数查询不返回结果 11g

> ID：13708201
> 
> 赞同：1
> 
> 时间：2012-12-04T17:08:14.777
> 
> 标签：c#, oracle11g

使用变量绑定的简单选择语句不提供任何行？

```
 OracleConnection con = new OracleConnection(constr);
  con.Open();
 OracleCommand cmd = new OracleCommand();
  cmd.Connection = con;
  cmd.CommandText = "select country_name from hr.countries where country_id = :country_id;

  OracleParameter p_country_id = new OracleParameter();
  p_country_id.OracleDbType = OracleDbType.Varchar2;

  p_country_id.Value = "UK";

  cmd.Parameters.Add(p_country_id);

  OracleDataReader dr = cmd.ExecuteReader();

  if (dr.Read())
  {} ---> no rows 
```

尝试添加 parameterName ,direction,size 仍然结果为 0？？？

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:48:52.510

我相信这一切都是正确的，但它是用记事本写的。至少它应该让你走上正确的轨道。

```
using (OracleConnection con = new OracleConnection(constr))
{
    con.Open();
    using (OracleCommand cmd = con.CreateCommand())
    {
        cmd.CommandText = "select country_name from hr.countries where country_id = :country_id";
        cmd.Parameters.Add("country_id", "UK")

        OracleDataReader dr = cmd.ExecuteReader();

        if (dr.Read()) 
       { 
            // You code here
       }
    }
} 
```

注意：我将`using`语句放在那里，因为在执行数据库查询时总是建议这样做。如果发生异常， using 语句将保证您的数据库连接仍然关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:13:02.970

你忘了给你的参数一个名字。这样做，它应该工作：

```
p_country_id.ParameterName = "country_id"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:34:15.790

感谢您的回复，我的单元测试项目 app.config 指向错误的数据库架构 :(

呸呸呸呸！不能得到任何愚蠢的东西然后这个:)我会责怪我的流感:)

# javascript - Popcorn.js - 如何删除提示？

> ID：13708202
> 
> 赞同：5
> 
> 时间：2012-12-04T17:08:20.987
> 
> 标签：javascript, jquery, popcornjs

我使用爆米花 JS 在视频中添加了几个提示。

如何删除或修改特定提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:39:14.003

一旦你为你的 Popcorn 实例添加了一个提示，你可以像删除任何插件事件一样使用该`removeTrackEvent`方法删除它。

```
popcorn.removeTrackEvent(eventId); 
```

诀窍是获取要删除的事件的 id。Popcorn 并没有真正提供一种简单的方法来搜索跟踪事件，因此您需要在创建事件时获取 id 并保留它。

```
popcorn.cue(1, function() {
   console.log('Do that voodoo.');
});
var eventId = popcorn.getLastTrackEventId();
// some time later...
popcorn.removeTrackEvent(eventId); 
```

Popcorn API 最初设计为可链接的，因此该`cue`方法返回 Popcorn 实例。这就是为什么您需要单独调用`getLastTrackEventId`.

如果你想修改一个cue，就看你是不是想取同一个函数并移动它...

```
popcorn.cue(eventId, 2); //move it to 2 seconds 
```

或更改功能：

```
popcorn.cue(eventId, function() { console.log('hi!'); }); //time stays the same 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:23:51.897

似乎如果您使用爆米花来设置视频元素，`var pop = Popcorn(#videoElementId);`然后在其上调用一些方法`pop.footnote({...})`或您拥有什么，那么您只需删除设置它们的代码，这样它们就不再存在了。

相反，如果您问好的我做了一个脚注显示，现在我想替换它，或者隐藏它，那么您可能需要添加另一个针对您想要替换的相同 div 元素的提示。尝试使用文本设置为空字符串的脚注。

# python - 将列表添加到列表值python

> ID：13708206
> 
> 赞同：0
> 
> 时间：2012-12-04T17:08:38.613
> 
> 标签：python, list, variables, attributes

所以我有这个类叫做`Data` 并且这个类有两个属性；`var_names`是否可以将列表的`units` 列表元素（属于属性`units`）附加到列表中的每个元素上`var_names`？因此，当我创建一个名为 的新对象时`myData`，可能会出现以下输出（因此子列表`[1,2,3,4]`将与`id`元素相关联？

```
>>> myData=Data([[1,2,3,4],["a","b","c","d"],
[2.3,2.1,2.5,3.1]],var_names=["id","name","length"])
>>> print myData
id name length
1    a    2.3
2    b    2.1
3    c    2.5
4    d    3.1 
```

或者那是不可能的？并且只能在视觉上实现（格式化输出的方式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:50:13.090

正如其他人所建议的那样，您实际上需要 namedtuple 。这是您需要的可能实现

```
>>> class Data(object):
    def __init__(self,*args,**kwargs):
        args = args[0]
        var_names = kwargs['var_names']
        self.var_names = namedtuple('Data',var_names)
        self.units = [self.var_names(*e) for e in zip(*args)]
    def __repr__(self):
        fields = [e for e in vars(self.units[0])]
        fmt_string = '{:^10}'*len(fields)
        return '\n'.join(fmt_string.format(*units) for units in self.units)

>>> myData=Data([[1,2,3,4],["a","b","c","d"],
[2.3,2.1,2.5,3.1]],var_names=["id","name","length"])
>>> print myData
    1         a        2.3    
    2         b        2.1    
    3         c        2.5    
    4         d        3.1    
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:36:36.617

如果我对您的理解正确，我认为使用字典代替列表`var_names`应该可以满足您的要求。`collections.OrderedDict`如果订购很重要，请使用。

```
>>> import collections
>>> var_names = collections.OrderedDict([('id',[1,2,3,4]), 
                                         ('name',['a','b','c','d']), 
                                         ('length',[2.3,2.1,2.5,3.1])])
>>> for name, value in var_names.items(): 
...     print name + ': ' + str(value)
id: [1, 2, 3, 4]
name: ['a', 'b', 'c', 'd']
length: [2.3, 2.1, 2.5, 3.1] 
```

# android - Android：ksoap2 因 NoSuchMethodError 而失败

> ID：13708207
> 
> 赞同：0
> 
> 时间：2012-12-04T17:08:42.250
> 
> 标签：android, ksoap

有一个应用程序使用 ksoap2 与使用 SOAP 的 WebService 进行通信。

我有报告称它在三星 Galaxy Stratosphere 中失败，并出现以下错误：

```
java.lang.NoSuchMethodError: org.ksoap2.serialization.SoapObject.getPropertyAsString 
```

安卓版本：2.3.6。Ksoap 版本：3.0.0-RC.4

问题是我无法在任何其他设备上重现故障，包括 Android 2.1、2.3、4.0... 等。Ksoap 库与 Apk 捆绑在一起，这让我认为 Stratosphere 正在从其他来源加载库。

有没有办法找出谁是罪魁祸首？我试图打印有问题的类的 jar 文件位置，但每个方法都失败了，getProtectionDomain() 返回 null 以及 getResource() 变体。

即使我发现 Android 正在从其他地方加载库，如何强制它加载我的 Apk 中的库？

# python - Scipy 测试问题 - 未分配被释放的指针

> ID：13708212
> 
> 赞同：1
> 
> 时间：2012-12-04T17:08:50.253
> 
> 标签：python, scipy, osx-mountain-lion, nose

我通过从源代码编译在 Mac os X（山狮）上安装了 Numpy 和 Scipy。

numpy 的测试结果很棒。但是 scipy 测试存在问题。

```
In [1]: import scipy

In [2]: scipy.test()
Running unit tests for scipy
NumPy version 1.6.2
NumPy is installed in /usr/local/lib/python2.7/site-packages/numpy
SciPy version 0.11.0
SciPy is installed in /usr/local/lib/python2.7/site-packages/scipy
Python version 2.7.3 (default, Dec  4 2012, 00:30:38) [GCC 4.2.1 Compatible Apple Clang 4.1 ((tags/Apple/clang-421.11.66))]
nose version 1.2.1
.....................................................................................................................................................................................   
F.FFPython(66098,0x7fff74ae5180) malloc: *** error for object 0x7fe9cb2e07b0: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
Abort trap: 6 
```

有谁知道如何解决这个问题？

感谢 pv，这似乎是一个错误。

```
test_definition (test_basic.TestDoubleIFFT) ... FAIL
test_definition_real (test_basic.TestDoubleIFFT) ... ok
test_djbfft (test_basic.TestDoubleIFFT) ... FAIL
test_random_complex (test_basic.TestDoubleIFFT) ... FAIL
Python(66990,0x7fff74ae5180) malloc: *** error for object 0x7f9f53d8dec0: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug 
```

我对其余的测试很好奇。如果这个失败的测试是唯一的问题，那就太好了。

我怎样才能跳过这个失败的测试并继续其余的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:30:39.820

运行`scipy.test("full", verbose=2)`，将输出存储到文件，并提交错误报告： [http](http://projects.scipy.org/scipy/) ://projects.scipy.org/scipy/ （但如果问题已知，请先尝试搜索）

# jquery - 将用户输入与对象进行比较

> ID：13708215
> 
> 赞同：0
> 
> 时间：2012-12-04T17:09:01.947
> 
> 标签：jquery, json

我目前正在做的是将用户输入与不刷新页面的答案数组进行比较。这工作正常。

我需要实现的是执行上述操作，并将输入输入的时间与秒数进行比较，这是对象中的另一个值。为简单起见，假设现在时间是 20。我怎么做比较

我已将答案推送到数组中，但我对其他方法持开放态度。

```
[
    {
        "id": "1",
        "seconds": "20",
        "answer": "John"        
    },
    {
        "id": "2",
        "seconds": "40",
        "answer": "kwai"
    }
] 
```

JS

```
var score = 0;
var items = [];
$.getJSON('urlpath', function(data) { 
    $.each(data, function(key, val) { 
        items.push(val.answer);             
    });     

    $('#form_submit').click(function() {            
        var qS = $('#form_answer').val();
        $.ajax({
                type:"GET",
                url:"",
                data: qS,
                datatype: 'html'                
        });             

        if ($.inArray(qS, items) > -1 ) {
                //Do something              

        }
        else {
                 //Do nothing 
        }
        return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:12:13.333

试试这个：

```
var score = 0;
var items = [];
$.getJSON('urlpath', function(data) {
    $.each(data, function(key, val) {
        items.push([val.seconds, val.answer]);
    });

    $('#form_submit').click(function() {
        var answer = $('#form_answer').val();
        var seconds = $('#form_seconds').val();

        var matches = $.grep(items, function(el) {
            return (el[0] == seconds && el[1] == answer);
        });

        if (matches.length > 0) {
            //Lenght > 0, if specified values within an array              
        }
        else {
            //Do nothing 
        }
        return false;
    });
});​ 
```

# php - 使用 Ajax 的“输入意外结束”

> ID：13708216
> 
> 赞同：1
> 
> 时间：2012-12-04T17:09:03.700
> 
> 标签：php, ajax, arrays, json, row

我正在构建一个线程消息传递系统。我使用 AJAX 将 parent_id 发送到检索线程的 php 文件（许多消息具有相同的 parent_id）

在 ajax 中，我发送 parent_id

```
data:{
    parent_id: $(this).data('id'),
    ajax: 'true'
}, 
```

我在 php 文件中使用这个 parent_id，使用一个查询来检索一些行，然后我用这个把它们传回来：

```
$ret_msg_query_result=mysql_query($retrive_query);
while ($retrieved_msg_fetched=mysql_fetch_assoc($ret_msg_query_result))
{
echo json_encode($retrieved_msg_fetched) . "\n";    
} 
```

然后回到阿贾克斯：

```
$(document).ready(function() { 
    $(".msgsRow li.msg_subject,.msgsRow li.msg_content").click(function() { 
        $.ajax({ 
            type: 'POST',
            url: AJAX_URL+"front/RetrieveMsg.php", 
            data:{ parent_id: $(this).data('id'), ajax: 'true' }, 
            success: function(data) { 
                         var strLines = data.split("\n"); 
                         for (var i in strLines) { 
                             var obj = JSON.parse(strLines[i]); 
                             console.log(obj.id); 
                         }
                     } 
            }); 
        }); 
     }); 
```

我得到了这种方式（拆分）将每一行转换为来自 Stackoverflow 上的帖子中的一个对象[Sending/Parsing multiple JSON objects](https://stackoverflow.com/questions/4209527/sending-parsing-multiple-json-objects)

该函数可以正常检索消息的 id，甚至检索整行。但我明白了

> “未捕获的语法错误：输入意外结束”

它指向 console.log(obj.id); 之前的行

我在 StackOverflow 上搜索了这个错误，它通常显示为缺少右括号，但我找不到。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:32:53.540

您`}`在此功能中缺少一个 on

```
success: function(data){
                var strLines = data.split("\n");
                for (var i in strLines) {
                    var obj = JSON.parse(strLines[i]);
                    console.log(obj.id);
                **}**
            } 
```

注意：删除 4x*，那些不应该在那里 :)

那应该解决它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:37:01.880

我发现了问题......这是因为我使用“/n”进行拆分，这使得 strLines 类似于 {row},{row},{row},

结尾的逗号导致意外结束。所以，我用一个计数器来检查行数，如果是最后一个，那么不要插入“/n”

```
$counter=1;

while ($retrieved_msg_fetched=mysql_fetch_assoc($ret_msg_query_result))
{
    if ($counter==mysql_num_rows($ret_msg_query_result))
    {
    echo json_encode($retrieved_msg_fetched);
    }
    else{
    echo json_encode($retrieved_msg_fetched) . "\n";
    $counter++;
    }   
} 
```

也感谢 Limelights 的帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T17:39:21.857

当我忘记从我的 php 脚本中返回一些东西时它工作正常时，我得到了这个。我刚刚添加了这样的内容：

```
die (json_encode (array ('reponse'=>'Your script worked fine'))); 
```

在我的 php-script 结束时，这解决了它。您也可以使用“响应”来检查它是否正常工作。

# php - 每次登录时更改数据库中的密码值

> ID：13708218
> 
> 赞同：0
> 
> 时间：2012-12-04T17:09:08.863
> 
> 标签：php, security

每次用户登录数据库时更改密码值是否是一种好方法？当用户在系统上注册新帐户时，我编写了一个散列函数来散列密码。每次用户登录时，数据库中的哈希值都会发生变化。是好还是坏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:27:57.277

如果你自己设计了这个哈希函数，那么……这是一个非常非常糟糕的主意。你为什么需要这样的东西？如果您存储加盐 SHA-256 散列密码，则安全性就足够了。您不需要重新生成密码，它不提供任何额外的安全性。如果假设您的应用程序容易发生 SQL 注入，那么此方案将无法保护您的应用程序。如果您使用加盐和键控的 SHA-256 会好很多，如下所示：（我不是 php 编码器，我只是希望我们的应用程序是安全的）

```
$username = 'Admin';
$password = 'gf45_gdf#4hg';
$key = 'MySuperSecretKEY!!!!';
$salt = hash('sha256', uniqid(mt_rand(), true) . 'something random' . strtolower($username));
$hash = $salt . $password . $key;
$hash = hash('sha256', $hash);
$hash = $salt . $hash; 
```

然后检查：

```
$username = 'Admin';
$password = 'gf45_gdf#4hg';

$sql = '
  SELECT
    `hash`
  FROM `users`
    WHERE
      `username` = "' . mysql_real_escape_string($username) . '"
  LIMIT 1
  ;';

$r = mysql_fetch_assoc(mysql_query($sql));

$salt = substr($r['hash'], 0, 64);
$hash = $salt . $password . $key;
$hash = hash('sha256', $hash);
$hash = $salt . $hash;

if ( $hash == $r['hash'] ) {
  //OK
} 
```

因此，即使攻击者能够欺骗他不知道的加盐算法，一个密钥，他也无法在 SQL 注入攻击中重现有效的散列。

# xml - XML 过滤条件

> ID：13708220
> 
> 赞同：0
> 
> 时间：2012-12-04T17:09:13.310
> 
> 标签：xml, xslt

我需要更改以下标准。目前它浏览整个 xml 并打印独特的类。但我想要这个标准，而不是在整个 xml 中寻找相同的类，它检查前一个类是否与当前类相同。如果之前的班级不同，则视为新班级。目前，xslt 正在基于 xml 中的唯一类创建表（请参阅 xml）。例如，如果 xml 有类 A B B A

它只创建两个表。A 类的一张表有两条记录，B 类的一张表有 2 条记录。但我是三桌。A类的第一个表有一条记录（因为下一个类不同），B类的下一个表有2条记录（因为B有两个顺序记录），然后A类的下一张表有一条记录（因为上一条记录属于类乙）。所以简而言之，表创建的顺序应该像 A 类、B 类、A 类一样发生。这里是 xslt。

```
 <?xml version="1.0" encoding="utf-8"?>

    <xsl:stylesheet version="1.0"
          xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
          xmlns:DBE="http://www.sdrc.com/metaphase/cf11bd">

    <!-- Input Parameters -->
    <xsl:param name="reportDate"/>
    <xsl:param name="reportTitle"/>
    <xsl:param name="reportLocale"/>
    <xsl:param name="thinClientURLPrefix"/>

    <xsl:strip-space elements="*"/>

    <xsl:variable name="baseUrl" select="'FIXME'"/>

    <!-- Specify TextBundle file to read text entries from -->
    <xsl:variable name="textBundleURI" select="'tc50_default_TextBundle.xml'"/>
    <xsl:variable name="defaultTextBundleRoot" select="document($textBundleURI)"/>

    <!--*************************************************************************-->
    <!--*** Template for the Root of the XML Report document ********************-->
    <!--*************************************************************************-->

    <xsl:template match="/">

       <HTML>
          <HEAD>
             <TITLE> 
                <xsl:value-of select="$reportTitle"/>
             </TITLE>
          </HEAD>

          <BODY>
             <CENTER>
                <FONT>
                </FONT>
             </CENTER>
             <BR/>
                <TABLE border="0" align="center" width="90%">
                <TR>
                   <TD width="95%">
                      <xsl:value-of select="$reportTitle"/>
                      </TD>

                    <TD>
                      <xsl:value-of select="$reportDate"/>
                    </TD>
                </TR>
             </TABLE>

             <BR/>
             <xsl:choose>
                <xsl:when test="count(/DBE:ObjectSetRoot/DBE:Object) &gt; 0">

             <xsl:apply-templates mode="print_unique_classes"
         select="/DBE:ObjectSetRoot/DBE:Object
             [not(./@Class=preceding-sibling::DBE:Object/@Class)]"/>

                </xsl:when>
                <xsl:otherwise>
                   <CENTER><B>
                   <xsl:call-template name="GetTextFromBundle">
                      <xsl:with-param name="textID" select="'NO_ITEMS_FOUND'"/>
                   </xsl:call-template>
                   </B></CENTER>
                </xsl:otherwise>
             </xsl:choose>
             <TABLE border="0">
             <form name="myForm">
    <tr>
        <th><input name="Print" type="button" value="Print" onclick="javascript:window.print()" style="font: bold 12px Arial;background-color:transparent"/>
        </th>
        <th><input type="button" value="Save" onclick="document.execCommand('SaveAs', true)" style="font: bold 12px Arial;background-color:transparent"/>
        </th>
    </tr> 
    </form>
    </TABLE>
          </BODY>
       </HTML>
    </xsl:template>

    <xsl:template match="DBE:Object" mode="print_unique_classes">

      <xsl:variable name="className" select="./DBE:Attribute[@name='Class']/DBE:Translation"/>
      <TABLE>
        <TR>
        <TD bgcolor="#C3E1FF" > 
           <xsl:value-of select="$className"/>
        </TD>
        <xsl:variable name="classNameAct" select="./DBE:Attribute[@name='Class']/DBE:String"/>
        <xsl:if test="$classNameAct = 'x0EcnPrd' or $classNameAct = 'x0EcnNSR' or $classNameAct = 'x0EcnSR' or $classNameAct = 'x0EcnSOP'">
        <TD>&#160;&#160;:&#160;&#160;&#160;&#160;&#160;</TD>
        <TD bgcolor="#FF7979" >
          <xsl:variable name="changeid" select="./DBE:Attribute[@name='x0ChangeId']/DBE:String"/>
          <xsl:value-of select="$changeid"/>
        </TD>
        </xsl:if>

        </TR>
      </TABLE>
          <xsl:apply-templates mode="print_item_class"  select="." />      
      <br/>
      <br/>
    </xsl:template>

    <xsl:template mode="print_item_class" match="DBE:Object">

       <xsl:variable name="className" select="./@Class"/>

       <TABLE border="1" align="center" width="90%">

          <TR>
             <xsl:apply-templates mode="print_table_column_names"  select="./DBE:Attribute" />      
          </TR>

          <xsl:apply-templates mode="print_similar_item_classes"
                  select="/DBE:ObjectSetRoot/DBE:Object[@Class=$className]"/>

      </TABLE>
    </xsl:template>

    <xsl:template mode="print_table_column_names" match="DBE:Object/DBE:Attribute">
       <xsl:variable name="columnName" select="./@name"/>

       <xsl:if test="not(contains($columnName, 'OBID'))" >
        <xsl:if test="not(contains($columnName, 'Class'))" >
           <xsl:if test="not($columnName = 'Left' or $columnName = 'LeftMember')">
                <xsl:if test="not($columnName = 'Right' or  $columnName = 'RightMember')">
                  <xsl:if test="not($columnName = 'NavTplName' or  $columnName = 'CustTplMsgName' or $columnName = 'CustTplMsgClassName' or  $columnName = 'CustTplDialogName')">
                    <xsl:if test="not($columnName = 'XrfItemHandle')">
                   <TH  bgcolor="#C0C0C0">
                         <xsl:variable name="columnDisplayName" select="./@displayAs"/>
                     <xsl:value-of select="$columnDisplayName"/>
                   </TH>
                </xsl:if>
                </xsl:if>
             </xsl:if>
         </xsl:if>
        </xsl:if>
        </xsl:if>
    </xsl:template>

    <xsl:template mode="print_similar_item_classes" match="DBE:Object">
        <TR>  
           <xsl:variable name="xrfItemHandle" select="./DBE:Attribute[@name='XrfItemHandle']/DBE:String"/>

           <xsl:apply-templates mode="print_column_vlaues" select="./DBE:Attribute">
              <xsl:with-param name="xrfItemHandle" select="$xrfItemHandle"/>
           </xsl:apply-templates>

        </TR> 
    </xsl:template>

    <xsl:template mode="print_column_vlaues" match="DBE:Object/DBE:Attribute">
       <xsl:param name="xrfItemHandle"/>
       <xsl:param name="isRelation"/>

       <xsl:variable name="columnName" select="./@name"/>
       <xsl:if test="not(contains($columnName, 'OBID'))" >
       <xsl:if test="not(contains($columnName, 'Class'))" >
           <xsl:if test="not($columnName = 'Left' or $columnName = 'LeftMember')">
                <xsl:if test="not($columnName = 'Right' or  $columnName = 'RightMember')">
                              <xsl:if test="not($columnName = 'NavTplName' or  $columnName = 'CustTplMsgName' or $columnName = 'CustTplMsgClassName' or  $columnName = 'CustTplDialogName')">
                    <xsl:if test="not($columnName = 'XrfItemHandle')">
                      <xsl:apply-templates mode="print_filtered_column_vlaues" select=".">
                      <xsl:with-param name="xrfItemHandle" select="$xrfItemHandle"/>
                      <xsl:with-param name="isRelation" select="$isRelation"/>
                       </xsl:apply-templates>      
                    </xsl:if>
                 </xsl:if>
                 </xsl:if>
            </xsl:if>
        </xsl:if>
        </xsl:if>

    </xsl:template>

    <xsl:template mode="print_filtered_column_vlaues" match="DBE:Object/DBE:Attribute">
       <xsl:param name="xrfItemHandle"/>
       <xsl:param name="isRelation"/>

       <xsl:variable name="columnType" select="./@type"/>
       <xsl:variable name="columnName" select="./@name"/>

       <xsl:choose>

            <xsl:when test="$columnName != 'DisplayedName' and $columnName != 'Class' and $columnType = 'String' ">
                <xsl:variable name="transValue" select="./DBE:Translation"/>
                <xsl:if test="string($transValue)" >
                   <xsl:call-template name="print_column_value">
                       <xsl:with-param name="colValue" select="$transValue"/>
                   </xsl:call-template>
                </xsl:if>
                <xsl:if test="not(string($transValue))" >
                   <xsl:call-template name="print_column_value">
                       <xsl:with-param name="colValue" select="./DBE:String"/>
                   </xsl:call-template>
                </xsl:if>
            </xsl:when>

        <xsl:when test="$columnType = 'String' ">

                <xsl:variable name="transValue" select="./DBE:Translation"/>
                <xsl:if test="string($transValue)" > 
               <xsl:call-template name="print_column_value">
               <xsl:with-param name="colValue" select="$transValue"/>
               </xsl:call-template>     
                </xsl:if>
                <xsl:if test="not(string($transValue))" > 
               <xsl:call-template name="print_column_value">
               <xsl:with-param name="colValue" select="./DBE:String"/>
               </xsl:call-template>     
                </xsl:if>

        </xsl:when>

        <xsl:when test="$columnType = 'Timestamp' ">

                <xsl:variable name="transValue" select="./DBE:Translation"/>
                <xsl:if test="string($transValue)" > 
                   <xsl:call-template name="print_column_value">
                       <xsl:with-param name="colValue" select="$transValue"/>
                   </xsl:call-template>
                </xsl:if>
                <xsl:if test="not(string($transValue))" >
                   <xsl:call-template name="print_column_value">
                       <xsl:with-param name="colValue" select="./DBE:Timestamp"/>
                   </xsl:call-template>
                </xsl:if>

        </xsl:when>

            <xsl:when test="$columnType = 'Boolean' ">

                <xsl:call-template name="print_column_value">
                       <xsl:with-param name="colValue" select="./DBE:Boolean"/>
                </xsl:call-template>

            </xsl:when>

            <xsl:when test="$columnType = 'List' ">

                <xsl:call-template name="print_list_column_value">
                       <xsl:with-param name="listValues" select="./DBE:List"/>
                </xsl:call-template>

            </xsl:when>

            <xsl:when test="$columnType = 'Table' ">
                <xsl:call-template name="print_table_column_value">
                       <xsl:with-param name="tableValues" select="./DBE:Table"/>
                </xsl:call-template>
            </xsl:when>

            <xsl:when test="$columnType = 'StringStar' ">

                <xsl:call-template name="print_column_value">
                       <xsl:with-param name="colValue" select="./DBE:StringStar"/>
                </xsl:call-template>

            </xsl:when>

           <xsl:when test="$columnType = 'Integer' ">
                <xsl:call-template name="print_column_value">
                       <xsl:with-param name="colValue" select="./DBE:Integer"/>
                </xsl:call-template>
           </xsl:when>

           <xsl:when test="$columnType = 'Float' ">
                <xsl:call-template name="print_column_value">
                       <xsl:with-param name="colValue" select="./DBE:Float"/>
                </xsl:call-template>
           </xsl:when>

           <xsl:when test="$columnType = 'Date' ">
                <xsl:variable name="transValue" select="./DBE:Translation"/>
                <xsl:if test="string($transValue)" >
                   <xsl:call-template name="print_column_value">
                       <xsl:with-param name="colValue" select="$transValue"/>
                   </xsl:call-template>
                </xsl:if>
                <xsl:if test="not(string($transValue))" >
                   <xsl:call-template name="print_column_value">
                       <xsl:with-param name="colValue" select="./DBE:Date"/>
                   </xsl:call-template>
                </xsl:if>
            </xsl:when>

           <xsl:when test="$columnType = 'Object' ">
            <TD>
               ---
            </TD>
        </xsl:when>

        <xsl:otherwise>
            <TD>
               ---
            </TD>
        </xsl:otherwise>
       </xsl:choose>
    </xsl:template>

    <xsl:template name="print_displayed_name_column" >
       <xsl:param name="colValue"/>
       <xsl:param name="itemHandle"/>
       <xsl:param name="isRelation"/>

           <!-- move to global
           <xsl:variable name="baseUrl" select="'http://mspm117:8080/change-l'"/>
           -->

           <xsl:if test="string($isRelation)">
               <TD>
                   <xsl:value-of select="$colValue"/>
           </TD>
           </xsl:if>

           <xsl:if test="not(string($isRelation))">
             <xsl:if test="string($itemHandle)">
              <xsl:variable name="relativeUrl"
                 select="'/controller/home?sdrcStartupPage=eds_open_generic_open_link&amp;'"/>
              <xsl:variable name="urlParams" select="'item_handle_param='"/>
              <xsl:variable name="urlParamsValue" select="$itemHandle"/>

              <xsl:if test="string($thinClientURLPrefix)">
                 <xsl:variable name="completeURL" select="concat($thinClientURLPrefix,$relativeUrl,
                                  $urlParams,$urlParamsValue)"/>
                 <TD>
                     <a href="{$completeURL}" target="_blank">
                         <xsl:value-of select="$colValue"/>
                     </a>
                 </TD>
              </xsl:if>

              <xsl:if test="not(string($thinClientURLPrefix))">
                 <xsl:variable name="completeURL" select="concat($baseUrl,$relativeUrl,
                                  $urlParams,$urlParamsValue)"/>
                 <TD>
                     <a href="{$completeURL}" target="_blank">
                         <xsl:value-of select="$colValue"/>
                     </a>
                 </TD>
               </xsl:if>
            </xsl:if>
          </xsl:if>

    </xsl:template>

    <xsl:template name="print_column_value" >
       <xsl:param name="colValue"/>

        <xsl:if test="string($colValue)"> 
           <TD>
              <xsl:value-of select="$colValue"/> 
           </TD>
        </xsl:if>
        <xsl:if test="not(string($colValue))">
           <TD>
              <xsl:text disable-output-escaping="yes">&amp;nbsp;</xsl:text> 
           </TD>
        </xsl:if>

    </xsl:template>

    <xsl:template name="print_list_column_value" >
       <xsl:param name="listValues"/>

        <TD>
           <TABLE>
             <xsl:for-each select="$listValues/DBE:ListMember">

                 <xsl:variable name="listmemeber" select="."/>

                 <!-- FIXME: Dont know how to handle spaces inside string
                   normalize-space(.)
                 <xsl:value-of select="concat($listmemeber,',')" />       
                 -->

                <TR>
                  <xsl:value-of select="$listmemeber" />       
                </TR>

             </xsl:for-each>       
          </TABLE>
        </TD>
    </xsl:template>

    <xsl:template name="print_table_column_value" >
       <xsl:param name="tableValues"/>

        <TD>
           <TABLE>

             <xsl:for-each select="$tableValues/DBE:TableHeader">
                 <TR>
                    <xsl:variable name="tablecolumn" select="."/>
                    <xsl:for-each select="$tablecolumn/DBE:TableColumn">
                       <TD>
                           <xsl:value-of select="." />
                       </TD>
                    </xsl:for-each>
                 </TR>
              </xsl:for-each>

             <xsl:for-each select="$tableValues/DBE:TableRow">
                <TR>
                   <xsl:variable name="tablerow" select="."/>
                   <xsl:for-each select="$tablerow/DBE:TableData">
                       <xsl:variable name="tabledata" select="."/>
                       <TD>
                           <xsl:value-of select="$tabledata" />
                       </TD>
                   </xsl:for-each>
                 </TR>
              </xsl:for-each>
          </TABLE>
        </TD>
    </xsl:template>

    <xsl:template name="GetTextFromBundle">
       <xsl:param name="textBundle" select="$defaultTextBundleRoot"/>
       <xsl:param name="textID"/>

       <xsl:variable name="text"
             select="$defaultTextBundleRoot/IDMap/TextID[@name=$textID]/@text"/>

       <xsl:choose>
          <xsl:when test="string-length($text) &gt; '0'">
             <xsl:value-of select="$text"/>
          </xsl:when>
          <xsl:otherwise>
             <xsl:value-of select="$textID" />
          </xsl:otherwise>
       </xsl:choose>

    </xsl:template>

    </xsl:stylesheet> 
```

这是xml

```
 <?xml-stylesheet type="text/xsl" href="ECNSIGNOFF_default_html_classic_StylesheetF.xsl"?>
<!--
The DOCTYPE command is commented out for Internet Explorer compatibility.

<!DOCTYPE DBE:ObjectSetRoot SYSTEM "/ees/pdm/apps/epi/sb/tc8.1/product/xml/bd2.dtd">

--><DBE:ObjectSetRoot xmlns:DBE="http://www.sdrc.com/metaphase/cf11bd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sdrc.com/metaphase/cf11bd /ees/pdm/apps/epi/sb/tc8.1/product/xml/bd2.xsd">

<DBE:Object Class="x1ENSREB">
   <DBE:Attribute name="Class" type="String" displayAs="Class" length="20">
      <DBE:String>x1ENSREB</DBE:String>
      <DBE:Translation>ECN-NSR Implements Document</DBE:Translation>
   </DBE:Attribute>
    <DBE:Attribute name="x0ChgDesc" type="String" displayAs="Description of Change (what?)" length="2000">
        <DBE:String>ECN</DBE:String>
    </DBE:Attribute>
   <DBE:Attribute name="x0EcnChgType" type="String" displayAs="Type of Change" length="20">
      <DBE:String>x0NSR</DBE:String>
      <DBE:Translation>Non-saleable</DBE:Translation>
   </DBE:Attribute>
</DBE:Object>

<DBE:Object Class="x4SvcPln">
   <DBE:Attribute name="Class" type="String" displayAs="Class" length="20">
      <DBE:String>x4SvcPln</DBE:String>
      <DBE:Translation>Service Plan</DBE:Translation>
   </DBE:Attribute>
   <DBE:Attribute name="Creator" type="String" displayAs="Last Modified By" length="30">
      <DBE:String>super user</DBE:String>
   </DBE:Attribute>
   <DBE:Attribute name="DocumentName" type="String" displayAs="Document Number" length="80">
      <DBE:String>SP000001</DBE:String>
   </DBE:Attribute>

</DBE:Object>

<DBE:Object Class="DocSig">
   <DBE:Attribute name="Class" type="String" displayAs="Class" length="20">
      <DBE:String>DocSig</DBE:String>
      <DBE:Translation>DocSig</DBE:Translation>
   </DBE:Attribute>
   <DBE:Attribute name="CurrentUser" type="String" displayAs="Current Assigned User" length="80">
      <DBE:String>super user</DBE:String>
   </DBE:Attribute>
   <DBE:Attribute name="ExtStamp" type="String" displayAs="Signature Stamp" length="30">
      <DBE:String/>
   </DBE:Attribute>

</DBE:Object>

<DBE:Object Class="DocSig">
   <DBE:Attribute name="Class" type="String" displayAs="Class" length="20">
      <DBE:String>DocSig</DBE:String>
      <DBE:Translation>DocSig</DBE:Translation>
   </DBE:Attribute>
   <DBE:Attribute name="CurrentUser" type="String" displayAs="Current Assigned User" length="80">
      <DBE:String>super user</DBE:String>
   </DBE:Attribute>
   <DBE:Attribute name="ExtStamp" type="String" displayAs="Signature Stamp" length="30">
      <DBE:String/>
   </DBE:Attribute>
  </DBE:Object>

<DBE:Object Class="DocSig">
   <DBE:Attribute name="Class" type="String" displayAs="Class" length="20">
      <DBE:String>DocSig</DBE:String>
      <DBE:Translation>DocSig</DBE:Translation>
   </DBE:Attribute>
   <DBE:Attribute name="CurrentUser" type="String" displayAs="Current Assigned User" length="80">
      <DBE:String>Author</DBE:String>
   </DBE:Attribute>
   <DBE:Attribute name="ExtStamp" type="String" displayAs="Signature Stamp" length="30">
      <DBE:String/>
   </DBE:Attribute>

</DBE:Object>

<DBE:Object Class="x1ENSREB">
   <DBE:Attribute name="Class" type="String" displayAs="Class" length="20">
      <DBE:String>x1ENSREB</DBE:String>
      <DBE:Translation>ECN-NSR Implements Document</DBE:Translation>
   </DBE:Attribute>

   <DBE:Attribute name="x0ChgDesc" type="String" displayAs="Description of Change (what?)" length="2000">
      <DBE:String>test ECN</DBE:String>
   </DBE:Attribute>
   <DBE:Attribute name="x0EcnChgType" type="String" displayAs="Type of Change" length="20">
      <DBE:String>x0NSR</DBE:String>
      <DBE:Translation>Non-saleable</DBE:Translation>
   </DBE:Attribute>
</DBE:Object>

<DBE:Object Class="x4SvcPln">
   <DBE:Attribute name="Class" type="String" displayAs="Class" length="20">
      <DBE:String>x4SvcPln</DBE:String>
      <DBE:Translation>Service Plan</DBE:Translation>
   </DBE:Attribute>
   <DBE:Attribute name="Creator" type="String" displayAs="Last Modified By" length="30">
      <DBE:String>super user</DBE:String>
   </DBE:Attribute>
   <DBE:Attribute name="DocumentName" type="String" displayAs="Document Number" length="80">
      <DBE:String>SP000002</DBE:String>
   </DBE:Attribute>

</DBE:Object>

<DBE:Object Class="DocSig">
   <DBE:Attribute name="Class" type="String" displayAs="Class" length="20">
      <DBE:String>DocSig</DBE:String>
      <DBE:Translation>DocSig</DBE:Translation>
   </DBE:Attribute>
   <DBE:Attribute name="CurrentUser" type="String" displayAs="Current Assigned User" length="80">
      <DBE:String>super user</DBE:String>
   </DBE:Attribute>
   <DBE:Attribute name="ExtStamp" type="String" displayAs="Signature Stamp" length="30">
      <DBE:String/>
   </DBE:Attribute>
  </DBE:Object>

<DBE:Object Class="DocSig">
   <DBE:Attribute name="Class" type="String" displayAs="Class" length="20">
      <DBE:String>DocSig</DBE:String>
      <DBE:Translation>DocSig</DBE:Translation>
   </DBE:Attribute>
   <DBE:Attribute name="CurrentUser" type="String" displayAs="Current Assigned User" length="80">
      <DBE:String>consumer</DBE:String>
   </DBE:Attribute>
   <DBE:Attribute name="ExtStamp" type="String" displayAs="Signature Stamp" length="30">
      <DBE:String/>
   </DBE:Attribute>
       </DBE:Object>

</DBE:ObjectSetRoot> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:16:54.363

你需要做的是替换这条线

```
<xsl:apply-templates mode="print_unique_classes"
     select="/DBE:ObjectSetRoot/DBE:Object
         [not(./@Class=preceding-sibling::DBE:Object/@Class)]"/> 
```

有了这条线

```
<xsl:apply-templates mode="print_unique_classes"
     select="/DBE:ObjectSetRoot/DBE:Object
         [not(./@Class=preceding-sibling::DBE:Object[1]/@Class)]"/> 
```

正是**DBE:Object[1]**将检查限制在此处仅查看前面的第一个同级。

此外，您还需要获取“表”中的所有项目。在“print_item_class”的模板中，您可能需要替换此行

```
<xsl:apply-templates mode="print_similar_item_classes"
     select="/DBE:ObjectSetRoot/DBE:Object[@Class=$className]"/> 
```

有了这条线

```
<xsl:apply-templates 
     select="following-sibling::DBE:Object[1][@Class=current()/@Class]" 
     mode="print_item_class" /> 
```

您当前的行将获得具有相同类别的所有项目，而修改后的行将仅获得具有相同名称的以下兄弟姐妹，直到类别发生变化。

但有时，最好简化问题。将其简化为最基本的，并以此为基础。试试这个 XLST 例如：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:DBE="http://www.sdrc.com/metaphase/cf11bd" exclude-result-prefixes="DBE">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/*">
      <xsl:apply-templates select="/DBE:ObjectSetRoot/DBE:Object[not(./@Class=preceding-sibling::DBE:Object[1]/@Class)]" mode="print_unique_classes"/>
   </xsl:template>

   <xsl:template match="DBE:Object" mode="print_unique_classes">
      <ul>
         <xsl:apply-templates select="." mode="print_item_class" />
      </ul>
   </xsl:template>

   <xsl:template match="DBE:Object" mode="print_item_class">
      <li><xsl:value-of select="@Class" /></li>
      <xsl:apply-templates select="following-sibling::DBE:Object[1][@Class=current()/@Class]" mode="print_item_class" />
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容。我有输出列表，而不是表格，只是为了演示原理。

```
<ul>
   <li>x1ENSREB</li>
</ul>

<ul>
   <li>x4SvcPln</li>
</ul>

<ul>
   <li>DocSig</li>
   <li>DocSig</li>
   <li>DocSig</li>
</ul>

<ul>
   <li>x1ENSREB</li>
</ul>

<ul>
   <li>x4SvcPln</li>
</ul>

<ul>
   <li>DocSig</li>
   <li>DocSig</li>
</ul> 
```

现在，如果您可以使用 XSLT2.0，那么**xsl:for-each-group**可能是您最好的新朋友。试试这个 XSLT

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:DBE="http://www.sdrc.com/metaphase/cf11bd" exclude-result-prefixes="DBE">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/*">
      <xsl:for-each-group select="DBE:Object" group-adjacent="@Class">
         <ul>
            <xsl:for-each select="current-group()">
               <li>
                  <xsl:value-of select="@Class"/>
               </li>
            </xsl:for-each>
         </ul>
         <xsl:text/>
      </xsl:for-each-group>
   </xsl:template>
</xsl:stylesheet> 
```

这也应该给出相同的结果。

希望您能够在此基础上输出您想要的表格。

# alfresco - 如何在 Alfresco 中使用 TagQuery 查询标签

> ID：13708221
> 
> 赞同：0
> 
> 时间：2012-12-04T17:09:12.907
> 
> 标签：alfresco, alfresco-share

我在浏览器上查询这个 url [http://your.host:8080/share/proxy/alfresco/collaboration/tagQuery](http://your.host:8080/share/proxy/alfresco/collaboration/tagQuery)，这个结果

```
 {
   "countMin": 1,
   "countMax": 1,
   "tags": 
   [
      { "name": "folder", "count": 1 }
   ]
} 
```

但我在 javascript 中使用相同的 url 它没有显示，谁在 Alfresco 中有查询标签？

和这条消息::

```
Web Script Status 404 - Not Found

The Web Script /alfresco/s/collabQuery/tag has responded with a status of 404 - Not Found.

404 Description:     Requested resource is not available.

Message:    11040003 Script url /collabQuery/tag does not map to a Web Script.

Exception:  org.springframework.extensions.webscripts.WebScriptException - 11040003 Script url /collabQuery/tag does not map to a Web Script.

org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:173)
org.springframework.extensions.webscripts.servlet.WebScriptServlet.service(WebScriptServlet.java:118)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.alfresco.web.app.servlet.GlobalLocalizationFilter.doFilter(GlobalLocalizationFilter.java:58)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:470)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:861)
org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1584)
java.lang.Thread.run(Thread.java:662) 
```

这是我在 Test.get.js 中的代码

```
function main()
{
    var theUrl = "proxy/alfresco/collaboration/tagQuery";
    var data = remote.call(theUrl);

    var result = String(data);
    model.result = result; 

}
main(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:44:20.703

正如@Gagravarr 所指出的，您使用了错误的 URL。要在 Share Web 脚本中访问该 URL，您需要将第 3 行更改`Test.get.js`为`var theUrl = "/collaboration/tagQuery"`. `proxy/alfresco`仅当从 Web 浏览器调用 URL 时才需要该部件。

# php - 在 PHP 中使用 echo 创建带有 Javascript 事件的动态元素？

> ID：13708226
> 
> 赞同：0
> 
> 时间：2012-12-04T17:09:22.673
> 
> 标签：php, javascript, html

如果代码是用 Javascript 编写的（在`<script>`和之间`</script>`，但我遇到了这样的问题（在 PHP 中使用 echo 渲染动态内容），这很简单：

```
echo "<label onclick='showContent(\"".$content."\")'>Click me</label>" 
```

我也试过这个：

```
echo '<label onclick="showContent("'.$content.'")">Click me</label>' 
```

问题是它`$content`可以包含许多字符，例如 "（双引号）、'（单引号）......通常，它包含 HTML 代码。

如果是一个普通的句子，上面的代码会很好，它会渲染一个“点击我”的标签，我可以点击它来运行函数`showContent()`，但是如果它包含 HTML 代码，它可以渲染标签但是我不能`showContent()`当我点击它时运行该功能。我认为这里的引号有问题。我尝试用 " or \" 和 ' or \' 替换 $content 中的所有单引号和双引号，但它仍然不起作用，即使在某些情况下，'Click me' 的标签也无法正确呈现，而是其中它几乎向我展示了背后的代码。

我真的被困在这个问题上（已经好几个小时了），请给我一个解决方案。您的帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:14:17.140

尝试这个：

```
echo '<label onclick="showContent('.$content.')">Click me</label>' 
```

# android - Android - 背景不重复，已使用titleMode，仅在恢复应用时修复

> ID：13708228
> 
> 赞同：0
> 
> 时间：2012-12-04T17:09:24.327
> 
> 标签：android, layout

我有两个布局调用“footer.xml”，第一个是“login.xml”，第二个是“main.xml”

打开应用程序时，onCreate 方法将内容视图设置为 login.xml。在我成功登录后，main.xml 被加载（成功）。

现在，问题来了。

如果在用户登录后将 main.xml 设置为上下文视图，则页脚不会重复，而是会被拉伸。

我想知道为什么，因为 login.xml 和 main.xml 以相同的方式调用 footer.xml。

关于这个问题的任何解决方案？

顺便说一下，这是**footer.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/footer"
    android:tileMode="repeat" /> 
```

这就是我使用 login.xml 和 main.xml 调用 footer.xml 的方式：

```
 <LinearLayout android:id="@+id/footer"
        android:layout_width="fill_parent"
        android:layout_height="90dip"
        android:background="@layout/footer"
        android:layout_alignParentBottom="true">

    </LinearLayout> 
```

编辑：

我观察到，当按下主页按钮并再次恢复应用程序时，会修复页脚。但是使用任务管理器关闭应用程序并再次打开它不会重复背景图像。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:47:12.513

找到了解决方案！

这是我的 login.xml 和 main.xml 的样子：

```
<LinearLayout android:id="@+id/footer"
    android:layout_width="fill_parent"
    android:layout_height="90dip"
    android:background="@layout/footer"
    android:layout_alignParentBottom="true">

</LinearLayout> 
```

它们实际上是相同的，因此它们也具有相同的ID。

我的解决方案是更改每个 xml 文件的 ID。

对于 login.xml，

```
<LinearLayout android:id="@+id/loginFooter"
    android:layout_width="fill_parent"
    android:layout_height="90dip"
    android:background="@layout/footer"
    android:layout_alignParentBottom="true">

</LinearLayout> 
```

对于 main.xml，

```
<LinearLayout android:id="@+id/mainFooter"
    android:layout_width="fill_parent"
    android:layout_height="90dip"
    android:background="@layout/footer"
    android:layout_alignParentBottom="true">

</LinearLayout> 
```

通过这样做，它解决了我的问题！但我不知道为什么 eclipse 在编译具有相同 ID 的布局时不返回错误。

# java - 两个事务同时访问同一个表

> ID：13708231
> 
> 赞同：0
> 
> 时间：2012-12-04T17:09:39.343
> 
> 标签：java, sql-server, concurrency, transactions

我有一个同时调用的方法。在该方法中，我定义了一个事务，其中在方法中传递的参数上发生了一些`DELETE`操作和操作。`SELECT`我尝试同时调用此方法并在每个瞬间传递不同的数据。我收到一个错误：

> 错误 1205：事务（进程 ID）在资源上与另一个进程死锁，并已被选为死锁牺牲品。重新运行事务

方法体如下所示：

```
public void method(param){
  //transaction starts
  // delete operation on table 1
  // select operation on table 1
  // transaction is committed. 
} 
```

假设有事务 T1 和 T2

我认为这种死锁情况不应该发生，因为在这种情况下，行级锁定将基于我在方法中传递的参数应用。如果事务 T2 想要删除其他数据，则事务 T1 不应阻止它删除它。发生的事情是一个事务正在回滚，因为我正在捕捉，`SQLException`因此只有一条记录被成功删除。谁能弄清楚为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:00:41.493

首先，根据所使用的索引，一些数据库可能会在您认为它们应该使用行级锁时使用表级锁。因此，第 1 步是验证您是否确实在使用行级锁。

其次，您是否使用了任何自动级联，这可能会在您删除时影响其他表？和/或是否涉及外键关系。在这种情况下缺少索引也会导致问题。

第三，由于索引的处理方式，有时更新可能会影响超过 1 行。每当有更新（例如，行删除）时，一些数据库都会锁定索引的“块”。由于索引上的锁，可能存在冲突。

# android-sdk-tools - ddmlib 获取本机库信息

> ID：13708233
> 
> 赞同：1
> 
> 时间：2012-12-04T17:09:52.910
> 
> 标签：android-sdk-tools

我的任务是使用 ddmlib 分析 android 应用程序的方法调用和相应的本机库。我首先创建了一个用于测试目的的简单应用程序，该应用程序使用 jni 来调用用 C 实现的函数（对给定数字求平方）。然后我实现了 IMethodProfilingHandler：

```
@Override
public void onSuccess(byte[] data, Client client) {
MethodCallExtractor extractor = MethodCallExtractor.GetInstance();
    List<MethodCall> calls = extractor.extract(data, client);
    System.out.println("methodcalls:");
    for(MethodCall call : calls){
        System.out.println(call);
    }
    printNativeLibraries(client);
} 
```

工作并打印 jni 函数的调用。MethodCallExtractor 是一个简单的解析器，它返回一个 MethodCall 列表。我的问题是

```
private void printNativeLibraries(Client client){
    ClientData clientData = client.getClientData();
    while(clientData.getNativeLibraryMapInfo().hasNext()){
        System.out.println("library: " + clientData.getNativeLibraryMapInfo().next().getLibraryName());
    }
} 
```

不打印任何东西。为什么包含我的 C 函数（在我的情况下为 libsquared.so）的库未在 NativeLibraryMapInfo 中列出？我必须触发什么才能正确初始化 NativeLibraryMapInfo？

我花了几个小时试验“requestNativeHeapInformation()”、“requestAllocationDetails()”、“requestThreadUpdate()”和“executeGarbageCollector()”，但没有成功，我找不到任何关于这个问题的有用文档。

我正在使用 ddmlib-r13

# matlab - matlab中的直方图，输入量很大

> ID：13708247
> 
> 赞同：3
> 
> 时间：2012-12-04T17:10:27.830
> 
> 标签：matlab

我正在尝试在 matlab 中制作直方图。我的数据量很大（350 万），x 和 y 数据大小相同（都是 350 万）

我的原始数据有 200,200,88 个 3D 矩阵，我将其重新整形为 1 列，代码如下：

```
[dose , size] = Dose('C:\R1')
s = size(1)*size(2).size(3)
t = reshape(dose, s, []) 
```

当我尝试命令 hist(t) 时，我只得到一个 1 条。

我的工作区如下：

```
dose   <200x200x88 double>
s      3520000
size   [200,200,88]
t      <3520000x1 double> 
```

你能告诉我如何用这些数据制作直方图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:26:43.910

我能够生成一个大小为 3520000x1 的向量并用它构建一个直方图。

> > val=rand(3520000,1);
> > 
> > 历史（val）

您的数据可能有一些奇异的异常值，导致您的 bin 看起来像 (1,0,0,...,3519999)。如果您保存直方图箱，`h=hist(data);`您可以看到发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:30:03.517

为了从 3D 数组中获取单个长向量，您可以只使用`(:)`运算符。试试下面的代码：

> > num_of_bins = 100 ; % 更改为你想要的任何 # hist(dose(:),linspace(min(dose(:)),max(dose(:)),num_of_bins));

这`hist`将仅采用`dose`（最小到最大）的相关限制，您可以随意控制垃圾箱的数量。我曾经`linspace`创建一个线性间隔的 bin 向量，但这也可以通过分配不同的范围向量来修改为不同的 bin 集。

# vb.net - VB.NET mshtml 库导致“访问被拒绝”（0x80070005）或“未设置对象引用...”错误

> ID：13708248
> 
> 赞同：0
> 
> 时间：2012-12-04T17:10:37.133
> 
> 标签：vb.net, mshtml

我在 VB.NET 控制台应用程序中使用 mshtml 库从 http 请求中提取一些数据。

代码如下：

```
Dim htmlDocument As IHTMLDocument2
For i As Integer = 0 To 10
    searchHtml = getHtml(url)
    htmlDocument = New HTMLDocumentClass()
    htmlDocument.write(searchHtml)
    htmlDocument.close()
    Dim results As IHTMLElement = htmlDocument.body.all.item("ires")
    For Each li As IHTMLElement In results.all.tags("li")
        Dim element As IHTMLElement = li.all.tags("cite")(0)
        If element.innerText.ToLower().Contains(text) Then
            ' Do Something here
            Exit For
        End If
    Next
Next 
```

上面的代码是从另一个方法递归调用的。

我可以在调试中运行我的代码，它可以一次又一次地运行，没有问题。

如果我编译 exe 并运行它，那么我会收到两个错误之一。最初，在对上述内容进行了 11 次调用后，我得到了一个“未设置对象实例的对象引用”。这是可重复的，并且总是在 11 次迭代后发生。

如果我在上面添加一个 Threading.Thread.Sleep(1000) 并重新编译，我会在一定次数的迭代后再次收到“访问被拒绝”错误。

# android - SurfaceView 和在 Android 中使用 Fragments 覆盖 View

> ID：13708249
> 
> 赞同：4
> 
> 时间：2012-12-04T17:10:37.523
> 
> 标签：android, android-layout, android-fragments, android-view

在我的应用程序中，我使用自定义 SurfaceView 从相机中检索图片，然后使用自定义视图在使用画布在其上绘制附加功能后将其打印在屏幕上。这两个类被创建并添加到活动中的布局中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    myView = new MyView(this);
    mySurfaceView = new MySurfaceView(this, myView);

    setContentView(mySurfaceView);
    addContentView(myView, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
} 
```

然后使用 surfaceChanged 和 surfaceCreated 方法从 mySurfaceView 回调 myView：

```
@Override
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    Camera.Parameters parameters = mCamera.getParameters();

    ...

    mCamera.setParameters(parameters);
    mCamera.startPreview();
}
public void surfaceCreated(SurfaceHolder holder) {
    mCamera = Camera.open();
    try{
        mCamera.setPreviewDisplay(holder);
        mCamera.setPreviewCallback(new Camera.PreviewCallback() {
            public void onPreviewFrame(byte[] data, Camera camera) {

                ...

                System.arraycopy(data, 0, myView.cameraData, 0, data.length);
                myView.invalidate();
            }
        });
    }catch(Exception e){
        mCamera.release();
        mCamera = null;
    }
} 
```

一切正常……*直到*我决定将以上所有内容放在一个片段中，以便在同一个应用程序中使用两个不同的视图。按照教程，我将这两个类放在 Fragment 而不是 Activity 中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    myView = new MyView(this);
    mySurfaceView = new MySurfaceView(this, myView);       
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    mySurfaceView = (MySurfaceView)inflater.inflate(R.layout.camera_view, null);

    return mySurfaceView;
} 
```

而 XML 布局是：
camera_fragment（我还不关心其他片段）：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <!-- "Fragment A" -->

    <fragment
        android:id="@+id/camera_frag"
        android:name="com.example.mypackage.CameraFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</FrameLayout> 
```

相机视图：

```
<?xml version="1.0" encoding="utf-8"?>
<view xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.example.mypackage.MySurfaceView" >

</view> 
```

使用代码的片段版本，我可以轻松查看 SurfaceView，但我似乎无法在屏幕上打印视图应绘制的功能。没有报错码，但是程序好像从来没有进入过setPreviewCallback，然后是onPreviewFrame方法。我不知道是因为我如何实例化类，或者我如何声明布局，或者两者兼而有之。

# python - 在python中进行组合

> ID：13708253
> 
> 赞同：1
> 
> 时间：2012-12-04T17:10:43.970
> 
> 标签：python, algorithm, sorting, combinations, combinatorics

我有四个价值观

```
age = 23
gender = "M"
city ="Delhi"
religion = "Muslim" 
```

我需要这些由每个组合与空值组合排列，例如 -

```
23 * * *
23 M * *
23 M Delhi *
23 M Delhi Muslim
* M * *
* M Delhi *
* M Delhi Muslim
* * Delhi *
* * Delhi Muslim
* * * Muslim
* * * * 
```

我需要按列表中升序的维度数排列。因此，具有一个值的组合应该位于顶部。我有大约 30 多个属性，所以我需要一种自动化的方式在 Python 中执行此操作

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T17:15:05.707

以下情况如何：

```
In [21]: attrib = (23, "M", "Delhi", "Muslim")

In [25]: comb = list(itertools.product(*((a, None) for a in attrib)))

In [26]: comb
Out[26]: 
[(23, 'M', 'Delhi', 'Muslim'),
 (23, 'M', 'Delhi', None),
 (23, 'M', None, 'Muslim'),
 (23, 'M', None, None),
 (23, None, 'Delhi', 'Muslim'),
 (23, None, 'Delhi', None),
 (23, None, None, 'Muslim'),
 (23, None, None, None),
 (None, 'M', 'Delhi', 'Muslim'),
 (None, 'M', 'Delhi', None),
 (None, 'M', None, 'Muslim'),
 (None, 'M', None, None),
 (None, None, 'Delhi', 'Muslim'),
 (None, None, 'Delhi', None),
 (None, None, None, 'Muslim'),
 (None, None, None, None)] 
```

现在，如果我正确理解了您的排序要求，则应该执行以下操作：

```
In [27]: sorted(comb, key=lambda x:sum(v is not None for v in x))
Out[27]: 
[(None, None, None, None),
 (23, None, None, None),
 (None, 'M', None, None),
 (None, None, 'Delhi', None),
 (None, None, None, 'Muslim'),
 (23, 'M', None, None),
 (23, None, 'Delhi', None),
 (23, None, None, 'Muslim'),
 (None, 'M', 'Delhi', None),
 (None, 'M', None, 'Muslim'),
 (None, None, 'Delhi', 'Muslim'),
 (23, 'M', 'Delhi', None),
 (23, 'M', None, 'Muslim'),
 (23, None, 'Delhi', 'Muslim'),
 (None, 'M', 'Delhi', 'Muslim'),
 (23, 'M', 'Delhi', 'Muslim')] 
```

我用过`None`你用过的地方`*`，但使用后者很简单。

当然，对于 30 个属性，您正在查看约 10 亿个组合，因此列表的展平和随后的排序可能不起作用。但是，无论如何，您可以用 10 亿个条目做什么有用的事情？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T17:30:55.223

[NPE 的答案](https://stackoverflow.com/a/13708330/68063)通过在内存中构建子集的完整列表然后对其进行排序来解决问题。这需要 O(2 ^(*n*) ) 空间和 O( *n* ²  2 ^(*n*) ) 时间。如果这是不可接受的，那么这是一种在 O( *n* ) 空间和 O( *n*  2 ^(*n*) ) 时间中生成子集的方法。

```
from itertools import combinations

def subsets(s, placeholder = None):
    """
    Generate the subsets of `s` in order of size.
    Use `placeholder` for missing elements (default: None).
    """
    s = list(s)
    n = len(s)
    r = range(n)
    for i in range(n + 1):
        for c in combinations(r, i):
            result = [placeholder] * n
            for j in c:
                result[j] = s[j]
            yield result

>>> from pprint import pprint
>>> pprint(list(subsets([23, 'M', 'Delhi', 'Muslim'])))
[[None, None, None, None],
 [23, None, None, None],
 [None, 'M', None, None],
 [None, None, 'Delhi', None],
 [None, None, None, 'Muslim'],
 [23, 'M', None, None],
 [23, None, 'Delhi', None],
 [23, None, None, 'Muslim'],
 [None, 'M', 'Delhi', None],
 [None, 'M', None, 'Muslim'],
 [None, None, 'Delhi', 'Muslim'],
 [23, 'M', 'Delhi', None],
 [23, 'M', None, 'Muslim'],
 [23, None, 'Delhi', 'Muslim'],
 [None, 'M', 'Delhi', 'Muslim'],
 [23, 'M', 'Delhi', 'Muslim']] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T17:12:10.750

看[`itertools`](http://docs.python.org/2/library/itertools.html)，它有一个方法[`combinations`](http://docs.python.org/2/library/itertools.html#itertools.combinations)

# android - 版本 4.2 上的 Android 音频流问题

> ID：13708254
> 
> 赞同：1
> 
> 时间：2012-12-04T17:10:44.500
> 
> 标签：android, audio-streaming

我正在构建一个音频流应用程序。这是我用来启动媒体播放器的代码：

```
Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse("http://wunh.org:8000/"), "audio/*");
startActivity(intent); 
```

该代码在我的 Droid 手机（Android 2.3.4）上运行良好——它会打开手机媒体播放器并播放电台......

但它不适用于 Nexus 7 (Android 4.2) - “谷歌播放音乐”和“视频播放器”都失败并出现相同的错误代码：

> 12-04 11:49:25.373: E/MediaPlayer(13331): 错误 (1,-1004)

UPD：这是所有相关的 logcat 条目：

```
12-04 14:04:21.573: D/MediaPlayer(17933): Couldn't open file on client side, trying server side
12-04 14:04:21.573: I/AwesomePlayer(128): setDataSource_l(URL suppressed)
12-04 14:04:21.583: V/ChromiumHTTPDataSource(128): connect on behalf of uid 10036
12-04 14:04:21.583: I/ChromiumHTTPDataSource(128): connect to <URL suppressed> @0
12-04 14:04:21.633: I/ActivityManager(481): Displayed com.google.android.music/.AudioPreview: +83ms
12-04 14:05:24.733: I/ChromiumHTTPDataSourceSupport(128): Request failed with status 4 and os_error -118
12-04 14:05:24.733: I/AwesomePlayer(128): mConnectingDataSource->connect() returned -1004
12-04 14:05:24.733: E/MediaPlayer(17933): error (1, -1004)
12-04 14:05:24.733: E/MediaPlayer(17933): Error (1,-1004) 
```

任何建议将不胜感激。

-德米特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:52:28.607

异步播放器？[http://developer.android.com/reference/android/media/AsyncPlayer.html](http://developer.android.com/reference/android/media/AsyncPlayer.html)

```
AsyncPlayer ap=new AsyncPlayer("Player"); 
ap.play(this, Uri.parse(url), true, AudioManager.STREAM_MUSIC); 
```

# boolean-logic - 带有 If 大小写的布尔逻辑

> ID：13708259
> 
> 赞同：0
> 
> 时间：2012-12-04T17:11:03.220
> 
> 标签：boolean-logic

问题中有两个案例，在此基础上我们必须回答。

案例：

1.  如果（（非（值>=1）或非（值<=10））
2.  如果（（非（值>=1）与非（值<=10））

现在的问题是：

1.  如果给定值为 1 或 10 ，您将使用哪种情况？
2.  如果给定值必须是 1 或 10 ，您将使用哪种情况？

问题是我拿 1 还是 10 在这两种情况下我都得到相同的答案。那是 if(0) ，因此 if 语句在这两种情况下都是错误的。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:05:22.007

1.  `(NOT(value>=1) OR NOT(value<=10)) = (value < 1) OR (value > 10)`

这种情况对于 [-Infinity ... 0] 或 [11 ... + Infinity] 为真 对于 1 或 10 为假

1.  `((NOT(value>=1) AND NOT(value<=10)) = (value < 1) AND (value > 10)`

这种情况总是错误的，因为没有数字可以同时小于 1 和大于 10。

# android - 在我的应用程序被关闭的任何情况下，我如何关闭所有内容？

> ID：13708262
> 
> 赞同：0
> 
> 时间：2012-12-04T17:11:06.647
> 
> 标签：android

请稍等片刻，然后阅读。

在我的问题之后 [，有没有办法创建一个控制实例来控制我的应用程序的多个活动？](https://stackoverflow.com/questions/12707767/is-there-a-way-to-create-a-controlling-instance-that-controls-several-activities)

并在阅读后[检测应用程序何时关闭](https://stackoverflow.com/questions/10387774/detect-when-application-is-closed)

我想知道...我的应用程序中有很多活动和一些服务，我可以访问设备拥有的所有硬件。只要应用程序正在运行，访问这些东西就有意义。活动可以改变，但每个活动都需要访问这些东西（有点夸张）。

我知道两种似乎适合我需要的方法。

1）我扩展应用程序并在那里实例化一些对象，这些对象可以访问或计算任何地方都需要的东西

2）我在 Activity 的子类中做同样的事情

在这两种情况下，我都想注销广播接收器并停止服务。服务不受约束（出于某种原因）。那么在所有可能发生的情况下，关闭和注销事物的正确方法是什么？

*   可能没有调用 onDestroy

*   我没有收到系统关闭/杀死我的进程的通知

那么，我如何创建始终存在于我的所有活动中但在我的应用程序关闭时停止并清理的东西？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:20:56.723

你不能，永远永远不会在 Android 中创建“永远存在”的东西，它根本不是架构的一部分。即使使用 startforeground 服务，如果设备内存不足或处于睡眠状态，您的服务仍然可能被破坏（并且正如您所指出的那样，不能保证调用 ondestroy）。

我发现在准意义上保持“永远活着”的最可靠方法是使用 RTC_WAKEUP 设置重复警报时间表并使用 WAKE LOCK。

然而，这些东西的问题是它们会像明天一样消耗电池！如果您只是在屏幕打开时关心所有这些事情，那么不精确的重复 RTC 警报（不带唤醒锁定）似乎适用于大多数情况。

编辑：我有点间接地回答了你的问题，但除了上述之外，当你完成一个资源时，将它声明为 null 或取消注册它。如果你有注册了东西的长期服务并且Android决定终止你的服务而不调用onDestroy，那么你无能为力，继续前进（并确保你将你的状态保存在持久存储中，这样你就可以在下一次初始化时以它们上次离开的状态检索它们。）

# javascript - 特殊情况：使用对话框内的表单编程查询字符串

> ID：13708265
> 
> 赞同：5
> 
> 时间：2012-12-04T17:11:09.540
> 
> 标签：javascript, jquery, forms, jquery-ui, jquery-ui-dialog

我包括我的项目的一个片段。当我运行此代码时，单击窗口对话框中的添加并在提交中，Firebug 以错误响应。

我想知道为什么这不 `alert ("Se funziona questo mi hai aiutato");`

[http://api.jquery.com/submit/](http://api.jquery.com/submit/)

网站末尾有一个示例，它在我的电脑上运行良好。

现在我公开我的代码或练习，我在窗口的对话框（Jquery）中使用表单。

我想要编程并且我有解决方案，但是函数的 javascript 中的脚本不起作用。

为什么？

现在我谈谈我的项目。

使用对话框的窗口（Jquery 我的代码）添加任何内容。

该项目不起作用。因为（使用 Firebug 控制台）它在按下按钮后`too much recursion`在库上给了我这个错误添加对话框。`jquery.min.js line 2`

如何改进代码以运行警报？

我的项目：

```
<html>
  <head>
    <title></title>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
    <style></style>
  </head>
     <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
// <---- VENTAÑAS DE PARAMETERES---->
$(document).ready(function() { 
var regex,v,l,c,b,i,contapara=3;
$( "#wnd_Addparam" ).dialog({
            autoOpen: false,
            height: 'auto',
            width: 350,
            modal: true,
            resizable:false,
            buttons: {
                "Add": function() {
                                 contapara=(parseInt(contapara)+1);
alert("popopo");
                $("#formparam").submit(function() {
                              alert("Se funziona questo mi hai aiutato");
                    });
                                $( this ).dialog( "close" ); 
                                   },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            },
            close: function() {
                $( this ).dialog( "close" );
            }
        });

        $( "#btn_Addpar" ).click(function() {
                        i=(parseInt(contapara)+1);
                        $("#formparam").remove();
    $("#wnd_Addparam").append('<form method="GET" name="formparam"  id="formparam" action="${nextstep}"><table><tr><td><label>ID</label></td><td>\
    <textarea class="expand" name="inputp'+i+'_id" id="inputp'+i+'_id"></textarea></td></tr>\
    <tr><td><label>Type</label></td><td><select name="inputp'+i+'_type" id="inputp'+i+'_type">\
    <option value="text">Text</option><option value="integer">Integer</option><option value="float">Float</option>\
    <option value="list_values">List of values</option><option value="range">Range</option>\
    <option value="selection_collapsed">Selection (collapsed)</option>\
    <option value="selection_expanded">Selection (expanded)</option>\
    <option value="subimage">Subimage selection</option>\
    <option value="polygon">Polygon selection</option>\
    <option value="horizontal_separator">Horizontal separator</option>\
    </select></td></tr></table></form>');

                $( "#wnd_Addparam" ).dialog( "open" );
            });
});
</script>
  <body>
<div>
 <input type="button" id="btn_Addpar" value="Add"/>
<input type="button" id="btn_Deletepara" value="Delete"/>
<input type="button" id="btn_Pedit" value="Edit"/>
</div>
<div id="wnd_Addparam" title="New parameter" ></div>
</body>
</html> 
```

我也看了这个问题[How to change the querystring when I submit my GET form using JQuery?](https://stackoverflow.com/questions/6087634/how-to-change-the-querystring-when-i-submit-my-get-form-using-jquery) 他使用（总是在函数的提交中）这个脚本：

```
 function(event) {
            event.preventDefault();
            $this = $(this);
            alert("Se funziona questo mi hai aiutato");
} 
```

但它也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:57:43.350

我更改了您的 jsFiddle 以使一些工作正常进行，但这可能仍然不是您想要的方式：

[js小提琴](http://jsfiddle.net/VUKzA/10/)。

我将 jQuery 和 jQuery-ui 添加到您的 jsFiddle 中，以便它可以编译，并在您应该放置表单提交代码的位置放置一个警报存根。

您的`.submit()`处理程序没有被调用，因为添加和取消按钮是由 jquery-ui`.dialog(...)`调用添加的，并且不是`<form>`元素的一部分。

如果您将 ajax 代码放在“添加”按钮函数处理程序中，那么您应该很高兴。我不知道你的大部分代码是做什么的，但这至少可能会有所帮助。

```
var regex,v,l,c,b,i,contapara=3;
$( "#wnd_Addparam" ).dialog({
    autoOpen: false,
    height: 'auto',
    width: 350,
    modal: true,
    resizable:false,
    buttons: {
        "Add": function() {
            contapara=(parseInt(contapara)+1);
            alert("add was clicked");
            // to use ajax uncomment below, depending on the 
            // service you're hitting, you may need
            // to change it to $.get(... etc 
            // which will use HTTP GET verb
            /*
            var $fm = $("#formparam");
            $.post($fm.attr('action'), $fm.serializeArray())
                .done(function(data, ok){
                    alert('call done: ' + ok);
                    // data is the content of the response
                })
                .fail(function(data){
                    alert('call failed');
                    // call failed for some reason -- add error messaging?
                });                            
            */
            $( this ).dialog( "close" );
        },
        Cancel: function() {
            $( this ).dialog( "close" );
        }
    }
});

$( "#btn_Addpar" ).click(function() {
                i=(parseInt(contapara)+1);
                $("#formparam").remove();
            $("#wnd_Addparam").append('<form method="GET" name="formparam"  id="formparam" action="${nextstep}"><table><tr><td><label>ID</label></td><td>\
            <textarea class="expand" name="inputp'+i+'_id" id="inputp'+i+'_id"></textarea></td></tr>\
            <tr><td><label>Type</label></td><td><select name="inputp'+i+'_type" id="inputp'+i+'_type">\
            <option value="text">Text</option><option value="integer">Integer</option><option value="float">Float</option>\
            <option value="list_values">List of values</option><option value="range">Range</option>\
            <option value="selection_collapsed">Selection (collapsed)</option>\
            <option value="selection_expanded">Selectionddddd (expanded)</option>\
            <option value="subimage">Subimage selectiondddddd</option>\
            <option value="polygon">Polygon selectionddd</option>\
            <option value="horizontal_separator">Horizontal separator</option>\
            </select></td></tr></table></form>');

        $( "#wnd_Addparam" ).dialog( "open" );
    }); ​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T17:37:41.330

由于这一行，您会收到“递归过多”错误：

```
close: function () {
    $(this).dialog("close");
} 
```

你在这里说的是当对话框关闭时，你应该关闭对话框，它会在无限循环中触发这个处理程序。注释掉这一行或完全删除它。

# javascript - Etch.js 与 Backbone.Marionette.js 的集成

> ID：13708270
> 
> 赞同：1
> 
> 时间：2012-12-04T17:11:24.027
> 
> 标签：javascript, backbone.js, integration, marionette, rangy

有没有人遇到过 Etch.js 在 Backbone.Marionette.js 应用程序中的集成？

我在绑定保存事件时遇到问题。这是我的木偶视图的代码：

```
MyApp.module('Views', function(Views, App, Backbone, Marionette, $, _) {

    Views.DetailsView = Marionette.ItemView.extend({

        template: '#details',

        initialize: function(options) {
            _.bindAll(this.model, 'save'); // I think the problem is related to the binding
            this.model.bind('save', this.model.save);
        },

        events: {
            'mousedown .editable': 'editableClick'
        },

        editableClick: etch.editableInit
    });
}); 
```

在我的模板中，我有以下内容：

```
<div id="detail-expanded">
     <p>Description: <span class="editable">{{ description }}</span></p>
</div> 
```

插件已正确加载，如果单击该字段，我可以看到 Etch 按钮栏，我可以编辑可编辑元素的内容，如果单击保存按钮，我实际上可以触发模型 save()方法。

问题是提交的模型是原始模型，没有我对该字段所做的编辑。我认为这是一个有约束力的问题，有什么想法吗？

预先感谢，一如既往。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:48:47.747

所以，这里的问题与牵线木偶并没有真正的关系，它是 etch 不处理将数据从可编辑字段移动到模型。我应该在文档中更明确地说明这一点。您要做的是在视图上创建一个保存功能，为您执行此操作，如下所示：

```
Views.DetailsView = Marionette.ItemView.extend({

    template: '#details',

    initialize: function(options) {
        _.bindAll(this, 'save');
        this.model.bind('save', this.save);
    },

    events: {
        'mousedown .editable': 'editableClick'
    },

    editableClick: etch.editableInit,

    save: function() {
      // populate model attrs from dom
      var title = this.$('.title').text();
      var body = this.$('.body').text();

      this.model.save({title: title, body: body});
    }
}); 
```

对困惑感到抱歉。我可以看到文档在这方面是如何误导的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:39:10.323

我相信你想要的是

```
_.bindAll(this, 'save'); 
```

代替

```
_.bindAll(this.model, 'save'); 
```

# java - 多对多与 Hibernate 和自引用注释

> ID：13708271
> 
> 赞同：12
> 
> 时间：2012-12-04T17:11:32.333
> 
> 标签：java, hibernate, many-to-many

想到这个，我的大脑开始受伤，是不是很简单：

```
@ManyToMany(mappedBy = "following", cascade = CascadeType.ALL)
private Set<User> followers = new HashSet<User>();

@ManyToMany(mappedBy = "followers", cascade = CascadeType.ALL)
private Set<User> following = new HashSet<User>(); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T17:24:14.190

就像是：

```
@ManyToMany(mappedBy = "following", cascade = CascadeType.ALL)
@JoinTable(name="UserRel", 
                joinColumns={@JoinColumn(name="ParentId")}, 
                inverseJoinColumns={@JoinColumn(name="UserId")})
private Set<User> followers = new HashSet<User>();

@ManyToMany(cascade = CascadeType.ALL)
@JoinTable(name="UserRel", 
                joinColumns={@JoinColumn(name="UserId")}, 
                inverseJoinColumns={@JoinColumn(name="ParentId")})
private Set<User> following = new HashSet<User>(); 
```

# php - 如果字符串值包含逗号 (,)，mysql_query 不会更新

> ID：13708275
> 
> 赞同：0
> 
> 时间：2012-12-04T17:11:37.060
> 
> 标签：php, mysql, sql-update

为什么，我无法使用包含逗号 (,) 的字符串更新字段（类型：longtext）...

```
$result=mysql_query("UPDATE table_name SET column1=$a WHERE column2=$b AND column3='price'"); 
```

适用于

```
$a="10"; or $a="10.99";
$b="15"; 
```

不适用于

```
$a="10,99"; 
$b="15"; 
```

两者都不适用于：

```
$a="10,99";
$a=mysql_real_escape_string($a); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:13:18.977

当您的查询字符串使用包含逗号的值进行评估时，这就是查询： `"UPDATE table_name SET column1=10,19 WHERE column2=15 AND column3='price'";` 逗号正在产生问题，因为值 10,19 不是字符串。您需要在变量周围加上引号。如果使用双引号，则需要转义引号。单引号也可以；以下任何一项都可以解决问题：

```
$result=mysql_query("UPDATE table_name SET column1=\"$a\" WHERE column2=\"$b\" AND column3='price'"); 
```

或者

```
$result=mysql_query("UPDATE table_name SET column1='$a' WHERE column2='$b' AND column3='price'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:13:21.193

更改（您需要用 包装字符串或文本类型的字段`'`）

```
$result=mysql_query("UPDATE table_name SET column1=$a WHERE column2=$b AND column3='price'"); 
```

到

```
$result=mysql_query("UPDATE table_name SET column1='$a' WHERE column2='$b' AND column3='price'"); 
```

# actionscript-3 - 计时器完成时将玩家重定向到游戏结束屏幕

> ID：13708276
> 
> 赞同：0
> 
> 时间：2012-12-04T17:11:41.833
> 
> 标签：actionscript-3, flash, actionscript

好的，我对 Actionscript 3 很陌生

我希望我的计时器指示正在玩我的游戏的人在计时器完成时（00:00）进入“游戏结束”屏幕。目前我收到一条错误消息：“1067：将 Class 类型的值隐式强制转换为不相关的 flash.display:DisplayObject 类型。”

有任何想法吗？

```
package {

    import flash.display.MovieClip;
    import flash.utils.Timer;
    import flash.events.TimerEvent;

    public class SecondCounter extends MovieClip {

        private var myTimer:Timer=new Timer(1000,0);
        private var secs:Number=10;
        private var mins:Number=0;
        private var sec_t:String;
        private var min_t:String;
        var screen7:EndScreen;

        public function SecondCounter() {

            myTimer.addEventListener(TimerEvent.TIMER, timerHandler);
            myTimer.start();
        }

        private function timerHandler(evt:TimerEvent):void {
            if (secs==0) {
                if (mins==0) {
                    addChild(EndScreen);
                } else {
                    mins--;
                    secs=59;
                }
            } else {
                secs--;
            }
            if(secs<10){
                sec_t = "0"+String(secs) 
            } else {
                sec_t = String(secs);
            }
            if(mins<10){
                min_t = "0"+String(mins) +":"
            } else {
                min_t = String(mins)+":";
            }
            secondField.text = min_t + sec_t;
        }
    }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:26:58.250

问题是您试图将类本身添加到屏幕上，而不是类的实例。

```
 var screen7:EndScreen;
 // ....
 addChild(EndScreen); 
```

EndScreen 是类。这是如何创建实际 EndScreen 对象的蓝图。Screen7 是 EndScreen 类的一个实例（EndScreen 类 = 蓝图，screen7 实例 = 实际建造的房屋）。

但是，您实际上并没有实例化 screen7，因此请执行以下操作：

```
var screen7:EndScreen = new EndScreen(); 
```

现在您可以将该实例添加到显示中：

```
addChild(screen7); 
```

# php - 多个内部连接和一对一//一对多关系

> ID：13708277
> 
> 赞同：0
> 
> 时间：2012-12-04T17:11:42.280
> 
> 标签：php, mysql, one-to-many

我在下面有这个查询。表的所有关系都是一对一的关系，除了 ASSOCPRODUCTS 表，每个订单有两个产品。一切似乎都工作正常，除了我的查询只返回一行，因此，实际上只有两个产品 ID 时才会返回一个产品 ID。我理解为什么它只拉一个，因为每个 orderID 只有一个订单，但每个合同有两个关联产品，我需要获取每个产品 ID。在 Assocproducts 表中，每个产品都有自己的行，因为它与contracts 表是一对多的。

是否可以使用内部联接获取该信息，或者我是否需要运行另一个查询？

```
$orderid = $_POST['orderid'];

$res = mysql_query ("
SELECT company.name as cname, 
    orders.datemade as datemade
    orders.p1quantity as p1q, 
    orders.p2quantity as p2q, 
    assocproducts.productid as pid,
    assocproducts.price as pprice, 
    inventory.name as pname, 
    inventory.quantity as pquantity 
FROM orders 
INNER JOIN contracts ON (contracts.id = orders.contractid)
INNER JOIN company ON (contracts.companyid = company.id) 
INNER JOIN assocproducts ON (contracts.id = assocproducts.contractid) 
INNER JOIN inventory ON (assocproducts.productid = inventory.id) 
WHERE orders.id = " . $orderid);

$order = mysql_fetch_assoc($res); 
```

如果我需要提供更多信息，请告诉我。

$order 不在循环中，因为我只需要显示此特定订单的订单信息。这是点击时的 AJAX 触发器。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:28:35.017

我认为您说只返回一行是错误的。我创建了一个新模式，其中仅包含查询中使用的列，用示例数据填充它并得到所有匹配的结果。我认为问题在于您对`mysql_fetch_assoc()`功能的使用。[这个函数](http://php.net/manual/en/function.mysql-fetch-assoc.php)的语义很清楚：

> 返回与获取的行相对应的字符串关联数组，如果没有更多行，则返回**FALSE 。**

所以我的猜测是你再也不会打电话`mysql_fetch_assoc()`了。

给定语义`INNER JOIN`和数据约束，您的查询将*始终产生 0 或 1 行*。如果您不知道为什么 - 请阅读[SQL JOIN types & behavior](http://en.wikipedia.org/wiki/Join_%28SQL%29)。因此，您有两种选择来获取订单详细信息*和*相关产品的信息：

1.  使用两个单独的选择语句 - 一个用于订单详细信息（始终为 1 行），第二个用于关联产品（2 行）。迭代第二个查询的结果 - 您将获得有关获取的每一行的一个产品的信息。
2.  保留现有查询，但通过迭代所有行来更改从中检索数据的方式（请注意，订单信息将出现在所有获取的行中，并且对所有行都相同）：

    ```
    $firstRow = true;
    while (($order_product = mysql_fetch_assoc($res)) !== FALSE) {
        if ($firstRow) {
            // do something with order info
            // but don't repeat it for consecutive rows
            $firstRow = false;
        }
        // do something with currently fetched associated product info
    } 
    ```

这是一个品味问题，但我会选择第一个选项 - 它看起来不那么老套。

# php - .htaccess，双重重定向评估 uri

> ID：13708279
> 
> 赞同：2
> 
> 时间：2012-12-04T17:11:44.877
> 
> 标签：php, .htaccess, mod-rewrite

我有这个网址结构：

```
proyectos.example.com/ci-doctrine/index.php
proyectos.example.com/ci-doctrine/index.php/welcome
proyectos.example.com/ci-doctrine/index.php/blog
proyectos.example.com/ci-doctrine/admin.php
proyectos.example.com/ci-doctrine/admin.php/welcome
proyectos.example.com/ci-doctrine/admin.php/dashboard 
```

对于`index.php`网址，我想保持这种格式：

```
proyectos.example.com/ci-doctrine/    //default index view
proyectos.example.com/ci-doctrine/welcome
proyectos.example.com/ci-doctrine/blog 
```

所以，我的 .htaccess 看起来像：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ /index.php/$1 [L]
</IfModule> 
```

上面的 .htaccess 代码工作正常。问题在于`admin.php`网址，因为我想要网址格式（保留“管理员”字样）：

```
proyectos.example.com/ci-doctrine/admin
proyectos.example.com/ci-doctrine/admin/dashboard
proyectos.example.com/ci-doctrine/admin/welcome 
```

然后，我编辑了我的 htaccess，如下所示：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  #RewriteCond %{REQUEST_URI} ^admin/(.*)$ [NC]
  RewriteRule ^admin/(.*)$ /admin.php/$1 [L]

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ /index.php/$1 [L]
</IfModule> 
```

但是当我浏览`proyectos.example.com/ci-doctrine/admin`我得到一个 500 错误，所以我想我的管理文件规则不够好。

## 日志

我已经查看了`error_log`，每次我尝试访问`proyectos.example.com/ci-doctrine/admin`它都会打印一条消息：

> 由于可能的配置错误，请求超出了 10 个内部重定向的限制。如有必要，使用“LimitInternalRecursion”增加限制。使用“LogLevel debug”获取回溯。

接下来是重定向列表：

```
[Wed Dec 05 09:47:07 2012] [error] [client 201.192.30.254] Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace.
[Wed Dec 05 09:47:07 2012] [debug] core.c(3112): [client 201.192.30.254] r->uri = /index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/admin
[Wed Dec 05 09:47:07 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/admin
[Wed Dec 05 09:47:07 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/admin
[Wed Dec 05 09:47:07 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/admin
[Wed Dec 05 09:47:07 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/admin
[Wed Dec 05 09:47:07 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/admin
[Wed Dec 05 09:47:07 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/proyectos/index.php/proyectos/index.php/proyectos/index.php/admin
[Wed Dec 05 09:47:07 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/proyectos/index.php/proyectos/index.php/admin
[Wed Dec 05 09:47:07 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/proyectos/index.php/admin
[Wed Dec 05 09:47:07 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /index.php/admin
[Wed Dec 05 09:47:07 2012] [debug] core.c(3118): [client 201.192.30.254] redirected from r->uri = /ci-doctrine/admin 
```

## 目录结构

对于 porpuses 的故障排除，您可以在下面找到我的 dir 结构

```
public_html/
    .htaccess/
    index.php
    proyectos/
        ci-doctrine/
            .htaccess
            index.php
            admin.php 
```

## 文档根 .htaccess

在根目录中，我像在子域中一样安装了我的应用程序`proyectos.example.com/ci-doctrine`，因此我`index.php`对 url 应用相同的规则。

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ /index.php/$1 [L]
</IfModule> 
```

# 更新>工作代码

好吧，在@anubhava 的帮助下，我完成了这项工作：

文档根 .htaccess：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  RewriteCond %{HTTP_HOST} ^(www\.)?example\.com [NC]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ /index.php/$1 [L]
</IfModule> 
```

子域 .htaccess：

```
# If the user types "index.php" or "admin.php".
RewriteCond $1 !^(index\.php|admin\.php|images|robots\.txt)

# If the user types just "admin".
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^admin$ admin\.php [L,QSA]

# If the user enter in any admin section, like "admin/section".
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^admin\/(.*)$ admin\.php/$1 [L,QSA]

# If the user types any site section, like "site/section".
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index\.php/$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:07:57.237

试试这个：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  RewriteCond %{REQUEST_FILENAME} !-f 
  RewriteCond %{REQUEST_FILENAME} !-d 
  RewriteRule ^admin/(.*)$ /admin.php/$1 [L] 

  RewriteCond %{REQUEST_FILENAME} !-f 
  RewriteCond %{REQUEST_FILENAME} !-d 
  RewriteRule ^(.*)$ /index.php/$1 [L] 
</IfModule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:47:50.427

实际上，问题是您的第一条规则中有一个额外（且不正确）的 RewriteCond 。这是应该适合您的修改后的正确代码：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^admin/(.*)$ /admin.php/$1 [L,NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

**编辑：**你`$DOCUMENT_ROOT/.htaccess`应该这样修改：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  RewriteCond %{HTTP_HOST} ^(www\.)?rootdomain\.com [NC]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ /index.php/$1 [L]
</IfModule> 
```

# magento - Magento：在布局文件中获取类别描述？

> ID：13708286
> 
> 赞同：0
> 
> 时间：2012-12-04T17:12:06.730
> 
> 标签：magento, magento-1.7

我已经为类别页面创建了自己的模板文件（例如 2columns-left.phtml）。在该文件中，我想在其他地方显示我所在类别的描述。如何获取当前的类别描述？我知道它包含在

```
$this->getChildHtml('content') 
```

但很难从那里得到它。还有其他方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:34:23.993

总有

```
$category = Mage::registry('current_category');
if ($category) {
    $category->getDescription();
} 
```

理想情况下，这将被封装在适当的 PHP 方法中，而不是直接在模板中使用。

# c++ - c++删除动态矩阵

> ID：13708287
> 
> 赞同：2
> 
> 时间：2012-12-04T17:12:09.837
> 
> 标签：c++, memory-management, dynamic, matrix

我有这个代码来分配和初始化：

```
nw = new int*[V];

for (w = 0; w < V; w++) {

nw[w] = new int[K];

for (k = 0; k < K; k++) 

  nw[w][k] = 0;
} 
```

这可以释放内存：

```
if (nw) {
 for (int w = 0; w < V; w++) {  
  if (nw[w]) 
delete nw[w];      
} 
```

该程序编译并运行，但是当它尝试释放内存时，失败了。程序并不总是在 w 值相同时失败。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T17:14:56.423

使用时`new[]`，`delete[]`改成：

```
delete[] nw[w]; 
```

并记住`delete[] nw;`。

请注意，对数组中`0`每个的单独分配`int`可以替换为：

```
nw[w] = new int[K](); // This value initializes the array, in this
                //^^     case sets all values to zero. 
```

您可以避免显式处理动态分配[`std::vector<std::vector<int>>`](http://en.cppreference.com/w/cpp/container/vector)：

```
std::vector<std::vector<int>> nw(V, std::vector<int>(K)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T17:15:13.957

我认为您的意思是使用`delete[]`，而不是`delete`：

```
for (int w = 0; w < V; w++)
    delete[] nw[w];
delete[] nw; 
```

# mysql - 如何将时间四舍五入到最近的 15 分钟段

> ID：13708294
> 
> 赞同：24
> 
> 时间：2012-12-04T17:12:42.063
> 
> 标签：mysql, time, rounding

如何将 MySQL 中的时间四舍五入到最接近的 15 分钟（例如 0、15、30、45）？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-10-08T10:02:48.663

```
SELECT SEC_TO_TIME(FLOOR((TIME_TO_SEC(CURTIME())+450)/900)*900) 
```

在此示例中，我使用 CURTIME() 作为输入时间，但您可以使用任何时间字段。

900 秒=15 分钟（四舍五入的时间），450 秒是它的一半（提供四舍五入元素）。我已经用 1800/900 进行了测试以获得最近的半小时，应该与其他人一起工作（600/300 持续 10 分钟等）。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-04T17:19:11.497

```
SELECT FROM_UNIXTIME( ROUND(UNIX_TIMESTAMP(NOW()) / 900,0)*900); 
```

这可以概括为四舍五入到任何时间值。900 秒 = 15 分钟。您可以用任何其他舍入因子替换 900。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:12:42.063

这是我使用的一些粗略代码，它得到的结果非常接近我想要的。因为我没有使用秒，所以我只选择了中点附近的分钟。

```
SELECT
       CASE 
            WHEN minute(timeIn) BETWEEN 0 and 7 THEN SEC_TO_TIME((TIME_TO_SEC(timeIn) DIV 3600) * 3600)
            WHEN minute(timeIn) BETWEEN 8 and 22 THEN ADDTIME(SEC_TO_TIME((TIME_TO_SEC(timeIn) DIV 3600) * 3600), '00:15:00')
            WHEN minute(timeIn) BETWEEN 23 and 37 THEN ADDTIME(SEC_TO_TIME((TIME_TO_SEC(timeIn) DIV 3600) * 3600), '00:30:00')
            WHEN minute(timeIn) BETWEEN 38 and 52 THEN ADDTIME(SEC_TO_TIME((TIME_TO_SEC(timeIn) DIV 3600) * 3600), '00:45:00')
            WHEN minute(timeIn) BETWEEN 53 and 59 THEN ADDTIME(SEC_TO_TIME((TIME_TO_SEC(timeIn) DIV 3600) * 3600), '01:00:00')
       END as 15_min
    FROM
      clock.punches; 
```

# php - 如何使用 php 获取 url 的不同部分？

> ID：13708298
> 
> 赞同：0
> 
> 时间：2012-12-04T17:13:01.010
> 
> 标签：php, get

我已经编码，以便在单击某个链接时获得以下网址。

.../project/auction/auction.php?user=ernie6?auc=1

我只是想知道“获取”以下详细信息“ernie6”（作为用户名）和“1”这是第一次拍卖的最佳方法是什么。此外，提取“y=z?a=b?c=d?...”形式的数据的“一般规则”是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:16:19.827

它应该`&`代替第二个/第三个/等`?`

```
user=ernie6&auc=1 
```

然后你可以参考你的`$_GET`全局数组

要查看其完整内容，您可以通过以下方式执行`var_dump($_GET)`或获取特定值：

```
$user = $_GET['user'];
$auc = $_GET['auc']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:15:25.390

您的 URL 不正确，如果您想提供参数，则需要以 a 开头，`?`然后用 a 分隔每个参数`&`

然后在您的 PHP 脚本中`auction.php`检索每个参数，如下所示：

```
$user = $_GET['user']; 
```

该`$_GET`变量是一个全局数组，包含 URL 上提供的每个参数。有关查询字符串的更多信息：[http ://en.wikipedia.org/wiki/Query_string](http://en.wikipedia.org/wiki/Query_string)

编辑：如果您尝试检索不存在的参数，您将收到 PHP 警告或错误。为了避免这些，最好在检索之前确保索引存在于数组中。像这样的东西会更好：

```
if(isset($_GET) && isset($_GET['user'])) {
    $user = $_GET['user'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:16:01.787

对于该 url，如果您正确格式化链接（数据以开头，变量以 分隔） `$_GET['user']`，`$_GET['auc']`则将在脚本范围内定义。`get``?``&`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T17:16:35.140

假设您使用的是 GET 或 POST，您可以简单地获取如下值：

```
$user = $_POST['user'];
$auc = $_POST['auc']; 
```

或者

```
$user = $_GET['user'];
$auc = $_GET['auc']; 
```

您可能会发现以下文档很有用：

[http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php) http://php.net/manual/en/reserved.variables.post.php

# twitter-bootstrap - 变量@fontAwesomeEotPath_iefix 未定义

> ID：13708303
> 
> 赞同：27
> 
> 时间：2012-12-04T17:13:21.070
> 
> 标签：twitter-bootstrap, less

我正在使用引导程序处理我的第一个项目，每当我尝试查看我的项目时都会收到此错误。我环顾四周，找不到有同样问题的人。任何帮助都会很棒！提前致谢。

* * *

**搜索中的 Less::ParseError#index**

```
Showing /Users/Basil/Dropbox/College/CS 50/playedby.me/app/views/layouts/application.html.erb where line #4 raised:

variable @fontAwesomeEotPath_iefix is undefined
  (in /Users/Basil/Dropbox/College/CS 50/playedby.me/app/assets/stylesheets/bootstrap_and_overrides.css.less)
Extracted source (around line #4):

1: <!DOCTYPE html>
2: <html>
3: <head>
4:   <%= stylesheet_link_tag    'application.css', :media => "all" %>
5:   <%= javascript_include_tag "application" %>
6:   <%= csrf_meta_tags %>
7: </head> 
```

* * *

**这是我的 bootrstrap_and_overrides.css.less**

```
@import "twitter/bootstrap/bootstrap";
body { 
padding-top: 60px;
}

@import "twitter/bootstrap/responsive";

// Set the correct sprite paths
@iconSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings.png');
@iconWhiteSpritePath: asset-path('twitter/bootstrap/glyphicons-halflings-white.png');

// Set the Font Awesome (Font Awesome is default. You can disable by commenting below lines)
// Note: If you use asset_path() here, your compiled boostrap_and_overrides.css will not 
//       have the proper paths. So for now we use the absolute path.
@fontAwesomeEotPath: '/assets/fontawesome-webfont.eot';
@fontAwesomeWoffPath: '/assets/fontawesome-webfont.woff';
@fontAwesomeTtfPath: '/assets/fontawesome-webfont.ttf';
@fontAwesomeSvgPath: '/assets/fontawesome-webfont.svg';

// Font Awesome
@import "fontawesome";

// Your custom LESS stylesheets goes here
//
// Since bootstrap was imported above you have access to its mixins which
// you may use and inherit here
//
// If you'd like to override bootstrap's own variables, you can do so here as well
// See http://twitter.github.com/bootstrap/less.html for their names and documentation
//
// Example:
// @linkColor: #ff0000;

@successBackground: white;
@successText: @green;
@errorBackground: white;
@errorText: @red;

@navbarHeight: 60px;

.alert-success, .alert-error {
    border: 10px solid @green;
    padding: 2%;
    font-size: 125%;
    line-height: 150%;
}

.alert-success { 
    border-color: @green;
}

.alert-error {
    border-color: @red;
} 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-12-05T19:51:40.543

请注意，您的 bootstrap_and_overrides.css.less 没有错误抱怨的变量。

将以下行与其他 @fontAwesome 变量一起添加，您应该会很好。

```
@fontAwesomeEotPath_iefix: asset-path("fontawesome-webfont.eot#iefix"); 
```

或者通过运行更新你的 twitter 引导安装`rails g bootstrap:install -f`。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-13T05:29:57.740

这也发生在我身上。当您更新 Bootstrap gem 时，您必须更新其 javascript 和 css。为此，请运行以下命令：

```
rails g bootstrap:install -f 
```

这将在您的 app/assets/css/bootstrap_overrides.css.less 文件中添加一行，如下所示：

```
@fontAwesomeEotPath_iefix: asset-path("fontawesome-webfont.eot#iefix"); 
```

这将解决问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-08T01:23:21.210

也许你忘记安装引导程序，你可以试试下面的命令。

```
rails g bootstrap:install 
```

# javascript - “无法读取 ' 的属性 ' of undefined" 即使它已定义

> ID：13708318
> 
> 赞同：3
> 
> 时间：2012-12-04T17:14:21.570
> 
> 标签：javascript, node.js, undefined-behavior

我在 NodeJS 上遇到了一个非常奇怪的 Javascript 错误。

我有一个巨大的 data.json 文件（24MB）。我通过阅读

```
var data = JSON.parse(fs.readFileSync("./data.json", 'utf8')); 
```

但是，在脚本执行期间的某个时刻，我尝试访问，例如，

```
data['someProp']['prop1'] 
```

它会引发类型错误：

> TypeError：无法读取未定义的属性“prop1”

这真的很奇怪，因为`data`, `data['someProp']`,`data['someProp']['prop1']`都被定义了。

如果我做

```
console.log(data['someProp']['prop1']); 
```

`data['someProp']['prop1']`它在屏幕上**正确**显示值并立即引发类型错误。

什么可能导致这种奇怪的行为？任何猜测或提示来解决这样的问题？

* * *

更新：

让我更清楚一点。我觉得很奇怪，因为如果我把

```
console.log(data['someProp']['prop1']); 
```

在它引发错误的正上方的行中，它**正确**打印出值并立即引发错误。

比方说`data['someProp']['prop1'] = "someProp value"`。

然后这是错误日志。

```
someProp value

console.log(data['someProp']['prop1']);
                        ^

TypeError: Cannot read property 'prop1' of undefined 
```

所以如果我这样做

```
console.log(data['someProp']) 
```

然后这是我得到的日志：

```
{
  ...
  "someProp": {
    "prop1": "someProp value"
  },
  ...
}
undefined 
```

这是我感到困惑的部分。当我 console.log 它时，它会`data['someProp']`立即打印出`undefined`. 什么会导致这种情况？

另一个奇怪的事情是

```
console.log(typeof data['someProp']); 
```

结果是：

```
object
undefined 
```

怎么可能`data['someProp']`是对象`undefined`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:32:24.457

好的，我会回答我自己的问题并结束这个问题。

正如 user1689607 猜测的那样，我的异步代码存在错误。例如，我的代码如下所示：

```
function test(done) {
  ...
  if (err) {
    done();
  }
  ...
  if (data['someProp']['prop1']) {
    ...
    done();
  }
} 
```

由于第一个 done() 是在没有返回的情况下调用的，我认为它会在回调执行结束时返回并遍历其余代码，这是不应该的。在此期间，数据发生了一些变化，这就是导致错误的原因。

所以`return done();`解决了这个问题。

谢谢@user1689607。

# php - 如何在 PHP 中获取唯一的交易 ID？

> ID：13708320
> 
> 赞同：1
> 
> 时间：2012-12-04T17:14:30.290
> 
> 标签：php, multithreading, transactions, unique-id

我正在测试用 PHP 编写的日志模块。

1.  网络服务器发生太多事务。
2.  每个事务都写在同一个文件上。（日志.txt）
3.  我怎样才能用多行在同一个文件中记录这些事务？

下面的日志示例。

> 12 月 5 日 01:50:02 [信息] 请求 [1111111111111]：参数 = 1
> 
> 12 月 5 日 01:50:02 [信息] 请求 [2222222222222]：参数 = 2
> 
> 12 月 5 日 01:50:02 [信息] RES[2222222222222]：res=20
> 
> 12 月 5 日 01:50:02 [信息] RES[1111111111111]：res=10

好的，我找到了 uniqid() 的解决方案。

*但是*它基于时间戳，所以它不是同一时间和同一台机器上唯一的巨大请求。

PHP 不支持线程。如果是其他语言（如 C、JAVA），最好的解决方案是使用 [thread id] 每个线程或进程，我猜。

关于 PHP 的任何想法？

对不起英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:25:58.827

首先，检查是否`uniqid('', true)`提供了足够的熵而没有冗余。

其次，尝试通过[会话](http://php.net/manual/en/book.session.php)跟踪人员。这将允许您单独识别人员和交易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T03:00:23.497

您可以使用用户的用户 ID。他们将始终是唯一的，对吗？要获得更多唯一性，请尝试对用户 ID 或他们的电子邮件 ID 进行哈希处理，并附加当前的微时间并在日志文件中使用它。即使用户发送重复请求，因为微时间肯定会在连续请求之间发生变化。

```
$id=$userid.$emailid.uniqid();
$uid=md5($str); 
```

如果在小循环内使用，这可能是个大问题。因为在小循环内，微时间几乎没有变化。

# javascript - 在浏览器中居中大型网页

> ID：13708325
> 
> 赞同：-4
> 
> 时间：2012-12-04T17:14:50.450
> 
> 标签：javascript, html, css

> **可能重复：**
> [网页的中心内容](https://stackoverflow.com/questions/882344/center-contents-of-webpage)

我有一个 1640 像素宽的网页，主要内容位于页面中心，宽 900 像素。无论用户屏幕或浏览器大小如何，我都需要在浏览器窗口中水平放置网页中心。javascript、jquery 或 css 可以做到这一点吗？我对java没有任何实际经验，所以有人可以指出我正确的方向还是他们有代码示例？谢谢您的帮助！

这是指向该页面的链接以提供帮助。[网页链接](http://test.greatgrizzly.net/contact_us.html)

我可能遇到的问题是因为页眉和页脚在我的容器外面并且运行了我网页的整个宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:24:03.037

代码如下所示：

```
#container { width: 1640px; margin: 0 auto; max-width: 100%; background-position: center 0;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:37:12.830

您需要使用**相对**测量 - 即 100% 百分比 - 而不是固定数字 - 即 1680 像素。这样，无论分辨率如何，您的包装器都将占据该特定屏幕的整个宽度，并且内容将居中：

```
#wrapper {
   width:100%;
}
#content {
width:900px;
margin:0 auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:37:15.307

我发现了你的问题......你的代码正在做你想做的事。你需要`width:1680px;`从你的`html,body`

而是让它说：`width:100%;`

希望有帮助！

# php - PHP 数据库部署 git/capistrano

> ID：13708328
> 
> 赞同：2
> 
> 时间：2012-12-04T17:14:56.763
> 
> 标签：php, database, git, deployment, capistrano

我在一家使用 PHP 的公司工作。使用了不同的 CMS 系统，例如 Wordpress 或 Magento。我们正在使用拥有自己的存储库服务器的 git，我们必须将不同的客户部署到不同的服务器上。

我已经使用 capistrano 设置了一个部署脚本，它工作正常，但数据库同步非常棘手。

想象一下实时数据库包含用户数据，我必须在网站启动后创建一些新功能，并且数据库中已经有大量 sql 数据。我个人使用虚拟数据库，因为我不需要任何客户信息。

您的 PHP 极客如何部署您的数据库？我不想更改内容，只想迁移新的或修改过的表。我正在为此寻找一个完整的部署解决方案。如果需要，我也愿意接受除了 capistrano 之外的其他选择。尤其是使用 Magento 时，我在保持数据库同步方面遇到了严重的问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T17:20:18.217

最近我发现了这个项目：[http](http://dbv.vizuina.com/) ://dbv.vizuina.com/ ，但我没有使用它，否则 Symfony 有一个类似的功能叫做迁移，它工作得很好。

# magento - 计算运费时如何不考虑免费物品？

> ID：13708334
> 
> 赞同：0
> 
> 时间：2012-12-04T17:15:14.660
> 
> 标签：magento, shopping-cart, shipping

在我的商店中，订单超过 75 美元免运费。

当客户购买特定产品**B**时，我想将免费物品**A**添加到购物车中。

 ****通过以下方式将A**项设置为免费：

```
 quoteItem->setOriginalCustomPrice(0); 
```

到目前为止，这工作正常。**但是对于运费的计算，仍然使用A**的原价。因此，当**A**的原价和**B**的价格加起来超过 75 美元时，可以免费送货。

有谁知道如何解决这一问题？**

# javascript - User selected dates in html form not received by server

> ID：13708337
> 
> 赞同：0
> 
> 时间：2012-12-04T17:15:19.870
> 
> 标签：javascript, jquery, html, forms

I've set up a custom field where users can enter to and from dates but when they do nothing happens. I mean by that it isn't displayed what dates they have selected, if they have been validated and they are not sent to the server. The server just gets the value of the custom option tag only.

This is the code fragment running on the browser:

```
$('#time').on('change', function(){
    if($(this).val() == 'custom'){
        $('#interval_selector').show();
        }
    else{
        $('#interval_selector').hide();
         }
 });

    $(function(){
        window.prettyPrint && prettyPrint();

        var startDate = new Date(2012,1,20);
        var endDate = new Date(2012,1,25);
        $('#dp4').datepicker()
            .on('changeDate', function(ev){
                if (ev.date.valueOf() > endDate.valueOf()){
                    $('#alert').show().find('strong').text('The start date can not be greater then the end date');
                } else {
                    $('#alert').hide();
                    startDate = new Date(ev.date);
                    $('#startDate').text($('#dp4').data('date'));
                }
                $('#dp4').datepicker('hide');
            });
        $('#dp5').datepicker()
            .on('changeDate', function(ev){
                if (ev.date.valueOf() < startDate.valueOf()){
                    $('#alert').show().find('strong').text('The end date can not be less then the start date');
                } else {
                    $('#alert').hide();
                    endDate = new Date(ev.date);
                    $('#endDate').text($('#dp5').data('date'));
                }
                $('#dp5').datepicker('hide');
            });
    });

</script>

<div class="page-header">
   <h2 id="changer">Enter the Event you would like to follow:</h2>
 </div>

<style>
 #interval_selector{
  display:none;
  background:none;
   margin:10px;
 }
</style>

<div class="row">
<div class="span11">  
<form id ="eventForm">
     <select name="period" id="time">
        <option value="beginning" selected="selected">Process all Tweets from start</option>
        <option value="RealTime tweeting">Process all Tweets in real-time</option>
        <option value="the last 24 hours">Last 24 hours</option>
        <option value="the previous week">Previous week</option>
        <option value="custom">Custom</option> 
     </select>

    <input type="submit" id="open" onclick="heading()" value="Start Visualization" />

    <input type="button" onclick="closeMap()" value="Stop Request"/>

    <div id="interval_selector">
        <table class="table">
            <thead>
                <tr>
                    <th>Start date<a href="#" class="btn small" id="dp4" data-date-format="yyyy-mm-dd" data-date="2012-02-20"> Change</a></th>
                    <th>End date<a href="#" class="btn small" id="dp5" data-date-format="yyyy-mm-dd" data-date="2012-02-25"> Change</a></th>
                </tr>
               </thead>
               <tbody>
                <tr>
                    <td id="startDate "> 2012-02-20</td>
                    <td id="endDate "> 2012-02-25</td>
                </tr>
                </tbody>
            </table>
        </div>
    </form> 
</div>  

<div class="span1">
<form name="moreAnalysis" id="moreAnalysis" action="/p" method="post">
<input type="submit" value="Further Analysis">
</form>
</div>
</div> 
```

So how can I get the server to receive the selected dates.

I've based the datepicker on based on Stafan Petre's eyecon.ro/bootstrap-datepicker example.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:54:42.477

Change #dp4 and #dp5 to form inputs.

```
 <th>Start date<input id="dp4" data-date-format="yyyy-mm-dd" data-date="2012-02-20" /></th>
 <th>End date<input id="dp5" data-date-format="yyyy-mm-dd" data-date="2012-02-25" /> </th> 
```

# objective-c - 尝试将数据控制器分配给 XCode 中的 UICollectionViewController 时出错

> ID：13708354
> 
> 赞同：0
> 
> 时间：2012-12-04T17:16:43.570
> 
> 标签：objective-c, ios, controller, uicollectionview

我已经设置了一个从 sqlite 数据库获取数据的 LibraryDataController 类。这是它的 .h 文件：

```
#import <Foundation/Foundation.h>
#import <sqlite3.h>

@interface LibraryDataController : NSObject{
    sqlite3 *database;
}
@property (nonatomic) NSMutableArray *masterPhotoList;

-(NSInteger)listCount;
-(NSString*)objectInListAtIndex:(NSUInteger)index;
-(void)createEditableCopyOfDatabaseIfNeeded;
-(void)initializeDefaultList;
-(void)closeDatabase;
@end 
```

我还有一个包含 LibraryDataController 成员的库视图：

```
#import <UIKit/UIKit.h>

@class LibraryDataController;
@interface LibraryViewController : UICollectionViewController

@property (nonatomic, strong) LibraryDataController *dataController;

@end 
```

我的问题发生在应用程序启动时，我将 sqlite 数据库中的信息加载到数据控制器中（init 函数成功执行此操作）。然后我尝试将数据库分配给库视图。库视图是标签栏上的第二个视图，标签栏控制器是根视图。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    UITabBarController *tabController = (UITabBarController *)self.window.rootViewController;
    LibraryViewController *libraryView = [[tabController viewControllers] objectAtIndex:1];
    LibraryDataController *aDataController = [[LibraryDataController alloc] init];

    libraryView.dataController = aDataController;

    return YES;
 } 
```

错误来自 libraryView.dataController = aDataController; 线。关于我的问题的任何想法？我认为这可能与 UICollectionView 有关，因为我对它很陌生。这段代码与我成功使用 UITableView 的代码几乎相同，我认为这两个视图非常相似。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:21:08.490

错误信息

```
[UICollectionViewController setDataController:]: unrecognized selector sent to instance 0x71a5170 
```

显示`libraryView`（这是选项卡栏控制器的第二个视图控制器）是 的实例`UICollectionViewController`，而不是`LibraryViewController`，如您所料。

解决方案是将storyboard文件中视图控制器的“自定义类”设置为“LibraryViewController”（使用“身份检查器”）。

# java - 通过 Servlet 动态更新 JSP 页面

> ID：13708356
> 
> 赞同：1
> 
> 时间：2012-12-04T17:16:46.020
> 
> 标签：java, jsp, servlets, dynamic, updates

我是使用 Java 进行 Web 编程的新手。我有一个客户端/服务器（用 Java 编写），我希望将来自客户端的更新从服务器发送到 Web 界面以供用户查看。更新的时间是随机的，但我希望能够使用新数据动态更新网页，而无需刷新浏览器。

希望这是有道理的：

我已经尝试创建一个 Servlet 来观察（`implements Observer`）我的服务器（which `extends Observable`）以进行更新（字符串），但是我不知道如何将这些动态添加到浏览器窗口中。我曾尝试使用方法`PrintWriter out = response.getWriter();`中的 Servlet 直接打印`doGet()`，但`response.getWriter()`在 Servlet 的方法中不可用`update()`。

我最初的想法是使用一个 JSP 页面（我最终需要合并 HTML/CSS）来接收来自的观察者更新，`Server`但我不确定。

我对 Comet/PUSH 做了一些研究，但我不确定这是否是我需要的——也许有点矫枉过正？任何关于如何实现我所追求的建议都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:29:49.747

最常见的方法是让客户端轮询服务器以获取更改。在客户端使用 AJAX 请求来轮询服务器上的端点。

然后，您将需要使用 JQuery / Javascript 使用从 AJAX 请求中检索到的新数据来更新您的网页。

我建议在 theb rowser 中使用 JQuery 并使用 AJAX 函数：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

它允许您在请求之后进行回调，并且在该回调中，您可以使用从请求中检索到的数据来更新网页的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:23:56.203

您不能从服务器更新网页，而不是重复轮询或推送。

如果你想要一个真正的推送，那么彗星也不是大材小用，否则你可以在网页上使用轮询脚本。

# ruby-on-rails - 设计如何在从外部 url 发布后登录用户

> ID：13708361
> 
> 赞同：0
> 
> 时间：2012-12-04T17:17:14.703
> 
> 标签：ruby-on-rails, devise

我有`form`一个设计用户`site1.com`对象。`POST``site2.com/users`

它可以工作，但用户未登录。我认为这可能是相关的，因为`site1.com`.

我对如何解决这个问题有点迷茫。我是否应该在 POST 之前进行 ajax 调用来检索 CSRF `site1.com`？`site2.com`知道什么是首选方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:28:23.753

根据您的站点2（如果它支持），您可以通过 http 发布 JSON，例如
{"username": "", "password": "password", "application": ""}

它如何处理将取决于您的第二个站点。

# ajax - select2 小部件如何使用 AJAX 填充？

> ID：13708363
> 
> 赞同：2
> 
> 时间：2012-12-04T17:17:17.347
> 
> 标签：ajax, yii, yii-extensions, jquery-select2

当我在我的小部件中输入几个字符时，我会从 AJAX 获得如下结果：

```
[{"id":550,"campName":"IB Resi Showtime Rebate Website"},{"id":60,"campName":"OB ACGBK EB"}] 
```

但是，我错过了如何用这些结果填充小部件的部分。

这是我用于小部件的代码：

```
$this->widget
(
        'ext.ESelect2-master.ESelect2',
        [
            'selector'=>'#campaigns',
            'options'=>
            [
                'tags'=>$tags,
                'allowClear'=>true,
                'minimumInputLength' => 2,
                'width'=>'300px',
                'multiple'=>true,
                'placeholder'=>'Campaigns',
                'ajax'=>
                [
                    'url'=>Yii::app()->createUrl('CoxReports/autoCompleteCampaigns'),
                    'dataType'=>'json',
                    'data'=>'js:function(term,page){return{q: term, page_limit: 10, page: page};}',
                    'results'=>'js:function(data,page){ return {results:data};}'
                ]
            ]
        ]
); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:24:52.533

您在小部件中缺少一个`formatResult`和一个`formatSelection`定义。[有关示例，](https://github.com/schmunk42/p3media/blob/4e53edac11364e66da7ee83903e7f8395db2b7d8/components/P3MediaSelect.php)请参阅此代码。

结果由`formatResult`具有自定义标记的函数处理，结构与您的相似。

# python - python中的插入排序？

> ID：13708364
> 
> 赞同：1
> 
> 时间：2012-12-04T17:17:20.227
> 
> 标签：python, sorting

我为插入排序编写了一个代码，现在效果很好（是的，这是家庭作业）。但是，在该代码之前，我编写了另一个不起作用的代码，我只是不知道为什么。请帮我理解...

这是我的旧代码：

```
def insertion_sort(lst):
    if len(lst)==1:
        lst=lst
    else:
        for i in lst[1:]:
            if i==min(lst[0:lst.index(i)]):
                 lst.remove(i)
                 lst.insert(0, i)
    return lst 
```

我不需要新的插入排序，我已经写了一个。我只需要解释为什么这个特定代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:25:33.460

问题是有时，即使`i`不是最小的`lst[0:lst.index(i)]`，它仍然需要向下移动。因此，例如，如果`lst[0:lst.index(i)]`是`[0, 1, 2, 4, 3]`，那么即使最小值是`0`，您仍然需要`3`向下移动一个位置才能使插入排序起作用。

# macos - 将 webkit 包含在 Flex AIR 应用程序中会导致 Mac App Store 拒绝吗？

> ID：13708371
> 
> 赞同：0
> 
> 时间：2012-12-04T17:17:44.250
> 
> 标签：macos, apache-flex, air

我发现一份报告（在 www.pigsels.com 上）包含 webkit 插件将导致提交到 Mac App Store 的 Flex AIR 应用程序被拒绝。

谁能证实这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:47:21.927

我发现有关 webkit 的其他讨论证实了 Mac App Store 的拒绝，尽管重点是 QTWebKit。我认为这是密切相关的。

[http://comments.gmane.org/gmane.comp.lib.qt.user/167](http://comments.gmane.org/gmane.comp.lib.qt.user/167)

看起来 AIR webkit 是一个不同的构建版本并且是不可接受的。

# android - 如何在 Android 的自定义对话框中创建偏好活动

> ID：13708374
> 
> 赞同：0
> 
> 时间：2012-12-04T17:17:51.477
> 
> 标签：android, android-preferences, android-dialog, preferenceactivity, android-dialogfragment

我有一个自定义对话框布局，其中列出了用户单击按钮时的配置项。当我按下列表中的每个项目时，它应该提示用户在现有对话框上使用另一个自定义对话框。Preference Activity 有可能吗？是否有可能？或者我应该遵循除此之外的任何其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:25:47.960

> 如何在 Android 的自定义对话框中创建偏好活动

Dialog 不能包含 Activity。Dialog 可以启动 Activity，但 Dialog 本身不能包含 PreferenceActivity。

我建议使用许多其他 Preference 类之一，例如[DialogPreference](http://developer.android.com/reference/android/preference/DialogPreference.html)来创建您想要的 Dialog。但是您不能创建一个打开包含 PreferenceActivity 的对话框的 Activity。

# ssh - 只能通过 ssh 连接到本地 tmux 会话

> ID：13708376
> 
> 赞同：1
> 
> 时间：2012-12-04T17:18:03.227
> 
> 标签：ssh, tmux

所以，我在本地机器上运行了会话，但如果我先回到自己`tmux`，我只能连接到它（或查看有关它的信息） ：`ssh`

```
% tmux ls
failed to connect to server: Connection refused
% ssh localhost -t tmux ls
Password:
0: 2 windows (created Mon Nov 26 12:47:44 2012) [208x52] (attached)
Connection to localhost closed. 
```

这不是必须跳过的最糟糕的箍，但为什么会发生，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T06:51:11.267

对于客户端/服务器通信，*tmux*使用 TMPDIR 环境变量指定的目录下的命名套接字（在基于 UID 的子目录中）。如果此环境变量未设置（或为空），则*tmux*使用`_PATH_TMP`from定义的目录`paths.h`；这是经常的`/tmp`。

*注意*：“会话”的以下用法是指登录会话，而不是*tmux*会话。

我的猜测是您的*ssh*会话共享一个共同的 TMPDIR 值（可能根本没有），而您的“正常”会话使用不同的 TMPDIR 值。由于不同会话中的 TMPDIR 值不同，因此一种会话类型的客户端无法直接“看到”在另一种会话类型中启动的服务器（例如，客户端尝试使用`/var/folders/random/directories/tmux-500/default`，但服务器正在侦听 `/tmp/tmux-500/default`）。

要解决此问题，您只需调整 TMPDIR 以匹配*ssh*会话中的正常内容：

```
TMPDIR=$(/usr/bin/ssh localhost -t 'echo $TMPDIR') && export TMPDIR 
```

您可以像这样确定客户尝试使用的路径：

```
tmux -L temp start\; info | grep path 
```

`temp`这将使用名为而不是 的套接字创建一个瞬态服务器`default`，并向您显示它正在使用的套接字的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T17:29:59.053

Tmux 管理~~/var/run/tmux~~ /tmp/tmux-USERID 下的套接字，每个套接字都有一个附加名称

例如：

```
$ pwd
/tmp/tmux-2037
$ ls
default  foo
$ tmux -L foo ls
0: 1 windows (created Tue Dec  4 13:36:10 2012) [172x52]
$ tmux -L default ls
0: 1 windows (created Tue Nov 20 16:21:14 2012) [188x47]
$ tmux ls
0: 1 windows (created Tue Nov 20 16:21:14 2012) [188x47] 
```

看看你在~~/var/run/tmux~~ /tmp/tmux-USERID 下得到了什么，并尝试按名称附加到其中一些套接字，看看这是否会导致你的问题（运行 tmux ls 与运行 tmux -L 默认 ls)

* * *

如果所有其他方法都失败了，那么完全分离该 tmux（关闭所有窗口并完全退出）然后 rm /tmp/tmux-500/default 以查看您当前的问题是否有状态可能是值得的。

# macos - 如何在 monodevelop 项目中捆绑框架？

> ID：13708378
> 
> 赞同：1
> 
> 时间：2012-12-04T17:18:11.707
> 
> 标签：macos, frameworks, mono, sdl

我很难理解如何将框架（SDL）与我的应用程序捆绑在一起，以避免让用户手动安装它。问题是我不知道如何让单声道在 .app 文件夹中查找框架。

我已经看过几篇关于更改框架的安装路径然后将其与 x-code 项目链接的帖子，但是在使用 mono 时我还没有找到任何涵盖此内容的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:54:06.677

我最近在这里回答了一个相关问题： [P/Invoke into .framework files on Mono Mac](https://stackoverflow.com/questions/12777299/p-invoke-into-framework-files-on-mono-mac/12947468#12947468) 和[Setting path of the Native Library for DllImport on Mono for Mac](https://stackoverflow.com/questions/12834141/setting-path-of-the-native-library-for-dllimport-on-mono-for-mac)。

请参阅我对第二个问题的回复中标题为“在 MonoMac 应用程序中捆绑原生框架”的部分。

# ruby-on-rails - Rails：has_one belongs_to 没有正确建立关系

> ID：13708380
> 
> 赞同：1
> 
> 时间：2012-12-04T17:18:16.107
> 
> 标签：ruby-on-rails, nested-attributes, one-to-one

我有两个模型，一个属于另一个，似乎无法让它们正确保存。问题源于这样一个事实，当我`build`在模型上使用该方法时，它没有在内存中将它们相互分配，因此当我尝试调用`.save`父级时，子级没有设置父级的 ID，并失败。

这是父模型：

```
#  id             int(11)
#  execution_id   int(11)
#  macro_type_id  int(11)
#  macro_key_id   int(11)
#  created_at     datetime
#  updated_at     datetime

class ExecutionMacro < ActiveRecord::Base
  belongs_to :execution
  belongs_to :macro_type
  belongs_to :macro_key
  has_one :advertisement_execution, :dependent => :destroy
  accepts_nested_attributes_for :advertisement_execution

  attr_accessible :macro_key_id, :macro_type_id, :advertisement_execution_attributes

  validates :execution, :presence => true
  validates :macro_type, :presence => true
  validates :macro_key, :presence => true
end 
```

这是孩子：

```
#  id                        int(11)
#  advertisement_id          int(11)
#  execution_macro_id        int(11)
#  advertisement_version_id  int(11)
#  created_at                datetime
#  updated_at                datetime
#  deleted_at                datetime

class AdvertisementExecution < ActiveRecord::Base
  belongs_to :advertisement
  belongs_to :advertisement_version
  belongs_to :execution_macro

  attr_accessible :advertisement_id, :advertisement_version_id, :execution_macro_id

  validates :execution_macro, :presence => true
  validates :advertisement, :presence => true
  validates :advertisement_version, :presence => true
end 
```

因此，如果我尝试以下代码：

```
@execution = Execution.find(1)
@em = @execution.execution_macros.build(:macro_type_id => 1, :macro_key_id => 1)
@ae = @em.build_advertisement_execution(:advertisement_id => 1, :advertisement_version_id => 1)
if @em.save
  "do something"
else
  "throw an error"
end 
```

保存将失败，引用“广告执行：执行宏不能为空白”。

感觉这不应该那么难。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:21:18.190

诀窍是当您调用 build_advertisement_execution 时，@em 不会保存到数据库中。在这种情况下，@em.id 和 @ae.id 等于 nil（因为它们没有被持久化），这就是为什么 @ae.execution_macro_id 和 @em.advertisement_execution_id 也设置为 nil。我的建议是在创建广告执行之前重新考虑验证逻辑或保存 execution_macros 而不进行验证（请参阅 .save(validate: false)）。

# asp.net - ASP.NET Oracle 会话保持非活动状态并且最大超出最大连接时间错误

> ID：13708384
> 
> 赞同：1
> 
> 时间：2012-12-04T17:18:38.713
> 
> 标签：asp.net, oracle

我的 ASP.NET C# 应用程序连接到 Oracle 数据库，运行存储过程，并返回具有 CloseConnection 命令行为的读取器。阅读器本身已被处理，但是 - Oracle 会话在 V$SESSION 中保持为非活动状态。几个小时后，当另一个客户使用该应用程序时，这会变成一个错误，并且我们收到错误“ORA-02399：超出最大连接时间，您正在注销”。进一步尝试连接到 Oracle 返回“ORA-01012：未登录”

这是连接字符串：

```
User Id=UserID;Password=userPass;Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)  (HOST=IP.IP.IP.IP)(PORT=XXXX))(CONNECT_DATA=(SID=SID)));;Max Pool Size=5;Connection Timeout=60;Connection Lifetime=120; 
```

以下是阅读器的使用方法：

```
using (OracleDataReader dr = OraFunctions.ExecuteReader(input.ConnectionString,
                                                                    CommandType.Text,
                                                                    input.SqlStmt,
                                                                    null))
{
 while (dr.Read())
 {
 //do stuff here 
 }
 dr.Dispose();
} 
```

这是连接到 Oracle 的类：

```
public static OracleDataReader ExecuteReader(string connectionString, CommandType commandType, string commandText, OracleParameter[] commandParameters) {
        OracleConnection connection = null;
        OracleCommand command = new OracleCommand();
        try {
            connection = new OracleConnection(connectionString);
            connection.Open();
            command.Connection = connection;
            command.CommandType = commandType;
            command.CommandText = commandText;

            if (commandParameters != null) {
                foreach (OracleParameter param in commandParameters) {
                    command.Parameters.Add(param);
                }
            }
            //Passing CommandBehavior.CloseConnection flag to the ExecuteReader method makes the DataReader connection to be closed when the DataReader is closed. 
            OracleDataReader reader = command.ExecuteReader(CommandBehavior.CloseConnection);
            command.Dispose();
            return reader;
        } catch {
            if (connection != null) {
                command.Dispose();
                connection.Close();                    
            }
            throw;
        }
    } 
```

I'm looking for any hints on why the connections aren't actually closing. I'm using Oracle.DataAccess.Client. My guess is that the datareader's command behavior isn't working and that I need to recode this as a dataset where I can explitictly close the connection without having to rely on the CommandBehavior.

Thoughts? Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-23T09:52:15.283

since you have connection.Open();

why didn't proper close it?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:36:45.370

We never could get this worked out. We ended up disabling connection pooling and the open/inactive sessions went away in Oracle. If anyone reads this and has a suggestion on what was going wrong, I would definitely appreciate your input.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:46:07.147

The possible solution I'm evaluating right now is to set `Connection Lifetime` parameter below the server's value.

The idea is when connection returned to the pool after performing query, it's lifetime is checked, and connection is closed if both conditions are met:

*   Connection's lifetime exceeded `Connection Lifetime` parameter value
*   Number of connections opened would not be lower than `Min Pool Size` parameter value

Kudos to [Joao Morais](http://blog.ilab8.com/2011/09/02/odp-net-pooling-and-connection-request-timed-out/) for ODP.NET pooling details.

# javascript - Windows 8 应用栏无法在谷歌地图上运行

> ID：13708385
> 
> 赞同：0
> 
> 时间：2012-12-04T17:18:39.400
> 
> 标签：javascript, html, google-maps, windows-8, appbar

我正在为 Windows 8 开发一个简单的应用程序。我在我的应用程序中使用了谷歌地图的 iframe。问题是当我右键单击时（当我的鼠标指针位于地图顶部时）应用栏没有显示，因为在谷歌地图中，​​默认情况下会处理缩放、滑动等状态。但在我的应用程序中，我想要一个应用栏的附加功能。我尝试在 Google 地图“initialize() 函数”中更改几个“var mapOptions”选项，例如 zoomControl: false 等，但没有任何帮助。请建议我如何解决这个问题。希望得到积极的回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:48:25.573

我不知道如何使用 Google 地图解决您的问题，但 Bing 地图可以使用。这是一个公告：

[http://www.bing.com/community/site_blogs/b/maps/archive/2012/10/03/bing-maps-sdks-for-windows-store-apps-now-available.aspx](http://www.bing.com/community/site_blogs/b/maps/archive/2012/10/03/bing-maps-sdks-for-windows-store-apps-now-available.aspx)

# c# - 查看创建发送 IEnumerable 到控制器

> ID：13708388
> 
> 赞同：1
> 
> 时间：2012-12-04T17:18:47.963
> 
> 标签：c#, .net, asp.net-mvc, razor, asp.net-mvc-4

看法

```
@model IEnumerable<MyMixtapezServerCodeHomePage.Models.album>

@for(int i=0;i<userchoiceIndex;i++)
{
    <div class="editor-label">
        @Html.LabelFor(model => model.artist)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.artist)
        @Html.ValidationMessageFor(model => model.artist)
    </div>
} 
```

控制器

```
[HttpPost]
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Create(IEnumerable<album> album)
{
} 
```

是否可以？我想以更快、更简单的方式为数据库创建多个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:27:54.983

这是可能的，但不是那样的。

首先，创建一个可以容纳您的相册的模型，如下所示：

```
public class AlbumsModel
{
    public List<Album> Albums { get; set; }
} 
```

然后在您的视图中执行以下操作。请注意我使用了`for`循环，这是为了使`name`项目的属性保持同步，并且模型绑定可以轻松地解析发布时的集合。

```
@model AlbumsModel

@for(int i=0; i<Model.Albums.Count; i++)
{
    <div class="editor-label">
        @Html.LabelFor(m=> m.Albums[i].artist)
   </div>
   <div class="editor-field">
       @Html.EditorFor(m=> m.Albums[i].artist)
       @Html.ValidationMessageFor(m => m.Albums[i].artist)
   </div>
} 
```

然后让您的`Post`控制器操作为：

```
[HttpPost]
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Create(AlbumsModel model)
{
    foreach(Album album in model.Albums)
    {
        //do your save here
    }
    //redirect or return a view here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:28:19.190

在你的表单视图上尝试这样的事情，你必须设置集合的索引：

```
@model IEnumerable<MyMixtapezServerCodeHomePage.Models.album>

@for (int i=0; i<userchoiceIndex; i++)
{
    <div class="editor-label">
        @Html.LabelFor(model => model[i].artist)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model[i].artist)
        @Html.ValidationMessageFor(model => model[i].artist)
    </div>
} 
```

在您的控制器上，只需执行以下操作：

```
[HttpPost]
public ActionResult Create(IEnumerable<album> album)
{
    if (ModelState.IsValid) 
    {
       // persist and redirect... whatever
    }
    return View(album);
} 
```

看看这篇文章：[http ://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:52:47.800

感谢所有答案，这些信息确实达到了对我有用的一点。

```
@model IEnumerable<MyMixtapezServerCodeHomePage.Models.album>
@using (Html.BeginForm("FeatureSystem", "album", FormMethod.Post))

<th>
    @Html.DisplayNameFor(model => model.name)
</th>

@{var item = @Model.ToList();}
@for (int count = 0; count < @Model.Count(); count++){
    <td>
        <div class="editor-label">
            @Html.LabelFor(model => item[count].name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => item[count].name)
            @Html.ValidationMessageFor(model => item[count].name)
        </div>
</td>
} 
```

控制器

```
[HttpPost]
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult FeatureSystem(IEnumerable<album> albums) 
```

# google-apps-script - Google 应用脚本 - 图表服务/TableChart：列宽和行高

> ID：13708392
> 
> 赞同：2
> 
> 时间：2012-12-04T17:18:54.007
> 
> 标签：google-apps-script, google-visualization, column-width

[Google Apps Script - Chart Service: table size, column format](https://stackoverflow.com/questions/12553803/google-app-script-chart-service-table-size-column-format)中解释了如何设置 TableChart 的宽度。

我需要做的是在通过 UiApp 显示 TableChart 时控制其列和行的绝对或相对大小。

从 megabyte1024 对上一个问题的回答中提供的脚本开始，如何使四个“Donuts Eaten”列各占表格宽度的 10%？

我们可以通过像素和百分比来控制宽度吗？行高的控制参数是什么？

# unity3d - 如何在 Unity3D 中画一个圆？

> ID：13708395
> 
> 赞同：17
> 
> 时间：2012-12-04T17:19:15.023
> 
> 标签：unity3d

如何在 Unity 3d 中画圆？我想在不同的物体周围画一个圆圈。圆的半径不同，圆有纹理——正方形。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-08-02T01:18:31.817

我发现这段代码有一个很大的错误。点数（大小）不应为“(2 * pi / theta_scale) + 1”，因为这会导致圆绘制 6.28 次。大小应为“1 / theta_scale + 1”。所以对于 0.01 的 theta_scale 需要绘制 100 个点，对于 0.1 的 theta_scale 需要绘制 10 个点。否则它将分别绘制 62 次和 628 次。这是我使用的代码。

```
using UnityEngine;
using System.Collections;

public class DrawRadar: MonoBehaviour {
    public float ThetaScale = 0.01 f;
    public float radius = 3 f;
    private int Size;
    private LineRenderer LineDrawer;
    private float Theta = 0 f;

    void Start() {
        LineDrawer = GetComponent < LineRenderer > ();
    }

    void Update() {
        Theta = 0 f;
        Size = (int)((1 f / ThetaScale) + 1 f);
        LineDrawer.SetVertexCount(Size);
        for (int i = 0; i < Size; i++) {
            Theta += (2.0 f * Mathf.PI * ThetaScale);
            float x = radius * Mathf.Cos(Theta);
            float y = radius * Mathf.Sin(Theta);
            LineDrawer.SetPosition(i, new Vector3(x, y, 0));
        }
    }
} 
```

如果修改“Size”中除以 ThetaScale 的数字，则可以制作一个扫描量规/饼图类型的图形。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-04T20:18:32.817

有关类似问题，[请参阅 Unity Answers 。](http://answers.unity3d.com/questions/46060/how-to-draw-a-2d-circle-on-a-gameobject.html)

[或者](http://docs.unity3d.com/Documentation/ScriptReference/LineRenderer.SetPosition.html)：

```
float theta_scale = 0.1;  // Circle resolution

LineRenderer lineRenderer = gameObject.AddComponent<LineRenderer>();
lineRenderer.material = new Material(Shader.Find("Particles/Additive"));
lineRenderer.SetColors(c1, c2);
lineRenderer.SetWidth(0.2F, 0.2F);
lineRenderer.SetVertexCount(size);

int i = 0;
for(float theta = 0; theta < 2 * PI; theta += theta_scale) {
    x = r*cos(theta);
    y = r*sin(theta);

    Vector3 pos = new Vector3(x, y, 0);
    lineRenderer.SetPosition(i, pos);
    i+=1;
} 
```

LineRenderer 需要连续点。您可以稍微修改此代码以使用圆柱体游戏对象而不是线渲染器。我发现 LineRenderer 有点可怕。

最后，与第一个链接类似，您可以将圆形纹理附加到单位平面。使不属于圆形的纹理的任何部分透明。然后只需缩放并对齐平面以适合您的对象。不幸的是，如果有人看起来几乎与飞机平行，这种方法就不是很好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-25T15:13:15.443

Jerdak 的解决方案很好，但是代码很乱，所以我不得不稍微调整一下。这是一个类的代码，我在循环中使用 i 来避免错误。

它还使用其游戏对象位置更新圆的位置。

```
using UnityEngine;
using System.Collections;

public class CircleDraw : MonoBehaviour {   
  float theta_scale = 0.01f;        //Set lower to add more points
  int size; //Total number of points in circle
  float radius = 3f;
  LineRenderer lineRenderer;

  void Awake () {       
    float sizeValue = (2.0f * Mathf.PI) / theta_scale; 
    size = (int)sizeValue;
    size++;
    lineRenderer = gameObject.AddComponent<LineRenderer>();
    lineRenderer.material = new Material(Shader.Find("Particles/Additive"));
    lineRenderer.SetWidth(0.02f, 0.02f); //thickness of line
    lineRenderer.SetVertexCount(size);      
  }

  void Update () {      
    Vector3 pos;
    float theta = 0f;
    for(int i = 0; i < size; i++){          
      theta += (2.0f * Mathf.PI * theta_scale);         
      float x = radius * Mathf.Cos(theta);
      float y = radius * Mathf.Sin(theta);          
      x += gameObject.transform.position.x;
      y += gameObject.transform.position.y;
      pos = new Vector3(x, y, 0);
      lineRenderer.SetPosition(i, pos);
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-10-05T01:40:02.543

使用 Shader Graph 我们现在可以绘制像素完美的圆。

[![无光照着色器图](../Images/4a46566044b9d1dda1becfe63d5b8b1f.png)](https://i.stack.imgur.com/pHzrt.png)

创建此图形后，基于此着色器创建新材质。

[![结果](../Images/346057a42d559d9158935462bda73446.png)](https://i.stack.imgur.com/fxt94.png)

然后使用精灵渲染器创建一个新的游戏对象并设置您刚刚创建的材质。

您可以使用材质的“缩放”参数来缩放圆。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-11T19:31:17.290

最佳答案中的 linerenderer 方法非常简单，正是我想要的。我针对较新版本的 Unity 进行了更新，并进行了一些小调整，以使其对初学者/用户更加友好。

具体来说：

*   `LineRenderer.SetVertexCount()`在较新版本的 Unity 中已弃用，替换为`positionCount`
*   用实际段数替换 theta 比例以消除猜测
*   添加循环设置 - 不确定这是否在旧版本的 Unity 中，它可以在`LineRenderer`'s 检查器中设置
*   删除了不必要`Update`的功能 - 渲染线是一个持久的游戏对象

```
using UnityEngine;
[RequireComponent(typeof(LineRenderer))]
public class DrawRing : MonoBehaviour
{
    public LineRenderer lineRenderer;
    [Range(6,60)]   //creates a slider - more than 60 is hard to notice
    public int lineCount;       //more lines = smoother ring
    public float radius;
    public float width;

    void Start()
    {
        lineRenderer = GetComponent<LineRenderer>();
        lineRenderer.loop = true;
        Draw();
    }

    void Draw() //Only need to draw when something changes
    {
        lineRenderer.positionCount = lineCount;
        lineRenderer.startWidth = width;
        float theta = (2f * Mathf.PI) / lineCount;  //find radians per segment
        float angle = 0;
        for (int i = 0; i < lineCount; i++)
        {
            float x = radius * Mathf.Cos(angle);
            float y = radius * Mathf.Sin(angle);
            lineRenderer.SetPosition(i, new Vector3(x, 0, y));
            //switch 0 and y for 2D games
            angle += theta;
        }
    }
} 
```

请注意，这假定附加到您想要环的游戏对象。因此，应取消选中该`Use World Space`选项。`LineRenderer`还要记住，游戏对象的比例会影响点的位置和线的宽度。

将其放在地面上（如在单位选择圈中）：

1.  将脚本放在单独的游戏对象上
2.  将游戏对象 X 旋转到 90
3.  检查`use world space`衬里渲染器
4.  将 linerenderer 设置`Alignment`为**Transform Z**
5.  将要圈出的事物的位置添加到`x`和`y`中`SetPosition`。可能同时将 0 替换为`0.1f`或`yOffset`变量以避免与地形发生 z-fighting。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-25T07:15:32.170

圆形可以使用着色器绘制 - 如果它在距离中心的半径上绘制像素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-22T15:25:18.047

我建议为 GameObject 创建扩展方法。对我很好。

```
public static class GameObjectExtension
{
    const int numberOfSegments = 360;
    public static void DrawCircle(this GameObject go, float radius, 
float lineWidth, Color startColor, Color endColor, bool lineRendererExists=true)
    {
        LineRenderer circle = lineRendererExists ? go.GetComponent<LineRenderer>() : go.AddComponent<LineRenderer>();
        circle.useWorldSpace = false;
        circle.startWidth = lineWidth;
        circle.endWidth = lineWidth;
        circle.endColor = endColor;
        circle.startColor = startColor;
        circle.positionCount = numberOfSegments + 1;
        Vector3 [] points = new Vector3[numberOfSegments + 1];

        for (int i = 0; i < numberOfSegments + 1; i++)
        {
            float rad = Mathf.Deg2Rad * i;
            points[i] = new Vector3(Mathf.Sin(rad) * radius, 0, Mathf.Cos(rad) * radius);
        }
        circle.SetPositions(points);
    }
} 
```

还有一点需要注意：如果`LineRenderer`未应用组件，则必须使用最后一个参数`false`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-14T19:12:04.933

我有一个[着色器](https://gist.github.com/b90d2644d7b990d0574307218478383a)，我通常从它开始制作镜头光晕之类的效果，它会制作一个圆圈。使用着色器是最好的选择，因为你会得到完美平滑的圆形。

此外，由于着色器更改不需要重新编译和重新进入播放模式，因此很容易试验和调整着色器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-01T06:27:04.987

使用 Sprite 执行以下操作。陈在场景中飞行，所以她略高于飞机。我让她飞，所以我可以得到一个很好的截图，而不是因为它不能很好地与飞机配合。

我使用了一个低分辨率的圆形精灵。X 旋转 90 比例 X 15, Y 15, Z 1

然后我设置排序层，所以它将呈现在默认层之上。当我遇到这篇文章时，我正在对此进行测试。它不能很好地处理阴影。我必须弄清楚绘制了哪些图层阴影以确保它们被渲染到精灵上。

[![在此处输入图像描述](../Images/a253a95c79e4f2337ca469198e3df656.png)](https://i.stack.imgur.com/qWqmL.png)

# javascript - Ext.draw.Sprite 比例故障

> ID：13708397
> 
> 赞同：0
> 
> 时间：2012-12-04T17:19:23.517
> 
> 标签：javascript, extjs, svg, raphael

我正在做缩放工具，Sprite.setAttributes({scale: {…}); 有一些问题 以画布中心为中心...

[http://teempla.com/sites/all/themes/teamplan/d2d/](http://teempla.com/sites/all/themes/teamplan/d2d/) - 就是这样。

尝试用铅笔画两条或多条线，然后按 Zoom + 你会看到有浮动。这是错的。奇怪的是，'corse 他们的位置相对中心。

点击事件代码的图片：

```
click: function( e, t, eOpts ){
   d2dModel.set('zoom',d2dModel.get('zoom')+0.1);
  var draw = Ext.ComponentManager.get(Ext.select('.d2d-draw-panel',true).elements[0].id);
  for (var i in draw.surface.items.map){
     draw.surface.items.map[i].setAttributes({
        scale: {
           cx: d2dModel.get('width')/2,
           cy: d2dModel.get('height')/2,
           x: d2dModel.get('zoom'),
           y: d2dModel.get('zoom')
        }
     }, true);
 }
} 
```

在 Raphael.JS 我用

```
el.transform('s'+zoom+','+zoom+','+w/2+','+h/2); 
```

它工作正常。

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:49:30.957

尝试使用 setViewBox 缩放您的表面

[http://docs.sencha.com/ext-js/4-1/source/Surface.html#Ext-draw-Surface-method-setViewBox](http://docs.sencha.com/ext-js/4-1/source/Surface.html#Ext-draw-Surface-method-setViewBox)

我在我的项目中所做的是：

```
 var bbox = draw.surface.items.getBBox();
    draw.surface.setViewBox(bbox.x, bbox.y, draw.getSize().width / zoomValue, draw.getSize().height / zoomValue); 
```

请注意，这是在 ext 4 beta 期间，但现在应该几乎相同。

# php - 按 id 更新，但只有我想要的字段

> ID：13708404
> 
> 赞同：0
> 
> 时间：2012-12-04T17:19:48.997
> 
> 标签：php, database, row

我正在尝试制作我的更新表单并查询以通过 id 更新。但是当我将数据放入表单时，即使它没有任何数据，他也会更新所有字段，因此在数据库中他得到“0”。我只需要更新有数据的字段。

你们能帮帮我吗？

**它总是让我知道我有未定义的变量！并且只更新第一个和第二个字段！**

谢谢，这是我的代码：

```
 if (isset($_POST['alterar'])) {

    $id_cliente = $_POST["id_cliente"];
    $nome_cliente = $_POST["nome_cliente"];
    $telefone_cliente = $_POST["telefone_cliente"];
    $morada_cliente = $_POST["morada_cliente"];
    $email_cliente = $_POST["email_cliente"];
    $servico = $_POST["servico"];
    $n_pecas = $_POST["n_pecas"];
    $tp_arranjo = $_POST["tp_arranjo"];
    $descricao = $_POST["descricao"];

    } 

    $query = "UPDATE `clientes` SET ";
if ($nome_cliente) $columns[] = "`nome_cliente`        = '{$nome_cliente}'";
if ($telefone_cliente) $columns[] = "`telefone_cliente`= '{$telefone_cliente}'";
if ($morada_cliente) $columns[] = "`morada_cliente`  = '{$morada_cliente}'";
if ($email_cliente) $columns[] = "`email_cliente`   = '{$email_cliente}'";
if ($servico) $columns[] = "`servico`         = '{$servico}'";
if ($n_pecas) $columns[] = "`n_pecas`         = '{$n_pecas}'";
if ($tp_arranjo) $columns[] = "`tp_arranjo`      = '{$tp_arranjo}'";
if ($descricao) $columns[] = "`descricao`       = '{$descricao}'";

$columns = implode(",",$columns);
$query .= $columns . " WHERE id_cliente='$id_cliente'";

    mysql_query($query);

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:28:55.087

如果您有要更新的值，您需要将查询更改为仅列出要更新的列。这需要根据条件动态构建查询字符串。

例子：

```
$query = "update `clientes` set ";
if ($nome_cliente) $columns[] = "`nome_cliente`= '{$nome_cliente}'";
if ($telefone_cliente) $columns[] = "`telefone_cliente`= '{$telefone_cliente}'";
//etc..

$columns = implode(",",$columns);
$query .= $columns . " where id_cliente='$id_cliente'"; 
```

注意：正如其他人所提到的，这并不安全！在将用户输入传递到数据库之前，您应该始终对其进行清理。

# oop - 将 NOW 设置为对象的属性

> ID：13708413
> 
> 赞同：0
> 
> 时间：2012-12-04T17:20:21.067
> 
> 标签：oop, orm, datamapper

我正在将一些旧的程序代码转换为 OOP。

假设我有一些程序代码将记录标记为已删除并记录完成的时间。

```
UPDATE
toys
SET
is_trashed = 1,
trashed_date_timestamp = NOW()
WHERE
id = ?? 
```

我从有关 OOP 的各种书籍中收集到，在面向对象的范式中，您：

1.  '找到'一个特定项目作为对象，然后
2.  修改其属性，然后
3.  使用 ORM 映射器上的通用“更新”方法将其属性保存到数据库

这与我的代码中使用的以过程/数据库为中心的方法形成对比，在该方法中，我运行 SQL 查询以使用数据库中的特定值更新*特定记录，以实现特定的属性**更改*。

所以，假设我想将此代码转换为面向对象的范例。

1.  我通过它的 id 找到我的对象，并且
2.  修改其属性：
    *   我将 isTrashed 属性设置为 TRUE
    *   我将rashedDateTimestamp 属性设置为???

啊！？

当我尝试将rashedDateTimestamp 属性设置为*NOW*时，它会引发一大堆问题。

*   现在是什么？我宁愿确保它是数据库时间的 NOW()，而不是服务器上的 NOW。
*   玩具对象的客户如何处理获取和设置垃圾日期时间戳属性？

我可以想出很多“给这只猫剥皮”的方法，但想知道是否有任何模式可以解决这个问题。

或者这个特性在 OO 范式中被证明是不可能的，我应该使用类似“事件观察者”的东西。

简而言之 - 您如何以合理的准确性将*NOW*存储到对象属性中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:24:33.350

您存储一个`DateTime`没有任何传递参数的对象。该`DateTime`对象将默认为当前时间。

# cordova - 使用 PhoneGap 的闭包编译器和性能

> ID：13708414
> 
> 赞同：0
> 
> 时间：2012-12-04T17:20:24.207
> 
> 标签：cordova, google-closure-compiler

通过 Closure Compiler 运行脚本会对 PhoneGap 应用程序产生影响吗？或者PhoneGap在编译时会做类似的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:35:03.960

是的，通过 Google Closure Compiler 运行您的脚本会有所作为。代码会更小，从而解析得更快。以及闭包编译器在代码优化方面为您提供的其他好处。

不，PhoneGap 不会对您的 JavaScript 源代码进行任何连接或优化。

# drupal - 在 Drupal 7 中，我无法通过子主题覆盖父主题中的模板。我该如何解决？

> ID：13708415
> 
> 赞同：0
> 
> 时间：2012-12-04T17:20:26.837
> 
> 标签：drupal, drupal-7, drupal-theming

我花了几个小时试图解决这个问题，但没有任何效果......我该怎么办？！似乎这应该是自动的，但很难找到解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:11:18.917

我只需要刷新页面缓存就可以了。我花了大约五个小时在这上面浪费了时间，但刷新了缓存，看看会发生什么。您还可以为生产站点打开主题注册表。

# java - jpa：具有自引用和非抽象超类的继承

> ID：13708417
> 
> 赞同：0
> 
> 时间：2012-12-04T17:20:33.457
> 
> 标签：java, hibernate, jpa, persistence, javabeans

在我当前的项目中，我有一个如下所示的继承结构：

```
@Entity
@Table(name="groups")
@Inheritance(strategy=InheritanceType.JOINED)
@DiscriminatorValue("G")
@DiscriminatorColumn(name="group_type")
public class Group{  //some annotations removed 
    private Long id;
    private String name;
    private Set<Subject> subjects;
@ManyToOne(cascade=CascadeType.ALL)
@JoinColumn(name="parent_group_id")
    private Group parent;            #####  tree parent  ####
@OneToMany(cascade=CascadeType.ALL, mappedBy="parent")
    private Set<Group> subGroups;    ##### tree children #####
        ...
} 
```

通过包含其他对象的列表，我的`Group`对象可以具有树状结构`Group`。由于有些组有点特殊，所以有第二个类扩展了这个类：

```
 @Entity
   @DiscriminatorValue("C")
   @Table(name="fix_groups")
   public class FixGroup extends Group{
        private Layout lay;
        private Set<Person> instr;
            ...
    } 
```

我尝试使用联合多表方法（如此处所述：[http](http://en.wikibooks.org/wiki/Java_Persistence/Inheritance#Joined.2C_Multiple_Table_Inheritance) ://en.wikibooks.org/wiki/Java_Persistence/Inheritance#Joined.2C_Multiple_Table_Inheritance ）但它似乎不适用于非抽象超类，如`Group`！我得到以下异常：

```
Caused by: java.lang.ClassCastException: org.hibernate.mapping.JoinedSubclass 
cannot be cast to org.hibernate.mapping.RootClass 
```

除了声明`Group`为抽象并创建一个`Group2`仅扩展它的新类之外，还有其他解决方案吗？如果我这样做了，这种自我参照`Set<Group> subGroups`还会引起问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:07:16.140

当子类已经映射到父类（在本例中为组）时，我可以通过在子类中设置 ID 来导致此错误。例如在父类中：

```
@Entity
@Table(name="groups")
@Inheritance(strategy=InheritanceType.JOINED)
public class Group {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "ID")
    private Long id;
... 
```

然后像这样在子类中设置id：

```
@Entity
@Table(name="sub_groups")
public class SubGroup extends Group {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "ID")
    private Long id;
... 
```

在这种情况下，Group 不需要是抽象的，但不能在子类上定义 id。

另外，作为旁注，如果您使用带有“join”类型继承的 Hibernate，则不需要鉴别器列和值。Hibernate 仅在使用单个表时使用那些。请参考这篇文章以获取更多信息：

[Hibernate 4：持久化 InheritanceType.JOINED 鉴别器列值](https://stackoverflow.com/questions/7988756/hibernate-4-persisting-inheritancetype-joined-discriminator-column-values/8576375#8576375)

# mysql - 总计重复次数

> ID：13708418
> 
> 赞同：1
> 
> 时间：2012-12-04T17:20:44.310
> 
> 标签：mysql, sum

我有这个可以在我的数据库中找到所有重复项：

```
SELECT phone, count(*) AS ct FROM table GROUP BY `phone` HAVING ct >1 
```

这会产生 12 行，但是这 12 行的 ct 之和等于 26：

```
phone      ct
3600000000  4
3602931205  2
3602933399  2
3602933736  2
3602936241  2
3602937911  2
3602939287  2
3602939353  2
3602939767  2
3603174530  2
3606612300  2
3608995913  2 
```

如何修改查询以告诉我 ct 的总数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:21:33.450

试试这个：：

```
Select SUM(temp_1.count_1) as totalCount
from
(
SELECT phone, count(1) AS count_1 FROM table GROUP BY `phone` HAVING count_1 >1) as temp_1 
```

# android - Android 上下文操作栏 - 全选/取消全选

> ID：13708419
> 
> 赞同：5
> 
> 时间：2012-12-04T17:20:46.053
> 
> 标签：android, android-menu

我正在寻找一种在上下文操作栏上实现下拉菜单的方法，该下拉菜单显示所选项目的数量，然后有一个选择全部或取消全部选择的下拉菜单。标准图库应用程序具有此功能。

唯一的方法是创建一个自定义视图来替换标题，还是有更简单的方法？如果你需要打电话

> 设置自定义视图

并替换标题，这样做的最佳方法是什么。弹出菜单是否合适。我希望它遵循与上下文操作栏相同的样式，例如触摸反馈、颜色和指示它们是更多选项的小箭头。

谢谢。

# java - 将两个具有类似名称字段的 pojo 同步在一起

> ID：13708424
> 
> 赞同：-1
> 
> 时间：2012-12-04T17:21:05.643
> 
> 标签：java, automatic-properties

我有两个pojo。

```
public class Pojo1 implements Serializable {

    private static final long serialVersionUID = 1302290920579795856L;

    private Long id;
    private String idNumber; 
    private String vendorNumber; 
    private Date expires;

    // Getters and setters for each one
}

public class Pojo2 implements Serializable {

    private static final long serialVersionUID = 1302290920579795856L;

    private Long id;
    private String idNumber; 
    private String vendorNumber; 
    private Date expires;
    private String otherData;

    // Getters and setters for each one
} 
```

是否有 Java API 可用于从 Pojo2 自动创建 Pojo1？

IE：

```
Pojo1 newPojo1 = SomeLibrary.fromPojoWithLikeNamedFields(pojo2);

// newPojo1 now has all the fields that had the same name from pojo2 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T17:27:31.570

复制构造函数不会完成这项工作吗？

```
public Pojo1(Pojo2 pojo2){
    this.id = pojo2.getId();
    this.idNumber = pojo2.getIdNumber();
    this.vendorNumber = pojo2.getVendorNumber();
    this.expires = pojo2.getExpires();
} 
```

然后就这样使用，

```
Pojo1 newPojo1 = new Pojo1(pojo2); 
```

还是我误解了什么……？

# jquery - 如何获取日期选择器发布的日期？

> ID：13708425
> 
> 赞同：0
> 
> 时间：2012-12-04T17:21:05.073
> 
> 标签：jquery, asp.net, asp.net-mvc

我有这样的看法：

```
$('#datepicker').datepicker({
    onSelect: function (date, inst){
        $(this).parent('form').submit();
    }
});

<form method="post" name="datepickerForm">
    <div id="datepicker"></div>
</form>
Date Posted: @ViewBag.PostedDate 
```

在控制器中，我有：

```
public ActionResult Index(int? datepickerForm) {
    if(datepickerForm.HasValue) // this is always null
        ViewBag.PostedDate = datepickerForm.Value;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:27:01.320

将 更改`div`为`input`.

```
<input id="datepicker" name="date" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:28:01.133

查看以下代码

```
$('#datepicker').datepicker({
onSelect: function (date, inst){
    $(this).parent('form').submit();
} 
 });

 <form method="post" name="datepickerForm">
 <input id="datepicker"/>
  </form> 
```

在控制器中有以下代码

```
public ActionResult Index(int? datepicker) {
//datepicker id of input element
    ViewBag.PostedDate = datepicker;
} 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:53:33.227

采用

```
<input id="datepicker" name="date" /> 
```

代替

```
<div id="datepicker"></div> 
```

阅读[这篇](http://yassershaikh.com/introduction-to-jquery-date-picker-in-asp-net-mvc/)文章，这篇文章演示了使用 datepicker 并将数据发送/发布回控制器的正确方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:44:57.593

我最终同时使用了`div`显示和`input textbox`发布日期。

```
$('#datepicker').datepicker({
    onSelect: function (date, inst){
        $('#datepickerTxt').val(date);
        $(this).parent('form').submit();
    }
});

<form method="post" name="datepickerForm">
    <div id="datepicker"></div>
    <input type="text" id="datepickerTxt" name="datepickerTxt" />
</form>
Date Posted: @ViewBag.PostedDate 
```

在控制器中，我有：

```
public ActionResult Index(string datepickerTxt) {
    if(!string.IsNullOrEmpty(datepickerTxt)
        ViewBag.PostedDate = datepickerTxt;
} 
```

# cakephp - SQL 更新语句中缺少 cakephp 发布数据字段

> ID：13708427
> 
> 赞同：3
> 
> 时间：2012-12-04T17:21:16.400
> 
> 标签：cakephp, cakephp-2.1

无法让 cakephp 更新记录。

控制器代码：

```
public function viewBenefit($id) {
    if ($this->request->is('post')) {
        $this->set('post', $this->request->data);
        $this->Benefit->id = $id;
        if ($this->Benefit->save($this->Benefit->data)) {
            $myVars['Sucsess'] = TRUE;
            $this->Session->setFlash('Updates Saved');
        } else {
            $myVars['NewID'] = 0;
            $myVars['Sucsess'] = False;
            $this->Session->setFlash('There was an error.');
        }
    }

    $this->Benefit->recursive = 2;
    $this->Benefit->id = $id;
    $this->set('benefit', $this->Benefit->read());
} 
```

相关查看代码：

```
<?php echo $this->Form->create('Benefit',array('action'=>'edit','url' => '#')); ?>
<?php echo $this->Form->input('id',array('type'=>'hidden')) . "\n"; ?>
<?php echo $this->Form->input('short_description',array('type'=>'textarea')) . "\n"; ?>
<?php echo $this->Form->end(); ?> 
```

注意：表格是通过 JS 提交的

POST 数据（通过 debug($post); ）

```
array(
    'Benefit' => array(
        'id' => '1952e98e-f589-47d4-b458-11a1bd58ba3b',
        'short_description' => '<p>This is great sample insurance 321321</p>'
    )
) 
```

SQL 更新语句：

```
UPDATE `c16memberdev`.`benefits` SET `modified` = '2012-12-04 10:45:16' WHERE `c16memberdev`.`benefits`.`id` = '1952e98e-f589-47d4-b458-11a1bd58ba3b' 
```

如您所见，字段“short_description”没有添加到 SQL 语句中，因此数据没有添加到数据库中。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:29:49.447

尝试改变

```
$this->Benefit->save($this->Benefit->data) 
```

到

```
$this->Benefit->save($this->request->data) 
```

# c++ - 凯撒密码输入文本文件

> ID：13708431
> 
> 赞同：0
> 
> 时间：2012-12-04T17:21:30.830
> 
> 标签：c++, encryption

我正在尝试使用 C++ 创建凯撒密码。我在文本文件中读取了程序，但我需要它来加密文本并输出到屏幕。

这是我的加密代码，但我似乎无法让它工作。我才刚刚开始使用 C++，并不确定从这里去哪里。

```
cout << "enter a value between 1-26 to encrypt the text: ";
cin >> shift;

while ((shift <1) || (shift >26)) {
    cout << "Enter a value between 1 and 26!: ";
    cin >> shift;
}

int size = strlen(text);
int i=0;

for(i=0; i<size; i++) {
    cipher[i] = (text[i]);
    if (islower(text[i])) {
        if (text[i] > 122) {
            cipher[i] = ( (int)(text[i] - 26) + shift);
        }
    } else if (isupper(text[i])) {
        if (text[i] > 90) {
            cipher[i] = ( (int)(text[i] - 26) + shift);
        }
    }
}

cipher[size] = '\0';
cout << cipher << endl; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:39:12.750

首先，你的算法是错误的。

如果我们假设[ASCII](http://www.asciitable.com/)输入，那么您需要加密介于 32（即空格）和 126（即波浪号〜）之间的值，包括在内。您可以通过将键（单个数字）添加到值来完成此操作。如果结果大于 126（您的最高可用字符），您需要环绕并从 32 开始计数。这意味着 126 + 1 = 32、126 + 2 = 33 等。查找“模数”。

我建议您查找“调试”一词。通常，当您拥有算法时，您会尽可能地编写与算法匹配的代码。如果结果不是预期的，那么您使用调试器逐行逐行，直到您发现该行是您的预期结果并且您的代码的结果不再匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:39:30.737

一些东西：

1.  您正在检查字符`islower`，然后检查 ascii 值是否为`> 122`. 这永远不会是真的。在默认语言环境（标准 ascii）中，`islower()`只有当 ascii 值在 [97, 122] (az) 范围内时才会为真。也是如此 `isupper()`。它只对 65 到 90 之间的 ascii 值返回 true，包括 65 和 90。
2.  无论如何，您已经在使用 ascii 值，因此`islower()`可能`isupper()`是多余的。这些等同于对范围进行边界检查，即`text[i] >= 97 && text[i] <= 122`. 它们是有用的快捷方式，但如果可以简化，请不要围绕它们编写代码。
3.  如果值 <= 90/122，您的代码永远不会添加凯撒移位，因此您永远不会移动任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:07:14.087

重新格式化，制作可编译的广告固定算法（我认为试图实现的目标）

```
#include <iostream>
using namespace std;

char text[] = {"This is my encryption code but I can't seem to get it to work. "
               "I have only just started using C++ and not really sure where "
               "to go from here."};
char cipher[sizeof(text)];

void main()
{
    int shift;
    do {
        cout << "enter a value between 1-26 to encrypt the text: ";
        cin >> shift;
    } while ((shift <1) || (shift >26));

    int size = strlen(text);
    int i=0;

    for(i=0; i<size; i++)
    {
        cipher[i] = text[i];
        if (islower(cipher[i])) {
            cipher[i] = (cipher[i]-'a'+shift)%26+'a';
        }
        else if (isupper(cipher[i])) {
            cipher[i] = (cipher[i]-'A'+shift)%26+'A';
        }
    }

    cipher[size] = '\0';
    cout << cipher << endl;
} 
```

# iphone - 排序/过滤 NSArray/NSMutableArray

> ID：13708434
> 
> 赞同：0
> 
> 时间：2012-12-04T17:21:35.113
> 
> 标签：iphone, ios, arrays, sorting

更符合我的兴趣。

如果你有一个像这样定义的类......

```
MyClass
-------
NSString *name 
```

你把它们中的很多放入一个数组（或可变数组）中。然后你可以使用这样的谓词......

```
[NSPredicate predicateWithFormat:@"name = %@", someValue]; 
```

过滤数组，使其仅包含名称为给定值的对象。

或者像这样对描述符进行排序......

```
[NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES]; 
```

按名称字段按升序对数组进行排序。

我的问题是，如果您有一个字符串数组（或 NSNumbers），您可以使用类似的“格式”谓词吗？

比如说你有数组......

```
@[@"Cat", @"Bat", @"Dog", @"Cow"]; 
```

你可以使用“predicateWithFormat”来过滤这个“sortDescriptorWithKey”数组来排序吗？

我知道您可以使用块，但只是想知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:41:47.233

当然，您可以使用 predicateWithFormat: 过滤字符串数组或其他任何内容。至于排序，您将使用 sortedArrayUsingSelector:，并使用您想要的任何选择器（compare:、caseInsensitiveCompare: 等）。简单数组中没有键，因此不能使用 sortDescriptorWithKey。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:39:29.643

字符串没有任何键来使用谓词或排序依据。[您可以在apple docs](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)中找到对数组进行排序的所有其他可能方式。

# java - Resteasy UriBuilder 编码不正确？

> ID：13708435
> 
> 赞同：3
> 
> 时间：2012-12-04T17:21:36.783
> 
> 标签：java, rest, uri, resteasy

我正在尝试使用来自 RestEasy 的 UriBuilder 从字符串 url 创建一个 URI，但我得到了一些意想不到的结果。我正在运行以下代码。

`UriBuilder uriBuilder = UriBuilder.fromPath("http://localhost:8190/items?pageNumber={pageNumber}&pageSize={pageSize}");`

`System.out.println(uriBuilder.build(1, 10));`

预期结果：

`http://localhost:8190/items?pageNumber=1&pageSize=10`

实际结果：

`http://localhost:8190/items%3FpageNumber=1&pageSize=10`

当使用 UriBuilder.fromUri() 而不是 fromPath() 时，它会在创建 URI 时引发异常

`Illegal character in query at index 39: http://localhost:8190/items?pageNumber={pageNumber}&pageSize={pageSize}`

39 的字符是 {。

我不想解析完整的字符串来部分地创建 URI。

我查看了 RestEasy 代码，它正在对“？”进行编码。使用 org.jboss.resteasy.util.Encode#encode 使用来自 org.jboss.resteasy.util.Encode#pathEncoding 的 pathEncoding 映射创建构建器时的字符。

我的用法不正确还是实现不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:32:36.077

由于[RestEasy](http://www.jboss.org/resteasy)是一个 JAX-RS 实现，来自Oracle[文档](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/UriBuilder.html#fromPath%28java.lang.String%29)：`fromPath`

> 创建一个表示从 URI 路径初始化的**相对URI 的新实例。**

我认为它不适用于绝对 URL，因此恐怕答案是您的用法不正确。

你将需要这样的东西[（](https://wikis.oracle.com/display/Jersey/Overview+of+JAX-RS+1.0+Features#OverviewofJAX-RS1.0Features-BuildingURIs)虽然没有测试过）

```
UriBuilder.fromUri("http://localhost:8190/").
  path("{a}").
  queryParam("pageNumber", "{pageNumber}").
  queryParam("pageSize", "{pageSize}").
  build("items", 1,10); 
```

# landscape-portrait - 虚拟键盘将纵向模式变为横向模式

> ID：13708437
> 
> 赞同：2
> 
> 时间：2012-12-04T17:21:42.043
> 
> 标签：landscape-portrait, virtual-keyboard, mobile-browser, android-virtual-keyboard

我有一个站点会根据设备的方向更改其布局。但是，当页面中有表单，用户关注文本域时，会弹出虚拟键盘，将页面转为“横向模式”（可能是页面高度较低触发）

我在 Chrome、Firefox 和 Dolphin 移动浏览器中注意到了这个问题，有什么办法可以让设备在设备为纵向时浏览器保持纵向？

# android - 删除 ImageView 周围的白色边框

> ID：13708450
> 
> 赞同：5
> 
> 时间：2012-12-04T17:23:08.127
> 
> 标签：android, android-layout, android-imageview

我的设计师不断在我的图像周围添加一点填充。我希望将图像粘贴在顶部并填充屏幕的宽度。

这是设计师的截图：

![截屏](../Images/e52203c68ac9f9b9ab1c4e5172a1e972.png)

这是我的 XML 代码：

```
<ImageView
    android:id="@+id/markertap_header"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/header_bootsverleih_xhdpi" /> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T17:41:59.740

看起来图像大于屏幕宽度，因此在调整大小后会缩小。尝试添加`android:adjustViewBounds="true"`到您的`ImageView`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-13T15:02:08.953

```
 <ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:adjustViewBounds="true"
        android:id="@+id/imageView"
        android:cropToPadding="false"
        android:scaleType="fitXY" /> 
```

Experienced the same when I used an ImageView for Splashscreen, this^ worked for me.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-04-04T22:23:38.883

您可能只想将它添加到您的图像视图中。它解决了我的问题。

```
android:paddingVertical="0dp"
android:paddingHorizontal="0dp" 
```

# javascript - 为幻灯片插件添加图像时开发人员工具中的对象错误

> ID：13708451
> 
> 赞同：1
> 
> 时间：2012-12-04T17:23:13.520
> 
> 标签：javascript, jquery

我正在通过 for 循环将图像插入要显示在滑块上的 html 部分。我试图让它显示在我的浏览器上，但我的开发人员工具不断向我抛出一个奇怪的错误。我想我在某处插入了一个字符，而 jquery 库不喜欢它。

未捕获的错误：语法错误，无法识别的表达式：[object Object]:eq(0)

这是我的代码。

```
var theImgHTML = "<div class='slides_container portfolio-img'>";

for (i = 0; i < imgList.length; i++) {
    theImgHTML += "<img src='images/portfolio/" + imgList[i] + "' alt='Slide " + (i + 1) + "' />";
}

theImgHTML += "</div>";

$("#slides").html(theImgHTML);

$("#slides").slides({
    preload: true,
    preloadImage: 'img/loading.gif',
    play: 5000,
    pause: 2500,
    hoverPause: true
});​ 
```

这是 html 中的结果。

```
<div class="slides_container portfolio-img" style="overflow: hidden; position: relative; display: block; background-image: url(loading.gif); background-position: 50% 50%; background-repeat: no-repeat no-repeat;">
    <div class="slides_control" style="position: relative; width: 0px; height: 0px; left: 0px;">
        <img src="images/portfolio/one.jpg?1354641162837" alt="Slide 1" style="position: absolute; top: 0px; left: 0px; z-index: 0; display: none;">
        <img src="images/portfolio/two.jpg" alt="Slide 2" style="position: absolute; top: 0px; left: 0px; z-index: 0; display: none;">
        <img src="images/portfolio/three.jpg" alt="Slide 3" style="position: absolute; top: 0px; left: 0px; z-index: 0; display: none;">
    </div>
</div> 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:17:12.130

最终的问题是，当将变量“theImgHTML”（包含我的图像的标记）添加到幻灯片中时，我需要用 div 包含每个图像。我没有那样做。根据幻灯片插件，当要显示图像时..每个 div 都需要有一个包含 div 围绕每个图像。

我在没有 div 的情况下尝试了它，只是自己拥有图像，插件不接受它（因此出现上述错误）。希望这可以帮助将来的人。

这是一个可行的示例。

```
<div id="slides">
     <div class="slides_container">
          <div>
             <img src="http://placehold.it/570x270">
          </div>
          <div>
             <img src="http://placehold.it/570x270">
          </div>
      </div>
</div> 
```

有关更多信息，请转到下面的链接并转到基本标记。

[http://www.slidesjs.com/](http://www.slidesjs.com/)

# c# - 双倍到某些字符串格式

> ID：13708454
> 
> 赞同：0
> 
> 时间：2012-12-04T17:23:19.263
> 
> 标签：c#, .net

我有这个简化的方法：

```
private string GetStringValue(object Value)
{
    return ((double)Value).ToString();
} 
```

喷出：

1.8E-09

我打算得到这种格式：

1.8e-009

这很容易实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T17:25:47.903

[查看自定义数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx#SpecifierExponent)的文档，我*认为*您想要：

```
// Separate variable just for clarity
double number = (double) Value;
return number.ToString("0.###e+000"); 
```

（`0.###E-000`如果您只想要负指数的符号，请使用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:25:36.220

您需要使用 String.Format 并使用正确的格式字符串。

[http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

这应该有助于十进制格式字符串。

所以

```
(double)Value.ToString("E") 
```

会为 en-US 做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:28:01.197

```
return string.Format("{0:0.###E+000}", value); 
```

# php - 在 php 中比较 mustache 生成的字符串

> ID：13708456
> 
> 赞同：1
> 
> 时间：2012-12-04T17:23:31.583
> 
> 标签：php, javascript, mustache, icanhaz.js

如果我将小胡子生成的变量与实际字符串进行比较，它会显示奇怪的结果。

```
<?php
$username = {{userName}};
echo $username; // john

 //if i compare with the string it returns false
if ($username == 'john') //return false

//if i print strlen($username) it returns 14 but it should return 4

?> 
```

如何将其转换为常规字符串，以便我可以将其与 php 中的其他字符串进行比较？有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:28:04.940

把它包起来修剪[http://php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

看起来小胡子增加了一些空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:29:52.507

那是因为那些“小胡子”变量不是 PHP 变量——它们源自 Javascript。

[http://icanhazjs.com/](http://icanhazjs.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T04:22:42.623

您没有提供足够的上下文来实际回答问题，但从症状来看，我会说您的字符串是`&quot;john&quot;`.

您使用的是转义输出 ( `{{ foo }}`) 而不是非转义 ( `{{{ foo }}}`)，这对于 PHP 而不是 HTML 输出几乎肯定是错误的。我不了解 icanhaz.js，但在许多 Mustache 实现中，您可以将转义符换成更相关的东西。在这种情况下，您可能需要一个与 PHP 等效的转义器`var_export()`。

# r - 如何为幸存者沿天绘制每个强度的线？

> ID：13708458
> 
> 赞同：0
> 
> 时间：2012-12-04T17:23:38.693
> 
> 标签：r, graph, dataframe

我想知道是否有人可以帮助我处理数据集，我想在 y 轴上绘制幸存者图表，在 x 轴上绘制日期。我遇到的问题是试图按四个强度组分解数据。理想情况下，我想要一个包含所有四种强度的趋势线的图表，以便我可以查看它们之间是否存在显着差异。任何帮助或提示将不胜感激！这是我的数据框的样子：

```
 Intensity Day Survivors
1        0.0   0        37
2        0.0   1        29
3        0.0   2         9
4        0.0   3         1
5        0.0   4         1
6        0.0   5         0
7        0.0   6         0
8        0.0   7         0
9        0.1   0        40
10       0.1   1        28
11       0.1   2         8
12       0.1   3         0
13       0.1   4         0
14       0.1   5         0
15       0.1   6         0
16       0.1   7         0
17       0.2   0        40
18       0.2   1        26
19       0.2   2        15
20       0.2   3         8
21       0.2   4         5
22       0.2   5         3
23       0.2   6         1
24       0.2   7         0
25       0.4   0        47
26       0.4   1        29
27       0.4   2         5
28       0.4   3         0
29       0.4   4         0
30       0.4   5         0
31       0.4   6         0
32       0.4   7         0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:44:07.173

你可以试试

```
library(ggplot2)

ggplot(x, aes(x = Day, y = Survivors, colour = as.factor(Intensity))) + 
   geom_point(pch = 15) +
   geom_line() +
   theme_bw() 
```

![在此处输入图像描述](../Images/a0022097dd918b61c2aa0852eb9c3b1d.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:47:45.893

Lattice 也很容易做到这一点。

```
library(lattice)

xyplot(Survivors ~ Day,
       data=x,
       groups=Intensity,
       grid=TRUE,
       type=c('p','l'),
       auto.key=list(title='Intensity', space='right')
       ) 
```

![在此处输入图像描述](../Images/b3066ff54133742c1c82626e85dfa98e.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:06:22.450

如果您使用 Excel，只需绘制带有平滑线和标记的散点图，然后添加与您的强度相对应的 4 个数据系列 ![1分钟工作](../Images/31ad963cc191d6f89a4cfc78ae16e3de.png)

然后添加您想要的任何图例/描述

# ruby-on-rails - Rails 无法弄清楚我为什么会遇到 NoMethodError

> ID：13708459
> 
> 赞同：0
> 
> 时间：2012-12-04T17:23:45.937
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试基于此示例实现可排序列表功能 - [http://railscasts.com/episodes/147-sortable-lists-revised](http://railscasts.com/episodes/147-sortable-lists-revised)。

问题是，当我放下我的元素时，我不断收到以下错误消息：

```
Started POST "/applications/sort" for 127.0.0.1 at 2012-12-04 11:14:45 -0600
Processing by ApplicationsController#sort as */*
  Parameters: {"application_application_field_attributes_0"=>["id"], "application_application_field_attributes_1"=>["id"], "application_application_field_attributes_2"=>["id"]}
Completed 500 Internal Server Error in 1ms

NoMethodError (undefined method `each_with_index' for nil:NilClass):
  app/controllers/applications_controller.rb:91:in `sort' 
```

视图/应用程序/_form.html.erb

```
<%= form_for(@application, :class => "main") do |f| %>
...
<div class="sortable" data-update-url="<%= sort_applications_url %>">
    <%= f.fields_for :application_field do |fields| %>
        <%= render 'application_field_fields', f: fields %>  
    <% end %>
</div>
<% end %> 
```

视图/应用程序/_application_field_fields.html.erb

```
<div class="formRow" id="<%= f.object.position %>">
    <div class="grid2"><%= f.label :field_name %></div>
    <div class="grid3"><%= f.text_field :field_name %></div>
    <div class="grid2"><%= f.label :field_type %></div>
    <div class="grid3"><%= f.text_field :field_type %></div>
    <!-- Need to store the hidden field _destroy here so we can access it via jQuery -->
    <%= f.hidden_field :_destroy %>
    <div class="grid2" align="center"><%= link_to "Remove", '#', class: "remove_fields"%></div>
    <div class="clear"></div>
</div> 
```

应用程序.js

```
$('.sortable').sortable({ 
    placeholder: "ui-state-highlight",
    forcePlaceholderSize: true,
    start: function(event, ui) {
        ui.item.addClass('dragging');
    },
    stop: function(event, ui) {
        ui.item.removeClass('dragging');
    },
    update: function(event, ui) {
        $.post($(this).data('update-url'), $(this).sortable('serialize'));
    }
}); 
```

控制器/应用程序#sort

```
# POST /applications/sort
  def sort
    puts '*********'
    puts '#####'
    puts 'params = ' #{params}
    puts '********'
    params[:application].each_with_index do |id, index| 
        Application.update_all({position: index+1}, {id: id})
    end
    render :nothing => true
  end 
```

当我删除一个可排序的元素时，你可以看到我的参数哈希是空的。为什么会这样，我该如何解决？

**编辑**

我将发布我的模型，以便您查看关系

```
class Application < ActiveRecord::Base
    belongs_to :company
    has_many :application_field, :order => "position"
    accepts_nested_attributes_for :application_field, :allow_destroy => true
    attr_accessible :application_name, :application_field_attributes
end
class ApplicationField < ActiveRecord::Base
    belongs_to :application
    has_many :application_fields_value
    attr_accessible :field_name, :field_type, :field_value, :application_field_values_attributes
    accepts_nested_attributes_for :application_fields_value, :allow_destroy => true
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:33:36.533

你的参数没有正确的结构，所以`params[:application]`是 nil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:28:01.923

我通过改变解决了这个问题

```
<div class="formRow" id="<%= f.object.position %>">
    <div class="grid2"><%= f.label :field_name %></div>
    <div class="grid3"><%= f.text_field :field_name %></div>
    <div class="grid2"><%= f.label :field_type %></div>
    <div class="grid3"><%= f.text_field :field_type %></div>
    <!-- Need to store the hidden field _destroy here so we can access it via jQuery -->
    <%= f.hidden_field :_destroy %>
    <div class="grid2" align="center"><%= link_to "Remove", '#', class: "remove_fields"%></div>
    <div class="clear"></div>
</div> 
```

至

```
<%= content_tag_for :div, f.object, :class => "formRow" do %>
    <div class="grid2"><%= f.label :field_name %></div>
    <div class="grid3"><%= f.text_field :field_name %></div>
    <div class="grid2"><%= f.label :field_type %></div>
    <div class="grid3"><%= f.text_field :field_type %></div>
    <!-- Need to store the hidden field _destroy here so we can access it via jQuery -->
    <%= f.hidden_field :_destroy %>
    <div class="grid2" align="center"><%= link_to "Remove", '#', class: "remove_fields"%></div>
    <div class="clear"></div>
<% end %> 
```

有人可以解释为什么这有效吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:40:50.837

这是因为您没有将值传递给表单上的应用程序。然后，在您看来，它尝试迭代一个集合，但它是一个 nil 值。

尝试通过这样做来调试它

```
puts "params => #{params.inspect}" 
```

在您的排序操作中的迭代之前。

如果你不能通过这样做解决你的问题，请将它的结果粘贴到这里。

# vbscript - VBS 从列表中打开多个 URL 并保存到文件

> ID：13708460
> 
> 赞同：1
> 
> 时间：2012-12-04T17:23:46.030
> 
> 标签：vbscript

我有多个网页需要打开并将信息（只是文本）保存到每个网页的新文件中。我在 VBScripts 方面完全没有经验。但是，我一直在寻找几天，这是我到目前为止收集到的：

```
function download(sFileURL, sLocation, async)
  set objXMLHTTP = CreateObject("MSXML2.XMLHTTP")
  objXMLHTTP.open "GET", sFileURL, async
  on error resume next
  objXMLHTTP.send()
  if err.number = 0 then
    do until objXMLHTTP.Status = 200
     wscript.echo objXMLHTTP.Status
     wcript.sleep(200)
  loop
  if objXMLHTTP.Status = 200 Then
    set objADOStream = CreateObject("ADODB.Stream")
    objADOStream.Open
    objADOStream.Type = 1
    objADOStream.Write objXMLHTTP.ResponseBody
    objADOStream.Position = 0    
    set objFSO = Createobject("Scripting.FileSystemObject")
    If objFSO.Fileexists(sLocation) Then objFSO.DeleteFile sLocation
    Set objFSO = Nothing
    objADOStream.SaveToFile sLocation
    objADOStream.Close
    set objADOStream = Nothing
    download = true
   end if
 else
   download = false
 end if
   set objXMLHTTP = Nothing
 end function

 if download("http://books.google.com/books/feeds/volumes?q=isbn", "test.txt", false) then
   wscript.echo "download ok"
 else
   wscript.echo "download did not work"
 end if 
```

我怎样才能改变

```
if download("http://books.google.com/books/feeds/volumes?q=isbn", "test.txt", false) 
```

从文本文件中的列表中读取，并保存为 test00, test01, test02,...

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:24:58.820

这是最简单的代码，应该可以满足您的需要。

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
ListFile = "D:\list.txt"
Set objFile = objFSO.OpenTextFile(ListFile)
FileNumber = 0
Do Until objFile.AtEndOfStream
    URLFromList = objFile.ReadLine
    FileNumber = FileNumber + 1
    if download(URLFromList, "test" & FileNumber & ".txt", false) then
        wscript.echo "download ok for " & URLFromList
    else
        wscript.echo "download did not work for " & URLFromList
    end if
Loop
objFile.Close
objFSO = Nothing 
```

# iphone - iPhone Safari 横向 CSS 问题

> ID：13708461
> 
> 赞同：1
> 
> 时间：2012-12-04T17:23:51.460
> 
> 标签：iphone, html, css, safari

如果您查看我的简单站点，它在浏览器中运行良好，但在 iphone 上，该站点在横向时会丢失底部功能区。

为什么在横向时不能正确调整页面的高度？ [http://mtindustrialservicerequest.com/KenHolidayCard/holidayCardDemo/EmployeeCard2.html](http://mtindustrialservicerequest.com/KenHolidayCard/holidayCardDemo/EmployeeCard2.html)

HTML：

```
<!DOCTYPE html>
<html lang="en">
<HEAD>
<meta charset="utf-8">
</HEAD>
<BODY style="text-align: center; background-color:#e4e4e4; background-image:url(snowflakeBackground500x500.png); margin:0; padding:0;">
<div style="position: absolute; height: 100%; width: 100%; background-image:url(ribbon_Bottom2.png); background-repeat: repeat-y; background-position: center center;">
<div style="position: relative; width: 100%; height:325px; overflow: visible; top: 50%; margin-top: -170px; background-image:url(ribbon_Horizontal2.png); background-position: center center;">
<iframe width="650" height="325" src="http://www.youtube.com/embed/bFs89lAL7dE?&autoplay=1&rel=0&fs=0&theme=light&showinfo=0&controls=0&autohide=1&color=white" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:57:44.503

它实际上并没有完全消失。从纵向旋转到横向后，我点击刷新。它是可见的（大约 8 个像素）。

我会`min-height:320px`为垂直功能区添加到您的 CSS 中。320 或您可以使用的其他值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:46:47.533

我通过将三个 div 堆叠在一起解决了这个问题——顶部和底部带有视频的功能区和中间的水平功能区。顶部和底部高度为 50%，底部/顶部边距补偿中间的 325 像素视频。见下文。

```
<BODY style="text-align: center; background-color:#e4e4e4; background-image:url(snowflakeBackground500x500.png); margin:0; padding:0;">
<div id="div1" style="position: absolute; height: 100%; width: 100%;">
<div id="div2" style="position: relative; height: 50%; width: 100%; margin-bottom:-170px; background-image:url(ribbon_Bottom2.png); background-repeat: repeat-y; background-position: center center;"></div>
<div style="position: relative; width: 100%; height:325px; overflow: visible; background-image:url(ribbon_Horizontal2.png); background-position: center center;">
<iframe class="shadow" width="650" height="325" src="http://www.youtube.com/embed/bFs89lAL7dE?&autoplay=1&rel=0&fs=0&theme=light&showinfo=0&controls=0&autohide=1&color=white" frameborder="0" allowfullscreen></iframe>
</div>
<div id="div3" style="position: relative; height: 50%; width: 100%; margin-bottom: 170px; background-image:url(ribbon_Bottom2.png); background-repeat: repeat-y; background-position: center center;"></div>
</div>
</BODY>
</HTML> 
```

# c# - 将 winform 标签绑定到函数调用

> ID：13708463
> 
> 赞同：1
> 
> 时间：2012-12-04T17:23:52.067
> 
> 标签：c#, winforms, data-binding

我的应用程序中有一个标签，该标签当前绑定到源对象上的枚举属性。我想将它绑定到以该枚举作为参数的函数调用的结果。有没有办法在不修改源对象以具有另一个属性的情况下做到这一点？

# javascript - 非常奇怪的 jQuery 错误

> ID：13708465
> 
> 赞同：0
> 
> 时间：2012-12-04T17:23:54.003
> 
> 标签：javascript, jquery, html, ajax

所以我有在我的网站*上*正常工作的代码：

```
$("#usr").load("somepage.php",{var1:var1,var2:var2}); 
```

但是自从我在导航栏中更改了一些代码后，jQuery 的行为就变得非常奇怪。第一个主要问题是这条线：

```
var w = $(window).width(); 
```

返回错误：`object [global] has no method "width()"`

这似乎并不重要，因为页面上的所有元素都出现了该错误（好像它仍在执行，因为元素仍在放置）......但后来我来到实现第一行的页面代码，我遇到了以下错误：

```
Cannot call method "load()" of null 
```

果然，我检查了控制台，$("#usr") 返回了null，但是我可以看到页面中的HTML行，内联id为`usr`.

这会导致问题，因为我需要从该页面加载数据才能使页面正常运行。但它变得更加陌生。我以为我会尝试一个普通的发布请求并获取数据并`document.getElementById("usr").innerHTML = ...`用作替代品，但我从这一行得到以下错误：

```
$.post("somepage.php",{var1:var1,var2:var2},function(data){
    document.getElementById("usr").innerHTML = data;
}); 
```

错误：

```
Uncaught TypeError: Object function $(el){if(!el)return null;if(el.htmlElement)return Garbage.collect(el);if([window,document].contains(el))return el;var type=$type(el);if(type=='string'){el=document.getElementById(el);type=(el)?'element':false}if(type!='element')return null;if(el.htmlElement)return Garbage.collect(el);if(['object','embed'].contains(el.tagName.toLowerCase()))return el;$extend(el,Element.prototype);el.htmlElement=function(){};return Garbage.collect(el)} has no method 'post' 
```

jQuery到底发生了什么？

**我正在从 googleapis 导入 1.8.2**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T17:26:02.133

这听起来*很像*您正在加载 Prototype 或 MooTools 或其他东西以及 jQuery，因此 Prototype/MooTools/whatever 正在接管该`$`符号。

如果这是正在发生的事情，并且您需要其他库，则可以使用[`jQuery.noConflict()`](http://api.jquery.com/jQuery.noConflict). 然后你要么使用符号`jQuery`而不是你的 jQuery 东西，要么将所有 jQuery 代码放入一个函数中，然后作为参数`$`传入`jQuery.noConflict`并接受，如下所示：`$`

```
// Out here, $ !== jQuery
jQuery.noConflict(function($) {
    // In here, $ === jQuery
}); 
```

或者你可以自己做：

```
// Out here, $ !== jQuery
jQuery.noConflict();
(function($) {
    // In here, $ === jQuery
})(jQuery); 
```

[`ready`](http://api.jquery.com/ready)如果您已经在使用`ready`.

# c++ - 哪种访问 C++ 枚举器的方式更好？

> ID：13708467
> 
> 赞同：3
> 
> 时间：2012-12-04T17:24:00.180
> 
> 标签：c++, enums

我正在寻找一些最佳实践建议。如果你有一个像这样在 C++ 中声明的类：

```
class Foo {
public:
    enum { A, B, MAX};
}; 
```

应该像这样访问枚举：

```
Foo::A 
```

或者

```
Foo *var; 
var->A; 
```

直到今天，我总是访问常量值`Foo::A`，而不是通过类类型的 ptr。事实上，我什至不相信这是可能的。有没有人遇到过何时以及是否应该使用每种表格，或者我应该坚持久经考验的`Foo::A`方法？

编辑：将 Foo var 变成 Foo *var 这是一个错字，因为大多数人都发现了谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T17:26:19.377

枚举与类相关联，而不是与实例相关联。所以`Foo::A`更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T17:28:54.253

据推测，您的示例应该声明一个指针`Foo * var`或访问枚举器为`var.A`.

如果您没有可用的对象或指针，那么显然“类”形式`Foo::A`是唯一明智的选择。

如果你这样做，那么这两种形式是等价的。在我看来，“类”形式更具表现力，因为它与类而不是对象的关联匹配。它还可以避免与不相信它有效的人的争论。

在某些情况下（例如在模板中，或使用`auto`类型声明的对象），类名可能很复杂甚至未知，在这种情况下，“对象”形式会更好：

```
template <typename T>
void f()
{
    typename some::complicated::type::depending_on<T>::type var;
    var.thing = var.A;            // OK
    var.thing = decltype(var)::A; // Ugly, requires C++11
    var.thing = some::complicated::type::depending_on<T>::type::A; // Yuck!
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T17:31:37.530

第一个版本更好，就像@KevinA.Naude 说的那样。如果您正在寻找一种为您`enum`的.`enum class``enum class X {A, B, MAX};``X::A`

# uinavigationcontroller - 从 UINavigationController 转回根控制器？

> ID：13708473
> 
> 赞同：2
> 
> 时间：2012-12-04T17:24:27.527
> 
> 标签：uinavigationcontroller, uisplitviewcontroller, uistoryboard, uistoryboardsegue

目前我在一个单独的故事板中有一个导航控制器，它使用退出按钮。这个退出按钮应该回到 rootViewController（在 mainstoryboard 中），它是一个 iSplitViewController...

我无法找出正确的 Segue 命令来完成这项工作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T10:24:23.863

将按钮链接到 IBAction 方法，该方法调用：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

# transparency - 无法创建透明 QFrame

> ID：13708476
> 
> 赞同：2
> 
> 时间：2012-12-04T17:24:50.103
> 
> 标签：transparency, qwidget

我想创建没有背景的 QWidget；我想给它添加一个透明的 QFrame。这是我的代码：

```
QWidget  *change_impl_win = new QWidget();
QHBoxLayout *mainLayout = new QHBoxLayout(change_impl_win);
QVBoxLayout *vbox_l = new QVBoxLayout();

QFrame *back_frame = new QFrame();
back_frame->setBackgroundColor(QColor(125, 125, 125, 125));
QHBoxLayout *frame_hbox = new QHBoxLayout(back_frame);
frame_hbox->addLayout(vbox_l);

mainLayout->addWidget(back_frame);

QGroupBox *newImplant = new QGroupBox("");
QGridLayout *layoutNewImplant = new QGridLayout;
newImplant->setLayout(layoutNewImplant);
vbox_l->addWidget(newImplant);

QRadioButton *cb_ob_rb = new QRadioButton("Up", change_impl_win);
QRadioButton *cb_un_rb = new QRadioButton("Down", change_impl_win);

layoutNewImplant->addWidget(cb_ob_rb);
layoutNewImplant->addWidget(cb_un_rb);

QLabel* lengthLabel = new QLabel("Length:");
QSpinBox *cb_implantLength = new QSpinBox;
cb_implantLength->setRange(1, 20);
cb_implantLength->setSingleStep(1);
cb_implantLength->setSuffix("  mm");

layoutNewImplant->addWidget(lengthLabel, 2, 0);
layoutNewImplant->addWidget(cb_implantLength, 2, 1);

QLabel* diameterLabel = new QLabel("Diameter:");
QSpinBox *cb_implantDiameter = new QSpinBox;
cb_implantDiameter->setRange(1, 20);
cb_implantDiameter->setSingleStep(1);
cb_implantDiameter->setSuffix("  mm");

layoutNewImplant->addWidget(diameterLabel, 3, 0);
layoutNewImplant->addWidget(cb_implantDiameter, 3, 1);

QPushButton *cb_apply_prop  = new QPushButton();
cb_apply_prop->setText("Apply");               
cb_apply_prop->setGeometry(400, 0, 200, 40); 
cb_apply_prop->setFont(QFont("Charter",13));
cb_apply_prop->setAutoFillBackground(true);

frame_hbox->addWidget(cb_apply_prop);

change_impl_win->setAttribute(Qt::WA_TranslucentBackground);
change_impl_win->setWindowFlags(Qt::FramelessWindowHint | Qt::WindowStaysOnTopHint);

change_impl_win->show(); 
```

但是，我看不到透明的 QFrame。我只看到添加到 QWidget 的控件没有背景。请告诉我我在哪里做错了。谢谢你。

# apache - 只有使用 mod_proxy 的端口是 8009。尝试使用 tomcat 和 httpd/

> ID：13708477
> 
> 赞同：1
> 
> 时间：2012-12-04T17:24:49.753
> 
> 标签：apache, tomcat, reverse-proxy, mod-proxy

我正在尝试将 mod_proxy 与 httpd 和 tomcat 一起使用。如果我让 Tomcat ajp 在 Tomcat 的 server.xml 和 Apache httpd 的 httpd.conf 中的 8009 上运行，一切正常，但是一旦我将其更改为其他任何内容并重新启动它们，它都不起作用。我试过 8109,8209 和 8019，但唯一有效的是 8009。

以下是我的有效设置：

```
<Proxy balancer://testcluster stickysession=JSESSIONID>
BalancerMember ajp://127.0.0.1:8009 min=10 max=100 route=node2 loadfactor=1
</Proxy>

ProxyPass /examples balancer://testcluster/examples

<Location /balancer-manager>
SetHandler balancer-manager
AuthType Basic
AuthName "Balancer Manager"
AuthUserFile "/etc/httpd/conf/.htpasswd"
Require valid-user
</Location> 
```

如果我将端口更改为此处的任何内容，并且 Tomcat 的 server.xml 它不起作用，但我可以远程登录该端口，这样我就知道它了。

以下是我拥有的其他库设置：

```
LoadModule auth_basic_module modules/mod_auth_basic.so
LoadModule auth_digest_module modules/mod_auth_digest.so
LoadModule authn_file_module modules/mod_authn_file.so
LoadModule authn_alias_module modules/mod_authn_alias.so
LoadModule authn_anon_module modules/mod_authn_anon.so
LoadModule authn_dbm_module modules/mod_authn_dbm.so
LoadModule authn_default_module modules/mod_authn_default.so
LoadModule authz_host_module modules/mod_authz_host.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule authz_owner_module modules/mod_authz_owner.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_dbm_module modules/mod_authz_dbm.so
LoadModule authz_default_module modules/mod_authz_default.so
LoadModule ldap_module modules/mod_ldap.so
LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
LoadModule include_module modules/mod_include.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule logio_module modules/mod_logio.so
LoadModule env_module modules/mod_env.so
LoadModule ext_filter_module modules/mod_ext_filter.so
LoadModule mime_magic_module modules/mod_mime_magic.so
LoadModule expires_module modules/mod_expires.so
LoadModule deflate_module modules/mod_deflate.so
LoadModule headers_module modules/mod_headers.so
LoadModule usertrack_module modules/mod_usertrack.so
LoadModule setenvif_module modules/mod_setenvif.so
LoadModule mime_module modules/mod_mime.so
LoadModule dav_module modules/mod_dav.so
LoadModule status_module modules/mod_status.so
LoadModule autoindex_module modules/mod_autoindex.so
LoadModule info_module modules/mod_info.so
LoadModule dav_fs_module modules/mod_dav_fs.so
LoadModule vhost_alias_module modules/mod_vhost_alias.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule dir_module modules/mod_dir.so
LoadModule actions_module modules/mod_actions.so
LoadModule speling_module modules/mod_speling.so
LoadModule userdir_module modules/mod_userdir.so
LoadModule alias_module modules/mod_alias.so
LoadModule substitute_module modules/mod_substitute.so
LoadModule rewrite_module modules/mod_rewrite.so

LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_balancer_module modules/mod_proxy_balancer.so
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so

#LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
#LoadModule proxy_http_module modules/mod_proxy_http.so

#LoadModule proxy_connect_module modules/mod_proxy_connect.so
LoadModule cache_module modules/mod_cache.so
LoadModule suexec_module modules/mod_suexec.so
LoadModule disk_cache_module modules/mod_disk_cache.so
LoadModule cgi_module modules/mod_cgi.so
LoadModule version_module modules/mod_version.so 
```

这是 httpd.con 文件的链接：

[https://docs.google.com/file/d/0B0UnSMAKoW5tZy0wOERjUjRhaXM/edit](https://docs.google.com/file/d/0B0UnSMAKoW5tZy0wOERjUjRhaXM/edit)

这是 server.xml 文件的链接：

[https://docs.google.com/file/d/0B0UnSMAKoW5tZGdiUkRZQ0hlWm8/edit](https://docs.google.com/file/d/0B0UnSMAKoW5tZGdiUkRZQ0hlWm8/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:07:06.460

这是 Scientific Linux 6.2 版的一个问题，我必须通过执行以下命令告诉它停止阻塞端口

设置强制 0

然后就可以了。

# java - 从顶点着色器到片段着色器的光

> ID：13708478
> 
> 赞同：1
> 
> 时间：2012-12-04T17:24:57.343
> 
> 标签：java, opengl, jogl, fragment-shader, vertex-shader

需要在片段着色器中创建聚光灯以照亮球体。目前我在顶点着色器中有一个点光源，完全不知道如何咬它。

```
 #version 140
in  vec4 vPosition;

in  vec4 vNormal;

out vec4 color;

// implicit definition: out vec4 gl_Position;

uniform mat4 model;

uniform mat4 view;

uniform mat4 projection;

uniform vec4 lPosition;

uniform vec4 lAmbient;

uniform vec4 lDiffuse;

uniform vec4 lSpecular;

uniform float Shininess;

uniform vec4 matColor;

void main() 
{
    vec4 ambient, diffuse, specular;
    vec3 N,L,E,H;

    gl_Position = projection * view * model * vPosition;
    ambient = matColor*lAmbient;

    N = normalize((view*model*vNormal).xyz);
    L = normalize((view*model*lPosition).xyz - (view*model*vPosition).xyz);
    diffuse = max(dot(L,N), 0.0)*(matColor*lDiffuse);

    E = -normalize((view * model * vPosition).xyz);
    H = normalize(L + E);
    specular = max(pow(max(dot(N, H), 0.0), Shininess)
                *lSpecular, 0.0);

    color = vec4((ambient+diffuse+specular).rgb, 1.0);
 } 
```

据我所知，聚光灯与点光不同，它的衰减包含常数、线性和二次衰减+截止参数？

* * *

据我所知：

计算聚光灯效果：

```
spottEffect = pow(max(dot(spotdirection, gl_Position), 0.0), spotexponent); 
```

计算衰减：

```
att = (1 / (const_attenuation + linear_attenuation * (view*model*lPosition) + quadratic_attenuation * (view*model*lPosition) * (view*model*lPosition))).xyz; 
```

它应该是正确的，因为我正确理解了这些文章，但不知道下一步该做什么......添加 if 语句进行截止？

# asp.net - 有什么方法可以防止单词包装的查询字符串链接丢失它的点击功能？

> ID：13708480
> 
> 赞同：0
> 
> 时间：2012-12-04T17:25:02.600
> 
> 标签：asp.net, .net, url, query-string, word-wrap

我有一个非常长的链接，需要在 .aspx 页面上显示。我用词包装了它，因为它正在逃避父容器。我使用了与此类似的 css：[Word wrap a link 所以它不会溢出其父 div 宽度。](https://stackoverflow.com/questions/5241369/word-wrap-a-link-so-it-doesnt-overflow-its-parent-div-width) 它工作正常，但现在链接不再可点击（蓝色）。有没有一种快速而干净的方法让链接保持其链接？

我想我可以`a href='the same reallyreallylong ?querystringurl'`在它周围放一个，但它看起来很乱。

编辑：现在我开始认为我产生了幻觉，并且页面从未将链接显示为可点击的 url。我要在它周围加上'a'标签。代码编辑：

```
<li>Example:<p class="wordwrap">http://www.blah.com/yup.asmx?quuuuuuuuuuueeery</p></li> 
```

CSS：

```
.wordwrap
{
white-space: pre-wrap; /* css-3 */    
white-space: -moz-pre-wrap; /* Mozilla, since 1999 */
white-space: -pre-wrap; /* Opera 4-6 */    
white-space: -o-pre-wrap; /* Opera 7 */    
word-wrap: break-word; /* Internet Explorer 5.5+ */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:31:58.050

如果您想将 url 显示为链接，则可以使用锚标记。

```
<a href="url">url</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:29:56.533

如果你想变得更复杂一点，你总是可以调用像 tinyUrl 这样的 url shortner api 并显示缩短的 url。

前任。[http://tinyurl.com/api-create.php?url=http://thisismyreallylongurl.com](http://tinyurl.com/api-create.php?url=http://thisismyreallylongurl.com)

# php - 使用php将PHP数组转换为html

> ID：13708490
> 
> 赞同：0
> 
> 时间：2012-12-04T17:25:45.430
> 
> 标签：php, sql, arrays

我正在尝试使用 php implode 将我的 php 数组转换为 html。

这是我的代码：

```
$myarray = array(); 
while ($row = mysql_fetch_assoc($result)) { 
$myarray[] = array("title"=>$row['title'], 
       "name"=>$row['title'], 
       "content"=>$row['content'],
       "image" => 
           array(
             "cls"=>"slide-image",
             "_src"=>$row['src'],
             "source"=>$row['source']                
             )   
       );
} 
```

和

```
$rows = array_fill( 0, count( $myarray[0] ), "" );
$keys = array_keys( $myarray[0] );
foreach( $myarray as $k => $record )
    for( $i=0, $max=count( $rows ); $i < $max; $i++ )
        $rows[ $i ] .= $record[ $keys[ $i ] ];
print implode( "", $rows ); 
```

输出是

```
title 1, title-2, content for title 1, content for title 2ArrayArray 
```

我想作为

```
title 1, content for title 1, title 2, content for title 2 
```

而且我不知道为什么阵列会来。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:05:57.557

给定数据库中的以下示例数组：

```
$data = array(
    array(
        'title' => 'Title 1', 
        'name' => 'Title 1', 
        'content' => 'Content 1', 
        'image' => array(
            'src' => 'a', 
            'title' => 'b', 
            'alt' => 'c'
        )
    ), 
    array(
        'title' => 'Title 2', 
        'name' => 'Title 2', 
        'content' => 'Content 2', 
        'image' => array(
            'src' => 'a', 
        )
    )
); 
```

以下代码将遍历它：

```
$rows = array();
foreach($data as $row) {
    $img = '<img ';
    foreach($row['image'] as $attr => $value) {
        $img .= $attr . '="' . $value . '" ';
    }
    $img .= '/>'; //Close $img
    $rows[] = $row['title'] . ', ' . $row['content'] . ', ' . $img;
}
print implode(', ', $rows); 
```

生产：

```
Title 1, Content 1, <img src="a" title="b" alt="c" />, Title 2, Content 2, <img src="a" /> 
```

**更新**

您可以在从数据库中提取数据时执行此操作：

```
$rows = array();
while($row = mysql_fetch_assoc($result)) {
    $img = '<img class="' . $row['cls'] . '" src="' . $row['src'] . '" title="' . $row['source'] . '" />';
    $rows[] = $row['title'] . ', ' . $row['content'] . ', ' . $img;
}
print implode(', ', $rows); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:36:30.973

尝试将数组表示为字符串将产生字符串`Array`。在您的情况下，它是两个 $record['image'] 字段。尝试添加这个

```
$rows = array_fill( 0, count( $myarray[0] ), "" );
$keys = array_keys( $myarray[0] );
foreach( $myarray as $k => $record )
    for( $i=0, $max=count( $rows ); $i < $max; $i++ ){
        if (is_array($record[$keys[$i]])){
            $rows[$i].=implode("",$record[$keys[$i]]);
        }
        else $rows[ $i ] .= $record[ $keys[ $i ] ];
    }
print implode( "", $rows ); 
```

您可以使子数组的特定处理更加复杂，但这只是一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:37:54.953

假设您从数据库中获取这些结果，我提供以下解决方案：

```
$myData = array();

while ($row = mysql_fetch_array($result)) {
    $myData[]['title']  = "<h2>".$row['title']."</h2>";
    $myData[]['content']    = "<p>".$row['content']."</p>";
    $myData[]['imageData']  = array("<img src='".$row['src']."' class='slide-image' />",$row['source']);
} 
```

从这里，您可以使用 foreach 循环遍历 $myData。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T17:37:58.223

**由于 OP 的评论他们也想要图像而更新。**

你也可以稍微调整一下我已经给你的例子来获取图像。`$myarray`只需在填充数据库中的值后立即放置这段代码。我还添加了 HTML 标记，以使我的示例对您来说更直接。

```
$html = '';
foreach($myarray as $record){
    if($html)
        $html .= '<hr/>';
    $html .= '<h1>' . $record['title'] . '</h1>';
    $html .= '<p>' . $record['content'] . '</p>';

    $image = $record['image'];
    $html .= '<img class="' . $image['cls'] . '" src="' . $image['_src'] . '" title="' . $image['source'] . '"/>';
} 
```

# c++ - Windows 服务不会自动启动

> ID：13708493
> 
> 赞同：0
> 
> 时间：2012-12-04T17:25:48.660
> 
> 标签：c++, windows, qt, winapi, service

我正在编写基于 QtService 的应用程序。我的问题是标有“自动启动”的服务不会自动启动。在注册表中我的服务标记为“开始：000000002(2)”应该更改什么以自动启动服务？或者我如何从用户（用户权限帐户）启动此服务。对不起我的英语不好。

# qt - 使用 Qt/C++ 从视频中提取缩略图

> ID：13708495
> 
> 赞同：0
> 
> 时间：2012-12-04T17:25:50.480
> 
> 标签：qt

如何使用 Qt/C++ 从视频文件中获取缩略图。我使用 TagLib，它没有解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:46:14.040

您可以使用 libVLC 或 ffmpeg，它比使用 Qt 更容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T09:08:15.857

基本上任何视频都在“帧”中，而该帧就是您的缩略图。

我们可以像盒子一样成像，盒子里面是关于“图像”的所有信息，比如定位在哪里（及时），它有多大（全高清，720 ...），以及所有其他类型的信息。

最大的问题是您喜欢提取什么视频格式，以及您喜欢如何提取。

例如 AVI 等文件格式是众所周知的，请参阅： [如何读取 avi 文件](https://stackoverflow.com/questions/5899444/how-to-read-avi-files-c)

如果您阅读其他格式，您需要知道如何正确阅读二进制格式，或者您可以使用任何可以为您处理“解包格式”的库。

最后一个问题是图书馆是否可以为“这个”框架“提取”图像......但这取决于图书馆。

要回答您的问题，您可以使用任何外部库，或者在二进制级别上自己手动阅读。

PS：如果 TagLib 不适合您可以尝试任何其他库，只需确保您阅读文档并尝试找到允许您从帧中获取图像的库。

# iphone - CGAffineTransformInvert：UIImagePickerController 中的奇异矩阵，showCameraControls = NO

> ID：13708496
> 
> 赞同：8
> 
> 时间：2012-12-04T17:25:55.440
> 
> 标签：iphone, ios6, uiimagepickercontroller

我用两个不同的应用程序尝试了两次，我得到了同样的结果。我设置了一个 UIImagePIckerController 实例，如下所示：

```
- (IBAction)addImage:(UIBarButtonItem *)sender {

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
        NSArray *mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypeCamera];
        if ([mediaTypes containsObject:(NSString *)kUTTypeImage]) {
            UIImagePickerController *picker = [[UIImagePickerController alloc] init];
            picker.delegate = self;
            picker.sourceType = UIImagePickerControllerSourceTypeCamera;
            picker.mediaTypes = [NSArray arrayWithObject:(NSString *)kUTTypeImage];
            picker.allowsEditing = NO;
            picker.showsCameraControls = NO;

            [self presentViewController: picker animated:YES completion:NULL];

        }           
 [..]   

} 
```

这是第二个。首先，我设置了一个自定义叠加层来运行快门和其他功能。一切运行良好，但我在控制台上不断收到错误消息：

```
 <Error>: CGAffineTransformInvert: singular matrix. 
```

当我运行应用程序时，每次我在相机启动时旋转（或移动它发出旋转信号）设备`{something happens here}`。我在 iPhone 4 和 iPad Mini 上都试过了，结果相同。经过大量挖掘后，我发现这只发生在以下情况下

```
picker.showsCameraControls = NO; 
```

如果我把

```
picker.showsCameraControls = YES; 
```

然后我没有收到任何消息（尽管我的自定义覆盖也被隐藏了）。确保它不是自定义叠加层本身，我尝试将其排除在外，但它仍然给出错误消息。

有人知道我应该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T02:35:00.300

我认为这在很大程度上是良性的，因为 Apple 自己的 PhotoPicker 示例代码会生成此警告。旋转与矩阵有关，虽然我不确定哪个矩阵正在旋转，但在行列式为零的矩阵上执行运算（类似于除以零）被认为是数学违规。这样的矩阵是不可逆的或“奇异的”：

[http://en.wikipedia.org/wiki/Rotation_matrix](http://en.wikipedia.org/wiki/Rotation_matrix)

[http://en.wikipedia.org/wiki/Determinant](http://en.wikipedia.org/wiki/Determinant)

[http://en.wikipedia.org/wiki/Singular_matrix#singular](http://en.wikipedia.org/wiki/Singular_matrix#singular)

# javascript - javascript:history.back() 和上一页刷新

> ID：13708499
> 
> 赞同：2
> 
> 时间：2012-12-04T17:26:04.517
> 
> 标签：javascript, refresh, history

我的页面上有`<span id="back" class="button" onclick="location.href='javascript:history.back()';"`一个可以正常工作的按钮，但我需要它来刷新上一页。问题是，history.back() 对我来说只是可接受的方式，window.refferer 没有帮助。我已经尝试了一些使用元标记的技巧，仍然没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:28:26.547

如果您使用的是 HTML 5，则可以使用[popstate 事件](http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#event-definitions-0)

> 在导航到会话历史条目时，在某些情况下会触发 popstate 事件。

但我认为在以前的版本中没有办法做到这一点。

浏览器不知道您通过以下方式到达页面`history.back()`- 没有您可以从 javascript 引用的触发事件（在 HTML 5 之前）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:45:21.437

MDN：请注意，在调用 pushState() 后浏览器不会尝试加载此 URL

WhatWG：由于这既不是浏览上下文的导航，也不是历史遍历，因此不会触发 hashchange 事件。

触发它（popstate 事件）的情况可能与会话历史记录中的当前条目有关，表示非 GET 请求

# jquery - JQPlot - 未指定绘图目标

> ID：13708501
> 
> 赞同：10
> 
> 时间：2012-12-04T17:26:06.907
> 
> 标签：jquery, jquery-plugins, jqplot

我正在尝试使用以下代码绘制 jqplot：

```
<script lang="javascript" type="text/javascript">
    $(document).ready(function () {

        var line1 = var line1 =[["10.01.2011",3.9990],["11.01.2011",3.9910],["12.01.2011",4.0140],["13.01.2011",3.9940],["14.01.2011",3.9050],["17.01.2011",3.9340],["18.01.2011",3.9520],["19.01.2011",3.8980],["20.01.2011",3.8690],["21.01.2011",3.8830],["24.01.2011",3.8550],["25.01.2011",3.8480],["26.01.2011",3.8190],["27.01.2011",3.8440],["28.01.2011",3.8260],["31.01.2011",3.8060],["01.02.2011",3.7970],["02.02.2011",3.8060],["03.02.2011",3.8110],["04.02.2011",3.8640],["07.02.2011",3.8750],["08.02.2011",3.8640],["09.02.2011",3.8480],["11.02.2011",3.8570],["14.02.2011",3.8880],["15.02.2011",3.88],["16.02.2011",3.8520],["17.02.2011",3.8590],["18.02.2011",3.8690],["22.02.2011",3.8440],["23.02.2011",3.8080],["24.02.2011",3.7410],["25.02.2011",3.7460],["28.02.2011",3.7550],["01.03.2011",3.7520],["02.03.2011",3.76],["03.03.2011",3.7420],["04.03.2011",3.7430],["07.03.2011",3.7330],["08.03.2011",3.7260],["09.03.2011",3.76],["10.03.2011",3.7910],["11.03.2011",3.79]]; 

        var plot1 = $.jqplot('chart1', [line1], {
            title: 'Default Date Axis',
            axes: { xaxis: { renderer: $.jqplot.DateAxisRenderer } },
            series: [{ lineWidth: 4, markerOptions: { style: 'square' } }]
        });
    });
</script> 
```

它是通过一些 C# 代码生成的，但最后页面源代码看起来像呈现的代码。图表未绘制，jquery 抛出此异常：`No plot target specified`.

有什么线索吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T19:55:34.137

确保您的 HTML 包含一个 Id 为`chart1`.

jqplot 源代码如下所示：

```
this.init = function(target, data, options) {

    this.target = $('#'+target);

    ....

    if (!this.target.get(0)) {
        throw "No plot target specified";
    }

    ....
} 
```

似乎这是代码中发生特定错误的唯一位置。请注意，该`#`字符被添加到`target`，因此 target 需要是一个有效的 Id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-11T01:04:51.617

包含您的代码的功能齐全的 HTML 页面。只需替换“../../libs/jQuery.jqPlot.1.0.9/”以指向您本地的 jqPlot 安装文件夹。

备注包含所需的**jqplot.dateAxisRenderer.js**插件！我花了一段时间才弄清楚没有它就不会渲染图表:)

```
<!doctype html>
<html>
<head>
    <title>iqPlot Sample</title>
    <link rel="stylesheet" type="text/css" href="../../libs/jQuery.jqPlot.1.0.9/jquery.jqplot.min.css" />

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="../../libs/jQuery.jqPlot.1.0.9/excanvas.js"></script><![endif]-->
    <script src="../../libs/jQuery.jqPlot.1.0.9/jquery.jqplot.min.js"></script>
    <script src="../../libs/jQuery.jqPlot.1.0.9/plugins/jqplot.dateAxisRenderer.js"></script>

<script>
$(document).ready(function () {
    var line1 = [["10.01.2011",3.9990],["11.01.2011",3.9910],["12.01.2011",4.0140],["13.01.2011",3.9940],["14.01.2011",3.9050],["17.01.2011",3.9340],["18.01.2011",3.9520],["19.01.2011",3.8980],["20.01.2011",3.8690],["21.01.2011",3.8830],["24.01.2011",3.8550],["25.01.2011",3.8480],["26.01.2011",3.8190],["27.01.2011",3.8440],["28.01.2011",3.8260],["31.01.2011",3.8060],["01.02.2011",3.7970],["02.02.2011",3.8060],["03.02.2011",3.8110],["04.02.2011",3.8640],["07.02.2011",3.8750],["08.02.2011",3.8640],["09.02.2011",3.8480],["11.02.2011",3.8570],["14.02.2011",3.8880],["15.02.2011",3.88],["16.02.2011",3.8520],["17.02.2011",3.8590],["18.02.2011",3.8690],["22.02.2011",3.8440],["23.02.2011",3.8080],["24.02.2011",3.7410],["25.02.2011",3.7460],["28.02.2011",3.7550],["01.03.2011",3.7520],["02.03.2011",3.76],["03.03.2011",3.7420],["04.03.2011",3.7430],["07.03.2011",3.7330],["08.03.2011",3.7260],["09.03.2011",3.76],["10.03.2011",3.7910],["11.03.2011",3.79]]; 
    var plot1 = $.jqplot('chart1', [line1], {
        title: 'Default Date Axis',
        axes: { xaxis: { renderer: $.jqplot.DateAxisRenderer } },
        series: [{ lineWidth: 4, markerOptions: { style: 'square' } }]
    });
});
</script>
</head>
<body>
<div id="chart1"></div>
</body>
</html> 
```

# excel - (VBA) 根据另一个下拉菜单的值填充 Excel 中的下拉菜单？

> ID：13708505
> 
> 赞同：0
> 
> 时间：2012-12-04T17:26:12.327
> 
> 标签：excel, vba

产生两个下拉菜单的最佳方法是什么，其中第二个的内容取决于从第一个中选择的值？

第二个下拉列表是否会被创建为空白，并且每次我从第一个下拉列表中选择一个新值时，我都会“覆盖”某种引用第二个下拉列表的属性？还是每次单击第一个下拉菜单时都应该重新创建第二个下拉菜单？

任何代码片段都是最受欢迎的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:19:14.593

这取决于您使用的是哪种下拉菜单。如果您使用数据验证来获得单元内下拉菜单，那么您可以将第二个下拉单元格的源设置为间接函数，然后您将数据放在引用第一个下拉菜单的命名范围中。更多信息在这里： http: [//www.contextures.com/xlDataVal02.html](http://www.contextures.com/xlDataVal02.html)

如果您在第一个下拉列表中有大量数据，那么创建所有命名范围可能会变得乏味。

我也在使用 VBA 的用户表单中完成了此操作。

```
Public Branches() As String
Public Function List_Branch_Set(lngRegion As String) As Long
    Dim lngAllBranches As Long
    Dim lngReg As String
    Dim lngBranches As Long
    Dim lngIdx As Long
    Dim rw As Long
    lngAllBranches = Sheets("sheet1").Range("C1").Value
    lngBranches = CountBranches(lngRegion)
    If lngBranches > 0 Then
        ReDim Branches(lngBranches - 1)
        For rw = 2 To lngAllBranches + 1
            lngReg = Sheets("sheet1").Cells(rw, 2).Value
            If lngReg = lngRegion Then
                Branches(lngIdx) = Sheets("sheet1").Cells(rw, 1).Value
                lngIdx = lngIdx + 1
            End If
        Next rw
    End If
    List_Branch_Set = lngBranches
End Function 
```

然后我的数据以以下格式存储在 sheet1 上：分支区域

函数 CountBranches() 计算此列表中与所选区域匹配的行数。然后你需要在第一个 cbo 上触发。

```
Private Sub cboRegion_Change()
    Dim lngNum As Long
    Me.cboBranch.Clear
    lngNum = List_Branch_Set(NullHandleText(Me.cboRegion))
    If lngNum <> 0 Then
        Me.cboBranch.List = Branches
    End If
End Sub 
```

# android - 在 GameThread (android) 中启动由布尔值触发的新活动

> ID：13708511
> 
> 赞同：1
> 
> 时间：2012-12-04T17:26:31.150
> 
> 标签：android, android-activity, surfaceview

我正在制作一个“保卫城堡”风格的安卓应用程序。游戏已完成，但我只需要帮助关闭我的表面视图并在玩家输掉游戏时开始新的活动。

输掉比赛的条件只是我的 GameThread 类中的一个布尔变量。该变量称为“丢失”，默认设置为 false。当城堡的生命值低于 1 时，lost 设置为 true 并播放音效。

理想情况下，我想在 lost=true 时停止当前循环的声音效果并打开一个新的活动（已经制作和工作）。

主要活动如下：

```
import android.app.Activity;
import android.content.Intent;
import android.content.res.Configuration;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;

public class MainActivity extends Activity {

    Button btn_startGame;
    Activity activity;

    GameView mGameView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        activity = this;

        setContentView(R.layout.main);

        btn_startGame = (Button) findViewById(R.id.btnStartGame);
        btn_startGame.setOnClickListener(new OnClickListener() {

            //@Override
            public void onClick(View v) {
                mGameView = new GameView(activity);
                setContentView(mGameView);
                mGameView.mThread.doStart();
            }
        });
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        try {
            mGameView.mThread.onTouch(event);
        } catch(Exception e) {}

        return true;
    }

    @Override 
    public void onConfigurationChanged(Configuration newConfig) { 
      // ignore orientation/keyboard change 
      super.onConfigurationChanged(newConfig); 
    } 
} 
```

surfaceview 是在这个名为 GameView 的类中创建的：

```
import android.content.Context;
import android.content.Intent;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.SurfaceHolder.Callback;

public class GameView extends SurfaceView implements Callback {

    Context mContext;
    GameThread mThread;

    public GameView(Context context) {
        super(context);
        this.mContext = context;

        getHolder().addCallback(this);

        mThread = new GameThread(getHolder(), mContext, new Handler() {
            @Override
            public void handleMessage(Message m) {
                // Use for pushing back messages.
            }
        });

        setFocusable(true);
    }

    //@Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {

        Log.d(this.getClass().toString(), "in SurfaceChanged()");
    }

    //@Override
    public void surfaceCreated(SurfaceHolder holder) {
        Log.d(this.getClass().toString(), "in SurfaceCreated()");
        mThread.running = true;
        mThread.start();
    }

    //@Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        Log.d(this.getClass().toString(), "in SurfaceDestroyed()");

        boolean retry = true;
        mThread.running = false;
        while (retry) {
            try {
                mThread.join();
                retry = false;
            } catch (InterruptedException e) {
            }
            GameThread.music.stop();
            GameThread.groan1.stop();
            GameThread.groan2.stop();
            GameThread.walk.stop();

            GameThread.music.release();
            GameThread.groan1.release();
            GameThread.groan2.release();
            GameThread.walk.release();
            GameThread.shoot.release();
        }
    }

} 
```

GameThread 类包含所有绘图、逻辑和所有运行方法（如下）。

```
@Override
    public void run() {
         // check if condition here 
         if(lost){
            mContext.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                //start Activity here

                  Intent intent = new Intent(mContext, LoseActivity.class);
                  mContext.startActivity(intent);
             }
             }); 
            }
           else{
        if (running == true) {
            while (running) {
                Canvas c = null;
                try {
                    c = mHolder.lockCanvas();
                    if (width == 0) {
                        width = c.getWidth();
                        height = c.getHeight();

                        player.x = 50;
                        player.y = 45;
                    }

                    synchronized (mHolder) {
                        long now = System.currentTimeMillis();

                        update();
                        draw(c);
                        ifps++;

                        if (now > (mLastTime + 1000)) {
                            mLastTime = now;
                            fps = ifps;
                            ifps = 0;
                        }
                    }
                } finally {
                    if (c != null) {
                        mHolder.unlockCanvasAndPost(c);
                    }
                }
            }
        }
       } 
```

我要开始的活动称为 LoseActivity.class。预先感谢您的任何帮助。如果有人需要任何进一步的代码/解释，我将非常乐意发布它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:38:02.220

使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html)从 Thread 启动 Activity 为：

将您的主要活动更改为：

```
public class MainActivity extends Activity {

    Button btn_startGame;
    Activity activity;

    GameView mGameView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        activity = this;

        setContentView(R.layout.main);

        btn_startGame = (Button) findViewById(R.id.btnStartGame);
        btn_startGame.setOnClickListener(new OnClickListener() {

            //@Override
            public void onClick(View v) {
                mGameView = new GameView(activity,MainActivity.this);
                setContentView(mGameView);
                mGameView.mThread.doStart();
            }
        });
    }
  ///your code..... 
```

将您的 GameView 类更改为：

```
public class GameView extends SurfaceView implements Callback {

    Context mContext;
    Activity contextx;
    GameThread mThread;

    public GameView(Context context,Activity contextx) {
        super(context);
        this.mContext = context;
        this.contextx=contextx;

        getHolder().addCallback(this);

        mThread = new GameThread(getHolder(), mContext, new Handler() {
            @Override
            public void handleMessage(Message m) {
                // Use for pushing back messages.
            }
        });

        setFocusable(true);
    }
  //your code here..........

@Override
    public void run() {
         // check if condition here 
         if(lost){
            contextx.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                //start Activity here

                  Intent intent = new Intent(contextx, LoseActivity.class);
                  contextx.startActivity(intent);
             }
             }); 
            }
           else{
  //your code here......... 
```

# jquery-plugins - Jquery fullCalendar过滤事件并且无法呈现过滤后的事件

> ID：13708512
> 
> 赞同：1
> 
> 时间：2012-12-04T17:26:31.553
> 
> 标签：jquery-plugins

这是我第一次在这里提问。我正在使用 jQuery 插件 fullCalendar 并且在大多数情况下，除了一个问题外，我的工作都很好。我在日历事件中添加了一个过滤器，当用户单击复选框时，我想重新加载日历并查询数据库以获取过滤后的结果。我可以毫无问题地做到这一点，但如果我所在的月份不是当前月份，日历将始终返回当前月份并显示过滤结果。然后，用户必须单击上一个/下一个按钮才能返回他们所在的位置。

一个似乎可行的解决方案是：

```
function reloadCalendar(formInputs, height, view, startView, endView) {
    var source1 = {
        url: 'ajax.php?c=careerDevCalendar&a=getEvents',
        data: {
            filter: formInputs
        }
    };
    var s = Math.round(startView.getTime() / 1000);
    var e = Math.round(endView.getTime() / 1000);
    var source = 'ajax.php?c=careerDevCalendar&a=getEvents&startF='+s+'&endF='+e+'&'+formInputs;
    $("#calendar").fullCalendar('removeEvents');
    $("#calendar").fullCalendar('removeEventSource', source1);
    $("#calendar").fullCalendar('addEventSource', source);
    $("#calendar").fullCalendar('rerenderEvents');
} 
```

我能够在 JSON 数组中获取过滤后的结果，并且日历保持在我碰巧所在的月份，但它不会呈现日历中的事件。有没有人知道我可以做些什么来过滤事件而不让日历回到当前月份？

提前致谢

# java - JTable 单元格内的滚动条

> ID：13708515
> 
> 赞同：0
> 
> 时间：2012-12-04T17:26:48.283
> 
> 标签：java, swing, scroll, jtable

我试图在 JTable 的单元格中显示 HTML 文本，但滚动条根本没有出现。下面是我的代码...

```
public class TableCellTextRenderer {

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected,     
        boolean hasFocus, int row, int column) {

        final JTextPane jtextPane = new JTextPane();
        JScrollPane scrollPane = new JScrollPane(jtextPane);
        scrollPane.setPreferredSize(new Dimension(350,350));
        scrollPane.setVisible(true);
        jtextPane.setEditable(false);
        jtextPane.setAutoscrolls(true);
        jtextPane.setContentType("text/html");
        jtextPane.setText(myHtmlText);
        jtextPane.setVisible(true);
        jtextPane.setPreferredSize(new Dimension(350,350));

        //this setViewPort has no effect 
        scrollPane.setViewportView(jtextPane);

        jtextPane.setVisible(true);
        scrollPane.setAutoscrolls(true);
        scrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);
        scrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);

        JPanel jpanel = new JPanel();
        jpanel.setVisible(true);
        jpanel.setPreferredSize(new Dimension(360, 360));
        jpanel.add(scrollPane);

        return jpanel;
    }
} 
```

出现滚动条，但不出现滚动句柄。你能告诉我我错过了什么吗？

该表如下所示：

![jTable 上的第一行](../Images/3c8b692474b759da115d070b258bad48.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:41:07.133

恐怕这不会像你想要的那样工作。JTables 的工作方式是通过获取渲染器组件来绘制一次单元格，然后将其缓存。简单来说，您返回的组件基本上只是用于绘制单元格，但它不像普通组件那样工作 - 例如，它不接收事件。您可以使用单元格编辑器（它将接收事件），但用户必须手动选择单元格。

您可以通过安装自定义鼠标侦听器来使用一些技巧，但是这些东西会变得非常复杂。最好问问自己是否真的在寻找 JTable（而不是自定义布局），或者是否可以嵌入 JavaFX 表。

# c# - 带有可选列表的 XML 反序列化

> ID：13708516
> 
> 赞同：1
> 
> 时间：2012-12-04T17:26:49.463
> 
> 标签：c#, .net, xml, xml-serialization

我试图找出如何处理 XML 的反序列化。我确实了解如何使用内置的序列化并且之前已经这样做过。

这次我的问题是 XML 上的一个部分可能是消息列表或单个消息。

编辑：下面的 XML 片段是来自格式良好的 XML 文档的片段。收到时，XML 将包含消息列表或单个消息。为清晰和简洁起见，省略了包含的 XML。

XML 片段看起来像这样......

```
<messageList>
    <message>message1</message>
    <message>message2</message>
</messageList> 
```

或者像这样...

```
<message>singleMessage</message> 
```

是否可以使用内置的 .Net 反序列化来处理这个问题，还是我需要手动编写代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:36:43.283

尝试这个

```
[XmlRoot("MessageRoot", Namespace = "", IsNullable = false)]
public class MessageRoot
{

    [XmlElement(IsNullable = true, ElementName = "message")]
    public string Message { get; set; }

    [XmlArray("messageList")]
    [XmlArrayItem("message")]
    public string[] Messages { get; set; }
}

   <MessageRoot>   
     <message> message </message>  
     <messageList>
       <message>message1</message>
       <message>message2</message>   
      </messageList>  
   </MessageRoot> 
```

# c++ - 这个合并排序算法做了多少次比较？

> ID：13708520
> 
> 赞同：2
> 
> 时间：2012-12-04T17:26:57.597
> 
> 标签：c++, algorithm, sorting, data-structures

我想添加`compare++`到此代码中，以计算此算法完成了多少比较。是否需要在第一个 while 循环中和while内的`compare`每次执行时增加计数？这些是唯一应该增加的位置吗？（我在我认为属于的地方添加了这个增量并注释掉。请忽略交换功能）`Merge(...)``if``else``compare`

```
#include "MergeSort.h"

template<class ItemType>
void MergeClass<ItemType>::sort(ItemType values[], int first, int last)
// Post: The elements in values are sorted by key.
{
    if (first < last)
    {
        int middle = (first + last) / 2;
        sort(values, first, middle);
        sort(values, middle + 1, last);
        Merge(values, first, middle, middle + 1, last);
    }
}

template<class ItemType>
void MergeClass<ItemType>::Merge(ItemType values[], int leftFirst, int leftLast,
int rightFirst, int rightLast)
// Post: values[leftFirst]..values[leftLast] and
// values[rightFirst]..values[rightLast] have been merged.
// values[leftFirst]..values[rightLast] are now sorted.
{
    ItemType tempArray[5];
    int index = leftFirst;
    int saveFirst = leftFirst;
    while ((leftFirst <= leftLast) && (rightFirst <= rightLast))
    {
        if (values[leftFirst] < values[rightFirst])
        {
            tempArray[index] = values[leftFirst];
            leftFirst++;
            //compare++;
        }
        else
        {
            tempArray[index] = values[rightFirst];
            rightFirst++;
            //compare++;
        }
        index++;
        //compare++;
    }
    while (leftFirst <= leftLast)
    // Copy remaining items from left half.
    {
        tempArray[index] = values[leftFirst];
        leftFirst++;
        index++;
    }
    while (rightFirst <= rightLast)
    // Copy remaining items from right half.
    {
        tempArray[index] = values[rightFirst];
        rightFirst++;
        index++;
    }
    for (index = saveFirst; index <= rightLast; index++)
        values[index] = tempArray[index];
}

template<class ItemType>
inline void MergeClass<ItemType>::Swap(ItemType& item1, ItemType& item2)
// Post: Contents of item1 and item2 have been swapped.
{
    ItemType tempItem;
    tempItem = item1;
    item1 = item2;
    item2 = tempItem;
}

template<class ItemType>
MergeClass<ItemType>::MergeClass()
{
    compare = 0;
    swap = 0;
}
template<class ItemType>
void MergeClass<ItemType>::sortPreformance()
{
    cout << "Comparisons made: " << compare <<endl;
    cout << "Swaps made: "<< swap <<endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:49:49.617

如果它严格用于分析，我会将计数逻辑放在排序类之外。这类似于以下内容（仅计算 使用的比较和交换的数量`std::sort`）：

```
#include <iostream>
#include <algorithm>
#include <cstdlib>
using namespace std;

template<typename T>
struct CountingItem {
    CountingItem(const T& val = T()) : val_(val) {}

    bool operator<(const CountingItem<T>& rhs) const {
        ++compares;
        return val_ < rhs.val_;
    }

    static size_t compares;
    static size_t swaps;
    T val_;
};

template<typename T>
size_t CountingItem<T>::compares = 0;
template<typename T>
size_t CountingItem<T>::swaps = 0;

template<typename T>
void swap(CountingItem<T>& a, CountingItem<T>& b) {
    ++CountingItem<T>::swaps;
    std::swap(a, b);
}

int main()
{
    const size_t num_items = 10000;
    CountingItem<int> items[num_items];
    for(int i = 0; i < num_items; i++) items[i] = rand() % 100;
    sort(items, items+num_items);
    cout << "Compares = " << CountingItem<int>::compares << endl;
    cout << "Swaps    = " << CountingItem<int>::swaps << endl;

    // Reset CountingItem<int>::compares and swaps here if you're running another test
} 
```

# php - 如何使用 box.net API 上传文件？

> ID：13708521
> 
> 赞同：3
> 
> 时间：2012-12-04T17:26:57.347
> 
> 标签：php, forms, curl, box-api

前两天的表格我正在尝试解决使用 php 在 Box.net 中上传文件的问题。

我浏览了 Box.net API 文档并复制了他们给出的示例代码，他们给出的代码完美上传文件，但它重定向到打印服务器响应（XML 响应）的那个页面。

我不想向用户显示这样的屏幕，而是我想读取这些数据并根据该响应显示我的消息。

我已经按照@GBD 给出的指导编辑了我的代码，现在我面临另一个问题。

我选择的文件没有上传，而是上传了一些`.tmp file`。当我对其中的文件路径进行硬编码时，`$_POST['new_file1']`它会成功上传正确的文件。当我回显时，我得到的文件路径是这样的，`C:\wamp\tmp\php1A.tmp`而不是实际的文件路径`$_FILES['new_file1']['tmp_name']`。

谁能告诉我如何从中获取文件路径`$_FILES`？这样我就可以将它传递给 $post

以下是我的代码：

```
<?php
$upload_url = 'https://upload.box.net/api/1.0/upload/i9g1fmnnddfdr4739sxvbpXXXXXXXX/480416060';
$tmpfile = $_FILES['new_file1']['tmp_name'];
$filename = basename($_FILES['new_file1']['name']);
$_POST['new_file1'] = '@'.$tmpfile;
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $upload_url);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $_POST); 
$response = curl_exec($ch);
curl_close($ch);
echo $response;
?>
<form action=""
  enctype="multipart/form-data" accept-charset="utf-8" method="POST">
<input type="file" name="new_file1" />
<input type="text" name="share" value="1" />
<input type="submit" name="upload_files" value="Upload File" />
</form> 
```

请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:49:31.407

尝试

```
<?php

$tmpfile = $_FILES['new_file1']['tmp_name'];
$filename = basename($_FILES['new_file1']['name']);

$_POST['new_file1'] = '@'.$tmpfile;

$upload_url = 'https://upload.box.net/api/1.0/upload/i9g1fmnnddfdr4739sxvbpXXXXXXXX/480416060';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $upload_url);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $_POST); 
$response = curl_exec($ch);
curl_close($ch);
echo $response;
?> 
```

# linq - 使 System.Linq.Dynamic 工作的问题。

> ID：13708524
> 
> 赞同：0
> 
> 时间：2012-12-04T17:27:03.523
> 
> 标签：linq, entity-framework

我通过 Nuget 在我的项目中包含了 System.Linq.Dynamic 库。以下是我的 linq 查询，如果我使用要在选择中返回的类型字段，它可以正常工作。但是使用 System.Linq.Dynamic 我应该能够为选择使用字符串值。我遵循了我找到的示例，但我从选择中得到的只是字符串本身。我错过了什么？

```
var predicate = PredicateBuilder.False<Name>();
predicate = predicate.And(d => d.ID == "100053");
var results = from n in Names
                        .AsExpandable()
                        .Where(n=> n.ID=="100053")                            
                       join d in InstitutionDemographics on n.ID equals d.ID
                       join m in MemberAdhocIds on n.ID equals m.ID                           
                       join a in NameAddresses on n.BillingAddressNumber equals a.AddressNumber
                       join mas in MemberAdhocServices on n.ID equals mas.InstitutionID
select("new(n.ID,n.Company,n.MemberStatus,n.Email,n.MemberType,n.USCongress,n.FAX,n.County,d.NumberYearsAMember,d.Population,d.FederalReserveDistrict,d.FDICCertificateNumber,d.FRSID,d.ICBADistrictCode,d.UD_Minority_Type,d.MSA,d.NumberOfBranches,d.PubliclyTraded,d.SRAMemberships,d.Assets,d.RSU,d.FutureDues,d.InstitutionType,d.AgLoanPercentageTotal,m.CCRP,a.City,a.State,a.Address1,a.ZIP)");
                results.Dump(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:32:20.110

如果您告诉 select 语句选择一个字符串，它不会返回这些字符串的值。如果您尝试不使用引号会发生什么？

作为一个 VB 恶魔，我不精通 C#，但您可以尝试以下方法：

选择新建 {.Id = n.ID, .Company = n.Company, ...etc}

那有意义吗？如果我误解了你的问题，我深表歉意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:20:30.170

我的错。我没有意识到扩展是如何工作的。我期待扩展在查询语法中工作，而实际上它只能在方法语法中工作。

即 .Select("new (ID,Name)");

（这有效）

-对-

选择（新（ID，名称）“）；

（这不起作用）

# java - 一个控制器中的 Crud 操作是好还是坏 MVC 行为？

> ID：13708529
> 
> 赞同：0
> 
> 时间：2012-12-04T17:27:33.113
> 
> 标签：java, model-view-controller, design-patterns, spring-mvc

我需要知道下一个是否反对 MVC？我有模型 A、B、C，并且有两个主要控制器 CMS 和站点。我的团队负责人说我们将只为 A、B、C（到达站点）和（放入 CMS）进行粗加工操作。

我不同意这一点，我希望每个模型都有一个控制器。为什么我们将所有功能集中在一个地方。那我该怎么办我错了吗？这对项目的未来有好处吗？特别是在不久的将来我要负责这么多的操作和任务，我讨厌从事如此拥挤和不友好的代码设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:30:19.060

我觉得 CRUD 操作应该由模型处理。然后，控制器可以使用所述模型执行 CRUD 操作，从而允许模型保存应用程序逻辑，从而使您的控制器保持“精简”。

这是假设您的模型代表业务对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:31:04.283

如何划分每个控制器的操作几乎是个人喜好。我认为将控制器划分为反映模型的逻辑部分是有价值的，因为它使它们更易于管理。

一些实现实际上处理了一项服务中的所有 crud 操作，该服务可以包含多个存储库，并且可以执行需要多个存储库的业务操作。这种设计通常适合较大的项目，但对于较小的项目，它可能是矫枉过正的。

# spring - spring 石英计划属性自动提交异常

> ID：13708530
> 
> 赞同：0
> 
> 时间：2012-12-04T17:27:34.407
> 
> 标签：spring, properties, quartz-scheduler

我正在使用 maven-java-spring 和石英调度和 spring-jdbc 模板。

```
<dependency>
      <groupId>org.quartz-scheduler</groupId>
      <artifactId>quartz</artifactId>
      <version>1.7.3</version>
    </dependency> 
```

我们有使用石英调度程序作业进行大量插入的过程。

当我在插入 x 条记录后执行作业时，它会引发如下异常

```
exception caught: org.springframework.transaction.TransactionSystemException: Could not commit JDBC transaction; nested exception is java.sql.SQLException: commit() should not be called while in auto-commit mode.
                at org.springframework.jdbc.datasource.DataSourceTransactionManager.doCommit(DataSourceTransactionManager.java:270)
                at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
                at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
                at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:147) 
```

以下是我的 sechdular 代码

```
<!-- Spring jobs -->
  <bean id="wireJobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
    <property name="targetObject" ref="search"/>
    <property name="targetMethod" value="executeWireSearch"/>
  </bean>

  <bean id="nonWireJobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
    <property name="targetObject" ref="search"/>
    <property name="targetMethod" value="executeNonWireSearch"/>
  </bean>

      <bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
        <property name="triggers">
          <list>
            <ref bean="wireQuartzTrigger"/>
            <ref bean="nonWireQuartzTrigger"/>
          </list>
        </property>
      </bean> 
```

它与自动提交相关的石英属性有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:11:34.003

看看石英常见问题解答：http: [//quartz-scheduler.org/documentation/faq#FAQ-springCommit](http://quartz-scheduler.org/documentation/faq#FAQ-springCommit)

顺便说一句，如果可能的话，你应该升级，因为 1.7 已经很老了，不再受支持

HIH

# cocoa - writeToURL：错误处理

> ID：13708532
> 
> 赞同：0
> 
> 时间：2012-12-04T17:27:45.717
> 
> 标签：cocoa, file-io, error-handling, nsdata, nserror

Cocoa 中的文件处理非常简单，其中几个类处理消息如下（例如 NSData）

```
writeToURL:options:error: 
```

但是错误声明的文档是毫无用处的。只是“描述问题的 NSError 对象”

好的，但是所有可能的错误记录在哪里？我错过了相关链接吗？我希望这份清单不会无穷无尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:01:07.270

您可能已经注意到 的实例`NSError`包含一个名为 的属性`domain`。这是一个字符串，其中定义了三个：`NSPOSIXErrorDomain`、`NSOSStatusErrorDomain`和`NSMachErrorDomain`。每个域都有其唯一的错误代码，或者至少在其上下文中具有特殊含义。

为`NSPOSIXErrorDomain`，看`sys/errno.h`。

同样，对于`NSOSStatusErrorDomain`，请查看`CarbonCore/MacErrors.h`。

为`NSMachErrorDomain`，看`mach/error.h`。

框架可以定义自己的域，例如`NSCocoaErrorDomain`，您应该在`Foundation/FoundationErrors.h`.

请记住，您可以在自己的项目中定义自己的错误域和代码。

祝你在你的努力中好运。

# python - 与 Python os.walk 的差异

> ID：13708536
> 
> 赞同：3
> 
> 时间：2012-12-04T17:27:54.783
> 
> 标签：python, os.walk

我编写了一个脚本来爬取系统上的目录并记录文件元数据。我用 os.walk 来做到这一点。

它在大多数情况下都有效，但是当在不同的机器上运行时，它会返回不同的文件列表。

现在我正在我的 Dropbox 文件夹上进行测试；在我的 MBPro(lion) 上，它会抓取文件夹并返回正确数量的文件。在我的 iMac（山狮）上它不会，通常每次运行会跳过 1-3 个文件。额外的爬网将拾取一个落后者，但通常它会继续忽略目录中的一些文件。

这是代码的一小段：

```
directory = '/Users/user/Dropbox/'
for dirname, dirnames, filenames in os.walk(directory):
  for subdirname in dirnames:
    for filename in filenames:
      if os.path.isfile(filename):
        # collect file info using os.path and os.stat 
```

我显然想忽略目录。有一个更好的方法吗？最好是与操作系统无关的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:41:26.747

诀窍就像@MartijnPieters 建议的那样。也没有必要循环遍历子目录，因为它们会在循环的下一次迭代中被拾取。这是我的两台机器之间存在差异的原因。

同样重要的是要注意 OSX 有一种非常奇怪的方式来计算给定目录中的文件。您可以通过在给定目录上运行 df 然后执行“获取信息”并比较结​​果来看到这一点。

```
directory = '/Users/user/Dropbox/'
for dirname, dirnames, filenames in os.walk(directory):
    for filename in filenames:
        if os.path.isfile(filename):
            # collect file info using os.path and os.stat' 
```

# ruby - 模型失败中的 Rails 3 验证

> ID：13708549
> 
> 赞同：0
> 
> 时间：2012-12-04T17:28:44.870
> 
> 标签：ruby, ruby-on-rails-3, validation

我的 task.rb 模型中定义了一个 validate_completion 方法。伪逻辑应该是

```
if no hazards exist
  date_completed = Date.today
elsif any hazard exists with a risk_total > 1000
  date_completed = nil
else any hazard that exists has a risk_total =< 1000 
  date_complete = Date.today
end 
```

代码如下所示。

```
 def validate_completion
if self.date_completed.nil?
  if self.Biohaz_exist == "No"
    if self.Hazmat_exist == "No"
      if self.Fire_exist == "No"
        if self.Hazengy_exist == "No"
          if self.Tool_exist == "No"
            if self.Rad_exist == "No"
              if self.Laz_exist == "No"
                if self.Mag_exist == "No"
                  if self.Ergo_exist == "No"
                    if self.Mechand_exist == "No"
                      if self.Road_exist == "No"
                        if self.Fall_exist == "No"
                          if self.Hazatm_exist == "No"
                            if self.Noise_exist == "No"
                              if self.Ovrhead_exist == "No"
                                if self.Cut_exist == "No"
                                  if self.Temp_exist == "No"
                                    if self.Access_exist == "No"
                                      if self.Cowrkr_exist == "No"
                                        if self.Lonewrkr_exist == "No"
                                          self.date_completed = Date.today
                                        elsif self.Biohaz_exist == "Yes" and self.Biohaz.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Hazmat_exist == "Yes" and self.Hazmat.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Fire_exist == "Yes" and self.Fire.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Hazengy_exist == "Yes" and self.Hazengy.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Tool_exist == "Yes" and self.Tool.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Rad_exist == "Yes" and self.Rad.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Laz_exist == "Yes" and self.Laz.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Mag_exist == "Yes" and self.Mag.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Ergo_exist == "Yes" and self.Ergo.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Mechand_exist == "Yes" and self.Ergo.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Road_exist == "Yes" and self.Ergo.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Fall_exist == "Yes" and self.Fall.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Hazatm_exist == "Yes" and self.Hazatm.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Noise_exist == "Yes" and self.Noise.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Ovrhead_exist == "Yes" and self.Ovrhead.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Cut_exist == "Yes" and self.Cut.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Temp_exist == "Yes" and self.Temp.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Access_exist == "Yes" and self.Access.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Cowrkr_exist == "Yes" and self.Cowrk.risk_total > 1000
                                          self.date_completed = nil
                                        elsif self.Lonewrkr_exist == "Yes" and self.Lonewrkr.risk_total > 1000
                                          self.date_completed = nil                                                                                  
                                        else
                                          self.date_completed = Date.today  
                                        end
                                      end
                                    end
                                  end
                                end
                              end
                            end
                          end
                        end
                      end
                    end
                  end
                end
              end
            end
          end
        end
      end
    end
  end
end 
```

结尾

就像现在一样，如果不存在危险，它会成功地将日期设置为今天。如果我再添加一个危险，它会有效地将日期切换回零。但是，如果存在一种危害并且它的 risk_total 低于 1000，则日期保持为零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:03:20.477

“好吧，鉴于您的危害是静态定义的，而不是在数据库中，您可以执行以下操作：

```
#definition of all the hazard
hazards = [:Fire, :Road, :Fall]
def validate_completion
  # find all the hazards that exist
  exists = hazards.select { |hazard| self.send("#{hazard.to_s}_exist") } 
  # find if at least one high risk hazard exists
  high_risk_total = exists.detect {|hazard| self.send("#{hazard.to_s}_risk_total") > 1000 }
  # find if at least one low rick hazard exists
  low_risk_total = exists.detect {|hazard| self.send("#{hazard.to_s}_risk_total") <= 1000 }

  # validation logic here
end 
```

**您可以使用此逻辑，但将您的风险设置为数据库表并使用 ActiveRecord 关联和查询来简化此操作可能要容易得多。**

# ruby - 重新定义单元测试的方法

> ID：13708553
> 
> 赞同：0
> 
> 时间：2012-12-04T17:28:59.627
> 
> 标签：ruby, unit-testing

我在 ruby​​ 语法中不是那么严格，但是如果我在学习它时理解了一些东西，你可以做任何事情，没有任何限制，假设我有一个类方法，我想在单元测试中重新定义它以隔离我的东西正在测试，我该怎么做？假设类名是 foo，实例方法是 bar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T16:12:46.630

[Test::Redef](https://github.com/nearbuy/test-redef "Test::Redef") is a gem designed to do exactly this.

```
test "some method on Foo should be called because under normal circumstances it something useful like send network traffic" do
  Test::Redef.rd(
    'Foo#bar'  => proc {|args| puts 'new behavior goes here!'},
    'Foo#baz'  => :empty,   # same as => proc { }
    'Foo#quux' => :wiretap, # no behavior change but you get invocation tracking
    'Foo.blat' => :empty,   # class method
  ) do |rd|

    # code under test

    assert_equal [['invocation 1 arg 1', 'invocation 1 arg 2'], 
                  ['invocation 2 arg 1'],
                 ], rd[:bar].args, 'Foo#bar was called with the right arguments'
  end

  # now all methods are back to normal
end 
```

# android - Android APK 签名

> ID：13708554
> 
> 赞同：-6
> 
> 时间：2012-12-04T17:28:59.853
> 
> 标签：android, apk, code-signing

> **可能重复：**
> [是否可以反编译 Android .apk 文件？](https://stackoverflow.com/questions/3122635/is-it-possible-to-decompile-an-android-apk-file)

我有一个关于 Android APK 签名的问题。这是一个场景：市场上有一些应用程序。我将它安装在我的设备上。提取APk，反编译。然后重新编译它（进行我想要的任何更改），使用我的密钥库对其进行签名并将其上传到市场并基本上欺骗该应用程序。有什么东西（除了应用程序本身检查谁签署了应用程序）阻止某人这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:37:02.800

在 Play 商店中，每个应用程序都有一个唯一的包名称。所以你不能上传具有相同包名的应用程序。除此之外你必须同意谷歌的协议（上传某人的应用程序肯定违反他们的协议），所以如果你想被原始开发者起诉，那就继续吧……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:37:19.867

我假设您之所以这么问是因为您担心这会发生*在*您身上，而不是您打算对其他人的应用程序这样做。

您将无法使用与市场上已有应用相同的包名称。安装您的应用程序的人不会丢失另一个。就市场而言，它们是完全不同的应用程序。它们需要在不同的发布者帐户下发布，因为它们由不同的密钥签名。

如果您想在表面上进行欺骗（无论如何您都可以这样做），那么有一种更简单的方法。只需编写一个与市场上的应用程序具有相同名称和描述的应用程序。寻找“Goofy Game”的人会发现您的 ersatz 标题以及真正的“Goofy Game”应用程序。买者自负。

# sql-server-2005 - 在 SQL Server 2005 中将多列作为单个逗号分隔的行返回

> ID：13708562
> 
> 赞同：2
> 
> 时间：2012-12-04T17:29:26.983
> 
> 标签：sql-server-2005

我很好奇这是否可能。

我有一个表，或者这可能特定于任何带有数据的旧表。一个简单的 SELECT 将返回列和行作为结果集。我试图找出是否可以返回行而不是列，列连接并以逗号分隔。因此，预期的行数返回，但只有一个 varchar 列包含所有列的逗号分隔结果，就像 CSV 文件一样。

谢谢。

[更新]

这是我要问的更多细节。我没有在客户端上执行此操作的选项，这是我尝试使用 SSIS 完成的任务。

场景：我有一个在 SSIS 中动态创建的表，但每次构建时列名都会更改。原始包使用 BCP 来获取数据并将其放入平面文件中，但由于在作为作业运行时的权限，BCP 无法在所需的目的地创建平面文件。我们也不能改变这个。

另一个问题是，使用 SSIS 2005，使用平面文件目标，您必须从输入源映射列名，我不能这样做，因为列名不断变化。

我编写了一个脚本任务来从原始表中获取所有数据，然后使用流写入器写入 CSV，但我必须遍历每一行，然后遍历每一列，以生成由所有列组成的字符串。我想针对带有 vb.net 的讨厌循环来测量 sql server 上的这种列连接的性能。

如果我可以让 sql 为每一行生成一个列，我可以将一行写入文本文件，而不是遍历每一列来构建行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:56:24.557

我认为你应该试试这个

```
 SELECT UserName +','+ Password AS ColumnZ
FROM UserTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:17:15.973

这可能需要清理一些，但您可以通过使用存储在动态 SQL 中`sys.objects`并`sys.columns`与动态 SQL 一起使用的元数据来做到这一点。请注意，我不是动态 SQL 的粉丝，但出于报告目的，它应该不是太大的问题。

一些用于创建测试数据的 SQL：

```
if (object_id('test') is not null)
drop table test;

create table test
(
id uniqueidentifier not null default newId()
,col0 nvarchar(255)
,col1 nvarchar(255)
,col2 nvarchar(255)
,col3 nvarchar(255)
,col4 nvarchar(255)
);

insert into test (col0,col1,col2,col3,col4)
select 'alice','bob','charlie','dave','emily'
union
select 'abby','bill','charlotte','daniel','evan' 
```

用于构建 CSV 行的存储过程：

```
-- emit the contents of a table as a CSV.
-- @table_name: name of a permanent (in sys.objects) table 
-- @debug: set to 1 to print the generated query
create procedure emit_csv(@table_name nvarchar(max), @debug bit = 0)
as

    declare @object_id int;

    set nocount on;

    set @object_id = object_id(@table_name);

    declare @name nvarchar(max);
    declare db_cursor cursor for
        select name 
        from sys.columns 
        where object_id = @object_id;

    open db_cursor;
    fetch next from db_cursor into @name

    declare @query nvarchar(max);
    set @query = '';

    while @@FETCH_STATUS = 0
    begin
        -- TODO: modify appended clause to escape commas in addition to trimming
        set @query = @query + 'rtrim(cast('+@name+' as nvarchar(max)))'
        fetch next from db_cursor into @name;

        -- add concatenation to the end of the query. 
        -- TODO: Rearrange @query construction order to make this unnecessary
        if (@@fetch_status = 0)
            set @query = @query + ' + '','' +'
    end;

    close db_cursor;
    deallocate db_cursor;

    set @query = 'select rtrim('+@query+')  as csvrow from '+@table_name;
    if @debug != 0
    begin
        declare @newline nvarchar(2);
        set @newline = char(13) + char(10)
        print 'Generated SQL:' + @newline + @query + @newline + @newline;
    end

    exec (@query); 
```

对于我的测试表，这会生成查询：

```
select 
rtrim(rtrim(cast(id as nvarchar(max))) 
+ ',' 
+rtrim(cast(col0 as nvarchar(max))) 
+ ',' 
+rtrim(cast(col1 as nvarchar(max))) 
+ ',' 
+rtrim(cast(col2 as nvarchar(max))) 
+ ',' 
+rtrim(cast(col3 as nvarchar(max))) 
+ ',' 
+rtrim(cast(col4 as nvarchar(max))))  
as csvrow 
from test 
```

和结果集：

```
csvrow
-------------------------------------------------------------------------------------------
EEE16C3A-036E-4524-A8B8-7CCD2E575519,alice,bob,charlie,dave,emily
F1EE6C84-D6D9-4621-97E6-AA8716C0643B,abby,bill,charlotte,daniel,evan 
```

**建议**

1.  修改光标循环以转义逗号
2.  确保 @table_name 引用存储过程中的有效表 ( `if object_id(@table_name) is null`)
3.  一些异常处理会很好
4.  对此设置权限，以便只有运行报表的帐户才能执行它。动态 SQL 中的字符串连接可能是一个很大的安全漏洞，但我没有看到其他方法可以做到这一点。
5.  确保游标关闭和释放的一些错误处理可能很好。

这可以用于任何不是表格的`#temp`表格。在这种情况下，您必须使用`sys.objects`and `sys.columns`from `tempdb..`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:37:54.360

使用 SQL Server 的 XML 函数有一种奇特的方法，但是对于初学者，您可以将您关心的列的内容转换为 varchar 并用逗号连接它们吗？

```
SELECT cast(colA as varchar)+', '+cast(colB as varchar)+', '+cast(colC as varchar)
FROM table 
```

请注意，如果您的任何内容中有逗号或双引号，这将被绊倒，在这种情况下，您还可以在每个演员表上使用替换功能来转义它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:20:06.050

```
select STUFF((select ','+ convert(varchar,l.Subject) from tbl_Student B,tbl_StudentMarks L
where B.Id=L.Id FOR XML PATH('')),1,1,'') Subject FROM tbl_Student A where A.Id=10 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T17:35:39.353

假设您知道表格有哪些列，并且您不想做一些动态和疯狂的事情，您可以这样做

```
SELECT CONCAT(ColumnA, ',', ColumnB) AS ColumnZ
FROM Table 
```

# css - Google 样式工具栏 CSS/HTML

> ID：13708565
> 
> 赞同：0
> 
> 时间：2012-12-04T17:29:39.650
> 
> 标签：css, html, html-lists

我正在尝试在 G-mail 和其他一些 Google 服务上重新创建 Google 风格的工具栏。

![在此处输入图像描述](../Images/6192243de4366623cf87a1d3f6a5d2df.png)

我曾尝试将其作为格式化列表和嵌套在一个容器中的 div 元素，但我每次都遇到同样的问题。

当您将鼠标悬停时，新的 1px 边框会移动所有其他元素，我必须应用以下内容：

```
left: -1px;
bottom: 1px; 
```

这对于当前的元素来说都很好：hover'd，所有其余的都在移动，它看起来很丑。

**所以我想我的问题是：** 有没有什么方法可以显示：悬停上的新 1px 不会改变定位，同时仍然显示这些元素而没有绝对定位。

显然，如果唯一的途径是绝对定位，我必须在其中放置像素坐标，那么当然可以，但必须有一种更优雅的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:33:42.493

你可以做几件事来避免 1px 边框在悬停时移动东西。

[http://jsfiddle.net/ZeikJT/tBmm2/](http://jsfiddle.net/ZeikJT/tBmm2/)

一种解决方案是添加透明边框 ( `border:1px solid transparent`)，以便始终存在间隙。这几乎适用于所有情况。它还允许您简单地更改`border-color`悬停时而不重新指定边框宽度，因此如果您决定更改宽度，则无需在两个位置进行更改。

[http://jsfiddle.net/ZeikJT/NkBwp/](http://jsfiddle.net/ZeikJT/NkBwp/)

另一种解决方案是添加边距或填充，然后在悬停时取出。要正常工作有点棘手，但也可以正常工作。

# winforms - 如何从 Windows 应用程序回滚事务

> ID：13708566
> 
> 赞同：0
> 
> 时间：2012-12-04T17:29:44.017
> 
> 标签：winforms, sql-server-2008, transactions, commit, rollback

我正在开发一个 Windows 应用程序 (WinForms)，它需要运行四个不同的进程（存储过程），其中包括在四个进程中的任何一个引发错误的实例中提交或回滚整个进程的能力。我将在下面描述我的情况（请原谅我对 SQL 的无知，因为我不是 DBA）：

*   **Windows 应用程序：**单击进程按钮

*   **数据库：**启动过程 1（可能是 BEGIN TRANSACTION *MyProcessTransaction*）

*   **Windows 应用程序：**单击进程按钮

*   **数据库：**启动过程 1（可能是 BEGIN TRANSACTION *MyProcessTransaction*）

*   **Windows 应用程序：**接收来自程序 1 的通知，表明它已成功完成并更新进度条。

*   **数据库：**启动过程 2（并且不知何故仍封装在*MyProcessTransaction*下）

*   **Windows 应用程序：**接收来自程序 2 的通知，表明它已成功完成并更新进度条。

*   **数据库：**启动过程 3（并且不知何故仍封装在*MyProcessTransaction*下）并引发错误并回滚事务*MyProcessTransaction*

这可能吗？我尝试了四个查询窗口并在第一个开始事务，然后将尝试捕获放在其他窗口中并尝试在每个窗口中执行工作以模拟这一点，但是当我到达第四个窗口并故意引发错误时，我收到了异常没有 BEGIN TRANSACTION 让我能够回滚。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:18:03.707

好吧，像往常一样，在进行了一些挖掘之后，我找到了一个适合我的解决方案。并不是说它是唯一的解决方案，而是它高效且有效：

[https://stackoverflow.com/a/13228090/176806](https://stackoverflow.com/a/13228090/176806)

我从来没有把 2 和 2 放在一起来确定 TRANSACTION 是特定于连接的，所以，我按照建议做了并通过连接对象创建了一个事务，并将该事务从一个调用传递到另一个调用，然后在出现错误的情况下回滚那笔交易。如果有人想回答其他问题，我仍然愿意接受任何建议。

# jython - Jython :: 嵌入式 PythonInterpreter 是否处理 Python 源代码编码？

> ID：13708577
> 
> 赞同：4
> 
> 时间：2012-12-04T17:29:57.110
> 
> 标签：jython

我正在使用**org.python.util.PythonInterpreter**将[Jython](http://www.jython.org/)嵌入到 Java 应用程序中。我正在使用 Jython 版本**2.5.2**。

我正在解释的 Python 脚本包含 UTF-8 文字，因此我根据[PEP-0263](http://www.python.org/dev/peps/pep-0263/)在脚本顶部添加了 Python 源代码编码：

```
# -*- coding: utf-8 -*- 
```

我的脚本编译如下：

```
String script = // load from file as a single String ...
PythonInterpreter pi = new PythonInterpreter();
PyCode code = pi.compile(script);
result = pi.eval(code); 
```

然而，Jython 抱怨以下跟踪：

```
 [java]     ... : encoding declaration in Unicode string
 [java]     at org.python.core.ParserFacade.prepBufReader(ParserFacade.java:277)
 [java]     at org.python.core.ParserFacade.parseExpressionOrModule(ParserFacade.java:119)
 [java]     at org.python.util.PythonInterpreter.compile(PythonInterpreter.java:259)
 [java]     at org.python.util.PythonInterpreter.compile(PythonInterpreter.java:256)
 [java]     at org.python.util.PythonInterpreter.compile(PythonInterpreter.java:250) 
```

Jython 是否在脚本文件中支持 UTF-8？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-24T01:33:28.920

这是一个轶事答案：正如 Homebrew 在 macOS 上安装的那样，Jython 2.7.1**确实**支持非嵌入式命令行解释器中的 Python 源代码编码。希望它也得到支持。

# highcharts - Highcharts 中的多个阈值

> ID：13708579
> 
> 赞同：2
> 
> 时间：2012-12-04T17:30:05.030
> 
> 标签：highcharts, threshold

我实际上是在尝试使用 HighCharts 来显示多个阈值。

这是我的[代码](http://jsfiddle.net/XndxH/2/)的一部分。

特别是这里：

```
var translatedThreshold = series.yAxis.translate(threshold1),
        y1 = Math.round(series.yAxis.len - translatedThreshold),
        y2 = y1 + 2; // 0.01 would be fine, but IE9 requires 2

    // Apply gradient to the path
    series.graph.attr({
        stroke: {
            linearGradient: [0, y1, 0, y2],
            stops: [
                [0, colorAbove],
                [1, colorBelow]
            ]
        }
     });

    // Apply gradient to the area
    if (series.area) {
        series.area.attr({
            fill: {
                linearGradient: [0, y1, 0, y2],
                stops: [
                    [0, colorAbove],
                    [1, colorBelow]
                ]
            }
         });
    } 
```

实际上，有两个阈值，一个在 0 上，一个在 3 上。

对于点，阈值是正确的（显示一个蓝点，因为它的值在 0 和 3 之间，并且它的颜色值是 ColorMiddle）。

对于曲线和区域，虽然不显示 colorMiddle 值，因为我不知道如何将它们添加到系列图上。

我想我必须使用带有 series.yAxis.translate(threshold2) 的 translateThreshold2，并将它们添加到 series.area.attr 但我不知道具体如何。

有人有想法吗？

EDIT1：我设法显示了阈值线（在下面的示例中为蓝色），但该区域未正确填充。该区域应该是介于 0 和 300 之间的蓝色，并且是绿色（也称为 colorAbove，而不是 colorMiddle）。

结果显示在这里：http: [//jsfiddle.net/LeLwu/27/](http://jsfiddle.net/LeLwu/27/)（它恰好在 Chrome 和 Firefox 中有所不同......）

# plugins - CRM 2011 在线插件工作正常，但未提交更新

> ID：13708584
> 
> 赞同：1
> 
> 时间：2012-12-04T17:30:52.303
> 
> 标签：plugins, dynamics-crm-2011

我是 CRM 2011 的新开发人员。我为测试编写了简单的代码。
该插件似乎工作正常（使用 ITracingService 检查），但似乎属性不采用新值。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xrm.Sdk.Query;
using Microsoft.Xrm.Sdk;

namespace AgeUpdatePlugin
{
    public class AgeUpdatePlugin:IPlugin
    {
        public void Execute(IServiceProvider serviceProvider)
        {
            IPluginExecutionContext context = (IPluginExecutionContext)serviceProvider.GetService(typeof(IPluginExecutionContext));

            try
            {
                IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
                ITracingService tracingService = (ITracingService)serviceProvider.GetService(typeof(ITracingService));
                if (tracingService == null)
                    throw new InvalidPluginExecutionException("Failed to retrieve the tracing service.");

                IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);
                tracingService.Trace("Plugin has started..");

                //l'expression de condition
                ConditionExpression condition = new ConditionExpression("new_datenaissance", ConditionOperator.NotNull);

                FilterExpression filter = new FilterExpression();
                filter.Conditions.Add(condition);
                ColumnSet cols = new ColumnSet();
                //cols.AddColumn("Id");
                cols.AddColumn("new_candidatid");
                cols.AddColumn("new_age");
                cols.AddColumn("new_datenaissance");

                QueryExpression query = new QueryExpression();
                query.Criteria = filter;
                query.EntityName = "new_candidat";
                query.ColumnSet = cols;

                tracingService.Trace("appel retrieve multiple with date=" + DateTime.Now.ToString() + "/"+DateTime.Now.ToLocalTime().ToString());
                var retrieve = service.RetrieveMultiple(query).Entities;

                foreach (var c in retrieve)
                {

                    var dt =(DateTime)c.Attributes["new_datenaissance"];

                    tracingService.Trace(dt.ToString());
                    if (dt.Month == DateTime.Now.Month && dt.Day == DateTime.Now.Day)
                    {

                        tracingService.Trace((DateTime.Now.Year - DateTime.Parse(c["new_datenaissance"].ToString()).Year).ToString());
                        c.Attributes["new_age"] = DateTime.Now.Year - DateTime.Parse(c["new_datenaissance"].ToString()).Year;
                        tracingService.Trace(c.Attributes["new_candidatid"].ToString() +" - "+c.Attributes["new_age"].ToString());
                        service.Update(c);

                        tracingService.Trace("updated");
                    }
                }
                tracingService.Trace("Plugin done working");
                throw new InvalidPluginExecutionException("This is from a plugin that Mehdi has created  "); 

            }
            catch (Exception exc)
            {
                throw exc;
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:39:22.700

每当您在插件中引发异常时，事务都会中止，因此您不会看到应用的更改。删除以下行：

```
throw new InvalidPluginExecutionException("This is from a plugin that Mehdi has created  "); 
```

我假设您添加了它以查看仅在引发异常时才可用的跟踪输出。使用 CRM Online，您最好的跟踪选择是写入自定义跟踪实体。

# c# - WebView 无法识别任何鼠标事件。试图让侧面后退/前进按钮注册

> ID：13708587
> 
> 赞同：1
> 
> 时间：2012-12-04T17:30:58.340
> 
> 标签：c#, wpf, visual-studio, webview

我在 Microsoft Visual Studio 2012、C#、WPF 中工作

我的 webview 没有接收到任何鼠标事件。

我需要启用鼠标上的侧按钮来触发前后移动。我有后退/前进的代码只需要拿起鼠标侧面点击。

```
void MainPage_PointerPressed(object sender, PointerRoutedEventArgs e)
    {
        if (e.Pointer.PointerDeviceType == Windows.Devices.Input.PointerDeviceType.Mouse)
        {
            Windows.UI.Input.PointerPoint pt = e.GetCurrentPoint(this);
            if (pt.Properties.IsRightButtonPressed)
            {
                MainPage.Current.WebRightClicked = true;
            }

        }
    } 
```

web.RightClicked 只是一个测试，看看我是否能得到它。我真的很想拿起某人拇指所在的鼠标上的两个侧键。启用历史之间的来回。几乎所有主要的 Web 浏览器都具有此功能。

# wpf - System.InvalidOperationException 调用线程无法访问此对象，因为不同的线程拥有它

> ID：13708588
> 
> 赞同：0
> 
> 时间：2012-12-04T17:31:00.330
> 
> 标签：wpf, multithreading, c#-4.0

我有一个繁忙的指示器，我想在我的应用程序进行一些计算时显示它。

```
var uiThread = new Thread(() =>
    {
        autoResetEvent.Set();
        bussyWindowVM.Dispatcher = Dispatcher.CurrentDispatcher;
        Dispatcher.CurrentDispatcher.BeginInvoke((Action)delegate
            {
                var busyWindow = new BusyWindow
                {
                    DataContext = bussyWindowVM, 
                    Owner = Application.Current.MainWindow,
                    WindowStartupLocation = WindowStartupLocation.CenterOwner
                };
                busyWindow.Show();
            });

        Dispatcher.Run();
    });
// set single threaded apartment
uiThread.SetApartmentState(ApartmentState.STA);

// mark UI thread as background thread
uiThread.IsBackground = false;

// start the UI thread
uiThread.Start();

// wait until thread exits
autoResetEvent.WaitOne(); 
```

但是当我运行应用程序时它会抛出

> System.InvalidOperationException "{调用线程无法访问此对象，因为另一个线程拥有它。}"

我无法弄清楚如何解决这个问题。

但是，如果我删除`Owner = Application.Current.MainWindow`，那么一切正常，但所有者设置不正确，所以当我重新调整应用程序的大小时，窗口也不会位于应用程序的中心，当我最小化应用程序时它会保持在顶部。

堆栈跟踪：

```
 at System.Windows.Threading.DispatcherObject.VerifyAccess()
   at System.Windows.Application.get_MainWindow()
   at MyProject.MyViewModel.<>c__DisplayClass3.<CreateBusyWindow>b__2() in D:\MyStuff\Dev\Repo\MyProject\ViewModels\MyViewModel.cs:line 2482
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl()
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.ProcessQueue()
   at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at CivilGeo.GeoHECRAS.ViewModels.GeoHECRASViewModel.<>c__DisplayClass3.<CreateBusyWindow>b__1() in D:\MyStuff\Dev\CivilGeoRepo\GeoHECRAS\CivilGeo.GeoHECRAS\ViewModels\GeoHECRASViewModel.cs:line 2492
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:34:03.620

`Dispatcher.CurrentDispatcher``Dispatcher`在您的后台线程中为该线程创建一个全新的。
此调度程序无法从原始 UI 线程访问对象，例如`Application.Current.MainWindow`.

如果你想运行一个单独的 UI 线程，你将无法设置`Owner`. 另外，您不应该调用`BeginInvoke()`.

# css - CSS渐变颜色以像素为单位停止

> ID：13708590
> 
> 赞同：14
> 
> 时间：2012-12-04T17:31:06.063
> 
> 标签：css, linear-gradients

我正在开发一个 HTML/CSS/JS 项目，其中应用程序是固定大小的，并且元素必须根据设计精确定位。因为窗口大小是固定的，所以我可以轻松地在 CSS 中使用像素尺寸，而不必担心调整浏览器的大小。我也不必担心 IE 或 Opera：该应用程序只能在 webkit 和 firefox 中运行。

在一些地方，我需要一个渐变背景超过特定数量的像素。这可以通过类似的东西轻松完成

```
background-image: linear-gradient(to top, #666666, #000000 60px); 
```

（及其`-webkit-`和`-moz-`对应物。）这对大多数元素都有作用。但是，有几个地方我需要设置颜色停止的顶部和底部像素位置。如果这些是百分点，那么可以通过以下方式完成：

```
background-image: linear-gradient(to top, #666666, black 60px, transparent 60px, transparent 90%, black 90%, #666666); 
```

（从灰色到黑色超过 60 像素，然后是透明的，然后是最后 10% 的黑色到灰色）。但是，我需要对像素完成相同的操作，因为所讨论的元素在不同时间的大小不同。如果需要，我想避免必须使用 JS 在不同的动态计算百分比处重新应用渐变。

所以，我的问题：有没有办法从最后指定一个颜色停止*x* **像素**（不是百分比）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-07-17T09:04:11.820

我刚刚通过搜索引擎找到了这个，我认为最好的解决方案已经由使用**多个背景图像**的 vals 给出- 但不是使用`background-size`，而且我认为在这里使用**alpha 颜色**（使用）`background-position`更加灵活和稳定，就像在下面的例子：**`rgba()`**

 **```
background-image:
    /* top gradient - pixels fixed */
    linear-gradient(to bottom, rgb(128,128,128) 0px,rgba(128,128,128,0) 16px), 
    /* bottom gradient - pixels fixed */
    linear-gradient(to top, rgb(128,128,128) 0px, rgba(128,128,128,0) 16px),  
    /* background gradient - relative */
    linear-gradient(to bottom, #eee 0%, #ccc 100%) ; 
```

这正是我最初寻找的行为。:)

演示：[http ://codepen.io/Grilly86/pen/LVBxgQ](http://codepen.io/Grilly86/pen/LVBxgQ)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-21T14:54:05.107

它适用于`calc()`，但不幸的是不适用于 MS 浏览器：

每对的第一行具有堆叠 2 个背景的解决方案，第二行具有正在使用的计算。不适用于 Internet Explorer 和 Edge 浏览器。

```
div {
  margin-left: auto;
  margin-right: 0;
  width: 200px;
  height: 20px;
  animation: sweep 5s ease-in-out alternate infinite;
  text-align: center;
  color: white;
  font-family: sans-serif;
  font-weight: bold;
  line-height: 20px;
  will-change: width;
}

div:nth-child(odd) {
  background-image: linear-gradient(to right, red, green 100px, transparent 101px), linear-gradient(to left, red, green 100px);
  border-bottom: 1px solid gray;
}

div:nth-child(even) {
  background-image: linear-gradient(to right, red, green 100px, green calc(100% - 100px), red);
  margin-bottom: 10px;
}

div:nth-child(n+3) {
  width: 300px;
}

div:nth-child(n+5) {
  width: 400px;
}

div:nth-child(n+7) {
  width: 500px;
}

div:nth-child(n+9) {
  width: 600px;
}

@keyframes sweep {
  100% {
    width: 600px;
  }
}
```

```
<div> 200 </div>
<div></div>
<div> 300 </div>
<div></div>
<div> 400 </div>
<div></div>
<div> 500 </div>
<div></div>
<div> 600 </div>
<div></div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:10:35.400

我认为这是不可能的，但是覆盖 2 个对象，一个从底部具有不透明像素，另一个从顶部具有像素，仍然可以避免使用 JS

```
.background {
    position: absolute;
    background-image: linear-gradient(to top, #666666, black 60px, transparent 60px);
}
.overlay {
    position: relative;
    background-image: linear-gradient(to bottom, #666666, black 60px, transparent 60px);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-24T15:17:25.837

在来自 po228 的上一个答案的行中，但在相同的元素背景中。

设置 2 个不同的渐变，一个从顶部开始，另一个从底部开始

```
.test {
  background: linear-gradient(to top, red 10px, white 10px),
      linear-gradient(to bottom, blue 10px, white 10px);
  background-size: 100% 50%;
  background-repeat: no-repeat;
  background-position: bottom center, top center;
  height: 150px;
  width: 300px;
}
```

```
<div class="test"></div>
```**

# javascript - Javascript Jquery 日期“无效日期”错误

> ID：13708592
> 
> 赞同：0
> 
> 时间：2012-12-04T17:31:10.057
> 
> 标签：javascript, jquery-ui

我正在从 jquery grid-jqxgrid 获取记录，当获取数据记录时，尝试对日期时间列进行操作并仅显示日期，**而不是日期和时间**

请看以下代码：

```
if ((dataRecord.ReportNextRun.toString().replace(/\s/g, '')) != "") {

    alert(dataRecord.ReportNextRun); //11/08/2012 12:09AM
    alert("Hiiiiiiiiii");
    var d = new Date(dataRecord.ReportNextRun);
    alert(d); // Invalid Date
    var curr_date = d.getDate();
    alert(curr_date); // NaN
    var curr_month = d.getMonth(dataRecord.ReportNextRun) + 1; //Months are zero based
    var curr_year = d.getFullYear(dataRecord.ReportNextRun);
    alert(curr_date + "-" + curr_month + "-" + curr_year); // NaN-NaN-NaN
}​ 
```

请查看我收到的行后的评论并建议该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:40:13.987

问题似乎是这样的：

```
11/08/2012 12:09AM
                ^ 
```

应该

```
11/08/2012 12:09 AM
                 ^ 
```

javascript 日期解析器（至少对于 Chrome）不会将第一个值识别为日期字符串。

看这个演示：http: [//jsfiddle.net/RY99T/1/](http://jsfiddle.net/RY99T/1/)

# mongodb - Django中的随机顺序

> ID：13708593
> 
> 赞同：1
> 
> 时间：2012-12-04T17:31:23.783
> 
> 标签：mongodb, django-models

我用 mongodb 创建了我的数据库，然后我在 django 中创建了一个模型，现在我想要 order_by('?') 随机排序，但顺序不会改变。

我正在使用 django 1.4.1。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T08:07:47.833

MongoDB 服务器（在 2.2 中）不支持以随机顺序返回查询结果。

MongoDB Cookbook 中描述了一种可能的解决方法，使用[Random Attribute 。](http://cookbook.mongodb.org/patterns/random-attribute/)

另一个性能较差的选项是使用计数、跳过和限制的组合来查找随机文档。

您可以在 MongoDB 问题跟踪器中投票或观看[SERVER-533](https://jira.mongodb.org/browse/SERVER-533)，这是从集合中获取随机项目的功能请求。关于 Jira 问题也有一些进一步的讨论。

# c# - 如何获取用于启动 XBAP 的 URL？

> ID：13708594
> 
> 赞同：1
> 
> 时间：2012-12-04T17:31:30.443
> 
> 标签：c#, wpf, xbap

如果有人从 启动我的 xbap `http://myserver/folder/application.xbap`，我想`http://myserver/folder/`从应用程序中获取部分 url。

我怎样才能做到这一点？

我试过了：

*   `System.IO.Directory.GetCurrentDirectory()`
*   `System.IO.Path.GetDirectoryName(System.Diagnostics.Process.GetCurrentProcess().MainModule.FileName)`
*   `Environment.CurrentDirectory`
*   `System.Reflection.Assembly.GetExecutingAssembly().Location`
*   `AppDomain.CurrentDomain.BaseDirectory`
*   `System.Windows.Application.Current.StartupUri.AbsolutePath`
*   `System.Environment.GetCommandLineArgs()[0]`
*   `System.Deployment.Application.ApplicationDeployment.CurrentDeployment.DataDirectory`

它们都返回我的机器上 xbap 下载并运行的本地位置，或者执行程序集的位置，例如`C:\Windows\SysWOW64`

如何从应用程序本身访问用于启动 xbap 应用程序的 URL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T17:38:17.117

我相信它是[`BrowserInteropHelper.Source`](http://msdn.microsoft.com/en-us/library/system.windows.interop.browserinterophelper.source.aspx)：

> 获取启动 XAML 浏览器应用程序 (XBAP) 应用程序的位置的统一资源标识符 (URI)。

# php - 双语wordpress：如何更好地切换语言？

> ID：13708596
> 
> 赞同：1
> 
> 时间：2012-12-04T17:31:36.857
> 
> 标签：php, wordpress, .htaccess, arabic, qtranslate

我有两个网站以英语和阿拉伯语版本显示。

环顾四周后，我发现 qTranslate 插件非常适合简单的解决方案。

我使用`.htaccess`如下：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^ar[\/]?$ index.php?lang=ar
RewriteRule ^en[\/]?$ index.php?lang=en 
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L]
</IfModule> 
```

并在主题`functions.php`以下用于检测语言：

```
 function inspectVars($vars) {

      session_start();

      if ($_GET['lang'] == "ar") {
        $_SESSION['custom_lang'] = "ar";
        } elseif ($_GET['lang'] == "en") {
        $_SESSION['custom_lang'] = "en";
        } elseif (!isset($_GET['lang']) && !isset($_SESSION['custom_lang'])) {
        $_SESSION['custom_lang'] = "en";
      }
      $GLOBALS['q_config']['language']= $_SESSION['custom_lang'];
     return $vars;
    }

    add_filter("query_vars", "inspectVars"); 
```

此会话设置用于切换 RTL/LTR 样式表。有更好的方法吗？

现在，我面临的问题是：

1.  如何使用将当前页面、博客切换为其他语言的链接？我使用 domain/ar 和 domain/en 进行切换，但首先要回家。
2.  我想保留 url`domain.com/ar/someslugsoranything`和`domain.com/en/someslugsoranything`.
3.  我有一些图像，模板上的幻灯片需要随着语言的变化而切换。什么是最好的方法？还有HTML格式的文本，也需要切换。

编辑：我后来注释掉了以下内容，因为启用 qTranslate 自己的语言切换器可以保持所选语言的持久性。实际上整个`inspectVars`函数都可以省略。

```
 $GLOBALS['q_config']['language']= $_SESSION['custom_lang']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:11:13.250

我已经解决了大部分问题。

通过注释掉两行`.htaccess`文件：

```
#RewriteRule ^ar[\/]?$ index.php?lang=ar
#RewriteRule ^en[\/]?$ index.php?lang=en 
```

我刚刚发现的以下帖子解决了许多问题：

[使用 qTranslate 显示基于语言的内容](http://shailan.com/3283/displaying-content-based-on-current-language-using-qtranslate/) 我现在遇到的最大问题是需要用阿拉伯语切换的混合 HTML 文本。在模板中，我尝试了 qTranslate 短代码和`<!--:lang--><!--:-->`标签，但它们在那里不起作用。此外，我猜直接将阿拉伯语写入 HTML 并不是一个好主意。

# openssl - 开始使用 Openssl 获取证书

> ID：13708597
> 
> 赞同：1
> 
> 时间：2012-12-04T17:31:37.580
> 
> 标签：openssl, certificate, ssl-certificate, openssh, pki

我正在为 .NET 中的公钥基础结构创建一个模拟。我在谷歌上搜索，发现 openssl 用于颁发证书和撤销东西等。我不想颁发证书以供实时使用，但这只是一个模拟。任何可以指导我了解哪些必要功能可以帮助我们做到这一点的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:13:01.760

命令非常简单，通过简单的google搜索即可轻松获取。整个过程的证书结构和目录结构保存在openssl.conf文件中。

根据您的要求编辑文件。如果您需要对整个 PKI 基础架构有所了解..wikipedia 是一个很好的起点..无论如何，只需尝试此链接

[http://www.sslshopper.com/article-most-common-openssl-commands.html](http://www.sslshopper.com/article-most-common-openssl-commands.html)

CA 密钥：

openssl genrsa -out private/redkey.pem 1024

创建 CA 证书：

openssl req -new -x509 -days 3650 -key private/redkey.pem -out redcacert.pem -config openssl.cnf -set_serial 0x01

用户证书：

钥匙：

openssl genrsa -out OCSP/blueuserkey.pem 1024

证书申请：

openssl req -new -key OCSP/blueuserkey.pem -out OCSP/blueuserreq.pem -config openssl.cnf

证书创建：

openssl x509 -req -in OCSP/blueuserreq.pem -extfile openssl.cnf -extensions usr_cert -CA bluecacert.pem -CAkey private/bluekey.pem -CAcreateserial -out OCSP/blueusercert.pem

撤销证书：

openssl ca -revoke OCSP/blueusercert.pem -keyfile private/bluekey.pem -cert bluecacert.pem

生成 CRL：

openssl ca -gencrl -out blue.crl -keyfile private/bluekey.pem -cert bluecacert.pem -crldays 2

# objective-c - @token 之前的 @autoreleasepool 预期表达式

> ID：13708601
> 
> 赞同：3
> 
> 时间：2012-12-04T17:32:02.137
> 
> 标签：objective-c, ios, automatic-ref-counting, nsautoreleasepool

我有一个使用 ARC 的 iOS 项目，我收到与创建应用程序的 @autoreleasepool 的方式相关的错误。

在 main.m 中，我有一小段代码，例如：

```
#import <UIKit/UIKit.h>

int main(int argc, char *argv[]) {
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, @"MyAppDelegate");
    }
} 
```

我收到错误消息：
**错误：'@'令牌之前的预期表达式**

但是，如果我恢复到创建自动释放池的旧样式：

```
#import <UIKit/UIKit.h>

int main(int argc, char *argv[]) {

    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    int retVal = UIApplicationMain(argc, argv, nil, nil);
    [pool release];
    return retVal;
} 
```

我在 IDE 中特别收到与 ARC 相关的各种错误：

1.  NSAutoreleasePool 不可用：在自动引用计数模式下不可用
2.  ARC 禁止发送“释放”的显式消息

但是，当我尝试构建时，它会成功构建。

**冲突在哪里？
如何让它使用创建自动释放池的新样式？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:34:22.013

确保您设置为使用 Clang 编译器（Apple LLVM）而不是 GCC：

![在此处输入图像描述](../Images/c91c8574aa07b04a272e99253196ea09.png)

然后将 main.m 与此类似：

```
#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

# javascript - fi.com png image... 他们是怎么做到的？

> ID：13708604
> 
> 赞同：-1
> 
> 时间：2012-12-04T17:32:14.573
> 
> 标签：javascript, png, transparent

他们如何将背景透明放在该 png 文件上？如果我在 Photoshop 中加载图像，则图像具有白色背景，但同一图像在网站上具有透明背景。

图片 [http://www.fi.com/broadway/iPad/assets/images/design/ipad.png](http://www.f-i.com/broadway/iPad/assets/images/design/ipad.png)

网站 [http://www.fi.com/broadway/iPad/](http://www.f-i.com/broadway/iPad/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:34:47.767

此图像具有透明背景。

![此图像具有透明背景](../Images/76c32e0a7516ad3be467655fecc023f5.png)

除了您的问题超出了 SO 范围之外，我建议您查看[Photoshop community 的以下线程](http://feedback.photoshop.com/photoshop_family/topics/opening_transparent_png_loses_transparency)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:44:12.593

当您在 Photoshop 中加载图像时，您能否确保透明图像下方没有白色背景层？

![在此处输入图像描述](../Images/5797e737c8f53103817c31b50bbdcdcf.png)

# java - 阻止 beanreader 解析器取消转义 <

> ID：13708608
> 
> 赞同：0
> 
> 时间：2012-12-04T17:32:40.070
> 
> 标签：java, xml, xml-parsing, betwixt

好的，我编辑了这个问题，因为我对阅读器和作者之间有了更好的理解，但是我试图阻止阅读器之间停止`&lt;`对每个元素的内部文本节点进行转义，并在它正在这样做并转换它的那一刻返回到 < 尖括号。我该如何防止这种情况。

# cursor - 为什么不显示 32 x 32 4 位 BMP 光标？

> ID：13708612
> 
> 赞同：1
> 
> 时间：2012-12-04T17:32:46.827
> 
> 标签：cursor, delphi-prism, oxygene

由于我找不到我的程序的 ZoomIn 和/或 ZoomOut 放大镜光标，我用我的编译器创建了自己的大小为 32 x 32 4bit 的光标。但是，当我将它分配给我的表单光标时，它根本不显示，而 16 x 16 4 位 BMP 光标按预期正确显示。

我是否遗漏了某些东西，或者这个尺寸现在不允许使用，还是我必须做一些事情才能让它工作？

这是它的设置方式：

```
Mainform.Cursor := new Cursor(baseDir+'\ZoomIn.Cur'); 
```

![在此处输入图像描述](../Images/404a7324dff32b28ffc1bdf18591cdbb.png)

这是我在 Windows 资源管理器中保存 32 x 32 光标文件后看到的内容。

![在此处输入图像描述](../Images/e10482618e1b8ae821a1c524b9cf236e.png)

通常，您应该在光标文件名旁边看到微小版本的光标，但我看不到。

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:44:26.143

Windows（至少是 .NET`Cursor`类）似乎不喜欢超过 1 位黑白图像的图标。

仍支持 32x32 位。我使用以下代码测试了其中一张旧`CodeGear Shared\Images\Cursors`图像，以及在 GreenFish 图标编辑器和 Visual Studio 图像编辑器（文件->新文件->光标文件）中创建的新光标：

```
method MainForm.MainForm_Load(sender: System.Object; e: System.EventArgs);
begin
  self.Cursor := new Cursor('E:\code\XHAIR1.CUR');
end; 
```

因此，将颜色深度降低到 1 位应该可以为您服务。

# java - 按下按钮后 JPanel 不显示更新

> ID：13708613
> 
> 赞同：0
> 
> 时间：2012-12-04T17:32:50.667
> 
> 标签：java, swing, awt, gridbaglayout

我有以下由一个按钮和一个 JScrollPane 组成的 JPanel。

当按下按钮时，我希望它在 JScrollPane 内的 JPanel 中添加一个新行。问题是什么都没有出现。我的代码如下，我完全被难住了。

```
// swing imports
import javax.swing.JPanel;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.JCheckBox;
import javax.swing.JButton;
import javax.swing.JScrollPane;
// awt imports
import java.awt.Color;
import java.awt.Insets;
import java.awt.BorderLayout;
import java.awt.GridBagLayout;
import java.awt.GridBagConstraints;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class DBPediaPanel extends JPanel {

    private JScrollPane scrollPane;
    private JPanel scrollContent;
    private JButton btnAcceptAll;
    private int currentRow = 0;

    public DBPediaPanel() {
        this.setLayout(new BorderLayout());
        this.setBackground(Color.BLACK);

        this.add(getScrollPane(), BorderLayout.CENTER);

        btnAcceptAll = new JButton("Add Row");
        btnAcceptAll.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                addStringToList("row " + currentRow);
                System.out.println("test");
            }
        });
        this.add(btnAcceptAll, BorderLayout.SOUTH);
    }

    private JScrollPane getScrollPane() {
        scrollContent = new JPanel(new GridBagLayout());;

        scrollPane = new JScrollPane(scrollContent);
        return scrollPane;
    }

    private GridBagConstraints createGbc(int x, int y) {
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridx = x;
        gbc.gridy = y;
        gbc.gridwidth = 1;
        gbc.gridheight = 1;

        gbc.anchor = (x == 0) ? GridBagConstraints.WEST : GridBagConstraints.EAST;
        //gbc.fill = (x == 0) ? GridBagConstraints.NONE : GridBagConstraints.HORIZONTAL;

        gbc.insets = (y == 0) ? new Insets(3, 5, 3, 5) : new Insets(0, 5, 3, 5);
        gbc.weightx = (x == 0) ? 0.1 : 1.0;
        gbc.weighty = 1.0;

        return gbc;
    }

    public void addStringToList(String str) {
        System.out.println("in addStringToList");
        System.out.println("attempting to add " + str + " to the list");

        GridBagConstraints gbc = createGbc(0, currentRow);
        scrollContent.add(new JCheckBox(), gbc);

        gbc = createGbc(1, currentRow);
        scrollContent.add(new JTextField(str), gbc);
        scrollContent.repaint();
        scrollPane.repaint();

        currentRow++;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:44:31.487

它是通过重新验证滚动内容来解决的。感谢[先生](https://stackoverflow.com/users/584862/mre)

# ado.net - ORA-06550，调用 Oracle 存储过程的参数数量或类型错误

> ID：13708614
> 
> 赞同：0
> 
> 时间：2012-12-04T17:32:50.373
> 
> 标签：ado.net, oracle10g, odp.net

我有一个存储过程，它有一个输入参数和一个输出参数，如下所示：

```
create or replace procedure worker_name (w_id in number, w_first out worker.first_name%type) is

Begin
  select first_name into w_first
  from worker
  where worker_id = w_id;
end; 
```

调用此存储过程的代码：

```
public DataTable <b>GetEmployeeName</b>(int _employeeID)
{
            ArrayList arrEmployeeName = new ArrayList();
            OracleParameter paramEmployeeId = new OracleParameter(":employeeid", _employeeID);
            arrEmployeeName.Add(paramEmployeeId);
            DataLayer obj = new DataLayer();
            DataTable tblEmployee = obj.<b>GetData</b>("macw_conv.worker_name", arrEmployeeName, "SP");

            if (tblEmployee.Rows.Count &gt; 0)
            {
                return tblEmployee;
            }
            return null;
        }

public DataTable <b>GetData</b>(string query, ArrayList parameters,string queryType)
{
            //DataTable dt = new DataTable();
            try
            {
                _con =
                    new OracleConnection(Oradb);
                _con.Open();
                _cmd = new OracleCommand(query, _con);
                if (_cmd.Connection.State == ConnectionState.Open)
                {
                    if (queryType == "SP" &amp;&amp; parameters != null)
                    {
                        _cmd.CommandType = CommandType.StoredProcedure;
                        if (parameters.Count &gt; 0)
                        {
                            foreach (OracleParameter param in parameters)
                            {
                                _cmd.Parameters.Add(param);
                            }
                        }
                    }
                }
                DataSet ds = new DataSet();
                OracleDataAdapter da = new OracleDataAdapter(_cmd);
                da.Fill(ds);
                if (ds.Tables.Count &gt; 0)
                {
                    return ds.Tables[0];
                }
                return null;
            } 
```

我想我看不到明显的错误。这是关于存储过程中的 out 参数和代码中的输出参数之间的数据类型不匹配的问题。任何形式的帮助表示赞赏。

谢谢！

我发现了这个问题：这是因为保存 out 参数的变量的数据类型没有得到正确处理。我将代码更改如下：

```
try
{
            _con = new OracleConnection(Oradb);
            _cmd = _con.CreateCommand();
            _cmd.CommandType = CommandType.StoredProcedure;
            _cmd.CommandText = "macw_conv.worker_name";

            OracleParameter inobj1 = _cmd.Parameters.Add("w_id", OracleDbType.Int32,50);
            inobj1.Direction = ParameterDirection.Input;
            inobj1.Value = _employeeID;

            OracleParameter inobj2 = _cmd.Parameters.Add("w_last", OracleDbType.Int32, 50);
            inobj2.Direction = ParameterDirection.Input;
            inobj2.Value = String.IsNullOrEmpty(_lastName) ? null : _lastName;

            OracleParameter outobj = _cmd.Parameters.Add("w_first", OracleDbType.Varchar2, 50);
            outobj.Direction = ParameterDirection.Output;
            _con.Open();
            _cmd.ExecuteNonQuery();
            _employeeName = ((OracleString) _cmd.Parameters[1].Value).ToString();
            _cmd.Dispose();
            _con.Close();
}
catch (OracleException ex)
{
    Console.WriteLine(ex.Message);
}

return _employeeName; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:25:41.990

尝试

```
public DataTable GetEmployeeName(int _employeeID)
        {
            ArrayList arrEmployeeName = new ArrayList();

            OracleParameter paramEmployeeId = new OracleParameter("employeeid", _employeeID);
            arrEmployeeName.Add(paramEmployeeId);

            OracleParameter paramEmployeeFirst = new OracleParameter("first", OracleDbType.Varchar2, ParameterDirection.Output);
            arrEmployeeName.Add(paramEmployeeFirst);

            DataLayer obj = new DataLayer();
            DataTable tblEmployee = obj.GetData("macw_conv.worker_name(:1,:2)", arrEmployeeName, "SP");
            if (tblEmployee.Rows.Count &gt; 0)
            {
                return tblEmployee;
            }
            return null;
        } 
```

# autocomplete - PrimeFaces 自动完成中的预选值

> ID：13708621
> 
> 赞同：1
> 
> 时间：2012-12-04T17:33:22.743
> 
> 标签：autocomplete, primefaces, default-value

有没有办法“组合” SelectOneManu 和 autoComplete 功能？加载表单时，我希望该输入字段显示 bean 属性的当前值，以及使用 autoComplete 选择新值的能力。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T05:17:08.597

Primefaces 已经在[自动完成组件](https://www.primefaces.org/showcase/ui/input/autoComplete.xhtml)中提供了这个。只需查看演示站点即可。通过`dropdown="true"`在自动完成菜单上添加 ，您可以启用对下拉菜单的支持。具体来说，请按照以下步骤获取结果

1.  `dropdown="true"`在您的自动完成菜单上设置。然后将 设置`completeMethod`为与您的支持 bean 上的一个方法相对应，该方法返回您希望在下拉菜单中显示的项目列表。

2.  要在自动完成组件上预设值，只需将支持 bean 中的值初始化为您想要的任何值。以下面为例。如果你有

    ```
    <p:autoComplete id="dd" dropdown="true" value="#{yourBackingBean.myVariable}" completeMethod="#{yourBackingBean.loadOptions}" /> 
    ```

    在您的支持 bean 中，您在声明期间初始化`myVariable`类型

    ```
    String myVariable = "Desired Value"; 
    ```

3.  如果您要使用复杂/POJO 类型列表填充下拉列表（并因此将`value`属性绑定到支持 bean 中的复杂类型），则需要使用[基于转换器的自动完成组件实现](https://www.primefaces.org/showcase/ui/input/autoComplete.xhtml)

# sql - SQL 错误 - 无法绑定多部分标识符

> ID：13708623
> 
> 赞同：2
> 
> 时间：2012-12-04T17:33:32.590
> 
> 标签：sql, sql-server-2008

我正在尝试以格式获取数据的水平输出

查询是：

```
SELECT RDT1.County_Name
      ,RDT1.DistributionNumber as Dist_No
      ,RDT1.Vac_Allocated
      ,RDT1.Priority,RDT2.DistributionNumber as Dist_No
      ,RDT2.Vac_Allocated as Vac_Allocated
      ,RDT3.DistributionNumber as Dist_No
      ,RDT3.Vac_Allocated as Vac_Allocated 
FROM Result_Distribution_Table AS RDT1
    ,Result_Distribution_Table AS RDT2
    ,Result_Distribution_Table AS RDT3 
WHERE RDT1.County_Name = RDT2.County_Name AND
      RDT1.DistributionNumber = 1 AND 
      RDT2.DistributionNumber = 2 AND 
      RDT3.DistributionNumber = 3 AND 
      RDT1.County_Name = RDT3.County_Name 
WHERE Solution_id= "10" 
```

当我执行这个查询时，我得到一个响应

> *消息 4104，级别 16，状态 1，行 1
> 无法绑定多部分标识符“Solution_id”。*

`Solution_id`是中的一列`Result_Distribution_Table`。

请帮助我做错了什么以及解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:14:06.737

每个查询只能有一个`WHERE`子句。还要避免使用旧式连接而不是使用`JOIN`. **注意：**`solution_id`为col填写正确的表格。

```
SELECT RDT1.County_Name
      ,RDT1.DistributionNumber as Dist_No
      ,RDT1.Vac_Allocated
      ,RDT1.Priority,RDT2.DistributionNumber as Dist_No
      ,RDT2.Vac_Allocated as Vac_Allocated
      ,RDT3.DistributionNumber as Dist_No
      ,RDT3.Vac_Allocated as Vac_Allocated 
FROM Result_Distribution_Table RDT1 JOIN  Result_Distribution_Table RDT2
      ON RDT1.County_Name = RDT2.County_Name JOIN Result_Distribution_Table RDT3 
      ON RDT1.County_Name = RDT3.County_Name
WHERE RDT1.DistributionNumber = 1 AND 
      RDT2.DistributionNumber = 2 AND 
      RDT3.DistributionNumber = 3 AND 
      [...].Solution_id= "10" 
```

**添加：**刚刚注意到您使用同一张表 3 次。**如果是这种情况**，您可以获得与以下相同的结果；

```
SELECT County_Name
          ,DistributionNumber as Dist_No
          ,Vac_Allocated
          ,Priority,RDT2.DistributionNumber as Dist_No
          ,Vac_Allocated as Vac_Allocated
          ,DistributionNumber as Dist_No
          ,Vac_Allocated as Vac_Allocated 
FROM Result_Distribution_Table 
WHERE DistributionNumber IN (1,2,3) AND
          Solution_id= "10" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T09:23:51.393

问题是因为查询中没有表：

您似乎忘记在查询中包含该表。

# php - 你如何从 ssh 运行一个 php 文件？

> ID：13708626
> 
> 赞同：7
> 
> 时间：2012-12-04T17:33:42.450
> 
> 标签：php, linux, ssh

我从 ssh 使用：

```
php filename.php 
```

并且效果很好，但是当我这样做时：

```
php filename.php?id=2 
```

我收到“无法打开输入文件”错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T17:37:40.723

您不能通过命令行传递 GET 变量！！如果您需要将变量传递给您的脚本，您可以在您的 PHP 代码中使用`php filename.php your_variable`和使用。`$argv``$argc`

*   [http://php.net/manual/es/reserved.variables.argc.php](http://php.net/manual/es/reserved.variables.argc.php)
*   [http://php.net/manual/es/reserved.variables.argv.php](http://php.net/manual/es/reserved.variables.argv.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:36:35.590

该`filename.php?id=2`语法仅适用于 Web 服务器。

您所做的是告诉外壳程序找到一个名为的文件并将`filename.php?id=2`其传递给 PHP，但该文件不存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T17:36:22.370

编写为网站的 PHP 文件在 CLI 上的用途有限。

您可以编写一个包装脚本，用于准备超全局变量和`include`网页脚本。

我建议阅读[CLI 界面](http://php.net/cli)以了解它的作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T17:38:04.343

您需要将参数作为参数传递并使用 $argv：

```
<?php
var_dump($argv);
?> 
```

[http://php.net/manual/en/reserved.variables.argv.php](http://php.net/manual/en/reserved.variables.argv.php)

# linq - EAV - 使用 Linq 到实体获取价值

> ID：13708627
> 
> 赞同：0
> 
> 时间：2012-12-04T17:33:45.257
> 
> 标签：linq, entity-framework, linq-to-entities, entity-attribute-value

在这样的数据模型（[http://alanstorm.com/2009/img/magento-book/eav.png](http://alanstorm.com/2009/img/magento-book/eav.png)）中，我想使用 Linq to SQL 从 EAV_Attribute 中获取值。

![在此处输入图像描述](../Images/3602a224fbe064a6e3de0851ac63727f.png)

假设 EAV_Attribute 仅存在于一个继承表（varchar、decimal、int 等）中，我如何在 linq 查询中获取它？

我知道我可以为此使用继承，但我想在 SQL 数据库端执行它......

考虑到元素具有不同的类型，是否可以在 Linq 中进行一种合并？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:24:39.170

首先，我建议对 EAV 表使用 TPH 而不是 TPT。（一个表有多个可空值列（每种类型一个）+ 鉴别器与每种类型一个表。）

无论哪种方式，如果您将值实体建模为一个抽象类（包含两个 ID），每个值数据类型都有一个继承实体，添加了 value 属性，那么您的 LINQ 应该如下所示：

```
var valueEntity = context.ProductAttributes.Where(pa =>
        pa.ProductId == selectedProductId
        && pa.AttributeTypeId == selectedAttributeTypeId)
    .SingleOrDefault() as ProductAttributeOfDouble;

if valueEntity != null
    return valueEntity.Value;

return null; 
```

其中实体类型为：Product、AttributeType、ProductAttribute、ProductAttributeOfDouble、... ProductAttributeOfString。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:03:32.003

EAV 和 linq 的婚姻并不幸福。我认为你最好的办法是创建一个未映射的属性，从它的类型属性子项`eav_attribute`中解析值（as ）。`object`使用实体框架，您将无法在表达式中使用此属性（即不在 a `Where`or中`Select`），您必须先转换为`IEnumerable`才能访问它。（Linq-to-sql 可能允许它，因为它可以在底层切换到 linq-to-objects）。

[`sql_variant`](http://msdn.microsoft.com/en-us/library/ms173829.aspx)另一种选择是创建一个类型相同的计算列，但现在在 t-sql 代码中。但是... EF 不支持`sql_variant`. 你必须使用[一些技巧](http://www.codeproject.com/Articles/137509/Reading-sql_variant-in-Entity-Framework)来阅读它。

那就是阅读部分。

对于设置/修改/删除值，我没有看到任何快捷方式。您只需将对象作为具有父母和孩子的任何对象图来处理。在 sql server 中，您不能使用级联删除，因为它只能为一个外键定义。（[这](https://stackoverflow.com/q/5018099/861716)可能会解决这个问题，但我从未尝试过）。

所以，恐怕不是什么好消息。也许很高兴知道在一个项目中，我还使用具有不可避免的 EAV 部分的数据库。我们也使用 EF 来做到这一点，但并非没有摩擦。

# php - 为什么新 PDO 会在以下内容上引发错误？

> ID：13708630
> 
> 赞同：0
> 
> 时间：2012-12-04T17:34:08.277
> 
> 标签：php, pdo

我有以下配置。

```
private $host = '127.0.0.1';
    private $db = 'loginexample';
    private $dbusername = 'root';
    private $dbpass = 'root';

$this->conn = new PDO("mysql:host={$host};dbname={$db};charset=utf8", $dbusername, $dbpass); 
```

**但如果我这样做**

```
$this->conn = new PDO("mysql:host={$host};dbname=loginexample;charset=utf8", root, root); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:35:46.930

您的变量是私有类属性，因此您需要`$this`在所有这些属性上使用：

```
private $host = '127.0.0.1';
private $db = 'loginexample';
private $dbusername = 'root';
private $dbpass = 'root';

$this->conn = new PDO("mysql:host={$this->host};dbname={$this->db};charset=utf8", $this->dbusername, $this->dbpass); 
```

当您插入文字值时，它会连接（希望您的密码不是`root`）。并且因为`$host`未定义（因此`NULL`，它默认为驱动程序的默认值，即`localhost`（或`127.0.0.1`）。

似乎您可能没有启用 error_reporting，因为您会看到未定义变量的通知。

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

# php - 链接和路由问题

> ID：13708631
> 
> 赞同：1
> 
> 时间：2012-12-04T17:34:22.383
> 
> 标签：php, cakephp, url-routing

在我看来，我有以下链接：

```
<?php echo $this->Html->link($article['Article']['title'],  array('category' => $article['Page']['Category']['directory'], 'page' => $article['Article']['page_id'],  $article['Article']['id'])); ?> 
```

我希望链接输出：**http ://example.com/shows/3/articles/6**

我的路线如下所示：

```
Router::connect(
    '/:category/:page/:controller/:id',
    array('action' => 'view'),
    array(
        'pass' => array('id'),
        'page' => '[0-9]+',
        'id' => '[0-9]+',
         'category' => 'shows|music|games|books|hobbies',
    )
); 
```

相反，我的链接返回如下： **http ://example.com/articles/6/category:shows/page:3**

如何在不使用绝对 URL 的情况下使其正确显示？这是我的路由、视图、链接 HTML Helper 还是这 3 个组合的问题？我认为问题在于链接帮助程序如何解析 URL，但我不确定如何更改它。

如果我在浏览器中手动输入网址[http://example.com/shows/3/articles/16](http://example.com/shows/3/articles/16)，则会显示正确的页面。

我查看了命名参数，但这似乎也没有完成我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:25:00.290

您需要将所有参数包含在`pass`.

所以你的路线应该是这样的，

```
Router::connect(
    '/:category/:page/:controller/:id',
    array('action' => 'view'),
    array(
        'pass' => array('category','page','id'), // added all passed params here
        'category' => 'shows|music|games|books|hobbies'
        'page' => '[0-9]+',
        'id' => '[0-9]+'
        // Just re-ordered to match your route ;)
    )
); 
```

# tomcat7 - Tomcat 与 Maven 插件部署的版本号的战争

> ID：13708632
> 
> 赞同：0
> 
> 时间：2012-12-04T17:34:23.313
> 
> 标签：tomcat7, war, maven-tomcat-plugin

我使用maven3部署到tomcat7，在这个过程中，它用版本号构建了war，当maven插件部署它时，版本号不再是war的一部分，并且我设置的路径正常工作（所有这按预期工作，没有问题）。我用于部署的插件是 groupId "org.codehaus.mojo"

我的问题是这是如何发生的，因为当我手动部署带有版本号的战争时，我需要复制这个过程。我想要删除版本号，并且我想设置一个路径，而不是战争名称。

寻求帮助来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:31:57.543

在 pom 中使用元素。并移至该插件的新版本，该插件现在位于 Apache [http://tomcat.apache.org/maven-plugin.html](http://tomcat.apache.org/maven-plugin.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-27T14:10:39.893

我找到了解决方案并将其签入[https://github.com/vipup/java-maven-war-example](https://github.com/vipup/java-maven-war-example)。[感谢SO_Answer](https://stackoverflow.com/questions/6347326/web-app-version-in-tomcat-manager)的很多建议。

简而言之：deployment_URL 应该包含 deploy-WAR 的版本。然后Tomcat总是正确地处理它。我在项目中添加了将版本设置为命令行参数的可能性。

所以，试试：

```
# mvn tomcat:redeploy -DtheBN4tomcat=HALILUJA 
```

# wpf - 以编程方式在 WPF 中绑定图像的画布点

> ID：13708633
> 
> 赞同：0
> 
> 时间：2012-12-04T17:34:23.663
> 
> 标签：wpf, vb.net, image, binding, canvas

在我的程序中，我正在动态创建要添加到 WPF 窗口中的画布中的图像。我的问题是：如何将 canvas.left 和 canvas.right 点绑定到类属性。

如果图像在运行时之前存在，我会在 XAML/WPF 中像这样制作和绑定它：

```
<Image Height="26" HorizontalAlignment="Left" Canvas.Left="{Binding left}" Canvas.Top="{Binding top}" Name="Image1" Stretch="Fill" VerticalAlignment="Top" Width="28" Source="/imageTest;component/Images/blue-pin-md.png" /> 
```

我在 VB.net 中有什么：

```
'Create array of images
Dim myImages(5) as myImage

For i = 0 to myImages.count - 1
   myImages(i) = New myImage
   'set datacontext if I can bind
   myImages(i).image.DataContext = myImages(i)
   canvas1.Children.Add(myImages(i).image)
Next 
```

我的图像类：

```
Imports System.ComponentModel

Public Class myImage
    Implements INotifyPropertyChanged

    Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged

    Private Sub NotifyPropertyChanged(ByVal info As String)
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(info))
    End Sub

    Private Property _image as New Image
    Private Property _left As Double
    Private Property _top As Double
    Private Shared Property r As New Random()

    Public Sub New()
        _image.Width = 28
        _image.Height = 26
        _image.Source = New System.Windows.Media.Imaging.BitmapImage(New Uri("/imageTest;component/Images/blue-pin-md.png", UriKind.Relative))
        'the below works without binding if I just want to set and leave them in one place but I would like to bind them so that I can move them relative to other data
        '_left = r.Next(0, System.Windows.SystemParameters.PrimaryScreenWidth)
        '_top = r.Next(0, System.Windows.SystemParameters.PrimaryScreenHeight)
    End Sub

    Public ReadOnly Property image As Image
        Get
            Return _image
        End Get
    End Property

    Public ReadOnly Property left As Double
        Get
            Return _left
        End Get
    End Property

    Public ReadOnly Property top As Double
        Get
            Return _top
        End Get
    End Property

    'a possible move method that would take advantage of the binding
    Public Sub move()
        _top += 1
        _left += 1
        NotifyPropertyChanged("left")
        NotifyPropertyChanged("top")
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:50:35.723

不知道如何在 VB 中编写它，但在 C# 中它看起来像这样：

```
var leftBinding = new Binding
{
    Path = new PropertyPath("left"),
    Source = myImages[i]
};
var topBinding = new Binding
{
    Path = new PropertyPath("top"),
    Source = myImages[i]
};
myImages[i].image.SetBinding(Canvas.LeftProperty, leftBinding);
myImages[i].image.SetBinding(Canvas.TopProperty, topBinding); 
```

或者更简单，使用 DataContext：

```
myImages[i].image.DataContext = myImages[i];
myImages[i].image.SetBinding(Canvas.LeftProperty, "left");
myImages[i].image.SetBinding(Canvas.TopProperty, "top"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:57:41.120

多亏了 Clemens C# 代码，我才能让它工作。下面是我使用的代码。.SetBindings( *,* ) 对我来说是关键。

```
For i = 0 To myImages.Count - 1
    myImages(i) = New myImage
    myImages(i).image.DataContext = myImages(i)
    myImages(i).image.SetBinding(Canvas.LeftProperty, "left")
    myImages(i).image.SetBinding(Canvas.TopProperty, "top")
    canvas1.Children.Add(myImages(i).image)
Next 
```

# date - 在 Liferay 6 GA2 中使用 Velocity 模板语言将字符串转换为日期

> ID：13708637
> 
> 赞同：1
> 
> 时间：2012-12-04T17:34:41.870
> 
> 标签：date, velocity, liferay-6, liferay-velocity, web-content

我在 Liferay 6 GA2 Web 内容模板中将字符串转换为日期对象时遇到问题。

我已经尝试使用可用的工具（[Liferay 中的访问对象](http://www.liferay.com/community/wiki/-/wiki/Main/Access+Objects+from+Velocity)）

我什至尝试过导入 Java 类，例如：

```
#set ($foo = "2012-12-06")
#set ($bar = $portal.getClass().forName('java.text.SimpleDateFormat'))
$bar.parse($foo) 
```

到目前为止没有任何效果。有任何想法吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:10:57.970

```
#set($foo="20121206")
#set($format=$dateUtil.getISOFormat($foo))
$format.parse($foo) 
```

# c - 严格的别名规则，误报还是误报？

> ID：13708639
> 
> 赞同：2
> 
> 时间：2012-12-04T17:34:44.213
> 
> 标签：c, gcc-warning, strict-aliasing

我在 C 中遇到严格别名问题。我使用的是 GCC 4.7.1。

示例 1：
当使用 -fstrict-aliasing -Wstrict-aliasing=3 编译此代码时，我收到“警告：取消引用类型双关指针将破坏严格别名规则”

```
#include <stdio.h>
#include <stdint.h>

int main(void)
{
    uint8_t a[4] = {0x01, 0x23, 0x45, 0x67};
    uint32_t b;

    b = *(uint32_t *)a;

    printf("%x\n", b);

    return(0);
} 
```

示例 2：
此代码在使用 -fstrict-aliasing 和 -Wstrict-aliasing=3 或 -Wstrict-aliasing=2 或 -Wstrict-aliasing=1 时不会发出警告

```
#include <stdio.h>
#include <stdint.h>

int main(void)
{
    uint8_t a[4] = {0x01, 0x23, 0x45, 0x67};
    uint32_t b;
    void *p;

    p = a;
    b = *(uint32_t *)p;

    printf("%x\n", b);

    return(0);
} 
```

这两个示例都可以正常工作。

使用 union 也是未定义的行为，在我的情况下使用 memcpy() 太慢了。
那么，第一个示例是安全的（误报）还是第二个示例也是不安全的（误报）还是...？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T17:41:18.350

如果您想`uint32_t`从 4制造 a `uint8_t`，那么就这样做：**制造**它。不要试图从不是指针转换的东西中拉出一个。根据您的平台是小端还是大端，您提供的代码的结果会有所不同，更不用说它完全错误了。

他们俩*都很*坏。无论如何，提供的两个样本都不安全。此类强制转换绕过了数据对齐要求。如果您正在投射“to”的任何东西都需要比您正在投射“from”的任何东西更具限制性的对齐方式，那么您就会引发总线错误。注意最初的警告。指向无效的中间指针只是掩盖了问题（就像它对大多数问题所做的那样）。

您想*知道*构建时哪个字节“在哪里” `uin32_t`。

```
uint8_t a[4] = {0x01, 0x23, 0x45, 0x67};
uint32_t b = ((uint32_t)a[0] << 24) |
             ((uint32_t)a[1] << 16) |
             ((uint32_t)a[2] << 8) |
             (uint32_t)a[3]; 
```

这将*始终*将 a[0] 字节放在目标 32 位无符号的高字节中，将 a[1] 放在下一个字节中，依此类推，无论字节顺序如何。`b`永远*都是*`0x01234567`。_

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T17:37:56.197

我想说第二个例子也是不安全的 - 只是编译器不够聪明，无法发现它`p`并`a`实际上指向相同的（1字节对齐）位置，并且因为`void *`无法对齐（根据定义- 会是`sizeof(void)`什么？），它不会发出警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T17:58:02.350

在这两种情况下，您都`uint8_t`通过另一种类型 ( `uint32_t`) 访问数组元素 (type )，该类型不是原始类型的有符号变体，也不是字符类型。

C 表示您必须通过对象自己的类型或签名变体或字符类型来访问对象，否则您将违反别名规则。

# ajax - Codeigniter 未在 jQuery 发送上检测到表单

> ID：13708643
> 
> 赞同：1
> 
> 时间：2012-12-04T17:34:53.677
> 
> 标签：ajax, codeigniter, validation

我在这里有点疯狂，因为我对正在发生的事情一无所知。经过大量的挖掘，我相信我正在做所有应该做的事情。

### 情况

我正在尝试通过 AJAX 将用户创建表单发送到服务器，而 codeIgniter 甚至无法通过这部分

`if($this->input->post('blnAjax')) { // do something }` 我已经成功地将 AJAX 方面的东西整合到客户端中，因为它从服务器获取内容几乎没有问题。以下是通话中涉及的一些细节：

### 阿贾克斯代码

ajax 代码是超出此问题范围的更大框架的一部分，但就实际调用函数而言，事件必须`event.preventDefault(); event.stopImmediatePropagation();`阻止它运行。URL 是可访问的，并且 post 值已被序列化，请求类型设置为 POST

```
requestpage: function(){
    var strURL = params.strBaseURL + params.strRequestURL;
    $.ajax({
        type: params.strRequestMethod,
        url: strURL,
        data: params.strRequestParameters,
        dataType: 'json',
        success: function(json) {
            methods.postrequestprocedure(json);
        }  
    });
}, 
```

### 阿贾克斯请求

一切都在客户端上顺利运行，使带有 json 的 XMLHttpRequest 按预期返回。但是，当表单已提交时，我什至没有达到这一点。如果使用 AJAX，Codeigniter 永远不会认为表单已经设置

```
Parameters application/x-www-form-urlencoded
blnAjax 1
user_login_name[]   fred
user_login_name[]   ted
user_name[] Fred Flintstone
user_name[] Ted bear
usergroup_id[]  16
usergroup_id[]  16 
```

### 控制器

在控制器上，关于操作，我已经包含了直到失败点的所有代码。请注意，我已经测试了代码的其他方面并且它们运行良好

```
public function user_add() {
/* Include extra script files needed for form handling */
$this->view['aryScript'][] = 'jquery.validate.min';
$this->view['aryScript'][] = 'jquery.validate.additional-methods';

/* Include extra CSS files */
$this->view['aryCSS'][] = 'form';
/* First check if the user has correct access rights */
if($this->view['intAccessLevel'] < INT_SUPER_USER_ACCESS_LEVEL) {
    $aryResponse['notifications'][] = array('strType' => 'permanent',
                                        'strMessage' => 'Denied!');
}

/* Import extra libraries and helpers */
$this->load->library(array('PasswordHash'));
$this->load->model('UserAdminModel');

$this->view['strTitle'] = 'Add User';
$this->view['aryButtons']['user_add_another'] = array(
     'strDisplay' => $this->lang->line('user_add_another')
     'strURL' => '#',
     'strID' => 'user_add_another',
     'aryData' => array('action' => 'form-clone')
);

if($this->input->post('blnAjax')) {
    echo 'Big sigh of relief'; 
```

感谢您花时间阅读我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:26:16.853

答案从来没有看起来那么简单！我的客户端正在使用 CodeIgniter 模块来重写 URI，从而转储从 ajax 查询传递的数据。执行获取和“真实” POST 查询时没有问题。

因此，如果您曾经使用过[Wiredesignz - 语言标识符](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/src/b9b2a91d2a89/third_party/MX/Language_Identifier.php)，请注意它会影响您的查询

我如何修复它，我使用自定义页面控制器，但理论是一样的：

*   确保您`$this->config->item('language_abbr');`可以通过常量使用您的 javascript 函数，或者如果在同一页面上直接将其回显到 javascript 中
*   在发送之前修改 URL，使用类似于`params.strBaseURL + params.strLanguage + '/' + params.strRequestURL;`

您现在应该会发现一切正常。我希望这会有所帮助，没有其他人需要花一小段时间来找出答案

# svg - 如何在动画之后/期间应用剪辑路径？

> ID：13708647
> 
> 赞同：0
> 
> 时间：2012-12-04T17:35:01.280
> 
> 标签：svg, d3.js

我在 SVG 中有一条路径定义了一个 clipPath。线（刻度线）被绘制并剪裁到路径。

当我对线条进行动画处理时，它们会保留原始剪辑。我希望它们在动画的每个阶段都被“重新剪辑”。

**问题**：有没有一种简单的方法可以在过渡期间执行剪辑？

示例问题代码：http: [//jsfiddle.net/Q29TA/](http://jsfiddle.net/Q29TA/)

当您单击 svg 时，它会演示动画。

相关片段：

```
d3.select( "#g-container" )
  .selectAll( "line" )
  .data( y.ticks( 10 ) )
  .enter()
    .append( "line" )
    .attr( "x1", 0 ).attr( "x2", width )
    .attr( "y1", y ).attr( "y2", y )
    .attr( "class", "tick-marks" )
    .attr( "clip-path", "url(#myclip)" );​

d3.select( "svg" )          
    .on("click", function() {
       d3.selectAll(".tick-marks")
          .transition().duration( 2500 )
          .attr( "transform", "translate(0,30)" )
    } ) 
```

我对这样做的新方法持开放态度，但我无法对重新计算线的 x1 和 x2 的动画进行硬编码，因为 clipPath 可以是任何东西。

显示动画后果的示例图片（我希望水平线与容器的蓝色对角线相交）： ![在此处输入图像描述](../Images/51fb6c7931a150eb1a59e13d8109f1d9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:42:58.973

最好使用单个剪辑路径，只需将`clip-path`向上移动到容器`g`元素即可：

[http://jsfiddle.net/dxZyq/](http://jsfiddle.net/dxZyq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:31:50.763

因此（正如您所发现的），剪切路径似乎忽略了元素的`transform`属性。如果你在创建元素时应用你的变换，你可以看到它也在发生——即使没有动画：

```
.enter()
  .append( "line" )
  .attr( "transform", "translate(0,30)" )// <-- Same, "wrong" (i.e. undesired) clipping
  .attr( "x1", 0 ).attr( "x2", width )
  .attr( "y1", y ).attr( "y2", y )
  .attr( "class", "tick-marks" )
  .attr( "clip-path", "url(#myclip)" );​ 
```

从混乱中，我发现解决此问题的一种方法是将所有需要移动的元素分组并仅翻译组。你可以在这里看到：http: [//jsfiddle.net/Q29TA/2/](http://jsfiddle.net/Q29TA/2/)（注意，我只是翻译你创建的组，其中也有蓝色路径，所以不太正确）。

解决它的另一种方法是不应用变换，而是通过动画它们来移动线条`y1`和：http `y2`: [//jsfiddle.net/Q29TA/1/](http://jsfiddle.net/Q29TA/1/)

# java - 解析 CSV 并显示到 textview

> ID：13708657
> 
> 赞同：-2
> 
> 时间：2012-12-04T17:35:59.000
> 
> 标签：java, android, csv, textview

我有一个 CVS 文件。我希望我的 android 应用程序能够读取它并在 textview 中显示它。你能给我一个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:11:45.100

很久以前我已经做了这些方法，因为 Scanner 不适合我：

```
public ArrayList<String> readFileLines(File file)
{
    ArrayList<String> lines = new ArrayList<String>();
    String line;
    BufferedReader br = null;

    try
    {
        br = new BufferedReader(new FileReader(file));

        while ( (line = br.readLine()) != null)
        {
            lines.add(line);
        }
    }
    catch (Exception e )
    {
        System.out.println("Cannot open file to read: " + e);
    }
    finally
    {
        try
        {
            br.close();
        }
        catch (IOException ex)
        {
            System.out.println("Cannot close file after saving: " + ex);
        }
    }

    return lines;
} 
```

用法：

```
 for (String line: readFileLines(new File("file.csv")))
    {
        String[] values = line.split(";");
        // values[0] would be first value of line, values[1] would be second etc.
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:49:48.597

您可以使用扫描仪：

```
Scanner scanner = new Scanner(new File("file.csv");
String s = "";
while(scanner.hasNextLine());
    s+=scanner.nextLine();
String[] values = s.split(","); 
```

这是一个 2n 的过程，如果你想用 substring 到处乱搞，你可能会把它降到 n

这里是将它添加到 textview

```
for(int i = 0; i < values.length; i++){
    TextView t = new TextView(getApplicationContext());
    t.setText(values[i]);
    layout.addView(t);
} 
```

您可以在 xml 中添加布局，也可以使用 setContentView(layout); 在代码本身中添加布局；

您也可以通过执行来使用布局参数

```
 YourLayoutType.layoutParams params = new YourLayoutType.layoutParams(LayoutParams.whatLayoutTypeYouWant, LayoutParams.whatLayoutTypeYouWant); //(it goes width, height). 
```

然后将它们用于您的布局

```
layout.setLayoutParams(params); 
```

注意：所有这些代码都应该在活动代码文件中。

# ios - 以编程方式获取故事板 ID？

> ID：13708660
> 
> 赞同：74
> 
> 时间：2012-12-04T17:36:06.373
> 
> 标签：ios, objective-c, xcode, storyboard, identity

尝试查看 UIViewController 或 UIView 是否可以识别其 Storyboard ID。所以希望：

```
UIViewController *aViewController;
NSString *storyboardID = aViewController.storyboard.id;  //not an actual property 
```

或者：

```
NSString *storyboardID = [aViewController.storyboard valueForKey:@"storyboardId"];  //also not a working call 
```

但是没有喜悦，也无法在网上找到类似的解决方案。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-04-24T17:00:40.880

您可以使用 restoreIdentifier，它位于 Storyboard 标识符的正上方，是一个 UIViewController 属性。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2014-04-22T20:27:23.483

您可以使用恢复 ID：

```
NSString *restorationId = self.restorationIdentifier; 
```

只需选中“使用情节提要 ID”复选框

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-12-04T17:48:14.340

故事板 id 仅用于从故事板中查找和实例化 VC。如 UIStoryboard 参考中所写：

“此标识符不是视图控制器对象本身的属性，仅由情节提要文件用于定位视图控制器。”

你为什么需要它？

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-11-15T14:18:52.670

你也可以尝试做这样的事情： -

```
NSString *storyboardId = [viewController valueForKey:@"storyboardIdentifier"]; 
```

这将准确地为您提供您通过界面构建​​器设置的故事板 ID。

快速扩展：

```
extension UIViewController {
    var storyboardId: String { 
        return value(forKey: "storyboardIdentifier") as? String
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-12T00:10:06.503

返回 UIViewController 或 UIView 的“id”最可靠的方法是......

```
NSString *viewControllerName = [[NSString alloc] initWithString:viewController.nibName]; 
```

这将返回...“29w-Ic-LNo-view-FDu-oq-UpZ”，其中“29w-Ic-LNo”是 UIViewController 的对象 ID，“FDu-oq-UpZ”是对象 ID界面视图。

但是，您也可以使用...

```
NSString *viewControllerName = [[NSString alloc] initWithString:viewController.title]; 
```

这将在属性检查器中返回 UIViewController 的“标题”；因此，就像您将 Storyboard ID 添加到 UIViewController 一样容易，您也可以添加标题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-20T09:31:48.147

您可以与 class name 进行比较。导入类，然后尝试。

```
NSArray *viewControllers = self.navigationController.viewControllers;
UIViewController *root = [viewControllers objectAtIndex:0];
if ([root isKindOfClass:[UserLogin class]]) {
//--- do ---
} 
```

# c++ - 如何在没有Z-fighting的情况下在OpenGL中绘制一条线

> ID：13708661
> 
> 赞同：6
> 
> 时间：2012-12-04T17:36:07.050
> 
> 标签：c++, opengl, gpu

我有以下问题。虽然`glPolygonOffset`非常适合网格，例如当我尝试在对象顶部绘制线框轮廓时，它不适用于简单的线条。

以下是它对网格的工作原理：

```
// draw object  
mTexture.enableAndBind();
gl::color( Colorf( 1, 1, 1 ) );
gl::draw( mVboMesh );
mTexture.unbind();

// overlay wireframe
gl::enableWireframe();
glLineWidth(1);
glEnable( GL_POLYGON_OFFSET_LINE );
glPolygonOffset( -1, -1 );
glColor3f( 0, 0, 1 );
gl::draw( mVboMesh );
glDisable( GL_POLYGON_OFFSET_LINE );
gl::disableWireframe(); 
```

![网](../Images/af79f98e06c7cc052266bc866369e73c.png)

出于某种原因，它不适用于线路。我想要实现的是在网格上绘制坐标框架的箭头。我正在使用与`GL_POLYGON_OFFSET_LINE`绘制线条时相同的模式，就像我在对象上绘制线框一样。但是，在这种情况下`glPolygonOffset( -1, -1 );`，绝对没有区别。我已经尝试过像 100 这样的巨大值，它是一样的。完全没有效果。这是我正在做的事情：

```
// enable 3D rendering
gl::enable( GL_CULL_FACE );
gl::enableDepthRead();
gl::enableDepthWrite();

// drawing the grid
int size = 2000;
int step = 25;
gl::color( Colorf( 0.2f, 0.2f, 0.2f ) );
for( float i = -size; i <= size; i += step )
{
    glBegin( GL_LINES );
    glVertex3f( i, 0, -size );
    glVertex3f( i, 0, size );
    glVertex3f( -size, 0, i );
    glVertex3f( size, 0, i );
    glEnd( );
}

// drawing the arrows
glEnable( GL_POLYGON_OFFSET_LINE );
glPolygonOffset( -1, -1 );

glBegin( GL_LINES );
gl::color( Colorf( 1, 0, 0 ) );
glVertex3f( 0, 0, 0 );
glVertex3f( 100, 0, 0 );
gl::color( Colorf( 0, 1, 0 ) );
glVertex3f( 0, 0, 0 );
glVertex3f( 0, 100, 0 );
gl::color( Colorf( 0, 0, 1 ) );
glVertex3f( 0, 0, 0 );
glVertex3f( 0, 0, 100 );
glEnd( );

glDisable( GL_POLYGON_OFFSET_LINE );

// disable 3D rendering
gl::disableDepthWrite();
gl::disableDepthRead();
gl::disable( GL_CULL_FACE ); 
```

以及我得到的 Z 战斗示例：

![线条](../Images/87d8dd4466a8a3cba8a0c6abd9486a66.png)

我尝试过的一种技巧并且效果很好的是：

1.  禁用深度读取，启用深度写入
2.  绘制网格
3.  画箭头
4.  启用深度读取
5.  绘制其他对象

然而，这是一个非常特殊的情况，虽然它适用于平面网格和箭头，但它几乎不适用于具有复杂形状的其他任何东西。

我的问题是：

1.  **为什么 glPolygonOffset 不适**用于在线线，而它适用于多边形线？
2.  **我怎样才能解决它**，而不诉诸上述黑客，只有在非常特定的情况下才有效？

*// 我正在使用 Cinder 作为框架，但这并不重要，因为我使用的是原始 OpenGL 命令*

**更新**

我已经检查了第一条评论中的答案，并尝试了该方法，但是该方法也不起作用，因为结果取决于与相机的距离。

```
//// draw coordinate frame and grid
glDepthRange (0.01, 1.0);
drawGrid( 2000.0f, 25.0f );
glDepthRange (0.0, 0.99);   
gl::drawCoordinateFrame( 100.0f, 5.0f, 2.0f );

glDepthRange (0.0, 1.0);

// draw object 
```

![混合](../Images/5d84655177a3a9ee6c9ef637e9cf791e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:12:16.860

我想一个技巧可能是把线画得离视点更近一点（比如说更接近 0.1）。这应该避免z-fighting。

为此，您需要计算从您的点到 POV 位置的归一化方向矢量。然后你用一个小因子缩放它，并将它添加到你的线点坐标

# macros - Clojure var 定义宏

> ID：13708662
> 
> 赞同：5
> 
> 时间：2012-12-04T17:36:17.447
> 
> 标签：macros, clojure

我只是特别学习宏和clojure宏，我很好奇是否可以做这样的事情：

```
(defmacro with-a=hello [f]
  `(let [a "hello"] ~f))

(with-a=hello (println a)) 
```

这对我不起作用并引发错误：`CompilerException java.lang.RuntimeException: Can't let qualified name: user/a, compiling:(NO_SOURCE_PATH:1)`

正如我现在所理解的那样，*scheme*的*定义语法*允许做这样的事情，但是有 clojure 方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T17:41:16.033

默认情况下，语法引用形式```防止在宏中引入未命名空间的符号和符号捕获。当您有意这样做时，您可以使用序列`~'`将非限定符号引入宏。

```
 (defmacro with-a=hello [f]
    `(let [~'a "hello"] ~f))

user> (with-a=hello (println a))
hello
nil 
```

执行此操作的宏具有花哨的名称照应宏

# actionbarsherlock - ActionBarSherlock maven 依赖项

> ID：13708663
> 
> 赞同：5
> 
> 时间：2012-12-04T17:36:21.497
> 
> 标签：actionbarsherlock

我一直在尝试使用 ActionbarSherlock maven 依赖项添加到我的项目中

```
<dependency>
    <groupId>com.actionbarsherlock</groupId>
    <artifactId>library</artifactId>
    <version>4.2.0</version>
</dependency> 
```

在我的 pom.xml 文件中。现在，除了我的 styles.xml 文件，它似乎没有 abs 样式，但其他一切正常吗？我究竟做错了什么。下面是完整的 pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.xyz</groupId>
    <artifactId>abc</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>apk</packaging>
    <name>abc Android Application</name>

    <dependencies>
        <dependency>
            <groupId>org.springframework.android</groupId>
            <artifactId>spring-android-rest-template</artifactId>
            <version>1.0.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.8</version>
        </dependency>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>4.1.1.4</version>
            <scope>provided</scope>
        </dependency>

    </dependencies>
    <build>
        <finalName>${project.artifactId}</finalName>
        <sourceDirectory>src/main/java</sourceDirectory>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>3.0.0</version>
                    <extensions>true</extensions>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <configuration>
                    <sdk>
                        <platform>16</platform>
                    </sdk>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T00:58:45.280

ActionBarSherlock 是一个库项目，这意味着您需要`<type>apklib</type>`在 Maven 依赖声明中添加一个。

```
<dependency>
  <groupId>com.actionbarsherlock</groupId>
  <artifactId>actionbarsherlock</artifactId>
  <version>4.2.0</version>
  <type>apklib</type>
</dependency> 
```

*（请注意，我也将其更改`artifactId`为“actionbarsherlock”）*

为了做到这一点，您需要`android-maven-plugin`引用 with `<extensions>true</extensions>`。看起来您已经从粘贴的`pom.xml`.

# sql - SQL比较表中的记录（状态变化）

> ID：13708665
> 
> 赞同：1
> 
> 时间：2012-12-04T17:36:22.940
> 
> 标签：sql, teradata

我有一张包含索赔历史的表格。基本上我正在查看状态变化和日期。每当有人更新声明时，新行就会加载到我在下面显示的表格中。我想要获取的是列“c_sta_clm”的所有状态更改，我希望能够捕获日期“row_begin_dt”以及状态更改（PC 到 AC）和（AC 到 TE）。

非常感谢任何有关如何使这个简单的指导。我正在考虑制作两个易失性表并加入 C_CLM，获取最小状态日期并进行比较等...

```
row_begin_dt                user                    c_clm          c_sta_clm
2009-10-08  ?       C5S2M                         09050012            PC
2009-10-24  ?       C5S2M                         09050012            AC
2009-10-28  ?       C1CMH                         09050012            AC
2010-10-30  ?       C1CMH                         09050012            AC
2011-05-19  ?       A9709                         09050012            AC
2011-06-09  ?       C6JEC                         09050012            AC
2011-10-07  ?       DAJ07                         09050012            TE
2011-11-04  ?       DAJ07                         0905001             TE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:06:21.820

这应该为您提供 2009-10-24 和 2011-10-07 的记录。

```
select
    row_begin_dt,
    user,
    c_clm,
    c_sta_clm,
    -- Find the c_sta_clm of the previous row
    max(c_sta_clm) over (partition by c_clm order by row_begin_dt rows between 1 preceding and 1 preceding) as prev_c_sta_clm
from claims
-- Include only records which have a c_sta_clm different to that of the previous row
qualify c_sta_clm <> prev_c_sta_clm 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:43:09.257

一种通用的方法是使用相关子查询：

```
select
from (select c.*,
             (select top 1 from claims c2 where c2.c_clm = c.c_clm a and c2.row_begin_dt > c.row_begin_dt order by row_begin_dt
             ) as next_sta_clm
      from claim c2
     ) c
where next_sta_clm <> c_sta_clm 
```

在许多数据库中，您可以使用`lag`or`lead`函数做同样的事情，但并非所有数据库都支持它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:50:50.703

就像是

```
Select ToRecord.row_begin_dt From ClaimHistory FromRecord
inner join ClaimHistory ToRecord On ToRecord.c_clm = FromRecord.c_clm and ToRecord.row_begin_dt > FromRecord.row_begin_dt and ToRecord.c_sta_claim = 'AC'
Where FromRecord.c_sta_claim = 'PC' 
```

将 PC 转换为 AC，不知道用户列是否重要，但将其插入应该是微不足道的。看到你没有说哪个DBMS，sql可能需要一个旋转。

此外，这将拾取诸如 PC 到 XX 到 AC 之类的东西，你没有说什么。

# python - Python中的递归函数

> ID：13708670
> 
> 赞同：8
> 
> 时间：2012-12-04T17:36:35.773
> 
> 标签：python, recursion

考虑一下 Python 中的这个基本递归：

```
def fibonacci(number):
    if number == 0: return 0
    elif number == 1:
        return 1
    else:
        return fibonacci(number-1) + fibonacci(number-2) 
```

根据斐波那契数列的 (n-1) + (n-2) 函数，这是有道理的。

Python 如何执行包含不在同一代码行内而是在同一代码行内的另一个递归的递归？'finobacci(number-1)' 是否完成所有递归，直到它达到'1'，然后它对 'fibonacci(number-2)' 执行相同操作并添加它们？

为了比较，以下用于将数字 'x' 提升为幂 'y' 的递归函数，我可以理解递归，def power 调用自身直到 y==0 ，因为在一行中只有一个递归调用。仍然不应该所有结果都是'1'，因为当y == 0时执行的最后一个命令是'return 1'，因此不返回x？

```
def power(x, y):
    if y == 0:
        return 1
    else:
        return x*power(x, y-1) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T17:40:16.587

## 简答

每次Python“看到”`fibonacci()`它都会进行另一个函数调用，并且在完成该函数调用之前不会进一步进行。

## 例子

所以让我们说它正在评估`fibonacci(4)`。

一旦到达线路`return fibonacci(number-1) + fibonacci(number-2)`，它就会“看到”呼叫`fibonacci(number-1)`。

所以现在它运行了`fibonacci(3)`——它还没有看到`fibonacci(number-2)`。要运行`fibonacci(3)`，就必须搞清楚`fibonacci(2)+fibonacci(1)`。同样，它运行它看到的第一个函数，这次是`fibonacci(2)`.

现在它终于在运行时达到了基本情况`fibonacci(2)`。它评估`fibonacci(1)`，返回`1`，然后，它第一次可以继续到调用的`+ fibonacci(number-2)`一部分。return ，然后让return 。`fibonacci()``fibonacci(0)``0``fibonacci(2)``1`

现在`fibonacci(3)`已经获得了从 的返回值`fibonacci(2)`，它可以进行评估`fibonacci(number-2)`( `fibonacci(1)`)。

这个过程一直持续到一切都被评估并`fibonacci(4)`可以返回`3`。

要查看整个评估的进展情况，请按照此图中的箭头进行操作：

![在此处输入图像描述](../Images/e87a1751a36755ed152de6d0aec04f0a.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-04T17:38:56.213

在表达式`fibonacci(number-1) + fibonacci(number-2)`中，第一个函数调用必须在第二个函数调用被调用之前完成。

因此，第一次调用的整个递归堆栈必须在第二次调用开始之前完成。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-04T17:41:06.213

> 'finobacci(number-1)' 是否完成所有递归，直到它达到 '1' 然后它对 'fibonacci(number-2)' 执行相同操作并添加它们？

是的，完全正确。换句话说，以下

```
return fibonacci(number-1) + fibonacci(number-2) 
```

相当于

```
f1 = fibonacci(number-1)
f2 = fibonacci(number-2)
return f1 + f2 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-28T22:51:57.540

您可以使用[rcviz](https://github.com/carlsborg/rcviz)模块通过简单地将装饰器添加到递归函数来可视化递归。

这是上面代码的可视化：

![使用 rcviz 输出 OP 函数](../Images/9559d0bf7ae00b66cc80f9744181e241.png)

边按执行遍历它们的顺序编号。边缘从黑色渐变为灰色以指示遍历顺序：黑色边缘在前，灰色边缘在后。

[（我在GitHub 上](http://en.wikipedia.org/wiki/GitHub)写了 rcviz 模块。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-04T17:43:27.593

我真的建议您将代码放在[Python 导师](http://www.pythontutor.com/)中。

您将能够即时获得它。查看堆栈帧、参考资料等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T17:43:01.637

您的第二个递归函数执行此操作（示例），因此不会返回 1。

```
power(2, 3)

2 * power(2, 2)

2 * 2 * power(1,2)

2 * 2 * 2 * power(0,2) # Reaching base case

2 * 2 * 2 * 1

8 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-04T17:43:53.477

您可以自己解决这个问题，方法是在函数中放置一个打印函数，并添加一个深度，以便我们可以更漂亮地打印出来：

```
def fibonacci(number, depth = 0):
    print " " * depth, number
    if number == 0:
        return 0
    elif number == 1:
        return 1
    else:
        return fibonacci(number-1, depth + 1) + fibonacci(number-2, depth + 1) 
```

打电话`fibonacci(5)`给我们：

```
5
 4
  3
   2
    1
    0
   1
  2
   1
   0
 3
  2
   1
   0
  1 
```

我们可以看到`5`调用`4`，完成，然后调用`3`，然后完成。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-04T17:44:12.173

Matthew 和 MArtjin 是对的，但我想我可以详细说明一下：

Python 会尽可能地从左到右做一些事情。括号中暗示了此规则的例外情况。

in `x*power(x, y-1)`:`x`被评估然后`power`被评估

而 in `fibonacci(number-1) + fibonacci(number-2)`,`fibonacci(number-1)`被评估（递归地，直到它停止）然后`fibonacci(number-1)`被评估

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-20T18:40:08.810

```
 def fib(x):
    if x == 0 or x == 1:
    return 1
  else:
    return fib(x-1) + fib(x-2)

print(fib(4)) 
```

[![在此处输入图像描述](../Images/d9cca651e60fd1756db52bc7d7e3c6f2.png)](https://i.stack.imgur.com/tvDxH.png)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-01-07T05:07:55.183

```
def fib(n):
  if n <= 1:
  return n
else :
  return fib(n - 1) + fib(n - 2) 
```

# django - apache2 + mod_wsgi 上的 django 项目 - TemplateDoesNotExist

> ID：13708672
> 
> 赞同：1
> 
> 时间：2012-12-04T17:36:38.647
> 
> 标签：django

我刚刚使用 apache2 在服务器上安装了 mod_wsgi。我还安装了 django。

我在项目中创建了项目和应用程序（实际上我从本地机器上传了应用程序）。

我的应用程序中的 url-view 映射有效，但是当视图尝试呈现任何模板时，会出现 TemplateDoesNotExist 异常。

我所有的模板都在 /[project]/[app]/templates/[app] 中（该目录中还有一些子目录，例如带有特定模板的“元素”和“错误”）

无论如何，django/wsgi 似乎没有在我的应用程序中看到模板——在我的本地机器上（使用 django 开发服务器）它工作正常，django 在我的 [app]/templates 目录中找到模板。

我正在使用此路径“[app]/base.html”或“[app]/elements/some_elements.html”渲染模板

在我的 httpd.conf 中：

```
WSGIScriptAlias /wsgi /var/src/[project]/[project]/wsgi.py
WSGIPythonPath /var/src/[project]/

<Directory /var/src/[project]>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:51:30.700

您是否在 settings.py 中有 TEMPLATE_DIRS 指向此服务器的正确位置？

# php - 如何按类型在关联数组中创建元素的数值数组

> ID：13708674
> 
> 赞同：0
> 
> 时间：2012-12-04T17:36:51.283
> 
> 标签：php, arrays, string, int, double

我如何从关联数组中的元素创建一个新数组，如果值是整数，则将该值放在新数组的第一位，第二位放双精度，第三位字符串，最后一个位置元素的数量。我尝试这样的事情，但它不起作用。

```
<?php
$array = array ('first' => 2.54, 'second' => "foo", 'third' => 1);
function myFunction($array)
{   $NewArray = array ();
    $[3] = 0;
foreach($array as $value)
{
    if(is_integer($value))
    {echo $NewArray[0] = $value.' ';}
    if(is_double($value))
    {echo $NewArray[1] = $value.' ';}
    if(is_string($value))
    {echo $NewArray[2] = $value.' ';}
    echo $NewArray[3] += 1 . ' ';}
    return $NewArray;}
MyFunction ($array);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:07:13.263

Mathieu Imbert 是对的，并且您在运行代码时没有描述问题所在。我根据`myFunction`应该返回的内容进行了更正（如您的问题中所述）。

您不应该将这些值与字符串连接，`' '`除非您希望它与值后面的空格一起使用。最后，如果您想要返回数组中第 3 位的元素数量，请不要将计数器与`' '`- 连接起来，计数器将是`'1 1 1 '`（对于您问题中的示例数组）。没有它 - `3`。

这是经过更正、经过测试的代码（我冒昧地重新格式化了您的代码以使其更易于阅读并添加`print_r()`了更漂亮的输出）：

```
<?php
    $array = array('first' => 2.54, 'second' => "foo", 'third' => 1);
    function myFunction($array) {
        $newArray = array();
        $newArray[3] = 0;
        foreach($array as $value) {
            if (is_integer($value)) {
                $newArray[0] = $value;
            }
            if (is_double($value)) {
                $newArray[1] = $value;
            }
            if (is_string($value)) {
                $newArray[2] = $value;
            }
            $newArray[3] += 1;
        }
        return $newArray;
    }
    print_r(myFunction($array));
?> 
```

输出：

```
Array
(
    [3] => 3
    [1] => 2.54 
    [2] => foo 
    [0] => 1 
) 
```

# .net - 使用 WebClient 访问时，ASP.NET MVC 应用程序返回未授权 (401) 进行重定向

> ID：13708676
> 
> 赞同：2
> 
> 时间：2012-12-04T17:37:05.743
> 
> 标签：.net, asp.net-mvc, webclient, http-redirect, unauthorized

我有一个简单的 ASP.NET MVC 站点，其中包含一个控制器和一些操作。用户需要登录才能访问任何操作（Windows 身份验证、控制器类上的“授权”属性）。

通过浏览器访问该站点时，一切正常。

在客户端，我还想通过 System.Net.WebClient 访问该站点。我设置了凭据和返回 View 的所有操作都可以正常工作。

但是，当我尝试访问尝试进行重定向的操作（使用控制器的 Rediret() 方法）时，服务器返回 401 Unauthorized。

我已经阅读了有关 WebClient 和 Windows 身份验证的问题，但我发现的内容似乎不适用于这里，因为除了重定向之外一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T23:26:23.433

我在描述如何解决这个问题的 HttpWebRequest 代码中找到了一条注释：

```
// Do _not_ automatically reuse the credential object on a redirection unless
// it is specifically a CredentialCache or SystemNetworkCredential object.
//
// The CredentialCache object stores credentials for specific URIs and
// authentication schemes.  Therefore the application has given explicit
// permission to use/send those credentials to a specific site using a
// specific authentication scheme.
//
// A SystemNetworkCredential object represents current default credentials.
// It is deemed safe to reuse them on an automatic redirection since the
// authentication SSP are trusted to only use safe authentication schemes
// for default credentials. 
```

因此，要让我的凭据用于重定向，我所要做的就是创建一个 CredentialCache 对象，而不仅仅是一个 NetworkCredential 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:47:49.063

所以几周后我有一些时间来解决这个问题，事实证明，它与 ASP.NET 根本没有关系，这是 WebClient 的错。WebClient 在重定向之前清除其凭据，因此在这种情况下，原始请求是成功的，但是当 WebClient 尝试访问它已重定向到的页面时发生错误，因为目标也需要身份验证。

不幸的是，您不能仅通过属性切换此行为。所以我的解决方案看起来像这样。

```
//Credentials necessary for the request(s)
var cred = new NetworkCredential(username, password);

//Create initial request
var request = (HttpWebRequest)WebRequest.Create(url);
request.AllowAutoRedirect = false;
request.Credentials = cred;

//Get response to first request
var response = (HttpWebResponse)request.GetResponse();

//Follow redirects
while (response.StatusCode == HttpStatusCode.Redirect && maxRedirects > 0)
{
    //Build new URI for redirect target
    var uri = response.ResponseUri;
    url = String.Format("{0}://{1}:{2}{3}", uri.Scheme, uri.Host, uri.Port, response.GetResponseHeader("Location"));    

    //Create new request
    request = (HttpWebRequest)WebRequest.Create(url);
    request.AllowAutoRedirect = false;
    request.Credentials = cred;

    //Get new response
    response = request.GetResponse() as HttpWebResponse;

    maxRedirects--;
}

//Get the response's content
var sReader = new StreamReader(response.GetResponseStream());
string responseStr = sReader.ReadToEnd(); 
```

我没有使用 WebClient，而是使用 HttpWebRequest 和 HttpWebResponse 并手动遵循重定向。在发出请求之前，我设置了完成请求所需的凭据

# java - 当我在文件上写入浮点数时出现未知字符

> ID：13708679
> 
> 赞同：-2
> 
> 时间：2012-12-04T17:37:15.633
> 
> 标签：java, android, io

当我在文件上写一个浮点数时，我得到一系列未知字符（符号），但不是浮点数。

```
DataOutputStream dos = new DataOutputStream( new FileOutputStream(filename,true));
        dos.writeLong((long)data);
        dos.writeChars(" ");
        dos.writeFloat((float) mAcceleration[0]);
        dos.writeChars(" ");
        dos.close(); 
```

使用 long 和 float 创建的文件：

```
 Îîð}  ¾W¿ 
```

我也尝试过使用浮点数，我也得到了未知字符。怎么了？

```
float f=4.3423f;
DataOutputStream dos = new DataOutputStream( new FileOutputStream(file,true));
dos.writeFloat(f);
dos.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:40:22.973

因为您无法读取二进制文件，所以它是用二进制编写的，这就是为什么这些是`non human-readable`字符

```
DataOutputStream is binary stream 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:12:33.253

使用 PrintWriter 将人类可读的内容写入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:42:48.203

您必须使用 DataInputStream readFloat() 和 readhChars() 来读取数据，如果您 cat 文件，它将以二进制格式转储内容。

# wcf - 为什么我的 WCF 服务一直默认为 http？

> ID：13708688
> 
> 赞同：0
> 
> 时间：2012-12-04T17:37:42.700
> 
> 标签：wcf, web-services, visual-studio-2008, https, soapui

我将 WCF 服务配置为 https。我可以使用我的 https:// url 地址浏览 WSDL。但是，当我使用 SOAP UI 测试服务时，URL 默认为 http。当我测试它时，我确实收到了预期的响应。如果我将 SOAP UI 中的 URL 更改为 https，我会得到以下信息。

```
HTTP/1.1 404 Not Found
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Tue, 04 Dec 2012 16:46:32 GMT
Content-Length: 0 
```

这个问题与我的另一个问题有关： [为什么我的 WSDL 仍然显示带有 http 位置值的基本 http 绑定？](https://stackoverflow.com/questions/13502185/why-my-wsdl-still-shows-basic-http-binding-with-the-location-value-of-http)

有任何想法吗？？这是 IIS 配置的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T17:56:35.083

最后，我能够通过将 wsHttpBinding 更改为 basicHttpBinding 来修复它。现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T16:58:30.010

我不确定这是否是您的（唯一）问题，因为您尚未发布配置，但您需要将 HttpsGetEnabled 设置为 true 并且还需要使用 https 基地址。

[http://msdn.microsoft.com/en-us/library/ms751498.aspx](http://msdn.microsoft.com/en-us/library/ms751498.aspx)

# linux - 使用 shell 脚本将指定列中的逗号分隔单元格分隔到新行

> ID：13708689
> 
> 赞同：0
> 
> 时间：2012-12-04T17:37:46.820
> 
> 标签：linux, bash, shell, bioinformatics

我有一个带有逗号分隔列的表，我想将指定列中的逗号分隔值分隔到新行。例如，给定的表是

名称 起始名称 2

A 1,2 X,a

B 5 是,b

C 6,7,8 Z,c

我需要分隔第 2 列中的逗号分隔值以获得下表

名称 起始名称 2

一个 1 X,一个

一个 2 X,一个

B 5 是,b

C 6 Z,c

C 7 Z,c

C 8 Z,c

我想知道是否有任何带有 shell 脚本的解决方案，以便我可以创建一个工作流管道。注意：原始表可能包含超过 3 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:40:30.330

这个 bash 解决方案产生你想要的输出

```
{
     read header; echo "$header"
     while read name start rest; do
         for elem in $(tr , " " <<< "$start"); do
             echo "$name $elem $rest"
         done
     done
} << END
Name Start Name2
A 1,2 X,a
B 5 Y,b
C 6,7,8 Z,c
END 
```

不那么冗长

```
awk 'NR==1 {print; next} {split($2,a,/,/); for (i in a) {$2=a[i]; print}}' 
```

# sql - 如何提供 vsdbcmd deploy 命令行目标 dbschema sql 命令变量？

> ID：13708690
> 
> 赞同：1
> 
> 时间：2012-12-04T17:37:47.730
> 
> 标签：sql, visual-studio-2010, sqlcmd, vsdbcmd

Visual Studio (2010) gui 提供了用于为目标指定第二个命令变量文件的选项。但是，我找不到用于命令行实现的此选项 - vsdbcmd.exe。

运行 vsdbcmd deploy for dbschema 到 dbschema，只使用源模型命令变量，给出实现变量的对象被视为具有更改的结果。导致不正确（不正确）的更新脚本。

我目前使用的命令：

```
vsdbcmd.exe /a:deploy /dd:- /dsp:sql /model:Source.dbschema /targetmodelfile:Target.dbschema /p:SqlCommandVariablesFile=Database.sqlcmdvars /manifest:Database.deploymanifest /DeploymentScriptFile:UpdateScript.sql /p:TargetDatabase="DatabaseName" 
```

我正在寻找的是`/p:TargetSqlCommandVariablesFile`，如果这样的事情存在......

结果脚本与运行相同，因此 GUI 比较无需为目标指定 sqlcmd vars

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:17:17.873

`VSDBCMD.EXE`我在[这个链接](http://msdn.microsoft.com/en-us/library/dd193283%28v=vs.100%29.aspx)上找到了完整的文档。

我想你可能正在寻找类似的东西：

```
/p:SqlCommandVariablesFile=Filepath 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:33:06.443

最后，我没有找到有关执行所需操作的可能性的信息-使用 IL spy 检查了 vsdbcmd 库中的隐藏参数-没有找到任何信息。

通过解析目标和当前的 dbschema 文件并将 cmd 变量值直接解析到它们中来达到我的目标 - 然后对修改后的 dbschema 进行比较。这种方法不再允许在生成的脚本中更改 sql cmd vars（因为这些值已经被烘焙到代码中），但是这被认为是可以接受的损失。

不是最漂亮的解决方案，但到目前为止我没有任何问题。

# c++ - HDF5：使用字符串创建数据集

> ID：13708692
> 
> 赞同：4
> 
> 时间：2012-12-04T17:37:52.513
> 
> 标签：c++, string, hdf5

我正在使用 HDF5 API，并且正在尝试使用可变长度字符串创建数据集。结构是

```
struct dataX
{
  std::string data;
}; 
```

我使用`char[256]`的是静态硬编码大小。
但我希望它是动态的，所以在阅读了 HDF5 Doc 之后，我发现`H5T_VARIABLE`并使用了它，但它仍然失败。

`H5Dcreate`返回负值（表示错误）。

```
hid_t mem_type;
mem_type = H5Tcopy( H5T_C_S1 );
H5Tset_size(mem_type,H5T_VARIABLE);

/* Create the memory data type. */
if ((mem_type_id = H5Tcreate (H5T_COMPOUND, mem_type )) < 0 ) {
  return -1;
}
/* Insert fields. */
if ( H5Tinsert(mem_type_id, "field", 0, mem_type_id ) < 0 ) {
  return -1;
}

/* Create a simple data space with unlimited size */
//   hsize_t dims[1]={0};
//   hsize_t maxdimsk[1]={ H5S_UNLIMITED };
if ( (sid = H5Screate_simple( 1, dims, maxdims )) < 0 ){
  return -1;
}

/* Modify dataset creation properties, i.e. enable chunking  */
plist_id = H5Pcreate (H5P_DATASET_CREATE);
//chunk==1
if ( H5Pset_chunk ( plist_id, 1, chunk ) < 0 ){
  return -1;
}

H5Pset_alloc_time( plist_id, H5D_ALLOC_TIME_EARLY )
/* Set the fill value using a struct as the data type. */
// fill_data=0
if ( fill_data )
{
  if ( H5Pset_fill_value( plist_id, mem_type_id, fill_data ) < 0 ){
    LOG_ERROR << "cannot fill value " << LOG_ENDL;
    return -1;
  }
}
else {
  if ( H5Pset_fill_time( plist_id, H5D_FILL_TIME_NEVER ) < 0 ) {
    LOG_ERROR << "error" << LOG_ENDL;
  }
}

/* Create the dataset. */
did = H5Dcreate( loc_id, dset_name, mem_type_id, sid, plist_id ) 
```

我试过`H5D_ALLOC_TIME_LATE`了，想也许如果它在写入之前分配内存它会起作用，但是......它没有。

现在我被卡住了，我不知道该怎么办。

我错过了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:49:08.140

您的`mem_type_id`双重无效：

*   的第二个参数`H5Tcreate`应该是复合数据类型的大小
*   在 中`H5Tinsert`，最后一个参数应该是插入字段的数据类型。在这里我猜你的意思是`mem_type`而不是`mem_type_id`.

我对您具体在做什么一无所知，但是要编写可变长度字符串，您不需要创建复合类型，也不需要设置任何特殊的属性列表。基本上你的 3 第一行足以创建一个有效的可变长度字符串数据类型 ( `mem_type`)。然后创建简单数据空间，然后创建数据集。

看看[这个例子](http://www.hdfgroup.org/ftp/HDF5/examples/examples-by-api/hdf5-examples/1_8/C/H5T/h5ex_t_vlstring.c)，你会发现它很简单。

# functional-programming - 如何在 OCaml 中将字典实现为函数？

> ID：13708701
> 
> 赞同：14
> 
> 时间：2012-12-04T17:38:10.083
> 
> 标签：functional-programming, ocaml

我正在学习[Jason Hickey 的 Objective Caml 简介](http://www.cs.caltech.edu/courses/cs134/cs134b/book.pdf)。

* * *

**这是一个我没有任何线索的练习**

![在此处输入图像描述](../Images/5471da28c8024794d95fc6c774b190c4.png) ![在此处输入图像描述](../Images/af3453cdd293eef54512962479e0c568.png)

* * *

首先，将 a 实现`dictionary`为 a 是什么意思`function`？我怎么能想象出来？

我们需要任何`array`或类似的东西吗？显然，在这个练习中我们不能有数组，因为`array`还没有在`Chapter 3`. 但`How do I do it without some storage?`

**所以我不知道该怎么做，我希望得到一些提示和指导。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T18:31:09.270

我认为这个练习的目的是让你使用闭包。例如，考虑文件中的以下一对 OCaml 函数`fun-dict.ml`：

```
let empty (_ : string) : int = 0
let add d k v = fun k' -> if k = k' then v else d k' 
```

然后在 OCaml 提示符下，您可以执行以下操作：

```
 # #use "fun-dict.ml";;
val empty : string -> int = 
val add : ('a -> 'b) -> 'a -> 'b -> 'a -> 'b = 
# let d = add empty "foo" 10;;
val d : string -> int = 
# d "bar";;  (* Since our dictionary is a function we simply call with a
                  string to look up a value *)
- : int = 0   (* We never added "bar" so we get 0 *)
# d "foo";;
- : int = 10  (* We added "foo" -> 10 *) 
```

在这个例子中，字典是一个值`string`键的`int`函数。该`empty`函数是将所有键映射到的字典`0`。add 函数创建一个*闭包*，它接受一个参数，一个键。请记住，我们在这里对字典的定义是从键到值的函数，所以这个闭包是一个字典。它检查`k'`（闭包参数）是否`= k`是`k`刚刚添加的键。如果是，则返回新值，否则调用旧字典。

通过关闭链中的下一个字典（函数），您有效地拥有了一个闭包列表，这些闭包不是由 cons 单元链接的。

额外的练习，你将如何从这个字典中删除一个键？

* * *

编辑：什么是闭包？

闭包是一个函数，它从创建它的范围内引用变量（名称）。那是什么意思呢？

考虑我们的`add`功能。它返回一个函数

```
fun k' -> if k = k' then v else d k 
```

如果您只查看该函数，则未定义三个名称，`d`,`k`和`v`. 要弄清楚它们是什么，我们必须查看*封闭范围*，即`add`. 我们在哪里找到

```
let add d k v = ... 
```

因此，即使在`add`返回一个新函数之后，该函数仍会引用要添加的参数。所以闭包是一个必须被一些外部范围封闭才能有意义的函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-04T17:46:53.027

在 OCaml 中，您可以使用实际函数来表示字典。非 FP 语言通常不支持将函数作为一等对象，所以如果你习惯了它们，一开始你可能会很难这样想。

字典*是*一个映射，它是一个函数。想象一下，你有一个函数`d`，它接受一个字符串并返回一个数字。它为不同的字符串返回不同的数字，但对于相同的字符串总是返回相同的数字。这是一本字典。字符串是您正在查找的内容，而您返回的数字是字典中的相关条目。

您不需要数组（或列表）。您的`add`函数可以构造一个无需任何（显式）数据结构即可执行必要操作的函数。请注意，该`add`函数接受一个字典（一个函数）并返回一个字典（一个新函数）。

为了开始考虑高阶函数，这里有一个例子。该函数`bump`接受一个函数 ( `f: int -> int`) 和一个 int ( `k: int`)。它返回一个新函数，该函数返回的值`k`大于`f`相同输入返回的值。

```
let bump f k = fun n -> k + f n 
```

（重点是`bump`， like `add`，接受一个函数和一些数据，并根据这些值返回一个新函数。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-04T21:39:35.940

我认为可能值得补充一点，OCaml 中的函数不仅仅是代码片段（与 C、C++、Java 等不同）。在那些非函数式语言中，函数没有任何与之关联的**状态**，谈论这样的事情有点荒谬。但是函数式语言中的函数并非如此，您应该开始将它们视为一种**对象**；一种奇怪的物体，是的。

那么我们如何“制造”这些物体呢？让我们以杰弗里为例：

```
let bump f k = 
  fun n ->
    k + f n 
```

现在`bump`实际上做了什么？它可能会帮助您将其`bump`视为您可能已经熟悉的**构造函数。**它构建什么？它构造了一个**函数对象**（这里说的很丢脸）。那么生成的对象有什么**状态呢？**它有两个实例变量（有点），它们是`f`和`k`。这两个实例变量在您调用时绑定到生成的函数对象`bump f k`。您可以看到返回的函数对象：

```
fun n ->
  k + f n 
```

利用这些实例变量`f`并`k`在它的主体中。一旦这个函数对象被返回，你只能调用它，你没有其他方法可以访问`f`或`k`（所以这是封装）。

使用术语**function-object**非常少见，它们仅称为**函数**，但您必须记住它们也可以“包围”状态。这些**函数对象**（也称为闭包）与面向对象编程语言中的“真实”对象相距不远，可以在[这里](https://stackoverflow.com/q/501023/591181)找到一个非常有趣的讨论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T11:54:45.703

我也在努力解决这个问题。这是我的解决方案，它适用于教科书中列出的案例......

空字典只返回 0：

```
let empty (k:string) = 0 
```

Find 在键上调用字典的函数。这个函数很简单：

```
let find (d: string -> int) k = d k 
```

Add 扩展了字典的功能以具有另一个条件分支。我们返回一个带有键 k' 的新字典，并将其与 k（我们需要添加的键）进行匹配。如果匹配，我们返回 v（对应的值）。如果不匹配，我们返回旧的（较小的）字典：

```
let add (d: string -> int) k v =
    fun k' ->
        if k' = k then
                v
            else
                d k' 
```

您可以更改添加以具有删除功能。另外，我添加了一个条件来确保我们不会删除不存在的密钥。这只是为了练习。无论如何，字典的这种实现很糟糕：

```
let remove (d: string -> int) k =
    if find d k = 0 then
        d
    else
        fun k' ->
            if k' = k then
                    0
                else
                    d k' 
```

我对术语不太了解，因为我还在学习函数式编程。所以，请随时纠正我。

# arrays - 在 Bash 中，如何将数字列表转换为数字范围？

> ID：13708705
> 
> 赞同：7
> 
> 时间：2012-12-04T17:38:17.570
> 
> 标签：arrays, bash, numbers, range

目前我有一个命令的数字排序输出：

> 18,19,62,161,162,163,165

我想将这些数字列表压缩为单个数字或数字范围的列表

> 18-19,62,161-163,165

我考虑过尝试在 bash 中对数组进行排序并读取下一个数字以查看它是否为 +1 ...

```
foreach ($missing as $key => $tag) {
    $next = $missing[$key+1];
    if (!isset($first)) {
        $first = $tag;
    }
    if($next != $tag + 1) {
        if($first == $tag) {
            echo '<tr><td>'.$tag.'</td></tr>';
        } else {
            echo '<tr><td>'.$first.'-'.$tag.'</td></tr>';
        }
        unset($first);
    }
} 
```

我在想 bash 中可能有一个可以做到这一点的单行代码，但我的谷歌搜索功能不足......

**更新：** 感谢@Karoly Horvath 的快速回答，我曾经用它来完成我的项目。我肯定会对那里的任何更简单的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T18:06:34.810

是的，shell 进行变量替换，如果`prev`未设置，则该行变为：

```
if [ -ne $n+1] 
```

这是一个工作版本：

```
numbers="18,19,62,161,162,163,165"

echo $numbers, | sed "s/,/\n/g" | while read num; do
    if [[ -z $first ]]; then
        first=$num; last=$num; continue;
    fi
    if [[ num -ne $((last + 1)) ]]; then
        if [[ first -eq last ]]; then echo $first; else echo $first-$last; fi
        first=$num; last=$num
    else
        : $((last++))
    fi
done | paste -sd ","

18-19,62,161-163,165 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-20T20:11:51.477

仅使用 bash 中的函数：

```
#!/bin/bash

list2range() {
  set -- ${@//,/ }       # convert string to parameters

  local first a b string IFS
  local -a array
  local endofrange=0

  while [[ $# -ge 1 ]]; do  
    a=$1; shift; b=$1

    if [[ $a+1 -eq $b ]]; then
      if [[ $endofrange -eq 0 ]]; then
        first=$a
        endofrange=1
      fi
    else
      if [[ $endofrange -eq 1 ]]; then
        array+=($first-$a)
      else
        array+=($a)
      fi
      endofrange=0
    fi
  done

  IFS=","; echo "${array[*]}"
}

list2range 18,19,62,161,162,163,165 
```

输出：

```
18-19,62,161-163,165

```

# model-view-controller - 提供 HTTP 路由器和访问控制的轻量级 PHP 框架

> ID：13708707
> 
> 赞同：4
> 
> 时间：2012-12-04T17:38:22.950
> 
> 标签：model-view-controller, php, front-controller

如您所知，一些著名的 PHP 框架提供了前端控制器模式和访问控制机制。还有一些提供前端控制器模式的微框架。

我调查了一些这样的框架，但无法做出决定，我担心的是：

*   稳定
*   稳定
*   稳定
*   表现
*   安全

我不希望我的核心框架有更多东西，我将使用纯 PHP，或者我可能会使用来自各种框架的特定模块。

目前我在 ZF 1.x、ZF 2.x、Phalcon 框架方面有经验。而且我还阅读了 Lithium 文档，但我发现没有适合我的项目的文档。

同样根据[this](http://www.laruence.com/2012/09/16/2791.html)、[this](http://www.ruilog.com/blog/view/b6f0e42cf705.html)、[this](http://www.comentum.com/web-application-framework-comparison.html)和[this](http://www.yiiframework.com/performance/) pages ZF、Symfony、CakePHP、FuelPHP 不是高效的框架（胖框架）。

![http://laruence-wordpress.stor.sinaapp.com/uploads/ab-c100-n300002.png](../Images/4c73e837f888564c454e15827550bafe.png)
（[图片来源](http://www.laruence.com/2012/09/16/2791.html)）

您能否建议一个合适的框架或满足此类要求的模块组合？

另请参阅[此](https://stackoverflow.com/q/115629/752603)相关（但旧）问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:41:21.140

在我看来（因为这就是所有答案都可能在这里）最好、最轻量级的框架是[Kohana](http://kohanaframework.org/)。它非常小，可以与您使用的任何第三方库（包括 ZF）集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:13:57.173

我总是推荐[Yii 框架](http://www.yiiframework.com/)。它具有出色的性能 - [http://www.yiiframework.com/performance/](http://www.yiiframework.com/performance/)

# objective-c - 有没有办法在 iOS 上获取相机流的亮度级别？

> ID：13708712
> 
> 赞同：6
> 
> 时间：2012-12-04T17:38:52.623
> 
> 标签：objective-c, ios, camera

我正在使用 iPhone/iPad 摄像头获取视频流并在流上进行识别，但随着照明的变化，它会对鲁棒性产生负面影响。我已经在不同的光线下测试了不同的设置并且可以让它工作，但是我需要在运行时调整设置。

我可以在每一帧上计算一个简单的亮度检查，但是相机会调整并抛出我的结果。我可以观察急剧的变化并进行检查，但渐进的变化也会使我的结果失效。

理想情况下，我想访问流的相机/EXIF数据，看看它注册了未过滤的亮度，有没有办法做到这一点？

（我正在为 iOS 5 及更高版本的设备工作）

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T17:52:22.630

适用于 iOS 4.0 及更高版本。可以从 CMSampleBufferRef 获取 EXIF 信息。

```
//Import ImageIO & include framework in your project. 
#import <ImageIO/CGImageProperties.h> 
```

在您的示例缓冲区委托中，免费桥接将从 CoreMedia 的 CMGetAttachment 获得结果的 NSDictionary。

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection {
    NSDictionary* dict = (NSDictionary*)CMGetAttachment(sampleBuffer, kCGImagePropertyExifDictionary, NULL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-11T10:06:54.027

完整的代码，在我自己的应用程序中使用：

```
- (void)setupAVCapture {

//-- Setup Capture Session.
_session = [[AVCaptureSession alloc] init];
[_session beginConfiguration];

//-- Set preset session size.
[_session setSessionPreset:AVCaptureSessionPreset1920x1080];

//-- Creata a video device and input from that Device.  Add the input to the capture session.
AVCaptureDevice * videoDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
if(videoDevice == nil)
    assert(0);

//-- Add the device to the session.
NSError *error;
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:videoDevice error:&error];
if(error)
    assert(0);

[_session addInput:input];

//-- Create the output for the capture session.
AVCaptureVideoDataOutput * dataOutput = [[AVCaptureVideoDataOutput alloc] init];
[dataOutput setAlwaysDiscardsLateVideoFrames:YES]; // Probably want to set this to NO when recording

//-- Set to YUV420.
[dataOutput setVideoSettings:[NSDictionary dictionaryWithObject:[NSNumber numberWithInt:kCVPixelFormatType_420YpCbCr8BiPlanarFullRange]
                                                         forKey:(id)kCVPixelBufferPixelFormatTypeKey]]; // Necessary for manual preview

// Set dispatch to be on the main thread so OpenGL can do things with the data
[dataOutput setSampleBufferDelegate:self queue:dispatch_get_main_queue()];

[_session addOutput:dataOutput];
[_session commitConfiguration];

[_session startRunning];
}

- (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection
{
    CFDictionaryRef metadataDict = CMCopyDictionaryOfAttachments(NULL,
                                                                 sampleBuffer, kCMAttachmentMode_ShouldPropagate);
    NSDictionary *metadata = [[NSMutableDictionary alloc]
                              initWithDictionary:(__bridge NSDictionary*)metadataDict];
    CFRelease(metadataDict);
    NSDictionary *exifMetadata = [[metadata
                                   objectForKey:(NSString *)kCGImagePropertyExifDictionary] mutableCopy];
    self.autoBrightness = [[exifMetadata
                         objectForKey:(NSString *)kCGImagePropertyExifBrightnessValue] floatValue];

    float oldMin = -4.639957; // dark
    float oldMax = 4.639957; // light
    if (self.autoBrightness > oldMax) oldMax = self.autoBrightness; // adjust oldMax if brighter than expected oldMax

    self.lumaThreshold = ((self.autoBrightness - oldMin) * ((3.0 - 1.0) / (oldMax - oldMin))) + 1.0;

    NSLog(@"brightnessValue %f", self.autoBrightness);
    NSLog(@"lumaThreshold %f", self.lumaThreshold);
} 
```

lumaThreshold 变量作为统一变量发送到我的片段着色器，它将 Y 采样器纹理相乘以根据环境的亮度找到理想的亮度。现在，它使用后置摄像头；我可能会切换到前置摄像头，因为我只是更改屏幕的“亮度”以适应室内/室外观看，并且用户的眼睛在摄像头的前面（而不是后面）。

# typemock - TypeMock 和 mscorlib

> ID：13708716
> 
> 赞同：0
> 
> 时间：2012-12-04T17:39:01.250
> 
> 标签：typemock

有谁知道当前版本的 TypeMock 是否可以拦截 mscorlib？

我正在寻找摩尔的替代品。造成这种情况的主要原因是遗留代码。我当然知道有几种模拟工具可以模拟基于接口的代码。像大多数地方一样，我们有大量的代码要进行测试，这些代码不使用注入其他方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T16:04:55.087

Typemock Isolator 模拟 mscorlib 类型的能力有限。在他们的在线开发人员文档中有[一个他们可以模拟的 mscorlib 类型列表](http://docs.typemock.com/Isolator/##typemock.chm/Documentation/SupportedMscorlibTypes.html)，但它似乎没有使用一些最新的发布信息进行更新。

查看发行说明，一个更完整的列表（尽我所能将这样的东西放在一起）是：

*   所有接口类型（从[Isolator 3.7](http://docs.typemock.com/Isolator/##typemock.chm/Documentation/ReleaseNotes37.html)开始）
*   动态类型（从[Isolator 6.0](http://docs.typemock.com/Isolator/##typemock.chm/Documentation/ReleaseNotes60.html)开始）
*   mscorlib 类型的扩展方法（从[Isolator 4.2](http://docs.typemock.com/Isolator/##typemock.chm/Documentation/ReleaseNotes42.html)开始）
*   日期时间（从[隔离器 5.3](http://docs.typemock.com/Isolator/##typemock.chm/Documentation/ReleaseNotes53.html)开始）
*   环境（从[Isolator 7.0](http://docs.typemock.com/Isolator/##typemock.chm/Documentation/ReleaseNotes70.html)开始）
*   文件（从[Isolator 7.0](http://docs.typemock.com/Isolator/##typemock.chm/Documentation/ReleaseNotes70.html)开始）
*   FileStream（从[Isolator 7.0](http://docs.typemock.com/Isolator/##typemock.chm/Documentation/ReleaseNotes70.html)开始）
*   StreamReader（从[Isolator 7.0.7](http://docs.typemock.com/Isolator/##typemock.chm/Documentation/ReleaseNotes707.html)开始）
*   X509Certificate（从[隔离器 7.1.6](http://docs.typemock.com/Isolator/##typemock.chm/Documentation/ReleaseNotes716.html)开始）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:40:09.940

[TypeMock Isolator Essential](http://www.typemock.com/isolator-product-page)专为此任务而设计。

# php - 使用 UTF-8 在 PHP 中打开 XML 文件时出错

> ID：13708717
> 
> 赞同：1
> 
> 时间：2012-12-04T17:39:04.293
> 
> 标签：php, xml, encoding, utf-8

在我的页面中，我尝试打开一些 xml 文件：

```
$xml = simplexml_load_file("users/" .$f->name."/data.xml"); 
```

问题是`$f->name`可以将字符包含为带重音的元音，因此打开文件时会出错。例如，它读 García 而不是 García。我该如何解决？（我已经尝试过`utf8_encode($f->name)`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:44:48.330

尝试：

```
$xml = simplexml_load_file("users/" .rawurlencode($f->name)."/data.xml"); 
```

# binding - 关键字参数的 Groovy 绑定

> ID：13708718
> 
> 赞同：1
> 
> 时间：2012-12-04T17:39:05.280
> 
> 标签：binding, groovy, keyword-argument

以下代码将产生断言错误

```
def foo(a,b,c='awesome',d=null) {
    assert d
}

foo(1,2,d='bar') 
```

为什么会报错？为什么d的关键字赋值不起作用？我发现这与 Python 关键字参数非常不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:00:32.593

Groovy 的关键字参数与 python 不同。

首先，语法类似于地图。代替

```
foo(1,2,d='bar') 
```

你需要

```
foo(1,2,d:'bar') 
```

其次，groovy 不能按名称将参数映射到关键字。在 groovy 中实现这一点的一种方法是接受关键字参数作为映射：

```
def foo(Map kwargs, a, b, c='awesome') { [a,b,c,kwargs.d] }
assert foo(1,2,d:'bar') == [1,2,'awesome','bar'] 
```

有关 groovy 如何处理此问题的更多详细信息，请参见：http: [//groovy.codehaus.org/Extended+Guide+to+Method+Signatures](http://groovy.codehaus.org/Extended+Guide+to+Method+Signatures)。

# macos - OS X 中的 Vim 路径配置

> ID：13708719
> 
> 赞同：1
> 
> 时间：2012-12-04T17:39:05.687
> 
> 标签：macos, environment-variables, osx-mountain-lion, macvim, rbenv

我正在尝试将 MacVim 中的 $PATH 变量设置为与终端中相同的值。

从我写的这些来源`~/.zprofile`

```
export PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin
eval "$(rbenv init -)" # this makes rbenv work

### Added by the Heroku Toolbelt
export PATH="/usr/local/heroku/bin:$PATH"
echo $PATH >> ~/path # for debugging purposes 
```

这是我的结果，在 ~/path $PATH 中正确定义：

```
/usr/local/heroku/bin:/Users/pills/.rbenv/shims:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin 
```

但是当我`!echo $PATH`在 MacVim 中做时，我得到了一个扭曲的值：

```
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/heroku/bin:/Users/pills/.rbenv/shims 
```

我从[https://superuser.com/a/47166/145603](https://superuser.com/a/47166/145603)看到 $PATH 是如何设置的，但我不明白我为什么会有这种行为。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:04:56.570

您似乎正在使用zsh。在最近的 OS X 版本中，Apple 以`/etc/zshenv`. 你应该用

```
sudo mv /etc/zshenv /etc/zprofile 
```

如果 Vim 中的 PATH 配置错误仍然存​​在问题，请尝试将其设置为`~/.vimrc`：

```
set shell=bash  " avoids munging PATH under zsh
let g:is_bash=1 " default shell syntax 
```

如果您这样做，请确保您`~/.bashrc`也以与您相同的方式为 rbenv 配置`~/.zprofile`。

有关何时获取哪些 shell 初始化文件的更多信息，请参阅[Unix shell 初始化指南](https://github.com/sstephenson/rbenv/wiki/Unix-shell-initialization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T17:34:30.110

[我在我的博客](http://damselem.ghost.io/mac-os-x-zsh-vim-and-path/)中写了我在同样问题上的经历。它非常详细，我相信值得阅读整篇文章，以更好地了解根本原因，并提供有关如何在最后正确修复它的[解决方案。](http://damselem.ghost.io/mac-os-x-zsh-vim-and-path/#thesolution)

提示 - 问题与在和`path_helper`中执行的命令有关。`/etc/zshenv``/etc/zprofile`

# c# - 将列表添加到字典

> ID：13708721
> 
> 赞同：-2
> 
> 时间：2012-12-04T17:39:19.787
> 
> 标签：c#

在我的程序中，我有一个标记列表和一个存储 studentId 的字典。我希望用户输入 studentId 并根据该 id 指向标记列表。我认为我执行不正确。有人可以帮助我实施它。谢谢

```
 public class Student() {
        private string name;
        private string surname;
        private string dob;
        private string address;
        private int id;

        public Student()
        {
        }
        public Student(string year,string name, string surname, string dob, string address)
        {
            this.name = name;
            this.surname = surname;
            this.dob = dob;
            this.address = address;
            this.year = year;
        }

      public string Name
        {
            get { return name; }
            set { name = value; }
        }

        public string Surname
        {
            get { return surname; }
            set { surname = value; }

        }

        public string DOB
        {
            get { return dob; }
            set { dob = value; }
        }

        public string Addr
        {
            get { return address; }
            set { address = value; }

        }
        public int Id
        {
            get { return id; }
            set { id = value; }
        }

        private string year;

        public string Year
        {
            get { return year; }
            set { year = value; }

        }
         public Student(string s)
        {
            string[] splitted = s.Split(',');
            name = splitted[0];
            surname = splitted[1];
            dob = splitted[2];
            address = splitted[3];
           // id = splitted[4];          
         }
        public Dictionary<int,List<Marks>> dictionary= new Dictionary<int,List<Marks>>();
        public List<Marks> Mathematics = new List<Marks>();
        public List<Marks> English = new List<Marks>();
        public List<Marks> Maltese = new List<Marks>();
        public List<Marks> ReligiousStudies = new List<Marks>();
        public List<Marks> SocialStudies = new List<Marks>();
        public Dictionary<int, List<Marks>> dictionar = new Dictionary<int, List<Marks>>();

        public void AddMarks(int hyexam, int anexam)
        {
            {
                Console.WriteLine("enter id of student to input marks to:");
                string id = Console.ReadLine();
                if (dictionar.ContainsKey(Id).Equals(id))
                {
                    Mathematics.Add(new Marks(hyexam, anexam));
                    English.Add(new Marks(hyexam, anexam));
                    Maltese.Add(new Marks(hyexam, anexam));
                    ReligiousStudies.Add(new Marks(hyexam, anexam));
                    SocialStudies.Add(new Marks(hyexam, anexam));
                    dictionar.Add(id, (Mathematics)); //dont know how to implement it
                }
                else
                {
                    Console.WriteLine("id not found");
                }

            }
        }

   public class Marks
    {
        private int hyexam;
        private int anexam;
        private string id;
        public int HYEXAM
        {
            get { return hyexam; }
            set { hyexam = value; }
        }

        public int ANEXAM
        {
            get { return anexam; }
            set { anexam = value; }
        }

        public string Id
        {
            get { return id; }
            set { id = value; }
        }

        public Marks(int hyexam, int anexam)
        {          
            this.hyexam = hyexam;
            this.anexam = anexam;
        }
        public Marks(string id)
        {
            this.id = id;
        }

        public double OverallExam()
        {
            return (0.4 * hyexam) + (0.6 * anexam);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T17:45:28.453

我会说主要问题是你的建模。您已`Dictionary<int, List<Marks>>`在`Student`. 这意味着*每个* `Student`对象都有一个字典。这是没有意义的——因为字典的键是学生证，对吧？

`Student`对于您当前获得的标记列表中的每个对象来说，它可能是有意义的（尽管不是公共字段，IMO）。鉴于这些信息，你真的需要`Dictionary`去标记吗？在`Dictionary<int, Student>`某个地方（*不在*`Student`课堂上 - 可能在`School`课堂上？）将每个学生 ID 映射到 a会不会更干净`Student`，并且您可以从`Student`?

认真思考您想要实现的目标，以及数据真正属于哪里。以我的经验，当您正确地进行数据建模时，代码通常会以一种简洁的方式出现。

（我还会`Marks`在名称和设计方面质疑您的课程。这些属性代表什么？它真的不是考试中的一个分数吗？也许`ExamResult`会更清楚？它真的需要可变吗？ )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:34:45.520

我同意乔恩的观点，这绝对是一个建模问题（基于 OP 的其他帖子）。如果您是面向对象编程的新手，您需要做的第一件事是确定您需要创建哪些对象来回答问题。

**什么是学生？**学生有姓名、身份证、出生日期、班级年份等。对于学生拥有的每个属性，您需要设置一个字段或属性。

```
public class Student
{
    public int ID { get; set; }
    public string Name { get; set; }
    public DateTime DoB { get; set; }
    ... etc ...
} 
```

**什么是标记？**根据您的描述，Mark 有一个主题、一个期中考试分数和一个年考分数。

```
public class Mark
{
    public string Subject { get; set; }
    public int MidScore { get; set; }
    public int FinalScore { get; set; }
} 
```

**学生和标记之间是什么关系？**一个学生有一个与他们相关的标记列表。这最好用 List<> 对象来描述。

```
public class Student() // continued
{
    public List<Mark> Marks { get; set; }
} 
```

一旦您为您的对象设置了基础知识，就可以更轻松地过滤掉您不需要的内容，并且更容易回答您的问题。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:59:06.440

我的建议：

你的“Mark”类必须有一些标识主题的东西（可以是一个名为 Subject 的枚举，或者一个字符串，或者一个带有主题 ID 的 int，如果你将它存储在数据库中）

然后你可以有：

```
Console.WriteLine("enter id of student to input marks to:");
string id = Console.ReadLine();

var marks = new Dictionary<int, List<Mark>>();

if (UserExists(id))
{
    Console.WriteLine("mark for subject1:");        
    string s1 = Console.ReadLine();
    Console.WriteLine("mark for subject2:");        
    string s2 = Console.ReadLine();

    var list = new List<Mark>();
    list.Add(new Mark { Subject = SubjectEnum.Subject1, Value = Convert.ToDecimal(s1), });
    list.Add(new Mark { Subject = SubjectEnum.Subject2, Value = Convert.ToDecimal(s2), });

    marks.Add(Convert.ToInt32(id), list)
}
else
{
    Console.WriteLine("id not found");
} 
```

希望这可以帮助。

# php - 无限滚动不是 Yii 的功能

> ID：13708722
> 
> 赞同：0
> 
> 时间：2012-12-04T17:39:19.880
> 
> 标签：php, yii, infinite-scroll

我在 Firefox 的错误控制台中收到这种类型的错误“$(...).infinitescroll is not a function” - 这与此站点非常相似：[https ://github.com/davialexandre/yiinfinite-scroll/issues/ 3](https://github.com/davialexandre/yiinfinite-scroll/issues/3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:39:19.880

更改这些行：

```
<script type="text/javascript">
    $.noConflict(); 
    // Code that uses other library's $ can follow here.
</script> 
```

对这些：

```
<script type="text/javascript">
     var $ = jQuery.noConflict(true);
     $.noConflict(); 
     // Code that uses other library's $ can follow here.
</script> 
```

它解决了这个问题。我仍然无法弄清楚原因。

# vba - Excel VBA：数据透视表 CubeField 事实表名称？

> ID：13708726
> 
> 赞同：0
> 
> 时间：2012-12-04T17:39:39.003
> 
> 标签：vba, excel, cube, olap-cube

我正在使用一个大型 OLAP 多维数据集，并且正在构建非常基本的搜索功能来帮助我解析大量数据（约 30 个事实表、30 个维度以及计算度量），但我遇到了一个有趣的问题。当我访问`CubeField.Name`事实表成员或计算度量的属性时，它会通过`[Measures].[FieldName]`而不是将我指向正确的事实表/计算度量文件夹。
这是我正在使用的代码：

```
Sub X()

    Dim pvtTable As PivotTable
    Dim oCubeField As CubeField

    Set pvtTable = ActiveSheet.PivotTables(1)
    For Each oCubeField In pvtTable.CubeFields
        If InStr(LCase(oCubeField.Name), "spread") > 0 Then
            Debug.Print oCubeField.Parent & ": " & oCubeField.Name
        End If

    Next

End Sub 
```

关于如何实际获得事实表名称的任何想法？还是计算度量的文件夹结构？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:22:02.383

试试`oCubeField.Value`吧。CubeField 对象的[引用说：](http://msdn.microsoft.com/en-us/library/ff196040%28v=office.14%29.aspx)

> **Name** 返回一个表示对象名称的字符串值。
> 
> **Value** 返回一个字符串值，表示指定字段的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-30T13:02:02.357

不幸的是，您不能这样做，因为度量表达式可能链接到几个事实表。

但是您可以使用 OpenSchema() 函数查询和分析多维数据集元数据。

像这样的东西：

```
Sub GetMeasuresList()
    Const adSchemaMeasures = 36

    Set ADOCon = ActiveCell.PivotTable.PivotCache.ADOConnection

    Set RecSet = ADOCon.OpenSchema(adSchemaMeasures)

    While Not RecSet.EOF
        Debug.Print RecSet!MEASURE_NAME & ": " & RecSet!EXPRESSION
        RecSet.MoveNext
    Wend

End Sub 
```

[用于 OLAP 模式行集的 OLE DB](https://docs.microsoft.com/en-us/bi-reference/schema-rowsets/ole-db-olap/ole-db-for-olap-schema-rowsets)

[如何在 Visual Basic 中使用 ADO OpenSchema 方法](https://support.microsoft.com/en-us/help/186246/how-to-use-the-ado-openschema-method-in-visual-basic)

# joomla - 在 joomla 中使用模板会出现致命错误

> ID：13708733
> 
> 赞同：0
> 
> 时间：2012-12-04T17:40:10.243
> 
> 标签：joomla, joomla-extensions, joomla3.0

我正在尝试在 Joomla 3.0 中使用模板。我在 Joomla 上安装了模板，并尝试使用预览按钮查看它。但是我得到了这个错误。

`( ! ) Fatal error: Call to undefined function mosShowListMenu()`，除此之外，我还收到其他 3 个警告，例如：

```
Warning: include_once(C:\wamp\www\HAMED\templates\jf_texturiaDS/scripts/php/mainmenu.php)

Warning: include_once() [function.include]: Failed opening 'C:\wamp\www\HAMED\templates\jf_texturiaDS/scripts/php/mainmenu.php' for inclusion (include_path='.;C:\php\pear') 
```

有谁知道这些错误来自哪里以及如何解决它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:56:12.207

您好，您确定您的模板是为 Joomla 3.0 构建的吗？还要检查您的模板组件或模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T23:23:16.517

前缀表明它来自`mos`Joomla! 1.0/1.5 错误，因此它可能不兼容，但更有可能您使用的模板依赖于模板创建者的扩展和模块。

一个快速的谷歌搜索显示了[BlueStone Design](http://www.bluestonedesign.de/faq/11-webdesign/101--fatal-error-call-to-undefined-function-mosshowlistmenu-)的这个结果，翻译成：

> 为 Joomla 安装新模板后出现错误`Fatal error: Call to undefined function mosShowListMenu () on.`
> 
> 这可能有几个原因：
> 
> 1.  一些基本模块尚未激活。在后端只需激活所有模块。
> 2.  一些基本模块尚未安装。在下载的存档中再次查看是否仍会安装隐藏在插件或模块中的文件夹。
> 3.  错误的 Joomla 版本。也许模板是版本相关的。启用旧模式以测试项目。

***请注意***对“传统模式”的引用，这是一个 Joomla！1.5 插件帮助支持旧的 1.0 兼容模板和扩展...

# c# - 您正在下载的文件无法打开

> ID：13708737
> 
> 赞同：2
> 
> 时间：2012-12-04T17:40:16.763
> 
> 标签：c#, asp.net

我正在开发一个 asp.net 应用程序来生成报告并在 MS Word 中打开它。这在 Windows Server 2003 中运行良好。但是在将补丁应用到 Windows 之后，当我尝试从我的 Web 应用程序下载该 MS Word 文件时，我收到一条消息

> 默认程序无法打开您正在下载的文件。它已损坏或文件类型不正确。为安全起见，建议您取消下载

相同的应用程序在 Windows 7 中运行良好。有什么建议可以解决这个警告吗？

# maven - 如何获取命令行属性以覆盖 Maven 属性

> ID：13708738
> 
> 赞同：22
> 
> 时间：2012-12-04T17:40:19.900
> 
> 标签：maven, maven-release-plugin

我有一个 pom 文件，其中一些依赖项的版本号依赖于 pom 文件设置中指定的[项目版本](http://docs.codehaus.org/display/MAVENUSER/MavenPropertiesGuide)属性。我可以通过命令行覆盖它吗？如果是这样，怎么做？

长话短说：

我们目前正在将我们的项目过渡到 maven，但我们还没有完全做到。有多个模块仍未使用 maven 构建，因此是我们项目中的依赖项（它们通过 ant 构建到 jars 中）。发布后，我们希望构建所有这些 jar，并包含与父项目相同的版本号。对于发布，执行两个步骤（直到我们可以使用 maven 获取所有内容）

1.  这些罐子是用正确的发行版本 (12.12.4.0) 在 ant 中构建的。
2.  maven 发布插件用于将项目部署到我们的工件存储库。

在第二步中，命令行参数用于指定版本：

```
mvn release:prepare -DreleaseVersion=12.12.4.0 -DdevelopmentVersion=12.12.4.1-SNAPSHOT -Dtag=iv-12.12.4.0 
```

我希望使用指定的版本更新 pom 文件。但是，运行此命令时，仍使用 pom 文件中的版本 (12.12.4.0-SNAPSHOT)。这使“检查快照的依赖项和插件”步骤失败，我需要解析我的 jars，这些 jars 仍然具有 maven 版本属性中使用的 12.12.4.0-SNAPSHOT 版本。

这使我想到了如何覆盖它以使版本解析为命令行上指定的原始问题。可以让我过去的其他问题是：如何允许 maven 发布插件在此检查之前更新 pom 文件？如何跳过快照检查（不可取）

我可以在 pom 文件中创建一个可以覆盖的属性，但是我必须在 pom 文件中的两个位置维护版本号。

想法？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-04T18:56:57.083

从命令行直接将参数放入 pom 例如：

`mvn clean install -Dtestng.version=6.3.1`

例子：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
        <modelVersion>4.0.0</modelVersion>
        <groupId>com.test</groupId>
        <artifactId>test</artifactId>
        <version>1.0.0</version>
        <name>test</name>
        <properties>
                <testng.version>6.4</testng.version>
        </properties>

        <dependencies>
                <dependency>
                        <groupId>org.testng</groupId>
                        <artifactId>testng</artifactId>
                        <version>${testng.version}</version>
                        <scope>test</scope>
                </dependency>
        </dependencies>
</project> 
```

如果您正常运行，将使用 testng 6.4 版。但是如果你像这样运行它：`mvn clean install -Dtestng.version=6.3.1`将使用 testng 版本 6.3.1。

请参阅[在 Jenkins 中设置 Maven 参数](https://stackoverflow.com/a/9478622/651140)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-08T13:28:09.830

这是另一种选择：

```
<Logger name="com.mypackagename" level="${env:LOG_LEVEL:-error}" additivity="false">
  <AppenderRef ref="Console-Appender"/>
</Logger> 
```

${env:LOG_LEVEL:-error} 表示 env = 环境变量，LOG_LEVEL = env 名称，-error = 默认级别错误。

# forms - 在 Drupal 6 中为管理员添加系统变量的编辑功能

> ID：13708741
> 
> 赞同：3
> 
> 时间：2012-12-04T17:40:36.557
> 
> 标签：forms, drupal, drupal-6, global-variables, drupal-modules

我创建了一个自定义模块，它使用 variable_set() 设置系统变量。我希望具有适当权限的人能够通过管理员编辑此变量。我确信有贡献的模块允许您编辑系统变量，但我正在寻找一种方法来将此功能直接包含在我的自定义模块中。我想可能会挂接到“站点信息”管理表单或“文件系统”管理表单，并包含一个文本字段，他们可以在其中编辑此系统变量并将其保存。解决这个问题的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:36:48.403

站点信息表单使用[`system_settings_form()`](http://api.drupal.org/api/drupal/modules%21system%21system.module/function/system_settings_form/6)这意味着您只需将变量作为元素添加到表单中（使用`hook_form_alter()`或，如下所示`hook_form_FORM_ID_alter()`），系统将处理保存它。

```
function MYMODULE_form_system_site_information_settings_alter(&$form, &$form_state) {
  $form['my_variable_name'] = array(
    '#type' => 'textfield', // or whatever element makes sense
    '#title' => t('Title'),
    '#default_value' => variable_get('my_variable_name', '')
  );
} 
```

表格也是如此[`system_file_system_settings()`](http://api.drupal.org/api/drupal/modules%21system%21system.admin.inc/function/system_file_system_settings/6)。

# mysql - UNION ALL mysql 子句中的行默认顺序？.. 我的意思是首先获取哪一行？

> ID：13708742
> 
> 赞同：2
> 
> 时间：2012-12-04T17:40:44.607
> 
> 标签：mysql, sql, union

例如，如果我有一个真正简单的查询：

> 选择 1 联合全部 选择 2

然后通过 Perl 或 PHP 获取行 - 我会将“1”作为第一行，将“2”作为第二行吗？这种行为在任何地方都有描述吗？...

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:35:06.873

没有默认顺序，不在表中也不在查询中，除非您使用 ORDER BY 指定显式顺序。

您可能会将 1 作为第一行，将 2 作为第二行，但这不是默认行为，并且在任何地方都没有描述。这只是巧合！

# javascript - 以两种不同的方式调用函数 - JavaScript

> ID：13708743
> 
> 赞同：1
> 
> 时间：2012-12-04T17:40:46.677
> 
> 标签：javascript, function, anonymous-function

我对 JavaScript 很陌生，所以如果这个答案非常明显或者我在叫错树，我很抱歉！

以下代码片段有什么区别：

```
function primeAddNum(innerHTML) {
    return function() {
        addNum(innerHTML);
        return false;
    };
}
var func = primeAddNum(innerHTML); 
```

第二个：

```
var func = function() {
        return function() {
            addNum(innerHTML);
            return false;
        };
}(); 
```

顶部按我喜欢的方式工作，但底部不是，但这对我来说并不太重要。我想知道的是每个块背后的逻辑，因为我看不出有什么区别！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:44:43.883

第二个块的问题`innerHTML`是那里没有定义，因为你没有通过它。如果您将其更改为：

```
var func = function(innerHTML) {
    return function() {
        addNum(innerHTML);
        return false;
    };
}(innerHTML); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:43:56.487

那么第二个你只能创建`func`一次。但是使用第一个，您可以创建许多：

```
var func1 = primeAddNum(innerHTML);
var func2 = primeAddNum(someOtherInnerHTML); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T17:43:37.953

没有区别，你可以同时使用没有任何问题

# android - 在片段android中删除并重新创建地图视图

> ID：13708747
> 
> 赞同：-1
> 
> 时间：2012-12-04T17:41:02.327
> 
> 标签：android

我正在使用**由 pete doyle 提供的 android support v4- google maps**并试图删除一个 mapview 然后重新创建它，当我离开并返回它时，但我不断收到通常的 **Java.lang.IllegalStateException: You are only允许在 MapActivity 中有一个 MapView**。任何人都知道如何正确解决这个问题。我的片段中有这段代码。

分段：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);
    Log.d(TAG, "onCreate View called here in location fragment!!");

    if(view == null){
      view = inflater.inflate(R.layout.map, container, false);  

    frame = (FrameLayout)view.findViewById(R.id.mapContainer);
    //mapview = (MapView)view.findViewById(R.id.mapView);
    }

    if(mapview == null){

        mapview = new MapView(getActivity(), getActivity().getString(R.string.map_api_key));  // keep getting the error on this line
        mapview_is_active = true;
    }

    mapview.setClickable(true);
    mapview.setBuiltInZoomControls(true);
    mapview.setSatellite(true); // Satellite View
    mapview.setStreetView(true); // Street View
    mapview.setTraffic(true); // Traffic View

    frame.addView(mapview,0);

    //frame = (FrameLayout)view.findViewById(R.id.mapContainer);   
   return view;
}

  @Override
    public void onActivityCreated(Bundle savedInstanceState){
        super.onActivityCreated(savedInstanceState);

       if(mapview == null){
           Log.d(TAG, "mapview is null here");
           mapview = new MapView(getActivity(), getActivity().getString(R.string.map_api_key));
       }

       if(frame.getChildAt(0) == null){
           Log.d(TAG, "mapview is null here in container");
           frame.addView(mapview);
       }

        MapController controller = mapview.getController();

        double lat = Double.parseDouble(longitude);
        double lon = Double.parseDouble(latitude);

        GeoPoint geopoint = new GeoPoint((int)(lat * 1E6), (int)(lon * 1E6));

        mapview.invalidate();

        List<Overlay> mapOverlays = mapview.getOverlays();
        Drawable drawable = this.getResources().getDrawable(R.drawable.map_point);
        AddMapOverlay add_map_overlay = new AddMapOverlay(drawable, getActivity());

        OverlayItem overlayitem = new OverlayItem(geopoint, name, address);

        add_map_overlay.addOverlay(overlayitem);

        mapOverlays.add(add_map_overlay);

        controller.animateTo(geopoint);
        controller.setZoom(15);
    } 
```

在我的 onStop() 中：

```
 @Override
    public void onStop(){
        super.onStop(); 

        if(frame != null){
            frame.removeView(mapview); // i remove the mapview here
        }   
    } 
```

这是我的 map.xml：

```
<FrameLayout  xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/mapContainer"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:layout_weight="1">

</FrameLayout> 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:59:55.223

我用下面的代码做到了这一点。我的 FragmentActivity 中有一个 MapView 实例变量，然后在下面的 Fragment 本身中添加和删除它（仅包括相关部分）：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    mLayoutMap = (FrameLayout) getActivity().findViewById(R.id.layoutMap);

    // create the map view if it's not already there
    if (((MyActivity)getActivity()).mMapView == null)
    {
        ((MyActivity)getActivity()).mMapView = 
                    new MapView(getActivity(), getActivity().getString(R.string.map_api_key));
        ((MyActivity)getActivity()).mMapView.setClickable(true);
    }

    // add the map view to the frame layout, at the lowest z-index
    mLayoutMap.addView(((MyActivity)getActivity()).mMapView, 0);

}

@Override
 public void onStop()
 {
     super.onStop();

     if (mLayoutMap.getChildCount() > 0 && mLayoutMap.getChildAt(0) instanceof MapView)
         mLayoutMap.removeViewAt(0);
 } 
```

mLayoutMap 只是我的 XML 中的 FrameLayout。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:26:51.780

通常我是这样做的（像你一样使用 android-support-v4-google_maps）：

1) 使用 attachMap 和 detachMap 方法实现 IMapActivity 等活动接口

```
public class MyMapActivity extends FragmentActivity implements IMapActivity {
    private MapView mMapView;

    public void attachMap(ViewGroup mapHolder) {
        if (mMapView == null) {
            mMapView = getLayoutInflater().inflate(R.id.mapview, null);
        }

        mapHolder.addView(mMapView);
    }

    public void detachMap(ViewGroup mapHolder) {
        mapHolder.removeView(mMapView);
    }
} 
```

2) 当需要在 Fragment.onDestroyView() 上附加 MapView 或分离 MapView 时调用该方法

```
public class MyMapFragment extends Fragment {
    private IMapActivity mMapViewHolder;

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        mMapViewHolder = (IMapActivity) activity;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        mMapViewHolder.attachMap(getMapHolder());
    }

    @Override
    public void onDestroyView() {
        mMapViewHolder.detachMap(getMapHolder());
        super.onDestroyView();
    }
} 
```

我将一些设置保存在一个单独的 xml MapView 中。当需要销毁Fragment时——分离MapView，在重新创建Fragment时附加MapView（你也可以在附加后更新MapView的控制器）。这允许我重用片段 MapView。

**PS** 我只是还没有找到任何方法来清理 MapViev 链接的 MapActivity。如果有办法，我将不胜感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:06:54.387

尝试使用`frame.removeAllViews()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-10T21:13:35.877

如果您正在使用 navHost，则需要以编程方式而不是在 XML 中添加它，因为它会被复制。

```
 val mapFragment = SupportMapFragment.newInstance()
        requireActivity().supportFragmentManager
            .beginTransaction()
            .add(R.id.mapFragment, mapFragment)
            .commit() 
```

# c# - 如何将字符串反序列化为类？

> ID：13708748
> 
> 赞同：2
> 
> 时间：2012-12-04T17:41:03.823
> 
> 标签：c#, asp.net, xml, serialization, text

我有以下文字：

```
id=1
familyName=Rooney
givenName=Wayne
middleNames=Mark
dateOfBirth=1985-10-24
dateOfDeath=
placeOfBirth=Liverpool
height=1.76
twitterId=@WayneRooney 
```

行用“\n”分隔，对用“=”分隔。

我有一个 Person 类，其中包含 Id、FamilyName、GivenName 等属性。

是否有任何简单的方法可以将上述文本反序列化为 Person 对象，然后使用正确的行和对分隔符将 Person 对象序列化为上述文本？

我希望有类似 TextSerializer 的东西？

基本上，我需要从文件中读取文本，例如 person1.txt，然后将其反序列化为 Person 对象。

如果可能的话，我想避免为每个属性手动硬编码。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:20:38.020

反射可以在这里提供帮助，无需硬编码属性名称和使用第三方库

```
var person = Deserialize<Person2>("a.txt"); 
```

* * *

```
T Deserialize<T>(string fileName)
{
    Type type = typeof(T);
    var obj = Activator.CreateInstance(type);
    foreach (var line in File.ReadLines(fileName))
    {
        var keyVal = line.Split('=');
        if (keyVal.Length != 2) continue;

        var prop = type.GetProperty(keyVal[0].Trim());
        if (prop != null)
        {
            prop.SetValue(obj, Convert.ChangeType(keyVal[1], prop.PropertyType));
        }
    }
    return (T)obj;
} 
```

* * *

```
public class Person2
{
    public int id { set; get; }
    public string familyName { set; get; }
    public string givenName { set; get; }
    public string middleNames { set; get; }
    public string dateOfBirth { set; get; }
    public string dateOfDeath { set; get; }
    public string placeOfBirth { set; get; }
    public double height { set; get; }
    public string twitterId { set; get; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:43:24.260

这也是一个可能的解决方案。如果可能，您可以尝试在创建时将文本格式化为 json。所以你不需要所有这些治疗。只需使用[Json.net](http://james.newtonking.com/)

```
public class Person
{
    public int id { set; get; }
    public string familyName { set; get; }
    public string givenName { set; get; }
    public string middleNames { set; get; }
    public string dateOfBirth { set; get; }
    public string dateOfDeath { set; get; }
    public string placeOfBirth { set; get; }
    public double height { set; get; }
    public string twitterId { set; get; }
}

class Program
{
    static void Main(string[] args)
    {
        string line;
        string newText = "{";

        System.IO.StreamReader file =  new System.IO.StreamReader("c:\\test.txt");

        while ((line = file.ReadLine()) != null)
        {
            newText += line.Insert(line.IndexOf("=") + 1, "\"") + "\",";

        }
        file.Close();

        newText = newText.Remove(newText.Length -1);
        newText = newText.Replace("=", ":");
        newText += "}";

        Person Person = JsonConvert.DeserializeObject<Person>(newText);

        Console.ReadLine();
    }
} 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:12:36.403

正如其他人所提到的，您有几种选择：

1.  加载文件，将其转换为可与 XMLSerializer/DataContract 一起使用的 XML
2.  使用 IFormatter 编写自己的序列化程序
3.  通过读取文件手动执行（下面的示例）

    类人 { 公共 int ID { 获取；放; } 公共字符串 FamilyName { 获取；放; }

    ```
    public Person(string file)
    {
        if (!File.Exists(file))
            return;

        string[] personData = File.ReadAllLines(file);

        foreach (var item in personData)
        {
            string[] itemPair = item.Split('='); //do some error checking here to see if = isn't appearing twice
            string itemKey = itemPair[0];
            string itemValue = itemPair[1];
            switch (itemKey)
            {
                case "familyName":
                    this.FamilyName = itemValue;
                    break;
                case "id":
                    this.ID = int.Parse(itemValue);
                    break;
                default:
                    break;
            }

        }
    } 
    ```

    }

# com - 如何使用 C++ 访问 WriteableBitmap.PixelBuffer 像素？

> ID：13708755
> 
> 赞同：5
> 
> 时间：2012-12-04T17:41:16.563
> 
> 标签：com, windows-runtime, winrt-xaml, c++-cx

C# 的示例很多，但 MSDN 上只有一些 C++ 的代码片段。我已经把它放在一起，我认为它会起作用，但我不确定我是否要发布我必须发布的所有 COM 引用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T03:25:32.807

您的代码是正确的 -`IBufferByteAccess`接口上的引用计数`*buffer`通过对 的调用而增加`QueryInterface`，并且您必须调用`Release`一次以释放该引用。

但是，如果您使用`ComPtr<T>`，这将变得更加简单——使用`ComPtr<T>`，您不能调用`IUnknown`( `AddRef`、`Release`和`QueryInterface`) 的三个成员中的任何一个；它会阻止你打电话给他们。相反，它以一种难以搞砸的方式封装对这些成员函数的调用。这是一个外观示例：

```
// Get the buffer from the WriteableBitmap:
IBuffer^ buffer = bitmap->PixelBuffer;

// Convert from C++/CX to the ABI IInspectable*:
ComPtr<IInspectable> bufferInspectable(AsInspectable(buffer));

// Get the IBufferByteAccess interface:
ComPtr<IBufferByteAccess> bufferBytes;
ThrowIfFailed(bufferInspectable.As(&bufferBytes));

// Use it:
byte* pixels(nullptr);
ThrowIfFailed(bufferBytes->Buffer(&pixels)); 
```

`bufferInspectable.As(&bufferBytes)`对执行安全的调用`QueryInterface`：它根据 的类型计算 IID `bufferBytes`，执行`QueryInterface`，并将结果指针附加到`bufferBytes`。当`bufferBytes`超出范围时，它会自动调用`Release`. 该代码与您的代码具有相同的效果，但没有容易出错的显式资源管理。

该示例使用以下两个实用程序，有助于保持代码整洁：

```
auto AsInspectable(Object^ const object) -> Microsoft::WRL::ComPtr<IInspectable>
{
    return reinterpret_cast<IInspectable*>(object);
}

auto ThrowIfFailed(HRESULT const hr) -> void
{
    if (FAILED(hr))
        throw Platform::Exception::CreateException(hr);
} 
```

* * *

细心的读者会注意到，由于这段代码使用 a`ComPtr`表示`IInspectable*`我们从中得到的，因此与原始代码相比`buffer`，这段代码实际上执行了一个额外的`AddRef`/ 。`Release`我认为这种影响性能的可能性很小，最好从易于验证是否正确的代码开始，然后在了解热点后优化性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:41:16.563

这是我到目前为止所尝试的：

```
// Get the buffer from the WriteableBitmap
IBuffer^ buffer = bitmap->PixelBuffer;

// Get access to the base COM interface of the buffer (IUnknown)
IUnknown* pUnk = reinterpret_cast<IUnknown*>(buffer);

// Use IUnknown to get the IBufferByteAccess interface of the buffer to get access to the bytes
// This requires #include <Robuffer.h>
IBufferByteAccess* pBufferByteAccess = nullptr;
HRESULT hr = pUnk->QueryInterface(IID_PPV_ARGS(&pBufferByteAccess));

if (FAILED(hr))
{
    throw Platform::Exception::CreateException(hr);
}

// Get the pointer to the bytes of the buffer
byte *pixels = nullptr;
pBufferByteAccess->Buffer(&pixels);

// *** Do the work on the bytes here ***

// Release reference to IBufferByteAccess created by QueryInterface.
// Perhaps this might be done before doing more work with the pixels buffer,
// but it's possible that without it - the buffer might get released or moved
// by the time you are done using it.
pBufferByteAccess->Release(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-01T07:29:34.647

当使用[C++/WinRT](https://aka.ms/cppwinrt)（而不是 C++/CX）时，有一个更方便（也更危险）的替代方案。语言投影在将 a 返回到内存缓冲区的接口`data()`上生成一个辅助函数。`IBuffer``uint8_t*`

假设它`bitmap`是[WriteableBitmap](https://docs.microsoft.com/en-us/uwp/api/windows.ui.xaml.media.imaging.writeablebitmap)类型，则可以将代码缩减为：

```
uint8_t* pixels{ bitmap.PixelBuffer().data() };

// *** Do the work on the bytes here ***

// No cleanup required; it has already been dealt with inside data()'s implementation 
```

在代码`pixels`中是指向由`bitmap`实例控制的数据的原始指针。因此，它仅在`bitmap`活着的情况下才有效，但代码中没有任何内容可以帮助编译器（或阅读器）跟踪该依赖关系。

作为参考，文档中有一个示例[说明](https://docs.microsoft.com/en-us/uwp/api/windows.ui.xaml.media.imaging.writeablebitmap.pixelbuffer#examples)`WriteableBitmap::PixelBuffer`了（否则未记录的）辅助函数的使用`data()`。

# java - ArrayAdapter 自身不刷新（仅更新最后一个元素）

> ID：13708759
> 
> 赞同：-1
> 
> 时间：2012-12-04T17:41:23.827
> 
> 标签：java, android, android-layout

`"adapter.notifyDataSetChanged();"`正如我的帖子所述，尽管调用了仅更新列表中的最后一个元素，但我似乎无法让我的 ArrayAdapter 更新整个列表。

有人可以看到我在下面做错了什么吗？

这是我的自定义适配器

```
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class WeatherAdapter extends ArrayAdapter<Weather>{

    Context context; 
    int layoutResourceId;    
    Weather data[] = null;
    private WeatherHolder holder;
    private Weather weather;

    public WeatherAdapter(Context context, int layoutResourceId, Weather[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        holder = null;

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new WeatherHolder();
            holder.imgIcon = (TextView)row.findViewById(R.id.imgen);
            holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);

            row.setTag(holder);
        }
        else
        {
            holder = (WeatherHolder)row.getTag();
        }

        weather = data[position];
        holder.txtTitle.setText(weather.getName());
        //holder.imgIcon.setText(Double.toString(weather.getBuyingRate()));
        return row;
    }

    public void update(String buttonPressed){
        if(buttonPressed == "Köp Kurs"){
                            holder.imgIcon.setText(Double.toString(weather.getBuyingRate()));//This updates only the last element in list but I want to update every element in the list

        }
        else if(buttonPressed == "Antal"){              holder.imgIcon.setText(Double.toString(weather.getNrOfSharesInPortfolio()));//This updates only the last element in list but I want to update every element in the list

        }
    }

    static class WeatherHolder
    {
        TextView imgIcon;
        TextView txtTitle;
    }
} 
```

这是我的主类，当我调用“Update()”方法时，仅更新列表中的最后一个元素，而不更新其他元素。如何更新整个列表而不是列表中的最后一个元素？

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ListView;

public class MainActivity extends Activity {

    private ListView listView1;
    private Button goButton;
    private String[] listheader = {"Köp Kurs","Antal"};
    private WeatherAdapter adapter;
    private int totalElemInlist = listheader.length;
    private int currentelemInList=0;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Weather weather_data[] = new Weather[]
        {
            new Weather("ABB", 56.0, 300),
            new Weather("Volvo", 89.0,500),
            new Weather("Astra Zeneca", 98.55, 50)
        };

        adapter = new WeatherAdapter(this, 
                R.layout.listview_item_row, weather_data);

        listView1 = (ListView)findViewById(R.id.listView1);

        View header = (View)getLayoutInflater().inflate(R.layout.listview_header_row, null);
        listView1.addHeaderView(header);
        goButton = (Button) findViewById(R.id.testButton);
        goButton.setText(listheader[currentelemInList]);

        listView1.setAdapter(adapter);

        goButton.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                String buttonPressed = (String) ((Button) view).getText();

                goThroughList(buttonPressed);
                System.out.println("Button Clicked" + buttonPressed);
            }
          });
    }

    private void goThroughList(String buttonPressed){
        currentelemInList++;
        if(currentelemInList>=totalElemInlist){
            currentelemInList=0;
        }
        goButton.setText(listheader[currentelemInList]);

        if(buttonPressed == "Köp Kurs"){
            System.out.println("Köp kurs");
            adapter.update(buttonPressed);
            adapter.notifyDataSetChanged();//This only updates the last element in list
        }
        else if(buttonPressed == "Antal"){
            System.out.println("Antal");
            adapter.update(buttonPressed);
            adapter.notifyDataSetChanged();//This only updates the last element in list
        }
        System.out.println(currentelemInList);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:50:41.653

你应该像这样比较字符串。

```
buttonPressed.equals("Köp Kurs") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:03:12.813

> 如何更新整个列表而不是列表中的最后一个元素？

您必须在`getView()`. 每当用户滚动 ListView 或被调用`getView()`时，重绘每一行。`notifyDataSetChanged()`因此，更改必须在那里发生，否则它们将被删除。

首先在您的适配器中创建一个新的字段变量：

```
private String currentImage; 
```

`update()`控制内容的第二个更改`imgIcon`：

```
public void update(String buttonPressed){
    currentImage = buttonPressed;
    notifyDataSetChanged();
} 
```

最后更改`getView()`以显示每行的当前图像：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ...

    weather = data[position];
    holder.txtTitle.setText(weather.getName());

    if(currentImage.equals("Köp Kurs")){
        holder.imgIcon.setText(Double.toString(weather.getBuyingRate()));
    }
    else if(currentImage.equals("Antal")){
        holder.imgIcon.setText(Double.toString(weather.getNrOfSharesInPortfolio()));
    }
    return row;
} 
```

（您也可以简化`goThroughList()`，因为 if-else 包含完全相同的代码。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:03:38.790

我可能是错的，但我认为问题在于你只持有持有人的最后一个元素。适配器中的成员变量“holder”应该是数组或列表，你应该持有所有元素，并且在更新方法中你应该遍历持有者数组并更改文本

```
public void update(String buttonPressed){
    for(int index =0 ; index < holder.size();index++){
        if(buttonPressed == "Köp Kurs"){
                            holder[index].imgIcon.setText(Double.toString(weather.getBuyingRate()));//This updates only the last element in list but I want to update every element in the list

        }
        else if(buttonPressed == "Antal"){              holder[index].imgIcon.setText(Double.toString(weather.getNrOfSharesInPortfolio()));//This updates only the last element in list but I want to update every element in the list

        } 
```

这应该可以解决您的问题

# php - Doctrine\ORM\ORMException: Doctrine 2（当前）不支持这种行为

> ID：13708761
> 
> 赞同：3
> 
> 时间：2012-12-04T17:41:39.657
> 
> 标签：php, doctrine-orm

我正在运行一个使用 codeigniter 和教义 2 的应用程序堆栈。直到几天前，我一直在成功运行命令行工具来生成我的模型、代理和数据库。Y'day 我对我的 XML 映射做了一些补充，现在如果我运行

```
php doctrine-cli.php orm:create 
```

它给了我以下错误并退出：

```
[Doctrine\ORM\ORMException] This behaviour is (currently) not supported by Doctrine 2 
```

然而，我做到了

```
php doctrine-cli.php orm:validate-schema --verbose 
```

这给了我以下信息：

```
[Mapping]  OK - The mapping files are correct.

[Doctrine\ORM\ORMException]
This behaviour is (currently) not supported by Doctrine 2

Exception trace:
 () at C:\wamp\www\frsale\application\libraries\Doctrine\ORM\ORMException.php:12
8
 Doctrine\ORM\ORMException::notSupported() at C:\wamp\www\frsale\application\lib
raries\Doctrine\ORM\Tools\SchemaTool.php:439
 Doctrine\ORM\Tools\SchemaTool->_gatherRelationsSql() at C:\wamp\www\frsale\appl
ication\libraries\Doctrine\ORM\Tools\SchemaTool.php:213
 Doctrine\ORM\Tools\SchemaTool->getSchemaFromMetadata() at C:\wamp\www\frsale\ap
plication\libraries\Doctrine\ORM\Tools\SchemaTool.php:711
 Doctrine\ORM\Tools\SchemaTool->getUpdateSchemaSql() at C:\wamp\www\frsale\appli
cation\libraries\Doctrine\ORM\Tools\SchemaValidator.php:287
 Doctrine\ORM\Tools\SchemaValidator->schemaInSyncWithMetadata() at C:\wamp\www\f
rsale\application\libraries\Doctrine\ORM\Tools\Console\Command\ValidateSchemaCom
mand.php:77
 Doctrine\ORM\Tools\Console\Command\ValidateSchemaCommand->execute() at C:\wamp\
www\frsale\application\libraries\Doctrine\Symfony\Component\Console\Command\Comm
and.php:239
 Symfony\Component\Console\Command\Command->run() at C:\wamp\www\frsale\applicat
ion\libraries\Doctrine\Symfony\Component\Console\Application.php:193
 Symfony\Component\Console\Application->doRun() at C:\wamp\www\frsale\applicatio
n\libraries\Doctrine\Symfony\Component\Console\Application.php:106
 Symfony\Component\Console\Application->run() at C:\wamp\www\frsale\application\
doctrine-cli.php:42

orm:validate-schema 
```

* * *

有人可以指出我这里可能是什么问题。

注意：我的实体和代理生成没有任何问题

编辑：当我发现问题时关闭它，它只不过是映射中定义的关系，它造成了问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-12-16T21:56:19.227

当实体映射出现问题时，通常会发生此错误。例如：

```
 /**    
    * @OneToMany(targetEntity="Task", mappedBy="")
    */
    private $task 
```

这里没有指定上面的 mappedBy 属性，这导致了这个错误。

# macos - 在 JNI (OSX) 中添加 USB（添加/删除）通知 - 失败

> ID：13708763
> 
> 赞同：0
> 
> 时间：2012-12-04T17:41:40.037
> 
> 标签：macos, notifications, java-native-interface, usb

我使用了以下代码：

[如何知道何时在 Cocoa 中连接了 HID USB/蓝牙设备？](https://stackoverflow.com/questions/9918429/how-to-know-when-a-hid-usb-bluetooth-device-is-connected-in-cocoa)

并将其添加到我的 jni 库中。通知方法永远不会被调用。

然后我在一个小应用程序中测试了代码（没有 java / 主要是 C 代码）。我工作一切都很好。

我的猜测是 Java 正在阻止通知发生。

关于我能做什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:32:34.383

我相信这是因为在 Java/JNI 环境中没有运行运行循环。

看看[javahidapi](http://code.google.com/p/javahidapi/source/browse/jni-impl/HIDManager.cpp?r=0095c71ffa6b2f1faa53789c8c6ae5ae9c8458af)是如何实现的，特别是它如何创建一个单独的线程来运行`hid_runloop_thread()`，然后调用`CFRunLoopRunInMode()`它直到它返回一个完成/取消状态。

`CFRunLoopAddSource ()`请注意，运行循环是特定于线程的，因此您需要`IOServiceAddMatchingNotification()`在调用`CFRunLoopRunInMode()`.

# ruby-on-rails - 使用 rails 控制台错误

> ID：13708767
> 
> 赞同：0
> 
> 时间：2012-12-04T17:41:54.393
> 
> 标签：ruby-on-rails, ruby, console

我的应用程序上有 Produtor 模型，我正在尝试使用 rails 控制台对其进行调试。

但是当我尝试在我的应用程序目录中使用 rails 控制台时，我收到了这个错误

```
D:\ruby\app>rails console
Loading development environment (Rails 3.2.9)
irb(main):001:0> Produtors.all
NameError: uninitialized constant Produtors
        from (irb):1
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T17:43:50.043

您需要改用模型的名称`Produtor`。额外的 s 会让你失望。试试`Produtor.all`吧。

# css - 在css3中为三角形元素添加边框

> ID：13708768
> 
> 赞同：1
> 
> 时间：2012-12-04T17:41:55.650
> 
> 标签：css, animation, geometry, border

这是我的代码

CSS

```
#page {
    width: 900px;
    padding: 0px;
    margin: 0 auto;
    direction: rtl;
    position: relative;
}
#box1 {
    position: relative;
    width: 500px;
    border: 1px solid black;
    box-shadow: -3px 8px 34px #808080;
    border-radius: 20px;
    box-shadow: -8px 5px 5px #888888;
    right: 300px;
    top: 250px;
    text-align: justify;
    -webkit-transition: all .75s;
    font-size: large;
    color: Black;
    padding: 10px;
    background: #D0D0D0;
    opacity: 0;
}
@-webkit-keyframes myFirst {
    0% {
        right: 300px;
        top: 160px;
        background: #D0D0D0;
        opacity: 0;
    }
    100% {
        background: #909090;
        :;
        right: 300px;
        top: 200px;
        opacity: 1;
    }
}
#littlebox1 {
    top: 200px;
    position: absolute;
    display: inline-block;
}
.littlebox1-sentence {
    font-size: large;
    padding-bottom: 15px;
    padding-top: 15px;
    padding-left: 25px;
    padding-right: 10px;
    background: #D0D0D0;
    border-top-right-radius: 10px;
    border-bottom-right-radius: 10px;
    -webkit-transition: background .25s ease-in-out;
}
#bothcontainer:hover ~ #box1 {
    -webkit-transition: all 0s;
    background: #909090;
    :;
    right: 300px;
    top: 200px;
    -webkit-animation: myFirst .75s;
    -webkit-animation-fill-mode: initial;
    opacity: 1;
}
#bothcontainer:hover .littlebox1-sentence {
    background: #909090
}
#bothcontainer:hover .triangle {
    border-right: 25px solid #909090
}
.triangle {
    position: relative;
    width: 0;
    height: 0;
    border-right: 25px solid #D0D0D0;
    border-top: 27px solid transparent;
    border-bottom: 24px solid transparent;
    right: 184px;
    -webkit-transition: border-right .25s ease-in-out;
} 
```

HTML

```
<body dir="rtl">
  <div id="page">
    <div id="bothcontainer">
        <div id="littlebox1" class="littlebox1-sentence">put your mouse here</div>
        <div id="littlebox1" class="triangle"></div>
    </div>
  <div id="box1"></div>
</div> 
```

我想给三角形添加一个边框，到`.littlebox1-sentence`.

边框*不会*改变它的颜色。

[这是一个小提琴](http://jsfiddle.net/gp43Q/)

* * *

我已经接近找到解决方案，但它仍然不是我想要的。

[小提琴](http://jsfiddle.net/DyxA4/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:50:12.420

我不完全确定你想要什么效果，但我会看看 -webkit-filter。它允许您向“此元素及其拥有的任何子元素，无论其形状如何”添加阴影。

```
#littlebox1 {
       top: 200px;
       position: absolute;
       display: inline-block;
       -webkit-filter: drop-shadow(green -10px 0 10px);
} 
```

[http://jsfiddle.net/DyxA4/](http://jsfiddle.net/DyxA4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:44:05.340

三角形是边界。你不能按照你的要求去做。只做一个图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T21:02:44.043

另一种解决方案：跳过基于边框的三角形并使用三个 div 代替：

```
<div class="sign">
    <div class="arrow"><div></div></div>
    <p>Lorem ipsum dolor</p>
</div> 
```

基本上，我们使用“.arrow div”来创建三角形，“.arrow”切断我们不需要的位：

[http://jsfiddle.net/k5J6M/1/](http://jsfiddle.net/k5J6M/1/)

# sharepoint - SiteMapNode 属性 - 值丢失 (SharePoint 2010)

> ID：13708771
> 
> 赞同：1
> 
> 时间：2012-12-04T17:42:01.167
> 
> 标签：sharepoint, sharepoint-2010, menu, aspmenu, sitemapnode

好的 - 我创建了一个继承[PortalSiteMapProvider](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.publishing.navigation.portalsitemapprovider.aspx)的自定义导航提供程序，并且我正在尝试通过 GetChildNodes 方法扩展我的类（[此处为简单示例](http://msdn.microsoft.com/en-us/library/cc789625%28v=office.14%29.aspx)）。

本质上，我要做的是将当前 SPWeb 的 SiteLogoUrl 字符串添加为每个 SPWeb 各自 SiteMapNode 的属性（称为 imgurl），以便稍后在我的自定义菜单控件（继承 SharePoint:AspMenu）中检索此值。

我在 GetChildNodes 下的提供程序中设置了这样的属性：

```
public override SiteMapNodeCollection GetChildNodes(SiteMapNode node)
    {
        PortalSiteMapNode portalNode = (PortalSiteMapNode)node;
        if (portalNode != null)
        {
            if (portalNode.Type == NodeTypes.Area)
            {
                SiteMapNodeCollection nodeColl = base.GetChildNodes(portalNode);

                using (SPSite currentSite = new SPSite(portalNode.PortalProvider.CurrentSite.Url))
                {
                    foreach (SiteMapNode topLevelNode in nodeColl)
                    {
                        foreach(SiteMapNode currentNode in topLevelNode.ChildNodes)
                        {
                            string currentWebUrl = currentNode.Url.Substring(0, currentNode.Url.ToLower().IndexOf("/pages/"));
                            using (SPWeb currentWeb = currentSite.OpenWeb(currentWebUrl))
                            {
                                if (!string.IsNullOrEmpty(currentWeb.SiteLogoUrl))
                                {
                                    currentNode["imgurl"] = currentWeb.SiteLogoUrl;
                                }
                            }                            
                        }
                    }
                }

                return nodeColl;
            } 
```

现在我可以调试它并在插入后检索值（x 是节点的索引，我在命令行窗口中执行此操作）：

? topLevelNode.ChildNodes[x]["imgurl"]

并返回图片的url：“/_layouts/images/myimage.jpg”

现在..当我尝试在我的自定义菜单控件中执行此操作时，我首先获得了我的自定义导航提供程序的句柄，如下所示：

```
 CustomNavProvider customProvider = (CustomNavProvider)SiteMap.Providers["CustomNavProvider"];
                SiteMapNode currentNode = customProvider.FindSiteMapNode(childitem.NavigateUrl); 
```

并且 currentNode 变量现在包含我的 SiteMapNode ......很棒，但是现在只有一个名为“AlternateUrl”的属性，而不是我之前添加的属性 - 我在提供程序中添加的 imgurl 属性现在已经消失了。所有其他属性，如 title、desc 等都在那里，所以它肯定会返回正确的节点。

我这里有什么问题？当我将属性添加到提供程序中的节点时，是否没有保留该属性？

任何帮助或建议表示赞赏。

# c# - 敌人在 XNA 中跟随玩家并在 20 像素内停止

> ID：13708772
> 
> 赞同：-3
> 
> 时间：2012-12-04T17:42:36.617
> 
> 标签：c#, visual-studio-2010, xna, xna-4.0, 2d-games

我试图让我的敌人跟随玩家并在 20 像素内停止，我尝试了多种算法，包括 Vector2.Lerp(); 尝试解决此问题的方法，但它不断破坏构建。任何帮助将不胜感激。代码如下。

```
public void Update(GameTime gameTime)
{
    if (this.IsAlive)
    {
        float elapsed = (float)gameTime.ElapsedGameTime.TotalSeconds;
        double distanceToPlayer = Math.Sqrt(Math.Pow(Level.Player.Position.X - this.Position.X, 2) + Math.Pow(Level.Player.Position.Y - this.Position.Y, 2));

        // Calculate tile position based on the side we are walking towards.
        float posX = Position.X + localBounds.Width / 2 * (int)direction;
        int tileX = (int)Math.Floor(posX / Tile.Width) - (int)direction;
        int tileY = (int)Math.Floor(Position.Y / Tile.Height);

        if (waitTime > 0)
        {
            // Wait for some amount of time.
            waitTime = Math.Max(0.0f, waitTime - (float)gameTime.ElapsedGameTime.TotalSeconds);
            if (waitTime <= 0.0f)
            {
                // Then turn around.
                direction = (FaceDirection)(-(int)direction);
            }
        }
        else
        {
            // If we are about to run into a wall or off a cliff, start waiting.
            if (Level.GetCollision(tileX + (int)direction, tileY - 1) == TileCollision.Impassable || Level.GetCollision(tileX + (int)direction, tileY) == TileCollision.Passable) //is the enemy is close and is not attacking, attack and turn!
            {
                waitTime = MaxWaitTime;
            }
            else
            {
                // Move in the current direction.
                Vector2 velocity = new Vector2((int)direction * MoveSpeed * elapsed, 0.0f);
                position = position + velocity;
            }
        }
        dtAttack += gameTime.ElapsedGameTime;
        AttackPlayer();
    }
    else
    {
        dt += gameTime.ElapsedGameTime;
        if (dt.TotalSeconds > (sprite.Animation.FrameCount * sprite.Animation.FrameTime))
            this.Remove = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:19:24.197

屏幕上必须是20像素吗？似乎很奇怪。`Vector2.Distance`您可以尝试使用该方法计算玩家和敌人之间的欧几里得距离。如果距离为 20 或更低，则阻止敌人。如果没有，请继续关注玩家。

# jquery - jQuery格式化的CSS不适用于隐藏元素？

> ID：13708775
> 
> 赞同：1
> 
> 时间：2012-12-04T17:42:42.983
> 
> 标签：jquery, css

我正在将 CSS 应用于某些元素并让它们显示：无；并且每当用户单击单选按钮时，它将显示：无；关闭元素并显示它。

但是，我通过 jQuery 将 CSS 应用于这些元素。每当加载页面时..不应用宽度。我有 setwidth(1/2) 或其他东西，它会找到父 div 的宽度，将其切成两半，然后将该宽度设置为该宽度。但是，由于整个 div 显示为无，一旦加载页面，它甚至不会抓取该 jquery 函数来执行此操作......所以宽度是 0px .. 每当我加载 DIV 时，它..一切都结束了，基本上只是一个巨大的 0px 宽度的 DIV。

我该怎么做呢？

好的，我在哪里，作为 JFiddle 的 wifi 过滤并阻止了对它的访问。但这是我的标记：

HTML：

```
<fieldset id="new_item">
    <legend>New Item</legend>
    <div class="input-row">
        <div class="input-wrap setwidth(1/2)">
            @Html.LabelFor(model => model.ProductDescription, T("Product Description (maximum of 30 characters"))
            @Html.TextBoxFor(model => model.ProductDescription, new { @class = "setwidth(1)", @maxlength = "30" })
        </div>
        <div class="input-wrap setwidth(1/2)">
            @Html.LabelFor(model => model.ProductClass, T("Product Class"))
            @Html.DropDownListFor(model => model.ProductClass, new System.Web.Mvc.SelectList(Model.ProductClasses, "Value", "Key"), new { @class = "setwidth(1)" })
        </div>
    </div> 
```

还有更多，但这里是我的 jQuery 和 CSS：

```
<style type="text/css">
.hide { display: none; }
</style>
<script type="text/javascript">
    $(document).ready(function () {
        $('#new_item').addClass('hide');
        $('#existing_item').addClass('hide');
        $('#StateOfItem').change(function () {
            //every time value of StateOfItem is changed
            if ($('.new_item').is(':checked')) {
                $('#new_item').removeClass('hide');
                $('#existing_item').addClass('hide');
            }
            else if ($('.existing_item').is(':checked')) {
                $('#new_item').addClass('hide');
                $('#existing_item').removeClass('hide');
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:55:32.503

我总是使用这样的功能：

```
 function getBlockWidth(block) {
        var oldStyle = block.attr('style');
        block.css({
            'display' : 'block',
            'visibility' : 'hidden',
            'position' : 'absolute'
        });
        var h = block.outerWidth();
        block
            .removeAttr('style')
            .attr('style', oldStyle);
        return h;
    } 
```

用法：

```
var someItemWidth = getBlockWidth( $('#new_item') ); 
```

您可以将其重写为 jQuery 插件，但我使用它作为我的帮助对象的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:49:00.513

显示属性设置为 none 不会保留元素的“空间”。您应该改用可见性：

```
$('#myelem').css('visibility','hidden');
$('#myelem').css('visibility','visible'); 
```

# class - 从抽象模板类继承有什么好处吗？

> ID：13708777
> 
> 赞同：1
> 
> 时间：2012-12-04T17:42:48.990
> 
> 标签：class, templates, inheritance, abstract, base

我的意思是执行以下操作：

```
template<class Type> class Foo {
public:
... // Code Here.
};

class Bar : public Foo<Type> {
public:
...
}; 
```

声明类 Bar 时的*Type*实际上是类型（int、bool 等）或预先创建的类型。

如果这个问题太模糊，或者如果它已经被回答，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:56:56.263

语言功能是否有用，实际上取决于您*使用*它的方式和位置。对于从模板化抽象模板继承，这是我能想到的一个假设场景，它*可能*有用。

```
template <typename Type> class Gadget {
public:
    string name() = 0;
};

class SmartPhone : public Gadget<Phone> {
public:
    string name() { return "I am a smart phone"; }
};

class SportsCar : public Gadget<Car> {
public:
    string name() { return "I am a sports car"; }
};

vector<Gadget*> inventory;
inventory.push_back(new SmartPhone());
inventory.push_back(new SportsCar());
// etc ... 
```

请注意，这可能不是实现它的最佳方式，但我的观点是，您总能找到对所有事物的用途。:)

# javascript - 替换字符串 JavaScript 中的一些字符

> ID：13708779
> 
> 赞同：1
> 
> 时间：2012-12-04T17:42:54.170
> 
> 标签：javascript, string

我需要替换字符串中的多个字符。我有一条线——“ **123AB** ”

我需要更换**%D1**的**A**和**%D2**的**B**。

 ******我该怎么做呢？可以用**.replace**完成，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T17:48:00.410

[`String.replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)很简单

```
"ABCDEFA".replace(/A/g, "a") // outputs "aBCDEFa"
"ABCDEFB".replace(/B/g, "b") // outputs "AbCDEFb" 
```

所以你可以使用

```
"123AB".replace(/A/g, "%D1").replace(/B/g, "%D2"); 
```

但是，您可以通过传递替换函数而不是要替换的字符串来一次性完成

```
"123AB".replace(/A|B/g, function(match) {
     var repacements = {A: '%D1', B: '%D2'};
     return replacements[match];
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T17:47:59.703

这很简单，第一个参数是您要替换的内容，第二个参数是您要替换的内容：

```
var str = "123AB";
str = str.replace( "A", "%D1" ).replace( "B", "%D2");
//str is now "123%D1%D2" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:47:28.130

这应该工作.. `str.replace("A",D1)`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-04T17:49:13.403

这取代了所有的发生

```
var rep = function (s, search, replacement) { 
   while(s.indexOf(search) >= 0) 
       s = s.replace(search, replacement); 
   return s;
}
var s = rep("123AB", "A", "%D1"); 
```******

# iphone - XCode 4.5.2 为什么我可以在 iPad 上运行为 iPhone 构建的应用程序？

> ID：13708780
> 
> 赞同：0
> 
> 时间：2012-12-04T17:42:57.913
> 
> 标签：iphone, ipad, app-store, xcode4.5

我最近升级到 xCode 4.5.2 并尝试将应用重新提交到应用商店。苹果小黄人在 iPad 上运行了我的应用程序，但它不起作用。所以这个应用程序被拒绝了。

我一次又一次地尝试，唯一能让它失败的方法就是在 iPad 上运行它。我的问题是：**如果我使用 xCode，为什么我可以在 iPad 上运行适用于 iPhone 的应用程序？**

*   iPad 没有情节提要文件
*   目标设备系列是 iPhone
*   iPad 甚至没有图标文件，所以它只是在 iPad 的主屏幕上显示修剪后的启动图像
*   如果我使用 iPad，我在应用商店中搜索时看不到我发布的应用

我遇到的错误涉及踩踏和核心数据。我的数据模型是只为 iPhone 编译的，而不是为 iPad 编译的吗？

![在此处输入图像描述](../Images/9ef67567e940009413bcb6d7d692d62a.png) ![在此处输入图像描述](../Images/cc9d33a2882df890ec8a207d41a47c53.png)

# jquery - 数据表警告（表 id = 'example'）：无法重新初始化数据表

> ID：13708781
> 
> 赞同：78
> 
> 时间：2012-12-04T17:42:59.067
> 
> 标签：jquery, html, datatables

我正在使用数据表示例并在加载页面时收到这样的错误：数据表警告（表 id = 'example'）：无法重新初始化数据表。要检索此表的 DataTables 对象，请不传递任何参数或查看 bRetrieve 和 bDestroy 的文档。

我试图测试 fnRowCallback

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />

<title>DataTables live example</title>
<script type="text/javascript" charset="utf-8" src="DataTables/media/js/jquery.js"></script>
<script class="jsbin" src="http://datatables.net/download/build/jquery.dataTables.nightly.js"></script>
<style type="text/css">
  @import "DataTables/media/css/demo_table.css";
</style>
</head>
 <body id="dt_example">
<script>
$(document).ready(function() {
    $('#example').dataTable();
} );

$(document).ready( function() {
  $('#example').dataTable( {
   "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
     // Bold the grade for all 'A' grade browsers
     if ( aData[4] == "A" )
     {
       $('td:eq(4)', nRow).html( '<b>A</b>' );
     }
   }
 } );
 } );
    </script>

<div id="container">
  <h1>Live example</h1>

  <table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
    <thead>
      <tr>
        <th>Rendering engine</th>
        <th>Browser</th>
        <th>Platform(s)</th>
        <th>Engine version</th>
        <th>CSS grade</th>
      </tr>
    </thead>
    <tbody>
      <tr class="odd gradeX">
        <td>Trident</td>
        <td>Internet Explorer 4.0</td>
        <td>Win 95+</td>
        <td class="center"> 4</td>
        <td class="center">X</td>
      </tr>
      <tr class="even gradeC">
        <td>Trident</td>
        <td>Internet Explorer 5.0</td>
        <td>Win 95+</td>
        <td class="center">5</td>
        <td class="center">C</td>
      </tr>
      <tr class="odd gradeA">
        <td>Trident</td>
        <td>Internet Explorer 5.5</td>
        <td>Win 95+</td>
        <td class="center">5.5</td>
        <td class="center">A</td>
      </tr>
      <tr class="even gradeA">
        <td>Trident</td>
        <td>Internet Explorer 6</td>
        <td>Win 98+</td>
        <td class="center">6</td>
        <td class="center">A</td>
      </tr>
      <tr class="odd gradeA">
        <td>Trident</td>
        <td>Internet Explorer 7</td>
        <td>Win XP SP2+</td>
        <td class="center">7</td>
        <td class="center">A</td>
      </tr>
      <tr class="even gradeA">
        <td>Trident</td>
        <td>AOL browser (AOL desktop)</td>
        <td>Win XP</td>
        <td class="center">6</td>
        <td class="center">A</td>
      </tr>
      <tr class="gradeA">
        <td>Gecko</td>
        <td>Firefox 1.0</td>
        <td>Win 98+ / OSX.2+</td>
        <td class="center">1.7</td>
        <td class="center">A</td>
      </tr>
      <tr class="gradeA">
        <td>Gecko</td>
        <td>Firefox 1.5</td>
        <td>Win 98+ / OSX.2+</td>
        <td class="center">1.8</td>
        <td class="center">A</td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <th>Rendering engine</th>
        <th>Browser</th>
        <th>Platform(s)</th>
        <th>Engine version</th>
        <th>CSS grade</th>
      </tr>
    </tfoot>
  </table>
</div>
</body>
</html> 
```

我在这做错了什么？

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-12-19T00:08:23.383

尝试将 "bDestroy": true 添加到选项对象文字中，例如

```
$('#dataTable').dataTable({
    ...
    ....
    "bDestroy": true
}); 
```

资料来源：[iodocs.com](https://iodocs.com/jquery/datatables-warningtable-id-example-cannot-reinitialise-data-table-2/)

或**删除第一个**：

```
$(document).ready(function() {
    $('#example').dataTable();
} ); 
```

在你的情况下是最好的选择**vjk**。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2013-02-15T06:16:56.160

您还可以`datatable`在创建新的之前使用以下代码销毁旧的`datatable`：

```
$("#example").dataTable().fnDestroy(); 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2012-12-04T17:44:29.440

您正在初始化数据表两次，为什么？

```
// Take this off
/*
$(document).ready(function() {
    $( '#example' ).dataTable();
} );
*/
$(document).ready( function() {
  $( '#example' ).dataTable( {
   "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
     // Bold the grade for all 'A' grade browsers
     if ( aData[4] == "A" )
     {
       $('td:eq(4)', nRow).html( '<b>A</b>' );
     }
   }
 } );
 } ); 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2017-12-01T11:15:57.490

在您的数据表中添加 "bDestroy": true 像：-

```
 $('#example').dataTable({
    ....
    stateSave: true,
    "bDestroy": true
    }); 
```

它会起作用的。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2016-12-14T07:08:04.077

您可以添加`destroy:true`到配置中以确保在重新初始化之前删除已经存在的数据表。

```
$('#example').dataTable({
    destroy: true,
    ...
}); 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2019-03-26T13:46:51.083

在绑定 DataTable 之前，您必须销毁数据表并清空表体，方法如下：

```
function Create() {
if ($.fn.DataTable.isDataTable('#dataTable')) {
    $('#dataTable').DataTable().destroy();
}
$('#dataTable tbody').empty();
//Here call the Datatable Bind function;} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-03-02T02:31:17.447

```
$('#example').dataTable(); 
```

让它成为一个类，这样你就可以一次实例化多个表

```
$('.example').dataTable(); 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-03-24T07:28:38.357

如果我们多次初始化dataTable，就会出现这个问题。那么我们必须删除前一个。

另一方面，我们也可以在创建新数据表之前以这种方式销毁旧数据表，使用以下代码：

```
$(“#example”).dataTable().fnDestroy(); 
```

还有另一种情况，假设您发送多个 ajax 请求，哪个响应将访问同一模板中的同一个表，那么我们也会收到错误。在这种情况下，fnDestroy 方法无法正常工作，因为您不知道哪个响应先出现或者以后。然后你必须`bRetrieve TRUE`在数据表配置中设置。就是这样。

这是我的情景：

```
<script type="text/javascript">

$(document).ready(function () {

        $('#DatatableNone').dataTable({
            "bDestroy": true
        }).fnDestroy();

        $('#DatatableOne').dataTable({
            "aoColumnDefs": [{
                "bSortable": false,
                "aTargets": ["sorting_disabled"]
            }],
            "bDestroy": true
        }).fnDestroy();

});

</script> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-12-04T17:44:35.793

删除第一个：

```
$(document).ready(function() {
    $('#example').dataTable();
} ); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-07-07T15:32:13.837

[https://datatables.net/reference/option/retrieve](https://datatables.net/reference/option/retrieve)

```
$('#example').dataTable({
    retrieve: true,
    ...
}); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-11-28T08:42:52.320

我知道这是一个老问题。如果您尝试再次重新初始化 Datatable，则可以很容易地重现此问题。

例如，在您`$('#example').DataTable( { searching: false} );`再次调用的某个函数中。

解决这个问题很容易。请按照步骤

1.  将 Datatable 初始化为**变量而不是直接初始化 DataTable 方法**。
    1.  例如，不要`$('#example').DataTable( { searching: false} );`像这样调用尝试在全局范围内（或在您正在使用的 javascription 范围内）声明它`var table = $('#example').DataTable( { searching: false } );`。
2.  现在，每当您`$('#example').DataTable( { searching: false} );` **再次**调用此方法时，在调用它之前执行以下操作
    3.  `if (table != undefined && table != null) { table.destroy(); table = null; }`
3.  完成上述步骤后，继续使用**相同变量重新初始化表，而不使用 var 关键字（因为您已经定义了它），**即`table = $('#example').DataTable( { searching: false } );`

JSFiddle 代码还附有相同代码的任何参考[http://jsfiddle.net/vibs2006/qxy4nwfg/](http://jsfiddle.net/vibs2006/qxy4nwfg/)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-05-20T12:38:39.067

在你的代码中搜索可能你已经初始化了 dataTable 两次。你应该有这样的代码：

```
$('#example').dataTable( {paging: false} ); 
```

在您的代码中只有一次。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-08-28T08:34:59.030

在搜索此主题时，我在其他地方找到了解决方案，但在此处添加了答案，因为我遇到了与上述相同的问题以及文本“未捕获的 TypeError：无法设置未定义的属性 '_DT_CellIndex'”。原因是由于表体中有一对多标签。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-07-04T09:30:17.480

在我的情况下，ajax 调用受到应用于表的数据插件标签的干扰。数据插件进行后台初始化，并且在您拥有它时会给出此错误以及 yourTable.DataTable({ ... }); 初始化。

从

```
 <table id="myTable" class="table-class" data-plugin="dataTable" data-source="data-source"> 
```

至

```
<table id="myTable" class="table-class" data-source="data-source"> 
```

# jsf - 带有 JSF 和 Icefaces 的 Glassfish

> ID：13708784
> 
> 赞同：0
> 
> 时间：2012-12-04T17:43:14.583
> 
> 标签：jsf, tags, glassfish, render, icefaces

我正在将一个 jboss JSF/IceFaces 应用程序迁移到 Glassfish 3.1.2.2。我已经创建了数据源，部署了应用程序，但出乎意料的是，浏览器向我显示了 JSF 代码，它只是渲染了 JSF。如果我遵循 JSF 的“标准”并且它适用于 Weblogic 和 jboss，那么 Glassfish 会出现什么问题？

谢谢你的帮助，何塞克鲁兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:44:43.177

这个解决方案，顺便说一句，它不是一个很好的解决方案，它是从零开始创建一个空应用程序，创建一个 icefaces 页面，确保它正常工作。然后，我们将项目的其余部分迁移到这个项目的内部。我不喜欢这个解决方案，但它有效。这不是第一次在应用程序服务器之间迁移 Web 应用程序、JPA 和其他 Java 技术，兼容性（或只是奇怪）问题不知从何而来。希望这对将来的任何人都有帮助。

无论如何，感谢您的评论。

何塞·克鲁兹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:04:13.717

`FacesServlet`如果没有被调用，就会发生这种情况。您需要确保请求 URL（如您在浏览器地址栏中看到的）与`<url-pattern>`您`FacesServlet`在 webapp 中定义的`web.xml`.

因此，如果您将 URL 模式设置为 example `*.jsf`，那么您需要确保请求 URL 类似于[http://example.com/context/page.jsf](http://example.com/context/page.jsf)，因此不类似于[http://example.com/上下文/page.xhtml](http://example.com/context/page.xhtml)。

或者，您也可以将 URL 模式更改为`*.xhtml`，这样您就无需担心虚拟 URL。

### 也可以看看：

*   [JSF Facelets：有时我看到 URL 是 .jsf，有时是 .xhtml。为什么？](https://stackoverflow.com/questions/3008395/jsf-facelets-sometimes-i-see-the-url-is-jsf-and-sometimes-xhtml-why/3008504#3008504)

# css - 在同一行显示带有 DT 和 DD 的定义列表

> ID：13708788
> 
> 赞同：4
> 
> 时间：2012-12-04T17:43:24.887
> 
> 标签：css

我想显示几行数据，每行都有一个标题和一些数据在同一行。这个问题肯定已经在 SO 上得到了回答（即[如何设置 dt 和 dd 的样式，以便它们在同一行？](https://stackoverflow.com/questions/1713048/how-to-style-dt-and-dd-so-they-are-on-the-same-line)），但是，它似乎对我不起作用。以下似乎有效，除非 DD 没有修复它的内容。我对IE7+感兴趣。我这样做是正确的吗？谢谢

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <title>Untitled</title>
        <style>
            dl {width: 395px; font-size:12px}
            dd,dt  {padding-top:5px;padding-bottom:5px;}
            dt {float:left; padding-right: 5px; font-weight: bolder;}
            /* dd {padding-left: 5px;} Does not work */
        </style>

    </head>
    <body>
        <dl>
            <dt>DT Element 1:</dt><dd>DD Elem 1</dd>
            <dt>DT Second Element:</dt><dd>DD Element Two</dd>
            <dt>DT Elem 3:</dt><dd></dd>
            <dt>DT Element 4:</dt><dd>DD Elem 4</dd>
            <dt>DT Fifth Element:</dt><dd>&nbsp;</dd>
            <dt>DT Elem 6:</dt><dd>DD Element Six</dd>
        </dl>  
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T19:10:54.673

您的问题是`dd`没有生成空白并留下*空白*空间（高度：0px）。

如果可以的话，是的，只需将 a`nbsp;`放在任何空元素内。这是跨浏览器工作的最简单的解决方案。

一个简单的纯 css 修复将是这样的：

```
dd:after {content:"."} 
```

但它在每个定义后添加一个点......

您也可以简单地在 dd 上设置最小高度：

```
dt {clear: left;}
dt, dd {min-height:1.5em;} 
```

（dt 和 dd 最小高度必须相同！）

[演示](http://jsfiddle.net/7MKQf/)

...如果您的`dt`身高不规律（例如，如果它有时在 2 行上），您可能会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T17:09:55.607

这适用于 IE7+，符合标准，并允许不同的高度。

```
<style>
dt {
    float: left;
    clear: left;
    width: 100px;        
    padding: 5px 0;
    margin:0;
}
dd {
    float: left;
    width: 200px;
    padding: 5px 0;
    margin:0;
}
.cf:after {
    content:'';
    display:table;
    clear:both;
}
</style>

<dl class="cf">
    <dt>A</dt>
    <dd>Apple</dd>
    <dt>B</dt>
    <dd>Banana<br>Bread<br>Bun</dd>
    <dt>C</dt>
    <dd>Cinnamon</dd>
</dl> 
```

[请参阅 JSFiddle](http://jsfiddle.net/Y9f4m/1/)。

# asp.net - 在 mvc4 局部视图中传递参数

> ID：13708793
> 
> 赞同：1
> 
> 时间：2012-12-04T17:43:37.620
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-4, partial-views

我用谷歌代码创建了一个局部视图，我想向该视图发送两个参数。以下是部分视图的内容：

```
 <!-- Google Code for apply Conversion Page --> <script type="text/javascript">
   /* <![CDATA[ */
   var google_conversion_id = 1234567;
   var google_conversion_language = "en";
   var google_conversion_format = "2";
   var google_conversion_color = "ffffff";
   var google_conversion_label = "7df7df7sdfdf"; var google_conversion_value = 0;
   /* ]]> */
   </script>
   <script type="text/javascript"  
   src="https://www.googleadservices.com/pagead/conversion.js">
   </script>
   <noscript>
   <div style="display:inline;">
   <img height="1" width="1" style="border-style:none;" alt=""  
   src="https://www.googleadservices.com/pagead/conversion/1234567/?value=0&amp;label=7df7df7sdfdf&amp;guid=ON&amp;script=0"/>
   </div>
   </noscript> 
```

现在，我想使用两个参数，而不是 google_conversion_id 和 google_conversion_label 的静态值，这两个参数将从主窗体发送。

以下是我如何称呼局部视图：

@{ Html.RenderPartial("Google"); }

知道如何实现吗？谢谢，拉齐亚莱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:55:02.553

您可以使用 RenderAction 而不是 RenderPartial。然后你可以在控制器中编写你自己的动作，你可以添加参数。像这样的东西：

```
@{ Html.RenderAction("Action", "Controller", new { id = "Something", label = "Label" }); } 
```

或者您在后面的代码中为局部视图创建一个新模型。

另一种选择是将参数存储在 ViewBag 中，但这更像是一种 hack。

# android - Android评级栏停止列表项的OnClickListener

> ID：13708799
> 
> 赞同：0
> 
> 时间：2012-12-04T17:44:02.640
> 
> 标签：android, xml, listview, listitem, ratingbar

我目前有一个列表视图，可以在其中单击每个项目以显示有关列表项的更多信息。我想为每个列表项添加一个 RatingBar。理想情况下，我希望能够通过点击和触摸来更改评分栏的值。我意识到以前也有人问过类似的问题，但我已经尝试过其中提供的解决方案。在我的评级栏的 xml 中

```
 android:focusable = "false"
    android:focusableInTouchMode = "false"
    android:clickable = "false"
    android:isIndicator = "true" 
```

所以基本上我的问题是，是否可以将列表项保持为可点击并具有可以通过触摸和点击更改的评分栏？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T11:11:46.713

您可以做一件事 onlist item 单击更改评级栏，然后在 longclick 上您可以在对话框中显示更多信息...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:55:32.910

你可以这样试试。在`onClick()`列表项的侦听器中，您可以`return false`这意味着您没有处理该事件，那么该事件将被传递给下一个元素`rating bar`

# c++ - 用于识别模板类中的类的元函数问题

> ID：13708804
> 
> 赞同：2
> 
> 时间：2012-12-04T17:44:26.547
> 
> 标签：c++, templates, template-meta-programming, boost-mpl

我有以下结构的代码：

```
template <typename T>
struct Foo
{
  struct Bar
  {
    int data;
  };
}; 
```

我想编写元函数来告诉我类型是 Foo 还是 Bar。第一个很简单：

```
template <typename T>
struct is_foo : boost::mpl::false_
{};

template <typename T>
struct is_foo<Foo<T> > : boost::mpl::true_
{};
...
BOOST_MPL_ASSERT(( is_foo<Foo<int> > ));
BOOST_MPL_ASSERT_NOT(( is_foo<int> )); 
```

但是，同样的方法不适用于 Bar：

```
template <typename T>
struct is_bar : boost::mpl::false_
{};

template <typename T>
struct is_bar<typename Foo<T>::Bar> : boost::mpl::true_
{}; 
```

此代码被编译器拒绝。海湾合作委员会 说：

```
main.cpp:38:8: error: template parameters not used in partial specialization:
main.cpp:38:8: error:         ‘T’ 
```

奇怪的是，clang 会编译代码，但它会发出警告并且元函数不起作用（总是错误的）：

```
main.cpp:38:8: warning: class template partial specialization contains a template parameter that can not be deduced;
      this partial specialization will never be used
struct is_bar<typename Foo<T>::Bar> : boost::mpl::true_
       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.cpp:37:20: note: non-deducible template parameter 'T'
template <typename T>
                   ^ 
```

这个问题有解决方法吗？特定于 c++11 的解决方案会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:36:06.640

问题是它`T`是类型*名称*`Foo<T>::Bar`的一部分，但它不是类型*结构*的一部分。

一种可能的解决方案是`T`在类型的结构中进行编码：

```
template<typename Outer, typename Inner> struct Nested: public Inner {
  using Inner::Inner;
};
template<typename T> struct Foo {
  struct BarImpl {
    int data;
  };
  using Bar = Nested<Foo<T>, BarImpl>;
};

template <typename T> struct is_bar: std::false_type {};
template <typename T, typename U> struct is_bar<Nested<Foo<T>, U>>:
  std::is_same<typename Foo<T>::Bar, Nested<Foo<T>, U>> {}; 
```

测试：

```
static_assert(is_bar<Foo<int>::Bar>::value, "!");
static_assert(!is_bar<Foo<int>>::value, "!");
static_assert(!is_bar<int>::value, "!"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T02:39:07.307

这是我自己的问题的一个非常不雅的解决方案，使用 TTI (http://svn.boost.org/svn/boost/sandbox/tti)：

首先，给 Bar 添加一个虚拟标签：

```
template <typename T>
struct Foo
{
  struct Bar
  {
    typedef void i_am_bar;
    int data;
  };
}; 
```

接下来，使用 TTI 检查该标签：

```
BOOST_TTI_HAS_TYPE(i_am_bar);

template <typename T>
struct is_bar : boost::tti::has_type_i_am_bar<T>
{};
...
BOOST_MPL_ASSERT(( is_bar<Foo<int>::Bar> ));
BOOST_MPL_ASSERT_NOT(( is_bar<Foo<int> > ));
BOOST_MPL_ASSERT_NOT(( is_bar<int> )); 
```

可以肯定的是，它满足了我的用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:43:34.387

编译器是正确的，简单易懂的解释是：*他们只是不想替换所有可能的类型`T`，只是为了实现给定模板内部是否有嵌套类型栏*。您可以在一本关于模板的“经典”（我希望是众所周知的）书中找到更准确的解释：*“C++ 模板 - 完整指南”*。

幸运的是 C++11 可以帮助你做得更好！:)

```
#include <type_traits>

template <typename T>
struct has_nested_bar
{
    template <typename W>
    struct wrapper {};

    template <typename C>
    static std::true_type check(
        const wrapper<C>*
      , const typename C::Bar* = nullptr
      );

    template <class C>
    static std::false_type check(...);

    constexpr static bool value = std::is_same<
        decltype(check<T>(nullptr))
      , std::true_type
      >::type::value;
    typedef std::integral_constant<bool, value> type;
}; 
```

此元函数将检查给定类型是否具有嵌套`Bar`类型（据我所知，这是您的`is_bar`.

```
template <typename T>
struct Foo
{
    struct Bar
    {
        int data;
    };
};

struct Bar {};

int main()
{
    std::cout << has_nested_bar<Foo<int>>::value << std::endl;
    std::cout << has_nested_bar<Bar>::value << std::endl;
    return 0;
} 
```

将输出：

```
zaufi@gentop /work/tests $ ./has-nested-bar
1
0 
```

稍后您可以将此元函数与您的元函数结合起来`is_foo`检查嵌套`Bar`实际上是否在`Foo`...

# javascript - javascript ajax 拦截

> ID：13708806
> 
> 赞同：0
> 
> 时间：2012-12-04T17:44:28.780
> 
> 标签：javascript, ajax, xmlhttprequest, intercept

我正在使用以下 javascript 代码来拦截 ajax 调用：

```
XMLHttpRequest.prototype.realOpen = XMLHttpRequest.prototype.open;
var newOpen = function(method, url, async, user, password) {
    console.log("Intercepted open (" + url + ")");
    this.realOpen(method, url, async, user, password);
}
XMLHttpRequest.prototype.open = newOpen; 
```

执行 ajax 调用的 javascript 和上述代码从以下位置加载：
`https://example.com/js/main.js`
`https://example.com/js/intercept.js`

当 ajax 调用的域只是“example.com”时，上面的代码运行良好，但是当对域“sub.example.com”进行 ajax 调用时，上面的代码无法拦截该请求。

有谁知道为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:54:54.380

您似乎是[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的受害者，因为 example.com 和 sub.example.com 被视为两个不同的域。

# c++ - 无法使信号和插槽在 Qt 中工作

> ID：13708814
> 
> 赞同：0
> 
> 时间：2012-12-04T17:44:46.133
> 
> 标签：c++, qt

我正在尝试使用 Qt 为一些基本的视觉应用程序学习 C++。我想在开始时做一些简单的事情，当我按下按钮时，我想在某处显示一条短信。这是我的代码：

主文件

```
#ifndef MYAPP_H
#define MYAPP_H

#include <QWidget>

class QLabel;
class QString;

class MyApp : public QWidget{
    public:
        MyApp(QWidget *parent = 0);
    protected slots:
        void showIt();
    private:
        QString *text_msg;
        QLabel *message;
};

#endif 
```

主文件

```
#include <QApplication>
#include <QFont>
#include <QPushButton>
#include <QWidget>
#include <QLabel>
#include <QVBoxLayout>
#include <QFrame>
#include <QString>
#include <vector>
#include <string>
#include <map>
#include "main.h"

#include <fstream>

using std::map;
using std::vector;
using std::string;
using std::ofstream;

/* implementation */
MyApp::MyApp(QWidget *parent):QWidget(parent){

    QString text_msg;
    text_msg = "This is my first message written in C++! \n It was printed with Qt!";

    setFixedSize(400, 280);

    QPushButton *quit = new QPushButton(tr("Quit"), this);
    quit->setGeometry(62, 40, 75, 50);
    quit->setFont(QFont("Times", 18, QFont::Bold));

    QPushButton *show_msg = new QPushButton(tr("Show!"), this);
    show_msg->setGeometry(30,15,75,45);
    show_msg->setFont(QFont("Times", 18, QFont::Bold));

    //message = new QLabel();
    QLabel *message = new QLabel(this);
    //message->setFrameStyle(QFrame::Panel | QFrame::Sunken);
    //message->setText(text_msg);
    //message->setText("asdf");

    connect(quit, SIGNAL(clicked()), qApp, SLOT(quit()));
    connect(show_msg, SIGNAL(clicked()), qApp, SLOT(showIt()));

    QVBoxLayout *layout = new QVBoxLayout;

    layout->addWidget(message);
    layout->addWidget(show_msg);
    layout->addWidget(quit);

    setLayout(layout);

        ofstream myfile;
    myfile.open ("example");
    myfile << "Writing this to a file.\n";
    myfile.close();
}

void MyApp::showIt(){   
    //*text_msg = "xyz";
    ofstream myfile;
    myfile.open ("example");
    myfile << "12121212121.\n";
    myfile.close();
    message->setText("1234");
}

int main(int argc, char *argv[])
{
    /* assign messages for output 
    bool result;
    string key = "first", message="this is a sample text";
    result = Messages::add_message(key, message);
    */
    /* end */
    QApplication app(argc, argv);
    MyApp my_simple_app;
    my_simple_app.show();
    return app.exec();

} 
```

我不明白为什么程序不运行插槽成员函数。我放了一些代码，应该在文件中打印一些文本，以了解该函数内的代码是否将被执行，问题出在 QLabel 消息中，但成员函数没有被执行。

任何人都可以帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:55:12.493

我需要对您的代码进行 3 项更改才能使其正常工作：

首先，在 main.h 中你需要使用 Q_OBJECT 宏：

```
class MyApp : public QWidget {
   Q_OBJECT 
```

其次，在 main.cxx 中，您需要将连接调用更改为正确的接收器（`this`而不是`myApp`）：

```
connect(show_msg, SIGNAL(clicked()), this, SLOT(showIt())); 
```

第三，在 main.cxx 中，您需要取消注释将`message`标签创建为类成员的代码：

```
message = new QLabel(this); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T02:03:06.270

最重要的部分是将信号连接到给定对象的插槽，如下所示：

`connect(object_emitting, SIGNAL(clicked()),object_receiving, SLOT(showIt()));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:50:19.000

`connect(show_msg, SIGNAL(clicked()), qApp, SLOT(showIt()));`在这个stainment改变`qApp`并`this`再试一次

这意味着

```
 connect(show_msg, SIGNAL(clicked()), this, SLOT(showIt())); 
```

如果两者之间有不同，我不会感到不安`privat slots:`，`protected slots:`但通常我`privat slots:`也使用你可以更改它并尝试:)

# asp.net - 让客户管理他们的网站

> ID：13708819
> 
> 赞同：2
> 
> 时间：2012-12-04T17:45:11.407
> 
> 标签：asp.net, content-management-system

我怎样才能做到这一点？

建立网站（模板）并建立某种“网站管理器界面”假设我建立了网站1，网站2..

我希望客户（可以是没有任何程序知识的任何人）可以更改网站上的“内容”：图像、文本、标题等。

假设 website1 的 url 将是 www.website1.com （实际站点）

对于 url：www.website1.com/admin.aspx 将获取用户名和密码，如果验证我/任何具有正确权限的人将看到一个界面，通过该界面可以更改站点内容文本、标题、图像等等......我怎样才能做到这一点，你能指出我的文章/例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:01:22.273

所以你需要CMS（内容管理系统）。ASP.NET 需要它吗？然后你可以看看下面的[问题](https://stackoverflow.com/questions/243655/what-is-the-best-open-source-net-content-management-system-cms)，在那里你可以找到指向 ASP.NET CMS 的链接，例如：Composite C1、Orchard、Umbraco、DotNetNuke 等。

如果不需要 ASP.NET，您可以查看[WordPress](http://wordpress.com/)。

**更新：**使用哪个 CMS，这取决于您的任务和引用类型。我使用了[Rainbow](http://www.rainbowportal.net/)（我停止了它的开发）和 [DotNetNuke [4](http://www.dotnetnuke.com/)（但也许它对你来说太重了）。出于个人需要，我使用了 WordPress。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:27:11.730

看看 Sueetie，它拥有您需要的一切以及更多：

[http://sueetie.com/features.aspx](http://sueetie.com/features.aspx)

N2 CMS 也值得一看：

[http://n2cms.com/](http://n2cms.com/)

# jquery - jquery .submit() 没有触发虽然我正在使用 $(document).delegate()

> ID：13708820
> 
> 赞同：0
> 
> 时间：2012-12-04T17:45:10.663
> 
> 标签：jquery

```
 <div class="sld_dwn">
 <form class="sign_in_form" id='target'>
 <div>
 <a class="sign_in_data" >email:</a>
 </br>
 <input type="text" class="sign_in_box" name='txt1'>
 <a class="sign_in_data1">password:</a>
 </br>
 <input type="password" class="sign_in_box1"name='txt2' >
 </div>
 <a href='http://localhost' class="forgot">forgot password</a></br>
 <!--<input type="checkbox"><a class="stay">stay signin</a>-->
 <input type='submit' class="but_signin1" value='Sign in'>
 </form> 
```

包含 jquery 代码的文件是 sginin.js，我正在尝试从 [http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js)
`$("document").ready(function() { $("document").delegate('#target','submit',function(e) { alert('hi'); return false;`
访问 jquery 库 给上述 div 的样式是
`div.sld_dwn { position:relative; border-radius:0px; display:none; float:right; right:40px; background-color:#3E003E; background-color:RGBA(255, 255, 255,0.2); color:white; border:0px; width:450px; height:120px; }`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:51:55.173

这不是选择文档就绪处理程序的方式，这应该是：

```
$(document).ready(function() { 
//^------^--------------------------------remove the quotes and see if works
       $(document).delegate('#target','submit',function(e) { 
//  ----^-------^------------------------------------------------and this one too
          alert('hi'); 
          return false;
       });
 }); 
```

# ajax - ASP.NET MVC：在 Ajax 更新中将 Javascript 值传递给 Url.Action

> ID：13708823
> 
> 赞同：1
> 
> 时间：2012-12-04T17:45:21.667
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-4

使用 MVC 4：

我正在通过 ajax 更新一个 div。对 Url.Action 的调用需要从 html DOM 传递一个值，在本例中**为 $('#ClientID').val()**。我知道以下内容是非法的，但它表明了我的意图：

```
[script type="text/javascript"]
function UpdateTheDiv() {
    $.get('@Url.Action("MyAction", "MyController", 
        new {  
               parent = Model, 
               some_value_from_the_DOM=$('#SomeID').val() *** HERE IS THE PROBLEM ***
             })', 

        function (data) {
           $('#detailsDiv').replaceWith(data);
    }); 
} 
```

这可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T18:20:20.510

您应该使用`Url.Action`无参数并在 JavaScript 中传递参数。服务器端处理无法访问客户端 DOM。

```
 $.ajax({
        url: "@Url.Action("MyAction", "MyController")",
        data: { 
                parent: @Html.Raw(Json.Encode(Model)),
                some_value_from_the_DOM: $('#SomeID').val()
        },
        success: function (result) {
            $("#detailsDiv").html(result); // update your div here
        },
        cache: false
    }); 
```

# c++ - 如何解读 C++ 标准文档中的“术语和定义”？

> ID：13708826
> 
> 赞同：7
> 
> 时间：2012-12-04T17:45:43.310
> 
> 标签：c++, standards

当我研究 C++ 标准中的不同部分时（[在哪里可以找到当前的 C 或 C++ 标准文档？](https://stackoverflow.com/questions/81656/where-do-i-find-the-current-c-or-c-standard-documents)），我想回顾一下“术语和定义”，第 1.3 节。

但是，这些术语和定义是以我无法充分理解或解释的形式提供的，并且文本中没有说明如何解释它们。

考虑标准的“术语和定义”部分中定义的第一个术语：

> 1.3.1 [**定义参数**]
> 
> **争论**
> 
> 实际论证
> 
> 实际参数
> 
> <function call expression> 括号内的逗号分隔列表中的表达式

1.  [ **`defns.argument`**] 指的是什么？
2.  `actual argument`行和的含义和目的是`actual parameter`什么？
3.  是否`<function call expression>`指代不同的“术语或定义”？如果是这样，它没有在“术语和定义”部分中定义 - 为什么不呢？如果不是，它指的是什么？（注意：我不是在问“函数调用表达式”是什么意思，因为我已经知道了；相反，我是在问如何使用这个简单的示例来阅读和解释 C++ 标准的“术语和定义”部分。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T17:51:42.120

1.  > [ **`defns.argument`**] 指的是什么？

    `[defns.argument]`是节标签；它旨在用于编辑目的，因为它在章节重新编号下是不变的（例如，响应章节的插入、删除或重新排序）。它也可以用于参考标准，但章节编号（相对于标准的已发布版本）更简洁。

2.  > 行实参和实参的含义和目的是什么？

    “*实际参数*”和“*实际参数*”是术语“***参数***”的别名。您将在下面的**1.3.14 [defns.parameter]**中看到“*形式参数*”和“*形式参数*”是术语“***参数***”的别名。

    术语“实际参数”和“实际参数”仅出现在 [defns.argument] 中；“形式参数”在 8.3.5p11 中被描述为别名，“形式参数”在大约 13 个地方使用，只是使用“参数”的地方数量的一小部分。

3.  > <function call expression> 是否引用不同的“术语或定义”？

    尖括号中的术语是该定义适用的上下文。例如，“*参数”在“**函数调用表达式*”的上下文中与“*类函数宏*”的上下文中具有不同的含义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T17:52:35.927

> [defns.argument] 指的是什么？

这是参考第 (1.3.1) 节的另一种方式。在标准的未来版本中它应该保持不变（除非它被删除），而编号可能会改变。

> “实参”和“实参”的含义和目的是什么？

它们是您可能会看到的其他术语，意思相同。我相信旧版本的规范。在现代规范中使用了“形式论证”和“实际论证”。使用“参数”和“参数”。

> 是否`<function call expression>`指代不同的“术语或定义”？

That's the context in which "argument" has this meaning - the following sections give it different meanings in other contexts. Function call expressions are defined in 5.2.2; within such an expression, "argument" means "expression in the comma-separated list bounded by the parentheses".

# objective-c - iOS 企业应用程序的奇怪问题

> ID：13708829
> 
> 赞同：6
> 
> 时间：2012-12-04T17:45:59.347
> 
> 标签：objective-c, ios, core-audio, ios-enterprise

我负责为我工作的公司开发一个内部企业应用程序。我遇到了一个我无法弄清楚的巨大障碍。

该应用程序使用的音频单元，我有 3 部 iPhone：

```
3gs - iOS 5.1.1
4 - iOS 5.1.1
5 - iOS 6 
```

使用配置文件，我可以在这些设备上运行测试构建，一切正常，使用我自己的开发人员帐户和临时配置文件，它们都工作正常。为与企业进行无线分发而构建它，并且所有 iOS 5.1.1 设备都不起作用。

没有安装问题，应用程序加载正确，但我制作的音频单元 + 循环缓冲区陷入困境。似乎我的缓冲区溢出严重，但我不知道为什么，只有企业帐户才会发生这种情况。我得到了所有正确的数据，数据正确地输入到音频中，如果我将循环缓冲区的大小增加得非常高，我可以在很短的时间内在这里获得正确的音频，然后它变得朦胧，会短暂地回来并离开又是朦胧。

我想知道是否有人知道测试构建和企业构建之间的任何潜在差异。是否有可能有一些我没有遵循的最佳实践，因为我不明白为什么我看到两者之间存在如此巨大的差异。

注意：我在 2 个构建之间所做的唯一设置更改是代码签名，没有别的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:04:41.707

如果没有您发布代码，我只能推测。企业构建最有可能通过优化进行编译，而您的测试构建则不会。您可能已经引入了一些未定义的行为，这些行为会导致您的应用程序在优化时表现异常。我建议在您的代码上运行分析器并修复任何问题，以及运行分析器。可以在此处找到导致问题的编译器优化的示例：[编译器优化导致程序运行速度变慢](https://stackoverflow.com/questions/7124058/compiler-optimization-causing-program-to-run-slower/)

# asp.net - 在 Visual Studio webapp 中定位不需要的引用的来源

> ID：13708831
> 
> 赞同：1
> 
> 时间：2012-12-04T17:46:00.270
> 
> 标签：asp.net, .net, asp.net-mvc

我有一个网络应用程序。当使用 msbuild 构建，然后部署到 IIS 时，它声称缺少对 System.Web.Mvc 版本 4.0.0.0 的引用，问题是，它没有也不应该引用 mvc 程序集。我如何找出这个参考来自哪里？

谢谢。

来自 IIS 的输出：

```
Server Error in '/Content' Application.
Could not load file or assembly 'System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.IO.FileNotFoundException: Could not load file or assembly 'System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Assembly Load Trace: The following information can be helpful to determine why the assembly 'System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' could not be loaded.

=== Pre-bind state information ===
LOG: User = IIS APPPOOL\TolunaQ
LOG: DisplayName = System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
 (Fully-specified)
LOG: Appbase = file:///D:/Webs/TQSv2_Cms/
LOG: Initial PrivatePath = D:\Webs\TQSv2_Cms\bin
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: D:\Webs\TQSv2_Cms\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Post-policy reference: System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/content/a7beb86c/77cc20b1/System.Web.Mvc.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/content/a7beb86c/77cc20b1/System.Web.Mvc/System.Web.Mvc.DLL.
LOG: Attempting download of new URL file:///D:/Webs/TQSv2_Cms/bin/System.Web.Mvc.DLL.
LOG: Attempting download of new URL file:///D:/Webs/TQSv2_Cms/bin/System.Web.Mvc/System.Web.Mvc.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/content/a7beb86c/77cc20b1/System.Web.Mvc.EXE.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/content/a7beb86c/77cc20b1/System.Web.Mvc/System.Web.Mvc.EXE.
LOG: Attempting download of new URL file:///D:/Webs/TQSv2_Cms/bin/System.Web.Mvc.EXE.
LOG: Attempting download of new URL file:///D:/Webs/TQSv2_Cms/bin/System.Web.Mvc/System.Web.Mvc.EXE.

Stack Trace:

[FileNotFoundException: Could not load file or assembly 'System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.]
   System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0
   System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +39
   System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks) +132
   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +144
   System.Reflection.Assembly.Load(String assemblyString) +28
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +46

[ConfigurationErrorsException: Could not load file or assembly 'System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.]
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +618
   System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +57
   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +178
   System.Web.Compilation.BuildManager.GetPreStartInitMethodsFromReferencedAssemblies() +94
   System.Web.Compilation.BuildManager.CallPreStartInitMethods() +332
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +677

[HttpException (0x80004005): Could not load file or assembly 'System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090876
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +256

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T15:08:11.607

检查 app.config 或 web.config 中的以下内容。我的项目使用的是 MVC 3.0，并且在配置中有以下内容。大概来自更新到 4.0 然后降级回 3.0 并且没有正确清理它的开发人员。

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
            <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" culture="neutral" />
            <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
        </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:06:44.057

查看应用程序的 web.config 文件，特别是 system.web 中的编译部分。

以下是配置文件的这一部分查找 MVC 3 应用程序的内容。确保您没有在其中添加 MVC 4 的引用：

```
<compilation debug="true" targetFramework="4.0">
  <assemblies>
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies>
</compilation> 
```

# android - Android：确定连接的 USB 设备存储大小

> ID：13708832
> 
> 赞同：0
> 
> 时间：2012-12-04T17:46:07.363
> 
> 标签：android, usb

我有一个小部件可以告诉用户连接的 USB 设备的容量，以及使用的空间量。我已经浏览了 android.hardware.usb API，我发现没有任何东西可以确定连接的 USB 设备的大小及其使用情况。

现在我正在捕获 Intent.ACTION_MEDIA_MOUNTED 并在挂载点的 Dir 中搜索特定文件等......所有这些都工作正常，但对于我来说，我看不到如何利用 API 来确定整体大小和连接的 USB 设备的使用情况。

有没有好心人知道，或者有文章给我看？谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:14:07.963

听起来您的设备实际上正在安装连接的 USB 设备的文件系统，这似乎是供应商附加组件，而不是库存的 android 功能。

如果确实如此，那么您可能拥有的任何其他选项都可以使用 df shell 命令，或者更正确地在 java 或本机子例程中复制其功能。

你可以在这里查看android的df的来源：

[https://github.com/android/platform_system_core/blob/master/toolbox/df.c](https://github.com/android/platform_system_core/blob/master/toolbox/df.c)

它看起来是一个相当标准的实现 - 读取 /proc/mounts 以查找文件系统，在每个文件系统上调用 statfs()。您可能希望按感兴趣的人进行过滤。

# redis - Redis：可以安装多宿主系统吗？

> ID：13708836
> 
> 赞同：0
> 
> 时间：2012-12-04T17:46:18.770
> 
> 标签：redis

我们希望为跨两个子网的服务器使用单个 Redis 服务器。

如果我们仅将 Redis 放在子网 A 上，则 B 上的服务器将必须通过路由器才能到达 redis。

我们的想法是让 Redis 服务器多宿主（多个网卡），连接到子网 A 和 B。

1）这会工作吗？2) Redis 会附加到两个 IP 上吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:30:34.057

您可以在 redis 配置文件中提供绑定地址（绑定参数）。

现在，如果您注释掉定义并且不提供绑定地址，Redis 将在所有接口上侦听其端口（即它将侦听 0.0.0.0）。

我没有尝试，但我会说具有 2 个地址的配置应该可以工作。

# javascript - 用最少的括号漂亮地打印 AST

> ID：13708837
> 
> 赞同：12
> 
> 时间：2012-12-04T17:46:25.663
> 
> 标签：javascript, compiler-construction, abstract-syntax-tree, pretty-print, parentheses

我正在为 JavaScript AST 实现一个漂亮的打印机，我想问一下是否有人知道一种“适当的”算法，可以根据 operator priority 和[associativity](http://en.wikipedia.org/wiki/Associative_property)自动为带有最小括号的表达式加括号。我在谷歌上没有找到任何有用的材料。

显而易见的是，应将其父级具有更高优先级的运算符括起来，例如：

```
(x + y) * z // x + y has lower precedence 
```

但是，也有一些不是关联的运算符，在这种情况下仍然需要括号，例如：

```
x - (y - z) // both operators have the same precedence 
```

我想知道后一种情况的最佳规则是什么。对于除法和减法来说是否足够，如果 rhs 子表达式的优先级小于*或等于*优先级，则应该用括号括起来。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-22T07:31:57.807

我偶然发现了你的问题，我自己也在寻找答案。虽然我还没有找到一个规范的算法，但我发现，就像你说的那样，单独的运算符优先级不足以最小化括号表达式。我尝试在 Haskell 中编写一个 JavaScript 漂亮的打印机，但我发现编写一个强大的解析器很乏味，所以我更改了具体语法：[https ://gist.github.com/kputnam/5625856](https://gist.github.com/kputnam/5625856)

除了优先级之外，您还必须考虑运算符的关联性。`/`像和的二元运算`-`被解析为左结合。但是，赋值`=`、取幂`^`和相等`==`是右结合的。这意味着表达式`Div (Div a b) c`可以写成`a / b / c`不带括号，但`Exp (Exp a b) c`必须用括号括起来`(a ^ b) ^ c`。

您的直觉是正确的：对于左关联运算符，如果左操作数的表达式绑定得不如其父项*紧密，则应将其括起来。*如果右操作数的表达式与其父级的绑定*一样紧密*或*不那么紧密，则应该用括号括起来。*所以`Div (Div a b) (Div c d)`不需要左子表达式周围的括号，但右子表达式需要：`a / b / (c / d)`。

接下来，一元运算符，特别是可以是二元或一元的运算符，如否定和减法`-`、强制和加法`+`等，可能需要根据具体情况进行处理。例如，`Sub a (Neg b)`应该打印为`a - (-b)`，即使一元否定比减法结合得更紧密。我想这取决于你的解析器，`a - -b`可能不会模棱两可，只是丑陋。

我不确定既可以是前缀又可以是后缀的一元运算符应该如何工作。在诸如`++ (a ++)`and之类的表达式`(++ a) ++`中，其中一个运算符必须比另一个运算符绑定得更紧密，否则`++ a ++`会产生歧义。但我怀疑即使其中一个不需要括号，为了便于阅读，您可能还是想添加括号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T04:21:23.100

这取决于特定语法的规则。我认为您对具有不同优先级的运算符以及减法和除法都正确。

然而，求幂通常被不同地处理，因为它的右手操作数首先被评估。所以你需要

```
 (a ** b) ** c 
```

当 c 是根的右孩子时。

括号的使用方式取决于语法规则的定义。如果你的语法是

```
exp = sub1exp ;
exp = sub1exp op exp ;
sub1exp = sub1exp ;  
sub1exp = sub1exp op1 sub2exp ;
sub2exp = sub3exp ;
sub2exp = sub3exp op2 sub2exp ;
sub3exp = ....
subNexp = '(' exp ')' ; 
```

op1 和 op2 是非关联的，那么如果子树的根也是 op1，那么您需要用括号括起来 op1 的右子树，如果左子树有根 op2，则需要用括号括住 op2 的左子树。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-15T13:23:03.523

有一种通用的方法可以用最少的括号来漂亮地打印表达式。首先为您的表达语言定义一个明确的语法，该语法编码优先级和关联性规则。例如，假设我的语言具有三个二元运算符（*、+、@）和一个一元运算符（~），那么我的语法可能看起来像

```
E -> E0

E0 -> E1 '+' E0       (+ right associative, lowest precedence)
E0 -> E1

E1 -> E1 '*' E2       (* left associative; @ non-associative; same precedence)
E1 -> E2 '@' E2
E1 -> E2

E2 -> '~' E2          (~ binds the tightest)
E2 -> E3

E3 -> Num             (atomic expressions are numbers and parenthesized expressions)
E3 -> '(' E0 ')' 
```

语法的解析树包含所有必要的（和不必要的）括号，并且不可能构造一个扁平化导致歧义表达式的解析树。例如，字符串没有解析树

```
1 @ 2 @ 3 
```

因为'@'是非关联的并且总是需要括号。另一方面，字符串

```
1 @ (2 @ 3) 
```

有解析树

```
E(E0(E1( E2(E3(Num(1)))
         '@'
         E2(E3( '('
                E0(E1(E2(E3(Num(2)))
                      '@'
                      E2(E3(Num(3)))))
                ')'))) 
```

因此，问题被简化为将抽象语法树强制转换为解析树的问题。通过尽可能避免将 AST 节点强制为原子表达式来获得最小数量的括号。这很容易以系统的方式完成：

维护一个由指向 AST 中当前节点的指针和正在扩展的当前产品组成的对。用根 AST 节点和“E”产生式初始化该对。在每种情况下，对于 AST 节点的可能形式，尽可能多地扩展语法以对 AST 节点进行编码。这将为每个 AST 子树留下一个未扩展的语法生成。在每个（子树，生产）对上递归地应用该方法。

例如，如果 AST 是`(* (+ 1 2) 3)`，则进行如下操作：

```
expand[ (* (+ 1 2) 3); E ]  -->  E( E0( E1( expand[(+ 1 2) ; E1]
                                            '*'
                                            expand[3 ; E2] ) ) )

expand[ (+ 1 2) ; E1 ] --> E1(E2(E3( '('
                                     E0( expand[ 1 ; E1 ]
                                         '+'
                                         expand[ 2 ; E0 ] )
                                     ')' )))

... 
```

该算法当然可以以不那么明确的方式实现，但是该方法可以用来指导实现而不至于发疯:)。

# collision - 2 种具有相同 rfid 标签的不同产品

> ID：13708839
> 
> 赞同：0
> 
> 时间：2012-12-04T17:46:28.567
> 
> 标签：collision, rfid

我正在做一个智能购物车作为一个大学项目，问题是如果我在购物车中有 2 件相同的产品（2 个相同的标签），我如何确保读者阅读它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:14:20.710

假设您正在使用`UHF ISO 18000-6C`标签，您应该看看银行内存组织。

这些由四个块组成：

1.  用户银行
2.  TID 银行
3.  总承包银行
4.  预留银行

现在，您只需担心标签标识 (TID) 结构。检查`TID bank`您的标签并专注于读取这些字节。

问候

# javascript - 仅当我按 F12 调出控制台时，表单才可在 Internet Explorer 中使用

> ID：13708841
> 
> 赞同：0
> 
> 时间：2012-12-04T17:46:39.580
> 
> 标签：javascript, html

只有当我在 Internet Explorer 中点击控制台时，我的表单才有效。可以在所有其他浏览器中正常工作。

这是 HTML：为什么当我打开控制台时，在 IE 中一切正常？

```
 <div class="clubregister">
    <h2>
        Signup Form</h2>
    <p>
        We wont give your information to anyone. It is used to notify you of promotions occasionally and required for registration.</p>
    <label for="name">Name:</label><br />
    <input name="name" type="text" /><br />
    <label for="address">Address:</label><br />
    <input name="address" type="text" /><br />
    <label for="phone">Phone:</label><br />
    <input name="phone" type="text" /><br />
    <label for="email">Email:</label><br />
    <input name="email" type="text" /><br />
    <input class="button" name="submit" style="margin-top:10px;" type="button" value="Join Club" /></div> 
```

这是 Javascript：当调出控制台时，这一切在 IE 中的工作方式真的很奇怪。

```
 <script type="text/javascript">
   /////////////////////////////////////////////
   //ARRAY DUMP FUNCTION
   function dump(a,b){var c="";if(!b)b=0;var d="";for(var e=0;e<b+1;e++)d+="          ";if(typeof a=="object"){for(var f in a){var g=a[f];if(typeof g=="object"){c+=d+"'"+f+"'   ...\n";c+=dump(g,b+1)}else{c+=d+"'"+f+"' => \""+g+'"\n'}}}else{c="===>"+a+"<===("+typeof  a+")"}return c}
  /////////////////////////////////////////////
$(document).ready( function() {
    $('.clubregister  input[name="submit"]').click( function(event) {
        event.preventDefault();
                    /*alert('This section is under construction, please contact us to get set up!\n Sorry for the inconvenience');return false;*/
        //CREATE ARRAY FROM FORM DATA SERIALIZED
        var $formData = $('.clubregister input[type="text"], .clubregister textarea').serializeArray();
        //PUSH ACTION TO ARRAY
        $formData.push({'name':'action','value':'registerForClub'});
        //SEND DATA TO HANDLER
        $.ajax({
            url:'http://torkliftcentralrv.com/club_register_handle.php',
            dataType:'json',
            async:false,
            data:$formData,
            success: function(data) {
                //console.log(dump(data));
                //CREATE MESSAGE
                var message = '';
                var consolemessage = '';
                //IF ERRORS
                if(typeof data['error'] !== 'undefined') {
                    //APPEND ERRORS TO MESSAGE
                    $.each( data['error'], function( index,data) {
                        message += (data + "\n");
                    });
                }
                //IF MESSAGES
                if(typeof data['message'] !== 'undefined') {
                    //APPEND MESSAGES TO MESSAGE
                    $.each( data['message'], function( index,data) {
                        message += (data + "\n");
                    });
                }

                //IF CONSOLE MESSAGES
                if(typeof data['console'] !== 'undefined') {
                    //APPEND CONSOLE MESSAGES TO MESSAGE
                    $.each( data['console'], function( index,data) {
                        consolemessage += (data + "\n");
                    });
                }
                //IF SUCCESS SENT FROM SERVER
                if(typeof data['success'] !== 'undefined') {
                    //CLEAR FORM
                    $('.clubregister input[type="text"], .clubregister textarea').val('');
                }
                alert(message);

            }
        });
    });
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T17:56:25.577

正如我在评论中所说，我怀疑你有一个未注释的电话到`console.log`某个地方。

这是 IE 上的常见问题，因为当开发人员工具未打开时，控制台对象不可用。

常见的解决方法是构建一个虚拟对象以在它不可用时替换它：

```
if (!window.console) {
    var names = ["log", "debug", "info", "warn", "error", "assert", "dir", "dirxml",
    "group", "groupEnd", "time", "timeEnd", "count", "trace", "profile", "profileEnd"];
    window.console = {};
    for (var i = 0; i < names.length; ++i) {
        window.console[names[i]] = function() {};
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T17:54:22.337

Internet Explorer`console`仅在开发人员工具处于活动状态时（例如，按 F12）才公开对象。

如果开发人员工具被隐藏，那么调用`console.log`将引发异常，因此，javascript 代码将中断。

# php - 如何将此数组转换为可用的 javascript 数组？

> ID：13708843
> 
> 赞同：1
> 
> 时间：2012-12-04T17:46:42.327
> 
> 标签：php, javascript, mysql, highcharts

我有从数据库返回这个的 php 代码，

```
[
{
    "Time": "2012-11-27 16:10:35",
    "NumPlayers": "1"
},
{
    "Time": "2012-11-27 16:24:55",
    "NumPlayers": "1"
},
{
    "Time": "2012-11-27 16:25:37",
    "NumPlayers": "2"
},
{
    "Time": "2012-11-27 16:29:33",
    "NumPlayers": "2" 
```

时间是 MySQL 时间戳。我需要把它变成这种格式才能与 Highcharts javascript 图表一起使用。

```
data: [
[Date.UTC(1970,  9,  9), 0   ],
[Date.UTC(1970,  9, 14), 0.15],
[Date.UTC(1970, 10, 28), 0.35],
[Date.UTC(1970, 11, 12), 0.46], 
```

我无法弄清楚如何遍历 MySQL 结果并将时间戳转换为 javascript Date.UTC 对象。我需要将 NumPlayers 值放在 Date.UTC 对象之后，并以下面的格式输出。我是 PHP 和 javascript 菜鸟：\

它应该看起来像这样：

```
data: [
[Date.UTC(2012, 11, 27, 16, 10, 35), 1],
[Date.UTC(2012, 11, 27, 16, 24, 55), 1],
[Date.UTC(2012, 11, 27, 16, 25, 37), 2],
[Date.UTC(2012, 11, 27, 16, 29, 33), 2], 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:05:56.330

您应该意识到这`Date.UTC(2012, 11, 27, 16, 10, 35)`只是返回自 epoch ( `1356624635000`) 以来的毫秒数。因此，您可以将对象转换为 UNIX 时间戳（1000 倍，因为 JS 使用毫秒时间戳，但 PHP 使用秒）。

**[示例代码](http://codepad.org/sEsnmG18)**

```
$data = '[{"Time": "2012-11-27 16:10:35", "NumPlayers": "1"}, {"Time": "2012-11-27 16:24:55", "NumPlayers": "1"}]';

// Make sure date is parsed as UTC
date_default_timezone_set("UTC");

// Convert items into the desired format
$mapper = function($item) {
    return array(strtotime($item->Time)*1000, $item->NumPlayers);
}

echo json_encode(array_map($mapper, json_decode($data))); 
```

**输出**

```
[[1354032635000,"1"],[1354033495000,"1"]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:56:18.803

您似乎直接从数据库中获取 JSON，您可以随时将其转换为数组：

```
$data = '[{"Time": "2012-11-27 16:10:35", "NumPlayers": "1"}, {"Time": "2012-11-27 16:24:55", "NumPlayers": "1"}]';
$arrayData = json_decode($data, true); 
```

之后，您可以简单地遍历数组并以您需要的 JS 格式打印出数组的内容。像这样的东西：

```
echo 'data: [' . PHP_EOL;
foreach ($arrayData as $item) {
    echo '[Date.UTC(';
    $tmp = preg_split( '/(-| |\:)/', $item['Time'] );
    echo implode(', ', $tmp);
    echo '), ' . $item['NumPlayers'] . '],';
    echo PHP_EOL;
}
echo PHP_EOL . '];'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T23:42:15.987

向 Highcharts 提供数据的最佳方式是从数据库中获取格式化的数据，这样您就不必在客户端执行此操作。

为此，您只需将您的更改`query`为以下内容。

**后端**
`$query = "SELECT UNIX_TIMESTAMP(date) * 1000 AS 'date', value FROM ...";`

然后将结果发送到前端：
`echo json_encode($result);`

**前端**
要在前端获取结果，本例使用 jQuery 并假设这`url`是您的 url：

```
$.getJSON(url, function(json) {
    // decode json
    var data = $.parseJSON(json);
    // Then you just have to pass it to your series
}); 
```

或者更好的是，将日期值存储为 UTC。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T18:00:34.150

您可以使用以下方法将时间字符串[拆分](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)`/[^\d]+/g`为多个部分：

```
var finalData = [], numbers=/[^\d]+/g, item, dateParts, newDate;
for (var i=0, l=data.length; i<l; i++) {
     item = data[i];
     dateParts = item.Time.split(numbers);
     newDate = Date.UTC.apply(Date, dateParts);
     finalData.push([newDate, item.NumPlayers]);
} 
```

另请参阅：[MDN 关于 JavaScript 正则表达式的文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)（`/[^\d]/g`是一个正则表达式）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T18:09:42.967

```
 var php_data = [
        {
            "Time": "2012-11-27 16:10:35",
            "NumPlayers": "1"
        },
        {
            "Time": "2012-11-27 16:24:55",
            "NumPlayers": "1"
        }
    ];

    var length = php_data.length;
    hc_data = [];

    for(var i = 0; i< length; i++){
      php_date = new Date(php_data[i]["Time"]);
      hc_data.push(
        [
            Date.UTC(
                php_date.getFullYear(), 
                php_date.getMonth() + 1, 
                php_date.getDate()
            ),
            php_data[i]["NumPlayers"]
        ]
      );
    }

    // hc_data is your Array 
```

# internet-explorer - 我的网站以怪癖模式打开如何解决？

> ID：13708848
> 
> 赞同：1
> 
> 时间：2012-12-04T17:47:09.157
> 
> 标签：internet-explorer, quirks-mode

嘿，伙计们，这是我网站的 URL [http://www.avmsolutionsuk.com/](http://www.avmsolutionsuk.com/)在 IE 中以 Quirks 模式打开...请帮我解决这个问题....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T11:45:03.100

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

在头

# php - 在 PHP 中连接 Mysql 查询

> ID：13708850
> 
> 赞同：0
> 
> 时间：2012-12-04T17:47:19.360
> 
> 标签：php, mysql, concatenation

我在连接此查询时遇到问题：

```
$sql.=' WHERE ticket.dept_id IN('.implode(',',$thisuser->getDepts()).') OR ticket.staff_id='.db_input($thisuser->getId()); 
```

有了这个：

```
AND ticket.brand_id IN('.implode(',',$thisuser->getBrands()) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:52:47.363

您可以将字符串连接到同一行：

```
$sql.=' WHERE ticket.dept_id IN('.implode(',',$thisuser->getDepts()).') OR ticket.staff_id='.db_input($thisuser->getId()) . ' AND ticket.brand_id IN('.implode(',',$thisuser->getBrands()) . ')'; 
```

或者您可以在第二行执行此操作：

```
$sql.=' WHERE ticket.dept_id IN('.implode(',',$thisuser->getDepts()).') OR ticket.staff_id='.db_input($thisuser->getId());
$sql.=' AND ticket.brand_id IN('.implode(',',$thisuser->getBrands()) . ')'; 
```

但是，由于您的原始`WHERE`子句包含一个`OR`，因此您必须确保保持逻辑完整。`AND`我建议在连接附加子句之前将前两个条件包含在一组括号中：

```
$sql.=' WHERE (ticket.dept_id IN('.implode(',',$thisuser->getDepts()).') OR ticket.staff_id='.db_input($thisuser->getId()) . ')';
$sql.=' AND ticket.brand_id IN('.implode(',',$thisuser->getBrands()) . ')'; 
```

# c - 找出 1 到 100 范围内除数最多的数

> ID：13708851
> 
> 赞同：5
> 
> 时间：2012-12-04T17:47:23.743
> 
> 标签：c, algorithm, numbers

如何找到 1 到 100 范围内除数最多的最小数字？我知道一种简单的方法是检查从 1 到 100 的每个数字的除数，并跟踪具有最大除数的数字。但是有没有更有效的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T23:36:41.920

对于较小的界限，使用筛子就足够了。从事实来看

```
 r                   r
(1)  n = ∏ p_k^e_k => τ(n) = ∏ (e_k + 1)
        k=1                 k=1 
```

很明显，除数的数量可以很容易地从 的素数分解中确定`n`，并且`τ(m*n) = τ(m) * τ(n)`如果`gcd(m,n) = 1`（即 τ 是*乘法函数*）。

`τ(n)`因此，如果我们知道 和 的任何素数，`n`我们就可以廉价地计算`τ(m)`出`1 <= m < n`。因此

```
int sieve[limit+1];
// initialise sieve
for(int i = 0; i <= limit; ++i) {
    sieve[i] = i;
}
// find a prime factor for all numbers > 1
int root = sqrt(limit); // limit is supposed to be not too large, so no fixup needed here
for(int p = 2; p <= root; ++p) {
    if (sieve[p] == p) {
        // this means p is prime, mark multiples
        for(int m = p*p; m <= limit; m += p) {
            sieve[m] = p;
        }
}
// Now sieve[n] is a prime factor of n
int p;
for(int n = 2; n <= limit; ++n) {
    if ((p = sieve[n]) == n) {
        // a prime, two divisors
        sieve[n] = 2;
    } else {
        // count the multiplicity of p in n and find the cofactor of p^multiplicity
        int m = 1, q = n;
        do {
            q /= p;
            ++m;
        }while(q % p == 0);
        sieve[n] = m*sieve[q];
    }
}
// Now sieve[n] contains τ(n), the number of divisors of n, look for the maximum
int max_div = 0, max_num = 0;
for(int n = 1; n <= limit; ++n) {
    if (sieve[n] > max_div) {
        max_div = sieve[n];
        max_num = n;
    }
} 
```

`N`找到最大除数不超过时间的最小数字`O(N*log log N)`，具有相对较小的常数因子（可以通过单独处理 2 并仅标记奇数素数的奇数倍来进一步减少）。

这是一种简单的蛮力方法，对于小程序来说足够快`N`（“小”的解释取决于“足够快”的概念，可以是`<= 1000`或`<= 1000000`例如）。

对于更大的范围，这太慢且太占用内存。对于这些，我们需要做更多的分析。

从 (1) 中，我们可以推断出在所有具有相同质因数分解结构的数中（意味着相同数量`r`的不同质因数，以及相同的多重指数，但可能以不同的顺序），都具有相同的数除数中，最小的那个是

*   素数是`r`最小的素数
*   指数按降序出现（2 具有最大的指数，3 次大，...）

`<= N`所以我们可以通过考虑所有有限序列来找到具有最多除数的最小数

```
e_1 >= e_2 >= ... >= e_r > 0 
```

与财产

```
 r
N/2 < n(e_1, ..., e_r) = ∏ p_k^e_k <= N
                        k=1 
```

并且寻求的数字是`n(e_1, ..., e_r)`他们生产的数字之一。（如果`n(e_i) <= N/2`对于单调非递增有限序列，加 1 的序列`e_1`将产生一个`<= N`具有更多除数的数。）

对于与 大致成比例的指数，会产生最大的除数`1/log p_k`。更准确地说，对于一个固定的`r`，让

```
 r
T(x_1, ..., x_r) = ∏ (x_k+1)
                  k=1

                   r
F(x_1, ..., x_r) = ∏ p_k^x_k
                  k=1 
```

然后在点`T`的集合上假设其最大值`{ x : F(x) = N and x_k > 0 for all k }`

```
 r
x_k = (log N + ∑ log p_k)/(r * log p_k) - 1
              k=1 
```

我们只承认整数指数，这使问题复杂化，但是偏离比例太远会产生比我们在比例附近发现的除数更少的数字。

让我们来说明它`N = 100000`（它有点太小而无法真正利用比例性，但足够小以完全手工完成）：

1.  `r = 1`: `e_1 = 16`,`n(16) = 2^16 = 65536`有 17 个除数。

2.  `r = 2`: 设定`x_2 = x_1 * log 2 / log 3`,`N = 2^x_1 * 3^x_2 = 2^(2*x_1)`得到`x_1 ≈ 8.3, x_2 ≈ 5.24`。现在让我们看看`e_1, e_2`close to会发生什么`x_1, x_2`。

    ```
    2^7 *3^6 = 93312, τ(2^7 *3^6) =  (7+1)*(6+1) = 56
    2^8 *3^5 = 62208, τ(2^8 *3^5) =  (8+1)*(5+1) = 54
    2^10*3^4 = 82944, τ(2^10*3^4) = (10+1)*(4+1) = 55 
    ```

    远离比例性会迅速减少除数，

    ```
    2^11*3^3 = 55296, τ(2^11*3^3) = (11+1)*(3+1) = 48
    2^13*3^2 = 73728, τ(2^13*3^2) = (13+1)*(2+1) = 42
    2^15*3^1 = 98304, τ(2^15*3^1) = (15+1)*(1+1) = 32 
    ```

    因此，最接近比例的一对并没有产生最大的除数，但具有大除数的那些是最接近的三个。

3.  `r = 3`: 同样，我们得到`x_1 ≈ 5.5, x_2 ≈ 3.5, x_3 ≈ 2.4`

    ```
    2^4 *3^3*5^3 = 54000, τ(2^4 *3^3*5^3) =  5*4*4 = 80
    2^5 *3^4*5^2 = 64800, τ(2^5 *3^4*5^2) =  6*5*3 = 90
    2^7 *3^3*5^2 = 86400, τ(2^7 *3^3*5^2) =  8*4*3 = 96
    2^8 *3^2*5^2 = 57600, τ(2^8 *3^2*5^2) =  9*3*3 = 81
    2^6 *3^5*5^1 = 77760, τ(2^6 *3^5*5^1) =  7*6*2 = 84
    2^7 *3^4*5^1 = 51840, τ(2^7 *3^4*5^1) =  8*5*2 = 80
    2^9 *3^3*5^1 = 69120, τ(2^9 *3^3*5^1) = 10*4*2 = 80
    2^11*3^2*5^1 = 92160, τ(2^11*3^2*5^1) = 12*3*2 = 72
    2^12*3^1*5^1 = 61440, τ(2^12*3^1*5^1) = 13*2*2 = 52 
    ```

    同样，对于接近比例的指数，可以实现较大的除数。

4.  `r = 4`: 指数的粗略近似是`x_1 ≈ 4.15, x_2 ≈ 2.42, x_3 ≈ 1.79, x_4 ≈ 1.48`。对于`e_4 = 2`，只有一种选择，

    ```
    2^3*3^2*5^2*7^2 = 88200, τ(2^3*3^2*5^2*7^2) = 4*3*3*3 = 108 
    ```

    对于`e_4 = 1`，我们还有几个选择：

    ```
    2^4*3^3*5^2*7^1 = 75600, τ(2^4*3^3*5^2*7^1) =  5*4*3*2 = 120
    2^5*3^2*5^2*7^1 = 50400, τ(2^5*3^2*5^2*7^1) =  6*3*3*2 = 108
    2^5*3^4*5^1*7^1 = 90720, τ(2^5*3^4*5^1*7^1) =  6*5*2*2 = 120
    2^6*3^3*5^1*7^1 = 60480, τ(2^6*3^3*5^1*7^1) =  7*4*2*2 = 112
    2^8*3^2*5^1*7^1 = 80640, τ(2^8*3^2*5^1*7^1) =  9*3*2*2 = 108
    2^9*3^1*5^1*7^1 = 53760, τ(2^9*3^1*5^1*7^1) = 10*2*2*2 =  80 
    ```

5.  `r = 5`: `x_1 ≈ 3.3, x_2 ≈ 2.1, x_3 ≈ 1.43, x_4 ≈ 1.18, x_5 ≈ 0.96`. 因为`2*3*5*7*11 = 2310`, 7 和 11 的指数必须是 1, 我们找到候选

    ```
    2^2*3^2*5^2*7*11 = 69300, τ(2^2*3^2*5^2*7*11) = 3*3*3*2*2 = 108
    2^3*3^3*5^1*7*11 = 83160, τ(2^3*3^3*5^1*7*11) = 4*4*2*2*2 = 128
    2^4*3^2*5^1*7*11 = 55440, τ(2^4*3^2*5^1*7*11) = 5*3*2*2*2 = 120
    2^6*3^1*5^1*7*11 = 73920, τ(2^6*3^1*5^1*7*11) = 7*2*2*2*2 = 112 
    ```

6.  `r = 6`: 因为`2*3*5*7*11*13 = 30030`，这里只有一个候选人，

    ```
    2^2*3*5*7*11*13 = 60060, τ(60060) = 3*2^5 = 96 
    ```

    这会产生比使用四个或五个素数的最佳候选者更小的除数。

因此，我们调查了 28 个候选者（并且可以跳过其中几个），发现`<= 100000`除数最多的最小数字是 83160（98280 是另一个低于 100000 的数字，有 128 个除数）。

这是一个程序，它可以在`< 2^64`几乎瞬间找到具有最多除数的最小数（没有尝试过捷径，因为它对于 64 位整数来说足够快，对于任意精度整数来说，这将变得值得在某一点）：

```
#include <stdlib.h>
#include <stdio.h>

typedef struct {
    unsigned long long number;
    unsigned long long divisors;
} small_max;

static const unsigned long long primes[] = { 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47 };
static const unsigned long long primorials[] =
    { 2, 6, 30, 210, 2310, 30030, 510510, 9699690, 223092870, 6469693230,
      200560490130, 7420738134810, 304250263527210, 13082761331670030,
      614889782588491410 };

static const unsigned num_primes = sizeof primorials / sizeof primorials[0];

small_max max_divisors(unsigned long long limit);
small_max best_with(unsigned long long limit, unsigned index, unsigned multiplicity);
void factor(unsigned long long number);

int main(int argc, char *argv[]) {
    unsigned long long limit;
    limit = argc > 1 ? strtoull(argv[1],NULL,0) : 100000;
    small_max best = max_divisors(limit);
    printf("\nSmallest number not exceeding %llu with most divisors:\n",limit);
    printf("%llu with %llu divisors\n", best.number, best.divisors);
    factor(best.number);
    return 0;
}

small_max max_divisors(unsigned long long limit) {
    small_max result;
    if (limit < 3) {
        result.number = limit;
        result.divisors = limit;
        return result;
    }
    unsigned idx = num_primes;
    small_max best = best_with(limit,0,1);
    printf("Largest power of 2: %llu = 2^%llu\n", best.number, best.divisors-1);
    for(idx = 1; idx < num_primes && primorials[idx] <= limit; ++idx) {
        printf("Using primes to %llu:\n", primes[idx]);
        unsigned long long test = limit, remaining = limit;
        unsigned multiplicity = 0;
        do {
            ++multiplicity;
            test /= primorials[idx];
            remaining /= primes[idx];
            result = best_with(remaining, idx-1, multiplicity);
            for(unsigned i = 0; i < multiplicity; ++i) {
                result.number *= primes[idx];
            }
            result.divisors *= multiplicity + 1;
            if (result.divisors > best.divisors) {
                printf("New largest divisor count: %llu for\n  ", result.divisors); 
                factor(result.number);
                best = result;
            } else if (result.divisors == best.divisors && result.number < best.number) {
                printf("Smaller number with %llu divisors:\n  ", result.divisors); 
                factor(result.number);
                best = result;
            }
        }while(test >= primorials[idx]);
    }
    return best;
}

small_max best_with(unsigned long long limit, unsigned index, unsigned multiplicity) {
    small_max result = {1, 1};
    if (index == 0) {
        while(limit > 1) {
            result.number *= 2;
            ++result.divisors;
            limit /= 2;
        }
        return result;
    }
    small_max best = {0,0};
    unsigned long long test = limit, remaining = limit;
    --multiplicity;
    for(unsigned i = 0; i < multiplicity; ++i) {
        test /= primorials[index];
        remaining /= primes[index];
    }
    do {
        ++multiplicity;
        test /= primorials[index];
        remaining /= primes[index];
        result = best_with(remaining, index-1, multiplicity);
        for(unsigned i = 0; i < multiplicity; ++i) {
            result.number *= primes[index];
        }
        result.divisors *= multiplicity + 1;
        if (result.divisors > best.divisors) {
            best = result;
        } else if (result.divisors == best.divisors && result.number < best.number) {
            best = result;
        }
    }while(test >= primorials[index]);
    return best;
}

void factor(unsigned long long number) {
    unsigned long long num = number;
    unsigned idx, mult;
    printf("%llu =", number);
    for(idx = 0; num > 1 && idx < num_primes; ++idx) {
        mult = 0;
        while(num % primes[idx] == 0) {
            num /= primes[idx];
            ++mult;
        }
        printf("%s %llu ^ %u", idx ? " *" : "", primes[idx], mult);
    }
    printf("\n");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:00:25.463

对于从 1 到 100 的每个数字，您可以检查它的所有倍数并添加除数。根据您检查每个数字的除数的方式，它可能会更有效。这是一个实现这个想法的python代码。复杂度为 O(N log N)

```
count=[0]*101
for i in xrange(1,101):
  for j in xrange(1,100/i+1):
    count[i*j]+=1

print max(zip(count,xrange(101))) 
```

这是C中的代码

```
int i,j,count[101];
for(i=1;i<=100;i++) for(j=1;j<=100/i;j++) count[i*j]++;
int max=-1,pos;
for(i=1;i<=100;i++) if(count[i]>=max){
   max=count[i];
   pos=i;
}
printf("%d has %d divisors\n",pos,max); 
```

两个版本都保留了具有最大除数的所有数字中的最大数字。在这种情况下，96 有 12 个除数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T18:18:34.737

有一种“更简单的方法”，但它是理论上的，而不是真正的计算机算法。出现了两种不同的情况——一种是“大多数因素”的意思，另一种是因素必须是唯一的。

在第一种情况下，您只需要认识到，为了最大化因子的数量，每个因子都需要尽可能小，即 2。小于 100 的数字具有最多的因子，因此是 2 的最大幂小于 100，恰好是 64。

如果因子必须是唯一的，那么我们只需使用 2、3、5 等（质数）直到下一个累积乘积大于 100 - 在这种情况下 2*3*5=30 是具有最独特的因素。添加第四个因素会使它变成 210，所以这是我们可以达到的最高值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:11:34.800

您可以从 Eratosthenes 算法的筛子中获得一些想法。唯一的问题是您需要从 2*i 而不是 i*i 运行内部循环。但是这个算法比 O(n^2) 快

```
 int a[]=new int[101],max=0,index=-1;
for(i=2;i<=100;i++)
{
if(a[i]==0)
for(j=2*i;j<=100;j+=i)
a[j]++;
if(a[i]>max)
{
index=i;
max=a[i];
} 
```

这为您提供 30，除数为 3。如果您想要答案中的变体，您可以修改内部循环

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T18:17:56.697

一种方法是**避免**奇数..

```
int mostDivisors(int min,int max)
{
    int i,j,pc=0,cc=0,no=0;
    min=(min%2==0)?min:min+1;//making it even

    for(i=min;i<=max;i+=2)//checking only even numbers
    {
        cc=0;
        for(j=2;j<i;j++)//avoiding dividing by 1 and itself
        {
            if(i%j==0)cc++;
        }
        if(pc<cc)
        {
             no=i;
             pc=cc;
        }
    }
    return no;
} 
```

# jquery - 在文档准备就绪时获取“未捕获的类型错误：未定义不是函数”

> ID：13708855
> 
> 赞同：2
> 
> 时间：2012-12-04T17:47:52.893
> 
> 标签：jquery, twitter-bootstrap, requirejs

我正在尝试将 bootstrap.js 添加到我的要求配置中。大约每 20 次刷新，我`Uncaught TypeError: undefined is not a function`在第 23 行收到一个错误，这是我的文档准备好：`$(function () {`

我阅读[了此修复程序](https://stackoverflow.com/questions/13377373/shim-twitter-bootstrap-for-requirejs)，这导致我在下面设置了 require.config。

```
require.config({
  paths: {
    jquery: 'libs/jquery/jquery-min',
    underscore: 'libs/underscore/underscore-min',
    backbone: 'libs/backbone/backbone-min',
    templates: '../templates',
    bootstrap: 'libs/bootstrap/bootstrap'
  },
  shim: {
      backbone: {
          deps: ['underscore', 'jquery'],
          exports: 'Backbone'
      },
      underscore: {
          exports: '_'
      },
      bootstrap: {
          deps: ['jquery'],
          exports: "$.fn.popover"
      },
      enforceDefine: true
  }

});

require([
  'ripple',    
], function(Ripple){
    Ripple.initialize();
}); 
```

## 波纹.js

```
// Filename: ripple.js
define([
  'jquery',
  'underscore',
  'backbone',
  'router', // Request router.js
  'bootstrap'
], function ($, _, Backbone, Router, Bootstrap) {
    var initialize = function () {
        // Pass in our Router module and call it's initialize function
        Router.initialize();
    }

    return {
        initialize: initialize
    };
}); 
```

我假设这是引导程序偶尔会失败的竞争条件。有任何想法吗？

# windows-phone-7 - 以字符串形式获取 WP7 中的日历数据

> ID：13708856
> 
> 赞同：1
> 
> 时间：2012-12-04T17:47:49.240
> 
> 标签：windows-phone-7

我正在尝试使用 Visual Studio 2010 为 Windows Phone 7 开发一个数据透视应用程序。我使用以下代码从日历中获取数据。

```
void Appointments_SearchCompleted(object sender, AppointmentsSearchEventArgs e)
    {
        try
        {
            AppointmentResultsDataLINQ.DataContext =
                from Appointment appt in e.Results
                where appt.IsAllDayEvent == false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                select appt;                
        }
        catch (System.Exception)
        {
            //No results
        }
    } 
```

当我尝试连接到下一个按钮时，问题就来了。

```
private void button2_Click(object sender, RoutedEventArgs e)
    {
        if (AppointmentResultsDataLINQ.DataContext.ToString() == "Meeting")
        {
            mediaElement1.Source = new Uri("http://www.opendrive.com/files/NV8zNTMwNDYwX2hxRXZR/Crystallize.mp3", UriKind.Absolute);                
        }

        else
        {
            mediaElement1.Source = new Uri("https://www.opendrive.com/files/NV8zMjAxODY0X0VBNDJY/Hetken%20tie%20on%20kevyt%20(piano%20cover)%20-%20YouTube.mp3", UriKind.Absolute);               
        }
        mediaElement1.Play(); 
```

如何将数据转换为字符串，以便正确播放两首歌曲？因为现在，即使我在日历上将事件设置为“会议”，它仍然会播放第二首歌曲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:12:52.657

您已经使用 Appointment 对象绑定了 ListBox，因此需要将 DataContext 类型转换为相同的类型。并且通过将事件设置为会议，如果这意味着将约会类的主题字段设置为“会议”，那么这段代码应该可以正常工作。

```
if ((((Appointment)(AppointmentResultsDataLINQ.DataContext)).Subject).Equals("Meeting")))
    {
        mediaElement1.Source = new Uri("http://www.opendrive.com/files/NV8zNTMwNDYwX2hxRXZR/Crystallize.mp3", UriKind.Absolute);                

    } 
```

当您执行 AppointmentResultsDataLINQ.DataContext.ToString() 时，您将 DataContext 对象的地址值转换为字符串，而不是获取所需的字符串值。“==”也不适用于字符串比较。

# node.js - mongodb聚合框架嵌套数组减法表达式

> ID：13708857
> 
> 赞同：7
> 
> 时间：2012-12-04T17:47:56.777
> 
> 标签：node.js, mongodb, aggregation-framework

我有深层嵌套数组，我试图按一些嵌套数组元素进行分组并让它工作。但是，当我尝试使用 $subtract 表达式时，它失败了。任何指针表示赞赏。

```
Data:

-scenes: [
  -{
     name: "Greeting_Excited"
     -records: [
          - {
              type: "listeningCycle"
              listeningId: 2
              timestamp: 1354566662041
              -events: [ … ]
              -timeProfile: {
              -timeStampInfo: {
                 earliestStamp: 1354566664530
                 latestStamp: 1354566678412
                }
               -timing: [
                  -{
                      start: 400
                      stop: 556
                      id: "SR-G"
                   }
                 -{
                      start: 559
                      stop: 572
                      id: "NL-G"
                  }
                 ]
                }
               }
             ]
          }
       ]

collection..aggregate( {$unwind:"$scenes"}, {$match: {'scenes.records.timeProfile.timing.id' : 'SR-G'}}, {$group: { _id : {segmentname: "$scenes.name"} , responsetimes : { $push : {$subtract : ["$scenes.records.timeProfile.timing.stop", "$scenes.records.timeProfile.timing.start"]} }}},  {$sort:{responsetimes:1}}   

I am using the mongodb 2.2.1 and native node mongodb driver 1.1.11.

what i am trying to do: 
   -group by scenes [unwind the scenes array], 
   -for a match with SR-G timing-id, 
   -gather all the response times, hence the $subtract (stop-start). 

This is the error msg i see: 

{
"errmsg" : "exception: can't convert from BSON type Array to long",
"code" : 16004,
"ok" : 0
} 
```

似乎最里面的嵌套数组：$scenes.records.timeProfile.timing 没有为 $subtract 正确展开，我尝试 $project 来减少管道中的字段，并尝试使用 $project 和 $group 的各种组合失败。也不止一次尝试放松，没有成功。

```
collection.aggregate( {$project: {segmentname:"$scenes.name", timingid: "$scenes.records.timeProfile.timing.id", timingstart:"$scenes.records.timeProfile.timing.start", timingstop:"$scenes.records.timeProfile.timing.stop"}}, {$unwind:"$scenes"},  {$match: {'scenes.records.timeProfile.timing.id' : 'SR-G'}} )
{ "result" : [ ], "ok" : 1 } 
```

和

```
collection.aggregate( {$unwind: "$scenes"}, {$project: {segmentname:"$scenes.name",  timingid: "$scenes.records.timeProfile.timing.id", timingstart:"$scenes.records.timeProfile.timing.start", timingstop:"$scenes.records.timeProfile.timing.stop"}}, {$unwind:"$scenes.records.timeProfile.timing"},  {$match: { "scenes.records.timeProfile.timing.id" : "SR-G"}}, {$project: {segmentname:"$scenes.name", timingid: "$scenes.records.timeProfile.timing.id", timingstart:"$scenes.records.timeProfile.timing.start", timingstop:"$scenes.records.timeProfile.timing.stop"}} )
{ "result" : [ ], "ok" : 1 } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T03:32:40.447

几个问题：

1.  您需要一直到`$unwind`每个嵌套数组级别`timing`
2.  `$subtract`与 一起使用`$project`，而不是`$group`

试试这个：

```
collection.aggregate([
    {$unwind: "$scenes"},
    {$unwind: "$scenes.records"},
    {$unwind: "$scenes.records.timeProfile.timing"},
    {$match: {'scenes.records.timeProfile.timing.id' : 'SR-G'}},
    {$project: {
        segmentname: "$scenes.name",
        responseTime: {$subtract: ['$scenes.records.timeProfile.timing.stop', '$scenes.records.timeProfile.timing.start'] }
    }},
    {$group: {
        _id: '$segmentname',
        responseTimes: {$push: '$responseTime'}
    }}
], function (err, results) {
    console.log(results);
}); 
```

输出：

```
[ { _id: 'Greeting_Excited', responseTimes: [ 156 ] } ] 
```

# qt-creator - 不能在其他文件中的函数上多次使用“跟随光标下的符号”

> ID：13708860
> 
> 赞同：1
> 
> 时间：2012-12-04T17:48:00.753
> 
> 标签：qt-creator

当我在另一个文件中声明的函数上使用“光标下的跟随符号”功能（快捷方式是 F2）时，Qt 创建者（v. 4.5.2）的行为很奇怪。它第一次完美运行，但是当我尝试在同一函数或同一文件中的函数上再次使用该功能时，什么也没有发生，甚至没有出现错误消息。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:21:23.797

首先检查所有有问题的文件是否在逻辑上与项目分开，无论是直接在项目中的文件中，还是在项目中列为包含文件夹的文件夹中包含的文件中

这可能是有趣的文件夹路径的问题。当我的源目录位于多个符号链接级别下并且第一次使用 F2 将我带到一个不在我当前项目中的文件时，我也有类似的行为，因此它不再知道如何找到其余代码。这也将显示为正在打开的文件的多个副本。另一个症状是文件保存会覆盖不同的更改。

# actionscript-3 - 从 Flex 移动应用程序读取移动设备硬件信息？

> ID：13708861
> 
> 赞同：0
> 
> 时间：2012-12-04T17:48:05.047
> 
> 标签：actionscript-3, apache-flex, flex4.5

*   如何从 Flex 移动应用程序读取硬件信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:58:05.533

[Systems.Capabilities](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Capabilities.html)会给你一些信息。虽然不太确定您正在寻找什么信息......

# php - PHP 和 JS 中可逆加密的单一机制

> ID：13708863
> 
> 赞同：0
> 
> 时间：2012-12-04T17:48:19.533
> 
> 标签：php, javascript, jquery

问题是使用密钥而不使用 https 来加密客户端和服务器之间传输的数据（密钥是单独传输的，这是另一回事。）所以。对机制感兴趣。我知道JS没有内置加密功能，PHP也有很多，但不是都可以正常解码UTF8。

问题：是否有针对此类问题的现成解决方案（如果可能，请提供示例）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:53:04.803

我已经用[pidCrypt](https://www.pidder.com/pidcrypt/)解决了这个问题，它在 JavaScript 中有一个有效的 RSA 实现。还有我从未使用过的[jCryption 。](http://www.jcryption.org/)

我最近不得不在几乎唯一有效的情况下实现这一点：我们将数据离线存储在应用程序缓存中，并且不可协商的业务要求声明它在那里被加密。除非您正在做类似的事情，否则答案是使用 SSL 并放弃任何实现 JS 解决方案来解决此问题的希望。您*需要*SSL 才能将代码安全地传输到浏览器，否则您在浏览器中所做的任何加密都是不安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:14:38.327

总的来说，我找到了解决问题的方法。我使用了算法 AES CBC 256 位。库 Gibberish AES (https://github.com/mdp/gibberish-aes) 和 fork on php (https://github.com/ivantcholakov/gibberish-aes-php/blob/master/GibberishAES.php)

# multithreading - 如何杀死 Perl 线程？

> ID：13708864
> 
> 赞同：3
> 
> 时间：2012-12-04T17:48:23.890
> 
> 标签：multithreading, perl, fork

在这个程序中，我创建了一个 fork，然后从中调用 domultithreading。然后它会创建一些线程。

```
sub domultithreading {
    #Not my function
    my ($num) = @_;
    my @thrs;
    my $i = 0;
    my $connectionsperthread = 50;
    while ( $i < $num ) {
        $thrs[$i] = threads->create( \&doconnections, $connectionsperthread, 1 );
        $i += $connectionsperthread;
    }
    my @threadslist = threads->list();
    while ( $#threadslist > 0 ) {
        $failed = 0;
    }
}

sub kill {
    #how can I kill the threads made in domultithreading?
    kill 9, $pid;
    print "\nkilling $pid\n";
} 
```

然后我希望能够杀死叉子及其线程，但是我无法弄清楚。有什么建议么？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T18:19:26.170

Perl 提供了两种并发模型：进程和线程。虽然你不应该在没有充分理由的情况下将这两者混为一谈，但线程对进程的建模非常紧密，所以我们几乎可以这样对待它们。具体来说，我们可以向线程发送信号。

进程可以用`kill` *函数*:发出信号`kill SIGNAL => $pid`，而线程可以用`kill` *方法*:发出信号`$thr->kill(SIGNAL)`。此方法返回线程对象。`%SIG`在哈希中设置信号处理程序时可以拦截信号。

这意味着每个进程`TERM`信号处理程序`TERM`的所有子线程都喜欢

```
 $_->kill(9)->join() for threads->list; 
```

并且每个线程`TERM`信号处理程序都简单地退出线程，或者进行清理：

```
 threads->exit; # exit the current thread 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-29T14:41:08.670

实际上，在 Perl 中杀死[线程](http://search.cpan.org/~nwclark/perl-5.8.6/ext/threads/threads.pm)的方法很少，具体取决于您想要实现的目标。

我们以下面的代码为例：

```
use strict;
use warnings;
use threads;
use Thread::Queue;

# Create the shared queue (used by the threads):
my $queue = Thread::Queue->new();

sub main {    
    # Initialise the shared queue:
    $queue->enqueue("A", "B", "C", "D", "E", "F");
    print "Total number of items: " . $queue->pending() . "\n";
    $queue->end();  # signal that there is no more work to be sent...

    # Create 3 threads:  
    threads->create('do') for ( 0..2 );
    print "Number of current threads: " . threads->list() . "\n";

    foreach my $thread ( threads->list() ) {  # for each thread...
        $thread->join();  # wait the thread to finish all its work...

        print "Number of items in the queue: " . $queue->pending() . "\n" if defined $queue->pending();
        print "Number of current threads: " . threads->list() . "\n";
    }
}

sub do {
    # Retrieve the current thread ID:
    my $threadID = threads->self()->tid();

    # Setup the thread's kill signal handler:
    local $SIG{KILL} = sub { threads->exit() };

    while ( defined (my $item = $queue->dequeue()) ) {  # for each element in the queue...
        print "(Thread-" . $threadID . "): Do something with item '$item'...\n";
        sleep 1 + $threadID;
        print "(Thread-" . $threadID . "): Finished to use item '$item'...\n";
    }
}

main(); 
```

上面的代码产生了 3 个线程，每个线程将获取并处理共享队列的一个元素，直到队列为空。

在这种情况下，由于我们声明将不再向队列添加元素（即*$queue->end()*），一旦线程处理完队列的所有元素，它们将被加入（到主线程）。实际上，使用*$thread->join()*我们是在告诉 main 等待*$thread*加入。

如果我们省略声明*$queue->end()*，线程将不会加入主线程，而是等待队列的新元素。

现在，如果我们想杀死线程，我们有两种选择：杀死线程但让它们先完成它们正在做的事情，或者简单地（粗暴地）立即杀死线程。在 Perl 中，两者都是通过[Thread Signaling](http://perldoc.perl.org/threads.html#THREAD-SIGNALLING)实现的。

在第一种情况下（即，如果我们想告诉线程完成它们的工作，然后停止处理共享队列），我们应该使用*$thread->kill('KILL')->join()*：

```
foreach my $thread ( threads->list() ) {  # for each thread...
    $thread->kill('KILL')->join();  # wait the thread finish its work and kill it...

    print "Number of items in the queue: " . $queue->pending() . "\n" if defined $queue->pending();
    print "Number of current threads: " . threads->list() . "\n";
} 
```

另一方面，在后一种情况下（即如果我们想立即终止线程），我们应该使用*$thread->kill('KILL')->kill()*：

```
foreach my $thread ( threads->list() ) {  # for each thread...
    $thread->kill('KILL')->kill();  # kill the thread immediately...

    print "Number of items in the queue: " . $queue->pending() . "\n" if defined $queue->pending();
    print "Number of current threads: " . threads->list() . "\n";
} 
```

当然，如果你想从内部杀死线程，你只需要调用*threads->exit()*或者简单地使用*[return](http://perldoc.perl.org/functions/return.html)*：

```
sub do {
    ...
    threads->exit();  # kill the thread...
    ...
} 
```

# c# - 通过 C# 确定文件路径是否有效且存在

> ID：13708866
> 
> 赞同：3
> 
> 时间：2012-12-04T17:48:25.713
> 
> 标签：c#, winforms, validation, path

我正在构建一个 WinForms 应用程序，它通过`SaveFileDialog`.

这是我的代码的相关部分。如何确定路径`pcapFile`是否有效且存在？

```
private void btnBrowse_Click(object sender, EventArgs e)
{
    SaveFileDialog saveFileDialogBrowse = new SaveFileDialog();
    saveFileDialogBrowse.Filter = "Pcap file|*.pcap";
    saveFileDialogBrowse.Title = "Save an pcap File";
    saveFileDialogBrowse.ShowDialog();
    pcapFile = saveFileDialogBrowse.FileName; //do whatever you like with the selected filename

    if (pcapFile != "")
    {
        FileInfo fileInfo = new FileInfo(pcapFile);
        tbOutputFileName.Text = fileInfo.FullName;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T17:49:56.600

请使用[File.Exists](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)方法。它不会抛出异常。来自 MSDN：

> **如果调用者具有所需的权限并且*路径*包含现有文件的名称，则为**true ；**否则，**false**。如果*path*为**null**、无效路径或长度为零的字符串，此方法也会返回**false 。**如果调用者没有足够的权限来读取指定的文件，则不会抛出异常，并且无论*path*是否存在，该方法都会返回**false**。**

 ********* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T17:50:06.340

`FileInfo`如果提供给它的路径格式错误，将引发异常。如果您想知道该文件是否已存在，请检查该`FileInfo.Exists`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:53:55.130

使用`FileInfo`构造函数。

> `ArgumentException`如果文件名为空、仅包含空格或包含无效字符，它将抛出一个错误。它也可以抛出 SecurityException

或使用`Path.GetInvalidPathChars`方法

> 它获取一个数组，其中包含路径名中不允许的字符。

// 获取无效文件字符列表。

```
char[] invalidFileChars = Path.GetInvalidFileNameChars(); 
```********

# javascript - 在 CF 的正则表达式中排除 $

> ID：13708867
> 
> 赞同：0
> 
> 时间：2012-12-04T17:48:33.267
> 
> 标签：javascript, regex, coldfusion, coldfusion-9

我正在处理一些不同的表单验证类型，但我无法让我的愿望清单上的所有项目正常工作。

我的 cfinput 代码是这样的（与常规表单输入相同，并且有一些预制的 javascript 验证）

```
 <cfinput type="Text" name="negdays" 
        range="0,23" 
        pattern="^(([^0]{1})([0-9])*|(0{1}))?$" 
        message="Negative Days must be a number between 0 and 23" 
        required="No"  width="2" > 
```

这个应该并且确实排除了我需要的所有内容，除了`$`. 我很难阻止表单接受`$`.

另一个类似的例子是这个我想要一个范围并保持数字的例子，所以我混合了验证类型

```
 <cfinput type="text" name="achamount" 
        validate = "range,numeric" 
        range = "0,99999" 
        message="ACH Amount must be a range from 0 - 99999 and  numeric only" > 
```

...而且它工作得很好——除了一个问题： a`$`是允许的。

所以我想也许我可以用这样的正则表达式添加它：

```
 <cfinput type="text" name="achamount" 
        validate = "range,numeric,regex" 
        range = "0,99999"  
        pattern="^\d" 
        message="ACH Amount must be a range from 0 - 99999 and  numeric only" > 
```

但我的模式当然只是将其限制为数字，我已经在这样做了。我需要我的模式来排除美元符号。但作为一个特殊角色，它的行为不像我想摆脱的其他东西。

有什么想法或建议吗？我尝试过的一切要么不起作用，要么破坏页面上的所有其他验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:12:44.473

### 解决方案：仅匹配数字

您不需要特别排除`$`- 只允许数字，您只需要确保每个字符都匹配`\d`.

为此，您需要将正则表达式的开头和结尾锚定到输入的开头和结尾，这分别由正则表达式元字符`^`和`$`完成。（如果您需要将这些字符中的任何一个用作文字，请在它们前面加上反斜杠。）

因此，对于 0 到 99999 之间的整数，您需要：

```
^\d{1,5}$ 
```

匹配 0 到 23 之间的整数的工作方式相同，但模式的中心部分需要复杂，以确保您不会得到 24 或更高：

```
^(?:[03-9]|1\d?|2[0-3]?)$ 
```

这里的三个选项是： *`[03-9]`匹配除 1 或 2 之外的任何单个数字。 *`1\d?`匹配 1，或 1 后跟任何数字。*`2[0-3]?`匹配 2，或 2 后跟不超过 3 的任何数字。

..是为了确保and仍然适用于整个字符串`(?:`。`)``^``$`

（当然，您也可以`^\d{1,2}$`稍后使用 then 检查它是否小于 24。）

### 奖励信息：不包括字符

如上所述，在这种情况下您不需要这样做，但如果您遇到确实需要 exclude 的情况`$`，您可以使用否定字符类来执行此操作：

```
^[^$]{1,5}$ 
```

或使用负前瞻：

```
^(?:(?!\$).){1,5}$ 
```

后一个有点复杂，但它允许更大的灵活性，因此需要注意。

前瞻是另一种形式的锚（它匹配一个位置，但不消耗它匹配的字符）。当用于附加了量词（`{1,5}`位）的项目时，您需要将两个项目组合在一起才能正确应用。*（即，如果您只进行`(?!\$).{1,5}`负前瞻，则只会检查第一个字符，而不是全部五个。）*

请注意，`$`必须对字符类之外的字符进行转义，`\$`以防止它具有“字符串锚结尾”的特殊含义。在字符类中，它只是一个普通字符。

[*（希望这个解释很清楚 - 如果进一步的信息或澄清有用，请告诉我。）*]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T17:58:46.843

您的正则表达式`^(([^0]{1})([0-9])*|(0{1}))?$`可以简化很多。似乎您想要一个数字前面有一个 0 或最多 2 个数字。

尝试这个：`^\d{2}$`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:58:07.190

将 $ 添加到您不允许的字符范围怎么样？

```
pattern="[^$]" 
```

# macos - 如何在 Mac 中撤消别名

> ID：13708868
> 
> 赞同：0
> 
> 时间：2012-12-04T17:48:48.520
> 
> 标签：macos, osx-lion, osx-snow-leopard

我错误地在桌面上为我的云端硬盘设置了别名，只是想弄清楚如何撤消别名？当我将该别名放入垃圾箱时，它会给我一个警告，所有内容都将被删除，我害怕我不想将我的整个驱动器丢弃。终端中是否有取消内容的别名？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:53:18.030

我不知道您可以取消驱动器的别名，但我认为删除别名不会删除您的数据。它基本上只是来自 Unix / linux 系统的 'ln -s' 符号链接的更新版本。

只要确保您只是在丢弃别名即可。您是否按 CTRL+单击（右键单击）别名以查看您的选项？

如果不出意外，请进行备份，断开/卸载备份分区或驱动器，然后丢弃别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:01:57.293

将别名移动到 thash 然后清空垃圾箱应该没有问题。我刚刚这样做了，我的硬盘还可以。

如果要在终端中删除别名，请输入：

```
rm ~/Desktop/Macintosh\ HD\ alias 
```

或替换您的别名。

# objective-c - 一些基本的 HTTP 协议问题（编程和理论）

> ID：13708871
> 
> 赞同：1
> 
> 时间：2012-12-04T17:49:02.413
> 
> 标签：objective-c, qt, http, sockets, stream

在你决定它是一个 tl:dr （太长，没读）帖子之前，试着至少读一些，因为它是一个被分解成很多小块的问题。其中一些您可能可以回答并帮助我。

请尽量帮助我。这些类型的问题在互联网上很常见，我想你会帮助我和我之后的更多人。

我目前正在研究 HTTP 服务和协议本身，以便发现它是否对我有用。
我有一些基本问题以及一些需要讨论的代码。

首先我想知道通信是如何开始的？我发现客户端发送了一条请求资源的消息（这是正确的吗？）。然后会发生什么？我（作为服务器）必须回复什么？
我是否需要在每次响应后附加回车和换行符？它在某处说甚至需要两个 (\r\n\r\n)。
如何建立异步写入？（我希望这个问题可以理解）我的主要目标是实现客户端和服务器之间的连接，然后实现从服务器到客户端的连续数据流。客户端是否需要回复收到的每条消息？
我希望我把我的问题说清楚了，因为我不是这些事情的专家（但是，我对此很感兴趣）。

对于我的问题的编程部分。
我已经设法用 C++（服务器端）在 Qt 中编写了一个简单的程序，并在 Objective C（iOS）中编写了一个简单的客户端。客户端连接，我可以读取请求标头。它是这样的：

```
Data available, incoming:  "GET / HTTP/1.1
Host: localhost:9990
Connection: close
User-Agent: CFStream%20test/1.0 CFNetwork/609 Darwin/12.2.0 
```

我应该手动回复这个标题吗？如果是这样，是什么？

客户端代码看起来像这样（我知道它不是伪代码，但我认为它非常不言自明）：

```
- (void)setupStream
{
    NSURL *url = [NSURL URLWithString:@"http://localhost:9990"];

    CFHTTPMessageRef message = CFHTTPMessageCreateRequest(NULL, (CFStringRef)@"GET", (CFURLRef)url, kCFHTTPVersion1_1);

    stream = CFReadStreamCreateForHTTPRequest(NULL, message);
    CFRelease(message);

    if (!CFReadStreamSetProperty(stream, kCFStreamPropertyHTTPShouldAutoredirect, kCFBooleanTrue))
    {
        NSLog(@"Some error.");
    }

    CFDictionaryRef proxySettings = CFNetworkCopySystemProxySettings();
    CFReadStreamSetProperty(stream, kCFStreamPropertyHTTPProxy, proxySettings);
    CFRelease(proxySettings);

    if (!CFReadStreamOpen(stream))
    {

        CFRelease(stream);
        NSLog(@"Error opening stream.");
    }

    CFStreamClientContext context = {0, self, NULL, NULL, NULL};
    CFReadStreamSetClient(stream, kCFStreamEventHasBytesAvailable | kCFStreamEventErrorOccurred, readStreamCallback, &context);
    CFReadStreamScheduleWithRunLoop(stream, CFRunLoopGetCurrent(), kCFRunLoopCommonModes);
    NSLog(@"Done");
} 
```

这是设置流方法。该`stream`变量是类型的类变量`CFReadStreamRef`。

回调如下所示：

```
static void readStreamCallback(CFReadStreamRef aStream, CFStreamEventType event, void *client)
{
    ViewController *controller = (ViewController*)client;
    [controller handleEvent:event forStream:aStream];
} 
```

像这样的句柄事件：

```
- (void)handleEvent:(CFStreamEventType)event forStream:(CFReadStreamRef)aStream
{
    if (aStream != stream)
    {
        return;
    }

    NSLog(@"Handle event callback");

    switch (event)
    {
        case kCFStreamEventHasBytesAvailable:
            NSLog(@"Work log");
            UInt8 bytes[11];
            CFIndex length;
            length = CFReadStreamRead(stream, bytes, 11); //I know 11 bytes is hard coded, its in testing stage now. Feel free to suggest me how to do it better.

            if (length == -1)
            {
                NSLog(@"Error, data length = -1");
                return;
            }

            NSLog(@"Len: %li, data: %s", length, bytes);
        break;
        default:
            NSLog(@"Other event");
        break;
    }
} 
```

这实际上就是所有值得一提的客户端代码。Qt Server 部分（我将只发布重要部分）是这样完成的：（这是一个子类 QTcpServer 类）。首先`startServer();`被称为：

```
bool Server::startServer()
{
    if (!this->listen(QHostAddress::Any, 9990))
        return false;

    return true;
} 
```

当有连接传入`incomingConnection`时，将使用套接字描述符作为参数触发：

```
void Server::incomingConnection(int handle)
{
    qDebug("New client connected");
    ServerClient *client = new ServerClient(handle, this); //The constructor takes in the socket descriptor needed to set up the socket and the parent (this)
    client->setVectorLocation(clients.count()); //This is a int from a Qvector in which i append the clients, its not important for understanding right now.
    connect(client, SIGNAL(clientDisconnected(int)), this, SLOT(clientDisconnected(int)), Qt::QueuedConnection); //When the client socket emits a disconnected signal the ServerClient class emits a client disconnected signal which the server uses to delete that client from the vector (thats why I use "setVectorLocation(int)") - not important right now
    clients.push_back(client); //And then I append the client to the QVector - not important right now
} 
```

类`ClientServer`构造函数只是创建一个新的套接字并连接所需的方法：

```
ServerClient::ServerClient(int handle, QObject *parent) :
QObject(parent)
{
    socket = new QTcpSocket(this); //Socket is a class variable

    connect(socket, SIGNAL(disconnected()), this, SLOT(disconnected()));
    connect(socket, SIGNAL(readyRead()), this, SLOT(readyRead()));

    socket->setSocketDescriptor(handle);
} 
```

就绪读取只是将传入的数据写入我（我认为以后不会有太多用户）：

```
void ServerClient::readyRead()
{
    qDebug() << "Data available, incoming: " << socket->readAll();
} 
```

最后是写入数据：

```
void ServerClient::writeData(QByteArray *data)
{
    data->append("\r\n\r\n"); //I have read this must be appended to all outgoing data from a HTTP server
    socket->write(*data);
    socket->flush();
    qDebug() << "Written data to client: " << *data;
} 
```

但是，此代码并不总是有效。有时，当我写“消息”之类的消息时，客户端会收到所有数据和一些不应该存在的东西（新行和奇怪的符号 - 会`NSLog`导致这种情况吗？）。有时，当我发送`"Hellow"`客户端时，只会获取`"Hel"`和其他一些时髦的东西。

有什么问题？我应该更注意什么？任何对我有帮助的东西都将不胜感激。并且请不要粘贴一些包含几百页书的链接，我相信只要向我解释一下就可以解决这个问题。

多谢！
简。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:53:44.053

您的问题几乎等同于“HTTP 如何工作”，完整的答案在于[规范](ftp://ftp.rfc-editor.org/in-notes/rfc2616.txt)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:59:26.083

你问了很多问题......这是完全合法的事情:)

我承认-太长了，我*没**看*:(

但 ...

1) 是的，HTTP 协议确实需要 na "CRLF" ("\r\n")。许多服务器和许多客户端是“宽容的”，但严格来说 - 是的，你需要它们。

参考：[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616.html)

2) 想要了解 HTTP“内部”也是完全合法的——我为你鼓掌。

一种好方法是阅读 RFC。

另一种是使用“telnet”客户端： http: [//blog.tonycode.com/tech-stuff/http-notes/making-http-requests-via-telnet](http://blog.tonycode.com/tech-stuff/http-notes/making-http-requests-via-telnet)

还有一个是研究FF [Firebug中的请求和响应](http://getfirebug.com/downloads)

3) 套接字编程是另一个问题——这解释了为什么有时你可能会读到“hello world”，而有时你可能只是读到“hel”。

强烈推荐：[Beej's Guide to Network Programming](http://beej.us/guide/bgnet/output/html/multipage/)

4）最后，我实际上不可能用 C++ 在 Qt 中编写服务器（除了可能作为玩具“科学实验”，或者对于一些非常离谱的要求）

我肯定会用 C#（适用于 Windows 服务器）、Java（适用于其他一切）或我喜欢的脚本语言（Perl、Ruby/RoR、Python 和 Lua 都想到）来编写服务器代码。

恕我直言..希望对您有所帮助！

# php - 如何以编程方式禁用和卸载 Drupal 模块？

> ID：13708873
> 
> 赞同：18
> 
> 时间：2012-12-04T17:49:04.207
> 
> 标签：php, drupal, drupal-7, drupal-modules

我希望能够在我的本地环境中以编程方式禁用然后卸载一个模块，然后轻松将该代码推送到 prod，以便一切都得到更新。

我猜它与[`hook_update_N`](https://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_update_N/7.x). 但不确定从哪里开始。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-04T17:49:04.207

想我找到了答案！在模块 .install 文件中，我添加了以下代码：

```
/**
 * Disable and uninstall the module.
 */
function MODULE_update_7200() {
  if( module_exists('MODULE')) {
    module_disable(array('MODULE'));
    drupal_uninstall_modules(array('MODULE'));
  }
} 
```

函数中的数字应该反映您的 drupal 安装。在这里查看如何给它们编号：http: [//api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_update_N/7](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_update_N/7)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-10-10T11:51:50.040

# Drupal 8

在 Drupal 8 中，这只是一步。

放置在里面`MYMODULE.install`：

```
/**
 * Uninstall Field UI.
 */
function MYMODULE_update_8001(&$sandbox) {

  \Drupal::service('module_installer')->uninstall(['field_ui']);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-03T07:04:30.803

在 Drupal 8 中，您可以使用配置 API 来启用和禁用模块。例如，如果要启用开发模块。您必须将以下代码添加到 core.extension.yml `devel: 0` 如果要卸载，必须`devel: 0`从 core.extension.yml中删除

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-09T07:35:22.213

您可以使用 drush 并强制卸载模块，如下所示：

```
drush eval "\$module_data = \Drupal::config('core.extension')->get('module'); unset(\$module_data['MODULE_NAME']); \Drupal::configFactory()->getEditable('core.extension')->set('module', \$module_data)->save();" 
```

# java - 如何在 Mac OS X 上从 Java 启动 Flash？

> ID：13708874
> 
> 赞同：0
> 
> 时间：2012-12-04T17:49:06.650
> 
> 标签：java, macos, flash, jsfl

我正在用 Java 创建一个跨平台脚本，它将启动 Flash 并执行一些 JSFL 脚本。

我发现这篇文章[Executing JSFL from the Command Line on OS X](http://www.mikechambers.com/blog/2004/02/20/executing-jsfl-from-the-command-line-on-os-x/)

**从命令行工作**

```
osascript -e 'tell application "Flash" to open posix file "/var/...tmp/sample.jsfl"' 
```

**不适用于 Java**，如下所示：

```
String flashExe = "Flash";
String jsflFile = "/var/...tmp/sample.jsfl";

MessageFormat osascriptFormat = new MessageFormat("''tell application \"{0}\" to open posix file \"{1}\"''");
String osascript = osascriptFormat.format(new Object[]{flashExe, jsflFile});
String[] commands = new String[]{"osascript", "-e", osascript};

ProcessBuilder pb = new ProcessBuilder(commands);
pb.start(); 
```

**问题是**：如何在 Mac OS X 上从 Java 启动 Flash？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:22:06.183

容易...根据这篇文章[[HOW TO] 从终端启动应用程序？](http://macosx.com/forums/howto-faqs/29520-how-launch-application-terminal.html)

```
String jsflPath = "/var/...tmp/sample.jsfl";    
File jsflFile = new File(jsflPath);
jsflFile.setExecutable(true);
String[] commands = new String[]{"open", jsflFile.getAbsolutePath() };

ProcessBuilder pb = new ProcessBuilder(commands);
pb.start(); 
```

或者

```
String[] commands = new String[]{"open", "-a", "Adobe Flash CS5", jsflFile.getAbsolutePath()}; 
```

# linq - 林克。缺少表

> ID：13708881
> 
> 赞同：0
> 
> 时间：2012-12-04T17:49:18.957
> 
> 标签：linq

我有 3 个表：table1 带有列（ProductId、name 等）、table2（DocumentId、name 等）、table3（ProductId、documentId）。当我创建一个 .edmx 模型时，我的模型中只有 table1 和 table2，我看不到 table3。如果 table3 丢失，我如何获取产品文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:20:26.720

请注意，当您创建模型时，您在 Products 中拥有一个名为 Documents 的属性，在 Documents 中拥有一个名为 Products 的属性。

要查看产品中的文档，请调用：

```
var documents = DbContext.Documents.Include("Products").ToList(); 
```

和产品一样

```
var products = DbContext.Products.Include("Documents").ToList(); 
```

然后您将产品作为每个文档的集合，将文档作为每个产品的集合

这发生在 EF 中的每个多对多表中。

# c - 阻塞和非阻塞发送有什么区别吗

> ID：13708883
> 
> 赞同：8
> 
> 时间：2012-12-04T17:49:31.023
> 
> 标签：c, linux, tcp

如果应用程序可以确保套接字的发送缓冲区中始终有空间，那么阻塞和非阻塞发送是否具有相同的性能？在这种情况下，这两种方法比另一种方法有什么优势吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T18:10:00.200

阻塞和非阻塞的唯一区别`send`是内核是让你的进程进入睡眠还是返回`EWOULDBLOCK`。所以就性能而言，应该没有区别。

但是，我怀疑您的隐含假设，即发送不能仅仅因为发送缓冲区有可用空间而阻塞。想象一下系统上的一个空闲套接字，它对内存提出了很高的要求。我不一定希望内核为您的发送缓冲区“固定”物理页面；我希望它会将该内存用于有用的东西。然后当你尝试发送时，内核需要为发送缓冲区获取一个空闲页面；如果没有这样的页面可用，它可能会决定返回`EWOULDBLOCK`而不是等待（比如说）交换。

现在，有很多“可能”和“可能”，更熟悉内核内部的人可能会告诉我我错了。但即使 Linux 今天不这样，明天也可能会这样。您是否 100% 确定您永远不会在 Linux 以外的任何平台上运行您的应用程序？

所以我不会用如此脆弱的假设来编写我的应用程序。我建议您决定是否阻塞或非阻塞语义对您自己的代码更有意义，并且不要试图玩弄内核的内部结构。

[更新]

我希望我不必深入研究 Linux 内部，但过度自信的反对者驱使我这样做。

[从“new_segment”标签处的 net/ipv4/tcp.c](http://lxr.linux.no/linux+v3.6.9/net/ipv4/tcp.c#L864)开始：

```
new_segment:
if (!sk_stream_memory_free(sk))
    goto wait_for_sndbuf;

skb = sk_stream_alloc_skb(sk, 0, sk->sk_allocation);
if (!skb)
    goto wait_for_memory; 
```

看看“wait_for_sndbuf”与“wait_for_memory”有何不同？这就是我所说的。

在“wait_for_memory”标签处，有一个调用，[`sk_stream_wait_memory`](http://lxr.linux.no/linux+v3.6.9/net/core/stream.c#L117)其`timeo`值取决于这是否是非阻塞发送。反过来，该函数要么使进程进入睡眠状态，要么`EAGAIN`根据`timeo`.

[更新 2]

只是为了清楚我在回答什么问题......

我将这个问题解释为，“如果我知道我的套接字的发送缓冲区有足够的可用空间，那么该套接字上的阻塞和非阻塞之间是否有任何区别——性能或其他方面`send`？”

例如，如果您的协议是发送一条消息，然后仅在收到对前一条消息的回复后才发送一条新消息，则前提当然是可能的。在这种情况下，您知道发送缓冲区始终是空的`send`。通过获取和/或设置 POSIX 标准`SO_SNDBUF`套接字选项，您可以知道您的套接字有足够的可用空间。在这种情况下，阻塞的`send`行为是否与非阻塞不同`send`？

我对 POSIX 规范的阅读原则上说“是”。我对 Linux 源代码的阅读在实践中说“是”。我当然可能是错的，但需要对 POSIX 或 Linux 更了解的人来演示它，到目前为止，他们都没有回答这个问题。

[最终（？）更新]

这是我认为 POSIX 允许/要求您假设的内容。

如果发送缓冲区中有足够的可用空间，则阻塞`send`不能永远阻塞。`calloc`这与具有足够空闲虚拟内存的调用不能永远阻塞的含义相同。最终，系统将找到发送数据所需的资源。

（请注意，当发送缓冲区已满时，情况并非如此，在这种情况下，阻塞`send`可能会永远阻塞，具体取决于套接字接收端发生的情况。）

但是，即使发送缓冲区中有足够的空间，非阻塞`send`可能仍会返回`EWOULDBLOCK`。因此，如果您使用非阻塞套接字，则无论您对发送缓冲区或其他任何内容了解多少，您的代码都必须处理这个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T17:56:01.313

请记住，您不能始终确保您的发送将被快速执行。

例如，如果另一侧的套接字没有使用 recv 读取，那么您的缓冲区将已满。

当然，如果您编写应用程序的两面并始终读取，我猜在性能方面不会有显着差异。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T20:09:41.603

您可以“确保套接字发送缓冲区中始终有空间”的唯一方法是在它已满时不发送。

您确实可以确定发送缓冲区中是否有空间 - 在某些系统上。如果在阻塞模式下没有空间，您可以 select() 用于可写性 - 在某些系统上。在其他系统上，您无法判断是否有空间和/或您无法在阻塞模式下 select()。

在这样的系统上，除了发送和阻塞之外，您没有任何好的实现选择，或者使用阻塞模式。

在能知道但不能select()的系统上，可以循环和休眠，但是不知道要休眠多久，所以会休眠太久，浪费时间，不像阻塞，会阻塞合适的时间长度。

# c# - 这正在返回错误“输入字符串格式不正确”有人知道为什么吗？

> ID：13708898
> 
> 赞同：-1
> 
> 时间：2012-12-04T17:50:23.353
> 
> 标签：c#, winforms, double

> 双坐标X = Convert.ToDouble(((((-1.2170 - (Convert.ToDouble(labelLonR.Text))) * -1) * (638 / 0.0548))));

输入格式不正确的字符串？我不知道怎么做，我已经把它全部转换成双倍了！

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T17:56:43.737

这可能是您的文化设置的问题。

示例：“123.12”在我当前的文化设置中不是有效的双精度，但“123,12”是。

解决方案：

```
Convert.ToDouble("123.12", System.Globalization.CultureInfo.InvariantCulture); 
```

当您不确定文本的格式时，请使用[CultureInfo.InvariantCulture 。](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)引用msdn：

> 不变的文化是文化不敏感的；它与英语相关，但与任何国家/地区无关。您可以在对 CultureInfo 实例化方法的调用中使用空字符串 ("") 按名称指定不变区域性。CultureInfo.InvariantCulture 还检索不变区域性的一个实例。它几乎可以用在 System.Globalization 命名空间中需要文化的任何方法中。CompareInfo、DateTimeFormat 和 NumberFormat 等属性返回的对象也反映了字符串比较和不变区域性的格式约定。
> 
> 与文化敏感数据不同，文化敏感数据会因用户自定义或 .NET Framework 或操作系统的更新而发生变化，不变的文化数据随着时间的推移和已安装的文化是稳定的，并且不能由用户自定义。这使得不变区域性对于需要与区域性无关的结果的操作特别有用，例如保留格式化数据的格式化和解析操作，或要求数据以固定顺序显示而与区域性无关的排序和排序操作。

另一方面，您可以删除外部 Convert.ToDouble 的一些括号，并使结果分配更好

```
double CoordinatesX = (1.2170 + Convert.ToDouble(labelLonR.Text)) * 638 / 0.0548 
```

**编辑**：正如其他人指出的那样，对您的财产进行验证是个好主意，特别是如果它是来自用户的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:00:59.370

尝试

```
double value = 0;
double.TryParse(labelLonR.Text, out value);
double CoordinatesX = Convert.ToDouble(((((-1.2170 - value ) * -1) * (638 / 0.0548)))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:07:03.060

LINQPad

```
string value = "50.339";
double CoordinatesX = Convert.ToDouble(((((-1.2170 - (Convert.ToDouble(value))) * -1) * (638 / 0.0548))));

CoordinatesX.Dump(); 
```

返回 600232.262773723

我建议您在 labelLonR.Text 中没有“50.339”。null 返回 14168.7226277372，所以我将使用非数字值。您应该更喜欢将 Convert.ToDouble() 与重载 IFormatProvider 一起使用。虽然您的会计师可能会隐含地理解 (50.339) 是负数，但 CLS 不会。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:00:03.717

labelLonR.Text 可能为 null，因此无法转换为 double。

使用**Double.TryParse**方法将您的字符串转换为双精度，并返回转换成功或失败。

选中后，继续进行变量初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T18:06:14.170

试试这个代码。如果它抛出这个异常，你就会知道问题是什么......

```
double lonR;
double CoordinatesX;
if (double.TryParse(labelLonR.Text, out lonR))
    CoordinatesX = ((-1.2170 - lonR) * -1) * (638 / 0.0548);
else
    throw new Exception("The lonR format is Incorrect!"); 
```

我更喜欢使用 TryParse 而不是 Convert。

# osgi - Osgi 与 Java EE 6 入门

> ID：13708906
> 
> 赞同：1
> 
> 时间：2012-12-04T17:51:00.493
> 
> 标签：osgi, java-ee-6, jboss7.x

我正在尝试开发一种服务，在所有不同的堆栈中，例如持久性、安全性等，作为 OSGi 包在 OSGi 容器中运行。我使用 JBoss AS 7.1.1 作为我的 OSGi 容器。

我使用以下 JBoss 堆栈来设置我的项目。

```
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.jboss.bom</groupId>
            <artifactId>jboss-javaee-6.0-with-osgi</artifactId>
            <version>1.0.3.Final</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement> 
```

但是，我在想`Manifiest.MF`以及激活器类将自动生成（不是我这样做有问题），但令我惊讶的是，什么也没发生，我对此感到困惑。

此外，我无法弄清楚如何在 Web 应用程序中将不同 OSGi 包提供的服务连接在一起。

我看到的大多数示例都是针对 Spring 环境的。拜托，有人能指出我的 Java EE 6 方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:08:11.870

布线的最佳选择可能是蓝图。Blueprint 还可以用热切的单例 bean 替换 Activators。蓝图不能直接在 Web 包中用于注册和使用服务，但 JNDI-蓝图桥允许您使用带有“osgi:service”命名空间的 JNDI 查找。

如果您搜索 Apache Aries，您可以找到大量 Blueprint 和 Enterprise OSGi 教程，并且您可能会发现[Enterprise OSGi in Action](http://www.manning.com/cummins)很有用。第 1 章和第 2 章可在网络上免费获得。

# arrays - array_unshift - 如何使用键名将数组放在顶部

> ID：13708907
> 
> 赞同：0
> 
> 时间：2012-12-04T17:51:05.837
> 
> 标签：arrays, associative-array, woocommerce

我将数组元素存储在 $sal 中，放在数组 $fields['billing'] 的开头。我为此目的使用array_unshift。

```
$sal = array(
    'label'       => __('Tratamiento', 'woocommerce'),
    'placeholder' => _x('', 'placeholder', ''),
    'required'    => 0,
    'clear'       => true,
    'class'         => array('form-row  form-row-wide'),
    'type'        => 'select',
    'options'     => array(
        'Señor' => __('Señor', 'woocommerce' ),
        'Señora' => __('Señora', 'woocommerce' ),
        'Señorita'=> __('Señorita', 'woocommerce')
        )
     ); 

array_unshift($fields['billing'] , $sal); 
```

array_unshift 在数组开头的 0 键索引处添加元素。在 print_r 之后我看到：

```
[0] => Array
        (
            [Label] => Treatment
            [Placeholder] => 
            [Required] => 0
            [Clear] => 1
            [Class] => Array
                (
                    [0] => form-row-row-wide form
                )

            [Type] => select
            [Options] => Array
                (
                    [Lord] => Lord
                    [Lady] => Lady
                    [Ms.] => Miss
                )

        ) 
```

我的问题只是我只想将键值从 [0] 更改为 ['saluation']，我可以简单地这样做：

```
 $fields['billing']['saluation'] = $fields['billing'][0];
     unset($fields['billing'][0]); 
```

但我也希望它在数组的开头。我尝试了很多技术，但仍然无法解决这个问题。

这实际上是我正在处理的 woocommerce 字段数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:43:47.070

我刚刚通过 array_merge() 函数解决了它。

```
$fields['billing']= array_merge(array('saluation' => $sal), $fields['billing']); 
```

# html - 如何防止在双击时选择文本？

> ID：13708908
> 
> 赞同：16
> 
> 时间：2012-12-04T17:51:08.433
> 
> 标签：html, css, text, double-click

```
#btnLeft{
    width:40px;
    padding:2px 5px 2px 5px;
    background-color: #20a0a0;
    border: thin solid #099;
    border-radius:7px;
    text-align:center;
    font-family:"Futura Md BT";
    font-size:large;
    color:#FFF;
} 
```

这是一个 CSS 按钮。
当用户不小心双击而不是单击时，按钮内的文本将被选中，即 - 更改其背景颜色。
如何防止这种选择双击？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-04T17:53:04.300

试试小jquery

```
 $(element).mousedown(function(){ return false; }) 
```

用 css 试试

```
-webkit-user-select: none;
-moz-user-select: none;
-khtml-user-select: none;
-ms-user-select: none; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-14T04:27:51.143

如果您使用`<button>`or`<a>`标记并包含`href`属性，则应减轻该行为。而且它更具语义性:)

# wpf - 如何使用 IValueConverter 使隐式生成的 TreeViewItem 折叠？

> ID：13708909
> 
> 赞同：1
> 
> 时间：2012-12-04T17:51:09.120
> 
> 标签：wpf, xaml, ivalueconverter

我试图通过 IValueConverter 使隐式生成的 TreeViewItems 折叠。我的代码删除了网格，但网格位于 TreeViewItem 中。如何使用 IValueConverter 使 TreeViewItem 折叠？

```
 <TreeView   Name="TreeViewNew"
                                    Background="Transparent" 
                                    HorizontalContentAlignment="Stretch"  
                                    VirtualizingStackPanel.IsVirtualizing="True"
                                    ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                    >
<TreeView.ItemTemplate>
 <HierarchicalDataTemplate ItemsSource="{Binding Path=MapLayers}">
                                    <Grid>
                                        <TextBlock 
                                            Focusable="False" 
                                            Width="150" 
                                            Text="{Binding Path=Name}" 
                                            FontSize="10"
                                            TextWrapping="Wrap" 
                                            Background="Transparent"
                                            HorizontalAlignment="Center"
                                            />
                                    </Grid>

                                    <HierarchicalDataTemplate.ItemTemplate>
                                        <DataTemplate >
                                             <Grid Visibility="{Binding Path=Layer, Converter={StaticResource cIsDrawingLayer}}"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:59:29.687

您可以尝试设置要控制 TreeViewItem 在 TreeView 的 ItemContainerStyle 中的可见性的绑定。可能您必须在 HierarchicalDataTemplate 中为每个级别的 TreeViewItems 重复该设置。如果 Binding 不起作用，您仍然可以在 ItemContainerStyle 中尝试 Trigger 或 DataTrigger。可能您甚至不需要带触发器的转换器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:56:33.077

这是完成任务的代码：

```
 <TreeView.Resources>   
    <Style TargetType="TreeViewItem" > 
<Setter      Property="Visibility" Value="{Binding Path=Layer,
    Converter={StaticResource cIsDrawingLayer}}" />  
</Style>
    </TreeView.Resources> 
```

# javascript - jquery Post 仅在我页面的这一部分中不起作用

> ID：13708913
> 
> 赞同：1
> 
> 时间：2012-12-04T17:51:38.480
> 
> 标签：javascript, jquery, html

我正在尝试通过 ajax-jquery 显示图像。

这是我的 html 的一部分：

```
<div id="searchFormResult1"></div>

<form action="#" method="post" id="searchForm" onSubmit="return false;">
    <input type="text" maxlength="10" id="searchid" name="searchid" class="searchstu" />
    <input type="submit" value="0" id="searchsubb" class="hidd searchsub" />
    <a href="#" id="link-2" onClick="sear(); return false;"></a>
</form> 
```

div标签是返回php的地方。

我的 jquery 是这样的，我将 jquery 放在 html 页面中：

```
$("#searchsubb").click(function(){
$.post("parts/search.php", {searchid:$("#searchid").val()}, function(data){
    $("#searchFormResult1").html(data).slideDown();
});
}); 
```

我还有一个返回图像 html 标记的 php 页面：

像这样的东西：

```
print "<img src='' /> and other thing"; 
```

但我的返回值没有收到。

我的浏览器没有出现任何错误，我相信问题不在于我的 php.ini 文件。

我有时会在 chrome 中收到此错误。

```
Error in event handler for 'undefined': INDEX_SIZE_ERR: DOM Exception 1 Error: Index or size was negative, or greater than the allowed value.
at J (chrome-extension://mgijmajocgfcbeboacabfgobmjgjcoja/content_js_min.js:14:142)
at null.<anonymous> (chrome-extension://mgijmajocgfcbeboacabfgobmjgjcoja/content_js_min.js:17:184)
at chrome-extension://mgijmajocgfcbeboacabfgobmjgjcoja/content_js_min.js:1:182
at miscellaneous_bindings:286:9
at chrome.Event.dispatchToListener (event_bindings:387:21)
at chrome.Event.dispatch_ (event_bindings:373:27)
at chrome.Event.dispatch (event_bindings:393:17)
at Object.chromeHidden.Port.dispatchOnMessage (miscellaneous_bindings:253:22) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:55:25.927

我相信您在触发 ajax 请求的同时提交表单。

添加`return false`以防止表单提交。

```
$("#searchsubb").click(function(){
$.post("parts/search.php", {searchid:$("#searchid").val()}, function(data){
    $("#searchFormResult1").html(data).slideDown();
});
return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:57:14.327

问题必须在 php 中，否则你会得到来自 ajax 的响应，当 ajax 从parts/search.php 得到响应时，来自 $.post 的第三个参数会触发，如果你没有响应标签，请尝试在 firebug 中查找响应标签为空或没有响应

# java - 对带有注入类的框架使用 guice，初始化的正确方法？

> ID：13708918
> 
> 赞同：3
> 
> 时间：2012-12-04T17:51:54.917
> 
> 标签：java, dependency-injection, guice

我正在尝试编写一个框架，其中任意 bean 类从我的 API 中注入类，它们可以与这两个类交互，也可以基于定义的注释触发回调。这是一个示例 bean：

```
@Experiment
static class TestExperiment {
    private final HITWorker worker;
    private final ExperimentLog log;
    private final ExperimentController controller;

    @Inject
    public TestExperiment(
        HITWorker worker,
        ExperimentLog expLog,
        ExperimentController controller
        ) {         
        this.worker = worker;
        this.expLog = expLog;
        this.controller = controller;
    }

    @SomeCallback
    void callMeBack() {
        ... do something

        log.print("I did something");
    }

} 
```

我正在尝试使用 Guice 注入这些 bean 并处理注入的类之间的相互依赖关系。但是，我有两个问题：

*   我传入的一个类 ( `HITWorker`) 已经实例化了。我无法看到如何将其移至 a`Provider`而不会显着复杂化我的代码。它也是持久的，但不是 Guice 定义的会话或请求范围，所以我现在自己管理它。（也许如果其他问题得到解决，我可以尝试把它放在提供者中。）
*   更重要的是，我需要引用其他注入的类，以便对它们做适当的事情。当 Guice 注入它们时，我无法访问它们，因为 bean 类是任意的。

对于我基本上需要做的事情，这里有一些非常糟糕的代码，我确信这违反了所有正确的依赖注入概念。请注意，这`hitw`是我需要传入的唯一实例，但我也在创建其他依赖对象，因为我需要对它们的引用。有了这段代码，我基本上只将 Guice 用于它的反射代码，而不是它的依赖解析。

```
private void initExperiment(final HITWorkerImpl hitw, final String expId) {         
    final ExperimentLogImpl log = new ExperimentLogImpl();
    final ExperimentControllerImpl cont = new ExperimentControllerImpl(log, expManager);

    // Create an experiment instance with specific binding to this HITWorker
    Injector child = injector.createChildInjector(new AbstractModule() {
        @Override
        protected void configure() {
            bind(HITWorker.class).toInstance(hitw);
            bind(ExperimentLog.class).toInstance(log);
            bind(ExperimentController.class).toInstance(cont);
        }           
    });     

    Object experimentBean = child.getInstance(expClass);        

    expManager.processExperiment(expId, experimentBean);

    // Initialize controller, which also initializes the log
    cont.initialize(expId);

    expManager.triggerStart(expId);

    tracker.newExperimentStarted(expId, hitw, cont.getStartTime());
} 
```

我搞砸了，只需要编写自己的注入代码，还是有办法正确地做到这一点？另外，我是否应该忘记这些 bean 类的构造函数注入，因为我不知道它们到底包含什么？如果我要求 Guice 注入 bean 而不是自己做，有什么方法可以获取依赖关系？

对于上下文，我已经阅读了 Guice 文档并查看了几天的示例，但无济于事。我不认为我是一个完整的编程白痴，但我不知道如何正确地做到这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:37:15.480

从某种意义上说，您的“实验”似乎类似于“请求”，因为它具有定义的生命周期以及实验可以随意引入的一些相关内容。

因此，我认为您应该将所有这些包装到自定义范围中，如有关[Custom Scopes](http://code.google.com/p/google-guice/wiki/CustomScopes)的文档中所述。这在几个方面符合您的情况：

*   `HITWorker`您可以使用一些对象（您的）“播种”范围
*   生命周期：在设置实验之前“进入范围”，在完成工作后“退出范围”。
*   访问“共享”的东西，比如`ExperimentLog`和`ExperimentController`：将它们绑定到范围。然后框架和实验实例都可以`@Inject`将它们简单化并得到相同的实例。

# jquery - jquery：如何使用`.click（function（）{`禁用功能

> ID：13708923
> 
> 赞同：-2
> 
> 时间：2012-12-04T17:52:23.257
> 
> 标签：jquery

如何禁用 jquery 功能`.click(function() {`

例如，如果用户单击，我需要禁用以下代码`.click(function() {`

```
 function infinity() {
$.ias({container:'#dle-content',item:'.item_p',pagination:'.page_navigation1',next: 'div#page_navigation1 a:last-child',loader:'<p><center><img src="{THEME}/images/loa$
}
infinity(); 
```

我试过的：

```
$("#pages_navigation").off('infinity');
$("#pages_navigation").unbind('infinity'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:53:30.090

对 jq 1.7+ 使用 off()：

```
$('#myelem').off('click'); 
```

对于 jq < 1.7，使用 unbind 代替：

```
$('#myelem').unbind('click'); 
```

# postgresql - 如何从触发器发送 Postgres 过程的整个记录

> ID：13708931
> 
> 赞同：0
> 
> 时间：2012-12-04T17:53:03.833
> 
> 标签：postgresql, stored-procedures, triggers

我是 Postgres (9.0.5) 的新手，通常写的函数/触发器很少。我想在我的`widgets`表上设置一个触发器，这样每次插入、更新或删除小部件时，整个记录都会作为参数传递给存储过程。然后，该过程可以检查记录中的各种更改并决定采取什么行动。到目前为止，这是我最好的尝试，尽管我知道我偏离了方向：

```
CREATE OR REPLACE TRIGGER tg_widgets
ON TABLE widgets
AFTER EVERY INSERT, UPDATED, DELETE
DO run_widget_handler

CREATE OR REPLACE PROCEDURE run_widget_handler AS
    # Definitition here
    # If the widget's name was changed, do X
    # Else if the widget's wow_factor was changed, do Y
    # Else, do Z 
```

我不担心如何实现 的定义`run_widget_handler`，只是寻求帮助并编写触发器并将 传递`widget`给 proc。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:59:39.853

您不需要将行“传递”给触发函数（顺便说一句：PostgreSQL 中没有“过程”，只有函数）。

如果函数声明为“返回触发器”，您可以自动将完整的行作为“新”或“旧”访问。

手册中的更多详细信息： [http ://www.postgresql.org/docs/current/static/plpgsql-trigger.html](http://www.postgresql.org/docs/current/static/plpgsql-trigger.html)

# java - JAVA - 不工作的代码

> ID：13708932
> 
> 赞同：-3
> 
> 时间：2012-12-04T17:53:06.930
> 
> 标签：java, arrays, loops, if-statement, arraylist

我有第一个 list_session 包含 1,2,2,3 。第二个 list_time 包含 30,17,25,46 。当 list_session 的第二个元素等于第一个元素时，然后将此时间添加到第三个 list_time 否则添加 value=-1 。第三个元素和第四个元素相同。我的代码不起作用。为什么 ？如何修改代码？

```
while (it8.hasNext()) {
        tempTime = it8.next();
        tempSession = it7.next();

        if (testSession.equals(tempSession)) {
            testSession = tempSession;
            time.add(tempTime);
        } else {
            time.add(value);
            testSession = tempSession;
        }
    }
    for (int j = 0; j < time.size(); j++) {
        System.out.println(time.get(j) + " time");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:01:36.740

首先，如果你有一些关联，你必须使用Java 中的[关联列表](http://en.wikipedia.org/wiki/Association_list)是 Map，

其次，创建地图，其中键是会话 ID 和时间值列表

第三，通过地图，只需检查值列表中的 2 个或更多值，以及您想要的一些条件。

PS不要使用两个列表而不是一个关联列表它会犯很多错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:45:07.487

根据[ArrayList API](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)：

“此类的 iterator 和 listIterator 方法返回的迭代器是快速失败的：如果在创建迭代器后的任何时间对列表进行结构修改，除了通过迭代器自己的 remove 或 add 方法之外，迭代器将抛出 ConcurrentModificationException . 因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。

如果 it8 是列表“时间”上的迭代器，那可能是罪魁祸首。您将值直接添加到时间，使迭代器 it8 陈旧。如果必须以这种方式添加值，则应使用迭代器的 add 方法。可能更好的方法是将结果完全收集到不同的列表中。

# sql - 根据来自外部查询的特定数据连接派生表

> ID：13708934
> 
> 赞同：0
> 
> 时间：2012-12-04T17:53:17.240
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试使用派生表将表中的一条记录连接到另一条记录，并且在找出正确的查询来执行此操作时遇到了一些麻烦。我想要做的是将派生表加入查询，其中派生表使用 where 语句，具体取决于来自正在连接的外部查询的数据。所以这是我正在处理的当前代码：

```
SELECT a.viewerid, a.id, v.id AS entry, a.jobid, v.sourceid, v.cost, a.applicant
FROM a_views a,
JOIN (
    SELECT TOP 1 id, sourceid, cost FROM a_views vt
    WHERE vt.viewerid = a.viewerid
      AND vt.viewed_at <= a.viewed_at
      AND vt.referrer NOT LIKE '%' + vt.hostName + '%'
      ORDER BY viewed_at DESC
) v 
```

派生表是外部查询使用的同一表的查询，并且`viewerid`是跨表的自身的 FK，其中`id`是唯一的自增 PK。我需要在 a_views 表中获取查看者 ID 匹配的最新记录，日期戳 (viewed_at) 小于外部日期戳，并且引用者列不包含 hostName 列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:01:23.677

听起来你需要[APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)：

```
SELECT a.viewerid, a.id, v.id AS entry, a.jobid, v.sourceid, v.cost, a.applicant
FROM a_views a
    CROSS APPLY (
        SELECT TOP 1 id, sourceid, cost FROM a_views vt
        WHERE vt.viewerid = a.viewerid
          AND vt.viewed_at <= a.viewed_at
          AND vt.referrer NOT LIKE '%' + vt.hostName + '%'
          ORDER BY viewed_at DESC
    ) v 
```

由于您的查询`JOIN`我已经去了`CROSS APPLY`，但您可能需要`OUTER APPLY`根据您的具体要求。

# android - 带有参数和按钮的简单 Android 幻灯片

> ID：13708937
> 
> 赞同：1
> 
> 时间：2012-12-04T17:53:36.440
> 
> 标签：android, slideshow, out-of-memory

我是安卓新手 :)

我想创建一个带有数字参数（x）和一个按钮的简单幻灯片。我有 21 个图像，单击按钮时，我想捕捉 x 并“滑动”列表中的前 x 个图像。介于一张图片，下一张我要等待 1 秒。

最后我想知道手术过程中经过了多少时间。（对不起我的英语不好）

在活动和布局的代码下方粘贴：

```
package com.superpibenchmarknative;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;

public class ImageActivity extends Activity implements OnClickListener {
private Button start;
private EditText iteractions;
private TextView time;
private ImageView display;
private long after,before;
private int images[] = {R.drawable.image1,R.drawable.image2,R.drawable.image3,
                        R.drawable.image4,R.drawable.image5,R.drawable.image6,R.drawable.image7,
                        R.drawable.image8,R.drawable.image9,R.drawable.image10,R.drawable.image11,
                        R.drawable.image12,R.drawable.image13,R.drawable.image14,R.drawable.image15,
                        R.drawable.image16,R.drawable.image17,R.drawable.image18,R.drawable.image19,
                        R.drawable.image20,R.drawable.image21,
        };
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_image);
    setUpUI();
}

private void setUpUI() {
    // TODO Auto-generated method stub
    start = (Button) findViewById(R.id.bntStartCalcolation);
    iteractions = (EditText) findViewById(R.id.etIterations);
    time = (TextView) findViewById(R.id.tvTime);

    start.setOnClickListener(this);
}

@Override
public void onClick(View arg0) {
    //Creo le imageview in base al # di iteractions 
    before = System.currentTimeMillis();
    for (int j = 0; j < Integer.parseInt(iteractions.getText().toString());j++){
        display = (ImageView) findViewById(R.id.ivDisplay);
        display.setImageResource(images[j]);
        Handler handler = new Handler(); 
        handler.postDelayed(new Runnable() { 
             public void run() { 
                  display = null;
                  System.gc();
             } 
        }, 1000); 

    }
    display = null;
    System.gc();
    after = System.currentTimeMillis();
    time.setText(String.valueOf(after-before-1000* Integer.parseInt(iteractions.getText().toString())));
}

} 
```

这是布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
tools:context=".ImageActivity" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:layout_marginLeft="15dp"
    android:layout_marginRight="15dp"
    android:layout_marginTop="10dp"
    android:padding="5dp"
    android:text="Benchmark del rendering di immagini" />

<EditText
    android:id="@+id/etIterations"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginBottom="5dp"
    android:layout_marginLeft="15dp"
    android:layout_marginRight="15dp"
    android:layout_marginTop="5dp"
    android:hint="# di iterazioni"
    android:inputType="number"
    android:padding="5dp" />

<Button
    android:id="@+id/bntStartCalcolation"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:layout_marginLeft="15dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="5dp"
    android:text="Start Calcolation" />

<ImageView  android:id="@+id/ivDisplay"
            android:layout_width="200dp"
            android:layout_height="200dp"
            android:layout_gravity="center"/>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="100" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="15dp"
        android:layout_weight="50"
        android:text="Risultato ottenuto in: " />

    <TextView
        android:id="@+id/tvTime"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="15dp"
        android:layout_weight="50" />
</LinearLayout> 
```

此代码不起作用，它会创建一个异常

> OutOfMemoryError：位图大小超出 vm 预算

谁能帮我解决这个问题？？:) 非常感谢 :D

**一切都很好：D，但我还有一些问题**

我不明白为什么时间总是负数！！！你们有谁知道为什么？？[postDelayed 不起作用？！？:( ]

**解决方法：android.os.SystemClock.sleep(1000);**

另一个错误，ImageView 在设置图像后没有改变，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:56:30.470

在 Manifest 文件中将 largeheap 添加到您的应用程序。

```
<application ... android:largeHeap="true" > 
```

或者，使您的照片更小。您可能有多种尺寸，具体取决于您使用的屏幕尺寸，这将大大降低占用所有内存的可能性。请参阅[此页面](http://developer.android.com/guide/practices/screens_support.html#testing)以查找 Android 屏幕分辨率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:59:19.167

开发人员站点中有一个关于加载大型位图文件的小指南。这个想法是加载较低分辨率的文件，以便它们适合内存：http: [//developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# c++ - 随机长长生成器 C++

> ID：13708940
> 
> 赞同：-1
> 
> 时间：2012-12-04T17:53:48.163
> 
> 标签：c++, random, int64

`long long`用密码强度С++生成随机数的解决方案是什么？（允许升压）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T17:58:56.003

标`<random>`头提供对随机数设施的可移植访问，包括可能的加密 pRNG。

```
#include <random>     // random_device, uniform_int_distribution
#include <algorithm>  // generate_n
#include <iterator>   // ostream_iterator
#include <iostream>   // cout
#include <functional> // bind, ref

int main() {
    std::random_device r;
    std::uniform_int_distribution<long long> dist;

    std::generate_n(std::ostream_iterator<long long>(std::cout, "\n"), 10,
        std::bind(dist,std::ref(r)));
} 
```

`std::random_device`可能不是所有实现的加密 pRNG，因此您必须检查您的实现文档。特别是 2012 年之前的 VC++ 不提供非确定性实现。VC++ 2012 及更高版本使用 Windows 加密服务实现了这一点。

其他操作系统（如 Linux 或 Mac OS X）上的实现通常可以使用“/dev/urandom”或“/dev/random”或通过文件系统公开的任何其他随机设备。例如，libc++ 默认使用“/dev/urandom”，在 OS X 上使用 Yarrow 算法。

我知道您排除了 boost，但`boost::random_device`有一个使用该平台加密服务的 Windows 实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T18:00:55.243

在 linux 下，您可以从`/dev/random`或`/dev/urandom`

它们都提供密码熵。

它们之间的区别是：`/dev/random`如果熵耗尽则阻塞，因此它可能比熵慢`/dev/urandom`但“更强”

所以，使用流它看起来像这样

```
long long n;
std::ifstream rstream ("/dev/random");
rstream >> n; 
```

# windows - FileSystemWatcher 的 NotifyFilter 不起作用

> ID：13708941
> 
> 赞同：2
> 
> 时间：2012-12-04T17:53:50.107
> 
> 标签：windows, windows-services, filesystemwatcher

我有一个 Windows 服务（并通过创建类似的 WinForms 应用程序验证了代码），其中 NotifyFilter 不起作用。只要我删除那行代码，服务就可以正常工作，我可以在 WinForms 应用程序中看到事件处理程序触发。

我所做的只是将一个文本文件放到输入目录中，以便 FileSystemWatcher 启动`watcher_FileChanged`委托。当我`_watcher.NotifyFilter = NotifyFilters.CreationTime;`在那里时，它不起作用。当我把它拉出来时，它工作正常。

谁能告诉我这个过滤器是否有问题？

这是 OnStart 事件的 FSW 代码。

```
protected override void OnStart(string[] args)
{
    _watcher = new FileSystemWatcher(@"C:\Projects\Data\Test1");

    _watcher.Created += new FileSystemEventHandler(watcher_FileChanged);
    _watcher.NotifyFilter = NotifyFilters.CreationTime;
    _watcher.IncludeSubdirectories = false;
    _watcher.EnableRaisingEvents = true;
    _watcher.Error += new ErrorEventHandler(OnError);    
}

private void watcher_FileChanged(object sender, FileSystemEventArgs e)
{
    // Folder with new files - one or more files
    string folder = @"C:\Projects\Data\Test1";
    System.Console.WriteLine(@"C:\Projects\Data\Test1");
    //Console.ReadKey(true); 

    // Folder to delete old files - one or more files
    string output = @"C:\Temp\Test1\";
    System.Console.WriteLine(@"C:\Temp\Test1\");
    //Console.ReadKey(true);

    // Create name to call new zip file by date
    string outputFilename = Path.Combine(output, string.Format("Archive{0}.zip", DateTime.Now.ToString("MMddyyyy")));
    System.Console.WriteLine(outputFilename);
    //Console.ReadKey(true);

    // Save new files into a zip file
    using (ZipFile zip = new ZipFile())
    {
        // Add all files in directory
        foreach (var file in Directory.GetFiles(folder))
        {
            zip.AddFile(file);
        }

        // Save to output filename
        zip.Save(outputFilename);
    }

    DirectoryInfo source = new DirectoryInfo(output);
    // Get info of each file into the output directory to see whether or not to delete
    foreach (FileInfo fi in source.GetFiles())
    {
        if (fi.CreationTime < DateTime.Now.AddDays(-1))
            fi.Delete();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T15:27:05.610

这种行为我也遇到了麻烦。如果您单步执行代码（并且如果您查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.notifyfilter.aspx)，您会发现它`NotifyFilter`以以下默认值开始：

```
NotifyFilters.FileName | NotifyFilters.DirectoryName | NotifyFilters.LastWrite 
```

因此，当您说 时`.NotifyFilter = NotifyFilters.CreationTime`，您正在消除其他值，这解释了行为上的差异。我不确定为什么`NotifyFilters.CreationTime`没有捕获新文件……似乎应该，不应该！

`NotifyFilter`如果它对您有用，您可能只使用默认值。如果要添加`NotifyFilters.CreationTime`，我建议您执行以下操作来添加新值而不是替换现有值：

```
_watcher.NotifyFilter = _watcher.NotifyFilter | NotifyFilters.CreationTime; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-13T17:00:56.570

我知道这是一篇旧帖子，但文件创建时间并不总是可靠的。我遇到了一个问题，将日志文件移动到存档文件夹并在该位置创建了一个同名的新文件，但是文件创建日期没有改变，实际上元数据是从以前的文件中保留的（移到存档的那个）。

Windows 在文件的某些属性上具有此缓存，包括文件创建日期。您可以在此处阅读文章：https: [//support.microsoft.com/en-us/kb/172190](https://support.microsoft.com/en-us/kb/172190)。

# .net - 使用 Amazon RDS SQL Server 的 .NET Windows Forms 应用程序的安全模型

> ID：13708943
> 
> 赞同：2
> 
> 时间：2012-12-04T17:53:53.973
> 
> 标签：.net, sql-server, winforms, security, amazon-rds

我希望获得一些关于我为我的应用程序提出的安全模型的最佳实践反馈。我首先尝试使用 Amazon 的 RDS 将 Microsoft Access 前端/后端升级到 .NET WinForms/SQL Server。应用程序将是多用户、多站点（不同域）并包含敏感的健康信息。

这是2周研究的总结：

1.  使用混合身份验证和 SSL 存储在应用程序中的加密连接字符串。不理想，但我想我已经找到了一种方法，如果连接字符串被盗，它就可以了（见下面的#5）。

2.  SQL Server 只接受来自选定 IP 地址的连接（全部都是静态的）。

3.  分配给一个具有仅执行权限的 SQL Server 用户的应用程序连接字符串。所有数据库交互都将使用过程完成。架构权限用于将应用程序用户限制在某些过程中。

4.  具有 SHA 256 加盐和散列密码的用户表。这提供了第一层应用程序安全性。

5.  这是我不确定的部分：只有在查找作为 exec 变量之一发送的用户名和密码的 IF 语句 = True 时，每个过程才会完全执行。UN/PW 将为应用程序的每个会话临时存储。我的理由是，这可以防止使用连接字符串以某种方式从允许的 IP 地址登录的用户在没有有效密码的情况下获取/更改任何数据。

6.  使用 AES_256 对称密钥加密的敏感列，由使用数据库主密钥的证书加密。应用程序用户有权使用对称密钥和证书。

7.  用户密码必须遵循规则（长度、大小写混合、特殊字符）。

任何人都可以看到其中的任何漏洞或有好的选择吗？#5 是否解决了 Windows 应用程序无法使用 Windows 身份验证的固有连接字符串安全漏洞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:36:53.350

总体而言，您的设计让我印象深刻，因为您不信任内置功能，而是尝试复制内置功能（身份验证、授权、权限控制）。

使用 SQL 用户/密码进行身份验证/授权。不要建立用户和哈希表。不要在每个 exec 请求（！）中发送用户和密码。

使用 SQL Server 权限进行访问控制。使用代码签名来精细控制执行（签名过程）。不要尝试构建并行的、重复的访问控制基础设施，不要为每个会话存储临时用户/密码。

使用 AWS 防火墙基础设施来控制访问 IP。不要重新发明你自己的。

如果您使用列级加密，请了解您要保护什么以及您的目标是什么。意外媒体丢失？然后使用数据库主密钥（即穷人的 TDE）进行加密。数据保密？然后让用户在每个会话中输入证书解密密码。

> 解决固有的连接字符串安全漏洞

让用户在启动应用程序时输入密码，这样您就不会在静态文件 (.config) 中公开密码。这里的所有都是它的。SQL Server 很久以前就停止在线交换 SQL 身份验证密码。

# asp.net-mvc - 将具有列表的类对象从视图传递到控制器

> ID：13708945
> 
> 赞同：2
> 
> 时间：2012-12-04T17:53:56.190
> 
> 标签：asp.net-mvc, c#-4.0, html.actionlink

* * *

我有一个包含列表的类：

```
public class Client
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public List<Address> Addresses { get; set; }
     } 
```

如何将这种类型的对象从 View 传递到 Controller？

例如：

```
@Html.ActionLink("Edit", "Edit", item) 
```

其中 item 是 Client 类型的对象。事实上，FirstName 和 LastName 传递成功，但 Addresses 传递为 NULL。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:05:13.743

你有没有在某个地方新的列表？

字符串被视为值类型，因此将它们声明为属性将为它们创建存储；但是， List 是一个引用类型；因此，您将需要为其分配内存，否则它将为空（如您所见）。

# javascript - 使用 Javascript 中断 Mac 平滑滚动

> ID：13708952
> 
> 赞同：1
> 
> 时间：2012-12-04T17:54:26.707
> 
> 标签：javascript, jquery, macos, animation, scroll

我有一个脚本可以监视滚动并控制滚动以根据某些参数为页面设置动画。为此，它调用`window.scrollTo(0, currentScrollTop);`了完美地中断了 Windows 上 Firefox 中的平滑滚动。然后我可以将页面滚动到我想要的位置。

不幸的是，这个技巧在 MacOS 的浏览器中似乎不起作用，这导致 JavaScript 和浏览器竞争滚动窗口时体验被破坏。

有没有一种跨浏览器的方式来停止使用 JavaScript 平滑滚动？

有问题的网站使用效果： http: [//capitalismis.com](http://capitalismis.com)

相关（简化）代码：

```
$doc.on('scroll', function(e)
    {
        $doc.off('scroll');

        window.scrollTo(0, $doc.scrollTop());

        var aniSpeed = 1500 * Math.abs(scrollTop - selected.top) / windowHeight;

        $body
            .stop()
            .animate({scrollTop: selected.top}, aniSpeed, 'easeOutQuad');
     }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:26:04.993

**简而言之：不要试图覆盖原生滚动。**每个操作系统和设备处理事情的方式都不同，并且无法预测不同的场景。有“硬滚动”（大多数 Windows 版本）、“软滚动”（≈Mac OS X 10.6+）和仅在滚动完成时触发 onscroll 事件的浏览器（iOS）。一团糟。

我不会尝试修改*body*的滚动行为，而是相应地修改页面的*元素*。收听 onscroll-event，并在网页上移动内容。

```
// Capture scroll event
$(window).scroll( function() {

    // Get scroll offset from top
    var scrollTop = $(window).scrollTop();

    // Use it to move elements around on the page (or change backgrounds etc.)
    // Here: move .element in the opposite direction of the scroll
    $('.element').css({
        '-vendor-transform' : 'translate3d(' + (scrollTop*(-1)) + 'px,0,0)'
    });
}); 
```

# objective-c - 表视图的多个委托

> ID：13708953
> 
> 赞同：1
> 
> 时间：2012-12-04T17:54:32.083
> 
> 标签：objective-c, ios, xcode

嗨，我一直在谷歌搜索，但找不到答案，也许有不同的方法可以做到这一点，所以我把它交给社区。

我在 UIViewController 中有一个表格视图。UIViewController 是表视图的数据源和委托。然后我有第二个控制器，它对主 UIViewController 中的滚动做出反应。理想情况下，我希望第二个控制器也成为委托，以便 scrollviewDidBeginScrolling 将在两个控制器中触发。我想这样做是因为它使控制器 2 很容易实现，因为您将它设置为委托并传入 tableview 引用，它会完成所有繁重的工作。

基本上你可以将一组代表传递给 tableView.delegate 吗？我可以看到一些情况，您希望多个控制器或视图对像 scrollViewDidBeginScrolling 这样的事件做出反应。有什么方法可以完成类似的事情而不必做类似的事情

```
-(void)scrollViewDidBeginScrolling:(UIScrollView *)scrollView{
     [anotherViewController scrollviewDidScroll:scrollview];
     [otherView scrollViewDidScroll:scrollview];
} 
```

我将它用于控制器，而不是处理表视图的拉动刷新，我希望在表视图控制器中使用尽可能少的行/方法使实现尽可能简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:03:41.460

你可以完成你需要的，但你需要链接代表。表格视图将只有一个委托，但您可以在作为表格视图委托的视图控制器中定义自己的自定义委托方法，并将您的另一个视图控制器设置为该委托。另一种蛮力方法是只发送通知并让视图控制器注册通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:05:43.343

在您的 UIViewController1 委托方法中，只需将相同的调用发送到 UIViewController2 委托方法。EI：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
   [delegate2 tableView:tableView didSelectRowAtIndexPath:indexPath];
   // etc... 
```

* * *

编辑下面的评论。您可以继承 UITableView 并为其提供多个委托属性或委托属性数组。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
   for(id delegate in _delegates)
       [delegate tableView:tableView didSelectRowAtIndexPath:indexPath];
   // Do nothing else, because the delegates handle everything.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:16:40.210

您需要的是委托多路复用。我写了一个类来做到这一点：[https ://github.com/aleph7/MultiDelegate](https://github.com/aleph7/MultiDelegate)

# sql-server-2008 - 在我们重新启动 SQL 服务之前保存执行计划？这甚至可以做到吗？

> ID：13708958
> 
> 赞同：0
> 
> 时间：2012-12-04T17:54:46.813
> 
> 标签：sql-server-2008

SQL 服务器在 SQL 服务重新启动时删除所有执行计划。在我们重新启动服务之前，有什么办法可以保存这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:12:44.583

不。

您可以提供的最接近的东西是计划指南，但即使使用计划指南，服务器也必须在重新启动后第一次提交时重新编译每个查询。计划指南理论上可以减少查询编译期间所需的工作量。

正如 Martin 建议的那样，如果您想进行分析，您可以提取*有关*查询计划的信息，但以后不能将这些信息放回：

`SELECT query_plan FROM sys.dm_exec_cached_plans CROSS APPLY sys.dm_exec_query_plan(plan_handle)`

如果您真的很担心，请设置一组查询以在服务重新启动后运行，以填充计划缓存。但我认为这是浪费时间。

SQL Server 服务将关闭这一事实意味着用户将遇到中断。这已经需要计划和沟通。了解这种重新启动的影响比仅仅在重新启动期间的拒绝服务具有更大的范围 - 最初的几分钟使用可能很慢 - 只需稍微改变您的计划和沟通。如果某种理论上的缓慢是一个大问题，您将不得不更仔细地计划停机时间或等待更合适的时间——也许是凌晨 2 点而不是下午 2 点。

我说“理论上的缓慢”是因为没有人会在之后重新编译查询时遇到任何真正的问题。查询通常编译得非常快。

# php - PHP全局变量在函数内不起作用

> ID：13708959
> 
> 赞同：6
> 
> 时间：2012-12-04T17:54:53.467
> 
> 标签：php

> **可能重复：**
> [php函数变量范围](https://stackoverflow.com/questions/5912036/php-function-variable-scope)

我正在使用下面的代码来测试一个全局变量。似乎无法在函数内部比较全局变量。

为什么它没有在输出中显示“hello world”？

下面是我正在尝试的代码：

```
<?php    
$bool = 1;

function boo() {
    if ($bool == 1) {
        $bool = 2;
        echo 'Hello World';    
    }
}
?> 
```

当我删除`function boo()`时，会显示“hello world”。为什么功能存在时不显示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T17:59:07.343

用于`global $var`访问您的变量

```
<?php    
$bool = 1;

function boo() {
    global $bool;
    if ($bool == 1) {
        $bool = 2;
        echo 'Hello World';    
    }
}

boo();
?> 
```

或者使用指针的更安全的方法是

```
function boo(&$bool) {
    if ($bool == 1) {
        $bool = 2;
        echo 'Hello World';
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T17:59:28.407

看起来像家庭作业，仍然：

```
<?php

$bool = 1;

boo();

function boo() {
global $bool;

if ($bool == 1) {
$bool = 2;
echo 'Hello World';

}

}
?> 
```

或者

```
<?php

$bool = 1;

boo(&$bool);

function boo(&$bool) {

if ($bool == 1) {
$bool = 2;
echo 'Hello World';

}

}
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T17:58:38.063

`$bool`调用你的函数，并作为参数传递并返回值。

```
$bool = 1;
$bool = boo($bool);

function boo($bool) {

  if ($bool == 1) {
    $bool = 2;
    echo 'Hello World';    
  }

  return $bool;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:00:43.307

用这种方式

```
$bool = 1;
function boo($bool) {

  if ($bool == 1) {
    $bool = 2;
    echo 'Hello World';    
  }
}
boo($bool); 
```

# django - DRY 创建多个查询集

> ID：13708964
> 
> 赞同：2
> 
> 时间：2012-12-04T17:55:17.110
> 
> 标签：django, filter, dry, django-queryset

我开始使用 Django，虽然我已经阅读了这本书并用谷歌搜索，但我担心我没有在某些概念上建立联系以解决这个问题。

我需要显示与特定公司相对应的几个值。用户首先选择三个公司进行比较，然后响应显示这些公司的数据。

在我看来，我创建了在模板中迭代的查询集，以显示数据，如下所示：

观点摘录：

```
 C1 = form.cleaned_data['Company1']
        C2 = form.cleaned_data['Company2']
        C3 = form.cleaned_data['Company3']

        company_names = [C1,C2,C3]

        company1 = (Company_stats.objects.filter(period__exact=P, company_name__exact=C1))
        company2 = (Company_stats.objects.filter(period__exact=P, company_name__exact=C2))
        company3 = (Company_stats.objects.filter(period__exact=P, company_name__exact=C3))

        company_list = [company1,company2,company3] 
```

模板摘录：

```
 {%for c in company_list%}    
     {%for z in c %}
        {{ z.company_name }}
        {{ z.nxt_m_ret_est }}    
        {{ z.nxt_m_ret_rat }}
     {% endfor %}  
  {% endfor %} 
```

这行得通 - 但是，因为我有更多的移动部件（为了我的问题，我已经简化了视图）它变成了一个无穷无尽的查询集洗衣清单 - 我 100% 确定这不是 DRY（尽管有洗衣参考 ;) 更不用说上下文的长度了。

如果有人可以帮助我学习以正确的方式做到这一点，我将不胜感激。非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:00:27.830

试试这个：

```
companies = ['Company1', 'Company2', 'Company3']

company_names = [form.cleaned_data[c] for c in companies]

company_list = Company_stats.objects.filter(
    period__exact=P, 
    company_name__in=company_names
) 
```

即使这不完全符合您的需要，类似的东西也应该起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:58:28.840

我还要补充一点，千篇一律的查询是[经理](https://docs.djangoproject.com/en/dev/topics/db/managers/)真正发光的地方。如果您发现也需要在代码的其他地方进行相同的查询，请绝对考虑使用它们。我暂时避开了它们，因为我认为它们很复杂，但它们真的不是那么糟糕，它们可以相当多地清理你的代码。

# css - 为什么 Chrome 会放弃这种渐变设置？

> ID：13708968
> 
> 赞同：0
> 
> 时间：2012-12-04T17:55:33.430
> 
> 标签：css, google-chrome

我没有在 Chrome 中获得渐变，但它适用于 Safari 和 Firefox。这是代码：

```
.accounts-form #auth-form {
    background: -moz-linear-gradient(#FEFEFE, #F4F4F4) repeat scroll 0 0 #F4F4F4;
    border-bottom-left-radius: 2px;
    border-bottom-right-radius: 2px;
    margin: 0;
    padding: 0 0 40px;
} 
```

`background:`这是导致问题的那条线。我见过其他人有这个问题`-webkit-gradient`，只是没有`-moz-linear-gradient`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:52:35.377

以下是如何在背景上应用渐变的语法。

```
background: -webkit-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* Chrome10+,Safari5.1+ */ 
```

通常建议以原生版本编写代码，然后通过[http://prefixr.com/](http://prefixr.com/)运行它，以使用所有与浏览器兼容的供应商前缀完成代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:18:54.077

Chrome 需要一个 -webkit-gradient；Chrome 10+ 使用的 -webkit-gradient 与我认为的一些早期版本略有不同。

我使用这个 CSS3 渐变生成器 - 无论您是否使用生成的代码，它都能很好地了解每个浏览器所需的所有属性。

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# f# - Computer Language Benchmarks Game 的 F# Threadring 条目中的“if false then ()”有什么作用？

> ID：13708969
> 
> 赞同：11
> 
> 时间：2012-12-04T17:55:42.963
> 
> 标签：f#

[Threadring](http://benchmarksgame.alioth.debian.org/u64q/program.php?test=threadring&lang=fsharp&id=3)的计算机语言基准游戏的F# 条目包含一个看似无用的行：`if false then ()`. 当我注释掉这一行时，程序运行得更快（对于 50000000 的输入，~2s vs ~55s）并产生相同的结果。这是如何运作的？为什么会有这条线？编译器到底在做什么似乎是无操作的？

编码：

```
let ringLength = 503

let cells = Array.zeroCreate ringLength
let threads = Array.zeroCreate ringLength
let answer = ref -1

let createWorker i = 
    let next = (i+1)%ringLength
    async { let value = cells.[i]
            if false then () 
            match value with
            | 0 -> answer := i+1
            | _ -> 
                cells.[next] <- value - 1 
                return! threads.[next] }

[<EntryPoint>]
let main args = 
    cells.[0] <- if args.Length>0 then int args.[0] else 50000000
    for i in 0..ringLength-1 do 
        threads.[i]<-createWorker i

    let result = Async.StartImmediate(threads.[0])
    printfn "%d" !answer
    0 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T22:03:09.750

我最初编写了这段代码。我不记得添加该行的确切原因，但我猜如果没有它，优化器会做一些我认为超出基准游戏精神的事情。首先使用 asyncs 的原因是为了实现对下一个 async 的尾调用延续（这使得它的性能比 C# mono 好得多）。- 乔莫

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-04T18:20:12.610

如果计算表达式包含`if false then ()`，则异步工作流的转换会有所不同。有了这条线，它使用`async.Combine`. 稍微简化的代码如下所示：

```
async.Delay(fun () ->
  value = cells.[i]
  async.Combine
    ( async.Return(if false then ())
      async.Delay(fun () ->
        match value with (...) ) )) 
```

翻译插入`Combine`是因为`if`循环完成的（可能）异步计算需要与以下代码结合使用。现在，如果你删除`if`你会得到类似的东西：

```
async.Delay(fun () ->
  value = cells.[i]
  match value with (...) ) )) 
```

不同之处在于，现在在传递给的函数中立即完成了更多工作`Delay`。

**编辑：**我认为这造成了差异，因为代码使用`Async.StartImmediate`而不是`Async.Start`，但似乎并非如此。事实上，我完全不明白为什么代码使用异步工作流......

**编辑二。**：我不完全确定 Mono，但它确实在 F# 交互中复制 - 在那里，版本`Combine`慢了大约 4 倍（这是我所期望的，因为函数分配开销）。

# r - pvclust 上 hclust 生成的树状图

> ID：13708972
> 
> 赞同：2
> 
> 时间：2012-12-04T17:56:03.780
> 
> 标签：r, hierarchical-clustering, pvclust

我有兴趣使用 pvclust R 包来确定我使用 R 中的常规层次聚类 hclust 函数生成的集群的重要性。我有一个数据矩阵，其中包含约 8000 个基因及其在 4 个发育时间点的表达值。下面的代码显示了我用来对数据执行常规层次聚类的方法。我的第一个问题是：有没有办法获取 hr.dendrogram 图并将其应用于 pvclust？其次，pvclust 似乎对列进行了聚类，并且它似乎更适合跨列而不是像我想要的行进行比较的数据（我已经看到了许多使用 pvclust 对样本而不是基因进行聚类的例子）。有没有人以与我想做的类似的方式使用 pvclust？我的常规层次聚类的简单代码如下：

```
mydata<-read.table("Developmental.genes",header=TRUE, row.names=1)
mydata<-na.omit(mydata)
data.corr <-cor(t(mydata),method="pearson")
d<-as.dist(1-data.corr)
hr<-hclust(d,method="complete",members=NULL)
hr.dendrogram.<-plot(as.dendrogram(hr)) 
```

我很感激这方面的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T23:48:24.363

Why not just use `pvclust` first like `fit<-pvclust(distance.matrix, method.hclust="ward", nboot=1000, method.dist="eucl")`. After that `fit$hclust` will be equal to `hclust(distance.matrix)`.

# charts - 从控制器设置轴字段 - Extjs4 图表

> ID：13708974
> 
> 赞同：0
> 
> 时间：2012-12-04T17:56:07.657
> 
> 标签：charts, extjs4, extjs-mvc

如何动态设置 ExtJs4 Chart 的轴和系列字段？我有一个组合框，其中包含商店的所有属性，用户可以使用它来选择折线图的 X 轴和 Y 轴字段。因此，每当用户更改选择时，我都必须从控制器更改图表字段。

谢谢

# javascript - SCRIPT5007：无法设置属性“值”的值：对象为空或未定义

> ID：13708976
> 
> 赞同：0
> 
> 时间：2012-12-04T17:56:08.323
> 
> 标签：javascript, internet-explorer

我在网站上有以下 JS 费用计算器：http: [//jsfiddle.net/billsinc/HMFYK/](http://jsfiddle.net/billsinc/HMFYK/)

```
function updateOutput() {

//get form 
var form = document.getElementById('calc');
var x = form.elements['x'].value;
x = x.replace(/,/g, "");

// determine multiplier
if (x > 11111 && x < 83333) {
    y = 0.009;
}
if (x >= 83333 && x < 166667) {
    y = 0.007;
}
if (x >= 166667 && x < 250000) {
    y = 0.006;
}
if (x >= 250000) {
    y = 0.005;
}

// add data addon
if (form.elements['pd'].checked === true) {
    p = 250;
}
else {
    p = 0;
}

// calculate monthly price
if (x > 11111) {
    form.elements['z'].value = Math.round(eval(parseInt(x, 10) * y + p));
}
else {
    form.elements['z'].value = Math.round(eval(100 + p));
}
}​ 
```

如果您输入“12000”（或大于 11,111 的某个数字），它将在 FF、Chrome 和 Safari 中正确计算。

我一直无法让它在 IE 中工作。输入值后会抛出以下错误：

> SCRIPT5007：无法设置属性“值”的值：对象为空或未定义

我在 SO 上多次看到此错误，但所有解决方案都与 .Net 或嵌入 Flash 的某些问题有关。

任何帮助将不胜感激......在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:20:38.060

IE 似乎不包含[`<output>`](https://developer.mozilla.org/en-US/docs/HTML/Element/output)集合中的元素，IE 中也是`form.elements`如此。（如果您单击该链接，您会看到IE10 之前不支持该功能。）其他浏览器确实在其集合中包含s 。`form.elements['z']``undefined``<output>``<output>``elements`

要么制作`z`成只读的`<input>`，要么给你`<output>`一个`id`并用`document.getElementById`.

# javascript - Jquery - $(selector).scroll 正在将参数传递给它的回调函数？

> ID：13708977
> 
> 赞同：-1
> 
> 时间：2012-12-04T17:56:08.417
> 
> 标签：javascript, jquery, scroll

我正在从 javascript(Jquery) 文件中读取那几行代码，我想知道这些参数“x”和“y”是从哪里来的。滚动事件是否正在处理？

```
$(window).scroll(function(x,y) {

        dosomething(withThis);
    }); 
```

谢谢卢卡

PS here is the jquery excerpt that make me ask this question [这是在滚动时使元素淡入的一种优雅方式吗？](https://stackoverflow.com/questions/9160493/is-this-an-elegant-way-to-make-elements-fade-in-while-scrolling)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T18:01:35.877

好吧，打开 Firebug 控制台（或 Web 开发工具）并粘贴以下代码：

```
 $(window).scroll(function(x,y,z) {
    console.log(x,y,z)
 }); 
```

执行和滚动后，您将看到结果（适用于使用 jQuery 的网站）。

正如预期的那样，第一个参数 - 事件对象，第二个和第三个 - 未定义；

但是，您可以手动触发事件，并传递任何参数。

更多信息在这里：[http ://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:01:00.253

不，[滚动事件](http://api.jquery.com/scroll/)的处理程序只接受一个事件对象，而不是`x,y`. 该代码具有误导性和错误性。如果您不显示完整代码，我们将无能为力。

这和定义一个方法是一样的

```
function add(a,b) {
   return a + b;
}

// When called like this, b will be undefined, as is y in your example
// programmer error not caught by the compiler
add(7); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:10:57.093

您可以检查`arguments`任何函数上的变量，以便了解传入的数据。

```
$(window).scroll(function() {
    console.log(arguments);
}); 
```

# android - 摇动动画“滑入”其他小部件 android

> ID：13708980
> 
> 赞同：1
> 
> 时间：2012-12-04T17:56:12.067
> 
> 标签：android, android-layout, android-widget, android-animation, android-xml

我是动画新手。我在按钮上有一个旋转动画。问题是当执行该按钮动画时，该按钮与布局中的其他按钮相交。因此，在动画期间，无法看到移动按钮，因为它被其他按钮覆盖。关于如何让我的动画停留在布局顶层的任何想法？我想找出一个与 API 8 兼容的解决方案。

```
//create shake animation
    final Animation shakeIt = AnimationUtils.loadAnimation(this, R.anim.shake);
    findViewById(R.id.button_spin).startAnimation(shakeIt);

// use shake animation
    spinnerButton.startAnimation(shakeIt); 
```

编辑：（这里有更多信息）

所以我在过去的几个小时里一直在玩它，并发现了更多的东西。Lecho 的直觉是正确的，z 顺序是一个小部件是“高于”还是“低于”另一个的驱动因素。我面临的问题可能是因为两件事：

1.  视图视图前面的按钮（我想将其移回）具有在活动结束附近编辑的文本。添加文本是否会强制小部件重绘更改该视图的 Z 顺序？？？

2.  onResume() 中的按钮文本已更改，似乎我无法在该方法中更改按钮的 Z 顺序？？？

以上2个问题的答案将解决我的问题

编辑 2：有问题的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg"
    android:orientation="vertical"
     >

     <LinearLayout
       android:layout_width="match_parent"
       android:layout_height="0dp"
       android:orientation="vertical"
       android:layout_weight=".7"
       android:layout_marginTop="5dp" >

         <Button
            android:id="@+id/categoryButton"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@drawable/drop"
            android:prompt="@string/planet_prompt"
            android:paddingRight="20dp"
            android:textColor="#000000"
            android:textStyle="bold"
            android:textSize="35dp"
            />

     </LinearLayout>

 <LinearLayout
     android:layout_width="match_parent"
     android:layout_height="0dp"
     android:layout_weight="0.1"
     android:orientation="horizontal" >

     </LinearLayout>

   <LinearLayout
       android:layout_width="match_parent"
       android:layout_height="0dp"
       android:orientation="horizontal"
       android:layout_weight="1.5" >

               <LinearLayout
               android:layout_width="0dp"
               android:layout_height="match_parent"
               android:orientation="horizontal"
               android:layout_weight="1" >
               </LinearLayout>

                <Button
                android:id="@+id/button_spin"
                android:layout_width="0dp"
                android:layout_weight="2.35"
                android:layout_height="fill_parent"
                android:background="@drawable/letseat"
                android:layout_gravity="center_horizontal"
                android:gravity="center" />

              <LinearLayout
               android:layout_width="0dp"
               android:layout_height="match_parent"
               android:orientation="horizontal"
               android:layout_weight="1" >
               </LinearLayout>

</LinearLayout>

 <LinearLayout
     android:layout_width="match_parent"
     android:layout_height="0dp"
     android:layout_weight="3"
     android:orientation="vertical">

      <Button
        android:id="@+id/button_additems"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:layout_width="match_parent"
        android:background="@drawable/add_rest"
        android:gravity="center_horizontal" />   

        <Button
        android:id="@+id/button_showrestaurant"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:layout_width="match_parent"
        android:background="@drawable/edit_rest"
        android:gravity="center_horizontal" />

        <Button
        android:id="@+id/button_nearbyplaces"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:layout_width="match_parent"
        android:background="@drawable/whats_near"
        android:gravity="center_horizontal" />

  </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:32:48.293

只是我的想法。在 android 中，z-order 由视图添加到 XML 的顺序决定。也许动画按钮是在另一个按钮之前添加到 xml 中的，因此它“更深”。稍后尝试在 XML 中放置动画按钮，或者`bringChildToFront(buttonView)`在布局上使用方法，或者从代码中将按钮添加到布局中。

**编辑：**

广告 1\. 添加文本似乎不会改变 Z 顺序。当我更改文本并调用`button.bringToFront()`时，Z 顺序会更改，但在我调用`bringToFront()`或`setText()`单独调用时不会更改。

广告 2.`onResume`添加文本不会更改 Z 顺序，但方法`bringToFront()`似乎按预期工作。

我现在无法将这些方法与视图动画一起测试。

测试活动：

```
public class MainActivity extends Activity {
    private int i = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final Button btn1 = (Button) findViewById(R.id.btn1);
        final Button btn2 = (Button) findViewById(R.id.btn2);
        btn2.bringToFront();
        final Button btn3 = (Button) findViewById(R.id.btn3);
        btn3.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if ((i % 2) == 0) {
                    final Button btn1 = (Button) findViewById(R.id.btn1);
                    btn1.setText("BUTTON_BLACK_NEW");
                    btn1.bringToFront();
                } else {
                    final Button btn2 = (Button) findViewById(R.id.btn2);
                    btn2.setText("BUTTON_GREY_NEW");
                    btn2.bringToFront();
                }
                ++i;

            }
        });

    }

    @Override
    protected void onResume() {
        super.onResume();
        if ((i % 2) == 0) {
            final Button btn1 = (Button) findViewById(R.id.btn1);
            btn1.bringToFront();
        } else {
            final Button btn2 = (Button) findViewById(R.id.btn2);
            btn2.bringToFront();
        }
        ++i;
    }

} 
```

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" 
android:id="@+id/main_layout">

<Button
    android:id="@+id/btn1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/black"
    android:text="BUTTON_BLACK"
    android:textColor="@android:color/white" />

    <Button
        android:id="@+id/btn2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/darker_gray"
        android:text="BUTTON_GREY"
        android:textColor="@android:color/black" />

    <Button
        android:id="@+id/btn3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="CHANGE_Z"
        android:layout_below="@+id/btn2" />

</RelativeLayout> 
```

# android - ListView 中的异步图像加载：显示旧图像

> ID：13708981
> 
> 赞同：2
> 
> 时间：2012-12-04T17:56:13.087
> 
> 标签：android, android-widget, android-listview, listadapter

我有一个`ListView`带有以下适配器的：

```
private class ListAdapter extends BaseAdapter {
        private List<Item> items;
        private ImageCache imageCache;

        public ListAdapter(List<Item> item) {
            this.items=items;
            imageCache=ImageCache.getInstance();
        }

        //nothing special here
        public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder viewHolder;

            if (convertView == null) {
                convertView = getLayoutInflater().inflate(R.layout.listitem, parent, false);

                viewHolder = new ViewHolder();
                viewHolder.imgView = (ImageView) convertView.findViewById(R.id.imgview);
                viewHolder.txtView = (TextView) convertView.findViewById(R.id.txtview);

                convertView.setTag(viewHolder);
            } else  {
                viewHolder = (ViewHolder) convertView.getTag();
            }

            Item item = getItem(position);

                    //this method is used to start download
            imageCache.load(item.getImageURL(), viewHolder.imgView);

            viewHolder.txtView.setText(item.getText());

            return convertView;
        }
    } 
```

下面是我的`ImageCache`课。它依赖于`android.util.LruCache`Jake Wharton 的[DiskLruCache](http://jakewharton.com/disklrucache/)；如果在内存和磁盘缓存中找不到项目，则使用 AsyncTask 下载它。

```
private Map<String,WeakReference<ImageView>> references;

//...
public void load(String imageUrl, ImageView imgView) {
    final String key=getKey(imageUrl);
    references.put(key, new WeakReference<ImageView>(imgView)); 
    this.get(imageUrl, new OnImageLoadedListener() {
        public void onImageLoaded(Bitmap image) {
            WeakReference<ImageView> imgViewRef=references.get(key);
            if(imgViewRef!=null && imgViewRef.get()!=null) {
                imgViewRef.get().setImageBitmap(image);
            } else {
                Log.d("Set image", "Dead reference! setting bitmap cancelled");
            }
        }
    });
} 
```

如您所见，我试图仅在 ImageView 仍然存在时使用`WeakReference`我`ImageView`的 s 来设置图像，并避免从`ListView`. 但是，这似乎不起作用。前几个可见项目的图像正常加载，但是当我开始滚动时`ListView`，我看到不正确的图像（以前列表项中使用的图像），这很烦人。我怎样才能避免这种情况？下载完成后，图像将替换为正确的图像，但下载可能需要一段时间。

一个明显的解决方法是隐藏`ImageView`直到下载完成，然后显示它，但还有其他方法吗？

* * *

编辑：其他一些`ImageCache`类方法：

```
//used to track requests for each image URL, key is URL
private Map<String, Queue<OnImageLoadedListener>> listeners;

//...

public void get(String imageUrl, OnImageLoadedListener listener) {
    final String key=this.getKey(imageUrl);
    Bitmap image;

    Log.d(LOG_TAG, "image "+key+" for "+listener.hashCode()+": requesting...");
    if (!listeners.containsKey(key)) {
        listeners.put(key, new LinkedList<OnImageLoadedListener>());
    }

    Queue<OnImageLoadedListener> imageListenersQueue=listeners.get(key);
    imageListenersQueue.add(listener);

    //check if there are other requests for the same image
    if (imageListenersQueue.size()>1) {
        Log.d(LOG_TAG, "image "+key+" for "+listener.hashCode()+": already requested...");
                    return;
    }

    //proceed only if this request is the first
            Log.d(LOG_TAG, "image "+key+" for "+listener.hashCode()+": proceeding...");
    image=memCache.get(key);
    if (image==null && diskCache!=null) {
        image=diskCache.getBitmap(key);

        if (image==null) {
            new BitmapDownloader(new OnImageLoadedListener() {
                public void onImageLoaded(Bitmap image) {
                    if (image!=null) {
                        memCache.put(key, image);
                        diskCache.put(key, image);
                    }
                    post(key, image);
                                            Log.d(LOG_TAG, "image "+key+", downloaded bitmap "+image.hashCode());
                }
            }).execute(imageUrl);
        } else {
            memCache.put(key, image);
                            Log.d(LOG_TAG, "image "+key+" found in diskcache");
            post(key, image);
        }
    } else {
                    Log.d(LOG_TAG, "image "+key+" found in memcache");
        post(key, image);
    }
}

private void post(String key, Bitmap bitmap) {
    //will now pass bitmap to all listeners
    LinkedList<OnImageLoadedListener> imageListenersQueue=(LinkedList<OnImageLoadedListener>) listeners.get(key);
    while (!imageListenersQueue.isEmpty()) {
        imageListenersQueue.remove().onImageLoaded(bitmap);
    }
}

//and the mysterious getKey()
private String getKey(String str) {
    return Integer.toHexString(str.hashCode());
} 
```

这是 ImageCache 的日志输出：

第一个可见列表项：

```
12-05 12:30:06.036: D/ImageCache(21138): image 40bc8de0 for 1104135776: requesting...
12-05 12:30:06.036: D/ImageCache(21138): image 40bc8de0 for 1104135776: proceeding...
12-05 12:30:06.071: D/ImageCache(21138): image 6589e90 for 1103929688: requesting...
12-05 12:30:06.071: D/ImageCache(21138): image 6589e90 for 1103929688: proceeding...
12-05 12:30:07.251: D/ImageCache(21138): image 40bc8de0 for 1104135776 ready, setting bitmap 1104282656
12-05 12:30:07.255: D/ImageCache(21138): image 40bc8de0, downloaded bitmap 1104282656
12-05 12:30:08.407: D/ImageCache(21138): image 6589e90 for 1103929688 ready, setting bitmap 1104663160
12-05 12:30:08.411: D/ImageCache(21138): image 6589e90, downloaded bitmap 1104663160 
```

滚动到下一个项目时：

```
12-05 12:30:44.669: D/ImageCache(21138): image 2e762e6c for 1104686624: requesting...
12-05 12:30:44.673: D/ImageCache(21138): image 2e762e6c for 1104686624: proceeding...
12-05 12:30:45.997: D/ImageCache(21138): image 2e762e6c for 1104686624 ready, setting bitmap 1104089312
12-05 12:30:45.997: D/ImageCache(21138): image 2e762e6c, downloaded bitmap 1104089312 
```

似乎问题不在于缓存机制，因为`load()`对该项目的唯一调用为我提供了与请求完全正确的图像集`ImageView`。只是在下载和设置之前显示不正确的图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T18:03:12.030

这里需要考虑两件事。首先，当您在缓存中找不到目标位图时，您应该将`ImageView`源设置为某种加载可绘制对象。这很简单。

其次，您需要考虑视图回收。您的代码中没有任何内容可以阻止您开始下载 a 的场景`ImageView`，但在`onImageLoaded()`调用之前，来自适配器的 View 被回收以显示其他图像。然后，下载完成，导致显示完全错误的图像。

一个典型的解决方案是调用`setTag()`你的`ImageView`，并设置它应该加载的 URL。在您的`load()`方法开始时执行此操作。然后，您可能希望`onImageLoaded()`为 URL 添加一个额外的参数。检查此 URL 是否与`ImageView`标记匹配，仅在 URL 匹配时调用`setImageBitmap()`。

# html - 网站验证错误

> ID：13708990
> 
> 赞同：1
> 
> 时间：2012-12-04T17:56:33.287
> 
> 标签：html, forms, validation

我的网站出现了一些奇怪的验证错误。我已经多次浏览了我的html，但我似乎无法找到罪魁祸首。您可以在此处查看 w3 验证；

[http://validator.w3.org/check?uri=http%3A%2F%2Ftubebackgrounds.co.uk%2Funi%2Fassignment1%2Faustria.html&charset=%28detect+automatically%29&doctype=Inline&outline=1&group=1&No200=1&verbose=1&st =1&user-agent=W3C_Validator%2F1.3](http://validator.w3.org/check?uri=http%3A%2F%2Ftubebackgrounds.co.uk%2Funi%2Fassignment1%2Faustria.html&charset=%28detect+automatically%29&doctype=Inline&outline=1&group=1&No200=1&verbose=1&st=1&user-agent=W3C_Validator%2F1.3)

这是我的 HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<!--[if IE 9]>
<style>
li {
}
</style>
<![endif]-->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script type="text/javascript" src="js/Stylesheets.js"> </script>
<title>CTEC1801: Austria Fact Page</title>

<link rel="stylesheet" type="text/css" href="css/contact.css" />

<link rel="stylesheet" type="text/css" href="css/style_austria.css" title="Style_One" />
<link rel="stylesheet" type="text/css" href="css/style_austria2.css" title="Style_Two" />
<link rel="stylesheet" type="text/css" href="css/style_austria3.css" title="Style_Three"/>  

<script type="text/javascript">
//<![CDATA[
        var name = ".stylechange";
        var menuYloc = null;

                $(document).ready(function(){
                        menuYloc = parseInt($(name).css("top").substring(0,$(name).css("top").indexOf("px")))
                        $(window).scroll(function () { 
                                offset = menuYloc+$(document).scrollTop()+"px";
                                $(name).animate({top:offset},{duration:500,queue:false});
                        });
                }); 
//]]>
</script>
</head>

<body>

<div id="wrapper">   
<div class="stylechange"> 
Choose a style:

<a href="#" onclick="setActiveStyle('Style_One')">- Style One</a> 
<a href="#" onclick="setActiveStyle('Style_Two')">- Style Two</a>
<a href="#" onclick="setActiveStyle('Style_Three')">- Style Three</a>

</div>  

  <div id="nav">
    <a href="explanation.html" class="home">Explanation Page</a> 
    <a href="#" class="austria">Austria</a> 
    <a href="#" class="switzerland">Switzerland</a>
    </div><br />

    <div id="logo"> <a href="http://www.roamintl.com/wp-content/uploads/2011/07/austria.jpg"><img src="images/austrian_logo.jpg" alt="Austrian Logo" width="940" height="350" /></a></div>

<div id="content-left">

    <h1 id="top">Random facts of the day!</h1>

    <h2>Capital of Austria</h2>
     <ul>   
        <li>Veanna</li> 
    </ul>           
    <h2>Total Area of Austria</h2>

    <ul>
        <li>Total: 83,870 sq km</li>   
        <li>Land: 82,444 sq km </li>   
        <li>Water: 1,426 sq km  </li>   
   </ul> 

    <h2>Population of Austria</h2>
    <ul>   
        <li>8,419,000 million and counting </li>
   </ul>     
    <h2>Languages of Austria</h2>
    <ul>    
        <li>German (official nationwide) </li> 
        <li>Slovene (official in Carinthia) </li>
        <li> Croatian (official in Burgenland </li>
        <li> Hungarian (official in Burgenland) </li>
    </ul>   
    <h2>Life Expectancy in Austria</h2>
    <ul>     
        <li>Total population: 78.92 years </li> 
        <li>Male: 76.03 years </li>
        <li>Female: 81.96 years (2005 est.) </li>
     </ul> 
    <h2 class="right">history and Heritage</h2>
    <ul class="right">     
        <li>The Austrian flag is one of the oldest in the world </li> 
        <li>They hold the worlds largest emerald </li>
        <li>The sewing machine was invented here </li>
     </ul> <br /><br />
    <h2 class="right">Land and Nature</h2>
    <ul class="right">     
        <li>62% of Austria is covered by the Alps </li> 
        <li>Holds the tallest waterfall in Europe </li>
        <li>One fourth of the population of Austria lives in the Capital </li>
     </ul> 
    <h2 class="right">Business and Economy</h2>
    <ul class="right">     
        <li>Austria has the second lowest unemployement rate </li> 
        <li>Among Europeans, Austrians work the longest with the average of 45 hours a week </li>
        <li>Over 60% of Austria's electricity is supplied by a renewable source </li>
     </ul> 
 </div>

<div id="contact">

        <h1>Contact us</h1>

<div id="contact-form" class="clearfix">  

    <h2>Please fill in the details below as needed.</h2>  

    <form method="post" action="http://www.elizabethcastro.com/html6ed/examples/forms/showform.php">  

        <div class="form_name">* Name:</div>        
        <input type="text" id="name" name="name" value=""/>  

        <div class="form_name">* Email Address:</div>      
        <input type="text" id="email" name="email" value="" />  

        <div class="form_name">* Message:</div> 
        <textarea id="message" name="message" cols="1" rows="1"></textarea>  

        <div class="form_required">* indicates a required field </div>

        <input type="submit" value="Submit" id="submit-button" />  
        <input type="reset" value="Reset" id="reset-button" />   
    </form>  
</div>  

</div>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:59:54.273

在 XHTML 1.0 Strict 中，form 标签不能包含 input 和 textarea 元素作为直接子元素。要成为有效的 XHTML，输入标记必须由另一个块级元素包装，例如`<p>`or `<fieldset>`。有什么理由不能使用 XHTML 过渡或 HTML5 文档吗？

有关 XHTML strict 和表单元素的更多信息，请参阅[http://xhtml.com/en/xhtml/reference/form/](http://xhtml.com/en/xhtml/reference/form/)

# python - 用字典构建连接节点图

> ID：13708991
> 
> 赞同：-1
> 
> 时间：2012-12-04T17:56:36.043
> 
> 标签：python, graph, dictionary, nodes, traversal

我正在编写一个程序来计算帆船的最快时间。我有一个 4x4 矩阵，即 16 个节点。从每个节点我可以去 8 个不同的方向。我知道一个大列表中每个节点的每个方向的旅行时间，所以它现在是 8*16 个字符长。列表的开头如下所示：

```
TravelTime = [0.7, 0.5, 10000, 0.5, 0.7, 1.6, 1.3, 1.6, 0.6, 0.5, 0.6, 0.9, 0.6, 0.5, 10000, 10000]... 
```

其中前 8 个数字表示从 的所有方向的行程时间，`Node11`接下来的 8 个数字表示从 的所有方向的时间`Node12`。所以它一直持续到最后的信息`Node44`。例如`TravelTime[0]`，告诉我从`Node11`到直接旅行的时间`Node12`。现在我需要将其保存到字典中，因此我将其呈现为：

```
Graph = { 
'Node11': ['Node12', 0.7], ['Node22', 0.5], ['Node21', 10000], ['Node20', 0.5], ['Node10', 0.7], ['Node00', 1.6], ['Node01', 1.3], ['Node02', 1.6], and then it continues for the next Node:
'Node12': ['Node13', 0.6], ['Node23', 0.5], ['Node22', 0.6], ['Node21', 0.9], ['Node11', 0.6], ['Node01', 0.5], ['Node02', 10000], ['Node03', 10000] 
} 
```

“节点”后面的数字等于节点的坐标。它首先向北行驶，然后顺时针方向行驶，总共有 8 个不同的方向。

SO：我如何编写一个像上面那样构造字典的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:45:43.517

您还没有提供任何代码，所以我不会为您编写整个解决方案。您的输入数据非常结构化，即所有内容都有固定长度，因此您可以使用固定长度循环：

```
Graph = {}
for nodeIdx in range(16):
    Node = {}
    for directionIdx in range(8):
        # construct your node list from TravelTime
    nodeNumber = # Figure out nodeNumber
    Graph[nodeNumber] = Node 
```

您应该能够弄清楚如何根据`nodeIdx`和从 TravelTime 中选择索引`directionIdx`。希望这是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:43:59.937

假设我们想要以这种格式输出字典：

Graph = { 'Node11':[['Node12':0.7],[ ],..., []] # 为字典中的每个键分配一个列表值

}

travelTime 是一个包含 8*16 值的列表。

我们可以粗略地处理这本字典的字符串构造。这可以是一个解决方案：

```
t = TravelTime
movements = [(0,1),(1,1),(1,0),(1,-1),(0,-1),(-1,-1),(-1,0),(-1,1)] # the order of movements described by you

output = '{'
for i in range(1,5):
        for j in range(1,5):
                output+="\n'Node"+str(i)+str(j)+"': [" #the key in the dictionary
                for k in range(8):
                        output+="["+"'Node"+str(i+movements[k][0])+str(j+movements[k][1])+"', "+str(t[((i+j)-2)*8+k])+"],"  #the value of dictonary
                output=output[:-1]+'],'  # remove last comma and close the list bracket
output=output[:-1]+'\n}'    #remove last comma and insert last dictionary bracket

Graph = eval(output)   # last step to use Graph as a dictionary 
```

它将输出类似（8次重复输入）：

```
{'Node11': [['Node12', 0.7], ['Node22', 0.5], ['Node21', 10000], ['Node20', 0.5], ['Node10', 0.7], ['Node00', 1.6], ['Node01', 1.3], ['Node02', 1.6]], 'Node13': [['Node14', 0.7], ['Node24', 0.5], ['Node23', 10000], ['Node22', 0.5], ['Node12', 0.7], ['Node02', 1.6], ['Node03', 1.3], ['Node04', 1.6]], 'Node12': [['Node13', 0.6], ['Node23', 0.5], ['Node22', 0.6], ['Node21', 0.9], ['Node11', 0.6], ['Node01', 0.5], ['Node02', 10000], ['Node03', 10000]], 'Node14': [['Node15', 0.6], ['Node25', 0.5], ['Node24', 0.6], ['Node23', 0.9], ['Node13', 0.6], ['Node03', 0.5], ['Node04', 10000], ['Node05', 10000]], 'Node24': [['Node25', 0.7], ['Node35', 0.5], ['Node34', 10000], ['Node33', 0.5], ['Node23', 0.7], ['Node13', 1.6], ['Node14', 1.3], ['Node15', 1.6]], 'Node32': [['Node33', 0.6], ['Node43', 0.5], ['Node42', 0.6], ['Node41', 0.9], ['Node31', 0.6], ['Node21', 0.5], ['Node22', 10000], ['Node23', 10000]], 'Node31': [['Node32', 0.7], ['Node42', 0.5], ['Node41', 10000], ['Node40', 0.5], ['Node30', 0.7], ['Node20', 1.6], ['Node21', 1.3], ['Node22', 1.6]], 'Node21': [['Node22', 0.6], ['Node32', 0.5], ['Node31', 0.6], ['Node30', 0.9], ['Node20', 0.6], ['Node10', 0.5], ['Node11', 10000], ['Node12', 10000]], 'Node22': [['Node23', 0.7], ['Node33', 0.5], ['Node32', 10000], ['Node31', 0.5], ['Node21', 0.7], ['Node11', 1.6], ['Node12', 1.3], ['Node13', 1.6]], 'Node23': [['Node24', 0.6], ['Node34', 0.5], ['Node33', 0.6], ['Node32', 0.9], ['Node22', 0.6], ['Node12', 0.5], ['Node13', 10000], ['Node14', 10000]], 'Node33': [['Node34', 0.7], ['Node44', 0.5], ['Node43', 10000], ['Node42', 0.5], ['Node32', 0.7], ['Node22', 1.6], ['Node23', 1.3], ['Node24', 1.6]], 'Node44': [['Node45', 0.7], ['Node55', 0.5], ['Node54', 10000], ['Node53', 0.5], ['Node43', 0.7], ['Node33', 1.6], ['Node34', 1.3], ['Node35', 1.6]], 'Node34': [['Node35', 0.6], ['Node45', 0.5], ['Node44', 0.6], ['Node43', 0.9], ['Node33', 0.6], ['Node23', 0.5], ['Node24', 10000], ['Node25', 10000]], 'Node42': [['Node43', 0.7], ['Node53', 0.5], ['Node52', 10000], ['Node51', 0.5], ['Node41', 0.7], ['Node31', 1.6], ['Node32', 1.3], ['Node33', 1.6]], 'Node43': [['Node44', 0.6], ['Node54', 0.5], ['Node53', 0.6], ['Node52', 0.9], ['Node42', 0.6], ['Node32', 0.5], ['Node33', 10000], ['Node34', 10000]], 'Node41': [['Node42', 0.6], ['Node52', 0.5], ['Node51', 0.6], ['Node50', 0.9], ['Node40', 0.6], ['Node30', 0.5], ['Node31', 10000], ['Node32', 10000]]} 
```

当然，这里有 5 个和 0 个节点可以在边缘到达。

# c++ - libpq 错误消息释放

> ID：13708993
> 
> 赞同：2
> 
> 时间：2012-12-04T17:56:42.897
> 
> 标签：c++, libpq

一个愚蠢的问题来了。`libpq`的`PQerrorMessage`函数返回一个`char const*`

```
char const* msg = PQerrorMessage(conn); 
```

现在既然它是`const`，我认为我不应该释放它，而且我从未在任何示例中看到这样做过。但是，它何时以及如何被释放？它怎么知道我什么时候用完了我的`msg`指针？

起初我认为一旦请求另一个错误消息，它就会被释放，但事实并非如此。

```
// cause some error
char const* msg1 = PQerrorMessage(pgconn);

// cause another error
char const* msg2 = PQerrorMessage(pgconn);

// still works
std::cout << msg1 << msg2 << std::endl; 
```

有人可以为我解释一下吗？

**编辑：**感谢 Dmitriy Igrishin

我在 postgresql 邮件列表上[问](http://postgresql.1045698.n5.nabble.com/libpq-error-message-deallocation-td5735032.html)了这个问题，结果证明我最初的假设是正确的。指针不应该是有效
的，不知何故我很幸运。`msg1`

**编辑：**来自 postgresql 文档

> ### PQerrorMessage
> 
> 返回由对连接的操作最近生成的错误消息。
> 
> ```
> char *PQerrorMessage(const PGconn *conn); 
> ```
> 
> 几乎所有的 libpq 函数都会在`PQerrorMessage`失败时设置消息。请注意，按照 libpq 约定，非空`PQerrorMessage`结果可以由多行组成，并且将包括一个尾随换行符。调用者不应直接释放结果。`PGconn`当关联的句柄传递给时，它将被释放`PQfinish`。不应期望结果字符串在`PGconn`结构上的操作中保持相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T02:33:41.717

正如文档所说，不要期望它的内容保持不变，只需将它们保存在 a 中`std::string`而不是存储指针。

```
// cause some error
std::string msg1 = PQerrorMessage(pgconn);

// cause another error
std::string msg2 = PQerrorMessage(pgconn);

// works all the time
std::cout << msg1 << msg2 << std::endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:33:06.613

一个返回指向分配内存的普通指针的库函数是非常老派和 C 风格的，但仍然有很多。除了文档之外，没有其他方法可以知道库设计者的意图是否是将分配存储的所有权转移给您的代码。现代库设计者可以返回一个 shared_ptr<> 以使他们对存储寿命的意图完全清楚，或者将字符串包装为 std::string，它还可以在后台处理分配和删除。

const char* 声明并没有真正说明存储寿命。相反，它说不要修改存储。对于返回分配存储的老式函数，您只需要知道删除存储与修改存储不同。老派函数可能想要返回一个 const char* 来让您知道只分配了这么多存储位置，如果您注销最后，就会出现混乱。

当然，这个函数可能会从静态表中返回数据，在这种情况下，您既不应该写入也不应该删除它。同样，当您使用普通指针时，没有办法知道。

# asp.net - 这个asp是否以某种方式编译？

> ID：13708995
> 
> 赞同：2
> 
> 时间：2012-12-04T17:56:49.517
> 
> 标签：asp.net

`asp`我有一个 aspx 文档（我对, `.net`, `aspx`, nada一无所知）。大多数情况下它是一个普通的 html 表结构，但有一些 asp 字符串似乎在插入某种动态内容。它们采用以下形式：

```
<asp:Image ID="imgTopImage" runat="server" ImageUrl="~/Images/topbar.jpg" />    
<asp:Label ID="lblStyleCaption" runat="server" CssClass="label_caption" Text="Theme: " Visible="false" />
<asp:DropDownList ID="dropStyles"  Width="150" runat="server" AutoPostBack="true" /> 
```

似乎每当我删除其中的一个时——比如带有`asp:Image`标签的行，我认为应该只是删除图像，当我加载页面时，我会遇到运行时错误。这是非常特别的。我的问题是，这是以某种方式编译的，这使它变得如此脆弱。即使只是更改`topbar.jpg`to也会`something.png`给我一个错误。我是否需要追踪从中编译的原始文件，还是我只是在以某种方式将我的更改搞砸的普通服务器端 asp(x?)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:03:09.343

ASPX 页面经过编译，这些标签引用服务器已知的对象，因此删除它们可能会导致错误。

**一、通俗的一些基础知识**

以 ASP 开头的标签：（例如，`<ASP:Button id="btnSubmit" runat="Server" Text="Click Me" />`）

不是标准的 html 按钮。它们是***服务器控件***。在生成发送到浏览器的 html 时，ASP.NET 运行时查看服务器控件并根据访问页面的浏览器创建适当的内容。

对于 Button 控件，它通常是标准的 html 按钮，但运行时也会生成 JavaScript 等来处理按钮的服务器端单击事件。

**为什么在删除控件时可能会看到错误：**

很多时候，编写的服务器端代码可以访问这些控件。例如，由于某些事件，开发人员可能决定更改 Text 或 Visible 属性。

如果是这种情况，并且您删除了`<asp:Button>`标记，那么将有服务器端代码引用一个不再存在于 aspx 页面中的对象，因此会出现错误。

更多关于服务器控制的链接：

*   [http://www.w3schools.com/aspnet/aspnet_controls.asp](http://www.w3schools.com/aspnet/aspnet_controls.asp)
*   （实际上，这个旧版本更适合新的 asp.net 开发人员：http: [//msdn.microsoft.com/en-us/library/zsyt68f1 (VS.71).aspx](http://msdn.microsoft.com/en-us/library/zsyt68f1(VS.71).aspx)
*   [http://support.microsoft.com/kb/306459](http://support.microsoft.com/kb/306459)

我还建议花一些时间观看基本视频或浏览[http://www.asp.net/get-started上的教程](http://www.asp.net/get-started)

* * *

我刚刚在您的问题中注意到了这一点：

> 即使只是将 topbar.jpg 更改为 something.png 也会给我一个错误。

这有点奇怪，但我至少知道它可能发生的一种方式......

通常，如果您包含不存在的图像或链接页面的相对 URL ，Visual Studio 会给您一个***警告（而不是错误）。***该警告不应阻止您进行编译。但是，Visual Studio 确实有一个设置，告诉它将警告视为错误。这将阻止它编译。这是如何设置的：

> 从 Project Settings> Configuration Properties 中选择构建设置并将“将警告视为错误”设置更改为 true。

如果您不希望将警告视为错误，只需将设置更改为 false。

# python - cx_oracle 和 python 2.7

> ID：13708998
> 
> 赞同：7
> 
> 时间：2012-12-04T17:57:07.267
> 
> 标签：python, python-2.7, cx-oracle

我正在使用 python 2.7 和 cx_oracle ( Windows x86 Installer (Oracle 10g, Python 2.7) ) 并且在设置下面这个简单的示例工作时遇到了麻烦：

```
import cx_Oracle
connection = cx_Oracle.connect('user/pass@someserver:port')
cursor = connection.cursor()
cursor.execute('select sysdate from dual')

for row in cursor:
    print row
connection.close() 
```

错误信息：

```
Traceback (most recent call last):
  File "C:\ORACON.py", line 1, in <module>
    import cx_Oracle
ImportError: DLL load failed: The specified module could not be found. 
```

现在，我所做的是：

1) 安装 cx_oracle 二进制文件；

2）从oracle网站下载instantclient_10_2并导出环境路径；

有谁知道我错过了什么？

感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-10T13:00:30.447

I was able to solve this problem with the following steps:

1.  Download **instantclient-basic-win32-10.2.0.5** from [Oracle Website](http://www.oracle.com/technetwork/topics/winsoft-085727.html)

2.  unzipped the into my c:\ with the name oraclient

3.  Created the directory structure C:\oraclient\network\admin to add the TNSNAMES.ORA

4.  Added the TNS_ADMIN env var pointing to C:\oraclient\network\admin

5.  Added the ORACLE_HOME env var pointing to C:\oraclient\

After that i used the following code:

```
import cx_Oracle

con = cx_Oracle.connect('theuser', 'thepass', 'your DB alias on your TNSNAMES.ORA file ')
cur = con.cursor()
if cur.execute('select * from dual'):
    print "finally, it works!!!"
else:
    print "facepalm"
con.close() 
```

I hope it helps someone.