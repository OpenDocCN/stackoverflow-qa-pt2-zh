# StackOverflow 问答 13186000-13186999

# php - 在对连续的ajax调用进行ajax调用后从数据库中获取php变量的值

> ID：13186009
> 
> 赞同：0
> 
> 时间：2012-11-01T21:46:47.380
> 
> 标签：php, jquery, ajax

```
var friendRequestURL = "scripts_for_profile/request_as_friend.php";
function addAsFriend(a,b) {
$("#add_friend_loader").show();
$.post(friendRequestURL,{ request: "requestFriendship", mem1: a, mem2: b,   thisWipit: thisRandNum } ,function(data) {
$("#add_friend").html(data).show().fadeOut(12000);
$("#friends").html('<div id="land"><a href="#" onclick="return false" onmousedown="toggleInteractContainers(\'cancel_request\');" >Cancel Request</a></div>').show();
}); 
}

function cancel_request(x) {
$.post(friendRequestURL,{ request: "cancel", reqID: x, thisWipit: thisRandNum } ,function(data) {
    $("#cancel_request").html(data).show().fadeOut(12000);
    $("#land").html('<div id="friends"><a href="#" onclick="return false"   onmousedown="javascript:toggleInteractContainers(\'add_friend\');">Add as Friend</a></div>').show();
});
} 
```

这是向人们发送朋友请求的功能，当发送请求时，“添加为朋友”选项更改为“取消请求”。

```
function toggleInteractContainers(x) {
    if ($('#'+x).is(":hidden")) {
        $('#'+x).slideDown(200);
    } else {
        $('#'+x).hide();
    }
    $('.interactContainers').hide(); 
```

}

这个函数调用切换按钮，就像用户点击“添加为朋友”然后它要求选项“是”或“取消”。

php代码是

```
<div id="land"><a href="#" onclick="return false" onmousedown="toggleInteractContainers(\'cancel_request\');" >Cancel Request</a></div>

<div id="friends"><a href="#" onclick="return false" onmousedown="javascript:toggleInteractContainers(\'add_friend\');">Add as Friend</a></div>

          <div class="interactContainers" id="add_friend" style="float:right; margin-right:100px; margin-top:0px;">
           Really?
            <a href="#" onClick="return false" onMouseDown="javascript:addAsFriend(<?php echo $logOptions_id; ?>, <?php echo $id; ?>);">Yes</a>
            <a href="#" onClick="return false" onMouseDown="javascript:toggleInteractContainers('add_friend');">cancel</a> 
      </div>

          <div class="interactContainers" id="cancel_request" style="float:right; margin-right:100px; margin-top:0px;">
           Really?
            <a href="#" onClick="return false" onMouseDown="javascript:cancel_request(<?php echo $requestID ; ?>)">Yes</a>
            <a href="#" onClick="return false" onMouseDown="javascript:toggleInteractContainers('cancel');">cancel</a> 
      </div> 
```

php 代码不在一个地方，而是分散在页面周围。我的问题是代码首先运行良好。就像用户点击“添加为朋友”一样，它会询问他们“真的”或“取消”。然后，如果用户单击“真的”，则“添加为朋友”更改为“取消请求”，并向用户发送请求。然后，如果用户在没有刷新页面的情况下点击“取消请求”，那么它也可以正常工作并询问“真的”或“取消”，如果用户点击“真的”，则请求被取消，但如果他点击“取消”，那么请求是没有取消。

所以基本上问题是如果发送请求并且页面没有刷新，那么请求 id ` 没有被更新，所以我们无法取消请求。

**无论如何我可以在不刷新页面的情况下取回 requestID 的值**

在 scripts_for_profile/request_as_friend.php 中，以下是将好友请求插入数据库的代码。

```
$sql = mysql_query("INSERT INTO friends_requests (mem1, mem2, timedate)     VALUES('$mem1','$mem2',now())") or die (mysql_error("Friend Request Insertion Error")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:53:38.907

[直接来自文档http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)的示例：

```
$.post("test.php", { name: "John", time: "2pm" },
   function(data) {
     alert("Data Loaded: " + data);
}); 
```

`data`是*test.php*的输出，它被发送回`$.post`函数的回调。因此，在您正在执行服务器端更新的 PHP 文件 *scripts_for_profile/request_as_friend.php* 中，您可以回显请求 ID，它将像上面的示例一样返回。

PHP 中的另一种方法是创建一个对象，然后对其进行 JSON 编码，这样当它返回时，您就可以在 Javascript 中使用 JSON。

```
<?php
   // Do some database stuff here
   ...

   // Create object
   $obj = new stdClass();

   // Store requestID in your object (however it is that you choose to get it)
   $obj->requestID = getRequestID();

   // Encode object as JSON and echo out
   $result = json_encode($obj);

   echo($result);
?> 
```

您可能还希望将标题设置为 json/text 类型。

# android - ListView 中一个 TextView 中的两个数组

> ID：13186011
> 
> 赞同：1
> 
> 时间：2012-11-01T21:46:48.590
> 
> 标签：android, listview, textview

我有一个问题很想得到答案。

我有两个数组，比方说：

```
String[] name = {"Name Nameson", "Second Name"};
String[] number = {"111 11 111", "222 22 222"}; 
```

我希望我的 ListView 将两个 TextView 合并到一个项目中。（我试图用图片来说明这一点）。

我设法得到 f.ex。用一个简单的方法将我的名字数组放入列表视图

```
lv.setAdapter(new ArrayAdapter<String>(this, R.layout.single_name, name)); 
```

我有我的 main.xml 和我的 ListView，我的布局文件夹中有 single_name.xml 和 single_number.xml。

由于我是该网站的新手，因此不允许添加图片，因此我将在此处尝试说明：

* * *

标题

* * *

（项目一）

名称 Nameson

111 11 111

* * *

（项目二）

第二个名字

222 22 222

* * *

这取决于联系人的数量。

任何帮助将不胜感激 ：）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:45:13.273

你必须建立自己的适配器。

您可以修改这个以供您使用，它使用查看器模式来提高性能。

```
public class WifiListAdapter extends BaseAdapter {

    private ArrayList<Wifi> entries;
    private Location location;
    private boolean withDistance;

    public static class ViewHolder{
        public TextView ssid;
        public TextView crypt;
        public TextView distance;

    }

    public WifiListAdapter(ArrayList<Wifi> entries, Location location) {
        this.entries = entries;
        this.location = location;
        withDistance = true;
    }

    public int getCount() {
        return entries.size();
    }

    public Wifi getItem(int position) {
        return entries.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        ViewHolder holder;
        if(convertView == null){
            vi =  MyApplication.getLayoutInflater().inflate(R.layout.wifi_list_item, null);
            holder = new ViewHolder();
            holder.ssid = (TextView)vi.findViewById(R.id.wifi_list_ssid);
            holder.crypt = (TextView)vi.findViewById(R.id.wifi_list_crypt);
            holder.distance = (TextView)vi.findViewById(R.id.wifi_list_distance);

            vi.setTag(holder);

        }
        else{
            holder = (ViewHolder)vi.getTag();
        }
        Wifi wifi = entries.get(position);

        holder.ssid.setText(wifi.ssid);

        StringBuilder cryptString = new StringBuilder(20);

        if(wifi.wep == 1)
            cryptString.append("WEP ");
        if(wifi.wpa == 1)
            cryptString.append("WPA ");
        if(wifi.wpa2 == 1)
            cryptString.append("WPA2 ");
        if(wifi.wps == 1)
            cryptString.append("WPS ");
        if(wifi.ess == 1)
            cryptString.append("ESS");

        String distanceString;
        if(withDistance) {
            float[] results = new float[1];
            Location.distanceBetween(location.getLatitude(), location.getLongitude(), wifi.lat, wifi.lng, results);
            distanceString = MyApplication.formatDistance(results[0]);
        } else
            distanceString = "unknown";

        holder.distance.setText(distanceString);

        holder.crypt.setText(cryptString.toString().trim());
        //holder.distance.setText(results[0] + "");

        holder.ssid.setTag(position);
        holder.crypt.setTag(position);
        holder.distance.setTag(position);

        return vi;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:04:52.777

您将需要构建一个自定义适配器以及一个自定义视图来表示列表中的每一行。

这是一个简单适配器的示例，用于具有 2 个文本视图和一个图像视图的列表视图。根据您认为合适的方式进行修改以包含您的标题并取出图像视图

```
package com.aquarius.customlistviewproject;

public class CustomListViewAdapter extends BaseAdapter{

 private ArrayList<String> album_names;

private ArrayList<String> num_photos;

 public Activity context;

public LayoutInflater inflater;

 public CustomListViewAdapter(Activity context, ArrayList<String> album_names ,     ArrayList<String> num_photos){

super();
this.album_names = album_names;
this.num_photos = num_photos;
this.context = context;
this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

}

public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

public int getCount() {
    // TODO Auto-generated method stub
    return album_names.size();
}

public class ViewHolder{

    ImageView thumbnail;
    TextView  title;
    TextView photos;
}

public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder;

    if(convertView == null){
        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.listview_row, null);

        holder.thumbnail = (ImageView)convertView.findViewById(R.id.imgViewLogo);
        holder.title = (TextView)convertView.findViewById(R.id.txtViewTitle);
        holder.photos = (TextView)convertView.findViewById(R.id.txtViewDescription);

        convertView.setTag(holder);
    }

    else
        holder = (ViewHolder)convertView.getTag();
        holder.thumbnail.setImageResource(R.drawable.imgview_drawable);

        holder.title.setText(album_names.get(position));
        holder.photos.setText(num_photos.get(position));
    return convertView;
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:52:02.767

您需要创建一个自定义适配器

```
ArrayAdapter<HashMap<String,String>> 
```

# asp.net-mvc - MVC4 外键约束阻止将插入发布到 SQL 数据库

> ID：13186013
> 
> 赞同：0
> 
> 时间：2012-11-01T21:46:51.733
> 
> 标签：asp.net-mvc, asp.net-mvc-4, ef-database-first

使用 MVC4 我试图将一列插入到具有两列复合键的链接表中。两列都是两个单独表中的主键。

Key1 是从 Web 表单中的隐藏字段中提取的，该字段由 URL 中传递的 id 生成。

Key2 是从第二个 PK 表的名称下拉列表中选择的值。

据我所知，这些值是正确的（它们出现在两个主键表中）。

有谁知道为什么我从 HttpPost Create 操作（主要是默认脚手架代码）中收到一个错误，告诉我与第一个 PK -> FK 约束存在冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:41:03.450

这里的错误是由控制器中“id”的命名引起的。需要记住我何时访问数据库值与返回视图值。我们可以把它归结为睡眠不足和对咖啡因的医疗禁令吗？

# google-maps - 地图中的街道着色

> ID：13186019
> 
> 赞同：-1
> 
> 时间：2012-11-01T21:47:14.010
> 
> 标签：google-maps, openstreetmap

我有一个我所在城市的数据库，其中包含一条街道的名称和一个代表平均人口密度的数字（从 1 到 5）。

我想在地图上表示这一点（不管是谷歌地图还是 OSM 或其他什么），我根据密度将街道从绿色变为红色。

问题我不知道如何给街道上色，甚至不知道如何在上面画一条折线。

有任何想法吗 ？

泰！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:48:20.207

如果您使用的是 Google 地图 APIv3，那么在地图上创建/绘制线条并不是一项艰巨的任务。Gmaps3 文档清楚地解释了使用它-

[https://developers.google.com/maps/documentation/javascript/overlays#Polylines](https://developers.google.com/maps/documentation/javascript/overlays#Polylines)

逻辑是将您的街道坐标（latlng）传递给一个数组，该数组可用于在地图上绘制一条线。此外，您可以轻松更改折线的颜色。对于如何实现这一点的想法，您可以拥有一个包含一组颜色的数组，例如 -

```
 var linecolors = [];
            linecolors[0] = '#3333FF';
            linecolors[1] = '#8A0808';
            linecolors[2] = '#B45F04';
            linecolors[3] = '#B18904'; 
```

然后根据密度值在创建折线时适当地从数组中获取颜色

**更新：**要查找街道坐标，您可能需要路线服务。

[查看路线服务](https://developers.google.com/maps/documentation/javascript/directions#DirectionsRequests)

您可以将地址或位置作为起点和终点传递给`directionsService.route()`并使用`travelMode DRIVING`。你得到了街道 -[示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-simple)

您可以使用 chrome 控制台-网络选项卡查看和存储接收到的坐标（您会找到下载的带有坐标的 js 文件）。

# jquery - 来自 iframe 的 window.open in new window/tab 在 osx 上的 safari 中不起作用

> ID：13186029
> 
> 赞同：1
> 
> 时间：2012-11-01T21:47:51.590
> 
> 标签：jquery, iframe, safari, window.open

我创建了一个 iframe 模块/小部件，它让有权访问自己的 html 代码的任何人都可以将这个东西放在他们的网站上。

一切似乎都可以在：Opera、Firefox 和 Chrome 中运行。但不是 Safari（在 OSX 上）。
*Windows 7 上的 IE 和 Firefox 也经过测试并且运行良好......*

iframe 模块/小部件是一个链式选择，其中最后一个选择应在选择时立即打开一个新窗口/选项卡。
为了防止在 iframe 中打开目标站点，我曾经`window.open('url','_blank')`在新窗口/选项卡中强制打开它。

这是此特定操作的代码：

```
var sel4th = 'select#ap_engine';

$(sel4th).change(function(){
    window.open('https://www.autopower.no?Page=Tuning&view=vehicle&type='+$(sel1st+' option:selected').attr('id')+'&id='+$(sel4th+' option:selected').val(),'_blank');
}); 
```

正如我在开头提到的，这段代码似乎在大多数浏览器中运行良好，但 Safari（在 OSX 上）除外。

我试过用`window.open()`积极`location.href='';`的结果代替；除了网站随后在 iframe 内打开...

我在[http://dev.thomaskile.me/?page=test-zone&module=Autopower-Iframe](http://dev.thomaskile.me/?page=test-zone&module=Autopower-Iframe)放置了一个工作演示，让你看看我在哭什么......

# asp.net - 我应该把这些图像变成一个精灵，如果是这样，我该怎么做？（包括图片）

> ID：13186033
> 
> 赞同：2
> 
> 时间：2012-11-01T21:48:12.180
> 
> 标签：asp.net, css, performance, sprite

我有一个带有客户页面的 asp.net (vb) 网站。在该页面上，我们的一些大客户有超链接徽标。每个徽标的大小都相同（w 207 h 119）。有 3 列和 5 行图像，总共 15 个徽标。

目前，图像是这样编码的——但我想我需要删除 asp 图像并只使用常规图像：

```
<td>
<asp:HyperLink ID="HyperLink15" runat="server" ImageUrl="~/images/clgm.jpg" 
NavigateUrl="http://www.gm.com" Target="_blank"    
itemprop="url">HyperLink</asp:HyperLink>
</td>
<td>
<asp:HyperLink ID="HyperLink16" runat="server" ImageUrl="~/images/clford.jpg" 
NavigateUrl="http://www.ford.com" Target="_blank" 
itemprop="url">HyperLink</asp:HyperLink>
</td> 
```

依此类推，适用于所有 15 个客户。速度和性能会更好吗（如果我将这些图像拆分成一张图像，通过减少 http 请求？假设是这种情况，我应该**将这些 asp:hyperlinks 和 asp:images 更改为常规的 html 链接和图像**吗？然后如何我精灵他们？我不太擅长css，所以我真的很感谢任何人在这方面可以提供的任何帮助。

如果需要，下面是它们的样子——同样是 3 列和 5 行（**这就是我更加困惑的地方**）：

![在此处输入图像描述](../Images/8b8d43c33fcba3d3225c49ee8c1636f3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:08:54.553

> 速度和性能会更好吗（如果我将这些图像拆分成一张图像，可以减少 http 请求？

是的，这将是一个普遍的性能提升。一个加载的图像与十五个加载的图像是一个很大的整体 HTTP 请求节省。

> 假设是这种情况，我应该将这些 asp:hyperlinks 和 asp:images 更改为常规的 html 链接和图像吗？

那里的 ASP 代码是有原因的吗？它是否在开发/生产服务器之间转换 HTML？如果没有，我真的认为不需要处理一个简单的 HTML 链接，因此它将节省几毫秒的处理时间来将其转换为 HTML。

> 然后我将如何精灵它们？

[CSS-Tricks.com 有一个很好的精灵教程](http://css-tricks.com/css-sprites/)。
[A List Apart 也有一篇很好的 sprite 文章](http://www.alistapart.com/articles/sprites)。

一般来说，你会做这样的事情：

1.  给每个`IMG`标签一个 ID，例如`id="logo-gm"`
2.  在 CSS 中，给每个精灵一个宽度/高度（这可以通过在容器级别应用来更容易）
3.  为每个唯一 ID 提供精灵图像的背景和位置，以便出现正确的徽标。

您的 CSS 可能看起来像这样，但您的实际 CSS 需求将取决于您自己的网站设计：

```
.logo-sprites img { 
  width: 207px, 
  height: 119px; 
}
#logo-gm{ 
  background: url(/path/to/img/logo-sprite.png) no-repeat 0 0; 
}
#logo-ford{ 
  background: url(/path/to/img/logo-sprite.png) no-repeat -207px 0; 
} 
```

您的 HTML 可能如下所示：

```
<ul class="logo-sprites">
    <li><img id="logo-gm" alt="GM Logo" /></li>
    <li><img id="logo-ford" alt="Ford Logo" /></li>
    ...
</ul> 
```

对于背景 CSS：

```
background: url(/path/to/img/logo-sprite.png) no-repeat -207px 0; 
```

表示`-207px`“x”值，减去宽度以将图像移动到下一个虚拟列。`0`表示 2D 平面的“y”值，减去高度以移动到下一行。从左上角开始是点 (0,0)。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T22:18:23.417

是的，精灵很好。在我看来，拥有你的精灵图像是大部分工作。

您现在可以使用一点 css 访问您的精灵。有关工作示例，请参见此处。 [http://jsfiddle.net/DWy2W/](http://jsfiddle.net/DWy2W/)

```
<style>
.sponsor{
    width:80px;
    height:50px;
    background-image: url(http://i.stack.imgur.com/m93cd.jpg);
}
.gm{
    background-position: 0px 0px;
}
.ford{
    background-position: -80px 0px;
}
.osi{
    background-position: -80px -50px;
}​
</style>
<a href="http://www.ford.com">
    <div class="sponsor ford"></div>
</a>
<a href="http://www.gm.com">
    <div class="sponsor gm"></div>
</a>
<a href="http://www.osi.com">
    <div class="sponsor osi"></div>
</a>​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T22:03:50.093

是的，减少http请求的数量绝对是个好主意。在您的情况下，如果您使用精灵，您基本上将 15 个 http 请求减少到 1 个。您不必为此使用任何图像标签，您可以使用一些 div 或 li 并使用 background-image css 属性来指定图像。所有元素都需要有不同的 css 类名，并且每个类都有特定的背景位置。检查这篇文章 [http://css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T22:26:01.947

考虑到精灵的数量和图像的标准尺寸，精灵绝对有用。如其他答案所述，它肯定不会伤害您！

要生成精灵，有许多可用的在线选项，例如[http://spritegen.website-performance.org/](http://spritegen.website-performance.org/)

在 VS.NET 中，您可以使用[CssSpriteGenreator](http://nuget.org/packages/CssSpriteGenerator)或[Talifun.web.CssSprite](http://nuget.org/packages/Talifun.Web.CssSprite) NuGet

# sql - 嵌套游标，代码不会更新游标之外的表

> ID：13186039
> 
> 赞同：0
> 
> 时间：2012-11-01T21:48:32.880
> 
> 标签：sql, cursor

我正在研究这个嵌套游标。我在 major_cursor 中的更新语句没有更新表。我知道所有的循环都在工作，因为打印语句打印了预期的内容，但 edu_suffix_stage_test 中没有任何更新。我希望有人有一个建议！

对于每个 id，都有一个专业的数据行，以及获得该学位的年份。我需要把它们串起来。

例如 REID 10013 有两个记录两个学位：

'38 年的土木工程和 '41 年的土木工程。

我需要构建 edusuffix，使其等于“Civil Engineering'38，Civil Engineering in '41”。最后，我在 edu_suffix_stage_test 中每个 reid 需要一个 edusuffix。

谢谢。

这是我的代码：

```
DECLARE @reid_outside nvarchar(20), @major nvarchar(50), @classof nvarchar(5),
 @edusuffix_inside varchar(80), @note nvarchar(50), @reid_inside nvarchar(20),
@edusuffix_outside varchar(80)

DECLARE education_cursor CURSOR FOR 
SELECT  reid, edusuffix
FROM edu_suffix_stage_test
where reid < 1005
--ORDER BY reid

OPEN education_cursor

FETCH NEXT FROM education_cursor 
INTO @reid_outside, @edusuffix_outside

WHILE @@FETCH_STATUS = 0
BEGIN

    SELECT @note = 'building edusuffix for ' 
    PRINT @note
    PRINT @reid_outside

    -- Declare an inner cursor based   
    -- on reid from the outer cursor.

    DECLARE major_cursor CURSOR FOR 
    SELECT v.reid, 
    v.EduMajor, v.EduClassOF
    FROM  re_education v
   WHERE v.REID = @reid_outside  -- Variable value from the outer cursor 
--order by v.REID 
FOR UPDATE of edusuffix

    OPEN major_cursor
    FETCH NEXT FROM major_cursor INTO @reid_inside, @major, @classof

    WHILE @@FETCH_STATUS = 0
    BEGIN

        SELECT @edusuffix_inside = @major +' '+ @classof +', '
        PRINT @edusuffix_inside

    update edu_suffix_stage_test
    set edusuffix = case when @edusuffix_outside = null then ''+ @edusuffix_inside 
            else @edusuffix_outside + ', '+@edusuffix_inside end
    from edu_suffix_stage_test a
where  -- a.reid = @reid_inside
current of education_cursor
Print ' updated edusuffix'

        FETCH NEXT FROM major_cursor INTO @reid_inside, @major, @classof
        END

    CLOSE major_cursor
    DEALLOCATE major_cursor

    FETCH NEXT FROM education_cursor 
    INTO @reid_outside, @edusuffix_outside
END 
CLOSE education_cursor
DEALLOCATE education_cursor 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:11:32.557

实际上游标没有任何问题。我的更新声明有问题！我不知道我在想什么，以这种方式比较 null 是行不通的。我也在研究更好的 case 语句，并将使用 isnull()。完成后我会发布它。

# css - 使用 CSS 将图像大小调整为当前文本高度

> ID：13186044
> 
> 赞同：11
> 
> 时间：2012-11-01T21:48:47.190
> 
> 标签：css

**上下文**：我正在尝试将方程的内联图像（PNG 文件）无缝插入网页。我知道这已经完成了，但我将其用作学习项目。因此，我对显示数学的库不感兴趣，而是对这个问题的一般答案感兴趣。

我希望图像能够自然地缩放它们的高度，以匹配*当前*文本高度的某个百分比，并使用 css 样式。我是网页设计的新手，但似乎我应该能够包含一种看起来像这样的样式：

```
height: 80% * parent.text_height 
```

纯CSS可以做到这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T22:56:29.540

Ems 是一个*相对*的度量单位，它取决于父元素的文本大小。1 em 大约是文本行之间的距离。因此，您可以尝试：

```
height: .8em; 
```

但请注意，内联元素（如普通的旧`img`标签）不接受高度规范。

# ruby - 红宝石谷歌图表问题

> ID：13186047
> 
> 赞同：1
> 
> 时间：2012-11-01T21:49:12.013
> 
> 标签：ruby, google-visualization, gchart

我正在按照此页面中的说明进行操作

[http://googlecharts.rubyforge.org/](http://googlecharts.rubyforge.org/)

这是我的代码

```
Gchart.line(:data => data,:axis_with_labels => ["x"],:axis_labels => ["0","15","30","45","60"], :format => 'file', :filename => "/path/to/file/#{stamp}.png") 
```

我希望在 x 轴上有一个带有标签的图表，但我得到了这个图表

![在此处输入图像描述](../Images/93084bb3e9a25bc794c00c5bef13cd32.png)

我在这里缺少什么？

**更新**：

我用另一对像这样的额外 [] 解决了这个问题

```
Gchart.line(:data => data,:axis_with_labels => ["x"],:axis_labels => [["0","15","30","45","60"]], :format => 'file', :filename => "/path/to/file/#{stamp}.png") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:11:28.590

文档上的示例有同样的问题，所以它看起来像一个 gem 问题。我不想深入研究源代码，但如果您没有与 gem 结婚，您可以随时尝试`gchart`使用`gem install gchart`.

以下是您将如何使用`gchart`.

```
require 'gchart'

chart = GChart.line do |g| 
  g.data = data

  g.axis(:bottom) do |a| 
    a.labels = ["0", "15", "30", "45", "60"]
  end 

  g.axis(:bottom) do |a| 
    a.labels = ["x"]
    a.label_positions = [50]
  end 

  g.write("/path/to/file/#{stamp}.png")
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T19:29:22.603

我通过切换到竖线分隔语法解决了这个问题。例如：

```
x_axis_labels = [1, 2, 3]
Gchart.line(:axis_labels => [x_axis_labels.join('|')], ...) 
```

可能是宝石中的错误。

# asp.net - 如何使 2 asp:Menu 控件在同一行渲染？

> ID：13186052
> 
> 赞同：0
> 
> 时间：2012-11-01T21:49:28.067
> 
> 标签：asp.net, css

我正在尝试在现有菜单控件的同一行中添加第二个菜单控件，但我无法做到。

```
<div class="clear hideSkiplink">
            <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                <Items>
                    <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/>
                    <asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/>
                </Items>
            </asp:Menu>
            <asp:Menu ID="SmallMenu" runat="server" CssClass="smallMenu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                <Items>
                    <asp:MenuItem NavigateUrl="~/Settings.aspx" Text="Settings"/>
                    <asp:MenuItem NavigateUrl="~/Admin.aspx" Text="Admin"/>
                </Items>
            </asp:Menu>
        </div> 
```

尝试使用 CSS 对其进行格式化，但它不起作用。第二个菜单出现在一个新行中。我在这里做错了什么？

```
div.menu
{
    padding: 4px 0px 4px 8px;
    float:left;
    width:500px;
}

div.smallMenu
{
    padding: 4px 8px 4px 0px;
    width: 300px;
    float: right;
} 
```

**编辑：**如果我将它们放在 div 中并将第二个浮动到右侧，但现在右侧菜单的一半出现在页面的右侧（外部），我可以使它们出现在同一行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:11:46.887

这听起来像是您必须使用浏览器的客户端调试工具进行调试的事情。从您的描述（右侧菜单的拆分）听起来好像CSS继承层次结构中更高的东西正在影响该DIV的定位。

您可以尝试的另一件事是进一步嵌套菜单：

```
<DIV>
  <DIV style="float:left;">
     <DIV style="float:right;">
        <asp:Menu />
     </DIV>
     <asp:Menu />
  </DIV>
</DIV> 
```

ETA： [这是](https://stackoverflow.com/questions/4941913/2-divs-aligned-side-by-side-how-to-make-right-div-fill-width-100)一个类似问题的帖子。前 2 个答案（在撰写本文时分别为 7 分和 5 分）有一些您可以尝试的东西和一些进一步的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T12:15:54.033

虽然我可能看不到这样做的充分理由，但请尝试使用 css 对两者进行样式设置 - 然后用 div 标签括起来。

同时，使用具有适当静态、动态和子级别值的单个菜单项，您可以完成相同的操作。

# java - 异步 InetSocketAddress 等效？

> ID：13186056
> 
> 赞同：3
> 
> 时间：2012-11-01T21:49:41.647
> 
> 标签：java, networking, asynchronous, dns, nio

我需要一个可以*异步*`java.net.InetSocketAddress`解析主机名的等价物。我正在开发一个轮询程序，该程序必须每五分钟无限期地解析并连接到超过 25,000 台服务器，而不会占用大量内存或 CPU。

 *这些服务器是从数据库中选择的，循环通过，连接通过[Netty 库](http://netty.io/ "网络库")调度。Netty 所做的一切都是高效且令人满意的，但是循环并创建`InetSocketAddress`实例以传递给 Netty 的线程受到 DNS 解析的瓶颈（因为在初始化时查找主机名`InetSocketAddress`）。我的临时解决方案是创建一个执行 DNS 解析的线程池，但我更喜欢实际的异步 DNS 解析库。

谢谢！*

# c++ - ostream 打印内存映射然后转储核心

> ID：13186060
> 
> 赞同：0
> 
> 时间：2012-11-01T21:49:50.350
> 
> 标签：c++, operator-overloading, iostream, coredump, memory-mapping

我有一个程序，我试图在其中实现优先级队列。在 PriorityQueue.h 文件中，我重载了 ostream 运算符 <<，但是当调用该函数时，从队列中打印出正确的值后，它会打印内存映射，然后转储我的核心并退出程序。

这是输出队列内容的调用（此行位于我的 main.cpp 文件中）；

```
cout << "Printing Q1" << endl;
cout << Q1 << endl; 
```

其中 Q1 是我的优先级队列，按顺序包含值 10、5 和 1。

这是我的 PriorityQueue.h 文件，底部是我定义重载 ostream 运算符的位置。

```
#include "ListT.h"
#include <ostream>
using namespace std;

//template <typename T>
template <typename T>
class PriorityQueue : private List<T>
{

public:

//constructor
PriorityQueue();
//add item to priority queue
void enqueue(T item);
//remove the item with the highest priority from the list
void dequeue();
//remove the item with the highest priority and assign its value to T& item
void dequeue(T& item);
//look at the item with highest priority and assign its value to T& item
void peek(T& item) const;
//return the size of the priority queue
int getSize() const;

//overloaded assignment operartor, performs deep copy of rhs
PriorityQueue<T>& operator =(PriorityQueue<T>& rhs);
};

//overloaded output operator
template <typename T>
ostream& operator <<(ostream& os, const PriorityQueue<T>& rhs)
{
    T item;
    PriorityQueue<T> rhsCopy = rhs;
    while(rhsCopy.getSize() > 0){
        rhsCopy.dequeue(item);
        os << item << endl;
    }

    return os;
}

//overloaded assignment operator/copy constructor
template <typename T>
PriorityQueue<T>& PriorityQueue<T>::operator =(PriorityQueue<T>& rhs) 
{
    int index = 1, size = rhs.getSize();
    T itemCopy;
    while(index < size){
        rhs->retrieve(index,itemCopy);  
        *this->enqueue(itemCopy);
        index++;
    }
    return *this;
}

#include "PriorityQueue.cpp" 
```

编辑：

这是程序的输出

```
********* TEST 1 ***********************************************
Printing Q1
10  
5
1

*** glibc detected *** ./lab8: double free or corruption (fasttop): 0x000000000132a030 ***
======= Backtrace: =========
/lib64/libc.so.6[0x397c27bfee]
./lab8[0x4020b7]
./lab8[0x401929]
./lab8[0x402447]
./lab8[0x4014e8]
./lab8[0x401430]
/lib64/libc.so.6(__libc_start_main+0xf5)[0x397c221735]
./lab8[0x401339]
======= Memory map: ========
00400000-00404000 r-xp 00000000 08:01 19792231                          
 /mnt/sda1    /c++/school/lab8/lab8/lab8
00603000-00604000 rw-p 00003000 08:01 19792231                            
/mnt/sda1    /c++/school/lab8/lab8/lab8
0132a000-0134b000 rw-p 00000000 00:00 0                                  
[heap]
397be00000-397be20000 r-xp 00000000 fd:01 165912                         
/usr/lib64    /ld-2.15.so
397c01f000-397c020000 r--p 0001f000 fd:01 165912                         
/usr/lib64/ld-2.15.so
397c020000-397c021000 rw-p 00020000 fd:01 165912                         
/usr/lib64/ld-2.15.so
397c021000-397c022000 rw-p 00000000 00:00 0 
397c200000-397c3ac000 r-xp 00000000 fd:01 165944                         
/usr/lib64/libc-2.15.so
397c3ac000-397c5ac000 ---p 001ac000 fd:01 165944                        
/usr/lib64/libc-2.15.so
397c5ac000-397c5b0000 r--p 001ac000 fd:01 165944                         
/usr/lib64/libc-2.15.so
397c5b0000-397c5b2000 rw-p 001b0000 fd:01 165944                         
/usr/lib64/libc-2.15.so
397c5b2000-397c5b7000 rw-p 00000000 00:00 0 
397d200000-397d2fa000 r-xp 00000000 fd:01 165973                         /usr/lib64/libm-2.15.so
397d2fa000-397d4f9000 ---p 000fa000 fd:01 165973                         /usr/lib64/libm-2.15.so
397d4f9000-397d4fa000 r--p 000f9000 fd:01 165973                         /usr/lib64/libm-2.15.so
397d4fa000-397d4fb000 rw-p 000fa000 fd:01 165973                         /usr/lib64/libm-2.15.so
3980a00000-3980a15000 r-xp 00000000 fd:01 165976                         /usr/lib64/libgcc_s-4.7.2-20120921.so.1
3980a15000-3980c14000 ---p 00015000 fd:01 165976                         /usr/lib64/libgcc_s-4.7.2-20120921.so.1
3980c14000-3980c15000 rw-p 00014000 fd:01 165976                         /usr/lib64/libgcc_s-4.7.2-20120921.so.1
3988a00000-3988ae5000 r-xp 00000000 fd:01 155500                         /usr/lib64/libstdc++.so.6.0.17
3988ae5000-3988ce4000 ---p 000e5000 fd:01 155500                         /usr/lib64/libstdc++.so.6.0.17
3988ce4000-3988cec000 r--p 000e4000 fd:01 155500                         /usr/lib64/libstdc++.so.6.0.17
3988cec000-3988cee000 rw-p 000ec000 fd:01 155500                         /usr/lib64/libstdc++.so.6.0.17
3988cee000-3988d03000 rw-p 00000000 00:00 0 
7fed62cd9000-7fed62cde000 rw-p 00000000 00:00 0 
7fed62cf4000-7fed62cf7000 rw-p 00000000 00:00 0 
7fff06836000-7fff06857000 rw-p 00000000 00:00 0                          [stack]
7fff06862000-7fff06863000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted (core dumped) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:39:16.480

您的代码最大的问题是您模板化了 PriorityQueue 类，然后尝试在不同的位置使用创建 ostream 函数。

```
template <typename T>
class PriorityQueue : private List<T>
{
...
} 
```

这是实现很好，但是当您创建 ostream 函数时，它无法将模板类型与您的类匹配。

```
template <typename T>
ostream& operator <<(ostream& os, const PriorityQueue<T>& rhs)
{
...
} 
```

记住模板是在编译时制作的。当你创建一个 PriorityQueue 对象（让我们说 int 作为参数）然后你做了所有的 PriorityQueue::(insert function here) 实现。当您尝试调用 ostream << PriorityQueue 时，从来没有创建一个函数来处理它，因为在编译时没有理由调用`ostream operator<<(ostream&, PriorityQueue<T>)`.

要解决这个问题，您需要做的就是在类定义中创建 ostream 函数。

```
template <typename T>
class PriorityQueue : private List<T>
{
    ...
    friend ostream& operator <<(ostream& os, const PriorityQueue<T>& rhs)
    {
        ...
    }
} 
```

现在，每次创建 PriorityQueue 对象时，它都会有自己的 ostream 函数。所以 a`PriorityQueue<int>`将有一个`ostream& operator <<(ostream&, const PriorityQueue<int>&)`功能，a`PriorityQueue<std::string>`将有一个`ostream& operator <<(ostream&, const PriorityQueue<std::string>&)`功能。

# android - 实施 ActionBarSherlock 后，导航图标不再触发 SlidingMenu

> ID：13186062
> 
> 赞同：3
> 
> 时间：2012-11-01T21:49:53.703
> 
> 标签：android, android-actionbar, actionbarsherlock

首次尝试 jfeinstein10 的 SlidingMenu 库时，在示例项目中，单击操作栏中的图标按钮会导致滑动菜单打开，然后再次单击时关闭。在实现 ActionBarSherlock 并让它运行（不抛出任何错误）之后，图标不再导致菜单出现。到目前为止，我已经更改了 SlidingMenu 库以扩展 SherlockActivity，而不是按照 SlidingMenu 阅读我的建议扩展 android Activity。我还在 BaseActivity 中更改了以下几行：

原来的：

```
// customize the ActionBar
    if (Build.VERSION.SDK_INT >= 11) {
        getActionBar().setDisplayHomeAsUpEnabled(true);
    } 
```

变成：

```
// customize the ActionBar
   getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

似乎按钮按下正在 LogCat 中注册，但它没有做任何事情。

我一直在尝试解决这个问题，只是想看看是否有人遇到过这个问题，或者对这两个/任何一个库都足够熟悉，以快速帮助查明我哪里出错了或者我忘了做什么。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:11:50.173

这是你的问题

```
import android.view.MenuItem 
```

您必须使用 Shearlock 菜单而不是 android 菜单。

删除 android MenuItem 导入并使用 Shearlock one`s

```
import com.actionbarsherlock.view.MenuItem;
import com.actionbarsherlock.view.Menu; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T05:13:36.530

我也遇到了这个问题，并且已经在导入 actionbarsherlock 菜单和 menuitem 库。

对我来说，诀窍是将以下内容添加到 onOptionsItemSelected 函数中，以便在触发主页按钮操作时调用相关的切换函数......

```
public boolean onOptionsItemSelected(MenuItem item){
        switch (item.getItemId())
        {
        case android.R.id.home:
            getSlidingMenu().toggle();
            return true;

        ...     
        }

        return super.onOptionsItemSelected(item);
    } 
```

# scala - 选项 getOrElse 类型不匹配错误

> ID：13186063
> 
> 赞同：20
> 
> 时间：2012-11-01T21:49:58.393
> 
> 标签：scala, implicit-conversion, type-mismatch

为什么这段代码会在 Scala 2.9.2 中引发类型不匹配错误？我期望`getOrElse`返回类型`String`，但实际上它返回`java.io.Serializable`：

```
scala> implicit def StringToOption(s:String) = Option(s)
StringToOption: (s: String)Option[String]

scala> "a".getOrElse("")
res0: String = a

scala> var opt:Option[String] = "a".getOrElse("")
<console>:8: error: type mismatch;
 found   : java.io.Serializable
 required: Option[String]
       var opt:Option[String] = "a".getOrElse("")
                                             ^ 
```

还行吧：

```
scala> implicit def StringToOption(s:String): Option[String] = Option(s)
StringToOption: (s: String)Option[String]

scala> var b:Option[String] = "a".getOrElse("") toString
b: Option[String] = Some(a) 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-01T22:47:11.883

这是不完整的树遍历的不受欢迎的情况。的签名`getOrElse`允许类型扩大，因此当它意识到`String`不是时`Option[String]`，它首先尝试在 上填写不同的类型归属`getOrElse`，即`Serializable`. 但是现在它有`"a".getOrElse[Serializable]("")`并且它被卡住了——我猜它没有意识到问题是在检查隐式之前使类型过于笼统。

一旦你意识到问题，有一个修复：

```
"a".getOrElse[String]("") 
```

现在打字机不会在 let's-widen 路径上徘徊，而是找到隐含的。

# python - 使用多个分隔符有效地拆分字符串并保留每个分隔符？

> ID：13186067
> 
> 赞同：23
> 
> 时间：2012-11-01T21:50:24.110
> 
> 标签：python, string

我需要使用每个字符作为分隔符`string.punctuation`来拆分数据字符串。`string.whitespace`

此外，我需要将分隔符保留在输出列表中，在它们在字符串中分隔的项目之间。

例如，

```
"Now is the winter of our discontent" 
```

应该输出：

```
['Now', ' ', 'is', ' ', 'the', ' ', 'winter', ' ', 'of', ' ', 'our', ' ', 'discontent'] 
```

如果不求助于嵌套循环的狂欢，我不确定如何做到这一点，这非常慢。我该怎么做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-01T22:08:24.247

与其他方法不同的非正则表达式方法：

```
>>> import string
>>> from itertools import groupby
>>> 
>>> special = set(string.punctuation + string.whitespace)
>>> s = "One two  three    tab\ttabandspace\t end"
>>> 
>>> split_combined = [''.join(g) for k, g in groupby(s, lambda c: c in special)]
>>> split_combined
['One', ' ', 'two', '  ', 'three', '    ', 'tab', '\t', 'tabandspace', '\t ', 'end']
>>> split_separated = [''.join(g) for k, g in groupby(s, lambda c: c if c in special else False)]
>>> split_separated
['One', ' ', 'two', '  ', 'three', '    ', 'tab', '\t', 'tabandspace', '\t', ' ', 'end'] 
```

我猜可以使用`dict.fromkeys`and`.get`而不是。`lambda`

[编辑]

一些解释：

`groupby`接受两个参数，一个可迭代的和一个（可选的）keyfunction。它循环遍历 iterable 并将它们与 keyfunction 的值分组：

```
>>> groupby("sentence", lambda c: c in 'nt')
<itertools.groupby object at 0x9805af4>
>>> [(k, list(g)) for k,g in groupby("sentence", lambda c: c in 'nt')]
[(False, ['s', 'e']), (True, ['n', 't']), (False, ['e']), (True, ['n']), (False, ['c', 'e'])] 
```

其中具有连续键函数值的术语被组合在一起。（实际上，这是一个常见的错误来源——人们忘记了如果他们想要对可能不连续的术语进行分组，他们必须首先按 keyfunc 排序。）

正如@JonClements 猜测的那样，我想到的是

```
>>> special = dict.fromkeys(string.punctuation + string.whitespace, True)
>>> s = "One two  three    tab\ttabandspace\t end"
>>> [''.join(g) for k,g in groupby(s, special.get)]
['One', ' ', 'two', '  ', 'three', '    ', 'tab', '\t', 'tabandspace', '\t ', 'end'] 
```

对于我们合并分隔符的情况。 如果值不在字典中，则`.get`返回。`None`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T21:56:33.583

```
import re
import string

p = re.compile("[^{0}]+|[{0}]+".format(re.escape(
    string.punctuation + string.whitespace)))

print p.findall("Now is the winter of our discontent") 
```

我不喜欢使用正则表达式来解决所有问题，但如果你想要它又快又短，我认为你在这方面没有太多选择。

我会解释正则表达式，因为你不熟悉它：

*   `[...]`表示方括号内的任何字符
*   `[^...]`表示任何*不在*方括号内的字符
*   `+`后面的意思*是前面的一个或多个*
*   `x|y`表示匹配`x`或`y`

因此，正则表达式匹配 1 个或多个字符，其中*所有*字符都必须是标点符号和空格，或者*都*不能。该`findall`方法查找模式的所有非重叠匹配。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-01T21:58:23.973

试试这个：

```
import re
re.split('(['+re.escape(string.punctuation + string.whitespace)+']+)',"Now is the winter of our discontent") 
```

[Python文档的](http://docs.python.org/2/library/re.html#re.split)解释：

> 如果在模式中使用捕获括号，则模式中所有组的文本也会作为结果列表的一部分返回。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-01T22:04:30.757

线性 ( `O(n)`) 时间内的解：

假设你有一个字符串：

```
original = "a, b...c    d" 
```

首先将所有分隔符转换为空格：

```
splitters = string.punctuation + string.whitespace
trans = string.maketrans(splitters, ' ' * len(splitters))
s = original.translate(trans) 
```

现在`s == 'a b c d'`。现在您可以使用`itertools.groupby`在空格和非空格之间交替：

```
result = []
position = 0
for _, letters in itertools.groupby(s, lambda c: c == ' '):
    letter_count = len(list(letters))
    result.append(original[position:position + letter_count])
    position += letter_count 
```

现在`result == ['a', ', ', 'b', '...', 'c', ' ', 'd']`，这就是您所需要的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T22:02:09.863

根据您正在处理的文本，您可以将分隔符的概念简化为“除字母和数字之外的任何内容”。如果这可行，您可以使用以下正则表达式解决方案：

```
re.findall(r'[a-zA-Z\d]+|[^a-zA-Z\d]', text) 
```

这假设您想要拆分每个单独的分隔符，即使它们连续出现，所以`'foo..bar'`会变成`['foo', '.', '.', 'bar']`. 相反，如果您期望`['foo', '..', 'bar']`，请使用`[a-zA-Z\d]+|[^a-zA-Z\d]+`（唯一的区别是`+`在最后添加）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T22:07:01.613

我的看法：

```
from string import whitespace, punctuation
import re

pattern = re.escape(whitespace + punctuation)
print re.split('([' + pattern + '])', 'now is the winter of') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-01T21:57:07.437

```
from string import punctuation, whitespace

s = "..test. and stuff"

f = lambda s, c: s + ' ' + c + ' ' if c in punctuation else s + c
l =  sum([reduce(f, word).split() for word in s.split()], [])

print l 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-01T22:18:04.390

对于任意的分隔符集合：

```
def separate(myStr, seps):
    answer = []
    temp = []
    for char in myStr:
        if char in seps:
            answer.append(''.join(temp))
            answer.append(char)
            temp = []
        else:
            temp.append(char)
    answer.append(''.join(temp))
    return answer

In [4]: print separate("Now is the winter of our discontent", set(' '))
['Now', ' ', 'is', ' ', 'the', ' ', 'winter', ' ', 'of', ' ', 'our', ' ', 'discontent']

In [5]: print separate("Now, really - it is the winter of our discontent", set(' ,-'))
['Now', ',', '', ' ', 'really', ' ', '', '-', '', ' ', 'it', ' ', 'is', ' ', 'the', ' ', 'winter', ' ', 'of', ' ', 'our', ' ', 'discontent'] 
```

希望这可以帮助

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-11-01T22:07:39.023

```
from itertools import chain, cycle, izip

s = "Now is the winter of our discontent"
words = s.split()

wordsWithWhitespace = list( chain.from_iterable( izip( words, cycle([" "]) ) ) )
# result : ['Now', ' ', 'is', ' ', 'the', ' ', 'winter', ' ', 'of', ' ', 'our', ' ', 'discontent', ' '] 
```

# php - 共享主机环境中的 sys_get_temp_dir

> ID：13186069
> 
> 赞同：22
> 
> 时间：2012-11-01T21:50:30.763
> 
> 标签：php, apache2, cgi, shared-hosting

*注意：这也适合超级用户。*

我正在使用 apache2 mpm itk 和 open_basedir 在共享主机上设置 PHP 5.3.10，每个用户可能看不到或更改另一个用户的文件。在 apache2 vhost 设置中，我添加了适当的条目来限制用户：

```
 AssignUserId     userA userA
    php_admin_value  open_basedir      /home/userA/www/
    php_admin_value  upload_tmp_dir    /home/userA/www/tmp/
    php_admin_value  session.save_path /home/userA/www/tmp/
    SetEnv           TMPDIR            /home/userA/www/tmp/ 
```

现在，第一行设置用于 apache2 的 linux 用户，接下来的三行定义 basedir、上传目录和会话保存路径在用户目录中。稍后我会回到最后一行。

现在解决问题：`sys_get_temp_dir()`应该还给 php 的临时目录，在 linux 系统上默认为 /tmp。出于安全原因，此目录应位于 userA 的 open_basedir 中。根据5.3.10的php-source，`sys_get_temp_dir()`-function使用环境变量TMPDIR得到这个目录：

```
 // php-src/main/php_open_temporary_file.c:217-219
     /* On Unix use the (usual) TMPDIR environment variable. */
     {
             char* s = getenv("TMPDIR"); 
```

这是上面配置中的第五行应该做的。但是，`sys_get_temp_dir()`只需返回全局系统目录，忽略环境变量（在 $_SERVER 中完美设置，也可以通过 查看`phpinfo()`）。

这会导致依赖于的各种软件出现一些令人讨厌的错误`sys_get_temp_dir()`，因为该目录不在`open_basedir`设置范围内。我尝试将变量直接设置为 $_ENV 和 $_SERVER 而不改变行为。我试过`putenv('TMPDIR=/home/userA/www/tmp')`没有变化。

但是，我可以通过将变量定义为 /etc/apache2/envvars 来更改输出 - 这对我来说没用，因为我希望每个 VHOST 都有自己的临时文件夹。

到目前为止，我发现的唯一解决方案是通过[runkit](http://no2.php.net/manual/en/function.runkit-function-redefine.php)`sys_get_temp_dir()`之类的扩展覆盖内部，并通过[auto_prepend_file](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)强制包含它。但是那个解决方案太脏了，我简直不敢相信，周围没有更好的解决方案。

**所以，我的问题：有没有办法改变`sys_get_temp_dir()`在 apache2 vhost 设置中设置的结果，而不用 runkit 重新实现函数？**

**编辑：** apache 版本是 2.2.22，我目前使用 mod_php。因为我必须手动添加所有用户，所以 fcgi 或类似的设置也是可能的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-06T15:34:54.660

`putenv('TMPDIR=/foo/bar')` *在 PHP内部*运行一个似乎能够影响`sys_get_temp_dir()`. 您可以`auto_prepend_file`安排一个指令来运行一段 PHP 来设置`TMPDIR`并避免弄乱`sys_get_temp_dir()`.

**编辑：**此外，您可以轻松地`putenv('TMPDIR='.ini_get('open_basedir').'/tmp')`将临时目录设置为您在问题中列出的目录结构。

有趣的是，事实证明这也有效（假设您保留`SetEnv TMPDIR /foo/bar`在 Apache 配置中）：

```
putenv('TMPDIR='.getenv('TMPDIR')); 
```

看起来像是无操作，但实际上*确实*对`sys_get_temp_dir()`. 我开始怀疑这一定是 PHP 中的一些环境处理错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T09:10:28.870

You have tagged your question [cgi](/questions/tagged/cgi "show questions tagged 'cgi'"), however you are making use of

```
 php_admin_value  open_basedir      /home/userA/www/
 ^^^^^^^^^^^^^^^ 
```

which is a setting for the apache module version of PHP, *Mod_PHP*. In that case PHP is loaded once the webserver starts.

Then you make use of [`SetEnv`](http://httpd.apache.org/docs/current/mod/mod_env.html#setenv):

```
 SetEnv           TMPDIR            /home/userA/www/tmp/ 
```

this is setting an *internal* environment variable. It is passed to other apache modules, however I think you need it with the request, not with the virtual server. I don't know it specifically, but I would assume according to your description that this environment variable is getting reset before the PHP script is invoked.

So more a comment than a real answer, but hopefully it helps you clarify some things.

I normally use FCGI for multi-user environments so that I can better separate the users. I never had problems with setting environment variables per each user. But that's just another comment, I don't want to say you have to use it, too. Just to highlight that you need to find out the right place within apache to set the environment variable so it is (still) set when the script is executed.

* * *

Also you might not be setting the right environment variable. According to [Apache Documentation about environment variables](http://httpd.apache.org/docs/current/env.html):

> Although these variables are referred to as *environment variables*, they are not the same as the environment variables controlled by the underlying operating system. Instead, these variables are stored and manipulated in an internal Apache structure. They only become actual operating system environment variables when they are provided to CGI scripts and Server Side Include scripts. If you wish to manipulate the operating system environment under which the server itself runs, you must use the standard environment manipulation mechanisms provided by your operating system shell.

You want to set the operating system environment variable for PHP. But you are setting the internal environment variable only.

*Mod_PHP* might import them to the script, so if you use `getenv('TMPDIR')` the PHP SAPI specific implementation is used - which does allow you to see those internal environment variables - however the `php_get_temporary_directory` function is not using it - it looks like.

Please add your Apache and PHP version to your question.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-09T23:27:39.813

根据[这个 - 4 岁 - 错误](https://bugs.php.net/bug.php?id=44972)，`sys_get_temp_dir()`不适用于虚拟主机；所以

*   您可以尝试仅使用已修复此问题的库（并为未修复的库打开错误）
*   或在您的 中附加`/tmp`（或您的操作系统使用的任何内容）`open_basedir`，因为[它可以包含多个目录](http://php.net/manual/en/ini.core.php#ini.open-basedir)（例如`include_path`-`;`在 Windows 上将其分隔，`:`否则）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-20T21:50:17.533

查看[PHP 源代码](https://github.com/php/php-src/blob/49d9b3013fb2ee18b59694aa36036104a4bdd6f2/main/php_open_temporary_file.c#L208)，`sys_get_temp_dir()`使用以下优先级：

1.  如果之前已经计算过它的值，则使用缓存的值。
2.  `sys_temp_dir`在 ini 配置中检查。
3.  在 Windows 上，使用[GetTempPathW](https://msdn.microsoft.com/en-us/library/windows/desktop/aa364992(v=vs.85).aspx) Win32 API 方法，根据其文档，使用以下方法（按此顺序）：
    1.  `TMP`环境变量指定的路径。
    2.  `TEMP`环境变量指定的路径。
    3.  `USERPROFILE`环境变量指定的路径。
    4.  Windows 目录。
4.  在 *nix 中，使用以下内容（按此顺序）：
    1.  `TMPDIR`环境变量。
    2.  `P_tmpdir`宏_
    3.  `/tmp`（根据消息来源，这是不应该发生的最后努力）。

这应该为您提供足够的选项来控制`sys_get_temp_dir`（例如`ini_set('sys_temp_dir', $tmpPath)`或`putenv('TMPDIR=/foo/bar')`其他人提到的）的结果，**除非**它是先前计算的，在这种情况下，据我所知，您是 SOL，并且将使用缓存的值（但我对PHP 所以很乐意听到其他）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-28T23:55:59.593

这是 php 5.2 中的一个错误 -[通过 php.ini 指定临时目录](https://bugs.php.net/bug.php?id=60524)
它在 5.5 中已修复
使用此作为临时解决方案：

```
<?php
putenv('TMPDIR=/path/to/your/tmp');
          ...your code here ... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-04T08:48:52.400

万一人们最终来到这里，谁的问题没有用 putenv 解决......

...对我来说，它可以像这样设置`sys_temp_dir`使用 php [`ini_set`](http://www.php.net/manual/en/function.ini-set.php)：

```
$tmpPath = realpath(__DIR__.'/../app/tmp');
ini_set('sys_temp_dir', $tmpPath); 
```

我在 windows8 机器上运行 PHP 5.5.9 (cli)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-28T16:03:39.473

看起来您可以更改返回的值`sys_get_temp_dir()`，我刚刚尝试过 apache 2.4 和 php 5.6.27。

在虚拟主机中添加`sys_temp_dir`：

```
php_admin_value sys_temp_dir "/var/www/alternc/f/fser/tmp" 
```

重新启动 apache，并使用以下命令在网页中打印该值`sys_get_temp_dir()`：

```
<?php 
echo sys_get_temp_dir () ; 
```

产生预期的输出：`/var/www/alternc/f/fser/tmp`.

# css - 为什么在 Firefox 16.0.2 下绝对位置不正确

> ID：13186073
> 
> 赞同：3
> 
> 时间：2012-11-01T21:50:48.167
> 
> 标签：css, firefox, position, css-position

请看这个[小提琴](http://jsfiddle.net/EW6Ax/13/)

升级到FF 16.0.2后，绝对位置有问题。

![在此处输入图像描述](../Images/f4e0d727b1394b473e57b4b4eafdf82b.png)

有什么建议么？

网页部分

```
<table>
<tr>
    <td>
        <div>
            Product 1
            <span>Button</span>
        </div>
    </td>
    <td>
        <div>
            Product 2
            <span>Button</span>
        </div>
    </td>
</tr> 
```

​</p>

CSS 部分

```
tr { height:250px; }
td {
    position:relative;
    width:200px;
    text-align:center;
    border:1px solid #999;
}
div {
    position:absolute;
    top:10px; bottom:10px; left:10px; right:10px; /* as padding */
}
span {
    position:absolute; bottom:0; left:50px;
    width:90px; height:20px;
    padding: 5px 0;
    background:#ccc;
}​ 
```

我想显示的是这样的：

![在此处输入图像描述](../Images/8463e0e35c64c76011e4e2008716ef5c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T22:13:14.137

问题是：在[CSS 2.1 Spec](http://www.w3.org/TR/CSS21/visuren.html#propdef-position)中，`position: relative`不适用于表格元素。

> 'position:relative' 对 table-row-group、table-header-group、table-footer-group、table-row、table-column-group、table-column、table-cell 和 table-caption 元素的影响未定义。

`<div>`一种解决方案是在内部添加另一个`<td>`并制作它`position: relative`。

[注意：无耻地回答来自：[https ://stackoverflow.com/a/6079254](https://stackoverflow.com/a/6079254)]

# ruby-on-rails - 无法批量分配受保护的属性：产品、用户

> ID：13186074
> 
> 赞同：0
> 
> 时间：2012-11-01T21:50:49.773
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

您好我正在一个应用程序中工作，您可以在其中为产品投票，并且从我的投票视图的新操作中我收到此错误：

> ActiveModel::MassAssignmentSecurity::VotesController#create 中的错误
> 
> 无法批量分配受保护的属性：产品、用户

我在 Rails 控制台上进行了测试，它可以工作。所以我不知道这是怎么回事。

以下是模型：

```
class Product < ActiveRecord::Base
  attr_accessible :title
  has_many :votes
  has_many :users, :through => :votes
  has_attached_file :photo, :styles => { :medium => "300x300" }

  before_save { |product| product.title = title.titlecase }

  validates :title, presence: true, uniqueness: { case_sensitive: false }
  validates :photo, :attachment_presence => true

end

class User < ActiveRecord::Base
    has_many :votes
    has_many :products, :through => :votes
    def self.from_omniauth(auth)
      where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
        user.provider = auth.provider
        user.uid = auth.uid
        user.name = auth.info.name
        user.oauth_token = auth.credentials.token
        user.oauth_expires_at = Time.at(auth.credentials.expires_at)
        user.save!
      end
    end
end

class Vote < ActiveRecord::Base
  attr_accessible :product_id, :user_id
  belongs_to :product
  belongs_to :user
end 
```

这是投票控制器

```
class VotesController < ApplicationController
  # GET /votes
  # GET /votes.json
  def index
    @votes = Vote.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @votes }
    end
  end

  # GET /votes/1
  # GET /votes/1.json
  def show
    @vote = Vote.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @vote }
    end
  end

  # GET /votes/new
  # GET /votes/new.json
  def new
    @vote = Vote.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @vote }
    end
  end

  # GET /votes/1/edit
  def edit
    @vote = Vote.find(params[:id])
  end

  # POST /votes
  # POST /votes.json
  def create
    @vote = Vote.new(params[:vote])

    respond_to do |format|
      if @vote.save
        format.html { redirect_to @vote, notice: 'Vote was successfully created.' }
        format.json { render json: @vote, status: :created, location: @vote }
      else
        format.html { render action: "new" }
        format.json { render json: @vote.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /votes/1
  # PUT /votes/1.json
  def update
    @vote = Vote.find(params[:id])

    respond_to do |format|
      if @vote.update_attributes(params[:vote])
        format.html { redirect_to @vote, notice: 'Vote was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @vote.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /votes/1
  # DELETE /votes/1.json
  def destroy
    @vote = Vote.find(params[:id])
    @vote.destroy

    respond_to do |format|
      format.html { redirect_to votes_url }
      format.json { head :no_content }
    end
  end
end 
```

这是新的投票视图

```
<%= form_for(@vote) do |f| %>
  <% if @vote.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@vote.errors.count, "error") %> prohibited this vote from being saved:</h2>

      <ul>
      <% @vote.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :product %><br />
    <%= f.text_field :product %>
  </div>
  <div class="field">
    <%= f.label :user %><br />
    <%= f.text_field :user %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

请我真的需要你的帮助来解决这个问题，很难找到一个 has_many 的教程：通过包含完整的 MVC 示例，我认为我的问题已经出现，但我不知道。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:15:56.627

如果您仔细查看，该错误消息会告诉您所有需要知道的信息。

```
ActiveModel::MassAssignmentSecurity::Error in VotesController#create

Can't mass-assign protected attributes: product, user 
```

您可能不熟悉“批量分配”这个术语。它在创建时分配一个或多个对象属性。即`in VotesController#create`。当不受保护时，批量分配使您容易受到黑客的攻击，他们将值分配给您网站表单中的任何和所有对象属性，无论您是否打算授予访问权限。

这就是`attar_accessible`进来的地方。它迫使您明确说明您的用户应该有权访问的模型的哪些属性。任何未作为符号传递到宏中的将`protected attributes`与`Can't mass-assign protected attributes: product, user`.

创建模型时设置的脚手架`attr_accessible :product_id, :user_id`，但它不知道您将使用对象而不是 id 值来分配这些。

您可以通过以下两种方法之一来解决此问题。

更改您的表单，以便像这样`params`分配类似哈希的变量

```
params[vote][product_id] 
```

或更改您的模型，例如

```
attr_accessible :product, :user 
```

# trigger.io - Facebook UI 对话框回调未触发

> ID：13186075
> 
> 赞同：2
> 
> 时间：2012-11-01T21:50:51.507
> 
> 标签：trigger.io

我正在使用 forge.facebook.ui 向用户发送应用请求。对话按预期打开并选择正确的用户来发送邀请。但是，当用户单击“发送”时，似乎永远不会触发回调（成功或错误）。下面的代码示例：

```
forge.facebook.ui(
    {
      title: 'Invite your Friend,
      method: 'apprequests',
      to: 1234567,
      message: 'Sign up'
    },
    function(response) {
      forge.logging.info(response); // Never Called
    },
    function (e) {
      forge.logging.info('facebook failed: ' + JSON.stringify(e)); // Never Called
    }
  ); 
```

在过去，这是正常工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:53:21.197

这确实是最近的 Forge 版本中引入的一个错误，我刚刚提交了一个修复程序，它将在下一个 Forge 平台版本中进行，我们应该在明天（06/11/2012）进行部署。

# r - 在 R 中使用非常大的数据集

> ID：13186077
> 
> 赞同：2
> 
> 时间：2012-11-01T21:51:16.503
> 
> 标签：r

我正在使用从 Oracle 数据库下载的非常大的数据集。数据框有大约 2100 万行和 15 列。我的操作系统是 windows xp（32 位），我有 2GB 内存。短期内我无法升级我的 RAM 或我的操作系统（它正在工作，我需要几个月才能获得一台像样的电脑）。

```
library(RODBC)
sqlQuery(Channel1,"Select * from table1",stringsAsFactor=FALSE) 
```

我到这里已经坚持了通常的“无法将 xMb 分配给向量”。我发现了一些关于使用该`ff`软件包的建议。我很想知道是否有人熟悉 ff 包可以告诉我它是否对我有帮助。你知道另一种解决内存问题的方法吗？64 位解决方案会有帮助吗？感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T22:09:17.790

以我的经验，分块处理数据几乎总是对处理大数据有很大帮助。例如，如果您计算时间平均值，则在任何给定时间只需一个时间步长在内存中。您已经将数据保存在数据库中，因此获取子集很容易。或者，如果您不能轻松地分块处理，您可以随时尝试获取数据的子集。重复分析几次，看看您的结果是否对您采用的子集敏感。最重要的是，一些聪明的想法可以让你在 2 Gb 的 RAM 上走得更远。如果您需要更具体的建议，您需要提出更具体的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T10:05:27.357

如果您正在使用包 ff 并将数据保存在 SQL 中，则可以使用包[ETLUtils](http://cran.r-project.org/web/packages/ETLUtils/index.html)轻松地将它们放入 ff 中，请参阅文档以获取使用 ROracle 时的示例。

根据我的经验， ff 非常适合您正在使用的数据集类型（21 Mio 行和 15 列） - 事实上，您的设置对 ff 来说有点小，除非您的列包含大量将转换为的字符数据因素（意味着您的所有因素水平都应该能够适合您的 RAM）。包 ETLUtils、ff 和包[ffbase](http://cran.r-project.org/web/packages/ffbase/index.html)允许您使用 ff 在 R 中获取数据并对其进行一些基本统计。根据您对数据和硬件的处理方式，您可能必须在构建模型时考虑采样。我更喜欢在 R 中保存我的数据，使用 ff 中的工具（如分块）或 ffbase 包中的工具基于样本和评分构建模型。

缺点是您必须习惯您的数据是 ffdf 对象这一事实，这可能需要一些时间 - 特别是如果您是 R 新手。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T21:57:53.053

抱歉，我无能为力`ff`，但关于 RAM 的主题：我不熟悉 R 数据帧的内存使用情况，但为了论证，假设每个单元格占用 8 个字节（例如双精度浮点数或长整数）。

2100 万 * 15 * 8 字节 = 大约 2.5 GB。

**更新**并查看以下评论​​；这个数字恐怕是低估了！

所以你真的可以使用更多的 RAM，而 64 位机器会很有帮助，因为 32 位机器被限制为 4GB（并且不能完全使用它）。

可能值得尝试数据集的一个子集，以便您知道可以使用现有 RAM 加载多少，然后推断以估计您实际需要多少。如果您可以将数据细分并分块处理，那就太好了，但是很多问题并不容易提交给这种方法。

另外，我一直假设您需要所有列！显然，如果您可以以任何方式过滤数据以减小大小（例如删除任何不相关的列），那么这可能会有很大帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T22:08:02.233

还有另一个非常相似的[问题](https://stackoverflow.com/questions/11055502/recommended-package-for-very-large-dataset-processing-and-machine-learning-in-r/)。特别是，处理数据的一种方法是将其写入文件，然后将内存区域映射到它（例如，参见[mmap](http://cran.r-project.org/web/packages/mmap/vignettes/mmap.pdf)包）。

# css - CSS：H1 之后 H2 的下边距

> ID：13186082
> 
> 赞同：2
> 
> 时间：2012-11-01T21:51:33.117
> 
> 标签：css, header, margin

如果 h1 和 h2 直接相互跟随，我正在寻找一种方法来为 H1 提供更多边距底部（或 H2 更多边距顶部）。因此，在 #1 的情况下，应该应用正常的边距，但在 #2 的情况下，我喜欢稍微改变边距（以在 H1 和 H2 之间提供更多的“空气”）。尝试使用 h1 h2 {margin...} 和 h1>h2 {margin...} 但到目前为止没有成功。

情况1

```
<h1>heading 1</h1>
<p>text</p>
<h2>heading 2</h2>
<p>text</p> 
```

案例#2

```
<h1>heading 1</h1>
<h2>heading 2</h2>
<p>text</p> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T21:54:47.377

```
h1 + h2 {
  margin: whatever;
} 
```

+ 选择器是相邻的选择器。它只会影响与前一个元素相邻的元素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T21:58:49.957

尝试类似：

```
h1+h2{
   margin-top:10px;
} 
```

它使用相邻的选择器。有关浏览器兼容性信息，请参阅[http://www.quirksmode.org/css/selectors/](http://www.quirksmode.org/css/selectors/)。​</p>

# sqlite - SQLite 用替换词更新字段

> ID：13186083
> 
> 赞同：1
> 
> 时间：2012-11-01T21:51:47.410
> 
> 标签：sqlite

我不擅长 SQLite，所以出现了一个问题：如何从字段中更新某些`/media/Soft/furtherpath`列`/media/username/Soft/furtherpath`？问题是，从 10.10 更新到 ubuntu 12.10 后，我无法让我的 shotwell 库工作，因为较新的 ubuntu`/media/username/...`以某种方式用于安装。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:31:59.727

```
UPDATE some_table
SET certain_column = substr(certain_column, 1, 6) ||   -- /media
                     '/username' ||
                     substr(certain_column, 7)         -- /Soft...
WHERE certain_column LIKE '/media/%' 
```

# c - 我的 C 代码中的逻辑错误

> ID：13186086
> 
> 赞同：2
> 
> 时间：2012-11-01T21:51:51.577
> 
> 标签：c

我是初学者，刚学C；所以，请耐心等待我。

我正在尝试编写一个非常简单的程序，它遍历一个字符串，计算每个单词中的字符，然后用它们的字符数替换这些单词。我的问题是我陷入了无限循环，无法弄清楚原因！这是代码：

```
#define NEWLINE '\n'
#define SPACE ' '

int main(int argc, char *argv[]) {
  int character;
  int count = 0;

  printf("\nType in a sentence of any lenght, then hit ENTER!\n");
  character = getchar();

  while (character != NEWLINE) {

     while ((character != SPACE)  || (character != NEWLINE)) {
        count++;
        character = getchar();
     }

  printf("%d ", count); 
  count = 0;

  if (character != NEWLINE) {
     character = getchar();
     }
  }  

 printf("\n");
 system("PAUSE"); 
 return 0;
 } 
```

感谢所有帮助过我的人！我想我回去再研究一下逻辑运算符。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T21:54:28.577

```
while ((character != SPACE)  || (character != NEWLINE)) {
    count++;
    character = getchar();
} 
```

这将无限循环，因为相反：

```
(character == SPACE)  && (character == NEWLINE) 
```

永远是假的。

我怀疑你的意思是

```
while ((character != SPACE)  && (character != NEWLINE)) {
    count++;
    character = getchar();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T21:57:06.423

你有一个永远真实的条件：

```
(character != SPACE)  || (character != NEWLINE) 
```

例如：

```
character = ' ':  false or true => true
character = '\n': true or false => true 
```

您应该将其更改为：

```
(character != SPACE) && (character != NEWLINE) 
```

那应该可以解决您的无限循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T21:54:18.390

替换`||`为`&&`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T21:58:07.700

替换 || (OR) 与 && (AND) 因为 while 循环将始终为真，因此它永远不会跳出循环。如果你更换它应该可以工作。

# objective-c - 在 iOS6 上使用 MPMovieViewController 播放视频时出错

> ID：13186089
> 
> 赞同：1
> 
> 时间：2012-11-01T21:52:11.467
> 
> 标签：objective-c, cocoa-touch, video, ios6

> **可能重复：**
> [MPMoviePlayerViewController 生成大量错误](https://stackoverflow.com/questions/14224476/mpmovieplayerviewcontroller-generating-lots-of-errors)

我正在尝试在 iOS6 上使用 MPMovieViewController 播放电影，并在我的控制台中收到以下消息：

```
Nov  1 17:44:19 Kamrans-MacBook-Pro.local HoosierAgToday[58188] <Error>: CGContextSaveGState: invalid context 0x0
Nov  1 17:44:19 Kamrans-MacBook-Pro.local HoosierAgToday[58188] <Error>: CGContextClipToRect: invalid context 0x0
Nov  1 17:44:19 Kamrans-MacBook-Pro.local HoosierAgToday[58188] <Error>: CGContextTranslateCTM: invalid context 0x0
Nov  1 17:44:19 Kamrans-MacBook-Pro.local HoosierAgToday[58188] <Error>: CGContextDrawShading: invalid context 0x0
Nov  1 17:44:19 Kamrans-MacBook-Pro.local HoosierAgToday[58188] <Error>: CGContextRestoreGState: invalid context 0x0
2012-11-01 17:44:19.412 HoosierAgToday[58188:c07] [MPAVController] Autoplay: Disabling autoplay for pause
2012-11-01 17:44:19.412 HoosierAgToday[58188:c07] [MPAVController] Autoplay: Disabling autoplay
2012-11-01 17:44:19.422 HoosierAgToday[58188:c07] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 1, on player: 0)
2012-11-01 17:44:19.630 HoosierAgToday[58188:c07] [MPAVController] Autoplay: Enabling autoplay
2012-11-01 17:44:19.634 HoosierAgToday[58188:c07] [MPAVController] Autoplay: Likely to keep up or full buffer: 0
2012-11-01 17:44:19.635 HoosierAgToday[58188:c07] [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up.
2012-11-01 17:44:19.637 HoosierAgToday[58188:c07] [MPAVController] Autoplay: Enabling autoplay
2012-11-01 17:44:19.638 HoosierAgToday[58188:c07] [MPCloudAssetDownloadController] Prioritization requested for media item ID: 0
2012-11-01 17:44:19.646 HoosierAgToday[58188:c07] [MPAVController] Autoplay: Enabling autoplay 
```

当我尝试从以下 URL 播放它时： http: [//clips.vorwaerts-gmbh.de/big_buck_bunny.mp4](http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4)它可以工作。当我下载这个确切的文件并将其放在我们的服务器上时[http://loadoutnews.co/hat/default/download/post.videoios.afa1cc6b18aa0e03.6269675f6275636b5f62756e6e792e6d7034.mp4](http://loadoutnews.co/hat/default/download/post.videoios.afa1cc6b18aa0e03.6269675f6275636b5f62756e6e792e6d7034.mp4)它不能正常工作并给我这些错误。如果需要，我确保 URL 有效并且正确地进行了 % 转义。这是我必须播放视频的代码：

```
//video 5
        NSDictionary *dict = [list objectAtIndex:indexPath.row];
        NSString *escapedValue = [NSString stringWithFormat:@"%@%@",@"http://loadoutnews.co/hat/default/download/",[dict objectForKey:@"videoios"]];
        escapedValue = [escapedValue stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        MPMoviePlayerViewController *player = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:escapedValue]];
        [player.view setBounds:self.view.bounds];
        [self presentModalViewController:player animated:YES];
        //I have tried it with and without this line below
        [player.moviePlayer play];
        [player release]; 
```

我觉得奇怪的是它确实在给定的初始链接上播放视频，但不在我们的服务器上。如果你转到我发送的链接，视频文件是有效的并且是同一个......我不明白为什么它不起作用。谢谢你的帮助！

# arrays - 如何创建一个以变量命名的空数组并仅通过变量名引用它来使用它？

> ID：13186090
> 
> 赞同：-4
> 
> 时间：2012-11-01T21:52:18.907
> 
> 标签：arrays, variables, powershell, powershell-2.0, named

如何创建一个以变量命名的空数组并**仅通过变量名引用它来使用它？**

例如名为**空的数组**

```
$empty = @()

$empty -is [array]
True 
```

相对：

```
$arrayname='empty'
${$arrayname}=@()

$empty -is [array]
False 
```

**和**

```
$empty+='hello' 
```

相对

```
${$arrayname}+='hello' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:33:54.617

也许你想要这个：

```
$arrayname='empty'

$empty -is [array]
False

Invoke-Expression  "`$$arrayname = @()"

$empty -is [array]
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:14:48.377

我宁愿使用[PSObject](http://blogs.msdn.com/b/mediaandmicrocode/archive/2008/11/26/microcode-powershell-scripting-tricks-select-object-note-properties-vs-add-member-script-properties.aspx)

```
$empty = New-Object PSObject -property @{
    ArrayName = "String"
    ArrayValue = @()
} 
$empty.pstypenames.Insert(0,"SuperArray")
// Here you add the generic function to manipulate your array
$empty | Add-Member ScriptProperty Add {$this.ArrayValue} { $this.ArrayValue = $args} 
```

可以优化数据结构以更好地满足您的要求。

# javascript - 更改推送通知的主干模型

> ID：13186095
> 
> 赞同：0
> 
> 时间：2012-11-01T21:53:15.980
> 
> 标签：javascript, backbone.js, pusher

我正在尝试将简单的 Backbone 应用程序和 Pusher 放在一起。我拥有的是项目模型的骨干集合。应用程序可以从 Pusher 接收其中一些模型已更新的事件。

我想将我的代码与 Pusher 分离，以便我创建了应用程序范围的通知器，它扩展了主干事件、接收推送器事件并发布了主干事件。

现在我的问题是如何更新集合中的模型？我正在考虑在创建时向 Collection 提供 Notifier 并绑定到 Notifier 的事件函数，该函数将检查（具有事件数据）哪个模型被更改，在自己的集合中搜索这样的模型，相应地更新它并发布“更改”事件，以便视图可以做出相应的反应。

这是一个好方法吗？在集合中搜索正确的模型可能效率不高，所以我也在考虑为每个模型实例提供通知器，让所有模型在更改时得到通知，并实现一些只有一个目标模型实例应该做出反应的条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:22:13.557

有几个库可以帮助您将 Pusher 与 Backbone 一起使用：

*   [反推者](https://github.com/pusher/backpusher)
*   [骨干活](https://github.com/bluedevil2k/backbone-live)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:35:01.940

在客户端：

```
var channel = pusher.subscribe('xxxx');        

channel.bind('xxxx', function(data) { //xxxx could be a json data object 
  var obj = $.parseJSON(data); 
  var mdl.coll.get(obj.id);

  if (mdl) { 
    mdl.set(obj, {silent: true}); //         console.dir(mdl.changed);
  }
} 
```

# sql - 将 SQL 表达式转换为 VB

> ID：13186096
> 
> 赞同：2
> 
> 时间：2012-11-01T21:53:25.903
> 
> 标签：sql, vb.net, visual-studio-2010

我正在尝试在 VB 中转换此 SQL 语句，但没有成功。任何人都可以帮忙吗？

```
declare @factor as int
declare @Date as varchar(30)
set @factor = (Cast(Convert(datetime, @Date) as int) - 33975)- 
    (28 * ((Cast(Convert(datetime, @Date) as int) - 33975)/28)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:17:29.763

首先，您需要将字符串值解析为`DateTime`. 然后计算nr。从 1900-01-01 到该日期的天数。

```
Dim str = "2005-11-14"
Dim dateValue = DateTime.ParseExact(str, "yyyy-MM-dd", 
                  CultureInfo.InvariantCulture, DateTimeStyles.None)
Dim baseDate = New DateTime(1900, 1, 1)
Dim intValue = (dateValue - baseDate).TotalDays 
```

您可以应用数学运算

```
Dim factor = intValue - 33975 - (28 * (intValue - 33975) / 28) 
```

# c# - 如何更改 |DataDirectory| 的位置 在用 C# 构建的 ASP.NET 应用程序中

> ID：13186100
> 
> 赞同：4
> 
> 时间：2012-11-01T21:53:37.773
> 
> 标签：c#, asp.net, datadirectory

> **可能重复：**
> [在 C# 中为 Access DB 使用连接字符串中的相对路径](https://stackoverflow.com/questions/13169526/using-a-relative-path-in-connection-string-for-access-db-in-c-sharp)

这是我在 web.config 中的当前连接字符串

```
<connectionStrings>
   <add name="dbConnection" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\GeauxEatAccessDB.accdb"/>
</connectionStrings> 
```

但应用程序不是在 App_Data 文件夹中查找，而是在

```
"C:\\Program Files (x86)\\Common Files\\Microsoft Shared\\DevServer\\10.0" 
```

这是不对的。如何以及在哪里可以更改 |DataDirectory| 的默认位置 成为项目文件夹内 App_Data 的相对路径？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T22:05:16.693

您需要调用 AppDomain.SetData 方法来指定 |DataDirectory| 的位置。指着：

```
AppDomain.CurrentDomain.SetData("DataDirectory", "YourPath"); 
```

# java - Java SE OOP、类、对象、方法

> ID：13186102
> 
> 赞同：0
> 
> 时间：2012-11-01T21:53:45.130
> 
> 标签：java, oop

大家好，我需要一些帮助。我必须上课日和天气，每个课程都有自己的领域。上课日及其字段（日期、温度和评论）。类天气及其字段（季节和评论）。这是主要问题：查找并显示以下数据：平均温度、最高温度的日子、最长评论的日子。所以我已经很容易地编写了这两个类的基本结构，但是对于我堆叠的逻辑结构，请一些建议或帮助如何解决它或改进它我是编程新手。这是上课日：

```
public class Day {
    private Date date;
    private int temperature;
    private ArrayList<String> comments = new ArrayList<String>() ;
    Weather weather;

    Day( Date date, int temperature, String comment){
        this.date=date;
        this.temperature=temperature;
        this.comments.add(comment);
    }
    public Date getDate(){
        return  date;
    }
    public void setDate(Date date){
        this.date=date;
    }
    public int getTemperature(){
        return  temperature;

    }
    public  void setTemperature(int temperature){
        this.temperature=temperature;

    }
    public ArrayList<String> getComments() {
        return comments;

    }
    public void addComment(String comment){
        this.comments.add(comment);
    }
    public String longestComment() {
        int length = 0;
        String longestComment = "";
        for ( String comment : comments )
        {
            if ( comment.length() > length )
            {
                length = comment.length();
                longestComment = comment;
            }
        }
        return longestComment;
    }

    public  static  void main (String args []){
        Calendar c=new GregorianCalendar();

        Day day=new Day(c.getTime(),20,"Today is normal temperature");
        day.addComment("Tomorrow is going to be the highest degree for ever in this summer");
        day.addComment("Yesterday was the coldest temperature");
        day.addComment("Next week is going to be the coldest temperature ever");
        day.addComment("In the early years of the ice era there was only highest degree of temperature for ever");
        System.out.println("the longest comment is:");
        System.out.println( day.longestComment() );
    }
} 
```

这里是天气类：

```
public class Weather {
private  String season;
    private String comments;
        Day [] day;

     public   Weather(String season, String comments, Day [] day){
         this.comments=comments;
         this.season=season;
         this.day=day;
       }

   public static void main (String args []){

   }
    public String getSeason(String season){
        return season;
    }
    public void setSeason(String season){
                    this.season=season;
    }
    public String getComments(String comments){
        return comments;
    }
          public void setComments(String comments){
              this.comments=comments;
          }
    public Day getDay(Day  day){
        return day ;
    }
    public void setDay(Day [] day){
        this.day=day;
    }
    public int averageTemp(int aver){
    for(int t=0; t<day.length;t++){
        if (aver==((day.length)/2)){

          return day[t].getTemperature();
    }
    }
        return 0;
    }
  public void maxTemp(){
      int max=0;

      for (int i=0; i<day.length;i++){

      }

  }
    public void findLongestComment(String comment){

   System.out.println("Comment\""+comment+"\":");
} 
```

你会声明哪种类型的日期？请解释一下，因为这是我的应用程序的逻辑部分，它会影响应用程序的未来开发 感谢大家的耐心和理解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:06:27.100

平均温度可能更像是：

```
public int averageTemp()
{
  int totalTemp=0;
  for (Day day1 : day)
  {
    totalTemp+=day1.getTemperature;
  }
  return totalTemp/day.length;
} 
```

对于最高温度，您对最长评论所做的事情有正确的想法。只需使用相同的逻辑：遍历所有条目，将每个条目与迄今为止找到的最高值进行比较，如果这个更高，则成为迄今为止的最高值。

# php - 如何从 xml 中获取带有 PHP 属性的数据？

> ID：13186118
> 
> 赞同：-1
> 
> 时间：2012-11-01T21:54:52.253
> 
> 标签：php, xml, xmlreader

我有一个具有以下架构的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<languages>
<language type="persian" abbr_type="fa">
    <menu>
        <home></home>
        <contact></contact>
        <about></about>
        <style></style>
    </menu>
    <title>
        <home></home>
        <contact></contact>
        <about></about>
        <style></style>
        <list></list>
        <biography></biography>
        <picture></picture>
        <movie></movie>
    </title>
    <about></about>
    <welcome></welcome>
</language>
<language type="english" abbr_type="en">
    <menu>
        <home></home>
        <contact></contact>
        <about></about>
        <style></style>
    </menu>
    <title>
        <home></home>
        <contact></contact>
        <about></about>
        <style></style>
        <list></list>
        <biography></biography>
        <picture></picture>
        <movie></movie>
    </title>
    <about></about>
    <welcome></welcome>
</language> 
```

如果语言标签的属性是“波斯语”，我想获取**标题数据。**

我怎样才能从 XML 中获取一系列数据呢？有没有办法获取数据并放入数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:58:56.953

> 有没有办法获取数据并放入数组中？

是的，您可以使用 DOMDocument > [http://php.net/manual/en/class.domdocument.php](http://php.net/manual/en/class.domdocument.php)。它创建了树状结构，您可以在其中轻松找到您要查找的内容。

例子

```
$xml = new DOMDocument();
$xml->loadXML($xmlString);
$xmlNodeArray = $xml->getElementsByTagName('language');
foreach ($xmlNodeArray as $element) {
    if($element->getAttribute('type') == "persian") {
         // do something with that element
    }
} 
```

# php - php类成员数组被不当缓存

> ID：13186119
> 
> 赞同：1
> 
> 时间：2012-11-01T21:54:53.547
> 
> 标签：php

假设我有以下内容：

```
<?php
class MyClass {
  public $validThings = array("Stuff");

  //checks to see if $input is in the array $validThings
  public function valid($input) {
    return is_int(array_search($input, $this->validThings);
  }
} 
```

我们预计会出现以下情况：

```
$myClassInstance->valid("Stuff");//finds 'Stuff'
$myClassInstance->valid("Things");//doesn't find 'Things' 
```

现在假设我将 $validThings 的初始化代码更改为：

```
public $validThings = array("Stuff", "Things"); 
```

我们期望：

```
$myClassInstance->valid("Stuff");//finds 'Stuff'
$myClassInstance->valid("Things");//finds 'Things' 
```

但是，我看到的行为是第二​​个调用仍然找不到“事物”。我怀疑这与 PHP 的缓存方式有关，但我不知道具体是什么。它是高度可重现的：我可以在代码中以任何方式更改数组，只要我不在函数调用中修改该成员变量，它将保持原始值......*即使在 apache 硬重启时也是如此*。

有没有人看到这个可以解释这种行为？

澄清一点：这里发生了某种形式的缓存行为，这与 php 的一些实现细节或围绕 php 的缓存有关。这不是代码错误；这只是此代码揭示的一种行为。此外，我们正在使用[hidef](http://pecl.php.net/package/hidef)，这可能是一个突出的细节和 php 5.2.10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:58:52.377

你的方法没有返回它应该返回的任何东西

```
 return array_search($input, $this->validThings); 
```

`array_search`如果元素是第一个元素，有时可以返回`0`，这可以在 PHP 中解释为`false`有时，因此您应该使用此示例代替；

```
class MyClass {
    public $validThings = array("Stuff");
    public function valid($input) {
        return array_search($input, $this->validThings) !== false;
    }
}

$myClassInstance = new MyClass();
var_dump($myClassInstance->valid("Stuff")); //true
var_dump($myClassInstance->valid("Things")); //false 
```

**编辑**

或者你可以使用更好的窗台

```
 public function valid($input) {
        return in_array($input, $this->validThings);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:22:43.177

事实证明，问题在于它`$validThings`被序列化并加载回对象中。这应该可以从它在 apache 重新启动时持续存在的事实中诊断出来；与其说是缓存问题，不如说是持久存在。

PHP 不会在反序列化时重新初始化类实例，因此成员变量是第一次创建时保存的任何内容，即使类已更改。

# mapping - 使用编码器和机器人来映射线路电路

> ID：13186120
> 
> 赞同：1
> 
> 时间：2012-11-01T21:55:01.553
> 
> 标签：mapping, robotics, robot

我正在寻找一种方法来使用来自驱动我的机器人车轮的电机的编码器信息来映射线路电路。机器人使用单个光传感器沿着一条线四处导航，在它的第二圈，我希望它能够识别它在电路中的位置。我已经阅读了很多关于 SLAM 的内容，但不确定我是否可以使用 robotsc 并且仅使用编码器信息来实现这一点。

任何有关解决此问题的最佳方法的帮助和建议将不胜感激。n

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:37:29.070

您可以使用[里程计](http://en.wikipedia.org/wiki/Odometry)模型来预测机器人的运动。假设在飞机上具有首选前进方向的车辆，您将拥有`(x,y,theta)`您的状态，然后根据您的编码器值进行状态转换。该功能的外观实际上取决于您的机器人的配置。我记得[《自主移动机器人简介》](http://books.google.de/books/about/Introduction_to_Autonomous_Mobile_Robots.htm)对这个主题有很好的报道。不过，您会在网上找到很多示例。同时定位和映射 (SLAM) 将使用概率里程计模型，然后根据您的传感器执行一些校正。起初我认为这对您的设置不太可行，但实际上我认为是这样。使用基于 Occupancy-Grid 的 Rao-Blackwellized 粒子过滤器可能会给您一些不错的结果。我没有使用[CAS Toolbox](http://openslam.org/cas-rnt.html)，但看看它似乎是一个不错的起点。

# java - 计算飞镖可能完成的递归函数

> ID：13186129
> 
> 赞同：2
> 
> 时间：2012-11-01T21:56:06.323
> 
> 标签：java, algorithm, math, recursion

我正在尝试用 Java 编写一个递归函数，以确定如何完成飞镖游戏。基本上，你最多有 3 支飞镖，你必须以双打结束。

如果你不知道 Double Out 完成的 Darts x01 游戏规则，这个问题很难理解……让我试着解释一下。为简单起见，我暂时不考虑公牛的眼睛。

**规则：**

1) 你有三个飞镖，你可以在 1 到 20 号投掷

2) 单打可以有单打、双打或三打

例如，您可以打：单 20 = 20 分或双 20 = 40 分或三联 20 = 60 分

3）一回合最多可以得到180分（3x三倍20=3*60=180）。任何高于 180 的东西都是不可能的。这并不意味着低于 180 IS 的任何事情都是可能的。例如 179 也是不可能的，因为下一个最好的分数是triple20+triple20+triple19 = 167

4) 通常，您从 501 开始，然后投掷 3 支飞镖，直到您正好剩下 0 分。

5) 现在，在 Double Out 中，要求最后一镖击中 Double Out

例如，如果您还剩 180 分，您将无法完成，因为您的最后一镖必须是双镖。所以最大值（忽略靶心）=triple20 + Triple20 + double20 = 160 如果你的分数是 16，你可以通过击中双 8 来完成使用 1 镖。另一个例子，如果你的分数是 61，你可以打三重17 + 双5（= 51 + 10）

**当前代码**

无论如何，以下是我到目前为止所拥有的。我知道这远非我所需要的，但无论我尝试什么，我总是卡住。也许有人可以分享他对另一种方法的想法

```
private class Score{
    int number;    // the actual number, can be 1...20
    int amount;    // multiplier, can be 1, 2 or 3
    public Score(int number, int amount){
        this.number = number;    // the actual number, can be 1...20
        this.amount = amount;    // multiplier, can be 1, 2 or 3
    }
    public int value()
    {
        return number * amount;   // the actual score
    }

    public void increment()
    {
        if(this.amount == 0)
            this.amount = 1;

        this.number++;
        if(this.number >= 20)
        {
            this.number = 0;
            this.amount++;

            if(this.amount >= 3)
                 this.amount = 3;
        }
    }
}

public ArrayList<Score> canFinish(int desired, ArrayList<Score> score){

        // If this is the case -> we have bingo
        if(eval(score) == desired) return score;

        // this is impossible -> return null
        if(eval(score) > 170) return null;

        // I can't figure out this part!!
        Score dart3 = score.remove(2);
        Score dart2 = score.remove(1);

        if(dart2.eval() < 60){
            dart2.increment();
        }
        else if(dart3.eval() < 60){
            dart3.increment();
        }

        score.add(dart2);
        score.add(dart3);

        return canFinish(desired, score);
}

public int eval(ArrayList<Score> scores)
{
    int total = 0;
    for(Score score : scores){
        total += score.value();
    }
    return total;
} 
```

我想简单地打电话：

```
ArrayList<Score> dartsNeeded = new ArrayList<Score>();
dartsNeeded.add(new Score(16, 2));   // Add my favourite double
dartsNeeded.add(new Score(0, 0));
dartsNeeded.add(new Score(0, 0));

// and call the function
dartsNeeded = canFinish(66, dartsNeeded);

// In this example the returned values would be:
// [[16,2],[17,2],[0,0]] -> 2*16 + 2*17 + 0*0 = 66
// So I can finish, by throwing Double 17 + Double 16 
```

因此，如果不可能完成，该函数将返回 null，但如果有任何可能的完成，我会用 3 个飞镖来获取 ArrayList，我需要达到我想要的分数......

**简短的摘要**

问题是上面的代码只有助于找到 1 个 dart，而不是两个 dart 的组合。所以 canFinish(66, darts) 有效 -> 但 canFinish(120, darts) 给出了 StackOverflow 异常。对于 120，我希望得到类似 Triple20、double14、double16 或任何其他有效组合的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:52:01.840

如果您记录 canFinish 尝试的分数，您会发现有很多可能性被遗漏了。值 20 被忽略，一个 dart 在修改其他 dart 值之前完全递增。

相反，它可以递归地解决如下。`canFinish(desired, score)`返回可以添加到`score`总计的飞镖的任何组合`desired`。用你知道的飞镖列表或任何空列表来调用它以找到任何可能性。

```
canFinish(desired, score)
    if darts sum to desired, return desired
    if there are fewer than 3 darts in score
        for each possible value of a dart (if it's the last dart, check for a double)
            add dart to score
            if canFinish(desired, score) != null
                return canFinish(desired, score)
            end
            remove dart from score
        end
    end
    return null
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:24:17.183

我最终使用了以下功能。哪种是开关语句和递归的组合......希望有人发现它和我一样有用

```
public static void getCheckout(int score, int fav_double, ICheckOutEvent listener)
{
    if(score > 170) return;
    if(score == 170) listener.onCheckOut("T20 T20 Bull");

    ArrayList<Dart> darts = new ArrayList<Dart>();
    darts.add(new Dart(fav_double, 2));
    darts.add(new Dart(0,0));
    darts.add(new Dart(0,0));

    darts = getDarts(score, darts);

    if(darts != null) {
        listener.onCheckOut(toString(darts));
        return;
    }

    for(int dubble = 20 ; dubble >= 1 ; dubble--)
    {
        if(dubble == fav_double) continue;

        darts = new ArrayList<Dart>();
        darts.add(new Dart(dubble, 2));
        darts.add(new Dart(0,0));
        darts.add(new Dart(0,0));
        darts = getDarts(score, darts);

        if(darts != null){
            listener.onCheckOut(toString(darts));
            return;
        }
    }   
}

public static ArrayList<Dart> getDarts(int desired, ArrayList<Dart> score)
{
    Dart dart1 = canFinish(desired);
    if(dart1 != null){
        score.set(0, dart1);
        return score;
    }

    int rest = desired - score.get(0).value();
    Dart dart2 = canScore(rest);
    if(dart2 != null)
    {
        score.set(0, score.get(0));
        score.set(1, dart2);
        return score;
    }

    Dart temp = score.get(1);

    if(temp.increment())
    {
        rest = desired - score.get(0).value() - temp.value();
        score.set(0, score.get(0));
        score.set(1, temp);

        Dart dart3 = canScore(rest);
        if(dart3 != null)
        {
            score.set(2, dart3);
            return score;
        }

        if(rest > 60 && temp.increment()) 
            temp.estimate(rest / 2);

        score.set(1, temp);
        return getDarts(desired, score);
    }

    return null;
}

public static int eval(ArrayList<Dart> scores)
{
    int total = 0;
    for(Dart score : scores){
        total += score.value();
    }
    return total;
}

public static Dart canFinish(int points)
{
    switch(points)
    {
        case 2: return new Dart(1, 2);
        case 4: return new Dart(2, 2);
        case 6: return new Dart(3, 2);
        case 8: return new Dart(4, 2);
        case 10: return new Dart(5, 2);
        case 12: return new Dart(6, 2);
        case 14: return new Dart(7, 2);
        // etc. etc.
        case 40: return new Dart(20, 2);
        case 50: return new Dart(25, 2);
    }

    return null;
}

public static Dart canScore(int points)
{
    switch(points)
    {
        case 1: return new Dart(1, 1);
        case 2: return new Dart(2, 1);
        case 3: return new Dart(3, 1);
        // etc. etc.
        case 20: return new Dart(20, 1);
        case 21: return new Dart(7, 3);
        case 22: return new Dart(11, 2);
        //case 23: impossible
        case 24: return new Dart(12, 2);
        // etc. etc.
        case 57: return new Dart(19, 3);
        case 60: return new Dart(20, 3);
    }

    return null;
} 
```

为了完整起见，这是我作为助手创建的 Dart 类

```
private static class Dart{
    int number;
    int amount;
    public Dart(int number, int amount){
        this.number = number;
        this.amount = amount;
    }
    public int value()
    {
        return number * amount;
    }

    public void estimate(int estimate)
    {
        Dart temp = canScore(estimate);
        if(temp != null){
            this.amount = temp.amount;
            this.number = temp.number;
        } else{
            this.number = estimate / 3;
            if(number >= 19)
                this.number = 19;

            this.amount = 3;
        }
    }

    public boolean increment()
    {   
        if(this.amount == 3 && this.number == 20)
            return false;

        if(this.amount == 0)
            this.amount = 1;

        this.number++;
        if(this.number >= 20)
        {
            this.number = 20;
            this.amount++;

            if(this.amount >= 3){
                this.amount = 3;
            }
        }

        return true;
    }

    public String toString()
    {
        return "["+number+","+amount+"]";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-05T16:59:40.493

```
class RecursiveDartboard {

    public Set<Out> outsFor(int target) {
        HashSet<Out> outs = new HashSet<>();

        for (Score doubleScore : doubles()) {
            List<Score> scores = new ArrayList();
            scores.add(doubleScore);

            outs.addAll(recursiveOutsFor(target, scores)
                .stream()
                .filter(Optional::isPresent)
                .map(Optional::get)
                .collect(toList())
            );
        }

        return outs;
    }

    private List<Optional<Out>> recursiveOutsFor(int target, List<Score> scores) {
        List<Optional<Out>> outs = new ArrayList<>();

        Out possibleOut = new Out(scores);
        if (possibleOut.target() == target) {
            outs.add(of(possibleOut));
        } else if (scores.size() == 3) {
            outs.add(empty());
        } else {
            for (Score score : allPossibleScores()) {
                List<Score> nextScores = new ArrayList<>();
                nextScores.addAll(scores);
                nextScores.add(score);
                outs.addAll(recursiveOutsFor(target, nextScores));
            }
        }

        return outs;
    }
} 
```

# ajax - MVC 3 Ajax 返回区域的部分视图

> ID：13186130
> 
> 赞同：2
> 
> 时间：2012-11-01T21:56:09.490
> 
> 标签：ajax, asp.net-mvc-3, razor, partial-views

我正在尝试通过 ajax 返回部分视图。我的代码如下所示，当局部视图不在某个区域时它可以正常工作。

```
[HttpPost]
public ActionResult SearchLogsAjax(string searchParams)
{
    // Do some searching
    return PartialView("LogResults", searchResults);
} 
```

首次打开页面时会呈现部分视图。当我按下对 ActionMethod 进行 ajax 调用的搜索按钮时，就会出现问题。如果它在管理区域中，我会收到经典视图未找到错误。

```
The partial view 'LogResults' was not found or no view engine supports the searched locations. The following locations were searched:

~/Views/Log/LogResults.aspx 
~/Views/Log/LogResults.ascx 
~/Views/Shared/LogResults.aspx 
~/Views/Shared/LogResults.ascx 
~/Views/Log/LogResults.cshtml 
~/Views/Log/LogResults.vbhtml 
~/Views/Shared/LogResults.cshtml 
~/Views/Shared/LogResults.vbhtml 
```

为什么它没有在当前区域的管理区域下查看？有什么方法可以让我指定我想要的区域名称，例如`new { area = "Admin" }`

另一方面，当我将鼠标移到代码中的部分视图名称上时，ReSharper 会显示我期望的视图。

![在此处输入图像描述](../Images/db6d64e983dd4a388a3b10d3494a54be.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:07:32.547

您可以使用 RouteValuesDictionary 参数和与您建议的语法相同的语法来指定所需的区域名称

```
new { area = "Admin" } 
```

但对我来说更棘手的部分是*获得正确的方法签名*（意味着我打算使用的签名），因为有多种选择，很容易获得错误的签名并且在语法上仍然是正确的。

在这种情况下，我认为您想要签名：

```
public static MvcHtmlString ActionLink(
    this AjaxHelper ajaxHelper,
    string linkText,
    string actionName,
    RouteValueDictionary routeValues,
    AjaxOptions ajaxOptions
) 
```

因此，将您当前拥有的（您没有发布的）Ajax.ActionLink 修改为如下内容：

```
@Ajax.ActionLink( "Link Text", "YourAction", "YourController", new { area = "YourArea" }, new AjaxOptions() { *the ajaxoptions you've been using* } ) 
```

希望有帮助。

# node.js - Node.JS、Express 和 Heroku - 如何处理 HTTP 和 HTTPS？

> ID：13186134
> 
> 赞同：9
> 
> 时间：2012-11-01T21:56:40.293
> 
> 标签：node.js, heroku, express

我有一个非常普通的 Express 应用程序 - 简单的服务器逻辑、视图、大量客户端 JS。我必须做很多 AJAX 请求。其中一些需要通过 HTTPS 协议进行保护（有些不需要）。

所以，我的服务器应该同时使用 HTTP 和 HTTPS。它也应该适用于本地机器（通常使用 nodemon 运行）和 Heroku。

据我了解，Heroku 为您提供了一个您可以监听的端口（process.env.PORT），并通过代理处理所有请求（因此，您的应用程序正在监听此端口，而不是担心原型 - 对吧？ )

那么，我做对了吗 - 我应该为开发机器和 Heroku 提供一些不同的代码？

像

```
...
app = express()
...

if process.env.NODE_ENV == 'production'
  app.listen(process.env.PORT)
else
  https = require('https')
  http = require('http')
  http.createServer(app).listen(5080) # some local port
  options = {
    key: fs.readFileSync('key.pem'), 
    cert: fs.readFileSync('cert.pem') # my self-signed files
  }
  https.createServer(options, app).listen(5443) # some different local port 
```

这是处理这个问题的正确方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-29T04:30:50.463

对于 Coffeescript 挑战，这里是 Guard 的答案转换为 Javascript 的版本。我采用了不同的方法来拆分 if else 语句。

```
var express = require('express');
var http = require('http');
var https = require('https');
var fs = require('fs');
var privateKey = fs.readFileSync('./config/localhost.key').toString();
var certificate = fs.readFileSync('./config/localhost.crt').toString();

var options = {
  key : privateKey
, cert : certificate
}

var app = express();

// Start server.
var port = process.env.PORT || 3000; // Used by Heroku and http on localhost
process.env['PORT'] = process.env.PORT || 4000; // Used by https on localhost

http.createServer(app).listen(port, function () {
    console.log("Express server listening on port %d in %s mode", this.address().port, app.settings.env);
});

// Run separate https server if on localhost
if (process.env.NODE_ENV != 'production') {
    https.createServer(options, app).listen(process.env.PORT, function () {
        console.log("Express server listening with https on port %d in %s mode", this.address().port, app.settings.env);
    });
};

if (process.env.NODE_ENV == 'production') {
    app.use(function (req, res, next) {
        res.setHeader('Strict-Transport-Security', 'max-age=8640000; includeSubDomains');
        if (req.headers['x-forwarded-proto'] && req.headers['x-forwarded-proto'] === "http") {
            return res.redirect(301, 'https://' + req.host + req.url);
        } else {
            return next();
            }
    });
} else {
    app.use(function (req, res, next) {
        res.setHeader('Strict-Transport-Security', 'max-age=8640000; includeSubDomains');
        if (!req.secure) {
            return res.redirect(301, 'https://' + req.host  + ":" + process.env.PORT + req.url);
        } else {
            return next();
            }
    });

}; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-12T20:43:30.070

好吧，这些天社区看起来已经死了（希望我错了）

答案是：

a）是的，这是处理它的方法

b）检查您是否处于安全模式的方法也取决于环境：

```
if process.env.NODE_ENV == 'production'
  is_secure = (req) ->
    req.headers['x-forwarded-proto'] == 'https'
else
  is_secure = (req) -> req.secure 
```

**添加** 如果您想强制使用 HTTPS：

```
redirect_to_https = (req, res, next) ->
  if not is_secure(req)
    res.redirect config.SECURE_DOMAIN + req.url
  else
    next()

app
  .use(redirect_to_https) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-21T09:36:52.770

你可以使用`app.enable('trust proxy')`, 然后`req.secure`boolean (http/https) 也可以在 Heroku 上使用，或者在任何兼容的 SSL Termination 代理之后使用。

# html - 如何根据 HTML 中的“id”从 XML 中检索特定值

> ID：13186136
> 
> 赞同：0
> 
> 时间：2012-11-01T21:56:57.170
> 
> 标签：html, xml

我正在使用两页。

*   HTML 文件：24.html
*   XML 文件：itemdata.xml

**如何仅从 id="24" 的项目中检索数据？** 目前它抓取所有项目及其信息并在 HTML 页面上显示每个项目。

HTML 文件：“24.html”

```
`

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Item 24 - Kermit Frog</title>

    <script type="text/javascript">

    $(document).ready(function()
      {
        $.get('itemdata.xml', function(d){
        $('body').append('<h1> My Item Directory</h1>');
        $('body').append('<dl />');

        $(d).find('item').each(function(){

            var $item = $(this); 
            var title = $item.attr("title");
            var price = $item.find('price').text();
            var imageurl = $item.attr('imageurl');
            var status = $item.attr('status');
            var src = $item.find('src').text();
            var color = $item.find('color').text();
            var size = $item.find('size').text();

            var html = '<dt> <img class="itemImage" alt="" src="' + imageurl + '" /> </dt>';
            html += '<dd> <span class="loadingPic" alt="Loading" />';
            html += '<p class="title">' + title + ' <span class="status"> ' +status + ' </span></p>';
            html += '<p> ' + size + '</p>' ;
            html += '<p> Valued at: $' + price + '</p>' ;
            html += '<p><a href=" ' + src + ' " target="_blank">More Info</a></p>' ;
            html += '</dd>';

            $('dl').append($(html));

            $('.loadingPic').fadeOut(1400);
        });
    });
});
    </script>

</head>
<body>
</body>
</html> 
```

`

XML 文件：“itemdata.xml”

```
`

<?xml version="1.0" encoding="utf-8" ?>
    <items>
    <item title="Teddy Bear" imageurl="http://www.website.com/images/tan.png" status="New" id="10">
        <price>49</price>
        <src>http://www.website.com/10.html</src>
        <color>tan</color>
        <size>medium</size>
        </item>
        <item title="Kermit Frog" imageurl="http://www.website.com/images/frog.png" status="Like New" id="24">
        <price>5</price>
        <src>http://www.website.com/24.html</src>
        <color>green</color>
        <size>small</size>
        </item>
        <item title="Superman Action Figure" imageurl="http://www.website.com/images/superman.png" status="Antique" id="5">
        <price>35</price>
        <src>http://www.website.com/5.html</src>
        <color>Red &amp; Blue</color>
        <size>large</size>
        </item>
     </items> 
```

`

我也愿意将关于特定项目的数据加载到新窗口/页面中，而当前显示所有内容。即：将一个项目的数据召唤到新/当前窗口中的链接。

如果您希望我托管一个示例网站 -> 我可以使用上面的示例来做到这一点。

谢谢，

# jquery - 从父 div 中的 div 切换下一个兄弟 div

> ID：13186137
> 
> 赞同：0
> 
> 时间：2012-11-01T21:56:59.643
> 
> 标签：jquery, parent, siblings

我想根据我点击的“abtn”切换我的课程“acontent”中的内容。

我的HTML：

```
<div class="accordion">
  <div class="abtn">
    <input id="A-1" type="radio" value="A">
    <label class="chars" for="A-1">A</label>
    <div class="char-more">Learn More</div>
 </div>
<div class="acontent">Hello I am content A</div>

 <div class="abtn">
     <input id="B-1" type="radio" value="B">
     <label class="chars" for="B-1">B</label>
     <div class="char-more">Learn More</div>
 </div>
 <div class="acontent">Hello I am content B</div>

 <div class="abtn">
     <input id="C-1" type="radio" value="C">
     <label class="chars" for="C-1">C</label>
     <div class="char-more">Learn More</div>
   </div>
     <div class="acontent">Hello I am content C</div>
  </div> 
```

jQuery：

```
 $(".abtn .char-more").click(function(){
      $(this).parent.next(".acontent").slideToggle("fast")
      .siblings(".acontent:visible").slideUp("fast");
      $(this).toggleClass("active");
      $(this).siblings(".char-more").removeClass("active");
  }); 
```

JSFIDDLE：http: [//jsfiddle.net/zRqYM/30/](http://jsfiddle.net/zRqYM/30/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:58:46.953

缺少**父**级的( **)** .. 应该是**.parent()**

 ****您也可以尝试使用`.closest()`

```
$(this).closest('.abtn').nextAll(".acontent").first().slideToggle("fast") 
```****

# php - 可以根据检查按钮实时将文本添加到 html 代码中吗？

> ID：13186138
> 
> 赞同：1
> 
> 时间：2012-11-01T21:57:04.777
> 
> 标签：php, javascript

好吧，事情就是这样，我使用 php 进行了打印：

```
echo '<a href="'.$npeurl.'"><img src="css/img/confaceEN.png" alt="Access with Facebook"></a>'; 
```

`$npeurl`var 是在页面加载时使用 facebook API 生成的，如下所示：

```
<a href="https://www.facebook.com/dialog/oauth?client_id=111222333444&amp;redirect_uri=http%3A%2F%2Finfoabout.me%2FISS%2Ftest.php%3Fclient%3Dzara&amp;state=607a11c13ddb4cc4e5f6af8458cc0f65&amp;scope=email%2C+user_birthday&amp;display=page"><img src="css/img/confaceEN.png" alt="Access with Facebook"></a> 
```

问题是页面中有一个检查按钮，默认情况下未选中，但如果用户选中它，我需要向 redirect_uri 属性添加一个参数，例如：`&noemail=1`

你怎么看？这可能使用javascript吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:02:42.047

是的。
你会做这样的事情：

```
$('input[type=checkbox][class=SOMETHING]').on('click', function() {
    var link = $('a.something');
    link.attr('src', link.attr('src') + '&noemail=1');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:04:04.483

```
$('.checkbox').toggle(function() {
    var href = $('.link').attr('href');
    $('.link').attr('href', href + '&noemail=1');
}, function() {
    var href = $('.link').attr('href').replace('&noemail=1', '');
    $('.link').attr('href', href);
}); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T21:59:26.470

是的，可以使用 Javascript。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T22:00:36.040

为您的标签设置一个 id，获取它的 href 属性（jQuery？），解码 href 中的 URL，剥离 redirect_uri 参数，附加您的属性并再次构建 URL。好吧，我会这样做，用 JS。

# ruby-on-rails - 修改 SQL 查询以在 Ruby 中与“will_paginate”一起使用

> ID：13186142
> 
> 赞同：0
> 
> 时间：2012-11-01T21:57:12.543
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, will-paginate, kaminari

我有以下 SQL 查询，用于从 mySQL 数据库中获取一些行：

```
SELECT code_ver, result FROM mastertest WHERE date >= DATE_SUB( (CURDATE()) , INTERVAL 90 DAY) ORDER BY date DESC; 
```

这个查询给了我过去 90 天的数据。现在我想在我的 html.erb 页面（视图）中一次显示 10 天的数据。我知道可以使用“will_paginate”和“kaminari”宝石来完成分页。但是我不确定如何在某些条件下查询数据库，如上所示。

有人可以在这里帮我写代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:46:19.693

这就是在 ActiveRecord 中构建它的方式：

```
Mastertest.where('date >= ?', Time.now - 90.days ).order('date DESC').select("code_ver, result") 
```

从这里，您可以链接 will_paginate 或 kaminari 方法，或者如果您愿意，也可以滚动您自己的方法。如果您将经常使用它，您可能希望将该查询滚动到一个类方法中：

```
class Mastertest
  def self.last_90_days
    where('date >= ?', Time.now - 90.days ).order('date DESC').select("code_ver, result")
  end

  ## here's a simple pagination example:
  def self.page(page,per_page)
    limit(per_page).offset((page - 1) * per_page)
  end

end

Mastertest.last_90_days.page(1,20) #=> [...] 
```

# algorithm - 为什么要使用比较排序？

> ID：13186150
> 
> 赞同：8
> 
> 时间：2012-11-01T21:58:00.677
> 
> 标签：algorithm, sorting, quicksort, radix-sort

Timsort、Quicksort 和 Mergesort 等算法主导着“*现实世界*”的排序方法。这些比较排序的案例非常实用——它们已被证明是各种环境中性能最高、最稳定、多用途的排序算法。

然而，我们在计算机上排序的几乎所有东西似乎都是可数/部分有序的。数字、字符、字符串，甚至函数都适用于一些有意义的非比较排序方法。这里的一个候选者是基数排序。一般来说，它会比 O(n*log(n)) 表现得更快，在许多复杂度为 O(K*n) -- K 的情况下，大大超过了 n * log(n) 的理论比较排序限制是表示特定项目所需的位数。

是什么赋予了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T22:18:47.570

比较排序基于一个非常好的抽象：您所需要的只是一种比较两个元素的方法。然后，根据您的语言，使用模板 (c++)、接口 (java)、类型类 (haskell)、函数对象 (javascript) 等。您可以对可以容纳任意类型的容器进行排序，您唯一需要的是实现比较.

您将如何为任意类型实现基数排序？:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T22:24:45.817

基数排序的速度取决于键的长度。如果你有像字符串这样的长键，基数排序可能会很慢。

此外，对于仅对少数项目进行排序，初始化成本可能会比实际排序高出一个数量级。

例如，如果您使用 8 位基数对 32 位整数进行排序，则需要初始化 256 个存储桶列表的至少 4 倍 - 如果您只有 20 个左右的项目来排序，那么 80 次交换将远慢于约快速排序需要约 200 次比较/交换。

如果您对任何更长的内容进行排序，例如字符串，则最长字符串的每个字符都有一个存储桶初始化 - 这可能会更糟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T22:24:30.017

基数排序*仅*适用于使用整数键对对象进行排序，从实际性能的角度来看，它在很大程度上取决于键的长度。对于对任意对象进行排序的一般情况，这还不够——因此需要基于比较的排序。

# jquery - jquery ajaxstart 在第一次加载时不会触发

> ID：13186153
> 
> 赞同：1
> 
> 时间：2012-11-01T21:58:21.447
> 
> 标签：jquery, ajax, backbone.js

以下是我的代码

```
$(document).ready(function() {
  $(document).ajaxStart(function () { alert("start"); });

  // page render using backbone and fetching json through ajax call
  .....
} 
```

此页面由主干使用从服务器获取的 json 数据呈现。该页面具有在单击时执行附加 ajax 调用的按钮。在页面加载时，尽管正确请求/返回了 json 数据，但不会触发 ajaxStart。页面完全呈现后，只要我单击按钮执行其他 ajax 调用，就会按预期触发 ajaxStart。我想知道为什么第一次加载时没有触发 ajaxStart，我将如何解决这个问题？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T22:39:20.297

ajax 很可能在您绑定事件之前就开始了。尝试尽快绑定它：

```
$(document).ajaxStart(function () { alert("start"); }); // outside of .ready
$(document).ready(function() {

  // page render using backbone and fetching json through ajax call
  .....
}); 
```

# asp.net-mvc - jquery 验证插件和 ASP.NET MVC 数据注释之间的区别？

> ID：13186158
> 
> 赞同：0
> 
> 时间：2012-11-01T21:58:36.017
> 
> 标签：asp.net-mvc, asp.net-mvc-3, data-annotations

我想知道使用 JQuery Validate 插件和 ASP.NET MVC DataAnnotations 验证控件有什么区别？

感谢您的回复。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:56:26.250

JQuery Validate 是一个用于客户端验证的 JQuery 插件。

直到 MVC2，所有不显眼的 ajax 和验证都以 ASP.NET AJAX 库为目标。但在 asp.net MVC3 中不显眼的 ajax 和验证目标 JQuery 和 JQuery 验证插件。

请参阅 Brad Wilson 的此视频[http://channel9.msdn.com/Series/mvcConf/mvcConf-2011-Brad-Wilson-Advanced-MVC-3](http://channel9.msdn.com/Series/mvcConf/mvcConf-2011-Brad-Wilson-Advanced-MVC-3)，他在其中谈到了自定义无约束验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:33:50.080

ASP.NET MVC DataAnnotations 是验证控件的最佳方式，因为它们也可以验证您对客户端和服务器端的输入。

在 MVC 3 中，您还可以使用 RemoteAttribute 将远程调用发送到操作方法。

# cakephp - cakephp调用另一个模型错误的函数

> ID：13186160
> 
> 赞同：1
> 
> 时间：2012-11-01T21:58:43.700
> 
> 标签：cakephp, cakephp-2.0

我有一个在 cakephp 2.x 中开发的网站我想在我的控制器中调用另一个控制器的函数，如下所示：

```
class ProductsController extends AppController {
    public $name = 'Products';
    public $scaffold;
    public $uses = array('Product','Unit');

        public function testFunction(){
             $this->loadModel('Unit');
             $this->Unit->test();
        }
} 
```

对 UintController.php 的功能测试是这样的：

```
public function test(){
                 echo("test");
            } 
```

我的型号名称是产品和单位。当我调用函数测试时，给我这个错误：

```
Error: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'prova' at line 1 
```

在函数中现在是空的，但给我这个错误。我尝试过：

```
public $uses = array('Unit'); 
```

并用 $uses 取消该行。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T01:37:53.047

要从另一个控制器调用函数，您可以使用[requestAction](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3arequestAction)：

## 定义

> “此函数从任何位置调用控制器的操作并从该操作返回数据。传递的 $url 是 CakePHP 相对 URL (/controllername/actionname/params)。要将额外数据传递给接收控制器操作，请添加到 $options大批”。

## 用法

这就是您的代码的样子：

```
class ProductsController extends AppController
{
    public $name = 'Products';
    public $scaffold;
    public $uses = array('Product','Unit');

    public function testFunction() {
        // Calls the action from another controller            
        echo $this->requestAction('/unit/test');             
    }
} 
```

然后在`UnitController`：

```
class UnitController extends AppController
{
    public function test() 
    {
        return 'Hello, I came from another controller.';
    }
} 
```

## 警告

正如 CakePHP Cookbook 中所说：

> “如果在没有缓存 requestAction 的情况下使用会导致性能下降。很少适合在控制器或模型中使用”。

## 最适合您的解决方案

但是，对您来说最好的解决方案是在模型中创建一个函数，然后从您的控制器调用，如下所示：

```
class ProductsController extends AppController {
    public $name = 'Products';
    public $scaffold;
    public $uses = array('Product','Unit');

    public function testFunction() {
         echo $this->Unit->test();
    }
} 
```

在`Unit`模型中：

```
class Unit extends AppModel
{
    public function test(){
        return 'Hello, I came from a model!';
    }    
} 
```

# jquery - 从 url 中获取选定的 li

> ID：13186167
> 
> 赞同：0
> 
> 时间：2012-11-01T21:59:18.700
> 
> 标签：jquery, html-lists, selected

如果 li 选择的 html 文本与检索到的 url 子字符串匹配，我正在尝试将正确的类添加到我选择的 li 中。举个例子，我有以下列表

```
<ul>
 <li><a href="">test</a></li>
 <li><a href="">test2</a></li>
 <li><a href="">test3</a></li>
</ul> 
```

如果我单击**test2**，则将传递一个 get 参数，我的 url 将如下所示

```
localhost/page/test2 
```

并且在第二个 li 之后应该被选中。我试过但它不起作用[http://jsfiddle.net/lgtsfiddler/ZjNsv/3/](http://jsfiddle.net/lgtsfiddler/ZjNsv/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:04:49.163

您需要使用`url variables`- 这些是您可以通过 url 发送的参数，完全按照您的需要，使用以下格式

假设 url 是 www.example.com/?class=3

那么`$_GET["name"]`的值为“3”。欲了解更多信息，请阅读`http://php.net/manual/en/reserved.variables.get.php`。然后，你可以标记某个

*   通过在 url 中传递的参数。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:11:07.450

在您的示例中，“变量 [1]”是“笔记本”。您需要为“#driver_explorer”使用“变量 [2]”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T22:14:53.687

您需要根据您要查找的变量检查 UL 中的每个链接：

```
$("#tier_0").find("a").each(function() {

    if ($(this).text().match(variables[1])) {
        $(this).parent().addClass('selected');
    }

}); 
```

这是一个工作小提琴：http: [//jsfiddle.net/ZjNsv/8/](http://jsfiddle.net/ZjNsv/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T22:16:14.673

那会有帮助吗？

```
$(function(){
    var current_url = "http://localhost/drivers/Notebooks/#driver_explorer";
    var variables = current_url.split('/');

    $('#tier_0 li a').click(function() {
        if ( $(this).html() == variables[variables.length-2] ) {
            $(this).addClass('selected');
        };
    });          
}); 
```

将 current_url 替换为您所拥有的任何内容，使其具有动态性......

# objective-c - NSMutableURLRequest 无法连接到本地网络

> ID：13186171
> 
> 赞同：0
> 
> 时间：2012-11-01T21:59:31.800
> 
> 标签：objective-c, ios, iis, iis-7, iis-7.5

我正在使用 AFNetworking 从 iOS v6.0 应用程序连接到我的本地 Cold Fusion 8 服务器，而不是在同一台机器上，而是在同一网络上，并且连接超时。当我使用外部公共服务器时，它工作正常。

我已经尝试通过IP地址连接，但它不起作用。
我已经尝试在主机文件中为 IP 地址分配域名的条目，这也不起作用。请参阅下面的错误。但是，我可以通过网络浏览器进行连接。
此外，服务器端文件完全相同。Cold Fusion 的版本是相同的。我能找到的唯一区别是公共服务器是带有 IIS6 的 Win2003，而本地服务器是带有 IIS7 的 Windows7。

关于为什么这在本地网络上不起作用的任何想法。使本地开发有点困难。

以下是相关代码：

```
// load params
NSMutableDictionary *myParams = [[NSMutableDictionary alloc] init]; 
[myParams setValue:@"Hello" forKey:@"Parameter1"];
[myParams setValue:@"There" forKey:@"Parameter2"];

   // Load the base URL into a URL object
   // Changing this to an external public server works fine
NSURL *baseURL = [NSURL URLWithString:@"http://www.mylocalmachine.com/"];

// Create HTTP client and init with base url
AFHTTPClient *myHttpClient = [[AFHTTPClient alloc] initWithBaseURL:baseURL];

// POST request to path with the parameters
NSMutableURLRequest *myRequest = [myHttpClient requestWithMethod:@"POST" path:@"myfile.cfm" parameters:myParams];

// Block response from the HTTP client request and pass it back to the calling object
AFJSONRequestOperation *myOperation = [AFJSONRequestOperation JSONRequestOperationWithRequest:myRequest
                                                                                      success:^(NSURLRequest *mySuccessRequest, NSHTTPURLResponse *mySuccessResponse, id mySuccessJSON)
    {
        // PROCESS THE SUCCESS RESPONSE;
    }
                                                                                      failure:^(NSURLRequest *myFailureRequest, NSHTTPURLResponse *myFailureResponse, NSError *myFaliureError, id myFailureJSON)
    {
        // PROCESS THE FAILURE RESPONSE... AFTER 60 seconds the system will fallout to this block.

    }];

// Create a queue object
NSOperationQueue *myQueue = [[NSOperationQueue alloc] init];

// Add the operation object to the queue
[myQueue addOperation:myOperation]; 
```

以下是我得到打印 myFailureError 对象的错误

```
Error Domain=NSURLErrorDomain Code=-1001 "The request timed out." UserInfo=0x8481000 {NSErrorFailingURLStringKey=http://www.mylocalmachine.int/myfile.cfm, NSErrorFailingURLKey=http://www.mylocalmachine.int/myfile.cfm, NSLocalizedDescription=The request timed out., NSUnderlyingError=0x9189e20 "The request timed out."} 
```

更新----我相信我已经将问题缩小到我认为 iPhone 模拟器访问 IIS 7 的问题。它将使用相同的代码访问同一网络上的以前版本的 IIS 没问题。问题可能出在 iPhone 模拟器的用户代理中。我试图找到一种方法来更改 iPhone 模拟器的用户代理或允许 IIS 7 中的用户代理，但似乎无法弄清楚。iPhone Simulator 6 呈现的 User-Agent 是 (iPhone Simulator; ios 6.0; Scale/2.00)。

有谁知道如何在 IIS 7 上允许此用户代理或更改 iPhone 模拟器中的用户代理？

有没有其他人看到这个问题？在此先感谢， 埃德

更新 - -

大家好 好的，所以我想出了如何使用 NSMutableURLRequest 更改用户代理和内容类型。我更改了这些以匹配浏览器将发送的内容，FireFox 浏览器，然后再次尝试无济于事。我仍然认为 IIS 7.5 的配置存在问题，但我找不到它......感谢任何人的帮助！埃德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:26:26.717

请尝试删除最后两行代码并编写

删除这个

```
NSOperationQueue *myQueue = [[NSOperationQueue alloc] init];

[myQueue addOperation:myOperation]; 
```

添加这个

```
[myoperation start]; 
```

并且在结束方括号（]）之前写失败：nil，比如

```
AFJSONRequestOperation *myOperation = [AFJSONRequestOperation    JSONRequestOperationWithRequest:myRequest
                                                                                   success:^(NSURLRequest *mySuccessRequest, NSHTTPURLResponse *mySuccessResponse, id mySuccessJSON)
{
    // PROCESS THE SUCCESS RESPONSE;
}
                                                                                  failure:^(NSURLRequest *myFailureRequest, NSHTTPURLResponse *myFailureResponse, NSError *myFaliureError, id myFailureJSON)
{
    // PROCESS THE FAILURE RESPONSE... AFTER 60 seconds the system will fallout to this block.

}failure:nil]; 
```

让我知道它是否工作......！！！！快乐编码！！！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:10:02.327

我已经解决了这个问题。我将发布决议的内容，希望能帮助遇到类似问题的其他人。原来问题出在运行 IIS 7 的系统上安装了 AVG。这是一个难以确定的问题，因为任何其他系统都可以毫无问题地访问 Web 服务器。它仅适用于 iPhone 模拟器访问运行 IIS7 的系统。即使在同一台 Mac 上运行的 Safari 或 FireFox 也能正常工作。现在 AVG 内部是什么导致了问题……这还有待确定。我真的希望这对一路上的人有所帮助！

# mysql - 递归 SQL 选择

> ID：13186173
> 
> 赞同：1
> 
> 时间：2012-11-01T21:59:43.763
> 
> 标签：mysql, sql, hierarchical-data

我有带有类别的项目，这些类别也可以有类别我怎样才能找到第一个父母。例如...

```
CategoriesTbl
CategoryId | CategoryName   | parent
-------------------------------------
1          | Category1      | 0
2          | Category2      | 1
3          | Category3      | 2

ItemsTbl
ItemId     | CategoryId
-------------------------------------
1          | 3 
```

我怎样才能对项目进行选择并将其加入到具有父类别（CategoryId = 1）的类别表中。父类别可以嵌套无限深。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:28:35.617

MySQL 不支持递归 SQL 查询。但是还有其他方法可以存储此类父子数据，允许您使用单个 SQL 查询获取整个树。

也可以看看：

*   [我对将平面表解析为树的最有效/优雅的方法是什么的](https://stackoverflow.com/a/192462/20860)回答？

*   我的演示文稿“[使用 SQL 和 PHP 构建分层数据模型](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)”

*   我的书《[SQL 反模式：避免数据库编程的陷阱](http://pragprog.com/book/bksqla/sql-antipatterns)》

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:05:21.113

您也许可以使用这样的东西作为起点。

例如，

桌子

等级儿童

7 6

5 4

4 3

3 2

2 空

我的输出应该是

等级儿童

1 5 4

2 4 3

3 3 2

4 2 空

代码片段：

```
declare @table table(child int, parid int)
insert into @table
select 7, 6 union all
select 5, 4 union all
select 4, 3 union all
select 3, 2 union all
select 2, null

;with list
( tLevel,
  child,
  parId
) as
( select
  1 as tLevel,
  child,
  parId
  from @table a
  where parId is null
  union all
  select
  tLevel + 1,
  b.child,
  b.parId
  from list a
  join @table b
   on b.parId = a.child
)
select
  rank() over(order by tLevel desc)
    as Rank,
  child,
  parId
from list

/* -------- Sample Output: --------
Rank                 child       parId
-------------------- ----------- -----------
1                    5           4
2                    4           3
3                    3           2
4                    2           NULL
*/ 
```

# database - 模拟数据库 vb.net

> ID：13186174
> 
> 赞同：0
> 
> 时间：2012-11-01T21:59:48.700
> 
> 标签：database, vb.net

我搜索了一种模拟数据库和表之间链接的方法。

样本：

```
Table A
colA 
```

和

```
Table B
colB
colD 
```

通过链接

```
Table C
colA
colB 
```

和

```
Table D
colD 
```

这使得 TableA 通过 TableC 链接到 TableB。并且 tableD 链接到 tableB。

我认为要做的是一种链表。

有点像：

```
Class Table
    Private cols As List(Of Column)
End Class

Public Delegate Sub TableDelegate(ByVal tbl As Table)

Class Column
    Private name As String 'use for column name like colA,colB....

    Private fk As List(Of TableDelegate) 'linked foreign key
End Class 
```

我从不与委托合作，我经常在指针中这样做，但我被困在 vb 中。

所以它是一个开始，如果你知道去哪里或一个完整的其他方式吗？

保护你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:31:53.057

我对你的方式的最大问题是我无法将它与我假设的外键的属性和操作联系起来。我不喜欢的另一点是表不必有外键，外键具有状态和预期行为，这表明它本身应该是一个对象。看起来你正在尝试在 VB.Net 中编写 C，但永远不会工作。

我会被诱惑

```
Database With a Tables Property
Table Having an Owner property of Database
Database With a ForeignKeys Property that could be accessed through owner 
```

虽然接口不是具体的类。

例如，然后在删除 id 时，您可以执行 Owner.ForeignKeys.CascadeDelete(Me.CurrentRecord) 之类的操作

CurrentRecord 至少公开了一个列名和值列表。

作为第一次去。

请注意，在我重新发明这个轮子之前，我需要一些说服力。

例如，更容易在那里敲击 sqllite 并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T02:12:16.783

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
  'Table A'
  Dim dtbA As New DataTable("TableA")
  dtbA.Columns.Add(New DataColumn("ColA", GetType(String)))
  dtbA.PrimaryKey = {dtbA.Columns("ColA")}
  'Table B'
  Dim dtbB As New DataTable("TableB")
  dtbB.Columns.Add(New DataColumn("ColB", GetType(String)))
  dtbB.Columns.Add(New DataColumn("ColD", GetType(String)))
  dtbB.PrimaryKey = {dtbB.Columns("ColB")}
  'Table C'
  Dim dtbC As New DataTable("TableC")
  dtbC.Columns.Add(New DataColumn("ColA", GetType(String)))
  dtbC.Columns.Add(New DataColumn("ColB", GetType(String)))
  dtbC.PrimaryKey = {dtbC.Columns("ColA"), dtbC.Columns("ColB")}
  'Table D'
  Dim dtbD As New DataTable("TableD")
  dtbD.Columns.Add(New DataColumn("ColD", GetType(String)))
  'Dataset'
  Dim dst As New DataSet("MyDataset")
  dst.Tables.Add(dtbA)
  dst.Tables.Add(dtbB)
  dst.Tables.Add(dtbC)
  dst.Tables.Add(dtbD)
  dst.Relations.Add(New DataRelation("AC", dtbA.Columns("ColA"), dtbC.Columns("ColA"), True))
  dst.Relations.Add(New DataRelation("BC", dtbB.Columns("ColB"), dtbC.Columns("ColB"), True))
  dst.Relations.Add(New DataRelation("BD", dtbB.Columns("ColD"), dtbD.Columns("ColD"), True))
  'now add data'
  dst.Tables("TableA").Rows.Add("AA1")
  dst.Tables("TableA").Rows.Add("AA2")
  dst.Tables("TableA").Rows.Add("AA3")
  dst.Tables("TableB").Rows.Add("BB1", "DD1")
  dst.Tables("TableB").Rows.Add("BB2", "DD2")
  dst.Tables("TableB").Rows.Add("BB3", "DD3")
  dst.Tables("TableC").Rows.Add("AA1", "BB1")
  dst.Tables("TableC").Rows.Add("AA2", "BB2")
  dst.Tables("TableC").Rows.Add("AA3", "BB3")
  dst.Tables("TableD").Rows.Add("DD1")
  dst.Tables("TableD").Rows.Add("DD2")
  dst.Tables("TableD").Rows.Add("DD3")
  'query the data'
  Dim s As String = ""
  For Each drwA As DataRow In dst.Tables("TableA").Rows
    s &= "TableA:" & drwA("ColA").ToString & vbCrLf
    Dim drwC As DataRow = drwA.GetChildRows(dst.Relations("AC"))(0)
    s &= "--TableC:" & drwC("ColA").ToString() & drwC("ColB").ToString() & vbCrLf
    Dim drwB As DataRow = drwC.GetParentRow(dst.Relations("BC"))
    s &= "--TableB:" & drwB("ColB").ToString() & drwB("ColD").ToString() & vbCrLf
    Dim drwD As DataRow = drwB.GetChildRows(dst.Relations("BD"))(0)
    s &= "--TableD:" & drwD("ColD").ToString() & vbCrLf
  Next
  MsgBox(s)
End Sub 
```

# android - Android 调试 DDMS 连接 Windows 8 失败

> ID：13186178
> 
> 赞同：2
> 
> 时间：2012-11-01T22:00:16.593
> 
> 标签：android, eclipse, debugging, windows-8, ddms

我最近更新到**Windows 8**。

我可以毫无问题地开发和运行 Android 应用程序，但在调试方面

我明白了

**[2012-11-01 21:49:54 - ddms] 调试器错误无法绑定到本地 8615。**

我为此尝试了其他解决方案。关闭日食，杀死实例，检查主机文件..这些都没有解决任何问题！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T08:48:57.653

看起来问题出在 Java 7 上。我尝试卸载 java 7，降级到 java 6，然后 android 调试器神奇地又开始工作了。

# java - 调用采用 java.util.HashSet 的 java 方法时，如何将 jython Set 作为参数传递？

> ID：13186179
> 
> 赞同：0
> 
> 时间：2012-11-01T22:00:22.927
> 
> 标签：java, set, jython

我有一个 jython 脚本，我需要在其中调用一个 java 方法来处理一些逻辑。

这是我的 jython 脚本：

```
from sets import Set
....
names = Set(["Alice","Bob","Charles"])

// call a java method
Test.removeNames(names) 
```

Test 类中的 removeNames 将 java.util.Set 作为参数。运行脚本后，我得到了一个 TypeError：

```
TypeError: removeNames(): 1st arg can't be coerced to java.util.Set 
```

我尝试在我的 jython 脚本中使用 java.util.Set 并且它有效。但是，我只是想知道 java 方法有没有办法识别 jython 对象？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:35:45.313

Jython[文档](http://www.jython.org/archive/21/docs/usejava.html)说自动类型转换（强制）发生在任何需要的地方。但是只有一些 Jython 类型（请参阅 Jython 文档中给出的列表）可以转换为 Java 类型，反之亦然。

对于其他类型，我猜想必须使用 Java 类型对象作为参数传递给 Java 方法。

# android - 如何在布局中将按钮放置在 FlakeView 之上？

> ID：13186182
> 
> 赞同：0
> 
> 时间：2012-11-01T22:00:46.343
> 
> 标签：android, layout, button, android-framelayout

我是 android 开发的菜鸟，我正在尝试将按钮放在 9 Old Androids 库中的 FlakeView 顶部。因为我使用框架布局将按钮放置在包含 FlakeView 的布局之上。但是，当我运行应用程序时，按钮显示在薄片后面，而不是在它们前面。我之前使用框架布局来完成这个没有任何问题，所以我不明白它现在不起作用。任何帮助是极大的赞赏。

布局

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<LinearLayout
    android:orientation="horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="More"
        android:id="@+id/more"/>
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Less"
        android:id="@+id/less"/>
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="New Game"
        android:id="@+id/newgame"/>

</LinearLayout>

<LinearLayout
    android:id="@+id/container"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="vertical">

     </LinearLayout>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:22:34.140

你有你的布局向后组织你想要完成的事情。请执行下列操作：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<LinearLayout
android:id="@+id/container"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:orientation="vertical">

 </LinearLayout>
<LinearLayout
android:orientation="horizontal"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="More"
    android:id="@+id/more"/>
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Less"
    android:id="@+id/less"/>
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="New Game"
    android:id="@+id/newgame"/>

</LinearLayout>

</FrameLayout> 
```

# delphi - 从存储过程返回游标作为 ClientDataset 的问题

> ID：13186183
> 
> 赞同：1
> 
> 时间：2012-11-01T22:00:59.637
> 
> 标签：delphi, oracle11g, cursor, delphi-xe2, dbexpress

这个问题与我的[Previous Question](https://stackoverflow.com/questions/13054254/how-to-return-oracle-cursor-from-stored-proc-as-client-dataset-using-delphi-and)直接相关。

我需要从包中包含的 Oracle 11g 游标在客户端上创建 TClientDataSet。我正在使用 Delphi XE2 和 DBExpress 连接到 DB 和 DataSnap 将数据发送回客户端。

当我在设计时将 TSQLStoredProc 配置为 TClientDataset 时，我可以毫无问题地将游标作为 TClientDataset 返回并获得预期的结果。

当我尝试在运行时执行存储过程时，它返回一个空的 TClientDataset。

是否可以在运行时使用 TSQLStoredProc 配置和执行 Oracle 11g 存储过程？

## 数据快照服务器

**设计时数据模块代码 [以文本形式查看]**

```
 object StrProc1: TSQLStoredProc
    SchemaName = 'xxxx'
    MaxBlobSize = -1
    Params = <
      item
        DataType = ftWideString
        Precision = 2000
        Name = 'ABBR'
        ParamType = ptInput
        Value = 'ZZZTOP' 
      end
      item
        DataType = ftCursor
        Precision = 8000
        Name = 'RES'
        ParamType = ptOutput
        Size = 8000
      end>
    PackageName = 'KP_DATASNAPTEST'
    SQLConnection = SQLConnection1
    StoredProcName = 'GETFAXDATA'
    Left = 408
    Top = 72
  end
  object DataSetProvider1: TDataSetProvider
    DataSet = StrProc1
    Left = 408
    Top = 120
  end
  object ClientDataSet1: TClientDataSet
    Aggregates = <>
    Params = <>
    ProviderName = 'DataSetProvider1'
    Left = 408
    Top = 176
  end 
```

**执行设计时配置的函数**

```
function TKPSnapMethods.getCDS_Data3: OLEVariant;
begin    
 self.ClientDataSet1.Open;
 result:= self.ClientDataSet1.Data;
 self.SQLConnection1.Close;
end; 
```

**执行运行时配置的函数**这是返回空 ClientDataSet 的代码。目标是连接各个部分，设置参数值，打开 CDS 并返回 CDS.Data

```
function TKPSnapMethods.getCDS_Data2(schema: String): OleVariant;
var
  cds: TClientDataSet;
  dsp: TDataSetProvider;
  strProc: TSQLStoredProc;
  ProcParams: TList;
begin
  strProc := TSQLStoredProc.Create(self);
  try
    strProc.SQLConnection:= SQLCon;//<--A TSQLConnection    
    dsp := TDataSetProvider.Create(self);
    try
      dsp.DataSet := strProc;

      cds := TClientDataSet.Create(self);
      try
        cds.DisableStringTrim := True;
        cds.ReadOnly := True;
        cds.SetProvider(dsp);

        ProcParams:= TList.Create;    
        try
          //Load Stored Procedure Parameters
          SQLCon.GetProcedureParams('GETFAXDATA','KP_DATASNAPTEST',Schema,ProcParams);
          LoadParamListItems(StrProc.Params,ProcParams);

          strProc.ParamByName('ABBR').AsString := 'ZZZTOP';//<--Assign Parms
          strProc.MaxBlobSize := -1;
          strProc.SchemaName:= Schema;
          strproc.PackageName:='KP_DATASNAPTEST';
          strProc.StoredProcName:= 'GETFAXDATA';
          cds.Open;
          Result := cds.Data;
        finally
          FreeProcParams(ProcParams);
        end;
      finally
        FreeAndNil(cds);
      end;
    finally
      FreeAndNil(dsp);
    end;
  finally
    FreeAndNil(strProc);
    self.SQLCon.Close;
  end;
end; 
```

**客户端代码**这只是一个创建与 DataSnap 服务器的连接的测试表单，执行 ServerMethods 并在字符串网格中显示结果。

```
procedure TForm1.Button1Click(Sender: TObject);
var
 proxy:TKpSnapMethodsClient;
 cds :TClientDataSet;
 field: TField;
 r,c:integer;
begin
  r:=0;
  c:=0;
  SQLConTCPSERV.Connected := True; //TSQLConnection
  proxy:= TKPSnapMethodsClient.Create(SQLConTCPSERV.DBXConnection,false);
  cds:= TClientDataSet.Create(nil);
  try
    //cds.Data:= proxy.getCDS_Data2('TESTTH');//<--Runtime function
    cds.Data:= proxy.getCDS_Data3; //<--Design time function
    if cds <> nil then
    begin
      cds.Open;
      cds.First;
      //String grid to display CDS contents.
      strGrid1.ColCount:= cds.FieldCount; //returns correct #
      strGrid1.RowCount:= cds.RecordCount;

      while not cds.Eof do  //<--runtime wont make it past here
      begin
        for field in cds.fields do //loop fields
        begin
          strgrid1.Cells[c,r]:= field.Text; //display results.
          c:=c+1;
        end;
        c:=0;
        r:=r+1;            
        cds.Next;
      end;
    end
    else showmessage('DataSet is NIL');
  finally
    cds.Free;
    proxy.Free;
    SQLConTCPSERV.Connected := False;
  end;
end; 
```

再次，我必须承认我是 Delphi 语言的新手。我搜索了 google、code.google、Embarcadero Developer Network 和 DBExpress 文档，但均无济于事。我只是不明白为什么设计时和运行时之间会有差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:48:31.930

我已经解决了这个问题。问题在于将值分配给 TSQLStoredProc 组件的**顺序。**

调用此代码时：

```
strproc.PackageName:='KP_DATASNAPTEST';
strProc.StoredProcName:= 'GETFAXDATA'; 
```

参数被清除。下面是设置在 Data.SqlExpr 中找到的 StoredProcName 的代码

```
procedure TSQLStoredProc.SetStoredProcName(Value: UnicodeString);
begin
  //if FStoredProcName <> Value then
  //begin
    FStoredProcName := Value;
    SetCommandText(Value);
    if Assigned(FProcParams) then  // free output params if any
      FreeProcParams(FProcParams);
  //end;
end; 
```

如您所见，如果 FProcParams 已分配，则调用 FreeProcParams 以释放参数。因为我在分配参数值后设置了 StroredProcName，所以代码正在使用清除的参数执行并返回一个空游标。

在运行时产生正确结果的顺序 [来自 getCDS_Data2] 如下：

```
strProc.SchemaName:= Schema;
SQLCon.GetProcedureParams('GETFAXDATA','KP_DATASNAPTEST',Schema,ProcParams);
LoadParamListItems(StrProc.Params,ProcParams);

strproc.PackageName:='KP_DATASNAPTEST';
strProc.StoredProcName:= 'GETFAXDATA';
strProc.MaxBlobSize := -1;
strProc.ParamCheck:=true;

strProc.ParamByName('ABBR').AsString := 'ZZZTOP';

cds.Open; 
```

# python - 如何从 Python 中的不相关脚本将函数附加到当前模块

> ID：13186190
> 
> 赞同：0
> 
> 时间：2012-11-01T22:01:13.267
> 
> 标签：python

我在不同的位置有两个 python 脚本。我尝试以与第一个全局变量集成的方式导入第二个函数。这很好用。但是，当我从第二个脚本调用第一个脚本中的函数时，找不到它们。

foo.py

```
def run():
    glob = {}
    loc = {}
    execfile("/path/to/bar.py", glob, loc)
    currmodule = globals() 
    currmodule["func_in_bar"] = glob["func_in_bar"]
    func_in_bar()

def func_in_foo_A():
    print("fooA")

def func_in_foo_B():
    print("fooB")

if __name__ == "__main__":
    run() 
```

酒吧.py

```
def func_in_bar():
    func_in_foo_A()
    func_in_foo_B() 
```

当 foo 运行时，它会失败并显示：`NameError: global name 'func_in_foo_A' is not defined`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:04:25.507

在`bar.py`您需要添加一个`import foo`然后引用`foo.func_in_foo()`等。

或者，使用以下表格：`from foo import func_in_foo`

# javascript - 启用安全浏览时 FB.UI 不显示缩略图

> ID：13186194
> 
> 赞同：1
> 
> 时间：2012-11-01T22:01:38.347
> 
> 标签：javascript, facebook, ssl, https, facebook-javascript-sdk

我正在使用 FB.UI api 允许用户发布到他们的墙上，这里是代码：

```
FB.ui(
  {
    method: 'feed',
    name: name,
    link: linkPath, 
    picture: thumbnailPath,
    caption: iconName,
    description: 'Come check out my my awesome post'
  },
  function(response) {
    if (response && response.post_id) {

      alert('Post was published!');
    } else {
      alert('Post was not published!');
    }
  }
); 
```

通常这可以正常工作，并且会弹出 Facebook 对话框，显示从“thumbnailPath”链接的图片，但是当我使用启用了安全浏览的测试帐户时，缩略图不会显示，并且当它发布到墙上时没有图片. 我在 MAMP Pro 服务器上运行它，并使用 MAMP 的“生成自签名证书”功能创建了证书，因此它不是有效的证书。我想知道这是否是我的缩略图不会显示的原因。当我转到由变量“thumbnailPath”链接的路径时，它显示得很好。我已经在 Chrome、Safari 和 Firefox 中对此进行了测试，并且在所有浏览器中都得到了相同的行为。

我想知道我的无效证书是否可能是导致此问题的原因，还是没有意义？我一直无法在网上找到描述类似问题的任何其他链接，所以我不确定这是否与我的证书有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:16:37.933

如果您没有有效的证书，则 FB 不能/不会通过 https 抓取对象，包括图像等元数据。获取真正的证书，然后确保 FB 可以使用[Debugger](https://developers.facebook.com/tools/debug)抓取您的网址。

此外，如果这是一个全新的对象并且没有在该对象上发布任何内容，则 FB 不知道它存在（并且不会显示缩略图）。[您可以使用调试器](https://developers.facebook.com/tools/debug)或使用 GET/curl 以编程方式启动先发制人的抓取（请参阅“更新对象”， [https://developers.facebook.com/docs/opengraph/objects/](https://developers.facebook.com/docs/opengraph/objects/)）。

在 apps.facebook.com (Canvas) 上发布应用程序时，您还需要有效的证书以进行安全浏览。

如果您只是测试应用程序，那么您可以使用[App Dashboard](https://developers.facebook.com/apps)将您的应用程序置于沙盒模式，这将让您、管理员、测试人员和您在角色部分中定义的其他人通过 http 使用 Canvas 上的应用程序（不需要安全浏览）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:17:55.763

我通过简单地确保始终将缩略图与http地址而不是https地址链接来解决了这个问题，我这样做了缩略图总是会出现。

# java - 使面板使用所需的确切空间，并用另一个面板填充其余部分

> ID：13186195
> 
> 赞同：0
> 
> 时间：2012-11-01T22:01:54.513
> 
> 标签：java, swing, layout, awt, layout-manager

我想在垂直行中制作一个包含两个组件的布局。第一个组件是我自己的类 ImagePanel 的一个实例，它扩展了 Panel 并显示了一个图像，我希望它占据显示整个图像所需的确切空间。剩余的空间应该由其他组件（在这种情况下是另一个具有 GridLayout 的面板）填充。看图片。

![想要的布局](../Images/420c54afcf9415ba205672a67b43e129.png)

在 Android 中，您可以通过使用 weight 属性来做到这一点，但我在 Java 中找不到类似的东西，而且我看不出 Java 中的任何标准布局管理器都适合这个。

我尝试将 ImagePanel 放在 BorderLayout.NORTH 中，将另一个面板放在 BorderLayout.CERNTER 中，但是第二个面板与图像重叠，因此不起作用。

我也想使用 GridLayout 但网格不会关心图像的大小，所以我认为这也行不通。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T08:07:34.123

`getPreferredSize()`如果图像面板返回正确的尺寸（即它显示的图像的尺寸），BorderLayout 应该可以工作。

使用包含 ImageIcon 且没有文本的简单 JLabel 代替您的自定义 ImagePanel 将为您做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:07:08.807

java中最强大的布局是GridBagLayout。它具有 weightx 和 weighty 属性，anchor，fill 等。

默认情况下，使用 GridBagLayout 每个组件都有所有必要的空间来完全显示。如果您希望第二个面板扩展，那么在您的图像中使用 weighty=0.0 和在另一个面板中使用 weighty=1.0 就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T23:52:02.847

`javax.swing.Box`应该正是你想要的。有两种类型的盒子，垂直的和水平的，你需要一个垂直的：

```
Box box = Box.createVericalBox();
box.add(comp1);
box.add(Box.createVerticalStrut(5)); // add some empty space
  .
  .
  .
add(box); 
```

`Box`只会强制一侧相等，对于垂直，它是宽度，长度可以是任何尺寸。

# android - 如何使用 Android 传感器数据计算方向与实际地平线对齐的线的端点

> ID：13186199
> 
> 赞同：0
> 
> 时间：2012-11-01T22:02:18.697
> 
> 标签：android, android-sensors

我想计算两个与真实地平线对齐的点（假设用户虚拟地拿着设备）。我希望连接这两个点的线穿过我选择的中心点。

我正在收集`Sensor.TYPE_ACCELEROMETER`和`Sensor.TYPE_MAGNETIC_FIELD`矢量，并找到了使用rotationmatrix 旋转位图的示例代码，但我无法考虑只计算屏幕X 和Y 所需的2 个点。

非常感谢任何提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:17:27.063

如果我理解正确，那应该是一个简单的三角问题。你应该找到地平线的角度然后它看起来像这样

![在此处输入图像描述](../Images/db260141b3b129ba821a5d581fb3462a.png)

X1 = 0

Y1 = Yc + Xc * tan(a)

X2 = 屏幕宽度

Y2 = Yc - (screenWidth - Xc) * tan(a)

# cuda - 为什么我相当琐碎的 CUDA 程序在某些参数上会出错？

> ID：13186200
> 
> 赞同：1
> 
> 时间：2012-11-01T22:02:29.737
> 
> 标签：cuda, pycuda

我做了一个简单的CUDA程序来练习。它只是将数据从一个数组复制到另一个数组：

```
import pycuda.driver as cuda
import pycuda.autoinit
import numpy as np
from pycuda.compiler import SourceModule

# Global constants
N = 2**20 # size of array a
a = np.linspace(0, 1, N)
e = np.empty_like(a)
block_size_x = 512

# Instantiate block and grid sizes.
block_size = (block_size_x, 1, 1)
grid_size = (N / block_size_x, 1)

# Create the CUDA kernel, and run it.
mod = SourceModule("""
  __global__ void D2x_kernel(double* a, double* e, int N) {
    int tid = blockDim.x * blockIdx.x + threadIdx.x;
    if (tid > 0 && tid < N - 1) {
      e[tid] = a[tid];
    }
  }
""")
func = mod.get_function('D2x_kernel')
func(a, cuda.InOut(e), np.int32(N), block=block_size, grid=grid_size)
print str(e) 
```

但是，我收到此错误：`pycuda._driver.LogicError: cuLaunchKernel failed: invalid value`

当我去掉`double* e`内核函数中的第二个参数并在没有参数的情况下调用内核时`e`，错误就消失了。这是为什么？这个错误是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:13:08.567

您的`a`数组在设备内存中不存在，因此我怀疑 PyCUDA 忽略（或以其他方式处理）您的内核调用的第一个参数，并且只传入`e`and `N`...所以您收到错误，因为内核需要三个参数并且它只收到了两个。从内核定义中删除`double* e`可能会消除您收到的错误消息，但您的内核仍然无法正常工作。

对此的快速修复应该是封装`a`一个`cuda.In()`调用，该调用指示 PyCUDA`a`在启动内核之前复制到设备。也就是说，您的内核启动行应该是：

```
func(cuda.In(a), cuda.InOut(e), np.int32(N), block=block_size, grid=grid_size) 
```

编辑：另外，您是否意识到您的内核没有复制`a`to的第一个和最后一个元素`e`？你的`if (tid > 0 && tid < N - 1)`声明正在阻止这种情况。对于整个数组，它应该是`if (tid < N)`.

# wpf - RichTextboxes 中的焦点控件

> ID：13186202
> 
> 赞同：0
> 
> 时间：2012-11-01T22:02:43.403
> 
> 标签：wpf, textbox, focus, controls, richtextbox

> **可能重复：**
> [DotNet 中的 Textbox/RichTextbox 内的组件](https://stackoverflow.com/questions/14027633/components-inside-textbox-richtextbox-in-dotnet)

我的 RichTextbox 控件中有一个文本框。（texboxt 包含某些表达式，否则无法在richtextbox 本身中完成。）当插入符号与对象相邻时，我无法聚焦/导航到元素中。插入符号只是跳过对象。有没有办法注意到对象并专注于它（在这种情况下专注于文本框）？

实际上，我应该更具体地说，“文本框”实际上是一个用户控件，可以包含多个 texbox 和其他符号，因此它不仅仅是一个简单的 wpf“文本框”。但本质上它的行为就像一个文本框。

谢谢。

```
 <RichTextBox Name="rtb" Grid.Row="1" >
        <ed:EnabledFlowDoc x:Name="efdMath" TextBlock.BaselineOffset="-10"
                           FontFamily="Palatino Linotype">
            <Paragraph TextBlock.BaselineOffset="10" TextInput="Paragraph_TextInput_1">
                Text . . .
                <InlineUIContainer BaselineAlignment="Center">
                    <TextBox />
                </InlineUIContainer>
                <InlineUIContainer BaselineAlignment="Center">
                    <TextBox />
                </InlineUIContainer>

            </Paragraph>
        </ed:EnabledFlowDoc>
    </RichTextBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:05:37.880

我正在寻找的功能是 this 。. .

```
RichTextBox.CaretPosition.GetAdjacentElement(LogicalDirection Direction) 
```

有关更多信息，请查看我的新帖子，因为我无法删除此旧帖子。. .

[DotNet 中 Textbox/RichTextbox 内部的组件](https://stackoverflow.com/questions/14027633/components-inside-textbox-richtextbox-in-dotnet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:47:02.090

您也可以使用`IsDocumentEnabled="True"`RichTextBox 的属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T19:38:34.453

可以通过覆盖 FlowDocument 的 IsEnabledCore 属性来完成：

```
class EnabledFlowDoc : FlowDocument
{
    protected override bool IsEnabledCore
    {
        get
        {
            return true;
        }
    }
} 
```

[在这里](http://learnwpf.com/post/2007/01/18/When-I-add-Controls-to-a-WPF-RichTextBox-They-Are-Always-Disabled-How-can-I-change-that.aspx)找到这个解决方案

# iphone - 如何知道设备何时充电？

> ID：13186203
> 
> 赞同：12
> 
> 时间：2012-11-01T22:02:46.297
> 
> 标签：iphone, ios, objective-c

如何让我的 iOS 应用检测设备何时充电？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-01T22:09:29.187

这个怎么样。

```
UIDeviceBatteryState deviceBatteryState = [UIDevice currentDevice].batteryState;
if (deviceBatteryState == UIDeviceBatteryStateCharging || deviceBatteryState == UIDeviceBatteryStateFull) {
    // It is charging
} 
```

从[苹果文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)中，

**`UIDeviceBatteryState:`** 设备的电池电量状态。

```
typedef enum {
   UIDeviceBatteryStateUnknown,
   UIDeviceBatteryStateUnplugged,
   UIDeviceBatteryStateCharging,
   UIDeviceBatteryStateFull,
} UIDeviceBatteryState; 
```

**`UIDeviceBatteryStateUnknown:`** 无法确定设备的电池状态。

**`UIDeviceBatteryStateUnplugged:`** 设备未插入电源；电池电量不足。

**`UIDeviceBatteryStateCharging:`** 设备已插入电源且电池电量低于 100%。

**`UIDeviceBatteryStateFull:`** 设备已插入电源并且电池已充电 100%。

* * *

**更新：**

只是为了完整地回答你的问题。以下是如何检测充电器何时插入。有一个名为 的属性`batteryMonitoringEnabled`。

`batteryMonitoringEnabled:``(YES)`一个布尔值，指示是否启用电池监控`(NO)`。

如果您的应用需要收到电池状态更改的通知，或者您想检查电池电量，请启用电池监控。

此属性的默认值为`NO`，其中：

> *   禁止发布与电池相关的通知
> *   禁用读取电池电量和电池状态的功能

这将发布通知`UIDeviceBatteryLevelDidChangeNotification`，以及`UIDeviceBatteryStateDidChangeNotification`电池电量何时发生变化。您可以使用`UIDeviceBatteryStateDidChangeNotification`来检测充电器何时插入。

# iphone - ViewController 转换问题

> ID：13186213
> 
> 赞同：1
> 
> 时间：2012-11-01T22:03:28.470
> 
> 标签：iphone, ios, xcode, uiviewcontroller

这是我拥有的当前代码：

```
(IBAction)signup:(id)sender {
SignUp *signUp = [[SignUp alloc] init];
signUp.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentViewController:signUp animated:YES]; 
```

我只在底线得到一个错误。上面写着：“'loginView' 没有可见的@interface 删除选择器'presentViewController:animated。'

这是我不明白的……我`loginView`作为`UIViewController`班级的孩子进行了接口……这`presentViewController`是声明的地方。为什么它告诉我它找不到任何东西，我该如何解决？

提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:23:53.160

你确定这`presentViewController:animated:`是在声明的`UIViewController`吗？在我的文档中，它被列为`presentViewController:animated:completion:`. 如果您在那里无事可做，则可以有一个空的完成块。

```
[self presentViewController:signup animated:YES completion:^(){}]; 
```

# java - Java 程序适用于大多数但不是所有的计算机

> ID：13186223
> 
> 赞同：2
> 
> 时间：2012-11-01T22:04:25.080
> 
> 标签：java, class, startup, runtime-error, main

好的，我最近为我父亲的公司写了一个程序。在他发送它之前，我在我的两台电脑、我爸爸的电脑和我妈妈的电脑上测试了它。他将测试版发送给了他的 CEO 和其他 4 人。它对 CEO 和其他 3 人来说效果很好。但是，有人在尝试打开“找不到主启动类”的程序时出错。我知道这意味着它找不到主类或方法，我只是不知道为什么。他说他安装了最新版本的 java，我在分发程序时提供了正确的下载链接。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:07:32.487

有许多不同的因素会导致这种情况，但最有可能的是计算机没有合适的`Java Version`.

我解决这个问题的方法是使 Java 5 中的程序成为标准。今天的大部分计算机应该至少有 JRE5。

[在 NetBeans 中进行开发时，请尝试按照此处](https://blogs.oracle.com/charliebrown/entry/how_to_set_and_use)所述更改项目的编译级别

# ruby-on-rails - Ruby on Rails：参数数量错误（3 比 2）

> ID：13186235
> 
> 赞同：0
> 
> 时间：2012-11-01T22:05:14.157
> 
> 标签：ruby-on-rails

出于某种原因，当我尝试添加记录时，此方法出现错误。具体错误是参数数量错误（3 代表 2）

```
 def addrecord
        res=MultiGeocoder.geocode(params[:street], params[:city], params[:state])
        lat, lng = res.ll.split(",") 
        Bathroom.create(:name =>params[:name],
                        :bathroomtype =>params[:bathroomtype],
                        :street =>params[:street],
                        :city =>params[:city],
                        :state =>params[:state],
                        :country =>params[:country],
                        :postal =>params[:postal],
                        :lat => lat,
                        :lon => lng,
                        :access =>params[:access], 
                        :directions =>params[:directions],
                        :comment =>params[:comment],
                        :created => Time.now,
                        :source => 'Squat',
                        :avail =>params[:avail] )
                        respond_to do |format|
                          format.json   { render :nothing => true }                  

                        end

      end

    This is an example call...

> http:..../bathrooms/addrecord?name=Apple%20Store&bathroomtype=1&street=One%20Stockton%20St.&city=San%20Francisco&state=CA&country=United%20States&postal=94108&access=0&directions=&comment=&avail=0 
```

这是请求参数：

要求

参数：

```
{"city"=>"San Francisco",
 "avail"=>"0",
 "access"=>"0",
 "bathroomtype"=>"1",
 "comment"=>"",
 "country"=>"United States",
 "directions"=>"",
 "name"=>"Apple Store",
 "street"=>"One Stockton St.",
 "postal"=>"94108",
 "state"=>"CA"} 
```

我错过了什么？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:12:22.997

至少`master`对于**[Geokit](https://github.com/imajes/geokit)**，*（我假设您正在使用的 gem）*，`MultiGeocoder`extends `Geocoder`，谁的方法签名`geocode` **[只需要 2 个参数](https://github.com/imajes/geokit/blob/master/lib/geokit/geocoders.rb#L96)**，一个`address`和可选的`options`哈希。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:13:27.350

您必须在此处将位置作为第一个参数，并将选项作为其余参数：

```
MultiGeocoder.geocode(params[:street], params[:city], params[:state]) 
```

尝试将其作为字符串发送，如下所示：

```
MultiGeocoder.geocode("#{params[:street]}, #{params[:city]}, #{params[:state]}") 
```

# node.js - Redis.io 多个 multi() - 它们可以是原子的吗？

> ID：13186239
> 
> 赞同：0
> 
> 时间：2012-11-01T22:05:29.940
> 
> 标签：node.js, redis

我的第二个 multi() 调用需要第一个 multi() 的结果。但是，我希望 multi() 中的所有命令都以原子方式执行。我怎样才能做到这一点？

这是使用 node.js 客户端。

```
db.multi()
    .incr('next:user:id')
    .sadd('users:facebookid', facebookId)
    .exec(function(err, replies)
    {
        var newUserId = replies[0];
        // if something fails in this multi(), then the previous multi() shouldn't be executed either.
        db.multi()
        .hmset('user:' + newUserId , 'facebookId', facebookId, 'name', userName)
        .incr('users:count')
        .exec()

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:32:34.450

您应该能够使用 redis [EVAL](http://redis.io/commands/eval)在原子事务中完成复杂的工作。我的理解是 EVAL 命令被写入 tx 日志，所以即使 redis 崩溃，整个命令要么运行完成，要么根本不执行。

# java - 如何实现一个没有定义所有抽象方法的类？

> ID：13186240
> 
> 赞同：1
> 
> 时间：2012-11-01T22:05:32.443
> 
> 标签：java, class, interface, polymorphism

对于我的 Java 类，我们正在学习接口、多态性、继承等。

我正在做的家庭作业是一个记忆游戏，你有一对面朝下的卡片，你一次翻开两张来寻找匹配。如果它们匹配，则它们保持可见，如果它们不匹配，则将牌翻过来，然后再选择两张牌。

到目前为止，我的设计如下：

```
public interface Hideable
  public abstract void hide();
  public abstract void show();    

public interface Speakable
  public abstract String speak();

public interface AnimalCard extends Hideable, Speakable
  public abstract boolean equals(Object obj);

public class Animal implements AnimalCard
  public void hide() { ... }
  public void show() { ... }
  public boolean equals(Object obj) { ... }

  // What do I do for the speak method since a generic Animal
  // can't speak, but I have to provide a definition since the
  // Animal class is implementing the interfaces.

public class Puppy extends Animal
  // Here is where I need to define the speak method.
  public String speak() { ... } 
```

我的问题在上面的评论中。我觉得我对 speak() 方法的实现不正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T22:16:50.150

只是`Animal`上课`abstract`。
具体的类必须实现`speak()`，或者是`abstract`它们自己。

```
public class abstract Animal implements AnimalCard {
    public void hide() { ... }
    public void show() { ... }
    public boolean equals(Object obj) { ... } 
```

为in声明一个`abstract`方法没有必要或价值——该方法隐含在类层次结构中。`speak()``Animal`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:11:45.270

**接口**的目的是**保证**您的类将以某种方式运行。

所以如果你声明一个可说话的对象

```
Speakable speakingThing = new Puppy(); 
```

无论您放入该`speakableThing`变量中的什么，都**必须**能够执行`Speakable`接口说它可以执行的任何操作。

我要做的是没有`AnimalCard`实现`Speakable`，只有会说话的动物实现接口

或者，正如其他人所说，如果你所有的动物都会说话，而你永远不会实例化通用动物，而不是让你的类抽象。（抽象类不会被实例化。它们只是为了继承而来。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T22:15:33.893

你可以做这种改变

```
 public abstract class  Animal implements AnimalCard{
  public void hide() { }
  public void show() {  }

  public  abstract String speak();
 } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T22:17:38.277

第一的，

默认情况下，它们本质上是抽象的，因为在接口中包含任何实现代码都是非法的`abstract`。`interface.`

其次，java不支持多重继承，所以你的行：

```
public interface AnimalCard extends Hideable, Speakable 
```

是非法的。

解决这些问题后，解决问题的最佳方法是使动物卡抽象。

```
public abstract Animal extends AnimalCard {
  public void hide() { ... }
  public void show() { ... }
  public boolean equals(Object obj) { ... }  
  public abstract String speak();       
}

public class Puppy extends Animal {
  // Here is where I need to define the speak method.
  public String speak() { ... }
} 
```

# ruby - 如何在 Aptana Studio Ruble 中使用外部库？

> ID：13186242
> 
> 赞同：1
> 
> 时间：2012-11-01T22:05:44.290
> 
> 标签：ruby, aptana

我正在尝试创建一个卢布以在我当前的项目中使用，但我需要使用外部库。Rails 控制台可以很好地看到该库，运行中的 ruby​​ 进程也可以。然而我从卢布得到这个错误

```
org.jruby.exceptions.RaiseException: (LoadError) no such file to load -- kode
at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1038)
at #<Class:0x10149fee8>.(root)(/home/nekosune/Documents/Aptana Studio 3 Workspace/RubyIndentor/commands/commands.rb:2) 
```

有谁知道如何解决这一问题？

# grails - 无法在 Grails 中创建新的域对象

> ID：13186243
> 
> 赞同：2
> 
> 时间：2012-11-01T22:05:48.777
> 
> 标签：grails, grails-orm

嗨，我对 grails 还是很陌生，我无法弄清楚为什么会这样。

我有一个域类：

```
package scheduler

class Client {
  String name

  static constraints = {}
} 
```

和一个控制器：

```
package scheduler
class AdminController {
  def create() {
    def client = new Client(name:"John")
    println client
  }
} 
```

目前，我总是为客户获得空值。最初上面在域类方面有点复杂，但我系统地把它简化了，看看那里是否有问题。我仍然无法使上述工作。

输出总是 scheduler.Client : null

如果我需要提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T22:18:09.153

它不是 null，这只是`toString`Grails 添加的方法的默认输出。它打印类名和id。由于您尚未保存实例，因此 id 为空。如果实例为空，则输出将是`null`，而不是`scheduler.Client : null`

如果要查看实例中的数据，请使用 Groovy`dump()`方法，例如

```
def client = new Client(name:"John")
println client.dump() 
```

您还可以添加一个`toString`包含该`name`属性的方法，例如

```
package scheduler

class Client {
   String name

   String toString() { name }
} 
```

# mongodb - 在 MongoDB 中，您如何查询仅包含某些字段而不包含其他字段的记录

> ID：13186244
> 
> 赞同：3
> 
> 时间：2012-11-01T22:05:48.627
> 
> 标签：mongodb, pymongo

在 MongoDB 中，

要查询包含某些字段的记录，您可以执行以下操作：

```
collection.find({'field_name1': {'$exists': true}}) 
```

这将返回任何设置了“field_name1”字段的记录......

但是您如何查询 mongo 以查找仅包含“field_name1”（且不包含其他字段）的记录？我希望能够为字段列表执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T22:42:53.917

正如您在 MongoDB 和其他 NoSQL 数据库中经常发现的那样，可悲的答案可能是，最好以一种允许您尽可能简单地查询数据的方式来构建您的数据。

也就是说，有很多方法可以做到这一点，但据我所知，它需要你在服务器端执行 JavaScript。这会很慢，并且不可能利用 MongoDB 的索引和其他逻辑特性，所以只有在绝对必要时才使用它，如果性能非常重要的话。

因此，最简单的方法可能是创建一个返回对象中字段数量的函数，我们可以将其与[$where](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-JavascriptExpressionsand%7B%7B%24where%7D%7D) 查询语法一起使用。这允许您对数据运行任意 JavaScript 查询，并且可以与普通语法查询结合使用。

可悲的是，我的 JavaScript-fu 有点弱，所以我不知道如何（或是否）可以在单行中获取 JS 中对象的成员数，所以要做到这一点，我会[存储一个功能服务器端](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Storingfunctionsserverside)。

在 mongo shell 中，执行以下命令：

```
db.system.js.save(
    {
        "_id" : "countFields", 
        "value" : function(x) { i=0; for(p in x) { i++; } return i}
    }
) 
```

有了这个，你就有了一个保存的 JavaScript 函数，服务器端，调用`countFields`它返回对象中元素的数量。现在，您需要使用`$where`查询执行查找操作：

```
db.collection.find({
    'field_name1': {'$exists': True}, 
    '$where' : 'countFields(this)==2'
}) 
```

这将只为您提供同时满足`$exists`条件和`$where`条款的文件。请注意，我在示例中与 2 进行比较，因为该`countFields`函数算作`_id`一个字段。

# android - iPhone/iPad 应用程序能否嵌入可以使用 HTML5 标签播放 RTSP 流的浏览器？

> ID：13186245
> 
> 赞同：1
> 
> 时间：2012-11-01T22:06:03.463
> 
> 标签：android, ios, browser

您好我有一些关于将浏览器嵌入我的应用程序的问题。实际上我希望这个应用程序同时具有 Android 和 iOS 版本。我想做的是：应用程序可以嵌入浏览器（就像应用程序中的视图）。并且浏览器应该支持HTML5，并且应该支持播放rtsp流。当我尝试这样做时，我遇到了一些问题：

1.  是否有可能将浏览器（如 Safari 或 Chrome）嵌入到我的应用程序中？不是通过在应用程序之外打开一个新窗口，实际上我希望它是“在”应用程序中。

2.  如果我可以将浏览器嵌入到我的应用程序中，如果浏览器支持 html5，那么我可以使用浏览器显示 rtsp 流吗？

如果我不能嵌入浏览器，我可以嵌入任何支持 rtsp 的 html5 播放器吗？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:34:37.077

是与否

是的，您可以嵌入一个具有浏览器某些功能的 uiWebView，您可以对可以编码的内容进行大量控制。

rtsp ，简短回答否，IOS 不支持 rtsp 所以没有 html 5 标签将支持 rtsp

长答案，几年前做过这种事情。

[https://github.com/mooncatventures-group/WebStreamX_flv_demo/blob/master/WebViewController.m](https://github.com/mooncatventures-group/WebStreamX_flv_demo/blob/master/WebViewController.m)

这是它如何工作的关键，这表示如果我单击定义类型的视频链接，然后调用自定义方法播放视频，否则将链接作为普通 Web 链接处理。此 git 中还有其他代码用于播放 rtsp 提要。

```
- (BOOL)webView:(UIWebView *)webView 
shouldStartLoadWithRequest:(NSURLRequest *)request 
 navigationType:(UIWebViewNavigationType)navigationType{
  url = [[request URL] absoluteString];
    if([url hasSuffix:@".m4v"]==YES || [url hasSuffix:@"mp4"]==YES || [url hasSuffix:@"mov"] == YES || [url hasSuffix:@"mpg"] == YES){

    [self playMovie:url];
    return NO;
}else {

return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:09:54.880

尽管您不能嵌入 Safari 或 Chrome，但对于 1) 在 Android 上，您可以使用[WebView](http://developer.android.com/reference/android/webkit/WebView.html)类。在 iOS 上，您可以使用[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)类。对于 2) 这里有一个[相关的 SO 问题](https://stackoverflow.com/questions/10411250/mpmovieplayercontroller-playing-youtube-video)。HTH。

# sitecore - Sitecore - 在渲染领域存储内容的陷阱是什么

> ID：13186246
> 
> 赞同：2
> 
> 时间：2012-11-01T22:06:06.457
> 
> 标签：sitecore

我想知道是否有人有在 Sitecore 中使用渲染参数字段来存储内容的经验。如果是这样，有什么缺点？

在某些方面，这似乎是一个有吸引力的想法，因为您可以多次向页面添加子布局，而无需创建子项并将每个子布局的数据源设置为这些子项之一......但是将内容放入渲染字段有几个缺点：

1.  此解决方案不可本地化，因为渲染字段是共享的，因此不适合多语言站点。

2.  要编辑内容（如果使用内容编辑器），您需要切换到演示选项卡，单击详细信息，选择子布局然后编辑渲染参数，这有点麻烦。

采用这种方法会产生更严重的后果吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T22:18:08.387

1.  无法将工作流应用于字段。
2.  无法启用页面编辑器的字段。
3.  您可以通过使用页面编辑器并在子布局上设置数据源模板和数据源位置来轻松完成此操作。
4.  我将重申您已经指出的内容——它是一个共享字段，因此无法本地化内容。
5.  无法重用存储在参数字段中的内容。
6.  即使您这样做了，也很难从参数中获取数据，因为它们是基于 XML 的（提示：将图像添加到渲染参数并查看返回的值）

总体而言，您打破了布局字段旨在提供的内容和表示的分离。请不要这样做，有一天一个跟随你的脚步的开发者会遇到它，然后整天在[http://nooooooooooooooo.com/](http://nooooooooooooooo.com/)上。

# python - 当 MongoDB 用作数据库时使用哪个 python web 框架（django 或 django-norel 或金字塔）

> ID：13186250
> 
> 赞同：12
> 
> 时间：2012-11-01T22:06:24.963
> 
> 标签：python, django, mongodb, pyramid

我正在使用 MongoDB 作为我的主要（直到现在）数据库，并且由于 google 和它为我提供的链接，我在 Django 或 Pyramid 之间感到困惑。

我对 python 很满意，但从未在 python 中进行过 Web 开发（我在 PHP 中做过）。现在因为我将使用 Mongo，所以我不会使用 Django ORM，这会带走人们与 Django 相关联的开发便利性吗？

我是 Django 新手（只有几个小时），所以我不确定 ORM 会影响框架的哪些部分。

或者我应该使用 django fork [django-norel](http://www.allbuttonspressed.com/projects/django-nonrel)和[django mongodb 引擎](http://django-mongodb.org/)（尽管它们没有被积极维护）或者我应该使用 Pyramid，因为我计划使用 jinja2 作为我的模板层，这样 django 的两个部分对我来说毫无用处。

从 django 中删除这些电池后，它仍然是一个为有期限的人提供的框架吗？

建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T20:08:10.393

一两年前，我还在 django 和带有 mongodb 的金字塔之间做出决定，以构建一个高性能的 Web 应用程序。我最终选择了 Pyramid ：

优点：

*   Pyramid 对于全栈框架来说是非常轻量级的。引擎盖下发生了最少量的“魔法”。我能够把我的头包裹在所有的碎片上。
*   它不像 Django 那样固执己见。您可以相对轻松地即插即用您需要的任何模板引擎或数据库。
*   Pyramid 与其他全栈框架之间的性能基准给我留下了深刻的印象。
*   Pylons/Pyramid 100% 代码覆盖率和“只为你吃的东西付费”的文化对我自己的开发风格很有吸引力。

缺点：

*   社区正在成长，但仍不如 Django 成熟
*   有很多文档，但没有一些 Django 文档那么健壮
*   缺乏“魔法”和对初学者友好的文档使得学习曲线更加陡峭。

至于在 MongoDB 中使用 ORM；我建议您一开始就尝试构建没有一个。在尝试了一些 mongodb ORM 之后，我最终回到了使用 Colander 或 Validictory 进行验证的普通 pymongo。Pymongo 已经非常类似于 ORM，快速且灵活。我觉得额外的抽象层剥夺了这种灵活性，并导致我编写了比需要更多的代码。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-01T22:33:09.033

我将建议一个尚未提及的替代方案：[Flask](http://flask.pocoo.org/)。Flask 有一个非常棒的社区（尽管比 Django 小），并且在[extensions 目录](http://flask.pocoo.org/extensions/)中有很多可用于常见 Web 应用程序扩展的扩展。

Flask 有几个 MongoDB 扩展，有助于将 MongoDB 集成到框架中，但我也强烈推荐[mongoengine](http://mongoengine.org/) ORM。从事 mongoengine 工作的人之一发布了 Flask 集成的扩展[Flask-MongoEngine](https://flask-mongoengine.readthedocs.org/en/latest/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-02T08:26:17.513

全部尝试（Django、Pyramid、Flask），阅读文档，你就完成了。如果您选择 Django，您将不会使用它的某些部分（orm、formlib），仅此而已。

另请参阅此视频： [https ://www.10gen.com/presentations/mongosf-2011/mongodb-with-python-pylons-pyramid](https://www.10gen.com/presentations/mongosf-2011/mongodb-with-python-pylons-pyramid)

# google-drive-api - 如何在可索引文本中查找包含撇号的文档

> ID：13186252
> 
> 赞同：3
> 
> 时间：2012-11-01T22:06:27.840
> 
> 标签：google-drive-api

我使用这条线来构建驱动器查询

```
request.setQ("fullText contains '" + originalFileName + "'"); 
```

但是，当 originalFilename 包含“'”时，请求会引发此错误：

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request {   "code" : 400,   "errors" : [ {
    "domain" : "global",
    "location" : "q",
    "locationType" : "parameter",
    "message" : "Invalid Value",
    "reason" : "invalid"   } ],   "message" : "Invalid Value" } 
```

我理解为什么会抛出错误，但是如何构建搜索字符串来查找可索引文本中包含“常见问题解答”的文件？是否有通配符或转义符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:17:19.773

`'`你应该用 a转义`\`，所以：

```
"fullText contains \'myFile\'" 
```

# ms-access-2007 - 访问表单中的网络表单

> ID：13186256
> 
> 赞同：0
> 
> 时间：2012-11-01T22:06:49.873
> 
> 标签：ms-access-2007, webbrowser-control

我正在尝试在访问表单中合并一个 html 菜单。我如何将反馈（关于用户在网页中选择的内容）从网页获取到 Access。我正在使用 Access 2007，MS WebBrowser 组件。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-03T07:49:19.703

没有正式的方式来调用托管表单或从 WebBrowser 中启动 Access 上的任何活动。

但是，我使用了一个绝妙的技巧。加载文档后，您可以将某些元素的属性设置为 Access 表单。`htmlDoc.all.formDiv.setAttribute "outerForm", Me`

然后，您可以从 WebBrowser 中引用表单的属性和方法。

```
document.all.formDiv.outerForm.Application.DoCmd.Close(2,"webForm") 
```

**编辑**：
奇怪的是，当我添加`<META http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>`标签时，引用似乎仍然为空。看起来，现在的属性更加严格，并且 setAttribute 需要一个字符串。

下一个选项是将访问表单 ('Me') 传递给 WebBrowser 中的变量。但是，看起来全局变量或函数并没有直接公开。

但是，这可以通过向 HTMLBodyElement 的原型添加一个函数来轻松克服，该函数将其参数传递给全局变量，并且也可以返回任何类。

在 html 页面中，您将拥有以下内容：

```
var frm = null;
HTMLBodyElement.prototype.setForm = function(f){frm = f} 
```

从 Access 只需将参考向下传递：`htmlDoc.document.body.setForm(Me)`.

# linux - 如何在 Linux 上安全且事务性地替换文件？

> ID：13186263
> 
> 赞同：5
> 
> 时间：2012-11-01T22:07:27.800
> 
> 标签：linux, file, filesystems, disk-io

我能想到的最天真、最糟糕的替换文件内容的方法是：

```
f = open('file.txt', 'w')
f.write('stuff')
f.close() 
```

显然，如果该操作在关闭前的某个时间点失败，则您会丢失原始文件的内容，而不必完成新内容。

那么，什么是完全正确的方法（如果有的话）。我想它是这样的：

```
f = open('file.txt.tmp', 'w')
f.write('stuff')
f.close()
move('file.txt.tmp', 'file.txt') # dangerous line? 
```

但这完全是原子的和安全的吗？实际执行移动的正确命令是什么。如果我有另一个打开连接的进程，`file.txt`我假设它会保留指向原始文件的指针，直到关闭。如果另一个进程试图`file.txt`在移动过程中打开怎么办？

我真的不在乎我的进程得到什么版本的文件，只要它们得到一个完整的、未损坏的版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T22:16:35.033

您的实现`move`应该使用`rename`原子的函数。打开文件的进程将看到旧的或新的内容，没有中间状态。如果一个进程已经打开了文件，它将在`move`.

# ruby - 通过 rvm global gemset 将 gem 的特定 git 版本部署到乘客中

> ID：13186264
> 
> 赞同：1
> 
> 时间：2012-11-01T22:07:31.513
> 
> 标签：ruby, github, gem, passenger, gemset

我们有一个使用特定 github 版本的 handsoap gem 的乘客的部署问题，该版本在 Gemfile 中指定。

捆绑状态：

```
Using handsoap (1.1.8) from git://github.com/unwire/handsoap.git (at e6f79ec)

[ rubyapp]$ bundle show handsoap
 /usr/local/rvm/gems/ruby-1.9.3-p286@global/bundler/gems/handsoap-e6f79ec9d6a3

[ rubyapp]$ bundle show capybara
/usr/local/rvm/gems/ruby-1.9.3-p286@global/gems/capybara-1.1.3 
```

（还有很多其他的 gem，但我想我会添加 capybara 来显示它们的位置。没有其他特定的 github 版本 gem）

遗憾的是，我们没有 root 访问权限来更改到另一个 gemset - 即不是全局的，它是在项目设置之前安装的，所以我们之前无法像在本地开发环境中那样指定自定义 gemset。不幸的是，需要此版本的 gem。

乘客报告：

> git://github.com/unwire/handsoap.git（在 e6f79ec）没有被签出。请运行`bundle install`(Bundler::GitError)

我试过一个`gemset empty global`，一个追随者`bundle install` 我试过一个`gemset empty global`，一个追随者`bundle install` 我试过 `rm /usr/local/rvm/gems/ruby-1.9.3-p286@global/bundler/gems/handsoap-e6f79ec9d6a3` 一个`bundle install`

所有这些都给出了与上述相同的乘客错误。

任何帮助，将不胜感激。该应用程序以前一直在全局 gemset 中工作 - 但使用以前版本的 handsoap，但现在是时候重新部署代码了。

现在花了几个小时尝试不同的选择。

提前干杯，伊恩。

# android - 如何使用资产作为 osmdroid 离线地图的来源

> ID：13186267
> 
> 赞同：1
> 
> 时间：2012-11-01T22:07:33.960
> 
> 标签：android, osmdroid

我正在尝试在我的应用程序中使用 osmdroid 进行离线地图使用，但我找不到的是如何从`/assets`文件夹中设置图块源。所以我已经放置了瓷砖（来自[Mobile Atlas Creator](http://mobac.sourceforge.net)`/assets/maps.zip` ）， 我正在尝试这样的事情：

```
final ITileSource tileSource = 
   new XYTileSource("maps", null, 15, 17, 256, "png", "/assets");
mapview.setBuiltInZoomControls(true);
mapview.setTileSource(tileSource);
mapview.getController().setZoom(15);
mapview.setUseDataConnection(false); 
```

..这在某种程度上似乎是错误的。那么有人可以指出我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-13T10:10:15.963

好的，这个问题几年前就被问过了，
但仍然没有关于如何使用资产文件夹中的离线地图的明确信息。
所以这是我的解决方案。

1.  使用 Mobile Atlas Creator 创建地图。
    我使用 Atlas 格式 = osmdroid zip 和地图源 = OpenStreetMap 4UMaps.eu
2.  解压缩地图并放入您的资产文件夹：
    assets/map/14，其中 14 - 例如具有相应缩放级别的文件夹（您可能会有多个文件夹）
3.  添加我在互联网上某处找到的类：

    ```
    import android.content.res.AssetManager;
    import android.graphics.drawable.Drawable;    
    import org.osmdroid.ResourceProxy.string;
    import org.osmdroid.tileprovider.tilesource.BitmapTileSourceBase;
    import org.osmdroid.tileprovider.util.StreamUtils;

    import java.io.InputStream;

    /**
     * Custom tile source,
     * used to load map tiles from the assets
     */
    public class AssetsTileSource extends BitmapTileSourceBase {
        private final AssetManager mAssetManager;

        public AssetsTileSource(final AssetManager assetManager, final String aName, final string aResourceId,
                final int aZoomMinLevel, final int aZoomMaxLevel, final int aTileSizePixels,
                final String aImageFilenameEnding) {
            super(aName, aZoomMinLevel, aZoomMaxLevel, aTileSizePixels, aImageFilenameEnding);
            mAssetManager = assetManager;
        }

        @Override
        public Drawable getDrawable(final String aFilePath) {
            InputStream inputStream = null;
            try {
                inputStream = mAssetManager.open(aFilePath);
                if (inputStream != null) {
                    final Drawable drawable = getDrawable(inputStream);
                    return drawable;
                }
            } catch (final Throwable e) {
                // Tile does not exist in assets folder.
                // Ignore silently
            } finally {
                if (inputStream != null) {
                    StreamUtils.closeStream(inputStream);
                }
            }       
            return null;
        }
    } 
    ```

和

```
/**
 * Map tile provider, loads tile from assets folder
 */
public class MapTileFileAssetsProvider extends MapTileModuleProviderBase {

    protected ITileSource mTileSource;

    public MapTileFileAssetsProvider(final ITileSource pTileSource) {
        super(OpenStreetMapTileProviderConstants.NUMBER_OF_TILE_FILESYSTEM_THREADS, OpenStreetMapTileProviderConstants.TILE_FILESYSTEM_MAXIMUM_QUEUE_SIZE);

        mTileSource = pTileSource;
    }

    @Override
    public boolean getUsesDataConnection() {
        return false;
    }

    @Override
    protected String getName() {
        return "Assets Folder Provider";
    }

    @Override
    protected String getThreadGroupName() {
        return "assetsfolder";
    }

    @Override
    protected Runnable getTileLoader() {
        return new TileLoader();
    }

    @Override
    public int getMinimumZoomLevel() {
        return mTileSource != null ? mTileSource.getMinimumZoomLevel() : Constants.MAP_ZOOM_ZOOM_MAX;
    }

    @Override
    public int getMaximumZoomLevel() {
        return mTileSource != null ? mTileSource.getMaximumZoomLevel() : Constants.MAP_ZOOM_ZOOM_MIN;
    }

    @Override
    public void setTileSource(final ITileSource pTileSource) {
        mTileSource = pTileSource;
    }

    private class TileLoader extends MapTileModuleProviderBase.TileLoader {

        @Override
        public Drawable loadTile(final MapTileRequestState pState) throws CantContinueException {

            if (mTileSource == null) {
                return null;
            }

            final MapTile pTile = pState.getMapTile();
            String path = mTileSource.getTileRelativeFilenameString(pTile);

            Drawable drawable;
            try {
                drawable = mTileSource.getDrawable(path);
            } catch (final LowMemoryException e) {
                // low memory so empty the queue
                throw new CantContinueException(e);
            }

            return drawable;
        }
    }
} 
```

4.  添加常量：

```
 // map min zoom level    
 public static final int MAP_ZOOM_ZOOM_MIN = 12;    
 // map max zoom level    
 public static final int MAP_ZOOM_ZOOM_MAX = 14;     
 // maps folder name in assets       
 public static final String MAP_ASSETS_FOLDER_NAME = "map"; 
```

您可能已经猜到了，它们代表了我们之前使用 Mobile Atlas Creator 创建的最小和最大缩放级别。

5.  最后但并非最不重要
    的实现代码片段：

    ```
     // making the map not use internet     
        mBinding.mapView.setUseDataConnection(false);    

        // Initializing the tile provider to use offline maps from the assets
        // This will load for instance from /map/14/12345/12345.png
        AssetsTileSource tileSource = new AssetsTileSource(
                getAssets(),
                Constants.MAP_ASSETS_FOLDER_NAME,
                ResourceProxy.string.offline_mode,
                Constants.MAP_ZOOM_ZOOM_MIN,
                Constants.MAP_ZOOM_ZOOM_MAX,
                256, ".png");

        MapTileModuleProviderBase moduleProvider = new
                MapTileFileAssetsProvider(tileSource);
        SimpleRegisterReceiver simpleReceiver = new
                SimpleRegisterReceiver(this);
        MapTileProviderArray tileProviderArray = new
                MapTileProviderArray(tileSource, simpleReceiver, new
                MapTileModuleProviderBase[] { moduleProvider });

        mBinding.mapView.setTileProvider(tileProviderArray);

        // not forget to invalidate the map on zoom
        mBinding.mapView.setMapListener(new MapListener() {
            @Override
            public boolean onScroll(ScrollEvent scrollEvent) {
                return false;
            }

            @Override
            public boolean onZoom(ZoomEvent zoomEvent) {
                mBinding.mapView.invalidate();
                return false;
            }
        }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:33:18.280

资产路径是“file:///android_asset/”，如果你需要一个输入流，你可以通过 AssetManager 获得它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T14:51:22.247

看看[`BitmapAssetTileSource`](https://github.com/OnlyInAmerica/Osmdroid-Plus#support-for-tilesources-bundled-within-the-apk)。iBurn [-2012](https://github.com/OnlyInAmerica/iBurn-2012)也可能有助于查看它的实际运行情况。

# mysql - MySQL group by 与前瞻？

> ID：13186270
> 
> 赞同：1
> 
> 时间：2012-11-01T22:07:47.830
> 
> 标签：mysql, sql

我有一个设备何时启动或停止并出现故障代码的事件日志，并且我正在尝试计算故障和启动之间的平均时间和平均时间。这是一个非常简单的示例数据表：

```
+----+-----------+---------------------+
| id | eventName | eventTime           |
+----+-----------+---------------------+
|  1 | start     | 2012-11-01 14:25:20 |
|  2 | fail A    | 2012-11-01 14:27:45 |
|  3 | start     | 2012-11-01 14:30:49 |
|  4 | fail B    | 2012-11-01 14:32:54 |
|  5 | start     | 2012-11-01 14:35:59 |
|  6 | fail A    | 2012-11-01 14:37:02 |
|  7 | start     | 2012-11-01 14:38:05 |
|  8 | fail A    | 2012-11-01 14:40:09 |
|  9 | start     | 2012-11-01 14:41:11 |
| 10 | fail C    | 2012-11-01 14:43:14 |
+----+-----------+---------------------+ 
```

创建代码：

```
CREATE TABLE `test` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `eventName` varchar(50) NOT NULL,
  `eventTime` datetime NOT NULL,
  PRIMARY KEY (`id`)
);
INSERT INTO `test` (`id`, `eventName`, `eventTime`) VALUES (1,'start','2012-11-01 14:25:20'),(2,'fail A','2012-11-01 14:27:45'),(3,'start','2012-11-01 14:30:49'),(4,'fail B','2012-11-01 14:32:54'),(5,'start','2012-11-01 14:35:59'),(6,'fail A','2012-11-01 14:37:02'),(7,'start','2012-11-01 14:38:05'),(8,'fail A','2012-11-01 14:40:09'),(9,'start','2012-11-01 14:41:11'),(10,'fail C','2012-11-01 14:43:14'); 
```

我可以使用以下方法获取开始和失败之间的时间：

```
SET @time_prev := -1;
SELECT
 *
FROM
(
  SELECT
    eventName
  , eventTime
  , @ts := UNIX_TIMESTAMP(eventTime) AS ts
  , @started := IF(eventName = 'start', 1, 0) AS started
  , @failed := IF(eventName <> 'start', 1, 0) AS failed
  , @time_diff := IF(@time_prev > -1, @ts - @time_prev, 0) AS time_diff
  , @time_prev := @ts AS time_prev
  , @time_to_fail := IF(@failed, @time_diff, 0) AS time_to_fail
  , @time_to_start := IF(@started, @time_diff, 0) AS time_to_start
  FROM
    test
) AS t1;

+-----------+---------------------+------------+---------+--------+-----------+------------+--------------+---------------+
| eventName | eventTime           | ts         | started | failed | time_diff | time_prev  | time_to_fail | time_to_start |
+-----------+---------------------+------------+---------+--------+-----------+------------+--------------+---------------+
| start     | 2012-11-01 14:25:20 | 1351805120 |       1 |      0 |         0 | 1351805120 | 0            | 0             |
| fail A    | 2012-11-01 14:27:45 | 1351805265 |       0 |      1 |       145 | 1351805265 | 0            | 145           |
| start     | 2012-11-01 14:30:49 | 1351805449 |       1 |      0 |       184 | 1351805449 | 184          | 0             |
| fail B    | 2012-11-01 14:32:54 | 1351805574 |       0 |      1 |       125 | 1351805574 | 0            | 125           |
| start     | 2012-11-01 14:35:59 | 1351805759 |       1 |      0 |       185 | 1351805759 | 185          | 0             |
| fail A    | 2012-11-01 14:37:02 | 1351805822 |       0 |      1 |        63 | 1351805822 | 0            | 63            |
| start     | 2012-11-01 14:38:05 | 1351805885 |       1 |      0 |        63 | 1351805885 | 63           | 0             |
| fail A    | 2012-11-01 14:40:09 | 1351806009 |       0 |      1 |       124 | 1351806009 | 0            | 124           |
| start     | 2012-11-01 14:41:11 | 1351806071 |       1 |      0 |        62 | 1351806071 | 62           | 0             |
| fail C    | 2012-11-01 14:43:14 | 1351806194 |       0 |      1 |       123 | 1351806194 | 0            | 123           |
+-----------+---------------------+------------+---------+--------+-----------+------------+--------------+---------------+ 
```

但是为了获得失败和开始之间的时间，我必须前进到下一条记录并丢失该失败代码的分组。如何将其移至下一个级别并将未来开始合并到失败的记录中，以便对其进行分组？

最终，在计算了平均值和中位数之后，我会得到如下结果集：

```
+-----------+-------------+----------------+--------------+-----------------+
| eventName | avg_to_fail | median_to_fail | avg_to_start | median_to_start |
+-----------+-------------+----------------+--------------+-----------------+
|    fail A |      110.66 |         124.00 |       103.00 |           63.00 |
|    fail B |      125.00 |         125.00 |       185.00 |          185.00 |
+-----------+-------------+----------------+--------------+-----------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:22:54.953

这给出了平均值 中位数在 SQL 中是一种痛苦。[用 MySQL 计算中位数的简单方法](https://stackoverflow.com/questions/1291152/simple-way-to-calculate-median-with-mysql)给出了一些想法。如果存在中值聚合，则两个内部查询将结果集提供给中值。

```
Select
  times.eventName,
  avg(times.timelapse) as avg_to_fail,
  avg(times2.timelapse) as avg_to_start
From (
  Select
    starts.id,
    starts.eventName,
    TimestampDiff(SECOND, starts.eventTime, Min(ends.eventTime)) as timelapse
  From
    Test as starts,
    Test as ends
  Where
    starts.eventName != 'start' And
    ends.eventName = 'start' And
    ends.eventTime > starts.eventTime
  Group By
    starts.id
) as times2
  Right Outer Join (
  Select
    starts.id,
    ends.eventName,
    TimestampDiff(SECOND, starts.eventTime, Min(ends.eventTime)) as timelapse
  From
    Test as starts,
    Test as ends
  Where
    starts.eventName = 'start' And
    ends.eventName != 'start' And
    ends.eventTime > starts.eventTime
  Group By
    starts.id
) as times
  On times2.EventName = times.EventName
Group By
  Times.eventName 
```

为了帮助理解，我首先考虑

```
Select
  starts.id,
  ends.eventName,
  starts.eventTime, 
  ends.eventTime
From
  Test as starts,
  Test as ends
Where
  starts.eventName = 'start' And
  ends.eventName != 'start' And
  ends.eventTime > starts.eventTime 
```

`times`这就是没有 group by 和 min 语句的内部查询的本质。您会看到这有一行将每个开始事件与每个结束事件组合在一起，其中结束事件在开始事件之后。称之为 X。

下一部分是

```
Select
  X.startid,
  X.endeventname,
  TimestampDiff(SECOND, X.starttime, Min(x.endTime)) as timelapse
From
  X
Group By
  X.startid 
```

这里的关键是 Min(x.endTime) 与 group by 结合。所以我们得到了开始时间之后的最早结束时间（因为 X 已经限制它在之后）。虽然我只选择了我们需要使用的列，但我们可以在此处访问开始时间 id、结束时间 id 开始事件、结束事件、开始时间、分钟（结束时间）。您可以调整它以找到 avg_to_start 的原因是因为我们选择了有趣的事件名称，因为我们都有。

SQL小提琴：[http ://sqlfiddle.com/#!2/90465/6](http://sqlfiddle.com/#!2/90465/6)

# ruby-on-rails - Rails 测试数据，在数据库中

> ID：13186273
> 
> 赞同：1
> 
> 时间：2012-11-01T22:08:12.550
> 
> 标签：ruby-on-rails, activerecord, fixtures

这可能是我的一个基本误解。我的应用程序中有一堆逻辑，它从几个表中收集数据集并将它们组合到内存结构中。我想为该逻辑编写测试。

在我看来，fixtures、factory girl 和类似的工具构建了内存模型实例。如果我进行 activerecord 调用，`Model.find(foo: 12)`那么这些调用是否仅适用于已保存的记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:24:45.647

在大多数情况下，我同意@mrbrdo 的意见：更喜欢rpsec 的存根方法。但作为 Rails 程序员，我认为您必须同时了解“夹具”和“存根”。

固定装置，无论是`yaml`文件还是 . `factory girl data`，都将保存到数据库中。查看您的`config/database.yml`文件以了解它们所在的位置。实际上，当您想确保测试期间数据库中始终存在一些数据时，这很有用，例如具有固定 ID 的“管理员用户”。

Stubs, it's faster than fixture since it won't be saved into DB, and maybe very useful when you want to perform a test that can't implemented by "Fixtures".

So, I suggest that you try both of them in your real coding life, and choose either of them according to the real context.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:17:48.123

你说的不是真的，夹具或工厂女孩**将**使用数据库。不过，我会避免使用固定装置，现在人们通常不使用它们。

不过，真正编写测试的正确方法是将 activerecord 调用存根，因为这将使您的测试更快。您要测试的是将数据组合到您的结构中，而不是将数据从数据库中提取出来——该部分已经在 activerecord 的测试中进行了测试。

所以像这样存根查找器（如果您使用的是rspec）：

```
Model.should_receive(:find).with(foo: 12) do
  Model.new(foo: 12, other_attribute: true)
end 
```

因此，当您正在测试的方法调用 Model.find(foo: 12) 时，它会得到

```
Model.new(foo: 12, other_attribute: true) 
```

这比实际在数据库中创建它然后将其拉出要快得多，并且对于您正在测试的内容没有意义 - 这并不重要。您还可以在实例上存根保存等，具体取决于您的方法正在执行的操作。请记住，从数据库检索数据并保存到数据库都已经在 activerecord 的测试中进行了测试，您没有必要重新进行这些测试 - 只需关注您的特定逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T22:19:27.330

FactoryGirl 支持多种构建策略，包括一种将记录保存到数据库的策略。

这很简单：`FactoryGirl.create(:foo)`将创建一个*foo*并将其保存到数据库中，而`FactoryGirl.build(:foo)`只会创建该对象的内存版本。

有关构建策略的更多信息，请参见此处：[https](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md) ://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md ，在“使用工厂”部分。

# javascript - JTwitter 插件返回 404

> ID：13186277
> 
> 赞同：0
> 
> 时间：2012-11-01T22:08:28.223
> 
> 标签：javascript, jquery, plugins, twitter

奇怪的问题，因为插件工作得很好，但从某个时候开始就停止工作了。现在返回 404 错误。现在看来 twitter id 是错误的。

此页面上的插件

```
http://archive.plugins.jquery.com/project/jtwitter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:35:49.007

这个插件似乎是从 2009 年开始的，我猜它可能还没有更新，无法与 Twitter API 的最新版本一起使用。我会找到一个不同的解决方案。

对于特定的 CMS 或平台，您是否需要它？

# mysql - 在 Rails 中的 SQL 查询期间剥离非数字值的电话号码

> ID：13186281
> 
> 赞同：0
> 
> 时间：2012-11-01T22:08:45.587
> 
> 标签：mysql, sql, ruby-on-rails, ruby-on-rails-3

我有一个新餐馆列表，我想使用电话号码将它们与餐馆数据库进行核对。电话号码的问题在于它们在数据库中具有不同的格式（即`123-345-6789`或`(123)-456 8988`）。

到目前为止，我已经为手机创建了一个索引，以便快速搜索它们。我还删除了新餐厅的电话号码，以便它们只包含数值 (0-9)。

现在，我想在比较之前删除数据库的数字，以便严格比较数字。

```
#strip the phone of non-numeric values and spaces
formatted_phone = SunspotHelper.sanitize_term(pr.phone).gsub(/\s+/, "") 

Restaurant.where(contact_phone: formatted_phone).each do |r|
  #irrelevant code here
end 
```

上面代码的问题是contact_phone（来自数据库）将采用非剥离格式。到目前为止，我的研究使我相信我必须使用类似的东西`REGEXP_LIKE`，但我不太确定如何使用 Rails 来实现它。我不想更新数据库 - 我只是想剥离数字进行比较，同时仍将原始格式保留在数据库中。

在与 进行比较之前，如何从数据库中去除电话号码`contact_phone`的非数字值`formatted_phone`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:38:31.263

如果您只想将工作量限制在 Rails 查询上（而不是在数据库的另一个字段中正确格式化电话号码），那么您可以使用数据库引擎的 REGEXP 功能

```
Restaurant.where(["REGEXP_REPLACE(contact_phone, '[^[:digit:]]', '') = ?", formatted_phone]).each do |r|
  #irrelevant code here
end 
```

# google-maps - 谷歌地图中的多边形层来自融合表中的 kml 数据

> ID：13186287
> 
> 赞同：1
> 
> 时间：2012-11-01T22:09:26.137
> 
> 标签：google-maps, kml, polygon, google-fusion-tables

我有一个融合表，其中包含一列中的 kml 数据，显示为建筑物的边界。我想在我自己的动态谷歌地图中使用这些数据。到目前为止，这是我编写的代码：

```
function initialize() {
 var mapOptions = {
    center: new google.maps.LatLng(41.558, -72.651),
    zoom: 14,
    mapTypeId: google.maps.MapTypeId.HYBRID
 };
 map = new google.maps.Map(document.getElementById("map_canvas"), 
                mapOptions);

 layer = new google.maps.FusionTablesLayer({
    query: {
       select: 'geometry',
       from: '5336096'//'1ZhE_f12VDQ5zr82cbftVn1Jpff_TK5ZQmC3h52Y'
    },
    heatmap: {
       enabled: true
    },
    styles: [{
       polygonOptions: {
      fillColor: "#00FFFF",
      opacity: 0.3
       }
    }]
 });

 layer.setMap(map);

  } 
```

到目前为止，它所做的是在每个建筑物上放置一个小绿点，但不是在整个多边形上。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:36:02.660

移除热图：{ enabled: true }

[这个版本](http://www.geocodezip.com/v3_FusionTablesLayer_linktoA.html?lat=41.555187&lng=-72.657291&zoom=15&type=m&tableid=5336096)有效。

# ruby - 使用 Mechanize 的 getaddrinfo 错误

> ID：13186289
> 
> 赞同：7
> 
> 时间：2012-11-01T22:09:29.733
> 
> 标签：ruby, mechanize, mechanize-ruby

我编写了一个脚本，它将遍历我们数据库中的所有客户，验证他们的网站 URL 是否有效，并尝试在他们的主页上找到一个 Twitter 链接。我们有超过 10,000 个 URL 需要验证。在验证了 url 的一小部分之后，我们开始为每个 URL 获取 getaddrinfo 错误。

这是抓取单个 URL 的代码副本：

```
def scrape_url(url) 
  url_found = false 
  twitter_name = nil 

  begin 
    agent = Mechanize.new do |a| 
      a.follow_meta_refresh = true 
    end 

    agent.get(normalize_url(url)) do |page| 
      url_found = true 
      twitter_name = find_twitter_name(page) 
    end 

    @err << "[#{@current_record}] SUCCESS\n" 
  rescue Exception => e 
    @err << "[#{@current_record}] ERROR (#{url}): " 
    @err << e.message 
    @err << "\n" 
  end 

  [url_found, twitter_name] 
end 
```

注意：我还运行了此代码的一个版本，它创建了一个 Mechanize 实例，该实例在所有对 scrape_url 的调用中共享。它以完全相同的方式失败了。

当我在 EC2 上运行它时，它几乎正好通过了 1,000 个 URL，然后为剩余的 9,000+ 返回此错误：

```
getaddrinfo: Temporary failure in name resolution 
```

注意，我尝试过使用亚马逊的 DNS 服务器和谷歌的 DNS 服务器，认为这可能是一个合法的 DNS 问题。在这两种情况下，我得到了完全相同的结果。

然后，我尝试在本地 MacBook Pro 上运行它。在为其余记录返回此错误之前，它仅通过了大约 250 次：

```
getaddrinfo: nodename nor servname provided, or not known 
```

有谁知道我怎样才能让脚本通过所有记录？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T20:59:55.107

我找到了解决方案。Mechanize 使连接保持打开状态并依靠 GC 来清理它们。在某个点之后，有足够的打开连接，无法建立额外的出站连接来进行 DNS 查找。这是导致它工作的代码：

```
agent = Mechanize.new do |a| 
  a.follow_meta_refresh = true
  a.keep_alive = false
end 
```

通过将keep_alive 设置为false，连接会立即关闭并清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:07:43.277

看看这是否有帮助：

```
agent.history.max_size = 10 
```

它将防止历史使用过多的内存

# c# - word自动化服务生成文件后如何自动更新属性？

> ID：13186297
> 
> 赞同：1
> 
> 时间：2012-11-01T22:10:54.533
> 
> 标签：c#, sharepoint-2010, workflow, word-automation, event-receiver

我使用 Open XML + Word Automation 从模板生成 word 文件并将其转换为 pdf。现在 Word 文档和生成的 PDF 都在同一个文档库中。word 文档有一些属性，这些属性是在创建/上传到库时添加的。

**我现在尝试做的是在 PDF 生成后自动向它们添加属性。**PDF 将具有与生成它的 Word 文档相同的属性。

起初我尝试使用事件接收器，但程序似乎没有识别出文档库中添加了一个新项目（生成的 PDF）。

然后我尝试使用工作流（SharePoint Designer），但它也不起作用（无法启动）。结果显示“*工作流程 AddPDFData 已被系统帐户取消*”和“ *AddPDFData 无法启动*”。工作流设置为在创建项目时开始。我知道工作流程本身是正确的，因为当我将其设置为在更改项目时启动时它工作正常。

请提出我是否可能做错的任何事情，或者是否有任何我可以使用的方法。任何想法/建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:35:23.003

生成文档时事件接收器不触发确实很痛苦，但是，**您绝对可以使用工作流**和“AutoStartOnCreate”。它有效，我已经做到了。至少它适用于 Visual Studio 2010 在 SharePoint 2010 中创建的工作流。

我不能说您的工作流程有什么问题，但我建议如果您将任何项目添加到列表中，那么该项目的工作流程将“启动失败”，而不仅仅是 WAS 生成的项目。该错误通常意味着工作流无法正确验证 - 错误的相关标记、缺少所需的东西等，您可以在其他地方查看更多详细信息。

# arduino - Arduino I²C 启动后冻结

> ID：13186298
> 
> 赞同：10
> 
> 时间：2012-11-01T22:10:58.880
> 
> 标签：arduino

我正在尝试[I²C](http://en.wikipedia.org/wiki/I%C2%B2C)设置，其中一个主 Arduino 控制两个从机。

![在此处输入图像描述](../Images/e2da63a5fa6a38320d2673cb719e1867.png)

我为 I²C 使用了两个 2000 欧姆的上拉电阻，所有板都是[Arduino Duemilanoves](http://arduino.cc/en/Main/ArduinoBoardDuemilanove)。I²C 设置和控制设置在彼此断开连接时都能正常运行，但在连接时，只要`wire.write`调用第一个函数，Arduino 就会变得无响应。我停止接收串行消息，从 Arduinos 停止接收来自主机的消息，并且我失去了使用按钮打开和关闭系统的能力。

我尝试在每个`wire.write`功能之后添加短暂的延迟，并使用各种上拉电阻来尝试解决问题，但似乎没有任何效果。我怎样才能解决这个问题？

**主码：**

```
#include <Wire.h>

int potPin1 = 0;    // Select the input pin for the potentiometer
int potPin2 = 1;
int potVal1;       // Variable to store the value coming from the sensor
int potVal2;
int times=0;   // All the below variables are used to control an on-off button
int state=0;
int lastState=0;
boolean pot=false;

void setup()
{
    pinMode(13, OUTPUT);  //LED that turns on when system is activated
    pinMode(3, INPUT);    //Button that turns on system
    Serial.begin(9600);
    Wire.begin();
}

void loop(){
    state=digitalRead(3);
    if(state != lastState){
        if(state==HIGH){
            times++;
            Serial.println(times);
        }
        else{
            Serial.println("off");
        }
    }

    lastState=state;

    if(times%2 ==1)
    {
        turnPotOn();
    }
    else
    {
        turnPotOff();
    } 
```

//到目前为止，循环中的所有代码都会在按下按钮时打开和关闭系统。//以下代码对应于基于电位计读数的 I²C。

```
 if(pot==true)
    {
        potVal1 = analogRead(potPin1);    // Read the value from the sensor
        potVal2 = analogRead(potPin2);

        if((potVal1>700) && (300<potVal2) && (potVal2<700))
        {
            arduino1_motor1();
        }
        else if ((potVal1<330) && (336<potVal2) && (potVal2<683))
        {
            arduino1_motor2();
        }
        else if ((potVal2>683) && (330<potVal1) && (potVal1<640))
        {
            arduino2_motor3();
        }
        else if ((potVal2<336) && (330<potVal1) && (potVal1<640))
        {
            arduino2_motor4();
        }
        else if ((potVal2<336) && (potVal1<330))
        {
            arduino12_motor24();
        }
        else if ((potVal2>683) && (potVal1>640))
        {
            arduino12_motor23();
        }
        else if ((potVal2>683) && (potVal1<640))
        {
            arduino11_motor23();
        }
        else if ((potVal2<336) && (potVal1>330))
        {
            arduino11_motor24();
        }
        else
        {
            arduino12_still();
        }
    }
    else
    {
        // arduino1_still();
        // arduino2_still();
        Serial.println("OFF");
    }
}

void turnPotOff()
{
    digitalWrite(13, LOW);
    pot=false;
}

void turnPotOn()
{
    digitalWrite(13, HIGH);
    pot=true;
}

void arduino1_motor1()
{
    Wire.beginTransmission(5);
    Wire.write('A');
    Wire.endTransmission();
    arduino2_still();
    Serial.println("A1 in M1 d");
}

void arduino1_motor2()
{
    Wire.beginTransmission(5);
    Wire.write('B');
    Wire.endTransmission();
    arduino2_still();
    Serial.println("A1 in m2 d");
}

void arduino12_still()
{
    arduino1_still();
    arduino2_still();
    Serial.println("A1 & A2 stl");
}

void arduino2_motor3()
{
    arduino1_still();
    Wire.beginTransmission(10);
    Wire.write('M3');
    Wire.endTransmission();
    Serial.println("A2 in M3 d");
}

void arduino2_motor4()
{
    arduino1_still();
    Wire.beginTransmission(10);
    Wire.write('D');
    Wire.endTransmission();
    Serial.println("A2 in M4 d");
}

void arduino12_motor24()
{
    Wire.beginTransmission(5);
    Wire.write('B');
    Wire.endTransmission();
    Wire.beginTransmission(10);
    Wire.write('D');
    Wire.endTransmission();
    Serial.println("A1 & A2 in M2 and M4 d");
}

void arduino12_motor23()
{
    Wire.beginTransmission(5);
    Wire.write('B');
    Wire.endTransmission();
    Wire.beginTransmission(10);
    Wire.write('C');
    Wire.endTransmission();
    Serial.println("A1 & A2 in M2 and M3 d");
}

void arduino11_motor24()
{
    Wire.beginTransmission(5);
    Wire.write('A');
    Wire.endTransmission();
    Wire.beginTransmission(10);
    Wire.write('D');
    Wire.endTransmission();
    Serial.println("A1 & A2 in M1 and M4 d");
}

void arduino11_motor23()
{
    Wire.beginTransmission(5);
    Wire.write('A');
    Wire.endTransmission();
    Wire.beginTransmission(5);
    Wire.write('C');
    Wire.endTransmission();
    Serial.println("A1 & A2 in M1 and M3 d");
}

void arduino1_still()
{
    Wire.beginTransmission(5);
    Wire.write('S');
    Wire.endTransmission();
}

void arduino2_still()
{
    Wire.beginTransmission(10);
    Wire.write('S');
    Wire.endTransmission();
} 
```

**从站 1 代码：**

```
#include <Servo.h>
#include <Wire.h>

Servo myservo1;
Servo myservo2;

void setup()
{
    Serial.begin(9600);          //  setup serial
    myservo1.attach(2);
    myservo2.attach(3);
    Wire.begin(5);
    Wire.onReceive(receiveEvent);

}

void loop()
{
}

void receiveEvent(int howMany)
{
  while(Wire.available())
  {
    char v = Wire.read();

    if(v == 'A')
    {
      myservo1.write(0);
      myservo2.write(180);
      Serial.println("Arduino 1 in motor 1 direction");
    }
    else if(v == 'B')
    {
      myservo1.write(180);
      myservo2.write(0);
      Serial.println("Arduino 1 in motor 2 direction");
    }
    else
    {
      myservo1.write(90);
      myservo2.write(85);
      Serial.println("Arduino 1 still");
    }
  }
} 
```

**奴隶 2：**

```
#include <Servo.h>
#include <Wire.h>

Servo myservo3;
Servo myservo4;

void setup()
{
    Serial.begin(9600);         // Setup serial
    myservo3.attach(2);
    myservo4.attach(3);
    Wire.begin(10);
    Wire.onReceive(receiveEvent);
}

void loop()
{
}

void receiveEvent(int howMany)
{
    while(Wire.available())
    {
        char v = Wire.read();

        if(v == 'C')
        {
            myservo3.write(0);
            myservo4.write(180);
            Serial.println("Arduino 2 in motor 3 direction");
        }
        else if(v == 'D')
        {
            myservo3.write(180);
            myservo4.write(0);
            Serial.println("Arduino 2 in motor 4 direction");
        }
        else
        {
            myservo3.write(90);
            myservo4.write(90);
            Serial.println("Arduino 2 still");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T05:10:56.647

“接收事件”在 ISR 中，在事件函数返回之前不会退出

哦，顺便说一句，AVR 硬件将 I2C 总线保持在冻结状态，直到此事件退出，也称为时钟拉伸

哦，你猜怎么着，Wire 没有将 FIFO 变量声明为 volatile，所以即使他有 while (Wire.available())，这也会变成一个无限循环，因为 available() 永远不会改变，因为这一切都发生在中断和rxBufferIndex 和 rxBufferLength 未声明为 volatile

[http://www.nongnu.org/avr-libc/user-manual/FAQ.html#faq_volatile](http://www.nongnu.org/avr-libc/user-manual/FAQ.html#faq_volatile)

这是一个可能的原因

在这里插入关于 Arduino 及其糟糕的库的愤怒咆哮

解决方案？使用另一个库，“Wire.h”借用的TWI实用程序，如果你知道如何，可以直接使用，而且很棒，我一直在使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:30:24.560

这可能会对您有所帮助：

好的，所以这将是一堵文字墙，我已经在发布之前意外关闭了一次标签，所以我可能听起来很生气，因为 Arduino 的这个“功能”真的很糟糕，如果你插入一个3.3v设备进去。您正在使用 Wire Library，它在 SDA 和 SCL 引脚上启用了非常糟糕的 20k 内部上拉。

在每个 ARDUINO 上。您的情况是总上拉电阻现在被破坏（拧紧）。您需要研究如何禁用内部上拉。我建议修改库。出于整体原因，这种控制永远不应该在软件中完成。在所需的外部上拉上仔细检查他的数学。Arduino 上每个 SCL/SDA 引脚的电容应为 10pF。

这是直接来自 ATMEGA 数据表的公式

[http://i.imgur.com/ZAByF.png](http://i.imgur.com/ZAByF.png)

这是 ATMEGA 数据表，I2C 部分见第 21 节

[http://www.atmel.com/Images/doc8161.pdf](http://www.atmel.com/Images/doc8161.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-20T21:19:52.633

你不能在receiveEvent里面写

receiveEvent 定义命令，然后主机应该调用 requestFrom 并请求值，从机处理 (requestEvent) 并在那里使用 write。

即1-主线。写入（命令名称）

2- slave：处理（receiveEvent）并获取命令ID

3- Master 发送 requestFrom

4- 从机处理（requestEvent）并根据命令 ID 向主机发送回复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T11:35:58.177

与其尝试使用多个从属设备，不如先使用单主设备和单从设备配置启动。并尽量保持程序尽可能简单。您创建功能，如接收和发送到主/从

# javascript - 为什么这个返回哈希会给我带来问题？

> ID：13186299
> 
> 赞同：1
> 
> 时间：2012-11-01T22:10:59.530
> 
> 标签：javascript, arrays, key

> **可能重复：**
> [使用 Javascript 对象键的变量](https://stackoverflow.com/questions/2274242/using-a-variable-for-a-javascript-object-key)

我不知道我是怎么搞砸的。

我的代码给了我错误：

```
invalid property id 
```

代码：

```
 return  { this.Obj.itemid :
               {  Color : this.Obj.color,
                  Name : this.Obj.name,
                  Year : this.Obj.year
                }
           }; 
```

我需要将这些哈希作为数组返回（因此返回），但无论我做什么，它要么返回上面的错误，要么 var 引用被字符串化。我实际上无法将其中的动态 js 值作为键。

我试过这个：

```
" + this.Obj.itemid + " 
```

还有这个：

```
var itemid = this.Obj.itemid;
return { itemid : {
         //etc..
    }} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T22:13:29.843

问题是您不能`this.Obj.itemid`以这种方式使用。

相反，请尝试以下操作：

```
var ret={};
ret[this.Obj.itemid]=
   {
      Color : this.Obj.color,
      Name : this.Obj.name,
      Year : this.Obj.year
   };
return ret; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T22:15:21.243

属性初始值设定项中冒号左侧出现的内容必须是有效的标识符、字符串文字或数字文字。它总是按字面意思使用。`this.Obj.itemid`这些都不是。

如果您尝试使用 的*值*作为`this.Obj.itemid`属性名称，则：

```
var ret = {};
ret[this.Obj.itemid] = {
    Color : this.Obj.color,
    Name : this.Obj.name,
    Year : this.Obj.year
}; 
```

这利用了这样一个事实，即您可以将括号表示法与属性名称的任何表达式一起使用。`ret[this.Obj.itemid] = ...`将创建一个属性，`ret`其名称是表达式的结果`this.Obj.itemid`。

更简单的例子：

```
var foo = {};
var b = "bar";
foo[b] = 42;
console.log(foo.bar); // "42" 
```

# android - 如何使用滚动条在 ScrollView 中滚动

> ID：13186303
> 
> 赞同：2
> 
> 时间：2012-11-01T22:11:07.877
> 
> 标签：android, scrollview

当我滚动 ScrollView 时，我通过上下触摸和移动手指来上下移动内容，但是这种行为我想触摸 ScrollView，当我向下移动手指（滚动条向下移动）时，ScrollView 的内容应该提升。如果我可以拖动滚动条而不是 ScrollView 的内容，我会得到想要的结果，但我该怎么做呢？

# python - 如何在 wxPython 的 Notebook 页面中添加和删除控件？

> ID：13186305
> 
> 赞同：1
> 
> 时间：2012-11-01T22:11:25.363
> 
> 标签：python, wxpython

基于用户交互，我想在 wxPython 笔记本的面板中动态添加和删除控件。我尝试过的最彻底的方法是调用`.Clear()`面板的 sizer 并添加所有新控件。但是，在 Windows 7 和 Linux 桌面上，渲染工件和过时的控件在新内容下仍然可见。如何在没有这些工件的情况下完全删除旧控件并添加新控件？

下面是在 Windows 7 上重现该问题的示例程序。请注意 和 的两种不同`.update()`方法：`StaticPanel``DynamicPanel`

```
#!/usr/bin/python
import wx
import sys

class StaticPane(wx.Panel):
    """A panel that contains simple text that is updated
    when the .update() method is called. The text is updated
    using .SetText(), and the text control sticks around 
    between calls to .update()."""
    def __init__(self, *args, **kwargs):
        super(StaticPane, self).__init__(*args, **kwargs)
        self._sizer = wx.BoxSizer(wx.VERTICAL)
        self.SetSizer(self._sizer)
        self._counter = 0
        self._base_text = "Some Text"
        self._text = wx.TextCtrl(self, -1,
                                 self._base_text + "!" * self._counter,
                                 style=wx.TE_READONLY)
        self._sizer.Add(self._text, -1, wx.EXPAND)

    def update(self):
        self._counter += 1
        self._text.SetValue(self._base_text + "!" * self._counter)

class DynamicPane(wx.Panel):
    """A panel that contains simple text that is updated
    when the .update() method is called. The text is updated
    by removing the existing text control, and adding a new one
    with the updated text string."""
    def __init__(self, *args, **kwargs):
        super(DynamicPane, self).__init__(*args, **kwargs)
        self._sizer = wx.BoxSizer(wx.VERTICAL)
        self.SetSizer(self._sizer)
        self._counter = 0
        self._base_text = "Some Text"
        self._text = wx.TextCtrl(self, -1,
                                 self._base_text + "!" * self._counter,
                                 style=wx.TE_READONLY)
        self._sizer.Add(self._text, -1, wx.EXPAND)

    def update(self):
        self._counter += 1
        self._sizer.Clear()
        self._text = wx.TextCtrl(self, -1,
                                 self._base_text + "!" * self._counter,
                                 style=wx.TE_READONLY)
        self._sizer.Add(self._text, -1, wx.EXPAND)
        self.Layout()

class TestViewer(wx.Frame):
    """A Frame with a button and a notebook. When the button is pressed, 
    each of the two pages in the notebook recieve a call to .update().
    """
    def __init__(self, parent):
        super(TestViewer, self).__init__(parent, -1, "Test Viewer")
        self.Bind(wx.EVT_CLOSE, self.OnClose)

        self._panel = wx.Panel(self)
        vbox = wx.BoxSizer(wx.VERTICAL)
        self._panel.SetSizer(vbox)

        update_button = wx.Button(self._panel, wx.ID_CLOSE, "Update")
        update_button.Bind(wx.EVT_BUTTON, self.update)
        vbox.Add(update_button, 0, wx.EXPAND)

        self._nb = wx.Notebook(self._panel)
        self._view_one = StaticPane(self._nb, -1)
        self._view_two = DynamicPane(self._nb, -1)
        self._nb.AddPage(self._view_one, "One")
        self._nb.AddPage(self._view_two, "Two")
        vbox.Add(self._nb, 1, wx.EXPAND | wx.ALL)

        self.Layout()

    def update(self, e):
        self._view_one.update()
        self._view_two.update()

    def OnClose(self, event):
        sys.exit(0)

if __name__ == "__main__":
    app = wx.App(False)
    frame = TestViewer(None)
    frame.Show()
    app.MainLoop() 
```

单击“更新”按钮更新两个面板中的文本。第一个面板使用 更新文本控件`.SetText()`，而第二个面板将 替换`TextCtrl`为新的。请注意，在单击几次按钮后调整窗口大小或将鼠标悬停在第二个面板上时，会出现重叠的控件和其他伪影。

以下是显示堆叠控件的屏幕截图。两张图片都是在点击相同次数的按钮后拍摄的，它们只是显示两个不同的面板处于相同的状态。我希望文本完全一样。

![面板 1 (<code>.SetText()</code>)](../Images/2adbe013a363866ace73a4403648bce0.png) ![面板 2（<code>TextCtrl</code> 已替换）](../Images/43a5bc38bcf7e5274a603903c6fa8ea9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:50:18.520

简单地清除 sizer 只会删除对其内容的引用，而不是小部件。当您创建一个小部件时，它将注册到您提供的父窗口。考虑以下代码：

```
class Frame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self,None)
        self.textCtrl = wx.TextCtrl(self) # create with Frame as parent
        self.textCtrl = None # has no effect on the TextCtrl 
```

父窗口（本例中为 Frame）将拥有 TextCtrl 的所有权，即使您将其设置为 None，Frame 也会使其保持活动状态，直到它被销毁。要删除 TextCtrl，您必须明确地销毁它：

```
self.textCtrl.Destroy() 
```

如果要一次删除所有子小部件，可以使用：

```
self.DestroyChildren() 
```

# python - Selenium Grid 2 节点测试确实停止运行

> ID：13186308
> 
> 赞同：2
> 
> 时间：2012-11-01T22:11:39.840
> 
> 标签：python, selenium

我在运行 Ubuntu 的虚拟机中配置了一个 selenium 2.25.0 集线器来运行我的测试套件。如果我在 VM 中使用一个节点，我的测试将运行到完成就好了。当我在主机（Windows 7）上使用节点并订阅该集线器时，会出现问题。第一个测试执行没有问题，然后 web 驱动程序打开一个空白窗口并挂起，直到节点回收它，但这还不是全部。要测试的站点（也在 VM 上）变得无法访问，尽管它仍然是 VM 上正在运行的进程，这迫使我重新启动它。我认为这不是端口转发问题，因为我可以随心所欲地从主机手动访问网站，但是当我运行测试时，我得到一个测试然后挂起。

quit() 函数似乎是它的开始。如果我删除它，我可以执行我配置的并行测试限额，但之后你必须等待集线器回收运行更多，但它不会破坏网站。

完成后是否有更好的方法来关闭浏览器，或者我在这里缺少/没有尝试过什么？提前致谢。

# django - 在 Django 中使用帐户和用户生成的数据

> ID：13186311
> 
> 赞同：0
> 
> 时间：2012-11-01T22:11:46.900
> 
> 标签：django, web-applications

我还没有找到关于这个主题的任何文档或教程，也没有在 IRC 频道上收到任何答案，所以这让我觉得我在寻找错误的东西。无论如何，经过几个小时的搜索后诉诸SO。我将尝试通过示例来描述我所追求的：

1.  我想创建一个用户可以创建帐户的 Web 应用程序（这部分很清楚
2.  登录后，用户可以存储他最喜欢的饭菜
3.  当用户登录时，他会看到他最喜欢的饭菜列表，他可以对其进行编辑

我了解用户如何创建帐户并登录。但之后的一切都有些模糊。

用户登录后，假设他会看到一个他可以填写并保存的表格。应该如何设计数据库（模型）来处理这个问题？每个用户都会得到自己的桌子吗？如何从数据库中检索用户存储的数据（即喜欢的食物）？

这些是我在学习 django/编程时想要弄清楚的事情。正如我所说，我没有在我浏览过的任何书籍、文档或教程中找到它的描述。

如果您能指出正确的方向，我将不胜感激。我觉得我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:38:57.920

基本的东西：

1.  为模型中的用户创建外键
2.  禁止表单中的用户字段
3.  使用 commit=False 保存表单，将用户设置为经过身份验证的用户并保存模型。

其余的你可以从教程中得到相当直接的结果。

例如：

```
# At models.py
from django.contrib.auth.models import User

class FavoriteMeal(models.Model):
    user = models.ForeignKey(User)
    # other fields...

# At forms.py
class FavoriteMealForm(forms.ModelForm):
    class Meta:
        model = FavoriteMeal
        exclude = ('user', )

# At views.py
@login_required
def favorite_meals_view(request):
    favorite_meals = FavoriteMeal.objects.filter(user=request.user)
    ...
    if request.method == 'POST':
        form = FavoriteMealForm(request.POST)
        if form.is_valid():
            favorite_meal = form.save(commit=False)
            favorite_meal.user = request.user
            favorite_meal.save()
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:33:45.427

您正在寻找的是 django 的非常基本的部分。我建议你通过教程。这将使您对如何使用模型关系来存储数据有相当多的了解。

[https://docs.djangoproject.com/en/1.4/intro/tutorial01/](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)

# bash - cygwin：超时语法总是失败

> ID：13186313
> 
> 赞同：1
> 
> 时间：2012-11-01T22:12:00.053
> 
> 标签：bash, command, cygwin

使用 Cygwin，我尝试使用“超时”让我的脚本休眠几秒钟。但即使我按照它的语法做它总是要求我这样做`try --help`，这意味着我给出了错误的形式。这是我尝试过的事情

```
timeout 5

timeout 5s

timeout 5.0s

timeout 5. 
```

这些都没有奏效。

有任何想法吗？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T22:19:01.913

我不认为`timeout`你认为它会做。从[手册页](http://linux.die.net/man/1/timeout)：

> 超时 [选项] 数字 [后缀] 命令 [ARG] ...
> 
> 启动 COMMAND，如果在 NUMBER 秒后仍在运行，则将其终止。SUFFIX 可以是 's' 秒（默认），'m' 分钟，'h' 小时或 'd' 天。

你需要给它那个命令。这是一个简单的例子：

```
$ date; timeout 5 sleep 10; date
Thu, Nov 01, 2012  3:19:28 PM
Thu, Nov 01, 2012  3:19:33 PM 
```

如您所见，即使我跑了，也只过去了 5 秒`sleep 10`。那是因为它在 5 秒后超时并且`timeout`命令将其杀死。

# sql-server - msnodesql 模块的打字稿声明文件

> ID：13186319
> 
> 赞同：1
> 
> 时间：2012-11-01T22:12:23.993
> 
> 标签：sql-server, typescript

有谁知道 node.js 的 SQL Server 数据库驱动程序的类型声明文件 msnodesql.d.ts 是否存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:17:55.277

[您可以在distinctlyTyped](https://github.com/borisyankov/DefinitelyTyped)找到定义。

这里的文件：[msnodesql-0.2.d.ts](https://github.com/borisyankov/DefinitelyTyped/blob/master/Definitions/msnodesql-0.2.d.ts)

# objective-c - NSUserNotification - 单击时如何打开应用程序

> ID：13186320
> 
> 赞同：10
> 
> 时间：2012-11-01T22:12:23.123
> 
> 标签：objective-c, macos, cocoa, nsusernotification

我正在使用 NSUserNotification 来显示通知。这工作正常。问题是当您单击通知时：

1.  应用程序通知不会从通知中心删除。
2.  应用程序（最小化时）无法打开。

任何熟悉 NSUserNotification 的人都可以提供一些指示吗？

**通知.m**

```
#import "Notice.h"

@implementation Notice

- (void) notify:(NSDictionary *)message {

    NSLog(@"Notification - Show it");

    NSUserNotification *notification = [[NSUserNotification alloc] init];
    [notification setTitle:[message valueForKey:@"title"]];
    [notification setInformativeText:[message valueForKey:@"content"]];
    [notification setDeliveryDate:[NSDate dateWithTimeInterval:0 sinceDate:[NSDate date]]];
    [notification setSoundName:NSUserNotificationDefaultSoundName];
    NSUserNotificationCenter *center = [NSUserNotificationCenter defaultUserNotificationCenter];
    [center scheduleNotification:notification];
}

- (void) userNotificationCenter:(NSUserNotificationCenter *)center didActivateNotification:(NSUserNotification *)notification
{

    NSLog(@"Notification - Clicked");

    notification=nil;
    [center removeDeliveredNotification: notification];
}

#pragma mark WebScripting Protocol

+ (BOOL) isSelectorExcludedFromWebScript:(SEL)selector
{
    if (selector == @selector(notify:))
        return NO;

    return YES;
}

+ (NSString*) webScriptNameForSelector:(SEL)selector
{
    id  result = nil;

    if (selector == @selector(notify:)) {
        result = @"notify";
    }

    return result;
}

// right now exclude all properties (eg keys)
+ (BOOL) isKeyExcludedFromWebScript:(const char*)name
{
    return YES;
}

@end 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T22:52:14.667

只需实现 NSUserNotificationCenterDelegate 并定义此方法：

```
- (void)userNotificationCenter:(NSUserNotificationCenter *)center didActivateNotification:(NSUserNotification *)notification 
```

例子：

这就是我在“通知程序”应用程序中所做的。

```
- (void) userNotificationCenter:(NSUserNotificationCenter *)center didActivateNotification:(NSUserNotification *)notification
{
    NSRunAlertPanel([notification title], [notification informativeText], @"Ok", nil, nil);
}

- (void) userNotificationCenter:(NSUserNotificationCenter *)center didDeliverNotification:(NSUserNotification *)notification
{
    notifications=nil;
    [tableView reloadData];
    [center removeDeliveredNotification: notification];
} 
```

当通知被激活时（用户点击），我只是用一个面板通知用户（我可以使用一个 hud 窗口）。在这种情况下，我会立即删除传递的通知，但这不是通常发生的情况。通知可能会保留有一段时间并在 1/2 小时后被删除（这取决于您正在开发的应用程序）。

# actionscript-3 - 如何在 AS3 中显示随机创建的数字列表中的最大值

> ID：13186321
> 
> 赞同：3
> 
> 时间：2012-11-01T22:12:27.563
> 
> 标签：actionscript-3, flash

我正在 Flash (AS3) 中构建一种游戏，其中声音输入（麦克风）触发均衡器（**micLevel.height**控制面具的高度（显示均衡器）。麦克风的**activityLevel**给了我一个数字（ 0 - 100 ) 显示在 textfield **prosent**中。参赛者对着麦克风大喊并尝试达到 100 （我使用**mc.gain**使其难以达到 100 ）。到目前为止一切都很好！我对 AS3 还很陌生，所以我觉得有点失落。

我需要显示他们设法达到的最高数字，并且我希望对此有时间限制。**让我们说5秒内的最高声级。**

这是到目前为止的代码：

```
var mic:Microphone = Microphone.getMicrophone();

Security.showSettings("privacy");
mic.setLoopBack(true);

if(mic != null)
{
    mic.setUseEchoSuppression(true);
    stage.addEventListener(Event.ENTER_FRAME, showLevel);
}

function showLevel(e:Event)
{
    micLevel.height = mic.activityLevel * 6;
    //mic.gain = 1;
    //trace(mic.activityLevel);
    prosent.text = "Activity: " + String(mic.activityLevel) + "%";
} 
```

我只需要一些从文本字段“prosent”（有时间限制）中获取最高数字并将其显示在新文本字段中的代码。

如果我不清楚，我很抱歉，但如果有人可以帮助我，我会很高兴！

哈拉尔德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:29:36.837

启动计时器以重置您的最高级别变量。这将每 5 秒显示一次最高级别。如果您想始终显示一个最高值，您也可以添加一个计时器启动停止按钮。

然后在您的 showLevel 函数中，用于`Math.max()`获取最高数字（在当前活动和最近最高之间）

```
var highestLevel:Number = 0;
var timer:Timer = new Timer(5000); // fires every 5 seconds

function initLevels(e:TimerEvent){
  timer.stop(); // you could stop your timer here automatically and then use a button to start again
  highestLevel = 0;  // when timer fires restart your highestLevels var
}

function showLevel(e:Event) {
  highestLevel = Math.max(mic.activityLevel * 6, highestLevel);
  prosent.text = "Activity: " + String(highestLevel) + "%";
}

timer.start();
timer.addEventListener(TimerEvent.TIMER, initLevels);
addEventListener(Event.ENTER_FRAME, showLevel); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:20:50.717

只需创建一个变量，只要`micLevel.height`值高于它就会更新，例如

```
var highest:Number = 0;

function showLevel(e:Event):void
{
    if(micLevel.height > highest)
    {
        // The mic level was higher than the previous highest level.
        highest = micLevel.height;

        // Change your other text field to show the value of 'highest'.
        // ..
    }

    prosent.text = "Activity: " + String(mic.activityLevel) + "%";
} 
```

# regex - QRegExp 提取两个数字

> ID：13186326
> 
> 赞同：0
> 
> 时间：2012-11-01T22:13:05.270
> 
> 标签：regex, qt

我只是想从用户字符串中提取两个数字。我有正则表达式工作，但第二个数字捕获不够贪婪！我不知道如何根据我的需要重新格式化它，我正在提交我的 reg exp 任何建议都会很棒！

```
QRegExp valid_input(".*(-?\\d*\\.?\\d+)[\\s,]+(-?\\d*.?\\d+)[^\d]*");
valid_input.setMinimal(true);

if(valid_input.indexIn(value.toString()) == -1)
    return false;

QPointF new_point(valid_input.cap(1).toDouble(), valid_input.cap(2).toDouble()); 
```

提前致谢！

* * *

**示例输入：** `156, 264`

**预期产出：** `156`和`264`

**我的输出：** `156`和`2`

* * *

**示例输入：** `156.2 264.52`

**预期产出：** `156.2`和`264.52`

**我的输出：** `156`和`2`

* * *

**示例输入：** `156.2 264.52)`

**预期产出：** `156.2`和`264.52`

**我的输出：** `156`和`2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:31:30.877

两点：

*   [手册](http://qt-project.org/doc/qt-4.8/qregexp.html)中的AFAICS您可以删除前导“.*”和尾随“[^\d]*”
*   `setMinimal(true)`谈论设置正则表达式*不*贪心。

否则（由于缺少示例数据）您的正则表达式看起来不错。

[http://www.regular-expressions.info/floatingpoint.html](http://www.regular-expressions.info/floatingpoint.html)显示

> [-+]?[0-9]*\.?[0-9]+

这基本上是您的正则表达式，带有一个额外的可选加号。

另一种方法是将正则表达式拆分为多个更简单的部分：

> ([-+]?\.\d+|[-+]?\d+\.\d*|[-+]?\d+)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:48:07.810

您的正则表达式适用于您的示例。只需不要启用最小匹配，您就会得到预期的结果。

# haskell - liftM 与原始复制

> ID：13186328
> 
> 赞同：3
> 
> 时间：2012-11-01T22:13:17.210
> 
> 标签：haskell, ghc

```
replicate 3 "hi" 
```

生产

```
["hi", "hi", "hi"] 
```

但

```
liftM (replicate 3) "hi" 
```

生产

```
["hhh", "iii"] 
```

（精确地）如何`liftM`运作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T22:16:05.423

该`liftM`函数是`fmap`^*的另一个名称，相当于`map`它对列表进行操作时。

```
liftM (replicate 3) "hi"
  = [replicate 3 x | x <- "hi"]
  = [replicate 3 'h', replicate 3 'i']
  = ["hhh", "iii"] 
```

### 脚注

^*`liftM`和之间的区别`fmap`是不同的类上下文，由于历史原因，`Monad`并不意味着`Functor`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T22:18:03.533

总结：`liftM = map`。

* * *

该`liftM`函数具有类型`Monad m => (a -> b) -> m a -> m b`。也就是说，它在 monad 中接受一个函数和一些东西，并“通过”monad 应用该函数。（或者，以另一种方式看待它，它具有 type `Monad m => (a -> b) -> (m a -> m b)`，即将函数转换为通过 monad 操作的函数。）

在这种情况下，我们有`liftM (replicate 3) ['h','i']`（记住这`"hi"`只是单个字符列表的简写），所以有问题的 monad 是 list monad。`liftM`for 列表的定义等价于`map`（两个函数具有相同的类型，这是一个很大的提示。）因此：

```
liftM (replicate 3) ['h','i'] = map (replicate 3) ['h','i']
     = [replicate 3 'h', replicate 3 'i'] = ["hhh","iii"] 
```

# excel - 为什么 Cell.CellReference 是可选的？否则我如何获得手机位置？

> ID：13186329
> 
> 赞同：5
> 
> 时间：2012-11-01T22:13:18.877
> 
> 标签：excel, reference, location, cell, openxml

根据 OpenXml 规范，CellReference 是可选的。但是有没有其他方法可以获取单元格的位置？

例如，我可以通过以下方式获取一行的单元格：

```
foreach (Row r in sheetData.Elements<Row>())
{
    foreach (Cell c in r.Elements<Cell>())
    {
        Console.WriteLine(c.CellReference);
    }
} 
```

但是没有 CellReference，我怎么知道细胞的位置？

我做了一些研究，所有解决方案似乎都依赖于将单元格的 CellReference 与给定字符串进行比较。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T13:05:44.430

CellReference 是可选的，因为如果缺少它，Excel 将使用“先到先得”原则（顺便说一句，这不是官方术语）。

当所有 Cell 类都缺少 CellReference 属性时会发生什么，Excel 将根据遇到 Row 和 Cell 类的顺序进行解析。

假设 SheetData 类中的第一行类（您会注意到 RowIndex 也是一个可选属性）具有行索引 1。并且假设该行中的第一个单元格类具有 CellReference“A1”（假设Cell 没有分配 CellReference）。并且假定该行中的第二个 Cell 类具有 CellReference“B1”。等等等等。

下一个 Row 类（如果也未分配 RowIndex 属性）将被假定为第二行。

基本上，如果缺少所有 RowIndex 和 CellReference 属性，则所有 Cell 类都集中在工作表的左上角。

假设地说，如果您有 3 个未分配的 RowIndex-ed Row 类，并且下一个 Row 类的 RowIndex 为 8，那么这是一个有效的工作表。您将在工作表的前 3 行中只有前 3 行数据（如预期的那样），并且“第 4”行类（RowIndex 为 8）作为工作表中的第 8 行。

# xslt - 使用 XSLT 转换外部 RSS 提要

> ID：13186330
> 
> 赞同：2
> 
> 时间：2012-11-01T22:13:25.557
> 
> 标签：xslt, rss, xml-parsing

我有一个托管在 wordpress 上的博客，我希望能够获取 RSS 提要并使用 XSLT 将其解析到另一个网站。我试图在客户端解析它，这样我就可以插入提要的链接并利用它进行实时更新。

这是我的html：

```
<!DOCTYPE html>
<html>
    <head>
        <script>
    function loadXMLDoc(dname){
        if (window.XMLHttpRequest){
            xhttp=new XMLHttpRequest();
        }else{
            xhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

        xhttp.open("GET",dname,false);
        xhttp.send("");
        return xhttp.responseXML;
    }

    function displayResult(){
        xml=loadXMLDoc("http://myBlog.wordpress.com/feed");
        xsl=loadXMLDoc("styles.xsl");
        // code for IE
        if (window.ActiveXObject){
          ex=xml.transformNode(xsl);
          document.getElementById("example").innerHTML=ex;
        }
        // code for Mozilla, Firefox, Opera, etc.
        else if (document.implementation && document.implementation.createDocument){
            xsltProcessor=new XSLTProcessor();
            xsltProcessor.importStylesheet(xsl);
            resultDocument = xsltProcessor.transformToFragment(xml,document);
            document.getElementById("example").appendChild(resultDocument);
        }
    }
        </script>
    </head>
    <body onload="displayResult()">
        <div id="example"/>
    </body>
</html> 
```

这是我用来格式化从我的博客获得的提要的 xsl 文档。当我查看 HTML 文件时，我没有收到任何错误，但页面只是空白，上面没有任何内容。

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:content="http://purl.org/rss/1.0/modules/content/"
xmlns:wfw="http://wellformedweb.org/CommentAPI/"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:atom="http://www.w3.org/2005/Atom"
xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
xmlns:georss="http://www.georss.org/georss"
xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
xmlns:media="http://search.yahoo.com/mrss/">

<xsl:template match="/">
 <html>
 <body>
<xsl:for-each select="rss/channel/item">
    <p>
        <xsl:value-of select="title"/>
    </p>
</xsl:for-each>
 </body>
 </html>
</xsl:template> 
```

# html - Shopify tablerow 循环提前退出

> ID：13186336
> 
> 赞同：1
> 
> 时间：2012-11-01T22:14:09.747
> 
> 标签：html, css, shopify, liquid

我正在循环浏览我的首页产品集合并生成一个表格。在最后一行，我需要在第一个表格单元格中放置一些静态内容。我已经能够做到这一点，但由于某种原因，循环在它完成后停止。有谁知道为什么？

```
 {% tablerow product in collections.frontpage.products cols: 2 %}
    {% if tablerowloop.col_first and tablerowloop.last %}
      <img src="{{'box.png' | asset_url}}">
    {% else %}
      <div class='featured-product'>
        <img src="{{ product.images[1] | product_img_url: 'medium' }}">
        <p>{{ product.title }}</p>
      </div>
    {% endif %}
  {% endtablerow %} 
```

这是网站：[https ://hodkiewicz-zieme-and-hirthe180.myshopify.com/](https://hodkiewicz-zieme-and-hirthe180.myshopify.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:38:31.227

`tablerowloop.last`仅对表的最后一个单元格（即集合的最后一个产品）返回 true，而不是对最后一行返回 true。相反，您需要检查`cols`集合末尾是否包含索引，如果它是第一列，则它必须是最后一行。

```
{% tablerow product in collections.frontpage.products cols: 2 %}
  {% assign x = tablerowloop.length | minus:2 %}
  {% if tablerowloop.col_first and tablerowloop.index > x %}
    <img src="{{'box.png' | asset_url}}">
  {% else %}
    <div class='featured-product'>
      <img src="{{ product.images[1] | product_img_url: 'medium' }}">
      <p>{{ product.title }}</p>
    </div>
  {% endif %}
{% endtablerow %} 
```

# php - 如何将解析 JSON 添加到 PHP 脚本

> ID：13186339
> 
> 赞同：0
> 
> 时间：2012-11-01T22:14:12.710
> 
> 标签：php, json

所以这是我从 SEOMOZ API 中提取的示例代码，用于目标 URL 上的链接。这个脚本是命令行

```
#!/usr/bin/php 
<?php
$objectURL = $domain_url;$accessID = "xyz";
$secretKey = "xya"; 
$expires = mktime() + 300;   
$stringToSign = $accessID."\n".$expires;
$binarySignature = hash_hmac('sha1', $stringToSign, $secretKey, true);
$urlSafeSignature = urlencode(base64_encode($binarySignature));
$urlToFetch = "http://lsapi.seomoz.com/linkscape/links/".urlencode($objectURL)."?AccessID=".$accessID."&Expires=".$expires."&Signature=".$urlSafeSignature."&SourceCols=26&&TargetCols=4&Scope=page_to_domain&Filter=follow&Sort=page_authority&Limit=10";
$handle = fopen($urlToFetch, "r");
$links_contents = '';
while (!feof($handle)) {    
    $links_contents .= fread($handle, 8192);
}
fclose($handle);
echo $links_contents;    
?> 
```

该脚本的结果是它以 JSON 格式返回信息，但不是以有序的方式返回大量信息。将结果格式化为更整洁/可读的显示的最简单方法是什么？

这是来自 JSON 的返回

```
{
    "frid": 1,
    "lf": 2,
    "lrid": 3,
    "lsrc": 4,
    "ltgt": 5,
    "luuu": 6,
    "prid": 7,
    "ufq": 8,
    "upl": 9,
    "urid": 10
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T22:15:42.430

你的意思是`json_decode($links_contents)`？

# c# - 为什么另一个应用程序窗口标题中的文本不正确？

> ID：13186340
> 
> 赞同：4
> 
> 时间：2012-11-01T22:14:18.693
> 
> 标签：c#, windows, process

我正在运行一个小工具（在 Windows 7、32 位上），我想查看在我尝试过的另一个应用程序中打开了什么文档，它适用于 Windows 上的记事本。

```
 var myProcess = Process.GetProcessesByName("NotePad");
        string title = myProcess[0].MainWindowTitle;
        MessageBox.Show(title); 
```

输出是：

```
 "New Text Document - Notepad" 
```

现在，如果我尝试另一个应用程序，它并不总是给我正确的标题，但我注意到大多数微软应用程序似乎都很好——记事本、写字板、EXCEL 等。这是另一个软件的问题。它的标题很长，但只返回一个非常简单的名称。

这是我从具有 processName = **"FooBar"**的应用程序中得到 的实际运行窗口的顶部是：

> **“FooBar 软件版本 1.2 - [结果]”**

我的代码给出：

> **“美食吧”**

有任何想法吗？

[编辑} 2012-11-19 这个问题的症结在于我试图从窗口中获取打开文件的名称。现在看来我使用的软件没有在那里显示。我发现一个名为“AutoIT3 Window Spy”的程序可以获得我需要的文本，因为打开文件的文本在窗口上，而不仅仅是在标题中。我下载了源代码（它是开源的[http://www.autohotkey.com/](http://www.autohotkey.com/)的一部分。它似乎依赖于已经提出的许多建议，但我还不能弄清楚。）源我正在查看的代码是 c++，位于此处[https://github.com/AutoHotkey/AutoHotkey](https://github.com/AutoHotkey/AutoHotkey)

所以我认为我的问题的解决方案可能在别处。这个可能没有答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:19:45.923

主窗口标题是您进入任务管理器并查看描述列时看到的，而不是窗口标题本身。

它是进程的标题，而不是进程中特定窗口的标题。一个给定的进程可以同时打开任意数量的窗口。

如果您需要实际的窗口标题，则必须像这样挂钩 user32：

```
using System;
using System.Runtime.InteropServices;
using System.Text;
using System.Security;

namespace Application
{
public class Program
{
    public static void Main ( )
    {
        IntPtr hwnd = UnsafeNativeMethods.FindWindow("Notepad", null);
        StringBuilder stringBuilder = new StringBuilder(256);
        UnsafeNativeMethods.GetWindowText(hwnd, stringBuilder, stringBuilder.Capacity);
        Console.WriteLine(stringBuilder.ToString());
    }
}

[SuppressUnmanagedCodeSecurity]
internal static class UnsafeNativeMethods
{
    [DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
    internal static extern int GetWindowText ( IntPtr hWnd, [Out] StringBuilder lpString, int nMaxCount );
    [DllImport("user32.dll", SetLastError = true)]
    internal static extern IntPtr FindWindow ( string lpClassName, string lpWindowName );
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:22:39.860

您看到的“标题”可能是某种所有者绘制的 UI 元素，它覆盖了标题的视觉表示，而 Windows API 可能会忽略这种东西。

我建议使用 Spy++ 之类的工具检查窗口，看看是否是这种情况。

应用程序的作者也有可能决定覆盖该`WM_GETTEXT`消息并返回该消息而不是标题栏中的实际内容，尽管我不能 100% 确定是否`GetWindowText()`在此处调用以及它是否显式发送消息或有效其他方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:51:23.380

开发者声明如下：

“我认为失败可能是由于 VB 6.0 中的已停用属性 Form.Caption 被 .NET 中的 Form.Text 替换”

感谢大家一路上提出的宝贵建议！

# jquery - 使用 Ajax 时在 jQuery 中捕获动态 URL

> ID：13186341
> 
> 赞同：0
> 
> 时间：2012-11-01T22:14:27.420
> 
> 标签：jquery, ajax, django, url

我正在尝试在 jQUery 中捕获动态 URL。通常我可以捕获路径，然后像这样加载它：

```
 $('a').click(function(ev) {
        ev.preventDefault();
        var pathname = window.location.pathname;
        $('#Div2').load(pathname+'question/');
    }); 
```

但是，我试图捕获的路径是通过 Ajax 加载到主页中的，因此我捕获的 URL 属于主页而不是加载的页面。

它捕获的 URL：localhost/home/

我试图捕获的 URL：localhost/home/loaded_pa​​ge

关于如何捕获加载页面的路径的任何想法？它是动态的（home/1、home/2 等），所以我不能只输入完整的 URL

# jquery - 隐藏或显示特定的 DIV

> ID：13186344
> 
> 赞同：0
> 
> 时间：2012-11-01T22:14:55.457
> 
> 标签：jquery, show-hide

我有两个DIV。一个有一个列表，另一个有一个 DIV 的集合。

```
<div>
    <ul>
        <li><a>One</a></li>
        <li><a>Two</a></li>
        <li><a>Three</a></li>
    </ul>
</div>
<div>
    <div>Some content one</div>
    <div>Some content two</div>
    <div>Some content three</div>
</div> 
```

当我点击超链接“一个”时，我想显示第一个 DIV（一些内容）并隐藏所有其他 DIV。当我点击超链接“二”时，我想显示第二个 DIV（一些内容二）并隐藏所有其他内容。如何在 jQuery 中使用数组来实现这一点？任何其他方法也可以。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:19:48.847

```
$('li').click(function() {
    var which = $(this).index();
    $('div').find('div').hide().eq(which).show();
}); 
```

工作[小提琴](http://jsfiddle.net/4KhUb/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T22:28:20.113

有没有搞错：

```
$('a')​​.on('click', function(e) {
    e.preventDefault();
    $('div>div').eq($(this).closest('li').index()).show().siblings().hide();
})​;​ 
```

[**小提琴**](http://jsfiddle.net/PmNku/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T22:21:01.323

改变一点你的html：

```
<div>
    <ul>
        <li><span data-showclass=".show_1">One</span></li>
        <li><span data-showclass=".show_2">Two</span></li>
        <li><span data-showclass=".show_3">Three</span></li>
    </ul>
</div>
<div id="swichDiv">
    <div class="show show_1">Some content one</div>
    <div class="show show_2">Some content two</div>
    <div class="show show_3">Some content three</div>
</div> 
```

然后是 jQuery：

```
$('ul li span[data-showclass]').click(function(){
  $('#swichDiv .show').hide().filter($(this).data('showclass')).show();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-27T13:34:24.500

多行用于唯一行。

```
// show hide in jquery
$('.showdata').hide(); // hide all on start

$('.showhide').click(function (e) {
    //e.preventDefault();
    var SH = this.SH ^= 1; // "Simple toggler"
    $(this).text(SH ? 'Hide' : 'Show')
    var id = event.target.id; // get id 
    //alert(event.target.id);
    $('#data' + id).toggle(); // show this one
});

<p><span class="showhide" id="1">Show</span>&nbsp;<span class="showdata" id="data1">content1</span> </p>

<p><span class="showhide" id="2">Show</span>&nbsp;<span class="showdata" id="data2">content2</span> </p> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-01T22:20:01.417

最简单的方法是给 div 和 anchors 对应的 id 和 class

检查这个..它仍然可以优化

**HTML**

```
<div>
    <ul>
        <li><a id="wrapper1">One</a></li>
        <li><a id="wrapper2">Two</a></li>
        <li><a id="wrapper3">Three</a></li>
    </ul>
</div>
<div class="wrap">
    <div class="wrapper1" style="display:none">Some content one</div>
    <div class="wrapper2" style="display:none">Some content two</div>
    <div class="wrapper3" style="display:none">Some content three</div>
</div>​ 
```

**Javascript**

```
$('[id^="wrapper"]').on('click', function(e) {
    e.preventDefault();
    $('.wrap > div').hide();

    $('.'+ this.id).show();
});​ 
```

[检查小提琴](http://jsfiddle.net/sushanth009/6GvE6/1/)

# mysql - 选择包含 URL 的所有行

> ID：13186348
> 
> 赞同：0
> 
> 时间：2012-11-01T22:15:25.487
> 
> 标签：mysql, sql

让我们说表：

**评论**：*id、id_user、内容、日期*

其中内容可以包含h​​tml代码，所以它可以包含图像。

那么如何从包含图像的评论表中选择所有行？( `<img src="image.png" />`)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T22:21:40.977

采用：

```
SELECT * FROM comments WHERE content LIKE '%<img%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:17:12.997

只需使用类似的条件：

```
SELECT * FROM comments WHERE content LIKE '%<img src="%" />%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T22:17:03.503

在查询中使用正则表达式： [http ://www.brightcherry.co.uk/scribbles/mysql-how-to-count-a-regular-expression-in-a-table-column/](http://www.brightcherry.co.uk/scribbles/mysql-how-to-count-a-regular-expression-in-a-table-column/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T22:24:49.420

如果你想用正则表达式来做，你可以这样做：

```
select * from comments where content regexp'<img' 
```

# c - 如何在 C 中将文件加倍空间？然后打印到 STDOUT。

> ID：13186357
> 
> 赞同：2
> 
> 时间：2012-11-01T22:16:26.320
> 
> 标签：c, file

我需要读入一个文件，然后将其打印到 STDOUT 但双倍行距。到目前为止，我所拥有的是：

```
#include <fcntl.h>
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

#define BUFSZ 1024

int main(int argc, char* argv[]){

int n, fdin;
char buf[BUFSZ];

if ((fdin=open(argv[1],O_RDONLY))<0){
  perror(argv[1]);
  exit(-1);
}
while(( n = read(fdin, buf, BUFSZ))>0){
 if(write(STDOUT_FILENO,buf,n) != n){
  fprintf(stderr, "Write Error\n");
  exit(-1);
 }
 printf("\n");
}
close(fdin);
return(0);
} 
```

我是 C 新手，不知道如何将 \n 实现到代码中，我的 printf("\n") 在尝试将整个文件的内容加倍时毫无用处。我想我必须将 \n 添加到读取中？但我不完全确定这是否正确或如何去做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T22:27:55.930

[`read()`](http://linux.die.net/man/2/read)遇到换行符时不会停止读取，因此发布代码中的算法很容易错过写入空行，因为它`read()`可以读取多行。

更简单的方法是使用[`fgets()`](http://en.cppreference.com/w/c/io/fgets)：

```
FILE* f = fopen(argv[1], "r");
if (f)
{
    char buf[BUFSZ];
    while (fgets(buf, BUFSZ, f))
    {
        printf("%s", buf);

        /* fgets() may not have read a full line if the
           length of the line was greater than BUFSZ,
           so check it did before double spacing. */
        if (strrchr(buf, '\n')) printf("\n");
    }
    fclose(f);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T22:47:43.360

、`open`、`close`和函数是 Unix 特有的（实际上是 POSIX）`read`。`write`C 语言标准提供了一组更高级别的函数（`fopen`、`fclose`以及许多输入和输出函数），这里没有充分的理由不使用它们。任何具有 POSIX 特定函数的系统都将具有标准的 C 函数；反过来不一定正确。

我不确定我应该给你完整解决方案的代码（这是作业吗？），但我会给你一个快速的大纲。

无需读取和写入整行。这个问题很容易通过读取和写入单个字符来解决——C 的 I/O 函数会进行隐式缓冲，因此不会导致任何重大的性能问题。

“行”只是由换行符终止的字符序列`'\n'`。（不必担心不同的行尾表示，例如`\r\n`Windows 使用的；如果您以文本模式打开文件，C 库将负责与 C 的内部`'\n'`表示进行转换。）

从输入文件中一次读取一个字符。对于您读取的每个字符，将相同的字符写入您的标准输出。此外，如果输入字符是，则将*一秒*`'\n'`写入标准输出。 *`'\n'`*

 *有类似的问题需要一次将整行读取到内存中（这意味着您需要担心一行可以有多长），但对于这个特定问题，这不是必需的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T22:29:28.557

使用 fgets puts 和 putc，它更简单和缓冲。并且 fgets 读取行，

```
int main(int argc, char* argv[]){
    FILE *fp;
    char *s;
    char buf[BUFSZ];
    if ((fp = fopen(argv[1],"r")) == NULL) {
        fprintf(stderr, "Error opening %s\n", argv[1] );
        exit(-1);
    }
    while((s = fgets(buf, sizeof buf, fp)) != NULL){
        puts(s);
        putchar('\n');
    }
    fclose(fp);
    return(0);
} 
```*

# android - 安卓手电筒应用

> ID：13186365
> 
> 赞同：-1
> 
> 时间：2012-11-01T22:17:07.607
> 
> 标签：android, android-camera

我想为有 2 个按钮的 Android 设备创建一个应用程序，一个按钮用于“ON”，另一个用于“OFF”。我在网上搜索了一个例子，我看到了很多例子，但它们的组织非常糟糕（对我来说）。到目前为止，我创建的是带有按钮的布局，主要活动的代码是：

```
 package com.simple.flashlight;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Camera;
import android.hardware.Camera.Parameters;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class Main extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_menue);

        Button turnOnButtOn = (Button) findViewById (R.id.button1);
        Button turnOnButtOff = (Button) findViewById (R.id.button2);

        turnOnButtOn.setOnClickListener(new Button.OnClickListener(){
            public void onClick(View cameraButton){

            }
        });
    }
} 
```

现在我想做这样的事情（伪代码）：

```
turnOnButtOn.setOnClickListener(new Button.OnClickListener(){
    public void onClick(View cameraButton){
        turnOnTheFlahLight
    }
});

turnOnButtOn.setOnClickListener(new Button.OnClickListener(){
    public void onClick(View cameraButton){
        turnOffTheFlahLight
    }
}); 
```

如果有任何完整的参考资料（我是 android 新手），那就太好了。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T22:23:22.113

首先，您需要在清单中添加使用手电筒的权限：

```
 <permission android:name="android.permission.FLASHLIGHT"
             android:permissionGroup="android.permission-group.HARDWARE_CONTROLS"
             android:protectionLevel="normal" /> 
```

要打开手电筒，请使用以下方法：

```
Camera mCam = Camera.open();     
Parameters p = mCam.getParameters();
p.setFlashMode(Parameters.FLASH_MODE_TORCH);
mCam.setParameters(p);
mCam.startPreview(); 
```

要关闭它：

```
mCam.stopPreview();
  mCam.release(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T22:32:22.387

如果您想打开设备的 LED 以使其像手电筒一样工作，这就是您的伪代码所指示的，您的应用程序必须假装它是一个相机应用程序，因为闪光灯位于相机 API 中。因此，您必须做一些事情。
1）在您的清单中，您需要声明您的应用程序使用[相机权限和功能](http://developer.android.com/reference/android/hardware/Camera.html)
2）在您的应用程序代码中，您需要使用 Camera::open() 实际创建一个相机对象的实例
3）您的应用程序代码将需要创建一个 CameraParams 对象并将闪光灯模式设置为打开或手电筒（我已经看了几个月了，但两者中的一个会这样做）。检查[相机参数](http://developer.android.com/reference/android/hardware/Camera.Parameters.html)文档以获取更多详细信息。在此对象中设置正确的参数后，您需要在步骤 2 中创建的 Camera 对象上调用 setParameters
4) 然后您需要调用 startPreview()

要关闭闪光灯，您只需要在 Camera 对象上调用 stopPreview()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T22:28:38.883

如果您有错误的设备，闪光灯应用程序对初学者来说并不是那么好，因为有些制造商不使用 android 提供的正常方式来打开灯。我建议你做一些其他的事情来学习 android。

# python - 编写列表长度不同的csv

> ID：13186368
> 
> 赞同：1
> 
> 时间：2012-11-01T22:17:22.403
> 
> 标签：python, csv

我正在尝试导出`data`到 csv，其中数据中的项目是两个长度不等的列表。

```
import csv

item_dictionary = {'13742': 'cat', '25037':'dog'}
names = item_dictionary.values()

data = [[1, 2, 3, 4, 5, 6], [7, 8, 9, 10]]

export_data = zip(*data)

myfile = open('sample.csv', 'wb')
wr = csv.writer(myfile)
wr.writerow(names)
wr.writerows(export_data)
myfile.close() 
```

这给了我这个输出，其中不包括 5 和 6 in `data[0]`。

```
dog  cat
1    7
2    8
3    9
4    10 
```

我想要的是这样的：

```
dog  cat
1    7
2    8
3    9
4    10
5
6 
```

如何修改我的代码以包含 的所有值`data[0]`而不受 的长度限制`data[1]`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T22:20:15.673

实际上，`zip`停止它到达最短可迭代的末尾。 [itertools.izip_longest](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)是当您想要压缩到最长可迭代的末尾时使用的函数。

```
import itertools
export_data = itertools.izip_longest(*data, fillvalue = '') 
```

# c# - Mono / MonoTouch 下的 Task.Factory.StartNew() 延迟

> ID：13186371
> 
> 赞同：6
> 
> 时间：2012-11-01T22:17:35.080
> 
> 标签：c#, mono, xamarin.ios

在 Mono 和 MonoTouch 下，我看到调用之间有大约 500 毫秒的延迟：

```
StartNew(Action<object> action, object state, CancellationToken cancellationToken, 
    TaskCreationOptions creationOptions, TaskScheduler scheduler); 
```

以及工作代码实际开始执行的时间。

我创建了一个测试来显示这一点：

```
public static class TestTaskFactory
{
    private class TaskInfo
    {
        public int Number;
    }

    private static int NUM_TASKS = 5;
    private static int NumFinished = 0;

    public static void Run()
    {
        for (int n = 1; n <= NUM_TASKS; n++)
        {
            Log("Starting task #" + n + " ...");
            var task_info = new TaskInfo { Number = n };
            var task = Task.Factory.StartNew(Worker, task_info, CancellationToken.None, TaskCreationOptions.None, TaskScheduler.Default);
            Thread.Sleep(0);
        }

        Log("Waiting for tasks to finish ...");
        while (NumFinished < NUM_TASKS)
        {
            Thread.Sleep(1);
        }

        Log("All done");
    }

    private static void Worker(object state)
    {
        var task_info = (TaskInfo)state;
        Log("Task #" + task_info.Number + " running");

        // Do something
        Thread.Sleep(2000);

        // Done
        ++NumFinished;
    }

    private static void Log(string msg)
    {
        Console.WriteLine(DateTime.Now.ToString("HH.mm.ss.fff") + ": Thread " + Thread.CurrentThread.ManagedThreadId + ": " + msg);
    }
} 
```

Mac 上 Mono 下的输出：

```
16.57.31.420: Thread 1: Starting task #1 ...
16.57.31.508: Thread 1: Starting task #2 ...
16.57.31.508: Thread 1: Starting task #3 ...
16.57.31.508: Thread 1: Starting task #4 ...
16.57.31.508: Thread 1: Starting task #5 ...
16.57.31.508: Thread 1: Waiting for tasks to finish ...
16.57.31.510: Thread 5: Task #1 running
16.57.32.009: Thread 6: Task #2 running <-- Approx 500 msec later
16.57.32.511: Thread 7: Task #3 running <-- Approx 500 msec later
16.57.33.012: Thread 8: Task #4 running <-- Approx 500 msec later
16.57.33.513: Thread 9: Task #5 running <-- Approx 500 msec later
16.57.35.515: Thread 1: All done 
```

就好像 Mono 想要等待最多 500 毫秒以重用现有线程，然后再生成一个新线程。如果我将工作时间减少到 500 毫秒以下，则延迟会减少。例如，将工作线程 Thread.Sleep(2000) 更改为 Thread.Sleep(50)：

```
...
17.13.20.262: Thread 5: Task #1 running
17.13.20.314: Thread 5: Task #2 running <-- approx 50 msec later
17.13.20.365: Thread 5: Task #3 running <-- approx 50 msec later
17.13.20.416: Thread 5: Task #4 running <-- approx 50 msec later
17.13.20.466: Thread 5: Task #5 running <-- approx 50 msec later 
```

但是在 MS Framework 4.0 下，工作代码开始之前没有**大的**延迟：

```
...
17.05.42.238: Thread 9: Waiting for tasks to finish ...
17.05.42.256: Thread 11: Task #1 running
17.05.42.256: Thread 12: Task #3 running <-- little delay
17.05.42.256: Thread 13: Task #4 running <-- little delay
17.05.42.257: Thread 10: Task #2 running <-- little delay
17.05.43.264: Thread 14: Task #5 running <-- little delay 
```

在我提交有关 Mono 的错误报告之前，我想检查一下我没有遗漏一些我需要在 Mono 上进行的调整或错误地使用 Task.Factory。我实际上在我的真实应用程序中使用了最大并发调度程序。

所以我的问题是：这是 Mono/MonoTouch 中的错误吗？

更新：我已经从使用 Mono* 下的 ThreadPool 切换到 Ami Bar 的智能线程池（[github](https://github.com/amibar/SmartThreadPool)；[代码项目文章](http://www.codeproject.com/Articles/7933/Smart-Thread-Pool)）。GSerjo 的[扩展线程池](http://www.codeproject.com/Articles/27358/Extended-Thread-Pool)看起来也不错，但有很多我试图在移动设备上避免的依赖项。[我在Xamarim 线程](http://forums.xamarin.com/discussion/289/threadpool-thread-creation-throttling)上写了一些简单的测试。我可能错过了 100 个其他线程池实现，但到目前为止我对 SmartThreadPool 很满意。在 MonoTouch 下使用 WINDOWS_PHONE 模式编译。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T22:18:35.923

> 所以我的问题是：这是 Mono/MonoTouch 中的错误吗？

不必要。我怀疑这只是线程池不愿意每 500 毫秒启动一个以上的新线程。请注意，您会看到第*一个*任务几乎立即启动。只有在那之后，您才会看到延迟。

如果您在 .NET 4.5 上使用更多任务，您会看到类似的情况，除了每秒启动的“块”线程。

您可能会发现调用会有所[`ThreadPool.SetMinThreads`](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.setminthreads.aspx)帮助，假设在 MonoTouch 中可用。

# oauth-2.0 - window7 64上的Httplib2模块安装

> ID：13186372
> 
> 赞同：4
> 
> 时间：2012-11-01T22:17:35.530
> 
> 标签：oauth-2.0, httplib2

在 Python 中，我使用了 easy_install 并尝试安装 oauth2。然后我发现它需要httplib2。

使用：在命令提示符下easy_install httplib2。并在 site-packages 目录中找到了 httplib2 0.7.6 egg。

但是当我导入 httplib2 时，它会返回： ImportError: No module named httplib2

我可以让'import httplib2'工作的唯一方法是首先在shell中运行httplib2包中的设置文件，然后'import oauth2'。

我不知道该怎么做，因为我需要 oauth2 才能连接到 Yelp API。请帮我解决这个问题，非常感谢你！！！！

# ios - iOS6多路音频

> ID：13186376
> 
> 赞同：8
> 
> 时间：2012-11-01T22:17:41.693
> 
> 标签：ios, audio, hardware, routes

iOS 6.0 为 iPhone/iPad 带来了“多路音频”支持。

例如，DJay 应用程序的好处是允许用户在播放另一台时在耳机中听到一个卡座。

唯一提到它的是 AVAudioSession 类参考：

> AVAudioSessionCategoryMultiRoute 允许您将不同的音频数据流同时输出到不同的输出设备。例如，您将使用此类别将音频路由到 USB 设备和一组耳机。使用此类别需要更详细地了解可用音频路由的功能并与之交互。
> 
> 此类别可用于输入、输出或两者。
> 
> 在 iOS 6.0 及更高版本中可用。

如何将两个不同的流路由到不同的路由？特别是使用远程 I/O ？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T23:51:16.367

回答我自己：iOS 开发人员库中实际上没有任何信息，但希望有 WWDC 开发人员会议所需的所有信息。

搜索：WWDC 2012 Session 505：iOS 中的音频会话和多路由音频，作者 Torrey Holbrook Walker。

我希望这可以帮助别人。

# php - 在 php 中将 paypal 付款与 curl 集成

> ID：13186378
> 
> 赞同：1
> 
> 时间：2012-11-01T22:17:44.007
> 
> 标签：php, curl, paypal

我需要在网站中集成先进的贝宝付款。我已经在 manager.paypal.com 上配置了所需的设置。

现在我正在使用 curl 发出安全的 http 请求。但是 curl_exec 不返回任何东西。这是我的代码。我已经确认所有变量都有正确的值。

```
$ch=curl_init();
curl_setopt($ch, CURLOPT_URL, $pf_host_addr);
curl_setopt($ch, CURLOPT_RETURNTRANSFER , TRUE);
curl_setopt($ch,CURLOPT_POST,TRUE);
curl_setopt($ch,CURLOPT_POSTFIELDS, $postdata);
$resp=curl_exec($ch);

if(!$resp)
{
    return "<p>Failed</p>";
} 
```

我作为输出失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:35:04.753

此页面上的官方文档非常有帮助

[https://www.x.com/developers/paypal/documentation-tools/quick-start-guides/paypal-payments-advanced-hosted-pages](https://www.x.com/developers/paypal/documentation-tools/quick-start-guides/paypal-payments-advanced-hosted-pages)

# c++ - 深度复制 cv::Mat 替代品，哪个更好？

> ID：13186384
> 
> 赞同：1
> 
> 时间：2012-11-01T22:18:07.203
> 
> 标签：c++, opencv

我想深拷贝一张图片。哪个性能更好？

```
cv::Mat new_img(old_img, true); 
```

（第一个不完全正确，请检查我的答案）或

```
cv::Mat new_img = old_img.clone(); 
```

（我问它是因为第二个对我来说更有吸引力，但我不确定我的情况有多糟糕。也许我什至会定义一个常数`CV_CLONE = true`......以防第一个更好。 )

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T22:28:03.383

通过查看[源代码](http://www710.univ-lyon1.fr/~eguillou/documentation/opencv2/mat_8hpp_source.html)，您可以准确地了解每个功能的作用。构造函数是 00172，克隆是 00346。两者都调用相同的内部函数 copyTo，所以我想它们在性能方面基本相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:28:38.550

我已经开始进行基准测试，然后……等等！没有这样的事情

```
cv::Mat(const cv::Mat& from, bool deep_copy=false); 
```

我和锤子看到的是：

```
cv::Mat(const CvMat* from, bool deep_copy=false); 
```

好奇的...

所以正确的解决方案是

```
CvMat temp = img;   
cv::Mat img_clone = cv::Mat(&temp, true);  
// vs  
img_clone = img.clone(); 
```

在对小图像进行分析之后：正如 Hammer 所说，没有区别。他们没有克隆 copyCtor 的原因是返回值优化（参见维基百科）。

# expressionengine - 未在 WYGWAM/Safecracker/Channel Images 输入表单中调整大小的图像

> ID：13186387
> 
> 赞同：6
> 
> 时间：2012-11-01T22:18:14.563
> 
> 标签：expressionengine

我有一个使用频道图片上传和管理图片的博客。内容区域是 WYGWAM 字段。我在 Channel Images 中设置了一些尺寸，以允许用户在将图像添加到 WYGWAM 内容字段时调整其内容内的布局（横向左、横向右、纵向左、纵向右）。然后我有另外两个尺寸：拇指和画廊。这些用于显示在内容下方的图片库。Thumb在字段设置中设置为小预览，图库在字段设置中设置为大预览。这一切都在 CP 发布表单中运行良好。

但是，当使用 Safecracker 表单时，事情就不那么好了。我可以选择现有图像，但是当我将照片添加到内容字段 (WYGWAM) 时，它不会正确调整其大小。我确实得到了我想从中选择的对话框和选项，但该选择没有被保存。

发生的情况是使用我在字段设置中选择的大小作为大预览将图像添加到 WYGWAM 内容中。我通过更改为“大预览”选择的尺寸来测试这一点。

但是，如果我上传一张新图片并选择一个尺寸，它就可以正常工作。问题仅在于现有图像（即先前为其他条目上传的图像）。

是否可以在 Channel Images/safecracker/wygwam 中使用尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:14:55.330

这是最新版本中的一个错误。开发人员已向我发送了一个正在运行的修补版本。

# html - 为什么CSS中的text-transform在表单中提交时不保留transform（大写）？

> ID：13186393
> 
> 赞同：5
> 
> 时间：2012-11-01T22:19:10.553
> 
> 标签：html, css, forms, validation

所以如果我有代码

```
.rsform-input-box {text-transform: uppercase;} 
```

在特定于底部表单字段的网站[http://www.thediabetesnetwork.com](http://www.thediabetesnetwork.com)上，您在键入时会看到转换为大写，但是在您键入的情况下会导出数据。例如，如果我键入Shane，它直观地显示了 SHANE。提交时，它将恢复到数据库中的 Shane（在之前的某个时间点）。

我的问题是它为什么要这样做，有哪些解决方法？我的另一个选择是

```
 function toUpCase()
{
document.getElementById("first").value=document.getElementById("first").value.toUpperCase();
document.getElementById("last").value=document.getElementById("last").value.toUpperCase();
document.getElementById("email").value=document.getElementById("email").value.toUpperCase();
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T22:38:01.327

CSS 仅用于*呈现*内容。因此，它不会更改用户输入的值，或表单提交到数据库的内容。

如果您的业务要求只接受所有大写值到数据库中，最好在后端处理。例如：`$input = strtoupper($input);`如果使用 PHP。在后端执行此操作将确保您的处理发生，即使用户关闭了 JavaScript。

对于低安全性要求，您通过 JavaScript 处理它的想法应该可行；`toUpCase`只需在提交表单之前 触发您的功能。

从可用性的角度来看——担心什么进入数据库并不是用户的工作；他们可能不需要知道。但是，如果您在每次使用这些数据点时（例如在登录时）都在幕后强制执行正确的案例，您会让他们的生活更轻松一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-21T21:10:17.460

以为我会添加到这个答案中，如果您希望内容以通过 CSS 呈现的方式返回，`innerText`将执行此操作。看这个例子：

这是一个运行示例：

```
(function() {
  document.getElementById('output').innerHTML = document.getElementById('text-selector').innerText;
}());
```

```
.uppercase {
  text-transform: uppercase;
}

div {
  margin-bottom: 20px;
}
```

```
<label>Input:</label>
<div class="container uppercase">
  <div>Here is some text.</div>
  <div id="text-selector">This is the text that will be be selected.</div>

</div>

<label>Output:</label>
<div class="container">
  <div>Here is some text.</div>
  <div id="output"></div>
</div>
```

规范：[https ://html.spec.whatwg.org/multipage/dom.html#the-innertext-idl-attribute](https://html.spec.whatwg.org/multipage/dom.html#the-innertext-idl-attribute)

# java - 在 Eclipse 中，如何设置用于复制 DOWNWARD 的键盘快捷键？

> ID：13186397
> 
> 赞同：2
> 
> 时间：2012-11-01T22:19:36.197
> 
> 标签：java, eclipse

当我使用键盘快捷键时，我通常只能选择复制，这显然设置为向上。（基本上，您选择复制的行将出现在您要复制的内容之上，而不是之下，这对我来说感觉更自然。）

![在此处输入图像描述](../Images/6da9b3c065f64b33c839bdc0a222685e.png)

所以我想知道是否有办法让我可以向下复制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:25:38.993

向下复制行的快捷方式的名称似乎是*“复制行”*（至少在 Eclipse Juno 中）。只需尝试将其更改为您喜欢的任何内容。只需搜索“ *Lines* ”，您就应该找到它。

我更喜欢的另一个选项是禁用`Ctrl`++ / （有时 Windows 使用它来翻转屏幕）系统命令`Alt`。我非常习惯默认的 Eclipse 快捷方式，所以这是我通常做的。 `up arrow``Down arrow`

# mysql - 在第三级子查询中使用列

> ID：13186402
> 
> 赞同：1
> 
> 时间：2012-11-01T22:20:03.987
> 
> 标签：mysql, sql, join, subquery

如何`SELECT`在第三级子查询中使用顶级列？

我试过了，但它给出了：`unknown column foo.id`

```
SELECT foo.id,
       (
           SELECT SUM(bar.amount)
           FROM bar
           JOIN (
               SELECT DISTINCT ding.id
               FROM baz
               JOIN ding ON ding.baz_id = baz.id
               WHERE baz.foo_id = foo.id
           ) AS j ON j.id = bar.id
       ) AS amount
FROM foo 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:27:34.113

试试 SELECT foo_id

```
FROM (
       SELECT SUM(bar.amount),j.foo_id
       FROM bar
       JOIN (
           SELECT DISTINCT ding.id,baz.foo_id
           FROM baz
           JOIN ding ON ding.baz_id = baz.id
       ) AS j ON j.id = bar.id
   ) AS amount; 
```

# android - Android - 当单击自定义列表适配器中的一行中的按钮时启动 MapActivity

> ID：13186404
> 
> 赞同：1
> 
> 时间：2012-11-01T22:20:14.900
> 
> 标签：android, android-intent, mapactivity

我有一个自定义的应用程序`list adapter`。该列表包含 3 个部分：**图像**、**文本**和**按钮**。

*   单击一行时，我`activity`开始，
*   当单击按钮时，我希望启动另一个活动，但它是一个`MapActivity`.
*   这两项活动都必须携带通过意图中的附加信息传递的信息。
*   第一个（单击行）活动完美运行。
*   第二个仅在启动常规活动时有效。
*   当我尝试启动时`MapActivity`，应用程序崩溃。
*   下面的代码在自定义适配器类中，在方法中作为参数/参数接收的 View`OnClick`是一个按钮（这就是我使用 的原因`getParent`）。

如果有任何不清楚的地方，请告诉我，我会尽力回答。

* * *

```
@Override
public void onClick(View view)
{
    View parentView = (View) view.getParent();
    switch (view.getId())
    {
        case R.id.boton_mapa_lugar:
            Intent intent = new Intent("android.intent.action.GOOGLEMAPS");

            String lat = ((TextView) parentView.findViewById(R.id.lat_lugar)).getText()
                    .toString();
            String lon = ((TextView) parentView.findViewById(R.id.lon_lugar)).getText()

            intent.putExtra(Lugares.DB_FIELD_LAT, lat);
            intent.putExtra(Lugares.DB_FIELD_LON, lon);

            parentView.getContext().startActivity(intent);
            break;
        default:
            //Code for starting activity when row is clicked...

    }
} 
```

* * *

这是错误日志：

```
11-01 18:32:18.374: W/dalvikvm(14162): threadid=1: thread exiting with uncaught exception (group=0x4001d7d0)
11-01 18:32:18.393: E/AndroidRuntime(14162): FATAL EXCEPTION: main
11-01 18:32:18.393: E/AndroidRuntime(14162): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.turiston/com.example.turiston.GoogleMaps}: java.lang.NullPointerException
11-01 18:32:18.393: E/AndroidRuntime(14162):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at android.os.Looper.loop(Looper.java:123)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at android.app.ActivityThread.main(ActivityThread.java:4627)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at java.lang.reflect.Method.invokeNative(Native Method)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at java.lang.reflect.Method.invoke(Method.java:521)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at dalvik.system.NativeStart.main(Native Method)
11-01 18:32:18.393: E/AndroidRuntime(14162): Caused by: java.lang.NullPointerException
11-01 18:32:18.393: E/AndroidRuntime(14162):    at org.apache.harmony.luni.util.FloatingPointParser.parseFloat(FloatingPointParser.java:301)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at java.lang.Float.parseFloat(Float.java:291)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at com.example.turiston.GoogleMaps.onCreate(GoogleMaps.java:37)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-01 18:32:18.393: E/AndroidRuntime(14162):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-01 18:32:18.393: E/AndroidRuntime(14162):    ... 11 more 
```

* * *

这是`OnCreate`方法`GoogleMaps.java`

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_google_maps);

    // Obtains the coordinates from the place from the previous Activity
    Bundle extras = getIntent().getExtras();
    float latitude; // = 19.2373f;
    float longitude; // = 68.82634f;

    // Variables to store the strings from the database
    String lat_coordinate;
    String lon_coordinate;

    // Assigns the values from the previous Activity to the two variables
    lat_coordinate = extras.getString("Latitude");
    lon_coordinate = extras.getString("Longitude");

    latitude = Float.parseFloat(lat_coordinate);
    longitude = Float.parseFloat(lon_coordinate);

    MapView mapView = (MapView) findViewById(R.id.mapview);

    // Enables zoom controls for the map
    mapView.setBuiltInZoomControls(true);

    List<Overlay> mapOverlays = mapView.getOverlays();
    Drawable drawable = this.getResources().getDrawable(
            R.drawable.androidmarker);

    MapsItemizedOverlay itemizedoverlay = new MapsItemizedOverlay(drawable,
            this);

    // Creates a GeoPoint to be used for the location of the place on the
    // map
    GeoPoint point = new GeoPoint((int) (latitude * 1E6),
            (int) (longitude * 1E6));

    // If you click on the Android guy it displays the following message
    OverlayItem overlayitem = new OverlayItem(point, "Hola, Mundo!",
            "I'm in San Juan!");
    itemizedoverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedoverlay);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:25:14.567

不要使用“android.intent.action.GOOGLEMAPS”作为动作名称。创建你自己的包名称，这样它就不会与任何其他应用程序冲突。

似乎坐标没有到达 GoogleMaps 活动。在开始活动之前将 Log.d() 放在第一个活动中，在“latitude = Float.parseFloat(lat_coordinate);”之前的第二个活动中

顺便说一句，您在第一个活动中为额外名称使用常量，在第二个活动中使用字符串文字，很容易出错。始终使用常量。

# linux - 调试应用程序吞吐量的奇怪缓慢

> ID：13186405
> 
> 赞同：-1
> 
> 时间：2012-11-01T22:20:33.667
> 
> 标签：linux, networking, tcp

我面临一个问题，在不同的服务器上运行相同的应用程序会产生意想不到的吞吐量结果。例如，在无负载的特定速度更快的服务器（更快的 cpu、更多内存）上运行应用程序产生的吞吐量比在同一网络上的功能较弱的服务器上运行时要慢。

我怀疑操作系统或 TCP 导致速度较快的服务器运行缓慢。是否有工具可以查看操作系统和 TCP 配置并提出缓慢的原因？

所有服务器都运行 Red hat linux。

更新它是一个基于套接字的客户端服务器应用程序。它适用于单个连接，例如连接到服务器的单个客户端，尝试尽可能快地发送消息。没有分叉或多线程。

进一步思考，是否有可能影响延迟或吞吐量的关键 tcp 选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:11:08.027

调试此类问题的关键是从测试用例中删除物理网络；换句话说，比较通过 localhost 而不是通过网络的 tcp 应用程序传输。

在大多数情况下，NIC 配置、绑定配置、端到端 TCP RTT、数据包重新排序、数据包丢失率或其他外部因素是造成这些差异的原因。要确定是“网络”还是服务器，请从 localhost 到 localhost 进行测试。

# android - Android“空心”颜色

> ID：13186407
> 
> 赞同：1
> 
> 时间：2012-11-01T22:20:49.577
> 
> 标签：android, colors, background

有没有办法在 Android 应用程序中设置“空心”颜色？

我的意思是我想要一个带有某种背景的框，而文本实际上会导致背景透明。换句话说，如果整个视图在蓝色背景上，文本将是蓝色的，如果它是红色的，它将是红色的，如果它在图像上，图像将通过文本可见但不能通过盒子的其余部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T22:43:51.887

你确实可以做到。您必须使用自己的 Paint 对象并在 onDraw() 方法中提供的 Canvas 上绘制文本。然后在你的 Paint 上设置这个 Xfermode： new PorterDuffXfermode(PorterDuff.Mode.CLEAR);

# google-reseller-api - 如何创建通过转销商 API 购买的 Google Apps 域的域管理员

> ID：13186411
> 
> 赞同：0
> 
> 时间：2012-11-01T22:21:16.270
> 
> 标签：google-reseller-api

我们正在尝试使用 Reseller API 构建一个应用程序，我们的客户将使用该应用程序在线购买 Google Apps for Business 域。

我想了解新客户将经历的逐步过程。根据我找到的文档，这是我的理解：

1) 客户访问我们的网站，填写姓名、地址、备用电子邮件地址、域名的表格

2）我们的应用程序调用 POST [https://www.googleapis.com/apps/reseller/v1/customers](https://www.googleapis.com/apps/reseller/v1/customers)来创建一个新的客户对象

3）这是不清楚的地方。文档（[https://developers.google.com/google-apps/reseller/v1/how-tos/manage_customers](https://developers.google.com/google-apps/reseller/v1/how-tos/manage_customers)）说我的应用程序应该“使用供应 API 在新客户的帐户中创建新管理员”。但是配置 API 文档（[https://developers.google.com/google-apps/provisioning/#creating_an_administrator_account](https://developers.google.com/google-apps/provisioning/#creating_an_administrator_account)) 只解释了客户创建自己的管理员帐户的分步程序，他需要接受条款和条件，然后执行 Google Checkout 购买席位。我希望能够以编程方式创建管理员帐户，但我不明白它应该如何工作？您能否详细说明完全程序化的购买方案（即完全由经销商的应用程序驱动）应该如何工作？非常感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:35:39.603

创建新客户后，您还必须创建订阅。这包括他们的计划以及他们拥有多少许可证，详情请参阅[https://developers.google.com/google-apps/reseller/v1/how-tos/manage_subscriptions#create_subscription](https://developers.google.com/google-apps/reseller/v1/how-tos/manage_subscriptions#create_subscription)。

一旦域成为您的经销商帐户的客户，您就可以使用 Provisioning API 创建用户帐户，包括管理员帐户。创建新用户的说明位于[https://developers.google.com/google-apps/provisioning/#creating_a_user_account](https://developers.google.com/google-apps/provisioning/#creating_a_user_account)，标签“admin”应设置为“true”。有关所有标签及其允许的值，请参阅[https://developers.google.com/google-apps/provisioning/reference#xml_tag_def 。](https://developers.google.com/google-apps/provisioning/reference#xml_tag_def)

# android - 在 Netbeans Android 项目 (nbandroid) 中包含外部 jar

> ID：13186412
> 
> 赞同：1
> 
> 时间：2012-11-01T22:21:18.013
> 
> 标签：android, netbeans, jar

我已尝试按照此站点的提示将外部 jar 添加到 Netbeans Android 项目：http: [//www.jondev.net/articles/Adding_external_JARs_to_Android_Projects_in_Netbeans_%28nbandroid_-_kenai%29](http://www.jondev.net/articles/Adding_external_JARs_to_Android_Projects_in_Netbeans_%28nbandroid_-_kenai%29)

代码：

```
<target name="-pre-jar"> 
  <copy todir="${build.classes.dir}"> 
    <fileset dir="/path/to/your/jar/directory" /> 
  </copy> 
</target> 
```

但这对我不起作用。

到目前为止，我注意到`-pre-jar`没有调用目标。我错过了什么还是有替代/新方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:25:00.540

您的链接谈论的是旧版本的 nbandroid 插件。只需将您的 JAR 放入项目的 libs 目录中，它将按照[http://developer.android.com/tools/projects/index.html中的说明使用](http://developer.android.com/tools/projects/index.html)

或者，您可以在其中一个属性文件中设置一些属性来覆盖库文件夹的位置。

-拉迪姆

# c# - monodroid 接收器 PACKAGE_REMOVED java.lang.ClassNotFoundException

> ID：13186415
> 
> 赞同：1
> 
> 时间：2012-11-01T22:21:35.363
> 
> 标签：c#, android, xamarin.android

我正在使用单机器人。当 PACKAGE_REMOVED 操作被捕获时，我不断收到 java.lang.ClassNotFoundException 错误。我在 stackflow 和其他网站上搜索并尝试了很多东西，但无法正常工作。任何帮助，将不胜感激。

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:installLocation="internalOnly">
<uses-sdk android:targetSdkVersion="10" />
<uses-permission android:name="android.permission.INTERNET" />
<application android:icon="@drawable/Icon" android:label="App Store">
<receiver android:name=".PackageChangeReceiver" android:exported="true" android:enabled="true">
  <intent-filter android:priority="999">
    <action android:name="android.intent.action.PACKAGE_REMOVED" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:scheme="package" />
  </intent-filter>
</receiver>
</application>
</manifest> 
```

广播接收器 (PackageChangeReceiver.cs)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using System.Net;
using System.IO;
using Android.Util;

namespace AppStore
{
[BroadcastReceiver]
public class PackageChangeReceiver : BroadcastReceiver
{
    public override void OnReceive(Context context, Intent intent)
    {
        if ("android.intent.action.PACKAGE_REMOVED".Equals(intent.Action))
        {
            Boolean replacing = intent.GetBooleanExtra(Intent.ExtraReplacing, false);
            if (replacing)
            {
                //do nothing because will be reinstalled again
            }
            else
            {
                Intent pushIntent = new Intent(context, typeof(UpdatesService));
                pushIntent.PutExtra("appname", intent.Data.ToString());
                context.StartService(pushIntent);  
            }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:21:55.300

我直接联系了 Xamarin ( Monodroid )。看来我的错误是手动编辑清单。我进行了网络搜索以寻找解决方案并将条目添加到清单中。但是，这与 monodroid 代码无关。由于 monodroid 会自动构建清单，因此您必须在广播接收器上使用属性，如下所示：

```
[BroadcastReceiver] 
[IntentFilter(new string[] { Intent.ActionPackageRemoved }, Priority = (int)IntentFilterPriority.HighPriority, DataScheme="package")] 
public class PackageChangeReceiver : BroadcastReceiver 
{ 
```

希望这对其他人有帮助。

# objective-c - 如何从 UIWebView 选择中获取独立文本

> ID：13186418
> 
> 赞同：1
> 
> 时间：2012-11-01T22:21:52.223
> 
> 标签：objective-c, ios

我正在使用 UIWebView 来显示一个小的 PDF。我需要从 UIWebView 选择中获取独立的文本。我做了很多搜索，没有运气。有谁知道如何让它工作，或者至少是一个开始？

# windows-phone-8 - 以下哪些是 win phone 8 模板？

> ID：13186419
> 
> 赞同：0
> 
> 时间：2012-11-01T22:21:53.393
> 
> 标签：windows-phone-8

所以我有 XNA 4、windows 7.1 sdk、windows 8 sdk、windows phone 7 sdk 和 windows phone 8 sdk。

所以在 Visual Studio 2010 中，我看到以下内容，我假设它们都是 Windows Phone 7.x，

![在此处输入图像描述](../Images/d6e8e6b1dfe1957c848ce6bbce1f79eb.png)

Windows phone 8 SDK 需要 Visual Studio 2012，所以这是我在 Visual Studio 2012 中看到的。谁能确认这些是 Windows phone 8 模板？

![在此处输入图像描述](../Images/dcd316957c7b2dcf6d04f8e8e178e220.png)

我有点困惑，因为我没想到 XAML 与 DirectX 或 XNA 一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T22:28:37.773

所有这些模板都适用于 Windows Phone 8。其中一些模板也与 Windows Phone 7 兼容（如“Windows Phone App”），在这种情况下，Visual Studio 会在创建时询问您是否要针对 WP7 或 WP8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T08:35:57.027

> 我有点困惑，因为我没想到 XAML 与 DirectX 或 XNA 一样。

我不是，因为那是 Windows Phone Division 提供的 ;-) 是的，您在第二个屏幕截图中看到了正确的模板（来自 VS2012）

# apache - Apache（内部虚拟连接）导致日志过多的服务器崩溃

> ID：13186420
> 
> 赞同：5
> 
> 时间：2012-11-01T22:22:21.507
> 
> 标签：apache, access-log

我知道这个问题很愚蠢并且经常被回答，但现在没有任何解决方案对我有用。我正在使用 OpenSuse 和 Apache2 并添加

```
SetEnvIf Remote_Addr "127\.0\.0\.1" loopback
SetEnvIf Remote_Addr "::1" loopback
CustomLog /var/log/apache2/access_log combined env=!loopback 
```

但是如果我重新启动 apache，访问日志会显示我

```
::1 - - [01/Nov/2012:23:18:06 +0100] "OPTIONS * HTTP/1.0" 200 - "-" "Apache (internal dummy connection)"
::1 - - [01/Nov/2012:23:18:16 +0100] "OPTIONS * HTTP/1.0" 200 - "-" "Apache (internal dummy connection)"
::1 - - [01/Nov/2012:23:18:22 +0100] "OPTIONS * HTTP/1.0" 200 - "-" "Apache (internal dummy connection)"
::1 - - [01/Nov/2012:23:18:34 +0100] "OPTIONS * HTTP/1.0" 200 - "-" "Apache (internal dummy connection)"
::1 - - [01/Nov/2012:23:18:35 +0100] "OPTIONS * HTTP/1.0" 200 - "-" "Apache (internal dummy connection)"
::1 - - [01/Nov/2012:23:18:36 +0100] "OPTIONS * HTTP/1.0" 200 - "-" "Apache (internal dummy connection)"
::1 - - [01/Nov/2012:23:18:37 +0100] "OPTIONS * HTTP/1.0" 200 - "-" "Apache (internal dummy connection)"
::1 - - [01/Nov/2012:23:19:34 +0100] "OPTIONS * HTTP/1.0" 200 - "-" "Apache (internal dummy connection)"
::1 - - [01/Nov/2012:23:19:52 +0100] "OPTIONS * HTTP/1.0" 200 - "-" "Apache (internal dummy connection)" 
```

有人可以帮我吗，因为我的服务器有很多流量，在这种情况下，虚拟连接对服务器的性能非常不利。向我询问您想了解的有关服务器配置的任何信息。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T11:36:51.757

在第三个添加这一行

```
SetEnvIf User-Agent ".*internal dummy connection.*" loopback 
```

# python - 如何卸载从 *.txt 文件安装的 pip 包？

> ID：13186421
> 
> 赞同：3
> 
> 时间：2012-11-01T22:22:21.727
> 
> 标签：python, django, eclipse, pip

我刚刚安装了一堆 pip 包，现在什么都没有了。

和：

```
pip install PATH/*.txt 
```

因此如何卸载我的包？

PS.：我运行的是win7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T22:24:49.533

在这个相关线程中有一些很好的建议：[python setup.py uninstall](https://stackoverflow.com/questions/1550226/python-setup-py-uninstall)

编辑：也许您需要手动删除所有文件，并撤消安装手动执行的任何其他内容。

如果您不知道所有文件的列表，可以使用 --record 选项重新安装它，并查看生成的列表。

# html - IE 显示问题：字段集大小不是由内容决定的，并且显示内联会导致其他问题

> ID：13186424
> 
> 赞同：0
> 
> 时间：2012-11-01T22:22:42.410
> 
> 标签：html, css, internet-explorer

此问题仅在 IE8+ 中出现。它在 Firefox 中运行良好。

HTML：

```
<fieldset>
<legend>Hello</legend>
<table><tbody><tr>
<td>Hello World</td><td>Hello World</td>
<td>Hello World</td><td>Hello World</td><td>Hello World</td><td>Hello World</td><td>Hello World</td><td>Hello World</td><td>Hello World</td>
</tr></tbody></table>
</fieldset>

<fieldset>
<legend>Hello</legend>
<table><tbody><tr>
<td>Hello World</td><td>Hello World</td>
<td>Hello World</td><td>Hello World</td><td>Hello World</td><td>Hello World</td><td>Hello World</td><td>Hello World</td><td>Hello World</td>
</tr></tbody></table>
</fieldset> 
```

CSS：

```
fieldset {
    border: 1px solid #000;
    /*display: inline;*/
} 
```

请查看这个[jsFiddle](http://jsfiddle.net/4ZXFq/3/)。

当字段集没有 display: inline 时，字段集的大小由窗口的大小而不是其内容的大小决定。因此，如果我将窗口缩小或分辨率较低，那么我可以看到内容在字段集框之外流动。

将 display: inline 添加到字段集可解决此问题。但是，它会导致另一个问题。现在，如果窗口非常大，那么两个字段集将并排显示。我希望每个字段集都显示在自己的行上。

**我只需要使用 CSS 来解决这个问题。**我可能不会更改 HTML，因为这是一个在现有应用程序中随处出现的问题，而且要更改每次出现的问题都需要大量的工作。

任何帮助将不胜感激。

谢谢，泰德兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:44:56.213

尝试这个：

```
fieldset {
border: 1px solid #000;
display: inline;
float: left;
clear: both;
} 
```

# c++ - 未知类型名称错误

> ID：13186426
> 
> 赞同：5
> 
> 时间：2012-11-01T22:22:58.120
> 
> 标签：c++, inheritance, member

`Note`我确信这是显而易见的，但我只是看不到它：当我尝试使用我的类（非常频繁地使用）时，xcode 突然给我各种错误。

下面是类头的样子：

```
class Note : public Playable{

private:

public:

    double theta;
    double frequency;
    int duration; 
    int startTime; // tussen 1 en 32
    int measureNumber;
    float velocity;
    Playable *track;
    virtual float getValue();

    static double calculateNoteFrequency(int aOctaveNumber, note_name aNoteName);

    Note(double aFreq, float aVelocity, int aDuration, int aMeasureNumber, int aStarttimeInsideMeasure, Playable *aTrack){
//      theta = 0;
        Note();
        frequency = aFreq;
        duration = aDuration;
        velocity = aVelocity;
        measureNumber = aMeasureNumber;
        startTime = aStarttimeInsideMeasure;
        track = aTrack;
    }

    Note(){
        theta = 0;
    }
    void toString();

}; 
```

**编辑**

这是完整的编译器错误消息：

```
In file included from /Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Note.cpp:9:
In file included from /Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Note.h:14:
In file included from /Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Track.h:16:
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Pattern.h:19:12: error: use of undeclared identifier 'Note'
    vector<Note> notelist;
           ^
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Pattern.h:19:18: error: C++ requires a type specifier for all declarations
    vector<Note> notelist;
                 ^~~~~~~~
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Pattern.h:23:12: error: use of undeclared identifier 'Note'
    vector<Note> getNotelist();
           ^
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Pattern.h:23:18: error: C++ requires a type specifier for all declarations
    vector<Note> getNotelist();
                 ^~~~~~~~~~~
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Pattern.h:24:18: error: unknown type name 'Note'
    void addNote(Note const &note){
                 ^
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Pattern.h:24:23: error: expected ')'
    void addNote(Note const &note){
                      ^
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Pattern.h:24:17: note: to match this '('
    void addNote(Note const &note){
                ^
In file included from /Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Note.cpp:9:
In file included from /Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Note.h:14:
In file included from /Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Track.h:17:
In file included from /Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Synth.h:11:
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Oscillator.h:21:18: error: unknown type name 'Note'
    void setNote(Note &aNote);
                 ^
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Oscillator.h:23:20: error: unknown type name 'Note'
    float getValue(Note &note);
                   ^
In file included from /Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Note.cpp:9:
In file included from /Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Note.h:14:
In file included from /Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Track.h:17:
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Synth.h:47:21: error: unknown type name 'Note'
    float getSample(Note &note);
                    ^
In file included from /Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Note.cpp:9:
In file included from /Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Note.h:14:
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Track.h:30:17: error: use of undeclared identifier 'Note'
        multimap<long, Note> noteList;
                       ^
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Track.h:30:23: error: C++ requires a type specifier for all declarations
        multimap<long, Note> noteList;
                             ^~~~~~~~
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Track.h:33:2: error: unknown type name 'Note'
        Note &addNoteAndReturnReference(Note &note);
        ^
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Track.h:33:34: error: unknown type name 'Note'
        Note &addNoteAndReturnReference(Note &note);
                                        ^
/Users/osxursnm/Development/SynthSequencer2/SynthSequencer2/Track.h:34:18: error: unknown type name 'Note'
        void removeNote(Note &note);
                        ^
14 errors generated. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-01T22:40:38.820

我的猜测是你有一个交叉引用的问题。

在`Note.h`您包括`Track.h`which 使用类型的对象`Note`。`Note`在`Track.h`文件中使用前向声明并`Note.h`仅将文件包含在`Track.cpp`.

所以尝试

```
class Note; 
```

`Track`在文件中声明类之前`Track.h`并删除文件`#include "Note.h"`开头的语句。

# javascript - 当 DOM 元素的计算样式更改时触发事件？

> ID：13186427
> 
> 赞同：12
> 
> 时间：2012-11-01T22:23:09.383
> 
> 标签：javascript, css, dom

是否有**非轮询**方法来监听元素[计算样式](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)的更改？

这个幻想代码片段应该简洁地解释我的意思：

```
var el = document.getElementById('doodad');

el.addComputedStyleChangeListener('width', function (prev, new) {
  alert('Previous width: ' + prev + '; New width: ' + new);
}); 
```

* * *

我知道[`DOMAttrModified`](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-MutationEvent)突变事件和即将到来的[`MutationObserver`](http://www.w3.org/TR/dom/#mutationobserver)，但两者都不够——它们只能用于观察`style`元素的 DOM 属性，这并不能完全确定元素的*计算*样式。

* * *

这个*用例*最初是[这个问题](https://stackoverflow.com/questions/13153897/transition-element-size-caused-by-content-changes)的一部分，这真的只是让我好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:45:54.867

没有这样的方法。[CSS OM](http://dev.w3.org/csswg/cssom/)还没有。

目前尚不清楚“计算样式更改”是什么意思。

原则上，您可以检测使用（例如渲染）样式的变化。但这需要像“绘画”或“布局”这样的事件才能发生。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-03T03:01:25.033

目前你能做的最好的就是请求动画帧。

[`getComputedStyle`](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle)显然返回计算属性的*实时更新*对象。

你可以像这样做一个基本的动画循环：

```
var computedStyle = getComputedStyle(element);
var animate = function () {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = computedStyle.color;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    requestAnimationFrame(animate);
};
animate(); 
```

如果任何使用的属性发生更改，您可以通过仅更新来进行优化：

```
var computedStyle = getComputedStyle(element);
var lastFrameBackground;
var lastFrameColor;
var animate = function () {
    if (
        computedStyle.background !== lastFrameBackground ||
        computedStyle.color !== lastFrameColor
    ) {
       lastFrameBackground = computedStyle.background;
       lastFrameColor = computedStyle.color;

       // assuming expensive drawing code here
       // not like this!
       ctx.clearRect(0, 0, canvas.width, canvas.height);
       ctx.fillStyle = computedStyle.color;
       ctx.fillRect(0, 0, canvas.width, canvas.height);
    }
    requestAnimationFrame(animate);
};
animate(); 
```

如果是针对特定的 CSS 动画，您可以通过侦听和来管理`requestAnimationFrame`循环，或者如果这些事件没有足够好的浏览器支持，您可以在知道动画将开始（例如for ）和停止时将其启动当动画属性的计算值停止变化时（即，如果它等于其先前的值，则不调用）。`animationstart``animationend``mouseenter``:hover``requestAnimationFrame`

如果您不需要平滑地制作动画，则可以使用`setInterval`可能更好的性能（检查文档是否隐藏，这`requestAnimationFrame`会隐式执行）：

```
var computedStyle = getComputedStyle(element);
setInterval(function () {
    if (!document.hidden) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = computedStyle.color;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    }
}, 200); 
```

# haskell - 使用 Yesod 和 Darcs 库时如何解决重复符号错误？

> ID：13186428
> 
> 赞同：7
> 
> 时间：2012-11-01T22:23:10.447
> 
> 标签：haskell, yesod, darcs

由于链接器问题，似乎不可能将 Yesod 与 Darcs 库一起使用。我找到了这个问题，需要熟悉 Darcs 内部结构的人提供解决它的提示。

在[Yesod](http://www.yesodweb.com/)应用程序中使用[darcs 库](http://hackage.haskell.org/package/darcs)时，出现以下错误：

```
GHCi runtime linker: fatal error: I found a duplicate definition for symbol
   sha256_init
whilst processing object file
   /home/sebfisch/.cabal/lib/darcs-2.9.5/ghc-7.4.2/libHSdarcs-2.9.5.a
This could be caused by:
   * Loading two different object files which export the same symbol
   * Specifying the same object file twice on the GHCi command line
   * An incorrect `package.conf' entry, causing some object to be
     loaded twice.
GHCi cannot safely continue in this situation.  Exiting now.  Sorry. 
```

这似乎是由暴露相同符号的 darcs 和[cryptohash库引起的，通过搜索相应的目标文件可以发现：](http://hackage.haskell.org/package/cryptohash)

```
# for file in `find ~/.cabal/lib/ -name "*.a"`; do (readelf -s $file | grep -i sha256_init) && (echo $file; echo); done
   293: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND sha256_init
    17: 0000000000000690    94 FUNC    GLOBAL DEFAULT    1 sha256_init
~/.cabal/lib/cryptohash-0.7.5/ghc-7.4.2/libHScryptohash-0.7.5.a

    10: 0000000000000290    45 FUNC    GLOBAL DEFAULT    1 sha256_init
~/.cabal/lib/darcs-2.8.2/ghc-7.4.2/libHSdarcs-2.8.2.a 
```

我写了一个测试程序来确认 darcs 和 cryptohash 库有冲突：

```
import           Crypt.SHA256          (sha256sum)
import           Crypto.Hash.SHA256    (hash)
import           Data.ByteString       (empty)
import qualified Data.ByteString.Char8 as BS

main :: IO ()
main = do
    BS.putStrLn $ hash empty    -- cryptohash
    putStrLn $ sha256sum empty  -- darcs 
```

它无法编译并出现类似错误：

```
/home/sebfisch/.cabal/lib/cryptohash-0.7.5/ghc-7.4.2/libHScryptohash-0.7.5.a(sha256.o): In function `sha256_update': sha256.c:(.text+0x4b0): multiple definition of `sha256_update'
/home/sebfisch/.cabal/lib/darcs-2.8.2/ghc-7.4.2/libHSdarcs-2.8.2.a(sha2.o):sha2.c:(.text+0xf90): first defined here
/home/sebfisch/.cabal/lib/cryptohash-0.7.5/ghc-7.4.2/libHScryptohash-0.7.5.a(sha256.o): In function `sha224_update': sha256.c:(.text+0x640): multiple definition of `sha224_update'
/home/sebfisch/.cabal/lib/darcs-2.8.2/ghc-7.4.2/libHSdarcs-2.8.2.a(sha2.o):sha2.c:(.text+0xbb0): first defined here
/home/sebfisch/.cabal/lib/cryptohash-0.7.5/ghc-7.4.2/libHScryptohash-0.7.5.a(sha256.o): In function `sha256_init': sha256.c:(.text+0x690): multiple definition of `sha256_init'
/home/sebfisch/.cabal/lib/darcs-2.8.2/ghc-7.4.2/libHSdarcs-2.8.2.a(sha2.o):sha2.c (.text+0x290): first defined here
/home/sebfisch/.cabal/lib/cryptohash-0.7.5/ghc-7.4.2/libHScryptohash-0.7.5.a(sha256.o): In function `sha224_init': sha256.c:(.text+0x6f0): multiple definition of `sha224_init'
/home/sebfisch/.cabal/lib/darcs-2.8.2/ghc-7.4.2/libHSdarcs-2.8.2.a(sha2.o):sha2.c (.text+0x620): first defined here
collect2: ld returned 1 exit status 
```

加密哈希库是[yesod-static](http://hackage.haskell.org/package/yesod-static)所必需的，在编写 Yesod 应用程序时不能轻易避免。如何在同一个应用程序中使用 Yesod 和 Darcs（作为库）？

从一个库中删除重复的符号会有所帮助吗？两个包都通过 FFI 访问散列函数，但使用不同的文件。

来自[darcs/Crypt.SHA256](http://hackage.haskell.org/packages/archive/darcs/2.8.2/doc/html/src/Crypt-SHA256.html)：

```
foreign import ccall unsafe "sha2.h sha256" c_sha256
    :: Ptr CChar -> CSize -> Ptr Word8 -> IO () 
```

从[cryptohash/Crypto.Hash.SHA256](http://hackage.haskell.org/packages/archive/cryptohash/0.7.6/doc/html/src/Crypto-Hash-SHA256.html)：

```
foreign import ccall unsafe "sha256.h sha256_init"
    c_sha256_init :: Ptr Ctx -> IO ()

foreign import ccall "sha256.h sha256_update"
    c_sha256_update :: Ptr Ctx -> CString -> Word32 -> IO ()

foreign import ccall unsafe "sha256.h sha256_finalize"
    c_sha256_finalize :: Ptr Ctx -> CString -> IO () 
```

另一个想法是重写 Darcs 以不使用它自己的散列函数。如何重新实现 Darcs 的`SHA256`模块以使用 cryptohash？我的测试程序的函数中的两个语句`main`没有给出相同的输出（通过注释掉另一个语句进行测试），因此在 Darcs 中使用 cryptohash 似乎并不完全简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T00:46:59.083

darcs 哈希输出只是加密哈希输出的 base16 编码版本。看起来[base16-bytestring](http://hackage.haskell.org/package/base16-bytestring)是弥补这一差距的一种方法。我试过了，Crypt.SHA256 变得如此简单：

```
module Crypt.SHA256 ( sha256sum ) where

import Crypto.Hash.SHA256 ( hash )
import Data.ByteString ( ByteString )
import Data.ByteString.Base16 ( encode )
import Data.ByteString.Char8 ( unpack )

sha256sum :: ByteString -> String
sha256sum = unpack . encode . hash 
```

事实上，[hashed-storage](http://hackage.haskell.org/package/hashed-storage-0.5.10)包也有一份 sha2.c 并通过重命名符号解决了这个问题。所以对 darcs 2.8 最简单的快速修复是从 hashed-storage复制[sha2.h](http://repos.mornfall.net/hashed-storage/0.5/Bundled/sha2.h)和[sha2.c](http://repos.mornfall.net/hashed-storage/0.5/Bundled/sha2.c)`hashed_storage_` ，在两个文件中替换为`darcs_`，并将 darcs 中 src/Crypt/SHA256.hs 中的 FFI 导入更改为：

```
foreign import ccall unsafe "sha2.h darcs_sha256" c_sha256
    :: Ptr CChar -> CSize -> Ptr Word8 -> IO () 
```

如果对您有所帮助，我很乐意发布带有此更改的 darcs 2.8.3。对于 2.10，我将切换到使用上面的 cryptohash，因为我看不出有任何理由继续使用本地 C 版本，而且通常在 darcs 中，我们正试图摆脱公共代码的私有实现。

编辑：我最初认为散列存储也会有同样的问题，但我错了（回想起来很明显，如果不是因为重命名，它会与 darcs 本身发生冲突）。

# java - 从正则表达式构建树

> ID：13186444
> 
> 赞同：0
> 
> 时间：2012-11-01T22:25:08.443
> 
> 标签：java, regex

我需要构建表示 Java 正则表达式的树。`java.util.regex.Pattern`做这项工作，但它的`root`字段和`Node`内部类（及其子类）不可见，所以我无法访问它们。我必须编写自己的解析器并重新实现所有解析逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:30:13.117

您*可以*使用[反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)来获取这些私有字段，或使用现有的正则表达式/PCRE 解析器：[http](http://bkiers.github.com/PCREParser) ://bkiers.github.com/PCREParser 。请注意，PCREParser 库（我是其作者）从未进行过真正的（单元）测试：因此，如果您打算在生产代码中使用它，请针对它进行一些适当的单元测试！:)

# java - JSP 的文件名包含指令以避免编译它们

> ID：13186448
> 
> 赞同：2
> 
> 时间：2012-11-01T22:25:32.543
> 
> 标签：java, jsp, jboss

我加入了通过**包含**JSP 指令（静态，如 C 中的#include）避免 JSP 中的代码重复的项目。

包含的文件遵循与常规 JSP 相同的命名规则：***. jsp**

我担心这个。它们是否需要另一个文件扩展名来防止它们被 servlet 容器编译（它们只是读取的 JSP 页面的一部分）？

或者 servlet 容器在没有请求的情况下不接触文件？

如果我需要使用另一个文件扩展名如何处理 IDE。我不想错过语法高亮和补全。在 Emacs 的情况下，很容易解决，但在 NetBeans 的情况下，我不知道如何根据文件扩展名注册文件类型。

我不是 JSP 专家，所以我阅读了*“JSR 267：JSP 标记库”*部分*“JSP.1.10.3 包含指令”*，但没有找到如何解决我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T22:30:07.553

此类 JSP 文件的适当名称是`.jspf`（JSP 片段），如[本问题](https://stackoverflow.com/questions/2081005/what-is-jspf-file-extension-how-to-compile-it)所述。

# ms-access-2007 - MS Access 2007 ItemData 如何显示最后一行？

> ID：13186450
> 
> 赞同：0
> 
> 时间：2012-11-01T22:25:42.107
> 
> 标签：ms-access-2007

我有一个关于如何在 MS Access 2007 的组合框中显示最后一行的问题。

为了在 ComboBox 中将第一行显示为默认值，我使用了 ComboBox.ItemData(0)，但我的问题是如何在 ComboBox 中将最后一行显示为默认值？

亲切的问候，卢克索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T22:36:20.190

您可以在 VBA 中使用 ListCount：

```
i = Me.Combo0.ListCount - 1
Me.Combo0 = Me.Combo0.ItemData(i) 
```

在属性表上：

```
Default value: =[Combo0].[Itemdata]([Combo0].[ListCount]-1) 
```

# vb.net - 从 VB.NET 连接到 WiFi 网络

> ID：13186452
> 
> 赞同：2
> 
> 时间：2012-11-01T22:25:45.270
> 
> 标签：vb.net, networking

我正在向我的个人网络浏览器添加一个可以连接到最佳wifi 的功能，但我不知道应该使用什么命令。我[为 C++ 找到了这个，](http://msdn.microsoft.com/en-us/library/ms706613%28v=VS.85%29.aspx)但我不知道 VB.NET。这是一个您按下的按钮，它将执行命令，但我不知道我应该如何连接到开放网络或任何网络。

# python - 在字符串中查找特定字符

> ID：13186454
> 
> 赞同：1
> 
> 时间：2012-11-01T22:26:09.693
> 
> 标签：python

我试图在一个字符串中找到所有元音来替换它们。

这是我一直在使用的：

```
word = "abcde"
vowels = "aeiou"
v = list(vowels)
hey = False
for i in range(len(word)):
    if word[i] == v:
        hey = True
print hey 
```

我试图用符号“$”的字符串替换所有这些位置，但我不知道如何正确地进行线性搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T22:30:12.313

使用正则表达式可能是最简单的：

`(?i)`表示不区分大小写比较
`[aeiou]`表示 a、e、i、o 或 u 中的任何一个

其余的相当明显

```
import re

s = 'alpha beta charlie delta echo foxtrot golf hotel'
print re.sub('(?i)[aeiou]', '$', s)
# $lph$ b$t$ ch$rl$$ d$lt$ $ch$ f$xtr$t g$lf h$t$l 
```

要么，要么`str.translate`：

```
from string import maketrans

to_dollar = 'aeiouAEIOU'
trans = maketrans(to_dollar, '$' * len(to_dollar))
print s.translate(trans)
# $lph$ b$t$ ch$rl$$ d$lt$ $ch$ f$xtr$t g$lf h$t$l 
```

要么，要么使用`dict`：

```
lookup = dict.fromkeys('aeiouAEIOU', '$')
print ''.join(lookup.get(c, c) for c in s)
# $lph$ b$t$ ch$rl$$ d$lt$ $ch$ f$xtr$t g$lf h$t$l 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T22:29:19.960

假设这是针对某种分配/类的，这里是一个简单的例子。您可以逐个字符地遍历字符串，因此这会遍历元音集中的每个字母，并将单词中的每个实例替换为该`$`字符：

```
In [33]: s = 'abcde'

In [34]: for c in 'aeiou':
   ....:     s = s.replace(c, '$')
   ....:
   ....:

In [35]: s
Out[35]: '$bcd$' 
```

并保持简单，以相反的方式进行：

```
In [6]: s = 'abcde'

In [7]: replace = ''

In [8]: for c in s:
   ...:     if c not in 'aeiou':
   ...:         replace += c
   ...:
   ...:

In [9]: for c in replace:
   ...:     s = s.replace(c, '$')
   ...:
   ...:

In [10]: s
Out[10]: 'a$$$e' 
```

这并没有涉及许多其他非常酷的功能，它们可以在一/两行中处理这个问题，但希望将作为一个构建块:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T22:29:26.690

```
"".join(("$" if char in vowels else char) for char in string) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T23:41:28.053

您可以使用集合来快速确定您正在迭代的字符是否是元音。设置对象（通常）具有恒定的查找时间，而不是像列表那样的线性查找时间。

```
vowels = set(vowels)
''.join('$' if ch in vowels else ch for ch in string) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T22:33:20.010

```
word = "a quick brown fox"
vowels = list("aeiou")
hey = False
for w in word:
    hey = hey or w in vowels

print hey 
```

# javascript - RESTful Web 服务中的身份验证

> ID：13186455
> 
> 赞同：12
> 
> 时间：2012-11-01T22:26:10.980
> 
> 标签：javascript, web-services, authentication

我目前正在创建一个网站，用户可以查看和修改他们的小部件。与存储在我的服务器上的小部件数据的所有交互都将通过 RESTful Web 服务完成。例如，如果用户想要查看他们的小部件列表，则执行流程将类似于：

1.  用户 12345 访问`https://www.example.com/Login.htm`服务器并对其进行身份验证（在我的情况下通过 OpenID 提供程序）
2.  用户 12345 然后访问该页面`https://www.example.com/Widgets.htm`
3.  服务器以 HTML 页面和 javascript 响应，用于访问我的 Web 服务。
4.  当 HTML 页面加载后，`getWidgets()`将调用 javascript 函数。`getWidgets()`将调用我的网络服务`https://www.example.com/Services/Widget/12345`
5.  该服务以用户小部件列表进行响应，另一个 javascript 函数`renderWidgets(widgets)`将更新 html 页面

除了用户 12345 之外，我不希望其他任何人访问他们自己的小部件，所以我想`getWidgets()`必须为我的 Web 服务提供一些身份验证。我不确定实现这一目标的最佳方法是什么。

我在想客户端和服务器可以有一个共享的秘密，`getWidgets()`将发送到网络服务。服务器可以将这个秘密生成为随机字符串（数字、GUID 或其他），并在客户端请求初始 HTML 页面时将其包含在响应标头中。客户端在向服务器发送请求时将使用此密钥。

这听起来像一个明智的想法吗？

这是一个常见的要求，那么是否有实现相同目标的标准方法？据我所知，这超出了 OpenID 的范围，OAuth 不适合。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T23:36:58.773

这是一个很好的问题 - 但我认为您的解决方案可能需要比您想象的更复杂一些。

通常，您希望对这种场景进行身份验证的方式是两阶段握手。第一步是让您的应用程序向服务器提供一个私钥（由服务器生成，对客户端应用程序唯一）来验证它实际上是一个有效的客户端。这为您的服务器提供了权威证据，证明请求来自它知道并可以信任的软件。

然后，第二步是当用户登录到您的客户端应用程序时，他们提供用户名/密码组合。此信息以及您的应用程序密钥都应通过 SSL 发送到服务器。

SSL 对数据进行加密，因此具有数据包嗅探器的第三方无法读取传输中的数据，服务器执行以下操作：

1.  检查应用程序密钥是否有效。
2.  验证用户名是否存在，并且与应用程序相关联。
3.  加密密码并根据数据库中与用户名关联的加密版本测试加密版本。
4.  **如果**上面列出的所有检查都通过，服务器会返回一个会话 ID，该 ID 可以放入客户端 cookie - 并用于在每个后续请求中重新验证用户。**如果任何**测试失败 - 服务器返回`401: Unauthorized`响应或其他类似错误。

此时，客户端可以使用返回的会话 ID，而无需继续重新提交应用程序密钥。

**你的申请**

现在，在您的情况下，您实际上可能将客户端/服务器托管在同一应用程序和同一服务器上。在这种情况下 - 您通常可以跳过所有围绕私有应用程序密钥的部分 - 并简单地禁止跨站点脚本请求。

*为什么？*- 因为您真正要防止的事情是：

服务器 A 托管您的 RESTful API。客户端的 B、C 和 D 托管依赖于服务器 A 的 API 的客户端。您不希望客户端 E（不是您的应用程序 - 并且是恶意的）能够通过绕过或窃取其他客户端之一的凭据来访问服务器 A。

但是，如果客户端和服务器都托管在同一个地方，因此具有相同的 URL - 即 RESTful API 驻留，`www.yourdomain.com/api`客户端驻留`www.yourdomain.com/`- 您通常可以不允许任何源自外部的 AJAX 类型请求`yourdomain.com`- 并且那是您的安全层。

在这种情况下，您只需执行以下操作即可获得合理的安全级别：

1.  为您的服务器启用 SSL。
2.  只允许通过 SSL 发出请求`/auth/login`（或任何您的登录`POST`方法）（在 C# 中，这可以通过使用`[RequireHttps]`方法或控制器上的属性来完成）。
3.  拒绝任何源自您自己域之外的 AJAX 请求。
4.  在您的 cookie 中使用一层加密。

*你的 cookie 应该包含什么？*

理想情况下，cookie 应该包含只有您的服务器才能解密的双向加密数据。换句话说 - 您可能会在 cookie 中放置类似用户`username`或`user_id`内部的内容 - 但使用 Rijndael 或其他加密系统对其进行 2 路加密 - 使用只有您的服务器可以访问的加密密码（我建议使用随机字符串）。

然后 - 当您收到附加 cookie 的后续请求时，您可以简单地执行以下操作：

1.  如果 cookie 存在，请尝试使用您的私人密码对其进行解密。
2.  如果生成的解密数据是垃圾 - 抛出`401: Unauthorized`响应（这是一个更改或伪造的 cookie）
3.  如果生成的解密数据是与您的数据库匹配的用户名 - 您现在知道是谁在发出请求 - 并且可以相应地过滤/提供数据。

我希望这有帮助。:) 如果没有 - 请随时发表任何评论并提出问题，我会尽力澄清。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T19:32:47.823

这不是将请求 MAC 化到 Web 服务那么简单吗？

因此，您提供了调用 Web 服务的 JavaScript，在此 JavaScript 中放置了一个 nonce。与大多数 nonce 实现不同，您可以在用户会话期间使用它。

调用 Web 服务时，GetWidgets() 中的 JavaScript 使用 nonce 作为键来散列一些“随机”数据，我可能会使用格式化为字符串的时间和数据，用户的 id (12345) 作为盐. JavaScript 然后将散列数据和未散列的时间字符串作为 Web 服务调用的一部分发送，但不发送随机数。然后，我会确保发送的时间是最近的（即最后 20 秒，限制重播攻击），并且当服务器将用户 ID 作为盐与随机数（它知道因为它设置它）散列时间时，它得到相同的结果。

因此，我们使用了由服务器设置并发送给客户端的共享密钥，作为生成散列消息授权码（MAC 或 HMAC）的密钥，同时也防止了重放攻击（每个请求的 MAC 都不同，并且有一个非常短的重播窗口）并通过不在 cookie 中传输任何会话信息来防止会话劫持。

* * *

我以前没有遇到过您的具体情况，但它似乎确实是身份验证消息的一般问题的具体情况，但不想随每条消息发送凭据。MACing 是我所看到的可靠方式。

请参阅：[http](http://en.wikipedia.org/wiki/Message_authentication_code) ://en.wikipedia.org/wiki/Message_authentication_code ，这很好地概述了 MACing，甚至包括一个很好的图表来帮助解释。这是一个相当成熟的解决方案，我建议的唯一偏差（因为我已经犯规了）是在消息中包含时间以防止重播。

它是 Last.fm 用于帮助授权访问其 API 的方法的基础，请参阅此页面上的第 8 部分（签名调用）：[http](http://www.last.fm/api/authspec#8) ://www.last.fm/api/authspec#8 。他们使用的散列是 MD5，查询字符串包含在要散列的正文中，使用的秘密是从初始身份验证调用获得的会话密钥。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T14:09:54.077

我对安全性了解不多，但我认为这完全取决于您愿意花费多少时间/成本（请记住，一切都是可破解的）。

像您一样关心安全性，您可能保护了会话变量，您可以做的最简单的事情是对服务器操作的 ajax 调用，您可以在其中检查会话并将其与用户请求进行比较。

# java - eclipse中有没有办法为布局中的所有指定视图自动生成引用/字段到一个类中？

> ID：13186456
> 
> 赞同：0
> 
> 时间：2012-11-01T22:26:16.237
> 
> 标签：java, android, eclipse

eclipse中有没有办法为布局中的所有指定视图自动生成引用/字段到一个类中？

即单击某处以在指定的活动类中自动生成一个变量，用于布局上的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:52:14.480

不，我认为目前这是不可能的，但您可以为我们提供一个糖果 Eclipse 插件：D

# c# - C# Webbrowser 自动化的许多问题

> ID：13186458
> 
> 赞同：0
> 
> 时间：2012-11-01T22:26:21.463
> 
> 标签：c#, cookies, automation, browser, form-submit

我通过自动化网站，输入数据，然后提交该网站并在它响应时获取数据来在网络中进行项目。在 google 上冲浪，我决定使用 Webbrowser Control 在 codeproject 中选择最好的 acticle。

[http://www.codeproject.com/Articles/50544/Using-the-WebBrowser-Control-in-ASP-NET](http://www.codeproject.com/Articles/50544/Using-the-WebBrowser-Control-in-ASP-NET)

有很多问题我无法通过谷歌找到解决方案来追踪和尝试，但没有任何改变。

我要提取数据的网站的提交表单如下：

```
<form id = "ctl103">
  <input type="radio" id="rdoFlightTypeReturn" name="rdoFlightType"   
                      value="return" checked="checked"/>

  <input type="radio" id="rdoFlightTypeOneWay" name="rdoFlightType" 
                  value="oneway" />
  <input name="so long" type="text" id="txtOrigin" autocomplete="off" />
  <input name="very much" type="text" id="txtDestination" autocomplete="off" />
  <input type="text" id="txtDepart" autocomplete="off" name="txtDepart"/>  
                                                       //dd/mm/yyyy format
  <input type="text" id="txtReturn" autocomplete="off" name="txtReturn" /> 
                                                       //dd/mm/yyyy format 
  <button type="submit" class="png-bg" id="btnSearchForFlights">Search Flight</button>
</form> 
```

我为提交此表单而编写的代码：

```
void IEBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    HtmlDocument doc = ((WebBrowser)sender).Document;

    if (doc.Title.Equals("Home") && loginCount++ < 3)
    {   try
        {
            HtmlElement element = doc.GetElementById("rdoFlightTypeOneWay");
            element.InvokeMember("click");
            } 
        catch {
            ieBrowser.Navigate("http://www.my---favoritesite.com");
            return;
        }
        doc.GetElementById("txtOrigin").InnerText = "SGN";
        doc.GetElementById("txtDestination").InnerText = "HAN";
        doc.GetElementById("txtDepart").InnerText = "03/11/2012";
        doc.InvokeScript("setTimeout", new object[] { "submitFlights()", 20 });

    }
    else
    {

        doc.InvokeScript("setTimeout", new object[] {   
        string.Format("window.external.getHtmlResult({0})", navigationCounter), 10 });
    }
} 
```

问题是：

有时它会起作用，通常是在我第一次运行该项目时很少，但在那之后就不行了。我认为原因是我无法提交或回发错误的方式，所以我尝试这样的事情：

```
HtmlElement button_searchFlight = doc.GetElementById("btnSearchForFlights");
button_searchFlight.InvokeMember("click"); 
```

或者

```
mshtml.HTMLAnchorElementClass obj =   
(HTMLAnchorElementClass)button_searchFlight.DomElement;
obj.click(); 
```

或者

```
mshtml.HTMLButtonElementClass button1 =  
(mshtml.HTMLButtonElementClass)button_searchFlight.DomElement;
button1.click(); 
```

或者

```
doc.InvokeScript("submitFlight()"); 
```

或 doc.GetElementById("ctl03").InvokeMember("submit");

所有这些东西都出错或重置表格或什么都不做，所以我回来了

```
doc.InvokeScript("setTimeout", new object[] { "submitFlights()", 20 }); 
```

提交表格。

注意：一件很奇怪的事情是：当我在网上找到时，我发现“submitFlight()”可以工作。它触发了 bookNow()，之后， bookNow() 触发了另一个脚本“formsubmit()”，但我在源代码中的任何地方都找不到“formsubmit()”，包括指向页面的其他一些 javascript 链接。

因为我已经成功地运行了这个项目，现在它也没有向网站发布任何数据，所以我认为问题可能出在网站之前设置的 cookie 上。我已经去 IE (Internet Explorer) 删除所有 cookie。之后，代码再次工作以提交输入数据，但方式错误。我发现一些 cookie 仍然设置，这是关于文本框“txtDepart”设置“2012 年 1 月 11 日”的旧状态

我能弄清楚我的问题可能与网站的 javascript 或/和它设置的 cookie 有关。

（对不起，因为我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:28:06.453

尝试使用 WatiN 进行网络自动化。其中许多任务都是为您包装的。

# jquery - jQuery 在图像上使用 .blur()

> ID：13186459
> 
> 赞同：0
> 
> 时间：2012-11-01T22:26:22.410
> 
> 标签：jquery, image, radio-button

考虑单击父 div 时 ID 淡入的图像，简单吧？

我正在使用这种技术来模拟单选按钮。

HTML

```
<div id="parent_div">
    <img id="image_id" style="display:none;" src="/images/some_image.png">
</div> 
```

jQuery

```
$('#parent_div').on('click', function(){
    $('#image_id').fadeIn(200);
}); 
```

现在的问题是，在 Firefox（可能还有其他浏览器）中，当单击父 div 并且图像淡入时，图像具有被突出显示的外观。

话虽如此，如果我单击屏幕上的其他位置，图像突出显示就会消失。有没有办法解决这个问题而不必点击其他地方？

我尝试像这样使用 .blur() ，希望它可以工作。

```
$('#image_id').fadeIn(200).blur(); 
```

这是一个视觉示例： http: [//www.videsignz.com/images/blur_image.jpg](http://www.videsignz.com/images/blur_image.jpg)

JSFiddle： http: [//www.jsfiddle.net/VRfuJ/](http://www.jsfiddle.net/VRfuJ/)

这是我的小提琴观点： http: [//www.videsignz.com/images/myfiddleview.jpg](http://www.videsignz.com/images/myfiddleview.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:44:51.247

您可以尝试将 img 更改为带有背景图像的 div：

html代码：

```
<div id="parent_div">
  <div id="image_id"></div>
</div>

<style>
  #parent_div {
      border: 1px solid gray;
      min-height: 20px;
    }

  #image_id {
      display:none;
      background-image: url('http://www.myfico.com/Images/sample_overlay.gif');
      width: 382px;
      height: 259px;
  }

</style>
<script type="text/javascript">
  $('#parent_div').on('click', function(){
    $('#image_id').fadeIn(200);
  });
</script> 
```

请参阅（更新的）plunker：[http ://plnkr.co/edit/8Hi2OP?p=preview](http://plnkr.co/edit/8Hi2OP?p=preview)

祝你好运！

**更新**： div 现在已修复（必须关闭），请参见此处的小提琴：http: [//jsfiddle.net/VRfuJ/1/](http://jsfiddle.net/VRfuJ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:48:03.037

我猜这就是你所追求的：

```
$('img, .radio_btn').on('mousedown', function(e) {
    document.onselectstart = function() { return false; };
    e.target.ondragstart = function() { return false; };
    return false;
});

$('.radio_btn').on('click', function() {
    if (!$('img', this).is(':visible')) {
        $('img', this).fadeIn(200);
        $('.radio_btn').not(this).find('img').fadeOut(200);
    }
}); 
```

[**小提琴**](http://jsfiddle.net/VRfuJ/6/)

# ios - Upnpx LastChangeParser

> ID：13186460
> 
> 赞同：0
> 
> 时间：2012-11-01T22:26:23.393
> 
> 标签：ios, xcode, upnp, sonos

我正在测试 upnpx 库来控制 sonos 多房间音频系统......工作正常。我对事件只有一个主要问题。如果我从 sonos 渲染器获得音量变化事件，像这样

```
<Event xmlns="urn:schemas-upnp-org:metadata-1-0/RCS/"><InstanceID val="0"><Volume channel="Master" val="66"/><Volume channel="LF" val="100"/><Volume channel="RF" val="100"/></InstanceID></Event> 
```

我在-(void)UPnPEvent:(BasicUPnPService*)sender events:(NSDictionary*)events{中没有得到洞事件和错误值

```
InstanceID = 100; Volume = 100; 
```

它应该是 ...

```
InstanceID = 0; Volume = 66; 
```

如果有人能建议我正确的方向，我会很高兴！

最好的问候自贸区

```
upnpxdemo[66489:1310b] BasicParser.h didStartElement: propertyset

upnpxdemo[66489:1310b] BasicParser.h didStartElement: property

upnpxdemo[66489:1310b] BasicParser.h didStartElement: LastChange

upnpxdemo[66489:1310b] BasicParser.h didEndElement: LastChange, obj: <Event xmlns="urn:schemas-upnp-org:metadata-1-0/RCS/"><InstanceID val="0"><Volume channel="Master" val="52"/><Volume channel="LF" val="100"/><Volume channel="RF" val="100"/></InstanceID></Event>

upnpxdemo[66489:1310b] LastChange - element:LastChange, value:<Event xmlns="urn:schemas-upnp-org:metadata-1-0/RCS/"><InstanceID val="0"><Volume channel="Master" val="52"/><Volume channel="LF" val="100"/><Volume channel="RF" val="100"/></InstanceID></Event>

upnpxdemo[66489:1310b] BasicParser.h didStartElement: Event

upnpxdemo[66489:1310b] BasicParser.h didStartElement: InstanceID

upnpxdemo[66489:1310b] BasicParser.h didStartElement: Volume

upnpxdemo[66489:1310b] LastChangeParser.h void propertyName name:Volume value:52

upnpxdemo[66489:1310b] BasicParser.h didStartElement: Volume

upnpxdemo[66489:1310b] LastChangeParser.h void propertyName name:Volume value:100

upnpxdemo[66489:1310b] BasicParser.h didStartElement: Volume

upnpxdemo[66489:1310b] LastChangeParser.h void propertyName name:Volume value:100

upnpxdemo[66489:1310b] LastChangeParser.h void propertyName name:InstanceID value:100

upnpxdemo[66489:1310b] Event Digctionary: {
    InstanceID = 100;
    Volume = 100;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:19:54.770

事件是正确的。我下载了 upnpx 源代码，但无法理解其中的`BasicParser`逻辑`UPnPEventParser`——我在 Objective-C 中工作了这么长时间。我想知道 upnpx 是如何解释同一个键可以有多个值的，只是`channel`属性不同。这是事件命名约定中的一个例外`LastChange`，键通常是唯一的。事件中的最后一个`Volume`存在是 100，因此 upnpx 可能一直在替换`Volume`key 的 value。

但它没有解释 InstanceID 编号错误。你确定你做对了吗？`events`您可以发布NSDictionary的完整转储吗？

# automapper - AutoMappers AllowNullCollections 设置可以限制在配置文件中吗？

> ID：13186463
> 
> 赞同：1
> 
> 时间：2012-11-01T22:26:43.377
> 
> 标签：automapper, automapper-2

**注意：**我也在[AutoMapper 邮件列表上问过这个问题](https://groups.google.com/d/msg/automapper-users/-/fG3koTLfYLoJ)

我的 MVC 应用程序本质上具有两个级别的映射（针对此问题进行了简化）：

```
RepositoryObject <-> Entity <-> ViewModel 
```

我们创建了两个配置文件，每个配置文件处理适当映射级别的配置。

“RepositoryObjects”最终被序列化为 XML 并用于 REST Web 服务。我们发现的问题是 RepositoryObject 中的空集合会序列化为 XML 中的空元素，这会导致问题，因为 Web 服务要么不期望任何元素，要么期望包含数据的元素。

我们能够使用 AllowNullCollections 配置设置解决此问题。这将（当然）创建一个空集合而不是一个空集合，然后可以很好地序列化。

但是，我并不完全愿意将其作为全局设置，因为正如[Jimmy 所指出的那样](https://github.com/AutoMapper/AutoMapper/issues/63#issuecomment-1983859)，它并不是真正的最佳实践。我很高兴将它包含在`RepositoryObject <-> Entity`映射中，因为 RepositoryObjects 是自动生成的（无论如何都很丑陋）并且它在应用程序中的级别非常低。但如果可能的话，我宁愿不要“破坏”`Entity <-> ViewModel`映射。

那么，是否可以为每个配置文件配置此设置？

谢谢。

**更新**

我在这里创建了测试代码：[https ://gist.github.com/4069909](https://gist.github.com/4069909)

复制到这里供参考：

**ProfileClasses.cs**

```
namespace NullCollectionIssue
{
    using System.Collections.Generic;

    public class SourceProfileOne
    {
        public ICollection<string> Stuff { get; set; }
    }

    public class DestProfileOne
    {
        public ICollection<string> Stuff { get; set; }
    }

    public class SourceProfileTwo
    {
        public ICollection<string> Stuff { get; set; }
    }

    public class DestProfileTwo
    {
        public ICollection<string> Stuff { get; set; }
    }
} 
```

**AutoMapperConfigurator.cs**

```
namespace NullCollectionIssue
{
    using AutoMapper;

    public class ProfileOne : Profile
    {
        public override string ProfileName
        {
            get
            {
                return "ProfileOne";
            }
        }

        protected override void Configure()
        {
            AllowNullCollections = true;
            Mapper.CreateMap<SourceProfileOne, DestProfileOne>();
        }
    }

    public class ProfileTwo : Profile
    {
        public override string ProfileName
        {
            get
            {
                return "ProfileTwo";
            }
        }

        protected override void Configure()
        {
            Mapper.CreateMap<SourceProfileTwo, DestProfileTwo>();
        }
    }

    public static class AutoMapperConfigurator
    {
        public static void Configure()
        {
            Mapper.Initialize(x =>
            {
                x.AddProfile<ProfileOne>();
                x.AddProfile<ProfileTwo>();
            });
        }
    }
} 
```

**映射测试.cs**

```
namespace NullCollectionIssue
{
    using AutoMapper;

    using NUnit.Framework;

    [TestFixture]
    public class MappingTests
    {
        [Test]
        public void AutoMapper_Configuration_IsValid()
        {
            AutoMapperConfigurator.Configure();
            Mapper.AssertConfigurationIsValid();
        }

        [Test]
        public void AutoMapper_ProfileOne_AllowsNullCollections()
        {
            AutoMapperConfigurator.Configure();
            Mapper.AssertConfigurationIsValid();

            var source = new SourceProfileOne { Stuff = null };
            var dest = Mapper.Map<SourceProfileOne, DestProfileOne>(source);

            Assert.That(dest, Is.Not.Null);
            Assert.That(dest.Stuff, Is.Null);
        }

        [Test]
        public void AutoMapper_ProfileTwo_DoesntAllowNullCollections()
        {
            AutoMapperConfigurator.Configure();
            Mapper.AssertConfigurationIsValid();

            var source = new SourceProfileTwo { Stuff = null };
            var dest = Mapper.Map<SourceProfileTwo, DestProfileTwo>(source);

            Assert.That(dest, Is.Not.Null);
            Assert.That(dest.Stuff, Is.Not.Null);
            Assert.That(dest.Stuff, Is.Empty);
        }
    }
} 
```

测试`AutoMapper_Configuration_IsValid`并`AutoMapper_ProfileTwo_DoesntAllowNullCollections`通过，但测试`AutoMapper_ProfileOne_AllowsNullCollections`失败，因为`dest.Stuff`不为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:35:38.067

查看此功能[的初始提交的源代码](https://github.com/jbogard/AutoMapper/commit/f3c28fe04b3cd36c99a2836a83b504233f4b9577)，这似乎是一个配置文件属性 - 查看 Profile.cs。

所以，我想，它应该适用于每个配置文件。我没有尝试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:07:58.687

你得到这个行为是因为你`Mapper.Map`在你的 configure 方法中调用了静态：

```
protected override void Configure()
{
    Mapper.CreateMap<SourceProfileTwo, DestProfileTwo>();
} 
```

应该改为

```
protected override void Configure()
{
    CreateMap<SourceProfileTwo, DestProfileTwo>();//leading Mapper. removed
} 
```

# windows - Windows 8 等效于 windows phone 市场搜索任务

> ID：13186465
> 
> 赞同：-2
> 
> 时间：2012-11-01T22:26:50.350
> 
> 标签：windows, winapi, windows-8, windows-runtime, winapp

有谁知道是否有相当于`MarketplaceSearchTask`window phone的`Windows 8`？
我将在 Windows 8 市场上推出一系列应用程序，我希望用户可以将其推送到其他地方。然后您可以将其链接到市场，即您自己的帐户，这样他们就可以看到您的所有应用程序。

我已经搜索了很长时间，但我没有找到任何东西。这里有人知道答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:20:40.113

我认为当前的 Windows 8 API 不可能有相同的东西，所以最好的办法是显示应用程序的链接，这些应用程序要么硬编码到你的应用程序中（你可以通过应用程序更新进行更新）或托管一个服务搜索并在您自己的应用程序中显示结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T04:31:43.527

你可以使用下面的 Uri 来启动你的应用程序：

```
ms-windows-store:Publisher?name=[your publisher display name] 
```

发布者名称中的任何空格都应呈现为 %20。

# python - datetime 值小于 datetime.min 是什么意思？

> ID：13186471
> 
> 赞同：5
> 
> 时间：2012-11-01T22:27:26.307
> 
> 标签：python, datetime, timedelta

这里发生了什么？

这预期：

```
>>> datetime.min - timedelta(days=1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OverflowError: date value out of range 
```

意外：

```
>>> datetime.min - timedelta(days=2)
datetime.datetime(1, 0, 255, 0, 0)

>>> datetime.min > (datetime.min - timedelta(days=2))
True 
```

在 python 中，当您从 datetime.min 中减去这些值时，这些值是什么意思？它们代表什么日期？为什么有些情况不会触发 OverflowError？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:04:33.530

因为您需要升级到 Python 2.6 或更高版本，从而修复了此错误。

```
$ python2.5 -c 'import datetime; print(datetime.datetime.min - datetime.timedelta(days=2))'
0001-00-255 00:00:00
$ python2.6 -c 'import datetime; print(datetime.datetime.min - datetime.timedelta(days=2))'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
OverflowError: date value out of range
$ python2.7 -c 'import datetime; print(datetime.datetime.min - datetime.timedelta(days=2))'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
OverflowError: date value out of range
$ python3.3 -c 'import datetime; print(datetime.datetime.min - datetime.timedelta(days=2))'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
OverflowError: date value out of range 
```

您是否需要有人跟踪错误编号、补丁和 python-dev 讨论，或者这些信息对您来说是否足够？

# ruby-on-rails - 安全问题：绕过 Rails 3.1 中的 reCaptcha

> ID：13186472
> 
> 赞同：0
> 
> 时间：2012-11-01T22:27:26.477
> 
> 标签：ruby-on-rails, security, recaptcha, spam

我不明白他们是如何成功发布这么多垃圾邮件的，即使我有 recaptcha 工作（如果 verify_recaptcha ...）这是我在控制器中的内容：

```
def create
    @comment = Comment.new(params[:comment])

    respond_to do |format|
      if verify_recaptcha(:model => @post, :message => "Oh! There's a problem with reCAPTCHA's input!")
        if @comment.save
          #flash[:submit_notice] = 'Comment was successfully created.'
          Notifications.comment_notification(@comment).deliver
          format.html { redirect_to(:back) }
        else
          format.html { redirect_to(@comment) }
        end
      end
    end
  end 
```

这是我在 production.log 中看到的：

```
Started POST "/en/comments" for 199.15.234.180 at 2012-11-01 19:50:48 +0200
Processing by CommentsController#create as */*
  Parameters: {"utf8"=>"&#x2713;", "authenticity_token"=>"yFrJyx7EPCG9d29+PEbkNOHlUpuyXIVSy5acGNOO0mU=", "comment"=>{"pos..... 
```

垃圾邮件 HTML 紧随其后。据我了解，“as */*”不是 HTML，它是“正常”的 POST 请求。所以我猜问题出在某个地方。试图用谷歌搜索 */* 没有找到任何东西。那到底是什么？

**更新：[已解决]**

看起来这不是问题，只是一个无聊的人持续发布垃圾邮件评论并解决了 reCaptchas（或者机器学习到目前为止可能已经取得了进步？）。可能 Mollom 是接下来要添加的东西 :)

# objective-c - 声明具有未知大小目标 c 的对象 X 的数组

> ID：13186473
> 
> 赞同：0
> 
> 时间：2012-11-01T22:27:28.107
> 
> 标签：objective-c

我将如何在 .h 文件中声明一个未知大小的数组，我将在类内的 a 函数中计算该数组？

例如，我可能有 20 或 30 个 NSArray（只是一个例子，不是我需要的），但我不知道第一次调用该类时的确切数字

在实现文件中..

```
-(id) init {
   if self = ..
       number_of_arrays = 50; // this can be whatever value
} 
```

在.h中：

```
int number_of_arrays;
NSArray *arrays_of_unknown_size[number_of_arrays]; // but number of arrays is not init ! 
```

* * *

另外， NSArray **arrays 的意义是什么？我可以在 h 文件中声明，然后在 .m 文件中声明实际大小吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:33:12.127

你有两个选择。

1) 使其成为 NSArray 的 NSArray，或

2) 声明为：

```
NSArray **arrays_of_unknown_size; 
```

然后，当您知道实际大小时，您可以 malloc/calloc 指针。然后你需要为 C 数组的每个元素分配一个 NSArray。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T22:38:21.630

就像 rmaddy 所说，您可以使用 malloc 分配数组：

```
arrays_of_unknown_size= (NSArray**)malloc(N*sizeof(NSArray*)); 
```

你也可以用 realloc 重新分配它，大小可能会改变。
另一种方法是使用包含数组的数组：

```
NSMutableArray* array_of_unknown_size=[[NSMutableArray alloc]init]; 
```

然后当数组已经填充时，获取您想要的单个数组：

```
NSArray* myArray=[array_of_unknown_size objectAtIndex: myIndex]; 
```

当然arrays_of_unknown_size太长了，不要用这个名字，只是一个例子。

# c++ - 在循环中初始化变量

> ID：13186476
> 
> 赞同：6
> 
> 时间：2012-11-01T22:27:48.130
> 
> 标签：c++, for-loop

我试图弄清楚初始化某些变量时的最佳做法是什么……我的代码现在看起来像这样：

```
int nHexCount = 0;
int prevState = sc.state;

bool bOnlySpaces = true;
bool bIsValidLabel = true;
bool bIsHotstring = false;
bool bIsValidName = true;
bool bIsValidExpStart = false;                         

bool fInExpression = false;
bool fInStringBlock = (sc.state == SCE_AHKL_STRINGOPTS || sc.state == SCE_AHKL_STRINGBLOCK);

for (; sc.More(); sc.Forward()) {

    if (sc.atLineStart) {
        if (!fInStringBlock && sc.state != SCE_AHKL_COMMENTBLOCK)
            sc.SetState(SCE_AHKL_DEFAULT);

        // Reset Status
        prevState = sc.state;

        bOnlySpaces = true;
        bIsValidLabel = true;
        bIsHotstring = false;
        bIsValidName = true;
        bIsValidExpStart = false;

        fInExpression = false;
    }

... 
```

因此，您可以看到，每次我的程序在我正在处理的编辑组件中找到新行时，这些变量中的大部分都会被重置...

问题是：

**在 for 循环中声明和初始化所有这些变量是更好的编程实践，还是应该像现在一样保留它？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T22:30:05.760

您应该始终尽可能地缩小变量的范围。这将提高代码的可维护性，并减少出现错误的机会。

```
// bad
int i, j, k;
k = 0;
for (i = 0; i < X, ++i)
{
  j = foo(i);
  k += j;
} 

bar(k); 
```

……对……

```
// better
int k=0; // needs scope outside loop
for (int i = 0; i < X, ++i)
{
  int j = foo(i);
  k += j;
} 

bar(k); 
```

# powershell - 从远程 FTP 服务器上的文件中获取日期

> ID：13186477
> 
> 赞同：2
> 
> 时间：2012-11-01T22:27:53.437
> 
> 标签：powershell, ftp-client

要获取文件，方法如下所示：

```
$ftprequest.Method = [System.Net.WebRequestMethods+Ftp]::DownloadFile 
```

因此，我正在尝试将 Method 更改为等效于下面的 C# 代码：

```
request.Method = System.Net.WebRequestMethods.Ftp.GetDateTimestamp; 
```

如何在 powershell 中使用 GetDateTimestamp？

我已经尝试了以下变体，但没有任何运气：

```
$ftprequest.Method = [System.Net.WebRequestMethods+Ftp.GetDateTimestamp]
$ftprequest.Method = [System.Net.WebRequestMethods+Ftp+GetDateTimestamp]
$ftprequest.Method = [System.Net.WebRequestMethods.Ftp.GetDateTimestamp]
$ftprequest.Method = [System.Net.WebRequestMethods.Ftp+GetDateTimestamp] 
```

奖金问题：第一个代码示例中的 :: 意思是什么意思？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:56:25.853

这似乎有效：

```
$ftprequest.Method = [System.Net.WebRequestMethods+Ftp]::GetDateTimestamp 
```

`::`是访问共享/静态成员，即`GetDateTimeStamp`。

# java - 什么可能导致我的结果与他们应该打印的结果相反？

> ID：13186484
> 
> 赞同：1
> 
> 时间：2012-11-01T22:28:23.667
> 
> 标签：java, binary, numbers, base, base-conversion

这是我为 while/do-while 循环设置的最后一个实验室，除了我的结果打印出来的结果与它应该是什么完全相反之外，我已经弄清楚了。

```
public class TenToAny
{
private int base10;
private int newBase;

public TenToAny()
{

}

public TenToAny(int ten, int base)
{
   base10 = ten;
   newBase = base;
}

public void setNums(int ten, int base)
{
   base10 = ten;
   newBase = base;
}
public String getNewNum()
{
    String newNum="";
    int orig = base10;

    while(orig > 0)
    {
        newNum = orig%newBase + newNum;
        orig = orig/newBase;
    }
    return newNum;
}

public String toString()
{
    String complete = base10 + " base 10 is " + getNewNum() + " in base " + newBase;

    return complete;
}

} 
```

这就是我的结果应该是：

> 234 base 10 是 280 in base 9
> 
> 100 base 10 是 1100100 in base 2

这些是前两个值的预期结果（基数为 9 的 234 和二进制的 100）

这是我得到的：

> 234 base 10 是 082 in base 9
> 
> 100 基数 10 是基数 2 中的 0010011

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:32:17.867

您只是添加结尾`newNum`而不是前置。

```
newNum = newNum + orig%newBase; 
```

... 应该 ...

```
newNum = orig%newBase + newNum; 
```

对于人物...

当`orig%newBase > 9`, 那么`char(55 + orig%newBase)`

```
var nextValue = orig % newBase;

if (nextValue > 9)
{
    newNum = char(55 + nextValue) + newNum;
}
else
{
    newNum = nextValue + newNum;
} 
```

# matlab - 在 MATLAB 中为非整数转换基数

> ID：13186489
> 
> 赞同：1
> 
> 时间：2012-11-01T22:28:50.417
> 
> 标签：matlab

我希望将八进制基数的 45653.127664 转换为十六进制、二进制和十进制。

如何使用 MATLAB 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:45:09.657

有很多功能可以做到这一点，尝试不同的组合`base2dec, dec2base`

# javascript - Javascript，嵌套事件处理程序和这个

> ID：13186490
> 
> 赞同：0
> 
> 时间：2012-11-01T22:28:55.130
> 
> 标签：javascript, node.js, this

我有这个 javascript 类：

```
var Server = (function () {

var spawn = require('child_process').spawn;

function Server(serverDefinition) {
    this.definition = serverDefinition;
    this.status = false;
}

Server.prototype.start = function () {
    this.process = spawn('java', ['-jar', this.definition.jarfile]);
    this.status = true;

    this.process.on('exit', function(code, signal){
        this.status = false;
        console.log('Server stopped: code=' + code + ', signal=' + signal);
    });

    this.process.stdout.on('data', function(data){ console.log('stdout: ' + data);});
    this.process.stderr.on('data', function(data){ console.log('stderr: ' + data);});
};

return Server; 
```

})();

我的问题是`this`里面的`this.process.on('exit', ... )`引用`process`，而不是`Server`我想要的。

处理此案的最佳模式是什么？一个`_self = this`？在这种情况下，应该在哪里插入该行，我应该停止引用`this`并只使用它`_self`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:56:48.723

您可以在函数范围内创建一个包含对 的引用的局部变量`this`，这将起作用，因为在 JavaScript 中，变量的范围由其在源代码中的位置定义，并且嵌套函数可以访问在其外部声明的变量范围。[ [1](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures) ]

```
Server.prototype.start = function () {
    var serv = this; // Reference to local object for use in inner-functions

    this.process = spawn('java', ['-jar', this.definition.jarfile]);
    this.status = true;

    this.process.on('exit', function(code, signal){
        serv.status = false;
        console.log('Server stopped: code=' + code + ', signal=' + signal);
    });

    this.process.stdout.on('data', function(data){ console.log('stdout: ' + data);});
    this.process.stderr.on('data', function(data){ console.log('stderr: ' + data);});
}; 
```

在我看来，最好的做法是`this`尽可能地继续参考以明确您所指的内容，在调试时可能会错过重新分配使用的局部变量，从而很难找到错误。

# android - 由于可打包对象，在片段上保存状态会产生 StackOverflow 错误

> ID：13186491
> 
> 赞同：1
> 
> 时间：2012-11-01T22:28:54.967
> 
> 标签：android, android-fragments, savestate, parcel

我在一项活动下使用 2 个不同的片段。其中一个片段包含一个列表，另一个片段包含列表中每个元素的详细视图。当活动创建片段时，2 个对象作为新实例的参数传递。

这是一个复杂的对象，其中包含许多字段（BigIntegers、ArrayLists、Strings..）。该对象实现 Parcelable 以便与片段一起使用。当信息通过分片传递时，解析数据没有任何问题，实际上我认为为了保存状态，需要这些对象是可打包的，而不是作为分片之间的参数传递。

该对象包含在一个对象列表中，其中包含对主要对象的引用。将 O1 作为对象 1，将 O2 作为对象 2，这将是一个“图形”解释：

O1：

*   细绳
*   大整数
*   数组列表
*   ……
*   数组列表

氧气：

*   大整数
*   O1<-------- 这是对 O1 对象的引用

当我离开活动（通过单击手机中的主页）并尝试保存状态时，我收到 StarOverflow 错误。是否与 parcelable 进入无限循环试图保存整个对象而不是引用有关？我在 android 上处理 parcelable 对象时遇到了很多麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:57:32.447

不太精通 Parcelable 及其工作方式，但在我看来，它似乎是一个引用循环 - 即对象通过其一个或多个属性引用回自身。

如果您可以循环回任何实例，请参阅 Parcelables 的类定义。

# google-app-engine - 删除 Blobstore 孤儿

> ID：13186494
> 
> 赞同：2
> 
> 时间：2012-11-01T22:29:21.207
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore, blobstore

从 Blobstore 中删除孤立 blob 的最有效方法是什么？

**应用功能和范围：**

*   一个（登录的）用户想要创建一个包含一些普通数据存储字段（例如姓名、姓氏、评论）和 blob（图像）的帖子。
*   此外，在通过 POST 发送数据恢复之前，blob 是异步上传的
    *   *这给孤儿留下了很好的机会，例如，用户可能会上传图像但由于某种原因没有填写表格。通过在发送其余数据之前不使用 blob 的异步上传可以最小化这个问题，但是，这个问题仍然会在较小的范围内存在。*

**可能但低效的解决方案：**

*   每当一个帖子完成（即发送其余数据）时，您将 blob 键添加到“已用 blob”表中。然后，您可以每隔一段时间运行一个 cron 并将所有 blob 与“已用 blob”表进行比较。一个多小时前上传但仍“未使用”的将被删除。
    *   我的理解是，遍历可能包含数十万个 blob 键的列表并将其与另一个包含数十万个“已使用 blob 键”的表进行比较是非常低效的。

有没有更好的方法来做到这一点？我搜索了类似的帖子，但找不到任何提及有效的解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:20:47.537

感谢您的评论。但是，我很了解这些解决方案，我发现它们效率太低。查询数千个标记为“未使用”的条目并不理想。

我相信我想出了一个更好的方法，并想听听您对此的想法：

保存 blob 后，会立即创建一个延迟任务以在一小时内删除相同的 blob。如果创建并保存了帖子，则会删除延迟任务，因此不会在一个小时内删除 blob。

我相信这可以使您不必每小时查询数千个条目。

您对此解决方案有何看法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:08:49.457

一个 blob 也有一个文件名。发布后，您可以删除所有具有相同文件名的旧 blob。要删除的重复项必须具有相同的所有者或没有所有者。您还必须删除没有所有者的 blob。

这是上传后删除重复项的示例。

```
blobs = blobstore.BlobInfo.gql("WHERE filename = '%s'" %(filename))
for blob in blobs :
    if blob.key() != userdata.blob_ref.key()  : blob.delete() 
```

要清理“未使用”的 blob，您可以在每次上传后安排一个任务，在一个小时后运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T00:06:04.913

您可以创建一个将 blob 链接到用户的实体。当用户上传 Blob 时，您会立即使用 Blob ID、用户 ID（或帖子 ID）和创建时间创建新记录。当用户提交帖子时，您向该实体添加一个标志，指示使用了一个 blob。

现在，您的 cron 作业需要获取标志不等于“true”且创建时间超过一小时前的所有此类实体。此外，您只能获取键，这是一种比获取完整实体更有效的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T20:43:58.370

使用草稿！每次上传后另存为草稿。那就别打扫了！让用户为自己选择一扫而光。

如果您打算发布 Facebook 风格的帖子，请使用草稿或将其设为私有。为什么要删除用户的数据？

# visual-studio-2012 - 保存 TypeScript 文件时，Web Essentials 正在将 .js.map 添加到项目中

> ID：13186499
> 
> 赞同：3
> 
> 时间：2012-11-01T22:29:53.710
> 
> 标签：visual-studio-2012, typescript

我只想在 .csproj 中包含 .ts 和 .js 文件。目前使用的格式是：

```
<Content Include="Scripts\FooterItems\EnableAccount.js">
  <DependentUpon>EnableAccount.ts</DependentUpon>
</Content>
<TypeScript Include="Scripts\FooterItems\EnableAccount.ts" /> 
```

（我有一个自定义构建目标文件，它在构建期间以 TypeScript 元素为目标）。

我已经安装了 Web Essentials，它具有一些有助于 TypeScript 开发的功能，尤其是“保存时将 TS 编译为 JS”。但是，它同时生成 .js 和 .js.map 源映射文件。它还将 .js.map 文件添加到 .csproj 中，这很烦人。请注意，这是将“生成源地图”设置设置为 False。

其他人发现了这一点，并遇到了类似的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:31:56.703

我们的自定义构建目标似乎暴露了 Web Essentials 2012 TypeScript 功能中的错误。

Web Essentials 将 .ts 编译为 .js，但我们已经有了一个由 curtom 构建目标生成的 .js.map。Web Essentials 最终在 csproj 和 TFS 源代码控制中包含了 .js.map。

删除 .js.map 文件并确保我们不在构建目标中生成它们修复了该问题。

# html - 如何修改 Alfresco Share 登录页面？

> ID：13186500
> 
> 赞同：2
> 
> 时间：2012-11-01T22:29:53.270
> 
> 标签：html, css, login, share, alfresco

我已经搞砸了一段时间，但我似乎找不到我需要更改的确切文件才能让共享登录页面看起来像我想要的那样。

基本上我想做的是：

*   更改出现的徽标（完成..我修改了`C:\Alfresco\tomcat\webapps\share\themes\default\login.css`）
*   摆脱版权文本（完成..我修改了`C:\Alfresco\tomcat\webapps\share\themes\default\login.css`）
*   将徽标、输入框和“登录”按钮居中
*   删除页面左上角的“Alfresco >> Login”标题。

我一直在谷歌上四处寻找，我很惊讶没有看到更多的人尝试这样做。有没有人有这方面的经验或知道我可能需要做什么才能让共享登录页面看起来完全符合我的要求？

`login.css`顺便说一句，如果重要的话，这里是我的页面......

```
.login-panel
{
   text-align: left;
}

.login-panel input
{
   border: 1px solid #C5D6E2;
   padding: 2px;
   font-weight: normal;
   font:99% arial,helvetica,clean,sans-serif;
}

.alfresco-share .sticky-wrapper
{
   background-color: #B4B4B4;
}

.yui-panel-container.shadow .underlay
{
   display: none;
}

.yui-skin-sam .yui-panel
{
   border-style: none;
}

.login-panel
{
   width: 502px;
   height: 289px;
   background: transparent url("./images/loginbg.png") no-repeat;
   padding-left: 28px;
   font-family: Arial,Helvetica,sans-serif;
   font-size: 12px;
   font-weight: bold;
   color: #515354;
   visibility: hidden;
}

.login-button
{
   background-color: #f0f0f0;
}

.login-copyright
{
   font-family: Arial,Helvetica,sans-serif;
   font-size: 0px;
   font-weight: normal;
   color: #ffffff;
}

.login-logo
{
   position: absolute;
   top: 16px;
   height: 64px;
   width: 450px;
   background: transparent url("./images/newLogo.gif") no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:23:12.600

我认为您需要更改`slingshot-login.ftl`其中的内容`alfresco/templates/org/alfresco/global/slingshot-login.ftl`

只需将该文件复制到网络扩展程序并更改您喜欢的内容:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:35:35.927

也许您对基于扩展的方法感兴趣。扩展模块是从 4.​​0 版本开始提供的新功能。

您可以利用此功能进行大量自定义，但为了完成您需要做的事情，您只需提供一个额外的 CSS 文件，它会`login.css`在每个请求上覆盖（不管应用的主题）。如果你有兴趣，[这篇文章](http://blogs.alfresco.com/wp/ddraper/2012/01/04/extensibilty-updates-roundup/)会对你有用。

希望能帮助到你。

# objective-c - popToRootViewControllerAnimated 在 shouldSelectViewController UITabBarControllerDelegate 方法的上下文中未正确执行

> ID：13186506
> 
> 赞同：1
> 
> 时间：2012-11-01T22:30:33.767
> 
> 标签：objective-c, uinavigationcontroller, uitabbarcontroller

我为我的 UITabBarController 设置了一个委托，并具有以下委托方法：

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController {    
        [self.navigationController popToRootViewControllerAnimated: YES];
        return NO;
} 
```

该方法会触发，并且在上下文中，我是表视图的一到两个级别。根视图控制器正确显示，但导航栏没有重置，并且仍然有一个从一到两级进入表视图的“后退”按钮。

（上面的委托方法是我在我的应用程序中尝试做的简化形式，但仍然存在问题。在我的应用程序中，我需要在返回原始选项卡时显示根视图，所以我试图弹出在我离开之前到根视图）。

[popToRootViewControllerAnimated 无法正常工作](https://stackoverflow.com/questions/1604374/poptorootviewcontrolleranimated-not-working-correctly)表明存在时间滞后问题，但这似乎不是我的情况。在执行 shouldSelectViewController 之前，我可以等待多久，导航栏的“后退”按钮仍然混乱。

代表是：

```
@interface BasicPlaceItemComment : UIViewController<UIAlertViewDelegate, UITabBarControllerDelegate> {
    // data members ommitted
} 
```

这是我从中派生所有表视图的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:41:45.743

您确定该方法在正确的上下文中吗？谁符合 TabBarDelegate？如果是您的 AppDelegate，那么 self.navigationController 可能为零。如果您使用的是 TabBar 并且您有多个导航控制器，那么您可能在错误的控制器上调用 popToRootViewController。尝试插入：

```
NSLog(@"%@", self.navigationController); 
```

在您的方法的开头，并确保您获得正确导航控制器的地址。

发布更多代码可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:43:58.147

问题似乎是我将 UINavigationController 子类化以解决不同的问题。当我删除这个子类时，问题就消失了。也就是说，当我在没有继承 UINavigationController 的情况下执行 popToRootViewController 时，“后退”按钮不再混乱。然而，这引发了另一个问题。我正在继承 UINavigationController 以解决[UINavigationController 和 UINavigationBarDelegate.ShouldPopItem() 与 MonoTouch中所述的问题](https://stackoverflow.com/questions/6413595/uinavigationcontroller-and-uinavigationbardelegate-shouldpopitem-with-monotouc)

使用我的导航栏和标签栏，我希望能够发布一条消息“你确定要退出吗？” 在显示视图中的某些数据发生更改的情况下（在导航离开该视图之前，并可能取消导航离开该视图），按下后退按钮（或另一个选项卡）时发出警报。

因此，虽然这是部分答案，但我的问题仍然存在。当用户键入后退按钮或另一个选项卡时，我仍然需要一种方法来获得控制权。所以，我似乎需要：1）一种方法具有与 UINavigationBarDelegate 方法 shouldPopItem 的 UINavigationController 不同的委托，或 2）某些方法可以将 UINavigationController 子类化，但不会像当前单击选项卡时那样弄乱后退按钮并调用 popToRootViewController。

进一步的想法？

更多关于 11/3/12

导致问题的不是 UINavigationController 子类化本身。我无意中从我的委托方法中返回 NO

```
// This method returns true when the navigation bar should pop an item
- (BOOL)navigationBar:(UINavigationBar *)navigationBar shouldPopItem:(UINavigationItem *)item { 
```

当我做了一个popToRootViewController。我现在在 UINavigationController 子类中有一个方法：

```
- (void) popToRoot {
    regularPop = YES;
    [self popToRootViewControllerAnimated: YES];
} 
```

这导致 shouldPopItem 返回 YES，我使用它而不是 popToRootViewController。我的大部分问题都解决了！

# .net - vb.net绘制水平斑马线

> ID：13186507
> 
> 赞同：1
> 
> 时间：2012-11-01T22:30:34.437
> 
> 标签：.net, vb.net, winforms

如何在我的表单上绘制水平斑马线？

```
1px Black
1px White
1px Black
1px White
1px Black
1px White
1px Black
1px White 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:33:17.893

你可以这样做：

```
Dim Zebra As New Bitmap(Me.Width, Me.Height)
For y = 0 To Zebra.Height - 1
    For x = 0 To Zebra.Width - 1
        If y Mod 2 <> 0 Then
            Zebra.SetPixel(x, y, Color.Black)
        Else
            Zebra.SetPixel(x, y, Color.White)
        End If
    Next
Next
Me.BackgroundImage = Zebra 
```

（1 px 线）

# html - HTML5 / JQuery 移动应用程序 - AppCache/不需要的缓存

> ID：13186509
> 
> 赞同：1
> 
> 时间：2012-11-01T22:30:52.310
> 
> 标签：html, jquery-mobile, offline-caching, html5-appcache, app-offline.htm

我开发了一个 JQuery Mobile 应用程序。我正在使用 appcache 加载主页、图像和我的 JQM 包括在内的任何内容。我的 appcache 文件的 NETWORK 部分中有 *。直到今天，它一直在通过开发工作得很好。在不更改我的 appcache 文件中列出的任何资源的情况下，我推出了更新，更改了一些页面中的一些样式和属性。“触摸”我的 appcache 文件并通过手机主屏幕上的图标打开该应用程序。完美的...

我通过其他几个页面滚动了样式和属性更改，再次“触摸”了 appcache 文件，并将其推出。通过主屏幕上的图标再次打开它后，它不会显示更改的页面。

我在手机上的 Safari 中打开了该网站，页面是最新的。

我什至将更新的页面包含在我的 appcache 文件的 NETWORK 部分中，当我通过图标打开时加载的 Web 应用程序的无铬版本仍然没有改变。

有什么建议么？

谢谢，

史蒂夫

# asp.net-mvc - MVC4 条件必需注解

> ID：13186510
> 
> 赞同：0
> 
> 时间：2012-11-01T22:31:03.437
> 
> 标签：asp.net-mvc

我有一个通过数据注释设置为必需的属性。这对于创建表单非常有效，但我想让该属性在编辑表单中不需要。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:45:43.973

您可以创建单独的视图模型来创建和编辑视图。您可以将公共属性保留在公共类中，并从该公共类继承这两个视图模型。

```
public class CustomerViewModel
{      
  public string Name { set;get;}      
  public string Location { set;get;}      
}
public class CreateCustomer :CustomerViewModel
{
  [Required]
  public string LastJobTitle { set;get;}
}
public class EditCustomer :CustomerViewModel
{  
  public string LastJobTitle { set;get;}
} 
```

你可以像这样在你的 Action 方法中使用这些

```
public ActionResult Create()
{
  var createVM=new CreateCustomer();
  return View(createVM);
}
public ActionResult Edit(int id)
{
  var editVM=new EditCustomer();
  var customerModel=repositary.GetCustomer(id);
  editVM.LastJobTitle=customerModel.LastJobTitle;
  //set other properties also
  return View(createVM);
} 
```

因此，您的创建视图将被强类型化为`CreateCustomer`类，而编辑视图将被强类型化为`EditCustomer`类。

**创建.cshtml**

```
@model CreateCustomer 
```

**编辑.cshtml**

```
@model EditCustomer 
```

# sql - 获取Oracle中两个LMD之间的数据

> ID：13186511
> 
> 赞同：1
> 
> 时间：2012-11-01T22:31:11.337
> 
> 标签：sql, oracle

我有一张名为

```
USER_BAG 
```

我在其中有这个专栏

```
LAST_MODIFIED_DATE  DATE(7) NOT NULL 
```

我需要所有`LAST_MODIFIED_DATE`介于两者之间的记录

`2012-08-20 16:13:19`和`2012-08-20 16:18:19`

我正在使用 Oracle 数据库。谁能建议我如何实现我的场景？

```
SELECT * FROM USER_BAG where LAST_MODIFIED_DATE between 
to_date ('2012-08-20 16:13:19', 'yyyy-mm-dd hh24:mi:ss') AND 
to_date ('2012-08-20 16:18:19', 'yyyy-mm-dd hh24:mi:ss'); 
```

我在上面的 sql 查询中做错了什么吗？我正在与甲骨文合作。它总是给我-

```
[WARN]Execute Error : ORA-02392: exceeded session limit on CPU usage, you are being logged off (DBD ERROR: OCIStmtExecute)
[WARN]Fetch Error : ERROR no statement executing (perhaps you need to call execute first)

No Matches Found 
```

**更新：-**

```
select * from user_resource_limits;

RESOURCE_NAME               LIMIT 
COMPOSITE_LIMIT             UNLIMITED 
SESSIONS_PER_USER           5 
CPU_PER_SESSION             100 
CPU_PER_CALL                UNLIMITED 
LOGICAL_READS_PER_SESSION   10000 
LOGICAL_READS_PER_CALL      UNLIMITED 
IDLE_TIME                   UNLIMITED 
CONNECT_TIME                15 
PRIVATE_SGA                 UNLIMITED 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:37:06.770

您的用户配置文件中的 CPU 限制设置得太低。每个 SQL 执行只允许 1 秒的 CPU 时间。

# haskell - Haskell 的 Lazy 和 Strict monad（或变形金刚）之间的区别

> ID：13186512
> 
> 赞同：23
> 
> 时间：2012-11-01T22:31:23.500
> 
> 标签：haskell, monads, lazy-evaluation

浏览 Hackage 时，大多数 monad 都有 Lazy 和 Strict 版本。究竟有什么区别？你能用一些常见的单子（State、Reader、Writer）的例子来强调它吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-01T22:55:22.013

我不知道对于 reader monad 的懒惰和严格的分离，`State(T)`和`Writer(T)`分离的原因不适用于那里。

`Writer`懒惰和严格与`State`单子之间的区别。他们的 monad 转换器是 monadic bind 等的实现`(>>=)`。`fmap`在严格版本中，实现模式匹配对 ( `(result, state)`, resp. `(result, message)`)，强制其评估（**而不是**对其组件的评估），而惰性版本使用那里有无可辩驳的模式`~(a,w)`，这不会强制评估该对。

惰性版本允许一些严格版本无法使用的应用程序，例如

```
foo = do
    xs <- take 100 `fmap` sequence (repeat someAction)
    doSomethingWith xs 
```

只有在 monad 足够懒惰的情况下，无限动作列表的 the`sequence`才能开始传递其结果。`(>>=)`

另一方面，使用惰性版本通常会导致`(result, state)`成对中大量 thunk 的累积，从而导致空间和/或时间泄漏。

因此，提供了两种变体，您可以选择更适合您需求的变体。

# jquery - jQuery附加元素函数

> ID：13186513
> 
> 赞同：-2
> 
> 时间：2012-11-01T22:31:27.707
> 
> 标签：jquery

有人能告诉我为什么声明的函数不适用于 append() 方法创建的元素吗？它确实适用于元素，但是，当使用提到的函数添加另一个元素时，动作不会触发？

info_box var containsg div 使用该函数关闭，`$(".notification-close").click(function(){`但是当使用 append() 方法创建框时，它不再起作用。

```
 $(document).ready(function () {

//setTimeout(function(){$(".notification-box").fadeOut("slow");}, 6000);
$(".notification-close").click(function(){
    $(".notification-box").fadeOut("slow");return false;
});

// AJAX
$(".lightbox_delete_button").easyconfirm({locale: { title: 'Delete', button: ['No','Yes']}});

$(".lightbox_delete_button").click(function () {

var pictid_lightbox = $(this).parent().find('#pictid_lightbox').val();
var thumb_container = $(this).parents('.thumb_container');
var tools_counter = $('body').find('#tools_lightbox_count').text();
var reduced_tools_counter = parseInt(tools_counter)-1;
var info_box = "<div class=\"notification-box notification-box-info\"><p>You don't have any images in your lightbox</p><a href=\"#\" class=\"notification-close notification-close-info\">x</a></div>";
$.ajax({
            url: "ajax.html",
            type: "POST",
            async:false,
            data: ({f:"test_ajax",pictid_lightbox:pictid_lightbox}),
            success: function(data){
            alert(data);
thumb_container.fadeOut("slow");
$($('body').find('#tools_lightbox_count')).replaceWith('<span id=\"tools_lightbox_count\">' + reduced_tools_counter.toString() + '</span>');
if(reduced_tools_counter == 0){
$('body').find('#center_column').append(info_box);
}else{
alert('not empty');
}
            }
});

return false;
});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:40:03.923

尝试使用[委托](http://api.jquery.com/delegate/)或[on](http://api.jquery.com/on/)。您当前的代码不起作用，因为页面加载时附加的内容不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:41:00.060

在您绑定事件处理程序时，DOM 中不存在动态元素，因此您必须将事件处理程序绑定到实际存在的元素，也称为委托事件处理程序：

```
$('#center_column').on('click', '.notification-close', function(){
     $(".notification-box").fadeOut("slow");
}); 
```

# linux-kernel - ptregs_execve 和 sys_execve 之间有什么区别/关系

> ID：13186515
> 
> 赞同：1
> 
> 时间：2012-11-01T22:31:48.637
> 
> 标签：linux-kernel, system-calls, execve, user-mode-linux

我在 Linux 2.6.32 x86-32 上挂接系统调用。

但是，我发现在[系统调用表中](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/arch/um/sys-i386/sys_call_table.S)，`__NR_execve`是指向`ptregs_execve`而不是`sys_execve`。而且，我找不到`ptregs_execve`任何地方的函数定义。

谁能帮我澄清`ptregs_execve`和 sys_execve 之间的区别或关系？我知道对于[um](https://en.wikipedia.org/wiki/User-mode_Linux)架构，`ptregs_execve`定义为`sys_execve`. 其他架构呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T15:38:30.047

可能更有帮助：

请注意，宏 PTREGSCALL3 在 entry_32.S 中定义。这定义了一个调用 sys_##name 的填充函数。使用 execve 作为参数调用此宏。因此，ptregs_execve 只是一个使用适当参数调用 sys_execve 的 shim。

# html - 在访问者计算机上放置 cookie 到我的 bloggspot/blogger 网站

> ID：13186521
> 
> 赞同：0
> 
> 时间：2012-11-01T22:32:21.237
> 
> 标签：html, blogger, blogspot

我经营一个博客（在 blogger/blogspot 中）。我需要帮助在访客计算机上放置 cookie。我还需要帮助我将信息放在那个特定的 cookie 上。更准确地说我想做的事情。当访问者单击外部链接 (api.viglink) 时，会放置一个包含一些信息的 cookie。我怎样才能在我自己的 cookie 中放置我想要的信息？请描述您的解决方案。不仅仅是代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:35:17.707

如果您能够运行 JavaScript：

```
function setcookie(name, value, exp) {
var today = new Date();
var expires = new Date();
var ndays = 1;
var path = '/';
var domain = 'yourdomain.blogger.com';
var secure = false;
var val = escape(value) || "";
exp = (exp == -1) ? true : false;
if (exp) {
    expires.setDate(today.getDate() - 1)
} else {
    if (ndays == null || ndays == 0) ndays = 1;
    expires.setTime(today.getTime() + 3600000 * 24 * ndays)
};
document.cookie = name + "=" + val + ((expires) ? "; expires=" + expires.toGMTString() : "") + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + ((secure) ? "; secure" : "")
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:37:51.657

```
function setCookie(c_name,value,exdays)
{
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : ";
    expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
} 
```

[从链接](http://www.w3schools.com/js/js_cookies.asp)复制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T04:23:42.700

您将拥有的值传递给函数的变量。请记住，创建 cookie 所需的唯一信息是名称/值对。

就像是：

```
document.cookie = "name=value;" + "expires=Sat, 16 May 2009 18:40:22 GMT";[1] 
```

这也是设置 cookie 的方法。我希望我能回答你的问题。

史蒂夫

[1] [http://www.thonky.com/javascript-and-css-guide/set-cookie/](http://www.thonky.com/javascript-and-css-guide/set-cookie/)

# mysql - 使开发 MySQL 数据库重新联机的提示？

> ID：13186532
> 
> 赞同：0
> 
> 时间：2012-11-01T22:33:25.490
> 
> 标签：mysql, database, phpmyadmin, backup

我正在将我正在处理的 Web 应用程序的开发服务器重新联机。目前它已经非常过时（文件系统和数据库）。无论如何有一个好的/有效的方法来做到这一点？现在我正在从实时服务器备份数据库，以便可以将其导入开发服务器，然后我将用实时文件系统（最新）替换开发文件系统中的文件。这是我第一次做这样的事情，我不想弄乱数据库（远远超过 2GB 大小）。谁能给我一些提示和建议？此外，有没有办法将实时数据库的更改同步回开发数据库，​​但没有将开发数据库中的更改同步回实时数据库？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:36:08.853

在实时服务器上使用 mysqldump 来获取所有内容。它将创建所有 necc 语句：删除表、创建数据库等。使用生成的文件（作为 < 管道）调用 mysql 到开发服务器（在清除它之后，如果需要的话）让它读取所有内容。

为了使开发服务器与实时同步，请将其设置为复制从属服务器。

在一行中（对于一个 DB）：

```
mysqldump --opt db_name | mysql --host=remote_host -C db_name 
```

来自：[http ://dev.mysql.com/doc/refman/5.1/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

# c - 自己的简单网络服务器不发送页面

> ID：13186535
> 
> 赞同：0
> 
> 时间：2012-11-01T22:33:49.003
> 
> 标签：c, sockets

我写了一个小网络服务器，它只需要向浏览器发送一个 html 页面或错误页面。只是为了练习我的新套接字知识。

在这个程序中，我试图使用 select 方法来处理超过 1 个请求。

该程序接受了我的连接，但没有任何反应...... firefox 仍在继续加载文件，但该文件从未出现过，并且该程序没有做任何事情（虽然它没有崩溃。）。

这是我的代码：

```
#include <stdio.h>
#include <winsock2.h>
#include <winsock.h>
#include <Ws2tcpip.h>
#include <time.h>

#pragma comment(lib, "ws2_32.lib" )
#define BUFFSIZE 512
#define PORT "9001"
#define MAXCONNECTIONS 10

char * getPath(char * input, int var, char result[]);
void sendHeader(char * ext, char *path, int socketDescr, int code);
void sendBody(char * ext, char *path, int socketDescr, int code);

int main()
{
    WSADATA wsaData;
    struct timeval tv;  // timeinterval for request (should arrive in less than 2seconds)
    fd_set master;      // keeps track of all open file descriptors + listener
    fd_set read_fds;    // list of file descriptors to read from
    int fdmax;          // max file descriptor number
    int listener;       // file descriptor on socket
    int newfd;          // new client file descriptor
    struct sockaddr_storage clientaddr; // client address
    socklen_t addrlen;  // length of address
    char clientIP[INET_ADDRSTRLEN]; // client ip-address (ipv4)
    char buffer[BUFFSIZE]; // buffer for request
    char request[BUFFSIZE]; // buffer for request
    int recvbytes;      // amount of bytes received
    int yes = 1;        // reuse address
    int i,rv;
    struct addrinfo serverinfo, *socketlist, *sock;

    char result[BUFFSIZE];
    char  * path;
    char * extension;

    if (WSAStartup(MAKEWORD(2,0), &wsaData) != 0) 
    {
        fprintf(stderr, "WSAStartup failed.\n");
        exit(1);
    }

    // Set up time interval
    tv.tv_sec = 5;
    tv.tv_usec = 0;

    // Clean up file descriptor sets
    FD_ZERO(&master);
    FD_ZERO(&read_fds);

    // Get a socket and bind for listening
    memset(&serverinfo, 0, sizeof(serverinfo));
    serverinfo.ai_family = AF_INET;
    serverinfo.ai_socktype = SOCK_STREAM; // TCP
    serverinfo.ai_flags = AI_PASSIVE; // we search a socket on our side (server side) for listening

    if((rv = getaddrinfo(NULL,PORT,&serverinfo,&socketlist)) != 0)
    {
        fprintf(stderr,"Server: %s\n",gai_strerror(rv));
        exit(1);
    }

    // loop trough sockets
    for(sock = socketlist; sock != NULL; sock = sock->ai_next)
    {
        listener = socket(sock->ai_family, sock->ai_socktype, sock->ai_protocol);
        if(listener < 0)
        {
            continue; // not correct socket
        }
        setsockopt(listener,SOL_SOCKET,SO_REUSEADDR, &yes, sizeof(int));
        if(bind(listener, sock->ai_addr, sock->ai_addrlen) < 0)
        {
            closesocket(listener);
            continue; // could not bind to socket
        }
        break;
    }

    // if could not get socket
    if(sock == NULL)
    {
        fprintf(stderr,"Server: %s\n","Could not bind to socket");
        exit(2);
    }

    // free up list, we have the socket
    freeaddrinfo(socketlist);

    // listen on socket
    if(listen(listener,MAXCONNECTIONS) < 0)
    {
        perror("Server: listen");
        exit(3);
    }

    // add listener to master set
    FD_SET(listener,&master);
    fdmax = listener;
    fprintf(stdout,"Server: %s\n","Waiting for connections...");

    for(;;)
    {
        read_fds = master;
        if(select(fdmax+1,&read_fds,NULL,NULL,&tv) < 0)
        {
            perror("Server: select");
            exit(4);
        }

        // run through existing connections to see if request has arrived
        for(i = 0; i <= fdmax; i++)
        {
            if(FD_ISSET(i, &read_fds))
            {
                if(i == listener)
                {
                    // we have a new connection
                    addrlen = sizeof clientaddr;
                    if((newfd = accept(listener,(struct sockaddr*)&clientaddr,&addrlen)) < 0)
                    {
                        perror("Server: accept");
                        exit(5);
                    }
                    else
                    {
                        FD_SET(newfd,&master);
                        if(newfd > fdmax)
                        {
                            fdmax = newfd;
                        }
                        fprintf(stdout, "Server: New connection from %s on socket %d\n",inet_ntop(clientaddr.ss_family, &(((struct sockaddr_in*)((struct sockaddr*)&clientaddr))->sin_addr), clientIP, sizeof(clientIP)),newfd);
                    }
                }
                else
                {
                    // handle data from request
                    if((recvbytes = recv(i,buffer,BUFFSIZE-1,0)) <= 0)
                    {
                        if(recvbytes == 0) //connection closed
                        {
                            fprintf(stdout,"Server: socket %d goodbye\n",i);
                        }
                        else //request error [BAD REQUEST]
                        {
                            perror("Server: recv");
                        }
                        closesocket(i);
                        FD_CLR(i,&master);
                    }
                    else
                    {
                        recvbytes = recv(i, buffer,BUFFSIZE-1 , 0);
                        if(recvbytes > 0)
                        {
                            buffer[recvbytes]='\0';
                            strcat(request,buffer);
                        }
                        fprintf(stdout,"Server: request received:\n");
                        printf("%s", request);

                        //Get path
                        path = getPath(request,0, result);
                        if(strcmp(path,"error") != 0)
                        {
                            extension = getPath(request,1,result);
                            if(strcmp(extension,"error") != 0)
                            {
                                // send file 200
                                sendBody(extension,path,i,200);
                            }
                        }
                        else
                        {
                            // send code 400
                            sendBody("html","400.html",i,400);
                        }

                        closesocket(i);
                        FD_CLR(i,&master);
                    }
                }
            }
        }
    }
    return 0;
}

// Gives path, extension of file or error
char * getPath(char * input, int var, char result [])
{
    char * pch;
    char str[BUFFSIZE];
    strcpy(str,input);

    pch = strtok(str,"\r\n");
    pch = strtok(pch," ");

    if(strcmp(pch,"GET") != 0)
    {
        strcpy(result,"error");
        return result;
    }

    pch = strtok(NULL," ");
    if(var == 0)
    {
        strcpy(result,pch);
        return result; 
    }
    pch = strtok(pch,".");
    pch = strtok(NULL,".");
    if(var == 1)
    {
        strcpy(result,pch);
        return result;
    }

    return 0;
}

//Send header
void sendHeader(char * ext, char *path, int socketDescr, int code)
{
    FILE * fp;
    int fileSize = 0;
    char fileSizeChar[32];
    char * header;
    char * status;
    char * contenType;
    char * contentLength;
    char * msg;

    if((fp = fopen(path, "r")) == NULL)
    {
        printf("Error opening file %s\n",path);
        return;
    }
    //Get filesize
    fseek(fp, 0L, SEEK_END);
    fileSize = ftell(fp);
    fseek(fp, 0L, SEEK_SET);
    fclose(fp);

    //Create header response message
    header = "HTTP/1.0 ";

    if(code == 200)
        strcpy(status,"200");
    else if(code == 400)
        strcpy(status,"400");
    else if(code == 404)
        strcpy(status,"404");

    if(strcmp(ext,"html") == 0)
        strcpy(contenType," text/html\n");

    //create and send header
    strcat(msg,header);
    strcat(msg,status);
    strcat(msg,contenType);
    strcat(msg,contentLength);
    strcat(msg,fileSizeChar);

    send(socketDescr, msg, strlen(msg), 0);
}

//Sending data like, pictures, zip, html pages... or an error html page
void sendBody(char * ext, char *path, int socketDescr, int code)
{
    FILE * fp;
    int fileSize = 0;
    int sendBytes = 0;
    int resultRead;
    int resultSend;
    char buffer[1000];

    if((fp = fopen(path, "r")) == NULL)
    {
        printf("Can't open file %s\n",path);
        if(code == 400)
        {
            printf("Error page 400 doesn't exist.\n");
            return;
        }
        if((fp = fopen("404.html","r")) == NULL)
        {
            printf("Error page 404 doesn't exist.\n");
            return;
        }
        strcpy(ext,"html");
        strcpy(path,"404.html");
        code = 404;
    }

    sendHeader(ext,path,socketDescr,code);

    fseek(fp, 0L, SEEK_END);
    fileSize = ftell(fp);
    fseek(fp, 0L, SEEK_SET);

    while(sendBytes < fileSize)
    {
        fseek(fp,sendBytes,SEEK_SET);
        resultRead = fread(buffer,sizeof buffer[0],1000,fp);
        resultSend = send(socketDescr,buffer,resultRead,NULL);
        sendBytes +=resultSend;
    }
    fclose(fp);
} 
```

显示的唯一行是“ Server: New connection from %s on socket ”。

有人能帮助我吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:33:22.957

这里有太多信息需要评论 - 但这可能会帮助其他人解决您的问题：

我编译并运行了你的代码，当我查看调试器时，我认为服务器被阻塞等待输入

```
 recvbytes = recv(i, buffer,BUFFSIZE-1 , 0); 
```

安慰

> 服务器：等待连接... 服务器：来自套接字 120 上 127.0.0.1 的新连接 服务器：来自套接字 124 上 127.0.0.1 的新连接

我的缓冲区有（440 个字符）：

*   buffer 0x0028f668 "GET / HTTP/1.1\r\nHost: localhost:9001\r\nConnection: keep-alive\r\nUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8\r\nAccept-Encoding: gzip,deflate,sdch\r \nAccept-Language: en-GB,en-US;q=0.8,en;q=0.6\r\nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3\r \ ncookie：plushcontainerwidth = 100％25; plushnotopmenu = 0 \ r \ n \ n \ r \ r \ n \ n \ n \ n \nìì确实

我的浏览器等待。

我发送了另一个请求，但它崩溃了 - 所以我怀疑 recv 正在阻塞（查看您可以在通话中使用的选项）可能正在等待一个完整的缓冲区。

此时我在 GetPath 中遇到崩溃，因为请求中没有数据，这是因为 recv 调用返回 0 字节。

希望这可以帮助。

# javascript - 如何将 phonegap device.platform 值分配给变量？

> ID：13186536
> 
> 赞同：1
> 
> 时间：2012-11-01T22:33:52.177
> 
> 标签：javascript, android, cordova

我想将 device.platform 中的值分配给一个变量，以便稍后在我的程序中检查它。例如，如果应用程序在 BlackBerry 上运行，我可能希望显示自定义消息。

我使用在其他地方找到的“元素”示例来确保一切正常（确实如此）。但是当我尝试将“device.platform”值分配给 devicePlatform 时遇到问题。

我已经为此奋斗了一个小时，我一定错过了一些相当基本的东西。有人可以告诉我我做错了什么吗？

谢谢罗伯

```
<html>
  <head>
    <title>PhoneGap</title>
    <meta name="viewport" content="width=device-width">
    <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
    <script language="JavaScript" type="text/javascript">
      // wait for PhoneGap to load
      document.addEventListener("deviceready", onDeviceReady, false);
      function onDeviceReady() {
        var element = document.getElementById('deviceProperties');
        element.innerHTML = 'Device Name: '     + device.name     + '<br />' + 
                            'Device Cordova: '  + device.cordova + '<br />' + 
                            'Device Platform: ' + device.platform + '<br />' + 
                            'Device UUID: '     + device.uuid     + '<br />' + 
                            'Device Version: '  + device.version  + '<br />';
      //
    }
    </script>    

  </head>
  <body>
    <h1>Hello PhoneGap v1.9.0</h1>

    <script>
      var devicePlatform = device.platform;
      document.write("Platform: "+devicePlatform+"<br>");    
    </script>
    <br>
    <p id="deviceProperties">Loading device properties...</p>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:47:13.920

试着放

```
var devicePlatform = device.platform;
document.write("Platform: "+devicePlatform+"<br>"); 
```

进入函数 onDeviceReady()

这应该可以解决问题。

此外，您可能希望定义一个全局范围的变量，例如“平台”，然后在函数 onDeviceReady() 中将 device.platform 分配给该变量。

例子：

```
var platform = null;
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
  platform = device.platform;
  alert(platform);
} 
```

更新：

我认为这更接近你正在寻找的东西

```
<html>
  <head>
    <title>PhoneGap</title>
    <meta name="viewport" content="width=device-width">
    <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
    <script language="JavaScript" type="text/javascript">
      // wait for PhoneGap to load
      document.addEventListener("deviceready", onDeviceReady, false);
      function onDeviceReady() {
        var element = document.getElementById('platformarea');
        element.innerHTML = device.platform;
      //
    }
    </script>    

  </head>
  <body>
    <h1>Hello PhoneGap v1.9.0</h1>

    <p id="platformarea"></p>

  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-03T12:34:27.760

安装了使用`device.platform`，就可以使用了`cordova.platformId`。我相信它会有所帮助

# php - Round 结果的格式

> ID：13186538
> 
> 赞同：-1
> 
> 时间：2012-11-01T22:34:05.503
> 
> 标签：php

> **可能重复：**
> [如何在php中以某种格式显示数字](https://stackoverflow.com/questions/5402835/how-to-display-number-in-a-certain-format-in-php)

```
echo round(10.1232, 2); // return 10.12 
```

这工作正常，但是：

```
echo round(10, 2); // return 10 
```

我想收到**10.00**。我怎样才能做到？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T22:36:43.410

使用[number_format()](http://us3.php.net/manual/en/function.number-format.php)

```
echo number_format(10, 2, '.', ''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:40:09.953

PHP 也有`printf`：

```
printf( "%.2f\n", round(10.1232, 2) );
printf( "%.2f\n", round(10, 2) ); 
```

实际上，舍入是由`printf`无论如何处理的......所以这应该是相同的：

```
printf( "%.2f\n", 10.1232 );
printf( "%.2f\n", 10 ); 
```

# wordpress - 我如何知道 Wordpress 使用哪个 linux 用户来安装插件

> ID：13186546
> 
> 赞同：21
> 
> 时间：2012-11-01T22:34:57.210
> 
> 标签：wordpress, nginx, centos, vps, centos6

我正在尝试将 Wordpress 设置为能够在 Centos 6 VPS 上通过 SFTP (SSH) 安装插件。

我已经能够进行修改`wp-config`，因此它使用正确的凭据`user`作为我的 SFTP 用户。

现在我有一个与权限相关的问题，就好像我`chmod 777`在我`wp-content`可以安装的文件夹上做了一个，但是使用正常权限它不能创建文件夹。

我正在使用 Nginx，我所有的`wp-content`文件和文件夹都归所有`user`，我尝试将组设置为，`nginx`但它不起作用。

我也尝试将用户设置为`nginx`但仍然没有运气。

更新：我发现 wordpress`apache`以用户身份使用，但我想将其更改为我的`user`。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-02-23T22:47:05.220

在您的生产服务器上，在您的 WordPress index.php 文件的顶部，您可以临时放置`echo(exec("whoami"));die();`

然后浏览到您的 WordPress 站点并查看正在运行的用户。在 Ubuntu 上，我的是`www-data`.

这对我很有用：我[可以在不提供 FTP 访问的情况下安装/更新 WordPress 插件吗？](https://stackoverflow.com/questions/640409/can-i-install-update-wordpress-plugins-without-providing-ftp-access)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-16T13:12:51.600

Wordpress 用户也是 Web 服务器用户，因此应该可以：

> ps -ef | grep http

或者

> ps -ef | grep 阿帕奇

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-23T21:26:27.107

好吧，这与 /wp-content 文件权限无关，因此只需将 WordPress 目录目录 /wp-content 权限保留为 0755。

此处所需的修复必须在 apache2.conf 文件中启动；我们需要将 /www/html/ 目录的“AllowOverride”指令从“AllowOverride None”更改为“AllowOverride All”

按照此处的完整过程[如何处理 GCP WordPress 错误“此页面无法正常工作 example.com 当前无法处理此请求。HTTP 错误 500](https://stackoverflow.com/questions/52251640/how-to-deal-with-gcp-wordpress-error-this-page-isn-t-working-example-com-is-cur)

有了这个，我们告诉 Web 服务器允许使用 .htaccess 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T22:52:32.147

所以它清楚地表明一个组没有 W 访问权限。

你可以这样做： chmod -R g+w /your/plugins/dir

然后，nginx 组就可以在那里写了。

# apache-flex - 在 StyleableTextField 中设置文本颜色

> ID：13186548
> 
> 赞同：0
> 
> 时间：2012-11-01T22:35:14.817
> 
> 标签：apache-flex, flex4, flex4.5, flex4.6, flex-mobile

请告诉我，如何在[StyleableTextField](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/StyleableTextField.html)中设置文本颜色。

以下对我不起作用（颜色保持黑色）：

```
 tf.setStyle('color', 0xFF0000); 
```

这也是：

```
 tf.setStyle('color', 'red'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:29:26.843

`StyleableTextField`有财产`textColor`。尝试使用它。( `tf.textColor = 0xFF0000;`)。

但是，我发现在我的 ItemRenderers 中，我有时需要同时使用`textColor`属性和 setStyle 来正确更改 StylableTextFields 的颜色。还不知道为什么。

# security - 窃取“记住我”cookie 是一种有效的威胁吗？

> ID：13186550
> 
> 赞同：6
> 
> 时间：2012-11-01T22:35:36.287
> 
> 标签：security, cookies

我正在使用 SSL 传输所有数据。HTTP 完全禁用。缺少恶意软件或访问某人的物理机器（这两者都很难从服务器端阻止），我看不出攻击者如何窃取登录 cookie。

因此，可以不用担心窃取登录 cookie 吗？

正确实现不可窃取的登录 cookie 的复杂性，仍然允许用户在不同的浏览器和不同的机器上进行会话，这比它保护的材料要高。

因此，我相信不安全地防止在机器之间复制和粘贴 cookie 数据是可以的。

这是一个有效的权衡，还是我在这里忘记了一些关键的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T22:53:09.907

您确实需要确保`Secure`在 cookie 上设置了标志，因为您通常无法阻止人们尝试通过非 SSL 访问您的网站。否则，我相信你应该没问题。

也就是说，我建议采取合理的预防措施。例如：

*   切勿在 cookie 或网络中包含任何可用于获取用户密码的数据。
*   如果可能，请`HttpOnly`在敏感 cookie 上设置标志，这样任何可能不受信任的 JavaScript 都无法窃取它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:38:27.223

是的，[这是一个有效的威胁](http://en.wikipedia.org/wiki/Session_hijacking)。

根据定义，“记住我”cookie 会使您的网络服务的安全性超出您的控制。现在，一般来说，任何可以劫持该 cookie 的人（尤其是老练的攻击者）都可以以该用户身份登录。

让我们举一个真实的例子：谷歌在其服务中使用了类似的 cookie。您一次可以登录数周。根据我的观察，它减轻 cookie 盗窃攻击的方法是，如果它们在服务器端检测到可疑活动，则使 cookie 无效。例如，如果我通常从加利福尼亚登录，但我突然从另一个州/国家/地区登录（或在其他地方有并发会话！）我可能会被注销并被迫重新进行身份验证。当然，这不是万无一失的，但可以使用使用模式来阻止某些攻击。

另外，请记住 cookie 将是特定于浏览器的。例如，如果浏览器指纹用于确定用户刚刚从不同的操作系统/浏览器/等登录，那么这可能是使 cookie 无效的好时机。如果浏览器的次要版本是升级的，也许你可以考虑并允许一定的余地，但如果浏览器版本*降级*，则标记它。

# compilation - 如何将 jgrapht 库添加到我的系统中？

> ID：13186556
> 
> 赞同：0
> 
> 时间：2012-11-01T22:35:52.177
> 
> 标签：compilation, classpath, java, jgrapht

这可能是一个愚蠢的问题，但是如何或在哪里添加 jgrapht 以便终端中的 java 编译器包含它？我有`.jar`文件，但不知道放在哪里。

我正在使用 Mac OS X ML 和 Netbeans。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T22:46:11.247

要使用外部 Java 库，您需要将其添加到类路径中。Java 文档有一些关于[如何设置它](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/classpath.html)的重要信息。

假设您使用的是`javac`编译器，您将使用类似于以下的命令：

> `javac -classpath` *jgrapht jar 文件的路径* `...` `other options and files here ...`

另请参阅：[编译 Java](http://ptolemy.eecs.berkeley.edu/~johnr/tutorials/tcljava98/notes/compiling.html)

您特别提到了 Netbeans，因此您还想查看[这个问题](https://stackoverflow.com/questions/9139714/how-to-add-java-classpath-in-netbeans)和这篇[博文](http://gpraveenkumar.wordpress.com/2009/06/17/abc-to-import-a-jar-file-in-netbeans-6-5/)。

我希望这有帮助！:)

# oop - 需要为一个类“扩展”ActionScript 中的各种类

> ID：13186557
> 
> 赞同：1
> 
> 时间：2012-11-01T22:35:56.040
> 
> 标签：oop, class, inheritance, actionscript, extends

我有一个类需要使用 Sprite 类的图形方法，所以我使用 Sprite 扩展了该类。但是，我有自己的自定义类，第一个类也需要扩展以使用其中编写的属性和方法。

当然，我可以通过 Sprite 扩展我的自定义类，第一个类可以同时使用两者，但我的自定义类与 Sprite 无关，不应该扩展它。

我将如何使用自定义超类的属性和方法并在一个子类中使用 Sprite 类的图形属性？

* * *

**我的简单例子：**

我的自定义类名为 MovingObject.as 并包含两个变量和一些需要由子类继承的方法。MovingObject 的目的是保存与其子类的速度和加速度有关的信息。

子类“RaceCar”是使用扩展 Sprite 给出的图形方法绘制的，但我需要从 MovingObject 扩展，允许 RaceCar 继承速度和加速度。

我被困在如何为 RaceCar 提供从 Sprite 和我的 MovingObject 类扩展的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:30:43.213

如果您的第一个类需要添加到显示列表中，它几乎肯定应该扩展`Sprite`。您如何使您的第二个自定义类的功能对其可用可能取决于该功能是什么（如果您可以给出简短的描述，它将使回答问题变得更加容易）。

但是，除了扩展（您已经排除）之外，我还可以想到另外两种方法：

1.  为您的第一个类提供一个自定义类的实例，以通过设置器或直接在您的第一个类中实例化自定义类来执行操作。这称为[组合](http://en.wikipedia.org/wiki/Object_composition)。
2.  将自定义类上的方法设为静态，以便您的第一个类可以调用它们而无需实例化它。这是一种通常用于[实用程序类型类](http://en.wikipedia.org/wiki/Utility_class)的方法。

**更新：**

我认为在这种情况下您可能会不必要地使事情复杂化，除非您设想其子类`MovingObject`不会在屏幕上直观地表示（这对我来说似乎不太可能）。如果不是，则`MovingObject`扩展是完全有效的`Sprite`，实际上是通过移动功能来增强它，这形成了您`RaceCar`（以及任何其他移动的可见对象）的基类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T01:25:13.623

AS3 中不存在多重继承，但解决此问题的一种不错的模式如下：

*   您有类`Base`and `Extension`，其中`Extension`必须同时扩展`Base`and `Sprite`。
*   `Base`创建一个接口，您当前的类将`Base`成为该接口的默认实现，例如`BaseImpl`.
*   使`Extension`扩展`Sprite`和实施`Base`。
*   的实现`Base`将通过聚合一个`BaseImpl`实例来完成，这意味着它将所有`Base`方法委托给`BaseImpl`.

例子：

```
interface Base {
    function hello():String;
}

class BaseImpl implements Base {
    public function hello():String {
        return "Hello";
    }
}

class Extension extends Sprite implements Base {

    private var base:BaseImpl = new BaseImpl();

    public function hello():String {
        return base.hello();
    }
} 
```

通过这种方式，`Extension`会将所有功能委托`Base`给`BaseImpl`它包含的实例。

顺便说一句，在 Flash API 本身中，有一个正是这种模式的示例：`EventDispatcher`是 的默认实现`IEventDispatcher`，因此其他类可以扩展一个类，而不是通过聚合来`EventDispatcher`实现。`IEventDispatcher`

祝你好运！

# c++ - 无法使用 C++ 和 Visual Studio 2010 Express 编译基本 SDL 教程 - 未找到 SDL.h

> ID：13186568
> 
> 赞同：0
> 
> 时间：2012-11-01T22:37:12.067
> 
> 标签：c++, graphics, sdl

文件 SDL.h 位于 C:/user/desktop/sdl-version/include/SDL.h （其中 SDL.h 是文件而不是新文件夹），我已将属性页设置为包含 C:/user /desktop/sdl 版本/包括。但是，当我编译它说 SDL.h 找不到。问题是什么？

属性页面的屏幕截图：

[图片 http://imageshack.us/a/img16/53/propsr.png](http://imageshack.us/a/img16/53/propsr.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:53:37.630

删除包含目录路径周围的引号。

# android - Android 手机，不再用作调试器

> ID：13186570
> 
> 赞同：0
> 
> 时间：2012-11-01T22:37:19.660
> 
> 标签：android, eclipse, usb, adb

我有一个 HTC 的愿望，因为我已经开发了 1 年。今天我正在调试，对代码进行了一些更改并尝试再次运行它，但是 Eclipse 无法识别我的手机。我尝试重新连接 USB 数据线，尝试关闭/打开手机设置中的 USB 调试选项。我试图重新启动亚行，试图重新启动手机和电脑，但没有运气。我在另一部手机上试了下，正常。所以，我猜这些问题是我的愿望。

这似乎很奇怪，因为它在 2 小时前工作得很好。我应该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:45:10.123

马上我会检查 3 件事：
1）您是否检查以确保在开发人员设置下仍启用 USB 调试？我不知道你为什么会改变它们，但也许在你不知情的情况下发生了一些事情。
2) 如果您在 Windows 上开发，您设备的驱动程序是否安装正确？如果您在一部手机上进行开发，然后切换到另一部手机，有时 Windows 会尝试使用错误的驱动程序，您必须进入设备管理器并更新到正确的驱动程序
3) 您可以从命令行尝试“ adb kill-server”然后“adb start-server”尝试重新同步进程

# java - 仅从类层次结构中检索超类

> ID：13186572
> 
> 赞同：4
> 
> 时间：2012-11-01T22:37:31.763
> 
> 标签：java, hibernate, jpa, class-hierarchy

我有一个场景如下：

```
@Entity
@Table(name = "ANIMAL")
@Inheritance(strategy = InheritanceType.JOINED)

public class Animal implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "S_ANIMAL")
    @SequenceGenerator(name = "S_ANIMAL", sequenceName = "S_ANIMAL", allocationSize = 1)
    public int getNumero() {
        return numero;
    }

    public void setNumero(int numero) {
        this.numero = numero;
    }
        .
        .
        .
} 
```

并作为子类：

```
@Entity
@Table(name = "DOG")
public class Dog extends Animal {

    private static final long serialVersionUID = -7341592543130659641L;
        .
        .
        .
} 
```

我有一个这样的 JPA Select 语句：

```
SELECT a FROM Animal a; 
```

我正在使用休眠 3.3.1

正如我所看到的，框架检索使用左外连接的实例`Animal`和`Dog`使用左外连接的实例。

有没有办法只选择“部分” `Animal`？我的意思是，前一个`Select`会得到所有的`Animal`s，那些只有`Animal`s 但不是`Dog`s 和那些是`Dog`s。

我想要它们，但在`Dog`s 的情况下，我只想检索它们的“动物部分”。

我找到了，`@org.hibernate.annotations.Entity(polymorphism = PolymorphismType.EXPLICIT)` 但是我可以看到这仅在 Animal 不是`@Entity`.

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T07:09:41.870

简短回答：您描述的行为符合 JPA 标准。没有 JPA 标准方法来限制 JPA 提供者只检索超类。

提供者可以选择查询实现逻辑来实现功能、一致性和性能。只要它尊重您的实体注释并在查询中返回请求的信息，一切都很好。将 Dog 的外部连接视为您不应该关心的私有实现细节。提供者已对外部连接进行编码以提高性能和一致性。

考虑：

*   JPA 被定义为处理 java 对象实体而不是表
*   实体层次结构的根 Animal 不是抽象的，因此您可以创建一个实例并将其持久化。
*   您有 Animal @DecriminatorColumn 和 @DescriminatorType 的默认值 - 因此 Animal 表将添加一个带有名称“DTYPE”的鉴别器列并键入“some String type”。@DecriminatorValue 有一个默认值 - 将等于实体名称：Animal。所以 Animal.DTYPE column = "Animal" 当你创建这个实体时。
*   实体狗有一个超类动物。默认值也用于其@DecriminatorValue - Dog。所以 Animal.DTYPE column = "Dog" 当你创建这个实体时。
*   Java 类限制确保只要存在 Dog 对象，相应的 Animal 超类对象也存在。
*   通常，当您将实体 Animal 加载到 JPA 持久性上下文中时，@DecriminatorValue（存储在 DTYPE 列中的值）=“Dog”，那么将 Dog 对象加载到 PC 中以保持一致性非常有用。即使它不是 JPA 标准所要求的。
*   继承关系不能指定为 EAGER 或 LAZY（如基本类型字段或实体关系字段）。如果您需要读取/更新狗属性并且未加载 Dog 类，您会怎么做？运行一个单独的查询来重新加载它？这会极大地损害一致性和性能。
*   性能的主要关注点是发送到数据库的单独 SQL 命令的总数。
    就所用时间而言：使用动物表的查询仅比使用动物外连接到狗的查询稍快（10 微秒？？？），但比两个单独的查询（一个用于动物，一个用于狗）快得多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-09T20:33:13.767

实际上，有一种方法可以只获取超类：您只需要使用来自 JPA 的本机查询。就我而言，我使用的是 JPA 存储库。因此，它会是这样的：

```
@Query(value = "SELECT * FROM animal", nativeQuery = true)
List<Resource> findAllAnimal(); 
```

将 nativeQuery 标记为 true 允许在数据库上运行本机 SQL。

如果您使用的是实体管理器，请查看：[https ://www.thoughts-on-java.org/jpa-native-queries/](https://www.thoughts-on-java.org/jpa-native-queries/)

# javascript - 无法在 onClick 事件后显示变量

> ID：13186573
> 
> 赞同：0
> 
> 时间：2012-11-01T22:37:36.200
> 
> 标签：javascript, html

我的问题是为什么当我单击按钮时，唯一显示的是这个“价格表”，而所有其他带有变量的行都被省略了。

```
function showmessage() {
    var sendcost, totalcost;
    if (document.pricelist.total.value<11) {
        sendcost = 3; 
    }   
    else {
        sendcost = 2; 
    }   
    if (document.pricelist.option.checked) {
        sendcost = parseInt(document.pricelist.option.value) + parseInt(sendcost);
    }
    totalcost = parseInt(sendcost) + parseInt(document.pricelist.total.value);

    document.write("Pricelist","</br>");
    document.write("Products price: "+document.pricelist.total.value+"</br>");
    document.write("Send fee: "+sendcost+"</br>");
    document.write("Total cost: "+totalcost+"</br>");
} 
```

```
<form name="pricelist">
Tuna Salad = 4 <input type="checkbox" name="choice" value="4" onchange="checkTotal()" /></br>
Pasta = 13 <input type="checkbox" name="choice" value="13" onchange="checkTotal()" /></br>
Milk = 3 <input type="checkbox" name="choice" value="3" onchange="checkTotal()" /></br>
Chocolate = 2 <input type="checkbox" name="choice" value="2" onchange="checkTotal()" /></br>
Same day delivery<input type="checkbox" name="option" value="5" /></br>
Total: <input type="text" size="2" name="total" value="0"/>
<input type="button" value="Procceed to checkout" onclick='return showmessage();' /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:01:01.770

`document.write`在页面加载后调用时会破坏整个页面，因此将不再有名称为 pricelist 的表单，因此`document.pricelist.total.value`会导致`Uncaught TypeError: Cannot read property 'total' of undefined`，这会导致您的脚本过早终止。

我建议使用除`document.write`.

但是为了避免当前错误，只需在`document.pricelist.total.value`变量销毁之前将其值保存到变量中即可。

```
var value = document.pricelist.total.value;
document.write("Pricelist","</br>");
document.write("Products price: "+value+"</br>");
document.write("Send fee: "+sendcost+"</br>");
document.write("Total cost: "+totalcost+"</br>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:40:12.103

它在显示“产品价格：”后停止工作的原因是因为接下来的 2 行代码有语法错误。

更新：

```
document.write("Send fee: "+sendcost+"</br>);
document.write("Total cost: "+totalcost+"</br>; 
```

至：

```
document.write("Send fee: "+sendcost+"</br>");
document.write("Total cost: "+totalcost+"</br>"); 
```

同时更新：

```
document.write("Pricelist","</br>"); 
```

至：

```
document.write("Pricelist</br>"); 
```

然后将您的格式错误的`</br>`标签修复为`<br />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T23:07:21.347

使用 Firebug 进行调试。真正优秀的 Firefox 工具 [http://getfirebug.com/](http://getfirebug.com/)

Chrome和Internet Explorer也有相当不错的内部调试工具按F12打开。

这些工具让您可以直观地进行调试——您可以单步执行每个脚本命令并观察会发生什么

# python - 在 base.txt 文件上安装 pinax 要求 - 没有任何效果？

> ID：13186576
> 
> 赞同：0
> 
> 时间：2012-11-01T22:37:51.703
> 
> 标签：python, django, pinax

我在 base.txt 文件上安装了 pinax 要求。

现在当我做 python manage.py syncdb 我得到：

```
Traceback (most recent call last):
  File "manage.py", line 20, in <module>
    execute_from_command_line()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line
443, in execute_from_command_line
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line
382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line
261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line
69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "C:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in im
port_module
    __import__(name)
  File "C:\Python27\lib\site-packages\django\core\management\commands\syncdb.py"
, line 8, in <module>
    from django.core.management.sql import custom_sql_for_model, emit_post_sync_
signal
  File "C:\Python27\lib\site-packages\django\core\management\sql.py", line 6, in
 <module>
    from django.db import models
  File "C:\Python27\lib\site-packages\django\db\__init__.py", line 40, in <modul
e>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "C:\Python27\lib\site-packages\django\db\__init__.py", line 34, in __geta
ttr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "C:\Python27\lib\site-packages\django\db\utils.py", line 90, in __getitem
__
    self.ensure_defaults(alias)
  File "C:\Python27\lib\site-packages\django\db\utils.py", line 80, in ensure_de
faults
    conn.setdefault('TIME_ZONE', 'UTC' if settings.USE_TZ else settings.TIME_ZON
E)
  File "C:\Python27\lib\site-packages\django\utils\functional.py", line 185, in
inner
    return func(self._wrapped, *args)
AttributeError: 'Settings' object has no attribute 'USE_TZ' 
```

我真的不知道如何解决这个问题。因此，我为我得到的每一个想法/建议感到高兴！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:43:39.860

这*通常*意味着——即使该错误根本没有帮助——当 Django 尝试导入您的设置文件时，会发生某种语法或导入错误。

尝试打开一个 shell 并手动导入设置模块，看看你得到了什么异常（如果有的话）：

1.  在托管您的`manage.py`.
2.  看看里面的`DJANGO_SETTINGS_MODULE`设置`manage.py`。可能是`project.settings`。
3.  在该控制台会话中打开一个 Python shell；然后`import project.settings`或其他。很可能会出现异常。修理它 ：）

YMMV，希望这有帮助......

# c++ - 在编码约定中使用 boost::ref 来表示意图

> ID：13186580
> 
> 赞同：3
> 
> 时间：2012-11-01T22:38:21.847
> 
> 标签：c++, boost, coding-style, conventions, ref

当函数将非常量引用作为参数时，它可能会创建难以阅读的代码，因为在调用站点上可能会更改哪些输入并不明显。这导致一些代码约定强制使用指针，例如

```
void func(int input, int* output);

int input = 1, output = 0;
func(input, &output); 
```

代替

```
void func(int input, int& output);

int input = 1, output = 0;
func(input, output); 
```

就个人而言，我讨厌使用指针，因为需要检查空值。这让我想知道是否可以使用 boost::ref （或 C++11 的 std::ref ）来表示意图，如下所示：

```
void func(int input, int& output);

int input = 1, output = 0;
func(input, boost::ref(output)); 
```

这将用作公司编码约定。**我的问题是，有什么理由说明这不是一个好主意吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T22:59:23.693

这不是一个坏主意，但并没有真正执行（如 PiotrNycz 所述）。它实际上只是一个评论。

我们可以做得更好：

```
template <typename T>
class output_argument
{
public:
    template <typename U>
    friend output_argument<U> out(U& ref);

    T& get() const
    {
        return mRef;
    }

    operator T&() const
    {
        return get();
    }

private:
    explicit output_argument(T& ref) :
    mRef(ref)
    {}

    output_argument& operator=(const output_argument&); // not defined

    T& mRef;
};

template <typename U>
output_argument<U> out(U& ref)
{
    return output_argument<U>(ref);
} 
```

给予：

```
void foo(int x, output_argument<float> f)
{
    int i = static_cast<int>(f);

    f.get() = static_cast<float>(i + x);
}

int main()
{
    float f = 5.0f;

    //fails: foo(1, f);
    foo(1, out(f));
} 
```

但通常这些实用程序不是必需的，因为函数名称应该传达参数发生的情况：`swap(x, y)`非常清楚地修改了参数！并且返回值应该使用返回类型来完成，进一步限制了这个实用程序可以使用的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:47:41.043

这个公司的编码约定很容易（当然是错误地）被打破，如下所示：

```
void func(int input, int& output);

int input = 1, output = 0;
func(boost::ref(input), output); 
```

这编译和工作正常 - 但会误导读者。

最好让 func 有个好名字，建议在其中修改一些参数：

```
void copyTo(int input, int& output); 
```

在现代 IDE 中 - 您可以在阅读该函数的功能时看到。

* * *

也许更好的公司编码约定会以相反的方式，通过使用 boost::cref:

```
void func(int input, int& output);

int input = 1, output = 0;
func(boost::cref(input), output); 
```

像 boost::ref 这样的错误是不可能的......

# wpf - WPF上的封装

> ID：13186582
> 
> 赞同：0
> 
> 时间：2012-11-01T22:38:36.527
> 
> 标签：wpf, encapsulation

“代码完成2”在客户类中说，列表的接口如果不使用应该隐藏，

但在 datagrid 或 Listbox 中的 WPF 数据绑定中，通常使用 itemssource = customers，

如果客户继承自列表，那么列表的接口不能被隐藏...

这两者有冲突吗？如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:13:34.373

谁说设置 **itemssource = customers**时不使用像 IEnumerable 这样的 List 接口。它被使用，您的 ListBox 和 DataGrid 类使用它们来遍历您的集合中的项目。

# java - JMenuItem 文本和加速键从右到左对齐

> ID：13186584
> 
> 赞同：3
> 
> 时间：2012-11-01T22:38:49.430
> 
> 标签：java, swing, jmenuitem

我在 Java 应用程序中使用从右到左的菜单。
我在所有`JMenuBar`, `JMenu`&`JMenuItem`元素上使用了它来使它们从右到左：

```
jmenubar.applyComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
jmenu1.applyComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
jmenuitem1.applyComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT); 
```

现在的问题是`JMenuItem`' 的**文本正确对齐，**但**它的键盘加速器未对齐**，如图所示（F2 和 F3 不在视野范围内，其他未对齐）：
![F2 和 F3 不在视野范围内，而其他的没有左对齐](../Images/48012c1e7772a9775cabdea40aa6068e.png)

**问题：**如何修复从右到左`JMenuItem`的加速器对齐？

* * *

对于 SSCCE：
此代码产生问题：

```
public class test{
    public static void main(String[] args){
        try{
            javax.swing.SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                        javax.swing.JFrame frame = new javax.swing.JFrame("test");
                        frame.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
                    javax.swing.JMenuBar menubar = new javax.swing.JMenuBar();
                    javax.swing.JMenu jmenu1 = new javax.swing.JMenu("\u0645\u0646\u0648");
                    javax.swing.JMenuItem jmenuitem1 = new javax.swing.JMenuItem("\u0645\u0646\u0648 \u06F1");
                    javax.swing.JMenuItem jmenuitem2 = new javax.swing.JMenuItem("\u0645\u0646\u0648 \u06F2");
                    javax.swing.JMenuItem jmenuitem3 = new javax.swing.JMenuItem("\u0645\u0646\u0648 \u06F3");
                    javax.swing.JMenuItem jmenuitem4 = new javax.swing.JMenuItem("\u0645\u0646\u0648 \u06F4");
                    jmenuitem1.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_F2, 0));
                    jmenuitem2.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_F3, 0));
                    jmenuitem3.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_C, java.awt.event.InputEvent.CTRL_MASK|java.awt.event.InputEvent.ALT_MASK));
                    jmenuitem4.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_D, java.awt.event.InputEvent.CTRL_MASK));
                    menubar.applyComponentOrientation(java.awt.ComponentOrientation.RIGHT_TO_LEFT);
                    jmenu1.applyComponentOrientation(java.awt.ComponentOrientation.RIGHT_TO_LEFT);
                    jmenuitem1.applyComponentOrientation(java.awt.ComponentOrientation.RIGHT_TO_LEFT);
                    jmenuitem2.applyComponentOrientation(java.awt.ComponentOrientation.RIGHT_TO_LEFT);
                    jmenuitem3.applyComponentOrientation(java.awt.ComponentOrientation.RIGHT_TO_LEFT);
                    jmenuitem4.applyComponentOrientation(java.awt.ComponentOrientation.RIGHT_TO_LEFT);
                    jmenu1.setFont(new java.awt.Font("Times New Roman", 0, 15));
                    jmenuitem1.setFont(new java.awt.Font("Times New Roman", 0, 15));
                    jmenuitem2.setFont(new java.awt.Font("Times New Roman", 0, 15));
                    jmenuitem3.setFont(new java.awt.Font("Times New Roman", 0, 15));
                    jmenuitem4.setFont(new java.awt.Font("Times New Roman", 0, 15));

                    frame.setJMenuBar(menubar);
                    menubar.add(jmenu1);
                    jmenu1.add(jmenuitem1);
                    jmenu1.add(jmenuitem2);
                    jmenu1.add(jmenuitem3);
                    jmenu1.add(jmenuitem4);
                        frame.setVisible(true);
                    frame.pack();
                    frame.setSize(200,200);
                }
            });
        }catch(java.lang.Exception e){
            System.out.println(e.getMessage());
        }
    }
} 
```

# ruby-on-rails - 设计用户的rails pg db迁移未定义方法`database_authenticable'

> ID：13186586
> 
> 赞同：3
> 
> 时间：2012-11-01T22:39:07.603
> 
> 标签：ruby-on-rails, ruby, postgresql, pg

`undefined method database_authenticatable' for #<ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::TableDefinition:0xd715388>`

迁移是：

```
class DeviseCreateUsers < ActiveRecord::Migration
  def self.up
    create_table(:users) do |t|
      t.database_authenticatable :null => false
      t.recoverable
      t.rememberable
      t.trackable
      t.timestamps
    end
    add_index :users, :email,                :unique => true
    add_index :users, :reset_password_token, :unique => true
  end
  def self.down
    drop_table :users
  end
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T01:09:41.460

如果我没记错的话，devise 将它生成的迁移样式从

```
create_table(:user) do |t|
  t.database_authenticatable
end 
```

至

```
create_table(:user) do |t|
  ## Database authenticatable
  t.string :email,              :null => false, :default => ""
  t.string :encrypted_password, :null => false, :default => ""
end 
```

2.0版以后。

更新：见这个[维基](https://github.com/plataformatec/devise/wiki/How-To%3a-Upgrade-to-Devise-2.0-migration-schema-style)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T14:36:23.380

这对我有用：

```
create_table(:users) do |t|
  t.string :email,              :null => false, :default => ""
  t.string :encrypted_password, :null => false, :default => ""
  ## Recoverable
  t.string   :reset_password_token
  t.datetime :reset_password_sent_at

  ## Rememberable
  t.datetime :remember_created_at

  ## Trackable
  t.integer  :sign_in_count, :default => 0
  t.datetime :current_sign_in_at
  t.datetime :last_sign_in_at
  t.string   :current_sign_in_ip
  t.string   :last_sign_in_ip

  # t.encryptable
  # t.confirmable
  # t.lockable :lock_strategy => :failed_attempts, :unlock_strategy => :both
  # t.token_authenticatable

  t.timestamps
end 
```

# ruby-on-rails - Rails 路由和辅助函数

> ID：13186592
> 
> 赞同：0
> 
> 时间：2012-11-01T22:39:52.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我在路由文件中定义了以下路由：

```
match "/users/:id/courses", :to => 'users#courses' 
```

您知道为该路线生成的辅助函数是什么吗？

我试过这个：

```
users_courses_path(current_user)
user_courses_path(current_user)
users_course_path(current_user)
user_course_path(current_user) 
```

但这些都不起作用

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:44:23.370

比这更好的是，您可以创建自己的助手，例如：

```
match "/users/:id/courses", :to => 'users#courses', :as => :users_courses # or anything you want 
```

# javascript - HTML 表单 - 从链接更改选择状态

> ID：13186593
> 
> 赞同：0
> 
> 时间：2012-11-01T22:39:52.467
> 
> 标签：javascript, html

在我早上的大部分时间里，我一直在寻找答案，我一定没有使用正确的搜索词，因为我找不到任何接近我所追求的东西。

这可能很容易，也可能需要一些 JS，我不确定，因为我从来没有在项目中这样做过。

基本上我有一些员工资料，每个资料都有一个指向联系页面的链接。

```
<a href="contact_form">Contact Steve</a> 
```

在“contact_form”上会有一个带有员工姓名的选择设置，我想知道有没有一种方法可以通过 url 传递信息来更改选择状态以自动在选择状态下显示正确的名称。

```
<select name="Recipient">
        <option selected="selected" value="reception">Reception</option>
        <option value="steve">Steve</option>
        <option value="bob">Bob</option>
        <option value="john">John</option>
</select> 
```

因此，在这种情况下，当用户点击“联系史蒂夫”时，他们会进入选择“史蒂夫”而不是默认选择的“接待”的表单。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:53:18.607

使用[此答案](https://stackoverflow.com/a/647272/86298)`getQueryString`中的功能。您可以执行以下操作：

```
function getQueryString() {
  var result = {}, queryString = location.search.substring(1),
      re = /([^&=]+)=([^&]*)/g, m;

  while (m = re.exec(queryString)) {
    result[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
  }

  return result;
}

window.addEventListener("load", function() {
    document.getElementById('contact-list').value = getQueryString()['contact'];
}); 
```

请注意，您必须设置选择元素的 ID，例如：

```
<select name="Recipient" id="contact-list"> 
```

现在，您可以使用 URL 指定要选择的联系人：

```
contact_form.html?contact=steve 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:48:21.367

当您重定向到联系表单时，请提供一些 GET 参数，例如：?rep=steve

// 编辑：或者如果已经在联系表单中完成了点击，则使用我之前提供的解决方案 // 编辑

在联系表单上，使用 javascript：

```
var $_GET = [];
var get_arr = document.location.search.replace('?','').split('&');

for(var prm in get_arr){
dbl = get_arr[prm].split('=');
$_GET[dbl[0]] = dbl[1];
}; 
```

然后使用 jQuery 例如做：

```
$(function() {
if ( typeof($_GET['rep']) != 'undefined' ) {
$('select[name="Recipient"] option:eq("'+$_GET['rep']+'")').attr("selected","selected");
};
}); 
```

可能包含一些语法错误，未经检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T22:47:02.043

使用jQuery：

```
<a data-id="steve" href="#contact_form">Contact Steve</a>

...

$("a").click(function() {
   $("select[name=Recipient]").val($(this).data("id"))
}) 
```

# css - 仅使用 CSS3 进行 Pinterest 样式堆叠

> ID：13186597
> 
> 赞同：0
> 
> 时间：2012-11-01T22:40:11.870
> 
> 标签：css

是否可以仅使用 css 在页面上进行 pinterest 样式的布局/堆叠项目？

我想 CSS3 可能有一些东西可以用列做这种布局。

我已经阅读了一个教程，但它需要使用 javascript 和绝对定位来进行堆叠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:07:58.447

您可以使用 CSS3 列。它将垂直堆叠项目。[http://jsfiddle.net/qLVXQ/](http://jsfiddle.net/qLVXQ/)

```
div.pinterest {
    width: 400px;
    column-count: 4;
    column-gap: 0;
}
div.pinterest > div {
    display: inline-block;
    vertical-align: top;
    width: 100px;
} 
```

# dynamic - 嵌入动态链接数量的文本

> ID：13186598
> 
> 赞同：1
> 
> 时间：2012-11-01T22:40:27.477
> 
> 标签：dynamic, text, wicket, hyperlink

我有一些从数据库中提取的文本，必须向用户显示。每个文本都有一些指向我需要呈现的其他文本的链接。链接是动态的，这意味着我无法事先知道这些链接中有多少会被呈现（以及在文本中的位置）。举个简单的例子：

T1 这是文本 LINK1 的第一个示例，可以让 LINK2 简要了解我的问题

T2 这是我的问题 LINK4 的另一个 LINK3 示例，任何人都可以帮助 LINK5 吗？

在 Wicket 中执行此操作的最佳方法是什么？没有预先准备好的标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:55:51.227

A) 只是不要使用 Wicket，使用任何你喜欢的模板解决方案（看看 VelocityPanel）。

B）如果您的链接在您的文本中已经是最终的，请使用 SmartLinkMultilineLabel

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:16:11.303

您可以按照 svenmeier 的建议使用[SmartLinkLabel 。](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/extensions/markup/html/basic/SmartLinkLabel.html)

如果您的链接已经作为超链接出现在文本中，您可以直接使用它。如果您需要对链接进行后处理，您可以提供自定义[LinkParser](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/extensions/markup/html/basic/LinkParser.html)：

```
@Override
protected ILinkParser getLinkParser() {
    final LinkParser parser = new LinkParser();
    return parser.addLinkRenderStrategy(YOUR_PATTERN, new ILinkRenderStrategy() {
        @Override
        public String buildLink(final String linkTarget) {
            // build the link from the target matched by the pattern
        }
    });
} 
```

# .net-4.0 - 如何在 .NET4 中运行具有 .NET 2.0 依赖项的 ActiveX 控件？

> ID：13186599
> 
> 赞同：1
> 
> 时间：2012-11-01T22:40:28.773
> 
> 标签：.net-4.0, .net-2.0, activex

我有一个依赖于.NET 2.0 的C# ActiveX 控件（即Visual Studio 项目的目标框架设置为.NET Framework 2.0）。如果浏览器机器上存在 .NET 2.0 框架，则控件运行良好；但如果未安装 .NET2.0，则不起作用。如果在浏览器机器上安装了 .NET 4.0，我希望这个控件也能工作。

如果安装了 .NET4，如何配置针对 .NET 2.0 的 ActiveX 控件/dll 也可以运行？

# c++ - 使用 C++ 从 SID 获取本地 Windows 用户名

> ID：13186603
> 
> 赞同：3
> 
> 时间：2012-11-01T22:40:41.037
> 
> 标签：c++, windows, winapi, sid

如果我有一个 Windows 帐户 SID 列表（字符串，如“S-1-5-21-16217043-3088031003-1644254475-1001”），我如何从它们那里获取 Windows 用户帐户的名称（诸如“John Doe”之类的东西）使用 C++ 和 WinAPI？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T22:44:09.143

查看这些 WINAPI 函数：

*   [`ConvertStringSidToSid()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376402%28v=vs.85%29.aspx), 将帐户 SID 字符串转换[`SID`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379594%28v=vs.85%29.aspx)为所需的参数，
*   [`LookupAccountSid()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379166%28v=vs.85%29.aspx)

# perl - 使用 Perl 脚本在 Clearcase 中更新签入文件的注释

> ID：13186605
> 
> 赞同：3
> 
> 时间：2012-11-01T22:40:57.847
> 
> 标签：perl, cygwin, clearcase

我想用 Perl 脚本更新 Clearcase 中签入文件的注释。
如果我从命令行传递的注释不包含空格，则此脚本可以正常工作。
但是当我使用带空格的注释时，我遇到了错误-

> 错误：找不到路径名：“C:/Views/view1/some_dir/test.c@@/main/dbg_test/1

以下是脚本的命令行输入：

```
>>./appendcomments.pl dbg_test "\"scr1234, Test Scr\"" 
```

这是我的代码。

```
if ($#ARGV != 1 )
{
    print "usage: addcomments.pl <base branch> <comment>\n";
    print "     For example addcomments.pl rel5.0 \"This is an example\"\n";
    exit;
}

my $base_branch =   $ARGV[0];
my $comment   =     $ARGV[1];

my ($output, @FILE_LIST, $file, $desr);

@FILE_LIST = `cleartool find -avobs -version "version(.../$base_branch/LATEST)" -print`;

FILE: foreach $file (@FILE_LIST) 
{
    $file =~ s/\\/\//g;
    $desr =`cleartool describe -fmt %Nc $file`;

    if ($desr !~ /scr\s*\#*\s*(\d+)/img)
    {
        chomp($file);
        $output = `cleartool chevent -c $comment -replace $file`; 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:45:06.940

在注释周围使用双引号（假设注释中没有双引号）：

```
$output = `cleartool chevent -c "$comment" -replace $file`; 
```

如果您必须担心注释文本中出现双引号（或单引号，或两者），那么您需要对变量注释做一些工作。因此，对于单引号评论，您应该考虑：

```
$comment =~ s/'/'\\''/g;  # Once, outside the loop

$output = `cleartool chevent -c '$comment' -replace $file`; 
```

在 shell 脚本中，单引号`$comment`会阻止 shell 扩展变量，但这是 Perl 进行的扩展。第一个替换用序列替换注释字符串中的每个单引号`'\''`。命令中的替换将单引号括起来。这意味着有一个单引号字符串，每个`'\''`序列都会停止当前的单引号字符串，输出一个转义的单引号，然后开始一个新的单引号字符串，根据需要重复直到注释末尾​​的单引号.

你说脚本是'appendcomments.pl'，但你在命令中使用`-replace`而不是`-append`。您的决定，但名称与操作不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:02:52.983

就像在[这个线程](https://www.ibm.com/developerworks/forums/thread.jspa?threadID=236404)或[这个线程](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=74284)中一样，尝试转义这些引号：

```
$output = `cleartool chevent -c \"$comment\" -replace \"$file\"`; 
```

* * *

话虽这么说，实际问题是“C：/Views/view1/some_dir/test.c@@/main/dbg_test/1”永远不会存在（无论是否是cygwin）：ClearCase只会在动态中访问**[扩展路径](https://stackoverflow.com/questions/987427/why-cant-perl-find-my-file-that-is-in-clearcase/988904#988904)**视图 ( `M:\...`)，而不是快照 ( `C:\...`)，如本例所示，它使用动态视图。

更准确地说，来自“ [pathnames_ccase](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/pathnames_ccase.htm) ”：

> 从动态视图中，您可以使用此处描述的路径名形式作为任何`cleartool`采用路径名的命令的参数。
> **从快照视图中，您可以使用 VOB 扩展路径名形式作为`cleartool`返回元素和版本信息的命令**的参数（例如`describe`，、、`ls`和`lshistory`）`diff`。此类操作不需要 MVFS。
> 但是，您不能使用 VOB 扩展路径名称表单来检出未加载到视图中的元素版本。
> 
> Windows 用户注意事项：`cleartool`区分大小写。在`cleartool`子命令中，MVFS 对象的路径名（包括 MVFS 命名空间中的私有视图文件）必须区分大小写。

因此，在与引号打架之前：

*   使用[动态视图](https://stackoverflow.com/questions/2923328/what-are-the-differences-between-a-snapshot-view-and-a-dynamic-view/2925378#2925378)
*   确保路径 bis 的大小写正确（`cleartool descr M:/path/to/file@/main/aVersion`在 cygwin 会话中使用简单）
*   然后试试你的 ccperl 脚本。

# android - 安卓屏幕问题

> ID：13186609
> 
> 赞同：3
> 
> 时间：2012-11-01T22:41:18.860
> 
> 标签：android, android-emulator

我对某些模拟器的 android 屏幕有问题。我得到以下信息：

![安卓屏幕问题](../Images/e8baa8b9cfd23e35e53f5928f8c683bc.png)

这只发生在某些模拟器设置上，特别是在三星 Galaxy 2 设备上。

谢谢，克里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:41:52.563

当我将此代码添加到我的抽象基础活动时，我在 Android 2.x 设备上（仅）遇到了同样的问题。我正在使用此代码在 Android 4.0 最近的应用程序列表中禁用我的应用程序的屏幕截图。

最后我发现这段代码至少在 Android 4.x 设备上是安全的。所以我对这个问题的解决方案是检查我是否在 Android 4.0 或更高版本上运行：

```
if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
    getWindow().setFlags(LayoutParams.FLAG_SECURE, LayoutParams.FLAG_SECURE);
} 
```

# actionscript-3 - AS3 / FlashDevelop - 在 Embed 中使用编译器常量

> ID：13186611
> 
> 赞同：1
> 
> 时间：2012-11-01T22:41:38.767
> 
> 标签：actionscript-3, apache-flex, flashdevelop

我想使用编译器常量来修改一些嵌入文件的路径，对于不同的项目（共享相同的源代码）是不同的

IE。转换这个：

[嵌入(source = 'mypath/myfile.png')] public static const myimage:Class;

变成类似的东西：

[嵌入(source = CONFIG::gfx_path+'myfile.png')] public static const myimage:Class;

其中 CONFIG::gfx_path 是 'mypath/'

问题是它没有编译它（错误：无效的元数据）。事实上，你甚至不能这样做：“mypath/”+“myfile.png”，因为它会给出同样的错误。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:22:46.257

您不能在嵌入标签（或任何元数据）中使用可执行代码。

元`Embed`数据标记（以及无数其他特定代码类型）在编译时执行。涉及变量/方法的普通代码在运行时执行。如果您不知道其中的区别，编译时间代码会在您构建项目时执行，并且实际上是构建的一部分。运行时在应用程序运行时执行。

您不能在编译时执行运行时代码，反之亦然。所有嵌入必须在编译时显式定义才能成功。这可能很痛苦，但应用程序必须在编译*之前*确切知道要嵌入什么。这就是嵌入的全部意义所在。

# java - 返回泛型类型的新实例，其中 T 设置为给定 arg 的类型

> ID：13186612
> 
> 赞同：2
> 
> 时间：2012-11-01T22:41:49.707
> 
> 标签：java, generics, inheritance

我有一个关于可以在 Java 中返回参数化泛型类型的方法的问题。请耐心等待，因为我可能不会简明扼要地解释它！假设我们有以下内容：

```
public class SomeClass<T extends AnotherType> extends SomeSuperClass<T>{
    private AnotherType member;        

    public SomeClass(AnotherType at){
       member = at;
    }

    public SomeSuperClass<xxx> foo(AnotherType bar){
       return new SomeSuperClass<xxx>(bar);
    }

} 
```

所以我们有了这个类似工厂的简单方法'foo'。我可以用什么代替“xxx”来表示返回的新实例的参数化类型将是“bar”对象的特定类型。例如，如果 bar 属于 Bar 类（AnotherType 的子类），那么我们将返回`SomeSuperClass<Bar>(bar)`

我知道我可以使用“？” 代表任何类型并具有：

```
return new SomeSuperClass<?>(bar); 
```

但我希望更具体一点：

```
return new SomeSuperClass<bar.class>(bar); 
```

我不能使用 T，如果 bar 的类型在 SomeSuperClass 层次结构中更高？也使用 just`SomeClass<AnotherType>`太模糊了。

在这种情况下使用什么语法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T22:48:46.577

这个怎么样？

```
public <U extends AnotherType> SomeSuperClass<U> foo(U bar){
    return new SomeSuperClass<U>(bar);
} 
```

# java - 了解 SimpleTimeZone 和 DST 测试

> ID：13186617
> 
> 赞同：-1
> 
> 时间：2012-11-01T22:42:20.043
> 
> 标签：java, calendar, timezone, dst

我在 Java 中使用 SimpleTimeZone 类时遇到问题。首先，JavaDoc 很好，但在开始和结束规则方面不太容易理解。但是在网上找到的一些例子的帮助下，我设法做对了（我仍然不明白为什么 8 代表 day_of_month 一个月的第二周！！！但无论如何）

现在我编写了一个简单的 Junit 测试来验证我的理解：

```
package test;

import static org.junit.Assert.assertEquals;

import java.sql.Timestamp;
import java.util.Calendar;
import java.util.GregorianCalendar;
import java.util.SimpleTimeZone;

import org.apache.log4j.Logger;
import org.junit.Test;

public class SimpleTimeZoneTest {

Logger log = Logger.getLogger(SimpleTimeZoneTest.class);

@Test   
public void testTimeZoneWithDST() throws Exception {

    Calendar testDateEndOut = new GregorianCalendar(2012, Calendar.NOVEMBER, 4, 01, 59, 59);
    Calendar testDateEndIn = new GregorianCalendar(2012, Calendar.NOVEMBER, 4, 02, 00, 00);
    Calendar testDateStartOut = new GregorianCalendar(2012, Calendar.MARCH, 11, 01, 59, 59);
    Calendar testDateStartIn = new GregorianCalendar(2012, Calendar.MARCH, 11, 02, 00, 00);

    SimpleTimeZone est = new SimpleTimeZone(-5 * 60 * 60 * 1000, "EST");
    est.setStartRule(Calendar.MARCH, 8, -Calendar.SUNDAY, 2 * 60 * 60 * 1000);
    est.setEndRule(Calendar.NOVEMBER, 1, Calendar.SUNDAY, 2 * 60 * 60 * 1000);

    Calendar theCal = new GregorianCalendar(est);

    theCal.setTimeInMillis(testDateEndOut.getTimeInMillis());

    log.info(" Cal date = " + new Timestamp(theCal.getTimeInMillis()) + " : " + theCal.getTimeZone().getDisplayName());
    log.info(" Cal use DST = " + theCal.getTimeZone().useDaylightTime());
    log.info(" Cal In DST = " + theCal.getTimeZone().inDaylightTime(theCal.getTime()));
    log.info("offset = " + theCal.getTimeZone().getOffset(theCal.getTimeInMillis()));
    log.info("DTS offset= " + theCal.getTimeZone().getDSTSavings());
    assertEquals("End date Should be In DST", true, theCal.getTimeZone().inDaylightTime(theCal.getTime()));

    theCal.setTimeInMillis(testDateEndIn.getTimeInMillis());

    log.info(" Cal date = " + new Timestamp(theCal.getTimeInMillis()) + " : " + theCal.getTimeZone().getDisplayName());
    log.info(" Cal use DST = " + theCal.getTimeZone().useDaylightTime());
    log.info(" Cal In DST = " + theCal.getTimeZone().inDaylightTime(theCal.getTime()));
    log.info("offset = " + theCal.getTimeZone().getOffset(theCal.getTimeInMillis()));
    log.info("DTS offset= " + theCal.getTimeZone().getDSTSavings());
    assertEquals("End date Should be Out DST", false, theCal.getTimeZone().inDaylightTime(theCal.getTime()));

    theCal.setTimeInMillis(testDateStartIn.getTimeInMillis());

    log.info(" Cal date = " + new Timestamp(theCal.getTimeInMillis()) + " : " + theCal.getTimeZone().getDisplayName());
    log.info(" Cal use DST = " + theCal.getTimeZone().useDaylightTime());
    log.info(" Cal In DST = " + theCal.getTimeZone().inDaylightTime(theCal.getTime()));
    log.info("offset = " + theCal.getTimeZone().getOffset(theCal.getTimeInMillis()));
    log.info("DTS offset= " + theCal.getTimeZone().getDSTSavings());
    assertEquals("Start date Should be in DST", true, theCal.getTimeZone().inDaylightTime(theCal.getTime()));

    theCal.setTimeInMillis(testDateStartOut.getTimeInMillis());

    log.info(" Cal date = " + new Timestamp(theCal.getTimeInMillis()) + " : " + theCal.getTimeZone().getDisplayName());
    log.info(" Cal use DST = " + theCal.getTimeZone().useDaylightTime());
    log.info(" Cal In DST = " + theCal.getTimeZone().inDaylightTime(theCal.getTime()));
    log.info("offset = " + theCal.getTimeZone().getOffset(theCal.getTimeInMillis()));
    log.info("DTS offset= " + theCal.getTimeZone().getDSTSavings());
    assertEquals("Start date Should be Out DST", false, theCal.getTimeZone().inDaylightTime(theCal.getTime()));

} 
```

}

好的，我想测试日期限制，看看 inDaylightTime 是否返回正确的东西！

所以，我的规则是：

DST 开始于 3 月的第二个星期日凌晨 2 点 DST 结束于 11 月的第一个星期日凌晨 2 点

在 2012 年（现在）这给了我们 3 月 11 日凌晨 2 点和 11 月 4 日凌晨 2 点

你可以看到我的考试日期设置正确！！！

那么这是我的测试运行的输出：

```
2012-11-01 18:22:44,344 INFO [test.SimpleTimeZoneTest] - < Cal date = 2012-11-04 01:59:59.0 : Eastern Standard Time>
2012-11-01 18:22:44,345 INFO [test.SimpleTimeZoneTest] - < Cal use DST = true>
2012-11-01 18:22:44,345 INFO [test.SimpleTimeZoneTest] - < Cal In DST = false>
2012-11-01 18:22:44,345 INFO [test.SimpleTimeZoneTest] - <offset = -18000000>
2012-11-01 18:22:44,345 INFO [test.SimpleTimeZoneTest] - <DTS offset= 3600000> 
```

我的第一个断言失败了，并告诉我 2012-11-04 01:59:59 不是 inDST ... !!!!!!???

如果我输入 2012-11-04 00:59:59，则测试通过！

这 1 小时的间隔让我很困惑……谁能解释这种行为？

哦，顺便说一句，如果有人可以详细说明：

```
est.setStartRule(Calendar.MARCH, 8, -Calendar.SUNDAY, 2 * 60 * 60 * 1000); 
```

为什么 8 表示三月的第二周......以及 -SUNDAY。我无法在一个真实的日历示例中弄清楚这件事！！！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:59:05.047

> 我的第一个断言失败了，并告诉我 2012-11-04 01:59:59 不是 inDST ... !!!!!!???

在 11 月 4 日凌晨 2:00，我们“退回”到凌晨 1:00，因此时间 1:59:59 发生了两次，一次在 DST 之内，一次在 DST 之后；所以，这个声明：

```
Calendar testDateEndOut =
    new GregorianCalendar(2012, Calendar.NOVEMBER, 4, 01, 59, 59); 
```

真是模棱两可。碰巧的是，JDK 决定它指的是 1:59:59 的*第二次*出现，即 DST 之外的那个，这就是您看到该结果的原因。

*编辑添加：*您可以消除这种歧义，并确保您获得第*一次*出现，方法是最初设置`testDateEndOut`为 00:00:00，然后写入`testDateEndOut.setTimeInMillis (testDateEndOut.getTimeInMillis() + 7199000L)`以将其向前移动所需的数量。

> 哦，顺便说一句，如果有人可以详细说明：
> 
> ```
> est.setStartRule(Calendar.MARCH, 8, -Calendar.SUNDAY, 2 * 60 * 60 * 1000); 
> ```
> 
> 为什么 8 表示三月的第二周......以及 -SUNDAY。

`java.util.SimpleTimeZone`支持很多不同的情况，所以它使用了一些魔法。您正在使用[的四参数版本`setStartRule`](http://docs.oracle.com/javase/7/docs/api/java/util/SimpleTimeZone.html#setStartRule%28int,%20int,%20int,%20int%29)，因此您的参数如下：

*   `startMonth`- 你已经明白了。`MARCH`意思是三月。
*   `startDay`- 注意：一天，而不是一周。`8`指本月的第八天。
*   `startDayOfWeek`- 您使用负值表示您想要在上述指定日期*或之后的一天。*`-SUNDAY`表示周日或之后。
*   `startTime`- 你明白这一点。

总而言之，`(Calendar.MARCH, 8, -Calendar.SUNDAY, 2 * 60 * 60 * 1000)`表示 3 月 8 日或之后的第一个星期日的凌晨 2:00（即 [3 月 8 日，3 月 14 日] 范围内的星期日），即 3 月的第二个星期日。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:49:07.780

我没有检查其他所有内容，但最直接的第一个问题是您在*默认*`Calendar`时区创建所有值......这意味着当您编写时：

 *```
theCal.setTimeInMillis(testDateEndOut.getTimeInMillis()); 
```

...这*已经*应用了您的系统默认时区。

我强烈建议您完全摆脱`theCal`，并将您的代码更改为：

```
SimpleTimeZone est = new SimpleTimeZone(-5 * 60 * 60 * 1000, "EST");
est.setStartRule(Calendar.MARCH, 8, -Calendar.SUNDAY, 2 * 60 * 60 * 1000);
est.setEndRule(Calendar.NOVEMBER, 1, Calendar.SUNDAY, 2 * 60 * 60 * 1000);

Calendar testDateEndOut = new GregorianCalendar(est);
testDateEndOut.set(2012, Calendar.NOVEMBER, 4, 01, 59, 59);
Calendar testDateEndIn = new GregorianCalendar(est);
testDateEndIn.set(2012, Calendar.NOVEMBER, 4, 02, 00, 00);
Calendar testDateStartOut = new GregorianCalendar(est);
testDateStartOut.set(2012, Calendar.MARCH, 11, 01, 59, 59);
Calendar testDateStartIn = new GregorianCalendar(est);
testDateStartIn.set(2012, Calendar.MARCH, 11, 02, 00, 00); 
```

这可能无法解决问题，但至少可以更容易地推理它们。

或者，您可以使用 UTC 日历并使用 DST 转换前后的*UTC*时刻来测试您的时区。

除此之外，我强烈建议您使用[Joda Time](http://joda-time.sf.net)而不是`java.util.*`所有日期/时间工作。这是一个*更好*的API - 尽管文档[`DateTimeZoneBuilder`](http://joda-time.sourceforge.net/api-release/org/joda/time/tz/DateTimeZoneBuilder.html)也可能有点棘手。*

# javascript - 如何将观察者方法动态添加到 Ember.js 对象

> ID：13186618
> 
> 赞同：8
> 
> 时间：2012-11-01T22:42:30.313
> 
> 标签：javascript, coffeescript, ember.js

所以我试图将这些观察者方法动态添加到 Ember.js 对象

```
holderStandoutCheckedChanged: (->
    if @get("controller.parent.isLoaded")
        @get("controller").toggleParentStandout(@get("standoutHolderChecked"))
).observes("standoutHolderChecked")

holderPaddingCheckedChanged: (->
    if @get("controller.parent.isLoaded")
        @get("controller").toggleParentPadding(@get("holderPaddingChecked"))
).observes("holderPaddingChecked")

holderMarginCheckedChanged: (->
    if @get("controller.parent.isLoaded")
        @get("controller").toggleParentMargin(@get("holderMarginChecked"))
).observes("holderMarginChecked") 
```

到目前为止我有这段代码，但是 item.methodToCall 函数没有被调用

```
methodsToDefine = [
    {checkerName: "standoutHolderChecked", methodToCall: "toggleParentStandout"},
    {checkerName: "holderPaddingChecked", methodToCall: "toggleParentPadding"},
    {checkerName: "holderMarginChecked", methodToCall: "toggleParentMargin"}
]

add_this = { }

for item in methodsToDefine
    add_this["#{item.checkerName}Changed"] = (->
        if @get("controller.parent.isLoaded")
            @get("controller")[item.methodToCall](@get(item.checkerName))
    ).observes(item.checkerName)

App.ColumnSetupView.reopen add_this 
```

谁能告诉我我做错了什么？有一个更好的方法吗 ？我应该在 mixin 中这样做吗？如果是这样，请

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-03T15:33:52.673

我不知道您的确切用例，但正如您所说，您所描述的问题可以通过 Mixin 解决，请参阅[http://jsfiddle.net/pangratz666/a3Usx/](http://jsfiddle.net/pangratz666/a3Usx/)

**JavaScript**：

```
App = Ember.Application.create();

var methodsToDefine = [
    {checkerName: "standoutHolderChecked", methodToCall: "toggleParentStandout"},
    {checkerName: "holderPaddingChecked", methodToCall: "toggleParentPadding"},
    {checkerName: "holderMarginChecked", methodToCall: "toggleParentMargin"}
];

App.Stalker = Ember.Mixin.create({
  init: function() {
    this._super();
    methodsToDefine.forEach(function(config) {
      // add an observer for checkerName - a change should call methodToCall
      Ember.addObserver(this, config.checkerName, this, config.methodToCall);
    }, this);
  },

  willDestroy: function() {
    this._super();

    // since we are good citizens, we remove the observers when the object is destroyed
    methodsToDefine.forEach(function(config) {
      Ember.removeObserver(this, config.checkerName, this, config.methodToCall);
    }, this);
  }
}); 
```

示例用例：

```
var myObj = Ember.Object.create(App.Stalker, {
  toggleParentStandout: function() {
    console.log("toggleParentStandout called");
  },
  toggleParentPadding: function() {
    console.log("toggleParentPadding called");
  },
  toggleParentMargin: function() {
    console.log("toggleParentMargin called");
  }
});

myObj.set('standoutHolderChecked', 42);
myObj.set('holderPaddingChecked', 'Buster'); 
```

* * *

另一种实现是使用 array 的 mixin `watchProperties`，这是应观察的属性列表，请参阅[http://jsfiddle.net/pangratz666/bSF3Z/](http://jsfiddle.net/pangratz666/bSF3Z/)：

**JavaScript**：

```
App = Em.Application.create();

App.Stalker = Ember.Mixin.create({
  init: function() {
    this._super();

    var props = this.get('watchProperties');
    Ember.assert("watchProperties should be an array", Ember.isArray(props));
    props.forEach(function(property) {
      // invoke <property>Changed when <property> changes ...
      Ember.addObserver(this, property, this, '%@Changed'.fmt(property));
    }, this);
  },

  willDestroy: function() {
    this._super();

    this.get('watchProperties').forEach(function(property) {
      Ember.removeObserver(this, property, this, '%@Changed'.fmt(property));
    }, this);
  }
});

var o = Ember.Object.create(App.Stalker, {
  // 'a b'.w() == ['a', 'b']
  watchProperties: 'a b'.w(),
  aChanged: function() {
    console.log("a changed");
  }
});

o.set('a', 123); 
```

# lazy-loading - 在哈希更改时触发延迟加载

> ID：13186620
> 
> 赞同：1
> 
> 时间：2012-11-01T22:42:53.233
> 
> 标签：lazy-loading

我已经使用lazyload.js 构建了一个站点，以在访问页面时淡入图像。像这样...

```
window.onhashchange = function() {
    if (location.hash) {
    var hash = window.location.hash.substring(2);
        switch (hash) {
            case "about":
                changeContent('about');
                break;
            case "contact":
                changeContent('contact');
                break;
            default:
        };

        $("img").lazyload({
            effect : "fadeIn",
        });
    } else {
    };
} 
```

该网站是使用各种页面构建的，但我正在学习如何使用 location.hash 使网站更像一个页面内的应用程序。

不幸的是，当切换代码以使用 onHashChange 时，除了延迟加载图像之外，一切似乎都正常工作，它们仍然是白色的。

我认为这是因为页面还没有加载，所以lazyload 没有启动。

任何人都可以就如何在使用哈希更改更改内容时创建相同效果提供任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:52:45.997

在事件上触发您在延迟加载的图像上使用的`hashchange`事件。延迟加载默认事件是`scroll`，默认容器是`window`. 您应该能够执行以下操作：

```
window.onhashchange = function() {
   $(window).trigger("scroll"); 
} 
```

根据您的问题，尚不清楚`changeContent()`功能的作用。如果它通过 AJAX|H 加载内容，您还必须将插件绑定到新加载的内容。

# objective-c - 对象不响应选择器

> ID：13186624
> 
> 赞同：3
> 
> 时间：2012-11-01T22:43:10.360
> 
> 标签：objective-c, ios

这可能是非常基本的，但我已经做了很多谷歌搜索，似乎无法弄清楚出了什么问题。我正在尝试将图像从 iOS 应用程序的沙盒数据文件夹移动到“相机胶卷”。

如果我使用`UIImageWriteToSavedPhotosAlbum(img,nil,nil,nil)`，它不会引发错误，但也不会在照片中保存图像的副本。

为了弄清楚它失败的原因，我尝试实现一个选择器（如下），但现在它抛出一个 NSInvalidArgumentException，原因是“MyTest<...> 不响应选择器图像：didFinishSavingWithError:contextInfo:”

这是我的实现：

```
@implementation MyTest

- (void)
    image:(UIImage *) image
    didFinishSavingWithError: (NSError *) error
    contextInfo: (void *) contextInfo
{
    //log error or do stuff...
}

+ (void) moveToCameraRoll: (NSString *) path
{
    UIImage *img = [[UIImage imageNamed:path] retain];

    UIImageWriteToSavedPhotosAlbum(img,
                                   self,
                                   @selector(image:didFinishSavingWithError:contextInfo:),
                                   nil);
}

@end 
```

我觉得这可能是非常基本的，但我一直无法找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:46:25.630

如果您提供该选择器（这是可选的），那么您必须实现一个具有该名称的方法：

```
+ (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo {
} 
```

由于您试图在类方法而不是实例方法中执行此操作，因此这很复杂。

除非你真的需要处理这种情况，你可以通过`nil`而不是选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T22:47:31.277

由于`+moveToCameraRoll:`是类（即静态）方法，因此函数中的`self`引用`UIImageWriteToSavedPhotosAlbum`指向`MyTest`该类。您尝试使用的选择器是一个实例方法，因此只有 的实例`MyTest`而不是`MyTest`类本身会响应该选择器。

要解决此问题，请将您的`image:didFinishSavingWithError:contextInfo:`方法更改为类方法。

# rabbitmq - spring-amqp HA 支持

> ID：13186625
> 
> 赞同：2
> 
> 时间：2012-11-01T22:43:17.923
> 
> 标签：rabbitmq, spring-amqp

我使用 spring-amqp 连接到一组 rabbitmq 节点（A、B 和 C）。假设集群中的一个 rabbitmq 节点关闭（C 关闭）。此外，假设有两个消息接收器（Receiver_1 和 Receiver_2）正在使用与节点 C 的连接。当 C 出现故障时，Receiver_1 和 Receiver_2 是否会自动切换它们的连接以连接到 A 或 B？当 C 再次出现时会发生什么？某些接收器连接是否被重新分配以使用 C ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:32:31.397

RabbitMQ 本身不支持故障转移。当 RabbitMQ 集群中的一个节点出现故障时，将选举一个新的主节点，并且集群其余部分的业务将照常进行。

因此，在您的示例中，Receiver_1 和 Receiver_2 将需要处理 C 出现故障的情况，并且知道尝试连接到 A 或 B。

您可以在此处查看官方文档：[http ://www.rabbitmq.com/clustering.html#clients](http://www.rabbitmq.com/clustering.html#clients)

就我个人而言，我使用 haproxy (http://haproxy.1wt.eu/) 来对所有客户端的连接进行负载平衡。haproxy 不仅会进行负载平衡，还会自动检测节点何时下线并将所有连接重新路由到另一个活动节点。话虽如此，它不会是无缝的。应用程序仍将断开连接，因此您需要捕获异常并尝试重新连接。

# objective-c - 在沙盒应用程序中运行外部程序

> ID：13186626
> 
> 赞同：1
> 
> 时间：2012-11-01T22:43:26.393
> 
> 标签：objective-c, macos

如何制作应用程序以显示在终端中使用 w 命令登录到计算机的所有用户？

我制作了 Beta 版应用程序，但它禁用了沙盒 [它显示了用户]，但它没有启用沙盒 [它说没有用户登录]。代码是：

```
NSTask *task = [NSTask new];
[task setLaunchPath:@"/usr/bin/w"];

NSPipe *output = [NSPipe pipe];
[task setStandardInput:[NSPipe pipe]];
[task setStandardOutput: output];

[task launch];
NSFileHandle * read = [output fileHandleForReading];
NSData * dataRead = [read readDataToEndOfFile];
NSString *result = [[NSString alloc] initWithData:dataRead encoding:NSUTF8StringEncoding];
[TView setString: result]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:33:10.593

您可以尝试使用FreeBSD命令的[源代码](http://www.freebsd.org/cgi/cvsweb.cgi/src/usr.bin/w/)*在*`w`您的应用程序中实现其功能并查看它是否有效（不知道是否有效）。但至少你不会遇到运行外部程序的问题......

 *但是，如果它需要访问非标准区域，那么它将无法在沙盒应用程序中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:54:04.360

您尝试运行的实用程序 ( `w`) 正在尝试访问沙盒外部的文件。简而言之，从沙盒应用程序启动时它将不起作用。*

# ruby-on-rails - RESTful Rails 3 路由

> ID：13186628
> 
> 赞同：0
> 
> 时间：2012-11-01T22:43:33.773
> 
> 标签：ruby-on-rails, ruby, rest, routing

我是 RESTful 设计的新手并且很困惑：如果我对同一资源进行 PUT、GET 或 POST，例如 /weblogs/myweblog，我应该如何在 route.rb 和相关控制器中编写？以下是否有效？在 route.rb

```
match 'weblogs/myweblog/new' => 'weblogs#create_new_blog'
match 'weblogs/myweblog/edit/:id' => 'weblogs#edit_blog' 
.
. 
```

在 weblogs_controller.rb

```
def create_new_blog
   ...
end

def edit_blog
  params[:id]..
  ....
end 
```

如果我想在同一个资源上执行 GET/PUT/POST 并且感到困惑，如果它们的 URL 相同但只有 HTTP 请求不同，如何在控制器中编写不同的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:26:33.957

一般来说，最好根据资源来定义你的路由，所以如果你有一个名为 的资源`webblog`，你的路由可以只使用：

```
resources :weblogs 
```

如果您检查由此生成的路由（使用`rake routes`），您将看到它定义了一组标准的映射，从、`GET`和url上的操作到控制器操作：`PUT``POST``DELETE`

```
 webblogs GET    /weblogs(.:format)         weblogs#index
            POST   /weblogs(.:format)         weblogs#create
new_webblog GET    /weblogs/new(.:format)     weblogs#new
    webblog GET    /weblogs/:id(.:format)     weblogs#show
            PUT    /weblogs/:id(.:format)     weblogs#update
            DELETE /weblogs/:id(.:format)     weblogs#destroy 
```

这些路由将映射到标准控制器操作`index`、、、、`create`等`new`。`show`

如果出于某种原因您想在*不*使用的情况下定义路由`resources`，则可以单独定义它们：

```
get '/weblogs' => 'weblogs#index'
get '/weblogs/new' => 'weblogs#new'
get '/weblogs/:id/edit' => 'weblogs#edit'
put '/weblogs/:id' => 'weblogs#update'
... 
```

通过使用 等定义路由`get`，`put`您可以将单个 URL 映射到多个控制器操作，例如：

```
get '/weblogs/myweblog' => 'weblogs#show_myweblog'
put '/weblogs/myweblog' => 'weblogs#update_myweblog'
post '/weblogs/myweblog' => 'weblogs#create_myweblog'
destroy '/weblogs/myweblog' => 'weblogs#destroymy_weblog' 
```

这会将 URL /weblogs/myweblog 映射到`show_myweblog`GET 请求、`update_myweblog`PUT 请求、`create_myweblog`POST 请求和`destroy_myweblog`DELETE 请求的方法。

或者，使用标准`resources`，您可以使用以下选项从全套路线中挑选您想要的路线`only`：

```
resources :weblogs, only: [:show, :edit] 
```

有关更多详细信息，请参阅[文档](http://guides.rubyonrails.org/routing.html)。我希望这能回答您的问题，如果没有，请在评论中提供有关您想要做什么的更多详细信息。

# php - PHP While循环与mysql不添加到变量

> ID：13186638
> 
> 赞同：0
> 
> 时间：2012-11-01T22:44:31.700
> 
> 标签：php, mysql

我有一个正在检查三个字段的 mysql 查询。如果其中任何一个是 1，我希望它显示我关注的文本。我遇到的问题是它只显示第一次设置变量时，它不会输出其他行。我的代码是

```
while ($row =mysql_fetch_array($cust_check)){
    if ($row['emailmatch'] == "1"){
        $output_error = 'Your email is in our database<br />';  
    }
    if ($row['phonematch'] == "1"){
        $output_error .= 'Your phone number is in our database<br />';
    }
    if ($row['addressmatch'] == "1"){
        $output_error .= 'Your address is in our database<br />';
    }
} 
```

然后我只想 $output_error 显示所有值为 1 的值。有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T22:46:39.037

如果您的电子邮件匹配，您正在重置您的 $output_error 变量。

```
$output_error = '';
while ($row =db_fetch_array($cust_check)){
    if ($row['emailmatch'] == "1"){
        $output_error .= 'Your email is in our database<br />'; 
    }
    if ($row['phonematch'] == "1"){
        $output_error .= 'Your phone number is in our database<br />'; 
    }
    if ($row['addressmatch'] == "1"){
        $output_error .= 'Your address is in our database<br />';  
    }
} 
```

# database - 在一组中找到最相似的匹配

> ID：13186639
> 
> 赞同：0
> 
> 时间：2012-11-01T22:44:44.857
> 
> 标签：database, algorithm, search

我有一个动物数据库，每个动物都有许多从 0 到 1 的属性——这些属性是大小、速度、毛羽等。给定一组输入属性，以及每种属性的权重，我需要找到一组动物中“最接近”的匹配。是否有一种算法可以在比 O(n) 时间更好的时间内完成此任务？

我特别想做的是通过将它们与已经存在的动物相匹配，为游戏中的遗传算法产生的“动物”找到合适的纹理。我所说的“最接近”是指属性差异的加权和最小的动物。数据库和权重在应用程序启动时是已知的，因此可以投入大量时间来准备数据。

我已经找到了给定用户偏好的字符串匹配和产品匹配算法，但要么我没有找到我正在寻找的东西，要么我不明白如何将这些概念重新应用到我的困境中。也许图论世界有一些东西可以帮助我？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:56:49.983

您可以将这些项目视为高维空间中的点，并将它们全部插入到 BSP 树中，例如[kd 树](http://en.wikipedia.org/wiki/K-d_tree)。要使用属性权重，您只需将它们乘以相应的坐标：`(w1*x, w2*y, ...)`

**准备：（**来自[维基百科](http://en.wikipedia.org/wiki/K-d_tree#Construction)，python代码）

```
def kdtree(point_list, depth=0):

    if not point_list:
        return None

    # Select axis based on depth so that axis cycles through all valid values
    k = len(point_list[0]) # assumes all points have the same dimension
    axis = depth % k

    # Sort point list and choose median as pivot element
    point_list.sort(key=lambda point: point[axis])
    median = len(point_list) // 2 # choose median

    # Create node and construct subtrees
    node = Node()
    node.location = point_list[median]
    node.left_child = kdtree(point_list[:median], depth + 1)
    node.right_child = kdtree(point_list[median + 1:], depth + 1)
    return node 
```

**搜索：（**来自[gist](https://gist.github.com/863301)，基于[维基百科算法](https://gist.github.com/863301)）

```
# method of the Node-class

def closest_point(self, target, point, best=None):
    if target is None:
        return best

    if best is None:
        best = target

    # consider the current node
    if distance(target, point) < distance(best, point):
        best = target

    # search the near branch
    best = self.child_near(point).closest_point(point, best)

    # search the away branch - maybe
    if self.distance_axis(point) < distance(best, point):
        best = self.child_away(point).closest_point(target, point, best)

    return best 
```

* * *

**阅读更多：**

*   [高维搜索和 NN 问题](http://rjlipton.wordpress.com/2009/06/18/high-dimensional-search-and-the-nn-problem/)（博客文章）
*   Nene 和 Nyar[的高维最近点搜索。](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.48.9194)
*   Tsaparas[在多维空间中的最近邻搜索](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.46.6858)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:21:52.500

您可能会将其视为最大权重匹配问题，但找到最小此类匹配的复杂度的下限将比`O(n)`. 想多了就好`O(n^3)`。

如果我不得不尝试解决这个问题，我会考虑根据权重成对匹配相同类型的属性（即，在输入的“hairy”属性和数据集中所有其他“hairy”属性之间创建加权边缘，使用输入权重的某些因素以及查询“hairy”值与匹配的“hairy”值之间的差异的倒数）。此时，您可以合并所有通往特定动物的边缘，并将边缘权重的总和作为匹配分数。

例如：

```
Monkey:  
A1: 0.5 
B1: 0.25
C1: 1.0

Giraffe:
A2: 0.2
C2: 0.9
D2: 0.1

Input query:
Ai: 0.4 with weight 0.8
Di: 0.2 with weight 0.25 
```

所以我们创建了下图：

```
Ai --> A1 with weight 0.8 * 1/abs(0.5-0.4) (i.e., 8.0)
Ai --> A2 with weight 0.8 * 1/abs(0.2-0.4) (i.e., 4.0)

Di --> D2 with weight 0.25 * 1/abs(0.1-0.2) (i.e., 2.5) 
```

然后我们折叠同一目标动物中具有属性的所有边，以获得我们的候选者：

```
Monkey: 8.0
Giraffe: 4.0 + 2.5 
```

它不漂亮，而且比`O(n)`（可能是您尝试匹配的属性数量）更差，但它可能是开始优化更好解决方案的起点。`m``m`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T22:47:13.150

如果您可以花时间整理数据，则可以**按分数对动物进行排序**（`O(nlogn)`及时但只完成一次），然后**对分数应用二分搜索**以及时找到最接近的匹配`O(logn)`项。

如果您从 SQL 数据库中获取动物列表，则可以通过在查询中使用`ASC`or`DESC`关键字来获取排序列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T23:26:50.680

如何找到线性反转的数量？因此，您将拥有 2 只动物的线性数据集，并且您想通过对它们进行排序来了解它们的相似或不同之处。复杂性与归并排序相同。对于“n”只动物，您将计算 nC2 倒位。

# emacs - Emacs Live - 未找到命名空间

> ID：13186642
> 
> 赞同：8
> 
> 时间：2012-11-01T22:44:50.980
> 
> 标签：emacs, clojure

我使用[Emacs Live](https://github.com/overtone/emacs-live)是因为它看起来不错，并且为我节省了大量的配置工作。现在它运行了几天，但今天显然有些东西坏了。具体来说，自动完成坏了（我相信这可能是[ac-nrepl](https://github.com/purcell/ac-nrepl)的问题）。基本上，我的 minibuffer 现在只显示“未找到命名空间。”，我不再获得真正的自动完成（仅完成文件中已经存在的单词）。当我运行时，`C-c M-n`每次自动完成通常会启动时，我都会得到一个空的 *nREPL 错误 * 缓冲区。

编辑：这*仅*在我使用 nrepl-jack-in 启动 nrepl-server 时发生。只需连接到现有的（例如用 lein repl 创建的）就可以了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T02:35:12.773

问题`Namespace not found`在于 nrepl 不知道当前缓冲区的名称空间。nrepl-set-ns ( `C-c M-n`) 的问题是正在运行`in-ns`，它不会带来 clojure 核心依赖项。

在这两种情况下，解决方法是仅评估`ns`缓冲区的 s-expr 或使用`nrepl-load-current-buffer`.

当然你可以修改 nrepl-set-ns 来做 a`ns`或添加另一个 fn。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:32:39.320

看起来像向缓冲区添加一个可能为空的 ns 声明：

```
(ns example ...) 
```

并且执行`nrepl-set-ns`是 nrepl 的预期用途。它允许使用多个 Clojure 缓冲区，每个缓冲区都有自己的导入、别名等。

我选择在`.clj`文件创建/打开中添加一个钩子来自动化这项工作。不过，仍然有一个负责刷新`ns`修改表单！

# java - 在 Eclipse 中调试 Java 代码时看不到变量

> ID：13186644
> 
> 赞同：0
> 
> 时间：2012-11-01T22:44:53.930
> 
> 标签：java, eclipse, debugging, variables

我有一个非常烦人的问题：

调试时

```
String tm1 = "1";
String tm2 = "";
tm1 = tm2; 
```

在调试器模式下，变量视图中仅显示变量 tm2，但不显示 tm1。我假设是因为我在第三行使用了 tm2 值。如果我评论第 3 行，tm2 也会消失。

为什么？

我认为已经进行了一些优化，Eclipse 得出的结论是我的变量没有被使用，所以它不想显示它。有没有办法关闭它？

另外，我可以发誓，在调试器之前，如果我将鼠标悬停在变量上，小弹出窗口会显示变量值。现在不是这样了。

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:48:58.353

您没有在程序或代码中使用的变量在调试器模式下的变量视图中没有查看。在这里，您使用变量 tm2 来替换 tm1 的值。所以 tm2 在调试器模式下显示在变量视图中，而 tm1 不是。

# java - 重新初始化定义为 spring bean 的 web 服务

> ID：13186647
> 
> 赞同：0
> 
> 时间：2012-11-01T22:45:03.290
> 
> 标签：java, web-services, spring

我有一些外部 web 服务的 spring bean 定义，这些外部 web 服务往往不可靠，所以我可以预见有一天我启动 web 应用程序并且与 web 服务的连接不可用，这将导致 spring bean 的初始化失败，因此导致依赖此 bean 的系统其他部分的依赖性问题。

```
 <bean id="services.ext.service" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean">
        <property name="serviceInterface" value="com.ext.WebService"/>
        <property name="wsdlDocumentUrl" value="http://www.somehost.com/ws/blah.wsdl"/>
        <property name="serviceName" value="Service"/>
    </bean> 
```

我的问题是，是否有一种方法可以将此 bean 设置为延迟初始化，并且如果 bean 失败以某种方式触发 bean 重新初始化，直到它成功？或者也许有更好的方法来设置外部 web 服务。

# php - 响应式设计 - 数据库生成的图标/图像

> ID：13186651
> 
> 赞同：0
> 
> 时间：2012-11-01T22:45:11.153
> 
> 标签：php, css, cakephp, twitter-bootstrap, responsive-design

在我正在处理的网站的主页上，我们在屏幕上从数据库中生成了大约 50 个大图标/图像，我目前将它们调出 5 个，然后我放入一个 BR 标记以转到下一行（使用 PHP 和计数器）。我的问题是设计需要响应，所以如果你把屏幕缩小一点，它将在第一行保存 3，然后在下一行保存 2，然后 PHP 生成的 BR 标记就会启动，所以我们得到一个空间。

解决此问题的最佳方法是什么，因此无论屏幕尺寸如何，它每次都能正常工作？我正在使用 Twitter Bootstrap 和 cakephp 进行编码。

了解我的意思的最佳方式是在网站本身：[http ://www.beanclaim.com/](http://www.beanclaim.com/)

谢谢

当前的 PHP 代码是：

```
// LOOPING THROUGH ALL OF THE INDUSTRY ICONS AND BUILDING A LINK FOR THEM
// ---------------------------------------------------------------------------------->
if (isset($industry_icons)) 
{ 
    $i=0;
    foreach ($industry_icons as $industry) 
    { 

        echo $this->Html->link($this->Html->image($industry['Industry']['image_path'],
            array(
                'width' => '180',
                'style' => 'margin-right: 5px; margin-left: 5px; margin-bottom: 10px;')),
            array('controller' => 'users', 'action' => 'register', 'industries' => $industry['Industry']['id']),
            array('escape' => false));

      $i++;
      if($i % 5 == 0)
      {
        echo "<br />"; 
      }
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:53:39.017

删除`<br/>`标签。你的问题就解决了。图像将根据您的容器 div 大小自动调整。

# magento - 为模块动态添加模板块到另一个块

> ID：13186655
> 
> 赞同：0
> 
> 时间：2012-11-01T22:45:33.577
> 
> 标签：magento, magento-layout-xml

我正在尝试将模板块添加到产品视图（仅限）产品详细信息页面中的页脚块中。我在 catalog.xml 布局文件中尝试了以下内容，但没有运气：

```
<catalog_product_view translate="label">
  ...
  <reference name="footer">
      <block type="core/template" name="uniqueName" template="catalog/product/mytemplate.phtml" />
  </reference>
</catalog_product_view> 
```

和

```
<catalog_product_view translate="label">
  ...
  <reference name="footer">
      <block type="core/template" name="uniqueName">
          <action method="setTemplate"><template>catalog/product/mytemplate.phtml</template></action>
      </block>
  </reference>
</catalog_product_view> 
```

`content`我能够以相同的方式使用后一种方法将模板块放入块中`<reference name="content">`，所以我不明白为什么这不起作用。似乎我没有正确引用页脚。我在 page.xml 文件中看到正在创建的页脚添加为`<block type="page/html_footer" name="footer" as="footer" template="page/html/footer.phtml">`. 有人可以帮我解决这个问题吗？非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:11:56.467

您需要确保您尝试添加块的块模板（在我的情况下为页脚块）正在调用您在布局 xml 中添加的子块。

页脚.phtml：

```
<?php echo $this->getChildHtml('uniqueName'); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:12:18.597

在`page.xml`中，看一下实例化`content`块对象的布局更新xml片段

```
<block type="core/text_list" name="content" as="content" translate="label"> 
```

`content`块是`core/text_list`块。这些`core/text_list`块会自动呈现它们的子块（即它们是文本块列表的包含块）。`core/text_list`别名解析为，`Mage_Core_Block_Text_List`请查看此类呈现方法以了解将内容附加到内容块的原因。

现在，看一下实例化页脚块的布局更新 XML 片段。

```
<block type="page/html_footer" name="footer" as="footer" template="page/html/footer.phtml"> 
```

脚块**不是**文本列表块。它是一个`page/html_footer`块，它是一个模板块。您可以通过查看`page/html_footer`块继承自的类来确定这一点

```
class Mage_Page_Block_Html_Footer extends Mage_Core_Block_Template 
```

模板块**不会**自动渲染其所有子块。相反，在块的模板中，您必须显式渲染一个子节点，并调用

```
echo $this->getChildHtml('block_name'); 
```

所以当你说

```
<reference name="footer">
     <block type="core/template" name="uniqueName" template="catalog/product/mytemplate.phtml" />
</reference> 
```

您是在告诉 Magento 插入一个名为该块`uniqueName`的子块的`footer`块。然而，为了**渲染**块，页脚的模板必须调用

```
$this->getChildHtml('uniqueName') 
```

# sql-server - SELECT * INTO -> 使用 SQL Server 2008 的 Excel 工作表

> ID：13186656
> 
> 赞同：0
> 
> 时间：2012-11-01T22:45:33.710
> 
> 标签：sql-server, excel, select

我想直接从 SQL Server 表中选择一个空的 Excel 电子表格。

我可以从电子表格中选择另一个 SQL Server 表（参见下面的示例）。

我可以直接从 ACCESS 选择一个空的电子表格（见下面的例子）。

但我找不到从 SQL Server 直接选择到空电子表格的方法。

（我通过导入电子表格来操作大量遗留数据，多次操作数据，然后我需要将其导出以供其他需要 csv 文件的程序使用。现在我必须创建一个中间步骤，将其拉入 ACCESS 以获得它返回到 Excel。我利用`SELECT * INTO`来格式化表格，因为我在处理数据时格式化了源表格。）

谢谢您的帮助。

我可以`SELECT * INTO`通过以下代码从 Excel 中创建 SQL Server 表：

```
string query = "SELECT * INTO " + tableName + " " +
               "FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0'," +
               "'Excel 12.0;Database=" + EXCELfilpath + ";IMEX=1'," +
               "'SELECT * FROM ["+sheetName+"$]')"; 
```

我也可以从 ACCESS 表中直接选择到 Excel

```
 //Select the ACCESS Table INTO an Excel Spreadsheet
            try
            {
                //SELECT INTO command                
                string cnStr = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + AccfilePath +
                   ";Persist Security Info=False";

                ConnOpen(cnStr);

                using (connectionToDatabase)
                {
                    //Give the Export Table (destination) a Name
                    //baseTblName = dt.TableName;

                    //Generate the SQL string to SELECT * INTO the NEW table in destination
                    string selectcmd = "SELECT * INTO [Excel 12.0;Database="+ExfilePath+"]." + tblName + " FROM " + tblName;

                    using (OleDbCommand createCmd = new OleDbCommand(selectcmd, connectionToDatabase))
                    {
                        createCmd.ExecuteNonQuery();
                    }

                    ConnClose();
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:11:42.307

由于 64 位，我无法对其进行测试，因为 OLE 通常在您的机器上工作，这应该可以

```
INSERT INTO OPENROWSET('Microsoft.ACE.OLEDB.12.0', 
'Excel 12.0;Database=C:\temp\Mappe1.xlsx;', 
'SELECT * FROM [Tabelle1$]') 
SELECT *  FROM ADDR 
```

# forms - Symfony2 在控制器中渲染表单

> ID：13186662
> 
> 赞同：5
> 
> 时间：2012-11-01T22:46:29.140
> 
> 标签：forms, symfony

如何在控制器（而不是模板）中呈现表单？我正在寻找类似的东西：

```
$form = $this->createForm(...
$output = $form->render(); 
```

$output 将是表单的 html。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T22:51:34.610

表单只是一个对象，它不知道它的布局应该是什么——这就是模板的用途。如果您在从默认控制器扩展的控制器中，则可以像这样获取渲染模板的 HTML：`$html = $this->renderView('YourAppBundle:Blah:form.html.twig', array('form' => $form->createView() ) );`该模板包含表单标记/渲染代码。

# ios - 如何在 xcode 4.5.1 上将 iOS 部署目标更改为 4.2？

> ID：13186666
> 
> 赞同：1
> 
> 时间：2012-11-01T22:46:47.127
> 
> 标签：ios, xcode4.5

我刚刚安装了 Xcode 4.5.1，我希望我的项目在 iOS 部署目标 4.2 中，但它只显示 4.3，知道如何更改为 4.2？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T22:52:59.107

你不能。Xcode 4.5.x 仅支持 iOS 4.3 及更高版本。Xcode 4.5.x 不再支持 armv6 设备。armv6 设备仅支持 iOS 4.2.1。

苹果希望每个人都向前迈进。如果要支持 iOS 6，则需要放弃 4.2 及更早版本。这意味着没有第一代或第二代 iPod touch、没有 iPhone 或 iPhone 3G。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T23:00:53.283

根据[https://discussions.apple.com/docs/DOC-3461](https://discussions.apple.com/docs/DOC-3461)：

> Xcode 4.5.x 的变化
> 
> *   Xcode 4.5.x（及更高版本）不支持生成 armv6 二进制文件。
> *   现在包括 iPhone 5/armv7s 支持。
> *   **Xcode 4.5.x 或更高版本支持的最低部署目标是 iOS 4.3。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T18:13:11.630

您可能想看看这个答案[stackAnswer](https://stackoverflow.com/a/13061562/1050722)。据此，您可以针对较低的目标进行部署。我只是下载一个较旧的 Xcode 版本来试用它......

# mysql - MySQL round(x,1) 返回 0.0 和 -0.0

> ID：13186668
> 
> 赞同：3
> 
> 时间：2012-11-01T22:46:56.050
> 
> 标签：mysql, rounding

告诉我这两个零是否有意义：

```
select x, count(1) from (select round(rand()-0.5,1) x from tab) t group by x;
+------+----------+
| x    | count(1) |
+------+----------+
| -0.5 |     1830 |
| -0.4 |     3726 |
| -0.3 |     3753 |
| -0.2 |     3835 |
| -0.1 |     3828 |
|  0.0 |     1909 |
| -0.0 |     1889 |
|  0.1 |     3831 |
|  0.2 |     3753 |
|  0.3 |     3793 |
|  0.4 |     3690 |
|  0.5 |     1887 |
+------+----------+ 
```

有一种解决方法（转换为十进制（10,1）），但我很好奇 round() 是否损坏。我正在使用 MySQL 5.1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T23:35:33.120

IEEE 浮点标准有两个零：正数和负数。将负值舍入到 0 时，round() 返回负零是完全正常的。

通常，负零被视为等于正零，但看起来在您的平台上 MySQL 认为它们是不同的。

**更新：**至少在 5.5 中，MySQL 似乎认为正零和负零等于`=`，但对于`GROUP BY`.

您可以将零添加到一个值以将负零转换为正，而不更改其他值。例如，

```
select x, count(1) from (select 0+round(rand()-0.5,1) x from tab) t group by x; 
```

# matlab - MATLAB MPI 初始化错误

> ID：13186669
> 
> 赞同：0
> 
> 时间：2012-11-01T22:46:55.567
> 
> 标签：matlab, parallel-processing, mpi

我正在并行运行遗传算法。我在 MATLAB 中使用默认选项（'UseParallel'、'always'）。但是，我想在评估每个设计时整合结果并写入文件。由于我不希望所有处理器都访问同一个文件，因此我想将所有数据发送到单个工作器/处理器，并使该处理器仅写入文件。

但是，当我使用 labSend 和 labReceive 命令时，我收到一条错误消息，提示“尚未加载 MPI 实现。请调用 mpiInit”。此外，尽管当我显示我的 labindex 时并行运行，但它始终为 1（尽管它说打开了 8 个实验室！！）

我在“健身功能”内完成所有这些工作，我认为该功能在所有实验室中都是平行的！有人可以告诉我我是否遗漏了什么吗？我没有正确理解隐式并行过程吗？提前致谢！

# python - 如何在 for 循环中获取下一个元素

> ID：13186671
> 
> 赞同：1
> 
> 时间：2012-11-01T22:47:09.513
> 
> 标签：python, list, for-loop, increment

我有一个包含很多`bool`值的列表，我想得到这个模式：`True, True, False, True, True`. 为此，我认为我需要在处理我的前一个元素时循环获取下一个元素。我该怎么做？

额外的问题：有没有办法增加列表中元素的位置而不是`i += 1`事物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:12:36.133

我会尝试一下：

```
subset = [True, True, False, True, True]
main = [False, True, False, True, True, True, False, True, True, False, True, False, True]

for i, j in  enumerate(xrange(len(subset), len(main) + 1)):
    if main[i:j] == subset:
        print subset, 'is at', i
        break
else:
    print 'not found' 
```

**注意**：这有点粗暴，但一次性还可以……否则，看看尝试……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:50:49.317

```
l = len(some_list) - 3
for i, thing in enumerate(some_list):
    if i == l: break
    if thing and some_list[i+1] and not some_list[i+2] and some_list[i+3]:
        bingo(i) 
```

另一个未经测试的尝试：

```
needle = [True, True, False, True, True]
needle_len = len(needle)
for i in range(len(stack)-needle_len+1):
    if needle == stack[i:i+needle_len]:
        bingo(i) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T23:22:33.570

如果我正确理解了这个问题，那么您尝试做的事情与 完全相同`str.find`，但是在列表中查找子列表而不是字符串中的子字符串。

如果是这样：

```
def findSubList(l, sub):
  return (''.join('T' if x else 'F' for x in l)
          .find(''.join('T' if x else 'F' for x in sub))) 
```

这可能看起来很 hacky，但它是有道理的：你想在一个列表中找到一个子列表，两者都可以简单地转换为字符串，并且已经有一个内置函数可以在字符串中找到一个子字符串，所以为什么不使用吗？

结果可能太慢了，但实际上，编写它的速度非常快，值得对其进行测试，看看它是否对您的目的来说太慢了。（即使它太慢了，也可能是转换为字符串的部分很慢，首先使用字符串而不是布尔列表可能是合理的，或者在开始进行 200 次搜索之前转换一次， 管他呢。）

如果这不可避免地太慢了，我接下来要做的是查看实现`str.find`并将其转换为通用序列查找。你已经有了 Python 的源代码，所以这应该不会太难。但是，它可能`str.find`在 C 中，移植起来可能会很痛苦。在这种情况下，您可能仍想在线搜索纯 Python `str.find`……但假设您没有找到。

下一步是查看 PyPI 上是否有序列查找模块。

如果没有，有一些众所周知的算法要么易于实现，要么在 ActiveState 甚至 Wikipedia 等地方免费实现。有关列表和一些比较，请参阅Wikipedia 上的[字符串搜索算法](http://en.wikipedia.org/wiki/String_searching_algorithm)。（性能特征取决于您没有提供给我们的因素——您需要进行多少次搜索；主要、子集或两者都不同；等等，这意味着没有更多信息，没有人能猜出哪个是最好的。）

甚至标准的字符串搜索算法也可能不够快，并且利用您搜索单个位而不是 8 位字符的事实可以获得主要的效率提升。（如果模式是固定的，您甚至应该能够将搜索描述为有限状态机，并将其转换为硬编码、可证明的最佳实现……）

因此，您*可能*必须自己设计一些东西。但你不太可能这样做，如果可能的话，我会避免这样做。每当你遇到一个明显常见的问题时，值得假设它是一个已解决的问题并寻找解决方案，而不是试图从第一原则解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T23:23:57.943

相当有效，使用滑动窗口方法，应该以线性时间运行。

```
def find_x_in_y(subset, main):
    """ Returns a list of the indexes of the first value of matches. """
    results = []
    for i in xrange(len(main)):
        if main[i:i+5] == subset:
              results.append(i)
    return results

# values borrowed from @JonClements
subset = [True, True, False, True, True]
main = [False, True, False, True, True, True, False, True, True, False, True, False, True]

>>> find_x_in_y(subset, main)
... [4] 
```

@abarnert 很好，这是一种*实际上*非常有效的方法。

效率极高，将整个布尔列表转换为位数组并运行本机搜索方法。

```
from bitarray import bitarray

def find_x_in_y(subset, main):
    subarray = bitarray(subset)
    mainarray = bitarray(main)
    return [int(i) for i in mainarray.itersearch(subarray)] 
```

`timeit`结果：

```
Length of main:                     10      100     1000    10000   100000   1000000

returning _all_ matches:
# number of matches                  1       10      100     1000    10000    100000
# sliding window approach     (0.00059, 0.00502, 0.04194, 0.26211, 2.55554, 26.21962)
# bitarray approach           (0.00028, 0.00072, 0.00484, 0.02926, 0.2822,   2.93676)

returning first match:
# sliding window approach     (0.00034, 0.00034, 0.00034, 0.00021, 0.00026,  0.00059)
# bitarray approach           (0.00017, 0.00017, 0.00016, 0.00011, 0.00014,  0.00049)
# joined string approach      (0.00134, 0.00721, 0.06244, 0.39224, 4.21628, 39.63207) 
```

# sql-server - 使用表变量时，公用表表达式变慢

> ID：13186684
> 
> 赞同：4
> 
> 时间：2012-11-01T22:47:43.723
> 
> 标签：sql-server, common-table-expression, table-variable

我一直在尝试以下（简化的）CTE。使用表变量 () 时，查询会在我取消之前运行几分钟。任何其他被注释掉的方法都会在不到一秒的时间内返回。

如果我用 INNER JOIN 替换整个 WHERE 子句，它也很快。

任何想法为什么使用表变量会运行得这么慢？

FWIW：数据库包含 250 万条记录，内部查询返回 2 条记录。

```
CREATE TABLE #rootTempTable (RootID int PRIMARY KEY)
INSERT INTO #rootTempTable VALUES (1360);

DECLARE @rootTableVar TABLE (RootID int PRIMARY KEY);
INSERT INTO @rootTableVar VALUES (1360);

WITH My_CTE AS 
(
      SELECT ROW_NUMBER() OVER(ORDER BY d.DocumentID) rownum, d.DocumentID, d.Title
      FROM [Document] d
      WHERE d.LocationID IN 
        (
              SELECT LocationID 
              FROM Location 
                    JOIN @rootTableVar rtv ON Location.RootID = rtv.RootID -- VERY SLOW!
                    --JOIN #rootTempTable tt ON Location.RootID = tt.RootID -- Fast
                    --JOIN (SELECT 1360 as RootID) AS rt ON Location.RootID = rt.RootID -- Fast
                    --WHERE RootID = 1360 -- Fast
        )           
) 
SELECT * FROM My_CTE WHERE (rownum > 0) AND (rownum <= 100) ORDER BY rownum 
```

这是从使用表变量时开始的。查询运行时间超过 17 分钟： ![在此处输入图像描述](../Images/9bb5b9e9b4555a9c474a89a82679a537.png)

**XML 格式的执行计划**

临时表：[https ://docs.google.com/open?id=0B66I-fxlyEtEZEthV3ZaWlNLWXM](https://docs.google.com/open?id=0B66I-fxlyEtEZEthV3ZaWlNLWXM)

表变量：[https ://docs.google.com/open?id=0B66I-fxlyEtEbUFZa3RJejFCTkk](https://docs.google.com/open?id=0B66I-fxlyEtEbUFZa3RJejFCTkk)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T17:12:38.360

查询计划清楚地表明，表变量版本正遭受臭名昭著的“表变量基数估计”问题。这主要是因为与临时表不同，表变量不支持统计信息。Paul White 的这篇文章详细解释了它：

[https://sqlkiwi.blogspot.com/2012/08/temporary-tables-in-stored-procedures.html](https://sqlkiwi.blogspot.com/2012/08/temporary-tables-in-stored-procedures.html)

这也说明了最简单的解决方案可能是`OPTION (Recompile);`在查询末尾添加一个子句。尽管这在 SQL Server 的早期版本中可能不起作用，但在更高版本中，它应该会使其获得更好的基数估计，从而生成与临时表版本相同的查询计划。

如果这不起作用，请告诉我，因为还有其他一些（不太理想的）可能的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T00:23:00.697

部分解决方案：帮助很大的是使用索引物理统计报告按照 SQL Server 的建议重建或重新组织表上的索引。此报告可通过右键单击数据库 > 报告 > 标准报告 > 索引物理统计来获得。

# windows - Access 2010 在共享服务器上编译的烦恼

> ID：13186685
> 
> 赞同：1
> 
> 时间：2012-11-01T22:47:59.547
> 
> 标签：windows, ms-access, windows-7, ms-access-2010

我有一个 access 2012 应用程序，它工作得很好，直到我在城里的对手试图运行它。我们共享一个服务器。当我编译它时，他无法运行它。当他编译它时，角色被颠倒了。他可以运行它，但我不能。Access的版本是一样的。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:49:14.713

### 确定故障系统

首先，您应该在其他机器上测试每个编译版本，以找出您或您的同事中的哪一个可能是问题的根源。

如果您已经隔离了问题所在的单个特定机器，那么完全卸载 Office 并重新安装它可能是一件好事；其他东西可能已损坏。

### 共享数据库

当您说*shared server*时，我希望您不是从共享网络文件夹运行 Access 数据库，而是将其正确拆分为后端数据库（包含数据并位于共享网络文件夹中）和前端数据库（包含表单和报告，并在每个用户的机器上运行）。
如果您允许用户`.accde`从网络文件夹运行文件，[请立即停止并拆分您的数据库](http://office.microsoft.com/en-us/access-help/split-an-access-database-HA010342026.aspx)！

### 检查事项

最好在检查时禁用防病毒软件。它可能会阻止某些调用或对某些库的访问：

*   具有不同操作系统或 MSOffice 位数的系统（32 位与 64 位）。[在 64 位 MS Office 上使用 Win32 API](http://msdn.microsoft.com/en-us/library/office/gg264421.aspx)
    存在问题。 如果您在为 32 位制作的表单上引用较旧的外部控件，[它们将无法在 64 位机器上运行](http://social.technet.microsoft.com/Forums/en-US/officeitproprevious/thread/e4ec9cc7-b621-4122-9d8d-ed4d7cfb6e0d)。

*   MSOffice 补丁级别略有不同的机器。[几个月前，](http://answers.microsoft.com/en-us/office/forum/office_2010-access/access-2010-sp1-you-receive-random-crashes-in/d2bf6175-075a-4a12-a2b1-f55d40af271b?page=17)[在发布修复](http://blog.nkadesign.com/2011/office-2010-sp1-and-access-2010-runtime-sp1-are-broken/)之前，SP1肯定存在这样的问题。
    检查您的 MSAccess 确切版本：菜单文件 > 帮助。
    我的说*版本：14.0.6123.5001（32位）*

*   `accda/mda`对不同版本或位置且在系统上找不到的外部库（或其他）的引用。
    这可能很难跟踪和解决，但有一些[关于如何最小化问题的提示](http://social.msdn.microsoft.com/Forums/da-DK/accessdev/thread/4ea21b58-2881-478b-9e9a-f58adf03ce6c)。
    您是否引用了任何由绝对路径定位的库？

*   有些相关，使用未正确注册的第 3 方 ActiveX 组件，或者每台机器上的版本不完全相同。

*   数据库的细微损坏。
    尝试[反编译](https://stackoverflow.com/questions/3266542/ms-access-how-to-decompile-and-recompile)（备份后）。

*   您是否对位于每台机器上不同位置的后端数据库使用链接表？

*   确保运行编译`accde`文件的文件夹已添加到[受信任位置](http://office.microsoft.com/en-us/word-help/create-remove-or-change-a-trusted-location-for-your-files-HA010031999.aspx#BM11)列表中。

*   使用普通`addcb`数据库并在运行时模式下运行它（使用 msaccess.exe[命令行](http://support.microsoft.com/kb/209207)选项`/runtime`）。
    你遇到同样的问题吗？

*   如果问题来自您的代码而不是访问中的崩溃，则可能值得添加一些日志记录来跟踪代码的执行。
    您还应该看看[vbWatchdog](http://www.everythingaccess.com/vbwatchdog.htm)和优秀的库来管理错误和跟踪您的代码（您可以免费试用）。
    强烈推荐！

# c++ - 使用流打印点后的最大小数位数

> ID：13186689
> 
> 赞同：1
> 
> 时间：2012-11-01T22:48:30.947
> 
> 标签：c++, stream

如何使用 stringstream 打印双数点后的*最大*小数位数（无尾随零且无舍入）？例如，如果我只想打印最多 5 个小数位：

```
1 -> 1
1.23 -> 1.23
1.234 -> 1.234
1.2345 -> 1.2345
1.23456 -> 1.23456
1.234567 -> 1.23456
1.2345678 -> 1.23456
1230.2345678 -> 1230.23456 <- Demonstrating that I am not talking about significant digits of the whole number either 
```

等等

在我看到的所有工具（setw、setprecision、fixed 等）中，我似乎无法弄清楚这一点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:55:56.873

你绝对想用`stringstream`选项来做这件事吗？

您可以编写这样的`round`函数：

```
double round(double n, int digits) {
    double mult = pow(10, digits);
    return floor(n*mult)/mult;
} 
```

然后只需打印`round(1.2345678, 5)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:57:07.620

没有内置的方法可以做到这一点（据我所知）。然而，像下面这样的 hack 是可能的：

```
void print_with_places(double num, unsigned places) {
   for (double i = 1; i < num; i*=10) { //have to use a double here because of precision...
      ++places;
   }
   std::cout << std::setprecision(places) << num;
} 
```

它不是最漂亮的，但就是这样或将其打印到字符串然后操作字符串。

# xcode - 如何将文件（即文本文件、doc 或 pdf）从网站下载到 Xcode 应用程序中？

> ID：13186692
> 
> 赞同：1
> 
> 时间：2012-11-01T22:48:46.213
> 
> 标签：xcode, xcode4.3

我正在尝试从网站下载文件并在 Xcode 应用程序中查看它。有谁知道该怎么做？我所看到的只是将本地目录中的文件上传到 Xcode 应用程序中，但是来自网站的文件呢？（即）我可以使用我的桌面访问网站并下载文本或 doc 文件并查看它，但如果我想使用 Ipad 执行此操作怎么办？我该怎么办？谢谢

# django - 为什么第二个用户登录会将我重定向到 /accounts/profile/ url？

> ID：13186693
> 
> 赞同：46
> 
> 时间：2012-11-01T22:48:49.427
> 
> 标签：django, django-authentication

我正在使用 Django 内置视图进行用户登录：

```
url(r'^user/login/$', 'django.contrib.auth.views.login', {'template_name': 'users/templates/login.html'}, name='user-login'), 
```

登录后，当我再次进入用户/登录时，我可以第二次登录。我提交表格并获得：

> 当前 URL，accounts/profile/，与其中任何一个都不匹配。

我没有在`urls.py`.

我做错了什么？为什么框架要重定向到这个 url？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-11-01T22:58:43.527

`django.contrib.auth.views.login``accounts/profile/`登录后立即将您重定向到。
您可能希望`LOGIN_REDIRECT_URL`在`settings.py`文件中设置您喜欢的任何内容..

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T22:57:50.290

[在文档中解释](https://docs.djangoproject.com/en/dev/ref/settings/#login-redirect-url)：

> (accounts/profile/ is ...) 当 contrib.auth.login 视图没有下一个参数时，登录后重定向请求的 URL。

因为您尚未通过身份验证，所以您的请求被重定向到此 url。为了避免重定向，您应该在发送用户之前注销用户`user/login`，创建您的自定义登录视图或[附加 Next 参数](https://stackoverflow.com/questions/3441436/the-next-parameter-redirect-django-contrib-auth-login)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T11:03:26.083

检查您的 login.html

```
<form method="post" action=".">
    ~blah~
    <input type="hidden" name="next" value="/"><!-- login.html must send "next" parameter, and "next" parameter value is url that you want to redirect.  -->
    ~blah~
</form> 
```

祝你好运~

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-15T09:01:05.710

所有这些对我都不起作用。我使用了 JavaScript 解决方案：

在 login.html（社交登录按钮所在的位置）中，我将这个脚本放在了本地存储中：

```
<script>
// Check for local storage
if (typeof(Storage) !== "undefined") {
    var h = window.location.href;
    if (h.indexOf("next") > 0){
        var tokens = h.split("=");
        var nextUrl = tokens[1];

        for(i = 2;i< tokens.length;i++){
            nextUrl += ("=" + tokens[i]);
        }
        localStorage.setItem("next",nextUrl);

    }
}
</script> 
```

在用户被重定向到的页面中，我使用以下脚本进行重定向：

```
$(document).ready(function () {

    // Check for local storage
    if (typeof(Storage) !== "undefined") {
            var nextUrl = localStorage.getItem("next");
            if (nextUrl.length > 0){
                localStorage.setItem("next","");
                window.location = nextUrl;
            }
    }
    else {
        // Sorry! No web storage support..
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-20T23:05:30.887

当您在 django 中使用视图构建时。并且您已成功登录。 django.contrib.auth.views.login 这是您使用的 django 视图。

它有一个名为 LOGIN_REDIRECT_URL 的参数，该参数会在您登录后自动重定向。默认情况下配置为默认值：'/accounts/profile/'。

wich 是当 LoginView 没有获得下一个 GET 参数时，在登录后重定向请求的 URL 或命名 URL 模式。说文件

[https://docs.djangoproject.com/en/3.1/ref/settings/#std:setting-LOGIN_REDIRECT_URL](https://docs.djangoproject.com/en/3.1/ref/settings/#std:setting-LOGIN_REDIRECT_URL)

尝试将此添加到您用于登录的 html 页面表单中。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-11-26T19:10:37.643

两种方法，您可以使用注销“LOGIN_REDIRECT_URL”或

只需使用重定向到具有 @login_required 装饰器的视图方法的 url

例子

对于第二次登录，注销后（下面的代码在 logout.html 中）

```
<a href ="/">Login again </a> 
```

在views.py

```
@login_required
def home(request):
  return HttpResponse("Welcome") 
```

# c# - 使用正则表达式解析字符串

> ID：13186698
> 
> 赞同：0
> 
> 时间：2012-11-01T22:49:36.707
> 
> 标签：c#, regex, winforms

我有一个这样的字符串：

```
Addadafafa/DHello/p2324141142DsddDsdsds/Dgood/p23323 
```

对于那些没有注意到的人，我想保留的文字总是介于`/D`和之间`/p`。我尝试使用正则表达式对其进行解析，但无法对所有字符串进行解析。它总是保留第一个或最后一个词。

如何保留一个新字符串，其中包含前一个字符串之间的所有`/D`单词`/p`？

预期输出：

```
hello good 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T22:53:23.787

```
string input = "Addadafafa/DHello/p2324141142DsddDsdsds/Dgood/p23323";
var parts = Regex.Matches(input, "/D(.+?)/p")
                 .Cast<Match>()
                 .Select(m => m.Groups[1].Value)
                 .ToList();

string finalStr = String.Join(" ", parts); //If you need this. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:00:59.063

试试这个：

```
 string str = "Addadafafa/DHello/p2324141142DsddDsdsds/Dgood/p23323";
    Regex reg = new Regex(@"/D(\w+)/p");
    MatchCollection matches = reg.Matches(str);
    string result = "";
    foreach (Match match in matches)
    {
        result += match.Result("$1") + " ";
    }
    Console.WriteLine(result); 
```

或者：

```
 string str = "Addadafafa/DHello/p2324141142DsddDsdsds/Dgood/p23323";
    Regex reg = new Regex(@"(?!/D)[^D]\w+(?=/p)");
    MatchCollection matches = reg.Matches(str);
    string result = "";
    foreach (Match match in matches)
    {
        result += match.Value + " ";
    }
    Console.WriteLine(result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T03:07:34.507

```
var result = input.Split(new[] {"/D", "/p"}, 
                              StringSplitOptions.RemoveEmptyEntries)
                  .Where((w, i) => (i & 1) == 1); 
```

# jquery - 使用 gmap3 jquery 插件从 kmllayer 获取标记？

> ID：13186702
> 
> 赞同：0
> 
> 时间：2012-11-01T22:49:43.030
> 
> 标签：jquery, google-maps, kml, google-maps-markers, jquery-gmap3

我正在使用 jquery 插件 gmap3 并且正在使用 kmllayer。如何从 kml 获取标记？我需要按区域过滤标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:52:30.123

您无法访问 KmlLayer 中的标记（它由 Google 的服务器呈现为地图图块）。您可以使用 FusionTableLayer（您可以将 KML 导入 FusionTable，然后修改对该 FusionTable 的查询以过滤标记）或第三方 KML 解析器，如[geoxml3](http://code.google.com/p/geoxml3/)或[geoxml-v3](http://code.google.com/p/geoxml-v3/)（使用本机 Google Maps v3 对象呈现 KML） . 不确定它们是否适用于 gmap3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T09:41:26.937

```
var klms = [{"url":"http:\/\/example.com\/points_in_a_kml_file.kml"}];

if(klms){
    $.each(klms, function(i, klms){
        $('#map').gmap3({
            action: 'addKmlLayer',
            url: klms.url,
            options:{
                suppressInfoWindows: true,
                preserveViewport:  false
            }
        })
    })
} 
```

“points_in_a_kml_file.kml”：

```
<?xml version="1.0" encoding="UTF-8"?>
<Document>
<Style id="style0">
    <IconStyle scale="0.181818">
        <Icon>
            <href>http://example.com/pin.png</href>
        </Icon>
    </IconStyle>
</Style>
<Folder>
    <name>pulau_weh_point</name>
    <Placemark>
        <name>Mama's</name>
        <description><![CDATA[Point's description]]></description>
        <Point>
            <coordinates>95.255227,5.875082,0.000000</coordinates>
        </Point>
        <styleUrl>#style0</styleUrl>
    </Placemark>
</Folder>
</Document> 
```

# parsing - 解析输入并执行操作

> ID：13186709
> 
> 赞同：3
> 
> 时间：2012-11-01T22:50:23.387
> 
> 标签：parsing, haskell

我们有一个标准输入，例如：

```
1 2 3
4 5 6
1 3 2
5 3 2
... 
```

每行正好包含三个数字，对于每一行我们要计算函数值

```
f :: (Int, Int, Int) -> Int 
```

并打印结果。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T23:43:08.303

我将指出一些有用的功能，可以帮助您完成任务：

```
readFile :: FilePath -> IO String

lines :: String -> [String]

words :: String -> [String]

print :: (Show a) => a -> IO () 
```

我建议你打开一个`ghci`会话，对这些功能进行一些试验，看看它们做了什么，并尝试以创造性的方式将它们混合在一起。我先给你一个开端：

```
Prelude> str <- readFile "test.txt"
Prelude> print (length (lines str))
<The number of lines in the file "test.txt"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T23:16:20.937

一个简单的解决方案：

```
tuple3 :: [Int] -> (Int,Int,Int)
tuple3 [x,y,z] = (x,y,z)

main = mapM_ print . map (f . tuple3 . map read . words) . lines =<< getContents 
```

我仍然不明白为什么要使用元组作为参数，它会导致丑陋的转换。

# c++ - 如何在 C++ 中为节日 TTS 设置参数

> ID：13186711
> 
> 赞同：3
> 
> 时间：2012-11-01T22:50:23.990
> 
> 标签：c++, linux, text-to-speech, festival

我正在尝试使用节日在 linux 中开发 TTS 程序。但是，我找不到任何用于参数设置的 api，例如速率和音量。有人有什么想法吗？

谢谢，

# ruby - MongoMapper中嵌入式文档类型的命名范围？

> ID：13186714
> 
> 赞同：2
> 
> 时间：2012-11-01T22:50:55.720
> 
> 标签：ruby, ruby-on-rails-3.2, mongomapper

我正在使用带有最新 MongoMapper 的 Rails 3.2.8，并且我已经将顶级模型从 a`MongoMapper::Document`切换为`MongoMapper::EmbeddedDocument`.

突然，我在转换后的课程中遇到错误：

*未定义的方法“范围”*

似乎 MongoMapper 中的命名范围仅适用于顶级文档。

我希望像这样使用它们：

```
my_top_level_document.embedded_items.some_named_scope 
```

除了编写我自己的块迭代器方法之外，还有什么直接的人可以解决这个限制吗？

# php - Plesk 不使用谷歌应用程序向域发送邮件

> ID：13186715
> 
> 赞同：0
> 
> 时间：2012-11-01T22:51:10.247
> 
> 标签：php, plesk

我在 Plesk 11 中有一个域设置。在这个域上，我想向一个电子邮件地址发送一封电子邮件，该地址与发送邮件的域相同。（通过 php 邮件程序）但这不起作用。我关闭了 plesk 邮件服务，检查了 plesk 中的 DNS，但它仍然无法正常工作。将其发送到@gmail.com 地址时，它确实有效。什么可能出错？

=========

我通过使用 PHPMailer 解决了这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T13:08:11.570

为您的域关闭 plesk 中的邮件服务器检查您域的 DNS 条目还通过同一个 www.intodns.com 检查所有 MX 记录到谷歌应用程序所以它是文件。

有时 google mx 记录将需要 48 小时来更新缓存。

注意：确保通过以下链接关闭域上的邮件服务器： [https ://manage.grabweb.net/knowledgebase.php?action=displayarticle&id=748](https://manage.grabweb.net/knowledgebase.php?action=displayarticle&id=748)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:46:23.617

您是否已将 MX 配置为指向 Gmail 邮件服务器？检查此链接，也许可以帮助您 [http://support.google.com/a/bin/answer.py?hl=en&answer=140034](http://support.google.com/a/bin/answer.py?hl=en&answer=140034)

# jquery - 如果警报被注释掉，jquery 函数将不起作用

> ID：13186716
> 
> 赞同：0
> 
> 时间：2012-11-01T22:51:15.867
> 
> 标签：jquery, jeditable

我正在运行一个发布功能，然后在功能结束后。我正在运行另一个功能。问题是第二个功能不起作用，如果我在功能中没有警报消息，它就不会运行......

jquery函数是：

```
function applyeditable(){
    //alert('trying to apply editable class...');

$(".edit_mystatus").editable('/cgi-bin/my_cgi_script.pl', {
event       : 'dblclick',       //or dblclick
data        : " {'A':'Active','C':'Completed','D':'Deleted'}",
type        : 'select',
submit      : 'Ok',
indicator   : '<img src="http://my_website/images/indicator.gif">',
placeholder : 'Double Click to Edit',
tooltip     : 'Double Click to edit...',
style       : 'display: inline',
name        : 'name',
id          : 'id',
callback    : function(value, settings) {
                // console.log(this);
                // console.log('returned value= '+value+' we have to now disable rest of form if Completed or Deleted');
                // console.log(settings);
                }
});
$(".edit_mynotes").editable('/cgi-bin/my_cgi_script.pl', {
    event       : 'dblclick',       //or dblclick
    type        : 'textarea',
    rows        : 10,
    cols        : 100,
    cancel      : 'Cancel',
    submit      : 'Save',
    indicator   : '<img src="http://my_website/images/indicator.gif">',
    placeholder : 'Double Click to enter text',
    tooltip     : 'Double Click to edit...',
    style       : 'display: inline',
    name        : 'name',
    id          : 'id'
});
$(".ajaxfileupload").editable('/cgi-bin/my_cgi_script.pl', {
    type        : 'ajaxupload',
    submit      : 'Upload',
    cancel      : 'Cancel',
    indicator   : '<img src="http://my_website/images/indicator.gif">',
    tooltip     : "Double Click to upload...",
    style       : 'display: inline',
    name        : 'filename',
    id          : 'id'
});

$(".checkclass").click(function() {
    var $this = $(this);
    // $this will contain a reference to the checkbox
    var chkboxval = $this.val();
    if ($this.is(':checked')) {
        alert('the checkbox was checked val='+chkboxval);
    } else {
        alert('the checkbox was UNchecked val='+chkboxval);
    }
});
} 
```

html是：

```
<input type="checkbox" class="checkclass" value="1_0">
<input type="checkbox" class="checkclass" value="1_1">
<input type="checkbox" class="checkclass" value="1_2"> 
```

...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:59:59.730

必须从调用函数的最里面的“成功”事件中调用函数 applyeditable。这将处理事物的异步性质。

例如：

调用函数（abc）{ ... ...

```
$.get(data, function(myfile) {
$("#someid").html(myfile);
applyeditable()     //this call runs after above is success (100% execution)
}); 
```

... }

# jpa - 尝试在超类中使用 EmbeddedId

> ID：13186717
> 
> 赞同：2
> 
> 时间：2012-11-01T22:51:32.133
> 
> 标签：jpa, entity, subclass, superclass, composite-primary-key

我有以下问题：

我有一个带有复合主键的基类（用作超类）。现在我正在尝试从基类正确设置子类，但这不起作用！有人可以帮我吗？谢谢

这是我的课程：

**BasePK.java**

```
@Embeddable
public class BasePK implements Serializeable {
  protected String base1;
  protected Timestamp base2;
  ..
} 
```

**Base.java**

```
@MappedSuperclass
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
public abstract class Base implements Serializeable {
  @EmbeddedId
  protected BasePK id;
  ..
} 
```

**子类A.java**

```
@Entity
public class SubClassA extends Base implements Serializeable {

  @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER, mappedBy="attrA")
  protected List<SubClassB> attrsB;

  protected String attrA1;
  protected String attrA2;
  ..
} 
```

**子类B.java**

```
@Entity
public class SubClassB extends Base implements Serializeable {

  @ManyToOne(fetch=FetchType.LAZY)
  private SubClassA attrA;

  protected String attrB1;
  protected String attrB2;
  ..
} 
```

**子类C.java**

```
@Entity
public class SubClassC extends SubClassA implements Serializeable {

  protected String attrC1;
  protected String attrC2;
  ..
} 
```

当我尝试运行该项目时，会出现以下异常：

```
[EL Info]: 2012-11-01 23:31:18.739--ServerSession(2063330336)--EclipseLink, version: Eclipse Persistence Services - 2.4.1.v20121003-ad44345
[EL Warning]: metadata: 2012-11-01 23:31:19.199--ServerSession(2063330336)--Reverting the lazy setting on the OneToOne or ManyToOne attribute [controlledObject] for the entity class [class logyourlife.entities.ChangeRecord] since weaving was not enabled or did not occur.
[EL Severe]: 2012-11-01 23:31:19.229--ServerSession(2063330336)--Exception [EclipseLink-0] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-48] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: Multiple writable mappings exist for the field [SUBCLASSB.BASE1].  Only one may be defined as writable, all others must be specified read-only.
Mapping: org.eclipse.persistence.mappings.ManyToOneMapping[attrA]
Descriptor: RelationalDescriptor(test.entities.SubClassB --> [DatabaseTable(SUBCLASSB)])

Exception [EclipseLink-48] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: Multiple writable mappings exist for the field [SUBCLASSB.BASE2].  Only one may be defined as writable, all others must be specified read-only.
Mapping: org.eclipse.persistence.mappings.ManyToOneMapping[attrA]
Descriptor: RelationalDescriptor(test.entities.SubClassB --> [DatabaseTable(SUBCLASSB)]) 
```

仅供参考：equals 和 hashcode 方法在所有类中都被覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:01:50.970

首先，移除 Base 上的 @Inheritance 注解。它没有任何目的。

然后，尝试为 ManyToOne 关联显式定义连接列。默认情况下，EclipseLink 似乎对嵌入式 ID 字段和与 SubClassA 的多对一关联使用相同的列名。有关使用此注释的示例，请参阅[http://docs.oracle.com/javaee/6/api/javax/persistence/JoinColumn.html 。](http://docs.oracle.com/javaee/6/api/javax/persistence/JoinColumn.html)

旁注：复合 ID 既低效又难以处理。您真的应该考虑为所有实体使用自动生成的单列 ID。一切都会容易得多。

# c++ - boost::iterator_range 来自模板化迭代器

> ID：13186718
> 
> 赞同：2
> 
> 时间：2012-11-01T22:51:32.587
> 
> 标签：c++, boost, boost-range

我正在尝试`itertools.tee`为 Boost::Range 编写 Python 的 C++ 版本（如此处所示[）](https://stackoverflow.com/questions/13181823/itertools-tee-equivalent-in-boostrange/)。这是我的第一次尝试：

```
template<typename R>
class tee_iterator : std::iterator<std::forward_iterator_tag, typename boost::range_value<R>::type>
{
public:
    typedef typename boost::range_value<R>::type T;
    typedef std::list<T> tee_queue;
    typedef std::vector<tee_queue> tee_queue_collection;

    tee_iterator(const R& r, tee_queue* q, tee_queue_collection* qs) :
        it_(r.begin()), queue_(q), queues_(qs) {}

    tee_iterator(const R& r) : it_(r.end()), queue_(NULL), queues_(NULL) {}

    T& operator*() const { return current_; }

    tee_iterator& operator++()
        {
            if (queue_->empty()) {
                ++it_;
                for (auto q : queues_) {
                    q->push_back(*it_);
                }
            }
            current_ = queue_->front();
            queue_->pop_front();
            return *this;
        }

    bool operator==(tee_iterator const& o) const { return it_ == o.it_; }
    bool operator!=(tee_iterator const& o) const { return !(*this == o); }

private:
    typedef typename boost::range_iterator<const R>::type const_iterator;
    const_iterator it_;
    tee_queue* queue_;
    tee_queue_collection* queues_;
    T current_;
};

template<typename R>
using tee_range = boost::iterator_range<tee_iterator<R> >;

template<typename R>
std::list<tee_range<R> > tee(const R& r, int n)
{
    typedef typename boost::range_value<R>::type T;
    typedef std::list<T> tee_queue;
    typedef std::vector<tee_queue> tee_queue_collection;

    tee_queue_collection queues(n);
    std::list<tee_range<R> > ranges;
    for (int i = 0; i < n; ++i) {
        tee_range<R> t = { tee_iterator<R>(r, &queues[i], &queues), tee_iterator<R>(r) };
        ranges.push_back(t);
    }
    return ranges;
} 
```

但是一旦我尝试使用它：

```
int main(int argc, char* argv[])
{
    std::list<int> l;
    for (int i = 0; i < 10; ++i) {
        l.push_back(i);
    }
    auto t = tee(l, 3);
} 
```

它吹在我的脸上，抱怨（和其他人）失踪`value_type`。`boost::detail::iterator_traits<tee_iterator<std::list<int, std::allocator<int> > > >`我错过了什么？`tee_iterator`做孩子`std::iterator`还不够吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:04:40.177

您忘记添加`public`：

```
class tee_iterator : public std::iterator... 
```

# ruby-on-rails - 使用 .exists? 和 .present 有什么区别？在红宝石？

> ID：13186722
> 
> 赞同：61
> 
> 时间：2012-11-01T22:51:57.407
> 
> 标签：ruby-on-rails, ruby

我想确保我在正确的场合使用它们，并想知道任何微妙之处。它们的功能似乎相同，即检查是否已定义对象字段，当我通过控制台使用它们时，当我进行谷歌搜索时，在线信息并不多。谢谢！

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-11-01T22:58:08.057

澄清一下：“纯”红宝石既不是`present?`也不`exists?`是——它们都来自 Rails-land。

## 当下？

`present?`是 ActiveSupport 的扩展`Object`。它通常用作测试对象的一般“虚假性”。从[文档中](http://api.rubyonrails.org/classes/Object.html#method-i-blank)：

> 一个对象是`present`如果它不是`blank?`。一个对象是`blank`、`false`空的还是空白字符串。

因此，例如：

```
[ "", " ", false, nil, [], {} ].any?(&:present?)
# => false 
```

## 存在吗？

`exists?`来自 ActiveResource。从其[文档中](http://apidock.com/rails/ActiveResource/Base/exists%3F/class)：

> 断言资源的存在，如果找到资源则返回 true。

```
Note.create(:title => 'Hello, world.', :body => 'Nothing more for now...')
Note.exists?(1) # => true 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-05-12T13:53:01.787

这两种方法的最大区别在于，当您调用`present?`它时，它会为找到的每条记录初始化 ActiveRecord（！），而`exists?`不会

为了显示这一点，我在 User 上添加了 after_initialize。它打印：“你已经初始化了一个对象！”

> User.where(name: 'mike').present?

```
User Load (8.1ms) SELECT "users".* FROM "users" WHERE "users"."name" = $1 ORDER BY users.id ASC  [["name", 'mike']]
You have initialized an object!
You have initialized an object! 
```

> User.exists？（名称：'mike'）

```
User Exists (2.4ms)  SELECT 1 AS one FROM "users" WHERE "users"."name" = $1 ORDER BY users.id ASC LIMIT 1  [["name", 'mike']] 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-05-04T05:20:55.253

性能存在巨大差异，根据您正在检查的关系，`.present?`可能会慢 10 倍。`.exists?`

[本文](http://www.ombulabs.com/blog/benchmark/performance/rails/present-vs-any-vs-exists.html)`.present?`对vs `.any?`vs进行了基准测试，`.exists?`并解释了为什么它们按此顺序从慢到快。

简而言之，`.present?`（**示例中为 900ms**）将加载所有返回的记录，`.any?`（**示例中为 100ms**）将使用 SQLCount 来查看它是否 > 0 并且`.exists?`（**示例中为 1ms**）是使用 SQL LIMIT 1 的聪明孩子检查是否至少有一条记录，而不是全部加载，也不计算全部。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-09-29T15:50:39.240

`SELECT COUNT(*)`将扫描记录以获取计数。

`SELECT 1`将在第一场比赛后停止，因此他们的执行时间会非常不同。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-24T04:30:46.283

两者生成的SQL也不同。

`present?`：

```
Thing.where(name: "Bob").present?
# => SELECT COUNT(*) FROM things WHERE things.name = "Bob"; 
```

`exists?`：

```
Thing.exists?(name: "Bob")
# => SELECT 1 AS one from things WHERE name ="Bob" limit 1; 
```

它们的运行速度似乎相同，但根据您的情况可能会有所不同。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2017-02-15T19:49:42.293

您可以使用以下方法避免数据库查询`present?`：

```
all_endorsements_11 = ArtworkEndorsement.where(user_id: 11)
ArtworkEndorsement Load (0.3ms)  SELECT "artwork_endorsements".* FROM "artwork_endorsements" WHERE "artwork_endorsements"."user_id" = $1  [["user_id", 11]]
all_endorsements_11.present?
=> true 
all_endorsements_11.exists?
ArtworkEndorsement Exists (0.4ms)  SELECT  1 AS one FROM "artwork_endorsements" WHERE "artwork_endorsements"."user_id" = $1 LIMIT 1  [["user_id", 11]]
=> true 
```

# android - 如何以编程方式更改 ImageButton 的样式

> ID：13186727
> 
> 赞同：4
> 
> 时间：2012-11-01T22:52:32.540
> 
> 标签：android, styles, imagebutton

在此具体情况`Activity`下，用户应在石头剪刀布游戏中选择玩家 1 和玩家 2 中选择的析构函数。

我尝试了几种方法：第一种是简单地让选定的`ImageButton`点击，但我没有找到任何解决方案来实现这一点。

第二个是设置选择的`ImageButton`不可点击并更改其`Image`，如下图所示。在那里，玩家 1 选择了“岩石”，而玩家 2 还没有选择。如您所见，只要我更改`Image`an 的 s `ImageButton`，边框就会消失。

![在此处输入图像描述](../Images/79df16607c1113ae1e824435ae4d4bcd.png)

我像这样改变`Button`s的状态

```
public void onClickRock1(View v){
    choosenDestructor1 = 1;

    buttonRock1.setImageResource(R.drawable.rock_clicked);
    buttonRock1.setBackgroundColor(getResources().getColor(R.color.button_background_stay_clicked));
    buttonRock1.setClickable(false);

    buttonPaper1.setImageResource(R.drawable.paper);
    buttonPaper1.setBackgroundColor(getResources().getColor(R.color.button_background));
    buttonPaper1.setClickable(true);

    buttonScissors1.setImageResource(R.drawable.scissors);
    buttonScissors1.setBackgroundColor(getResources().getColor(R.color.button_background));
    buttonScissors1.setClickable(true);
    } 
```

对于所有其他 5 `Button`s，与此方法类似。现在，我认为`ImageButton`用简单的方式覆盖样式`Image`会使我的自定义样式的边框`ImageButton`消失，但这只是猜测。

我编写了第二个`ImageButton`具有不同背景颜色和相同边框的自定义样式，但我不知道如何在`ImageButton`from 代码上设置该样式。

所以我的问题是，哪种方法最聪明地解决这个问题（我认为是第三种，但也许还有另一种），如果是第三种，如何设置`ImageButton`from 代码的样式。

**编辑：**

与 rgrocha 的回答类似，我编辑了我的`selector`（已集成在 中`custom_imagebutton.xml`），如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true" android:drawable="@drawable/rock">
        <shape>
            <solid
                android:color="@color/button_background" />
            <stroke
                android:width="2dp"
                android:color="#FFF716" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />

        </shape>
    </item>
    <item android:state_selected="true" android:drawable="@drawable/rock_clicked">
        <shape>
            <solid
                android:color="@color/button_background_stay_clicked" />
            <stroke
                android:width="2dp"
                android:color="#FFF716" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
    <item android:drawable="@drawable/rock">        
        <shape>
            <solid
                android:color="@color/button_background" />
            <stroke
                android:width="1dp"
                android:color="#FFFFFF" />
            <corners
                android:radius="0dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>  
</selector> 
```

和这样的`onClickRock1`方法

```
public void onClickRock1(View v){
    choosenDestructor1 = 1;
    buttonRock1.setSelected(true);
    buttonPaper1.setSelected(false);
    buttonScissors1.setSelected(false);
} 
```

像这样解决它的结果是`custom_imagebutton.xml`为每个`ImageButton`（石头，纸，剪刀）制作一个，并且出现以下问题：1.边框不可见（这很重要，因为我想要这些边框）2.`Image`不是'不再缩放（没关系，因为我更喜欢这样）

所以基本上，它看起来像我在上面发布的图像，除了`Image`s 由于没有缩放而有点大（在`layout.xml`，我设置`scaleType="fitCenter"`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:13:13.167

您可以为要应用的每个状态制作一个可绘制的选择器，并将其设置为主要法师或背景，您可以选择更适合您的需求。

在此选择器中，您可以更改边框、颜色、图像等任何您想要更改的内容。

选择器看起来像：

```
<item android:state_pressed="true">
    <shape android:shape="rectangle" >

        <solid android:color="@color/button_highlight" />
        <corners android:radius="5dp" />

    </shape>
    </item>
<item android:state_selected="true">
    <shape android:shape="rectangle" >

        <solid android:color="@color/menu_bg_selected" />
        <corners android:radius="5dp" />

    </shape>
</item> 
```

有关完整的可绘制文档，请参阅[http://developer.android.com/guide/topics/resources/drawable-resource.html](http://developer.android.com/guide/topics/resources/drawable-resource.html)。对于您的情况，请参阅“状态选择器”。

您甚至可以使用 setSelected()、setEnabled(() 等以编程方式更改按钮的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:12:12.733

根据选择器，这里是快速工作示例。我希望它会对你有所帮助。这里适用于具有指定`android:background`源的按钮。此示例显示了单击图像后图像的变化情况。

MainActivity.java ：

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onClickButton1(View view) {

    //button is selected when false and vice versa
    view.setSelected(!view.isSelected());
    Log.d("xxx", view.isSelected() + "");
}

public void onClickButton2(View view) {

    //same here...
    view.setSelected(!view.isSelected());
    Log.d("xxx", view.isSelected() + "");
}

public void onClickButton3(View view) {

    //same here...
    view.setSelected(!view.isSelected());
    Log.d("xxx", view.isSelected() + "");
}
} 
```

活动主.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageButton
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="5dip"
        android:background="@drawable/button_style"
        android:onClick="onClickButton1" />

    <ImageButton
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="5dip"
        android:background="@drawable/button_style"
        android:onClick="onClickButton2" />

    <ImageButton
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="5dip"
        android:background="@drawable/button_style"
        android:onClick="onClickButton3" />

</LinearLayout> 
```

button_style.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/aselected" android:state_selected="true"/>
    <item android:drawable="@drawable/anone" />

</selector> 
```

图片： ![图片](../Images/7a1c8fad48ee6d35b3b7548ea30361ab.png) ![图片](../Images/fe22985ffa9f68d3719bbc69015fce8d.png)

PS要缩放图像，您可以使用选项：

```
<ImageView
android:scaleType="scaleXY" /> 
```

# windows - 确定安装在 Windows 7 SP1 32 位上的 HAL 的名称

> ID：13186728
> 
> 赞同：3
> 
> 时间：2012-11-01T22:52:51.733
> 
> 标签：windows, device-driver

我正在尝试在 Windows 7 SP 1 32 位上安装刚刚检查过的 HAL 和内核。Microsoft Dev Center 网站[MSDN](http://msdn.microsoft.com/en-us/library/windows/hardware/ff547188%28v=vs.85%29.aspx)上的说明建议我执行以下操作：

1.  打开文件 %SystemRoot%\Inf\setupapi.dev.log 并搜索 hal.dll。你应该找到像 TargetFilename - 'hal.dll' 这样的行
2.  在日志文件的同一部分中，查找相应的 SourceFilename。SourceFilename 右侧的名称是您需要从检查的构建中复制的 HAL 文件的名称。

但是，我机器上的 setupapi.dev.log 文件没有提到 hal.dll。事实上，我在 inf 目录中搜索了 hal.dll，发现在任何其他日志文件中都没有提及它。

我确实在 setupapi.dev.log 中发现了 acpi_hal 和 ACPIAPIC_HAL 的提及，但我不确定这是否可以帮助我选择正确的 hal。

有没有其他方法来确定使用哪个 hal？

编辑：我想通了。见下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:06:16.553

我想到了。在*Windows Internals*，第 6 版，第 60 页，有一个 x86 HAL 列表：Halacpi.dll - 高级配置和电源接口 (ACPI) 单处理器机器。Halmacpi.dll - 带有 ACPI 的高级可编程中断控制器 (APIC)。

由于我的计算机是多处理器并且因为 ACPIAPIC_HAL 已在日志文件中列出，所以我尝试了 halmacpi.dll 并且它有效。

谢谢。

# javascript - 锚标记单击不适用于 jquery 中的 return true 语句

> ID：13186735
> 
> 赞同：1
> 
> 时间：2012-11-01T22:53:25.257
> 
> 标签：javascript, jquery, html

我有一个用于锚标记的 jquery，它第一次调用 ajax，然后当返回成功时，它再次调用 click。在第二次调用时，它返回 true，但锚链接不起作用。

下面是我的代码

html:

```
 <a href="#" class="test-link" target="_blank">test</a> 
```

jQuery：

```
$(document.ready(function(){
  $('.test-link').click(function(){
    if ($(this).hasClass('test')){
      $(this).removeClass('test');
      return true;
    } else {

      $.ajax({
      ...
      ...
      success : function(data) {
          $('.test-link').attr('href',data.url).addClass('test').click(); 
      }
      });
      return false;
    }
 }); 
```

这对我不起作用，我也尝试使用 preventDefault(); 但没有用。

注意：在第一次点击时，它会调用ajax，当它成功时，它会设置锚和类的url，然后再次调用点击，
**但点击不会导航到其他页面。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:06:42.267

触发锚点的点击事件**不会**自动重定向到指定的页面。

您必须**明确**单击该链接才能导航到不同的页面。

您可以使用

```
window.open('','','width=200,height=100') ; // instead` 
```

你可以试试这个方法

```
if ($(this).hasClass('test')){
    $(this).removeClass('test');

    window.open('','','width=200,height=100')
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:09:24.267

您可以使用`window.open()`，但就`click()`开始工作而言，您可以这样做：

```
$('.test-link').click(function(){
    if ($(this).hasClass('test')){
        $(this).removeClass('test').off('click'); // unbind click handler
        this.click();                             // call native click()
    } else {
      $.ajax({
      ...
      ...
      success : function(data) {
          $('.test-link').attr('href',data.url).addClass('test').click(); 
      }
      });
      return false;
    }
 }); 
```

Using`this.click()`将直接调用 DOM 元素的`click()`方法而不是 jQuery`click()`方法 - 我过去发现这将导致链接实际工作的默认行为（即，它将导航到指定的 url），而 jQuery`click()`方法将执行您已分配但未实际导航的处理程序。

但是您还需要取消绑定单击处理程序，以免它进入无限循环。这意味着从那时起，链接将始终在新选项卡中打开相同的 URL，它不会发出进一步的 Ajax 请求。这可以接受吗？

演示：http: [//jsfiddle.net/Pdwt8/1/](http://jsfiddle.net/Pdwt8/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T23:22:30.043

这会在新选项卡中打开页面，而不是在弹出窗口中

```
 window.open(url,'_blank'); 
```

我觉得应该是

```
if ($(this).hasClass('test')){
$(this).removeClass('test');

window.open($(this).text(),'_blank');
} 
```

# javascript - Highchart 在某些缩放级别不显示数据

> ID：13186738
> 
> 赞同：0
> 
> 时间：2012-11-01T22:53:52.803
> 
> 标签：javascript, jquery, highcharts, highstock

这是一个小提琴：http: [//jsfiddle.net/8jMfa/6/](http://jsfiddle.net/8jMfa/6/)

有人可以向我解释这种行为吗？我整天都在和它搏斗。它似乎以某些缩放级别呈现，但不是其他缩放级别。

可能是因为时间序列在某些时候是不规则的？

```
var parsedData = {};
    parsedData.Highcharts = {};  

parsedData.Highcharts.series= [{"name":"Wind Direction","data":[[1325397600000,90],[1325419200000,90],[1325440800000],[1325484000000],[1325505600000,290],[1325527200000,290],[1325570400000,70],[1325592000000,90],[1325613600000,50],[1325656800000,270],[1325678400000,260],[1325700000000,270],[1325743200000],[1325764800000,270],[1325786400000,270],[1325829600000,300],[1325851200000,280],[1325872800000,280],[1325916000000,0],[1325937600000,300],[1325959200000,330],[1326002400000,30],[1326024000000,0],[1326045600000,0],[1326088800000,300],[1326110400000,300],[1326132000000,270],[1326175200000,260],[1326196800000,220],[1326218400000,0],[1326261600000,300],[1326283200000,270],[1326304800000,230],[1326348000000,250],[1326369600000,250],[1326391200000,270],[1326434400000,250],[1326456000000,270],[1326477600000,260],[1326520800000,300],[1326542400000,300],[1326564000000,300],[1326607200000,270],[1326628800000,270],[1326650400000,280],[1326693600000,290],[1326715200000,300],[1326736800000,280],[1326780000000,280],[1326801600000,280],[1326823200000,300],[1326866400000,300],[1326888000000,300],[1326909600000,270],[1326952800000,220],[1326974400000,90],[1326996000000,300],[1327039200000,300],[1327060800000,270],[1327082400000,0],[1327125600000,280],[1327147200000,300],[1327168800000,260],[1327212000000,300],[1327233600000,250],[1327255200000,0],[1327298400000,20],[1327320000000,20],[1327341600000,360],[1327384800000,0],[1327406400000,360],[1327428000000,360],[1327471200000,50],[1327492800000,0],[1327514400000,50],[1327557600000,120],[1327579200000,100],[1327600800000],[1327644000000,90],[1327665600000,90],[1327687200000,100],[1327730400000,30],[1327752000000,360],[1327773600000,360],[1327838400000,30],[1327860000000,30],[1327903200000,30],[1327924800000,30],[1327946400000,40],[1327989600000,320],[1328011200000,30],[1328032800000,270],[1328076000000],[1328097600000,90],[1328119200000,270],[1328162400000,270],[1328184000000,270],[1328205600000],[1328248800000,320],[1328270400000,320],[1328292000000,270],[1328335200000,280],[1328356800000,280],[1328378400000,270],[1328421600000,270],[1328443200000,70],[1328464800000,90],[1328508000000,130],[1328529600000,340],[1328551200000,0],[1328594400000,300],[1328616000000,300],[1328637600000,290],[1328680800000],[1328702400000],[1328724000000,300],[1328767200000,100],[1328788800000,50],[1328810400000,0],[1328853600000,0],[1328875200000,250],[1328896800000,0],[1328940000000,270],[1328961600000,90],[1328983200000],[1329026400000,100],[1329048000000,70],[1329069600000],[1329112800000,300],[1329134400000,300],[1329156000000,280],[1329199200000,300],[1329220800000],[1329242400000,30],[1329285600000,270],[1329307200000,270],[1329328800000],[1329372000000],[1329393600000],[1329415200000,260],[1329458400000,290],[1329480000000,260],[1329501600000,300],[1329544800000,90],[1329566400000,150],[1329588000000,250],[1329631200000,0],[1329652800000,290],[1329674400000,290],[1329717600000],[1329739200000],[1329760800000,220],[1329804000000,270],[1329825600000,270],[1329847200000,280],[1329890400000,220],[1329912000000,210],[1329933600000,180],[1329976800000,270],[1329998400000,270],[1330020000000,250],[1330063200000,230],[1330106400000,280],[1330149600000,270],[1330171200000,270],[1330192800000],[1330236000000,270],[1330257600000,270],[1330279200000,270],[1330322400000,300],[1330344000000,250],[1330365600000,270],[1330408800000],[1330430400000],[1330452000000,100],[1330495200000,280],[1330516800000,300],[1330538400000,280],[1330581600000,270],[1330603200000,270],[1330624800000,250],[1330668000000,270],[1330689600000,180],[1330711200000,310],[1330754400000,180],[1330776000000,270],[1330797600000],[1330840800000,270],[1330862400000,270],[1330884000000,270],[1330927200000,360],[1330948800000,100],[1330970400000,90],[1331013600000,90],[1331035200000,90],[1331056800000,100],[1331100000000,120],[1331121600000,120],[1331143200000,90],[1331186400000,300],[1331208000000,300],[1331229600000,250],[1331272800000,240],[1331294400000],[1331316000000,270],[1331359200000,320],[1331380800000,230],[1331402400000,260],[1331467200000,260],[1331488800000,270],[1331532000000,270],[1331553600000,270],[1331575200000,270],[1331618400000,300],[1331640000000,270],[1331661600000,270],[1331704800000,270],[1331726400000,270],[1331748000000,60],[1331791200000,250],[1331812800000,260],[1331834400000,270],[1331877600000,280],[1331899200000,280],[1331920800000,260],[1331964000000,240],[1331985600000,250],[1332007200000,260],[1332050400000,270],[1332072000000,260],[1332093600000,270],[1332136800000,270],[1332158400000,240],[1332180000000,250],[1332223200000,250],[1332244800000,250],[1332266400000,270],[1332309600000,250],[1332331200000,260],[1332352800000,0],[1332396000000,280],[1332417600000,230],[1332439200000,270],[1332482400000,290],[1332504000000,270],[1332525600000,280],[1332568800000,280],[1332590400000,90],[1332612000000,260],[1332676800000,280],[1332698400000,310],[1332741600000,290],[1332763200000,270],[1332784800000,270],[1332828000000,50],[1332849600000,290],[1332871200000,270],[1332914400000,270],[1332936000000,300],[1332957600000],[1333000800000,0],[1333022400000,270],[1333044000000,270],[1333087200000,270],[1333108800000,270],[1333130400000,300],[1333173600000,270],[1333195200000,300],[1333216800000,300],[1333260000000,290],[1333281600000,290],[1333303200000,300],[1333346400000,300],[1333368000000,300],[1333389600000,290],[1333432800000,260],[1333454400000,330],[1333476000000,130],[1333519200000,270],[1333540800000,260],[1333562400000,220],[1333605600000,280],[1333627200000,250],[1333648800000,260],[1333692000000,300],[1333713600000,100],[1333735200000,70],[1333778400000,0],[1333800000000,270],[1333821600000,260],[1333864800000,300],[1333886400000,180],[1333908000000,240],[1333951200000,120],[1333972800000,300],[1333994400000,130],[1334037600000,90],[1334059200000,120],[1334080800000,150],[1334124000000,120],[1334145600000,120],[1334167200000,190],[1334210400000,120],[1334232000000,100],[1334253600000],[1334296800000,90],[1334318400000,50],[1334340000000,0],[1334383200000,90],[1334404800000,150],[1334426400000,120],[1334469600000,240],[1334491200000,250],[1334512800000,260],[1334556000000,270],[1334577600000,270],[1334599200000,260],[1334642400000,300],[1334664000000,300],[1334685600000,180],[1334728800000,60],[1334750400000,60],[1334772000000,90],[1334815200000,70],[1334836800000,70],[1334858400000,60],[1334901600000,70],[1334923200000,40],[1334944800000,30],[1334988000000,70],[1335009600000,90],[1335031200000,90],[1335096000000,20],[1335117600000,20],[1335160800000,0],[1335182400000,0],[1335204000000,100],[1335247200000,360],[1335268800000,120],[1335290400000,90],[1335333600000,330],[1335355200000,90],[1335376800000,90],[1335420000000,270],[1335441600000,280],[1335463200000,220],[1335506400000,120],[1335528000000,180],[1335549600000,260],[1335592800000,270],[1335614400000,270],[1335636000000,10],[1335679200000,280],[1335700800000,70],[1335722400000,50],[1335765600000,80],[1335787200000,90],[1335808800000],[1335852000000,280],[1335873600000,80],[1335895200000,120],[1335938400000,100],[1335960000000,100],[1335981600000,120],[1336024800000,300],[1336046400000,300],[1336068000000,0],[1336111200000,120],[1336132800000,120],[1336154400000,270],[1336197600000,270],[1336219200000,90],[1336240800000,80],[1336284000000,80],[1336305600000,90],[1336370400000,300],[1336392000000,290],[1336456800000,300],[1336478400000,120],[1336500000000],[1336564800000,90],[1336586400000,120],[1336651200000,240],[1336672800000,250],[1336716000000,250],[1336737600000,250],[1336759200000,260],[1336802400000,270],[1336824000000,290],[1336845600000,280],[1336888800000,300],[1336910400000,200],[1336932000000,250],[1336975200000,170],[1336996800000,250],[1337018400000,180],[1337061600000,210],[1337083200000,140],[1337104800000,270],[1337148000000,360],[1337169600000,150],[1337191200000,300],[1337234400000,240],[1337256000000,250],[1337277600000,250],[1337320800000],[1337364000000,150],[1337407200000,120],[1337428800000,150],[1337450400000,120],[1337493600000,100],[1337515200000,80],[1337536800000,150],[1337580000000,260],[1337601600000,20],[1337623200000,40],[1337666400000,270],[1337688000000,60],[1337709600000,90],[1337752800000,70],[1337774400000,90],[1337796000000,110],[1337839200000,270],[1337860800000,270],[1337882400000,0],[1337925600000,280],[1337947200000,110],[1337968800000,0],[1338012000000,230],[1338033600000,150],[1338055200000,150],[1338098400000,100],[1338120000000,200],[1338141600000,200],[1338184800000,300],[1338206400000,260],[1338228000000,90],[1338271200000,90],[1338292800000,60],[1338314400000,220],[1338357600000,60],[1338379200000,100],[1338400800000,360],[1338444000000,300],[1338465600000,340],[1338487200000,240],[1338530400000,90],[1338552000000,180],[1338573600000,270],[1338616800000,300],[1338638400000,90],[1338660000000,90],[1338724800000,250],[1338746400000,250],[1338789600000,260],[1338811200000,90],[1338832800000,30],[1338876000000,90],[1338897600000,90],[1338919200000,240],[1338962400000,300],[1338984000000,240],[1339005600000,200],[1339048800000,0],[1339070400000,150],[1339092000000,150],[1339135200000,0],[1339156800000,90],[1339178400000,270],[1339221600000,90],[1339243200000,300],[1339264800000,270],[1339308000000,60],[1339329600000,30],[1339351200000,120],[1339394400000,0],[1339416000000,30],[1339437600000,90],[1339480800000,30],[1339502400000,270],[1339524000000,90],[1339567200000,0],[1339588800000,120],[1339610400000,160],[1339653600000,330],[1339675200000,250],[1339696800000,270],[1339740000000,20],[1339761600000,70],[1339783200000,300],[1339826400000,0],[1339848000000,300],[1339869600000,300],[1339912800000,300],[1339934400000,330],[1339956000000,360],[1339999200000,200],[1340020800000,170],[1340042400000,250],[1340085600000,250],[1340107200000,260],[1340128800000,270],[1340172000000,300],[1340193600000,200],[1340215200000,120],[1340258400000,0],[1340280000000,140],[1340301600000,80],[1340344800000,100],[1340366400000,90],[1340388000000,110],[1340431200000,90],[1340474400000,120],[1340517600000,150],[1340539200000,120],[1340560800000,90],[1340604000000,280],[1340625600000,270],[1340647200000,250],[1340690400000,310],[1340712000000,280],[1340733600000,270],[1340776800000,270],[1340798400000,280],[1340820000000,90],[1340884800000,80],[1340906400000,300],[1340949600000,270],[1340971200000,280],[1340992800000,220],[1341036000000,100],[1341057600000,240],[1341079200000,180],[1341122400000,180],[1341144000000,130],[1341165600000,240],[1341208800000,0],[1341230400000,210],[1341252000000,60],[1341295200000,0],[1341316800000,110],[1341338400000,140],[1341381600000,0],[1341403200000,90],[1341424800000,130],[1341468000000,130],[1341489600000,120],[1341511200000,120],[1341554400000,90],[1341576000000,90],[1341597600000,60],[1341640800000,180],[1341662400000,180],[1341684000000,180],[1341727200000,0],[1341748800000,0],[1341770400000,0],[1341813600000,270],[1341835200000,90],[1341856800000,90],[1341900000000,90],[1341921600000,90],[1341943200000,90],[1341986400000,240],[1342008000000,180],[1342029600000,300],[1342072800000,300],[1342094400000,300],[1342116000000,0],[1342159200000,270],[1342180800000,250],[1342202400000,230],[1342245600000,270],[1342267200000,120],[1342288800000,260],[1342332000000,0],[1342353600000,270],[1342375200000,260],[1342418400000],[1342440000000,230],[1342461600000,260],[1342504800000,270],[1342526400000,270],[1342548000000,250],[1342591200000,90],[1342612800000,270],[1342634400000,120],[1342677600000,0],[1342699200000,0],[1342720800000,270],[1342764000000,240],[1342785600000,90],[1342807200000,100],[1342850400000,30],[1342872000000,130],[1342893600000,270],[1342936800000,300],[1342958400000,200],[1342980000000,170],[1343023200000,260],[1343044800000,180],[1343066400000,290],[1343109600000,250],[1343131200000,200],[1343152800000,230],[1343196000000,210],[1343217600000,230],[1343239200000,30],[1343282400000,270],[1343304000000,280],[1343325600000,120],[1343368800000,240],[1343390400000,90],[1343412000000,100],[1343455200000,0],[1343476800000,70],[1343498400000,0],[1343541600000,200],[1343563200000,100],[1343584800000,100],[1343628000000,280],[1343649600000,180],[1343671200000,120],[1343714400000,120],[1343736000000,150],[1343757600000,300],[1343800800000,270],[1343822400000,260],[1343844000000,140],[1343908800000,120],[1343930400000,90],[1343973600000,180],[1343995200000,260],[1344016800000,240],[1344060000000,280],[1344081600000,240],[1344103200000,180],[1344146400000,270],[1344168000000,210],[1344189600000,240],[1344232800000,230],[1344254400000,360],[1344276000000,90],[1344319200000,210],[1344340800000,270],[1344362400000,250],[1344405600000,270],[1344427200000,90],[1344448800000,50]],"yAxis":0,"color":"#80699B","visible":true,"dataGrouping":{"enabled":false}}];

parsedData.Highcharts.yAxis = [{"title":{"text":"Wind Direction"},"lineWidth":1,"lineColor":"#80699B","tickWidth":1,"offset":25,"opposite":false,"allowDecimals":false,"showEmpty":false,"labels":{"style":{"color":"#80699B"}}}];

    var chart;
    $(document).ready(function() {
    chart = new Highcharts.StockChart({
chart : {

                    spacingRight : 0,
                    spacingBottom : 3,
                    spacingLeft : 0,
                    //reflow : true,
                    renderTo : 'container',
                    type : 'line',
                    //shadow : true,
                    //alignTicks : false,
                    //turboThreshold: 30000,

                    //plotBackgroundImage: 'http://www.dawnbreaker.com/forums/navy09/images/gradient_bg.png',
                    //marginLeft:50,
                    //zoomType: 'x',
                    //marginRight : 50,
                    //marginBottom : 25,
                    //marginTop : 50,
                    //marginBottom : 75,
                    minPadding : .5,
                    //height : 360,
                    //width : 1000,
                    events : {
                    //    load : Highcharts.drawTable
                    },
                    style : {
                        fontFamily : 'serif',
                        fontSize : 10
                    }
                },
                navigator : {
                    series : {
                        color : '#2B5C8A'
                    }
                },
                rangeSelector : {
                    inputEnabled : false,
                    buttonTheme : {// styles for the buttons
                        fill : 'none',
                        stroke : 'none',
                        style : {
                            color : '#1F3243',
                            fontWeight : 'bold'
                        },
                        states : {
                            hover : {
                                stroke : '#262F2F'
                            },
                            select : {
                                style : {
                                    color : 'white'
                                }
                            }
                        }
                    },
                    buttons : [{
                        type : 'day',
                        count : 3,
                        text : '3d'
                    }, {
                        type : 'week',
                        count : 1,
                        text : '1w'
                    }, {
                        type : 'month',
                        count : 1,
                        text : '1m'
                    }, {
                        type : 'month',
                        count : 6,
                        text : '6m'
                    }, {
                        type : 'year',
                        count : 1,
                        text : '1y'
                    }, {
                        type : 'all',
                        text : 'All'
                    }],
                    selected : 4
                },

                xAxis : {
                    type : 'datetime',

                    //ordinal: false,

                    dateTimeLabelFormats : {
                        //second : '%b %e',
                        //    minute : '%b %e, %l%P',
                        hour : '%b %e, %l%P',
                        /*            day : '%b %e, %Y',
                         week : '%b %e, %Y',
                         month : '%b %Y',
                         */
                        year : '%Y'
                    },
                    title : {
                        text : null
                    },

                    labels : {
                        style : {
                            color : '#eee',
                            fontSize : 9
                        }
                    },
                    lineColor : '#eee',
                    tickColor : '#eee',
                    //tickPixelInterval : 150
                },
                legend : {
                    enabled : true,
                    //floating:true,
                    layout : 'horizontal',
                    align : 'center',
                    //y:25,
                    //x:50,
                    backgroundColor : 'grey',
                    shadow : true,
                    verticalAlign : 'top',
                    borderColor : '#eee',
                    padding : 10,
                    borderWidth : 2,
                    itemMarginTop : 3,
                    itemMarginBottom : 3,

                    itemStyle : {
                        cursor : 'pointer',
                        color : '#eee',
                        lineHeight : '14px'
                    },
                    itemHoverStyle : {
                        color : '#333'
                    },

                },
                column : {
                    borderColor : "#eee",
                    borderRadius : 1,
                    shadow : false
                },

                plotOptions : {

                    series:
                    {
                        //dataGrouping:false,
                        connectNulls : true,
                        //cropThreshold: 3000,
                        animation:false
                    },
                    line:{
                        //dataGrouping:false,
                        //connectNulls : true,
                        animation:false

                    },    
                        //compare:  document.getElementsByName('comparison')[0].value, /*function() {
                        //        return (document.getElementsByName('comparison')[0].value);
                        //       },*/
                        animation : {
                            duration : 2000,
                            easing : 'swing'

                        }

                },

                series : parsedData.Highcharts.series,
                yAxis : parsedData.Highcharts.yAxis

    }) });​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:16:41.780

我想到了。问题是某些日期没有与之关联的 Y 值。在我过滤掉这些（服务器端）之后，问题得到了解决。

# c++ - 检查结构数组是否为空

> ID：13186740
> 
> 赞同：0
> 
> 时间：2012-11-01T22:54:06.007
> 
> 标签：c++, arrays, struct

好的，我有一个结构数组，（不是指向结构的指针数组），-lesson- 也是一个内部有一些属性的类..

```
struct Mystruct{
    lesson* data;
    mystruct* next;
};    

class Myclass{
    public:
        Myclass();
        Mystruct getarray();
    private:
        Mystruct* array;
};
//in the myclass(); constructor I am doing;
Myclass* array = new Myclass[8]; 
```

我需要知道是否

```
array[i].next 
```

是否为空，因为它不是指向结构的指针数组，所以我不能这么说；

```
if(array[i] == NULL) 
```

或者

```
if(&(array[i]) == NULL) 
```

我该怎么做，我正在寻找的答案不是“它是一个结构数组，你根本无法进行此检查，如果它是一个指针....bla bla”。请帮我找到一种方法，非常感谢所有答案和方法..

* ***编辑：让我为你澄清一下，我需要检查一下；**

```
array[i].next = new lesson(//parameters); 
```

此操作是否完成，我需要知道数组第 [i] 个元素中的“下一个”对象是否已初始化。（数组的第 [i] 个元素包含一个链表，我正在搜索列表并向其中添加对象，如果列表头不为空，我必须找到一种方法来解决这个问题并在末尾添加对象链表）

我怎么能更清楚，但有人只是点击*不喜欢*按钮而不是试图帮助，这是一个严肃的问题而不是巨魔，我试图尽可能地更清楚，但你们没有帮助，只是点击离开，我还能说什么......：/

**我添加了更多代码供您想象这种情况。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:56:51.767

> 是否为空，

定义“空”。你的意思是未初始化？如果是这样，那么只需将每个元素初始化为某个默认值。初始化指向`nullptr`(C++11) 或的指针`0`，然后在使用它们之前进行检查。对象为“空”是没有意义的。

另请注意，那`MyClass`是……好吧，根本不是一堂课。反正...

如果您只是使用默认构造函数，那有什么意义呢？当您分配此内存时，它将被默认构造的对象填充，所以...

```
struct Mystruct
{
    Mystruct()
      : data(nullptr), next(nullptr) {}

    lesson* data;
    myclass* next;
}; 
```

现在您正确初始化指针`x`并`y`为空。

* * *

根据您的编辑...

> 编辑：让我为你澄清一下，我需要检查一下；
> 
> array[i].next = new course(//参数); 此操作是否完成，我需要知道数组第 [i] 个元素中的“下一个”对象是否已初始化。

对，所以因为我们现在正确地初始化了成员变量......

```
if(!array[i].next)
    // next is null, initialize it 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:24:14.910

我假设您问题中的 Mystruct 和 Myclass 是同一类型。

只需将 empty() 成员函数添加到您的结构中，然后调用它：

```
struct Mystruct{
    lesson* data;
    myclass* next;
    bool empty() const { return next == 0; }
};    

Myclass* array = new Myclass[8](); // extra () to make this array zeroed
//... some code
if (array[2].empty()) { ....; } 
```

或者添加全局函数empty()：

```
struct Mystruct{
    lesson* data;
    myclass* next;
};    
bool empty(const Mystruct& o) const { return o.next == 0; }

Myclass* array = new Myclass[8](); // extra () to make this array zeroed
//... some code
if (empty(array[2])) { ....; } 
```

或者只是手动检查下一个成员：

```
struct Mystruct{
    lesson* data;
    myclass* next;
};    

Myclass* array = new Myclass[8](); // extra () to make this array zeroed
//... some code
if (array[2].next == 0) { ....; } 
```

顺便说一句，不是将指针与 0 进行比较，而是将其与 nullptr 进行比较（如果只有您的编译器支持 nullptr）。

# css - 在列表项中居中 div

> ID：13186741
> 
> 赞同：0
> 
> 时间：2012-11-01T22:54:09.837
> 
> 标签：css, html, centering

我有一个 html 页面，其中我在列表项中有一个 div，并试图将 div 居中在列表项中（div 的宽度小于列表项的宽度）。我的 CSS 看起来像

```
ul.my {
    width: 100px;
    padding: 0;
}

li.my {
    list-style: none;
}

div.content {
    text-align: center;
    display: table-cell;
    vertical-align: middle;
} 
```

HTML有一个看起来像的片段

```
<li class="my"><div class="content">stuff</div></li> 
```

但是 div 是左对齐的。如何正确居中对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:02:24.110

您可以水平居中 div 的内容

```
div.content {
    width: 100%;
    text-align: center;
} 
```

或将 div 本身居中：

```
.my li {
    text-align: center;
}
div.content {
    display: inline-block;
} 
```

对于垂直居中，您必须将`display: table-cell`元素包装在一个元素中`display:table`，例如

```
.my li {
    height: 200px;
    display: table;
}
div.content {
    display: table-cell;
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:59:00.753

你的css和html真的相关吗？

您的`.my`类在`li`元素上，因此您的样式应如下所示：

```
li.my {
  // li styles
} 
```

除非你周围有一个更大的容器，否则`ul`这里`.my ul`也不适用。

除了这些更改，使用`li { text-align: center; }`或`div { margin: auto; }`

更新（垂直居中）：

对于垂直居中，如果您的文本都在一行上，请尝试将您`line-height`的大小设置为与您的相同`font-size`，例如：

```
div.content {
  font-size: 14px;
  line-height: 14px;
} 
```

如果它包含 2 行或更多行，那就有点棘手了。 [试试这个](http://css-tricks.com/vertically-center-multi-lined-text/)。

# arrays - 将 int 数组列表转换为 int 数组

> ID：13186745
> 
> 赞同：0
> 
> 时间：2012-11-01T22:54:24.227
> 
> 标签：arrays, arraylist, int, java.util.scanner

编辑：我正在尝试将从 txt 文档中读取的元素逐行添加到数组列表中，然后将该数组列表转换为数组。尽管我的代码出现错误。它不喜欢 int[] a = lines.toArray(new int[lines.size()]);。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class insertionSort {

public static void main(String[] args) {
    List<Integer> lines = new ArrayList<Integer>();
    File file = new File("10_Random.txt");

    try {

        Scanner sc = new Scanner(file);
        //int line = null;

        while (sc.hasNextLine()) {
            int i = sc.nextInt();
            lines.add(i);
            //System.out.println(i);
        }
        sc.close();
    } 
    catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    int[] a = lines.toArray(new int[lines.size()]);
}
} 
```

Edit2：谢谢chaitanya10！全部固定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:55:55.907

```
int line= null; is wrong, 
```

“null 是一个特殊的文字，可以是任何对象引用类型”。你不能像（int，byte，float...）`null`那样`primitive variables`在 java 中赋值。`null can only be assigned to objects . remember that`null`is the default vale for`对象`，当您不初始化它们时。

如果您想将 int 作为对象访问，请使用`Integer`.

```
Integer line= null;//nowthis would compile 
```

并将列表转换为数组执行此操作。

List.toArray(T[] t) 方法返回一个对象。像下面这样。

```
Integer[] array = lines.toArray(new Integer[lines.size()]) 
```

而且您的 List 接受 int[] 数组，并且您正在尝试将 int 添加到 list 中。

像这样更改您的列表声明

```
List<Integer> lines = new ArrayLis<Integer>(); 
```

要打印数组中的元素，您必须对其进行迭代

```
 for(int i=0; i<a.length;i++){
    system.out.println(a[i])
} 
```

你似乎是java的初学者。强烈建议您在[这里](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/index.html)阅读有关 java 基础的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:09:36.470

两个主要问题。

*   您不能分配`null`给`int`. `null`是一个指针值，`int`Java 中的 s 总是按值处理，而不是按引用。对象可以是`null`，原始值如`int`和`double`不能。

*   你的类型声明`ArrayList`是错误的。按照您分配它的方式，列表的*每个元素*都应该是一个 s 数组`int`。我认为这不是您真正想要的 - 每个元素只是一个`int`值，因此*整个*列表类似于数组。

第二个项目符号是您的第二个和第三个错误背后的原因，我认为您可能会看到如果您一直阅读错误消息（这是一个 TypeMismatch 错误，对吗？）。将您的列表参数化为`int[]`，该`add`方法期望添加的所有内容都是 type `int[]`。但`line`只是一个`int`。类似地，该`toArray()`方法返回列表参数化的任何类型的数组。由于您有一个数组列表，`toArray()`因此将返回一个*数组数组*。在这种情况下，它的返回类型是，由于类型不匹配`int[][]`，因此无法分配给它。`int[] a`

这应该可以编译您的代码，但它不会涉及其他验证问题以及您在任何时候输入时都必须担心的问题......但现在我只是假设您已经已经审查了输入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-10T19:39:26.420

您可以使用 IntStream：

```
int[] arr = {15, 13, 7, 4, 1, 10, 0, 7, 7, 12, 15};
List<Integer> arrayList = IntStream.of(arr).boxed().collect(Collectors.toList());
System.out.println(arrayList); 
```

# connection - 读取直到服务器关闭连接

> ID：13186746
> 
> 赞同：1
> 
> 时间：2012-11-01T22:54:31.553
> 
> 标签：connection, go

我正在尝试从服务器读取 JSON 编码的字节，该字节将缩进，但长度不可预测，并且没有明显的终止字节。我想将*整个*服务器响应读入一个字节。服务器将关闭连接。是否可以使用 来做到这一点`net`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T02:08:34.377

作为@minikomi 答案的补充，我想补充一点，如果您确定从服务器返回的字节是 JSON 编码的，那么有一个很好的包`encoding/json`。

[http://golang.org/pkg/encoding/json/](http://golang.org/pkg/encoding/json/)

如果您使用解码器直接从连接解码，有时不会返回错误。您可能希望`fmt.Printf("%v\n", whateverDecodedFromTheConnection)`在连接关闭时查看解码器为您的结构获取的内容。

例如，在我的例子中，`encoding/gob`解码器用于将来自 tcp 连接的消息解码为定义为的结构：

```
type MessageType struct {
    Type uint8
} 
```

当连接关闭时，`decoder.Decode(&buffer)`返回`{0}`. 这可能不是一种常见的情况，但需要注意一些事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T01:21:32.997

请查看[http://golang.org/pkg/net/http/上的文档](http://golang.org/pkg/net/http/)

http [Get](http://golang.org/pkg/net/http/#Get)将返回一个[Response](http://golang.org/pkg/net/http/#Response)结构，它的 Body 类型为`io.ReadCloser`。

然后，您可以使用[ioutil.ReadAll](http://golang.org/src/pkg/io/ioutil/ioutil.go?s=1139:1180#L30)读取对字节数组的整个响应。

```
resp, err := http.Get("http://example.com/")
if err != nil {
    // handle error
}
defer resp.Body.Close()
body, err := ioutil.ReadAll(resp.Body) 
```

# java - Java抽象类和泛型

> ID：13186748
> 
> 赞同：5
> 
> 时间：2012-11-01T22:55:10.073
> 
> 标签：java, inheritance, abstract-class

我正在尝试修改一个类`AuthenticatedUser`以存储`AdminRole`'s 列表。 `AuthenticatedUser`是我所有应用程序都使用的类；当用户成功登录时，它会被放入会话中。现在我想向用户会话添加授权角色列表。然而，每个应用程序对`AdminRole`类的定义略有不同。例如，我的 DataCenter 应用程序存储在数据库中：

```
 employee_id
  role_name
  site_name
  receive_email 
```

并非我的所有应用程序都需要 receive_email 字段，或者可能想要扩展自己的方法。我认为这需要一个抽象类。但是 Eclipse 在此代码段中抱怨 Authorized_role_list 设置器上的错误类型。

```
 DataCenterAdminRoleDAO dcAdminDao = new DataCenterAdminRoleDAO();
  try {
      List<DataCenterAdminRole> authorized_roles = dcAdminDao.getAuthorizedRoleListByBadge(authenticatedUser.getBadge());
      authenticatedUser.setAuthorized_role_list(authorized_roles);

=== Classes

public class AuthenticatedUser extends Employee implements Serializable {   
  private static final long serialVersionUID = 1L;
  private List<AdminRole> authorized_role_list;
  ...
}

public abstract class AdminRole implements Serializable {
  private static final long serialVersionUID = 1L;
  private String role_name; //regular, admin, editor, etc..
  private String site_id;  //company branches
  ...
}

public class DataCenterAdminRole extends AdminRole implements Serializable { 
```

显然，解决方法是在我的数据中心实现中返回一个列表，`AdminRole`但我认为通过扩展抽象类我可以传递子类。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:03:44.297

泛型的行为与 Java 的其他部分不同。不会发生自动转换，所以如果一个方法需要`List<List>`，你不能把它交给`List<ArrayList>`. 同样，如果您的 setter 调用 List，则不能将其交给`List<? extends AdminRole>`，除非您将其定义为`List<? extends AdminRole>`。但是，您可以根据需要覆盖 setter 方法以采用 a `List<DataCenterAdminRole>`，或者将您的方法转换`List<DataCenterAdminRole>`为 a `List<AdminRole>`，或者只是将您的 setter / 字段更改为捕获类型`<? extends AdminRole>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T23:04:04.650

如果是设置器给您带来麻烦，您可以使用带有通配符的下限`authorized_roles_list`

```
private List<? extends AdminRole> authorized_role_list;
....
public setAuthorized_role_list(List<? extends AdminRole> authorized_roles) {
...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T23:06:36.087

A`List<Orange>`不是 a `List<Fruit>`，即使 Orange 是 Fruit。如果是`List<Fruit>`，您可以执行以下操作：

```
List<Orange> orangeList = new ArrayList<Orange>();
List<Fruit> fruitList = orangeList;
fruitList.add(new Apple()); 
```

因此它会完全破坏泛型集合的类型安全，因为一个橘子列表会包含一个苹果。AuthenticatedUser 应该包含一个`List<? extends AdminRole>`能够做你正在做的事情。

# mysql - 第二次输入时没有转义撇号

> ID：13186749
> 
> 赞同：0
> 
> 时间：2012-11-01T22:55:19.917
> 
> 标签：mysql, mysql-real-escape-string, apostrophe

我有一个带有文本区域和保存按钮的简单表单。在字段中输入的内容存储在 mysql 中，然后显示在另一个页面上。每次您在 textarea 中输入内容并保存时，它都会将其保存在已存储的内容之上，如果您明白我的意思，则生成更长的字符串。

我正在使用 mysql_real_escape_string

在测试中，当我第一次输入撇号时，它显示为 \' 这是正确的。但是当我再次输入撇号时它会崩溃

到底是怎么回事？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:17:07.690

啊。对不起。刚刚解决了。我没有转义正在存储的原始数据，然后添加到新数据中——如果这有意义的话

# .net - Vb.net 仅从带有整数的字符串中获取整数

> ID：13186753
> 
> 赞同：1
> 
> 时间：2012-11-01T22:55:41.757
> 
> 标签：.net, vb.net, winforms

我有这个字符串我 `123abc123`怎样才能从这个字符串中只得到整数？

例如，转换`123abc123`为`123123`.

我尝试了什么：

```
Integer.Parse(abc) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T22:58:46.927

你可以使用[`Char.IsDigit`](http://msdn.microsoft.com/en-us/library/7f0ddtxh.aspx)

```
Dim str = "123abc123"
Dim onlyDigits = New String(str.Where(Function(c) Char.IsDigit(c)).ToArray())
Dim num = Int32.Parse(onlyDigits) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T22:59:00.820

提取整数的正确方法是使用`isNumbric`函数：

```
Dim str As String = "123abc123"
Dim Res As String
For Each c As Char In str
    If IsNumeric(c) Then
        Res = Res & c
    End If
Next
MessageBox.Show(Res) 
```

另一种方式：

```
Private Shared Function GetIntOnly(ByVal value As String) As Integer
    Dim returnVal As String = String.Empty
    Dim collection As MatchCollection = Regex.Matches(value, "\d+")
    For Each m As Match In collection
        returnVal += m.ToString()
    Next
    Return Convert.ToInt32(returnVal)
End Function 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T23:00:33.413

```
 Dim input As String = "123abc456"
    Dim reg As New Regex("[^0-9]")
    input = reg.Replace(input, "")
    Dim output As Integer
    Integer.TryParse(input, output) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T23:12:47.940

您可以使用带有模式的正则表达式`\D`来匹配非数字字符并删除它们，然后解析剩余的字符串：

```
Dim input As String = "123abc123"

Dim n As Integer = Int32.Parse(Regex.Replace(input, "\D", "")) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T11:02:38.553

您还可以使用`FindAll`提取所需的东西。我们还应该考虑`Val`处理空字符串的函数。

```
 Dim str As String = "123abc123"
    Dim i As Integer = Integer.Parse(Val(New String(Array.FindAll(str.ToArray, Function(c) "0123456789".Contains(c))))) 
```

# asp-classic - ADODB 记录集错误“对象打开时不允许操作”(3705)

> ID：13186754
> 
> 赞同：1
> 
> 时间：2012-11-01T22:55:48.480
> 
> 标签：asp-classic, adodb, recordset

我有一个我支持的旧版 ASP 应用程序。通过支持，我的意思是自 2005 年左右以来我没有碰过它，因为它刚刚起作用。

但是，在 ASP 应用程序使用的 Access 数据库中存在一些数据问题。所以像个傻瓜一样，我直接通过文件共享打开数据库（使用 MS Access 2007），修复数据并将其保存下来（以 Access 2000 格式）。

现在应用程序将检索并显示数据 OK，但任何更新都失败并出现错误`3705: Operation is not allowed when the object is open`。我没有以任何方式更改代码，唯一的更改是数据更新和数据库保存。

我发现了很多这个错误的例子，但它们都与相当简单的问题有关，比如确保在打开记录集之前关闭它、更改 CursorLocation 枚举等。我徒劳地尝试了其中的大部分，希望有些事情会工作，但什么都没有。

有什么想法可以解决这个问题吗？

谢谢。

**更新**

我已经安装了一个基于 Web 的访问数据库管理系统，并尝试压缩和修复数据库。我收到错误：

```
The Microsoft Jet database engine cannot open the file '<snip>'. It is
already opened exclusively by another user, or you need permission to view
its data. (-2147217911) 
```

我已经运行了[此处](http://support.microsoft.com/kb/285822)详述的宏以确定谁登录到数据库，并且只显示了管理员用户（这是我 - 在运行它时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:18:19.580

@Remou 上面关于检查文件和文件夹权限的评论是正确的。

我让我们的服务器管理员检查了权限，似乎写权限已经从文件夹中删除（并且文件也从文件夹继承了它们的权限）。他说，以前直接通过文件共享保存时发生过这种情况。

（接受代替@Remou的回答）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T08:40:37.157

这些错误意味着一件事：数据库文件被其他进程打开，因此被锁定。

“基于 Web 的访问数据库管理系统”很可能是罪魁祸首，尝试找出如何将其配置为不锁定文件或摆脱它。

作为一种变通方法或验证真正问题的方法，您可以将 .mdb 文件复制到不同的位置并更改经典的 ASP 连接字符串，以检查您是否可以在新位置更新数据库。

# c++ - 如何修复 C++ DLL 中未解决的外部符号错误？

> ID：13186755
> 
> 赞同：1
> 
> 时间：2012-11-01T22:55:50.883
> 
> 标签：c++, function, dll, scope, unresolved-external

我有一个 dll，它可以访问其项目之外的一些类（我使用的是 Visual Studio，所以我有两个项目）。问题是，在 dll 包含的头文件中，在 dll 的项目之外，只有函数体，如下所示：

xh

```
class x
{
    void myFunc();
} 
```

在另一个 cpp 文件中，在 dll 文件之外：

```
#include "x.h"

x::myFunc()
{
    //.....
} 
```

dll 只是获取函数的主体，所以当我编译时，我得到了很多未解析的外部符号（我很确定这是问题所在，因为我用另一个完全内置在 .h 文件中的类进行了测试，在另一个项目，没有错误）。那么我该如何解开这个谜团呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:01:17.767

导入标头只有函数签名是正常的；实际的函数体已经编译到 DLL 二进制文件中，并在链接时通过链接到实际的 DLL 来解析。

尝试的第一件事是确保您实际上链接到所述 DLL。仅包含标头是不够的，您还需要链接到二进制文件。因此，在您的项目配置中，您需要添加一个指向（例如）在编译 DLL 时（如果在 MSVC 中）与 DLL 一起创建的 .lib 文件的链接。这个 lib 文件让链接器知道如何将您通过导入标头包含的函数签名连接到 DLL 中包含的实际实现。如果您在不同的平台上，机制可能会有所不同，但概念会相似。

编辑：下一步是确保二进制文件实际上正在导出您尝试链接的符号。确保所有接口签名都通过[__declspec(dll_export) 前缀](http://msdn.microsoft.com/en-us/library/a90k134d%28v=vs.80%29.aspx)导出。通常，这包含在 IFDEF 中，以便在编译 DLL 时声明标头导出，但当该标头包含在客户端项目中时不会。接下来，您可以使用 dumpbin 检查损坏的导出名称，看看是否有任何意外。

这是您示例的修改版本，它说明了这种导出方式（注意，我没有测试这是否可以编译，对任何错别字表示歉意）：

```
#ifdef BUILDING_MYDLL
#define MYDLL_API __declspec(dllexport)
#else
#define MYDLL_API __declspec(dllimport)
#endif

class MYDLL_API x
{
    void myFunc();
} 
```

然后，您可以在编译 dll 时将配置设置为定义 BUILDING_MYDLL，而不是在编译可执行文件时。这样，函数仅在编译库 dll 时被标记为导出。现在您可以使用 MYDLL_API 标记您的公共 API 函数，并且它们应该在构建期间被导出。

请注意，dll_export、dll_import 和 declspec 都是非常特定于 MSVC 的结构。其他编译器/运行时以不同方式处理符号导出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:08:57.897

有多种方法可以在 Windows 上将 DLL 链接到您的应用程序，请查看这个现有的问题/答案： [https ://stackoverflow.com/a/2060508/1701823](https://stackoverflow.com/a/2060508/1701823)

# jdbc - DB高可用性通过jdbc连接代理？

> ID：13186771
> 
> 赞同：1
> 
> 时间：2012-11-01T22:56:50.493
> 
> 标签：jdbc, replication, transactional-replication

我需要一个高可用性的数据库系统，但我不能通过数据库集群或主/从来做到这一点。我需要一个 jdbc 代理，它知道为单个更新语句更新多个数据源。我发现 HA-JDBC 项目[http://ha-jdbc.github.com/](http://ha-jdbc.github.com/)可以做到这一点，但我想知道是否有比 HA-JDBC 类似或更好的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:26:29.867

您可以查看其他围绕 HA 功能的项目：Sequoia/C-JDBC (http://c-jdbc.ow2.org)。

但是页面上的一些链接坏了;(

# python-3.x - AttributeError：解析 XML 时

> ID：13186772
> 
> 赞同：1
> 
> 时间：2012-11-01T22:56:51.263
> 
> 标签：python-3.x, elementtree

这是我在 Python 和从 XML 文件中提取信息的第一次尝试，因此对于这个问题的新手性质表示歉意。

我想从一个 XML 文件中提取作者姓名，其中信息的结构如下：

```
<Author ValidYN="Y">
   <LastName>Duck</LastName>
    <ForeName>Donald</ForeName>
    <Initials>D</Initials>
</Author> 
```

每隔一段时间就会有一个如下所示的条目：

```
<Author ValidYN="Y">
    <CollectiveName>Some Corp</CollectiveName>
</Author> 
```

我的代码在第一个示例中运行良好，但如果遇到第二个示例，则会失败，并显示*AttributeError: 'NoneType' object has no attribute 'text'*消息。根据我对正在发生的事情的基本理解，我认为错误的出现仅仅是因为它找不到任何东西。我无法解决的是如何让它忽略第二个示例并继续寻找下一位作者。

这是代码：

```
import xml.etree.ElementTree as etree

infile = r'C:\temp\test.xml'

authors = []
tree = etree.parse(infile)
root = tree.getroot()
for elem in tree.iter(tag='Author'):
    sn = elem.find('LastName').text
    fn = elem.find('Initials').text
    authors.append(fn + ' ' + sn)
for x in authors:
    print (x) 
```

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:01:45.270

```
child = elem.find('LastName')
if child != None : sn = child.text 
```

ETC

在没有 LastName 元素的节点中，Find 返回 None 并且 None 没有 text 属性是错误告诉你的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:50:39.180

以下是解决您面临的问题的代码的样子：

```
 import xml.etree.ElementTree as etree

    infile = r'test.xml'

    authors = []
    tree = etree.parse(infile)
    root = tree.getroot()
    for elem in tree.iter(tag='Author'):
        snode = elem.find('LastName')
        if snode is not None:
            sn = snode.text
        fnode = elem.find('Initials')
        if fnode is not None:
            fn = fnode.text
        if (fnode is not None) and (snode is not None):
            authors.append(fn + ' ' + sn)
    for x in authors:
        print (x) 
```

# java - 获取选定的节点 jtree java

> ID：13186778
> 
> 赞同：0
> 
> 时间：2012-11-01T22:57:10.663
> 
> 标签：java

这是我的`JTree`

```
javax.swing.tree.DefaultMutableTreeNode treeNode1 = new javax.swing.tree.DefaultMutableTreeNode(".Net Framework");
javax.swing.tree.DefaultMutableTreeNode treeNode2 = new javax.swing.tree.DefaultMutableTreeNode("Install");
javax.swing.tree.DefaultMutableTreeNode treeNode3 = new javax.swing.tree.DefaultMutableTreeNode("V1");
treeNode2.add(treeNode3);

treeNode3 = new javax.swing.tree.DefaultMutableTreeNode("V2");
treeNode2.add(treeNode3);

treeNode3 = new javax.swing.tree.DefaultMutableTreeNode("V3");
treeNode2.add(treeNode3);

treeNode3 = new javax.swing.tree.DefaultMutableTreeNode("V4");
treeNode2.add(treeNode3);
treeNode1.add(treeNode2);

treeNode2 = new javax.swing.tree.DefaultMutableTreeNode("Repair");
treeNode3 = new javax.swing.tree.DefaultMutableTreeNode("V1");
treeNode2.add(treeNode3);

treeNode3 = new javax.swing.tree.DefaultMutableTreeNode("V2");
treeNode2.add(treeNode3);

treeNode3 = new javax.swing.tree.DefaultMutableTreeNode("V3");
treeNode2.add(treeNode3);

treeNode3 = new javax.swing.tree.DefaultMutableTreeNode("V4");
treeNode2.add(treeNode3);
treeNode1.add(treeNode2);

treeNode2 = new javax.swing.tree.DefaultMutableTreeNode("Removal");
treeNode3 = new javax.swing.tree.DefaultMutableTreeNode("Remove All");
treeNode2.add(treeNode3);
treeNode1.add(treeNode2);

jTree2.setModel(new javax.swing.tree.DefaultTreeModel(treeNode1));
jScrollPane5.setViewportView(jTree2); 
```

这是几乎可以工作的代码

```
DefaultMutableTreeNode node = (DefaultMutableTreeNode) jTree2.getLastSelectedPathComponent();

if (node == null) {
      //Nothing is selected.     
    return;
}

if (node.isLeaf()) {
    System.out.println(node);
} 
```

我希望能够做出 if 语句来说明安装节点中是否有叶节点 V1，然后执行此操作。只是不确定如何处理`if(node.equals(thisleaf)))`，`thisleaf`对象应该等于什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:20:23.163

声明一个字段

```
private DefaultMutableTreeNode v1Node; 
```

将第三行更改为

```
this.v1Node = new DefaultMutableTreeNode("V1"); 
```

并使用

```
if (node.equals(this.v1Node)) 
```

旁注：您应该通过简单地使用而不是完全限定名称来导入`javax.swing.tree.DefaultMutableTreeNode`并使您的代码更具可读性。`DefaultMutableTreeNode`您还应该选择有意义的变量名，而不是 treeNode1、jTree2 等。这些糟糕的名称会使代码非常难以理解。

# php - 剥离Unicode？字符串 php 中的连字符和空格

> ID：13186779
> 
> 赞同：0
> 
> 时间：2012-11-01T22:57:13.347
> 
> 标签：php, jquery, html, unicode

我正在尝试使用 jquery 从选择列表中获取标签值，将其写入隐藏的文本输入，然后在 php 模板中显示该值。--（无法直接访问数据中的字段，这是我的工作。）

所以我可以获取标签值，将其传递给隐藏并显示。但是标签的格式是这样的“-最新消息”我想去掉空格和连字符/减号，所以我留下了“最新消息”

通过尝试通常的功能并且它们不起作用，我突然想到，当它不起作用时，这些可能是 unicode 字符。当我使用以下内容时：

```
$mycategory = preg_replace('/^\p{Z}+|\p{Z}+$/u', '', $mycategory);
$mycategory = htmlentities($mycategory, ENT_QUOTES, "UTF-8");
$mycategory = str_replace("-", "", $mycategory);

echo '<h1>'.$mycategory.'</h1>'; 
```

第 1 行我替换了前面的 unicode 空白。返回“-最新消息”第 2 行：我将实体更改为 html 第 3 行：我摆脱了实体。但这会返回“最新消息”

所以我不能用修剪或preg_replace摆脱最后一个空间。我不知道如何摆脱它。如果我将空格与第三行的搜索词放在一起，它会破坏替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:30:40.487

好吧，，，grrr ..必须打开php :)

```
 $str = '- Latest news !*#';
 echo preg_replace('/[^[:alnum:]\s]/','',$str); 
```

# javascript - 匿名函数中JS变量的作用域是什么

> ID：13186781
> 
> 赞同：1
> 
> 时间：2012-11-01T22:57:31.147
> 
> 标签：javascript, node.js

为什么此代码返回 $products 为空？如果我在函数内部测试 $products 它确实会显示数据......但是一旦完成，我似乎无法获取数据。

```
var $products = new Array();
connection.query($sql, function(err, rows, fields) {
    if (err) throw err;
    for(i=0; i< rows.length; i++)
    {
        $products[rows[i].source_identifier] = "xyz";
    }

});
connection.end();

console.log($products); // Shows empty. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T22:58:33.447

它不会将其*返回*为空；没有`return`声明。问题是操作是**异步**的。当您的`console.log()`呼叫运行时，查询尚未完成。

在循环之后将您的`console.log()`调用移至该回调函数*内部。*（也用!!!`for`声明“i” ）`var`

使用涉及此类回调的 API 的全部意义在于应对操作是异步的这一事实。如果它们是同步的，那么设计这样的接口会很奇怪。

# function - PL DOC 源代码伪造 - 2 个问题

> ID：13186793
> 
> 赞同：2
> 
> 时间：2012-11-01T22:58:36.700
> 
> 标签：function, stored-procedures, plsql, procedure, plsqldeveloper

我正在尝试使用[PLDOC source forge](http://pldoc.sourceforge.net/maven-site/)和我的代码来生成一个带有我喜欢的评论的整洁页面。

我遇到了2个问题，任何帮助将不胜感激：

1.  我一直在使用标签 (/**, */) 来发表评论，这对函数非常有效，但不会出现在程序中。我的函数和过程是独立的，而不是在包中，并且尝试在 PROCEDURE 声明之前添加注释，只是在保存时被删除。
2.  如果我尝试使用直接从数据库（`call pldoc.bat -url jdbc:oracle:thin:@localhost:1521:ORCL -user SCOTT -password TIGER -sql SYS_OWNER.DBMS_PIPE,SYS_OWNER.DBMS_OUTPUT`）获取数据的推荐方法，它会将所有可用的功能和过程置于用户之下`SIS_OWNER`（`SIS_owner`是左侧唯一可用的链接）。我想更改它，以便可以查看列表中的所有方法。使用此方法仍然存在 1 中所述程序的问题。

如果您已经克服了这个问题，请告诉我，任何指示都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:56:58.987

我不知道#2，但是对于#1，尝试将PLDOC 注释放在过程声明之后但在第一行代码之前，因此紧跟在“IS”之后。

在声明之前添加注释将导致它在编译到数据库时被忽略并且不保存。我对包级别的注释有这个问题，并通过在包声明之后添加我的注释来解决它。这也应该适用于程序。

# php - 使用本地托管的代码连接到 MySQL 数据库

> ID：13186799
> 
> 赞同：0
> 
> 时间：2012-11-01T22:59:00.383
> 
> 标签：php, mysql, macos, database-connection, localhost

当我尝试在本地主机而不是 Web 服务器上运行工作 php 代码时，我收到连接错误。

```
Warning: mysqli::mysqli() [mysqli.mysqli]: [2002] Connection refused 
```

知道如何从我的本地机器上获取 MySQL 用户名、数据库和密码吗？我正在使用 OS X Mountain Lion 和 Apache。

我必须登录到数据库服务器并添加我的 IP 吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:04:19.583

除非您更改了默认密码，否则允许 root 连接到 localhost，这将是这样的：

```
<?php
$mysqli = new mysqli("localhost", "root", "", "");
if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}
echo $mysqli->host_info . "\n";

$mysqli = new mysqli("127.0.0.1", "user", "password", "database", 3306);
if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}

echo $mysqli->host_info . "\n";
?> 
```

您可以用 ip 替换 localhost，具体取决于您的数据库如何配置为允许连接，使用 localhost 或显式 ip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:35:42.247

如果您从服务器下载了代码并尝试制作本地副本，那么您需要更新连接参数以匹配您的本地配置。您需要根据本地设置更新用户名、密码、数据库等。您可以保留的主机名`localhost`

如果事情不起作用，请回复并添加更多关于事情如何开始的细节，例如您如何在本地设置代码......以及您尝试过的事情......

# java - Java ZipInputStream 没有读取整个 ZipEntry

> ID：13186807
> 
> 赞同：2
> 
> 时间：2012-11-01T22:59:57.923
> 
> 标签：java, xml, zipinputstream

我正在尝试从 ZIP 存档中读取 XML 文件。相关代码如下：

```
ZipInputStream zis = new ZipInputStream(is);
ZipEntry entry = zis.getNextEntry();
while(entry != null) {
    if(entry.getName().equals("plugin.xml")) {
        int size = (int)entry.getSize();
        byte[] bytes = new byte[size];
        int read = zis.read(bytes, 0, size);

        System.out.println("File size: " + size);
        System.out.println("Bytes read: " + read);
    }
} 
```

这在工作时会产生如下输出：

```
File size: 5224
Bytes read: 5224 
```

正在读取的`plugin.xml`文件没有什么特别之处，并且通过了我能找到的任何 XML 验证，但是，对 XML 文件的微小更改（删除字符、添加字符等）*有时会*导致从输入流中“读取的字节数”为小于文件大小。在这种情况下，我更改了与上述相同文件的 XML 属性的文本值，并得到以下结果：

```
File size: 5218
Bytes read: 5205 // the reader stopped early! 
```

关于哪些 XML 文件可以工作，哪些不能工作，我看不到任何模式。这似乎是完全随机的。

有没有人遇到过这样的事情？

**编辑：**忘了提及，读取`plugin.xml`文件的 Java 代码嵌入在我无法更改的现成应用程序中。我的问题是试图理解为什么它在某些情况下不接受我的 XML 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T23:02:29.660

它在哪里说`InputStream.read()`，或者它的任何实现或覆盖，填充缓冲区？检查Javadoc。实际上是`read()`返回 -1 指示 EOS 或将至少一个字节读入缓冲区。你必须*循环。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-22T21:54:46.390

如前所述，您需要使用循环。我必须解决这个确切的问题，所以我想我会发布一个例子。

```
ZipInputStream zis = new ZipInputStream(is);
ZipEntry entry = zis.getNextEntry();
while(entry != null) {
    if(entry.getName().equals("plugin.xml")) {
        int size = (int)entry.getSize();
        byte[] bytes = new byte[size];
        int read = 0;
        while (read < size) {
            read += zis.read(bytes, read, (size - read));
        }

        System.out.println("File size: " + size);
        System.out.println("Bytes read: " + read);
    }
} 
```

# php - ZF2：ZfcUser 模块的自定义用户映射器

> ID：13186809
> 
> 赞同：6
> 
> 时间：2012-11-01T23:00:08.807
> 
> 标签：php, module, config, zend-framework2, zfcuser

我在 Zend Framework 2 应用程序中添加了模块[ZfcUser](https://github.com/ZF-Commons/ZfcUser)。但是我必须使用现有的数据库表，它的列名与 ZfcUser 的默认表结构略有不同。

在[ZfcUser wiki 页面](https://github.com/ZF-Commons/ZfcUser/wiki/ZfcUser-Concepts-and-Goals)中，它说如果我的模型不符合提供的接口，则可以使用自定义映射器。由于我的数据库表不同于默认表，因此我的用户实体类也不同于标准的 ZfcUser\Entity\User。*但是我可以通过覆盖文件config/autoload/zfcuser.global.php*中的设置来告诉 ZfcUser 轻松使用我自己的类：

```
'user_entity_class' => 'MyApp\Entity\MyUser', 
```

但到目前为止，我还没有找到一种简单的方法来告诉 ZfcUser 使用我的映射器类。

我只发现映射器是由 ZfcUser\Module::getServiceConfig() 创建的，在其中，我可以看到映射器是从其工厂函数返回的：

```
// ...
public function getServiceConfig()
{
    return array(
    // ...
        'factories' => array(
            // ...
            'zfcuser_user_mapper' => function ($sm) {
                $options = $sm->get('zfcuser_module_options');
                $mapper = new Mapper\User();
                $mapper->setDbAdapter($sm->get('zfcuser_zend_db_adapter'));
                $entityClass = $options->getUserEntityClass();
                $mapper->setEntityPrototype(new $entityClass);
                $mapper->setHydrator(new Mapper\UserHydrator());
                return $mapper;
            },
            // ... 
```

有没有办法让 ZfcUser 使用我的自定义用户映射器类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:21:00.590

建立自己的服务工厂`zfcuser_user_mapper`，它就会被使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T02:58:29.623

我和你有同样的问题，但最后设法登录到我的应用程序。我听从了 Rob 的建议，在我现有的用户模块中创建了自己的服务工厂。不幸的是，伯恩哈德也在现场。您必须深入研究 ZfcUser 源代码才能使其正常工作。我现在正在处理的项目有一个 MSSQL 服务器，我必须说处理这些事情很难。我最终只调整了 ZfcUser 源中的一个函数以使登录页面正常工作。

我只需要当前应用程序的登录功能，但即将到来的项目更多的是角色驱动。我一直在寻找不会太复杂而无法快速连接的东西，同时为未来提供更多选择和可能性。

这是我现在所做的以及我学到的东西：

我将 Entity 和 Mapper 文件夹从 ZfcUser 目录复制到我现有的 b2bUser（我的模块）文件夹中。一切……甚至是 Mapper 中的 Exception 文件夹。这可能没有必要，但我没有心情弄清楚依赖关系。

在 zfcuser.global.php 文件中，我的活动配置如下所示：

```
'user_entity_class' => 'b2bUser\Entity\User',
'enable_registration' => false,
'enable_username' => true,
'auth_identity_fields' => array( 'username' ),
'login_redirect_route' => 'home',
'enable_user_state' => false, 
```

我将其余设置保留为默认设置。我从身份验证中删除了电子邮件选项，因为他们不会使用电子邮件地址登录系统。那个`user_entity_class`是我抄过来的...

Module.php (b2bUser) 将以下内容复制到服务管理器配置中：

```
'zfcuser_user_mapper' => function ($sm) {
    $mapper = new Mapper\User();
    $mapper->setDbAdapter($sm->get('Zend\Db\Adapter\Adapter'));
    $mapper->setEntityPrototype(new Entity\User());
    $mapper->setHydrator(new Mapper\UserHydrator());
    return $mapper;
}, 
```

设置完成后，我更改了 Entity 和 Mapper 中文件的命名空间等，以反映他们的新家。更改了实体和接口以反映我自己的数据结构。我对 Mapper 文件做了同样的事情，并确保 Hydrator 文件中的变量名与我的数据库列名相同。

我将 AbstractDbMapper 文件留在原处。但这是我稍微调整的文件。

这是我的样子。SQLSRV 驱动程序充满了维尼，一直在抱怨一个对象或一个字符串......

```
protected function select(Select $select, $entityPrototype = null, HydratorInterface $hydrator = null)
{
    $this->initialize();
    $selectString = $this->getSlaveSql()->getSqlStringForSqlObject($select);
    $stmt = $this->getDbAdapter()->driver->createStatement($selectString);
    $stmt->prepare();
    $res = $stmt->execute($stmt);

    $resultSet = new HydratingResultSet($hydrator ?: $this->getHydrator(),
            $entityPrototype ?: $this->getEntityPrototype());
    $resultSet->initialize($res);
    return $resultSet;
} 
```

就是这样。我希望它至少可以帮助某人在他们自己的系统上启动并运行它。我不会像这样离开我的，但让它发挥作用是一项使命。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T16:32:52.747

目前似乎没有简单的方法可以在不修改 ZfcUser 源的情况下更改表结构。Github 上有一个 pull request 应该可以解决这个问题：

[https://github.com/ZF-Commons/ZfcUser/pull/174](https://github.com/ZF-Commons/ZfcUser/pull/174)

# emacs - EMACS：扩展/扩展区域，使其包含整行

> ID：13186811
> 
> 赞同：2
> 
> 时间：2012-11-01T23:00:21.537
> 
> 标签：emacs, line, extend, expand, region

我的初始化文件中有这个简洁的功能：

```
(defun comment-or-uncomment-region-or-line()
  "Comments or uncomments the region or the current line if there's no active region."
  (interactive)
  (let (beg end)
    (if (region-active-p)
      (setq beg (region-beginning) end (region-end))
      (setq beg (line-beginning-position) end (line-end-position))
    )
    (comment-or-uncomment-region beg end)
    (next-line)
  )
) 
```

但是，我不喜欢的是以下情况：

```
Lorem ipsum dolor sit amet, consec|tetur adipisicing elit, sed do eiusmod tempor
incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure
dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
Excepteur sint occaecat cupidatat non proi|dent, sunt in culpa qui officia deserunt
mollit anim id est laborum. 
```

**注意：** | 表示区域的点或标记。

评论该区域将导致：

```
Lorem ipsum dolor sit amet, consec// tetur adipisicing elit, sed do eiusmod tempor
// incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
// exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure
// dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
// Excepteur sint occaecat cupidatat non proi
// dent, sunt in culpa qui officia deserunt
// mollit anim id est laborum. 
```

相反，我希望它很简单：

```
// Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
// incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
// exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure
// dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
// Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt
// mollit anim id est laborum. 
```

换句话说，我希望该区域扩展/延伸以包含整条线（第一条和最后一条），而不管标记和点位于第一条和最后一条线的中间。

有什么方法可以修改这个函数，使其行为相应？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T23:11:20.133

调用`line-beginning-position`并`line-end-position`在实际将点移动到所需位置后：

```
(defun comment-or-uncomment-region-or-line()
  "Comments or uncomments the region or the current line if there's no active region."
  (interactive)
  (let (beg end)
    (if (region-active-p)
        (progn
          (setq beg (region-beginning) end (region-end))
          (save-excursion
            (setq beg (progn (goto-char beg) (line-beginning-position))
                  end (progn (goto-char end) (line-end-position)))))
      (setq beg (line-beginning-position)
            end (line-end-position)))
    (comment-or-uncomment-region beg end)
    (next-line))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T23:06:10.580

一种方法是创建一个`function`，它返回`:my-region-bol`一个点并传递它`(region-beginning)`，类似地`point-at-eol-of-point`并在区域处于活动状态时使用它们。

我赶紧试了下，剩下的你可以填写。

```
(defun :my-region-bol () (interactive) 
  (if (region-active-p)
      (save-excursion
        (goto-char (region-beginning))
        (point-at-bol))
    nil))

(defun comment-or-uncomment-region-or-line()
  "Comments or uncomments the region or the current line if there's no active region."
  (interactive)
  (let (beg end)
    (if (region-active-p)
      (setq beg (:my-region-bol) end (region-end))
      (setq beg (line-beginning-position) end (line-end-position))
    )
    (comment-or-uncomment-region beg end)
    (next-line)
  )
) 
```

**编辑**

以上可能不适合，因为第一次调用改变了点和标记。我可以使用以下内容，但它会更改您可能想要也可能不想要的区域：

```
(defun :my-bol-at (point) (interactive) 
  (save-excursion
    (goto-char point)
    (point-at-bol)))

(defun :my-eol-at (point) (interactive) 
  (save-excursion
    (goto-char point)
    (point-at-eol)))

(defun :my-expand-region-to-whole-line () (interactive)
  (when (region-active-p)
    (let ((beg (region-beginning)) (end (region-end)))
      (goto-char (:my-bol-at beg))
      (set-mark (point))
      (goto-char (:my-eol-at end))))) 
```

# java - 读取文本文件并将内容转储到 JTextArea 的最有效方法

> ID：13186818
> 
> 赞同：2
> 
> 时间：2012-11-01T23:01:02.533
> 
> 标签：java, swing, jtextarea, java-io, jtextcomponent

我很好奇最有效的方法是读取文本文件（不要担心大小，它相当小，所以`java.io`很好），然后将其内容转储到一个`JTextArea`用于显示的文件中。

例如，我可以以某种方式在单个字符串中使用整个文件，然后使用`JTextArea.setText`它来显示它，还是应该逐行或字节数组读取并将它们填充到 StringBuffer 中，然后将文本区域设置为那个？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T23:08:07.290

您可以使用[`JTextComponent.read(Reader, Object)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#read%28java.io.Reader,%20java.lang.Object%29)并将其传递给[`FileReader`](http://docs.oracle.com/javase/6/docs/api/java/io/FileReader.html). 只需这样做：

**Java 7** -- 尝试资源块

```
try (FileReader reader = new FileReader("myfile.txt")) {
    textArea.read(reader, null);
} 
```

**Java 6** ——try-finally 块

```
FileReader reader = null;
try {
    reader = new FileReader("myfile.txt");
    textArea.read(reader, null);
} finally {
    if (reader != null) {
        reader.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T23:08:46.040

`JTextArea`您可以允许组件使用 a`Reader`来读取文件，而不是读取文件的全部内容`InputStream`：

```
FileReader fr = new FileReader(fileName);
textArea.read(fr, null); 
```

# xcode - 在 Xcode 中禁用 AutoLayout 会在我运行时停止显示任何内容

> ID：13186826
> 
> 赞同：2
> 
> 时间：2012-11-01T23:01:48.133
> 
> 标签：xcode, autolayout

我禁用了 autoLayout，因为我有太多按钮，Xcode 会一直崩溃。但是现在当我运行时什么都不会显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:28:07.747

首先，很明显，禁用自动布局并不是导致您的视图不显示的原因。其次，如果您可以从控制台添加崩溃日志，那将非常有帮助。如果我们知道您看到了什么异常，我们将更容易提供帮助。

您可以检查以下几点： 1\. 连接到 IBOutlets 和 IBActions 的所有子视图是否仍连接到现有方法和变量？转到“Connections Inspector”并确保没有小“x”，这意味着您创建的连接现在已断开。2\. 您的视图是否与文件所有者相关联？3.您是否更改了您的 AppDelegate 文件？

# scala - 将尚未保存的对象添加到 MappedManyToMany

> ID：13186829
> 
> 赞同：0
> 
> 时间：2012-11-01T23:02:17.557
> 
> 标签：scala, many-to-many, lift, mapper

我正在从事的项目遇到了一些不良的 Mapper 行为。除非对象已经保存在数据库中，否则您似乎无法将对象添加到多对多关联中（更具体地说，您无法从多对多关联中检索一些未保存的对象）。

例如，我们有 M:N 关系中的员工和部门。我们实例化 2 个部门：会计和安全。会计在员工获救之前获得员工，安全部门在员工获救后获得员工。

```
object Employee extends Employee with LongKeyedMetaMapper[Employee]
class Employee extends LongKeyedMapper[Employee] with IdPK {
  def getSingleton = Employee
  object name extends MappedString(this, 20)
  override def toString = name.get
}

object Department extends Department with LongKeyedMetaMapper[Department]
class Department extends LongKeyedMapper[Department] with ManyToMany with IdPK {
  def getSingleton = Department
  object employees extends MappedManyToMany(
    EmployeeDepartment,
    EmployeeDepartment.department,
    EmployeeDepartment.employee,
    Employee)
}

/* Many-to-Many association record */
object EmployeeDepartment extends EmployeeDepartment with LongKeyedMetaMapper[EmployeeDepartment]
class EmployeeDepartment extends LongKeyedMapper[EmployeeDepartment] with IdPK {
  def getSingleton = EmployeeDepartment

  object employee extends MappedLongForeignKey(this, Employee)
  object department extends MappedLongForeignKey(this, Department)
}

object Company extends App {
  DB.defineConnectionManager(DefaultConnectionIdentifier, myDBVendor)

  val accounting = Department.create
  val security = Department.create

  accounting.employees ++= Seq(
    Employee.create.name("Fred"),
    Employee.create.name("Steve"))

  security.employees ++= Seq(
    Employee.create.name("Dave"),
    Employee.create.name("Sonia")) map
    {_.saveMe()}

  accounting.employees.toList map println; println
  security.employees.toList map println
} 
```

## 输出

```
弗雷德
弗雷德

戴夫
索尼娅

```

！！！

会计的员工都变成了弗雷德！问题的规模相似：添加 10 个尚未保存的实体以`accounting.employees`在访问时产生 10 个对 Fred 的引用。

这似乎是一个错误，或者是对 Mapper 有用性的严重限制。是否有不涉及任何一种行为的解决方法：

*   使用模型外部的一些数据结构来跟踪实体和关联，直到您准备好保存，或者
*   在创建时保存实体，如果用户“改变主意”关于保存，则发出删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:22:51.173

找出造成这种明显不当行为的具体原因。将元素添加到多对多关联会调用以下算法：

```
在“this”连接列表中查找“other”元素。
如果没有找到
  创建加入并添加到加入列表
别的
  添加到加入列表

```

问题在于查找标准。在 ManyToMany.scala (Lift 2.4) 中指定，方法`isJoinForChild`将[`is`](http://scala-tools.org/mvnsites/liftweb-2.4/#net.liftweb.mapper.MappedField)关联外键（构造函数参数 3）与“其他”元素 `MappedManyToMany`的主键（也是）进行比较。`is`

由于每个未保存实体`with IdPK`的 id=-1，“this”连接列表中的第一个元素满足查找条件，然后重复添加。

这回答了我最初的问题：可以通过修改`isJoinForChild`. 该方法不是简单地比较键，而是执行类似于：

```
如果 other.is > -1
  定期比较
别的
  实例比较

```

......或类似的东西。因为`isJoinForChild`这可以通过使用特征`protected`覆盖来非侵入性地完成。`isJoinForChild`

# python - 我正在制作一个三角形类查找器，但我被卡住了

> ID：13186833
> 
> 赞同：0
> 
> 时间：2012-11-01T23:02:44.223
> 
> 标签：python, geometry

我正在编写一个程序，可以让你输入三角形的三个角或边，它会告诉你它是等边的、等腰的等等。我现在不担心剩下的，但我被困在它的等边部分. 这是我的代码：

```
def idtri():
    print("\nDo you have all three sides, or al three angles?")
    print("(1) Sides")
    print("(2) Angles")
    choice = input()
    if choice == 1:
        print("\nType in the lengths of all of the sides.")
        t1 = input("1: ")
        t2 = input("2: ")
        t3 = input("3: ")
        print("Your triangle is an equalateral triangle.")
        menu()
    elif choice == 2:
        pass

 idtri() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:27:57.513

首先要注意的是，为了将三角形识别为不等边、等腰或等边，您拥有的三个值是角度还是边长都没有关系，过程是：

> 如果三个值都相同，则三角形是等边的；否则，如果任何两个值相同，则三角形是等腰三角形；否则，三角形是不等边三角形。

因此，您可以编写一个简单的函数来根据提供的相等值的数量返回类型：

```
id_triangle = lambda a, b, c: {0: 'scalene', 1: 'isoceles', 3: 'equilateral'}\
                              [(a == b) + (a == c) + (b == c)] 
```

然后从您的交互式脚本中调用它，例如：

```
print('Your triangle is %s.' % id_triangle(t1, t2, t3)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-31T20:28:04.633

您还可以使用 Python 集合中的计数器：

```
from collections import Counter

def idtri():
    cnt = Counter()
    side1 = input('Enter length of first side: ')
    cnt[side1] += 1
    side2 = input('Enter length of second side: ')
    cnt[side2] += 1
    side3 = input('Enter length of third side: ')
    cnt[side3] += 1

    if 3 in cnt.values():
        print('Equilateral Triangle')
    elif 2 in cnt.values():
        print('Isosceles Triangle')
    else:
        print('Scalene Triangle')

if __name__ == "__main__":
    idtri() 
```

# android - 用滚动视图替换两个片段时出错

> ID：13186836
> 
> 赞同：3
> 
> 时间：2012-11-01T23:03:09.240
> 
> 标签：android, android-fragments, scrollview

我有 2 个片段，它们都有`Scrollviews`，我从 a`ListView`中进行选择，并将第一个片段替换为具有滚动视图的另一个片段。

问题是，当我尝试用新的片段替换片段时，我收到一条错误消息，说明`ScrollView can only contain one direct child`它是做什么的，它有一个`RelativeLayout`包含所有内容的片段。

如果我将 ScrollView 从第一个片段视图中取出，我不会收到错误并且片段被替换得很好，但我需要第一个片段中的滚动视图。

是什么导致了这个问题，替换片段不会完全删除视图吗？

堆栈跟踪：

```
11-01 18:45:00.895: E/AndroidRuntime(3833): FATAL EXCEPTION: main
11-01 18:45:00.895: E/AndroidRuntime(3833): java.lang.IllegalStateException: ScrollView can host only one direct child
11-01 18:45:00.895: E/AndroidRuntime(3833):     at android.widget.ScrollView.addView(ScrollView.java:229)
11-01 18:45:00.895: E/AndroidRuntime(3833):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:840)
11-01 18:45:00.895: E/AndroidRuntime(3833):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1035)
11-01 18:45:00.895: E/AndroidRuntime(3833):     at android.app.BackStackRecord.run(BackStackRecord.java:635)
11-01 18:45:00.895: E/AndroidRuntime(3833):     at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1397)
11-01 18:45:00.895: E/AndroidRuntime(3833):     at android.app.FragmentManagerImpl$1.run(FragmentManager.java:426)
11-01 18:45:00.895: E/AndroidRuntime(3833):     at android.os.Handler.handleCallback(Handler.java:615)
11-01 18:45:00.895: E/AndroidRuntime(3833):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-01 18:45:00.895: E/AndroidRuntime(3833):     at android.os.Looper.loop(Looper.java:137)
11-01 18:45:00.895: E/AndroidRuntime(3833):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-01 18:45:00.895: E/AndroidRuntime(3833):     at java.lang.reflect.Method.invokeNative(Native Method)
11-01 18:45:00.895: E/AndroidRuntime(3833):     at java.lang.reflect.Method.invoke(Method.java:511)
11-01 18:45:00.895: E/AndroidRuntime(3833):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-01 18:45:00.895: E/AndroidRuntime(3833):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-01 18:45:00.895: E/AndroidRuntime(3833):     at dalvik.system.NativeStart.main(Native Method) 
```

这就是我替换片段的方式

```
ft.replace(R.id.frameTwo, individual);
ft.addToBackStack(null).commit(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T22:49:27.697

发现问题显然你不能有一个滚动视图作为你的基础视图，我把它包装在 a 中`RelativeLayout`，它现在可以工作了

# visual-c++ - VC++ 2010 vs G++ unsigned long long 溢出差异

> ID：13186842
> 
> 赞同：0
> 
> 时间：2012-11-01T23:03:33.797
> 
> 标签：visual-c++, g++

**更新** 嗯，我有一个更新。显然，我的巨大数组“unsigned long long fhash[105][100555]”没有在 vC++ 中自动初始化为零......当我这样做 = {0} 时它起作用了。它不应该自动初始化吗？

我正在做竞赛编程，我通常在学校/ideone 等使用 g++ 编译......但我必须使用 VC++ 2010 编译器。

也就是说，我有代码来做多项式滚动哈希（就像在 Rabin-Karp 中使用的那样），但是这些编译器上的溢出是否不同？

代码在这里： http: [//pastebin.com/UFdpwHCt](http://pastebin.com/UFdpwHCt)（散列在第 67 行左右）

输出在这里：http: [//i.imgur.com/KCcvI.png](http://i.imgur.com/KCcvI.png)

为什么“bhash”在两个编译器之间是相等的，而“fhash”却不是？它们使用相同的方法进行散列...在 G++-3 输出中，“fhash”和“bhash”输出是相同的（它们应该是），但在 VC++-10 输出中，“fhash”和“bhash” “不一样...

我正在使用溢出让它自然地修改自己，以加快执行速度，而不是用大素数显式修改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:05:51.570

不是问题。问题是它没有被初始化为零。使用 memset 修复它。

# php - 如何拒绝使用 PHP 上传相同的图像

> ID：13186843
> 
> 赞同：0
> 
> 时间：2012-11-01T23:03:36.027
> 
> 标签：php, image, upload, directory, duplicates

我想创建一种通过 Imagetype 或类似变量搜索目录的方法。在将图像上传到该目录之前。

我的目标是使用 php 搜索该目录中的图像 BLOB，如果任何结果匹配（意味着同一图像将重复上传）返回“文件已上传”。

这仅适用于图像文件...

这是我想我也可以添加的代码..

```
// Elements (values) of $_FILES['ImageFile'] array
//let's access these values by using their index position
$ImageName      = str_replace(' ','-',strtolower($_FILES['ImageFile']['name'])); 
$ImageSize      = $_FILES['ImageFile']['size']; // Obtain original image size
$TempSrc        = $_FILES['ImageFile']['tmp_name']; // Tmp name of image file stored in PHP tmp folder
$ImageType      = $_FILES['ImageFile']['type']; //Obtain file type, returns "image/png", image/jpeg, text/plain etc.

//Let's use $ImageType variable to check wheather uploaded file is supported.
//We use PHP SWITCH statement to check valid image format, PHP SWITCH is similar to IF/ELSE statements 
//suitable if we want to compare the a variable with many different values
switch(strtolower($ImageType))
{
    case 'image/png':
        $CreatedImage =  imagecreatefrompng($_FILES['ImageFile']['tmp_name']);
        break;
    case 'image/gif':
        $CreatedImage =  imagecreatefromgif($_FILES['ImageFile']['tmp_name']);
        break;          
    case 'image/jpeg':
    case 'image/pjpeg':
        $CreatedImage = imagecreatefromjpeg($_FILES['ImageFile']['tmp_name']);
        break;
    default:
        die('Unsupported File, Please Check File And Try Again!'); //output error and exit
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:27:32.240

除其他外，这些必须在这样的系统中考虑：

1.  用户可以上传相同的文件名，但内容不同（警告、更新、替换、重复？）
2.  用户可以上传相同的文件内容，但使用不同的名称（警告、更新、替换、重复？）

在几年前我必须设计的系统中，上传的文件只能在同一用户上替换，不同的用户可以上传完全相同的文件名或内容（它必须链接到现有文件名以避免重复数据)，但如果内容不同，则该文件必须以完全相同的名称存在两次（分配给两个不同的用户）。

Db 表看起来像：

```
CREATE TABLE user_files (
   id INT UNSIGNED NOT NULL PRIMARY KEY,
   user_id INT UNSIGNED NOT NULL,
   ...   -- other fields
   filename VARCHAR(256) NOT NULL,  -- the original file name
   file_sha VARCHAR(40) NOT NULL,   -- the content SHA1
   file_md5 VARCHAR(16) NOT NULL,   -- the content MD5
   file_lnk VARCHAR(1024) NOT NULL, -- uniqid(sha1(originalFilename)) *
   ...   --- other fields
) 
```

**[*]**该`file_lnk`字段是服务器上的目标文件，包括基于一些启发式计算的路径

基本上，我在上传的文件上使用**和**（仍然直接在上传临时文件中）并在数据库中查找上传的文件；从数据库中查询SHA1 或当前用户 ID 和文件名（即：）以检查任何匹配，然后使用算法循环遍历结果集以检查最佳匹配结果：[`sha1_file`](http://php.net/manual/en/function.sha1-file.php) **[`md5_file`](http://php.net/manual/en/function.md5-file.php)`SELECT ... WHERE file_sha = <computed_sha1> OR (user_id = <current_uid> AND filename = <uploaded_filename>)`**

 ***   如果 SHA1 匹配任何内容，则内容可能已经上传，然后还会比较 MD5 字段。
    *   如果文件属于同一用户（相同`user_id`），则`filename`仅在必要时更新
    *   在任何其他情况下，文件内容将被链接，并在数据库中为现有内容创建一个新行（相同`file_lnk`）
*   如果`user_id`and`filename`相同，则上传相同的文件名
    *   如果相同的文件内容与另一个用户链接，则会创建一个新行，生成一个新的`file_lnk`和更新的`file_sha`and `file_md5`。
    *   在任何其他情况下，文件内容已替换为此新内容（`file_lnk`仅替换实际文件）
*   在任何其他情况下，都会创建一个新文件和数据库表行**

# c# - 读取从 C# 客户端发送的 ObjectInputStream 时出现“StreamCorruptedException：无效的流标头”

> ID：13186848
> 
> 赞同：3
> 
> 时间：2012-11-01T23:04:07.373
> 
> 标签：c#, java, stream

**问题**

我正在尝试从 C# 客户端向此 Java 服务器发送 protobuf 消息，但出现此异常：

```
java.io.StreamCorruptedException: invalid stream header: 0A290A08 
java.io.StreamCorruptedException: invalid stream header: 0A290A08
    at java.io.ObjectInputStream.readStreamHeader(Unknown Source)
    at java.io.ObjectInputStream.<init>(Unknown Source) 
```

老实说，我有点不知所措。任何帮助表示赞赏。谢谢！

*   **Java 服务器**

```
 public ControllerThread(Socket s){
    this.s = s; try {

        this.objectInputStream = new ObjectInputStream(s.getInputStream());
        byte size = objectInputStream.readByte();System.out.println("Server: BYTES SIZE:" +     size);
        byte[] bytes = new byte[size];
        objectInputStream.readFully(bytes);
        AddressBook adb = AddressBook.parseFrom(bytes);
        System.out.println("Server: Addressbook:" + adb.getPersonCount());

    } catch (IOException e) { 
        System.out.println("Server: BufferedReader oder PrintWriter von ThermoClient konnte nicht erstellt werden");
        e.printStackTrace(); } 
        } } 
```

**C# 代码**

```
public AddressBook InitializeAdressBook()
{
    Person newContact = new Person();

    AddressBook addressBookBuilder = new AddressBook();
    Person john = new Person();
    //john.id=1234;
    john.name="John Doe";
    john.email="jdoe@example.com";
    Person.PhoneNumber nr = new Person.PhoneNumber();
    nr.number="5554321";
    john.phone.Add(nr);
    addressBookBuilder.person.Add(john);
    TextBox.Text += ("Client: Initialisiert? " + addressBookBuilder.ToString()) + "\t" + "\n";
    TextBox.Text += " Erster Person " + addressBookBuilder.person.First().name + "\t" + "\n";

    return addressBookBuilder; 
} 
```

**c# 输出流**

```
 public void SendMessage(Stream ns, byte[] msg)
    {
        byte size = (byte)msg.Length;

        try
        {
            ns.WriteByte(size);
            ns.Write(msg, 0, msg.Length);
            ns.Flush();
            ns.Close();
        }
        catch (ArgumentNullException ane)
        {
            TextBox.Text += "ArgumentNullException : {0}" + ane.ToString();
        }
        catch (Exception e)
        {
            TextBox.Text += ("Unexpected exception : {0}" + e.ToString());
        }

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T20:24:13.947

**tldr;** 问题是使用`ObjectInputStream (Java)`which*仅适用*于`ObjectOutputStream (Java)`. 在这种情况下，`StreamCorruptedException`正在生成 ，因为流被赋予了*不是*由 生成的*无效*数据。*`ObjectOutputStream (Java)`*

 *相反，用于`DataInputStream (Java)`读取由`BinaryWriter (C#)`. 这两个都只支持“原始”类型。只要使用[正确](https://stackoverflow.com/questions/1540251/binarywriter-endian-issue)*的*字节顺序并*[根据](http://en.wikipedia.org/wiki/Endianness)*需要执行*[符号填充](http://darksleep.com/player/JavaAndUnsignedTypes.html)*：整数、浮点数、双精度数（但不是小数）和字节数组都可以通过这种方式安全地发送。

[`ObjectInputStream (Java)`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html)：

> ObjectInputStream 反序列化**以前使用 ObjectOutputStream [in Java] 编写的原始数据和对象。**

[`DataInputSteam (Java)`](http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html)：

> 数据输入流允许应用程序从底层输入流中**读取原始 [..] 类型..**

[`BinaryWriter (C#)`](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)：

> **以二进制形式将原始类型写入**流，并支持以特定编码写入字符串。

* * *

笔记：

*   [DataInputSteam (Java) 是 big-endian](https://stackoverflow.com/questions/5862023/little-endian-datainputstream)，但[BinaryWriter (C#) 必须转换为 big-endian](https://stackoverflow.com/questions/1540251/binarywriter-endian-issue)。
*   `char/character`传输、`short`、`int`、`long`、`float`和数据类型时没有任何问题（除了字节顺序） ，`double`因为它们在 C# 和 Java 中具有相同的带符号性质和按位表示。
*   `byte (Java, signed)`vs可能会出现签名问题`byte (C#, unsigned)`。值得庆幸的是，如果给定适当的.ProtocolBuffer*将自动处理此问题*`byte[] (Java or C#)`。
*   由于细微的编码差异，字符串可以提供额外的乐趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:19:50.450

因此，使用此 c# OutputStream 方法和**DataInputStream** ( Java) 而不是 ObjectOutputSteam 它可以正常工作

```
 public void SendEndianBinaryMsg(Stream ns, byte[] msg)
    {
        byte size = (byte)msg.Length;

        try
        {

            EndianBinaryWriter writer = new EndianBinaryWriter(EndianBitConverter.Big, ns);
            writer.Write(size); 
            writer.Write(msg); 
            writer.Flush();
            ns.Close();
        }
        catch (ArgumentNullException ane)
        {
            TextBox.Text += "ArgumentNullException : {0}" + ane.ToString();
        }
        catch (Exception e)
        {
            TextBox.Text += ("Unexpected exception : {0}" + e.ToString());
        }

    } 
```

**笔记：**

我从[MiscUtil得到](http://www.yoda.arachsys.com/csharp/miscutil/)**EndianBinaryWriter**和**EndianBitConverter**。*

# git - gitignore 忽略 .emacs.d 即使有 !.emacs.d 异常

> ID：13186850
> 
> 赞同：1
> 
> 时间：2012-11-01T23:04:23.683
> 
> 标签：git

这`.gitignore`不忽略`.emacs.d`

```
.*
!.emacs.d 
```

但以下**确实**忽略了它：

```
*  <- only change
.*
!.emacs.d 
```

为什么？

这是与`git-1.7.10-x86_64`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T08:48:15.903

我怀疑它`*`与文件所在的当前目录匹配`.emacs.d`。
如果一个目录被忽略，git 根本不会往里面看（包括否定规则例外）。

有关该行为的更多信息，请参见：

*   “[排除规则实际上是](https://stackoverflow.com/a/3001967/6309)[如何`gitignore`](https://stackoverflow.com/a/3001967/6309)运作的？ ”
*   “[`.gitignore`排除文件夹但包含特定子文件夹](https://stackoverflow.com/a/5534865/6309)”

> 如果你 exclude `aDirectory/`，那么它下面的所有东西都会被排除（即使后来的一些否定排除模式（“unignore”）可能匹配下面的东西`aDirectory/`）。

[OP user273158](https://stackoverflow.com/users/283296/user273158)询问：

> 然后我如何排除给定路径（例如我的主目录）中的所有文件和目录（隐藏或不隐藏），除了`.emacs.d`（和其他例外）

我想这应该会更好：

```
./*
!/.emacs.d 
```

# objective-c - NSTextField 标签未更新

> ID：13186857
> 
> 赞同：0
> 
> 时间：2012-11-01T23:04:59.873
> 
> 标签：objective-c

**由于这个简单的问题**，我会很短：

（这是一个基于文档的应用程序，我将***只提供我******遇到问题***的代码）

。H ：

```
#import <Cocoa/Cocoa.h>

@interface Document : NSDocument {
    IBOutlet NSTextField *someText;
} 
```

.m：

```
- (id)init
{
    self = [super init];
    if (self) {

        //Some initialization..

        [someText setStringValue:@"Downloading data..."]; //This is not updating !

        //Some others..

    }
    return self;
} 
```

***该标签没有更新，但为什么？这似乎是一个非常愚蠢的问题，但我无法弄清楚我做错了什么..***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:20:32.017

当 init 方法运行时，出口将不会被连接。您需要将依赖于现有 nib 对象的代码移动到`awakeFromNib`.

# jquery - Qtip2 一个显示大量数据的工具提示 - 如果可能的话，希望将其保留在源视图之外（CakePHP、jQuery、Qtip2）

> ID：13186860
> 
> 赞同：0
> 
> 时间：2012-11-01T23:05:19.643
> 
> 标签：jquery, tooltip, cakephp-2.0, qtip2

我有一个 php 页面，它在屏幕上放置了 X 个行星图像，然后为每个行星提供了一个鼠标悬停工具提示，其中将包含与行星相关的信息。如果可能的话，我想做的不是将我的页面源与所有工具提示数据混在一起。我希望它以某种方式隐藏起来。

在这里，我创建了一个图像标签，其中包含我的行星数据的 json 编码数组（它被放置在我的 cakePHP 控制器对象的会话中）。

```
<?php
    foreach ($game['Planet'] as $planet) {
        echo $this->Html->image('../img/planet/' . $planet['planet_image_file'] .'.png', 
                array('class' => 'planet_img planet_' . $planet['id'], 
                    'id' => 'planet_' . $planet['id'], 
                    'alt' => $planet['planet_name'], 
                    'data-planet' => json_encode(array('planet_name' => $planet['planet_name'],'planet_type' => $planet['planet_type']));
    }

?> 
```

（目前只有两个领域，但未来还会有大约 30 个）

这是我创建 Qtip2 工具提示的 jQuery：

```
$(document).ready(function(){
   $('.planet_img').each(function(){
     $(this).qtip({
         content: $(this).data('planet').planet_name,
         position: {
             my: 'top left',
             at: 'right top'
         }
     });
   })
}); 
```

因此，正如您所看到的，目前，我只是将 Qtip 的内容设置为来自 planet-info JSON 数组的字段之一。最终，我将构建一个格式良好的 div 标签，其中包含所有行星数据和 CSS 样式......

有没有更好的方法来做到这一点？我正在考虑让 Qtip 通过 Ajax 调用获取其内容，但是将有成千上万的用户*不断地*在数千个星球上移动鼠标，我只能想象这将对我的 MySQL 后端造成巨大压力。

让 Qtip 从会话中获取信息，我已经在哪里存储了行星详细信息，以及 PHP 页面从哪里获取信息呢？如果这是可行的，那么我目前无法看到如何，并且需要轻推。

基本上，我愿意在这里提出建议和建议，否则我显然会以最混乱的方式结束！

# xml - 提取具有声明的命名空间但没有前缀的节点的值

> ID：13186862
> 
> 赞同：2
> 
> 时间：2012-11-01T23:05:38.653
> 
> 标签：xml, xslt, xpath, namespaces, xslt-1.0

我有以下 xml 文件：

```
<root_tag>
<tag1>
    <tag1_1>A</tag1_1>
    <tag1_2>B</tag1_2>
    <tag1_3>C</tag1_3>
</tag1>
<tag2>
    <tag2_1>D</tag2_1>
    <tag2_2>
        <elem xmlns="http://a.b.com/sample">
            <elem_1>E</elem_1>
            <elem_2>F</elem_2>
        </elem>
    </tag2_2>
</tag2></root_tag> 
```

和 xslt 模板：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="xml" version="1.0" indent="yes"/>
<xsl:strip-space elements="*"/>
<xsl:template match="/">
    <NODE>
        <node1>
            <xsl:value-of select="/root_tag/tag1/tag1_2"/>
        </node1>
        <node2>
            <xsl:value-of select="/root_tag/tag2/tag2_1"/>
        </node2>
        <node3>
            <xsl:value-of select="/root_tag/tag2/tag2_2/child::*[local-name(.) = 'elem']/child::*[local-name(.) = 'elem_1']"/>
        </node3>
        <xsl:variable name="A" select="namespace-uri(/root_tag/tag2/tag2_2/child::*[local-name(.) = 'elem'])"/>
        <node4>    
            <xsl:value-of select="$A"/>
        </node4>
        <node5>
            <!-- some code here -->
        </node5>
    </NODE>
</xsl:template> 
```

输出是：

```
<NODE>
    <node1>B</node1>
    <node2>D</node2>
    <node3>E</node3>
    <node4>http://a.b.com/sample</node4>
    <node5></node5>
</NODE> 
```

有没有办法在 node5 中获取**/root_tag/tag2/tag2_2/elem/elem_1**的值而不使用像 node3 中的 xpath？存储 elem 命名空间的变量 A 可以以某种方式用于此目的吗？

我还设法通过在 **xsl:stylesheet标记中添加****xmlns:a_1="http://abcom/sample"**并使用 xpath **/root_tag/tag2/tag2_2/a_1:elem/a_1:elem_1 来提取信息**，但这只是涵盖了我提前知道命名空间的情况。

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:32:05.353

很不幸的是，不行。更短的 XPath：

```
/root_tag/tag2/tag2_2/*[local-name(.) = 'elem']/*[local-name(.) = 'elem_1'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:03:54.287

**`xxx:node-set()`这是使用扩展在 XSLT 1.0 中执行此操作的一种方法**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vrtfDoc2">
  <xsl:apply-templates/>
 </xsl:variable>

 <xsl:template match="/">
  <node5>
   <xsl:value-of select=
    "ext:node-set($vrtfDoc2)/root_tag/tag2/tag2_2/elem/elem_1"/>
  </node5>
 </xsl:template>

 <xsl:template match="*">
   <xsl:element name="{name()}">
     <xsl:apply-templates select="@*|node()"/>
   </xsl:element>
 </xsl:template>

 <xsl:template match="@*">
  <xsl:attribute name="{name()}">
   <xsl:value-of select="."/>
  </xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root_tag>
    <tag1>
        <tag1_1>A</tag1_1>
        <tag1_2>B</tag1_2>
        <tag1_3>C</tag1_3>
    </tag1>
    <tag2>
        <tag2_1>D</tag2_1>
        <tag2_2>
            <elem xmlns="http://a.b.com/sample">
                <elem_1>E</elem_1>
                <elem_2>F</elem_2>
            </elem>
        </tag2_2>
    </tag2>
</root_tag> 
```

**产生了想要的正确结果 ( `node5`)：**

```
<node5>E</node5> 
```

**说明**：

1.  这是一个*两遍*转换。

2.  在 pass1 中，文档被转换为包含原始文档元素的 RTF（结果树片段），但所有元素都在“无命名空间”中。

3.  EXSLT`ext:node-set()`扩展函数用于将上面1.中得到的RTF转换成正则树。

4.  提供的不包含任何谓词和对`local-name()`函数的引用的 XPath 表达式将根据上面 3\. 中生成的文档进行评估。****

# xml - twitter bootstrap 是否总是需要很长时间才能在 Firefox 中加载？

> ID：13186868
> 
> 赞同：1
> 
> 时间：2012-11-01T23:06:19.470
> 
> 标签：xml, firefox, xslt, twitter-bootstrap-2

我在 Mac OSX Lion 上使用 Firefox 10.0.2 并使用 Twitter Bootstrap 2.1.1 。我正在使用 xslt 将 xml 文件转换为 html。该文件非常大，我认为这是页面加载需要大量时间的原因。但是当我查看控制台时，我发现与 bootstrap.min.css 中的错误和警告所花费的时间相比，剩余的时间非常少。请看下面的截图。

![在此处输入图像描述](../Images/61c737f3b9f6463911c9d120f1e020cf.png)

这些错误很容易占用 6 秒。我的 xml 文件中的所有其他组件加载速度非常快。有什么方法可以使页面加载更快并消除这些错误？

编辑：这是图像的链接，因此可见。[http://i.stack.imgur.com/W41En.png](https://i.stack.imgur.com/W41En.png)

# java - 输出未像使用 FileWriter 那样打印到文件

> ID：13186870
> 
> 赞同：0
> 
> 时间：2012-11-01T23:06:40.283
> 
> 标签：java, filewriter, bufferedwriter

所以我的程序编译但是在测试早期分析时我意识到它不会打印显示所有输出的文件。有人可以告诉我为什么文件根本没有被打印吗？这是我的代码...

```
import java.io.*;    
import java.util.*;    

public class Analyzer     
{         

private static FileWriter stream;    
        private static BufferedWriter output;

    public static void start() throws IOException

{       
    int i = 0;
    int total = 0;
    int totalError = 0;
    final int SIZE = 40000;
    Response data[] = new Response[SIZE];

    stream = new FileWriter("apacheOut.txt");
    output = new BufferedWriter(stream);

    Scanner scan = new Scanner("access_log1.txt");
    scan.useDelimiter ("[-\t]+");
    while (scan.hasNextLine()) 
    {
        double address = scan.nextDouble();
        String date = scan.next();
        String request = scan.next();
        int status = scan.nextInt();
        int bytes = scan.nextInt();
        String refer = scan.next();
        String agent = scan.next();

        if (Integer.toString(status).substring(0, 1) == "4" || Integer.toString(status).substring(0, 1) == "5")
        {
            ErrorResponse er = new ErrorResponse (address, date, request, status, bytes, refer, agent);
            totalError++;
        }
        else
        {
            SuccessResponse sr = new SuccessResponse (address, date, request, status, bytes, refer, agent);
        }

        total++;
    }

    int numGet = 0;
    int numPost = 0;
    double numBytes = 0;
    for (i = 0; i <= SIZE; i++)
    {   
        double address = data[i].getAddress();
        String date = data[i].getDate();
        String request = data[i].getRequest();
        int status = data[i].getStatus();
        int bytes = data[i].getBytes();
        String refer = data[i].getRefer();
        String agent = data[i].getAgent();

        /** GET/POST count */
        if (request.substring(0,1) == "G")
        {   
            numGet++;
        }
        else if (request.substring(0,1) == "P")
        {
            numPost++;
        }

        /** Number of total bytes */
        numBytes = bytes++;
    }

    output.write("Warren Smith's Results");
    output.write("======================");
    output.write("The total number of requests in the file: " + total);
    output.write("The total number of GET requests: " + numGet);
    output.write("The total number of POST requests: " + numPost);
    output.write("The total number of bytes served: " + numBytes);
    output.write("The number & percentage of pages producing various status categorizations:" );
    output.write("    1xx Informational: ");
    output.write("    2xx Status: ");
    output.write("    3xx Redirection: ");
    output.write("    4xx Client Error: ");
    output.write("    5xx Server Error: ");
    output.write("The percentage and number of Windows-based clients: ");
    output.write("The percentage and number of bad requests: ");
    output.write("The percentage and number of clients that are Mozilla-based: ");
    output.write("The percentage and number of requests from the Googlebot: ");

    output.close();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:09:35.213

总是使用 .equals() 方法来检查两个字符串是否相等 改变这个

```
 if (Integer.toString(status).substring(0, 1) == "4" || Integer.toString(status).substring(0, 1) == "5") 
```

到

```
if (Integer.toString(status).substring(0, 1).equals("4") || Integer.toString(status).substring(0, 1).equals( "5")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:00:34.917

完全没有输出？您正在写入`BufferedWriter output`which wraps `FileWriter stream`。但是，您只是关闭（并自动刷新）输出流。FileWriter 可能会自行缓冲，如果您在完成写入之前终止程序，它可能永远不会将更改提交到磁盘。

`output.close();`尝试添加后：

```
stream.flush();
stream.close(); 
```

# objective-c - 使用未声明的标识符“_bridge”

> ID：13186874
> 
> 赞同：0
> 
> 时间：2012-11-01T23:07:06.337
> 
> 标签：objective-c, c

我的 Objective-C 项目包含 C 库，这些库具有：

```
void* ptr; 
```

ViewController 有：

```
UIImageView pic;
pic = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"ground.png"]];

cLoad cload; // C-class object
cload.ptr = (_bridge void*) pic; 
```

我使用 ARC，但我不明白为什么会收到错误消息：`use of undeclared identifier bridge` 谢谢 )))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:09:23.293

```
cload.ptr = (__bridge void*) pic; 
```

**__bridge**，有两个下划线...

# sql - 在开始下一个组之前查询具有总行的数据组？

> ID：13186879
> 
> 赞同：0
> 
> 时间：2012-11-01T23:07:23.827
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我需要在 SQL Server 中查询以下格式的一些数据：

*   标识组价格
*   1个10
*   2个20
*   **总和 30**

*   1 B 6

*   2 乙 4
*   **总和 10**

*   1 C 100

*   2 C 200
*   **总和 300**

我正在考虑按照以下步骤进行操作：

1.  查询一组
2.  在其他查询中求和
3.  使用联合运算符组合此结果集
4.  对所有组执行步骤 1-3，最后使用联合返回所有子数据集。

有一个更好的方法吗 ？可能正在使用一些开箱即用的功能？请指教。

**编辑：**

根据建议和代码示例，我尝试了以下代码：

```
Select 
Case 
when id is null then 'SUM' 
else CAST(id as Varchar(10)) end as ID,

Case when [group] is null then 'ALL' else CAST([group] as Varchar(50)) end as [group]
,Price from
(
SELECT Id,  [Group],BGAApplicationID,Section, SUM(PrimaryTotalArea) AS price   
FROM vwFacilityDetails
where bgaapplicationid=1102
GROUP BY Id,  [Group],BGAApplicationID,Section  WITH ROLLUP
) a 
```

甚至还有这段代码：

```
Select Id,  [Group],BGAApplicationID,Section, SUM(PrimaryTotalArea) AS price           
From   vwFacilityDetails
Where  Not ([group] Is Null And id Is Null And BGAApplicationId is null and section is null) and BGAApplicationId=1102
Group By Id,  [Group],BGAApplicationID,Section 
    With Rollup 
```

在结果中，它将数据分组，但对于每条记录，它会显示 3 次（在上述两个代码中），例如：

*   2879 现有设施 整个学校 25.00
*   2879 现有设施 整个学校 25.00
*   2879 现有设施 整个学校 25.00
*   2879 全部 25.00

我想我的查询中有一些问题，请在这里指导我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T23:33:34.777

```
Select
  id,
  [Group],
  SUM(price) AS price
From
  Test
Group By
  [group],
  id 
With
  Rollup 
```

[http://sqlfiddle.com/#!3/080cd/8](http://sqlfiddle.com/#!3/080cd/8)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T02:10:35.407

SQL Server 引入了您应该使用的[GROUPING SETS 。](http://msdn.microsoft.com/en-us/library/bb522495%28v=sql.105%29.aspx)

[SQL小提琴](http://sqlfiddle.com/#!3/57011/5)

**MS SQL Server 2008 架构设置**：

```
Create Table vwFacilityDetails (
  id int not null,
  [group] char(1) not null,
  PrimaryTotalArea int not null,
  Section int,
  bgaapplicationid int
);

Insert Into vwFacilityDetails (id, [group], Section,bgaapplicationid,PrimaryTotalArea) values
  (1, 'A', 1,1102,2),
  (1, 'A', 1,1102,1),
  (1, 'A', 1,1102,7),
  (2, 'A', 1,1102,20),
  (1, 'B', 1,1102,6),
  (2, 'B', 1,1102,4),
  (1, 'C', 1,1102,100),
  (2, 'C', 1,1102,200); 
```

**查询 1**：

```
SELECT CASE WHEN Id is null then 'SUM'
            ELSE Right(Id,10) end Id,
       [Group],BGAApplicationID,Section,
       SUM(PrimaryTotalArea) price   
FROM vwFacilityDetails
where bgaapplicationid=1102
GROUP BY GROUPING SETS (
  (Id,[Group],BGAApplicationID,Section),
  ([Group])
)
ORDER BY [GROUP],
         ID; 
```

**[结果](http://sqlfiddle.com/#!3/57011/5/0)**：

```
|  ID | GROUP | BGAAPPLICATIONID | SECTION | PRICE |
----------------------------------------------------
|   1 |     A |             1102 |       1 |    10 |
|   2 |     A |             1102 |       1 |    20 |
| SUM |     A |           (null) |  (null) |    30 |
|   1 |     B |             1102 |       1 |     6 |
|   2 |     B |             1102 |       1 |     4 |
| SUM |     B |           (null) |  (null) |    10 |
|   1 |     C |             1102 |       1 |   100 |
|   2 |     C |             1102 |       1 |   200 |
| SUM |     C |           (null) |  (null) |   300 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T23:35:37.743

```
Select Case when id is null then 'SUM' else CAST(id as Varchar(10)) end as ID
,Case when [group] is null then 'ALL' else CAST([group] as Varchar(10)) end as [group]
,Price from
(
SELECT id, [group], SUM(price) AS Price
FROM IG
GROUP BY [GROUP],ID WITH ROLLUP
) a 
```

# python - 如何将参数传递给传递给 itertools.groupby 的 keyfunc？

> ID：13186880
> 
> 赞同：2
> 
> 时间：2012-11-01T23:07:24.573
> 
> 标签：python, itertools, functools

所以！

这是一个使用的函数`itertoos.groupby`：

```
from string import whitespace, punctuation
from itertools import groupby

def tokenize(phrase, sepcat=True):
    separators = dict.fromkeys(whitespace + punctuation, True)
    return [''.join(g) for k, g in groupby(phrase, separators.get)] 
```

现在，输出如下：

如您所见，连续的分隔符被连接成一个字符串。我希望这种行为是可选的（由`sepcat`我的函数的参数表示），但这是我遇到障碍的地方......如何将参数传递给`separators.get`？

可以`functools`在这里帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T23:10:19.407

使用 lambda：

```
groupby(..., lambda x: my_normal_function(x, other, arguments)) 
```

# javascript - 如何为表单提交事件创建回调（无 ajax）

> ID：13186888
> 
> 赞同：4
> 
> 时间：2012-11-01T23:08:12.030
> 
> 标签：javascript, jquery, forms, amazon-s3, cross-domain

我想在我的表单成功提交后有一个回调。此表单不会*重新*加载页面，并且由于“跨源”问题，我们无法使用 ajax 替代方案。

我现在拥有的是：

```
$('#uploadform form').on('submit', function(){
    // DO STUFF HERE
}); 
```

但这会在触发提交事件后立即触发，而不是作为回调。在不使用 ajax 的情况下，如何让代码在收到响应*之后*且仅在收到响应之后运行（并获取响应来处理）？这甚至可能吗？

它是通过 AWS 的 S3 文件托管，不能使用 JSONP。

为了简单起见，如果我不必使用 iframe，我宁愿不使用。

**编辑** 它不会重新加载页面，就像文件下载链接不会重新加载页面一样。否则它就像任何其他形式一样。它不是在 iframe 内提交的。这是一种正常的形式，但所涉及的标题不需要重新加载页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T04:51:11.673

我找到了一个解决方案，它允许我在不重新加载页面的情况下提交我的表单，不使用 iframe 或 JSONP，虽然它在技术上可能算作 AJAX，但它没有同样的“跨源”问题。

```
function uploadFile() {

    var file = document.getElementById('file').files[0];
    var fd = new FormData();

    fd.append('key', "${filename}");
    fd.append("file",file);

    xhr = new XMLHttpRequest();

    xhr.upload.addEventListener("progress", uploadProgress, false);
    xhr.addEventListener("load", uploadComplete, false);
    xhr.addEventListener("error", uploadFailed, false);
    xhr.addEventListener("abort", uploadCanceled, false);

    xhr.open('POST', 'http://fake-bucket-name.s3-us-west-1.amazonaws.com/', true); //MUST BE LAST LINE BEFORE YOU SEND 

    xhr.send(fd);
}

function uploadProgress(evt) {
    if (evt.lengthComputable) {
      var percentComplete = Math.round(evt.loaded * 100 / evt.total);
      document.getElementById('progressNumber').innerHTML = percentComplete.toString() + '%';
    }
    else {
      document.getElementById('progressNumber').innerHTML = 'unable to compute';
    }
}

function uploadComplete(evt) {
    /* This event is raised when the server send back a response */
    alert("Done - " + evt.target.responseText );
}

function uploadFailed(evt) {
    alert("There was an error attempting to upload the file." + evt);
}

function uploadCanceled(evt) {
    alert("The upload has been canceled by the user or the browser dropped the connection.");
} 
```

使用这样的简单形式：

```
<form id="form1" enctype="multipart/form-data" method="post">
    <div class="row">
      <label for="file">Select a File to Upload</label><br>
      <input type="file" name="file" id="file">
    </div>
    <div id="fileName"></div>
    <div id="fileSize"></div>
    <div id="fileType"></div>
    <div class="row">
      <input type="button" onclick="uploadFile()" value="Upload">
    </div>
    <div id="progressNumber"></div>
</form> 
```

`uploadComplete(evt)`作为回调的函数。如您所见，它还为您提供了可以向用户展示的完成百分比。

> 注意：为此，您必须在您的 S3 账户中设置正确的上传策略和 CORS 策略。– 朗斯珀

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T23:49:53.677

如果您需要访问响应，您将同样遇到 ajax 和 iframe 的“跨源”问题。

[JSONP](http://en.wikipedia.org/wiki/JSONP)是解决“跨域”问题的唯一方法。它是托管在不同域上的所有 JSON API 所使用的，除非您尝试使用旧 IE 版本不支持的[CORS 。](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

如果您可以控制提交表单的服务器，您应该能够使其返回与 JSONP 兼容的响应。如果没有，那你有点不走运。

# sql - 从连接表中获取多个不同的值

> ID：13186889
> 
> 赞同：1
> 
> 时间：2012-11-01T23:08:18.927
> 
> 标签：sql, postgresql

如果没有多个子查询，我想不出一个很好的查询方法。我无法重组表格，所以这不是一个选择。这是设置：

```
person:
person_id
person_want_id,
person_need_id,
person_ability_id,
person_willingness_id

person_status_types:
status_type_id
status_type_name 
```

每个人的 id 都是 person_status_types 类型。我需要提取的是每个 id 的 status_type_name。

所以 return 语句看起来像这样：

```
person_id | person_want_name | person_need_name | person_ability_name | person_willingness_name 
```

现在我只做 4 个子查询，但必须有一种更清洁的方法。另外，如果您想提及更好的数据库结构，我对未来的数据库生产持开放态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T23:16:31.840

```
SELECT p.person_id
      ,want.status_type_name AS person_want_name
      ,need.status_type_name AS person_need_name
      ,abt.status_type_name  AS person_ability_name
      ,wil.status_type_name  AS person_willingness_name
FROM person p
LEFT JOIN person_status_types want ON p.person_want_id = want.status_type_id
LEFT JOIN person_status_types need ON p.person_need_id = need.status_type_id
LEFT JOIN person_status_types abt  ON p.person_ability_id = abt.status_type_id
LEFT JOIN person_status_types wil ON p.person_willingness_id = wil.status_type_id 
```

用于`LEFT JOIN`避免丢失行。
而且你不能单引号标识符（就像另一个答案所暗示的那样）。单引号用于值。

### 标识符的分隔符

由于这引发了一些争论，所以要一劳永逸地澄清：

*   **双引号** 根据任何 ANSI 标准`"`分隔*标识符。*所有重要的 RDBMS都*普遍*支持这一点，MySQL 是唯一的例外。您可以在 MySQL 中使用`SET sql_mode = 'ANSI';`

    一些 RDBMS 接受额外的替代分隔符，如`[]`SQL 服务器。

*   **单引号** 根据 ANSI 标准`'`分隔*值。*一些 RDBMS（如 MySQL 或 SQL Server）允许它们围绕列名作为通用字符串分隔符。不过，它们都不接受它们的表名。

*   **反引号** `´`作为标识符的分隔符只是 MySQL 的怪事。同样，您可以在 MySQL 中使用`SET sql_mode = 'ANSI';`

这是一个[数据库列表及其各自的标识符分隔符](http://wiki.ispirer.com/sqlways/postgresql/identifiers#quoted_or_delimited_identifiers)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:12:28.790

你不需要做子查询，你可以做 JOIN：

```
SELECT p.person_id, 
    want.status_type_name AS "person_want_name", 
    need.status_type_name AS "person_need_name", 
    ability.status_type_name AS "person_ability_name", 
    willingness.status_type_name AS "person_willingness_name"
FROM person p
JOIN person_status_types want ON p.person_want_id = want.status_type_id
JOIN person_status_types need ON p.person_need_id = need.status_type_id
JOIN person_status_types ability ON p.person_ability_id = ability.status_type_id
JOIN person_status_types willingness ON p.person_willingness_id = willingness.status_type_id 
```

请注意，表别名可帮助您区分您正在引用的表的哪个“副本”，并且每个别名都连接在不同的列上`person`。

**编辑**：评论指出 PostgreSQL 不允许使用与 ANSI 匹配的列别名的单引号。让我感到惊讶，因为 MySQL 和 SQL Server 支持它。我的查询现已修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T23:17:58.477

尝试这样的事情：

```
SELECT person_id, st1.status_type_name AS want, st2.status_type_name AS need, st3.status_type_name AS ability, st4.status_type_name AS willingness
FROM person p
LEFT OUTER JOIN person_status_types st1 ON p.person_want_id=st1.status_type_id
LEFT OUTER JOIN person_status_types st2 ON p.person_need_id=st2.status_type_id
LEFT OUTER JOIN person_status_types st3 ON p.person_ability_id=st3.status_type_id
LEFT OUTER JOIN person_status_types st4 ON p.person_willingness_id=st4.status_type_id; 
```

# list - 如何在 scss 中制作多背景混合？

> ID：13186890
> 
> 赞同：2
> 
> 时间：2012-11-01T23:08:31.577
> 
> 标签：list, sass, background-image

目标：像这样使用的 scss（我使用的是 v3.2.1）mixin `preload`（对于任意数量的 args > 0）：

```
@include preload(url("a.png"), url("b.png")); 
```

输出css：

```
.preload { background-image: url("a.png"), url("b.png"); } 
```

包括他们之间的那个逗号。~~一些失败的尝试，它们都产生了*减去逗号*的输出：~~ **编辑：**当然，事实证明我对 mixin 的调用有误，而不是实现中的错误 - 所有三个工作都很好：

```
@mixin preload($img_urls...) {
  .preload { background-image: $img_urls; }
}

@mixin preload($img_urls...) {
  .preload { background-image: join($img_urls, (), comma); }
}

@mixin preload($img_urls...) {
  $bgs: nth($img_urls, 1);
  @for $n from 2 through length($img_urls) {
    $bgs: $bgs, nth($img_urls, $n); 
  }
  .preload { background-image: $bgs; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:07:53.580

你在这里接近了这个：

```
@mixin preload($img_urls...) {
  .preload { background-image: #{join($img_urls, (), comma)}; } // missing the variable interpolation
} 
```

# c# - 使用 for 循环 C# 初始化数组和变量名

> ID：13186892
> 
> 赞同：2
> 
> 时间：2012-11-01T23:08:41.063
> 
> 标签：c#, arrays, object, for-loop, picturebox

我无法确定是否可以执行以下操作：我想使用 for 循环初始化 PictureBox 数组中的所有值。我还希望分配的值能够使用循环迭代器。例如：

```
 PictureBox[] picUserCards = new PictureBox[6];

        for (int i = 0; i < picUserCards.Length; i++)
        {
            // Below is similar to what I have done in VBA 
            picUserCards[i] = picCard + (i + 1);
        } 
```

如您所见，C# 将向我抛出一个错误，说 picCard 在此上下文中不存在。但是，在 VB/VBA 中，它会为我连接字符，给我 picUserCards[0] = picCard1。

这可能是一个非常简单的答案，我希望它还没有被回答几十次，但是我的前期搜索除了如何使用 For 循环来处理数组的索引之外没有产生任何结果。

如果重要的话，表格上已经存在图片框（其中 12 个），所以我想弄清楚如何将它们与数组相关联，而不是重新设计我的表格。

编辑：我想要两个数组，一个将表单上的所有 PictureBoxes 转储到一个数组中的解决方案不能解决我的特定问题。我希望能够自己确定有多少对象与给定数组相关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:10:22.200

我假设您正在使用具有`Controls`属性的容器：

```
var picUserCards = this.Controls.OfType<PictureBox>().ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T23:17:49.973

您可以通过字符串名称引用子控件：

```
this.Controls["picCard" + 7] 
```

这仅适用于直系后代。如果您的控件是嵌套的，您将不得不使用[`Find`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.find%28VS.80%29.aspx)，这会有点慢（对于非性能密集型应用程序应该可以忽略不计）。

```
this.Controls.Find("picCard" + 7, true) 
```

# jquery - 从图像区域形状和 html 按钮执行的 onclick 事件的不同行为

> ID：13186894
> 
> 赞同：0
> 
> 时间：2012-11-01T23:08:46.653
> 
> 标签：jquery, html, css

[这里](http://jsfiddle.net/marciano/yefju/3/)我有一个示例来说明我的问题。

如果滚动到第 41 行，您可以隐藏/显示一个固定框。它按预期工作：半透明框隐藏并且页面保持安静。但是，如果您单击底部图像，该框也会隐藏，但页面会滚动到顶部。

如何避免这种情况并将页面固定在用户滚动的位置？

```
<div id="container">
    <div id="box" class="oculto">BOX BOX</div>
    1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>
    11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>
    21<br>32<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>
    31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>

    <button onclick="$('#box').hide();">Hide the box </button><br>  
    <button onclick="$('#box').show();">Show the box </button><br>     
    <img src="http://static.adzerk.net/Advertisers/4c4f1be011a447efbce49c1811022e7a.png" width="330" border="0" usemap="#Map" /> 

 </div>

<map name="Map" id="Map">
<area shape="rect" coords="3,3,320,84" href="#" onclick="$('#box').hide();"/> 
```

CSS

```
#container {
width: 400px;
background-color:yellow;
position:relative; 
z-index:2;
min-height:1000px;
}

#box{
width:400px; 
height:100px;
position:fixed;
top:0;
z-index:100000;
background-color:black;
color:yellow;
opacity:0.5;
padding:10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:17:14.803

只需摆脱地图上的href。我[分叉了你的 jsfiddle](http://jsfiddle.net/slashingweapon/4t379/)。

```
<area shape="rect" coords="3,3,320,84" onclick="$('#box').hide();"/> 
```

# perl - 使用命令行替换文件夹中所有文件中的文本？

> ID：13186898
> 
> 赞同：4
> 
> 时间：2012-11-01T23:09:13.877
> 
> 标签：perl, command-line

我需要替换我的一个文件夹中所有文件中的文本，并且正在使用 Perl 但出现错误。

这就是我正在运行的：

```
perl -pi.bak -e 's/<START>/<url><loc>http://www.mysite.com/page//g' * 
```

基本上我只需要更换

```
<START> 
```

有了这个：

```
<url><loc>http://www.mysite.com/page/ 
```

这是我得到的错误：

```
Illegal division by zero at -e line 1, <> line 1. 
```

有人能告诉我我应该做什么吗？我也尝试了其他几种方法，但似乎都没有工作......我真的需要通过命令行来完成它，因为它有超过一千万行，所以它更快。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T23:18:59.250

替换文本中的 /es 被视为分隔符，也被视为除法运算符。您可以在适当的情况下将斜线转义为 \/，或使用备用分隔符。尝试：

```
perl -pi.bak -e 's#<START>#<url><loc>http://www.mysite.com/page/#g' * 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T23:19:10.450

你需要逃避斜线。 `s/<START>/<url><loc>http:\/\/www.mysite.com\/page\//g`

# javascript - 触发器作为 jQuery UI 小部件中的回调

> ID：13186899
> 
> 赞同：0
> 
> 时间：2012-11-01T23:09:21.297
> 
> 标签：javascript, jquery, callback, jquery-ui-widget-factory, event-triggers

我正在开发我的第一个 jQuery UI 小部件。它使用 $.ajax 来提取数据，然后在加载数据后填充元素。通常我会有一个执行 ajax pull 的函数，并将“onSuccess”回调函数传递给该函数，以便在 ajax pull 成功时执行。

这是我的意思的一个非常简化的版本：

```
function doAjax(onSuccess) {
    $.ajax({
        success: function (data) {
            onSuccess(data);
        }
    });
}

doAjax(function (data) {console.log(data);}); 
```

使用小部件工厂，我知道我可以在 $.ajax 的成功函数中添加触发器。我可以在我的小部件代码中使用该触发器吗？

像这样的东西有效，但似乎不是最佳实践：

```
_create: function() {
    self.options.dataLoaded = function (e, data) {console.log(data);};
    this._doAjax();
},
_doAjax: function() {
    var self = this;

    $.ajax({
        success: function (data) {
            self._trigger('dataLoaded', null, data);
        }
    });
} 
```

什么被认为是这里的最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:30:54.277

通过做一些试验和错误代码，我确定第一个选项是最好的。这是似乎效果最好的代码的简化版本。

```
_create: function() {
    var self = this;
    self._doAjax(self.doStuff);
},
_doAjax: function(onSuccess) {
    var self = this;

    $.ajax({
        context: self,
        success: function (data) {
            onSuccess.call(this, data);
            self._trigger('dataLoaded', null, data);
        }
    });
},
doStuff: function(data) {
    var self = this;

    console.log(self);
    console.log(data);
} 
```

这使我可以像往常一样使用回调，并允许我的小部件的用户在`dataLoaded`需要时使用该事件。`$.ajax` `content:`加上选项`onSuccess.call(this,data)`允许我确保仍然会从用作回调的方法`this`内部引用我的小部件。`doStuff``onSuccess`

# php - 如何将带逗号的字符串插入 MYSQL

> ID：13186901
> 
> 赞同：0
> 
> 时间：2012-11-01T23:09:22.670
> 
> 标签：php, mysql, string, insert, mysqli

我正在尝试将表单中的字符串变量插入到 mysql 中，但它一直给我一个错误，并且在错误中它会切断部分语句，所以我认为它的问题在于字符串中有逗号。 ..

**这是一些示例代码：**

```
$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form")) {
  $startcode = $_POST['messagefield'];
  $replaced = preg_replace( '/\\\\(?="|\')/', '', $startcode );
  /* NEW CODE */
  /*selectleads[] is now an array of your database's ids. 
    You can now run a query to get whatever information you 
    need. In this case, you want the email addresses, so:
   */
  $collectedleads = $_POST['selectleads'];
  $emailaddylist = array();
  foreach ($collectedleads as $id) {

  $colname_rs_SelectedLeads = $id;

mysql_select_db($database_myBackOfficeConn, $myBackOfficeConn);
$query_rs_SelectedLeads = sprintf("SELECT * FROM Leads WHERE `Id` = %s", GetSQLValueString($colname_rs_SelectedLeads, "text"));
$rs_SelectedLeads = mysql_query($query_rs_SelectedLeads, $myBackOfficeConn) or die(mysql_error());
$row_rs_SelectedLeads = mysql_fetch_assoc($rs_SelectedLeads);
$totalRows_rs_SelectedLeads = mysql_num_rows($rs_SelectedLeads);

$emailaddylist[] = $row_rs_SelectedLeads['Email'];
$nameaddylist[] = $row_rs_SelectedLeads['FullName'];
  }
  /*Now you have an array of email addresses that correspond to 
    the ids you were sent via $_POST.
   */
  $emailaddystring = implode(", ", $emailaddylist);
  $nameaddystring = implode(", ", $nameaddylist);

  echo $emailaddystring . "</br>";
  echo $nameaddystring;

  $insertSQL = sprintf("INSERT INTO PendingEmails (to, NameTo, subject, message) VALUES ('%s', '%s', '%s', '%s')",
                       GetSQLValueString($emailaddystring, "text"),
                       GetSQLValueString($nameaddystring, "text"),
                       GetSQLValueString($_POST['subjectfield'], "text"),
                       GetSQLValueString($replaced, "text"));

  mysql_select_db($database_myBackOfficeConn, $myBackOfficeConn);
  $Result1 = mysql_query($insertSQL, $myBackOfficeConn) or die(mysql_error());

  /*$insertGoTo = "View Folder.php?Folder=" . $_POST['Folder'] . "";
  header(sprintf("Location: %s", $insertGoTo));*/

mysql_free_result($rs_SelectedLeads);

} 
```

**这是实际形式：**

```
<form action="<?php echo $editFormAction; ?>" method="POST" enctype="application/x-www-form-urlencoded" name="form" id="sendemailform">
          <fieldset>
          <div class="emailtablecontainer">
          <table width="525" border="0" cellspacing="10">
  <tr>
    <td><label>To:</label></td>
    <td><select data-placeholder="Select Lead(s) To Email..." multiple="true" class="chzn-container-multi" name="selectleads[]"style="width:505px;">
            <?php
do {  
?>
            <option value="<?php echo $row_rsAllLeads['Id']; ?>"><?php echo $row_rsAllLeads['FullName']?></option>
            <?php
} while ($row_rsAllLeads = mysql_fetch_assoc($rsAllLeads));
  $rows = mysql_num_rows($rsAllLeads);
  if($rows > 0) {
      mysql_data_seek($rsAllLeads, 0);
      $row_rsAllLeads = mysql_fetch_assoc($rsAllLeads);
  }
?>
          </select></td>
  </tr>
  <tr>
    <td><label>Subject:</label></td>
    <td><input class="inputs" name="subjectfield" type="text"></td>
  </tr>
  <tr>
    <td><label>Message:</label></td>
    <td><textarea id="sendemailtextarea" name="messagefield"></textarea></td>
    <script>
    CKEDITOR.replace( 'sendemailtextarea',
    {
        toolbar : 'SendEmailToolbar',
        uiColor: '#94B0C1',
        height : '62'
    });
    </script>
  </tr>
</table>
</div>
<input class="submitemailbuttonsprite submitemailbutton1" name="submitemail" type="submit" value="Send Email(s)">
          </fieldset>
          <input type="hidden" name="MM_insert" value="form">
          </form> 
```

**这是错误：**

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'to, NameTo, subject, message) VALUES (''Praesent.luctus.Curabitur@velturpis.edu,' at line 1 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T23:12:31.537

看起来您正在生成的 sql 有太多的单引号 ( ' )

```
(''Praesent.luctus. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:16:28.103

您需要转义值之间的逗号：

```
$string = 'string with commas\,string with more commas\,end of the string';

$sql = "INSERT INTO table_name (row_name) VALUES (:string)";
$q = $conn->prepare($sql);
$q->execute(array(': row_name'=>$string); 
```

# c# - 正则表达式：识别不同格式的电话号码

> ID：13186906
> 
> 赞同：0
> 
> 时间：2012-11-01T23:09:40.433
> 
> 标签：c#, regex

我有一个网站，人们在那里写笑话。用户可以将他们喜欢的笑话作为短信发送到他们（或他们的朋友）手机。以及笑话的发件人（已将笑话添加到网站）显示在其下方：

**笑话＃12234

这是
笑话

发件人的正文：约翰**

有时人们使用他们的电话号码作为发件人姓名，这是不允许的上市。我想确定发件人姓名中是否有电话号码以便能够对其进行审查。我假设任何大于 6 位的数字都是电话号码。但问题是用户可能会将数字分开，例如：

**1234567890 应该变成 1234XXX7890
123 456 7890 应该变成 123 XXX 7890
123-456-7890
123456-7890** 

等等。任何与上述格式相似的形式都应被审查。我尝试删除非数字字符，然后使用正则表达式，但问题是它也会获取：

**john23 peterson12345**

谁能提供更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:29:42.643

要保留所有格式，请替换

```
(\d{3}[-\s()]*)\d{3}([-\s()]*\d{4}) 
```

和

```
$1XXX$2 
```

要进一步限制 10 位数字（*即*不允许在前后紧接其他数字），请使用否定环视断言：

```
(?<!\d)(\d{3}[-\s()]*)\d{3}([-\s()]*\d{4})(?!\d)
^^^^^^^                                   ^^^^^^ 
```

最后，如果拼写错误导致用户在组之间插入空格或符号，例如，`(123)45 6-7890`怎么办？要捕获这些，请执行以下操作：

```
(?<!\d)((?:\d[-\s()]*){3})(?:\d[-\s()]*){3}((?:\d[-\s()]*){4})(?!\d) 
```

但是，这可能会捕获“太多”，例如`1-2-3-4-5-6-7-8-9-0`. 你必须确定你想要达到什么样的平衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-29T19:47:43.443

由于这个世界上有很多电话号码格式，您可以使用这个正则表达式来识别任何电话号码。`^[0-9-+s()]*$`

# iphone - 我可以在同一个视图上使用 setFrame 和 autolayout 吗？

> ID：13186908
> 
> 赞同：70
> 
> 时间：2012-11-01T23:10:00.097
> 
> 标签：iphone, cocoa-touch, interface-builder, frame, autolayout

我想为我的所有按钮添加填充，因此我将 UIButton 子类化，并且在其他更改中，我想通过使用 setFrame 方法添加固定填充。一切正常，除了 setFrame。我检查了一下，发现如果我取消选中该视图上的“使用 AutoLayout”，那么我可以使用 setFrame，它可以工作。有没有解决的办法？我真的很想使用自动布局，因为它有助于使应用程序在 iphone 5 和更早的设备上看起来都不错。但我也想在我的子类中使用 setFrame，让我的生活更轻松。

总结一下，我的问题是：我可以使用自动布局并以编程方式调整 UIView 的框架吗？

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2012-11-24T09:01:40.430

是的，这是可以做到的。

如果您设置视图的`translatesAutoresizingMaskIntoConstraints = YES`，则调用`setFrame:`会在运行时根据视图的 current 自动转换为布局约束`autoresizingMask`。这使您可以混合基于框架的布局和基于约束的布局。

例如，您可以使用 Auto Layout 来定义视图的所有子视图的布局，但仍然调用`setFrame:`来设置视图本身的大小和位置。从您的角度来看，您正在使用自动布局和直接框架操作混合进行布局。但系统实际上是使用约束来处理所有事情。

但是，使用`translatesAutoresizingMaskIntoConstraints`.

当你这样做时，*你仍然需要确保这些自动约束可以满足你的其余约束*。

因此，例如，假设已经存在确定视图大小和位置的约束，然后您*还*设置`translatesAutoresizingMaskIntoConstraints = YES`并调用了`setFrame:`. 调用`setFrame:`将在视图上生成新的约束，这可能会与已经存在的约束冲突。

（事实上​​，这个错误经常发生。如果您曾经看到一条日志消息抱怨约束冲突，并且其中一个约束是 a `NSAutoresizingMaskLayoutConstraint`，那么您看到的是与自动约束的冲突。这是一个简单的错误，因为`translatesAutoresizingMaskIntoConstraints = YES`是默认值，因此如果您在代码中配置约束，如果您不想要这些自动约束，则需要记住将其关闭。）

相比之下，再次假设已经存在确定视图大小和位置的约束，但是您`translatesAutoresizingMaskIntoConstraints = NO`在调用`setFrame:`. 在这种情况下，您的`setFrame:`调用不会产生新的约束，因此*单独的约束之间*不会有冲突。*但是，在这种情况下，约束和您设置的帧值之间*仍然存在“冲突” 。下次调用 Auto Layout 时，它会看到视图上已经存在的约束，计算它们需要的框架值，并将框架设置为本身所需的值，从而破坏您手动设置的值。

有关更多详细信息，请查看 Apple 的[Cocoa 自动布局指南](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/Introduction/Introduction.html)中的“采用自动布局”部分。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-10-30T05:19:46.640

结果对我来说最简单的事情是从其父视图中删除我想要移动/调整大小的视图，设置它`frame`，然后将其添加回来。例如，`UILabel`在`UITableViewCell`子类中进行自定义：

```
[cell.myLabel removeFromSuperview];
cell.myLabel.frame = someFrameIGenerated;
[cell.contentView addSubview:cell.myLabel]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-20T21:59:11.060

对我有用的东西只是将`IBOutlet`我的约束添加到视图控制器，然后更改`constant`插座上的属性。

例如，要更改视图的 x 原点，请从该视图的前导约束设置一个出口到您的控制器。换句话说，创建一个 outlet `@IBOutlet var labelXOrigin: NSLayoutConstraint!`。然后，当您想调整 x 位置时，只需执行类似的操作

```
self.labelXOrigin.constant = 20.0 // Or whatever origin you want to set. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-14T07:00:40.810

> 设置子视图框架的最佳方法是自动布局项目中的 viewWillLayoutSubviews 方法。
> 
> 设置属性 translateAutoresizingMaskIntoConstraints = true 这将在视图确实出现或按钮上的选项卡设置后起作用，就在视图出现之后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-11T11:10:32.787

如果您的应用不支持多个设备方向。

在**viewDidLoad**中设置要调整大小的视图的框架

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    [aView setFrame:CGRectMake(15, 15, 100, 100)];
} 
```

然后在**viewDidLayoutSubviews**：

```
-(void)viewDidLayoutSubviews
{
    [self.view setTranslatesAutoresizingMaskIntoConstraints:NO];
} 
```

我不确定，但我认为如果您使用此解决方案，将一个方向切换到另一个方向可能会导致问题

# opengl-es - 访问 VGImage 数据

> ID：13186909
> 
> 赞同：1
> 
> 时间：2012-11-01T23:10:00.860
> 
> 标签：opengl-es, openvg

使用 OpenVG 1.1 我试图将 VGImage 转储到文件以确认一切正常，但我不确定如何访问 VGImage 的原始 RGBA 数据。使用 vgReadPixels 将数据捕获到 char 数组确实有些工作，但在我花更多时间获取正确格式之前，我想知道是否有更好的方法来捕获使用 vgGetPixels 捕获的 VGImage 数据。

这是使用 Freescale 的 BSP 在 Linux 中的 i.MX53 上完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:50:15.463

vgReadPixels 允许您绕过任何 VGImage 从当前绘图表面访问数据。此功能可让您将当前图像转储为彩色图像。

如果要转储 VGImage 对象的内容，则 vgReadPixels 不是您要使用的函数。

而是在 VGImage 对象上调用 vgGetImageSubData。为了获得最佳精度，您应该使用与 vgCreate 命令中使用的格式相同的格式。如果您使用不同的格式，您仍将获得图像的内容，但它将使用颜色转换过程进行处理，由于转换过程中可能发生的四舍五入效应，这可能会稍微降低图像质量。

# wpf - 使用 TreeVew 导航到不同的页面

> ID：13186910
> 
> 赞同：0
> 
> 时间：2012-11-01T23:10:02.380
> 
> 标签：wpf, binding, treeview

我想做一个`Settings`类似于`Options`VS2012中的框的窗口。我希望为每组设置编写一个 XAML 页面。但是如何使用 a`TreeView`来选择显示哪个 XAML 页面？XAML 页面是否应该是树中加载的对象的一部分？

（我应该说，我该如何以 MVVM 方式做到这一点......如果可能的话。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:38:38.770

我会按照以下方式进行：

有一个视图模型类，将其命名为`SettingsPageVM`，其中包含一个`Title`和`PageUrl`到您的页面。

创建了您的列表后`SettingsPageVM`，将其绑定到您`TreeView`的列表中，该列表名为类似`Items`,的列表`HierarchicalDataTemplate`，例如：

```
<HierarchicalDataTemplate DataType="{x:Type vm:SettingsPageVM}" ItemsSource="{Binding Items, Mode=OneWay}">
    <StackPanel>
        <Button Content="{Binding Title}" Command="Open"/>
    </StackPanel>
</HierarchicalDataTemplate> 
```

然后，绑定打开命令以处理导航到您的页面：

```
<UserControl.CommandBindings>
    <CommandBinding Command="Open" CanExecute="OpenCanExecute" Executed="OpenExecuted"></CommandBinding>
</UserControl.CommandBindings> 
```

你遇到的问题比这更深吗？

# macos - 无法在 mac 终端中运行 sh 脚本，因为无法在解压缩目录中找到关联文件的路径

> ID：13186919
> 
> 赞同：1
> 
> 时间：2012-11-01T23:11:03.590
> 
> 标签：macos, path

我已经下载了一个 .sh 脚本来根我的手机。我使用 mac 多年，但从来不需要使用终端。结果是来自解压缩目录的一串无法找到的命令。这是批处理文件过程的副本：

Johns-Mac-mini:~ jm$ /Users/jm/Downloads/GalaxyNoteRoot\ (1)/runmemac.sh ------------------------- --------------------------------------
DooMLoRD 创建的 Easy root工具包 (v2.0)已
修改RootGalaxyNote.com 的 Max Lee
使用 zergRush（革命团队） 为 Linux/Mac 版 Kindle Fire

## 归功于所有参与使这成为可能的人！

[ *]这个脚本将：
（1）使用最新的zergRush漏洞（11月10日）root你的设备（2）安装Busybox（1.18.4）
（3）安装SU文件（二进制：3.0.3和apk：3.0.6）
[* ] 在你开始之前： (1) 从 (Menu\Settings\Applications\Development)
启用 USB 调试(2) 从 (Menu\Settings\Applications ) 启用 UNKNOWN SOURCES (3) [可选] 将屏幕超时时间增加到 10 分钟

## (4) 将USB线连接到PHONE，然后连接2台电脑

没有这样的文件或目录 /Users/jm/Downloads/GalaxyNoteRoot (1)/runmemac.sh: line 62: ./adb-mac: 没有这样的文件或目录 --- 推送超级用户应用程序 /Users/jm/Downloads/GalaxyNoteRoot ( 1）/runmemac.sh：第64行：./adb-mac：没有这样的文件或目录---清理/Users/jm/Downloads/GalaxyNoteRoot（1）/runmemac.sh：第66行：./adb-mac：没有这样的文件或目录 --- 重新启动 /Users/jm/Downloads/GalaxyNoteRoot (1)/runmemac.sh: line 68: ./adb-mac: 没有这样的文件或目录 --- WAITING FOR DEVICE /Users/jm/下载/GalaxyNoteRoot (1)/runmemac.sh: line 70: ./adb-mac: No such file or directory All Done, Galaxy Note ROOTED!!! 查看 RootGalaxyNote.com 以获得更酷的 hack！Johns-Mac-mini:~ jm$ 没有这样的文件或目录 --- 推送超级用户应用程序 /Users/jm/Downloads/GalaxyNoteRoot (1)/runmemac.sh: line 64: ./adb-mac: 没有这样的文件或目录 --- 清理 /Users/jm/下载/GalaxyNoteRoot (1)/runmemac.sh：第 66 行：./adb-mac：没有这样的文件或目录 --- 重新启动 /Users/jm/Downloads/GalaxyNoteRoot (1)/runmemac.sh：第 68 行：./ adb-mac: 没有这样的文件或目录 --- 等待设备 /Users/jm/Downloads/GalaxyNoteRoot (1)/runmemac.sh: line 70: ./adb-mac: No such file or directory All Done, Galaxy Note根！！！查看 RootGalaxyNote.com 以获得更酷的 hack！Johns-Mac-mini:~ jm$ 没有这样的文件或目录 --- 推送超级用户应用程序 /Users/jm/Downloads/GalaxyNoteRoot (1)/runmemac.sh: line 64: ./adb-mac: 没有这样的文件或目录 --- 清理 /Users/jm/下载/GalaxyNoteRoot (1)/runmemac.sh：第 66 行：./adb-mac：没有这样的文件或目录 --- 重新启动 /Users/jm/Downloads/GalaxyNoteRoot (1)/runmemac.sh：第 68 行：./ adb-mac: 没有这样的文件或目录 --- 等待设备 /Users/jm/Downloads/GalaxyNoteRoot (1)/runmemac.sh: line 70: ./adb-mac: No such file or directory All Done, Galaxy Note根！！！查看 RootGalaxyNote.com 以获得更酷的 hack！Johns-Mac-mini:~ jm$ 没有这样的文件或目录 --- WAITING FOR DEVICE /Users/jm/Downloads/GalaxyNoteRoot (1)/runmemac.sh: line 70: ./adb-mac: No such file or directory All Done, Galaxy Note ROOTED!!! 查看 RootGalaxyNote.com 以获得更酷的 hack！Johns-Mac-mini:~ jm$ 没有这样的文件或目录 --- WAITING FOR DEVICE /Users/jm/Downloads/GalaxyNoteRoot (1)/runmemac.sh: line 70: ./adb-mac: No such file or directory All Done, Galaxy Note ROOTED!!! 查看 RootGalaxyNote.com 以获得更酷的 hack！Johns-Mac-mini:~ jm$

如何访问目录中的其他文件？

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T19:41:08.137

我知道这有点晚了，但对于刚刚遇到问题的人来说。我刚刚遇到了和你一样的问题。

我所做的是在终端中将目录更改为图像文件的目录。然后用任意文本编辑器打开.sh文件，将指令一一复制到终端中。

希望它有所帮助！

# java - LWJGL glVertexAttribPointer 索引切换

> ID：13186922
> 
> 赞同：0
> 
> 时间：2012-11-01T23:11:17.367
> 
> 标签：java, lwjgl

当我通过 LWJGL 学习 OpenGL 时，我一直在浏览 LWJGL wiki 上的教程。具体来说，[这个](http://www.lwjgl.org/wiki/index.php?title=The_Quad_interleaved).

我的问题是，尽管我已经复制了该代码，调用调用，函数调用函数，两个顶点属性指针需要切换（所以代码如下所示：

```
GL20.glVertexAttribPointer(1, 4, GL11.GL_FLOAT, false, Vertex.sizeInBytes, 
    // Put the colors in attribute list 1
GL20.glVertexAttribPointer(0, 4, GL11.GL_FLOAT, false, Vertex.sizeInBytes,
    Vertex.elementBytes * 4); 
```

将其切换为位置索引为 1，颜色索引为 0，正如预期的那样，可以进行漂亮的渐变渲染。但是，如果我在切换索引的情况下运行它（我认为它*应该*工作的方式，我会得到这个：

![令人困惑的疯狂](../Images/66645b64883b21abb5a376aebc2fed55.png)

显然，在研究了这个渲染一段时间后，位置和颜色数据已经切换，因此，切换索引号完全解决了问题，但我很确定我已经正确地遵循了一切。代码有什么问题？为什么会有这么一个混蛋？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:40:30.940

您不应该像那样对属性 id 进行硬编码，而只是希望它们最终链接到正确的着色器属性。

您需要使用 glBindAttribLocation（在 glLinkProgram 之前）或 glGetAttribLocation，以便将着色器变量映射到它们的 id 号。

# android - Android CursorAdapter 与异步任务加载不正确，直到滚动

> ID：13186924
> 
> 赞同：1
> 
> 时间：2012-11-01T23:11:22.050
> 
> 标签：android, scroll, android-cursoradapter

嗨，我有一个 CursorAdapter，它映射到数据库中的一些项目，如下所示

gameid|类型|picurl|currPlayer|创作者

gameid 是我有 2 种类型的每个游戏的唯一 ID。玩家游戏和机器人游戏。如果游戏是机器人游戏，那么 picurl/currPlayer/creator 将为空。这是我的适配器代码。

这是我的代码： http: [//pastebin.com/61KZbir1](http://pastebin.com/61KZbir1)

我遇到的问题是，在初始加载时，有时一些图像不会显示，但当我滚动时它们会显示。除此之外，机器人游戏有时会显示错误的文本和图像，但当我滚动时它们会自行修复。我做了一件事来解决这个问题，当我现在将所有数据插入表中时，我正在注销更新 ui 的内容观察器，并在我完成插入后重新注册它，然后调用一次方法来更新 ui。该方法位于名为 refreshGamesList() 的 pastebin 底部。但是，当我没有为删除/插入取消注册内容观察器时，视图首先显示不正确，但随后它会获得更多回调，并使用这些回调进行自我修复。我到处寻找解决方案，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:45:14.467

我终于修好了！问题主要是从我的 bindview 触发任务我认为这是糟糕的设计，我将我正在执行的所有查询从 bindview 中的 asynctask 移动到 ui 线程（活动）中的 asynctask，然后我使用了一个矩阵游标并构建了一个自定义光标与我需要从另一个表中的数据。我将 matrixcursor 传递给我的适配器，并将我的lazyloader 直接操作我传递给它的 imageview 更改为只调用 adapter.notiftdatasetchanged() ，这样效果更好。基本上我重写了很多代码，因为我的预感是它从 bindview 触发了很多异步任务，这把所有东西都搞砸了，所以我把它移到了 ui 线程，在那里它只会​​被正确地调用一次。

# deployment - 部署脚本 - 不知道从哪里开始

> ID：13186927
> 
> 赞同：2
> 
> 时间：2012-11-01T23:11:53.170
> 
> 标签：deployment, batch-file, setup-deployment, web-deployment, putty

尝试编写一个脚本来自动将应用程序从我的 windows 机器部署到远程 linux 服务器。

我一直在努力寻找一种可接受的方法来做到这一点。

脚本需要：

*   将一些文件从我的机器复制到服务器（python 代码文件、javascripts、html 文件等...）
*   SSH 进入远程 linux 服务器并重新启动开发服务器应用程序

我不确定我是否应该为此使用 Windows 批处理文件、putty 运行的脚本或其他我不知道的东西。

朝正确的方向戳将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:21:20.377

[赛格温](http://www.cygwin.com/)怎么样？您将设置 pubkey 身份验证并仅 scp 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:39:19.300

[Kwatee](http://Www.kwatee.net)（我是作者）是一个轻量级的部署工具，正好解决了这个问题。它很容易通过简单的 Web 界面进行配置，并可用于通过鼠标单击或通过命令行脚本触发部署，您可以将其包含在构建过​​程中。

# jquery - 在 chrome 扩展中使用 JQuery 的 post 功能

> ID：13186940
> 
> 赞同：0
> 
> 时间：2012-11-01T23:12:40.267
> 
> 标签：jquery, google-chrome-extension

我正在尝试从 chrome 扩展中发布到本地主机服务器，但它似乎不起作用。

这是我的文件：

显现：

```
{
"name": "Send to server",

"version": "1.1",

"background": { "page": "background.html"},

"permissions": ["experimental", "tabs", "<all_urls>"],

"browser_action": {"name": "Send to server", "default_icon": "icon.png", "default_popup":"popup.html" },

"icons": { "16": "16.png" },

"manifest_version": 2

} 
```

background.html 非常简短，它只指向“http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js”和“background.js”。（我使用它只是为了能够包含 JQuery 并在 background.js 中使用它。还有其他方法吗？）

背景.js：

```
chrome.tabs.onUpdated.addListener(SendToServer);

function SendToServer(tabId, changeInfo, tab) {
chrome.tabs.getSelected(null, function(tab) { 

    if (changeInfo.status === 'complete'){
        chrome.experimental.infobars.show({
                tabId: tab.id,
                path: "infobar.html"
            });

            var strVar = "A page was loaded";

            alert("Before sending: " + strVar);

            $.post("http://localhost/MyDomain", {var: strVar}, 
                function(strVar ) { alert("Sending..."); }
            );
        }
  })
}; 
```

现在，alert("发送前：" + strVar); 执行，所以直到这里我做得很好。但是 .post 还没有完成。

任何的想法？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:08:20.077

如果你调试你的后台页面，你会发现有一个安全错误。您正在尝试从远程源 (ajax.googleapis.com) 加载 javascript，而您尚未在清单文件中明确允许它。而且没有jQuery，`$.post`无法运行。您需要放宽默认的[内容安全策略](http://developer.chrome.com/extensions/contentSecurityPolicy.html#relaxing-remote-script)（确保通过 https 加载 jQuery）。

事实上，在这种特殊情况下，您**实际上**应该做的是将 jQuery 文件包含在您的扩展中，并相应地将其加载到`backtround.html`. 扩展程序不是网站，与简单的 HDD 获取相比，远程调用需要大量时间。此外，在没有互联网连接时，使用远程 javascript 文件会使扩展程序无法使用/不稳定。

# java - 打印级别顺序二叉搜索树格式

> ID：13186941
> 
> 赞同：7
> 
> 时间：2012-11-01T23:12:42.993
> 
> 标签：java, binary-search-tree

我已经实现了以下代码以按级别顺序打印二叉搜索树。

```
public void printLevelOrder(int depth) {
    for (int i = 1; i <= depth; i++) {
        printLevel(root, i);
    }
}

public void printLevel(BinaryNode<AnyType> t, int level) {
    if (t == null) {
        return;
    }
    if (level == 1) {
        System.out.print(t.element);
    } else if (level > 1) {
        printLevel(t.left, level - 1);
        printLevel(t.right, level - 1);
    }
} 
```

我试图弄清楚如何改进我的代码以使其以某种格式打印出来。

例如，给定一棵树

```
 1 
   / \
  2   3
 /   / \
4   5   6 
```

目前它打印如下：

```
123456 
```

我正在寻找它打印如下：

```
Level 0: 1
Level 1: 2 3
Level 2: 4 5 6 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T23:31:55.800

不要在递归函数调用中立即打印值，而是使用字符串来保存值。这将使操作输出变得更容易。

```
public void printLevelOrder(int depth) {
    for (int i = 1; i <= depth; i++) {
        System.out.print("Level " + (i-1) + ": ");
        String levelNodes = printLevel(root, i);
        System.out.print(levelNodes + "\n");
    }
}

public String printLevel(BinaryNode<AnyType> t, int level) {
    if (t == null) {
        return "";
    }
    if (level == 1) {
        return t.element + " ";
    } else if (level > 1) {
        String leftStr = printLevel(t.left, level - 1);
        String rightStr = printLevel(t.right, level - 1);
        return leftStr + rightStr;
    }
    else // you need this to get it to compile
      return "";
} 
```

**输出：**

```
Level 0: 1 
Level 1: 2 3 
Level 2: 4 5 6 
```

# objective-c - 对使用保留/自动释放的内存管理感到困惑

> ID：13186945
> 
> 赞同：1
> 
> 时间：2012-11-01T23:12:59.830
> 
> 标签：objective-c, memory-management, retain, foundation

可以说我有以下代码：

```
@property (nonatomic, retain) *SomeObject foo;
@property (nonatomic, retain) *SomeObject bar;

@synthesize foo, bar;

self.foo = [[SomeObject alloc] init];
self.bar = [[[SomeObject alloc] init] autorelease];

if (self.foo) {
    [self.foo release];
    self.foo = nil;
}

if (self.bar) {
    [self.bar release];
    self.bar = nil;
} 
```

self.bar 出现内存泄漏。我不完全确定为什么，但我认为这是因为在调用 [self.bar release] 之​​后，self.bar 指向的对象被自动释放。当我将 self.bar 设为 nil 时，我们尝试在前一个对象（已自动释放）上调用 release，这会产生错误。这个对吗？此外，是否还有其他内存泄漏，也许是 foo？什么是正确的解决方法？

我应该删除发布声明并将两个属性都归零吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:14:54.873

您应该直接使用访问器：

```
self.foo = [[[SomeObject alloc] init] autorelease];
self.bar = [[[SomeObject alloc] init] autorelease];

if (self.foo) {
    self.foo = nil;
}

if (self.bar) {
    self.bar = nil;
} 
```

因为综合属性访问器生成代码来执行引用计数操作。

`[someObject.someProperty release]`永远不要使用该表格。

唯一不应该使用访问器的地方是部分构造状态（即初始化和`dealloc`）。在这种情况下，使用直接访问：`[ivar release], ivar = nil;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:43:02.077

您的代码中有 3 个地方错误：

```
@property (nonatomic, retain) *SomeObject foo;
@property (nonatomic, retain) *SomeObject bar;

self.foo = [[SomeObject alloc] init]; // WRONG 1
self.bar = [[[SomeObject alloc] init] autorelease];

if (self.foo) {
    [self.foo release]; // WRONG 2
    self.foo = nil;
}

if (self.bar) {
    [self.bar release]; // WRONG 3
    self.bar = nil;
} 
```

在任何方法中，您都必须平衡保留和释放，除非您直接在对象上设置实例变量。您没有直接在此处设置任何实例变量。您正在使用属性（它们是方法调用）。

1 是错误的，因为`alloc`返回一个保留实例（您（此方法）“拥有”它，因此您必须在它超出您的范围之前释放它）。您将它传递给一个方法（属性设置器），然后您不再拥有对它的引用。因此它被泄露了。

2 和 3 是错误的，因为您正在发布您不拥有的东西。属性访问是一种方法调用，普通方法调用不返回保留实例。

错误 1 ​​和 2 恰好平衡了——错误的地方太多了，以至于他们碰巧以错误的方式获得了正确的结果。错误 3 应该会导致程序崩溃，因为您过度释放。

# sql-server - SQL Server：如何将多行返回到一个变量中

> ID：13186948
> 
> 赞同：0
> 
> 时间：2012-11-01T23:13:13.260
> 
> 标签：sql-server, stored-procedures

我对使用存储过程有点陌生，所以我偶然发现了两个问题。

首先，为什么我不允许这样做？错误信息说：

> *操作数类型冲突：日期与 int 不兼容*

代码 ：

```
@time date OUTPUT

SELECT @time = ranking_date 
FROM [dbo].[t_ranking] 
WHERE ranking_date <= DATEDIFF(day, @todaysDateminusthirty, @todaysdate) 
  AND ranking_keyword = @keyword
  AND ranking_id_doman = @domainID 
```

以后如何将结果作为完整数据集返回？而不是保存到两个变量中？或者他们可以容纳不止一排？

```
ALTER PROCEDURE [dbo].[fetchRankingData]
-- Add the parameters for the stored procedure here
@domannamn [varchar](100),
@keyword [varchar](100),
@rankingen [decimal](6,2) OUTPUT,
@time date OUTPUT

AS
DECLARE @domainID int
DECLARE @todaysDateminusthirty datetime
DECLARE @todaysdate datetime

BEGIN
SET NOCOUNT ON;

IF EXISTS(SELECT 1 FROM [dbo].[t_doman] WHERE doman_namn = @domannamn)
BEGIN
set @todaysdate = getdate()
set @todaysDateminusthirty = DATEADD(day,-30,@todaysdate)

SELECT @domainID = doman_id FROM [dbo].[t_doman] WHERE doman_namn = @domannamn

IF EXISTS(SELECT 1 FROM [dbo].[t_ranking] WHERE ranking_id_doman = @domainID AND ranking_keyword = @keyword)
BEGIN   
    SELECT @rankingen = ranking_position FROM 
        [dbo].[t_ranking] WHERE   ranking_keyword = @keyword 
            AND ranking_id_doman = @domainID
    SELECT @time = ranking_date FROM 
        [dbo].[t_ranking] WHERE ranking_date <= DATEDIFF(day,@todaysDateminusthirty,@todaysdate) AND ranking_keyword = @keyword
            AND ranking_id_doman = @domainID    
END 
END
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:26:22.760

首先，为什么要将日期与天数进行比较？因为这就是`DATEDIFF(DAY, ...)`本质上返回的，两个日期之间的天数。也许你的意思是

```
ranking_date <= @todaysDateminusthirty 
```

或者

```
ranking_date <= @todaysdate 
```

或者（可能还是更好）

```
ranking_date BETWEEN @todaysDateminusthirty AND @todaysdate 
```

至于你的第二个问题，不，你不能将行存储到标量变量中，但你*可以*让你的存储过程返回一个结果集：只需使用返回行的 SELECT 语句（而不是初始化变量的语句），即换句话说，一个“正常”的 SELECT 语句。

你的存储过程的目的对我来说不是很清楚，所以我下面的建议可能与它不太相关。但这可能也不错，因为您也需要做功课，不是吗。只是您可能需要一个好的起点，以下应该（希望）为您提供一个：

```
SELECT
  ranking_position,
  ranking_date
FROM dbo.t_ranking
WHERE ranking_keyword = @keyword
  AND ranking_date BETWEEN DATEADD(day, -30, GETDATE()) AND GETDATE()
  AND ranking_id_doman IN (
    SELECT doman_id FROM dbo.t_doman WHERE doman_namn = @domannamn
  )
; 
```

你可以看到我直接在查询中替换了`@todaysDateminusthirty`和`@todaysdate`对应的表达式。如果您认为您需要这些变量（例如，您可能正在考虑扩展此过程，因此这些变量可以在身体的其他部位重复使用），然后将它们留在原处。但是，您的存储过程似乎不需要它们。

另请注意，您的`IF EXISTS`检查也不需要：如果任何时候都没有匹配项（no `@domannamn`in`t_doman`或 no `@keyword`in `t_ranking`），则结果将只是一个空数据集。这应该没问题，调用这个 SP 的模块应该只检查结果集中是否存在行来解决这种情况。

最终，整个声明可能如下所示：

```
ALTER PROCEDURE [dbo].[fetchRankingData]
@domannamn [varchar](100),
@keyword [varchar](100)
/* the OUTPUT parameters are removed as no longer needed apparently */
AS
/* no apparent need for additional variables either */
BEGIN

SET NOCOUNT ON;

SELECT
  ranking_position,
  ranking_date
FROM dbo.t_ranking
WHERE ranking_keyword = @keyword
  AND ranking_date BETWEEN DATEADD(day, -30, GETDATE()) AND GETDATE()
  AND ranking_id_doman IN (
    SELECT doman_id FROM dbo.t_doman WHERE doman_namn = @domannamn
  )
;

END 
```

我希望借此机会不会冒犯您（太多），并建议您开始阅读手册和其他地方有关存储过程主题的更多内容。[Books Online](http://msdn.microsoft.com/en-us/library/ms190782.aspx "存储过程（数据库引擎）")应该为您提供足够好的材料来开始您的改进，并且浏览/搜索 StackOverflow 也不是一个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:22:42.030

让它工作..！

```
where ranking_date >= dateadd(mm, datediff(mm, 0, getdate())+0, 0)
and ranking_date < dateadd(mm, datediff(mm, 0, getdate())+1, 0) 
```

# git - 将远程内容合并到本地仓库

> ID：13186952
> 
> 赞同：1
> 
> 时间：2012-11-01T23:13:31.433
> 
> 标签：git, version-control, git-merge, git-remote

我正在尝试将远程存储库克隆到我的本地工作区，并将内容推送到我设置要维护的新裸存储库，此存储库需要偶尔从上游存储库进行更新，并且需要将新内容推送到本地存储库出色地。

这是一个例子：

```
git clone ssh://username@whatevergitrepo.com/project 
```

我创建了一个裸仓库作为 project_local

```
mkdir project_local.git
git init --bare --share=2 project_local.git 
```

一旦远程仓库被克隆到我的工作区，因为这个远程仓库有多个分支，

```
branch1
branch2
.
.
branchN 
```

这是我为从远程获取所有分支并推送到本地裸仓库所做的工作。

```
cd project
git branch -a >&/tmp/branchinfo
sed s,.*/,, /tmp/branchinfo >&/tmp/branchinfo1                              #this remove everything before the last '/' before the actual name of the branch
for i in `cat /tmp/branchinfo1`; do git checkout $i; done                   #checkout all the branches from remote site.
for i in `cat /tmp/branchinfo1`; do git push project_local.git $i; done     # Push all the remote branches to local repo I created with all contents. 
```

在此之后，来自远程仓库的内容现在位于我的本地裸仓库中，但是如何获取各个分支的所有远程更改并将其合并到我创建的本地仓库中的相应分支？

我曾尝试使用“git remote add”，但它只获取引用，实际上并没有合并内容。

提前感谢您为我提供的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:40:21.937

听起来你所做的只是更新分支。除非您计算实际上只是参考更新的快进合并，否则没有合并。

你需要做的就是

```
git fetch original-repo
git branch -r | cut -f3- -d'/' | xargs -i{} git push new-repo original-repo/{}:{} 
```

这假设您已经为您的新仓库添加了一个远程条目并调用了它`new-repo`。

# c# - C# 开发人员用来表示他们的类作者身份的约定是什么？

> ID：13186956
> 
> 赞同：2
> 
> 时间：2012-11-01T23:13:38.380
> 
> 标签：c#, xml-comments

我从几个地方阅读并了解到 C# XML 注释中没有作者标记。但我敢肯定，经常会遇到这样的情况，我们必须使用一些方法来告诉人们某个特定的课程是由谁和谁编写的。

就我自己而言，我正在与几个人一起做一个项目，有时知道谁写了一个类、它的最后修改日期等会很有帮助。

在 Java 中，有一个`@author`, `@modified`, 等参数用于生成文档的注释。我是 C# 新手。由于 XML 注释中没有作者标记，当 C# 开发人员想要指示某个类是由他们编写的时，他们使用的约定是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T23:24:36.627

很少有专业的 C# 程序员在没有源代码管理的情况下工作，如果您使用源代码管理，“作者”或“修改”标签是完全没有意义的；因此，没有关于这个问题的公约。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:39:12.420

VB 在极少数情况下最好让您创建一个名为 VBAxmldoc.xml 的文件，这样您就可以实际为每个关键字自定义模板。C# 没有这个功能，如果你真的很想这样做，并且没有像我这样的人，你可以创建一个包含文档注释的代码片段，例如 Author。比如说创建一个类然后使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T23:20:44.683

我建议使用 XML [`<remarks>`](http://msdn.microsoft.com/en-us/library/3zw4z1ys%28v=vs.71%29.aspx)。或者您可以做大多数开发人员所做的事情，并`/* ... */`在文件顶部创建一个块。

# iphone - 识别绘制图像的最佳方法

> ID：13186959
> 
> 赞同：2
> 
> 时间：2012-11-01T23:14:38.820
> 
> 标签：iphone, objective-c, xcode, image-processing, cocos2d-iphone

今天我正在寻求有关识别绘制图像的最佳方法的建议。例如，如果您使用中文/日文键盘，您可以用手指绘制该特殊符号，它将被识别并在文本区域中放置正确的符号。我怎么能做这样的事情？我在考虑使用 cocos2d，Core Image 可以帮忙吗？

我还想问另一个问题：假设您的屏幕加载了雾纹理，并且您必须滑动手指来清洁窗口。如何做呢？作为一个很好的例子，我的水在哪里游戏使用了这样的东西，你必须用手指滑动来移除一些地面并为水腾出空间。

我希望这听起来很清楚，如果有任何答案，我将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:04:39.123

有一些关于图像识别的 SO 帖子四处流传。[这](https://stackoverflow.com/questions/23931/algorithm-to-compare-two-images)可能是您想要的最接近的匹配，并且汤姆古伦的回答非常全面。您可能还想看看 redmoskito 对[这个问题](https://stackoverflow.com/questions/843972/image-comparison-fast-algorithm)的回答。

我见过的一种相当基本的方法在这些帖子中都没有提到，如下所示：

（我不能为此归功于 - 如果其他人可以找到此帖子的来源，请告诉我！）

1.  将要比较的图像缩小到小尺寸（例如 4x4 像素）
2.  将用户的手绘图像缩小到相同大小
3.  迭代像素并将它们的（例如，RGB）数据与缩小的参考图像像素进行比较。
4.  （（在此处插入比较阈值））如果单个像素与原始图像的像素“足够相似” - 你有一个匹配。

如果您有一组封闭的比较图像，并且您知道其中一个图像将是绘制的图像（想法是每个图像将具有唯一的 4x4 像素“指纹”），这可以很好地工作。

它的整体有效性基于您用来确定定义“相似像素”的算法（例如，相似的 RGB 值、最近邻相似性等），自然，您的缩小图像越大，处理过程就越精确。我已经使用这个通用程序并成功地识别基本形状和字符。不过，您将需要一个非常好的（并且经过全面测试）的逻辑算法来实现这种生产质量。

至于你的第二个问题，我假设你的意思是如何去除你追踪手指的雾（就像现实生活中发生的那样）。实现此目的的一种方法是检测手指的位置并“绘制一个 alpha 通道”，然后将其用作雾图像的遮罩。或者，您可以直接绘制到图像并将相关像素的 alpha 值设置为 0。

这些只是一些想法，图像比较和处理的领域是巨大的。但希望这将为进一步探索提供一个起点。

**编辑：**

Apple 提供了两个不错的（与 iOS 兼容的）函数来提取像素数据。如果将它们包装在一个函数中：

```
+ (NSMutableData *)pixelDataFromImage:(UIImage *)image {

    NSMutableData *pixelData = (__bridge_transfer NSMutableData *)
    CGDataProviderCopyData(CGImageGetDataProvider(image.CGImage));
    return pixelData;
    // Return data is of the form [RGBA RGBA RGBA ....]
    //                             ^^^^ ^^^^ ^^^^
    //               Byte Index:   0123 4567 89..
    //                             ^    ^    ^
    //             Pixel Number:   px1  px2  px3
} 
```

因此，根据上述 4 个步骤将其组合成一个（最小）算法：

```
//...
NSMutableData *imagePixelData = [self pixelDataFromImage:image];
NSMutableData *referencePixelData = [self pixelDataFromImage:reference];
// Both image and reference are UIImages

if ([imagePixelData length] != [referencePixelData length]) {
    return 0.0f; // Can't compare, different number of pixels
}

Byte *imagePixelBytes = [imagePixelData mutableBytes];
Byte *referencePixelBytes = [referencePixelData mutableBytes];

int totalDifference = 0;
float averageDifference = 0;
int bytesCompared = 0;

for (int i = 0; i < [imagePixelData length]; i++) {

    if ((i+1) % 4 == 0) { // Compare only alpha values in this example
                          // (compares images ignoring colour)

        int difference = (int)fabs(imagePixelBytes[i] - referencePixelBytes[i]];
        totalDifference += difference;
        bytesCompared += 1;
    }
}

averageDifference = totalDifference/bytesCompared;
float similarity = 1.0f - (averageDifference/255);
return similarity;
// 1.0 => Exact match
// Now you need to determine a threshold for "how similar means 'the same'". 
```

正如我所说，这只是最小的，但它是实现上述过程的一种方式。当然，这两个 Core Graphics 函数让生活变得更加轻松，一旦你有了数据，你最终只是比较了两个字节数组。请注意，您仍然需要首先缩小图像（使用 Core Graphics） - 有一些关于此的教程（[例如这里](https://stackoverflow.com/questions/4394491/how-to-compress-resize-image-on-iphone-os-sdk-before-uploading-to-a-server)）。

# ruby - Ruby - 未定义的局部变量或方法

> ID：13186964
> 
> 赞同：0
> 
> 时间：2012-11-01T23:15:26.583
> 
> 标签：ruby, function, variables

我正在尝试运行这样的代码：

```
class Run_Fiction_Generator < Fiction_Generator
  def generate_story
    puts "Title: \"#{generator.title} #{generator.random_date}\""
    puts "---------"
    puts generator.story
  end
end

prompt = '>'

puts "Hello Welcome to Fiction Generator"
puts "First a little about me: "
puts ""

generator = Run_Fiction_Generator.new

puts "This amazing Fiction Generator was created by: #{generator.created_by}"
puts "He's a student with ID number: #{generator.student_id} "
puts ""
puts "Okay now your story! Enter '1' if you want to generate a story now, or '2' if you don't want to"
print prompt
answer = gets.chomp

if answer == "1"
  generate_story
else
  puts "It was nice meeting you, catch ya later!"
end 
```

但是语句`generator_story`中的方法不断抛出这个错误：`if`

> main:Object (NameError) 的未定义局部变量或方法“generate_story”

我的印象是我已经在我的代码中定义了该方法。谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T23:19:40.113

`generate_story`是一种方法，`Run_Fiction_Generator`它应该像这样调用：

```
generator.generate_story 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:38:04.047

您的另一个问题是您如何访问生成故事方法中的变量和方法。尝试这个：

```
class Run_Fiction_Generator < Fiction_Generator
  def random_date
    "10/20/2012"
  end

  def title
   "Spooky, Late Halloween Story"
  end

  def generate_story
    puts "Title: \"#{title} #{random_date}\""
    puts "---------"
    puts @story
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T19:19:14.587

顺便说一句：类名是“错误的”

使用 CamelCase 作为类名，而不是 '_ 来分隔。

# jsf-2 - Primefaces：从嵌套数据表中选择行

> ID：13186965
> 
> 赞同：0
> 
> 时间：2012-11-01T23:15:30.847
> 
> 标签：jsf-2, groovy, datatable, primefaces, nested

我正在使用 Primefaces 3.4 和 Groovy。我创建了对象`Part`并且`Attachment`：

```
class Part {
    Attachment selectedAttachment
    List<Attachment> attachments = []

    AttachmentDataModel getAttachmentModel() {
        return new AttachmentDataModel(attachments)
    }
}

class Attachment {
    String fileName
    String fileType
    String description
} 
```

我的视图嵌套了 DataTables，如下所示：

```
<p:dataTable value="#{mybean.parts}" var="part" rendered="#{mybean.attachmentsFound}">
    <p:column>
        <p:dataTable 
            var="attachment"
            selectionMode="single"
            value="#{part.attachmentModel}"
            selection="#{part.selectedAttachment}"
            >
            <p:column headerText="File Name">
                #{attachment.fileName}
            </p:column>
            <p:column headerText="File Description" style="width: 200px">
                #{attachment.description}
            </p:column>
            <p:column headerText="File Type" style="width: 20px">
                #{attachment.fileType}
            </p:column>
        </p:dataTable>
    </p:column>
</p:dataTable> 
```

我希望能够为每个部件选择一个附件。

**问题：**只有*第一*部分`selectedAttachment`被设置为*最后*选择的附件！

**问题：**如何启用每个零件实例来保存其选定的附件？谢谢你的时间。

*注意：如果我调试我的 AttachmentDataModel，我会看到`getRowData`与我所做的一样多的选择。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:28:31.490

我仍在寻找答案，但我找到了解决方法。我改变了看法：

```
<p:dataTable value="#{mybean.parts}" var="part" rendered="#{mybean.attachmentsFound}">
    <p:column>
        <p:dataTable 
            var="attachment"
            selectionMode="single"
            value="#{part.attachmentModel}"
            selection="#{part.selectedAttachment}"
            >
            <!-- WORKAROUND -->
            <p:ajax event="rowSelect" listener="#{mybean.onRowSelect}" />
            <p:ajax event="rowUnselect" listener="#{mybean.onRowUnselect}" />
            <!-- /WORKAROUND -->
            <p:column headerText="File Name">
                #{attachment.fileName}
            </p:column>
            <p:column headerText="File Description" style="width: 200px">
                #{attachment.description}
            </p:column>
            <p:column headerText="File Type" style="width: 20px">
                #{attachment.fileType}
            </p:column>
        </p:dataTable>
    </p:column>
</p:dataTable> 
```

然后，在我的支持 bean (mybean) 中，我实现`onRowSelect/onRowUnselect`了从地图中添加/删除我的选择。附件的 id 是键，附件是值。

# php - Phalcon 中的交叉控制器变量

> ID：13186966
> 
> 赞同：7
> 
> 时间：2012-11-01T23:15:38.470
> 
> 标签：php, phalcon

为了使我的代码保持干燥，我希望能够定义“跨控制器”变量。

经典示例是我想访问在我的引导程序中加载的一些配置项。

实现这一目标的最佳实践方法是什么？

蒂姆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T01:49:31.460

您始终可以使用 Di 容器。

一旦你在 Di 中注册了一个组件，它就可以通过魔术方法在控制器中使用。例如：

```
// Bootstrap
$configFile = ROOT_PATH . '/app/config/config.ini';

// Create the new object
$config = new \Phalcon\Config\Adapter\Ini($configFile);

// Store it in the Di container
$this->di->setShared('config', $config); 
```

在您的控制器中，它很简单：

```
$config = $this->config; 
```

如果您创建一个基本控制器类，您可以在需要时在视图中传递这些对象，如下所示：

```
$this->view->setVar('config', $this->config); 
```

最后，Di 容器还可以充当注册表，您可以在其中存储您可能希望在应用程序中使用的项目。

有关在控制器中引导和访问对象的示例，请查看[phalcon/website](https://github.com/phalcon/website)存储库。它实现了引导和基本控制器模式等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-05T09:38:57.410

以下是我的设置。

```
[PHP]     5.4.1
[phalcon] 1.2.1 
```

这是我的引导程序的摘录。（/app-root/public/index.php）

```
 $di = new \Phalcon\DI\FactoryDefault();

    // I'll pass the config to a controller.
    $di->set('config', $config);

    $application = new \Phalcon\Mvc\Application();
    $application->setDI($di);
    echo $application->handle()->getContent(); 
```

这是我的基本控制器的摘录。（/app-root/app/controllers/ControllerBase.php）

```
 class ControllerBase extends Phalcon\Mvc\Controller
    {
            protected $config;

            protected function initialize()
            {
                    $this->config = $this->di->get('config');
                    $appName      = $this->config->application->appName; 
```

# ios - 将 iPad/iPhone 拍摄的图像保存到 sql server 数据库 base64

> ID：13186967
> 
> 赞同：0
> 
> 时间：2012-11-01T23:15:59.723
> 
> 标签：ios, sql-server, image

我在将数据从 iPad 应用程序保存到 SQL Server 时遇到问题。我认为这主要与数据类型有关。从数据库开始，我的图像字段为 SQL Server 数据类型：图像。我在 .NET 中寻找了一个等效的数据类型，我从这个链接中发现：http: [//msdn.microsoft.com/en-us/library/cc716729.aspx](http://msdn.microsoft.com/en-us/library/cc716729.aspx)最好的选择是字节数组：Byte[]

在我在 .NET 中使用的实体/类中，我有以下内容： public class MyClass { public Byte [] Image { get; 放; 我用来传递此数据的参数如下所示：

```
SqlParameter param_image = cmd.Parameters.Add("IMAGE", SqlDbType.Image, item.Image.Length);
param_image.Value = System.Convert.FromBase64String(item.Image);
param_image.Direction = ParameterDirection.Input; 
```

但是，我从有关尝试从字符串转换为字节数组的参数中收到错误消息。有人做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:44:28.567

两个备注：

*   item.Image 是 Byte[]，而不是 FromBase64String 所期望的 String（可能这是您的错误？）。尝试：

    param_image.Value = item.Image

*   您应该使用 varbinary(max) 而不是 IMAGE 数据类型：不推荐使用 IMAGE 数据类型（支持但将来会删除）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:42:20.067

不要使用 IMAGE，是一种已弃用的数据类型。使用 VARBIANRY(MAX)。将数据存储为 base64 编码是有问题的，因为它会浪费空间。另一方面，它确实在提供图像时节省了处理，但处理可以推送到 HTTP 服务器并因此横向扩展，而空间损失无法缓解。我倾向于存储未连接的二进制图像流。有关使用通过 HTTP 向 SQL Server 上传和下载媒体的*流语义*的完整示例，请参阅[通过 ASP.NET MVC 从 SQL Server 下载和上传图像](http://www.codeproject.com/Articles/140713/Download-and-Upload-Images-from-SQL-Server-via-ASP). 适应 iOS 交互很容易，而且这个概念可以适应做更智能的事情来实现端到端流式传输（即不是 HTTP while-file post，而是从客户端发送/接收的单个片段）。在处理大型媒体类型内容（图像、视频、文档）时，使用流语义的重要性怎么强调都不为过。

# php - 如何使用 php 或 jquery 制作两列或三列列表

> ID：13186969
> 
> 赞同：1
> 
> 时间：2012-11-01T23:16:09.910
> 
> 标签：php, jquery, css

HTML

```
<ul><h2>More useful stuff...</h2>
<li><a href="#">category 1</a></li>
<li><a href="#">category 2</a></li>
<li><a href="#">category 3</a></li>
<li><a href="#">category 4</a></li>
<li><a href="#">category 5</a></li>
<li><a href="#">category 6</a></li>
<li><a href="#">category 7</a></li>
<li><a href="#">category 8</a></li>
<li><a href="#">category 9</a></li>
<li><a href="#">category 10</a></li>
<li><a href="#">category 11</a></li>
<li><a href="#">category 12</a></li>
<li><a href="#">category 13</a></li>
<li><a href="#">category 14</a></li>
<li><a href="#">category 15</a></li>
<li><a href="#">category 16</a></li>
<li><a href="#">category 17</a></li>
<li><a href="#">category 18</a></li>
<li><a href="#">category 19</a></li>
<li><a href="#">category 20</a></li>
<li><a href="#">category 21</a></li>
<li><a href="#">category 22</a></li>
<li><a href="#">category 23</a></li>
<li><a href="#">category 24</a></li>        
</ul> 
```

我在这里有一个列表，我的问题是如何使用 php 或 jquery 自动将该列表分为 2 或 3 列

我不知道如何在 php 中使用 for 循环

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:21:31.507

试试这个名为[Columnizer 的jQuery 插件](http://welcome.totheinter.net/columnizer-jquery-plugin/)

只需将所有代码放入像 a 这样的块中，`<div id="list">`然后使用此函数将所有内容分列

```
$('#list').columnize({ columns: 3 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:33:01.210

```
<ul><h2>More useful stuff...</h2>       
    <?php
        for($i = 0; $i < 21;$i++)
        {
            if($i % 7 == 0)
            {
                echo "</ul>";
                echo "<ul style='float:left;'>";
            }
            echo "<li><a href='#'>category " . $i . "</a></li>";
        }
    ?>
</ul> 
```

你去吧，伙计。就像无情地提到的那样，最好的方法是 CSS。

# ruby-on-rails - 您如何获得带有资产管道和 Heroku 的电子邮件的完整图像 URL？

> ID：13186975
> 
> 赞同：2
> 
> 时间：2012-11-01T23:16:45.990
> 
> 标签：ruby-on-rails, email, heroku, asset-pipeline, actionmailer

我正在尝试为包含完整网址的图像的电子邮件呈现 HTML。我正在使用 Rails 3.2（资产管道）和 Heroku。我不知道我的问题在哪里。

我将此方法添加到我的应用程序助手中：

```
def image_url(source)
  "#{root_url[0..-2]}#{image_path(source)}"
end 
```

在 email.html.erb 中：

```
<img src="<%= image_url("images/email/logo.gif") %>" width="102" height="40"> 
```

但是这些电子邮件会导致以下内容：

```
http://assets/email/logo-64cb67810752117f1de94cbb1c57a146.png 
```

我认为这意味着我的 root_url 在 Heroku 上是空白的。我尝试在我的 production.rb 文件中设置它，如下所示：

```
config.action_controller.default_url_options = { host: "www.domainname.com" } 
```

但这似乎不起作用。

我需要做什么才能在电子邮件中正确呈现带有完整 url 的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:47:44.410

尝试使用

```
Rails.application.routes.default_url_options[:host]= 'www.domainname.com' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T01:52:38.823

在rails4中

config/environments 文件夹，你可能有三个环境特定的文件，你可以把这个配置来设置你的域

`config.action_mailer.asset_host = 'http://www.yourdomain.com'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-25T16:38:49.677

你也可以这样做：`image_url('file.png', host: 'http://example.com')`

# fonts - Libgdx 如何翻转 BitmapFont？

> ID：13186976
> 
> 赞同：6
> 
> 时间：2012-11-01T23:17:01.030
> 
> 标签：fonts, libgdx, bitmap-fonts

我正在使用 BitmapFont 来呈现文本问题是我决定使用 TrueTypeFontFactory.createBitmapFont 方法来创建 BitmapFont，这样我就可以使用自己的字体而不是默认字体。文本渲染没有问题，除了它在 y 轴上翻转，在使用 TrueTypeFontFactory.createBitmapFont 方法之前，我只需创建一个 BitmapFont 并在构造函数中传递 true 以翻转它，但现在我使用的是 TrueTypeFontFactory 我不能那样做，在创建 BitmapFont 之后我似乎无法做到这一点，因为没有方法可以这样做。所以我想知道在这种情况下如何翻转字体？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T12:53:39.583

您可以尝试调用 font.setScale(1, -1); 创建后，但我不知道更好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-25T20:07:44.930

您可以使用 Flip=true 函数的 FreeTypeFontParameter ( `parameter.flip=true`)**默认为 false**

```
 FreeTypeFontGenerator generator = new FreeTypeFontGenerator(Gdx.files.internal("font/font.ttf"));
    FreeTypeFontParameter parameter = new FreeTypeFontParameter();
    parameter.size = 12;
    parameter.flip=true;
    BitmapFont font = generator.generateFont(parameter); // font size 12 pixels 
```

*源*：[https ://github.com/libgdx/libgdx/wiki/Gdx-freetype](https://github.com/libgdx/libgdx/wiki/Gdx-freetype)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-23T10:16:25.603

将**BitmapFont**构造函数中的布尔参数设置为 true：

```
//to load custom font:
font = new BitmapFont(Gdx.files.internal("data/fonts/font.fnt"), Gdx.files.internal("data/fonts/font.png"), true);
//to load default arial font:
font = new BitmapFont(true); 
```

# c# - 在其他计算机wpf c#中自动调整应用程序的大小

> ID：13186983
> 
> 赞同：0
> 
> 时间：2012-11-01T23:17:55.620
> 
> 标签：c#, wpf, xaml

我在 wpf c# 中创建了一个带有 17 英寸液晶显示器的应用程序......现在当我构建我的应用程序并尝试运行到其他计算机时，比如我朋友的 10 英寸上网本。我的主窗体的大小还可以，但子窗口和其他主控制按钮仍然很大。它不适合屏幕...嗯...注意：我所有的子窗口都是使用这个 xaml 标头创建的，如下所示：

```
 Background="Transparent" 
    AllowsTransparency="True" 
    WindowStyle="None"        
    WindowStartupLocation="CenterScreen" 
    ShowInTaskbar="False" 
    DataContext="{Binding RelativeSource={RelativeSource Self}}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:08:56.450

放

```
SizeToContent="WidthAndHeight" 
```

我希望这将有所帮助。

# java - 用空格对字符串值进行排序

> ID：13186985
> 
> 赞同：2
> 
> 时间：2012-11-01T23:18:20.703
> 
> 标签：java, string, sorting

我正在学习 JAVA，我有一个关于排序字符串的问题。

在 String ArrayList 我们有字符串值 STRUCTURE 是 "0" + " " + "some string"

例如，

```
 | String
     | 0 AA
     | 1 BB
     | 2 AA
     | 3 AA
     | 4 CC
     | 5 BB 
```

和

当我们对其进行排序时，结果应该是

```
 | String 
     | 0 AA
     | 2 AA
     | 3 AA
     | 1 BB
     | 5 BB
     | 4 CC 
```

如何使用“数字字符串”+“”+“字符串”对字符串进行排序

谢谢

更新：

我用 1 AA
2 AA
3 BBB
4 CC
5 BBB
6 AA
7 BBB
8 CC
9 ZZZ
10 QQQ 测试了代码攻击

我得到了

0 AA

1 AA

5 AA

4 血脑屏障

2 血脑屏障

6 BBB

3 抄送

7 抄送

9 QQ

8 ZZZ

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T23:45:25.177

扩展`Comparator`解决方案（这确实是您应该解决此问题的方式）：

```
Collections.sort(yourList, new Comparator<String>() {
    @Override
    public int compare(String s1, String s2) {
        String[] split1 = s1.split(" ");
        String[] split2 = s2.split(" ");

        int n = split1[1].compareTo(split2[1]);

        if (n == 0) {
            return Integer.valueOf(split1[0]).compareTo(
                                  Integer.valueOf(split2[0]));
        }

        return n;
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T23:22:31.767

使用`Collections.sort(List, Comparator)`. 您需要提供自己的`Comparator`实现，它实现了您的排序要求。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-11-01T23:27:26.470

我在编码时确实考虑了空间和时间的复杂性。我不太确定它的效率是否足够，但它会给你一个想法。

```
 List<String> l = new ArrayList<>();

        l.add("0 CC");
        l.add("1 BB");
        l.add("2 AA");
        l.add("3 AA");

    String str="";
    for(String s: l){
        str+=s+",";
    }
    String[] sArr = str.split(",");
    String temp="";
    for(int i=0; i<sArr.length;i++) {
        for(int j= i+1; j<sArr.length;j++){
            if(sArr[i].split("\\s")[1].compareToIgnoreCase(sArr[j].split("\\s")[1])>0){
                temp= sArr[j];
                sArr[j]= sArr[i];
                sArr[i]=temp;
            }
        }
    }
    for(String g: sArr){
        System.out.println(g);
    }

output:
2 AA
3 AA
1 BB
0 CC 
```

# chef-infra - 你如何使厨师资源成为可选的？

> ID：13186989
> 
> 赞同：7
> 
> 时间：2012-11-01T23:18:54.587
> 
> 标签：chef-infra, configuration-management

我在厨师食谱中有一个资源，我想成为可选的。也就是说，当配方运行时，如果资源失败，我希望其他一切继续进行。当然，我仍然想知道该资源是否存在故障，只是它不是关键资源，没有任何东西依赖于它，所以我宁愿继续运行其余部分。

我习惯于使用 Puppet，您必须显式声明您的依赖项，并且仅当它们的依赖项失败而不是一次失败导致整个文件的其余部分无法运行时才会跳过资源。

不知道为什么这不是一个真正的问题（即使在阅读了常见问题解答之后），但我会添加一些示例代码来说明我在问什么，希望其他人可以投票重新打开或回答。

我正在使用 chef 来设置开发环境，其中一部分只是克隆一些 git repos 以使其到位。没有什么取决于他们，偶尔会有一些开发人员无法访问的私人仓库。如果克隆失败，我希望其他资源继续运行。

因此，对于以下资源：

```
["foo", "bar", "baz"].each do |repo|
  git repo do
    repository  "git@github.com/example/#{repo}"
    reference   "master"
    action      :sync
    depth       1
    user        'dev'
    group       'dev'
    destination "#{node[:src_dir]}/#{repo}"
  end
end 
```

如果运行它的用户没有克隆 foo 的权限，我希望 foo 失败，但 bar 和 baz 仍然克隆。这怎么可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T21:38:55.220

你可以设置`ignore_failure true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:36:00.993

一种可能性是创建您自己的提供程序类，该类将子类`Chef::Provider::Git`化并更改您在子类中不喜欢的行为。您可以使用资源中的`provider`属性方法来设置该资源的提供程序类 - 在这种情况下，设置为您的提供程序类。您可能会将提供程序类放在库文件中。

# jquery - 如果在 jQuery 中打开了其他手风琴，则关闭手风琴

> ID：13186993
> 
> 赞同：7
> 
> 时间：2012-11-01T23:19:17.113
> 
> 标签：jquery

我在一页上有多个 jQuery 手风琴，它们都具有不同的 ID 等。我试图一次只允许打开一个手风琴。例如，用户打开一个手风琴，然后继续使用不同的手风琴，当用户刚刚使用的手风琴关闭时，新手风琴打开。

有没有这样做？

下面是一个手风琴的例子……它们现在看起来都一样。

```
<div id="accordion">

<h3 class="one" href="#section1">Location</a></h3>
<div class="tab1">

    <form class="myform">
    <label><b>Weeks</b></label><br>
        <input type = "checkbox" id = "allweeks" /> <label for = "allweeks">All Weeks</label><br>
        <input type = "checkbox" id = "w1" /> <label for = "w1">Week 1</label><br>
        <input type = "checkbox" id = "w2" /> <label for = "w2">Week 2</label><br>
        <input type = "checkbox" id = "w3"  /> <label for = "w3">Week 3</label><br>
        <input type = "checkbox" id = "w4" /> <label for = "w4">Week 4</label><br>
        <input type = "checkbox" id = "w5" /> <label for = "w5">Week 5</label></br>
        <input type = "checkbox" id = "w6"  /> <label for = "w6">Week 6</label><br>
        <input type = "checkbox" id = "w7" /> <label for = "w7">Week 7</label><br>
        <input type = "checkbox" id = "w8" /> <label for = "w8">Week 8</label><br>
        <input type = "checkbox" id = "w9" /> <label for = "w9">Week 9</label><br>
        <input type = "checkbox" id = "w10"  /> <label for = "w10">Week 10</label><br>
        <input type = "checkbox" id = "w11"  /> <label for = "w11">Week 11</label><br>
        <input type = "checkbox" id = "w12"  /> <label for = "w12">Week 12</label><br>

     </form>

</div> 
```

这些是我目前正在使用的脚本

```
 <script>

$(function() {
    $( "#accordion,#accordion1,#accordion2,#accordion3,#accordion4,#accordion5" ).accordion();

});

$(function() {
    var icons = {
        header: "ui-icon-circle-arrow-e",
        headerSelected: "ui-icon-circle-arrow-s"
    };
    $( "#accordion,#accordion1,#accordion2,#accordion3,#accordion4,#accordion5" ).accordion({
        icons: icons,
        collapsible: true
    });
    $( "#toggle" ).button().toggle(function () {
        $( "#accordion,#accordion1,#accordion2,#accordion3,#accordion4,#accordion5" ).accordion( "option", "icons", false );
    }, function () {
        $( "#accordion,#accordion1,#accordion2,#accordion3,#accordion4,#accordion5" ).accordion( "option", "icons", icons );
    });
});

$(function() {
$("#accordion,#accordion1,#accordion2,#accordion3,#accordion4,#accordion5").accordion({ header: "h3", collapsible: true, active: false }); });

</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T02:04:47.797

假设您使用的是 jQuery UI 手风琴，您可以使用`.accordion('activate', false)`.

首先，在您的 HTML 中，提供所有手风琴容器`class="accordion"`，以使它们更容易作为一个组进行寻址。`id="accordion1"`如果您需要单独处理手风琴，您可以保留etc. 属性。

**然后，在单个** 结构中初始化手风琴`$(function(){...})`（仅一次，而不是 3 次），如下所示：

```
$(function() {
    var activeAccordian = null;
    var $accordions = $(".accordion").on('click', function() {
        activeAccordian = this;
    }).accordion({
        collapsible: true,
        active: false,
        icons: false
    }).on('accordionchange', function(event, ui) {
        $accordions.not(activeAccordian).accordion('activate', false);
    });
}); 
```

**[演示](http://jsfiddle.net/ZzKvV/34/)**

跟踪活动的手风琴`activeAccordian`非常重要，因为它允许抑制新打开的手风琴的相互重新关闭。

## 编辑：

下面的“澳大利亚解决方案”`.on('accordionchange' ...)`被替换为`.on('click' ...)`让我意识到整个事情将简化为：

```
$(function() {
    var $accordions = $(".accordion").accordion({
        collapsible: true,
        active: false,
        icons: false
    }).on('click', function() {
        $accordions.not(this).accordion('activate', false);
    });
}); 
```

跟踪活动手风琴的需要消失了，因为`.not(this)`在点击处理程序中就足够了。

**[演示](http://jsfiddle.net/ZzKvV/34/)**

# jquery - jQuery悬停动画 - 如何在鼠标悬停时正确停止

> ID：13186994
> 
> 赞同：0
> 
> 时间：2012-11-01T23:19:17.393
> 
> 标签：jquery, hover

我的问题是，当我将鼠标快速移动到方形元素上然后用光标退出时，它有时无法完成悬停功能的“mouseout”部分

我的 HTML：

```
<div id="wrapper">
    <div id="o1" class="square"></div>
    <div id="o2" class="square"></div>
</div> 
```

CSS

```
#wrapper {
    width: 100px;
    height: 100px;
    position: relative;
}
.square {
    width: 100px;
    height: 100px;
    position: absolute;
}
#o1 {
    background: red;
}
#o2 {
    background: blue;
    display:none;
} 
```

Javascript：

```
$(function(){
    var o1 = $("#o1");
    var o2 = $("#o2");
    $('#wrapper').hover(function() {
        o1.fadeOut(400,function () {
            o2.fadeIn(400);
        });
    }, function() {
        o2.fadeOut(400,function () {
            o1.fadeIn(400);
        });
    });
}); 
```

jsFiddle：http: [//jsfiddle.net/TQ37t/](http://jsfiddle.net/TQ37t/)

我尝试`stop()`在代码中的不同位置使用不同的参数，但没有成功。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:26:00.130

我想出的最简单的解决方案是确保在添加任何新动画之前停止所有队列：

```
var o1 = $("#o1");
var o2 = $("#o2");
$('#wrapper').hover(function() {
    o2.stop(true, true);
    o1.stop(true, true);
    o1.fadeOut(400,function () {
        o2.fadeIn(400);
    });
}, function() {
    o1.stop(true, true);
    o2.stop(true, true);
    o2.fadeOut(400,function () {
        o1.fadeIn(400);
    });
}); 
```

请注意，停止队列时**顺序很重要。**考虑以下顺序：

```
 o1.fadeOut(400,function () {
        o2.fadeIn(400);
    });
    o2.stop(true, true); // at this point, o1 can still queue a new animation onto o2
        // at this point, o1 might finish fadeOut() and begin o2.fadeIn()
    o1.stop(true, true); // We should have stopped this one first 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:36:30.470

让我们假设 o1 是可见的，而 o2 是隐藏的。如果我们快速进出，会发生以下情况：

*   o1 开始淡出
*   o2 开始淡出 - 立即结束，已经隐藏
*   o1 被告知淡入，因为 o2 淡出
*   由于 o1 淡出，o2 被告知淡入

你得到的是两个形状同时可见。这随后会导致进一步的不一致。

您需要做的是在 mouseover/mouseout 上设置一个标志，该标志定义鼠标是否悬停`#wrapper`。您也有类似的淡入/淡出指令，就像现在一样。但是对于回调，运行一个读取标志并确定需要淡入的对象的函数。

```
$(function(){
    var o1 = $("#o1");
    var o2 = $("#o2");
    var over = false;
    choose = function() {
        if (over) {
            o2.fadeIn(400);
        } else {
            o1.fadeIn(400);
        }
    }
    $('#wrapper').hover(function() {
        over = true;
        o1.fadeOut(400,choose);
    }, function() {
        over = false;
        o2.fadeOut(400,choose);
    });
}); 
```

JSFiddle：http: [//jsfiddle.net/TQ37t/2/](http://jsfiddle.net/TQ37t/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T00:18:02.227

因为有两个不同的队列同时运行，让它们停止是个问题。我想出的一个解决方案是创建一个可以控制、停止等的单个队列。Javascript 看起来像这样：

```
var o1 = $("#o1");
var o2 = $("#o2");
var wrapper = $('#wrapper');

function funcToFadeInOutDequeue(jq, isIn) {
    if (isIn) {
        return function() {
            jq.fadeIn(400, function() {
                wrapper.dequeue();
            });
        };
    } else {
        return function() {
            jq.fadeOut(400, function() {
                wrapper.dequeue();
            });
        };
    }
}

wrapper.hover(function() {
    wrapper.stop(true);
    wrapper.queue( funcToFadeInOutDequeue(o1, false) );
    wrapper.queue( funcToFadeInOutDequeue(o2, true) );
}, function() {
    wrapper.stop(true);
    wrapper.queue( funcToFadeInOutDequeue(o2, false) );
    wrapper.queue( funcToFadeInOutDequeue(o1, true) );
}); 
```

看[小提琴](http://jsfiddle.net/slashingweapon/DhT5P/)...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T23:38:23.640

Stop 实际上解决了问题（如果这是您想要的效果）：

```
$(function(){
var o1 = $("#o1");
var o2 = $("#o2");
$('#wrapper').hover(function() {
    o1.fadeOut(400,function () {
        o2.fadeIn(400);
    });
}, function() {
    o1.stop();
    o2.fadeOut(400,function () {
        o1.fadeIn(400);
    });
}); 
```

}); ​</p>

[http://jsfiddle.net/adam_gajzlerowicz/TQ37t/3/](http://jsfiddle.net/adam_gajzlerowicz/TQ37t/3/)

# java - 在 Java 中寻找搭配模式

> ID：13186995
> 
> 赞同：4
> 
> 时间：2012-11-01T23:19:27.563
> 
> 标签：java, nlp, stanford-nlp

我正在一个需要使用搭配的项目中工作。我创建了以下代码来提取它们。该代码接受一个字符串并返回该字符串中的搭配模式列表。我已经使用斯坦福 POS 进行标记。

我需要您对代码的建议，当我处理大量文本时，它似乎很慢。任何改进代码的建议都将受到高度赞赏。

```
/**
*
*  A COLLOCATION is an expression consisting of two or more words that
*  correspond to some conventional way of saying things.
* 
*  I used the seventh Part-of-speech-tag patterns for collocation filtering that 
*  were suggested by Justeson and Katz(1995).
*  These patterns are:
* 
*  -----------------------------------------
*  |Tag |     Pattern Example              |
*  -----------------------------------------
*  |AN  | linear function                  |
*  |NN  | regression coefficients          |
*  |AAN | Gaussian random variable         |
*  |ANN | cumulative distribution function |
*  |NAN | mean squared error               |
*  |NNN | class probability function       |
*  |NPN | degrees of freedom               |                     
*  -----------------------------------------
*  Where A=adjective, P=preposition, & N=noun.
* 
*  Stanford POS have been used for the extraction process. 
*  see: http://nlp.stanford.edu/software/tagger.shtml#Download
* 
*  more on collocation:    http://nlp.stanford.edu/fsnlp/promo/colloc.pdf
*  more on POS:            http://acl.ldc.upenn.edu/J/J93/J93-2004.pdf
*  
*/

public class GetCollocations {
    public static ArrayList<String> GetCollocations(String text) throws IOException,                ClassNotFoundException{
       MaxentTagger tagger = new MaxentTagger("taggers/wsj-0-18-left3words.tagger");
       String[] tagged = tagger.tagString(text).split("\\s+");

       ArrayList<String> collocations = new ArrayList();
       for (int i = 0; i < tagged.length; i++) {

           String pot = tagged[i].substring(tagged[i].indexOf("_") + 1);
           if (pot.equals("NN") || pot.equals("NNS") || pot.equals("NNP") ||    pot.equals("NNPS")) {

               pot = tagged[i + 1].substring(tagged[i + 1].indexOf("_") + 1);
               if (pot.equals("NN") || pot.equals("NNS") || pot.equals("NNP") || pot.equals("NNPS")) {

                collocations.add(GetWordWithoutTag(tagged[i]) + " " + GetWordWithoutTag(tagged[i + 1]));

                pot = tagged[i + 2].substring(tagged[i + 2].indexOf("_") + 1);
                if (pot.equals("NN") || pot.equals("NNS") || pot.equals("NNP") || pot.equals("NNPS")) {
                    collocations.add(GetWordWithoutTag(tagged[i]) + " " + GetWordWithoutTag(tagged[i + 1]) + " " + GetWordWithoutTag(tagged[i + 2]));
                }

            } else if (pot.equals("JJ") || pot.equals("JJR") || pot.equals("JJS")) {
                pot = tagged[i + 2].substring(tagged[i + 2].indexOf("_") + 1);

                if (pot.equals("NN") || pot.equals("NNS") || pot.equals("NNP") || pot.equals("NNPS")) {
                    collocations.add(GetWordWithoutTag(tagged[i]) + " " + GetWordWithoutTag(tagged[i + 1]) + " " + GetWordWithoutTag(tagged[i + 2]));
                }

            } else if (pot.equals("IN")) {
                pot = tagged[i + 2].substring(tagged[i + 2].indexOf("_") + 1);

                if (pot.equals("NN") || pot.equals("NNS") || pot.equals("NNP") || pot.equals("NNPS")) {
                    collocations.add(GetWordWithoutTag(tagged[i]) + " " + GetWordWithoutTag(tagged[i + 1]) + " " + GetWordWithoutTag(tagged[i + 2]));
                }

            }

        } else if (pot.equals("JJ") || pot.equals("JJR") || pot.equals("JJS")) {
            pot = tagged[i + 1].substring(tagged[i + 1].indexOf("_") + 1);
            if (pot.equals("NN") || pot.equals("NNS") || pot.equals("NNP") || pot.equals("NNPS")) {
                collocations.add(GetWordWithoutTag(tagged[i]) + " " + GetWordWithoutTag(tagged[i + 1]));
                pot = tagged[i + 2].substring(tagged[i + 2].indexOf("_") + 1);
                if (pot.equals("NN") || pot.equals("NNS") || pot.equals("NNP") || pot.equals("NNPS")) {
                    collocations.add(GetWordWithoutTag(tagged[i]) + " " + GetWordWithoutTag(tagged[i + 1]) + " " + GetWordWithoutTag(tagged[i + 2]));
                }

            } else if (pot.equals("JJ") || pot.equals("JJR") || pot.equals("JJS")) {
                pot = tagged[i + 2].substring(tagged[i + 2].indexOf("_") + 1);
                if (pot.equals("NN") || pot.equals("NNS") || pot.equals("NNP") || pot.equals("NNPS")) {
                    collocations.add(GetWordWithoutTag(tagged[i]) + " " + GetWordWithoutTag(tagged[i + 1]) + " " + GetWordWithoutTag(tagged[i + 2]));
                }
            }

        }

    }
    return collocations;

}
public static String GetWordWithoutTag(String wordWithTag){
    String wordWithoutTag = wordWithTag.substring(0,wordWithTag.indexOf("_"));
    return wordWithoutTag;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:04:22.680

如果您每秒处理接近 15,000 个单词，那么您将使用 POS 标记器达到极限。根据斯坦福[斯坦福 POS 标记器常见问题解答](http://nlp.stanford.edu/software/pos-tagger-faq.shtml#h)：

```
on a 2008 nothing-special Intel server, it tags about 15000 words per second 
```

你的算法的其余部分看起来很好，但如果你真的想从中榨取一些汁液，你可以预先分配一个 Array 作为静态类变量而不是 ArrayList。基本上牺牲了前期内存成本，不必在每次调用时实例化 ArrayList 或承受添加元素的[摊销 O(n) 成本](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)。

`pot`也只是关于提高代码可读性的建议，您可以考虑使用一些私有方法来检查变量是什么词性，

```
private static Boolean  _isNoun(String pot) {
    if(pot.equals("NN") || pot.equals("NNS") || pot.equals("NNP") || pot.equals("NNPS")) return true;
    else return false;
}

private static Boolean _isAdjective(String pot){
    if(pot.equals("JJ") || pot.equals("JJR") || pot.equals("JJS")) return true;
    else return false;
} 
```

另外，如果我没记错的话，您应该能够简化您正在做的事情，结合一些`if`陈述。这不会真正加快你的代码，但它会使它更好地工作。请仔细阅读，我只是试图简化你的逻辑来证明我的观点。请记住，以下代码未经测试：

```
public static ArrayList<String> GetCollocations(String text) throws IOException,                ClassNotFoundException{
    MaxentTagger tagger = new MaxentTagger("taggers/wsj-0-18-left3words.tagger");
    String[] tagged = tagger.tagString(text).split("\\s+");
    ArrayList<String> collocations = new ArrayList();

    for (int i = 0; i < tagged.length; i++) {
        String pot = tagged[i].substring(tagged[i].indexOf("_") + 1);

        if (_isNoun(pot) || _isAdjective(pot)) {
            pot = tagged[i + 1].substring(tagged[i + 1].indexOf("_") + 1);

            if (_isNoun(pot) || _isAdjective(pot)) {
                collocations.add(GetWordWithoutTag(tagged[i]) + " " + GetWordWithoutTag(tagged[i + 1]));
                pot = tagged[i + 2].substring(tagged[i + 2].indexOf("_") + 1);

                if (_isNoun(pot)) {
                    collocations.add(GetWordWithoutTag(tagged[i]) + " " + GetWordWithoutTag(tagged[i + 1]) + " " + GetWordWithoutTag(tagged[i + 2]));
                }

            } else if (pot.equals("IN")) {
                pot = tagged[i + 2].substring(tagged[i + 2].indexOf("_") + 1);

                if (_isNoun(pot)) {
                    collocations.add(GetWordWithoutTag(tagged[i]) + " " + GetWordWithoutTag(tagged[i + 1]) + " " + GetWordWithoutTag(tagged[i + 2]));
                }

            }
        }
    }
    return collocations;

} 
```