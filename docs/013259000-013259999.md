# StackOverflow 问答 13259000-13259999

# android - Android中的Json解析策略

> ID：13259000
> 
> 赞同：0
> 
> 时间：2012-11-06T20:38:17.597
> 
> 标签：android, json, performance, parsing

我有一个大的 json 文件（~3.5 MB），包含（~140）个复杂对象，对象图中的最大深度约为 4-5。我使用Gson来解析它，但它真的很慢。我尝试了一些方法来解析它（比如混合解析或使用流解析），但我无法提高性能。

我检查了内存分析器，如果我只解析对象的基本 ID，它会杀死内存（70-80%）。解析时内存中有 400-500k 个对象（主要是字符串和字符）。

如果对象图不会那么深，解析会更有效吗？你有一个好主意怎么可能更好？我也尝试了其他库（如杰克逊），但性能并没有更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:58:00.467

通过使用 Jackson，我得到了一些很好的性能提升——你不应该将整个 json 加载到内存中，而是使用 createJsonParser(Reader r)。如果它对您不起作用，那么请尝试拆分数据并使用单独的线程 - 如果单线程版本没有完全加载 CPU 是有意义的。否则尝试使用 JNI json 解析实现。

# php - ajax中的jqGrid本地数据

> ID：13259003
> 
> 赞同：0
> 
> 时间：2012-11-06T20:38:30.123
> 
> 标签：php, javascript, jquery, ajax, jqgrid

你好stackoverflow国家！我有这样的障碍。试图传入在 ajax 中检索到的 jqGrid 数组数据，但它不起作用。让我们看一下脚本 =>

```
$(function(){ // this script works just fine (of course this array and jqGrid initialization script is in the same file)
var arr = [
    {a:"a",b:"b"},
    {a:"c",b:"d"}
];
$("#_tb").jqGrid({
    datatype: "local",
    data: arr,
    colNames: ["ONE","Two"],
    colModel: [
        {name:"a",index:"a",align:"center"},
    {name:"b",index:"b",align:"center"}
    ],
    pager: $("#_pager"),
    height: "auto"
});
}); 
```

这是我的问题=>

```
$.ajax({
    url: "../info.php",
    type: "get",
    data: {},
    success: function(r){
        $("#_tb").jqGrid({
        datatype: "local",
        data: r,
        colNames: ["ONE","Two"],
        colModel: [
            {name:"a",index:"a",align:"center"},
            {name:"b",index:"b",align:"center"}
        ],
        pager: $("#_pager"),
        height: "auto"
        });
    }
    }); 
```

此脚本不起作用，但数据已在 ajax 中成功检索为 json 格式。顺便说一句，这里也是`info.php`脚本

```
// using PDO for connection
foreach($con->query("SELECT * FROM tb") as $row){
    $info[] = array(
        "a" => $row["a"],
        "b" => $row["b"]
    );
}
echo json_encode($info); 
```

PS。在我看来，我的问题与**数据类型**有关，但尽管搜索了这样的示例，但我无法下定决心如何解决这个问题。同样值得注意的是，我希望数据类型为 local ，因为在 jqGrid 中搜索和过滤数据而没有任何 SQL where 语句。有任何建议我都会很高兴，谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:36:09.260

抱歉，您发布的代码确实有效：请参阅[演示](http://www.ok-soft-gmbh.com/jqGrid/Tornike.htm)：

![在此处输入图像描述](../Images/7112dfe05c34703da772cbbaeb0c2a1e.png)

所以你应该在另一个地方搜索问题。

例如，一个可能的问题是您*多次*执行代码。您应该创建*一次*网格，然后通过更改`data`参数和触发器的值来更改数据`reloadGrid`。顺便可以`url: "../info.php"`直接在jqGrid中使用。您只需添加相应的`jsonReader`（请参见[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#jsonreader_as_function)）。为了能够使用本地过滤，您只需添加`loadonce: true`到 jqGrid 参数列表中。或者，您可以在重新创建网格*之前*`GridUnload`每次调用方法（参见示例[的答案](https://stackoverflow.com/a/4920612/315935)）。

# c - Perl 中的并发输入和输出

> ID：13259004
> 
> 赞同：5
> 
> 时间：2012-11-06T20:38:33.463
> 
> 标签：c, perl, pipe

最近我开始学习管道以获得乐趣。我已经卡在了几个部分上，但我认为大部分都已经弄清楚了，但是我无法弄清楚如何获取输入以同时转发到程序并从该程序输出。

目前我有这个处理管道的 Perl 脚本：

```
#!/usr/bin/perl
use strict;
use warnings;
use threads;
use FileHandle;
use IPC::Open2;

my $cv_program = "./test"; #test is the compiled C program below
my $cv_message = "";
my $cv_currentkey = "";
my $pid = open2(*PIN, *POUT, $cv_program);
my $thread_pipeout = threads->create('PIPEOUT', \&PIN);

$thread_pipeout->detach();

while($cv_currentkey ne "\n")
{
    $cv_currentkey = getc(STDIN);
    $cv_message .= $cv_currentkey;
}
print POUT $cv_message;

sub PIPEOUT
{
    my $PIN = shift;
    while(<PIN>)
    {
        print $_;
    }
} 
```

然后我有这个 C 程序，它只输出一些东西，要求一个字符串，然后打印那个字符串：

```
#include <stdio.h>

int main(int argc, char const *argv[])
{
    char input[100] = {0};

    printf("This is a test.\n");
    fgets(input, 100, stdin);
    printf("You entered %s\n", input);
    return 0;
} 
```

运行 Perl 脚本的输出是：

```
~/Programming/Perl Pipes$ ./pipe.pl
Hello
This is a test.
You entered Hello 
```

注意它在接受输入时会阻塞，然后在一个块中打印所有内容。我需要它来打印这是一个测试，然后像实际程序一样等待输入。

我还要注意的是我在 Perl 脚本中使用 getc 而不是 STDIN 的原因是因为我找不到让 STDIN 不阻塞 test.c 输出的方法，但是 getc 在时刻。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T20:47:30.803

我认为问题主要出在 C 端而不是 Perl 端。C 看到它的标准输出将进入管道，因此在查询标准输入之前确保它刷新其标准输出缓冲区并不是很严格。

要解决此问题，您应该可以添加以下行：

```
fflush(stdout); 
```

在第一个之后`printf`和之前`fgets`。

（免责声明：未经测试。）

# view - MVC4 不显示默认值

> ID：13259005
> 
> 赞同：0
> 
> 时间：2012-11-06T20:38:35.133
> 
> 标签：view, asp.net-mvc-4, default-value

在我的模型中：

```
[Required]
    [DefaultValue("Some text ...")]
    public string SomeValue{ get; set; } 
```

在我看来：

```
 @Html.TextBoxFor(model => model.SomeValue) 
```

开始时文本框为空，我希望它包含默认值。

如果你能帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:47:29.580

[http://support.microsoft.com/kb/311339](http://support.microsoft.com/kb/311339)

> [...] 但是， DefaultValue 属性不会导致初始值使用属性值进行初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:49:39.763

您需要在模型的构造函数中设置值...

```
public class MyModel {

    public MyModel() {
        SomeValue = "Some text...";
    }

    [Required]
    [DefaultValue("Some text ...")]
    public string SomeValue{ get; set; }
} 
```

`DefaultValueAttribute`不是用于设置值 - 用于稍后进行比较。例如，当从用户输入映射模型时，您可以检查是否`SomeValue`已输入，因为您可以检查它是否与`DefaultValue`.

# css - 我在将文本定位到图像时遇到问题

> ID：13259006
> 
> 赞同：0
> 
> 时间：2012-11-06T20:38:44.337
> 
> 标签：css, thumbnails, css-position

我遇到了问题，因为当我将文本定位到消息中时，下面会出现一个空白区域。

这是图像：

[http://img713.imageshack.us/img713/6513/llllmm.jpg](http://img713.imageshack.us/img713/6513/lllmm.jpg)

这是我正在使用的 CSS 代码。我不知道错误在哪里。

```
 .thumbnail2{
    position:relative;
    width:100%;
    margin:0 auto;
}
.thumbnail2 img{
    width:100%;
        height:auto;
}
.thumbnail2 h1{
    display:block;
    position:relative;
    top:-90px;
    left: 0;
    padding-left:5px;
        background: rgb(0, 0, 0);
    background: rgba(0, 0, 0, 0.7);
}
.thumbnail2 h1 span{
    font-size:34px;
    letter-spacing: -1px;
    line-height:40px;
}
.thumbnail2 h1 a{
    color:#FFF;
} 
```

这是 HTML / PHP（我在 Wordpress 中使用它）：

```
<div class="post">
                    <div class="thumbnail2">
                        <?php the_post_thumbnail('grandote'); ?>
                        <h1><span><a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title(); ?>"><?php the_title(); ?></a></span></h1>
                    </div>
                        <div class="excerpt2"><p><?php echo get_excerpt(280); ?></p></div>
                    <div class="clear"></div>
                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:45:17.493

从我收集的内容中，您想要在缩略图顶部显示文本。

你应该给`.thumbnail2` `position: relative`和`.thumbnail2 h1` `position: absolute`。这可以解决问题，之后您只需将 h1 标签定位在正确的位置，这一次是他的位置相对于他的父`div`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:45:04.400

尝试为相对定位的元素添加负边距：

```
.thumbnail2 h1{
    display:block;
    position:relative;
    top:-90px;
    left: 0;
    padding-left:5px;
    background: rgb(0, 0, 0);
    background: rgba(0, 0, 0, 0.7);

    margin-bottom: -90px; // This should fix it
} 
```

# android - 无法将整数值传递给第二个活动

> ID：13259008
> 
> 赞同：0
> 
> 时间：2012-11-06T20:38:45.930
> 
> 标签：android, int, android-activity, bundler

我从第 1 次调用第 2 次活动：

```
Intent intent = new Intent();
intent.setClass(MainActivity.this,  SecondActivity.class);
Bundle b = new Bundle();
b.putInt(SecondActivity.ID,id);
System.out.println("id*"+id);
b.putString(SecondActivity.NAME, name);
System.out.println("name*"+name);
intent.putExtras(b);
startActivity(intent); 
```

日志猫：

```
11-06 19:33:57.451: I/System.out(7987): id*2
11-06 19:33:57.451: I/System.out(7987): name*MrBlack 
```

第二个活动：

```
public static final String ID = "";
public static final String NAME = "";
................
Bundle extras = getIntent().getExtras();
int id = extras.getInt(ID);

System.out.println("extras.getInt(ID)*"+extras.getInt(ID));
System.out.println("extras.getString(ID)*"+extras.getString(ID));
System.out.println("extras.getString(NAME)*"+extras.getString(NAME));
TextView tvFirmaName = (TextView) findViewById(R.id.tvName);
tvFirmaName.setText(extras.getString(NAME)); 
```

日志猫：

```
11-06 19:33:57.721: I/System.out(7987): extras.getInt(ID)*0
11-06 19:33:57.731: I/System.out(7987): extras.getString(ID)*MrBlack
11-06 19:33:57.731: I/System.out(7987): extras.getString(NAME)*MrBlack 
```

我不明白为什么 int 值 2 作为 0 传递而为什么 extras.getString(ID) 是“MrBlack”值！？

请让我知道我错在哪里..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:41:14.060

```
public static final String ID = "";
public static final String NAME = ""; 
```

您需要为这些字符串提供值，它们充当您传递的信息的变量名。它们的值是任意的，只要它们彼此不相等。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:31:18.467

附加功能类似于哈希图。所以你必须这样做：

```
b.putInt("unique key","value"); 
```

由于您使用空字符串作为键，它返回第一个带有 "" 键的字符串...

所以尝试输入如下值：

```
b.putInt("ID",id);
b.putInt("NAME",name); 
```

# c# - 比较 datagridview 中的 2 个不同的列

> ID：13259013
> 
> 赞同：2
> 
> 时间：2012-11-06T20:39:16.847
> 
> 标签：c#, winforms, datagridview, telerik

在我`datagridview`的 1 和 2 四列是只读的，列 3 和 4 有数字值。我想比较第 4 列必须大于第 3 列。例如：

![在此处输入图像描述](../Images/3f894b49c6951280483f986ba70a65e3.png)

如果第 4 列值小于第 3 列，那么我想建议消息不会导航到另一个控件。

我的简单方法似乎不起作用。对于这种情况，如何比较 2 个特定列？

```
private void datagridview_CellValidating(object sender, CellValidatingEventArgs e)
{
    try
    {
        int bbor = datagridview.CurrentCell.ColumnIndex;
        int ebor = datagridview.CurrentCell.RowIndex;
        if (ebor <= bbor)
        {
            MessageBox.Show("Please verify the value");
            e.Cancel = true;
        }
    }
    catch (Exception exception)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:38:56.827

对于您的验证检查，您需要使用该[`FormattedValue`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcellvalidatingeventargs.formattedvalue.aspx)来查看您的用户想要在他们编辑的单元格中插入什么值。您不能使用当前单元格值，因为它在未设置为 true的`CellValidating`情况下完成后才会更新为新值。`DataGridViewCellValidatingEventArgs.Cancel`

像这样的东西：

```
private void datagridview_CellValidating(object sender, DataGridViewCellValidatingEventArgs e) {
    // This is the new proposed value the user entered; could be for column 3 or 4.
    int newValue = int.Parse(e.FormattedValue.ToString());

    // See which column fired the CellValidating event and use the new proposed value for it
    // in place of the cell's actual value for purposes of our validation.
    int col3Value = (e.ColumnIndex == 2) ? newValue : (int)dataGridView1[2, e.RowIndex].Value;
    int col4Value = (e.ColumnIndex == 3) ? newValue : (int)dataGridView1[3, e.RowIndex].Value;

    if (col3Value <= col4Value) {
        MessageBox.Show("Please verify the value");
        e.Cancel = true;
    }
} 
```

我在这里展示的代码是为了演示您的问题的解决方案。在您的实际生产代码中，您需要验证从 object 到 int 的转换是否成功（通过[`int.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)）或捕获此操作失败时引发的异常。发生这种情况时，您可以`Cancel = true`对单元格进行验证并向用户显示他必须输入数字的消息。

另一个快速说明：[不要使用空的 catch 块](https://stackoverflow.com/questions/1234343/why-are-empty-catch-blocks-a-bad-idea)（尽管我意识到这可能不在您的生产代码中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:51:14.880

我们再见面。使用 cell_click 事件：

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex != 0)
    {
        if (Double.Parse(dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString()) <= Double.Parse(dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex - 1].Value.ToString()))
        {
            MessageBox.Show("Please verify the value");
        }
    }
} 
```

**编辑1：**这似乎工作正常，让我知道。

```
private void dataGridView1_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
{
    if (e.ColumnIndex != 0)
    {
        if (Double.Parse(dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString()) <= Double.Parse(dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex - 1].Value.ToString()))
        {
            MessageBox.Show("Please verify the value");
            e.Cancel = true;
        }
    }
} 
```

**编辑 2：更新 Telerik 控件**

```
private void radGridView1_CellValidating(object sender, Telerik.WinControls.UI.CellValidatingEventArgs e)
    {
        if (e.ColumnIndex != 0)
        {
            if (e.Value != null && radGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex - 1].Value != null)
            {
                if (Double.Parse(e.Value.ToString()) <= Double.Parse(radGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex - 1].Value.ToString()))
                {
                    MessageBox.Show("error");
                    e.Cancel = true;                        
                }
            }
        }
    } 
```

![在此处输入图像描述](../Images/0e0e819b4a7355eab4af9ce06cff7d9b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T20:52:39.463

我或多或少会看到类似的东西：

如果要检查所有行：

```
DataRow dr;
for(int i = datagridview.Rows.Count-1; i > 0; i--) {
    dr = datagridview.Rows[i];
    if(dr[e.ColumnIndex] > dr[e.ColumnIndex+1]){
            //your message code     
            e.Cancel = true;
        break; (or return;)
    }
} 
```

如果您只想检查正在编辑单元格的当前行：

```
DataRow dr = datagridview.Rows[e.RowIndex];
e.Cancel = dr[e.ColumnIndex] > dr[e.ColumnIndex+1];
if(e.Cancel)
    //your message code 
```

也许您需要将对象转换为 int 进行比较。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T21:01:54.977

请参阅 DataGridView 的 Rows 属性[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rows.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rows.aspx)

> this.dataGridView1[col, row].Value

为每一行引用一个特定的单元格

```
foreach (Row r in this.dataGridView1.Rows) {
    if (r.Cells[3].Value <= r.Cells[2].Value ) {
    System.Console.WriteLine ("error");
    }
} 
```

# c - 从windows到linux的交叉编译源码

> ID：13259016
> 
> 赞同：0
> 
> 时间：2012-11-06T20:39:21.270
> 
> 标签：c, compilation

这是我的制作文件

```
EXE     = signsrch
CFLAGS  += -s -O2
PREFIX  = /usr/local
BINDIR  = $(PREFIX)/bin
SRC     = $(EXE).c

all:
    $(CC) $(CFLAGS) -c disasm.c
    $(CC) $(CFLAGS) -c asmserv.c
    $(CC) $(SRC) $(CFLAGS) -o $(EXE) *.o

install:
    install -m 755 -d $(BINDIR)
    install -m 755 $(EXE) $(BINDIR)/$(EXE)

.PHONY:
    install 
```

我想为我的ubuntu交叉编译它，我试过：

```
make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- 
```

但我收到一堆“DWORD”的未知类型名称错误

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:42:31.247

要交叉编译，您需要目标平台的工具链，而不仅仅是 Makefile。检查本[教程](http://metamod-p.sourceforge.net/cross-compiling.on.windows.for.linux.html)和[Cygwin](http://www.physionet.org/physiotools/cygwin/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:45:01.530

我们还需要看一些代码，但是......

Windows 在 vanilla C 之上有自己的基本类型，Linux 也是如此。听起来 DWORD 作为一种类型在 Linux 中是未知的（可能）。在为 Linux 平台构建时，您可能必须创建一个 mytypes.h 文件，将 DWORD 等 Windows 标准重新定义为 Linux 语言。Linux 有 types.h 定义了类似 int32_t 的东西，它是等价的。有关更多信息，请参阅[此线程](https://stackoverflow.com/questions/1154092/compiling-on-windows-and-linux)。

我假设您设置了一个有效的交叉编译器，并且您只是在使用端口。如果你没有，那是你的第一份工作。你可以有一个基于 Windows 的编译器，它以 Linux 为目标（cygwin 选项，在另一篇文章中提到），或者选择一个基于 Linux 的编译器和目标窗口（crosstool 在这里会有所帮助）。虽然由于您似乎以 arm 为目标，但我希望 Ubuntu 安装不是您想要构建的地方！:-)

# sql - SQL Server 批量插入 - “批量加载数据转换错误”

> ID：13259028
> 
> 赞同：2
> 
> 时间：2012-11-06T20:40:20.233
> 
> 标签：sql, database, sql-server-2008

```
bulk insert dbo.A
FROM 'd:\AData.csv'
WITH 
(
FIELDTERMINATOR = ',',
ROWTERMINATOR = '\n'
) 
```

将批量数据插入数据库，在查看可疑数据后，我遇到了一个无法解释的错误：

> *消息 4867，级别 16，状态 1，第 6*
> *行第 1 行第 42 列 (FES) 的批量加载数据转换错误（溢出）。*

列 FES 是`tinyint`，现在`smallint`。`d:\AData.csv`在第 1 行第 42 列中包含一个`2`。这种类型的错误还有其他来源吗？

- -附加 - -

我不确定如何正确发布此内容。

创建表脚本

```
create table AcsBy320082010Hus(
serialnoId bigint,
RT char,
DIVISION tinyint,
PUMA int,
REGION tinyint,
ST tinyint,
ADJHSG int,
ADJINC int,
WGTP int,
NP tinyint,
TYPE tinyint,
ACR tinyint,
AGS tinyint,
BDS tinyint,
BLD tinyint,
BUS tinyint,
CONP smallint,
ELEP smallint,
FS smallint,
FULP int,
GASP int,
HFL tinyint,
INSP varchar(6),
KIT tinyint,
MHP int,
MRGI tinyint,
MRGP int,
MRGT tinyint,
MRGX tinyint,
PLM tinyint,
RMS tinyint,
RNTM tinyint,
RNTP int,
SMP int,
TEL tinyint,
TEN tinyint,
VACS tinyint,
VAL tinyint,
VEH tinyint,
WATP int,
YBL tinyint,
FES tinyint,
FINCP int,
FPARC tinyint,
GRNTP int,
GRPIP tinyint,
HHL tinyint,
HHT tinyint,
HINCP int,
HUGCL bit,
HUPAC tinyint,
HUPAOC tinyint,
HUPARC tinyint,
LNGI tinyint,
MV tinyint,
NOC tinyint,
NPF tinyint,
NPP bit,
NR bit,
NRC tinyint,
OCPIP tinyint,
PARTNER tinyint,
PSF bit,
R18 bit,
R60 tinyint,
R65 tinyint,
RESMODE tinyint,
SMOCP int,
SMX tinyint,
SRNT bit,
SVAL bit,
TAXP tinyint,
WIF tinyint,
WKEXREL tinyint,
WORKSTAT tinyint,
FACRP bit,
FAGSP bit,
FBDSP bit,
FBLDP bit,
FBUSP bit,
FCONP bit,
FELEP bit,
FFSP bit,
FFULP bit,
FGASP bit,
FHFLP bit,
FINSP bit,
FKITP bit,
FMHP bit,
FMRGIP bit,
FMRGP bit,
FMRGTP bit,
FMRGXP bit,
FMVYP bit,
FPLMP bit,
FRMSP bit,
FRNTMP bit,
FRNTP bit,
FSMP bit,
FSMXHP bit,
FSMXSP bit,
FTAXP bit,
FTELP bit,
FTENP bit,
FVACSP bit,
FVALP bit,
FVEHP bit,
FWATP bit,
FYBLP bit,
WGTP1 int,
WGTP2 int,
WGTP3 int,
WGTP4 int,
WGTP5 int,
WGTP6 int,
WGTP7 int,
WGTP8 int,
WGTP9 int,
WGTP10 int,
WGTP11 int,
WGTP12 int,
WGTP13 int,
WGTP14 int,
WGTP15 int,
WGTP16 int,
WGTP17 int,
WGTP18 int,
WGTP19 int,
WGTP20 int,
WGTP21 int,
WGTP22 int,
WGTP23 int,
WGTP24 int,
WGTP25 int,
WGTP26 int,
WGTP27 int,
WGTP28 int,
WGTP29 int,
WGTP30 int,
WGTP31 int,
WGTP32 int,
WGTP33 int,
WGTP34 int,
WGTP35 int,
WGTP36 int,
WGTP37 int,
WGTP38 int,
WGTP39 int,
WGTP40 int,
WGTP41 int,
WGTP42 int,
WGTP43 int,
WGTP44 int,
WGTP45 int,
WGTP46 int,
WGTP47 int,
WGTP48 int,
WGTP49 int,
WGTP50 int,
WGTP51 int,
WGTP52 int,
WGTP53 int,
WGTP54 int,
WGTP55 int,
WGTP56 int,
WGTP57 int,
WGTP58 int,
WGTP59 int,
WGTP60 int,
WGTP61 int,
WGTP62 int,
WGTP63 int,
WGTP64 int,
WGTP65 int,
WGTP66 int,
WGTP67 int,
WGTP68 int,
WGTP69 int,
WGTP70 int,
WGTP71 int,
WGTP72 int,
WGTP73 int,
WGTP74 int,
WGTP75 int,
WGTP76 int,
WGTP77 int,
WGTP78 int,
WGTP79 int,
WGTP80 int) 
```

标题行

> 序列号，RT，DIVISION，PUMA，地区，ST，ADJHSG，ADJINC，WGTP，NP，TYPE，ACR，AGS，BATH，BDSP，BLD，BUS，CONP，ELEP，FS，FULP，GASP，HFL，INSP，MHP， MRGI,MRGP,MRGT,MRGX,REFR,RMSP,RNTM,RNTP,RWAT,SINK,SMP,STOV,TEL,TEN,TOIL,VACS,VALP,VEH,WATP,YBL,FES,FINCP,FPARC,GRNTP,GRPIP, HHL,HHT,HINCP,HUGCL,HUPAC,HUPAOC,HUPARC,KIT,LNGI,MULTG,MV,NOC,NPF,NPP,NR,NRC,OCPIP,PARTNER,PLM,PSF,R18,R60,R65,RESMODE,SMOCP, SMX,SRNT,SVAL,TAXP,WIF,WKEXREL,WORKSTAT,FACRP,FAGSP,FBAHP,FBDSP,FBLDP,FBUSP,FCONP,FELEP,FFSP,FFULP,FGASP,FHFLP,FINSP,FKITP,FMHP,FMRGIP,FMRGP,FMRGTP, FMRGXP,FMVP,FPLMP,FREFRP,FRMSP,FRNTMP,FRNTP,FRWATP,FSINKP,FSMP,FSMXHP,FSMXSP,FSTOVP,FTAXP,FTELP,FTENP,FTOALP,FVACSP,FVALP,FVEHP,FWATP,FYBLP,WGTP1,WGTP2,WGTP3, WGTP4,WGTP5,WGTP6,WGTP7,WGTP8,WGTP9,WGTP10,WGTP11,WGTP12,WGTP13,WGTP14,WGTP15,WGTP16,WGTP17,WGTP18,WGTP19,WGTP20,WGTP21,WGTP22,WGTP23,WGTP24,WGTP25,WGTP26,WGTP27,WGTP28, WGTP29,WGTP30,WGTP31,WGTP32,WGTP33,WGTP34,WGTP35,WGTP36,WGTP37,WGTP38,WGTP39,WGTP40,WGTP41,WGTP42,WGTP43,WGTP44,WGTP45,WGTP46,WGTP47,WGTP48,WGTP49,WGTP50,WGTP51,WGTP52,WGTP53,WGTP54, WGTP55,WGTP56,WGTP57,WGTP58,WGTP59,WGTP60,WGTP61,WGTP62,WGTP63,WGTP64,WGTP65,WGTP66,WGTP67,WGTP68,WGTP69,WGTP70,WGTP71,WGTP72,WGTP73,WGTP74,WGTP75,WGTP76,WGTP77,WGTP78,WGTP79, WGTP80

第 1 行

> 2008000000023,H,6,01300,3,01,1012650,1031272,00043,04,1,1,,1,02,02,2,0000,150,2,0002,020,3,00150,,2, 00980,1,1,1,03,,,1,1,,1,1,1,1,,0210000,2,0080,09,2,000058100,2,,,4,1,000058100,0, 3,3,3,1,1,1,3,02,04,0,0,02,024,0,1,0,1,0,0,1,01170,3,0,1,19,1, 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,00112,00045,00068,00017,00044,00091,00071,00032, 00036,00042,00048,00041,00013,00048,00063,00013,0003,00017,00063,00098,00026,00036,00017,00065,00036,00020,000,00014,00035,00037,00046,00047,00048,000808048,0008080 00034,00012,00061,00031,00069,00043,00060,00011,000,0001,0005.1,00050,0001,0001,000.68,00056,0003,00042,00049,00081,00041,0001,0001,00092,00050,000555， 00049,00016,00062,00041,00103,00012,00048,00060,00073,00052,00063,00038,00047,00040,00017,00040,00059,00020,00042,00010,00038,

[链接到 ACS 2008-2010 数据字典](http://www.census.gov/acs/www/Downloads/data_documentation/pums/DataDict/PUMS_Data_Dictionary_2008-2010.pdf)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T21:43:06.680

问题是您正在使用的数据类型。[`tinyint`](http://msdn.microsoft.com/en-us/library/ms187745.aspx)只能处理从 0 到 255 的整数数据。`0210000`不在该范围内。

我可以建议创建一个临时表，将这个文件转储到其中并使用所有（n）varchars 创建它吗？这样，您可以保留前导`0`s，这可能是您分析的数据类型所必需的。

从临时表中，您可以将清理操作运行到“报告”结构中，这将允许您使用更合适的数据类型，您可以通过 SQL 查询来识别这些数据类型来分析您的数据。

# c - 如何在代码中使用两次 gethostbyname

> ID：13259039
> 
> 赞同：0
> 
> 时间：2012-11-06T20:41:25.190
> 
> 标签：c, sockets, ip-address, gethostbyname

我有这个代码：

```
struct hostent *host;
struct hostent *serverHost;
if ((host = gethostbyname(param.ipadress)) == NULL)
{
  return -1;
}
if ((serverHost = gethostbyname(param.dnsserver)) == NULL)
{
  return -1;
} 
```

现在当我尝试`host->h_addr`它包含来自`param.dnsserver`. 怎么了？我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:48:03.167

`gethostbyname`并且`gethostbyaddr`是不应再使用的旧功能。

对于他们的[POSIX (2004) 描述](http://pubs.opengroup.org/onlinepubs/009695399/functions/gethostbyname.html)：

> gethostbyaddr() 和 gethostbyname() 函数可能会返回指向静态数据的指针，这些指针可能会被后续调用任何这些函数所覆盖。

这意味着您需要在后续调用之前从返回值中复制所需的部分。

此外：

> gethostbyaddr() 和 gethostbyname() 函数可能会在未来版本中取消。

事实上，它们不再存在于 POSIX 2008 中。

替代品是：

> 和函数优于 gethostbyaddr() 和 gethostbyname() 函数[`getaddrinfo()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/getaddrinfo.html)。[`getnameinfo()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/getnameinfo.html)

# google-apps-script - 使用 Apps 脚本在 Google Drive 中创建一个 zip 文件

> ID：13259041
> 
> 赞同：14
> 
> 时间：2012-11-06T20:41:29.480
> 
> 标签：google-apps-script, google-drive-api

我在 Google Drive 文件夹中有一个文件夹，其中包含几个文件。我想制作一个 Google Apps 脚本，它将压缩该文件夹中的所有文件并在同一文件夹中创建 zip 文件。

我找到了一个有`Utilities.zip()`功能的视频，但没有 API 参考。我该如何使用它？提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-07T03:09:48.603

实际上它比这更容易。文件已经是 Blob（任何具有 getBlob() 的东西都可以传递给任何需要 Blob 的函数）。所以代码看起来像这样：

```
var folder = DocsList.getFolder('path/to/folder');
folder.createFile(Utilities.zip(folder.getFiles(), 'newFiles.zip')); 
```

此外，如果您在文件夹中有多个具有相同名称的文件，它将不起作用... Google Drive 文件夹支持，但 Zip 文件不支持。

要使其适用于具有相同名称的多个文件：

```
var folder = DocsList.getFolder('path/to/folder');
var names = {};
folder.createFile(Utilities.zip(folder.getFiles().map(function(f){
  var n = f.getName();
  while (names[n]) { n = '_' + n }
  names[n] = true;
  return f.getBlob().setName(n);
}), 'newFiles.zip')); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-01-19T05:08:58.227

正如`DocsList`已弃用的那样，您可以使用以下代码压缩包含文件和子文件夹的整个文件夹，并保持其结构：

```
var folder = DriveApp.getFolderById('<YOUR FOLDER ID>');
var zipped = Utilities.zip(getBlobs(folder, ''), folder.getName()+'.zip');
folder.getParents().next().createFile(zipped);

function getBlobs(rootFolder, path) {
  var blobs = [];
  var files = rootFolder.getFiles();
  while (files.hasNext()) {
    var file = files.next().getBlob();
    file.setName(path+file.getName());
    blobs.push(file);
  }
  var folders = rootFolder.getFolders();
  while (folders.hasNext()) {
    var folder = folders.next();
    var fPath = path+folder.getName()+'/';
    blobs.push(Utilities.newBlob([]).setName(fPath)); //comment/uncomment this line to skip/include empty folders
    blobs = blobs.concat(getBlobs(folder, fPath));
  }
  return blobs;
} 
```

`getBlobs`函数将文件夹中的所有文件组成一个数组，并将每个文件名更改为其相对路径，以在压缩时保持结构。

要压缩包含多个同名项目的文件夹，请使用此`getBlob`函数：

```
function getBlobs(rootFolder, path) {
  var blobs = [];
  var names = {};
  var files = rootFolder.getFiles();
  while (files.hasNext()) {
    var file = files.next().getBlob();
    var n = file.getName();
    while(names[n]) { n = '_' + n }
    names[n] = true;
    blobs.push(file.setName(path+n));
  }
  names = {};
  var folders = rootFolder.getFolders();
  while (folders.hasNext()) {
    var folder = folders.next();
    var n = folder.getName();
    while(names[n]) { n = '_' + n }
    names[n] = true;
    var fPath = path+n+'/';
    blobs.push(Utilities.newBlob([]).setName(fPath)); //comment/uncomment this line to skip/include empty folders
    blobs = blobs.concat(getBlobs(folder, fPath));
  }
  return blobs;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-26T21:38:55.923

我能够使用@Hafez 发布的代码，但我需要修改它，因为它不适合我。我添加了前三行，因为我需要文件夹 ID，它是一个字符串值，而不是文件夹的名称。

```
var folderName = DriveApp.getFoldersByName("<folderName>");
var theFolder = folderName.next();
var folderID =theFolder.getId();
var folder = DriveApp.getFolderById(folderID);
var zipped = Utilities.zip(getBlobs(folder, ''), folder.getName()+'.zip');
folder.getParents().next().createFile(zipped);

function getBlobs(rootFolder, path) {
  var blobs = [];
  var files = rootFolder.getFiles();
  while (files.hasNext()) {
    var file = files.next().getBlob();
    file.setName(path+file.getName());
    blobs.push(file);
  }
  var folders = rootFolder.getFolders();
  while (folders.hasNext()) {
    var folder = folders.next();
    var fPath = path+folder.getName()+'/';
    blobs.push(Utilities.newBlob([]).setName(fPath)); //comment/uncomment this line to skip/include empty folders
    blobs = blobs.concat(getBlobs(folder, fPath));
  }
  return blobs;
} 
```

我遇到的唯一奇怪的事情是，当我运行脚本时它说`TypeError: Cannot call method "getFiles" of undefined. (line 10, file "Code")`. 当我碰巧看到这个脚本所在的地方时，还有 5 个完整的 zip 文件。它有效，但我仍然收到该错误。奇怪......但这段代码对我有用。感谢这个线程上的每个人。干杯!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T20:54:25.230

确实没有 API 参考。[您可以在 Apps Script issue tracker](http://code.google.com/p/google-apps-script-issues/issues/list)上打开有关此问题的问题请求。但是从代码完成显示的内容推断，这是我的理解：

```
var folder = DocsList.getFolder('path/to/folder');
var files = folder.getFiles();
var blobs = [];
for( var i in files )
  blobs.push(files[i].getBlob());
var zip = Utilities.zip(blobs, 'newFiles.zip');
folder.createFile(zip); 
```

但是我没有测试过这段代码，所以我不知道它是否可以工作。此外，它可能仅适用于未转换为 Google 格式的文件，或者可能仅适用于这些文件或其中的一部分。好吧，如果您尝试一下并找到一些东西，请在此处与我们分享。您肯定会面临的一个限制是文件大小，如果 zip 文件变得“太大”，它可能无法正常工作......是的，您也必须测试这个限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-28T21:32:39.040

如果 Hafez 解决方案没有成功，并且您收到此错误

> TypeError：无法读取未定义的属性“getFiles”

尝试这样做

```
/**
 * Creates a zipFile of the mentioned document ID and store it in Drive. You can search the zip by folderName.zip
 */

function createAndSendDocument() {
    var files = DriveApp.getFolderById("DOCUMENT ID CAN BE FIND IN THE URL WHEN A DOCUMENT IS OPENED");
    var folder = files;
    var zipped = Utilities.zip(getBlobs(folder, ''), folder.getName() + '.zip');
    folder.getParents().next().createFile(zipped);

}

function getBlobs(rootFolder, path) {
    var blobs = [];
    var files = rootFolder.getFiles();

    while (files.hasNext()) {
        var file = files.next().getBlob();
        file.setName(path+file.getName());
        blobs.push(file);
    }

    var folders = rootFolder.getFolders();

    while (folders.hasNext()) {
        var folder = folders.next();
        var fPath = path+folder.getName() + '/';
        blobs.push(Utilities.newBlob([]).setName(fPath)); //comment/uncomment this line to skip/include empty folders
        blobs = blobs.concat(getBlobs(folder, fPath));
    }

    return blobs;
} 
```

# iphone - 打开 SMS 视图时，远程视图控制器在 iPhone4 上的 IOS6 中崩溃

> ID：13259047
> 
> 赞同：4
> 
> 时间：2012-11-06T20:41:55.497
> 
> 标签：iphone, ios, sms, ios6

我在输出窗口中收到以下错误消息：

**远程撰写控制器超时（否）！**

我读过 IOS6 中的 SMS 视图在它自己的线程中运行，这可能解释了这个问题。

有关于他的问题的任何可用信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-12T06:34:10.607

我遇到了同样的问题（远程撰写控制器超时（否）！）。但是当我以 1.0 延迟呈现消息编写器时，它显示了消息编写器。希望有人会发现这很有用并节省他们宝贵的时间。

```
[self performSelector:@selector(showLaterThisSMS:) 
           withObject:messageComposeViewController
           afterDelay:1.0f];

-(void)showLaterThisSMS:(MFMessageComposeViewController*)messageComposeViewController{

    [self presentViewController:messageComposeViewController
                       animated:YES
                     completion:nil];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T22:22:29.873

帮助另一个与[UIActivityViewController 相关的用户报告“远程编写控制器超时”](https://stackoverflow.com/questions/13676500/ios-6-uiactivityviewcontroller-timeout-bug/13692785#13692785)，我们得出的结论是问题出在特定设备上，当他重新启动设备时，问题就消失了。

# text - 如何判断超网格文本是否已被截断

> ID：13259050
> 
> 赞同：0
> 
> 时间：2012-11-06T20:42:10.193
> 
> 标签：text, infragistics, ultrawingrid, truncated

我们正在使用基础设施超网格向用户呈现数据。如果用户修改了列的宽度，我需要能够判断数据是否被截断，以便在将数据导出为 pdf 时正确调整输出。我们希望在导出为其他格式时截断数据，以匹配用户在列宽调整后看到的内容。

谢谢，

居里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:31:44.773

文本是否被截断是在绘制字符串时自动完成的，因此您需要获取可用空间和字符串，然后确定在绘制时它有多少适合空间。

在 UltraDocumentExporter 的 CellExporting 事件中，您可以通过以下方式获取文本和大小：

```
Size size = e.GridRow.GetCellSizeResolved(e.GridColumn);
string text = e.GridRow.GetCellText(e.GridColumn); 
```

您还可以通过将 e.ExportValue 设置为要放入 PDF 文档中的字符串来更改要导出的值。

剩下要做的是确定适合矩形的字符数量，以下内容应该可以帮助您： [How to determine the maximum number of characters given a fixed width font and a maximum width in pixel](https://stackoverflow.com/questions/1565263/how-to-determine-maximum-number-of-characters-given-a-fixed-width-font-and-a-max)

# android - 自定义安卓操作栏

> ID：13259055
> 
> 赞同：0
> 
> 时间：2012-11-06T20:42:20.893
> 
> 标签：android, android-actionbar, actionbarsherlock, android-theme

我正在尝试创建一个新主题并自定义操作栏：

```
<resources>

    <style name="Theme.Shappy.Red" parent="Theme.Sherlock.Light">
        <item name="android:actionBarStyle">@style/ActionBar.Shappy.Red</item>
        ...
        ... [some_other_customizations]
    </style>

    <!-- Action bar -->
    <style name="ActionBar.Shappy.Red" parent="@style/Widget.Sherlock.Light.ActionBar.Solid">        
        <item name="android:background">#ffb70000</item>
        <item name="android:titleTextStyle">@style/ActionBar.Title.Shappy.Red</item>
    </style>

    <!-- Action bar text -->
    <style name="ActionBar.Title.Shappy.Red" parent="@style/TextAppearance.Sherlock.Widget.ActionBar.Title">
            <item name="android:textColor">#ddffffff</item>
    </style>
</resources> 
```

如您所见，我正在使用 Sherlock。此代码适用于 API 级别 14，但不适用于 API 级别 10。我仍然看到 Holo 灯像操作栏。我认为代码是正确的，因为 [some_other_customizations] 应用正确。你有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:45:07.987

```
 <item name="android:actionBarStyle">@style/ActionBar.Shappy.Red</item> 
```

前面带有“”的所有其他内容都`android:`适用于默认操作栏。您还必须将其放入您的样式中：

```
<item name="actionBarStyle">@style/ActionBar.Shappy.Red</item> 
```

这会覆盖 ABS 的样式。所以你的样式应该看起来像这样才能在 API 级别 13 中工作<：

```
<style name="Theme.Shappy.Red" parent="Theme.Sherlock.Light">
    <item name="android:actionBarStyle">@style/ActionBar.Shappy.Red</item>
    <item name="actionBarStyle">@style/ActionBar.Shappy.Red</item>
</style>

<!-- Action bar -->
<style name="ActionBar.Shappy.Red" parent="@style/Widget.Sherlock.Light.ActionBar.Solid">
    <item name="android:background">#ffb70000</item>
    <item name="background">#ffb70000</item>
    <item name="android:titleTextStyle">@style/ActionBar.Title.Shappy.Red</item>
    <item name="titleTextStyle">@style/ActionBar.Title.Shappy.Red</item>
</style>

<!-- Action bar text -->
<style name="ActionBar.Title.Shappy.Red" parent="@style/TextAppearance.Sherlock.Widget.ActionBar.Title">
    <item name="android:textColor">#ddffffff</item>
    <item name="textColor">#ddffffff</item>
</style> 
```

# java - 在 Java 中，System.out 如何引用 PrintStream 类？

> ID：13259058
> 
> 赞同：4
> 
> 时间：2012-11-06T20:42:27.280
> 
> 标签：java

我是一名学习 Java 的初学者，具有一些 C++ 知识和 System.out.println(); 现在让我很困惑。所以System是类，out是可以调用方法的变量？？根据： http: [//journals.ecs.soton.ac.uk/java/tutorial/getStarted/application/objects.html](http://journals.ecs.soton.ac.uk/java/tutorial/getStarted/application/objects.html) out是类变量，变量是计算机内存中具有类型名称的存储位置和内容。它不是像字符串这样的对象，它可以使用像.getLength() 这样的方法。网站解释它的方式是 out 指的是 PrintStream 类的一个实例，但是如何呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T20:43:33.823

> 它不是一个对象

这就是你的推理出错的地方。`System.out` *是*（对）一个对象的引用。

引用的类型是`PrintStream`，如[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#out)中所述。这意味着您可以`PrintStream`在 上调用 的方法`System.out`，例如：

```
System.out.println(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:43:47.730

`out`不调用方法：`out`是一个变量，包含一个`PrintStream`可以调用方法的对象（的实例）。

例如 ：

```
System.out.println("hey!"); 
```

你也可以做

```
void print(PrintStream ps, Object o) {
    ps.println(o);
}
...
print(System.out, "hey!"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T20:44:05.913

Out 是名为*System的类的**公共静态字段*。

 *因为它是公共的，所以您可以在其上调用方法。

它的类型是*PrintStream*。

最好的学习方法是阅读文档：

*   [http://docs.oracle.com/javase/6/docs/api/java/lang/System.html](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html)

请注意顶部描述*in*、*out*和*err*的部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T20:46:39.020

更严格地说，它是一个公共静态字段，它是对 type 对象的引用`PrintStream`，所以是的，您可以在其上调用方法。

Java 引用大致类似于 C 指针（至少在它们的使用方式上，显然存在显着差异）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T20:45:41.690

System.out 是 PrintStream 的一个特定实例，其输出链接到 C++ 标准输出的等效项

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-18T19:19:24.460

System 是一个 final 类，它有一个 final 变量 out 保存一个 PrintStream 类的对象，我们可以在该对象上调用 println() 方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-20T09:54:02.990

大致像这样考虑 System 类：

```
package java.lang;
public final class System {

    public final static PrintStream out;
} 
```

这里是“类型”Printstream 的静态最终变量。由于它是静态变量，我们可以通过“ClassName.variableName”来调用它，而不需要创建任何System类的对象，所以我们做System.out。

现在，out 是“PrintStream”类的引用变量。到目前为止，只创建了这个引用变量，它没有引用 Printstream 类的任何“对象”。但是 System 类在加载到内存时会创建 PrintStream 的对象。为此，请参阅方法`initializeSystemClass()`和`setOut0()`下面的链接，这是 System 类的完整源代码。（不要被这个庞大的代码压倒，只要确保在 System 内部调用了“new PrintStream()”（此处为第 1095 行））。

[http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/System.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/System.java)

所以，当我们有一个 PrintStream 类的对象时，我们的 out 引用变量可以很容易地调用它的方法，对吧？这就是我们调用 System.out.println() 的方式

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-06T11:45:22.973

实际上 out 参数 in`System.out.println(String args[])`是`System`类中的静态字段。每当声明一个字段时，它都应该具有特定的数据类型。在这个类中，out 字段定义为`static PrintStream out;`。

这意味着out的数据类型是class。`PrintStream`这样`System.out`实际上将代表一个`PrintStream`类的对象。有了这个对象，我们正在调用类的`println()`方法`PrintStream`。*

# android - 像 ContentProvider 一样棒但私有的东西（不与其他应用程序共享数据）

> ID：13259063
> 
> 赞同：0
> 
> 时间：2012-11-06T20:42:47.807
> 
> 标签：android, android-contentprovider

我真的很喜欢“Loaders”、“ContentProviders”，尤其是“ContentObservers”的概念。我使用这种标准模式，其中数据是从本地数据库加载的，当它从我的服务器更新时，它会被刷新`getContentResolver().notifyChange()`或类似的东西。

但是当我使用 ContentProvider 时，我必须将我的数据暴露给其他应用程序。这是为什么？我没有任何敏感数据，但对我来说似乎不是很优雅。所以我在这里错过了什么，或者使用 ContentProvider（从而暴露我的数据）是轻松实现它的唯一方法。

我真正错过的其他实现选项是通知加载程序新数据出现在本地数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T00:20:47.530

在这里要非常清楚：当您使用内容提供者时，您不必*将*数据暴露给其他应用程序。相反，您可以在清单的元素中使用 android:exported="false" 属性。

Android API 指南中的[创建内容提供者](http://developer.android.com/guide/topics/providers/content-provider-creating.html)中详细描述了使用权限来限制对提供者的访问（但不阻止它） 。

# javascript - 部分数据更新后保留 .click() 函数

> ID：13259064
> 
> 赞同：0
> 
> 时间：2012-11-06T20:42:51.963
> 
> 标签：javascript, jquery

我正在使用一个坐标系表，并在每个 td 元素中使用一个函数来更新字段值。

```
[ ][ ][X][ ]
[ ][X][X][X]
[X][ ][ ][ ] 
```

当我单击一个空元素时，我希望它在我的数据库中将值设置为“X”，方法是从我的 rails 应用程序获取新的部分数据（并发送 GET 变量），然后重新渲染表。使用我的 rails 应用程序可以正常工作，但只有一次。似乎 jQuery 函数 .click() 只运行一次。该函数如下所示：（*通过.coffeescript生成*）

```
$(document).ready(function() {
  $(".field").click(function(e) {
    $.get("http://localhost/dinners?ap="+$(this).attr('id'), function(data) {
      $("#dinner_table").html(data);
    });
  });
}); 
```

这将运行得很好，一旦我单击一个元素，它将在表中呈现新数据 - 但只有一次！如果我在函数中交换 HTML 后重新定义 .click() 函数，它允许我单击（并更新）两次，等等。

我很确定这是一个基本问题，但到目前为止搜索没有运气。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T20:44:51.607

**委托事件**。通过这样做，您只需附加一次处理程序。

```
$(".field").click(function(e) { 
```

会变成：

```
$("body").on('click', '.field', function(e) { 
```

`body`可以用任何静态父容器替换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T20:44:59.843

使用事件委托：

```
$( '#dinner_table' ).on( 'click', '.field', function () {
    /* your click handler */
}); 
```

因此，单击处理程序绑定在共同祖先（在本例中为 TABLE 元素）上。

# c++ - QNetworkAccessManager 线程永远不会完成

> ID：13259068
> 
> 赞同：4
> 
> 时间：2012-11-06T20:43:06.027
> 
> 标签：c++, multithreading, qt, qnetworkaccessmanager

我知道在 4.8 版中，每个 http 请求都有自己的线程来运行。
我正在做一个链接检查器应用程序，它在一段时间循环中执行大量 http 请求，我在 Windows 任务管理器中注意到我的应用程序随着时间的推移使用了 1600 多个线程，并且数量永远不会下降，直到它崩溃应用程序。（我猜这就是原因。）

我的问题是，是否`QNetworkAccessManager`可以选择使用线程池？
或者它是否可以选择在完成其 http 请求后清理其线程？

这是主循环：

```
while(!rpm_urlStack->isEmpty())
{
    QString url = rpm_urlStack->top();

    //define the reply
    QNetworkReply *reply;
    rpm_urlStack->pop();

    QString urlForReq(url);

    bool returnVal = true;
    QNetworkRequest request;

    request.setUrl(QUrl(urlForReq));
    request.setRawHeader("User-Agent", USER_AGENT.toUtf8());
    request.setRawHeader("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.7");
    request.setRawHeader("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    request.setRawHeader("Accept-Language", "en-us,en;q=0.5");
    request.setRawHeader("Connection", "Keep-Alive");

    QEventLoop loop;
    reply = m_networkManager->get(request);
    connect(reply, SIGNAL(finished()), &loop, SLOT(quit()));
    loop.exit();

    if(!loop.isRunning()) {
        loop.exec();
    }

    RequestFinishedHandler(reply);

    // this is how I delete the reply object
    delete reply;
}

RequestFinishedHandler(QNetworkReply *reply)
{
    if (reply->error() > 0) {
        QNetworkReply::NetworkError networkError = reply->error();
        QString err = reply->errorString();
    } else {
        QVariant vStatusCodeV = reply->attribute(QNetworkRequest::HttpStatusCodeAttribute);
        QMutexLocker lock(_pMutex); // _pMutex defined as class member
        char *buffer;
        buffer = getCurrentDateTime();
        QTextStream out(m_file);
        out << buffer << "  " << _sCurrentUrl << "\n";
        lock.unlock();

        if(vStatusCodeV.toInt() == 200) {
            QString ApiResponse;
            QByteArray data;
            data=reply->readAll();
            ApiResponse.append(QString::fromUtf8(data));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:45:38.707

看来要有效，必须从事件循环中调用该方法，该[方法](http://qt-project.org/doc/qt-4.8/qobject.html#deleteLater)`deleteLater`必须重新控制执行以处理垃圾收集。

也许你应该重构你的代码，让事件循环替换你的 while 循环。或者，由于您没有使用插槽来处理回复，也许您可​​以在函数`finished`结束时直接删除回复。`RequestFinishedHandler`

# delphi - 如何使用 Indy10 TIdUDPClient 接收广播数据包？

> ID：13259070
> 
> 赞同：3
> 
> 时间：2012-11-06T20:43:15.063
> 
> 标签：delphi, udp, c++builder, indy10

我正在连接到发送 UDP 数据包的系统，作为响应（发送到特定 IP 地址）和广播（根据 WireShark，dest 为 255.255.255.255）

我可以正确接收“直接”数据包，但我不知道如何获取广播数据包。我假设我需要第二个具有不同绑定的 TIdUDPClient，但我无法让它工作。

```
TIdUDPClient *reader(new TIdUDPClient(NULL));
TIdUDPClient *broadcastReader(new TIdUDPClient(NULL));

reader->Port = 2000;
reader->Host = "192.168.0.1";
reader->Connect();

broadcastReader->Port = 2000;
// broadcastReader->Host = "0.0.0.0"; // This doesn't work, but is here as an example
broadcastReader->BroadcastEnabled = true;
broadcastReader->Connect(); 
```

然后我有其他几乎相同的线程调用`reader/broadcastReader->ReceiveBuffer()`. 一个`reader`工作正常，但`broadcastReader->receiveBuffer()`永远不会回来......

为 C++ 代码和 Delphi 标签道歉 ;-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T23:11:11.187

`TIdUDPClient`不是为接收广播而设计的。改为使用`TIdUDPServer`。

# delphi - 将 URL 修剪到根目录

> ID：13259073
> 
> 赞同：4
> 
> 时间：2012-11-06T20:43:30.830
> 
> 标签：delphi

如何在 Delphi 中做到这一点？例如..

网址 = [https://mail.google.com/mail/u/0/?tab=wm#inbox](https://mail.google.com/mail/u/0/?tab=wm#inbox)

修剪的 URL = [https://mail.google.com/](https://mail.google.com/)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T20:55:17.600

使用 Indy 的示例代码`TIdURI`可能是：

```
uses
  IdURI;

function GetProtoAndHost(const URI: string): string;
var
  IdURI: TIdURI;
begin
  IdURI := TIdURI.Create(URI);
  try
    Result := IdURI.Protocol + '://' + IdURI.Host + '/';
  finally
    IdURI.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T20:51:24.877

```
Function GetRoot(const Path:String):String;
var
 i:Integer;
begin
  i := Pos('//',Path);
  if i>0 then
      i := PosEx('/',Path,i+2)
  else i := Pos('/',Path);
  if i=0 then i := Length(Path);

  Result := Copy(Path,1,i);
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T20:47:27.223

看看`TIdURI`Indy 的类（在 `IdURI' 单元中）。它是一个 URI/URL 解析器。你给它一个 URL，它把它解析成各种组件。玩弄它，看看它是如何工作的。一旦解析了 URL，就可以通过查看 Host 和 Protocol 属性来回答您的特定问题。

# ruby-on-rails - 用于测试关联记录查询的 Rspec 模拟

> ID：13259078
> 
> 赞同：0
> 
> 时间：2012-11-06T20:43:45.340
> 
> 标签：ruby-on-rails, rspec, refactoring, tdd, bdd

我有以下模型：

```
class Kueue < ActiveRecord::Base
    attr_accessible :name, :user_id

    belongs_to :user
    has_and_belongs_to_many :photos

    scope :empty, includes(:photos).where{ photos.id.eq(nil) }
    scope :with_photos, includes(:photos).where{ photos.id.not_eq(nil) }
end 
```

我想为范围编写规范，以确保它们可靠地工作。我的问题是如何处理`Photo`模型。照片上有很多验证，例如它们必须属于_to a `User`。因此，我可以为这些查询编写一个工作规范，如下所示：

```
describe "queries" do
    before :each do
        @empty = Fabricate(:kueue)
        @full = Kueue.new :name => "Full Queue"
        @full.photos << Fabricate(:photo)
        @full.save
    end

    it "should find empty queues" do
        Kueue.empty.should_not include(@full)
    end

    it "should find queues with photos" do
        Kueue.with_photos.should_not include(@empty)
    end
end 
```

但是，您可以想象这是*sloooow*。这会对数据库进行大量调用。(1) 制作两个 kueues，(2) 制作一张照片，(3) 制作一个拥有该照片的用户......等等。

这似乎是一个足够简单的问题，我所需要的只是一张照片和一个 kueue 之间的一个连接记录，我可以非常快速地测试这个。那么，您将如何模拟这种交互，以便更快、更好地进行测试呢？

PS：我使用的是 Rails 3.2.8，[Squeel](https://github.com/ernie/squeel)（因此是查询语法），我的模型称为 Kueue，因为 Queue 是 Rails 中的保留字 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:46:51.827

我认为在范围的上下文中模拟是没有意义的。

范围基本上是数据库查询，您要确保它们与数据库一起使用。

因此，如果您的问题是测试性能，那么我建议：

*   在这种情况下尝试固定装置

或者

*   跳过模型验证，以减少所需的模型

# c# - 相关模型的 Linq 冗余数据库访问

> ID：13259088
> 
> 赞同：1
> 
> 时间：2012-11-06T20:44:10.713
> 
> 标签：c#, asp.net-mvc-3, linq-to-sql

为什么我的模型再次输出到数据库中以获取已在单独的 LINQ 连接语句中加载的相关属性？

**背景资料：**

我最近在我的 ASP.NET MVC3 Linq 应用程序上运行了一些性能分析，我得到了一些我希望解决的令人费解的结果。

这是 db 结构的简化版本。外键关系建立。

**表客户端：**

```
ID|Client Name|Vertical ID|
___________________________
1 |Client1    |2          |
2 |Client2    |5          |
3 |Client3    |           | 
```

**表垂直**

```
ID|Vertical Name|
_________________
2 |Life         |
5 |Guilt        | 
```

当我显示客户列表时，我向他们显示客户名称和垂直。我的控制器很简单：

```
public ActionResult Index()
    {
        ...
    var model = repository.GetAllClients();
        return View(model);
    } 
```

获取所有客户端在垂直表（以及其他一些）上运行连接。

```
 public IEnumerable<client> GetAllClients()
    {
        OperationsMetricsDataContext db = new OperationsMetricsDataContext();
        var clients = from c in db.clients
                      join v in db.verticals on c.vertical equals v into tmp1
                      from v in tmp1.DefaultIfEmpty()
                      join sm in db.cel_sm_staffs on c.sm_id equals sm.cel_sm_id into tmp2
                      from sm in tmp2.DefaultIfEmpty()
                      join cel in db.cel_sm_staffs on c.cel_id equals cel.cel_sm_id into tmp3
                      from cel in tmp3.DefaultIfEmpty()
                      select c;
        return clients;
    } 
```

然后，在我的视图中，我尝试在部分客户端类中显示我使用此方法绑定的垂直名称

```
public string getVerticalName()
    {
        return this.vertical == null ? "N/A" : this.vertical.vertical_name;
    } 
```

**问题：**

```
@foreach (var item in Model) {
<tr>
    <td>
        @Html.Raw(item.client_name)
    </td>
    <td>
        @Html.Raw(item.getVerticalName())
    </td> 
```

我发现的问题是，即使我在原始模型中指定了连接（并且我已经能够验证在模型传递给视图之前垂直属性是否加载了一个值），但每次我调用getVerticalName 方法，Linq 会自动再次到 db 中加载垂直，以便我可以访问垂直名称。这是非常低效的，因为我最终为每个客户单独调用了一个数据库，只是为了获取他们的垂直信息。

我在这里想念什么？LINQ 不应该知道该属性已经绑定并且不去数据库检索它，还是我需要指定一些东西来告诉 LINQ 我的信息已经存在于模型中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:53:12.027

不确定它在 MVC 中的行为方式，但也许您的问题是延迟加载相关实体。您可以使用 LoadOptions 强制 Linq-2-sql 急切加载。

尝试

```
OperationsMetricsDataContext db = new OperationsMetricsDataContext();

DataLoadOptions dlo = new DataLoadOptions();
dlo.LoadWith<Client>(c => c.Vertical);
db.LoadOptions = dlo; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T22:38:37.857

我的第一印象是让查询只执行一次，你应该改变`return clients;`：`return clients.ToList();`

正如您的代码一样，我相信它会返回一个`IQueryable`简单的转换 as `IEnumerable`，并且根据设计 IQueryable 将在其枚举的任何时候转到服务器。

# php - 如何在 PHP 中对数组进行排序，但有一个例外

> ID：13259089
> 
> 赞同：0
> 
> 时间：2012-11-06T20:44:12.733
> 
> 标签：php, arrays, sorting, asort

假设我有一个名为 $array 的数组，一旦我在其上运行 asort，它看起来像这样：

```
Array
(
    [1] => Apples
    [2] => Bananas
    [3] => Cherries
    [4] => Donuts
    [5] => Eclairs
    [6] => Fried_Chicken
) 
```

什么是最简单的方法，以便在按字母顺序排序后，删除具有值“甜甜圈”的键，然后放在最后？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T20:45:56.050

我会简单地删除甜甜圈元素，执行你的`asort`，然后重新添加甜甜圈项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:34:05.537

我想出了这个。测试它并确认它有效。重新排序你的数组，这样我就可以真正看到排序了。

```
$arr = Array(
  1 => "Fried_Chicken",
  2 => "Donuts",
  3 => "Bananas",
  4 => "Apples",
  5 => "Eclairs",
  6 => "Cherries"
);  

// Get donut and key
$donut_key = array_search("Donuts", $arr);
$donut = $arr[$donut_key];  // If you don't need to keep the value, skip this line

// Remove donut
unset($arr[$donut_key]);

// Sort
asort($arr);

// Append Donut
$arr += array($donut_key => $donut); 
```

数组搜索 [http://php.net/manual/en/function.array-search.php](http://php.net/manual/en/function.array-search.php)

密钥保留附加 [http://www.vancelucas.com/blog/php-array_merge-preserving-numeric-keys/](http://www.vancelucas.com/blog/php-array_merge-preserving-numeric-keys/)

# php - 具有不同列数的Mysql全文搜索

> ID：13259090
> 
> 赞同：0
> 
> 时间：2012-11-06T20:44:23.573
> 
> 标签：php, mysql, full-text-search

我第一次尝试全文搜索，但无法让查询正常工作。这是我一直在尝试的新代码（来自 PHP 文件）：

```
$browse_all_query = "(SELECT master_id, title, series_id, series_number, year, date, day, month, speaker_id, speaker2_id, speaker3_id " .
                    "FROM master " .
                    "WHERE MATCH (title) AGAINST ($where_clause)) " .
                    "UNION " .
                    "(SELECT camp_name, camp_id " .
                    "FROM camp " .
                    "WHERE MATCH (camp_name) AGAINST ($where_clause)) " .
                    "UNION " .
                    "(SELECT subject_name, subject_id " .
                    "FROM subject " .
                    "WHERE MATCH (subject_name) AGAINST ($where_clause)) " .
                    "UNION " .
                    "(SELECT speaker_id, s_title, f_name, m_name, l_name, l_name2 " .
                    "FROM speaker " .
                    "WHERE MATCH (s_title, f_name, m_name, l_name, l_name2) AGAINST ($where_clause)) " .
                    "UNION " .
                    "(SELECT series_title, series_id " .
                    "FROM series " .
                    "WHERE MATCH (series_title) AGAINST ($where_clause)) "; 
```

现在，我知道对我来说这里的一个大问题是我的选择语句中有不同数量的列以及不同的数据类型。我需要弄清楚如何从我选择的所有列中提取我需要的所有信息，但仍然使用全文搜索。这是一个在线音频库。我现在正在使用常规的 WHERE/LIKE 设置，但不幸的是，使用该方法，搜索一位演讲者的姓名 (Glenn Clark) 会在我清理和分隔关键字时无论在何处使用它们都会显示“glenn”和“clark”的结果。 ...更不用说“演讲者”表有单独的名字和姓氏列。

解决这个问题的最好方法是什么？

我的表结构是：

1.  Master（13列的主表）
2.  扬声器（6列）
3.  营地（3 列）
4.  系列（6列）
5.  主题（2列）

在我当前的代码中，我在运行搜索的同时选择了与搜索不直接相关的所有额外信息位，因为我使用这些位（如所有“id”字段）输出我需要的所有信息结果如下所示： ![在此处输入图像描述](../Images/852bceffa002f62ef5a633bf93a33086.png)

我需要额外的查询还是我完全错误的方式。

谢谢您的帮助。

# javascript - 全局记录 jQuery 错误（事件和 DOM 错误）

> ID：13259096
> 
> 赞同：8
> 
> 时间：2012-11-06T20:44:31.727
> 
> 标签：javascript, jquery, logging, error-handling

由于这些天来的系统变得越来越面向 Javascript（jQuery、AJAX 等），我们一直在尝试为这些事情中的任何一个发生越来越多的错误日志记录。

* * *

**我担心的是，在 jQuery 本身中，当创建或执行正常的 DOM 操作/jQuery 事件时，`window.onerror`无法捕获这些，这可能有助于更快地调试生产中的错误，方法是让它们登录到服务器**

在 2008 年的这篇文章（[.onerror 和 jQuery 绑定 try/catch{}](http://blogs.cozi.com/techold/2008/04/javascript-erro.html) ）中，他们向甚至 document.ready 事件添加了**try/catch {} 。****`jQuery.bind() event`**现在一切都经历了`.on()`这篇文章有点过时了，但我觉得逻辑仍然可以工作......

有没有人尝试在他们自己的项目中实现这样的 jQuery 覆盖（try/catch 系统）？

基本上我想继续使用 CDN 中的 jQuery，并且只是在我们的一个 JS 文件中 -`.on() / $(document).ready() / etc`使用这些更改扩展/覆盖事件。

```
jQuery.fn.extend({ // <-- can this be extended / overwritten ?
    on: function(etc etc) {
        // same code just add the additional
        try {
            // try to execute the original .on()
        }
        catch (ex) {
            // log any errors / info (where/why/etc)
        }
    }
});

// or even some sort of try/catch for $(document).ready()? 
```

其他典型的错误记录格式：（当然也记录浏览器/OS/QueryString/等）

```
window.onerror = function (msg, url, line) {
    // Log General Javascript Errors
    // this won't log jQuery internal errors
};

$.ajaxSetup({ // Log AJAX Errors
    error: function (jqXHR, ajaxSettings, thrownError) { }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:52:52.533

我们在 window.onerror 和 jQuery ajax 错误中向服务器报告 JavaScript 错误，而不覆盖 jQuery，它运行良好。如果你想覆盖一个 jQuery 函数，你可以这样做：

```
$.fn.oldOn = $.fn.on;
$.fn.on = function(a,b,c,d,e,f) {
    try {
        $(this).oldOn(a,b,c,d,e,f);
    }
    catch (ex) { ... }
}; 
```

# windows-phone-7 - windows phone 应用程序关闭后如何完成调试会话？

> ID：13259097
> 
> 赞同：1
> 
> 时间：2012-11-06T20:44:39.220
> 
> 标签：windows-phone-7, windows-phone-8

每次关闭 Windows Phone 应用程序时，VS 2010 下的相关调试会话也会关闭。在安装 Windows 8 + WP SDK 8 之前，该方案一直运行良好。

现在调试会话没有在模拟器下完成，也没有在设备下完成。

有可能解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:26:56.517

这是一个特点。调试器仍然连接到应用程序，以便您轻松调试后台任务。只需按“停止”按钮即可分离调试器。

更多解释：http: [//blogs.msdn.com/b/visualstudio/archive/2012/08/23/new-visual-studio-2012-debugging-features-for-the-windows-8-app-lifecycle-模型.aspx](http://blogs.msdn.com/b/visualstudio/archive/2012/08/23/new-visual-studio-2012-debugging-features-for-the-windows-8-app-lifecycle-model.aspx)

我目前不知道有任何方法可以禁用该功能。

# java - 为什么删除它们后重新插入换行符不起作用？

> ID：13259102
> 
> 赞同：0
> 
> 时间：2012-11-06T20:44:52.777
> 
> 标签：java, regex, string, replace

我正在编写应该从文本块中删除实际换行符并用字符串“\n”替换它们的代码。然后，当另一个时间读取 String 时，它应该替换换行符（换句话说，搜索所有 "\n" 并 insert `\n`。但是，虽然第一次转换工作正常，但它没有做后者。看起来虽然第二次替换什么也没做。为什么？

替换：

```
theString.replaceAll(Constants.LINE_BREAK, Constants.LINE_BREAK_DB_REPLACEMENT); 
```

重新替换：

```
theString.replaceAll(Constants.LINE_BREAK_DB_REPLACEMENT, Constants.LINE_BREAK); 
```

常数：

```
public static final String LINE_BREAK = "\n";
public static final String LINE_BREAK_DB_REPLACEMENT = "\\\\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:08:01.250

在[`String.replaceAll(regex, replacement)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)中，正则表达式字符串和替换字符串都将反斜杠视为转义字符：

*   `regex`表示[正则表达式](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#sum)，将反斜杠转义为`\\`
*   `replacement`是一个替换字符串，它也会转义反斜杠：

> 请注意，替换字符串中的反斜杠 (\) 和美元符号 ($) 可能会导致结果与将其视为文字替换字符串时的结果不同；请参阅 Matcher.replaceAll。

这意味着必须在两个参数中转义反斜杠。此外，字符串常量还使用反斜杠作为转义字符，因此传递给方法的字符串常量中的反斜杠必须是双转义的（另请参阅[此问题](https://stackoverflow.com/questions/10171852/java-replaceall-doesnt-work-well-with-backslash)）。

这对我来说很好：

```
// Replace newline with "\n"
theString.replaceAll("\\n", "\\\\n");

// Replace "\n" with newline
theString.replaceAll("\\\\n","\n"); 
```

您还可以使用该`Matcher.quoteReplacement()`方法将替换字符串视为文字：

```
// Replace newline with "\n"
theString.replaceAll("\\n", Matcher.quoteReplacement("\\n"));
// Replace "\n" with newline
theString.replaceAll("\\\\n",Matcher.quoteReplacement("\n")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:54:32.690

在最后一个 replaceAll() 方法调用中不需要四个反斜杠。这对我来说似乎很好用

```
 String str = "abc\nefg\nhijklm";

    String newStr = str.replaceAll("\n", "\\\\n");

    String newnewStr = newStr.replaceAll("\\\\n", "\n"); 
```

输出是：

abc
efg
hijklm
abc\nefg\nhijklm
abc
efg
hijklm

我认为这是你所期望的。

# jquery - 模仿 Django 管理界面风格的 jQuery 主题（使用 CSS）

> ID：13259104
> 
> 赞同：3
> 
> 时间：2012-11-06T20:44:58.667
> 
> 标签：jquery, django, jquery-ui, django-admin

我在 Django 驱动的网站上使用 jQuery UI。我喜欢 Django 管理界面的外观。如何将这种外观扩展到网站上面向用户的页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:44:58.667

使用[这个 jQuery 主题](http://jqueryui.com/themeroller/#ffDefault=%22Lucida+Grande%22,%22DejaVu+Sans%22,%22Bitstream+Vera+Sans%22,Verdana,Arial,sans-serif&fwDefault=bold&fsDefault=1.3em&cornerRadius=0px&bgColorHeader=7ca0c7&bgTextureHeader=03_highlight_soft.png&bgImgOpacityHeader=75&borderColorHeader=cccccc&fcHeader=ffffff&iconColorHeader=ffffff&bgColorContent=ffffff&bgTextureContent=01_flat.png&bgImgOpacityContent=100&borderColorContent=cccccc&fcContent=000000&iconColorContent=bbbbcc&bgColorDefault=e6e6e6&bgTextureDefault=02_glass.png&bgImgOpacityDefault=75&borderColorDefault=d3d3d3&fcDefault=555555&iconColorDefault=888888&bgColorHover=dadada&bgTextureHover=02_glass.png&bgImgOpacityHover=75&borderColorHover=999999&fcHover=212121&iconColorHover=454545&bgColorActive=7ca0c7&bgTextureActive=04_highlight_hard.png&bgImgOpacityActive=75&borderColorActive=aaaaaa&fcActive=ffffff&iconColorActive=ffffff&bgColorHighlight=fbf9ee&bgTextureHighlight=02_glass.png&bgImgOpacityHighlight=55&borderColorHighlight=fcefa1&fcHighlight=363636&iconColorHighlight=2e83ff&bgColorError=fef1ec&bgTextureError=02_glass.png&bgImgOpacityError=95&borderColorError=cd0a0a&fcError=cd0a0a&iconColorError=cd0a0a&bgColorOverlay=aaaaaa&bgTextureOverlay=01_flat.png&bgImgOpacityOverlay=0&opacityOverlay=30&bgColorShadow=aaaaaa&bgTextureShadow=01_flat.png&bgImgOpacityShadow=30&opacityShadow=30&thicknessShadow=8px&offsetTopShadow=-8px&offsetLeftShadow=-8px&cornerRadiusShadow=8px)。我已经尽可能地模仿了这种风格。如果您愿意，您甚至可以调整设置。

# php - PHP mysqli查询不起作用

> ID：13259109
> 
> 赞同：0
> 
> 时间：2012-11-06T20:45:03.400
> 
> 标签：php, database, login, mysqli

当用户输入他们的详细信息时，他们单击登录但它不起作用，我与数据库的连接很好，它的这个文件不起作用，任何帮助将不胜感激，谢谢

```
include '../connection.php'; //used to include connection file that is 1 level higher in the directory 

$username = $_REQUEST['username'];
$password = $_REQUEST['password'];

$fquery = 'SELECT Username FROM login LIMIT 0, 30 ';
$squery = 'SELECT Password FROM login LIMIT 0, 30 ';

$username_query = mysqli_query($dbc, $fquery);
$password_query = mysqli_query($dbc, $squery);

$username_row = mysqli_fetch_array($username_query);
$password_row = mysqli_fetch_array($password_query);

if($username == $username_row && $password == $password_row) {
    echo 'username and password correct';
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:06:41.927

```
<?php

include '../connection.php'; //used to include connection file that is 1 level higher in the directory 

$username = $_REQUEST['username'];
$password = $_REQUEST['password'];

$query = 'SELECT Username FROM login WHERE Username = ? AND Password = ?';

/* set a default value to check against */
$valid_user = '';

/* use prepared statement */
$stmt = mysqli_stmt_init($dbc);
if (mysqli_stmt_prepare($stmt, $query)) {
    /* set question marks equal to values */
    mysqli_stmt_bind_param($stmt, 'ss', $username, $password);
    mysqli_stmt_execute($stmt);

    /* get the valid username only if query is successful */
    mysqli_stmt_bind_result($stmt, $valid_user);
    mysqli_stmt_fetch($stmt);

    /* close the statment */
    mysqli_stmt_close($stmt);
}

/* check if default was overwritten */
if($valid_user != '') {
    echo 'username and password correct';
}
?> 
```

试试这个，应该完成你想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:03:30.413

```
 $username_query = mysqli_query($dbc, $fquery);
     $password_query = mysqli_query($dbc, $squery);       
     $username_row   = $username_query->fetch_array(MYSQLI_ASSOC);
     $password_row   = $password_query->fetch_array(MYSQLI_ASSOC);        

     if($username == $username_row['username'] && $password == $password_row['Password']) {
       echo 'username and password correct';
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:07:48.910

```
$username = mysqli_real_escape_string($dbc, $_REQUEST['username']);
$password = mysqli_real_escape_string($dbc, $_REQUEST['password']);
$query = "SELECT * FROM login WHERE Username = '$username' AND Password = '$password' LIMIT 1";

if(mysqli_num_rows($query) > 0)
    echo 'username and password correct'; 
```

# javascript - javascript中的折叠和展开列表

> ID：13259112
> 
> 赞同：3
> 
> 时间：2012-11-06T20:45:09.177
> 
> 标签：javascript, html

我正在使用教程在 HTML 中制作可折叠列表。

我的 HTML 如下所示：

```
<li>
    <a href="#" onclick="test('node1')">hello</a>
    <ul id="node3" style="display:none">
        <li>Sub-item 1</li>
        <li>Sub-item 2</li>
    </ul>
</li>
<li>
    <a href="#" onclick="test('node2')">test</a>
    <ul id="node3" style="display:none">
        <li>Sub-item 1</li>
        <li>Sub-item 2</li>
    </ul>
</li> 
```

节点 3、4、5 等

我正在尝试使用以下 JavaScript 折叠所有这些表：

```
function test2(id, link) {
    var e = document.getElementById(id);
    if (e.style.display == '') {
        e.style.display = 'none';
        link.innerHTML = 'Expand';
    } else {
        e.style.display = '';
        link.innerHTML = 'Collapse';
    }
} 
```

但是当我调用该函数时，我不太确定要输入什么来选择所有节点。我仍然需要每个节点上的单独控件，所以我不能将所有名称都更改为相同。

```
<a href="#" onclick="test2('node????', this)">Collapse</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:26:32.527

您可以为此使用 class 属性。

```
<li>
 <a href="#" onclick="test('node1')">hello</a>
 <ul id="node1" class="node" style="display:none">
  <li>Sub-item 1</li>
  <li>Sub-item 2</li>
 </ul>
</li>
<li>
 <a href="#" onclick="test('node2')">test</a>
 <ul id="node2" class="node" style="display:none">
  <li>Sub-item 1</li>
  <li>Sub-item 2</li>
 </ul>
</li> 
```

假设你真的想折叠所有它们而不是切换它们的可见性，你可以写这样的东西......

```
function test2(className, link) {
 var e = document.getElementsByClassName(className);

 for (var i = 0, len = e.length; i < len; i++) {
  e[i].style.display = "none";
 }

 link.innerHTML = "Expand";
} 
```

......然后这样称呼它......

```
<a href="#" onclick="test2('node', this)">Collapse</a> 
```

请记住，getElementsByClassName 在旧版浏览器 (< IE9) 中不起作用。

**更新：** 实现此目的的另一种方法是使用 CSS 并更改共同父元素的类名。这是一个示例 CSS 代码：

```
#mutualParent.hide-nodes li.node {
 display: none;
} 
```

然后像这样改变你的功能......

```
function test2(className) {
 document.getElementById("mutualParent").className += className;
} 
```

...并这样称呼它：

```
<a href="#" onclick="test2('hide-nodes')">Collapse</a> 
```

如果你想使用 test() 函数来切换可见性，你需要先删除 className 否则它会保持隐藏状态。此外，要使此代码正常工作，您需要从`<ul>`标签中删除样式属性，因为样式属性具有更高的优先级。

# magento - Magento 批量添加产品

> ID：13259113
> 
> 赞同：0
> 
> 时间：2012-11-06T20:45:12.627
> 
> 标签：magento, e-commerce

Magento 有没有办法从电子表格、word 文件或其他方法中批量添加产品？我希望批量添加 1000 种产品，即使它只是标题和 SKU，任何东西都会有帮助。我已经尝试过导入和导出，但它冻结并最终弄乱了我的数据库。

有什么帮助吗？

Magento 1.6 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:08:07.863

我认为解决方案是创建 csv 文件，然后从中导入产品。

但请确保您已创建正确的 csv 文件。大多数导入错误是由于 csv 文件中的错误造成的。

毫无疑问，了解需求的最佳方式是拥有一个模型模式。有一个简单的方法来获得它。您需要做的就是将商店中的一些产品导出到逗号分隔的文件中。

为此，请单击管理面板中的系统，然后单击导入和导出菜单中的导出。然后您要从实体类型下拉列表中选择产品。现在，系统创建产品属性列表。所有属性都导出到 .csv 文件中，这就是为什么您可以单击继续导出您选择的产品的原因。现在，您可以在任何您喜欢的电子表格应用程序中打开您的文件，并将其用作您自己的 .csv 文件的示例。

**如何将 csv 文件导入 Magento**

在创建导入 .csv 时，您需要记住几件事。将每个新产品放在一个新行上，您定义的属性应该用逗号分隔。所有属性的顺序应与第一行相同。

如果您在 Microsoft Excel 中编辑您的产品，每个产品将被放置在一个新行上。您定义的属性将落入第一行列出的列中。

请注意，当 Excel 询问您希望保存的文件格式时，选择是（以忽略不兼容的功能）非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:12:17.940

这似乎可以工作，设置 CSV 格式需要一段时间，但可以工作。

[http://www.meteorify.com/2012/05/importing-product-images-csv-magento-1-7-0-0/](http://www.meteorify.com/2012/05/importing-product-images-csv-magento-1-7-0-0/)

# php - 如何使用视图按钮在控制器中调整 foreach？

> ID：13259115
> 
> 赞同：0
> 
> 时间：2012-11-06T20:45:18.760
> 
> 标签：php, javascript, html

全部，

我正在使用 MVC 模式构建一个小型 PHP 站点。在我的 Controller 中，我有一系列要发送到 View 页面的文章。但是，我希望文章在视图中一次出现一篇，并且只有在用户单击几个按钮之一时才会更改为下一篇。一个按钮只允许用户查看下一篇文章，其他按钮允许用户“评分”或认可文章（此信息被发送回控制器）**并**继续下一篇文章。

我该怎么做？这些按钮在一个表单中，每个按钮都附加了 Javascript 函数。代码的简化版本如下所示：

在控制器中：

```
<?php
  $array=array(10,11,12,13,14,15,16);
  $_SESSION['next']=true;
  foreach($array as $a){
    if($_SESSION['next']){
      $_SESSION['next']=false;
      $view=$a;
    }
  }
?> 
```

在视图中：

```
<script type="text/javascript">
  function doOne(){}
  function doTwo(){}
</script>
<form class="ReviewArticles" method='POST' accept-charset="UTF-8" action='index.php?action=reviewArticles'>
<p>
  <textarea rows="4" cols="60" name='article' id='article' WRAP=SOFT>
    <?php
      echo $view;
    ?>
  </textarea>
</p>    
<p>
  <button type="button" name='showNext1' id='showNext1' onclick="doOne()" >Show next 1</button>
  <button type="button" name='showNext2' id='showNext2' onclick="doTwo()" >Show next 2</button>
</p>
</form> 
```

我需要将一些信息发送回控制器以加载数组中的下一项。我还需要发送一些与用户“认可”文章相关的其他数据，我希望这些数据一起发生（只有一个按钮）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:48:44.827

我会说你有两个选择：

1) 通过 AJAX 请求拉取文章信息，并在用户希望移动到下一篇文章时显示。在我看来，这是最好的方法，因为它可以保证用户拥有文章的最新版本。

2) 加载时将文章信息存储在页面中。即将数据写入 javascript 数组、隐藏的 html 元素或任何您喜欢的方法。当用户点击按钮时，使用存储在页面上的数据加载文章。

这是否回答你的问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:49:29.397

这不是您想要在服务器端（即在 PHP 中）做的事情。减慢你的 foreach 循环只会减慢浏览器中整个页面的交付速度。您也无法“等待”用户操作以继续执行 PHP。

您的答案在于 javascript（即基于用户操作隐藏/显示内容区域），或者甚至可能是 AJAX（根据用户操作将新内容加载到页面），如果您想获得更高级并且不想下载所有前面的内容。

# c# - 获取装箱对象的类型名称c#

> ID：13259118
> 
> 赞同：5
> 
> 时间：2012-11-06T20:45:32.947
> 
> 标签：c#

如何获取装箱在对象中的实例的类型名称（字符串）。我不能使用 is 或 as 运算符。例如：

```
 object a= student1; //student1 is instance of Student class 
```

接下来，我将在另一个库中获取它的对象，其中没有 Student 类，也没有引用。我需要这样的东西：

```
string typeName=GetTypeNameInsideObject(obj1) 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T20:53:27.933

这应该可以解决问题：

```
a.GetType().Name 
```

# azure - Windows Azure - 没有单点故障的领导者实例

> ID：13259120
> 
> 赞同：4
> 
> 时间：2012-11-06T20:45:36.740
> 
> 标签：azure, singleton, azure-worker-roles

我正在寻找一种在多个工作角色实例上拥有“单例”模块的方法。我想在 Azure 中有一个具有队列和多个工作角色的并行执行模型。

这个想法是想要一个“主”实例，也就是说检查新数据，并通过将其添加到队列来调度它，处理来自特殊队列的所有消息，其他人没有处理，并将 Blob 存储挂载为虚拟驱动器，具有读/写访问权限。

我将永远**只有一个**“主实例”。当该主实例由于某种原因出现故障时，已经实例化的另一个实例应该很快被“选举”为主实例（几秒钟）。这应该发生在损坏的实例被 Azure 环境替换为新实例之前（大约 15 分钟）。

所以它将是某种自组织的、动态的环境。我正在考虑基于存储或表数据进行一些锁定。如果我们可以用微处理器术语来讨论的话，就有机会设置锁定超时和某种“看门狗”计时器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T22:02:42.313

您寻求实现的目标有通用方法。

首先，您的主实例。您可以根据实例 ID 进行检查。这相当容易。您需要[RoleEnvironment.CurrentRoleInstance](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.currentroleinstance.aspx)来获取“当前实例”，现在将[Id 属性](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.serviceruntime.roleinstance.id.aspx)与您从[RoleEnvironment.CurrentRoleInstance.Role.Instances](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.serviceruntime.role.instances.aspx)按 Id 排序的第一个成员中获得的属性进行比较。就像是：

```
var instance = RoleEnvironment.CurrentRoleInstance;
if(instance.Id.Equals(instance.Role.Instances.OrderBy(ins => ins.Id).First().Id))
{
 // you are in the single master
} 
```

现在你需要在“治疗”/回收时选择主人。您需要获取 RoleEnvironment 的[Changed](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.changed.aspx)事件。检查是否是[TopologyChange](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironmenttopologychange.aspx)（只检查是否是拓扑变化，不需要确切的拓扑变化）。如果是Topology Change - 根据上述算法选举下一个master。查看这篇关于如何准确执行事件挂钩和更改检测[的精彩博客文章。](http://brentdacodemonkey.wordpress.com/2011/09/24/leveraging-the-roleentrypoint-year-of-azure-week-12/)

忘记加了。

如果您喜欢锁 - blob 租赁是获取/检查锁的最佳方式。但是，仅使用 RoleEnvironment 事件和基于实例 ID 的简单主选举，我认为您不需要那种复杂的锁定机制。此外 - 一切都在队列中，直到它被**成功**处理。因此，如果主人在处理某些事情之前死了，“下一个主人”将处理它。

# javascript - Javascript错误加载图像淡入淡出

> ID：13259121
> 
> 赞同：1
> 
> 时间：2012-11-06T20:45:37.993
> 
> 标签：javascript, jquery

我的脚本出现不一致的错误。很多时候一切正常，但是，我时不时地收到以下错误：`ReferenceError: fadeIn is not defined`

以下是相关代码：

在里面`<head>`

```
 <script type="text/javascript" charset="utf-8">
        window.fadeIn = function(obj) {
            var item = $(obj).parent();
            item.fadeIn(1000);
        }
    </script> 
```

在里面`<body>`

```
 <div class="item" style="display:none"><img onload="fadeIn(this)" src="/uploads/thumbs/{{image.url}}"><br>{{ image.description }}</div> 
```

同样，图像大部分时间都在加载和淡入淡出，但时不时地我得到错误并且图像不会淡入。

有没有更好的方法来解决这个问题？或者只是我缺少的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:52:36.177

您需要确保在 DOM 准备好之后加载您的代码。

```
window.onload = function(){
    var fadeIn = function(obj) {
         var item = $(obj).parent();
         item.fadeIn(1000);
    };
}; 
```

...这是一个部分修复，但不是真的，因为您的`<img/>`带有硬编码 onload 的标签很可能会在该方法可用之前尝试触发该方法。

既然你无论如何都在使用 jQuery，你应该看看这样的东西：

```
$(function() {
    $(".item img").load(function(){
         $(this).fadeIn(1000);
    });
}); 
```

并从您的 img 标签中删除硬编码的 onload。

还应注意，.load() API 页面上列出了一些注意事项：

从文档（http://api.jquery.com/load-event/）：

> 与图像一起使用时加载事件的注意事项
> 
> 开发人员尝试使用 .load() 快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行一个函数。应该注意几个已知的警告。这些都是：
> 
> 它不能始终如一地工作，也不能可靠地跨浏览器 如果图像 src 设置为与以前相同的 src，则在 WebKit 中无法正确触发在浏览器的缓存中

更好的解决方案可能是使用 CSS 隐藏图像，然后在触发加载事件后，将它们淡入。

（比这更好的是让浏览器行为，因为您的结果可能是混合的，并且看到空白页面的用户可能会在您的动画完成之前认为他们的浏览器出现故障而点击重新加载按钮......只是一个友好的警告这些类型的 DOM 操作有时会对用户行为产生意想不到的副作用！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:52:31.113

您可以尝试直接在脚本中定义处理程序，而不是在 HTML 中分配它。

**Javascript**

```
<script type="text/javascript" charset="utf-8">
 $(function() {
       $('img').load(function() {  
             var item = $(this).parent();
             item.fadeIn(1000);
       });
  });

</script> 
```

**HTML**

```
<div class="item" style="display:none">
 <img onload="fadeIn(this)" src="/uploads/thumbs/{{image.url}}">
     <br>{{ image.description }}</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:53:33.360

您缺少准备好的文档，因此未加载 jQuery，并且未定义 fadeIn 函数。即使图像被加载，也不能保证 jQuery 也被加载。

您实际上还调用了您的函数fadeIn，而jQuery 已经有一个名为fadeIn 的函数，即使它们有不同的命名空间，这对我来说确实是个坏主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T20:54:13.283

n请确保您有正确的 JQuery javascript 文件链接。您可以使用 Google 的托管库作为示例，也可以创建自己的 .js 文件副本：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

min.js 文件可以在[JQuery 官网的下载部分](http://jquery.com/download/)找到。保存并放入网站文件夹。并将其链接为：

```
<script src="/js_folder/jquery-1.8.2.min.js"></script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T21:02:43.727

Jquery 的另一个选项：

```
<div class="item" style="display:none">
    <a href="http://docs.jquery.com/">
        <img src="http://static.jquery.com/files/rocker/images/logo_jquery_215x53.gif">
    </a>
    <p>image name</p>
</div>​ 
```

脚本：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('.item').delay('1000').fadeIn('1000');
​    });​
</script> 
```

[http://jsfiddle.net/CYGNp/1/](http://jsfiddle.net/CYGNp/1/)

# android - Android 2.2 中的 DigestAuth 问题

> ID：13259124
> 
> 赞同：1
> 
> 时间：2012-11-06T20:45:51.357
> 
> 标签：android, digest-authentication

我正在学习在 Android 中实现 DigestAuthentification。到目前为止，我可以理解，因为我发现它很容易..Basic Auth。但我对 Digest 有疑问。下面是我的代码片段，，..数据（它应该是正确的）不是真实的，因为我有兴趣了解我搞砸的逻辑：

```
 String challenge = "Digest username=\"username\", realm=\"django-tastypie\", nonce=\"1905145252.99:023A:1ec223524356154ca9f469f8e466919\", " +
                "uri=\"/login/\", algorithm=MD5, response=\"e9a49cffjfgj2d46gfjhgfhfee352452345\", opaque=\"726da4e9sdgsaha12bf4gadgad4636731b\", " +
                "qop=auth, nc=00000001, cnonce=\"082cdsfa875dcb2dca740\"";

        Header authChallenge = new BasicHeader(AUTH.WWW_AUTH, challenge);
        HttpRequest request = new BasicHttpRequest("Simple",
                "/login/");
        Credentials cred = new UsernamePasswordCredentials("username", "password");
        AuthScheme authscheme = new DigestScheme();
        authscheme.processChallenge(authChallenge);
        Header authResponse = authscheme.authenticate(cred, request);
        System.out.println("===> text: " + authResponse);

HttpGet httpGet = new HttpGet(
                "http://something/api/login/");
        httpGet.addHeader(authResponse);
        try {
            HttpClient httpClient = new DefaultHttpClient();
            HttpResponse httpResponse = httpClient.execute(httpGet);
            System.out.println("httpResponse: " + httpResponse.getStatusLine());

            HttpEntity responseEntity = httpResponse.getEntity();
            InputStream content = responseEntity.getContent();
            String result = convertStreamToString(content);
            System.out.println("content result:  " + result);
            JSONObject json = new JSONObject(result);
            System.out.println("json:  " + json);
            content.close();

        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (JSONException e) {
            e.printStackTrace();
        } 
```

我不断得到： `httpResponse: HTTP/1.1 401 UNAUTHORIZED`

这种方法是错误的吗？非常感谢您的宝贵时间。

# php - 使用 cookie 在 PHP 中创建“记住我”系统的安全方法是什么？

> ID：13259126
> 
> 赞同：1
> 
> 时间：2012-11-06T20:45:54.243
> 
> 标签：php, mysql, cookies

我正处于一个项目的开始，当用户进行身份验证时，该项目将具有“记住我”选项。

我的用户的数据库表具有以下用于身份验证的基本结构：

*   id ：用户注册时生成的随机数。（钥匙）
*   username ：用户选择的用户名，可以更改为另一个唯一的用户名。
*   hash ：设置密码时使用“phpass”创建的密码的哈希值。

我想知道一种使用 cookie 和 MySQL 让用户保持登录状态的安全方法，即使在多台计算机上也是如此。

我希望我可以使用相同的 cookie 来存储临时会话或“记住我”部分。我已经阅读了有关令牌以及将所有用户信息散列到 cookie 中的信息，但它安全吗？我检查了用户身份验证后使用的 Facebook cookie，并且有用户 ID 输入，我想做什么真的有必要吗？

如果我决定将信息散列到 cookie，我应该使用可能更慢的“phpass”还是简单的 MD5 函数，看到身份验证验证将出现在每个页面和每个 AJAX 请求中？每次验证登录时是否应该更新用户令牌？

最后，我最好的选择是什么？我知道有很多类似的问题，但我没有找到类似“最好的方法”来做到这一点。在每一篇文章中，我都发现这个主题有一些不同和矛盾的地方。我想知道一种安全干净的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:05:44.633

我建议使用单独的表来存储已保存的登录会话。该表将存储用户选择“记住我”时生成的唯一哈希、用户的 IP 地址和他们的 user_id。

当或如果用户决定保持持久登录，您将生成散列，将该散列保存为 cookie 值，并将其 IP / user_id 存储在“已记住”表中。

在你的 session_start/check 序列中，首先检查是否设置了会话——如果没有，检查是否设置了 cookie——如果设置了 cookie，则将它们的 IP 地址与 cookie 的哈希值与数据库相匹配，然后如果全部签出，设置它们的会话状态为“已验证”。

使用其 IP 地址和唯一哈希的表的原因是允许多个设备/计算机保持不变。每个设备都会在您的 remembered_sessions 表中有一个条目。

此方法不会在 cookie 中存储任何密码，只有成功输入密码的人才会在其计算机上拥有此 cookie。此外，即使有人在他们的 cookie 中抓取了该用户的哈希值，他们也需要位于同一网络上才能被视为经过身份验证。

# haskell - 在 Haskell 中将负基二进制转换为十进制：“.. 的实例”

> ID：13259130
> 
> 赞同：2
> 
> 时间：2012-11-06T20:46:02.550
> 
> 标签：haskell, base-conversion

我必须编写两个函数，将十进制数字转换为（-2）adian 数字系统（类似于只有-2 的二进制），反之亦然。我已经设法让小数 -> (-2)adian 运行。但是对于 (-2)adian -> decimal 我有一个问题，只是不知道从哪里开始。希望你能帮我

```
type NegaBinary = String

-- Function (-2)adisch --> decimal
negbin_dezi :: NegaBinary -> Integer -> Integer
negbin_dezi (xs:x) n 
    | (x == 0) = if ([xs] == "") then 0 else (negbin_dezi [xs] (n+1))
    | (x == 1) = if ([xs] == "") then (-2)**n else (-2)**n + (negbin_dezi [xs] (n+1)) 
```

它总是抛出：“定义 negbin_dezi 所需的 (Num [Char], Floating Integer) 的实例。

任何人都知道为什么它不起作用？请请:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T21:04:32.630

您的列表模式匹配语法倒退。`_ : _`第一个参数是列表的头部（一个元素），第二个是列表的尾部（另一个列表）。例如`x:xs`与`"abc"`给匹配`x = 'a'` `xs = "bc"`。`xs:x`应该如此`x:xs`。GHC 要求 , 的原因`instance of Num [Char]`是比较`x == 0`(and `x == 1`)。在这种情况下，它试图将`x`( `String`== `[Char]`) 的类型与`0`( `Num a => a`) 的类型相匹配，为此，它需要一个.`Num``String`

修复方法是：`negbin_dezi (x:xs) n`

要求`Floating Integer`实例的问题是因为`(**)`有 type `Floating a => a -> a -> a`，而你想要`(^)`哪个有 type `(Num a, Integral b) => a -> b -> a`（即它仅限于整数幂。）

完成此操作后，您会发现由于以下几个原因您的算法不起作用：

*   数字 0 与字符不同`'0'`，您应该`x`与字符`'0'`而`'1'`不是数字`0`和进行比较`1`。
*   `xs`已经是一个字符串，所以`[xs]`是一个包含字符串的列表，这不是你想要的。这是通过删除方括号来解决的。
*   可能减少的顺序是错误的。

* * *

另一方面，重复的`if`语句表明您的代码可能会发生一些优化。具体来说，如果您将空字符串作为其中的一部分处理，`negbin_dezi`那么您不必对它进行特殊处理。你可以这样写

```
negbin_dezi "" _ = 0
negbin_dezi (x:xs) n 
        | n == '0' = negbin_dezi xs (n+1)
        | n == '1' = (-2)^n + negbin_dezi 
```

（这意味着该函数“更全面”，即它是在更多输入上定义的。）

还有几件事：

*   该代码是“字符串类型的”：尽管具有更多结构，但您的数据被表示为字符串。布尔值列表 ( `[Bool]`) 会好得多。
*   该算法可以适应更清洁。对于以下内容，我假设您将其存储为 等`"01" = -2` `"001" = 4`。如果是这样，那么我们知道`number = a + (-2) * b + (-2)^2 * c ... = a + (-2) * (b + (-2) * (c + ...))`其中`a`, `b`, `c`,... 是数字。看这个，我们可以看到括号里面的东西实际上和整个表达式一样，只是从第二个数字开始。这在 Haskell 中很容易表达（我正在使用 list-of-bools 的想法。）：

    ```
    negbin [] = 0
    negbin (x:xs) = (if x then 1 else 0) + (-2) * negbin xs 
    ```

    这就是全部。如果您没有按该顺序存储它，那么调用来`reverse`修复它！（真的很棘手，可以写

    ```
    negbin = foldr (\x n -> (if x then 1 else 0) + (-2)*n) 0 
    ```

    )

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T20:59:06.263

一些问题：

1.  `x == 0`或者`x == 1`，但是`x`是一个`Char`，所以你的意思是`x == '0'`。

2.  你写`(xs:x)`。列表末尾没有匹配模式。也许使用先反转列表的辅助函数。

3.  `[xs]`有一个元素，永远不会`""`。请改用基本情况。

4.  模式匹配比相等检查更有帮助。

5.  `**`用于浮点幂，`^`用于整数幂

6.  你经常使用`[xs]`你的意思`xs`。您无需使用方括号来制作列表。

这是一个有效的重写：

```
negbin_dezi1 :: NegaBinary -> Integer
negbin_dezi1 xs = negbin (reverse xs) 0

negbin []     _ = 0
negbin (x:xs) n 
    | x == '0' = negbin xs (n+1)
    | x == '1' = (-2)^n + (negbin xs (n+1)) 
```

使用模式匹配会更好：

```
negbin_dezi2 :: NegaBinary -> Integer
negbin_dezi2 xs = negbin (reverse xs) 0 where
  negbin []     _ = 0
  negbin ('0':xs) n =          negbin xs (n+1)
  negbin ('1':xs) n = (-2)^n + negbin xs (n+1) 
```

但也许将 '0' 转换为 0 并将 '1' 转换为 1 并乘以它会更好：

```
val :: Char -> Int
val '0' = 0
val '1' = 1

negbin_dezi3 :: NegaBinary -> Integer
negbin_dezi3 xs = negbin (reverse xs) 0 where
  negbin []     _ = 0
  negbin (x:xs) n = val x * (-2)^n  +  negbin xs (n+1) 
```

* * *

不过，我不会这样写：

一种完全不同的方法是同时考虑整个事情。

```
"10010" -rev> [0,1,0,0,1] -means> [  0,      1,      0,      0,      1  ]
                                  [(-2)^0, (-2)^1, (-2)^2, (-2)^3, (-2)^4] 
```

所以让我们列出两个列表

```
powers = [(-2)^n | n <- [0..]]
coefficients = reverse.map val $ xs 
```

并将它们相乘

```
zipWith (*) powers coefficients 
```

然后加起来，给出：

```
negbin_dezi4 xs = sum $ zipWith (*) powers coefficients
    where powers = [(-2)^n | n <- [0..]]
      coefficients = reverse.map val $ xs 
```

您可以重写`powers`为`map ((-2)^) [0..]`，
甚至更好：`powers = 1:map ((-2)*) powers`。
（它更好，因为它重用了以前的计算并且非常干净。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:27:18.720

这个

```
convB2D::NegaBinary->整数
convB2D xs|(长度 xs)==0 =0
          |b=='0' = convB2D(drop 1 xs)
          |b=='1' = val+convB2D(下降 1 xs)
          |否则=错误“无效字符”
               其中 b=head xs
                       val=(-2)^((长度 xs)-1)

```

为我工作。另一方面，我在转换 dec->nbin 时遇到问题：D

# java - 多选下拉选择

> ID：13259132
> 
> 赞同：-2
> 
> 时间：2012-11-06T20:46:15.153
> 
> 标签：java, javascript, jsp

我在用 JSP 设计的网页上有 multiSelect 下拉菜单。最终用户将选择所需的选项并将表单保存到数据库。下面是从数据库主表中获取值和索引的原始下拉列表。选定的值保存在另一个表中。

页面上的原始下拉菜单。

```
 <table>
 <tr>
 <td> Departments Impacted   </td>
    <td><select multiple="multiple" name="abc" id="abc">
     <%

         Statement stt3 = conn.createStatement();
         ResultSet rstt3 = stt3.executeQuery("SELECT DEPT_DEPARTMENT_ID, DEPT_NAME FROM [PA].[dbo].[PA_DEPT_DEPARTMENT] ORDER BY DEPT_NAME ASC");
         while (rstt3.next()) {

         %>

         <option value="<%=rstt3.getString(1)%>"><%=rstt3.getString(2)%>
         </option>
         <%
             }
            stt3.close();
     rstt3.close();
                            %>
    </select></td>  </tr> 
```

下面的代码检索保存的数据库值并将它们显示为在新的**选择**标记中选择。但是，我希望所选值显示在上表中，而不是新的下拉列表中。

```
<%
 ArrayList al = new ArrayList();    
 String dept = null;
 String deptID = "SELECT DEPARTMENT_ID FROM  [PA_RD_DEP_REQ_DETAILS_DEPARTMENT_MAP] inner join  [PA_RD_REQUISITION_DETAILS] on RD_DEP_RD_ID=RD_ID where RD_ID=?";

         PreparedStatement pst4 = conn.prepareStatement(deptID);
         pst4.setString(1, RD_ID);
         ResultSet rstt1 = pst4.executeQuery();
         while (rstt1.next()) {
             dept=rstt1.getString(1);
            al.add(dept);

         }
         for(int i=0; i<al.size(); i++)
         {
         String deptName = "SELECT [DEPT_NAME] FROM  [PA_DEPT_DEPARTMENT] WHERE [DEPT_DEPARTMENT_ID]=?";
         PreparedStatement pst5 = conn.prepareStatement(deptName);
         pst5.setString(1, (String)al.get(i));
         ResultSet rstt5 = pst5.executeQuery();
         while (rstt5.next()) {
             %>
             <option value="<%=(String)al.get(i)%>" selected="selected"><%=rstt5.getString(1)%>
             <%  

         }
         }

         %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:00:09.450

将[selected 属性](http://www.w3schools.com/tags/att_option_selected.asp), 添加到`option`标签将使其被选中。这可以为多个选项标签完成，而不需要 JavaScript：

```
<select multiple="multiple">
  <option selected="selected" value="volvo">Volvo</option>
  <option selected="selected" value="saab">Saab</option>
  <option value="vw">VW</option>
  <option value="audi">Audi</option>
</select> 
```

# symfony - 访问实现安全用户界面的 Symfony2 实体存储库中的容器？

> ID：13259133
> 
> 赞同：1
> 
> 时间：2012-11-06T20:46:15.823
> 
> 标签：symfony

我需要访问这个特殊用户存储库中的容器。我不确定如何在不绊倒 UserProviderInterface 的情况下做到这一点。谢谢你的帮助！

```
class UserRepository extends EntityRepository implements UserProviderInterface
{

    public function loadUserByUsername($username)
    {
        //the container provide the $tenantID, which I need for my query

        $q = $this
            ->createQueryBuilder('u')
            ->where('u.tenantid = :tenantid AND u.email = :email')
            ->setParameter('tenantid', $tenantId)
            ->setParameter('email', $username)
            ->getQuery();

        try {......

        return $user;
    } 
```

# linux - 加入文件并创建索引

> ID：13259135
> 
> 赞同：0
> 
> 时间：2012-11-06T20:46:35.637
> 
> 标签：linux, join, indexing

我想加入两个文件并将它们索引到一个新列中，如下所示：

档案A

```
apple     1 2 3 4 5 6
banana    3 2 4 4 5 6
orange    2 3 4 5 6 7
pear      2 4 5 6 3 5 
```

文件 B

```
apple    1 3 4 5 6 7
grapes   4 5 6 4 3 6
melon    3 4 5 2 5 1
orange   2 4 5 6 7 8 
```

我想根据前两列比较这两个文件，并从文件 A 中输出公共行，然后从文件 A 和文件 B 中添加唯一行并对其进行索引，如下所示

输出：

```
apple     1 2 3 4 5 6 both
orange    2 3 4 5 6 7 both
banana    3 2 4 4 5 6 fileA
pear      2 4 5 6 3 5  fileA
grapes   4 5 6 4 3 6   fileB
melon    3 4 5 2 5 1   fileB 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:10:12.607

`comm`比较两个文件并报告哪些行出现在一个、另一个或两者中：

```
comm -2 <(cut -f1 -d' ' fileA | sort)
        <(cut -f1 -d' ' fileB | sort) \
  | sed $'/\t/{s/$/ both/;s/\t//};/ /!s/$/ fileA/' \
  | join -o1.1,2.2,2.3,2.4,2.5,2.6,2.7,1.2 - fileA \
  | sort -k8
cut -f1 -d' ' fileA \
  | grep -vFf- fileB \
  | sed 's/$/ fileB/' 
```

如您所见，管道非常复杂。如果您打算对代码进行更改，请考虑转向更强大的语言，例如 Perl。

# php - 工作，然后停止工作......启用安全模式时无法激活 CURLOPT_FOLLOWLOCATION -

> ID：13259136
> 
> 赞同：0
> 
> 时间：2012-11-06T20:46:36.393
> 
> 标签：php, apache, curl

我刚刚编写了一个运行良好的代码。它使用 CURL 获取数据，我已经运行了 .php 文件 2 次，但是第三次​​我在整个网站上都收到了这条消息：`CURLOPT_FOLLOWLOCATION cannot be activated when safe_mode is enabled or an open_basedir is set in`

我没有改变任何东西。可能是什么问题呢？所以它工作得很好，而不是停止工作......

# java - 脱离上下文调用的无状态会话 bean 缺少 EntityManager

> ID：13259138
> 
> 赞同：2
> 
> 时间：2012-11-06T20:46:40.830
> 
> 标签：java, jakarta-ee, persistence, entitymanager, stateless-session-bean

我是 Java EE 的新手，所以我的问题可能非常基本。我使用无状态会话 bean（简化）构建了以下 REST Web 服务：

```
@Path("/list/")
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
@Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
@Stateless
public class ListResource {

    @PersistenceContext(unitName = "unitName")
    private EntityManager em;

    @GET
    @Path("/")
    public List<Compound> getCompounds() {

    List<Compound> list = tq.getResultList();

    if (list.isEmpty()) {
        throw new WebApplicationException(Response.status(404).entity("There are no compounds in database.").build());
    }

    return list;
    }
} 
```

它就像魅力一样。它可以通过 URL 访问并返回 JSON。问题是我有另一部分用纯 Java 编写的程序需要使用这个 Session bean 作为某种模型来获取所有 Compound。

问题是当我在某个地方初始化这个 Session bean 时，它在持久性上下文之外，因此不知道 EntityManager 来访问数据库。我相信。

我不知道该怎么办。我可以在代码的远处初始化类 ListResource 并让 EntityManager 的依赖注入工作吗？或者以某种方式获取持久性上下文，然后初始化这个会话 bean？

我希望这是有道理的。我要描述它的复杂问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:10:40.203

如果你有一个 Web 服务和一个独立的应用程序调用同一个 bean，我建议你将功能移动到一个单独的无状态 bean 中，并为它创建远程和本地接口。这样，您可以将本地 bean 注入您的 Web 服务 bean，并使用 jndi 调用远程 bean。

[更多关于在此处](http://docs.oracle.com/javaee/6/tutorial/doc/gipjf.html)访问 Java EE bean的信息。

或者，您的客户端 Java 代码可以调用 Web 服务来获取所有数据。请参阅有关连接到 RESTful 服务的方法的[问题。](https://stackoverflow.com/questions/923566/jax-rs-is-perfect-for-implementing-rest-what-do-you-use-to-call-rest-services-i)

# ios - 如何清理 ios app tmp 文件夹

> ID：13259141
> 
> 赞同：1
> 
> 时间：2012-11-06T20:46:49.510
> 
> 标签：ios, core-data

我有一个可以拍照的应用程序（使用“允许外部存储文件”标志保存它们）并注意到它的大小增长太多了。在四处寻找之后，我发现 iOS 在 tmp 目录中创建了一个 .LINKS 文件夹，并且每次我保存图片时，它都会被复制到 Documents 文件夹和 .LINKS 文件夹中。

当图片被删除时，它在 .LINKS 中的副本仍然存在，占用空间。所以

1.  如何清除 tmp 文件夹？
2.  为什么要使用这个 .LINKS 文件夹？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T14:31:06.223

找到解决方案 1.:

```
NSArray* temp = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:NSTemporaryDirectory() error:NULL];
for (NSString *file in temp) {
    [[NSFileManager defaultManager] removeItemAtPath:[NSString stringWithFormat:@"%@%@", NSTemporaryDirectory(), file] error:NULL];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-05T15:32:00.560

事实证明，您不需要删除 tmp 目录的内容。iOS 会定期清理它（尤其是当空间不足时）。我发现这篇文章很有帮助： http: [//kmithi.blogspot.in/2012/08/ios-application-directory-structure.html](http://kmithi.blogspot.in/2012/08/ios-application-directory-structure.html)

.LINKS 文件夹被 NSImage 和相关类用来缓存图像。我有一个应用程序可以生成大量图像，并且每次启动该目录都会增长 8MB。但是在下载了一些电影占用空间后，我看到文件夹内容被自动清除了。

# ruby - 我应该如何测试 Mailman 应用程序

> ID：13259142
> 
> 赞同：3
> 
> 时间：2012-11-06T20:47:08.123
> 
> 标签：ruby, ruby-on-rails-3, mailman-gem

我正在尝试为我的应用程序编写一些规范，以处理和重新发送传入的电子邮件。它是用 Mailman 应用程序构建的。我没有找到任何关于如何做到这一点的好例子。我真正尝试的是创建电子邮件（使用 Mail gem）并使用 Mailman 处理它。但是只能选择使用 stding 进行测试。

那么，是否有任何为测试邮递员应用程序而编写的规范示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T03:21:42.143

我认为尽可能多地从您的`Mailman::Application`块中提取并将其放入您的应用程序的某个地方是有用的。然后测试该处理。

[这个 Railscast](http://railscasts.com/episodes/313-receiving-email-with-mailman?view=asciicast)（仅限专业版，抱歉）有一个非常好的“路由替代方案”示例。

基本上而不是做类似的事情：

```
Mailman::Application.run do
  subject(/Update (\d+)/) do |ticket_id|
    ... 
```

你只是说：

```
Mailman::Application.run do
  default do
    MailProcessor.receive_mail(message)
  end
end 
```

然后`MailProcessor`该类将处理读取消息并在您的应用程序中调用正确的其他函数（取决于消息的主题、收件人、发件人等）。然后我将 RSpec 测试`MailProcessor`该类是否做正确的事情。

这类似于我测试 rake 任务的方式（将功能放在您测试的 lib 文件中，并让 rake 任务只调用 lib 文件。）然后您可以相当确定该功能正在正确测试。如果您对 rake 任务偏执，可以尝试以下方法：[http](http://robots.thoughtbot.com/post/11957424161/test-rake-tasks-like-a-boss) ://robots.thoughtbot.com/post/11957424161/test-rake-tasks-like-a-boss 。

# php - 使值在多维数组中唯一

> ID：13259143
> 
> 赞同：0
> 
> 时间：2012-11-06T20:47:15.643
> 
> 标签：php, arrays, multidimensional-array

我在将多维数组缩减为普通数组时遇到了一些问题。

我有一个这样的输入数组：

```
Array
(
[0] => Array (
        [0] => 17
        [1] => 99
    )
[1] => Array (
        [0] => 17
        [1] => 121
    )
[2] => Array (
        [0] => 99
        [1] => 77
    )
[3] => Array (
        [0] => 45
        [1] => 51
    )
[4] => Array (
        [0] => 45
        [1] => 131
    ) 
```

所以我有一个多维数组，其中的值有一些重叠（例如 17,99 和 17,121）现在我想要这样的输出：

```
Array
(
[0] => Array (
        [0] => 17
        [1] => 99
        [2] => 121
        [3] => 77
    )
[2] => Array (
        [0] => 45
        [1] => 51
        [3] => 131
    ) 
```

我想保存，这样我的数据库中哪些文章是相同的。输出数组应该仍然是一个多维数组，但是第二层的每个数字在数组中应该是唯一的。

我正在尝试解决这个问题一个多星期，但我没有让它工作。我知道这应该很容易......但无论如何 - 我不明白：D

这是我到目前为止得到的：

```
$parity_sorted = array();
    foreach($arr as $key => $a){
        if(count($parity_sorted) > 0){
        foreach($parity_sorted as $key2 => $arr_new){
            if(in_array($a[0], $arr_new) || in_array($a[1], $arr_new)){
                if(!in_array($a[0], $arr_new)){array_push($parity_sorted[$key2], $a[0]);}
                if(!in_array($a[1], $arr_new)){array_push($parity_sorted[$key2], $a[1]);}
            } else {
                array_push($parity_sorted, array($a[0],$a[1]));
            }
        }
        } else {
            array_push($parity_sorted, array($a[0],$a[1]));
        }

    } 
```

您可能已经解决了这样的问题还是有更简单的方法？也许我只是觉得太复杂了（这不是我第一次尝试，但这段代码是最后一次尝试）

任何帮助，将不胜感激。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:59:47.173

这是我修改后的代码，给出了您的评论以及它按预期工作的演示。( [http://codepad.org/CiukXctS](http://codepad.org/CiukXctS) )

```
<?php

$tmp = array();
foreach($array as $value)
{
    // just for claraty, let's set the variables
    $val1 = $value[0];
    $val2 = $value[1];
    $found = false;
    foreach($tmp as &$v)
    {
        // check all existing tmp for one that matches
        if(in_array($val1, $v) OR in_array($val2, $v))
        {
            // this one found a match, add and stop
            $v[] = $val1;
            $v[] = $val2;
            // set the flag
            $found = true;
            break;
        }
    }
    unset($v);

    // check if this set was found  
    if( ! $found)
    {
        // this variable is new, set both
        $tmp[] = array(
                $val1,
                $val2,
                );
    }
}

// go trough it all again to ensure uniqueness
$array = array();
foreach($tmp as $value)
{
    $array[] = array_unique($value); // this will eliminate the duplicates from $val2
} 
```

***原答案***

这个问题问得不好，但我会尝试回答我认为的问题。

您想收集对中具有相同第一个值的所有数组对吗？

```
$tmp = array();
for($array as $value)
{
    // just for claraty, let's set the variables
    $val1 = $value[0];
    $val2 = $value[1];

    if(isset($tmp[$val1])) // we already found it
    {
        $tmp[$val1][] = $val2; // only set the second one
    }
    else
    {
        // this variable is new, set both
        $tmp[$val1] = array(
            $val1,
            $val2,
        );
    }
}
// go trough it all again to change the index to being 0-1-2-3-4....
$array = array();
foreach($tmp as $value)
{
    $array[] = array_unique($value); // this will eliminate the duplicates from $val2
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:13:19.777

这是常见任务的解决方案。

```
$data = array(array(17,99), array(17,121), array(99,77), array(45,51), array(45,131));
$result = array();
foreach ($data as $innner_array) {
    $intersect_array = array();
    foreach ($result as $key => $result_inner_array) {
        $intersect_array = array_intersect($innner_array, $result_inner_array);
    }
    if (empty($intersect_array)) {
        $result[] = $innner_array;
    } else {
        $result[$key] = array_unique(array_merge($innner_array,     $result_inner_array));
    }

}
var_dump($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:18:09.897

尝试：

```
$arr = array(array(17,99), 
            array(17,121),
            array(99,77),
            array(45, 51),
            array(45, 131)
      );

 foreach($arr as $v)
  foreach($v as $m)
    $new_arr[] = $m;

  $array = array_chunk(array_unique($new_arr), 4);
  var_dump($array); 
```

[演示](http://codepad.org/9uBNs4ib) 它使用`array_unique`和`array_chunk`。

**输出：**

```
 array(2) { [0]=>array(4) { [0]=> int(17) [1]=>int(99)
            [2]=>int(121) [3]=> int(77) }
            [1]=> array(3) { [0]=> int(45) [1]=>int(51)
            [2]=>int(131) }
          } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T21:58:39.693

我想我明白你的问题了。让我试一试。

```
$firstElems = array();
$secondElems = array();
foreach ( $arr as $v ) {
    $firstElems[ $v[0] ] = array( $v[0] );
}
foreach ( $arr as $v ) {
    $secondElems[ $v[1] ] = $v[0];
}

foreach ( $arr as $v ) {
    if ( isset( $secondElems[ $v[0] ] ) ) {
        array_push( $firstElems[ $secondElems[ $v[0] ] ], $v[1] );
    }
    else {
        array_push( $firstElems[ $v[0] ], $v[1] );
    }
}

foreach ( $firstElems as $k => $v ) {
    if ( isset( $secondElems[ $k ] ) ) {
        unset( $firstElems[ $k ] );
    }
} 
```

输出：

```
Array
(
    [17] => Array
        (
            [0] => 17
            [1] => 99
            [2] => 121
            [3] => 77
        )

    [45] => Array
        (
            [0] => 45
            [1] => 51
            [2] => 131
        )

) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T22:08:18.023

（代码示例：[http](http://codepad.org/rJNNq5Vd) ://codepad.org/rJNNq5Vd ）

我真的相信我理解你，如果是这种情况，这就是你要找的：

```
function arrangeArray($array) {
    $newArray = array(array_shift($array));

    for ($x = 0; $x < count($newArray); $x++) {
        if (!is_array($newArray[$x])) {
            unset($newArray[$x]);
            return $newArray;
        }
        for ($i = 0; $i < count($newArray[$x]); $i++) {
            foreach ($array as $key => $inArray) {
                if (in_array($newArray[$x][$i], $inArray)) {
                    $newArray[$x] = array_unique(array_merge($newArray[$x], $inArray));
                    unset($array[$key]);
                }
            }
        }
        $newArray[] = array_shift($array);
    }
} 
```

哪个会返回：

```
array(2) {
  [0]=>
  array(4) {
    [0]=>
    int(17)
    [1]=>
    int(99)
    [2]=>
    int(121)
    [4]=>
    int(77)
  }
  [1]=>
  array(3) {
    [0]=>
    int(45)
    [1]=>
    int(51)
    [3]=>
    int(131)
  }
} 
```

为了：

```
var_dump(arrangeArray(array(
    array(17,99),
    array(17,121),
    array(99,77),
    array(45, 51),
    array(45, 131),
))); 
```

和：

```
array(1) {
  [0]=>
  array(6) {
    [0]=>
    int(17)
    [1]=>
    int(99)
    [2]=>
    int(121)
    [3]=>
    int(45)
    [4]=>
    int(77)
    [6]=>
    int(51)
  }
} 
```

为了：

```
var_dump(arrangeArray(array(
    array(17,99),
    array(17,121),
    array(99,77),
    array(45, 51),
    array(45, 17),
))); 
```

# vb.net - 带有来自 VS2010 Winforms 变量的 where 子句的 SQL 更新

> ID：13259152
> 
> 赞同：2
> 
> 时间：2012-11-06T20:47:36.413
> 
> 标签：vb.net, sql-server-2008

我正在尝试在不使用数据集的情况下从带有两个变量的 winform 进行更新查询。我分配了我的两个变量，然后运行查询，但它不断给出 zcomp 不是有效列名的错误。这当然是真的，但在我说 = zcomp 之前我会告诉它哪一列。下面是我运行查询的代码。

```
Dim zamnt As Integer = WopartsDataGridView.Rows(e.RowIndex).Cells(e.ColumnIndex).Value
Dim zcomp As Integer = gridRow.Cells(0).Value

Dim con As New SqlConnection
Dim cmd As New SqlCommand
Try
  con.ConnectionString = "Data Source=MNT-MGR-2\SQLEX;Initial Catalog=MT;Integrated Security=True"
  con.Open()
  cmd.Connection = con
  cmd.CommandText = "UPDATE dbo.sparts SET [dbo.sparts.QtyonHand] = [dbo.sparts.QtyonHand] - zamnt WHERE [ComponentID] = zcomp"
  cmd.ExecuteNonQuery()
Catch ex As Exception
  MessageBox.Show("Error while updating record on table..." & ex.Message, "Update Records")
Finally
  con.Close()
  gridRow.Cells(4).Value = "Yes"
End Try 
```

我已经尝试了几种不同的方法。如果我取出 zamnt 和 zcomp 并将实际数值放入变量中，它就可以正常工作。请帮助我一整天都在寻找一种在此更新查询中使用变量的方法。谢谢，斯泰西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T04:00:22.853

你试过这个吗？

```
Dim zamnt As Integer = WopartsDataGridView.Rows(e.RowIndex).Cells(e.ColumnIndex).Value
Dim zcomp As Integer = gridRow.Cells(0).Value

Dim con As New SqlConnection
Dim cmd As New SqlCommand
Try
  con.ConnectionString = "Data Source=MNT-MGR-2\SQLEX;Initial Catalog=MT;Integrated Security=True"
  con.Open()
  cmd.Connection = con
  cmd.CommandText = "UPDATE dbo.sparts SET [dbo.sparts.QtyonHand] = [dbo.sparts.QtyonHand] -" + zamnt + " WHERE [ComponentID] =" + zcomp
  cmd.ExecuteNonQuery()
Catch ex As Exception
  MessageBox.Show("Error while updating record on table..." & ex.Message, "Update Records")
Finally
  con.Close()
  gridRow.Cells(4).Value = "Yes"
End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:23:16.987

除了使用参数，“使用”语句关闭连接并释放资源：

```
 Dim zamnt As Integer = WopartsDataGridView.Rows(e.RowIndex).Cells(e.ColumnIndex).Value
    Dim zcomp As Integer = gridRow.Cells(0).Value

    Try
        Using con As New SqlConnection("Data Source=MNT-MGR-2\SQLEX;Initial Catalog=MT;Integrated Security=True")
            con.Open()
            Using cmd As New SqlCommand
                cmd.CommandText = "UPDATE dbo.sparts SET [dbo.sparts.QtyonHand] = [dbo.sparts.QtyonHand] - @zamnt WHERE [ComponentID] = @zcomp"
                cmd.Parameters.AddWithValue("@zamt", zamnt)
                cmd.Parameters.AddWithValue("@zcomp", zcomp)
                cmd.ExecuteNonQuery()
            End Using
        End Using
    Catch ex As Exception
        MessageBox.Show("Error while updating record on table..." & ex.Message, "Update Records")
    Finally
        con.Close()
        gridRow.Cells(4).Value = "Yes"
    End Try 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:11:23.350

您可能正在寻找如何在 ADO.NET 中使用参数。对于您的示例，它可能如下所示：

```
cmd.Parameters.Add("@zamnt", zamnt);
cmd.Parameters.Add("@zcomp", zcomp); 
```

将这两行放在前面的任何位置`ExecuteNonQuery`。

因为参数需要`@`前缀，所以您还需要将查询更改为 say`@zamnt`而不是 just `zamnt`，并且对于`zcomp`:

```
cmd.CommandText = "UPDATE dbo.sparts SET [dbo.sparts.QtyonHand] = [dbo.sparts.QtyonHand] - @zamnt WHERE [ComponentID] = @zcomp" 
```

# dart - Dart 中的属性

> ID：13259156
> 
> 赞同：8
> 
> 时间：2012-11-06T20:48:09.637
> 
> 标签：dart

是否有计划
为类、方法、方法的参数 引入属性，
例如 C# 或 Java 属性？

```
    [测试]
    类 SomeClass
    {
        [测试]
        一些方法（）
    }

```

或者

```
    @测试
    类 SomeClass
    {
        @测试
        someMethod(@Test int 参数)
    }

```

对于许多框架来说，这将非常有用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T21:02:50.730

在 dart 中，它们被称为*metadata* / *annotation*。语法非常接近java。这是一个例子：

```
@Test testMethod() {} 
```

在 Dart 规范中，您可以阅读：

> 元数据由一系列注释组成，每个注释都以字符 @ 开头，后跟一个以标识符开头的常量表达式。如果表达式不是以下之一，则为编译时错误：
> 
> *   对编译时常量变量的引用。
> *   对常量构造函数的调用。
> 
> [……]
> 
> 元数据可以出现在库、类、typedef、类型参数、构造函数、工厂、函数、字段、参数或变量声明之前以及导入或导出指令之前。

[dart:core](https://api.dartlang.org/docs/channels/stable/latest/dart_core.html)中已经预定义了一些*注释*。特别是和。`@override``@deprecated``@proxy`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T21:02:22.190

Dart 已经有了注解，在某些方面类似于 Java，只是还没有在很多地方使用，而且还不能通过反射访问它们。

见这篇文章： http: [//news.dartlang.org/2012/06/proposal-to-add-metadata-to-dart.html](http://news.dartlang.org/2012/06/proposal-to-add-metadata-to-dart.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T21:23:07.217

下面简单介绍一下 Dart 元库中目前可用的两个元数据注解：

[Dart 元数据是你的朋友。](http://phylotic.blogspot.com/2012/11/dart-metadata-is-your-friend.html)

这并不妨碍您使用自己的工具，但是这两个工具与 Dart 编辑器集成。

# documentation - 需求、设计、代码推导

> ID：13259161
> 
> 赞同：0
> 
> 时间：2012-11-06T20:48:33.093
> 
> 标签：documentation, verification

我正在关注验证和验证线程，我认为一个示例可能会有所帮助。我不是经验丰富的开发人员，所以我想知道这是否正确：

1.  用户需求：我想将我朋友的姓名、地址和电话号码保存到系统中
2.  软件需求规范：用户希望能够输入和保存姓名、地址、电话号码。
3.  技术分析：用于数据输入的 Web UI。数据将保存到 SQL DB 中。
4.  详细设计：UI元素：一个字符串类型的3个字段，1个按钮，对象XYZ，dbConnection....
5.  代码：（UI的实际代码，db脚本）

**是这样吗？任何人都可以更正或添加我在这里缺少的内容吗？**

至于验证，可以根据需求（可追溯性）验证每个阶段。至于验证，功能代码应该按预期工作（保存三个属性）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:22:27.263

虽然这在理论上是正确的（我不得不这么说），但在所有实际和现实世界的场景中都是完全错误的。

捕捉用户需求以及他**为什么**想做某件事。这使您可以只构建用户想要的软件，消除作为虚构需求、技术需求、拥有等方面的一部分的浪费。

所以，而不是，

```
I want to be save my friend's name, address and phone number to the system... 
```

我宁愿有以下强调**为什么？**用户的**真正需求**

> 我想在我朋友生日那天给他寄一张贺卡。

现在，我知道我只需要他的姓名和地址。由于这是为了将来，我也想存储这些信息。所以我接下来要写的是一套满足上述客户需求的验收标准。如果我可以将它们捕获为一组可执行规范，那么它会更好，因为它们可以通过编程方式进行*验证。*

忽略其他一切。可追溯性是不必要的开销。如果我们基于虚构的需求构建软件，我们就需要它。

阅读以下内容

*   [敏捷宣言](http://agilemanifesto.org/)
*   [ATDD](http://testobsessed.com/2008/12/acceptance-test-driven-development-atdd-an-overview/)和[BDD](http://en.wikipedia.org/wiki/Behavior-driven_development)
*   [影响映射](http://www.impactmapping.org/index.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:22:00.733

我从未见过一种在单个冲刺/时间框之外将代码跟踪到需求的好方法。而且，您的列表中缺少测试人员！除非您的测试人员也是您的业务分析师（根据我的经验，专业测试人员发现很多需求不一致 - 也就是错误）。

我认为最好的方法是让每个人都尽可能参与，这样你就可以经常交叉引用每个人的期望。如果每个人都一起工作，您就不需要实施一种货物崇拜流程，即批量信息以一种方式向下传输。

具有可追溯性的最简单工具是您的 VCS，其中每个提交都包含与该提交相关的用户故事/用例的 ID。

# c# - VB.Net Power 运算符 (^) 从 C# 重载

> ID：13259162
> 
> 赞同：8
> 
> 时间：2012-11-06T20:48:38.090
> 
> 标签：c#, vb.net, operator-overloading, operator-keyword

我正在编写一个暴露给 VB.Net 的 C# 类。我想重载 vb.net`^`运算符，以便我可以编写：

```
Dim c as MyClass
Set c = New ...
Dim d as MyClass
Set d = c^2 
```

在 C# 中，`^`运算符是`xor`运算符，不存在幂运算符。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T20:58:46.003

**编辑**

事实证明，有一个`SpecialNameAttribute`可以让您在 C# 中声明“特殊”函数，这将允许您（除其他外）重载 VB 幂运算符：

```
public class ExponentClass
{
    public double Value { get; set; }

    [System.Runtime.CompilerServices.SpecialName]
    public static ExponentClass op_Exponent(ExponentClass o1, ExponentClass o2)
    {
        return new ExponentClass { Value = Math.Pow(o1.Value, o2.Value) };
    }
} 
```

VB 将上述类中的`op_Exponent`函数转换为`^`幂运算符。

有趣的是，[文档](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.specialnameattribute%28v=vs.110%29.aspx)说明了 .NET 框架当前未使用的属性...

--原始答案--

不。 power ( `^`) 运算符被编译，`Math.Pow()`因此无法在 C# 中“重载”它。

来自 LinqPad：

```
Sub Main
    Dim i as Integer
    Dim j as Integer
    j = Integer.Parse("6")
    i = (5^j)
    i.Dump()
End Sub 
```

伊利诺伊：

```
IL_0001:  ldstr       "6"
IL_0006:  call        System.Int32.Parse
IL_000B:  stloc.1     
IL_000C:  ldc.r8      00 00 00 00 00 00 14 40 
IL_0015:  ldloc.1     
IL_0016:  conv.r8     
IL_0017:  call        System.Math.Pow
IL_001C:  call        System.Math.Round
IL_0021:  conv.ovf.i4 
IL_0022:  stloc.0     
IL_0023:  ldloc.0     
IL_0024:  call        LINQPad.Extensions.Dump 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T20:54:25.823

通过实验，事实证明，运算符重载只是语法糖，如果您需要使用多种语言进行开发，最好避免。例如，`^`VB.NET 的运算符被翻译成`op_Exponent`函数，所以这就是 C# 中可用的。

[为什么 C# 没有幂运算符？](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/07/why-doesn-t-c-have-a-power-operator.aspx)

您可以使用本机 .NET 方式，因此您不依赖运算符：

```
Math.Pow(x, y); 
```

同样对于 y=2，使用乘法 (x*x) 会更快。

# vector - 插画对象缩放问题

> ID：13259165
> 
> 赞同：0
> 
> 时间：2012-11-06T20:48:48.607
> 
> 标签：vector, path, scaling, adobe-illustrator, distortion

当我缩小某个对象时，我遇到了某个对象的问题 - 锚点似乎在移动 - 并且徽标（对象）变得扭曲。

请查看附件。您会看到字母“n”和“a”被扭曲了。这让我发疯，任何帮助将不胜感激。

![在此处输入图像描述](../Images/c052538d443d00e1b39e5d8442d6541f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:34:21.753

我已经解决了这个问题！

我将对象保存为 SVG，然后将 SVG 文件复制到我想在其上使用徽标的文件中！任务完成。对自己也有点印象。

# objective-c - 重命名 NSString 常量

> ID：13259170
> 
> 赞同：1
> 
> 时间：2012-11-06T20:49:12.203
> 
> 标签：objective-c, xcode, cocoa, nsstring, constants

我使用了很多`NSString`常量，例如：

```
static NSString * const REAColorPlaybackBackgroundKey = @"REAColorPlaybackBackgroundKey";
static NSString * const REAColorPlaybackForegroundKey = @"REAColorPlaybackForegroundKey"; 
```

有不必要的重复，也没有简单的方法来重命名它们。Xcode 的*Refactor*命令在这里不起作用，*Edit All in Scope*也无法处理。有没有更聪明的方法来定义`NSString`常量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:52:13.960

当然，尝试这样的事情：

```
#define STRING_CONSTANT(PREFIX, NAME, SUFFIX) static NSString *const PREFIX ## NAME ## SUFFIX = @"" #PREFIX #NAME #SUFFIX

// usage
STRING_CONSTANT(REA, ColorPlaybackBackground, Key);
STRING_CONSTANT(REA, ColorPlaybackForeground, Key); 
```

显然，如果您愿意，您可以使用`PREFIX`和常量来代替参数。`SUFFIX`

# php - 基于 PHP 会话的计数器太触发快乐

> ID：13259171
> 
> 赞同：1
> 
> 时间：2012-11-06T20:49:18.320
> 
> 标签：php, session, session-timeout, hitcounter

我在网站上有一个简单的基于会话的 PHP 计数器。问题是，每当我打开网站一段时间（即使我没有重新加载它），它似乎都会添加幻像点击，所以我认为会话超时设置为服务器上某处的非常短的时间。但是，我检查了 php.ini，超时时间是标准的 24 分钟，而幻像命中每三分钟左右添加一次。

该网站还没有指向它的名称服务器，也没有指向它的链接，所以这不是机器人/爬虫的问题。这是我的代码：

```
 $hit_file = file(__DIR__ . "/hit_file.txt");

            $hit_num = $hit_file[0];
            if(!isset($_SESSION['been']))

                {

                    $hit_num++;

                    $hit_write = fopen(__DIR__ . "/hit_file.txt", 'w');

                    fwrite($hit_write, $hit_num);

                    fclose($hit_write);

                    $_SESSION['been'] = 1;

                }

             echo $hit_num; 
```

更新：我注意到一些奇怪的 access.log 条目。它们都遵循这种格式： ::1 - - [06/Nov/2012:22:05:03 +0100] "GET / HTTP/1.0" 200 3719 "-" "-"

我每五分钟左右得到一个，这与添加幻影命中的频率有关。他们到底是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:20:41.140

::1 是本地主机 IPv6 地址。如果我是你，我会从那里开始寻找。其中一个应用程序正在发出这些请求。要么追踪它，要么检查`$_SERVER['REMOTE_ADDR']`它是否不是::1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:54:21.847

我会说，如果您查看日志，您会发现是搜索引擎机器人（可能还有其他机器人）在爬取您的网站。也就是说，如果您的网站目前处于活动状态。

# ruby - Vim 需要很长时间才能打开 Ruby 文件

> ID：13259173
> 
> 赞同：8
> 
> 时间：2012-11-06T20:49:29.473
> 
> 标签：ruby, vim

我注意到 Vim 需要很长时间才能打开 Ruby 和 ERB（嵌入式 Ruby）文件。我描述了我的启动时间和这些有趣的行（完整的配置文件在底部，如果你想看的话）：

```
32980.181  32011.917  32011.917: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/ftplugin/ruby.vim
32980.516  32035.414  022.871: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/ftplugin/eruby.vim 
```

如您所见，为 Ruby 和 ERuby 加载 ftdetect 需要很长时间（显然时间以“毫秒”为单位）。将此与 HTML 的 ftdetect 以及加载我的 .vimrc 所需的时间进行比较：

```
952.223  000.626  000.626: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/ftplugin/html.vim
738.536  612.248  534.785: sourcing $HOME/.vimrc 
```

这是正常的吗？我能做些什么吗？必须等待大约 33 秒才能打开文件，这非常令人恼火。

```
times in msec
 clock   self+sourced   self:  sourced script
 clock   elapsed:              other lines

000.022  000.022: --- VIM STARTING ---
012.064  012.042: Allocated generic buffers
012.910  000.846: locale set
013.186  000.276: clipboard setup
013.203  000.017: window checked
033.918  020.715: inits 1
034.697  000.779: parsing arguments
034.716  000.019: expanding arguments
077.784  043.068: shell init
079.520  001.736: Termcap init
079.562  000.042: inits 2
080.186  000.624: init highlight
179.889  001.991  001.991: sourcing /Users/davidtuite/.vim/autoload/pathogen.vim
564.261  000.178  000.178: sourcing /Users/davidtuite/.vim/filetype.vim
632.475  000.389  000.389: sourcing /Users/davidtuite/.vim/bundle/jst/ftdetect/jst.vim
633.141  055.478  055.089: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/filetype.vim
660.587  000.236  000.236: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/ftplugin.vim
661.081  000.247  000.247: sourcing /Users/davidtuite/.vim/filetype.vim
661.408  000.041  000.041: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/filetype.vim
673.005  000.208  000.208: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/indent.vim
699.170  000.901  000.901: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/syntax/syncolor.vim
699.550  007.236  006.335: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/syntax/synload.vim
699.669  008.305  001.069: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/syntax/syntax.vim
700.763  000.561  000.561: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/syntax/syncolor.vim
715.774  000.497  000.497: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/syntax/syncolor.vim
716.658  000.452  000.452: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/syntax/syncolor.vim
722.467  010.218  009.269: sourcing /Users/davidtuite/.vim/bundle/solarized/colors/solarized.vim
738.536  612.248  534.785: sourcing $HOME/.vimrc
738.593  046.159: sourcing vimrc file(s)
784.522  000.859  000.859: sourcing /Users/davidtuite/.vim/bundle/ctrlp/autoload/ctrlp/mrufiles.vim
785.378  045.922  045.063: sourcing /Users/davidtuite/.vim/bundle/ctrlp/plugin/ctrlp.vim
816.261  000.454  000.454: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/plugin/getscriptPlugin.vim
818.593  000.792  000.792: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/plugin/gzip.vim
820.050  000.921  000.921: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/plugin/matchparen.vim
830.405  002.463  002.463: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/plugin/netrwPlugin.vim
843.038  000.145  000.145: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/plugin/rrhelper.vim
850.425  000.293  000.293: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/plugin/spellfile.vim
851.617  000.671  000.671: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/plugin/tarPlugin.vim
852.558  000.509  000.509: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/plugin/tohtml.vim
853.470  000.599  000.599: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/plugin/vimballPlugin.vim
854.255  000.463  000.463: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/plugin/zipPlugin.vim
854.362  062.537: loading plugins
854.375  000.013: inits 3
875.931  021.556: reading viminfo
875.995  000.064: setting raw mode
876.010  000.015: start termcap
876.062  000.052: clearing screen
952.223  000.626  000.626: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/ftplugin/html.vim
32980.181  32011.917  32011.917: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/ftplugin/ruby.vim
32980.516  32035.414  022.871: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/ftplugin/eruby.vim
33007.912  000.688  000.688: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/indent/ruby.vim
33024.997  001.804  001.804: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/indent/html.vim
33025.207  025.843  023.351: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/indent/eruby.vim
33067.541  000.929  000.929: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/syntax/javascript.vim
33085.205  004.486  004.486: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/syntax/vb.vim
33088.445  002.575  002.575: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/syntax/css.vim
33089.314  039.262  031.272: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/syntax/html.vim
33106.920  003.463  003.463: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/syntax/ruby.vim
33107.112  064.122  021.397: sourcing /usr/local/Cellar/vim/7.3.266/share/vim/vim73/syntax/eruby.vim
33107.888  107.447: opening buffers
33108.114  000.226: BufEnter autocommands
33108.117  000.003: editing files in windows
33108.319  000.202: VimEnter autocommands
33108.320  000.001: before starting main loop
33127.031  018.711: first screen update
33127.033  000.002: --- VIM STARTED --- 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T00:48:57.167

延迟归因于 ftplugin/ruby.vim 查询 Ruby 加载路径。就在几天前，我通过删除 Ruby Gems 的查询显着提高了速度。我的 Mac 目前报告说它大约需要 125 毫秒，这是一个显着的改进。因此，您可以尝试更新到最新版本。

如果这还不够，您可以通过在 vimrc 中设置 g:ruby_path 来完全禁用加载路径查询。

尝试将此添加到 .vimrc 文件（在您的主文件夹中）：

```
if !empty($MY_RUBY_HOME)
 let g:ruby_path = join(split(glob($MY_RUBY_HOME.'/lib/ruby/*.*')."\n".glob($MY_RUBY_HOME.'/lib/rubysite_ruby/*'),"\n"),',')
endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-19T16:49:38.633

如果您只想将 vim ruby​​ 路径设置为明确的内容，请将其添加到您的任何位置`.vimrc`：

`let g:ruby_path = "/Users/<username>/rbenv/shims/ruby"`

如果您使用的是 rbenv，则只需替换`<username>`为您的实际 Mac 用户名即可。

如果您的 ruby​​ 路径是其他内容，请将引号中的所有内容替换为您的 ruby​​ 可执行文件的完整路径。

# python - 列出回调？

> ID：13259179
> 
> 赞同：8
> 
> 时间：2012-11-06T20:49:53.317
> 
> 标签：python, list, callback

`list`每次修改列表时有什么方法可以调用函数吗？

例如：

```
>>>l = [1, 2, 3]
>>>def callback():
       print "list changed"
>>>apply_callback(l, callback)  # Possible?
>>>l.append(4)
list changed
>>>l[0] = 5
list changed
>>>l.pop(0)
list changed
5 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T21:07:19.593

借用@sr2222 的建议，这是我的尝试。（我将使用没有语法糖的装饰器）：

```
import sys

_pyversion = sys.version_info[0]

def callback_method(func):
    def notify(self,*args,**kwargs):
        for _,callback in self._callbacks:
            callback()
        return func(self,*args,**kwargs)
    return notify

class NotifyList(list):
    extend = callback_method(list.extend)
    append = callback_method(list.append)
    remove = callback_method(list.remove)
    pop = callback_method(list.pop)
    __delitem__ = callback_method(list.__delitem__)
    __setitem__ = callback_method(list.__setitem__)
    __iadd__ = callback_method(list.__iadd__)
    __imul__ = callback_method(list.__imul__)

    #Take care to return a new NotifyList if we slice it.
    if _pyversion < 3:
        __setslice__ = callback_method(list.__setslice__)
        __delslice__ = callback_method(list.__delslice__)
        def __getslice__(self,*args):
            return self.__class__(list.__getslice__(self,*args))

    def __getitem__(self,item):
        if isinstance(item,slice):
            return self.__class__(list.__getitem__(self,item))
        else:
            return list.__getitem__(self,item)

    def __init__(self,*args):
        list.__init__(self,*args)
        self._callbacks = []
        self._callback_cntr = 0

    def register_callback(self,cb):
        self._callbacks.append((self._callback_cntr,cb))
        self._callback_cntr += 1
        return self._callback_cntr - 1

    def unregister_callback(self,cbid):
        for idx,(i,cb) in enumerate(self._callbacks):
            if i == cbid:
                self._callbacks.pop(idx)
                return cb
        else:
            return None

if __name__ == '__main__':
    A = NotifyList(range(10))
    def cb():
        print ("Modify!")

    #register a callback
    cbid = A.register_callback(cb)

    A.append('Foo')
    A += [1,2,3]
    A *= 3
    A[1:2] = [5]
    del A[1:2]

    #Add another callback.  They'll be called in order (oldest first)
    def cb2():
        print ("Modify2")
    A.register_callback(cb2)
    print ("-"*80)
    A[5] = 'baz'
    print ("-"*80)

    #unregister the first callback
    A.unregister_callback(cbid)

    A[5] = 'qux'
    print ("-"*80)

    print (A)
    print (type(A[1:3]))
    print (type(A[1:3:2]))
    print (type(A[5])) 
```

这样做的好处是，如果您意识到自己忘记考虑某个特定方法，只需添加一行代码即可。（例如，我忘记了`__iadd__`，`__imul__`直到现在:)

**编辑**

我已经稍微更新了代码以兼容 py2k 和 py3k。此外，切片会创建一个与父对象类型相同的新对象。请随时继续在这个食谱中戳洞，这样我就可以做得更好。这实际上似乎是一件非常整洁的事情......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T20:53:41.833

您必须继承`list`和修改`__setitem__`.

```
class NotifyingList(list):

    def __init__(self, *args, **kwargs):
        self.on_change_callbacks = []

    def __setitem__(self, index, value):
        for callback in self.on_change_callbacks:
            callback(self, index, value)
        super(NotifyingList, self).__setitem__(name, index)

notifying_list = NotifyingList()

def print_change(list_, index, value):
    print 'Changing index %d to %s' % (index, value)

notifying_list.on_change_callbacks.append(print_change) 
```

正如评论中所指出的，它不仅仅是`__setitem__`.

通过构建一个实现`list`接口并动态添加和删除描述符来代替普通列表机制的对象，您甚至可能会得到更好的服务。然后，您可以将回调调用减少到仅描述符的`__get__`、`__set__`和`__delete__`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T20:52:57.900

我几乎可以肯定这不能用标准列表来完成。

我认为最干净的方法是编写自己的类来执行此操作（也许继承自`list`）。

# ruby - 在任意深度访问嵌套哈希值的最红宝石方式是什么？

> ID：13259181
> 
> 赞同：8
> 
> 时间：2012-11-06T20:50:19.597
> 
> 标签：ruby, hash, hash-of-hashes

给定一个哈希值，例如：

```
AppConfig = {
  'service' => {
    'key' => 'abcdefg',
    'secret' => 'secret_abcdefg'
  },
  'other' => {
    'service' => {
      'key' => 'cred_abcdefg',
      'secret' => 'cred_secret_abcdefg'
    }
  }
} 
```

我需要一个函数在某些情况下返回服务/密钥，在其他情况下返回其他/服务/密钥。一种直接的方法是传入哈希和一个键数组，如下所示：

```
def val_for(hash, array_of_key_names)
  h = hash
  array_of_key_names.each { |k| h = h[k] }
  h
end 
```

所以这个调用会产生“cred_secret_abcdefg”：

```
val_for(AppConfig, %w[other service secret]) 
```

似乎应该有比我在 val_for() 中写的更好的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T21:00:05.473

```
def val_for(hash, keys)
  keys.reduce(hash) { |h, key| h[key] }
end 
```

如果找不到某个中间键，这将引发异常。另请注意，这完全等同于`keys.reduce(hash, :[])`，但这可能会使一些读者感到困惑，我会使用该块。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T00:55:42.647

```
%w[other service secret].inject(AppConfig, &:fetch) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T20:59:11.760

```
appConfig = {
  'service' => {
    'key' => 'abcdefg',
    'secret' => 'secret_abcdefg'
  },
  'other' => {
    'service' => {
      'key' => 'cred_abcdefg',
      'secret' => 'cred_secret_abcdefg'
    }
  }
}

def val_for(hash, array_of_key_names)
  eval "hash#{array_of_key_names.map {|key| "[\"#{key}\"]"}.join}"
end

val_for(appConfig, %w[other service secret]) # => "cred_secret_abcdefg" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-06T03:14:11.953

Ruby 2.3.0 引入了一种新方法，在这两者上都[调用`dig`](http://ruby-doc.org/core/Hash.html#method-i-dig)`Hash`了，`Array`它完全解决了这个问题。

```
AppConfig.dig('other', 'service', 'secret') 
```

`nil`如果密钥在任何级别丢失，它就会返回。

# javascript - HTML5 contenteditable 触发器开/关

> ID：13259183
> 
> 赞同：1
> 
> 时间：2012-11-06T20:50:21.973
> 
> 标签：javascript, html, contenteditable

我正在尝试用 HTML5 制作一个简单、轻便的编辑器，但我不想决定何时启用它，我希望浏览器来决定。

有没有办法判断具有“contenteditable”字段的元素何时被选中和可编辑？

有没有办法告诉用户何时取消选择带有“contenteditable”字段的元素（即当用户在 div 之外单击时）。

我更喜欢构建方式。我知道您可以检查第一个是否使用单击命令，例如

```
jQuery('[contenteditable]').click(function(e) { ... }); 
```

你可以只听所有的点击，如果它不在当前选择的 contenteditable div 上，它可以被认为是取消选择，但这是 hackish，我不喜欢它。

那么，有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:53:13.633

```
$(".editableDiv").on({
     focus: function(e) {/*on entry into div*/},
     blur: function(e) {/*on leaving the div*/}
}); 
```

# r - 在 R 中绘制 GLM 模型

> ID：13259186
> 
> 赞同：2
> 
> 时间：2012-11-06T20:50:34.953
> 
> 标签：r

我正在做一个线性回归模型，所以现在我有

```
mylogit <- glm(Gender ~ Drug*Environment + Ethnicity + Age, data = mydata, family = "binomial") 
```

性别（F/M）、药物（Y/N）、环境（H/L）都是因素，年龄是唯一的数字。

我正在尝试绘制男性比例（y 轴）与年龄（x 轴）的散点图。有四个条件，所以有四种不同的颜色/线条：

1) 药物 Y/Env H 2) 药物 N/Env H 3) 药物 N/Env L 4) 药物 Y/Env L

我试过使用

```
plot(effect("Gender*Drug*Environment*Age", mylogit, xlevels=list(Age=20:60)), + multiline=TRUE, rug=FALSE) 
```

但这只是将它分成两个图表，每个图表中有两条线，并且没有在上面绘制单个数据点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:58:07.707

类似于此未经测试的代码的内容。（如果您需要经过测试的代码，请提供数据。）

```
plot(x=seq(20, 65, by=5), predict( mlogit, 
                    newdata=data.frame(Drug="Y", Environment="H", Ethnicity="White",
                   Age=seq(20, 65, by=5) ), type="response" ) )
lines(x=seq(20, 65, by=5), predict( mlogit, 
                   newdata=data.frame(Drug="N", Environment="L", Ethnicity="White",
                   Age=seq(20, 65, by=5) ), type="response" ) ) 
```

您可以根据需要添加其他组，并注意 predict.glm 将需要 Ethnicity 变量的有效值。

# jquery - 使用现有大型 DOM 进行 DOM 操作

> ID：13259189
> 
> 赞同：-3
> 
> 时间：2012-11-06T20:50:50.373
> 
> 标签：jquery, dom

在我的网页中，我在单击加载更多按钮时调用了一个 webmethod，该 webmethod 从数据库中获取数据并通过加载大量用户控件来创建一个大 HTML，比如说 40-50 个用户控件。然后这个 HTML 在 javascript 中返回，我将这个 html 附加到现有 div 的 innerHTML 中。这个 div 最初有数据，所以当用户单击加载更多按钮时，我会附加更多数据。

现在的问题是，点击几下它就可以正常工作了。但之后随着 DOM 变得越来越大，它变得很慢，所以现在操作成本很高。我查看了 20000 的元素计数。但是当显示大量数据时，我也检查了 facebook 的元素计数。它的计数为 50000。有了这个 50000 计数，facebook 运行良好，没有性能问题。但是我的网站挂着 20000 个元素……不知道问题出在哪里……这真的与元素有关吗？

请帮我。

谢谢

迪帕克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:52:53.000

可能是。然而，更有可能的是代码的（低）效率，或者您如何处理 DOM 操作、迭代等。

# delphi - 如何减小JPG文件的大小？

> ID：13259190
> 
> 赞同：5
> 
> 时间：2012-11-06T20:50:55.850
> 
> 标签：delphi, size, jpeg, reduce

前几天问了这个问题，得到了答案： [如何在图片中添加相框并插入文字？](https://stackoverflow.com/questions/13238076/how-to-add-a-picture-frame-and-insert-the-text-in-the-image)

现在，当我将 TPanel（1x 形状、1x TImage、2x TLabel）中的内容保存为 JPG 文件时，
该 JPG 文件的大小从 20kb（即 TImage 中图片的大小）增加到 620kb。

尺寸几乎相同。原始 JPG 文件 320x320，新 JPG 图片 361x440。

那么，如何减小这个尺寸呢？

这是来自@iPath 的第一个问题的答案，这就是创建新 JPG 文件的方式：

```
procedure TForm1.SavePanelAsImage;
var
 img: TBitmap;
begin
 img := TBitmap.Create;
 try
  img.Width := fpPanel.Width;
  img.Height := fpPanel.Height;
  fpPanel.PaintTo(img.Canvas, 0, 0);
  img.SaveToFile(fpFileName);
 finally
  img.Free;
end;
end; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-06T20:57:04.463

您保存的不是 JPEG 图像。您已保存 Windows 位图。那根本没有压缩。它恰好有`.jpg`扩展名，但这并不会使文件本身成为 JPEG。

您需要使用`TJPEGImage`来保存文件。使用该[`CompressionQuality`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Imaging.jpeg.TJPEGImage.CompressionQuality)属性控制压缩。将图像放入位图中后，将其转换为 JPEG

```
uses
  jpeg;

procedure TForm1.SavePanelAsImage;
var
  img: TBitmap;
  JpegImage: TJPEGImage;
begin
  img := TBitmap.Create;
  try
    img.Width := fpPanel.Width;
    img.Height := fpPanel.Height;
    fpPanel.PaintTo(img.Canvas, 0, 0);
    JpegImage := TJPEGImage.Create;
    try
      JpegImage.CompressionQuality := ...;//you decide the value
      JpegImage.Assign(img);
      JpegImage.SaveToFile(fpFileName);
    finally
      JpegImage.Free;
    end;
  finally
    img.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T20:57:30.370

该文件被保存为位图，而*不是*JPEG。

即使“质量非常好”，JPEG 也不会那么大。

但是，32 位位图（无 RLE）*将为*- 361 * 440 * 4（字节/像素）~ 640k

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-06T21:00:38.467

```
implementation
uses Jpeg;

procedure SaveBMPasJPG(bmp:TBitmap; const FileName:String;Quality:Integer=90);
var
  jpg:TJpegImage;
begin
   jpg:=TJpegImage.Create;
   try
     jpg.CompressionQuality := Quality;
     jpg.Assign(bmp);
     jpg.SaveToFile(FileName);
   finally
     jpg.Free;
   end;

end; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-20T07:39:56.213

尝试使用 Kernel Bulk image resizer 工具一次调整单个或多个图像的大小。

# ios - UISplitView 内的 UIWebView 大小不正确

> ID：13259196
> 
> 赞同：2
> 
> 时间：2012-11-06T20:51:19.217
> 
> 标签：ios, ipad, cocoa-touch

我有一个拆分视图控制器界面，其中主控制器始终可见，即使在纵向上也是如此。详细视图之一是包含 UIWebView 的 UIViewController，它实现了 UIWebViewDelegate。

这个 UIViewController（和嵌套的 web 视图）在 Interface Builder 中设置了 450 x 960 的尺寸。但是，由于某种原因，当视图加载时，会检索尺寸为 768 x 1024 的网页（我已通过对 screen.height 和 screen.width 执行 javascript 警报来验证这一点）。这具有导致加载的网页显示的不愉快的效果，使其大部分“离开舞台”到右侧并使任何响应式设计无用。更奇怪的是，如果在 webViewDidFinishLoad 中同时记录视图和 webview 的框架和边界，它们都表示正确的尺寸为 450 x 960。

这是 ViewDidLoad 的内容

```
self.loginWebView.delegate = self;
[loginWebView setScalesPageToFit:YES];
[loginWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.smashingmagazine.com/"]]]; 
```

几乎就像视图控制器和/或 webview 正在调整大小以占据整个屏幕，而不管主视图控制器总是显示的事实。我在这里想念什么？

# visual-studio-2010 - Visual Studio 2010 - 内存窗口 - 编辑值

> ID：13259204
> 
> 赞同：2
> 
> 时间：2012-11-06T20:51:49.280
> 
> 标签：visual-studio-2010, debugging, assembly

我尝试在 MSDN、Google 和 Stack Overflow 上查找，但找不到我正在寻找的答案。

有没有办法通过内存窗口编辑给定地址的代码？我使用反汇编窗口获取要覆盖的指令的地址，在内存窗口中找到它，但“编辑值”显示为灰色。有什么理由吗？是因为我的代码被缓存而 VS 阻止我编辑它吗？有没有办法通过项目设置来改变它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:16:03.773

应用程序由数据部分和代码的可执行部分组成。Windows默认是禁止修改可执行部分的，但是可以从带有[VirtualProtect](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366898.aspx)功能的代码中修改（还要注意备注和FlushInstructionCache）。

也许您的最终目标不是更改调试器中的某些代码，而是可以以不同方式实现的其他内容。你真正想要的是什么？

# sql-server - STintersects() 查找交点

> ID：13259215
> 
> 赞同：3
> 
> 时间：2012-11-06T20:52:38.933
> 
> 标签：sql-server, sql-server-2008, tsql, geospatial, spatial

我有两个`geometry`用于检查它们是否相交的 sql server -ies。如果他们这样做，我需要交点。

目前我只能得到布尔输出，如果它`intersects = 1`和它不相交，它将给出`=0`. 有什么办法可以找到两个形状的交集`geometry`吗？

* * *

***更新***这个问题导致了我的下一个问题，即如何检查一个点（纬度/经度）是否存在于具有 4000 个点（纬度/经度）的区域中。可以在地理上使用 stcontains 或 sintersects 吗？

[sql - 地理列上的 STContains](https://stackoverflow.com/questions/13484636/stcontains-on-geography-column)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:03:02.203

```
DECLARE @line1 GEOMETRY = geometry::STGeomFromText('LINESTRING(0 0, 1 1)', 0)
DECLARE @line2 GEOMETRY = geometry::STGeomFromText('LINESTRING(1 0, 0 1)', 0)

SELECT  @line1.STIntersection(@line2).ToString() 
```

# python - 来自文件上传的简单 django 代码片段

> ID：13259216
> 
> 赞同：-4
> 
> 时间：2012-11-06T20:52:42.853
> 
> 标签：python, django, file-upload

对不起愚蠢的问题。

```
def upload_file(request):
if request.method == 'POST':
    form = UploadFileForm(request.POST, request.FILES)
    if form.is_valid():
        handle_uploaded_file(request.FILES['file'])
        return HttpResponseRedirect('/success/url/')
else:
    form = UploadFileForm()
return render_to_response('upload.html', {'form': form}) 
```

当我将请求绑定到表单时，在后台真正发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:55:38.833

它会创建一个空表单以传递给模板 upload.html，因为 upload.html 中的前一个表单没有通过验证。当表单出现错误时，会引发 Validation Error 异常，然后表单无效，或者当视图被调用并且请求不包含 POST 方法时，您必须重新渲染它。

# xml - XPath 查询不输出任何结果

> ID：13259221
> 
> 赞同：1
> 
> 时间：2012-11-06T20:52:59.430
> 
> 标签：xml, dom, xpath, language-agnostic

为什么我使用下面的 XML 和 XPath 代码没有得到任何结果？

这实际上是 PowerShell，但我也用[这个在线工具](http://www.utilities-online.info/xpath/)尝试过，但又一次：它什么也没输出！

**我想我完全忽略了一些东西！**

```
[xml] $xml = @"
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup Label="ProjectConfigurations">
    <ProjectConfiguration Include="Debug|AnyCPU">
      <Configuration>Debug</Configuration>
      <Platform>AnyCPU</Platform>
    </ProjectConfiguration>
    <ProjectConfiguration Include="Debug|ARM">
      <Configuration>Debug</Configuration>
      <Platform>ARM</Platform>
    </ProjectConfiguration>
    <ProjectConfiguration Include="Debug|x64">
      <Configuration>Debug</Configuration>
      <Platform>x64</Platform>
    </ProjectConfiguration>
    <ProjectConfiguration Include="Debug|x86">
      <Configuration>Debug</Configuration>
      <Platform>x86</Platform>
    </ProjectConfiguration>
    <ProjectConfiguration Include="Release|AnyCPU">
      <Configuration>Release</Configuration>
      <Platform>AnyCPU</Platform>
    </ProjectConfiguration>
  </ItemGroup>
</Project>
"@;

Select-Xml "//ItemGroup" $xml | % {
    Write-Host $_.Node.GetType();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:56:56.070

这是因为默认命名空间。

试试`//*[local-name()='ItemGroup']`。

或者`/*/*[local-name()='ItemGroup']`

或者`/*/*`

所有这 3 个都应该返回`ItemGroup`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:10:19.583

如果你的命名空间有前缀，你也可以这样做：

```
//prefix:ItemGroup 
```

# php - PHP foreach 数组推送键和值

> ID：13259227
> 
> 赞同：4
> 
> 时间：2012-11-06T20:53:19.360
> 
> 标签：php, foreach

我在这里有这个 foreach

```
<?php foreach($division as $value){
            $arraydivision[] = $value['name'];
        } ?> 
```

但键返回为 0, 1, 2, 3, 4

我希望钥匙也是名字......我试过了

```
<?php foreach($division as $value){
            $arraydivision[] = $value['name'] => $value['name'];
        } ?> 
```

但这没有用，只是给了我一个错误......有人知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T20:55:02.657

假设`$value['name']`是您想要的*名称：*

```
foreach($division as $value){
    $arraydivision[$value['name']] = $value['name'];
}
print_r($arraydivision); 
```

**注意：分配相同的***键*和*值*似乎很奇怪。也许你想分配`$value`？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T20:55:21.953

用于此的 PHP 语法是：

```
$arraydivision[$value['name']] = $value['name']; 
```

看看[PHP 数组的文档](http://php.net/manual/en/language.types.array.php)，部分`Creating/modifying with square bracket syntax`，还有关于如何使用`unset()`和其他细节的示例。

您还可以找到有趣[的文档`foreach`](http://php.net/manual/en/control-structures.foreach.php)（尤其是`array_expression as $key => $value`语法部分）。

# rotation - 在 D3 中我的标签之前显示的订单

> ID：13259235
> 
> 赞同：1
> 
> 时间：2012-11-06T20:53:58.257
> 
> 标签：rotation, d3.js, axis-labels

我是编程新手，也是 D3 新手，我正在使用“D3 入门”一书以及我可以在互联网上找到的所有示例来学习它。

要开始练习，我正在尝试创建一个柱形图，但我的 x-label 遇到了两个问题：

*   我的 x 轴下方显示的标签与列不一致。准确地说，我在标签开始显示之前显示了数字。
*   我想知道如何旋转标签。当我尝试旋转属性时，所有 x 轴都在旋转，我只想旋转标签。我发现了一些与此相关的问题，但还没有完全理解答案。

我的数据是这样格式化的：

```
{"Low_Income_Household_Internet_access":
 [{"Country":"Chile","Value":9.69},
 {"Country":"New Zealand","Value":47.8},
 {"Country":"Greece","Value":25.39},
 {"Country":"Italy","Value":33.26},
 {"Country":"Israel","Value":40.31},
 {"Country":"Portugal","Value":22.72},
 {"Country":"United Kingdom","Value":56},...
 ],
 "High_Income_Household_Internet_access":
 [{"Country":"Chile","Value":59.78701735},
 {"Country":"New Zealand","Value":78.3},
 {"Country":"Greece","Value":81.14},
 {"Country":"Italy","Value":84.44},
 {"Country":"Israel","Value":86.59},
 {"Country":"Portugal","Value":89.73},
 {"Country":"United Kingdom","Value":90},...
]} 
```

我的代码如下：

```
function draw(data) {
"use strict";
var w = 600;
var h = 300;
var barPadding = 3;
    var margin=20;

var format = d3.format(",.0f");
var  x = d3.scale.ordinal().rangeBands([0, w-margin], .1),
y = d3.scale.linear().range([h-margin, margin]);
var  xAxis = d3.svg.axis().scale(x).orient("top").tickSize(0),
 yAxis = d3.svg.axis().scale(y).orient("left").tickSize(-w);
var svg = d3.select("body").append("svg")
.attr("width", w)
    .attr("height", h)
.append("g")
    .attr("transform", "translate(" + margin + ",0)");

// Set the scale domain.
x.domain(d3.range(data.Low_Income_Household_Internet_access.length));
y.domain([0, d3.max(data.Low_Income_Household_Internet_access,function(d) { return d.Value; }) ]);
var bar = svg.selectAll("g.bar")
    .data(data.Low_Income_Household_Internet_access)
    .enter().append("g")
    .attr("class", "bar")
    .attr("transform", function(d) { return "translate(" + x(d.Country)+ "," + y(d.Value) + " ) "; });
bar.append("rect")
.attr("width", x.rangeBand())
.attr("height", function(d) { return h-margin- y(d.Value); })
.on("mouseover",function(d) {
    d3.select(this)
    .style("fill","red")
})
.on("mouseout",function(d) {
        d3.select(this)
        .style("fill","grey")
})
  .append("svg:title")
  .text(function(d) { return "" + d.Country + ": " + d.Value + " %"; });
svg.append("g")
.attr("class", "x axis")
.attr("transform", "translate(0, 295)")
.call(xAxis);
svg.append("g")
  .attr("class", "y axis")
  .call(yAxis);} 
```

# c# - 无需人工交互的Web Service后台进程

> ID：13259236
> 
> 赞同：1
> 
> 时间：2012-11-06T20:54:00.020
> 
> 标签：c#, web-services

我希望我的 Web 服务每 X 小时调用一次清理例程，没有任何用户的输入，也没有调用“启动清理服务”。我知道我可以调用一个方法来启动这个服务，但我根本不想要用户交互。我想发布此服务，它会自动启动，并每隔 X 小时运行一次我的清理过程。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:57:39.890

您可以在文件中设置一个每隔 X 小时触发一次的计时器`Global.asax.cs`，或者您也可以创建一个每隔 X 小时触发一次的计划任务来触发清理服务。

如果项目中没有全局文件，您可以通过向项目中添加一个来简单地添加一个。为此，右键单击项目 -> 添加 -> 新项目，然后在弹出的对话框中选择全局应用程序类并点击添加。然后在`Application_Start`事件中，您可以初始化计时器以执行操作。

```
public class Global : System.Web.HttpApplication
{
    private static System.Threading.Timer timer;

    protected void Application_Start(object sender, EventArgs e)
    {
        var howLongTillTimerFirstGoesInMilliseconds = 1000;
        var intervalBetweenTimerEventsInMilliseconds = 2000;
        Global.timer = new Timer(
            (s) => SomeFunc(),
            null, // if you need to provide state to the function specify it here
            howLongTillTimerFirstGoesInMilliseconds,
            intervalBetweenTimerEventsInMilliseconds
        );
    }

    private void SomeFunc()
    {
        // reoccurring task code
    }

    protected void Application_End(object sender, EventArgs e)
    {
        if(Global.timer != null)
            Global.timer.Dispose();
    }
} 
```

有关全局文件的更多信息，您可能需要参考[MSDN](http://msdn.microsoft.com/en-us/library/2027ewzw%28v=vs.100%29.aspx)

# objective-c - 从 NSXMLDocument 中过滤掉 BOM 字符

> ID：13259243
> 
> 赞同：0
> 
> 时间：2012-11-06T20:54:23.327
> 
> 标签：objective-c, xml, nsxmldocument, nsxmlelement

XML 文件中某些元素的 stringValue 中包含 BOM 字符。xml 文件被标记为 UTF-8 编码。

其中一些字符位于字符串的开头（因为它应该来自我所读到的内容），但有些字符位于字符串的中间（可能来自编写 xml 文件的人的格式错误的字符串？）。

我打开文件：

```
NSURL *furl = [NSURL fileURLWithPath:fileName];
if (!furl) {
    NSLog(@"Error: Can't open NML file '%@'.", fileName);

    return kNxADbReaderTTError;
}

NSError *err=nil;

NSXMLDocument *xmlDoc = [[NSXMLDocument alloc] initWithContentsOfURL:furl options:NSXMLNodeOptionsNone error:&err]; 
```

我以这种方式查询元素：

```
NSXMLElement *anElement;
NSString *name;
...
NSString *valueString = [[anElement attributeForName:name] stringValue]; 
```

我的问题是：

我打开文件错了吗？文件格式不正确？我查询元素的字符串值是否错误？如何过滤掉这些字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T19:12:45.730

在修复另一个问题时，我发现了一种从 NSXMLDocument 源中过滤掉不需要的字符的相对干净的方法。将其粘贴在这里以防万一有人遇到类似问题：

```
@implementation NSXMLDocument (FilterIllegalCharacters)

    - (NSXMLDocument *)initWithDataAndIgnoreIllegalCharacters:(NSData *)data illegalChars:(NSCharacterSet *)illegalChars error:(NSError **)error{
    // -- Then, read the resulting XML string.
    NSMutableString *str = [[NSMutableString alloc] initWithData:data encoding:NSUTF8StringEncoding];

    // -- Go through the XML, only caring about attribute value strings
    NSMutableArray *charactersToRemove = [NSMutableArray array];
    NSUInteger openQuotes = NSNotFound;
    for (NSUInteger pos = 0; pos < str.length; ++pos) {
        NSUInteger currentChar = [str characterAtIndex:pos];

        if (currentChar == '\"') {
            if (openQuotes == NSNotFound) {
                openQuotes = pos;
            }
            else {

                openQuotes = NSNotFound;
            }
        }
        else if (openQuotes != NSNotFound) {
            // -- If we find an illegal character, we make a note of its position.
            if ([illegalChars characterIsMember:currentChar]) {
                [charactersToRemove addObject:[NSNumber numberWithLong:pos]];
            }
        }
    }

    if (charactersToRemove.count) {
        NSUInteger index = charactersToRemove.count;

        // -- If we have characters to fix, we work thru them backwards, in order to not mess up our saved positions by modifying the XML.
        do {
            --index;

            NSNumber *characterPos = charactersToRemove[index];
            [str replaceCharactersInRange:NSMakeRange(characterPos.longValue, 1) withString:@""];
        }
        while (index > 0);

        // -- Finally we update the data with our corrected version
        data = [str dataUsingEncoding:NSUTF8StringEncoding];
    }

    return [[NSXMLDocument alloc] initWithData:data options:NSXMLNodeOptionsNone 

    error:error];
}

@end 
```

你可以传递任何你想要的字符集。请注意，这会将读取 XML 文档的选项设置为无。您可能希望出于自己的目的更改此设置。

这只会过滤属性字符串的内容，这是我的格式错误的字符串的来源。

# java - 如何声明一个具有以 String 和 Map 作为参数的构造函数的 bean？

> ID：13259248
> 
> 赞同：1
> 
> 时间：2012-11-06T20:54:43.233
> 
> 标签：java, spring, javabeans

我正在使用 ThreadPoolExecutor 实用程序并通过被调用类中的构造函数传递值。构造函数有两个参数 (1) 一个映射 (2) 一个字符串。

我对如何为带有两个参数（一个映射和一个字符串）的被调用类声明一个 bean 感到困惑。我的代码如下。

```
***Calling Class***

    public class Starter {

        ProcessScheduler deleteBatch;
        public ProcessScheduler getDeleteBatch() {
            return deleteBatch;
            }

        public void setDeleteBatch(ProcessScheduler deleteBatch) {
            this.deleteBatch = deleteBatch;
            }

        public void start() {

        ThreadPoolExecutor executor = testThreadPoolExecutorService.createNewThreadPool();

            for (int i=0;i<=5;i++)
            {
            Map m4 = arrayRecords.get(i);
            executor.execute(new ProcessScheduler("Thread #"+i,m4));                     // Comment - started 
The above line executes fine but it gives null pointer error if I will call any other method from the run() inside  called class(ProcessScheduler). So I have use a Bean such as executor.execute(getDeleteBatch("Thread #"+i,m4)) to get the instance of the bean. But I dont know how to do this in this case?

// Comment - ended

            }

***Called Class***

public class ProcessScheduler implements Runnable {

         public ProcessScheduler(String taskName, Map m) {
            this.taskName = taskName;
            this.deleteRecordsMap = (HashMap) m;
            }
        Processor processor;
        public Processor getProcessor() 
        {
            return processor;
        }

        public void setProcessor(Processor mappProcessor) {
            this.mappProcessor = mappProcessor;
        }

        public void run() 
        {
        // This returns null 
        processor.getNumbers();
        }

        }

I have some confusions as below.
(1) How to declare a bean for ProcessScheduler in this case. 
(2) Is the declaration of getDeleteBatch is correct in this case like below?

public ProcessScheduler getDeleteBatch() {
            return deleteBatch;
            } 
```

谢谢 Gendaful

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:00:06.073

你真的认为这是个好主意吗？

```
public ProcessScheduler(String taskName, Map m) {
    this.taskName = taskName;
    this.RecordsMap = (HashMap) m;
} 
```

我认为应该更像这样：

```
public ProcessScheduler(String taskName, Map m) {
    this.taskName = taskName;
    this.recordsMap = new HashMap(m);  // You don't want changes to the Map passed in to show up in your private data member.
} 
```

我不确定您是否可以将 Spring 中的 ProcessScheduler 实例作为 Bean 注入；这可能是您真的想为每个执行程序服务创建一个新的情况。

Spring 不需要控制应用程序中的每个 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:03:32.303

[http://jonathanhui.com/spring-framework-xml-configuration](http://jonathanhui.com/spring-framework-xml-configuration)总结了配置 spring bean 的各种方法以及用于实例化和嵌入集合的支持标签。

像下面这样的东西应该适合你。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

  <bean id="processscheduler"
        class="ProcessScheduler">
     <constructor-arg  index="0" value="task1"/>
     <constructor-arg  index="1">
         <map>
              <entry key="key1" value="v1"/>
              <entry key ="key2" value-ref="someBean"/>
          </map>
     </constructor-arg>
  </bean>
</beans> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:41:52.863

我已经解决了这个问题，如下所示，

从我的调用类中，我在执行方法中传递了处理器类的实例。

```
executor.execute
(newProcessScheduler("Thread#"+Thread.currentThread().getName(),hm,processor)) 
```

所以，它的作用是，因为我在 execute() 中将处理器作为参数传递，所以如果我在 ProcessScheduler 类的 run() 中调用处理器的方法，它不会抛出 nullpointerexception。

# android - GLES20 纹理不适用于某些设备

> ID：13259263
> 
> 赞同：2
> 
> 时间：2012-11-06T20:55:39.987
> 
> 标签：android, opengl-es, texture-mapping, texture2d, nexus-s

[我试图在Android 的示例 OpenGL 2.0 项目](http://developer.android.com/training/graphics/opengl/index.html)之上添加一个相当简单的扩展，以便为基本形状添加纹理。这**看起来**很简单，但在某些设备（Samsung Nexus S、LG Optimus 3D、Samsung Galaxy S）上，纹理不会渲染。

*这实际上是我在一个更大的项目中遇到的问题，但我能够通过下面的简单项目重现该问题，希望这里的人知道我的代码在哪里出现问题，或者如何专门构建 GL这些设备的纹理（设备可能存在问题）。*

了解如何使用此对象： 在 GLSurfaceView.Renderer 的`onSurfaceCreated`方法中，我正在实例化一个`Square()`对象，而在该`onDrawFrame`方法中，我正在调用 Square 的`draw()`方法。但是，处理纹理的所有相关代码都应该出现在这个 Square 类中，这几乎与 Google 自己的示例完全相同。

非常感谢任何对此有所了解的人。

```
class Square {

private final String vertexShaderCode =
    // This matrix member variable provides a hook to manipulate
    // the coordinates of the objects that use this vertex shader
    "uniform mat4 uMVPMatrix;" +

    "attribute vec4 vPosition;" +
    "attribute vec2 a_TexCoordinate;" +

    "varying vec2 v_TexCoordinate;" +

    "void main() {" +
    // the matrix must be included as a modifier of gl_Position
    "  gl_Position = vPosition * uMVPMatrix;" +
    "  v_TexCoordinate = a_TexCoordinate;" +
    "}";

private final String fragmentShaderCode =
    "precision mediump float;" +

    "uniform sampler2D u_Texture;" +

    "varying vec2 v_TexCoordinate;" +

    "void main() {" +
    "  gl_FragColor = texture2D(u_Texture, v_TexCoordinate);" +
    "}";

private final FloatBuffer vertexBuffer;
private final FloatBuffer textureBuffer;
private final ShortBuffer drawListBuffer;
private final int mProgram;
private int mPositionHandle;
private int mColorHandle;
private int mMVPMatrixHandle;

// number of coordinates per vertex in this array
static final int COORDS_PER_VERTEX = 3;
static float squareCoords[] = { -0.5f,  0.5f, 0.0f,   // top left
                                -0.5f, -0.5f, 0.0f,   // bottom left
                                 0.5f, -0.5f, 0.0f,   // bottom right
                                 0.5f,  0.5f, 0.0f }; // top right

final float[] previewTextureCoordinateData =
    {
        0.0f, 1.0f,
        0.0f, 0.0f, 
        1.0f, 1.0f,
        1.0f, 0.0f
    };

private int textureDataHandle;
private int textureUniformHandle;
private int textureCoordinateHandle;

private final short drawOrder[] = { 0, 1, 2, 0, 2, 3 }; // order to draw vertices

private final int vertexStride = COORDS_PER_VERTEX * 4; // 4 bytes per vertex

// Set color with red, green, blue and alpha (opacity) values
float color[] = { 0.2f, 0.709803922f, 0.898039216f, 1.0f };

private int loadTexture(final Context context, final int resourceId)
{
    final int[] textureHandle = new int[1];

    GLES20.glGenTextures(1, textureHandle, 0);

    if (textureHandle[0] != 0)
    {
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inScaled = false;   // No pre-scaling

        // Read in the resource
        final Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), resourceId, options);

        // Bind to the texture in OpenGL
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureHandle[0]);

        // Set filtering
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST);

        // Load the bitmap into the bound texture.
        GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

        // Recycle the bitmap, since its data has been loaded into OpenGL.
        bitmap.recycle();
    }

    if (textureHandle[0] == 0)
    {
        throw new RuntimeException("Error loading texture.");
    }

    return textureHandle[0];
}

public Square(Context context) {
    // initialize vertex byte buffer for shape coordinates
    ByteBuffer bb = ByteBuffer.allocateDirect(
    // (# of coordinate values * 4 bytes per float)
            squareCoords.length * 4);
    bb.order(ByteOrder.nativeOrder());
    vertexBuffer = bb.asFloatBuffer();
    vertexBuffer.put(squareCoords);
    vertexBuffer.position(0);

    // initialize byte buffer for the draw list
    ByteBuffer dlb = ByteBuffer.allocateDirect(
    // (# of coordinate values * 2 bytes per short)
            drawOrder.length * 2);
    dlb.order(ByteOrder.nativeOrder());
    drawListBuffer = dlb.asShortBuffer();
    drawListBuffer.put(drawOrder);
    drawListBuffer.position(0);

    ByteBuffer texCoordinates = ByteBuffer.allocateDirect(previewTextureCoordinateData.length * 4);
    texCoordinates.order(ByteOrder.nativeOrder());
    textureBuffer = texCoordinates.asFloatBuffer();
    textureBuffer.put(previewTextureCoordinateData);
    textureBuffer.position(0);

    // prepare shaders and OpenGL program
    int vertexShader = MyGLRenderer.loadShader(GLES20.GL_VERTEX_SHADER,
                                               vertexShaderCode);
    int fragmentShader = MyGLRenderer.loadShader(GLES20.GL_FRAGMENT_SHADER,
                                                 fragmentShaderCode);

    textureDataHandle = loadTexture(context, R.drawable.color_texture);

    mProgram = GLES20.glCreateProgram();             // create empty OpenGL Program
    GLES20.glAttachShader(mProgram, vertexShader);   // add the vertex shader to program
    GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment shader to program
    GLES20.glLinkProgram(mProgram);                  // create OpenGL program executables
}

public void draw(float[] mvpMatrix) {
    // Add program to OpenGL environment
    GLES20.glUseProgram(mProgram);

    // get handle to vertex shader's vPosition member
    mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");

    // Enable a handle to the triangle vertices
    GLES20.glEnableVertexAttribArray(mPositionHandle);

    // Prepare the triangle coordinate data
    GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX,
                                 GLES20.GL_FLOAT, false,
                                 vertexStride, vertexBuffer);

    textureCoordinateHandle = GLES20.glGetAttribLocation(mProgram, "a_TexCoordinate");
    GLES20.glVertexAttribPointer(textureCoordinateHandle, 2, GLES20.GL_FLOAT, false, 
            0, textureBuffer);
    GLES20.glEnableVertexAttribArray(textureCoordinateHandle);

    textureUniformHandle = GLES20.glGetUniformLocation(mProgram, "u_Texture");
    MyGLRenderer.checkGlError("glGetUniformLocation");
    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureDataHandle);
    GLES20.glUniform1i(textureUniformHandle, 0);      

    // get handle to shape's transformation matrix
    mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");
    MyGLRenderer.checkGlError("glGetUniformLocation");

    // Apply the projection and view transformation
    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);
    MyGLRenderer.checkGlError("glUniformMatrix4fv");

    // Draw the square
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, drawOrder.length,
                          GLES20.GL_UNSIGNED_SHORT, drawListBuffer);

    // Disable vertex array
    GLES20.glDisableVertexAttribArray(mPositionHandle);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T21:12:58.317

我猜这是一个二次幂问题。

默认情况下，`GL_TEXTURE_WRAP`设置`glTexParameter`为`GL_REPEAT`，并且使用的纹理`GL_REPEAT` **必须**是二次方大小：

> 类似地，如果纹理图像的宽度或高度不是 2 的幂，并且 GL_TEXTURE_MIN_FILTER 设置为需要 mipmap 的函数之一， **或者 GL_TEXTURE_WRAP_S 或 GL_TEXTURE_WRAP_T 未设置为 GL_CLAMP_TO_EDGE**，则纹理图像单元将返回 (R , G, B, A) = (0, 0, 0, 1)。

您可以从二次幂纹理开始，但是当您使用 a`BitmapFactory.decodeResource`生成位图时，它会很有帮助（？）根据设备的密度对其进行缩放。因此，例如，如果您从`drawable`HDPI 设备上的文件夹中加载 512*512 源纹理，我相信它会将其缩放 1.5 倍，因此您得到的不是 Po2。

这会导致您的纹理无法在大量设备上工作，因为这些设备的密度都会导致您生成非法纹理大小。

在这种情况下，解决方案是将您的（2 的幂）源纹理放入资源文件夹`drawable-nodpi`中，这将防止任何基于密度的缩放。要么使用 CLAMP_TO_EDGE，要么使用不关心 Po2 的 CLAMP_TO_EDGE。

# javascript - 如何在 Google Closure 中迭代枚举值？

> ID：13259267
> 
> 赞同：4
> 
> 时间：2012-11-06T20:55:48.077
> 
> 标签：javascript, enums, iteration, google-closure, google-closure-library

我正在尝试找到迭代 Google Closure 中定义的枚举上的所有值的最佳方法。假设我定义了以下枚举：

```
/**
 * @enum {number}
 */
sample.namespace.Fruit = {
  Orange: 0,
  Apple: 1,
  Banana: 2
}; 
```

现在，我见过的最好的方法是这样的：

```
for (var key in sample.namespace.Fruit) {
    var fruit = /** @type {sample.namespace.Fruit} */ (sample.namespace.Fruit[key]);
    // Make a smoothie or something.
} 
```

我觉得读起来很痛苦。我列出了三次命名空间，只是为了让编译器顺其自然。我应该使用另一种迭代技术吗？这是完成这种形式的迭代的最佳方式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T21:04:04.263

您可以使用`goog.object.forEach`来避免命名空间重复。

```
goog.object.forEach(sample.namespace.Fruit,
                    function(value, key, allValues) {
                      // Make some delicious fruit jellies or something.
                    }); 
```

附带说明一下，在大多数情况下，您希望避免对 @enums 使用字符串键，以便编译器可以重命名它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:03:44.783

您可以使用**for 循环**来迭代您的对象..

```
var obj = sample.namespace.Fruit;

for(var key in obj) {
    console.log("Fruit :: " + key + " -- " + obj[key])
} 
```

​<strong>[检查小提琴](http://jsfiddle.net/sushanth009/tVnsz/)

# ios - 报亭 ATOM Feed 疑难解答

> ID：13259268
> 
> 赞同：1
> 
> 时间：2012-11-06T20:55:56.243
> 
> 标签：ios, iphone, app-store-connect, atom-feed, newsstand-kit

我目前正在开发与 iOS 报亭功能兼容的杂志应用程序。我已经设置好所有东西，唯一剩下的就是 ATOM 提要，它应该会自动更新 App Store 上的当前问题。

但这就是问题所在。我已将 iTunes Connect 链接到提要，但没有任何反应。表单经过初始验证（因此架构似乎已验证）。但是，保存提要信息后，我看不到任何进展（我是第一次这样做，但我想即使在“准备上传”状态下，我也会看到一些问题弹出）。

我知道 Apple 每天都会检索提要，测试假设的时间间隔相当慢。但它现在在那里几天了，我不知道出了什么问题。

这是我的提要的 URL： http: [//easymagazine.cz/api/1/atomfeed/issues](http://easymagazine.cz/api/1/atomfeed/issues)

随意检查提要并指出与 Apple 规范的任何偏差，可在此处找到：[https](https://itunesconnect.apple.com/docs/NewsstandAtomFeedSpecification.pdf) ://itunesconnect.apple.com/docs/NewsstandAtomFeedSpecification.pdf 。

提前致谢。下午

# jquery - Ajax 不发送变量

> ID：13259271
> 
> 赞同：1
> 
> 时间：2012-11-06T20:56:23.700
> 
> 标签：jquery, ajax, variables, send

我在使用 Ajax 时遇到了麻烦。它不会将变量“xxx”发送到文件 id.php。代码：

```
var xxx;
$.ajax({
    url: "id.php",
    success: function(result1) {
        xxx = result1;
    }
});

$.ajax({
    url: "check.php", 
    data: "ids="+xxx,
    type: "post",
    success: function (result) {
        .........
        .........
    }
}); 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T21:00:16.260

它不起作用，因为您的第二个请求在第一个请求完成之前被调用。

您应该将第二个 ajax 请求包装在第一个调用的成功属性中。

```
success: function(result1){

    $.ajax({
        url: "check.php", 
        data: "ids="+result1,
        type: "post",
        success: function (result) {
            .........
            .........
        }    
    });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:58:27.503

数据格式不正确。使用 JSON 格式：

```
data: {"ids" : xxx}, 
```

# mysql - Mysql tmp_table_size max_heap_table_size

> ID：13259275
> 
> 赞同：56
> 
> 时间：2012-11-06T20:56:52.670
> 
> 标签：mysql

两天前在我的服务器上我的`tmp_table_size`= `max_heap_table_size(16M)`。

我做了一个每小时运行一次的 cron 作业，并从 : `created_tmp_disk_tables`, `created_tmp_files`,开始生成报告`created_tmp_tables`

在我的报告中：`created_tmp_disk_tables`+ `created_tmp_files`+ `created_tmp_tables`=我的临时数据的 100%

接着就，随即 ：

1.  与`tmp_table_size`= `max_heap_table_size`=`16M`报告向我展示了下一个平均报告：
    *   27.37% (created_tmp_disk_tables)
    *   1.16% (created_tmp_files)
    *   71.48% (created_tmp_tables)

如何优化这些结果？

2.  与`tmp_table_size`= `max_heap_table_size`=`20M`在第一个小时：

    *   23.48% (created_tmp_disk_tables)
    *   32.44% (created_tmp_files)
    *   44.07% (created_tmp_tables)

7 小时后（从重启开始）：

*   21.70% (created_tmp_disk_tables)
*   33.75% (created_tmp_files)
*   44.55% (created_tmp_tables)

这不是我所期望的。

*   磁盘表从 减少`27.37%`到`21.70%`-> 预期更多
*   临时文件上升`1.16%`到`33.75%` -> 为什么？
*   内存表从减少`71.48%`到`44.55%`-> 奇怪；预计会上涨

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2013-02-01T18:06:29.693

每当您增加[**tmp_table_size**](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_tmp_table_size)和[**max_heap_table_size**](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_max_heap_table_size)时，请记住设置这些不会使查询表现更好。它实际上使低效查询表现得比以前更糟。在什么情况下？

当查询在`ORDER BY`没有索引的情况下执行连接或排序（通过）时，必须在内存中形成临时表。这将增加[**Created_tmp_tables**](http://dev.mysql.com/doc/refman/5.5/en/server-status-variables.html#statvar_Created_tmp_tables)。

如果临时表增长到[**tmp_table_size**](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_tmp_table_size)中的字节数并且需要更多空间怎么办？发生以下事件序列：

1.  查询处理必须停止
2.  在磁盘上创建临时表
3.  将基于内存的临时表的内容传输到基于磁盘的临时表中
4.  放入基于内存的临时表
5.  查询处理继续使用基于磁盘的临时表

此过程递增[**Created_tmp_disk_tables**](http://dev.mysql.com/doc/refman/5.5/en/server-status-variables.html#statvar_Created_tmp_disk_tables)

了解了这些机制，让我们来探索每个实例中发生了什么

> 磁盘表从 27.37% 下降到 21.70% -> 预期更多

如果之前运行的查询将缓存结果保留在 RAM 中，则很容易发生这种情况。这将消除从一开始就处理查询的需要，而不是重新创建相同的大型临时表。

> 临时文件从 1.16% 上升到 33.75% -> 为什么？

这并不奇怪。这只是表明存在需要临时表的查询。它们首先在 RAM 中创建。这只是表示存在连接不好的查询（可能[**join_buffer_size**](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_join_buffer_size)太小）或`ORDER BY`临时表的非索引列或列（可能[**sort_buffer_size**](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_sort_buffer_size)太小）。

> 内存表从 71.48% 降低到 44.55% -> 奇怪；预计会上涨

这也不足为奇。如果对具有相同值的相同查询有足够多的调用，则排序和连接可能会被先前缓存结果中的查询的执行抢占。

# 推荐

鉴于这些事情，这里是可以调整的：

*   [加入缓冲区大小](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_join_buffer_size)
*   [排序缓冲区大小](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_sort_buffer_size)
*   创建将要使用的索引
    *   通过 eq_ref 连接
    *   通过索引扫描按顺序排序

总体目标应该是尽可能地防止创建临时表。简单地增加[**tmp_table_size**](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_tmp_table_size)和[**max_heap_table_size**](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_max_heap_table_size)会让效率低下的查询和缺乏正确索引的表异常运行。

# google-earth-plugin - 如何将数据从 Google 地球气球内部传递到托管应用程序？

> ID：13259279
> 
> 赞同：0
> 
> 时间：2012-11-06T20:57:10.720
> 
> 标签：google-earth-plugin

我有一个桌面应用程序，其中包括一个 Google 地球网络浏览器插件和许多其他“页面”和控件。我的目标是让用户将鼠标悬停在地标上，弹出一个带有按钮的气球，按下该按钮我想将数据传回应用程序，这样我就可以将“页面”从 GE 浏览器中更改出来。我已经弹出了气球并且按钮就位，但我不知道如何告诉应用程序按钮已被按下。

有任何想法吗？

```
 dynamic placemark = KmlHelpers.CreatePlacemark(
                                        ge1,
                                        Coord,
                                        d.sSerialNumber,    // ID (ESN)
                                        d.sNickname,     // Name - shown in tree
                                        "Device Type: " + d.sName + "\n" +
                                        "IP Address: " + d.sIPAddress + "\n" +
                                        "ESN: " + d.sSerialNumber + "\n" +
                                        "<button type=\"button\">Click</button>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:31:00.170

如果您想将 Javascript 代码放入气球中，可以按照以下示例进行操作： [http ://code.google.com/apis/ajax/playground/?exp=earth#javascript_in_balloons](http://code.google.com/apis/ajax/playground/?exp=earth#javascript_in_balloons)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T00:07:44.317

我无法完全按照我想要的方式进行操作，但这是我能够将数据从气球传递到应用程序的方式。

我创建了一个带有 html 链接的气球，如上所示，但我没有将按钮行替换为以下行：

```
"<a href=\"http://localhost/index.html#\"" + SerialNum + "\">Details</a>"); 
```

我为浏览器的“导航”事件创建了一个 EventListener。

在 EventListener 函数中，我使用以下命令阻止浏览器访问 URL：

```
e.Cancel = true; 
```

其中 e 是进入函数的参数列表。

该链接在调用导航事件之前经过验证，因此它必须是一个“好”的 URL。

它肯定不优雅，但它有效。也许有一天我会想出我们如何做得更好。直到那时...

# python - 在python中读取文件后返回单词列表

> ID：13259288
> 
> 赞同：7
> 
> 时间：2012-11-06T20:57:52.900
> 
> 标签：python, string, list

我有一个名为`test.txt`. 我想阅读它并从文件中返回所有单词的列表（删除了换行符）。

这是我当前的代码：

```
def read_words(test.txt):
    open_file = open(words_file, 'r')
    words_list =[]
    contents = open_file.readlines()
    for i in range(len(contents)):
         words_list.append(contents[i].strip('\n'))
    return words_list    
    open_file.close() 
```

运行此代码会生成此列表：

```
['hello there how is everything ', 'thank you all', 'again', 'thanks a lot'] 
```

我希望列表看起来像这样：

```
['hello','there','how','is','everything','thank','you','all','again','thanks','a','lot'] 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-06T21:21:12.543

根据文件的大小，这似乎很简单：

```
with open(file) as f:
    words = f.read().split() 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-06T21:00:26.557

`words_list.append(...)`将for 循环中的行替换为以下内容：

```
words_list.extend(contents[i].split()) 
```

这将在空白字符上分割每一行，然后将结果列表的每个元素添加到`words_list`.

或者作为将整个函数重写为列表理解的替代方法：

```
def read_words(words_file):
    return [word for line in open(words_file, 'r') for word in line.split()] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-06T21:06:47.757

这是我的写法：

```
def read_words(words_file):
  with open(words_file, 'r') as f:
    ret = []
    for line in f:
      ret += line.split()
    return ret

print read_words('test.txt') 
```

使用 可以稍微缩短该函数`itertools`，但我个人发现结果可读性较差：

```
import itertools

def read_words(words_file):
  with open(words_file, 'r') as f:
    return list(itertools.chain.from_iterable(line.split() for line in f))

print read_words('test.txt') 
```

第二个版本的好处是它可以完全基于生成器，从而避免一次将所有文件的单词保存在内存中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-06T21:34:08.350

有几种方法可以做到这一点。这里有几个：

**如果您不关心重复的单词**：

```
def getWords(filepath):
    with open('filepath') as f:
        return list(itertools.chain(line.split() for line in f)) 
```

**如果要返回每个单词仅出现一次的单词列表**：

注意：这不会保留单词的顺序

```
def getWords(filepath):
    with open('filepath') as f:
        return {word for word in line.split() for line in f} # python2.7
        return set((word for word in line.split() for line in f)) # python 2.6 
```

**如果你想要一个集合——并且——想要保留单词的顺序**：

```
def getWords(filepath):
    with open('filepath') as f:
        words = []
        pos = {}
        position = itertools.count()
        for line in f:
            for word in line.split():
                if word not in pos:
                    pos[word] = position.next()
                        words.append(word)
    return sorted(words, key=pos.__getitem__) 
```

**如果你想要一个词频词典**：

```
def getWords(filepath):
    with open('filepath') as f:
        return collections.Counter(itertools.chain(line.split() for line in file)) 
```

希望这些帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-28T23:25:07.433

实际问题已经得到解答，但我想指出，f.close() 行将不会被执行，因为函数在该行之前返回。尝试在 return 语句之前编写 f.close() 。

# delphi - 使用 MSAccess 数据库的 Delphi 7 应用程序阻止 MSaccess 访问

> ID：13259290
> 
> 赞同：2
> 
> 时间：2012-11-06T20:57:59.493
> 
> 标签：delphi, ms-access, delphi-7, ado

我有一个旧的 Delphi 7 应用程序，我修复了一些。它使用 Access 数据库。大约有 150 个用户都远程打开应用程序并并行访问数据库。在我开始修复之前（呵呵），这很好用（除了 Delphi 应用程序中的错误），即使数据库偶尔有点慢。

现在我添加了一些功能和两个新表，我突然遇到了非常奇怪的问题。

1.  MSAccess 可以访问数据库（2010 版）。这意味着： 双击文件将打开 MSAccess 并打开数据库文件。
2.  Delphi 7 应用程序可以访问数据库。
3.  Delphi 应用程序的两个或多个实例可以共享数据库，前提是我将原始 ConnectionString 模式从“ReadWrite”更改为“Share Deny None”（下面的整个连接字符串）。
4.  一旦 Delphi 应用程序的一个实例运行，数据库文件**就不**能再通过双击打开了。（当我这样做时没有任何反应）。但是，我可以打开 MSAccess 并从其中打开数据库文件。那可行。

连接字符串：

```
Provider=Microsoft.Jet.OLEDB.4.0;
User ID=Admin;Data Source=DBPath;
Mode=Share Deny None;
Extended Properties="";
Persist Security Info=False;
Jet OLEDB:System database="";
Jet OLEDB:Registry Path="";
Jet OLEDB:Database Password=****;
Jet OLEDB:Engine Type=5;
Jet OLEDB:Database Locking Mode=1;
Jet OLEDB:Global Partial Bulk Ops=2;
Jet OLEDB:Global Bulk Transactions=1;
Jet OLEDB:New Database Password="";
Jet OLEDB:Create System Database=False;
Jet OLEDB:Encrypt Database=False;
Jet OLEDB:Don`t Copy Locale on Compact=False;
Jet OLEDB:Compact Without Replica Repair=False;
Jet OLEDB:SFP=False 
```

我仍然需要查看 Renaud Bompuis 就共享安全设置提出的所有建议，但我必须为此找到一个管理员，因此可能需要一段时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:04:07.027

如果您的计算机上有数据库的副本，请确保您可以使用 Access 打开它而不会出现任何错误。如果遇到问题，请先解决此问题。也许压缩并修复数据库。

确保您从中打开数据库的远程文件夹已添加到Access 中的*受信任位置*列表中（与您从中打开数据库的本地文件夹相同）。

如果您可以在本地打开数据库，但不能在远程共享上打开，请确保共享的安全设置允许您对整个共享**进行**读写访问，以便数据库引擎可以正确创建`.laccdb`或`.ldb`锁定文件。有关类似问题，
请参阅[拆分数据库上的问题 MS Access - “文件已在使用”错误。](https://stackoverflow.com/questions/12958873/ms-access-file-already-in-use-error-on-split-database)

基本上，即使其他用户连接到它，Access 也没有理由不能打开远程数据库。

当您在这里提出问题时，请记住发布尽可能多的详细信息。
例如在这里，您应该发布您正在使用的确切连接字符串详细信息；您还应该提及尝试从 Access 打开数据库时收到的确切错误消息，因为它可以帮助我们识别问题。

# ruby-on-rails - 如何在 Rubinius 中将 Ruby 1.8.7 升级到 1.9.2

> ID：13259291
> 
> 赞同：0
> 
> 时间：2012-11-06T20:58:01.527
> 
> 标签：ruby-on-rails, rubinius

当我编译“ruby -v”命令时它返回，

```
rubinius 2.0.0dev (1.8.7 78652b58 yyyy-mm-dd JI) [x86_64-apple-darwin11.4.2] 
```

我应该如何将 ruby​​ 1.8.7 升级到 1.9.2 ？我应该删除 rubinius 吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:38:13.607

而不是删除rubinius，我只写命令：

```
rvm ruby-1.9.3 
```

然后它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:34:43.980

您还可以像这样设置语言模式标志：

```
rbx -X19 my_script.rb 
```

需要明确的是，Rubinius 团队专注于对 1.9 的支持，所以无论如何最好在 1.9 模式下运行 Rubinius。

# c# - EF DbContext.Set 仅过滤记录...不起作用

> ID：13259299
> 
> 赞同：2
> 
> 时间：2012-11-06T20:58:36.690
> 
> 标签：c#, entity-framework, entity-framework-4.1, repository-pattern

在开发利用通用存储库和实体框架 4.2 上的工作单元模式的数据访问解决方案时。我看到一些异常行为。为了使我的存储库通用，我使用了 DbContext 的 Set 方法，例如：

```
public class MyGenericRepository<T> 
{
     protected readonly IDbContext context;
     public virtual IEnumerable<T> FindBy(Func<T, bool> predicate)
     {
        return context.GetDbSet<T>().Where(predicate).First();
     }
} 
```

IDbContext 就像：

```
public interface IDbContext
{
    void Commit();
    void Attach<T>(T obj) where T : class;
    void Add<T>(T obj) where T : class;
    DbSet<T> GetDbSet<T>() where T : class;
    bool Remove<T>(T item) where T : class;
} 
```

DbContext 类将 IDbContext 实现为：

```
public partial class MyEntities : IDbContext
{

    public DbSet<T> GetDbSet<T>() where T : class
    {
        return this.Set<T>();
    }
} 
```

当我执行 repository.FindBy(c => c.CompanyId == 45) 时，Sql Profiler 显示查询**不**包含任何过滤器（company_id = 45）。该查询执行 Select *。

期待过滤器出现，我开始研究并遇到了这个，

[http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/7d6705ac-f875-4c89-960b-842be6f6e5ed](http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/7d6705ac-f875-4c89-960b-842be6f6e5ed) 和 [EF DbContext.Set<T> 仅过滤记录](https://stackoverflow.com/questions/9362145/ef-dbcontext-sett-filtered-record-only)

这些线程证实了我的思考过程，但结果不同。有什么解决办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T21:04:06.530

您的谓词是 a `Func<T, bool>`，它强制查询使用`Enumerable.Where`方法而不是`Queryable.Where`方法。

将谓词更改为`Expression<Func<T, bool>>`，一切都应该开始工作。

# silverlight - Silverlight 5 - 如何在 XAML 中使用普通 CLR 对象作为命令参数？

> ID：13259302
> 
> 赞同：2
> 
> 时间：2012-11-06T20:58:41.777
> 
> 标签：silverlight, xaml, parameters, command, clr

我想知道，如果可能的话，使用简单的 C# CLR 对象作为 XAML 中的命令参数，就像我使用 MarkupExtensions 一样。

例如，我使用自己的标记扩展，如下所示：

```
public class FormOpenExtension : MarkupExtension
    {
        public eForm e { get; set; }

        public override object ProvideValue(IServiceProvider serviceProvider)
        {
            return this;
        }
    } 
```

XAML 中 MarkupExtension 的使用如下所示：

```
CommandParameter="{gui:FormOpen e=Login} 
```

在 XAML 中，我对 FormOpenExtension Object 有完整的智能支持，编译没问题。所以这就像一个魅力。

## --------------------------------------

现在我有一个简单的 CLR 对象，例如，它看起来像这样：

```
namespace DB
{
    [DataContract(IsReference = true)]
    public partial class User
    {
        #region Primitive Properties

        [Key][DataMember]
        public virtual int ID
        {
            get;
            set;
        }

        [DataMember]
        public virtual string Name
        {
            get;
            set;
        }
}
} 
```

我可以将命名空间导入 XAML 并使用该对象，包括这样的智能感知：

```
CommandParameter="{db:User ID=1, Name=Foo} 
```

Visual Studio 说，我正在使用像 MarkupExtension 这样的用户对象，但它没有。

**我完全理解这个问题。**普通用户对象没有扩展。

我不明白的是如何将用户对象用作命令参数，而无需编写我自己的扩展。

**所以这是我的两个具体问题：**

1.) 是否可以在 XAML 中使用我自己的对象，而不将它们包装到扩展中？

2.) 如果是，命令参数的正确语法是什么？

谢谢你。

## ----------------------------------

好的，谢谢迪米特里。这是解决方案，因为它现在对我有用：

步骤 1) 导入命名空间

```
xmlns:db="clr-namespace:DB" 
```

步骤 2) 使用 CLR 对象作为静态资源。

```
<UserControl.Resources>
   <db:User x:Key="User"/>
</UserControl.Resources> 
```

步骤 3) 将对象键（在本例中为用户）传递给 CommandParameter

```
CommandParameter="{StaticResource User} 
```

步骤 4) 将用户对象绑定到您的 UserConrol 中的所需控件

```
Text="{Binding Source={StaticResource User}, Path=EMail, Mode=TwoWay}" 
```

就是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:11:39.640

如果我理解问题，[ObjectDataProvider](http://msdn.microsoft.com/en-us/library/system.windows.data.objectdataprovider.aspx)可以帮助找到解决方案。

ps 简单地将对象声明为资源然后通过`StaticResource`扩展使用它呢？

```
<Resources>
     <DB:User Id="1" Name="Name" x:Key="User"/>
</Resources> 
```

# c++ - 带有c ++类的objective-c链接器错误

> ID：13259303
> 
> 赞同：0
> 
> 时间：2012-11-06T20:58:43.243
> 
> 标签：c++, objective-c

我有一个 C++ 类，它被引用，然后我要声明一个变量。我在objective-c中声明：

```
cObject obj = cObject();
obj.myFunct("test"); 
```

但似乎存在链接器错误。它说：

```
Undefined symbols for architecture armv7:
  "cObject::cObject()", referenced from:
    -[...] in xxx.o
    ___cxxx_global_var_init in xxx.o
"cObject::myFunct(std::__1:basic_string<char,str::__1::char_traits<char>, str::__1::allocator<char> >)", referenced from:
    -[///] in xxx.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1(use -v to see invocation) 
```

**编辑：评论中解决的第一个错误：**不要定义一个空的构造函数解决了第一部分。第二部分是指调用 obj.myFunct("test");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:00:20.327

您需要在`myFunct`某处定义类的默认构造函数和函数：

```
cObject::cObject()
{
    ...
}

return_type cObject::myFunct(std::string arg1)
{
    ...
} 
```

如果它们已定义，请确保您在定义它们的目标文件中进行链接（即将源文件添加到您的 Makefile/项目文件/命令行/等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T22:06:40.670

这是一个两部分的答案。

错误的第一部分是因为我有一个空的构造函数。不允许为空，如果为空会抛出错误。为了解决这个问题，我删除了构造函数，编译器默认创建一个。

问题的另一部分来自编译问题。我是什么意思？我的意思是，在这种情况下，文件 test.h 具有未编译的关联数据。通过评论帮助我解决了这个问题，但最终进入了 XCode 项目，并通过单击与该部分关联的小加号按钮将 .cpp 添加到“编译源”部分。成功编译该源代码后，程序运行并完美运行，按计划调用函数并正确声明类。

我不相信@AdamRosenfield、@EdS.、@H2CO3 帮助我度过了难关

# c++ - 删除从另一个指针分配的指针，我应该再次删除另一个指针吗？

> ID：13259305
> 
> 赞同：4
> 
> 时间：2012-11-06T20:58:53.477
> 
> 标签：c++, pointers

所以，这是我解释这个问题的例子

```
void * p1;
int * p2, * p3;

p2 = new int;
p1 = p2;
p3 = (int *) p1; 
```

要释放内存，以下 3 行是否彼此等效？

```
delete p2;
delete p3;
delete (int *) p1; 
```

我使用它的原因是我想在函数之间传递一个指针而不知道它的类型，例如我定义一个 void 指针并通过调用其他函数来更改它的值，如下所示：

```
void * p1;
func1(p1); //in this function, p2 = new int and  p1 is assigned as p1 = p2;
func2(p1); //in this function, p1 is assigned to another pointer: int * p3 = (int *)p1; 
```

然后，我调用了 func3 来释放内存

```
func3(p1); //delete int * p1 
```

调用 func3 后，我是否必须再处理 func1 中的 p2 ？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T21:00:55.417

是的，所有 3 `delete`s 都是等价的。需要注意的是，在发布的示例中，所有 3 个指针都指向同一事物。这意味着，如果您`delete`是其中之一，则不应`delete`使用其他人，因为他们指向的内存已被释放。

如果你确实尝试了`delete`一些已经发布的东西，你会唤起未定义的行为。如果你很幸运，你的程序会崩溃，但任何事情都可能发生。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T21:08:03.807

该问题包含一个误解：您不*删除**指针*。您删除他们*指向的*内容。

而且您不能多次删除*同一事物。*

想想三个人用手指指向同一个盒子。其中一个说“扔掉*它*”。一旦它被抛出，他们将保持手指仍然指向同一个方向指向一个空白空间。没有什么可以扔掉的了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T21:01:01.517

您只有一个分配，因此只需要删除一个。你有三个项目可以让你找到那个内存（你的指针），所以任何一个都可以将它释放回操作系统。一旦释放回 O/S，请注意不要使用任何旧指针，因为它们仍然保存您现在释放的内存的旧地址。去使用释放的内存是不好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T11:56:20.013

是的，这三个都是等价的。在调用 delete 之后，您唯一想做的就是将指针设置为 nullptr，这样您就可以知道它们不再有效：

```
p1 = nullptr ;
p2 = nullptr ;
p3 = nullptr ; 
```

请记住，指针*指向内存*。当你这样做时：

```
p2 = new int; 
```

您是在说“向我声明一些新内存并将其地址保存在 p2 中”。现在您可以使用 p2 访问该内存。

当你这样做时：

```
p1 = p2; 
```

您是在说“我希望 p1 指向 p2 指向的同一内存”。您现在有两个*指向同一内存的*指针。

如果您对任何一个指针调用 delete，它将删除该内存，并且所有这些指针现在都将指向同一个已释放的内存（即它们现在无效）。

释放内存后通常要做的事情是让指针变量超出范围或将它们设置为 nullptr 以便您可以检测它们不再有效。

# c# - 企业应用本地化

> ID：13259308
> 
> 赞同：2
> 
> 时间：2012-11-06T20:59:06.420
> 
> 标签：c#, mvvm, prism, enterprise

您会将“本地化和全球化”放在使用 MVVM 和 Prism 在 c# WPF 中构建的 3 层企业应用程序中的什么位置？我的意思是在一个像 msdn (http://msdn.microsoft.com/en-us/library/ee658124.aspx) 中描述的模式构建的应用程序中，您会将本地化逻辑放在哪一层？您将使用哪种方法（resx 文件、db ...）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:06:46.580

我`resx`在企业应用程序中为此使用了文件。它们被放置在自己的`Resources`项目中，因此可以在多个用户界面之间共享。

值得一读的是微软是如何打算这样做的，因为它揭示了一些令人信服的理由以这种方式做事：

[http://msdn.microsoft.com/en-us/library/c6zyy3s9%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/c6zyy3s9%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:01:47.140

我建议您使用数据库本地化映射。这样就无需在每次本地化更改后重新编译应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:19:19.833

Resx 文件

但这不是一个微不足道的主题，也没有任何一种标准方法，主要的方法是：

1.  使用 WPF 资源
2.  使用 wpf 的 Locbaml 工具
3.  使用 RESX 文件作为 xaml 静态字符串
4.  使用带有扩展名的 RESX 文件

推荐参考：[Sacha Barber](http://www.codeproject.com/Articles/37339/WPF-Localization)、[Josh Smith](http://www.codeproject.com/Articles/31837/Creating-an-Internationalized-Wizard-in-WPF)和[ResX](http://www.codeproject.com/Articles/35159/WPF-Localization-Using-RESX-Files)。

我的偏好是使用 (3) 和 (4) 的组合，尽管我需要稍微修改扩展的代码。所以我通常会有

1.  Resx 文件的项目 (MyApp.Presentation.Resources)，每个视图一个
2.  Resx 文件的项目 (MyApp.Domain.Resources)，每个枚举类型一个，标准命令
3.  根据需要引用 MyApp.Domain.Resources 枚举的视图模型项目 (MyApp.ViewModels)
4.  一个控件和/视图项目）（MyApp.Wpf.ControlLib），它引用了 MyApp.Presentation.Resources 和我的 ResxExtension.dll 版本。

HTH，
绿柱石

# xslt - xslt 语法错误 元素

> ID：13259311
> 
> 赞同：1
> 
> 时间：2012-11-06T20:59:24.267
> 
> 标签：xslt

这就是我想要做的=

```
<xsl:text><xsl:value-of select="//Row_3/YEAR"/></xsl:text> 
```

这是我得到的错误 -

cvc-complex-type.2.2：元素 'xsl:text' 必须没有元素 [children]，并且值必须有效。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:01:07.157

就像错误消息说的那样，`xsl:text`不能有任何孩子。只需使用`<xsl:value-of select="//Row_3/YEAR"/>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:05:35.920

您究竟需要 <xsl:text> 做什么？根据[W3Schools](http://www.w3schools.com/xsl/el_text.asp) ，此元素可能仅包含*文字文本、实体引用和 #PCDATA*。

如果您的构造没有充分的理由，请尝试

```
<xsl:value-of select="//Row_3/YEAR"/> 
```

反而。

# html - Twitter Bootstrap 下拉菜单背景未在 IE8 中呈现

> ID：13259313
> 
> 赞同：1
> 
> 时间：2012-11-06T20:59:39.000
> 
> 标签：html, internet-explorer-8, twitter-bootstrap

我正在使用开箱即用的 Twitter Bootstrap。我有一个下拉菜单，适用于除 IE8 之外的所有浏览器。单击 ie8 中的按钮时，列表项会出现没有背景，但是当我将鼠标悬停在列表项上时会出现。如果我没有从下拉菜单中选择项目并单击下拉菜单之外的区域，则背景会移动但不会消失。知道为什么吗？这是我的代码：

```
<div class="btn-group">
<div class="input-prepend">
    <button class="btn"><div id="searchThis">Name</div>&nbsp;</button>
    <button class="btn dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
    <ul class="dropdown-menu">
        <li id="name" rel="Last name, First name"><a href="#">Name</a></li>
        <li id="org-name" rel="Organization Name"><a href="#">Org Name</a></li>
        <li id="org-code" rel="Organization Code"><a href="#">Org Code</a></li>
        <li id="state" rel="State"><a href="#">State</a></li>
        <li id="country" rel="Country"><a href="#">Country</a></li>
     </ul>
     <div class="input-append">
         <input id="search" type="search" placeholder="Last Name, First Name" name="search" class="input-text span12" />
         <button type="submit" title="" class="button btn btn-primary"><i class="icon-search icon-white"></i></button>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T10:32:57.177

我也遇到了这个问题，和你描述的一样。单击后下拉背景出现在正确的位置一毫秒，然后跳出位置并且在单击页面上的其他位置时不会消失。

我尝试注释掉各种仅限 IE8 的 javascript 文件，例如 html5shiv.js 和 respond.js，但这没有用。

问题是我将 CSSPie 应用于 class `.dropdown-menu`，因此 IE8 支持圆角。这显然与 bootstrap.js 冲突，所以在我的 CSS 中注释掉下面的行之后，下拉背景按预期出现（尽管有方角！）

```
.dropdown-menu{behavior:url(/Resources/CSS/CSSPie/PIE.htc)} 
```

# asp.net - 取消选择 ListView 中的记录

> ID：13259314
> 
> 赞同：3
> 
> 时间：2012-11-06T20:59:40.387
> 
> 标签：asp.net

如何取消选择列表视图中的选定记录？

我的 ListView 的 SelectedItemTemplate 中有以下按钮：

```
<asp:Button ID="Button2" runat="server" Text="Deselect" CommandName="Cancel"/> 
```

但它不起作用，我收到一条错误消息，说我只能对更新或插入的记录使用取消命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:02:35.320

您应该将 ListView 上的 SelectedIndex 设置为 -1

MSDN：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.selectedindex.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.selectedindex.aspx)

# ios - 从 ALAsset 读取 CMYK 文件

> ID：13259316
> 
> 赞同：1
> 
> 时间：2012-11-06T20:59:47.690
> 
> 标签：ios, uiimageview, uiimage, alassetslibrary, cmyk

我想从 iOS 照片库中读取 CMYK 图像。

例如[CMYK 文件示例](http://www.plaveb.com/blog/Upload/FCKeditor/image/cmyk-encoded-image.jpg) 在 Safari 中打开此文件并按住并保存到相机胶卷。

然后我使用 ALAsset 库在 UIImageView 中显示

```
[library assetForURL:asset resultBlock:^(ALAsset *asset) {
  UIImage* image = [UIImage imageWithCGImage:asset.thumbnail];
  imageView.image = image;
} failureBlock:^(NSError *error) {
  imageView.image = nil;
}] ; 
```

它导致几乎所有的黑色图像和丢失的颜色信息。我也试过

```
asset.defaultRepresentation.fullScreenImage;
asset.defaultRepresentation.fullResolutionImage; 
```

所有结果都是黑色图像。

我也试图从这样的字节中读取。

```
ALAssetRepresentation* representation = [asset defaultRepresentation];
uint8_t *buffer = (Byte*)malloc(representation.size);
[representation getBytes:buffer fromOffset: 0.0  length:representation.size error:nil];
NSData *data = [[NSData alloc] initWithBytesNoCopy:buffer length:representation.size freeWhenDone:YES];
UIImage* image = [UIImage imageWithData:data]; 
```

这也显示全分辨率图像，但也只是黑色......

有趣的是，如果我从 web 目录获取数据到 UIImage，它就可以工作。

```
 self.imageView.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.plaveb.com/blog/Upload/FCKeditor/image/cmyk-encoded-image.jpg"]]]; 
```

这产生了彩色图像。所以我的猜测是当将 CMYK 图像保存到相机胶卷时，它会丢失颜色信息并且无法再获得彩色图像。

问题是“是否可以从相机胶卷 CMYK 图像中获得彩色图像？”

我用 iOS 6.0.1 和 5.0、5.1 进行了测试。在 6.0.1 中，缩略图或全屏图像都无法显示彩色图像。奇怪的是在 iOS 5.0、5.1 中。只有缩略图可以显示彩色，但不能全屏显示。

任何想法将不胜感激！

# objective-c - 如何在 iOS 中为字体实现动画和效果

> ID：13259318
> 
> 赞同：1
> 
> 时间：2012-11-06T20:59:57.877
> 
> 标签：objective-c, animation, fonts

我想知道您是否可以帮助我解决与 iOS 相关的问题。

我想创建一个具有一些简洁文本效果的 iPhone 应用程序。

例如，我可能有一个计时器，当时钟达到 10 秒时，每一秒都会发出脉冲以指示时间快结束了。

或者，另一个例子可能是，当用户在游戏中按下不正确的按钮时，我有一个非常快速的动画，它会增加我的文本，因此它占据了大部分屏幕 - 然后在我想要的时候缩小到什么都没有（而不是消失）它结束。

这些中的每一个我也想使用在 Xcode 中无法选择的字体。

所以我的问题是，有没有人知道一个像样的教程地方或书籍，可以教授一些像这样的文本效果 - 以及其他使用自己的字体和样式（即渐变色等）的应用程序如何在他们的应用程序中实际做到这一点? 我正在考虑为每个数字创建一个图像，并在每次我想显示分数或时间时使用这些图像，但这可能不是最佳方式。

任何帮助将非常感激，

非常感谢，

交流电

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T21:07:41.640

不需要为此使用 CoreText *（顺便说一下，CoreText 并不容易理解，相信我我在这个框架上做了很多工作，在你的情况下，不需要使用如此复杂的低级框架而你可以用更简单的方法做你想做的一切）*

## 1\. 动画

使用基于块的动画方法来制作“脉冲”动画非常简单，并将标签`UIView`更改为 a ，这将使缩放从 100% 变为 130%，然后再回到 100%。`transform``CGAffineTransformScale`

使标签脉冲从 100% 到 130% 的最简单示例是使用以下代码：

```
[UIView animateWithDuration:0.5 animations:^{
   // grow the label up to 130%, using a animation of 1/2s
   myLabel.transform = CGAffineTransformMakeScale(1.3,1.3); 
} completion:^(BOOL finished) {
   // When the "grow" animation is completed, go back to size 100% using another animation of 1/2s
   [UIView animateWithDuration:0.5 animations:^{
        myLabel.transform = CGAffineTransformIdentity;
   }];
}]; 
```

当然这是一个简单的例子，您可以使用其他更完整的`[UIView animationWithDuration:…]`变体自定义动画（添加延迟、控制动画曲线等）。

*您甚至可以使用 CoreAnimation 来构建显式且更详细的动画，请参阅 Apple 文档中的[Core Animation Cook Book](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/CoreAnimation_Cookbook/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005406)和[Core Animation Programming Guide](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514)以了解构建更复杂动画的更多详细信息；但在你的情况下，`[UIView animationWithDuration:…]`变体应该就足够了）*

## 2.自定义字体

您可以轻松地将自定义字体添加到您的应用程序中，只需在应用程序资源中添加字体（TTF 文件），然后使用`UIAppFonts`Info.plist 中的键列出这些自定义字体。有关更多信息，请参阅[Info Plist Key Reference 中的此处](http://developer.apple.com/library/ios/documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW18)。

## 3.文字渐变色

您可以通过在图像的蒙版上绘制文本来执行此类操作。在图像上绘制渐变（使用 CoreGraphics，请参阅[Quartz 2D 编程指南](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html)）并将文本用作遮罩（遮罩的黑色部分为绘制部分，白色部分为透明）。

**但更简单的方法**是在您的资源中使用一些图像作为模式（例如具有一些渐变的图像），并使用以下代码来使用此渐变颜色：

```
yourLabel.textColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"yourpattern.png"]]; 
```

您甚至可以`UIImage`使用 CoreGraphics（或 CAGradientLayer 或其他东西）通过代码（而不是在资源中）创建渐变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:05:24.403

听起来你想要一些低级的绘图代码，比如使用[Core Text](https://developer.apple.com/library/mac/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html)

> Core Text 框架是一种用于布局文本和处理字体的高级、低级技术。专为高性能和易用性而设计，Core Text 布局引擎的速度是 ATSUI（用于 Unicode 图像的 Apple 类型服务）的两倍。Core Text 布局 API 简单、一致，并且与 Core Foundation、Core Graphics 和 Cocoa 紧密集成。

您的问题非常笼统，因此很难给出具体答案，但我将从阅读该框架文档开始。

* * *

这个问题也可能有帮助：[https ://stackoverflow.com/questions/2763757/core-text-tutorial](https://stackoverflow.com/questions/2763757/core-text-tutorial)

# iphone - 在 UITableViewController 到 UIViewController 之间传递数据

> ID：13259319
> 
> 赞同：1
> 
> 时间：2012-11-06T20:59:58.827
> 
> 标签：iphone, objective-c, ios, xcode4.5

尝试在 UITableView 到 UIViewController 之间传递一些数据时出现问题。我在谷歌和stackoverflow中寻找，但没有成功。

这里 NSLog 正在打印我想要的

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    DetalhesPosto *detalhesPosto = [[DetalhesPosto alloc]init];

    detalhesPosto.aliasPosto = alias;

    NSLog(@"%@",detalhesPosto.aliasPosto);

    [self.navigationController pushViewController:detalhesPosto animated:YES];

    [detalhesPosto release];

} 
```

当 navigationController 调用视图 detalhesPosto 时有一个代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    labelAliasPosto.text = [NSString stringWithFormat:@"%@",aliasPosto];

    NSLog(@"YES or NO ? %@",aliasPosto);
} 
```

但是 NSLog 正在打印 => 2012-11-06 18:48:58.061 MAP[7006:f803] YES 还是 NO？>

你能阻止我吗？

Tks 保罗

# joomla1.5 - 使用 jUpgrade 唯一文章别名问题将 Joomla 1.5 站点升级到 2.5

> ID：13259328
> 
> 赞同：0
> 
> 时间：2012-11-06T21:00:29.887
> 
> 标签：joomla1.5, joomla2.5, joomla-extensions

我正在尝试使用 jUpgrade 2.5 将我的 Joomla 1.5.26 站点升级到 Joomla 2.5。在更新过程中 jUpgrade 卡在`Migrating undefined`.

启用调试后，显示的错误是

```
JLIB_DATABASE_ERROR_ARTICLE_UNIQUE_ALIAS 
```

有没有办法防止这个独特的文章别名错误？

下面的截图

![在此处输入图像描述](../Images/641db5808eb2aa35b1557c74a3379e68.png)

# java - 反射 java.lang.ClassNotFoundException

> ID：13259329
> 
> 赞同：3
> 
> 时间：2012-11-06T21:00:35.257
> 
> 标签：java, android

我正在使用以下内容：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data){
    super.onActivityResult(requestCode, resultCode, data);
    switch(requestCode){
        case EDIT_ADJUSTMENT:
            if(resultCode == RESULT_OK){
                try{
                    String adjustment = data.getStringExtra("adjustment");
                    adjustment = adjustment.replace(" ", "");
                    ClassLoader myClassLoader = ClassLoader.getSystemClassLoader();
                    String classNameToBeLoaded = "com.picpic.adjustments." + adjustment;
                    Class adjust = myClassLoader.loadClass(classNameToBeLoaded);
                }catch(Exception e){
                    String msg = e.getMessage();
                }
            }
        break;
    }
} 
```

当它到达`Class adjust = myClassLoader.loadClass(classNameToBeLoaded);`我得到以下异常：`java.lang.ClassNotFoundException: com.picpic.adjustments.ColorCorrect`

的包`ColorCorrect`是`com.picpic.adjustments`

那么，为什么会抛出该错误？如果您需要更多信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:48:10.193

我猜这是因为你的类对你试图加载类的*类加载器不可见。*

我建议您尝试`this.getClass().getClassLoader()`而不是`ClassLoader.getSystemClassLoader()`.

Java has a ClassLoader Hierarchy. Each Class Loader has different class path to load classes from. Since it seems the class you are trying to load is user defined one, it may be invisible to the Class Loader returned by `ClassLoader.getSystemClassLoader()` method. (You can try googling for Java ClassLoader Hierarchy. May be this [link](http://www.objectsource.com/j2eechapters/Ch21-ClassLoaders_and_J2EE.htm) is useful if you did not know about this before.).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:48:00.683

这是我用来解决问题的代码：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data){
    super.onActivityResult(requestCode, resultCode, data);
    switch(requestCode){
        case EDIT_ADJUSTMENT:
            if(resultCode == RESULT_OK){
                String adjustment = data.getStringExtra("adjustment");
                adjustment = adjustment.replace(" ", "");
                try{
                    ClassLoader myClassLoader = Edit.this.getClass().getClassLoader();
                    String myPackage = Edit.this.getClass().getPackage().getName();
                    String classNameToBeLoaded = myPackage + ".adjustments." + adjustment;
                    Class adjust = myClassLoader.loadClass(classNameToBeLoaded);
                    Object whatInstance = adjust.newInstance();
                    adjust.getMethod("setBitmap", new Class[]{Bitmap.class}).invoke(whatInstance, new Object[]{Edit.this.stage.getImage()});
                    Bitmap bmp = (Bitmap)adjust.getMethod("applyFilter").invoke(whatInstance);
                    Edit.this.stage.setStageImage(bmp);
                    Edit.this.stage.showTopItems(bmp);
                }catch(Exception e){
                    String msg = e.getMessage();
                }
            }
            break;
    }
} 
```

# jquery - 如何从选择器中包含的 jQuery 函数中排除元素？

> ID：13259332
> 
> 赞同：0
> 
> 时间：2012-11-06T21:00:38.927
> 
> 标签：jquery

我正在制作一个下拉菜单，并试图使列表项图像从加号（未打开时）变为减号（打开时）。

第一个层（父列表项）设置为`list-style:none;`所以当`.click()`下面执行时，我希望`.addClass('close');`应用于除父项之外`<li>`的所有内容...

问题是，包含`.click()`函数中使用的选择器包括父列表项。

我需要做的是说：

**“将类 'close' 应用于 $(this) 除了第一个（父）`<li>`'s'”**

这是jQuery：

```
$(document).ready(function(){

  $("#nav li").click(function(event){

    // My attempt (not working)...
    $(this).not("#nav > ul > li").addClass('close');

    event.stopPropagation();
    $(this).children("ul").slideToggle(100);

    $(".last, a").click(function(event){
      event.stopPropagation();
    });

  });

}); 
```

和**jsFiddle**：

[点击查看](http://jsfiddle.net/hExC3/1/)

所以我的尝试如下：

```
$(this).not("#nav > ul > li").addClass('close'); 
```

那没有用...因此，如果有人有任何建议，将不胜感激！谢谢 ：）

**更新：**

`!important`需要添加“关闭”类。jQuery 正在做它应该做的事情。当我在关闭菜单项后成功删除课程时，我将发布答案。

**更新（2）：**

删除`!important`并将类规范更改为`#nav li.close`. 谢谢阿德尼奥！

**更新（3）：**

改为。`.addClass()`_ `.toggleClass()`似乎让这个菜单做我想做的事情：）谢谢 Sushanth——这个建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:09:01.647

您的问题对 css 选择器不够具体。

using`#nav li`比 just 更具体`.close`，解决问题使用`#nav li.close`（不是！重要）：

```
#nav li.close {
    list-style-image:url(http://www.horsepowerfreaks.com/images/close.gif);
} 
```

[**小提琴**](http://jsfiddle.net/hExC3/3/)

这是关于[CSS 特异性和继承的更多内容](http://coding.smashingmagazine.com/2010/04/07/css-specificity-and-inheritance/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:06:53.263

采用`.toggleClass()`

```
$(this).not("#nav > ul > li").toggleClass('close'); 
```

假设您没有在代码中的其他任何地方添加/删除您的课程

# facebook-graph-api - 带有自定义打开图形操作的时间轴上的音频

> ID：13259344
> 
> 赞同：0
> 
> 时间：2012-11-06T21:01:12.193
> 
> 标签：facebook-graph-api, audio, facebook-ios-sdk

我有一个 iPhone 应用程序，它在自定义对象上发布自定义操作（通过 facebook-ios-sdk 3.1）。有一个带有 og 标签的自定义对象的网页。因此，当发布此操作时，它会显示在用户的时间轴上，其中包含来自自定义对象页面的 og 标记的信息。很好，但我无法让音频播放器出现在时间线帖子上。在自定义对象页面上有 og:audio 标签。我已经读过，如果用户喜欢带有 og:audio 标签的页面，它会在时间线帖子上放置一个音频播放器。这也适用于自定义打开图形操作吗？现在，标签似乎只是被忽略了，时间轴帖子上看不到任何音频数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:54:21.307

根据此页面，您需要成为 Open Graph Music 的白名单开发人员：[https](https://developers.facebook.com/docs/opengraph/music/) ://developers.facebook.com/docs/opengraph/music/ 我的猜测是您还需要实现“Listen”内置动作，而不是自定义动作。

作为替代方案，您可以将您的对象与视频相关联，并将页面的音频文件托管为具有静态专辑封面或其他内容的视频（此处的视频属性文档：[https ://developers.facebook.com/docs/ opengraph/define-objects/#video](https://developers.facebook.com/docs/opengraph/define-objects/#video)）

我知道这有点小技巧，但它可能对你有用。

# c# - 显示 csv 的可下载链接

> ID：13259348
> 
> 赞同：0
> 
> 时间：2012-11-06T21:01:31.530
> 
> 标签：c#, asp.net, asp.net-mvc, webclient

我正在尝试使用以下代码在可下载的 .csv 文件中显示数据流：

```
WebClient wc = new WebClient();
                    byte[] csvBytes = wc.DownloadData(url);
                    return File(csvBytes, "text/csv", "Test.csv"); 
```

URL 以这种格式返回数据：

“保罗”、“史密斯”、“A & P CONSTRUCTION”、“211 N JACKSON ST”、“纽约”、“NY”、“98055”、“杰罗姆”、“哈尔西”、“AAA LOCATING INC”、“1906” SOUTHVIEW DR","PAPILLION","NE","68046""MIKE","GIBILISCO","ABSOLUTE SECURITY INC","944 S JEFFERSON ST","PAPILLION","NE","84102"

上面的效果很好，我得到了一个可下载的链接......但是当我打开 .csv 文件时 - 我只得到一行的记录：

```
\"PAUL\"    \"SMITH\"   \"A & P CONSTRUCTION\"  \"211 N JACKSON ST\"    \"PAPILLION\"   \"NE\"  \"68046\"... 
```

我应该如何修改上面的代码，以便获得正确格式的值（没有“\”并且在右列下）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:56:23.920

原因是您在使用`WebClient`. 似乎服务器在为您构建 CSV 时会查看 HTTP 标头。

因此，您需要尽可能多地模拟您的浏览器（只要您在浏览器中获得正确的 CSV），以使 CSV 服务器认为您是浏览器。为此，您需要查看浏览器在访问 CSV URL 时发送的 HTTP 标头（您可以使用 Fiddler 或浏览器中内置的任何开发工具来完成）。你需要像这样结束smth：

```
wc.Headers.Add("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
wc.Headers.Add("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.3");
wc.Headers.Add("User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)"); 
```

一个一个地添加标题，只需确保与浏览器发送的标题完全相同（并忽略“cookie”、“host”等标题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T22:00:31.487

尝试将 Mime 类型更改为“application/csv”。

CSV 的 Mime 类型也有：text/comma-separated-values、text/csv、application/csv、application/excel、application/vnd.ms-excel、application/vnd.msexcel、text/anytext

# php - 两个标签之间的文本 (

> ID：13259353
> 
> 赞同：-1
> 
> 时间：2012-11-06T21:01:52.117
> 
> 标签：php, file-get-contents

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

请帮助我，我需要使用 file_get_contents 在加载页面上的标签*（`<DIV id="image">any text in source soce</DIV>`）*之间选择文本的脚本。

一位朋友建议我，但它不起作用：

```
$vyber = file_get_contents($url);
preg_match_all("'<span>(.*?)</span>'si", $vyber, $get); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:11:00.383

我不知道正则表达式是否是这里最好的解决方案。

您无法创建完美的正则表达式（或者您可以但需要很多时间），这将涵盖

```
<div somethingelse="" id="image"></div>
<div id="Image></div>
<div id=Image></div> 
```

我要做的是使用 html dom 解析器 [http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

代码将是：

```
<?php
    require_once('DomParserFile.php'); //Replace this ofc
    $Html = file_get_html('http://YourUrlHere.com/'); //html not file :)
    $ContentInThisDiv = $Html->fing('div#image')->src;
    echo($ContentInThisDiv);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:20:19.650

```
$dom = new DOMDocument;
$dom->loadHTMLFile('http://urlhere.com');

$xpath = new DOMXPath($dom);
$nodes = $dom->getElementsByTagName('div');

    foreach($nodes as $val):
        $id = $val->getElementByid('image');
        foreach($id as $content){
            $text = $content->nodeValue;
        endforeach;
        echo $text . '</br>\n';
    endforeach; 
```

尽管未经测试，这应该可以工作。

# r - 使用 ggplot2 绘制具有稳健标准误差的预测值

> ID：13259357
> 
> 赞同：2
> 
> 时间：2012-11-06T21:02:08.563
> 
> 标签：r, ggplot2, robust

我正在尝试使用 ggplot2 绘制负二项式回归的预测值，一个打开二进制变量，另一个关闭它。所以会有两个可以比较的两个地块。

[此处](http://www.ats.ucla.edu/stat/r/dae/nbreg.htm)的链接演示了如何在页面底部执行此操作，但我希望能够使用稳健的标准误差在预测值的图周围创建阴影。我看不出如何从 predict() 函数中得到这个。此代码示例是否有任何解决方法来获得强大的标准错误以在绘制的线周围进行阴影处理？

我使用[此站点](http://www.ats.ucla.edu/stat/r/dae/poissonreg.htm)的代码来生成可靠的标准错误：

```
require(sandwich)
cov.nb1 <- vcovHC(nb1, type = "HC0")
std.err <- sqrt(diag(cov.nb1))
r.est <- cbind(Estimate = coef(nb1), `Robust SE` = std.err, `Pr(>|z|)` = 2 *
    pnorm(abs(coef(nb1)/std.err), lower.tail = FALSE), LL = coef(nb1) - 1.96 *
    std.err, UL = coef(nb1) + 1.96 * std.err)

r.est 
```

我使用的模型是这样的：

```
nb1 <- glm.nb(citecount ~ expbin*novcr + expbin*I(novcr^2) + disease + length +
as.factor(year), data = nov4d.dt) 
```

我正在使用的数据样本是这样的：

```
nov4d.dt  <-
    structure(list(PMID = c(1279136L, 1279186L, 1279186L, 1279187L, 
    1279187L, 1279190L, 1279257L, 1279317L, 1279332L, 1279523L), 
        min = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), max = c(32L, 
        32L, 32L, 32L, 32L, 32L, 32L, 32L, 32L, 32L), mean = c(11L, 
        13L, 13L, 19L, 19L, 16L, 24L, 15L, 8L, 19L), length = c(45L, 
        120L, 120L, 78L, 78L, 136L, 45L, 36L, 171L, 78L), threslength = c(13L, 
        20L, 20L, 7L, 7L, 26L, 4L, 6L, 77L, 14L), novlength = c(5L, 
        6L, 6L, 3L, 3L, 6L, 3L, 3L, 36L, 5L), novind = c("TRUE", 
        "TRUE", "TRUE", "TRUE", "TRUE", "TRUE", "TRUE", "TRUE", "TRUE", 
        "TRUE"), novcr = c(0.111111, 0.05, 0.05, 0.0384615, 0.0384615, 
        0.0441176, 0.0666667, 0.0833333, 0.210526, 0.0641026), novcrt = c(0.288889, 
        0.166667, 0.166667, 0.0897436, 0.0897436, 0.191176, 0.0888889, 
        0.166667, 0.450292, 0.179487), year = c(1991L, 1991L, 1992L, 
        1992L, 1992L, 1992L, 1992L, 1992L, 1991L, 1992L), disease = structure(c(1L, 
        4L, 2L, 4L, 2L, 1L, 4L, 4L, 2L, 4L), .Label = c("alz", "bc", 
        "cl", "lc"), class = "factor"), citecount = c(5L, 8L, 8L, 
        12L, 12L, 0L, 1L, 0L, 92L, 0L), novind2 = c(TRUE, TRUE, TRUE, 
        TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE), rad = c(FALSE, 
        FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE
        ), exp = c(260, 351, 351, 65, 65, 480, 104, 273, 223, 0), 
        novind4 = c(FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, 
        FALSE, TRUE, FALSE), novind5 = c(FALSE, FALSE, FALSE, FALSE, 
        FALSE, FALSE, FALSE, FALSE, TRUE, FALSE), novind6 = c(FALSE, 
        FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE
        ), expbin = c(TRUE, TRUE, TRUE, FALSE, FALSE, TRUE, FALSE, 
        TRUE, TRUE, FALSE), expbin2 = c(TRUE, TRUE, TRUE, FALSE, 
        FALSE, TRUE, FALSE, TRUE, TRUE, FALSE)), .Names = c("PMID", 
    "min", "max", "mean", "length", "threslength", "novlength", "novind", 
    "novcr", "novcrt", "year", "disease", "citecount", "novind2", 
    "rad", "exp", "novind4", "novind5", "novind6", "expbin", "expbin2"
    ), sorted = "PMID", class = c("data.frame"), row.names = c(NA, 
    -10L)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T23:57:22.470

您提供的链接创建一个模型，创建一个合成数据集，其中一个预测变量在其整个范围内变化，将模型和合成数据集传递给 predict()，然后绘制结果预测。您需要做的唯一重要的事情是将强大的 std.err 放入数据框中以计算 CI。

```
#look at how model thinks citecount ~ novcr for two values of expbin 
#make synthetic data with a range of range(df$novcr)
#include logical predictor variable expbin
#such that each level of expbin has all the novcr values

newdata2 <- data.frame(novcr = rep(seq(from = min(nov4d.dt$novcr), 
    to = max(nov4d.dt$novcr), length.out = 100), 2), 
    expbin  = rep(0:1, each = 100))

#convert expbin type to logical
newdata2$expbin <- as.logical(newdata2$expbin)

# add in the mean or default values of other predictors
# because I assume predict() needs vals for all parameters in the model
newdata2$length <- mean(nov4d.dt$length,na.rm=T)
newdata2$disease <- factor("alz")
newdata2$year <- factor("1992") 
```

（继续上述操作，直到合成数据框具有模型所需的所有变量）

```
#make predict and add it to synthetic data
newdata2$fit <- predict(nb1, newdata2, type = "response")

# include CIs based on your robust se
newdata2$LL <- newdata2$fit - 1.96 * std.err["novcr"]
newdata2$UL <- newdata2$fit + 1.96 * std.err["novcr"]

#plot
ggplot(newdata2, aes(novcr, fit)) + 
    geom_ribbon(aes(ymin = LL, ymax = UL, fill = expbin), 
    alpha = 0.25) + geom_line(aes(colour = expbin), size = 2) 
```

# xslt - 从随机 HTML 元素中删除 xmlns 属性

> ID：13259362
> 
> 赞同：4
> 
> 时间：2012-11-06T21:02:28.473
> 
> 标签：xslt, xml-namespaces

我一直在努力解决我遇到的 XSL 问题。

基本上，我有一个匹配的模板，它调用另一个 XSL 文件中的命名模板。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

    <xsl:include href="/_internal/stylesheets/core/common" />

    <xsl:template match="system-page">

        <div id="main">
        <div class="pageHeading">
            <h1><system-page-display-name />&#160;</h1>
            <xsl:if test="current()/dynamic-metadata[name='Printable']/value='true' or current()/dynamic-metadata[name='Shareable']/value='true'">
                <xsl:call-template name="shareAndPrint">
                    <xsl:with-param name="shareable" select="current()/dynamic-metadata[name='Shareable']/value" />
                    <xsl:with-param name="printable" select="current()/dynamic-metadata[name='Printable']/value" />
                </xsl:call-template>
            </xsl:if>
        </div>
        <xsl:copy-of select="current()//system-data-structure/html/node()"/>
    </div>

    </xsl:template> 
```

然后，在另一个文件中，这是我调用的模板：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:spring="http://www.springframework.org/tags" version="1.0">

<xsl:template name="shareAndPrint">

    <xsl:param name="shareable"/>
    <xsl:param name="printable"/>

    <div class="shareBar">
        <xsl:if test="$printable = 'true'">
            <a class="print" href="javascript:window.print();"><spring:message code="print.label" /></a>
        </xsl:if>
        <xsl:if test="$shareable = 'true'">
            <span class="st_sharethis" id="shareThis"></span>
        </xsl:if>
    </div>

    <xsl:if test="$shareable = 'true'">
        <script type="text/javascript">$('#shareThis').attr('displayText','ShareThis');</script>
        <script src="http://w.sharethis.com/button/buttons.js" type="text/javascript"></script>
    </xsl:if>

</xsl:template> 
```

如您所见，我基本上是使用 XSL 生成一个 JSP 文件，其中包含 spring:message 标记，用于翻译我们的网站。

而我的问题基本上是，无论我做什么，XML 输出最终都会包含带有 xmlns:spring="http://www.springframework.org/tags" 的 HTML 元素。我看过很多与此类问题相关的其他帖子，但似乎没有一个解决方案适合我。

这是一些示例输出：

```
<div id="main">
    <div class="pageHeading"><h1>CR-HTML-Static-WRS-en  - test&#160;</h1>
        <div class="shareBar" xmlns:spring="http://www.springframework.org/tags">
            <a class="print" href="javascript:window.print();">
                <spring:message code="print.label" />
            </a>
            <span class="st_sharethis" id="shareThis" ></span>
        </div>
        <script type="text/javascript" xmlns:spring="http://www.springframework.org/tags">$('#shareThis').attr('displayText','ShareThis');</script>
        <script src="http://w.sharethis.com/button/buttons.js" type="text/javascript" xmlns:spring="http://www.springframework.org/tags" ></script>
     </div>TEST CR</div> 
```

我尝试在 xsl:stylesheet 标签上添加 exclude-result-prefixes，虽然这会从 HTML 元素中删除 xmlns，但它会被添加到 spring:message 标签中，这在解析 JSP 时不起作用（ xmlns 是 spring:message 的无效属性）。所以我不确定我做错了什么或者我还能尝试什么。

请，如果有人对此有任何想法或解决方案，我将不胜感激。对不起，如果我遗漏了什么，如果需要，我会添加它。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:17:09.090

您希望结果包含命名空间前缀，而没有这些前缀的命名空间声明。这对于 xslt 是*不可能*的，因为这样的 xml 输出格式不*正确*- 因此您需要对这些文件进行后处理，如下所示：

```
sed -i 's# xmlns:spring="[^"]*"##g' output.html 
```

注意：理论上有一个选项可以[禁用输出转义](http://www.w3.org/TR/xslt#disable-output-escaping)- 但它太丑陋并且使您的 xslt 很快无法维护。我不推荐这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T23:01:47.003

只需添加`exclude-result-prefixes="spring"`到 xsl:stylesheet 元素。

默认情况下，文字结果元素（例如）`<div>`与所有范围内的命名空间一起复制到结果文档中。exclude-result-prefixes 属性会抑制这一点，前提是命名空间实际上并未用于元素或属性名称中。您仍然会在 spring:message 元素本身上获得命名空间声明，但大概这是需要的。

# c# - 当 WPF 中 ItemsControl 的 DataContext 更改时动画高度更改

> ID：13259366
> 
> 赞同：2
> 
> 时间：2012-11-06T21:02:48.890
> 
> 标签：c#, wpf, storyboard, itemscontrol

我有一个`ItemsControl`绑定到它的`DataContext`. 当变化时，我想要动画`DataContext`的高度变化。`ItemsControl`我试图指定一个`DataContextChanged`事件`ItemsControl`：

```
<ItemsControl x:Name="items" ItemsSource="{Binding}" ItemTemplate="{StaticResource LocationTemplate}" DataContextChanged="Items_DataContextChanged"> 
```

在处理程序中，我尝试创建一个`DoubleAnimation`高度。但是，我不知道如何指定`From`和`To`属性。任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:01:06.523

`ItemsControl`通过将a包装起来，我能够创建（我认为）您所追求的效果`Canvas`：

```
<Canvas x:Name="ClippingContainer" Background="Aquamarine" HorizontalAlignment="Center" VerticalAlignment="Center" ClipToBounds="True">
    <ItemsControl x:Name="ICont" ItemsSource="{Binding}" SizeChanged="ItemsControl_SizeChanged"/>
</Canvas> 
```

然后通过对 parent 的和属性进行`ItemsControl.SizeChanged`动画处理来响应事件。`Height``Width``Canvas`

```
private void ItemsControl_SizeChanged(object sender, SizeChangedEventArgs e)
    if (double.IsNaN(ClippingContainer.Height))
    {
        ClippingContainer.Height = e.NewSize.Height;
    }
    else
    {
        ClippingContainer.BeginAnimation(FrameworkElement.HeightProperty, new DoubleAnimation(e.NewSize.Height, new Duration(TimeSpan.FromSeconds(1))));
    }
    if (double.IsNaN(ClippingContainer.Width))
    {
        ClippingContainer.Width = e.NewSize.Width;
    }
    else
    {
        ClippingContainer.BeginAnimation(FrameworkElement.WidthProperty, new DoubleAnimation(e.NewSize.Width, new Duration(TimeSpan.FromSeconds(1))));
    }
} 
```

注意：这可以很容易地转换成它自己的`UserControl`. 在这样做时，您可以覆盖并强制布局传递以重绘动画所属`MeasureOverride`的任何父布局容器。`ItemsControl`

我希望你觉得这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:13:28.313

```
private void MyItemsControl_DataContextChanged(object Sender, DependencyPropertyChangedEventArgs e)
{
    BeginAnimation(HeightProperty, New DoubleAnimation(500.0, New Duration(Timespan.FromMilliseconds(500))));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T22:06:18.413

```
private void Grid_SizeChanged_1(object sender, SizeChangedEventArgs e)
{
    e.Handled = true;
    BeginAnimation(HeightProperty, new System.Windows.Media.Animation.DoubleAnimation(e.NewSize.Height, new Duration(TimeSpan.FromSeconds(1))));
} 
```

# maven-3 - Kafka Storm spout lein 或 Mvn

> ID：13259368
> 
> 赞同：1
> 
> 时间：2012-11-06T21:02:52.840
> 
> 标签：maven-3, apache-kafka, apache-storm

我是 maven 的新手，我试图运行 strom kafka TestTopology spout，但是在storm-kafka spout 下的storm-kafka contrib 中没有提供pom 文件。我使用了 Lein，它也不起作用。我还尝试使用 lein pom 自己制作一个 pom（并对其进行修改），但它也不起作用。我正在从上到下构建项目：我在storm-conrib-master 中运行mvn，它成功构建了更高级别，但是我如何使用storm starter 中的m2-pom 运行TestTopology.java { 稍作更改} 我使用这个：

```
mvn -f m2-pom.xml compile exec:java -Dexec.classpathScope=compile -Dexec.mainClass=storm.kafka.TestTopology 
```

我还使用了 project.clj 设置和 lein，它也不起作用，但 lein 不是我的菜。这是 Maven 设置：

> Apache Maven 3.0.4 Maven 主页：/usr/share/maven Java 版本：
> 
> 1.6.0_33，供应商：Sun Microsystems Inc.

```
Java home: /usr/lib/jvm/java-6-sun-1.6.0.33/jre Default locale: en_US, platform 
```

> 编码：UTF-8 操作系统名称：“linux”，版本：“3.2.0-32-generic”，arch：“amd64”，家族：“unix”

我应该如何运行 TestTopology.java？

我收到编译错误：

> [错误] 无法执行目标 org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on projectstorm-kafka: 编译失败：编译失败：[错误] Desktop/storm- contrib-master/storm-kafka/src/jvm/storm/kafka/trident/StaticBrokerReader.java:[13,7] -source 1.3 [错误] 不支持泛型（使用 -source 5 或更高版本来启用泛型）[错误] 地图代理 = new HashMap(); [错误]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:26:29.257

1.  将 m2-pom.xml 重命名为 pom.xml。这将节省时间，因为 pom.xml 是默认名称。
2.  使用带有[m2e 插件](http://www.eclipse.org/m2e/)的 Eclipse来可视化您的依赖关系并检查状态。
3.  东西已经编译好了。我在[clojars.org找到了它们](https://clojars.org/)

下面是我玩的 pom.xml：

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
<repositories>
    <repository>
        <id>github-releases</id>
        <url>http://oss.sonatype.org/content/repositories/github-releases/</url>
    </repository>
    <repository>
        <id>clojars.org</id>
        <url>http://clojars.org/repo</url>
    </repository>
    <repository>
        <id>twitter4j</id>
        <url>http://twitter4j.org/maven2</url>
    </repository>
</repositories>

<dependencies>
    <dependency>
        <groupId>storm</groupId>
        <artifactId>storm-lib</artifactId>
        <version>0.9.0-wip9</version>
    </dependency>

    <dependency>
      <groupId>storm</groupId>
      <artifactId>storm-kafka</artifactId>
      <version>0.9.0-wip6-scala292-multischeme</version>
    </dependency>

</dependencies> 
```

在 Storm wiki 上阅读 Maven 页面： [https ://github.com/nathanmarz/storm/wiki/Maven](https://github.com/nathanmarz/storm/wiki/Maven)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T21:54:46.357

我经历了一些悲伤的风暴和卡夫卡的整合。这些都是快速发展且相对年轻的项目，因此很难获得工作示例来快速开始您的开发。

为了帮助其他开发人员（并希望其他人贡献我可以使用的有用示例），我启动了一个 github 项目来存放与 Storm/Kafka（和 Esper）开发相关的代码片段。

欢迎您在这里查看> [https://github.com/buildlackey/cep](https://github.com/buildlackey/cep)

（单击storm+kafka 目录可以找到一个可以帮助你启动并运行的示例程序）。

# angularjs - 模板中的控制器及其依赖项

> ID：13259369
> 
> 赞同：0
> 
> 时间：2012-11-06T21:02:56.237
> 
> 标签：angularjs

我有一个通用列表视图的控制器：

```
(angular
 .module('app.controllers')
 .controller('ItemListContr', [
     /*****/ '$scope', 'ItemData',
     function($scope,   ItemData,) {
         ...
     }
 ])
); 
```

where`ItemData`不是现有组件的名称，而是我从路由注入控制器的服务的占位符名称：

```
(angular
 .module('app', ['app.controllers', 'app.services'])
 .config([
     /******/ '$routeProvider',
     function ($routeProvider) {
         $routeProvider
             .when('/books', {
                 controller: 'ItemListContr',
                 resolve: {ItemData: 'BookData'},
                 templateUrl: 'book-list.html'
             })
             .when('/magazines', {
                 controller: 'ItemListContr',
                 resolve: {ItemData: 'MagazineData'},
                 templateUrl: 'magazine-list.html'
             })
     }])
); 
```

其中`BookData`和`MagazineData`是`app.services`模块中定义的服务。

我还需要在模板中使用这个控制器：

```
<span ng-controller="ItemListContr">...</span> 
```

但我需要为其提供数据源`ItemData`。而且我不知道如何从模板中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-18T19:50:52.920

您可以使用`$injector`在控制器中按名称获取服务。

像这样：

```
var myApp = angular.module('myApp', []);

myApp.value('ItemData', 'BookData')

myApp.service('BookData', function () {
    return {
        test: function () {
            alert("Test called in BookData!");
        }
    }
});

myApp.controller('ItemListContr', function ($scope, $injector, ItemData) {
    var myService = $injector.get(ItemData);
    myService.test();
}); 
```

这是一个[小提琴](http://jsfiddle.net/qssgz2gf/)

# c# - 想要在命令提示符窗口中执行命令

> ID：13259373
> 
> 赞同：0
> 
> 时间：2012-11-06T21:03:16.670
> 
> 标签：c#, command-prompt

在我的控制台应用程序中，我需要执行一系列命令：

```
D:
cd d:\datafeeds
grp -encrypt -myfile.xls 
```

这组命令实际上使用工具 (gpg) 加密文件。
我将如何做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:06:41.630

您可以创建一个流程。要使用它，请在 grp 所在的文件夹中执行生成的 .exe。

```
 Process process1 = new Process();
 process1.StartInfo.UseShellExecute = false;
 process1.StartInfo.RedirectStandardOutput = true;
 process1.StartInfo.FileName = "cmd.exe";
 process1.StartInfo.Arguments = "/C grp -encrypt -myfile.xls"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:09:45.430

其他答案没有提到设置工作目录的能力。这消除了对目录更改操作的需要以及将可执行文件存储在 datafeeds 目录中的需要：

```
Process proc = new Process();
proc.StartInfo.WorkingDirectory = "D:\\datafeeds";
proc.StartInfo.FileName = "grp";
proc.StartInfo.Arguments = "-encrypt -myfile.xls";
proc.Start();

// Comment this out if you don't want to wait for the process to exit.
proc.WaitForExit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:05:52.267

Process.start 允许您在 shell 中执行命令。

看到这个问题：[ShellExecute 等效于 .NET](https://stackoverflow.com/questions/258416/shellexecute-equivalent-in-net)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T21:07:38.973

创建一个包含您的命令的批处理文件。
然后使用 Process.Start 和 ProcessStartInfo 类来执行你的批处理。

```
 ProcessStartInfo psi = new ProcessStartInfo(@"d:\datafeeds\yourbatch.cmd");
  psi.WindowStyle = ProcessWindowStyle.Minimized;
  psi.WorkingDirectory = @"d:\datafeeds";
  Process.Start(psi); 
```

ProcessStartInfo 包含其他有用的属性[请参阅 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)
Process 和 ProcessStartInfo 需要`using System.Diagnostics;`

在这种情况下（当您需要运行命令行工具时），我更喜欢使用批处理方法，而不是通过 ProcessStartInfo 属性对所有内容进行编码。当您必须更改某些内容并且您没有可用的代码时，它将更加灵活。

# spring - 我的 spring-hibernate 应用程序中的错误

> ID：13259377
> 
> 赞同：1
> 
> 时间：2012-11-06T21:03:38.823
> 
> 标签：spring, hibernate

我是 Spring 新手，我正在尝试使用带有注释的 spring 和 Hibernate 创建一个简单的项目（不使用配置和映射 XML）。自 3 天以来，我一直遇到以下错误。

**这是我看到的错误..**

```
`ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/Spring]] (MSC service thread 1-2) StandardWrapper.Throwable: java.lang.NoClassDefFoundError: Lorg/hibernate/cache/CacheProvider;
at java.lang.Class.getDeclaredFields0(Native Method) [rt.jar:1.6.0_25]
at java.lang.Class.privateGetDeclaredFields(Class.java:2291) [rt.jar:1.6.0_25]
at java.lang.Class.getDeclaredFields(Class.java:1743) [rt.jar:1.6.0_25]
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findPersistenceMetadata(PersistenceAnnotationBeanPostProcessor.java:373) [org.springframework.orm-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(PersistenceAnnotationBeanPostProcessor.java:321) [org.springframework.orm-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFactory.java:830) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:493) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:591) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) [org.springframework.context-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469) [org.springframework.context-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at javax.servlet.GenericServlet.init(GenericServlet.java:242) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1202) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1102) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3655) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardContext.start(StandardContext.java:3873) [jbossweb-7.0.13.Final.jar:]
at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_25]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_25]
at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_25]
Caused by: java.lang.ClassNotFoundException: org.hibernate.cache.CacheProvider from [Module "deployment.Spring.war:main" from Service Module Loader]
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
... 32 more

16:42:59,393 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/Spring]] (MSC service thread 1-2) Servlet /Spring threw load() exception: java.lang.ClassNotFoundException: org.hibernate.cache.CacheProvider from [Module "deployment.Spring.war:main" from Service Module Loader]
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
at java.lang.Class.getDeclaredFields0(Native Method) [rt.jar:1.6.0_25]
at java.lang.Class.privateGetDeclaredFields(Class.java:2291) [rt.jar:1.6.0_25]
at java.lang.Class.getDeclaredFields(Class.java:1743) [rt.jar:1.6.0_25]
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findPersistenceMetadata(PersistenceAnnotationBeanPostProcessor.java:373) [org.springframework.orm-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(PersistenceAnnotationBeanPostProcessor.java:321) [org.springframework.orm-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFactory.java:830) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:493) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:591) [org.springframework.beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) [org.springframework.context-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469) [org.springframework.context-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]
at javax.servlet.GenericServlet.init(GenericServlet.java:242) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1202) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1102) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3655) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardContext.start(StandardContext.java:3873) [jbossweb-7.0.13.Final.jar:]
at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_25]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_25]
at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_25]` 
```

**这是代码**

```
[ Spring-servlet.xml]
<?xml version="1.0" encoding="UTF-8"?>
<beans ...

<context:property-placeholder location="classpath:jdbc.properties" />

<bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${database.driver}" />
    <property name="url" value="${database.url}" />
    <property name="username" value="${database.username}" />
    <property name="password" value="${database.password}" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="annotatedClasses">
        <list>
            <value>com.spring.form.Items</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            <prop key="hibernate.connection.pool_size">${hibernate.connection.pool_size}</prop>
        </props>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<context:component-scan base-package="com.spring" />

<tx:annotation-driven />

</beans>

Controller

import java.util.HashMap;
import java.util.Map;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import com.spring.form.Items;
import com.spring.service.ReceiptsService;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

@Controller
@RequestMapping("/receiptsnew")
public class ReceiptsSpringController {

@Autowired
private ReceiptsService receiptsService;

public ReceiptsSpringController()
{

}

@RequestMapping(value="/save", method=RequestMethod.POST)
public ModelAndView saveItems(@ModelAttribute("item")Items item, BindingResult result)
{
    receiptsService.addItem(item);

    return new ModelAndView("redirect:/receiptsnew.html");

}

@RequestMapping(method=RequestMethod.GET)
public ModelAndView viewItems()
{
    Map model= new HashMap();
    model.put("items", receiptsService.getAllItems());
    //items is just a key values

    return new ModelAndView("itemsView",model);
}

@RequestMapping(value="/add", method=RequestMethod.GET)
public ModelAndView addItems(@ModelAttribute("item")Items item, BindingResult result) 
{
    return new ModelAndView("itemAdd"); 
}
}

DAO

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.hibernate.SessionFactory;
import com.spring.form.Items;
@Repository("itemDao")
public class HibernateItemDao implements ItemDao {

@Autowired
private SessionFactory sessionFactory;

public void saveItem(Items item) {
    // TODO Auto-generated method stub
    sessionFactory.getCurrentSession().saveOrUpdate(item);
}

@SuppressWarnings("unchecked")
public List<Items> getAllItems() {
    // TODO Auto-generated method stub
    return sessionFactory.getCurrentSession().createCriteria(Items.class).list();
}

}

Service layer  

import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

import com.spring.dao.ItemDao;
import com.spring.form.Items;

@Service("receiptsService")
@Transactional(propagation=Propagation.SUPPORTS, readOnly=true)
public class ReceiptsServiceImpl implements ReceiptsService {

@Autowired
private ItemDao itemDao;

public ReceiptsServiceImpl()
{
}

@Transactional(propagation=Propagation.REQUIRED,readOnly=false)
public void addItem(Items item) {
    // TODO Auto-generated method stub
    itemDao.saveItem(item);
}

public List<Items> getAllItems() {
    // TODO Auto-generated method stub
    return itemDao.getAllItems();
}

}

Form data

@Entity
@Table(name="INVP200B") 
public class Items {

@Id
@Column(name="ITEMB")
private String itemno;

@Column(name="QUARTB")
private String quantity;

@Column(name="QTYPLB")
private String pallet;

public Items()
{

}

public String getItemno() {
    return itemno;
}

public void setItemno(String itemno) {
    this.itemno = itemno;
}

public String getQuantity() {
    return quantity;
}

public void setQuantity(String quantity) {
    this.quantity = quantity;
}

public String getPallet() {
    return pallet;
}

public void setPallet(String pallet) {
    this.pallet = pallet;
}

public String toString()
{
    return " ITEM NO IS "+itemno+" QUANTITY IS"+quantity+" PALLET QUANTITY IS "+pallet ;
}
}

properties
database.driver=oracle.jdbc.driver.OracleDriver
hibernate.dialect=org.hibernate.dialect.Oracle10gDialect
hibernate.show_sql=true
hibernate.connection.pool_size=10
database.url=jdbc\:oracle\:thin\:@app11.corebusiness.com\:2521\:oracle1
database.username=Alleg
database.password=Alleg 
```

以下是jar列表：http: [//i.stack.imgur.com/18rKU.png](http://i.stack.imgur.com/18rKU.png)

我曾经得到“error-creating-bean-sessionfactory -nested exception”，直到我在 spring-servlet 代码中更改了我的 bean 声明的顺序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:36:06.060

作为以下异常的解决方案

> 引起：org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.j‌​ava:207) 的 java.lang.NullPointerException

请为 sessionFactory 定义以下条目

```
<prop key="hibernate.temp.use_jdbc_metadata_defaults">false</prop> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T22:13:51.130

您正在混合 hibernate3 和 hibernate4 类：

```
<bean id="sessionFactory" 
      class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
                                              ^-- 4
...

<bean id="transactionManager" 
      class="org.springframework.orm.hibernate3.HibernateTransactionManager">
                                              ^-- 3 
```

如果您使用的是 Hibernate 4，请确保仅使用 hibernate4 包中的类，或者如果您使用的是 Hibernate 3，请确保仅使用 hibernate3 包中的类。

此外，您似乎在 JBoss 中运行它。那么为什么不使用它的 JTA 事务管理器呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-08T09:09:13.307

上面的异常可以通过添加这个 Hibernate 属性来解决：

```
<property name="hibernate.temp.use_jdbc_metadata_defaults">false</property> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T21:34:40.600

as you're using annotations you have to use AnnotationSessionFactoryBean class

change this

```
 <bean id="sessionFactory"   
class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"> 
```

to

```
 <bean id="sessionFactory" 
class="org.springframework.orm.hibernate4.annotation.AnnotationSessionFactoryBean"> 
```

# javascript - 通过 Html.BeginForm 提交激活加载动画

> ID：13259380
> 
> 赞同：16
> 
> 时间：2012-11-06T21:03:47.890
> 
> 标签：javascript, ajax, asp.net-mvc, asp.net-mvc-4, razor

我想在用户单击提交按钮时显示加载动画。简单的 gif 就可以完成这项工作。这是我的代码：

```
@using (Html.BeginForm("SData","Crawl"))
{
    <p>
        Enter Starting URL:<input class="txt" type="text" id="sUrl" name="sUrl" title="Enter Starting URL"/>
    </p>

    <p>
        Enter Number of Threads:<input class="txt" type="text" id="Nbt" name="Nbt" title="Enter number of threads"/>
    </p>

    <p>
        <input class="button" id="submit" type="submit" value="Submit" />
   </p>   
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-06T21:07:58.470

**编辑**

我错误地认为这个问题与 AJAX 助手有关。这是使用 HtmlHelper 的方法。

首先，在表单中添加一个 ID，以便您可以使用 JQuery 获取它：

```
@using (Html.BeginForm("SData", "Crawl", FormMethod.Post, new { id = "myform" }))
{
    // the form
} 
```

接下来，添加一个 Javascript 事件处理程序来拦截表单提交并显示正在加载的 GIF。

```
$("#myform").submit(function(e) {
    $("#myLoadingElement").show();
}); 
```

* * *

（原始答案如下......）

使用[`AjaxOptions`](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxoptions%28v=vs.108%29.aspx)该类设置 a `LoadingElementId`，Ajax 助手将在等待服务器响应时显示该元素：

```
@using (Html.BeginForm("SData","Crawl", new AjaxOptions() {
    LoadingElementId="myLoadingElement"
}))
{
    // form
} 
```

然后只需将您的 gif 放在您希望它显示的任何位置（最初隐藏它）：

```
<div id="myLoadingElement" style="display: none;">
    <img src="loading.gif" alt="Loading..." />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-28T10:31:07.000

您好，我刚刚在这里阅读了您的帖子，使用 Microsoft.AspNetCore.Mvc 在 .net core 2.1 中对我来说效果很好：

> `@using (Html.BeginForm("ActionName", "ControllerName", FormMethod.Post, new {id="UpdateForm"})) {@Html.AntiForgeryToken() <div>your inputs here...</div> }`

然后是 HTML 脚本：

> `$("#UpdateForm").submit(function(e){$("#your loader gif here..")}`

如果您有问题，您可能想要调试您的 Action Method 并查看它是否在语句内中断...... @Dr Freeman：您可以重定向到任何视图，如下所示：

> `return RedirectToAction("ActionName", new {@id=id});`

希望这有帮助

# ios - 使单元格内容与 UITableView 的边缘齐平

> ID：13259382
> 
> 赞同：1
> 
> 时间：2012-11-06T21:03:54.720
> 
> 标签：ios, uitableview

我试图让单元格文本与表格视图的左侧完全齐平。我尝试设置 tableView.contentInset = UIEdgeInsetsMake(-4,-8,0,0)，它适用于滚动视图，但使用 tableView，内容仍然显示在右侧一点。

有谁知道我需要使内容与表格视图的侧面齐平的确切数字，或者可能是一种不同的方式来做到这一点？

这就是我的意思（蓝色字母如何向右偏离）：

![在此处输入图像描述](../Images/787e03ec338119cfd1a0bae559466bda.png)

（^这是默认的contentInset）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T04:30:09.327

对我来说，最好的方法是创建一个实例 UILabel 变量，然后在你的 cellForRow:AtIndexPath: 方法中初始化 UILabel。

您可以将框架定义为您喜欢的任何内容。给它一个标签号。

准备好后，将 UILabel 作为子视图添加到 cell.contentView。

```
// .h file
@interface MyClass
{
    UILabel *lblCellText;
}

// .m file
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellID = @"cellID";

    UITableViewCell *cell = [tableView dequeReusableCellWithID:cellID];

    if(cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle.....];

        // ------------------------------------
        // initialise your UILabel here
        // ------------------------------------
        lblCellText = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, tableView.frame.size.width, tableView.rowHeight)];
        lblCellText.tag = 1;

        [cell.contentView addSubview:lblCellText];

        [lblCellText release];
    }

    // find your UILabel from the pool of dequed UITableViewCells
    lblCellText = (UILabel *)[cell.contentView viewWithTag:1];

    lblCellText.text = "New playlist";

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:26:19.963

更改表格视图的 contentInset 不是正确的方法。单元格已经到了表格的边缘。您可以通过设置单元格的背景颜色来验证这一点。默认情况下，单元格`textLabel`设置为距离边缘稍远。您应该尝试调整单元格的框架`textLabel`。最好的地方很可能是`tableView:willDisplayCell:forRowAtIndexPath:`委托方法。

另一个选项是自定义表格视图单元格，它将文本放置在单元格中您想要的位置，而不依赖于更改默认设置。

# cocoa-touch - CALayer addAnimation:forKey: 为之前设置的每个属性设置动画

> ID：13259385
> 
> 赞同：0
> 
> 时间：2012-11-06T21:04:06.953
> 
> 标签：cocoa-touch, core-animation, calayer, catransition

所以，我从 UITableView 实例中得到了一个 CALayer。我首先想设置几个属性，例如 backgroundColor。之后我添加了一个动画，它应该使重新加载（-reloadData）看起来更好。但是，我添加的 CATransition 也会为我之前设置的 backgroundColor 设置动画。我想我在这里遗漏了一些真正的基本知识，但我真的不明白。

这是我的代码：

```
 self.superview.backgroundColor = [UIColor greenColor];
    self.backgroundColor = nil;
    self.backgroundView.backgroundColor = nil; 
```

我希望 UITableView 立即变为绿色。

这是过渡：

```
CATransition* swapAnimation = [CATransition animation];
            swapAnimation.type = kCATransitionPush;
            swapAnimation.subtype = kCATransitionTypeFromUITableViewRowAnimation(animation);
            swapAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
            swapAnimation.fillMode = kCAFillModeBoth;
            swapAnimation.duration = 5.0f;
            swapAnimation.removedOnCompletion = YES;
            [self.layer addAnimation:swapAnimation forKey:@"UITableViewReloadDataAnimationKey"]; 
```

当我运行它时，UITableView 保持其原始背景颜色，绿色（实际上通过现在透明的 UITableView 发光）从顶部/底部与单元格一起滑入。这是一个解释 self.layer 调用的类别的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T06:54:43.960

看起来您需要将背景颜色设置器包装在一个显式的`CATransaction`中，因为在添加动画之前它不会被刷新。

像这样：

```
[CATransaction begin];
// set background
[CATransaction flush];
[CATransaction commit]; 
```

# sas - SAS EG 4.1 代码文件的路径

> ID：13259386
> 
> 赞同：5
> 
> 时间：2012-11-06T21:04:18.480
> 
> 标签：sas, relative-path, absolute-path, enterprise-guide

我正在使用 SAS Enterprise Guide 4.1，我的项目包含大量代码。该代码被组织在外部 .sas 文件中，主要是因为 .egp 文件是二进制文件，而纯文本 .sas 文件与 git 配合得更好。

问题是 SAS EG 4.1 使用绝对路径来引用外部 .sas 文件，因此将项目移动到不同的 PC 会破坏对代码文件的引用（除非另一台 PC 使用相同的目录结构）。

有没有办法强制 SAS EG 4.1 使用相对路径（似乎 SAS EG 4.3 使用相对路径，但升级不是一种选择）。如果没有，是否至少有一种聪明的方法可以轻松移动项目？

现在，每次我必须移动项目时，我都会将代码嵌入到项目中（这会破坏版本控制）。另一种方法是从项目中删除所有引用并重新添加它们（这是很多工作）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T21:12:33.667

据我了解，EGP 文件只是 zip 文件。所以你应该有几种方法来解决这个问题。对我来说最简单的似乎是使用 git 对 zip 文件中的文件进行版本控制。因此，将 .egp 文件解压缩到一个文件夹并对该文件夹进行版本控制。当您想返回时，压缩文件夹，然后将其名称更改为 .egp

事后应该有一些方法来修改包含 .egp 文件中的路径的文件，但我对 .egp 文件还不够熟悉，可以肯定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T09:56:50.133

所以 EGP 文件只是 zip 档案。在存档中有一个名为“project.xml”的文件，其中包含如下（子）节点：

```
<CodeTask>
  <IncludeWrapper>True</IncludeWrapper> 
  <Embedded>False</Embedded> 
  <LinkedOpenName>D:\some\path\to\program.sas</LinkedOpenName> 
</CodeTask> 
```

这条路似乎只有在绝对可靠的情况下才有效。相对路径可能有效，但我不知道相对于放置它的内容（相对于项目路径不起作用）。

但是现在我可以编写一个简单的脚本来在项目移动后通过这个 xml 文件并更新路径（我将 .sas 文件保存在与 .egp 文件相同的目录中，所以这应该不是问题）。

# c++ - 推导出模板参数顺序？

> ID：13259389
> 
> 赞同：2
> 
> 时间：2012-11-06T21:04:34.207
> 
> 标签：c++, templates, function-pointers

以下内容符合标准：

```
// 1 : Deduced template parameter in the normal order
template<typename T, typename T1 = typename std::conditional<std::is_fundamental<T>::value, T, int>::type>
void f(T x);

// 2 : Deduced template parameter in the inverted order
template<typename T1 = typename std::conditional<std::is_fundamental<T>::value, T, int>::type, typename T>
void f(T x);

// 3 : Deduced template parameter before a function pointer
template<typename T>
void f(T x, void(*g)(int, int, T*));

// 4 : Deduced template parameter after a function pointer
template<typename T>
void f(void(*g)(int, int, T*), T x);

// 5 : Deduced template parameter with inversed variables
template<typename T, typename T1 = typename std::conditional<std::is_fundamental<T>::value, T, int>::type>
void f(T1 x, T y);

// 6 : Inverted deduced parameter
template<typename T, typename T1>
void f(T1 x, T y); 
```

在第 3 和第 4 种情况下，如果从变量和函数内部传递的类型不同，将选择哪种类型：函数的类型，还是变量的类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T21:10:15.400

(2) 格式不正确，因为在声明它之前`T`在默认模板参数中使用了`T1`它。其余的都很好。

在 (3) 和 (4) 中，如果`T`必须从函数参数中推导出来，那么`T`在使用它的每个地方都必须推导为相同的类型。也就是说，如果从它在第一个函数参数中的使用推断为一种类型，并从它在第二个函数参数中的使用推断为不同类型，则推断失败并且使用格式错误。

`T1`在 (5) 中，永远不会使用默认参数 for —— 要么在使用特化时指定实际参数，要么从函数参数中推导出模板参数`x`。

(6) 没有什么特别之处：如果所有的模板参数都是从函数参数推导出来的，那么声明模板参数的顺序是无关紧要的。

# mysql - 如何加快 MySQL 查询速度

> ID：13259391
> 
> 赞同：4
> 
> 时间：2012-11-06T21:04:46.530
> 
> 标签：mysql, database, query-optimization

我正在尝试连接 MySQL 数据库中的两个表，但它似乎没有使用第二个表上的主键。不知道是不是查询错了，还是主键不能用，如何进一步优化。目前，查询需要 20 秒才能运行。

我正在运行的查询是：

```
SELECT * FROM journeyPatternTimingLink2 INNER JOIN stops ON stops.atcoCode = journeyPatternTimingLink2.from WHERE journeyPatternId = '113958' 
```

我的表结构如下：

```
CREATE TABLE IF NOT EXISTS `journeyPatternTimingLink2` (
  `journeyPatternTimingLinkId` int(11) NOT NULL AUTO_INCREMENT,
  `journeyPatternId` int(11) NOT NULL,
  `from` varchar(15) NOT NULL,
  `to` varchar(15) NOT NULL,
  `direction` enum('inbound','outbound') NOT NULL,
  `runTime` varchar(15) NOT NULL,
  PRIMARY KEY (`journeyPatternTimingLinkId`),
  KEY `journeyPatternId` (`journeyPatternId`),
  KEY `from` (`from`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=13652793 ;

--
-- Table structure for table `stops`
--

CREATE TABLE IF NOT EXISTS `stops` (
  `atcoCode` varchar(25) NOT NULL,
  `longitude` varchar(30) NOT NULL,
  `latitude` varchar(30) NOT NULL,
  PRIMARY KEY (`atcoCode`),
  KEY `location` (`longitude`,`latitude`),
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

最后，这[是我在查询中运行解释的屏幕截图](http://i.imgur.com/Rt564.png)。我不应该看到停止表上使用了某种索引吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T21:07:31.897

您的两个字段使用不同的字符集。

让两个表都使用`UTF8`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:11:13.273

您还可以在各个表的 FROM 和 TO 列上使用“索引”来加速表查找。

> 在 JourneyPatternTimingLink2(from) 上创建索引 indexFrom；
> 
> CREATE INDEX indexAtcoCode on stop(atcoCode);

# c# - 是否可以在 C# 中遍历存储在服务器上的所有会话

> ID：13259394
> 
> 赞同：6
> 
> 时间：2012-11-06T21:04:57.493
> 
> 标签：c#, asp.net, session, webforms, loops

我正在使用 ASP.NET 框架（使用 C#），并为每个用户创建 Session 变量。是否可以遍历所有已初始化的会话。在本次迭代中，我还想更改某些会话的某些属性。

我正在尝试更改存储在会话变量中的一些数据。我有我想要更改其会话的特定用户的会话 ID，因此我还需要能够比较这些 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:00:41.420

我不确定是否有任何框架类来处理这个问题，但如果你真的需要循环访问在 IIS 服务器上为每个请求创建的会话，为什么不将每个会话存储在你自己的集合对象中，你可以从你的代码中访问它? 例如，在 global.asax 文件中，您可以在 Session_Start 事件中添加自己的代码，以将特定会话保存到您的列表中。您必须检查会话是否为新会话，这可以通过 Session.IsNewSession 属性完成。每次创建新会话时，都会触发 Global.asax 中的 Session_Start 事件。

但是，如果您在会话超时或结束时不从列表中删除会话，则可能会出现问题，所以我可能会这样做：

*   在 Session_Start 事件中，检查 this.Session.IsNewSession 布尔值

*   如果 Session.IsNewSession 为真，则获取当前会话（使用 this.Session，因为 Global.asax 在其上下文中有当前新会话），并将其保存在 Dictionary 对象中，键为 Session.SessionId。

*   这将为在服务器中创建的每个会话创建一个唯一的密钥对集合。

*   在 Session_End 事件中，获取当前 Session（this.Session）的 Session.SessionID 属性，也就是已经结束的那个。

*   使用完成的 Session 值的 Session.SessionID 删除包含 Sessions 的 Dictionary 中的键值对。

一旦这个基础设施就位，并且 Dictionary 对象驻留在您的应用程序代码可以访问的位置，您就可以检索该字典并遍历它以使会话在该时间点在服务器中处于活动状态。

# unit-testing - 用于跳过单元测试执行的 Maven 配置文件参数

> ID：13259395
> 
> 赞同：0
> 
> 时间：2012-11-06T21:04:58.740
> 
> 标签：unit-testing, maven, command, pom.xml

我的应用程序中有一些单元测试。AI 需要跳过其中的一部分。在 pom.xml 中，我已经定义了测试是否具有特定的类 - 然后跳过它。

```
<profile>
  <id>skip-unit-tests</id>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.11</version>
        <configuration>
          <excludes>
            <exclude>**/*.class</exclude>
          </excludes>
        </configuration>
      </plugin>
    </plugins>
  </build>
</profile> 
```

所以，如果我做`package -Pskip-unit-tests`了一切工作，但如果我这样做，`clean compile -Pskip-unit-tests test`那么 maven 会执行它们。最后一个命令有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:24:27.580

该选项[`skipTests`](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#skipTests)完成了这项工作：

```
mvn clean install -DskipTests 
```

这解决了所有的测试依赖关系，编译了测试，但阻止了它们的执行。如果你也跳过他们的编译（不是一个好主意！），使用这个：

```
mvn clean install -Dmaven.test.skip 
```

顺便提一句。没有选项可以避免解决测试依赖关系。以上选项在surefire插件内部实现，在deps解决后执行。

[有关maven-surefire-plugin](http://maven.apache.org/plugins/maven-surefire-plugin/examples/skipping-test.html)文档中跳过测试的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T22:00:07.417

我测试了您的个人资料，没有任何问题。

没有配置文件的正常运行：

```
iMac:Q13257987 maba$ mvn 包
[INFO] 正在扫描项目...
[信息]                                                                         
[信息] --------------------------------------------- -------------------------
[信息] 建筑 Q13257987-1.0-SNAPSHOT 1.0-SNAPSHOT
[信息] --------------------------------------------- -------------------------
[信息]
[信息] --- maven-resources-plugin:2.4.3:resources (default-resources) @ Q13257987 ---
[INFO] 使用 'UTF-8' 编码复制过滤的资源。
[INFO] 复制 0 个资源
[信息]
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ Q13257987 ---
[INFO] 无需编译 - 所有类都是最新的
[信息]
[信息] --- maven-resources-plugin:2.4.3:testResources (default-testResources) @ Q13257987 ---
[INFO] 使用 'UTF-8' 编码复制过滤的资源。
[信息] 跳过不存在的资源目录 /Users/maba/Development/stackoverflow/java/Q13257987/src/test/resources
[信息]
[信息] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ Q13257987 ---
[INFO] 无需编译 - 所有类都是最新的
[信息]
[信息] --- maven-surefire-plugin:2.7.2:test (default-test) @ Q13257987 ---
[INFO] Surefire 报告目录：/Users/maba/Development/stackoverflow/java/Q13257987/target/surefire-reports

-------------------------------------------------- -----
 测试
-------------------------------------------------- -----
运行 com.stackoverflow.OrderTest
测试运行：1，失败：0，错误：0，跳过：0，经过时间：0.04 秒

结果 ：

测试运行：1，失败：0，错误：0，跳过：0

[信息]
[信息] --- maven-jar-plugin:2.3.1:jar (default-jar) @ Q13257987 ---
[信息] --------------------------------------------- -------------------------
[信息] 构建成功
[信息] --------------------------------------------- -------------------------
[INFO] 总时间：1.655s
[INFO] 完成时间：Tue Nov 06 22:51:52 CET 2012
[INFO] 最终内存：4M/81M
[信息] --------------------------------------------- -------------------------

```

**结果**：运行了一项测试

* * *

使用配置文件运行包：

```
iMac:Q13257987 maba$ mvn package -Pskip-unit-tests
[INFO] 正在扫描项目...
[信息]                                                                         
[信息] --------------------------------------------- -------------------------
[信息] 建筑 Q13257987-1.0-SNAPSHOT 1.0-SNAPSHOT
[信息] --------------------------------------------- -------------------------
[信息]
[信息] --- maven-resources-plugin:2.4.3:resources (default-resources) @ Q13257987 ---
[INFO] 使用 'UTF-8' 编码复制过滤的资源。
[INFO] 复制 0 个资源
[信息]
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ Q13257987 ---
[INFO] 无需编译 - 所有类都是最新的
[信息]
[信息] --- maven-resources-plugin:2.4.3:testResources (default-testResources) @ Q13257987 ---
[INFO] 使用 'UTF-8' 编码复制过滤的资源。
[信息] 跳过不存在的资源目录 /Users/maba/Development/stackoverflow/java/Q13257987/src/test/resources
[信息]
[信息] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ Q13257987 ---
[INFO] 无需编译 - 所有类都是最新的
[信息]
[信息] --- maven-surefire-plugin:2.11:test (default-test) @ Q13257987 ---
[INFO] Surefire 报告目录：/Users/maba/Development/stackoverflow/java/Q13257987/target/surefire-reports

-------------------------------------------------- -----
 测试
-------------------------------------------------- -----

结果 ：

测试运行：0，失败：0，错误：0，跳过：0

[信息]
[信息] --- maven-jar-plugin:2.3.1:jar (default-jar) @ Q13257987 ---
[信息] 构建 jar：/Users/maba/Development/stackoverflow/java/Q13257987/target/Q13257987-1.0-SNAPSHOT.jar
[信息] --------------------------------------------- -------------------------
[信息] 构建成功
[信息] --------------------------------------------- -------------------------
[INFO] 总时间：1.609s
[INFO] 完成时间：Tue Nov 06 22:49:24 CET 2012
[INFO] 最终内存：4M/81M
[信息] --------------------------------------------- -------------------------

```

**结果**：未运行任何测试

* * *

使用配置文件运行干净的编译测试：

```
iMac:Q13257987 maba$ mvn clean compile -Pskip-unit-tests test
[INFO] 正在扫描项目...
[信息]                                                                         
[信息] --------------------------------------------- -------------------------
[信息] 建筑 Q13257987-1.0-SNAPSHOT 1.0-SNAPSHOT
[信息] --------------------------------------------- -------------------------
[信息]
[信息] --- maven-clean-plugin:2.4.1:clean (default-clean) @ Q13257987 ---
[信息] 删除 /Users/maba/Development/stackoverflow/java/Q13257987/target
[信息]
[信息] --- maven-resources-plugin:2.4.3:resources (default-resources) @ Q13257987 ---
[INFO] 使用 'UTF-8' 编码复制过滤的资源。
[INFO] 复制 0 个资源
[信息]
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ Q13257987 ---
[信息] 将 1 个源文件编译到 /Users/maba/Development/stackoverflow/java/Q13257987/target/classes
[信息]
[信息] --- maven-resources-plugin:2.4.3:resources (default-resources) @ Q13257987 ---
[INFO] 使用 'UTF-8' 编码复制过滤的资源。
[INFO] 复制 0 个资源
[信息]
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ Q13257987 ---
[INFO] 无需编译 - 所有类都是最新的
[信息]
[信息] --- maven-resources-plugin:2.4.3:testResources (default-testResources) @ Q13257987 ---
[INFO] 使用 'UTF-8' 编码复制过滤的资源。
[信息] 跳过不存在的资源目录 /Users/maba/Development/stackoverflow/java/Q13257987/src/test/resources
[信息]
[信息] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ Q13257987 ---
[INFO] 将 1 个源文件编译到 /Users/maba/Development/stackoverflow/java/Q13257987/target/test-classes
[信息]
[信息] --- maven-surefire-plugin:2.11:test (default-test) @ Q13257987 ---
[INFO] Surefire 报告目录：/Users/maba/Development/stackoverflow/java/Q13257987/target/surefire-reports

-------------------------------------------------- -----
 测试
-------------------------------------------------- -----

结果 ：

测试运行：0，失败：0，错误：0，跳过：0

[信息] --------------------------------------------- -------------------------
[信息] 构建成功
[信息] --------------------------------------------- -------------------------
[INFO] 总时间：1.676s
[INFO] 完成时间：Tue Nov 06 22:54:44 CET 2012
[INFO] 最终内存：8M/81M
[信息] --------------------------------------------- -------------------------

```

**结果**：未运行任何测试

* * *

因此，总结您的个人资料设置工作。

也就是说，我认为您应该`mvn package -DskipTests`改用这是跳过所有测试的最简单方法。

另一方面，如果您只想跳过一些测试，您可以使用您的配置文件设置，但我宁愿建议您使用[JUnit Categories](http://maven.apache.org/plugins/maven-surefire-plugin/examples/junit.html)。可以直接在`maven-surefire-plugin`配置中选择类别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:18:27.763

根据 maven 生命周期（参见[此处](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)），测试直到编译后才运行，而是在打包之前运行。所以我怀疑你的配置实际上并没有按照你的想法做。

# java - java使用带有数组的方法

> ID：13259397
> 
> 赞同：0
> 
> 时间：2012-11-06T21:05:05.590
> 
> 标签：java, loops, methods, for-loop

感谢阅读，我是 Java 新手，我正在尝试创建一个程序。

所以我有一个名为 public class mysystem 的方法，我在其中对数组执行循环

`for (int i = 0; i < tax.length; i++)`

在主要方法中，但我总是遇到错误 - 它需要以这种方式设置，因为我将使用该数组两次计算一个值，第二次使用另一个值

我在 Eclipse 中遇到的错误是

`Exception in thread "main" java.lang.Error: Unresolved compilation problems:`

```
tax cannot be resolved to a variable
tax cannot be resolved to a variable
tax cannot be resolved to a variable
tax cannot be resolved to a variable
tax cannot be resolved to a variable
tax cannot be resolved to a variable

at mysystem.taxAlone(mysystem.java:11)
at mysystem.main(mysystem.java:83) 
```

根据要求提供完整代码

```
 import java.util.Scanner;

 public class taxsystem{
            public static void taxAlone(double inputwage){
                    for (int i = 0; i < tax.length; i++)
                            {
                                    // Check what tax bracket the value falls in to
                                    if ((inputwage >= tax[i][0]) && (inputwage <= tax[i][1]))
                                            {
                                                    // Declare the tax variable
                                                    double taxValue;
                                                    // do the calculation - amount taxable * taxrate + Cumulative value
                                                    taxValue = ( ( (inputwage - tax[i][0]) * tax[i][2]) + tax[i][3]);
                                                    //rounding up or down!
                                                    int finalTax = (int)Math.round(taxValue);
                                                    //Print out the result!

                                                    System.out.println("You will be taxed £ "+ finalTax);
                                            }

                            }
            }

            public static void main(String[] args)
                    {

                            double[][] tax = new double[6][4];
                            // First Tax Band
                            tax[0][0] = 0;
                            tax[0][1] = 100;
                            tax[0][2] = 0;
                            tax[0][3] = 0; // 0 to start
                            // Second Tax Band
                            tax[1][0] = 101;
                            tax[1][1] = 150;
                            tax[1][2] = 0.1;
                            tax[1][3] = 0; // 0* 100 = 0
                            // Third Tax Band
                            tax[2][0] = 151;
                            tax[2][1] = 200;
                            tax[2][2] = 0.2;
                            tax[2][3] = 4.9; // 100 * 0 + 49 * 0.1 = 4.9
                            // Fourth Tax Band
                            tax[3][0] = 201;
                            tax[3][1] = 300;
                            tax[3][2] = 0.4;
                            tax[3][3] = 14.7;
                            // Fifth Tax Band
                            tax[4][0] = 301;
                            tax[4][1] = 400;
                            tax[4][2] = 0.6;
                            tax[4][3] = 54.3;
                            // Sixth Tax Band
                            tax[5][0] = 401;
                            tax[5][1] = 10000; // Dummy Value - Program is only assumed to
                                                                 // takes values up to 1000 pounds
                            tax[5][2] = 1.2;
                            tax[5][3] = 113.7;

                            // Display instructions and ask for value
                            System.out.println("Please enter the income earned to calculate tax");

                            Scanner read = new Scanner(System.in);

                            double wage = read.nextDouble();

                            taxAlone(wage);

                    }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:12:36.190

您正在尝试使用方法中命名的`tax`变量`taxAlone()`。但是，名为变量的唯一声明`tax`是 in `main()`。`taxAlone()`对内部的变量一无所知`main()`。您很可能需要将`tax`变量作为参数从 main 传递到`taxAlone()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T21:19:38.943

该方法对变量`taxAlone`没有可见性。`tax`可以通过以下两种方式之一解决：

1.  将 tax 变量添加为静态变量，例如`private static double[][] tax`，仅使用该副本
2.  将 tax 变量作为参数添加到`taxAlone`方法中，例如`public static void taxAlone(double[][] tax, double inputwage)`，确保将构造的对象作为参数传递给方法。

# javascript - 移动网站在方向更改时调整大小在 Safari 中不起作用

> ID：13259399
> 
> 赞同：0
> 
> 时间：2012-11-06T21:05:15.463
> 
> 标签：javascript, css, mobile-safari, viewport

我是移动网站开发的新手，所以请耐心等待。目前我的网站 ( [http://farhillsanimalclinic.com/mobile](http://farhillsanimalclinic.com/mobile) ) 似乎在 Android 中运行，但我在 Safari 中遇到问题。当我从纵向更改为横向时，所有内容都会正确调整大小，但是从横向切换到纵向时，元素不会调整大小。我知道 resize 函数被调用了，因为我暂时向它添加了一个警报，但它似乎无法正常工作。正如我所提到的，它在 Android 手机上运行良好。

以下是相关代码：

```
function getWidth() {
    xWidth = null;
    if(window.screen != null)
        xWidth = window.screen.availWidth;
    if(window.outerWidth != null)
        xWidth = window.outerWidth;
    return xWidth;
}

function getHeight() {
    xHeight = null;
    if(window.screen != null)
        xHeight = window.screen.availHeight;
    if(window.innerHeight != null)
        xHeight =   window.innerHeight;
    return xHeight;
}

function resizeWrapper() {
    xWidth = getWidth();
    xHeight = getHeight();
    $("#wrapper").css("width", xWidth + "px");
    $("#wrapper").css("min-height", xHeight + "px");
}

$(window).bind('orientationchange', resizeWrapper);
$(window).bind('resize', resizeWrapper); 
```

如果重要，我将使用以下内容来定义视口：

```
<meta name="viewport" content="target-densitydpi=device-dpi, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=1" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:07:31.827

原来是 Mobile Safari 报告 window.outerWidth 的问题。在纵向加载后，它正确地报告了 320 像素，但在从横向翻转到纵向后（无论页面最初是如何加载的），它再也没有报告 320。切换到 window.innerWidth 似乎已经成功了；我只是希望它不会在其他浏览器上引入我没有预料到的新问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:34:00.233

有针对此错误的[方向更改缩放修复。](https://www.filamentgroup.com/lab/a-fix-for-the-ios-orientationchange-zoom-bug.html)这不是一个 100% 的解决方案，但是当您不快速更改方向时它可以工作。

# javascript - 应该发布到特定的 URL；相反，我看到一个 GET 到“/”

> ID：13259400
> 
> 赞同：0
> 
> 时间：2012-11-06T21:05:15.903
> 
> 标签：javascript, jquery, post, get

我的帖子看起来像这样：

```
var $postResults = $.ajax({
    url: "product/create/setting",
    type: "POST",
    async: false,
    data: { KEY: "datasource.name." + dsname, CLASS: dsclass, URL: dsurl },
        complete : function (xhr, textStatus) {
                console.log(xhr.responseText);
                return xhr.responseText;
            }
});
return $postResults.responseText; 
```

但是，当我监视实际发生的情况时，它会在标题中显示一个 GET，其 URL 为“/”而不是“product/create/setting”。

我把它展示给一位同事，他们说“看起来提交按钮正在拒绝你的现实并替换它自己的提交功能。”

有关如何更好地解决此问题的任何想法？

*编辑*

这是完整的功能（在 $(document).ready 里面）

```
function createEnvironmentPrep() {
    $('#createEnvironment').click(function () {
        $('div.zForms').html('');
        $('<div class="home-panel">' +
            '<h2 class="home-panel-header">Create New Environment</h2>' +
                '<form id="submitNewEnvironment">' +
                    '<label class="createlabel" for="envname">Name</label>' +
                    '<input id="envname" name="envname" type="text" size="25" required /><br />' +
                    '<label class="createlabel" for="envpath">Path</label>' +
                    '<input id="envpath" name="envpath" type="text" size="75" /><br />' +
                    '<input id="envsubmit" name="envsubmit" type="submit" class="submit" />' +
                '</form>' +
                '</div>' +
                '<div id="returnmsg"></div>').appendTo('div.zForms');
        $('#envsubmit').click(function(e) {
            e.preventDefault();
            var $inputs = $('#submitNewEnvironment :input');
            var values = {};
            $inputs.each(function() {
                console.log($(this));
                values[this.name] = $(this).val();
            });
            var reqStatus = createEnvironment(values["envname"], values["envpath"]);
                if ( reqStatus === "Setting Updated" ) {
                    window.location.reload();
                } else {
                    $("#returnmsg")
                        .text(reqStatus)
                        .css("display", "block");
                    return this.revert;
                }
        });
    });
    function createEnvironment(envname, envpath) {
        var $postResults = $.ajax({
            url: "zforms/create/setting",
            type: "POST",
            async: false,
            data: { KEY: "report.environment." + envname, NAME: envname, PATH: envpath },
                complete : function (xhr, textStatus) {
                        console.log(xhr.responseText);
                        return xhr.responseText;
                    }
        });
        return $postResults.responseText;
    }
} 
```

据我所知，单击函数对 $('#envsubmit') 的内部分配是在页面加载时发生的，而不是在单击“创建环境”按钮并插入 HTML 时发生的。因此，没有为提交按钮分配单击功能，并且它的行为不符合默认行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:10:34.567

您可能错过了`event.preventDefault();`，并且表单会自行提交。改用这个：

```
$('form').submit(function (e) {
    e.preventDefault();
    // whatever you want to do after submit();
}) 
```

# javascript - JavaScript 中的默认事件顺序是什么？自上而下还是自下而上？

> ID：13259406
> 
> 赞同：4
> 
> 时间：2012-11-06T21:05:40.523
> 
> 标签：javascript, dom-events, event-bubbling

> **可能重复：**
> [什么是事件冒泡和捕获](https://stackoverflow.com/questions/4616694/what-is-event-bubbling-and-capturing)

我刚刚了解到在 JS 中我们有两种事件类型：Capture 和 Bubble。气泡可用于避免需要附加`eventListener`到所有孩子身上；而是仅将侦听器附加到父级并让它检查目标。听起来很酷。我尝试了这个例子：

```
<div id="parent-list">
    <span>span1</span>
    <span class='target'>span2</span>
    <span>span3</span>
    <span>span4</span>
</div>

<script type="text/javascript">
document.getElementById('parent-list').addEventListener('click',function(e){
    if( e.target && e.target.nodeName=='SPAN' ){
        var classes = e.target.className.split(' ');
        for(var i=0; i<classes.length; ++i){
            if( classes[i]=='target' ){
                alert('Bingo! you hit the target.');
            }
        }
    }
});
</script> 
```

但是我没有将任何听众附加到子跨度。然而，他们身上的事件正在冒泡！那么在JS中冒泡默认事件顺序？那么在哪种情况下会使用捕获（自上而下）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T22:11:56.127

想象一下，你有一个看起来像这样的 html：

```
<div id="grandparent">
    <div id="parent">
        <button id="target"></button>
    </div>
</div> 
```

和看起来像这样的JS：

```
function sayGrandpa (evt) { console.log("Grandpa"); }
function sayClicked (evt) { console.log("Clicked"); }

var grandparent = document.getElementById("grandparent"),
    target = document.getElementById("target");

grandparent.addEventListener("click", sayGrandpa, false);
target.addEventListener("click", sayClicked, false); 
```

Bubbling vs Capture 与您的假设没有任何关系，在这两种情况下（在符合 W3C 的浏览器上），您可以使用事件侦听器附加到父级，以侦听触发的事件一个孩子。

不同之处在于，冒泡假设事件链从目标开始，然后通过父链返回，就像炸弹在零地爆炸，并向外发送冲击波涟漪。

捕获从`window`（或`<html>`）开始，一直到目标元素。

因此，当您使用冒泡（更像是涟漪）时，*直接*在元素上设置的任何函数都会首先发生，并且任何附加到祖先的***委托***函数都会随着涟漪返回链而发生。

当您使用捕获时，任何附加到祖先的***委托***函数都会在事件发生在元素上之前发生。
所以`grandparent`元素知道点击，之前知道`target`。

所以当你问事情发生的顺序时，事情很明显：

当您设置一个`grandparent`被***捕获***的事件并设置第二个事件`grandparent`是***冒泡***，并设置一个事件`target`是其中之一时，顺序将是：

`captured grandparent` `target` `bubbled grandparent`

那么什么时候让祖先知道在实际点击按钮之前发生的点击是有益的呢？
好问题！

我敢肯定，有人会想出一些东西，而不仅仅是通过隐藏他们应该点击的东西来让人们痛苦的真正愚蠢的方式。

但道德是你明确要求它（设置`.addEventListener`to的第三个参数`true`）。
此外，oldIE 等根本不支持捕获。

这不是一般应该使用的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:12:15.893

**默认**事件顺序是特定于**浏览器的**。

**事件捕获：**外部元素的事件处理程序首先触发，内部元素的事件处理程序最后触发。

**事件冒泡：**内部元素的事件处理程序首先触发，外部元素的事件处理程序最后触发。

> 这两种事件秩序是完全对立的。**Explorer 仅支持事件冒泡**。**Mozilla、Opera 7 和 Konqueror 都支持**. 较旧的 Opera 和 iCab 都不支持。

在 Microsoft 模型中，您必须将事件的`cancelBubble`属性设置为 true。

`window.event.cancelBubble = true`

在 W3C 模型中，您必须调用事件的`stopPropagation()`方法。

`e.stopPropagation()`

```
function doSomething(e)
{
    if (!e) var e = window.event;
    e.cancelBubble = true;
    if (e.stopPropagation) e.stopPropagation();
} 
```

[http://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

# php - PHP - 是否有一种简单的方法来确定页面上链接的位置？

> ID：13259407
> 
> 赞同：0
> 
> 时间：2012-11-06T21:05:40.897
> 
> 标签：php

我想编写一个脚本来确定链接到我的网站的其他域的超链接的位置。例如，我想知道链接是否来自“文章内”、“侧边栏内（左/右）”、“页脚内”。我能想到的唯一方法是检查包装链接的 CSS 类。例如，一个链接在“left_sidebar”类中，那么它很可能在左侧边栏中:) 但这似乎是一种确定这一点的错误方法。这可能适用于精心设计的 Wordpress 主题，但不适用于许多其他网站。

那么有没有更好的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:09:36.607

PHP 真的没有办法做你想做的事。正如您所说，您提出的方法不是很可靠，因为网页设计师可以在没有标准的情况下随意命名他们的 div。这可能是获取所需信息的最佳方式。我不得不问自己，我对数据的需求有多糟糕，并确保在我拥有数据后能很好地利用它，然后再努力让它发挥作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:20:11.003

有更多创造性的方法来实现我认为你正在努力的目标。与其根据*部分*来思考，不如考虑*上下文*。如果一个链接驻留在 ap 标签中并带有相当数量的附加文本，我们可以推断它是一篇文章的一部分，而不是一组链接。

结合一组这些推论，增加权重，你就可以开始构建可以微调的东西了。

# c# - 为什么 C# 默认不使用算术溢出检查？

> ID：13259408
> 
> 赞同：16
> 
> 时间：2012-11-06T21:05:43.937
> 
> 标签：c#, math, overflow, checked

> **可能重复：**
> [为什么默认情况下语言不会在整数溢出时引发错误？](https://stackoverflow.com/questions/103654/why-dont-languages-raise-errors-on-integer-overflow-by-default)

**为什么 C# 默认不使用算术溢出检查？**

我认为在发生这种情况时发生异常通常会更好，这样错误就不会被掩盖。我知道利用发生的“包装”行为有时会很有用，但是`unchecked`在这些情况下可以使用关键字来明确意图。

我希望这个决定是有意做出的，也许是为了增加与其他基于 C 语言的兼容性。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-06T21:34:36.573

C# 语言规范是这样说的：

> 对于未被任何`checked`or`unchecked`运算符或语句包围的非常量表达式（在运行时计算的表达式），默认的溢出检查上下文是`unchecked` 除非外部因素（例如编译器切换和执行环境配置）要求进行计算`checked`。

这种选择的原因可能是性能。我同意这个决定会导致那些不知道“静默”整数溢出的人出错。

如果您的 C# 文件属于 C# 项目文件 ( `*.csproj`)，则该文件包含“默认”溢出检查上下文的配置。要更改它，请参阅[本页](http://msdn.microsoft.com/en-us/library/h25wtyxf.aspx)的在 Visual Studio 开发环境中*设置此编译器选项*。

如果您不使用`.csproj`文件，则可能是从命令行编译所有内容，然后上面的页面会告诉您使用哪个命令行选项来设置默认的溢出检查上下文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:10:18.060

在这里查看我对类似问题的回答：[Best way to handle Integer overflow in C#?](https://stackoverflow.com/questions/2954970/best-way-to-handle-integer-overflow-in-c/2955036#2955036)

> ... 有一个 C# 编译器选项定义了如何处理已检查和未检查之外的表达式：/checked。

默认行为适用于大多数应用程序。对于其他应用程序，严格检查应该是默认设置，有一个编译器选项可以启用这种行为。

# azure - windows azure - 角色被销毁时的事件

> ID：13259410
> 
> 赞同：0
> 
> 时间：2012-11-06T21:05:47.917
> 
> 标签：azure, lifecycle, azure-worker-roles

如果我在工作角色实例中的主循环周围有一个 try/catch，例如当工作角色被取消以进行更新/重新启动时，是否会引发任何异常？

是否有另一种方法可以挂钩“销毁”事件，例如全局 try/catch 处理程序或析构函数？（当然这就是幕后任何实例周围的情况，因此它们可以将实例与环境隔离）

工作人员/Web 角色实例的整体生命周期事件是什么？

总是说 Azure 是一个防故障且稳定的平台，但也有人说实例可以随时消失。如何确保代码的某些“关键”部分不会被环境中断，并且会不间断地完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:17:38.420

当角色以有序的方式被取消时，文件`OnStop`中的方法`workerrole.cs`将被调用；

[MSDN 链接](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx)

```
public override void OnStop()
{
    try
    {
        // Add code here that runs when the role instance is to be stopped
    }
    catch (Exception e)
    {
        Trace.WriteLine("Exception during OnStop: " + e.ToString());
        // Take other action as needed.
    }
} 
```

但是，我确实认为您的 try catch 足以解决任何非优雅的问题。;)

# visual-studio-2010 - 从矩形绘制比例图像

> ID：13259414
> 
> 赞同：0
> 
> 时间：2012-11-06T21:06:01.700
> 
> 标签：visual-studio-2010, graphics, c++-cli, buffer, picturebox

我正在为我的大学 C++ 期末考试编写一个交付程序。我已经下载了高清 googlemaps 屏幕截图，但在我的面板上绘制它时遇到了一个大问题。我创建一个矩形作为缩放，仅绘制图像的那部分。但我的代码似乎没有这样做。我需要在面板上绘制矩形作为真实图片的比例图像，因为我将进行缩放，并将地图作为谷歌地图移动，所以我需要控制矩形的大小。当我运行这段代码时，它只显示了一半的图像。

```
anchoImagen = PB_Mapa->Width/zoom; // zoom=1
altoImagen =  PB_Mapa->Height/zoom; 
Graphics ^g = this->P_Mapa->CreateGraphics();

int gWidth = (int)g->VisibleClipBounds.Width;
int gHeight = (int)g->VisibleClipBounds.Height;
BufferedGraphicsContext ^espacioBuffer = BufferedGraphicsManager::Current;

// Colocamos el tamaño máximo del Buffer 
// el +1 es para evitar errores de memoria.
espacioBuffer->MaximumBuffer = System::Drawing::Size( gWidth + 1, gHeight + 1 );

// Creamos un canvas dentro del espacio del buffer utilizando el canvas
// del formulario
BufferedGraphics ^buffer = espacioBuffer->Allocate(g, Drawing::Rectangle(0, 0, gWidth, gHeight));
buffer->Graphics->Clear(Color::White); 

// Declaramos un rectangulo con las dimensiones del pedazo del sprite a utilizar
Bitmap^ imgTransparente = gcnew Bitmap( PB_Mapa->Image);
Drawing::Rectangle porcionAUsar = Drawing::Rectangle(x,y,anchoImagen,altoImagen);

// Dibujamos la imagen en la posicion 
buffer->Graphics->DrawImage(imgTransparente, 0,0, porcionAUsar, GraphicsUnit::Pixel);

buffer->Render(g);

// Limpiamos la memoria reservada
delete buffer;
delete espacioBuffer;
delete g; 
```

# android - jquery mobile changepage首先切换到错误页面

> ID：13259415
> 
> 赞同：0
> 
> 时间：2012-11-06T21:06:02.137
> 
> 标签：android, jquery, cordova, jquery-mobile

我正在使用 jquery mobile 编写 phonegap 应用程序。

这是一个非常大的应用程序，所以我无法发布我所有的 JavaScript 代码。但我的应用程序中有一个谷歌地图，它有覆盖按钮，如果附加了一个在我按下按钮时执行的功能。通常，它应该只链接到 ID 为 #list 的页面。

```
$.mobile.changePage("#list", {
    transition: "slide"
}); 
```

该应用程序具有这样的导航

主页->地图->列表

现在当我点击上面代码运行的地图上的按钮时，它应该只是进入列表页面，但它首先进入主页，然后进入列表页面，这看起来很糟糕，而且当我按下后退按钮时返回主页，而不是地图页面。

有人见过这个问题吗？

一些信息：

安卓2.3

HTC渴望高清

jQuery 1.8

jQuery移动1.2

电话间隙 2.x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:45:53.633

问题是我两次启动了phonegap！

# azure - 升级到 Azure SDK 1.8 并且 DiagnosticMonitor.Start(..) 失败

> ID：13259418
> 
> 赞同：5
> 
> 时间：2012-11-06T21:06:16.823
> 
> 标签：azure

我将 Azure SDK 升级为使用 1.8 版，现在编译时出现以下错误。

> 错误 CS0012：“Microsoft.WindowsAzure.CloudStorageAccount”类型在未引用的程序集中定义。您必须添加对程序集“Microsoft.WindowsAzure.StorageClient, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35”的引用。

我的代码代码如下所示：

```
DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", diagConfig); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T18:44:47.063

结果他们使用 SDK 1.8 将存储库升级到了 2.0，但使诊断程序依赖于存储库 1.7。所以陷入了一个奇怪的情况，花时间更改代码以使用 2.0（在[http://blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/windows- azure-storage-client-library-2-0-break-changes-amp-migration-guide.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/windows-azure-storage-client-library-2-0-breaking-changes-amp-migration-guide.aspx)），但仍然必须参考旧版本才能使诊断程序仍然工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T21:09:24.170

我需要手动引用“Microsoft SDKs\Windows Azure.NET SDK\2012-10\Microsoft.WindowsAzure.StorageClient.dll”。此 DLL 报告的版本是 1.7.0.0 版本，即使它位于 2012-10 文件夹中。

# css - 如何将指南针与祝福结合起来？

> ID：13259419
> 
> 赞同：8
> 
> 时间：2012-11-06T21:06:21.303
> 
> 标签：css, node.js, compass-sass, bless

我正在做一个 Compass 项目，我最终的 css 输出是巨大的，所以它需要得到[祝福](http://blesscss.com/)。

我正在使用 Codekit 来编译我的 SCSS 文件，它具有用于 less 和 sass 文件的 bless 选项，但不幸的是，此选项似乎不适用于 compass 项目（顺便说一句，没有解决问题的解决方法[https://github .com/bdkjones/CodeKit/issues/163](https://github.com/bdkjones/CodeKit/issues/163)）

在编译过程之后是否有另一种方法可以自动执行此操作？是不是可以用nodejs看css文件然后祝福呢？

==================================================== ==

**更新**

我不再使用 Codekit 我使用 Grunt 来构建项目资产，它就像一个魅力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T22:37:03.147

好吧，似乎使用[此参考](http://compass-style.org/help/tutorials/configuration-reference/)，您可以简单地执行以下操作：

```
on_stylesheet_saved do |filename|
    system('blessc ' + File.basename(filename))
end 
```

安装[Bless](http://blesscss.com/)后。

它所做的只是在编译 Compass 文件后附加该事件 :) 享受

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:47:12.777

这适用于常规编译命令，但在您观看时不起作用。Bless 完成后，watch 过程结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T15:18:33.910

我发现 blessc 不会执行，我会得到以下两个错误之一：

> config.rb：没有这样的文件或目录 - blessc（无论文件名）

或者

> env：节点：没有这样的文件或目录

事实证明这是因为 blessc/node.js 安装在 /usr/local/bin 中，而这不在 ruby​​ exec (/usr/bin:/bin:/usr/sbin:/sbin) 的 PATH 变量中。以下代码有效：

```
on_stylesheet_saved do |filename|
  exec('PATH=$PATH:/usr/local/bin; blessc ' + filename + ' -f')
end 
```

编辑添加：如果在此之后您收到错误说文件不是来自 bless 的 css，请检查您的文件的绝对路径是否包含空格。您可以通过执行以下操作来转义空白：

```
on_stylesheet_saved do |filename|
  exec('PATH=$PATH:/usr/local/bin; blessc ' + (filename.gsub! ' ', '\ ') + ' -f')
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-21T10:43:29.163

您可以尝试以下代码块，我对[Julian Xhokaxhiu](https://stackoverflow.com/users/1518095/julian-xhokaxhiu)的回答进行了一些更改：

```
on_stylesheet_saved do |filename|
  begin
    puts "Counting number of selector in :: " + filename
    result = system('blessc',filename,'-f')

    if not result
      Kernel.exit(false)
    else
      puts "Blessed the file to support Older version of IE."
    end

  rescue Exception => e
    puts "Please install bless.\nsudo npm install -g bless."
    Kernel.exit(false)
  end
end 
```

# c# - 将 GridView 导出到 Excel

> ID：13259420
> 
> 赞同：0
> 
> 时间：2012-11-06T21:06:23.347
> 
> 标签：c#, asp.net, excel, gridview

我正在尝试将我的 GridView 导出为 2010 Excel 文件`.xlsx`格式。它适用于`.xls`我想知道是否有人可以帮助我。这是我到目前为止所拥有的：

```
protected void Button2_Click(object sender, EventArgs e)
    {
        Response.Clear();
        Response.Buffer = true;
        Response.AddHeader("content-disposition",
        "attachment;filename=GridViewExport.xls");
        Response.Charset = "";
        Response.ContentType = "application/vnd.xls";
        StringWriter sw = new StringWriter();
        HtmlTextWriter hw = new HtmlTextWriter(sw);
        GridView1.AllowPaging = false;
        GridView1.DataBind();

        GridView1.HeaderRow.Style.Add("background-color", "#FFFFFF");

        GridView1.HeaderRow.Cells[0].Style.Add("background-color", "#D1EEEE");

        GridView1.HeaderRow.Cells[1].Style.Add("background-color", "#D1EEEE");

        GridView1.HeaderRow.Cells[2].Style.Add("background-color", "#D1EEEE");

        GridView1.HeaderRow.Cells[3].Style.Add("background-color", "#D1EEEE");
        GridView1.HeaderRow.Cells[4].Style.Add("background-color", "#D1EEEE");
        GridView1.HeaderRow.Cells[5].Style.Add("background-color", "#D1EEEE");
        GridView1.HeaderRow.Cells[6].Style.Add("background-color", "#D1EEEE");
        GridView1.HeaderRow.Cells[7].Style.Add("background-color", "#D1EEEE");
        GridView1.HeaderRow.Cells[8].Style.Add("background-color", "#D1EEEE");
        for (int i = 0; i < GridView1.Rows.Count; i++)
        {

            GridViewRow row = GridView1.Rows[i];
            row.BackColor = System.Drawing.Color.White;
            row.Attributes.Add("class", "textmode");
            if (i % 2 != 0)
            {

                row.Cells[0].Style.Add("background-color", "#FFFFFF");
                row.Cells[1].Style.Add("background-color", "#FFFFFF");
                row.Cells[2].Style.Add("background-color", "#FFFFFF");
                row.Cells[3].Style.Add("background-color", "#FFFFFF");

            }
        }
        GridView1.RenderControl(hw);
        string style = @"<style> .textmode { mso-number-format:\@; } </style>";
        Response.Write(style);
        Response.Output.Write(sw.ToString());
        Response.Flush();
        Response.End();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T06:44:45.427

看下面的文章，它使用九种方法将数据导出到asp.net上的excel，它必须有帮助：

[9 种将数据导出到 Excel for ASP.NET 的解决方案](http://www.codeproject.com/Articles/164582/8-Solutions-to-Export-Data-to-Excel-for-ASP-NET)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T12:58:35.903

请执行以下操作：

```
 protected void ExportExcel(object sender, EventArgs e)
                {
                    DataTable dt = new DataTable("GridView_Data");
                    foreach(TableCell cell in GridView1.HeaderRow.Cells)
                    {
                        dt.Columns.Add(cell.Text);
                    }
                    foreach (GridViewRow row in GridView1.Rows)
                    {
                        dt.Rows.Add();
                        for (int i=0; i<row.Cells.Count; i++)
                        {
                            dt.Rows[dt.Rows.Count - 1][i] = row.Cells[i].Text;
                        }
                   }
                    using (XLWorkbook wb = new XLWorkbook())
                    {
                        wb.Worksheets.Add(dt);

                        Response.Clear();
                        Response.Buffer = true;
                        Response.Charset = "";
                        Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
                        Response.AddHeader("content-disposition", "attachment;filename=GridView.xlsx");
                        using (MemoryStream MyMemoryStream = new MemoryStream())
                        {
                            wb.SaveAs(MyMemoryStream);
                            MyMemoryStream.WriteTo(Response.OutputStream);
                            Response.Flush();
                            Response.End();
                        }
                    }
                } 
```

这些链接逐步显示了如何做到这一点：

[http://www.aspsnippets.com/Articles/Solution-ASPNet-GridView-Export-to-Excel-The-file-you-are-trying-to-open-is-in-a-different-format-than-指定的文件扩展名.aspx](http://www.aspsnippets.com/Articles/Solution-ASPNet-GridView-Export-to-Excel-The-file-you-are-trying-to-open-is-in-a-different-format-than-specified-by-the-file-extension.aspx)

# visual-c++ - 缺少 Visual C++ MSVCR90.dll

> ID：13259424
> 
> 赞同：0
> 
> 时间：2012-11-06T21:06:41.917
> 
> 标签：visual-c++, msvcr90d.dll

我在 Visual Studio 2008 Professional 中多次看到此错误。“程序无法启动，因为缺少 MSVCR90.dll……”

我在 2 台不同的机器上看到这一点，所有项目文件都在本地驱动器上，除了其中一个在外部 USB 驱动器上。

这个错误有时会通过清理/重建整个项目而消失。在其他时候，我可以通过关闭增量链接来摆脱它。

有没有人有进一步的见解？

谢谢， 贝扎德

# c# - 如何使用 C# 在 GridView 中获取值

> ID：13259426
> 
> 赞同：0
> 
> 时间：2012-11-06T21:06:43.500
> 
> 标签：c#, asp.net

如何访问 GridView 中的值，在这种情况下，我`target_date`在那里有一个值，并希望获取该值并将其转换为字符串。这是我所拥有的：

```
foreach (GridViewRow gr in GridView1.Rows)
{
   CheckBox cb = (CheckBox)gr.FindControl("chkItem");
   if (cb.Checked)
   {
      string strTargetDate = "???"; // TODO
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:09:55.620

使用此代码：

```
foreach (GridViewRow gr in GridView1.Rows)
{
   var cells = gr.Cells;
   CheckBox cb = (CheckBox)gr.FindControl("chkItem");
   if (cb.Checked)
   {
      string strTargetDate = cells[0].Text;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:11:16.023

必须类似于 GridView1.Rows[(int)rowIndex].Cells[(int)ColIndex].Value; 或 GridView1.Rows[(int)rowIndex].Cells[(string)ColName].Value;

# list - wpf mvvm 上次在视图模型代码中使用的列表框

> ID：13259431
> 
> 赞同：0
> 
> 时间：2012-11-06T21:07:02.050
> 
> 标签：list, mvvm, treeview, viewmodel

在 WPF 中使用 MVVM 架构。是否可以从 ViewModel 确定相应视图上最后使用的 ListBox 是哪一个？

我有 2 个 ListBoxes 和一个 TreeView。列表框包含不同类型的列表，我想用它们在 TreeView 中创建复合数据。

我想要一个可以在两个 ListBox 和 TreeView 之间进行选择的版本，因为我也有 TreeView 的操作。

谢谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:25:20.393

为简单起见，您可以在 viewmodel 中引入任何标志，当指定 ListBox 的 SelectedItem 更改时，该标志将打开/关闭。就像是

私人布尔_isFirstBoxWasLastChanged；

```
object FirstListSelectedItem
{
     get { return _fSelectedItem;}
    set {
         _fSelectedItem = value;
         _isFirstBoxWasLastChanged = true;
         RaisePropertyChanged("FirstListSelectedItem");
        }
}

object SecondListSelectedItem
{
     get { return _sSelectedItem;}
    set {
         _sSelectedItem = value;
         _isFirstBoxWasLastChanged = false;
         RaisePropertyChanged("SecondListSelectedItem");
        }
} 
```

俄亥俄州 如果您对 SelectecItem 属性使用绑定，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:38:33.523

您可以检查选定的更改以查看谁是最后一个 ListBox

```
<StackPanel>
    <ListBox ItemsSource="{Binding lstItens}" SelectedItem="{Binding itemSelected}" />
    <ListBox ItemsSource="{Binding lstItensTwo}" SelectedItem="{Binding itemSelectedTwo}" />
</StackPanel> 
```

在您的视图模型上：

```
class ViewModel : INotifyPropertyChanged
{
    private string vmFlagType;
    public string VmFlagType
    {
        get { return vmFlagType; }
        set
        {
            vmFlagType = value;
            OnPropertyChanged("VmFlagType");
        }
    }

    private ObservableCollection<string> lstItens;
    public ObservableCollection<string> LstItens
    {
        get { return lstItens; }
        set
        {
            lstItens = value;
            OnPropertyChanged("LstItens");
        }
    }

    private ObservableCollection<string> lstItensTwo;
    public ObservableCollection<string> LstItensTwo
    {
        get { return lstItensTwo; }
        set
        {
            lstItensTwo = value;
            OnPropertyChanged("LstItensTwo");
        }
    }

    private string itemSelected;
    public string ItemSelected
    {
        get { return itemSelected; }
        set
        {
            itemSelected = value;
            VmFlagType = flagTypes.ListOne;
            OnPropertyChanged("ItemSelected");
        }
    }

    private string itemSelectedTwo;
    public string ItemSelectedTwo
    {
        get { return itemSelectedTwo; }
        set
        {
            itemSelectedTwo = value;
            VmFlagType = flagTypes.ListTwo;
            OnPropertyChanged("ItemSelectedTwo");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

} 
```

只需创建一个类来帮助您确定最后一次更改了哪个列表：

```
public class flagTypes
{
    public const string ListOne = "ListOne";
    public const string ListTwo = "ListTwo";
} 
```

# css - 删除由标签引起的表格单元格中的空间

> ID：13259432
> 
> 赞同：1
> 
> 时间：2012-11-06T21:07:02.390
> 
> 标签：css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:38:47.843

你用什么浏览器试试这个？

我似乎无法复制您的问题。我在 Chrome（版本 22.0.1229.94）和 Firefox（版本 16.0.2）中尝试过：

这是一个 JSfiddle：[http ://tinyurl.com/a9dseu5](http://tinyurl.com/a9dseu5)

你没有完整的代码，所以我假设了一些关于桌子的事情。

我包括了边框，因此可以看到文本和单元格墙之间有多少空间。

我不知道任何可以修改字体中任何额外像素的 CSS（如果这是问题的话），但通常边距和填充应该设置为 0，就像你所做的那样。一旦我可以复制您的问题，那么我将能够更好地找出问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:46:22.517

这不是链接，而是导致问题的空间。在单元格中，元素外有空格字符。空格有一个字体大小，可能是页面的默认字体大小，这增加了高度要求。

最简单的解决方案是在元素`font-size: 10px; font-family: Georgia`的`style`属性中设置。`td`然后，您可以从`td`. 警告：我不是 HTML 电子邮件方面的专家，我无法判断某些电子邮件客户端是否不支持在表格单元格上设置此类属性（但我会觉得这很奇怪）。

另一种解决方案是从`td`元素的内容中删除所有空格字符和换行符。

PS 我发现 10px Georgia 非常难以阅读。这也许不是非法的，但应该是。

# r - R 日期格式，月份和日期为两位数

> ID：13259434
> 
> 赞同：2
> 
> 时间：2012-11-06T21:07:12.393
> 
> 标签：r

我需要将字符日期“2008-1-1”转换为数字 20080101，但我得到的是 200811，有人可以帮我吗？非常感谢你。这是我的代码：

```
year <- c(2008:2012)
mth <- c(1:5)  
day <- c(1:5) 
A <- data.frame(cbind(year,mth,day)) 
date.ch <- as.character(with(A, paste(year, mth, day, sep="-")))
date.n <- as.numeric(with(A, paste(year, mth, day, sep=""))) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T21:21:26.433

您可以使用`as.numeric(format(as.Date(date.ch), '%Y%m%d'))`

```
[1] 20080101 20090202 20100303 20110404 20120505 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T21:13:40.343

正如@Andrie 提到的，`sprintf`这是一个很好的功能：

```
with(A, as.numeric(sprintf("%i%02i%02i", year, mth, day)))
# [1] 20080101 20090202 20100303 20110404 20120505 
```

正如@mplourde 在此后消失在以太中的评论中指出的那样，如果您只有该`date.ch`对象，则可以

```
as.numeric(strftime(date.ch, format = "%Y%m%d")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T21:33:56.577

简单的乘法和加法怎么样？

```
A <- data.frame(cbind(year=rep(2008:2011,6),mth=rep(1:12,2),day=1:24))
with(A, year*1e4 + mth*1e2 + day) 
```

# localization - Tridion 2009 网站翻译蓝图

> ID：13259442
> 
> 赞同：4
> 
> 时间：2012-11-06T21:07:55.563
> 
> 标签：localization, translation, tridion

在 Tridion 中，我试图将我的英文网站翻译成德文网站。我的方法是利用蓝图继承人。英文内容将被保存到一个单独的文件夹中，用于翻译成德语。为了导入我的德语 xml 文件，我需要本地化德语文件夹中的组件。有没有办法本地化整个文件夹、结构组甚至发布组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:36:40.163

在进口德国商品之前，我不得不建议不要大规模这样做。最好在导入时单独本地化项目。这意味着您仍然会在继承的项目（如图像和元数据）中获得更改。除非绝对必要，否则请始终避免本地化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:25:51.623

尽管这个问题的某些部分有点令人费解，并且可能（如果我错了，请原谅我）对 Tridion 的经验有限，但问题本身很清楚：是否可以本地化整个文件夹或结构组甚至出版物？答案是：是的，这是可能的，但只能通过 API。GUI 允许您本地化某个文件夹或结构组中的所有项目，但这不会本地化文件夹/SG 层次结构中更深的项目。您可能需要编写一些代码来实现这一点，可能通过核心服务（这是一个 WCF Web 服务），或者可能使用 GUI 扩展。

附带说明：当你这样做时，你需要确定你想要达到的目标。例如：您要本地化文件夹中的哪些项目类型？我的猜测只是组件，但也许您还想本地化（子）文件夹和其他类型的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T02:11:41.157

We have at least two quick options in the CME to do this.*

## Within an Organization Item

1.  CTRL + A
2.  Localize (right-click or use the button in the `Organize` tab) will then localize all first-level items in an Organizational Item

## Via Search

1.  Do an Advanced Search
2.  Check `Include Subfolders`
3.  Optionally set `Types` to `Components`
4.  CTRL + A
5.  Localize will then localize all selected items

You can also use CTRL+Click to un-select certain items.

**These work in at least SDL Tridion 2011, though I've seen CTRL+A and SHIFT-select work as far back as R5.3.*

As Nick describes, you probably don't want to localize the organizational items themselves. Do consider Quirijn's programmatic options and Chris's warning on reducing localization. See some advice on this on [SDLTridion for Strategists](http://tridionstrategist.blogspot.com/p/sdl-tridion-blueprint-minimizing.html).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T21:23:29.853

当您本地化一个组织项目（例如文件夹）时，它只本地化该项目。我认为您在问是否可以通过本地化其父组织项目来本地化其中包含的所有项目。我相信为此你需要求助于：

1.  一个 GUI 扩展，您可以在其中创建自己的“本地化子项”按钮。
2.  一个事件系统，您可以在其中编写一个事件处理程序，该处理程序将在组织项目本地化时触发，进而递归地本地化其中的任何项目。

# json - Windows 上的 JSON 编辑器的建议？

> ID：13259448
> 
> 赞同：46
> 
> 时间：2012-11-06T21:08:04.483
> 
> 标签：json, editor, formatter

Windows 上有 JSON 编辑器吗？

*   我尝试了 Notepad++，但它只支持带有第三方插件的 JSON，每次打开 JSON 文件时都需要从 Notepad++ 的菜单中调用这些插件。其中一些不能正常工作。

*   我尝试了 Windows 的 Gedit，但默认情况下它不支持 JSON。我找不到对 Windows 版本的支持。

*   我发现的大多数 JSON 服务都是基于 Internet 的（从浏览器中使用）。我无法离线使用它们。

*   浏览器（Chrome 和 Firefox）的所有 JSON 扩展只能读取（格式化或验证）JSON 文件。我找不到任何 JSON 编辑器扩展。我不想使用扩展，因为它们中的大多数（我尝试过的所有扩展）都不适用于本地文件。只有当我从 Internet 下载 JSON 文件时，它们才会启用自己。

提前致谢...

# php - jquery 插件，用于创建带有背景图像的方形图块

> ID：13259451
> 
> 赞同：0
> 
> 时间：2012-11-06T21:08:20.440
> 
> 标签：php, javascript, jquery, css

我需要将图像拆分为用户可以悬停或单击的方形图块。

我应该使用纯 css 还是必须使用 jquery？你有这样做的jQuery插件的例子吗？（我找到[了这个，](http://imanish.co.in/demo/imjqmosaic/)但会对其他建议感兴趣）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:25:10.697

那个插件有点老了，我建议你使用这个，改编自[另一个插件](http://elclanrs.github.com/jq-tiles/)：

**演示：http:** [//jsfiddle.net/elclanrs/HmpGx/](http://jsfiddle.net/elclanrs/HmpGx/)

```
;(function( $, window ) {

  var _defaults = { x: 3, y: 3, gap: 2 };

  $.fn.splitInTiles = function( options ) {

    var o = $.extend( {}, _defaults, options );

    return this.each(function() {

      var $container = $(this),
          width = $container.width(),
          height = $container.height(),
          $img = $container.find('img'),
          n_tiles = o.x * o.y,
          wraps = [], $wraps;

      for ( var i = 0; i < n_tiles; i++ ) {
        wraps.push('<div class="tile"/>');
      }

      $wraps = $( wraps.join('') );
      $img.hide().after( $wraps );

      $wraps.css({
        width: (width / o.x) - o.gap,
        height: (height / o.y) - o.gap,
        marginBottom: o.gap +'px',
        marginRight: o.gap +'px',
        backgroundImage: 'url('+ $img.attr('src') +')'
      });

      $wraps.each(function() {
        var pos = $(this).position();
        $(this).css( 'backgroundPosition', -pos.left +'px '+ -pos.top +'px' );
      });

    });

  };

}( jQuery, window )); 
```

# git - 为什么我不能将此文件添加到 git 中的待处理提交中？

> ID：13259460
> 
> 赞同：0
> 
> 时间：2012-11-06T21:09:11.127
> 
> 标签：git

我有一个子模块`git diff`报告为`dirty`. 因此，我`cd`进入子模块的存储库，检查`git status`并查看一个文件报告为已更改。

```
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   Main.cs 
```

做`git add Main.cs`或`git add --force Main.cs`什么都不做。没有显示任何消息，并且 git status 报告完全相同。

此文件也不匹配`.gitignore`.

我什至不知道从这里去哪里！

`git version 1.7.11.msysgit.1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:19:06.153

尝试其中之一：

*   存储/取消存储它
*   将文件复制到另一个地方，签出它丢弃更改，然后用保存的文件替换新签出的文件
*   如果以上没有任何帮助，请 git rm' 然后再次添加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T22:31:09.433

如果你从命令行运行“git gui”会怎样？

该文件应显示在未暂存列表中。单击文件的图标应将其移至暂存列表。

运行“git status”时是否会暂存 Main.cs 文件？

如果是这样，这也应该是一个简单的解决方法。

# ruby-on-rails - ruby / rails `rescue in debug=': (RuntimeError)

> ID：13259461
> 
> 赞同：1
> 
> 时间：2012-11-06T21:09:11.657
> 
> 标签：ruby-on-rails, ruby, rbenv

> **可能重复：**
> [ruby_threadptr_data_type 错误](https://stackoverflow.com/questions/8251349/ruby-threadptr-data-type-error)

我是 Ruby / Rails 新手，在 Ubuntu 12.04 上设置环境时遇到问题。我正在使用 rbenv（不是 rvm）。这是我安装红宝石的方式：

```
# clone rbenv and the ruby-build plugin
git clone git://github.com/sstephenson/rbenv.git .rbenv
git clone git://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build

# initialize rbenv
export PATH=~/.rbenv/bin:$PATH
rbenv init -

# install ruby 1.9.2
rbenv install 1.9.2-p320
rbenv rehash

# change ruby version to 1.9.2
rbenv global 1.9.2-p320 
```

我正在尝试运行以下 hello-world 应用程序： [https ://github.com/renderedtext/base-app](https://github.com/renderedtext/base-app)

我正在运行网站上推荐的命令

```
bundle install
bundle exec rake db:setup db:test:prepare
bundle exec rake spec
bundle exec rake cucumber 
```

它失败并`bundle exec rake spec`出现以下错误：

```
NOTICE:  CREATE TABLE will create implicit sequence "roles_id_seq" for serial column "roles.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "roles_pkey" for table "roles"
NOTICE:  CREATE TABLE will create implicit sequence "users_id_seq" for serial column "users.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "users_pkey" for table "users"
/home/ubuntu/.rbenv/versions/1.9.2-p320/bin/ruby -S rspec ./spec/models/role_spec.rb ./spec/models/user_spec.rb ./spec/controllers/admin/base_controller_spec.rb ./spec/controllers/admin/users_controller_spec.rb ./spec/controllers/pages_controller_spec.rb ./spec/helpers/pages_helper_spec.rb
No DRb server is running. Running in local process instead ...
/var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:422:in `rescue in debug=':  (RuntimeError)
**************************************************
/var/lib/gems/1.9.1/gems/ruby-debug-base19-0.11.25/lib/ruby_debug.so: undefined symbol: ruby_threadptr_data_type - /var/lib/gems/1.9.1/gems/ruby-debug-base19-0.11.25/lib/ruby_debug.so

If you have it installed as a ruby gem, then you need to either require
'rubygems' or configure the RUBYOPT environment variable with the value
'rubygems'.

/var/lib/gems/1.9.1/gems/ruby-debug-base19-0.11.25/lib/ruby-debug-base.rb:1:in `require'
/var/lib/gems/1.9.1/gems/ruby-debug-base19-0.11.25/lib/ruby-debug-base.rb:1:in `<top (required)>'
/var/lib/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug.rb:5:in `require'
/var/lib/gems/1.9.1/gems/ruby-debug19-0.11.6/cli/ruby-debug.rb:5:in `<top (required)>'
/var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:408:in `require'
/var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:408:in `debug='
/var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration_options.rb:20:in `block in configure'
/var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration_options.rb:19:in `each'
/var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration_options.rb:19:in `configure'
/var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:21:in `run'
/var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:66:in `rescue in run'
/var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:62:in `run'
/var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10:in `block in autorun'
**************************************************
    from /var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:407:in `debug='
    from /var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration_options.rb:20:in `block in configure'
    from /var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration_options.rb:19:in `each'
    from /var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration_options.rb:19:in `configure'
    from /var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:21:in `run'
    from /var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:66:in `rescue in run'
    from /var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:62:in `run'
    from /var/lib/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10:in `block in autorun'
rake aborted!
/home/ubuntu/.rbenv/versions/1.9.2-p320/bin/ruby -S rspec ./spec/models/role_spec.rb ./spec/models/user_spec.rb ./spec/controllers/admin/base_controller_spec.rb ./spec/controllers/admin/users_controller_spec.rb ./spec/controllers/pages_controller_spec.rb ./spec/helpers/pages_helper_spec.rb failed

Tasks: TOP => spec
(See full trace by running task with --trace) 
```

同样重要的是要注意服务器似乎已经安装了 ruby​​ 1.9.1（可能使用 apt-get），但我想使用 1.9.2，这就是我安装 rbenv 的原因。

作为旁注，我也尝试使用 rbenv 和 1.9.3 并得到相同的错误。

我试图研究并应用其他堆栈溢出问题的答案（如[ruby​​_threadptr_data_type error](https://stackoverflow.com/questions/8251349/ruby-threadptr-data-type-error)），但导致了段错误。此外，在我的研究中，大多数答案似乎都与 rvm 和 1.9.3 相关……而不是 rbenv 和 1.9.2

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:26:38.233

似乎 rspec 无法加载 ruby​​-debug。如果你很好奇[，这就是它发生的地方。](https://github.com/rspec/rspec-core/blob/2-10-maintenance/lib/rspec/core/configuration.rb#L408)您可能忘记添加`require 'rubygems'`您的 spec_helper.rb。这样做，让我知道这是否解决了它。

更新：

尝试`gem 'ruby-debug19'`从 Gemfile 中删除并将其替换为`gem 'debugger'`然后`bundle`在控制台中运行并重试。ruby-debug19 没有维护，所以这可能是原因。[更多关于调试器](https://github.com/cldwalker/debugger)。还有指向 ruby​​-debug19 安装说明的链接（如果你觉得幸运的话）。

# spring-mvc - Spring MVC 3 设计

> ID：13259463
> 
> 赞同：2
> 
> 时间：2012-11-06T21:09:24.917
> 
> 标签：spring-mvc

我正在开发一个 Spring MVC3 应用程序，如果链接被禁用，我需要启用/禁用页面中的链接并在链接上提供工具提示（某种帮助）。在许多情况下可以禁用链接，我想知道应该受到影响的各个层。

例如，考虑一个管理员用户尝试续订订阅的测试用例。如果我应该能够续订

1.  我是管理员用户
2.  我的订阅将在未来 30 天内结束
3.  我不会续订自己的订阅。

就我而言，我有控制器，调用一个服务来确定用户是否有资格续订。如果不符合续订条件，请致电其他提供帮助文本的服务。然后视图 (JSP) 启用/禁用链接并显示基于 modelAttribute 的帮助文本。

我的问题是..

1.  如何避免两次调用服务（这似乎再次调用相同的方法）。我可以向 User 模型添加一个属性来保存帮助文本，但我不确定帮助文本是否应该在模型中

2.  如何从属性文件中提取更新帮助文本，而不是在服务中进行硬编码。我在验证器中使用messages.properties，但我不确定如何在@service 中使用它。

3.  我是否应该在视图 (JSP) 中硬编码更新帮助而不是过度设计它？

我在下面有一些代码片段以进一步澄清查询..

```
public class UserController {
   @RequestMapping(value="/viewUserDetails", method=RequestMethod.GET)
      public String userDetails() {
          if(userService.isEligibleToRenew()) {
                user.setEligibleToRenew(true);
                model.addAttribute("renewalHelp", userService.getRenewalHelp())
          }
       }
   }

 @Service
 public class UserService {
    public boolean isEligibleToRenew (User user) {
        if (isAdminUser() && 
            isSubscriptionEndingin30days() && 
            !isRenewingOwnSubscription()) {
        return true;
    }
        return false;
}

public String renewalHelp(User user) {
    if (!isAdminUser ()) {
        return "You must be an admin to renew your subscription";
    }   else if (!isSubscriptionEndingin30days()) {
        return "Your subscription is not expiring in the next 30 days. You cannot renew now"; 
    } else if (isRenewingOwnSubscription()) {
        return "You cannot renew your own subscription";
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:35:06.533

1.  Make your service return an object that contains all the information that it requires, in this way you'll only call the service (with all its logic) only once.

2.  Something I've done in the past (in the object that I mentioned above), is to have an enum that describes the message, and then use Spring or any MVC framework to pick a message from a resource bundle with the localized message.

3.  Maybe, if it keeps things simple and this feature to display different messages is not that important.

About 1, I used that in a big ecommerce app in which we had to display a price with a text. The text could have hints related to discounts (e.g. *now £1.99* or *from £3.99*), so I created an object that described a price with an enum + value. The enum later was localized to a message in the correct locale.

# memory - 在 Assembly 中确认一些内存位置

> ID：13259465
> 
> 赞同：0
> 
> 时间：2012-11-06T21:09:37.043
> 
> 标签：memory, assembly, memory-address

所以我有一个程序，我要求用户输入一个条目，并将其与值“zoidberg”进行比较。如果不是 zoidberg，那么它会告诉用户输入不正确。我没有写它，但我得到了它并告诉我找到漏洞并修复它。

首先，我想确认（或否认他们是否错了）两件事。我还没有完成 asm 编程，所以我不确定这个假设是否正确。

我的假设：

用户入口所在的内存地址是：[esp+410h+var_410]？

入口zoidberg存放的内存地址为：[esp+410h+var_40C]？

我真的不知道那是临时位置还是最终位置。我很混乱。

此外，测试调用将 eax 与自身进行比较，这可能是需要修复的漏洞吗？

```
; Attributes: bp-based frame

public main
main proc near

var_410= dword ptr -410h
var_40C= dword ptr -40Ch
var_400= dword ptr -400h

push    ebp
mov     ebp, esp
and     esp, 0FFFFFFF0h
sub     esp, 410h       ; char *
mov     [esp+410h+var_410], offset anEntry ; "enter an entry to continue:"
call    _puts
lea     eax, [esp+410h+var_400]
mov     [esp+410h+var_410], eax
call    _gets
mov     [esp+410h+var_40C], offset aZoidberg ; "zoidberg"
lea     eax, [esp+410h+var_400]
mov     [esp+410h+var_410], eax
call    _strcmp
test    eax, eax
jnz     short loc_804846E

mov     [esp+410h+var_410], offset aNeedAnEntry?Wh ; "need an entry? why not zoidberg?"
call    _puts
jmp     short loc_804847A

loc_804846E:            ; "your entry is bad, and you should feel"...
mov     [esp+410h+var_410], offset aYourEntryIsBa
call    _puts

loc_804847A:
mov     eax, 0
leave
retn
main endp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:14:56.647

地址 [esp+410h+var_410] 是局部变量。

带有“偏移量”的行主要用字符串的地址加载它们的值

可能 var_400 是要读取的文本的缓冲区。

问题是缓冲区溢出，像往常一样，如果在gets 中输入一个非常大的行会发生什么。

# javascript - mongodb查询到javascript函数

> ID：13259476
> 
> 赞同：2
> 
> 时间：2012-11-06T21:10:25.020
> 
> 标签：javascript, mongodb, closures, mongoose

我想做的是编写一个javascript函数来访问我文件`articles`中定义的模式。`.js`

我已经确定以下查询在 mongodb 终端中有效：

```
 db.articles.ensureIndex( { "comments.user_id" : 1 } )
        db.articles.find( { "comments.user_id" : 987654 } ) // returns all document fields, meaning X and Y including comments

        db.articles.find( { "comments.user_id" : 987654 }, 
{ "title" : 1, "comments.user_id" : 1 })   //some trimming 
```

javascript函数的目的是检索特定用户发表的所有评论，我的以下尝试是否正确对应于上述mongodb查询？风格、语法是否被认为是好的做法？

```
exports.allCommentsByUser = function(userId){ 
   db.articles.ensureIndex({"comments.user_id" : 1})
    var allComments = db.articles.find({"comments.user_id" : userId}, 
                  { "title" : 1, "comments.user_id" : 1 });
    return allComments;
} 
```

**问：此外，我如何将上述 javascript 函数转换为闭包函数？**

注意：我`mongoose`用作包装器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:16:57.827

那是行不通的，因为`allComments`它是一个 Mongoose`Query`对象，而不是结果。您需要向您的方法添加一个回调参数，一旦异步调用完成`allCommentsByUser`，该方法将使用该参数将结果返回给调用者。`find`

```
exports.allCommentsByUser = function(userId, callback){ 
    db.articles.find(
        {"comments.user_id" : userId}, 
        { "title" : 1, "comments.user_id" : 1 }, 
        callback);
}; 
```

方法的使用：

```
x.allCommentsByUser(userId, function (err, articles) {
    if (err) {
        console.error(err);
    } else {
        console.log(articles);
    }
}); 
```

不确定您在第二个关于“闭包函数”的问题中要问什么。

# c# - 双精度 C# 的丢失

> ID：13259482
> 
> 赞同：0
> 
> 时间：2012-11-06T21:10:48.693
> 
> 标签：c#, casting, floating-point, double, naudio

当我使用双打时，我遇到了精度损失，我似乎无法找到精度丢失的地方。我正在编写一个软件合成器，由于某种原因，振荡器（声波发生器）的输入频率在途中的某个地方出现了严重混叠。振荡器应该产生一个三角波形，并且正确的频率被传递给该方法，但是当结果在扬声器中播放时，我可以清楚地听到声音捕捉到不同的频率。

我正在使用 NAudio (http://naudio.codeplex.com/)，这个方法对我想要生成的每个样本运行一次。

这是代码：

```
double counter = 0;
int samplecounter = 0;

public double GetNextTriangle(double frequency)
{
    double samplesperwave = (double)Parent.WaveFormat.SampleRate / frequency;
    double length = (double)samplecounter / samplesperwave;
    if (length.CompareTo(0.25) == -1)
    {
        counter = length * 4.0;
    }
    else if (length.CompareTo(0.75) == -1)
    {
        counter = 1.0 - (length - 0.25) * 4.0;
    }
    else
    {
        counter = -1.0 + (length - 0.75) * 4.0;
    }
    samplecounter++;
    samplecounter = samplecounter > samplesperwave ? 0 : samplecounter;
    return counter;
} 
```

提前致谢！//垫子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:43:35.073

为了更好地了解问题所在，让我们可视化数据。这是每秒 41 个样本的 2 Hz 波的两个周期：

![在此处输入图像描述](../Images/43f49a852d506a53c8825027f121fccd.png)

样本 20 周围有一个光点。看起来样本没有正确拟合三角波。

让我们回顾一下三角波的数学。您正在做的是在离散点对连续函数进行采样。首先，以赫兹为单位定义频率`f`（或）的连续三角波：`1/T`

```
tri(t) =   {  4*f*t,            0     <= t < T/4   }
       =   { -4*f*(t - T/2),    T/4   <= t < 3*T/4 }
       =   {  4*f*(t - T),      3*T/4 <= t < T     }
       =   tri(t - T)  [it's periodic!] 
```

您现在想要对这个连续函数进行采样。所以你定义了一个采样率，`s`（或`1/U`）以每秒样本为单位。现在，第一个`n`样本将是`tri(n*U)`：

```
tri[n] = tri(n*U)
       =   {  4*f*n*U,            0     <= n*U < T/4   }
       =   { -4*f*(n*U - T/2),    T/4   <= n*U < 3*T/4 }
       =   {  4*f*(n*U - T),      3*T/4 <= n*U < T     } 
```

`P = T/U`让我们通过定义归一化周期和归一化频率来稍微清理一下`F = f/s = U/T`：

```
tri[n] =   {  4*F*n,            0     <= n < P/4   }
       =   { -4*F*(n - P/2),    P/4   <= n < 3*P/4 }
       =   {  4*F*(n - P),      3*P/4 <= n < P     } 
```

现在我们得到这个：

![在此处输入图像描述](../Images/c2555595505e2cdadec9463a6c28e66b.png)

不要担心提示处明显的“光点”；它们是意料之中的，你不应该试图避免它们。

这是代码：

```
public static double GetNextTriangle(int sample, double frequency, double sampleRate)
{
    double T = 1d / frequency;
    double U = 1d / sampleRate;

    double P = T / U;
    double F = U / T;

    double n = (double)sample;
    n %= P; // restrict n to the domain [0, P)

    if ((n >= 0) && (n < (P / 4d)))
    {
        return 4d * F * n;
    }
    else if ((n >= (P / 4d)) && (n < (3d * P / 4d)))
    {
        return -4d * F * (n - (P / 2d));
    }
    else // if ((n >= (3d * P / 4d)) && (n < P))
    {
        return 4d * F * (n - P);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:45:46.473

你的问题不是精度之一。问题是您的函数没有定义三角波。每次`samplecounter`重置为 0，函数的下一个返回值是 0。下一次回合长度设置为 0，执行第一个 if 分支，计数器设置为 0。

当遇到这样的问题时，您应该绘制输出。如果你这样做了，你会立即看到你的函数不会产生三角波形。下面是一些代码：

```
static double GetNextTriangle(double frequency)
{
    double samplesperwave = Parent.WaveFormat.SampleRate / frequency;
    double t = samplecounter / samplesperwave;
    counter = 1.0 - 4.0 * Math.Abs(Math.Round(t - 0.25) - (t - 0.25));
    samplecounter++;
    return counter;
} 
```

再次强调，您必须绘制和可视化代码的输出以深入了解其行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T23:47:56.103

这里的浮点运算条件良好。但是如果 1/frequency 不是 1/sampleRate 的倍数，您可能会看到与采样相关的别名问题。

如果可以，试试这个 matlab 代码

```
sampleRate=5000;
frequency=700;
sampleperwave=sampleRate/frequency;
samplecounter=0:floor(sampleperwave);
samplecounter=repmat(samplecounter,1,5);
length=samplecounter/sampleperwave;
wave=-1+4*(length-0.75);
wave(length<0.75)=1-4*(length(length<0.75)-0.25);
wave(length<0.25)=4*length(length<0.25);
figure; stem(wave); hold on; plot(wave,'r') 
```

![不连续性](../Images/d7f498b0a6fae856101a791023417b6b.png)

您可以尝试将 samplecounter 声明为 double 并使用模数递增

```
samplecounter++;
samplecounter = samplecounter % samplesperwave; 
```

或者回到matlab

```
samplecounter=0:length(samplecounter)-1;
samplecounter=rem(samplecounter,sampleperwave);
len=samplecounter/sampleperwave;
wave=-1+4*(len-0.75);
wave(len<0.75)=1-4*(len(len<0.75)-0.25);
wave(len<0.25)=4*len(len<0.25);
figure; stem(wave); hold on; plot(wave,'r') 
```

![混叠](../Images/64d457b59625f9a1c7f25bda0d43ede6.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T22:40:45.280

整个方法似乎是错误的。我会用这样的东西：

```
public class RectWave
{ // triangular wave in range [0,1] with given frequency
    public double GetNextSample()
    {
        if (_ptr == _wave.Length)
            _ptr = 0;
        return _wave[_ptr++];
    }

    public RectWave(int sampleRate = 441000, int period = 20)
    { 
        _sampleRate = sampleRate;
        _period = period;
        _wave = new double[(int)(_sampleRate * _period / 1000.0)];  // one cycle
        _ptr = 0;
        BuildWave();
    }

    private void BuildWave()
    {
        double dt = 1000.0 / _sampleRate;   // in msec
        double slope = 1.0 / (_period / 2.0);   // 1.0 => peek 
        for (int i=0; i <= _wave.Length/2; ++i)
        {
            _wave[i] = _wave[_wave.Length - i - 1] = i * dt * slope; 
        }
    }

    private int _sampleRate;    // in Hz
    private int _period;        // in msec
    private double[] _wave;     // the data
    private int _ptr;           // current sample
} 
```

# c# - 如何检测用户会话何时完成注销

> ID：13259488
> 
> 赞同：0
> 
> 时间：2012-11-06T21:11:17.793
> 
> 标签：c#, session, service, user-profile

我有一个 Windows 服务，它通过覆盖 ServiceBase 对象成功检测到 SessionLogon 和 SessionLogoff（以及大多数其他）。这很好用。但是，这些事件似乎在身份验证后立即触发，并且在用户单击“注销”按钮（或某些自动过程将用户注销）后立即触发。除了知道用户第一次开始登录和第一次开始注销的时间之外，我还需要知道用户何时完成登录和完成注销。我目前正在寻找用户的 shell 进程以开始执行（通常是 explorer.exe）以进行登录，并且大多数情况下运行良好。如果他们正在使用漫游配置文件或正在发生其他登录操作，那么当他们的 shell 启动时，

但是对于注销，这还没有被证明是可靠的。我正在寻找一种方法来准确检测用户的注销何时完成，包括他们的所有个人资料信息何时完成同步或复制以及发生了任何其他注销操作。仅仅看着他们的 shell 程序结束似乎是不够的，因为可能需要几秒钟到几分钟的时间才能发生注销（比如他们是否有漫游配置文件）。

所以简而言之，**我正在寻找一种 C# 中的编程方式来检测何时发生完全注销以及所有配置文件同步或*在 SessionLogoff 事件*触发后您完成了什么。**

我看起来很高大上，但还没有看到有人谈论该事件发生与实际注销完成之间的时间差。

注意：我也不能依赖断开连接事件，因为用户可能会在注销后但在他们的配置文件完成同步/复制你所拥有的内容之前断开连接。我正在寻找一种方法来检测（在它发生后的几秒钟内）完成的注销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:09:11.657

你试过听[SystemEvents.SessionEnded](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.sessionended.aspx)吗？

检查[SessionEndedEventArgs](http://msdn.microsoft.com/en-us/library/microsoft.win32.sessionendedeventargs.aspx)。[原因](http://msdn.microsoft.com/en-us/library/microsoft.win32.sessionendedeventargs.reason.aspx)== [SessionEndReasons](http://msdn.microsoft.com/en-us/library/microsoft.win32.sessionendreasons.aspx) .注销。

# php - MySQL使用来自不存在列的数组

> ID：13259491
> 
> 赞同：0
> 
> 时间：2012-11-06T21:11:22.837
> 
> 标签：php, mysql, forms, select

我不确定我的标题是否用词正确。希望我能以简洁的方式解释这一点。我正在尝试从数据库中选择所有内容：

```
if (! empty ( $fname ) && ! empty ( $lname )) {
        $query5 = "select * from " . $db_prefix . "customer_det where (fname = '" . $fname . "' and lname = '" . $lname . "')";
            $result5 = $mysqli->query ( $query5 ) or die ( mysql_error () );
    } else {
        $query5 = "select * from " . $db_prefix . "customer_det where phone = '" . $phone . "'";

        $result5 = $mysqli->query ( $query5 ) or die ( mysql_error () );

    } 
```

然后我的下一条语句基本上说如果 $result5 === NULL 然后插入东西。问题是我是 var_dump($result5) ，它看起来像是在打印出一个数组。

```
object(mysqli_result)#4 (5) { ["current_field"]=> int(0) ["field_count"]=> int(34) ["lengths"]=> NULL ["num_rows"]=> int(0) ["type"]=> int(0) } 
```

基本上我想说的是如何编写 IF $result5 = nonexistent 语句。我在这里寻找的是计数还是 num_rows 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:13:31.837

[mysqli_query()](http://php.net/manual/en/mysqli.query.php)返回一个[mysqli_result 对象](http://www.php.net/manual/en/class.mysqli-result.php)。

您想检查它的属性之一，而不是 for `null`，例如：

```
if ($result5->num_rows == 0) 
```

**注意：**我还鼓励您阅读有关[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)的内容。

# forms - 如何在 Joomla 中实现“从列表中选择一个”表单？

> ID：13259493
> 
> 赞同：4
> 
> 时间：2012-11-06T21:11:46.367
> 
> 标签：forms, joomla, joomla2.5

我正在使用 Joomla 2.5 作为我们项目网站的 CMS。我想要求用户从一组预定义的项目中选择一个独特的选择（更具体地说：从国家列表中选择一个国家），以便将来其他用户无法使用/变灰. 我假设我需要在后台使用某种数据库来跟踪可用项目并存储已经挑选的项目。除了标准的 Joomla 2.5 之外，我还可以访问 RSforms pro，但它似乎无法胜任。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:24:48.863

试试[Joomla MVC 组件创建器](http://www.notwebdesign.com/joomla-component-creator/)。听起来您可以使用标准的 Joomla 列表字段来实现。

# php - Drupal 翻译器只翻译管理员

> ID：13259497
> 
> 赞同：1
> 
> 时间：2012-11-06T21:12:09.580
> 
> 标签：php, drupal, drupal-7, translation, drupal-modules

我有一个正在开发的 drupal 网站，我正在尝试找出为什么我无法翻译实际的页面内容。我在主页上有一个语言选择器，每当您单击一种语言时，它都会更改 Admin-Menu 的语言，但不会更改其他语言。实际页面内容仍为英文。

我不想为每种语言创建单独/单独的页面，因为将有 50 多个页面和大约 16 种不同的语言。我应该去哪里启用实际内容的翻译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:26:56.683

恐怕您必须为每种语言创建一个单独的页面。站点翻译只会处理站点中的静态文本（例如：标签、按钮等）。

这是在 drupal[中构建多语言站点的教程。](http://drupal.org/node/275705)

希望这会有所帮助……穆罕默德。

# c - WinAPI 消息队列示例

> ID：13259499
> 
> 赞同：1
> 
> 时间：2012-11-06T21:12:24.200
> 
> 标签：c, windows, winapi, client-server, message-queue

有谁知道我在哪里可以找到一个简单的客户端/服务器 WinAPI 消息队列示例？

我想创建一个程序，使用消息队列将数据从客户端发送到服务器，但我在网上找不到任何有用的东西。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T08:20:51.257

`WM_COPYDATA`消息可以使用，但只能同步使用。如果不使用`MSMQ`，您必须使用命名共享内存和异步队列的命名信号量来实现自己的消息队列。

# c# - 如何在回发的文字控制中保留用户输入？

> ID：13259505
> 
> 赞同：1
> 
> 时间：2012-11-06T21:12:58.180
> 
> 标签：c#, asp.net, vb.net, visual-studio, webforms

在 Page_Init 上，如果回发，我检查是否单击了名为 Button1 的按钮，如果是，我将 LiteralControl 添加到名为 Panel1 的面板中：

```
Panel1.Controls.Add(new LiteralControl("Enter Code:<input type=\"text\" name=\"txtCode\"></td>")); 
```

如您所见，它只是文本“输入代码：”，后跟一个名为 txtCode 的文本框。

我有第二个按钮（Button2），单击该按钮时，我想检索在 txtCode 中输入的文本：

```
protected void Button2_Click(object sender, EventArgs e)
    {
        foreach (Control c in Panel1.Controls)
        {
            if (c is LiteralControl) ...                
        }
    } 
```

我不知道该怎么做……我怎样才能得到在 txtCode 中输入的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:21:58.260

您始终可以使用*Request.Form*集合：

```
string txtCode = Request.Form["txtCode"]; 
```

它将包含与当前请求一起发布的所有值，无论是否为服务器端控件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:30:20.690

生成的输入在转身（HTTP GET 然后 POST）后不会保持其值，因为它不是具有 ViewState 的 System.Web.UI.Control。所以用户输入的值在表单集合中，您可以尝试从那里获取它（Request.Form），但更简单的方法是在 Init(..) 中添加一个 TextBox。之后，应该在 POST 上加载文本框的 ViewState，您可以在其 Text 属性中访问用户的输入。

在初始化（）中：

```
_MyTextBox = new TextBox();
panel1.Controls.Add(_MyTextBox); 
```

在 Button_Click 中：

```
var value = _MyTextBox.Text ; 
```

# lucene - 搜索大量的apache访问日志

> ID：13259506
> 
> 赞同：0
> 
> 时间：2012-11-06T21:13:05.417
> 
> 标签：lucene

我想索引然后搜索大量的 apache 访问日志。

我正在考虑使用 lucene，我想更好地了解在将数据传递给分析器之前是否需要实现解析器。

我的目标是做很多复合查询。

在将数据传递给分析器之前，您知道如何实现解析器吗？

# ruby-on-rails - NameError：has_many 的未初始化常量通过关系

> ID：13259507
> 
> 赞同：1
> 
> 时间：2012-11-06T21:13:07.397
> 
> 标签：ruby-on-rails, activerecord, has-many-through

我似乎无法做到这一点。我有很多通过关系只是不工作。这是设置：

```
class Group < ActiveRecord::Base
  belongs_to :user

  has_many :groups_phone_numbers, :dependent => :destroy
  has_many :phone_numbers, through: :groups_phone_numbers

  attr_accessible :name
end

class PhoneNumber < ActiveRecord::Base
  belongs_to :user
  has_many :responses

  has_many :groups_phone_numbers
  has_many :groups, through: :groups_phone_numbers

  attr_accessible :label, :number
end

class GroupPhoneNumber < ActiveRecord::Base

  belongs_to :group
  belongs_to :phone_number

end 
```

我已经尝试了复数的所有变体，但无法克服未初始化的错误。我究竟做错了什么？数据库中的表（连接模型）称为 groups_phone_numbers。

精确误差（g 是一个组）：

```
1.9.3p0 :002 > p g.phone_numbers
NameError: uninitialized constant Group::GroupsPhoneNumber 
```

生成连接表的迁移：

```
class CreateGroupPhoneNumbersJoinTable < ActiveRecord::Migration
  def change
    create_table(:groups_phone_numbers) do |t|
      t.references :group
      t.references :phone_number

      t.timestamps
    end
  end
end 
```

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-06T23:43:50.200

只要您实际上不需要 GroupPhoneNumber，has_and_belongs_to_many 可能是您的最佳选择。代码是这样的：

```
class Group < ActiveRecord::Base
  belongs_to :user

  has_and_belongs_to_many :phone_numbers

  attr_accessible :name
end

class PhoneNumber < ActiveRecord::Base
  belongs_to :user
  has_many :responses

  has_and_belongs_to_many :groups

  attr_accessible :label, :number
end

class CreateGroupsPhoneNumbersJoinTable < ActiveRecord::Migration
  def change
    create_table(:groups_phone_numbers, :id => false) do |t|
      t.integer :group_id
      t.integer :phone_number_id
    end
  end
end 
```

# ios - CoreData 更新问题

> ID：13259510
> 
> 赞同：4
> 
> 时间：2012-11-06T21:13:28.800
> 
> 标签：ios, core-data, restkit, nsfetchedresultscontroller

我的应用程序在后台线程中进行更新，然后保存上下文更改。在主要上下文中，有一个与`NSFetchedResultsController`. 一段时间内更新正常工作，但随后引发异常。要检查这一点，我已添加`NSLog(@"%@", [self.controller fetchedObjects]);`到`-controllerDidChangeContent:`. 这是我得到的：

```
"<PRBattle: 0x6d30530> (entity: PRBattle; id: 0x6d319d0 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PRBattle/p2> ; data: {\n    battleId = \"-1\";\n    finishedAt = \"2012-11-06 11:37:36 +0000\";\n    opponent = \"0x6d2f730 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PROpponent/p1>\";\n    opponentScore = nil;\n    score = nil;\n    status = 4;\n})",
"<PRBattle: 0x6d306f0> (entity: PRBattle; id: 0x6d319f0 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PRBattle/p1> ; data: {\n    battleId = \"-1\";\n    finishedAt = \"2012-11-06 11:37:36 +0000\";\n    opponent = \"0x6d2ddb0 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PROpponent/p3>\";\n    opponentScore = nil;\n    score = nil;\n    status = 4;\n})",
"<PRBattle: 0x6d30830> (entity: PRBattle; id: 0x6d31650 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PRBattle/p11> ; data: <fault>)",
"<PRBattle: 0x6d306b0> (entity: PRBattle; id: 0x6d319e0 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PRBattle/p5> ; data: {\n    battleId = 325;\n    finishedAt = nil;\n    opponent = \"0x6d2f730 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PROpponent/p1>\";\n    opponentScore = 91;\n    score = 59;\n    status = 3;\n})",
"<PRBattle: 0x6d30730> (entity: PRBattle; id: 0x6d31a00 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PRBattle/p6> ; data: {\n    battleId = 323;\n    finishedAt = nil;\n    opponent = \"0x6d2ddb0 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PROpponent/p3>\";\n    opponentScore = 0;\n    score = 0;\n    status = 3;\n})",
"<PRBattle: 0x6d307b0> (entity: PRBattle; id: 0x6d31630 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PRBattle/p9> ; data: {\n    battleId = 370;\n    finishedAt = \"2012-11-06 14:24:14 +0000\";\n    opponent = \"0x79a8e90 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PROpponent/p2>\";\n    opponentScore = 180;\n    score = 180;\n    status = 4;\n})",
"<PRBattle: 0x6d307f0> (entity: PRBattle; id: 0x6d31640 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PRBattle/p10> ; data: {\n    battleId = 309;\n    finishedAt = \"2012-11-02 01:19:27 +0000\";\n    opponent = \"0x79a8e90 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PROpponent/p2>\";\n    opponentScore = 120;\n    score = 240;\n    status = 4;\n})",
"<PRBattle: 0x6d30770> (entity: PRBattle; id: 0x6d31620 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PRBattle/p7> ; data: {\n    battleId = 315;\n    finishedAt = \"2012-11-02 02:26:24 +0000\";\n    opponent = \"0x79a8e90 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PROpponent/p2>\";\n    opponentScore = 119;\n    score = 179;\n    status = 4;\n})" 
```

)

此处的故障对象 (0xe972610) 会导致崩溃。我在更新期间和保存之前记录了数据。此对象仅在`updatedObjects`。为什么这个方法可以返回“坏”对象？（此外，在更新期间，该对象几乎每次更新都会受到影响。并且只有在某些通过之后才会变成“坏”）。

PS：我使用 RestKit 来管理 CoreData。

**更新2：**

看起来问题出在`[self.controller fetchedObjects]`枚举中。即使在此方法调用期间，它也被调用`- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller`并且似乎这些对象被修改（我的意思是CoreData 更新尚未完成）。是否可以？

**更新：**

当我做某事时，出现了例外。像这样：

```
for (PRBattle *battle in [self.controller fetchedObjects) {
    switch (battle.statusScalar) {
        case ...
        default:
            [battle willAccessValueForKey:nil];
            NSAssert1(NO, @"Unexpected battle status found: %@", battle);
    }
} 
```

例外是在线`-willAccessValueForKey:`。战斗的标量状态是枚举，即绑定到整数值 1..4。我已经提到了 switch 案例中的所有可能值（上图`default:`）。最后一个有`break;`。所以这个只有在`battle.statusScalar`返回非枚举值时才有可能。

状态标量实现`PRBattle`：

```
- (PRBattleStatuses)statusScalar
{
    [self willAccessValueForKey:@"statusScalar"];
    PRBattleStatuses result = (PRBattleStatuses)[self.status integerValue];
    [self didAccessValueForKey:@"statusScalar"];
    return result;
} 
```

并且`battle.status`有验证规则： - 最小值：1 - 最大值：4 - 默认值：无值

最后一件事 - 调试日志：

```
objc[4664]: EXCEPTIONS: throwing 0x7d33f80 (object 0xe67d2a0, a _NSCoreDataException)
objc[4664]: EXCEPTIONS: searching through frame [ip=0x97b401 sp=0xbfffd9b0] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: catch(id)
objc[4664]: EXCEPTIONS: unwinding through frame [ip=0x97b401 sp=0xbfffd9b0] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: handling exception 0x7d33f60 at 0x97b79f
objc[4664]: EXCEPTIONS: rethrowing current exception
objc[4664]: EXCEPTIONS: searching through frame [ip=0x97b911 sp=0xbfffd9b0] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: searching through frame [ip=0x9ac8b7 sp=0xbfffdc20] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: searching through frame [ip=0x97ee80 sp=0xbfffdc40] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: searching through frame [ip=0x361d0 sp=0xbfffdc70] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: searching through frame [ip=0xa701d8 sp=0xbfffde10] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: catch(id)
objc[4664]: EXCEPTIONS: unwinding through frame [ip=0x97b911 sp=0xbfffd9b0] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: finishing handler
objc[4664]: EXCEPTIONS: searching through frame [ip=0x97b963 sp=0xbfffd9b0] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: searching through frame [ip=0x9ac8b7 sp=0xbfffdc20] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: searching through frame [ip=0x97ee80 sp=0xbfffdc40] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: searching through frame [ip=0x361d0 sp=0xbfffdc70] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: searching through frame [ip=0xa701d8 sp=0xbfffde10] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: catch(id)
objc[4664]: EXCEPTIONS: unwinding through frame [ip=0x97b963 sp=0xbfffd9b0] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: unwinding through frame [ip=0x9ac8b7 sp=0xbfffdc20] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: unwinding through frame [ip=0x97ee80 sp=0xbfffdc40] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: unwinding through frame [ip=0x361d0 sp=0xbfffdc70] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: unwinding through frame [ip=0x3656f sp=0xbfffdc70] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: unwinding through frame [ip=0xa701d8 sp=0xbfffde10] for exception 0x7d33f60
objc[4664]: EXCEPTIONS: handling exception 0x7d33f60 at 0xa701f5
2012-11-07 13:37:55.463 TestApp[4664:fb03] CoreData: error: Serious application error.  An exception was caught from the delegate of NSFetchedResultsController during a call to -controllerDidChangeContent:.  CoreData could not fulfill a fault for '0x6d31650 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PRBattle/p10>' with userInfo {
    NSAffectedObjectsErrorKey =     (
        "<PRBattle: 0x6d30830> (entity: PRBattle; id: 0x6d31650 <x-coredata://882BD521-90CD-4682-B19A-000A4976E471/PRBattle/p10> ; data: <fault>)"
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:01:54.977

崩溃主要原因：“在后台线程中保存容易出错”（http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html//apple_ref/doc/ uid/TP40003385-SW7)。当然，我以前读过这个。但是，RestKit 的问题变得更大了。它适用于“contextForCurrentThread”。因此，您应该获得后台线程的唯一上下文（根据同一文档）。但是你不能从主线程中保存它，除非你直接传递它，因为在主线程中这个方法返回另一个上下文。当我看到这个时，我认为 RestKit 为我解决了这个问题（在“正常”保存期间，而不是来自主线程），但没有。

第二件事是`NSFetchedResultsController`。当你打电话`[self.controller fetchedObjects]`给你时，`-controllerDidChangeContent:`你应该准备好了，这个数组可以及时改变。我拿了这个数组并进行枚举，检索了必要的数据。并且在枚举期间它被改变了（我认为，这是一个`NSMutableArray`返回的机智类型转换`NSArray`- 所以这种行为成为可能）。您永远不会在“默认”行为中看到这一点（当您`objectForIndexPath:`为每个呈现的单元格获取对象时 - 如在 Apple 示例中），但在我的应用程序中，除了包含数据对象外，我还有其他单元格。所以我需要生成自己的存储，而不是直接使用控制器获取的结果。这样我会建议完全避免使用`NSFetchedResultsController`。我已经用简单的`NSManagedObjectDidSaveNotification`观察者替换了它，并且每次都加载数据。

# javascript - 使用 runat=server 进行 document.write 时出现预期的 ')' 错误

> ID：13259514
> 
> 赞同：1
> 
> 时间：2012-11-06T21:13:38.490
> 
> 标签：javascript, asp.net

我有一个需要 JavaScript 函数的页面：

```
document.write('<head id='Head1' runat='server'/>'); 
```

但是，在 IE 中查看页面时，我不断收到“完成但有错误...”消息，并且在查看时，我可以确切地看到问题所在。当我“查看源代码”时，我看到：

```
document.write("<head id="Head1"><link href="/myPage/WebResource.axd?..." type="text/css" rel="stylesheet" /><title>
    test
</title></head>"); 
```

`"<title>"`看起来有些东西在页面标题之后和之后放置了回车符。因此，“）”与左括号不在同一行，这给了我错误。知道如何让这种情况停止发生吗？我个人并不关心消息在 IE 中显示，但不是我的电话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T21:16:26.133

您必须转义正在使用的引号或使用不同的引号。

此外，您正在将服务器端代码与客户端混合。那是行不通的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T21:17:18.200

问题是您的字符串被引号包围，但也包含引号。

```
document.write('<head id="Head1">' +
    '<link href="/myPage/WebResource.axd?..." type="text/css" rel="stylesheet" />' +
    '<title>test</title>' +
    '</head>'); 
```

# cryptography - 实施 CRAM-MD5 是个好主意吗？

> ID：13259518
> 
> 赞同：2
> 
> 时间：2012-11-06T21:13:53.400
> 
> 标签：cryptography, smtp

我正在编写一个 SMTP 服务器并实现了 CRAM-MD5 身份验证。要计算质询响应字符串，我显然需要在服务器上存储一个明文密码。

这背后的原因是什么？这种身份验证机制似乎存在令人难以置信的缺陷，前提是：

*   CRAM-MD5 需要在服务器上存储纯文本密码
*   CRAM-MD5 使用损坏的 MD5

对我来说，CRAM-MD5 确实不如 PLAIN/LOGIN 身份验证安全，前提是始终需要 TLS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:50:49.880

是的，由于密码重用，存储密码，即使是可逆加密的，也比某种加盐哈希更糟糕。可以说，从明文密码（如通过 PBKDF2 或常规加盐哈希）生成一些东西，然后在双方使用它会更安全一些。但是，它需要客户端知道服务器的哈希方案，包括用于此帐户的盐。不管你怎么切，这会给你留下一些与 CRAM-MD5 不兼容的东西，而且不一定更好。

由于这个问题和其他问题，我建议完全忘记 CRAM-MD5。特别是它使用了MD5，被认为是损坏的，并且存在[各种已知的弱点](http://en.wikipedia.org/wiki/CRAM-MD5#Protocol_weaknesses "各种弱点")。最大的是连接没有加密，所以任何人都可以嗅出实际的内容。

更好的答案是只使用 TLS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:57:54.067

你不需要在服务器上存储明文密码，你只需要存储公式的 MD5 上下文，它是专门为此设计的：

```
HMAC(K, M) -> H(K1, H(K2, M)) 
```

请注意，K1 和 K2 始终是哈希的第一个输入，并且始终为 64 字节长，无论密钥/密码的大小如何，还要注意此算法与其他哈希兼容（SHA1、SHA256、...）

来自 RFC6151（2011 年 3 月）

> 在需要抗碰撞性（例如数字签名）的情况下，MD5 不再可接受。其他方式停止使用MD5并不急，如HMAC-MD5

来自 RFC2195（1997 年 9 月）

> 使用 [KEYED-MD5] 中描述的技术对中间结果进行预计算，可以通过存储称为“上下文”的中间结果来避免在服务器系统上显式存储共享秘密

*   [http://www.ietf.org/rfc/rfc2195.txt](http://www.ietf.org/rfc/rfc2195.txt)
*   [http://www.ietf.org/rfc/rfc6151.txt](http://www.ietf.org/rfc/rfc6151.txt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:48:44.090

当然，如果您只想保留不可逆密码作为 CRAM-MD5 的密钥，您可以修改 CRAM-MD5 以使用 PBKDF 函数（例如 PBKDF2）的输出。不过，你需要两面都加盐。

然而，这并不是很有用，因为攻击者可能会直接使用 PBKDF2 的输出作为 CRAM-MD5 的输入。所以唯一的好处是用户的密码不会直接暴露（密码经常被重复使用）。即使是普通登录，强烈建议在服务器上使用 PBKDF2，因为它可以减轻受损数据库的影响。

当然，将 CRAM-MD5 版本与 KDF 一起使用使其成为专有协议，因此互操作性*会*受到影响。

但是，由于检索密码意味着破坏 TLS，因此对于大多数用例来说，PLAIN/LOGIN 应该没问题。

请注意，我不是 CRAM-MD5 方面的专家，我只是快速阅读了 Wikipedia 上的协议。

# css - 防止标签从未知来源继承css样式

> ID：13259520
> 
> 赞同：1
> 
> 时间：2012-11-06T21:14:11.537
> 
> 标签：css, magento, image, inheritance

有没有办法绝对强制内联 html 或 php 不继承？否则我可能需要帮助跟踪代码是如何内联添加的

我正在尝试使用以下代码将 shareasale 跟踪代码添加到 Magento 成功页面：

```
<img src="https://shareasale.com/sale.cfm?tracking=<?php echo $this->getOrderId() ?>&amount=<?php echo $_sub ?>&transtype=sale&merchantID=XXXX" width="1" height="1"> 
```

但是，在渲染页面时，我的模板将其转换为：

```
<img width="0" height="0" style="display: none !important; visibility: hidden !important; opacity: 0 !important; background-position: 1px 1px;" src="https://shareasale.com/sale.cfm?tracking=<<correct number>>&amp;amount=<<correct number>>&amp;transtype=sale&amp;merchantID=<<correct number>>"> 
```

IE：

*   将内联宽度和高度从 1 更改为 0
*   插入 display:none, visibility: hidden - 这会阻止代码工作

基于 chrome 的元素检查器，这些是 element.styles 而不是工作表的一部分，但我不知道它们是如何添加到该图像标签的

* * *

我试图在 php echo 和外部强制上面的 img 代码，并尝试添加 style="display: inline !important;" 但没有区别。我还用 grep 搜索了 'display: none ！重要的'在所有 css、js (javascript) 和模板文件夹中尝试识别源，但无法

* * *

提前感谢任何提示和帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:49:29.070

joequincy 的功劳：也有可能，你有某种类似 AdBlock 的扩展程序吗？大多数像这样的跟踪系统都被这种扩展以各种方式指责，故意破坏它们。– 乔昆西

即关闭广告拦截工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T22:00:36.683

如果您有多个 Javascript 都与同一个标签进行交互，则可能很难找到负责特定更改的脚本。幸运的是，Chrome 和 Firebug 都有允许您在修改给定标签或子树上的属性（例如样式）的任何 Javascript 代码行上暂停脚本执行的工具。我能提供的最佳建议是在 Chrome 中加载页面，然后打开检查器。右键单击您感兴趣的 img 标签并选择 Break on Modification，然后刷新页面并查看断点出现的位置。

# android - 我如何使用 post 方法将数据从 android 发送给我们

> ID：13259522
> 
> 赞同：1
> 
> 时间：2012-11-06T21:14:18.603
> 
> 标签：android, post, http-post

我想使用 post 方法从 android 设备发送一个简单的数据到 asp.net 页面.. 但我不知道如何从 android 请求一个网页！！！

asp页面很好，可以响应数据而没有任何错误..但是android应用程序中的问题...

现在我正在使用这段代码，但它没有用

```
public void postData() throws ClientProtocolException, IOException, Exception {       
    String key = "https://www.itrack.somee.com/post.aspx?id=10&long=123&lat=123&alt=123";
    //URI  uri=new URI(key);

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(key);

    Toast.makeText(this, "here", Toast.LENGTH_LONG).show();
    HttpResponse response = httpclient.execute(httppost);
    Toast.makeText(this,"mm"+response.toString(), Toast.LENGTH_LONG).show();
} 
```

任何帮助......！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:25:49.363

您可以使用该方法创建一个`ArrayList`of`nameValuePairs`并将它们附加到 HttpPost `setEntity`。

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("Var1",Var1_value));
nameValuePairs.add(new BasicNameValuePair("Var2",Var2_value));
//...ect
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("URL_HERE");       
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
HttpResponse response = httpclient.execute(httppost); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:31:19.473

我正在写这篇文章，因为 MrZander 的答案突然出现了......基于@MrZander 的答案，这里有一个例子。如果这可行，请将他的答案标记为已接受。

```
public void postData() throws ClientProtocolException, IOException, Exception {       
    String key = "https://www.itrack.somee.com/post.aspx";
    //URI  uri=new URI(key);

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(key);

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
    nameValuePairs.add(new BasicNameValuePair("id", "10"));
    nameValuePairs.add(new BasicNameValuePair("long", "123"));
    nameValuePairs.add(new BasicNameValuePair("lat", "123"));
    nameValuePairs.add(new BasicNameValuePair("alt", "123"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    Toast.makeText(this, "here", Toast.LENGTH_LONG).show();
    HttpResponse response = httpclient.execute(httppost);
    Toast.makeText(this,"mm"+response.toString(), Toast.LENGTH_LONG).show();
} 
```

* * *

或者更好的是，我相信您可能正在寻找这样的东西？：

```
public void postData(int id, double lat, double lng, double alt) throws ClientProtocolException, IOException, Exception {       
    String key = "https://www.itrack.somee.com/post.aspx";
    //URI  uri=new URI(key);

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(key);

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
    nameValuePairs.add(new BasicNameValuePair("id", "" + id));
    nameValuePairs.add(new BasicNameValuePair("long", String.valueOf(lat));
    nameValuePairs.add(new BasicNameValuePair("lat", String.valueOf(lng));
    nameValuePairs.add(new BasicNameValuePair("alt", String.valueOf(alt)));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    Toast.makeText(this, "here", Toast.LENGTH_LONG).show();
    HttpResponse response = httpclient.execute(httppost);
    Toast.makeText(this,"mm"+response.toString(), Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T21:17:34.970

根据我对 Web 服务的理解，post 方法要求 URL 参数在正文中发送，而不是作为 url 的一部分

在这里`key`，当您需要设置正文时，您的变量以带有帖子数据作为参数的 url 为特色。

`get requests`使用 url 参数 `post requests`使用 headers 和 body

# tortoisesvn - TortoiseSVN 客户端预提交钩子认证失败

> ID：13259527
> 
> 赞同：0
> 
> 时间：2012-11-06T21:15:18.253
> 
> 标签：tortoisesvn

我正在处理客户端预提交挂钩，我的问题是，如果用户没有保存他们的凭据，预提交挂钩就会挂起，当我关闭挂钩的 cmd 时，如果我重试，提交窗口会返回身份验证失败如果没有钩子，它会显示身份验证对话框，询问用户名/密码并正常提交。为什么 SVN 在调用钩子之前不显示身份验证对话框？我怎么能强迫它这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:59:26.683

> 为什么 SVN 在调用钩子之前不显示身份验证对话框？

因为**TortoiseSVN**（原文如此！）不与自由格式应用程序通信，您将其用作客户端预提交挂钩。如果你必须在这些钩子中使用一些经过身份验证的 svn 命令（为什么，顺便说一句？），**你必须**在使用的命令中添加命令行选项

# java - Java中读取CSV的正则表达式

> ID：13259529
> 
> 赞同：4
> 
> 时间：2012-11-06T21:15:26.513
> 
> 标签：java, regex, split, token

> **可能重复：**
> [在 Java 中使用 RegEx 解析 CSV 输入](https://stackoverflow.com/questions/1441556/parsing-csv-input-with-a-regex-in-java)

我有一个输入文件，其中每一行都有以下形式的字符串输入值：

```
 "  ab  cd  " ,    "  efgh,ijk.",  4,"lmno" 
```

IE，

1.  这些词要么用引号引起来，要么没有引号。
2.  开始词和结束词前后的空格是不允许的。

编辑：3.它可以有输入只是用逗号分隔。（`abc,"Hi Mary,Joe",5`）

在java中使用.Split()，我需要一个正则表达式来输出这个：

```
ab  cd
efgh,ijk.
4
lmno 
```

我试过这个：

```
[^",]*[\",] 
```

但这不起作用`"efgh,ijk."`

这是正则表达式测试的链接：[http](http://regexpal.com/) ://regexpal.com/ 我需要一些帮助。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:25:43.933

[演示](http://regex101.com/r/mO6gN3)

正则表达式模式：`(?:\s*(?:\"([^\"]*)\"|([^,]+))\s*,?)+?`

空值更新：`(?:\s*(?:\"([^\"]*)\"|([^,]+))\s*,?|(?<=,)(),?)+?` [DEMO](http://regex101.com/r/iT3cJ6)

它工作的一个例子，我知道它有点 CSV 格式，但只要你不写真的很奇怪的东西，它就会匹配所有的东西。

```
Matcher ma = Pattern.compile("(?:\\s*(?:\\\"([^\\\"]*)\\\"|([^,]+))\\s*,?)+?").matcher("   \"  ab  cd  \" ,    \"  efgh,ijk.\",  4,\"lmno\"");
while (ma.find()) {
    if (ma.group(1) == null) {
        System.out.println(ma.group(2));
    } else {
        System.out.println(ma.group(1));
    }
} 
```

编辑，顺便说一句，如果您希望我们为您提供代码，请不要告诉我们有关正则表达式在线测试器的信息，如果您这样做是因为您知道如何处理正则表达式，如果您不知道该怎么做，请问它也。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T22:28:31.827

我建议找到匹配项，然后对其进行修剪以获得最终结果。

```
Matcher m = Pattern.compile("\\s*(?:\"[^\"]*\"|(?:^|(?<=,))[^,]*)").matcher(s);
while (m.find()) {
  System.out.println(m.group().replaceAll("^\\s*\"?\\s*(.*?)\\s*\"?\\s*$", "$1"));
} 
```

请参阅[此演示](http://ideone.com/rsMIXG)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T21:37:19.287

尝试`split()`使用`(?:^\s*"\s*|\s*"\s*$|\s*"?\s*,\s*"?\s*)`( [demo](http://regex101.com/r/fX5yQ6) ) 调用。

这也将匹配一个字符串中包含的逗号，这在您的情况下是错误的。但是，如果您要使用`split()`. 您可以引入某种方式来转义包含的逗号（如`\,`），这可以很容易地添加到正则表达式中。

否则，您将不得不使用其他一些方法来分解字符串，并且`split()`对您没有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T21:38:24.427

如果您不想使用正则表达式，因为正则表达式暗示它是[“常规”表达式](http://en.wikipedia.org/wiki/Regular_expression#Formal_definition)。“我认为这里有一个模式”不是正则表达式。它们很好，速度很快，而且我只在我完全控制输入正则表达式时才使用它们。

```
//no development environment up, there may be compilation errors.
private static String[] csv(final String input){
  String[] inputArray = input.split(",");
  for(int i =0;i < inputArray.length;i++){
//org.apache.commons.lang.StringUtils
    String value = StringUtils.removeEnd(inputArray[i],"\"");
    value = StringUtils.removeStart(value,"\"");
    value = StringUtils.trim(value);

    inputArray[i] = value;
  }
  return inputArray;
} 
```

# linux - 使用 CRON 作业访问 url？

> ID：13259530
> 
> 赞同：85
> 
> 时间：2012-11-06T21:15:26.760
> 
> 标签：linux, web-applications, web, cpanel, cron-task

我有一个 Web 应用程序，它必须执行重复的任务，发送消息和警报，我已经使用脚本页面在浏览器中加载时执行这些任务，即[http://example.com/tasks.php](http://example.com/tasks.php)，我包括它是通过我的网络应用程序的每个页面中的 iframe 来实现的。

现在我想将其更改为使用 CRON 作业，因为第一种方法可能会导致性能下降，那么我该如何制作访问[http://example.com/tasks.php](http://example.com/tasks.php)的 CRON 作业。但是，我不希望这个 CRON 作业创建输出文件，例如 day.*！

我将应用程序托管在允许通过 cPanel 进行 CRON 作业的共享托管服务上。

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2012-11-06T21:18:06.400

```
* * * * * wget -O - http://yoursite.com/tasks.php >/dev/null 2>&1 
```

那应该对你有用。只要有一个`wget`加载页面的脚本。

Using`-O -`表示网络请求的输出将被发送到 STDOUT（标准输出）

通过添加`>/dev/null`，我们指示标准输出重定向到黑洞。通过添加`2>&1`，我们指示 STDERR（错误）也被发送到 STDOUT，因此所有输出都将被发送到黑洞。（所以它会加载网站，但永远不会在任何地方写入文件）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-11-06T21:25:53.870

您不需要重定向，仅使用

```
* * * * * wget -qO /dev/null http://yoursite.com/tasks.php 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-07-16T05:45:51.053

您可以在此[线程](https://stackoverflow.com/a/20267276/1506848)`curl`中按原样使用

对于懒人：

```
*/5 * * * * curl --request GET 'http://exemple.com/path/check.php?param1=1' 
```

这将每 5 分钟执行一次。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-06T21:30:21.790

您还可以使用本地命令行 php-cli：

```
* * * * * php /local/root/path/to/tasks.php > /dev/null 
```

它更快并减少您的网络服务器的负载。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-04-11T06:29:25.297

**我用这个命令**

```
wget -q -O /dev/null "http://example.com/some/cron/job.php" > /dev/null 2>&1 
```

**定时任务：**

```
* * * * * wget -q -O /dev/null "http://example.com/some/cron/job.php" > /dev/null 2>&1 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-05T11:36:05.177

您可以将其用于带有参数的 url：

```
lynx -dump "http://vps-managed.com/tasks.php?code=23456" 
```

默认情况下，lynx 在所有系统上都可用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-02-09T05:44:13.327

你可以使用这个命令：

```
links https://www.honeymovies.com 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-04-05T06:36:19.607

你可以试试这个：-

```
    wget -q -O - http://www.example.com/ >/dev/null 2>&1

```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-11-05T00:20:30.710

`* * * * * wget --quiet https://example.com/file --output-document=/dev/null`

我发现`--quiet`比 更清晰`-q`，`--output-document=/dev/null`比 更清晰`-O - > /dev/null`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-10T12:51:21.667

这是一个简单的例子。你可以像这样使用它

> wget -q -O - [http://example.com/backup](http://example.com/backup) >/dev/null 2>&1

在开始时，您可以添加您的选项，例如 (*****)。它取决于您的系统要求，您希望每分钟或几小时运行一次等。

# java - 同时关注两个领域

> ID：13259531
> 
> 赞同：3
> 
> 时间：2012-11-06T21:15:33.023
> 
> 标签：java, blackberry, user-interface

我正在开发一个黑莓应用程序，并且在设置初始字段集中时遇到了一些问题（这不是管理器中的第一个字段）。这是屏幕构造函数的一段代码：

```
public class BaseScreen extends MainScreen {

    ...
    public BaseScreen() {

        ...
        //adding fields to attribute _body(Manager) including the field to be focused
        ...

        add(_body)
        _body.setFieldWithFocus(fieldToFocus);

    }
    ...
} 
```

事实证明，**`fieldToFocus`**一旦显示屏幕，该字段就会将自己绘制为焦点。但**`_body`**经理的第一个领域也是如此。这意味着我同时关注两个领域！

我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T08:48:53.327

你能试着替换这个吗：

_body.setFieldWithFocus(fieldToFocus);

有了这个：

fieldToFocus.setFocus();

我很想知道这是否能解决您的问题。

您尝试使用的方法 (setFieldWithFocus()) 不是我过去使用的方法，而且您看到两个焦点字段这一事实是一个有趣的效果。你能告诉使用你看到这个的操作系统和设备（模拟器）吗？

# opengl - 如何在 Open GL 中定义 MODELVIEW 矩阵

> ID：13259532
> 
> 赞同：2
> 
> 时间：2012-11-06T21:15:45.100
> 
> 标签：opengl, model-view, projection-matrix, frustum

我正在做相机校准，我有我的内在和外在参数。我的虚拟摄像机很少，需要为每个摄像机绘制平截头体。我几乎解决了这个问题，找出投影矩阵（m [int] * m [ext] = Projection Matrix），但我仍然不知道如何找出Modelview矩阵......我需要它，用于找到当前的截头角，并绘制相机的局部坐标系。

# c# - 有没有更好的方法将数组拆分为字符串

> ID：13259533
> 
> 赞同：1
> 
> 时间：2012-11-06T21:15:55.050
> 
> 标签：c#

我试图将一个数组传递给一个方法，然后返回一个可用于 SQL WHERE 子句的字符串。我有以下内容，它工作得很好。但是有更好的方法吗？我正在寻找两个结果之一；

1.  `WHERE (ColumnName IN (12, 34, 56, 78, 90))`
2.  `WHERE (ColumnName IN ('12', '34', '56', '78', '90'))`

* * *

```
 public static string setInSearchFilter(string psSearchFilter, string psColumnName, 
        string[] paObjectValues, bool pbIsString)
    {
        string lsDelimiter = "'", lsRetVal = string.Empty, lsObjectValues = string.Empty;

        if (!pbIsString)
        {
            lsDelimiter = string.Empty;
        }

        if (!string.IsNullOrEmpty(psSearchFilter))
        {
            lsRetVal = psSearchFilter + " AND ";
        }

        for (int i = 0; i <= paObjectValues.GetUpperBound(0); i++)
        {
            lsObjectValues += lsDelimiter + paObjectValues[i] + lsDelimiter;

            if (i < paObjectValues.GetUpperBound(0))
            {
                lsObjectValues += ", ";
            }
        }

        return lsRetVal += "(" + psColumnName + " IN (" + lsObjectValues + "))";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:25:51.623

我会为每个选项添加参数（允许查询计划重用和注入安全），或者我会调查“拆分”UDF。或者，更好的是，我会使用 ORM 或 micro-ORM 之类的东西，它们可能经常内置这种类型的功能。例如，使用 LINQ，您通常可以使用数组/列表和包含。或者使用“dapper”，您可以使用 IN 语法的一个微妙变体，它将输入扩展为单独的参数 - 具体来说：如果“bar”参数具有 3 个值，则`where x.Foo in @bar`变为。`where x,Foo in (@bar0, @bar1, @bar2)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:26:28.660

正如评论中所建议的那样`string.Join`：

```
string.Format(
    "({0}" + string.Join("{0},{0}", paObjectValues) + "{0})",
    lsDelimiter 
); 
```

这假设列表中有某些内容，因此如果过滤器集为空，请确保抛出或返回。

您还可以考虑对项目进行某种验证以防止 SQL 注入：

```
if (paObjectValues.Any(item => !int.TryParse(item))) 
    throw new Exception("Items must be numeric"); 
```

# java - 如何在 Java 中维护唯一列表？

> ID：13259535
> 
> 赞同：118
> 
> 时间：2012-11-06T21:16:12.007
> 
> 标签：java, list, distinct-values

如何在 Java 中创建唯一/不同对象（无重复）的列表？

现在我正在`HashMap<String, Integer>`这样做，因为密钥被覆盖，因此最后我们可以得到`HashMap.getKeySet()`哪个是唯一的。但我相信应该有更好的方法来做到这一点，因为这里浪费了价值部分。

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-11-06T21:18:05.053

您可以使用[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)实现：

来自 JAVADoc 的一些信息：

> 不包含**重复元素**的集合。更正式地说，集合不包含一对元素 e1 和 e2 使得 e1.equals(e2)，并且最多包含一个空元素。正如它的名字所暗示的，这个接口模拟了数学集合抽象。
> 
> *注意：*如果将可变对象用作集合元素，则必须非常小心。如果对象的值以影响等于比较的方式更改，而对象是集合中的一个元素，则不指定集合的​​行为。此禁令的一个特殊情况是不允许集合包含自己作为元素。

这些是实现：

*   [哈希集](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)

    此类为基本操作（添加、删除、包含和大小）提供恒定的时间性能，假设哈希函数将元素正确地分散在桶中。迭代这个集合需要的时间与 HashSet 实例的大小（元素的数量）加上支持 HashMap 实例的“容量”（桶的数量）的总和成正比。因此，如果迭代性能很重要，则不要将初始容量设置得太高（或负载因子太低），这一点非常重要。

    迭代 a`HashSet`时，产生的元素的顺序是未定义的。

*   [链接哈希集](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)

    Set 接口的哈希表和链表实现，具有可预测的迭代顺序。此实现与 HashSet 的不同之处在于它维护一个双向链表，该列表贯穿其所有条目。该链表定义了迭代顺序，即元素插入集合的顺序（插入顺序）。请注意，如果将元素重新插入集合中，则插入顺序不受影响。（如果 s.add(e) 被调用，而 s.contains(e) 将在调用之前立即返回 true，则元素 e 被重新插入到集合 s 中。）

    所以，上面代码的输出......

    ```
     Set<Integer> linkedHashSet = new LinkedHashSet<>();
     linkedHashSet.add(3);
     linkedHashSet.add(1);
     linkedHashSet.add(2);

     for (int i : linkedHashSet) {
         System.out.println(i);
     } 
    ```

    ……必然是

    ```
    3
    1
    2 
    ```

*   [树集](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)

    此实现为基本操作（添加、删除和包含）提供有保证的 log(n) 时间成本。默认情况下，迭代返回的元素按它们的“[自然顺序](https://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)”排序，所以上面的代码......

    ```
     Set<Integer> treeSet = new TreeSet<>();
     treeSet.add(3);
     treeSet.add(1);
     treeSet.add(2);

     for (int i : treeSet) {
         System.out.println(i);
     } 
    ```

    ...将输出：

    ```
    1
    2
    3 
    ```

    （您也可以将`Comparator`实例传递给`TreeSet`构造函数，使其以不同的顺序对元素进行排序。）

    请注意，如果要正确实现 Set 接口，集合维护的顺序（无论是否提供显式比较器）必须与 equals 一致。（参见 Comparable 或 Comparator 以获得与 equals 一致的精确定义。）这是因为 Set 接口是根据 equals 操作定义的，但是 TreeSet 实例使用其 compareTo（或 compare）方法执行所有元素比较，所以两个从集合的角度来看，这种方法认为相等的元素是相等的。一个集合的行为是明确定义的，即使它的顺序与equals不一致；它只是不遵守 Set 接口的一般约定。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-12-14T18:23:50.653

我想在这里澄清一些其他人已经提到但没有真正明确说明的原始海报。当你说你想要一个唯一列表时，这就是有序集的定义。Set 接口和 List 接口之间的其他一些关键区别是 List 允许您指定插入索引。所以，问题是你真的需要 List 接口（即为了与 3rd 方库的兼容性等），还是你可以重新设计你的软件来使用 Set 接口？您还必须考虑使用界面做什么。通过索引查找元素重要吗？你期望你的集合中有多少元素？如果你有很多元素，排序重要吗？

如果你真的需要一个只有唯一约束的 List，可以使用 Apache Common Utils 类 org.apache.commons.collections.list.SetUniqueList 为你提供 List 接口和唯一约束。请注意，这会破坏 List 界面。但是，如果您需要按索引查找列表，您将从中获得更好的性能。如果您可以处理 Set 接口，并且您的数据集较小，那么 LinkedHashSet 可能是一个不错的选择。这仅取决于您的软件的设计和意图。

同样，每个集合都有某些优点和缺点。一些快速插入但缓慢读取，一些快速读取但缓慢插入等。花大量时间阅读集合文档以充分了解每个类和接口的更精细细节是有意义的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-06T21:18:29.197

使用`new HashSet<String>` 一个例子：

```
import java.util.HashSet;
import java.util.Set;

public class MainClass {
  public static void main(String args[]) {
    String[] name1 = { "Amy", "Jose", "Jeremy", "Alice", "Patrick" };

    String[] name2 = { "Alan", "Amy", "Jeremy", "Helen", "Alexi" };

    String[] name3 = { "Adel", "Aaron", "Amy", "James", "Alice" };

    Set<String> letter = new HashSet<String>();

    for (int i = 0; i < name1.length; i++)
      letter.add(name1[i]);

    for (int j = 0; j < name2.length; j++)
      letter.add(name2[j]);

    for (int k = 0; k < name3.length; k++)
      letter.add(name3[k]);

    System.out.println(letter.size() + " letters must be sent to: " + letter);

  }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-06-28T07:49:06.343

我不知道这有多有效，但是在简单的上下文中对我有用。

```
List<int> uniqueNumbers = new ArrayList<>();

   public void AddNumberToList(int num)
    {
        if(!uniqueNumbers .contains(num)) {
            uniqueNumbers .add(num);
        }
    } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-06T21:17:13.023

您可以只使用 a[`HashSet<String>`](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)来维护唯一对象的集合。如果`Integer`你的 map 中的值很重要，那么你可以使用`containsKey`maps 的方法来测试你的 key 是否已经在 map 中。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-06T21:17:05.590

`HashSet<String>`（或）任何`Set`实施都可以为您完成这项工作。`Set`不允许重复。

这是HashSet 的[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-06T21:17:01.990

您可能希望使用`java.util.Set<E>`接口的实现类之一，例如`java.util.HashSet<String>` 集合类。

> 不包含重复元素的集合。更正式地说，集合不包含一对元素 e1 和 e2 使得 e1.equals(e2)，并且最多包含一个空元素。正如它的名字所暗示的，这个接口模拟了数学集合抽象。

# java - 仅当实体已真正更改并将更新时才设置 changedby 字段。

> ID：13259540
> 
> 赞同：1
> 
> 时间：2012-11-06T21:16:32.203
> 
> 标签：java, jpa, eclipselink, glassfish-3

在我的客户实体中，我想保存一个 changedByUserId 字段。如果客户的其他字段之一确实发生了变化，我只想设置此字段。如果我总是设置它，我会强制 EntityManager 更新客户表，因为我设置了 changedByUserId 字段。

```
@Entity
@Table....
public class Customer {
    @Id
    private Long cusID;
    @Column
    private String cusNAME;
    @Column
    private Date changed;
    @Column
    private Long changedByUserId;

    @PreUpdate
    private preUpdate() {
        changed = new Date();
        // cannot set changedbyUserId here because no entitymanager 
        // available where i can query the id
    }
} 
```

有人知道如何告诉 EntityManager 不要检查 changedByUserID 字段中的更改吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:24:08.740

您可以创建一个临时的、瞬态的字段，无论实体是否更改，您始终将其设置为用户 ID：

```
@Transient
private Long tempUserId;
@Column
private Long changedByUserId;

@PreUpdate
private preUpdate() {
    changed = new Date();
    changedByUserId = tempUserId;
} 
```

这是实体管理器`@PreUpdate`仅在持久字段之一真正更改时才会执行。

# sass - 使用 sass、compass 和 susy 时在 codekit 上编译错误

> ID：13259541
> 
> 赞同：0
> 
> 时间：2012-11-06T21:16:33.243
> 
> 标签：sass, compass-sass, susy-compass

每当我尝试保存在 codekit 中链接的 .scss 文件时，都会收到以下错误：

“Compass 无法编译项目中的一个或多个文件：

LoadError on line 161 of /Applications/CodeKit.app/Contents/Resources/engines/compass/bin/../lib/compass/configuration/data.rb: no such file to load -- susy 使用 --trace 运行查看完整的回溯”

有谁知道为什么？在我解决这个问题之前，我无法继续。我已尝试更新和卸载/安装所有这些 gem 以及 codekit 本身。

有人可以帮帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T16:30:03.517

你需要在终端中安装 Sass、Compass 和 Susy。现在转到 Codekit 首选项。Languages-> Compass 并在 Advanced Compiler Settings 中选择单选按钮“Use the Compass executable at this path”（/usr/bin/compass）。之后你应该很高兴。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-10T18:55:45.203

Install all gems (yes, susy should be first in place):

```
sudo gem install susy    
sudo gem install compass
sudo gem install sass (not sure if needed but installed it.)
sudo gem install toolkit
sudo gem install compass-normalize
sudo gem install compass-rgbapng 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T20:19:08.650

Codekit 带有 Sass 和 Compass，不需要安装自定义库。

错误消息表明问题出在 Codekit 库中，也许在这里联系 Codekit 开发人员是最好的选择。

# html - 代码验证器没有通过我的输入标签

> ID：13259543
> 
> 赞同：2
> 
> 时间：2012-11-06T21:16:46.433
> 
> 标签：html

这是我的html：

```
<input type="text" name= "favoritemovie"><br/> 
```

知道这个警告在代码验证器中的含义吗？：您可能忽略了关闭一个元素，或者您可能打算“自行关闭”一个元素，即以“/>”而不是“>”结束它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:19:24.243

它的意思正是它所说的意思。您的输入标签未关闭。在标签末尾使用`/>`，就像换行一样。

```
<input type="text" name="favoritemovie" /><br /> 
```

使用 XHTML，您的所有标签都必须关闭。

# php - 没有页脚/页眉 - 扩展类？

> ID：13259545
> 
> 赞同：0
> 
> 时间：2012-11-06T21:16:48.843
> 
> 标签：php, symfony-1.4, fpdf, symfony-plugins

我的 /symfony/lib/fpdf/fpdf.php：

```
//Version: 1.7                                                                 *

define('FPDF_VERSION','1.7');

class FPDF
{
var $page;               // current page number
var $n; 
.... 
```

我的 /symfony/lib/fpdf/extends.php：

```
define('font/');
require('fpdf.php');

class PDF extends FPDF {

    //Page header
        function Header() {
            //Logo
            $this->Image('logo_pb.png', 10, 8, 33);
            //Arial bold 15
            $this->SetFont('Arial', 'B', 15);
            //Move to the right
            $this->Cell(80);
            //Title
            $this->Cell(30, 10, 'Title', 1, 0, 'C');
            //Line break
            $this->Ln(20);
        }

    //Page footer
        function Footer() {
            //Position at 1.5 cm from bottom
            $this->SetY(-15);
            //Arial italic 8
            $this->SetFont('Arial', 'I', 8);
            //Page number
            $this->Cell(0, 10, 'Page ' . $this->PageNo() . '/{nb}', 0, 0, 'C');
        }

    } 
```

我在 some_module/action.class.php 中的操作：

```
$pdf = new FPDF('P', 'cm', 'A4');
$pdf->SetAutoPageBreak(true);

define('EURO', chr(128));
$pdf->AddPage();
...//somecode what is workking
$pdf->AddPage(); 
```

但是没有页眉或页脚。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T23:03:20.160

只需使用`PDF`已配置的类即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T23:06:29.107

您创建一个`PDF`扩展默认类的新`FPDF`类。`$pdf`但是您基于旧类 ( ) 而不是包含您的页眉和页脚`FPDF`的扩展类 ( )实例化一个对象 ( )。`PDF`

所以

```
$pdf = new FPDF('P', 'cm', 'A4'); 
```

应该成为

```
$pdf = new PDF('P', 'cm', 'A4'); 
```

# php - 检查另一个变量是否存在时如何使用一个变量的值

> ID：13259547
> 
> 赞同：2
> 
> 时间：2012-11-06T21:16:53.723
> 
> 标签：php

我希望能够使用 FOR 循环检查最多但通常少于 6 个连续命名的变量的存在，因此：

```
for ($i = 0; $i <= 5; $i++) {
   $vartocheck = "$var_".$i;
   if ($vartocheck) {
      echo $vartocheck." exists!";
   }
} 
```

现在我知道上面的方法不起作用，但我不知道如何通过使用 $i 的值来引用和检查 $var_0 到 $var_5 的存在。

我已经尝试过 isset 和 call_user_func 来构造并返回我所追求的变量名，但到目前为止我还没有成功。

我试图避免使用 eval 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:20:17.020

不要这样做（因为通过名称动态检查变量的存在是错误的），但可以使用例如：

```
isset($$vartocheck); 
```

回应您的评论，这有效：

```
<?php
    $var = 'abc';
    var_dump(isset($$var)); // bool(false)
    $abc = 1;
    var_dump(isset($$var)); // bool(true) 
```

检查 $vartocheck 中是否没有特殊字符（空格等），或者变量是否真的是字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:23:35.223

您可以使用`$$var_name`

修改后的代码版本：

```
for ($i = 0; $i <= 5; $i++) {
   $vartocheck = "var_".$i;
   if (isset($$vartocheck)) {
      echo $vartocheck." exists!";
   }
} 
```

ps：使用数组+1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T21:33:25.240

最直接的方法看起来是：

```
for ($i = 0; $i <= 5; $i++) {
  if (isset(${"var_{$i}"})) {
    echo ${"var_{$i}"}." exists!";
  }
} 
```

注意 ：

```
$hello = 'world';
$world = 'foo';

$$hello === ${$hello} === ${"world"} === $world === 'foo'. 
```

因此，在您的原始代码中，您可以使用：

```
for ($i = 0; $i <= 5; $i++) {
   $vartocheck = "var_".$i;
   if (isset($$vartocheck)) {
      echo '$'.$vartocheck." exists!";
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T21:22:11.163

你可以试试

```
$var_4 = "Test";
for($i = 0; $i <= 5; $i ++) {
    $vartocheck = "var_" . $i;
    if (isset(${$vartocheck})) {
        echo $vartocheck, " exists!";
    }
} 
```

输出

```
var_4 exists! 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T21:24:18.553

不要这样做。按名称动态检查变量的存在是一种不好的做法，但如果必须这样做，可以通过以下方式完成：

```
isset($$vartocheck); 
```

但是，正如@paolo-bergantino 在评论中指出的那样，使用数组来处理这样的事情要好得多。

# caching - 哪个缓存对性能更重要？

> ID：13259550
> 
> 赞同：-1
> 
> 时间：2012-11-06T21:17:02.260
> 
> 标签：caching, memory, hardware

我有一个关于缓存的问题，我不太了解

*   ***考虑一下典型高性能处理器中可以找到的所有缓存。哪一个提高了程序的性能，它只是将数据从一个位置复制到另一个位置？哪些影响很小或没有影响？添加简要说明。***

我能想到的唯一缓存是 L1、L2、L3 缓存。据我了解，L1 缓存的目的是延迟最低，但未命中率最高。L2/L3 缓存速度较慢，但​​未命中率较低。所有这些都提高了程序的性能。如果其中任何一个被取出，要么命中时间增加，要么失手率增加。它们都没有“影响很小或没有影响”。因此，我不确定要写什么。

**编辑：这实际上是我在修订过程中遇到的一个过去的考试问题，如果有任何澄清的话，之前的问题是“你可以在典型的高性能处理器中找到多少个缓存。列出它们并写一句话来解释每个有助于提高性能。”**

也许寄存器也算作缓存？或者也许是主要的记忆？但我看不出这会如何改变任何事情。

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:27:34.550

有专门的缓存可能是您分配的目标。例如，受害者缓存采用由于冲突而从 L1、L2 和 L3 缓存中弹出的关联。这个缓存对程序来说并不是非常有用，但如果删除会增加未命中率。

除此之外，我可以想到“高性能处理器”意味着多核，其中缓存共享成为一个问题，虽然 L1 缓存不应该是共享资源，但共享的 L2 或 L3 缓存可能成为“简单的副本”从一个位置到另一个位置的数据"

[http://en.wikipedia.org/wiki/CPU_cache](http://en.wikipedia.org/wiki/CPU_cache)

# javascript - 由于“script5 访问被拒绝错误”，mootools 无法工作

> ID：13259558
> 
> 赞同：0
> 
> 时间：2012-11-06T21:17:26.087
> 
> 标签：javascript, mootools, joomla2.5

我的 joomla 网站（freeslider sp1）上有三个“内容”幻灯片，javascript 由 mootools 提供支持。在所有浏览器中，它们都可以正常工作，除了 IE。在 IE9 中，我收到以下错误：

> SCRIPT5：访问被拒绝。mootools-core.js，第 483 行字符 2。

我尝试禁用 jQuery，更新*`mootools-core.js`*. 我想在不重写的情况下解决这个问题，*`mootools-core.js`*这超出了我的能力。网址是[http://www.secureamericanow.org/](http://www.secureamericanow.org/)

这个问题一直让我发疯！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:22:25.470

查看 chrome 的控制台：

> *   XMLHttpRequest 无法加载[https://www.secureamericanow.org/index.php?obsstask=cronjob](https://www.secureamericanow.org/index.php?obsstask=cronjob)。Access-Control-Allow-Origin 不允许来源 [http://www.secureamericanow.org 。](http://www.secureamericanow.org)
> *   XHR 完成加载：“http://static.ak.fbcdn.net/rsrc.php/v2/y0/r/yy6VzIs1l_k.js”。像.php:242
> *   不安全的 JavaScript 尝试从 URL http://www.youtube.com/embed/VkYbkx1Cu64?rel=0&autoplay=1 的框架访问具有 URL [http://www.secureamericanow.org/](http://www.youtube.com/embed/VkYbkx1Cu64?rel=0&autoplay=1)[的](http://www.secureamericanow.org/)框架 。域、协议和端口必须匹配。

该页面违反了同源策略。

第一个错误的问题是一个url在https中，另一个是http。他们的 tpo 都是 http 或 https。

# java - 无法在 Selenium 节点上进行测试

> ID：13259560
> 
> 赞同：0
> 
> 时间：2012-11-06T21:17:37.090
> 
> 标签：java, webdriver, selenium-grid

我正在使用 Selenium Grid 进行网页测试。硒集线器：

```
java -jar selenium-server-standalone-2.25.0.jar -role hub 
```

硒节点：

```
java -jar selenium-server-standalone-2.25.0.jar -role node  -hub http://192.168.55.209:4444/grid/register browser browserName=firefox,platform=WINDOWS 
```

并且节点在 Hub 上注册成功。对于我使用的java代码如下：

```
@Before
public void setUp() throws Exception,MalformedURLException, IOException {
    DesiredCapabilities browser = DesiredCapabilities.firefox();
    browser.setPlatform(Platform.WINDOWS);
    try{
    driver=new RemoteWebDriver(new URL("http://192.168.55.209:4444/wd/hub"),browser);
                } finally{
                    if (driver != null) {
                                 driver.quit();
                    }
                } 
```

但是当编译器达到：

```
driver.get(url); 
```

它给了我如下错误消息，我没有发现问题。

```
org.openqa.selenium.remote.UnreachableBrowserException: Error communicating with the remote browser. It may have died.
Build info: version: '2.24.1', revision: '17205', time: '2012-06-19 16:53:24'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_07'
Driver info: driver.version: RemoteWebDriver
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:467)
    at org.openqa.selenium.remote.RemoteWebDriver.get(RemoteWebDriver.java:216)
    at libraries.Globals.login(Globals.java:242)
    at simple.SimplePolicy.simplePolicy(SimplePolicy.java:31)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:47)
    at org.junit.rules.RunRules.evaluate(RunRules.java:18)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.openqa.selenium.WebDriverException: Session ID may not be null
Build info: version: '2.24.1', revision: '17205', time: '2012-06-19 16:53:24'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_07'
Driver info: driver.version: RemoteWebDriver
    at org.openqa.selenium.remote.HttpCommandExecutor$CommandInfo.get(HttpCommandExecutor.java:560)
    at org.openqa.selenium.remote.HttpCommandExecutor$CommandInfo.getMethod(HttpCommandExecutor.java:544)
    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:281)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:446)
    ... 30 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:55:17.747

在您的配置中，您有`browser browserName=firefox`，但您之前忘记了符号“ `-`” `browser`，所以它应该是 : `-browser browserName=firefox`。这可能是个问题；webdriver 没有给出任何错误，但是那个特定的 " `firefox`" 不能与真正的 firefox 浏览器相关联。

# java - 具有相同java的多个按钮的Action vs ActionListener

> ID：13259562
> 
> 赞同：3
> 
> 时间：2012-11-06T21:17:54.667
> 
> 标签：java, action, actionlistener

我想澄清一下我对使用 Action 而不是 ActionListener 的理解。

如果我有多个 JButton，如果单击它们，它们都需要发生相同的功能（例如按钮将被禁用），那么使用 Action 是否更适合于此？

如果是这样，是不是因为您可以通过将 Action 的状态设置为禁用来更改按钮的状态（例如使其禁用）？

使用 actionListener 是不可能的吗？

下面是一些演示上面给出的示例的代码：

```
JButton[] button = new JButton[10];

for(int i = 0; i < 10; i++){
    button[i] = new JButton();
    Action buttonAction = new ButtonAction();
    button[i].setAction(buttonAction);  
}

class ButtonAction extends AbstractAction{
    public void actionPerformed(ActionEvent e){
        setEnabled(false);
    }
} 
```

对不起，如果我弄错了棒子的一端！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T21:20:44.580

根据[Javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/Action.html)：

> 在多个控件可以访问相同功能的情况下，Action 接口为 ActionListener 接口提供了有用的扩展。

所以我同意你的说法，就是这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T21:46:30.253

扩展 AbstractAction 使您能够以相同的方式在代码中的某一点添加其他信息：

```
public class NewFileAction extends AbstractAction
{
 /**
   * 
   */
protected NewFileAction()
{
  super("NewFile");
  this.putValue(NAME, "New File");
  this.putValue(SHORT_DESCRIPTION, "New file");
  this.putValue(LONG_DESCRIPTION, "New file");
  this.putValue(SMALL_ICON,ImageIconFactory.getSmallImageIcon(ImageIconFactory.Option.SUN_New24));
} 
```

然后，相同的信息将自动出现在任何按钮、MenuItem 等上。

对您的示例的评论：通常您不想创建很多动作，例如

```
Action buttonAction = new ButtonAction(); 
```

在你的循环中。您通常会拥有一个 Action 对象并在所有 MenuItems、Buttons 等中重用它。一个典型的例外是您的操作的行为在构造函数中传递的参数上发生变化。

```
Action buttonAction = new ButtonAction(loopCounter); 
```

在这种情况下，许多操作对象可能很有用 - loopCounter 也可能会转到标签等。

# gcc - 如何解释挡泥板的输出？

> ID：13259567
> 
> 赞同：1
> 
> 时间：2012-11-06T21:18:21.670
> 
> 标签：gcc, output

我希望有人解释如何“解密”以下挡泥板输出：

```
mudflap violation 1 (check/write): time=1352235104.713060 ptr=0x61a000 size=20
pc=0x2b12e5f4 location=`connect.c:645:3 (connect_init)'
      [0x613d88]
Nearby object 1: checked region begins 252B after and ends 271B after
mudflap object 0x619f30: name=`malloc region'
bounds=[0x619f00,0x619f04] size=5 area=heap check=0r/0w liveness=0
alloc time=1352235104.712374 pc=0x2b12db34 thread=715976208
      /lib/libmudflapth.so.0(__mf_register+0x80) [0x2b12db34]
Nearby object 2: checked region begins 23121B after and ends 23140B after
mudflap dead object 0x6145d8: name=`calloc region'
bounds=[0x614550,0x6145af] size=96 area=heap-init check=0r/0w liveness=0
alloc time=1352235104.704859 pc=0x2b12db34 thread=715976208
      /lib/libmudflapth.so.0(__mf_register+0x80) [0x2b12db34]
dealloc time=1352235104.711583 pc=0x2b12d498 thread=715976208
number of nearby objects: 2 
```

有人可以逐行引导我吗？目前这没有多大意义：-/ ...

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:27:49.230

第一行为您提供了最重要的数据：

> ... connect.c:645:3 (connect_init)

我会`connect.c`在 function 的第 645 行查看您的源代码`connect_init`。这是发生访问冲突的地方。这不一定是有问题的代码，但它是一个寻找坏代码的好开始。如果此函数是干净的，请尝试评估正在调用`connect_init`的代码以及指针或堆区域的来源。

其他部分似乎识别了一些堆对象（malloc 区域、calloc 区域）。第一个仍在使用中（仅分配时间），第二个已归还给堆（分配和释放时间）。

# arrays - 需要从相关表对象的下拉列表中保存 id

> ID：13259571
> 
> 赞同：0
> 
> 时间：2012-11-06T21:18:31.040
> 
> 标签：arrays, ruby-on-rails-3, forms

我有这个表格可以保存我的数据库中两个表之间的关系

治疗`belongs_to :category`

类别`has_many :treatments`

创建治疗时，它应该保存类别的 ID，并且我希望类别成为下拉列表，这是我的表单代码：

```
<%= form_for(@treatment) do |f| %>  
  <div class="field">
    <select> 
      <% Category.find(:all).each do |cat| %>   
        <option><%= cat.name %></option>  
      <% end %>
    </select>
  </div>

<div class="field">
  <%= f.label :name %><br />
  <%= f.text_field :name %>
</div>

<div class="actions">
  <%= f.submit %>
</div> 
```

好的，所以我能够显示所有类别名称，但我有点迷失了如何`cat.id`使用表单保存

顺便说一句，如果您没有注意到，我对 Rails 很陌生 :)

有什么想法吗 ？

**更新**

这是生成的html

```
<div class="field">
  <label for="treatment_category">Category</label>
  <br>
    <select id="category_category_id" name="category[category_id]">
    <option value="">Velja flokk</option>
    <option value="1">Nudd</option>
    <option value="2">Heilun</option>
    <option value="3">Nálastunga</option>
  </select>
</div> 
```

okey 注意到 html 中的错误已更改`id="treatment_category_id"`，现在在我的显示视图中，我看到与治疗相关的类别，但它的名称看起来像`Category:0x3eb7d90`

这是我的观点，它只是一个基本的脚手架，但我添加了`.name`

```
<p>
 <b>Category:</b>
  <%= @treatment.category.name %>
</p>

<p>
  <b>Name:</b>
  <%= @treatment.name %>
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:22:50.850

使用 HTML SELECT BOX 并将值设置为 id 值，将文本设置为类别名称。如果您需要保存超过 1 个 id，那么您可以使用 javascript 附加一个隐藏的输入，该输入带有 id 的值，以便在发布表单时保存。

# google-apps-script - 图表系列：每个系列一列？

> ID：13259575
> 
> 赞同：0
> 
> 时间：2012-11-06T21:18:38.920
> 
> 标签：google-apps-script, google-visualization

我有一个像这样的数据表：

```
**Col1 (NUMBER) Col2 (STRING) Col3 (NUMBER)
21              A             450
12               B            600** 
```

`Col1`代表天数。我想制作一个折线图，其中 h 轴是`Col1`，然后我想为每个不同的值创建一个系列`Col2`。`Col3`取 v 轴的值。但似乎谷歌希望每个系列都有一个专栏。我应该为值 A 写一列，为 B 写另一列，等等。

有一种方法可以让我像 Excel 女士那样解释吗？

对不起我的英语不好，如果写得不好，请告诉我！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T23:40:13.967

我认为您需要以适合图表的布局重现数据。一种快速而肮脏的方法是使用电子表格公式：

`=QUERY(A:C;"select A, sum(C) where A is not null group by A pivot B")`

[示例电子表格](https://docs.google.com/spreadsheet/ccc?key=0AiZdNQHjqWKqdFJLeUNMNE1vWDJwMkx0aXZPekp3OEE)

...需要注意的是，Col3 中的值将针对 Col1 和 Col2 中的非唯一组合求和。

否则，您可以使用 Javascript 重新创建数据（这可能不那么脏且不那么快）。

# javascript - 文本文件如何逐行发送到浏览器

> ID：13259583
> 
> 赞同：0
> 
> 时间：2012-11-06T21:19:35.720
> 
> 标签：javascript, jquery, python, web-applications, flask

我有一个文本文件，想将其逐行发送到 Web 浏览器。因此，当每一行被读取时，它都会在浏览器中输出。

我认为 JQuery 将是采用的路线，但我从未使用过它，因为客户端需要保持连接打开以接收我将发送的 (1000s) 行。

这意味着我不确定如何呈现 html/javascript 页面。这是我的 python 服务器代码：

```
from flask import Flask,render_template, request

app = Flask(__name__)

@app.route('/_reader')
def reader():
    f = open('/home/ranjeev/Desktop/sample_tweets.dat', 'rb')
    for line in f:
        print line
    return line

@app.route('/')
def index():
    return render_template('index.html')

if __name__ == '__main__':
    app.run(debug=True, port= 8888) 
```

还有我的html代码：

```
{% extends "layout.html" %}
{% block body %}
<script type=text/javascript>
  $(function() {
      $.getJSON($SCRIPT_ROOT + '/_reader', 
       function(data) {
        $("#result").text(data.result);
});
      return false;
    });

</script>
<h1>Coordinates</h1>
<p>
   <span id=result>?</span>
{% endblock %} 
```

我真的很感激帮助，因为这似乎是一个非常复杂的问题，我认为它不应该是这样。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:27:13.860

WebSockets 适合这里：[http ://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)

这将允许您将内容发送回浏览器，使用 JS 获取它并继续在那里处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:38:20.587

我不知道python，所以这将是相当高的水平，但这都是关于客户端-服务器关系的。

浏览器连接不会表现得像一个开放端口。它期望发出请求，并获得 HTTP 结构化响应。HTTP 中没有“流式传输”。

也就是说，通过控制等式的两端，您可以伪造它。这与 JQuery 无关，尽管他们的 AJAX 库可能有用，但不是必需的。

为此，您将每一行视为一个单独的 AJAX 请求。按顺序执行此操作还不错。您的请求将如下所示：

1.  浏览器打开 - Javascript 要求第 1 行
2.  Python 服务器启动，发送第 1 行
3.  浏览器收到第一行 - Javascript 要求第 2 行...等
4.  服务器发送文档结束通知，浏览器停止请求行。

使用 Javascript 完成此任务的绝对最基本的方法如下，我假设您的服务器正在发送 json 对象并将它们编码为 {'number':'value','line':'value'}，并且它正确响应格式为 yourServer/yourService/lineNumber 的 restful 请求

```
var loginUrl = "http://yourServer/yourService/"
var doRequestLine = function(lineNumber){
$.getJSON(loginUrl+lineNumber, function (data) {
               $(document.body).append($("<p>"+data.line+"</p>"))
               if(data.number === "end"){return;}
               doRequestLine(data.number++);
});
} 

doRequestLine(0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T21:39:37.863

在使用的时候[`XMLHttpRequest`](http://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html)，可以`.responseText`在它还在加载的时候读取，就会得到目前已经加载的数据。（您可能想检查末尾是否有部分线，如果有，请将其切断）。

最新标准规定，只要收到更多数据就会`XMLHttpRequest`触发一个`progress`事件，因此您可以侦听该事件并呈现新数据。不幸的是， [Mozilla Firefox](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)或[IE](http://msdn.microsoft.com/en-gb/library/ie/ms535874%28v=vs.85%29.aspx)都没有实现该`progress`事件，因此您只需设置一个计时器并`.responseText`从该计时器进行检查。

在服务器端，您根本不需要任何花哨的东西；只需发送原始文本。（即使只是让 Web 服务器提供 .txt 文件也可以）。

# actionscript-3 - 用于在 AIR/Flex 中跟踪安全沙箱违规的调试技术

> ID：13259585
> 
> 赞同：0
> 
> 时间：2012-11-06T21:19:41.920
> 
> 标签：actionscript-3, apache-flex, air

我继承了一个项目并收到“安全沙盒违规”通知。这是一个复杂的项目，有很多模块、数据绑定、changeWatchers 和很少的文档（又名*一团糟*）。

该项目完全基于桌面（或应该是）。我仍在尝试处理代码。如果我能找到触发此警报通知的位置/内容，我可以修复它，但到目前为止我还没有任何线索。

是否有用于跟踪 AIR/Flex 中的安全沙箱违规的调试技术？

这是我收到的错误通知：

> *** 安全沙箱违规 *** SecurityDomain 'file:///Users/Red/Documents/02%20Commercial%20Work/Books/Demo/Time/EventBitmaps/4M_01.png' 试图访问不兼容的上下文 'app:/Colors.swf'

# email - 使用 SharePoint 2010 为电子邮件通知创建工作流

> ID：13259586
> 
> 赞同：3
> 
> 时间：2012-11-06T21:19:42.127
> 
> 标签：email, sharepoint-2010, notifications, workflow

每次修改内容时，我都必须创建一个工作流程来创建电子邮件通知。电子邮件应该发送给一组指定的所有者和发布者。有人可以指导我完成这些步骤吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:33:42.147

您需要在 SharePoint Designer 2010 中创建工作流，并在编辑项目时设置工作流启动选项。在工作流命令的工作流设计器中，双击电子邮件并进行配置。

[http://office.microsoft.com/en-ca/sharepoint-designer-help/introduction-to-designing-and-customizing-workflows-HA101859249.aspx](http://office.microsoft.com/en-ca/sharepoint-designer-help/introduction-to-designing-and-customizing-workflows-HA101859249.aspx)

# javascript - 在部分导轨内使用 javascript .click

> ID：13259587
> 
> 赞同：0
> 
> 时间：2012-11-06T21:19:43.700
> 
> 标签：javascript, jquery, ruby-on-rails-3, partial, renderpartial

我有一个javascript点击函数，每次点击我的文本框时都会调用它，但是由于某种原因，它仅在文本框位于主页内时才有效，当我将文本框移动到部分时，我点击它时没有任何反应. 有谁知道如何使点击事件在部分内部工作？

我的 users.js.coffee 文件

```
$ ->
  $("form[data-update-target]").live "ajax:success", (evt, data) ->
    target = $(this).data("update-target")
  $("#" + target).html data

  $("input.submit").click ->
    $(this).parent().submit()
    true

  $("#datepicker").click ->
    alert "hello world" 
```

用户的新页面

```
<%= form_tag({:controller => 'users', :action => 'preview'}, :remote => true, :'data-update-target' => 'update-container') do %>
  <%= radio_button_tag(:page_type, 'event', false, :class => 'submit') %>
  <%= label_tag(:page_type, "Event") %>
  <br/>
<% end %>
<div id="update-container">
</div> 
```

用户控制器

```
def preview
  if params[:page_type] == "event"
    @event = Event.new
    render :partial => 'event', :object => @event
  end
end 
```

事件部分称为 _event.html.erb

```
<%= form_for(@event) do |f| %>
  <div class="field">
    <%= f.label :name %>
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :description %>
    <%= f.text_area :description %>
  </div>
  <div class="field">
    <%= f.label :start %>
    <input id="datepicker" type="text" value="" name="event_start">
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

生成的html

```
<body>
<p id="notice"></p>
<p id="alert"></p>
  <h1>New page</h1>

<form accept-charset="UTF-8" action="/users/preview" data-remote="true" data-update-target="update-container" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="iIodOQohxJgk1P5ZmFrbgw4W/h4cq45LBxGN3xjyREk=" /></div>

<input class="submit" id="page_type_event" name="page_type" type="radio" value="event" />
<label for="page_type">Event</label>
<br/>
</form><div id="update-container">
</div>
<input id="datepicker" type="text" value="" name="event_start">

<a href="/users">Back</a>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:15:00.580

快速回答：提交类没有输入。您要么想将提交类添加到正确的输入元素，要么将选择器更改为类似`$('input[type=submit]')`

另一方面，如果我只将一个类用于 js 行为，我通常`js-`会在名称前面加上，因此设计者知道他不应该删除它（或将其用于样式）。

但是，如果问题是因为页面加载时没有呈现日期选择器（例如，稍后使用 javascript 添加），则需要以不同的方式声明回调。

选择自第一次呈现页面以来存在的日期选择器的父级（如果没有，您可以使用`document`）。在这种情况下，父母是`div#update-container`：

```
$("#update_-container").on 'click', '#datepicker', (evt) ->
    # code here.... 
```

有关更多信息，请查看[官方 jQuery 文档](http://api.jquery.com/on/)

# php - 添加ajax控件后css未显示在日历中

> ID：13259588
> 
> 赞同：1
> 
> 时间：2012-11-06T21:19:44.897
> 
> 标签：php, css, ajax

我正在尝试在 php 中制作日历，我已经完成了第一部分并获得了布局和信息，我现在正在尝试添加上个月和下个月，并且由于某种原因 css 已经消失。我正在关注一个教程

显示的唯一信息是上个月和下个月按钮以及当前月份。我在 xampp 的 htdocs 文件夹中有所有三个文件。我不知道怎么了:(

这是查看所有内容的文件

show_calendar.php

```
<!DOCTYPE html>
<html>
<head>
<link href="calCss.css" rel="stylesheet" type="text/css" media="all" />

<script language="JavaScript" type="text/javascript">
function initialCalendar(){
var hr = new XMLHttpRequest();
var url = "calendar_start.php";
var currentTime = new Date();
var month = currentTime.getMonth() + 1;
var year = currentTime.getFullYear();
showmonth = month;
showyear = year;
var vars = "showmonth="+showmonth+"&showyear="+showyear;
hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
hr.onreadystatechange = function() {
    if(hr.readyState == 4 && hr.status == 200) {
        var return_data = hr.responseText;
        document.getElementById("showCalendar").innerHTML = return_data;
    }
}
hr.send(vars);
document.getElementById("showCalendar").innerHTML = "processing...";
}
</script>

<script language="JavaScript" type="text/javascript">
function next_month(){
var nextmonth = showmonth + 1;
if (nextmonth > 12) {
   nextmonth = 1;
   showyear = showyear + 1;
 }
 showmonth = nextmonth;
 var hr = new XMLHttpRequest();
var url = "calendar_start.php";
var vars = "showmonth="+showmonth+"&showyear="+showyear;
hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
hr.onreadystatechange = function() {
    if(hr.readyState == 4 && hr.status == 200) {
        var return_data = hr.responseText;
        document.getElementById("showCalendar").innerHTML = return_data;
    }
}
hr.send(vars);
document.getElementById("showCalendar").innerHTML = "processing...";
}
</script>

<script language="JavaScript" type="text/javascript">
function last_month(){

var lastmonth = showmonth - 1;
if (lastmonth < 1) {
   lastmonth = 12;
   showyear = showyear - 1;
 }
 showmonth = lastmonth;

 var hr = new XMLHttpRequest();
var url = "calendar_start.php";
var vars = "showmonth="+showmonth+"&showyear="+showyear;
hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
hr.onreadystatechange = function() {
    if(hr.readyState == 4 && hr.status == 200) {
        var return_data = hr.responseText;
        document.getElementById("showCalendar").innerHTML = return_data;
    }
}
hr.send(vars);
document.getElementById("showCalendar").innerHTML = "processing...";
}
</script>

</head>
<body onLoad="initialCalendar();">
<div id="showCalendar"></div>
</body>
</html> 
```

calendar_start.php

```
<?php
$showmonth = $_POST['showmonth'];
$showyear = $_POST['showyear'];
$showmonth = preg_replace('#[^0-9]#i', '', $showmonth);
$showyear = preg_replace('#[^0-9]#i', '', $showyear);

$day_count = cal_days_in_month(CAL_GREGORIAN, $showmonth, $showyear);
$pre_days = date('w', mktime(0,0,0, $showmonth, 1, $showyear));
$post_days = (6 - (date('w', mktime(0,0,0, $showmonth, $day_count,$showyear))));

echo '<div id="calendar_wrap">';
echo '<div class="title_bar">';
echo '<div class="previous_month"><input name="myBtn" type="submit" 
value="Previous Month" onClick="javascript:last_month();"></div';
echo '<div class="show_month">' . $showmonth . '/' . $showyear . '</div>';
echo '<div class="next_month"><input name="myBtn" type="submit" 
value="Next Month" onClick="javascript:next_month();"></div';
echo '</div>';
echo '<div class="week_days">';
echo '<div class="days_of_the_week">Mon</div>';
echo '<div class="days_of_the_week">Tue</div>';
echo '<div class="days_of_the_week">Wed</div>';
echo '<div class="days_of_the_week">Thur</div>';
echo '<div class="days_of_the_week">Fri</div>';
echo '<div class="days_of_the_week">Sat</div>';
echo '<div class="days_of_the_week">Sun</div>';
echo '<div class="clear"></div>';
echo '</div>';

/* Previous Month Filler Days */
if ($pre_days != 0) {
for($i = 1 ; $i<=$pre_days;$i++) {
echo '<div class="non_cal_day"></div>';
}
}

/* Current Month */
for($i=1; $i<= $day_count; $i++) {
echo '<div class="cal_day">';
echo '<div class="day_heading">' . $i . '</div>';
echo '</div>';

}
/* Next Month Filler Days */
if ($post_days != 0) {
for ($i=1; $i<=$post_days; $i++) {
 echo '<div class="non_cal_day"></div>';
}
}
echo '</div>';
?> 
```

这是CSS

calCss.css

```
#calendar_wrap {
width: 924px;
margin-left: auto;
margin-right: auto;
overflow: hidden;
}
.title_bar {
width: 100%; 
height: 30px;
}
.previous_month {
float: left;
width: 308px;
height: 30px;
text-align: left;
}
.show_month {
float: left;
width: 308px;
height: 30px;
text-align: center;
}
.next_month {
float: left;
width: 308px;
height: 30px;
text-align: right;
}
.week_days {
width: 100%;
}       
.days_of_the_week  {
float: left;
width: 14%;
text-align: center;
}      
.cal_day {
position: relative;
float: left;
margin-right: 4px;
margin-bottom: 4px;
width: 128px;
height: 95px;
background-color: #9C9;
}
.day_heading {
position: relative;
float: left;
width: 40px;
height: 16px;
padding: 6px;
color: #000;
font-family: Arial;
font-size: 14px;
}    
.openings {
width: 100%;
clear:left;
text-align: center;
}
.non_cal_day {
position: relative;
float: left;
margin-right: 4px;
margin-bottom: 4px;
width: 128px;
height: 95px;
background-color: #CCC;
}

.clear {
clear: both;
} 
```

任何人都可以看到任何东西吗？任何帮助都会很棒，我需要在谷歌开发者工具中显示什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T01:19:42.830

在您的文件 calendar_start.php 第 14 行和第 17 行中，您没有正确关闭您编写的 div。所以你的回声块会是这样的

```
echo '<div id="calendar_wrap">';
echo '<div class="title_bar">';
echo '<div class="previous_month"><input name="myBtn" type="submit" 
value="Previous Month" onClick="javascript:last_month();"></div>';
echo '<div class="show_month">' . $showmonth . '/' . $showyear . '</div>';
echo '<div class="next_month"><input name="myBtn" type="submit" 
value="Next Month" onClick="javascript:next_month();"></div>';
echo '</div>';
echo '<div class="week_days">';
echo '<div class="days_of_the_week">Mon</div>';
echo '<div class="days_of_the_week">Tue</div>';
echo '<div class="days_of_the_week">Wed</div>';
echo '<div class="days_of_the_week">Thur</div>';
echo '<div class="days_of_the_week">Fri</div>';
echo '<div class="days_of_the_week">Sat</div>';
echo '<div class="days_of_the_week">Sun</div>';
echo '<div class="clear"></div>';
echo '</div>'; 
```

希望这会有所帮助

# sql-server - 从多个表中检索数据并将它们存储在一个面对重复项的表中

> ID：13259594
> 
> 赞同：0
> 
> 时间：2012-11-06T21:19:59.083
> 
> 标签：sql-server, database, data-warehouse

我正在处理一些关键数据检索报告任务，并发现一些困难继续进行。基本上，它属于医疗领域，整个数据分布在几个表中，我无法更改数据库表设计的架构。为了完成我的报告，我需要以下步骤：

```
1- divide the whole report to several parts, for each parts retrieve data by using
several joins. (like for part A can be retrieved by this:
select a1.field1, a2.field2 from a1 left join a2 on a1.fieldA= a2.fieldA ) then I can
got all the data from part A.

2- the same things happened for part B
select b1.field1, b2.field2 from b1 left join b2 on b1.fieldB= b2.fieldB, then I also
get all the data from part B.

3- same case for part C, part D.....and so on. 
```

我划分它们的原因是，对于每个部分，我需要有超过 8 个连接（医疗数据总是很复杂），所以我不能在一个连接中完成所有这些（超过 50 个连接，这是不可能完成的。 ..)

之后，我运行我的 Spring Batch 程序，将 A 部分的所有数据和 b、c 部分的数据插入到一个表中，作为我的最终报告表。问题不是每个部分都有相同的行数，这意味着 A 部分可能会返回 10 行，而 B 部分可能会返回 20 行。由于每个部分的时间条件是相同的（1 天）并且无法更改，所以我想知道如何以最小的开销将所有这些不同的数据部分存储到一个表中。我不想有很多重复，感谢您的大力帮助。

雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:20:00.203

在我看来，您需要的是连接“来自 A 部分的数据”、“来自 B 部分的数据”和“来自 C 部分的数据”。让我们称它们为 da、db 和 dc。da/b/c 中的 num 行不同是完全可以的。但是，当您尝试将它们全部放在最后的单个表中时，显然它们之间存在某种关系。如果没有更好地描述这种关系，就不可能提供更具体的答案。所以我会写下我的想法，你可能已经知道了，但无论如何......

最简单的方法是将 3 个 [inner] 查询的结果连接到更高级别的 [outer] 查询中。

```
select j.x, j.y, j.z
from (
   ' da join db join dc
) j; 
```

如果这是不可能的（由于您所说的加入太多），请尝试以下之一：

1.  创建 3 个单独的[物化视图](http://en.wikipedia.org/wiki/Materialized_view)（da、db 和 dc 各一个）并执行这些视图的连接。物化是可选的（即您也可以使用“普通”视图），但如果在您的数据库中可用，它应该会大大提高性能。
2.  首先对 da/b/c 运行查询，获取数据并将这些数据放入中间表中。在这些表上运行连接。

PS：如果您想对某些数据运行报告（许多/频繁/大型），那么应该适当地设计这些数据，否则您将来会遇到一堆麻烦。

如果您想要更具体的内容，请发布 da/b/c 之间的关系。

# asp-classic - 如何修改活动服务器页面

> ID：13259603
> 
> 赞同：0
> 
> 时间：2012-11-06T21:20:57.950
> 
> 标签：asp-classic

我已经完成了一个 Active Server Page。它在门厅显示器上运行。ASP 正在该显示器上显示会议。我将显示会议限制为 10 个。显示器一次可以显示 5-6 个会议。我想要的是，如果显示充满前 6 次会议，则显示应该“更改”到显示最后 4 次会议的第二页。这应该每 10 秒发生一次。前 6 次会议 10 秒，第 4 次会议 10 秒，依此类推。我怎样才能做到这一点？

到目前为止我的代码：

```
<table cellpadding="0" style="table-layout:fixed;width:800px;">
<tr height="15"> <td colspan="6" class="underline"></td> </tr>
     <colgroup>
    <col  style="width:830px" >
  </colgroup>
    <tr><td> </td></tr>
 </table>

<table cellpadding="0" border = "1" style="background-color:white; dotted black;border-collapse:collapse;table-layout:fixed;width:1270px;">

  <colgroup>
    <col  style="width:445px" >
    <col  style="width:275px" >
    <col  style="width:125px" >
    <col  style="width:125px" >
    <col  style="width:150px" >
    <col  style="width:150px" >
  </colgroup>

  <br></br>

  <tr style="background-color:blue; height="50">
                    <th align="left">Seminartitel</th> 
                    <th align="left">Zusatz-Info</th> 
                    <th align="absmiddle">von</th> 
                    <th align="absmiddle">bis</th> 
                    <th align="absmiddle">Gebäude</th> 
                    <th align="absmiddle">Raum</th> 

  </tr> 
```

```
<%
set rs=Server.CreateObject("ADODB.recordset")
set rsRaum=Server.CreateObject("ADODB.recordset")

rs.Open "select distinct buchung_id, von, bis, abteilung, veranstalter, THEMA, THEMA_ENABLED " & _
        "  from RESERVIERUNGRAUM r  " & _
        "      ,BUCHUNG b  " & _
        " where r.BUCHUNG_ID = b.ID " & _
        "   and von >= convert(date, getdate(), 4) " & _
        "   and von < convert(date, dateadd(day,1, GETDATE()), 4) " & _
        "   and BIS >= getdate() " & _
        "   and STORNO is null  " & _
        " order by von, bis" _
       ,objConn 

' Anzahl der darzustellenden Veranstaltungs-Zeilen
lineMax = 10
lineCount = 1
color = "color1"
do until rs.EOF

  ' Buchungen anzeigen oder nicht

  rsRaum.open "select DISPLAY_ENABLED from Buchung where ID = " & rs("buchung_id"), objConn
            displayanzeige = rsRaum("DISPLAY_ENABLED")
  rsRaum.close

  ' Hole für lfd. Buchung aus erster Reservierung Raum ID und Indikator für Kopplung 
  rsRaum.open "select raum_id, KOPPELBESTUHLUNG_ID from RESERVIERUNGRAUM where buchung_id = " & rs("buchung_id"), objConn
        raum_id = rsRaum("raum_id")
        KOPPELBESTUHLUNG_ID = rsRaum("KOPPELBESTUHLUNG_ID")
  rsRaum.close

   'Gebäude

  rsRaum.open      "select distinct g.BEZEICHNUNG " & _
                   "from GEBAEUDE g, ETAGE e, RAUM r " & _
                   "Where g.ID = e.GEBAEUDE_ID and e.GEBAEUDE_ID = r.GEBAEUDE_ID and r.ID = " & raum_id, objConn

                   GebaeudeBezeichnung = rsRaum("BEZEICHNUNG")

  rsRaum.close

  'Hole Terminal Hinweistext

  rsRaum.open    "select KSTR from Buchung where ID = " & rs("buchung_id"), objConn

                Hinweistext = rsRaum("KSTR")

  rsRaum.close

  ' falls Kopplung, hole ID des "Parent"-Raumes
  if not isNull( KOPPELBESTUHLUNG_ID ) then
    rsRaum.open "select parent_id from KOPPELN where CHILD_ID = " & raum_id, objConn
          if not rsRaum.EOF then
            raum_id = rsRaum("parent_id")
          end if
    rsRaum.close
  end if

  ' hole Raum Details
  rsRaum.open "select bezeichnung from Raum where ID = " & raum_id, objConn

      raumname = rsRaum("bezeichnung")

  rsRaum.close

  ' Beende, falls Display voll
  If lineCount > lineMax Then
    exit do
  End If 

  ' optionale Unterdrückung der Titelanzeige
  if ucase( rs("thema_enabled") ) = "Y" or isnull(rs("thema_enabled")) then
    thema = rs("thema")
  else
    thema = ""
  end if

  if ucase(displayanzeige) = "Y" or isnull(displayanzeige) then
%> 
```

```
 <tr "margin-bottom:100px" height="70" valign="top">
    <td style="overflow:hidden;" class="<% =color%>"><% =thema %></td>
    <td class="<% =color%>"><% =Hinweistext %></td>
    <td align="center"; class="<% =color%>"><% =FormatDateTime( rs("von"), 4)%></td>
    <td align="center"; class="<% =color%>"><% =FormatDateTime( rs("bis"), 4) %></td>
    <td align="center"; class="<% =color%>"><% =GebaeudeBezeichnung %><br></td>
    <td align="center"; class="<% =color%>"><% =raumname %><br></td>
  </tr> 
```

```
<%  

    ' jede zweite Zeile mit anderer Schriftfarbe

  If lineCount mod 2 = 1 Then
    color = "color2"
  Else
    color = "color1"
  End If
  lineCount = lineCount + 1

  end if
  rs.moveNext

loop
rs.close 
%> 
```

如何修改我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:34:31.253

创建一个重复页面并将参数（`GET`或`POST`）传递给它，就像`RemainingItems`从当前页面一样。`RemainingItems`这里是 4 并将当前页面更改如下：

```
If lineCount > lineMax Then 
```

成为：

```
If lineCount > firstPageItems Then 
```

明显地：

```
lineMax = firstPageItems + RemainingItems 
```

对于页面之间的切换，在特定的时间间隔内，您应该在两个页面上都使用 JavaScript 计时器。经过一段时间后，将客户端重定向到另一个页面（每个页面都知道另一个页面的地址）。

可以在一页中完成所有工作，但由于它需要更多的工作，根据问题我建议这个。

# c# - 无法将源类型“void”转换为目标类型“ICollection” '

> ID：13259608
> 
> 赞同：0
> 
> 时间：2012-11-06T21:21:22.340
> 
> 标签：c#, linq, entity-framework, type-conversion, entity-framework-5

我有一个`DataContract`类，我正在尝试转换为另一个类，`Movie`但是对于该属性`Movie.Characters`，我收到了错误...

> 无法将源类型“ `void`”转换为目标类型“ `ICollection<Character>`”

我怎样才能创建一个新`Movie`的`Character`属性设置正确映射到每个`Person`和`Movie`？

```
var movies = dataContract.Movies.Select(m => new Movie {
    Id = m.Id,
    Title = m.Title,
    Characters = m.AbridgedCast.ToList().ForEach(p => new Person { Name = p.Name, 
        RottenTomatoesId = p.Id, 
        Characters = p.Characters.ToList().ForEach(c => new Character { Name = c })})
}); 
```

**MoviesDataContract.cs**

```
public class MoviesDataContract {
    [DataMember(Name = "total")]
    public int Total { get; set; }

    [DataMember(Name = "movies")]
    public IEnumerable<Movie> Movies { get; set; }

    #region Internal Classes

    [DataContract]
    public class Movie {
        [DataMember(Name = "id")]
        public int Id { get; set; }

        [DataMember(Name = "title")]
        public string Title { get; set; }

        [DataMember(Name = "abridged_cast")]
        public virtual IEnumerable<Person> AbridgedCast { get; set; }
    }

    [DataContract]
    public class Person {
        [DataMember(Name = "name")]
        public string Name { get; set; }

        [DataMember(Name = "id")]
        public int Id { get; set; }

        [DataMember(Name = "characters")]
        public IEnumerable<string> Characters { get; set; }
    }

    #endregion  
} 
```

**电影.cs**

```
public partial class Movie {
    public Movie() {
        this.Characters = new HashSet<Character>();
    }

    public int Id { get; set; }
    public string Title { get; set; }
    public virtual ICollection<Character> Characters { get; set; }
}

public partial class Character {
    public System.Guid Id { get; set; }
    public int MovieId { get; set; }
    public System.Guid PersonId { get; set; }
    public string Name { get; set; }

    public virtual Movie Movie { get; set; }
    public virtual Person Person { get; set; }
}

public partial class Person {
    public Person() {
        this.Characters = new HashSet<Character>();
    }

    public System.Guid Id { get; set; }
    public string Name { get; set; }
    public int RottenTomatoesId { get; set; }

    public virtual ICollection<Character> Characters { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:23:12.660

`List<T>.ForEach(...)`不返回任何东西。[请参阅 MSDN 上](http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx)。

你可能想用`Select(...)`then做一个投影`ToList()`。

# javascript - 如何提交具有特定字段集的表单

> ID：13259609
> 
> 赞同：2
> 
> 时间：2012-11-06T21:21:23.947
> 
> 标签：javascript, jquery, html, web-applications

我有这样的表格：

```
<form name="paymentForm" id="paymentForm" action="/submit.jsp" method="post">
    <fieldset id="ccData">
        <input id="ccNumber" name="ccNumber"/>
    </fieldset>
    <fieldset id="otherData">
        <input id="requestId" name="requestId"/>
    </fieldset>
</form> 
```

当您提交时，我想（通过 ajax）仅将#ccData 文件集提交到一些不同的 url（例如 submitCC.jsp），并根据响应我想将完整的表单提交到实际的 url。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:40:11.053

使用 jQuery 的[序列化](http://api.jquery.com/serialize/)方法

```
var formData = $("#ccData").serialize()​;
$.post("TheUrl",formData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:50:01.110

你可以用 JavaScript 做到这一点——例如 jQuery。你建立一个 eventHandler 像

```
$('#paymentForm').on('click', function () {
  $(this).preventDefault();
  if ($(this).hasClass('first_send')) {
    $.ajax({
      url: "your_url",
      data: { ccData: $('#ccData').val()}
    }).done(function ( data ) {
      $('#paymentForm').addClass('first_send')
      // examin the data, insert stuff you need and send the form again
      // with ajax
    })
  } else {
   $(this).removeClass('first_send')
   // this is the second send - so do stuff here - show a result or so
  }
}) 
```

使用 first_send 类，您可以检查它是第一次发送还是第二次发送。这只是一个未经测试的、不完整的想法，你可以如何做到这一点。我想你得到了大局...

# javascript - 难倒：IE8 消息：预期的标识符、字符串或数字行：82 字符：1 代码：0

> ID：13259612
> 
> 赞同：2
> 
> 时间：2012-11-06T21:21:26.670
> 
> 标签：javascript, string, internet-explorer, incompatibility

最近与我合作的供应商为我的公司制作了一个页面。它通常运行良好，但在 IE（任何版本）查看时会被破坏。

以下是错误详情：

> 用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；WOW64；Trident/4.0；GTB7.4；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；媒体Center PC 6.0；.NET4.0C) 时间戳：2012 年 11 月 6 日星期二 18:06:55 UTC
> 
> 消息：预期的标识符、字符串或数字
> 行：82
> 字符：1
> 代码：0

这是我认为它所指的代码部分：

```
<script type="text/javascript">  
jwplayer("container1").setup({
'flashplayer': "player.swf",
'autostart':"true",
'skin': "skin.zip",
'controlbar': "bottom",
'screencolor': "FFFFFF",
'image': "images/gradient green background.jpg",
'file': "new_tour_video/General_Information_Final2.m4v",
'height': "546",
'width': "999",
 <-----------------*This would be line 82, Character 1*
});

</script> 
```

谁能在这里指出我正确的方向？

我对此有所了解（但不多），但这似乎表明脚本存在问题。唯一的问题是，播放器本身工作正常。这是页面的其余部分变得杂乱无章......但为什么它会告诉我错误在第 82 行？我检查了相关的 CSS 文件，那里的一切看起来都很正常（第 82 行是一个非常普通、格式正确的标签）。

简而言之，我被难住了。我敢肯定，对 Java 有扎实了解的人能够弄清楚这一点，但我对正确 Java 语法的了解非常薄弱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T21:23:31.223

从对象声明中删除最后一个逗号以修复错误

```
jwplayer("container1").setup({
'flashplayer': "player.swf",
'autostart':"true",
'skin': "skin.zip",
'controlbar': "bottom",
'screencolor': "FFFFFF",
'image': "images/gradient green background.jpg",
'file': "new_tour_video/General_Information_Final2.m4v",
'height': "546",
'width': "999"
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:24:10.663

看起来您的 JSON 对象有一个额外的逗号。尝试删除对象中的最后一个逗号：

```
<script type="text/javascript">  
jwplayer("container1").setup({
'flashplayer': "player.swf",
'autostart':"true",
'skin': "skin.zip",
'controlbar': "bottom",
'screencolor': "FFFFFF",
'image': "images/gradient green background.jpg",
'file': "new_tour_video/General_Information_Final2.m4v",
'height': "546",
'width': "999"
});
</script> 
```

# nosql - Couchbase 的 RDBMS 持久性

> ID：13259613
> 
> 赞同：1
> 
> 时间：2012-11-06T21:21:33.380
> 
> 标签：nosql, persistence, couchbase

伙计们，我们正在为我们的应用程序评估分布式缓存解决方案。我们从查看 Memcache 开始，然后扩展到查看 Couchbase。我们的关键要求之一是能够将（内存中）缓存可靠地备份到 RDBMS，并在节点/集群发生故障时从中恢复。

我们的首选选项是在 couchbase 中设置一个配置开关，这会导致它将新条目备份到 RDBMS。

我们想要避免的是编写将缓存条目/刷新显式发送到 RDBMS 的应用程序代码。

谁能告诉我是否可以将 couchbase（集群）配置为这样做？

谢谢。

-拉吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T05:18:55.470

Couchbase 无法配置为写入 RDBMS 以进行备份。您应该看的是 Couchbase 存储桶，而不是 memcached 存储桶。Couchbase 存储桶使用 memcached 层作为缓存，并提供开箱即用的复制和持久性。使用此设置，您不需要单独的 RDBMS，因为 Couchbase 将为您处理所有持久性并复制您的数据，因此如果您有服务器故障，您可以故障转移任何故障节点并将其他副本节点提升为活动节点. 看看这个页面[http://www.couchbase.com/couchbase-server/features](http://www.couchbase.com/couchbase-server/features)如果你在这里有任何其他架构问题，那么我建议你在 Couchbase 论坛上发布它们[http://www.couchbase.com/论坛](http://www.couchbase.com/forums)一些开发人员可以为您提供更深入的答案。

# php - PHP array_search 始终返回数组的第一个键

> ID：13259614
> 
> 赞同：6
> 
> 时间：2012-11-06T21:21:48.563
> 
> 标签：php, arrays, function

我最近在我的代码中使用 array_search 函数时发现了问题。我正在数组“$allcraftatts”中搜索值“sharp”。我试图通过设置两行实验来隔离问题：

```
$testcopy=$allcraftatts;
$testsharp=array_search("sharp", $testcopy); 
```

使用“print_r(get_defined_vars());” 后来，我得到了这个结果：

```
[testcopy] => Array
                (
                    [0] => 0
                    [1] => 0
                    [2] => 0
                    [3] => 0
                    [4] => 0
                    [5] => 0
                    [6] => Sharp Stone
                    [7] => Sharp Stones
                    [8] => stone
                    [9] => object
                    [10] => sharp
                    [11] => hard
                    [12] => 0
                    [13] => 0
                    [14] => 0
                    [15] => 0
                    [16] => 0
                    [17] => 0
                    [18] => 0
                )

[testsharp] => 0 
```

我确保不会在其他任何时间修改这些变量。

现在，如果我将代码更改为

```
$testcopy=$allcraftatts;
unset($testcopy[0]);
$testsharp=array_search("sharp", $testcopy); 
```

它返回“1”。

这让我相信它总是返回数组中的第一个键。

这让我很困惑！这是让您担心语言本身有问题的错误之一。不管这是多么令人怀疑，我实际上最终被驱使去查看 PHP 源代码是否有问题，但不幸的是无法理解它。

看到这么简单的功能，我肯定会被不可避免的简单答案彻底羞辱，但此时，我只想要一个答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T21:29:09.087

`array_search`用于 `==`在搜索期间比较值

形成 PHP 文档

> 如果第三个参数 strict 设置为 TRUE，则 array_search() 函数将在大海捞针中搜索相同的元素。这意味着它还将检查大海捞针的类型，并且对象必须是相同的实例。

因为第一个元素是在搜索过程`0`中转换为的字符串`0`

简单测试

```
var_dump("sharp" == 0); //true
var_dump("sharp" === 0); //false 
```

解决方案使用`strict`选项来搜索相同的值

```
$testsharp = array_search("sharp", $testcopy,true);
                                               ^---- Strict Option

var_dump($testsharp); 
```

输出

```
10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:31:00.447

如果搜索到的键之前的任何键是*数字 zero*，则返回该键，因为它正在执行由*数组*数据类型主导的“松散”匹配，并且“尖锐”（如果转换为`int`）计数为零。使用严格检查，找到正确的值。

否则，通过执行

```
$testcopy = array_map('strval', $testcopy); 
```

以便将值转换为字符串，它也适用于“松散”检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T21:35:44.137

欢迎来到松散打字的美妙世界。在 php 中，array_search 默认为非严格比较（“==”），但您可以添加第三个参数来强制严格比较（“===”）。您几乎总是想要严格，尽管有时非严格是正确的操作。

查看以下内容：

```
$allcraftatts = array(0, 0, 0, 0, 0, 0, "Sharp Stone", "Sharp Stones", "stone", new stdClass(), "sharp", "hard", 0, 0, 0, 0, 0,0 ,0);
$testcopy=$allcraftatts;
$testsharp=array_search("sharp", $testcopy);
$testsharpStrict=array_search("sharp", $testcopy, true);

print_r(get_defined_vars());                                                                                                                                                                                                                        

if(0 == "sharp"){
    echo "true for == \n";
}else{
    echo "false == \n";
}
if(0 === "sharp"){
    echo "true for === \n";
}else{
    echo "false === \n";
} 
```

和输出：

```
[testcopy] => Array
        (
            [0] => 0
            [1] => 0
            [2] => 0
            [3] => 0
            [4] => 0
            [5] => 0
            [6] => Sharp Stone
            [7] => Sharp Stones
            [8] => stone
            [9] => stdClass Object
                (
                )

            [10] => sharp
            [11] => hard
            [12] => 0
            [13] => 0
            [14] => 0
            [15] => 0
            [16] => 0
            [17] => 0
            [18] => 0
        )

    [testsharp] => 0
    [testsharpStrict] => 10
)
true for == 
false === 
```

# python - Python for .NET“找不到程序集”错误

> ID：13259617
> 
> 赞同：20
> 
> 时间：2012-11-06T21:22:08.093
> 
> 标签：python, .net, interop, python-c-api, python.net

我正在使用 CPython，并且我有一个 C# dll。我正在尝试使用 Python for .NET 让他们说话。我不能使用 IronPython，因为我需要将它集成到现有的 CPython 系统中。

我对 Python for .NET 完全陌生，实际上我对 Python 的经验很少，对 C# 也没有经验。所以如果我的问题看起来很基本，请原谅我。

我正在使用 Python 2.7.3，我下载了 pythonnet-2.0-alpha2-clr2.0_131_py27_UCS2 并将其解压缩到一个名为 pyfornet_test 的文件夹中，该文件夹还包含我正在尝试使用的 dll（称为 DotNet4Class.dll）

然后我运行这个：

```
import sys

import os

import clr

sys.path.append(r"C:\pyfornet_test")

clr.AddReference("DotNet4Class.dll") 
```

这给了我这个错误：

```
System.IO.FileNotFoundException: Unable to find assembly 'DotNet4Class.dll'.
   at Python.Runtime.CLRModule.AddReference(String name) in C:\Users\Barton\Documents\Visual Studio 2008\Projects\PyShar
p\trunk\pythonnet\src\runtime\moduleobject.cs:line 375 
```

任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2019-10-14T08:56:38.067

一个原因可能是 Windows 没有允许它从“外部源”加载。要解决这个问题：

*   右键单击.dll
*   “特性”
*   在“常规”下，单击“取消阻止”

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-24T06:58:39.230

试试这个（不带扩展名`.dll`）：

```
clr.AddReference(r"C:\pyfornet_test\DotNet4Class") 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-06T21:47:38.273

是`DotNet4Class.dll`针对 .NET 4 构建的吗？我假设是基于 dll 的命名。

注意这里的问题：http: [//sourceforge.net/tracker/ ?func=detail&aid=3293169&group_id=162464&atid=823891](http://sourceforge.net/tracker/?func=detail&aid=3293169&group_id=162464&atid=823891)

> 使用 .NET 4.0 构建程序集时，clr.AddReference 失败 - ID：3293169

我已经阅读了解决方案，但本质上，您需要在 .NET 4 下为 .NET 项目重建和重新编译 python。

我还要提到，像这样的项目，没有被很多人积极开发和使用，通常具有微妙的*特质*，使得了解平台对于解决此类问题至关重要。听起来您正在尝试破解此解决方案，但对 python 或 .NET 的了解并不多，这总是充满问题。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-27T01:21:28.590

我有这样的代码（我将 MyRightClickMenuService.dll 复制到与我相同的目录中`script.py`）。它是针对 .Net 4.0 构建的。

```
# script.py
import clr
import os
import sys
sys.path.append(os.path.dirname(__file__))

clr.AddReference('MyRightClickMenuService')
clr.AddReference('System')
clr.AddReference('System.Security')

from MyRightClickMenuService import (
    AclSecuredNamedPipeBinding,
    MyMenuItem,
    MyContextMenuService,
    etc
) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-06-25T09:28:05.373

你试过 clr.FindAssembly 吗？

```
import clr
import sys
assemblydir = r"C:\pyfornet_test"
assemblypath = r"C:\pyfornet_test\DotNet4Class.dll"
sys.path.append(assemblydir)
clr.FindAssembly(assemblypath) 
```

我不知道它为什么有效，但这段代码在我的电脑上有效（Python 2.7、.NET4）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-04-13T18:56:20.987

## 清单

1.  `sys.path`在加载之前添加包含 DLL 的文件夹。您可以附加或`sys.path.insert(0, dll_folder)`将其放在列表的首位。
2.  在将文件夹添加到 sys.path*后*，您在`clr.AddReference('my_dll')` *没有*dll 扩展名（for `my_dll.dll`）的情况下调用
**   DLL 目标体系结构与 CPython 版本位数相同。也就是说，如果 Architecture 是`x64`，则使用*64 位*python，如果 Architecture 是`x86`，则使用*32 位*python。（下面的说明）*

 *### 如何检查 DLL 的目标体系结构？

*   我使用[了 ILSpy](https://github.com/icsharpcode/ILSpy/releases)（免费和开源）-> 打开 DLL -> 检查输出。下面的示例输出。

[![ILSpy 示例](../Images/23296aa34dd69b4817ee5e2558e108f0.png)](https://i.stack.imgur.com/rsTah.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-22T09:51:57.720

对我有用的是取消阻止 dll 文件。

如果你下载 dll 文件或从不同的计算机上获取它，它可能会被阻止。所以畅通无阻为我解决了这个问题。

要取消阻止，请右键单击 dll 文件的属性并选中底部的取消阻止框*

# sql-server - 我应该在我的表中添加一个像 MarkedAsDeleted 这样的字段吗？

> ID：13259641
> 
> 赞同：0
> 
> 时间：2012-11-06T21:23:08.010
> 
> 标签：sql-server, asp.net-mvc

我正在使用 SQL Server 构建一个 ASP.NET MVC 应用程序。我想知道什么是记录删除操作的好习惯。我的意思是，当通过 Web 应用程序删除项目时，我想将其标记为已删除，然后从管理控制台中，如果需要，我将清除它们。

这是一个好习惯吗？我应该使用还是避免？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:27:03.363

如果您对存储空间没有任何问题，那么这种方法没有任何问题。通常，如果要删除的对象与其他对象相关联，我们将使用此模式（例如，如果您通过用户 ID 跟踪更改，那么您将不希望删除该用户，因为您将无法提取该用户的信息用户稍后）。只需标记一个显示记录已被删除的位字段，并在查询时将其过滤掉。

同样，这实际上取决于什么对您和您的应用程序有意义。你会再次需要这个对象吗？它是否与数据库中的其他项目相关联？您想为用户提供“取消删除”选项吗？如果其中任何一个问题的答案是肯定的，那么您可能应该保留记录。如果所有这些的答案是否定的，那么我会问，你为什么不在请求时删除记录？

# mysql - 如何将 BOOL 值插入 MySQL 数据库

> ID：13259654
> 
> 赞同：31
> 
> 时间：2012-11-06T21:23:52.113
> 
> 标签：mysql

我正在尝试`BOOL`使用以下脚本将值插入 MySQL (v 5.5.20) 中的数据类型：

```
CREATE DATABASE DBTest;
USE DBTest;
DROP TABLE IF EXISTS first;
CREATE TABLE first (id INT AUTO_INCREMENT NOT NULL PRIMARY KEY , name VARCHAR(30) ,sale  BOOL,); 
INSERT INTO first VALUES ("", "G22","TRUE");
INSERT INTO first VALUES ("", "G23","FALSE"); 
```

但是该 `INSERT`语句只是将(Zero) 插入到和选项`0`的布尔列中！你能告诉我为什么会这样吗？`TRUE``FALSE`

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-06T21:25:19.697

`TRUE`and`FALSE`是关键字，不应作为字符串引用：

```
INSERT INTO first VALUES (NULL, 'G22', TRUE);
INSERT INTO first VALUES (NULL, 'G23', FALSE); 
```

通过将它们引用为字符串，MySQL 会将它们转换为等效的整数（因为布尔值在 MySQL 中实际上只是一个字节`INT`），对于任何非数字字符串，它都转换为零。因此，您可以获得`0`表中的两个值。

### 非数字字符串强制为零：

```
mysql> SELECT CAST('TRUE' AS SIGNED), CAST('FALSE' AS SIGNED), CAST('12345' AS SIGNED);
+------------------------+-------------------------+-------------------------+
| CAST('TRUE' AS SIGNED) | CAST('FALSE' AS SIGNED) | CAST('12345' AS SIGNED) |
+------------------------+-------------------------+-------------------------+
|                      0 |                       0 |                   12345 |
+------------------------+-------------------------+-------------------------+ 
```

### 但是关键字返回它们对应的`INT`表示：

```
mysql> SELECT TRUE, FALSE;
+------+-------+
| TRUE | FALSE |
+------+-------+
|    1 |     0 |
+------+-------+ 
```

另请注意，我已将您的双引号替换为单引号，就像更标准的 SQL 字符串附件一样。最后，我已将您的空字符串替换为`id`with `NULL`。空字符串可能会发出警告。

# c# - 实体框架中的数据完整性

> ID：13259655
> 
> 赞同：1
> 
> 时间：2012-11-06T21:23:55.763
> 
> 标签：c#, sql-server, entity-framework

对于在实体框架中始终保持数据完整性的最佳方法，是否有任何共识。即在添加或删除实体时，如何确保加载的模型是最新的，并且我背后的数据库没有任何变化？

在大多数情况下似乎对我有用的粗略方法是在会话之间重新加载上下文，即没有持久模型，并在出现错误时重新加载/刷新。这似乎在低数据冲突的情况下有效，但是当不同服务中发生大量更改时成本非常高。是否有一个标志可以查询磁盘上的数据/行是否已更改或是否有事件使此刷新自动进行，即更新某些表/行的任何订阅者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:26:50.017

您可能需要乐观并发。EF 可以在提交之前自动检查数据的任何更改，如果数据在当前上下文之外发生更改，则抛出异常。请参阅[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T22:01:04.633

您可以在 EF 中使用并发做一些很酷的事情。

具体来说，我有一个属性 HandleConcurrencyExceptionAttribute，您可以在 MVC 项目中使用它来自动挂钩实体框架将抛出​​的 DbConcurrencyException。 [https://github.com/adamtuliper/EF5-for-Real-Web-Applications](https://github.com/adamtuliper/EF5-for-Real-Web-Applications)

如果您使用 Web 表单（或 win forms/wpf），则必须手动检查它。在 Webforms 项目中搜索 DbConcurrencyException

所以基本上：

1.  在数据库中有一个rowversion字段，称之为'timestamp'
2.  将您的实体字段设置为具有 [时间戳]

`[Timestamp] public byte[] Timestamp { get; set; }`

3.  保存时 EF 将确保正在更新的行具有当前时间戳。如果更新的行数 = 0，则会引发异常，因为该行不再存在或已被修改，并且 SQL Server 在最后一个人保存更改时自动增加行版本。

如果您想看到它的实际效果，请查看我的视频结尾：[http](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/DEV215) ://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/DEV215 我简要地讨论了并发性并进行了快速演示。

对于您问题的第二部分，有 SqlCacheDependency 类 [http://msdn.microsoft.com/en-us/library/ms178604(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178604(v=vs.100).aspx) 最近在 MSDN 上也有一篇关于此的文章好。

# c - 使用 fgets 将 double 存储到结构中

> ID：13259656
> 
> 赞同：0
> 
> 时间：2012-11-06T21:23:58.983
> 
> 标签：c, struct, fgets

我对 C 编程有点陌生，我一直遇到这个错误。以前我将 fscanf 与 %lf 一起使用，因为年龄是双倍的，但自从我切换到 fgets 后，我不知道如何让它接受双倍。我正在尝试读入一个结构。这是我的相关代码：

> ```
> double age;
> ...
> while(fgets(Employees[i].age, 10, input) != 0) 
> ```

给我这个错误：

错误：fgets 的参数 1 的类型不兼容，预期为“char *”，但参数的类型为“double”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:46:52.837

您可能还想使用 读取整行文本`fgets()`，然后尝试使用`sscanf()`.

`sscanf()`就像它`fscanf()`的`scanf()`第一个参数是字符串指针一样工作。

一次读取整行可能会使某些事情变得更容易，例如按行号报告错误，或者如果`sscanf()`失败，尝试使用不同的格式字符串转换行。

一个有趣的例子：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main()
{
    char buffer[1024];
    const size_t buffer_size = sizeof(buffer);
    int line_number = 0;

    while( fgets(buffer, buffer_size, stdin) ) {
        size_t len = strlen(buffer);
        double value;

        line_number++;

        if( buffer[len-1] == '\n' ) {
            buffer[len-1] = '\0';
            len--;
        }

        if( sscanf(buffer, " %lf", &value) != 1 ) {
            fprintf(stderr, "stdin:%d: Unable to read value: \"%s\" makes no sense.\n", line_number, buffer);
            exit(EXIT_FAILURE);
        }
        printf("Successfully read value %lf\n", value);
    }
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:26:21.327

`fgets`尝试读取一行文本，这不适合您的情况，因为您只对`double`值感兴趣。

`fgets`因此，您需要使用`fscanf`格式`double`字符串，而不是 using ：

```
while(fscanf(input, "%lf", &Employees[i].age) == 1) 
```

# iphone - UICollectionViewCell 的自定义初始化

> ID：13259665
> 
> 赞同：0
> 
> 时间：2012-11-06T21:24:46.430
> 
> 标签：iphone, objective-c, ios, ipad

我有一个 UICollectionViewCell，它在集合视图内的 nib 文件中初始化。这是我初始化它的方式：

```
PNRCatalogSourceCell *cell = [cv dequeueReusableCellWithReuseIdentifier:kCellID forIndexPath:indexPath]; 
```

有没有办法为此进行自定义初始化以传入它将使用的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:07:52.253

您可以创建一个子类并在 方法`PNRCatalogSourceCell`内传入对象`awakeFromNib`

# c - 将数组传递给函数并通过递归添加

> ID：13259667
> 
> 赞同：0
> 
> 时间：2012-11-06T21:25:04.103
> 
> 标签：c, arrays, recursion

他们试图做的是将数组传递给一个函数，该函数将添加所有数组元素并返回输出。请帮我。我不知道我在这做错了什么：/

```
#include <stdio.h>
#define MAX 5

int arraySum(int *dArr,int lim);

int main()
{
    int array[MAX] = {9,7,4,2,10};
    printf("%d", arraySum(array, MAX));
    return 0;
}
int arraySum(int *dArr,int lim)
{
    int Ans;
    if(lim>0)
    Ans = dArr[lim] + arraySum(*dArr, lim--);
    return Ans;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T21:28:23.667

您的代码有几个问题：

1.  您正在访问`array[MAX]`，这是未定义的行为。
2.  您的函数在为零`Ans`时返回未初始化的值。`lim`
3.  `arraySum`递归调用中的第一个参数是错误的。
4.  的使用`lim--`是错误的。

由于这看起来像家庭作业，我会让你弄清楚如何解决这些问题。如果这*不是*家庭作业，您可能需要考虑递归是否适合这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:26:28.027

您在 上遇到未定义的行为`dArr[lim]`，因为`lim`is`5`并且该数组具有元素`0...4`。

当 时，您还会得到未定义的行为`lim==0`，因为您返回未初始化的`Ans`。当您声明它时，将其初始化为`dArr[0]`.

修复此问题后，您将希望`dArr`在递归中进一步传递自身，因为`dArr`仅返回一个`int`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:28:08.643

更改`MAX`为`4`并将`if(lim>0)`条件更改为 `if(lim>=0)`

这将使您的递归添加为`dArr[4]+dArr[3]+dArr[2]+dArr[1]+dArr[0]`数组的所有 5 个元素。

编辑：更正的程序：

```
 int main()
   {
     int array[MAX] = {9,7,4,2,10};
     printf("%d", arraySum(array, MAX-1));
     return 0;
   }

    int Ans = 0;
    int arraySum(int *dArr,int lim)
    {
       if(lim>=0){
          Ans = dArr[lim] + arraySum(dArr, lim-1);
        }
       return Ans;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T21:28:40.053

请记住，计算机将**0**视为第一个数字，因此您的数组将从元素 [0] 到元素 [4] 编号。您的代码从 5 开始倒数到 1，这意味着在这种情况下 elements[5] 将返回垃圾，因为索引不存在。将 Lim - 1 传递给函数或手动更改函数中的值。

```
ArraySum(Array, MAX - 1); 
```

或者

```
ArraySum(//....)
{
lim--;
//code here....
} 
```

编辑：您还需要将 ans 初始化为某个值，因此如果传递了一个零元素数组，该函数将不会返回未初始化的变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T21:29:13.923

```
int arraySum(int *dArr,int lim)
{
    int Ans;
    if(lim>=0) // note the change here
    Ans = dArr[lim] + arraySum(dArr, --lim); // note the --lim change here
    return Ans;
} 
```

1.  您应该使用 lim 作为 4 而不是 5 来调用它。因为数组有 5 个从索引 0 到索引 4 的整数。第 5 个索引超出范围。
2.  --lim 而不是 lim-- 因为 lim-- 是后减量。这意味着该值首先被传递然后递减。因此，每次您的 arraySum 函数将值设为 4 而不是 3、2、1 和 0（根据您的期望）。--lim 是预减量。

# javascript - jquery post仅在警报后有效

> ID：13259668
> 
> 赞同：1
> 
> 时间：2012-11-06T21:25:04.410
> 
> 标签：javascript, jquery, ajax, forms, submit

我有一次提交两个表格的功能。最后一个（第二个）post方法没有alert()是不会生效的。

你能告诉我我的错误吗？

```
 function formFunction() {
        ...
        $.post($("#form1").attr("action"), $("#form1").serialize() );
        $.post($("#form2").attr("action"), $("#form2").serialize() );

        //alert('done');
} 
```

UPD

这就是函数的调用方式

```
<form id="form0" name="form0" onsubmit="formFunction()">
    <input id="mainFormValue" type="text"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:31:35.787

它失败的原因是您没有取消原始表单提交。这意味着当您单击按钮时，该页面正在回发到服务器。您需要做的是阻止该原始表单提交完成。

如果您使用 jQuery 添加事件处理程序，您可以使用 preventDefault() 取消表单提交。

```
function formFunction(e) {
     e.preventDefault();
     $.post($("#form1").attr("action"), $("#form1").serialize() );
     $.post($("#form2").attr("action"), $("#form2").serialize() );
} 
```

将表单提交更改为不显眼的 JavaScript，以获取 jQuery 设置的正确事件对象。

```
$("#form0").submit(formFunction); 
```

其他解决方案是在提交中添加一个`return false`。忽略我上面建议的 preventDefault 行。[坏主意，但会工作]

```
<form id="form0" name="form0" onsubmit="formFunction(); return false"> 
```

# servlets - Dropwizard：设置 servlet 上下文参数

> ID：13259672
> 
> 赞同：4
> 
> 时间：2012-11-06T21:25:18.457
> 
> 标签：servlets, dropwizard

给定以下 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <filter>
        <filter-name>Guice Filter</filter-name>
        <filter-class>com.google.inject.servlet.GuiceFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>Guice Filter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <listener>
        <listener-class>com.foo.JerseyContextListener</listener-class>
    </listener>
    <context-param>
        <param-name>module</param-name>
        <param-value>com.foo.MainModule</param-value>
    </context-param>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

如何告诉 DropWizard 将“模块”servlet 上下文参数设置为“com.foo.MainModule”？

`Configuration.getHttpConfiguration().getContextParameters()`总是返回一个空列表。我们应该扩展这个类吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T01:43:19.323

您可以在配置文件中设置它：

```
- http:
  - contextParameters:
    - module: com.foo.MainModule 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:51:42.950

看来您需要覆盖`Configuration.http`：

```
public class MyConfiguration extends Configuration
{
    public MyConfiguration()
    {
        this.http = new HttpConfiguration()
        {
            @Override
            public ImmutableMap<String, String> getContextParameters()
            {
                return ImmutableMap.<String, String>builder().put("module", MainModule.class.getName()).
                    build();
            }
        };
    }
} 
```

# spring - 如何在我的配置文件中将刷新模式设置为“COMMIT”？

> ID：13259677
> 
> 赞同：7
> 
> 时间：2012-11-06T21:25:32.030
> 
> 标签：spring, hibernate, jpa, transactions, flush

我正在使用 Spring 3.1.1.RELEASE、Hibernate 4.1.0.Final 和 JPA 2.0。有没有一种方法可以在没有 Java 代码的情况下执行事务后配置 Spring 事务以提交？换句话说，我想将刷新模式设置为在应用程序上下文文件、休眠配置文件或 persistence.xml 文件中提交。我的 Spring 事务服务类看起来像

```
@Transactional(rollbackFor = Exception.class)
@Service
public class ContractServiceImpl implements ContractService
{

    @Autowired
    private ContractDAO m_contractDao;

    public void addContract(Contract contract)
    {
       m_contractDao.create(contract);
    }

    ... 
```

我的应用程序上下文是这样设置的……</p>

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.hsqldb.jdbcDriver"/>
    <property name="url" value="jdbc:hsqldb:mem:myproject" />
    <property name="username" value="sa" />
    <property name="password" value="" />
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
    </property>
    <property name="persistenceXmlLocation" value="classpath*:META-INF/test-persistence.xml"/>
    <property name="persistenceUnitName" value="testingDatabase"/>
    <property name="dataSource" ref="dataSource"/>
</bean>

<bean id="sharedEntityManager" class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
   <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<tx:annotation-driven /> 
```

我的 persistence.xml 文件是

```
<persistence version="2.0"
   xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
        <persistence-unit name="testingDatabase" transaction-type="RESOURCE_LOCAL">
                <provider>org.hibernate.ejb.HibernatePersistence</provider>
                <properties>
                        <property name="hibernate.ejb.cfgfile" value="/hsql_hibernate.cfg.xml" />
        <property name="org.hibernate.FlushMode" value="commit" />
                </properties>
        </persistence-unit>
</persistence> 
```

我的休眠配置文件是

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.pool_size">1</property>
        <property name="show_sql">true</property>
        <property name="dialect">org.hibernate.dialect.HSQLDialect</property>
        <property name="hibernate.hbm2ddl.auto">create-drop</property>

        <mapping class="org.mainco.subco.sbadmin.domain.Product" />
        <mapping class="org.mainco.subco.sbadmin.domain.Contract" />
        <mapping class="org.mainco.subco.organization.domain.Country" />
        <mapping class="org.mainco.subco.organization.domain.State" />
        <mapping class="org.mainco.subco.organization.domain.Address" />
        <mapping class="org.mainco.subco.organization.domain.OrganizationType" />
        <mapping class="org.mainco.subco.organization.domain.Organization" />

    </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:32:48.760

在您的 web.xml 中尝试以下操作

```
<filter>
    <filter-name>openSessionInViewFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
    <init-param>
        <param-name>flushMode</param-name>
        <param-value>COMMIT</param-value>
    </init-param>
</filter> 
```

[参考](http://forum.springsource.org/archive/index.php/t-14044.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:50:32.917

作为另一种选择，您可以使用`org.hibernate.flushMode`配置设置直接将 Hibernate EntityManager 配置为使用特定的刷新模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:52:25.023

检查此[链接](http://forum.springsource.org/showthread.php?56536-JPA-Configuring-Hibernate-flushMode)

您可能需要延长

```
org.springframework.orm.jpa.vendor.HibernateJpaDialect 
```

我希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T22:43:25.943

我不确定这种设置在春季是否可用。（我还没有看到）但是，作为替代，hibernate 提供了通用 CRUD 方法，如果您将它们作为泛型传递，您可以将它们用于所有类。只需在 Update/Create 方法中调用 flush 方法，并专门使用这些方法来创建/更新所有类。

这是一个例子：

[http://www.ibm.com/developerworks/java/library/j-genericdao/index.html](http://www.ibm.com/developerworks/java/library/j-genericdao/index.html)

# javascript - 将对象数组转换为 HTML 的 Javascript 函数

> ID：13259687
> 
> 赞同：-2
> 
> 时间：2012-11-06T21:26:01.093
> 
> 标签：javascript, html, css, web

我正在做 web 应用程序，我需要实现一个函数，将 javascript 中的这个对象数组转换为 HTML 中的“ul”，但我不知道，所以也许你可以帮助我......

我将任务项保存在数据库中，这是当我从 DB 调用 GET 函数时数据库给我的结果：

```
{"code": "ok", "data": [
        {"done": 1, "deadline": "2012-11-09", "id": 1, "desc": "Go to run"}, 
        {"done": 0, "deadline": "2012-11-09", "id": 2, "desc": "Go to doctor"}, 
        {"done": 0, "deadline": "2012-11-08", "id": 3, "desc": "Go to buy"}
]} 
```

我必须将每个任务对象放在一个 HTML“ul”中，如下所示：

```
<ul>
<a href="#dialog"><li data-task-id="1">
    <p class="desc">Go to run</p>
    <time datetime="2012-11-09">09/11/2012</time>
    <p class="done" data-task-done="yes">done</p>
</li></a>

<a href="#dialog"><li data-task-id="1">
    <p class="desc">Go to doctor</p>
    <time datetime="2012-11-09">09/11/2012</time>
    <p class="done" data-task-done="yes">done</p>
</li></a>

<a href="#dialog"><li data-task-id="2">
    <p class="desc">Go to buy</p>
    <time datetime="2012-11-09">09/11/2012</time>
    <p class="done" data-task-done="no">not done</p>
</li></a> 
```

我需要一个 JavaScript 函数来从数组创建这个 html 代码。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:23:21.227

您需要遍历数组

```
var arr = YOUR_DATA.data;
var code = "";
for ( var i=0; i < arr.length; i++) {
    // This is called for every Item

    var currentItem = arr[i];
    // This is your Item

    code += '<a [...] <p class="desc">' + currentItem.desc + '</p> [...]'
    /*
        Just replace the brackets and write your HTML Code in there
        If there is a variable write " '+currentItem.VAR_NAME+' "
    */
} 
```

# python - 将字符串转换为 MD5

> ID：13259691
> 
> 赞同：14
> 
> 时间：2012-11-06T21:26:19.113
> 
> 标签：python, string, python-3.x, md5

好的，我正在尝试编写一个将字符串转换为`md5`哈希码的基本转换器，但是当我运行我的程序时，我不断收到一个错误消息：

```
Traceback (most recent call last):
  File "C:\Users\Shane\Documents\Amer CISC\lab4.py", line 30, in <module>
    assertEqual (computeMD5hash("The quick brown fox jumps over the lazy dog"),("9e107d9d372bb6826bd81d3542a419d6"))
  File "C:\Users\Shane\Documents\Amer CISC\lab4.py", line 27, in computeMD5hash
    m.update(string)
TypeError: Unicode-objects must be encoded before hashing 
```

我的代码如下所示：

```
def computeMD5hash(string):
    import hashlib
    from hashlib import md5
    m = hashlib.md5()
    m.update((string))
    md5string=m.digest()
    return md5string 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-06T21:41:15.163

正如错误所暗示的那样，您`string`必须是 unicode 并且您必须对其进行编码。查看您所做的调用（来自您的堆栈跟踪）：

```
computeMD5hash("The quick brown fox jumps over the lazy dog") 
```

看起来您必须运行 Python 3，其中字符串是 unicode 对象。要编码为可由 hashlib 处理的字节表示，请更改此

```
m.update((string)) 
```

对此（如果 utf-8 是适合您使用的编码 - 这取决于您将如何使用它）：

```
m.update(string.encode('utf-8')) 
```

如果这对您来说都是新闻，您可能应该阅读优秀的[Python 3 Unicode HOWTO](http://docs.python.org/3.0/howto/unicode.html)。

* * *

另外，当我在这里时，您的代码还有其他一些问题

*   一些不必要的位 - 不需要`from hashlib import`线路或临时`md5string`。
*   从函数中导入模块是一种不好的形式，因此`import hashlib`应将其移至模块范围。
*   该函数返回的[`digest()`](http://docs.python.org/3.3/library/hashlib.html#hashlib.hash.digest)是原始二进制文件，从您的堆栈跟踪来看，您似乎期待的[`hexdigest()`](http://docs.python.org/3.3/library/hashlib.html#hashlib.hash.hexdigest)是与表示为十六进制字符串相同的东西。

要修复和整理所有内容，请尝试以下操作：

```
import hashlib

def computeMD5hash(my_string):
    m = hashlib.md5()
    m.update(my_string.encode('utf-8'))
    return m.hexdigest() 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-06T21:38:59.790

与其尝试散列字符串，不如散列一个编码的字节序列。代替

```
>>> import hashlib
>>> hashlib.md5("fred")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: Unicode-objects must be encoded before hashing 
```

您应该对其进行编码，例如：

```
>>> "fred".encode("utf")
b'fred'
>>> hashlib.md5("fred".encode("utf")).hexdigest()
'570a90bfbf8c7eab5dc5d4e26832d5b1' 
```

在 Python 2 中，您可以不这样做就逃脱，并且它会导致无休止的未被注意到的错误。幸运的是，Python 3 有更健全的 unicode 支持，并且区分字节和字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T21:37:17.997

似乎您必须在散列之前对字符串进行编码：

[http://www.dreamincode.net/forums/topic/246026-generating-string-hash-issue/](http://www.dreamincode.net/forums/topic/246026-generating-string-hash-issue/)

# c++ - C ++ OpenGL不渲染

> ID：13259692
> 
> 赞同：1
> 
> 时间：2012-11-06T21:26:19.337
> 
> 标签：c++, opengl

通过去掉 ComputePositonOffsets() 和 AdjustVertexData() 方法，我可以显示一个三角形，但我添加了一些按钮功能来旋转它以查看屏幕中是否还有更多其他地方，我不知道为什么它生成黑屏。

```
#include <algorithm>
#include <string>
#include <vector>
#include <stdio.h>
#include <glload/gl_3_2_comp.h>
#include <GL/freeglut.h>

#define ARRAY_COUNT( array ) (sizeof( array ) / (sizeof( array[0] ) * (sizeof( array ) != sizeof(void*) || sizeof( array[0] ) <= sizeof(void*))))
double rotate_y = 0;
double rotate_x = 0;

GLuint CreateShader(GLenum eShaderType, const std::string &strShaderFile) {
    GLuint shader = glCreateShader(eShaderType);
    const char *strFileData = strShaderFile.c_str();
    glShaderSource(shader, 1, &strFileData, NULL);

    glCompileShader(shader);

    GLint status;
    glGetShaderiv(shader, GL_COMPILE_STATUS, &status);
    if (status == GL_FALSE) {
        GLint infoLogLength;
        glGetShaderiv(shader, GL_INFO_LOG_LENGTH, &infoLogLength);

        GLchar *strInfoLog = new GLchar[infoLogLength + 1];
        glGetShaderInfoLog(shader, infoLogLength, NULL, strInfoLog);

        const char *strShaderType = NULL;
        switch (eShaderType) {
        case GL_VERTEX_SHADER:
            strShaderType = "vertex";
            break;
        case GL_GEOMETRY_SHADER:
            strShaderType = "geometry";
            break;
        case GL_FRAGMENT_SHADER:
            strShaderType = "fragment";
            break;
        }

        fprintf(stderr, "Compile failure in %s shader:\n%s\n", strShaderType,strInfoLog);
        delete[] strInfoLog;
    }

    return shader;
}

GLuint CreateProgram(const std::vector<GLuint> &shaderList) {
    GLuint program = glCreateProgram();

    for (size_t iLoop = 0; iLoop < shaderList.size(); iLoop++)
        glAttachShader(program, shaderList[iLoop]);

    glLinkProgram(program);

    GLint status;
    glGetProgramiv(program, GL_LINK_STATUS, &status);
    if (status == GL_FALSE) {
        GLint infoLogLength;
        glGetProgramiv(program, GL_INFO_LOG_LENGTH, &infoLogLength);

        GLchar *strInfoLog = new GLchar[infoLogLength + 1];
        glGetProgramInfoLog(program, infoLogLength, NULL, strInfoLog);
        fprintf(stderr, "Linker failure: %s\n", strInfoLog);
        delete[] strInfoLog;
    }

    for (size_t iLoop = 0; iLoop < shaderList.size(); iLoop++)
        glDetachShader(program, shaderList[iLoop]);

    return program;
}

GLuint theProgram;

const std::string strVertexShader("#version 330\n"
        "layout(location = 0) in vec4 position;\n"
        "void main()\n"
        "{\n"
        "   gl_Position = position;\n"
        "}\n");

const std::string strFragmentShader("#version 330\n"
        "out vec4 outputColor;\n"
        "void main()\n"
        "{\n"
        "   outputColor = vec4(1.0f, 1.0f, 1.0f, 1.0f);\n"
        "}\n");

void InitializeProgram() {
    std::vector<GLuint> shaderList;

    shaderList.push_back(CreateShader(GL_VERTEX_SHADER, strVertexShader));
    shaderList.push_back(CreateShader(GL_FRAGMENT_SHADER, strFragmentShader));

    theProgram = CreateProgram(shaderList);

    std::for_each(shaderList.begin(), shaderList.end(), glDeleteShader);
}

const float vertexPositions2[] = { 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5,
        0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5,
        0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, 0.5, -0.5, 0.5,
        -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5,
        -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5,
        -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5 };

GLuint positionBufferObject;
GLuint vao;

void InitializeVertexBuffer() {
    glGenBuffers(1, &positionBufferObject);

    glBindBuffer(GL_ARRAY_BUFFER, positionBufferObject);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertexPositions2), vertexPositions2,
            GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);
}

//Called after the window and OpenGL are initialized. Called exactly once, before the main loop.
void init() {
    InitializeProgram();
    InitializeVertexBuffer();

    glGenVertexArrays(1, &vao);
    glBindVertexArray(vao);
}

void ComputePositionOffsets(float &fXOffset, float &fYOffset) {
    const float fLoopDuration = 5.0f;
    const float fScale = 3.14159f * 2.0f / fLoopDuration;

    float fElapsedTime = glutGet(GLUT_ELAPSED_TIME) / 1000.0f;

    float fCurrTimeThroughLoop = fmodf(fElapsedTime, fLoopDuration);

    fXOffset = cosf(fCurrTimeThroughLoop * fScale) * 0.5f;
    fYOffset = sinf(fCurrTimeThroughLoop * fScale) * 0.5f;
}

void AdjustVertexData(float fXOffset, float fYOffset) {

    std::vector<float> fNewData(ARRAY_COUNT(vertexPositions2));
    memcpy(&fNewData[0], vertexPositions2, sizeof(vertexPositions2));

    for (int iVertex = 0; iVertex < ARRAY_COUNT(vertexPositions2); iVertex +=
            4) {
        fNewData[iVertex] += fXOffset;
        fNewData[iVertex + 1] += fYOffset;
    }

    glBindBuffer(GL_ARRAY_BUFFER, positionBufferObject);
    glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(vertexPositions2), &fNewData[0]);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

}

//Called to update the display.
//You should call glutSwapBuffers after all of your rendering to display what you rendered.
//If you need continuous updates of the screen, call glutPostRedisplay() at the end of  the function.
void display() {
    glUseProgram(theProgram);
    float fXOffset = 0.0f, fYOffset = 0.0f;
    ComputePositionOffsets(fXOffset, fYOffset);
    AdjustVertexData(fXOffset, fYOffset);
    //glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glLoadIdentity();

    glRotatef(rotate_x, 1.0, 0.0, 0.0);
    glRotatef(rotate_y, 0.0, 1.0, 0.0);

    glBindBuffer(GL_ARRAY_BUFFER, positionBufferObject);
    glEnableVertexAttribArray(0);
    glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, 0);

    GLubyte indices[] = { 0, 1, 2, 2, 3, 0, 4, 5, 6, 6, 7, 4, 8, 9, 10, 10, 11,
            8, 12, 13, 14, 14, 15, 12, 16, 17, 18, 18, 19, 16, 20, 21, 22, 22,
            23, 20 };    // back

    glDrawElements(GL_TRIANGLES, 36, GL_UNSIGNED_BYTE, indices);

    glDisableVertexAttribArray(0);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    glFlush();
    glUseProgram(0);
    glutSwapBuffers();
}

//Called whenever the window is resized. The new window size is given, in pixels.
//This is an opportunity to call glViewport or glScissor to keep up with the change in size.
void reshape(int w, int h) {
    glViewport(0, 0, (GLsizei) w, (GLsizei) h);
}

//Called whenever a key on the keyboard was pressed.
//The key is given by the ''key'' parameter, which is in ASCII.
//It's often a good idea to have the escape key (ASCII value 27) call glutLeaveMainLoop() to 
//exit the program.
void keyboard(unsigned char key, int x, int y) {
    switch (key) {
    case 27:
        glutLeaveMainLoop();
        return;
    }

    //  Right arrow - increase rotation by 5 degree
    if (key == GLUT_KEY_RIGHT) rotate_y += 5;
    //  Left arrow - decrease rotation by 5 degree
    else if (key == GLUT_KEY_LEFT) rotate_y -= 5;
    else if (key == GLUT_KEY_UP) rotate_x += 5;
    else if (key == GLUT_KEY_DOWN) rotate_x -= 5;

    //  Request display update
    glutPostRedisplay();
}

unsigned int defaults(unsigned int displayMode, int &width, int &height) {
    return displayMode;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:57:39.223

```
const float vertexPositions2[] = {0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5}; 
```

我猜这是组成一个立方体的 3D 向量列表，因为在您的代码下方使用了 24 个（6 个面 * 4 个角）索引，并且所有值都是 0.5 或 -0.5。但是，您告诉 OpenGL 这是一个包含 4 个分量而不是 3 个分量的向量列表：

```
glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, 0); 
```

将第二个参数设置为 4 是很不寻常的。如果将其设置为 3，OpenGL 会`w`为您填充组件为 1。试试看。我想如果你这样做，你会看到一个正方形。

最重要的是，我在任何地方都看不到透视投影矩阵。如果您没有，您将获得 2D 投影而不是 3D 投影。事情不会按照你想要的方式出现。在实施旋转和四处移动之前，您需要了解它。

下面的这些行对您的程序没有影响，它们不属于现代图形程序。他们更改了固定函数矩阵堆栈中的矩阵，您不会（我认为不能，因为您使用的是 GLSL 330）在着色器中使用这些矩阵。您必须自己将矩阵定义为统一变量。

```
glLoadIdentity();

glRotatef(rotate_x, 1.0, 0.0, 0.0);
glRotatef(rotate_y, 0.0, 1.0, 0.0); 
```

# animation - jQuery Mobile 页面转换然后图像弹出？

> ID：13259698
> 
> 赞同：1
> 
> 时间：2012-11-06T21:26:32.497
> 
> 标签：animation, jquery-mobile

我正在使用 .changePage

```
$.mobile.changePage($nextPage.attr('href'), { transition: 'slide', showLoadMsg: false }); 
```

哪个工作正常。页面发生变化并滑入。唯一的问题是，在新页面上，页面顶部有一个图像在动画期间未显示，然后在动画后“弹出”。

我认为 changePage 会通过 ajax 获取页面并将结果加载到 dom 中，然后当完成动画？

似乎 changePage 正在获取页面并将其插入 dom 但不等待告诉“页面”在执行动画之前已完成加载。

任何人对如何等待告诉新页面及其各种资产（在这种情况下为图像）在动画之前完成加载有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:38:28.030

最后，我能够解决这个问题的唯一方法是使用 $.mobile.loadpage 预加载页面

# c - 从 /dev/random 读取字节失败

> ID：13259699
> 
> 赞同：-1
> 
> 时间：2012-11-06T21:26:36.390
> 
> 标签：c, macos, posix, stdio

我有一段用符合 POSIX 的 C 语言编写的代码，但它似乎无法正常工作。目标是从 /dev/random（Linux/BSD/Darwin 内核的随机数生成器的接口）读取并将写入的字节输出到文件中。我不太确定我忽略了什么，因为我确信我已经覆盖了所有领域。无论如何，这里是：

```
int incinerate(int number, const char * names[]) {
if (number == 0) {
    // this shouldn't happen, but if it does, print an error message
    fprintf(stderr, "Incinerator: no input files\n");
    return 1;
}

// declare some stuff we'll be using
long long lengthOfFile = 0, bytesRead = 0;
int myRandomInteger;

// open the random file block device
int zeroPoint = open("/dev/random", O_RDONLY);

// start looping through and nuking files
for (int i = 1; i < number; i++) {
    int filePoint = open(names[i], O_WRONLY);

    // get the file size
    struct stat st;
    stat(names[i], &st);
    lengthOfFile = st.st_size;
    printf("The size of the file is %llu bytes.\n", lengthOfFile);

    while (lengthOfFile != bytesRead) {
        read(zeroPoint, &myRandomInteger, sizeof myRandomInteger);
        write(filePoint, (const void*) myRandomInteger, sizeof(myRandomInteger));
        bytesRead++;
    }

    close(filePoint);
}

return 0;
} 
```

有任何想法吗？这是在 OS X 上开发的，但我看不出它为什么不能在 Linux 或 FreeBSD 上运行。

如果有帮助，我已包含以下标题：

```
#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/stat.h> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T21:39:31.910

代替

```
write(filePoint, (const void*) myRandomInteger, sizeof(myRandomInteger)); 
```

你肯定是想写

```
write(filePoint, (const void*) &myRandomInteger, sizeof(myRandomInteger)); 
```

你不是吗？如果您使用从中读取的随机字节`/dev/random`作为指针，您几乎肯定迟早会遇到段错误。

# qt - Q_PROPERTY 只读实例

> ID：13259707
> 
> 赞同：2
> 
> 时间：2012-11-06T21:27:27.013
> 
> 标签：qt, properties

有没有办法禁用给定 QObject 实例的所有属性的写访问器，有效地将它们变成无操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:41:32.857

阿法克：不。

`Q_PROPERTY`宏在编译时触发构建`moc`方法，因此您无法在运行时更改特定 QObject 派生实例的行为。

# schema - Biztalk 从已部署项目中删除架构和编排

> ID：13259717
> 
> 赞同：1
> 
> 时间：2012-11-06T21:28:38.620
> 
> 标签：schema, biztalk, orchestration

我有 2 个项目引用`X12_00401_214.xsd`. 我收到有关发送管道中重复模式的消息。

按照我在网上找到的建议，我创建了一个公共项目，并将映射和编排引用更改为公共项目中的模式。

当我尝试部署项目时，biztalk 会从其他已部署的 EDI 214 项目中删除架构和编排。如果我尝试重新部署以修复它，它会将它们从另一个项目中删除。

这是因为每个项目都引用了相同的通用模式，而 biztalk 正在替换模式和编排？

我尝试重新编排以确保变量是唯一的。

我在这里缺少一个步骤吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:28:45.567

我终于将问题追溯到对共享项目的引用。我把它作为项目参考引用。在每个预计的部署中，它都会重建并部署共享项目。这导致 biztalk 放弃绑定并取消部署引用共享项目的其他项目的部分。

当我将项目更改为仅引用已编译的 DLL 时，我不再遇到问题，两个项目现在都在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T04:34:13.107

> 我有 2 个引用 X12_00401_214.xsd 的项目。我收到有关发送管道中重复模式的消息。

XMLNS#Root 模式的组合必须是唯一的。没错，可以部署重复项很烦人，并且仅在运行时检测到此错误。

> 这是因为每个项目都引用了相同的通用模式，而 biztalk 正在替换模式和编排？

我相信您可能会将您的公共架构项目添加到您依赖的 EDI BizTalk 应用程序中。在这种情况下，模式程序集将被添加到两个项目的资源中，您将遇到上述问题。

这里的一般建议是将共享或框架架构、信封、管道和可能的标准异常处理 orchs 等常见工件移动到一个或多个单独的 BizTalk 应用程序（例如`EDICommon`）中，并从您的 2 个 EDI 应用程序中定义一个应用程序依赖项。[这里](http://msdn.microsoft.com/en-us/library/aa578278.aspx)有一篇深入的文章。（BizTalk 应用程序不需要任何管弦乐或实际进行任何处理 - 它可以只是工件的容器）。

一个警告 - 如果您的通用模式应用程序发生重大变化并且您需要重新部署，您将需要卸载所有依赖的应用程序。

# c# - 从字符串中提取值

> ID：13259723
> 
> 赞同：1
> 
> 时间：2012-11-06T21:28:57.957
> 
> 标签：c#, regex, string

我从 html 代码中提取字符串时遇到问题（这基本上是正则表达式的问题）。这是代码：

```
string wheretosearch = @"
<td class=""name"">
<div>
<a href=""/addr1.html"" class=""link "">
<span>Title1</span>
</a></td>

[some code]

<td class=""name"">
<div>
<a href=""/addr2.html"" class=""link "">
<span>Title2</span>
</a></td>"; 
```

我想提取标签之间的标题。我的问题是我不能将未知数量的字符放入正则表达式（.* td class=""name"" 之后的部分）：

```
<td class=""name"">.*<span>(?<title>.*)</span> 
```

简单地说：我希望正则表达式找到`<td class=""name"">`，然后在未知数量的字符后找到第一次出现的`<span>`，然后取第一个`<span>`和之间的值`</span>`。

它实际上做了什么，它只需要最后一次出现`<span>`并给出最后一个标题。

**编辑：**

好的，除了 HTML 问题，问题是：我有字符串：

*“这是一个文本：NICE。这是一个很棒的文本：NICE TOO。”*

我想取“This”，然后是未知数量的字符，然后是“：”和“。”之间的字符串。如何做到这一点？

当然，我对那个复杂表达式的每次出现都感兴趣，所以输出将是集合中的“NICE”和“NICE TOO”。

对于我的表达式，就像`"This.*(?<title>.*)."`我只得到“NICE TOO”字符串一样，正如@urlreader 提到的，它找到了最大长度匹配的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:36:47.377

```
<td class=""name"">.*?<span>(?<title>.*)</span> 
```

这是因为正则表达式试图找到最大长度匹配的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:03:02.627

对于编辑中的问题，我会尝试类似：

```
This[\w|\s]*: (?<title>[\w|\s]+)\. 
```

请记住，您必须在最后逃脱点。

您在 c# 中使用正则表达式所需的一切都在[这里](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

一个方便的工具：[http ://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)

# c# - XNA 延迟着色器，替换 BasicEffect

> ID：13259725
> 
> 赞同：0
> 
> 时间：2012-11-06T21:29:12.533
> 
> 标签：c#, xna, xna-4.0, deferred-rendering

我在我的 XNA 4.0 项目中实现了延迟着色，这意味着我需要所有对象以相同的着色器“ *RenderGBuffer.fx* ”开始。如何使用自定义内容处理器：

1.  默认情况下不加载任何纹理（我想手动执行此操作）
2.  使用“ *RenderGBuffer.fx* ”作为默认着色器而不是 BasicEffect

以下是迄今为止的工作：

```
public class DeferredModelProcessor : ModelProcessor
{
   EffectMaterialContent deferredShader;

   public DeferredModelProcessor()
   {

   }

   protected override MaterialContent ConvertMaterial(MaterialContent material, ContentProcessorContext context)
   {
       deferredShader = new EffectMaterialContent();
       deferredShader.Effect = new ExternalReference<EffectContent>("DeferredShading/RenderGBuffer.fx");         

       return context.Convert<MaterialContent, MaterialContent>(deferredShader, typeof(MaterialProcessor).Name);
   }
} 
```

# php - 如何复制基于 PHP 的网站？

> ID：13259727
> 
> 赞同：7
> 
> 时间：2012-11-06T21:29:15.047
> 
> 标签：php, installation, environment, duplication

**背景：**

我是 PHP 新手，但有人要求我进行一些代码更改以支持托管在我们 Intranet 上的应用程序。实际的代码更改看起来还不错。但是，目前没有开发环境，所以我承诺创建一个副本服务器来开发和测试我的更改。

在这一点上，并且不精通 PHP，看起来我可能不得不对生产机器上的所有 Apache HTTPD 和 PHP 配置设置/选项/包进行逆向工程，除非我可以战略性地将现有的生产环境复制到开发中机器。

**我的问题：**

1.  有可能这样做吗？即通过FTP 将Apache/PHP 安装中的某些目录复制到原始环境中？如果是这样，哪些目录？一个复杂的可能是原始环境是SUSE Linux，而开发机器是CentOS。除此之外，我在开发机器上安装了匹配的 HTTPD 和 PHP 版本。
2.  如果这不明智/不可行，我应该如何复制环境？我应该检查哪些区域？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:39:34.733

将整个内容克隆到 VM 中，提取代码并将其放入源代码存储库（例如 git）。

在你的机器上开发之后，部署到你的虚拟机（除非你可以得到另一台机器或者你有时间和耐心对克隆机器的配置进行逆向工程）。

您可以通过简单地从您的虚拟机中提取代码来开始部署，但是如果您认为您的项目可能会持续更长时间，请考虑设置一个持续集成环境并将您的虚拟机配置文件放入一个 git 存储库中，您可以在生产中重新创建它（或将您的产品与 CI 挂钩）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:48:08.850

> 我应该如何去复制环境？我应该检查哪些区域？

您绝对应该调查：

*   `/etc/httpd/`
*   `/etc/php5/`（可能是不同的名字）

特别是，从这些文件夹中包含`php.ini`的文件`httpd.conf`和开始。`apache2.conf`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T21:54:12.750

已经提到的解决方案的替代方案是在生产机器上设置虚拟主机，例如`test.yourdomain.com`将数据库复制到测试数据库。

然后您可以在测试环境中的实时服务器上测试您的站点，您只需在测试版本中更改您的数据库连接设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T21:35:30.013

**简单地克隆**服务器会容易得多，心痛也会少得多，您可能需要与照顾您的服务器的人交谈才能做到这一点。我之所以这么说是因为服务器上可能有各种模块/库和一大堆其他东西，如果你要获得应用程序，你需要很长时间才能弄清楚你需要什么在 CentOS 机器上运行完全相同。其次，如果两个环境相同，这是最佳实践，这样您就知道您的测试是可靠的。

# python - 尝试使用 python 将值插入 MySQL 表时出错

> ID：13259728
> 
> 赞同：6
> 
> 时间：2012-11-06T21:29:37.890
> 
> 标签：python, mysql

我正在尝试插入这行数据（我从元组列表中解析）

```
(0L, u'2012-11-06T16:23:36-05:00', 0L, None, 23759918L, u'baseline', u'0 to 100', nan, 105114L, 2009524L, True, u'charge', u'Charge') 
```

进入 mySQL 数据库表，但我似乎对空值 (NaN) 有问题，因为我收到此错误：

```
OperationalError: (1054, "Unknown column 'nan' in 'field list'") 
```

我已经尝试在 mySQL 中使列可以为空，并且还使所有文本字段，但仍然没有骰子..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-03T07:28:08.437

问题是这`nan`不是列的有效值`MySQL`。它只是在抱怨这一点。您的值字符串应该是：

```
(0L, u'2012-11-06T16:23:36-05:00', 0L, None, 23759918L, u'baseline', u'0 to 100', null, 105114L, 2009524L, True, u'charge', u'Charge') 
```

为此，请在脚本中添加一些逻辑以将所有`nan`值更改为`NULL`字符串。

# sql - 使用 SQL 执行 VBA

> ID：13259730
> 
> 赞同：1
> 
> 时间：2012-11-06T21:29:43.377
> 
> 标签：sql, vba, ms-access

好的，这可能是一个长镜头，但在 MS Access 中，是否可以使用 SQL 执行 VBA？我正在寻找运行单个 VBA 语句或 Sub 的查询。基本上，我要做的是使用 SQL 修改表的隐藏属性。

MS 对 Office 实现做出了足够多奇怪的决定，我有点希望这是其中一种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T21:34:32.800

您可以创建 VBA 函数并将函数的返回值用作查询中的字段表达式。但是，您必须从 Access 应用程序会话中运行查询。否则数据库引擎将无法使用您的自定义函数。

```
SELECT YourFunction() AS result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:32:32.850

自从我使用 Access 以来已经有几年（谢天谢地），但据我所知，这根本不可能。您可以使用 VBA 执行 SQL，但反之则不行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:34:43.743

[您可以在 SQL 查询 ( http://www.sqlexamples.info/SQL/inlineudf.htm](http://www.sqlexamples.info/SQL/inlineudf.htm) )中使用用户定义的函数。我怀疑 Excel 会检查你在这个函数中所做的事情，所以你可能可以做任何你喜欢的事情。

# ios - iOS：在多级 tableViews 之间移动项目的 UI 想法

> ID：13259731
> 
> 赞同：0
> 
> 时间：2012-11-06T21:29:54.903
> 
> 标签：ios, uitableview, uinavigationcontroller

我正在构建一个`iOS`应用程序，允许用户浏览 a `tableView`，单击一个单元格，然后`tableView`使用`navigationController`.

我需要能够将任何这些项目/单元格移动到导航堆栈中的另一个位置。现在我的想法是，一旦用户选择了要移动的单元格，就显示一个`modal` `tableView`允许用户在与以前相同的结构中导航的位置，但这次选择位置（通过按住）来放置这些单元格。

是否有任何其他人可能拥有的 UI 想法或聪明的编程想法可以更好地解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:20:50.643

也许看看 Apple 的 iOS Mail 如何在不同邮箱之间移动电子邮件？

这也基本上显示了一个模态视图控制器，但它通过在其父对象下方缩进嵌套项来展平层次结构。您不仅仅是选择作为目的地的项目。

这当然只有在你的层次结构不是太深的情况下才有效，否则最好像你概述的那样去做。另外，我可能会建议做的唯一一件事是也有某种视觉方法（按钮？）来选择目的地。长按本身可能不够直观。

# iphone - iOS：从 iPhone 获取 3 个字母的语言代码

> ID：13259734
> 
> 赞同：0
> 
> 时间：2012-11-06T21:30:18.133
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [在 iOS 中获取当前设备语言？](https://stackoverflow.com/questions/3910244/getting-current-device-language-in-ios)

我需要**3 个字母的语言 ISO**代码，因为它是调用另一个服务的一部分。我可以使用 NSLocale.CurrentLocale.Identifier 来获取国家代码，但不能使用设备设置的语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:28:41.157

你能做的最好的事情是：

```
 [[NSLocale preferredLanguages] objectAtIndex:0]; 
```

根据Apple docs是：

> 用户首选语言的有序列表。
> 
> 用户在配置设备时选择主要语言，如查看语言和区域设置中所述。当更高优先级语言的本地化不可用时，他们还可以按优先顺序指定一种或多种辅助语言。使用此属性可获取当前用户的语言有序列表，以区域设置标识符字符串数组的形式呈现。

您可以在此处阅读更多相关信息：[IETF BCP 47](http://en.wikipedia.org/wiki/IETF_language_tag)

您可以自己进行映射，从您返回到等效的 ISO 3 字母代码。从 iOS 调用返回的内容中只有 47 个条目，所以没什么大不了的。

# mysql - Perl/MySQL 关系查询

> ID：13259737
> 
> 赞同：2
> 
> 时间：2012-11-06T21:30:28.297
> 
> 标签：mysql, sql, perl, relationship

我有以下最终将成为网页的 perl 代码：

```
my($dbh) = DBI->connect("DBI:mysql:host=dbsrv;database=database","my_sqlu","my_sqlp") or die "Canny Connect";
my($sql) = "SELECT * FROM hardware where srv_name = \"$srv_name\"";
my($sth) = $dbh->prepare($sql);
$sth->execute();

$sth->bind_col( 1, \my($db_id));
$sth->bind_col( 2, \my($db_srv_name));
$sth->bind_col( 5, \my($db_site));
$sth->fetchrow();
$sth->finish ();
my($sql) = "SELECT sites.\`site_code\`, sites.\`long_name\` FROM \`hardware\` JOIN \`sites\` ON \`sites\`.id=\`hardware\`.\`site\` where \`hardware\`.\`id\`=\'$db_id\'";
my($sth) = $dbh->prepare($sql);
$sth->execute();
$sth->bind_col( 1, \my($db_site_code));
$sth->bind_col( 2, \my($db_long_name));
$sth->fetchrow();
$sth->finish ();
$dbh->disconnect;
print "$db_site_code<br>$db_long_name"; 
```

上面的查询确实有效，但是我想知道的是有什么方法可以运行一个 SQL 查询并从站点数据库中获取 db_site_code 和 db_long_name 而无需运行第二个查询？硬件数据库在站点数据库中有外键“id”。

当您阅读有关关系数据库的任何内容时，他们都说这是迄今为止从数据库中获取数据的最有效方法，但我看不出这比仅运行 2 个选择查询要快得多。我上面所做的肯定会比`"select from hardware where srv_name = $srv_name"`那时更长`"select from sites where id = db_site_id"`吗？任何意见都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:42:22.463

除了@tadman 建议使用占位符之外，我也会将此标记为 sql 问题，但您的解决方案是简单地添加

> srv_name = \"$srv_name\"

到您的第二个 where 子句，以便您的陈述是：

```
"SELECT sites.\`site_code\`, sites.\`long_name\` FROM \`hardware\` JOIN \`sites\` ON \`sites\`.id=\`hardware\`.\`site\` where \`hardware\`.\`id\`=\'$db_id\'"; 
```

不过，我强烈支持@tadman 的建议——尽可能使用准备好的语句和/或占位符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T22:50:02.850

这是一个如何使用占位符以及组合查询执行此操作的示例。如果我正确理解您的数据库，您可以省略第一个查询并在第二个查询中添加服务器名称而不是 ID。我可能在那里弄​​错了，但我的例子对于 Perl 的建议仍然很有价值。

```
use strict;
use warnings;
use DBI;

# Create DB connection
my $dbh = DBI->connect("DBI:mysql:host=dbsrv;database=database","my_sqlu","my_sqlp")
  or die "Cannot connect to database";
# Create the statement handle
my $sth = $dbh->prepare(<<'SQLQUERY') or die $dbh->errstr;
  SELECT s.site_code, s.long_name 
  FROM hardware h 
  JOIN sites s ON s.id=h.site 
  WHERE h.srv_name=?
SQLQUERY
$sth->execute('Server Name'); # There's the parameter
my $res = $sth->fetchrow_hashref; # $res now has a hash ref with the first row

print "$res->{'site_code'}<br>$res->{'long_name'}"; 
```

我想向您指出您的代码存在一些问题：

*   你应该**总是** `use strict`和`use warnings`. 他们让你的生活更轻松！
*   您可以离开括号`(`并`)`使用`my`. 节省您的击键并使您的代码更具可读性。
*   您可以（*但不必*，这是首选！）在没有参数的方法调用之后省略括号。自己决定。
*   正如已经指出的，在 DBI中始终使用[占位符。](https://metacpan.org/module/DBI#Placeholders-and-Bind-Values)它们非常简单。现在你不必`"`用反斜杠转义了。相反，只需使用`?`.
*   组合查询后，您可以将其放入 heredoc ( `<<'SQLQUERY'`) 中。它是一个从下一行持续到分隔符 ( `SQLQUERY`) 的字符串。这样，您的查询就更易于阅读。
*   您可以使用其中一种 ref-`fetchrow`方法将结果的所有列放入一个哈希中。我用过[`$sth->fetchrow_hashref`](http://search.cpan.org/~timb/DBI-1.622/DBI.pm#fetchrow_hashref)是因为我觉得它最方便。您已经获得了完整的行，并且所有列都被命名为哈希键。
*   如果在小范围内调用（如 short `sub`），则不需要`finish`语句句柄。一旦超出范围，它将由 Perl 自动完成并销毁。

* * *

关于性能的另一件事：如果只是偶尔运行，请不要担心。您可以使用[DBI::Profile](http://search.cpan.org/~timb/DBI-1.622/lib/DBI/Profile.pm)来分析您的查询，以查看哪种方式更快，但只有在确实需要时才应该这样做。

根据我的经验，特别是对于非常庞大的查询和非常繁忙的数据库，两三个查询比一个大查询要好得多，因为它们不会占用服务器资源。但同样，这是您需要分析和基准测试的内容（如果需要）。

# jquery - Jquery Mobile CSS Android 样式寄宿生不显示在按钮上

> ID：13259740
> 
> 赞同：0
> 
> 时间：2012-11-06T21:30:42.187
> 
> 标签：jquery, css, jquery-ui, button

希望这将是一件容易的事。使用以下样式生成 Android 菜单样式按钮（即，在活动或突出显示时，按钮上有一个较粗的彩色条。）

似乎没有任何 CSS 样式对其进行更改。我为按钮分配了正确的类。我在下面使用的边界示例是否受支持，如果支持，我的语法是否正确？如果是这样，对潜在问题有什么想法吗？

我目前正在使用最新版本的 Jquery Mobile。

谢谢人族

```
.ui-btn-active-androidmenu {
    border: 1px 1px 5px 1px solid #155678 /*{global-active-border}*/;
    z-index: 6;
    background: #387bbe /*{global-active-background-color}*/;
    font-weight: bold;
    color: transparent /*{global-active-color}*/;
    cursor: pointer;
    text-shadow: 0 /*{global-active-shadow-x}*/ -1px /*{global-active-shadow-y}*/ 1px /*{global-active-shadow-radius}*/ #145072 /*{global-active-shadow-color}*/;
    text-decoration: none;
    background-image: -webkit-gradient(linear, left top, left bottom, from( #85bae4 /*{global-active-background-start}*/), to( #5393c5 /*{global-active-background-end}*/)); /* Saf4+, Chrome */
    background-image: -webkit-linear-gradient( #85bae4 /*{global-active-background-start}*/, #5393c5 /*{global-active-background-end}*/); /* Chrome 10+, Saf5.1+ */
    background-image:    -moz-linear-gradient( #85bae4 /*{global-active-background-start}*/, #5393c5 /*{global-active-background-end}*/); /* FF3.6 */
    background-image:     -ms-linear-gradient( #85bae4 /*{global-active-background-start}*/, #5393c5 /*{global-active-background-end}*/); /* IE10 */
    background-image:      -o-linear-gradient( #85bae4 /*{global-active-background-start}*/, #5393c5 /*{global-active-background-end}*/); /* Opera 11.10+ */
    background-image:         linear-gradient( #85bae4 /*{global-active-background-start}*/, #5393c5 /*{global-active-background-end}*/);
     font-family:"RobotoRegular";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:48:50.923

### 语法错误`border`：

`border`不会占用单独的宽度。请以这种方式声明：

```
border: 1px solid #155678;
border-width: 1px 1px 5px 1px; 
```

# c# - 文件上传控件显示

> ID：13259741
> 
> 赞同：-4
> 
> 时间：2012-11-06T21:30:43.667
> 
> 标签：c#, asp.net-mvc

我们如何编写文件上传控件，使其在所有浏览器中都显示相同。每个浏览器都以不同的方式显示文件上传按钮。我们需要如何对 CSS 进行编码，以便它在所有浏览器中显示相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T23:35:58.340

你可以尝试使用这个插件： [https](https://github.com/valums/file-uploader) ://github.com/valums/file-uploader 它是一个多文件上传插件，带有进度条，拖放。主页： http: [//fineuploader.com](http://fineuploader.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:33:19.797

您必须使用 CSS 来“欺骗”浏览器以使用您自己的标签/按钮覆盖文件上传控件，以便创建在多个浏览器中的样式相同的外观。

[http://the-echoplex.net/log/how-to-style-a-html-file-upload-control-using-css-and-javascript](http://the-echoplex.net/log/how-to-style-a-html-file-upload-control-using-css-and-javascript)

# jquery - 如何停止标签中的视频？

> ID：13259744
> 
> 赞同：3
> 
> 时间：2012-11-06T21:30:52.343
> 
> 标签：jquery, video, tabs

我的网站上有一个标签界面，其中包含最后一个标签上的图像和 youtube 视频。一切正常，但是每次我切换标签时，视频都不会停止播放。有没有办法解决这个问题？提前致谢。

这就是我得到的：

[点击这里](http://www.jsfiddle.net/EPEDr/1)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T22:34:13.953

**[演示](http://jsfiddle.net/EPEDr/3/)**- 切换标签会暂停所有正在播放的视频。

通过使用**[YouTube Player API](https://developers.google.com/youtube/iframe_api_reference)**，您可以播放/暂停/停止视频。

```
<script src="//www.youtube.com/iframe_api"></script>

<iframe width="510" height="287" src="//www.youtube.com/embed/VIDEO_ID?enablejsapi=1" frameborder="0" allowfullscreen></iframe>

<script>
  $(function(){
    $('iframe[src*="//www.youtube.com/embed/"]').each(function(i) {
      this.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
    });
  });
</script> 
```

请注意`?enablejsapi=1`附加到 YouTube 嵌入 URL 中的查询字符串`iframe`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-06-09T08:56:02.763

```
<iframe class="popup-youtube-player" src="https://www.youtube.com/embed/C0DPdy98e4c?enablejsapi=1&version=3&playerapiid=ytplayer" width="640" height="360" frameborder="0" allowfullscreen="true" allowscriptaccess="always"></iframe>

$('.tabs li a').on('click', function() {

$('.popup-youtube-player')[0].contentWindow.postMessage('{"event":"command","func":"' + 'stopVideo' + '","args":""}', '*'); 
}); 
```

有关详细信息，请访问[如何在选项卡更改时暂停或停止 youtube、vimeo 和 html5 视频](http://findmecode.com/pause-stop-youtube-vimeo-html5-video-tab-change/)

# ruby-on-rails - 需要访问 Capistrano 配置变量中的当前主机名，以用于命名队列的延迟作业

> ID：13259746
> 
> 赞同：3
> 
> 时间：2012-11-06T21:31:01.203
> 
> 标签：ruby-on-rails, capistrano, delayed-job

我在delayed_job 中使用命名队列来保持任务被服务器隔离：

```
subdomain = Socket.gethostname.split('.')[0]
MyModel.delay(:queue => (subdomain + "_queue")).get_some_records 
```

当我在每台服务器上启动延迟作业时，我需要设置`--queue`标志。可以将参数传递给 delay_job CL `set :delayed_job_args`。AFAIK，Capistrano 允许使用`$CAPISTRANO:HOST$`in`run`命令，但这对我没有帮助`set`。

作为一种解决方法，我已经像这样覆盖了delayed_jobs 任务：

```
desc "Start the delayed_job process"
  task :start, :roles => lambda { roles } do
  run "cd #{current_path};#{rails_env} script/delayed_job start --queue=$CAPISTRANO:HOST$_queue #{args}"
end 
```

有没有办法按预期使用`set`？我希望能够做这样的事情：

```
set :delayed_job_args, "--queue=#{ hostname }_queue" 
```

**更新**

我发现了另一种笨拙（而不是那么干燥）的方法来做到这一点，但`set`如果可能的话，我仍然想这样做：

```
desc "Start the delayed_job process"
task :start, :roles => lambda { roles } do
  parallel do |session|
    session.when "server.host =~ /server1/", "cd #{current_path};#{rails_env} script/delayed_job start --queue=server1_queue #{args}"
    session.when "server.host =~ /server2/", "cd #{current_path};#{rails_env} script/delayed_job start --queue=server2_queue #{args}"
    session.else "cd #{current_path};#{rails_env} script/delayed_job restart #{args}"
  end
end 
```

Rails 3.2.8，delayed_job 3.0.3，capistrano 2.13.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T14:07:25.510

怎么样 … ？

```
set :delayed_job_args, "--queue=#{ $CAPISTRANO:HOST$ }_queue" 
```

我没有在 Cap 中亲自测试过这一点，但这似乎是合乎逻辑的。

# python - 如何为函数的全局字典覆盖 __setitem__？

> ID：13259749
> 
> 赞同：4
> 
> 时间：2012-11-06T21:31:14.767
> 
> 标签：python, overriding

我希望能够拦截函数内的变量赋值并执行自定义代码。我尝试创建一个自定义字典，如下所示：

```
class userdict(dict):
    def __setitem__(self, key, value):
        print 'run my code'
        dict.__setitem__(self, key, value) 
```

如果我使用它作为全局字典来执行代码，那么我的自定义代码将在每个变量分配上运行。例如：

```
UserDict = userdict()
exec 'x = 1' in UserDict
#outputs 'run my code' 
```

但是如果我的代码在函数内部，它就不起作用：

```
code = """
def foo():
    global x
    x = 1
"""
exec code in UserDict
UserDict['foo']() 
```

在这种情况下，分配了“x”，但我的自定义代码没有运行。我假设在一个函数中，全局 dict 正在以某种方式被修改而不调用 setitem。这个对吗？有没有办法拦截函数内的变量赋值并执行自定义代码？

我想这样做是为了将函数中可用的某些对象与我程序中的其他对象同步。换句话说，当函数内部发生对某些变量的赋值时，该更改应该传播到我程序中的其他变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T06:31:05.410

问题可能是内置`dict`方法不会在 CPython 的子类方法中调用覆盖。Pypy，Jython 调用自定义`__setitem__()`，以便他们在设置时立即看到`x`。

`dis`模块显示`STORE_GLOBAL`用于设置`x`：

```
>>> def f():
...     global x
...     x = 1
...
...
>>> import dis
>>> dis.dis(f)
  4           0 LOAD_CONST               1 (1)
              3 STORE_GLOBAL             0 (x)
              6 LOAD_CONST               0 (None)
              9 RETURN_VALUE 
```

它被实现`ceval.c`为：

```
 TARGET(STORE_GLOBAL)
        w = GETITEM(names, oparg);
        v = POP();
        err = PyDict_SetItem(f->f_globals, w, v);
        Py_DECREF(v);
        if (err == 0) DISPATCH();
        break; 
```

if`PyDict_SetItem()`替换为`PyObject_SetItem()`then CPython 也可以工作，即`__setitem__()`调用 custom。

# php - PHP将对象转换为字符串

> ID：13259754
> 
> 赞同：3
> 
> 时间：2012-11-06T21:31:33.940
> 
> 标签：php, string, object

我打算将返回的对象保存到文件中，以供稍后下载查看。为了清楚起见，我正在使用外部 API 服务，并收集它们的数据，以便解析到另一个数据库中。

这是我所拥有的：

```
<?php
require('class.php');
$client = new connect2Them();
$logged_in = $client->login();
if(!$logged_in){
  echo "Not connected!"; die();
}

$records = $client->get_records();
if(count($records < 1){
  echo "No records found"; die();
}

$singlerecord = $records[0];
print_r($singlerecord);

?> 
```

print_r() 工作正常，我得到了非常大量的数据。我通过命令行完成所有这些，所以我想将它保存到一个文本文件中。

我在我的 $singlerecord 下面添加了这个：

```
<?php
$myFile = "reviewLater.txt";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = $singlerecord;
fwrite($fh, $stringData);
fclose($fh);

?> 
```

我从 PHP 中得到这个错误： **PHP 警告：fwrite() 期望参数 2 是字符串，对象在....**

如何将 print_r() 放入 reviewLater.txt？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T21:32:51.677

对象可以用 PHP 的`serialize()`函数序列化并保存到文件中。稍后您可以 `unserialize()`根据需要再次使用它们。

```
$stringData = serialize($singlerecord); 
```

有趣的事实：这是将对象缓存到文件的一种方法。

参考： http: [//php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:34:01.990

如上所述，您可以序列化（），但要回答您的问题：

> 如何将 print_r() 放入 reviewLater.txt？

如果您将第二个参数设置`print_r()`为 true，则会有一个输出字符串，您可以这样操作它:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:36:01.767

如果您正在处理简单的对象（例如，不是引用自身或自定义类的对象），您可以使用`json_encode`将对象编码为 JSON 并`json_decode`稍后对其进行解码。

请参阅[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)和[http://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T21:36:41.613

既然已经给出了关于序列化数据以供以后编程使用的方法的问题，我将提到，如果您只关心人类可读的输出，您可以使用`fwrite($fh, var_export($singlerecord, true));`将人类可读的表示形式打印为字符串输出。

# visual-studio-2012 - 开始调试按钮在 VS2012 项目中不可用

> ID：13259756
> 
> 赞同：6
> 
> 时间：2012-11-06T21:31:54.113
> 
> 标签：visual-studio-2012

我正在使用 Visual Studio 2012，但没有找到用于调试的按钮开始。相反，有一个“附加”按钮。如何启用开始按钮。我从 vs2010 导入的解决方案中只有一个项目。从头开始创建新项目时，可以使用 Start。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-21T09:26:36.463

您可以通过右键单击 Visual Studio 中的项目并将其设置为“启动项目”来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T05:28:14.683

我遇到了这个问题，结果发现，即使状态栏是空白的，它仍在构建（非常缓慢）。

# django - AmbiguousTimeError Celery|Django

> ID：13259757
> 
> 赞同：0
> 
> 时间：2012-11-06T21:32:11.817
> 
> 标签：django, celery, pytz

所以我有一个 django 网站，它给了我这个 AmbiguousTimeError。我有一个工作在保存产品时激活，该产品在更新我的搜索索引之前有一个短暂的超时。看起来在夏令时进行了更新，pytz 无法弄清楚如何处理它。

我怎样才能防止这种情况在下一次 DST 小时班次时发生？

```
[2012-11-06 14:22:52,115: ERROR/MainProcess] Unrecoverable error: AmbiguousTimeError(datetime.datetime(2012, 11, 4, 1, 11, 4, 335637),)
Traceback (most recent call last):
  File "/usr/local/lib/python2.6/dist-packages/celery/worker/__init__.py", line 353, in start
    component.start()
  File "/usr/local/lib/python2.6/dist-packages/celery/worker/consumer.py", line 369, in start
    self.consume_messages()
  File "/usr/local/lib/python2.6/dist-packages/celery/worker/consumer.py", line 842, in consume_messages
    self.connection.drain_events(timeout=10.0)
  File "/usr/local/lib/python2.6/dist-packages/kombu/connection.py", line 191, in drain_events
    return self.transport.drain_events(self.connection, **kwargs)
  File "/usr/local/lib/python2.6/dist-packages/kombu/transport/virtual/__init__.py", line 760, in drain_events
    self._callbacks[queue](message)
  File "/usr/local/lib/python2.6/dist-packages/kombu/transport/virtual/__init__.py", line 465, in _callback
    return callback(message)
  File "/usr/local/lib/python2.6/dist-packages/kombu/messaging.py", line 485, in _receive_callback
    self.receive(decoded, message)
  File "/usr/local/lib/python2.6/dist-packages/kombu/messaging.py", line 457, in receive
    [callback(body, message) for callback in callbacks]
  File "/usr/local/lib/python2.6/dist-packages/celery/worker/consumer.py", line 560, in receive_message
    self.strategies[name](message, body, message.ack_log_error)
  File "/usr/local/lib/python2.6/dist-packages/celery/worker/strategy.py", line 25, in task_message_handler
    delivery_info=message.delivery_info))
  File "/usr/local/lib/python2.6/dist-packages/celery/worker/job.py", line 120, in __init__
    self.eta = tz_to_local(maybe_iso8601(eta), self.tzlocal, tz)
  File "/usr/local/lib/python2.6/dist-packages/celery/utils/timeutils.py", line 52, in to_local
    dt = make_aware(dt, orig or self.utc)
  File "/usr/local/lib/python2.6/dist-packages/celery/utils/timeutils.py", line 211, in make_aware
    return localize(dt, is_dst=None)
  File "/usr/local/lib/python2.6/dist-packages/pytz/tzinfo.py", line 349, in localize
    raise AmbiguousTimeError(dt)
AmbiguousTimeError: 2012-11-04 01:11:04.335637 
```

**编辑**：我用芹菜中的这段代码临时修复了它：

celery/worker/job.py @ 第 120 行

```
try:
     self.eta = tz_to_local(maybe_iso8601(eta), self.tzlocal, tz)
except:
     self.eta = None 
```

我不想在 pip 安装的应用程序中进行更改，所以我需要在我的代码中修复我可以解决的问题：

这在我保存我的应用程序时运行：

```
self.task_cls.apply_async(
    args=[action, get_identifier(instance)],
    countdown=15
) 
```

我假设我需要以某种方式检测我是否处于模棱两可的时间并调整倒计时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:44:04.803

> 我想我将不得不清除任务来解决这个问题，但是我怎样才能防止这种情况在下一次 DST 小时班次时发生？

目前尚不清楚您在做什么（您没有显示任何代码），但基本上您需要考虑世界的运作方式。当时间倒退一小时时，当您从本地时间转换为 UTC（或其他区域的本地时间）时，您无法避免时间不明确。

同样，您应该意识到存在“间隙”或“不可能”的时间，其中根本不会出现听起来合理的本地时间。

我不知道 Python 为您提供了哪些选项，但理想情况下，API 应该让您根据需要解决模棱两可的时间 - 无论是抛出错误，还是给您较早发生的事件、较晚的事件或其他情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:20:24.110

显然，Celery 解决了这个问题：

[https://github.com/celery/celery/issues/1061](https://github.com/celery/celery/issues/1061)

# vb.net - 在 vb.net 中动态添加和删除数据验证

> ID：13259758
> 
> 赞同：1
> 
> 时间：2012-11-06T21:32:14.307
> 
> 标签：vb.net, vsto, add-in, office-interop

我正在尝试向一个单元格添加和删除数据验证（以及 inCellDropdown）`Range`。我第一次运行它工作正常。但我在后续执行时总是会出错。

我得到的错误是“HRESULT 异常：0x800A03EC”

这是代码：

```
If type = "a1" Then
  Try
    Me.Range("A1:A20").Validation.Delete()
    Me.Range("A1:A20").Validation.Add(Type:=Excel.XlDVType.xlValidateList, _
                    AlertStyle:=Excel.XlDVAlertStyle.xlValidAlertStop, _
                    [Operator]:=Excel.XlFormatConditionOperator.xlBetween, _
                    Formula1:="=rangedname1")
  Catch ex As Exception
    MsgBox(ex.ToString)
  End Try
ElseIf type = "b2" Then
  Try
    Me.Range("A1:A20").Validation.Delete()
    Me.Range("A1:A20").Validation.Add(Type:=Excel.XlDVType.xlValidateList, _
                    AlertStyle:=Excel.XlDVAlertStyle.xlValidAlertStop, _
                    [Operator]:=Excel.XlFormatConditionOperator.xlBetween, _
                    Formula1:="=rangedname2")
  Catch ex As Exception
    MsgBox(ex.ToString)
  End Try
EndIf 
```

以前有没有人处理过这个问题？

# ios - 如何使用 GLKTextureLoader 从照片卷中以正确的方向加载纵向图像？

> ID：13259760
> 
> 赞同：1
> 
> 时间：2012-11-06T21:32:25.273
> 
> 标签：ios, uiimagepickercontroller, quartz-2d, glkit, glktextureloader

我正在使用 GLKTextureLoader 从照片卷中加载图像，但是任何时候加载以纵向纵横比拍摄的图像时，它最终都会被视为横向纵横比图像，旋转 90 度。

我相信照片卷中的 UIImage 需要使用 Quartz 进行旋转和重绘，但我真的不知道从哪里开始。我想我可能能够修改流行的 UIImage+Resize.h 库，但是当我尝试加载一个使用该库简单调整大小的 UIImage 时，GLKTextureLoader 失败，提示我它所依赖的一些信息丢失了过程。

# ruby-on-rails - 关联 has_many 计数超过 1 的 Rails 条件

> ID：13259763
> 
> 赞同：1
> 
> 时间：2012-11-06T21:32:40.360
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

包.rb

```
has_many :deals 
```

交易.rb

```
belongs_to package 
```

现在简单的问题是我想获得所有交易数量超过一个的包裹。最好的方法是什么？`where(:available_for_purchase => true)`和`self.deals.count > 0`

（包.rb）

```
 class << self
    def available
      where(:available_for_purchase => true)
    end
  end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T21:51:00.920

```
def self.available
  joins(:deals).where(:available_for_purchase => true).uniq
end 
```

加入该`deals`协会将`Packages`无需任何交易即可移除... SQL 正在这里做着艰苦的工作。

然后使用：

```
Package.available 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T21:45:06.453

我将使用计数器缓存将交易计数作为 Package 模型上的列提供给您，然后您可以使用 SQL 作为条件。

包.rb

```
has_many :deals
def with_deals
  where("deals_count > 0")
end 
```

交易.rb

```
belongs_to :package, :counter_cache => true 
```

然后你可以打电话：

```
Package.with_deals 
```

您可以在此处查看如何设置计数器缓存的示例： [http ://railscasts.com/episodes/23-counter-cache-column](http://railscasts.com/episodes/23-counter-cache-column)

# php - MySql 如何使用 PHP 检索和显示照片

> ID：13259766
> 
> 赞同：0
> 
> 时间：2012-11-06T21:32:51.500
> 
> 标签：php, mysql, file, variables

我有一个 PHP 网站，我在本地上传了 10 张图片。图片保存在`./images`文件夹中，并重新采样到`./thumbnails`文件夹中。我使用此查询从数据库中提取 7 个照片文件名。

```
$imgQuery = "SELECT FileName, Title, Description FROM PICTURE WHERE OwnerID='$id' LIMIT 0,7"; 
```

数据库保存`PictureID`（PK），`OwnerID`（UNQ，我的id是2），`FileName`（存储文件名）和`Title`为图片和`Description`为图片。我使用这种方法将 7 个照片文件名、标题和描述传输到一个数组。但是我怎样才能从我的`./thumbnails`文件夹中提取它们并将它们显示在我的 PHP 页面上呢？

```
if($imgResult = mysqli_query($link, $imgQuery))
{
 while($imgRow = mysqli_fetch_row($imgResult))
 {

    $filename[] = $imgRow[0];
    $title[] = $imgRow[1];
    $description[] = $imgRow[2];
 }
} 
```

这是我`t1`在正文中显示缩略图的地方。我想知道如何将我的数据库检索到的文件分配给这些变量。描述会根据我的名字而改变

```
$num = count($filename);
while($i < $num)
{
$i = 0;
print <<<photo
<body>
<form action='MyAlbum.php' method='post'>
    <table>
        <tr><td colspan='7' ><h2 align='center'><?php echo $name;?>'s Album</h2></td>
        </tr>
        <tr><td colspan='7' ><?php echo $title[$i];?></td>
        </tr>
        <tr><td colspan='5' ><?php echo $filename[$i]; ?></td><td colspan='2'><?php echo $description[$i];?> </td>
        </tr>
        <tr>
            <td><?php  echo $filename[0];?></td> <td><?php  echo $filename[1];?></td> <td><?php echo $filename[2];?></td> 
            <td><?php echo $filename[3]; ?></td><td><?php echo $filename[4]; ?></td> <td><?php echo $filename[5]; ?></td> 
            <td><?php echo $filename[6]; ?></td> 
        </tr>
    </table>
</form>
$i++;
</body>
</html>

photo;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:37:09.657

你可以做

```
<img src="<?php echo $filePath;?>" alt="some_text"> 
```

只需确保 $filePath 的变量是文件夹中实际图像的 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:40:52.220

这完全取决于你没有说的两件事：全分辨率保存在“FileName”中的文件名，里面分配了什么名称`thumbnails`？并且`FileName`包含完整路径，还是仅包含“裸”文件名？

```
// If
// FileName = "/images/LenaSjooblom.jpg", thumbnail is "./thumbnails/LenaSjooblom.jpg"
// Then
$Thumbnail = './thumbnails/' . basename($FileName);

// If
// FileName = "LenaSjooblom.jpg", thumbnail is "./thumbnails/LenaSjooblom.jpg"
// Then
$Thumbnail = './thumbnails/' . $FileName;

// If
// FileName = "/images/LenaSjooblom.jpg", thumbnail is "./thumbnails/12.jpg"
// Then
$Thumbnail = './thumbnails/' . $PictureID . '.jpg'; 
```

您将上面的代码放入同一个循环中，例如：

```
$filename[] = $imgRow[0];
$title[] = $imgRow[1];
$description[] = $imgRow[2];

// ADDED THUMBNAIL - hypothesis 1
$thumbnail[] = "./thumbnails/".basename($imgRow[0]); 
```

并且可以显示

```
<img src="$thumbnail[$i]" /> 
```

## 更新

如果您的缩略图是文件名的副本，那么您不需要其他任何东西 - 您只需更改 HTML，然后添加：

```
<img src="./thumbnails/$filename[$i]" /> 
```

*它将指示浏览器从缩略图目录*中获取与图像同名的文件名。（如果一开始不起作用，请检查路径；在紧要关头，使用绝对路径，例如 " `/thumbnails/$filename[$i]`" ）。

# python - python cElementTree 使用太多内存

> ID：13259768
> 
> 赞同：0
> 
> 时间：2012-11-06T21:33:15.190
> 
> 标签：python, xml, elementtree

我有以下代码段

```
import xml.etree.cElementTree as et

fstring = open(filename).read()
tree = et.fromstring(fstring)

for el in tree.findall('tag'):
    do stuff 
```

但是，fstring 是巨大的（约 80mbs 的数据），当我尝试将字符串转换为树时遇到“内存不足”错误。有没有办法解决这个问题，也许是对树的某种懒惰评估？

谢谢！

编辑：

我尝试使用 iterparse，但它仍然在 iterparse 调用上给我 MemoryError。有没有办法将文件分成多个块并一个一个地处理它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:38:03.917

看看[`iterparse`](http://effbot.org/zone/element-iterparse.htm)：

> 例如，要解析大文件，您可以在处理完元素后立即删除它们：
> 
> ```
> for event, elem in iterparse(source):
>     if elem.tag == "record":
>         ... process record elements ...
>         elem.clear() 
> ```

# android - SurfaceView 不显示

> ID：13259771
> 
> 赞同：3
> 
> 时间：2012-11-06T21:33:25.430
> 
> 标签：android, layout, surfaceview

我有一个当我按下按钮时调用的类，用作背景的 .xml 文件只是一个黑屏。当我运行我的应用程序时，我收到此错误：

```
FATAL EXCEPTION: main
java.lang.NullPointerException
  at com.synlight_development.tattoo_it.Menu$2.onClick(Menu.java:71)
  at android.view.View.performClick(View.java:2532)
  at android.view.View$PerformClick.run(View.java:9293)
  at android.os.Handler.handleCallback(Handler.java:587)
  at android.os.Handler.dispatchMessage(Handler.java:92)
  at android.os.Looper.loop(Looper.java:150)
  at android.app.ActivityThread.main(ActivityThread.java:4263)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:507)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T09:24:41.590

因为surfaceView 默认显示在窗口底部。

尝试这个

```
 v.setZOrderOnTop(true);  //it puts surfaceview to top of your window. 
```

或者也可以在您的 SView 类中在构造函数等中设置这些参数。

```
 setZOrderOnTop(true); 
```

如果你想使用 GlSurfaceView。在构造函数中试试这个，

```
 setEGLConfigChooser(8,8,8,8,16,0);
   getHolder().setFormat(PixelFormat.TRANSLUCENT); 
```

因此，您的表面视图变得透明。

如果你尝试把你的surfaceView放到窗口的中间层，它比这更难

```
 surfaceView.setZOrderMediaOverlay(true); 
```

而且您还看到了黑屏，因为您的表面视图需要另一个表面视图才能到达顶部。我解决了这个问题，我创建了另一个surfaceView（也许你想使用CameraView等）。和绘制的背景图像，和其他surfaceView 得到顶部，并添加另一个像这样的窗口顶部的视图。

1.Layer -> backgroundDrawnSurfaceView

2.Layer（中间层）->myrealSurfaceView

3.Layer -> 另一个视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:00:01.397

您编辑了您的问题

首先你添加 SView 动作监听器本身。之后，在编辑器活动 onCreate 中，您将 onTouch 侦听器添加到您的 SView、编辑器。并没有找到线程。

试试这个解决方案-> 删除

```
 v.setOnTouchListener(this); 
```

并添加

```
 sleep(50); 
```

在 SView 中，触摸监听器。

# c# - 从 ajax 调用 WebApi 时，如何调试 500 内部服务器错误？

> ID：13259774
> 
> 赞同：16
> 
> 时间：2012-11-06T21:33:41.043
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-web-api

我在 MVC 4.5 WebApi 项目中收到 500 内部服务器错误。我可以使用 GET 和带有 Id 的 GET 成功调用我的 web 服务。但是，当我发布一个文件时，我收到了错误。我可以设置一个断点`Application_BeginRequest()`并确认我首先收到一个 OPTIONS 请求，然后是 POST。控制器中的方法没有被调用，我已经`Application_Error()`向 Global.asax.cs 添加了一个也没有被命中的方法。html 页面正在执行 CORS，但我已经使用[ThinkTecture.IdentityModel](http://nuget.org/packages/Thinktecture.IdentityModel)进行了处理。我正在按照[此处](https://stackoverflow.com/questions/5392344/sending-multipart-formdata-with-jquery-ajax)的代码进行文件上传。

有任何想法吗？

这是客户端代码：

```
 <script type="text/javascript">
        var UploadDocument = function () {
            var url = sessionStorage.getItem("url");
            var auth = sessionStorage.getItem("auth");
            var data = new FormData();

            jQuery.each($('#fileToUpload')[0].files, function (i, file) {
                data.append('file-' + i, file);
            });

            jQuery.support.cors = true;
            $.ajax({
                type: "POST",
                url: url,
                data: data,
                cache: false,
                processData: false,
                contentType: false,
                //dataType: "json",
                headers: { Authorization: 'Basic ' + auth },
                crossDomain: true,
                success: function (data, textStatus, jqXHR) {
                    alert('Success');
                },
                error: function (jqXHR, textStatus, errorThrown) { alert('Error: ' + textStatus + ' ' + errorThrown.message); }
            });
        };

    </script> 
```

我的控制器代码如下所示：

```
 public int Post(HttpPostedFileBase FileToUpload)
    {
        // Do stuff with the file
    } 
```

请求和响应如下所示：

```
Request URL:http://localhost:51234/api/TaxDocument
Request Method:POST
Status Code:500 Internal Server Error

Request Headers
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Authorization:Basic YmNhbGxlbjpuZWxsYWM=
Connection:keep-alive
Content-Length:2054044
Content-Type:multipart/form-data; boundary=----WebKitFormBoundaryIGzPKhvRVwFXbupu
Host:localhost:51234
Origin:http://localhost:52386
Referer:http://localhost:52386/Upload.html
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4

Response Headers:
Access-Control-Allow-Credentials:true
Access-Control-Allow-Origin:http://localhost:52386
Cache-Control:no-cache
Content-Length:1133
Content-Type:application/json; charset=utf-8
Date:Tue, 06 Nov 2012 21:10:23 GMT
Expires:-1
Pragma:no-cache
Server:Microsoft-IIS/8.0
X-AspNet-Version:4.0.30319
X-Powered-By:ASP.NET
X-SourceFiles:=?UTF-8?B?QzpccHJvamVjdHNcU2F2ZU15VzJcU2F2ZU15VzIuV2Vic2VydmljZVxhcGlcVGF4RG9jdW1lbnQ=?= 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-06T21:35:50.543

To see all exceptions turn following setting on:

*   VS 2013 (and below): Debug -> Exceptions -> CLR - check "when thrown".
*   VS 2015: Debug -> Windows -> Exception Settings -> CLR

You may need to uncheck "Tools->Options->Debugging->My code only" option if exception is thrown really outside of your code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-25T09:15:47.873

您可以尝试注册到处理请求的对象的`Error`事件：`HttpApplication`

```
HttpApplicationReference.Error += ErrorHandler; 
```

处理错误的方法：

```
public void ErrorHandler(object sender, EventArgs e)
{
    System.Diagnostics.Debug.Write(
        ((System.Web.HttpApplication)sender).Server.GetLastError().ToString()
    );
} 
```

# javascript - 从 jquery 中的对象中检索属性 - 使用选择器但不使用对象

> ID：13259775
> 
> 赞同：0
> 
> 时间：2012-11-06T21:33:45.320
> 
> 标签：javascript, jquery, object, attributes, selector

```
$(document).bind("insertListener", function(event, elem, param1, param2) {

alert($($(elem)+[attr_a][attr_b!=y]));
}); 
```

无法在那里提醒真假。

elem 是对象，我知道上面的代码如何使用 id 或使用类名作为选择器：

```
$(".selector[attr_a][attr_b!=y]") 
```

但是如果选择器是对象，那么语法会如何。抱歉，如果这太简单了，我自己无法弄清楚并且找不到合适的文档。我也尝试过使用其他语法，但没有奏效。

```
$(elem[attr_a][attr_b!=y]);
$($(elem)[attr_a][attr_b!=y]);
elem[attr_a][attr_b!=y]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:35:52.407

```
$(elem).is('[attr_a][attr_b!=y]') 
```

[**Fiddle**](http://jsfiddle.net/FMpaE/1)

[`.is()` Reference](http://api.jquery.com/is/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:37:13.623

```
var elem = {
    "id" : "myImage"
};

var sel = '#' + elem.id + '[attr_a][attr_b!=y]'  ; // Assuming it is an ID

alert($(sel)); 
```

或者

```
 var sel = '#' + elem.id ;

 alert( $(sel).filter('[attr_a][attr_b!=y]')) ; 
```

# .net - Visual Studio 充满黑色强制重启

> ID：13259784
> 
> 赞同：1
> 
> 时间：2012-11-06T21:34:20.927
> 
> 标签：.net, visual-studio-2010, visual-studio

Visual Studio 2010 在鼠标移动的任何地方都会充满黑色，重新启动 VS 是摆脱它的唯一选择。有人遇到过这个问题吗？这是随机发生的，这个恼人的错误对我来说很常见。

任何解决此问题的帮助将不胜感激。

![在此处输入图像描述](../Images/27ae70ec9d5da58554ce1389410f8e01.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:36:30.597

尝试转到工具->选项->环境->常规并取消选中“根据客户端性能自动调整视觉体验”，然后取消选中“使用硬件图形加速（如果可用）。

已知此功能会导致应用程序呈现出现一些问题，并且可能会为您提供解决方案。

![在此处输入图像描述](../Images/1ef912fd04488b7c247939933ac36dca.png)

# ruby-on-rails - 使用 Ruby on Rails 创建一个分层的、optgrouped 的下拉列表

> ID：13259788
> 
> 赞同：0
> 
> 时间：2012-11-06T21:34:24.477
> 
> 标签：ruby-on-rails, ruby

我正在尝试为 Web 应用程序创建一个下拉选择列表。此列表必须有 optgroups，必须有缩进（使用`--`），并且组名必须是选项本身。由于 optgrouping 是一项要求，因此我需要使用其中一个[group option helpers](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)。由于一切都在一个模型中，我选择了`grouped_options_for_select`.

我有一个实用的解决方案，但它很乱。有什么办法可以让这个更整洁吗？特别是对于辅助方法`grouped_categories`，有没有更好的方法来创建嵌套数组，这样我就不需要多次调用数据库了？

风景;

```
<%= f.label :category_id %>
<%= f.select :category_id, grouped_options_for_select(grouped_categories.map{ |group| [group.first.name, group.second.map{|c| [c.name, c.id]}]}) %> 
```

助手；

```
module CategoryHelper
 #building an array of elements (optgroup, members), where optgroup is one category object instance,
 # and members contains all category objects belonging to the optgroup, including the opt group object itself
 def grouped_categories
   @grouped_array = []
   Category.where("parent_id is null").each do |g|
     members = []
     members << g
     Category.where("parent_id = ?", g.id).each do |c|
       indent_subcategory(c)
       members << c
       Category.where("parent_id = ?", c.id).each do |s|
         indent_subsubcategory(s)
         members << s
       end
     end
     group = [g, members]
     @grouped_array << group
   end
   @grouped_array
 end

 def indent_subcategory(cat)
   cat.name = '--' + cat.name
 end

  def indent_subsubcategory(cat)
    cat.name = '----' + cat.name
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:47:58.750

我会考虑在您的模型上[使用 Ruby 工具箱的 ActiveRecord 嵌套类别](https://www.ruby-toolbox.com/categories/Active_Record_Nesting)`awesome_nested_set`或其他选择。他们有帮助器，可以通过单个查询为您提供整个树，有些甚至有 Rails 的视图帮助器。

# iphone - upload to app store but not public

> ID：13259789
> 
> 赞同：0
> 
> 时间：2012-11-06T21:34:26.403
> 
> 标签：iphone, ios, app-store

i am currently looking for a deploying solution for an iPhone app.

is it possible to upload an app to the app store so it won't be shown in the search but only with a direct link to the app? i am trying to create a private beta with more than 100 people so i can't use testflight solution

thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:35:19.477

You cannot do that due to Apple restrictions. When an app is in the appstore, it is public.

The only (legal way that I know of) to do what you want is to become a member of the [iOS Developer Enterprise Program](https://developer.apple.com/programs/ios/enterprise/) - or use a solution such as Testflight, and live with the 100 device limit. The Enterprise Program lets you distribute apps across an organization without restrictions.

# objective-c - 如何在自定义 UITableView 中获取文本字段

> ID：13259793
> 
> 赞同：2
> 
> 时间：2012-11-06T21:34:32.667
> 
> 标签：objective-c, ios, uitableview, uitextfield

非常初学者的 obj-c 问题。

我有两个部分的普通 UITableView，但我现在只对第一部分感兴趣。此部分有四个自定义单元格（继承自标准 UITableViewCell），它们有一个 UITextField 作为属性。

我需要使用按钮“下一步”、“上一个”（用于在表格视图中的文本字段之间切换）和“完成”（关闭键盘）来改进自定义输入附件视图。[http://uaimage.com/image/62f08045](http://uaimage.com/image/62f08045)

在 -textFieldShouldReturn 中，我将 textFields 的标签设置为从 0 到 3。我的下一个计划是将 textFields 添加到 -viewDidLoad 中的 NSMutableArray 中，然后设置并辞去 textFields 的第一响应者。“下一步”按钮的大致代码清单：

```
- (void) inputAccessoryViewDidSelectNext:(FDInputAccessoryView *)view {
    for (UITextField *textField in [self textFieldsArray]) {

        if ([textField isFirstResponder]) {

            [textField resignFirstResponder];
     UITextField *field = [[self textFieldsArray] objectAtIndex:textField.tag + 1];
            [field becomeFirstResponder];
        }

    }
} 
```

问题：

*   这是正确的方法还是有更好的方法来解决问题？
*   我是否需要在它们内置的内容中标记文本字段或使用单元格的 indexPath？（或者什么是最好的跟踪文本字段？）
*   主要问题是：从单元格中“获取”文本字段的语法是什么？

对不起，愚蠢的问题，我是一个非常初学者。

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T22:04:19.300

我认为您的想法是正确的，但我想到了一些事情：

*   为了安全起见，不要从标记号 0 开始。每个视图都有一个默认为 0 的标记号，因此您可能会得到意想不到的结果。
*   不要在 中设置文本视图的标签，在或`textFieldShouldReturn`中设置标签，无论您在哪里初始化 textFields。`cellForRowAtIndexPath``viewDidLoad`
*   将 textFields 添加到单元格的 contentView，而不是单元格本身。
*   您不必从第一个文本字段中退出第一响应者，您只需`becomeFirstResponder`在新的文本字段中即可。
*   确保您正在处理最后一个文本视图边缘情况：您可以循环到第一个文本字段或在最后关闭键盘。

如果要获取单元格中的 textField：

```
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:
                         [NSIndexPath indexPathForRow:ROW_NUMBER inSection:1]];
UITextField *textField = (UITextField *)[cell.contentView viewWithTag:TEXT_FIELD_TAG]; 
```

# sdk - Visual Studio 2012 SDK installation

> ID：13259796
> 
> 赞同：0
> 
> 时间：2012-11-06T21:34:39.233
> 
> 标签：sdk, visual-studio-2012, vsix

I have ultimate version of visual studio 2012 today I downloaded and installed Visual Studio 2012 SDK which suppose to add project templates under Visual studio new project dialog, but there is nothing displayed the only project template I see under Visual c#-> Extensibility is Visual studio package. can anyone help me out with this problem? I am using RTM version of VS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T05:35:10.843

这通常是因为您的目标 .NET Framework 版本（位于“新建项目”对话框的顶部）设置为 .NET Framework 4.5 以外的版本。

# wordpress - 邮编搜索wordpress插件

> ID：13259801
> 
> 赞同：0
> 
> 时间：2012-11-06T21:34:56.050
> 
> 标签：wordpress

有没有人知道一个 wordpress 插件，当搜索匹配的邮政编码以执行可选操作（如显示位置）时，该插件允许将邮政编码的 csv 文件加载到数据库中

我们的客户拥有服务于特定区域的多个区域。他们为我们提供了一个 CSV 文件，其中显示了为每个位置提供的邮政编码列表，因此访问者只需搜索他们的邮政编码，服务该区域的公司就会出现......

我们不需要显示地图或类似的东西，只需显示该位置的联系信息......我一直在寻找一种简单的方法来做到这一点，但还没有找到......只是想知道是否有什么问题在我们用mysql做这个之前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:18:45.330

有一些用于 CSV 导入的插件，但它们似乎处理的是 Post import 而不是邮政编码数据等自定义数据。

这可能不是最好的方法，但我会使用像 Navicat 这样的工具在您的数据库中为邮政编码数据创建一个新表，然后在您的主题中创建一个模板来搜索该表以获得您的结果。我相信 phpMyAdmin 也会将 CSV 导入表中，并且 WordPress 有一个插件[Portable phpMyAdmin](http://wordpress.org/extend/plugins/portable-phpmyadmin/)。

示例：您可以使用[wpdb 类](http://codex.wordpress.org/Class_Reference/wpdb)连接到您的邮政编码表并返回您需要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-21T04:44:08.797

wordpress（主要是 woocommerce）和其他平台只有几个插件可以让你做到这一点。woocommerce 服务可用性邮政编码搜索应用程序专注于电子商务。[https://www.google.com/search?q=woocommerce+delivery+area+plugin](https://www.google.com/search?q=woocommerce+delivery+area+plugin)

如果您正在寻找更灵活的东西，请查看[https://deliverychecker.co](https://deliverychecker.co)

# vba - VBA code to check each sheet, locate a cell containing =TODAY() function, and select that cell

> ID：13259807
> 
> 赞同：1
> 
> 时间：2012-11-06T21:35:16.430
> 
> 标签：vba, excel

I have a workbook with 12 worksheets each named JANUARY through FEBRUARY.

Only the current month's sheet (e.g., NOVEMBER) will ever contain a cell containing the function `=TODAY()` in mm/dd/yyyy date format.

When I open the workbook, I want to automatically activate the Sheet that contains this cell (in my instance Cell `N2`) and `Select` it. I am truly a newbie learning slowly, but knowledge is minimal and can't find what I need. This what I have so far, but it doesn't work:

```
Sub ChooseSheet()
Dim SearchString As Variant

SearchString = "TODAY()"       'string I am searching for

Do Until SearchString = "TODAY()"
If Application.WorksheetFunction.CountIf(Sheets("Sheet1").Columns(14), SearchString) > 0 Then
Worksheets("Sheet1").Activate
            End If
        Exit Do                
Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:10:48.713

这对我有用。

```
Sub searchToday()

    Dim sh As Worksheet
    Dim found As Range

    For Each sh In ActiveWorkbook.Worksheets
        Set found = sh.Cells.Find(what:="=TODAY()", LookIn:=xlFormulas)
        If Not found Is Nothing Then
           sh.Activate
           found.Select
           Exit Sub
        End If
    Next sh

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T22:11:23.127

```
Sub Test()

Dim ws As Worksheet
Dim f As Range

    For Each ws In ActiveWorkbook.Worksheets
        Set f = ws.Cells.Find(What:="=TODAY()", LookIn:=xlFormulas, LookAt:=xlWhole)
        If Not f Is Nothing Then
            ws.Activate
            f.Select
            Exit For
        End If
    Next ws

End Sub 
```

# java - "complete action using" dialog popping up when it shouldn't

> ID：13259811
> 
> 赞同：1
> 
> 时间：2012-11-06T21:35:39.403
> 
> 标签：java, android

I have an app that has 2 buttons: one does a calculation, the other launches a website with a browser. When the user clicks on button1, the answers should display. When the user clicks on button2, the browser will direct them to a website. The trouble is: clicking on button1 causess a "Complete action using" dialog to pop up, prompting the user to pick one of 4 things (application, process, etc.). This didn't happen before and is quite odd. The only thing I can think of is maybe a problem with the onclicklistener and button1 doesn't have a new intent so I don't know how this dialog is coming up.

Here is the manifest:

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.example.costaload"
 android:versionCode="1"
 android:versionName="1.0" >

 <uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

 </application>

 </manifest> 
```

Here is my code:

```
package com.example.costaload;

import com.example.costloads.R;
import java.text.DecimalFormat;
import java.text.NumberFormat;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.Button;
import android.widget.TextView;
import android.view.View;
import android.view.View.OnClickListener;

public class MainActivity extends Activity {
EditText mile, diesel;
Button button1, button2;
TextView tv, tv2, tv3;
private double x, y, z, costper, gallon, litres, ophours, stopdrive;
CheckBox checkBox1, checkBox2, checkBox3, checkBox4;
NumberFormat format = NumberFormat.getCurrencyInstance();

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
mile = (EditText) findViewById(R.id.mile);
checkBox1 = (CheckBox) findViewById(R.id.checkBox1);
checkBox2 = (CheckBox) findViewById(R.id.checkBox2);
checkBox3 = (CheckBox) findViewById(R.id.checkBox3);
checkBox4 = (CheckBox) findViewById(R.id.checkBox4);
button1 = (Button) findViewById(R.id.button1);
button2 = (Button) findViewById(R.id.button2);
button1.setOnClickListener(button1onClickListener);
OnClickListener button2onClickListener = null;
button2.setOnClickListener(button2onClickListener);
tv = (TextView) findViewById(R.id.cost);
tv2 = (TextView) findViewById(R.id.cpm);
tv3 = (TextView) findViewById(R.id.gallons);
diesel = (EditText) findViewById(R.id.diesel);
}

private OnClickListener button1onClickListener = new OnClickListener() {
   public void onClick(final View v) {

    x = Double.parseDouble(mile.getText().toString());
    y = Double.parseDouble(diesel.getText().toString());
    if (checkBox2.isChecked()) {
        x = x * 2;
    }
    if (checkBox1.isChecked()) {
        x = x * 0.62137;
    }
    ophours = 0;
    ophours = (x / 55) + 2;
    if (ophours >= 11) {
        stopdrive = (ophours / 10) - 1;
        if (stopdrive > 1) { // This block isn't closed.
            ophours = ophours + (stopdrive * 10);
        }
        gallon = x / 5.5;
        if (checkBox4.isChecked()) {
            gallon = gallon + (ophours * 1.1);
        }
        if (checkBox3.isChecked()) {
            litres = gallon * 3.785;
            tv3.setText(new DecimalFormat("####.##").format(litres)
                    + "L");
        }
        z = (gallon * y) + (x * 0.655);
        costper = z / x;
        tv.setText(format.format(z));
        tv2.setText(format.format(costper) + "/mile");
        tv3.setText(new DecimalFormat("####.##").format(gallon)
                + "gal.");
    }
    ;
};

private OnClickListener button2OnClickListener = new OnClickListener() {
    public void onClick(final View v) {

        Intent browserIntent = new Intent(Intent.ACTION_VIEW,
                Url.parse("http://www.ratenroll.com"));
        startActivity(browserIntent);
    }
  };
 };
}; 
```

Here is the activity xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="# of miles"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="40dp"
    android:text="Price of diesel"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/diesel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView2"
    android:layout_alignBottom="@+id/textView2"
    android:layout_alignLeft="@+id/mile"
    android:layout_alignParentRight="true"
    android:ems="10"
    android:inputType="numberDecimal" />

<EditText
    android:id="@+id/mile"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/checkBox3"
    android:ems="10"
    android:inputType="numberDecimal" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:text="Visit www.ratenroll.com" />

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/diesel"
    android:layout_marginTop="14dp"
    android:text="Kilometres (not miles)" />

<CheckBox
    android:id="@+id/checkBox2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/checkBox1"
    android:layout_alignBottom="@+id/checkBox1"
    android:layout_alignParentRight="true"
    android:text="Round trip" />

<CheckBox
    android:id="@+id/checkBox3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/checkBox1"
    android:text="Litres (not gallons)" />

<CheckBox
    android:id="@+id/checkBox4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/checkBox3"
    android:layout_alignBottom="@+id/checkBox3"
    android:layout_alignParentRight="true"
    android:text="Reefer load" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/checkBox3"
    android:layout_marginTop="50dp"
    android:layout_toRightOf="@+id/textView2"
    android:text="Compute" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/button1"
    android:layout_marginTop="26dp"
    android:text="Total Cost"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView3"
    android:text="Cost per mile"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/cost"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView4"
    android:layout_alignParentRight="true"
    android:text=" "
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/cpm"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView4"
    android:layout_alignBottom="@+id/textView4"
    android:layout_alignParentRight="true"
    android:text="   "
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/textView4"
    android:layout_below="@+id/textView4"
    android:text="Fuel required"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/gallons"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView5"
    android:layout_alignBottom="@+id/textView5"
    android:layout_alignParentRight="true"
    android:text="   "
    android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

Thank you for looking.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:43:30.563

那个额外的支架在这里做什么？

```
tv3.setText(new DecimalFormat("####.##").format(gallon)+"gal.");
         break;}  // did you mean to do this? 
```

`break;`在第二个 case 语句中将大括号移到 after 。

PS 请养成正确缩进代码和对齐大括号的习惯。还可以使用 IDE 的自动代码格式化功能来保持整洁。它会让你的事情变得更容易。

PPS 对于其他读者。为什么这甚至可以编译，因为第二个 case 语句现在在 switch 之外？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T22:37:39.270

您将相同的 onClickListener 添加到两个按钮并使用 switch 语句来区分它们的方法容易出错。

```
package com.example.costaload;

import java.text.DecimalFormat;
import java.text.NumberFormat;

import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.Button;
import android.widget.TextView;
import android.view.View;
import android.view.View.OnClickListener;

public class MainActivity extends Activity {
    EditText mile, diesel;
    Button button1, button2;
    TextView tv, tv2, tv3;
    private double x, y, z, costper, gallon, litres, ophours, stopdrive;
    CheckBox checkBox1, checkBox2, checkBox3, checkBox4;
    NumberFormat format = NumberFormat.getCurrencyInstance();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mile = (EditText) findViewById(R.id.mile);
        checkBox1 = (CheckBox) findViewById(R.id.checkBox1);
        checkBox2 = (CheckBox) findViewById(R.id.checkBox2);
        checkBox3 = (CheckBox) findViewById(R.id.checkBox3);
        checkBox4 = (CheckBox) findViewById(R.id.checkBox4);
        button1 = (Button) findViewById(R.id.button1);
        button2 = (Button) findViewById(R.id.button2);
        button1.setOnClickListener(button1onClickListener);
        button2.setOnClickListener(button2OnClickListener);
        tv = (TextView) findViewById(R.id.cost);
        tv2 = (TextView) findViewById(R.id.cpm);
        tv3 = (TextView) findViewById(R.id.gallons);
        diesel = (EditText) findViewById(R.id.diesel);
    }

    private OnClickListener button1onClickListener = new OnClickListener() {
        public void onClick(final View v) {

            x = Double.parseDouble(mile.getText().toString());
            y = Double.parseDouble(diesel.getText().toString());
            if (checkBox2.isChecked()) {
                x = x * 2;
            }

            if (checkBox1.isChecked()) {
                x = x * 0.62137;
            }

            ophours = 0;
            ophours = (x / 55) + 2;

            if (ophours >= 11) {
                stopdrive = (ophours / 10) - 1;
            }
            if (stopdrive > 1) {
                ophours = ophours + (stopdrive * 10);
            }

            gallon = x / 5.5;

            if (checkBox4.isChecked()) {
                gallon = gallon + (ophours * 1.1);
            }

            if (checkBox3.isChecked()) {
                litres = gallon * 3.785;
                tv3.setText(new DecimalFormat("####.##").format(litres) + "L");
            }

            z = (gallon * y) + (x * 0.655);
            costper = z / x;
            tv.setText(format.format(z));
            tv2.setText(format.format(costper) + "/mile");
            tv3.setText(new DecimalFormat("####.##").format(gallon) + "gal.");
        }

    };

    private OnClickListener button2OnClickListener = new OnClickListener() {
        public void onClick(final View v) {

            Intent browserIntent = new Intent(Intent.ACTION_VIEW,
                    Uri.parse("http://www.ratenroll.com"));
            startActivity(browserIntent);
        }
    };
}; 
```

我没有更改您的 xml 文件。

祝你好运。

# crystal-reports - 确定 Crystal Reports 页面是否包含字符串

> ID：13259815
> 
> 赞同：1
> 
> 时间：2012-11-06T21:35:53.590
> 
> 标签：crystal-reports

是否可以检查 Crystal Reports 中的页面是否包含特定字符串？

例如，我想在所有页面中搜索“今天”这个词，如果在页面上找到，则在页脚上显示一个“找到文本”的注释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:01:17.873

将此公式添加到页眉部分，然后取消它：

```
// {@reset}
// reset arrays
WhilePrintingRecords;
Booleanvar found:=false; 
```

将此公式添加到详细信息部分，然后将其隐藏；

```
// {@test}

WhilePrintingRecords;
Booleanvar found;

if Instr({table.field},"Today") > 0 Then found:=true; 
```

将此公式添加到页脚部分：

```
// {@display}
// display the text that was found

WhilePrintingRecords;
Booleanvar found;

if found then "Text found"; 
```

# c# - Editable combobox with valid selection

> ID：13259816
> 
> 赞同：2
> 
> 时间：2012-11-06T21:35:58.527
> 
> 标签：c#, .net, wpf

I have a editable combobox in WPF (IsEditable=True). I would also like to ensure that the values which the user enters are in the list only. I don't want user to add their own values to the combo. I cannot make IsReadonly=true as that will not allow users to type. So is validation the only option in SelectionChange event? or is there a better way to do the same?

Thanks Shankara Narayanan.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T23:30:29.990

我这样做是为了让用户通过将测试变为红色来告知他们的输入无效。但是您可以使用类似的方法来做其他事情。

XAML：

```
<Window x:Class="local.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:EditableComboBox="clr-namespace:EditableComboBox"
    Title="MainWindow" Height="350" Width="525">
    <Window.DataContext>
        <EditableComboBox:ComboBoxViewModel />
    </Window.DataContext>
    <StackPanel>
        <ComboBox IsEditable="True" Foreground="{Binding ComboBoxColor, Mode=TwoWay}" Text="{Binding ComboBoxText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
    </StackPanel>
</Window> 
```

编码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Windows.Media;

namespace EditableComboBox
{
    class ComboBoxViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        private string m_ComboBoxText;
        public string ComboBoxText
        {
            get { return m_ComboBoxText; }
            set
            {
                m_ComboBoxText = value;
                OnPropertyChanged("ComboBoxText");
                ValidateText();
            }
        }

        private void ValidateText()
        {
            if (ComboBoxText.Length % 2 == 0)
                ComboBoxColor = Brushes.Black;
            else
                ComboBoxColor = Brushes.Red;
        }

        private Brush m_ComboBoxColor;
        public Brush ComboBoxColor
        {
            get { return m_ComboBoxColor; }
            set
            {
                m_ComboBoxColor = value;
                OnPropertyChanged("ComboBoxColor");
            }
        }

        protected virtual void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T23:55:24.740

好吧..这就是我所做的

```
List<dynamic> list = cmbToAcc.ItemsSource as List<dynamic>;
        var result = from s in list
                     where (string)s.Name == (string)cmbToAcc.Text
                     select s;

        if (result.Count() <= 0)
        {
            Helper.Inform("Please select a valid value.");
            cmbToAcc.SelectedIndex = 0;
            cmbToAcc.Focus();
        } 
```

这是在 LostFocus 事件中。

我不确定这是否是最好的方法..但可以达到目的

谢谢

尚卡拉·纳拉亚南

# android - Do I have to follow OAuth workflow (request token -> access token -> API call) everytime?

> ID：13259818
> 
> 赞同：2
> 
> 时间：2012-11-06T21:35:58.943
> 
> 标签：android, twitter-oauth, twitter4j

Ok so I'm new to OAuth and I'm creating an app that integrates with Twitter.

I'm using Twitter4j and following their instructions. No problems there.

*   I can ask the user to authorize my app
*   I exchange a Request Token for an Access Token
*   Once the user athorizes the app I serialize the object
*   Here's how the serialization occurs

    ```
    FileOutputStream fos = getContext().openFileOutput(fileName, Context.MODE_PRIVATE);
    ObjectOutputStream oos = new ObjectOutputStream(fos);
    oos.writeObject(accessToken);
    oos.close(); 
    ```

So when it's time to use the Access Token again, I simply desiralize the object and then assign to a new Twitter object and invoke a status update, as below:

```
AccessToken twitterToken = objectDeserialization();
Twitter twitter = new TwitterFactory().getInstance();
twitter.setOAuthConsumer(twitterApiKey, twitterApiSecret);
twitter.setOAuthAccessToken(twitterToken);
twitter4j.Status status = twitter.updateStatus("This is sparta! :)"); 
```

The problem is that I'm getting a 401.

**Everywhere I read I'm convinced that I'm not supposed to go through the whole token exchange thing again. Am I wrong?**

**Maybe I should simply store the Access Token and the Access Token Secret and create a new object from scratch instead of deserializing an old one?**

Appreciate your help :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:50:00.020

好的，我设法解决了我的问题，解决方案是：只保存令牌和令牌秘密，然后创建一个新对象。

```
AccessToken twitterToken = objectDeserialization();
Twitter twitter = new TwitterFactory().getInstance();
twitter.setOAuthConsumer(twitterApiKey, twitterApiSecret);
twitter.setOAuthAccessToken(new AccessToken(twitterToken.getToken(), twitterToken.getTokenSecret()));
twitter4j.Status status = twitter.updateStatus("This is sparta! :)"); 
```

# asp.net - PersistenceMode vs. Storing property in ViewState

> ID：13259820
> 
> 赞同：1
> 
> 时间：2012-11-06T21:36:05.840
> 
> 标签：asp.net, properties, persistence, viewstate

What is the difference in utility/performance between using PersistenceMode on a property and storing the value of said property in ViewState in an ASP.NET web page?

This:

```
 [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
    [PersistenceMode(PersistenceMode.InnerProperty)]
    public int ClientUno { get; private set; } 
```

versus this:

```
 public int ClientUno
    {
        get
        {
            if (ViewState["ClientUno"] == null) return 0;
            else return (int)(ViewState["ClientUno"]);
        }
        set { ViewState["ClientUno"] = value; }
    } 
```

I have done some googling around the internets and can't figure this one out. It seems like this would have come up before - I just can't find the answer. Anyone?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:22:49.333

`PersistanceMode`与将数据存储在`ViewState`. 它用于创建自定义*服务器*控件并影响服务器代码。例如，请参阅：[如何在 ASP.Net 中使用子控件集合制作控件](https://stackoverflow.com/questions/7825227/how-do-i-make-a-control-with-a-child-control-collection-in-asp-net)

# core-data - Can HTML5 localStorage in Cordova/Phonegap app be synced to iCloud?

> ID：13259821
> 
> 赞同：2
> 
> 时间：2012-11-06T21:36:08.000
> 
> 标签：core-data, cordova, local-storage, icloud

I have a Phonegap/Cordova app that runs on iOS. It saves it's data into HTML5 localStorage.

I'm trying to work out if it's possible to sync the localStorage data (using iCloud) to other iOS devices, and even OS X.

From what I can see, in iOS localStorage is actually implemented as a SQLite database, which (when using Phonegap/Cordova) is written to the app's Documents directory:

Documents/Backups/localstorage.appdata.db

I also understand that there are three main ways of storing data in iCloud:

*   Key/Value storage
*   UIDocument / NSDocument
*   Core Data

I know I can't use the Key/Value iCloud storage method, because I have more than 1MB of data to store, and the limitation is 1MB per app with that method.

[This question](https://stackoverflow.com/questions/7003336/how-enable-icloud-support-for-sqlite), I believe is talking about the UIDocument method, and asks if it is possible to store a SQLite db file in iCloud using that method. The answer is no because the database may become corrupted.

So that really leaves the Core Data method.

So my question is - would this work? Could I sync the localStorage.db file to iCloud using Core Data?

I've never used Core Data and don't know much about it. I'm just wondering if it would be possible, or if there is something else I don't understand.

Are there any other ways to sync localStorage data between iOS devices or OS X ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:16:45.977

不幸的是，答案似乎是否定的，Core Data 不能与 HTML5 localStorage 一起使用

除了使用 Core Data 创建的 SQLite 数据库之外，Core Data 不能与 SQLite 数据库一起使用。如果你尝试这样做，你会在 XCode 中得到这个错误：

```
SQLite error code:1, 'no such table: Z_METADATA' 
```

核心数据文档对此进行了解释：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFAQ.html#//apple_ref/doc/uid/TP40001802-SW2](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFAQ.html#//apple_ref/doc/uid/TP40001802-SW2)

> 尽管 Core Data 支持 SQLite 作为其持久存储类型之一，但数据库格式是私有的。您不能使用原生 SQLite API 创建 SQLite 数据库并将其直接与 Core Data 一起使用（也不应该使用原生 SQLite API 操作现有的 Core Data SQLite 存储）

不过我还是想解决这个问题。我正在考虑创建一个反映 localStorage API 的 Javascript API。这将是一个 phonegap 插件，可以调用objective-c 代码，并有效地将其更改写入Core Data 数据库。然后核心数据数据库应该能够同步到 iCloud。

如果它有效，我会回来更新这个答案。

# objective-c - 如何让 NSAlert 按钮上的对焦环消失？

> ID：13259823
> 
> 赞同：3
> 
> 时间：2012-11-06T21:36:21.807
> 
> 标签：objective-c, macos, cocoa, nsbutton, nsalert

有什么办法可以拿掉 NSAlert 按钮的对焦环。这就是我的意思：

![聚焦环烦人地出现在 NSAlert 按钮上](../Images/ecc169c0511b2bb832e5f97e8610246a.png)

这是我的代码：

```
[NSApp activateIgnoringOtherApps:YES];
NSAlert *alert = [[[NSAlert alloc] init] autorelease];
[alert addButtonWithTitle:@"Quit"];
[alert addButtonWithTitle:@"Cancel"];
[alert setMessageText:@"Warning!"];
[alert setInformativeText:@"How do you solve this question?"];
[alert setAlertStyle:NSWarningAlertStyle];
[alert beginSheetModalForWindow:nil modalDelegate:self didEndSelector:@selector(someMethodDidEnd:returnCode:contextInfo:) contextInfo:nil]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-06T10:03:20.910

也一直在尝试解决这个问题并想出了这个解决方法：

```
NSAlert *alert = [NSAlert alertWithMessageText:@"Alert" defaultButton:@"123" alternateButton:@"" otherButton:@"" informativeTextWithFormat:@""];
NSButton *button = [[alert buttons] objectAtIndex:0];

dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 0);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [[button window] makeFirstResponder:nil];
});

[alert runModal]; 
```

前两行很简单——创建一个警报并获得一个按钮。然后问题是实际上将警报面板的第一响应者设置为 nil，但是，它可能只有*在*警报已运行模式之后，所以这就是使用 dispatch_after 的原因。

但是，在您的情况下，由于您使用的是工作表而不是运行它，因此模态可以仅使用以下方法：

```
NSAlert *alert = [NSAlert alertWithMessageText:@"Alert" defaultButton:@"123" alternateButton:@"" otherButton:@"" informativeTextWithFormat:@""];
NSButton *button = [[alert buttons] objectAtIndex:0];

[alert beginSheetModalForWindow:window modalDelegate:nil didEndSelector:NULL contextInfo:NULL];
[[button window] makeFirstResponder:nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T06:16:52.700

我会说你根本不应该这样做，这将违反苹果的指导方针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-16T14:47:39.223

老问题，但为了记录：

要将**对焦环分配给**特定按钮，请使用`setAccessibilityFocused = true`：

```
alert.addButton(withTitle: "Save Changes").setAccessibilityFocused = true 
```

要**完全避开对焦环**：

当心，`setAccessibilityFocused(false)`在这里不起作用。而是`refusesFirstResponder = true`为所有警报按钮设置：

```
alert.addButton(withTitle: "Save Changes").refusesFirstResponder = true
alert.addButton(withTitle: "Don't Save").refusesFirstResponder = true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-25T21:10:30.790

更快的方法是：

```
for (NSButton* button in [alert buttons])
{
    [button setKeyEquivalent:@""];
}
NSInteger answer = [alert runModal]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-17T22:13:27.840

我只是用下面的单线做到了这一点。我的警报有三个按钮，并希望中间按钮具有键盘焦点。左键默认为键盘焦点，右键为默认键。

```
[alert.buttons[1] setAccessibilityFocused:YES]; 
```

我还禁用了其他按钮上的对焦环，以确保没有外观问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-04T10:36:35.193

对于那些希望从 NSAlert 中删除右侧 NSButton 的默认蓝色突出显示的人，请使用以下命令：

```
let alert: NSAlert = NSAlert()
alert.messageText = messageTitle
alert.informativeText = messageBody
alert.alertStyle = NSAlert.Style.informational
alert.addButton(withTitle: "Button 1").keyEquivalent = ""
alert.addButton(withTitle: "Button 2").keyEquivalent = ""

alert.beginSheetModal(for: self.view.window!, completionHandler: { (modalResponse: NSApplication.ModalResponse) -> Void in

    // handle response

}) 
```

# jquery - 带有嵌套 div 的 jquery 循环不会在 IE8 及更早版本中消失

> ID：13259826
> 
> 赞同：1
> 
> 时间：2012-11-06T21:36:34.863
> 
> 标签：jquery, internet-explorer, jquery-cycle

> **可能重复：**
> [在 IE8 jQuery 循环中消失的图像](https://stackoverflow.com/questions/10196819/disappearing-images-in-ie8-jquery-cycle)

我继承了一个使用 JQuery Cycle 插件的站点。主页上的幻灯片与内页略有不同，前者只是作为所包含父级的子级的 img，但后者是作为父级的子级的 div，其中包含取决于幻灯片的其他几个元素。

除了 IE8 及以下版本，这两个滑块在所有浏览器中都可以正常工作。在这种情况下，主页滑块过渡良好，但内页的滑块不会淡出/淡入，并且在幻灯片之间也留下了时间间隔。

滑块的 HTML 是：

```
<div id="page-panels">
  <!-- Slide 1 -->
  <div>
    <img class="left" src="<?php bloginfo('template_url'); ?>/images/page-slide-1.jpg"
    alt="protecting and providing for you and your family" width="400" height="180"
    />
    <p class="smaller">"Steven developed a thorough plan to meet our complicated needs with a
      blended family and special needs child in a timely manner."
      <br /><span> - &nbsp;Cheryl F.</span>
    </p>
  </div>
  <!-- Slide 2 -->
  <div>
    <img class="left" src="<?php bloginfo('template_url'); ?>/images/page-slide-2.jpg"
    alt="avoiding estate tax and probate costs" width="400" height="180" />
    <p class="bigger">"Mr. Jackson made a tough process easy and painless!"
      <br /><span> - &nbsp;Kyle M.</span>
    </p>
  </div>
  <!-- Slide 3 -->
  <div>
    <img class="left" src="<?php bloginfo('template_url'); ?>/images/page-slide-3.jpg"
    alt="keeping your estate plan current with the law" width="400" height="180"
    />
    <p class="bigger">"Integrity, trust - a rare item - it's <em>here!</em>"
      <br /><span> - &nbsp;Ron F.</span>
    </p>
  </div>
</div> 
```

页面下方是 JQuery：

```
<script type="text/javascript">
    jQuery(document).ready(function($) {
        $('#page-panels').cycle({
            timeout:    10000,
            speed:        3000,
            slideExpr:     'div'
        });
    });
</script> 
```

但这并没有解决问题。

这是内页的链接：http: [//www.stevenandrewjackson.com/our-unique-estate-planning-process/](http://www.stevenandrewjackson.com/our-unique-estate-planning-process/) 这是主页： http: [//www.stevenandrewjackson.com/](http://www.stevenandrewjackson.com/)

任何帮助将非常感激。谢谢。

# ios - Facebook iOS SDK 3.1 使用分数（游戏 API）

> ID：13259829
> 
> 赞同：2
> 
> 时间：2012-11-06T21:36:45.177
> 
> 标签：ios, facebook, facebook-graph-api

我正在尝试在我的 iOS 游戏中实现新的 Facebook API 3.1，并且我设法让登录等基本功能正常工作，但现在我正在为游戏功能而苦苦挣扎。我想发布我游戏中的分数，但开发者页面上的教程只显示了旧的已弃用 API。由于这是 Graph API 的一部分，我想它也应该与新的 SDK 一起使用，但我就是不知道怎么做。

所以我需要的是： 1.如何发布分数 2.如何获得我自己的分数以及我玩游戏的朋友的分数

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:54:03.367

您可以使用类似于发布 100 分的代码：

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                          @"100", @"score",
                          nil];

[FBRequestConnection startWithGraphPath:@"me/scores" 
                             parameters:params 
                             HTTPMethod:@"POST" 
                      completionHandler:
     ^(FBRequestConnection *connection, id result, NSError *error) {
         // Handle results
     }]; 
```

有关使用新方法的最新示例，请参阅： [https ://developers.facebook.com/docs/tutorials/ios-sdk-games/open-graph/](https://developers.facebook.com/docs/tutorials/ios-sdk-games/open-graph/)

# python - Dreampie：在屏幕上下部分之间切换

> ID：13259833
> 
> 赞同：0
> 
> 时间：2012-11-06T21:37:02.563
> 
> 标签：python, ide, keyboard-shortcuts

![Dreampie 界面，有两个部分](../Images/fc534518678f2a2c06ed96267bcdb939.png)

通常，我可以管理此问题的唯一方法是单击每个部分。我发现您可以通过按回车键从上半部分“重新加载”已经解释的行，然后使用`ctrl+a, backspace`删除下面暂存区域中的行，基本上无需单击即可移动到下半部分。但这很丑陋，如果非必要，我讨厌伸手去拿鼠标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:39:09.633

对我来说 Ctrl-Tab 似乎可以做到这一点。

# cocoa - 如何将一个 CGImage 覆盖在另一个上

> ID：13259835
> 
> 赞同：0
> 
> 时间：2012-11-06T21:37:09.287
> 
> 标签：cocoa, cgimage, cgimageref

我希望将一个 CGImage 覆盖在另一个之上。

例如，第一个 CGImage 是 1024x768 并且想要在给定位置覆盖第二个 100x100 CGImage。

我已经看到如何使用 NSImage 来做到这一点，但我真的不想将我的 CGImage 转换为 NSImage，然后进行叠加，然后将结果转换回 CGImage。我也看过 iOS 版本的代码，但不确定如何在 Mac 上进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T00:01:25.850

我主要习惯于 iOS，所以我在这里可能超出了我的深度，但假设你有一个图形上下文（大小像两个图像中较大的那个），你不能把两个 CGImages 画在彼此之上?

```
CGImageRef img1024x768;
CGImageRef img100x100;

CGSize imgSize = CGSizeMake(CGImageGetWidth(img1024x768), CGImageGetHeight(img1024x768));

CGRect largeBounds = CGRectMake(0, 0, CGImageGetWidth(img1024x768), CGImageGetHeight(img1024x768));
CGContextDrawImage(ctx, largeBounds, img1024x768);

CGRect smallBounds = CGRectMake(0, 0, CGImageGetWidth(img100x100), CGImageGetHeight(img100x100));
CGContextDrawImage(ctx, smallBounds, img100x100); 
```

然后将结果绘制到 NSImage 中？

# c# - 按钮按下多次调用方法

> ID：13259841
> 
> 赞同：1
> 
> 时间：2012-11-06T21:37:32.557
> 
> 标签：c#, xna

我正在开发一款 XNA 游戏，但遇到了问题。每当我在游戏中按键时，按键触发的方法都会被多次调用。例如，当用户按下攻击按钮（空格）时，字符会在一次按键内攻击 10 次。我希望按键仅触发一次该方法。即使用户按住一个键，我也希望某些方法只被调用一次。现在我已经通过在每次按下按钮后编写一个 thread.sleep 来解决它，但这似乎非常低效。我希望我的问题可以理解。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T21:41:40.940

您需要在 keydown 上将按钮标记为按下，然后在 keyup 上将其标记为未按下。在keydown方法期间..检查按钮是否已经按下..如果是..在keyup设置它之前什么都不做。

这样做的原因是，在按键期间，您的应用程序/游戏/任何通过其消息队列每秒接收数千条消息的东西。即使您超级快速地敲击空格键，也有可能通过消息队列处理了大约 50 条 WM_KEYDOWN 消息。

例子：

```
bool SpacebarPressed = false;

private void KeyDown() {
    if (!SpacebarPressed) {
        SpacebarPressed = true;
        DoSomethingWithSpacebarBeingPressed();
    }
}

private void KeyUp() {
    if (SpacebarPressed) SpacebarPressed = false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T22:56:35.250

我知道这已经得到解答，但是您可以使用这样的方法。让 oldKeyBoardState 在当前帧之后一帧，然后做`IsKeyToggled(Keys.Space)`

```
bool IsKeyToggled(Keys key)
{
    if (!oldKeyBoardState.IsKeyDown(key) && keyboardState.IsKeyDown(key))
       return true;
    else
       return false;
} 
```

用于设置一个后面，你将需要 2 个全局变量。

```
 public static KeyboardState keyboardState;
 public static KeyboardState oldKeyBoardState; 
```

您的`Update()`方法应如下所示：

```
 protected override void Update(GameTime gameTime)
 {
   keyboardState = Keyboard.GetState();
   //TODO: Add update logic here
   //This comes last
   oldKeyBoardState = keyboardState;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:44:32.277

您需要在第一次按下键时设置一个标志，然后在释放键时重置。一个粗略的例子：

```
if(keyIsPressed() && !myFlag)
{
   //do stuff
   myFlag = true;
}
else if(!keyIsPressed())
   myFlag = false; 
```

# javascript - 使用 JavaScript 在 iframe 中提交表单

> ID：13259843
> 
> 赞同：15
> 
> 时间：2012-11-06T21:37:34.273
> 
> 标签：javascript, iframe, submit

在`iframe`同一个域上，我尝试了以下代码，但没有一个起作用：

```
 myframe.document.getElementById("myform").submit();
 parent.top.frames[0].document.forms[0].submit(); 
 myframe.document.getElementById("myform").submit();

 MyIFrame = document.getElementById("myframe");
 myIFrame.getElementById("myform").submit(); 
```

更新：

这是 HTML：

```
<html>
<body>
<iframe frameborder="0" scrolling="no" width="530" height="298"
  src="/iframe.php" name="myframe" id="myframe">
  <p>iframes are not supported by your browser.</p>
</iframe><br />

<form action="/styles.css" method="post" id="form1">
<input type="text" name="input1" value=""/>
<input type="text" name="input2" value=""/>
<input type="button" value="test" onclick="submitFrame()">
<input type="submit" value="submit">
</form>

<script>

function submitFrame(){

var MyIFrame = document.getElementById("myframe");
var MyIFrameDoc = (MyIFrame.contentWindow || MyIFrame.contentDocument);
if (MyIFrameDoc.document) MyIFrameDoc = MyIFrameDoc.document;
MyIFrameDoc.getElementById("myform").submit(); // ## error 

}

</script>   
</body>
</html> 
```

iframe.php：

```
<form method="post" class="af-form-wrapper" id="myform" name="myform" action="/"  >

<input type="text" name="input1" value="2073809442" />
<input type="text" name="input2" value="1" />
<input type="submit" name="submit" value="submit" />
    </form> 
```

萤火虫 说：

```
 MyIFrameDoc.getElementById("myform").submit is not a function 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-06T21:45:53.823

试试这个：

```
var MyIFrame = document.getElementById("myframe");
var MyIFrameDoc = (MyIFrame.contentWindow || MyIFrame.contentDocument);
if (MyIFrameDoc.document) MyIFrameDoc = MyIFrameDoc.document;
MyIFrameDoc.getElementById("myform").submit(); 
```

**更新**

~~我不知道为什么这不起作用，但这里有一些东西：~~

```
MyIFrameDoc.getElementById("mybutton").click(); 
```

iframe.php：

```
<input type="submit" name="submit" value="submit" id="mybutton" /> 
```

**更新 2**

您收到`submit is not a function`错误的原因是因为您已经命名了您的提交按钮`submit`，所以`MyIFrameDoc.getElementById("myform").submit`实际上引用了一个`HTMLInputElement`，而不是`HTMLFormElement.submit()`方法。

您需要做的就是重命名您的提交按钮，例如：

```
<input type="submit" name="submit2" value="submit" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-12T08:35:39.743

**从 javascript 提交 iframe 的 URL**

```
 if (window.parent.$("#IframeId").length > 0) {
        window.parent.$("#IframeId")[0].contentDocument.forms[0].submit();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-18T05:06:26.177

您不需要发布到 iframe。您可以使用普通的空白“可见”窗口。像这样定义您的表单：

```
var request = document.createElement("FORM")
request.id = "request"
request.name = "request"
request.action = "callYour.php"
request.method = "POST"
request.target = "_blank" 
```

在您的 php 中，完成后只需通过以下方式关闭窗口：

```
window.close(); 
```

在 HTML 部分中，或在嵌入的脚本标签中。新窗口会暂时打开，但在完成后会自行关闭。

# django-models - django post save 方法导致身份验证错误

> ID：13259844
> 
> 赞同：1
> 
> 时间：2012-11-06T21:37:34.793
> 
> 标签：django-models

嗨，我有一个 post save 信号，它在创建新的 User 对象时保存 user_profile 对象：

```
from django.db import models
from django.contrib.auth.models import User
from django.db.models.signals import post_save

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    ...

    def __unicode__(self):
        return self.user.username

def _create_user_profile(sender, instance, created, **kwargs):
    UserProfile.objects.create(user=instance)

post_save.connect(_create_user_profile, sender=User) 
```

但是，这导致我出现以下问题：

如果我在管理员中创建一个新用户，一切都很好。如果我然后尝试编辑然后将`User`权限更改为员工状态，我会收到`"Duplicate entry '6' for key 'user_id'"`错误消息。我猜该`UserProfile`对象正在尝试重新保存该对象？

我怎样才能避免这种冲突？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:24:27.000

好的，所以这有很大帮助：

[https://sqa.stackexchange.com/questions/1355/what-is-the-correct-way-to-select-an-option-using-seleniums-python-webdriver](https://sqa.stackexchange.com/questions/1355/what-is-the-correct-way-to-select-an-option-using-seleniums-python-webdriver)

基本上我需要找到我想要直接使用`<select>`的。之后我可以模拟一个事件：`<option>``xpath``click`

```
self.browser.find_element_by_xpath(
     "//select[@id='my_select_id']/option[text()='my_option_text']"
).click() 
```

如果文本字符串未知，我也可以通过选项索引进行选择：

```
self.browser.find_element_by_xpath(
    "//select[@id='id_module']/option[2]"
).click() 
```

希望这可以帮助任何有类似问题的人。

# php - PHP 正则表达式匹配这个：

> ID：13259849
> 
> 赞同：-2
> 
> 时间：2012-11-06T21:38:06.757
> 
> 标签：php, regex

```
[foreach:regex]
    [r_hello]
[/foreach] 
```

尝试匹配上述内容： （ and之间的`regex`单词） will be以及介于`:`and will be之间的任何内容。`]``$1``[foreach:regex]``[/foreach]``$2`

到目前为止，我有这个：`/\[foreach:(.*)\](.*)\[\/foreach\]/s`

但我收到了这个错误：`Notice: Undefined index: regex] [r_hello`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:41:10.160

尝试：

```
/\[foreach:([^\]]*)\]\s*\[([^\]]*)\]\s*\[\/foreach\]/s 
```

[http://phpfiddle.org/main/code/7av-ypa](http://phpfiddle.org/main/code/7av-ypa)

问题是：

1.  您贪婪地匹配一个或多个任何字符，这可以在此处避免
2.  您没有考虑空格（换行符和制表符）
3.  您没有考虑中心项目周围的方括号。

# sql-server - 动态 SQL 和存储过程优化

> ID：13259850
> 
> 赞同：2
> 
> 时间：2012-11-06T21:38:14.307
> 
> 标签：sql-server, sql-server-2008, stored-procedures, dynamic-sql

我读过在存储过程中使用动态 SQL 会损害存储过程的性能。我猜这个理论是存储过程不会存储通过 EXEC 或 sp_executesql 执行的 SQL 的执行计划。

我想知道这是不是真的。如果是真的，我是否对多个嵌套的 IF 块有同样的问题，每个块都有不同的 SQL 语句“版本”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T00:03:35.767

如果您有多个嵌套的 IF 块，那么 SQL Server 将能够存储执行计划。我假设 IF 很简单，例如。如果@Parameter1 不为空

SchmitzIT 的回答是正确的，SQL Server 还可以存储动态 SQL 的执行路径。但是，只有正确构建和执行 sql 时，这才是正确的。

通过正确构建，我的意思是显式声明参数并将它们传递给 sp_executesql。例如

```
declare @Param1 nvarchar(255) = 'foo'
        ,@Param2 nvarchar(255) = 'bar'
        ,@sqlcommand nvarchar(max)
        ,@paramList nvarchar(max)

set @paramList = '@Param1 nvarchar(255), @Param2 nvarchar(255)'
set @sqlcommand = N'Select Something from Table where Field1 = @Param1 AND Field2 = @Param2'

exec sp_executesql @statement = @sqlcommand
                  ,@params = @paramList
                  ,@Param1 = @Param1
                  ,@Param2 = @Param2 
```

如您所见，sqlcommand 文本没有硬编码要使用的参数值。它们在 exec sp_executesql 中单独传递

如果你写了糟糕的旧动态 sql

```
set @sqlcommand = N'Select Something from Table where Field1 = ' + @Param1  + ' AND Field2 = ' + @Param2

exec sp_executesql @sqlcommand 
```

那么 SQL Server 将无法存储执行计划

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T21:46:04.610

这就是 MSDN 不得不说的。我强调了您问题的相关内容

> sp_executesql 在批处理、名称范围和数据库上下文方面与 EXECUTE 具有相同的行为。**在执行 sp_executesql 语句之前，不会编译 sp_executesql @stmt 参数中的 Transact-SQL 语句或批处理**。然后，@stmt 的内容被编译并作为一个执行计划执行，该执行计划与调用 sp_executesql 的批处理的执行计划分开。sp_executesql 批处理不能引用在调用 sp_executesql 的批处理中声明的变量。sp_executesql 批处理中的本地游标或变量对调用 sp_executesql 的批处理不可见。数据库上下文中的更改仅持续到 sp_executesql 语句的末尾。
> 
> **当语句的参数值更改是唯一的变化时，**可以使用 sp_executesql 代替存储过程多次执行 Transact-SQL 语句。**因为 Transact-SQL 语句本身保持不变并且只有参数值发生变化，所以 SQL Server 查询优化器可能会重用它为第一次执行生成的执行计划**。

[http://msdn.microsoft.com/en-us/library/ms188001.aspx](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

# regex - 有没有办法使用 regsub 进行多次替换？

> ID：13259854
> 
> 赞同：1
> 
> 时间：2012-11-06T21:38:43.830
> 
> 标签：regex, tcl

是否可以使用 regsub 在表达式中进行不同的替换？

例子：

```
set a ".a/b.c..d/e/f//g" 
```

现在，在这个表达式中，是否可以在单个 regsub 命令中将" " as " " " " 替换`.`为 " `yes`" " `..`" as " `no`" " " `/`as " " ？`true``//``false`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T21:54:10.843

用`regsub`, 不。对这类事情有一个长期存在的功能要求（需要用对匹配信息评估命令的结果进行替换），但迄今为止尚未采取行动。

但是在这种情况下，您可以使用`string map`它来做您想做的事情：

```
set a ".a/b.c..d/e/f//g"
set b [string map {".." "no" "." "yes" "//" "false" "/" "true"} $a]
puts "changed $a to $b"
# changed .a/b.c..d/e/f//g to yesatruebyescnodtrueetrueffalseg 
```

请注意，在构建地图时，如果任何 from-value 是另一个的前缀，则应将较长的 from-value 放在第一位。（这是因为`string map`实现会按照您列出它们的顺序检查要进行的更改……）

* * *

可以在两步过程中使用`regsub`和`subst`执行多目标替换，但我不建议在非常复杂的情况下使用它！一个 nice`string map`更容易使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T08:41:59.803

你也可以尝试自己做。`proc`这是您可以用作起点的草稿。它还没有准备好生产，你必须小心，因为第一个替换后的替换对已经替换的字符串起作用。

这些是参数：

*   `options`是将传递给每次调用的选项列表`regsub`
*   `resubList`是键/值对的列表，其中键是正则表达式，值是替换
*   `string`是您要替换的字符串

这就是过程，它只是简单地调用`regsub`了多次，对其中的每个元素调用一次，`resubList`最后，它返回最终的字符串。

```
proc multiregsub {options resubList string} {
    foreach {re sub} $resubList {
        set string [regsub {*}$options -- $re $string $sub]
    }
    return $string
} 
```

# java - jmockit 捕获模拟方法参数

> ID：13259856
> 
> 赞同：3
> 
> 时间：2012-11-06T21:38:49.160
> 
> 标签：java, unit-testing, mocking, jmockit

我正在使用 JMockit 对调用不同 Web 服务并填充数据库的数据服务进行单元测试。我正在模拟每个 Web 服务调用，并使用期望/结果向服务提供我的返回数据。

我遇到了一个问题，我必须遍历对象列表并每次使用不同的参数调用 Web 服务。我想捕获参数，以便可以将其输入到 CreateTestData 方法中，该方法将返回我想要的。数据集有些相互依赖

测试类：

```
public class testDataService {  

@Mocked 
private WebService1 webServiceClientMocked1;

@Mocked 
private WebService2 webServiceClientMocked2;

@Autowired
private DataService dataService;

@Test
public void createTestData() {

final DataSet1 dataSet1 = CreateMyTestData.createDataSet1();
final DataSet1 dataSet2 = CreateMyTestData.createDataSet2();

 // these are populated using other methods not shown
final List<String> listStrings = new ArrayList<String>();
final List<String> entities = new ArrayList<String>();  

new Expectations() {{
        webServiceClientMocked1.getDataSet1("stringA", true);
        result = dataSet1;
    }};

new Expectations() {{
        webServiceClientMocked2.getDataSet2("stringB");
        result = dataSet2;
    }};

new Expectations() {{
for(String s : listStrings){
    webServiceClientMocked1.getDataSet4(s,(List<String>) any);
    returns(CreateMyTestData.createDataSet4(s, entities));
        }

    }};

//doesnt work       
//new Expectations() {{
//webServiceClientMocked1.findDataPerParamters(anyString, (List<String>) any );
//result = CreateMyTestData.createDataSet4(capturedString, capturedListStrings);
//}};

//call data service to test
dataService.doSaveData();
} 
```

数据服务类：

```
public class DataServiceImpl implements DataService
{

public void doSaveData() {

  //do a bunch of stuff
  dataSet1 =webServiceClientMocked1.getDataSet1("stringA", true);
  //do more stuff
  dataSet2 = webServiceClientMocked2.getDataSet2("stringB");
  Collection<Stuff> dataSet3 = saveToDB(dataSet2);   //save data and return a different set of data

  for(Stuff data : dataSet3) {

  //take dataSet3, iterate over it and call another webservice
  dataSet4 = webServiceClientMocked1.getDataSet4(data.getStringX(), data.getListStrings());

 // keep doing more junk

}
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:26:35.940

你可以使用类似的东西：

```
final List<String> args = Arrays.asList("1","2","3","4");
final Map<String,Object> results = .... 
```

然后在期望中：

```
new Expectations() {
{
  for (arg : args) {
    mockedService.invoke(arg);
    returning(results.get(arg);
  }
} 
```

这将“记录”您的调用并允许您“捕获”参数。

或检查[验证调用参数](http://jmockit.googlecode.com/svn/trunk/www/tutorial/BehaviorBasedTesting.html#forEachInvocation)

我使用了类似的代码

```
mockedService.doMethod(with(new Object() {
  public void validate(SomeArg arg) {
    assertThat(arg.getProperty(), is(equalTo("expectation"));
  }
}); 
```

# svn - “svn log --stop-on-copy”未能显示对晚于创建分支的版本所做的修订

> ID：13259857
> 
> 赞同：2
> 
> 时间：2012-11-06T21:38:51.640
> 
> 标签：svn, merge, branch

在尝试将我的分支与主干同步时，我发现了一个有趣的问题。

1.  我使用 r17964 通过“svn cp”命令在主干上创建了分支 A。

    ```
    svn log --stop-on-copy
    ------------------------------------------------------------------------
    r17964 | MYID | 2012-11-06 08:58:26 -0600 (Tue, 06 Nov 2012) | 2 lines
    JIRA-4749: added Sonar into Maven build. 
    ```

2.  我通过带有 rev17965-17966 的“svn cp”命令在主干上创建了分支 B。

    ```
    $ svn log --stop-on-copy
    ------------------------------------------------------------------------
    r17966 | MYID | 2012-11-06 13:38:42 -0600 (Tue, 06 Nov 2012) | 2 lines
    JIRA-4750: added condor soap module back to the trunk. 
    ```

3.  我将分支 B 的更改合并回主干。

    ```
    ------------------------------------------------------------------------
    r17967 | MYID | 2012-11-06 14:24:06 -0600 (Tue, 06 Nov 2012) | 2 lines
    JIRA-4750: merged back to the trunk. 
    ```

现在我尝试将分支 B 上所做的更改从主干拉到分支 A。但是，“svn log --stop-on-copy”不会显示分支 A 中所做的更改，而分支 A 确实在主干中。

```
svn log --stop-on-copy
------------------------------------------------------------------------
r17964 | MYID | 2012-11-06 08:58:26 -0600 (Tue, 06 Nov 2012) | 2 lines
JIRA-4749: added Sonar into Maven build. 
```

我应该怎么做才能取消更改？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:18:45.280

我不遵循您的逻辑，即分支“A”是主干的一部分。一旦你创建了一个分支，它就是它自己的独立实体。它只知道它是从哪里分支出来的。

在从分支“B”升级更改后，分支“A”不知道这些更改。

我认为您想要的是将“主干”中的更改[合并](http://svnbook.red-bean.com/en/1.6/svn.ref.svn.c.merge.html)到分支“A”中。这将使用合并到主干中的所有最新更改来更新“A”分支。

如果您只是在寻找差异，请使用 svn [diff](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.diff.html)命令。

# jquery - 无法获得隐藏的 div 来切换 JQUERY

> ID：13259860
> 
> 赞同：0
> 
> 时间：2012-11-06T21:38:57.763
> 
> 标签：jquery, html, toggle

所以我无法在导航菜单上实现 JQuery 切换。我设法在一个新文件上快速完成，但不能在我的主版本上完成。

我想要什么：http: [//jsfiddle.net/wFN9t/6/](http://jsfiddle.net/wFN9t/6/) 我有什么：http: [//jsfiddle.net/KgCYE/9/](http://jsfiddle.net/KgCYE/9/)

我知道 div 是隐藏的，因为如果我从 css 中删除 #submenu li{display:none;} ，子菜单就会出现。有人可以告诉我我做错了什么吗？

Javascript

```
 $(document).ready(function() {
 $('#submenu').click(function() {
 $('#submenu ul').toggle('');
});
}); 
```

HTML

```
<div id="navigation">
    <ul>
    <li><a href="aboutme.html"id="aboutme">Home</a></li>
    <li id="submenu"><a href="project.html" id="projects">Projects</a>
        <ul>
            <li><a href="#">Design Exploration</a></li>
            <li><a href="#">Work in progress</a></li>
            <li><a href="#">Proposal</a></li>
            <li><a href="#">Portfolio</a></li>
        </ul>
    </li>
    <li><a href="reflections.html" id="reflections">Reflections</a></li>
</ul> 
```

CSS

```
#submenu ul{
display:none;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:39:46.783

改变

```
$(document).ready(function() {
  $('#submenu').click(function() {
  $('#submenu ul').toggle('');
}); 
```

至

```
$(document).ready(function() {
   $('#submenu').click(function() {
     $('#submenu ul').toggle('');
   });
}); 
```

你应该删除它，`''`因为它不会使代码更清晰。

另外，在制作小提琴时不要忘记包含 jQuery，使用左侧面板中的菜单。

[示范](http://jsfiddle.net/6t5ne/)

# java - 在 Java 信任库中更新-更新自签名 CA 证书

> ID：13259863
> 
> 赞同：10
> 
> 时间：2012-11-06T21:39:23.457
> 
> 标签：java, keystore, truststore, certificate-authority

我已经构建了一个 Java 应用程序，它向外部授权客户端公开 Web 服务。Web 服务使用带有证书身份验证的 WS-security。基本上我们充当自定义证书颁发机构 - 我们在我们的服务器上维护一个 java 信任库，并对其签名和添加客户的证书。目前我们有手动注册过程，要求 WS 客户端上传他们的证书签名请求。我们签署 CSR，使用命令行中的 keytool 将证书添加到我们的 java 信任库，然后将签署的证书与我们的 CA 证书一起返回给客户端。反过来，客户端使用他们的私钥签署他们的肥皂消息有效负载，并将签名证书嵌入到消息中。服务器端解密数字签名并验证嵌入式证书是否已签名并且在满足客户端请求之前与我们的信任库匹配。

虽然有点痛苦（由于体力劳动），但此设置运行良好。现在我意识到我们的根 CA 证书即将到期，因此我正在寻找设置维护策略。我应该如何更新自签名根 CA 证书？看起来我将不得不创建新的并替换原来的。这将影响所有必须接收新证书和导入新 CA 证书的客户端。这是正确的理解还是有更好的方法来处理这种情况？

如果重要的话，我已经使用 openssl 来生成原始密钥对。

```
openssl req -x509 -newkey rsa:1024 -keyout cakey.pem -out cacert.pem -config openssl.cnf 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:04:50.547

> 在根 CA 上保持相同的私钥允许所有证书继续针对新根成功验证；您所要做的就是信任新的根。

[更多信息](https://serverfault.com/questions/306345/certification-authority-root-certificate-expiry-and-renewal)

# eclipse - Maven 使用 JRE7 而不是 JDK？

> ID：13259866
> 
> 赞同：19
> 
> 时间：2012-11-06T21:39:34.830
> 
> 标签：eclipse, maven, java

Eclipse Juno Release `Window / Preferences / Java / Installed Jres` 显示了两个已安装的 Jres。 `jdk1.7.0_07`和`jre7`。

尝试使用 Maven`clean`时出现以下错误：`process-classes`

```
Failed to execute goal org.apache.maven.plugins:maven-compiler- 
plugin:2.4:compile (default-compile) on project reputation: Fatal 
error compiling: tools.jar not found: C:\Program 
Files\Java\jre7\..\lib\tools.jar 
```

出于绝望，我已经添加`tools.jar`为外部 jar，但它没有帮助。为什么 maven 试图使用 other `JRE`？

编辑：

编译器插件摘自`pom.xml`

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.4</version>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
    </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-06T21:44:02.590

您需要将 JAVA_HOME 环境变量设置为 JDK 目录。

编辑：

在 Eclipse 的已安装 JRE 首选项窗口中，删除 JRE 并选择 JDK。还要确保您的项目设置为使用该 JRE 库（在资源管理器中右键单击 maven 项目结构下的“JRE 系统库”并将其设置为“执行环境”）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-28T20:48:22.563

您应该验证 Maven“运行配置...”是否连接到正确的 JRE。如果项目 JRE 正确但运行配置 JRE 不正确，您将收到此错误。要修复，请转到 Maven Build 下，选择 JRE 选项卡。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-30T01:05:02.027

要配置 maven 构建以使用正确的 java 执行环境，您需要更改 Maven 使用的执行环境。

**1\. JRE 地点**

要设置 JRE 位置，请在 Window\Preferences (Windows) 或 Eclipse\Preferences(OSX) 或 Edit\Preferences (Linux) 下加载首选项窗口。

展开 Java/Installed JREs 选项 选择选择的 JDK，或者如果未配置，则添加一个。

![已安装的 JRE](../Images/3aae7055aa62ea7a2a4fe8537d2593ff.png)

**2.映射执行环境**

要将任何 java 版本映射到特定安装的 JRE，请选择 Java/Installed JREs/Execution environment 菜单项

为该版本选择适当的默认 JRE 安装。

![Java 执行环境](../Images/c109ce1fd27232c7fc74eab8769a1c95.png)

**3\. 运行配置**

如果您有特定的运行配置，您可以更改/创建特定的运行配置并将特定的执行环境链接到该命令。

*   为此，请选择运行/运行配置
*   选择或创建运行配置。
*   选择执行环境选项卡。
*   为此命令选择适当的执行环境。

![在此处输入图像描述](../Images/c1bfe0df03f14a8e81fc8f455319c870.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-06T15:43:03.823

Maven 2.0.9+ 支持[工具链](https://maven.apache.org/guides/mini/guide-using-toolchains.html)，允许您声明构建所需的 JDK 版本。

相关 Maven 迷你指南的摘录：

```
<plugins>
  ...
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.1</version>
  </plugin>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-toolchains-plugin</artifactId>
    <version>1.1</version>
    <executions>
      <execution>
        <goals>
          <goal>toolchain</goal>
        </goals>
      </execution>
    </executions>
    <configuration>
      <toolchains>
        <jdk>
          <version>1.5</version>
          <vendor>sun</vendor>
        </jdk>
      </toolchains>
    </configuration>
  </plugin>
  ...
</plugins> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-24T12:34:58.943

在您安装的 JREs 首选项窗口中“转到子菜单**执行环境**并将**此 JDK 标记为兼容**”，来自 [How to force Eclipse m2e plugin to use jdk for a project](https://stackoverflow.com/questions/25592290/how-to-force-eclipse-m2e-plugin-to-use-jdk-for-a-project)

# java - Web 上的 Java Applet 错误

> ID：13259871
> 
> 赞同：2
> 
> 时间：2012-11-06T21:40:24.330
> 
> 标签：java, html, applet, noclassdeffounderror

当我从计算机上的小程序查看器中的代码运行它时，我编写的 Java 小程序完全按照预期工作。但是，当我将它上传到我的网站时，我收到了一系列错误。我查找了错误，但找不到任何有用的信息来帮助找出问题。这是错误。

```
java.lang.NoClassDefFoundError: Main
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at sun.plugin2.applet.Applet2ClassLoader.findClass(Applet2ClassLoader.java:247)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Plugin2ClassLoader.java:249)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:179)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:160)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Plugin2ClassLoader.java:678)
at sun.plugin2.applet.Plugin2Manager.createApplet(Plugin2Manager.java:3045)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Plugin2Manager.java:1497)
at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.ClassNotFoundException: Main
at sun.plugin2.applet.Applet2ClassLoader.findClass(Applet2ClassLoader.java:252)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Plugin2ClassLoader.java:249)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:179)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:160)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 13 more
Exception: java.lang.NoClassDefFoundError: Main 
```

我知道如果没有我的代码示例，这可能不够描述，但任何人都可以从这些错误中辨别出任何东西吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:44:16.320

它只是意味着您的代码中引用的 Main 类不包含在小程序中。

很可能您在导出到 jar 时没有包含该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:46:36.623

如果您包含您的代码，那就太好了，但问题可能是您引用了一个名为 的类`Main`，但服务中不存在`CLASSPATH`转储此异常的类。

您可能需要创建（或重命名！）源为“ `Main.java`”并构建 a`Main.class`并将其放在正确的路径中，或者更改路径以引用存储位置`Main.class`（或包含 的存档`Main.class`）。

# javascript - 使用 jquery包装某些单词

> ID：13259872
> 
> 赞同：6
> 
> 时间：2012-11-06T21:40:32.473
> 
> 标签：javascript, jquery

我有以下内容`div`：

```
<div id="query" style="width:500px; height:200px;border:1px solid black"
 spellcheck="false" contenteditable="true"></div>​ 
```

客户可以在其中编写`SQL`查询。我试图做的是包装客户在击中后立即输入的单词`Space`a并根据输入的单词`span`给这个跨度一定的值：`class`

*例子*

如果客户端类型`select`我需要像这样在 div 中包装这个选择词：

```
<span class='select'> SELECT </span> <span> emp_name </span> 
```

CSS

```
.select{color:blue ;text-transform:uppercase;} 
```

这与做什么非常相似`jsFiddle`。我怎样才能做到这一点？

这是我迄今为止尝试过的：[jsFiddle](http://jsfiddle.net/esu7A/1/)

```
$(function(){
    $('div').focus() ;
    $('div').keyup(function(e){
        //console.log(e.keyCode) ;
        if(e.keyCode == 32){
            var txt = $('div').text() ;
            var x = 'SELECT' ;
            $('div:contains("'+x+'")').wrap("<span style='color:blue ;
      text-transform:uppercase;'>") ;
            if(txt == 'SELECT'){
                console.log('found') ; // why This Doesn't do any thing  ?
            }

        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:53:34.670

我做了一个概念验证，对你最初的内容进行了一些修改。见下文，

**演示：http:** [//jsfiddle.net/cgy69/](http://jsfiddle.net/cgy69/)

```
$(function() {
    $('div').focus();
    var x = ['SELECT', 'WHERE', 'FROM'];
    $('div').keyup(function(e) {
        //console.log(e.keyCode) ;
        if (e.keyCode == 32) {

            //using .text() remove prev span inserts
            var text = $.trim($(this).text()).split(' ');            
            $.each(text, function(i, v) {
                $.each(x, function(j, xv) {
                    if (v.toUpperCase() === xv) {
                        text[i] = '<span style="color: blue; text-transform: uppercase;">' + v + '</span>';    
                    }                                        
                });
            });

            $(this).html(text.join(' ') + '&nbsp;');

            setEndOfContenteditable(this);
        }
    });

    function setEndOfContenteditable(contentEditableElement) {
        var range, selection;
        if (document.createRange) //Firefox, Chrome, Opera, Safari, IE 9+
        {
            range = document.createRange(); //Create a range (a range is a like the selection but invisible)
            range.selectNodeContents(contentEditableElement); //Select the entire contents of the element with the range
            range.collapse(false); //collapse the range to the end point. false means collapse to end rather than the start
            selection = window.getSelection(); //get the selection object (allows you to change selection)
            selection.removeAllRanges(); //remove any selections already made
            selection.addRange(range); //make the range you have just created the visible selection
        }
        else if (document.selection) //IE 8 and lower
        {
            range = document.body.createTextRange(); //Create a range (a range is a like the selection but invisible)
            range.moveToElementText(contentEditableElement); //Select the entire contents of the element with the range
            range.collapse(false); //collapse the range to the end point. false means collapse to end rather than the start
            range.select(); //Select the range (make it the visible selection
        }
    }
}); 
```

您将进一步扩展它以处理

1.  ~~退格~~
2.  ~~以前插入的 HTML 内容~~
3.  ~~光标位置~~部分完成，在中间编辑仍然会弄乱插入符号。

和更多..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T01:03:19.977

从一个`contenteditable`元素开始，我们可以通过直接操作它来替换我们需要的标记`innerHtml`：

```
$('#query-container').on('keyup', function(e){
  var $this = $(this);
  //(?!\<\/b\>) negative lookahead is used so that anything already wrapped
  //into a markup tag would not get wrapped again
  $this.html($this.html().replace(/(SELECT|UPDATE|DELETE)(?!\<\/b\>)/gi, '<b>$1</b>'));
  setEndOfContenteditable(this);
}); 
```

IMO 这是一个更具可读性的选项。从上一个答案中添加 rangeselect 方法，我们有[一个工作小提琴](http://jsfiddle.net/ovfiddle/tFnzG/)

# python - 使 matplotlib 的 date2num 和 num2date 完美逆

> ID：13259875
> 
> 赞同：2
> 
> 时间：2012-11-06T21:41:07.570
> 
> 标签：python, date, datetime, matplotlib

我正在尝试编写一对函数，`plottm`and `unixtm`，它们在正常的 unix 时间（自 1970-01-01 以来的秒数）和 Matplotlib 的日期表示（自 -1BC 的最后一天或某事的最后一天以来的天数，浮点数）之间来回转换.

如果`plottm`和`unixtm`是适当的逆，那么这段代码将打印相同的日期/时间两次：

```
import time, datetime
import matplotlib.dates as dt

# Convert a unix time u to plot time p, and vice versa
def plottm(u): return dt.date2num(datetime.datetime.fromtimestamp(u))
def unixtm(p): return time.mktime(dt.num2date(p).timetuple())

u = 1270000000
print datetime.datetime.fromtimestamp(u), "-->", \
      datetime.datetime.fromtimestamp(unixtm(plottm(u))) 
```

唉，它已经关闭了一个小时（这只发生在某些时间戳上，否则我会插入一个偏移量并完成它）。

可能相关：本地时间[问题](http://pytz.sourceforge.net/#problems-with-localtime)

更新：不特定于 Matplotlib 的相关问题：[Convert a unixtime to a datetime object and back again（一对逆时间转换函数）](https://stackoverflow.com/questions/13260863/convert-a-unixtime-to-a-datetime-object-and-back-again-pair-of-time-conversion)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T22:00:58.590

基于@dreeves 的回答，适用于时区感知日期时间的解决方案：

```
import matplotlib.dates as dt

from calendar import timegm
from datetime import datetime

from pytz import utc

# Convert a unix time u to plot time p, and vice versa
def plottm(u):
    return dt.date2num(datetime.fromtimestamp(u, utc))

def unixtm(p):
    return timegm(dt.num2date(p, utc).utctimetuple())

u = 1270000000
print datetime.fromtimestamp(u, utc), "-->", \
      datetime.fromtimestamp(unixtm(plottm(u)), utc) 
```

输出（测试了几个时区）：

```
2010-03-31 01:46:40+00:00 --> 2010-03-31 01:46:40+00:00 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T00:00:08.040

有[matplotlib.dates.epoch2num()/num2epoch 函数](http://matplotlib.org/api/dates_api.html#matplotlib.dates.epoch2num)可以做到这一点：

```
from datetime import datetime, timedelta
import matplotlib.dates as mpl_dt

matplotlib_epoch = datetime(1, 1, 1)  # utc
posix_epoch = datetime(1970, 1, 1)  # utc
DAY = 86400  # seconds

def plottm(u):
    """posix timestamp -> plot time"""
    td = (datetime.utcfromtimestamp(u) - matplotlib_epoch)
    return td.days + 1 + (1000000 * td.seconds + td.microseconds) / 1e6 / DAY

def unixtm(p):
    """plot time -> posix timestamp"""
    td = timedelta(days=p-1)
    return (matplotlib_epoch + td - posix_epoch).total_seconds()

def main():
    f = datetime.utcfromtimestamp
    u = 1270000000.1234567890
    print(f(u))
    print(mpl_dt.epoch2num(u))
    print(plottm(u))
    print(f(mpl_dt.num2epoch(mpl_dt.epoch2num(u))))
    print(f(mpl_dt.num2epoch(plottm(u))))
    print(f(unixtm(mpl_dt.epoch2num(u))))
    print(f(unixtm(plottm(u))))

    assert abs(mpl_dt.epoch2num(u) - plottm(u)) < 1e-5

    p = 86401.234567890 / DAY
    print(f(mpl_dt.num2epoch(p)))
    print(f(unixtm(p)))
    assert abs(mpl_dt.num2epoch(p) - unixtm(p)) < 1e-5

main() 
```

### 输出

```
2010-03-31 01:46:40.123457
733862.074076
733862.074076
2010-03-31 01:46:40.123453
2010-03-31 01:46:40.123453
2010-03-31 01:46:40.123453
2010-03-31 01:46:40.123453
0001-01-01 00:00:01.234566
0001-01-01 00:00:01.234566 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T23:33:06.620

感谢[FJ](https://stackoverflow.com/users/505154/f-j)对[类似问题](https://stackoverflow.com/questions/13260863/convert-a-unixtime-to-a-datetime-object-and-back-again-pair-of-time-conversion)的回答，我相信以下可能是处理此问题的最佳方法：

```
import datetime, calendar
import matplotlib.dates as dt

def plottm(u): return dt.date2num(datetime.datetime.utcfromtimestamp(u))
def unixtm(p): return calendar.timegm(dt.num2date(p).timetuple()) 
```

# python - pytest 2.3 中的包范围内的固定装置

> ID：13259881
> 
> 赞同：7
> 
> 时间：2012-11-06T21:41:21.767
> 
> 标签：python, pytest

在最新版本的 pytest 中，很容易创建函数、类、模块或会话范围的固定装置，如下所示：

```
@pytest.fixture(scope="module") 
def db():
     return DB() 
```

这会创建一个固定装置，对于使用它的每个 python 模块，它只会被调用一次。

但是每个 python 包需要调用一次的固定装置呢？（使用nose，可以使用`__init__.py`包中的setUp/tearDown方法来完成）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T10:03:15.243

`conftest.py`对于包或目录级别的固定装置，您可以在需要它的目录中的文件中声明固定装置，使用`scope='session'`. 一旦包/目录中的第一个测试使用它，夹具将被实例化。这是[一个示例](http://pytest.org/latest/example/simple.html#package-directory-level-fixtures-setups)但是，如果夹具函数注册了一个终结器，您可能会看到它不是在该目录中的最后一个测试之后直接执行的。我认为可以使 pytest 支持更急切的拆卸或在需要时引入“目录”范围。通常，如果拆解执行得稍晚一点，只要它不执行得太早，通常这不是一个大问题 :) 另请注意，Jason 显然[打算放弃对鼻子的包级设置/拆解支持](http://nose2.readthedocs.org/en/release-0.3/differences.html)

无论如何，如果您需要更急切/准确的 pytest 拆解，请随时[打开问题](https://bitbucket.org/hpk42/pytest/issues/new)。

# python - Python 中的网络爬虫

> ID：13259882
> 
> 赞同：2
> 
> 时间：2012-11-06T21:41:23.373
> 
> 标签：python, parsing, web-crawler

我正在尝试用 Python 编写一个基本的网络爬虫。我遇到的麻烦是解析页面以提取 url。我都尝试过 BeautifulSoup 和正则表达式，但是我无法获得有效的解决方案。

例如：我正在尝试提取 Facebook 的 Github 页面中的所有成员网址。（https://github.com/facebook?tab=members）。我编写的代码提取了成员 URL；

```
def getMembers(url):
  text = urllib2.urlopen(url).read();
  soup = BeautifulSoup(text);
  memberList = []
    #Retrieve every user from the company
    #url = "https://github.com/facebook?tab=members"

  data = soup.findAll('ul',attrs={'class':'members-list'});
  for div in data:
    links = div.findAll('li')
    for link in links:
          memberList.append("https://github.com" + str(link.a['href']))

  return memberList 
```

然而，这需要相当长的时间来解析，我想知道我是否可以更有效地做到这一点，因为爬行过程太长了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:29:13.527

我建议你使用 GitHub API，它可以让你做你想做的事。然后只需要使用 json 解析器就可以了。

[http://developer.github.com/v3/orgs/members/](http://developer.github.com/v3/orgs/members/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:53:09.313

为了防止自己编写刮板，您可以使用可用的刮板。也许试试scrapy，它使用python，它可以在github上找到。 [http://scrapy.org/](http://scrapy.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T17:21:27.567

查看[Extremely Simple Web Crawler 这篇](http://remotalks.blogspot.com/2014/05/an-extremely-simple-and-effective-web.html)文章，了解一个简单易懂的 python 脚本，它可以爬取网页并根据种子 URL 和深度收集所有有效的超链接：

# php - 不允许使用 curl 发布到 pingomatic

> ID：13259883
> 
> 赞同：1
> 
> 时间：2012-11-06T21:41:28.803
> 
> 标签：php, curl, blogs

我使用 curl 和这样的代码发布到 pingomatic

```
$curl = curl_init($this->buildURL());
curl_exec($curl); 
```

但是收到了回复

```
You are too awesome for Ping-o-matic 
```

为什么我对 Ping-o-matic 太棒了？

**编辑**

我正在向 pingomatic 发帖，但没有`POST`向 pingomatic 发帖。他们的设置只需要一个简单的`GET`请求

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T21:41:28.803

Pingomatic 要求设置用户代理标头。添加这个可以解决问题：

```
curl_setopt( $curl, CURLOPT_USERAGENT, "Mozilla/5.0" ); 
```

然后代码看起来像

```
$curl = curl_init($this->buildURL());
curl_setopt( $curl, CURLOPT_USERAGENT, "Mozilla/5.0" );
curl_exec($curl); 
```

来源：[http ://www.krunk4ever.com/blog/2011/12/21/you-are-too-awesome-for-ping-o-matic/](http://www.krunk4ever.com/blog/2011/12/21/you-are-too-awesome-for-ping-o-matic/)

Github 项目：[https ://github.com/DynamiX-Web-Design/DxPingomatic](https://github.com/DynamiX-Web-Design/DxPingomatic)

# if-statement - 更改整数编程的 if-else 语句

> ID：13259890
> 
> 赞同：-1
> 
> 时间：2012-11-06T21:41:51.420
> 
> 标签：if-statement, integer

我应该如何将这些 if 语句更改为 IP 约束？

```
If x-y>=0 then z=0
if x-y<0  then z=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:43:29.037

假设类似于 C (98) 的语言，其中[布尔表达式产生 0 或 1](https://stackoverflow.com/questions/7687403/is-the-true-result-of-or-defined)：

```
z = x-y<0 
```

`z`将是一个布尔值，如果 ，则为真`x-y <0`，但评估实际上是`true=1`, `false=0`- 它会让你得到你想要的。

# javascript - jQuery Mobile：具有单独页面的多页面应用程序：第二页未设置样式

> ID：13259891
> 
> 赞同：2
> 
> 时间：2012-11-06T21:42:16.820
> 
> 标签：javascript, jquery, jquery-mobile

我们有一个带有两个视图的单页应用程序（本质上是项目列表和所选项目的详细信息页面）。两个视图都在单独的 html 文件中，我们使用 sammy.js 在页面之间进行转换/导航。一切都很好，直到我们尝试将 jQuery Mobile 添加到组合中。现在，当我们导航到第二个页面（详细信息页面）时，jQuery Mobile 没有设置页面样式。

我们的工作应用程序没有按照 jQuery Mobile 的多页模板所描述的那样设置（即，将所有页面 div 放在同一个 html 文件中，并使用它们的导航系统通过 AJAX 将链接的页面加载到 DOM 中）。但是，是否有可能有单独的页面，使用 jQuery Mobile 导航以外的东西，并且第二页仍然具有 jQuery Mobile 样式？或者，有没有办法强制 jQuery Mobile 设置第二页的样式？

这里有一些代码片段，希望能帮助展示我们正在做的事情。（注意：我们还使用 ASP.NET 剃刀视图。）

索引.cshtml

```
<body>
    @RenderPage("Views/items.cshtml")
    @RenderPage("Views/item.cshtml")

    @Scripts.Render("~/bundles/jquery")
    <script>
        $(document).bind("mobileinit", function () {
            $.mobile.ajaxEnabled = false;
            $.mobile.hashListeningEnabled = false;
            $.mobile.pushStateEnabled = false;
            $.mobile.loader.prototype.options.text = "loading.  please wait...";
            $.mobile.loader.prototype.options.textVisible = true;
        });
    </script>
    @Scripts.Render("~/bundles/jquerymobile", ...)
</body> 
```

items.cshtml（此页面已正确加载和呈现）

```
<section id="items-view" class="view" data-role="page">
    <section data-role="header">
        ....
    </section>

    <section data-role="content">
        (navbars, ULs, LIs, etc. are here, with each LI a link to go to the details page)
    </section>

    <section data-role="footer">
        ....
    </section>
</section> 
```

item.cshtml（此页面已加载但未正确呈现，没有 jQuery Mobile 样式）

```
<section id="item-view" class="view" data-role="page">
    <section data-role="header">
        ....
    </section>

    <section data-role="content">
        (ULs, LIs, listboxes, textboxes, etc. are here)
    </section>

    <section data-role="footer">
        ....
    </section>
</section> 
```

router.js（用于在页面之间路由）

```
....
            navigateTo = function (url) {
                sammy.setLocation(url);  // url = #/items or #/item/1234
            },
.... 
```

在项目页面的 js 文件中，我们尝试过：

```
 var $page = $("#item-view");
        //$page.trigger("create");
        //$page.listview("refresh");
        //$page.page();  (this one kind of work but doesn’t style every object)
        //$page.page("refresh", true); 
```

但没有任何东西可以正确和完整地工作。

那么，再一次，考虑到我们的情况，有没有办法让 jQuery Mobile 多页面应用程序具有实际单独的物理文件并让所有页面都正确获取样式？或者是否有一种编程方式来强制 jQuery Mobile 正确设置所有页面的样式？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:28:53.790

jquery mobile 不会从您的第二页加载所有内容。当您需要一个带有 JQM（或它的 ajax 方法）的新页面时，它会加载页面的部分 DOM 并获取所有内容

```
<div data-role="page" id="yourPageID"></div> 
```

所以您可以简单地尝试将您的样式表放在“数据角色”下，如下所示：

```
<div data-role="page" id="yourPageID">
    <link rel="stylesheet" href="yourStyleSheetLink.css" />
</div> 
```

然后，当 JQM 需要一个新页面时，您的样式表将被加载。

作为一个不会说英语的人，我希望你能理解我的话:)

# jquery - 通过 JQuery 搜索 XML

> ID：13259894
> 
> 赞同：0
> 
> 时间：2012-11-06T21:42:27.927
> 
> 标签：jquery, html, xml, xslt, search

我正在尝试使用 XML 文档作为数据库来构建一个基本的搜索引擎。截至目前，我有以下 Jquery 代码将完整的 XML 加载为 HTML 格式，但我希望它根据用户输入显示数据（因此是搜索引擎）。如何编辑以下代码，以便根据用户定义的变量显示数据？

```
$(document).ready(function(){
            $.ajax({
                type: "GET",
                url: "cbo_list.xml",
                dataType: "xml",
                success: function(xml) {
                    var Counter = 0;
                    $(xml).find('cbo').each(function(){

                        var cboID = $(this).find('cbo_id').text();
                        var cboName = $(this).find('cbo_name').text();
                        var cboAddress = $(this).find('cbo_address').text();
                        var cboCity = $(this).find('cbo_city').text();
                        var cboState = $(this).find('cbo_state').text();
                        var cboZip = $(this).find('cbo_zip').text();
                        var cboDisplayName = cboName;
                        if (cboName.length >= 30) {
                            cboDisplayName = cboName.substring(0, 30) + '...';
                        }

                            $('<div class="items" id="link_' + cboID +'"></div>').html('<a href="cboDetail.html?cboID=' + cboID + '">' + cboDisplayName + '</a>').appendTo('#page-wrap');
                            $('<div class="cboAddress"></div>').html(cboAddress).appendTo('#page-wrap');
                            $('<div class="cboAddress"></div>').html(cboCity + ', ' + cboState + '. ' + cboZip).appendTo('#page-wrap');
                            $('<hr>').html('<hr>').appendTo('#page-wrap');
                        //}
                    });
                }
            });
        }); 

    function SettingsForm() {
        document.location = 'settings.html';
    } 
```

作为旁注；我最初尝试使用 XSL 执行此操作（......是的......）。有没有可能将两者结合起来？如果是这样，我该如何解决 XSL 基本上无法返回近似匹配的事实？

# json - HTTP Form POST JSON 字符串而不是使用键/值字段的常见做法？

> ID：13259895
> 
> 赞同：0
> 
> 时间：2012-11-06T21:42:37.927
> 
> 标签：json, http, web

创建一个 HTTP POST 端点（带有标题“application/x-www-form-urlencoded”）是一种常见的做法吗？它将 JSON 字符串作为键/值 POST 数据的值而不是列表字段作为 POST 数据？无论是否常见，它是否被认为是不好的，因为它需要更多的工作来将字段字符串化为 JSON 字符串？

示例： POST 表单数据中的 user={"username":"bob", "age":1} vs username=bob&age=1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:49:46.080

这实际上很常见——SOAP 消息格式就是这样做的；用自定义消息格式替换标准 POST 正文（对于 SOAP，它是 XML）。

唯一需要考虑的是，如今 HTTP 非常普遍，尽管为任何语言找到 JSON 库都很简单，但创建 HTTP 主体非常简单。

所以无论如何它都不错，但是如果客户端序列化为 JSON，然后你从 JSON 反序列化，使用标准 HTTP 消息体会更容易吗？

# security - Node.JS 在运行时切换用户

> ID：13259896
> 
> 赞同：5
> 
> 时间：2012-11-06T21:42:45.917
> 
> 标签：security, node.js

以 root 身份运行的 Node.JS 程序是否可以在运行时降级其权限？这将是它首先要做的事情之一，其目的当然是限制它可能造成的损害，以防万一存在漏洞或在此过程中运行的不受信任的代码。

或者，有没有办法让以 root 身份运行的 Node.JS 进程启动一个非 root 的单独进程？（最好不要在中间加一层，比如sudo）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T21:49:15.403

尝试[process.setuid（以及类似的 process.setgid）](http://nodejs.org/api/process.html#process_process_setuid_id)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:51:33.647

是的，使用[process.setuid(id)](http://nodejs.org/api/process.html#process_process_setuid_id)和[process.setguid(id)](http://nodejs.org/api/process.html#process_process_setgid_id)来更改当前进程的有效用户/组 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:56:57.013

@mabako 的答案看起来不错，但应该有更简单的操作系统技巧。

我看到人们用节点做很多事情是要么

1.  将运行节点代码的用户添加到`www-data`组以允许它绑定到特权端口。

    例如： http: [//kvz.io/blog/2009/12/15/run-nodejs-as-a-service-on-ubuntu-karmic/](http://kvz.io/blog/2009/12/15/run-nodejs-as-a-service-on-ubuntu-karmic/)

2.  使用 iptables 将特权端口重定向到非特权节点程序，该程序侦听高端口。

    `iptables -A PREROUTING -t nat -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 3000`

您是否有任何非端口绑定的理由以 root 身份运行节点服务器？

编辑：这里有更多技巧：[有没有办法让非 root 进程绑定到 Linux 上的“特权”端口？](https://stackoverflow.com/questions/413807/is-there-a-way-for-non-root-processes-to-bind-to-privileged-ports-1024-on-l)

# c - 从函数返回值

> ID：13259897
> 
> 赞同：1
> 
> 时间：2012-11-06T21:42:54.740
> 
> 标签：c

我对c编程很陌生。我已经写了休闲代码

```
 float value;  //golbal variable
 unsigned int data; //golbal variable

 void Maxphase(void) 
 { 
  float  MAX = 0.0;
   unsigned int i,index;
 for (i=0;i<=360;i++) 
 {              
    phaseset(i); 
    data = readvalue(); 
    value = voltage(data);    
    if(value>MAX)   //find max value 
    { 
      MAX = value;    //max voltage 
      index = i;   
     }  
  }                          
    printf("Max Voltage Value:%f\r\n", MAX); 
    printf("Related index Value:%d\r\n", index); 
} 
```

上面的代码完美地工作并打印最大电压和指数。我想从此函数返回值“Max”和“index”，我必须将 Max 值保存在一个变量中，并将索引值保存在其他变量中，例如。

```
void runCom(void){ 
     c=getchar();
 switch(c){ 
    case '1': 
           Maxphase();
          Vin= (I want to store MAX value of that function)
          p1= ( I want to store Index of that function)
          break; 
    default:
         break;
    }
  } 
```

实际上我想调用那个函数，它必须返回两个变量 MAX 和索引值，因此我想将这两个值存储在不同的变量中。

我知道函数不能返回两个值。

我已经搜索过，我发现可以使用结构或使函数使用指针来处理参数。我尝试使用 struct ，如下所示。

```
typedef struct {
   float v;
   unsigned int p;
  }volphase; 
```

我已经在头文件中声明了这个结构。我在我调用的所有文件中都包含了这个头文件。

```
volphase Maxphase()
{
   volphase vp;
float  MAX = 0.0;
   unsigned int i,index;
 for (i=0;i<=360;i++) 
 {              
    phaseset(i); 
    data = readvalue(); 
    value = voltage(data);    
    if(value>MAX)   //find max value 
    { 
      MAX = value;    //max voltage 
      index = i;   
     }  
  }                          
   vp.v=MAX;
   vp.p=index; 
   return vp;
  } 
```

这是写在“bvr.c”文件中的。但我正在考虑如何在 case'1'(main.c) 中调用这个“结构”，以及如何将 vp.v 存储在一个变量中，将 vp.p 存储在另一个变量中。

如果在编写结构中有任何问题，请建议我。或任何其他将返回两个值的最简单方法。

请帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:47:42.067

从函数返回 a`struct`是返回多个值的两种方法中最不常见的一种。使用指针更常见：

```
void Maxphase(float *max, unsigned int *index) 
{
    *max = 0.0;
    float value;
    unsigned int i, data;
    for (i=0;i<=360;i++) 
    {              
        phaseset(i); 
        data = readvalue(); 
        value = voltage(mux1);    
        if(value > *max)   //find max value 
        { 
            *max = value;    //max voltage 
            *index = i;   
        }  
    }                          
    printf("Max Voltage Value:%f\r\n", *max); 
    printf("Related index Value:%d\r\n", *index); 
} 
```

以下是调用此函数的方法：

```
int main() {
    float max;
    unsigned idx;
    Maxphase(&max, &idx);
    printf("Max Voltage Value:%f\r\n", max); 
    printf("Related index Value:%d\r\n", idx); 
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:58:11.920

我会从函数返回相位 - 函数名称是 MaxPhase，这意味着它返回一个最大相位值。可以使用指针返回找到最大值的索引。

请注意，该`data`值未使用且未`mux1`定义。另请注意，我使用`idx`而不是`index`后者有时已经在标准库中定义（尽管可能不在您的库中）。

```
float MaxPhase(int * maxindex)
{
    float max = 0.0;
    int idx = -1;

    for (int i=0; i<=360; i++) {
        phaseset(i);
        unsigned int data = readvalue();
        float value = voltage(mux1);
        if (value > max) {
            max = value;
            idx = i;
        }
    }
    *maxindex = idx;
    return max;
}

void caller(void)
{
    int idx = 0;
    float phase = MaxPhase(&idx);

    printf("Max Voltage Value:%f\n", phase);
    printf("Related index Value:%d\n", idx);

    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T21:58:32.083

```
#include <stdio.h>

struct lol
{
    float val;
    int ind;
};

void olol(struct lol *lol1)
{
    lol1->val = 5;
    lol1->ind = 3;
}

int main(void) {
    struct lol mylol = {0,0};
    olol(&mylol);
    printf("lololol %f %d \n", mylol.val, mylol.ind);
    printf("lol\n");
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T21:56:21.423

您可以通过几种不同的方式解决此问题：

1.定义一个包含两个值的结构并返回该结构。

```
#include <stdlib.h>
struct Values {
  int v1, v2;
};
struct Values *get2Values () {
  struct Values *x=(struct Values*)malloc (sizeof (struct Values));
  x->v1=1;
  x->v2=1231;
  return x;
} 
```

瞧，如果您不正确处理返回值，则会发生内存泄漏...

2.使用指针作为值的参数，例如指针：

```
void get2Values (int *v1, int *v2) {
  *v1=1;
  *v2=131231;
 }
 int main () {
   int a1, a2;
   get2Values (&a1, &a2);
 } 
```

祝你好运！

# wordpress - 在 wordpress 分页中添加自定义描述元标记

> ID：13259898
> 
> 赞同：0
> 
> 时间：2012-11-06T21:43:05.057
> 
> 标签：wordpress, pagination

我有一个关于 wordpress 分页查询的问题。

例如; 当我单击第二页 domain.tld/page/2 如何更改页面的描述元时`wp_head();`有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-18T07:26:48.833

我已经搜索了答案，但没有找到正确的解决方案。看一下这个

```
function add_meta_tags_for_pagination_pages() {
    global $page, $wp_query; // need to use globag vars in function
    if ( is_paged() ) { // it is a pagination
        $paged = get_query_var( 'paged' ) ? get_query_var( 'paged' ) : 1; // get current pagination page

        if (!is_home()){ // it is pagination in some category
            $category = get_the_category($wp_query->posts[0]->ID);
            $category_name = $category[0]->name;
        }  

        echo '<meta name="description" content="' . (isset($category_name) ? $category_name . ' | ' : '') . sprintf( __( 'Page %s' ), $paged ) . '" />' . "\n";
        echo '<meta name="keywords" content="' . (isset($category_name) ? $category_name . ', ' : '') . sprintf( __( 'Page %s' ), $paged ) . '" />' . "\n";
    }
}
add_action( 'wp_head', 'add_meta_tags_for_pagination_pages' , 2 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-15T01:18:08.750

上面的答案仍然有效。只需添加 get_the-excerpt() 将是更好的页面描述。

此外，该解决方案不适用于具有 /category 子目录的页面

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T22:30:08.897

你在找这个吗？

```
remove_action ('wp_head', 'wp_generator'); 
```

# html - 谁能认出这个小型的 Flash 音频播放器？

> ID：13259901
> 
> 赞同：1
> 
> 时间：2012-11-06T21:43:07.100
> 
> 标签：html, flash, audio, web, identify

我时不时地看到这个小球员，但我不知道它是从哪里来的，也不知道如何制作。请参阅[此处](http://languagelog.ldc.upenn.edu/nll/?p=4287)大约在页面的一半处查看一个示例。

看起来像这个截图

![截屏](../Images/ad3c82fb972cb12ab8c0013c93a904ec.png)

我知道这不完全是一个编程问题，但我还应该问哪里呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:48:40.633

它是 WordPress 音频播放器。请参阅[http://wpaudioplayer.com/](http://wpaudioplayer.com/)。

# vb.net - 检索声音文件

> ID：13259902
> 
> 赞同：2
> 
> 时间：2012-11-06T21:43:09.597
> 
> 标签：vb.net, audio

我正在使用 VB.NET 2008 和 SQL server 2005 传统的字典制作字典，用户编写单词并获取单词的翻译和发音，我面临从数据库检索部分的问题。我无法从数据库中检索声音文件。

这是我使用的代码

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    cmd.CommandText = " select voice from lang where arabic = N'" & txtFrom.Text & "'"
    Dim dt As New DataTable()
    'rdr = cmd.ExecuteReader()
    cmd.Connection = con
    Try
        con.Open()
        rdr = cmd.ExecuteReader
        While rdr.Read
            dt.Load(rdr)
            Dim stream As Byte()
            If stream Is DirectCast(dt.Rows(0)(1), Byte()) Then
                File.WriteAllBytes("D:\mad.wma", stream)

                AxWindowsMediaPlayer1.URL = "D:\mad.wma"
            End If
        End While
        con.Close()
    Catch ex As Exception
        MsgBox(ex.Message)
        con.Close()
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T17:01:21.483

你可能想去这个网站：[制作一个文字转语音程序](http://www.youtube.com/watch?v=Ao89H4WVKu0&feature=player_detailpage)。这会容易得多。

# python - Python - 查询倒排索引

> ID：13259903
> 
> 赞同：3
> 
> 时间：2012-11-06T21:43:10.563
> 
> 标签：python, string, dictionary, inverted-index

这是我关于 SO 的第一篇文章，如果我的问题有点琐碎，我提前道歉，我对编程世界比较陌生，我选择 python 作为我的第一个“严肃”OOP 语言。我通过 SO 档案进行了搜索，但我找不到任何与我的完全相关的问题。好的，长话短说，问题是：

我正在研究倒排索引。我在网上找到了一些教程和提示，我做了以下事情：

*   类 Document 用于词干词干并通过 finditer 函数返回它们的开始和结束位置。

*   类 Inverted_Index 获取文档集合（列表中的列表），对它们进行标记并将它们以如下形式放入倒排索引中

`{'word':{document_id:(start_pos, end_pos)}}`

喜欢 `{'cloud': {0: [(5, 10)]}, 'document': {1: [(11, 19)], 2: [(22, 30)]} ...}`。（我在 SO 主题的帮助下做了 document_id，遍历了文档的枚举集合。关于嵌套字典，我很业余地制作了它们，例如：

```
if nested_dict not in existing_dict:
    existing_dict[nested_dict] = {} 
```

当我阅读堆栈 owerflow 时，我注意到“defaultdict”数据类型是非常好的方法，但我还没有想出“集合”模块。）。

回到正轨：在 Inverted_Index 内部，我做了一个 Query 方法（只是 OR 运算符的一个版本），它将字符串作为查询，如果该字符串与我的倒排索引中的键/术语匹配，则返回 document_id 的起点和终点一个术语，例如：

```
[(1, [(0, 4), (11, 19)]), ...] 
```

在那之后，我……卡住了。我想做一个查询输出，打印出文档中找到的单词及其环境，但我不知道如何连接查询方法的结果（带有开始和结束位置的 document_id）和倒排索引，我不知道不知道如何在她的环境中突出显示匹配的查询。正因为如此，我做了起点和终点，但我不知道如何在 python 中强调它？大胆吗？

我想到了类似的结果：

> ###################
> 您的查询：'chocolate pudding'
> 结果：
> ########
> 在具有 id 的文档中：1
> yaddi yaddi yadda Chocolate bla bla bla布丁
> 巧克力 bla bla bla 布丁 yaddi yaddi yadda bla

我的意思是，我正在阅读[http://docs.python.org/2/library/string.html#string.center](http://docs.python.org/2/library/string.html#string.center)并认为在同一列中对齐找到的单词/查询会起到欺骗作用。但我不知道如何到达那里，所以任何类型的提示都会很棒，因为我没有被困在我的程序中，因为我被困在理解 python 背后的逻辑，在这种情况下，教程不会做正义。（是的，我有一些 python 书籍，但是他们对这种事情有扩展的方法，可能考虑到它不适合初学者，但我不知道从哪里开始，我可以使用什么程序。问题是，我们在大学里学习语言理论和国际关系理论，但我们在实践中做了一些事情。）。

谢谢！

对这个我生命中的故事结束感到抱歉：D

我忘了，一个不使这个话题含糊不清的代码：

```
class inverted_index(dict):

    def __init__(self,collection_of_docs):
        for doc_id,document in enumerate(collection_of_docs):
            for word,start,end in document.tokenize(): #form: [('sky', 0, 4)]
                if word not in self:
                    self[word]={}
                if doc_id not in self[word]:
                    self[word][doc_id]=[]
                self[word][doc_id].append((start,end))

    def query(self,query_string):
        result={}
        for query_term in re.findall(r'\w+',query_string.lower(),re.UNICODE):
            for doc_id in self.get(query_term,{}):
                if doc_id not in result:
                    result[doc_id]=self[query_term][doc_id]
                else:
                    result[doc_id]=result[doc_id]+self[query_term][doc_id]
        return sorted(result.items(),key=lambda e:-len(e[1])) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T06:53:41.517

您将需要在文本上使用“get_with_surroundings”方法。

它可能看起来像

```
class inverted_index(dict):
    def __init__(self,collection_of_docs):
        self.collection_of_docs = collection_of_docs #to store those
        # ... rest of your code

    def get_with_surroundings(document_id, position_tuple):
        start, end = position_tuple
        return self.collection_of_docs[document_id].text[start-10:end+10] 
```

+10 和 -10 可能会根据您需要显示多少环境而改变。我假设您的 Document 类具有一些“文本”属性，该属性是该文档的纯 Python 字符串。

使用您的查询结果之一调用此方法将或多或少地归档您需要的内容。

这[如何在 Python 中打印粗体文本？](https://stackoverflow.com/questions/8924173/python-print-bold-text)可能对python中的粗体文本有所帮助。

# jsf - Richfaces 4 动态创建的丰富组件显示为文本而不是菜单/链接

> ID：13259907
> 
> 赞同：1
> 
> 时间：2012-11-06T21:43:39.543
> 
> 标签：jsf, jsf-2, richfaces, seam

我正在从 RF3.3.3、JSF1.2 和 jboss 5 迁移到 JSF2/RF4。我们有一个丰富的工具栏组，其中包含从数据库表生成的下拉菜单。我对 web.xml 进行了更改，重命名了支持 bean 中的适用组件，但工具栏将仅显示为文本，而不是下拉菜单和链接。

网页.xml：

```
<?xml version="1.0"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
 <context-param>
  <param-name>org.richfaces.enableControlSkinning</param-name>
  <param-value>true</param-value>
 </context-param>
 <context-param>
  <param-name>org.richfaces.enableControlSkinningClasses</param-name>
  <param-value>false</param-value>
 </context-param>

 <context-param>
  <param-name>org.richfaces.resourceOptimization.enabled</param-name>
  <param-value>true</param-value>
 </context-param>

 <context-param>
  <param-name>org.richfaces.skin</param-name>
  <param-value>blueSky</param-value>
 </context-param> 
```

menu.xhtml - 包含在带有 h:head 和 h:body 标签的 template.xhtml 中：

```
<h:form id="mnMenu">
<rich:toolbar id="tb" >
    <rich:toolbarGroup>
    <s:link id="menuHomeId" view="/home.xhtml" value="Home" propagation="none"/>
    </rich:toolbarGroup>

    <rich:toolbarGroup binding="#{menuQueries.myBarGrp}" />

</rich:toolbar>
<!-- account for jsf bug? bug DOESN'T WORK -->
    <rich:toolbar rendered="false"/>
    <rich:toolbarGroup rendered="false"/>
    <rich:dropDownMenu rendered="false"/>
    <rich:menuGroup rendered="false"/>
    <rich:menuItem rendered="false"/>
</h:form> 
```

从 backing bean - 这个方法创建工具栏组，它最初看起来像这样：

```
public HtmlToolBarGroup getMyBarGrp()
{
     this.myBarGrp = new org.richfaces.component.html.HtmlToolBarGroup();
     for (CtsPermissionHierarchyAltV each : this.getMainMenuList()) {
          this.myBarGrp.getChildren().add(getDropDownMenu(each));
     }
return this.myBarGrp;
} 
```

我把它改成了这个，两者都产生相同的输出：

```
public UIToolbarGroup getMyBarGrp()
{
     FacesContext ctx = FacesContext.getCurrentInstance();
     this.myBarGrp = (UIToolbarGroup) ctx.getApplication().createComponent(ctx,     
      UIToolbarGroup.COMPONENT_TYPE, "org.richfaces.ToolbarGroupRenderer");
     this.myBarGrp.setId("dynMenuGrp");
     for (CtsPermissionHierarchyAltV each : this.getMainMenuList()) 
     {    
          this.myBarGrp.getChildren().add(getDropDownMenu(each));
     }
} 
```

getDropDownMenu 和 submenu 方法的编码类似。我没有收到任何错误。应该是下拉菜单的文本的 FF firebug 输出如下所示：

```
<div id="mnMenu:Communications" class="rf-ddm-lbl rf-ddm-unsel ">
... more stuff 
```

迁移前它看起来像这样：

```
<div id="mnMenu:Communications" class="rich-ddmenu-label rich-ddmenu-label-unselect">
... more stuff 
```

浏览萤火虫输出我可以看到所有的子菜单——但它们都是文本引用。我看到了我所有的 css 文件——它们出现在身体而不是头部，但它们都在那里。我错过了什么？我还能检查什么？

jboss 7.1.1 接缝 2.3.0 JSF2.1 RichFaces 4.2.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T19:46:05.583

很可能是资源问题。当您在 Firebug 中选择一项时，您是否看到任何匹配的 CSS 声明（rf-ddm-lbl 或 rf-ddm-unsel）？您是否在使用 firebugs net tab 时检查了任何 404 错误？

顺便说一句：应该在标题中引用 CSS 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:41:44.110

[在这里](https://community.jboss.org/wiki/Troubleshooting-ResourceOptimization)找到了答案。我需要添加

```
<servlet>
    <servlet-name>Resource Servlet</servlet-name>
    <servlet-class>org.richfaces.webapp.ResourceServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
 <servlet-mapping>
    <servlet-name>Resource Servlet</servlet-name>
    <url-pattern>/org.richfaces.resources/*</url-pattern>
</servlet-mapping> 
```

到 web.xml。不知道为什么它会起作用，这个解决方案适用于使用 servlet2.5 的容器，并且（据我所知）我使用的是 servlet3.0。

claudegex 你的回答让我走上了修复它的道路 - 实际上有 404 错误。赏金结束后我会标记这个正确的，你应该得到它的 1/2。

# ruby - 项目引用其容器的方法

> ID：13259910
> 
> 赞同：0
> 
> 时间：2012-11-06T21:44:02.977
> 
> 标签：ruby

例如，如果我执行以下操作：

```
foo = ["bar"]
foo.keep_if {|n| foo.last.obect_id == n.object_id} 
```

有没有另一种方法可以引用块内的 foo 而不是命名它，比如“n.container”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:46:23.383

不，没有。一个对象可以出现在任意数量的容器中（并且容器没有协议来告诉对象，“哟，我现在包含你”），所以它并不实用。仅使用块中的现有变量是最干净的方法。

# sql - 将 Sum() 与多个 where 子句一起使用

> ID：13259913
> 
> 赞同：2
> 
> 时间：2012-11-06T21:44:13.380
> 
> 标签：sql, sql-server-2008

我对此很陌生，所以如果这已经发布，请原谅（我什至不知道要搜索什么）。

我有 2 个表，帐户和使用情况

```
AccountID  AccountStartDate  AccountEndDate
-------------------------------------------
1          12/1/2012         12/1/2013
2          1/1/2013          1/1/2014

UsageId   AccountID EstimatedUsage  StartDate  EndDate
------------------------------------------------------
1         1         10              1/1        1/31
2         1         11              2/1        2/29
3         1         23              3/1        3/31
4         1         23              4/1        4/30
5         1         15              5/1        5/31
6         1         20              6/1        6/30
7         1         15              7/1        7/31
8         1         12              8/1        8/31
9         1         14              9/1        9/30
10        1         21             10/1        10/31
11        1         27             11/1        11/30
12        1         34             12/1        12/31
13        2         13              1/1        1/31
14        2         13              2/1        2/29
15        2         28              3/1        3/31
16        2         29              4/1        4/30
17        2         31              5/1        5/31
18        2         26              6/1        6/30
19        2         43              7/1        7/31
20        2         32              8/1        8/31
21        2         18              9/1        9/30
22        2         20             10/1        10/31
23        2         47             11/1        11/30
24        2         33             12/1        12/31 
```

我想写一个查询，为我提供每个月的估计使用情况（从现在开始，直到我们为帐户提供服务的最后一个月），用于该月服务的所有帐户。

结果如下：

```
Month-Year     Total Est Usage
------------------------------
Oct-12            0  (none being served)
Nov-12            0  (none being served)
Dec-12           34  (only accountid 1 being served)
Jan-13           23  (accountid 1 & 2 being served)
Feb-13           24  (accountid 1 & 2 being served)
Mar-13           51  (accountid 1 & 2 being served)
...
Dec-13           33  (only accountid 2 being served)
Jan-14           0   (none being served)
Feb-14           0   (none being served) 
```

我假设我需要求和，然后进行分组……但在逻辑上我不确定我将如何布局。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:58:39.937

修改后的答案：

我创建了一个 Months 表，其中包含 MonthID、Month 列，其值如 (201212, 12)、(201301, 1)...日期，因为它使想法更清晰。

有关详细信息，请参阅[http://sqlfiddle.com/#!3/f57d84/6](http://sqlfiddle.com/#!3/f57d84/6)

现在的查询是：

```
Select
  m.MonthID,
  Sum(u.EstimatedUsage) TotalEstimatedUsage
From
  Accounts a
    Inner Join
  Usage u
    On a.AccountID = u.AccountID
    Inner Join
  Months m
    On m.MonthID Between 
      Year(a.AccountStartDate) * 100 + Month(a.AccountStartDate) And
      Year(a.AccountEndDate) * 100 + Month(a.AccountEndDate) And
      m.Month = u.Month
Group By
  m.MonthID
Order By
  1 
```

以前的答案，作为参考，假设使用范围是完整的日期，而不仅仅是几个月。

```
Select
  Year(u.StartDate),
  Month(u.StartDate),
  Sum(Case When a.AccountStartDate <= u.StartDate And a.AccountEndDate >= u.EndDate Then u.EstimatedUsage Else 0 End) TotalEstimatedUsage
From
  Accounts a
    Inner Join
  Usage u
    On a.AccountID = u.AccountID
Group By
  Year(u.StartDate),
  Month(u.StartDate)
Order By
  1, 2 
```

# javascript - document.write 样式 css javascript

> ID：13259915
> 
> 赞同：2
> 
> 时间：2012-11-06T21:44:16.143
> 
> 标签：javascript, html, css, innerhtml

我从数据库中提取了一些 html 和 css，它恰好包含一些包装在样式标签中的 css。然后我将一些 innerhtml 设置为字符串变量并显示它。

html 已正确呈现，但 ie 不会显示带有 css 的内容 - 当然 firefox 会。下面是代码的缩写示例

```
var outputString = '<style type="text/css">.fontRed{color:red;}</style><span class="fontRed">red</span>' 
```

然后我将它设置为innerHTML

```
document.getElementById('bilbo').innerHTML = outputString; 
```

这在 FF 中正确显示（红色），但在 IE 中没有。是否有我需要为 IE 转义的角色？其余的 html 可以正常工作，甚至内联样式在 IE 中也可以正常工作。

任何帮助都将受到欢迎。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:59:16.263

试试这个方法..在 IE7 及更高版本中测试

```
// Create the Style Element
var styleElem = document.createElement('style');
styleElem.type = 'text/css' ;

var css = '.fontRed{color:red;}' ;

if(styleElem.styleSheet){
    styleElem.styleSheet.cssText = css;
}
else{
    styleElem.appendChild(document.createTextNode(css));
}

// Append the Style element to the Head
var head = document.getElementsByTagName('head')[0] ;
head.appendChild(styleElem);

// Append the span to the Div 
var container = document.getElementById('bilbo');
container.innerHTML = '<span class="fontRed">red</span>' ;​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/mqaAe/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T22:11:57.720

首先将 附加`<style type="text/css">.fontRed{color:red;}</style>`到 head 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T22:51:30.653

只需放在`<body>`输出字符串的开头即可。IE

```
document.getElementById('bilbo').innerHTML = '<body>' + outputString; 
```

有关工作演示，请参阅[http://jsfiddle.net/ScEZ4/1/ 。](http://jsfiddle.net/ScEZ4/1/)

经过测试和工作的 IE6、IE7、IE8、IE9、FF16、Chrome22、Opera12

# actionscript-3 - 从子类 Flash AS3 动态更改文本字段？

> ID：13259918
> 
> 赞同：0
> 
> 时间：2012-11-06T21:44:39.500
> 
> 标签：actionscript-3, flash, oop, class

我正在尝试从子类动态更改主舞台上的文本，但我不知道该怎么做。我可以通过使用 myTextArea.text = "Blarg" 很好地更改主类中的字段文本，但我很难从子类中进行更改，而谷歌也没有帮助。

我的应用程序结构类似于：

```
//Main class file
package {

    import flash.display.Sprite;
    import flash.events.Event;
    import flash.display.Stage;

    public class Main extends Sprite {

        static public var mainStage:Stage;

        public function Main() {
            if (stage) stageLoader();
            else addEventListener(Event.ADDED_TO_STAGE, stageLoader);
        }

        private function stageLoader() {
            mainStage = this.stage;
            removeEventListener(Event.ADDED_TO_STAGE, stageLoader);

            //This is working just fine
            myTextArea.text = "Blarg";
         }

    }

}

//Sub class
package {

    import flash.display.Sprite;

    public class OtherClass extends Sprite {

        public function OtherClass() {
            //This throws "Access of undefined property myTextArea" error
            myTextArea.text = "Blarg";
        }

    }

} 
```

我确信解决方案很简单，但我无法理解它，我很想得到你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:53:44.777

当我创建需要链接到主时间线的类时，我将在构造函数中将范围作为参数传递。像这样的东西：

```
package {

  import flash.display.Sprite;

  public class OtherClass extends Sprite {

      public function OtherClass(_path) {
            //This throws "Access of undefined property myTextArea" error
       _path.myTextArea.text = "Blarg";
      }

  } 
```

}

然后从你的主要课程：

```
var _otherClass = new OtherClass(this); 
```

# android-ndk - 让 Android NDK 与 libspotify 一起工作

> ID：13259920
> 
> 赞同：2
> 
> 时间：2012-11-06T21:44:44.503
> 
> 标签：android-ndk, spotify

我试图将 libspotify 用于 android 应用程序，但在构建我的 c 包装器时遇到了一些问题。我创建了一个非常小的包装器，它只询问 libspotify 它的版本是什么。

我的文件夹结构如下所示：

```
jni
 |-libs
 |  |-Android.mk
 |  |-libspotify.so    (symlink)
 |  |-libspotify.so.12 (symlink)
 |  |-libspotify.so.12.1.51
 |
 |-include
 |  |-libspotify
 |     |-api.h
 |
 |-Android.mk
 |-spotifywrap.c 
```

/jni/Android.mk

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_SHARED_LIBRARIES := libspotify
LOCAL_MODULE := spotifywrap
LOCAL_SRC_FILES := spotifywrap.c
LOCAL_C_INCLUDES := $(LOCAL_PATH)/include
include $(BUILD_SHARED_LIBRARY) 
```

/jni/spotifywrap.c

```
include <jni.h>
include <libspotify/api.h>

jstring Java_com_example_ndktest_MainActivity_getBuild(JNIEnv * env, jobject this)
{
    jstring result = (*env)->NewStringUTF( env, sp_build_id() );
    return result;
} 
```

/jni/libs/Android.mk

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := libspotify
LOCAL_SRC_FILES := libspotify.so
include $(PREBUILT_SHARED_LIBRARY) 
```

当我运行 ndk-build 时，我得到了这个：

```
spotifywrap.c:6: undefined reference to `sp_build_id' 
```

sp_build_id 是 api.h 中接口的一部分。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:59:24.690

我有一种感觉，您在`jni`子目录中的目录结构是导致您出现问题的原因。尝试编辑您的`Android.mk`构建文件以添加以下内容：

```
LOCAL_CPPFLAGS = -std=c++0x -D__STDC_INT64__
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include 
```

另外，我感觉您需要复制`libspotify.so`到您的顶级`libs/armeabi`目录才能成功链接。

# c++ - 将 Windows 为中心的控制台 I/O 移植到 Linux

> ID：13259929
> 
> 赞同：4
> 
> 时间：2012-11-06T21:45:52.720
> 
> 标签：c++, linux, c++11

我正在开发一个 Windows 应用程序，它有一个单独的线程，用于通过标准输入处理用户（或第 3 方）应用程序输入。

这个线程被设计成它通过`WaitForMultipleObjects`两个事件等待：

1.  **一个死亡信号**。当这个信号产生时，接口处理线程关闭。
2.  **一个接口信号**。当这个信号被提升时，有输入准备好被读取。输入被读取和处理。

在 Windows 下，该线程进入一个主循环，`Wait`用于这两个事件（其中`bWaitAll`is `FALSE`）。等待 stdin 句柄的作用是在有输入准备好读取时发出信号，而另一个事件是从应用程序的其他地方设置的。

这完全符合我的要求。它在不进入忙等待的情况下等待引发事件，并且同时等待这两个事件。

我希望将此功能移植到 Linux，但我不确定如何达到预期的效果。从根本上说，我真正想要的是：

> 在 Linux 下，我如何设计一个线程，以便它立即响应标准输入上的用户输入，但它也可以立即响应从应用程序的其他地方引发的终止标志？

为了完成后者，在我看来，在用户输入文本之前，我不能使用,`cin`或任何其他阻塞的功能。然而，我不知道如何在基于控制台的应用程序中不阻塞地读取用户输入。`gets``getch`

我对架构的任何更改（如果有更多的 Linux-y 方式来做到这一点）持开放态度，其中包括在一个单独的线程中处理用户输入，该线程可以从应用程序的其他地方终止。我正在使用 GCC 4.4 和 Boost 1.51。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:49:28.450

在 Linux 中执行此操作的标准方法是使用[`select(2)`](http://linux.die.net/man/2/select)系统调用。但是，`select`比 更受限制`WaitForMultipleObjects`，因为它只能等待文件描述符，而不是其他类型的对象（例如事件）。因此，解决这个问题的典型方法是创建一个管道并将一个虚拟值写入管道作为您的“信号”。

像这样的东西：

```
// Error checking omitted for expository purposes
int pipefd[2];
pipe(pipefd);  // Create the pipe

while(1)
{
    // Create file descriptor set of stdin and the read end of the pipe
    fd_set fds;
    FD_ZERO(&fds);
    FD_SET(STDIN_FILENO, &fds);
    FD_SET(pipefd[0], &fds);
    int maxfd = MAX(STDIN_FILENO, pipefd[0]);

    // Wait until input becomes available on either stdin or the pipe
    int num_available = select(&fds, NULL, NULL, NULL);

    // Read & process stdin if possible (will not block)
    if (FD_ISSET(STDIN_FILENO, &fds))
    {
        int n = read(STDIN_FILENO, buffer, size);
        ...
    }

    // Read & process pipe if possible (will not block)
    if (FD_ISSET(pipefd[0], &fds))
    {
        char dummy;
        read(pipefd[0], &dummy, 1);
        // Handle signal (e.g. break out of loop)
    }
} 
```

然后向线程发出信号表明它已经完成，只需将一个字节写入管道的写入端：

```
char dummy = 42;
write(pipefd[1], &dummy, 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:58:56.747

[`libev`](http://software.schmorp.de/pkg/libev.html)（以及几个类似的化身）提供了一个方便的抽象，`select`包括能够在`signal`s 上挂起。

如果您可以选择更改“**接口信号**”的来源，那么您可以考虑将其更改为使用[`raise`](http://linux.die.net/man/3/raise)。

# python - 自删除实例

> ID：13259933
> 
> 赞同：11
> 
> 时间：2012-11-06T21:46:01.287
> 
> 标签：python

`del()`是否可以在某些条件下对某些实例进行类调用？还是把self变成None？

```
 class T:
        def __init__(self, arg1, arg2):
            condition=check_condition(arg1,arg2)
            if not condition:
               do_something(arg1)
            else:
               del(self) #or self=None or return None 
```

我需要做这样的事情来确保永远不会存在某种实例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T21:50:20.610

> 我需要做这样的事情来确保永远不会存在某种实例。

`__init__()`如果您只是想阻止创建此类实例，请在满足条件时引发异常。

这是发出构造函数失败信号的标准协议。有关进一步的讨论，请参阅[Python：在 __init__ 中引发异常是一种不好的形式吗？](https://stackoverflow.com/questions/1507082/python-is-it-bad-form-to-raise-exceptions-within-init)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T21:50:16.897

调查[`__new__`](http://docs.python.org/2/reference/datamodel.html#object.__new__)。您应该能够检测到您关心的状况并返回`None`。正如@lzkata 在评论中提到的那样，提高 an`Exception`可能是一种更好的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T21:51:22.503

您可以按照评论中的建议提出异常。您可以实施`__new__`. 你也可以做一些工厂课，比如

```
class TFactory:
    def createT(self, arg1, arg2):
        condition=check_condition(arg1,arg2)
        if not condition:
           return do_something(arg1)
        else:
           return None 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T21:57:34.823

是的，您可以调用 del self。它工作得很好，但你应该知道它所做的只是删除对**init**方法中名为“self”的实例的引用。

在 python 中，只要在某处有对它们的引用，对象就存在。

如果您希望对象在某些条件下永远不存在，那么永远不要尝试在这些条件下创建实例，在您创建对象的**init之外。**

此外，您可以在此类中定义一个有用的函数来返回是否满足这些条件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T22:01:14.557

类构造函数旨在真正构造其类的实例，而不是通过不构造实例并返回 None 来半静默地失败。没有人会想到这种行为。

而是使用工厂函数。

```
class Test(object):
    @classmethod
    def create(cls):
        if ok(): return cls()
        else: return None 
```

# mysql - 如何使用另一个守护进程在生产模式下检查数据库完整性？

> ID：13259936
> 
> 赞同：1
> 
> 时间：2012-11-06T21:46:08.890
> 
> 标签：mysql, innodb, maintenance, health-monitoring, heartbeat

我想要一个守护进程来监控数据库的健康状况，以确保它没有损坏，它将运行一个脚本，

在不影响性能的情况下，最好的完整性检查是什么？

1-我是否应该在所有表中都有虚拟值，查询它们，如果它们被返回，假设数据库是健康的？

2-我应该每 5 分钟对所有桌子运行一次检查表吗？

3-我应该运行mysqlcheck吗？（它锁定所有表..）

请给我你的建议，

数据库将自行运行，以后没有人可以访问它，我只想检测损坏，丢失整个数据是可以接受的，但我对系统损坏或停机时间零容忍。所以我想及早发现损坏，并在必要时清除数据库并重新加载数据库。

我的默认引擎是 INNODB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:24:33.623

要验证 InnoDB .ibd 文件的全部内容，可以使用 innochecksum 命令。

[http://dev.mysql.com/doc/refman/5.5/en/innochecksum.html](http://dev.mysql.com/doc/refman/5.5/en/innochecksum.html)

请注意，这仅在 mysqld 实例未打开 InnoDB 时才有效。因此，最好在 mysqld 关闭时执行此操作。

* * *

回复您的评论：

我不建议在您需要熬夜的生产服务器上运行 mysqlcheck，因为*如果*检查发现 InnoDB 损坏，它将崩溃`mysqld`。

一般来说，*任何高可用性策略都必须包括冗余*。

例如，您需要在双向复制中与主服务器配对的第二个 MySQL 实例。指定一个作为主要的，您的所有应用程序都写入其中。另一个是备份。现在您可以在辅助服务器上运行 mysqlcheck，或者进行其他维护、升级，随心所欲。完成后，交换他们的角色，使次要成为主要。然后，您可以在第一台服务器上进行类似的检查，而不会冒着生产正常运行时间的风险。

# php - 根据特定客户端 ID 过滤对控制器操作的访问的最佳方法

> ID：13259937
> 
> 赞同：4
> 
> 时间：2012-11-06T21:46:16.713
> 
> 标签：php, cakephp, authorization, cakephp-2.2

使用 CakePHP 2.2，我正在构建一个应用程序，其中每个客户端都有自己的数据“领域”，而其他数据对他们来说是不可见的。例如，客户有他的一组用户、课程、承包商和工作。组在客户端之间共享，但它们不能对组执行操作。所有客户端可以对组做的就是将它们分配给用户。因此，管理员（使用 ACL）只能管理来自相同客户端 ID 的数据。

我所有的对象（当然，组除外）都有 client_id 键。

现在，我知道一种方法可以完成这项工作并且实际上让它运行良好，但它似乎有点脏，我想知道是否有更好的方法。作为项目的早期和 CakePHP 的新手，我渴望把它做好。

这就是我现在的做法：

1-用户登录。他的client_id根据用户表中的数据写入会话。

```
$user = $this->User->read(null, $this->Auth->user('id'));
$this->Session->write('User.client_id', $user['User']['client_id']); 
```

2- 在 AppController 中，我有一个受保护的函数，可以将该会话 ID 与给定参数进行比较。

```
protected function clientCheck($client_id) {
    if ($this->Session->read('User.client_id') == $client_id) {
        return true;
    } else {
        $this->Session->setFlash(__('Invalid object or view.'));
        $this->redirect(array('controller' => 'user', 'action' => 'home'));
    }
} 
```

3- 我的不同索引操作（每个索引，每个相关控制器），我使用分页条件检查 client_id。

```
public function index() {
    $this->User->recursive = 0;
    $this->paginate = array(
         'conditions' => array('User.client_id' => $this->Session->read('User.client_id'))
    );
    $this->set('users', $this->paginate());
} 
```

4- 在其他操作中，我在以这种方式检查 HTTP 请求类型之前检查了 client_id。

```
$user = $this->User->read(null, $id);
$this->clientCheck($user['User']['client_id']);
$this->set('user', $user); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:07:58.230

您还可以通过在模型的 beforeFind 函数中放置一些东西来将 client_id 条件应用于模型的所有查找。

例如，在您的 User 模型中，您可以执行以下操作：

```
function beforeFind( $queryData ) {

    // Automatically filter all finds by client_id of logged in user
    $queryData['conditions'][$this->alias . '.client_id'] = AuthComponent::user('client_id');

    return $queryData;
} 
```

不确定 AuthComponent::user('client_id') 是否适用于模型，但你明白了。这将自动将此条件应用于模型中的每个查找。

您还可以使用模型中的 beforeSave 在新记录中自动为您设置该 client_id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T22:36:28.693

这个概念很好——它不是“肮脏的”，它与我处理此类情况的方式几乎完全相同。

你刚刚得到了几行冗余代码。第一的：

```
$this->Auth->user('id') 
```

该方法实际上可以获取登录用户的任何字段，因此您可以执行以下操作：

```
$this->Auth->user('client_id') 
```

所以你的两行：

```
$user = $this->User->read(null, $this->Auth->user('id'));
$this->Session->write('User.client_id', $user['User']['client_id']); 
```

不需要。您无需重新读取用户，或向会话写入任何内容 - 只需在需要时直接从 Auth 获取 client_id。

实际上，如果您阅读[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#accessing-the-logged-in-user](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#accessing-the-logged-in-user)它甚至说您可以从上下文之外获取它控制器，使用静态方法，如：

```
AuthComponent::user('client_id') 
```

尽管您似乎不需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T23:01:12.100

当我使用 PostgreSQL 时，我的答案可能是特定于数据库引擎的。在我的项目中，我在 mysql 术语中为每个客户端使用了不同的架构，这将是每个客户端的单独数据库。

在公共模式（公共数据库）中，我存储需要在所有客户端（在您的情况下没有 client_id 的对象）之间共享的所有数据，例如变量常量、配置文件设置等。

在我定义的公司特定模型中

```
public $useDbConfig = 'company_data'; 
```

在`Controller/AppController.php` `beforeFilter()`方法中，我有这个代码来根据登录的用户设置模式。

```
if ($this->Session->check('User.Company.id')) {
    App::uses('ConnectionManager', 'Model'); 
    $dataSource = ConnectionManager::getDataSource('company_data');
    $dataSource->config['schema'] = 
        'company_'.$this->Session->read('User.Company.id');
} 
```

如您所见，我根据使用的公司动态更新数据源。这确实排除了 company_id 在任何查询中的任何参与，因为只有公司相关数据存储在该模式（数据库）中。这也增加了扩展项目的能力。

这种方法的缺点是在结构更改时同步所有数据库结构会很麻烦，但可以通过导出数据、删除所有数据库、使用新布局重新创建它们并再次导入数据来完成。只需要确保导出带有完整插入的数据，包括列名。

# xcode - OSX Finder中的“虚拟文件”仅在我的应用程序运行时出现，可能吗？

> ID：13259941
> 
> 赞同：0
> 
> 时间：2012-11-06T21:46:24.250
> 
> 标签：xcode, cocoa, osx-mountain-lion, finder

有没有办法“挂钩”到 OSX Finder 来执行以下操作：

当我的应用程序启动时，用户会在他的 Finder 中看到一个由我的应用程序创建的文件夹。在此文件夹中，用户可以看到来自多个文件夹的文件...用户在我的应用程序中指定的多个文件夹中的多个文件的统一视图。因此，在这个“统一文件夹”中不是真正的文件，它们仍然在原始文件夹中，但是用户在这个文件夹中看到它们，就好像在这个新文件夹中有他所有的真实文件一样。所以不涉及复制或移动。

老实说，我不知道它是否可能以及我应该在 Cocoa SDK 中寻找什么。也许Finder本身或其他方式有一个API？！

问候

twickl

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:09:52.233

第一个选项是您的应用程序可以为原始文件创建*别名。*Finder 将在图标上方显示一个小箭头“徽章”，因此很明显它们不是原始文件，而是它们的别名。

如果您不喜欢创建*硬链接*的图标上的徽章，可能会给您想要的东西。

Mac OS X 提供了与 UFS (Unix) 相匹配的 HFS+ (Mac) 文件系统的视图，您可以访问硬链接和符号链接。后者被 Finder 处理为类似于别名，但前者与原始文件无法区分，因为它们*是*原始文件 - 在 Unix 文件系统下，目录中的文件只是对真实文件的引用（ *inode*编号），每个目录中的条目只是到实际文件的硬链接，文件可以有任意数量的硬链接（当链接计数降至 0 时，文件被删除，如果有帮助，请考虑保留/释放模型） .

在 Cocoa 级别`NSFileManager`有创建硬链接的方法，或者您可以使用 Unix 级别的`link(2)`函数。

# css - 为什么我的特定表格单元格类没有改变其垂直对齐方式？

> ID：13259952
> 
> 赞同：0
> 
> 时间：2012-11-06T21:47:26.137
> 
> 标签：css, vertical-alignment, css-tables

我创建了一个特定的表格单元格类来更改单元格中文本的垂直对齐方式，但由于某种原因，我在浏览器的元素检查器中收到一条错误消息，并且 CSS 与不太具体的版本相同。

我附上了正在发生的事情的屏幕截图。有关错误消息的含义和/或如何解决此问题的任何想法。我试过添加 !important 但这没有用。

[![我不熟悉的警告消息...](../Images/f58b92e73b264d8db2d85594ceff1299.png "点击放大")](https://i.stack.imgur.com/vofPi.png "点击放大")

点击图片放大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:57:45.633

尝试使用垂直对齐：中间；

'center' 用于水平对齐。

# objective-c - 图像生成器（ generateCGImagesAsynchronouslyForTimes 方法）不提供实时结果

> ID：13259954
> 
> 赞同：0
> 
> 时间：2012-11-06T21:47:36.720
> 
> 标签：objective-c, macos, cocoa, image-generation

对可可开发来说还很陌生，并且确实遇到了一个基本问题。

简而言之，我的应用程序 UI 看起来像一个底部带有 nsslider 的简单窗口。我需要的是生成 N 个图像并将它们放置在我的应用程序窗口中的 N 个 nsview 上。

到目前为止它做了什么：

*   我单击滑块（按住它）并拖动它。当我拖动它时，我的视图没有任何反应（不会生成图片）。当我释放滑块时，图片就生成了，我的视图充满了它们。

我想要什么： - 当我移动滑块时，我需要用图片填充视图。

**我找到了 NSSlider 属性上的小复选框，它是连续的，我正在使用它，但我的图像生成器在我释放滑块之前仍然没有做任何事情。**

这是我的代码：

```
// slider move action
- (IBAction)sliderMove:(id)sender
{   
    [self generateProcess:[_slider floatValue];
}

// generation process
- (void) generateProcess:(Float64) startPoint
{
    // create an array of times for frames to display
    NSMutableArray *stops = [[NSMutableArray alloc] init];

    for (int j = 0; j < _numOfFramesToDisplay; j++)
    {
        CMTime time = CMTimeMakeWithSeconds(startPoint, 60000);

        [stops addObject:[NSValue valueWithCMTime:time]];
        _currentPosition = initialTime;   // set the current position to the last frame displayed
        startPoint+=0.04; // the step between frames is 0.04sec
    }

    __block CMTime lastTime = CMTimeMake(-1, 1);
    __block int count = 0;
    [_imageGenerator generateCGImagesAsynchronouslyForTimes:stops
                                          completionHandler:^(CMTime requestedTime, CGImageRef image, CMTime actualTime,AVAssetImageGeneratorResult result, NSError *error)
     {
         if (result == AVAssetImageGeneratorSucceeded)
         {
             if (CMTimeCompare(actualTime, lastTime) != 0)
             {
                 NSLog(@"new frame found");
                 lastTime = actualTime;
             }
             else
             {
                 NSLog(@"skipping");
                 return;
             }

             // place the image onto the view
             NSRect rect = CGRectMake((count+0.5) * 110, 500, 100, 100);

             NSImageView *iView = [[NSImageView alloc] initWithFrame:rect];

             [iView setImageScaling:NSScaleToFit];
             NSImage *myImage = [[NSImage alloc] initWithCGImage:image size:(NSSize){50.0,50.0}];
             [iView setImage:myImage];
             [self.windowForSheet.contentView addSubview: iView];
             [_viewsToRemove addObject:iView];
         }

         if (result == AVAssetImageGeneratorFailed)
         {
             NSLog(@"Failed with error: %@", [error localizedDescription]);
         }
         if (result == AVAssetImageGeneratorCancelled)
         {
             NSLog(@"Canceled");
         }
         count++;
     }];
} 
```

}

如果您有任何想法或想法，请与我分享，我将非常感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:49:41.117

为了使您的 NSSlider 连续，请`XIB`在 Interface Builder 中打开窗口控制器的文件，然后单击`NSSlider`. 然后，打开实用程序区域

![公用事业区](../Images/804e6244bb42cff30b0f3583740d1423.png)

选择属性检查器

![属性检查器](../Images/dc5b13d6f98cc12f9572dfc99d721a20.png)

并选中“连续”复选框

![在控制标题下连续检查](../Images/7bca26dbeb5a453044ba6f66bf3bb82c.png)

在控制标题下。完成此操作后，您`IBAction` `sliderMove:`将在滑块移动时调用，而不是在释放鼠标时调用。

注意：或者，使用

```
NSSlider *slider = //... 
```

可以简单地调用

```
[slider setContinuous:YES]; 
```

# asp.net - IE9 将网站投掷到 Quirks 模式

> ID：13259958
> 
> 赞同：3
> 
> 时间：2012-11-06T21:48:00.047
> 
> 标签：asp.net, html, internet-explorer, cross-browser, internet-explorer-9

我想避免这种情况。我试过了：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

（来自[HTML5 doctype 将 IE9 置于 quirks 模式？](https://stackoverflow.com/questions/6529728/html5-doctype-putting-ie9-into-quirks-mode)）并且：

```
<meta http-equiv=”X-UA-Compatible” content=”IE=9″ /> 
```

（来自[禁用父框架的怪癖模式](https://stackoverflow.com/questions/11788943/disable-quirks-mode-for-parent-frame)）

但两者都没有帮助。当我执行 F12 - 文档模式 IE9 标准时 - 页面显示正常。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T21:52:55.767

如果页面是本地的，或者在 Intranet 上，Internet Explorer 默认为 quirks 模式。

如果您将相同的页面放在 Web 上，它的行为将符合预期。

要让它按您的意愿工作，就像您使用 ASP.NET 一样，您可以将其添加到您的 web.config 文件中：

```
<system.webServer>
<httpProtocol>
  <customHeaders>
    <clear />
    <add name="X-UA-Compatible" value="IE=edge" />
  </customHeaders>
</httpProtocol> 
```

这避免了必须覆盖所有 Intranet 页面的用户设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T05:03:18.007

我在本地运行该页面并遇到此问题。我正在使用 HTML5 并且刚开始我的页面`<html>`。

当我添加`<!DOCTYPE html>`它时，它神奇地开始工作（甚至在本地）。

在上下文中：

```
<!DOCTYPE html>
<html>
<head>
    <title>Example</title>
    <add name="X-UA-Compatible" value="IE=edge" />
</head> 
```

[有关 IE8 和 doctype 的更多信息。](http://ejohn.org/blog/html5-doctype/)

# c# - 为什么 Path.GetFileName() 返回正确文件夹的名称，但 Path.GetDirectoryName() 返回父文件夹？

> ID：13259963
> 
> 赞同：4
> 
> 时间：2012-11-06T21:48:22.580
> 
> 标签：c#, winforms, path, treeview, directory

我发现`Path.GetFileName()`在下面的代码中使用按我的意图工作，并为我提供了正确文件夹的名称，但如果我使用`Path.GetDirectoryName()`它，则返回父 (UserGeneratedContent) 文件夹的名称。为什么当这两种方法都作为字符串传递相同的路径时会发生这种情况？为什么`Path.GetFileName()`在目录上工作？

当我`Path.GetFileName()`在 Treeview 中使用节点的文本时，它会找到它找到的文件夹的文本 - 这就是我想要发生的事情，但如果我使用`Path.GetDirectoryName()`文本是每个节点从*@"UserGeneratedContent"开始的完整路径。*为什么会这样？

最后，我的代码可以改进吗？

```
private void CheckForBaseFolder()
{
    if (Directory.Exists(@"UserGeneratedContent"))
    {
        DirectoryInfo info = new DirectoryInfo(@"UserGeneratedContent");
        DirectoryInfo[] subdirs = info.GetDirectories();

        if (subdirs.Length != 0)
        {
            string path = Path.Combine(@"UserGeneratedContent", subdirs[0].ToString());
            treeView1.Nodes.Add(CheckForSubFolders(path));
            treeView1.SelectedNode = treeView1.Nodes[0];
        }
        else { MessageBox.Show("No User-Generated Folders Or Files Found"); }    
    }
    else { Directory.CreateDirectory(@"UserGeneratedContent"); }
}

private TreeNode CheckForSubFolders(string path)
{
    TreeNode folder = new TreeNode(path);

    folder.Text = Path.GetFileName(path); // Works as intended, but.....
    folder.Text = Path.GetDirectoryName(path); // Returns the parent folder 

    foreach(var subdirectory in Directory.GetDirectories(path))
    {
        folder.Nodes.Add(CheckForSubFolders(subdirectory));                
    }

    folder.ImageIndex = 0;
    folder.SelectedImageIndex = 1;

    return folder;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T22:05:02.787

检查您的代码，您传递的路径不包含文件名，但路径的最后一部分是目录 UserGeneratedContent。`Path.GetFileName`返回[“路径中最后一个目录字符之后的字符”](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)，因此它返回最后一个目录名称而不是文件名（您可以制作没有扩展名的文件）。当您调用 `Path.GetDirectoryName()`相同的路径字符串时，它会返回["Directory information for path"](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx)。

检查此代码以查看我所指的内容：

假设你在 C 分区上有目录“one”，目录“one”中有目录“two”，目录“two”中有一个名为“three.txt”的文件，当你执行这段代码时，它将产生：

```
string directory = Path.GetFileName(@"C:\one\two");
directory = Path.GetDirectoryName(@"C:\one\two"); 
```

`directory`将首先保留“两个”，然后是“C:\one”

```
string filename = Path.GetFileName(@"C:\one\two\three.txt");
directory = Path.GetDirectoryName(@"C:\one\two\three.txt"); 
```

但现在，`filename`将持有“three.txt”`directory`并将持有“C:\one\two”

**编辑：***这是评论之后的稍后编辑*。我会这样修改`CheckForSubFolders`方法：

```
private TreeNode CheckForSubFolders(string path)
    {

        TreeNode folder = new TreeNode(path);
        string dir = path.TrimEnd(new char[] { '\\' });
        int index = dir.LastIndexOf('\\');
        folder.Text = dir.Substring(index + 1);

        //But I think that it is OK to use folder.Text = Path.GetFileName(path); 
        //since the filename of some file will never be passed to the CheckForSubFolders method         

        foreach(var subdirectory in Directory.GetDirectories(path))
        {

            folder.Nodes.Add(CheckForSubFolders(subdirectory));
        }

        folder.ImageIndex = 0;
        folder.SelectedImageIndex = 1;
        return folder;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T22:01:05.410

只是因为 MSDN cliams 为[Path.GetDirectoryName](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx)：

> 在大多数情况下，此方法返回的字符串由路径中的所有字符组成，但不包括最后一个 DirectorySeparatorChar 或 AltDirectorySeparatorChar。

因此，如果参数是目录本身的路径，它只会选择其父目录（如果有）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T21:58:18.643

首先，您如何区分指向文件的路径与指向目录的路径？只是你不能，因为你可以创建一个名为`file`（不包含点`.`和任何扩展名）的文件，你可以创建一个包含点的文件夹`folder.txt`。

那么你将如何实现确定路径是否指向文件的逻辑呢？

回答您的问题方法`GetFileName`并`GetDirectoryName`简单地假设最后一个路径部分是文件名。

# batch-file - DOS批处理重命名和旋转文件夹名称

> ID：13259964
> 
> 赞同：2
> 
> 时间：2012-11-06T21:48:24.787
> 
> 标签：batch-file, dos, rename, directory

我想用 DOS 批处理脚本重命名和旋转文件夹名称。

例子：

我有这个：

```
C:\Main\Folder01
C:\Main\Folder02
C:\Main\Folder03
C:\Main\Folder04
C:\Main\Folder05 
```

我需要将 Folder01 重命名为列表中的最后一个，在示例中它将变为 Folder06。但它可能是 Folder50，具体取决于文件夹的数量。所以我想得到这个。

```
C:\Main\Folder02
C:\Main\Folder03
C:\Main\Folder04
C:\Main\Folder05
C:\Main\Folder06 
```

然后我需要重新索引所有文件夹和 01 02 03 04 05，所以 Folder02 将成为 Folder01 并以这种方式旋转所有文件夹。

我不知道如何批量处理，请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T23:10:38.290

我会以不同的方式处理这个问题。首先将所有数字（包括 ）减一会更容易`01`：

```
 ┌─────> C:\Main\Folder00
C:\Main\Folder01 ─┘┌────> C:\Main\Folder01
C:\Main\Folder02 ──┘┌───> C:\Main\Folder02
C:\Main\Folder03 ───┘┌──> C:\Main\Folder03
C:\Main\Folder04 ────┘┌─> C:\Main\Folder04
C:\Main\Folder05 ─────┘ 
```

然后将`00`文件夹重命名为以前的姓氏：

```
C:\Main\Folder00 ──┐
C:\Main\Folder01   │   C:\Main\Folder01
C:\Main\Folder02   │   C:\Main\Folder02
C:\Main\Folder03   │   C:\Main\Folder03
C:\Main\Folder04   │   C:\Main\Folder04
                   └─> C:\Main\Folder05 
```

这种方式似乎更容易，因为重命名文件夹的循环还将最后处理的名称存储在变量中，然后该变量将用于重命名`00`文件夹。这是我正在谈论的内容的实现：

```
@ECHO OFF
SET "pathtemplate=C:\Main\Folder"
FOR /D %%I IN ("%pathtemplate%??") DO (
  SET "oldname=%%~nxI"
  SETLOCAL EnableDelayedExpansion
  SET /A "newsuffix=1!oldname:~-2!-1"
  RENAME "%%I" "!oldname:~0,-2!!newsuffix:~1!"
  ENDLOCAL
)
RENAME "%pathtemplate%00" "%oldname%" 
```

该`oldname`变量是用于记住循环后最后处理的文件夹的变量。它也用于*循环中*：首先，用于提取数字，其次，用于为新名称提供基础。

# eclipse - Ant 为带有测试的项目构建

> ID：13259965
> 
> 赞同：0
> 
> 时间：2012-11-06T21:48:30.027
> 
> 标签：eclipse, ant

我有一个项目需要使用 Ant 构建文件提交。该项目有两个文件夹：一个用于 src，一个用于测试。假设我需要编写两个不同的 build.xml 文件，我是否正确？一个用于测试，另一个用于源代码。还是只有一个构建文件是标准做法？我以前从未使用过 Ant（你可能已经猜到了：））

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:56:19.803

您应该使用具有单独目标的单个 Ant 构建文件进行构建和测试。 [这个例子](http://www.jspwiki.org/wiki/SampleAntBuildFile)有很好的文档记录，应该可以帮助你。

# php - 根据 cookie 会话创建一个随机的、有序的 id？

> ID：13259966
> 
> 赞同：0
> 
> 时间：2012-11-06T21:48:34.023
> 
> 标签：php, sql, cookies, registration

我有一个用户注册或注册表格，以允许访问我网站的客人成为注册会员。该表单由名字、姓氏、电子邮件等组成，该操作在提交时转到 process_reg.php。

然后将信息插入到 sql 表“ptb_registrations”中。但它还没有工作，因为我试图从 cookie 会话中随机生成一个带有表单的新用户 ID。我不确定我所做的是否正确。人们可以请纠正我的错误或指出我正确的方向。谢谢。

这是我的 process_reg.php 脚本：

```
<?php
require_once("session.php"); 
require_once("functions.php");
require('_config/connection.php');
?>
<?php 

session_start();

include '_config/connection.php'; 

function get_user_id() {
    global $connection;
    global $email;
    $query = "SELECT *
                FROM ptb_registrations
                WHERE email = \"$email\"
                ";
        $user_id_set = mysql_query($query, $connection);
        confirm_query($user_id_set);
        return $user_id_set;
        }
?>
<?php
$user_id_set = get_user_id();
while ($user_id = mysql_fetch_array($user_id_set)) {
    $cookie1 = "{$user_id["id"]}";
    setcookie("ptb_registrations", $cookie1, time()+3600);  /* expire in 1 hour */

}
?>
<?

$first_name = $_POST['first_name'];
$last_name = $_POST['last_name'];
$email = $_POST['email'];
$display_name = $_POST['display_name'];
$date_of_birth = $_POST['date_of_birth'];
$contact_number = $_POST['contact_number'];
$station = $_POST['station'];
$hobbies = $_POST['hobbies'];
$gender = $_POST['gender'];
$password = $_POST['password'];

$result = mysql_query("SELECT first_name FROM ptb_registrations WHERE id=".$cookie1['user_id']."");
$result = mysql_query("SELECT last_name FROM ptb_registrations WHERE id=".$cookie1['user_id']."");
$result = mysql_query("SELECT display_name FROM ptb_registrations WHERE id=".$cookie1['user_id']."");
$result = mysql_query("SELECT email FROM ptb_registrations WHERE id=".$cookie1['user_id']."");
$result = mysql_query("SELECT contact_number FROM ptb_registrations WHERE id=".$cookie1['user_id']."");
$result = mysql_query("SELECT date_of_birth FROM ptb_registrations WHERE id=".$cookie1['user_id']."");
$result = mysql_query("SELECT hobbies FROM ptb_registrations WHERE id=".$cookie1['user_id']."");
$result = mysql_query("SELECT station FROM ptb_registrations WHERE id=".$cookie1['user_id']."");
$result = mysql_query("SELECT gender FROM ptb_registrations WHERE id=".$cookie1['user_id']."");
$result = mysql_query("SELECT password FROM ptb_registrations WHERE id=".$cookie1['user_id']."");

if(!$result) 
{ 
echo "The username you entered does not exist"; 
} 
else 
if($email!= mysql_result($result, 0)) 
{ 
echo ""; 

    $sql=mysql_query("INSERT ptb_registrations SET first_name='$first_name' WHERE id=".$cookie1['user_id'].""); 
    $sql=mysql_query("INSERT ptb_registrations SET last_name='$last_name' WHERE id=".$cookie1['user_id'].""); 
    $sql=mysql_query("INSERT ptb_registrations SET display_name='$display_name' WHERE id=".$cookie1['user_id'].""); 
    $sql=mysql_query("INSERT ptb_registrations SET email='$email' WHERE id=".$cookie1['user_id'].""); 
    $sql=mysql_query("INSERT ptb_registrations SET contact_number='$contact_number' WHERE id=".$cookie1['user_id'].""); 
    $sql=mysql_query("INSERT ptb_registrations SET date_of_birth='$date_of_birth' WHERE id=".$cookie1['user_id'].""); 
    $sql=mysql_query("INSERT ptb_registrations SET hobbies='$hobbies' WHERE id=".$cookie1['user_id'].""); 
    $sql=mysql_query("INSERT ptb_registrations SET station='$station' WHERE id=".$cookie1['user_id'].""); 
    $sql=mysql_query("INSERT ptb_registrations SET gender='$gender' WHERE id=".$cookie1['user_id'].""); 
    $sql=mysql_query("INSERT ptb_registrations SET password='$password' WHERE id=".$cookie1['user_id'].""); 

}
    if($sql) 
    { 
    echo "<div class=\"infobox-profile\"> <strong>Thank You</strong> - We have received your registration details.</div>"; 
    }
else
{ 
echo "<div class=\"infobox-profile\"> <strong>Oooops!</strong> - Something went wrong. <a href=\"../edit_contact_number.php\">Click here</a> to try again.</div>"; 
}  
?>
<? ob_flush(); ?>

<style>
.infobox-profile {
    background-color: #e1e0f7;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    color: #181469;
    padding-top: 20px;
    padding-right: 10px;
    padding-bottom: 20px;
    padding-left: 70px;
    margin-bottom: 20px;
    background-image: url(../img/icons/info-icon.png);
    background-repeat: no-repeat;
    background-position: 15px center;
    border-top-width: 1px;
    border-top-style: solid;
    border-top-color: #8f8fdb;
    border-right-width: 1px;
    border-bottom-width: 1px;
    border-left-width: 1px;
    border-right-style: solid;
    border-bottom-style: solid;
    border-left-style: solid;
    border-right-color: #8f8fdb;
    border-bottom-color: #8f8fdb;
    border-left-color: #8f8fdb;
    border-radius: 4px;
    width: 385px;
    margin-left:8px;
}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:58:32.797

随机生成的数字并不总是完全随机的，一段时间后您总是会再次获得相同的数字。这是因为这些数字是由伪随机数生成器生成的。因为您使用 mysql 数据库，所以解决问题的最佳方法是使用自动增量属性。每次将新用户添加到数据库时，该字段都会增加一。

这是一个例子：

```
CREATE TABLE animals (
     id MEDIUMINT NOT NULL AUTO_INCREMENT,
     name CHAR(30) NOT NULL,
     PRIMARY KEY (id)
) ENGINE=MyISAM; 
```

# objective-c - 删除 UIImageView 并取回内存（我的内存正在泄漏）

> ID：13259972
> 
> 赞同：0
> 
> 时间：2012-11-06T21:48:47.230
> 
> 标签：objective-c, memory, uiimageview, erase

我正在制作一个简单的绘图应用程序，但内存有问题。使用几分钟后，它就崩溃了，这让 iPad 很慢。

用户创建绘图的线条由 2x2 像素的 UIImageView 组成，所以这个 UIImageView 被创建了几次：

```
UIImageView*dibujo = [[UIImageView alloc] initWithFrame:CGRectMake(x-1,y-1,2,2)];
dibujo.image = [UIImage imageNamed:@"pixelde2po2.png"];
tagdedibujo=tagdedibujo+1;
dibujo.tag=tagdedibujo;
[self.view addSubview:dibujo]; 
```

它以这种方式被删除：

```
 for (int aa=ultimotag+1; aa<=tagdedibujo; aa++) {
    //NSLog(@"destruyendo: %i", aa);
    UIImageView*dibujo1 = (UIImageView *)[self.view viewWithTag:aa];

    [UIView animateWithDuration:0.5 animations:^{
        dibujo1.alpha=0;
    }];

}

[self performSelector:@selector(matardibujo) withObject:(self) afterDelay:(0.51)];
   ultimotag=tagdedibujo;

-(void) matardibujo{
for (int aa=ultimotag+1; aa<=tagdedibujo; aa++) {
    [[self.view viewWithTag:aa] removeFromSuperview];
} 
```

}

即使在擦除 de draw (matardibujo) 之后，我也无法恢复记忆。即使它成长。所以我认为擦除部分是这里搞砸的部分。

我会感谢您的帮助，我对此很陌生。谢谢 ：）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T01:41:27.247

您能否`dibujo.image = [UIImage imageNamed:@"pixelde2po2.png"];`用以下代码行替换以查看它是否解决了您的问题？

```
NSString *fileName = [[NSBundle mainBundle] pathForResource:@"pixelde2po2" ofType:@"png"];
UIImage *image = [UIImage imageWithContentsOfFile:fileName]; 
```

# codeigniter - Codeigniter 用不同的值更新多条记录

> ID：13259973
> 
> 赞同：0
> 
> 时间：2012-11-06T21:49:05.397
> 
> 标签：codeigniter

我正在尝试使用不同记录的不同值更新某个字段。

如果我要使用 MySql 语法，我认为应该是：

```
UPDATE products
SET price = CASE id
    WHEN '566423' THEN 49.99
    WHEN '5681552' THEN 69.99
END
WHERE code IN ('566423','5681552'); 
```

但如果可能的话，我更喜欢使用 Active Record。

我的输入是一个制表符分隔的文本，我将其转换为一个 id 数组和每条记录的所需值：

```
$data = array(
               array(
                  'id' => '566423' ,
                  'price' => 49.99
               ),
               array(
                  'id' => '5681552' ,
                  'price' => 69.99
               )
    ); 
```

我认为这是 update_batch 的正确结构，但它失败了。这是我尝试过的：

```
function updateMultiple()
{
    if($this->db->update_batch('products', $data, 'id'))
    {
        echo "updated";
    }
    else
    {
        echo "failed )-:";
    }

} 
```

我总是失败。我错过了什么？

# iphone - 循环 UIScrollView 并添加子视图控制器并自动滚动？

> ID：13259977
> 
> 赞同：0
> 
> 时间：2012-11-06T21:49:26.010
> 
> 标签：iphone, loops, uiscrollview, automation, paging

我有 7 个子视图控制器，我将它们添加到具有 uiscrollview（启用分页）和页面控制器的父视图中。当我滑动时，如何将第 7 个添加的子视图控制器循环回第一个，以及如何自动执行此过程以每隔几秒钟滚动一次循环中的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:31:29.160

查看此页面上的答案。 [UIScrollView 无限滚动](https://stackoverflow.com/questions/3430267/uiscrollview-infinite-scrolling)

这可能特别有用 [https://stackoverflow.com/a/5769904/1061125](https://stackoverflow.com/a/5769904/1061125)

至于循环，你可以设置一个 NSStimer 来调用一个方法。在此方法中，调用 uiscrollviews scrollRectToVisible 方法，并将其传递给位于下一个视图控制器右侧的矩形（用于向右滚动）。

# sql-server-2008-r2 - 如何从两个表中获得单个结果，其中第二个表包含第一个表的更新版本？

> ID：13259980
> 
> 赞同：1
> 
> 时间：2012-11-06T21:49:39.037
> 
> 标签：sql-server-2008-r2, left-join

我有两张桌子，`CompanyAddresses`& `MyCompanyAddresses`。*（更改名称以保护有罪者）。*

`CompanyAddresses`保存公司的默认地址列表。这些记录是不可变的。用户可以更改公司地址的详细信息，但这些更改会被存储`MyCompanyAddresses`。

如何从两个表中生成一个地址列表，不包括`CompanyAddresses`相应记录所在的记录`MyCompanyAddresses`？

### 样本数据

公司地址

```
DatabaseId | Id    | Code | Name      | Street            | City      | Zip    | Maint Date
    1      | Guid1 | APL  | Apple     | 1 Infinite Loop   | Cupertino | 95014  | 11/1/2012
    2      | Guid2 | MS   | Microsoft | One Microsoft Way | Redmond   | 98052  | 11/1/2012 
```

我的公司地址

```
DatabaseId | Id    | Code | Name      | Street            | City      | Zip    | Maint Date
    5      | Guid3 | APL  | Apple     | Updated Address   | Cupertino | 95014  | 11/6/2012 
```

期望的结果

```
DatabaseId | Id    | Code | Name      | Street            | City      | Zip    | Maint Date
    2      | Guid2 | MS   | Microsoft | One Microsoft Way | Redmond   | 98052  | 11/1/2012
    5      | Guid3 | APL  | Apple     | Updated Address   | Cupertino | 95014  | 11/6/2012 
```

我尝试了 MS SQL 的各种排列，`UNION`但无济于事`EXCEPT`。`INTERSECT`另外，我也不相信`JOIN`'s 是答案，但我很高兴被证明是错误的。

数据库设计*可以*更改，但最好保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:56:32.423

将 LEFT JOIN 与 COALESCE 结合使用。如果 JOIN 找到匹配项，COALESCE 将从覆盖的行中选择值。如果未找到匹配项，则返回原始值。

```
SELECT ca.DatabaseId, 
       COALESCE(mca.Id, ca.Id) AS Id,
       COALESCE(mca.Name, ca.Name) AS Name,
       COALESCE(mca.Street, ca.Street) AS Street,
       COALESCE(mca.City, ca.City) AS City,
       COALESCE(mca.Zip, ca.Zip) AS Zip,
       COALESCE(mca.MaintDate, ca.MaintDate) AS MaintDate,
    FROM CompanyAddresses ca
       LEFT JOIN MyCompanyAddresses mca
           ON ca.Code = mca.Code; 
```

# javascript - 将 JSON 中的元素替换为 Javascript 数组中的元素

> ID：13259983
> 
> 赞同：0
> 
> 时间：2012-11-06T21:49:54.777
> 
> 标签：javascript, jquery, json

我有这个 JSON

```
[{"id":7,"serial":"7bc530","randomDouble":0.0,"randomDouble2":0.0,"randomDouble3":0.0,"date":1352228474000,"removed":null},
{"id":8,"serial":"4a18d27","randomDouble":0.0,"randomDouble2":0.0,"randomDouble3":0.0,"date":1352228474000,"removed":null},
{"id":9,"serial":"f30ef","randomDouble":0.0,"randomDouble2":0.0,"randomDouble3":0.0,"date":1352228474000,"removed":null},
{"id":10,"serial":"9e6d","randomDouble":0.0,"randomDouble2":0.0,"randomDouble3":0.0,"date":1352228474000,"removed":null},
{"id":11,"serial":"4d8665a3","randomDouble":0.0,"randomDouble2":0.0,"randomDouble3":0.0,"date":1352228474000,"removed":null},
{"id":12,"serial":"4fe1457","randomDouble":0.0,"randomDouble2":0.0,"randomDouble3":0.0,"date":1352228474000,"removed":null}] 
```

我有这个 JSON

```
{"computers":[{"id":"7bc530","name":"Dell","description":"Dell"},
{"id":"f30ef","name":"HP","description":"HP"},
{"id":"9e6d","name":"Compaq","description":"Compaq"},
{"id":"4d8665a3","name":"Toshiba","description":"Toshiba"},
{"id":"4fe1457","name":"Asus","description":"Asus"},
{"id":"4a18d27","name":"Acer","description":"Acer"}]} 
```

我想用这个 JSON 中的“描述”替换第一个 JSON 中的“串行”元素。我在一个 JSON 中需要它的原因是我使用的是 DataTable，我只能传入一个 JSON。

我不确定如何在 Javascript/JQuery 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:32:39.400

您可以通过设置小函数来完成此操作，而无需任何 jQuery：

（[见演示小提琴](http://jsfiddle.net/stevenschobert/BB8UU/)）

```
function replaceSerial (data1, data2) {
    var descs = {}, computers = data2['computers'], final = data1;

    for (var i = 0; i < computers.length; i++ ) {
        descs[computers[i]['id']] = computers[i]['description'];
    }

    for (var i = 0; i < data1.length; i++) {
        final[i]['serial'] = descs[data1[i]['serial']];
    }

    return final;
} 
```

然后只需将您的两段 JSON 保存到变量中并调用该函数：

```
var json1, json2, mergedJson;

json1 = // DATA IN FIRST JSON;
json2 = // DATA IN SECOND JSON;

mergedJson = replaceSerial (json1, json2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T22:16:40.703

假设您的第一个对象被调用`to`，第二个对象被调用`from`

```
// Iterate over each entry in to
to.forEach(function(value) {
    // In each iteration find elements in from where the id is the same
    // as the serial of the current value of to
    var description = from.computers.filter(function(element){
        if (element.id == value.serial) return true;
    });
    // Copy description of first found object in the description property of
    // the current object
    value.description = description[0].description;
    // Unset serial?
    delete value.serial;
}); 
```

[**演示**](http://jsfiddle.net/7P9dk/1/)

# fluent-nhibernate - 使用 ToFuture 延迟加载子集合

> ID：13259990
> 
> 赞同：1
> 
> 时间：2012-11-06T21:50:13.823
> 
> 标签：fluent-nhibernate, lazy-loading, parent-child, linq-to-nhibernate, multi-query

我目前正在使用带有 Nhibernate 3.2 的 c# 来访问 SqlServer 数据库，并且我正在尝试使用多查询和期货来加载子集合。

无论如何，我可以使用 Linq to Nhibernate 让它工作，但是当查看 sql 被发送到数据库时，它看起来好像正在加载所有父对象以及子集合获取的子对象（就像它渴望加载）。我很好奇是否可以更改此行为以仅拉取所需的子对象列。

这是说明此问题的代码示例。

```
 public class Parent : Entity
   {
      public virtual string Name { get; set; }
      public virtual IList<Child> Children { get; set; }
   }

public class Child : Entity
   {
      public virtual int Age { get; set; }
      public virtual string Name { get; set; }
      public virtual Parent Parent { get; set; }
   }

public class ChildClassMap : ClassMap<Child>
   {
      public ChildClassMap()
      {
         Id(x => x.Id,"Id");
         Map(x => x.Age);
         Map(x => x.Name);
         this.References(x => x.Parent).Column("ParentId").ForeignKey("Id");
      }
   }

 public class ParentClassMap : ClassMap<Parent>
   {
      public ParentClassMap()
      {
         Id(x => x.Id, "Id");
         Map(x => x.Name);
         this.HasMany(x => x.Children).KeyColumn("ParentId");
      }
   }

  public class FamilyRepository : NHibernateRepository<Parent>
   {
      public Parent GetParent(int id)
      {
         using (var session = this.Session.OpenSession())
         {
            var parent = session.Query<Parent>()
               .Where(p => p.Id == id);

            parent.FetchMany(x => x.Children)
               .ToFuture();

            return parent.ToFuture().SingleOrDefault();
         }
      }
   } 
```

测试用例

```
 [TestClass]
   public class FamilyTests
   {
      [TestMethod]
      public void Should_Get_Parent_And_Children()
      {
         // arrange
         var repo = new FamilyRepository();

         // act
         var parent = repo.GetParent(1);

         // assert
         Assert.AreNotEqual(null, parent);
         Assert.AreEqual("TheOldOne", parent.Name);
         Assert.AreEqual(3, parent.Children.Count);
         Assert.AreEqual(4, parent.Children[1].Age);
         Assert.AreEqual("TheMiddleOne", parent.Children[1].Name);

      }
   } 
```

数据：

```
CREATE TABLE [dbo].[Parent](
   [Id] [int] IDENTITY(1,1) NOT NULL,
   [Name] [varchar](50) NOT NULL,
CONSTRAINT [PK_Parent] PRIMARY KEY CLUSTERED 
(
   [Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[Child](
   [Id] [int] IDENTITY(1,1) NOT NULL,
   [ParentId] [int] NOT NULL,
   [Age] [int] NOT NULL,
   [Name] [varchar](50) NOT NULL,
CONSTRAINT [PK_Child] PRIMARY KEY CLUSTERED 
(
   [Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[Child]  WITH CHECK ADD  CONSTRAINT [FK_Child_Parent] FOREIGN KEY([ParentId])
REFERENCES [dbo].[Parent] ([Id])
GO

ALTER TABLE [dbo].[Child] CHECK CONSTRAINT [FK_Child_Parent]
GO

Set Identity_Insert [dbo].[Parent] on 
insert into [dbo].[Parent]
(Id, Name)
values (1, 'TheOldOne');

insert into [dbo].[Parent]
(Id, Name)
values (2, 'TheOtherOne');
Set Identity_Insert [dbo].[Parent] off
GO

Set Identity_Insert [dbo].[Child] on
insert into [dbo].[Child]
(Id, ParentId, Age, Name)
values(1,1,3,'TheYoungOne')

insert into [dbo].[Child]
(Id, ParentId, Age, Name)
values(2,1,4,'TheMiddleOne')

insert into [dbo].[Child]
(Id, ParentId, Age, Name)
values(3,1,7,'TheFirstOne')
Set Identity_Insert [dbo].[Child] off 
```

sql 探查器的输出是：

```
exec sp_executesql N'
    select parent0_.Id as Id3_0_, children1_.Id as Id2_1_, parent0_.Name as Name3_0_, children1_.Age as Age2_1_, children1_.Name as Name2_1_, children1_.ParentId as ParentId2_1_, children1_.ParentId as ParentId0__, children1_.Id as Id0__ 
    from [Parent] parent0_ left outer join [Child] children1_ on parent0_.Id=children1_.ParentId where parent0_.Id=@p0;
    select parent0_.Id as Id3_, parent0_.Name as Name3_ from [Parent] parent0_ where parent0_.Id=@p1;
',N'@p0 bigint,@p1 bigint',@p0=1,@p1=1 
```

有没有人有什么建议？

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:27:18.977

只需将代码缩短为

```
public Parent GetParentWithChildrenInitialised(int id)
{
    using (var session = SessionFactory.OpenSession())
    {
        return session.Query<Parent>()
           .Where(p => p.Id == id)
           .FetchMany(x => x.Children)
           .SingleOrDefault();
    }
} 
```

我个人会摆脱存储库，因为它添加了不必要的抽象并且更难调整性能，ISession 已经像一个存储库。

更好的选择是使用`session.Get(parentId);`，因为如果需要子级，这将使用 lvl1/session 缓存或上面的查询。

也使用 sessionfactory 创建会话，因为它是线程安全的，会话不是。

# android - 如何在 Chrome 中制作溢出菜单？

> ID：13259995
> 
> 赞同：5
> 
> 时间：2012-11-06T21:50:28.450
> 
> 标签：android, android-menu

我想制作一个类似于 android 中的 chrome 应用程序的溢出菜单，其中包含前进、后退和书签按钮。这是 chrome 应用程序中的[溢出菜单](https://i.stack.imgur.com/Tenox.png)。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T23:07:57.213

您的溢出菜单项不能有自定义视图，因此 Chrome 不使用标准操作栏。奇怪的是，谷歌甚至不使用它自己的标准工具来推动其他人使用，但这就是它的方式。

如果您加载一个使用真正标准 ActionBar（例如，日历或消息）的应用程序，它会在层次结构中有一个称为[ActionBarContainer](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/com/android/internal/widget/ActionBarContainer.java#ActionBarContainer)的视图，您可以一直跟随它到溢出按钮，这是一个[ActionMenuPresenter$OverflowMenuButton](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/com/android/internal/view/menu/ActionMenuPresenter.java#ActionMenuPresenter.OverflowMenuButton)。

但是在 Hierarchy Viewer 中加载 Chrome，您会发现它们用于溢出按钮的只是一个 ImageButton。

显然，您可以制作自己的完整的 ActionBar 实现，或者向现有的 ActionBar 添加一个溢出按钮，并以某种方式确保真正的溢出按钮永远不会显示。您可能会发现 ActionBar 兼容性示例项目在制作假动作栏时很有用。无论哪种方式，如果您再次查看 Hierarchy Viewer，它们只是使用[PopupMenu](http://developer.android.com/reference/android/widget/PopupWindow.html)来显示真正的 ActionBar 应用程序和 Chrome 应用程序中的菜单。

希望这足以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T22:02:37.300

查看整个组件的Android [ActionBar 。](http://developer.android.com/guide/topics/ui/actionbar.html "动作栏")

对于唯一的布局，您可以对任何布局进行[充气并将其放置在您想要的任何位置......](http://developer.android.com/reference/android/view/LayoutInflater.html "布局充气机")

# asp.net - 为什么数组中的值保留在while循环中？(VB.NET)

> ID：13259999
> 
> 赞同：2
> 
> 时间：2012-11-06T21:50:57.740
> 
> 标签：asp.net, vb.net, parsing, file-io

如果我在 line 放置一个断点`currentrow = MyParser.ReadFields()` ， currentrow 仍然包含从文件中解析的上一行的值。执行后`currentrow = MyParser.ReadFields()` ，存储当前文件行值。

由于 currentrow 是在 While 循环内声明的，所以在重新进入 While 循环时，之前的 currentrow 值是否应该超出范围？为什么 currentrow 仍然保留文件最后一行的值？

我需要更改`Dim currentrow As String()` 为`Dim currentRow() = New String() {}`吗？为什么？

```
If File.Exists(filename) Then
        Using MyParser As New FileIO.TextFieldParser(filename)
            MyParser.TextFieldType = FileIO.FieldType.Delimited
            MyParser.SetDelimiters("~")
            While Not MyParser.EndOfData
                Try
                    Dim currentrow As String()
                    'at this point, currentrow still contains prev values
                    currentrow = MyParser.ReadFields()
                Catch 
                End Try
            End While
        End Using
End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:52:10.860

因为您只声明了循环变量，因此`Nothing`每次迭代都会产生正确的值：

```
Dim currentrow As String() = Nothing 
```

甚至更好

```
Dim currentrow As String() = MyParser.ReadFields() 
```

没有显式初始化的“Dim”本身将被优化为冗余。

即使您分配`Nothing`，它也将始终`Nothing`在每次迭代时重置为。如果您只声明变量，它将始终包含“错误”的旧值，即使您将使用`Console.Write`或`MessageBox.Show`之后使用。

所以总是在循环变量中分配一个默认值以避免副作用。

**旁注C# 通过**[编译器警告 CS0165](http://msdn.microsoft.com/en-us/library/4y7h161d%28v=vs.80%29.aspx) : *Use of unassigned local variable 'variablename'*避免了这个错误源。

因此，如果您在分配之前尝试使用该未分配的变量，您甚至无法使用 C# 进行编译。我不知道为什么 VB.NET 允许它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T09:29:44.793

请记住，VB 中的所有变量都具有声明它们的块的范围，但是整个例程 (*) 的生命周期（有效地从声明它们的位置到例程结束），并且它们总是被初始化为`Nothing`，无论这对实际类型意味着什么。

```
Dim outer As Integer
For i = 1 To 2
 Dim inner As Integer
 Try
  Dim inner2 As Integer
  Do
   Dim inner3 As Integer
   While True
    Dim inner4 As Integer
    Console.WriteLine(outer & ", " & inner & ", " & inner2 & ", " & inner3 & ", " & inner4)
    outer = i
    inner = i
    inner2 = i
    inner3 = i
    inner4 = i
    Exit While
   End While
  Loop Until True
 Catch
 End Try
Next 
```

上述输出：

```
0, 0, 0, 0, 0
1, 1, 1, 1, 1 
```

(*)匿名例程/闭包会影响这一点。请参阅我的[单独问题](https://stackoverflow.com/q/13266748/256431)。