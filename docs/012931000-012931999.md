# StackOverflow 问答 12931000-12931999

# c# - 按降序排列 linq 查询

> ID：12931007
> 
> 赞同：1
> 
> 时间：2012-10-17T09:19:02.920
> 
> 标签：c#, .net, linq

我无法弄清楚如何通过`LatLong`（使用最新条目）来区分以下查询：

```
var query = from ent in db.Entrants
            select new { 
                  ent.idx, 
                  ent.LatLong, 
                  ent.Tip, 
                  ent.FirstName, 
                  ent.City, 
                  ent.Fragrance }; 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:29:04.520

这应该这样做：

```
var query = from ent in db.Entrants
            //get the most recent entry first
            orderby ent.idx descending
            //group the entries by LatLong so we can get a distinct entry for each latlong
            group ent by ent.LatLong into grouped
            //get the most recent one
            let ent = grouped.First()
            select new 
            { 
                ent.idx, 
                ent.LatLong, 
                ent.Tip, 
                ent.FirstName, 
                ent.City, 
                ent.Fragrance 
            }; 
```

我不确定您要按哪一列排序以获得最新条目，所以我按 idx 降序排序，但您可以将其更改为您喜欢的任何列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:23:41.427

添加这个：

```
var distinct = query.DistinctBy(x => x.LatLong); // requires MoreLinq 
```

或者

```
var sorted = query.OrderBy(x => x.LatLong); 
```

或将它们组合起来：

```
var result = query.DistinctBy(x => x.LatLong).OrderBy(x => x.LatLong); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:32:25.463

听起来你需要使用分组

```
from ent in db.Entrants
     group ent by ent.LatLong into grp
     let b = grp.OrderByDescending(x=>x.idx).First();
      select new { 
                  b.idx, 
                  b.LatLong, 
                  b.Tip, 
                  b.FirstName, 
                  b.City, 
                  b.Fragrance 
                }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T09:26:30.400

尝试

```
var retVal = query.OrderByDescending(x => x.LatLong).Distinct(x => x.LatLong); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T09:28:56.050

你的问题是匿名类型。

> 因为匿名类型的 Equals 和 GetHashCode 方法是根据属性的 Equals 和 GetHashcode 方法定义的，所以相同匿名类型的两个实例只有在它们的所有属性都相等时才相等。 [MSDN](http://msdn.microsoft.com/en-us/library/bb397696.aspx)

`Equals`为此使用适当的方法定义适当的类型，因为它`Distinct`调用`Equals`嵌套类型的标准。

我从未见过收到 lambda 的 distinct 重载。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T09:29:59.447

这条线

```
var groups = db.Entrants.GroupBy(ent => ent.LatLong); 
```

会给你一个组的枚举，每个*组*都包含给定的所有条目`LatLong`。现在，我不知道您如何判断哪个条目是*最新的*，但如果您知道它们即将*结束*，`db.Entrants`那么您可以使用

```
var mostRecentPerLatLong = groups.Select(g => g.Last()); 
```

或者如果你知道他们在一*开始*你可以使用

```
var mostRecentPerLatLong = groups.Select(g => g.First()); 
```

或者也许它已经过去了，`idx`所以你可以使用

```
var mostRecentPerLatLong =
    groups.Select(g => g.OrderByDescending(e => e.idx).First()); 
```

然后你可以创建你的对象：

```
var query = mostRecentPerLatLong.Select(ent => new { ... } ); 
```

# java - 在java中，基类中的公共属性在派生类中是不可见的吗？

> ID：12931011
> 
> 赞同：-1
> 
> 时间：2012-10-17T09:19:20.640
> 
> 标签：java, maven

```
class base {
    public <type> a;

}

class derived extends base {
     ...
     public void dMethod() {
         a.method();
     }
     ...
} 
```

片段来自我项目中使用的包 AI。 `derived`应该看到`a`in base ，所以它可以使用它。

但是当我运行`mvn clean install`打包我的项目时，它抱怨它在派生类中找不到符号 a（我已经添加了包 A 依赖项）。

它出什么问题了？

**编辑：**

我在我的项目中使用该代码，如下所示：

```
class my {
    derived d = new derived();
    d.a.method();
     ...
} 
```

它在eclipse中工作正常，但是当我打包它时，它会抱怨。并且`method()`确实有`public`修饰符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:36:00.013

**公共属性或方法随处可见**。

由于`a`是公共的，您可以从派生类（或代码中的任何其他类）访问它。

但是，即使`a`是公开的，也不会公开其方法。在您的情况下，如果您在调用 时遇到问题`a.method()`，那是因为`method`在您的上下文中不可见（它可能是私有的、受保护的或具有包可见性）。

解决方案是检查该方法`a.method()`，如果可以的话，可以将其更改为公开。或者，该对象`a`的使用方式可能有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:26:46.847

method() 应该有一个公共的（或者在这种情况下受保护的也可以）标识符......在“a”上的标识符上拥有公共并不会使它的所有字段和方法都公开。

# .htaccess - 如何在网站中隐藏文件扩展名？

> ID：12931012
> 
> 赞同：1
> 
> 时间：2012-10-17T09:19:20.217
> 
> 标签：.htaccess, url-rewriting, file-extension

我想在我的网站上隐藏文件扩展名。
这是我的内容`.htaccess`：

```
# Do not remove this line, otherwise mod_rewrite rules will stop working
RewriteBase /

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^([^/]+)/$ $1.html 
```

例如：

`http://example.com/website2`将映射到`http://example.com/website2.html`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:21:57.747

将 website2 设为一个文件夹并将名为 index.html 的 html 放入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:50:46.637

在您的示例中，`http://example.com/website2`不会映射到任何内容，因为没有尾部斜杠。您的规则的正则表达式是`^([^/]+)/$`, 需要一个斜杠。

因此，您需要将**所有链接**从更改`http://example.com/website2.html`为`http://example.com/website2/`。

为了重定向您无法控制的链接，您可以添加以下规则：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD|POST)\ /(.*)\.html
RewriteRule ^ /%1/ [L,R=301] 
```

# python - WSGIPythonPath 不工作

> ID：12931013
> 
> 赞同：9
> 
> 时间：2012-10-17T09:19:23.350
> 
> 标签：python, apache2, mod-wsgi, pythonpath

我正在使用 mod_wsgi 在 Apache2 上部署我的 web.py 应用程序。

这是我的 virt_host 文件，

```
WSGIPythonPath /home/ubuntu/plotwatt/libplotwatt:/home/ubuntu/plotwatt/pwstage/src

<VirtualHost *:20108>
ServerAdmin gslabrails.dev.plotwatt.com

DocumentRoot /var/www
WSGIScriptAlias / /var/www/currentcost/server.py
WSGIDaemonProcess currentcost user=ubuntu group=ubuntu processes=5 threads=3
WSGIProcessGroup currentcost
WSGIApplicationGroup %{GLOBAL}
AddType text/html .py

<Directory /var/www/currentcost/>
    Order deny,allow
    Allow from all
</Directory>

ErrorLog /var/log/apache2/currentcost_error.log
# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel warn

CustomLog /var/log/apache2/currentcost_access.log combined

</VirtualHost> 
```

我在 WSGIPythonPath 中给出了名为 redisStage 的库的路径。但是，它似乎对我不起作用。我做了任何错误的配置吗？我不能将 WSGIPythonPath 指令放在 VitualHost 指令中。一定是什么原因？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-17T09:56:13.967

根据[文档](https://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIPythonPath)`WSGIPythonPath`，使用守护程序模式时不能使用。[改为使用WSGIDaemonProcess 指令](https://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIDaemonProcess)的“python-path”选项。

# c++ - Qt QGraphicsView 事件

> ID：12931016
> 
> 赞同：0
> 
> 时间：2012-10-17T09:19:40.807
> 
> 标签：c++, qt, events, qt-events

我有一个`View`包含我的类，`QGraphicsView`但我无法从它继承。我的代码如下：

```
class View: public QGraphicsView {//inherits qwidget -- so we can make it full screen there

    Q_OBJECT

    public:
        View(QGraphicsScene * _scene);//this is responsible for setting up the screen and instantiating several elements
        ~View();
    protected:
        virtual void paintEvent(QPaintEvent * event) = 0; 
```

并`Game`继承自`View`：

```
#include "view.h" //this includes all of the functionality of the different elements

using namespace std;

class Game : public View {//inherit everything above and down into private functions

    public:
        Game(QGraphicsScene * _scene);
        ~Game();

    protected:
        void paintEvent(QPaintEvent * event);

}; 
```

我已经`paintEvent`快速实现`cout`了`game`. 当我编译时，一切都编译好了，但是当我运行时，我不断收到一条消息，说调用了一个纯虚函数：

```
libc++abi.dylib: pure virtual method called
Abort trap: 6 
```

我的`View`构造函数如下所示：

```
View::View(QGraphicsScene * _scene) : QGraphicsView(_scene) {... 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:57:41.597

我得到了`paintEvent`编译和打开我的应用程序的功能。但是由于某种原因，每当我尝试在我的场景上绘图时，它都不起作用。

但是，如果我取出该`paintEvent`功能，它就可以正常工作。关于为什么会中断的任何建议`paintEvent`？

在我的主文件中：

```
QGraphicsEllipseItem * item = new QGraphicsEllipseItem(0, scene);

    item->setRect(50.0, 50.0, 100.0, 100.0);

    view->setRenderHints(QPainter::Antialiasing);

    view->show(); 
```

如果我摆脱了虚拟`paintEvent`功能，这会起作用，但包括它会破坏圆圈的绘制？

# unit-testing - Grails：从模拟服务返回模拟对象

> ID：12931018
> 
> 赞同：2
> 
> 时间：2012-10-17T09:19:46.457
> 
> 标签：unit-testing, grails, mocking

我在尝试在 Grails (1.3.6) 中对服务进行单元测试时遇到问题。

该服务有一个用于创建对象的另一个服务的实例。我正在尝试模拟创建者服务以及它返回的对象。

在测试类中：

```
mockMyService = new MyService() // service under test

// Fake Asset object to 'create'
asset = mockFor(Asset)
asset.createMock()

// Mock the CreatorService and return the mocked asset
mockCreatorService = mockFor(CreatorService)
mockCreatorService.demand.generateAsset(){Section s, Date d, User u, AssetStatus a, String name -> return asset}

mockMyService = new MyService()
mockMyService.assetService = mockCreatorService.createMock() 
```

通过调试和检查，我相当确定模拟对象创建正常并且服务被正确模拟并伪造了 generateAsset 调用。

在 MyService 中，对另一个（创建者）服务的调用是：

```
Asset asset = creatorService.generateAsset(section, date, author, status, assetName) 
```

我收到此错误：

无法将具有类“grails.test.GrailsMock”的对象“grails.test.GrailsMock@56c88357”转换为类“com.xxxxxx.Asset”

我认为这是由于 MyService 在调用 generateAsset 时分配了模拟资产。

任何人都可以阐明这一点吗？如果原因是由于分配，有没有办法解决它？或者我是错误地接近这个还是我错过了一些明显的东西。

它是 grails 1.3.6（到 Grails 2 的移植暂时不会完成，所以暂时使用这个版本）。

谢谢。

更新：

好的，所以我通过声明模拟对象来解决强制转换异常，例如：

```
def testAssets = [
 new Asset(id:123, name:......)]
mockDomain(Asset, testAssets) 
```

但现在看来我必须为测试资产声明*所有*非空属性。这似乎不对。对于测试，我根本不关心资产，除了它的 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:35:11.187

您的模拟`generateAsset()`方法需要返回`asset`的不是（`mockFor(Asset)`），而是您从调用其返回的值`createMock()`：

```
// Fake Asset object to 'create'
mockAsset = mockFor(Asset)
def asset = mockAsset.createMock()

// Mock the CreatorService and return the mocked asset
mockCreatorService = mockFor(CreatorService)
mockCreatorService.demand.generateAsset(){Section s, Date d, User u, AssetStatus a, String name -> return asset} 
```

# android - 视频播放器在果冻豆设备上不起作用：android.content.ActivityNotFoundException

> ID：12931019
> 
> 赞同：2
> 
> 时间：2012-10-17T09:19:51.920
> 
> 标签：android, video, android-4.2-jelly-bean

我最近尝试在`JellyBean`设备上运行我的应用程序，并惊讶地发现视频播放器无法正常工作并引发错误：

```
??-?? ??:??:??.???: INFO/<unknown>(<unknown>): FATAL EXCEPTION: main
??-?? ??:??:??.???: INFO/<unknown>(<unknown>): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=/storage/sdcard0/Android/data/com.packagename.pkg/files/Movies/505c5bea-af51-4100-b95a-e2e87e6126c4.mp4 typ=video/* } 
```

同样适用于设备 2.2 到 4.0

相关代码是

```
Intent intent = new Intent(Intent.ACTION_VIEW);
                    intent.setDataAndType(
                            Uri.parse(type,path), "video/*");
                    startActivity(intent); 
```

有人可以指出我做错了什么。

# android - Android2.x：MediaPlayer 错误代码 (1,-19)

> ID：12931021
> 
> 赞同：13
> 
> 时间：2012-10-17T09:19:54.287
> 
> 标签：android, media-player

我编写了一个简单的应用程序，它使用 MediaPlayer 播放视频。视频为 3gp 文件格式。该应用程序在 Android 4.x 上运行，但在 Android 2.x 上报告错误 (1, -19)。我只有一个 MediaPlayer 实例，当调用 MediaPlayer.start() 方法时，MediaPlayer 会报告该错误。视频流为MPEG-4，手机默认播放器即可播放。

谁能告诉我解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T15:15:11.567

Android 媒体播放器有其自身的复杂性。我个人不喜欢 MediaPlayer Api。最好使用 ExoPlayer。您可以根据您的要求进行定制。如果您的时间不多了，请使用一些像[这样的开源项目](https://github.com/master255/TextureVideoPlayer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T10:09:58.610

我添加了 surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS) 并解决了问题。我不知道为什么该类型没有按预期自动设置。

# ruby-on-rails - 将二维数组复制到 Ruby 中的另一个数组

> ID：12931025
> 
> 赞同：0
> 
> 时间：2012-10-17T09:20:01.213
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3, multidimensional-array

我在 Ruby 中有这样的声明：

```
@mastertest = connection.execute("select code_ver from mastertest") 
```

所以现在我想复制这个二维数组，因为如果我做类似`@temp = @mastertest`的事情，`@mastertest`当我对`@temp`.

我尝试使用以下内容：

```
@temp = Marshal.load(Marshal.dump(@mastertest)) 
```

但这给了我一个错误的说法`"no marshal_dump is defined for class Mysql2::Result"`。所以我假设它`@mastertest`是二维数组以外的其他类型。

有人可以帮我如何制作这个数组的副本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:42:30.683

这里有两种工作方式：（复制或克隆不是完全深度复制，只有 Marshal 可以）。

1.  使用 Object#dup 或克隆。试试`@temp = @mastertest.dup`。我不知道 Mysql2::Result 的格式，所以当它像一个“二维数组”时，这种方式可能会失败，你必须复制 Enumerable-mixed 类中的每个元素。该`dup`方法只调用`initialize_copy`该类。如果在类似数组的对象中没有任何 POD(plain-old-data)，它只会为它制作一个浅拷贝。

2.  `Mysql2::Result`用两种方法编写你的猴子补丁：`marshal_dump`和`marshal_load`. 这将使它对`Marshal.dump`. [在此处查看有关 Marshal](http://www.ruby-doc.org/core-1.9.3/Marshal.html)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:50:49.917

尝试

```
@temp = @mastertest.clone 
```

现在对@temp 的更改不会影响@mastertest

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T18:16:04.690

我设法通过使用以下方法解决了这个问题：

```
@new_array = Array.new
@mastertest.each { |r| @new_array.push(r[0]) } 
```

# jquery - 当我选择一个文件时，Jquery 拦截了取消点击

> ID：12931032
> 
> 赞同：0
> 
> 时间：2012-10-17T09:20:32.333
> 
> 标签：jquery, events, upload, submit

就我而言，当我单击选择文件输入时，我将变量设置为 1。

选择文件后，此变量将保持为 1。

如果它取消，关闭窗口而不选择要上传的文件我想将此变量返回到 0 可能吗？

tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:40:38.307

如果我理解你是正确的，我会走另一条路。如果单击文件选择器，则将变量设置为 0，并且仅当文件输入的值发生更改时才将变量设置为 1。

html

```
<input type="file" id="file"/> 
```

JS

```
var x = 0;
$('#file').click(function() {
    x = 0;
});
$('#file').change(function() {
    x = 1;
}); 
```

有关演示，请参见[http://jsfiddle.net/JWRgY/ 。](http://jsfiddle.net/JWRgY/)

# iphone - 如何使用 cgcontext 参考动态地将 100 X 100 图像制作成 1000X 1000

> ID：12931033
> 
> 赞同：2
> 
> 时间：2012-10-17T09:20:44.650
> 
> 标签：iphone, objective-c, uiimageview

我想将我正在使用的小图像（100 * 100）制作成大图像（1000 * 1000），但这是最糟糕的做法。

在这里，我在视图中添加了它，但我想在上下文中绘制它并保存它..

```
for(int j=0;j<5;j++)
      {
          for(int i=0;i<5;i++)
           {
         UIImageView* imgView = [[UIImageView alloc] initWithImage:  [UIImageimageNamed:@"images.jpeg"]];
          [imgView drawRect:CGRectMake(xCoord,yCoord,imgView.frame.size.width, imgView.frame.size.height)]; 
         yCoord =imgView.frame.size.height*j;

         [self.view addSubview:imgView];
          xCoord += imgView.frame.size.width;

          }
           yCoord=0;
           xCoord = 0.0;
       } 
```

我想使用上下文 draw rect 来做到这一点。 `CGContextDrawImage`如何处理这个请帮助。在此先感谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:35:34.550

如果您希望将其绘制在 Context 上，请使用`[image drawAsPatternInRect:rect]`

编辑：

此方法将生成给定大小的新图像。重复绘制图像，直到填充整个上下文。

```
UIImage * TiledImage(UIImage *tile, CGSize size) {
    UIGraphicsBeginImageContext(size);
    [tile drawAsPatternInRect:CGRectMake(0,0, size.width, size.height)];
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;
} 
```

在你的情况下，只需写：`UIImage *bigImage = TiledImage([UIImageimageNamed:@"images.jpeg"], CGSizeMake(1000,1000));`现在你有你的 1000x1000 像素图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:30:45.877

这看起来就像您将获得 1000x1000`UIView`并将其`backgroundColor`属性设置为

```
[UIColor colorWithPatternImage:@"images.jpeg"]; 
```

如果你想在上下文中绘制：

```
CGContextRef context = UIGraphicsBeginImageContext(imageSize);
[patternImage drawAsPatternInRect:imageRect];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:31:01.913

您可以通过这种方式将背景图案应用于任何视图：

```
UIImage *pattern = [UIImage imageNamed:@"yourimage-pattern.png"];
yourView.backgroundColor = [UIColor colorWithPatternImage:pattern]; 
```

我认为这比您目前使用的方法更容易。

编辑：

您仍然可以在上下文中呈现您的视图并截取它，如果这是您想要的：

```
UIGraphicsBeginImageContext(CGSizeMake(1000,1000)));
[yourView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

确保您正在使用`QuartzCore lib`并引用了头文件：`#import <QuartzCore/QuartzCore.h>`对于此代码片段。

# php - 通过 jQuery Ajax 函数发送 localStorage 变量而不在 url 中

> ID：12931039
> 
> 赞同：0
> 
> 时间：2012-10-17T09:20:56.057
> 
> 标签：php, jquery, html, ajax, local-storage

再会，

我只想知道是否有一种方法可以通过 Ajax 函数发送 localStorage 变量，而不是在 url 中。例如：

```
$.ajax({
    type: "POST",
    url: "../pages/profile.php",
    data: localStorage.email,
    dataType: 'json'
    success: function(result)
    {     
        //document.location.replace('../pages/main.php');
    },
    error: function()
    {
        alert('An Error has occured, please try again.');
    }
}); 
```

在这种情况下，php 的返回类型将是 JSON，根据需要。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:33:54.520

改变

```
data: localStorage.email, 
```

至

```
data: {email: localStorage.getItem('email')} 
```

以便采用`data`正确的 JSON 格式，并使用（我相信）正确的方法从`localStorage`.

# powershell - 如何将哈希表传递给 PowerShell 中的函数？

> ID：12931043
> 
> 赞同：36
> 
> 时间：2012-10-17T09:21:04.927
> 
> 标签：powershell, hashtable

将哈希表传递给我的 PowerShell 函数时，它抱怨它收到了一个对象。

```
Function ExtendHash(){
  param(
    [hashtable] $source,
    [hashtable] $extender
  )
  ...
} 
```

和来电者：

```
$hash1 = @{One = 1; Two = 2}
$hash2 = @{Two = 22; three = 3}
ExtendHash($hash1, $hash2) 
```

> 无法将 System.Object[] 类型的 System.Object[] 值转换为 System.Collection.Hashtable 类型

那么我该如何进行这项工作呢？建议？

另外，我是否缺少内置的东西？我想要与 JavaScript 用于扩展默认选项（合并和覆盖默认值）的相同模式。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-17T09:36:06.000

不要使用括号和逗号。这是 PowerShell（例如，参数类似于 CMD 中命令的参数）。也就是说，像这样调用你的函数：

```
ExtendHash $hash1 $hash2 
```

* * *

在您的情况下，表达式`($hash1,$hash2)`是一个包含两项的数组，您将此数组（一个参数）传递给函数。这样的调用正确地失败了。

* * *

如果您使用`Set-StrictMode -Version 2`，那么这个“常见”错误会被 PowerShell 捕获：

> 函数或命令被当作方法调用。参数应该用空格分隔。有关参数的信息，请参阅 about_Parameters 帮助主题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-08-22T07:09:44.150

[（在Roman 的回答](https://stackoverflow.com/a/12931344/1915920)旁边:)
调用者不需要将哈希表存储在变量中，然后也可以使用它：

```
ExtendHash  -source @{One = 1; Two = 2}  -extender @{Two = 22; three = 3} 
```

（`-source`并且`-extender`是必要的，因此哈希表本身不会被解释为 arg-value-pairs for `ExtendHash`）

# blackberry-eclipse-plugin - 从目录中获取图像的名称并将多个 MenuItem 添加到相机和 DPI 公式

> ID：12931045
> 
> 赞同：0
> 
> 时间：2012-10-17T09:21:12.633
> 
> 标签：blackberry-eclipse-plugin

1.  我目前能够获取文件的目录，有没有办法从目录中获取文件的名称？

2.  我想在我的应用程序中添加可聚焦的图像，并希望图像适合所有黑莓屏幕的特定部分，我听说过 DPI 公式，如果我的公式有误，请纠正我：

    `long h=Display.getHorizontalResolution();`
    `long v=Display.getVerticalResolution();`

    `long hv= h*v;//PPM`

    `double hvi=hv* 39.3700787 ;`

`long h`和, 给出相同的`long v`值，这个公式的答案是 3.710443460782276E9

1.  还有一件事，我已经成功地弄清楚如何将一个 MenuItem 添加到黑莓应用程序（即相机），但我不太确定如何添加多个。如果您有任何建议，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:41:13.603

```
double inchesInAMeter = 39.3700787; 
    double hvi= ((double) Display.getHorizontalResolution()) / inchesInAMeter;

    int widthdp = 100;

    int pixels = (int) (widthdp * (hvi / 160));

    LabelField LF = new LabelField(""+hvi);
    add(LF);
}

public static int convertDpToPx(int dp) {
    double inchesInAMeter = 39.3700787; 
    double hvi= ((double) Display.getHorizontalResolution()) / inchesInAMeter;
    int pixels = (int) (dp * (hvi / 160));
    return pixels;
} 
```

# delphi - 将工具提示与 Windows 应用程序中的 CHM 帮助集成

> ID：12931050
> 
> 赞同：2
> 
> 时间：2012-10-17T09:21:28.033
> 
> 标签：delphi, tooltip, chm

我们正在尝试重新设计 Windows 桌面应用程序的文档流程，我们有两个要求是

*   以 CHM 格式提供“参考”帮助
*   提供有关各个控件的工具提示帮助

目前我们的工具提示被硬编码到 Delphi/C++Builder 表单中，但我希望避免重复，并将 CHM 文件作为“主”文件

当用户将鼠标放在某些控件上时，我们如何将 CHM 文件中的帮助信息显示为工具提示？

# google-app-engine - 每个实体类型的内存缓存与静态映射

> ID：12931052
> 
> 赞同：0
> 
> 时间：2012-10-17T09:21:32.337
> 
> 标签：google-app-engine, memcached

> **可能重复：**
> [Google App Engine：Memcache 或静态变量？](https://stackoverflow.com/questions/1095123/google-app-engine-memcache-or-static-variable)

memcache 和每个类（实体类型）静态映射（除了可识别的值、未触及的检查、统计信息和命名空间）之间有什么区别吗？！

静态存储也有1MB的限制？这1MB是否与memcache共享？

在某种程度上，静态映射看起来很有利，例如 - 它允许我们定义和使用特定类型的 HashMap - 静态 map.put 不会失败，而 memcache.put 是不可靠的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:32:39.127

（以下假设您询问的是 memcache 和数据存储之间的权衡，而不是运行时实例中的 memcache 和静态变量；后者在[Thilo 的链接](https://stackoverflow.com/questions/1095123/google-app-engine-memcache-or-static-variable)中得到解决。）

使用 memcache 服务的原因是，平均而言，它比数据存储快得多。例如，考虑昨天的[datastore](http://code.google.com/status/appengine/detail/hr-datastore/2012/10/16#ae-trust-detail-hr-datastore-get-latency)和[memcache](http://code.google.com/status/appengine/detail/memcache/2012/10/16#ae-trust-detail-memcache-get-latency)的统计信息。对于数据存储，获取操作平均约 32 毫秒，放置约 35 毫秒，删除 60 毫秒。对于 memcache，大约是 8ms、17ms 和 10ms。（此外，这些统计数据基于对 memcache 大约 5 倍大的测试操作）。如果延迟或实例小时数对您的应用程序很重要，那么 memcache 可能非常有用。

也就是说，memcache 并不可靠。您应该始终假设写入 memcache 的数据可能随时消失，并且出于您无法控制的原因。而有效地保证数据存储操作是永久性的。

简而言之：如果正确性对您的需求非常重要，则使用数据存储，如果速度至关重要，则使用内存缓存。更好的是，两者都用！

# ruby-on-rails - 是否可以使用十六进制或 rgb 颜色设置行样式或在电子表格 gem 中使用偶数/奇数属性？

> ID：12931055
> 
> 赞同：2
> 
> 时间：2012-10-17T09:21:38.230
> 
> 标签：ruby-on-rails, gem, spreadsheet

我想使用电子表格 gem 来设置我的 Excel 表格的样式。

我想让我的桌子在我的视图中看起来像这样：

![](../Images/7cac81d1354ba6d0a929898e630cad6c.png)

这是我的格式化代码：

```
 header_format = Spreadsheet::Format.new :color => :black,
                               :weight => :bold,
                               :size => 10 
```

**文档：** [http ://spreadsheet.rubyforge.org/files/GUIDE_txt.html](http://spreadsheet.rubyforge.org/files/GUIDE_txt.html)

我可以使用电子表格 gem**还是**只需要使用标准颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:39:24.753

找到这篇文章 - [http://andisxp.blogspot.com/2011/12/export-to-excel-with-spreadsheet-gem.html](http://andisxp.blogspot.com/2011/12/export-to-excel-with-spreadsheet-gem.html)

```
 Instead of modifying the gem though, I would suggest using the following two 
  lines at   startup, they modify constants which isn't very nice but maybe 
  preferable to modifying the gem just to get some color working.

  Spreadsheet::Excel::Internals::SEDOC_ROLOC.update(:blue_gray => 0x001f)
  Spreadsheet::Column.singleton_class::COLORS << :blue_gray 
```

# jquery - Jquery NiceScroll 在 Internet Explorer 9 中不起作用

> ID：12931056
> 
> 赞同：1
> 
> 时间：2012-10-17T09:21:41.267
> 
> 标签：jquery, jquery-plugins, internet-explorer-9, scrollbar, nicescroll

我正在使用 nicescroll 在一个花式框中滚动。它在 chrome 和 firefox 中完美运行。但即使在 ie9 中也无法正常工作。但是插件说它支持ie6+，而且它也是常用的插件。

```
 jQuery(function($) {

        $(document).ready(function()
        {

          $(".popcontent").niceScroll({cursorwidth:"8", autohidemode: "false" });

        });

     }); 
```

# django - 如何使用 syncdb 获取 oracle NUMBER

> ID：12931061
> 
> 赞同：0
> 
> 时间：2012-10-17T09:21:59.780
> 
> 标签：django, oracle, orm, django-models, django-database

我有一些遗留的 oracle 数据库，我对其运行 inspectdb 命令。数据库中的一列具有 NUMBER 类型（没有精度和比例），我从 django 得到的是：

```
entity_id = models.DecimalField(unique=True, null=True, max_digits=0, decimal_places=-127, blank=True) 
```

如果我现在运行 syndb 尝试从模型生成模式，我将收到错误消息：

```
Error: One or more models did not validate:
DecimalFields require a "decimal_places" attribute that is a non-negative integer.
DecimalFields require a "max_digits" attribute that is a positive integer. 
```

我的问题是：我应该如何修改模型中的 entity_id 类型以在 oracle 中生成 NUMBER？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:01:51.213

我想我找到了答案。看起来 django 实际上非常聪明，并且故意产生这种有线值。目标是防止在没有开发人员查看的情况下从此模式创建模型。这是有道理的，因为通常使用没有比例和精度的 NUMBER 类型会使 django 不知道该字段实际上应该是什么。NUMBER 是最通用的数字类型，可以拟合布尔值、带符号和不带符号的整数以及应该是浮点数的数字。这就是为什么这里需要开发人员做出明智的决定的原因。

# object - 我应该怎样称呼在 jQuery 函数之间传递的集合对象？

> ID：12931064
> 
> 赞同：0
> 
> 时间：2012-10-17T09:22:09.020
> 
> 标签：object, collections, terminology, jquery

jQuery 传递的对象是否有一个普遍接受的名称？

jQuery 主要处理可链接的函数调用，这些函数调用接受和返回相同类型的对象，这些对象是一种集合对象，包含可能连接或不连接的任意位 HTML 或 DOM 节点。

*   它们由“选择器”返回`$('#target')`
*   它们也是由各种调用创建或构造的，例如`$('<div>')`

这些对象几乎总是一个集合，有点像列表或数组，尽管通常一些调用似乎处理单个项目。

这些对象并不是真正的 JavaScript 数组，但正如`$.makeArray()`函数的存在所揭示的那样。

我最注意到的术语是“选择器”或“选择”，但将这个术语用于结果似乎并不正确，`$('<span>')`因为它只关注这些对象的一个​​方面，术语“包装器”也有类似的问题我也看到使用过。

这些对象是可链接的，因为它们中的每一个都实现了整个 jQuery 接口，但我不记得有人称它们为“jQuery 对象”，感觉不对。

所以有一些争论不称它们为“选择”或“数组”或“jQuery 对象”。“列表”或“集合”呢？**当我们需要给这些对象命名时，人们通常如何称呼它们？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:58:22.630

任何 jQuery 选择器都会返回一个 jQuery 对象——这是它们的通用名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:35:06.613

我的常见用途是我称它们为返回的内容，并`$`在 JQuery 对象的情况下定义为前缀。例如：

```
<div id="content" />

var $contentDiv = $('#content'); // jquery object which has the div with the id 'content'

var total = 1 + 1; // javascript object 
```

我的两分钱让事情变得清晰。

# javascript - 如何遍历每个组的 JSON

> ID：12931065
> 
> 赞同：1
> 
> 时间：2012-10-17T09:22:14.503
> 
> 标签：javascript, jquery

我对 JavaScript 很陌生，开始遇到 JSON 问题。

我有一个像这样的对象：

```
var users =  [
  { "firstName":"John" , "lastName":"Doe" },
  { "firstName":"Anna" , "lastName":"Smith" },
  { "firstName":"Peter" , "lastName":"Jones" }
] 
```

无论如何我可以做一个 jQuery`$.each`选择器来对每一对做一些事情而不知道有多少索引？

像这样：

```
$.each(obj.firstname) {
  // Do stuff for John then Anna then Peter
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T09:24:24.553

更像：

```
$.each(users, function(i, data)) {
   console.log(data.firstName);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:24:29.843

下面是基本用法：

```
$.each(users, function(i, user) {
    var firstName = user.firstName;
    var lastName = user.lastName;
    // ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:25:25.843

像这样

```
$.each(users,function(key,val){
 $.each(val, function(k, v){alert(k+" - "+v);});
});​ 
```

[小提琴](http://jsfiddle.net/pintu31/xDxHF/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T09:26:09.390

```
for(var key in users){
console.log(users[key].firstName)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T09:28:14.657

你可能想看看 underscore.js，尤其是[`pluck`](http://underscorejs.org/#pluck)方法：

```
_.each(_.pluck(users, 'firstName'), function (firstName) {
    // Do stuff
}) 
```

# html - 为什么 float:lefted 有点低？

> ID：12931072
> 
> 赞同：-2
> 
> 时间：2012-10-17T09:22:35.307
> 
> 标签：html, css

这是[我的代码](http://jsfiddle.net/24xqX/)。我无法解决为什么`id=right`有点低？我该如何解决？

我的CSS代码：

```
#container
{
    width:70%;
    margin:0 auto;
}

body
{
    text-align: center;
    background-color:#708090;
}

#left
{
    float:left;
}

#content
{

}

#right
{
    float:right;
} 
```

对 div 的值只有`float:right`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:23:29.887

把`<div id="right">`之前`<div id="left">`或之前`<div id="content">`，它工作正常：

[http://jsfiddle.net/24xqX/1/](http://jsfiddle.net/24xqX/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:25:47.107

您需要将浮动内容放在未浮动内容之前。所以基本上，`#left`并且`#right`需要`#content`在标记之前。顺序`#left`和顺序`#right`无关紧要。

此外，清除元素的浮动总是一个好主意（例如通过[伪 clearfix](http://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified/)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:28:12.730

尝试这个：

```
#left
{
    float:left;
}

#content
{
float:left;
}

#right
{
    float:left;
} 
```

# redirect - Symfony2 是否可以从其他地方（功能）重定向？

> ID：12931074
> 
> 赞同：0
> 
> 时间：2012-10-17T09:22:38.123
> 
> 标签：redirect, symfony, controller, response

原谅我的英语。

我想不是从动作端而是从其他功能重定向。

控制器

```
public function editAction(Request $request, $id)
{
    $em = $this->getDoctrine()->getEntityManager();
    $article = $em->getRepository('MySampleBundle:Article')->find($id);

    // TODO:
    // Since other actions have the same processing,
    // I would like to do check work in other function. 
    // And when inaccurate,
    // I want to make it move from that function to other page. 
    $this->is_edit_granted($article);

    $form = $this->createForm(new ArticleType(), $article);

    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);
        if ($form->isValid()) {
            // ...
        }
    }

    return $this->render('MySampleBundle:Article:edit.html.twig', array(
        'form' => $form->createView(),
        'article' => $article,
    ));
}

public function is_edit_granted($article)
{
    // TODO:
    // I check not at the action side but at this place,
    // and want to make it move from this function to other page. 

    if (!$article) {
        throw $this->createNotFoundException('No article found.');
    } else if ( $article->getAuthor() != $this->getUser()->getId() ) {
        return $this->redirect( // doesn't work here
            $this->generateUrl('home', array(
                "id" => $article->getId()
            ))
        );
    }
} 
```

我也尝试过类似的代码：

```
use Symfony\Component\HttpFoundation\RedirectResponse;

class SampleController extends Controller
{
    // ...

    public function editAction(Request $request, $id)
    {
        // ...

        $this->is_edit_granted($article);

        // ...
    }

    public function is_edit_granted($article)
    {
        if (!$article) {
            throw $this->createNotFoundException('No article found.');
        } else if ( $article->getAuthor() != $this->getUser()->getId() ) {
            return new RedirectResponse(
                $this->generateUrl('home', array(
                    "id" => $article->getId()
                ))
            );
        }
    }
} 
```

但它不起作用。

它在 Symfony 2.1.2 环境中执行。我怎样才能做到这一点？或者，有没有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:27:32.227

执行以下操作：

```
public function editAction(Request $request, $id)
{
    // ...

    $response = $this->is_edit_granted($article);
    if ($response) return $response;

    // ...
}

public function is_review_granted($article)
{
    if (!$article) {
        throw $this->createNotFoundException('No article found.');
    } else if ( $article->getAuthor() != $this->getUser()->getId() ) {
        return new RedirectResponse(
            $this->generateUrl('home', array(
                "id" => $article->getId()
            ))
        );
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:57:25.383

`is_review_granted`在不返回`RedirectResponse`表单的情况下无法从 重定向`editAction`。所以卡洛斯格拉纳多斯的答案是正确的。

另一种选择是在 is_review_granted 方法中抛出 AccessDeniedException ：

```
public function is_review_granted($article)
{
    if (!$article) {
        throw $this->createNotFoundException('No article found.');
    } else if ( $article->getAuthor() != $this->getUser()->getId() ) {
        throw new Symfony\Component\Security\Core\Exception\AccessDeniedException('no acces');
    }
} 
```

您还可以查看一些更深入的解决方案，例如[ACL](http://symfony.com/doc/2.0/cookbook/security/acl.html)和[SecurityVoters](http://kriswallsmith.net/post/15994931191/symfony2-security-voters)。

# java - JTable 中的单选按钮无法正常工作

> ID：12931076
> 
> 赞同：3
> 
> 时间：2012-10-17T09:22:41.390
> 
> 标签：java, swing, jtable, renderer, jradiobutton

我对以下代码有疑问。我的任务是，我必须在第一列中有单选按钮，当用户选择该单选按钮时，该行被选中并发送以进行处理。但我的问题是，我可以选择第一列中的单选按钮，`but afterwards when user clicks in any part of the table then my clicked radio button is being unchecked.`我无法弄清楚为什么会发生这种情况。我真的被这个问题困住了。需要帮助。以下代码显示了我的问题。

```
import java.awt.Component;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.util.ArrayList;
import java.util.List;

import javax.swing.ButtonGroup;
import javax.swing.DefaultCellEditor;
import javax.swing.JCheckBox;
import javax.swing.JDialog;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableCellRenderer;

public class DisplayTable extends JDialog {
public void initialize() {
    SourceTableModel stm = new SourceTableModel();
    JTable sourceTable = new JTable(stm);

    sourceTable.getColumnModel().getColumn(0).setCellRenderer(new RadioButtonRenderer());
    sourceTable.getColumnModel().getColumn(0).setCellEditor(new RadioButtonEditor(new JCheckBox ()));

    JPanel panel = new JPanel();
    panel.add(new JScrollPane(sourceTable));
    add(panel);

    setModal(true);
    pack();
    setVisible(true);
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            new DisplayTable().initialize();
        }
    });
}
}

class SourceTableModel extends AbstractTableModel{

private static final long serialVersionUID = 1L;

private List<SourceModel> sourceList = new ArrayList<SourceModel>(); 
private String[] columnNamesList = {"Select", "Group", "Work"};

public SourceTableModel() {
    this.sourceList = getSourceDOList();
}

public String getColumnName(int column) {
    return columnNamesList[column];
}

public int getRowCount() {
    return sourceList.size();
}

public int getColumnCount() {
    return columnNamesList.length;
}

public Class<?> getColumnClass(int columnIndex) {
    return (columnIndex == 0 ? Boolean.class : String.class);
}

public boolean isCellEditable(int rowIndex, int columnIndex) {
    return (columnIndex == 0 ? true : false);
}

public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
    SourceModel model = (SourceModel) sourceList.get(rowIndex);
    switch (columnIndex) {
    case 0: 
        model.setSelect((Boolean)aValue);
        break;
    case 1: 
        model.setFactory((String) aValue);
        break;
    case 2: 
        model.setSupplier((String) aValue);
        break;
    }
    fireTableCellUpdated(rowIndex, columnIndex);
}

public Object getValueAt(int rowIndex, int columnIndex) {
    SourceModel source = sourceList.get(rowIndex);
    switch(columnIndex){
    case 0:
        return source.isSelect();
    case 1:
        return source.getFactory();
    case 2:
        return source.getSupplier();
    default:
        return null;
    }
}

private List<SourceModel> getSourceDOList() {
    List<SourceModel> tempSourceList=new ArrayList<SourceModel>();
    for (int index = 0; index < 5; index++) {

        SourceModel source = new SourceModel();
        source.setSelect(false);
        source.setFactory("group");
        source.setSupplier("Work");

        tempSourceList.add(source);
    }
    return tempSourceList;
}
}

class SourceModel {

private boolean select;
private String factory;
private String supplier;

public SourceModel() {
    // No Code;
}

public SourceModel(boolean select, String factory, String supplier) {
    super();
    this.select = select;
    this.factory = factory;
    this.supplier = supplier;
}

public boolean isSelect() {
    return select;
}

public void setSelect(boolean select) {
    this.select = select;
}

public String getFactory() {
    return factory;
}

public void setFactory(String factory) {
    this.factory = factory;
}

public String getSupplier() {
    return supplier;
}

public void setSupplier(String supplier) {
    this.supplier = supplier;
}
}

class RadioButtonEditor extends DefaultCellEditor implements ItemListener {

public JRadioButton btn = new JRadioButton();

public RadioButtonEditor(JCheckBox checkBox) {
    super(checkBox);
}

public Component getTableCellEditorComponent(JTable table, Object 
value, boolean isSelected, int row, int column) {

if (value==null) 
          return null;
btn.addItemListener(this);
if (( (Boolean) value).booleanValue())
    btn.setSelected(true);
else
    btn.setSelected(false);

    return btn;
}

public Object getCellEditorValue() {
    if(btn.isSelected() == true)
        return new Boolean(true);
    else 
        return new Boolean(false);
}

public void itemStateChanged(ItemEvent e) {
    super.fireEditingStopped();
}
}

class RadioButtonRenderer implements TableCellRenderer {
  public JRadioButton btn = new JRadioButton();
  public Component getTableCellRendererComponent(JTable table, Object value,
      boolean isSelected, boolean hasFocus, int row, int column) {
      if (value==null) return null;

      if(((Boolean)value).booleanValue())
      btn.setSelected(true);
      else
      btn.setSelected(false);

      if (isSelected) {
      btn.setForeground(table.getSelectionForeground());
      btn.setBackground(table.getSelectionBackground());
      } else {
      btn.setForeground(table.getForeground());
      btn.setBackground(table.getBackground());
      } 
      return btn;

  }
} 
```

**编辑：** 我已经更新了我的代码，并且我在第一列中使用了布尔类。`The problem which I am facing is, if I remove super.fireEditingStopped(); from RadioButtonEditor class then I am able to check and then if I click at any part of the table then checked one I being unchecked.`如果我保留 super.fireEditingStopped(); 然后我什至无法检查单选按钮。

我知道 super.fireEditingStopped(); 将停止编辑。但我的问题是如何检查它？

**PS：**对不起，我已经发布了我的整个代码。我认为有些人会很容易看到这个问题。

这是该程序的屏幕截图。 ![在此处输入图像描述](../Images/f3fc2b9e18b0234e277f7e3d0d175496.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:25:02.990

从您的插图来看，您似乎希望在 a 的行之间强制互斥`JTable`，其中每行都有一个`JRadioButton`。由于 a`ButtonGroup`不合适，这个[例子](https://stackoverflow.com/a/11259671/230513)由于@Guillaume Polet 使用了自定义管理器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:30:30.920

> 我对以下代码有疑问。我的任务是，我必须在第一列中有单选按钮，当用户选择该单选按钮时，该行被选中并发送以进行处理。但是我的问题是，我可以选择第一列中的单选按钮，但是之后当用户单击表格的任何部分时，我单击的单选按钮将被取消选中。我不知道为什么会这样。我真的被这个问题困住了。需要帮助。以下代码显示了我的问题。

1.  不要使用`JRadioButton`，使用内置对布尔值的支持`JTable == JCheckBox`，

2.  那么你可以`sorting`并`filtering`基于`Boolean value`

3.  否则你必须覆盖到`String`( `"true"`/ `"false"`)

    * * *

4.  有一些好的`JRadioButtons`as`Renderer`和`Editor`in `JTable`，包括`JComboBox`as `Editor`for 的用法`RadioButtonGroup`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T12:23:06.567

如果您需要动态更改外观和感觉，建议您的 CellEditor 扩展 Component。

```
//@see javax/swing/SwingUtilities.java
static void updateRendererOrEditorUI(Object rendererOrEditor) {
    if (rendererOrEditor == null) {
        return;
    }
    Component component = null;
    if (rendererOrEditor instanceof Component) {
        component = (Component)rendererOrEditor;
    }
    if (rendererOrEditor instanceof DefaultCellEditor) {
        //Ahh, AbstractCellEditor ...
        component = ((DefaultCellEditor)rendererOrEditor).getComponent();
    }
    if (component != null) {
        SwingUtilities.updateComponentTreeUI(component);
    }
} 
```

这是一个“CellEditor 扩展 JRadioButton ...”示例：

```
import java.awt.*;
import java.awt.event.*;
import java.util.EventObject;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.table.*;

public class DisplayTable2 extends JDialog {
  public void initialize() {
    Object[][] data = {
      { true,  "Group1", "Work1" }, { false, "Group2", "Work2" },
      { false, "Group3", "Work3" }, { false, "Group4", "Work4" }
    };
    JTable sourceTable = new JTable(new SourceTableModel(data));
    sourceTable.getColumnModel().getColumn(0).setCellRenderer(new RadioButtonRenderer());
    sourceTable.getColumnModel().getColumn(0).setCellEditor(new RadioButtonEditor());

    JPanel panel = new JPanel();
    panel.add(new JScrollPane(sourceTable));
    add(panel);

    setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    setModal(true);
    pack();
    setVisible(true);
  }
  public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
      @Override public void run() {
        new DisplayTable2().initialize();
      }
    });
  }
}

class SourceTableModel extends DefaultTableModel {
  private static final String[] columnNamesList = {"Select", "Group", "Work"};
  public SourceTableModel(Object[][] data) {
    super(data, columnNamesList);
  }
  @Override public Class<?> getColumnClass(int columnIndex) {
    return (columnIndex == 0 ? Boolean.class : String.class);
  }
  @Override public boolean isCellEditable(int rowIndex, int columnIndex) {
    return (columnIndex == 0 ? true : false);
  }
  @Override public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
    if(columnIndex==0 && aValue instanceof Boolean) {
      //lazy development
      for(int i=0; i<getRowCount(); i++) {
        super.setValueAt(i==rowIndex, i, columnIndex);
      }
    } else {
      super.setValueAt(aValue, rowIndex, columnIndex);
    }
  }
}

class RadioButtonRenderer extends JRadioButton implements TableCellRenderer {
  @Override public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
    if(value instanceof Boolean) {
      setSelected((Boolean)value);
    }
    return this;
  }
}

class RadioButtonEditor extends JRadioButton implements TableCellEditor {
  public RadioButtonEditor() {
    super();
    addActionListener(new ActionListener() {
      @Override public void actionPerformed(ActionEvent e) {
        fireEditingStopped();
      }
    });
  }
  @Override public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
    if(value instanceof Boolean) {
      setSelected((Boolean)value);
    }
    return this;
  }
  @Override public Object getCellEditorValue() {
    return isSelected();
  }

  //Copid from AbstractCellEditor
  //protected EventListenerList listenerList = new EventListenerList();
  //transient protected ChangeEvent changeEvent = null;
  @Override public boolean isCellEditable(EventObject e) {
    return true;
  }
  @Override public boolean shouldSelectCell(EventObject anEvent) {
    return true;
  }
  @Override public boolean stopCellEditing() {
    fireEditingStopped();
    return true;
  }
  @Override public void  cancelCellEditing() {
    fireEditingCanceled();
  }
  @Override public void addCellEditorListener(CellEditorListener l) {
    listenerList.add(CellEditorListener.class, l);
  }
  @Override public void removeCellEditorListener(CellEditorListener l) {
    listenerList.remove(CellEditorListener.class, l);
  }
  public CellEditorListener[] getCellEditorListeners() {
    return listenerList.getListeners(CellEditorListener.class);
  }
  protected void fireEditingStopped() {
    // Guaranteed to return a non-null array
    Object[] listeners = listenerList.getListenerList();
    // Process the listeners last to first, notifying
    // those that are interested in this event
    for(int i = listeners.length-2; i>=0; i-=2) {
      if(listeners[i]==CellEditorListener.class) {
        // Lazily create the event:
        if(changeEvent == null) changeEvent = new ChangeEvent(this);
        ((CellEditorListener)listeners[i+1]).editingStopped(changeEvent);
      }
    }
  }
  protected void fireEditingCanceled() {
    // Guaranteed to return a non-null array
    Object[] listeners = listenerList.getListenerList();
    // Process the listeners last to first, notifying
    // those that are interested in this event
    for(int i = listeners.length-2; i>=0; i-=2) {
      if(listeners[i]==CellEditorListener.class) {
        // Lazily create the event:
        if(changeEvent == null) changeEvent = new ChangeEvent(this);
        ((CellEditorListener)listeners[i+1]).editingCanceled(changeEvent);
      }
    }
  }
} 
```

# php - 由于 JOIN 相同的 ID，按组删除重复的结果

> ID：12931082
> 
> 赞同：2
> 
> 时间：2012-10-17T09:22:56.313
> 
> 标签：php, mysql, join, group-by

我的 MySQL 查询不断创建重复的条目。我认为这与我的加入或 ID 值有关。我是新手`JOIN`，我正在尝试做一个相当简单的`JOIN`过滤器。

基本上我在产品列表页面上过滤产品。

`newCatCols`

```
+----+-----------------+-------------+
| id | sku             | name        |
+----+-----------------+-------------+  
|  1 | 670_apple       | Black       |
|  2 | 670_apple       | Apple       |
|  3 | 670_apple       | Blush       |
|  4 | 670_apple       | Turquoise   |
|  5 | 670_apple       | Light Coral |
| 10 | 640_apple_black | Apple_Black |
| 22 | 347_blush       | Lime        |
| 33 | 347_blush       | Turquoise   |
| 44 | 347_blush       | Gray        |
| 55 | 347_blush       | Yellow      |
+----+-----------------+-------------+ 
```

`newCatProds`

```
+----+-----------------+--------+------+
| id | sku             | cost   | cat  |
+----+-----------------+--------+------+    
|  1 | 670_apple       | 489.55 | swar |
| 10 | 640_apple_black | 458.99 | swar |
| 22 | 347_blush       | 741.44 | sig  |
+----+-----------------+--------+------+ 
```

如果自定义选择黑色，我希望它返回带有黑色、Apple_Black 和 Apple 的颜色。它只是重复列表：

```
// productslisting.php?cat=swar&filter=Black
$strColourGet=mysql_real_escape_string($_GET["filter"]);
$strCatGet=mysql_real_escape_string($_GET["cat"]);  

if($strColourGet=="Black"){

$checkSQL=mysql_query("
SELECT * FROM `newCatProds`
INNER JOIN `newCatCols`
ON `newCatProds`.`sku` = `newCatCols`.`sku`
WHERE (
    `name` = 'Black' OR
    `name` = 'Apple' OR
    `name` = 'Apple_Black' 
)
AND `status`='1' AND `category` = '".$strCatGet."'
ORDER BY `newCatProds`.`rank` DESC");

} 
```

结果出现两次。我可以不让它出现两次吗？

```
710     702_appleblack  139         sig     0   8   1   1   1243    702_appleblack  Apple_Black
486     613_turq    139         sig     0   124     1   1   695     613_turq    Black
463     379_sapphire2   139         sig     0   46  1   1   652     379_sapphire2   Black
504     670_apple   119         sig     0   176     1   1   607     670_apple   Black
463     379_sapphire2   139         sig     0   46  1   1   658     379_sapphire2   Apple_Black 
```

所以也许是一个团体？所以`379_sapphire2`应该只出现一次，因为它都有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:25:49.577

这些都是截然不同的结果。更仔细地观察它们。

如果您想避免这种情况，而不是`SELECT * FROM`执行特定字段请求。

要仅获得一个答案，您需要在 select 中将该字段指定为 distinct 并创建一个 group_by 子句。您无法`*`在选择参数中创建组。

PS：我建议您像这样重写您的查询。这样更容易理解：

```
SELECT
    DISTINCT( category )
FROM
    newCatProds p
JOIN
    newCatCols c
ON
    p.sku = c.sku
WHERE
    c.name IN ( 'Black', 'Apple', 'Apple_Black' )
    AND status =  1
    AND category = '" . $strCatGet . "'
GROUP BY
    category
ORDER BY
    p.rank DESC; 
```

# sql - c#比较Oracle和SQL server的字符串

> ID：12931083
> 
> 赞同：0
> 
> 时间：2012-10-17T09:22:58.857
> 
> 标签：sql, oracle

我想我有一个需要修复的编码问题。有没有办法跨代码页比较字符串？

Oracle 返回一个字符串“TEST - My String”，减号编码为 ascii 63。SQL Server 完全正确地返回了减号编码为 45 的字符串。

有没有办法比较这些字符串？框架是否包含能够忽略代码页不匹配的比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:33:10.553

使用 string.compare 的重载之一，可能：

```
if (string.Equals(value1, value2, StringComparison.OrdinalIgnoreCase))
{
   ...
} 
```

更多有用的信息在这里：

[http://msdn.microsoft.com/en-us/library/dd465121.aspx](http://msdn.microsoft.com/en-us/library/dd465121.aspx)

# android - 卡在图像捕获屏幕上，无法返回 onActivityResult (Android)

> ID：12931088
> 
> 赞同：0
> 
> 时间：2012-10-17T09:23:11.697
> 
> 标签：android, android-camera, android-camera-intent, image-capture

我有一个通过启动 ACTION_IMAGE_CAPTURE 意图打开相机的活动：

```
Intent intent = new Intent(
            android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

    SimpleDateFormat dateformat = new SimpleDateFormat("ddMMyy");

    File photo1 = new File(Environment
            .getExternalStorageDirectory(), imageName);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo1));
    startActivityForResult(intent, 5); 
```

启动此意图后，它会打开图像捕获屏幕，有时在单击捕获按钮后它不会返回到我的应用程序（onActivityResult），它会强制我再次拍摄图像，并且仅在以下情况下才会关闭此屏幕我按了后退按钮。

我在调试时在 OnActivityResult 中设置了一个断点，并且它并没有在这个方法中停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-25T15:11:34.157

这已经很晚了，但这里的问题可能是缺少读/写权限。我自己也遇到了这个问题，这与我想将图像文件放入我自己的应用程序文件夹有关，而相机应用程序无法访问该文件夹。

为了安全起见，在应用程序之间共享文件时，请考虑使用`Environment.getExternalStoragePublicDirectory()`，而不是`Environment.getExternalStorageDirectory()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:24:11.163

这是示例应用程序，它提供了从使用相机或图库中选择图像的选项，它还允许裁剪图像的选项。我希望这正是你想要的。

请参阅此[https://github.com/lorensiuswlt/AndroidImageCrop](https://github.com/lorensiuswlt/AndroidImageCrop)

它的开源下载它并探索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:05:47.720

这是我的相机意图代码。它工作得很好，你可以尝试使用它。

```
import android.app.Activity;
import android.app.Dialog;
import android.content.Context;
import android.content.Intent;
import android.graphics.Bitmap;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.Toast;

public class PlayMenuActivity extends Activity implements OnClickListener {

    Intent intent;
    ImageButton cameraBtn, galleryBtn, maleBtn, femaleBtn;
    static Bitmap photo;
    Dialog dialog;
    static String gender;
    MediaPlayer mp; 

    protected static final int PHOTO_PICKED = 0;
    private static final int CAMERA_REQUEST = 1337;
    private static final int SELECT_PHOTO = 100;
    private static final String TEMP_PHOTO_FILE = "tempPhoto.jpg";
    protected boolean circleCrop = true;
    private final static String TAG = "GetImageFromGalleryActivity";

    // values for scaling image
    protected int outputX = 320;
    protected int outputY = 480;
    protected int aspectX = 2;
    protected boolean scale = true;
    protected int aspectY = 3;
    protected boolean return_data = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i("hello", "oncreate PlayMenu");
        setContentView(R.layout.play_menu_screen);//setting layout
        //Image Buttons on activity screen
        cameraBtn = (ImageButton) findViewById(R.id.cameraBtn_id);
        galleryBtn = (ImageButton) findViewById(R.id.galleryBtn_id);
        cameraBtn.setOnClickListener(this);
        galleryBtn.setOnClickListener(this);
        // sound played when button clicked
        mp = MediaPlayer.create(this, R.raw.click);

    }

    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.cameraBtn_id:
            // camera intent for starting camera
            Intent cameraIntent = new Intent(
                    android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            cameraIntent.putExtra("crop", "true");
            cameraIntent.putExtra("aspectX", aspectX);
            cameraIntent.putExtra("aspectY", aspectY);
            cameraIntent.putExtra("outputX", outputX);
            cameraIntent.putExtra("outputY", outputY);
            cameraIntent.putExtra("scale", scale);
            cameraIntent.putExtra("category", "camera");
            startActivityForResult(cameraIntent, CAMERA_REQUEST);

            break;

        case R.id.galleryBtn_id:
            // calling GalleryActivity for picking image from gallery
            intent = new Intent(PlayMenuActivity.this, GalleryActivity.class);

            startActivity(intent);
            break;

        default:
            break;
        }

    }

    /* creates bitmap of the captured photo */
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        // Log.i("hello", "REQUEST cALL");
        //if a camera request is made and resultcode matches then bitmap is created
        if (requestCode == CAMERA_REQUEST || resultCode == Activity.RESULT_OK) {
            Log.i("hello", "REQUEST cALL");
            try {
                Log.i("hello", "Try Call");
                Bitmap bMap = (Bitmap) data.getExtras().get("data");//creating bitmap 

                photo = bMap;
                Intent intent = new Intent(PlayMenuActivity.this,
                        ShowActivity.class);
                intent.putExtra("category", "camera");//adding category selected ie camera
                startActivity(intent);

            } catch (Exception e) {
                Log.i("hello", "Exception" + e.getMessage());
            }

        } else {
            // Log.i("hello", "Else call");

            Toast.makeText(PlayMenuActivity.this, "Picture NOt taken",
                    Toast.LENGTH_LONG).show();
        }

    } // fn

}// class 
```

希望这可以帮助 。

# c# - Ajax 控制工具包时区问题

> ID：12931091
> 
> 赞同：1
> 
> 时间：2012-10-17T09:23:18.377
> 
> 标签：c#, asp.net

我在 Web 应用程序中使用 Ajax Control Kit。问题是当我使用印度时区访问应用程序时它工作正常但是当我选择中部时间（美国和加拿大）的时区时，日历显示日期显示为 Selected Date-1。例如，如果我选择 16.Oct.2012，它将显示（在扩展控件中）为 15.Oct.2012。我尝试了以下代码但没有帮助：

```
protected void Page_Load(object sender, EventArgs e) {
    string Lang = "en-US"; //set your culture here
    System.Threading.Thread.CurrentThread.CurrentCulture =
        new System.Globalization.CultureInfo(Lang);
}

EnableScriptGlobalization = "true"; 
```

此外，在调试过程中，我发现 Javascript 函数的发送方本身存储了错误的值，即日期为 = 选定日期-1

```
function setDateIntoHiddenField(sender, args) 
```

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:50:33.733

你为什么要尝试罗马尼亚文化？尝试美国文化，例如：

```
string Lang = "en-US"; //set your culture here
System.Threading.Thread.CurrentThread.CurrentCulture =
new System.Globalization.CultureInfo(Lang); 
```

中部时间为 UTC -5

罗马尼亚时间是UTC+2

像这样设置日期选择器值：

```
DateTime.UtcNow 
```

您可以在此处找到有关使用时区的更深入说明： [如何优雅地处理时区](https://stackoverflow.com/questions/7577389/how-to-elegantly-deal-with-timezones)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:12:52.630

您已经得到了一个很好的建议，即您应该使用 UTC 日期值而不是本地日期值。

当您设置 SelectedDate 值时，日历扩展器控件将其视为 UTC 日期，因此，如果您设置`16.Oct.2012`选定的日期值，则意味着您已设置`Tue, 16 Oct 2012 00:00:00 GMT`并且当此值转换为本地中央时间时，它仍然是中央时区的 10 月 15 日。严格来说是`10/15/2012 7:00:00 PM`。

顺便说一句，您可以尝试设置`16.Oct.2012 23:00`选定的日期值并检查印度地区的显示日期。我保证你会感到惊讶。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T09:30:27.313

您可以尝试以下代码在客户端设置 UTC 日期

```
 var localDate = sender.get_selectedDate(); 
    var dateTime = new Date(localDate.getUTCFullYear(), localDate.getUTCMonth(), localDate.getUTCDate()).format("MMM dd, yyyy"); 
```

然后使用`dateTime`设置文本框上的文本。

# mysql - sql将多行合二为一

> ID：12931097
> 
> 赞同：0
> 
> 时间：2012-10-17T09:23:35.477
> 
> 标签：mysql, sql

我不知道如何在 sql 中进行以下选择：

桌子：

```
id score1 score2 score3
0  null   null   3
0  1      null   3
1  null   2      null 
```

选择：

```
id score1 score2 score3
0  1      null   3
1  null   2      null 
```

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:24:36.560

使用聚合值`MAX`

```
SELECT ID, 
       MAX(score1) score1,
       MAX(score2) score2,
       MAX(score3) score3
FROM tableName
GROUP BY ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:30:42.623

这是基于选择具有比相同 ID 的任何其他行更多的分数填写的行。如果愿意，请保留“最佳”数据。

```
select id, score1, score2, score3
from (
    select *,
       rn=row_number() over (partition by id
                             order by
                                case when score1 is not null then 1 else 0 end
                                +
                                case when score2 is not null then 1 else 0 end
                                +
                                case when score3 is not null then 1 else 0 end desc)
    from tbl
) x
where rn=1 
```

例如

```
id score1 score2 score3
0  null   4      null
0  1      null   3         <<< keep
1  null   2      null 
```

当然，您可能更喜欢 John 的答案，这将使 ID=0 的行 (0,1,4,3)。

# python-sphinx - Disabling individual Sphinx warning messages

> ID：12931104
> 
> 赞同：29
> 
> 时间：2012-10-17T09:23:58.340
> 
> 标签：python-sphinx, toctree

I have many `.rst` files in my Sphinx tree which are intentionally excluded from any index tree. I get warnings like

```
 /filename.rst:: WARNING: document isn't included in any toctree 
```

How can I suppress specific warnings in Sphinx?

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-28T13:34:25.370

1.  Are there .rst files in your Sphinx project whose content you don't want in the output?

    Use the `exclude_patterns` configuration variable. No output (and no warning messages) will be generated for files matching the specified patterns. See [http://www.sphinx-doc.org/en/master/usage/configuration.html#confval-exclude_patterns](http://www.sphinx-doc.org/en/master/usage/configuration.html#confval-exclude_patterns).

2.  Are there .rst files in your Sphinx project that are not part of any toctree but whose content should be in the output?

    Add `:orphan:` at the top of each .rst file to suppress the warning message. See [http://www.sphinx-doc.org/en/master/usage/restructuredtext/field-lists.html#file-wide-metadata](http://www.sphinx-doc.org/en/master/usage/restructuredtext/field-lists.html#file-wide-metadata)

# java-me - 从屏幕上删除菜单栏和 J2ME 本机命令

> ID：12931105
> 
> 赞同：0
> 
> 时间：2012-10-17T09:23:57.707
> 
> 标签：java-me, command, statusbar, menubar, lcdui

我想在我的 J2ME 应用程序中显示状态栏，所以我将这行代码放在 midlet 中，

```
((Canvas)  (javax.microedition.lcdui.Display.getDisplay(this).getCurrent())).setFullScreenMode(false); 
```

所以我想删除整个菜单栏和出现在屏幕底部的本机命令，有没有办法做到这一点？

然后我会放一个自定义栏或使用第三方，如 Lwuit。

# java - MyRuntime.exec() 说找不到文件

> ID：12931108
> 
> 赞同：0
> 
> 时间：2012-10-17T09:24:09.487
> 
> 标签：java, runtime.exec, external-process

这是JAVA编程语言问题

这是我试图执行的代码：

```
MyRuntime = Runtime.getRuntime();
File temp = new File("C:\\Command Line Apps\\cURL\\");
for(String filenames : temp.list()) System.out.println(filenames);
curl = MyRuntime.exec("curl.exe", null, temp); 
```

输出是：

```
java ScreenshotMaker

build.txt
CHANGES
COPYING
curl.exe
curl.html
curl.pdf
libcurl.dll
libeay32.dll
libidn-11.dll
libssl32.dll
mk-ca-bundle.vbs
README
RELEASE-NOTES
_curlrc
Exception in thread "main" java.io.IOException: Cannot run program "curl" (in di
rectory "C:\Command Line Apps\cURL"): CreateProcess error=2, The system cannot f
ind the file specified 
```

如您所见，curl.exe 存在于目录中。但 Runtime.exec() 似乎不认识它..

我该怎么做才能解决它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:37:09.580

尝试使用不带空格的文件夹名称，例如使用 CommandLineApps 而不是“命令行应用程序”

# twitter-bootstrap - 将模态层设置为查看屏幕的中心

> ID：12931110
> 
> 赞同：15
> 
> 时间：2012-10-17T09:24:13.440
> 
> 标签：twitter-bootstrap, modal-dialog, centering

我正在使用[Twitter Bootstrap 的 modal](http://getbootstrap.com/2.3.2/javascript.html#modals)，但我不得不将它们的位置更改为绝对，因为我需要它们能够滚动小屏幕的原因。可悲的是，这样一来，模式打开到站点的固定位置，而不是在查看区域。有什么方法可以将它们打开（并且可以滚动）到我当前正在查看的屏幕上？

![我的问题图片](../Images/6cf49e8afcf4ebc198fac2d6f4215ae4.png)

CSS：

```
.modal {
    width: 845px;
    margin: -250px 0 0 -430px;
    background-color: #f6f5ed;
    position: absolute;
    border: 1px solid #cdc4b2;
    top: 50%;
    left: 50%;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T22:10:33.037

这个帖子：[Bootstrap 2 的 Modal plugin is not displayed by the center](https://stackoverflow.com/questions/10363161/modal-plugin-of-bootstrap-2-is-not-displayed-by-the-center)有正确答案，也贴在这里：

```
 $('#YourModal').modal().css(
            {
                'margin-top': function () {
                    return window.pageYOffset-($(this).height() / 2 );
                }
            }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-09T15:11:17.450

尽管我的问题与@Stephanie 相同，但@steve 的解决方案对我不起作用。

重申斯蒂芬妮和我分享的问题：

我有很长的引导模式。在小屏幕上，如果不滚动，就无法完整地看到模式。默认情况下，引导模式是位置：固定。我可以通过将其更改为位置来允许它们滚动：绝对。

但现在我有一个新问题。我的页面也很长，当我从页面*底部*触发模式时，模式出现在页面*顶部*，超出当前浏览器视图。

所以要解决这两个问题：

CSS：

```
// allows the modal to be scrolled
.modal {position: absolute;} 
```

javascript/jQuery:

```
// jumps browser window to the top when modal is fired
$('body').on('show', '.modal', function(){
  $('body').scrollTop(0);
}); 
```

但事实证明，Firefox 不喜欢 'body' 作为 scrollTop 的选择器，但喜欢 'html'。Webkit 则相反。使用此处的评论：[Animate scrollTop not working in firefox](https://stackoverflow.com/questions/8149155/animate-scrolltop-not-working-in-firefox#comment19411596_8149216)

由于我使用的是 jQuery < 1.9，我可以通过浏览器嗅探来解决这个问题：

```
// jumps browser window to the top when modal is fired
$('body').on('show', '.modal', function(){
  // Firefox wants 'html', others want 'body'
  $(jQuery.browser.mozilla ? "html" : "body").scrollTop(0);
}); 
```

现在，当模态框被触发时，它们会出现在页面顶部，浏览器窗口会向上滚动以显示它们，但如果屏幕太小而无法显示模态框的整个长度，用户仍然可以向下滚动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T07:12:56.907

使用位置“固定”而不是“绝对”。

更多细节在这里[http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-14T15:59:28.903

游戏有点晚了，但这是我目前的修复程序，适用于 Firefox、Chrome 和 IE。

```
$('body').on('show', '.modal', function () {
$(this).css({ 'margin-top': window.pageYOffset - $(this).height() / 2, 'top': '50%' });
$(this).css({ 'margin-left': window.pageXOffset - $(this).width() / 2, 'left': '50%' });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-14T14:41:32.367

也必须更改为绝对定位，以便它可以在手机上滚动。

这也对我有用（AllInOne 的解决方案）：

```
// jumps browser window to the top when modal is fired
$('body').on('show', '.modal', function(){
  // Firefox wants 'html', others want 'body'
  $(jQuery.browser.mozilla ? "html" : "body").scrollTop(0);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-13T08:44:01.423

问题是 CSS - 你的“body”和“HTML”标签设置为“height: 100%”

# algorithm - 将区间映射到较小区间的算法

> ID：12931115
> 
> 赞同：20
> 
> 时间：2012-10-17T09:24:35.593
> 
> 标签：algorithm, mapping, distribution

我尝试搜索，但由于我的问题的性质，我无法找到令人满意的东西。

我的问题如下：我正在尝试将范围从 0 到 2000 的数字（尽管理想情况下上限可以调整）映射到从 10 到 100 的更小的区间。上限将映射 (2000->100) 和下限也是如此。除此之外，比区间 [0;2000] 中的另一个条目大的条目理想情况下会大于 [0;100] 中的映射条目

我认为这个问题不是特定于语言的，但如果您想知道，我今天正在使用 Javascript。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-17T09:34:23.747

```
To map
[A, B] --> [a, b]

use this formula
(val - A)*(b-a)/(B-A) + a 
```

正如另一个答案中正确提到的那样，它是线性映射。

基本上

```
y = m*x + c

c = intersection at y-axis
m = slope determined by two known point (A, a), (B, b) = (b-a)/(B-A) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-07-31T23:06:53.370

我认为与其给你一个直接映射的公式，更好的方法是解释它背后的想法：

假设我们要将区间 [0,1] 映射到区间 [1,3]，这可以看作是找到 f(x) = Ax + B 的问题，使得从区间 [0,1] 中给出任意 x，将导致 f(x) 成为/导致区间 [1,3]。

从这个角度来看，我们已经知道了一些价值观：

1.  x = 0 & f(0) = 1 => f(0) = A*0 + B = 1 => B = 1
2.  x = 1 & f(1) = 3 => f(1) = A*1 + B = 3 <=> A + 1 = 3 => A=2

从 (1) 和 (2) 可以得出，将区间 [0,1] 映射到 [1,3] 的函数是 f(x) = 2x + 1。

在您的情况下，您现在应该具备将 [0,2000] 区间映射到 [10,100] 的所有必要知识。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-18T06:08:11.343

```
// Given a value from intervalA, returns a mapped value from intervalB.
function intervalicValueMap(intervalA, intervalB, valueIntervalA) {
    var valueIntervalB = (valueIntervalA - intervalA[0]) * (intervalB[1] - intervalB[0]) 
                            / (intervalA[1] - intervalA[0]) + intervalB[0];

    valueIntervalB = Math.round(valueIntervalB); // Ommit rounding if not needed.
    return valueIntervalB;
}

var intervalA = [100, 200];
var intervalB = [1, 10];
var valueIntervalA = 170;
var valueIntervalB = intervalicValueMap(intervalA, intervalB, valueIntervalA);

console.log(valueIntervalB); // Logs 7 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T09:29:18.593

一个简单的线性映射将映射`x`到`x*90/2000+10`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-15T19:11:39.210

这可能是映射 x 数据的优化方法，此伪代码向您展示了 map 函数的主要思想：

*   避免 x 值超出 b1 - b2 范围的问题。
*   处理数组映射

    ```
    function map(var x, var b1, var b2, var s1, var s2)
    {
        var i;
        var result;

        i = 0;
        while(i < sizeof(s2))
            if(x < b1)
                result[i++] = s1;
            else if (x > b2)
                result[i++] = s2;
            else
                result[i] = (x - b1) / (b2 - b1 ) * (s2[i] - s1[i]) + s1[i++];
        return (result);
    } 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-10T10:38:00.590

使用 Python 中的 Numpy 的答案：

```
import numpy as np  

# [A, B]: old interval
# [a, b] new interval
new_value = np.interp(old_value, [A, B], [a, b])
print(new_value) 
```

# java - 我的自定义添加行代码抛出异常

> ID：12931116
> 
> 赞同：0
> 
> 时间：2012-10-17T09:24:35.347
> 
> 标签：java, swing, jtable

在我的 jTable 中，第一列包含一个数值。当我选择“添加行”时，下一行运行此代码：

```
DefaultTableModel model = (DefaultTableModel) jTable1.getModel();
int x = jTable1.getRowCount();
String cellValue = "";
if(x > 0){
    java.lang.Object cell = jTable1.getValueAt(x,0); 
    int a = Integer.parseInt(cell.toString());
    int b = a + 1;
    cellValue = Integer.toString(b);
}

java.lang.Object[] os = new Object[]{cellValue,"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",};
model.addRow(os);
jTable1.setModel(model);
jTable1.setAutoCreateColumnsFromModel(true); 
```

这段代码的重点是添加一个新行，但是会填写新行中的第一个值。这是关键数字。不幸的是，键数与行数无关。

当按下“添加行”的 jButton 时，它会引发此异常。

> 线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException: 837 >= 837

这个数字很有意义，因为 837 是我按下按钮时 jTable 的行数。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:01:24.507

这映射到DefaultTableModel[中的](http://developer.classpath.org/doc/javax/swing/table/DefaultTableModel-source.html)[Vector.size()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Vector.html#size%28%29)：

```
int x = jTable1.getRowCount(); 
```

这映射到[Vector.get(int index)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Vector.html#get%28int%29)：

```
java.lang.Object cell = jTable1.getValueAt(x,0); 
```

仔细查看[Vector.get(int index) 会](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Vector.html#get%28int%29)发现：

> 抛出： ArrayIndexOutOfBoundsException - 索引超出范围（索引 < 0 || 索引 >= size()）。

现在因为`x == size()`抛出异常。

这应该可以解决问题：

```
java.lang.Object cell = jTable1.getValueAt(--x,0); 
```

# sql - 在 SQL 中计算运行百分比

> ID：12931118
> 
> 赞同：1
> 
> 时间：2012-10-17T09:24:41.350
> 
> 标签：sql

谁能帮我计算 SQL 中的运行百分比？假设我们有以下数据：

```
column 1   column 2
  1          500
  2          499
  3          200
  4           50
  5           10
  6            5 
```

我想知道第 2 列占 80% 的百分比。在示例中，第 2 列的总和为`12664`。前三行占 94% `(500+499+200)/sum(column 2) = 94%`：. 在此之后，我将得出结论，3/6 = 行占总数的 80%。

我如何在 SQL 中执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T19:36:38.917

尽管您必须扩展答案以计算运行*百分比，但您几乎有一个*[关于运行总计](https://stackoverflow.com/questions/860966/calculate-a-running-total-in-sqlserver)的问题的副本。我建议通读链接问题的答案（注意 MSSQL 2012 有语法，万岁！），因为它们比我下面的建议更深入。*`SUM...OVER`*

 *对于您的情况，您可以执行以下操作来获得运行百分比：

```
DECLARE @table TABLE(col1 INT, col2 FLOAT);

INSERT INTO @table  (col1, col2) 
VALUES (1, 500), (2, 499), (3, 200), (4, 50), (5, 10), (6, 5)

DECLARE @col2total FLOAT = (SELECT SUM(col2) FROM @table)

-- Using subqueries
SELECT      col1, 
            col2, 
            (SELECT SUM(col2) FROM @table sub WHERE sub.col1 <= base.col1) 
            / @col2total
            * 100 AS RunningPercentage
FROM        @table base
ORDER BY    col1

-- Using cross join
SELECT      t1.col1,
            t1.col2,
            SUM (t2.col2) RunningTotal,
            SUM (t2.col2) / @col2total * 100 RunningPercentage
FROM        @table t1 CROSS JOIN @table t2
WHERE       t1.col1 >= t2.col1
GROUP BY    t1.col1, t1.col2
ORDER BY    t1.col1 
```

有了这个，你应该很容易以任何你喜欢的方式获得顶部或底部的 80%。*

# xcode - 在 Mac OS 10.8 上构建 Blender 2.6x：3DconnexionClient/ConnexionClientAPI.h'

> ID：12931122
> 
> 赞同：3
> 
> 时间：2012-10-17T09:24:50.697
> 
> 标签：xcode, blender

我正在尝试使用搅拌机的来源并尝试按照[http://wiki.blender.org/index.php/Dev:2.5/Doc/Building_Blender/Mac上的教程进行操作](http://wiki.blender.org/index.php/Dev:2.5/Doc/Building_Blender/Mac)

我正在使用 CMake+Xcode 方法，该方法一直到将“选择安装”作为目标并点击运行按钮的步骤。3-4 分钟后，我收到此错误：

```
CompileC /Users/Jan/blender-build/cmake/intern/ghost/Blender.build/Debug/bf_intern_ghost.build/Objects-normal/x86_64/GHOST_NDOFManagerCocoa.o intern/ghost/intern/GHOST_NDOFManagerCocoa.mm normal x86_64 objective-c++ com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/Jan/blender-build/blender
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c++ -arch x86_64 -fmessage-length=0 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wno-return-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wno-non-virtual-dtor -Wno-overloaded-virtual -Wno-exit-time-destructors -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wno-unused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-shorten-64-to-32 -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -Wno-arc-abi -Wno-c++11-extensions "-DCMAKE_INTDIR=\"Debug\"" -D__SSE__ -D__MMX__ -D__SSE2__ -D__LITTLE_ENDIAN__ -DOPJ_STATIC -DWITH_INPUT_NDOF -DDEBUG -D_DEBUG -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -fasm-blocks -Wprotocol -Wdeprecated-declarations -Winvalid-offsetof -mmacosx-version-min=10.5 -g -Wno-sign-conversion "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -I/Users/Jan/blender-build/cmake/lib/Debug/include -I/Users/Jan/blender-build/blender/intern/ghost -I/Users/Jan/blender-build/blender/intern/string -I/Users/Jan/blender-build/blender/source/blender/imbuf -I/Users/Jan/blender-build/blender/source/blender/makesdna -I/Users/Jan/blender-build/blender/extern/glew/include -I/Users/Jan/blender-build/cmake/intern/ghost/Blender.build/Debug/bf_intern_ghost.build/DerivedSources/x86_64 -I/Users/Jan/blender-build/cmake/intern/ghost/Blender.build/Debug/bf_intern_ghost.build/DerivedSources -Wmost -Wno-four-char-constants -Wno-unknown-pragmas -F/Users/Jan/blender-build/cmake/lib/Debug -msse2 -msse -pipe -funsigned-char -DGHOST_COCOA -DUSE_QTKIT -Wall -Wno-invalid-offsetof -Wno-sign-compare -Wuninitialized -Winit-self -Wmissing-include-dirs -Wno-div-by-zero -fno-strict-aliasing -MMD -MT dependencies -MF /Users/Jan/blender-build/cmake/intern/ghost/Blender.build/Debug/bf_intern_ghost.build/Objects-normal/x86_64/GHOST_NDOFManagerCocoa.d --serialize-diagnostics /Users/Jan/blender-build/cmake/intern/ghost/Blender.build/Debug/bf_intern_ghost.build/Objects-normal/x86_64/GHOST_NDOFManagerCocoa.dia -c /Users/Jan/blender-build/blender/intern/ghost/intern/GHOST_NDOFManagerCocoa.mm -o /Users/Jan/blender-build/cmake/intern/ghost/Blender.build/Debug/bf_intern_ghost.build/Objects-normal/x86_64/GHOST_NDOFManagerCocoa.o

/Users/Jan/blender-build/blender/intern/ghost/intern/GHOST_NDOFManagerCocoa.mm:30:11: fatal error: '3DconnexionClient/ConnexionClientAPI.h' file not found
        #include <3DconnexionClient/ConnexionClientAPI.h>
                 ^
1 error generated. 
```

由于我拥有 SpaceNavigator，因此已安装驱动程序，并且肯定可以在 /Library/Frameworks/3DconnexionClient.framework 下找到它们，并且搜索到的头文件也可用。

我还尝试添加标题+库搜索路径，但这也不起作用。

有什么帮助吗？

谢谢！

# objective-c - 释放目标 C 中的合成属性

> ID：12931123
> 
> 赞同：1
> 
> 时间：2012-10-17T09:24:50.740
> 
> 标签：objective-c, xcode, memory-management, properties, cocos2d-iphone

我对合成属性有点困惑。我有一个数组，我希望可以从其他类访问，所以这是我的代码：

我的类.h

```
@interface MyClass : CCLayer {
    NSMutableArray *myArray;
}

@property (nonatomic, retain) NSMutableArray *myArray; 
```

我的班级.m

```
@synthesize myArray;

-(id)init
{
    myArray = [[NSMutableArray alloc] init];
}

-(void)dealloc
{
    [myArray release];
    myArray = nil;
} 
```

我现在有点困惑..myArray 和 self.myArray 一样吗？我也必须释放 self.myArray 吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:32:56.910

您将您的属性声明为保留，这意味着如果您设置为 using ，它将自动保留`self.myArray`。因此，您可以简单地在您的方法中创建自动释放数组`init`并将其设置为

```
myArray = [NSMutableArray array];
self.myArray = myArray; 
```

在这种情况下，您不必在`dealloc`方法或其他任何内容中释放它。正如 dasblinkenlight 所说，`@synthesize`如果您想确保它`self.myArray`与您的`myArray`实例相关联，则必须使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:29:04.547

假设您的`@synthesize`指令看起来像这样

```
@synthesize myArray; 
```

除了已经在做的事情之外，您不需要做任何事情：您的属性将其值存储在同名的实例变量中。

**已编辑：**删除了建议`self.myArray`在`dealloc`方法中设置的替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:08:59.947

您提供的代码并不正确。

不，访问属性和访问字段本身是不一样的。

我的猜测是您正在查看旧的 obj C 示例，其中有必要使用该属性创建字段。

您的代码中也没有 @synthesize 指令。

在当前的 obj C 代码中，不需要声明一个字段来支持属性，该字段以及 getter 和 setter 将为您自动合成（由编译器生成）。

默认字段生成是您的属性的名称，其前面带有下划线。

当您通过 _myArray 直接访问该字段时，您将绕过生成的 getter/setter 中包含的任何保留或释放代码，并且必须手动管理非 ARC 项目中的内存。

总而言之，您不需要字段定义，也不需要综合指令。

您可以使用 _myArray 直接访问您的字段，或者通过 self.myArray 访问该属性

它们不是一回事，通过生成的代码遵循您的属性定义，因为保留、分配、复制和访问字段直接完全绕过了这些语义。

如果您将属性定义为保留，则需要在 dealloc 中释放它

你可以使用

```
self.myArray = nil; 
```

这将处理释放或

```
[_myArray release];
_myArray = nil; 
```

尽管在之前的帖子中有人说在 dealloc 中将属性设置为 nil 可能会导致一个问题，但我从未见过它在我的应用程序中实际发生过，ymmv

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T09:28:01.183

是的，最好的方法是设置属性 nil 并释放变量。

```
-(void)dealloc{
    self.myArray = nil;
    [myArray release];

    [super dealloc];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T13:44:28.270

要回答您的问题：

> 我现在有点困惑..myArray 和 self.myArray 一样吗？

是的，但是没有。两者都指向同一个对象，内存中的同一个区域。如果您阅读 myArray 或 self.myArray，它们的行为是相同的，减去 self.myArray 的消息发送开销。

但是，如果您分配给 myArray，则不会保留该对象。仅当您分配给 self.myArray 时才会保留它。

> 我也必须释放 self.myArray 吗？

不。

您还可以选择释放或将属性设置为 nil。只要属性是@synthesize'd，两个示例都会做同样的事情：

```
-(void) dealloc
{
    [super dealloc];
    [myArray release];
}

-(void) dealloc
{
    [super dealloc];
    self.myArray = nil;
} 
```

[有关每种方法的优缺点](https://stackoverflow.com/questions/4124049/dealloc-use-release-or-set-to-nil-for-properties)的讨论，请参见此处。

从这个问题来看，我认为您是真正应该使用 ARC 的开发人员。您将需要学习的东西更少，未来的技术问题也会更少。我不能低估这些天使用 ARC 的重要性，特别是如果你没有太多的 ObjC 经验。阅读这篇[如何为 cocos2d 启用 ARC](http://www.learn-cocos2d.com/2012/04/enabling-arc-cocos2d-project-howto-stepbystep-tutorialguide/)或仅使用[Kobold2D](http://www.kobold2d.com)以便能够与开箱即用的启用 ARC 的 cocos2d 一起工作。

# php - 邀请朋友参加活动 facebook api

> ID：12931129
> 
> 赞同：-1
> 
> 时间：2012-10-17T09:25:06.533
> 
> 标签：php, facebook, facebook-graph-api

邀请用户参加活动时，我的脚本非常慢，因为它必须检查用户是否已被邀请参加活动，否则会出现 facebook ouath 错误。

我可以让它更快吗？

```
foreach ( $_POST['friends'] as $ids ) {
    if ( $i < 199 ) {
        $iZ = $facebook->api("/".$event_id."/invited/".$ids, "GET");
            if ( $iZ['data'][0]['rsvp_status']):
                    $status = $iZ['data'][0]['rsvp_status'];
            else:
                    $status="";
            endif;

    if ( ($status != 'declined' && $status != 'attending' && $status != "unsure" && $status !=     "not_replied") || empty($status)) {
            $id.=$ids . ",";
            $i=$i+1;
    }
 }
}

$id = substr_replace($id ,"",-1);

echo $facebook->api("/".$event_id . "/invited",'POST', array("users" => $id)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:27:55.153

就像 Cbroe 说的，使用 FQL，这里是代码：

```
SELECT uid,name FROM user WHERE uid IN 
(SELECT uid1 FROM friend WHERE uid2=me()) AND NOT 
(uid IN (SELECT uid FROM event_member where eid = 306212359507086)) 
```

这将为您提供未受邀参加该活动的朋友列表。

不要忘记更改事件ID

[在图形资源管理器上试用](http://developers.facebook.com/tools/explorer/465440490160635/?fql=SELECT%20uid%20FROM%20user%20WHERE%20uid%20IN%20%28%20SELECT%20uid1%20FROM%20friend%20WHERE%20uid2%3Dme%28%29%20%29%20%0AAND%20NOT%20%28uid%20IN%20%28SELECT%20uid%20FROM%20event_member%20where%20eid%20%3D%20306212359507086%29%29)

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:03:53.867

两种可能的方法：

*   使用[批量请求](https://developers.facebook.com/docs/reference/api/batch/)单独发布每个用户 ID 的邀请（单独发布，但仍然是一个请求）——如果单个邀请失败，没关系，仍然会发布以下邀请帖子。

*   [首先使用FQL`event_members`表](https://developers.facebook.com/docs/reference/fql/event_member/)“交叉”您的朋友 id 列表——获取与您的朋友 id 匹配的所有活动成员的列表（使用`WHERE eid='event_id' AND uid IN(…,…)`），然后“减去”结果（已被邀请参加活动的人）你原来的朋友ID列表。（在 PHP 中你可以使用`array_diff`它。）

# python - 在python中更改主包名称

> ID：12931139
> 
> 赞同：2
> 
> 时间：2012-10-17T09:25:27.747
> 
> 标签：python, package

在我的项目中，我想更改主包名称。

我有一个这样的目录结构：

```
hallo/sub
hallo/foo
hallo/bar 
```

我想将主名称更改为“再见”：

```
goodbye/sub
goodbye/foo
goodbye/bar 
```

但结果新名称总是被拒绝！例如，如果我导入

`import goodbye.sub.utils as utils`

它返回错误

```
ImportError: No module named sub.utils 
```

显然旧名称不起作用。该文件`__init__.py`写入所有子目录！

我试图删除所有 *.pyc 文件和缓存目录，我试图在另一个目录中重新克隆项目，但没有，新名称总是被拒绝！

我在 *nix 下使用 python2，我从来没有在 windows 下移动过。

有什么想法？

编辑：旧名称完美运行：

```
import hallo.sub.utils as utils 
```

一直工作没有任何错误，问题是名称更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:30:27.100

对于从外部导入的内容，请检查`__init__.py`可能会引发问题的变量的内容——比如`__all__`.

此外，典型的成语是：

```
from hallo.sub import utils      #tyically this
import hallo.sub.utils as utils  #instead of this 
```

我无法想象为什么这会有所作为，但 python 偶尔会有一些愚蠢的错误。

对于包内的导入，您可以改用[相对导入](http://docs.python.org/tutorial/modules.html#intra-package-references)。在您的`hallo`包裹中，您可以更改：

```
import hallo.sub as sub
import hallo.sub.utils as utils 
```

对此

```
from . import sub
from .sub import utils 
```

那么外包装叫什么就无所谓了。

# javascript - IPAD2 浏览器上的 iframe 问题 - 关联的 Web 套接字连接

> ID：12931140
> 
> 赞同：1
> 
> 时间：2012-10-17T09:25:30.383
> 
> 标签：javascript, html

我的 Web 应用程序在 iframe 中加载另一个应用程序。这两个应用程序都托管在不同的服务器中。

Iframe 中托管的 Web 应用程序使用 Web 套接字连接从服务器检索数据。检索到大约 5MB 的大量数据。

这在桌面浏览器上运行顺畅，但在 IPAD 2 上的任何浏览器上都无法运行。iframe 应用程序无法呈现从 Web 套接字接收到的响应。浏览器崩溃并变得无响应。当应用程序在 IPAD 2 上运行时，即使我在 fiddler 中监视请求，我也没有看到错误。

此外，当我用对象标记替换 iframe 标记时，它也可以在 IPAD2 浏览器上顺利运行。

任何人都可以建议/指导我 iframe 有什么问题吗？

# c# - 通过静态方法访问页面对象

> ID：12931143
> 
> 赞同：3
> 
> 时间：2012-10-17T09:25:37.797
> 
> 标签：c#, jquery, datepicker, static-methods

我正在使用 asp.net 日期选择器。然后当用户通过 jquery 单击日期时执行静态事件，如下所示：

```
 <script>
    $(document).ready(function () {
        $("#datepicker").datepicker({
            onSelect: function (dateText, inst) {
                $("#<%= lblDate.ClientID %>").text("Are available on " + $('#datepicker').datepicker({ dateFormat: 'dd-mm-yy' }).val());

                $.ajax({
                    type: "POST",
                    url: "Schedule.aspx/DisplayAvail",
                    data: "{}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        // Do something interesting here.
                    }
                });
            }
        });
    });
</script> 
```

后面的代码：

```
[WebMethod] 
    public static void DisplayAvail()
    {
         //Grab data from db to check avail from this date
    } 
```

哪个工作正常。但是，从这个静态方法没有办法访问页面级对象。如何将数据从这个方法发送到页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:41:15.640

看看这里。你可以通过 NuGet 获得这个

[http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)

将 NewtonSoft Json dll 添加为包含 web 方法的项目的引用后，您可以使用 JSONConvert 序列化可用日期并将其发送到客户端。

```
public IEnumerable<string> AvailableData {get; set;}

[WebMethod] 
    public static void DisplayAvail()
    {
        this.AvailableData = GetRequiredData();
        this.AvailableData = JSONConvert.SerializeObject(this.AvailableData);
    } 
```

在客户端，您可以执行以下操作：

```
$(document).ready(function () {
        $("#datepicker").datepicker({
            onSelect: function (dateText, inst) {
                $("#<%= lblDate.ClientID %>").text("Are available on " + $('#datepicker').datepicker({ dateFormat: 'dd-mm-yy' }).val());
            $.ajax({
                type: "POST",
                url: "Schedule.aspx/DisplayAvail",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                        var arr = <%= this.AvailableData %>;
                       $.each(arr, function(index, value) {
                            // Do something with the data
                       });

                    });
                }
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T15:58:49.523

我决定最好的方法是使用 JQuery load() 函数将外部页面加载到当前页面中，如下所示：

...jQuery

```
$("#GetData").load("getData.aspx?GetDate=012420012"); 
```

...html

```
<div id="GetData">
...
</div> 
```

感谢您的所有反馈，但我认为这是最好的方法。干杯! :)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T09:52:48.700

您可以尝试使用 PageMethods()：

这是一个简单的教程[Simple PageMethods 示例。](http://www.singingeels.com/Articles/Using_Page_Methods_in_ASPNET_AJAX.aspx)

你还需要这样做：

```
 <asp:ScriptManager ID="ScriptManager" runat="server" EnablePageMethods="true" /> 
```

;)

# javascript - IE9上的highcharts

> ID：12931145
> 
> 赞同：0
> 
> 时间：2012-10-17T09:25:44.470
> 
> 标签：javascript, internet-explorer, highcharts

我有两个通过 xml 数据生成的图表。但它不适用于IE9。

这里的代码：

```
var chart;var chartB;
jQuery(function() {

    var options = {
        chart: {
            renderTo: 'container',
            type: 'column',
            marginTop: 160

        },
        title: {
            text: 'Wochen\u00FCbersicht',
        },
        xAxis: {
            categories: []

        },
        yAxis: {
            title: {
                text: 'Minuten'

            },

        }, 
```

该系列由 xml 填充

```
 series: []
    };`load Data from xml file`
    // Load the data from the XML file 
        $.get('Woche.xml', function(xml) {

            // Split the lines
            var $xml = $(xml);

            // push categories
            $xml.find('categories Monat').each(function(i, category) {
                options.xAxis.categories.push($(category).text());
            });

            // push series
            $xml.find('series').each(function(i, series) {
                var seriesOptions = {
                    name: $(series).find('name').text(),
                    data: []
                };

                // push data points
                $(series).find('data Minuten').each(function(i, Minuten) {
                    seriesOptions.data.push(
                        parseInt($(Minuten).text())
                    );
                });

                // add it to the options
                options.series.push(seriesOptions); 
```

设置颜色

```
 Highcharts.setOptions({ colors: ['#faebd7', '#00ffff ', '#000000', '#0000ff', '#8a2be2', '#7fff00', '#00008b', '#008000', '#ff1493', '#800000', '#ffa500', '#006400', '#ffff00', '#008080', '#ff0000', '#000080', '#bdb76b', '#20b2aa', '#ffd700', '#00ffff',] });
            });
            var chart = new Highcharts.Chart(options);
        }); 
```

这里开始第二张图表

```
 var options2 = {
        chart: {
            renderTo: 'containerB',
            type: 'column',

        },

        title: {
            text: 'Monats\u00FCbersicht',
        },
        xAxis: {
            categories: []

        },
        yAxis: {
            title: {
                text: 'Minuten'
            },
        },
        series: []
    };
    // Load the data from the XML file 

        $.get('Monat.xml', function(xml) {

            // Split the lines
            var $xml = $(xml);

            // push categories
            $xml.find('categories Monat').each(function(i, category) {
                options2.xAxis.categories.push($(category).text());
            });

            // push series
            $xml.find('series').each(function(i, series) {
                var seriesOptions = {
                    name: $(series).find('name').text(),
                    data: []
                };

                // push data points
                $(series).find('data Minuten').each(function(i, Minuten) {
                    seriesOptions.data.push(
                        parseInt($(Minuten).text())
                    );
                });

                // add it to the options
                options2.series.push(seriesOptions);
                Highcharts.setOptions({ colors: ['#faebd7', '#00ffff ', '#000000', '#0000ff', '#8a2be2', '#7fff00', '#00008b', '#008000', '#ff1493', '#800000', '#ffa500', '#006400', '#ffff00', '#008080', '#ff0000', '#000080', '#bdb76b', '#20b2aa', '#ffd700', '#00ffff',] });
            });
            var chartB = new Highcharts.Chart(options2);
        });

     }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:54:38.627

查看每个图表的 JSON 选项 - yAxis 标题后有一个尾随逗号，IE 不支持该逗号。

# java - 在 Java 中使用相同的内部类名和对象名

> ID：12931146
> 
> 赞同：12
> 
> 时间：2012-10-17T09:25:43.647
> 
> 标签：java, inner-classes, static-classes

在下面的代码片段中，大概它应该发出一些编译错误，但它没有：

```
class Outer {
    public static class Inner {
        static String obj = "Inner";
    }

    static Optional Inner = new Optional();
    //The (inner) class name and the object name are same.
}

class Optional {
    String obj = "Optional";
}

public class Main {

    public static void main(String[] args) {
        System.out.println(Outer.Inner.obj);
        //Refers to the string inside the optional class
    }
} 
```

该类`Outer`内部有一个名为 的静态类`Inner`。`Optional`此外，它声明了类( `static Optional Inner = new Optional();`)的一个对象（静态）

这个对象和类名（在 class 内`Outer`）是相同的，即`Inner`. 程序显示`Optional`。预计会显示其中的唯一表达式`Outer.Inner.obj`，但事实并非如此。然而，实际输出是类的情况。`main()``Inner``Optional``Optional`

一种显示方法`Inner`是将对象名称更改为其他名称。

```
static Optional Inner1 = new Optional(); 
```

从它显示的输出来看，似乎对象名称（或变量）被选择而不是类型名称（类`Inner`），因为它们具有相同的名称。这里应用了什么确切的案例？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T09:47:04.767

[Java 语言规范的第 6.4.2 段](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.4.2)有一些关于在这种情况下适用的规则的信息。

> 简单名称可能出现在可能被解释为变量、类型或包的名称的上下文中。在这些情况下，§6.5 的规则指定**将优先选择变量而不是类型**，并且将优先选择类型而不是包。因此，有时可能无法通过其简单名称来引用可见类型或包声明。我们说这样的声明是*模糊*的。

这指的是第[6.5 段确定名称的含义](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.5)，其中详细解释了规则。

在您的示例中，`Outer.Inner`可以引用名为的嵌套类的类型`Inner`或静态成员变量`Inner`。规则说变量将被选择而不是类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T09:35:03.797

实际上类名是Outer$Inner。

内部类本质上是 Java 1.1 中引入的一种 hack。JVM 实际上并没有任何内部类的概念，因此编译器不得不拒绝它。编译器在 class 的“外部”生成*类* `B`，*但* `A`在同一个*包*中，然后将*合成* *访问器/构造器*添加到它以允许`A`访问它。

查看以下帖子：

[Java 内部类可见性难题](https://stackoverflow.com/questions/1086255/java-inner-class-visibility-puzzle)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T09:39:40.083

想想内部类其实已经有了自己的.java文件。这将使您清楚为什么它选择变量而不是 Inner 类。

# ios - jQuery Ajax Phonegap IOS 缓存

> ID：12931151
> 
> 赞同：1
> 
> 时间：2012-10-17T09:25:47.520
> 
> 标签：ios, jquery, caching, cordova

> **可能重复：**
> [iOS 6 上的 Safari 是否缓存 $.ajax 结果？](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)

我有一个问题，我认为 $.ajax 中的 cache:false 不起作用。

示例 URL：update.php 返回：1 但我应该返回：0

将 update.php 重命名为 update2.php 返回：0

```
url:    '/update.php',
cache:  false,
type:   "POST",
data:   {checkPost: $("#kvittens").val()},  
crossDomain:    true, 
```

update.php 代码

```
<?php
    header("Access-Control-Allow-Origin: *");
    header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
    header("Cache-Control: no-store, no-cache, must-revalidate");
    header("Cache-Control: post-check=0, pre-check=0", false);
    header("Pragma: no-cache");
    header('content-type: application/json; charset=utf-8');

    echo(0);
?> 
```

# gwt - GWT 的 UiBinder 真的能提升应用性能吗？

> ID：12931153
> 
> 赞同：6
> 
> 时间：2012-10-17T09:25:50.373
> 
> 标签：gwt

2 年前我读过关于 UiBinder 性能的答案[https://stackoverflow.com/a/3755675/1067931](https://stackoverflow.com/a/3755675/1067931) 并决定对其进行测试。

我构建了一个非常复杂的布局，其中包含许多按钮和一个内嵌的面板。 **版本 1**的布局完全用 UiBinder xml 构建，而**版本 2**纯粹以编程方式构建。

我将这两个版本都部署到 App Engine 并运行了这两个版本，同时在每次运行前清除浏览器缓存。**第 1 版**（UiBinder）在**~12 秒**后加载，而**第 2 版**在**~3 秒**后加载，所以它真的不鼓励我使用 UiBinder。你有不同的印象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:15:55.473

UiBinder 就像任何 GWT 生成器一样，生成 Java 代码。因此，首先，阅读生成的内容并将其与您手动编写的内容进行比较（将`-gen`选项传递给 GWT 编译器或 DevMode 以使其将生成的代码写入磁盘）。

UiBinder 的亮点在于`HTMLPanel`I18N，因为它使代码比用 Java 编写的代码更具可读性。

GWT 2.5 还引入`IsRenderable`了`RenderablePanel`一项实验性功能，但它可以在某些条件下提高您的性能（他们将其用于提高 Orkut 的性能）。同样，UiBinder 使其易于使用（`IsRenderable`否则需要以适当的顺序并在适当的时间调用其方法以获得最大性能；UiBinder 使其透明）。不幸的是，没有其他`IsRenderable`小部件`RenderablePanel`，因此只有创建自己的小部件来实现它才会有所帮助`IsRenderable`；并`IsRenderable`在非常低的水平上运行。

一般来说，UiBinder 的执行速度不应该比手写代码慢（当然对于小部件的等效排列）。当人们说 UiBinder 表现更好（外部`IsRenderable`）时，它鼓励您使用`HTMLPanel`而不是面板进行布局。例如，`HTMLPanel`包含 HTML`<table>`或 set 的 a比 a或一堆`<div>`s 执行得更快（假设您不需要动态修改布局）。`FlexTable``FlowPanel`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:06:15.287

在我看来直觉上是正确的，UiBinder-Code 可以导致更长的启动时间。这就是为什么：

想象一下，您正试图在视图中定义 20 个按钮。在您的声明式布局中，您将显式声明每个按钮，而在您的命令式布局中，您很可能会使用 for 循环。这似乎可能会导致命令式布局的 JS 尺寸更小。

还要考虑到在现实世界的应用程序中，这种差异可能可以忽略不计，因为视图通常是项目的最小部分。

[UiBinder](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)的文档似乎暗示，它更多的是关于运行时性能，所以如果你对减少加载时间感兴趣，我建议你看看
[Code Splitting](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)、
[HTML5 Appcache](https://stackoverflow.com/questions/3318240/html5-offline-gwt-app)
[和一般性能提示](http://www.youtube.com/watch?v=0F5zc1UAt2Y)（虽然有点过时，但仍然非常有用！）

感谢您提出问题，我搜索了 GWT 功能（如 UiBinder）的广泛性能测试套件，但结果为空。

# weblogic - 在没有 Weblogic 的 WLST 的情况下调用 Jython

> ID：12931155
> 
> 赞同：2
> 
> 时间：2012-10-17T09:25:52.727
> 
> 标签：weblogic, jython, wlst

我正在使用安装了 Weblogic 9.21 的 AIX 机器，并且它还安装了 jython 作为其安装 (WLST) 的一部分。

有没有办法运行 jython 代码而不必先初始化 WLST？

如果他们带来任何想法，我也有以下罐子：

```
['.', '/opt/weblogic921/weblogic92/common/lib/jython.jar', '/opt/weblogic921/weblogic92/common/lib/config.jar', '/opt/weblogic921/weblogic92/common/lib/config.jar', '/opt/weblogic921/weblogic92/server/lib/weblogic.jar', '/opt/weblogic921/weblogic92/common/wlst/modules/jython-modules.jar/Lib', '/opt/weblogic921/weblogic92/common/wlst', '/opt/weblogic921/weblogic92/common/wlst/lib', '/opt/weblogic921/weblogic92/common/wlst/modules'] 
```

现在我正在使用以下方法调用 jython 代码：

```
java -cp /opt/weblogic921/weblogic92/server/lib/weblogic.jar weblogic.WLST file.py 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:40:50.703

将下面的代码粘贴到 shell 脚本中`jythonExec.sh`并使用它

示例用法：`/bin/bash jythonExec.sh file.py`

```
#!/bin/bash 
jythonJarLoc=/opt/weblogic921/weblogic92/common/lib/jython.jar
javaLoc=/usr/bin/java
pythonCacheDir=/tmp/pythonCacheDir
if [ ! -f ${jythonJarLoc} ]; then
    jythonJarLoc=/opt/weblogic921/weblogic92/server/lib/weblogic.jar
fi
${javaLoc} -cp ${jythonJarLoc} -Dpython.cachedir=${pythonCacheDir} org.python.util.jython $@ 
```

# android - ActionBarSherlock 在 android 2.2.2 上错误的标签位置

> ID：12931156
> 
> 赞同：1
> 
> 时间：2012-10-17T09:25:55.163
> 
> 标签：android, tabs, position, actionbarsherlock

我在获取主要操作栏选项卡下方的 actionbarsherlock 中的选项卡以在从 Android 2.2 运行且看起来像 Android 4 的应用程序中工作时遇到严重问题。（请参阅链接）

[标签位置](http://test4.net-informatika.com/20121017_104745.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:36:42.040

您是否尝试过运行 ActionBar Sherlock 的官方 Demos 应用程序？（[https://github.com/downloads/JakeWharton/ActionBarSherlock/ActionBarSherlock-Sample-Demos-4.2.0.apk](https://github.com/downloads/JakeWharton/ActionBarSherlock/ActionBarSherlock-Sample-Demos-4.2.0.apk)）它应该包含一个带有选项卡的操作栏的演示。

如果这适用于 Android 2.2，那么您知道问题出在您的代码中，您可以检查 Demos 源代码以了解您在做什么不同（[https://github.com/JakeWharton/ActionBarSherlock/tree/master/samples](https://github.com/JakeWharton/ActionBarSherlock/tree/master/samples)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:01:30.357

这是操作栏的常见行为（actionbarsherlock 只是模拟它）。利用

```
ActionBar act = getSupportActionBar();
act.setStackedBackgroundDrawable(getResources().getDrawable(R.drawable.mytab_base_t)); 
```

避免顶部栏中出现白色（此选项您还不能从任何主题项目访问）。您还可以监视操作栏高度以即时更改选项卡的自定义视图，但您无法更改操作栏行为，算了。否则，请针对操作栏选项卡使用 PagerTitleStrip。

# blackberry - 从黑莓设备中取出电池后，我的应用程序的主要方法不起作用

> ID：12931157
> 
> 赞同：2
> 
> 时间：2012-10-17T09:25:55.300
> 
> 标签：blackberry, main

> **可能重复：**
> [如何在黑莓应用程序中设置备用入口点？](https://stackoverflow.com/questions/3921029/how-to-setup-alternate-entry-point-in-blackberry-application)

我已经制作了一个黑莓应用程序，它需要在手机重启后自动运行（通过拉动电池），当我从手机中取出电池并再次插入时，我会检查我在手机内存中创建的日志文件。通过观察日志我发现我的应用程序的主要方法在重新启动后没有调用。可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:48:07.870

我认为这个问题没有任何意义。诊断后我们发现一切正常，但唯一的问题是，重启后（通过拉电池）初始化存储卡需要一些时间，而我的数据库和日志文件存储在存储卡上。检测到问题后，我将日志文件转移到手机内存中，发现一切正常。现在我推迟了申请的陈述，每件事都按要求正常工作。

# android - 从 bluegiga 加密狗向安卓手机发送警报

> ID：12931158
> 
> 赞同：1
> 
> 时间：2012-10-17T09:25:56.210
> 
> 标签：android, api, bluetooth, bluetooth-lowenergy

我正在尝试为 Android 开发 BLE 蓝牙 (SMART) 应用程序。我正在使用[Broadcom-ble API](http://code.google.com/p/broadcom-ble/)

我需要将警报从 Bluegiga 加密狗发送到 Android 手机。我从 bluegiga 发送警报值，例如 0、1、2。每当我发送警报时，都会在我的应用程序中调用以下回调：

```
@Override
public void onCharacteristicWrite(String address, BleCharacteristic charObj) {
    Log.d(TAG, "onCharacteristicWrite(" + address + ", " + charObj + ")");

} 
```

当我尝试从 charObj 获取警报值时，以下代码行给出了 nullpointer

```
byte alertLevel = charObj.getValue()[0]; 
```

我已经检查并确认，charObj 不为空。但是 charObj.getValue() 返回 null。

有人可以告诉我，尽管当我从 bluegiga 发送警报时正确调用了回调，但为什么我无法从我的应用程序中检索发送的值？

任何帮助表示赞赏。

# selenium - 如何使用硒上传文件

> ID：12931161
> 
> 赞同：2
> 
> 时间：2012-10-17T09:26:00.147
> 
> 标签：selenium, selenium-rc, selenium-ide

下面是我的硒代码

```
selenium.type("document.forms['UploadForm'].elements['browse']",file.getAbsolutePath());
selenium.click("document.forms['UploadForm'].elements['submit']"); 
```

我有多个表单，其中有多个属性为“broswe”的浏览按钮和多个属性为提交的提交按钮。因为我使用需要上传文件的表单名称上传文件，即“UploadForm”并且需要以相同的形式提交。

但是我面临的问题是没有上传文件，硒正在点击提交按钮。

下面是自动脚本

```
WinWaitActive("Choose File")
Send("C:\Work\selenium\PMG_SPRINT_AUTOMATION\pmg_automation\block_PTN.csv")   
Send("{ENTER}") 
```

我如何在我的 selenium 类中调整此代码，因为有多个 selenium 按钮

```
try {
  String[] commands = new String[]{};
  commands = new String[]{"C:\\Program Files\\AutoIt3\\attachDocScript.exe"}; //location of the autoit executable
  Runtime.getRuntime().exec(commands);
       }
  catch (IOException e) {} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:38:00.823

您可以使用 Autoit。在那里您可以非常轻松地编写用于上传和下载文档的脚本，然后您可以在需要时在 selenium 代码中调用这些脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:57:51.960

您仅使用正确的逻辑。对于上传文件，您需要在浏览区域中键入内容（文件绝对路径）而不单击该内容，然后单击提交以上传该文件。

即使您有多个浏览按钮，您也可以使用索引或特定定位器来指定一个。

![在此处输入图像描述](../Images/f18f4961d623809e30ab0f003da4c75b.png)

例如：

```
selenium.type("//span[@id='attach1']/input","/home/test/file1.csv");
selenium.type("//span[@id='attach2']/input","/home/test/file2.csv");
selenium.type("//span[@id='attach3']/input","/home/test/file3.csv");
.
.
selenium.click("submit"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-17T11:52:21.543

1.  为多个文件上传创建 AutoIT 脚本

    ```
    WinWaitActive("Open"); Name of the file upload window
    Send(' C:\Users\himanichaudhary\Desktop\"Capture1.PNG" "stop.jpg" "image3" image4"');
    Send("{ENTER}") 
    ```

2.  保存并编译脚本以创建“exe”

3.  在 C# 代码中使用`Process.start("D:\\Users\\MultiFileUpload.exe");`（AutoIt exe 所在文件的路径为双斜杠格式）。**

    或者

    ```
    Runtime.getRuntime().exec("Path of file where autoIt script in exe is located");` 
    ```

# mysql - 将两个 MySQL 查询合二为一

> ID：12931166
> 
> 赞同：1
> 
> 时间：2012-10-17T09:26:15.253
> 
> 标签：mysql

是否可以将这两个查询合并为一个查询？

```
SELECT sum(amount) as credit FROM statement WHERE userId= '33003' AND debitOrCredit = '1' AND actionDate <= '2012-10-17';

SELECT sum(amount) as debit FROM statement WHERE userId= '33003' AND debitOrCredit = '0' AND actionDate <= '2012-10-17'; 
```

所以我得到了结果：

```
| credit  | debit  |   
|   90    |   60   | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:29:08.930

您可以[`CASE`](http://dev.mysql.com/doc/refman/5.5/en/case.html)在 SUM 中使用：

```
SELECT sum(CASE WHEN debitOrCredit = '1' THEN amount ELSE 0 END) as credit,
       sum(CASE WHEN debitOrCredit = '0' THEN amount ELSE 0 END) as debit
FROM statement WHERE userId= '33003' AND actionDate <= '2012-10-17'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T09:28:43.200

`CASE`在你的`SELECT`条款中使用

```
SELECT sum(CASE WHEN debitOrCredit = '1' THEN amount ELSE 0 END) as credit,
       sum(CASE WHEN debitOrCredit = '0' THEN amount ELSE 0 END) as debit
FROM   statement 
WHERE  userId= '33003'  AND 
       actionDate <= '2012-10-17'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:34:27.623

像这样使用。

```
SELECT sum(a.amount) as credit,sum(b.amount) as debit FROM statement a left join statement b
on a.userId=b.userId
 WHERE a.userId= '33003' AND a.debitOrCredit = '1' AND b.debitOrCredit = '0' AND a.actionDate <= '2012-10-17' AND b.actionDate <= '2012-10-17' ; 
```

-- 如果此答案回答了您的问题，请标记回答...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T08:48:09.577

感谢您的帮助。这就是我在 Zend 框架中使用它的方式：

```
$sql = $this->_dba->select()
    ->from('statement', array(
        "credit" => "sum(CASE WHEN debitOrCredit = '1' THEN amount ELSE 0 END)",
        "debit" => "sum(CASE WHEN debitOrCredit = '0' THEN amount ELSE 0 END)"))
    ->where('userId = ?', $userId)
    ->where('actionDate <= ?', $date);

    try
    {
        $result = $this->db->fetchRow($sql);
        //process result here       
    }
    catch (Exception $e)
    {
        throw new Exception("Error on ...... ");
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-17T09:40:05.500

试试这个

`SELECT sum(case when debitOrCredit = '1' then amount else 0 end) as credit, sum(case when debitOrCredit = '2' then amount else 0 end) as debit FROM statement WHERE userId= '33003' AND actionDate <= '2012-10-17'`

# python - 在给定速度矢量场的情况下绘制路径线、条纹线

> ID：12931172
> 
> 赞同：3
> 
> 时间：2012-10-17T09:26:52.887
> 
> 标签：python, vector, plot, matplotlib, field

因此，我有一个 2D 矢量场`{u(x,y,t), v(x,y,t)}`，表示在不同时间实例中不稳定流的速度。我没有对流程的分析描述，只有两个组件`u`和`v`随着时间的推移。

我知道并且[这个问题](https://stackoverflow.com/questions/8296617/how-to-plot-a-streamlines-when-i-know-u-and-v-components-of-velocitynumpy-2d)`matplotlib.quiver`的答案建议使用[它](http://www.atm.damtp.cam.ac.uk/people/tjf37/streamplot.py)来绘制流线。

现在我还想绘制向量场的[几条路径线和条纹线。](http://en.wikipedia.org/wiki/Streamlines,_streaklines,_and_pathlines)

是否有任何工具能够做到这一点（最好是 Python 包）？这似乎是一项常见的任务，但我找不到任何东西，也不想浪费时间重新发明轮子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:58:38.467

目前，没有`matplotlib`绘制条纹的功能。但是，Tom Flannaghan 的流线绘图实用程序已得到改进并[合并到代码库](https://github.com/matplotlib/matplotlib/pull/664)中。它将在 matplotlib 版本 1.2 中提供，该版本将在接下来的几周内发布。

目前，您最好的办法是解决您链接到的维基百科页面中的条纹 ODE。如果你想使用 python 来做到这一点，你可以使用`scipy.integrate.odeint`. 这正是`matplotlib.axes.streamplot`目前对流线型所做的。

# c++ - 使用 boost::spirit 的代码中不明确类型的编译错误

> ID：12931186
> 
> 赞同：2
> 
> 时间：2012-10-17T09:27:44.733
> 
> 标签：c++, boost, boost-spirit, boost-variant

如果我编写此代码，它仍然可以编译：

```
namespace MyNamespace
{

struct STreeConstructionRuleQuery : std::string {};
struct STreeConstructionRuleOperation : std::string {};
struct STreeConstructionRuleOperand : std::string {};
struct STreeConstructionRuleCondition : std::string {};

struct STreeConstructionRuleOperationWithOperands : boost::tuple<STreeConstructionRuleOperation, std::vector<STreeConstructionRuleOperand> > {};

struct STreeConstructionRule
{
    boost::optional<std::vector<std::vector<STreeConstructionRuleOperationWithOperands> > > m_sAssertion;
    STreeConstructionRuleQuery m_sQuery;
    STreeConstructionRuleOperationWithOperands m_sAction;
    boost::optional<STreeConstructionRuleCondition> m_sCondition;
};

}

BOOST_FUSION_ADAPT_STRUCT(
    MyNamespace::STreeConstructionRule,
    (boost::optional<std::vector<std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands> > >, m_sAssertion)
    (MyNamespace::STreeConstructionRuleQuery, m_sQuery)
    (MyNamespace::STreeConstructionRuleOperationWithOperands, m_sAction)
    (boost::optional<MyNamespace::STreeConstructionRuleCondition>, m_sCondition)
)

namespace MyNamespace
{

namespace qi = boost::spirit::qi;
namespace ascii = boost::spirit::ascii;
namespace phoenix = boost::phoenix;

template <typename Iterator>
struct STreeContructionRulesGrammar : qi::grammar<Iterator, std::vector<STreeConstructionRule>(), ascii::space_type>
{
    qi::rule<Iterator, std::vector<STreeConstructionRule>(), ascii::space_type> m_oStart;
    qi::rule<Iterator, qi::unused_type(), ascii::space_type> m_oComment;
    qi::rule<Iterator, STreeConstructionRule(), ascii::space_type> m_oRule;

    STreeContructionRulesGrammar() : STreeContructionRulesGrammar::base_type(m_oStart)
    {
        m_oStart = *(m_oComment | m_oRule [phoenix::push_back(qi::_val, qi::_1)]);
        m_oComment = (("-->" >> *(qi::char_) >> "<--") | ('#' >> *(qi::char_ - qi::char_("\n\r")))); 
    }

};
} 
```

但是当我将定义更改`STreeConstructionRuleOperand`为

```
struct STreeConstructionRuleOperand : boost::variant<int> {}; 
```

我收到以下编译错误（使用 STLPort 而不是 STL）：

```
1>d:\commonlib\include\boost\variant\variant.hpp(1373) : error C2666: 'boost::variant<T0_>::convert_construct' : 2 overloads have similar conversions
1>        with
1>        [
1>            T0_=int
1>        ]
1>        d:\commonlib\include\boost\variant\variant.hpp(1358): could be 'void boost::variant<T0_>::convert_construct<int,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_,boost::detail::variant::void_>(const boost::variant<T0_> &,long)'
1>        with
1>        [
1>            T0_=int
1>        ]
1>        d:\commonlib\include\boost\variant\variant.hpp(1289): or       'void boost::variant<T0_>::convert_construct<const T>(T &,int,boost::mpl::false_)'
1>        with
1>        [
1>            T0_=int,
1>            T=MyNamespace::STreeConstructionRuleOperand
1>        ]
1>        while trying to match the argument list '(const MyNamespace::STreeConstructionRuleOperand, long)'
1>        d:\commonlib\include\boost\fusion\container\vector\detail\vector_n.hpp(45) : see reference to function template instantiation 'boost::variant<T0_>::variant<MyNamespace::STreeConstructionRuleOperand>(const T &)' being compiled
1>        with
1>        [
1>            T0_=int,
1>            T=MyNamespace::STreeConstructionRuleOperand
1>        ]
1>        d:\commonlib\include\stlport\stl\_uninitialized.h(93) : see reference to function template instantiation 'void stlpd_std::_Destroy_Range<_OutputIter>(_ForwardIterator,_ForwardIterator)' being compiled
1>        with
1>        [
1>            _OutputIter=stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands> *,
1>            _ForwardIterator=stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands> *
1>        ]
1>        d:\commonlib\include\stlport\stl\_uninitialized.h(113) : see reference to function template instantiation '_OutputIter stlpd_std::priv::__ucopy<_InputIter,_OutputIter,ptrdiff_t>(_RandomAccessIter,_RandomAccessIter,_OutputIter,const stlpd_std::random_access_iterator_tag &,_Distance *)' being compiled
1>        with
1>        [
1>            _OutputIter=stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands> *,
1>            _InputIter=const stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands> *,
1>            _RandomAccessIter=const stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands> *,
1>            _Distance=ptrdiff_t
1>        ]
1>        d:\commonlib\include\stlport\stl\_vector.h(249) : see reference to function template instantiation '_OutputIter stlpd_std::priv::__ucopy_ptrs<const stlpd_std::vector<_Tp>*,stlpd_std::vector<_Tp>*>(_InputIter,_InputIter,_OutputIter,const stlpd_std::__false_type &)' being compiled
1>        with
1>        [
1>            _OutputIter=stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands> *,
1>            _Tp=MyNamespace::STreeConstructionRuleOperationWithOperands,
1>            _InputIter=const stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands> *
1>        ]
1>        d:\commonlib\include\stlport\stl\_vector.h(246) : while compiling class template member function 'stlpd_std::priv::_NonDbg_vector<_Tp,_Alloc>::_NonDbg_vector(const stlpd_std::priv::_NonDbg_vector<_Tp,_Alloc> &)'
1>        with
1>        [
1>            _Tp=stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands>,
1>            _Alloc=stlpd_std::allocator<stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands>>
1>        ]
1>        d:\commonlib\include\stlport\stl\debug\_iterator.h(378) : see reference to class template instantiation 'stlpd_std::priv::_NonDbg_vector<_Tp,_Alloc>' being compiled
1>        with
1>        [
1>            _Tp=stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands>,
1>            _Alloc=stlpd_std::allocator<stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands>>
1>        ]
1>        d:\commonlib\include\stlport\stl\debug\_vector.h(106) : see reference to class template instantiation 'stlpd_std::priv::__construct_checker<_Container>' being compiled
1>        with
1>        [
1>            _Container=stlpd_std::priv::_NonDbg_vector<stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands>,stlpd_std::allocator<stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands>>>
1>        ]
1>        d:\commonlib\include\boost\optional\optional.hpp(110) : see reference to class template instantiation 'stlpd_std::vector<_Tp>' being compiled
1>        with
1>        [
1>            _Tp=stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands>
1>        ]
1>        d:\commonlib\include\boost\optional\optional.hpp(113) : see reference to class template instantiation 'boost::optional_detail::aligned_storage<T>::dummy_u' being compiled
1>        with
1>        [
1>            T=stlpd_std::vector<stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands>>
1>        ]
1>        d:\commonlib\include\boost\optional\optional.hpp(450) : see reference to class template instantiation 'boost::optional_detail::aligned_storage<T>' being compiled
1>        with
1>        [
1>            T=stlpd_std::vector<stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands>>
1>        ]
1>        d:\commonlib\include\boost\optional\optional.hpp(457) : see reference to class template instantiation 'boost::optional_detail::optional_base<T>' being compiled
1>        with
1>        [
1>            T=stlpd_std::vector<stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands>>
1>        ]
1>        d:\preformator\sources\prefcore\preftreeconstructor.cpp(52) : see reference to class template instantiation 'boost::optional<T>' being compiled
1>        with
1>        [
1>            T=stlpd_std::vector<stlpd_std::vector<MyNamespace::STreeConstructionRuleOperationWithOperands>>
1>        ] 
```

这是编译器报告的唯一错误。我没有看到任何歧义，但编译器确实如此。此错误的原因是什么以及应如何修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:48:40.257

这里有两件事让我印象深刻：

1.  过去的东西如何`std::string`分配给现在的东西`variant<int>`？

    显示的代码不包括可以解释这一点的代码（因为它可能在其中`m_oRule`或其子规则中）。但也许 a`variant<std::string>`带来的问题更少，看看你之前是如何`std::string`分配一个值的。

2.  您似乎经常*滥用* `struct` *继承*来实现`typedef`行为。请注意，公共继承与 a 不同**，**尤其是关于*构造函数*（**不是**继承的）。`typedef`

     ***尝试更换每次使用

    ```
    struct A : baseType {}; 
    ```

    通过更常见的习语

    ```
    typedef baseType A; 
    ```*** 

 ***我实际上希望后者能够解决问题，因为您遇到了构造函数重载问题。

不管怎样，我只用 gcc、boost_1_51_0 和 GNU libstdc++ 进行了测试。它可以顺利编译您发布的所有内容（但同样，您不会遗漏关键元素，例如实际分配给的*规则* ）。`m_oRule``RuleOpWithOperands`

### 演示 FauxTypedef：

*使用继承*而不是演示相关问题（至少一个）`typedef`：

```
struct Type {
    Type(int, double) { }
};

typedef Type          ProperTypedef;
struct  FauxTypedef : Type { };

int main()
{
    Type          a(1, 4.2); // okay
    ProperTypedef b(1, 4.2); // okay as well, obviously
    FauxTypedef   c(1, 4.2); // oops ouch!!! This won't compile
} 
```

如果您坚持使用 _unique`typeid`作为 typedef-ed 名称，您可以求助于[BOOST_STRONG_TYPEDEF](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/strong_typedef.html)***

# ios - AVPlayer 和框架中的控制按钮

> ID：12931195
> 
> 赞同：2
> 
> 时间：2012-10-17T09:28:23.830
> 
> 标签：ios, video, view, avfoundation, mpmediaplayercontroller

我必须在我的应用程序中播放一系列视频。我正在使用 AVQueuePlayer 使用代码播放视频：

```
AVQueuePlayer *queuePlayer = [[AVQueuePlayer alloc] initWithItems:items];
AVPlayerLayer *myPlayerLayer  = [AVPlayerLayer playerLayerWithPlayer:queuePlayer];
myPlayerLayer.frame = CGRectMake(0, 0, 320, 350);
[self.view.layer addSublayer:myPlayerLayer];
[self.queuePlayer play]; 
```

我面临两个问题。

1.  播放视频时，播放器的帧不符合给定的值（即0、0、320、350）。

2.  当我们使用 MPMediaPlayer 播放视频时，不会显示任何控制按钮（音量、播放、停止、前进等）。我在这两种情况下都遗漏了什么吗？（我是第一次使用 AVFoundation，所以这些问题可能看起来很愚蠢）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:13:33.390

> 播放视频时，播放器的帧不符合给定的值（即0、0、320、350）。

Apple 的示例代码没有使用 -playerLayerWithPlayer:。它创建了一个 UIView 子类，其层是 AVPlayerLayer。也许这是有原因的。我在我的代码中这样做并且效果很好。查看 AVPlayerDemo 代码并尝试这样做。

> 当我们使用 MPMediaPlayer 播放视频时，不会显示任何控制按钮（音量、播放、停止、前进等）。我在这两种情况下都遗漏了什么吗？（我是第一次使用 AVFoundation，所以这些问题可能看起来很愚蠢）。

AVPlayer 不为您提供这些。这就是 MPMoviePlayerController 的用途。如果您想要控件并且想要使用 AVPlayer，则需要自己创建和管理控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-20T15:44:57.577

作为戴夫对您第一个问题的回答的替代方案...

如果使用自动布局，您可以将播放器层的引用存储为本地属性，`playerLayerWithPlayer:`并在视图控制器的视图布置其子视图时更新其框架 -

```
- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubviews];

    self.playerLayer.frame = self.view.layer.bounds;
} 
```

或者，如果您正在使用 UIView 子类 -

```
- (void)layoutSubviews
{
    [super layoutSubviews];

    self.playerLayer.frame = self.layer.bounds;
} 
```

这假设您希望玩家填充视图；如果您有其他意图，您可以更新代码。

# c# - 如何循环浏览工具条中的下拉项目

> ID：12931197
> 
> 赞同：0
> 
> 时间：2012-10-17T09:28:26.363
> 
> 标签：c#, statusstrip

我的工具条（工具栏）中有一个下拉列表我已将单击事件附加到下拉列表中的每个项目，因为下拉列表已动态填充，现在我可以将所选项目投射到下拉列表中并将其状态设置为选中，以获得在它旁边打勾，我希望用另一种方法循环来检查已检查的项目。我如何遍历下拉列表中的项目，检查哪些项目被选中？

```
 foreach (DataSet1.xspLibraryByNameRow libName in data.xspLibraryByName)
        {
            var name = new LibraryItems(libName);
            if (libName.xlib_Code != "NULL")
            {
                catDrpDwn.DropDown.Items.Add(name);
                catDrpDwn.DropDown.Tag = name;
                name.Click += new EventHandler(name_Click);
            }
        }

    }

    void mapArea_VE_MapReady(object sender, EventArgs e)
    {
        loadPoints();
    }

    void name_Click(object sender, EventArgs e)
    {
        var selected = (LibraryItems)sender;
        selected.Checked = true;

        loadPoints();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:50:57.990

```
 foreach (var items in catDrpDwn.DropDown.Items)
        {
            var it = (LibraryItems)items;
            if (it.Checked == true)
            {

            }
        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T09:50:51.770

试试这个

```
var items=catDrpDwn.DropDown.Items.Cast<LibraryItems>().Where(d=>d.Checked).ToList(); 
```

在这里，您将获得所有已检查的项目，您可以循环进入它。

# visual-studio-2012 - Visual Studio 2012 Intellisense - 对项目进行分组而不是按字母顺序排列

> ID：12931198
> 
> 赞同：0
> 
> 时间：2012-10-17T09:28:27.290
> 
> 标签：visual-studio-2012, intellisense

有谁知道是否可以更改项目在 Intellisense 中出现的顺序，以便将它们组合成属性、子项、函数等，而不是默认的字母顺序。

例如

```
Class MyClass
    Public Property BiscuitProperty
    Public Property ElephantProperty
    Public Sub DogSub
    Public Sub AnacondaSub
    Public Function ChocolateFunction
End Class 
```

输入“myClass”后。默认情况下，这些将如下所示：

1.  AnacondaSub
2.  饼干属性
3.  巧克力功能
4.  狗子
5.  大象地产

理想情况下，我希望它们按以下顺序出现：

1.  饼干属性
2.  大象地产
3.  AnacondaSub
4.  狗子
5.  巧克力功能

我浏览了这些选项并在线阅读并找不到任何东西，所以我猜这可能是不可能的，但认为值得一问。

谢谢，

铝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:44:04.687

根据工具 -> 选项 -> 文本编辑器 -> C# -> IntelliSense 设置中的 IntelliSense 选项，这是不可能的......

# ios - 缩放时调整 UIScrollView 的内容大小

> ID：12931201
> 
> 赞同：1
> 
> 时间：2012-10-17T09:28:39.307
> 
> 标签：ios, uiscrollview, resize, zooming, image-resizing

我知道这个主题有很多主题，但我没有找到解决我问题的好方法。我有一个 UIScrollView，其中包含作为子视图添加的图像和其他组件。我只想知道在缩放时实时调整组件大小的好方法。

```
- (void)scrollViewDidZoom:(UIScrollView *)scrollView {
    // Resizing image and other components
} 
```

**编辑**：我希望滚动视图内的组件在缩放时保持相同大小。我不希望它们在缩放过程中变大或变小。

**编辑**：这是我的 UIViewController 的层次结构

*   看法
    *   滚动视图
        *   主视图
            *   图像视图
            *   绘图视图（带有 UILabel、其他 UIView 等组件的 UIView...）

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:42:52.597

我将保持 UIScrollView 的比例不变，并在子视图的帮助下达到目标（调整其大小，而不是滚动视图），我将在其中放置所有子视图和您使用的图像。所以它会是这样的：

```
yourView.transform = CATransform3DMakeScale(newScale, newScale, 1.0); 
```

其中*yourView*是 scrollView 的主要（唯一）子视图。然后我会用新的比例重新计算*yourView*的大小，并将其设置为 scrollView 的*contentSize*参数，这样你就可以真正滚动放大的内容，而不仅仅是看到它被截断。

唯一的问题是，在这种情况下，您应该使用*scrollViewDidZoom 以外的回调：*我猜。

PS 改变 UIView 的*变换*参数你不需要担心子视图的比例：CoreAnimation 为你做一切。

# c#-4.0 - 如何在 asp.net web api 中使用接收 POST 数据？

> ID：12931204
> 
> 赞同：2
> 
> 时间：2012-10-17T09:28:47.390
> 
> 标签：c#-4.0, jquery, asp.net-mvc-4, asp.net-web-api

我已经用谷歌搜索了一整天，但仍然找不到答案。我需要`POST`通过`jQuery.post`to`Web API MVC-4`但无法获取数据。这是我的路由：

```
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

这是我`Controller`的（`GET`作品！）：

```
 public string Get(int id)
    {
        return "value";
    }

    public void Post([FromBody]string data)
    {
        //body...
    } 
```

这是`jQuery.post:`

```
$.post('api/mycontroller', { key1: 'val1' }); 
```

任何的想法 ？

# 编辑：

@Darin：我试过这个：

```
public class UnitDetails{
    public string id { get; set; }
} 
```

和：

```
public void Post(UnitDetails id) {
    //body...
} 
```

和：

```
$.post('api/mycontroller', {id:'string1'}); 
```

但是我仍然想念一些东西..它并没有停止`Post(...){...}`。再次 -`Get(...){...}`有效..？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T09:29:43.533

这是设计使然，使用原始类型（例如字符串）进行此操作的唯一方法如下：

```
$.post('/api/mycontroller', '=' + encodeURIComponent('val1')); 
```

所以 POST 请求的主体必须包含以下内容：

```
=val1 
```

代替：

```
data=val1 
```

这已在[此线程](http://aspnetwebstack.codeplex.com/discussions/359687)中讨论过。

作为替代方案，您可以定义一个视图模型：

```
public class MyViewModel
{
    public string Data { get; set; }
} 
```

然后让您的控制器操作将此视图模型作为参数：

```
public void Post(MyViewModel model)
{
    //body...
} 
```

与原始类型相反，复杂类型使用格式化程序而不是模型绑定。下面[`an article`](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)介绍了 Web API 如何进行参数绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:49:01.927

您发布到`api/mycontroller`. ASP.NET MVC 自动附加“控制器”提供的名称，因此它正在寻找一个名为`mycontrollerController`. 您的帖子中没有提到您的 API 控制器的名称，但我怀疑不是这样。

假设您的控制器名为“myController”，请尝试发布到`api/my`.

```
$.post('api/my', { id: 'string1' }); 
```

# android - 在 DroidGap 中禁用屏幕拖动

> ID：12931210
> 
> 赞同：1
> 
> 时间：2012-10-17T09:29:03.383
> 
> 标签：android, cordova

我目前正在使用 Cordova 处理混合 HTML5 移动应用程序。我的代码在 IOS 上运行良好，我使用**UIWebViewBounce**条目作为**NO**克服了反弹效果，但不知道如何为 Android 做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:21:31.487

在扩展 DroidGap 的类的 onCreate 方法中，您需要添加以下代码：

```
if(android.os.Build.VERSION.SDK_INT >=
        android.os.Build.VERSION_CODES.GINGERBREAD) {
    this.appView.setOverScrollMode(appView.OVER_SCROLL_NEVER);
} 
```

这应该可以防止过度滚动反弹效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:44:58.400

我发现问题出在我从 Galaxy Tablet 10.1 切换到 Galaxy Note 10.1 的设备上，并且发现我的屏幕已根据需要进行了修复。:-)

# xcode - 目标依赖与链接二进制文件与库

> ID：12931216
> 
> 赞同：17
> 
> 时间：2012-10-17T09:29:08.917
> 
> 标签：xcode

我不明白这些 Xcode 功能之间的区别。

我正在构建和应用程序 - 但应用程序的功能被抽象到库中（因此它们可以作为“SDK”单独分发）。

所以我有一个库项目和应用程序项目的工作区。我可以通过“将二进制文件与库链接”将库项目添加到应用程序项目中。这为我提供`.a`了当前工作区中可以链接到的库项目列表。

我也可以在这里添加框架。

在“目标依赖项”位中，我只能添加当前项目中的其他目标。

我真正想做的是两者——我希望我的应用程序项目在构建时构建所有其他库项目。我还想详细说明应用程序（和其他库）**依赖**的库。

那么有人可以解释一下区别，我所做的是否是正确的方法？

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-08-06T19:15:59.647

[这里](https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPFrameworks/Tasks/CreatingFrameworks.html#//apple_ref/doc/uid/20002258-SW1)说...

> 2.  将您的框架产品（位于 Products 文件夹中）拖到应用程序目标的现有 Link Binary With Libraries 构建阶段。这会导致应用程序链接到您的框架。

和...

> 8.  在检查器窗口的常规选项卡中，将您的框架添加为应用程序的依赖项。添加此依赖项会导致 Xcode 在构建应用程序目标之前构建框架目标。
> 
> 您在应用程序目标中建立的构建依赖关系会导致框架在应用程序之前构建。这很重要，因为它保证了框架的构建版本可用于链接和嵌入应用程序。由于这种依赖关系，您可以将 Xcode 项目的活动目标设置为您的应用程序并将其保留在那里。

因此，您似乎应该同时使用两者。不过，这似乎是多余的，因为如果您要链接到一个框架，那么它就是一个依赖项。我想您可能只想链接到一个库而不是先构建它。尽管 XCode 似乎构建了链接库，即使它们没有被添加到依赖项部分。也许这是方案构建设置中“查找隐式依赖项”选项的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:13:38.773

我做了类似的事情，并在最终的可执行目标中明确设置了“标题搜索路径”和“库搜索路径”。然而，这一切都取决于生成对象的位置。最初我将它设置在源代码树中（实际上是一个名为 的同级目录`build`），但是在更改 Xcode`DerivedData`目录的位置并告诉它构建到该目录后，项目不再构建。

最终的解决方案是简单地删除“标题/库搜索路径”的显式设置并正确设置目标依赖项。这导致为调试和归档而构建的项目没有问题。

# iphone - 什么可以替代 SDL 将 ffmpeg 解码的视频引导到 IOS 中的屏幕？

> ID：12931220
> 
> 赞同：1
> 
> 时间：2012-10-17T09:29:21.537
> 
> 标签：iphone, ios, ffmpeg, sdl

我使用 ffmpeg 制作了一个 iOS 视频播放器，流程如下：

Video File---> [FFMPEG Decoder] --> 解码帧 --> [a media director] --> /iphone screen (full and partial)/

媒体主管将处理将解码的视频帧渲染到 iOS ui（UIView、UIWindow 等）、将音频样本输出到 iOS 扬声器以及线程管理的任务。

SDL 是这些库之一，但 SDL 主要是为游戏制作目的而制作的，对于 iOS 来说似乎并不成熟。

什么可以替代 SDL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:44:09.377

在 Mac OS XI 上为此使用 CoreImage/CoreVideo，将帧解码为 a`CVImageBuffer`并将它们渲染到 CoreImage 上下文中。不过，我不确定 iOS 是否支持 CoreImage 上下文。也许这个线程会对此有所帮助：[How to turn a CVPixelBuffer into a UIImage?](https://stackoverflow.com/questions/8072208/how-to-turn-a-cvpixelbuffer-into-a-uiimage)

iOS 上更好的方法可能是使用 OpenGLES 绘制帧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:08:13.083

SDL 使用 opengl 和 FFMpeg，您可以使用 ffmpeg 和苹果原生 api 的功能非常接近。我们已经用几个视频播放器做到了。

这肯定会让你开始。

[https://github.com/mooncatventures-group](https://github.com/mooncatventures-group)

# objective-c - Objective-C中的浮点值数组

> ID：12931221
> 
> 赞同：6
> 
> 时间：2012-10-17T09:29:23.443
> 
> 标签：objective-c, arrays, floating-point

如何在 Objective-C 中创建浮点数数组？是否可以？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-17T09:54:57.603

您可以通过不同的方式创建动态数组（大小在运行时决定，而不是编译时），具体取决于您希望使用的语言：

## Objective-C

```
NSArray *array = [[NSArray alloc] initWithObjects:
    [NSNumber numberWithFloat:1.0f],
    [NSNumber numberWithFloat:2.0f],
    [NSNumber numberWithFloat:3.0f],
    nil];
...
[array release];    // If you aren't using ARC 
```

或者，如果您想在创建后更改它，请使用`NSMutableArray`：

```
NSMutableArray *array = [[NSMutableArray alloc] initWithCapacity:0];
[array addObject:[NSNumber numberWithFloat:1.0f]];
[array addObject:[NSNumber numberWithFloat:2.0f]];
[array addObject:[NSNumber numberWithFloat:3.0f]];
...
[array replaceObjectAtIndex:1 withObject:[NSNumber numberWithFloat:99.9f]];
...
[array release];    // If you aren't using ARC 
```

或者使用新的[Objective-C 文字语法](http://clang.llvm.org/docs/ObjectiveCLiterals.html)：

```
NSArray *array = @[ @1.0f, @2.0f, @3.0f ];
...
[array release];    // If you aren't using ARC 
```

## C

```
float *array = (float *)malloc(sizeof(float) * 3);
array[0] = 1.0f;
array[1] = 2.0f;
array[2] = 3.0f;
...
free(array); 
```

## C++ / 目标-C++

```
std::vector<float> array;
array[0] = 1.0f;
array[1] = 2.0f;
array[2] = 3.0f; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T09:54:29.853

对于动态方法，您可以使用`NSNumber`object 并将其添加到`NSMutableArray`，或者如果您只需要静态数组，则使用评论中的建议，或使用 standard `C`。

像：

```
NSMutableArray *yourArray = [NSMutableArray array];
float yourFloat = 5.55;
NSNumber *yourFloatNumber = [NSNumer numberWithFloat:yourFloat];
[yourArray addObject:yourFloatNumber]; 
```

然后检索：

```
NSNumber *yourFloatNumber = [yourArray objectAtIndex:0]
float yourFloat = [yourFloatNumber floatValue]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:07:30.973

如果你使用的是 Xcode 4.4+，你可以试试这个：

```
NSArray *a = @[ @1.1f, @2.2f, @3.3f]; 
```

[这](http://clang.llvm.org/docs/ObjectiveCLiterals.html)是 LLVM 编译器 4.0 的所有新文字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-06T07:48:31.767

这样的事情怎么样？

```
@interface DoubleArray : NSObject

@property(readonly, nonatomic) NSUInteger count;

@property(readonly, nonatomic) double *buffer;

- (instancetype)init NS_UNAVAILABLE;

- (instancetype)initWithCount:(NSUInteger)count NS_DESIGNATED_INITIALIZER;

- (double)valueAtIndex:(NSUInteger)idx;

- (void)setValue:(double)value atIndex:(NSUInteger)idx;

@end

@implementation DoubleArray

- (void)dealloc
{
    if (_buffer != 0) {
        free(_buffer);
    }
}

- (instancetype)initWithCount:(NSUInteger)count
{
    self = [super init];
    if (self) {
        _count = count;
        _buffer = calloc(rows * columns, sizeof(double));
    }
    return self;
}

- (double)valueAtIndex:(NSUInteger)idx
{
    return *(_buffer + idx);
}

- (void)setValue:(double)value atIndex:(NSUInteger)idx
{
    *(_buffer + idx) = value;
}

@end 
```

这是一个基本数组。您可以使用更复杂的功能来扩展它，例如附加、索引删除等。

# inno-setup - 如何限制目录编辑框的用户输入？

> ID：12931222
> 
> 赞同：4
> 
> 时间：2012-10-17T09:29:24.023
> 
> 标签：inno-setup

我需要防止用户`.`在目录编辑框中输入的路径末尾输入。

例如，路径不能是：

```
C:\Program Files\InnoSetup. 
```

如何验证目录编辑框输入，或者如何防止用户进入`.`路径末尾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:17:13.190

要自动删除目标目录末尾的所有点，您可以使用此脚本。您还没有回答我的问题，当在路径的尽头找到一个点时您想做什么，所以我选择了这种方式来显示。请注意，这将删除文件夹字符串末尾的所有点，因此从如下路径中删除：

```
C:\Program Files (x86)\My Program..... 
```

这个脚本使得：

```
C:\Program Files (x86)\My Program 
```

这是脚本：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program

[code]
procedure OnDirEditChange(Sender: TObject);
var
  S: string;
begin
  S := WizardDirValue;
  if (Length(S) > 0) and (S[Length(S)] = '.') then
  begin
    MsgBox('Last char(s) of the entered target folder is "."' + #13#10 +
      'All "." chars from the end will be deleted!', mbInformation, MB_OK);
    while (Length(S) > 0) and (S[Length(S)] = '.') do
      Delete(S, Length(S), 1);
    WizardForm.DirEdit.Text := S;
  end;
end;

procedure InitializeWizard;
begin  
  WizardForm.DirEdit.OnChange := @OnDirEditChange;
end;

procedure CurPageChanged(CurPageID: Integer);
begin
  // this is just a paranoid event trigger, in case the DefaultDirName
  // would be able to contain dots at the end, what can't at this time
  if CurPageID = wpSelectDir then
    OnDirEditChange(nil);
end; 
```

当然还有另一种验证路径的方法，例如，您可以让用户在最后输入带有点的路径，并在您进入向导的下一步等时验证它。但是您只是没有指定您要做什么意思是你*如何写验证*问题。

# android - 是否可以在滚动视图中容纳微调器？

> ID：12931223
> 
> 赞同：0
> 
> 时间：2012-10-17T09:29:24.573
> 
> 标签：android, android-layout, android-widget

我试图在滚动视图中容纳 4 个微调器。但我将无法做到这一点。有什么办法可以在 Scroll View 中容纳微调器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:32:09.280

很简单：A`ScrollView`只能容纳一个直接的孩子，所以如果你把微调器放在 a 里面，`LinearLayout`一切都会好起来的。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical">

            <Spinner
                android:id="@+id/spinner2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" />

            <Spinner
                android:id="@+id/spinner1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" />

            <Spinner
                android:id="@+id/spinner3"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1" />

            <Spinner
                android:id="@+id/spinner4"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1" />

        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

# ios - IOS NSString替换范围之间的文本

> ID：12931225
> 
> 赞同：2
> 
> 时间：2012-10-17T09:29:36.227
> 
> 标签：ios, nsstring

更新：我忘了提到我有一大串 html，而这个 src="" 是其中的一部分。所以，我的问题是如何找到这个特定的“file:///.../”并将其删除？

如何替换 NSString 值

```
src="file:///var/mobile/Applications/92AE599A-1231223151B-4B3A-8C9B-950225AF5971/something.app/smiley-1.png" 
```

至

```
src="smiley-1.png" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:33:35.177

src = [src lastPathComponent];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:33:23.210

你可以使用NSString 的[componentsSeparatedByString函数](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

```
NSArray *array  =  [src componentsSeparatedByString:@"/"];
src             =  [array lastObject]; 
```

# css - 编辑 Bootstrap 的跨度宽度

> ID：12931229
> 
> 赞同：0
> 
> 时间：2012-10-17T09:29:52.473
> 
> 标签：css, twitter-bootstrap

我对 Twitter 的引导程序非常陌生，我有一个我无法弄清楚的问题。这是我要调整的代码。

```
@media (min-width: 1200px) {.span2 {width: 180px;} 
```

当我的网站“满”时，当我调整 CSS 时，宽度必须为 220 像素，这样可以正常工作。当我将窗口的大小调整为较小的分辨率时，在这种情况下为 160 像素，图像没有缩放到正确的大小。我怎样才能做到这一点？

与此有关：

```
.row-fluid .span2 {
   width: 14.364640883%;
   *width: 14.311449393638298%;
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-17T09:36:57.780

您在样式引导程序中使用 !important

```
@media (min-width: 1200px) {.span2 {width: 180px !important;}
.row-fluid .span2 {
width: 14.364640883% !important;
*width: 14.311449393638298% !important;
} 
```

# c++ - C++ 数论库（线程安全、跨平台）

> ID：12931230
> 
> 赞同：3
> 
> 时间：2012-10-17T09:29:53.830
> 
> 标签：c++, thread-safety, number-theory

我正在寻找一个支持长整数和多项式算术的优化、跨平台和**线程安全的C/C++ 库。**

[NTL](http://www.shoup.net/ntl/)和 Lidia 的功能就足够了，但它们不是线程安全的。

我不确定[Flint](http://www.flintlib.org/)，它似乎不是跨平台的。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T16:33:10.773

这有点老了，但我会回答以防将来对任何人有帮助。Linbox 创建了 NTL 的线程安全版本。我过去成功地使用了这个版本的一些功能（即GF2、GF2X、GF2E和GF2EX），方法是将这个版本的更改合并到NTL 5.5.2版中

[http://linalg.org/projects/linalg/log/trunk/ntl/doc/multithreading.txt?rev=20](http://linalg.org/projects/linalg/log/trunk/ntl/doc/multithreading.txt?rev=20)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-14T16:41:30.053

**NTL**是线程安全的，你只需要以线程安全的方式编译它。在安装之前使用以下命令进行配置，它可以正常工作：

```
./configure NTL_THREADS=on NTL_GMP_LIP=on 
```

您需要安装[GMP](https://gmplib.org/)才能继续。

# jquery - JQuery添加淡入淡出而不是使用插件动画

> ID：12931231
> 
> 赞同：0
> 
> 时间：2012-10-17T09:29:54.927
> 
> 标签：jquery, jquery-plugins

我正在使用这个新闻自动收录器插件来显示列表中的内容。不幸的是，当我需要它来淡入淡出时，动画会使用某种类型的打字动画。

如何将 Fiddle 示例中使用的动画更改为淡入/淡出动画？

希望有人可以提供帮助。

代码：http: [//jsfiddle.net/bleachie/AvFMZ/5/](http://jsfiddle.net/bleachie/AvFMZ/5/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:10:13.797

您可以使用[bxslider](http://bxslider.com/)插件来实现淡入/淡出动画

演示：[http ://bxslider.com/examples/multiple-slideshows](http://bxslider.com/examples/multiple-slideshows)

# asp.net - 使用 IIS7 的 ASP.NET response.redirect

> ID：12931234
> 
> 赞同：3
> 
> 时间：2012-10-17T09:30:07.573
> 
> 标签：asp.net, ajax, response.redirect

我有一个在 Windows 2003 的 IIS6 上启动并运行的站点，以及一个在 XP 中的开发环境。一切正常。

我被迫在 Windows 7 中创建一个新的开发环境。

自从使用它后，我发现 Reponse.Redirect 不再有效......在某些情况下！

我有以下代码：

`Response.Redirect(Globals.NavigateURL( PortalSettings.ActiveTab.TabID ));`

它在 IIS6 上运行良好。

它在 IIS7.5 上的大多数站点中也可以正常工作。但是在某些页面中，它不是。

我查看了返回的标头，可以看到 Request 标头中有一个 GET 响应，这是它也应该重定向的正确页面，但事实并非如此！

在用于触发此重定向的按钮周围有一个 RadAjaxPanel，但在父控件中。不起作用的按钮位于单独的 ascx 控件中。

我从其他类似帖子中发现的 Web.Config 中有以下内容：

```
<system.webServer>
<modules>
  <add name="ScriptModule" preCondition="integratedMode" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/> 
```

和

```
<httpModules>
  <add name="ScriptModule" type="System.Web.Handlers.ScriptModule,  System.Web.Extensions, Version=1.0.61025.0, Culture=neutral,  PublicKeyToken=31bf3856ad364e35" /> 
```

（都有结束标签）

但这并没有帮助。

有人能想出什么办法让这些工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:47:27.623

你有没有尝试过

```
Response.Redirect(Globals.NavigateURL( PortalSettings.ActiveTab.TabID ), false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:58:38.857

这不是完美的解决方案，而是一种解决方法-

```
private void Redirect(string url)
{
    // Define the name and type of the client script on the page.
    String csName = "RedirectScript";
    Type csType = this.GetType();

    // Get a ClientScriptManager reference from the Page class.
    ClientScriptManager cs = Page.ClientScript;

    // Check to see if the client script is already registered.
    if (!cs.IsClientScriptBlockRegistered(csType, csName))
    {
      StringBuilder csText = new StringBuilder();
      csText.Append("<script type=\"text/javascript\"> ");
      csText.Append("window.location.href = {0} </", url);
      csText.Append("script>");
      cs.RegisterClientScriptBlock(csType, csName, csText.ToString());
    }
} 
```

从页面调用 -

```
Redirect(Globals.NavigateURL( PortalSettings.ActiveTab.TabID )); 
```

这将使用 JavaScript 让您的页面重定向。您可以在通用实用程序类中移动上述方法。

# c++ - SetWinEventHook 没有捕捉到任何事件

> ID：12931235
> 
> 赞同：3
> 
> 时间：2012-10-17T09:30:09.837
> 
> 标签：c++, winapi, event-handling, event-hooking

这是这个问题的后续：[Alt Tab 覆盖 Win32 标识符](https://stackoverflow.com/questions/12862213/alt-tab-overlay-win32-identificator)。

我尝试使用 Winuser API 中的 SetWinEventHook 函数来捕捉 alt-tab 开关菜单打开（和退出）的时刻。**但是，钩子不会捕获任何事件（例如最小化窗口），因此不会调用 HandleWinEvent**。

[以下代码受到MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373640(v=vs.85).aspx)上提供的代码的极大启发

```
#ifndef _WIN32_WINNT
    #define _WIN32_WINNT 0x0500
#endif

#ifndef WINVER
    #define WINVER 0x0501
#endif

#include "conio.h"
#include <windows.h>
#include <iostream>

// Global variable.
HWINEVENTHOOK g_hook;

// Prototype
void HandleWinEvent(HWINEVENTHOOK , DWORD , HWND ,
                         LONG , LONG ,
                         DWORD , DWORD );

// Initializes COM and sets up the event hook.
//
void InitializeMSAA()
{
    CoInitialize(NULL);
    g_hook = SetWinEventHook(
        EVENT_MIN ,EVENT_MAX,  // Range of events .
        NULL,                                          // Handle to DLL.
        HandleWinEvent,                                // The callback.
        0, 0,              // Process and thread IDs of interest (0 = all)
        WINEVENT_OUTOFCONTEXT ); // Flags.
}

// Unhooks the event and shuts down COM.
//
void ShutdownMSAA()
{
    UnhookWinEvent(g_hook);
    CoUninitialize();
}

// Callback function that handles events.
//
void HandleWinEvent(HWINEVENTHOOK hook, DWORD event, HWND hwnd,
                         LONG idObject, LONG idChild,
                         DWORD dwEventThread, DWORD dwmsEventTime)
{
    std::cout << std::hex << event ; // desperate attempt to see if any event is caught 

    if (event == EVENT_SYSTEM_SWITCHSTART)
    {
        std::cout << "Begin" ;
    }
    else if (event == EVENT_SYSTEM_SWITCHEND)
    {
        std::cout << "End ";
    }
}

int main()
{
    InitializeMSAA();
    while( getch()!= 'q' ){;}
    ShutdownMSAA();
    return 0;
} 
```

构建命令：

```
g++ -o alttab main.cpp -luser32 -lole32 
```

我正在使用 Windows XP 和 MinGW/GCC 编译器，版本 4.5。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T09:51:28.523

来自 MSDN：调用 SetWinEventHook 的客户端线程必须具有消息循环才能接收事件。您的主线程等待“q”按钮，而不运行消息循环。

# javascript - javascript中的按钮单击

> ID：12931236
> 
> 赞同：0
> 
> 时间：2012-10-17T09:30:12.070
> 
> 标签：javascript, asp.net

我的页面中有一个复选框

```
 <asp:CheckBox onclick="calc();" ID="chkfilteritem" runat="server" Text="Yes" /> 
```

和一个按钮

```
 <asp:Button ID="btnclick" runat="server" Text="." onclick="btnclick_Click" /> 
```

我也有一个 javascript

```
 <script type="text/javascript">
 function calc() {
    document.getElementById('<%=btnclick %>').click();
   }
 </script> 
```

我需要的是，当我选中或取消选中复选框时，我需要使用 javascript 在按钮上触发点击事件。但它不适用于我当前的 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:35:25.663

如果您使用的是 jQuery，请执行以下操作：

```
<asp:CheckBox CssClass="checkFilter" ID="chkfilteritem" runat="server" Text="Yes" />

<asp:Button CssClass="buttonClick" ID="btnclick" runat="server" Text="." onclick="btnclick_Click" />

<script type="text/javascript">
 $('.checkFilter').on('change', function() {
     if(this.checked) {
         $('.buttonClick').click();
     }
 }
</script> 
```

我会说你可以使用`ClientIDMode="Static"`，但我不确定你是否在可重复使用的控件中使用你的代码，这会使事情变得混乱。

您也可以沿着这条路线走（可读性要差得多，但它会起作用）：

```
<script type="text/javascript">
 $('#<%=chkfilteritem.ClientID %>').on('change', function() {
     if(this.checked) {
         $('#<%=btnclick.ClientID %>').click();
     }
 }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:36:54.503

如果您使用母版页，请尝试此操作

```
 document.getElementById('<%= btnclick.ClientID %>').click(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:37:51.773

如果使用 .NET 4+，您可以更改 ID 的输出

```
<asp:CheckBox onclick="calc();" ID="chkfilteritem" runat="server" Text="Yes" />

<asp:Button ID="btnclick" runat="server" Text="." OnClick="btnclick_Click" ClientIDMode="Static" />

<script type="text/javascript">
  function calc() {
    document.getElementById('<%=btnclick.ClientID %>').click();
  }
</script> 
```

click 事件现在应该触发。

复选框具有 HTML onclick 属性，而按钮具有 .NET OnClick 事件。

另一种方法是从复选框中删除 HTML onlclick，将 ClientIDMode="Static" 添加到复选框并将脚本更改为如下。

```
<script type="text/javascript">
  $(document).ready(function() {

    $("#chkfilteritem").click(function() {
      calc();
    });

  });

  function calc() {
    document.getElementById('<%=btnclick.ClientID %>').click();
  }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T10:26:19.943

您可以使用复选框的 OnCheckedChanged 事件然后检查。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-17T09:35:05.127

未测试，但试试这个：

```
<asp:CheckBox onclick="javascript:calc();" ID="chkfilteritem" runat="server" Text="Yes" /> 
```

# javascript - 从滑块显示隐藏的选项卡

> ID：12931237
> 
> 赞同：0
> 
> 时间：2012-10-17T09:30:12.587
> 
> 标签：javascript, jquery

我有一个带有更多选项卡的滑块，然后在主页上可见，所以我的想法是将它们放在溢出隐藏的 ul 集中。一旦最后一个选项卡处于活动状态并单击下一步，则不会显示下一个选项卡，而是显示幻灯片本身（在顶部）。

一旦最后一个可见选项卡处于活动状态（当前类）并单击下一步，应该会显示下一个隐藏的选项卡。基本上，您从看到选项卡 1 到 5.5 到选项卡 2 到 6.5。

由于您也可以单击选项卡本身来显示其内容，因此我需要 2 个功能，一个是单击箭头 prev 和 next 时（单击 prev 时选项卡应向后滚动，单击 next 隐藏的选项应变为可见）。

我试图使这两个功能（见下面的代码），但他们不工作..任何想法，这甚至可能吗？

演示：http: [//jsfiddle.net/epnDK/1/](http://jsfiddle.net/epnDK/1/)

1.  单击下一个和上一个箭头时的功能

    ```
    $('.coda-nav-left, .coda-nav-right').click(function(e) {
      if (class == 'coda-nav-left') {
        $('.coda ul li').remove('.coda ul li:last');
      } else {
        $('.coda ul li'). remove('.coda ul li:first');
      }
    }); 
    ```

2.  在当前标签之后显示下一个标签

    ```
    function current() {
      var $current = $('.coda-nav ul li a.current');
      if (current) {
        //show current in the center and 2 tabs before and after current
      }
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:37:06.857

我看到两个问题：

1.  您没有正确获得 CSS 类。

    ```
    if ($(this).hasClass('coda-nav-left')) { 
    ```

    您没有删除正确的元素。

    ```
    $('.coda ul').remove('li:last'); 
    ```

2.  我认为不是`current`但是`$current`。

# jquery - JQuery异步图片幻灯片预加载

> ID：12931238
> 
> 赞同：2
> 
> 时间：2012-10-17T09:30:27.090
> 
> 标签：jquery, asynchronous, callback, promise

我正在使用 JQuery 动画框架编写脚本。在这种情况下，我需要一系列不同的动画。当一个新动画开始时，我需要更改页面的背景图像。

动画框架（称为 JSTween）提供以下回调：

```
onStart: function () {},
onStop: function () {} 
```

我正在寻找以下伪代码的 JQuery 实现：

```
onStart: function () {
    load new background;
}

onStop: function () {
    // This animation has ended, about four seconds have passed
    on new background loaded: {
       // Change background
    }

    // Start new animation async
} 
```

我一直在寻找`$.when`和类似的工具，但我不知道如何正确使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-27T08:24:12.097

您应该实现几个类似`$.when`. 基本上，您注册一个在函数的运行时上下文中运行的`onStart`函数：

```
var background_callback;

var loadNewBackground = function() {
  background_callback();
}

var onBackgroundLoaded = function (callback) {
  background_callback = callback;
} 
```

您**编辑**的代码将是：

```
onStart: function () {
    // load new background;
    loadNewBackground();
}

onStop: function () {
    // This animation has ended, about four seconds have passed
    onBackgroundLoaded(function() {
       // Change background
    });

    // Start new animation async
} 
```

# layout - Twitter 引导程序：1 个侧边栏 1 个流畅的内容容器

> ID：12931243
> 
> 赞同：1
> 
> 时间：2012-10-17T09:30:44.080
> 
> 标签：layout, twitter-bootstrap

我想做一个 twitter-bootstrap 布局，左侧有一个侧边栏，屏幕的其余部分应该是动态的。

像这样的东西：

[http://wbpreview.com/previews/WB042R743/](http://wbpreview.com/previews/WB042R743/)

或这个：

[http://wbpreview.com/previews/WB001365H/main.html](http://wbpreview.com/previews/WB001365H/main.html)

（如果它要求登录：输入 demo:demo）

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:33:24.360

如果您查看第二个链接的 dom，您会看到：

```
<section class="container-fluid">
    <div class="row-fluid">
        <div class="span2"></div>
        <div class="span10"></div> 
```

流体类将宽度设置为视口的 100%。

查看twitter bootstrap的[文档](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)

**编辑**

在 html 中：

```
<div class="span10 content"> 
```

在 CSS 中：

```
.container-fluid span10.content { margin-left: 0; } 
```

但请记住，使用流体网格 twitter bootstrap 为所有跨度定义了所有边距和百分比值

```
.row-fluid [class*="span"] 
```

# jquery - 无法在 IE 中使用 jQuery 设置 CSS

> ID：12931245
> 
> 赞同：0
> 
> 时间：2012-10-17T09:30:46.670
> 
> 标签：jquery, html, css

这是jQuery代码：

```
$('.top:last-child').css({'color':'red'}); 
```

为了证明选择器有效，我尝试了：

```
$('.top:last-child').hide(); 
```

它正在工作。

这是html代码

```
<table class="topMenu" cellpadding="0" cellspacing="0"><tr><td class="top"  id="tm_active" >
    <a href="http://www.********/member.php"   class="top_link"><span class="down" style="font-weight:normal;">Startpagina</span>
    <!--[if gte IE 7]><!--></a><!--<![endif]-->
    <div style="position:relative;display:block;"></div>
</td><td class="top"  >
    <a href="http://www.******/"   class="top_link"><span class="down" style="font-weight:normal;">Mijn Profiel</span>
    <!--[if gte IE 7]><!--></a><!--<![endif]-->
    <div style="position:relative;display:block;"></div>
</td><td class="top"  >
    <a href="http://www.******/search.php?show=match"   class="top_link"><span class="down" >Matches</span>
    <!--[if gte IE 7]><!--></a><!--<![endif]-->
    <div style="position:relative;display:block;"></div>
</td><td class="top"  >
    <a href="http://www.*******/mail.php?mode=inbox"   class="top_link"><span class="down" style="font-weight:normal;">Berichten</span>
    <!--[if gte IE 7]><!--></a><!--<![endif]-->
    <div style="position:relative;display:block;"></div>
</td><td class="top"  >
    <a href="http://www.**********//"   class="top_link"><span class="down" >`</span>
    <!--[if gte IE 7]><!--></a><!--<![endif]-->
    <div style="position:relative;display:block;">  <!--[if lte IE 6]><table id="mmm"><tr><td><![endif]-->

    <!--[if lte IE 6]></td></tr></table></a><![endif]--></div>
</td></tr></table> 
```

它可以在 Firefox 和 Opera 上完美运行。 **问题**：仍然存在，但通过解决方法解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:44:48.980

并非所有版本的 ie 都支持 ":last-child"-selector。尝试改用“.last()”方法：

```
$('.top').last().css({'color':'red'}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:53:58.753

对于这个问题，您在 css 代码中使用并且不使用 jquery

```
.top:last-child{
  color:red;
} 
```

最好的祝福

# jquery - 可编辑表中的 jQuery 克隆行

> ID：12931248
> 
> 赞同：1
> 
> 时间：2012-10-17T09:31:00.683
> 
> 标签：jquery, clone

我的可编辑表中有几个问题。

我正在克隆这两个行，但克隆的行不能像原始行一样编辑。我需要它们可编辑来计算总金额。

如何克隆我的表格行以使其可编辑？

第二个问题，我正在努力将删除按钮放在本示例中^(（链接断开）)，而不是在克隆的任何行中放置添加按钮。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:45:14.220

我想您需要在插入新行后再次调用 .editable() 初始化方法，以便插件包含这些行。将方法调用放入一个函数中，并在文档准备好并添加一行后调用此函数。见小提琴[http://jsfiddle.net/WKaR9/4](http://jsfiddle.net/WKaR9/4)

# javascript - 在下拉列表中实现垂直滚动条

> ID：12931253
> 
> 赞同：0
> 
> 时间：2012-10-17T09:31:30.900
> 
> 标签：javascript, css, xslt

我的页面中有 3 个下拉菜单。当我从第一个下拉列表中选择数据时，它会填充第二个下拉列表。如果第二个下拉数据的字符数至少是第一个下拉数据的两倍，它会扩展页面，看起来很糟糕。我想在下拉列表中引入垂直滚动条，这样页面大小就不会扩大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:27:21.067

`$('select').attr('size', 5);`例如设置最大可见项目...如果它们更多...将出现滚动条...

# automation - 如何通过 Visual Studio Remote Debugger 2012 在远程 PC 上部署自定义文件

> ID：12931257
> 
> 赞同：5
> 
> 时间：2012-10-17T09:31:46.507
> 
> 标签：automation, visual-studio-2012, remote-debugging

如果您需要在该 PC 上部署许多文件，则在 Remote PC 上进行调试可能会很棘手。

首先您需要配置PC，即共享文件夹，配置安全性以便轻松地将文件从您的PC 复制到测试PC。

然后你需要一个部署脚本来实际复制文件。你需要以某种方式将目标 PC ip 发送给它。

在 Visual Studio 2012 中有部署步骤，然后工作室可以将项目的文件部署到远程 PC 上，但它似乎只适用于“简单”的情况，然后不需要复制不同文件夹上的文件或重命名它来开始调试。似乎新的远程调试器有新的隐藏 api 来复制文件。但它在 Visual Studio 之外不可用。

如果有办法使用 Visual Studio Deploy 功能来实现“一键部署/调试”过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T06:27:12.177

问题的答案在某种程度上取决于您要部署的项目类型。例如，在项目属性->配置属性->调试->远程 Windows 调试器下的 C++ 项目系统中，您可以指定部署目录和要部署的附加文件。

如果你想实现自己的部署系统，那么答案是肯定的，你可以编写一个 Visual Studio 扩展，使用部署 API 来复制文件并执行任何你需要的东西，比如远程机器上的配置脚本。

# android - 如何将男性语音数据文件添加到 pico tts 引擎中？

> ID：12931259
> 
> 赞同：1
> 
> 时间：2012-10-17T09:31:56.920
> 
> 标签：android, voice, text-to-speech

如何将男性语音数据文件添加到 android 的 pico tts 引擎中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-01T13:59:06.913

Android 提供了一些语言的很多声音，并且指定了它们是男性还是女性。

所以你可以下载谷歌提供的男性声音。

> 1.  语言和输入
> 2.  文字转语音选项
> 3.  在首选 tts 引擎点击设置；
> 4.  安装语音数据；
> 5.  检查是否有适合您首选语言的男性；

然后你可以在你的应用程序中设置声音。您可以使用 getVoices() 来获取所有可用声音的集合，并且您可以通过检查其 ID 来设置您想要的声音。

# r - 拆分并比较拆分后的元素

> ID：12931262
> 
> 赞同：-1
> 
> 时间：2012-10-17T09:32:21.760
> 
> 标签：r

我有一个 data.frame（9 列和 5 行），看起来像：

> ```
>  List    Count 
>   R472    1   RAP1GDS1    AKT1    ERC1    ZRSR2   SMAD4   ASXL1   NA
>   R47     1   TCF12       DICER1  OLIG2   GATA3   CLP1    SMAD4   NA
>   R844    2   RNF213      LHFP    MLLT6   TTL    SMARCA4   AKT2   TSC2
>   R845    2   MLL         MYH9    FBXW7   VTI1A   CLP1     NF2    PIK3CA
>   R975    2   TCF12       ELK4    PDE4DIP FANCG   ZRSR2   FAM123B FCRL4 
> ```

我想根据“计数”列将数据分组，然后比较相应的元素以找出差异（并注释它们）和相似之处。例如：所需的输出：

> ```
>  Count1      Common   How_many_similar   Differences   How_many_different
>              SMAD4           1            RAP1GDS1             10  
>                                             AKT1
>                                             ERC1
>                                             .... 
> ```

谁能帮我？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:48:27.717

缺少有关如何构建输入数据的详细信息（`dput`那里会很棒！），很难提供准确的信息。毕竟，数据框不允许元素是列表，也不允许行具有不同的列数。所以很难说你是如​​何按数量将输入分成块的。

为了进行比较，我建议您将用于比较的所有数据转换为一个因子，然后使用`table`该因子来计算每个元素在给定向量中出现的次数。这意味着您必须简单地连接行，并且任何将单个组的行作为单个向量提供的数据结构都非常适合于此。

# android - 来自 ruby 的超链接在 Android 浏览器上不起作用

> ID：12931266
> 
> 赞同：1
> 
> 时间：2012-10-17T09:32:29.090
> 
> 标签：android, ruby-on-rails, ruby, hyperlink

我们开发了一个使用 ruby​​ on rails 的站点。它从网站向用户发送一些邮件以激活他们的帐户、忘记密码等。

当我们从 PC 或笔记本电脑获取链接时，它工作正常。但是当我们从 Android 手机或平板电脑上获取链接时，它给出了一个错误

> “**我们很抱歉，但出了点问题**”。

# tabs - Facebook 页面选项卡应用程序对于被授权为页面所有者的人不可见

> ID：12931268
> 
> 赞同：1
> 
> 时间：2012-10-17T09:32:35.917
> 
> 标签：tabs, admin, facebook-page, owner

我有一个带有应用程序所在选项卡的 FB 页面。游客们看得很清楚。我可以看到它，但就在我授权为页面所有者之前。在那之后，我看到一个没有加载 iframe 的空选项卡。我检查了一个页面代码，根本没有 iframe。

怎么做才看得见？有任何想法吗？

提前致谢。

# package - 如何在我自己的程序中打包 Tcl 库？

> ID：12931270
> 
> 赞同：2
> 
> 时间：2012-10-17T09:32:41.800
> 
> 标签：package, tcl, portability, init

在我的c++程序中，我使用了Tcl库并链接了libtcl8.5.so，但是目标主机没有tcl8.5，所以我复制了libtcl8.5.so和tcl8.5目录，其中包含init.tcl，并将环境变量 TCLLIBPATH 设置为 path/to/copied/tcl8.5，但是当我的程序调用 Tcl_Init 时，它失败并说“包未知”。

似乎复制的 tcl8.5/ 无法正确初始化。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:45:39.383

如果您更改脚本库目录的位置（`tcl8.5/`在您的情况下），您需要告诉 Tcl 的共享库部分它在哪里。您可以使用`TCL_LIBRARY`环境变量执行此操作，如果设置了该变量，则该变量应包含作为该目录位置的*绝对*路径（从技术上讲，是包含 的目录`init.tcl`）。在 Tcl 的正常安装中，该目录的正确位置被直接烘焙到共享库中，但是当您移动内容时（或者当您运行 Tcl 时`make test`），环境变量允许您覆盖。

您可能希望研究替代包装机制；[tcl](/questions/tagged/tcl "显示标记为“tcl”的问题")标签中已经有一些关于这个问题的问题（但通常最喜欢的——starkit——可能不适合你的情况，因为程序主要是 C++）。

# c# - WPF 中的进度条

> ID：12931274
> 
> 赞同：-1
> 
> 时间：2012-10-17T09:32:49.870
> 
> 标签：c#, .net, wpf, progress-bar

我正在开发一个执行以下操作的工具：

*   从存储库下载 zip 文件
*   解压缩 zip 文件。
*   从提取的内容中运行 5-6 个 exe/bat 文件作为单独的`Process`.

我需要显示一个进度条，其中包含这些操作的大致完成百分比。最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:57:00.660

你用什么来实现每一点？哪些图书馆？

*   如果你使用一些外部的编译库，你可以捕获输出并解析它：

    ```
    var proc = new Process {
        StartInfo = new ProcessStartInfo {
            FileName = "program.exe",
            Arguments = "command line arguments to your executable",
            UseShellExecute = false,
            RedirectStandardOutput = true,
            CreateNoWindow = true
        }
    }; 
    ```

并开始这个过程：

```
proc.Start();
while (!proc.StandardOutput.EndOfStream) {
    string line = proc.StandardOutput.ReadLine();
    // parse your output
} 
```

*   当你下载一个文件时，你可以只使用一个简单的模式：

> bytes_already_downloaded/bytes_total * 100 = download_progress_in_%

*   如果你使用一些类（你有源代码），你可以创建一个回调动作：

    ```
    public void DoSomethingMethod(Action<int> progressCallback)
    {
        while(true)
        {
            // do something here
            // return the progress
            int progress = stuff_done / stuff_total * 100;
            progressCallback(progress);
        }
    } 
    ```

以及如何使用它？

```
MyClass.DoSomethingMethod(delegate(int i) { progressBar.Progress = i; }); 
```

要不就：

```
MyClass.DoSomethingMethod(i => progressBar.Progress = i); 
```

如果你的意思是别的，你可以在评论中指定它。我会尽力回答：）

# vb.net - Websocket 服务器 VB.NET - 数据帧

> ID：12931276
> 
> 赞同：2
> 
> 时间：2012-10-17T09:32:53.413
> 
> 标签：vb.net, html, websocket

我正在尝试使用 VB.NET 创建最简单的 WebSocket 服务器。我设法实现握手，但握手后无法发送消息。以下是我的代码：

```
Dim serverTcp As TcpListener
Dim serverThread As Thread

Sub Main()
    '' Start server
    serverThread = New Thread(AddressOf serverProc)
    serverThread.Start()
End Sub

Private Sub serverProc()
    '' Listen to port 8181
    serverTcp = New TcpListener(8181)
    serverTcp.Start()

    Console.WriteLine("Listen to port 8181 ...")

    '' Accept any connection
    While (True)
        Dim curSocket As Socket = serverTcp.AcceptSocket()
        Dim thread As New Thread(AddressOf clientProc)
        thread.Start(curSocket)
    End While
End Sub

Private Sub clientProc(ByVal sck As Socket)
    Dim netStream As New NetworkStream(sck)
    Dim netReader As New IO.StreamReader(netStream)
    Dim netWriter As New IO.StreamWriter(netStream)

    Dim key As String = ""

    Console.WriteLine("Accept new connection ...")

    '' Reading handshake message
    While (True)
        Dim line As String = netReader.ReadLine()
        If line.Length = 0 Then
            Exit While
        End If

        If (line.StartsWith("Sec-WebSocket-Key: ")) Then
            key = line.Split(":")(1).Trim()
        End If

        Console.WriteLine("Data: " & line)
    End While

    '' Calculate accept-key
    key += "258EAFA5-E914-47DA-95CA-C5AB0DC85B11"
    key = getSHA1Hash(key)

    '' Response handshake message
    Dim response As String
    response = "HTTP/1.1 101 Switching Protocols" & vbCrLf
    response &= "Upgrade: websocket" & vbCrLf
    response &= "Connection: Upgrade" & vbCrLf
    response &= "Sec-WebSocket-Accept: " & key & vbCrLf & vbCrLf
    netWriter.Write(response)
    netWriter.Flush()

    '' Sending Hello World message
    Dim message As String = "Hello World"
    Dim messageByte() As Byte = System.Text.Encoding.UTF8.GetBytes(message)
    Dim startByte() As Byte = {&H0}
    Dim endByte() As Byte = {&HFF}

    sck.Send(startByte, 1, 0)
    sck.Send(messageByte)
    sck.Send(endByte, 1, 0)
End Sub

Function getSHA1Hash(ByVal strToHash As String) As String
    Dim sha1Obj As New Security.Cryptography.SHA1CryptoServiceProvider
    Dim bytesToHash() As Byte = System.Text.Encoding.ASCII.GetBytes(strToHash)
    Dim result As String

    bytesToHash = sha1Obj.ComputeHash(bytesToHash)
    result = Convert.ToBase64String(bytesToHash)

    Return result
End Function 
```

标准说我需要发送`0x00`字节，然后是 UTF8 的字节，并以`0xFF`字节结束。我已经按照它说的做了，但我的 HTML 客户端无法接收到该消息。

以下是我的 HTML5 代码：

```
<script>
if('WebSocket' in window){
  connect('ws://localhost:8181/service');
}

function connect(host) {
  var ws = new WebSocket(host);
  ws.onopen = function () {
    alert('connected');
  };

  ws.onmessage = function (evt) {  
    alert('reveived data:'+evt.data);
  };

  ws.onclose = function () {
    alert('socket closed');
  };
};
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:50:42.797

> 标准说我需要发送 0x00 字节，然后是 UTF8 字节，并以 0xFF 字节结束

真的吗？̶你从哪里弄来的？̶我不认为有这样的事情在说明书。

[Simonic](https://www.rfc-editor.org/rfc/rfc6455) statet in his comment that starting with 0x00 and ending with 0xFF was used in the deprecated Hixie-76 variant of the protocol.

Have a look at the actual [specification (RFC 6455)](https://www.rfc-editor.org/rfc/rfc6455).

* * *

For better understanding, have a look at [this](https://stackoverflow.com/a/8125509/142637) great answer:

> The frames you're sending need to be formatted according to the WebSocket framing format. For sending messages, this format is as follows:
> 
> *   one byte which contains the type of data (and some additional info which is out of scope for a trivial server)
> *   one byte which contains the length
> *   either two or eight bytes if the length does not fit in the second byte (the second byte is then a code saying how many bytes are used for the length)
> *   the actual (raw) data

* * *

I translated [this](https://stackoverflow.com/a/12471677/142637) java implementation for you (in a quick'n'dirty way, there may be some errors) to VB.Net, and it's working:

```
Sub SendMessage(sck As Socket, message as String)
    Dim  rawData =  System.Text.Encoding.UTF8.GetBytes(message)

    Dim frameCount = 0
    Dim frame(10) As byte

    frame(0) = cbyte(129)

    if rawData.length <= 125 Then
        frame(1) = CByte( rawData.length)
        frameCount = 2
    else if rawData.length >= 126 AndAlso rawData.length <= 65535
        frame(1) = CByte( 126)
        Dim len = cbyte(rawData.length)
        frame(2) = CByte(((len >> 8 ) & CByte(255)))
        frame(3) = CByte((len & CByte(255)))
        frameCount = 4
    else
        frame(1) = CByte( 127)
        Dim len = CByte( rawData.length)
        frame(2) = CByte(((len >> 56 ) & CByte(255)))
        frame(3) = CByte(((len >> 48 ) & CByte(255)))
        frame(4) = CByte(((len >> 40 ) & CByte(255)))
        frame(5) = CByte(((len >> 32 ) & CByte(255)))
        frame(6) = CByte(((len >> 24 ) & CByte(255)))
        frame(7) = CByte(((len >> 16 ) & CByte(255)))
        frame(8) = CByte(((len >> 8 ) & CByte(255)))
        frame(9) = CByte((len & CByte(255)))
        frameCount = 10
    End If

    Dim bLength = frameCount + rawData.length
    Console.WriteLine(frameCount)
    Console.WriteLine(rawData.length)
    Dim reply(bLength+1) as byte

    Dim bLim = 0
    for i=0 to frameCount-1
        Console.WriteLine(blim)
        reply(bLim) = frame(i)
        bLim += 1
    Next

    for i=0 to rawData.length-1
        Console.WriteLine(blim)
        reply(bLim) = rawData(i)
        bLim += 1
    Next

    sck.Send(reply)
End Sub 
```

You can use it in your `clientProc`:

```
'' Sending Hello World message
SendMessage(sck, "Hello World") 
```

![enter image description here](../Images/08f0421cc847972e267558677fa8581b.png)

# python - 如何找到双重条目并将它们变异为一个键

> ID：12931277
> 
> 赞同：0
> 
> 时间：2012-10-17T09:32:52.633
> 
> 标签：python

我的脚本是这样的：

```
import csv
with open('lees.csv','rU') as naver:

    reader = csv.DictReader (naver)
    for alist in reader:
        name = alist["naam"]
        polisnumber = alist["polisnr"]
        riskadr = alist["risico adr"]
        insurencecode = alist["branchecode"]
        relationnumber = alist["rel"]
        header = alist["aanhef"]
        tav = alist["tav"]
        thelist = [name,riskadr,polisnumber,
                  relationnumber,insurencecode,header,tav] 
```

脚本的输出是：

```
['Cautus  B.V.', 'plein 92', '1129008', '10', 'AVB', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa']
['Cautus  B.V.', 'Wei 9-11', '1019123', '10', 'AVB', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa']
['Cautus  B.V.', 'plein 92', '1129008', '10', 'BEDR', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa']
['Cautus  B.V.', 'Wei 9-11', '1019123', '10', 'BEDR', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa']
['De company', 'tiellaan 42', 'KD0022232', '13', 'AVB', 'Geachte heer Tigch', 'De heer I. Tigch']
['De company', 'tiellaan 42', 'KD0022232', '13', 'DAS', 'Geachte heer Tigch', 'De heer I. Tigch']
['Slever ', 'klopt 42', 'KD2220115', '17', 'AVB', 'Geachte heer Slever', 'De heer T.Slever'] 
```

如您所见，我从 .csv 文件创建了一个目录。

我的问题是我需要制作一个脚本来过滤`riskadr`（`wei 9-11`/ `plein 92`/ ）中的重复项，并将第二个重复`tiellaan 42`项的`insurencecode`（`AVB`/ `BEDR`/`DAS`等）`riskadr`与其他条目一起添加到新列表中的第一个。

所以现在我们有 2 个条目具有相同的风险 adr，如下所示：

```
['De company', 'tiellaan 42', 'KD0022232', '13', 'AVB', 'Geachte heer Tigch', 'De heer I. Tigch']
['De company', 'tiellaan 42', 'KD0022232', '13', 'DAS', 'Geachte heer Tigch', 'De heer I. Tigch'] 
```

但我想要一个 scipt 从这 2 个条目中创建 1 个条目，并将保险类型添加到第一个 1 中，如下所示（AVB/DAS）：

```
['De company', 'tiellaan 42', 'KD0022232', '13', 'AVB','DAS', 'Geachte heer Tigch', 'De heer I. Tigch'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:05:28.933

您应该能够使用[itertools.groupby](http://docs.python.org/library/itertools.html#itertools.groupby)实现您的目标：

```
from itertools import groupby

# define input
l = [['Cautus  B.V.', 'plein 92', '1129008', '10', 'AVB', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa'],
     ['Cautus  B.V.', 'Wei 9-11', '1019123', '10', 'AVB', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa'],
     ['Cautus  B.V.', 'plein 92', '1129008', '10', 'BEDR', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa'],
     ['Cautus  B.V.', 'Wei 9-11', '1019123', '10', 'BEDR', 'Geachte mevrouw Daa', 'Mevrouw C.P. Daa'],
     ['De company', 'tiellaan 42', 'KD0022232', '13', 'AVB', 'Geachte heer Tigch', 'De heer I. Tigch'],
     ['De company', 'tiellaan 42', 'KD0022232', '13', 'DAS', 'Geachte heer Tigch', 'De heer I. Tigch'],
     ['Slever ', 'klopt 42', 'KD2220115', '17', 'AVB', 'Geachte heer Slever', 'De heer T.Slever']]

# remove clutter
l_clean = [(x[1], x[4]) for x in l]

# sort (groupby requires input to be sorted)
l_sorted = sorted(l_clean)

# group by first column
l_final = [(k, zip(*v)[1]) for k,v in groupby(l_sorted, key=lambda x:x[0])]

# print output
for k,v in l_final: 
    print k, list(v) 
```

输出是：

```
Wei 9-11 ['AVB', 'BEDR']
klopt 42 ['AVB']
plein 92 ['AVB', 'BEDR']
tiellaan 42 ['AVB', 'DAS'] 
```

请注意，您将需要调整`key`用于排序和分组的函数，以便在输入不同于`l_clean`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:02:45.380

你可能需要这些方面的东西。有一个内存数组（ultimatelist），您可以在其中检查类似列表的存在。如果找到附加保险代码

```
def search(item, array):
    for i in range(len(array)):
        # if first four elements and last two elements are identical
        if array[i][:4] == item[0:4] and array[i][-2:] == item[-2:]:
            return i
    return -1

index = search(thelist, ultimatelist):
if index > 0:
    ultimatelist[index] = ultimatelist[index][:4] + thelist[4] + ultimatelist[index][4:] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:47:59.247

```
>>> a = [
... ('De company', 'tiellaan 42', 'KD0022232', '13', 'DAS', 'Geachte heer Tigch', 'De heer I. Tigch'),
... ('De company', 'tiellaan 42', 'KD0022232', '13', 'DAS', 'Geachte heer Tigch', 'De heer I. Tigch'),
... ]
>>> 
>>> set(a)
set([('De company', 'tiellaan 42', 'KD0022232', '13', 'DAS', 'Geachte heer Tigch', 'De heer I. Tigch')])
>>> 
```

将它们保存为元组而不是列表，并将它们添加到集合中......如果这是你需要的

# java - 如何在 Cucumber 中组织规范定义？

> ID：12931281
> 
> 赞同：16
> 
> 时间：2012-10-17T09:33:02.467
> 
> 标签：java, cucumber, acceptance-testing, cucumber-jvm, cucumber-junit

我们正在考虑在我们的项目中使用**Cucumber**进行验收测试。

当我们`scenario`在 Cucumber中编写 a 时`feature`，我们编写了`Given`,`When`和`Then`语句的列表。

当我们使用[cucumber-jvm](https://github.com/cucumber/cucumber-jvm)项目时`Given`，`When`和`Then`语句与（JUnit）类中的 Java 方法相关。

我想知道项目结构中与`Given`//相关的代码最好的组织是什么。我主要关心的是维护一个大项目的黄瓜测试，其中场景的数量非常重要，尤其是关于功能之间共享的项目。`When``Then`

我可以看到至少两种主要方法：

1.  每个特性都与它自己的 JUnit 类相关。所以如果我有一个`foo/bar/baz.feature`黄瓜文件，我会找到相关的`foo.bar.Baz`JUnit 类，它有足够`@Given`的`@When`和`@Then`注释的方法。

2.  `@Given`将,`@When`和方法分离`@Then`到“主题”类和包中。例如，如果在我的黄瓜场景中我有一个语句`Given user "foo" is logged`，那么带`@Given("^user \"([^\"]*)\" is logged$")`注释的方法将位于`foo.user.User`类方法中，但可能`@When`稍后在同一黄瓜场景中使用的方法将位于不同的 Java 类和包中（比如说`foo.car.RentCar`） .

对我来说，第一种方法似乎很好，因为我可以轻松地处理我的黄瓜特性和我的 Java 代码之间的关系。但缺点是我可以有很多冗余或代码重复。此外，可能很难找到可能的现有`@Given`方法，以避免重新创建它（IDE​​ 可以提供帮助，但这里我们使用的是 Eclipse，它似乎没有给出现有`Given`语句的列表？）。

当您在多个黄瓜功能之间共享条件时，另一种方法*似乎*更好`Given`，因此我想避免代码重复。这里的缺点是很难在`@Given`Java 方法和`Given`cucumber 语句之间建立联系（也许，IDE 可以提供帮助？）。

我对黄瓜很陌生，所以也许我的问题不是一个好问题，随着时间和经验，结构将是不言而喻的，但我想得到关于它的使用的良好反馈......

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T13:42:18.507

I would suggest grouping your code according to the objects it refers to, similar to option #2 you presented in your question. The reasons being:

*   Structuring your code based on how and where it's being used is a big no-no. It's actually creating coupling between your feature files and your code.
    Imagine such a thing in your product's code- the `SendEmail()` function wouldn't be in a class called `NewEmailScreenCommands`, would it? It would be in `EmailActions` or some such.
    So the same applies here; structure your code according to what it does, and not who uses it.

*   The first approach would make it difficult to re-organize your feature files; You'd have to change your code files whenever you change your feature files.

*   Keeping code grouped by theme makes DRYing it much easier; you know exactly where all the code dealing with the `user` entity is, so it's easier for you to reuse it.

On our project we use that approach (i.e `BlogPostStepDefinitions` class), with further separating the code, if the class gets too large, to types of steps (i.e `BlogPostGivenStepDefinitions`).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:09:36.933

我们还开始使用 Cucumber-JVM 进行验收测试，并且在组织代码方面遇到了类似的问题。我们选择为每个功能设置 1 个步骤定义类。目前这很好，因为我们正在测试的功能不是很复杂，也不是很独立，我们的功能几乎没有重叠。

我认为您提到的第二种方法会更好，但是将几个不同的步骤定义类绑定到一个场景中通常具有挑战性。我认为一旦您开始添加更多功能并正常重构，最佳项目结构将变得更加清晰。

同时这里有一个黄瓜的 Eclipse 插件，

[https://github.com/matthewpietal/Eclipse-Plugin-for-Cucumber](https://github.com/matthewpietal/Eclipse-Plugin-for-Cucumber)

在编写功能时，它具有语法突出显示以及现有可用步骤的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T09:04:48.910

在我参与的当前项目中，我们问自己同样的问题。

在摆弄了一些可能性之后，我们选择的是您公开的两种解决方案的混合。

*   在以主题为中心的通用步骤类中重新组合步骤
    *   应用程序启动步骤
    *   安全检查步骤
    *   [在此处放置随机功能关注点] 步骤
*   以及场景类别（在某些情况下甚至是功能）特定步骤

这是为了同时对分解代码进行分组，这些分解代码很容易识别它的行踪、行踪和诸如此类。然而，它允许不要用过于具体的代码混淆那些常见的类。

所有这些类之间的接线都由弹簧处理（一旦你掌握了黄瓜弹簧，它就会做得很好）。

# javascript - 删除方括号内的多余空格

> ID：12931284
> 
> 赞同：0
> 
> 时间：2012-10-17T09:33:21.870
> 
> 标签：javascript, jquery, regex

[1]：http: [//jsfiddle.net/uZRQt/1/](http://jsfiddle.net/uZRQt/1/)

这是可用于删除方括号内的所有 html 标记的链接，但应在方括号内包含 () 圆括号。

现在可以修改正则表达式以删除所有 html 标签，并且应该删除空格（&nbps），但应该包括圆括号内的内容：-

例如 ：-

```
 '<table style="height: 1000px; ; width: 500px;" border="1"> <tbody> <tr> <td>[<span>Assignment name</span>]</td> <td>[<span>&nbsp;Total No of staff-months of(hdhdhdh) the assignment</span>]</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> </tbody> </table>' 
```

应该输出为

```
 '<table style="height: 1000px; ; width: 500px;" border="1"> <tbody> <tr> <td>[Assignment name]</td> <td>[Total No of staff-months of(hdhdhdh) the assignment]</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> </tbody> </table>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:04:36.127

我将主字符串的单引号更改为[http://jsfiddle.net/uZRQt/1/](http://jsfiddle.net/uZRQt/1/)中的单引号，并且警报有效并返回您所询问的内容。但这就是你想要的结果吗？我没有完全理解你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:29:58.343

> 可以修改正则表达式以删除所有html标签，并且应该删除空格（&nbps），但应该包括圆括号内的内容：-

检查这个删除所有标签和  

```
regex:(?<=\[.*) (<[/]?[^>]*?>|&nbsp;)(?=.*\]) 
```

# visual-studio-2010 - 用户选择安装文件夹后运行条件检查

> ID：12931293
> 
> 赞同：1
> 
> 时间：2012-10-17T09:33:45.343
> 
> 标签：visual-studio-2010, visual-studio, windows-installer, setup-deployment

我已经为该应用程序创建了一个 winforms 应用程序和一个设置和部署项目（VS 2010）。

我只需要这个：

当用户运行 msi 时，在他选择安装文件夹后，我想检查应用程序的主要可执行文件是否已存在于该文件夹中。在这种情况下，我想中断安装并提示用户卸载现有应用程序或选择其他文件夹。

如果可能，我希望不使用任何自定义安装程序操作。起初，启动条件（带有文件搜索）似乎是正确的方法，但似乎启动条件（因为它们是“启动”）在 msi 执行开始时运行，而不是在文件夹选择之后运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:48:49.987

Visual Studio 安装和部署项目不支持这种类型的创作。这是 Microsoft 从 Visual Studio 2012 中删除该项目类型的众多原因之一。

使用此工具执行此操作的唯一方法是构建一个 MSI，然后使用 ORCA 创建一个转换，创作验证自定义操作并将其作为门控事件安排到 UI 中。然后，您可以编写一个构建后脚本，以在每次构建时将转换应用于 MSI。

非常先进的东西，坦率地说不值得努力。切换到支持执行此操作的工具（例如 Windows Installer XML (FOSS) 或 InstallShield 2012 Professional）会更有益。($$)

# php - PHP文件扩展名问题

> ID：12931296
> 
> 赞同：0
> 
> 时间：2012-10-17T09:33:55.800
> 
> 标签：php, file, extension-methods

> **可能重复：**
> [如何在 PHP 中提取文件扩展名？](https://stackoverflow.com/questions/173868/how-to-extract-a-file-extension-in-php)

我们如何使用任何 php 函数获取文件扩展名？

php.ini 中是否有一些内置函数。我正在使用一些爆炸功能，但任何其他功能都存在

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:35:35.547

您可以[`pathinfo`](http://php.net/manual/en/function.pathinfo.php)为此使用：

```
echo pathinfo("foo.txt", PATHINFO_EXTENSION); 
```

但是自己滚动`strrpos`也不难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:36:12.740

是的你可以 .......

只需使用以下代码.......

将文件路径传递给此 PHP 函数并获取扩展名。

```
    功能扩展（$路径）{
      $qpos = strpos($path, "?");

       if ($qpos!==false) $path = substr($path, 0, $qpos);

        $extension = pathinfo($path, PATHINFO_EXTENSION);

        返回 $extension;
       }

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:36:12.957

是的，使用该[`Pathinfo()`](http://www.php.net/manual/en/function.pathinfo.php)功能。

```
<?php
    $path_parts = pathinfo('/www/htdocs/inc/lib.inc.php');
     echo $path_parts['dirname'], "\n";
     echo $path_parts['basename'], "\n";
     echo $path_parts['extension'], "\n";
     echo $path_parts['filename'], "\n"; // since PHP 5.2.0
?> 
```

上面的示例将输出：

```
/www/htdocs/inc
lib.inc.php
php //your extension
lib.inc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T09:37:00.623

这是我用来获取文件扩展名的代码：

```
$filename = '/some/path/file.txt';
$extension = strtolower(substr(strrchr($filename, '.'), 1)); 
```

您可以将它包装在您的`Utils`班级或其他东西中；）

# jboss - LogNotificationListener 在 Jboss 启动时需要一些时间

> ID：12931298
> 
> 赞同：1
> 
> 时间：2012-10-17T09:34:00.183
> 
> 标签：jboss, jboss5.x

当我启动我的 Jboss 服务器 (5.1) 时，我在日志中有以下行：

```
[LogNotificationListener] Adding notification listener for logging
mbean "jboss.system:service=Logging,type=Log4jService" to server
org.jboss.mx.server.MBeanServerImpl@1bfefb[ defaultDomain='jboss' ] 
```

此行需要 30 秒才能继续启动。

我不知道这一行是做什么的（当然是这一行后面的代码）。

为什么要花很长时间，它有什么作用？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:32:56.130

启用调试日志记录，您将看到发生了什么。添加到启动参数

```
-Djboss.server.log.threshold=DEBUG 
```

你会看到它：

```
jboss-as/server/${profile}/log/server.log 
```

或更改配置以在控制台中查看。配置文件在这里：

```
jboss-as/server/${profile}/conf/jboss-log4j.xml 
```

# blogs - 如何更改富文本编辑器中存在的图像源上下文

> ID：12931300
> 
> 赞同：2
> 
> 时间：2012-10-17T09:34:02.827
> 
> 标签：blogs, image, cdn, rich-text-editor

我正在开发一个博客应用程序。最初，我希望所有内容都托管在单个 Tomcat 服务器上，并且仅通过 tomcat 提供图像。

我面临的问题是在保存富文本编辑器图像源的内容时与应用程序上下文一起保存在数据库中，例如，

```
<img src="/application-context/image/abc.jpg">; 
```

因此，如果将来我想单独使用任何 cdn 或图像服务器，我应该如何设计应用程序以便我能够仅通过属性配置来更改图像标签。下面是我想要的

`<img src="http://www.myimageserver.com/image/abc.jpg">`;

谢谢

# java - 如何动态生成词法分析器和解析器（在运行时）？

> ID：12931301
> 
> 赞同：2
> 
> 时间：2012-10-17T09:34:06.300
> 
> 标签：java, class, antlr, grammar, on-the-fly

我确实找到了我的问题的答案：Barts 的[答案](https://stackoverflow.com/a/5802586/1422486)正是我需要的原因，但它不起作用（见下文）。

请有人可以给我一个工作示例或告诉我实施 Barts[答案](https://stackoverflow.com/a/5802586/1422486)的问题所在吗？

这是我得到的另一个答案，我从“第 4 部分”中得到以下错误

```
Lexer lexer = (Lexer)Class.forName(grammarName + "Lexer").newInstance(); 
```

我有完整的 antlr3.4 和 JDK 库。我创建了它，`package createclass;`但我发现答案很奇怪，因为要创建的类没有包？？？所以我尝试添加到字符串：

```
"@lexer::header {\n" +
"   package createclass;\n" +
"}        \n" +
"@parser::header {\n" +
"   package createclass;\n" +
"}\n" + 
```

但仍然没有任何变化。

这是输出：

```
debug:
Exception in thread "main" java.lang.ClassNotFoundException: TLexer
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at createclass.Createclass.main(Createclass.java:61)
Java Result: 1
BUILD SUCCESSFUL (total time: 31 seconds) 
```

给出的示例代码是：

```
import java.io.*;
import javax.tools.*;
import java.lang.reflect.*;
import org.antlr.runtime.*;
import org.antlr.Tool;

public class Main {

    public static void main(String[] args) throws Exception {

        // The grammar which echos the parsed characters to theconsole,
        // skipping any white space chars.
        final String grammar =
                "grammar T;                                                  \n" +
                "                                                            \n" +
                "parse                                                       \n" +
                "  :  (ANY {System.out.println(\"ANY=\" + $ANY.text);})* EOF \n" +
                "  ;                                                         \n" +
                "                                                            \n" +
                "SPACE                                                       \n" +
                "  :  (' ' | '\\t' | '\\r' | '\\n') {skip();}                \n" +
                "  ;                                                         \n" +
                "                                                            \n" +
                "ANY                                                         \n" +
                "  :  .                                                      \n" +
                "  ;                                                           ";
        final String grammarName = "T";
        final String entryPoint = "parse";

        // 1 - Write the `.g` grammar file to disk.
        Writer out = new BufferedWriter(new FileWriter(new File(grammarName + ".g")));
        out.write(grammar);
        out.close();

        // 2 - Generate the lexer and parser.
        Tool tool = new Tool(new String[]{grammarName + ".g"});
        tool.process();

        // 3 - Compile the lexer and parser.
        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        compiler.run(null, System.out, System.err, "-sourcepath", "", grammarName + "Lexer.java");
        compiler.run(null, System.out, System.err, "-sourcepath", "", grammarName + "Parser.java");

        // 4 - Parse the command line parameter using the dynamically created lexer and 
        //     parser with a bit of reflection Voodoo :)
        Lexer lexer = (Lexer)Class.forName(grammarName + "Lexer").newInstance();
        lexer.setCharStream(new ANTLRStringStream(args[0]));
        CommonTokenStream tokens = new CommonTokenStream(lexer);
        Class<?> parserClass = Class.forName(grammarName + "Parser");
        Constructor parserCTor = parserClass.getConstructor(TokenStream.class);
        Parser parser = (Parser)parserCTor.newInstance(tokens);
        Method entryPointMethod = parserClass.getMethod(entryPoint);
        entryPointMethod.invoke(parser);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:33:16.720

我的猜测是您为此使用了 IDE，并且没有正确设置类路径。我的答案中的演示有效（也使用 v3.4）。这是我刚刚做的：

我将文件复制到`Main.java`一个目录中（`~/Temp/demo`在我的例子中是 ）并在这个目录中打开了一个 shell 并执行了以下操作：

```
bart@hades:~/Temp/demo$ java -version
> java 版本“1.6.0_24”
> OpenJDK 运行环境 (IcedTea6 1.11.4) (6b24-1.11.4-1ubuntu0.12.04.1)
> OpenJDK 64-Bit Server VM（build 20.0-b12，混合模式）

bart@hades:~/Temp/demo$ wget http://www.antlr.org/download/antlr-3.4-complete.jar
> --2012-10-17 19:26:01-- http://www.antlr.org/download/antlr-3.4-complete.jar
> 解决www.antlr.org (www.antlr.org)... 138.202.170.10
> 连接到 www.antlr.org (www.antlr.org)|138.202.170.10|:80... 已连接。
> HTTP 请求已发送，等待响应... 200 OK
> 长度：2388361 (2.3M) [应用程序/java-archive]
> 保存到：`antlr-3.4-complete.jar'
>
> 100%[============================================== ==================================================== ===============>] 2,388,361 317K/s 在 8.9s    
>
> 最后修改的标头无效——时间戳被忽略。
> 2012-10-17 19:26:11 (261 KB/s) - `antlr-3.4-complete.jar' 已保存 [2388361/2388361]

bart@hades:~/Temp/demo$ javac -cp antlr-3.4-complete.jar *.java

bart@hades:~/Temp/demo$ java -cp .:antlr-3.4-complete.jar Main "ab c"
> 任何=一个
> 任何=b
> 任何=c
```

*（`>`输出打印到控制台）*

# python - 如何处理繁重查询的 60 秒超时

> ID：12931304
> 
> 赞同：1
> 
> 时间：2012-10-17T09:34:15.393
> 
> 标签：python, google-app-engine, google-cloud-datastore

我必须在我的数据存储中进行一些繁重的查询才能获得一些高级信息。当它达到 60 秒时，我收到一个错误，我认为它是超时中断：

```
Traceback (most recent call last):
File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 207, in Handle
result = handler(dict(self._environ), self._StartResponse)
File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
rv = self.router.dispatch(request, response)
File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
return route.handler_adapter(request, response)
File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
return handler.dispatch()
File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
return method(*args, **kwargs)
File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/admin/__init__.py", line 140, in xsrf_required_decorator
method(self)
File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/admin/__init__.py", line 348, in post
exec(compiled_code, globals())
File "<string>", line 28, in <module>
File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 2314, in next
return self.__model_class.from_entity(self.__iterator.next())
File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 1442, in from_entity
return cls(None, _from_entity=entity, **entity_values)
File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 958, in __init__
if isinstance(_from_entity, datastore.Entity) and _from_entity.is_saved():
File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 814, in is_saved
self.__key.has_id_or_name())
File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore_types.py", line 565, in has_id_or_name
elems = self.__reference.path().element_list()
DeadlineExceededError 
```

**这不是应用程序查询，我通过 Interactive Console 与我的应用程序进行交互**，所以这不是一个实时问题。我的问题是我必须遍历所有应用程序用户，检查需要为每个用户检索的大量数据。我可以通过硬编码他们的 user_id 来一一完成，但这会很慢而且效率不高。

你们能想出什么办法让我更快地做到这一点吗？无论如何选择 5 到 5 个用户，比如 LIMIT=5 只获得前 5 个用户，但如果我能获得，首先是 5 个用户，然后是接下来的 5 个用户等等，迭代所有人，但查询更轻松。我可以设置更长的超时时间吗？

你能想到我能解决这个问题的任何方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:41:17.590

您可以使用光标与限制一起使用您停止的搜索：

> 返回一个 base64 编码的游标字符串，表示查询结果集中检索到的最后一个结果之后的位置。游标字符串可以安全地用于 HTTP GET 和 POST 参数，也可以存储在 Datastore 或 Memcache 中。未来对同一查询的调用可以通过 start_cursor 参数或 with_cursor() 方法提供此字符串，以恢复从此位置检索结果。

[https://developers.google.com/appengine/docs/python/datastore/queryclass#Query_cursor](https://developers.google.com/appengine/docs/python/datastore/queryclass#Query_cursor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:11:57.950

我会编写一个简单的请求处理程序来完成任务。

要么以可以在 mapreduce 上运行的方式编写它，要么启动后端来运行您的处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:35:44.517

首先，通过批量获取实体将显着减少应用程序与数据存储的通信时间。有关这方面的详细信息，请查看[您（可能）不了解的有关 App Engine 的 10 件事](http://googleappengine.blogspot.gr/2009/06/10-things-you-probably-didnt-know-about.html)

然后，您可以将此过程分配给任务队列，使您能够执行长达 10 分钟的任务。有关任务队列的更多信息，请查看[任务队列 Python API](https://developers.google.com/appengine/docs/python/taskqueue/)。

最后，对于需要更多时间的任务，您还可以考虑使用后端。有关更多信息，您可以查看[Backends (Python)](https://developers.google.com/appengine/docs/python/backends/)。

希望这可以帮助。

# php - 使用 javascript 检查 MySql 中的用户验证

> ID：12931305
> 
> 赞同：1
> 
> 时间：2012-10-17T09:34:18.623
> 
> 标签：php, javascript, html, mysql

如果用户正确输入用户名和密码然后进入home.html，我想检查我的mysql数据库，我有一些javascript代码可以检测用户何时单击登录按钮，但我不明白如何检查带有 javascript 的数据库，我知道如何在 php 中执行此操作，但我不明白如何从 javascript 调用 php 或直接在 js 代码中执行，这是一些代码：

html中的表格：

```
 <div id="password">
        <div class="input username"><input type="text" placeholder="User name" /></div>
        <div class="input password"><input type="password" placeholder="Password" /></div>
        <button>Log in</button>
        <a href="#" class="back">Back</a>
    </div>
</div> 
```

然后在我的 Login.js 文件中我有这个：

```
function forgot() {
//Se ho scritto la password allora fai l'animazione wobble, altrimenti vai in home.html
    if($("#password .input.password input").attr("value")!='') {
        $.notification( 
            {
                title: "Wrong password",
                content: "Just leave the password field empty to log in.",
                icon: "!"
            }
        );
        $("#password").removeClass().addClass("animated wobble").delay(1000).queue(function(){ 
            $(this).removeClass();
            $(this).clearQueue();
        });
        $("#password .input.password input").attr("value", "").focus();
    } else {
        document.location.href = "home.html";
    }
} 
```

现在登录我只检测该字段是否为空，但我想检测mysql数据库我如何检查它？因为我想如果用户输入错误的用户名和密码跨越 $notification 警报，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:36:59.683

您不能直接从客户端 JS 与服务器端数据库进行通信。

要发出 HTTP 请求（向服务器端程序），请使用[XMLHttpRequest 对象](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:23:50.673

请假设您的 html 表单如下所示：

```
<input id="uname" name="uname" type="text" placeholder="User name" />
<input id="pass" name="pass" type="password" placeholder="Password" />
<button id="btn_login">Log in</button> 
```

假设 php 脚本命名`checkPassword.php`如下：

```
<?php
    /*
      1.Retrieve post data : "uname" and "pass".
      2.Cehck if  user name and password is valid.
    */
    if( /* valid user name and password */ ){
        echo "OK";
    }else{
        echo "NG";
    }
?> 
```

Javascript 代码可能如下所示：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script language="javascript">
$(function() {
// set a event handler to the button
  $("#btn_login").click(function() {
    // retrieve form data
    var uname = $("#uname").val();
    var pass = $("#pass").val();

    // send form data to the server side php script.
    $.ajax({
        type: "POST",
        url: "checkPassword.php",
        data: { uname:uname, pass:pass }
    }).done(function( data ) {

        // Now the output from PHP is set to 'data'.
        // Check if the 'data' contains 'OK' or 'NG'
        if (data.indexOf("OK") >= 0){

            // you can do something here
            alert("Login Successed.");
            location.href = "ok.html";

        }else if(data.indexOf("NG") >= 0){

            // you can do something here
            alert("Login Faild.");
            location.href = "ng.html";
        }
    });
  });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:41:07.487

```
if(document.pressed=='SUBMIT')
    {
        var uname = document.getElementById('uname').value;

        if(uname.trim()=='' || uname.trim()==null)
        {
            alert("<?php echo 'uname_null'?>");
            return false;
        }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T01:15:03.993

如果您使用存储过程，您可以在 sql server 端进行验证部分

# android - 我需要帮助来为 android 实现 GCM

> ID：12931308
> 
> 赞同：0
> 
> 时间：2012-10-17T09:34:28.530
> 
> 标签：android, google-cloud-messaging

我正在尝试实施 GCM。

我按照谷歌的规定实现了所有。当我注册设备时，接收器中的回调没有效果。GCMIntentService 类中甚至没有 onError() 。

GCMIntentService 也从未构造过。

这是我的代码....

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.roconmachine.gcm"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8"/>

    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <permission android:name="com.roconmachine.gcm.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="com.roconmachine.gcm.permission.C2D_MESSAGE" /> 

    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET" /> 
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".NewGCMActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
          <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

          </intent-filter>
        </receiver>

        <service android:name=".services.GCMIntentService" android:enabled="true"/>
    </application>
</manifest> 
```

这里是

```
/*
 * Copyright 2012 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.roconmachine.gcm.services;

import android.content.Context;
import android.content.Intent;
import android.widget.Toast;
import com.google.android.gcm.GCMBaseIntentService;

/**
 * {@link IntentService} responsible for handling GCM messages.
 */
public class GCMIntentService extends GCMBaseIntentService {

    public GCMIntentService() {
        super("873601972999");
    }

    @Override
    protected void onRegistered(Context context, String registrationId) {
        Toast.makeText(this, "onRegistered", Toast.LENGTH_LONG).show();
    }

    @Override
    protected void onUnregistered(Context context, String registrationId) {
        Toast.makeText(this, "onUnregistered", Toast.LENGTH_LONG).show();
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Toast.makeText(this, "onMessage", Toast.LENGTH_LONG).show();
    }

    @Override
    protected void onDeletedMessages(Context context, int total) {
        Toast.makeText(this, "onDeletedMessages", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onError(Context context, String errorId) {
        Toast.makeText(this, "onError", Toast.LENGTH_LONG).show();
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        Toast.makeText(this, "onRecoverableError", Toast.LENGTH_LONG).show();
        return super.onRecoverableError(context, errorId);
    }

}

package com.roconmachine.gcm;

import com.google.android.gcm.GCMRegistrar;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class NewGCMActivity extends Activity {
    private Button btnGetRegister;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btnGetRegister = (Button)findViewById(R.id.button1);
        btnGetRegister.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                register();
            }
        });
    }

    private void register()
    {
        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);

        if (GCMRegistrar.getRegistrationId(this).equals("")) {
            GCMRegistrar.register(this, "873601972999");
        } else 
        {
            Toast.makeText(this, "already register", Toast.LENGTH_LONG).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:42:18.857

好的。通过鸟瞰，没有具体的错误。你能尝试一件愚蠢的事情吗？您已将 GCMIntentService 放入服务包中。你能不能把它放在主包里并测试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:55:15.047

您需要将类别添加到您的接收器

```
<receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
      <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE" />
        <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
        <category android:name="com.roconmachine.gcm" />
      </intent-filter>
    </receiver> 
```

此外，您必须将服务移动到应用程序包，文档说：

此意图服务将由 GCMBroadcastReceiver（由 GCM 库提供）调用，如下一步所示。它必须是 com.google.android.gcm.GCMBaseIntentService 的子类，必须包含公共构造函数，**并且应命名为 my_app_package.GCMIntentService（除非您使用覆盖用于命名服务的方法的 GCMBroadcastReceiver 的子类）。**

# c# - 反序列化：几种节点进入同一个对象

> ID：12931312
> 
> 赞同：0
> 
> 时间：2012-10-17T09:34:37.407
> 
> 标签：c#, deserialization

我正在尝试反序列化一个 XML 文档，它的一个节点可以这样表示：

```
<n1 zone="00000" id="0000" /> 
```

或这个 ：

```
<n2 zone="00000" id="0000" /> 
```

或这个 ：

```
<n3 zone="00000" id="0000" /> 
```

在我的文档中，我总是有一个“n1”节点或一个“n2”节点或一个“n3”节点。我想将所有这些片段反序列化为此类的一个实例：

```
[Serializable]
public class N
{
    [XmlAttribute("zone")]
    public string Zone { get; set; }

    [XmlAttribute("id")]
    public string Id { get; set; }
} 
```

但我没能做到。文档建议使用 XmlChoiceIdentifier 属性来完成此操作，但也许我以错误的方式使用它。

任何的想法 ？

PS：我知道我可以创建三个类：N1、N2 和 N3，并将它们映射到我的不同类型的 XML 片段。但我更喜欢更清洁的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:11:50.037

假设你有类似的东西：

```
<?xml version="1.0"?>
<ns> 
  <n1 id="0000" zone="00000"/> 
  <n2 id="0000" zone="00000"/> 
  <n3 id="0000" zone="00000"/> 
</ns> 
```

您可以使用*LINQ to XML*：

```
XDocument document = XDocument.Load(path);
XElement parentNode = document.Element("ns");
var childNodes = parentNode.Elements().Where(x => x.Name.ToString().StartsWith("n")); //this prevent from take elements wich didn't start with n

List<N> list = new List<N>();
foreach (XElement element in childNodes) {
    N n = new N(){ 
        Id = element.Attribute("id").Value, 
        Zone = element.Attribute("zone").Value 
    };

    list.Add(n);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:52:48.053

这是关于如何使用 XmlChoiceIdentifier 的相当容易理解的读物：

[http://msdn.microsoft.com/en-us/magazine/cc164135.aspx](http://msdn.microsoft.com/en-us/magazine/cc164135.aspx)

如果您真的对此有疑问，那么您总是可以先使用 XSL 转换来进行映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:05:41.130

您可以使用 LINQ-To-Xml

```
XDocument x = XDocument.Parse(
           "<root><n1 zone=\"0000\" id=\"0000\"/><n2 zone=\"0001\" id=\"0011\"/><n3 zone=\"0002\" id=\"0022\"/></root>");

var result = from c in x.Element("root").Descendants()
             select new N { Zone = c.Attribute("zone").Value, 
                            Id = c.Attribute("id").Value }; 
```

它没有使用序列化程序，我认为您的目标是，但这是一种前进的方式。

# java - 图表：将双向边建模为两条独立的边有什么优缺点？

> ID：12931313
> 
> 赞同：2
> 
> 时间：2012-10-17T09:34:48.123
> 
> 标签：java, database, graph, relationship, relation

我目前正在开发一个应用程序，我们基本上是在“项目”之间建立一个图表。我认为这些项目之间存在不同类型的链接，但我现在正在努力决定如何对这些进行建模，尤其是双向链接。

**1\. 示例**：

```
ItemB --isChildOf---> ItemA
ItemA --isMasterOf--> ItemB 
```

我认为可以这样建模：

**示例 2**

```
ItemA <---> ItemB 
```

在我的数据库模型中，我目前对链接建模如下：

```
* sourceID
* targetID
* relationType (e.g. isMasterOf, isChildOf, maybe more...) 
```

我是否还需要将方向作为表格中的字段？到目前为止，我还没有将它作为一个单独的字段，因为 IMO 方向是由 sourceID 和 targetID 隐式定义的。

我不确定在哪些情况下需要示例 1，以及在哪些情况下示例 2 就足够了。我认为示例 1 就像 twitter，其中 UserA 可以关注 userB，但反过来可能不行。另一方面，我认为 Facebook 始终是 Example2。

希望我的问题有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:23:42.593

如果您想要一个尽可能通用且适用于任何简单图形建模案例（一对多/多对一、多对多）的解决方案，只需将链接建模为 (source_id, target_id)对在单独的链接表中。这样你就可以

*   通过具有边对 (a.id, b.id) 和 (b.id, a.id) 对双向链接进行建模，通过根据方向具有其中之一对单向链接进行建模
*   通过查看哪个节点是源节点和哪个节点是目标来区分边缘方向 - 无需单独的方向字段。

如果您想为要建模的图形类型存在实际限制的特定情况制定一个优雅的解决方案，您首先需要决定

1.  您希望在对象之间允许什么样的链接：它们是否始终是单向或双向的，或者您是否需要区分两者和
2.  无论是一个对象可以只有一个父对象但有多个子对象的树状结构，还是一个对象可能有多个边来来去去的更通用的图。

关于第一点，如果您知道所有链接都属于同一类型，那么您实际上不需要在代码中区分边缘 (source_id, target_id) 和边缘 (target_id, source_id)，因为两者都意味着两者之间的边缘两个对象/节点。

就第二点而言：如果您要建模的图形类似于树或森林（每个对象都有 0 或 1 个父对象和 0 到 n 个子对象，所有链接都是相同类型的 - 单向或双向），您可以将诸如 parent_id 之类的内容添加到对象本身，而不是在单独的链接表上对连接进行建模。

显然，如果您需要边缘的其他属性（例如重量或方向以外的某种类型属性），则必须相应地添加字段。在这种情况下，无论如何在单独的表上对边建模是最有意义的，因为边将不仅仅是节点之间的简单链接，而是具有实际属性的对象。

# ios - 旋转时切换视图无法正常工作

> ID：12931314
> 
> 赞同：1
> 
> 时间：2012-10-17T09:34:53.003
> 
> 标签：ios, ipad, rotation

我一直在尝试几种方法来使旋转按预期工作，但到目前为止我一直面临一些问题。

现在我想要一个类，其中包含一个包含 2 个方向视图的 xib 文件。一张纵向，一张横向。

我正在我的主 ViewController 中尝试这个（应用程序委托中设置的根控制器。但不知何故它失败了：当我旋转时，视图被切换但插座没有旋转。例如，将显示来自横向视图的简单标签就好像设备处于纵向模式一样。

这是一些代码：

在我的应用委托中

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil];
} else {
    //self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil withOrientation:UIInterfaceOrientationPortrait];
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil];
}
self.window.rootViewController = self.viewController; 
```

在 Viewcontroller.m 中

```
- (void)viewDidLoad
{
[super viewDidLoad];

[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:)
                                             name:UIDeviceOrientationDidChangeNotification object:nil];

}

 - (void)orientationChanged:(NSNotification *)notification
   {
    [self performSelector:@selector(updateLandscapeView2) withObject:nil afterDelay:0];
   }

  - (void)updateLandscapeView2
  {
      UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;
      if (UIDeviceOrientationIsLandscape(deviceOrientation))
    {
    self.view = self.landscapeView;
    [[NSNotificationCenter defaultCenter] postNotificationName:@"landscape" object:nil];
    }
else if (deviceOrientation == UIDeviceOrientationPortrait && isShowingLandscapeView)
{
    self.view = self.portraitView;
    [[NSNotificationCenter defaultCenter] postNotificationName:@"portrait" object:nil];
    }
  } 
```

我打算通过使用本地通知将方向更改转发到 Viewcontroller 的子视图。

无论如何，我在这里想念什么？我不明白为什么这会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:07:00.660

我发现当你打电话时

```
[UIDevice currentDevice].orientation 
```

在 a 的上下文中

```
[viewController performSelector .....] 
```

它没有用。

一些机构可以解决这些问题？

# php - 从 unicode 字符串中提取数字 - PHP RegExpression

> ID：12931315
> 
> 赞同：0
> 
> 时间：2012-10-17T09:34:53.690
> 
> 标签：php, codeigniter, preg-replace, codeigniter-2

我正在解析一个网页以获得网页奖。奖品包括一个卢比符号 (₹)。

所以我用 preg_replace 来提取数字。

例如：

```
$str='₹ 1,195 ';
echo preg_replace("/[^0-9]/", '', $str); 
```

输出是：

```
2091195 
```

我尝试在[http://writecodeonline.com/php/](http://writecodeonline.com/php/)上执行相同的代码。

我得到了正确的输出`1195`。

我不明白是什么问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:38:51.310

如果 unicode 字符串是 UTF-8，您可以使用[u **(** PCRE_UTF8) 修饰符^(*Docs*)](http://php.net/manual/reference.pcre.pattern.modifiers.php)来告诉[`preg_replace`](http://php.net/preg_replace)它应该使用 UTF-8 模式。如果不是，请先将其重新编码为 UTF-8，然后使用修饰符。

示例（[演示](http://codepad.viper-7.com/jzh8P6)）：

```
$subject = '₹ 1,195 ';
$pattern = "/[^0-9]/u";
$result  = preg_replace($pattern, '', $subject);

echo $result; 
```

# java - 未绘制/出现的图形

> ID：12931326
> 
> 赞同：1
> 
> 时间：2012-10-17T09:35:16.193
> 
> 标签：java, swing, layout, paintcomponent, jcomponent

我遇到了这个问题，我绘制的对象没有出现在 GUI 中。我知道它正在被处理，因为数据被推送到日志文件。但是，图形没有出现。

这是我的一些代码：

```
public static void main(String[] args)
{
   JFrame window = new JFrame();
   window.setLayout(new BorderLayout());
   window.setVisible(true);
} 
```

我在这里和那里放置了一个按钮和一些其他小部件。中心窗格 (BorderLayout.CENTER) 是`DrawnObject`显示 my 的位置。

```
// Called when button is pushed/clicked
public static void trigger()
{
   DrawnObject shape = new DrawnObject();
   window.setLayout(new BorderLayout());
   window.getContentPane().add(shape, BorderLayout.CENTER);
   window.pack;
}

public class DrawnObject extends JComponent()
{
   @Override
   public Dimension getMinimumSize()
   {
       return new Dimension(100, 100);
   }

   @Override
   public Dimension getPreferredSize()
   {
       return new Dimension(500, 500);
   }

   @Override
   public Dimension getMaximumSize()
   {
       return new Dimension(700, 700);
   }

   @Override
   public void paintComponent(Graphics g)
   {
      super.paintComponent(g);
      g.setColor(Color.RED);
      g.fillRect(10, 10, 10, 10);
   }
} 
```

我尝试将`Graphics`对象转换为`Graphics2D`并使用适当的绘制方法，但这并没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:22:38.460

换个颜色试试...

```
super.paintComponent(g);
g.setColor(Color.RED);
g.fillRect(10, 10, 10, 10); 
```

图形上下文颜色默认设置为组件背景颜色

![在此处输入图像描述](../Images/f4451ca6a305c3800e9d006406b97f38.png)

```
public class PaintTest01 {

    public static void main(String[] args) {
        new PaintTest01();
    }

    public PaintTest01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new DrawPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class DrawPane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(30, 30);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(Color.RED);
            g.fillRect(10, 10, 10, 10);
        }
    }
} 
```

**更新**

从您问题中更新的代码中，它无法编译...

您在构造函数中创建一个`JFrame`命名窗口，它是一个局部变量...

```
public static void main(String[] args)
{
   JFrame window = new JFrame();
   window.setLayout(new BorderLayout());
   window.setVisible(true);
} 
```

然后您尝试将其添加`DrawObject`到窗口中...

```
public static void trigger()
{
   DrawnObject shape = new DrawnObject();
   window.setLayout(new BorderLayout());
   window.getContentPane().add(shape, BorderLayout.CENTER);
   window.pack;
} 
```

但是因为`window`未定义，所以您的示例无法编译。

编译的唯一方法是如果您在类级别有一个名为 的静态变量`window`，在这种情况下，它应该生成一个`NullPointerException`，除非您已经初始化了该变量

```
public class MyDrawing {
    public static JFrame window = new JFrame(); 
```

这意味着您有两个框架，一个是您在构造函数中创建的，一个是您作为静态级别类字段创建的。这不起作用，因为它们是不同的实例

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T10:14:25.000

*   [必须从公共类 DrawnObject extends JComponent()](https://stackoverflow.com/a/9258934/714968)返回PreferredSize，否则返回`Dimension(0, 0);`

*   `Top-Level containers`已经实现`BorderLayout`，然后`window.add(shape, BorderLayout.CENTER);`是正确的代码行，`JComponent`应该正确放置

*   使用`pack()`而不是`invalidate()`，此代码行不起作用，为由`BorderLayout`or `GridLayout`(ei ???) 放置的容器调用某些东西，对于基于的容器`JComponent`，`JComponent`还没有实现任何`LayoutManager`in `API`，必须返回`PreferredSize`

*   尽快发布[SSCCE以获得更好的帮助](http://sscce.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:02:52.907

尝试将您添加`DrawnObject`到 Windows 内容窗格中，并且不要忘记设置布局。使用空布局是不好的做法（如果您调用无效，您的布局设置为空）。

```
window.getContentPane().setLayout(new BorderLayout());
window.getContentPane().add(shape, BorderLayout.CENTER);
window.pack();
window.setVisible(true); 
```

另外，尝试跳过`invalidate()`.

# ruby-on-rails - 使用carrierwave将一张图片上传到多个存储位置

> ID：12931330
> 
> 赞同：3
> 
> 时间：2012-10-17T09:35:22.630
> 
> 标签：ruby-on-rails, file-upload, carrierwave

我希望能够将一张图像上传到两个不同的位置：一个位置在（服务器的）本地文件系统上，另一个位置是 Amazon S3（Amazon S3 位置是可选的）。

我当前的环境是 Rails 3.2.8，Ruby 1.9.3，使用 Carrierwave 上传文件。

我使用以下方法取得了一些成功：

模型

```
class Image < ActiveRecord:Base

attt_accessor :remote

before_save :configure_for_remote

mount_uploader :image, ImageUploader #stores images locally
mount_uploader :image_remote, ImageRemoteUploader #store images on S3

def configure_for_remote
  if self.remote=="1"
    self.image_remote = self.image.dup
  end
end

end 
```

相关视图表单字段（简单的表单语法）

```
<p><%= f.input :image, as: :file %></p>
<p><%= f.input :remote, as: :boolean %></p> 
```

用户选中表单中的“远程”复选框并选择要上传的图像。before_save 回调将图像的副本存储到 image_remote 中，文件由各自的上传者处理，我得到了我想要的结果。

但是，当我想更新该字段时，我开始遇到问题。例如，如果用户选择首先将文件上传到本地而不是 S3（不选中远程复选框），那么稍后会返回表单并选中远程复选框。在这种情况下， before_save 回调不会运行，因为没有更改真正的活动记录列（只有远程标志）。我尝试使用 before_validation，但这无法正常工作（image_remote 上传器将正确的文件名存储在 image_remote 列中，但图像不会上传到 S3）。显然 before_validation 和 before_save 之间发生了一些变化（图像属性正在转换为上传器？）但我似乎无法弄清楚为什么这不起作用。

说了这么多，我认为我的使用方法`dup`有点像黑客，我希望有人能以更优雅的方式为我提供建议，以实现我的目标。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:22:42.163

我要解决这个问题，尽管我仍然不确定它是否是最优雅的解决方案。

首先，我在我的问题中提到，当我使用 before_validation 回调注册 config_for_remote_upload 时，文件没有上传到 S3，但填充了 image_remote 列。经进一步检查，情况更糟。在 before_validation 回调中初始化 image_remote 上传器时，S3 存储桶上的所有文件都被删除了！我复制了几次。我仅在上传时将 store_dir 设置为 nil 时进行了测试，从而将文件放在存储桶的根目录下。

在 before_save 回调期间初始化 image_remote 列没有这个问题。为了强制保存记录（它不会保存，因为只有一个非 db 列属性被更改）我添加了一个 before_validation 来更改记录的 update_at 字段。

```
before_validation: :change_record_updated_at
...
def change_record_updated_at
   self.update_at=Time.current
end 
```

我也不再使用 dup，不是因为它不起作用，而是因为我不知道它为什么起作用。相反，我为该文件创建了一个 StringIO 对象并将其分配给 image_remote 列。

```
 def config_for_remote_upload
    if self.remote.to_i==1 
      #self.image_remote = self.image.dup
      #this will open the file as binary
      img_binary = File.open(self.image.file.path){ |i| i.read }
      img_encoded = Base64.encode64(img_binary)
      io = FilelessIO.new(Base64.decode64(img_encoded))
      io.original_filename = self.image.file.original_filename
      self.image_remote = io
    elsif self.remote.to_i==0
      #delete remote image and clear field
      self.remove_image_remote = true
     end
 end 
```

有关FilelessIO（带有 original_filename 的 StringIO）的更多信息，请参见[此处。](https://stackoverflow.com/questions/6718841/restful-file-uploads-with-carrierwave)

使用此配置，可以在初始上传后将文件上传到第二个存储位置（在我的情况下为 S3）。

希望这可以帮助其他人。

# c# - C# 应用程序无法从 C++ DLL/项目调用方法

> ID：12931332
> 
> 赞同：2
> 
> 时间：2012-10-17T09:35:31.277
> 
> 标签：c#, c++

我尝试将网络摄像头支持集成到 C# 解决方案中。首先，我从 Touchless.Vision 中学到了很好的例子。它包含具有 3 个组件的 C# 解决方案： - 一个 Windows 窗体项目（C#，任何 CPU） - 一个包装项目（C#，任何 CPU） - WebCamLib 项目（C++，x64）

我使用Win7 x64。所以这个例子工作正常。至少从我将 C 库/项目的平台目标从 Win32 更改为 x64 的那一刻起。

但后来我在另一个 C# 解决方案下添加了两个项目（C# 包装器和 C++ 项目）。现在它从 C++ 项目中调用方法时总是失败。

```
System.BadImageFormatException was unhandled by user code
Message="Could not load file or assembly 'WebCamLib, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. An attempt was made to load a program with an incorrect format."
Source="Touchless.Vision"
FileName="WebCamLib, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null"
FusionLog=""
StackTrace:
   at Touchless.Vision.Camera.CameraService.<BuildCameraList>d__0.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Touchless.Vision.Camera.CameraService.get_AvailableCameras() in C:\CustomWare.NET\CustomWare\WebCamWrapper\Camera\CameraService.cs:line 40 
```

该解决方案也使用 AnyCPU 平台。我认为不应该有任何基于平台的冲突。

这两种情况有什么不同？我应该检查什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T10:03:25.643

原因是您正在从 64 位应用程序调用 32 位库。在可执行文件上使用 AnyCPU 配置时，它将作为 OS 类型加载。在 32 位机器上是 32 位，在 64 位机器上是 64 位。

从 64 位可执行文件调用 32 位库时，可能会出现数据类型等方面的差异，这可能会导致严重的问题。例如，C# 指定 long**的大小始终为 64 位**（它是 System.Int64 的别名），而在 C 中它被定义为**至少 32 位的大小**。

或者在你的情况下，我认为情况正好相反。

所以一定要检查一下你新添加的C#库确实是AnyCPU还是x64项目，你的C项目是x64项目。我的猜测是最后一个不是这样的。

为了提供有关该主题的更多见解：

AnyCPU 非常适合 # 类库。调用程序集决定如何加载程序集。因此，如果您在 64 位机器上调用 AnyCPU 类库的 32 位应用程序，它将像 32 位库一样加载。

在 VS2010 中，与 VS2008 相比，行为发生了变化。当您创建控制台、WPF 或表单应用程序时，目标平台将始终是 x86（32 位）。我的建议是使用 x86，除非您绝对需要或想要创建 64 位版本的应用程序。64 位应用程序有一些好处，我相信在未来的某个地方，32 位应用程序的使用将完全消失，但是因为维护两个版本会使测试软件、创建版本、测试这些版本所需的时间增加一倍，等等，我通常不会费心创建 64 位版本。

Rick Byers 不久前写了一篇有趣的文章：[AnyCPU Exes 通常比它们的价值更麻烦](http://blogs.msdn.com/b/rmbyers/archive/2009/06/09/anycpu-exes-are-usually-more-trouble-then-they-re-worth.aspx)。

# django - Django 项目的 Sphinx 代码验证

> ID：12931338
> 
> 赞同：1
> 
> 时间：2012-10-17T09:35:51.820
> 
> 标签：django, testing, python-sphinx

我有一个带有几个应用程序的 Django 项目——所有这些应用程序都具有 100% 的覆盖率单元测试。现在我开始使用 ReST 和 Sphinx 在一个新目录中记录整个内容。我使用常规方法创建 html 文件：`make html`.

由于这些 ReST 文件中有几个代码片段，我想确保这些片段随着时间的推移保持有效。那么什么是测试这些 ReST 文件的好方法，所以如果某些 API 更改使这样的片段无效，我会收到错误消息？我想conf.py中必须有一些变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T21:47:11.777

原来我有一些python路径错误。一切都按预期工作 - 正如 bmu 在他的评论中指出的那样。（我正在写这个答案，所以我可以以正常方式结束这个问题）

# windows - 对目录中的每个文件执行操作的 Windows 脚本

> ID：12931347
> 
> 赞同：0
> 
> 时间：2012-10-17T09:36:15.253
> 
> 标签：windows, scripting, batch-file, cmd

我是 Windows 脚本的绝对初学者，我需要执行以下操作:(

```
for /f %%f in '..\dir\'
# Create a text file titled '\dir\filename.bat', containing " xxxx <filename> xxxx" 
```

完成后，我将运行同时创建的所有批处理文件

```
cd ..\dir
for /f %%f in * do
start cmd.exe /C '%%f.bat' 
```

如果有人能告诉我如何进行文件创建部分并验证其余代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:59:53.900

我不确定你想在这里做什么......

如果你想创建一个文件，你可以回显该行并将其附加到一个文件中（如果该文件不存在，它将被创建）......所以对于你问题的第一部分。

```
cd \dir
for /f %%f in ('dir /b') do (
    echo "xxxx %%f xxxx" >> %%f.bat
    echo "second line of file if required.." >> %%f.bat
    echo "repeat for as many lines as you need.." >> %%f.bat
) 
```

不知道为什么要同时运行所有文件...如果同时打开很多图块，它们很可能会引起问题...

如果你能准确地解释你需要做什么，那将会更有帮助，这样人们也许可以提供更好的方法来实现最终结果。

*编辑*

我已经更改了上面的代码，以便它可以工作（我已经测试过，它做了我认为你需要的事情）。

# android - Android MediaCodec API 视频播放太快

> ID：12931348
> 
> 赞同：6
> 
> 时间：2012-10-17T09:36:22.037
> 
> 标签：android, android-mediaplayer, surfaceview, android-4.2-jelly-bean, android-mediacodec

我目前正在使用 Android Jelly Bean MediaCodec API 来开发一个简单的视频播放器。

我提取曲目，在单独的线程中播放音频和视频。问题是视频轨道总是播放得太快。

问题可能隐藏在哪里？
音频和视频的处理方式几乎相同，除了通过 AudioTrack 播放音频和将视频渲染到表面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-05T02:06:12.220

如果您以最大速度渲染帧，您将在大多数设备上达到 60fps。您需要根据编码器提供的演示时间戳来调整它的速度。

例如，如果输入是Android 支持的格式（例如典型的.mp4 文件），您可以使用[MediaExtractor](http://developer.android.com/reference/android/media/MediaExtractor.html)类来提取每一帧。可以使用 检索时间戳`getSampleTime()`。您希望通过连续帧上的时间戳之间的差异来延迟渲染——不要假设第一帧的时间戳为零。

此外，不要假设视频帧以恒定速率（例如 30fps）出现。对于某些来源，帧将不均匀地到达。

请参阅 Grafika 中的“播放视频（TextureView）”示例[，](https://github.com/google/grafika)尤其是`SpeedControlCallback`类。该`gen-eight-rects.mp4`视频使用可变帧持续时间来练习它。如果您选中“以 60fps 播放”框，将忽略演示时间戳。

# regex - Lighttpd 的重定向仅适用于整个正则表达式的括号

> ID：12931356
> 
> 赞同：0
> 
> 时间：2012-10-17T09:37:01.490
> 
> 标签：regex, redirect, lighttpd

我正在使用 lighttpd 1.4.28

这是我的重定向规则：

```
$HTTP["host"] =~ "^([^.]+\.[^.]+)$" {
        url.redirect = ( "^/(.*)" => "http://www.%0/$1" )
} 
```

它应该将 anydomain.anytld 重定向到 www.anydomain.anytld 并且它就像我在这里写的那样具有魅力（当然，使用 %1 也可以，因为它指的是括号。）

然而，我很困惑为什么它只适用于您可以在触发器正则表达式中看到的一对括号。

%0 应该捕获整个结果，不是吗？它甚至没有引用一对括号，不像 %1、%2 等。但是如果我删除这些括号，就像这样：

```
$HTTP["host"] =~ "^[^.]+\.[^.]+$" {
        url.redirect = ( "^/(.*)" => "http://www.%0/$1" )
} 
```

尝试重新启动 lig​​httpd 时出现此错误：

> 无法访问的其他条件 2012-10-17 11:34:10: (configfile.c.918) 源：/etc/lighttpd/lighttpd.conf 行：173 位置：14 解析器在此处附近以某种方式失败：（EOL）

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:45:16.677

这是因为`%0`匹配整个*子字符串*或第一个表达式，根据定义，它是封闭`()`集。这将允许您使用带有嵌套 (ie `((()))`) 括号的更复杂的正则表达式，并将其全部拉出。据我了解，这就是 Lighttpd 的正则表达式解析器的构造。

[http://redmine.lighttpd.net/projects/1/wiki/Docs_ModRewrite](http://redmine.lighttpd.net/projects/1/wiki/Docs_ModRewrite)

# asp.net - 将整数反序列化为布尔值 asp.net javascriptserializer

> ID：12931361
> 
> 赞同：1
> 
> 时间：2012-10-17T09:37:09.590
> 
> 标签：asp.net, json, web-services, serialization

我正在开发一个移动应用程序，它序列化一个包含几个布尔属性的类。它将布尔属性视为整数，因此将它们序列化为“0”或“1”。

在服务器端（ASP.NET Web 服务），JavascriptSerializer 尝试将“0”转换为布尔值，并给出错误：“0 不是布尔值的有效值”

我需要修改 javascript 序列化程序，以便当它遇到“0”或“1”并期望一个布尔值时，它将它们对应的值转换为布尔值。

我调查了 JavascriptConverter 抽象类但没有帮助。你能支持这样一个工作的例子吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:46:21.550

序列化后更好地将 true 转换为 1。

使用一些包装类或自定义代码

# jquery - 带有窗帘效果的jquery图像滑块

> ID：12931363
> 
> 赞同：4
> 
> 时间：2012-10-17T09:37:18.263
> 
> 标签：jquery, slider

我正在寻找具有特殊窗帘效果的 jQuery 图像滑块。

图像应通过将活动图像在中间分成两部分来交叉淡化，并将左侧部分向左滑动，将右侧部分向右滑动。因此效果模拟了在剧院中拉窗帘的效果。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:57:58.077

我会使用 jQuery 循环。这是一个很棒的插件。

看看效果浏览器（在窗帘上）。

[http://jquery.malsup.com/cycle/browser.html](http://jquery.malsup.com/cycle/browser.html)

如果您不喜欢其中任何一个，您可以构建自己的效果。

[http://jquery.malsup.com/cycle/adv2.html](http://jquery.malsup.com/cycle/adv2.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:37:01.300

我创建了这个[http://jsbin.com/akarow/2](http://jsbin.com/akarow/2)或多或少作为概念证明。我没有找到具有这种效果的特定插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:54:46.937

我没有找到与您所要求的类似的东西，但是这个[网站在这里](http://www.queness.com/post/10497/8-jquery-image-sliders-with-impressive-transition-effects)，提供了一些非常好的东西。检查它们，其中一些具有类似的技术。

# mysql - HAProxy：从 DBCP 断开连接，为什么？

> ID：12931365
> 
> 赞同：4
> 
> 时间：2012-10-17T09:37:23.833
> 
> 标签：mysql, timeout, connection-pooling, load-testing, haproxy

我有一个针对 MySQL 运行查询的 webapp (Tomcat/Hibernate/DBCP 1.4)，这适用于特定负载，例如每秒 50 个查询。当我通过 HAProxy 路由相同的中等负载（仍然只使用一个数据库）时，我遇到了失败，可能每 500 个查询就有一个失败。我的应用报告：

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet successfully received from the server was 196,898 milliseconds ago.    The last packet sent successfully to the server was 0 milliseconds ago.
at sun.reflect.GeneratedConstructorAccessor210.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3567)
...
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:3017)
... 
```

同时，HAProxy 日志显示了很多条目，例如：

```
27] mysql mysql/db03 0/0/34605 2364382 cD 3/3/3/3/0 0/0
Oct 15 15:43:12 localhost haproxy[3141]: 127.0.0.1:35500 [15/Oct/2012:15:42:50.0 
```

“cD”显然表示客户端超时状态。因此，虽然我的 webapp 说 HAProxy 拒绝接受新连接，但 HAProxy 说我的 webapp 不接受返回数据。

我不包括我的 HAProxy 配置，因为我尝试了许多不同的参数值，结果基本相同。特别是，我在全局和服务器部分都将 maxconn 设置为高值和低值，而统计数据中总是发生的情况是最大会话数上升到不超过 7 左右。我的 JDBC 池大小也很高。

一起使用 JDBC 池和 HAProxy 池通常可以吗？人们以前遇到过这种问题吗？

我对如何解决这个问题有一个想法，即在每次查询之前发送一个“验证查询”。但是那里有一定的开销，我仍然想知道为什么我的 web 应用程序在直接进入 MySQL 时会成功，但在通过 HAProxy 时会断开连接。

我怎样才能进一步调试并获得比“cD”更多的信息？我尝试在调试模式下运行 HAProxy，但它似乎没有透露更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:14:37.307

尝试这个：

```
tune.bufsize 20480
tune.maxrewrite 2048 
```

请参阅[ha-docs](http://haproxy.1wt.eu/download/1.4/doc/configuration.txt)了解它们的含义。当您进入潜在致命参数的灰色区域时，您必须全神贯注地执行此操作。但值得一试，看看这是否有效。我刚刚解决了一个与文档相比毫无意义的问题。

默认值为 16k 与 1k。

# javascript - 单击除此处之外的所有位置事件

> ID：12931369
> 
> 赞同：37
> 
> 时间：2012-10-17T09:37:40.680
> 
> 标签：javascript, angularjs

想知道我将如何实现“在此元素上以外的所有地方单击”事件。

我有一些东西可以与文件资源管理器中的文件列表进行比较。您可以选择某些元素，但如果您在元素控制器外部单击，则需要取消选择所有内容。

![在此处输入图像描述](../Images/86f6e63398d989c075befd5c1aa0bbeb.png)

添加了屏幕截图以使其更清晰。所以我想要做的是，如果我点击除语言元素之外的任何地方，它应该触发一个事件。

**更新**

为了澄清，我不是在问如何使用 jQuery 来做到这一点。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-10-17T13:58:48.700

## 编辑：这个老旧的答案有几个问题。

**另外：标记社区 Wiki（对我来说没有积分）因为错误*

1.  N 次调用该指令的 N 次使用。对于具有匹配表达式的相同范围内的使用，这可能是不可取的。

2.  没有什么可以破坏事件处理程序！！！！坏的！坏的！坏的！

所以，我正在更新这个答案。希望它不会给任何人带来太多麻烦。

### 更新的答案

[这是一个修复了这些问题的新工具](http://plnkr.co/edit/kHvyDG1EEho4OkPhN7hJ?p=preview)……个别应用程序开发人员可能会遇到其他问题。这只是如何处理此问题的示例。

```
app.factory('clickAnywhereButHereService', function($document){
  var tracker = [];

  return function($scope, expr) {
    var i, t, len;
    for(i = 0, len = tracker.length; i < len; i++) {
      t = tracker[i];
      if(t.expr === expr && t.scope === $scope) {
        return t;    
      }
    }
    var handler = function() {
      $scope.$apply(expr);
    };

    $document.on('click', handler);

    // IMPORTANT! Tear down this event handler when the scope is destroyed.
    $scope.$on('$destroy', function(){
      $document.off('click', handler);
    });

    t = { scope: $scope, expr: expr };
    tracker.push(t);
    return t;
  };
});

app.directive('clickAnywhereButHere', function($document, clickAnywhereButHereService){
  return {
    restrict: 'A',
    link: function(scope, elem, attr, ctrl) {
      var handler = function(e) {
        e.stopPropagation();
      };
      elem.on('click', handler);

      scope.$on('$destroy', function(){
        elem.off('click', handler);
      });

      clickAnywhereButHereService(scope, attr.clickAnywhereButHere);
    }
  };
}); 
```

### 原始答案（修复了事件处理程序的拆卸）

你很接近你找到的一个答案，但我已经为你**[整理了一个 plunk](http://plnkr.co/edit/gqoNay?p=preview)**来告诉你它缺少什么。

```
app.directive('clickAnywhereButHere', function($document){
  return {
    restrict: 'A',
    link: function(scope, elem, attr, ctrl) {
      var elemClickHandler = function(e) {
        e.stopPropagation();
      };

      var docClickHandler = function() {
        scope.$apply(attr.clickAnywhereButHere);
      };

      elem.on('click', elemClickHandler);
      $document.on('click', docClickHandler);

      // teardown the event handlers when the scope is destroyed.
      scope.$on('$destroy', function() {
        elem.off('click', elemClickHandler);
        $document.off('click', docClickHandler);
      });
    }
  }
}) 
```

**HTML**

```
<a click-anywhere-but-here="clickedSomewhereElse()" 
  ng-click="clickedHere()">Don't Click Me!</a> 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-05-24T19:14:26.487

当前接受的答案的问题是，如果您多次使用该指令，则附加该指令的每个 DOM 元素都将防止冒泡（因此，如果您将它放在两个元素上，并且单击其中一个，则两者的回调将是被封锁）。

**编辑 - 避免使用 jQuery，清理**- 在您的范围内定义一个函数，并将其直接传递给该指令（不带括号），事件将在调用时传递给它。

```
app.directive('clickAnywhereButHere', function($document, $parse) {
    return {
        restrict: 'A',
        scope: {
            callback : '=clickAnywhereButHere'
        },
        link: function(scope, element, attr, ctrl) {
            var handler = function(event) {
                if (!element[0].contains(event.target)) {
                    scope.callback(event);
                 }
            };

            $document.on('click', handler);
            scope.$on('$destroy', function() {
                $document.off('click', handler);
            });
        }
    }
}); 
```

HTML 中的用法

```
<a click-anywhere-but-here="myFunction"></a> 
```

在控制器中的使用

```
 $scope.myFunction = function (event) { ... } 
```

-

请注意，您可能需要`scope.callback(event)`用`scope.$apply()`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-18T08:46:04.680

如果你有很多元素需要这个指令，这里是另一个性能优化的解决方案。（例如一个有 100 多行的列表，每行都有这个指令）

这将始终只包含一个 $document 监听器

```
angular.module('app').directive('clickElsewhere', ['$document', function ($document) {
return {
  link: function postLink(scope, element, attr) {

    var elsewhere = true;

    element.on('click', function(e) {
      elsewhere = false;
      $document.off('click', clickElsewhere);
      $document.on('click', clickElsewhere);
    });

    var clickElsewhere = function() {
      if (elsewhere) {
        scope.$apply(attr.clickElsewhere);
        $document.off('click', clickElsewhere);
      }
      elsewhere = true;
    };

  }
};
}]); 
```

Max Bates 的解决方案的问题是所有指令都在为 $document.on('click', function(...)); 添加一个监听器。导致性能问题的事件。

Max Bates 已经说明了接受答案的问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-17T10:17:18.290

在这篇[博](http://www.bennadel.com/blog/2422-Capturing-Document-Click-Events-With-AngularJS.htm)文上找到了答案。

指示：

```
app.directive('documentClick', function ($document, $parse) {

  var linkFunction = function ($scope, $element, $attributes) {

    var scopeExpression = $attributes.documentClick;
    var invoker = $parse(scopeExpression);

    $document.on('click', function (event) {

      $scope.$apply(function () {
        invoker($scope, { $event: event });
      });

    });

  };

  return linkFunction;

}); 
```

控制器：

```
app.controller('PageCtrl', function ($scope) {

  $scope.click = function (e) {
    if (!$(e.target).is('.language')) {
      //do stuff
    }
  };

}); 
```

看法：

```
<body ng-controller='PageCtrl' document-click='click($event)'></body> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-08T07:07:42.033

这是一个基于 Max 解决方案的变体，但在标准角度事件指令方面更自然：

```
app.directive('clickOut', function($document) {
    return {
        restrict: 'A',
        scope: {
            clickOut: '&'
        },
        link: function (scope, element) {
            var handler = function(event) {
                if (!element[0].contains(event.target)) {
                    scope.$apply(function () {
                        scope.clickOut({ $event : event }); 
                    });
                }
            };

            $document.on('click', handler);
            scope.$on('$destroy', function() {
                $document.off('click', handler);
            });
        }
    };
}); 
```

用法

```
<div click-out="myFunction()"></div> 
```

传递点击事件

```
<div click-out="myFunction($event)"></div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-22T10:26:39.647

最简单的方法是检查元素的 scope.$id 和 clickScope.$id（点击事件目标范围.$id）。

```
link: function(scope, element, attrs) { 
    //close element when mouse click outside
    var documentClickHandler = function(event) {
        var clickScope = angular.element(event.target).scope();
        if (clickScope.$id != scope.$id) {
            //clickScope.$parent is for clicking on the directive children scope
            if(clickScope.$parent === null || 
               clickScope.$parent.$id != scope.$id){
               //Click everywhere but on this element
               //Do anything you want here, like close your element;
            }
        }

    };

    $document.on('click', documentClickHandler);

    scope.$on('$destroy', function() {
        $document.off('click', documentClickHandler);
    });
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-10T02:51:26.590

## 此解决方案的好处：

1.  您只需要一个绑定到`$(document)`. 其他事件的触发将取决于`$emit`范围事件。
2.  您可以同时使用表达式`click-elsewhere="show=false"`和`click-elsewhere="fn()"`，感谢[`$parse`](https://docs.angularjs.org/api/ng/service/$parse)。

## 代码：

```
// broadcast click event within AppCtrl
app.controller('AppCtrl', function($rootScope) {
  $(document).on('click', function(e) {
    // use $emit so the event stays inside $rootScope
    $rootScope.$emit('click', {target: e.target});
  };
};

app.directive('clickElsewhere', function($rootScope) {
  return {
    restrict: 'A',
    compile: function($element, attr) {
      // store fn in compile so it only execute once
      var fn = $parse(attr['clickElsewhere']); 

      return function(scope, element) {
        var offEvent = $rootScope.$on('click', function(event, target) {
          if ( (element.find($(target)).length) || element.is($(target)) ) return;

          scope.$apply(function() {
            fn(scope, {$event: event});
          });
        });

        scope.$on('$destroy', offEvent);
      };
    }
  }; 
```

## HTML 中的用法：

1.  `click-elsewhere="fn()"`
2.  `click-elsewhere="show=false"`

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-17T09:41:17.090

这可能有点脱离上下文，但您可以对所有选定项目进行分类（例如“选定”），当用户单击“请勿点击此处”元素时，您可以对当前分类为“选定”的所有项目进行解密，并且对特定元素进行分类...

# clearcase - 如何在 RTC 源代码管理中查看传递到流的所有更改

> ID：12931372
> 
> 赞同：2
> 
> 时间：2012-10-17T09:38:10.023
> 
> 标签：clearcase, rtc

如何查看交付给流的所有更改和/或特定开发人员交付的更改？
我可以看到为给定的 ClearCase UCM 流列出的活动，但我没有看到 RTC 流的任何内容。

我一直在考虑使用“工作项查询”，但这似乎不允许此功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T10:28:28.953

您可以搜索变更集（有点像您列出按所有者排序的 ClearCase 活动）：

右键单击“ `Source-Control`”并选择“ `Search / Change sets`”：您将能够在那里进行查询。

![搜索变更集](../Images/f8c623fe15a0b59274e7ab78a8c247d1.png)

另一个不太了解这些更改集的地方是“团队仪表板”视图的“事件日志”部分，您可以通过“源代码控制更改”对其进行过滤。

* * *

您将在以下位置找到有关“更改集搜索”的更多说明：

*   [RTC 功能页面](https://jazz.net/products/rational-team-concert/features/scm/)和这个YouTube[视频](https://www.youtube.com/watch?v=iyX32R7da2c&feature=player_embedded)。
*   文章“[使用 Rational Team Concert 查找丢失的内容](https://jazz.net/library/article/191/)”提出了一些替代更改集搜索的方法。
*   [此线程](https://jazz.net/forum/questions/35697/how-to-search-for-files-in-a-stream-without-loading-it)确认“您可以搜索具有给定名称的文件，但当前无法搜索包含给定文本的文件。”

结果似乎没有直接显示文件：使用“名称开头”字段是一种限制这些更改集中包含的文件数量的方法。

[该功能的其他](https://jazz.net/jazz/web/projects/Rational%20Team%20Concert#action=com.ibm.team.workitem.viewWorkItem&id=201476) [增强功能](https://jazz.net/jazz/web/projects/Rational%20Team%20Concert#action=com.ibm.team.workitem.viewWorkItem&id=152775) [正在进行](https://jazz.net/jazz/web/projects/Rational%20Team%20Concert#action=com.ibm.team.workitem.viewWorkItem&id=172480) [中](https://jazz.net/jazz/web/projects/Rational%20Team%20Concert#action=com.ibm.team.workitem.viewWorkItem&id=154308)：请参阅[此搜索](https://jazz.net/jazz/web/projects/Rational%20Team%20Concert#action=com.ibm.team.workitem.search&q=search%20files%20change%20sets)。

# javascript - Javascript：如何在 HTTP GET 中传递当前用户凭据以进行基本身份验证

> ID：12931373
> 
> 赞同：2
> 
> 时间：2012-10-17T09:38:11.090
> 
> 标签：javascript, authentication, xmlhttprequest

我想将用户从一台服务器上的一个网页重定向到另一台服务器上的另一个页面。第一个应用程序使用 Active Directory 进行身份验证。第二个应用程序没有使用 Active Directory 进行身份验证。但是，第二个应用程序允许在 HTTP GET 请求中发送带有基本身份验证的 auth 标头。

我测试了发送 Auth 标头并成功：

```
function DoLogin()
{
    var xmlhttp;
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        if(xmlhttp.status==200)
            window.location = "http://server:port/home";
        else
            document.getElementById("myDiv").innerHTML="Error in Login";
        }
      }
    xmlhttp.open("GET","http://server:part/auth",true);
    xmlhttp.setRequestHeader("Accept","application/rdf+xml");
    xmlhttp.setRequestHeader("Authorization","Basic Z29082FtaWs6TDN0bWVpbkBPZmZp=45^");
    xmlhttp.send();
} 
```

但是，在这段代码中，我发送了一组硬编码的凭据。我无权访问创建此哈希所需的用户名和密码。我想知道是否有任何方法可以获取凭据的哈希并将它们传递下去？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:55:19.487

出于安全原因，我认为没有也不应该有办法获取第一个站点（站点 A）的 Active Directory 身份验证的凭据。

你的选择是

1.  也在第二台服务器上实施 Active Directory 身份验证
2.  作为一种解决方法，实施某种基于令牌的身份验证，让用户在识别到站点 A 后访问站点 B。

在这两种情况下，您都需要访问站点 B。

如果您无权访问站点 BI，则看不到解决方案。

# java - Java / PriorityQueue 和线程

> ID：12931377
> 
> 赞同：1
> 
> 时间：2012-10-17T09:38:21.897
> 
> 标签：java, multithreading, thread-safety, priority-queue

在我的应用程序中，我有 4 个线程将元素添加到 a`PriorityBlockingQueue`和一个线程轮询元素。对于轮询线程，队列似乎不可访问。我认为我必须采取措施使其线程安全。

在我取出第一个元素后，我清除了队列，它应该被其他 4 个填充线程再次填充。

轮询和填充线程在同一个类中，该类包含`PriorityBlockingQueue`.

这是投票的代码：

```
private class UPPainter implements Runnable {
    @Override
    public void run() {
        while(queue.size() > 0) {
            ReceivedMsg msg = queue.poll();
            queue.clear();
            for(final IPacketListener c : listeners) {
                new Thread(new ListenerUp(c, msg)).start();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:08:36.920

当您的消费者线程启动时，队列可能为空，因此 size = 0 和 run() 将退出。您实际上必须等待输入消息。清除队列对我来说似乎没有意义？如果要“关闭”消费者线程，请发送特殊的队列结束消息。使用 queue.take() 实际阻塞，直到插入元素：

```
private class UPPainter implements Runnable {  
    @Override  
    public void run() {  
        while(true) {  
            ReceivedMsg msg = queue.take();  
            for(final IPacketListener c : listeners) {  
                new Thread(new ListenerUp(c, msg)).start();  
            }  
        }  
    }  
} 
```

# string - perl：在哈希值中使用逗号

> ID：12931382
> 
> 赞同：0
> 
> 时间：2012-10-17T09:38:32.427
> 
> 标签：string, perl, hash

我有键值对作为“语句：测试，数据”，其中“测试，数据”是哈希值。在尝试使用这些值创建散列时，perl 将值拆分为逗号。有没有一种方法可以将带逗号的字符串用作值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T09:43:33.070

Perl 中没有任何东西可以阻止您使用 'test,data' 作为哈希值。如果您传入的字符串字面上是“语句：测试，数据”，您可以使用此代码添加到哈希中：

```
my ($key, $value) = ($string =~ /(\w+):(.*)/);
next unless $key and $value;  # skip bad stuff - up to you
$hash{$key} = $value; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T09:42:51.113

Perl 不会用逗号分割字符串，除非你告诉它这样做。

```
#!/usr/bin/perl

use v5.16;
use warnings;
use Data::Dump 'ddx';

my $data = "statement:test,data";
my %hash;

my ($key, $value) = split(":", $data);

$hash{$key} = $value;

ddx \%hash; 
```

给出：

```
# split.pl:14: { statement => "test,data" } 
```

# .net - HTML to PDF - 找出哪个元素在哪个页面上

> ID：12931391
> 
> 赞同：1
> 
> 时间：2012-10-17T09:38:51.213
> 
> 标签：.net, wkhtmltopdf

我通过从 .Net 启动子进程，使用 wkhtmltopdf 将 HTML 转换为 PDF。处理后我需要知道一些 HTML 元素的页码。知道如何实现这一目标吗？

在 .Net 上工作的任何替代方案（带有示例代码）也可以。但它必须尊重[分页媒体的 CSS 属性](http://www.w3.org/TR/CSS2/page.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:35:24.867

您至少可以通过转储大纲`--dump-outline <filename>`并解析此文件来找出所有标题的页面。

# java - 为什么返回 (int) java.lang.Math.round 需要 (int)？

> ID：12931395
> 
> 赞同：0
> 
> 时间：2012-10-17T09:39:00.133
> 
> 标签：java, return-type

我写

```
return java.lang.Math.round(someVariable*1.234234); 
```

在一个返回 int 的函数中进入 eclipse 但它希望我包含 (int) 以使其像这样

```
 return (int) java.lang.Math.round 
```

这个（int）在做什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:40:35.997

好吧，如果您查看文档，

[http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html)

`Math.round`当它的参数不是浮点数时返回一个long。

因此，您必须将 long 转换为 int。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:03:06.120

该`Math.round(double a)`方法返回一个`long`比 更大的类型`int`。因此，您的行为可能会导致信息丢失。您需要在强制转换的帮助下明确告诉编译器您知道这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:40:05.577

用`Math.round`a 调用的`double`返回 a `long`。它在那里将`long`结果转换为`int`类型......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T09:41:00.447

它将返回的变量的数据类型[***转换***](http://en.wikipedia.org/wiki/Type_conversion)`long`为a `int`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T09:43:15.780

round 有 2 个重载，

长轮（双a）；

和

int round(float a);

由于您编写的 const 是双精度数，因此您需要将其转换为浮点数。尝试：

```
return java.lang.Math.round(someVariable*1.234234f); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T09:44:22.463

您正在返回函数的结果，该函数`java.lang.Math.round(double a)`是`long`需要`int`.
因此，您必须将函数原型中的返回类型从`int`更改为`long`

# jquery - 在 DIV 上使用 jQuery 进行 CSS Rotate 会导致异常对齐

> ID：12931397
> 
> 赞同：0
> 
> 时间：2012-10-17T09:39:08.827
> 
> 标签：jquery, jquery-animate, css-transitions

[所以我已经看到了一个关于如何使用 jQuery 和 CSS3 操作旋转 DIV 的好例子](https://stackoverflow.com/questions/5462275/animate-element-transform-rotate)，我现在的问题是，当我试图在 div 上创建一个光滑的悬停效果时，我需要 DIV 将 backwords 转到 -15deg 然后前进到 15 度。

在示例中，我将此效果附加到单击按钮上。

发生的情况是，当您第一次按“bk”时，div 似乎会卡住，然后当您按“fwd”时又会再次卡住。

我似乎无法弄清楚为什么。

[http://jsfiddle.net/ZnvKs/](http://jsfiddle.net/ZnvKs/)

```
.red
{
    width:200px;
    position:absolute;
    top:50px;
    left:50px;
    height:200px;
    background:red;
    -webkit-transform: rotate(10deg);
    border-spacing:0px;
}

$('#bk').click(function() {

    $('.red').animate({
        borderSpacing: -15
    }, {
        step: function(now, fx) {
            $(this).css('-webkit-transform', 'rotate(' + now + 'deg)');
        },
        duration: 'slow'
    }, 'linear');
});

$('#fwd').click(function() {

    $('.red').animate({
        borderSpacing: 15
    }, {
        step: function(now, fx) {
            $(this).css('-webkit-transform', 'rotate(' + now + 'deg)');
        },
        duration: 'slow'
    }, 'linear');

});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:49:21.600

如果你调试 step 函数，它会发生两次，第一次 now 参数的值为 0，下一次它的值为 15。

你需要这一切吗。你可以通过更新类来对 CSS 做同样的事情。

更新：

这是脚本：

[http://jsfiddle.net/carlosmartinezt/ZnvKs/3/](http://jsfiddle.net/carlosmartinezt/ZnvKs/3/)

```
.red
{
    width:200px;
    position:absolute;
    top:50px;
    left:50px;
    height:200px;
    background:red;
    -webkit-transform: rotate(10deg);
    -webkit-transition: 0.5s linear;
    border-spacing:0px;
}
.red.bk{
    -webkit-transform: rotate(-15deg);
}
.red.fw{
    -webkit-transform: rotate(15deg);
}​ 
```

然后简化脚本

```
$('#bk').click(function() {
    $('.red').removeClass("fw").addClass("bk");
});

$('#fwd').click(function() {
    $('.red').removeClass("bk").addClass("fw");

});​ 
```

# postgresql - 加快 postgres 查询

> ID：12931398
> 
> 赞同：0
> 
> 时间：2012-10-17T09:39:17.890
> 
> 标签：postgresql, full-text-search

我有 60k 条记录的表“拍卖”。它有一个向量列，其中包含 tsearch 向量，如下所示

```
auctions.tsvector_content_tsearch
107658 | '-75':75 '-83':81 '0.265':49 '0.50':140 '1':62 '1000':61 '1080':38 '16':39 '160':91 '170':86 '1920':36 '1920x1080':65,69 '2':154 '219':129 '23':3,20 '23.0':31 '236v3lsb':6,23 '24':164 '24.75':134 '250':58 '3.190':117 '30':80 '426':127 '5':54 '5.0':99 '56':74 '566':125 '9':40 'black':45 'cal':32 'cd/m2':59 'compatible':158 'czarny':46 'czas':51 'czuwać':139 'częstotliwość':71,77 'd':110,114 'd-sub':109 'dodatkowy':146,152 'dvi':7,24,113 'dvi-d':112 'ekran':30 'energia':131,137 'energy':97 'epeat':100 'ergonomics':104 'full':41 'g':120 'gs':106 'gwarancja':153,161 'hd':42 'hz':76 'informacja':151 'jasność':56 'kabel':147,149 'kensington':156 'kg':116,118 'khz':82 'kolor':43 'kontrast':60 'kąt':83,88 'lcd':2,15,19 'led':4,21 'lina':28 'lock':157 'maksymalny':64 'matryca':34,53,57 'miejsce':165 'miesiąc':163 'mm':50 'monitor':1,14,18,96 'mś':55 'nazwać':12 'norma':93 'obudowa':44 'odchylać':72,78 'ogólny':17 'okres':159 'opis':16 'optymalny':68 'philips':5,11,22 'piksel':66,70 'pionowy':73,85 'plamka':48 'pobór':130,136 'poziom':90 'poziomy':79,90 'producent':10 'przekątna':29 'przeć':133 'reakcja':52 'rodzina':25 'rohs':102 'rozdzielczość':63,67 'rękojmia':160 'serwis':167 'serwisować':166 'silver':101 'specyfikacja':8 'spełniać':94 'star':98 'stopień':87,92 'sub':111 'techniczny':9 'tryb':138 'tryba':138 'tuv':103,105 'typ':13,33 'v':27 'v-line':26 'vga':150 'waga':115 'wbudować':142 'widzenia':84,89 'widzenie':84,89 'widzieć':84,89 'wielkość':47 'wuxga':35 'wymiar':119 'wyposażenie':145 'wyposażyć':145 'x':37,121,123,126,128 'zasilacz':143 'zasilać':148 'zewn':108 'zewnętrzny':168 'złączać':107 'złącze':107 'łat':155 'ś':122 
```

表拍卖在该列上有一个索引：

```
 "auctions_tsvector_content_tsearch_idx" gin (tsvector_content_tsearch) 
```

当我搜索一些匹配的向量查询大约需要 4000-5000 毫秒；那太长了。
有什么办法可以加快速度吗？

```
EXPLAIN SELECT auctions.id FROM auctions WHERE (auctions.tsvector_content_tsearch @@ to_tsquery('polish', 'lcd'));

           QUERY PLAN                          
--------------------------------------------------------------
 Seq Scan on auctions  (cost=0.00..6598.02 rows=7762 width=4)
   Filter: (tsvector_content_tsearch @@ '''lcd'''::tsquery)
(2 rows) 
```

****_ 编辑 __****

 **好的，我想我发现了一个问题：波兰语词典。使用标准的 postgres 字典修复长时间的问题。感谢提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:56:13.967

显然，规划器估计顺序扫描会比使用索引更快。尝试以下操作：

*   `SET enable_seqscan=off`（但对测试有用 - 不要在生产中使用它）
*   提高统计目标

这种行为有时会发生在 GIN 索引中。检查PostgreSQL 邮件列表上的[这个线程。](http://archives.postgresql.org/pgsql-hackers/2011-11/msg01754.php)您还可以查阅有关此问题的官方[PostgreSQL 文档。](http://www.postgresql.org/docs/current/static/textsearch-indexes.html)**

# sql - 在一列上选择不同的

> ID：12931399
> 
> 赞同：0
> 
> 时间：2012-10-17T09:39:24.223
> 
> 标签：sql, sql-server-2008, distinct

这是我的查询：

```
SELECT DISTINCT TOP 500 
bk.firstname,
bk.surname,
bk.email,
county.region_id,
inspection.inspection_date

FROM
bken bk
LEFT OUTER JOIN county
  ON bk.county = county.code
LEFT OUTER JOIN inspection
  ON bk.inspid = inspection.inspid

WHERE
bk.firstname IS NOT NULL
AND bk.surname IS NOT NULL
AND bk.email IS NOT NULL
AND county.region_id IS NOT NULL
AND  county.region_id <> 10  
AND inspection_date > '04/01/2012 00:00:00.000'
AND inspection_date < '10/01/2012 00:00:00.000' 
```

我的目标是获取 500 个不同人的样本。

不幸的是，这会返回重复的名称（尽管检查日期不同），所以我试图选择不同的姓氏，看看这是否能解决我的问题。谁能帮我做到这一点？

我正在使用 Microsoft SQL Server 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:42:05.673

使用`group by`：

```
SELECT TOP 500 
bk.firstname,
bk.surname,
bk.email,
county.region_id,
max(inspection.inspection_date)

FROM
bken bk
LEFT OUTER JOIN county
  ON bk.county = county.code
LEFT OUTER JOIN inspection
  ON bk.inspid = inspection.inspid

WHERE
bk.firstname IS NOT NULL
AND bk.surname IS NOT NULL
AND bk.email IS NOT NULL
AND county.region_id IS NOT NULL
AND  county.region_id <> 10  
AND inspection_date > '04/01/2012 00:00:00.000'
AND inspection_date < '10/01/2012 00:00:00.000'
GROUP BY 
bk.firstname,
bk.surname,
bk.email,
county.region_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:43:10.927

您必须使用聚合函数，例如`inspection.inspection_date`没有如下：`min``group by``distinct`

```
SELECT TOP 500 
bk.firstname,
bk.surname,
bk.email,
county.region_id,
min(inspection.inspection_date) as inspection_date    
FROM
bken bk
LEFT OUTER JOIN county
  ON bk.county = county.code
LEFT OUTER JOIN inspection
  ON bk.inspid = inspection.inspid

WHERE
bk.firstname IS NOT NULL
AND bk.surname IS NOT NULL
AND bk.email IS NOT NULL
AND county.region_id IS NOT NULL
AND  county.region_id <> 10  
AND inspection_date > '04/01/2012 00:00:00.000'
AND inspection_date < '10/01/2012 00:00:00.000'
group by bk.firstname,
         bk.surname,
         bk.email,
         county.region_id 
```

# jquery - Jquery 库不能与 sencha touch 一起使用？

> ID：12931404
> 
> 赞同：2
> 
> 时间：2012-10-17T09:39:55.207
> 
> 标签：jquery, extjs, sencha-touch

我目前正在构建一个基于 Sencha Touch 2 的移动应用程序。目前我只是在尝试一些实验来看看 Sencha 也有什么能力。

今天我遇到了一件看起来很奇怪的事情——我只是想尝试一下是否可以将 jQuery 库用于我的应用程序并使用它的附加功能。

最奇怪的是，当我制作 jquery 函数时，我无法得到任何响应。

我已经将 jquery 库和我的脚本包含在我的 sencha 目录中的 index.html 文件中，我只是制作了一个简单的愚蠢测试脚本，看看它是否有效 - 但是当我尝试它时我根本没有得到任何反应在浏览器中。我可以看到该库和脚本是通过 firebug 包含的。（如您所见，我的 jquery 测试只是一个简单的单击事件，应该显示一个 div，但它不是）。

我是不是很愚蠢-或者我在这里错过了什么？

这是我的 index.html 文件

```
<!DOCTYPE HTML>
<html manifest="" lang="en-US">
<head>
<meta charset="UTF-8">
<title>scroller</title>

<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

<script type="text/javascript">

    $(document).ready(function() {

        $("#show_me").click(function () {
            $('#magic').slideDown('slow');
        });

    });

</script>

<link rel="stylesheet" href="resources/css/sencha-touch.css" type="text/css">
<style type="text/css">
     /**
     * Example of an initial loading indicator.
     * It is recommended to keep this as minimal as possible to provide instant feedback
     * while other resources are still being loaded for the first time
     */
    html, body {
        height: 100%;
        background-color: #1985D0
    }

    #appLoadingIndicator {
        position: absolute;
        top: 50%;
        margin-top: -15px;
        text-align: center;
        width: 100%;
        height: 30px;
        -webkit-animation-name: appLoadingIndicator;
        -webkit-animation-duration: 0.5s;
        -webkit-animation-iteration-count: infinite;
        -webkit-animation-direction: linear;
    }

    #appLoadingIndicator > * {
        background-color: #FFFFFF;
        display: inline-block;
        height: 30px;
        -webkit-border-radius: 15px;
        margin: 0 5px;
        width: 30px;
        opacity: 0.8;
    }

    @-webkit-keyframes appLoadingIndicator{
        0% {
            opacity: 0.8
        }
        50% {
            opacity: 0
        }
        100% {
            opacity: 0.8
        }
    }
</style>
<!-- The line below must be kept intact for Sencha Command to build your application -->
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=true"></script>
<!-- script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script--->
<script id="microloader" type="text/javascript" src="sdk/microloader/development.js"></script>
<!--<script type="text/javascript" src="app.js"></script>-->
<script type="text/javascript" src="js/cordova-1.7.0.js"></script>
<script type="text/javascript" src="js/phonegap_shortcuts.js"></script>
<script type="text/javascript" src="js/maps.js"></script>
<script type="text/javascript" src="js/zepto.min.js"></script>
<script type="text/javascript" src="js/filters.js"></script>
<script type="text/javascript" src="js/proxy.js"></script>
<!--<script type="text/javascript" src="js/index.js"></script>-->
<!--
<script type="text/javascript">
    document.addEventListener("deviceready", app.mainLaunch, false);
</script>
-->
<script type="text/javascript">
    function onDeviceReady() {
        pictureSource=navigator.camera.PictureSourceType;
        destinationType=navigator.camera.DestinationType;
    }
    function PictureSourceType() {};
    PictureSourceType.PHOTO_LIBRARY = 0;
    PictureSourceType.CAMERA = 1;
    //var ja = phonegap.shortcuts.getLocation();
    //console.log('ja:'+ja);
    document.addEventListener("deviceready", onDeviceReady, false);
</script>
    </head>
    <body>
    <div id="appLoadingIndicator">
    <div></div>
    <div></div>
    <div></div>
    </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:39:51.720

也许您单击的元素没有 id 'showme'。这可能是因为您创建的按钮在 Sencha 中具有 id 'showme'，但实际呈现的 HTML 包含另一个 id。

如果这是真的（当然你可以使用 FireBug 来检查），你可能想听按钮上的 'tap' 事件，而不是使用 jQuery 绑定到 'click' 事件。有关文档，请参阅[http://docs.sencha.com/touch/2-0/#!/api/Ext.Button-event-tap](http://docs.sencha.com/touch/2-0/#!/api/Ext.Button-event-tap)。

可以将 jQuery 与 Sencha 一起使用，但重要的是要记住 Sencha 中的组件并不是 DOM 中元素的直接表示，Sencha 中的某些组件在渲染时由多个 DOM 元素组成。

希望这可以帮助

# magento - 谷歌分析漏斗忽略步骤

> ID：12931405
> 
> 赞同：0
> 
> 时间：2012-10-17T09:39:58.823
> 
> 标签：magento, google-analytics

我在 Google Analytics 上跟踪 Magento 购买时遇到了以下问题（自定义主题，与默认结帐流程不同）。

我的目标设置如下：[http://db.tt/W30D0CnL](http://db.tt/W30D0CnL)，其中第 3 步等于`/checkout/onepage/opc-review-placeOrderClicked`

正如您在第 2 步（结帐开始）之后从漏斗可视化 ( [http://db.tt/moluI29d](http://db.tt/moluI29d) ) 中看到的，有很多出口`/checkout/onepage/opc-review-placeOrderClicked`设置为第 3 步，但第 3 步报告始终为 0。

有什么我在这里想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:34:57.873

我发现了问题。显然`/checkout/onepage`，即使在第三步中，第二点 ( ) 也被触发了。

当我将其更改为正则表达式匹配 (/checkout/onepage$) 时，一切都开始工作了。

# objective-c - 如何清除 tableviewcell 中的数据再次开始重新加载？

> ID：12931412
> 
> 赞同：1
> 
> 时间：2012-10-17T09:40:19.777
> 
> 标签：objective-c, ios, ios5, uitableview

我正在开发一个蓝牙应用程序。1）我想在启动应用程序时隐藏一个表格视图..在我按下一个操作按钮后我想启用一个表格视图..2）如果我再次按下一个操作按钮意味着 tableviewcell 清除数据并在搜索之前显示为空..给​​我一个想法..

一些代码-

```
- (IBAction)connectButtonTouched:(id)sender
{
[self.deviceTable reloadData];
self.connectButton.enabled = YES;
[self.deviceTable reloadData];
peripheralManager = [[PeripheralManager alloc] init];
peripheralManager.delegate = self;

[peripheralManager scanForPeripheralsAndConnect];
[self.deviceTable reloadData];
[NSTimer scheduledTimerWithTimeInterval:(float)5.0 target:self selector:@selector       (connectionTimer:) userInfo:nil repeats:YES];
alert=[[UIAlertView alloc] initWithTitle:@"Bluetooth" message:@"Scanning" delegate:nil    cancelButtonTitle:@"Cancel" otherButtonTitles:nil];
UIActivityIndicatorView *progress=[[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(125, 50, 30, 30)];
[alert addSubview:progress];
[progress startAnimating];
[alert show];
} 
```

表视图

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [device count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier=@"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(cell==nil)
{
cell =[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:CellIdentifier];

}
cell.textLabel.text=[device objectAtIndex:indexPath.row];
cell.accessoryType=UITableViewCellAccessoryDetailDisclosureButton;
return cell;
} 
```

表视图委托

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell=[tableView cellForRowAtIndexPath:indexPath];

[self performSegueWithIdentifier:@"TableDetails" sender:tableView];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:56:02.803

在 .h 文件中添加**BOOL 标志**

现在在 ViewDidLoad 添加这个：

```
flag = FALSE; 
```

在 tableview 委托方法中

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
   if(flag)
     return [device count];
   else
     return 0;
} 
```

在您的按钮操作方法中：

```
 - (IBAction)connectButtonTouched:(id)sender
 {
    if(!flag)
       flag = TRUE;
    else
       flag = FALSE;

    [self.deviceTable reloadData];
    //your other code here
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:56:14.233

如果它们在同一个视图中，为什么不给 tableView 的 alpha 0 和 userInteractionEnabled = NO ？

虽然，我认为如果不是从界面构建器链接您的 tableView，而是将其保留为成员并在您点击按钮时初始化/重新初始化它，会更容易。

类似于：`- (IBAction)connectButtonTouched:(id)sender {

if (self.deviceTable) { [self.deviceTable removefromSuperview]; self.deviceTable = nil; }

self.deviceTable = [[UITableView alloc] init];

//等等`

您也可以在 peripheralManager 委托中放置另一种方法......类似于 -(void)didFinishScanning 并在内部重绘您的表格视图。

我希望我能很好地理解这个问题，并以任何方式帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:00:56.683

1.如果您想在单击按钮之前隐藏表格视图，您可以使用

`tableView.hidden=YES;` 和里面

`- (IBAction)connectButtonTouched:(id)sender`，您可以通过使用使其可见

```
tableView.hidden=NO;
[tableView reloadData] 
```

或者

2.如果您正在为iPad开发应用程序，那么您可以使用`UIPopOverController`显示数据。 单击按钮时，您可以加载`tableView`内部。`UIPopOverController`

# php - PHP日期在函数/非对象错误中从格式创建

> ID：12931417
> 
> 赞同：0
> 
> 时间：2012-10-17T09:40:39.360
> 
> 标签：php, date

我有以下代码产生此错误：致命错误：调用第 58 行 C:\wamp\www\grid2.php 中非对象上的成员函数 setTimeZone()

我正在尝试设置此函数以接收如下日期字符串，应用时间偏移量，然后以函数调用中设置的格式将其输出回来......但没有运气。

```
<?php
if (!session_id()) session_start();
$_SESSION["timeoffset"] = "Europe/Amsterdam";

function formatDate($date, $format){
// use the the appropriate timezone for your stamp
$timestamp = DateTime::createFromFormat($format, $date, new DateTimeZone('UTC'));
// set it to whatever you want to convert it
$timestamp->setTimeZone(new DateTimeZone($_SESSION["timeoffset"]));
echo $timestamp->format($format);   
}

formatDate('2012-10-14T21:15', 'Y-m-d\TH:i');
?> 
```

我还试图弄清楚如何以一定数量的分钟数返回字符串。

因此字符串“2012-10-14T21:15”将添加 5 分钟 =“2012-10-14T21:20”

任何帮助将不胜感激！

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:44:34.153

[DateTime::createFromFormat](http://php.net/manual/en/datetime.createfromformat.php)将在失败时返回 false。这意味着：

```
DateTime::createFromFormat($format, $date, new DateTimeZone('UTC')); 
```

失败并且 $timestamp 为假（var_dump($timestamp) 会告诉你）。在不知道您作为函数 formatDate 的参数传递的内容的情况下，我认为没有人能够准确地弄清楚您做错了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:47:01.287

而是使用这个

`$timestamp->setTimeZone(new DateTimeZone("Europe/Amsterdam"));`

我认为`sessions`数组没有返回字符串`Europe/Amsterdam`。

进行调试

# c#-4.0 - 将网格视图数据导出到 Excel

> ID：12931420
> 
> 赞同：0
> 
> 时间：2012-10-17T09:41:08.230
> 
> 标签：c#-4.0, export-to-excel

使用 Visual Studio 2010 和 Server Management Studio 2008 我做了一个功能，老师可以通过它查看所有年份所有学生的成绩：

通过下拉选择，它在网格视图中显示数据，并带有一个按钮供教师在 Excel 工作表中查看选择。对于某些选择，有很多数据，因此需要时间。

现在我的客户不想在页面中显示网格视图，而是根据下拉选择直接导出到 Excel。

任何人都可以帮助我做到这一点.. 它会让我的页面加载速度更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:23:00.480

首先在 ssms 中编写存储过程来检索数据。它应该像

```
 CREATE PROCEDURE [Retrieveresult] (@selectedfield nvarchar(50))
   AS  
   BEGIN  
   select * from students where condition=@selectfield
   END 
```

然后在视觉工作室

```
 oConn = new SqlConnection();
   oConn.ConnectionString = "your connection string"
   SqlCommand command = new SqlCommand("Retrieveresult");
    command.CommandType = System.Data.CommandType.StoredProcedure;
     oConn.Open();
   command.Parameters.Add(new SqlParameter("@selectfield", System.Data.SqlDbType.nvarchar(50))); 
    command.Parameters["@selectfield"].Value="selected value from gridview"
   IDataReader oDr;
    oDr=command.executereader();
  while(oDr.read())
     {
       Get the corresponding values in the objects 
      } 
```

# sql - 根据两对组合的权重找到最接近的数字

> ID：12931421
> 
> 赞同：2
> 
> 时间：2012-10-17T09:41:09.920
> 
> 标签：sql, sql-server, sql-server-2008, tsql

这是我之前的问题的延续[在 SQL Server 中生成项目组合的有效方法是什么？](https://stackoverflow.com/questions/12928718/what-is-the-efficient-way-to-generate-combination-of-items-in-sql-server)让我解释一下我正在寻找的真实场景以及为什么....

假设我有一张桌子如下

```
Declare @t table(Number Int)
Insert Into @t Values(10),(20),(30),(40),(18)

Number
10
20
30
40
18 
```

我需要寻找一个数字，比如 35（或最接近）。

```
Declare @NumberToLookfor = 35 
```

现在将根据两对组合的权重进行搜索。让我解释。

```
10+20 = 30

10+30 = 40

10+40 = 50

10+18 = 28

20 + 30 = 50

20 + 40 = 60

20 + 18 = 38

30 + 40 = 70

30 + 18 = 48

40 + 18 = 58 
```

所以我们可以计算出任何两个数字的权重都是候选者，例如 (10,20), (10,30)...(40,18)

一旦我们得到它，在这种情况下，前 3 个最接近的对将是 (20,18), (10,20) , (10,30)。因为 35 和 38 (20+18) 之间的污垢是 3，而其他对 (10,20) 和 (10,30) 的污垢是 5。

我认为解释很清楚，可以理解我在寻找什么。（如果没有，请告诉我）

这样做最有效的方法是什么？

我的尝试

```
Declare @t table(Number Int)
Insert Into @t Values(10),(20),(30),(40),(18)

;WITH Cte1 (Number,Ids,TotalWeight) AS 
( 
    SELECT  Number           
            , ',' + CAST(Number AS VARCHAR(MAX)) 
            ,CAST(Number AS INT) 
    FROM @t 
    UNION ALL 
    SELECT  p.Number 
            ,c.Ids + ',' +  CAST(p.Number AS VARCHAR(MAX)) 
            ,CAST(c.TotalWeight + p.Number AS INT)            
    FROM @t AS p JOIN Cte1 c ON p.Number < c.Number
),Cte2 AS( 
    SELECT          
        *
        ,DENSE_RANK() OVER(ORDER BY ABS(TotalWeight - 35)) [rank] 
    FROM Cte1 
    WHERE (LEN(Ids) - LEN(REPLACE(Ids, ',', '')))/LEN(',') = 2 
)

select *
from Cte2 where [rank] <= 2 
```

有用。

![在此处输入图像描述](../Images/db92dff3959e19946a8524e3cdc13baf.png)

但是，如果值变得非常大，例如超过 50 左右，那么它变得非常非常有效。因为在第一个 CTE 中，我找出了完整的排列，而在第二个 CTE 中，我选择了只有两个元素参与的那些值。

所以当值变大时，第一个 Cte 的行为非常非常缓慢。

即使对于大桌子，还有其他方法吗？

提供 DDL

```
Declare @t table(Number Int)
Insert Into @t Values  
(1),(2),(3),(4),(5),(6),(7),(8),(9),(10),(11),(12),(13),(14),(15),(16),(17),(18),(19),(20), 
(21),(22),(23),(24),(25),(26),(27),(28),(29),(30),(31),(32),(33),(34),(35),(36),(37),(38),(39),(40), 
(41),(42),(43),(44),(45),(46),(47),(48),(49),(50),(51),(52),(53),(54),(55),(56),(57),(58),(59),(60), 
(61),(62),(63),(64),(65),(66),(67),(68),(69),(70),(71),(72),(73),(74),(75),(76),(77),(78),(79),(80), 
(81),(82),(83),(84),(85),(86),(87),(88),(89),(90),(91),(92),(93),(94),(95),(96),(97),(98),(99),(100) 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:47:39.627

结果集略有不同，但如果您只关心处理对，则应该更有效：

```
Declare @t table(Number Int)
Insert Into @t Values(10),(20),(30),(40),(18)

;WITH Pairs AS 
( 
    SELECT  t1.Number as p1,t2.Number as p2,t1.Number + t2.Number as TotalWeight
    FROM
        @t t1
            inner join
        @t t2
            on
                t1.Number < t2.Number
),Cte2 AS( 
    SELECT          
        *
        ,DENSE_RANK() OVER(ORDER BY ABS(TotalWeight - 35)) [rank] 
    FROM Pairs 
)

select *
from Cte2 where [rank] <= 2 
```

结果：

```
p1          p2          TotalWeight rank
----------- ----------- ----------- --------------------
18          20          38          1
10          30          40          2
10          20          30          2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:58:22.540

要对非常小的集合使用蛮力方法一般地解决对、三胞胎等问题，这可能会起作用。更新两个指示位置的数字。

```
Declare @t table(Number Int)
Insert Into @t Values(10),(20),(30),(40),(18)

;WITH Cte1 (Counter,Number,Ids,TotalWeight) AS 
( 
    SELECT  1,Number           
            , ',' + CAST(Number AS VARCHAR(MAX)) 
            ,CAST(Number AS INT) 
    FROM @t 
    UNION ALL 
    SELECT  c.Counter+1,p.Number 
            ,c.Ids + ',' +  CAST(p.Number AS VARCHAR(MAX)) 
            ,CAST(c.TotalWeight + p.Number AS INT)            
    FROM @t AS p JOIN Cte1 c ON p.Number < c.Number
    WHERE c.Counter < 2   --<<** we need only up to 2 numbers
),Cte2 AS( 
    SELECT          
        *
        ,DENSE_RANK() OVER(ORDER BY ABS(TotalWeight - 35)) [rank] 
    FROM Cte1 
    WHERE Counter = 2   --<<** use only the pairs
)

select *
from Cte2 where [rank] <= 2 
```

# c# - 在 OneTime 中选择具有多个 Xpath 的 XML 节点

> ID：12931422
> 
> 赞同：0
> 
> 时间：2012-10-17T09:41:11.897
> 
> 标签：c#, winforms, visual-studio-2008, xpath

> **可能重复：**
> [在 XML 中的一个节点下查找值](https://stackoverflow.com/questions/12800833/find-values-under-one-node-in-xml)

**示例 XML 文件：**

```
<Book>
<Page id="1">
<Head>Preface</Head>
<Body>
<Paragraph>
    <Line>
        <Word>
            <Char>T</Char>
            <Char>h</Char>
            <Char>i</Char>
            <Char>s</Char>
        </Word>
        <Word>is sample xml file.</Word>
    </Line>
</Paragraph>
</Body>
</Page> 
```

**注意：**这里，要搜索的示例文本是“I”。对于没有节点的选择字，xPath 表达式为：

```
string Word_Char_XPath="//CHAR[contains(translate(text(),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),'I')]/.."; 
```

对于只有节点的词的选择，xPath 表达式为：

```
string Word_XPath="//WORD[contains(translate(text(), abcdefghijklmnopqrstuvwxyz, ABCDEFGHIJKLMNOPQRSTUVWXYZ), 'I')]"; 
```

选择包含“i”的单词的代码

```
XmlDocument objXmlDoc = new XmlDocument();
XmlNodeList objXmlNodeList;
objXmlDoc.Load(sFilePath);
objXmlNodeList = objXmlDoc.SelectNodes(Word_Char_XPath+" or "+ Word_XPath); 
```

**问题：** 通过'或'两个xpath表达式，它返回true或false，但是如果要在匹配条件（两个xpaths）上选择所有单词节点，那么如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:20:37.130

好吧，我通过从 Net 获得一些帮助解决了这个问题。在我使用 '**或**' 运算符的地方，使用 ' **|** '（**管道符号**）运算符来组合两个 XPath 表达式的值。它将选择 xml 文件中与 XPath 表达式中的任一条件匹配的所有节点。快乐编程！

# java - 如何摆脱tomcat默认会话ID？

> ID：12931430
> 
> 赞同：0
> 
> 时间：2012-10-17T09:41:28.980
> 
> 标签：java, jsp, tomcat, cookies

我使用的是不支持 cookie 配置的 tomcat 6.0.14。

所以我的应用程序中有几个页面：

```
app.com/login.jsp<br>
app.com/dasboard.htm 
```

问题是当用户在时`login.jsp`，我将`JSESSIONID`其视为 cookie。当我在仪表板时，我希望仅在登录后查看会话 cookie - 我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:44:26.263

默认情况下，每个 JSP 都会创建新的 HTTP 会话（用户 servlet 不是这种情况）。将其添加到您的顶部`login.jsp`以避免急切的会话创建：

```
<%@ page session="false" %> 
```

# android - 如何在水平方向创建动态无线电组

> ID：12931432
> 
> 赞同：2
> 
> 时间：2012-10-17T09:41:40.833
> 
> 标签：android

我创建了一个动态广播组。默认情况下是这样的：

```
(o) XX  
(o) XX  
(o) XX 
```

如何动态实现按钮如下：

```
(o) X (o) X (o) X 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:43:51.447

查看开发者网站：

[http://developer.android.com/reference/android/widget/LinearLayout.html#setOrientation(int)](http://developer.android.com/reference/android/widget/LinearLayout.html#setOrientation(int))

```
setOrientation(RadioGroup.HORIZONTAL); 
```

只需确保您的 RadioButton 宽度为 wrap_content。

类似问题（非动态）：[Manage Layout Inside a Horizo​​ntal Oriented Radiogroup](https://stackoverflow.com/questions/4551403/manage-layout-inside-a-horizontal-oriented-radiogroup)

# c# - 用于安排重复任务的日历控件

> ID：12931433
> 
> 赞同：0
> 
> 时间：2012-10-17T09:41:58.403
> 
> 标签：c#, wpf, scheduled-tasks

有谁知道我可以在哪里查看一些源示例，以实现`CalendarControl`类似于 MS Outlook 中用于安排每日、每周和每月重复任务的源？

我正在使用 WPF 表单、C# 和 VS2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:57:14.083

如果您确实想为此付费，我建议： http: [//www.devexpress.com/Products/NET/Controls/WPF/Scheduler/index.xml](http://www.devexpress.com/Products/NET/Controls/WPF/Scheduler/index.xml)

否则，请阅读以下内容：

[http://www.codeproject.com/KB/WPF/WPFOutlookCalendar.aspx](http://www.codeproject.com/KB/WPF/WPFOutlookCalendar.aspx)

[http://www.codeproject.com/KB/WPF/WPFOutlookCalendar2.aspx](http://www.codeproject.com/KB/WPF/WPFOutlookCalendar2.aspx)

[http://rudigroblerwp.wordpress.com/2011/09/27/timeslotpanel/](http://rudigroblerwp.wordpress.com/2011/09/27/timeslotpanel/)

[http://rudigroblerwp.wordpress.com/2011/09/27/who%E2%80%99s-the-boss/](http://rudigroblerwp.wordpress.com/2011/09/27/who%E2%80%99s-the-boss/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:53:01.593

你需要一个控件吗这里是一个示例

[http://www.tanvtech.com/Products/SchoolStudentScheduler.aspx](http://www.tanvtech.com/Products/SchoolStudentScheduler.aspx)

# qt4 - 在这种情况下，我真的需要调用 QFile::close() 吗？

> ID：12931436
> 
> 赞同：7
> 
> 时间：2012-10-17T09:42:17.403
> 
> 标签：qt4

我不确定 QFile 的行为，

```
bool Class::Function (const QString & name)
{
  QFile fp (name);
  if (fp.open (QIODevice::ReadOnly))
  {
     // read file
     return false;
  }
  return true;
} 
```

嗯，它不像 C 中的 FILE* 指针（必须关闭和释放），如果我不调用 QFile::close() 会出现问题（它会在销毁时自动执行）吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T14:09:59.983

`QFile`对象在其析构函数时自动关闭（ [Qt 文档）；](http://qt-project.org/doc/qt-4.8/qfile.html#dtor.QFile)因此无需`close()`显式调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T01:17:50.280

我更喜欢在函数返回之前调用 fp.close()：这可能不是必需的，但也可能无害。

Qt 文档可能无法反映实际代码。例如，以下是 Qt 5.5.0 中的源代码：

```
/*!
    Destroys the file object, closing it if necessary.
*/
QFile::~QFile()
{
} 
```

所以`QFile::close()`不会在析构函数中自动调用。文档可能需要更新。

作为一个额外的优势，将 QFile::open() 与 QFile::close() 匹配将确保文件可以在下次`bool Class::Function()`调用函数时再次正确打开。

# html - Dartium 和 Dart 中的 Web Audio API 失真的声音

> ID：12931437
> 
> 赞同：0
> 
> 时间：2012-10-17T09:42:17.713
> 
> 标签：html, audio, dart

我对 HTML5 音频 api 还很陌生：我已经阅读了[HTML5 Rocks](http://www.html5rocks.com)上的一些相关文章，但有时在 Javascript 和 Dart 之间切换可能有点棘手。

无论如何，我一直在 Dart 中试验 HTML5 音频。为了给一个简单的游戏产生声音效果，我创建了一个如下的类。我创建了一个 AudioContext，将声音数据加载到 SoundBuffers 中，当需要播放声音时，创建一个 AudioBufferSourceNode 来播放存储在缓冲区中的数据：

```
class Sfx {
  AudioContext audioContext;
  List<Map> soundList;
  int soundFiles;

  Sfx() {
    audioContext = new AudioContext();
    soundList = new List<Map>();
    var soundsToLoad = [
      {"name": "MISSILE", "url": "SFX/missile.wav"},
      {"name": "EXPLOSION", "url": "SFX/explosion.wav"}
    ];
    soundFiles = soundsToLoad.length;

    for (Map sound in soundsToLoad) {
      initSound(sound);
    }
  }

  bool allSoundsLoaded() => (soundFiles == 0);

  void initSound(Map soundMap) {
    HttpRequest req = new HttpRequest();
    req.open('GET', soundMap["url"], true);
    req.responseType = 'arraybuffer';
    req.on.load.add((Event e) {
      audioContext.decodeAudioData(
        req.response,
        (var buffer) {
            // successful decode
            print("...${soundMap["name"]} loaded...");
            soundList.add({"name": soundMap["name"], "buffer": buffer});
            soundFiles--;
        },
        (var error) {
          print("error loading ${soundMap["name"]}");
        }
      );
    });
    req.send();
  }

  void sfx(AudioBuffer buffer) {
    AudioBufferSourceNode source = audioContext.createBufferSource();
    source.connect(audioContext.destination, 0, 0);
    source.buffer = buffer;
    source.start(0);
  }

  void playSound(String sound) {
    for (Map m in soundList) {
      print(m);
      if (m["name"] == sound) {
        sfx(m["buffer"]);
        break;
      }
    }
  }
} 
```

（音效在文件夹“SFX”中。现在我查看代码，可能有上百万种更好的方法来组织数据，但现在还不是重点。）我可以通过创建来播放音效Sfx 的一个实例并调用 playSound 方法。

例如

```
#import('dart:html');

#source('sfx.dart');

Sfx sfx;
void main() {
  sfx = new Sfx();
  window.on.keyUp.add((KeyboardEvent keX) {
    sfx.playSound("MISSILE");
  });
} 
```

（编辑：添加代码以在按键时播放声音。）

问题是：尽管使用 dart2js Javascript，声音效果在 Safari 中按预期播放，但当它们在 Dartium 或 Chrome 中（使用 dart2js Javascript）播放时，它们会失真。（在 Firefox 中，还有更严重的问题！）

有什么明显的我忽略或需要考虑的吗？否则，是否有任何参考或教程，最好是在 Dart 上下文中，这可能会有所帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:10:34.507

感谢您尝试飞镖！

首先，Firefox 不支持 Web Audio API（还没有？）Chrome 和 Safari 支持 Web Audio API。您可以在此处跟踪 Web Audio API 的采用情况：http: [//caniuse.com/#feat=audio-api](http://caniuse.com/#feat=audio-api)

其次，请在 Dartium 中尝试这个 Web Audio API 示例：[https](https://github.com/dart-lang/dart-html5-samples/tree/master/web/webaudio/intro) ://github.com/dart-lang/dart-html5-samples/tree/master/web/webaudio/intro 您需要先克隆 repo 并运行它本地。此示例在本地适用于我。

这听起来更像是一个错误报告。如果 dart-html5-samples 中的示例对您有用，但您的上述代码仍然被扭曲，请在[http://dartbug.com/new](http://dartbug.com/new)上打开一个错误，以便我们查看。

要考虑的一件事是等到特定的 MISSLE 声音加载后，再连接 keyUp 处理程序。

# html - 嵌套的 UL 下拉菜单被切断

> ID：12931439
> 
> 赞同：0
> 
> 时间：2012-10-17T09:42:21.583
> 
> 标签：html, css, drop-down-menu

如果我不弄清楚这一点，我想我会扯掉我的头发。

[http://www.keystoneelderlaw.com/](http://www.keystoneelderlaw.com/)

如果在 IE 8 中突出显示资源，下拉框将被截断。通常这将是由溢出引起的：隐藏属性或树中更高的东西。但在这种情况下，我不明白到底是什么导致了它。有什么帮助吗？

我将高度设置为 500px 以确保这不会影响问题。我不知所措。

更新：经过几个小时的拉扯，我自己解决了这个问题。它是 IE 专有过滤器的问题。在页面下方阅读我自己的答案，您将找到该问题的详细链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:18:57.433

解决：

显然，Internet Explorer 专有过滤器会导致 div 表现得像“溢出：隐藏”；即使您尝试将它们显式设置为“溢出：可见；”。

我有一个“过滤器：”渐变设置了 div，这导致了问题。但也有人说 alpha/opacity 过滤器会导致相同的行为。此处通过 hack 详细描述了该问题：

[如何阻止 Internet Explorer 的专有渐变过滤器截断应该溢出的内容？](https://stackoverflow.com/questions/2756851/how-do-i-stop-internet-explorers-propriety-gradient-filter-from-cutting-off-con)

我最终只是完全删除了过滤器，让 IE 访问者看不到渐变。我讨厌黑客。他们不值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:46:22.990

在您的 css 中将属性添加到#slide

```
#slide
{
 z-index:-999
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:18:28.277

看起来您的下拉菜单正在轮播后面呈现，查看 z-index 并查看这是否可以解决您的问题（为下拉 div 的 css 提供比轮播更高的 z-index）[http://www.w3schools.com /cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

# php - MySQL 连接和 PHP

> ID：12931446
> 
> 赞同：0
> 
> 时间：2012-10-17T09:42:36.453
> 
> 标签：php, mysql, database, performance, overhead

关于使用数据库连接在 PHP 中编程时什么是最好的，我有一个一般性的问题。我正在构建一个包含多个模块的项目，每个模块有时都需要连接到 MySQL。根据用户从菜单中选择的操作，模块文件包含在主 index.php 中。我想，无论如何，大多数项目都是这样工作的。

到目前为止，我所做的总是在每个模块文件的开头打开连接，并在查询运行后关闭它。

我的问题是：最好在 index.php 的开头打开与数据库的连接并在最后关闭它以便打开 1 个连接，还是做多个保持打开时间更短的连接？什么最适合速度和开销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:33:20.277

正如 NB 所指出的，您可能应该设置一个类来处理所有与数据库相关的任务。我从我的代码档案中发布了一个片段来说明如何设置这样的类。这仅用于说明目的，如果您只是复制和粘贴，则不保证对您有用。它可能需要一些改进。它还利用 smarty 类来处理数据视图。

我建议去掉你不需要的东西。设置您的 MySQL 连接参数。在您的索引文件中，您可以实例化一个 SQL 对象并简单地调用适当的方法。这些方法返回并将结果保存为关联数组和索引数组。遍历表行很简单：

```
$SQL->GetRows('RowTemplate.tpl', 'StoredProcedure', 'Parameters'); 
```

仅供参考，这是更大的 $Portal 框架对象的一部分，以防您想知道 $Portal 引用是什么。$SQL 只是扩展了 $Portal。

我希望这有帮助。祝你好运

```
class SQL {
        /********** MEMBER VARIABLES **********************************************************************/
        var $Connection;                // DB connection handler
        var $Result;                    // ResultSet returned from last call during life of object instance
        var $RowCount;                  // RowCount for ResultSet returned from last call during life of object instance
        var $ResultArray;               // ResultSet Array returned from last call during life of object instance
        var $Query;                     // Query last submitted during life of object instance
        var $ErrorNumber;               // Error number for error returned from last call during life of object instance
        var $Error;                     // Error returned from last call during life of object instance
        var $Message;                   // Messages returned during life of object instance

        // Switches, flags, markers, etc
        var $DebugMode;
        var $LogActive;
        var $ShowErrorMsg;

        // Modules array
        var $Modules;

        // SQL Connection Info - PROTECTED!
        protected $Host = "localhost";
        protected $User = "mydatabase";
        protected $Password = "mypassword";
        protected $Schema = "myschema";

        /********** MEMBER FUNCTIONS **********************************************************************/
        // Object Constructor
        function __construct() {
            // Automatically open DB Connection
            //$this->OpenDBConnection();
            //echo "User Object Constructor<br>";
        }

        // Open new DB Connection
        function OpenDBConnection() {
            return ($this->Connection = mysqli_connect($this->Host, $this->User, $this->Password, $this->Schema))? true : false;
        }

        // Close DB Connection
        function CloseDBConnection() {
            mysqli_close($this->Connection);
            //return true;
        }

        // Return error messages
        function GetError() {
            return $this->Error;
        }

        // Return last query string
        function GetQuery() {
            return $this->Query;
        }

        // Call, execute stored procedure and return result set
        /*  NOTES:  The result set is always returned as an int array of associative arrays
                    That is, if $Result was returned, the first row would be referenced as $Result[0]
                    and any column of the first row would be referenced as $Result[0]['ColumnName'] 

            COMMENTS: */

        function CallProcedure($StoredProcedure) {
            // Clear any System Errors
            $this->ErrorNumber = '';
            $this->Error = '';

            // Open DB Connection
            if(!$this->OpenDBConnection()) return false;

            // Kill error if there are no extra Params passed
            $Params = @func_get_arg(1);

            // Build Query
            $this->Query = "CALL $StoredProcedure ($Params)";

            //if($this->Result = $this->Connection->query($this->Query)) {
            if($this->Result = mysqli_query($this->Connection, $this->Query)) {
                // Reset global Result Set
                $this->ResultArray = Array();

                // Set record count for current record set
                $this->RowCount = 0;

                while($Row = @mysqli_fetch_array($this->Result, MYSQLI_BOTH)) {
                    $this->ResultArray[$this->RowCount] = $Row;
                    $this->RowCount++;
                }

                // Close DB Connection
                $this->CloseDBConnection();

                return $this->ResultArray;
            }

            // Grab Error
            $this->ErrorNumber = mysqli_errno($this->Connection);
            $this->Error = mysqli_error($this->Connection);

            // Close DB Connection
            $this->CloseDBConnection();
            return false;
        }

        /* Using Smarty class, return row template filled with record set from given stored procedure
                EXAMPLE 1: Primary Function - Using data set from stored procedure
                            $Portal->SQL->GetRows('RowTemplate.tpl', 'StoredProcedure', 'Parameters');
                EXAMPLE 2: Secondary Function - Using data set in second dimensional associative array
                            $Portal->SQL->GetRows('RowTemplate.tpl', 'ARRAY', $MyDataSetArray); */
        function GetRows($RowTemplate, $Procedure) {
            // Kill error if there are no extra Params passed
            $Parameters = @func_get_arg(2);
            // Set return string
            $ReturnString = '';
            // If Procedure is ARRAY then params are data set else Call procedure and return results array 
            $Result = ($Procedure=='ARRAY')? $Parameters : $this->CallProcedure($Procedure, $Parameters);

            // Loop through result set initializing smarty obj for each row
            $Count = 0;
            while(IsSet($Result[$Count])) {
                $RowTemplateObj = new Smarty;
                $RowTemplateObj->assign('SCRIPT_NAME', SCRIPT_NAME);
                $RowTemplateObj->assign('HOST_NAME', HOST_NAME);

                // Loop though each result row as an associative array of column - values 
                foreach ($Result[$Count] as $Key => $Value) {
                    if(IsSet($Result[$Count][$Key])) $RowTemplateObj->assign($Key, (is_array($Value))?$Value:stripslashes($Value));
                    //if(IsSet($Result[$Count][$Key])) $RowTemplateObj->assign($Key, $Value);
                }

                $RowTemplateObj->assign('bgcolor', '{$bgcolor'. ($Count%2 + 1) .'}');

                // Concatenate populated row into return string
                $ReturnString .= $RowTemplateObj->fetch($RowTemplate);
                $Count++;
            }

            return $ReturnString;
        }

        function GetSelectList($Procedure, $Parameters, $OptionValueField, $OptionNameField) {
            // Kill error if there are no extra Params passed
            $Selected = @func_get_arg(4);
            // Set return string
            $ReturnString = '';
            // Get List Resultset
            $Result = $this->CallProcedure($Procedure, $Parameters);

            // Loop through result set and set <option> ta row
            $Count = 0;
            while(IsSet($Result[$Count])) {
                $ReturnString .= '<option value="'.$Result[$Count][$OptionValueField].'"';
                $ReturnString .= ($Selected==$Result[$Count][$OptionValueField])? ' selected ' : '';
                $ReturnString .= '>'.$Result[$Count][$OptionNameField].'</option>';
                $Count++;
            }

            return $ReturnString;
        }

        function Execute($SQL) {
            // Clear any System Errors
            $this->ErrorNumber = '';
            $this->Error = '';

            // Open DB Connection
            if(!$this->OpenDBConnection()) return false;

            // Assign Query
            $this->Query = $SQL;

            if($this->Result = mysqli_query($this->Connection, $this->Query)) {
                // Reset global Result Set
                $this->ResultArray = Array();

                // Set record count for current record set
                $this->RowCount = 0;

                while($Row = @mysqli_fetch_array($this->Result, MYSQLI_BOTH)) {
                    $this->ResultArray[$this->RowCount] = $Row;
                    $this->RowCount++;
                }

                // Close DB Connection
                $this->CloseDBConnection();

                return $this->ResultArray;
            }

            // Grab Error
            $this->ErrorNumber = mysqli_errno($this->Connection);
            $this->Error = mysqli_error($this->Connection);

            // Close DB Connection
            $this->CloseDBConnection();
            return false;
        } 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-17T09:53:49.527

在同一个文件中建立单独的连接并根据它们关闭它们。

/ ***** ****门户1***的连接******* *** ***** /**

 **$portal1_link = mysql_connect('localhost','root','') or die('无法连接到数据库'); mysql_select_db('mylekha_auction',$portal1_link) or die('无法选择数据库');

/ ***** *******门户2的连接******* *** ***** /**

 **$portal2_link = mysql_connect('localhost','root','') or die('无法连接到数据库'); mysql_select_db('mylekha_auction',$portal2_link) or die('无法选择数据库');****

# javascript - 如何从 Backbone.js 中的现有 html 制作集合？

> ID：12931448
> 
> 赞同：2
> 
> 时间：2012-10-17T09:42:45.363
> 
> 标签：javascript, jquery, backbone.js

我正在将 Backbone.js 集成到一个项目中，并且在制作侧边栏的集合时遇到了一些问题。

有争议的问题是如何将 Smarty html-markup 生成的模型转换为模型集合。通常的解决方案是在前端使用模板，但在我的情况下它是不真实的。

我的侧边栏的标记：

```
<div class="nav-blocks">
{foreach from=$mod.nodes item=section}
  <div class="nav-block">
    <h2>{$section.title}</h2>
    <ul class="navigation">
    {foreach from=$section.nodes item=i}
      <li>{$i.title}</li>
    {/foreach}
    </ul>
  </div>
{/foreach}
</div> 
```

我想让每个都`.nav-block`绑定到模型：

```
var Navigation = Backbone.Model.extend({
  defaults: {
    'visible': true
  }
}); 
```

当从 View 触发事件时，模型更改属性可见：

```
var NavigationView = Backbone.View.extend({

  el: $('.nav-block'),

  events: {
    'click h2': 'toggleVisible'
  },

  initialize: function() {
    this.model.bind('change:visible', this.render, this);
  },

  toggleVisible: function() {
    this.model.toggle('visible');
  },

  render: function() {

  }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:31:48.000

您可以通过这种方式将主干视图应用于现有的 html 标记：

```
$(function () {
    $('.nav-blocks > .nav-block').each(function(index, el) {
        new NavigationView({ model: new Navigation(), el: el });
    });
}); 
```

[在http://jsfiddle.net/rJDy4/](http://jsfiddle.net/rJDy4/)工作 js fiddle

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:00:41.763

作为`.nav-block`不是由前端创建的 div，您将不得不在 Jquery Selector 中循环创建视图并将每个视图绑定到模型并将此视图 EL 设置为使用 JQuery 返回的对象`view.setElement()`

# javascript - Javascript 脚本错误代码 0 -- 需要对象

> ID：12931452
> 
> 赞同：1
> 
> 时间：2012-10-17T09:42:51.770
> 
> 标签：javascript

我在我的网络服务器上的一个 php 文件中有这段代码，它正在使用“网络浏览器”通过 VB.NET 程序显示，并且看到有些人仍然使用 IE 作为他们的默认网络浏览器，他们每次都会收到这个错误启动程序。任何人都知道可能导致这种情况的原因是什么？

```
<SCRIPT TYPE="TEXT/JAVASCRIPT">
      function Toggle(image, list)
      {
        var listElementStyle = document.getElementById(list).style;
        if (listElementStyle.display == "none")
        {
          listElementStyle.display = "block";
          document.getElementById(image).src="./images/minus.png";
          document.getElementById(image).alt="Close";
        }
        else
        {
          listElementStyle.display="none";
          document.getElementById(image).src="./images/plus.png";
          document.getElementById(image).alt="Open";
        }
      }
      function TreeInit(nodes)
      {
        var counter;
        for( counter = 1; counter <= nodes; counter++ )
        {
          document.getElementById('childList' + counter).style.display="none";
        }
      }
    </SCRIPT> 
```

TreeInit 稍后在我的网页底部调用。

```
<SCRIPT TYPE="TEXT/JAVASCRIPT">
    TreeInit(4)
</SCRIPT> 
```

我添加了一个`;`之后`TreeInit(4)`

错误是我只有两个孩子，而不是 4 个。改成`TreeInit(4);`一切`TreeInit(2);`都很好。谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:33:36.243

确保我有正确数量的子列表，现在错误已经消失了。

# drupal - 如何使用 Drush 命令创建脚本？

> ID：12931455
> 
> 赞同：0
> 
> 时间：2012-10-17T09:42:54.500
> 
> 标签：drupal, drush

是否可以使用要执行的 drush 命令序列创建文件？特别是，我想编写脚本，它将下载并启用更多 Drupal 模块，例如具有这些行的脚本（伪代码）。

```
$modules = {"pathauto", "admin_menu", "i18n"}
drush dl $modules;
drush en $modules; 
```

是否可以不创建自定义 drush 命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:29:25.213

我已经找到了解决方案。我可以使用 Drush API 创建一个脚本，并使用[drush_invoke](http://api.drush.ws/api/drush/includes!command.inc/function/drush_invoke/5.x)命令我可以调用另一个 drush 命令。

# javascript - 如何在thickbox中调用javascript函数？

> ID：12931458
> 
> 赞同：0
> 
> 时间：2012-10-17T09:43:03.610
> 
> 标签：javascript, ajax, thickbox

我的javascript函数在thickbox中不起作用。

```
i have a function **searchRealtors()**, 
```

它将在 keyUp 上被调用，如果直接加载页面，它会工作。但在厚盒内它不是..

**我的代码**

```
function searchRealtors()
{
   alert('Hello');
   //and some ajax call
} 
```

**在我的 PHP 文件中**

```
onkeyup="searchRealtors();" 
```

有什么帮助吗？请直接访问[http://imlsnetwork.com/guest](http://imlsnetwork.com/guest)

要在thickbox 中查看它，请访问[http://imlsnetwork.com/](http://imlsnetwork.com/)并单击Signup->clients join here 按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:46:17.587

你错过了一个“;”。javascript函数应该被称为

```
 onkeyup = "searchRealtors();"

                             ^here 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T09:48:31.103

如果您有单个选项，请使用复选框。如果您有多个选项，然后使 tichboxes 女性相同，您可以使用 onchange / on select。

# asp.net-mvc - 有没有办法在包名中添加文件扩展名？

> ID：12931461
> 
> 赞同：15
> 
> 时间：2012-10-17T09:43:11.973
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-optimization, bundling-and-minification

我想定义一个这样的包：

```
bundles.Add(
    new StyleBundle("~/style.css").Include(
        //...
)); 
```

如果捆绑名称只是`"~/style"`这样，但文件扩展名总是返回 404。我怀疑服务器在驱动器上搜索 CSS 和 JS 文件并忽略捆绑系统，但我找不到其他正在尝试的人在包名称中包含文件扩展名。如果没有 URL 重写之类的东西，这可能吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-17T09:47:13.407

您可以将以下内容添加到`<system.webServer>`web.config 中的部分：

```
<modules runAllManagedModulesForAllRequests="true" /> 
```

这将确保对静态资源的请求（例如`.js`和）`.css`将通过托管模块并被 ASP.NET MVC 拦截。

作为启用`runAllManagedModulesForAllRequests`所有请求的替代方法，您可以仅为需要使用的 url 配置它们。所以在里面`<handlers>`添加以下内容：

```
<handlers>
    <!-- ... -->
    <add name="scriptBundle" verb="*" path="script.js" type="System.Web.Optimization.BundleHandler, System.Web.Optimization" preCondition="managedHandler" />
    <add name="cssBundle" verb="*" path="style.css" type="System.Web.Optimization.BundleHandler, System.Web.Optimization" preCondition="managedHandler" />
</handlers> 
```

# ssis - 如何使用 ssis 2008 R2 从表中插入数据以查看？

> ID：12931465
> 
> 赞同：0
> 
> 时间：2012-10-17T09:43:33.813
> 
> 标签：ssis

导入数据时出现错误，对应的视图在数据库中不可用。但是我在数据库中检查了该视图可用。我尝试在其工作时手动插入视图。

有什么设置可以改变吗？

通过 SSIS 从表中导入数据以查看。我收到以下错误“无效的对象名称`[Feed].[VwPharmaClaim]`”。这已经存在。我在用对象名称包围的分析器引号中跟踪查询。`("[Feed]"."[VwPharmaClaim]")`没有引号它的工作。

当我在 2008 版本中插入数据时，出现以下错误

消息 208，级别 16，状态 1，第 1 行无效的对象名称“[Feed].[VwPharmaClaim]”

我在探查器中跟踪插入查询

exec sp_executesql N'INSERT INTO "[Feed]"."[VwPharmaClaim]" ("PharmaKey","member_id","MemberRefID","claim_id","ndc","days_supply","re​​fill_number","fill_dt", "paid_dt","prescriber_id","allowed_amt","paid_amt","Member_amt","quantity","Import_Id","age") 值 (@P1,@P2,@P3,@P4,@P5,@ P6,@P7,@P8,@P9,@P10,@P11,@P12,@P13,@P14,@P15,@P16)',N'@P1 bigint,@P2 varchar(8000),@P3 数字(18),@P4 varchar(8000),@P5 varchar(8000),@P6 numeric(10),@P7 int,@P8 datetime,@P9 datetime,@P10 varchar(8000),@P11 money,@P12钱,@P13 钱,@P14 浮点数,@P15 数字(18),@P16 int',1,'000000000052',52,'085565501321','00472030115',5,0,'2008-06-04 00:00:00','2008-06-08 00:00:00','BO5586396',$10.0000,$0.0000,$10.0000,15,7,5368

输出消息 208，级别 16，状态 1，第 1 行无效的对象名称“[Feed].[VwPharmaClaim]”。

当我删除双引号时它工作正常

exec sp_executesql N'INSERT INTO [Feed].[VwPharmaClaim] ("PharmaKey","member_id","MemberRefID","claim_id","ndc","days_supply","re​​fill_number","fill_dt","paid_dt", "prescriber_id","allowed_amt","paid_amt","Member_amt","quantity","Import_Id","age") 值 (@P1,@P2,@P3,@P4,@P5,@P6,@P7 ,@P8,@P9,@P10,@P11,@P12,@P13,@P14,@P15,@P16)',N'@P1 bigint,@P2 varchar(8000),@P3 numeric(18), @P4 varchar(8000),@P5 varchar(8000),@P6 numeric(10),@P7 int,@P8 日期时间,@P9 日期时间,@P10 varchar(8000),@P11 钱,@P12 钱,@P13钱,@P14 浮点数,@P15 数字(18),@P16 int',1,'000000000052',52,'085565501321','00472030115',5,0,'2008-06-04 00:00:00','2008-06-08 00:00:00','BO5586396',$10.0000,$0.0000,$10.0000,15,7,5368

输出

（1 行受影响）

我的包开发于 2005 年。我已在 2008 年将此软件包转换为以下版本。

版本 9.0.30729.4462.QFE

这是我从表中导入数据以查看时的错误

[OLE DB 目标 [185]] 错误：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80004005。OLE DB 记录可用。来源：“Microsoft SQL Server Native Client 10.0”Hresult：0x80040E37 描述：“无效的对象名称'[Feed].[VwPharmaClaim]'。”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:24:27.070

默认情况下，在 SQL Server 2008 中，不允许使用双引号来标识数据库对象。

跑

```
ALTER DATABASE <dbname> SET QUOTED_IDENTIFIER = ON 
```

针对您的目标数据库，然后尝试运行

```
SELECT * FROM "Feed"."VwPharmaClaim" 
```

查看[http://technet.microsoft.com/en-US/library/ms174393(v=sql.105).aspx](http://technet.microsoft.com/en-US/library/ms174393(v=sql.105).aspx)了解更多信息。

当您说 SSIS 正在生成这些查询时，您使用什么样的任务来生成它们？我以前从未见过它产生双引号标识符，只是好奇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T23:56:07.783

我在 SSIS 2013 中遇到了这种情况，并尝试插入到可更新的视图中。此视图使用“代替”触发器进行插入。

为了让它工作，我必须进入目的地的高级编辑器并在组件属性选项卡上从 OpenRowset 中删除方括号，所以`[dbo].[myView]`变成`dbo.myView`. 此外，AccessMode 需要是普通的 OpenRowset；快速加载不起作用。

# php - 致命错误：在 Zend Framework + Wamp 中找不到类“Memcache”

> ID：12931467
> 
> 赞同：0
> 
> 时间：2012-10-17T09:44:01.410
> 
> 标签：php, zend-framework, memcached

我有以下代码：

在**应用程序.ini**

```
cache.default.adapter = "memcached"
cache.default.params.host = "localhost"
cache.default.params.port = "11211" 
```

在**Bootstrap.php中**

```
$cache = new Memcache();        
$cache->connect($cache_params['host'], $cache_params['port']);
Zend_Registry::set("cache", $cache); 
```

而且我通过在 php.ini和php.ini`php_memcache.dll`中安装了 memcache`wamp\bin\php\php5.3.9\ext``extension=php_memcache.dll`

但我仍然收到以下错误：

**（！）致命错误：在第 160 行的 \wamp\www\projectname\application\Bootstrap.php 中找不到类“Memcache”**

我已经通过谷歌但仍然无法解决问题。为什么它没有连接到内存缓存有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:58:00.010

您正在尝试缓存您的数据库？

你想使用 Zend_Cache。

（来自：http: [//zendcoding.com/how-to-use-memcached-in-the-zend-framework](http://zendcoding.com/how-to-use-memcached-in-the-zend-framework)）

```
$frontendOpts = array(
    'caching' => true,
    'lifetime' => 1800, //how long in seconds to keep the cache for.
    'automatic_serialization' => true //In order to store objects and arrays, Zend must first serialize data into a string. If this parameter is set to ‘true‘, this serialization will happen on the fly and behind the scenes.
);

$backendOpts = array(
    'servers' =>array(
        array(
        'host'   => $cache_params['host'],
        'port'   => $cache_params['port'],
        'weight' => 1
        )
    ),
    'compression' => false
);

$cache = Zend_Cache::factory('Core', 'Memcached', $frontendOpts, $backendOpts); 
```

此链接还演示了如何加载和更新缓存，以及如何从应用程序中的任何位置访问它。可以肯定的是，这是一本好书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T19:12:59.273

您的设置是 memcached

`cache.default.adapter = "memcached"`

但你想使用内存缓存

`$cache = new Memcache();`

**试试这个例子**

```
<?php
$mc = new Memcached('mc');
$mc->setOption(Memcached::OPT_LIBKETAMA_COMPATIBLE, true);
if (!count($mc->getServerList())) {
    $mc->addServers(array(
        array('127.0.0.1',11211),
        array('127.0.0.1',11211),
    ));
}
$key = 'mykey';
$mc->add($key,'test for memcached not memcache');
$val = $mc->get($key);
echo $val;

?>
```

# eclipse - 带闭合的 Eclipse Indigo

> ID：12931470
> 
> 赞同：0
> 
> 时间：2012-10-17T09:44:04.577
> 
> 标签：eclipse, google-closure-compiler, eclipse-indigo, google-closure

我正确安装了 CLOSURE 的插件，我按照这里的步骤[http://www.normalesup.org/~simonet/soft/ow/eclipse-closure-javascript.en.html](http://www.normalesup.org/~simonet/soft/ow/eclipse-closure-javascript.en.html)然后当我尝试做第一个简单的例如 helloword -> [https://developers.google.com/closure/library/docs/gettingstarted](https://developers.google.com/closure/library/docs/gettingstarted) eclipse 平台没有包和库（重复我启用并正确安装了库）。

我尝试将库直接添加到 js 项目中，但这是一个大问题，因为当 eclipse 使用更改构建工作区时（在 38% 的进度过程中）然后不再工作。有没有人发生同样的情况？任何人都知道搜索信息的好网站或使用插件下载好的版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:31:33.803

您是否在 Eclipse 首选项 Javascript -> Closure 中设置/检查了“Closure Base Directory”属性？

（注意，“Closure Base Directory”应设置为 base.js 的完整路径，不包括文件名但包括“/goog/”，而不是“/closure/”或“/closure-library/”目录）

# c++ - 并行化具有大量全局变量的库

> ID：12931473
> 
> 赞同：0
> 
> 时间：2012-10-17T09:44:15.810
> 
> 标签：c++, qt

我目前正在使用 QT (4) 来并行化由非程序员用 C 语言编写的非线程安全库，因此有很多全局变量。线程不需要交互或共享数据，它们每个都只是调用库的一堆方法，然后在最后库提供一个输出以供进一步使用。

但问题是，全局变量默认在线程之间共享，导致库在不同的地方崩溃。有两种方法可以解决此问题：

重构整个库以不使用全局变量（哎哟），或者找到一种方法使全局变量不共享，或者找到第三种神奇的方法。

后者是 QT 还是标准 (C++01) C++ 的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:07:08.337

使用线程本地存储是一种使全局变量不共享的方法。起点，带有不同实现细节的链接：

[http://en.wikipedia.org/wiki/Thread-local_storage](http://en.wikipedia.org/wiki/Thread-local_storage)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:49:25.217

您不能“取消共享”全局变量。并行化（条形重构）的唯一可用选项是拥有多个进程而不是多个线程。最好是汇集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:43:07.140

创建一个负责同步访问全局变量的单例。全局变量成为新单例类的成员，并且可以通过与当前全局变量同名的方法访问，因此您无需到处更改代码。

# java - 使用 Ubuntu upstart 运行 java 服务

> ID：12931490
> 
> 赞同：1
> 
> 时间：2012-10-17T09:45:02.303
> 
> 标签：java, classpath, upstart

我无法定义有效的 upstart conf 脚本来使用 upstart 运行 java 服务，并满足以下要求：

*   我必须使用文件夹指定类路径，因为我在多个文件夹中有很多 jar
*   我必须听由发出的关机信号`service myservicename stop`

基于[那个答案](https://stackoverflow.com/a/11810813/897041)，我实现了一个关闭钩子监听器，所以我需要 upstart 向我发送终止信号并等待我的应用程序终止。

这是我的错误暴发户脚本：

```
description "masa"
author "Muhammad Gelbana <m.glba@gmail.com>"

start on runlevel [2345]
stop on shutdown
kill timeout 120

script
    LOGS_DIR=/home/mgelbana/services/RealServices/logs
    IPK_DB=/home/mgelbana/services/RealServices/config/db-ipk.properties
    PRO_DB=/home/mgelbana/services/RealServices/config/db-reporting-engine.properties
    MAIN_CLASS=com.sger.masaTA
    mkdir -p $LOGS_DIR
    CLASSPATH="/home/mgelbana/services/RealServices/masa-RealService-TA.jar"
    for i in /home/mgelbana/services/commons/*.jar; do
    CLASSPATH="$CLASSPATH:$i"
    done
    for i in /home/mgelbana/services/RealServices/lib/*.jar; do
    CLASSPATH="$CLASSPATH:$i"
    done
    echo '\n\n\n====================================================='
    echo 'Service startup:\t'`date`
    echo 'Main class:\t\t'`echo $MAIN_CLASS`
    echo 'Logs directory:\t\t'`echo $LOGS_DIR`
    echo 'masa database configuration:\t'`echo $IPK_DB`
    echo 'Pro configuration file:\t'`echo $PRO_DB`
    echo 'Starting engine...'
    java -Dta.id=2 -DIPK_DB=$IPK_DB -DPRO_DB=$PRO_DB -cp $CLASSPATH $MAIN_CLASS
end script 
```

`/var/log/upstart/myservicename.log`日志 中显示以下错误：`/proc/self/fd/9: 9: /proc/self/fd/9: Syntax error: word unexpected (expecting "do")`

谢谢你。

# php - 如何让 PHP CodeSniffer Fixer 忽略命名空间声明？

> ID：12931494
> 
> 赞同：4
> 
> 时间：2012-10-17T09:45:25.360
> 
> 标签：php, sublimetext2, codesniffer, psr-0

我正在使用[PHP Coding Standards Fixer](http://cs.sensiolabs.org/)的 sublime text 2 插件。它工作正常，除了它认为命名空间无效（它实际上是无效的，我可以接受）。此错误会阻止脚本更正文件的其余部分。我收到以下错误：

```
! The namespace Application\Controllers\Admin in <filepath> does not match the file path according to PSR-0 rules. 
```

我如何告诉脚本忽略命名空间约束。命令行参数和 Sublime text 2 用户设置都可以更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-28T08:24:33.960

我正在使用以下命令排除 pso0 规则：

```
php-cs-fixer fix --level="psr2" PATH --fixers=-psr0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:19:51.407

虽然丑陋，但一个简短的解决方案可能是添加如下内容：

使用抑制注释标签：

```
// @codingStandardsIgnoreStart

/* your namespacing here */

// @codingStandardsIgnoreEnd 
```

# html - 拉伸图像背景宽度在 IE8 中不起作用

> ID：12931495
> 
> 赞同：1
> 
> 时间：2012-10-17T09:45:29.710
> 
> 标签：html, css, background, background-image

我想拉伸`a`标签的背景，但它在 Internet Explorer 8 中不起作用。这是我正在使用的代码：

```
div.tabbernav div.tabberactive a{
    color:#fff;
    padding:11px;
    background: url(../images/bag_selected.png) ;
    background-size: 100% 100%;
    -moz-background-size: 100% 100%;
    background-repeat: no-repeat;
    height:43px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:09:29.293

background-size 是一个 CSS3 属性，通常在 IE8 中不起作用。您还错过了 -webkit- -o- 和 -ms- 前缀。

也就是说，使用 MS 过滤器可以解决此问题。看看[http://www.alistapart.com/articles/supersize-that-background-please/](http://www.alistapart.com/articles/supersize-that-background-please/)

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='images/logo.gif', sizingMethod='scale');

-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='images/logo.gif', sizingMethod='scale')"; 
```

适用于背景尺寸：封面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:12:51.697

另一个使用 jQuery 的基于 JavaScript 的跨浏览器解决方案是：

```
<div id="mystretchedimage"><img src="image.jpg" /></div>

#mystretchedimage { width: 100%; height: 600px; overflow: hidden; }

jQuery('#mystretchedimage img').css({ width: $(window).width() }); 
```

根据您的需求，例如我的情况，这可能是您更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:12:38.307

您使用此样式代码

```
div.tabbernav div.tabberactive a{
    color:#fff;
    padding:11px;
    background: url(../images/bag_selected.png) ;
    background-size: 100% 100%;
    -moz-background-size: 100% 100%;
    background-repeat: no-repeat;
    height:43px;
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
    src='images/logo.gif',
    sizingMethod='scale');

   -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(
   src='images/logo.gif',
   sizingMethod='scale')";
 } 
```

# android - android如何将int和double作为namevaluepair作为http post发送

> ID：12931496
> 
> 赞同：5
> 
> 时间：2012-10-17T09:45:30.337
> 
> 标签：android, web-services, http-post, httpclient

我有一个应用程序，我正在尝试使用 http 帖子将数据发送到网络服务。用户数据是字符串 int 和 double 的混合。在应用程序中，所有都表示为字符串，因为当我使用 AsyncTask 运行网络调用时（因此它不在主线程上），params 数组的类型为字符串。

我遇到的问题是服务器有时需要一个 int 。例如，compID 是服务器期望的 int。使用 http 帖子时，我使用 NameValuePair。这将只接受字符串。如何将 int 或 double 传递给 http 帖子？

在我的活动中。

```
String[] params = new String[]{tagCompany, tagId, tagPerson, OUT,
                                null, null,null, null, null, null}; 
                        AsyncPostData apd = new AsyncPostData();
                        apd.execute(params);

private class AsyncPostData extends AsyncTask<String, Void, Void> {

        ProgressDialog progressDialog;

        @Override
        protected void onPreExecute()
        {
            progressDialog= ProgressDialog.show(NfcscannerActivity.this, 
                    "Connecting to Server"," Posting data...", true);            
        };  

        @Override
        protected Void doInBackground(String... params) {

            nfcscannerapplication.loginWebservice.postData(params[0], params[1], params[2], params[3], params[4],
                    params[5], params[6], params[7], params[8], params[9]);
            return null;
        }

         @Override
            protected void onPostExecute(Void result)
            {
             super.onPostExecute(result);
                if(progressDialog != null)
                progressDialog.dismiss();

            }
    }//end of AsyncPostData 
```

.

我的发帖方式

```
public void postData( String compID, String tagID, String clientID, String carerID, 
            String phoneScanned, String phoneSent, String TXType, String phoneType, String latitude, String longitude) {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://cfweb.yourofficeanywhere.co.uk:88/roadrunner.asmx/PostTransaction");

        try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("CompanyID", compID));
            nameValuePairs.add(new BasicNameValuePair("TagID", tagID));
            nameValuePairs.add(new BasicNameValuePair("ClientID", clientID));
            nameValuePairs.add(new BasicNameValuePair("CarerID", carerID));
            nameValuePairs.add(new BasicNameValuePair("PhoneScanned", "2010-10-16 16:30 000"));
            nameValuePairs.add(new BasicNameValuePair("PhoneSent", "2010-10-16 16:32 000"));
            nameValuePairs.add(new BasicNameValuePair("TXType", "2"));
            nameValuePairs.add(new BasicNameValuePair("PhoneType", "2"));
            nameValuePairs.add(new BasicNameValuePair("Latitude", latitude));
            nameValuePairs.add(new BasicNameValuePair("Longitude", longitude));

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost);

            Log.e(TAG, "response of post = " + response.toString());

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
        } catch (IOException e) {
            // TODO Auto-generated catch block
        }
    } 
```

在我的 post 方法中，一些值现在设置为 null。我想知道的是如何在 NameValuePair 中将 compID 设为 int。compID 作为字符串来自活动，但服务器需要一个 int。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T09:55:32.070

你可以这样做：

```
nameValuePairs.add(new BasicNameValuePair("TXType",Integer.toString (2))); 
```

TxType 是键，2 是值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:47:49.600

只需像这样将您的字符串解析为整数

```
int result = Integer.parseInt(compID); 
```

但是您必须确保您的 compID 可以解析为 Integer。如果它包含不是数字的符号，则此操作将失败。为了确保 compID 是可解析的，您可以使用它

```
if(compID.matches("(\\d+)"){
    result = Integer.parseInt(compId); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-02T03:44:03.043

这个问题已经很久没有问过了，但我想帮助那些登陆这个页面的人。正如上面的论点，你不能在 namevaluepair 中使用 doubles 或 longs 或 ints，但你可以使用**JSONObject**，它可以成功处理这些原语，而你有一个带有**namevaluepair**的错误请求响应，我在下面写了一个示例。

```
 JSONObject juo = new JSONObject();
    juo.put("City", txtCity.getText().toString().trim().toString());
    juo.put("ClassNumber",
            Long.parseLong(txtClassNumber.getText().toString()
                    .trim()));
    juo.put("EmailAddress", txtEmail.getText().toString().trim()
            .toString());
    juo.put("ID", Long.parseLong(userid));
    juo.put("RealName", txtRealName.getText().toString().trim());
    juo.put("RealSurname", txtRealSurname.getText().toString()
            .trim());
    juo.put("School", txtSchool.getText().toString().trim());
    juo.put("UserId", Long.parseLong(userid));
    juo.put("UserName", username);
    juo.put("UserProfileImage", profileImageUrl);

    StringEntity entityForPost = new StringEntity(juo.toString());
    hpost.setHeader("content-type", "application/json");
    // hpost.setEntity(new UrlEncodedFormEntity(UpdateParams));
    hpost.setEntity(entityForPost);

    HttpResponse hres = hclient.execute(hpost);

    StatusLine status = hres.getStatusLine(); 
```

# user-agent - 缺少用户代理指令！发现允许 - 这是什么意思？

> ID：12931497
> 
> 赞同：2
> 
> 时间：2012-10-17T09:45:31.287
> 
> 标签：user-agent, robots.txt

[我通过http://www.frobee.com/robots-txt-check](http://www.frobee.com/robots-txt-check)运行我的网站，但它返回了一些错误。

这是我的 robots.txt 文件：

```
User-agent: *
Disallow: /admin/

# Allowable Index
Allow: /*?p=
Allow: /blog/
Allow: /catalog/seo_sitemap/category/
Allow: /catalogsearch/result/

# Directories
Disallow: /404/
Disallow: /app/
Disallow: /cgi-bin/
Disallow: /downloader/
Disallow: /includes/
Disallow: /js/
Disallow: /lib/
Disallow: /magento/
Disallow: /media/
Disallow: /pkginfo/
Disallow: /report/
Disallow: /skin/
Disallow: /stats/
Disallow: /var/

# Paths (clean URLs)
Disallow: /index.php/
Disallow: /catalog/product_compare/
Disallow: /catalog/category/view/
Disallow: /catalog/product/view/
Disallow: /catalogsearch/
Disallow: /checkout/
Disallow: /control/
Disallow: /contacts/
Disallow: /customer/
Disallow: /customize/
Disallow: /newsletter/
Disallow: /poll/
Disallow: /review/
Disallow: /sendfriend/
Disallow: /tag/
Disallow: /wishlist/

 # Files
 Disallow: /cron.php
 Disallow: /cron.sh
 Disallow: /error_log
 Disallow: /install.php
 Disallow: /LICENSE.html
 Disallow: /LICENSE.txt
 Disallow: /LICENSE_AFL.txt
 Disallow: /STATUS.txt

 # Paths (no clean URLs)
 Disallow: /*.js$
 Disallow: /*.css$
 Disallow: /*.php$
 Disallow: /*?p=*&
 Disallow: /*?SID=
 Disallow: /*?* 
```

我得到的错误是“缺少用户代理指令！发现允许”和“缺少用户代理指令！发现不允许'。我不确定为什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:00:28.657

在 robots.txt 中，空行用于分隔多个指令。只需删除或注释空行就可以了。

# facebook - facebook links.getStats 和带有 URL 的逗号

> ID：12931498
> 
> 赞同：2
> 
> 时间：2012-10-17T09:45:34.487
> 
> 标签：facebook, facebook-graph-api, hyperlink

函数 links.getStats 用逗号分隔 url。如果我的网址中有逗号怎么办？在文档中我什么也没找到:(。

[http://api.facebook.com/restserver.php?method=links.getStats&urls=,http://meczyki.pl/obrazki,32,http://meczyki.pl/obrazki,33,http://meczyki .pl/obrazki,34,http://meczyki.pl/obrazki,35,http://meczyki.pl/obrazki,36,http://meczyki.pl/obrazki,37,http://meczyki.pl /obrazki,38,http://meczyki.pl/obrazki,39,http://meczyki.pl/obrazki,40,http://meczyki.pl/obrazki,41,http://meczyki.pl/obrazki ,42](http://api.facebook.com/restserver.php?method=links.getStats&urls=,http://meczyki.pl/obrazki,32,http://meczyki.pl/obrazki,33,http://meczyki.pl/obrazki,34,http://meczyki.pl/obrazki,35,http://meczyki.pl/obrazki,36,http://meczyki.pl/obrazki,37,http://meczyki.pl/obrazki,38,http://meczyki.pl/obrazki,39,http://meczyki.pl/obrazki,40,http://meczyki.pl/obrazki,41,http://meczyki.pl/obrazki,42)等...

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:53:57.397

双 URL 编码逗号，如`%252C`：

[http://api.facebook.com/restserver.php?method=links.getStats&urls=http://meczyki.pl/obrazki%252C32,http://meczyki.pl/obrazki%252C33,http://meczyki. pl/obrazki%252C34,http://meczyki.pl/obrazki%252C35,http://meczyki.pl/obrazki%252C36,http://meczyki.pl/obrazki%252C37,http://meczyki.pl/ obrazki%252C38,http://meczyki.pl/obrazki%252C39,http://meczyki.pl/obrazki%252C40,http://meczyki.pl/obrazki%252C41,http://meczyki.pl/obrazki% 252C42](http://api.facebook.com/restserver.php?method=links.getStats&urls=http://meczyki.pl/obrazki%252C32,http://meczyki.pl/obrazki%252C33,http://meczyki.pl/obrazki%252C34,http://meczyki.pl/obrazki%252C35,http://meczyki.pl/obrazki%252C36,http://meczyki.pl/obrazki%252C37,http://meczyki.pl/obrazki%252C38,http://meczyki.pl/obrazki%252C39,http://meczyki.pl/obrazki%252C40,http://meczyki.pl/obrazki%252C41,http://meczyki.pl/obrazki%252C42)

# r - 在 R 中对包含不同类型的列表或对象进行排序

> ID：12931500
> 
> 赞同：0
> 
> 时间：2012-10-17T09:45:52.690
> 
> 标签：r

使用示例可能更容易解释自己。假设我有一个列表：

> s <- list( c(5,3,4,3,6),c("A","B","C","D","E"))

对于所有子向量，s 始终具有相同数量的对象。不允许使用 NA 值。向量包含不同的类型。

我想要实现的是：

```
rank  v1   v2
1     3    "B"
2     3    "D"
3     4    "C"
4     5    "A"
5     6    "E" 
```

基本上，要根据第一个向量（按升序）对列表进行排序，然后（在平局的情况下）使用词汇顺序查看第二个向量。在 C++ 世界中，我唯一需要做的就是为我的对象定义 operator<，但是我对 R 很陌生，而且我的想法已经不多了。

我发现的最佳策略是遍历元素并为每对计算一个排名值（双倍）（例如，3“B”将产生最高排名，6“E”将产生最低排名），存储结果在另一个向量中并对其进行排序。然而，解决方案不是很好，因为找到一个好的排名函数可能很棘手，而且不容易泛化。

在我看来，这是一个普遍存在的问题，它必须是一种更好的方法。谁能指出我正确的方向？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:50:41.143

使用`order()`：

```
s <- data.frame(v1=c(5,3,4,3,6), v2=c("A","B","C","D","E"))
s[order(s$v1, s$v2), ]
  v1 v2
2  3  B
4  3  D
3  4  C
1  5  A
5  6  E 
```

* * *

请注意，我将您的列表转换为数据框。由于数据框本身就是一个列表（所有元素的长度相同），这在您的情况下应该不是问题。

# php - 登录系统中未定义的变量会话

> ID：12931503
> 
> 赞同：0
> 
> 时间：2012-10-17T09:46:06.250
> 
> 标签：php, mysql

嗨，我正在尝试开发一个登录系统，但我似乎遇到了一个错误。这是我的代码：

```
//header.php

                   if($_SESSION['signed_in']){  
                        echo 'Hello' . $_SESSION['user_name'] . '. Not you? <a href="signout.php">Sign out</a>';  
                    }  
                    else{  
                        echo '<a href="signin.php">Sign in</a> or <a href="sign up">create an account</a>.';  
                    }   

//Signin.php
                   if(mysql_num_rows($result) == 0) 
                    { 
                        echo 'You have supplied a wrong user/password combination. Please try again.'; 
                    } 
                    else 
                    { 
                        //set the $_SESSION['signed_in'] variable to TRUE 
                        $_SESSION['signed_in'] = true; 
                        //we also put the user_id and user_name values in the $_SESSION, so we can use it at various pages 
                        while($row = mysql_fetch_assoc($result)) 
                        { 
                            $_SESSION['user_id']    = $row['user_id']; 
                            $_SESSION['user_name']  = $row['user_name']; 
                            $_SESSION['user_level'] = $row['user_level']; 
                        } 
                        echo 'Welcome, ' . $_SESSION['user_name'] . '. <a href="index.php">Proceed to the forum overview</a>.'; 
                    } 
```

第一个条件指出了错误： if($_SESSION['signed_in']) 它说：

注意：未定义变量：第 21 行 C:\xampp\htdocs\Tutorials\Forum\header.php 中的 _SESSION

我怎样才能纠正这个？

**编辑**：session_start() 包含在 doctype 中 header.php 文件的顶部，而 header.php 包含在 Signin.php 中

完整代码：

```
header.php

    <?php
        session_start();
    ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">  
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="nl" lang="nl">  
    <head>  
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />  
        <meta name="description" content="A short description." />  
        <meta name="keywords" content="put, keywords, here" />  
        <title>PHP-MySQL forum</title>  
        <link rel="stylesheet" href="css/style.css" type="text/css">  
    </head>  
    <body>  
    <h1>My forum</h1>  
        <div id="wrapper">  
        <div id="menu">  
            <a class="item" href="/forum/index.php">Home</a> -  
            <a class="item" href="/forum/create_topic.php">Create a topic</a> -  
            <a class="item" href="/forum/create_cat.php">Create a category</a>  
            <div id="userbar">  
            <div id="userbar">
                <?php 
                    if($_SESSION['signed_in']){  
                        echo 'Hello' . $_SESSION['user_name'] . '. Not you? <a href="signout.php">Sign out</a>';  
                    }  
                    else{  
                        echo '<a href="signin.php">Sign in</a> or <a href="sign up">create an account</a>.';  
                    }  
                ?>
            </div>  
        </div>  
            <div id="content">  

Signin.php

<?php  
//signin.php  
include 'conn.php';  
include 'header.php';  
echo '<h3>Sign in</h3>';  
//first, check if the user is already signed in. If that is the case, there is no need to display this page  
if(isset($_SESSION['signed_in']) && $_SESSION['signed_in'] == true)  
{  
    echo 'You are already signed in, you can <a href="signout.php">sign out</a> if you want.';  
}  
else  
{  
    if($_SERVER['REQUEST_METHOD'] != 'POST')  
    {  
        /*the form hasn't been posted yet, display it 
          note that the action="" will cause the form to post to the same page it is on */  
        echo '<form method="post" action="">  
            Username: <input type="text" name="user_name" />  
            Password: <input type="password" name="user_pass">  
            <input type="submit" value="Sign in" />  
         </form>'; 
    } 
    else 
    { 
        /* so, the form has been posted, we'll process the data in three steps:  
            1\.  Check the data  
            2\.  Let the user refill the wrong fields (if necessary)  
            3\.  Varify if the data is correct and return the correct response  
        */  
        $errors = array(); /* declare the array for later use */  
        if(!isset($_POST['user_name']))  
        {  
            $errors[] = 'The username field must not be empty.';  
        }  
        if(!isset($_POST['user_pass']))  
        {  
            $errors[] = 'The password field must not be empty.';  
        }  
        if(!empty($errors)) /*check for an empty array, if there are errors, they're in this array (note the ! operator)*/  
        {  
            echo 'Uh-oh.. a couple of fields are not filled in correctly..'; 
            echo '<ul>'; 
            foreach($errors as $key => $value) /* walk through the array so all the errors get displayed */ 
            { 
                echo '<li>' . $value . '</li>'; /* this generates a nice error list */ 
            } 
            echo '</ul>'; 
        } 
        else 
        { 
            //the form has been posted without errors, so save it 
            //notice the use of mysql_real_escape_string, keep everything safe! 
            //also notice the sha1 function which hashes the password 
            $sql = "SELECT 
                        user_id, 
                        user_name, 
                        user_level 
                    FROM 
                        users 
                    WHERE 
                        user_name = '" . mysql_real_escape_string($_POST['user_name']) . "' 
                    AND 
                        user_pass = '" . sha1($_POST['user_pass']) . "'";  
            $result = mysql_query($sql);  
            if(!$result)  
            {  
                //something went wrong, display the error  
                echo 'Something went wrong while signing in. Please try again later.'; 
                //echo mysql_error(); //debugging purposes, uncomment when needed 
            } 
            else 
            { 
                //the query was successfully executed, there are 2 possibilities 
                //1\. the query returned data, the user can be signed in 
                //2\. the query returned an empty result set, the credentials were wrong 
                if(mysql_num_rows($result) == 0) 
                { 
                    echo 'You have supplied a wrong user/password combination. Please try again.'; 
                } 
                else 
                { 
                    //set the $_SESSION['signed_in'] variable to TRUE 
                    $_SESSION['signed_in'] = true; 
                    //we also put the user_id and user_name values in the $_SESSION, so we can use it at various pages 
                    while($row = mysql_fetch_assoc($result)) 
                    { 
                        $_SESSION['user_id']    = $row['user_id']; 
                        $_SESSION['user_name']  = $row['user_name']; 
                        $_SESSION['user_level'] = $row['user_level']; 
                    } 
                    echo 'Welcome, ' . $_SESSION['user_name'] . '. <a href="index.php">Proceed to the forum overview</a>.'; 
                } 
            } 
        } 
    } 
} 

include 'footer.php';  
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:09:57.003

在将某些内容存储到会话中之前，该变量`$_SESSION['signed_in']`将为空。出现警告是因为您要求此值，但里面什么都没有。

```
if (isset($_SESSION['signed_in']) && $_SESSION['signed_in'])
{
} 
```

为避免警告，您应该首先检查变量是否存在，然后您可以从中读取。当然这有点麻烦，所以大多数开发人员创建一个函数只是为了安全地从数组中读取。

**编辑：**

实际上上面的问题会导致另一条消息......

```
Notice: Undefined index: ... 
```

...正如 Mob 所说，变量 $_SESSION 根本不存在，因为没有启动会话。我会让这个答案留下来，因为这将是下一个陷阱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T09:49:47.607

没有[`session_start();`](http://php.net/manual/en/function.session-start.php)这就是原因，您必须始终在 PHP 中使用会话之前声明这一点。

# java - DWR：dwr 未定义

> ID：12931505
> 
> 赞同：3
> 
> 时间：2012-10-17T09:46:16.137
> 
> 标签：java, html, tomcat, web-applications, dwr

我是 DWR 的初学者。根据（http://directwebremoting.org/dwr-demo/simple/text.html）中的教程，我将 dwr 脚本放置在我的 html 文件中。但是当我运行应用程序时，它会显示以下消息。

```
ReferenceError: dwr is not defined
[Break On This Error]       
var name = dwr.util.getValue("demoName"); 
```

我的 HTML 文件是：

```
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<script type='text/javascript' src='/dwr/engine.js'>    
</script>
<script type='text/javascript' src='/dwr/util.js'>

</script>
<title>Hello</title>
<script type="text/javascript">
    function update() {
        var name = dwr.util.getValue("demoName");
        Demo.sayHello(name, function(data) {
            dwr.util.setValue("demoReply", data);
        });
    }
</script>
</head>

<body>
    <p>
        Name: <input type="text" id="demoName" /> <input value="Send"
            type="button" onclick="update()" /> <br /> Reply: <span
            id="demoReply"></span>
    </p>
</body>
</html> 
```

我的 dwr.xml 文件是：

```
<!DOCTYPE dwr PUBLIC
    "-//GetAhead Limited//DTD Direct Web Remoting 3.0//EN"
    "http://getahead.org/dwr/dwr30.dtd">

<dwr>
    <allow>
        <create creator="new" javascript="Demo">
            <param name="class" value="com.dwr.my.Demo" />
        </create>
    </allow>
</dwr> 
```

类文件是Demo.java

```
package com.dwr.my;

public class Demo {

    public String sayHello(String name) {
        return "Hello, " + name;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:34:12.607

请确保在 web.xml 中添加 dwr servlet 映射

```
<servlet>
        <servlet-name>dwr-invoker</servlet-name>
        <display-name>DWR Servlet</display-name>
        <description>Direct Web Remoter Servlet</description>
        <servlet-class>
            org.directwebremoting.servlet.DwrServlet
        </servlet-class>

</servlet>
<servlet-mapping>
        <servlet-name>dwr-invoker</servlet-name>
        <url-pattern>/dwr/*</url-pattern>
    </servlet-mapping> 
```

并将其添加到 html 文件中

```
<script type='text/javascript' src='/dwr/demo.js'>    
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:29:33.700

该错误告诉您该变量`dwr`在您的 JavaScript 上下文中不存在。

您似乎没有正确设置 DWR。您对上一个答案的评论证实了这一点： [显示消息 "NetworkError: 404 Not Found - localhost:8080/dwr/engine.js"](https://stackoverflow.com/questions/12931505/dwr-dwr-is-not-defined#comment17528708_12933371)。如果没有找到engine.js，那么你不会走得太远！

您是否按照此处列出的所有步骤设置环境以便可以调用 DWR？： http: [//directwebremoting.org/dwr/introduction/getting-started.html](http://directwebremoting.org/dwr/introduction/getting-started.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T05:13:21.343

实现dwr.xml后运行localhost:8080/DWR_tomcat/dwr/，对应web.xml中的java类和dwr servlet映射。然后它会显示DWR已知的类。然后点击我们的类名，它会显示类中声明的方法并生成java脚本标签添加到html文件中。

# java - 当任何一个特定端口短信接收时如何自动打开Android应用程序？

> ID：12931507
> 
> 赞同：0
> 
> 时间：2012-10-17T09:46:19.257
> 
> 标签：java, android, cordova, sms

我是 android 新手，我已经使用 phonegap 完成了一个 android 应用程序，但在这个应用程序中我将实现一个新概念。这只不过是这个应用程序想要在接收到特定端口的短信时自动打开。那么如何实现这个概念呢？实际上在登录用户名发送到后端并通过同一端口回复的应用程序表单后。如果输入的用户名正确，则回复消息为真，否则返回假。

在我们的应用程序中，当接收到该特定消息时，获取响应并检查它是否为真，重定向到主表单，否则再次显示登录表单并显示错误消息。这就是概念。

现在我的活动类如下，但我不知道如何改变我的活动类以获得这个概念。

所以任何机构都可以帮助我如何实现这个概念......在此先感谢。

```
 import android.os.Bundle;
 import org.apache.cordova.*;
 import android.view.Menu;

 public class SMSActivity extends DroidGap
 {

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sms);
        //super.setIntegerProperty("splashscreen", R.drawable.logo);
        super.loadUrl("file:///android_asset/www/index.html");
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        getMenuInflater().inflate(R.menu.activity_sms, menu);
        return true;
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:47:18.680

您可以将[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html) 用于 SMS_RECEIVED。请参阅本教程，这可能会对您有所帮助。

1) [SMS 消息](http://mobiforge.com/developing/story/sms-messaging-android)
2)[对传入消息作出反应](http://www.anddev.org/recognize-react_on_incoming_sms-t295.html)

# c# - 之间的区别 和 在

> ID：12931509
> 
> 赞同：0
> 
> 时间：2012-10-17T09:46:29.200
> 
> 标签：c#, asp.net, gridview

好吧，碰巧我是 asp.net 的新手，并试图创建一个以编程方式声明其源的 Grid。

在这个过程中，我遇到了 2 个标签**Fields**和**Columns**。谁能告诉我他们有什么不同？

编辑：我浏览了一些示例***MSDN***示例，据我所知，在我看来它们可以互换使用（尽管我觉得那不是真的！）。

看一下这个：

```
 <asp:GridView ID="GridView1" runat="server" 
AutoGenerateColumns="False" DataKeyNames="EmployeeID" DataSourceID="ObjectDataSource1">

    <Columns>

        <asp:BoundField DataField="LastName" HeaderText="LastName"

          SortExpression="LastName" />

        <asp:BoundField DataField="FirstName" HeaderText="FirstName"

          SortExpression="FirstName" />

        <asp:BoundField DataField="Title" HeaderText="Title"

          SortExpression="Title" />

        <asp:BoundField DataField="HireDate" HeaderText="HireDate"

          SortExpression="HireDate" />

    </Columns>

</asp:GridView> 
```

然后是：

```
 <asp:GridView ID="GridView1" runat="server" AllowPaging="True"
AutoGenerateRows="False" DataKeyNames="ProductID"
DataSourceID="ObjectDataSource1" EnableViewState="False">

    <Fields>

        <asp:BoundField DataField="ProductName" HeaderText="Product"

          SortExpression="ProductName" />

        <asp:BoundField DataField="CategoryName" 
HeaderText="Category"

          ReadOnly="True" SortExpression="CategoryName" />

        <asp:BoundField DataField="SupplierName" 
HeaderText="Supplier"

          ReadOnly="True" SortExpression="SupplierName" />

        <asp:BoundField DataField="QuantityPerUnit" 

          HeaderText="Qty/Unit" SortExpression="QuantityPerUnit" />

        <asp:BoundField DataField="UnitPrice" 
DataFormatString="{0:c}"

          HeaderText="Price"

            HtmlEncode="False" SortExpression="UnitPrice" />

    </Fields>

</asp:GridView> 
```

***看起来很相似还是只是我？？！***

*感谢您的帮助。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:48:51.353

`Columns`只是字段的周围标签

*   `TemplateFields`使用您想要的任何控件或
*   `BoundFields`这是自动创建的

因此`Columns`，将字段列表包含在 GridView 中。

```
<Columns>
    <asp:Boundfield datafield="StudentID"
        readonly="true"      
        headertext="Student ID"/>
    <asp:TemplateField HeaderText="Student" HeaderStyle-HorizontalAlign="Left">
       <ItemTemplate>
            <asp:label runat="server" Font-Bold="true" ID="LblStudent" Text='<%# Bind("Student") %>'></asp:label>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Inner Grid">
       <ItemTemplate>
           <asp:GridView ID="Grid2" AutoGenerateColumns="false" runat="server" GridLines="None" Width="300">
                <RowStyle  CssClass="GridViewRowStyle" />
                <AlternatingRowStyle CssClass="GridViewAlternatingRowStyle" />
                <HeaderStyle CssClass="GridViewHeaderStyle" />
                <SelectedRowStyle BackColor="Aqua" />
                <Columns>
                    <asp:TemplateField HeaderText="Student" HeaderStyle-HorizontalAlign="Left">
                       <ItemTemplate>
                            <asp:label runat="server" Font-Bold="true" ID="LblStudent" Text='<%# Bind("Student") %>'></asp:label>
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView>
        </ItemTemplate>
    </asp:TemplateField>
</Columns> 
```

如您所见，a`TemplateField`还可以包含另一个嵌套的 GridView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:04:43.333

*我是瞎还是笏！*

在我发布了这个问题后，我回到了我的*绘图板*，结果发现，在 asp:GridView 中没有 Fields 标记，对吧？！

请让我知道这是否是真实的人（**并证明我很傻**！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-26T15:36:47.473

暂时搁置这个特定的控制，从一般计算机科学的角度来看这个可能会有所帮助。

在经典编程（任何语言）中，字段将是行和列的交集——一段离散的数据。例如，如果一个表有 20 行包含名字和姓氏的数据，如果您转到第 19 行并查看“名字”列，您就会得到一个 FIELD。也许它包含离散数据“JOHN”。

COLUMNS 将是类似数据的集合——在这个例子中，你有两列“名字”和“姓氏”。列将具有诸如数据类型、最大长度、约束（空值可以吗？等）等属性。

有些人可能会对我的定义提出质疑，并说 COLUMN 中的单个单元格将被称为 FIELD。听到这个并不少见。我会回答，对于具有单列的表，尤其如此 :-) 但要点是：COLUMNS 通常是用于容纳更小、更离散的项目（例如 FIELDS）的容器。FIELDS 通常指的是单个数据，例如您可以在数据库表中的行和列的交点处找到的数据。

# xaml - 使用 Graph# 库时出现 XamlParseException

> ID：12931510
> 
> 赞同：3
> 
> 时间：2012-10-17T09:46:29.163
> 
> 标签：xaml, vspackage, visual-studio-sdk, xamlparseexception, graph-sharp

我正在尝试在我的**VSPackage项目中使用**[Graph#](http://graphsharp.codeplex.com/)库，但不幸的是，有一些障碍需要克服。这是我所做的：

 **我将以下所有 DLL 复制到项目根目录中的文件夹 /Libraries 中：

*   GraphSharp.dll
*   GraphSharp.Controls.dll
*   QuickGraph.dll
*   WPFExtensions.dll

所有的构建操作都是“内容”，选项复制到输出设置为“不复制”。

我将这些引用添加到我的项目中。（添加参考... -> 浏览 -> 从 /Library 文件夹中选择它们）

之后，我创建了以下文件。您可以看到 ViewModel 设置为 UserControl 的 DataContext，并且它定义了 UI 绑定的“MethodGraph”。

**XAML 文件**

```
<UserControl x:Class="Biocoder.InteractiveExploration.View.ExplorationControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:graphsharp="clr-namespace:GraphSharp.Controls;assembly=GraphSharp.Controls"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">

<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <ListView Grid.Row="0" ItemsSource="{Binding SelectedMethods}">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Method" DisplayMemberBinding="{Binding Name}"/>
                <GridViewColumn Header="ReturnType" DisplayMemberBinding="{Binding ReflectionInfo.ReturnType}"/>
                <GridViewColumn Header="Incoming Calls"/>
                <GridViewColumn Header="Outgoing Calls"/>
            </GridView>
        </ListView.View>
    </ListView>

    <graphsharp:GraphLayout Graph="{Binding MethodGraph}"/>

</Grid>

</UserControl> 
```

**代码隐藏**

```
public partial class ExplorationControl : UserControl
{
    public ExplorationControl()
    {
        InitializeComponent();

        // set the datacontext
        DataContext = InteractiveExplorationPackage.ExplorationToolViewModel;
    }
} 
```

**视图模型**

```
public class ExplorationToolViewModel : ViewModelBase
{
    private IBidirectionalGraph<object, IEdge<object>> _methodGraph;

    public IBidirectionalGraph<object, IEdge<object>> MethodGraph
    {
        get { return _methodGraph; }
        set
        {
            if (value != _methodGraph)
            {
                _methodGraph = value;
                NotifyPropertyChanged("MethodGraph");
            }
        }
    }

    public ExplorationToolViewModel()
    {
        InitializeViewModel();
    }

    private void InitializeViewModel()
    {
        SelectedMethods = new ObservableCollection<Method>();
        CreateGraph();
    }

    private void CreateGraph()
    {
        var g = new BidirectionalGraph<object, IEdge<object>>();

        // add vertices
        string[] vertices = new string[5];
        for (int i = 0; i < 5; i++)
        {
            vertices[i] = i.ToString();
            g.AddVertex(vertices[i]);
        }

        // add edges
        g.AddEdge(new Edge<object>(vertices[0], vertices[1]));
        g.AddEdge(new Edge<object>(vertices[1], vertices[2]));
        g.AddEdge(new Edge<object>(vertices[2], vertices[3]));
        g.AddEdge(new Edge<object>(vertices[3], vertices[1]));
        g.AddEdge(new Edge<object>(vertices[1], vertices[4]));

        MethodGraph = g;
    }
} 
```

幸运的是，我可以编译整个项目，但在运行时 XAML 中的以下错误发生在标记上（在所需标记的正上方）：

**无法加载文件或程序集“GraphSharp.Controls，PublicKeyToken=null”或其依赖项之一。系统找不到文件。**

但我引用了程序集，它们列在引用列表中。有什么问题？**在编写Visual Studio 包**（插件）时，是否必须以另一种方式引用程序集？

*编辑：我只是试图让它在另一个项目中工作，所以我只是设置了一个普通的 WPF 应用程序并完成了上述所有操作。在此解决方案中，一切正常！这太奇怪了！*

希望你能帮助我:-) 最好的问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:02:13.553

你能在你的项目中使用 nuget 吗？`install-package graphsharp`如果是这样，您应该尝试运行命令，而不是手动复制 dll-s 和引用。

我认为这是某种`DLL strong name`问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:55:45.670

你试过这个吗？[http://shfb.codeplex.com/workitem/32819](http://shfb.codeplex.com/workitem/32819)

它说：

> 我有这样一个问题，并且在讨论中的某个地方进行了讨论。您需要做的是打开项目属性>路径并删除所有路径（只需将它们留空）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T14:06:37.427

我现在设法让一切正常。还是要谢谢你的帮助！

**VSPackage 在运行时的问题基本上是它们从计算机上另一个名为Private Assembly 文件夹**的位置加载第三方程序集。（C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies）所以你所要做的就是将引用的程序集复制到这个文件夹中（需要管理员权限）。为了能够在开发时使用程序集，只需像往常一样将这些引用添加到您的项目中，编译器将以通常的方式使用它们。唯一的区别是在运行时，因为 Visual Studio 从 Private Assemblies 文件夹加载这些引用。

可以在此处找到有关此内容的更多信息：[托管 VSPackage 文件位置密钥](http://msdn.microsoft.com/en-us/library/bb166380%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-16T04:34:01.337

其他解决方案：

1.  将您的库作为程序集资产添加到您的 .vsixmanifest 文件中：
2.  将此代码添加到您的包初始化代码中。

```
protected override async Task InitializeAsync(CancellationToken cancellationToken, IProgress<ServiceProgressData> progress)
{
    AppDomain.CurrentDomain.AssemblyResolve += LoadFromSameFolder;

    static Assembly? LoadFromSameFolder(object sender, ResolveEventArgs args)
    {
        var executingAssemblyPath = Assembly.GetExecutingAssembly().Location;
        var folderPath = Path.GetDirectoryName(executingAssemblyPath) ?? string.Empty;
        var assemblyPath = Path.Combine(folderPath, $"{new AssemblyName(args.Name).Name}.dll");

        return File.Exists(assemblyPath)
            ? Assembly.LoadFrom(assemblyPath)
            : null;
    }

    // your code
} 
```**

# tsqlt - tSQLt AssertEqualsTable 不检查排序

> ID：12931511
> 
> 赞同：1
> 
> 时间：2012-10-17T09:46:32.367
> 
> 标签：tsqlt

我为实际和预期定义了两个表，具有完全相同的架构。我将两行插入到预期的表中，ID 为 2、1。

我跑

```
INSERT INTO actual EXEC tSQLt.ResultSetFilter 1, '{statement}' 
```

填充实际然后

```
EXEC tSQLt.AssertEqualsTable @expected = 'expected' , @actual = 'actual' 
```

比较结果。

即使数据的顺序不同（实际 ID 为 1、2），测试也通过了。

我通过在测试中添加 SELECT * FROM 实际和 SELECT * FROM 预期并使用 tSQLt.Run '{test name}' 自行运行测试来确认数据不同。

有谁知道这是否是一个已知的错误？显然它应该检查每行，所以应该检查排序。返回的所有其他列都是 NULL，它只是包含值的 ID 列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:00:07.323

除非在 select 语句中指定了 order by 子句，否则 SQL Server 不保证该顺序（请参阅[此 MSDN 页面上](http://msdn.microsoft.com/en-us/library/ms188385.aspx)的顶部要点） - 尽管实际上它通常按照您的预期排序。

正因为如此，我相信 tSQLt 寻找不相同和相同的行是有意义的——但检查顺序没有——否则答案可能会随 SQL 服务器的一时兴起而改变，并且测试将毫无意义（更糟糕的是——间歇性失败！）。AssertEqualsTable 上的 tSQLt[用户指南](http://tsqlt.org/user-guide/assertions/assertequalstable/)声明它检查表的内容，但没有检查其中的顺序。是什么让您得出结论，也应该检查订单？我找不到提及它。

如果您需要检查订单，您可以将预期结果和实际结果插入带有标识列的临时表（或使用 ROW_NUMBER）并检查结果表 - 如果订单不同，则标识列会不同。

[Greg M Lucas 的博客上](http://datacentricity.net/2011/12/unit-testing-databases-with-tsqlt-part-6-testing-a-select-stored-procedure/)记录了一个类似的方法。

不建议在没有 order by 子句的情况下依赖从表返回的顺序（[MSDN 链接](http://msdn.microsoft.com/en-us/library/ms188385.aspx)） - 所以我建议在应用程序对语句的调用中包含一个，或者如果返回行的顺序很重要，则在其中包含一个 SP .

# php - 如何判断狮身人面像搜索服务器的连接是否已满

> ID：12931513
> 
> 赞同：0
> 
> 时间：2012-10-17T09:46:44.750
> 
> 标签：php, logging, sphinx

如何判断我的狮身人面像搜索服务器的连接是否已满？searchd 是否自动完成了任何日志记录，我是否可以在我的应用程序中进行任何日志记录，以检查错误是否是由于搜索服务器因连接而被最大化或其他原因引起的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:38:53.667

当查询失败时，您应该记录 GetLastError 的输出。

[http://sphinxsearch.com/docs/current.html#api-func-getlasterror](http://sphinxsearch.com/docs/current.html#api-func-getlasterror)

也可以记录 getLastWarning。您可以在每次查询后调用它，如果不为空则将其记录下来。

# php - 使用array_intersect将数组与重复值进行比较？

> ID：12931515
> 
> 赞同：5
> 
> 时间：2012-10-17T09:46:51.550
> 
> 标签：php, arrays, array-intersect

我正在为我的目录设计一个包引擎。在这里，您可以将一定数量的产品添加到包装和折扣中。当您订购产品时，脚本必须检测哪些包裹交易适用于您的订单。

这是我的代码：

```
// packages
$packages["package1"] = array(1,1,2);
$packages["package2"] = array(1,2);

//orderlist
$orderlist = array(1,1,2,1,2,2);

// put the order list in a temp array
$temp_product_array = $orderlist;

foreach($packages as $pname => $package_array)
{
  $no_more_package = 0;
  do
  {
    // put the package products in a temp array
    $temp_package_array = $package_array;

    $is_packages_array = array_intersect($temp_package_array,$temp_product_array);

    // if all package values are present
    if(count($is_packages_array) == count($temp_package_array))
    {
      // add package name
      $packages_in_order[] =  $pname;

      // filter the package out of the product list but keep duplicate values
      foreach($temp_product_array as $key1 => $pid1)
      {
        foreach($temp_package_array as $key2 => $pid2)
        {
          if($pid1==$pid2)
          {
            unset($temp_product_array[$key1]);
            unset($temp_package_array[$key2]);
            break;  // after removing go to the next product to prevent double erasing
          }
        }
      }
    }
    else
    {
      $no_more_package = 1;
    }

  }
  while($no_more_package<1);
}

print_r($packages_in_order);
print_r($temp_product_array); 
```

结果是：

```
Array ( [0] => package1 [1] => package1 ) Array ( [5] => 2 ) 
```

但我希望结果是：

```
Array ( [0] => package1 [1] => package2 ) Array ( [5] => 2 ) 
```

我试过了`array_diff`，`array_intersect`但它们都不能很好地处理重复值。

有没有人有更好/可行的方法来解决这个问题？
（PS 因为不同的来源我不能使用关联数组）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:10:35.743

我会解决这个问题。其中一部分是在列表中找到包。一个完全可以做到这一点的现有函数`consecutive_values`在一个可能相关的问题中被命名：[在数组中搜索连续值](https://stackoverflow.com/a/6300893/367456)。

可以按确切的顺序在另一个数组中定位一个数组。这可能就是你想要的。

剩下的部分是搜索包然后非常简单。如果您正确理解了您的问题，那么您也想返回剩菜：

```
list($found, $rest) = find_packages($packages, $orderlist);
var_dump($found, $rest);

function find_packages(array $packages, array $list)
{
    $found = array();
    foreach($packages as $name => $package) {
        # consecutive_values() is @link https://stackoverflow.com/a/6300893/367456
        $has = consecutive_values($package, $list);
        if ($has === -1) continue;
        $found[] = $name;
        array_splice($list, $has, count($package));
    }

    return array($found, $list);
} 
```

输出：

```
array(2) {
  [0] =>
  string(8) "package1"
  [1] =>
  string(8) "package2"
}
array(1) {
  [0] =>
  int(2)
} 
```

*编辑：*多次搜索同一个包需要稍作修改。这里创建了一个内部 while 循环，如果找不到当前包，则需要中断：

```
function find_packages(array $packages, array $list)
{
    $found = array();
    foreach($packages as $name => $package) {
        while (true) {
            # consecutive_values() is @link https://stackoverflow.com/a/6300893/367456
            $has = consecutive_values($package, $list);
            if ($has === -1) break;
            $found[] = $name;
            array_splice($list, $has, count($package));
        }
    }

    return array($found, $list);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:05:29.643

```
// packages
$packages["package1"] = array(1,1,2);
$packages["package2"] = array(1,2);

//orderlist
$orderlist = array(1,1,1,2,2,2);

// put the order list in a temp array
$temp_product_array = $orderlist;
$product_count_array = array_count_values($temp_product_array);

foreach($packages as $pname => $temp_package_array)
{
  $no_more_package = 0;
  do
  {
    $test_package_array = array();

    foreach($temp_package_array as $key => $pid)
    {
      // check if the product is still in the order totals 
      if(isset($product_count_array[$pid]) && $product_count_array[$pid]>0)
       {
         $product_count_array[$pid]--;
         $test_package_array[] = $pid;
       }
       else
       {
         $no_more_package = 1;
       }
    }
    // check if the found products match the package count
    if(count($temp_package_array)==count($test_package_array))
    {
      $packages_in_order[] = $pname;
    }
    else
    {
      // add the extracted products in case of incomplete package 
      foreach($test_package_array as $pid)
       {
         $product_count_array[$pid]++;
       }
    }

  }
  while($no_more_package<1);
}

print_r($packages_in_order);
print_r($product_count_array); 
```

# php - 将 ajax jquery 请求显示响应发送到对话框 jqueryui

> ID：12931516
> 
> 赞同：0
> 
> 时间：2012-10-17T09:46:53.670
> 
> 标签：php, jquery, ajax, jquery-ui

我有这样的链接我需要在带有城市 ID 或名称的对话框中显示城市的详细信息，但无法发送数据

```
<a class="dot"  style="top:110px;  left:145px;" continent="NA"  id="1"  name="1"></a> 
```

我需要单击时显示弹出对话框，但单击后对话框未打开

```
 <script language="javascript" type="text/javascript">
$('a.dot').click(function(){
var vid=$(this).attr('id');
var vname=$(this).attr('name');
var vcity=$(this).attr('city');
$.ajax({
type : GET,
data:{id : vid , name : vname , city : vcity},
url : "ajax.php",
success : function(data){
$('#dialog-message').html(data);
}

});
});
</script>

<a class="dot" style="top:110px; left:145px;" continent="NA" id="1" name="1" city="teh"></a>

<div id="dialog-message">
</div> 
```

ajax.php 代码是：

```
if(isset($_GET)){
echo '<script>
    $(function() {
        $( "#dialog-message" ).dialog({
            modal: true,
            buttons: {
                Ok: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    });
    </script>
    <div id="dialog-message">
   ' . $_GET[name]  . ',' . $_GET[id] . ',' . $_GET[city] . '
    </div>
';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:51:21.753

```
 $(document).ready(function() {

    $('.dot').click(function(){
    var vid=$(this).attr('id');
    var vname=$(this).attr('name');
    var vcity=$(this).attr('city');
    $.ajax({
    type : "GET",
    data:{id : vid , name : vname , city : vcity},
    url : "ajax.php",
    success : function(data){
    $('#dialog-message').html(data);
        $( "#dialog-message" ).dialog();
    }

    });
    });
    }); 
```

类型：“GET” 不是类型：GET

ajax.php

```
if(isset($_GET)){
echo  $_GET[name]  . ',' . $_GET[id] . ',' . $_GET[city] ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:51:50.693

您的 PHP 代码似乎正在创建`<div id="dialog-message">`另一个`<div id="dialog-message">`. 尝试更改`id`PHP 生成的内容，并更改 PHP 中的脚本以匹配新的`id`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:56:53.213

Ajax .get 可以轻松完成这项工作：

```
//This is a Click even. It fires when you click the (<a class="dot">CLick</a>)
<script language="javascript" type="text/javascript">

$(document).ready(function() {

$('.dot').click(function(){

var vid=$(this).attr('id');

var vname=$(this).attr('name');

var vcity=$(this).attr('city');

$.get("ajax.php?id="+ vid +"&name="+ vname + "&city=" + vcity, function(data){

    $('#dialog-message').html(data);

    $( "#dialog-message" ).dialog({

            modal: true,
            buttons: {
                Ok: function() {
                    $( this ).dialog( "close" );
                }
            }
        });

    });
});
});

</script>

//This is a load even. It fires when the page is loaded
<script language="javascript" type="text/javascript">

$(document).ready(function() {

var vid=$(this).attr('id');

var vname=$(this).attr('name');

var vcity=$(this).attr('city');

$.get("ajax.php?id="+ vid +"&name="+ vname + "&city=" + vcity, function(data){

    $('#dialog-message').html(data);

    $( "#dialog-message" ).dialog({

            modal: true,
            buttons: {
                Ok: function() {
                    $( this ).dialog( "close" );
                }
            }
        });

    });

});

</script>

    <a class="dot" style="top:110px; left:145px;" continent="NA" id="1" name="1" city="teh">Click Here</a>

    <div id="dialog-message" style="display:none;">
    </div> 
```

ajax.php

```
if(isset($_GET)){
echo  $_GET[name]  . ',' . $_GET[id] . ',' . $_GET[city] ;
} 
```

# jquery - jQuery UI 对话框（）不会在 iPad 上打开

> ID：12931520
> 
> 赞同：0
> 
> 时间：2012-10-17T09:47:06.980
> 
> 标签：jquery, ipad, jquery-ui

我有一个小型网络应用程序，不过是几个 HTML 页面。我希望在我的应用程序中使用 jQuery UI 对话框，我让它在我的 Mac 和 PC（Sarafi、Chrome、Firefox）上的浏览器中运行，并且我已经部署到 android（Xoom 2）并且一切都很好但是对话框不是当我在 iPad (iPad 2) 上测试时触发。我还注意到，在 iPad 上查看页面时，包含对话框内容的 DIV 并未隐藏。

这是我的JS代码...

```
$('#entry_level_phones .boxHolder').live("click", function(){

    var clickedItem = $(this).find("img")[0].id;

    console.log(clickedItem);
    // raise a modal...
    $(function() {
        $( "#dialog-modal" ).dialog({
            modal: true,
            draggable:false,
            height:600,
            position:"center",
            resizable:false,
            width:1000
        });

   // more happens here which isn't important... but there is no conflict or error
  });
}); 
```

这是相关的 DIV ...

```
<div id="dialog-modal" title="">
    <p>Hello World</p>
</div> 
```

当通过放置一个`alert()`查看是否引发点击事件进行测试时，会执行测试警报，因此点击事件不是问题，它是对话框本身或未加载 jQuery UI。

我也尝试引发这样的对话框，而不与 DIV 或事件相关联，但即使这样也不起作用

```
$( "<div>this is a test</div>" ).dialog() 
```

有其他人在使用 iPad 的对话框时遇到问题吗？

我不确定这是否相关，但是我的应用程序是一个 mainHTML 文件，它使用 .load() 方法引入 HTML 内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:49:28.103

从该`$(function() { ... })`块中创建对话框。

该块相当于一个`document.ready`处理程序，此时您的文档肯定已经完全准备好了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:54:07.150

很抱歉回答我自己的问题，但我检查了是否正在加载 UI...

```
var isiPad = navigator.userAgent.match(/iPad/i) != null;

if(!jQuery.ui && isiPad == true){
    // do stuff...
    } 
```

我考虑过将 UI 脚本动态附加到我的网页正文中，但是我使用的是 jQuery UI 的托管版本。当我通过下载将其替换为本地版本时，问题似乎消失了......因此答案是托管版本加载时间过长或根本不加载。对不起剧情...

# c - 当我尝试在文件中创建孔时，lseek 出错

> ID：12931526
> 
> 赞同：0
> 
> 时间：2012-10-17T09:47:24.763
> 
> 标签：c, unix

我编写了以下程序来创建一个包含孔的文件，但在 lseek() 中出现错误，如下所示： lseek <22> 中的错误：无效参数我只想在第 100 位写“1”和“2”抵消。我也用 SEEK_END 尝试过，但没有成功

```
#include<stdio.h>
#include<errno.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <string.h>
#include <unistd.h>

int main(void) {

    int fd = -1;
    int rc = -1;
    char *buff = "1";
    char *buff_end = "2";
    char *err;

    fd = open("hole_file", O_CREAT | O_RDWR | O_TRUNC, 0644);

    if (fd == -1) {
        printf("\n Error in open() !!!");
        return (-1);
    }

    rc = write(fd, buff, sizeof(buff));
    if (rc == -1) {
        printf("\n Error in writing at start location <%d>", errno);
        close(fd);
        unlink("hole_file");
        return (-1);
    }

    rc = lseek(fd, SEEK_CUR, 100);
    if (rc == -1) {
        err = strerror(errno);
        printf("\n Error in lseek <%d> : %s\n", errno, err);
        close(fd);
        unlink("hole_file");
        return (-1);
    }

    rc = write(fd, buff_end, sizeof(buff_end));
    if (rc == -1) {
        printf("\n Error in writing at 100th offset <%d>", errno);
        close(fd);
        unlink("hole_file");
        return (-1);
    }

    close(fd);

    return (0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:54:32.627

你交换了论点。

```
lseek(fd, SEEK_CUR, 100) 
```

应该

```
lseek(fd, 100, SEEK_CUR) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:54:58.867

后

```
rc = write(fd, buff, sizeof(buff)); 
```

你有文件末尾的指针，你不能使用 SEEK_CUR，你必须使用 SEEK_SET，你把 lseek 标志放在参数列表中的错误位置：

```
rc = lseek(fd, 100, SEEK_SET); 
```

# c++ - C++ 套接字编程 TCP/IP 套接字缓冲区的最大大小？

> ID：12931528
> 
> 赞同：4
> 
> 时间：2012-10-17T09:47:27.320
> 
> 标签：c++, sockets, buffer, tcpclient, tcpserver

我正在使用 C++ TCP/IP 套接字。根据我的要求，我的客户端必须连接到服务器并读取它发送的消息（这真的很新，不是吗）但是......在我的应用程序中我必须等待一段时间（通常为 1 - 2 小时) 在我真正开始阅读消息（通过 recv() 或 read()）之前，服务器仍然继续发送消息。

我想知道缓冲区的容量是否有限制，以防这些消息未被读取，以及谁的物理内存用于缓冲这些消息？发件人还是收件人？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T12:15:25.667

TCP 数据在发送方和接收方都被缓冲。接收方的套接字接收缓冲区的大小决定了有多少数据可以在没有确认的情况下进行传输，发送方的发送缓冲区的大小决定了在发送方阻塞或获得 EAGAIN/EWOULDBLOCK 之前可以发送多少数据，具体取决于阻塞/非阻塞模式。您可以将这些套接字缓冲区设置为最大 2^32-1 字节，但如果您将客户端接收缓冲区设置为高于 2^16-1，则必须在连接套接字之前这样做，以便 TCP 窗口缩放可以在连接握手中协商，以便高 16 位可以发挥作用。[服务器接收缓冲区在这里不相关，但如果你设置它> = 64k，你需要在监听套接字上设置它，它将从那里被接受的套接字继承，

但是，我完全同意 Martin James 的观点，即这是一个愚蠢的要求。它在服务器上浪费了一个线程、一个线程堆栈、一个套接字、一个大的套接字发送缓冲区、一个 FD 和所有其他相关资源两个小时，并可能影响其他线程并因此影响其他客户端。它还错误地给服务器一个接收到两个小时的数据的印象，而实际上它只被传输到接收缓冲区，这可能会导致恢复情况的未知复杂性：例如，服务器可能无法重建到目前为止发送的数据。在您准备好开始接收数据之前最好不要连接，或者在客户端读取数据并将数据假脱机以供以后处理。

# ios - 删除核心数据内容的奇怪行为

> ID：12931531
> 
> 赞同：0
> 
> 时间：2012-10-17T09:47:32.930
> 
> 标签：ios, iphone, core-data

我使用以下代码删除 coredata 数据库内容...我正确收到通知..但似乎数据没有被删除...我想不通...

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
       NSEntityDescription *entity = [NSEntityDescription entityForName:entityDescription inManagedObjectContext:self.managedObjectContext];
       [fetchRequest setEntity:entity];
       NSError *errors;
       NSArray *items = [self.managedObjectContext executeFetchRequest:fetchRequest error:&errors];
       NSLog(@"FinalArray:%@",[finalArray objectAtIndex:currentImageIndex]);
       NSManagedObject *managedObject=[finalArray objectAtIndex:currentImageIndex];
       NSLog(@"NSManagedObject:%@",managedObject);
       for (int i=0;i<[items count];i++)
       {
           if ([managedObject isEqual:[items objectAtIndex:i]])
           {
               [self.managedObjectContext deleteObject:managedObject];
               NSLog(@"gone");
           }
       }
       NSNotificationCenter *nc=[NSNotificationCenter defaultCenter];
       [nc addObserver:self selector:@selector(deleteCheck:) name:NSManagedObjectContextObjectsDidChangeNotification object:self.managedObjectContext];
       NSLog(@"dffsdf%@",[errors description]);
       if (self.managedObjectContext==nil)
       {
           NSLog(@"deleted");
       } 
```

通知功能调用

```
 - (void)deleteCheck:(NSNotification *)notification 
{
    NSLog(@"CoreData got Deleted");
    NSDictionary *userInfoDictionary = [notification userInfo];
    NSSet *deletedObjects = [userInfoDictionary objectForKey:NSDeletedObjectsKey];
    NSLog(@"DeletedObjects%@",deletedObjects);
} 
```

由于每次点击删除按钮时都会调用 NSManagedObjectContextObjectsDidChangeNotification 通知...但是在数据库中没有效果...请提出建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:55:58.023

您可以使用我使用的这个简单的删除方法，它的工作完美：

```
-(void)deleteRecords{
NSFetchRequest * deleteRequest = [[[NSFetchRequest alloc] init] autorelease];
[deleteRequest setEntity:[NSEntityDescription entityForName:@"yourTabelName" inManagedObjectContext:context]];
[deleteRequest setIncludesPropertyValues:NO]; //only fetch the managedObjectID

NSError * error = nil;
NSArray * cars = [context executeFetchRequest:deleteRequest error:&error];

if ([cars count] !=0) {      

    //error handling goes here

    for (NSManagedObject * car in cars) {

        [context deleteObject:car];
    }
    NSError *saveError = nil;
    [context save:&saveError];
    //   [tableView reloadData];

}
else {
   NSLog(@"No Data To delete");

} } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:28:11.857

你需要保存在最后。

```
NSError *error = nil;
[self.managedObjectContext save:&error]; 
```

# jquery - 如何：修改 struts2 jquery.autocomplete-plugin (jgeppert) 以显示以给定输入开头的结果

> ID：12931532
> 
> 赞同：1
> 
> 时间：2012-10-17T09:47:32.653
> 
> 标签：jquery, autocomplete, struts2

是否有可能只获得以给定字母开头的结果，而不仅仅是包含它？例如，如果我输入“a”，我只想得到以“a”开头的结果，例如“ape”、“alien”等，而不是例如“banana”。我不想得到包含字母“a”的每个单词！

我正在使用来自 jgeppert (maven groupId: com.jgeppert.struts2.jquery) 的自动完成器插件和标签

```
<sj:autocompleter name="city" id="selectCity" list="cities" listValue="name" listKey="id" onSelectTopics="autocompleteSelect" /> 
```

其中插入一个输入字段。我从包含城市对象的列表对象中获取值。每个对象都有一个 id 和一个名称。

通常，如果您使用的不是 struts2-Plugin 而是 jquery-autocompleter-Plugin，您可以使用

```
$('#element').autocomplete({
    source: function(request, response) {
        var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex(request.term), "i");
        response(select.children("option").map(function() {

         var text = $(this).text();
         if (this.value && (!request.term || matcher.test(text)))
             return {
                 label: text.replace(
                     new RegExp(
                     "(?![^&;]+;)(?!<[^<>]*)(" +
                         $.ui.autocomplete.escapeRegex(request.term) +
                         ")(?![^<>]*>)(?![^&;]+;)", "gi"
                     ), "<strong>$1</strong>"),
                 value: text,
                 option: this
            };
      }));
}); 
```

从这个线程得到它：[如何：修改 jquery.autocomplete 正则表达式以显示以给定输入开头的结果](https://stackoverflow.com/questions/8520323/how-to-modify-jquery-autocomplete-regex-to-show-results-that-starts-with-the-gi)

但是使用 struts2-Plugin 会自动生成 JavaScript 代码，我不知道是否可以使用上面的示例！

有谁知道如何以这种方式修改struts2-Plugin？

# javascript - 找不到节点错误 - 尽管可以在控制台中找到节点

> ID：12931534
> 
> 赞同：4
> 
> 时间：2012-10-17T09:47:40.147
> 
> 标签：javascript, html, frame

我正在尝试在看起来像这样的文档的最顶部插入一段 HTML：

```
<html>
<frameset onunload="unload()" onload="loadme()" id="topframeset" frameborder="0" framespacing="0" rows="45,19,10,0,*,22">
(...)
</frameset>                                                                                
</html> 
```

好的 - 看起来很容易。在 Firebug 中，我可以这样做：

```
>>> document.getElementById("topframeset")

<frameset id="topframeset" onunload="unload()" onload="loadme()" frameborder="0" framespacing="0" rows="45,19,10,0,*,22"> 
```

所以它觉得很好。

然后：

```
document.insertBefore(document.createTextNode("<h1>hello</h1>"), document.getElementById("topframeset"))

Error: Node was not found
[Break On This Error]   

...ertBefore(document.createTextNode("<h1>hello</h1>"), document.getElementById("to... 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:00:11.530

davidkonrad 是对的，您需要在某些内容中插入文本节点。

```
var frameSet = document.getElementById('topframeset');
var textNode = document.createTextNode('<h1>hello</h1>');
frameSet.parentNode.insertBefore(textNode, frameSet); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:58:03.377

您需要将`<h1>`-textNode 插入到某些东西中，例如 body

```
document.body.insertBefore(document.createTextNode("<h1>hello</h1>"),
document.getElementById("topframeset")) 
```

它有效

# c# - 为什么不调用 GetVaryByCustomString

> ID：12931538
> 
> 赞同：9
> 
> 时间：2012-10-17T09:47:49.797
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2, outputcache

输出缓存是在 ASP.NET MVC2 中使用下面的代码实现的。

`GetVaryByCustomString`方法未调用：将断点置于其第一行并运行应用程序显示未到达断点。到达控制器 Index() 中的断点。

如何`VaryByCustom` 在 ASP.NET MVC2 中使用？

控制器：

```
 [OutputCache(VaryByCustom = "user")]
        public ActionResult Index(string _entity, string id)
        {
... 
```

全球.asax.cs：

```
public class MvcApplication : System.Web.HttpApplication
{
    public  override string GetVaryByCustomString(HttpContext context, string arg)
    {
        if (arg == "user")
        {
            HttpCookie cookie = context.Request.Cookies["Company"];
            if (cookie != null)
                return Thread.CurrentPrincipal.Identity.Name + "," + cookie.Value;
            return Thread.CurrentPrincipal.Identity.Name;
        }
        return base.GetVaryByCustomString(context, arg);
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T09:52:06.213

您的 OutputCache 定义是错误的。您必须指定`Duration`：

```
[OutputCache(VaryByCustom = "user", Duration = 50)]
public ActionResult Index(string _entity, string id) 
```

`GetVaryByCustomString`现在将调用您覆盖的方法。也不要忘记`GetVaryByCustomString`只有在控制器操作完成执行后才会调用该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-23T12:42:54.697

我只想提两个其他原因

如果项目中有任何*[NoCache]*属性，*GetVaryByCustomString*将不会触发。

如果你把

```
Location = OutputCacheLocation.Client, 
```

*GetVaryByCustomString*不会触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-25T19:19:21.763

我最近参与的一个项目有一个全局过滤器，阻止输出缓存工作：

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new NoCacheResponseAttribute());
    }
}

public class NoCacheResponseAttribute : BaseActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
       var response = filterContext.RequestContext.HttpContext.Response;
       response.Cache.SetCacheability(HttpCacheability.NoCache);
       response.Cache.SetExpires(DateTime.UtcNow.AddHours(-1));
       response.Cache.SetNoStore();
    }
} 
```

在注释添加过滤器的行后，输出缓存开始按预期工作。

# c# - Caliburn micro 将 message.attach 定向到所需的视图模型

> ID：12931542
> 
> 赞同：3
> 
> 时间：2012-10-17T09:48:06.967
> 
> 标签：c#, .net, wpf, caliburn.micro

我在 MainView 中添加了另一个名为 LogicView 的视图。我为 LogicView 制作了一个上下文菜单，当单击菜单项时将发布一条消息“ConvertToCode()”，但我想将名为 ConvertToCode 的消息发送到我的 MainViewModel，而不是 LogicViewModel。否则，我必须使用 EventAggregator 并将消息从我的 LogicViewModel 发布回我的 MainViewModel，这似乎非常多余。

MainViewl.Xaml：

```
<my:LogicView x:Name="logicView" AllowDrop="True">
      <my:LogicView.ContextMenu>
          <ContextMenu StaysOpen="True">
                <MenuItem Header="Convert To Code"
                 cal:Message.Attach="ConvertToCode()"/> //I'd like to send this to mainviewmodel
          </ContextMenu>
      </my:LogicView.ContextMenu>
 </my:LogicView> 
```

这可以在 Caliburn Micro 中进行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:47:14.797

[这](http://compiledexperience.com/blog/posts/wp7-context-menus-with-caliburn-micro)就是 WP7 解决问题的方法。它应该适用于您的情况。

从[文档](http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Actions&referringTitle=Documentation)：

> **Action.TargetWithoutContext** – 仅将 Action.Target 属性设置为指定实例。字符串值用于解析 IoC 容器中的实例。

# javascript - 垃圾收集器：删除对具有对另一个对象的引用的对象的引用

> ID：12931543
> 
> 赞同：2
> 
> 时间：2012-10-17T09:48:09.357
> 
> 标签：javascript

据我了解，JS 垃圾收集器会删除不再引用的对象。假设我删除了对一个对象的引用，并且该对象具有一个属性，该属性是对另一个对象的引用。两个对象都会被删除吗？

例如

```
var objectA = {
    prop1: "property",
    prop2: "property"
}

var objectB = {
    refToA: objectA
}

// Remove reference to objectA
delete objectA;

// Remove reference to objectB
delete objectB 
```

现在这两个对象都完全从内存中删除了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:54:03.423

简短的回答：是的。未在任何地方引用的对象将完全从内存中删除，无论该对象属性引用了什么。

在您的代码段中，事情相当简单，但当您开始使用闭包时，内存管理可能会变得棘手：

```
var objA = (function()
{
    var objAb = {who:'An object literal in closure scope',globalReference:'None!'};
    return {who:'Return value, is an object literal that references a closure object'.
            closureObj : objAb};
})();
var objB = {who:'some object',objAb:{who:'object literal, referenced by objB.objAb'}};
var objBAb = objB.objAb;//reference to obj literal, referenced by objB.objAb
var objAb = objA.closureObj;//reference to obj literal, referenced by objA.closureObj, which in turn references the closure object literal

delete objB.objAb;
console.log(objBAb);//<-- the object literal that was declared as a property of objB still exists
delete objAb;//<-- this reference is gone, but the closure obj still exists 
console.log(objA.closureObj);//<-- object is there 
```

基本上，对象是无名的实体。用于访问它们的变量是*引用*，*永远不会*包含实际对象本身。它漂浮在 JS 空间中。当您使用 时`delete someVar`，您所做的就是取消设置该变量的实际值，这是一个内存地址（有点）。

如果 JS GC 找不到任何引用内存中包含对象的位置的变量，它将回收该内存。
就这么简单。

当您将此逻辑应用于以下代码时：

```
var objA = (function()
{
    var closureObj = {iam:'An object literal defined inside a closure scope'};
    var functionsAreObjects = function()
    {//nameless function object, inside closure scope, too
        return closureObj;
    };
    var resetFunction = function()
    {
        this.closureReference = functionsAreObjects();//assign return value to this
    };
    return {iam:'The returned object literal',
            closureReference:closureObj,
            reset:resetFunction,
            getClosureReference:functionsAreObjects};
})();
delete objA.closureReference;//the closure object IS NOT GC'ed 
```

在前面的示例中，最后一个 delete 语句足以 GC 闭包对象字面量。但是，现在`objA`有两种方法（引用函数对象的属性）。这些方法仍然引用闭包对象，*并且*仍然被 引用`objA`，所以`closureObj`还不能被 GC'ed。所以，这就是事情变得棘手的地方：

```
delete objA.closureReference;
delete objA.reset;
delete objA.getClosureReference; 
```

我们已经删除*了所有*可以链接回`closureObj`. ——呃，不完全是。Chrome 的 V8 确实会释放内存，但我听说过类似的代码会导致 Opera 中的泄漏，而且 IE 可能不会擅长回收内存。

此外，我们已经有效地创建了一个*getter*方法`getClosureReference`，所以在现实生活中，这很可能会发生：

```
//do stuff
delete objA.closureReference;
var objB = objA.getClosureReference();//<-- created new reference to closure object
//do some more stuff
delete objA.reset;
delete objA.getClosureReference; 
```

在这种情况下，`closureObj`不能 GC'ed，因为它仍然被`objB`某处引用。只有当该变量超出范围时才会`closureObj`被释放。这不仅是一个*反对*全局变量的非常可靠的论据（它们永远不会超出范围，因此永远不会被 GC），它还表明闭包，尽管它们很整洁，但需要开发人员更多的开销：变量超出范围并不一定意味着内存被释放：某些闭包可能会公开对对象的引用，或者引用该对象的函数......

[不久前](https://stackoverflow.com/questions/11186750/memory-leak-risk-in-javascript-closures)我就这个问题发布了一个问题，但它可能解释了一些事情。
只是为了好玩，如果您想要一个嵌套闭包的示例（闭包中的闭包、闭包中的闭包、相互传递引用以及其他对象），请[尝试在以下代码中找出什么时候可以进行 GC](https://stackoverflow.com/questions/11331203/javascript-how-to-simulate-change-event-in-internet-explorer-delegation)

# haskell - 如何评估由 ADT 构建的表达式

> ID：12931544
> 
> 赞同：0
> 
> 时间：2012-10-17T09:48:12.370
> 
> 标签：haskell, functional-programming

这是我的 ADT：

```
data Ex a = I Integer  --integer
           | Add (Ex a) (Ex a) --add 
           | Variable a --variable
           | Def [(a, Ex a)] (Ex a) --defining local variables 
```

这是我的评估功能：

```
eval :: Ex a -> Integer
eval (I n) = n
eval (Add e1 e2) = eval e1 + eval e2 
```

我如何继续`eval`和？`Variable``Def`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:41:05.633

更多提示可帮助您自己编写解决方案。

一些建议

*   您需要`lookup`在类型列表上执行`[(a,Ex a)]`，因此需要`Eq a`对此进行限制。
*   如果您没有定义局部变量并使用它，您的评估可能会失败。在这种情况下，`eval`函数应该返回`Nothing`else `Just answer`。
*   我已经写了你的大部分代码，你唯一需要写的地方就是`Variable a`案例。这非常简单，因为如果成功 else ，您只需要`lookup`输入并在评估后返回值。`xs``lookup``Nothing`

代码变成

```
eval :: Eq a => Ex a -> Maybe Integer
eval = eval' []
  where eval' :: Eq a => [(a, Ex a)] -> Ex a -> Maybe Integer
        eval' _ (I n) = Just n
        eval' xs (Add e1 e2) = liftA2 (+) (eval' xs e1) (eval' xs e2) -- liftA2 from Control.Applicative
        eval' xs (Variable a) = -- write your code here
        eval' xs (Def ys e) = eval' (ys ++ xs) e -- Think of the order in which you want to combine two binding if same named variable is present in both xs and ys. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:56:55.263

这里有一个提示：

```
eval :: Ex a -> Integer
eval = eval' []
  where eval' :: [(a, Integer)] -> Ex a -> Integer
        eval' _ (I n) = n
        -- etc 
```

# android - 使用 Android 语音识别将语音发送到云端的格式是什么？

> ID：12931545
> 
> 赞同：2
> 
> 时间：2012-10-17T09:48:23.920
> 
> 标签：android, speech-recognition, speech

我正在构建一个包含语音识别的应用程序 - 我打算使用 Android 语音识别服务或语音输入功能。

根据我的阅读，语音大部分是在云端处理的。我的问题是是否有人知道音频以什么格式发送到云端？例如，是 WAV、MP3 或 PCM 之类的东西，还是可能完全是其他东西？

我承认这主要是出于好奇，想更多地了解幕后发生的事情。（但在一定程度上，它也与对预处理和后处理对识别的影响的兴趣有关。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:55:03.340

好吧，我也一直在寻找那个信息，我能得到的最接近的是谷歌的[chrome 语音识别 API，](http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/)它使用了[FLAC](http://en.wikipedia.org/wiki/FLAC)音频编解码器。我不确定android是否也使用它，但它是我得到的最接近的东西。

# c - 有条件地包含 windows mobile 的代码

> ID：12931549
> 
> 赞同：1
> 
> 时间：2012-10-17T09:48:45.487
> 
> 标签：c, visual-studio-2008, windows-mobile

我想让我的应用程序代码针对 windows mobile 进行不同的编译，因为它的功能较少。

为此，我想编写这样的代码：

```
#ifndef (_windows_mobile_)
//define avaiabilty of features thatare not supported in windows mobile
#endif 
```

我应该使用什么宏？

目标平台是 Windows Mobile 6 专业版。

我去了[http://sourceforge.net/p/predef/wiki/OperatingSystems/](http://sourceforge.net/p/predef/wiki/OperatingSystems/)，但没有定义列出的宏 _WIN32_WCE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:41:57.877

您应该正确定义项目和构建目标，以便从 Windows CE 平台 SDK 中提取所需的宏和标头，否则如果使用裸 x86 桌面构建目标进行构建，它将无法工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:03:39.483

这是 SmartDevice C++ 还是 C# 项目？

_WIN32_WCE 不是宏，而是您可以在 /D _WIN32_WCE 等 C/C++ 编译器选项中看到的定义。

您也可以使用自己的#defines。例如在 C# 代码的顶部，然后在代码文件中使用 #ifdef/#else/'endif。但是使用编译选项将使定义对所有代码文件可见。

如果您的意图是为 Win32（桌面）和 WCE 提供相同的代码文件，那么您会遇到 Visual Studio IDE 的问题，因为它不支持此功能，就像 make/cmake 和 makefiles 那样。必须有不同的编译器才能启动等。

对于 C# 项目，没有不同的编译器，但要引用不同的程序集等。可能您应该寻找使用交叉编译器的另一种方法。

您可以在 C# 中使用 #ifdef 共享一些相同的代码文件，我已经为 iTextSharpCF 做过。

# php - Codeigniter 致命错误：在非对象上调用成员函数 query()

> ID：12931555
> 
> 赞同：5
> 
> 时间：2012-10-17T09:49:14.207
> 
> 标签：php, database, codeigniter, fatal-error

现在我正在学习 Codeigniter。我有更多的数据库，所以这次我选择了 Anketa 一个。为什么是错误：

```
**Fatal error: Call to a member function query() on a non-object in /var/www/domains/svastara/application/controllers/anketa.php on line 12** ??? 
```

我查了一下，用户和传入数据库都可以，数据库在conf中加载，并破解了表名。那么还有什么呢？

```
$this->db = $this->load->database('anketa');

        $q = $this->db->query("SELECT * FROM anketaip");

        if($q->num_rows()>0){
        foreach ($q->result() as $row)
        {
            $data[] = $row;
        }

        }return $data;

        $this->load->view('anketa_nova', $data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:02:51.690

在您将第二个参数传递为 TRUE 之前，下面的行不会返回您的数据库对象

改变：

```
$this->db = $this->load->database('anketa'); 
```

到

```
$newdb = $this->load->database('anketa',TRUE);

$q = $newdb->query("SELECT * FROM anketaip"); 
```

参考链接：[http ://codeigniter.com/user_guide/database/connecting.html](http://codeigniter.com/user_guide/database/connecting.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T11:46:47.780

你不必这样做

```
$this->db = $this->load->database('anketa'); 
```

你可以简单地这样做

```
$this->load->database('anketa');

$this->db->query('blah blah'); 
```

还要确保数据库存在并且您有权访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:03:42.213

可能您需要加载数据库库，请检查您正在加载数据库库的 autoload.php

```
$autoload['libraries'] = array('database'); 
```

或者在你的控制器中加载库

```
$this->load->library('database'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T10:14:56.920

嗨丹妮拉，

我认为这个资源链接可以帮助你。因为当您一次使用多个数据库时，您需要遵循 GDB 在他的帖子中解释的语法。但是您说无法访问数据库，这意味着它无法检测到配置文件夹中的数据库，php。因此，将该文件链接从外部放在您的 php 文件中。然后它可能会起作用。

[http://codeigniter.com/forums/viewthread/191673/](http://codeigniter.com/forums/viewthread/191673/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-14T10:39:13.217

这就是问题所在。我设置`$db['default']['autoinit'] = TRUE` 并且它起作用了。

# android - Overlay.draw() 多次调用

> ID：12931564
> 
> 赞同：3
> 
> 时间：2012-10-17T09:49:38.183
> 
> 标签：android, maps, overlay

我对Android 地图`draw()`中类的方法有疑问。`Overlay`

当我移动地图时，方法`draw()`会被调用几次（从 4 到 13）。这对我来说是个问题，因为这种方法必须用 70000+ 点重新绘制我的路线，而且这是很多资源。

我找不到这个问题的描述，但是当我使用任何来源的代码示例时，我遇到了同样的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T14:23:26.333

这是正常行为。当您移动地图时，您希望它能够平稳移动并实现任何地图移动都以较小的移动步长滑动。

为了一致性起见，`draw()`每个小步移动都会调用叠加层上的方法，因此您可以重新定位叠加层项目以遵循每个操作系统此步骤。

您可以使用以下方法对其进行改进：

**改进1**

对于每个小步骤，`onDraw`调用两次。一个`shadow`参数等于`true`，一个等于`false`。如果您不绘制阴影，您可以忽略其中一个调用，从而将开销减少 2，使用以下内容作为第一行`onDraw()`：

```
if(shadow) return; 
```

**改进 2**

优化您绘制路线的方式。如果您正在使用`canvas.drawLine()`，您可以使用`canvas.drawPath()`. 您只需用您的路线创建一次路径（针对特定的缩放级别），当地图移动时，您只需偏移路径，无需重新创建它。

**改进3**

您甚至可以进一步优化路径，仅添加与前一个像素的距离大于特定值（即 2 个像素）的点，从而减少路径中的点总数，而不会造成任何明显的质量损失。

我正在使用上面的方法和几千点（大约 20.000）的路线，并且路线在中程设备中平稳移动。

如果您需要上述任何一点的更多详细信息，请告诉我。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:13:50.523

我怀疑你用

```
boolean draw(android.graphics.Canvas canvas, MapView mapView, boolean shadow, long when) 
```

并不是

```
void draw(android.graphics.Canvas canvas, MapView mapView, boolean shadow) 
```

第一个用于绘制动画，因此被多次调用。

参考：[在我的 android 地图叠加层中不断调用 draw](https://stackoverflow.com/questions/2792263/draw-is-being-constantly-called-in-my-android-map-overlay)

# java - 读取驻留在从另一个 jar 文件调用的 jar 中的文件

> ID：12931565
> 
> 赞同：3
> 
> 时间：2012-10-17T09:49:39.327
> 
> 标签：java, xml, file, jar, classloader

我有两个 jar 文件（比如说 jar1 和 jar2）。jar2 中有一个 xml 文件。我想读取 xml 文件。我用了

```
public void readXmlFile(){
InputStream resourceAsStream = MainFile.class.getResourceAsStream("/test.xml");
} 
```

但是现在我正在使用 jar1 中的一个类调用这个函数

```
File file = new File(jar2);
URL url = file.toURL();
URL[] urls = new URL[] { url };
ClassLoader cl = new URLClassLoader(urls);
Class<?> compositeClass = cl.loadClass(XmlFileReader);
Method declaredMethod = compositeClass.getDeclaredMethod("readXmlFile");
Object newInstance = compositeClass.newInstance();
declaredMethod.invoke(newInstance); 
```

现在我收到 FileNotFoundException，因为在 jar1 而不是在 jar2 中搜索 xml 文件，我不知道为什么会这样。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:43:19.943

我找到的唯一解决方案是在我的 jar1 中使用 System.setProperty(key, value) 设置系统属性作为包含我的两个 jar 的文件夹的路径。然后我在我的 jar2 中读回系统属性，然后像这样修改我的 readXml 方法

```
public void readXmlFile(){ 
JarFile jarFile = new JarFile(pathToJar2);
JarEntry entry = jarFile.getJarEntry("/test.xml");
InputStream inputStream = jarFile.getInputStream(entry);} 
```

# python - matplotlib 中的绿色到红色颜色图，以数据的中位数为中心

> ID：12931569
> 
> 赞同：5
> 
> 时间：2012-10-17T09:49:56.453
> 
> 标签：python, numpy, matplotlib, heatmap

在我的应用程序中，我尽可能从 R 过渡到原生 Python（scipy + matplotlib），最大的任务之一是将 R 热图转换为 matplotlib 热图。[这篇文章](http://code.activestate.com/recipes/578175-hierarchical-clustering-heatmap-python/)指导我进行移植。虽然大部分都没有痛苦，但我仍然不相信色彩图。

在展示代码之前，先解释一下：在 R 代码中，我定义了“breaks”，即从最低值到 10 的固定点数，理想情况下以数据的中值为中心。它的等价物是`numpy.linspace`：

```
# Matrix is a DataFrame object from pandas
import numpy as np

data_min = min(matrix.min(skipna=True))
data_max = max(matrix.max(skipna=True))
median_value = np.median(matrix.median(skipna=True))

range_min = np.linspace(0, median_value, 50)
range_max = np.linspace(median_value, data_max, 50)
breaks = np.concatenate((range_min, range_max)) 
```

这给了我们 100 分用于着色。但是，我不确定如何在 Python 中做同样的事情。目前我有：

```
def red_black_green():
    cdict = {
       'red': ((0.0, 0.0, 0.0),
               (0.5, 0.0, 0.0),
               (1.0, 1.0, 1.0)),
       'blue': ((0.0, 0.0, 0.0),
                (1.0, 0.0, 0.0)),
       'green': ((0.0, 0.0, 1.0),
                 (0.5, 0.0, 0.0),
                 (1.0, 0.0, 0.0))
       }

    my_cmap = mpl.colors.LinearSegmentedColormap(
        'my_colormap', cdict, 100)

    return my_cmap 
```

再往下我做：

```
# Note: vmin and vmax are the maximum and the minimum of the data

# Adjust the max and min to scale these colors
if vmin > 0:
    norm = mpl.colors.Normalize(vmin=0, vmax=vmax / 1.08)
else:
    norm = mpl.colors.Normalize(vmin / 2, vmax / 2) 
```

这些数字完全是经验性的，这就是为什么我想把它改成更强大的东西。如何根据中位数对颜色图进行归一化，或者我是否需要归一化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:54:26.643

默认情况下，matplotlib 将规范化颜色图，以便最大颜色图值将是数据的最大值。对于最少的数据也是如此。这意味着颜色图的中值（中间值）将与数据的插值中值对齐（如果您没有恰好位于中值的数据点，则进行插值）。

这是一个例子：

```
from numpy.random import rand
import matplotlib.pyplot as plt
import matplotlib.colors as mcolors

cdict = {'red':   ((0.0, 0.0, 0.0),
                   (0.5, 0.0, 0.0),
                   (1.0, 1.0, 1.0)),
         'blue':  ((0.0, 0.0, 0.0),
                   (1.0, 0.0, 0.0)),
         'green': ((0.0, 0.0, 1.0),
                   (0.5, 0.0, 0.0),
                   (1.0, 0.0, 0.0))}

cmap = mcolors.LinearSegmentedColormap(
'my_colormap', cdict, 100)

ax = plt.subplot(111)
im = ax.imshow(2*rand(20, 20) + 1.5, cmap=cmap)
plt.colorbar(im)
plt.show() 
```

注意颜色条中间的值为 2.5。这是数据范围的中位数：(min + max) / 2 = (1.5+3.5) / 2 = 2.5。

希望这可以帮助。

# c# - 对于一些无效请求，Session 对象变为 null

> ID：12931572
> 
> 赞同：1
> 
> 时间：2012-10-17T09:50:07.897
> 
> 标签：c#, url, session, request

我有一个混合（使用 MVC 和经典 ASP 页面）ASP（C#）网络应用程序，需要为 MVC 和遗留代码实现常见的错误处理；也就是说，我必须检测无效的 URL 并将无效请求重新路由到主页或登录页面（取决于用户是否登录）。

我在“Application_Error”中添加了错误处理代码（参见下面的代码）。

问题如下：登录用户 ID 保存在 Session 对象中，对于某些无效 URL，会话对象变为 null：“会话状态在此上下文中不可用”

**例如：**

*对于以下 URL，存在 Session 对象：*

```
 1\. http://myserver:49589/test/home/index
 2\. http://myserver:49589/test/home/in
 3\. http://myserver:49589/test/ho 
```

*但对于以下 URL，会话对象为空：*

```
 4\. http://myserver:49589/te 
```

所以，问题是当我在请求中拼错文件夹名称时，为什么会话对象变为空，以及如何解决这个问题。

**路由图如下：**

```
context.MapRoute(
    "default",
    "test/{controller}/{action}/{id}",
    new { action = "Index", id = UrlParameter.Optional }
);

protected void Application_Error(object sender, EventArgs e)
{
    Exception exception = Server.GetLastError();
    Response.Clear();

    HttpException httpException = exception as HttpException;
    if (httpException != null) // Http Exception
    {
        switch (httpException.GetHttpCode())
        {
            case 400: // Bad Request
            case 404: // Page Not Found
            case 500: // Internal Server Error
                {
                    // Clear the error on server.
                    Server.ClearError();

                    ServerConfiguration scfg = ServerConfiguration.Instance;
                    if (ConnxtGen.App.AppUtility.GetCurrentUserID() != -1)
                    {
                        Response.RedirectToRoute("Unity_default", new { controller = "Home", action = "Index" });
                    }
                    else
                    {
                        Response.Redirect(scfg.PagePath + "/login/login.aspx", false);
                    }
                    break;
                }
            default:
                {
                    break;
                }
        }
    }
    // Avoid IIS7 getting in the middle
    Response.TrySkipIisCustomErrors = true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:03:54.977

您应该了解的一件事是 Session 变量仅在 HttpApplication.AcquireRequestState 事件发生后才可用。

在您的问题中，您想在会话中获取一些信息的那一刻在 Asp.Net 页面生命周期的过程中还为时过早。

我发现这篇文章肯定会更好地解释会话对象何时可用：

[Asp.net 如果当前会话为空怎么办？](https://stackoverflow.com/questions/1382791/asp-net-what-to-do-if-current-session-is-null)

这是一篇很棒的文章，更详细地解释了 Asp.Net 页面生命周期的整个内部流程：

[ASP.NET 应用程序和页面生命周期](http://www.codeproject.com/Articles/73728/ASP-NET-Application-and-Page-Life-Cycle)

# ruby - 使用参数哈希的内容手动实例化设计用户模型

> ID：12931582
> 
> 赞同：0
> 
> 时间：2012-10-17T09:50:47.080
> 
> 标签：ruby, ruby-on-rails-3, devise

我正在失去理智试图弄清楚这一点：

有一个注册模块可以避开主设计注册控制器，我必须使用 User.new(...) 手动实例化 Devise 生成的用户模型。我正在使用 form_tag 提交 User.new() 所需的所有必要参数。这是我的代码的截断版本：

```
def registration_three

  @user = User.new(:email => params[:email], :password => params[:password], :password_confirmation => params[:password_confirmation])
  @user.save

  @user = User.new(:email => 'patlopez@yahoo.com', :password => 'qwertyui', :password_confirmation => 'qwertyui')
  @user.save

end 
```

第二个 @user.save 有效，但第一个无效。根据标准输出中的打印语句，params[:email]、params[:password] 和 params[:password_confirmation] 肯定存在。

有人有想法么？

编辑：所以我尝试将第二个 User.new(...) 中的所有单引号字符串更改为双引号字符串，例如存储在 params 哈希中的字符串...并且第二个实例化也失败了。所以我相当确定这个问题涉及双引号和单引号字符串。有人知道如何将双引号字符串转换为单引号字符串吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:26:46.447

首先将参数存储在变量中，然后在查询中使用它们以避免引用错误

# weblogic - 在 WebLogic 11g SAML2 身份提供者中配置规范化算法

> ID：12931585
> 
> 赞同：2
> 
> 时间：2012-10-17T09:50:51.703
> 
> 标签：weblogic, single-sign-on, saml, weblogic11g, saml-2.0

我正在使用 Microsoft WIF SAML2 协议扩展实现 .NET SAML2 服务提供程序。我们合作伙伴的身份提供者使用[http://www.w3.org/2001/10/xml-exc-c14n#WithComments](http://www.w3.org/2001/10/xml-exc-c14n#WithComments)规范化算法签署他们的回复。原来微软的 SAML2 协议实现只支持[http://www.w3.org/2001/10/xml-exc-c14n#](http://www.w3.org/2001/10/xml-exc-c14n#)。我们的合作伙伴正在使用 WebLogic 11g。有没有办法配置 WebLogic 的规范化算法？

# vb.net - 如何将值传递给当前活动表单

> ID：12931588
> 
> 赞同：0
> 
> 时间：2012-10-17T09:50:59.550
> 
> 标签：vb.net

使用 VB.Net

我的主表单名称为 form1，弹出表单名称为 form2

表格1

`tab button`- 用于在运行时创建 form1 的多个副本...

在运行时代码创建多个 from1

表格1代码

```
Dim mEntryForm As form1
        mEntryForm = New form1
        mEntryForm.Show() 
```

上面的代码在运行时创建了 form1 的相同副本。

现在我想将弹出表单中的值传递给当前的活动表单

将值从弹出表单 (form2) 发送到 form1 的代码

form2code

```
form1.textbox1.text = "100" 
```

上面的代码将使用`form1 textbox`，而不是活动形式 ( `mentryform`)

如何解决这个问题呢。

需要vb.net代码帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:18:22.587

尽管我完全同意您对问题的评论，但我会尽力为您提供解决方案

将属性添加到您的 Form2 名称 smtng，如 ActiveForm1 as form1

现在因为我还没有完全理解你的概念：

-> 如果 Form2 是 ShowDialog 表单，那么您不能更改活动的 form1。您需要设置属性 ActiveForm1

```
 dim frm2 as new form2
 frm2.ActiveForm1=me
 frm2.ShowDialog 
```

-> 如果 Form2 不是 ShowDialog，这意味着您可以更改活动的 form1，那么您需要在激活 form1 时添加这行代码

```
frm2.ActiveForm1=me 
```

现在在form2中：

```
 me.ActiveForm1.textbox1.text = "100" 
```

我希望我对你有所帮助。

# sql - Select Top(n) 和 Delete Top(n) 一样吗？

> ID：12931590
> 
> 赞同：4
> 
> 时间：2012-10-17T09:51:03.450
> 
> 标签：sql, sql-server-2005

如果使用 select 语句：

```
select top (18) * from pippo; 
```

我使用删除语句：

```
delete top (18) from pippo; 
```

我想知道这 18 个选中和删除的行是否相同。
有什么帮助吗？

接受答案后编辑：

我在这里找到了以下解决方案：[Delete the 'first' record from a table in SQL Server, without a WHERE condition](https://stackoverflow.com/questions/733668/delete-the-first-record-from-a-table-in-sql-server-without-a-where-condition)

```
WITH  q AS
        (
        SELECT TOP 18 *
        FROM    pippo
        ORDER BY FIELD1 ASC /* You may want to add ORDER BY here */
        )
DELETE
FROM    q 
```

使用此解决方案，我按 FIELD1 对所有“pippo”表进行排序，然后删除前 18 行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T09:52:22.473

如果没有 order by 子句，就不能保证排序，所以不，不能保证它们是相同的。

# objective-c - NRGridView 不会显示来自我的核心数据数据库的数据

> ID：12931591
> 
> 赞同：2
> 
> 时间：2012-10-17T09:51:07.327
> 
> 标签：objective-c, ios, ipad, core-data, gridview

我正在为当地的足球俱乐部构建一个应用程序。我想在网格中显示所有玩家的姓名和图片。因此我使用的是 NRGridview。但它不会加载我的数据。我有一个包含所有玩家信息的 NSArray。在这里，您可以看到生成此数组的方法。

```
 - (NSArray *)getTeam
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Team"];
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"sortOrder" ascending:YES];
        NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [request setSortDescriptors:sortDescriptors];

    NSError *error = nil;
    NSArray *mutableFetchResults = [self.genkDatabase.managedObjectContext executeFetchRequest:request error:&error];
    NSLog(@"first error log %@", [error localizedDescription]);

    if (mutableFetchResults == nil) {
        NSLog(@"second error log %@", [error localizedDescription]);
    }else if ([mutableFetchResults count] == 0){
        NSLog(@"geen resultaten voor team");
    }else{
        NSLog(@"team names: %@",[mutableFetchResults valueForKey:@"name"]);
        return mutableFetchResults;
    }
    return mutableFetchResults;

} 
```

这就是我在表格视图中所做的。

```
- (NRGridViewCell*)gridView:(NRGridView *)gridView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *MyCellIdentifier = @"MyCellIdentifier";

    NRGridViewCell* cell = [gridView dequeueReusableCellWithIdentifier:MyCellIdentifier];

    if(cell == nil){
        cell = [[NRGridViewCell alloc] initWithReuseIdentifier:MyCellIdentifier];

        [[cell textLabel] setFont:[UIFont boldSystemFontOfSize:11.]];
        [[cell detailedTextLabel] setFont:[UIFont systemFontOfSize:11.]];

    }

    NSLog(@"players array %@",players);
    for (int i = 0; i <= [players count]; i++) {

       // NSData *imgData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[[players objectAtIndex:i]valueForKey:@"image"]]];
       // UIImage *image = [[UIImage alloc]initWithData:imgData];
        //cell.imageView.image = image;
        cell.textLabel.text = [[players objectAtIndex:i]valueForKey:@"name"];
        cell.detailedTextLabel.text = [[players objectAtIndex:i]valueForKey:@"position"];
        return cell;
    }
    return cell;
} 
```

NSLog 总是给出（null）。我现在的问题是，我应该把代码放在哪里“ `NSArray *players = [self getTeam]`。这样我的表格视图就会填满数据？

**编辑**

它确实给了我正确数量的部分和 numberOfRowsInsection。对于 numbersOfRowsIn 部分，我创建了 4 个方法。1 种方法让守门员全部离开，后卫 1 次，边锋 1 次，攻击者 1 次。然后在我的 tableview 方法中，我做了以下事情。

```
- (NSInteger)gridView:(NRGridView *)gridView numberOfItemsInSection:(NSInteger)section
{
    if(section == 0){
        return [[self getDoelmannen]count];
    }else if (section == 1){
        return [[self getVerdedigers]count];
    }else if (section == 2){
        return [[self getMiddenvelders]count];
    }else{
        return [[self getAanvallers]count];
    }
    return [[self getAanvallers]count];
} 
```

这行得通。但是我的手机仍然有问题。

**EDIT2** 好的，我认为我的问题在于填充我的玩家数组。我在 viewDidLoad 中执行以下操作

```
-(void)viewDidLoad{
    _players = [self getTeam];
    NSLog(@"players array: %@",_players);
} 
```

这给出了以下日志。

```
2012-10-17 12:11:22.099 RacingGenk[63122:c07] nil
2012-10-17 12:11:22.099 RacingGenk[63122:c07] players array: (null) 
```

这是我的 getTeam 代码

```
- (NSArray *)getTeam
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Team"];
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"sortOrder" ascending:YES];
        NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [request setSortDescriptors:sortDescriptors];

    NSError *error = nil;
    NSArray *mutableFetchResults = [self.genkDatabase.managedObjectContext executeFetchRequest:request error:&error];
    if (mutableFetchResults == nil) {
        NSLog(@"nil");
    }else if ([mutableFetchResults count] == 0){
        NSLog(@"geen resultaten voor team");
    }else{
        NSLog(@"team names: %@",[mutableFetchResults valueForKey:@"name"]);
        return mutableFetchResults;
    }
    return mutableFetchResults;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:57:27.237

看起来`players`没有初始化。您可以将`[self getTeam]`调用放入`viewDidLoad`方法中并创建`players`属性。

如果`NRGridView`是类似`UITableView`的，可能还有其他方法需要重载。

例如，`UITableView`有`tableView:numberOrRowsInSection:`. 未能从此方法返回 > 0 值将导致不显示任何内容。或者`numberOfSectionsInTableView:`，它返回部分的数量等等。

检查您正在使用的控件的文档。

更新：

由于您`executeFetchRequest:error:`失败了，因此您应该检查是否有错误消息，而不仅仅是打印出来`(nil)`：

```
NSLog(@"%@", [error localizedDescription]); 
```

# authentication - 验证多个 symfony2 防火墙

> ID：12931593
> 
> 赞同：1
> 
> 时间：2012-10-17T09:51:08.730
> 
> 标签：authentication, symfony, firewall

我正在尝试对站点上的一个部分的 in_memory 提供程序和所有其他页面的 sso 提供程序的用户进行身份验证，因此我尝试了以下操作：

```
role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

providers:
    sso:
        id: sso.security.user.provider
    fos_twitter:
        id: fos_twitter.auth
    in_memory:
        users:
            ryan:  { password: ryanpass, roles: 'ROLE_CANVAS_ADMIN' }
            admin: { password: kitten, roles: 'ROLE_CANVAS_ADMIN' }

firewalls:
    main:
        pattern: ^/canvas
        provider: in_memory
    secured_area:
        pattern: ^/
        form_login:
            login_path:  /signin
            check_path:  /login_check
        anonymous: true
        sso: true
        fos_twitter: false
access_control:
- { path: ^/canvas, roles: [ROLE_CANVAS_ADMIN] } 
```

这不起作用，因为它总是进入 /signin 登录路径，并且使用 sso 提供程序工作。我已经尝试了以下实现： [使用一个登录表单验证多个 symfony2 防火墙](https://stackoverflow.com/questions/9075041/authenticate-multiple-symfony2-firewalls-with-one-login-form)， [http](http://symfony.com/doc/2.0/cookbook/security/custom_authentication_provider.html) ://symfony.com/doc/2.0/cookbook/security/custom_authentication_provider.html 和这个：[http ://symfony.com/doc/current/ book/security.html#using-multiple-user-providers](http://symfony.com/doc/current/book/security.html#using-multiple-user-providers) 它们都不适合我。

有人可以帮忙吗？

谢谢..

# r - knitr 报告的良好本地化策略是什么？

> ID：12931594
> 
> 赞同：14
> 
> 时间：2012-10-17T09:51:11.987
> 
> 标签：r, translation, knitr

我想基于`ggplot2`和创建聚合报告`knitr`。不幸的是，我想用四种语言来做，即英语、德语、法语、意大利语。到目前为止，绘图和图形的标签基本上来自数据本身，即它们是从`data.frame headers`or生成的`factor levels`。

鉴于我有 100 多个不同的分类变量，`levels`我想知道什么是有效的翻译策略。有其他语言的 .po 文件和[可移植对象编辑器](http://www.poedit.net)，甚至适用于 R 及其消息本身。鉴于语言的数量可能会增加，因此更有可能需要其他人参与翻译。显然，这些人通常不是 R 用户，甚至可能不喜欢文本编辑器。

有没有人遇到过同样的问题并制定了一些好的策略或经验来分享？你能想象像[xliff](http://en.wikipedia.org/wiki/XLIFF)的东西吗？

编辑：我同时看到[了这个线程](https://stackoverflow.com/questions/10765057/translation-of-r-script-using-gettext)，但我相信 gettext 只适用于包。我想知道这篇文章中的域是否真的有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:13:24.560

我自己没有直接经验，但想知道谷歌电子表格是否可以提供与翻译合作的良好工作流程，例如然后使用 RCurl 解决方案进入 R，例如此处的答案：

[read.csv 无法从谷歌文档中读取 CSV 文件](https://stackoverflow.com/questions/5834821/read-csv-fails-to-read-a-csv-file-from-google-docs)

我使用这种技术来分析调查数据。

# string-literals - @ 在文件名中使用 Maxscript

> ID：12931595
> 
> 赞同：1
> 
> 时间：2012-10-17T09:51:13.047
> 
> 标签：string-literals, maxscript

使用 Maxsctipt：导出文件以下代码可以正常工作：

```
caption:"Caption" \
types:"text(*.txt)|*.txt|All|*.*|" \
filename:(sysinfo.currentdir + @"\some_text.txt") 
```

我想知道@符号有什么意义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T08:57:29.173

从 maxscript 帮助文件中：

[http://docs.autodesk.com/3DSMAX/15/ENU/MAXScript-Help/index.html?url=files/GUID-7F17449E-C377-445C-AC15-CD3BA88A975B.htm,topicNumber=d30e141051](http://docs.autodesk.com/3DSMAX/15/ENU/MAXScript-Help/index.html?url=files/GUID-7F17449E-C377-445C-AC15-CD3BA88A975B.htm,topicNumber=d30e141051)

> **逐字字符串文字**
> 
> 在 3ds Max 2008 中添加到 MAXScript 的逐字字符串文字以“@”字符为前缀，即使包含反斜杠转义字符序列（如“\t”、“\n”或“\r”）也不会扩展。

如果字符串中有任何“非法”字符，则不需要转义字符串中的字符，这在处理 \ 的路径负载时特别有用

# android - 在Android中显示落入当前可见区域Google Map的叠加项目

> ID：12931596
> 
> 赞同：0
> 
> 时间：2012-10-17T09:51:18.540
> 
> 标签：android, google-maps

我有很多数据要显示在谷歌地图上，但我想要的只是将那些落入谷歌地图当前可见空间的元素。这个怎么做？提供一些有用的教程链接。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:39:28.727

请检查此链接：[https ://github.com/ketankpatel/android/tree/master/PinDropAnimation](https://github.com/ketankpatel/android/tree/master/PinDropAnimation)

它会在可见区域中放置大头针。

片段在这里：

```
private void putEventOverlay() {

        if (mapData.getZoomLevel() < 3) {
            mapData.getController().setZoom(3);

        }
        final MyLocationOverlay myLocationOverlay = new MyLocationOverlay(HomeActivity.this, mapData);
        mapData.getOverlays().add(myLocationOverlay);
        myLocationOverlay.enableMyLocation();

        GeoPoint center = mapData.getMapCenter();
        Integer latspan = mapData.getLatitudeSpan();
        Integer lonspan = mapData.getLongitudeSpan();
        Integer maxLat = center.getLatitudeE6() + (latspan / 2);
        Integer maxLon = center.getLongitudeE6() + (lonspan / 2);
        Integer minLat = center.getLatitudeE6() - (latspan / 2);
        Integer minLon = center.getLongitudeE6() - (lonspan / 2);

        double maxLatitude, minLatitude, maxLongitude, minLongitude;

        maxLatitude = maxLat / 1E6;
        minLatitude = minLat / 1E6;
        maxLongitude = maxLon / 1E6;
        minLongitude = minLon / 1E6;

        Drawable marker = getResources().getDrawable(R.drawable.marker);
        EventDetailModel tempDetailModel = null;
        ArrayList<EventDetailModel> tempDetailList = dbHelper.getMapSortedEventData(minLatitude, maxLatitude, minLongitude,maxLongitude);

        if (tempDetailList.size() != 0) {
            mapData.getOverlays().clear();
        }
        for (int i = 0; i < tempDetailList.size(); i++) {
            tempDetailModel = (EventDetailModel) tempDetailList.get(i);
            MapItemizedOverlay itemizedOverlay = new MapItemizedOverlay(marker);
            itemizedOverlay.addOverlay(HomeActivity.this, tempDetailModel);
            mapData.getOverlays().add(itemizedOverlay);
        }

        mapData.invalidate();

    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {

        if (ev.getAction() == MotionEvent.ACTION_UP) {

            putEventOverlay();
        }
        return super.dispatchTouchEvent(ev);
    } 
```

*   万迪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:07:00.213

我假设“大量数据”是指要绘制的一些标记。获取当前地图边界。在循环数据、添加标记时，使用 bounds.contains() 查看标记的位置是否可见。如果是这样，请将其添加到地图中。

# model - 是否有不允许重复数据的 Qt 内置模型？

> ID：12931598
> 
> 赞同：1
> 
> 时间：2012-10-17T09:51:26.920
> 
> 标签：model, qt4

是否有任何不允许重复条目的 Qt 模型？还是我应该继承`QStandardItemModel`并做出改变？

# vb.net - 具有管理员权限的 VB.NET 中的 Powershell

> ID：12931601
> 
> 赞同：2
> 
> 时间：2012-10-17T09:51:29.917
> 
> 标签：vb.net, powershell, administrator

我正在使用 PowerShell 命令编写一个 web 服务，我想在本地计算机和远程计算机上启动和停止服务。

在远程计算机上启动和停止服务不是问题。我使用 WmiObject 执行此操作，如下所示。

如果我想启动本地服务，它会说我没有权限。

如果我想启动本地服务，我不能将 WmiObject 与 Credentials 一起使用。

我该怎么做才能以管理员权限启动服务？

我的脚本（strScriptText）：

```
$username = "domain\administrator"
$pw = convertto-securestring "password" -asplaintext -force
$cred = new-object -typename System.Management.Automation.PSCredential -argumentlist $username, $pw
$computername = "serverAB"
if ( $computername.Contains("serverAB")){(Get-WmiObject -class Win32_Service -filter "name='AppIDSvc'").startservice().returnvalue}
else {(Get-WmiObject -class Win32_Service -ComputerName $computername -Credential $cred -filter "name='AppIDSvc'").startservice().returnvalue} 
```

VB：

```
 runspace = RunspaceFactory.CreateRunspace()
        runspace.Open()
 pipeline = runspace.CreatePipeline()

pipeline.Commands.AddScript(strScriptText)
                pipeline.Commands.Add("Out-String") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:26:05.620

您不能尝试通过 PowerShell 使用旧的 .NET 方法。

```
# Create an authentication object
$ConOptions = New-Object System.Management.ConnectionOptions
$ConOptions.Username = "dom\jpb"
$ConOptions.Password = "pwd"
$ConOptions.EnablePrivileges = $true
$ConOptions.Impersonation = "Impersonate"
$ConOptions.Authentication = "Default"

# Creation of a rmote or local process
$scope = New-Object System.Management.ManagementScope("\\dom.fr\root\cimV2", $ConOptions)
$ObjectGetOptions = New-Object System.Management.ObjectGetOptions($null, 
                                                          [System.TimeSpan]::MaxValue, $true)
$proc = New-Object System.Management.ManagementClass($scope, 
                                      "\\dom.fr\ROOT\CIMV2:Win32_Process", $ObjectGetOptions)

# Equivalent to : 
# $proc = [wmiclass]"\\.\ROOT\CIMV2:Win32_Process"
# $res = $proc.Create("cmd.exe") 
```

# android - 在android中准确有效地旋转和裁剪位图

> ID：12931603
> 
> 赞同：2
> 
> 时间：2012-10-17T09:51:40.507
> 
> 标签：android, bitmap

我正在编写一个android应用程序。通过使用它，用户可以裁剪位图图像。但我想添加更多功能，即在裁剪前旋转图像。我按照以下步骤来实现此目的。

1.  建立了一个自定义视图。
2.  初始化`BitmapDrawable()`和裁剪矩形（`Rect()`）[矩形确定在位图中复制的位置]
3.  两个函数的覆盖`onTouch(MotionEvent)`方法
    *   一个。用户可以在屏幕上移动位图
    *   湾。用户可以转换裁剪矩形
4.  覆盖`onDraw(Canvas)`更新屏幕的方法。此代码用于显示位图。

    ```
    bitmap_drawable.draw(canvas,_bitmap_paint); 
    ```

5.  ### 问题：1

    我不知道该怎么做的这一步是正确显示旋转的。我使用此代码在`onDraw(Canvas)`方法中旋转画布。

    ```
    canvas.rotate(_angle); 
    ```

    但它使屏幕上的所有东西（包括裁剪矩形）都旋转。

    ### 问题2

    初始化我自己的`Canvas()`对象以在其上绘制位图是一种明智的方法吗？

    ### 笔记：

    在这里，我想要的旋转非常精确到 1 度，并且是通过两指旋转手势执行的，所以性能非常重要，下面的代码（使用矩阵）很糟糕。

    ```
    Matrix mat = new Matrix();

    mat.preRotate(_degree, _one_finger_x, _one_finger_y);

    Bitmap _new_bitmap = Bitmap.createBitmap(_old_bitmap, 0, 0, bmWidth, bmHeight, mat, true); 
    ```

    因此，我认为单独初始化`Canvas()`和使用`canvas.rotate(_degree)`是非常合适的。但是，这使得控制触摸事件变得非常困难。有什么想法吗？请帮忙。

6.  ### 问题：2

    假设我现在可以将位图与所有对象分开旋转，即裁剪矩形等。这一步是裁剪位图并有效地向用户显示裁剪结果。当不包含旋转功能时，我只是复制颜色字节在旧位图上的裁剪矩形内，如下所示。

    ```
    Bitmap _new_bitmap = Bitmap.createBitmap( _old_bitmap, _cropRectx, _cropRecty, _cropRectWidth, _cropRectHeight, null); 
    ```

    但是在这里，从旋转的位图中，我如何通过交叉裁剪矩形克隆颜色字节？

    ### 问题2

    如何裁剪旋转的位图？

# cakephp - 在 CakePHP 2.2 从 $hasAndBelongsToMany 关系中获取数据

> ID：12931604
> 
> 赞同：0
> 
> 时间：2012-10-17T09:51:42.597
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

我有 3 个表： - 用户 - 帖子 - 订阅（默认情况下应该是 posts_users (nn)）

订阅表是此关系所需的 nn 表。我不想称它为“posts_users”，因为它对我的系统来说非常混乱，因为我在用户和帖子之间有更多的关系。

为了创建 hasAndBelongsToMany 关系，我这样做了：

# 帖子（模型）：

```
 public $hasAndBelongsToMany = array(
        'Subscriptions' => array(
                'className' => 'User',
                'joinTable' => 'subscriptions',
                'foreignKey' => 'post_id',
                'associationForeignKey' => 'user_id',
                'unique' => 'keepExisting',
                'conditions' => '',
                'fields' => '',
                'order' => '',
                'limit' => '',
                'offset' => '',
                'finderQuery' => '',
                'deleteQuery' => '',
                'insertQuery' => ''
        )
); 
```

# 用户（型号）：

```
 public $hasAndBelongsToMany = array(            
    'Post' => array(
        'className' => 'Post',
        'joinTable' => 'subscriptions',
        'foreignKey' => 'user_id',
        'associationForeignKey' => 'post_id',
        'unique' => 'keepExisting',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    )
); 
```

假设我想为 id 为 3 的用户查找订阅的帖子。有没有办法**找到**为用户检索订阅帖子的数据？我应该在哪个模型中进行查询？如何？？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:26:10.623

好的。最后我得到了它。

您可以从两个相关模型中的任何一个进行查询。在这种情况下**Post**或**User**。

```
$this->Post->User->find('all', array(
            'conditions' => array('User.id' => $this->Session->read('Auth.User.id')),
            'contain' => array('Subscriptions')
)); 
```

这将返回当前用户的订阅票（在订阅数组中）。

# pointers - Golang 中的指向结构体

> ID：12931605
> 
> 赞同：8
> 
> 时间：2012-10-17T09:51:46.107
> 
> 标签：pointers, go

我在实现以下代码时遇到了错误：

```
package main

import (
    "fmt" 
)

type Struct struct {
    a int
    b int
}

func Modifier(ptr *Struct, ptrInt *int) int {
    *ptr.a++
    *ptr.b++
    *ptrInt++
    return *ptr.a + *ptr.b + *ptrInt
}

func main() { 
    structure := new(Struct)
    i := 0         
    fmt.Println(Modifier(structure, &i))
} 
```

这给了我一个关于“ptr.a（类型 int）的无效间接......”的错误。还有为什么编译器不给我关于ptrInt的错误？提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T09:55:45.300

做就是了

```
func Modifier(ptr *Struct, ptrInt *int) int {
    ptr.a++
    ptr.b++
    *ptrInt++
    return ptr.a + ptr.b + *ptrInt
} 
```

`++`您实际上是在尝试应用`*(ptr.a)`并且`ptr.a`是一个 int，而不是指向 int 的指针。

您可以使用`(*ptr).a++`，但这不是必需的，因为 Go 会自动解决`ptr.a`if是一个指针，这就是您在 Go 中`ptr`没有的原因。`->`

# zend-framework2 - 在 Zend Framework 2 中将默认编码设置为 ISO

> ID：12931608
> 
> 赞同：1
> 
> 时间：2012-10-17T09:51:55.730
> 
> 标签：zend-framework2

我正在开发一个基于 ZF1 的遗留项目，它使用 ISO-8859-1 字符集。服务器的默认编码也是 ISO。新模块应使用 ZF2 实现。如何在 ZF2 中将默认编码（例如转义符等）全局设置为除 UTF-8 之外的任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:27:53.147

如果您直接在模块中使用转义符，这将是一个问题。如果您只使用视图助手，则可以选择设置编码。

每个转义视图助手（`EscapeCss`等`EscapeHtml`）都从`Zend\View\Helper\Escaper\AbstractHelper`. 这个类有一个方法`setEncoding()`。因为编码不是在所有助手实例之间共享的，所以您必须单独设置它们，但您可以在那里设置编码。

例如，您可以在引导期间设置正确的编码。假设您有您的应用程序模块：

```
<?php

namespace Application;

use Zend\Mvc\MvcEvent;

class Module
{
  public function onBootstrap(MvcEvent $e)
  {
    $app = $e->getApplication();
    $sm  = $app->getServiceManager;

    $manager  = $sm->get('ViewHelperManager');
    $plugins  = array(escapehtml', 'escapehtmlattr', 'escapejs', 'escapecss', 'escapeurl');
    $encoding = 'ISO-8859-1';

    foreach ($plugins as $name) {
      $plugin = $manager->get($name);
      $plugin->setEncoding($encoding);
    }
  }
} 
```

这应该将所有插件更正为 ISO-8859-1 编码。如果您的任何模块或任何 3rd 方模块使用转义视图助手，则将使用 ISO-8859-1 编码。

# google-maps - 我们可以在 Unity 3D 中使用谷歌地图的 API 吗？

> ID：12931613
> 
> 赞同：3
> 
> 时间：2012-10-17T09:52:13.497
> 
> 标签：google-maps, google-maps-api-3, unity3d

我想知道，我们能否在[Unity3D中使用](https://unity3d.com/)[Google Maps](https://developers.google.com/maps/)的所有API （不仅仅是静态地图，我想定位我的位置，添加很多带有窗口信息的标记，从我的位置选择行程到选定的标记.. .)

祝你有美好的一天，谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:55:59.517

我认为答案是肯定的，只要您遵守 Google 地图 API 的许可协议，就可以将 Google 地图 API 与 Unity 一起使用。

但是，如果您询问 Unity 中是否有对 Google 地图 API 的特殊支持，那么答案是否定的。但是，至少有一个第三方[资产](https://assetstore.unity.com/packages/tools/integration/google-maps-view-82542)支持 Google 地图。您可能可以使用它或其他资产来开始集成。

# json - 从 JSON 中随机选择

> ID：12931615
> 
> 赞同：1
> 
> 时间：2012-10-17T09:52:20.783
> 
> 标签：json, actionscript-3

我尝试将一些 JSON 字符串数据从 JSON 对象转换为数组。当我遍历 JSON 时，它会将 JSON 字符串分配到不同的数组单元格中，最终我从 JSON 中获取所有字符串，但每次运行程序时在数组中的顺序不同。

```
 for (var i:String in data)
    {
       // get panel tabs and players for each tab
       for (var f:String in data[i].tabs)
        {
          tabsNames.push(f);
            }
    } 
```

有时 tabsNames = [ 1,2,3] 有时 tabsNames = [ 2,3,1] 等等'

我不能使用排序，因为我不知道我将从 JSON 中获得的信息的类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:31:27.160

*JSON 对象*是一组**无序**的名称/值对：

```
"obj" : {"propA" : "valueA", "propB":"valueB"} 
```

*JSON 数组*是值的有序**集合**：

```
"arr" : ["propA":"valueA", "propB":"valueB"] 
```

如果您的数据将作为列表存储在 JSON 对象中，则您始终以相同的顺序获取数据。

# javascript - 使用 js 和正则表达式检查文本框中的无效字符

> ID：12931617
> 
> 赞同：3
> 
> 时间：2012-10-17T09:52:21.707
> 
> 标签：javascript, html, regex

我很难弄清楚 RegExp 是如何工作的。

我需要将一些 ASP 代码重写为 html 和 js，我在这部分遇到了一个障碍：

```
<asp:RegularExpressionValidator runat="server" id="RegExpValidator" controltovalidate="FileName" Display="Dynamic" ValidationExpression="[^#%&*:<>?/{|}]+"> 
```

现在，我要做的是创建一个输入文本框，只要它的内容发生变化，它就会运行一个 js 函数。

```
<input type="text" id="fileNameTextBox" class="ms-input" size="35" maxlength="123" onchange="regexValidator(this);"/>

function regexValidator(control) {
            var val = $(control).val();
            if(val == undefined || val == '') {

                $(control).attr("class", "invalid");
            } 
            else { 
            // Regex stuff goes in here
            }
        } 
```

现在，对于我的生活，我无法弄清楚如何构造正则表达式。ValidationExpression 字段我假设检查无效字符，尽管它似乎不是一个正确构造的正则表达式，我不知道如何将它写成一个正确的与 js 一起使用。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:02:42.533

如果您希望正则表达式检查字段中的无效字符，您可以使用它。

`^.*?(?=[\^#%&$\*:<>\?/\{\|\}]).*$`如果至少有一个无效字符，这将为您提供匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T10:00:59.450

你快到了。现在您只需要确保您的字符串**仅**包含有效字符。通过为字符串的开头和结尾添加锚点来做到这一点，从而确保重复的序列覆盖整个字符串：

```
ValidationExpression="^[^#%&*:<>?/{|}]+$" 
```

**编辑：**我刚刚意识到您可能还想知道如何从字符串创建正则表达式。您可以简单地将字符串传递给正则表达式构造函数：

```
new RegExp(validationExpressionGoesHere); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T10:03:02.597

`[^#%&*:<>?/{|}]+`对我来说看起来像是一个有效的表达式（尽管通常正则表达式用正斜杠括起来）。它基本上是检查文件名是否包含方括号内的任何非法字符（除了`^`表示否定的插入符号）。

```
function regexValidator(control) {
        var val = $(control).val();
        if(val == undefined || val == '') {

            $(control).attr("class", "invalid");
        } 
        else if(val.match(/[^#%&*:<>?/{|}]+/)) {
            // Valid
        }
        else {
            // Invalid
        }
    } 
```

# c# - MvvmCross vnext：将插件与 monodroid 合并

> ID：12931618
> 
> 赞同：5
> 
> 时间：2012-10-17T09:52:26.297
> 
> 标签：c#, windows-phone-7, xamarin.ios, xamarin.android, mvvmcross

我正在尝试将插件库项目合并为一个（例如，Location + PhoneCallTask​​）。它与 wp7 完美配合，但我得到了一个未处理的 monodroid 异常：

> 无法加载文件或程序集“Cirrious.MvvmCross.Plugins.Location.Droid.dll”

当然，位置插件是在合并库“Cirrious.MvvmCross.Plugins.Droid.dll”中引用的。

有没有办法指向合并的库路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T11:39:17.083

更全面地考虑了您的问题...

我仍然不完全确定什么是合并插件，但我认为您看到的问题必须归结为 MvvmCross-MonoDroid 使用文件约定加载插件而所有其他平台强制用户提供显式工厂方法的方式对于每个插件。

这种差异的原因是因为文件约定是（IMO）这样做的最佳方式......但是所有其他平台都将安全和/或编译问题置于意味着必须使用替代机制的方式......

对您来说最简单的事情可能是切换您的 MonoDroid 应用程序的设置以使用加载器约定。

去做这个：

*   在 Setup.cs 中覆盖`CreatePluginManager()`为：

    ```
    protected override IMvxPluginManager CreatePluginManager()
    {
        var toReturn = new MvxLoaderBasedPluginManager();
        var registry = new MvxLoaderPluginRegistry(".Droid", toReturn.Loaders);
        AddPluginsLoaders(registry);
        return toReturn;
    } 
    ```

然后提供一个`AddPluginsLoaders()`实现，如：

```
 protected virtual void AddPluginsLoaders(Cirrious.MvvmCross.Platform.MvxLoaderPluginRegistry loaders)
    {
        loaders.AddConventionalPlugin<Cirrious.MvvmCross.Plugins.Visibility.Droid.Plugin>();
        loaders.AddConventionalPlugin<Cirrious.MvvmCross.Plugins.Location.Droid.Plugin>();
        loaders.AddConventionalPlugin<Cirrious.MvvmCross.Plugins.Phone.Droid.Plugin>();
        loaders.AddConventionalPlugin<AlphaPage.MvvmCross.Plugins.Mega.Droid.Plugin>();
        // etc
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:54:31.783

简短的回答：

我猜你需要：

*   检查您的命名空间和程序集名称是否都具有相同的约定
*   检查您是否在 UI.Droid 项目中引用了核心插件程序集和正确的插件实现

* * *

更长的答案（基于我已经拥有的一些笔记 - 将很快发布）：

如果您要构建一个全新的插件，那么您将：

## 1.创建中央共享插件

这将是可移植类库 - 比如说`AlphaPage.MvvmCross.Plugins.Mega`

在该中央共享 PCL 中，您可以放置​​任何可用的可移植代码 - 通常这可能只是一些服务接口定义 - 例如

```
public interface IAlphaService { ... } 
```

和

```
public interface IPageService { ... } 
```

然后，您将为该插件添加 PluginManager，它只会添加以下样板：

```
public class PluginLoader
    : IMvxPluginLoader
    , IMvxServiceConsumer<IMvxPluginManager>
{
    public static readonly PluginLoader Instance = new PluginLoader();

    #region Implementation of IMvxPluginLoader

    public void EnsureLoaded()
    {
        var manager = this.GetService<IMvxPluginManager>();
        manager.EnsureLoaded<PluginLoader>();
    }

    #endregion
} 
```

## 2.创建具体的插件实现

对于每个平台，您将实现插件 - 例如，您可以实现`AlphaPage.MvvmCross.Plugins.Mega.WindowsPhone`和 `AlphaPage.MvvmCross.Plugins.Mega.Droid`

在其中的每一个中，您将实现提供服务的本机类：

```
public class MyAlphaService : IAlphaService { ... } 
```

和

```
public class MyPageService : IPageService { ... } 
```

最后，每个插件都将提供样板插件实现：

```
public class Plugin
    : IMvxPlugin
    , IMvxServiceProducer
{
    #region Implementation of IMvxPlugin

    public void Load()
    {
        // alpha registered as a singleton
        this.RegisterServiceInstance<IAlphaService>(new MyAlphaService());
        // page registered as a type
        this.RegisterServiceType<IPageService, MyPageService>();
    }

    #endregion
} 
```

## 3.插件的实例化

每个 UI 客户端都必须初始化插件。

这是通过终端 UI 客户端添加库引用来完成的：

*   共享核心插件
*   适当的插件实现

### 3.1 WinRT、WindowsPhone 和 MonoTouch

然后，对于*WinRT、WindowsPhone 和 MonoTouch*客户端，您还需要在 setup.cs 中提供一个 Loader 访问器 - 例如：

```
 protected override void AddPluginsLoaders(Cirrious.MvvmCross.Platform.MvxLoaderPluginRegistry loaders)
    {
        loaders.AddConventionalPlugin<AlphaPage.MvvmCross.Plugins.Mega.WindowsPhone.Plugin>();
        base.AddPluginsLoaders(loaders);
    } 
```

请注意，此处使用了约定 - 因此 AlphaPage.MvvmCross.Plugins.Mega.WindowsPhone.Plugin 为 AlphaPage.MvvmCross.Plugins.Mega.PluginLoader 实现 WindowsPhone 插件很重要

### 3.2 单体机器人

对于*MonoDroid*客户端，您不需要添加此设置步骤 - 因为 MonoDroid 的 Assembly.Load 限制比其他平台少 - 而且 ao 可以从文件加载插件。但要使其正常工作，程序集名称匹配很重要 - 如果 PluginLoader 是，`AlphaPage.MvvmCross.Plugins.Mega.PluginLoader`那么约定将尝试从`AlphaPage.MvvmCross.Plugins.Mega.Droid.dll`

## 4\. 插件服务的使用

在此设置之后，应用程序最终应该能够通过以下方式访问插件：

*   添加对共享核心可移植库的引用
*   有时打电话`AlphaPage.MvvmCross.Plugins.Mega.PluginLoader.Instance.EnsureLoaded()`
*   `this.GetService<IAlphaService>()`然后使用或访问个别服务`this.GetService<IPageService>()`

## 5.纯便携插件

一些插件可以是“纯可移植的”

在这种情况下，他们不需要针对每个平台进行任何专业化，也不需要第 3 步。

有关这方面的示例，请参阅 Json 实现 - [https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/Plugins/Json](https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/Plugins/Json)

# c++ - 来自 Mat 图像的 OpenCV 子图像

> ID：12931621
> 
> 赞同：13
> 
> 时间：2012-10-17T09:52:34.160
> 
> 标签：c++, image, image-processing, opencv, contour

> **可能重复：**
> [了解 openCV 2.4 中的感兴趣区域](https://stackoverflow.com/questions/12705817/understanding-region-of-interest-in-opencv-2-4)

我想从图像（Mat 格式）中获取子图像（由下面的红色框包围的图像）。我该怎么做呢？

![在此处输入图像描述](../Images/aea2ae0cd5878132cef3535dcb1af82b.png)

这是我到目前为止的进展：

```
include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

using namespace std;
using namespace cv;
int main()
{
    Mat imgray, thresh;
    vector<vector<Point> >contours;
    vector<Point> cnt;
    vector<Vec4i> hierarchy;
    Point leftmost;

    Mat im = imread("igoy1.jpg");
    cvtColor(im, imgray, COLOR_BGR2GRAY);
    threshold(imgray, thresh, 127, 255, 0);
    findContours(thresh, contours, hierarchy, RETR_TREE,CHAIN_APPROX_SIMPLE);
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-17T10:07:13.420

您可以开始选择轮廓（在您的情况下，是与手相对应的轮廓）。然后，您计算此轮廓的边界矩形。最后，您从中制作一个新的矩阵标题。

```
int n=0;// Here you will need to define n differently (for instance pick the largest contour instead of the first one)
cv::Rect rect(contours[n]);
cv::Mat miniMat;
miniMat = imgray(rect); 
```

**警告：**在这种情况下，miniMat 是 imgray 的一个子区域。这意味着如果你修改了前者，你也修改了后者。用来`miniMat.copyTo(anotherMat)`避免这种情况。

我希望它有所帮助，祝你好运

# sql - 外键和主键不明确

> ID：12931622
> 
> 赞同：0
> 
> 时间：2012-10-17T09:52:35.773
> 
> 标签：sql, database-design

我现在很困惑，也许你可以帮助我更好地理解这个问题。

有两个表程序和模块，

一个程序可以有很多模块，同一个模块可以在很多程序中，

您将如何在这里识别主键和外键？因为没有唯一的单一属性，因为 program_id 可能会出现 n 次，因为同一程序中有不同的模块，并且 module_id 也会出现多次，因为它存在于许多程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:54:31.640

程序将以 a`programmeID`作为其主键

一个模块将有一个`moduleID`作为它的主键

然后会有第三个表 - 比如说`ModuleProgrammes`- 它有`moduleId`和`programmeID`作为外键。

ModuleProgrammes 可能有`moduleid`and`programmeid`作为主键，也可能有 a`moduleprogrammeid`作为主键。

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Junction_table](http://en.wikipedia.org/wiki/Junction_table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:29:34.337

只是为了更好地设计数据库..只需使用另一个表并在新表中提供 Programs 表和 Modules 表的每个主键的引用作为外键，这将减少数据冗余并绑定表..

# android - SQLite 正确架构与性能

> ID：12931624
> 
> 赞同：1
> 
> 时间：2012-10-17T09:52:40.960
> 
> 标签：android, sqlite, database-design

我想知道性能明智的创建和调用它自己会花费任何性能的表吗？

我有一张小桌子，大约有六列和两行。问题是，从架构的角度来看，该表应该是三个表，其中两到三列通过键相关联。

我的困境是正确的架构与性能，但我对正确的架构会占用的性能没有真正的理解。

PS 数据库中的数据只会被检索一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:56:18.597

在这种情况下，我会选择设计而不是性能。如果您的数据库方案以某种方式增长，而您只考虑性能，那么您将遇到更多麻烦。此外，我认为您的方法之间不会有任何明显的性能差异。

记住：好的设计更利于可维护性。

# magento - Magento，网格，添加带有网站链接的列

> ID：12931626
> 
> 赞同：4
> 
> 时间：2012-10-17T09:52:46.120
> 
> 标签：magento, hyperlink, grid, magento-1.7

我正在努力在网格的自定义列上添加一个简单的网站链接。我使用[Incho 博客](http://inchoo.net/ecommerce/magento/how-to-add-custom-renderer-for-a-custom-column-in-magento-grid/)为该列添加了一个自定义渲染器，它可以工作。我虽然只修改渲染并添加标签就足够了。但我的希望破灭了，是行不通的。

怎么可能做到这一点？应该很简单，但我找不到方法。我在这里找到了很多问题/答案，但是关于添加产品、类别等的链接，没有引用外部网站，也许我只是在搜索中使用了错误的关键字。

这是我的 Grid.php 中的 _prepareColumns()

```
protected function _prepareColumns() {
    $blog = Mage::getModel('blogtest/blog');

    $this->addColumn('api_blog_url', array(
            'header' => $this->__('URL'),
            'align' => 'center',
            'index' => 'api_blog_url',
            'width' => 50,
            'type' => 'text',
            'renderer' =>  'Dts_Blogtest_Block_Adminhtml_Blog_Renderer_MyRender'
    ));
.... 
```

这是我对该列的渲染覆盖：

```
<?php
class Dts_Blogtest_Block_Adminhtml_Blog_Renderer_MyRender extends Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Abstract
{
    public function render(Varien_Object $row)
    {
        $value =  $row->getData($this->getColumn()->getIndex());
//      return '<a href="http://'.$value.'>'.$value.'</a>';
        return '<span style="color:red;">'.$value.'</span>';
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:58:11.497

您的意思是红色的样式可以正常工作，但是如果您取消注释该行，`<a href..>`它不是吗？

我认为您只是错过了 href 属性中的引号。

```
return '<a href="http://'.$value.'">'.$value.'</a>'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T13:28:53.017

顺便说一句，我认为，如果将使用下一种方法，您可以编写更美观的代码：在渲染函数中，您创建一个块并发送链接数据。之后，您为此块创建块和模板。在模板中，您可以获得链接数据并根据需要显示它。

```
<?php
class Something
    extends Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Abstract
{
    public function render(Varien_Object $row)
    {
        $column_data = $row->getData(
            $this->getColumn()->getIndex()
        );

        return $this->getLayout()
            ->createBlock('something/adminhtml_renderer_link')
                ->setLink($column_data )
                    ->_toHtml();
    }
}
?>

<?php
class Something
    extends Mage_Core_Block_Template
{
    protected function _construct()
    {
        parent::_construct();
        $this->setTemplate('something/link.phtml');
    }
}
?>

<?php
$link = $this->getLink();
?>
<?php if ($link): ?>
<a href="<?php echo $link ?>" target="_blank"><?php echo $this->__('Click to view!'); ?></a>
<?php else: ?>
    <?php echo $this->__('No link'); ?>
<?php endif; ?> 
```

# sql-server - 在表中插入值之前检查

> ID：12931630
> 
> 赞同：0
> 
> 时间：2012-10-17T09:52:53.130
> 
> 标签：sql-server, tsql, stored-procedures

我创建了两个表：Account 和 Loan

*   在 Account 表中，我将`Acc_id`其作为主键。
*   在 Loan 表中，我`Loan_id`作为主键和`Acc_id`外键引用`Acc_id`Account 表中的 。

现在我在 Account 表中插入了 5 条记录..

```
101 YEARLY                  BEN                             21.12.2012
102 YEARLY                  PARKER                          31.07.2013
103 HALFYEARLY              MARY                            26.04.2013
104 TWOYEARS                OSBORN                          01.01.2014
105 TWOYEARS                HARRY                           04.06.2015
106 YEARLY                  PENNY                           25.12.2013 
```

现在我必须在贷款表中插入值。

例如：`insert into loan values((203,'PARKER','500$',103(Ac_id),'25.11.2014');`

现在在上面的查询中，我给了 Ben 的`Acc_no`错误。我已经输入了`acc_no`Mary 的，但是会插入成功。

我需要一个程序来防止这种情况发生，谁能告诉我这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:42:25.937

您的问题出在数据设计中-您的贷款表中不应包含帐户持有人的姓名-这是多余的。

如果要检查，可以创建一个过程，例如，

```
create proc insertLoan
(    
    @accid int, 
    @accholder varchar(50), 
    @amount money    
)
as
begin
    if (exists (select * from accounts where id =@accid and accountname = @accholder))
    begin
        insert loans (accid, amount) values (@accid, @amount)
    end
    else
    begin
        raiserror ('mismatched account details',15,1)
    end
end 
```

# operating-system - 操作系统如何执行编译的二进制文件？

> ID：12931632
> 
> 赞同：6
> 
> 时间：2012-10-17T09:53:01.600
> 
> 标签：operating-system, executable, binaryfiles

当我研究进程调度时，这个问题浮现在我脑海中。

操作系统如何执行和控制二进制和编译文件的执行？我想也许操作系统将二进制文件的一部分复制到某个内存位置，跳转到那里，在执行该块后返回并执行下一个。但是它不会对其进行任何控制（例如，程序可以在任何地方进行跳转并且不会返回）。

在 JVM 的情况下，它非常有意义，VM 正在解释每条指令。但在二进制文件的情况下，指令是真正的 CPU 可执行指令，所以我认为操作系统不像 VM 那样工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T10:52:14.493

它正是这样做的。操作系统，按某种顺序，

*   在进程表中创建一个条目
*   为进程创建虚拟内存空间
*   在进程内存中加载程序代码
*   将进程指令指针指向进程入口点
*   在调度程序中创建一个条目并将进程线程设置为准备好执行。

并发性不是由被分割成块的程序来处理的。任务之间的切换是通过中断完成的：在给进程分配 CPU 之前，会设置一个计时器。当定时器结束时，CPU 注册一个中断，将指令指针压入堆栈并跳转到操作系统定义的中断处理程序。该处理程序将 CPU 状态存储在内存中，交换虚拟内存表并恢复其他一些准备好执行的线程。如果线程由于某些其他原因必须暂停（等待用户/磁盘/网络...）或让步，则会发生相同的交换。
[http://en.wikipedia.org/wiki/Multitasking#Preemptive_multitasking.2Ftime-sharing](http://en.wikipedia.org/wiki/Multitasking#Preemptive_multitasking.2Ftime-sharing)

请注意，依赖进程产生 CPU 是可能的，但不可靠（进程可能不会产生，阻止其他进程运行）
[http://en.wikipedia.org/wiki/Multitasking#Cooperative_multitasking.2Ftime-sharing](http://en.wikipedia.org/wiki/Multitasking#Cooperative_multitasking.2Ftime-sharing)

安全性是通过将 CPU 切换到应用程序代码无法运行某些指令的保护模式来处理的（因此随机跳转几乎是无害的）。请参阅[@SkPhilipp 提供的链接](http://en.wikipedia.org/wiki/Protected_mode)

请注意，现代 JVM 不会解释每条指令（这会很慢）。相反，它编译为本机代码并运行代码或（在即时编译的情况下）首先解释，但编译“热点”（经常运行的代码）。

# get - 通过输入值 keyup 获取 id

> ID：12931633
> 
> 赞同：0
> 
> 时间：2012-10-17T09:53:10.063
> 
> 标签：get, html-table

html代码：

```
<tr id="myname">
<td><input class="count" type="text" value="1"></td>
</tr> 
```

jQuery代码：

```
$('input.count').keyup(function(e){
        var test = $(this).parent().parent().attr('id');
        alert(test);
    }); 
```

当 keyup 输入时，获取 tr id ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:57:46.090

您可以尝试jQuery 中 的[最接近（）方法：](http://api.jquery.com/closest/)

```
$('input.count').keyup(function(e){
    var test = $(this).closest('tr').attr('id');
    alert(test);
}); 
```

这是一个工作示例：[DEMO](http://jsfiddle.net/UcCeW/25/)

不同的是您没有提供`<table></table>`标签。

# image - 如何更改 IKImageBroswerView 拖动图像

> ID：12931641
> 
> 赞同：1
> 
> 时间：2012-10-17T09:53:55.437
> 
> 标签：image, cocoa, drag, ikimagebrowserview

我正在 Mac_OS 10.6 及更高版本上开发一个程序。我使用的程序语言是 Objc。

我想知道我可以做些什么来更改 IKImageBrowserView 的拖动图像？是否有任何方法或委托来更改默认拖动图像？

谢谢~

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:51:14.130

好吧，我尝试了很多方法，最后得出一个结论，这个系统操作不能被修改或删除，也许有一些我没有找到可以定制的私有方法。

无论如何，我改变设计以避免面对这种尴尬的情况。

# android - Google API 密钥访问和 Android 应用程序

> ID：12931647
> 
> 赞同：0
> 
> 时间：2012-10-17T09:54:05.643
> 
> 标签：android, google-api, api-key

这是我第一次使用 Google API。我通过使用 beta google java api 客户端将它与我的 Android 应用程序一起使用。为了在模拟器中测试我的应用程序，我从我的谷歌帐户获取了一个 API 密钥访问权限，并且一切正常。但是现在，如果我想在 Google Play 中分享我的应用程序，有关此 API 密钥访问的程序是什么？我是否在代码或应用程序中留下相同的密钥访问权限，我是否必须要求最终用户使用他自己的密钥访问权限与他的谷歌帐户进行注册？谢谢你的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:27:18.663

这是您需要遵循的简单步骤，而不是在站点中注册它，只需在 Google play 中注册密钥即可。[这](http://www.higheredblogcon.com/library/deweese/presentation.html)是要跟进的链接示例，也可以跟进此聊天，您可能会有所了解，[请点击](https://stackoverflow.com/questions/8832087/where-i-can-get-google-developer-key)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T09:44:56.887

你应该在终端（cd *Library/Android/sdk/platform-tools/*）Mac os 中走这条路，之后你可以运行下面的命令

创建**调试**密钥

```
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android 
```

创建**发布**密钥

```
keytool -list -v -keystore /Users/macbook16/Documents/AndroidProjects/natural-therapy-android/app/keystore.jks  -alias myaliassample 
```

注意：*/Users/macbook16/Documents/AndroidProjects/natural-therapy-android/app/keystore.jks*这个路径是我的项目 .jks 文件路径，因此你应该替换你的项目 jks 文件路径，而***myaliassample***是示例别名，你应该替换您的别名之类的命令

# c++ - 如何在 C++ 中检查符号

> ID：12931649
> 
> 赞同：2
> 
> 时间：2012-10-17T09:54:22.453
> 
> 标签：c++, if-statement

我是编程的初学者（特别是 C++）。我试图检查传入的字母符号。我只需要“捕捉”从 0 到 9 的数字。所以，我尝试使用它：

```
// Checking "a". If "a" is a letter, the error must be printed;
if (a!='%d') {
    cout << "pfff! U cant use letters!" << endl;
    return -1;
}
// The end of checking; 
```

但它不起作用。我想我不能在 C++ 中使用 '%d' 。我怎么说：“检查所有符号并停止程序，如果有非数字。”

PS对不起我的英语。我希望你得到我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T09:59:54.177

是的，[`isdigit()`](http://en.cppreference.com/w/cpp/string/byte/isdigit)在这里会很好地工作。

一个例子是：

```
 #inlude <iostream>
    #include <ctype.h>
    // in ctype.h is located the isdigit() function
    using namespace std;
    //...
    char test;
    int x;
    cin >> test;
    if ( isdigit(test) )//tests wether test is == to '0', '1', '2' ...
    {
          cin>>putback(test);//puts test back to the stream
          cin >> x;
    }
    else
         errorMsg(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T09:57:39.583

改用就好[`isdigit`](http://en.cppreference.com/w/cpp/string/byte/isdigit)了。

```
if (!isdigit(a)) {
    cout << "pfff! U cant use letters!" << endl;
    return -1;
} 
```

您的文字`cout`建议您正在寻找`isalpha`：

```
if (isalpha(a)) {
    cout << "pfff! U cant use letters!" << endl;
    return -1;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T10:01:37.127

您可以使用`isdigit()`继承的 C 库中的函数。这存在于标头*cctype*中。您要求的算法的逻辑是遍历输入的字符串并在字符不是数字时做出反应。

这是一个示例源代码：

```
#include <iostream>
#include <cctype>
#include <utility>
#include <string>
#include <cstdlib>

int main()
{
    int toret = EXIT_SUCCESS;
    std::string str;

    std::getline( std::cin, str );

    for(unsigned int i = 0; i < str.length(); ++i) {
        if ( !std::isdigit( str[ i ] ) ) {
            std::cerr << "Only digits allowed" << std::endl;
            toret = EXIT_FAILURE;
            break;
        }
    }

    return toret;
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T09:57:19.793

你必须使用函数[`isdigit`](http://en.cppreference.com/w/cpp/string/byte/isdigit)。

```
if (!isdigit(a)) {
    cout << "pfff! U cant use letters!" << endl;
    return -1;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T10:01:14.007

您还可以做的是与您的代码相反。例如，检查输入是否等于或大于 0 并且小于 10。

如果是这种情况，它是一个从 0 到 9 的数字，如果不是，那么输入是错误的。

# wordpress - htaccess 重定向问题，Wordpress 和静态 html 站点无法正确重定向

> ID：12931650
> 
> 赞同：2
> 
> 时间：2012-10-17T09:54:28.573
> 
> 标签：wordpress, .htaccess, mod-rewrite

我遇到了客户网站的问题。我为他创建了一个新的 Wordpress 站点，现在我遇到了 htaccess 重定向问题。

在我在服务器上安装 Wordpress 之前，有两个静态的基本 HTML 站点。public_html 根目录中的一个使用主域，而子文件夹中的一个完全不同的子站点使用 htaccess 重写规则将子域引导到该文件夹​​。

现在有 Wordpress 搞乱了重定向。Wordpress 当然对原始的 htaccess 文件进行了修改。除此之外，客户还必须更改托管服务提供商内的服务器以获取更新的 php 版本，因此我不得不从头开始编写 htaccess 文件。

这是当前的 htaccess 文件：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /www/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /www/index.php [L]
</IfModule>

# END WordPress

RewriteEngine On
Options +FollowSymlinks
RewriteBase /
RewriteCond %{HTTP_HOST} ^(www.)?subdomainurl.com$ [NC]
RewriteCond %{REQUEST_URI} !^/subdomainfolder/
RewriteRule ^(.*)$ subdomainfolder/$1 [L] 
```

Wordpress 安装在名为 www 的文件夹中，并且正在重写 url，它运行良好。但是我遇到了子域的问题。在上面的代码中，我用 subdomainurl.com 替换了子域 url，该站点位于 public_html/subdomainfolder/。

现在，当我键入 www.subdomainurl.com 时，重定向工作，该站点显示。但是输入的 www.subdomainurl.index.html 没有。它必须写成www.subdomainurl.com/subdomainfolder/index.html，所以我显然没有写重定向权，还添加了子域文件夹。我试图与那个 htaccess 打成一片，但做不到。每次我尝试更改某些内容时，我都会在主域的 Wordpress 站点中得到 404。

目前这些工作： www.maindomain.com/subdomainfolder/index.html www.subdomainurl.com/subdomainfolder/index.html

这没有，我正在尝试这样做：www.subdomainurl.com/index.html

我不是重定向专家，任何帮助将不胜感激。

*编辑/插件：*

这是来自旧服务器的旧代码，它将子域重定向到子文件夹并重写了 url，它不再起作用，所以我放弃了它。

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www.)?subdomainurl.com$ [NC]
RewriteCond %{REQUEST_URI} !^/subdomainfolder/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /subdomainfolder/$1
RewriteCond %{HTTP_HOST} ^(www.)?subdomainurl.com$ [NC]
RewriteRule ^(/)?$ subdomainfolder/index.html [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:49:14.140

我在 htaccess 文件中没有看到仅针对子域和主域的条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:57:21.197

目前我正在使用此代码

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /www/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /www/index.php [L]
</IfModule>

END WordPress

RewriteEngine On
Options +FollowSymlinks
RewriteBase /
RewriteCond %{HTTP_HOST} ^(www.)?subdomainurl.com$ [NC]
RewriteCond %{REQUEST_URI} !subdomainfolder
RewriteRule ^(.*)$ subdomainfolder$1 
```

这会将整个二级域 (subdomainurl.com) 加载为 www.subdomainurl.com/subdomainfolder 并且它的工作方式是这样的 (www.subdomainurl.com/subdomainfolder/index.html, www.subdomainurl.com/subdomainfolder/work.html 等。 )，但这仍然不是客户真正想要的。我仍然需要通过htaccess从url中删除子域文件夹部分，到目前为止我还没有成功。我想我在代码的最后一行没有正确理解。

# objective-c - 处理没有焦点的关键事件

> ID：12931656
> 
> 赞同：0
> 
> 时间：2012-10-17T09:54:39.647
> 
> 标签：objective-c, xcode, macos

我想知道如果我的应用程序不在焦点上，有没有办法处理关键事件。

例如，我创建了一个小应用程序。它有一个透明的背景。当我通过 Xcode（运行选项）运行我的应用程序时，它处于焦点并处理关键事件。但是如果我点击任何地方，焦点就会丢失并且关键事件不会被处理。我所需要的只是处理关键事件，即使我的应用程序不在焦点（具有透明背景），并且如果将关键事件发送到其他窗口（焦点），如果我的应用程序不需要此关键事件。Dropl 是应用程序，它做我想要的。但是我没有来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:13:58.063

[好的，我使用来自https://github.com/davedelong/DDHotKey](https://github.com/davedelong/DDHotKey)的 DDHotKeyExample 解决了我的问题

# c# - 无法从 app.Config 读取设置

> ID：12931658
> 
> 赞同：0
> 
> 时间：2012-10-17T09:54:46.487
> 
> 标签：c#

我有一个安装在各种用户机器上的插件，并且在大多数情况下它工作正常。但是对于少数用户来说，它无法从配置文件中加载设置。文件名是`xxAddin.dll.config`，它有一些键和值对。例如

```
?xml version="1.0" encoding="utf-8" ?
configuration
  appSettings
    add key="KeywordDBPath" value="somepath" 
    add key="keywordServer" value="someserver" /
  /appSettings
/configuration 
```

对于大多数安装它的机器，它工作正常。但对于少数用户，键值返回`null`。

我检查了安装文件夹中的配置文件，它存在并且具有相同的内容。为了确保安装没有损坏，再次安装了应用程序，但没有成功。

我曾尝试在各种论坛上查找，但到目前为止没有任何建议有帮助。任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-17T10:59:51.923

只是一个猜测，但如果它适用于 WinXP 用户而不适用于 vista 或 Win7 用户，那是因为用户权限，但这应该在您的应用程序中给出一个例外。你在吞下异常吗？

# shared-libraries - SCONS：我如何对就地目标进行操作

> ID：12931672
> 
> 赞同：2
> 
> 时间：2012-10-17T09:55:26.637
> 
> 标签：shared-libraries, scons

假设我想剥离我构建的共享库中的所有调试符号，同时保留原始文件名。

我试图在方法中添加一个命令：

```
def mySharedLibrary(self, *args, **kwargs):
    # do some common work for every shared library like add a soname or append some lib files to LIBS      parameter
     target = SharedLibary(*args, **kwargs)
     target = env.Command(target,target, "objcopy --strip-debug ${SOURCE}")
     return target 
```

我收到此错误：为同一个目标提供了两种不同的方法，我猜这是因为 env.Command 和 SharedLibrary 返回的两个目标名称完全相同。

有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:02:09.230

我遇到了同样的问题并得到了同样的错误。我要做的是创建一个中间目标/库。中间目标和最终目标都有自己的库名称，因此 SCons 不会混淆。

您可能可以执行以下操作：

```
env.SharedLibrary(target = 'namePreStrip', source = 'yourSource')
env.Command(target = 'name', source = 'namePreStrip', 'objcopy...') 
```

我使用 objcopy 从几个库中构建了一个库。这是我实现的实际源代码：

```
#
# Build an object file out of several other source files, objects, and libraries
# Optionally execute objcopy on the resulting library, depending if objcopyFlags
# has been populated
#
# env - SCons Environment used to build, Mandatory arg
# target - resulting library name, without LIBPREFIX and LIBSUFFIX, ej 'nsp2p',
#          Mandatory arg
# sourceFiles - list of '.cc' files that will be compiled and included in the
#               resulting lib, Optional arg
# objects - list of already compiled object files to be included in resulting lib,
#           Optional arg
# libraries - list of libraries to be included in resulting lib, Optional arg
# objcopyFlags - list of flags to pass to objcopy command. objcopy will only
#                be executed if this list is populated, Optional arg
# 
# One of [sourceFiles, objects, or libraries] must be specified, else nothing
# will be performed
#
# Not using a custom builder because I dont like the way SCons prints the
# entire command each time its called, even if its not going to actually
# build anything AND I need more method args than provided by custom builders
#
def buildWholeArchive(self, env, target, sourceFiles, objects, libraries, objcopyFlags):
    if len(sourceFiles) == 0 and len(objects) == 0 and len(libraries) == 0:
        print "Incorrect use of buildWholeArchive, at least one of [sourceFiles | objects | librarires] must be specified, no build action will be performed"
        return None

    # Compile each source file
    objNodes = []
    if len(sourceFiles) > 0:
        objNodes = env.Object(source = sourceFiles)

    cmdList = []
    cmdList.append(env['CXX'])
    cmdList.append('-nostdlib -r -o $TARGET -Wl,--whole-archive')
    for obj in objNodes:
        cmdList.append(env.File(obj).abspath)
    for obj in objects:
        cmdList.append(env.File(obj).abspath)
    for lib in libraries:
        cmdList.append(lib)
    cmdList.append('-Wl,--no-whole-archive')
    cmd = ' '.join(cmdList)

    libTarget = '%s%s%s' % (env['LIBPREFIX'], target, env['LIBSUFFIX'])

    if len(objcopyFlags) > 0:
        # First create the library, then run objcopy on it
        objTarget = '%s%s_preObjcopy%s' % (env['LIBPREFIX'], target, env['LIBSUFFIX'])
        preObjcopyTarget = env.Command(target = objTarget, source = [], action = cmd)
        env.Depends(preObjcopyTarget, [objNodes, sourceFiles, objects, libraries])

        objCmdList = [env['OBJCOPY']]
        objCmdList.extend(objcopyFlags)
        objCmdList.append('$SOURCE $TARGET')
        objcopyCmd = ' '.join(objCmdList)
        archiveTarget = env.Command(target = libTarget, source = preObjcopyTarget, action = objcopyCmd)
    else:
        # Just create the library
        archiveTarget = env.Command(target = libTarget, source = [], action = cmd)
        env.Depends(archiveTarget, [objNodes, sourceFiles, objects, libraries])

    return archiveTarget 
```

这就是我所说的：

```
sourceFiles = ['file1.cc', 'file2.cc']
libSource = []
if 'OcteonArchitecture' in env:
    libSource.append(lib1)
    libSource.append(lib2)
libSource.append(lib3)

objcopy = []
if 'OcteonArchitecture' in env:
    objcopy.extend([
        '--redefine-sym calloc=ns_calloc',
        '--redefine-sym free=ns_free',
        '--redefine-sym malloc=ns_malloc',
        '--redefine-sym realloc=ns_realloc'])

archiveTarget = clonedEnv.buildWholeArchive(target = libName,
                                            sourceFiles = sourceFiles,
                                            objects = [],
                                            libraries = libSource,
                                            objcopyFlags = objcopy)
env.Alias('libMyLib', archiveTarget) 
```

# overflow - 溢出 x 和 y？

> ID：12931680
> 
> 赞同：5
> 
> 时间：2012-10-17T09:55:50.230
> 
> 标签：overflow, css

我有一个 div 集来隐藏内容`overflow-x`和显示（`visible`）内容`overflow-y`。
不幸的是，它没有按我的意愿工作。它添加了垂直滚动条 - 我认为这是因为`overflow-x`并且`overflow-y`不能一起使用。

据我所知，如果一个溢出设置为隐藏，另一个设置为自动。
有没有其他方法可以解决这个问题？所以我可以水平隐藏溢出并垂直显示（没有滚动）？

就这样没有混淆这里有一个小提琴来解释更多：http: [//jsfiddle.net/kwnQk/](http://jsfiddle.net/kwnQk/)

**编辑**
这是我遇到的实际问题：http: [//jsfiddle.net/kwnQk/1/](http://jsfiddle.net/kwnQk/1/)
我有一个选择框，由 div 和 jQuery 创建，最终超过 div 高度，导致它添加滚动条.
遗憾的是，溢出函数的工作方式是这样的，因为 div`overflow-x` *必须*被隐藏，导致 div`overflow-y`是自动的。

**编辑 2**
请查看这个新的 JSFiddle 以准确说明我需要溢出的原因：http: [//jsfiddle.net/kwnQk/3/](http://jsfiddle.net/kwnQk/3/)
它也包含滑块，需要设置为一定的宽度。而且它们不能占据页面的整个高度，所以我也必须限制它们的高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:05:12.680

我认为您可以将溢出属性保留为可见，并使用左右填充。除非您有图像，否则文本应该被包裹起来。

对于图像，您应该考虑使用宽度为 100% 的子 div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:14:28.587

你可以为此尝试一些**jQuery 滚动插件吗？**

[http://manos.malihu.gr/tuts/jquery_custom_scrollbar.html](http://manos.malihu.gr/tuts/jquery_custom_scrollbar.html)

[http://baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)

[http://www.net-kit.com/jquery-custom-scrollbar-plugins/](http://www.net-kit.com/jquery-custom-scrollbar-plugins/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:33:43.770

试试 jquery 选择框插件，它很棒，并且完全按照您的要求做：

[http://jquery-ui.googlecode.com/svn/branches/labs/selectmenu/index.html](http://jquery-ui.googlecode.com/svn/branches/labs/selectmenu/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-26T15:32:45.180

不幸的是，糟糕的组合。从文档[http://www.w3.org/TR/css3-box/#overflow-x](http://www.w3.org/TR/css3-box/#overflow-x)：

'overflow-x' 和 'overflow-y' 的计算值与它们的指定值相同，除了某些与 'visible' 的组合是不可能的：如果一个被指定为 'visible' 而另一个是 'scroll'或“自动”，然后“可见”设置为“自动”。

# osgi - OSGi 片段更新与包更新？

> ID：12931682
> 
> 赞同：1
> 
> 时间：2012-10-17T09:55:56.610
> 
> 标签：osgi, bundle, osgi-fragment

只是想知道 OSGi 片段更新与捆绑更新之间是否有任何显着差异？

当片段包更新时，我们应该在更新的片段上还是在其父包上调用 FrameworkWiring.refreshBundles 方法？

你能指点我一些使用片段开发osgi应用程序的教程/示例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:01:25.807

您需要刷新主机包，因为它是从片段加载的主机包的类加载器。一个片段可以附加到多个主机。

一般来说，您不应该使用片段，除非您有一个无法以更传统的方式解决的特定用例。

# java - 创建多个由用户输入定义的 JTextField ，以便通过按一下按钮从所有这些中读取文本

> ID：12931685
> 
> 赞同：1
> 
> 时间：2012-10-17T09:56:00.867
> 
> 标签：java, swing, listener, jbutton, jtextfield

`JTextField`我曾经通过在 for 循环中声明 new 来制作我的 UI，同时通过 anon 类将一个动作侦听器附加到 each `JTextField`，这意味着您必须按 Enter 触发一个事件，该事件将读取该字段的文本并将其放入一个数组中这是从 JTextField 获取数据的代码 [，它是几个局部变量之一，](https://stackoverflow.com/questions/12639162/getting-data-from-jtextfield-that-is-one-of-several-local-variables)没有一些小的更改。现在我必须修改它，以便我按下像 Apply 这样的按钮，以便将值写入数组。虽然我找到了两种方法来做到这一点，但我想知道什么是最佳的方法。

1.  可怕的方式。创建一个充当临时存储的数组，将`ActionListener`s替换为`DocumentListener`s，将值放入此临时数组中。还有一个按钮，按下时将遍历临时数组，将其值放入目标数组。

2.  我在搜索时发现的一种更好的方法是，将`JTextField` 数组创建为公共数组，并且只需一个按钮，按下该按钮即可遍历`JTextField`数组并将其值放入目标数组中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:49:55.760

[`Adder`](https://stackoverflow.com/a/8703807/230513)是一个维护 a`List<JFormattedTextField>`以强制格式化的示例。它使用`PropertyChangeListener`&`FocusListener`来更新导航事件，例如默认[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)到`Tab`和`Shift-Tab`。

![图片](../Images/da198202c73172eee03f84bd2053d010.png)

# c# - TargetInvocationException 发生，但我完全不知道为什么

> ID：12931687
> 
> 赞同：3
> 
> 时间：2012-10-17T09:56:10.847
> 
> 标签：c#, exception, unhandled-exception, targetinvocationexception

我收到了这个未处理的异常错误：

> PresentationFramework.dll 中出现“System.Reflection.TargetInvocationException”类型的未处理异常。
> 
> 附加信息：调用的目标已引发异常。

简而言之，这是我的代码。[它是两个文本框的计算器，当用户按下WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)中制作的 +、-、/、x 按钮时，它们应该一起成为新的答案。

```
public partial class MainWindow : Window
{
    public string numberInString
    {
        get { return TextDoos.Text; }
        set { TextDoos.Text = value; }
    }

    public MainWindow()
    {
        if(TextDoos.Text == "")
        {
            if(TextDoos2.Text == "")
            {
                RekenFunctie(TextDoos.Text, TextDoos2.Text);
            }
        }
    }
}

public int RekenFunctie(string numberInString, string numberInString)
{
    int antwoord;
    int getal = Convert.ToInt32(numberInString);
    int getal2 = Convert.ToInt32(numberInString2);

    if (Buttons.IsPressed) // This is the + button, there are also -,x,/ buttons.
    {
       antwoord = getal + getal2;
       return antwoord;
    }
} 
```

我不明白为什么它不起作用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:06:01.960

您错过了构造函数中[InitializeComponent()](http://msdn.microsoft.com/en-us/library/system.windows.markup.icomponentconnector.initializecomponent.aspx)的调用`MainWindow`；

```
public MainWindow() 
{ 
     InitializeComponent();
     button1.Click += button1_click; //'+' button
}

private void button1_click(object sender, RoutedEventArgs e)
{
    int antwoord;
    int getal = Convert.ToInt32(TextDoos.Text);
    int getal2 = Convert.ToInt32(TextDoos2.Text);

    antwoord = getal + getal2;
    resultTextBox.Text = antwoord ;
} 
```

无论如何，您的代码很奇怪。`RekenFunctie`进行一些计算，但您从构造函数中调用它。因此，您只运行此代码一次，但我认为您的用户希望与您的计算器进行交互。

我认为您应该阅读有关[Button.Click](http://www.c-sharpcorner.com/resources/705/how-to-add-a-button-click-event-handler-in-wpf.aspx)事件的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T19:14:01.627

我遇到了类似的问题。

从 TextBox 的属性更改事件设置 TextBlock 上的文本时，我遇到了同样的错误。

```
 private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        MainTextBlock.Text = ((TextBox)sender).Text;
    } 
```

我认为它是在初始化 MainTextBlock 组件 *之前在运行时调用的。*

就我而言，只需检查*null*就可以了。

```
 private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        if (MainTextBlock != null)
            MainTextBlock.Text = ((TextBox)sender).Text;
    } 
```

# jquery - 快速简单的一个...向这个手风琴添加活动类？

> ID：12931699
> 
> 赞同：0
> 
> 时间：2012-10-17T09:57:00.203
> 
> 标签：jquery, accordion

我需要一个活动链接添加到这个手风琴上的实际链接。目前它只是将一个添加到容器中，这也很方便，但是向按钮链接添加一个活动是多么容易，所以我可以有一个向上或向下箭头.. .?

```
<dl class="accordion">

    <dt><a href="">Panel 1</a></dt>
    <dd>Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.</dd>

    <dt><a href="">Panel 2</a></dt>
    <dd>Donec nec justo eget felis facilisis fermentum. Aliquam porttitor mauris sit amet orci. Aenean dignissim pellentesque felis.</dd>

    <dt><a href="">Panel 3</a></dt>
    <dd>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti.</dd>

    </dl>​

jQuery(document).ready(function($) {

      var allPanels = $('.accordion > dd').hide();

      $('.accordion > dt > a').click(function() {
          $this = $(this);
          $target =  $this.parent().next();

          if(!$target.hasClass('active')){
             allPanels.removeClass('active').slideUp();
             $target.addClass('active').slideDown();
          }

        return false;
      });

}); 
```

非常感谢您的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:08:58.087

试试这个...

```
jQuery(document).ready(function($) {
var allPanels = $('.accordion > dd').hide();

  $('.accordion > dt > a').click(function() {
      $this = $(this);
      $target =  $this.parent().next();

      if(!$target.hasClass('active')){
         allPanels.removeClass('active').slideUp();

         $target.addClass('active').slideDown();

         $('.accordion > dt > a').removeClass('active'); // remove class active in <a>
         $this.addClass('active'); // add class active in clicked  <a>

         //or//

         $('.accordion > dt').removeClass('active'); // remove class active in <dt>
         $this.parent().addClass('active'); // add class active in clicked  <dt>
      }

    return false;
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:10:26.857

我不确定这是否是您想要的：

[http://jsfiddle.net/2Jrqe/1/](http://jsfiddle.net/2Jrqe/1/)

我加了两个a（上下）

干得好 ;）

# html - CSS3 边框和渐变

> ID：12931702
> 
> 赞同：-1
> 
> 时间：2012-10-17T09:57:06.467
> 
> 标签：html, css, fluid

我有一个 HTML CSS 查询。

我有以下 JS Fiddle。 [http://jsfiddle.net/NC9NL/](http://jsfiddle.net/NC9NL/) 如果你看这个小提琴，你会看到我在主要内容的两侧有两个 div 来给它渐变效果。左右这两个div设置为100%；

然而，当主要内容比这更大时，例如需要一个滚动条，其他两个 div 不会在页面下方跟随它。有谁知道我怎么能做到这一点。

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:38:47.103

我认为您并不真的需要那些额外的列。只需将两个渐变合并为一个并将其分配给主列：

```
.container_body {
    background: #fff;
    background: -moz-linear-gradient(left, #c6c6c6 0%, #ffffff 2%, #ffffff 98%, #c6c6c6 100%);
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#c6c6c6), color-stop(2%,#ffffff), color-stop(98%,#ffffff), color-stop(100%,#c6c6c6));
    background: -webkit-linear-gradient(left, #c6c6c6 0%,#ffffff 2%,#ffffff 98%,#c6c6c6 100%);
    background: -o-linear-gradient(left, #c6c6c6 0%,#ffffff 2%,#ffffff 98%,#c6c6c6 100%);
    background: -ms-linear-gradient(left, #c6c6c6 0%,#ffffff 2%,#ffffff 98%,#c6c6c6 100%);
    background: linear-gradient(to right, #c6c6c6 0%,#ffffff 2%,#ffffff 98%,#c6c6c6 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#c6c6c6', endColorstr='#c6c6c6',GradientType=1 );
} 
```

# php - Chrome 闪退问题

> ID：12931704
> 
> 赞同：1
> 
> 时间：2012-10-17T09:57:07.880
> 
> 标签：php, javascript, flash, google-chrome, shockwave

在我的网站上有一个 Flash 播放器，它可以在所有浏览器中运行，需要最新版本的 Chrome。在最新版本的 chrome 中显示崩溃，因为在最新版本的 Chrome（Chrome 22）中，他们添加了“实验性” **PepperFlash 插件**作为 Flash 内容的默认播放器，并删除了旧的集成 Chrome Flash 插件，（[请检查这个](http://techlogon.com/2011/08/11/shockwave-flash-crashes-in-google-chrome/)），我想要使用 php 脚本/javascript/jquery禁用 * *PepperFlash **插件，请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:05:07.450

你不能那样做。

你可以做的是你可以改变你的闪存代码。假设是[这个问题](http://code.google.com/p/chromium/issues/detail?id=155437)，您可以通过使用不同的分辨率参数调用 Camera#setMode 来解决它，就像该线程中建议的那样。该线程说这些分辨率参数将导致问题：

> 320x240 640x480 1024x768 1152x864 1280x720 1280x768 1280x960 1280x1024 1920x1080

而如果你改变一个像素的参数，它会起作用。

那里可能还有其他错误（至少有一些未解决的问题） - 如果您愿意，您可以建议使用 chrome 的最终用户禁用胡椒闪光。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:09:41.240

好吧，[这里有一篇](http://support.google.com/chrome/bin/answer.py?hl=en&answer=108086)关于 Flash 的有趣短文。

这[是一个](http://jsfiddle.net/XSFxb/2/)检测 PepperFlash 的小提琴。事实上，您不能从客户端禁用插件 PeeperFlash 的使用。为此，您需要比浏览器提供的权限更多的权限。

唯一的方法是使用 chrome 的插件设置禁用它。

# java - 关闭类的WARN日志

> ID：12931708
> 
> 赞同：0
> 
> 时间：2012-10-17T09:57:26.853
> 
> 标签：java

我怎样才能关闭`class(com.service.infra)`我的`log4j.properties`.

```
log4j.rootLogger=DEBUG,QuietAppender,SilentAppender,LoudAppender
log4j.appender.QuietAppender=org.apache.log4j.RollingFileAppender
log4j.appender.QuietAppender.Threshold=WARN
log4j.appender.QuietAppender.File=/Log/front-log
log4j.appender.QuietAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.QuietAppender.layout.ConversionPattern= %m%n

log4j.appender.SilentAppender=org.apache.log4j.DailyRollingFileAppender
log4j.appender.SilentAppender.Threshold=INFO
log4j.appender.SilentAppender.File=/par/info,infoLog
log4j.appender.SilentAppender.DatePattern='.'dd-MM-yy
log4j.appender.SilentAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.SilentAppender.layout.ConversionPattern=%d{dd/MM/yy kk:mm:ss.SSS} %-3p [%t] %x (%F:%L) - %m%n 
```

**在这里，我想在我的信息日志文件/par/info,infoLog**中关闭警告日志，但是对于警告日志文件，它应该记录到文件**/Log/front-log**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:05:24.113

为您的班级设置记录器的级别：

```
log4j.logger.com.service.infra=ERROR,QuietAppender 
```

这将只为您的班级记录 ERROR 和 up

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:39:51.063

您必须参考[Log4j Log Level](http://logging.apache.org/log4j/1.2/manual.html)。这里的例子。由于使用了日志级别，警告日志`Class3`将关闭`ERROR`。

log4j.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="false">
    <appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
        <param name="Target" value="System.out"/>
        <param name="Threshold" value="DEBUG"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{ABSOLUTE} %-5p [%c] %m%n"/>
        </layout>
    </appender>
    <appender name="APPLICATION" class="org.apache.log4j.DailyRollingFileAppender">
        <param name="file" value="/ACE-MRBS/application.log"/>
        <param name="MaxBackupIndex" value="10"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{yyyy-MM-dd HH:mm:ss,SSS} |%5p| [%c] | %m%n"/>
        </layout>
    </appender>
    <root>
        <appender-ref ref="CONSOLE"/>
    </root>
    <logger name="your.app.test.Class1" additivity="false">
        <level value="DEBUG"/>
        <appender-ref ref="APPLICATION"/>
    </logger>
    <logger name="your.app.test.Class2" additivity="false">
        <level value="WARN"/>
        <appender-ref ref="APPLICATION"/>
    </logger>
    <logger name="your.app.test.Class3" additivity="false">
        <level value="ERROR"/>
        <appender-ref ref="APPLICATION"/>
    </logger>
</log4j:configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:34:32.987

这是通过使用以下代码实现的

```
log4j.rootLogger=DEBUG,LoudAppender
log4j.logger.com.service.infra.inf=INFO,SilentAppender
log4j.logger.com.service.infra._warn=WARN,QuietAppender

log4j.appender.QuietAppender=org.apache.log4j.RollingFileAppender
log4j.appender.QuietAppender.Threshold=WARN
log4j.appender.QuietAppender.File=/Log/front-log
log4j.appender.QuietAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.QuietAppender.layout.ConversionPattern= %m%n

log4j.appender.SilentAppender=org.apache.log4j.DailyRollingFileAppender
log4j.appender.SilentAppender.Threshold=INFO
log4j.appender.SilentAppender.File=/par/info,infoLog
log4j.appender.SilentAppender.DatePattern='.'dd-MM-yy
log4j.appender.SilentAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.SilentAppender.layout.ConversionPattern=%d{dd/MM/yy kk:mm:ss.SSS} %-3p [%t] %x (%F:%L) - %m%n

log4j.appender.LoudAppender=org.apache.log4j.DailyRollingFileAppender
log4j.appender.LoudAppender.File=/Log/debugLog
log4j.appender.LoudAppender.DatePattern='.'dd-MM-yy
log4j.appender.LoudAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.LoudAppender.layout.ConversionPattern=%d{dd/MM/yy kk:mm:ss.SSS} %-5p [%t] %x (%F:%L) - %m%n 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T10:07:26.220

在上面的配置中.. set `threshold=ERROR`，这只会将日志记录限制为 ERROR 级别，并且不会在日志中包含低于此级别的任何级别，即 WARN、DEBUG、INFO 等。

```
log4j.appender.QuietAppender.Threshold=WARN 
```

# php - 如何将数据对存储在 mysql 数据库中？

> ID：12931709
> 
> 赞同：2
> 
> 时间：2012-10-17T09:57:26.970
> 
> 标签：php, mysql, database, entity-attribute-value

我必须存储大量数据对。数据对的形式为：

> 参数=值

并且与容器有关。它类似于 INI 文件。例如，我有一个具有以下值的容器：

```
p1 = 32
p2 = "hello world"
p3 = -54 
```

另一个有：

```
p1 = 32
p2 = 36
p5 = 42
p6 = "bye" 
```

每个容器的参数数量未定义。值是任意长度的数字或字符串（数字可以转换为字符串）。数据检索是通过参数名称（*“所有 p1 值”*）或值（*“a 'p6' parameter with value 'bye'”*）进行的。该数据库将包含数百万对。插入和读取将非常频繁，并且很少会删除或更新记录。

我的第一次尝试是制作两张桌子。第一个是这样的：

```
CREATE TABLE IF NOT EXISTS `container` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  OTHER CONTAINER INFO
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ; 
```

where`id`将在包含对的另一个表中使用：

```
CREATE TABLE IF NOT EXISTS `data` (
  `container` int(11) NOT NULL,
  `name` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `value` text COLLATE utf8_unicode_ci NOT NULL,
  KEY `container` (`container`),
  KEY `name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

添加数据：

```
INSERT INTO `container` (`id`) VALUES ('1'), ('2');
INSERT INTO  `data` (`container`, `name`, `value`) VALUES 
     ('1',  'p1',  '32'), 
     ('1',  'p2',  'hello world'), 
     ('1',  'p3',  '-54'), 
     ('2',  'p1',  '32'), 
     ('2',  'p2',  '36'), 
     ('2',  'p5',  '42'), 
     ('2',  'p6',  'bye'); 
```

它可以工作，但它不是非常“可用”和快速。例如，如果我需要从每个具有 a 的容器中查找所有参数，`p1=32`我必须进行两个 SQL 查询，首先：

```
SELECT id FROM  `container` WHERE id IN (
   SELECT container
   FROM DATA WHERE name =  'p1'
  AND value =  '32') 
```

然后为每个容器`id`获取所有数据：

```
SELECT * FROM  `data` WHERE container = '$id' 
```

然后通过 PHP 进行后处理，因为它返回如下表：

```
container   name    value
    1       p1      32
    1       p2      hello world
    1       p3      -54 
```

（后处理只是对 array_* 函数的几次调用，但它会使处理速度变慢）。

我一直在使用包含 50000 个数据对的数据库进行测试，并使用此过程列出所有记录需要 5 秒以上。问题是：如何存储这种数据？或者如何提高我的实施性能？

**注意**：问题不在于第一个 SQL 查询（0'003 秒）或第二个 SQL 查询（每个 0'002 秒）。问题是对第一个SQL语句的每个结果进行一次SQL查询！！

**注意 2**：目标是拥有一个包含每个结果的 PHP 数组，并为每个结果创建一个带有键值对的关联数组。结果 a `print_r`：

```
Array
(
    [1] => Array
        (
            [p1] => 32
            [p2] => hello world
            [p3] => -54
        )
    [2] => Array
        (
            [p1] => 32
            [p2] => 36
            [p5] => 42
            [p6] => bye
        )
) 
```

当然，我这里展示的数据结构是我的第一次尝试，我正在研究，那不是产品，所以我可以改变，完全没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:00:37.527

您不需要两个单独的查询，连接在那里工作正常；也不需要子选择。您的两个查询变为：

```
SELECT id FROM  `container` c 
JOIN data d ON c.id = d.container
d.name =  'p1'
AND d.value =  '32'; 
```

好的，我看到了你的笔记，你想要同一行中的所有数据吗？我不会使用此查询，但这些是您想要的结果吗？

```
SELECT id, GROUP_CONCAT(CONCAT_WS("=", d.name, d.value)) results FROM  `container` c 
JOIN data d ON c.id = d.container
HAVING LOCATE("p1=32", results) > 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:49:25.523

如果您希望每个容器的所有结果都在一行上，您可能需要使用数据透视表。但是，鉴于您可能获得了可变数量的 data.name 值，您不能只在一个简单的查询中执行此操作。您需要编写一个 proc 来动态生成 sql。

此链接应该可以帮助您：[http ://www.artfulsoftware.com/infotree/queries.php#78](http://www.artfulsoftware.com/infotree/queries.php#78)

生成的 SQL 应该类似于（未经测试）

```
SELECT 
  c.id, 
  GROUP_CONCAT(if(d.name = 'p1', d.value, NULL)) AS 'p1', 
  GROUP_CONCAT(if(d.name = 'p2', d.value, NULL)) AS 'p2', 
  GROUP_CONCAT(if(d.name = 'p3', d.value, NULL)) AS 'p3', 
  GROUP_CONCAT(if(d.name = 'p4', d.value, NULL)) AS 'p4', 
  GROUP_CONCAT(if(d.name = 'p5', d.value, NULL)) AS 'p5', 
  GROUP_CONCAT(if(d.name = 'p6', d.value, NULL)) AS 'p6', 
FROM container c
JOIN data d ON c.id = d.container
GROUP BY c.id; 
```

给出类似的结果：

```
|id    |p1    |p2            |p3    |p4    |p5   |p6  | 
-------------------------------------------------------
|1     |32    |hello world   |-54   |      |     |    |
|2     |32    |36            |      |      |42   |bye | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:04:18.590

试试这个：

```
SELECT 
   container.id 
FROM 
   `container` 
LEFT JOIN `DATA`
   ON container.ID = DATA.container
WHERE DATA.name =  'p1'
   AND DATA.value =  '32' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-16T01:03:19.250

只需将数据表与自身连接起来，您将在一次选择中获得所需的一切：

```
select d2.container, d2.name, d2.value
from data d1
join data d2 using(container)
where d1.name  = 'p1'
  and d1.value = '32'; 
```

结果：

```
| container | name |       value |
|-----------|------|-------------|
|         1 |   p1 |          32 |
|         1 |   p2 | hello world |
|         1 |   p3 |         -54 |
|         2 |   p1 |          32 |
|         2 |   p2 |          36 |
|         2 |   p5 |          42 |
|         2 |   p6 |         bye | 
```

```
$arr = array();
while ($row = $result->fetchAssoc()) {
    $arr[$row['container']][$row['name']] = $row['value'];
} 
```

您还可以在 sql 中创建一个有效的 php-array 字符串：

```
select concat('[', GROUP_CONCAT(d.row), '\n]')
from (
    select concat('\n\t', d2.container, '=>[', GROUP_CONCAT(concat('"', d2.name, '"', '=>', '"', d2.value, '"')), ']') as row
    from data d1
    join data d2 using(container)
    where d1.name  = 'p1'
      and d1.value = '32'
    group by d2.container
) d; 
```

结果：

```
[
    1=>["p1"=>"32","p2"=>"hello world","p3"=>"-54"],
    2=>["p1"=>"32","p2"=>"36","p5"=>"42","p6"=>"bye"]
] 
```

但为什么有人要这样做呢？;-)

[http://sqlfiddle.com/#!9/a7977/1](http://sqlfiddle.com/#!9/a7977/1)

**更新**- 也试试那个键：

```
ALTER TABLE `data` ADD UNIQUE INDEX `container_name` (`container`, `name`);
ALTER TABLE `data` ADD INDEX `name_value` (`name`, `value`(20)); 
```

您可能还想在网上搜索[entity-attribute-value](https://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)

# iphone - 如何在 iphone 中获取视频捕获选项

> ID：12931716
> 
> 赞同：0
> 
> 时间：2012-10-17T09:57:40.847
> 
> 标签：iphone

我正在开发一个应用程序。我正在使用 UIIMagePickercontroller 在 iphone 中制作视频。所以我的问题是如何以编程方式在屏幕上获取视频捕获选项（质量、闪光灯等）符号。所以请告诉我我该怎么做.

# java - Java中通用签名的区别

> ID：12931726
> 
> 赞同：1
> 
> 时间：2012-10-17T09:58:15.393
> 
> 标签：java, generics

我们在教程中制作了一个带有以下签名的示例（作为界面的一部分）

```
<T> List<Comparable<T>> sort(Collection<Comparable<T>> c, boolean ascending); 
```

我们发现几乎不可能在没有警告的情况下实现该方法：

```
public <T> List<Comparable<T>> sort(Collection<Comparable<T>> c, boolean ascending) {
    List<T> list = new ArrayList<T>();
    Collections.sort(list);
    return list;
} 
```

我们得到的行中的错误`Collections.sort(list)`是：

```
Bound mismatch: The generic method sort(List<T>) of type Collections is not 
applicable for the arguments (List<T>). The inferred type T is not a valid 
substitute for the bounded parameter <T extends Comparable<? super T>> 
```

但是，它适用于以下签名：

```
<T extends Comparable<T>> List<T> sort(Collection<T> c, boolean ascending); 
```

有了这个签名，上面的代码（的实现`sort`）就可以按预期工作。我想知道这是什么原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:05:34.707

s 的列表`Comparable<T>`是与 s 可比较的对象的列表`T`。不能说这些对象本身是否是`T`s。因此，不可能将两个元素相互比较。

`T`s，恰好与其他`T`s 可比较，可以相互比较。因此，对此类`T`s 的列表进行排序是可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:20:40.587

`Collections.sort`期望 a `List<T extends Comparable<? super T>>`，即编译器需要能够判断`T`它正在排序的列表的元素类型扩展`Comparable<E>`了 where `E`is `T`、超类`T`或由 实现的接口`T`。您的第一个签名`public <T> List<Comparable<T>> sort`不会强制执行此操作，因此您不能`Collections.sort`使用`List<T>`. 你可以说

```
List<Comparable<T>> list = new ArrayList<Comparable<T>>(); 
```

匹配您的 sort 方法返回的类型，但问题是它相当不灵活 - 它只能对 a 进行排序`Collection<Comparable<Foo>>`，*而不能*对`Collection<Bar>`where进行排序`Bar implements Comparable<Foo>`。最灵活的方法是坚持使用，`new ArrayList<T>()`但使用类似的签名

```
<T extends Comparable<? super T>> List<T> sort(Collection<T> c, boolean ascending); 
```

`T`这对使排序有效的最小限制- 它可以与`Bar extends Foo implements Comparable<Foo>`您的第二个签名不允许的（这将需要`Bar implements Comparable<Bar>`）一起使用。

# monkeyrunner - 如何使用monkeyrunner在文本字段中输入文本

> ID：12931728
> 
> 赞同：0
> 
> 时间：2012-10-17T09:58:20.783
> 
> 标签：monkeyrunner

我想在我的 android 应用程序的文本字段中输入一些文本。我安装了该应用程序，在第二页中我想搜索一些地方。为此，我需要输入一些文本。

```
I tried `device.press('KEYCODE_BUTTON_SELECT',MonkeyDevice.DOWN_AND_UP)
device.press('KEYCODE_i','DOWN_AND_UP')
device.press('KEYCODE_n','DOWN_AND_UP')
device.press('KEYCODE_d','DOWN_AND_UP')
device.press('KEYCODE_i','DOWN_AND_UP')
device.press('KEYCODE_a','DOWN_AND_UP') 
```

或 Device.type（印度）`

但是这些命令不适用于我的应用程序。它没有在我的应用程序文本文件中输入字符串“印度”。但这适用于手机本机搜索文本文件。

我安装了 Android View Client 并导入以下内容

```
import from com.dtmilano.android.view client import View Client
from com.android.monkey runner import Monkey Runner, Monkey Device 
```

然后我写了这样的代码

```
vc = ViewClient(device)
vc.dump()
address= vc.findViewById('search')
address.type('india') 
```

但它显示错误：“无类型”对象没有属性“类型”。

你能帮我做这件事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:04:56.017

您可能想使用：

```
address = vc.findViewByIdOrRaise('search') 
```

以避免必须检查未找到的`address`字段。另外，我猜 id 是`'id/search'`.

最后警告一句：

```
address.type('india') 
```

`EditText.type()`所以你必须确定这是`address`一个 `EditText`

```
print address.getClass() 
```

否则你可以使用

```
address.touch() # to focus it
device.type('india') 
```

或（因为有时 type() 扼流圈）

```
address.touch() # to focus it
for c in 'india':
    device.type(c) 
```

# java - Imagemagick 在 Windows + Java 中不起作用

> ID：12931730
> 
> 赞同：1
> 
> 时间：2012-10-17T09:58:25.147
> 
> 标签：java, imagemagick

我在我的应用程序中使用 imagemagick。我们的开发机器是 Windows，实时服务器是 linux。现在，在网上，它在网上工作得很好。但不在开发机器中。我下载并安装了适用于 Windows 的 Imagemagick 最新版本，当我在 DOS 提示符下尝试以下命令时，它工作正常。

```
convert -sample 100x100 D:\test.jpg D:\test-cropped.jpg 
```

但是当我在 Java 程序中运行与命令行相同的命令时，它不工作并且也没有给出任何错误。我的代码是：

```
Runtime.getRuntime().exec("convert -sample 250x150 "+pathName+digest+".jpg "+pathName+digest+"_thumb.jpg"); 
```

任何帮助都会显现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:02:24.380

`convert.exe`在 ImageMagick 安装目录中可用。所以需要在环境变量中添加 ImageMagick 安装目录`path`。

另一种选择是提供`convert.exe`as 的完整路径：

```
Runtime.getRuntime().exec("C:\\program files\\ImageMagick\\convert -sample 250x150 "+pathName+digest+".jpg "+pathName+digest+"_thumb.jpg"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:02:53.137

我怀疑问题是路径名中的空格，但解决方案不是使用转义符或引号。该`exec(String)`方法通过查找空格以完全幼稚的方式将字符串拆分为“参数”。它不注意引用等。相反，您最终会得到包含引号字符等的命令名称和参数。

解决方案是使用`exec`需要 a的重载`String[]`，并自己拆分参数；例如

```
 Runtime.getRuntime().exec(new String[]{
         "convert", // or "D:\\Program Files (x86)\\ImageMagick-6.8.0-Q16\\convert\\"
         "-sample", 
         "250x150", 
         pathName + digest + ".jpg",
         pathName + digest + "_thumb.jpg"
    }); 
```

您可以做的另一件事是捕获并打印写入进程 stdout 和 stderr 的任何输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:02:20.150

尝试

*   `convert`使用绝对路径执行
*   引用您的参数`input file`and `output file`，以防它们包含空格

 `* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-25T04:38:00.280

在我的情况下，我从 java`compare`命令面临的问题是使用 Runtime.getRuntime().exec() 工作正常，但是在使用时`convert`，它不起作用并将退出值返回为 4。
`Compare`执行返回退出值 0，告诉它已成功执行。
我已经`system path`更新了 ImageMagic 的安装目录，但它仍然没有选择“转换”exe 文件。所以，我开始给出 convert.exe 文件的完整路径，而不是只写`convert`
eg :，`Runtime.getRuntime().exec("C:/Program files/ImageMagic......../convert.exe myImage1 -draw .... myImage2")`这次它工作得很好。
一些系统无法选择`convert`应用程序并给出完整路径将其整理出来。可能这个解决方案会帮助面临相同类型问题的人。`

# objective-c - 目标 c：UINavigationViewController 无法加载根控制器

> ID：12931732
> 
> 赞同：0
> 
> 时间：2012-10-17T09:58:28.667
> 
> 标签：objective-c, iphone, uinavigationcontroller

您好，我在 Interface builder 上有一个导航视图控制器，并将其放置在 window.rootviewcontroller 上，然后我将初始化的视图控制器推送给它。我在这里使用了这一行：[window.rootViewController addSubViews:[navigation view]];

[导航视图] 内部没有视图。

但是如果我在代码中创建一个导航并像以前一样做，我可以让导航出现在屏幕上。

有谁知道出了什么问题？我也将导航与 Interface Builder 链接起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:23:32.717

您是否为在 navigationController 层次结构中的 navigationcontroller（在 XIB 中）内可见的“viewcontroller”正确设置了类

![检查下面的示例](../Images/3c385ee98e4eb98e24f2d3c221a6c79c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:07:15.860

你应该试试这个

如果你想设置 RootViewController

```
 self.window.rootViewController = navigationController;

//navigationController its is rOotViewControler. 
```

如果您想添加为子视图。

```
 [self.window addSubview:navigationController.view]; 
```

我希望它会帮助你。

# .net - System.Diagnostics.Stopwatch 类的计时器分辨率是否稳定？

> ID：12931733
> 
> 赞同：0
> 
> 时间：2012-10-17T09:58:34.803
> 
> 标签：.net, performance, timer, timing

`System.Diagnostics.Stopwatch`.Net 支持使用该类进行高分辨率计时。我了解此类使用的具体分辨率因底层硬件而异，可以通过 static 属性获得`Stopwatch.Frequency`。

此频率似乎与 CPU 频率有关，并`Stopwatch`读取此值并将其存储在静态初始化器/构造器内的静态类变量中。因此，我现在想知道如果 CPU 时钟发生变化，这个类是否会报告不正确的时序？例如，在根据系统负载改变 CPU 时钟的系统中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:05:18.830

MSDN：

`*The Frequency value depends on the resolution of the underlying timing mechanism. If the installed hardware and operating system support a high-resolution performance counter, then the Frequency value reflects the frequency of that counter. Otherwise, the Frequency value is based on the system timer frequency.*`

Stopwatch.Frequency 的来源不是 CPU 频率。它是高频硬件计数器的频率。在 Windows 上，此计数器频率通常也通过调用[QueryPerformanceCounter 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx)来读取，而在 linux[高分辨率 POSIX 计时器上](http://www.mnis.fr/ocera_support/rtos/x1187.html)用于获得高分辨率计时。

[时间戳计数器](http://en.wikipedia.org/wiki/RDTSC)（RDTSC - CPU 频率）的使用经常在这种情况下讨论，但没有真正的相关性：

一些较旧的硬件可能不提供任何用于计时目的的高频硬件，因此使用 CPU 的频率作为替代。当使用 CPU 频率进行计时时，需要确保频率保持恒定。更现代的硬件提供动态 CPU 频率修改。在动态修改时使用 CPU 频率作为衡量标准会导致一团糟。

幸运的是，这是`non existing`情况。可以修改其 CPU 频率的系统更现代。这种现代系统也确实有一个单独的高频定时器硬件[高精度事件定时器](http://en.wikipedia.org/wiki/High_Precision_Event_Timer)。

有一些关于在多核系统上使用 CPU 频率的传言。事实上，某些硬件存在问题。但那是很久以前的事了，而且已经修复了一段时间。

# dynamic - 需要动态数据网格

> ID：12931738
> 
> 赞同：1
> 
> 时间：2012-10-17T09:58:45.453
> 
> 标签：dynamic, datagrid

我想询问一个根据用户选择动态变化的数据网格。因此，基于数据网格内的用户选择，该数据网格的界面发生了变化，并从数据库中获取了一些新数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T19:53:29.033

你到底在找什么？您可以轻松设置使用组合框的文本框，这将使您可以在数据网格中显示数据，具体取决于从组合框中设置的参数。例如，显示姓氏中有“B”的所有员工。

然而，这将与数据网格无关。

那是你想要的吗？

# python - 使用 lxml 动态创建 xml

> ID：12931742
> 
> 赞同：3
> 
> 时间：2012-10-17T09:58:57.650
> 
> 标签：python, xml, lxml

我没有使用lxml来创建xml，所以我有点迷茫。我可以创建一个函数，创建一个元素：

```
from lxml import etree as ET    
from lxml.builder import E

In [17]: def func():
    ...:     return E("p", "text", key="value")

In [18]: page = (
    ...:     E.xml(
    ...:         E.head(
    ...:             E.title("This is a sample document")
    ...:         ),
    ...:         E.body(
    ...:             func()
    ...:             
    ...:         )
    ...:     )
    ...: )

In [19]: print ET.tostring(page,pretty_print=True)
<xml>
  <head>
    <title>This is a sample document</title>
  </head>
  <body>
    <p key="value">text</p>
  </body>
</xml> 
```

我怎样才能使功能添加多个元素？例如，我想`func(3)`创建 3 个新段落。如果 func 重新生成一个列表，我会得到一个 TypeError。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T10:02:04.887

如果您的函数可以返回多个元素，那么您需要使用[`*`参数语法](http://docs.python.org/reference/expressions.html#calls)将这些元素作为位置参数传递给`E.body()`方法：

```
...
    E.body(
        *func()
    ) 
```

现在`func()`应该返回一个序列：

```
def func(count):
    result = []
    for i in xrange(count):
        result.append(E("p", "text", key="value"))
    return result 
```

# video - ffmpeg：几个音频文件+几个图像= 1个视频？

> ID：12931746
> 
> 赞同：2
> 
> 时间：2012-10-17T09:59:08.167
> 
> 标签：video, ffmpeg, video-encoding

我有大约 500 个音频剪辑和 500 个图像，我需要将它们放在一起用于我正在进行的项目。每个视频都由许多音频剪辑和图像组成。顺序已经由命名设置（audio01.mp3 与 image01.tiff 等一起使用）。它们的文件分为几个文件夹，分别命名为 Chapter1、Chapter2 [...] Chapter12。每个文件夹中的文件数量不同，但每个文件夹中的命名方案相同。

每个图像都需要与其合作伙伴的音频文件具有相同的持续时间。

这样做的最佳方法是什么？我找到了将 1 个图像与 1 个音频文件 (http://stackoverflow.com/questions/5887311/ffmpeg-1-image-1-audio-file-1-video) 或多个图像与一个音频文件放在一起的方法（http://superuser.com/questions/356974/how-to-turn-images-into-a-video-slideshow-with-sound/356982#356982）但没有什么能完全满足我的要求。

我很感激你能给我的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:14:07.750

它都在ffmpeg docs..

对于音频块，我相信你需要原始 pcm。

然后你只需对它们进行分类.. 然后按照从单个图像或一系列图像制作 mpeg/mp4 的示例再次添加图片。

concat 上的关键文档与组合多个 mp4 有关，但它在需要组合的一堆音频输入上以相同的方式工作......

[http://ffmpeg.org/faq.html#How-can-I-concatenate-video-files_003f](http://ffmpeg.org/faq.html#How-can-I-concatenate-video-files_003f)

教派。上面的 3.14.3 是你想要的 4 个音频...

# ios - iOS 6 中的状态栏颜色？

> ID：12931749
> 
> 赞同：10
> 
> 时间：2012-10-17T09:59:32.847
> 
> 标签：ios

有没有办法在 iOS 6 中有这个状态栏？

在以前的 iOS 版本中，它有那个状态栏，但在 iOS 6 中，它似乎跟随导航栏的颜色..

![状态栏](../Images/2075029a18b582231578c50f4e86f7a1.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-22T15:25:51.883

在 iOS 6 中，状态栏颜色现在由导航栏颜色自动确定。具体来说，颜色由导航栏底部像素的平均颜色决定，如下所示：![在此处输入图像描述](../Images/303b46180b00220f35a973fbc83d7b4f.png)

我不确定是否有任何其他方法可以覆盖这个新操作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-17T10:08:02.140

```
[[UIApplication sharedApplication]setStatusBarStyle:UIStatusBarStyleBlackOpaque]; 
```

或者

```
[[UIApplication sharedApplication]setStatusBarStyle:UIStatusBarStyleBlackTranslucent]; 
```

除了默认选项之外还有哪些可用的选项

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T10:07:39.397

您可以通过更改状态栏属性来做到这一点，如下所示：

1-转到您的项目目标。

2-选择摘要点击。

3-转到状态栏部分。

4-根据需要自定义它。

![如何改变](../Images/cc910106f8b882b889f1c5cdacd7566b.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T01:55:09.507

我在 iOS6 中发现，您无法获得灰色的“以前的默认”样式。info.plist 中的所有参数和

```
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault];
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent];
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque]; 
```

任何一种设置都不能在 iOS6 中为您提供浅灰色。在 iOS5 中，

```
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault]; 
```

这正是你所需要的。所以iOS6淘汰了灰条样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T10:09:57.403

我怀疑“默认”在 iOS 6 中不一定是灰色的。

如何将自定义色调设置为灰色？

# eclipse - Maven 依赖项未部署在 Eclipse Tomcat 实例上

> ID：12931750
> 
> 赞同：12
> 
> 时间：2012-10-17T09:59:34.863
> 
> 标签：eclipse, spring, tomcat, maven

我正在使用 Spring Tool Suite 3.1，但在将 Web 应用程序部署到 tomcat 时遇到了一些问题。

当我点击“在服务器上运行”并启动服务器时，它会抛出著名的：

> `java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener`

所以我检查`/wtpwebapps`目录发现项目已部署，但在`lib`文件夹内只有几个库存在。我完全想念他们选择背后的理由。当然没有与spring相关的库。任何人都可以帮忙吗？

这是我的`org.eclipse.wst.common.commonent`文件，也许有用：

```
<?xml version="1.0" encoding="UTF-8"?>
<project-modules id="moduleCoreId" project-version="1.5.0">
<wb-module deploy-name="Checkup">
    <wb-resource deploy-path="/" source-path="/target/m2e-wtp/web-resources"/>
    <wb-resource deploy-path="/" source-path="/WebContent" tag="defaultRootSource"/>
    <wb-resource deploy-path="/WEB-INF/classes" source-path="/src/main/java"/>
    <wb-resource deploy-path="/WEB-INF/classes" source-path="/src/main/resources"/>
    <wb-resource deploy-path="/WEB-INF/classes" source-path="/src/test/java"/>
    <wb-resource deploy-path="/WEB-INF/classes" source-path="/src/test/resources"/>
    <property name="context-root" value="Checkup"/>
    <property name="java-output-path" value="/Checkup/build/classes"/>
</wb-module> 
```

**编辑：**

您可以看到嵌入 STS 安装的 maven 插件列表（无自定义）

![STS Maven 插件](../Images/d2d82499ad66bd263837203491489b2e.png)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-17T10:16:00.513

通过右键单击项目 - 导航到部署程序集，然后添加 maven 依赖项库，将 maven 依赖项添加到部署程序集。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-25T09:32:49.567

经过数小时的痛苦后，似乎借助魔术或其他东西解决了问题。解决问题的“神秘”程序如下：

1.  在tomcat上运行你的项目并得到错误
2.  **当您的项目仍在服务器上**时，清理 tomcat rclick ---> 清理（不是清理工作目录）
***   再次运行服务器**

 **棘手的部分是在仍然部署 Web 应用程序时清理 tomcat。我真的不知道为什么它有效。如果您停止服务器，删除应用程序，清理服务器并再次重新部署应用程序，您会收到错误消息。我不敢再了解了，我接受了这个谜。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-13T23:34:34.283

NimChimpsky 的回答对我来说是正确的解决方案。只是它不是很具体。详细步骤是：右键项目->选择“属性”->搜索“部署程序集”->点击“添加”按钮->添加“Maven Dependent”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-07T22:34:05.163

解决此问题的另一种方法是使用终端（Linux 或 Mac）或命令提示符 (Windows)。导航到项目的文件夹并使用以下命令：

```
mvn eclipse:eclipse -Dwtpversion=2.0 
```

成功执行命令后，将在项目的***.settings***文件夹中创建一个名为***org.eclipse.wst.common.component的新文件。***

 *启动服务器，它应该会自动选择所有依赖库。***

# xslt - 需要将 XML 转换为 JSONX 的通用 xslt

> ID：12931751
> 
> 赞同：1
> 
> 时间：2012-10-17T09:59:36.880
> 
> 标签：xslt, xslt-1.0, jsonx

> **可能重复：**
> [使用 xslt 将 xml 转换为 jsonx](https://stackoverflow.com/questions/12892266/convert-xml-to-jsonx-using-xslt)

任何人都可以帮助我通过数组获取以下内容..我必须生成通用的 xsl .. 输入 XML：

```
<accounts>
    <displayOrdinal>0</displayOrdinal>
    <name>String</name>
    <account>
        <accountNumber>String</accountNumber>
        <name>String</name>
        <balance>
            <balanceAmount>0.0</balanceAmount>
        </balance>
        <balance>
            <balanceAmount>0.0</balanceAmount>
        </balance>
        <properties>
            <displayOrdinal>0</displayOrdinal>
        </properties>
        <properties>
            <displayOrdinal>0</displayOrdinal>
        </properties>
        <usage>
            <type>String</type>
        </usage>
        <usage>
            <type>String</type>
        </usage>
    </account>
    <account>
        <accountNumber>String</accountNumber>
        <name>String</name>
        <balance>
            <balanceAmount>0.0</balanceAmount>
        </balance>
        <balance>
            <balanceAmount>0.0</balanceAmount>
        </balance>
        <properties>
            <displayOrdinal>0</displayOrdinal>
        </properties>
        <properties>
            <displayOrdinal>0</displayOrdinal>
        </properties>
        <usage>
            <type>String</type>
        </usage>
        <usage>
            <type>String</type>
        </usage>
    </account>
</accounts> 
```

输出：

```
<json:object xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
    <json:object name="accounts">
        <json:string name="displayOrdinal">0</json:string>
        <json:string name="name">String</json:string>
        <json:array name="account">
            <json:object>
                <json:string name="accountNumber">String</json:string>
                <json:string name="name">String</json:string>
                <json:array name="balance">
                    <json:object>
                        <json:string name="balanceAmount">0.0</json:string>
                    </json:object>
                    <json:object>
                        <json:string name="balanceAmount">0.0</json:string>
                    </json:object>
                </json:array>
                <json:array name="properties">
                    <json:object>
                        <json:string name="displayOrdinal">0</json:string>
                    </json:object>
                    <json:object>
                        <json:string name="displayOrdinal">0</json:string>
                    </json:object>
                </json:array>
                <json:array name="usage">
                    <json:object>
                        <json:string name="type">String</json:string>
                    </json:object>
                    <json:object name="usage">
                        <json:string name="type">String</json:string>
                    </json:object>
                </json:array>
            </json:object>
            <json:object>
                <json:string name="accountNumber">String</json:string>
                <json:string name="name">String</json:string>
                <json:object name="balance">
                    <json:string name="balanceAmount">0.0</json:string>
                </json:object>
                <json:array name="balance">
                    <json:object>
                        <json:string name="balanceAmount">0.0</json:string>
                    </json:object>
                    <json:object>
                        <json:string name="displayOrdinal">0</json:string>
                    </json:object>
                    <json:object>
                        <json:string name="displayOrdinal">0</json:string>
                    </json:object>
                </json:array>
                <json:array name="usage">
                    <json:object>
                        <json:string name="type">String</json:string>
                    </json:object>
                    <json:object>
                        <json:string name="type">String</json:string>
                    </json:object>
                </json:array>
            </json:object>
        </json:array>
    </json:object>
</json:object> 
```

我正在使用下面的 xslt 和输出，但没有像上面预期的那样。任何人都可以帮助我。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
        <xsl:output method="xml" indent="yes" encoding="UTF-8" omit-xml-declaration="yes"/>
        <xsl:strip-space elements="*"/>
        <!-- Array -->
        <xsl:template match="*[*[2]][name(*[1])=name(*[2])]">
            <json:object name="{name()}">
                <json:array name="{name(*[1])}">
                    <xsl:apply-templates/>
                </json:array>
            </json:object>
        </xsl:template>
        <!-- Array member -->
        <xsl:template match="*[parent::*[ name(*[1])=name(*[2]) ]] | /">
            <json:object>
                <xsl:apply-templates/>
            </json:object>
        </xsl:template>
        <!-- Object -->
        <xsl:template match="*">
            <json:object name="{name()}">
                <xsl:apply-templates/>
            </json:object>
        </xsl:template>
        <!-- String -->
        <xsl:template match="*[not(*)]">
            <json:string name="{name()}">
                <xsl:value-of select="."/>
            </json:string>
        </xsl:template>
    </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:56:21.790

可能你的意思是说 Groups 应该是一个数组， Group 应该是一个对象，而不是相反？

**尝试这个...**

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx"
  exclude-result-prefixes="xsl xs">
<xsl:output indent="yes" encoding="UTF-8" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" /> 

<xsl:template match="/">
  <json:object>
     <xsl:apply-templates />    
  </json:object>
</xsl:template>

<!-- Array -->
<xsl:template match="*[*[2]][name(*[1])=name(*[2])]">
  <json:array name="{name()}">
    <xsl:apply-templates />
  </json:array>
</xsl:template>

<!-- Object -->  
<xsl:template match="*">
  <json:object name="{name()}">
    <xsl:apply-templates />
  </json:object>
</xsl:template>

<!-- String -->
<xsl:template match="*[not(*)]">
  <json:string name="{name()}">
    <xsl:value-of select="." />
  </json:string>
</xsl:template>
</xsl:stylesheet> 
```

**...输出是这样的...**

```
<json:object xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
   <json:object name="Login">
      <json:array name="Groups">
         <json:object name="Group">
            <json:string name="Name">john</json:string>
            <json:string name="Password"/>
         </json:object>
         <json:object name="Group">
            <json:string name="Name">john</json:string>
            <json:string name="Password"/>
         </json:object>
      </json:array>
   </json:object>
</json:object> 
```

* * *

# 更新

为了响应 OP 的更新要求，这里有一个新的解决方案。

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
<xsl:output indent="yes" encoding="UTF-8" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" /> 

<!-- Array -->
<xsl:template match="*[*[2]][name(*[1])=name(*[2])]">
  <json:object name="{name()}">
    <json:array name="{name(*[1])}">
      <xsl:apply-templates />
    </json:array>
  </json:object>
</xsl:template>

<!-- Array member -->  
<xsl:template match="*[parent::*[ name(*[1])=name(*[2]) ]] | /">
  <json:object>
    <xsl:apply-templates />
  </json:object>
</xsl:template>

<!-- Object -->  
<xsl:template match="*">
  <json:object name="{name()}">
    <xsl:apply-templates />
  </json:object>
</xsl:template>

<!-- String -->
<xsl:template match="*[not(*)]">
  <json:string name="{name()}">
    <xsl:value-of select="." />
  </json:string>
</xsl:template>
</xsl:stylesheet> 
```

输出太...

```
<json:object xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
  <json:object name="Login">
    <json:object name="Groups">
      <json:array name="Group">
        <json:object>
          <json:string name="Name">john</json:string>
          <json:string name="Password"></json:string>
        </json:object>
        <json:object>
          <json:string name="Name">john</json:string>
          <json:string name="Password"></json:string>
        </json:object>
      </json:array>
    </json:object>
  </json:object>
</json:object> 
```

# r - Svm 建模 :: Error in which.max(votematrix[, x]) : subscript out of bounds

> ID：12931754
> 
> 赞同：1
> 
> 时间：2012-10-17T09:59:39.507
> 
> 标签：r, svm, prediction

有一个分类问题，我在 R 中使用 SVM 进行预测。在数据集中，有整数和分类变量。使用 predict 方法进行预测时出现错误。

```
 svp3c <- ksvm(input_dataset3$isCRgt3~., data=input_dataset3,type="C-svc")
    p3<-predict(svp3c,newdata=input_dataset_prediction[,-1],type="response")

    error :: Error in which.max(votematrix[, x]) : subscript out of bounds 
```

对于这个建模

第一：使用训练数据集开发模型

第二：保存和加载模型以在测试数据集上进行预测

```
Training Dataset sample

Headning :
head1(int),head2(character-url),head3(character-url),head4(character-url),head5(character),head6(character),haed7(int),head8(int),head9(int),head10(int),head11(int)

Data:    
"0","10","/","/index.php?main_page=logoff","(not set)","rc317a","organic","0","4","20092","5023","0"
"1","11","/","/offwhite-churidar-kameez-set-p-17381.html","(not set)","rc317a","organic","0","4","20092","5023","0" 
```

[下载样本数据集] [http://www.2shared.com/file/tQRapbBt/input_dataset3.html](http://www.2shared.com/file/tQRapbBt/input_dataset3.html)

【重现R脚本】[http://www.2shared.com/file/NpDs5V-9/data1_train.html](http://www.2shared.com/file/NpDs5V-9/data1_train.html)

任何人都可以提出建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T22:38:56.523

我在使用不同的数据集时遇到了同样的问题。我首先注意到 predict 返回的预测少于测试用例。事实证明，测试数据框中的整数变量之一包含 NA。将 NA 更改为 -1 消除了该错误。
TBC - 我没有考虑过将变量设置为 -1 的含义，但它已经消除了错误，现在得到了正确数量的预测。

# sql - 由于复制表中不推荐使用的数据类型，触发器不起作用

> ID：12931756
> 
> 赞同：0
> 
> 时间：2012-10-17T09:59:49.010
> 
> 标签：sql, sql-server, triggers, merge-replication

我的 SQL Server 2005 数据库中有一个表，其中有一个数据类型为 NTEXT 的字段。该表在具有大量 SQLCE 订阅的合并复制中进行复制。

我试图在`ON INSERT`这个表中添加一个触发器来处理 NTEXT 字段。但我得到了这个错误：

```
Cannot use text, ntext, or image columns in the 'inserted' and 'deleted' tables. 
```

在我的研究中，我发现一些帖子不推荐使用 NTEXT，我应该更改为 NVARCHAR(MAX)。但是如果不重新创建快照，我就无法做到这一点，这对于使用设备的人来说是一个相当大的问题（因为数据量和时间）。

插入触发器是否有解决方法来处理数据类型？

这是引发错误的地方：

```
DECLARE c1 CURSOR FOR SELECT ControlValue FROM INSERTED 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:36:28.823

您可以通过从基础表中读取数据并加入 INSERTED 来做到这一点。

这是解决方法：

```
DECLARE c1 CURSOR FOR SELECT t.ControlValue 
from INSERTED i 
  INNER JOIN TableName t on i.PrimaryKey = t.PrimaryKey 
```

本质上，您需要将`inserted`and/or`deleted`伪表连接到基础表中，并从基础表中读取`NTEXT`, `TEXT`or`IMAGE`数据。

# php - 如何使用 php 生成 csv excel 表，以便我可以使用一些样式，例如 font-size 和 font-color

> ID：12931758
> 
> 赞同：0
> 
> 时间：2012-10-17T09:59:50.340
> 
> 标签：php, excel, csv

我想`CSV`使用`php`. 我能够生成简单的`CSV`文件，但我想为标题动态设置字体大小和字体颜色。我找到了一些图书馆，但那些都达不到标准。

这是我可以生成简单 CSV 文件的代码

```
$fp = fopen(FCPATH .'assets/' . $filename,'w');
$content = "";

foreach ($query_pairs->result() as $pair) {
    $content .= '<th>' . @$users[$pair->uid1]->name . '</th>' . $sep . ' ' . @$users[$pair->uid2]->name . PHP_EOL;
}

fwrite($fp,$content);
fclose($fp);

header("Content-type: application/vnd.ms-excel");
header("Content-Disposition: attachment; filename=".$filename);
header("Pragma: no-cache");
header("Expires: 0");

readfile(FCPATH .'assets/' . $filename); 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:07:08.763

恐怕那是不可能的。

根据定义，CSV 仅包含数据。我很抱歉承受这个坏消息，但永远不会有办法做你试图用 CSV 做的事情。

您*可以*做的，有一些限制，就是将 HTML 导出到 Excel。这通常在没有 Excel 库的情况下完成。

但是对于 PHP，有一些方法可以生成 Excel 文件。例如，请参见： [http ://code.google.com/p/php-excel/](http://code.google.com/p/php-excel/)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T10:11:10.260

为什么不使用可以实际生成 Excel 文件的[众多 PHP 库](https://stackoverflow.com/questions/3930975/alternative-for-php-excel)之一创建真正的 Excel 文件（BIFF 或 OfficeOpenXML 格式，您可以选择），而不是简单的 HTML 标记或伪装成 Excel 的 CSV

# arraylist - 谷歌电子表格数组长度各不相同。在较短的数组计算之后，我剩下 -

> ID：12931765
> 
> 赞同：1
> 
> 时间：2012-10-17T10:00:09.640
> 
> 标签：arraylist, spreadsheet

在谷歌电子表格中，我的数组长度会有所不同。在计算较短的输入并将其放入数组中或者如果我完全清除输入后，我会留下 -- 或双破折号。

```
Ex.formula   =iferror(if(E10="",transpose(split(upper(D1),",")),query(vlist)),"") 
```

以上将从 E10 或 D1 获取输入。如果我清除了某些单元格中留下的所有输入--。如果计算较短的输入，我还剩下 -- 在以前较长的数组位置。

1.  有什么办法可以消除 -- 出现在细胞中的可能性吗？
2.  也许我最初的问题应该是，**固定数组如何忽略空值而不输出 - 或双破折号。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:04:21.960

我也一直在为此苦苦挣扎。现在我在[这个论坛答案](http://productforums.google.com/d/msg/docs/1hEWTjYTJBQ/7JgaSQjREWcJ)中找到了解决方法。

解决方法不是`--`直接抑制，而是在*使用此数据*的单元格中处理它们。您可以使用函数处理它们`ARRAYFORMULA(IFERROR(`。

我意识到，如果您有**多个**使用这些数据的单元格，而不是更改所有这些单元格，更舒适的方法是

*   在工作表的其他位置创建一个（不可见的？）“助手”数组，您可以将创建`--`
*   在您最初拥有公式的单元格中应用解决方法。

例子：

单元格`A1`包含（如果第 2 页上的列中唯一值的数量减少`=SORT(UNIQUE(Sheet2!X:X))`，最终会导致`--`单元格`A2`, ,... ）。`A3``X`

解决方法：使用您的公式`=SORT(UNIQUE(Sheet2!X:X))`，例如在单元格中`B1`并`=ARRAYFORMULA(IFERROR(B:B))`放入`A1`.

# c# - C# 和读取大型 XML 文件

> ID：12931769
> 
> 赞同：12
> 
> 时间：2012-10-17T10:00:32.687
> 
> 标签：c#, xml

我知道，我知道这已经被做死了；我只是发布一个问题，看看这个解决方案是否仍然相关，因为现在我们有 .NET 4 和更新版本

[此链接](https://bratched.com/en/2010/05/19/linq-to-xml-and-reading-large-xml-files/)解释了一种读取大型 XML 文件的简单方法，它实现了 Linq。我非常喜欢这个，只是想要一个简单的答案来说明这是否仍然相关，或者在较新的 .NET 代码中是否有更好的实现。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-05-19T06:29:37.657

如果看起来像这样：

```
<root>
    <item>...</item>
    <item>...</item>
    ...
</root> 
```

您可以像这样读取文件`XmlReader`并打开每个“项目” `XmlDocument`：

```
reader.ReadToDescendant("root");
reader.ReadToDescendant("item");

do
{
    XmlDocument doc = new XmlDocument();
    doc.LoadXml(reader.ReadOuterXml());
    XmlNode item = doc.DocumentElement;

    // do your work with `item`
}
while (reader.ReadToNextSibling("item"));

reader.Close(); 
```

在这种情况下，您对文件大小没有限制。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-17T10:07:33.707

这个问题的答案在 .NET 4 中没有改变——为了获得最佳性能，您仍然应该使用[XmlReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)，因为它将文档*流*式传输而不是将整个内容加载到内存中。

您引用的代码`XmlReader`用于实际查询，因此在大型文档上应该相当快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:17:11.753

[最好的方法是使用XmlReader.Create](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.create.aspx)逐行读取。

```
var reader = XmlReader.Create(filename);
reader.WhitespaceHandling = WhitespaceHandling.None;
while (reader.Read())
{
    // your code here.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-30T12:44:26.303

过去几天我一直在努力解决同样的问题。我只需**右键单击**项目**属性**，然后导航到**Build 选项卡**并选择选项**Any CPU**，勾选**取消选中**选项**Prefer 32 Bit**并在运行您的应用程序之前保存它，它对我有帮助。我附上了相同的快照。 [![在此处输入图像描述](../Images/1efc74a00ade9d7293405b320f5d449e.png)](https://i.stack.imgur.com/QzOZF.png)

# mysql - MySQL CONCAT '*' 符号向数据库敬酒

> ID：12931771
> 
> 赞同：3
> 
> 时间：2012-10-17T10:00:50.223
> 
> 标签：mysql, join, concat, reserved-words

我有一个用于查找的表，它将人类可读的值存储在一个列中，并且在另一列中存储了相同的文本，其中删除了特殊字符和空格。例如，值“Children's Shows”将在查找列中显示为“childrens-shows”。

不幸的是，对应的主表并不是那么简单——由于历史原因，我没有自己创建，现在很难撤消，查找值实际上是用周围的星号存储的，例如'*childrens-shows*'。

因此，在尝试将无星号的查找表与具有星号的主表连接时，我认为 CONCAT 会帮助我即时添加它们，例如；

```
 SELECT * 
      FROM main_table m 
INNER JOIN lookup_table l 
        ON l.value = CONCAT('*',m.value,'*') 
```

……然后桌子就烤好了。不确定我是创建了一个无限循环还是真的搞砸了数据，但它需要一个 ISP 备份才能让表再次响应。我怀疑这是因为“*”符号可能是保留的，就像通配符一样，我已经要求数据库做相当于舔自己的肘部的事情。无论哪种方式，鉴于它设法杀死数据库的壮观方式，我都不愿“实验”以找到答案。

提前感谢任何可以（a）告诉我上面对数据库实际做了什么，以及（b）我应该如何实际加入表格的人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:18:01.800

使用 CONCAT 时，mysql 不会使用索引。使用 EXPLAIN 来检查这一点，但我最近遇到的一个问题是，在一张大表上，索引列在那里，但没有使用键。然而，这不应该让整个桌子感到厌烦，只是让它变慢。可能它内存不足，开始交换，然后中途崩溃，但您需要检查日志才能找到答案。

然而，根本原因显然是糟糕的表格设计，而这正是解决方案所在。您得到的任何可以解决此问题的答案最多只能是暂时的。

最佳解决方案是将这些数据移动到单独的表中。“儿童节目”听起来像是一个类别，因此在许多行中重复数据。这实际上应该是“类别”表的 id，这将防止数据库必须在表中的每一行上运行 CONCAT，因为您可以这样做：

```
 SELECT * 
      FROM main_table m 
INNER JOIN lookup_table l 
        ON l.value = m.value
   /* and optionally */
INNER JOIN categories cat
        ON l.value = cat.id
     WHERE cat.name = 'whatever' 
```

我知道鉴于您在问题中提供的信息，您可能无法做到这一点，但实际上无法对严重规范化的数据库进行此类更改的原因比此处的代码更重要。如果没有资源或政治支持以正确的方式做事，你最终会遇到更多这样的麻烦，从长远来看，这最终会花费更多。也许是时候和老板谈谈了：）

# jquery - 使用多个 jQuery 选择器？

> ID：12931778
> 
> 赞同：0
> 
> 时间：2012-10-17T10:01:14.350
> 
> 标签：jquery, selector

这是我的示例代码：

```
<input type="text" id="input1" />
<input type="text" id="input2" />

<div id="result"></div> 
```

在 jQuery 中，我想听听两个输入的变化，如下所示：

```
$('#input1,#input2').change(function(){

var val1 = $('#input1').val();
var val2 = $('#input2').val();

[...some more code...]

}); 
```

但我就是无法让它工作......有什么帮助吗？提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T10:04:46.360

什么不起作用？见[http://jsfiddle.net/XYSwz/](http://jsfiddle.net/XYSwz/)

html

```
<input type="text" id="input1" />
<input type="text" id="input2" />
<div id="result"></div>​ 
```

jQuery

```
$(document).ready(function() {
    $('#input1, #input2').change(function(){
        var val1 = $('#input1').val();
        var val2 = $('#input2').val();

        alert(val1);
        alert(val2);
    });​
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:04:45.733

试试这个代码：

```
$(document).ready(function() {
  $('#input1,#input2').change(function(){
    var val1 = $('#input1').val();
    var val2 = $('#input2').val();
     alert(val1);//test
     alert(val2);//test
  });
}); 
```

[JSFIDDLE](http://jsfiddle.net/Rj6FV/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:05:07.483

您的代码应该按原样运行。

您可以随时尝试该`add()`功能：

```
$(function() {
    $('#input1').add('#input2').change(function() {
        var val1 = $('#input1').val();
        var val2 = $('#input2').val();

    });
}); 
```

如果您的元素是动态创建的，则需要使用`on()`or`live()`函数：

```
$(function() {
    $('#input1').add('#input2').on('change', function() {
        var val1 = $('#input1').val();
        var val2 = $('#input2').val();

    });
}); 
```

# svn - 仅处理更改的文件

> ID：12931786
> 
> 赞同：5
> 
> 时间：2012-10-17T10:01:34.240
> 
> 标签：svn, jenkins

**内容：**
使用 jenkins，我只想定期处理来自 SVN 的更改文件，并将处理的输出提交回 SVN。

**原因：**
我们正在将二进制文件提交到 SVN（我们正在使用 Oracle Forms 并正在提交 fmb-Files）。我创建了一个将 fmb 导出为 xml 的脚本（使用 Oracle 的原始 Fmb2XML 工具），然后我将 XML 转换为我们也想要提交的纯源代码。这使我们能够 greping，查看更改，....

**问题：**
目前我只能检查所有内容，转换整个目录并将整个目录提交回 SVN。但由于所有纯文本文件都是新生成的，它们在 SVN 中似乎发生了变化。我只想提交更改的内容。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T17:10:28.247

我安装了 Groovy 插件，配置了 Groovy 语言并创建了一个脚本，我将其作为“系统 Groovy 脚本”执行。脚本如下所示：

```
import java.lang.ProcessBuilder.Redirect

import hudson.model.*
import hudson.util.*
import hudson.scm.*
import hudson.scm.SubversionChangeLogSet.LogEntry

// uncomment one of the following def build = ... lines

// work with current build
def build = Thread.currentThread()?.executable

// for testing, use last build or specific build number
//def item = hudson.model.Hudson.instance.getItem("Update_SRC_Branch") 
//def build = item.getLastBuild()   
//def build = item.getBuildByNumber(35)   

// get ChangesSets with all changed items
def changeSet= build.getChangeSet()
List<LogEntry> items = changeSet.getItems()

def affectedFiles = items.collect { it.paths }

// get filtered file names (only fmb) without path
def fileNames = affectedFiles.flatten().findResults {
    if (it.path.substring(it.path.lastIndexOf(".") + 1) != "fmb") return null
    it.path.substring(it.path.lastIndexOf("/") + 1)
}.sort().unique()

// setup log files
def stdOutFile = "${build.rootDir}\\stdout.txt"
def stdErrFile = "${build.rootDir}\\stderr.txt"

// now execute the external transforming
fileNames.each {
    def params = [...]
    def processBuilder = new ProcessBuilder(params)

    // redirect stdout and stderr to log files
    processBuilder.redirectOutput(new File(stdOutFile))
    processBuilder.redirectError(new File(stdErrFile))

    def process = processBuilder.start()
    process.waitFor()

    // print log files
    println new File(stdOutFile).readLines()
    System.err.println new File(stdErrFile).readLines()
} 
```

之后我使用带有“svn commit”的命令行来提交更新的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T17:25:57.027

**初步说明：在 SVN 行话中***从 repo*获取文件是“checkout”，保存*到 repo* - “commit”。不要混合 CVS 和 SVN 术语，这可能会导致误解

为了获得修订（或修订）中更改文件的列表，您可以使用

*   简单的方法 -`svn log`有选项`-q -v`。对于单个修订，您还添加 -c REVNO，对于修订范围：-r REVSTART:REVEND。可能额外的 --xml 会产生比纯文本更合适的输出

您必须对日志的输出进行后处理才能获得纯列表，因为：日志包含一些对您无用的数据，如果是范围日志，您可以将同一文件包含在多个修订版中

```
z:\>svn log -q -v -r 1190 https://subversion.assembla.com/svn/customlocations-greylink/
------------------------------------------------------------------------
r1190 | lazybadger | 2012-09-20 13:19:45 +0600 (Чт, 20 сен 2012)
Changed paths:
   M /trunk/Abrikos.ini
   M /trunk/ER-Telecom.ini
   M /trunk/GorNet.ini
   M /trunk/KrosLine.ini
   M /trunk/Rostelecom.ini
   M /trunk/Vladlink.ini
------------------------------------------------------------------------ 
```

单个修订的示例：您必须`log | grep trunk | sort -u`将 repo-base 添加到文件名

*   更难的方法：使用额外的 SCM（即 - Mercurial）和 hgsubversion，您将获得更多（也许）日志`hg log --template "{files}\n"`- 只是因为您只会获得文件列表，但不同修订版中的文件集是换行符分隔的，修订版内的文件名是*空格*- 分离的

# c++ - C++11 STL 容器和线程安全

> ID：12931787
> 
> 赞同：47
> 
> 时间：2012-10-17T10:01:34.270
> 
> 标签：c++, multithreading, stl, c++11

我很难找到有关此的任何最新信息。

C++11 版本的 STL 容器是否保证了一定程度的线程安全？

由于性能原因，我确实希望他们不会。但是话又说回来，这就是我们同时拥有[`std::vector::operator[]`](http://en.cppreference.com/w/cpp/container/vector/operator_at)和的原因[`std::vector::at`](http://en.cppreference.com/w/cpp/container/vector/at)。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-17T16:08:36.570

由于现有的答案没有涵盖它（只有评论），我只提到当前[C++ 标准规范](http://isocpp.org/std/the-standard)的 23.2.2 [container.requirements.dataraces]说：

> 当同一序列中不同元素中包含的对象的内容`vector<bool>`被同时修改时，需要实现来避免数据竞争。

即访问同一容器的不同元素是安全的，例如，您可以拥有一个`std::vector<std::future<int>>`包含十个元素的全局元素，并拥有十个线程，每个线程都写入向量的不同元素。

除此之外，与标准库的其余部分相同的规则适用于容器（参见 17.6.5.9 [res.on.data.races]），正如[C64 先生的回答](https://stackoverflow.com/a/12931932/981959)所说，另外还有 [container.requirements.dataraces]列出了可以安全调用的容器的一些非常量成员函数，因为它们只返回对元素的非常量引用，它们实际上并不修改任何东西（通常任何非常量成员函数都必须被视为修改。）

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-17T10:08:38.350

我认为 STL 容器提供以下基本的线程安全保证：

*   *同时读取*同*一个*对象是可以的

*   **不同*对象的*同时读/写*是可以的*

 *但是，如果您想做一些不同的事情，例如同时写入同一个对象，您必须使用某种形式的自定义同步（例如关键部分）。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2012-10-17T10:09:13.660

不可以。查看 PPL 或 Intel TBB 以了解线程安全的类似 STL 的容器。

就像其他人指出的那样，他们通常具有“多阅读器线程安全”，但这甚至是 C++11 之前的情况。Ofc 这并不意味着单个作者多个读者。这意味着 0 个作家。:)*

# c++ - 关于 uLinux 奇怪行为的 gettimeofday

> ID：12931788
> 
> 赞同：0
> 
> 时间：2012-10-17T10:01:36.750
> 
> 标签：c++

最近我一直在尝试使用挂钟作为参考创建一个等待 25 毫秒的等待函数。我环顾四周，发现“gettimeofday”，但我一直遇到问题。我的代码（简化）：

```
while(1)
{
    timeval start, end;
    double t_us;
    bool release = false;    
    while (release == false)
    {
        gettimeofday(&start, NULL);

        DoStuff();

        {
            gettimeofday(&end, NULL);
            t_us = ( (end.tv_sec - start.tv_sec) * 1000*1000) + (end.tv_usec - start.tv_usec);

            if (t_us >= 25000) //25 ms
            {
                release = true;
            }
        }
    }
} 
```

此代码在线程 (Posix) 中运行，并且就其本身而言，工作正常。DoStuff() 每 25 毫秒调用一次。但是，如果可以（如您所料），它确实会吃掉所有的 CPU，所以显然这不是一个好主意。

当我尝试通过添加 Sleep(1) 来限制它时；在 if 语句之后的等待循环中，整个事情减慢了大约 50%（也就是说，它每 37 毫秒左右调用一次 DoStuff。这对我来说毫无意义 - 假设 DoStuff 和任何其他线程在 (25 - 1) ms DoStuff 的调用率不应受到影响（允许 1ms 误差范围）

我还尝试了 Sleep(0)、usleep(1000) 和 usleep(0)，但行为是相同的。

每当另一个更高优先级的线程需要 CPU 时间（没有睡眠）时，都会发生相同的行为。就好像当线程重新启动运行时时钟停止计数一样。

我知道 gettimeofday 容易受到 NTP 更新等的影响...所以我尝试使用 clock_gettime 但在我的系统上链接 -ltr 会导致问题，所以我认为这不是一个选项。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:11:45.670

这里缺少的部分是内核如何基于时间片进行线程调度。在粗略的数字中，如果您在时间片开始时休眠 1 毫秒并且调度以 35 毫秒的时钟速率完成，那么您的线程可能不会在 35 毫秒内再次执行。如果你休眠 40 毫秒，你的线程可能在 70 毫秒内不会再次执行。如果不更改调度，您无法真正更改它，但由于系统的整体性能影响，不建议这样做。您可以使用“高分辨率”计时器，但通常这是在“还没有到时候，咀嚼 CPU”的紧密循环浪费循环中实现的，所以这也不是真正可取的。

如果您使用高分辨率时钟并在 DoStuff 循环中频繁查询它，您可能会玩一些技巧，例如运行 30 毫秒，然后执行 sleep(1)，这可以有效地在剩余时间片内放弃您的线程（例如5ms) 让其他线程运行。如果你愿意的话，一种合作/先发制人的多任务处理。不过，您仍然有可能在很长一段时间内无法恢复工作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:56:11.310

sleep()/usleep() 的所有变体都涉及将 CPU 让给其他可运行任务。然后，您的程序只能在内核重新调度后才能运行，在您的情况下，这似乎持续约 37 毫秒。

# android - java.io.IOException：在 ICS 4.0.3 中收到的身份验证质询为空

> ID：12931791
> 
> 赞同：6
> 
> 时间：2012-10-17T10:01:37.423
> 
> 标签：android, httpurlconnection

我正在尝试从服务器注销。但它返回“0”响应代码，但有此异常。我正在使用 GET 动词来执行此操作。

**日志猫**

```
10-17 14:54:13.261: W/System.err(868): java.io.IOException: Received authentication challenge is null
10-17 14:54:13.284: W/System.err(868):  at libcore.net.http.HttpURLConnectionImpl.processAuthHeader(HttpURLConnectionImpl.java:397)
10-17 14:54:13.284: W/System.err(868):  at libcore.net.http.HttpURLConnectionImpl.processResponseHeaders(HttpURLConnectionImpl.java:345)
10-17 14:54:13.304: W/System.err(868):  at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:276)
10-17 14:54:13.324: W/System.err(868):  at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:479)
10-17 14:54:13.324: W/System.err(868):  at com.remote.synchronizer.haris.CustomHttpClient.executeGet(CustomHttpClient.java:131)
10-17 14:54:13.354: W/System.err(868):  at com.remote.synchronizer.haris.OptionsActivity$1$3$1.run(OptionsActivity.java:87)
10-17 14:54:13.364: W/System.err(868):  at android.os.Handler.handleCallback(Handler.java:605)
10-17 14:54:13.384: W/System.err(868):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-17 14:54:13.384: W/System.err(868):  at android.os.Looper.loop(Looper.java:137)
10-17 14:54:13.404: W/System.err(868):  at android.app.ActivityThread.main(ActivityThread.java:4424)
10-17 14:54:13.424: W/System.err(868):  at java.lang.reflect.Method.invokeNative(Native Method)
10-17 14:54:13.424: W/System.err(868):  at java.lang.reflect.Method.invoke(Method.java:511)
10-17 14:54:13.454: W/System.err(868):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-17 14:54:13.474: W/System.err(868):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-17 14:54:13.474: W/System.err(868):  at dalvik.system.NativeStart.main(Native Method)
10-17 14:54:13.484: E/HTTP Response(868): java.io.IOException: Received authentication challenge is null 
```

**CustomHttpClient.java**

```
public class CustomHttpClient {

    static HttpClient client = new DefaultHttpClient();
    static HttpURLConnection connection = null; 

    public static int executePost(String url, String postParameters)
    {
        int response=0;

        OutputStream output = null;
        try
        {
            connection = (HttpURLConnection)new URL(url).openConnection();
            System.setProperty("http.keepAlive", "false");
            connection.setDoOutput(true);
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Accept-Charset", "UTF-8");
            connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");

            connection.connect();

            output = connection.getOutputStream();
            output.write(postParameters.getBytes("UTF-8"));

            response=connection.getResponseCode();
        }
        catch(Exception e)
        {
            e.printStackTrace();
            Log.e("HTTP Response", e.toString());
        }
        finally {
            if(connection != null) {
                //  connection.disconnect(); 
                if (output != null) 
                    try { output.close(); } 
                catch (IOException logOrIgnore) {}
            }
        }

        return response;
    }

    public static int executeGet(String url)
    {
        int response=0;

        //HttpURLConnection connection = null;
        try
        {
            connection = (HttpURLConnection) new URL(url).openConnection();
            System.setProperty("http.keepAlive", "false");
            //connection.setRequestProperty("Accept-Charset", "UTF-8");
            connection.setDoInput(true);
            connection.setRequestMethod("GET");
            connection.connect();
            response=connection.getResponseCode();
        } 
        catch(Exception e)
        {
            e.printStackTrace();
            Log.e("HTTP Response", e.toString());
        }
        finally {
            if(connection != null) {
                //  connection.disconnect();
            }
        }
        return response;
    }

} 
```

在此之前，我在 Gingerbird 2.3 中使用 DefaultHTTPClient，它运行良好，但在 ICS DefaultHTTPClient 中不起作用，所以我需要使用 HttpURLConnection。POST 动词工作正常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T13:48:53.693

如果您在连接对象上第二次调用 .getResponseCode() ，您可以获得异常后的响应代码。这是因为第一次调用 .getResponseCode() 时会设置一个内部状态，使 .getResponseCode() 能够返回而不抛出异常。

例子：

```
HttpURLConnection connection = ...;
try {
    // Will throw IOException if server responds with 401.
    connection.getResponseCode(); 
} catch (IOException e) {
    // Will return 401, because now connection has the correct internal state.
    int responsecode = connection.getResponseCode(); 
} 
```

我也在这里回答了这个问题：[https ://stackoverflow.com/a/15972969/816017](https://stackoverflow.com/a/15972969/816017)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T11:40:52.343

`HttpURLConnection.getResponseCode()``java.io.IOException: Received authentication challenge is null`遇到格式错误的 HTTP 401 标头时抛出。除了标头之外，您还从服务器接收`WWW-Authenticate`标头吗？请参阅[IOException：“收到的身份验证质询为空”（Apache Harmony/Android）](https://stackoverflow.com/questions/1357372/ioexception-received-authentication-challenge-is-null-apache-harmony-android)`Content-Length``HTTP/1.1 401 Unauthorized`

如果您无法对服务器进行更改，那么您可以捕获该异常（感谢[https://stackoverflow.com/a/10904318/262462](https://stackoverflow.com/a/10904318/262462)）

```
try {
    response=connection.getResponseCode();
}
catch (java.io.IOException e) {
    if (e.getMessage().contains("authentication challenge")) {
        response = HttpsURLConnection.HTTP_UNAUTHORIZED;
    } else { throw e; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-03T17:58:09.263

发生此错误是因为服务器发送了 401（未经授权）但没有给出“WWW-Authenticate”，这是提示客户端下一步该做什么。“WWW-Authenticate”标头告诉客户端需要哪种身份验证（[Basic](http://en.wikipedia.org/wiki/Basic_access_authentication)或[Digest](http://en.wikipedia.org/wiki/Digest_access_authentication)）。这在无头 http 客户端中通常不是很有用，但这就是标准的定义方式。发生错误是因为 lib 尝试解析“WWW-Authenticate”标头但不能。

如果您可以更改服务器，可能的解决方案：

*   添加一个假的“WWW-Authenticate”标头，例如：`WWW-Authenticate: Basic realm="fake"`. 这只是一种解决方法而不是解决方案，但它应该可以工作并且http客户端很满意。
*   使用 HTTP 状态代码`403`而不是`401`. 它的语义是不一样的，通常在使用登录 401 时是一个正确的响应（[详细讨论请参见此处](https://stackoverflow.com/questions/3297048/403-forbidden-vs-401-unauthorized-http-responses)），但它足够接近。

如果您无法更改服务器，可能的解决方案：

正如@ErikZ 在他[的帖子](https://stackoverflow.com/questions/12931791/java-io-ioexception-received-authentication-challenge-is-null-in-ics-4-0-3)中所写，您可以使用 try&catch

```
HttpURLConnection connection = ...;
try {
    // Will throw IOException if server responds with 401.
    connection.getResponseCode(); 
} catch (IOException e) {
    // Will return 401, because now connection has the correct internal state.
    int responsecode = connection.getResponseCode(); 
} 
```

我还在这里发布了这个：[java.io.IOException：未找到身份验证挑战](https://stackoverflow.com/questions/17121213/java-io-ioexception-no-authentication-challenges-found/21534175#21534175)

# c# - 如何在 C# 程序中将 CSV 文件表示为数据结构

> ID：12931794
> 
> 赞同：0
> 
> 时间：2012-10-17T10:01:45.343
> 
> 标签：c#, data-structures

我有一个要从磁盘读取的 csv 文件。我不知道前面有多少列或列的名称。
关于我应该如何代表这些领域的任何想法。理想情况下，我想说的是，

字符串 Val = DataStructure.GetValue(i,ColumnName)。
其中 i 是第 i 行。

哦，顺便说一句，我将使用 TextFieldParser 类
[http://msdn.microsoft.com/en-us/library/cakac7e6(v=vs.90).aspx进行解析](http://msdn.microsoft.com/en-us/library/cakac7e6(v=vs.90).aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:08:23.253

这听起来好像你需要 a [`DataTable`](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)which has a `Rows`and`Columns`属性。

所以你可以说：

```
string Val = table.Rows[i].Field<string>(ColumnName); 
```

A`DataTable`是内存数据表。它可以用于强类型（如该`Field`方法所建议的那样），但实际上它在内部将其数据存储为对象。

您可以使用[此解析器](http://www.codeproject.com/Articles/11698/A-Portable-and-Efficient-Generic-Parser-for-Flat-F)将 csv 转换为 DataTable。

**编辑**：我刚刚看到你想使用[`TextFieldParser`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx). 这是将 csv 转换为 a 的一种可能的简单方法`DataTable`：

```
var table = new DataTable();
using (var parser = new TextFieldParser(File.OpenRead(path)))
{
    parser.Delimiters = new[]{","};
    parser.HasFieldsEnclosedInQuotes = true;
    // load DataColumns from first line 
    String[] headers = parser.ReadFields();
    foreach(var h in headers)
            table.Columns.Add(h);
    // load all other lines as data '
    String[] fields;
    while ((fields = parser.ReadFields()) != null)
    {
        table.Rows.Add().ItemArray = fields;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:07:32.893

如果列名在第一行，则读取并存储在`Dictionary<string, int>`将列名映射到列索引的 a 中。

然后，您可以将剩余的行存储在一个简单的结构中，例如`List<string[]>`.
要获得一行的列，你会做`csv[rowIndex][nameToIndex[ColumnName]];`

`nameToIndex[ColumnName]`从名称中获取列索引，`csv[rowIndex]`获取我们想要的行（字符串数组）。

这当然可以包含在一个类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:08:13.303

如果您愿意，可以使用 csv 解析器，但如果您需要自定义，文本解析器很容易自己完成。

对于您的需要，我会使用一个（或多个）字典。至少有一个具有 PropertyString --> 列索引。如果需要，也许是反向一列索引-> PropertyString。

当我为 csv 解析文件时，我通常在解析时将结果放入一个列表中，然后出于速度原因将结果放入一个数组中（List.ToArray()）。

# android - 将图像加载到 Gridview 时 getView 方法中的 NetworkOnMainThread 异常

> ID：12931795
> 
> 赞同：0
> 
> 时间：2012-10-17T10:01:52.397
> 
> 标签：android, gridview, android-asynctask, baseadapter

我需要从 url 中获取图像并将它们加载到 gridview 中。我在扩展基本适配器的 ImageAdapter 类的 getView 方法中获取主线程异常的网络。我如何使用单独的线程或异步任务来解决这个问题。

```
public View getView(int position, View convertView, ViewGroup parent)   {           

    ImageView imageView;

    try {

            URL url = new URL(Product_ItemsURLs[position]);

            InputStream content = (InputStream)url.getContent();

            Drawable drawable = Drawable.createFromStream(content , "src"); 

            if (convertView == null)
            {
                imageView = new ImageView(mContext);
                imageView.setLayoutParams(new GridView.LayoutParams(380,380));
                imageView.setScaleType(ImageView.ScaleType.FIT_XY);
                imageView.setPadding(10, 10, 10, 10);
            }
            else
            {
                imageView = (ImageView) convertView;
            }

            imageView.setImageDrawable(drawable);

            return imageView;

        } catch (MalformedURLException e) {

            e.printStackTrace();
            return null;

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return null;
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:07:33.927

下面的行是导致问题的原因。它正在执行网络操作。从蜂窝开始，android 不允许在 UI 线程上进行网络操作。

```
Drawable drawable = Drawable.createFromStream(content , "src"); 
```

您需要使用 an`Asynctask`来下载可绘制对象，并将可绘制对象设置为您`onPostExecute`（在 UI 线程上运行）中的视图。

# java - Apache POI 完整工作簿副本

> ID：12931796
> 
> 赞同：1
> 
> 时间：2012-10-17T10:01:55.317
> 
> 标签：java, apache-poi, xls, xlsx

Apache POI（3.8 最终版本）有问题。

我的任务：根据基本 xls/xlsx 文档中的数据创建一些 xls/xlsx 文件。

首先，我尝试通过`CellStyle.cloneFrom`. 它看起来不错，但是当我打开 xlsx 文件 ( `xl/styles.xml`) 时，我发现它的样式（和字体）数量与我的源文档不同。

我可以通过 POI API 创建源 xls/xlsx 文档的完整副本吗？

创建基础文档模板并创建新文档的代码：

```
public WorkbookTemplate constructTemplate(Workbook wb)
{
    //copy styles from template
    styles = new HashSet<CellStyle>(wb.getNumCellStyles());
    for (short i = 0; i < wb.getNumCellStyles(); i++)
    {
        styles.add(wb.getCellStyleAt(i));
    }
    System.out.println(wb.getNumCellStyles());

    for (int i = 0; i < wb.getNumberOfSheets(); i++)
    {
        Sheet sheet = wb.getSheetAt(i);
        SheetTemplate sheetTemplate = new SheetTemplate(this);
        sheets.add(sheetTemplate.constructTemplate(sheet));
    }

    return this;
}

public Workbook applyTemplate(Workbook wb, JXPathContext context)
{
    preProcessOfWorkBook(wb);
    System.out.println(wb.getNumCellStyles());

    for (SheetTemplate sheetTemplate : sheets)
    {
        Sheet newSheet = wb.createSheet(sheetTemplate.getSheetName());
        sheetTemplate.applyTemplate(newSheet, context);
    }

    return wb;
}

public void preProcessOfWorkBook(Workbook wb)
{
    //Transfer of CellStyles
    styleConvert = new HashMap<CellStyle, CellStyle>(styles.size());
    for (CellStyle style : styles)
    {
        CellStyle bufStyle = wb.createCellStyle();
        bufStyle.cloneStyleFrom(style);
        styleConvert.put(style, bufStyle);
    }
} 
```

它是 WorkbookTemplate 类的一部分，constructTemplate - 创建它，applyTemplate - 将数据从模板传输到 Workbook 实例

# java - Android 应用程序 - 将用户输入的值乘以和除以两种形式

> ID：12931798
> 
> 赞同：1
> 
> 时间：2012-10-17T10:02:07.143
> 
> 标签：java, android, math

我正在尝试制作一个android应用程序，并且由于我是一个初学者，我想知道是否有人可以帮助我编写代码。

将有三个框输入不同的数字，我希望应用程序将第二个值除以第一个，然后将它乘以第三个。然后在屏幕上显示答案。

该应用程序确实有目的啊哈。

就像 (b/a)*c

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:21:30.693

对于输入，需要 3 个 EditText 并通过单击一个按钮来获取结果。

按照这个

```
public class result extends Activity
{
 private EditText edit1;
private EditText edit2;
private EditText edit3;

public void onCreate(Bundle savedInstanceState) 
{
    try
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.result);

        edit1 = (EditText)findViewById(R.id.edit1);
        edit2 = (EditText)findViewById(R.id.edit2);
        edit3 = (EditText)findViewById(R.id.edit3);

        Button click = (Button)findViewById(R.id.btn);

        click.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                int a = Integer.parseInt(edit1.getText().toString());
                int b = Integer.parseInt(edit2.getText().toString());
                int c = Integer.parseInt(edit3.getText().toString());
                double result = ((double) a/b)*c;
                Toast.makeText(result.this, Double.toString(result),Toast.LENGTH_LONG).show();
            }
        });

    }catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

**结果.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:background="#fff"
 >

<EditText 
   android:id="@+id/edit1"
   android:layout_width="fill_parent"
   android:layout_height="40dp"
   android:inputType="text"/>

<EditText 
   android:id="@+id/edit2"
   android:layout_width="fill_parent"
   android:layout_height="40dp"
   android:inputType="text"/>

 <EditText 
   android:id="@+id/edit3"
   android:layout_width="fill_parent"
   android:layout_height="40dp"
   android:inputType="text"/>

 <Button
   android:id="@+id/btn"
   android:layout_width="fill_parent"
   android:layout_height="40dp"
   android:text="Click"/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T10:17:14.783

在您的应用程序布局中声明 3 个 EditText，以及一个按钮和一个 TextView。给他们唯一的ID。

以下代码将执行您想要的操作。这很简单，所以请确保您不只是复制和粘贴，并且您理解它。我总是发现从示例中学习更容易，这就是我提供示例的原因。我希望它有所帮助。

```
public class MainActivity extends Activity {
    //Declare textviews as fields, so they can be accessed throughout the activity.
EditText mEditText1;
EditText mEditText2;
EditText mEditText3;
TextView mTextView;
Button mButton;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Bind the EditText views

    mEditText1 = (EditText)findViewById(R.id.editText1);
    mEditText2 = (EditText)findViewById(R.id.editText2);
    mEditText3 = (EditText)findViewById(R.id.editText3);
    mTextView = (TextView)findViewById(R.id.textView1);

    mButton =  (Button)findViewById(R.id.calculateButton);
    mButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            //When the button is clicked, call the calucate method.
            calculate();
        }
    });

}

public void calculate(){
    //get entered texts from the edittexts,and convert to integers.
    Double value1 = Double.parseDouble(mEditText1.getText().toString());
    Double value2 = Double.parseDouble(mEditText2.getText().toString());
    Double value3 = Double.parseDouble(mEditText3.getText().toString());
    //do the calculation
    Double calculatedValue = (value2/value1)*value3;
    //set the value to the textview, to display on screen.
    mTextView.setText(calculatedValue.toString());
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:16:55.107

```
int answer=(Integer.parse(editTextB.getText()) /Integer.parse(editTextA.getText())*Integer.parse(editTextC.getText() 
```

# java - 如何在java中根据条件对值进行分组

> ID：12931800
> 
> 赞同：0
> 
> 时间：2012-10-17T10:02:15.840
> 
> 标签：java

我有一些从数据库返回的值作为结果集，如下所示

```
**resource_name         menu_name       menu_group_name**
DepartmentAction        Department      Admin Operation
PositionAction          Position        Admin Operation
FoodHabitAction         FoodHabits      Admin Operation
ReligiousAction         Religious       Admin Operation
NationalitiesAction     Nationlities    Admin Operation 
```

我想根据 menu_group_name 对 resource_name 和 menu_mane 进行分组，如下所示

```
 if the menu_group_name is same than group all the corresponding
    resource_name and menu_mane against to menu_group_name . 
```

更新 ：

```
 public Map<String,List> getMenuForLoggedinRole(int roleid){
        Map<String,List> menuListMap = new LinkedHashMap<String,List>();
        List<MenuListViewModel> menuNamesList = new ArrayList<MenuListViewModel>();
        MenuListViewModel menuViewModel;
        Connection connection = getConnection();
        PreparedStatement ps = null;
        ResultSet rs = null;
        if (connection != null) {
            try {
                ps = connection.prepareStatement(" select ar.resource_name,ar.menu_name,mg.menu_group_name "
                        + " from m_application_resources as ar,"
                        + " m_menu_groups as mg,m_access_matrix as amatrix "
                        + " where ar.resourceid = amatrix.resourceid and amatrix.roleid=?");
                ps.setInt(1, roleid);
                rs = ps.executeQuery();
                if(rs.next()) {
                   String menu_group_name = rs.getString("menu_group_name");
                   String resource_name = rs.getString("resource_name");
                   String menu_name = rs.getString("menu_name");
                   if(menuListMap.containsKey(menu_group_name)){
                       menuNamesList =(List) menuListMap.get(menu_group_name);
                       menuViewModel = new MenuListViewModel();
                       menuViewModel.setResource_name(resource_name);
                       menuViewModel.setMenu_name(menu_name);
                       menuNamesList.add(menuViewModel);
                       menuListMap.put(menu_group_name, menuNamesList);
                   }else{
                       menuViewModel = new MenuListViewModel();
                       menuViewModel.setResource_name(resource_name);
                       menuViewModel.setMenu_name(menu_name);
                       menuNamesList.add(menuViewModel);
                       menuListMap.put(menu_group_name, menuNamesList);
                   }
                } 
            } catch (Exception ex) {
                ex.printStackTrace();
            }finally {
                try {
                    closeConnection(connection, rs, ps);
                } catch (Exception ex) {
                    ex.printStackTrace();
                    //use logger here
                }
            }
        }

        printMap(menuListMap);
        return menuListMap;
    } 
```

当我打印并看到只有一个值被打印时，其他值没有。请帮助我如何做到这一点。我知道这很简单需要你的帮助。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:06:39.073

创建一些类，CustomClass，与成员`resource_name`和`menu_name`

现在创建一个`map<String, List<CustomClass>>`

遍历结果集并继续向地图添加数据

`menu_group_name`将是您的键，您创建的自定义类将是值，在将数据放入地图时，检查该键是否存在，如果是，则检索列表并向其添加新的自定义类，否则使用您的自定义类创建一个新列表并添加放置键值对

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:13:15.437

我认为可以做一些这样的代码

```
class Pair {
                String v1;
                String v2;
                Pair(String value1, String value2){
                    v1=  value1;
                    v2 = value2;
                }
            }
            Map<String , List<Pair>> maps = new HashMap<>();
            List<Pair> keypair = new ArrayList<Pair>();
            keypair.add(new Pair("", ""));
            maps.put("Hello", keypair);
            maps.get("Hello").add(new Pair("", "")); 
```

# ruby-on-rails - 远程登录到 Rails 2 应用程序

> ID：12931804
> 
> 赞同：0
> 
> 时间：2012-10-17T10:02:39.200
> 
> 标签：ruby-on-rails, restful-authentication, remote-forms

我正在远程登录[Rails 2 应用程序。](http://www.zouz.com/)鉴于默认情况下 Rails 方法是 RESTful 的，我假设我所要做的就是从远程应用程序（实际上是 Facebook 应用程序）发布表单数据。出于某种原因，这似乎不起作用，我尝试过：

```
curl http://www.zouz.com/session -d user[email]=testing@blabla.com -d user[password]=whocares 
```

返回并清空结果。我怀疑 Rails 的内置防伪保护可能是原因，停用它不会使其工作。

我的方法有问题吗？

编辑：如果有任何帮助，使用[HTTPRequester](https://addons.mozilla.org/fr/firefox/addon/httprequester/)处理相同的 POST 查询确实[有效](http://pastebin.com/x4CFXcqE)，尽管我提供了相同的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:16:46.067

感谢 -u 标志，我设法让它工作。

```
 curl --user testing@blabla.com:whocares http://192.168.1.19:3000 
```

这对我来说仍然很神秘，因为我仍然不知道它是如何运作的。仍然欢迎解释。

# java - EJB 中的事务管理

> ID：12931808
> 
> 赞同：1
> 
> 时间：2012-10-17T10:02:43.210
> 
> 标签：java, transactions, dao

最近我被问到一个问题，这让我思考......想要获得社区对同一问题的看法。

我有一个 CustomerEJB，它有一个 createCustomer 方法。我的 EJB 作为 Web 服务公开，因此 createCustomer 是它的操作之一。

当请求命中 createCustomer 时，需要执行 2 次操作

1.  对数据库的 INSERT SQL 查询，可能会将某些数据添加到输入请求中的数据库中
2.  在文件系统中创建一个文本文件，比如 .txt。

现在的问题是我想将这两个任务耦合到一个事务中。如果任何一项任务失败，我也会回滚另一项任务。

无需提及任何热门技术，例如 Spring/Hibernate，我可以遵循什么方法来进行事务管理

我的想法： 1.我可以使用JTA，划定事务边界并相应地执行提交和回滚。JDBC 可用于 SQL 任务 2\. 我可以使用 DAO

邀请您的建议/意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:09:16.560

您需要将创建的文件包装在支持 XA 的 JCA 连接器中（不确定是否有现成的连接器，一个快速的好方法只找到了这个尚不支持事务的[fsconnector](http://code.google.com/p/fsconnector/)），并为您的数据库使用 XA 驱动程序事务（大多数数据库将能够处理这个），然后将您的 EJB 包装在 XA 事务中（应该很简单）。

只要这两种资源都可以处理 XA 事务，您将获得两阶段提交的好处，这就是您所追求的。

# django - 使用 RequestContext 时，Django Context 包含未定义的字段

> ID：12931809
> 
> 赞同：0
> 
> 时间：2012-10-17T10:02:43.083
> 
> 标签：django, django-templates, django-views

嗨，我正在编写一个 django 项目，我编写的模板代码如下：

```
 <ul id="nav">
                <li><a href="/">Home</a></li>
                <li><a href="/user/">Users</a></li>
                {% if user %}
                    <li><a href="/user/{{ user.id }}/">Settings</a></li>
                    <li><a href="/logout/">Log Out</a></li>
                {% else %}
                    <li><a href="/login/">Log In</a></li>
                    <li><a href="/signup/">Sign Up</a></li>
                {% endif %}
            </ul> 
```

现在在登录视图中我这样写：

```
def login(request):
    if user_logged_in(request):
        return redirect('/')
    if request.method == 'GET':
        form = LogInForm()
        return render_to_response(LOGIN_PATH, {'form':form}, context_instance=RequestContext(request)) 
```

但是当我运行服务器时，没有用户登录，并访问登录页面，它显示设置和注销（上下文中有一个用户对象），但它不应该！

如果我删除 RequestContext，说 return render_to_response(LOGIN_PATH, {'form':form})，就可以了。和

```
return render_to_response(LOGIN_PATH, {'form':form, 'user':None}, context_instance=RequestContext(request)) 
```

也可以。但我不想这样做。

我知道这是肮脏的设计，嗯......我正在寻找建议和解决方案。非常感谢~！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:08:02.880

```
{% if user.is_authenticated %} 
```

您的标签只检查用户对象，而不是经过身份验证的对象。

[在此处](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.is_authenticated)查看有关您可以使用身份验证用户做什么的更多信息:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:14:47.550

`TEMPLATE_CONTEXT_PROCESSORS`包括的默认设置`"django.contrib.auth.context_processors.auth"`。这个上下文处理器`user`向 cotnext 添加了一个，如果请求中没有提供用户，它将是匿名的。

如果您想知道用户是否在模板中经过身份验证，您应该使用@Samuele Mattiuzzo 答案，但如果您出于任何原因不想将用户包含在上下文中，那么您需要修改默认的 TEMPLATE_CONTEXT_PROCESSORS 设置而不使用 auth 上下文处理器。

有关更多信息[，请阅读文档](https://docs.djangoproject.com/en/1.4/ref/settings/#template-context-processors)或[代码](https://github.com/django/django/blob/master/django/contrib/auth/context_processors.py)。

# ruby-on-rails - EC2 上的资产预编译失败：找不到 jQuery

> ID：12931812
> 
> 赞同：0
> 
> 时间：2012-10-17T10:02:51.707
> 
> 标签：ruby-on-rails, ruby, amazon-ec2, capistrano

我正在使用我刚刚使用`rails new`Rails 3.2.8 生成的骨架 Rails 应用程序配置新的生产部署设置。我在我的开发机器上使用 apache2 和 Phusion Passenger 进行了生产设置，一切正常。当我尝试将该配置推送到 EC2 时，资产预编译步骤失败，因为它找不到 jQuery。

宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'capistrano'
gem 'jquery-rails'
gem 'haml'

group :assets do
  gem 'less-rails'
  gem 'uglifier', '>= 1.0.3'
  gem 'therubyracer'
  gem 'execjs'
end

group :deploy do
  gem 'passenger'
end

group :production do
  gem 'bigdecimal'
end 
```

相关位`deploy.rb`

```
after "deploy:update_code" do
  run "cd #{release_path}; rake assets:precompile RAILS_ENV=production "
end 
```

输出

```
triggering after callbacks for `deploy:update_code'
  * executing "cd /home/ec2-user/BWW/pages/bw-widget/releases/20121017095008; rake assets:precompile RAILS_ENV=production"
    servers: ["bww-test"]
    [bww-test] executing command
 ** [out :: bww-test] /usr/bin/ruby1.9 /usr/local/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
 ** [out :: bww-test] 
 ** [out :: bww-test] rake aborted!
 ** [out :: bww-test] 
 ** [out :: bww-test] couldn't find file 'jquery'
 ** [out :: bww-test] (in /home/ec2-user/BWW/pages/bw-widget/releases/20121017095008/app/assets/javascripts/application.js:13)
 ** [out :: bww-test] 
 ** [out :: bww-test] 
 ** [out :: bww-test] Tasks: TOP => assets:precompile:primary
 ** [out :: bww-test] 
 ** [out :: bww-test] (See full trace by running task with --trace)
 ** [out :: bww-test] 
 ** [out :: bww-test] rake aborted!
 ** [out :: bww-test] Command failed with status (1): [/usr/bin/ruby1.9 /usr/local/bin/rake asset...]
 ** [out :: bww-test] 
 ** [out :: bww-test] Tasks: TOP => assets:precompile
 ** [out :: bww-test] (See full trace by running task with --trace)
    command finished in 1819ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/ec2-user/BWW/pages/bw-widget/releases/20121017095008; true"
    servers: ["bww-test"]
    [bww-test] executing command
    command finished in 168ms
failed: "sh -c 'cd /home/ec2-user/BWW/pages/bw-widget/releases/20121017095008; rake assets:precompile RAILS_ENV=production'" on bww-test 
```

如果我查看服务器，Capistrano 已经安装了包含 jQuery 的包：

```
[ec2-user@ip-10-226-122-140 bw-widget]$ find . -name jquery\*
./shared/bundle/ruby/1.9.1/specifications/jquery-rails-2.1.3.gemspec
./shared/bundle/ruby/1.9.1/cache/jquery-rails-2.1.3.gem
./shared/bundle/ruby/1.9.1/gems/jquery-rails-2.1.3
./shared/bundle/ruby/1.9.1/gems/jquery-rails-2.1.3/jquery-rails.gemspec
./shared/bundle/ruby/1.9.1/gems/jquery-rails-2.1.3/lib/generators/jquery
./shared/bundle/ruby/1.9.1/gems/jquery-rails-2.1.3/lib/jquery
./shared/bundle/ruby/1.9.1/gems/jquery-rails-2.1.3/lib/jquery-rails.rb
./shared/bundle/ruby/1.9.1/gems/jquery-rails-2.1.3/vendor/assets/javascripts/jquery_ujs.js
./shared/bundle/ruby/1.9.1/gems/jquery-rails-2.1.3/vendor/assets/javascripts/jquery-ui.js
./shared/bundle/ruby/1.9.1/gems/jquery-rails-2.1.3/vendor/assets/javascripts/jquery.min.js
./shared/bundle/ruby/1.9.1/gems/jquery-rails-2.1.3/vendor/assets/javascripts/jquery.js
./shared/bundle/ruby/1.9.1/gems/jquery-rails-2.1.3/vendor/assets/javascripts/jquery-ui.min.js
./shared/bundle/ruby/1.9.1/gems/rdoc-3.12/lib/rdoc/generator/template/darkfish/js/jquery.js 
```

`ruby/1.9.1`当我实际使用 1.9.3p0（yum 安装版本，而不是 rvm 版本）时，我对 gems 的存在感到有些困惑，但我不知道这是否重要。

**更新**

根据[Said](https://stackoverflow.com/users/952129/said-kaldybaev)的评论，我将 after update 任务更改为：

```
after "deploy:update_code" do
  run "cd #{release_path}; bundle exec rake assets:precompile RAILS_ENV=production "
end 
```

但是，我读过的所有文件都没有建议这`bundle exec`是必要的，所以我仍然担心，虽然我有一个变通办法，但有些东西仍然没有完全正确配置。

# xcode4.3 - 如何使用 UISegmentcontrol 在 2 个图像之间切换？

> ID：12931814
> 
> 赞同：1
> 
> 时间：2012-10-17T10:02:56.717
> 
> 标签：xcode4.3, uisegmentedcontrol

我已经尝试编写此代码，但我认为它不正确，因为 viewDidLoad 存在错误。

我正在尝试使用 UISegmentcontol 使用 Storyboard 在同一个 UIImageView 中的 2 个图像之间切换。所有在线示例都是用于切换标签而不是使用 Xcode 故事板。

## h.文件

```
 #import <UIKit/UIKit.h>

    @interface ViewController : UIViewController

    {

        IBOutlet UIImageView *myImage;
        IBOutlet UISegmentedControl *segControl;
     }

    @property(nonatomic, retain)IBOutlet UIImageView *myImage;

    @property (nonatomic, retain)IBOutlet UISegmentedControl *segControl;

    - (IBAction)switchButton:(id)sender;

    @end 
```

## m.文件

```
 #import "ViewController.h"

    @interface ViewController ()

    @end

    @implementation ViewController

    @synthesize myImage;
    @synthesize segControl;

    - (IBAction)switchButton:(id)sender
    {
      if (segControl.selectedSegmentIndex == 0)
    {
      [myImage setImage:[UIImage imageNamed:@"image1.jpg"]];

     }

    else

     if (segControl.selectedSegmentIndex == 1)
    {
      [myImage setImage:[UIImage imageNamed:@"image2.jpg"]];

    }

    - (void)viewDidLoad
    {
       [super viewDidLoad];
   // Do any additional setup after loading the view, typically from a nib.

        UIImage *myImage = [myImage setImage:[UIImage imageNamed:@"image1.jpg"]];

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T20:41:29.143

如果您想用图像填充分段控件的段，则不需要代码。只需使用情节提要。

# asp.net - 放置后不开始调试 在网络配置中

> ID：12931819
> 
> 赞同：1
> 
> 时间：2012-10-17T10:03:17.483
> 
> 标签：asp.net, iis

`<httpRuntime enableVersionHeader="false"/>`放入webconfig后没有开始调试。注释掉这条线后，它工作正常。我使用的是 Visual Studio 2008。

在调试以下事情发生时，调试器图标将被禁用，开始构建，成功完成，然后停止并启用调试器图标，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T12:56:15.040

[http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.enableversionheader.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.enableversionheader.aspx)

本文提到版本标头告诉 Visual Studio 正在使用哪个版本的 .NET。对于发布版本，您只想将其更改为 false。

# facebook - 网站上的页面可以获取 Facebook 访问令牌吗？

> ID：12931820
> 
> 赞同：1
> 
> 时间：2012-10-17T10:03:21.803
> 
> 标签：facebook, oauth, facebook-opengraph

我对 facebook 开发还很陌生，我仍然对 oAuth 的事情感到困惑。我的一个客户要求我在他的网站上显示他 facebook 页面的最新帖子、链接和状态。

在他网站上的 php 页面上，我正在创建一个 url

> "https://graph.facebook.com/".$clientFacebookPage."/posts?limit=1&access_token=xxx

为了对它进行 json 解码并显示我想要的信息，但我不知道如何获取访问令牌。我使用图形资源管理器生成了一个访问令牌，该令牌与我作为 facebook 开发人员的名字相关联，但在 2 小时后到期。

已经有很多事情让我感到困惑，我希望你能指出我已经阅读了文档的解决方案，但一切都围绕着用户登录你的应用程序和你的应用程序发布。所以我的问题是：

*   我是否需要使用[http://graph.facebook/xxxx](http://graph.facebook/xxxx) url 创建一个应用程序来执行 curl（需要特殊权限）？
*   如果是这样，Facebook页面的广告是否需要通过应用程序授权？
*   接下来我需要做什么？我可以使用应用程序 ID 和密码创建网页。这是否意味着我可以检索 facebook 页面的信息？如何？
*   我知道该页面需要一个身份验证令牌来卷曲[http://graph.facebook/xxxx](http://graph.facebook/xxxx)页面并检索所需的数据。我在哪里可以生成它？网页是否需要生成它，还是我（作为应用程序开发人员）获取令牌并将其写入我的 php 代码？
*   如果我退出 Facebook，程序/网页会停止运行吗？

我希望我没有混淆你。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:34:29.513

获取页面访问令牌的基本过程如下： 1\. 为作为页面管理员的用户获取用户访问令牌 2\. 使用此用户令牌，请求 graph.facebook.com/me/accounts 和在返回的列表中查找正确的页面 ID。3\. 从该 ID 中获取关联的页面令牌 4\. 使用它来执行页面操作。

有一个新推出的 Facebook 文档指南，它向您展示了如何逐步获取这些访问令牌之一： [https](https://developers.facebook.com/docs/howtos/login/login-as-page/) ://developers.facebook.com/docs/howtos/login/login-as-page/ 希望该指南对您有所帮助。

我也会按顺序回答你的问题：

*   是的，您需要一个应用程序来生成访问令牌以进行 API 查询
*   是的
*   这在上面链接的指南中（如果您还需要创建一种获取用户访问令牌的方法，请从入门开始）
*   再次，请参阅上面的指南
*   可以，但您应该按照[本指南](https://developers.facebook.com/docs/howtos/login/extending-tokens/#step1)中的步骤生成长期访问令牌。一旦你这样做了，你检索到的任何页面令牌都将永远存在。

# php - csv到mysql使用php没有插入数据

> ID：12931826
> 
> 赞同：2
> 
> 时间：2012-10-17T10:03:36.743
> 
> 标签：php, mysql, insert

我正在尝试使用 php 将 csv 的联系人数据上传到 mysql 数据库 phbook，但是当我通过 phpmyadmin 检查或打印数据库的数据时.. 我什么也没看到，或者说表是空的，

我使用的代码如下；

```
 <?php
    /* conenction to DB */

    $con = mysql_connect("localhost","root","");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    mysql_select_db("phbook", $con);

    /* connection ends*/

    if ( isset( $_FILES['userfile'] ) )
    {
      $csv_file = $_FILES['userfile']['tmp_name'];

      if ( ! is_file( $csv_file ) )
        exit('File not found.');

      $sql = '';

      if (($handle = fopen( $csv_file, "r")) !== FALSE)
      {
          while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
          {
              $sql .= "INSERT INTO `contact` SET
                `fname` = '$data[0]',
                `lname` = '$data[1]',
                `phone` = '$data[2]',
                `mob` = '$data[3]',
                `email` = '$data[4]';
              ";
          }
          fclose($handle);
      }

      // Insert into database

      //exit( $sql );
      exit( "Complete!" );
    }
    mysql_close($con);
    ?>
    <!DOCTYPE html>
    <html>
    <head>
    <title>CSV to MySQL Via PHP</title>
    </head>
    <body>
    <form enctype="multipart/form-data" method="POST">
      <input name="userfile" type="file">
      <input type="submit" value="Upload">
    </form>
    </body>
    </html> 
```

我使用了代码，[使用 PHP 代码和 HTML 表单将 excel (.csv) 导入 MySQL](https://stackoverflow.com/questions/11893501/import-an-excel-csv-into-mysql-using-php-code-and-an-html-form)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:05:36.737

您需要调用`mysql_query`执行查询。现在，您只需将查询表述为字符串 ( `$sql`) 并且不做任何进一步的事情。只需将此字符串作为参数传递，例如：

```
$result = mysql_query($sql); 
```

您可能还想处理发生的任何错误。例如（来自 PHP 手册）：

```
if (!$result) {
    die('Invalid query: ' . mysql_error());
} 
```

有关详细信息，请参阅[mysql_query 上的 PHP 手册](http://php.net/manual/en/function.mysql-query.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T17:46:20.713

对于像我这样正在寻求解决方案的其他人的帮助，请阅读并关注，

我创建了一个名为**csv**的数据库和一个名为**test**的表，其中 4 个字段是**id****（自动增量和主要）*****，名字，姓氏，电子邮件**。我创建了一个 csv 文件并将其命名为**upload.csv**（无论您如何命名），其中有数百个个人数据，分为 3 列，例如**First Name**、**Last Name**和**Email Address**示例：***

 ***willie walker willie@example.com
david cotter david@sometest.com
John Painer john@domain.com
.................................................................... ……………………………………………………………………………………………………………………………………………………………………………………
_

现在，创建一个新的 php 文件 import_csv_file.php（不管你如何命名）并粘贴下面的代码，保存并在你的网络服务器下运行。上传我们创建的 csv 文件并查看。

```
 <?php

    $con = mysql_connect("localhost","root","") or die (mysql_error());

    mysql_select_db('csv', $con);

        if(isset($_POST['submit']))
        {
            $file = $_FILES['file']['tmp_name'];
            $handle = fopen($file,"r");
            while(($fileop = fgetcsv($handle,1000,",")) !==false)
            {

                $f = $fileop[0];
                $l = $fileop[1];
                $e = $fileop[2];
                $sql= mysql_query("INSERT INTO test (first_name,last_name,email) VALUES ('$f','$l','$e')");
            }
            if($sql)
            {
                echo "data uploaded successfully";
            }
        }

    ?>

    <body>
    <form action="" enctype="multipart/form-data" method="post">
      <input type="file" name="file" />
      <br />
      <input type="submit" value="Submit" name="submit"/>
    </form>
    </body>
    </html> 
```***

# javascript - 将返回的 JSON 对象属性转换为（较低的第一个）camelCase

> ID：12931828
> 
> 赞同：84
> 
> 时间：2012-10-17T10:03:45.480
> 
> 标签：javascript, jquery, json, lodash, underscore.js

我从这样的 API 返回 JSON：

```
Contacts: [{ GivenName: "Matt", FamilyName: "Berry" }] 
```

为了使这与我的代码样式（camelCase - 小写首字母）保持一致，我想转换数组以生成以下内容：

```
 contacts: [{ givenName: "Matt", familyName: "Berry" }] 
```

最简单/最好的方法是什么？创建一个新的联系人对象并遍历返回数组中的所有联系人？

```
var jsonContacts = json["Contacts"],
    contacts= [];

_.each(jsonContacts , function(item){
    var contact = new Contact( item.GivenName, item.FamilyName );
    contacts.push(contact);
}); 
```

还是我可以映射原始数组或以某种方式对其进行转换？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2015-09-07T15:08:26.707

如果您使用[lodash](https://lodash.com/docs)而不是下划线，则可以：

```
_.mapKeys(obj, (v, k) => _.camelCase(k)) 
```

这会将`TitleCase`和转换`snake_case`为`camelCase`. 请注意，它不是递归的。

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2014-10-06T11:38:07.730

这是一个可靠的递归函数，可以正确地对 JavaScript 对象的所有属性进行驼峰式命名：

```
function toCamel(o) {
  var newO, origKey, newKey, value
  if (o instanceof Array) {
    return o.map(function(value) {
        if (typeof value === "object") {
          value = toCamel(value)
        }
        return value
    })
  } else {
    newO = {}
    for (origKey in o) {
      if (o.hasOwnProperty(origKey)) {
        newKey = (origKey.charAt(0).toLowerCase() + origKey.slice(1) || origKey).toString()
        value = o[origKey]
        if (value instanceof Array || (value !== null && value.constructor === Object)) {
          value = toCamel(value)
        }
        newO[newKey] = value
      }
    }
  }
  return newO
} 
```

测试：

```
var obj = {
  'FirstName': 'John',
  'LastName': 'Smith',
  'BirthDate': new Date(),
  'ArrayTest': ['one', 'TWO', 3],
  'ThisKey': {
    'This-Sub-Key': 42
  }
}

console.log(JSON.stringify(toCamel(obj))) 
```

输出：

```
{
    "firstName":"John",
    "lastName":"Smith",
    "birthDate":"2017-02-13T19:02:09.708Z",
    "arrayTest": [
        "one", 
        "TWO", 
        3
    ],
    "thisKey":{
        "this-Sub-Key":42
    }
} 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2018-05-31T09:12:09.487

你可以使用这个递归函数（使用 lodash 和 ES6）来做到这一点：

```
import { camelCase } from 'lodash';

const camelizeKeys = (obj) => {
  if (Array.isArray(obj)) {
    return obj.map(v => camelizeKeys(v));
  } else if (obj != null && obj.constructor === Object) {
    return Object.keys(obj).reduce(
      (result, key) => ({
        ...result,
        [camelCase(key)]: camelizeKeys(obj[key]),
      }),
      {},
    );
  }
  return obj;
}; 
```

测试：

```
const obj = {
  'FirstName': 'John',
  'LastName': 'Smith',
  'BirthDate': new Date(),
  'ArrayTest': ['one', 'TWO', 3],
  'ThisKey': {
    'This-Sub-Key': 42
  }
}

console.log(JSON.stringify(camelizeKeys(obj))) 
```

输出：

```
{  
   "firstName": "John",
   "lastName": "Smith",
   "birthDate": "2018-05-31T09:03:57.844Z",
   "arrayTest":[  
      "one",
      "TWO",
      3
   ],
   "thisKey":{  
      "thisSubKey": 42
   }
} 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-02-01T23:31:42.203

要将普通对象的键从更改`snake_case`为`camelCase` ***递归***尝试以下操作
（使用[Lodash](https://lodash.com/docs/master#camelCase)）：

```
function objectKeysToCamelCase(snake_case_object) {
  var camelCaseObject = {};
  _.forEach(
    snake_case_object,
    function(value, key) {
      if (_.isPlainObject(value) || _.isArray(value)) {     // checks that a value is a plain object or an array - for recursive key conversion
        value = objectKeysToCamelCase(value);               // recursively update keys of any values that are also objects
      }
      camelCaseObject[_.camelCase(key)] = value;
    }
  )
  return camelCaseObject;
}; 
```

在这个[PLUNKER中测试](https://plnkr.co/edit/jtsRo9yU12geH7fkQ0WL?p=preview)

**注意**：也递归地适用于数组中的对象

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-10-06T04:09:00.780

使用 lodash 和 ES6，这将递归地将所有键替换为驼峰式：

```
const camelCaseKeys = (obj) => {
  if (!_.isObject(obj)) {
    return obj;
  } else if (_.isArray(obj)) {
    return obj.map((v) => camelCaseKeys(v));
  }
  return _.reduce(obj, (r, v, k) => {
    return { 
      ...r, 
      [_.camelCase(k)]: camelCaseKeys(v) 
    };
  }, {});
}; 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2021-04-05T22:44:20.060

只需使用驼峰

```
humps.camelize('hello_world');
humps.camelizeKeys(object, options); // will work through entire object 
```

[https://www.npmjs.com/package/humps](https://www.npmjs.com/package/humps)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-11-07T23:54:43.053

这是[axios 拦截器的一个很好的用例](https://github.com/axios/axios#interceptors)

基本上，定义一个客户端类并附加一个转换请求/响应数据的前/后拦截器。

```
export default class Client {
    get(url, data, successCB, catchCB) {
        return this._perform('get', url, data, successCB, catchCB);
    }

    post(url, data, successCB, catchCB) {
        return this._perform('post', url, data, successCB, catchCB);
    }

    _perform(method, url, data, successCB, catchCB) {
        // https://github.com/axios/axios#interceptors
        // Add a response interceptor
        axios.interceptors.response.use((response) => {
            response.data = toCamelCase(response.data);
            return response;
        }, (error) => {
            error.data = toCamelCase(error.data);
            return Promise.reject(error);
        });

        // Add a request interceptor
        axios.interceptors.request.use((config) => {
            config.data = toSnakeCase(config.data);
            return config;
        }, (error) => {
            return Promise.reject(error);
        });

        return axios({
            method: method,
            url: API_URL + url,
            data: data,
            headers: {
                'Content-Type': 'application/json',
            },
        }).then(successCB).catch(catchCB)
    }
} 
```

这是一个使用 React/axios 的更长示例的[要点。](https://gist.github.com/daino3/3da80fe2a3c8f9411214044a7f5611b3)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-03-13T02:41:04.907

使用 lodash，你可以这样做：

```
export const toCamelCase = obj => {
  return _.reduce(obj, (result, value, key) => {
    const finalValue = _.isPlainObject(value) || _.isArray(value) ? toCamelCase(value) : value;
    return { ...result, [_.camelCase(key)]: finalValue };
  }, {});
}; 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-05-14T10:38:48.873

有一个不错的 npm 模块。 [https://www.npmjs.com/package/camelcase-keys](https://www.npmjs.com/package/camelcase-keys)

```
npm install camelcase-keys 
```

```
const camelcaseKeys = require( "camelcase-keys" );

camelcaseKeys( { Contacts: [ { GivenName: "Matt", FamilyName: "Berry" } ] }, { deep: true } ); 
```

将返回...

```
{ contacts: [ { givenName: "Matt", familyName: "Berry" } ] } 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-10-17T10:55:07.437

好吧，我接受了挑战，并认为我想通了：

```
var firstToLower = function(str) {
    return str.charAt(0).toLowerCase() + str.slice(1);
};

var firstToUpper = function(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
};

var mapToJsObject = function(o) {
    var r = {};
    $.map(o, function(item, index) {
        r[firstToLower(index)] = o[index];
    });
    return r;
};

var mapFromJsObject = function(o) {
    var r = {};
    $.map(o, function(item, index) {
        r[firstToUpper(index)] = o[index];
    });
    return r;
};

// Map to
var contacts = [
    {
        GivenName: "Matt",
        FamilyName: "Berry"
    },
    {
        GivenName: "Josh",
        FamilyName: "Berry"
    },
    {
        GivenName: "Thomas",
        FamilyName: "Berry"
    }
];

var mappedContacts = [];

$.map(contacts, function(item) {
    var m = mapToJsObject(item);
    mappedContacts.push(m);
});

alert(mappedContacts[0].givenName);

// Map from
var unmappedContacts = [];

$.map(mappedContacts, function(item) {
    var m = mapFromJsObject(item);
    unmappedContacts.push(m);
});

alert(unmappedContacts[0].GivenName); 
```

[属性转换器（jsfiddle）](http://jsfiddle.net/HSASK/3/)

诀窍是将对象作为对象属性的数组来处理。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-09-03T11:26:55.880

该解决方案基于上面的纯 js 解决方案，**使用[loadash](https://lodash.com/docs/#camelCase)**并**保留一个数组（如果作为参数传递）**并且仅更改**键**

```
function camelCaseObject(o) {
    let newO, origKey, value
    if (o instanceof Array) {
        newO = []
        for (origKey in o) {
            value = o[origKey]
            if (typeof value === 'object') {
                value = camelCaseObject(value)
            }
            newO.push(value)
        }
    } else {
        newO = {}
        for (origKey in o) {
            if (o.hasOwnProperty(origKey)) {
                newO[_.camelCase(origKey)] = o[origKey]
            }
        }
    }
    return newO
}

// Example
const obj = [
{'my_key': 'value'},
 {'Another_Key':'anotherValue'},
 {'array_key':
   [{'me_too':2}]
  }
]
console.log(camelCaseObject(obj))
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.js"></script>
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-04-12T22:15:36.383

这是您可能想尝试的方便库： [https ://www.npmjs.com/package/camelize2](https://www.npmjs.com/package/camelize2)

您只需要安装它，`npm install --save camelize2`然后

```
const camelize = require('camelize2')

const response = {
   Contacts: [{ GivenName: "Matt", FamilyName:"Berry" }]
}

const camelizedResponse = camelize(response) 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-06-18T15:00:30.013

我需要一个接受数组或对象的通用方法。这就是我正在使用的（我借用了 KyorCode 的`firstToLower()`实现）：

```
function convertKeysToCamelCase(obj) {
    if (!obj || typeof obj !== "object") return null;

    if (obj instanceof Array) {
        return $.map(obj, function(value) {
            return convertKeysToCamelCase(value);
        });
    }

    var newObj = {};
    $.each(obj, function(key, value) {
        key = key.charAt(0).toLowerCase() + key.slice(1);
        if (typeof value == "object" && !(value instanceof Array)) {
          value = convertKeysToCamelCase(value);
        }
        newObj[key] = value;
    });

    return newObj;
}; 
```

示例调用：

```
var contact = { GivenName: "Matt", FamilyName:"Berry" };

console.log(convertKeysToCamelCase(contact));
// logs: Object { givenName="Matt", familyName="Berry"}

console.log(convertKeysToCamelCase([contact]));
// logs: [Object { givenName="Matt", familyName="Berry"}]

console.log(convertKeysToCamelCase("string"));
// logs: null

console.log(contact);
// logs: Object { GivenName="Matt", FamilyName="Berry"} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-12-08T23:23:50.007

用 lodash 和一些 es6+ 特性接受挑战 这是我使用 reduce 函数的实现。

```
function deeplyToCamelCase(obj) {
  return _.reduce(obj, (camelCaseObj, value, key) => {
    const convertedDeepValue = _.isPlainObject(value) || _.isArray(value)
      ? deeplyToCamelCase(value)
      : value;
    return { ...camelCaseObj, [_.camelCase(key)] : convertedDeepValue };
  }, {});
}; 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-06-20T13:47:00.017

使用 lodash ...

```
function isPrimitive (variable) {
  return Object(variable) !== variable
}

function toCamel (variable) {
  if (isPrimitive(variable)) {
    return variable
  }

  if (_.isArray(variable)) {
    return variable.map(el => toCamel(el))
  }

  const newObj = {}
  _.forOwn(variable, (value, key) => newObj[_.camelCase(key)] = toCamel(value))

  return newObj
}
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-10-14T00:25:12.880

类似于 @brandonscript 的解决方案，但以更多 ES6 功能的方式：

```
const camelCaseString = str => (
  (str.charAt(0).toLowerCase() + str.slice(1) || str).toString() 
);

const objectToCamelCase = val => {
  if (typeof val != 'object' || val === null) {
    return val;
  }

  if (val instanceof Array) {
    return val.map(objectToCamelCase);
  }

  return Object.keys(val)
    .filter(prop => val.hasOwnProperty(prop))
    .map(prop => ({[camelCaseString(prop)]: objectToCamelCase(val[prop])}))
    .reduce((prev, current) => ({...prev, ...current}))
};

// Example:
let converted = objectToCamelCase({UserId: 1, Hobbies: [{Id: 1, Label: "Read"}], Name: "John Doe"});

console.log(converted)
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-09-10T09:57:00.113

[使用来自https://plnkr.co/edit/jtsRo9yU12geH7fkQ0WL?p=preview](https://plnkr.co/edit/jtsRo9yU12geH7fkQ0WL?p=preview)的参考更新代码 这通过将数组保持为数组（您可以使用 map 进行迭代）来处理带有数组的对象，其中也包含对象等等

```
function snakeToCamelCase(snake_case_object){
  var camelCaseObject;
  if (isPlainObject(snake_case_object)) {        
    camelCaseObject = {};
  }else if(isArray(snake_case_object)){
    camelCaseObject = [];
  }
  forEach(
    snake_case_object,
    function(value, key) {
      if (isPlainObject(value) || isArray(value)) {
        value = snakeToCamelCase(value);
      }
      if (isPlainObject(camelCaseObject)) {        
        camelCaseObject[camelCase(key)] = value;
      }else if(isArray(camelCaseObject)){
        camelCaseObject.push(value);
      }
    }
  )
  return camelCaseObject;  
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-02-14T05:24:40.883

这是我的看法；比brandoncode的实现更具可读性和更少的嵌套，并且有更多的空间来处理边缘情况，比如`Date`（顺便说一下，没有处理）或`null`：

```
function convertPropertiesToCamelCase(instance) {
    if (instance instanceof Array) {
        var result = [];

        for (var i = 0; i < instance.length; i++) {
            result[i] = convertPropertiesToCamelCase(instance[i]);
        }

        return result;
    }

    if (typeof instance != 'object') {
        return instance;
    }

    var result = {};

    for (var key in instance) {
        if (!instance.hasOwnProperty(key)) {
            continue;
        }

        result[key.charAt(0).toLowerCase() + key.substring(1)] = convertPropertiesToCamelCase(instance[key]);
    }

    return result;
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-08-01T14:42:13.637

建立在 goredwards 的答案（它没有正确处理数组字段）

```
function objectKeysToCamelCase(snake_case_object) {
  let camelCaseObject = {}
  _.forEach(
    snake_case_object,
    function(value, key) {
      if (_.isPlainObject(value)) {
        value = objectKeysToCamelCase(value)
      } else if (_.isArray(value)) {
        value = value.map(v => _.isPlainObject(v) ? objectKeysToCamelCase(v) : v)
      }
      camelCaseObject[_.camelCase(key)] = value
    },
  )
  return camelCaseObject
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-05-17T21:48:30.947

这是我为它找到的代码，虽然没有经过全面测试，但值得分享。它比其他答案更具可读性，不确定性能。

测试它[http://jsfiddle.net/ms734bqn/1/](http://jsfiddle.net/ms734bqn/1/)

```
const toCamel = (s) => {
      return s.replace(/([-_][a-z])/ig, ($1) => {
        return $1.toUpperCase()
          .replace('-', '')
          .replace('_', '');
      });
    };

const isArray = function (a) {
  return Array.isArray(a);
};

const isObject = function (o) {
  return o === Object(o) && !isArray(o) && typeof o !== 'function';
};

const keysToCamel = function (o) {
  if (isObject(o)) {
    const n = {};

    Object.keys(o)
      .forEach((k) => {
        n[toCamel(k)] = keysToCamel(o[k]);
      });

    return n;
  } else if (isArray(o)) {
    return o.map((i) => {
      return keysToCamel(i);
    });
  }

  return o;
}; 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2020-01-23T09:38:13.490

将对象键转换为带有深度的 camelCase。

```
import _ from 'lodash';

export function objectKeysToCamelCase(entity) {
    if (!_.isObject(entity)) return entity;

    let result;

    result = _.mapKeys(entity, (value, key) => _.camelCase(key));
    result = _.mapValues(result, (value) => objectKeysToCamelCase(value));

    return result;
} 
```

# java - Jackson 自定义属性名称到多态属性的类型映射

> ID：12931838
> 
> 赞同：4
> 
> 时间：2012-10-17T10:04:26.300
> 
> 标签：java, jackson

我正在尝试反序列化一个相当复杂的 POJO JSON，我需要在其中定义一个特定的属性名称来类型解析，但未能找到这个相当简单的功能。

假设一个类：

```
class Example {
  int id;
  Map<String,Object> extras;
} 
```

并且 Jackson 正在将 POJO 正确序列化为 JSON，其中映射序列化为键值映射，就像预期的那样：

```
{...
id:5,
extras:{object1:{...}, object2:{...}}
...} 
```

现在我想告诉杰克逊通过它们的实际类型显式反序列化额外对象。所以我需要告诉杰克逊以某种方式将“object1”映射到类型 A，将“object2”映射到类型 B。

这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T10:11:36.990

有很好的指南如何处理它： http: [//www.cowtowncoder.com/blog/archives/2010/03/entry_372.html](http://www.cowtowncoder.com/blog/archives/2010/03/entry_372.html)

还有另一个教程： http:
[//programmerbruce.blogspot.de/2011/05/deserialize-json-with-jackson-into.html](http://programmerbruce.blogspot.de/2011/05/deserialize-json-with-jackson-into.html)

可以修改第二个教程中的第 6 个示例，并且反序列化器将具有类似于以下内容的循环：

```
Map<String, Class> types = ...// map of supported types
JsonToken token = jsonParser.nextToken();
if(token == JsonToken.FIELD_NAME){ // "object1" etc.
    String name = jsonParser.getCurrentName();
    Class type = types.get(name);
    Object object = jsonParser.readValueAs(type);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:28:48.893

最简单的方法是启用所谓的“默认类型”——它大致相当于添加`@JsonTypeInfo`注释（它支持多态类型处理）——这会在值中添加类型信息。所以：

```
ObjectMapper mapper = new ObjectMapper();
mapper.enableDefaultTyping(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:28:24.853

如果 Extras 地图仅包含这 2 个对象（object1 和 object2），您可以执行以下操作

```
class TypeA {
    // TypeA body
}

class TypeB {
    // TypeB body
}

class Extras {
    private TypeA object1;
    private TypeB object2;
    // Getters and setters
}

class Example {
    int id;
    Extras extras;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T10:29:56.053

这可以使用自定义解串器来实现；有关示例，请参见此[链接](http://wiki.fasterxml.com/JacksonHowToCustomDeserializers)。简而言之，您需要告诉 Jackson 应该将字段解组为哪种类型；但是，如果您的序列化数据 (JSON) 是动态变化的，那么这可能很容易出错。

然后，您可以像这样轻松地注释字段的设置器：

```
ObjectA value;

@JsonDeserialize(using=ObjectADeserializer.class)
public void setValue(ObjectA objectAValue) {
   this.value = objectAValue;
} 
```

# android - Android：在 SimpleExpandableListAdapter 中的子级使用 WebView

> ID：12931839
> 
> 赞同：4
> 
> 时间：2012-10-17T10:04:27.353
> 
> 标签：android

下面是使用动态列表值构建子级和父级的简单声明。相关代码为`createGroupList()`和`createChildList()`。我可以操作，`TextView`但其中一个领域是我的动态图像从加载到`JSON`不加载`WebView`。

```
expListAdapter = new SimpleExpandableListAdapter(
            this, createGroupList(),  // Creating group List.
            R.layout.group_row, 
            new String[] { "Group Item" }, 
            new int[] { R.id.`enter code here`row_name },                                                       
            createChildList(),  // Creating Child List.
            R.layout.child_row,                     
            new String[] { "Sub Item0", "Sub Item1", "Sub Item2", "Sub Item3" },                            
            new int[] { R.id.grpChildName, R.id.grpChildAddress, R.id.grpChildPhoneNo, R.id.childImage }                                    
                );
        setListAdapter(expListAdapter);

    private List createGroupList() {
            String header = "";
            int headerSize = 0;
            ArrayList result = new ArrayList();
            for (int i = 0; i < dynamicList.size(); i++) { 
                HashMap m = new HashMap();
                String taxiCompanyData[] = dynamicList.get(i);
                if (header != taxiCompanyData[3]) {
                    m.put("Group Item", taxiCompanyData[3]);                                        
                    header = taxiCompanyData[3];
                    headerList[headerSize] = header;
                    headerSize++;
                    result.add(m);
                    counter++;
                }
            }
            return (List) result;
            }

    Above is Group creating and 

     private List createChildList() {
                ArrayList result = new ArrayList();
                Log.i("Info ", "headerList.length" + headerList.length);
                    for (int i = 0; i < headerList.length; i++) {
                    final ArrayList secList = new ArrayList();
                    System.out.println("dynamic list size is in main"
                            + dynamicList.size());
                     webView = (WebView) findViewById(R.id.childImage);
                    for (int j = 0; j < dynamicList.size(); j++) {
                        String taxiCompanyData[] = dynamicList.get(j);
                        if (taxiCompanyData[3].equalsIgnoreCase(headerList[i])) {
                            final HashMap child = new HashMap();
                            child.put("Sub Item0", taxiCompanyData[0]);
                            child.put("Sub Item1", taxiCompanyData[1]);
                            child.put("Sub Item2", taxiCompanyData[2]);
    //                      child.put("Sub Item3",  taxiCompanyData[4]); 
                            Thread th = new Thread(){
                                @Override
                                public void run() {
                                    webView.loadUrl("https://lh5.googleusercontent.com/-u8heQyD_4y4/T5VMu-Zc6wI/AAAAAAAi71s/EP32a3D-fc0/s90/Corsino");
                                    secList.add(child);
                                };

                            };
                            th.start();

                        }
                    }

                    result.add(secList);
                }
                return (List)result;
            } 
```

我无法加载`WebUI`。请帮助任何人。

# ruby-on-rails - Rails：i18n，如果没有翻译，则打印变量

> ID：12931840
> 
> 赞同：0
> 
> 时间：2012-10-17T10:04:33.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, rails-i18n

我面临一个奇怪的问题。在我的 rails 3 应用程序中，我支持英语和法语的国际化。在我的模板中，我写了这样的东西

```
<%= t "Hi %{person}!", :person => "Simpson" %> 
```

当我将语言环境设置为法语时，一切正常，因为它已经得到了翻译，但是当我将语言环境设置为英语时，它给出的输出为

```
Hi %{person}! 
```

在我的浏览器中。当我将翻译添加到 en.yml 时，它工作正常。我不明白为什么需要为此在 en.yml 中添加翻译。此外，我不希望这种情况发生，是否有任何解决方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:04:10.917

该`t`方法的第一个参数应该是一个键，所以你的视图应该是这样的：

```
<%= t :greetings, :person => "Simpson" %> 
```

你`config/locales/en.yml`看起来像这样：

```
en:
  greetings: Hi %{person} 
```

和你这样的`config/locales/fr.yml`东西：

```
fr:
  greetings: Bonjour %{person} 
```

# javascript - HTML 元素对象与对象

> ID：12931853
> 
> 赞同：1
> 
> 时间：2012-10-17T10:05:07.633
> 
> 标签：javascript, html, object, dictionary

谁能帮助我为什么我无法获得此代码的正确结果？

```
 Javascript:
    var items2 = $("#quadrant1");
    var coords = items2.getAttribute('coords').split(',');

    HTML:
    <map id="square_map" name="square">
        <area id="quadrant1" shape="poly" coords="206,10, 300,10, 388,10"></area>
    </map> 
```

我检查了 items2 的 typeof，它只是 OBJECT，似乎没有得到正确的 HTML AREA OBJECT。我所要做的就是获取元素对象，这样我就可以像示例中那样做进一步的操作来获取它的 coords 属性值。

我怎么知道它应该是 [object HTMLAreaObject]？我不确定，但这就是“this”的类型

```
$('#square_map").bind("click",function(){
var coords = this.getAttribute('coords').split(',');
... }); 
```

并且它正在使用该对象正确地完成它的工作。任何帮助将不胜感激......很多！提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:07:42.423

因为 items2 在您的示例中不是 DOM 元素而是 jQuery 对象。正确的变体：

```
var items2 = $("#quadrant1");
var coords = items2.attr('coords').split(','); 
```

或者

```
var items2 = $("#quadrant1");
var coords = items2[0].getAttribute('coords').split(','); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:10:20.677

如果您需要获取原始 DOM 对象，请使用`$('#quadrant1').get()`. 为了实现它的功能`jQuery`，使用它自己的对象，但正如我上面提到的，你总是可以获得对原始 DOM 对象的引用。

# .net - 自定义类型被序列化为空元素

> ID：12931854
> 
> 赞同：2
> 
> 时间：2012-10-17T10:05:10.043
> 
> 标签：.net, xml, serializable

我为 EmailAdres 创建了一个自定义类型，并在一个名为 User 的类中使用了这种类型：

```
 public class User
{
public string UserId { get; set; }
public string UserName { get; set; }
public int CompanyId { get; set; }
public EmailAdres Email { get; set; } 
```

}

```
[Serializable]
public class EmailAdres 
{
string _adres;

public EmailAdres()//needed for serialization
{

}
public EmailAdres(string s)
{
  _adres = s;
}

public static implicit operator EmailAdres(string s)
{
  return new EmailAdres(s);
}
public static implicit operator string(EmailAdres s)
{
  return s._adres;
} 
```

}

用户对象由 web 服务返回，但不幸的是，电子邮件元素呈现为空：

```
<User>
<UserId>887339</UserId>
<UserName>Behhh, Joyce</UserName>
<CompanyId>6401970</CompanyId>
<Email/>
</User> 
```

我认为隐式演员可以解决问题。

```
public static implicit operator string(EmailAdres s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:08:49.223

XML 序列化要求类必须具有无参数构造函数。

此外，任何非公共的类成员都不会被序列化。方法没有序列化。没有 get 和 set 访问器的属性不会被序列化。

序列化嵌套对象不是问题。.Net 中的一切都是对象。

编辑：破解这个答案[.NET XML 序列化](https://stackoverflow.com/questions/4575232/net-xml-serialization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:51:39.457

您确实可以公开 _adres 属性。如果您不想这样做，您可以在自定义类上实现接口[IXmlSerializable ：](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializable%28v=vs.100%29.aspx)

```
public class EmailAdres: IXmlSerializable
{
   string _adres;

   // other implementation stuff removed

    public void ReadXml(System.Xml.XmlReader reader)
    {
        _adres =  reader.ReadElementContentAsString();
    }

    public void WriteXml(System.Xml.XmlWriter writer)
    {
        writer.WriteValue(_adres);
    }

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        throw new NotImplementedException();
    } 
```

}

# java - JNDI 同时修改多个条目中的属性

> ID：12931857
> 
> 赞同：0
> 
> 时间：2012-10-17T10:05:28.203
> 
> 标签：java, jndi

我知道可以在 LDAP 的所有条目中搜索属性。搜索后，我想从包含它的所有条目中删除该属性。
一种方法是遍历所有条目并`DirContext.modifyAttributes(name, mods)`在每个条目上调用。我想知道是否有任何简单的方法可以做到这一点，比如我可以一次性从所有条目中删除它。

提前致谢。

# iphone - 在 iPhone 的文本视图中自定义建议

> ID：12931865
> 
> 赞同：10
> 
> 时间：2012-10-17T10:05:42.223
> 
> 标签：iphone, xcode

我有一个`textview`. 当我们编辑 a`textview`时，我们可以看到如图所示的建议。我想自定义建议。即，我想显示我的数组中的单词，而不是建议框中的默认单词。我怎样才能做到这一点？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-22T14:06:04.840

要禁用建议，有两种方法：

第一个是：

```
UITextField* f = [[UITextField alloc] init];
f.autocorrectionType = UITextAutocorrectionTypeNo; 
```

第二个是：Interface Builder 也有一个下拉字段来禁用它。由于您更有可能在界面构建器中创建文本字段，因此请在此处查找。您可以在“更正”旁边的属性检查器中找到它。

对于您的建议数组，请通过此链接：[https ://www.cocoacontrols.com/controls/autocompletiontableview](https://www.cocoacontrols.com/controls/autocompletiontableview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:20:58.370

禁用该文本视图的自动更正，然后准备好自定义视图并将其放置在与光标所在位置匹配的其他视图之上。可能还有其他 SO 帖子可以找出光标在哪里......

您可能会使用 2-way 委托模式。一种方法是让自定义视图知道 UITextView 中的更改，因此它知道何时更新自己的建议。

另一个委托是您的视图或 textView，当有人点击按钮时通知。

这一切都应该很容易做到，唯一困难的部分是弄清楚您的自定义视图的逻辑将如何表现

# iphone - 获取 facebook 用户 ID 的 FQL 不返回“分页”键作为响应

> ID：12931868
> 
> 赞同：-1
> 
> 时间：2012-10-17T10:05:46.557
> 
> 标签：iphone, ios, facebook, paging, facebook-fql

嗨，我想通过 100 个用户的分页获取我的 fabebook 朋友 ID 列表。问题是，如果我将 hte FQL 设置为

```
 NSString *fqlString = @"SELECT uid FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) LIMIT 300"; 
```

它按预期返回表中仅有的前 300 个用户，而没有对下一页的任何引用。

```
Result: {
data =     (
            {
        uid = 1519xxx;
    },
            {
        uid = 9806xxx;
    }

....
);

} 
```

如果我请求朋友，`[FBRequest requestForMyFriends]`它会返回我所有的朋友，并附加一个带有 url 对象的分页键用于下一页。

问题是我如何用 FQL 告诉我 100 个用户的列表，并分页到下 100 个用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:09:53.940

Graph API 返回分页链接；FQL 没有。因此，您必须自己执行此操作，方法是进行另一个包含 OFFSET 参数的查询。

# c# - 制作表格的浅拷贝

> ID：12931872
> 
> 赞同：1
> 
> 时间：2012-10-17T10:05:58.913
> 
> 标签：c#

我想制作一个填充表单的浅表副本，所以如果用户选择复选框并按下关闭而不是保存按钮，那么我想用浅表副本表单“scheduleform2”的复选框替换“scheduleform”，这是空的。但问题是当在“scheduleform”中进行更改时，它们会以某种方式出现在“scheduleform2”中，因此我最终会得到相同的表单数据。例如，当在“scheduleform”中选中一个复选框时，尽管将其设为浅拷贝，但更改仍出现在“scheduleform2”中。

```
DefaultScheduleForm scheduleForm2 = new DefaultScheduleForm();

public DefaultScheduleForm ShallowCopy()
{
  return (DefaultScheduleForm)this.MemberwiseClone();
}

scheduleForm2 = scheduleForm.ShallowCopy();

scheduleForm = scheduleForm2; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:20:47.307

要执行您想要的操作，您需要 MemberwiseClone 表单中的所有控件。

但更好的解决方案是保存表单状态，而不是表单本身，并在取消时将表单重新绑定到已保存状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:47:04.250

浅拷贝正是你现在得到的。你应该做一个深拷贝，或者只是以下几行：

```
scheduleForm2 = scheduleForm;
scheduleForm = new DefaultScheduleForm(); 
```

# java - 如何在 Apache Camel/CXF REST Web 服务中访问 POST/PUT 请求的 JSON 请求正文

> ID：12931873
> 
> 赞同：2
> 
> 时间：2012-10-17T10:05:59.807
> 
> 标签：java, json, rest, cxf, apache-camel

我正在尝试将 JSON 请求正文传递给在我的 Apache Camel 应用程序中使用 CXFRS 制作的 REST Web 服务。

我想访问在我的处理器中传递的请求 JSON。

**休息网址：**

```
http://localhost:8181/mywebservice/Hello/name/{request_param} 
```

尽管我在请求正文中发布了 JSON，但仍然在我的处理器中`exchange.getIn().getBody()`始终返回`{request_param}`不是请求 JSON。

我的 REST 网络服务如下：

```
@Path("/name/")
@Consumes({"application/json" ,"application/xml"})
public class HelloRest {
    @POST
    @Path("/{name}")
    public TestPojo sayHi(@PathParam("name") String name) {
        return new TestPojo(name);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:11:00.640

服务器部分：

```
 @POST
@Path("/")
@Produces(MediaType.TEXT_PLAIN)
@Consumes(MediaType.APPLICATION_JSON)
public String add(MappingUser newUser){
    UserEntity userEntity = new UserEntity(newUser.getNickname(), newUser.getPassword());
    boolean ret = myDB.addUser(userEntity);

    //sends the return value (primitive type) as plain text over network
    return String.valueOf(ret);
} 
```

客户端部分：

```
 public boolean addUser(User user){
    WebResource resource = client.resource(url).path("/");

    String response = resource
            //type of response
            .accept(MediaType.TEXT_PLAIN_TYPE)
            //type of request
            .type(MediaType.APPLICATION_JSON_TYPE)
            //method
            .post(String.class, user);

    return Boolean.valueOf(response);
} 
```

# java - 使用带有 Font.createFont 的 truetype 字体文件时，文本度量错误

> ID：12931875
> 
> 赞同：1
> 
> 时间：2012-10-17T10:06:03.657
> 
> 标签：java, fonts, pack, truetype

我从 fontpalace.com 下载了 Helvetica 字体（只需搜索 Helvetica），并使用 Font.createFont() 将其包含到 Java 应用程序中。但是字体度量不适用于此，即计算出的标签最小尺寸是错误的。

一个显示此问题的简单示例应用程序：

```
package fontTest;
import java.awt.Font;
import java.io.InputStream;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class FontTest extends JFrame {
    public FontTest() {
        JLabel label = new JLabel("Test");
        try {
            InputStream is = FontTest.class.getResourceAsStream("Helvetica.ttf");
            Font font = Font.createFont(Font.TRUETYPE_FONT, is);
            label.setFont(font.deriveFont(12f));
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        add(label);
        pack();
    }

    public static void main(String[] args) {
        FontTest fontTest = new FontTest();
        fontTest.setVisible(true);
    }
} 
```

如果您使用 label.setFont(..) 删除该行，那么 pack() 命令将起作用，并且窗口会调整大小以使文本可读。但是，这样，pack() 无法正常工作，导致标签和窗口被调整到非常小的尺寸，从而切断了文本。我在 Linux 和 Windows 上遇到了这个问题。

我错过了什么吗？似乎有些 ttf 字体文件有效，有些则无效。但我找不到能正常工作的 Helvetica（原来的，不是 Neue Helvetica 或其他）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:14:56.410

font.deriveFont 采用浮点数而不是 int。试试 label.setFont(font.deriveFont(12f));

# android - 打开 MapActivity 时出现“终结器引发的未捕获异常”

> ID：12931876
> 
> 赞同：8
> 
> 时间：2012-10-17T10:06:13.940
> 
> 标签：android, exception, finalizer, mapactivity

我的代码中有这些行：

```
// create tab4
intent = new Intent(this, ActWhereAmI.class)
        .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
tabspecWhereAmI = tabHost
        .newTabSpec("tab4")
        .setIndicator(Utilities.prepareTabView(this,"where am I"))
        .setContent(intent);
tabHost.addTab(tabspecWhereAmI);

public static View prepareTabView(Context context, String text) {
        View view = LayoutInflater.from(context).inflate(
                R.layout.tab_indicator, null);
        TextView tv = (TextView) view.findViewById(R.id.tabIndicatorTextView);
        tv.setText(text);

        return view;
    } 
```

当应用程序运行该行时`tabHost.addTab(tabspecWhereAmI);`，我仅在 LogCat 中收到以下错误，并且程序运行没有任何问题：

```
10-17 13:38:01.164: W/MapActivity(4815): Recycling dispatcher android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher@413c8658
10-17 13:38:01.171: V/MapActivity(4815): Recycling map object.
10-17 13:38:01.335: W/MapActivity(4815): Recycling dispatcher android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher@413c8658
10-17 13:38:01.335: V/MapActivity(4815): Recycling map object.
10-17 13:38:01.554: D/dalvikvm(4815): GC_CONCURRENT freed 776K, 23% free 10286K/13255K, paused 2ms+7ms
10-17 13:38:01.554: E/System(4815): Uncaught exception thrown by finalizer
10-17 13:38:01.554: E/System(4815): java.lang.IllegalStateException: Binder has been finalized!
10-17 13:38:01.554: E/System(4815):     at android.os.BinderProxy.transact(Native Method)
10-17 13:38:01.554: E/System(4815):     at android.database.BulkCursorProxy.close(BulkCursorNative.java:288)
10-17 13:38:01.554: E/System(4815):     at android.database.BulkCursorToCursorAdaptor.close(BulkCursorToCursorAdaptor.java:133)
10-17 13:38:01.554: E/System(4815):     at android.database.CursorWrapper.close(CursorWrapper.java:49)
10-17 13:38:01.554: E/System(4815):     at android.content.ContentResolver$CursorWrapperInner.close(ContentResolver.java:1591)
10-17 13:38:01.554: E/System(4815):     at android.content.ContentResolver$CursorWrapperInner.finalize(ContentResolver.java:1604)
10-17 13:38:01.554: E/System(4815):     at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
10-17 13:38:01.554: E/System(4815):     at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
10-17 13:38:01.554: E/System(4815):     at java.lang.Thread.run(Thread.java:856)
10-17 13:38:01.554: E/System(4815): Uncaught exception thrown by finalizer
10-17 13:38:01.554: E/System(4815): java.lang.IllegalStateException: Binder has been finalized!
10-17 13:38:01.554: E/System(4815):     at android.os.BinderProxy.transact(Native Method)
10-17 13:38:01.554: E/System(4815):     at android.database.BulkCursorProxy.close(BulkCursorNative.java:288)
10-17 13:38:01.554: E/System(4815):     at android.database.BulkCursorToCursorAdaptor.close(BulkCursorToCursorAdaptor.java:133)
10-17 13:38:01.554: E/System(4815):     at android.database.CursorWrapper.close(CursorWrapper.java:49)
10-17 13:38:01.554: E/System(4815):     at android.content.ContentResolver$CursorWrapperInner.close(ContentResolver.java:1591)
10-17 13:38:01.554: E/System(4815):     at android.content.ContentResolver$CursorWrapperInner.finalize(ContentResolver.java:1604)
10-17 13:38:01.554: E/System(4815):     at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
10-17 13:38:01.554: E/System(4815):     at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
10-17 13:38:01.554: E/System(4815):     at java.lang.Thread.run(Thread.java:856) 
```

此异常发生在 的`onCreate(...)`方法之前`ActWhereAmI`。我的问题类似于这个问题：[终结器引发的未捕获异常](https://stackoverflow.com/q/12158228/779408)

为什么我会收到此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T20:38:32.543

你在做任何与数据库相关的事情吗？这几乎听起来像是正在做数据库工作的活动已经关闭了游标（手动或自动），然后尝试在 finalize() 中对其进行操作，或者游标正在被 Android 操作系统关闭。

在情况 #2 中，这可能意味着您可能必须手动关闭光标。如果是这种情况，但如果您需要打开活动，请考虑在 onResume/onPause 或 onStart/onStart 中重新打开/关闭它

其他人提到这可能是因为您试图同时打开其中两个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:38:26.070

这在某种程度上与`Cursor`in `onStop()`or相关`onDestroy()`。您可以通过调用`closeTab()`或来调用它`closeAllTabs()`。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T20:53:00.833

在应用程序遍历另一个活动之前，请记住在完成光标后关闭光标。

# php - 为什么登录用户后不重新加载页面？

> ID：12931877
> 
> 赞同：0
> 
> 时间：2012-10-17T10:06:23.937
> 
> 标签：php, jquery, ajax

我在 jQuery 中重新加载有问题。登录用户后，页面不会重新加载。为什么？

成功登录后，我为 jQuery 发送 JSON。如果 JSON 状态为 1，则必须重新加载页面，但它不起作用。我必须在浏览器和我的个人资料中刷新页面。

这是我的 PHP 代码：

```
function loginUser()
{
    $strs = explode('/', $_SERVER['HTTP_REFERER'] );

    if ( strcmp($strs[2] ,$_SERVER['HTTP_HOST'])!=0)
    {
        header("HTTP/1.1 404 OK");
        exit;
    }
    //print $_POST['username'];die();
    $username = trim($_POST['username']);
    $password = trim($_POST['password']);

    if(empty($username) || empty($password))
    {
       echo  $error = "نوشتن نام کاربری و گذرواژه الزامی ست.";
    }
    else
    {
        $data=array('username'=>htmlentities(check_input($username),ENT_QUOTES, "UTF-8"),
                    'password'=>md5($password));
        //print_r($data);die();
        $user=new user();
        $result=$user->loginUser($data);
        //print_r($result);die();
        if ($result['status']) 
            {
                $_SESSION['username']=$result['username'];
                $_SESSION['u_id']=$result['id'];
                echo $user->returnJson(1);
            }
            else
            {
                echo $user->returnJson(0);
            }
    }
} 
```

这是我的 jQuery 代码：

```
function signin()
{
    $("#btn_signin").click(function(){
        if($("#username").val()!="" && $("#password").val()!=""){
            $("#frm_signin").ajaxSubmit({
                 url:"index.php?op=loginUser",
                 dataType:"json",
                 success:function(jret){
                     if(jret.status==1)
                     {
                         $(".err").hide();
                         location.reload();
                     }
                     else
                     {
                        $(".err").html("نام کاربری یا رمز عبور اشتباه است").show(); 
                     }
                 }
                });
        }
        else
        {
            $(".err").html("لطفا نام کاربری و رمز عبور خود را وارد کنید.").show();
        }
    })
} 
```

# nhibernate - Fluent Nhibernate QueryOver 和 Joins

> ID：12931881
> 
> 赞同：1
> 
> 时间：2012-10-17T10:06:48.747
> 
> 标签：nhibernate, fluent-nhibernate

我正在学习 Fluent nHibernate。我在构建与我在网上找到的经典示例不完全相同的查询时遇到了麻烦。通常我发现这个例子：

```
IQueryOver<Cat,Cat> catQuery =
    session.QueryOver<Cat>(() => catAlias)
        .JoinAlias(() => catAlias.Kittens, () => kittenAlias)
        .Where(() => catAlias.Age > 5)
        .And(() => kittenAlias.Name == "Tiddles"); 
```

因此，根据我在此示例中的理解，在加入小猫之后返回 Cat 对象，然后使用小猫名称和猫的年龄进行过滤。连接有效，因为 Cat 对象有一个名为 Kittens 的属性。

我正在尝试做的一个示例如下所示：

```
Forest f = null;
Tree t = null;

ForestsFound = session.QueryOver<Forest>(() => f)
                    .JoinAlias(() => t.Forest, () => f)
                    .Where(() => t.NumberOfTrees > 1000)
                    .List<Forest>()
                    .ToList<Forest>(); 
```

森林本质上是一个查找表，它是树，它链接到树所在的森林，但我想返回一个不同的森林列表。因此，在常规 sql 中，它看起来像：

```
select f.*
from Forest f
   inner join Tree t
      on t.Forest_id = f.ID
where t.NumberOfTrees > 1000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:38:09.240

如果您与 Forest -> Trees 有关系，那么您可以这样做：

```
Forest f = null;
Tree t = null;

ForestsFound = session.QueryOver<Forest>(() => f)
    .JoinAlias(() => f.Trees, () => t)
    .Where(() => t.NumberOfTrees > 1000)
    .List<Forest>(); 
```

# matlab - matlab矩阵声明

> ID：12931883
> 
> 赞同：0
> 
> 时间：2012-10-17T10:07:07.060
> 
> 标签：matlab, matrix

我正在努力在 matlab 中声明一些更复杂的矩阵，也许你可以帮助我，我有一个 $T$ 值数组/我们称之为 $y = [y_0, \hdots, y_T]$ （它是一个数字信号代表一个声音）。

我正在使用公式：

```
\begin{equation}
    y_t= a_0 + \sum_{i=1}^p  (a_i y_{t-i} + \epsilon_t), t \geq p,
\end{equation} 
```

为了创建基于仅使用先前的 $p$ 值 $y_t$ 的合成信号，其中 $p$ 明显小于 y。我要做的是找到那些 $a_0, \vdots, a_p$ 参数以便使用 LSE 方法。

现在我需要你们帮助我：如何创建一个如下所示的矩阵：

```
\begin{equation}
    M =
    \begin{bmatrix}
        1 & 0 & 0 & 0 & 0 & \hdots & 0 \\
        1 & y_0 & 0 & 0 & 0 & \hdots & 0 \\
        1 & y_1 & y_0 & 0 & 0 & \hdots & 0 \\
        1 & y_2 & y_1 & y_0 & 0 & \hdots & 0 \\ 
        \vdots & \vdots & \vdots & \vdots & \vdots & \vdots & \vdots \\
        1 & y_{T-1} & y_{T-2} & \hdots & \hdots & \hdots & y_{T-p} \\
    \end{bmatrix}
    \in R^{T+1xp+1}
\end{equation} 
```

谢谢你的帮助

编辑：如何在这里格式化 LaTeX？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:46:30.703

您似乎需要一个代表一种卷积的矩阵。在 Matlab 中，toeplitz 函数在这里是相关的。

请参阅以下示例

```
>> y=[1 2 3 4 5 6 7];
>> toeplitz(y,[y(1) zeros(1,length(y)-1)])

ans =

 1     0     0     0     0     0     0
 2     1     0     0     0     0     0
 3     2     1     0     0     0     0
 4     3     2     1     0     0     0
 5     4     3     2     1     0     0
 6     5     4     3     2     1     0
 7     6     5     4     3     2     1 
```

所以你的代码应该如下所示

```
 M = [ones(length(y),1)  toeplitz(y,[y(1) zeros(1,length(y)-1)]) ];
 M = M(:,1:p+1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:47:16.310

由于问题的格式，很难看到发生了什么，但是这个怎么样：

```
M = zeros(length(y) + 1);

M(1) = 1;

for row = 2:length(y)+1
    M(1:row) = [1 y(row-1:-1:1)];
end 
```

# javascript - 中止 ajax 调用 javascript

> ID：12931886
> 
> 赞同：1
> 
> 时间：2012-10-17T10:07:08.153
> 
> 标签：javascript, jquery, ajax, call, abort

我使用下面来自 Stackoverflow 答案的代码来中止 JavaScript/jQuery 中的 AJAX 调用。

```
$.xhrPool.abortAll = function () {
  // alert('aborting.... outside');

  $(this).each(function (idx, jqXHR) {
    //jqXHR.abort();

    if (jqXHR && jqXHR.readyState != 4) {
        alert('aborting.... outside');
        jqXHR.abort();
    }
  });
  $.xhrPool.length = 0

  clearTimeout(timeoutOfCall);
  timeoutOfCall = null;
}; 
```

但是，当我这样调用这个函数时：

```
$.xhrPool.abortAll(); 
```

它在 IE 9 中的“未知属性”中生成错误，并且在 Chrome 中也不起作用。它仅适用于FF。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:22:39.193

如果您想停止特定的 ajax 调用并且您的 jquery 是 1.5.1 或最新版本，您可以使用 jqXHR 对象的“abort”方法。

```
var jqxhr = $.ajax(your ajax call);
jqxhr.abort(); 
```

# linux - 尝试访问新设置的 svn 目录（apache）时出现错误 403（禁止）

> ID：12931893
> 
> 赞同：0
> 
> 时间：2012-10-17T10:07:18.167
> 
> 标签：linux, apache, svn, ubuntu

我使用以下指南在装有 Ubuntu 的机器上设置 SVN 服务器：

> [如何在 GNU/Linux 上设置 Subversion (SVN) 服务器 - Ubuntu](https://stackoverflow.com/a/60792/1380710)

但是，当我尝试浏览 svn 目录 ( `https://X.X.X.X/svn`) 时，我收到“403 Forbidden”错误。

在`error.log`文件中，我每次都会得到以下两行：

> 无法获取资源信息。[403, #0]
> 
> (2)没有这样的文件或目录：URI 不包含存储库的名称。[403, #190001]

[Abatishchev 有一个类似的问题](https://stackoverflow.com/q/1948318/1380710)，他通过改变来解决它

`<Location /svn>`至`<Location /svn/>`

RedGlyph[建议](https://stackoverflow.com/a/1948667/1380710)将该行添加`RedirectMatch ^(/svn)$ $1/`到配置文件中。

不过，这些解决方案都没有改变我的任何东西。

* * *

如果我浏览`https://X.X.X.X/`，我可以在未经授权的情况下进入，并且可以浏览一个名为`apache2-default`的文件夹，其中包含文件`svnindex.css`和`svnindex.xsl`（通过[谷歌搜索](https://www.google.dk/search?q=%22Index%20of%20/apache2-default%22%20%22svnindex.css%22%20%22svnindex.xsl%22)似乎是标准的）

* * *

目标是拥有一个具有授权读写访问权限的工作 SVN 服务器，只有一个存储库（尽管指南中的配置使其兼容更多）。

我该如何设置 apache 来做到这一点？

# c# - Jquery 函数不适用于 HtmlEditorExtender

> ID：12931899
> 
> 赞同：1
> 
> 时间：2012-10-17T10:07:27.183
> 
> 标签：c#, jquery, asp.net, htmleditorextender

我有一个带有 HtmlEditorExtender 的文本框，单击 a-href 时，有一个 jquery 函数应该在文本框中附加文本。

该函数适用于普通文本框，但不适用于具有 HtmlEditorExtender 的文本框。

有任何想法吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:47:15.333

我设法以这种方式设置 TextBox 的文本：

```
document.getElementById('editor_HtmlEditorExtender_ExtenderContentEditable').innerHTML = "asdf"; 
```

其中**editor**是 TextBox 的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:26:50.453

要访问客户端上的控件实例，您可以在它自身的 DOM 元素上使用 control 属性，如下所示：

```
<script type="text/javascript"> //considering the editor is loaded.

var editorControl = $get("<%=editor.ClientID%>").control; 

//1\. For setting content: 

editorContorl.set_content("Sample Content"); 

//2\. For getting content:

var content = editorContorl.get_content(); 

</script> 
```

保重，M

# asp.net - System.Web.UI.IPostBackDataHandler.LoadPostData NullReferenceException 在 CheckBox PostBack 与 ComboBox 内 <% if { } %>

> ID：12931911
> 
> 赞同：1
> 
> 时间：2012-10-17T10:07:46.217
> 
> 标签：asp.net, ajaxcontroltoolkit

我在使用 Ajax Control Toolkit ComboBox 时遇到问题。这是我的测试标记页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default2.aspx.cs" Inherits="Default2" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
</asp:ToolkitScriptManager>
<div>
<asp:CheckBox ID="CheckBox1" runat="server" AutoPostBack="True" />
<% if (CheckBox1.Checked)
{ %><asp:ComboBox ID="ComboBox1" runat="server">
</asp:ComboBox>

<% } %>
</div>
</form>
</body>
</html> 
```

CheckBox1 上升 PostBack 后，我在 AjaxControlToolKit.ComboBox.System.Web.UI.IPostBackDataHandler.LoadPostData(stringpostDataKey, System.Collections.Specialized.Name.ValueCollection postCollection) 方法中得到 NullReferenceException 并且 Visual Web Developer 2010 Express 询问我的路径我没有的 ComboBox.cs 类。

没有`<% if { } %>`ComboBox 工作正常。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:46:20.597

原因是当复选框被选中并出现回发时，组合框控件期望从客户端数据集合发布的状态隐藏字段控件存在数据。

有两种解决方法：第一个在这个答案中建议：[https](https://stackoverflow.com/a/12364475/360171) ://stackoverflow.com/a/12364475/360171 第二个（确实更正确）是不要使用`<% ... %>`表达式来隐藏服务器控件。请改为在 Page_Load 方法中使用`ComboBox1.Visible = CheckBox1.Checked`。

此外，尽量避免`<% .. %>`在标记中使用表达式来对服务器控件执行任何操作。

# oracle - oracle函数中如何列出表

> ID：12931912
> 
> 赞同：0
> 
> 时间：2012-10-17T10:07:48.387
> 
> 标签：oracle, oracle11g

在 postresql 函数中，我们可以通过 FOR i IN (SELECT ...) 列出表

```
CREATE OR REPLACE FUNCTION f()
  RETURNS trigger AS
$BODY$
DECLARE
table_to_row RECORD;
BEGIN
<<for_loop>>
FOR table_to_row IN SELECT id FROM table1
LOOP
    //do something
END LOOP for_loop;
RETURN NULL;
END;
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100; 
```

我们如何在 Oracle 11g 中做这样的事情？我需要这部分

```
FOR table_to_row IN SELECT id FROM table1
LOOP
   //do something
END LOOP; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:13:35.007

在 Oracle 中，您不必显式声明游标循环变量。它隐含地属于`table_name%rowtype`数据类型。

这是一个例子：

```
For i in (select col_1, .., col_n
            from your_table)
loop
  -- do something
end loop; 
```

示范：

```
create table test_1(col1 varchar2(11));

Table created

SQL> insert into test_1(col1) values('data_1');

1 row inserted

SQL> insert into test_1(col1) values('data_2');

1 row inserted

SQL> insert into test_1(col1) values('data_3');

1 row inserted

SQL> commit;

Commit complete

SQL> set serveroutput on;

SQL>begin
  2    for i in (select col1 from test_1)
  3    loop
  4      dbms_output.put_line(i.col1);
  5    end loop;
  6  end;
  7  /

data_1
data_2
data_3

PL/SQL procedure successfully completed 
```

# android - 当我尝试关闭 BluetoothSocket 时抛出 IOException

> ID：12931913
> 
> 赞同：-1
> 
> 时间：2012-10-17T10:07:50.617
> 
> 标签：android

我的蓝牙插座有问题，我正在`IOException`告诉我：`Socket Closed`

异常发生在这里：

```
} catch (IOException e) {
        try {
          inputStream.close(); 
          socket.close();
        } catch (IOException e1) {
             Log.e("CLOSE: ", e.getMessage());
        } 
        Log.e("IO FROM RUN: ", e.getMessage());
} 
```

相关代码片段：

```
class AcceptThread extends Thread {
    /**
     * Tag that will appear in the log.
     */
    private final String ACCEPT_TAG = AcceptThread.class.getName();

    /**
     * The bluetooth server socket.
     */
    private final BluetoothServerSocket mServerSocket;

    public AcceptThread() {
        BluetoothServerSocket tmp = null;
        try {
            tmp = mBluetoothAdapter.listenUsingRfcommWithServiceRecord(
                    "Bluetooth Service", UUID.fromString(defaultUUID));
        } catch (IOException e) {
            e.printStackTrace();
        }
        mServerSocket = tmp;
    }

    public void run() {
        BluetoothSocket socket = null;
        while (true) {
            try {
                Log.i(ACCEPT_TAG, "Listening for a connection...");

                socket = mServerSocket.accept();
                Log.i(ACCEPT_TAG, "Connected to "
                        + socket.getRemoteDevice().getName());

            } catch (IOException e) {
                break;
            }
            // If a connection was accepted
            if (socket != null) {

                ReadInputThread inputThread = new ReadInputThread(socket); 
                inputThread.start();

            }
        }

    }

    /** Will cancel the listening socket, and cause the thread to finish */
    public void cancel() {
        try {
            mServerSocket.close();
        } catch (IOException e) {
        }
    }

    class ReadInputThread extends Thread {

        BluetoothSocket socket;
        InputStream inputStream;

        public ReadInputThread(BluetoothSocket socket) {
            InputStream tempIs = null;
            try {
                this.socket = socket;
                tempIs = socket.getInputStream();
            } catch (IOException e) {
                Log.e("IO: ", e.getMessage());
            }

            inputStream = tempIs;
        }

        public void run() {

            Log.i(TAG, "BEGIN ReadInputThread");
            final byte[] buffer = new byte[1024];
            int bytes;

            while (true) {

                try {
                    bytes = inputStream.read(buffer);
                    if(inputStream.available() < 0) {
                        inputStream.close();
                        socket.close();
                    }

                    Log.i("BYTE COUNT: ", Integer.toString(bytes)); 
                    Log.i("BYTES: ", new String(buffer)); 

                } catch (IOException e) {
                    try {
                        inputStream.close(); 
                        socket.close();
                    } catch (IOException e1) {
                    Log.e("CLOSE: ", e.getMessage());
                    } 
                    Log.e("IO FROM RUN: ", e.getMessage());
                }
            }

        }
    } 
```

任何人都可以给我一个关于如何解决这个问题的提示吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:21:54.970

看起来问题出在这段代码中：

```
while (true) {    
try {
                bytes = inputStream.read(buffer);
                if(inputStream.available() < 0) {
                    inputStream.close();
                    socket.close();
                }

                Log.i("BYTE COUNT: ", Integer.toString(bytes)); 
                Log.i("BYTES: ", new String(buffer)); 

            } catch (IOException e) {
                try {
                    inputStream.close(); 
                    socket.close();
                } catch (IOException e1) {
                Log.e("CLOSE: ", e.getMessage());
                } 
                Log.e("IO FROM RUN: ", e.getMessage());
            }
        } 
```

在您的 while 循环中，您首先尝试读取可用的内容，如果没有可用的内容，则关闭套接字。然后循环重复并尝试再次从套接字读取，但它关闭，给你 IOException。如果您想在没有数据可供读取的情况下退出循环，请确保在 socket.close() 之后添加 return 或 break。

# eclipse - Eclipse/ColdFusion Builder 插件错误

> ID：12931914
> 
> 赞同：0
> 
> 时间：2012-10-17T10:07:57.123
> 
> 标签：eclipse, coldfusion

我正在更新我在 Mac OSX 10.6.8 上的 ColdFusion Builder 独立安装中的一些插件。

批准更新选择后，我收到以下错误消息警报：

```
An error occurred while collecting items to be installed
session context was:(profile=profile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,org.apache.xerces,2.9.0.v201101211617
No repository found containing: osgi.bundle,org.eclipse.emf.common,2.7.0.v20110912-0920
No repository found containing: osgi.bundle,org.eclipse.emf.ecore,2.7.0.v20110912-0920
No repository found containing: osgi.bundle,org.eclipse.emf.ecore.xmi,2.7.0.v20110520-1406 
```

我以前没见过这个。任何人都知道如何解决这个问题，以便我可以重新更新我的插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:03:46.167

这已解决。主要问题是缺乏生态。我运行了一个过滤器类型来找到这个特定的插件添加并安装它。成功安装并重新启动后，所有其他插件都能正常更新。

# php - 从清理的标签创建数组

> ID：12931915
> 
> 赞同：4
> 
> 时间：2012-10-17T10:07:59.600
> 
> 标签：php, regex

在我的网站上，我让用户发送这样的标签：

```
tag tagtwo anothertag 
```

我只想让他们使用单个空格和字母，所以我想删除数字、破折号、双空格等。所以无效的字符串是：

```
tag       tag2 another-tag 
```

我有以下代码来执行此操作，但我不知道要使用的正确正则表达式。

```
$tags = strtolower($_POST['imgTags']);
$tags = preg_replace("/regex/", "", $tags);
$tagArray = explode(" ", $tags); 
```

执行此操作的正确正则表达式是什么？另外，我可能想用 e 和 o 替换 é 和 ö。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:16:18.063

这将删除除字母和空格之外的任何内容：

```
$tags = preg_replace("/[^a-z ]/i", "", $tags); 
```

然后这将折叠连续的空格：

```
$tags = preg_replace("/ {2,}/", " ", $tags); 
```

如果您想允许其他类型的空白字符，但也用单个空格替换它们，请尝试以下操作：

```
$tags = preg_replace("/[^a-z\s]/i", "", $tags);
$tags = preg_replace("/\s+/", " ", $tags); 
```

关于你的最后一句话：没有通用的方法。您将必须添加特定规则。但是，`preg_replace_callback`可能会帮助您确定未修改的字母。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:13:09.163

要仅保留字母和空格，请使用：

```
$tags = preg_replace("/[^a-zA-Z\s]/", "", $tags); 
```

要规范化空格，请添加：

```
$tags = preg_replace("/\s+/", " ", $tags); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:14:04.663

> 所以我想删除数字、破折号、双空格

`/([0-9\-]|[\s]{2,})/`应该作为正则表达式

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T10:15:31.683

首先用一个替换多个空格和制表符：

```
/([ \t])[ \t]*/$1/ 
```

然后用 null 替换除字母和空格之外的所有内容：

```
/[^A-Za-z ]+// 
```

* * *

**PHP 代码**

```
$tags = preg_replace('/([ \t])[ \t]*/', '$1', $tags);
$tags = preg_replace('/[^A-Za-z ]+/', '', $tags); 
```

**输入**

```
tag       tag2 another-tag 
```

**输出**

```
tag tag anothertag 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T10:17:08.840

很简单：

要删除数字和破折号：

```
$tags = preg_replace("/[0-9\-]/", "", $tags); 
```

然后删除多个空格：

```
$tags = preg_replace("/[\s]{2,}/", " ", $tags); 
```

**[正则表达式演示](http://regexr.com?32g9g)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T10:12:33.483

正则表达式将是

```
[a-zA-Z ]+ 
```

这允许大写或小写字母和单个空格字符组合。

# android - Eclipse 最大 xml 文件大小

> ID：12931918
> 
> 赞同：1
> 
> 时间：2012-10-17T10:08:03.360
> 
> 标签：android, xml, eclipse

我正在制作一个需要 2 个大数组的 android 应用程序。每个都有一个单独的 xml 文件。一个是 2.5 MB，另一个几乎是 10 MB。现在，每当我尝试保存工作空间时，构建工作空间的过程都会卡在 46%。我将 eclipse.ini 文件更改为

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502
-product
org.eclipse.epp.package.java.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
512M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
512m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms512m
-Xmx1024m 
```

它仍然卡住了。我应该怎么办？

# objective-c - enumerateObjectsUsingBlock：未执行

> ID：12931925
> 
> 赞同：0
> 
> 时间：2012-10-17T10:08:20.533
> 
> 标签：objective-c, nsarray, block

这就是我所说的：

```
/**
 *  called when we are notified that a product has been purchased
 *
 *  @param  notification                the notification object calling this method
 */
- (void)productPurchased:(NSNotification *)notification
{
    //  the notification object is purchased product identifier
    NSString *productIdentifier         = notification.object;

    NSLog(@"Product purchased");

    //  reload appropriate cell with checkmark
    [_products enumerateObjectsUsingBlock:^(SKProduct *product, NSUInteger idx, BOOL *stop)
    {
        NSLog(@"Block executing with product: %@", product.productIdentifier);
        NSLog(@"Needs to match: %@", productIdentifier);

        if ([product.productIdentifier isEqualToString:productIdentifier])
        {
            [self.tableView reloadRowsAtIndexPaths:@[[NSIndexPath indexPathForRow:idx inSection:0]]
                                  withRowAnimation:UITableViewRowAnimationFade];
            NSLog(@"Reloading due to purchase");
            *stop                       = YES;
        }
    }];
} 
```

但是，该块永远不会被调用，因此表格视图单元格永远不会被重新加载。我可以说该块永远不会执行，因为日志永远不会出现在控制台中。但是，通过放置断点，我已经能够确定 productPurchased: 方法肯定被调用了。

任何帮助表示赞赏。

谢谢你。

编辑：我现在更改了上面的代码，以允许在整个执行过程中进行更多的日志记录。从我通过查看控制台收集到的信息来看，传入的通知对象是表格视图本身：

```
<UITableView: 0x1eaffe00; frame = (0 0; 320 704); clipsToBounds = YES; autoresize = W+H; gestureRecognizers = <NSArray: 0x1e57dfe0>; layer = <CALayer: 0x1e57da50>; contentOffset: {0, 0}> 
```

这显然是调用此函数的问题，因此我将进一步调查，并在获得答案后立即发布我的答案。

现在我将介绍如何调用这个函数：

**签署通知：**

```
/**
 *  notifies the view controller that its view is about to be added to a view hierarchy
 *
 *  @param  animated                    whether it will be added in an animated fashion
 */
- (void)viewWillAppear:(BOOL)animated
{
    //  add ourselves as an observer to product purchases
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(productPurchased:) name:IAHelperProductPurchasedNotification object:nil];
} 
```

**发送通知：**

```
/**
 *  handles all the extra work not that a product has been purchased
 *
 *  @param  productIdentifier           the purchased product's identifier
 */
- (void)provideContentForProductIdentifier:(NSString *)productIdentifier
{
    //  adds the product's id to our purchased product ids list
    [_purchasedProductIdentifiers addObject:productIdentifier];

    //  stores this purchase in nsuserdefaults for long term use
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:productIdentifier];
    //  save the user defaults
    [[NSUserDefaults standardUserDefaults] synchronize];

    //  send notification to tohers for awareness of this purchase
    [[NSNotificationCenter defaultCenter] postNotificationName:IAHelperProductPurchasedNotification object:productIdentifier userInfo:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:31:45.753

这是一个非常愚蠢的错误：

该通知不断发布，但不是通过我在问题中包含的方法。

这一切都源于通知名称本身。

我已经在 IAPHelper.h 类中对其进行了实例化，如下所示：

```
//  used to notify listeners when a product is purchased
UIKIT_EXTERN NSString *const IAHelperProductPurchasedNotification; 
```

在实现文件（IAPHelper.m）中，我一直在这样做：

```
NSString *const IAHelperProductPurchasedNotification; 
```

当我需要这样做时：

```
NSString *const IAHelperProductPurchasedNotification = @"IAPHelperProductPurchasedNotification"; 
```

奇怪的是，通知只是被重复调用，但是，很难预测其中一些愚蠢的错误的行为。

感谢您花时间帮助我。

# java - XMemcached 复制中 SessionLocator 的好处

> ID：12931928
> 
> 赞同：3
> 
> 时间：2012-10-17T10:08:27.900
> 
> 标签：java, xmemcached

在我的 Java 应用程序中，我们使用 Memcached 来设置数据并在稍后的过程中获取相同的数据。后来对 Memcached 应用了 repatch，因为引入了一个新的 memcache 实例，它实际上复制了 memcached1 和 memcahced2 实例之间的键。因此，Memcached Instance1 中的所有键都复制到 Memcahced Instacne 2。为了确保 SET 没有任何问题，我手动确认数据已添加到两个 Memcached 实例中。

**我的配置： - Xmemcached (1.3.5) 与 repach （用于复制目的）**

在 2 个 memcache 实例之间平均共享数据的最佳策略是什么？有没有我没有正确使用的配置？我应该使用另一个库吗？

顺便说一句，我遇到了 KetamaMemcachedSessionLocator 它将充当负载平衡器吗？我的意思是它会在两个 memcahced 实例之间平均分配密钥存储吗？

谢谢您的帮助！

# asp.net-mvc-2 - 区域内的控制器子文件夹

> ID：12931929
> 
> 赞同：1
> 
> 时间：2012-10-17T10:08:33.000
> 
> 标签：asp.net-mvc-2, asp.net-mvc-routing

我在区域的控制器文件夹中有子文件夹

控制器

*   api
    *   用户控制器
    *   产品
        *   产品1控制器

我想在用户请求时访问 product1 控制器`http://mysite/api/products/product1/Index`

和意见文件夹像

*   意见
    *   api
        *   用户
        *   产品
            *   产品1

我的 apiAreaRegistration.cs 像这样

```
public class apiAreaRegistration : AreaRegistration
    {
        public override string AreaName
        {
            get
            {
                return "api";
            }
        }

        public override void RegisterArea(AreaRegistrationContext context)
        {    
            context.MapRoute(
                "api_default",
                "api/{controller}/{action}/{id}",
                new { controller = "Offers", action = "Index", id = UrlParameter.Optional },
                new string[] { "TracerAPI.Areas.api.Controllers" }
            );
        }
    } 
```

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:15:54.170

它违反了 asp.net mvc 约定。如果不对 Asp.Net MVC 框架进行深度重新编码，就无法做到这一点。

# php - 解析器和词法分析器生成器 php

> ID：12931930
> 
> 赞同：3
> 
> 时间：2012-10-17T10:08:35.917
> 
> 标签：php

我正在做一项学术工作，我需要为 php 使用解析器和词法分析器生成器。我在互联网上搜索，我发现[了这个](http://pear.php.net/package/PHP_ParserGenerator/docs/latest/)

问题是创建语法和 plex 文件。例如：

```
<?php
class blah {
/*!lex2php
%input $this->data
%counter $this->N
%token $this->token
%value $this->value
%line $this->line
variable = @/?:([a-zA-Z0-9_]+)/?@
*/
/*!lex2php
variable {$a = 1;}
*/
}
?> 
```

有人可以解释一下那个代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:15:43.627

第一个注释块用于声明。所有的 % 声明主要是供内部使用，在这个阶段并不是很相关。
不过这`variable = @/?:([a-zA-Z0-9_]+)/?@`很有趣。它定义了一个[非终结符号](http://en.wikipedia.org/wiki/Terminal_and_nonterminal_symbols#Nonterminal_symbols) `variable`，由正则表达式定义`@/?:([a-zA-Z0-9_]+)/?@`。

如果您使用此 plex 文件生成您的词法分析器并提供如下内容：

```
234lksdf lskdjf324 kl234jd 
```

令牌流如下：

```
token: variable
value: 234lksdf 

token: variable
value: lskdjf324 

token: variable
value: kl234jd 
```

# sql-server - 如何在本地 PC 上仅通过 IP 访问 SQL SERVER 2008？

> ID：12931939
> 
> 赞同：1
> 
> 时间：2012-10-17T10:09:03.483
> 
> 标签：sql-server

我已经安装了 SQL Server 2008，但现在我只能通过写“PCNAME\SQL”来访问。那么我可以配置什么来仅通过 IP 访问 SQL Server 2008？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:19:15.997

我想`SQL`是`named instance`你已经安装了，对吧？所以你不能只使用你的IP来访问它，你需要输入实例的名称。您应该能够通过以下方式做到这一点：

*   your_ip\SQL
*   127.0.0.1\SQL
*   本地主机\SQL

如果您安装了默认实例，则应该能够使用上述所有选项进行访问，而无需 `\SQL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:27:50.113

第一的 ：

*   打开 Sql Server 配置管理器

*   选择 SQL Server 网络配置

*   启用 TCP/IP

然后在 SQL Server 服务中重新启动你的 SQL Server

现在您可以通过 IP 连接到您的 SQL Server：yourIp\SQL 或 yourIp 或 yourIp\SQLEXPRESS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:29:55.500

如果您安装了默认实例，则可以使用// `.`/`localhost`定位`127.0.0.1`。`yourip`

如果您已命名实例，则需要指定名称。即`.\INSTANCE_NAME`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T10:33:33.657

总是有许多选项可以连接到本地安装的 SQL Server：

`.`, `localhost`, `127.0.0.1`, `(locaL)`.

不仅如此：

[http://mssqlforum.com/posts/63/](http://mssqlforum.com/posts/63/)

但是，如果您安装了实例，则必须按照 Diego 的规定添加该实例。

# objective-c - 如何在我的 OS X 应用程序中使用颜色窗口？

> ID：12931941
> 
> 赞同：0
> 
> 时间：2012-10-17T10:09:10.800
> 
> 标签：objective-c, xcode, macos, cocoa

我正在编写一个应用程序，我想通过在颜色窗口中设置新颜色来更改矩形的填充颜色：

[![](../Images/68720b6befc89762a7193ca081dff7b2.png)](https://i.stack.imgur.com/FYDj5.png)

当我的应用程序运行时，我可以通过按 ⌘⇧C 来显示此窗口。我想将该窗口与我的 ViewController 连接，获取用户选择的新颜色，并将其用作`drawRect:`方法中我的 NSRect 的填充颜色。

如何从颜色窗口设置和获取颜色？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:23:33.733

您要使用的是`NSColorPicker`类。文档从[这里](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DrawColor/Tasks/ChoosingColors.html)开始。

[此问题](https://stackoverflow.com/questions/3781326/subclass-nsview-to-change-background-color)中的代码显示了您需要进入的方向。您需要`changeColor:`在第一响应者中实现该方法。（不要完全遵循该代码，因为它有一个错误。）

# angularjs - 在不更改源的情况下扩展 AngularJS 函数 filterFilter？

> ID：12931944
> 
> 赞同：1
> 
> 时间：2012-10-17T10:09:16.607
> 
> 标签：angularjs

我已经修改了 AngularJS 函数 filterFilter 所以我可以使用完全匹配。所以搜索“1”只给出“1”，而不是“11”、“12”等。

```
function filterFilter() {
  return function(array, expression,exact) {
  ...
    var search = function(obj, text){
    ...
      case "string":
        return exact?('' + obj).toLowerCase() === text:('' + obj).toLowerCase().indexOf(text) > -1; 
```

现在我可以像这样使用它：sectionDicts | 过滤器：{id：section.sectionDictId}：真

但是如何在不修改 Angular 的源代码的情况下扩展这个功能呢？我发现这个[如何扩展或覆盖 angularjs 中的现有过滤器？](https://stackoverflow.com/questions/12236905/how-to-extend-or-override-existing-filters-in-angularjs)但我认为这是另一种情况。

这个[https://groups.google.com/forum/#!msg/angular/v-WjFF-iR88/XSXRhkGhf_sJ](https://groups.google.com/forum/#!msg/angular/v-WjFF-iR88/XSXRhkGhf_sJ)也不起作用

**编辑** 按照建议，我添加了新过滤器。我刚刚复制了filterFilter，根据我的需要对其进行了修改。虽然我还必须从 angular.js 复制函数 getter 和 isFunction

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:43:40.890

您可以创建自己的过滤器来满足您的需求。至少我知道，没有办法改变这个函数的内部工作方式。此外，听起来您想要做的与 angular 的“过滤器”过滤器的记录行为根本不同，如果您更改原始文件，只会让下一个开发人员感到困惑。

# cakephp - 组件是在控制器 CakePHP 中破坏代码的最佳实践吗

> ID：12931946
> 
> 赞同：1
> 
> 时间：2012-10-17T10:09:19.137
> 
> 标签：cakephp, controller

我正在使用 CakePHP 开发一个 Web 应用程序。我的申请流程如下：

*   一个文件被上传表单视图。

*   控制器接收文件。现在根据文件的类型，我进行不同类型的处理。但最终提取的参数相同并保存到数据库中的同一张表中。在对每种类型的文件进行处理时，我的控制器变得非常冗长。我在[这里](https://groups.google.com/forum/?fromgroups=#!topic/cake-php/0_P2bG13l58)和[这里](https://groups.google.com/forum/?fromgroups=#!topic/cake-php/FESG4oc1_5I)看到了一些鼓励使用的帖子，`component`但是从[cakebook 中](http://book.cakephp.org/1.3/en/view/994/Introduction)它说当你想在不同的控制器之间共享代码时使用组件，我猜它是类的实用程序类型。

我的问题是如何`controller`在不同的文件中破坏我的代码，以便在我的控制器中接收到特定类型的文件后，我可以重定向我的流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:24:09.723

处理上传是数据处理，应该通过这个进入模型。我个人认为所有这些野外的组件解决方案都不适合它。

如果您将上传处理移动到模型中，您可以拥有单个控制器并在模型方法中进行所有检查，然后可以调用关联模型或获取模型实例，该实例最终将处理您想要的文件类型由该模型处理。

随意看看我的[FileStorage](https://github.com/burzum/FileStorage)插件。阅读 readme.md 它可能会给你一些关于正确处理文件的更多想法。IMO 不应仅通过将路径保存在例如 Users.avatar 中来将文件直接附加到记录，而应将文件与用户模型相关联：用户 hasOne Avatar。处理文件和处理它们会容易得多，并且您可以统一处理所有文件。

# android - 没有片段的 Android 功能区菜单

> ID：12931952
> 
> 赞同：3
> 
> 时间：2012-10-17T10:09:35.510
> 
> 标签：android, android-layout, ribbon

如何在**不使用片段的情况下实现 facebook 之类的滑动菜单**？我提到了 github，但他们也为此使用了片段。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:14:51.453

我在不使用片段的情况下实现了功能区菜单。您可以使用片段参考此链接[Android 功能区菜单](https://stackoverflow.com/questions/12525267)。在那我提供了功能区菜单的代码而不使用片段。请检查一下。它真的会帮助你解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:24:42.653

我推荐使用这个库：[https](https://github.com/bk138/LibSlideMenu) ://github.com/bk138/LibSlideMenu 。它不使用片段并且非常有用。

# facebook - 如何从给定的公司名称中查找 URL、Twitter 用户名、LinkedIn 用户名、Facebook 用户名？

> ID：12931962
> 
> 赞同：0
> 
> 时间：2012-10-17T10:09:57.773
> 
> 标签：facebook, twitter, semantics, semantic-web, semantic-analysis

我有一份公司名单：

```
New York Times
Sony
Washington Post
Panasonic
Toyota
others... 
```

对于列表中的每家公司，我需要：

```
Company URL
Twitter @Username
LinkedIn Username
Facebook Username 
```

是否有以自动化方式执行此操作的 API 服务？也许各种服务的组合可以工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:25:02.613

I don't know about the other networks, but for Facebook, you can simply locate the Page using a combination of API Search:

```
https://graph.facebook.com/search?q=New%20York%20Times&type=page 
```

This will return a lot of Page IDs:

```
{
   "data": [
      {
         "name": "The New York Times",
         "category": "Media/news/publishing",
         "id": "5281959998"
      },
      {
         "name": "W New York - Times Square",
         "category": "Hotel",
         "id": "107574351937"
      },
      {
         "name": "The New York Times Crossword Puzzle",
         "category": "Community",
         "id": "230891537029840"
      },
      {
         "name": "The New York Times Travel Show",
         "category": "Company",
         "id": "135183981456"
      },
      {
         "name": "InterContinental New York Times Square",
         "category": "Travel/leisure",
         "id": "225795063575"
      },
      {
         "name": "Well | The New York Times",
         "category": "Media/news/publishing",
         "id": "181548405298864"
      },
 ...
} 
```

For most major companies, you can probably assume that the first ID in the list is the correct page. You could check by looking up each ID like so:

```
https://graph.facebook.com/5281959998 
```

You will see in response two fields that are relevant: `website` and `likes`

Likes will show the number of fans that the page have (you can probably assume that the one with the most fans is the correct page) and website will provide the company-specified URL of their website.

# google-maps-api-3 - 在 Google Maps v3 中访问折线的子节点

> ID：12931964
> 
> 赞同：1
> 
> 时间：2012-10-17T10:10:06.827
> 
> 标签：google-maps-api-3

[JSFiddle 上的示例代码](http://jsfiddle.net/FahVc/)

你好，

我想在 Google Maps v3 中“访问”折线的子节点（正方形）。通过访问，我的意思是从折线上删除这个点并自动重新连接邻居。是否有用于“访问”节点的事件监听器？我找不到任何东西。

谢谢你的帮助！

///////////////////////////////////////// //////////////////////////////////

**找到解决方案**（[JSFiddle](http://jsfiddle.net/FahVc/)）：

```
var deleteNode = function(mev) {
  if (mev.vertex != null) {
    my_poly.getPath().removeAt(mev.vertex);
  }
}
google.maps.event.addListener(my_poly, 'rightclick', deleteNode); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:38:11.773

有关可编辑折线上可用的事件，请参阅此问题的答案：

[谷歌地图折线点击不会触发 PolyMouseEvent](https://stackoverflow.com/questions/12060327/google-maps-polyline-click-does-not-fire-polymouseevent/12060897#12060897)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:01:35.803

**找到解决方案**（[JSFiddle](http://jsfiddle.net/FahVc/)）：

```
var deleteNode = function(mev) {
  if (mev.vertex != null) {
    my_poly.getPath().removeAt(mev.vertex);
  }
}
google.maps.event.addListener(my_poly, 'rightclick', deleteNode); 
```

# perl - 安装替代 perl 版本 - 缺少模块

> ID：12931965
> 
> 赞同：3
> 
> 时间：2012-10-17T10:10:07.123
> 
> 标签：perl, perlbrew

我有一个使用旧版本 Perl 的 webapp。因此，我使用 perlbrew 安装了一个独立的 Perl 版本，创建了一个符号链接 /usr/bin/perlx 并更改了我所有 perl 文件中的路径。但是，我安装的附加模块仍然存在一些问题。如果我尝试启动 webapp，我会收到一条错误消息：

> 无法在 @INC 中找到 JSON/XS.pm（@INC 包含：/opt/perlbrew/perls/perl-5.10.1/lib/5.10.1/x86_64-linux /opt/perlbrew/perls/perl-5.10\. 1/lib/5.10.1 /opt/perlbrew/perls/perl-5.10.1/lib/site_perl/5.10.1/x86_64-linux /opt/perlbrew/perls/perl-5.10.1/lib/site_perl/5.10。 1 .) 在 ism/readfn.pm 第 42 行。

根据`cpan -i JSON::XS`，模块已安装：

> JSON::XS 是最新的 (2.33)

但是，`find /opt/ -name 'XS.pm'`仅打印其他位置：

> /opt/perlbrew/perls/perl-5.10.1/lib/5.10.1/x86_64-linux/List/Util/XS.pm /opt/perlbrew/perls/perl-5.10.1/lib/5.10.1/ExtUtils /Constant/XS.pm /opt/perlbrew/build/perl-5.10.1/ext/List-Util/lib/List/Util/XS.pm /opt/perlbrew/build/perl-5.10.1/lib/List /Util/XS.pm /opt/perlbrew/build/perl-5.10.1/lib/ExtUtils/Constant/XS.pm /opt/perlbrew/build/perl-5.10.1/t/lib/MakeMaker/Test/Setup /XS.pm

任何的想法？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:14:13.173

检查您`cpan`是否正在使用与`perl`您未`JSON::XS`安装的相同：

```
which perl
which cpan 
```

# github - GitHub - README.md Windows 编辑器？

> ID：12931966
> 
> 赞同：8
> 
> 时间：2012-10-17T10:10:07.460
> 
> 标签：github, github-for-windows

我在 GitHub 上有很多库，想为所有库编写 README.md。我通过在本地 repo 上写入 README.md 来做到这一点，然后将其推送到 github，在那里我可以看到更改。

有没有其他方法可以做到这一点？是否有一些 Windows 编辑器，所以我可以在本地 PC 上编写 README.md 和所有标签，看看 README.md 输出的样子？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-17T10:11:25.470

我更喜欢[MarkdownPad](http://markdownpad.com/)。它在实际降价代码旁边为您提供了一个不错的预览窗口：

![在此处输入图像描述](../Images/3a6464f1b857f147f4e3c8e21c782045.png)

请注意，如果要使其符合 Github 自己的 markdown 语法，则需要额外安装[markdownpad-github](https://github.com/nicolahery/markdownpad-github)。

**编辑：** MarkdownPad 2 Pro 已宣布支持 Github 风格的降价： http: [//markdownpad.com/news/2013/introducing-markdownpad-2/](http://markdownpad.com/news/2013/introducing-markdownpad-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-06T19:11:42.257

我会将[MaNo](https://github.com/mougino/MaNo)添加到 WindowsTM 的选项列表中。270k 时非常轻巧。不是所见即所得，而是 F5 来生成 HTML 并加载到默认查看器中。[MaNo Markdown 记事本编辑器](https://i.stack.imgur.com/aPbjD.jpg)

用于生成 html 文件、在浏览器中加载和退出的命令行选项 - 使用 MaNo 作为 Markdown 查看器。

亲切的问候加文霍尔特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-28T14:30:18.610

我迟到了，但是[VS Code](https://code.visualstudio.com/)有一个非常好的内置降价编辑器和实时预览。您可以在右侧（或左侧，如果您是那种人）捕捉预览选项卡，以查看您所做的更改。

[![在 VS Code 上编辑 README.md](../Images/585d9cbea3bef2bfb5804116d546dfbd.png)](https://i.stack.imgur.com/YcOXc.png)

# magento - Magento 管理员登录不起作用

> ID：12931967
> 
> 赞同：0
> 
> 时间：2012-10-17T10:10:09.473
> 
> 标签：magento, admin

我将我的网站从一个托管服务提供商迁移到另一个。当我在更改名称服务器之前更改服务器上的 A 记录时，一切正常。

更改名称服务器后，问题开始蔓延。首先没有链接在工作。在询问提供商后，他们说 .htaccess 是空白的，他们已经恢复了默认配置，一切正常。

链接已开始工作，但我无法登录管理部分。单击登录后，我被重定向到同一页面，而 URL 没有任何更改。

**更新**

访问[http://eyaas.com/admin](http://eyaas.com/admin)，输入任何凭据，然后单击登录以查看问题。什么都没发生

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T11:23:15.733

首先，删除浏览器中的所有 cookie，然后重试。

如果身份验证成功（您确定您的凭据）但 magento 在管理员登录页面上重定向您而没有任何错误，则问题可能是您和服务器之间的时间同步不正确..（在浏览器中创建的 cookie自动自毁，因为它立即过期）

检查服务器和客户端系统日期/时间。

ps：你是否修改了表 core_config_data 中的所有 url？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T06:58:37.003

您必须更改 cookie 存储路径，以便在您的数据库中注入以下更新查询。

更新`core_config_data`集`value`= 'new_domain' 其中`path`= 'web/cookie/cookie_domain';

在上面的查询中，如果您的域是 www.vibrantwebstore.com 而 new_domain 是 '.vibrantwebstore.com' 或留空（''）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T18:54:51.590

尝试多种不同的浏览器，包括 Safari 或 Opera。Chrome 会出现一些问题，您需要记住在进行更改后清除您在 Chrome 中的缓存！

[http://www.magentocommerce.com/wiki/how_to_fix_login_for_admin_on_local_install#dokuwiki__top](http://www.magentocommerce.com/wiki/how_to_fix_login_for_admin_on_local_install#dokuwiki__top)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-15T13:15:56.913

它发生在我身上，我尝试了一切。更改了 Varien.php 文件，清除了缓存文件和所有内容，但仍然无法正常工作。我的问题是PHP版本。我有 PHP 7，而我的 magento 是 1.8，因此它无法正常工作，所以我所做的只是将我的 PHP 升级到 5.6 版本并且它运行良好。

# ios - NSInternalInconsistencyException 无效参数不满足：推送视图时的颜色

> ID：12931970
> 
> 赞同：3
> 
> 时间：2012-10-17T10:10:20.650
> 
> 标签：ios

当我尝试通过导航控制器导航到另一个屏幕时，我得到一个 NSInternalInconsistencyException。我完全不知道该怎么办，有人可以帮我吗？

*编辑它在 iOS 6 模拟器上运行良好，但在 iPad 1 4.3 上让我崩溃了。

这是代码片段：

```
LoginViewController* loginView = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];
[self.navigationController pushViewController:loginView animated:YES]; 
```

和错误：

```
*** Assertion failure in -[UITextFieldLabel setTextColor:], /SourceCache/UIKit/UIKit-1448.89/UILabel.m:314
2012-10-20 11:52:54.477 hra[1854:507] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid parameter not satisfying: color'
*** Call stack at first throw:
(
0   CoreFoundation                      0x331a964f __exceptionPreprocess + 114
1   libobjc.A.dylib                     0x35b81c5d objc_exception_throw + 24
2   CoreFoundation                      0x331a9491 +[NSException raise:format:arguments:] + 68
3   Foundation                          0x359d8573 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 62
4   UIKit                               0x32d3f991 -[UILabel setTextColor:] + 96
5   UIKit                               0x32d774df -[UITextField createTextLabelWithTextColor:] + 150
6   UIKit                               0x32e7e925 -[UITextField initWithCoder:] + 344
7   UIKit                               0x32f6d1cf UINibDecoderDecodeObjectForValue + 1646
8   UIKit                               0x32f6d347 -[UINibDecoder decodeObjectForKey:] + 66
9   UIKit                               0x32f0c0bd -[UIRuntimeConnection initWithCoder:] + 88
10  UIKit                               0x32f6d1cf UINibDecoderDecodeObjectForValue + 1646
11  UIKit                               0x32f6cd99 UINibDecoderDecodeObjectForValue + 568
12  UIKit                               0x32f6d347 -[UINibDecoder decodeObjectForKey:] + 66
13  UIKit                               0x32f0b7c7 -[UINib instantiateWithOwner:options:] + 458
14  UIKit                               0x32f0ce09 -[NSBundle(UINSBundleAdditions) loadNibNamed:owner:options:] + 92
15  UIKit                               0x32e865e9 -[UIViewController _loadViewFromNibNamed:bundle:] + 36
16  UIKit                               0x32e53fa5 -[UIViewController loadView] + 80
17  UIKit                               0x32d38ebf -[UIViewController view] + 30
18  UIKit                               0x32d475ef -[UIViewController contentScrollView] + 22
19  UIKit                               0x32d4745f -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 30
20  UIKit                               0x32d4735d -[UINavigationController _layoutViewController:] + 24
21  UIKit                               0x32d46e35 -[UINavigationController _startTransition:fromViewController:toViewController:] + 380
22  UIKit                               0x32d46c43 -[UINavigationController _startDeferredTransitionIfNeeded] + 182
23  UIKit                               0x32d38d5d -[UINavigationController pushViewController:transition:forceImmediate:] + 640
24  UIKit                               0x32d38ad3 -[UINavigationController pushViewController:animated:] + 34
25  hra                                 0x000102d9 -[MainMenuController goToLoginScreenButtonPressed:] + 156
26  CoreFoundation                      0x33119571 -[NSObject(NSObject) performSelector:withObject:withObject:] + 24
27  UIKit                               0x32d1eec9 -[UIApplication sendAction:to:from:forEvent:] + 84
28  UIKit                               0x32d1ee69 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 32
29  UIKit                               0x32d1ee3b -[UIControl sendAction:to:forEvent:] + 38
30  UIKit                               0x32d1eb8d -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 356
31  UIKit                               0x32d1f423 -[UIControl touchesEnded:withEvent:] + 342
32  UIKit                               0x32d1dbf5 -[UIWindow _sendTouchesForEvent:] + 368
33  UIKit                               0x32d1d56f -[UIWindow sendEvent:] + 262
34  UIKit                               0x32d06313 -[UIApplication sendEvent:] + 298
35  UIKit                               0x32d05c53 _UIApplicationHandleEvent + 5090
36  GraphicsServices                    0x35fdee77 PurpleEventCallback + 666
37  CoreFoundation                      0x33180a97 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 26
38  CoreFoundation                      0x3318283f __CFRunLoopDoSource1 + 166
39  CoreFoundation                      0x3318360d __CFRunLoopRun + 520
40  CoreFoundation                      0x33113ec3 CFRunLoopRunSpecific + 230
41  CoreFoundation                      0x33113dcb CFRunLoopRunInMode + 58
42  GraphicsServices                    0x35fde41f GSEventRunModal + 114
43  GraphicsServices                    0x35fde4cb GSEventRun + 62
44  UIKit                               0x32d30d69 -[UIApplication _run] + 404
45  UIKit                               0x32d2e807 UIApplicationMain + 670
46  hra                                 0x00002bdb main + 158
47  hra                                 0x00002b38 start + 40
)
terminate called after throwing an instance of 'NSException' 
```

如果需要更多信息，请询问，我会尽我所能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T11:12:31.127

我仔细查看了 xib，发现我的一个文本视图的颜色设置为“黑色”。我将其设置为“默认”，一切都再次起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:38:32.410

这种问题发生在 xcode 4.5 以后。因此，请确保在您的 xib 文件中，如果有任何未使用的视图，则将其删除。会帮助你们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:17:59.460

它与`[UITextFieldLabel setTextColor:]`非视图控制器有关。检查代码中的文本字段颜色。

# tomcat - Tomcat最大线程数

> ID：12931971
> 
> 赞同：0
> 
> 时间：2012-10-17T10:10:26.197
> 
> 标签：tomcat, threadpool

我了解设置连接池中可用的最大连接数应与为 Tomcat 服务器配置的 maxThreads 相同（这与可以处理的请求数相关）

对于 tomcat，默认值为 200，我假设在事情开始失控之前，您可以安全地为 Tomcat 服务器配置一个最大值，我假设这也受运行它的机器的资源控制。

我试图了解人们成功使用的 maxThreads 的大小，1000 太大了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:14:19.807

我确信有文章科学地描述了这一点，但我会给出我的意见。

首先，我没有将连接池 conns 设置为等于线程数和工作线程数。如果你这样做了，那么有 conns 池是没有意义的。数据库服务器容量驱动这个数字，但我通常驱动大约 50-80% 的工作线程，并确保数据库集群能够处理负载。

问题是您尝试处理的线程越多，您使用的内存就越多，您可能拥有的争用就越多。我尽量不让每个 JVM 运行超过 6GB 的堆，因此垂直和水平扩展确实可以处理负载。

不幸的是，只有性能测试才能帮助您找出这些数字的最佳位置。

# android - Android : SQLite 搜索

> ID：12931973
> 
> 赞同：0
> 
> 时间：2012-10-17T10:10:34.730
> 
> 标签：android, sqlite, android-sqlite

我正在开发一个简单的应用程序，它插入数据库并在插入的数据中搜索

我创建了数据库，我可以看到插入的所有行...我想使用 Name 列搜索行

我有一个错误，我不知道错误行在哪里

下面是我创建数据库的代码。

```
sampleDB =  this.openOrCreateDatabase(SAMPLE_DB_NAME, MODE_PRIVATE, null);

sampleDB.execSQL("CREATE TABLE IF NOT EXISTS "+SAMPLE_TABLE_NAME +
                    " (Id INT(50), Name VARCHAR," +
                    " Price INT(50), Qty INT(50), Discount INT(50), Category INT(10));"); 
```

这是在数据库中搜索的代码

```
Button saveButton = (Button) findViewById(R.id.search_button);

        saveButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {

                String searchStr = search.getText().toString();

                Cursor c = sampleDB.rawQuery("SELECT Name, Price FROM "+SAMPLE_TABLE_NAME+" WHERE Name like '"+searchStr+"'", null);

                if (c != null ) { 
                    if  (c.moveToFirst()) {
                        do {
                            String name = c.getString(c.getColumnIndex("Name"));
                            int cat = c.getInt(c.getColumnIndex("Category"));
                            results.add("" + name + ",Age: " + cat);
                            Log.v("Fname", name);
                            Log.v("Cat", cat+"");
                        }while (c.moveToNext());
                    }
                }

            }
        }); 
```

知道 searchStr 有我想在数据库中搜索的名称

这是我遇到的错误

```
Bad request for field slot 0,-1\. numRows = 18, numColumns = 2
FATAL EXCEPTION: main
java.lang.IllegalStateException: get field slot from row 0 col -1 failed 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:19:02.927

您只选择`name`并`price`在查询中：

```
Cursor c = sampleDB.rawQuery("SELECT Name, Price FROM "+SAMPLE_TABLE_NAME+" WHERE Name like '"+searchStr+"'", null); 
```

然后你试图访问`category`..

```
int cat = c.getInt(c.getColumnIndex("Category")); 
```

因此，您应该在 select 语句中添加类别：

```
Cursor c = sampleDB.rawQuery("SELECT Name, Price, Category FROM "+SAMPLE_TABLE_NAME+" WHERE Name like '"+searchStr+"'", null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:35:03.263

使用 FTS 表。FTS 表的设计使任何 SELECT 语句都能正常工作。您甚至可以使用 == 或 LIKE 运算符直接搜索特定的文本值或模式。这些将起作用，尽管它们会有点慢，因为标准运算符将需要全表扫描。

FTS 系统的真正威力来自定制的 MATCH 操作员。该运算符能够利用围绕单个文本值构建的索引，从而允许对大量文本进行非常快速的搜索。通常，搜索是使用类似于以下内容的查询完成的：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T10:19:57.480

问题在这里：您的 SQL 是：

```
SELECT Name, Price FROM 
```

但你得到的价值`Category`

```
int cat = c.getInt(c.getColumnIndex("Category")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T08:08:53.310

您正在尝试访问**类别**字段，但在您的选择查询中，没有类别。您必须将其添加到您的选择查询中，以便您可以使用它。

# r - 在 R 中读取二进制文件

> ID：12931979
> 
> 赞同：4
> 
> 时间：2012-10-17T10:10:52.443
> 
> 标签：r

在以下代码中，可以使用这些属性导入部分 LAS 文件 1.1 版：

列表。项目 格式 尺寸 必填

1.  X 长 4 字节 *
2.  Y 长 4 字节 *
3.  Z 长 4 字节 *
4.  强度无符号短 2 字节
5.  返回数 3 位（位 0、1、2） 3 位 *
6.  返回数（给定脉冲） 3 位（位 3、4、5） 3 位 *
7.  扫描方向标志 1 位（位 6） 1 位 *
8.  飞行线边缘 1 位（位 7） 1 位 *
9.  分类 unsigned char 1 字节 *
10.  扫描角度等级（-90 到 +90） - 左侧无符号字符 1 字节 *
11.  用户数据 unsigned char 1 字节
12.  点源 ID 无符号短 2 字节 *
13.  GPS 时间双 8 字节 *

并返回 x、y、z 和强度（上面列表的第 1 到 4 行）：

```
allbytes <- matrix(readBin(con, "raw", n = pointDataRecordLength * numberPointRecords, size = 1, endian = "little"),
                   ncol= pointDataRecordLength, nrow = numberPointRecords, byrow = TRUE)    
close(con)
mm <- matrix(readBin(t(allbytes[,1:(3*4)]), "integer", size = 4, n = 3 * numberPointRecords, endian = "little"), ncol = 3, byrow = TRUE)

mm[,1] <- mm[ ,1] * xyzScaleOffset[1,1] + xyzScaleOffset[1, 2]
mm[,2] <- mm[ ,2] * xyzScaleOffset[2,1] + xyzScaleOffset[2, 2]
mm[,3] <- mm[ ,3] * xyzScaleOffset[3,1] + xyzScaleOffset[3, 2]
colnames(mm) <- c("x", "y", "z")

intensity <- readBin(t(allbytes[, 13:14]), "double", size = 2, n = numberPointRecords, signed = FALSE, endian = "little") 
```

我想扩展代码以读取“返回数”和“返回数”（表的第 5 行和第 6 行）。我做错了什么？

```
returnNumber <- readBin(t(allbytes[, 15]), "integer", size = 1, n = numberPointRecords, signed = FALSE, endian = "little") 
```

预期回报应该是 1 到 5 之间的整数。提前致谢！

示例文件：

[关联](http://www.filefactory.com/file/68sdgepk12pd/n/lidar_las)

完整代码：

```
 publicHeaderDescription <- function() {
  hd <- structure(list(Item = c("File Signature (\"LASF\")",
                                "(1.1) File Source ID", "(1.1) Global Encoding",
                                "(1.1) Project ID - GUID data 1", "(1.1) Project ID - GUID data 2",
                                "(1.1) Project ID - GUID data 3", "(1.1) Project ID - GUID data 4",
                                "Version Major", "Version Minor", "(1.1) System Identifier",
                                "Generating Software", "(1.1) File Creation Day of Year",
                                "(1.1) File Creation Year", "Header Size", "Offset to point data",
                                "Number of variable length records",
                                "Point Data Format ID (0-99 for spec)", "Point Data Record Length",
                                "Number of point records", "Number of points by return",
                                "X scale factor", "Y scale factor", "Z scale factor", "X offset",
                                "Y offset", "Z offset", "Max X", "Min X", "Max Y", "Min Y", "Max Z",
                                "Min Z"), Format = c("char[4]", "unsigned short", "unsigned short",
                                                     "unsigned long", "unsigned short", "unsigned short",
                                                     "unsigned char[8]", "unsigned char", "unsigned char", "char[32]",
                                                     "char[32]", "unsigned short", "unsigned short", "unsigned short",
                                                     "unsigned long", "unsigned long", "unsigned char", "unsigned short",
                                                     "unsigned long", "unsigned long[5]", "double", "double", "double",
                                                     "double", "double", "double", "double", "double", "double", "double",
                                                     "double", "double"), Size = c("4 bytes", "2 bytes", "2 bytes",
                                                                                   "4 bytes", "2 byte", "2 byte", "8 bytes", "1 byte", "1 byte",
                                                                                   "32 bytes", "32 bytes", "2 bytes", "2 bytes", "2 bytes", "4 bytes",
                                                                                   "4 bytes", "1 byte", "2 bytes", "4 bytes", "20 bytes", "8 bytes",
                                                                                   "8 bytes", "8 bytes", "8 bytes", "8 bytes", "8 bytes", "8 bytes",
                                                                                   "8 bytes", "8 bytes", "8 bytes", "8 bytes", "8 bytes"), Required =
                                                                                     c("*", "*", "*", "*", "*", "*", "*", "*", "*", "*", "*", "*", "*",
                                                                                       "*", "*", "*", "*", "*", "*", "*", "*", "*", "*", "*", "*", "*", "*",
                                                                                       "*", "*", "*", "*", "*")), .Names = c("Item", "Format", "Size",
                                                                                                                             "Required"), row.names = 2:33, class = "data.frame")
  hd$what <- ""
  hd$what[grep("unsigned", hd$Format)] <- "integer"
  hd$what[grep("char", hd$Format)] <- "raw"
  hd$what[grep("short", hd$Format)] <- "integer"
  hd$what[grep("long", hd$Format)] <- "integer"
  hd$what[grep("double", hd$Format)] <- "numeric"
  hd$signed <- TRUE
  hd$signed[grep("unsigned", hd$Format)] <- FALSE
  ## number of values in record
  hd$n <- as.numeric(gsub("[[:alpha:][:punct:]]", "", hd$Format))
  hd$n[hd$what == "character"] <- 1
  hd$n[is.na(hd$n)] <- 1
  ## size of record
  hd$Hsize <- as.numeric(gsub("[[:alpha:]]", "", hd$Size))
  ## size of each value in record
  hd$Rsize <- hd$Hsize / hd$n
  hd$Rsize[hd$what == "raw"] <- 1
  hd$n[hd$what == "raw"] <- hd$Hsize[hd$what == "raw"]
  hd
}

readLAS <-
  function(lasfile, skip = 0, nrows = NULL, returnSP = FALSE, returnHeaderOnly = FALSE) {

    hd <- publicHeaderDescription()
    pheader <- vector("list", nrow(hd))
    names(pheader) <- hd$Item
    con <- file(lasfile, open = "rb")
    isLASFbytes <- readBin(con, "raw", size = 1, n = 4, endian = "little")
    pheader[[hd$Item[1]]] <- readBin(isLASFbytes, "character", size = 4, endian = "little")
    if (! pheader[[hd$Item[1]]] == "LASF") {
      stop("Not a valid LAS file")
    }
    for (i in 2:nrow(hd)) {
      pheader[[hd$Item[i]]] <- readBin(con, what = hd$what[i], signed = hd$signed[i], size = hd$Rsize[i], endian = "little", n = hd$n[i])
      #print(names(pheader)[i])
      #print(pheader[[hd$Item[i]]])
    }
    close(con)
    ## read the data
    numberPointRecords <- pheader[["Number of point records"]]
    offsetToPointData <- pheader[["Offset to point data"]]
    pointDataRecordLength <-pheader[["Point Data Record Length"]]
    xyzScaleOffset <- cbind(unlist(pheader[c("X scale factor", "Y scale factor", "Z scale factor")]),
                            unlist(pheader[c("X offset", "Y offset", "Z offset")]))

    if (returnHeaderOnly) return(pheader)

    con <- file(lasfile, open = "rb")
    junk <- readBin(con, "raw", size = 1, n = offsetToPointData)

    ## deal with rows to skip and max rows to be read
    if (skip > 0) {
      ## seek is unreliable on windows, or I'm using it incorrectly
      ## so we junk the bytes to skip
      junk <- readBin(con, "raw", size = 1, n = pointDataRecordLength * skip)
      numberPointRecords <- numberPointRecords - skip
      #pos <- seek(con, where = pointDataRecordLength * skip)
      # print(c(pos = seek(con), skip = skip, where = pointDataRecordLength * skip))
    }
    if (!is.null(nrows)) {
      if (numberPointRecords > nrows) numberPointRecords <- nrows
    }

    if (numberPointRecords < 1) stop("no records left to read")

    # include a loop to read just points inside the x and y coordinates

    allbytes <- matrix(readBin(con, "raw", n = pointDataRecordLength * numberPointRecords, size = 1, endian = "little"),
                       ncol= pointDataRecordLength, nrow = numberPointRecords, byrow = TRUE)

    close(con)
    mm <- matrix(readBin(t(allbytes[,1:(3*4)]), "integer", size = 4, n = 3 * numberPointRecords, endian = "little"), ncol = 3, byrow = TRUE)
    gpstime <- NULL
    if (ncol(allbytes) == 28) gpstime <- readBin(t(allbytes[ , 21:28]), "numeric", size = 8, n = numberPointRecords, endian = "little")

    intensity <- readBin(t(allbytes[, 13:14]), "double", size = 2, n = numberPointRecords, signed = FALSE, endian = "little")
    mm[,1] <- mm[ ,1] * xyzScaleOffset[1,1] + xyzScaleOffset[1, 2]
    mm[,2] <- mm[ ,2] * xyzScaleOffset[2,1] + xyzScaleOffset[2, 2]
    mm[,3] <- mm[ ,3] * xyzScaleOffset[3,1] + xyzScaleOffset[3, 2]
    colnames(mm) <- c("x", "y", "z")

    returnNumber <- readBin(t(allbytes[,15]), "integer", size = 1, n = numberPointRecords, signed = FALSE, endian = "little")
    require(bitops)

    if (returnSP) {
      require(sp)
      SpatialPoints(cbind(mm, gpstime, intensity))
    } else {
      cbind(mm, gpstime, intensity)
    }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T12:08:03.850

从您的问题中不清楚您是否了解字段 5-8 都以单个字节编码，因此您需要提取这些位。假设您的其余代码有效，

```
require(bitops)

fields.5.to.8 <- readBin(t(allbytes[, 15]), "integer", size = 1, n = numberPointRecords, signed = FALSE, endian = "little")

# bits 0..2: byte & 00000111
field.5 <- bitAnd(7, fields.5.to.8)
# bits 3..5: byte & 00111000 >> 3
field.6 <- bitShiftR(bitAnd(56, fields.5.to.8), 3)
# bit 6: & 0100000 >> 6
field.7 <- bitShiftR(bitAnd(fields.5.to.8, 64), 6)
# bit 7: & 1000000 >> 7 
field.8 <- bitShiftR(bitAnd(fields.5.to.8, 128), 7) 
```

# qt - Qt 线程 - 请提供新的验证方式

> ID：12931982
> 
> 赞同：1
> 
> 时间：2012-10-17T10:10:59.970
> 
> 标签：qt, qthread

对 Qt 太陌生了。阅读 wiki 和 C++ Gui 编程书，他们说子类 QThread。发现这不是现在推荐的方式。

所以我在这里有一些练习代码，我对这是否正确有一些疑问。所以我真的很感激有人看看。

因此，我创建了一个将 QThread 作为私有成员的类，用于 movetothread。创建它时，我确保不指定父级。因此我的第一个问题是，这样做可以吗？

第二个问题来自 m_thread->quit(); 我发现在我这样做之前，我的连接完成并没有被发出。那么这是正确的方法吗？我阅读了[http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/](http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/)并看到在同一个线程中完成和 deleteLater 之间的连接但是不是 100% 确定这是否应该与退出一起使用。

最后，说到deleteLater，这是否意味着我不需要delete m_thread

感谢任何人的时间。

代码在这里。带有按钮的简单 QDialog。 **工人.cpp**

```
#include "worker.h"

worker::worker(QObject *parent) :
    QObject(parent)
{
    stopped = false;
}

void worker::setupAndRun()
{
    m_thread = new QThread();
    connect(m_thread,SIGNAL(started()),this,SLOT(doWork()));
    connect(m_thread,SIGNAL(finished()),this,SLOT(onComplete()));
    connect(m_thread,SIGNAL(finished()),m_thread,SLOT(deleteLater()));
    this->moveToThread(m_thread);
    m_thread->start();
}

void worker::doWork()
{

    for(int i = 0; i < 20000; i++)
    {
        if (this->stopped)
            break;
        qDebug() << i << " : " <<  Q_FUNC_INFO << m_thread->currentThreadId();
    }
    // --- I think the quit calls the finished signal?
    m_thread->quit();

}

void worker::onComplete()
{
    qDebug() <<  Q_FUNC_INFO << "Called " << m_thread->currentThreadId();
} 
```

**工人.h**

```
#ifndef WORKER_H
#define WORKER_H

#include <QObject>
#include <QDebug>
#include <QThread>

class worker : public QObject
{
    Q_OBJECT
public:
    explicit worker(QObject *parent = 0);
    void setupAndRun();
signals:

public slots:
    void doWork();
    void onComplete();
private:
    // --- The thread that I use to movetothread with.
    // Is this ok?
    QThread *m_thread;
    bool stopped;
};

#endif // WORKER_H 
```

**对话框按钮**

```
void Dialog::on_pushButton_clicked()
{
    m_worker = new worker();
    m_worker->setupAndRun();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:47:41.063

我一目了然并没有发现任何东西，但是有一些东西：

由于`m_thread`是成员变量，因此您应该以不同的方式处理它。您可以`null`在构造函数中将其初始化为，并`m_thread = null`在调用后设置`m_thread->quit()`，因为它会在不久之后被删除，并且您不想要一个悬空指针。

使用此代码，您也应该将完成的信号连接到 m_worker 的 deleteLater()，因为似乎没有其他代码可以删除它。您还应该在应用程序退出时处理线程，例如使用[qAddPostRoutine](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#qAddPostRoutine)，以便所有线程终止并删除所有相关对象。

# html - 跨浏览器使图像和滑块居中

> ID：12931988
> 
> 赞同：0
> 
> 时间：2012-10-17T10:11:15.360
> 
> 标签：html, css, center, centering, orbit

现在我的轨道滑块工作得几乎完美，我发现了一个新问题。我正在使用 chrome 作为主浏览器的 13 英寸 macbook pro。在 chrome 中一切看起来都很好。但是我做了一个浏览器测试（在知名网站上），它告诉我在几个浏览器上我的滑块或页面没有像它应该做的那样居中。

现在我的问题，有人可以帮我解决这个问题吗？所以我的页面和滑块都居中。我正在使用由单个图像组成的网页，因为它只是一个小测试。但为了完成测试，它应该居中。

[链接到该网站](http://ijsbaanheist.be)

CSS 来定位正文和内容（内容包含图像）

```
body
{
background-image: url("../afbeeldingen/bg.jpeg");
margin-left: auto;
margin-right: auto;
text-align:center; /*For IE6 Shenanigans*/
}

#content 
{
width: 100%;
} 
```

对于滑块

```
#featured
{
position: absolute;
top: 152px;
left: 218px;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:26:50.403

您正在使用绝对定位来使 div 居中，这不是解决方法。这仅以您的屏幕分辨率为中心！如果要居中，请使用`width: 850px; margin: 0 auto;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:30:14.743

首先，去掉body的width和height。
您的轨道滑块使用绝对位置，这意味着它将找到父相对位置，即您的身体。因此，让我们将您的内容 div 更改为：

```
#content { 
position: relative;
margin: 0 auto;
width: 1030px;
} 
```

您也可以删除这一整行：

```
#featured
{
position: absolute;
top: 152px;
left: 218px;
} 
```

看看现在情况如何。

# php - 使用查询绑定 Fuelphp

> ID：12931989
> 
> 赞同：1
> 
> 时间：2012-10-17T10:11:16.233
> 
> 标签：php, mysql, pdo, fuelphp

当我想 在mysql 函数上[使用查询fuelphp绑定时遇到问题](http://docs.fuelphp.com/classes/database/usage.html#binding)`IN()`

这是我的代码

```
$status_array = array(1,2,3);
$query = 'select * from users where status IN(:status_id_as_array)' ;
$user = DB::query($query)->bind('status_id_as_array',$status_array)->execute(); 
```

从该代码结果为零，当我调试时

```
echo DB::last_query(); 
```

最后一个查询是

```
select * from users where status IN('1,2,3'); 
```

我认为问题在于`IN('1,2,3')`IN 的值是字符串，因此它不能作为数组模式执行。

***注意我可以用另一种方式目标***

```
 $query = 'select * from users where status IN('.implode(',', $status_array).')' ; 
```

**我的问题是**

1.  它的查询绑定不支持 mysql 的 IN() 函数？请解释
2.  还有另一种方法可以在fuelphp 上使用mysql 的IN() 函数查询绑定？

感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:38:56.813

您的查询还有另一种方法。尝试：

```
$user = DB::select()->from('users')
    ->where('status', 'in', $status_array)
    ->execute(); 
```

它将执行如下查询：`SELECT * FROM `users` WHERE `status` IN (1, 2, 3)`

# mysql - MySQL：％在主机列中代表什么以及如何更改用户密码

> ID：12931991
> 
> 赞同：13
> 
> 时间：2012-10-17T10:11:27.790
> 
> 标签：mysql

嗯，这就是我能看到的：

```
select host, user from mysql.user;

+-----------+------------------+
| host      | user             |
+-----------+------------------+
| %         | me               |
| 127.0.0.1 | root             |
| ::1       | root             |
| localhost |                  |
| localhost | debian-sys-maint |
| localhost | root             |
| ubuntu    |                  |
| ubuntu    | root             |
+-----------+------------------+ 
```

我以 root 身份输入并想更改用户“我”的密码。

```
SET PASSWORD FOR 'me'@'%' = PASSWORD('letmein');
Query OK, 0 rows affected (0.00 sec) 
```

好吧，正如我们所见，没有行受到影响。

至于尝试访问，结果如下：

```
Access denied for user 'me'@'localhost' (using password: YES)
michael@ubuntu:/var/www/cgi-bin$ 
```

因此，它提到了 localhost，而不是 %。

您能否建议我如何更改“我”的密码并解释 % 是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T10:12:45.920

您需要设置密码`localhost`：

```
SET PASSWORD FOR 'me'@'localhost' = PASSWORD('letmein');

FLUSH PRIVILEGES; 
```

`%`意味着远程主机可以从任何其他服务器登录到 MySQL 服务器，而 localhost 意味着您只能从同一台机器登录到 MySQL 服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T10:15:13.087

'%' 表示您可以从连接到这些数据库的任何主机登录到数据库。如果要从 localhost 访问数据库，还可以将 localhost 定义为主机。

更改密码：

```
SET PASSWORD FOR 'me'@'%' = PASSWORD('letmein'); 
```

并且不要忘记执行：

```
FLUSH PRIVILEGES; 
```

提交您的更改。请查看[MySql 帐户管理。](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/adding-users.html)

**更新：**

在您的用户表上，我没有找到带有 host = localhost 的用户名，您必须首先通过（在此处[添加用户](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/adding-users.html)）创建此用户：

```
Grant all privileges on *.* to me@'localhost' identified by 'letmein';
flush privileges; 
```

# android - 为室内建筑构建一个安卓地图应用程序

> ID：12931997
> 
> 赞同：1
> 
> 时间：2012-10-17T10:12:01.487
> 
> 标签：android, location

我已经启动了我的第一个 android 应用程序，并设法启动了界面。

我知道如何使用 GPS 获取建筑物外的用户位置。

但是对于内部建筑物，它更难或根本没有锁定位置。那么如何准确定位建筑物内的用户位置呢？我正在考虑同时使用 Cell ID 和 Wifi/移动网络。它有效率吗？

此外，在获得位置后，我如何让它像道路上的谷歌导航/GPS 应用程序一样不断跟随用户运动（跟随汽车运动）？

最后一个问题，我用什么方法来显示建筑物的内部布局？是否有任何卫星类型的方法可以自动定位建筑物的布局？还是我需要手动绘制地图？

还有一个问题，是否可以在应用程序中实际包含 Google Street View 以了解建筑物的室内状态？

我正在使用 android 4.1.1 sdk，并且居住在美国/英国以外的地区，谷歌目前不支持其导航/街景，即马来西亚。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:26:36.497

这是一项艰巨的任务。

简单的答案，取决于我们谈论的精度。但既然你在谈论室内定位，那么我猜最多只有几米。这在现实中使用 CellID/wifi/gps 很难实现。

您可能会寻找更像这样的解决方案

[http://www.sociopatterns.org/](http://www.sociopatterns.org/)

但我猜这是针对较小的项目。请注意，由于电池的使用，这样的解决方案也很困难。您确实必须有充分的理由才能准确地“跟随”室内人员。

至于室内地图，请查看 Google Indoor Mapping

[http://maps.google.com/help/maps/starthere/index.html](http://maps.google.com/help/maps/starthere/index.html)

# xcode - 使用视频和 iPod 音乐集成的锻炼应用程序

> ID：12931998
> 
> 赞同：1
> 
> 时间：2012-10-17T10:12:04.183
> 
> 标签：xcode, ipod

我正在创建一个锻炼应用程序，它有大约一个小时的视频和一些间歇性的音频说明。我已将 iPod Music 包含在其中。当视频中有音频（指令）时，我希望 iPod 音乐回避（降低音量），并在指令完成后恢复。看了其他MixableAudioShouldDuck，但它似乎不起作用，因为它是一个完整的一小时视频，并且音频在视频内。看着在单独的音频文件中获取音频，但这会导致寻找问题。任何新的方法或任何建议将不胜感激。随时提出您的想法和建议，非常感谢！

# c++ - 将未构造的缓冲区传递给 std::ostream 的构造函数是否安全？

> ID：12931999
> 
> 赞同：0
> 
> 时间：2012-10-17T10:12:13.567
> 
> 标签：c++, std

这是定义设置缓冲区的 ostream 子类的便捷方式（MyStreamBuf 是 std::streambuf 的某个子类）：

```
class MyOStream : public std::ostream {
public:
  MyOStream(): std::ostream(&buffer) {}
  // ...
private:
  MyStreamBuffer buffer;
}; 
```

这里std::ostream的构造函数在buffer的构造函数之前被调用，所以传入的streambuf*指向的是一个非构造对象，它有虚方法。同样的问题也适用于 ~MyStream()，因为缓冲区在 std::ostream 之前被破坏，因此 std::ostream 的析构函数将查看已破坏的缓冲区对象。

我听说这种技术是安全的，因为标准不允许 std::ostream 在其构造函数和析构函数中调用缓冲区上的方法。真的吗？

请注意，问题不在于这是否真的适用于标准库的当前实现，问题在于它是否保证符合标准。问题也不是如何重写上面的代码来解决这个问题——例如，通过使用多重继承来让缓冲区在 std::ostream 超类之前构造为超类。