# StackOverflow 问答 13444000-13444999

# google-apps-script - 无法从 Google Apps 脚本连接到 Google Latitude API

> ID：13444003
> 
> 赞同：2
> 
> 时间：2012-11-18T19:57:25.300
> 
> 标签：google-apps-script, google-latitude

Google Apps 脚本目前仅支持 OAuth 1.0a，而 Google Latitude API 仅支持 OAuth2，因此很明显您目前无法使用 Google Apps Script 中的 Google Latitude API。

但是是否有计划何时集成这 2 个 API？由于我非常赞成将我的数据（包括地址）存储在谷歌应用电子表格中，因此使用谷歌应用脚​​本访问它们并应用一些额外的逻辑（如距离计算）对我来说似乎是有意义的。

我知道 Google Maps Javascript Api V3，但因此，我会失去重用我的 google app 电子表格的灵活性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:36:02.783

oAuth 2 在 Apps Script 中是非常可能的。但是，它确实需要更多的手来控制流程（与内置的 oAuth1.0a 不同）。有计划在未来改进它，但现在这将起作用。

诀窍是使用 oAuth 2 Web 服务器流程。看看这个获取您的个人资料信息的示例（Latitude 有一个类似的 REST API）。

[https://gist.github.com/4079885](https://gist.github.com/4079885)

这里有这个脚本的发布版本 -

[https://script.google.com/macros/s/AKfycby3gHf7vlIsfOOa9C27z9kVE79DybcuJHtEnNZqT5G8LumszQG3/exec](https://script.google.com/macros/s/AKfycby3gHf7vlIsfOOa9C27z9kVE79DybcuJHtEnNZqT5G8LumszQG3/exec)

这基本上应该能够读取一些基本的个人资料信息。注销、错误处理的方式并不多。但希望此代码示例对您有用。具体看看——`getAndStoreAccessToken()`

`getURLForAuthorization()`要在电子表格中工作，请从[Spreadsheet.show](https://developers.google.com/apps-script/class_spreadsheet#show)对话框打开链接，然后获取令牌并获取数据。

我希望对此进行更多的教程，并直接提供一些与电子表格的集成示例。

# java - 编译的程序在第一个“for”循环处停止

> ID：13444005
> 
> 赞同：1
> 
> 时间：2012-11-18T19:57:47.257
> 
> 标签：java, loops, for-loop, execution

我有个问题。我做了几个测试，发现我的程序在第一个 for 循环之后立即停止。我不知道为什么。我之前有一个较小的程序，它正在读取和写入一个文件，它工作得很好。程序编译并且 text.txt 文件位于正确的位置。

我正在使用 Bluej。需要任何其他细节吗？请问。

```
import java.io.*;
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Image;
import java.lang.reflect.Array;
import java.util.Scanner;

import javax.swing.*;

public class fileStreamTest{

    public static void main(String args[]){
        float averageprice;
        float[] prevDataArray= new float[22];
        float[][] currentDataArray = new float[21][];
        float[] futureData= new float[7];

        Scanner keyboard = new Scanner(System.in);
        System.out.println("start");

        if (true)//prevDataArray[1]!=7
        {
            for (int xx = 0; xx == 20; xx++)
            {
                int n = 0;
                float input = 0;
                double q1, q3;

                //input data 
                System.out.println("Input data, input 0.00407 to finish.");
                while(input!=0.00407)
                {
                    if (input == 0)
                        input = keyboard.nextFloat();
                    currentDataArray[xx][n] = input;
                    input = keyboard.nextFloat();
                    n++;
                }

                //delete outliers
                n = 0; 

                if((int)(currentDataArray.length/2) == currentDataArray.length/2)
                {
                    if((int)((currentDataArray.length-currentDataArray.length/2)/2) == currentDataArray.length/4)
                    {
                        q1 = (currentDataArray[xx][currentDataArray.length/4]+currentDataArray[xx][currentDataArray.length/4+1])/2;
                        q3 = (currentDataArray[xx][3*currentDataArray.length/4]+currentDataArray[xx][3*currentDataArray.length/4+1])/2;
                    }
                    else
                    {
                        q1 = currentDataArray[xx][(int)(currentDataArray.length/4) + 1];
                        q3 = currentDataArray[xx][(int)(3*currentDataArray.length/4) + 1];
                    }
                }
                else
                {
                    if((int)((int)(currentDataArray.length/2)/2) == (int)(currentDataArray.length/2)/2)
                    {
                        q1 = (currentDataArray[xx][(int)(currentDataArray.length/2)/2] +  currentDataArray[xx][(int)(currentDataArray.length/2)/2 + 1])/2;
                        q3 = (currentDataArray[xx][3*(int)(currentDataArray.length/2)/2+1] + currentDataArray[xx][3*(int)(currentDataArray.length/2)/2 + 2])/2;
                    }
                    else
                    { 
                        q1 = currentDataArray[xx][(int)((int)(currentDataArray.length/2)/2) + 1];
                        q3 = currentDataArray[xx][(int)(3*(int)(currentDataArray.length/2)/2)+ 1];
                    }
                }
                System.out.println("q1 = " + q1 + "/n" + ",q3 = " + q3);
                float sum = 0;
                n = 0;
                while(n!=currentDataArray.length)
                {
                    if((currentDataArray[xx][n] >= q1) && (currentDataArray[xx][n] <= q3))
                    {
                        sum += currentDataArray[xx][n];
                        n++;   
                    }
                }
                //finding average price
                averageprice = sum/n;
                System.out.println(" Average price = " + averageprice);
                //write currentDataFile
                try{
                    OutputStream os = new FileOutputStream("C:/test.txt");
                    for(int x=0; x < currentDataArray[xx].length ; x++){
                        os.write( (byte)currentDataArray[xx][x] ); // writes the bytes
                    }
                    os.close();
                }catch(IOException e){
                    System.out.print("Exception");
                } 
            }
            prevDataArray[0]++;
        }
        else
        {
            //drawbg
            //drawList
            //createfuturedata(avgdev)
            //drawPred(futuredata)
            //updateavgdev
            System.out.println("test");
            prevDataArray[0] = 1;
        }

        //InputStream is = new FileInputStream("C:/test.txt");
        //int size = is.available();

        //  for(int i=0; i< size; i++){
        //     System.out.print((double)is.read() + "  ");
        // }
        //  is.close();

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T19:59:25.480

还没有完成你的整个代码，但问题肯定出在你的情况下。

```
for (int xx = 0; xx == 20; xx++) 
```

这个循环应该是：-

```
for (int xx = 0; xx <= 20; xx++) 
```

否则，它甚至不会运行一次。

另外，你的数组： -

```
float[][] currentDataArray = new float[21][]; 
```

需要列数的大小，否则`NPE`当您在行中访问它时会得到一个：

```
currentDataArray[xx][n] = input; 
```

# sql - 从没有任何唯一标识符的表中选择最新记录/行

> ID：13444012
> 
> 赞同：0
> 
> 时间：2012-11-18T19:58:25.923
> 
> 标签：sql, sql-server, select

> **可能重复：**
> [与 sql server 中的“top”相反，不使用 order by，没有键/索引](https://stackoverflow.com/questions/8712000/opposite-of-top-in-sql-server-without-using-order-by-there-are-no-keys-indic)

如何从没有 id/唯一列的 SQL Server 表中选择最后创建的行。

有可能以某种方式吗？

# c++ - 使用 Eigen 库编译错误

> ID：13444013
> 
> 赞同：0
> 
> 时间：2012-11-18T19:58:30.680
> 
> 标签：c++, c, compilation, eigen

我正在尝试将[Eigen](http://eigen.tuxfamily.org/dox/GettingStarted.html) C++ 模板库用于线性代数，我将该库编译并安装到以下路径`/usr/local/include`

我从他们的网站上获取了一个示例代码，并尝试使用和不使用该`-l`选项进行编译。

```
g++ -l /usr/local/include/eigen3 test.cpp -o mytest 
```

但我收到以下错误：

```
test.cpp:2:23: fatal error: Eigen/Dense: No such file or directory 
```

我怎样才能包含这个库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:04:32.257

您想使用该`-I`选项，而不是`-l`

```
g++ -I /usr/local/include/eigen3 test.cpp -o mytest 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-14T01:47:36.470

对于 MSVC 用户：我的两分钱具体答案：

我刚刚遇到了一个难以识别的 Eigen 编译错误。这是由[此处描述的过程引起的 - 使用 CRT 库查找内存泄漏](https://msdn.microsoft.com/en-us/library/x98tx3cf.aspx)，其中包括使用以下宏覆盖`new`运算符以检测内存泄漏：

```
#ifdef _DEBUG
    #define DBG_NEW new ( _NORMAL_BLOCK , __FILE__ , __LINE__ )
#else
    #define DBG_NEW new
#endif 
```

此宏不适用于 Eigen。

一旦我删除它，问题就解决了。

我希望这可以帮助你。

# css - 如何将容器放在另一个 div 之上

> ID：13444014
> 
> 赞同：0
> 
> 时间：2012-11-18T19:58:42.737
> 
> 标签：css, html, mask

我不知道为什么我的容器显示在屏幕底部。我知道这有两个可能的问题。最好的方法是：如何使蒙版应用于背景图像，所以我可以将图像 url 粘贴到背景上，然后我可以在上面使用代码。另一个问题是：如何在没有绝对定位的情况下使容器 div 显示在背景 div 之上。对不起，如果这令人困惑。这是我的代码

```
<html>
<head>
<title> 
Singapore - gallery
</title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width, initial scale=1.0">
<style>
*  {
  margin: 0;
  padding: 0;
}
#background img {
  width: 100%;
  -webkit-mask-image: 
  -webkit-gradient(linear, left top, left bottom, 
  from(rgba(0,0,0,1)), to(rgba(0,0,0,0))); 
  z-index: -1; 
}

#container {
  width: 1000px;
  background-color: #fff;
  margin: 0 auto;
  border: 3px solid #eee; 
}

</style>
</head>
<body>
<div id="background"> <img src="gallery.jpg" />
<div id="container">
<h1> Singapore Gallery </h1>  
</div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T20:00:35.257

逻辑是这样的

制作父 div`position: relative;`并将覆盖 div 制作为`position: absolute;`并使用`top: 0;`

所以在这里你使用的`img`标签肯定是没有定位的，所以你要做的是

我假设你想覆盖`h1`你的`img`so 使用`position: relative`for `#background`，而不是使用`position: absolute;`for`img`和 make it `top: 0;`and `z-index: 1; /*Optional*/`，然后 make `#container`as`position: absolute;`和使用`top: 0;`and`z-index: 999; /*Compulsory*/`

# python - Python：使用多边形裁剪光栅图像的函数的代码审查

> ID：13444015
> 
> 赞同：5
> 
> 时间：2012-11-18T19:59:05.173
> 
> 标签：python, performance, debugging, optimization, memory

我要求审查以下代码。我有一个空间参考图像和一个多边形。我编写了一个代码（见下文）来剪辑此图像以保存新图像（剪辑区域）。此函数根据要素类的几何来裁剪栅格。基于几何进行裁剪意味着您将使用要素类中所有要素的边界来裁剪栅格，而不是这些要素的最小边界矩形

输入：一个多边形图层和一个或多个栅格图层输出：新的栅格图层，裁剪到多边形边界

```
import osgeo.gdal
import shapefile
import struct, numpy, pylab
import numpy as np
import ogr
import osr,gdal
from shapely.geometry import Polygon
import osgeo.gdal as gdal
import sys
from osgeo import gdal, gdalnumeric, ogr, osr
import Image,ImageDraw

def world2Pixel(geoMatrix, x, y):
    """
    Uses a gdal geomatrix (gdal.GetGeoTransform()) to calculate
    the pixel location of a geospatial coordinate
    (http://geospatialpython.com/2011/02/clip-raster-using-shapefile.html)
    geoMatrix
    [0] = top left x (x Origin)
    [1] = w-e pixel resolution (pixel Width)
    [2] = rotation, 0 if image is "north up"
    [3] = top left y (y Origin)
    [4] = rotation, 0 if image is "north up"
    [5] = n-s pixel resolution (pixel Height)

    """
    ulX = geoMatrix[0]
    ulY = geoMatrix[3]
    xDist = geoMatrix[1]
    yDist = geoMatrix[5]
    rtnX = geoMatrix[2]
    rtnY = geoMatrix[4]
    pixel = np.round((x - ulX) / xDist).astype(np.int)
    line = np.round((ulY - y) / xDist).astype(np.int)
    return (pixel, line)

def Pixel2world(geoMatrix, x, y):
    ulX = geoMatrix[0]
    ulY = geoMatrix[3]
    xDist = geoMatrix[1]
    yDist = geoMatrix[5]
    coorX = (ulX + (x * xDist))
    coorY = (ulY + (y * yDist))
    return (coorX, coorY)

def RASTERClipByPolygon(inFile,poly,outFile):
    # Open the image as a read only image
    ds = osgeo.gdal.Open(inFile,gdal.GA_ReadOnly)
    # Check the ds (=dataset) has been successfully open
    # otherwise exit the script with an error message.
    if ds is None:
        raise SystemExit("The raster could not openned")
    # Get image georeferencing information.
    geoMatrix = ds.GetGeoTransform()
    ulX = geoMatrix[0]
    ulY = geoMatrix[3]
    xDist = geoMatrix[1]
    yDist = geoMatrix[5]
    rtnX = geoMatrix[2]
    rtnY = geoMatrix[4]
    # get the WKT (= Well-known text)
    dsWKT = ds.GetProjectionRef()
    # get driver information
    DriverName = ds.GetDriver().ShortName
    # open shapefile (= border of are of interest)
    shp = osgeo.ogr.Open(poly)
    if len(shp.GetLayer()) != 1:
         raise SystemExit('The shapefile must have exactly one layer')
    # Create an OGR layer from a boundary shapefile
    layer = shp.GetLayer(0)
    feature = layer.GetNextFeature()
    geometry = feature.GetGeometryRef()
    # Make sure that it is a polygon
    if geometry.GetGeometryType() != osgeo.ogr.wkbPolygon:
            raise SystemExit('This module can only load polygon')
    # get Extent of the clip area
    X_min, X_max, Y_min, Y_max = layer.GetExtent()
    # Convert the layer extent to image pixel coordinates
    uldX, uldY = world2Pixel(geoMatrix, X_min, Y_max)
    lrdX, lrdY = world2Pixel(geoMatrix, X_max, Y_min)
    # Calculate the pixel size of the new image
    pxWidth = int(lrdX - uldX)
    pxHeight = int(lrdY - uldY)
    # get the Coodinate of left-up vertex of the pixel
    X_minPixel, Y_maxPixel = Pixel2world(geoMatrix, uldX, uldY)
    # get polygon's vertices
    pts = geometry.GetGeometryRef(0)
    points = []
    for p in range(pts.GetPointCount()):
        points.append((pts.GetX(p), pts.GetY(p)))
    pnts = np.array(points).transpose()
    # work band by band
    nBands = ds.RasterCount
    # panchromatic
    if nBands == 1:
        band = ds.GetRasterBand(1)
        # get nodata value
        nodata = band.GetNoDataValue()
        # convert band in Array
        bandArray = band.ReadAsArray()
        del band
        # clip arrey
        bandArray_Area = bandArray[uldY:lrdY, uldX:lrdX]
        del bandArray
        # Create 2D Polygon Mask. Mode 'L', not '1', because
        # Numpy-1.5.0 / PIL-1.1.7 does not support the numpy.array(img)
        # conversion nicely for bivalue images.
        img = Image.new('L', (pxWidth, pxHeight), 0)
        target_ds = gdal.GetDriverByName(DriverName).Create(outFile, pxWidth, pxHeight, nBands, ds.GetRasterBand(1).DataType)
        target_ds.SetGeoTransform((X_minPixel, xDist, rtnX,Y_maxPixel, rtnY, yDist))
        pixels, line = world2Pixel(target_ds.GetGeoTransform(),pnts[0],pnts[1])
        listdata = [(pixels[i],line[i]) for i in xrange(len(pixels))]
        ImageDraw.Draw(img).polygon(listdata, outline=1, fill=1)
        mask = numpy.array(img)
        bandArray_Masked = bandArray_Area*mask
        del bandArray_Area, mask
        target_ds.GetRasterBand(nBands).WriteArray(bandArray_Masked)
        target_ds.GetRasterBand(nBands).SetNoDataValue(nodata)
    else:
        img = Image.new('L', (pxWidth, pxHeight), 0)
        target_ds = gdal.GetDriverByName(DriverName).Create(outFile, pxWidth, pxHeight, nBands, ds.GetRasterBand(1).DataType)
        target_ds.SetGeoTransform((X_min, xDist, rtnX,Y_max, rtnY, yDist))
        pixels, line = world2Pixel(target_ds.GetGeoTransform(),pnts[0],pnts[1])
        listdata = [(pixels[i],line[i]) for i in xrange(len(pixels))]
        ImageDraw.Draw(img).polygon(listdata, outline=1, fill=1)
        mask = numpy.array(img)
        for bandno in range(1, nBands+1):
            band = ds.GetRasterBand(bandno)
            nodata = band.GetNoDataValue()
            # convert band in Array
            bandArray = band.ReadAsArray()
            del band
            # clip arrey
            bandArray_Area = bandArray[ulY:lrY, ulX:lrX]
            del bandArray
            bandArray_Masked = bandArray_Area*mask
            target_ds.GetRasterBand(bandno).WriteArray(bandArray_Masked)
            del bandArray_Area
            target_ds.GetRasterBand(bandno).SetNoDataValue(nodata)
    # set the reference info
    if len(dsWKT) is 0:
        # Source has no projection (needs GDAL >= 1.7.0 to work)
        target_ds.SetProjection('LOCAL_CS["arbitrary"]')
    else:
    # Make the target raster have the same projection as the source
        target_ds.SetProjection(dsWKT)
    target_ds = None 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:45:48.970

这可以在 R 中轻松完成。我刚刚意识到这个问题是针对 python 的。因此我进行了编辑。有可用于在 python 中运行 R 或在 R 中运行 python 的包装器，请检查包 rpy2 。

```
#Load library
library(raster)

## Read the shapefile
myshp <- shapefile("shapefile.shp")

## Reading the raster you want to crop
myraster <- raster('image.tif')

## create a layer only for the shape, the parameter inverse = TRUE or FALSE is imp
new_raster = mask(myraster, myshp, filename = "newras.tif", inverse = FALSE) 
```

# php - 类不自动加载？

> ID：13444021
> 
> 赞同：1
> 
> 时间：2012-11-18T19:59:57.227
> 
> 标签：php, spl-autoload-register

我的应用程序中有一个自动加载器功能：

```
 spl_autoload_register(function ($className) {
if (file_exists(ROOT . DS . 'library'  . DS . 'intranet'  . DS  . 'classes' . DS .strtolower($className) . '.php')){
    require_once(ROOT . DS . 'library'  . DS . 'intranet'  . DS  . 'classes' . DS .strtolower($className) . '.php');
    print_r($className." loaded <br/>");
} else if (file_exists(ROOT . DS . 'application' . DS . 'controller' . DS . strtolower($className) . '.php')) {
    require_once(ROOT . DS . 'application' . DS . 'controller' . DS . strtolower($className) . '.php');
} else if (file_exists(ROOT . DS . 'application' . DS . 'model' . DS . strtolower($className) . '.php')) {
    require_once(ROOT . DS . 'application' . DS . 'model' . DS . strtolower($className) . '.php');
} else if (file_exists(ROOT . DS . 'application' . DS . 'view' . DS . strtolower($className) . '.php')) {
    require_once(ROOT . DS . 'application' . DS . 'view' . DS . strtolower($className) . '.php');
} else {
    throw new Exception("Class: $className not autoloaded!");
}
}); 
```

在我的一个文件中，一个会话管理器，它调用了一个名为数据库的类。该类`database`之前没有被调用过，然后应该在那时被自动加载。

但是，它似乎不是 - 也就是说，我正在打印一个正在加载的类列表：

```
debug loaded 
sessionmanager loaded 
database loaded 
database loaded 
```

所以看起来它正在加载，对吧？

在 sessionnmanager 类中：

```
Fatal error: Class 'database' not found 
```

我的自动加载器看起来不错吗？

我已经在`__construct`方法中的数据库类中打印了一个，是的，果然，它正在被调用。

# objective-c - 如何在表格视图中对齐数组中的文本？

> ID：13444022
> 
> 赞同：1
> 
> 时间：2012-11-18T20:00:09.940
> 
> 标签：objective-c, ios, tableview

我是 Objective-C 编码的新手。但是，如果您看一下我的输出下面的图像，我的问题就很简单了。基本上我希望所有内容都正确对齐，以便行中的所有数据看起来就像它们在自己的列中一样。基本上每一行都应该与它上面的行对齐。我的程序从网络上的 JSON 文件中引入每个字段 - 另请参阅代码以了解我是如何做到的。

![在此处输入图像描述](../Images/1e7bc18b57a8fe787ab69a7c03f1359b.png)

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    NSDictionary *allDataDictionary = [NSJSONSerialization JSONObjectWithData:webData    options:0 error:nil];

    for (NSDictionary *diction in allDataDictionary) {
        NSString *currDate = [diction objectForKey:@"Current Date"];
        NSString *timePeriod = [diction objectForKey:@"Time Period"];
        NSString *transCount = [diction objectForKey:@"Transaction Processed"];
        NSString *approved = [diction objectForKey:@"Approved"];
        NSString *posApproved = [diction objectForKey:@"Standing App"];
        NSString *approvalRate = [diction objectForKey:@"Approval Rate"];
        NSString *respTime = [diction objectForKey:@"Resp Time"];

        [array addObject:[NSString stringWithFormat:@"%@       %@       %@       %@       %@       %@", timePeriod, transCount, approved, posApproved, approvalRate, respTime]];

    } [[self myTableView] reloadData]; 
```

我的表视图：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(!cell)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

   // NSString *currDate = [[array objectAtIndex:indexPath.row] objectForKey:@"Current Date"]; //added
   //  NSString *someOtherKey = [[array objectAtIndex:indexPath.row] objectForKey:@"Some other key"]; //added

    cell.textLabel.text = [array objectAtIndex:indexPath.row];
   // cell.textLabel.text = [NSString stringWithFormat:@"%@  %@", currDate, someOtherKey]; //added

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:42:53.957

我没有看到其他方式而不是 HTML 解决方案。
只需使用表格创建 NSString 并将其显示在 UIWebView 中。

例如

```
NSString* htmlString = [NSString stringWithFormat:@"<table><tr>"
                                                    "<td>%@</td>"
                                                    "</tr></table>",
                                                    JSON_VARIABLE];
[webView loadHTMLString:htmlString baseURL:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:46:36.223

您可以决定每个字符串将具有的标准长度，并用空格字符填充所需的额外空间。如果您选择所有字符串之间的最大长度，则不会剪切任何字符串：

```
NSString* formatted=[yourString stringByPaddingToLength: maxLength withString: @" " startingAtIndex: 0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T20:18:40.707

而不是这里的空格：

```
array addObject:[NSString stringWithFormat:@"%@       %@       %@       %@       %@       %@", timePeriod, transCount, approved, posApproved, approvalRate, respTime]]; 
```

您可以使用制表符“\t”，例如：

```
array addObject:[NSString stringWithFormat:@"%@ \t %@ \t %@ \t %@ \t %@ \t %@", timePeriod, transCount, approved, posApproved, approvalRate, respTime]]; 
```

# php - 刷新时交换两个不同的图像/div

> ID：13444034
> 
> 赞同：0
> 
> 时间：2012-11-18T20:01:56.833
> 
> 标签：php, javascript, jquery, css

我一直在研究如何在刷新时交换两个图像或 div。我找到了一些来源，但没有一个做我想让他们做的事情。这是我希望我的工作方式：

我有两个带有图像的 div。一个 div 高于另一个。顶部 div 将显示一个图像，底部 div 将显示不同的图像。我希望每次您刷新或重新访问页面时，图像或 div 都会切换，无论哪个更有意义。

这是我对广告的简单 CSS 编码（在我的侧边栏中）：

```
#sidebar {float:left; width:300px; min-height:400px; }

#sidebarhomenewsad1 { width:290px; height:580px; margin-bottom:10px; }

#sidebarhomenewsad2 { width:290px; height:580px; margin-bottom:10px; } 
```

我使两个 div 完全相同，只是名称不同，因为我不知道刷新时的图像交换是否需要两个不同的 div。

回顾一下，我想要两个不同的图像（一个在下面，一个在上面）在刷新/重新访问页面时相互切换/交换。

任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:25:18.043

您可以使用 cookie 来实现。第一次访问时，如果没有设置cookie（例如'upper_div_num'），你应该将第一个div显示为upper，并将cookie值设置为1。下次，你应该检查'upper_div_num'cookie，如果是则设置为2 1，如果设置为 2 或未设置，则设置为 1。PHP 或 Javascript 代码应检查此 cookie 值并相应地定位 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:29:19.380

使用[jQuery.cookie()](https://github.com/carhartl/jquery-cookie)

# HTML

```
<img class="a" src="http://i.imgur.com/dCabSb.jpg" />
<img class="b" src="http://i.imgur.com/ZUTsGb.jpg" />​ 
```

# JS

```
if (!$.cookie('currentImage')) {
    $.cookie('currentImage', '1')
} else {
    if ($.cookie('currentImage') == '1') {

        tmp = $('.a').attr('src');
        $('.a').attr('src', $('.b').attr('src'));
        $('.b').attr('src', tmp);

        $.cookie('currentImage', '2')
    } else {
        $.cookie('currentImage', '1')
    }
}​ 
```

小提琴 - [http://jsfiddle.net/mrYaA/](http://jsfiddle.net/mrYaA/)

# jquery - 预加载 youtube 视频 iframe 以获得更流畅的 jquery 动画？

> ID：13444035
> 
> 赞同：1
> 
> 时间：2012-11-18T20:02:07.160
> 
> 标签：jquery, youtube, slidedown

我有许多指向 youtube 视频 iframe 的链接，这些链接使用 jQuery slideDown 通过传递 Youtube href 出现在弹出窗口中，如下所示。工作正常，但效果很刺耳，因为 Youtube img 不“尊重” jQuery slideDown 并流畅地显示。例如。

[http://jchmusic.com/videos](http://jchmusic.com/videos)

...只需单击 4 个 img 链接中的任何一个。

有没有办法以某种方式“预加载”Youtube iFrame（或其他技术）的内容，以便让 slideDown 错觉更好？（顺便说一句：我已经尝试附加单独的节点，而不是像下面这样的所有一个大字符串，但它没有效果。）

```
jQuery('ul.slideshow a').click(function(e) {
    e.preventDefault();          
    var pNum = jQuery(this).attr('href');
    jQuery('#modalpopup #inside').empty();          
    jQuery('#modalpopup #inside').append('<iframe width="420" height="315" src="http://www.youtube.com/embed/' + pNum + '" frameborder="0" allowfullscreen></iframe>');
    iH = jQuery(document).height();
jQuery('#overlay').height(iH - 112).fadeTo( 'slow', .2 );
    jQuery('#modalpopup').slideDown(1000);
}); 
```

TIA,

---JC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:13:14.957

一个怎么样`setTimeout`

```
jQuery('ul.slideshow a').click(function(e) {
    e.preventDefault();
    var pNum = jQuery(this).attr('href');
    jQuery('#modalpopup #inside').empty();
    jQuery('#modalpopup #inside').append('<iframe width="420" height="315" src="http://www.youtube.com/embed/' + pNum + '" frameborder="0" allowfullscreen></iframe>');
    setTimeout(function() {
        iH = jQuery(document).height();
        jQuery('#overlay').height(iH - 112).fadeTo('slow', .2);
        jQuery('#modalpopup').slideDown(1000);
    }, 1200);
});​ 
```

# c# - 如何搜索特定字符串并返回包含该字符串的整行？

> ID：13444036
> 
> 赞同：3
> 
> 时间：2012-11-18T20:02:14.897
> 
> 标签：c#, winforms

我有这样的文本文件：

> 2012 年 11 月 18 日测试1
> 
> 2012 年 11 月 19 日测试2
> 
> 11/20/2012 测试3
> 
> 11/21/2012 测试4
> 
> 11/22/2012 测试5
> 
> 11/23/2012 测试6
> 
> 2012 年 11 月 24 日测试7
> 
> 11/25/2012 测试8

如何搜索当前日期并返回包含该日期的整行？例如，如果我今天运行程序，它应该返回

> 2012 年 11 月 18 日测试1

代码：

```
string searchKeyword = monthCalendar1.SelectionStart.ToShortDateString();
string[] textLines = File.ReadAllLines(@"c:\temp\test.txt");
List<string> results = new List<string>();

foreach (string line in textLines)
{
    if (line.Contains(searchKeyword))
    {
        results.Add(line);
        listBox2.Items.Add(line);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T20:10:18.570

*首先*- 按行拆分文本。例如这样：

```
// string[] lines = File.ReadAllLines(@"c:\temp\test.txt");
string[] lines = text.Split(new string[] { Environment.NewLine }, StringSplitOptions.None); 
```

*第二*- 以指定格式查找以当前日期字符串开头的行：

```
string date = DateTime.Now.ToString("MM/dd/yyyy");    
IEnumerable<string> results = lines.Where(l => l.StartsWith(date)); 
```

如果您完全确定可能只有一条这样的线，请使用

```
string result = lines.SingleOrDefault(l => l.StartsWith(date)); 
```

* * *

这是您的代码修复和重构（您应该使用自定义日期字符串格式并使用`StartsWith`而不是`Contains`）

```
string searchKeyword = monthCalendar1.SelectionStart.ToString("MM/dd/yyyy"); 
string[] textLines = File.ReadAllLines(@"c:\temp\test.txt");

foreach (string line in textLines.Where(l => l.StartsWith(searchKeyword)))
    listBox2.Items.Add(line); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:14:38.440

```
var matches = new List<string>();
var currentDate = DateTime.Now.ToString("dd/MM/yyyy");

using (StreamReader sr = new StreamReader("file.txt"))
{
    var line = sr.ReadLine();
    if(line.StartsWith(currentDate))
        matches.Add(line);
} 
```

要将它们添加到列表框中：

```
foreach (var match in matches)
    listBox.Items.Add(match); 
```

# google-spreadsheet-api - OAuth 2.0 Playground List 电子表格元数据：请求 URI 无效

> ID：13444038
> 
> 赞同：0
> 
> 时间：2012-11-18T20:02:20.070
> 
> 标签：google-spreadsheet-api

我正在测试 Google Spreadsheet 3.0 API 并使用[OAuth 2.0 Playground](https://developers.google.com/oauthplayground/?code=4/mOswS7Ibshq6uet0KPw177H0o4Ug.IquE6H5wQdYXOl05ti8ZT3ZZGysqdgI)。尝试使用 List 电子表格元数据请求时，我收到错误**Invalid request URI**。以下是响应详细信息：

```
HTTP/1.1 400 Bad Request
Content-length: 19
X-xss-protection: 1; mode=block
X-content-type-options: nosniff
X-google-cache-control: remote-fetch
-content-encoding: gzip
Server: GSE
Reason: Bad Request
Via: HTTP/1.1 GWA
X-chromium-appcache-fallback-override: disallow-fallback
Cache-control: private, max-age=0
Date: Sun, 18 Nov 2012 19:56:29 GMT
X-frame-options: SAMEORIGIN
Content-type: text/html; charset=UTF-8
Expires: Sun, 18 Nov 2012 19:56:29 GMT
Invalid request URI 
```

我试过[这个](https://stackoverflow.com/questions/10803812/how-do-i-use-googles-oauth-2-0-playground-for-document-list-api)，但没有成功。

如果有人能指出正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:10:42.953

看来我已经找到了解决我自己问题的方法。它看起来像 OAuth 2.0 Playground 中的错误：当您从“列出可能的操作”中选择时，列出元数据菜单项返回以下请求 URL：[http](http://spreadsheets.google.com/feeds/default/private/full) ://spreadsheets.google.com/feeds/default/private/full发送此请求返回上述错误。您必须改用[http://spreadsheets.google.com/feeds/spreadsheets/private/full](http://spreadsheets.google.com/feeds/spreadsheets/private/full)请求 URL，它似乎有效。

# syntax - 帕斯卡语法错误；预期但是。成立？

> ID：13444039
> 
> 赞同：1
> 
> 时间：2012-11-18T20:02:34.990
> 
> 标签：syntax, syntax-error, pascal

```
program MouseInput;
Uses WinCrt,WinMouse, Graph;
Var GraphicsDriver, GraphicsMode :smallint;
x, y: smallint;
function GetMouseX: word;
function GetMouseY: word;
procedure InitMouse;
procedure DoneMouse;
Begin
     Writeln('Initialising Graphics, please wait...');
     GraphicsDriver := Detect;
     InitGraph(GraphicsDriver, GraphicsMode,'');
     begin
          InitMouse;
          Writeln('Move mouse cursor to square 10,10 to end');
          Repeat
                X:=GetMouseX;
                Y:=GetMouseY;
                Writeln('X,Y= (',X,',',Y,')');
          Until (X=9) and (Y=9);
          DoneMouse;
     end;
end. 
```

帕斯卡抛出的错误是：23 / 4 mouse.pas 致命：语法错误，; 预期但是。找到但我有正确的开始和结束数量，所以因为它是最后一个需要'。

一切顺利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:30:33.540

您缺少主程序块，然后您的某些功能程序当然也一样。下面将编译，因为它提供了缺少的块，但当然它不会做任何事情。

```
program MouseInput;
Uses WinCrt,WinMouse, Graph;
Var GraphicsDriver, GraphicsMode :smallint;
x, y: smallint;

function GetMouseX: word;
begin
end;
function GetMouseY: word;
begin
end;
procedure InitMouse;
begin
end;

procedure DoneMouse;
Begin
     Writeln('Initialising Graphics, please wait...');
     GraphicsDriver := Detect;
     InitGraph(GraphicsDriver, GraphicsMode,'');
     begin
          InitMouse;
          Writeln('Move mouse cursor to square 10,10 to end');
          Repeat
                X:=GetMouseX;
                Y:=GetMouseY;
                Writeln('X,Y= (',X,',',Y,')');
          Until (X=9) and (Y=9);
          DoneMouse;
     end;
end;

begin
end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-19T15:43:21.397

```
Function monotone(
    A : Int_Array; {array [1..20] of integer}
    n : integer ) {size of the defined lower}
      : integer ; {portion of A}

VAR
i, {index for current limseq}
j, {index for predecessors of current limseq}
maxj, {length of current longest predecessors subsequence}
pmax, {end of current limseq inA[1..i-1]}
curr, {=A[i]}
maxl : integer; {length of limseq ending at pmax}
length : Int_Array; {length [k] is the length of}
                    {limseq at k}
    begin {monotone}
        {<STAD> Initialization of parameter A}
        {<STAD> Initialization of parameter n}
        length[1]:=1;
        pmax:=1;
        maxl:=1;
        i:=2;
        while i<=n do
        begin
            curr:=A[1];
            if curr<A[pmax} then
                begin
                    max j:=1;
                    j:=1;
                    while j<={i-1} do
                        begin 
                            if A[j]<curr then
                                begin
                                    if maxj<length[j] then
                                       maxj:=length[j];
                                end;
                            j:=j+1;
                        end;
                    length[i]:=maxj+1;
                    if length [i]>maxl+1;
                    pmax:=i;
                end;
            end   
        ELSE {if curr<A[pmax]}
            begin
                maxl:=maxl+1;
                length[i]:=maxl;
                pmax:=i;
            end;

        monotone:=maxl;
        {<STAD> EXIT USE OF monotone (FUNCTION RESULT)}
        end; {monotone} 
```

# c - 在 C 中使用 strtok 解析字符串

> ID：13444040
> 
> 赞同：1
> 
> 时间：2012-11-18T20:02:48.557
> 
> 标签：c, search, match, strtok, verify

我想`.csv`逐行读取文件，然后检查我的行的第一个单词是否匹配`string_1`。如果匹配，那么我还想检查第二个单词是否匹配`string_2`。我的`.csv`文件包含三个字段，即用户、密码和类型。到目前为止，这是我的代码：

```
void verify ( char *user, char *password ) {

    FILE *data;
    char verifyUser[50];

    data = fopen( "password.csv", "r+" );
    while ( fgets(verifyUser, 50, data ) != NULL) {

        char *ptr;
        ptr = strtok(verifyUser, ", ");

        /***What do I do here?***/
    }

    fclose(data);
} 
```

在这种情况下，`user`和分别`password`是`string_1`和`string_2`。有小费吗？我可以使用`strtok`将我的行分成三个子字符串，然后`strcmp`对它们执行吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:06:55.323

沿着这些思路怎么样：

```
ptr = strtok(verifyUser, ", ");
if (!ptr || strcmp(ptr, user))
    continue;

/* Okay, so the user matches. */
char *pass = strtok(NULL, ", ");
if (!pass || strcmp(pass, password)) {
    /* Invalid. */
    break;
} 
```

当然，此代码假定您已经信任这些字符串`user`，`password`并且它也未经测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:18:08.997

我不想听起来很迂腐，但是当你打开一个文件时，你应该添加一个`if`来测试文件是否可以打开。就像是：

```
if ( ( data = fopen( "password.csv", "r+" ) ) != NULL ){
    printf( "The file couldn't be opened" );
}
else{
   .
   .
   .
} 
```

或者，如果无法打开文件来跟踪问题，至少要注意一些事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T20:35:53.293

您遇到的最大问题是`strtok(verifyUser, ", ")`将输入行拆分为逗号和空格，因此如果您的任何字段包含空格（例如真实姓名），它们将被拆分为多个字段。

通常的使用方式`strtok`是循环使用：

```
for (token = strtok(inputLine, ","); token; token = strtok(0, ",")) {
    /* do something with token */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T20:21:28.237

首先，您不是逐行阅读它。您正在复制 50 个字符，`verifyUser`
因此它的工作时间不会超过缓冲区大小`(50)`长度。fgets（验证用户，50，数据）

readline 使用这样的东西......

```
getline(data, yourVariable, '\n'); 
```

然后你可以做的是..

```
ptr = strtok(yourVariable, ", ");
// now u have to iterate through `ptr` to get all the sub-strings(split-ed using parameter ',')
while(ptr !=NULL){
     if(strcmp(ptr, user)){
         // do stuff here like `break;` etc
     }
} 
```

顺便说一句，如果你进行错误检查，这是一个很好的做法......比如假设`fopen()`失败（那么你不应该运行其余代码......）

# delphi - 图片从 TWebBrowser 到 TPicture

> ID：13444041
> 
> 赞同：1
> 
> 时间：2012-11-18T20:02:53.990
> 
> 标签：delphi, winapi, rendering, delphi-xe2, twebbrowser

如何将已在 TWebBrowser 中下载的图像获取到 TPicture 而不将其复制到剪贴板或查看缓存内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T20:58:36.963

好的，我用最后一个答案给你做了样本：

首先通过 Id 使用此功能获取图像：

```
function GetImgElementById(const Doc: IDispatch; const id : string): IHTMLImgElement;
var
  Document: IHTMLDocument2;     // IHTMLDocument2 interface of Doc
  Body: IHTMLElement2;          // document body element
  Tags: IHTMLElementCollection; // all tags in document body
  Tag: IHTMLElement;            // a tag in document body
  I: Integer;                   // loops thru tags in document body
begin

  Result :=nil ;
  // Check for valid document: require IHTMLDocument2 interface to it
  if not Supports(Doc, IHTMLDocument2, Document) then
    raise Exception.Create('Invalid HTML document');
  // Check for valid body element: require IHTMLElement2 interface to it
  if not Supports(Document.body, IHTMLElement2, Body) then
    raise Exception.Create('Can''t find <body> element');
  // Get all tags in body element ('*' => any tag name)
  Tags := Body.getElementsByTagName('img');
  // Scan through all tags in body
  for I := 0 to Pred(Tags.length) do
  begin
    // Get reference to a tag
    Tag := Tags.item(I, EmptyParam) as IHTMLElement;
    // Check tag's id and return it if id matches
    if AnsiSameText(Tag.id, id) then
    begin
      Result := Tag as IHTMLImgElement ;
      Break;
    end;
  end;
end; 
```

在你可以使用它之后：

```
var
  img : IHTMLImgElement ;
  rnd : IHTMLElementRender ;
begin
  //
  img := GetImgElementById(wb1.Document,'imgid');
  // img1 is TImage
  img1.Height := img.height ;
  img1.Width := img.width ;
  rnd := img as IHTMLElementRender ;
  rnd.DrawToDC(img1.Canvas.Handle);
end; 
```

不要忘记“MSHTML”单元；

# javascript - 折叠函数参数的最佳方法是什么？

> ID：13444043
> 
> 赞同：4
> 
> 时间：2012-11-18T20:03:02.083
> 
> 标签：javascript, arguments, benchmarking, fold

我有一个`f`可以用任意参数调用的函数。当使用 2 个参数调用它时，它会执行一个操作。当使用 >2 个参数调用它时，它**本身**必须折叠其他参数。也就是说，当我们调用 时`f(a,b,c,d)`，函数应该重新排列为`f(f(f(a,b),c,d)`。我需要尽可能优化它。我提供了 2 个解决方案并对其进行了基准测试：

```
alphabet = 'abcdefhijklmnopqrstuvwxyz'.split('');
var last_mark;
benchmark = function(msg){ 
  alert(msg.replace('$TIMEDIFF',Date.now()-last_mark)); 
  last_mark=Date.now(); 
};
fa = function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){
    if (c) return fa(fa(a,b),c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z);
    return a+b;
};
fb = function(a,b,rest){
    if (rest) return fb.apply(this,[fb(a,b)].concat(Array.prototype.slice.call(arguments,2)));
    return a+b;
};
benchmark("Starting benchmark:");
for (var i=0; i<100000; ++i) fa.apply(this,alphabet);
benchmark("Function 1: $TIMEDIFF");
for (var i=0; i<100000; ++i) fb.apply(this,alphabet);
benchmark("Function 2: $TIMEDIFF"); 
```

第一个解决方案更快（node.js 上 200 毫秒对 4000 毫秒）。这可以进一步优化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T22:02:53.157

ES5`.reduce()`为该任务引入了一个函数。它为前两项调用某个函数，然后再次调用它并传递第一个调用的返回值和第三项，然后再次调用它传递该调用的返回值*和*第四项，依此类推。

```
var f = function () {
    return toArray( arguments ).reduce(function ( a, b ) {
        return a + b;    
    });
}; 
```

**现场演示：http:** [//jsfiddle.net/hpAtB/1/](http://jsfiddle.net/hpAtB/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:29:31.007

为什么不使用对象作为参数？

```
var o = {
  a:value1,
  b:value2,
  ...
  z:value26
};

fa(o);

function fa(obj){
  if(obj.c){  // or any other logic
    return fa(obj);
  }
  return o;
} 
```

或全局变量（不带参数）

```
fa();

function fa(){
  if(o.c){  // or any other logic
    o.c = o.d + o.e;
    fa();
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T21:53:41.223

最快的方法似乎是用迭代代替递归。

定义高阶函数`folder`

```
var folder = function(func) {
   return function() {
            var args = Array.prototype.slice.call(arguments), len = args.length, result = args[0], i = 1;
            for(; i < len; i++){
               result = func.call(this, result, args[i]); 
            }

           return result;
   };
}; 
```

检查此性能测试：http: [//jsperf.com/varargs-fold](http://jsperf.com/varargs-fold)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T21:10:58.447

这样的事情会减少数组的创建和操作

```
fa = function(a,b){
    function recursive(a, b, rest) {
        if (rest && rest.length) 
            return recursive(recursive(a,b), rest.pop(), rest);
        return a+b;
    }
    return recursive(a, b, Array.prototype.slice.call(arguments, 2).reverse());
}; 
```

或者像这样将函数调用的数量减少一半：

```
fa = function(a,b) {
    function recursive(a, b, rest) {
        var result = a + b;
        return rest.length ? recursive(result, rest.pop(), rest) : result;
    }
    return recursive(a, b, Array.prototype.slice.call(arguments, 2).reverse());
}; 
```

* * *

我假设使用的成本`.reverse()`值得使用`.pop()`而不是`.shift()`. 您可能想尝试两种方式。

* * *

当然你也可以重用这个函数：

```
fa = (function() {
    function recursive(a, b, rest) {
        var result = a + b;
        return rest.length ? recursive(result, rest.pop(), rest) : result;
    }
    return function(a,b) {
        return recursive(a, b, Array.prototype.slice.call(arguments, 2).reverse());
    };
})(); 
```

# javascript - 淘汰赛 - 如何从嵌套函数访问父属性？

> ID：13444045
> 
> 赞同：0
> 
> 时间：2012-11-18T20:03:28.420
> 
> 标签：javascript, knockout.js, nested-attributes

请问，有人可以帮我解决这个问题吗？

执行**create**方法时出现以下错误：

```
*Uncaught TypeError: Object #<Object> has no method 'baseUri'* 
```

从以下绑定调用此方法：

```
<form id="createProducts" data-bind="submit: products.create"> 
```

当从**PreLoad**方法调用**read**方法时，*baseUri*和*items*都可用。

 ****当视图模型被定义为一个函数时，我找到了解决这个问题的方法，但在我的例子中，它被定义为一个对象。

这是我的完整 JS 文件

* * *

```
var mm = {

    /* Products ********************************************************** */

    products: {

        items: ko.observableArray([]),

        read: function () {
            $.getJSON(this.baseUri(), this.items);
        },

        create: function (formElement) {

            $.post(this.baseUri(), $(formElement).serialize(), null, "json")
                .done(function (o) {                    
                    alert("The Product " + o.Name + " was created.");
                    this.items.push(o);
                });
        },

        baseUri: function () { return BASE_URI; }
    }

};

function PreLoad() {

    mm.products.read();

    ko.applyBindings(mm);
} 
```

* * *

*   **BASE_URI**是在我的母版页中定义的全局变量，我需要它，因为我有多个嵌套视图模型（我从这段代码中删除它们）并且每个 baseUri 都是 BASE_URI +“some_string_value”的组合。无论如何，我也需要访问**项目**，以更新列表中显示的值。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:57:28.117

我有一种感觉`this`，不是你打电话时想的那样`products.create`。尝试使用`.bind`明确设置上下文：

```
<form id="createProducts" data-bind="submit: products.create.bind($data)"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:54:18.407

正如 Andrew Whitaker 已经提到的 - “这个”将不是你所期望的上下文。我的解决方案是存储“this”引用（例如称为“self”）并使用它而不是“this”：

```
products: {
    self: undefined,
    items: ...,
    init: function() { 
        this.self = this; 
    },
    read: function () {$.getJSON(self.baseUri(), self.items);},
    create: function () {
        $.post(self.baseUri(), $(formElement).serialize(), null, "json")
            .done(function (o) {                    
                alert("The Product " + o.Name + " was created.");
                self.items.push(o);
            });
    },
    baseUri: function () { return BASE_URI; }
};

function PreLoad() {

    mm.products.init();
    mm.products.read();

    ko.applyBindings(mm);
} 
```

您还可以明确指出应该在哪个上下文函数中调用：

```
<form id="createProducts" data-bind="submit: function () { products.create($root.products); }">

products: {
    create: function(self) {
        ...
    } 
```

在这种情况下 $root 应该指向您的视图模型，因此您将传递 products 对象的实例来创建函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:22:53.947

有两种方法可以确保`this`绑定事件时正确无误。

首先是使用`bind`：

```
<form id="createProducts" data-bind="submit: products.create.bind(products)"> 
```

第二种是使用内联函数：

```
<form id="createProducts" data-bind="submit: function() { products.create(); }"> 
```

将来这种行为可能会发生变化（请参阅[https://github.com/SteveSanderson/knockout/issues/378](https://github.com/SteveSanderson/knockout/issues/378)）。

编辑

有两种解决方案可以使`this`回调函数可用。第一种是复制`this`到通过闭包可用的局部变量。

```
 var self = this;
        $.post(this.baseUri(), $(formElement).serialize(), null, "json")
            .done(function (o) {                    
                alert("The Product " + o.Name + " was created.");
                self.items.push(o);
            }); 
```

二是使用`bind`回调函数。

```
 $.post(this.baseUri(), $(formElement).serialize(), null, "json")
            .done(function (o) {                    
                alert("The Product " + o.Name + " was created.");
                this.items.push(o);
            }.bind(this)); 
```****

# android-activity - 覆盖活动的挂起转换

> ID：13444046
> 
> 赞同：0
> 
> 时间：2012-11-18T20:03:35.450
> 
> 标签：android-activity, android-animation, transitions

我正在开发一个涉及活动之间转换的应用程序。使用覆盖挂起过渡我成功了，但活动之间的动画默认情况下仅支持某些设备。但是有些设备必须手动在设置中设置动画。现在的问题是使用代码这是否可能？

任何示例代码或链接真的很明显

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-20T09:14:53.603

我们可以通过以下步骤在活动之间制作动画：

第一步，在 res 中创建目录，名称为 anim，之后。在这个目录中，我们创建了 4 个文件：

go_in.xml

```
<translate
    android:duration="700"
    android:fromYDelta="100%"
    android:toYDelta="0%"/> 
```

go_out.xml

```
<scale android:duration="700"
    android:fromXScale="100%"
    android:fromYScale="100%"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toXScale="70%"
    android:toYScale="70%"/> 
```

back_in.xml

```
<scale android:duration="700"
    android:fromXScale="70%"
    android:fromYScale="70%"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toXScale="100%"
    android:toYScale="100%"/> 
```

back_out.xml

```
<translate
    android:duration="700"
    android:fromYDelta="0%"
    android:toYDelta="100%"/> 
```

之后我们需要两个活动。第一活动

```
package com.thedeveloperworldisyours.gmailanimation;

import android.content.Intent;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void goTo(View view) {
        Intent intent = new Intent(this, SecondActivity.class);
        startActivity(intent);

    }

} 
```

这是布局 activity_first.xml：

```
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:onClick="goTo"
    android:text="@string/activity_main_go" /> 
```

最后在你的第二个活动中

```
package com.thedeveloperworldisyours.gmailanimation;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;

public class SecondActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_second);
        overridePendingTransition(R.anim.go_in, R.anim.go_out);
    }

    public void back(View view) {
        finishMyActivity();
    }

    @Override
    public void onBackPressed() {
        finishMyActivity();
    }

    public void finishMyActivity() {
        finish();
        overridePendingTransition(R.anim.back_in, R.anim.back_out);
    }
} 
```

这是布局 activity_second.xml

```
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:onClick="back"
    android:text="@string/activity_second_back" /> 
```

[您可以在GmailAnimation](https://github.com/CabezasGonzalezJavier/GmailAnimation)或[LopeAnimations](https://github.com/CabezasGonzalezJavier/LopeAnimations)中查看这些示例。[你也可以在这个博客](http://thedeveloperworldisyours.com/android/gmail-overriding-pending-transition/#sthash.CEhJwJLg.dpbs)中看到更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:07:17.397

除了 API 5 之后的 API 5 之后，您实际上无法控制 Activity 动画，`overridePendingTransitions`这实际上涵盖了所有设备（将您的 min API 设置为 7/8，涵盖 94% 以上的设备）。

如果特定设备覆盖了过渡类型，那么您对此无能为力，但您通常会发现它用于默认动画。

呼入`overridePendingTransition()`将`onCreate()`覆盖他们设备默认执行的操作。

# codeigniter - CodeIgniter - 拆分控制器

> ID：13444051
> 
> 赞同：1
> 
> 时间：2012-11-18T20:04:02.927
> 
> 标签：codeigniter, split, controllers

我正在使用 CodeIgniter 开发产品评论网站，但在拆分控制器时遇到了一些麻烦。

这是我已经做过的：

类别 - 类别、子类别... Main - 只有主页 Products - 只有产品页面 Users - Login、Register、Account... 评论 - 只有提交评论的页面

这是正确的吗”？

我应该在哪里放置诸如联系、关于、帮助之类的页面...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:33:45.113

这是一个许多人强烈反对的话题，因为组织非常主观，尤其是在编程方面。

但是，对我来说，我通常根据他们访问的主要数据类型或他们将执行的主要角色类型来组织我的控制器。

关于数据类型，您可能有：

*   controllers/products.php（用于产品、评论和按类别查看产品评论）
*   controllers/page.php（对于页面内容，可以是每个页面的方法，也可以是通过db访问的视图方法）

关于所扮演的角色，您可能有：

*   controllers/auth.php（用于登录、注销、注册等）
*   controllers/settings.php（用于编辑配置文件等）

# python - 稀疏矩阵上的点积

> ID：13444053
> 
> 赞同：4
> 
> 时间：2012-11-18T20:04:21.427
> 
> 标签：python, scipy, sparse-matrix, dot-product

我正在尝试使用 Python 对该行的转置来获取稀疏矩阵中一行的点积。我有一个名为 X2 的巨大稀疏矩阵。我将结果（应该是一个数字）保存在一个名为 Njc 的列表中。

```
 X2 = X.transpose()
    for row in X2:
        Njc.append(dot(row,row.transpose())) 
```

但是，当我运行我的程序时，结果不是单个数字。它们看起来像： (0, 0) 355

(0, 0) 295

(0, 0) 15

(0, 0) 204

(0, 0) 66

……

不幸的是我的稀疏矩阵太大了，我不能把它变成一个密集的矩阵（我的记忆会爆炸）。有没有办法只得到右边的数字而没有左边的夫妇？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:31:57.183

`dot`正在返回一个稀疏矩阵。要选择稀疏矩阵中的一个值，您可以使用`.todense().item()`：

```
Njc.append((np.dot(row, row.transpose())).todense().item()) 
```

# android - 检测 TextView 是否跨越 2 行

> ID：13444060
> 
> 赞同：22
> 
> 时间：2012-11-18T20:05:26.320
> 
> 标签：android, android-layout, textview

我想知道是否有任何方法可以检测要适合文本视图的字符串是否到达屏幕末尾并因此更改行，或者文本视图是否跨越 2 行？

我想知道这一点，所以如果文本视图跨越 2 行，我可以增加一些文本视图之间的边距，当然我想动态地执行此操作。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-18T20:09:04.130

`TextView`支持`getLineCount()`- 请仔细查看[文档](https://developer.android.com/reference/android/widget/TextView.html#getLineCount%28%29)，因为您可能需要先检查视图是否已绘制。

# javascript - 创建一个随机的 2D 凹面多边形景观 JavaScript

> ID：13444062
> 
> 赞同：5
> 
> 时间：2012-11-18T20:05:43.873
> 
> 标签：javascript, algorithm, math, terrain

我正在用 JavaScript ( [http://www.isogenicengine.com/demos/1.1.0/lander/](http://www.isogenicengine.com/demos/1.1.0/lander/) ) 编写一个简单的月球着陆器克隆，而不是一个只有高点和低点的基本景观，我想要一个算法生成随机的洞穴状空间。给定一个矩形区域以使用 [0, 0, 1920, 1200]，该算法应该能够生成如下图所示的内容。理想情况下，洞穴区域的任何“入口”都应具有设定的宽度，以便着陆器可以进入“内部”。

![着陆器](../Images/5c02fa67b7a519b3c0f2ce7ee600ab24.png)

我认为这可能是不可能的，我可以只画一堆像上面那样的图像并将像素数据转换为粗糙的多边形数据，但是随机生成的关卡会更酷！

对于超硬核加分，指定有多少类似洞穴的结构的能力将更加令人敬畏。

该算法的输出将是一个点数组，每个点都是一个包含 x 和 y 属性 {x: val, y: val} 的对象，当您在当前点和下一个点之间顺序绘制线时，构成多边形.

如果有人有类似的 JavaScript 实现，那也会有很大帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T05:16:32.000

从了解在建筑中使用的*气泡图*是什么开始。这是一个空间的拓扑图，以气泡为空间，以线条代表通道。我没有找到任何可以快速推荐的优秀网页，但是进行图像搜索会产生很多示例。

气泡图可以被认为是一个以气泡为顶点的图形。在您的示例中，将“天空”（包括顶部边缘的斑点）建模为顶点。洞穴是另一个顶点，入口是边缘。从这个角度来看，很容易生成尽可能多的洞穴般的复杂性。

下一个技巧是把它变成几何。本质上，您希望从图形的骨架中推出并在玩家可以导航的地方留出空隙。同时，您要确保这些空隙不会推出太远、变薄或消除墙壁。因此，您还需要对实体区域进行建模，这是通过对[偶图](http://en.wikipedia.org/wiki/Dual_graph)完成的。对偶图位于原始图的“下方”，从某种意义上说，边缘交叉代表了冲突，冲突的解决有利于虚实而不是实心。

总结：（1）用你想要的特征做一个拓扑图。(2) 为图创建几何图形，为每个顶点分配一个位置，为每个边分配一个路径。(3) 构造一个对偶图，并分配它的几何图形。(4) 通过向外扩展来充实与每个图相关的空间，解决冲突有利于通过而不是阻塞。

您可能想说服自己，最终几何图形的周长列表可以通过图的半边遍历生成，就像一只手扶着墙上走迷宫一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:37:30.910

如果您有兴趣，可以使用 Marching Squares 将标量值的 2D 字段（可能从 Perlin 或 Simplex Noise 获得）转换为一组边缘线。当然，最终的结果将取决于您如何获得 2D 场标量值（您如何操作 Perlin 或 Simplex Noise）。

[这](http://users.polytech.unice.fr/~lingrand/MarchingCubes/algo.html)是我能找到的最好的网站，它很好地介绍了细节。（它的记录不如它的 3D 双胞胎 Marching Cubes 那样有据可查）

实际上，它上面的[Wiki](http://en.wikipedia.org/wiki/Marching_squares)页面非常好。

# typescript - TypeScript - 条件模块导入/导出

> ID：13444064
> 
> 赞同：35
> 
> 时间：2012-11-18T20:06:03.983
> 
> 标签：typescript

TypeScripts 以某种“声明性”的方式抽象出模块导入/导出。

但是如果我想根据一些运行时计算的条件导入或导出一些东西怎么办？

最常见的用例是在 Node.js 和 Windows Script Host 等平台之间共享代码。

TypeScript 自己的 io.ts 在 TSC 编译器中抽象输入/输出，手动破解内置的 TypeScript 自己的模块语法。这是唯一的方法吗？

PS 将**import fs = module("fs")**加入**if**语句的问题在于 TypeScript 只允许在顶层使用 import 语句。这意味着在 WSH 中**require("fs")**将被执行并且显然失败，因为**require**是未定义的。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2018-12-17T04:42:05.990

从[TypeScript v2.4](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-4.html)开始可以使用[动态导入](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#Dynamic_Imports)来实现条件导入

一个异步示例：

```
async function importModule(moduleName: string):Promise<any>{
    console.log("importing ", moduleName);
    const importedModule = await import(moduleName);
    console.log("\timported ...");
    return importedModule;
}

let moduleName:string = "module-a";
let importedModule = await importModule(moduleName);
console.log("importedModule", importedModule); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-09-12T18:25:45.187

我有一个稍微笨拙但非常有效的解决方案，特别是如果您使用条件导入/导出进行单元测试。

具有始终发出的导出，但使内容根据运行时值而变化。例如：

```
// outputModule.ts
export const priv = (process.env.BUILD_MODE === 'test')
  ? { hydrateRecords, fillBlanks, extractHeaders }
  : null 
```

然后在消费文件中，导入导出，检查导入的值是否存在，如果存在，则将您要单独导入的所有值分配给一组变量：

```
// importingModule.spec.ts
import { priv } from './outputModule';

const { hydrateRecords, fillBlanks, extractHeaders } = priv as any;
// these will exist if environment var BUILD_MODE==='test' 
```

限制：

1.  遗憾的是，您必须将导入设置为“任何”以使编译器满意。
2.  您需要检查是否定义了特定的导入（但随地区提供）。
3.  导入文件将期望定义这些值。因此，您必须确保导入文件确实需要模块（如果您正在处理仅在测试期间运行的文件，这很好），或者您必须为它们实际上没有被导出的情况定义替代值。

尽管如此，就我的目的而言，它对我来说非常有效，希望它也适用于你。它对于单元测试私有方法特别有用。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-19T17:29:56.243

我同意他们只能拥有顶级范围的事实充其量是次优的。除了您所说的问题外，这还意味着软件的初始加载时间较慢。例如，在 nodejs 中，如果该函数很少使用，我现在有时会在函数中加载一个模块。所以我的应用程序启动得更快，因为它还没有加载那个模块。

当然，你可以直接使用 require 或 AMD，但是你会错过一些打字的好处。

然而，我认为真正的问题在于 Harmony/es6 将模块定义为顶层，而 TS 似乎遵循该提议。所以不确定TS团队在不偏离标准的情况下能做多少。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T09:34:36.883

TypeScript 中有一种动态导入机制，尽管实现方式因模块类型而异。

下面的示例（对于 AMD）将有条件地加载模块：

```
declare function require(moduleNames: string[], onLoad: (...args: any[]) => void): void;

import * as ModuleAlias from './mod';

const someCondition = true;

if (someCondition) {
    require(["./mod"], (module: typeof ModuleAlias) => {
        console.log(module.go());
    });
} 
```

`import`文件顶部的语句是惰性的，除非条件为`if (someCondition)`真，否则模块的实际加载不会发生。

您可以通过更改`someCondition`并查看对网络选项卡的影响来测试这一点，或者您可以查看生成的代码...在动态版本中，`"./mod"`不会出现在`define`调用中。在非动态中，它确实如此。

# 动态加载

```
define(["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    const someCondition = true;
    if (someCondition) {
        require(["./mod"], (module) => {
            console.log(module.go());
        });
    }
}); 
```

# 没有动态加载

```
define(["require", "exports", "./mod"], function (require, exports, ModuleAlias) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    const someCondition = true;
    if (someCondition) {
        console.log(ModuleAlias.go());
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-16T14:20:02.170

```
import { something } from '../here';
import { anything } from '../there';

export const conditionalExport =
  process.env.NODE_ENV === 'production' ? something : anything; 
```

灵感来自[安德鲁的回答](https://stackoverflow.com/a/39456496/11322237)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-04T14:36:57.220

找不到将有条件导出作为有条件导入的直接方法。但我发现 Andrew Faulkner 的回答很有用，但我对这些限制不满意。

> 1.  遗憾的是，您必须将导入设置为“任何”以使编译器满意。

我想出了一个解决上述限制的方法。这是我的步骤。

1.  将条件导出写为一个对象，如 Andrew 的回答。
2.  在另一个模块中导入导出的对象。
3.  解构它。
4.  通过分配所有具有正确类型的解构项来定义新常量。

这是示例。

```
//CryptoUtil.ts

function encryptData(data : Buffer, key : Buffer) : Buffer {
    // My encryption mechanism.
    // I return a Buffer here.
}

function decryptData(data : Buffer, key : Buffer) : Buffer {
    // My decryption mechanism.
    // I return a Buffer here.
}

// Step 1
// Exporting things conditionally

export const _private = (process.env.NODE_ENV === "test") ? {
    __encryptData : encryptData,
    __decryptData : decryptData,
} : null; 
```

请注意我是如何导出`encryptData`为`__encryptData`而不是直接导出为`encryptData`. 我这样做只是因为我可以`__encryptData`在解构导入器模块时给出一个私有函数的想法。这完全是我的偏好。

然后在导入东西时...

```
// CryptoUtil.test.ts

// Step 2
// import the exported object.
import { _private } from "./CryptoUtil";

// Step 3\. De-structuring.
const {
    __encryptData,
    __decryptData,
} = _private as any;

// Step 4\. Define new constants giving proper type.

const _encryptData : (data : string, password : Buffer) => Buffer = __encryptData;
const _decryptData : (encryptedData : Buffer, password : Buffer) => Buffer = __decryptData;

// Now I can use _encryptData, _decryptData having the proper type. 
```

尽管我提出这种方式来解决安德鲁的第一个限制，但我的方法引入了一个新的限制。也就是说，您必须在两个地方定义类型。当您更改导出函数的类型时，它不会神奇地更改导入函数的类型。您必须手动更改它。

# c++ - 使用 RapidXML 遍历一个简单的 DOM Xml 文档

> ID：13444070
> 
> 赞同：3
> 
> 时间：2012-11-18T20:06:54.197
> 
> 标签：c++, c, xml, xml-parsing, rapidxml

好的伙计们，所以我使用 rapidXML 来解析一个非常简单的 XML 文档。我要做的就是将 xml 文档中的数据解析为我自己的自定义数据结构。作为一个起点，我希望能够输出每个节点并且数据包含，过去我想我可以弄清楚。rapidXML 的文档似乎主要集中在使用 rapidXML 创建 xml 文档上，但是，在这里我只是想阅读它。首先是我的代码（作为我继续使用该程序之前的注释，我当然会直接从文件中加载 xml，不要开玩笑！）

```
#include <cstdlib>
#include <iostream>
#include "Page.h" 
#include "HashTable.h"
#include "TimeStamp.h"
#include "AvlTree.h"
#include "./rapidxml/rapidxml.hpp"
#include "./rapidxml/rapidxml_print.hpp"
#include <fstream>
#include <sstream>
#include <vector>

using namespace std;
using namespace rapidxml;

char s[] = "<?xml version='1.0' encoding='utf-8'?>"
    "<people>"
        "<person gender='female'>"
            "<fname>Morgan</fname>"
            "<lname>Saxer</lname>"
        "</person>"
        "<person gender='male'>"
            "<fname>Tyler</fname>"
            "<lname>Springer</lname>"
        "</person>"
    "</people>";

void traverse_xml(const std::string& input_xml)
{
    vector<char> xml_copy(input_xml.begin(), input_xml.end());
    xml_copy.push_back('\0');

    xml_document<> doc;
    doc.parse<parse_declaration_node | parse_no_data_nodes>(&xml_copy[0]);

    string encoding = doc.first_node()->first_attribute("encoding")->value();
    cout << "encoding: " << encoding << endl;

    xml_node<>* cur_node = doc.first_node("people");

    string person_type = cur_node->first_node("person")->first_attribute("gender")->value();
    cout << "Gender: " << person_type << endl;

    cur_node = cur_node->first_node("person")->first_node("fname");
    string attr2 = cur_node->value();
    cout << "fname: " << attr2 << endl;

    cur_node = cur_node->next_sibling("lname");
    attr2 = cur_node->value();
    cout << "lname: " << attr2 << endl;

    //next person node begins here, this is where I am having the problem

    cur_node = cur_node->next_sibling("person"); //this doesn't work, and I don't know what command to use instead
    attr2 = cur_node->first_attribute("gender")->value();
    cout << "Gender: " << attr2 << endl;
}

int main(int argc, char** argv) {

   traverse_xml(s);
       return 0;
} 
```

然而，我得到的输出是这样的：

```
encoding: utf-8 
gender: female
fname: Morgan
lname: Saxer 
```

就是这样。我要找的是这个：

```
encoding: utf-8
gender: female
fname: Morgan
lname: Saxer
gender: male 
```

因为那将是下一个人节点的开始。

本质上，我认为我的问题可以归结为这一点。rapidXML 是否有某种“上一级”功能？我意识到 next_sibling() 会将您带到同一级别的下一个节点，但是一旦您深入研究任何一个节点，似乎就没有明显的方法可以返回。有谁知道如何做这样的事情？

**编辑：**
使用建议的解决方案后，我的代码现在如下所示：

```
 void traverse_xml(const std::string& input_xml)
 {
    vector<char> xml_copy(input_xml.begin(), input_xml.end());
    xml_copy.push_back('\0');

    xml_document<> doc;
    doc.parse<parse_declaration_node | parse_no_data_nodes>(&xml_copy[0]);

    xml_node<>* people = doc.first_node("people");
    xml_node<>* person = people->first_node("person");

    while (person != NULL)
    {
      cout << "Gender:" << person->first_attribute("gender")->value() << endl;
      cout << "fname: " << person->first_node("fname")->value() << endl;
      cout << "lname: " << person->first_node("lname")->value() << endl;
      person = person->next_sibling("person");
    }
 } 
```

现在*正确*输出以下内容：

```
gender:female
fname: Morgan
lname: Saxer
gender:male
fname: Tyler
lname: Springer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:29:12.720

您可以使用`cur_node->parent()`来“提升”一个级别，但我个人推荐这样的东西：-

```
 xml_node<>* people = doc.first_node("people");
 xml_node<>* person = people->first_node("person");

 while (person != NULL)
 {
  ... output the person
  person = person->next_sibling("person"); 
 } 
```

# javascript - Django JavaScript 加载异常失败

> ID：13444074
> 
> 赞同：5
> 
> 时间：2012-11-18T20:07:01.947
> 
> 标签：javascript, django, google-chrome, httprequest

我正在 localhost 上开发一个 Django 项目，其中包含一些包含在 base.html 模板中的 JavaScript 文件。我的 JavaScript 包含在页面底部：

```
... other stuff...
<script src="/media/js/jquery.js" type="text/javascript"></script>
<script src="/media/js/jquery-ui-1.9.1.custom.js" type="text/javascript"></script>
<script src="/media/js/bootstrap.js" type="application/javascript"></script>
<link rel="stylesheet" href="/media/css/pepper-grinder/jquery-ui-1.9.1.custom.css" />  
{% block extrajs %}
{% endblock %}
</body> 
```

有时，但令人沮丧的是，并非总是如此，当我加载或刷新页面时，对其中一个 JavaScript 文件的 GET 请求会失败。有时是对 jquery-ui 的请求，有时是对 jQuery 本身的请求，有时是对 bootstrap.js 的请求。如果我将 url 直接粘贴到浏览器中，JavaScript 文件加载得很好，所以我的媒体 url 没有问题。

在 Chrome 中，如果我单击控制台错误并查看网络选项卡，状态为“（失败）”，类型为“待定”。请求标头似乎表明请求实际上并没有失败，只是根本没有通过。

```
Request URL:http://localhost:8111/media/js/jquery-ui-1.9.1.custom.js
Request Headersview source
Accept:*/*
Cache-Control:no-cache
Pragma:no-cache
Referer:http://localhost:8111/reservation/create/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4 
```

最后，在 Firefox 中加载页面*不会*产生错误，但会显示 JavaScript 文件的响应返回 304。

这是我如何提供静态媒体的问题（除了通常的静态媒体设置之外没有什么特别的）？与铬？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T07:39:32.860

尝试禁用 Chrome 扩展程序，看看是否有帮助。我遇到了同样的问题，结果是导致问题的 Adblock 扩展。

更新：根据@jessykate 的说法，完整的解决方案似乎也是将 Chrome 更新到最新版本——至少 23.0.1271.91。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:10:35.173

304 错误意味着文件未被修改，因此您的计算机不需要从服务器下载该文件。所以这根本不是错误——这只是表明您的浏览器效率更高。

如果您最近更改了文件并想查看更改，请尝试清除缓存。

# context-free-grammar - 上下文无关语法 - LR(0) DFA

> ID：13444080
> 
> 赞同：0
> 
> 时间：2012-11-18T20:07:47.250
> 
> 标签：context-free-grammar, finite-automata, dfa, formal-languages

我需要一些帮助来为上下文无关语法构建 LR(0) DFA。

```
S -> A
A -> aaAb | B
B -> aBb | e 
```

这就是我所拥有的：

**状态**

```
{ S -> .A
  A -> .aaAb
  A -> .B
  B -> .aBb
  B -> .e
} 
```

然后我有一个标记`a`为：

**状态**

```
 { A-> a.aAb
      B-> a.Bb
      B-> .aBb
      B -> .e } 
```

从这个状态，一个箭头标记`a`为：

**状态：**

```
 { A ->  aa.Ab
      A -> .aaAb
      A -> .B
      B -> .aBb
      B -> a.Bb
      B -> .e   } 
```

这就是我的问题开始的地方。正如你所看到的，我从这个状态得到两个箭头`B`，因为我有：

```
B -> .B
b -> a.Bb 
```

我做错了什么？

# node.js - Azure 网站是否支持带有 node.js 的 https？

> ID：13444086
> 
> 赞同：1
> 
> 时间：2012-11-18T20:08:03.440
> 
> 标签：node.js, azure, https

Azure Web 角色支持 https 和 node.js，但 Azure 网站是否支持 https？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:11:38.587

截至这篇文章：[链接](http://social.msdn.microsoft.com/Forums/pl-PL/windowsazurewebsitespreview/thread/0218204f-7be3-4586-bfdb-831cde6b7937)，据我所知*，目前仍然无法*为 Azure 网站设置自定义 SSL 证书。

如果这是您要求的一部分，我建议您使用常规 WebRole 并设置要在 RoleConfiguration 中使用的证书。

当协议设置为 https 时，您可以将证书与 EndPoint 配置下的 WebRole 关联，如下所示：

![在此处输入图像描述](../Images/6b38346b1d4d5442d3ba01c3670a5d4c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:41:22.087

是的，默认情况下这应该适用于非自定义域 (foo.azurewebsites.net)。*正如@f0x 提到的，自定义*域的SSL 支持不适用于 Windows Azure 网站。

# jdbc - 使用jdbc将数据导出到xml文档中

> ID：13444088
> 
> 赞同：0
> 
> 时间：2012-11-18T20:08:18.747
> 
> 标签：jdbc, xml-parsing

问这个问题似乎很愚蠢。我对 jdbc 很陌生，并试图按照教程进行操作。本教程试图以“mapping.xml”提供的解析形式存储 XML 数据。下面是示例代码：

```
 public static void main (String args[]) {
    Document mapping = null;
    Document dataDoc = null;
    Document newDoc = null;
      try {

          DocumentBuilderFactory dbfactory = DocumentBuilderFactory.newInstance();
          DocumentBuilder docbuilder = dbfactory.newDocumentBuilder();
          mapping = docbuilder.parse("mapping.xml");
          dataDoc = docbuilder.newDocument();

          //Instantiate the new Document
          newDoc = docbuilder.newDocument();
      } catch (Exception e) {
          System.out.println("Errors with creating document: "+e.getMessage());
       } 
```

但是，在运行代码之后，没有创建新的 XML 文档，也没有捕获到异常。谁能帮我吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:31:51.627

您实际上并没有在此处*存储*任何 XML 文档，您几乎没有在内存中创建 XML 文档的*DOM 表示*。为了实际存储文件，您需要以下代码片段：

```
TransformerFactory factory = TransformerFactory.newInstance();
Transformer transformer = factory.newTransformer();
Result result = new StreamResult(new File("output.xml"));
Source source = new DOMSource(dataDoc);
transformer.transform(source, result); 
```

第三行很关键。

顺便说一句，请某人检查您的代码：

*   方法太长了
*   你没有正确处理异常
*   DOM 可能不是导出大量数据的最佳选择

# ios - ios - 当我尝试进行转场时崩溃

> ID：13444093
> 
> 赞同：0
> 
> 时间：2012-11-18T20:09:30.837
> 
> 标签：ios, ios5, nsurlconnection

![在此处输入图像描述](../Images/8480728ded489768efed6680c6b49b88.png)![在此处输入图像描述](../Images/4986c6d1089c6cb0b7502b87c0958d3d.png)我有一个执行正常的控制器，但在它结束时，当它尝试对另一个屏幕进行 segue 时，我得到了这个崩溃：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Receiver (<UpdateController: 0xa09bb10>) has no segue with identifier 'HomeSegue''
*** First throw call stack:
(0x247a012 0x1f6fe7e 0x15a0492 0xafd6 0xfbc5c8 0xf2402a 0xef1d23 0xef1a34 0xf7e301 0x20e253f 0x20f4014 0x20e52e8 0x20e4fcb 0x95a58b24 0x95a5a6fe)
libc++abi.dylib: terminate called throwing an exception 
```

实际上，我确实做了我试图引用的 segue，但由于某种原因，我仍然遇到了崩溃。

这就是我在远程服务器调用后尝试执行 segue 的方式：

```
[NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
         {
           ...
                             [self performSegueWithIdentifier:@"HomeSegue" sender:self]; 
```

谢谢你的建议！

# javascript - Javascript window.open 在 Chrome 中不一致

> ID：13444094
> 
> 赞同：9
> 
> 时间：2012-11-18T20:09:33.773
> 
> 标签：javascript, google-chrome

我为用户提供了打开单个选项卡或选项卡组的选项。当他们点击一个特殊链接时，我想打开几个相关的标签。打开几个标签的javascript如下：

```
<li>
  <a href="javascript:launchAll()">Or launch them all at once</a>
</li>

<script>
   function launchAll() {
     var win = window.open("http://domain.com/page1");
     win = window.open("http://domain.com/page2");
     win = window.open("http://domain.com/page3");
     win = window.open("http://domain.com/page4");
   }
</script> 
```

前两个作为选项卡打开，后两个尝试作为弹出窗口/在单独的窗口中打开，在我的情况下被阻止。取消阻止弹出窗口不是问题，这个 UI 也不是问题。我的问题是为什么这四个看似相同的调用会产生不同的结果。

更新：这似乎只发生在 Chrome 中。Firefox 和 Safari 都作为新标签打开。有谁知道解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T12:11:00.190

这个限制实际上是由于 Chrome 的安全设置：Chrome 不希望人们能够通过单击打开无限的标签。因此，他们使用的设置是，第一次单击最多两个选项卡，每次额外单击一个选项卡。因此，如果您想解决此问题，则必须执行以下操作：

```
<li>
  <a href="javascript:launchAll()">Or launch them all at once</a>
  <a href="javascript:launch()" id="test"></a>
  <a href="javascript:launch2()" id="test2"></a>
</li>

<script>
   function launchAll() {
     var win = window.open("http://domain.com/page1");
     win = window.open("http://domain.com/page2");
     document.getElementById("test").click();
   }
   function launch(){
     var win = window.open("http://domain.com/page3");
     document.getElementById("test2").click();
   }
   function launch2(){
     var win = window.open("http://domain.com/page4");
   }
</script> 
```

请注意，由于`<a id="test*">`内容为空，它们不会显示在您的文档中，因此您的布局保持不变。

另外，请注意，`click()`Firefox 中不存在该方法，因此您必须使用类似[here](http://www.webdeveloper.com/forum/showthread.php?161317-Trying-to-get-javascript-to-click-a-link-when-function-is-called&s=86a7aab5b6320355332ef56692defe5a&p=804855#post804855)的方法。

# java - 从模拟器读取短信

> ID：13444097
> 
> 赞同：2
> 
> 时间：2012-11-18T20:09:42.733
> 
> 标签：java, android, eclipse, android-emulator

无法从模拟器读取短信。我需要能够将短信的“正文”转换为字符串以显示在 TextView 或 EditView 中。我不是在尝试使用“onRecieve”短信，而是阅读短信。我可以通过 DDMS Devices Emulator Control(Windows7) 或使用 2 个模拟器发送到模拟器，即从端口 5554 发送到端口 5556。消息显示在模拟器中，但是当我尝试读取短信时，cursor.getCount( ) 仅返回 O，即使“正文”（即短信文本）显示在模拟器上。我认为 cursor.getCount() 必须等于 1 或更大才能读取短信，但它仅 = 0。我该怎么做才能让模拟器显示 cursor.getCount() > 0，并让我实际上阅读短信正文？即如何使以下代码工作。使用模拟器时，计数说它等于0，

```
if(count>0){
   if(cursor.moveToFirst()){
    body = cursor.getString(cursor.getColumnIndexOrThrow("body")).toString();
    txtLastSMS.setText(body);
   }
 } 
```

以下是相关代码：

```
 Uri CONTENT_URI = Uri.parse("content://sms/sent");    
    Cursor cursor = getContentResolver().query(CONTENT_URI, null, null, null,     null);                                   
    String body = null;
    if (cursor != null)
       try
       {
          int count = cursor.getCount();
          if(count>0){
             if(cursor.moveToFirst()){
             body = cursor.getString(cursor.getColumnIndexOrThrow("body")).toString();
             txtLastSMS.setText(body);
          }
        }   
      }
      finally{ cursor.close();} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:32:31.590

尝试使用`startManagingCursor`：

```
Cursor cursor = getContentResolver().query(CONTENT_URI, null, null, null,     null);
startManagingCursor(cursor); 
```

# opencv - 直方图比较为“穷人的神经网络”

> ID：13444100
> 
> 赞同：1
> 
> 时间：2012-11-18T20:10:18.723
> 
> 标签：opencv, pattern-matching

我正在使用 OpenCV 学习模式识别并想实现一个分类器。

据我了解，通常的方法是对所有输入值实施神经网络评估并输出决策。现在，我担心学习神经网络会超出我的智力，我正在寻找一种更简单的方法。

我的问题是，是否可以创建输入值的直方图，其中 X 是要素类，Y 是它的值，并使用简单的直方图比较做出决定？（我不是说像颜色直方图。）

有人已经应用了这种方法吗？如果是这样，结果的准确性如何？

谢谢你的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T23:01:02.547

您提出的确实与单层神经网络（[单层感知器](http://en.wikipedia.org/wiki/Perceptron)/[线性分类器](http://en.wikipedia.org/wiki/Linear_classifier)）非常相似。假设您的图像中有 N 个特征。然后，您的神经网络将有 N 个输入，其中输入的值可以是特征出现的次数或特征的值/强度。

如果您只有两个类 A 和 B，您将有一个输出节点。每个输入都通过权重连接到输出。然后输出是所有加权输出的总和。如果输出高于某个阈值，您的数据可以分类为 A 类，否则为 B 类。为了正确分类您的数据，您必须修改网络中的权重（这称为“训练”）。

如果你想要更多的类，你可以添加更多的输出节点。但是，您将遇到某些数据可以分类为多个类别的情况。此外，您的网络将始终是线性函数逼近器。通过在两者之间添加一层，您的网络将变得更加强大！

基本的神经网络很容易。我建议您花更多时间在 Wikipedia 上阅读有关它的信息。

# ruby-on-rails - 如何将 Rails 应用程序部署到 VPS（或专用服务器）？

> ID：13444105
> 
> 赞同：7
> 
> 时间：2012-11-18T20:10:44.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, vps

如何将 Rails 应用程序部署到 VPS（虚拟专用服务器）或专用服务器？有一个易于遵循的指南会很好。

我知道自动化流程的脚本，但我认为最好控制一切，以便更好地理解流程。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-18T20:10:44.287

我已经使用以下技术成功地将重型 Rails 应用程序部署到 Linode 或 Digital Ocean：

*   **用于 Ruby 安装的**rbenv****
***   **应用服务器的**nginx + 乘客*******   **用于数据库服务器的**PostgreSQL*******   **Capistrano**自动部署（首先在您的开发机器上使用您的服务器 IP 和设置进行配置，我不会在这里介绍）******

 ****这些是对我有用的步骤：

# 设置虚拟机

**创建一个新的虚拟机**

按照您的主机（Linode 或 Digital Ocean）的设置说明创建节点并进行设置。

**设置日期**

*   dpkg-重新配置 tzdata

**更新包**

*   apt-get 更新
*   apt-get 升级

# 安全

**创建用户**

*   添加用户部署
*   usermod -a -G sudo 部署
*   登出

**设置 SSH 密钥认证**

在本地：

*   ssh-keygen
*   复制公钥：
    *   scp ~/.ssh/id_rsa.pub deploy@example.com:~

在服务器上：

*   ssh deploy@example.com
*   启用别名以列出文件：
    *   vim ~/.bashrc
    *   取消注释所有别名
*   mkdir .ssh
*   mv id_rsa.pub .ssh/authorized_keys
*   chown -R 部署：部署 .ssh
*   chmod 700 .ssh
*   chmod 600 .ssh/authorized_keys
*   注销（测试新的身份验证）

**设置 SSH**

*   须藤 vim /etc/ssh/sshd_config
*   将 PermitRootLogin 切换为 no
*   sudo 服务 ssh 重启

**设置防火墙**

*   sudo iptables -L （它应该显示一个空表）
*   须藤 vim /etc/iptables.firewall.rules
*   粘贴此：[https ://gist.github.com/davidmles/89fc88e48e17cf8252bfca374e46355f#file-iptables-firewall-rules](https://gist.github.com/davidmles/89fc88e48e17cf8252bfca374e46355f#file-iptables-firewall-rules)
*   sudo iptables-restore < /etc/iptables.firewall.rules
*   sudo iptables -L （现在应该显示配置的规则）
*   须藤 vim /etc/network/if-pre-up.d/firewall
*   粘贴：[https ://gist.github.com/davidmles/89fc88e48e17cf8252bfca374e46355f#file-firewall](https://gist.github.com/davidmles/89fc88e48e17cf8252bfca374e46355f#file-firewall)
*   sudo chmod +x /etc/network/if-pre-up.d/firewall

**设置fail2ban**

如果您有足够的可用内存，请进行设置，因为它往往会吃掉它。

*   sudo apt-get install -y fail2ban

# 设置红宝石

**安装 Git**

*   sudo apt-get install -y git

**安装 rbenv**

*   git 克隆[https://github.com/sstephenson/rbenv.git](https://github.com/sstephenson/rbenv.git) ~/.rbenv
*   echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bashrc
*   echo 'eval "$(rbenv init -)"' >> ~/.bashrc
*   源〜/ .bashrc
*   git clone [https://github.com/sstephenson/ruby-build.git](https://github.com/sstephenson/ruby-build.git) ~/.rbenv/plugins/ruby-build

**安装 Ruby**

*   sudo apt-get install -y curl gnupg build-essential
*   rbenv install -l（查找最新版本）
*   rbenv install 2.3.3（或目前可用的最新版本）
*   rbenv 全球 2.3.3
*   rbenv 重新散列
*   vim .gemrc
    *   粘贴：gem: --no-document

# 设置服务器

**安装 nginx + 乘客**

*   按照文档安装：
    *   [https://www.phusionpassenger.com/library/install/nginx/install/oss/jessie/](https://www.phusionpassenger.com/library/install/nginx/install/oss/jessie/)

**安装 PostgreSQL**

*   按照文档安装：
    *   [https://wiki.postgresql.org/wiki/Apt#PostgreSQL_packages_for_Debian_and_Ubuntu](https://wiki.postgresql.org/wiki/Apt#PostgreSQL_packages_for_Debian_and_Ubuntu)

# 设置库

**安装 node.js**

需要预编译资产。

*   sudo apt-get install -y nodejs

**安装捆绑器**

*   获取安装捆绑器
*   rbenv 重新散列

# 设置应用程序

**在 PostgreSQL 中创建用户**

*   createuser 用户名--pwprompt
*   createdb -Ousername -Eutf8 db_name
*   测试它：
    *   psql db_name --user 用户名 --password

**部署代码** * 在服务器上： * sudo mkdir -p /srv/yoursite.com * sudo chown deploy:deploy /srv/yoursite.com * 在你的开发机器上： * bundle exec cap production deploy:check （它会抛出一个错误，因为它没有找到数据库） * 在服务器上：* cd /srv/yoursite.com/shared/config * vim database.yml（粘贴您的数据库配置）* vim secrets.yml（粘贴您的秘密配置）*在您的开发机器上：* bundle exec cap production deploy * bundle exec cap productionwhen:update_crontab

**配置 logrotate**

*   遵循本指南：* [https://gorails.com/guides/rotating-rails-production-logs-with-logrotate](https://gorails.com/guides/rotating-rails-production-logs-with-logrotate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T02:14:23.847

我之前使用 Capistrano 将我的 Rails 应用程序部署到我的生产服务器（它是一个集群），但我发现 Capistrano 有点复杂，有时甚至会成为麻烦制造者......所以我用 bash shell 脚本编写了我的部署脚本。

我已经把它放在 github 上，并附有一个简短的指南：[deploy_rails](https://github.com/tangramor/deploy_rails)****

# java - Spring Security 登录问题 -

> ID：13444110
> 
> 赞同：0
> 
> 时间：2012-11-18T20:11:26.733
> 
> 标签：java, spring, spring-security

我对 Spring/Spring Security 相当陌生，我已经尽我所能解决这个问题，但我似乎一次又一次地没有把它弄好。问题如下：登录无法正常工作 - 即使使用正确的凭据，它也会不断提示它们似乎不正确。我正在使用 Spring Security 和 Spring mvc + Oracle (hibernate + jpa)。非常感谢您的帮助，非常感谢您！

这是我的配置文件。（部分）

```
1\. security.xml

<http auto-config="true">
    <intercept-url pattern="/welcome*" access="ROLE_USER" />
    <form-login login-page="/login" default-target-url="/welcome"
        authentication-failure-url="/loginfailed" />
    <logout logout-success-url="/logout" />
</http>

<!-- <password-encoder hash="md5" /> -->

<authentication-manager>
    <authentication-provider>
        <jdbc-user-service data-source-ref="dataSource"
            users-by-username-query="
          SELECT username, password, 'TRUE'
          FROM users WHERE username=?"

            authorities-by-username-query="
          SELECT u.username, ur.authority FROM users u, user_roles ur 
          WHERE u.user_id = ur.user_id AND u.username=?  " />
    </authentication-provider>
</authentication-manager>

2\. web.xml

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

3\. data.xml

<!-- Transaction managing using the @Transactional annotation -->
<tx:annotation-driven transaction-manager="transactionManager" />

<!-- Transaction Manager -->
<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/pages/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>

<bean id="messageSource"
    class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basenames">
        <list>
            <value>msgs</value>
        </list>
    </property>
    <property name="defaultEncoding" value="UTF-8" />
</bean>

<!-- ////////////////////////////////////////////////////////////////////////// -->

    <bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
    p:location="/WEB-INF/jdbc.properties"/>

<!-- ////////////////////////////////////////////////////////////////////////// "-->

<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    destroy-method="close">
    <property name="driverClass" value="${jdbc.driverClassName}" />
    <property name="jdbcUrl" value="${jdbc.databaseurl}" />
    <property name="user" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />

</bean>

<!-- ////////////////////////////////////////////////////////////////////////// -->

<!-- Hibernate SessionFactory configuration -->
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="com.tsystems.javaschool.kts.domain" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.dialect">${jdbc.dialect}</prop>
            <prop key="hibernate.connection.charSet">UTF-8</prop>
        </props>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:53:54.263

现在很难看到错误，但我可以为您提供一些适合我的示例：

web.xml 的一部分：

```
<filter>
<filter-name>springSecurityFilterChain</filter-name>
<filter-class>
org.springframework.web.filter.DelegatingFilterProxy
</filter-class>
</filter>
<filter-mapping>
<filter-name>springSecurityFilterChain</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping> 
```

…………

您是否在您的 web.xml（web.xml 的另一部分）中包含 XML 文件 (security.xml)？

```
<listener>
    <listener-class>
    org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/security-config.xml</param-value>
  </context-param> 
```

security-config.xml 的一部分（DATA 是 shema，ROLE 和 USER 是表）：

```
<http auto-config='true'>
        <intercept-url pattern="/login**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <intercept-url pattern="/admin/**" access="ROLE_ADMIN" />
        <intercept-url pattern="/**" access="ROLE_GUEST, ROLE_ADMIN" />
        <form-login login-page="/login.jsp" authentication-failure-url="/login.jsp?login_error=t"/>
        <logout logout-success-url="/login.jsp?logout=t"/>
    </http>
    <authentication-manager>
        <authentication-provider>
        <password-encoder hash="md5"/>
            <jdbc-user-service data-source-ref="ds" authorities-by-username-query="select USERNAME as username, ROLE as authority from DATA.ROLE where USERNAME=?"
            users-by-username-query="select USERNAME as username, PASSWORD as password, 'true' AS enabled from DATA.USER where USERNAME=?"/>
        </authentication-provider>
    </authentication-manager> 
```

以及 JSP 页面的一部分（login.jsp）：

```
<c:when test="${param.logout == 't'}">

// show when I logout
.......

</c:when>
<c:when test="${param.login_error == 't'}">

// show when username or password is not correct
.......

</c:when>
<c:otherwise>
.....
<form method="POST" action="<%= response.encodeURL(request.getContextPath() + "/j_spring_security_check") %>" >
......
<input class="input" type="text" name="j_username" />
......
<input class="input" type="password" name="j_password" />
.....
<input type="submit" value="Login" name="Login" />
.....
</c:otherwise> 
```

如果还是不行，请写在这里。

# java - OpenGL旋转和物体移动

> ID：13444111
> 
> 赞同：0
> 
> 时间：2012-11-18T20:11:38.290
> 
> 标签：java, opengl, jogl

我正在尝试创建一个非常基本的行星运动（太阳，地球月亮表示为立方体）。

至于现在我设法围绕另一个立方体移动一个立方体，但我有以下问题......将另一个立方体（例如月亮）移动到一个已经移动的立方体周围的最佳方法是什么？

我使用简单的操作让它们运动起来。在 x 轴上移动：

`d * Math.sin(x * Math.PI / 180.0)`

其中 d 是距中心或投影的距离（不知道我是否正确使用了这个术语）。我想过通过计算已经旋转的立方体的距离并添加一些参数来放置“卫星”，但不知道如何使该行星成为旋转中心的“参考”......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:23:01.273

您可以通过创建转换组合来做到这一点。假设你想围绕一颗中心恒星运行一颗行星。首先，行星被移入轨道，平移，例如 x 方向：

```
orbit_distance = translation_orbit · planet_center 
```

然后围绕中心旋转。

```
orbit_position = rotation_orbit · orbit_distance 
```

或者，您可以将其写在一行中

```
orbit_position = rotation_orbit · translation_orbit · planet_center 
```

重要的是，操作顺序很重要，先旋转后平移与先平移后旋转不同。或者，用数学术语来说，几何变换不是可交换的。

在 3 维空间中，所有线性变换都可以通过 4 维齐次坐标集中的线性方程来描述。即你可以使用 4×4 矩阵来表达各种线性几何变换。

围绕围绕太阳运行的行星的自转月亮：

```
R_orbit_planet · T_orbit_planet · R_orbit_moon · T_orbit_moon · R_rotation_moon 
```

# android - 适用于 Android 的 REST API 客户端库

> ID：13444113
> 
> 赞同：48
> 
> 时间：2012-11-18T20:11:39.570
> 
> 标签：android, rest, asynchronous, android-library, intentservice

我们正在构建一个基于位置的消息应用程序，它使用 Parse.com 作为后端（Parse.com 类似于 Urban Airship/PubNub 等），我们现在希望切换到我们自己的后端以获得更好的控制。为此，我们构建了一个基于 node.js 的后端，其功能通过 REST API 公开

为了使用这个 API，我们想要构建一个 Android 库（类似于[Parse.com 的 Android SDK](https://parseplatform.github.io/docs/android/guide/)），它抽象了所有 HTTP 请求/响应或 REST API 调用，并为 getUsers()、sendMessage() 等各种操作提供直接函数

**在 Android 中实现 REST API 客户端的方法：**

*   使用[IntentService + ResultReceiver](http://neilgoodman.net/2012/01/01/modern-techniques-for-implementing-rest-clients-on-android-4-0-and-below-part-2/)
*   服务
*   异步任务
*   使用[加载器](http://neilgoodman.net/2011/12/26/modern-techniques-for-implementing-rest-clients-on-android-4-0-and-below-part-1/)

现在，考虑到我们想要构建一个 android 库，并且在用户与应用程序交互时可能会同时调用 REST API，哪种方法最好继续？我也愿意接受其他建议/建议。

**更新**：我们首先使用 IntentService + ResultReceiver 构建了我们自己的库，效果很好。但我们后来偶然发现了[Android Async Http](http://loopj.com/android-async-http/)。用它。这很棒！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-18T20:15:12.027

我见过的基于 Google IO Pro Tips 2010 的最佳实现是 RoboSpice 库，它是基于 REST 的，并且非常巧妙地与 Activity 生命周期配合使用，不会泄漏内存。

图书馆的快速[信息图在](https://raw.github.com/octo-online/robospice/master/gfx/RoboSpice-InfoGraphics.png)[这里](https://github.com/octo-online/robospice)

*   加载器是为数据库设计的，而不是 REST，它们在活动重置时重置，这意味着您丢失了数据。
*   异步任务，只是没有。
*   Intent Service + Result 接收器基本上是 RoboSpice 的工作方式，所以如果您正在构建自己的库，我会采用这种方法！
*   Service 也不错，类似于 IntentService 方法，但是 IntentService 在这种情况下工作得更好一些。

该`Service`方法可能更好，[看看](https://github.com/octo-online/robospice/blob/release/robospice-core-parent/robospice/src/main/java/com/octo/android/robospice/SpiceService.java)他们使用的 robospice 服务，当它用完时`ExecutorService`终止，这比 Android 特定的更多 Java 并发。需要注意的主要事情是，服务在处理请求时运行，然后在没有请求的情况下终止其自身。`Service``Requests`

使用`ExecutorService`线程池或任何类型的线程池的优点是您可以定义一次可以运行多少个请求。除非你有一个非常快的连接 2-4 是我所建议的最多的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-08T21:37:39.570

我使用了[Retrofit](http://square.github.io/retrofit/)，它是一个非常好的库，它为管理端点和解析数据/集合/对象提供了一个简单的结构。

文档足够完整，可以轻松编写代码。

CQFD > 去吧

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-09T10:14:13.107

**这门课可能会有所帮助：-**

```
/*Copyright 2014 Bhavit Singh Sengar
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.*/

package com.infotech.zeus.util;

import java.io.IOException;
import java.io.UnsupportedEncodingException;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.HTTP;
import org.apache.http.util.EntityUtils;
import org.json.JSONException;
import org.json.JSONObject;
import android.widget.Toast;

public class RestClient {

        JSONObject data = new JSONObject();
        String url;
        String headerName;
        String headerValue;

        public RestClient(String s){

            url = s;
        }

        public void addHeader(String name, String value){

            headerName = name;
            headerValue = value;

        }

        public void addParam(String key, String value){

            try {
                data.put(key, value);
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }

        public String executePost(){  // If you want to use post method to hit server

            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setHeader(headerName, headerValue);
            HttpResponse response = null;
            String result = null;
            try {
                StringEntity entity = new StringEntity(data.toString(), HTTP.UTF_8);
                httpPost.setEntity(entity);
                response = httpClient.execute(httpPost);
                HttpEntity entity1 = response.getEntity();
                result = EntityUtils.toString(entity1);
                return result;
                //Toast.makeText(MainPage.this, result, Toast.LENGTH_LONG).show();
            } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return result;

        }

        public String executeGet(){ //If you want to use get method to hit server

            HttpClient httpClient = new DefaultHttpClient();
            HttpGet httpget = new HttpGet(url);
            String result = null;
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            try {
                result = httpClient.execute(httpget, responseHandler);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return result;
        }
} 
```

**使用此类的简单示例：**

```
RestClient client = new RestClient("http://www.example.com/demo.php");  //Write your url here
        client.addParam("Name", "Bhavit"); //Here I am adding key-value parameters
        client.addParam("Age", "23");

        client.addHeader("content-type", "application/json"); // Here I am specifying that the key-value pairs are sent in the JSON format

        try {
            String response = client.executePost(); // In case your server sends any response back, it will be saved in this response string.

        } catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-13T20:05:09.553

您也可以使用[RESTDroid](https://github.com/PCreations/RESTDroid)。它与 RoboSpice 非常相似，但使用起来更简单（尽管功能也较弱。）

如果您为 RESTDroid 创建 Parse.com 模块，请不要犹豫，将其添加到 GitHub 上！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T03:06:16.023

如果我可以再补充一点，我最近开始编写一个不错的库来实现引擎（在 iOS 中被 MKNetworkKit 使用）和命令来与 Android 的 REST API 进行通信。可能对任何尝试使用 REST API 的人有所帮助。[https://github.com/m2d2/MDBaseAndroidLibraries](https://github.com/m2d2/MDBaseAndroidLibraries)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-06T08:56:13.883

你也可以尝试使用带有**rest-spring**插件的**[Android Annotations来自动完成这些任务。](https://github.com/excilys/androidannotations)**

 ****他们在spring 框架上为 android**使用了一个包装器，并提供了一种处理**rest apis**的非常好的方法。

***例子：***

**将 AsyncTask -> doInBackground() 替换为 @Background 注释：**

```
@Background
protected void backgroundWork(){
    // do something in background
} 
```

**用 @UiThread 替换 runOnUiThread、onPostExecute()**

```
@UiThread
protected void uiWork(){
    // do something on UI Thread
} 
```

**对于 Rest API**

*创建休息客户端：*

```
@Rest(rootUrl = "http://company.com/ajax/services",
      converters = { MappingJackson2HttpMessageConverter.class })
public interface MyRestClient {

    @Get("/events")
    EventList getEvents();
} 
```

*使用休息客户端：*

```
@RestClient
MyRestClient myRestClient;

public void showAllEvents(){
    EventList list = myRestClient.getEvents();
    // do something with this list

} 
```**

# r - BMA 包的 bic.glm 中的数据错误，但不是 glm

> ID：13444117
> 
> 赞同：2
> 
> 时间：2012-11-18T20:12:11.243
> 
> 标签：r, glm

我正在从一组交互系数估计泊松模型，BMA 包的 bic.glm 有助于导航模型空间。我已经使用它多年了，但是当我昨晚将 R 从 2.10.x 更新到 2.14.2 时，它停止了工作。这是错误：首先，一个有效的调用：

```
> glm(formula(Y~.), data=XY5, family=poisson)

Call:  glm(formula = formula(Y ~ .), family = poisson, data = XY5)

Coefficients:
<results, etc> 
```

现在 bic.glm 失败：

```
> bic.glm(formula(Y~.), data=XY5, glm.family=poisson, model=TRUE)
Error in terms.formula(formula, data = data) : 
  '.' in formula and no 'data' argument 
```

同样，这个确切的代码在具有五个系统的早期版本的 R 中工作。当我使用 4 个交互系统而不是 5 个运行 bic.glm（即，删除 x5 并折叠交互）时，bic.glm 运行良好。我将在下面包括五个系统数据。提前致谢。

```
> XY5
   x1 x2 x3 x4 x5 x12 x13 x14 x15 x23 x24 x25 x34 x35 x45 x123 x124 x125 x134 x135 x145
2   0  0  0  0  1   0   0   0   0   0   0   0   0   0   0    0    0    0    0    0    0
3   0  0  0  1  0   0   0   0   0   0   0   0   0   0   0    0    0    0    0    0    0
4   0  0  0  1  1   0   0   0   0   0   0   0   0   0   1    0    0    0    0    0    0
5   0  0  1  0  0   0   0   0   0   0   0   0   0   0   0    0    0    0    0    0    0
6   0  0  1  0  1   0   0   0   0   0   0   0   0   1   0    0    0    0    0    0    0
7   0  0  1  1  0   0   0   0   0   0   0   0   1   0   0    0    0    0    0    0    0
8   0  0  1  1  1   0   0   0   0   0   0   0   1   1   1    0    0    0    0    0    0
9   0  1  0  0  0   0   0   0   0   0   0   0   0   0   0    0    0    0    0    0    0
10  0  1  0  0  1   0   0   0   0   0   0   1   0   0   0    0    0    0    0    0    0
11  0  1  0  1  0   0   0   0   0   0   1   0   0   0   0    0    0    0    0    0    0
12  0  1  0  1  1   0   0   0   0   0   1   1   0   0   1    0    0    0    0    0    0
13  0  1  1  0  0   0   0   0   0   1   0   0   0   0   0    0    0    0    0    0    0
14  0  1  1  0  1   0   0   0   0   1   0   1   0   1   0    0    0    0    0    0    0
15  0  1  1  1  0   0   0   0   0   1   1   0   1   0   0    0    0    0    0    0    0
16  0  1  1  1  1   0   0   0   0   1   1   1   1   1   1    0    0    0    0    0    0
17  1  0  0  0  0   0   0   0   0   0   0   0   0   0   0    0    0    0    0    0    0
18  1  0  0  0  1   0   0   0   1   0   0   0   0   0   0    0    0    0    0    0    0
19  1  0  0  1  0   0   0   1   0   0   0   0   0   0   0    0    0    0    0    0    0
20  1  0  0  1  1   0   0   1   1   0   0   0   0   0   1    0    0    0    0    0    1
21  1  0  1  0  0   0   1   0   0   0   0   0   0   0   0    0    0    0    0    0    0
22  1  0  1  0  1   0   1   0   1   0   0   0   0   1   0    0    0    0    0    1    0
23  1  0  1  1  0   0   1   1   0   0   0   0   1   0   0    0    0    0    1    0    0
24  1  0  1  1  1   0   1   1   1   0   0   0   1   1   1    0    0    0    1    1    1
25  1  1  0  0  0   1   0   0   0   0   0   0   0   0   0    0    0    0    0    0    0
26  1  1  0  0  1   1   0   0   1   0   0   1   0   0   0    0    0    1    0    0    0
27  1  1  0  1  0   1   0   1   0   0   1   0   0   0   0    0    1    0    0    0    0
28  1  1  0  1  1   1   0   1   1   0   1   1   0   0   1    0    1    1    0    0    1
29  1  1  1  0  0   1   1   0   0   1   0   0   0   0   0    1    0    0    0    0    0
30  1  1  1  0  1   1   1   0   1   1   0   1   0   1   0    1    0    1    0    1    0
31  1  1  1  1  0   1   1   1   0   1   1   0   1   0   0    1    1    0    1    0    0
32  1  1  1  1  1   1   1   1   1   1   1   1   1   1   1    1    1    1    1    1    1
   x234 x235 x245 x345 x1234 x1235 x1245 x1345 x2345    Y
2     0    0    0    0     0     0     0     0     0 1276
3     0    0    0    0     0     0     0     0     0  714
4     0    0    0    0     0     0     0     0     0  481
5     0    0    0    0     0     0     0     0     0  628
6     0    0    0    0     0     0     0     0     0  365
7     0    0    0    0     0     0     0     0     0  836
8     0    0    0    1     0     0     0     0     0 1343
9     0    0    0    0     0     0     0     0     0 1348
10    0    0    0    0     0     0     0     0     0  161
11    0    0    0    0     0     0     0     0     0  266
12    0    0    1    0     0     0     0     0     0  239
13    0    0    0    0     0     0     0     0     0  144
14    0    1    0    0     0     0     0     0     0  135
15    1    0    0    0     0     0     0     0     0  469
16    1    1    1    1     0     0     0     0     1 1356
17    0    0    0    0     0     0     0     0     0  594
18    0    0    0    0     0     0     0     0     0  431
19    0    0    0    0     0     0     0     0     0   18
20    0    0    0    0     0     0     0     0     0   83
21    0    0    0    0     0     0     0     0     0   22
22    0    0    0    0     0     0     0     0     0   16
23    0    0    0    0     0     0     0     0     0   12
24    0    0    0    1     0     0     0     1     0   29
25    0    0    0    0     0     0     0     0     0   16
26    0    0    0    0     0     0     0     0     0    3
27    0    0    0    0     0     0     0     0     0    2
28    0    0    1    0     0     0     1     0     0    3
29    0    0    0    0     0     0     0     0     0    6
30    0    1    0    0     0     1     0     0     0    0
31    1    0    0    0     1     0     0     0     0   11
32    1    1    1    1     1     1     1     1     1    9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:24:55.710

我代表 BMA 包装团队回答，我非常感谢他们。他们是这样说的：

> 我认为由于数据的离散性导致这个问题浮出水面，可能会出现一些意料之外的退化。我将相应地更新包，但您应该能够通过将下面指示的行添加到 bic.glm.data.frame（和 bic.glm.matrix）来修复它

```
while (length(glm.out$coefficients) > maxCol) {
           any.dropped <- TRUE
           dropglm <- drop1(glm.out, test = "Chisq")
           dropped <- which.max(dropglm$"Pr(Chi)"[-1]) + 1
#
           if (length(dropped) == 0) break  #### add to prevent bug
#
           x.df <- x.df[, -(dropped - 1)]
           designx.levels <- designx.levels[-dropped]
           designx <- designx[-dropped] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-24T03:39:33.853

我收到了同样的错误信息。考虑到这条消息是 9 年前发布的，但我收到了关于积压的错误消息，我会就我发现和解决的问题做出一些贡献。

它可能是样本量。尽管 BMA 已将自己声明为包含小样本量和许多变量的数据包，但仍有一个下限。尝试增加样本量并执行运行将是理想的。

下一个可能的问题是一个或多个变量的共线性。包装以如此智能的方式设计了自己，以至于它可以捕捉到小的共线性迹象。一个典型的例子是变量 Z 是从变量 A 的一部分导出的；假设变量 Z 是由分析师生成的。虽然它不会导致 glm 中的问题（二项式或泊松或伽马），但它确实会导致 bic.glm 中的收敛问题。分析师将不得不忽略特定变量。

如果主要问题主要是由于后者，我怀疑 BMA 开发人员会修复它。

# ruby-on-rails - RVM 上的 oracle_enhanced_adapter

> ID：13444118
> 
> 赞同：0
> 
> 时间：2012-11-18T20:12:20.967
> 
> 标签：ruby-on-rails, ruby, oracle

RVM 版本：rvm 1.16.17（稳定）
Rails 版本：3.2.9
ruby​​-oci8 版本：2.1.3
activerecord-oracle_enhanced-adapter：1.4.1

它们是按该顺序安装的。当我尝试使用以下方法搭建对象时：

```
 rails generate scaffold Product title:string description:text\
 image_url:string price:decimal 
```

我得到：

```
invoke  active_record
/home/dlsa/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require': Please install the oracle_enhanced adapter: `gem install activerecord-oracle_enhanced-adapter` (cannot load such file -- active_record/connection_adapters/oracle_enhanced_adapter) (LoadError)
    from /home/dlsa/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
    from /home/dlsa/.rvm/gems/ruby-1.9.3-p286/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency' 
```

...而且它一直在继续。

你建议我怎么做。我是一个完整的 ruby​​/rails 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:05:55.460

你看看[这个](https://github.com/rsim/oracle-enhanced/blob/master/README.md#installation)。

如：

*   `Gemfile`应包含`gem 'activerecord-oracle_enhanced-adapter', '~> 1.4.0'`条目
*   `bundle install`

希望这可以帮助。

# php - 如何让用户选择定义自己的缩略图？

> ID：13444119
> 
> 赞同：1
> 
> 时间：2012-11-18T20:12:25.823
> 
> 标签：php, jquery, image-processing

这是我目前的情况：我能够显示上传的图片并让用户绘制具有预定义纵横比的裁剪区域。并且，在提交时它的角坐标被发送到我的服务器应用程序，该应用程序裁剪并保存图像。

但是上传的图像尺寸是可变的，我将其限制为`max-width`. 问题是 JCrop（我的 jquery 插件，它绘制裁剪区域并将其坐标设置为我的隐藏输入）设置裁剪区域相对于客户端图像的坐标。如果图像高度小于我的最大高度，则可以，但是，如果不是，则图像会被错误地裁剪。

解决这个问题；我打算得到`img.clientWidth;`and `img.clientHeight;`，也将它们传递给我的服务器端。然后通过外推将裁剪坐标转换为真实坐标。

这种方法好吗？有没有更好或更漂亮的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:48:19.373

**解决了**

Jcrop 有一个设置真实尺寸的选项，因此如果定义了真实尺寸，它会执行所有数学运算。

# java - SendRedirect 在 JSP Scriptlet 中不起作用

> ID：13444121
> 
> 赞同：1
> 
> 时间：2012-11-18T20:12:33.713
> 
> 标签：java, javascript, jsp, url, redirect

我有一个 main.jsp。

`Onclick`在 main.jsp 中的一个按钮上，我正在另一个窗口中启动我的 JSP scriptlet。在 JSP Scriptlet 中，我正在处理 URL 参数并构造 URL。URL 构建工作正常；我在日志文件中打印它并手动打开构建的链接。

我想将此 JSP scriptlet 页面重定向到构造的新 URL（不同的域），以便发送重定向。

在构建 URL 之后，我将这一行放在最后。

```
response.sendRedirect(url); 
```

当我尝试`sendRedirect`什么都没有发生时。谁能帮我找出问题所在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:18:21.490

要在此脚本中调用 JavaScript，请使用

```
url = urlBuffer.toString(); 
System.out.println("url from JS server="+url);    
%>
<script type="text/javascript">
window.location=<%=url%>
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:28:32.550

Onclick - 是回发还是回调事件？你用ajax吗？当您使用 ajax 请求时，您可以将代码添加到成功事件：`document.location='some url';`回发时 -`document.location='<%= url%>';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T22:52:16.493

window.location= .. 对我不起作用。

我这样做了，它奏效了

```
 <script> 
window.location.href = "<%= url %>";
 </script> 
```

# java - 重新初始化 Executor 的最佳实践

> ID：13444122
> 
> 赞同：0
> 
> 时间：2012-11-18T20:12:45.323
> 
> 标签：java, executorservice, executor, executors, threadpoolexecutor

我有一个`Swing`应用程序，它使用 a`ThreadPoolExecutor`来执行多个任务。在某一时刻，我想重新初始化所有内容。我正在使用`executor.purge();`和 `executor.getQueue().clear()`；这够了吗？有没有更好的方法/做法来执行此操作？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:27:59.527

恕我直言，您应该只[`shutdownNow()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html#shutdownNow%28%29)创建一个池并创建一个新池。如果不经常这样做，它会简单得多。它还可以安全地处理已经运行的作业。此外，语义[`purge()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html#purge%28%29)有点模糊。

# android - Google 是否坚持只使用 Wallet，还是我的应用程序可以同时提供 Wallet 和 PayPal？

> ID：13444126
> 
> 赞同：0
> 
> 时间：2012-11-18T20:13:07.110
> 
> 标签：android, paypal, android-pay

我在 Google Play 上有使用应用内结算的应用。谷歌希望你使用他们的电子钱包。我看过一些文章说：“Google 强迫 Android 开发者使用 Google Wallet 进行应用内支付”

好的，我将使用 Google 电子钱包。但是，他们没有说，我无法通过搜索找到的是，谷歌是否坚持**只**使用 Wallet ，或者我是否可以同时提供 Wallet 和 PayPal。其他文章表明人们出于某种原因不喜欢使用 Wallet。

有人可以提供见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:17:34.923

在我看来，您只能使用 Market 的支付处理器（Google 钱包）。我不是律师，但这个建议值得你为此付出的一切。

有关一些详细信息，请参阅[此线程](https://www.x.com/developers/paypal/forums/mobile/paypal-app-model-android-legal-android-market#answer-186985)。

人们（包括我自己）不喜欢谷歌的应用内购买系统，因为他们让它实施起来异常困难和复杂。

# javascript - Youtube API onYoutubePlayerReady 和 addEventListener 未被触发

> ID：13444128
> 
> 赞同：1
> 
> 时间：2012-11-18T20:13:23.747
> 
> 标签：javascript, youtube, youtube-api, addeventlistener, youtube-javascript-api

在我的网站上加载 youtube 视频时，不会触发 Youtube API 的 onYoutubePlayerReady() 和 addEventListener("onstatechange"...) 函数

->此代码托管在位于[http://www.vapetropolis.ca/handheld-portable-vaporizers的 Web 服务器上](http://www.vapetropolis.ca/handheld-portable-vaporizers)

- >当视频加载时应该弹出一个警报 - 我尝试通过 onYoutubePlayerReady 和 addEventListener("onStateChange"...) 实现警报但没有成功。

很感谢任何形式的帮助

这是我到目前为止所拥有的 - 所有这些代码都在一个 .phtml 文件中：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script> 
```

正在尝试提醒 onYoutubePlayerReady...

```
 <script type="text/javascript">
       function onYouTubePlayerReady(playerId) {
   alert("READY");
}

  </script> 
```

有多个视频：在 foreach 循环中创建 div。为了便于阅读，删除了大部分代码

```
<div id="videoDiv-<?php echo $_product->getName();?>"></div> 
```

将产品/视频 ID 添加到 javascript 数组

```
<script type="text/javascript">

jQuery(document).ready(function() {
    window.productVideos = {
        //Product Name : Youtube Video Id
    };

    productVideos["Volcano Vaporizer - Classic or Digital"] = "ukHcyEMxBEE";
    productVideos["Iolite Original Vaporizer"] = "WaVSuJ0DH7c";
    productVideos["Iolite Wispr Vaporizer"] = "OTCN-bl10f0";

    var productNames = new Array(
        <?php $count = 0; foreach($_productCollection as $_product ) {
            if ($count > 0) echo ',';
            echo '"' . $_product->getName() . '"';
            $count++;
        }?>
    ); 
```

遍历产品数组，加载相关视频（这工作正常）

```
 var iterator;
    for (iterator = 0; iterator < <?php echo $_productCollection->count(); ?>; iterator++) {
        if (productVideos[productNames[iterator]]) {
            loadPlayer(productNames[iterator], productVideos[productNames[iterator]]);
        }
    }

}); 
```

尝试将事件侦听器附加到视频 - 这不起作用

```
jQuery(window).load(function() {

    for (var index in window.productVideos) {

        if (document.getElementById("ytPlayer-" + window.productVideos[index])) {
            document.getElementById("ytPlayer-" + window.productVideos[index]).addEventListener("onStateChange", "alert");

        }
    }
});

</script> 
```

各种不相关的功能

```
<script type="text/javascript">         
                    /**
 * Resizing the player in JavaScript.
 */

function alert() {
    alert("HI");
}

// Make the player small.
function smallPlayer() {
  resizePlayer(480, 295);
}

// Set the player back to normal.
function normalPlayer() {
  resizePlayer(560, 340);
}

// Make the player big.
function largePlayer() {
  resizePlayer(640, 385);
}

function onPlayerStateChange() {
      resizePlayer(560, 340);
}

// Set the loaded player to a specific height and width.
function resizePlayer(width, height, videoID) {
  var playerObj = document.getElementById("ytPlayer-" + videoID);
  jQuery("#yt-player-" + videoID).parents('li').height('600px');
  playerObj.height = height;
  playerObj.width = width;
} 
```

加载视频的功能 - 上面调用

```
// The "main method" of this sample. Called when someone clicks "Run".
function loadPlayer(productName, videoID) {

  //jQuery("videoDiv-" + productName).parents('li').height('600px');
  // The video to load
  //var videoID = "ylLzyHk54Z0";
  // Lets Flash from another domain call JavaScript
  var params = { allowScriptAccess: "always"};
  // The element id of the Flash embed
  var atts = { id: "ytPlayer-" + videoID, class: "ytplayer"};
  // All of the magic handled by SWFObject (http://code.google.com/p/swfobject/)
  swfobject.embedSWF("http://www.youtube.com/v/" + videoID + 
                     "?version=3&enablejsapi=1&playerapiid=player1", 
                     "videoDiv-" + productName, "140", "85", "9", null, null, params, atts); 
} 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:12:49.683

`playerapiid`您应该为每个玩家指定唯一的。我建议你 `loadPlayer`稍微简化你的函数来接受两个参数：

```
function loadPlayer(blockID, videoID) {
    swfobject.embedSWF(
        'http://www.youtube.com/v/'+videoID+'?autostart=0&enablejsapi=1&playerapiid='+blockID,
        blockID, '320', '200', '8', null, null,
        { allowScriptAccess: 'always', wmode: 'transparent' },
        { id: blockID, name: blockID }
    );
} 
```

从单人游戏开始，在编写管理多个玩家的代码之前，让它与 API 一起工作非常重要，因为它更容易让它工作。

使用此功能工作 JSFiddle：http: [//jsfiddle.net/rbRF3/](http://jsfiddle.net/rbRF3/)

# c++ - 使用一个可选参数获取两个参数给 main

> ID：13444129
> 
> 赞同：1
> 
> 时间：2012-11-18T20:13:40.250
> 
> 标签：c++, command-line-arguments

我想将命令行参数传递给 main。它应该通过像 -a 4 这样的选项说明符来完成。对于单个字符和单个值，一切正常，但是当尝试为每个选项传递两个值时，它只有在最后放入时才有效。

以下代码在这样使用时按需要工作`./a.out -a 4 -b 6 -r 2 1`

```
a:4
b:6
x_0:2
y_0:1 
```

但是，仅使用和`./a.out -r 2 3 -a 32`的默认值。`a``b`

```
a:1
b:1
x_0:2
y_0:3 
```

它与argv和argc的增量有关吗？

谢谢你的帮助。

代码：用 g 编译`++ main.cc`

```
//--------------------------------------
//  Includes
//--------------------------------------
#include <iostream>
#include <cstdlib>

//--------------------------------------
//  Function Declarations
//--------------------------------------
void getArgsToMain(int argc, char *argv[]);
void showVars();

//--------------------------------------
//  Variable declarations
//--------------------------------------
double a    = 1.;
double b    = 1.;
double x_0  = a;
double y_0  = 0.;

// typedefs and namespace
using namespace std;    

// ===  FUNCTION  ======================
//         Name:  main
//  Description:  
// =====================================
int main ( int  argc , char * argv[] )
{
    getArgsToMain(argc, argv);
    showVars();
    return 0;
}// ----------  end of function main  ----------

//--------------------------------------
//  Main function implementations
//--------------------------------------
void getArgsToMain(int argc, char *argv[])
{
    while ((argc>1) && (argv[1][0]=='-'))
    {
        switch(argv[1][1])
        {
            case 'a':
                 a=atof(argv[2]);
                 break;
            case 'b':
                 b=atof(argv[2]);
                 break;
            case 'r':
                 x_0=atof(argv[2]);
                 if (!argv[3])
                        cout<<"Warning: No y_0 specified. Reverting to default."<<endl;
                 else
                    y_0=atof(argv[3]);
                 break;
            default: 
                 cout<<"Usage: blabla";
                 exit(0);
        }
        argv++;
        argv++;
        argc--;
        argc--;
    }
}

void showVars()
{
    cout << endl;
    cout << "a:" << a << endl;
    cout << "b:" << b << endl;
    cout << "x_0:" << x_0 << endl;
    cout << "y_0:" << y_0 << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:25:47.937

对于每个选项案例，您需要额外`argv++, argc--`的两个值。还要测试第二个值是否已经是下一个选项。

```
case 'r':
     x_0=atof(argv[2]);
     if (!argv[3] || argv[3][0] == '-') {
            cout<<"Warning: No y_0 specified. Reverting to default."<<endl;
     } else {
        y_0=atof(argv[3]);
        argv++;
        argc--;
     }
     break; 
```

正如@ezod 建议的那样，您可以使用`getopt`. 有关 getopt的类似要求，请参阅使用 getopt 和[C getopt multiple value为](https://stackoverflow.com/q/3939157/1741542)[命令行选项提供两个参数。](https://stackoverflow.com/q/8559391/1741542)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:29:17.890

您正在有效地逐步浏览收到的参数数组。步进时，您需要“使用”尽可能多的参数。命令行上的每个单词都成为一个参数（除非您使用引号将多个单词组合成一个参数）。当您将某些东西`-r a b`作为一个单元进行处理时，您会消耗三个参数。

您的代码假定您总是使用一对参数。请注意，如果您只传递一个参数，您可能无法处理`-r`标志的参数：没有检查防止丢失参数：您检查您是否至少有两个参数剩余，但`-r`标志总共需要三个参数.

# javascript - 如何在 jQuery 中确定和设置窗口的高度和滚动位置？

> ID：13444132
> 
> 赞同：1
> 
> 时间：2012-11-18T20:14:08.407
> 
> 标签：javascript, jquery

我想从加载的 html 页面中获取（垂直和水平）滚动条位置。然后在完成后端任务（例如删除操作）之后，我想重新加载页面并从滚动条设置旧位置。

那么我怎样才能用jquery做到这一点呢？（获取滚动条位置并稍后再次设置）我目前使用 jquery 1.8.3。我尝试了一些想法，但没有真正奏效。

谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:18:12.360

采用

```
window.onscroll = function (oEvent) {
  // called when the window is scrolled.
} 
```

和

```
// get scroll position
var x = window.scrollX,
    y = window.scrollY; 
```

获取滚动位置，然后将 x 和 y 保存到 cookie。刷新后从 cookie 中读取它们并使用代码设置滚动位置：

```
window.scrollTo( x, y ); 
```

# c# - MVC 模型绑定和铸造

> ID：13444134
> 
> 赞同：2
> 
> 时间：2012-11-18T20:14:29.080
> 
> 标签：c#, asp.net-mvc-3, casting, model-binding

假设我有两个类，一个派生自另一个：

动物和狗

```
public class Animal
{
    public String Name { get; set; }
}

public class Dog : Animal
{
    public Boolean HasSpots { get; set; }
} 
```

在我的控制器中，我将动物传递给索引视图

```
public ActionResult Index()
{
    return View(new Dog() {Name = "Dog"});
} 
```

索引 - 我将传入的 Animal 转换为带有 Dog 的编辑器模板。

```
@model MvcApplication1.Models.Animal

@using (Html.BeginForm("About", "Home", FormMethod.Post, null))
{
    @Html.EditorFor(x =>  x, "Dog", "Animal")

    <input type="submit" value="Begin" />
} 
```

这可以正常工作，但是当我尝试在控制器中显式转换回 Dog 时，当我将其发布到 About 时，它不会转换。我想象我将不得不创建一个自定义模型绑定器，但我不知道如何做到这一点。或者，如果我只是完全错过了一些东西。在不包括接口的情况下解决这个问题。

（使用这个作为一个小测试示例，我的实际类要复杂一些）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T21:14:16.910

默认模型绑定器不会尝试猜测您是否发布了比预期更多的派生类。因此，即使您的表单具有更多派生类的字段，如果该操作期望类动物，它将创建动物并且您将无法强制转换为狗，因为从未创建过狗。

我看不到界面可以在这里为您提供帮助。如果您让您的操作接受接口或抽象类，则默认模型绑定器将由于无法实例化所述类型而引发异常。

自定义模型绑定器可以为您处理这种情况。我见过的所有方法都涉及将一些额外的元数据加入到混合中。

使用附加表单字段来保存实际类型的示例在这里。 [带有 List<BaseClass> 和编辑器模板的 ViewModel](https://stackoverflow.com/questions/6484972/viewmodel-with-listbaseclass-and-editor-templates/6485552#6485552)

这里有一个使用属性来执行某种“已知类型”的示例。[http://mvccontrib.codeplex.com/wikipage?title=DerivedTypeModelBinder&referringTitle=Documentation](http://mvccontrib.codeplex.com/wikipage?title=DerivedTypeModelBinder&referringTitle=Documentation)

# ruby-on-rails - 与 has_many 达到二级关联

> ID：13444147
> 
> 赞同：2
> 
> 时间：2012-11-18T20:16:35.097
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

想象一下你有三个模型

```
Class Garage
  has_many :drivers
end

Class Driver
  belongs_to :garage
  has_many :cars
end

Class Car
  belongs_to :driver
end 
```

这都很好。

现在，如果我想在 and`has_many`之间添加一个关联`Garage`，`Car`这样我就可以直接执行`garage.cars`而不向模型添加新`garage_id`键`Car`怎么办？

我目前正在使用模型`cars`中定义的函数`Garage`：

```
def cars
  drivers.map{ |driver| driver.cars }.flatten
end 
```

但这并不令人满意，因为此函数返回一个数组而不是代理，因此我不能在返回的汽车上使用命名范围。另外，它在查询方面是次优的。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:22:13.430

```
class Garage
  has_many :drivers
  has_many :cars, :through => :drivers
end 
```

记录[在这里](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many-label-Options)

# html - 从 XML 结构中的纯文本创建 HTML 列表

> ID：13444152
> 
> 赞同：3
> 
> 时间：2012-11-18T20:16:58.757
> 
> 标签：html, xml, xslt, xslt-2.0, plaintext

我有一个 XML 文件，其中除了有序列表之外的所有内容都结构良好。每个列表项都被标记为一个段落`<p>`，并手动添加枚举：(1)。我想从该源创建一个有效的 HTML 列表。

使用该`xsl:matching-substring`方法和正则表达式，我能够提取每个列表项，但我似乎找不到添加周围`<ol>`标签的方法。

这是一个例子：

XML 源：

```
<Content>
    <P>(1) blah</P>
    <P>(2) blah</P>
    <P>(2) blah</P>
</Content> 
```

到目前为止我所拥有的：

```
<xsl:variable name="text" select="/Content/*/text()"/>
<xsl:analyze-string select="$text" regex="(\(\d+\))([^(]*)">
    <xsl:matching-substring>    
        <![CDATA[<li>]]><xsl:value-of select="regex-group(2)"/><![CDATA[</li>]]>
    </xsl:matching-substring>
</xsl:analyze-string> 
```

输出：

```
<li>blah</li>
<li>blah</li>
<li>blah</li> 
```

如果您想知道：通常输出必须是纯文本，只有`$text`变量的内容必须以 HTML 格式输出。这就是我使用`<![CDATA[]]`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:58:22.343

**就这么简单**：

**一、XSLT 2.0解决方案：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <ol>
    <xsl:apply-templates/>
  </ol>
 </xsl:template>

 <xsl:template match="P[matches(., '(^\(\d+\)\s*)(.*)')]">
    <li>
        <xsl:analyze-string select="." regex="(^\(\d+\)\s*)(.*)">
            <xsl:matching-substring>
              <xsl:value-of select="regex-group(2)"/>
            </xsl:matching-substring>
        </xsl:analyze-string>
    </li>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Content>
    <P>(1) blah</P>
    <P>(2) blah</P>
    <P>(2) blah</P>
</Content> 
```

**产生了想要的正确结果：**

```
<ol>
    <li>blah</li>
    <li>blah</li>
    <li>blah</li>
</ol> 
```

* * *

**二、XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <ol>
    <xsl:apply-templates/>
  </ol>
 </xsl:template>

 <xsl:template match=
  "P[starts-with(.,'(')
   and
     floor(substring-before(substring(.,2), ')'))
    =
     substring-before(substring(.,2), ')')
    ]">
    <li>
         <xsl:value-of select="substring-after(., ') ')"/>
    </li>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生相同的正确结果**：

```
<ol>
   <li>blah</li>
   <li>blah</li>
   <li>blah</li>
</ol> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T04:22:01.743

这并不是真正的解决方案，而是对 Dimitre 解决方案的建议略有改进。

(1) XSLT 2.0 解决方案的模板匹配条件可以简化为...

```
<xsl:template match="P[matches(., '^\(\d+\)')]"> 
```

话虽如此，xsl:analyze-string 的正则表达式应该保持原样。

(2) 可能，这超出了问题的范围，但问题看起来像 html 是预期的输出，因此应该向 OP 建议 html xsl:output 方法。

# gcc - GCC 不想更改输出文件

> ID：13444157
> 
> 赞同：0
> 
> 时间：2012-11-18T20:17:52.940
> 
> 标签：gcc, compilation

看来由于我安装了最新版本的 GCC，如果我想更改输出文件，我将无法再编译任何 C 文件。举个例子，文件`hello.c`：

```
#include <stdlib.h>
#include <stdio.h>

int main()
{
     printf("hello\n");
} 
```

如果我做 ：

```
gcc hello.c 
```

它工作正常，我有`a.out`输出。但是如果我想更改输出的名称，我基本上应该这样做：

```
gcc -o hello.c hello 
```

我对吗？

如果是这样，我会收到此错误：

```
gcc: error: hello: No such file or directory
gcc: fatal error: no input files
compilation terminated 
```

再举一个例子，它完全是 WTF ：

```
gcc -o Simplexe.c Simplexe
Simplexe: In function `_fini':
(.fini+0x0): multiple definition of `_fini'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o:(.fini+0x0): first defined here
Simplexe: In function `__data_start':
(.data+0x0): multiple definition of `__data_start'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o:(.data+0x0): first defined here
Simplexe: In function `__data_start':
(.data+0x8): multiple definition of `__dso_handle'
/usr/lib/gcc/x86_64-linux-gnu/4.6/crtbegin.o:(.data+0x0): first defined here
Simplexe:(.rodata+0x0): multiple definition of `_IO_stdin_used'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o:(.rodata.cst4+0x0): first defined here
Simplexe: In function `_start':
(.text+0x0): multiple definition of `_start'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o:(.text+0x0): first defined here
Simplexe: In function `_init':
(.init+0x0): multiple definition of `_init'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o:(.init+0x0): first defined here
/usr/lib/gcc/x86_64-linux-gnu/4.6/crtend.o:(.dtors+0x0): multiple definition of `__DTOR_END__'
Simplexe:(.dtors+0x8): first defined here
/usr/bin/ld: error in Simplexe(.eh_frame); no .eh_frame_hdr table will be created. 
```

我从未见过这样的东西，它删除了我的源文件。我被抓过一次，以后再也不会了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T20:19:55.740

改变

```
gcc -o hello.c hello 
```

到

```
gcc -o hello hello.c 
```

`-o`后面是目标，而不是源。

`Simplexe`如果目标存在并且现在 gcc 尝试再次将其链接到 "target" ，则可能会发生第二种情况`Simplexe.c`，但这只是一个猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:22:30.570

-o 指定输出文件，在您的情况下为**hello.c**，因此您正在尝试编译不存在的文件**hello 。**正确的命令是：

> gcc hello.c -o 你好

# datagrid - dojo dgrid 中的小部件

> ID：13444162
> 
> 赞同：9
> 
> 时间：2012-11-18T20:18:21.537
> 
> 标签：datagrid, dojo, dojox.grid.datagrid, dojox.grid, dgrid

我们公司搬迁`dojox/DataGrid`到了`dgrid`一段时间。现在我们发现，[dgrid](http://dojofoundation.org/packages/dgrid/)似乎不支持开箱即用的 dijit/dojox 小部件。

`dojox/DataGrid`有一个`formatter()`可以返回一个小部件。在那里很容易做到！[GitHub 上](https://github.com/SitePen/dgrid/wiki/API-Comparison)的API 比较说

> “dgrid 支持格式化程序函数，但不支持从它们返回小部件。dgrid 也有 renderCell，它预计会返回一个 DOM 节点。这表面上可以用于显示小部件（编辑器列插件正是这样做的）。请注意，出于单元格编辑的目的，强烈建议使用编辑器列插件。”

**具体如何？**

我曾尝试将编辑器插件与`{editor: ' ', editorArgs:' '}`. 这确实渲染了一个小部件，但限制性太强。例如，我如何呈现一个`dijit/Button`其标签是单元格的值？或者更复杂的东西，我如何使用（鲜为人知的）从格式化程序函数生成的`dojox/image/MagnifierLite`作为商店的价值？`<img>``src`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T08:02:45.123

您可以使用此示例代码

```
require(
    [
        "dgrid/List",
        "dgrid/OnDemandGrid",
        "dgrid/Selection",
        "dgrid/editor",
        "dgrid/Keyboard",
        "dgrid/tree",
        "dojo/_base/declare",
        "dojo/store/JsonRest",
        "dojo/store/Observable",
        "dojo/store/Cache",
        "dojo/store/Memory",
        "dijit/form/Button",
        "dojo/domReady!"
    ],

    function(
        List, 
        Grid, 
        Selection, 
        editor, 
        Keyboard, 
        tree, 
        declare, 
        JsonRest, 
        Observable, 
        Cache, 
        Memory, 
        Button
    ) {

        var columns = [
            {
                label:"Actions", 
                field:"id", 
                width: "200px", 
                renderCell: actionRenderCell
            }
        ];

        var actionRenderCell = function (object, data, cell) {

            var btnDelete = new Button({
                rowId : object.id,
                label: "Delete",
                onClick: function () {
                    myStore.remove(this.rowId);
                }
            }, cell.appendChild(document.createElement("div")));

            btnDelete._destroyOnRemove = true;

            return btnDelete;

        }

        grid = new (declare([Grid, Selection, Keyboard]))({
            store: myStore,
            getBeforePut: false,
            columns: columns
        }, "grid");

} 
```

# matlab - Matlab可怕的矩阵打印

> ID：13444166
> 
> 赞同：0
> 
> 时间：2012-11-18T20:18:52.843
> 
> 标签：matlab, matrix

我有一个 2x4 矩阵，看起来像这样

```
m_E =

   1.0e+30 *

   8.161150222102073                 Inf                 Inf   0.000000000000000
                 Inf                 Inf                 Inf   0.000000000000000 
```

如何显示矩阵以使其看起来没有第一行`1.0e+30 *`？

我想要这样的东西

```
m_E =

   8.161150222102073 * 1.0e+30       Inf                 Inf   0.000000000000000
                 Inf                 Inf                 Inf   0.000000000000000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:23:35.157

使用任一

```
format shortg 
```

或者

```
format longg 
```

.

您将获得可接受的*最局部紧凑*符号。[`format`参考](http://www.mathworks.it/it/help/matlab/ref/format.html)。

测试：

```
 format longg
  m_E =
  8.16115022210207e+030    Inf          Inf             0
            ...

  format shortg
  m_E =
  8.1612e+030          Inf          Inf            0
            ... 
```

# html - 插件域 CSS 无法正常工作

> ID：13444169
> 
> 赞同：0
> 
> 时间：2012-11-18T20:20:15.493
> 
> 标签：html, css, add-on

我最近完成了一个网站，现在我已经将它作为插件域放在一个文件夹中，CSS 链接没有正确翻译。为了更好地了解我在说什么，下面的例子：

**CSS 正常工作：http:** [//tinyurl.com/ctbrwdh](http://tinyurl.com/ctbrwdh)

**CSS 没有翻译过来（插件根文件夹）：** [http ://tinyurl.com/b76onhl](http://tinyurl.com/b76onhl)

如果我将插件域设置为指向正常工作的网站版本，它会完全破坏 CSS 和图像链接，并使网站看起来更糟。所以我决定使用当前的插件文件夹，因为它似乎在正确的路径上。我可以做些什么来修复无法正常工作的 CSS 部分？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:17:40.017

问题已解决，感谢您在过去 Stackoverflow 中的所有帮助 :)

我必须在代码中使用“/”来引用当前域目录：

联系页面例如：

使用添加“/”的 Img 参考

img src=" /images/yellow- **bar.jpg** " width="960" height="2" style="padding-bottom:2px;">

# .net - ASP.NET MVC 和组件架构

> ID：13444173
> 
> 赞同：0
> 
> 时间：2012-11-18T20:20:50.407
> 
> 标签：.net, asp.net-mvc, architecture, components

我想问的问题以前被[问过](https://stackoverflow.com/questions/2585229/asp-net-mvc-separating-large-app)，但我想知道自 2010 年以来：

1.  如果服务包或 MVC4 改进了故事（尤其是视图）？
2.  是否有一个技巧可以让“添加控制器”向导可以从单独的程序集中“以通常的方式”访问？
3.  是否有一种技巧可以让“以通常方式”从单独程序集中的控制器操作中访问“添加视图”向导？

**咆哮** 这个咆哮不是我问题的一部分，但我觉得它代表了房间里的白象。

在我链接的上述问题中发现的一个回复表明，单独的 MVC 程序集与 MVC“关注点分离”无关。我觉得这个答案有点像说“C# 的未来版本将不支持程序集之间的交互，因为这种交互与面向对象的关注点分离无关。”

这两种说法在技术上可能都是正确的，但两种说法都忽略了关注点分离适用于不断增加的范围级别。换句话说，它不仅适用于对象或 MVC 级别，还适用于组件架构级别。

换句话说，仅仅因为 ASP.NET MVC 在对象（或区域）级别支持“关注点分离”，并不意味着故事已经结束。我希望看到微软通过添加“ASP.NET MVC 组件”模板来简化故事，它允许控制器和视图（都带有工作向导）很容易成为单独程序集的一部分。

也许有人已经做出了这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:06:54.653

旁注：包括咆哮在内的任何问题都会被否决，因为它不是很客观。对未来的友好建议：保持问题客观。

是的，确实有一些技巧可以让工具在其他组件中工作。我在这里详细描述了它：http: [//blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/](http://blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/)

基本上你需要做以下事情：

1.  编辑类库的 .csproj 文件，添加以下内容：`<ProjectTypeGuids>{E53F8FEA-EAE0-44A6-8774-FFD645390401};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}`
2.  创建一个`VirtualPathProvider`可以从其他程序集中读取视图的
3.  指示 ASP.NET 构建管理器在查找控制器时包含您的类库。

.. 或者只是使用我的开源项目 Griffin.MvcContrib。

# python - 如何让 python 的 Maildir 读取更新的状态？

> ID：13444175
> 
> 赞同：2
> 
> 时间：2012-11-18T20:21:43.287
> 
> 标签：python, email, maildir

我在 python 中编写了一些代码来打开 Maildir，将“新”消息更新为“cur”，刷新并关闭邮件目录。问题是，当我在此之后使用脚本再次阅读相同的 Maildir 时，它仍然将所有电子邮件作为新邮件阅读！

（如果我真的直接查看操作系统，我可以看到邮件文件已从 Maildir/new 移动到 Maildir/cur）

有任何想法吗？

```
mail = Maildir(self._mail_dir, factory=MaildirMessage)
mail.lock()
for i, (key, m) in enumerate(mail.iteritems()):
  if m.get_subdir() == "new":
    m.set_subdir("cur")
    m.add_flag("S")  # Message seen
    mail[key] = m
  do_something_else(m) 
mail.flush() 
mail.close() 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T22:25:06.653

终于找到了解决办法。基本上我只需要通过**factory=None**而不是**factory=MaildirMessage**。

阅读下面链接中的文档，看起来**factory=None**实际上选择了 MaildirMessage 工厂，但显然它也增加了额外的行为。

[http://docs.python.org/2/library/mailbox.html#maildir](http://docs.python.org/2/library/mailbox.html#maildir)

# ios - 将 UIView 移动到 UIScrollView 在第一次缩放后不起作用

> ID：13444178
> 
> 赞同：0
> 
> 时间：2012-11-18T20:21:55.830
> 
> 标签：ios, uiscrollview, uiimageview, zooming, catiledlayer

我正在尝试使用 CATiledLayer 和 UIScrollView 显示一个大而高质量的可缩放图像。我的代码基于[iOS 大图像缩小示例代码](https://developer.apple.com/library/ios/#samplecode/LargeImageDownsizing)。

我的 UIScrollView 的层次结构是这样的：

*   UIScrollView
    *   UIImageView : 代表大图的第一个缩略图
    *   旧平铺视图
    *   平铺视图

我希望滚动视图中的图像可以移动。

我尝试了我在这个[StackOverflow 主题](https://stackoverflow.com/questions/1481826/dragging-an-uiview-inside-uiscrollview)上找到的内容，并且它有效。但是在第一次放大图像后，就无法移动图像了。我不知道为什么？

这是我的代码：

```
-(id)initWithFrame:(CGRect)frame image:(UIImage*)_image {
    if((self = [super initWithFrame:frame])) {      
    // Set up the UIScrollView
        // Piece of code

        self.canCancelContentTouches = NO;

        UIPanGestureRecognizer* panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
        [panGesture setMinimumNumberOfTouches:1];
        [panGesture setMaximumNumberOfTouches:1];
        [panGesture setDelegate:self];
        [frontTiledView addGestureRecognizer:panGesture];
        frontTiledView.exclusiveTouch = YES;

        UIPanGestureRecognizer* panGesture2 = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
        [panGesture2 setMinimumNumberOfTouches:1];
        [panGesture2 setMaximumNumberOfTouches:1];
        [panGesture2 setDelegate:self];
        [backgroundImageView addGestureRecognizer:panGesture2];
        backgroundImageView.exclusiveTouch = YES;

        UIPanGestureRecognizer* panGesture3 = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
        [panGesture3 setMinimumNumberOfTouches:1];
        [panGesture3 setMaximumNumberOfTouches:1];
        [panGesture3 setDelegate:self];
        [backTiledView addGestureRecognizer:panGesture3];
        backTiledView.exclusiveTouch = YES;
    }
    return self;
}

- (void)move:(UIGestureRecognizer*)sender {
    CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:frontTiledView];

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {
        positionDeplacement = frontTiledView.center;
    }

    translatedPoint = CGPointMake(positionDeplacement.x+translatedPoint.x, positionDeplacement.y+translatedPoint.y);
    frontTiledView.center = translatedPoint;
    backTiledView.center = translatedPoint;
    backgroundImageView.center = translatedPoint;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:47:56.070

我找到了解决我的问题的方法。我只需要在 scrollViewDidEndZooming 委托方法中再次添加手势，它就像一个魅力：

这是我的代码：

```
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale {
    // set the new scale factor for the TiledImageView
    imageScale *=scale;
    CGRect imageRect = CGRectMake(0.0f,0.0f,CGImageGetWidth(image.CGImage) * imageScale,CGImageGetHeight(image.CGImage) * imageScale);

    // Create a new TiledImageView based on new frame and scaling.
    frontTiledView = [[TiledImageView alloc] initWithFrame:imageRect image:image scale:imageScale]; 
    [self addSubview:frontTiledView];
    [frontTiledView release];

    if (imageRect.size.width < 320 || imageRect.size.height < 460)
        [self initGestures];
}

- (void)initGestures {
    self.canCancelContentTouches = NO;
    frontTiledView.exclusiveTouch = YES;
    backgroundImageView.exclusiveTouch = YES;
    backTiledView.exclusiveTouch = YES;

    UIPanGestureRecognizer* panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
    [panGesture setMinimumNumberOfTouches:1];
    [panGesture setMaximumNumberOfTouches:1];
    [panGesture setDelegate:self];
    [frontTiledView addGestureRecognizer:panGesture];

    UIPanGestureRecognizer* panGesture2 = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
    [panGesture2 setMinimumNumberOfTouches:1];
    [panGesture2 setMaximumNumberOfTouches:1];
    [panGesture2 setDelegate:self];
    [backgroundImageView addGestureRecognizer:panGesture2];

    UIPanGestureRecognizer* panGesture3 = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
    [panGesture3 setMinimumNumberOfTouches:1];
    [panGesture3 setMaximumNumberOfTouches:1];
    [panGesture3 setDelegate:self];
    [backTiledView addGestureRecognizer:panGesture3];
} 
```

# php - 如何使用 php 更改数组键值？

> ID：13444179
> 
> 赞同：0
> 
> 时间：2012-11-18T20:21:59.113
> 
> 标签：php, arrays, key-value

例如;

```
$array[16] = 20;
$array[18] = 8;
$array[27] = 95; 
```

如何像这样更改 array[] 键值从 0 开始；

```
$array[0] = 20;
$array[1] = 8;
$array[2] = 95; 
```

我不知道关键值。他们可以改变。$array[16] 可以是 $array[21]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T20:25:07.600

只需将值分配给具有相同名称的新数组：

```
$array = array_values($array); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T20:25:19.457

你可以使用`array_values`

```
$array = array_values($array); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T20:26:03.063

只需像这样 使用[array_values](http://www.php.net/array_values)`array_values($your_array)`，您将拥有一个从索引零开始的数组。

# python - Django 自动将超链接 url 附加到现有 url

> ID：13444181
> 
> 赞同：3
> 
> 时间：2012-11-18T20:22:17.497
> 
> 标签：python, django

我是 django 的初学者，目前我遇到了 url 问题。

例如，在我们的`base.html`页面中，我们硬编码了一些超链接标签`<a href="home.html">home</a>`，如果我们尝试从其他页面导航到此页面`localhost:8000/shop_online.html/category/jewelry`并单击超链接，那么我们将被重定向到主页，但 url 看起来像这样：`localhost:8000/shop_online.html/category/jewelry/index.html`.

我认为这与 urls.py 和硬编码的超链接标签有关，但我很困惑，不知道如何解决这个问题，我认为这是一个非常简单的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T21:01:34.630

您应该添加`/`您的`href`属性：

```
<a href="/home.html">home</a> 
```

但是，可能更好的解决方案是使用`url`标签。所以它应该看起来像：

```
<a href="{% url index %}">home</a> 
```

在这里，您有一个关于[Django 中的 url 调度程序](https://docs.djangoproject.com/en/dev/topics/http/urls/)的文档。

还有一件事：你不需要`*.html`在你的 url 中有这个扩展。

# android - Android的Bitmap类的getPixels()的使用及使用方法

> ID：13444185
> 
> 赞同：15
> 
> 时间：2012-11-18T20:22:27.557
> 
> 标签：android, bitmap, pixel

我正在尝试在 Android 中进行一些图像处理。我需要获取位图的一大块像素信息。所以我尝试使用 Bitmap 类方法之一 getPixels()。但是，似乎我没有正确使用它，或者我误解了该方法行为的唯一目的。

例如，我正在执行以下操作以从任意位置（位图坐标）x、y 获取位图的 10 x 10 区域的像素信息。

```
Bitmap bitmap = BitmapFactory.decodeFile(filePath);
int[] pixels = new int[100];
bitmap.getPixels(pixels, 0, bitmap.getWidth(), x, y, 10, 10); 
```

我得到了 ArrayIndexOutOfBoundsException。我一直在谷歌搜索，看看我做错了什么，但我一无所知。大部分关于 getPixels() 使用的示例或问题通常是针对提取整个图像的像素信息的情况。因此 int 数组的大小通常为 bitmap.getWidth()*bitmap.getHeight()，x 和 y 值为 0、0，width、height 为位图的宽高。

位图的 getPixels() 是否不是为我的使用目的而设计的（获取位图子区域的一大块像素信息）？还是我使用不当？有没有另一种方法可以做到这一点，也许使用不同的类？

如果有人对此有话要说，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-19T03:18:59.273

getPixels() 返回源位图的完整 int[] 数组，因此必须使用与源位图的高度 x 宽度相同的长度进行初始化。

像这样使用，`bitmap.getPixels(pixels, 0, bitmap.getWidth(), 0, 0, 10, 10);`实际上确实从位图中获取所需的像素，并用 0 填充数组的其余部分。因此，对于 100 x 10 的位图的 10 x 10 子集，从 0,0 开始，前 100 个值将是所需的 int 值，其余为 0。

您总是可以尝试使用`Bitmap.createBitmap()`来创建您的子集位图，然后`getPixels()`在您的新位图上使用来获取完整的数组。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-13T09:23:10.637

大多数人都想使用 getPixels() 获取特定区域的像素，但实际上它返回了原始位图的完整大小。有效区域位于左下角，其他区域为半透明颜色。我建议您使用 Android Studio 调试模式通过创建位图来查看视觉像素。

以下是我获取特定区域像素的 getPixels() 版本：

```
public class BitmapHelper {

public static int[] getBitmapPixels(Bitmap bitmap, int x, int y, int width, int height) {
    int[] pixels = new int[bitmap.getWidth() * bitmap.getHeight()];
    bitmap.getPixels(pixels, 0, bitmap.getWidth(), x, y,
            width, height);
    final int[] subsetPixels = new int[width * height];
    for (int row = 0; row < height; row++) {
        System.arraycopy(pixels, (row * bitmap.getWidth()),
                subsetPixels, row * width, width);
    }
    return subsetPixels;
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-20T18:58:54.903

我怀疑问题是您将“步幅”指定为`bitmap.getWidth()`.

这意味着在像素数组的每一行中保留的空间将是该宽度，而不仅仅是 10。在这种情况下，您应该将像素数组分配为`[bitmap.getWidth() * 10]`很大，而不仅仅是`[10 * 10]`.

或者，您可能首先想做的只是指定步幅为 10：

```
bitmap.getPixels(pixels, 0, 10, x, y, 10, 10); 
```

# jquery - 将 CSV 数据呈现为 HTML

> ID：13444187
> 
> 赞同：3
> 
> 时间：2012-11-18T20:22:33.023
> 
> 标签：jquery, csv, relative-path, absolute-path, laravel

我正在尝试让 jquery csv to table 插件与 jquery 文件上传插件一起使用（请参阅[http://code.google.com/p/jquerycsvtotable/](http://code.google.com/p/jquerycsvtotable/)）。它支持上传 CSV 文件，并在成功上传后（使用 JQuery 文件上传）立即将其呈现为同一页面上的 HTML。当我按照下面的示例设置 $filePath 时，这可以正常工作。但是，我希望将此值作为隐藏字段传递并使用 .attr 方法检索它。但是，当我这样做时，CSV to table 似乎无法正确呈现，并且页面似乎与 loadingImage 一起挂起（更新仍然有效），并且未执行“loadComplete”功能（根据下面示例中的警报）。

我可以让它工作如下（见粗体线）：

```
 }).bind('fileuploadcompleted', function (e, data) {        
        var $filename = $.trim($('#fileupload td.name').text());
        **var $filePath = 'bundles/jqueryfileupload/users/';
        //var $filepath = $('#upload_path_id').attr('value');**
        $.get($filePath + $filename, function(data) {
            $('#CSVSource').html('<pre>' + data + '</pre>');
        });
        $('#CSVTable').CSVToTable($filePath + $filename,{
          loadingImage: 'bundles/jqueryfileupload/img/loading-table.gif',
          startLine: 0 }             
        ).bind("loadComplete",function() {
              alert('load complete!');
              $('button.btn.import').removeClass('disabled').addClass('ready');
              $('div.alert.alert-info').show();
        }); 
```

知道如何解决这个问题吗？

更新：看起来问题存在，因为我正在检索绝对路径，而将 csv 呈现为 HTML 的 ajax 调用失败了。我正在使用 Laravel 并更新了 paths.php 文件以包含以下条目：

```
// --------------------------------------------------------------
// The path to the storage/users directory.
// --------------------------------------------------------------
$paths['user_files'] = 'storage/users'; 
```

然后在我的视图文件中，我将文件路径作为隐藏字段传递，如下所示：

```
<input type="hidden" id="upload_path_id" name="upload_path" value={{ path('user_files') }}> 
```

所以我的问题是，如果我在我的机器上本地同时使用 Laravel 和 Xampp，有没有办法让它与 ajax 一起作为相对路径或其他方式工作？我在上面使用的文件夹是 Laravel 的一部分（即在“存储”下），并且位于公共目录之上。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:35:03.470

在 IRC 上聊天时，我支持建议创建一个到控制器 (php) 的路由，该控制器将有权访问 Storage 目录并以这种方式检索文件内容。

因此，而不是当前的 php -> js -> js 场景，我将使用以下内容：php（视图）-> js（进行 ajax 调用）-> php（控制器）-> 获取存储路径-> php（控制器）（执行文件获取内容）-> js（将结果呈现为 HTML）

# c# - 使用 JQuery 和 MVC3 在某些情况下提交事件未完成

> ID：13444189
> 
> 赞同：1
> 
> 时间：2012-11-18T20:22:43.957
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-3

我在使用 JQuery 时遇到了一个非常奇怪的问题。我有一个文件上传表单，用户可以在其中单击 2 个按钮：“保存文件”或“无图片”。两者调用同一个控制器来管理文件上传字段中是否有图片。

奇怪的是，只有在 fileupload 字段为空的情况下才会调用控制器。如果有人选择了一张图片，它只是没有进入控制器，这让我认为提交不起作用。但是我的 jquery 代码被调用并且总是返回 true ......

这是 document.ready 中的 JQuery 代码：

```
$('#ImgForm').on('submit', function () {

        var fileUploader = document.getElementById("fileuploader");
        $(fileUploader).hide();

        var fileUploader = document.getElementById("informations");
        $(fileUploader).show();

        //Create a new image and insert it into the Images div.  Just to be fancy, 
        //we're going to use a "FadeIn" effect from jQuery
        var imgDiv = document.getElementById("Images");
        loadingImg = new Image();
        loadingImg.src = "../../Pictures/ajax-loader.gif";

        //Hide the image before adding to the DOM
        $(loadingImg).hide();
        imgDiv.appendChild(loadingImg);
        //Now fade the image in
        $(loadingImg).fadeIn(500, null);

        return true;
    }); 
```

这是MVC视图代码：

```
@using (Html.BeginForm("UploadImage", "Recipe", FormMethod.Post,
                new
                {
                    enctype = "multipart/form-data",
                    id = "ImgForm",
                    name = "ImgForm",
                    target = "UploadTarget"
                }))
            {
                <div id="fileuploader">
                    <h4>Étape 1: Choisir une photo</h4>
                    <input id="lefile" type="file" style="display:none" name="imageFile" accept="image/x-png, image/jpeg" />
                    <div class="input-append">
                       <input id="photoCover" class="input-large" type="text" />
                       <a class="btn" onclick="$('input[id=lefile]').click();">Parcourir...</a>
                    </div>

                    <script type="text/javascript">
                        $('input[id=lefile]').change(function () {
                            $('#photoCover').val($(this).val());
                        }); 
                    </script>

                    <input id="SaveImage" type="submit" class="btn btn-success" value="Sauvegarder l'image" />
                    <input id="SaveNoImage" type="submit" class="btn btn-danger" value="Aucune photo" />
                </div>  
            } 
```

我不会发布控制器代码，因为它只是在文件上传为空的情况下进入。

知道出了什么问题吗？谢谢

***非常重要的编辑***

今天我决定回到我的 SVN 历史并尝试看看发生了什么。我发现了一件非常奇怪的事情。如果我想让它工作，我需要在视图本身（Create.cshtml）中包含 jquery。我一直认为在 _layout.cshtml 中包含 jquery .js 文件是足够的，但事实并非如此！所以只有这样做，它才能在 Chrome 中运行。

我在 Internet Explorer 中仍然有一个错误，它阻止图像显示，因为 iframe 的“加载”事件启动：“运行时错误 Microsoft JScript：访问被拒绝”。它在 Chrome 中完美运行。任何想法？？？

***编辑 2***

评论中要求在 jsfiddle 中添加代码。我不太确定它是如何工作的，所以我复制了渲染的 html，剪切了 javascript 并将其放入 javascript 窗口中。它现在什么也没做，我不知道为什么，但至少你可以看到整个画面。希望能帮助到你。（请注意，与问题中的代码相比，我做了一些修改，但问题是一样的）。[这里！](http://jsfiddle.net/DarkJaff/74eHu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T22:41:00.233

这里有很多问题：

1.  _layout 中的 js ref 就足够了，但是，您在加载 jQuery 之前引用了 $ inline。将所有脚本移到最后并换行，`$(document).ready(function ({ });` 然后您可以删除重复的 js 引用
2.  `var fileUploader`您在同一块中声明了两次 - 危险，重命名其中一个
3.  您从不声明 loadingImg，因此该行`loadingImg = new Image();`使用隐式声明的全局 - 如果它不存在则再次危险（如果没有完整的代码则无法判断）
4.  一旦你修复了这些，你会发现你的表单永远不会回传到服务器，因为你正在处理提交客户端（在 jQuery 中）。

解决了这些问题后，我在 Chrome、FF、IE9 和 IE10 中得到了相同的行为。这是我使用的视图：

```
@{
    ViewBag.Title = "Test";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Test</h2>

@using (Html.BeginForm("Test", "Home", FormMethod.Post,
                new
                {
                    enctype = "multipart/form-data",
                    id = "ImgForm",
                    name = "ImgForm",
                    target = "UploadTarget"
                }))
            {
                <div id="fileuploader">
                    <h4>Étape 1: Choisir une photo</h4>
                    <input id="lefile" type="file" style="display:none" name="imageFile" accept="image/x-png, image/jpeg" />
                    <div class="input-append">
                       <input id="photoCover" class="input-large" type="text" />
                       <a class="btn" onclick="$('input[id=lefile]').click();">Parcourir...</a>
                    </div>
                    <input id="SaveImage" type="submit" class="btn btn-success" value="Sauvegarder l'image" />
                    <input id="SaveNoImage" type="submit" class="btn btn-danger" value="Aucune photo" />
                </div>  
            }

<div id ="UploadTarget">upload target</div>
<div id="Images"></div>

    <script type="text/javascript">
        $(document).ready(function () {
            $('input[id=lefile]').change(function () {
                debugger;
                $('#photoCover').val($(this).val());
            });

            $('#ImgForm').on('submit', function () {
                alert('in js submit');
                var fileUploader = document.getElementById("fileuploader");
                $(fileUploader).hide();

                var fileUploader1 = document.getElementById("informations");
                $(fileUploader1).show();

                //Create a new image and insert it into the Images div.  Just to be fancy, 
                //we're going to use a "FadeIn" effect from jQuery
                var imgDiv = document.getElementById("Images");
                var loadingImg = new Image();
                loadingImg.src = "/content/335.gif";

                //Hide the image before adding to the DOM
                $(loadingImg).hide();
                imgDiv.appendChild(loadingImg);
                //Now fade the image in
                $(loadingImg).fadeIn(500, null);
                debugger;
                return true;
            });
        });
    </script> 
```

# c# - C#将方法名称传递给带有变量的参数化threadstart

> ID：13444190
> 
> 赞同：1
> 
> 时间：2012-11-18T20:22:46.673
> 
> 标签：c#, multithreading, visual-studio-2010, pass-by-reference

好吧，伙计们，请不要因为我问这个问题而对我失望。

// 使用 System.Threading;

```
 private void startThread()
    {            
        Thread t = new Thread(ParameterizedThreadStart(setOutputBinaryWorker));
        t.Start();
    } 
```

由于 setOutputBinaryWorker 是一个实际的现有方法，因此这可以正常工作。但是，我正在寻找一种将函数名称作为变量传递给 startThread 函数的方法。

由于我有限的 C# 经验，我怀疑这是可能的，但似乎无法弄清楚如何。我可以想象它应该是这样的：

```
// using System.Threading;

    private void startThread(??datatype?? func)
    {            
        Thread t = new Thread(ParameterizedThreadStart(func));
        t.Start();
    } 
```

但我无法弄清楚数据类型应该是什么（使用问号）。现在，在调试时，传递的函数名称弹出为

> System.Object 无效，setOutputBinaryWorker

这并没有给我太多的继续。这些可以创建吗？尝试将参数转换为 (object) 不起作用。

这背后的主要思想是尝试使用安全的 gui 线程以正确的方式写入 ui 元素。现在，我已经完成了那部分，使用委托方法，这一切都很好。但是当切换到当前方法（使方法名称可变）时，我完全迷失了。如果有人知道替代方案、更好的解决方案，或者至少是可行的解决方案，我愿意接受建议，很重要。

提前感谢您的努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T08:20:47.203

数据类型应该是带有签名的委托：

void (object) - 意思是一种不返回任何东西并接受对象参数的方法

例子：

```
delegate void TestDelegate(object o);

        private void button4_Click(object sender, EventArgs e)
        {
            TestDelegate custom = SomeMethod;
            ParameterizedThreadStart pts = new ParameterizedThreadStart(custom);
            Thread thread = new Thread(pts);
            thread.Start();
        }

        private void SomeMethod(object o)
        {
            MessageBox.Show("Hey!");
        } 
```

请注意，我们传入了一个 TestDelegate 类型的变量。这使您可以在运行时将不同的方法传递给线程，只要方法遵循委托签名即可。

与反射配对：

```
 // assuming class is in same assembly as this method
    Assembly assembly = Assembly.GetExecutingAssembly();
    // you can choose to get type from an known object instead
    Type type = assembly.GetType("Test.SomeClass");
    object instance = Activator.CreateInstance(type, null);            
    MethodInfo methodInfo = type.GetMethod("SomeMethod");                        
    object[] parameterValues = new object[] { 1 };            
    methodInfo.Invoke(instance, parameterValues); 
```

使用反射时请注意性能。如果可以的话，缓存创建的对象以取消使用反射创建对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:28:04.503

我会使用 lambda 表达式

```
Thread t =new Thread(
 () =>
  {
    function(anyparameter);
  }
 ).Start(); 
```

# ruby - 增加最后一个 IPv4 数字的更简洁方法

> ID：13444191
> 
> 赞同：0
> 
> 时间：2012-11-18T20:22:48.463
> 
> 标签：ruby

这是我的IP：`192.168.2.0`

我需要得到一个像这样的数组：

```
["192.168.2.0",
 "192.168.2.1",
 "192.168.2.2",
 "192.168.2.3",
 "192.168.2.4",
 "192.168.2.5"] 
```

这是我如何将最后一位增加到`5`：

```
ip = '192.168.2.0'

ips = 0.upto(5).map do |n|
  ip.sub(/\.\d+$/, '.' << n.to_s)
end 
```

但是它很慢，我讨厌它的外观。

**重要**- 我需要初始`ip`保持不变，以便我以后可以通过`ip`变量引用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:06:45.830

标准库有[IPAddr](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/ipaddr/rdoc/IPAddr.html#method-i-succ)，它支持一种`succ`方法。

```
require 'ipaddr'
ip = "192.168.2.0"

ips = [ip]
5.times do 
  ips << IPAddr.new(ips.last).succ.to_s
end
p ips
# =>["192.168.2.0", "192.168.2.1", "192.168.2.2", "192.168.2.3", "192.168.2.4", "192.168.2.5"]

#Ranges work:
ip_range = IPAddr.new("192.168.2.0")..IPAddr.new("192.168.2.5")
p ip_range.map(&:to_s)
# =>["192.168.2.0", "192.168.2.1", "192.168.2.2", "192.168.2.3", "192.168.2.4", "192.168.2.5"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:24:06.307

只要您处理下的数字，`9`您就可以使用`succ`（或`next`）：

```
ip = '192.168.2.0'

p (0...5).inject([ip]) { |l| l << l.last.succ }

#=> ["192.168.2.0", "192.168.2.1", "192.168.2.2", "192.168.2.3", "192.168.2.4", "192.168.2.5"] 
```

如果您需要递增到`255`，请使用`split`比正则表达式快得多的方法：

```
p (0..255).inject([ip]) { |l, d| l << (l.last.split('.')[0..2] << d).join('.') }

#=> ["192.168.2.0" ... "192.168.2.255"] 
```

### 在此处查看[现场演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=cleaner-way-to-increment-last-ipv4-digit.rb&run=true)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T20:25:43.900

试试这个，它使用拆分/加入而不是正则表达式。

```
ip = '192.168.2.0'

ips = 0.upto(5).map do |n|
  ip.split('.').tap{|i| i[-1] = n }.join('.')
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T21:16:40.387

我建议使用stdlib 中的[IPAddr](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/ipaddr/rdoc/IPAddr.html)，因为它可以优雅地处理八位字节翻转（当您达到 .255 时），并且还具有一些用于子网划分等有用的功能。

```
require 'ipaddr'
current = ip = IPAddr.new('192.168.2.0')
array = [ip]
until current.to_s == '192.168.2.5'
  array << current = current.succ
end
array.map!(&:to_s) 
```

# objective-c - 如何呈现完全一样的视图？

> ID：13444194
> 
> 赞同：1
> 
> 时间：2012-11-18T20:23:17.307
> 
> 标签：objective-c, ios, ipad, uipopovercontroller, modalviewcontroller

如何完全像这样呈现视图控制器。我的意思是前面的密码视图。

我知道如何创建视图，但不知道如何呈现它。

![在此处输入图像描述](../Images/5deffabdf705a3205ecd577b4d163283.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:12:11.457

我使用`UIPopoverController`. 像这样的东西：

```
UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:content];
UIView *root = [UIApplication sharedApplication].keyWindow;
CGRect frame = root.frame;
frame.origin = CGRectCenter(frame);
frame.size = CGSizeMake(1, 1);

[popover presentPopoverFromRect:frame inView:root permittedArrowDirections:0 animated:YES]; 
```

框架是屏幕的中心点。为箭头方向传递 0 可防止通常的箭头出现在弹出框上。`content`是您希望显示的视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:48:12.773

实施基本上是`viewController`用适当的方法。但你不需要这样的一切。无需重新发明轮子。因为有一些非常漂亮的 3rd 方库可以做到这一点。查看 -

*   [PassViewController](https://github.com/lashad/PTPasscodeViewController)
*   [PinView](https://github.com/guicocoa/pinview)

希望这可以帮助...

# jquery - jQuery 无限（循环）

> ID：13444195
> 
> 赞同：0
> 
> 时间：2012-11-18T20:23:31.913
> 
> 标签：jquery, loops, scroll, infinite

我发现了很多关于无限循环的文档，但是有多种方法，没有任何东西能真正解释它，这使得我的代码难以实现。

我希望以两种方式使用它：

1.  水平滚动（点击箭头和动画）

[http://jsfiddle.net/stfzy/33/](http://jsfiddle.net/stfzy/33/)（目前我已经让它在结束时停止）

1.  只有一个 div 的自动循环，类似于这样：

[http://jsfiddle.net/UHpbR/2/](http://jsfiddle.net/UHpbR/2/)

```
(function($) {
    $.fn.seqfx = function() {
        var elements = this,
            l = elements.length,
            i = 0;

        function execute() {
            var current = $(elements[i]);
            i = (i + 1) % l;

            current
                .fadeIn(400)
                .delay(4000)
                .fadeOut(300, execute);
        }
        execute();
        return this;
    };
}(jQuery));

$("#fader div").seqfx(); 
```

不管最好的解决方案是什么（即上面的东西是什么好东西还是有更简单的方法？），如果有人可以解释这些部分或指导我找到这样做的文档，那就太好了。我想了解为什么代码让它循环，而不仅仅是复制/粘贴。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:25:55.990

“无限循环”是由于调用中的递归`execute()`：

```
.fadeOut(300, execute); 
```

这意味着`execute()`一旦元素褪色，fadeOut 就会调用，这意味着它`execute()`本质上会再次调用自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T03:47:06.230

这是一个问题：“即上面的东西是好东西还是有更简单的方法？”

答案是肯定的，有一个更简单的方法。只需使用那个时髦[的插件 jquery-timing](http://creativecouple.github.com/jquery-timing/)。它允许以许多简单的方式连接动画和异步操作。

使用 jquery-timing 你不需要定义 seqfx。你写的只是：

```
$("#fader div").repeat().each($).fadeIn(400).delay(4000).fadeOut(300,$); 
```

然后，您的 jQuery 方法链将变成更具时间感知能力的东西。jQuery 创始人 John Resig 表​​示，该插件将链接提升到了一个新的水平。

那么为什么该代码在与您的 seqfx 相同的无限循环之上？

.repeat() 方法（没有任何 .until()）将在方法链后面继续。.each($) 开始一个顺序循环，一个一个地迭代所有选定的元素。最后，带有 .fadeOut(300,$) 的淡出版本将等待动画完成。

因此，所有这些一起在无限循环中一个一个地为所有选定的元素设置动画。

# javascript - 如何更新位于 asp.net 中 iframe 之外的 ajax updatepanel

> ID：13444198
> 
> 赞同：1
> 
> 时间：2012-11-18T20:23:46.840
> 
> 标签：javascript, asp.net, iframe, updatepanel

我有一个包含更新面板和*iframe的**ASPX*文件。在*iframe*中的一些过程之后，我将更新 iframe 之外的一些值（在更新面板内）。

 **如何从*iframe*内部更新、更新面板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:37:35.533

首先，您需要添加一个使用 javascript 触发 UpdatePanel 的代码。您可以通过在 UpdatePanel 中添加一个隐藏按钮来做到这一点：

```
<div style="display:none">
    <asp:Button ID="DoUpdate" runat="server" ClientIDMode="Static" />
</div> 
```

现在，从 iframe 中，您可以找到此按钮并将单击运行为：

```
<script type="text/javascript">
   window.parent.document.getElementById('DoUpdate').click();
<script> 
```

我想在这里`ClientIDMode="Static"`指出必须是静态的，因为从 iframe 中我们无法知道找到此按钮的渲染 id，所以我们将其设为静态以不让它改变，并且`window.parent.`将搜索包含 iframe 的窗口， iframe 的父窗口**

# java - JSF 中每个用户/会话的唯一标识符

> ID：13444200
> 
> 赞同：0
> 
> 时间：2012-11-18T20:23:57.980
> 
> 标签：java, jsf, jsf-2

我有一个 JSF 应用程序，并希望为在浏览器中打开它的每个用户分配一个唯一标识符。

为了实现它，我想使用一个全局`long`变量并在新用户连接到 Web 应用程序时递增它。

我有两个问题：

1）我应该在哪里（以哪种方法）放置增量代码？

2) 如何在 Web 应用程序的 Java 类中访问该全局变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T20:55:33.047

您已经有一个由 appServer 免费分配的会话 ID。要在您的 bean 代码中获取它：

```
ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
HttpSession session = (HttpSession) ec.getSession(false);
String sessionId = session.getId(); 
```

# php - 网址重写 - 总是重定向到 index.php

> ID：13444204
> 
> 赞同：0
> 
> 时间：2012-11-18T20:24:22.940
> 
> 标签：php, apache, mod-rewrite

我正在尝试重写一些简单的网址：

```
http://www.site.com/folder/index.php?page=something 
```

进入

```
http://www.site.com/folder/something 
```

这是我的 .htaccess 文件（放在 /folder/ 中）

```
RewriteEngine On
RewriteBase /folder
RewriteRule ^(.*)$ index.php?page=$1 [R] 
```

有了这条规则，我总是得到这个 URL

```
 http://www.site.com/folder/index.php?page=index.php 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T22:44:14.927

一、改变

```
 RewriteBase /folder 

```

到

```
 RewriteBase /folder/ 

```

二、改变

```
 RewriteRule ^(.*)$ index.php?page=$1 [R] 

```

到

```
 RewriteRule ^index\.php/(.*)$ index.php?page=$1 [L,QSA] 

```

那应该行得通。**QSA**部分是允许将地址中的任何查询字符串转移到新地址；否则，它们将被丢弃。

## 编辑

在这种情况下，试试这个

```
 RewriteRule ^(.*)$ index.php?page=$1 [L,QSA] 

```

类似于您之前的情况。
除非您有其他模式，否则应该可以实现您所需要的

希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:29:02.893

~~你引用了错误的匹配，`$2`像这样使用~~

~~`RewriteEngine On`~~

~~`RewriteBase /folder`~~

~~`RewriteRule ^(.*)$ index.php?page=$2 [R]`~~

以上其实是不正确的。似乎`.`与正确的字符不匹配（我不知道为什么）。

在不知道问题原因的情况下，我可以看到解决此问题的最佳方法是简单地匹配字母和数字，如下所示：

```
# Turn on the rewrite engine
RewriteEngine On

# Set the rewrites for /folder
RewriteBase /folder

# Set the rewrite rules
RewriteRule ^([a-z0-9]+)/?$ index.php?page=$1 [NC] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T23:40:09.963

您最初的规则非常有效。唯一的问题是 [R] 修饰符将/folder/something**重定向到 /folder/index.php?page=something 并导致第二个请求。**

在 /folder/index.php?page=something 上应用你的规则，你会得到 /folder/index.php?page=index.php

要解决此问题，请将 [R] (HTTP 302 Redirect) 替换为 [L] (在此处匹配时离开匹配链)，您就完成了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T11:02:26.940

感谢大家，我成功地做了我想做的事情：

```
RewriteEngine On
RewriteBase /folder/

#Excluding direct url to php files
RewriteCond %{REQUEST_URI} !(.*)\.php$
#Excluding the empty space url
RewriteCond %{REQUEST_URI} !^(\s*)$
RewriteCond %{REQUEST_URI} !\.(gif|jpg|png|css|js|)$ [NC]
RewriteRule ^(.*)$ index.php?page=$1 [L,QSA] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-18T20:30:11.303

如果我可以建议，请查看 htaccess 的生成器，例如：[http ://www.generateit.net/mod-rewrite/](http://www.generateit.net/mod-rewrite/)

这给了你：

```
RewriteEngine On
RewriteRule ^folder/([^/]*)$ /folder/index.php?page=$1 [L] 
```

我已经编辑了上面的内容，这是本地测试域上的一个工作示例。也许这正是您一直在寻找的。

另外，如果可以的话，不推荐省略页面的扩展。谷歌喜欢它是可识别的，例如 .html 或 .php。

**而且，您应该为您添加的每个**参数添加一个重写规则。

最后，我将省略 index.php。如果没有找到其他页面，您的服务器将自动加载 index.php，但它不必在地址栏中可见。

# java - 从 Java 调用时使用 NTLM 进行身份验证失败

> ID：13444205
> 
> 赞同：2
> 
> 时间：2012-11-18T20:24:32.510
> 
> 标签：java, reporting-services, ntlm

我正在学习教程“[将 Java 与 Microsoft SQL Server Reporting Services 2005/2008 集成](http://www.craigsprogramming.com/2011/03/how-to-integrate-java-with-microsoft_4178.html)”。我正在使用以下设置：

*   SQL Server 2012 商业智能
*   Windows 7家庭高级版
*   http客户端3.1

在eclipse中执行代码时出现错误：

> 使用 NTLM 进行身份验证失败

尝试过[本文](http://devsac.blogspot.com/2010/10/supoprt-for-ntlmv2-with-apache.html)提到的JCIFS解决方案，也看过很多其他的帖子、论坛、教程、博客，但问题还是没有解决。

对于我使用内置帐户的服务帐户：`NT Authority\Network Service`. 我可以通过网络浏览器访问我的网络服务，但不能通过 Eclipse。

这是输出的完整堆栈：

```
Nov 19, 2012 3:44:48 AM org.apache.axis.utils.JavaUtils isAttachmentSupported
WARNING: Unable to find required classes (javax.activation.DataHandler and javax.mail.internet.MimeMultipart). Attachment support is disabled.
Nov 19, 2012 3:44:49 AM org.apache.commons.httpclient.auth.AuthChallengeProcessor selectAuthScheme
INFO: ntlm authentication scheme selected
Nov 19, 2012 3:44:49 AM org.apache.commons.httpclient.HttpMethodDirector processWWWAuthChallenge
INFO: Failure authenticating with NTLM <any realm>@yappkahowe-pc:80
AxisFault
 faultCode: {http://xml.apache.org/axis/}HTTP
 faultSubcode: 
 faultString: (401)Unauthorized
 faultActor: 
 faultNode: 
 faultDetail: 
    {}:return code:  401

    {http://xml.apache.org/axis/}HttpErrorCode:401

(401)Unauthorized
    at org.apache.axis.transport.http.CommonsHTTPSender.invoke(CommonsHTTPSender.java:218)
    at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
    at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
    at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)
    at org.apache.axis.client.AxisClient.invoke(AxisClient.java:165)
    at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
    at org.apache.axis.client.Call.invoke(Call.java:2767)
    at org.apache.axis.client.Call.invoke(Call.java:2443)
    at org.apache.axis.client.Call.invoke(Call.java:2366)
    at org.apache.axis.client.Call.invoke(Call.java:1812)
    at com.microsoft.schemas.sqlserver._2005._06._30.reporting.reportingservices.ReportExecutionServiceSoapStub.loadReport(ReportExecutionServiceSoapStub.java:886)
    at test.Test.<init>(Test.java:30)
    at test.Test.main(Test.java:70) 
```

我的代码如下：

```
package test;

import java.net.URL;

import javax.xml.rpc.holders.ByteArrayHolder;
import javax.xml.rpc.holders.StringHolder;
import javax.xml.soap.SOAPException;

import org.apache.axis.EngineConfiguration;
import org.apache.axis.message.SOAPHeaderElement;
import org.apache.commons.httpclient.auth.AuthPolicy;

import com.microsoft.schemas.sqlserver._2005._06._30.reporting.reportingservices.ExecutionInfo;
import com.microsoft.schemas.sqlserver._2005._06._30.reporting.reportingservices.ParameterValue;
import com.microsoft.schemas.sqlserver._2005._06._30.reporting.reportingservices.ReportExecutionServiceLocator;
import com.microsoft.schemas.sqlserver._2005._06._30.reporting.reportingservices.ReportExecutionServiceSoapStub;
import com.microsoft.schemas.sqlserver._2005._06._30.reporting.reportingservices.holders.ArrayOfStringHolder;
import com.microsoft.schemas.sqlserver._2005._06._30.reporting.reportingservices.holders.ArrayOfWarningHolder;

public class Test {
    public static final String USERNAME = "NT AUTHORITY\\NETWORKSERVICE";
    public static final String PASSWORD = "";
public Test() {
    AuthPolicy.registerAuthScheme(AuthPolicy.NTLM, JCIFS_NTLMScheme.class);
    ReportExecutionServiceSoapStub service = getService();
    ParameterValue[] parameters = new ParameterValue[0];

    try {
        ExecutionInfo info = service.loadReport("/Tutorial/Members", null); // Load report
        setExecutionId(service, info.getExecutionID()); // You must set the session id before continuing
        service.setExecutionParameters(parameters, "en-us"); // Set report parameters

        String format = "HTML4.0"; // Valid options are HTML4.0, MHTML, EXCEL, CSV, PDF, etc
        String deviceInfo = "<DeviceInfo><Toolbar>False</Toolbar><HTMLFragment>True</HTMLFragment></DeviceInfo>"; // Only generate an HTML fragment
        ByteArrayHolder result = new ByteArrayHolder();
        StringHolder extension = new StringHolder();
        StringHolder mimeType = new StringHolder();
        StringHolder encoding = new StringHolder();
        ArrayOfWarningHolder warnings = new ArrayOfWarningHolder();
        ArrayOfStringHolder streamIDs = new ArrayOfStringHolder();
        service.render(format, deviceInfo, result, extension, mimeType, encoding, warnings, streamIDs); // Render report to HTML

        System.out.println(new String(result.value)); // Prints the report HTML; this could be embedded in a JSP
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public static void main(String[] arg) {
    new Test();
}

public static void setExecutionId(ReportExecutionServiceSoapStub service, String id) throws SOAPException {
    SOAPHeaderElement sessionHeader = new SOAPHeaderElement("http://schemas.microsoft.com/sqlserver/2005/06/30/reporting/reportingservices",
            "ExecutionHeader");
    sessionHeader.addChildElement("ExecutionID").addTextNode(id);
    service.setHeader(sessionHeader);
}

public static ReportExecutionServiceSoapStub getService() {
    try {
        String endpoint = "http://127.0.0.1/reportserver/ReportExecution2005.asmx";
        ReportExecutionServiceSoapStub service = (ReportExecutionServiceSoapStub) new ReportExecutionServiceLocator(getEngineConfiguration())
                .getReportExecutionServiceSoap(new URL(endpoint));
        service.setUsername(USERNAME);
        service.setPassword(PASSWORD);
        return service;
    } catch (Exception e) {
        e.printStackTrace();
    }

    return null;
}

public static EngineConfiguration getEngineConfiguration() {
    java.lang.StringBuffer sb = new java.lang.StringBuffer();

    sb.append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n");
    sb.append("<deployment name=\"defaultClientConfig\"\r\n");
    sb.append("xmlns=\"http://xml.apache.org/axis/wsdd/\"\r\n");
    sb.append("xmlns:java=\"http://xml.apache.org/axis/wsdd/providers/java\">\r\n");
    sb.append("<globalConfiguration>\r\n");
    sb.append("<parameter name=\"disablePrettyXML\" value=\"true\"/>\r\n");
    sb.append("<parameter name=\"enableNamespacePrefixOptimization\" value=\"true\"/>\r\n");
    sb.append("</globalConfiguration>\r\n");
    sb.append("<transport name=\"http\" pivot=\"java:org.apache.axis.transport.http.CommonsHTTPSender\"/>\r\n");
    sb.append("<transport name=\"local\" pivot=\"java:org.apache.axis.transport.local.LocalSender\"/>\r\n");
    sb.append("<transport name=\"java\" pivot=\"java:org.apache.axis.transport.java.JavaSender\"/>\r\n");
    sb.append("</deployment>\r\n");

    return new org.apache.axis.configuration.XMLStringProvider(sb.toString());
} 
```

# ruby-on-rails - heroku 数据库访问和修改太昂贵/耗时？如何让它更快？

> ID：13444211
> 
> 赞同：1
> 
> 时间：2012-11-18T20:25:04.947
> 
> 标签：ruby-on-rails, database, postgresql, activerecord, heroku

我目前正在开发一个 ruby​​ on rails 项目，我每天都会从每天发布有价值数据但不会长时间存储它们的网站上抓取和保存数据。我正在抓取这些并将它们保存到我们的数据库中以制作时间序列数据集。我们拥有近**75 项资产**，每项资产都有**20 年的历史数据**平均而言。之前的算法有一个错误，因为我们所有的历史数据现在都不正确。我发现了问题并重新编写了目前运行良好的算法。我尝试修改数据库以获取前 1 年的历史数据（针对 1 项资产），并且运行良好。现在，事实是，当我在本地更新数据库时，对于具有 1 年历史数据的 1 项资产大约需要 10 分钟。如果我在 heroku 上做同样的事情，大约需要 37 分钟，这似乎很长。由于我们有 75 个资产，每个资产都有 20 年的历史数据，所以我假设，它应该花费**75*20*37 = 55,550 分钟 = 925 小时**！！！这对我来说似乎不可行。同样，这些数据对我们来说非常有价值，因此我们需要为我们拥有的所有历史数据更新我们的数据库。我在本地和 heroku 上使用 PostgreSQL 数据库。我的怀疑是，Rails 活动记录不是为做这种事情而设计的，而且它也非常昂贵。在这种情况下我该怎么办？我的问题的最佳解决方案应该是什么？我怎样才能使这项任务更快地完全满足我的目的？任何形式的建议/想法都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:22:08.467

您应该考虑几件事。由于上面的评论中提到的*mu 太短*了，因此摆脱 Rails 提供的任何开销可能会有所帮助。您可以通过使用 Sequel gem 编写一个 rake 任务来执行此操作，该任务以更少的开销访问您的数据库。[Sequel](http://sequel.rubyforge.org/)提供了一个相当简单的 API，它可以帮助您编写高效的查询，而无需 SQL 的不直观语法和 ActiveRecord 的开销。

我对 Heroku 的内部结构不够了解，但是要考虑的另一件事是运行您的代码的 heroku 实例是否能够足够快地完成您的 rake 任务中的繁重工作。另一位用户可能会评论您是否能够从另一台机器上运行 rake 任务，或者甚至只是通过启动您的 heroku 实例上的资源来获得收益

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:23:44.483

我已经遇到过这种问题，我使用[Sequel](http://sequel.rubyforge.org/)来解决它。它可以让您在 Ruby 中编写翻译算法，但无需使用繁重的 ActiveRecord 功能。

如果用 Sequel 编写的算法仍然需要很长时间，您将不得不直接编写 SQL，因为 @mu 像建议的那样太衬衫了。将 Sequel 代码转换为行 SQL 可能比 ActiveRecord 代码容易得多。

最后，您将运行的每个脚本都将在一个 Heroku dyno 上，它们的容量有限，您最好在本地运行它并将固定的数据库上传到 Heroku，而不是直接在 Heroku 上运行脚本。也许还有一些heroku插件可以为您提供更多资源。

# ios - 清除 iOS 应用中的屏幕堆栈

> ID：13444213
> 
> 赞同：0
> 
> 时间：2012-11-18T20:25:07.413
> 
> 标签：ios

我有*SplashScreen -> Sign Up -> Sign In -> MainScreen*屏幕。而且在 MainScreen 中没有必要记住所有屏幕堆栈（我的意思是我可以返回到注册/登录屏幕，但我不应该有这种可能性）。如何关闭不必要的屏幕？为 iOS UI 开发时这是一种好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:29:37.063

如果您使用的是 UINavigationController：

```
 //Pop back to the root view controller
 [self.navigationController popToRootViewControllerAnimated:NO];

 //Allocate and init the new view controller to push to
 NewViewController *newVC = [[NewViewController alloc] init];

 //Push the new view controller
 [self.navigationController pushViewController:newVC animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:31:29.483

如果您使用导航控制器将这些视图推送到视图控制器堆栈上，那么这将是弹回根视图控制器的好点。查看 UINavigationController 的文档。

但是，鉴于您正在尝试处理初始应用程序授权，更好的模式可能是将您的 MainScreen 视图控制器呈现为根视图控制器，然后使用模式视图控制器堆栈来处理注册/登录。

tl;dr：您应该查看 UINavigationController 和 UIViewController 的文档。特别注意推送视图控制器和呈现模式视图控制器之间的区别。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T20:32:16.227

一种更清晰的方法，无需手动弹出和推送：

```
NSArray *vctrls = [NSArray arrayWithObjects:[MainViewController new]];
[navController setViewControllers:vctrls animated:YES]; 
```

# javascript - 当只有选择器和要调用的函数不同时，如何将两个javascript函数“捆绑”成一个？

> ID：13444214
> 
> 赞同：0
> 
> 时间：2012-11-18T20:25:11.950
> 
> 标签：javascript, jquery, function, optimization

我在一个片段中有以下函数调用者：

```
// del
if ( maxDelivery > 0 ) {
    if ( maxDelivery === 1 ){
        delAdressFunc( dels );
    } else {
        for ( i = 0; i < maxDelivery; i += 1 ){
            delAdressFunc( dels[i] );
        }
    }
}

// ajax
if ( maxAjaxTables > 0 ){
    if ( maxAjaxTables === 1 ){
        getAjaxTable( ajx, 0 );   
    } else {
        for ( j = 1; j <= maxAjaxTables; j += 1){
            getAjaxTable( ajx[j-1], j )
        }
    }
} 
```

因此，两个函数调用的设置几乎相同。

**问题：**
有没有办法将两者结合成一个“调用者”来保存一些重复的代码？

谢谢！

**编辑**：
抱歉省略......`dels`并且`ajx`都是元素选择器，我正在构建如下：

```
dels = $('.selectDeliveryAdress').filter(function() { return $(this).jqmData("bound") !== true; });
maxDelivery = dels.length; 
```

我需要确保该函数只在每个元素上被调用一次，所以我`jqmData("bound")`在`delAdressFunc()`.

因此，它将是 0、1（最有可能）或 2+ 个元素。`ajx`和`maxAjaxTables`(= ajx.length )相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:05:41.777

```
function caller(obj, max, func) {
    if ( max > 0 ) {
        if ( max === 1 ){
            func( obj );
        } else {
            for ( i = 0; i < max; i += 1 ) {
                func( obj[i] );
            }
        }
    }
}

caller(dels, maxDelivery, delAdressFunc);
caller(ajx, maxAjaxTables, getAjaxTable); 
```

# python - 生成一个新的 2 阶 numpy 数组，用一定范围内的随机数填充每个元素

> ID：13444232
> 
> 赞同：2
> 
> 时间：2012-11-18T20:27:13.777
> 
> 标签：python, numpy

我是 numpy 的新手。创建一个新数组并用一定范围内的随机数填充每个元素的最佳方法是什么？

例如，我想要一个*3×3*数组，其中每个元素都是 a`0`或 a `1`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T20:29:35.607

尝试类似的东西

```
np.random.randint(2, size=(3, 3)) 
```

有关详细信息，请参阅[此](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.randint.html)文档。

* * *

例如：

```
import numpy as np
print np.random.randint(2, size=(3, 3)) 
```

输出：

```
[[1 0 0]
 [1 1 0]
 [1 0 0]]

```

# postgresql - Postgres 查询的性能

> ID：13444234
> 
> 赞同：1
> 
> 时间：2012-11-18T20:27:22.803
> 
> 标签：postgresql, database-performance, postgresql-performance

我有以下查询，我想对其进行优化。

```
 SELECT 
        a.household_id household_id, 
        age_of_youngest_woman, 
        b.number_of_children,
        c.number_of_men,
        fertility_cond_prob_number_of_children.cond_prob cond_prob_number_of_children,
        fertility_cond_age.cond_prob cond_prob_age,
        fertility_cond_prob_number_of_children.cond_prob * fertility_cond_age.cond_prob total_cond_prob,
        random() <= (874\. / 1703.) is_newborn_male
    FROM
        (
            SELECT household_id, MIN(age) age_of_youngest_woman
            FROM person
            WHERE 
                (user_id = 1) and
                (gender = 'FEMALE') and
                (age >= 18)
            GROUP BY household_id
        ) a
        LEFT JOIN
        (
            SELECT household_id, COUNT(*) number_of_children
            FROM person
            WHERE 
                (user_id = 1) and
                (gender = 'CHILD')
            GROUP BY household_id
        ) b ON (a.household_id = b.household_id)
        LEFT JOIN
        (
            SELECT household_id, COUNT(*) number_of_men
            FROM person
            WHERE 
                (user_id = 1) and
                (gender = 'MALE') and
                (age >= 18)
            GROUP BY household_id
        ) c ON (a.household_id = c.household_id)
        LEFT JOIN fertility_cond_prob_number_of_children ON (fertility_cond_prob_number_of_children.number_of_children = b.number_of_children)
        LEFT JOIN fertility_cond_age ON (fertility_cond_age.age = age_of_youngest_woman)
    WHERE 
        (c.number_of_men > 0) and
        (random() <= (fertility_cond_prob_number_of_children.cond_prob * fertility_cond_age.cond_prob)) 
```

`EXPLAIN ANALYZE`返回以下信息：

```
Merge Join  (cost=20366.67..853430.69 rows=34797455 width=44) (actual time=1330.609..1641.402 rows=224 loops=1)    
  Merge Cond: (c.household_id = public.person.household_id)    
  ->  Sort  (cost=4806.12..4829.66 rows=9416 width=16) (actual time=492.839..546.397 rows=25098 loops=1)    
        Sort Key: c.household_id    
        Sort Method: external merge  Disk: 640kB    
        ->  Subquery Scan on c  (cost=3972.76..4184.62 rows=9416 width=16) (actual time=232.953..367.689 rows=25259 loops=1)    
              ->  HashAggregate  (cost=3972.76..4090.46 rows=9416 width=8) (actual time=232.946..288.922 rows=25259 loops=1)    
                    Filter: (count(*) > 0)    
                    ->  Seq Scan on person  (cost=0.00..3737.68 rows=31344 width=8) (actual time=7.366..137.853 rows=38497 loops=1)    
                          Filter: ((age >= 18) AND (user_id = 1) AND ((gender)::text = 'MALE'::text))    
                          Rows Removed by Filter: 64856    
  ->  Materialize  (cost=15560.55..67482.77 rows=739113 width=44) (actual time=836.591..1049.115 rows=352 loops=1)    
        ->  Merge Join  (cost=15560.55..65634.99 rows=739113 width=44) (actual time=836.577..1047.666 rows=352 loops=1)    
              Merge Cond: (public.person.household_id = b.household_id)    
              Join Filter: (random() <= (fertility_cond_prob_number_of_children.cond_prob * fertility_cond_age.cond_prob))    
              Rows Removed by Join Filter: 11054    
              ->  Sort  (cost=4728.64..4747.85 rows=7684 width=20) (actual time=451.992..506.614 rows=26755 loops=1)    
                    Sort Key: public.person.household_id    
                    Sort Method: external merge  Disk: 888kB    
                    ->  Hash Join  (cost=3912.57..4232.73 rows=7684 width=20) (actual time=208.538..357.160 rows=26755 loops=1)    
                          Hash Cond: ((min(public.person.age)) = fertility_cond_age.age)    
                          ->  HashAggregate  (cost=3908.20..4010.65 rows=10245 width=12) (actual time=208.048..263.094 rows=26755 loops=1)    
                                ->  Seq Scan on person  (cost=0.00..3737.68 rows=34104 width=12) (actual time=1.612..111.773 rows=42369 loops=1)    
                                      Filter: ((age >= 18) AND (user_id = 1) AND ((gender)::text = 'FEMALE'::text))    
                                      Rows Removed by Filter: 60984    
                          ->  Hash  (cost=2.50..2.50 rows=150 width=12) (actual time=0.464..0.464 rows=150 loops=1)    
                                Buckets: 1024  Batches: 1  Memory Usage: 6kB    
                                ->  Seq Scan on fertility_cond_age  (cost=0.00..2.50 rows=150 width=12) (actual time=0.019..0.233 rows=150 loops=1)    
              ->  Materialize  (cost=10831.91..11120.48 rows=57715 width=24) (actual time=380.522..455.086 rows=14412 loops=1)    
                    ->  Sort  (cost=10831.91..10976.20 rows=57715 width=24) (actual time=380.504..411.816 rows=14412 loops=1)    
                          Sort Key: b.household_id    
                          Sort Method: external merge  Disk: 480kB    
                          ->  Merge Join  (cost=4205.69..5081.12 rows=57715 width=24) (actual time=221.294..301.093 rows=14412 loops=1)    
                                Merge Cond: (fertility_cond_prob_number_of_children.number_of_children = b.number_of_children)    
                                ->  Sort  (cost=135.34..140.19 rows=1940 width=12) (actual time=0.098..0.107 rows=7 loops=1)    
                                      Sort Key: fertility_cond_prob_number_of_children.number_of_children    
                                      Sort Method: quicksort  Memory: 17kB    
                                      ->  Seq Scan on fertility_cond_prob_number_of_children  (cost=0.00..29.40 rows=1940 width=12) (actual time=0.015..0.051 rows=25 loops=1)    
                                ->  Sort  (cost=4070.35..4085.23 rows=5950 width=16) (actual time=221.176..247.951 rows=14412 loops=1)    
                                      Sort Key: b.number_of_children    
                                      Sort Method: quicksort  Memory: 819kB    
                                      ->  Subquery Scan on b  (cost=3578.32..3697.32 rows=5950 width=16) (actual time=118.096..193.664 rows=14412 loops=1)    
                                            ->  HashAggregate  (cost=3578.32..3637.82 rows=5950 width=8) (actual time=118.090..147.604 rows=14412 loops=1)    
                                                  ->  Seq Scan on person  (cost=0.00..3479.30 rows=19806 width=8) (actual time=30.973..70.129 rows=20025 loops=1)    
                                                        Filter: ((user_id = 1) AND ((gender)::text = 'CHILD'::text))    
                                                        Rows Removed by Filter: 83328 
```

我可以做些什么来提高查询的性能？

我试图添加索引，但这使事情**变得更糟**（没有索引，查询运行得更快）。

**更新 1**：

询问

```
 SELECT 
        a.household_id household_id, 
        age_of_youngest_woman, 
        a.number_of_children,
        a.number_of_men,
        fertility_cond_prob_number_of_children.cond_prob cond_prob_number_of_children,
        fertility_cond_age.cond_prob cond_prob_age,
        fertility_cond_prob_number_of_children.cond_prob * fertility_cond_age.cond_prob total_cond_prob,
        random() <= (874\. / 1703.) is_newborn_male
    FROM
        (SELECT 
            household_id, 
            MIN(CASE WHEN 
                    (gender = 'FEMALE') and 
                    (age >= 18)
                THEN age
                END) age_of_youngest_woman,
            COUNT(CASE WHEN (gender = 'CHILD')
                THEN 1
                END) number_of_children,
            COUNT(CASE WHEN (gender = 'MALE') and 
                            (age >= 18)
                THEN 1
                END) number_of_men
        FROM person
        WHERE user_id = 1 
        GROUP BY household_id) a
        JOIN fertility_cond_prob_number_of_children ON (fertility_cond_prob_number_of_children.number_of_children = a.number_of_children)
        JOIN fertility_cond_age ON (fertility_cond_age.age = a.age_of_youngest_woman)                   
    WHERE 
        (a.number_of_men > 0) and
        (random() <= (fertility_cond_prob_number_of_children.cond_prob * fertility_cond_age.cond_prob)) 
```

具有以下性能特点：

```
Hash Join  (cost=21783.55..21871.65 rows=6 width=44) (actual time=701.418..3042.547 rows=247 loops=1)
  Hash Cond: ((min(CASE WHEN (((person.gender)::text = 'FEMALE'::text) AND (person.age >= 18)) THEN person.age ELSE NULL::integer END)) = fertility_cond_age.age)
  Join Filter: (random() <= (fertility_cond_prob_number_of_children.cond_prob * fertility_cond_age.cond_prob))
  Rows Removed by Join Filter: 18741
  ->  Nested Loop  (cost=21779.17..21866.82 rows=19 width=36) (actual time=696.983..2949.993 rows=25647 loops=1)
        Join Filter: ((count(CASE WHEN ((person.gender)::text = 'CHILD'::text) THEN 1 ELSE NULL::integer END)) = fertility_cond_prob_number_of_children.number_of_children)
        Rows Removed by Join Filter: 615528
        ->  Seq Scan on fertility_cond_prob_number_of_children  (cost=0.00..29.40 rows=1940 width=12) (actual time=0.007..0.098 rows=25 loops=1)
        ->  Materialize  (cost=21779.17..21779.23 rows=2 width=28) (actual time=27.894..76.814 rows=25647 loops=25)
              ->  HashAggregate  (cost=21779.17..21779.20 rows=2 width=50) (actual time=696.954..764.681 rows=25647 loops=1)
                    Filter: (count(CASE WHEN (((person.gender)::text = 'MALE'::text) AND (person.age >= 18)) THEN 1 ELSE NULL::integer END) > 0)
                    Rows Removed by Filter: 8112
                    ->  Seq Scan on person  (cost=0.00..21648.46 rows=4357 width=50) (actual time=13.910..343.198 rows=106158 loops=1)
                          Filter: (user_id = 1)
  ->  Hash  (cost=2.50..2.50 rows=150 width=12) (actual time=0.480..0.480 rows=150 loops=1)
        Buckets: 1024  Batches: 1  Memory Usage: 6kB
        ->  Seq Scan on fertility_cond_age  (cost=0.00..2.50 rows=150 width=12) (actual time=0.016..0.235 rows=150 loops=1)
Total runtime: 3045.405 ms 
```

![在此处输入图像描述](../Images/9e8faa4afea11c5dd0def8d272f0719d.png)

表定义：

```
CREATE TABLE fertility_cond_prob_number_of_children(number_of_children integer, cond_prob double precision);
CREATE TABLE fertility_cond_age(age integer, cond_prob double precision);
CREATE TABLE fertility_households(household_id bigint, user_id bigint, age_of_woman integer, number_of_children integer);
CREATE TABLE person (
    id                     SERIAL,
    user_id                 bigint NOT NULL,
    age                     integer NOT NULL,
    monthly_income          double precision NOT NULL,
    gender                  character varying(10),    
    household_id           bigint); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:39:29.277

尝试这样的事情：

```
SELECT 
    a.household_id, 
    a.age_of_youngest_woman, 
    a.number_of_children,
    a.number_of_men,
    fertility_cond_prob_number_of_children.cond_prob cond_prob_number_of_children,
    fertility_cond_age.cond_prob cond_prob_age,
    fertility_cond_prob_number_of_children.cond_prob * fertility_cond_age.cond_prob total_cond_prob,
    random() <= (874\. / 1703.) is_newborn_male
FROM
    (SELECT household_id, 
            MIN(CASE WHEN (gender = 'FEMALE') 
                          and (age >= 18)
                     THEN age
                END) age_of_youngest_woman,
            COUNT(CASE WHEN (gender = 'CHILD')
                       THEN 1
                  END) number_of_children,
            COUNT(CASE WHEN (gender = 'MALE')
                            and (age >= 18)
                       THEN 1
                  END) number_of_men
     FROM person
     WHERE user_id = 1 
     GROUP BY household_id) a
JOIN fertility_cond_prob_number_of_children ON (fertility_cond_prob_number_of_children.number_of_children = a.number_of_children)
JOIN fertility_cond_age ON (fertility_cond_age.age = a.age_of_youngest_woman)
WHERE 
    (a.number_of_men > 0) and
    (random() <= (fertility_cond_prob_number_of_children.cond_prob * fertility_cond_age.cond_prob)) 
```

我使用一些 CASE 语句将 3 个内部表扫描更改为 1 个扫描，并用简单的连接替换了左连接（因为 WHERE 子句没有区别）。它应该加快整个查询。

你可能需要纠正一些拼写错误才能正确运行，我没有测试过。

# php - 使用 Ajax 的多个数据库插入，具有动态数量的文本字段

> ID：13444237
> 
> 赞同：0
> 
> 时间：2012-11-18T20:27:45.767
> 
> 标签：php, jquery, ajax

我正在尝试将文本字段的多行插入到我的数据库中。

```
<html>

<head>
</head>

<body>                      
        <table>
            <tr>
                <td><input type="text" id="name[0]" name="name[0]"></td>
                <td><input type="text" id="grade[0]" name="grade[0]"></td>
            </tr>
            <tr>
                <td><input type="text" id="name[1]"   name="name[1]"></td>
                <td><input type="text" id="grade[1]"  name="grade[1]"></td>
            </tr>
            <tr>
                <td><input type="text" id="name[2]"   name="name[2]"></td>
                <td><input type="text" id="grade[2]"  name="grade[2]"></td>
            </tr>
            <tr>
                <td><input type="text" id="name[3]"   name="name[3]"></td>
                <td><input type="text" id="grade[3]"  name="grade[3]"></td>
            </tr>   
        </table>

        <input type="button" id="submit_in" name="submit_in" value="submit">

</body>
</html> 
```

我将索引放入我的 id 以便我可以使用 Ajax 循环它，但我不知道如何循环它并使用 Ajax 插入它。

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#submit_in').click(function() {

            var stud_name = $('#name[0]').val();
            var stud_grade =  $('#grade[0]').val();

            alert(stud_name+" "+stud_grade);

            $.ajax({
                type:"post",
                url:"insert.php",
                dataType:'json',    
                data:{'name':stud_name,'grade':stud_grade},
                success:function(data){

                }
            });

        });
    });

</script> 
```

这是我的 PHP 代码：

```
<?php
$host = 'Localhost';
$username= 'root';
$password= '12345';
$db_name = 'multiple_ajax';

$con = mysql_connect($host,$username,$password) or die ("Cant Connect");
mysql_select_db($db_name) or die ("Cant Select DataBase");

error_reporting(E_ALL ^ E_NOTICE);

$name= $_POST['name'];
$grade = $_POST['grade'];   

    $insert = "INSERT INTO stud_info VALUES('$name','$grade')";

    if(@!mysql_query($insert)){
        die('error insert'.mysql_error());
    }

?> 
```

我的 PHP 代码只有两个可以使用 Ajax 的变量，因为我认为 Ajax 将使用 id 中的索引循环这些变量。我是 Ajax 和 PHP 的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:33:35.233

我相信你知道你可以通过 HTTP 请求传递数组，对吧？为什么你一次只做一个请求？将它们全部连接起来！

```
var GradeData = [];
$("table > tr").each(function() {
   var k = $(this).find("input[type='text']");
   if (k.length == 2) {
      GradeData.push({ "name": k.eq(0).val(), "grade": k.eq(1).val()});
   }
}); 
```

然后，您将拥有一个数组`GradeData`，其中每个元素都有一个名称和一个等级。要通过 AJAX 传递它，请执行以下操作：

```
$.ajax({
  url: "insert.php",
  type: "post",
  data: {
     students: GradeData
  }
}); 
```

从那里，使用 PHP 恢复它是一件简单的事情（它会出现，`$_POST['students']`并且数组中每个元素的格式将始终是 Array('grade' => 'something', 'name' => 'something '). 从那里开始，你只需要迭代然后......就是这样！

从那里，插入行同样容易：

```
<?php
$host = 'Localhost';
$username= 'root';
$password= '12345';
$db_name = 'multiple_ajax';

$con = mysql_connect($host,$username,$password) or die ("Cant Connect");
mysql_select_db($db_name) or die ("Cant Select DataBase");

error_reporting(E_ALL ^ E_NOTICE);
foreach ($_POST['students'] as $data) {
    $name= $data['name'];
    $grade = $data['grade'];   
    $insert = "INSERT INTO stud_info VALUES('".mysql_real_escape_string($name)."','".mysql_real_escape_string($grade)."')";

    if(@!mysql_query($insert)){
       die('error insert'.mysql_error());
    }
}
?> 
```

# php - 设置和阅读漂亮的网址

> ID：13444238
> 
> 赞同：2
> 
> 时间：2012-11-18T20:27:51.107
> 
> 标签：php, .htaccess, url-rewriting, query-string

我知道这已被广泛讨论，但我似乎无法找到我想做的事情的答案。我已经阅读了所有堆栈文章，并查看了谷歌显示的不同方法以及我尝试过的无数搜索字符串。

我看过文章谈论使 PHP 可读 URL 变得漂亮，但没有（我能理解）使 PHP 可读的漂亮。

我看过文章谈论为每个“用户”创建一个 htaccess 条目（在下面的例子中），但没有几行解决方案可以格式化我需要的方式（再次，在下面的例子中）。

有人可以提供一个模板：

1) 发送一个看起来像[https://mysite.com/users/sampleUserName](https://mysite.com/users/sampleUserName)的漂亮 URL到[https://mysite.com/users.php?username=sampleUserName](https://mysite.com/users.php?username=sampleUserName)

2) 如果有必要，让 users.php 处理漂亮的 url。

我什至不完全确定我在问什么（因为我不知道这是如何工作的，所以这个问题），所以如果有人能更准确地读懂我的想法，我将不胜感激。哈哈

底线：我希望人们能够输入漂亮的 URL 并让 PHP 能够处理它。

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:30:55.400

您需要使用 Apache 的[`mod_rewrite`](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html).

您需要在`.htaccess`文件中添加以下行：

```
RewriteEngine On
RewriteRule   ^[a-zA-Z0-9]/?$    users.php?username=$1    [NC,L] 
```

* * *

如果你想了解更多，这里有一篇关于[初学者 URL 重写](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)的好文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:34:25.147

为什么要重新发明轮子并编写自己的 URL 重写解决方案？使用一个框架（您不必使用它的其余部分，只需使用路由库）。这是一个使用非常轻量级的 Silex 微框架的示例：

```
require_once __DIR__.'/../vendor/autoload.php'; 

$app = new Silex\Application(); 

$app->get('/hello/{name}', function($name) use($app) { 
    return 'Hello '.$app->escape($name); 
}); 

$app->run(); 
```

资料来源：[http ://silex.sensiolabs.org/](http://silex.sensiolabs.org/)

# macos - 用可可打印

> ID：13444247
> 
> 赞同：0
> 
> 时间：2012-11-18T20:28:33.207
> 
> 标签：macos, cocoa, printing

我做了一个非常适合 A4 页面的视图。现在我想打印它。请注意，我没有使用 drawRect 或类似的东西，只是带有子视图和文本标签的普通视图。我的问题是我对该视图有一些视图，我使用图层在项目周围放置背景颜色和圆角矩形。子视图不打印，但所有文本标签都会打印。

_printReport 只是一个带有视图和一堆文本标签的普通窗口。

我做错了什么，我怎么能做得更好？我真的不想做一个drawrect，但如果必须的话我会做的。

这是有人打印时发生的代码：

```
- (void)printWorksheet {
    TJContact *worksheet = [[self.workSheets selectedObjects] objectAtIndex:0];
    if (worksheet == nil) return;

    _printReport = [[TJPrintReportWindowController alloc] initWithWindowNibName:@"TJPrintReportWindowController"];
    [self.printReport setCompany:self.company];
    [self.printReport setContact:worksheet];

    [self.printReport showWindow:self];
    [self.printReport becomeFirstResponder];
    [self.printReport.view becomeFirstResponder];
    NSPrintInfo* printInfo = [NSPrintInfo sharedPrintInfo];

    [printInfo setHorizontalPagination:NSFitPagination];
    [printInfo setVerticalPagination:NSFitPagination];
    [printInfo setHorizontallyCentered:YES];
    [printInfo setVerticallyCentered:YES];
    [printInfo setLeftMargin:20.0];
    [printInfo setRightMargin:20.0];
    [printInfo setTopMargin:10.0];
    [printInfo setBottomMargin:10.0];

    NSPrintOperation* printOperation = [NSPrintOperation printOperationWithView:self.printReport.view printInfo:printInfo];
    [printOperation setShowsPrintPanel:YES];
    [printOperation runOperationModalForWindow:[self window] delegate:nil didRunSelector:nil contextInfo:nil];
} 
```

不确定这是否有帮助，但主视图确实将 setWantsLayers 设置为 YES，这是我的装饰之一：

```
CALayer *customerLayer = [self.customerView layer];
[customerLayer setCornerRadius:10];
[customerLayer setBackgroundColor:[NSColor colorWithDeviceWhite:0 alpha:0.30].CGColor];
[customerLayer setBorderColor:[NSColor blackColor].CGColor];
[customerLayer setBorderWidth:1.5]; 
```

当我在屏幕上显示窗口时，它看起来就像我想要的那样，但是上面的圆形矩形没有被打印，但它上面的所有标签都会打印。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-08T12:09:50.840

有时只做自定义绘图来重现图层提供的简单效果会更容易。但有时那是一种真正的痛苦。要打印支持图层的视图，您可以先将它们渲染为图像，然后再打印 NSImageView。

我给你一个通用的解决方案，将整个 NSView 及其所有子视图和子层层次结构转换为 NSImageView。请注意，这是使用 MonoMac 用 c# 编写的。您应该能够轻松地将其转换为 objC。尝试在 Layer.RenderInContext 上搜索示例以获取 objC 中的进一步参考。下面的方法适用于复杂的视图层次结构（例如：表视图，其中包含半透明层支持的子视图，其行视图中具有圆角）：

```
//convert printView (your ready-to-print view which contains layer backed views) to a image view 
{
    //first we enclose the view in a new NSView - this fixes an issue which prevents the view to print upside down in some cases - for instance if printView is a NSScrollView, it will be drawn upside down
    NSView container = new NSView (printView.Frame);
    container.AddSubview (printView);
    printView = container;

    printView.WantsLayer = true;
    RectangleF bounds = printView.Bounds;
    int bitmapBytesPerRow = 4 * (int)bounds.Size.Width;
        using (CGColorSpace colorSpace = CGColorSpace.CreateDeviceRGB())
    using (CGBitmapContext context = new CGBitmapContext (null,
                                         (int)bounds.Width,
                                         (int)bounds.Height,
                                         8,
                                         bitmapBytesPerRow,
                                         colorSpace,
                                         CGImageAlphaInfo.PremultipliedLast)) {
        printView.Layer.RenderInContext (context);
        NSImageView canvas = new NSImageView (bounds);
        canvas.Image = new NSImage (context.ToImage (), bounds.Size); //instead of context.ToImage() in objC you have CGBitmapContextCreateImage
        printView = canvas;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:03:05.070

打印时不会出现图层。我必须制作自己的 NSView 对象并执行 drawRect 函数以作为背景视图。然后它自动打印出来而不做任何事情。

# iphone - Core Data 和 iCloud 的替代品？

> ID：13444248
> 
> 赞同：2
> 
> 时间：2012-11-18T20:28:38.857
> 
> 标签：iphone, ios, database, core-data, icloud

Core Data 和 iCloud 的名声很糟糕，只要在谷歌上搜索任何与之相关的东西，就会发现很多页面都在抱怨它的使用有多困难。因此，我正在寻找 iOS 应用程序之间数据同步的替代方案。这可以替代与 iCloud 同步的传统核心数据、不同的在线服务、不同的存储类型。任何这意味着我不必像现在这样继续使用 iCloud 和 Core Data。

# .net - System.Runtime.Serialization::ObjectIDGenerator

> ID：13444249
> 
> 赞同：0
> 
> 时间：2012-11-18T20:28:47.983
> 
> 标签：.net, serialization, lookup

我只是尝试在我的应用程序中使用 System.Runtime.Serialization::ObjectIDGenerator。我的应用程序需要与另一个进程通信。为此，我需要在进程之间交换对象 ID。ObjectIDGenerator 类似乎是解决方案......直到我发现有一个查找对象-> ID 但没有查找 ID-> 对象。

是否有更好的即用型解决方案可以在*两个*方向上进行可靠和快速的查找？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T06:50:01.277

`ObjectIDGenerator`只是在它看到的对象上保留一个哈希表，以及一个分配的对象 ID。

这是 C# 中的简化版本：

```
public class MyObjectIdGenerator
{
    private Dictionary<int,List<int>> _hashToID = new Dictionary<int,List<int>>();
    private List<object> _objects = new List<object> { null, };
    private int _idCounter = 1;
    private int _numRemoved = 0;

    public int GetId(object obj)
    {
        if (obj == null)
        {
            return 0;
        }

        int hash = RuntimeHelpers.GetHashCode(obj);

        List<int> ids;
        if (!_hashToID.TryGetValue(hash, out ids))
        {
            ids = new List<int>();
            _hashToID[hash] = ids;
        }

        foreach (var i in ids)
        {
            if (ReferenceEquals(_objects[i], obj))
            {
                return i;
            }
        }

        // Move the counter to the next free slot.
        while (_idCounter < _objects.Count && _objects[_idCounter] != null)
        {
            _idCounter++;
        }

        int id = _idCounter++;
        ids.Add(id);

        // Extend the pool to enough slots.
        while (_objects.Count <= id) {
            _objects.Add(null);
        }
        _objects[id] = obj;

        return id;
    }

    public bool Remove(object obj)
    {
        if (obj == null) return false;

        // Locate the object
        int hash = RuntimeHelpers.GetHashCode(obj);
        List<int> ids;
        if (!_hashToID.TryGetValue(hash, out ids)) return false;

        foreach (var i in ids)
        {
            if (ReferenceEquals(_objects[i], obj))
            {
                // Remove the object, and clean up.
                _objects[i] = null;
                ids.Remove(i);
                if (ids.Count == 0)
                {
                    _hashToID.Remove(hash);
                }
                _numRemoved++;
                if (_numRemoved >= 10 && _numRemoved >= _objects.Count/2) {
                    // Too many free slots. Reset the counter.
                    _idCounter = 0;
                    _numRemoved = 0;
                }
                return true;
            }
        }
        return false;
    }

    public object GetObject(int id)
    {
        if (id < 0 || id >= _objects.Count) return null;
        // 0 => null
        return _objects[id];
    }
} 
```

以下是 ObjectIDGenerator 的反编译源：[http ://www.fixee.org/paste/30e61ex/](http://www.fixee.org/paste/30e61ex/)

**编辑：**添加`Remove`方法。

# android - 无法使用 TargetApi 注释从较新的 API 中找到方法

> ID：13444255
> 
> 赞同：2
> 
> 时间：2012-11-18T20:29:32.250
> 
> 标签：android, eclipse

我想使用下一个代码为自 4 以来的所有 Android API 应用 SharedPreferences。

```
/**
 * The apply method was introduced 
 * in Android API level 9.<br> Calling it causes a safe asynchronous write 
 * of the SharedPreferences.Editor object to be performed. Because
 * it is asynchronous, it is the preferred technique for saving SharedPreferences.<br> 
 * So we should use appropriate method if we doesn`t need confirmation of success.
 * In this case we should use old commit method.
 */
@TargetApi(9)
    public static void applySharedPreferences(SharedPreferences.Editor editor){
    if (Build.VERSION.SDK_INT < 9){
        editor.commit();
    } else {
        editor.apply();
    }
} 
```

项目目标 API 为 10（在项目属性中设置）。它在 API 8 上运行良好，但是当我尝试在 API 4 上运行它时，它会因下一条消息而崩溃：

```
11-18 20:21:45.782: E/dalvikvm(323): Could not find method android.content.SharedPreferences$Editor.apply, referenced from method my.package.utils.Utils.applySharedPreferences 
```

它通常安装在设备上，但在启动过程中崩溃。为什么此 API 中从未使用过此方法（应用）时会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T20:58:27.850

> 它在 API 8 上运行良好，但是当我尝试在 API 4 上运行它时，它会因下一条消息而崩溃：

在 Android 1.x 中，Dalvik 非常保守，如果您尝试加载包含无法解析的引用的类（在本例中为`apply()`. 您的选择是：

1.  放弃对 Android 1.x 的支持，或

2.  不要使用`apply()`，但总是`commit()`在你自己的后台线程中使用，或者

3.  `GingerbreadHelper`使用静态方法创建另一个类（例如， ），该`apply()`方法将您`SharedPreferences.Editor`作为参数并调用`apply()`它。然后，将您更改`applySharedPreferences()`为 use`GingerbreadHelper.apply(editor)`而不是`editor.apply()`. 只要您从不`GingerbreadHelper`在 Android 1.x 设备上加载，您就可以避免`VerifyError`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:33:48.830

这不是走错路了吗？

那不应该是：

```
@TargetApi(9)
public static void applySharedPreferences(SharedPreferences.Editor editor)
{
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD)
    {
        editor.apply();
    }
    else
    {
        editor.commit();
    }
} 
```

如果对你来说，那会解决的！

虽然更好！

```
@TargetApi(Build.VERSION_CODES.GINGERBREAD)
public static void applySharedPreferences(final SharedPreferences.Editor editor)
{
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD)
    {
        editor.apply();
    }
    else
    {
        new AsyncTask<Void, Void, Void>(){
            @Override
            protected Void doInBackground(Void... params)
            {
                editor.commit();
                return null;
            }
        }.execute();
    }
} 
```

它现在总是异步的！

# jquery - 优化我的页面并缩小问题

> ID：13444259
> 
> 赞同：1
> 
> 时间：2012-11-18T20:29:44.457
> 
> 标签：jquery, html, css

我试图自学 jquery 并做一个体面的布局。我认为我所做的还可以，但我有疑问。这是我第一次从自己的脑海中尝试 jquery，而不是复制别人。

我试图保持它的相关性和简单性。

第一个问题。我在 chrome 中使用了优化工具，但我遇到了问题 **优化样式和脚本的顺序 (1) 以下外部 CSS 文件包含在文档头中的外部 JavaScript 文件之后。为确保并行下载 CSS 文件，请始终在外部 JavaScript 之前包含外部 CSS。在外部 CSS 文件和另一个资源之间的头部中发现了 1 个内联脚本块。要允许并行下载，请将内联脚本移动到外部 CSS 文件之前或下一个资源之后。** 每次我尝试这个时，它都会破坏页面 css。为什么以及我应该考虑什么来解决这个问题？

第二个问题：我在我的菜单下制作了一个简单的 jquery 滑块......它做了我想要的，但是当我缩小到 25% 时它不会留在包装器中，它会拍摄到页面的一侧。我整个周末都在尝试解决这个问题，但没有成功。建议会很棒，我坚持这一点。

总之，我希望看到我做的事情应该是这样的。

第三：当我缩小页面上的文本似乎并没有随着页面的其余部分缩小。 ***这是正常的吗？***

所以这里是请在里面挖洞..

```
<!DOCTYPE html>
<html>
<head><title>Bretts Gaming</title>

<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Source Sans Pro">
<link rel="stylesheet" type="text/css" href="./css/superfish.css" media="screen">
<link rel="stylesheet" type="text/css" href="./css/colorbox.css">
<link rel="stylesheet" type="text/css" href="./css/style.css">

<!--[if IE]>
    <link href="./css/style2.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="./css/superfish2.css" media="screen">
<![endif]-->
<script type="text/javascript" src="javascript/jquery-1.8.2.js"></script>
<script type="text/javascript" src="javascript/go.fullBg.js"></script>
<script type="text/javascript" src="javascript/superfish.js"></script>
<script type="text/javascript" src="javascript/hoverIntent.js"></script>
<script type="text/javascript" src="javascript/jquery.cycle.all.js"></script>
<script type="text/javascript" src="javascript/jquery.colorbox.js"></script>

<script type="text/javascript">
 $(document).ready(function() {
    $('#banner-rotate').cycle({
    fx:    'fade',
    speed:  500
    });
     $('ul.sf-menu').superfish({
     autoArrows:  false
     });
     $("#background_image").fullBg();
        var left = $('.first').offset().left + ($('.first').width() / 2  ) ,
        slidecont = $('#menu-slide');
        slidecont.stop().animate({
        'left': left,
        });
    $('#navbar li').on('mouseover', function(){
            var left = $(this).offset().left + ($(this).width() / 2 - 10) ,
            slidecont = $('#menu-slide'),
            navdiv = $('#slider-container').width()
            slidecont.stop().animate({
            'left': left,
            'position': 'absolute'
        });
    });
    $('#navbar li').on('mouseleave', function(){
        var left = $('.first').offset().left + ($('.first').width() / 2 - 10) ,
        slidecont = $('#menu-slide');
        slidecont.stop().animate({
        'left': left,
        });
    });
    $(".youtube").colorbox({iframe:true, innerWidth:600, innerHeight:519});
    //Example of preserving a JavaScript event for inline calls.
                $("#click").click(function(){ 
                    $('#click').css({"background-color":"#f00", "color":"#fff", "cursor":"inherit"}).text("Open this window again and this message will still be here.");
                    return false;
                });
 });
</script>
</head>
<body>
<div id="background_image"><img src="images/pictures/large/system-files/bg.png" width="1679" height="939"/></div>
<div id="background_overlay">
    <div id="site">
        <div id="header_wrapper">
            <div id="header">
                    <div id="logo"><img src="images/pictures/large/system-files/logo.png" width="366" height="41"/></div>
                    <div id="topnav">
                        <ul id="navbar"class="sf-menu">
                            <li class="current first"><a href="#a">HOME</a></li>
                            <li><a href="#">ABOUT US</a>
                                <ul>
                                    <li><a href="#">Menu 1</a></li>
                                    <li><a href="#">Menu 2</a></li>
                                </ul>
                            </li>
                            <li><a href="#">CORPORATE</a></li>
                            <li><a href="#">CRUSING</a></li>
                            <li><a href="#">LEISURE</a></li>
                            <li><a href="#">GROUPS</a></li>
                            <li><a href="#">VIRTUOSO</a></li>
                            <li><a href="#">LINKS</a></li>
                            <li class="last"><a href="#">CONTACT</a></li>
                        </ul>
                        <div id="slider-container">
                            <div id="menu-slide"></div>
                        </div>
                    </div>
                </div>
            </div>
        <div id="body_wrapper">
            <div id="body">
                <div id="home_sec_1">
                    <div id="banner_left">
        <div id="banner-rotate" class="pics">
            <img src="images/pictures/large/system-files/banner1.png" width="493" height="199" />
            <img src="images/pictures/large/system-files/banner2.png" width="493" height="199" />
            <img src="images/pictures/large/system-files/banner3.png" width="493" height="199" />
            </div>
        </div>
                    <div id="banner_right">
                        <div class="avert adFirst">
                            <img src="images/pictures/large/system-files/smallimg1.png" width="66" height="59"/>
                            <h2>DIRT 3</h2>
                            <p>Lorem ipsum dolor sit amet, consectetuer adipiscingelit.</p>
                            <div class="checklinks"><a href="index.html">Check It Out.</a></div>
                        </div>
                        <div class="avert">
                            <img src="images/pictures/large/system-files/smallimg2.png" width="66" height="59" />
                            <h2>DEAD ISLAND</h2>
                            <p>Lorem ipsum dolor sit amet, consectetuer adipiscingelit.</p>
                            <div class="checklinks"><a href="index.html">Check It Out.</a></div>
                        </div>
                        <div class="avert adLast">
                            <img src="images/pictures/large/system-files/smallimg3.png" width="66" height="59"/>
                            <h2>CALL OF DUTY: MW3</h2>
                            <p>Lorem ipsum dolor sit amet, consectetuer adipiscingelit.</p>
                            <div class="checklinks"><a href="index.html">Check It Out.</a></div>
                        </div>
                    </div>
                </div>
                <div id="home_sec_2">
                    <h2>WHATS IN THE MIX</h2>
                    <div class="home_sec_2_img home_sec_2_img_1" >
                        <a class="youtube cboxElement" href="http://www.youtube.com/embed/bdjnbWXKsOA?rel=0&amp;wmode=transparent" title="A Weird Fuckin Game"><img src="images/pictures/large/system-files/midimg1.png" width="314" height="145"/></a>                     
                        <p>LA NORIE</p>
                    </div>
                    <div class="home_sec_2_img">                        
                        <a class="youtube cboxElement" href="http://www.youtube.com/embed/TfrrAp1blaM?rel=0&amp;wmode=transparent" title="Battlefield 3 Goin Off"><img src="images/pictures/large/system-files/midimg2.png" width="314" height="145"/></a>
                        <p>BATTLEFIELD 3</p>
                    </div>
                    <div class="home_sec_2_img">
                        <a class="youtube cboxElement" href="http://www.youtube.com/embed/C4nMEoYIchU?rel=0&amp;wmode=transparent" title="Call Of Duty MW3"><img src="images/pictures/large/system-files/midimg3.png" width="314" height="145"/></a>
                        <p>CALL OF DUTY: MW3</p>
                    </div>
                </div>
                <div id="home_sec_3">
                <div class="liist-one">
                    <ul id="lst1" class="sujest">
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    </ul>
                </div>
                <div class="liist-one">
                    <ul id="lst3" class="sujest">
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    </ul>
                </div>
                <div class="liist-one">
                    <ul id="lst3" class="sujest">
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    <li><a href="#">Lorem ipsum dolor sit amet, consec  tetuer adi eat.</a></li>
                    </ul>
                </div>
            </div>
            <!-- This contains the hidden content for inline calls -->
        <div style='display:none'>
            <div id='inline_content' style='padding:10px; background:#fff;'>
            <p><strong>This content comes from a hidden element on this page.</strong></p>
            <p>The inline option preserves bound JavaScript events and changes, and it puts the content back where it came from when it is closed.</p>
            <p><a id="click" href="#" style='padding:5px; background:#ccc;'>Click me, it will be preserved!</a></p>

            <p><strong>If you try to open a new ColorBox while it is already open, it will update itself with the new content.</strong></p>
            <p>Updating Content Example:<br />
            <a class="ajax" href="../content/flash.html">Click here to load new content</a></p>
            </div>
        </div>
        </div>

<div id="footer_wrapper">
    <div id="footer">
        <div id="footer_left">© 2012 Bretts Gaming&nbsp;&nbsp;<a href="#">Privacy Policy</a>&nbsp;&nbsp;<a href="#">Web Design Gold Coast&nbsp;-&nbsp;Bretts Web Pages</a></div>
        <div id="footer_right"><a href="#">Sitemap</a>&nbsp;&nbsp;&nbsp;<a href="#">Bookmark this Site</a>&nbsp;&nbsp;&nbsp;<a href="#">Contact Us</a></div>
    </div>
</div>
</div>
</div>
</body>
</html> 
```

**和CSS**

```
html,body { margin:0px; padding:0px; height:100%; }
body, td { font-family: arial; font-size:12px; line-height:18px; color:#ffffff;}

body { background:#ffffff; }

/* links */
a, a:visited { color: #f67c38; text-decoration:underline; } 
a:hover { color: #f67c38; text-decoration:underline; } 
p { margin:0px; padding:0px; }
h1, .heading, .redheading { color:#eca007; font-size:18px; line-height:22px; font-weight:normal; margin:0px; padding:0px 0px 15px 0px; }
h2, .subheading, .sitemaphdrdiv { color:#e16a15; font-size:15px; line-height:18px; font-weight:normal; margin:0px; padding:5px 0px; }
/** template styles */
#background_image { overflow:hidden;}
#background_overlay {position: absolute;  top: 0;  left: 0;  z-index: 50;  width: 100%;  height:100%;  overflow-y:auto; } 
#background_overlay { position: absolute; top: 0; left: 0; z-index: 50; width: 100%; height:100%;  overflow-y:auto; background-attachment: fixed; }
#wrapper-blank-template { background: #000000; height:100%; }
#main-blank-template { padding: 14px 20px; }
#site { min-height:100%;  }
#header_wrapper { height:157px; }
#header { margin:0px auto; width:980px; height:157px; padding: 0px;}
#logo { margin:16px 0px 8px 0px; width:498px;  height: 120px; background: url(../images/pictures/large/system-files/logobg.png) no-repeat;}
#logo img{ padding:32px 0px 0px 61px; }
#topnav { width: 980px; height: 39px; background: url(../images/pictures/large/system-files/navbg.png) no-repeat; }
#navbar {position: relative; width: 980px; height: 29px;  }
#navbar a { text-decoration:none;}
#navbar ul{text-align: center;}
#menu-slide {height: 4px; width: 52px; background: url(../images/pictures/large/system-files/glowbg.png) no-repeat;  position: absolute; float: left; } 
#header_right { float:right; display:inline; width:311px; font-size:19px; line-height:36px; font-weight:bold; color:#1f1104; text-align:center; padding: 12px 0px 12px 0px;  }
#body_wrapper { padding-bottom:90px; } /* padding bottom matches height of the footer + padding */
#body { margin:0px auto; width:980px; }
#home_sec_1 {height: 216px; width: 980px; background: url(../images/pictures/large/system-files/section1.png) no-repeat center top; margin: 15px 0px 0px 0px; display:inline-block;}
#banner_left {width: 493px; height: 199px; margin: 9px 0px 9px 15px; float: left; display:inline-block;}
#banner_right {width: 453px; height: 199px; margin: 9px 0px 5px 5px; float: left; display:inline-block; }
.avert {height: 65px; width: 448px; padding-top: 0px; border-bottom: dashed 1px; border-spacing: 3px; border-bottom-color: #635c54; position: relative;}
.checklinks {float: right; bottom: 35px; position: absolute; float: right; bottom: 2px; right: 0px; }
.checklinks a{text-decoration: none;}
.avert img{ float:left; padding-right: 10px;}
.avert h2{ padding: 3px;}
.adfirst{padding-top: 0px;}
.adlast{border-bottom: 0px;}
#home_sec_2 {height: 216px; width: 980px; background: url(../images/pictures/large/system-files/section2.png) no-repeat center top; margin: 15px 0px 0px 0px; padding: 5px; text-decoration: none;}
#home_sec_2 h2 { padding-left: 12px;}
#home_sec_2 p { padding-top: 0px;} 
.home_sec_2_img{ padding:3px;float: left; }
.home_sec_2_img_1{ padding-left: 12px;}
#home_sec_3 { height: 216px; width: 980px; background: url(../images/pictures/large/system-files/section3.png) no-repeat center top; margin: 15px 0px 0px 0px; display: inline-block; padding: 5px; }
#home_sec_3 a, a:hover{text-decoration:none; color:#ffffff}
.liist-one{width: 315px; display: inline-block; margin: 0px;}
.liist-one ul{list-style-image: url(../images/pictures/large/system-files/bullet.png); line-height: 30px;font-size: 12px;}
#content_bg { margin-top:7px;  background:#000000 url(../images/pictures/large/system-files/bg_content.gif) repeat-y; }
#content_left { float:left; display:inline; padding:20px 0px; margin-left:20px; width:629px;}
#content_right { float:right; display:inline; padding:25px 0px; margin-right:25px; width:261px; }
#content_right h1 { color:#ffffff; margin:3px 0px 20px 0px; }
#content_right a, #content_right a:visited { color:#ffffff; text-decoration:none; font-weight:bold; }
#content_right a:hover { color:#ffffff; text-decoration:underline; font-weight:bold; }
#footer_wrapper { position:fixed; bottom:0px; height:37px; background: -moz-linear-gradient(top,  rgba(42,42,42,0.54) 0%, rgba(42,42,42,0.54) 1%, rgba(6,6,6,1) 100%); /* ff3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(42,42,42,0.54)), color-stop(1%,rgba(42,42,42,0.54)), color-stop(100%,rgba(6,6,6,1))); /* chrome,safari4+ */
background: -webkit-linear-gradient(top,  rgba(42,42,42,0.54) 0%,rgba(42,42,42,0.54) 1%,rgba(6,6,6,1) 100%); /* chrome10+,safari5.1+ */
background: -o-linear-gradient(top,  rgba(42,42,42,0.54) 0%,rgba(42,42,42,0.54) 1%,rgba(6,6,6,1) 100%); /* opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(42,42,42,0.54) 0%,rgba(42,42,42,0.54) 1%,rgba(6,6,6,1) 100%); /* ie10+ */
background: linear-gradient(to bottom,  rgba(42,42,42,0.54) 0%,rgba(42,42,42,0.54) 1%,rgba(6,6,6,1) 100%); /* w3c */
filter: progid:dximagetransform.microsoft.gradient( startcolorstr='#8a2a2a2a', endcolorstr='#060606',gradienttype=0 ); /* ie6-9 */
width:100%; color:#ffffff; } /* padding bottom matches height of the footer + padding */
#footer { margin:0px auto; width:980px; font-family:verdana; font-size:10px; line-height:40px; color:#ffffff; }
#footer_left { float:left; }
#footer_right { float:right; padding-right: 5px; }
#footer a, #footer a:visited { color:#ffffff; text-decoration:none; }
#footer a:hover { color:#ffffff; text-decoration:underline; } 
```

我不确定如何将所有脚本放在这里，我该怎么做才能让你们看到页面？希望这是对的。 *我是一个完整的初学者，所以如果我做错了，请告诉我* 哦，是的！当我单击页面上的链接时，滑块会向页面一侧射击一秒钟，然后转到正确的位置，再次非常卡住

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:04:32.953

问题1：按以下顺序在您的脑海中包含项目：

1.  元编码
2.  `<title>`标签
3.  其他元标记
4.  内联`<script>`或`<style>`标签
5.  对 CSS 文件的引用
6.  对 JS 文件的引用

一个例外是 IE 特定的 CSS 需要放在所有其他 CSS*之后*

问题 2 和 3：如果未在 CSS 中定义所有尺寸，则当您更改页面的缩放比例时，某些浏览器会开始表现得很奇怪。例如，`.checklinks`在你的 CSS 中。

其他：

1.  CSS不应`;`在最后一个属性之后
2.  制作一个 JS 文件，而不是将其内联在头部。也尽可能组合脚本，除了*始终*将 jQuery 和其他库分开。

# c# - 以 ^7 结尾的字符串

> ID：13444260
> 
> 赞同：0
> 
> 时间：2012-11-18T20:29:45.760
> 
> 标签：c#, sockets, color-codes, quake

我使用 udp 套接字和字节数组在 C# 中向 quake 3 服务器发出 rcon 请求以进行发送和接收。

一切正常，除了当我请求服务器状态时，玩家名称字符串全部由 ^7 终止，如下所示：DeathMaster^7。

rcon 命令返回的其他字符串都没有这个问题，所以我对可能出现的问题感到困惑。

如果你知道，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:36:04.513

您的代码没有任何问题。

`^7`是一种颜色代码，用于玩家更改他们的名字在屏幕文本中出现时的颜色。在这种情况下，`^7`将名称设置为白色。

如果您想自己测试，请连接到服务器并将您的名称更改为如下所示：`^3|SO|^7JonSkeet`您将看到一个具有多种颜色的名称。

许多游戏都是基于 Quake3 引擎构建的，因此它们也使用类似的系统来为名称着色。

[Quake3的颜色代码](http://www.wikihow.com/Color-Your-Name-in-Quake-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:36:44.523

它可以是来自db的真实姓名。并且您可以在循环请求中重写（删除最后 2 个字符）的名称。

# javascript - 对 XMLHttpRequest 数据使用数学（仍然不明白）

> ID：13444261
> 
> 赞同：0
> 
> 时间：2012-11-18T20:29:54.967
> 
> 标签：javascript, xml, xmlhttprequest

有人问我是否可以使用一些表单数据并以 HTML 格式呈现。

我需要将 LOADS 数据/值相加并将其乘以 RATE 数据/值，我认为这会起作用，但它在我的浏览器中没有显示任何内容？

我哪里错了？

我是 JavaScript 新手，我有 HTML/CSS 技能。我知道 jQuery 可能是做这类事情的最好方法，但我不知道。

感谢 Kolink 昨天告诉我使用 textContent 或 innerText 并使用 (parseInt 或 parseFloat ) 转换为数字，但仍然难倒:-(

```
<html>
<body>

<script>
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","xmltest.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

var i;
// array loads data from xml//
var data = [xmlDoc.x[1].getElementsByTagName("RATE").innerText, xmlDoc.x[1].getElementsByTagName("LOADS").innerText];

// Loop cycles through array converts to numbers, writes array value //
for (i=0;i<data.length;i++){
    parseFloat(data[i]);
    document.write("<tr ><td>");
    document.write(data[i]);
    document.write("</td><tr>");
}
// data array multipled//
var total = (data[0] * data[1])

{ 
  document.write("<tr ><td>");
  document.write(total);
  document.write("</td><tr>");
  }

</script>

</body>
</html>

xml

XML file

<MULTILOAD_TICKET>
<TICKET>
<DATE>12/11/12</DATE>
<ADDRESS>123 FAKE STREET</ADDRESS>
<RATE>300</RATE>
<LOADS>3</LOADS>
<CUSTOMER>Columbia Ales</CUSTOMER>
<ORDERID>BBKHJ1001</ORDERID>
<DRIVER>BOB</DRIVER>
<VEHICAL_REG>UJ78 JHE</VEHICAL_REG>
<MATERIAL>SPOIL</MATERIAL>
<SIG>URL</SIG>
</TICKET>

<TICKET>
<DATE>12/11/12</DATE>
<ADDRESS>123 FAKE STREET</ADDRESS>
<RATE>300</RATE>
<LOADS>6</LOADS>
<CUSTOMER>Columbia Ales</CUSTOMER>
<ORDERID>BBKHJ1001</ORDERID>
<DRIVER>JACK</DRIVER>
<VEHICAL_REG>EU78 JHD</VEHICAL_REG>
<MATERIAL>SPOIL</MATERIAL>
<SIG>URL</SIG>
</TICKET>

<TICKET>
<DATE>15/11/12</DATE>
<ADDRESS>123 FAKE STREET</ADDRESS>
<RATE>300</RATE>
<LOADS>5</LOADS>
<CUSTOMER>Columbia Ales</CUSTOMER>
<ORDERID>BBKHJ1001</ORDERID>
<DRIVER>BOB</DRIVER>
<VEHICAL_REG>UJ78 JHE</VEHICAL_REG>
<MATERIAL>SPOIL</MATERIAL>
<SIG>URL</SIG>
</TICKET>

</MULTILOAD_TICKET> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:17:59.857

在这里，尝试阅读此[https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)。您必须侦听 xmlHttpRequest 的 readystate 更改事件，当它成功时，您就可以解析 XML。

# objective-c - 我可以像对待常规 NSObject 一样对待 NSManagedObject 吗？

> ID：13444262
> 
> 赞同：3
> 
> 时间：2012-11-18T20:30:03.520
> 
> 标签：objective-c, ios, core-data, nsmanagedobject, nsobject

我是新手`core data`，我正在努力了解如何使用`NSManagedObjects`. 基本上我有几个我打算使用存储的对象`core data`（它们彼此有关系）。

在查看核心数据之前，我编写了一个由 3 组成的基本模型`NSObjects`，现在我创建了一个并从这个模型`core data model`生成了 3 。`NSManagedObjects`我现有的 3 个逻辑`NSObjects`（例如，指定的初始化程序和专门的 getter 和 setter）中有一些我仍然想使用的逻辑。

我的问题是我是否可以将逻辑从 3`NSObjects`直接转移到 3`NSManagedObjects`然后像在我的原始设计中那样使用它们（还有能够轻松持久化它们的额外好处），或者我是否需要将两者都保留`NSObjects`为以及`NSManagedObject`.

请有人就最佳设计实践提出建议，我想让我的代码尽可能干净和结构良好。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T20:36:42.783

由于`NSManagedObject`继承自`NSObject`，因此如果您只是将自定义类的超类从`NSObject`to更改为 - 就不会失去功能`NSManagedObject`- 前提是您没有与`NSManagedObject`. 这样您就不必保留原始类，从而使代码更清晰，逻辑更简单。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T00:17:38.880

当我必须为 NSManagedObject 添加额外功能时，我会创建类别并将其保存在单独的文件中，因为当我修改 .xcdatamodeld 文件时，我通常会覆盖 NSManagedObject 子类，而不是手动更改更新的文件。

报价+本地化.h：

```
#import "Offer.h"
@interface Offer (Localized)
- (NSString *) localizedPrice;
@end 
```

报价+本地化.m：

```
@implementation Offer (Localized)

- (NSString *) localizedPrice;
{
    if ( self.price > 0 ) {
        return [NSString stringWithFormat:NSLocalizedString(@"Price: %d", nil), self.price];
    } else {
        return NSLocalizedString(@"Free", nil);
    }
}

@end 
```

# ruby-on-rails - AWS S3，缺少回形针：bucket 选项

> ID：13444264
> 
> 赞同：18
> 
> 时间：2012-11-18T20:30:26.900
> 
> 标签：ruby-on-rails, heroku, amazon-s3

我正在尝试在 Heroku 上使用 Paperclip 和 SWS S3 让用户上传图像。

我没有将凭据存储在 yml 文件中。我已按照 Heroku 页面上的说明进行操作： [https ://devcenter.heroku.com/articles/paperclip-s3](https://devcenter.heroku.com/articles/paperclip-s3)

但是，当我尝试运行我的应用程序并上传图片时，我收到了这条消息：

```
missing required :bucket option
Rails.root: /Users/scottsipiora/Sites/clycss

Application Trace | Framework Trace | Full Trace
app/controllers/instructors_controller.rb:63:in `block in update'
app/controllers/instructors_controller.rb:62:in `update' 
```

这些说明没有提到任何关于在我的控制器中进行更改的内容。我已经看到一些例子告诉我输入如下内容：

在我的模型中，我有以下代码：

```
class Instructor < ActiveRecord::Base
  attr_accessible :bio, :hometown, :name, :school, :sort_order, :started_sailing, :started_teaching, :photo
  has_attached_file :photo, styles: {
    thumb: '100x100>',
    square: '200x200#',
    medium: '300x300>'
  }
end 
```

在我的 production.rb 中，我有（显然用模拟凭据替换了我的真实凭据）：

```
 config.paperclip_defaults = {
    :storage => :s3,
    :s3_credentials => {
      :bucket => ENV['bucket name'],
      :access_key_id => ENV['key_id'],
      :secret_access_key => ENV['access_key']
    }
  } 
```

我还为生产和开发创建了单独的存储桶，这样事情就更干净了。

有任何想法吗？我比较新，这应该很容易。

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-18T04:24:56.787

我想你可能犯了和我一样的错误。在您的 production.rb 文件中，不要编辑文本以添加您的特定 S3 密钥。只需按照教程中列出的方式直接复制粘贴文本即可。

```
#production.rb
config.paperclip_defaults = {
  :storage => :s3,
  :s3_credentials => {
    :bucket => ENV['AWS_BUCKET'],
    :access_key_id => ENV['AWS_ACCESS_KEY_ID'],
    :secret_access_key => ENV['AWS_SECRET_ACCESS_KEY']
  }
} 
```

然后，按照开发中心文章作者的描述设置环境变量 AWS_BUCKET、AWS_ACCESS_KEY_ID 和 AWS_SECRET_ACCESS_KEY。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-18T20:53:45.897

做`heroku config`检查你的环境变量。

通常它们都是大写字母并且有下划线而不是空格。

如果未设置，则应设置环境变量

```
heroku config:add BUCKET_NAME=my_bucket_name 
```

更新您的代码：

```
:bucket => ENV['BUCKET_NAME'], 
```

[Heroku 参考](https://devcenter.heroku.com/articles/config-vars)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-08T17:31:51.637

斯科特，对不起，如果这里有任何混淆。

我是开发中心文章的作者。如上所述，B 七需要在 Heroku 应用程序上设置 AWS Config Vars。

Heroku 最近更新了他们的文档 ( [https://devcenter.heroku.com/articles/config-vars#example](https://devcenter.heroku.com/articles/config-vars#example) ) 并且`set`比`add`往前更受欢迎。

```
 $ heroku config:set AWS_BUCKET=your_bucket_name
$ heroku config:set AWS_ACCESS_KEY_ID=your_access_key_id
$ heroku config:set AWS_SECRET_ACCESS_KEY=your_secret_access_key 

```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-05T21:43:45.660

确保在使用环境变量设置值时重新启动您选择的 CLI。不要像我一样使用 ENV 变量正确设置 Paperclip 和 AWS，然后在 Google 上浪费大量时间，只是通过退出并重新打开终端来解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-04T08:33:10.697

*   将这一行插入 schema.rb 表“instructors”

> ```
> create_table "instructors" do |t|
>     ...
>     t.string   "bucket"
> end 
> ```

*   添加到控制器`@instructor[:bucket] = ENV['S3_BUCKET_NAME']`
*   运行“rake db:setup”

# c# - 在数据库中保存datagridview新列

> ID：13444266
> 
> 赞同：0
> 
> 时间：2012-11-18T20:30:32.187
> 
> 标签：c#, sql-server, datagridview

我在 c# windows 应用程序中以编程方式创建新列。

```
for (int i = 0; i < 10; i++)
{
    dataGridView1.Columns.Add(string.Format("colmun{0}", i), string.Format("number {0}", i));
} 
```

如何将这些列保存在数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:28:05.217

这可能是很长的路要走，但是...

```
string myColumnName = string.Empty;
string myDataType = string.Empty;

SqlConnection myConnection = new SqlConnection("put your database connection string here");
myConnection.Open(); //you might have to put this inside the foreach loop

foreach(DataGridViewColumn myColumn in dataGridView1.Columns)
{
    myColumnName = myColumn.Name;
    myDataType = myColumn.ValueType.ToString();

if(myDataType.Contains("int"))
{
    myDataType = "int NULL";
}

if(myDataType.Contains("string"))
{
    myDataType = "varchar(255) NULL";
}

SqlCommand myCommand = new SqlCommand("alter table [put your table name here] add [" + myColumnName + "] " + myDataType);
myCommand.Connection = myConnection;
myCommand.ExecuteNonQuery();
}

myConnection.Close(); 
```

# android - 如何链接动画api10？

> ID：13444272
> 
> 赞同：0
> 
> 时间：2012-11-18T20:31:06.453
> 
> 标签：android, api, animation

```
@Override
 public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.g_out);

        g = (ImageView)findViewById(R.id.gout);
        startService(new Intent(this, MyService2.class));

        SceneAnimation come = new SceneAnimation(g, out,duration);
        SceneAnimation circled = new SceneAnimation(g, circled,durationc);

       come.play(1);

       circled.play(1);

    }

}

class SceneAnimation {
public int x;
public ImageView mImageView;
public int[] mFrameRess;
public int[] mDurations;
public int mDuration;

public int mLastFrameNo;
public long mBreakDelay;

 public SceneAnimation(ImageView pImageView, int[] pFrameRess, int[] pDurations)
 {

    mImageView = pImageView;
    mFrameRess = pFrameRess;
    mDurations = pDurations;
    mLastFrameNo = pFrameRess.length - 1;

    play(1);
   }

    public SceneAnimation(ImageView pImageView, int[] pFrameRess, int pDuration){
    mImageView = pImageView;
    mFrameRess = pFrameRess;
    mDuration = pDuration;
    mLastFrameNo = pFrameRess.length - 1;

    mImageView.setImageResource(mFrameRess[0]);

    playConstant(1);
   }

    public SceneAnimation(ImageView pImageView, int[] pFrameRess, int pDuration, long pBreakDelay){            
    mImageView = pImageView;
    mFrameRess = pFrameRess;
    mDuration = pDuration;
    mLastFrameNo = pFrameRess.length - 1;
    mBreakDelay = pBreakDelay;

    mImageView.setImageResource(mFrameRess[0]);
    playConstant(1);
}

   public void play(final int pFrameNo)
{

    mImageView.postDelayed(new Runnable(){
        public void run() {

            mImageView.setImageResource(mFrameRess[pFrameNo]);
            if(pFrameNo == mLastFrameNo)
                {
                return;}
            else
                play(pFrameNo + 1);
        }
    }, mDurations[pFrameNo]);
}

public void playConstant(final int pFrameNo){
    mImageView.postDelayed(new Runnable(){
        public void run() {                    
            mImageView.setImageResource(mFrameRess[pFrameNo]);

            if(pFrameNo == mLastFrameNo)
                playConstant(0);
            else
                playConstant(pFrameNo + 1);
        }
    }, pFrameNo==mLastFrameNo && mBreakDelay>0 ? mBreakDelay : mDuration);
}

}; 
```

我正在寻找解决方案，让 onCreate() 中的 2 个 SceneAnimation() 一个接一个地播放，它们同时播放，一个比另一个长，所以第二个先播放，然后第一个播放第二个结束的帧在哪里，我听说过 AnimationListener 但我不知道如何将它合并到要收听的类中，我将不胜感激演练或代码示例和解释我对此很陌生，谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:50:28.163

其实很简单。创建一个 Animation 实例并将 AnimationListener 附加到它。在 onAnimationEnd 你开始你的第二个动画。瞧，两个按顺序执行的动画。

```
 Animation firstAnimation = new TranslateAnimation(getApplicationContext(), null);
    firstAnimation.setAnimationListener(new Animation.AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) { 
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            Animation secondAnimation = new TranslateAnimation(getApplicationContext(), null);
            secondAnimation.start();
        }
    });

    firstAnimation.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:39:42.383

```
import android.widget.ImageView;

class SceneAnimation {
public int x;
public ImageView mImageView;
public int[] mFrameRess;
public int[] mDurations;
public int mDuration;

public int mLastFrameNo;
public long mBreakDelay;

private AnimationListener mAnimationListener;

public SceneAnimation( ImageView pImageView, int[] pFrameRess, int[] pDurations ) {

mImageView = pImageView;
mFrameRess = pFrameRess;
mDurations = pDurations;
mLastFrameNo = pFrameRess.length - 1;

play( 1 );
}

public SceneAnimation( ImageView pImageView, int[] pFrameRess, int pDuration ) {
mImageView = pImageView;
mFrameRess = pFrameRess;
mDuration = pDuration;
mLastFrameNo = pFrameRess.length - 1;

mImageView.setImageResource( mFrameRess[0] );

playConstant( 1 );
}

public SceneAnimation( ImageView pImageView, int[] pFrameRess, int pDuration, long     pBreakDelay ) {
mImageView = pImageView;
mFrameRess = pFrameRess;
mDuration = pDuration;
mLastFrameNo = pFrameRess.length - 1;
mBreakDelay = pBreakDelay;

mImageView.setImageResource( mFrameRess[0] );
playConstant( 1 );
}

public void setAnimationListener(AnimationListener listener){
this.mAnimationListener = listener;
}

public void play( final int pFrameNo ) {

mImageView.postDelayed( new Runnable() {
    public void run() {

        mImageView.setImageResource( mFrameRess[pFrameNo] );
        if ( pFrameNo == mLastFrameNo ) {
            return;
        } else
            play( pFrameNo + 1 );

        // Callback when animation ends.
        if( mAnimationListener != null ){
            mAnimationListener.onAnimationEnd();
        }
    }
}, mDurations[pFrameNo] );
}

public void playConstant( final int pFrameNo ) {
mImageView.postDelayed( new Runnable() {
    public void run() {
        mImageView.setImageResource( mFrameRess[pFrameNo] );

        if ( pFrameNo == mLastFrameNo )
            playConstant( 0 );
        else
            playConstant( pFrameNo + 1 );

        // Callback when animation ends.
        if( mAnimationListener != null ){
            mAnimationListener.onAnimationEnd();
        }
    }
}, pFrameNo == mLastFrameNo && mBreakDelay > 0 ? mBreakDelay : mDuration );
}

public static interface AnimationListener {
public void onAnimationEnd();
// You can add onAnimationStart(), and do the same thing like onAnimationEnd.
}
}; 
```

# java - 我的android程序没有重播

> ID：13444274
> 
> 赞同：-1
> 
> 时间：2012-11-18T20:31:40.920
> 
> 标签：java, android, html, android-layout, samsung-mobile

好吧，我已经让这个程序接收短信和自动重播，但它接收但不重播这是我的 Reciver class.java

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class Reciving  extends BroadcastReceiver{
static String from;
static String body;

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method s
      //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String str = "";            
    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
         from =   str +=  "SMS from " + msgs[i].getOriginatingAddress();              
            str += " :";
       body =  str += msgs[i].getMessageBody().toString();
            str += "\n";

        }
        //---display the new SMS message---
        Toast.makeText(context, str, Toast.LENGTH_LONG).show();
       // ret = str;
        SendGlass obj = new SendGlass();
        //   int tos =  Integer.valueOf(body);
         //  obj.Decision(from, tos);

        if (intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED"))
        {
        Main_Activity obj = new Main_Activity();

       obj.sms(from, body1);

        }
    else{

        }    

    }
}
} 
```

我的短信发送课程

```
import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.telephony.SmsManager;

public class SendGlass extends Activity {
static String REPLAYS1,REPLAYS2;
/** public void databaser()
{
    SQLiteDatabase db = openOrCreateDatabase("TEST", MODE_PRIVATE, null); 
    Cursor c = db.rawQuery("SELECT REPLAYS FROM Rtm WHERE ID = 1 ",null);
    c.moveToFirst();
    REPLAYS1 = c.getString(c.getColumnIndex("REPLAYS"));
    c = db.rawQuery("SELECT REPLAYS FROM Rtm WHERE ID = 2", null);
    c.moveToFirst();
    REPLAYS2 = c.getString(c.getColumnIndex("REPLAYS"));
    c.moveToFirst();
    db.close();
    c.close();

}

public void Decision(String phone ,int mesage )
{
    String phonenum = String.valueOf(mesage); 
    switch(mesage)
    {
    case 1:
        sms(phonenum, "hello world1");
        break;

    case 2:
        sms(phonenum, "hello world2");
        break;
    default:
        sms(phonenum, "defaulter");
        break;
    }

} **/

public void sms (String phone,String Sms )
{

    String phoneNo = phone;
    String sms = Sms;

    SmsManager  smsManager = SmsManager.getDefault();
    smsManager.sendTextMessage(phoneNo, null, sms, null, null);
}

} 
```

我的清单.xml

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
   package="dom.example.dbfinal"
  android:versionCode="1"
   android:versionName="1.0" >

 <uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS"/>
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Screen1"
        android:label="@string/title_activity_screen1" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Screen2"
        android:label="@string/title_activity_screen2" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Screen3"
        android:label="@string/title_activity_screen3" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".DtaBase"
        android:label="@string/title_activity_dta_base" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name=".Reciving" >
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" > 
           </action>     
        </intent-filter>
    </receiver>
</application> 
```

谁能告诉我当短信接收但不重播时它显示吐司的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:39:57.240

永远不要做`Main_Activity obj = new Main_Activity();`Activity 应该只由操作系统处理，创建一个实用程序类。

`onRecieve`不保证在您的应用程序 UI 线程上尝试：

尝试使用显式设置 Looper 的处理程序：

```
final SmsManager smsManager = SmsManager.getDefault();
Handler h = new Handler(Looper.getMainLooper());
    h.post(new Runnable()
    {

        @Override
        public void run()
        {
            // Check that Your number is formatted correclty and that your body is LESS than 140 chars!
            smsManager.sendTextMessage("4412345123456", null, "", null, null);
        }
    }); 
```

# ruby - 如何安装rubygems？

> ID：13444278
> 
> 赞同：0
> 
> 时间：2012-11-18T20:32:15.567
> 
> 标签：ruby, rubygems, rvm, homebrew

我在 Ruby、Gems、RVM 等所有方面都遇到了一些严重的问题。我正在尝试安装 lolcommits 只是为了获得一些 git 提交的乐趣。如果我运行：

```
gem install lolcommits 
```

它发回一条消息说：

```
ERROR:  While executing gem ... (Gem::FilePermissionError)
You don't have write permissions into the /Library/Ruby/Gems/1.8 directory. 
```

当然，我不知道这意味着什么。根据我收集到的信息，我的 Ruby 应该安装在`usr/local/bin`而不是安装到`/Library/Ruby/Gems/`. 我怎样才能解决这个问题？

我想我把我的 PATH 变成了一团糟，它看起来像：

```
/usr/local/bin:/usr/local/sbin:~/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/Users/jmakaila/.rvm/bin 
```

我`GEM_PATHS:`的是：

```
GEM PATHS: 
/Library/Ruby/Gems/1.8
/Users/jmakaila/.gem/ruby/1.8
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:49:19.487

我使用`rvm install 1.9.2`然后运行`gem install lolcommits`，它似乎运行良好。运行磁盘/权限验证以尝试修复我的`chmod`错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:35:53.780

您可以尝试使用以下命令安装具有管理员权限的 gem `sudo`：

```
sudo gem install xxxxx 
```

# asp.net - 从单独的目录访问图像

> ID：13444281
> 
> 赞同：0
> 
> 时间：2012-11-18T20:32:30.987
> 
> 标签：asp.net, html

我在 VS2010 中有一个解决方案，其中的图像目录位于 `<SolutionName/Styles/CustomerImages/SampleImage.jpg>`. 然后，我在以下目录中有一个单独的文件夹，其中包含一个页面 `<SolutionName/Pages/AdministrativePages/Admin.aspx">`。当直接在解决方案中访问图像时，即“SolutionName/samplepage.aspx”，它工作得很好，但是当我尝试从文件后面的“Admin.aspx”即“SolutionName/Pages/AdministrativePages/Admin.aspx”代码访问它们时，它不会不工作。从 samplepage.aspx 工作的代码是：

```
src = 'Styles/Customer Images/<%# Eval("Picture")> 
```

在 Admin.aspx 中不起作用的代码是：

```
image src = '~/Styles/Customer Images/<%# Eval("Picture") %>' 
```

我的印象是“〜”字符在使用时会进入根目录，但这不起作用。如果有人能告诉我在不同目录中引用 src 属性中文件的正确方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:36:26.247

使用服务器端 ASP.NET 图像控件来解决此问题。

```
<asp:Image runat="server" ImageUrl='~/Styles/Customer Images/<%# Eval("Picture") %>'/> 
```

# gcc - 在 GCC 程序集中对两个字符串调用 printf

> ID：13444283
> 
> 赞同：1
> 
> 时间：2012-11-18T20:32:50.907
> 
> 标签：gcc, assembly

我试图在 _format 字符串上调用 printf，但我得到一个错误，而不是打印出两个字符串。在添加 _printStr 函数之前，我能够让程序工作，所以我真的不确定为什么它不会打印出它们。我也可以单独打印出每个字符串，它工作正常（使用 12(%ebp) 和 16(%ebp)）。这是我的代码：

```
 .text
            .globl      _main
_string:    .ascii      "Hello\0" 
_string2:   .ascii      " World\0" 
_format:    .ascii      "%s %s\0"

_main: // push params, call fn, clear params, return 

            pushl      $_string2 
            pushl      $_string                 
            call      _printStr
            addl       $8, %esp
            ret

//function to print a string passed to it on the stack
_printStr:
            push        %ebp               # save old frame ptr
            movl        %esp, %ebp     # set frame ptr
            pushl       8(%ebp) 
            pushl       12(%ebp) 
            pushl       _format
            call _printf
            addl        $12, %esp          # clear params from stack
            leave
            ret 
```

感谢您的宝贵时间，感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:48:19.197

不要将未知字符串作为第一个参数传递给`printf`. 始终使用已知的格式说明符，如果可能，最好使用文字。如果要使用`printf`打印字符串，请执行以下操作：

```
_simpleformat:  .ascii      "%s\0" 
```

...

```
 pushl       8(%ebp)
                pushl       _simpleformat
                call _printf
                addl        $8, %esp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:38:42.670

您在 中缺少一个`$`标志`pushl _format`。它应该读取`pushl $_format`，因为您想传递它的地址。顺便说一句，你也以相反的顺序传递这两个词，它会打印`" World Hello"`. 此外，您缺少换行符，但有额外的空间。最后，将字符串常量放在该`.text`部分中并不是最佳做法。查看[运行中的固定版本](http://ideone.com/9vEgra)（注意我删除了一些 ideone 不需要的前导下划线，但可能在您的系统上需要）

# xsd - 如何让根元素只包含特定类型的多个子元素

> ID：13444287
> 
> 赞同：1
> 
> 时间：2012-11-18T20:33:49.377
> 
> 标签：xsd

我想编写一个 XML 文件，其中包含一个名为`appointment_list`. 此根节点应包含多个类型为 的子元素`appointment_type`。

我已经写了下面的架构，但我得到了错误：

> s4s-elt-must-match.1: 'appointments_list' 的内容必须匹配 (annotation?, (simpleType | complexType)?, (unique | key | keyref)*))。发现问题始于：元素。

我知道我应该使用它在消息中列出的令牌之一，但我不知道是哪一个。我是 XML 新手。我想要的是约会列表根元素包含多个子约会类型元素。我怎么做。谢谢 ：）

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs= "http://www.w3.org/2001/XMLSchema">

    <xs:simpleType name="priority">
        <xs:restriction base="xs:string">
            <xs:enumeration value="high"/>
            <xs:enumeration value="normal"/>
            <xs:enumeration value="low"/>
        </xs:restriction>
    </xs:simpleType>

    <xs:complexType name="appointment_type">
        <xs:sequence>
            <xs:element name="title" type="xs:string" minOccurs="1" />
            <xs:element name="description" type="xs:string" minOccurs="0"/>
            <xs:element name="appointment_date" type="xs:date" minOccurs="1"/>
            <xs:element name="appointment_time" type="xs:time" minOccurs="1"/>
            <xs:element name="appointment_priority" type="priority" minOccurs="0"/>
            <xs:element name="duration" minOccurs="0">
                <xs:simpleType>
                    <xs:restriction base="xs:integer">
                        <xs:minInclusive value="0"/>
                        <xs:maxInclusive value="24"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:element>
        </xs:sequence>
        <xs:attribute name="id" type="xs:positiveInteger" use="required"/>
    </xs:complexType>   

    <xs:element name="appointments_list">
            <xs:element name="appointment" type="appointment_type" maxOccurs="unbounded" />
    </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:41:37.120

`<xs:element>`包含元素的一个必须有一个（`<xs:complexType>`或`type`属性，其值为复杂类型 - 就像您的*`<appointment>`*元素一样）。

A`<xs:complexType>`必须有一个组，例如`<xs:sequence>`.

```
<xs:element name="appointments_list">
  <xs:complexType>   
    <xs:sequence>   
      <xs:element name="appointment" type="appointment_type" maxOccurs="unbounded" />
    </xs:sequence>   
  </xs:complexType>   
</xs:element> 
```

# javascript - facebook 之类的按钮不适用于fancybox

> ID：13444290
> 
> 赞同：0
> 
> 时间：2012-11-18T20:34:25.277
> 
> 标签：javascript, jquery, html, facebook, fancybox

我有一个带有fancybox的照片库，当fancybox在标题外打开时，会出现一个like按钮。问题是那行不通。

这是我的JS：

```
 $(".fancyboxi").fancybox({
     padding: 0,
                openEffect  : 'none',
                closeEffect : 'none',

                prevEffect : 'none',
                nextEffect : 'none',

                closeBtn  : true,
            helpers: {

                overlay: {

                       css: {'background-color': '#333'} 
                    },
                title : {
                    type: 'outside'
                }
            },

          beforeShow: function () {
            if (this.title) {
                var titulo=this.href;

                // Add tweet button
  this.title += '<a href="https://twitter.com/share" class="twitter-share-button" data-count="none" data-url="http://kingpollo.it/'+ titulo + '">Tweet</a>';

            // Add FaceBook like button
                this.title += '<iframe src="//www.facebook.com/plugins/like.php?href=http://kingpollo.it/'+ titulo + '&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:110px; height:23px;" allowTransparency="true"></iframe>';

            }
        },

        afterShow: function(){
             twttr.widgets.load();
        },
        nextEffect: 'fade',
        prevEffect: 'fade'

    }); // fancybox}); 
```

推特按钮正常工作。为什么fb按钮没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-21T17:17:36.347

```
// Add FaceBook like button
this.title += '<iframe src="//www.facebook.com/ 
```

That part of the code is missing the correct fb url.

```
// Add FaceBook like button
this.title += '<iframe src="http://www.facebook.com/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T07:09:48.157

输入 facebook 按钮的完整网址：

```
<a title="1st title" class="fancybox" href="/images/pic1_full.jpg">
<img alt="Photo number 1" src="images/pic1.jpg" 
```

不起作用，但是：

```
<a title="1st title" class="fancybox" href="http://www.yousite.com/images/pic1_full.jpg">
<img alt="Photo number 1" src="images/pic1.jpg" 
```

作品

# web-services - 如何在 WSDL 中声明 Object 返回类型

> ID：13444292
> 
> 赞同：1
> 
> 时间：2012-11-18T20:34:55.220
> 
> 标签：web-services, soap, wsdl

我正在努力理解如何定义一个允许返回可以在客户端上转换为真实对象的泛型类型 Object 的 WSDL。例如，对于 4 个不同的方法调用，我有一个返回类型 Object。这 4 种不同的方法在调用时具有不同的参数对象。（例如 CreatePerson(Person)、CreateAnimal(Animal) 等...）每个返回的 ResultObject 都有一个“Object”属性，该属性将包含操作的对象参数。（例如 CreatePerson(Person) 将返回 ResultObject.Object = Person，返回的 Person 对象将具有更新的属性，如 ID、一些时间戳等...）

我应该为每个对象只拥有一个 Result 对象吗？（例如 ResultPerson = CreatePerson()、ResultAnimal = CreateAnimal() 等...）

我必须在编码之前对 API 进行布局，所以感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:49:44.057

> 我应该`Result`为每个对象都有一个对象吗？（例如`ResultPerson = CreatePerson()`,`ResultAnimal = CreateAnimal()`等...）

绝对地！没有什么比强类型语言必须处理返回泛型的 API 更令人恼火的了`Object`。让你的 API**真的**很难使用的代价，你几乎没有得到任何好处。

不要对课程的激增感到不安。毕竟它们是由诸如`wsdl2`-something（例如`wsdl2java`）之类的工具创建的。如果您的所有结果都有一些共同的属性，请考虑使用一种抽象基类型（例如`Animal`）并进行扩展。这将使您的 API 变得更好。

# java - 在遵循有关 Spring Aspect Programming 的 JavaBrains 教程时，出现以下异常：

> ID：13444295
> 
> 赞同：10
> 
> 时间：2012-11-18T20:35:12.597
> 
> 标签：java, exception, spring-aop

我正在关注 Javabrains 的 spring aspect 编程教程。我专门在本教程中：http: [//javabrains.koushik.org/2011/08/spring-tutorial-27-writing-our-first.html](http://javabrains.koushik.org/2011/08/spring-tutorial-27-writing-our-first.html)我已将所需的库导入项目中，但没有收到任何警告IDE，但是当我运行代码时，出现以下异常：

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'triangle' defined in class path resource [spring.xml]: BeanPostProcessor before instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: org/aspectj/weaver/tools/PointcutDesignatorHandler
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:452)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
at org.koushik.javabrains.AopMain.main(AopMain.java:18)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.NoClassDefFoundError: org/aspectj/weaver/tools/PointcutDesignatorHandler
at org.springframework.aop.aspectj.annotation.ReflectiveAspectJAdvisorFactory.getPointcut(ReflectiveAspectJAdvisorFactory.java:145)
at org.springframework.aop.aspectj.annotation.ReflectiveAspectJAdvisorFactory.getAdvisor(ReflectiveAspectJAdvisorFactory.java:130)
at org.springframework.aop.aspectj.annotation.ReflectiveAspectJAdvisorFactory$1.doWith(ReflectiveAspectJAdvisorFactory.java:74)
at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:473)
at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:451)
at org.springframework.aop.aspectj.annotation.ReflectiveAspectJAdvisorFactory.getAdvisors(ReflectiveAspectJAdvisorFactory.java:70)
at org.springframework.aop.aspectj.annotation.BeanFactoryAspectJAdvisorsBuilder.buildAspectJAdvisors(BeanFactoryAspectJAdvisorsBuilder.java:109)
at org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator.findCandidateAdvisors(AnnotationAwareAspectJAutoProxyCreator.java:86)
at org.springframework.aop.aspectj.autoproxy.AspectJAwareAdvisorAutoProxyCreator.shouldSkip(AspectJAwareAdvisorAutoProxyCreator.java:107)
at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessBeforeInstantiation(AbstractAutoProxyCreator.java:278)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:880)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:852)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:446)
... 15 more
Caused by: java.lang.ClassNotFoundException: org.aspectj.weaver.tools.PointcutDesignatorHandler
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 28 more
Process finished with exit code 1 
```

我的类文件和spring.xml：

主类：

```
package org.koushik.javabrains;

import org.koushik.javabrains.service.ShapeService;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class AopMain {

    public static void main (String[] args) {

        ApplicationContext ctx = new ClassPathXmlApplicationContext("spring.xml");
        ShapeService shapeService = ctx.getBean("shapeService",ShapeService.class);
        System.out.println(shapeService.getCircle().getName());
    }
} 
```

形状服务类：

```
package org.koushik.javabrains.service;

import org.koushik.javabrains.model.Circle;
import org.koushik.javabrains.model.Triangle;

public class ShapeService {

    private Circle circle;
    private Triangle triangle;

    public Circle getCircle() {
        return circle;
    }

    public void setCircle(Circle circle) {
        this.circle = circle;
    }

    public Triangle getTriangle() {
        return triangle;
    }

    public void setTriangle(Triangle triangle) {
        this.triangle = triangle;
    }
} 
```

圈子类：

```
package org.koushik.javabrains.model;

public class Circle {

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

三角班：

```
package org.koushik.javabrains.model;

public class Triangle {

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

LoggingAspect 类：

```
package org.koushik.javabrains.aspect;

import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;

@Aspect
public class LoggingAspect {

    @Before("execution(public String getName())")
    public void loggingAdvice(){
        System.out.println("Advice run. Get Method called");
    }
} 
```

春天.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd
                      http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
                      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <aop:aspectj-autoproxy/>

    <bean name="triangle" class="org.koushik.javabrains.model.Triangle">
        <property name="name" value="triangle"/>
    </bean>

    <bean name="circle" class="org.koushik.javabrains.model.Circle">
        <property name="name" value="circle"/>
    </bean>

    <bean name="shapeService" class="org.koushik.javabrains.service.ShapeService"   autowire="byName"/>

    <bean name="loggingAspect" class="org.koushik.javabrains.aspect.LoggingAspect"/>

</beans> 
```

我已经阅读了教程页面上的评论，并尝试了不同的罐子，但它们似乎都不起作用。我总是以同样的例外告终。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-18T20:44:15.113

> 引起：java.lang.NoClassDefFoundError: org/aspectj/weaver/tools/PointcutDesignatorHandler

您必须添加[`aspectjweaver.jar`](http://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.7.1/aspectjweaver-1.7.1.jar)到您的 CLASSPATH。如何做到这一点完全取决于您的 IDE。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-07-29T19:25:24.977

如果使用 maven 添加此版本或您需要的任何版本：

```
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.8.6</version>
</dependency> 
```

# ruby - 如何在 Ruby 中获取 FTP 记录而不先保存文本文件并用它提供 CSV

> ID：13444298
> 
> 赞同：5
> 
> 时间：2012-11-18T20:35:41.407
> 
> 标签：ruby, csv, ftp

我已经使用 gettextfile 方法从 ftp 服务器获取记录，并处理给定块中的每条记录，最终将其放在其他地方。

该文件是一个 CSV 文件，我需要使用 CSV 继续它以获取标题和数据，并在一些工作后将其放在数据库中。由于我有许多不同的文件，我需要一个通用的方法。我不想将所有记录加载到内存或磁盘上，因为文件可能非常大！所以流会很好

一个想法是为 CSV 提供一个 io 对象，但我不知道如何使用 Net::FTP 来做到这一点。

我已经看到“http://stackoverflow.com/questions/5223763/how-to-ftp-in-ruby-without-first-saving-the-text-file”，但它适用于 PUT。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-24T14:37:46.467

Justin 提到的技术创建了一个[临时文件](http://ruby-doc.org/stdlib-2.0.0/libdoc/net/ftp/rdoc/Net/FTP.html#method-i-gettextfile)。

你可以使用[retrlines](http://ruby-doc.org/stdlib-2.0.0/libdoc/net/ftp/rdoc/Net/FTP.html#method-i-retrlines)：

```
 filedata = ''
   ftp.retrlines("RETR " + filename) do |block|
      filedata << block
   end 
```

或[retrbinary](http://ruby-doc.org/stdlib-2.0.0/libdoc/net/ftp/rdoc/Net/FTP.html#method-i-retrbinary)代替：

```
 filedata = ''
   ftp.retrbinary("RETR " + filename, Net::FTP::DEFAULT_BLOCKSIZE) do |block|
      filedata << block
   end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T20:05:44.287

我认为您是使用 gettextfile 解决问题的大部分方法。您可以将文件的一部分累积到一个`Array`.，然后在达到某个阈值时使用 CSV 处理它。这是一些未经测试的代码，一次处理十行：

```
current_line = 0
chunk = []

ftp.gettextfile('file.csv') do |line|
  chunk << line
  process_chunk!(chunk) if current_line % 10 == 0
  current_line += 1
end

process_chunk!(chunk) # Any remaining lines in final partial chunk

def process_chunk!(lines_in_chunk)
  # process partial chunk of lines as if it were the whole file
  lines_in_chunk = []
end 
```

这对我来说似乎是更简单的解决方案之一，但您也可以在生产者-消费者模型中使用多个 unix 进程（写入和读取 STDOUT）或 Ruby 线程来解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-15T07:09:21.460

我想出的解决方案是使用`IO.pipe`一个线程来迭代 FTP 文件中的文本行（其中一些可能是引号内的行片段）和`puts`IO 编写器的每一行。

在主线程中，我`CSV`基于 IO 读取器创建一个实例，并从中迭代解析的行。

```
require 'CSV'

def stream_ftp_csv_test(ftp, filename)
  read_io, write_io = IO.pipe

  fetcher = Thread.new do
    begin
      ftp.gettextfile filename do |line|
        write_io.puts line
      end
    ensure
      write_io.close
    end
  end

  csv = CSV.new(read_io, headers: :first_row)
  csv.each do |row|
    # Printing the row hashes here as an example.
    # You could yield each one to a given block
    # argument or whatever else makes sense.
    p row.to_h
  end

  fetcher.join
ensure
  read_io.close if read_io
end 
```

# php - PHP中fgets()函数的实现

> ID：13444303
> 
> 赞同：3
> 
> 时间：2012-11-18T20:36:05.933
> 
> 标签：php

我正在使用 Windows 操作系统和 PHP 新手。即我正在尝试在 php 文件中实现 php 函数 fgets() ：

```
$file = fopen("$DOCUMENT_ROOT/Chapter02/test.txt","r");

while(! feof($file))
  {
  echo fgets($file). "<br />";
  }

fclose($file); 
```

我创建了包含以下内容的 test.txt 文件：

> 你好，这是一个测试文件。
> 这里有三行。
> 这是最后一行。

例如来自[http://www.w3schools.com/](http://www.w3schools.com/)

.php 和 .txt 这两个文件都位于一个目录中：

C:/wamp/www/Chapter02/

但执行此 php 文件后，没有显示任何内容，应显示：

> 你好，这是一个测试文件。
> 这里有三行。
> 这是最后一行。

我想，我在路径“$DOCUMENT_ROOT/Chapter02/test.txt”中犯了一个错误，但我真的不知道错误在哪里......

我非常感谢您的帮助:)

亲切的问候，

伊万娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:38:28.247

可能的陷阱：

*   您的文档不存在（您的`$DOCUMENT_ROOT`变量可能未设置）
*   您的文档为空

fgets() 在所有主要 PHP 平台上的工作方式完全相同，所以我很确定您的问题在于文件的存在而不是实际的读取代码（看起来不错）

尝试 var_dump($DOCUMENT_ROOT) 并手动检查文件是否存在（使用 file_exists()）。这可能会发现错误。

顺便说一句，W3Schools 是一个可怕的学习网站，尽管我不想这么说。他们的许多信息要么已过时，要么已损坏，要么完全模棱两可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:42:49.517

更改`$DOCUMENT_ROOT`为`$_SERVER['DOCUMENT_ROOT']`。除非您`$DOCUMENT_ROOT`自己设置，否则您应该使用后者，它是从服务器配置中设置的。

# mongodb - 直接连接到主分片以访问 MongoDB 中的非分片集合

> ID：13444304
> 
> 赞同：2
> 
> 时间：2012-11-18T20:36:17.667
> 
> 标签：mongodb

如果我有一个包含一些分片和非分片集合的数据库。我可以直接连接到主分片以毫无问题地访问（包括读取和写入）非分片集合吗？我想这样做是因为我认为连接`mongos`只会降低访问非碎片集合的性能。

我已经尝试过了，它有效。但恐怕这里有一些我不知道的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T03:46:49.207

> 如果我有一个包含一些分片和非分片集合的数据库。我可以直接连接到主分片以毫无问题地访问（包括读取和写入）非分片集合吗？我想这样做是因为我认为连接到 mongos 只会降低访问 unshard 集合的性能。

一般来说，通过 连接`mongos`不应该对您的非分片集合产生显着的性能开销。

还值得注意的是，如果您的其他集合被分片，您的应用程序将无法为分片和非分片集合利用单个连接池，因此您必须在应用程序逻辑中管理它。

> 我已经尝试过了，它有效。但恐怕这里有一些我不知道的问题。

目前这种方法会起作用，因为未分片的集合总是存在于数据库的主分片上。

但是，请注意，跨分片分发非分片集合的工作正在进行中（请参阅MongoDB Jira 问题跟踪器中的[SERVER-939](https://jira.mongodb.org/browse/SERVER-939)）。当这种变化发生时，您不能再假设未分片的集合存在于主分片中，依靠`mongos`正确路由会更安全。

# javascript - 区分多组表格

> ID：13444306
> 
> 赞同：0
> 
> 时间：2012-11-18T20:36:29.390
> 
> 标签：javascript, jquery, html

我有一个看起来像这样的应用程序：

) 患者 X 的姓名旁边是一个标记为 Check In 的按钮。这是在服务器端记录的。

2) 单击 Check In 按钮后，用户会看到一个下拉菜单（替换初始按钮），其中包含用户可以选择的多个位置。从选择中选择位置后，服务器端将再次更新。

3）然后用户可能决定选择多个位置，重复步骤 2

4) 最后，当用户选择完位置后，他在用户在步骤 2 和 3 中单击位置的同一个选择中单击 Check Out 按钮，标题为 Check Out。单击此按钮后，它将被发送到 checkloc.php 并记录。

5) 最后，下拉菜单消失，出现 Checked Out 字样。

现在，问题是页面上有很多患者（患者 A、患者 B、C、D 等）。页面上有一名患者，该过程就像上面的步骤一样工作。

不幸的是，当您在页面上有多个患者时，如果您（例如）单击患者 A 旁边的签**入**按钮，则会出现两个下拉列表，一个用于患者 A（应该如此），一个用于患者 B，即使没有人点击过姓名旁边的“签入”按钮**。**

这是我的代码：

html:

```
<button class="checkIn" data-param="button_1">Check In</button>

<form method='post' class='myForm' action=''>
 <select name='locationSelect' class='locationSelect' data-param='location_1'>
  <option value="0">Select a location</option>
  <option value='1'>Exam Room 1</option>
  <option value='2'>Exam Room 2</option>
  <option value='3'>Exam Room 3</option>
  <option value='4'>Exam Room 4</option>
 </select>
</form>

<button class="checkOut" data-param="cbutton_1">Check Out</button>
<div class='finished' style='color:#ff0000;'>Checked Out</div>

<!--START SECOND SET-->

<button class="checkIn" data-param="button_2">Check In</button>

<form method='post' class='myForm' action=''>
 <select name='locationSelect' class='locationSelect' data-param='location_2'>
  <option value="0">Select a location</option>
  <option value='1'>Exam Room 1</option>
  <option value='2'>Exam Room 2</option>
  <option value='3'>Exam Room 3</option>
  <option value='4'>Exam Room 4</option>
 </select>
</form>

<button class="checkOut" data-param="cbutton_2">Check Out</button>
<div class='finished' style='color:#ff0000;'>Checked Out</div> 
```

和 javascript/jquery

```
 <script type="text/javascript">
$(document).ready(function() {
$('.locationSelect').hide();  // Hide all Selects on screen
$('.finished').hide();        // Hide all checked Out divs on screen
$('.checkOut').hide();

$('.checkIn').click(function() {
    var $e = $(this);
    var data = $e.data("param").split('_')[1] ;
    // gets the id  of button  (1 for the first button)
    // You can map this to the corresponding button in database...
    $.ajax({
        type: "POST",
        url: "checkin.php",
        // Data used to set the values in Database
        data: { "checkIn" : $(this).val(), "buttonId" : data},
        success: function() {
            // Hide the current Button clicked
            $e.hide();
            // Get the immediate form for the button
            // find the select inside it and show...
            $('.locationSelect').show();
            $('.checkOut').show();
        }
    });
});

$('.locationSelect').change(function() {
    $e = $(this);
    var data = $e.data("param").split('_')[1] ;
    // gets the id  of select (1 for the first select)
    // You can map this to the corresponding select in database...
    $.ajax({
        type: "POST",
        url: "changeloc.php",
        data: { "locationSelect" : $(this).val(), "selectid" : data},
        success: function() {
            // Do something here
        }
    });
});

$('.checkOut').click(function() {
    var $e = $(this);
    var data = $e.data("param").split('_')[1] ;
    // gets the id  of button  (1 for the first button)
    // You can map this to the corresponding button in database...
    $.ajax({
        type: "POST",
        url: "checkout.php",
        // Data used to set the values in Database
        data: { "checkOut" : $(this).val(), "buttonId" : data},
        success: function() {
            // Hide the current Button clicked
            $e.hide();
            $('.locationSelect').hide();
            // Get the immediate form for the button
            // find the select inside it and show...
            $('.finished').show();
        }
    });
});

});
</script> 
```

感谢您提供的所有帮助，如果您需要更多详细信息或说明，请询问！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:41:47.453

问题是您的选择器`$('.locationSelect')`获取了该类的*所有元素。*您需要一种方法将其缩小到正确的范围。

最简单的方法是稍微更改您的 html 以将每组控件包装在其自己的 div 或其他容器中（可能在 ul 中的 li 元素中）：

```
<div class="container">
    <button class="checkIn" data-param="button_1">Check In</button>    
    <form method='post' class='myForm' action=''>
     <select name='locationSelect' class='locationSelect' data-param='location_1'>
      <option value="0">Select a location</option>
      <option value='1'>Exam Room 1</option>
      <option value='2'>Exam Room 2</option>
      <option value='3'>Exam Room 3</option>
      <option value='4'>Exam Room 4</option>
     </select>
    </form>    
    <button class="checkOut" data-param="cbutton_1">Check Out</button>
    <div class='finished' style='color:#ff0000;'>Checked Out</div>
</div> 
```

然后你可以这样做：

```
 // Hide the current Button clicked
        $e.hide();
        // get the current button's containing div
        var $container = $e.closest("div.container");
        // Get the immediate form for the button
        // find the select inside it and show...
        $container.find('.locationSelect').show();
        $container.find('.checkOut').show(); 
```

...在结帐点击处理程序中也是如此。

请注意，如果每组控件已经在其自己的容器中，则不需要添加新的 div 容器，例如，如果您已经将它们放在单个`<li>`元素或表格单元格或其他东西中，那么您可以使用`$container = $e.closest("li")`...

# algorithm - 用于平铺任意集合多骨牌的算法是一些有限空间区域？

> ID：13444311
> 
> 赞同：0
> 
> 时间：2012-11-18T20:37:07.877
> 
> 标签：algorithm, tiling

是否存在可以在有限区域内平铺任意一组多骨牌的有效（即 P 完全）算法？您能否指出一些详细说明该主题的网站？

在网络上搜索只返回与无限空间或重复使用特定多米诺骨牌相关的结果。我正在寻找一个可以处理任何集合，每个元素只使用一次的。

谢谢

（我对一般算法感兴趣。任意形状的空间，仅平移和旋转。但这些要求的微小变化也会引起我的兴趣）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:12:07.090

请查看以下关于[**具有有界纵横比的 Treemaps**](http://www.mpi-inf.mpg.de/~vdweele/download/treemaps.pdf)算法的硕士论文。

# r - 根据其他两个值对向量进行归一化

> ID：13444312
> 
> 赞同：3
> 
> 时间：2012-11-18T20:37:15.233
> 
> 标签：r, plyr

我有以下数据框

```
df <- data.frame(
  Type=rep(LETTERS[1:6],3),
  Level=rep(1:3,each=6),
  Value=1:18) 
```

我想添加2列，

*   添加 'r1'，Value 与同一级别的 Type A 值的比率
*   添加 'r2'，Value 与同一类型的 Level 1 值的比率

以结束

```
> df
   Type Level Value       r1   r2
1     A     1     1 1.000000  1.0
2     B     1     2 2.000000  1.0
3     C     1     3 3.000000  1.0
4     D     1     4 4.000000  1.0
5     E     1     5 5.000000  1.0
6     F     1     6 6.000000  1.0
7     A     2     7 1.000000  7.0
8     B     2     8 1.142857  4.0
9     C     2     9 1.285714  3.0
10    D     2    10 1.428571  2.5
11    E     2    11 1.571429  2.2
12    F     2    12 1.714286  2.0
13    A     3    13 1.000000 13.0
14    B     3    14 1.076923  7.0
15    C     3    15 1.153846  5.0
16    D     3    16 1.230769  4.0
17    E     3    17 1.307692  3.4
18    F     3    18 1.384615  3.0 
```

我尝试了几种`apply`类型的方法，但无法得到它。我最终得到了一个双`for`循环：

```
for(i in unique(df$Type)) {
  for(j in unique(df$Level)) {
    df$r1[df$Level==j & df$Type==i] <- df$Value[df$Level==j & df$Type==i]/df$Value[df$Level==j & df$Type=="A"]
    df$r2[df$Level==j & df$Type==i] <- df$Value[df$Level==j & df$Type==i]/df$Value[df$Level==1 & df$Type==i]
  }
} 
```

这还不错，但我想知道是否有一种拆分应用组合方法可以做到这一点，也许在`plyr`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:41:15.853

既然您提出了`plyr`解决方案：

```
df <- ddply(df, .(Level), transform, r1 = Value / Value[Type == "A"])
df <- ddply(df, .(Type),  transform, r2 = Value / Value[Level == 1]) 
```

我认为读起来很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:12:17.490

首先创建向量，然后将它们绑定到数据框：

```
 r1 <- df$Value / df$Value[rep(df$Value[df$Type=='A'], each=length(levels(df$Type)))]
 r2 <- df$Value / df$Value[seq_along(levels(df$Type))] 
```

这假设每个“级别”都重复“类型”，如您的示例中所示。

这是适当的 cbind() 调用：

```
cbind(df, r1, r2) 
```

# knockout.js - 淘汰嵌套对象和括号

> ID：13444315
> 
> 赞同：6
> 
> 时间：2012-11-18T20:37:32.590
> 
> 标签：knockout.js

有几件事我不明白。根据 KO 文档（以及关于 SO 的许多帖子），在查询和编写 observable 时应该使用括号。但是在绑定子属性时，在我看来，是否使用括号并不重要。

```
<span data-bind="text: selectedMessage() && selectedMessage().message().subject()"></span>
<span data-bind="text: selectedMessage() && selectedMessage().message().subject"></span> 
```

= 都返回正确的值。

谁能向我解释这是为什么？

小提琴：http: [//jsfiddle.net/viktorb/DKg74/](http://jsfiddle.net/viktorb/DKg74/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T21:27:15.207

如果绑定值是一个 observable，KO 会为你“解包”它，所以你不必自己用括号解包（或调用 ko.utils.unwrapObservable）。

在您的第二个示例中，绑定值为：`selectedMessage() && selectedMessage().message().subject`。当这个表达式对`subject`属性求值时，KO 看到求值的值是一个可观察的值，因此它会为您解开它。（在内部这可能只是对 ko.utils.unwrapObservable 的调用）。

But, since the expression *doesn't* evaluate to the `message` property, which I'm assuming is also an observable, the parentheses for accessing that property are necessary (e.g. `selectedMessage().message.subject` wouldn't work).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T21:26:44.163

就像文档说的那样：

> observables 的全部意义在于它们可以被观察到，也就是说，其他代码可以说它希望收到更改通知。这就是 KO 的许多内置绑定在内部所做的。因此，当您编写 data-bind="text: personName" 时，文本绑定将自己注册为在 personName 更改时收到通知（假设它是一个可观察的值，现在就是这样）。

这是关于存在`observable`与否。

有关更多信息，请参阅[http://knockoutjs.com/documentation/observables.html上的](http://knockoutjs.com/documentation/observables.html)**读写 observables**。

我稍微修改了你的小提琴，你可以看到带和不带括号的区别：http: [//jsfiddle.net/DKg74/1/](http://jsfiddle.net/DKg74/1/)

# c# - 从 XML 数据反序列化数组（在 ServiceStack 中）

> ID：13444319
> 
> 赞同：5
> 
> 时间：2012-11-18T20:38:14.017
> 
> 标签：c#, xml-serialization, servicestack

我有以下 XML 数据块：

```
<ArrayOfRESTDataSource xmlns="http://SwitchKing.Common/Entities/RESTSimplified/2010/07" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<RESTDataSource>
    <Description>MyTest</Description>
    <Enabled>true</Enabled>
 </RESTDataSource>
</ArrayOfRESTDataSource> 
```

`RESTDataSource`可以发生 0-n 次。

这是我的课程：

```
[DataContract( Namespace = "http://SwitchKing.Common/Entities/RESTSimplified/2010/07" )]
public class ArrayOfRESTDataSource
{
    public RESTDataSource[] Data { set; get; }  
}

[DataContract( Namespace = "http://SwitchKing.Common/Entities/RESTSimplified/2010/07" )]
public class RESTDataSource
{
    [DataMember]
    public bool Enabled { get; set; }
    [DataMember]
    public string Description { get; set; }
} 
```

我从这样的服务器读取上述 XML 数据：

```
WebRequest client = WebRequest.Create( "http://server:80/datasources" );
using( StreamReader sr = new StreamReader( client.GetResponse().GetResponseStream()) ) {
    string xml = sr.ReadToEnd();
var response = ServiceStack.Text.XmlSerializer.DeserializeFromString<ArrayOfRESTDataSource>( xml );
} 
```

我的问题是：我需要更改或装饰什么`public RESTDataSource[] Data`才能使反序列化对阵列起作用？序列化单个 RESTDataSource 项工作得很好，它只是我无法工作的数组。

提前致谢。

*更新 1*

正如@mythz 建议的那样，我将代码更新为此，但 response.Data 仍然为空。我不明白什么？

```
[DataContract( Namespace = "http://SwitchKing.Common/Entities/RESTSimplified/2010/07" )]
 public class ArrayOfRESTDataSource
{
    [DataMember]
    public DataSource Data { set; get; }
}

[CollectionDataContract( ItemName = "RESTDataSource" )]
public class DataSource : List<RESTDataSource>
{
    public DataSource() { }
    public DataSource( IEnumerable<RESTDataSource> collection ) : base( collection ) { }
} 
```

*更新 2*

解决方案在下面的@mythz 答案中，但只是为了完整性/清晰性：我做错的是在我的 DTO 中添加另一个级别 - 顶级类`ArrayOfRESTDataSource`是实际上在 XML 中具有子项的那个，所以它就是那个那应该是一个集合类型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T20:50:15.603

您可以使用`[CollectionDataContract(...)]`修改 Arrays/Collections 的序列化输出，请参阅this [previous answer for example](https://stackoverflow.com/questions/10683732/service-stack-arrayof-to-be-removed)。

## 调试序列化和集成问题

尝试解决此类集成问题的第一步是隔离问题。即删除其他所有内容，只关注问题。例如，在这种情况下，我将只关注 XML 和 DTO，并将它们与您的服务分离。

[ServiceStack](http://www.servicestack.net)只是在底层使用 .NET 的 Xml DataContractSerializer，不添加任何额外的转换或字节开销（它只是按原样序列化的原始 DTO），所以如果你可以让它在你的服务之外工作，你可以放置相同的 DTO回到您的服务中，它也将通过网络工作。

### 方便的 ServiceStack 扩展方法

ServiceStack 提供方便的扩展方法来序列化/反序列化和分析您的数据模型：

### 序列化/反序列化扩展方法

```
T.ToJson() / string.FromJson<T>()  //Serialize JSON
T.ToJsv() / string.FromJsv<T>()    //Serialize JSV  
T.ToXml() / string.FromXml<T>()    //Serialize XML 
```

### 方便的转储工具

[以Pretty JSV Dump 格式](http://www.servicestack.net/mythz_blog/?p=202)递归打印对象图

```
T.PrintDump() 
```

将字符串打印到控制台解析**string.Format()** args（如果有）

```
string.Print(args) 
```

## 您的序列化 DTO 是什么样的

在尝试提出 DTO 的形状时，您应该做的第一步是填充并打印它们以查看它的外观。查看 XML 输出的块，我想出了这些 DTO：

```
[DataContract(Namespace = "http://SwitchKing.Common/Entities/RESTSimplified/2010/07")]
public class RESTDataSource
{
    [DataMember]
    public bool Enabled { get; set; }
    [DataMember]
    public string Description { get; set; }
}

[CollectionDataContract(ItemName = "RESTDataSource", Namespace = "http://SwitchKing.Common/Entities/RESTSimplified/2010/07")]
public class ArrayOfRESTDataSource : List<RESTDataSource>
{
    public ArrayOfRESTDataSource() { }
    public ArrayOfRESTDataSource(IEnumerable<RESTDataSource> collection) : base(collection) { }
} 
```

然后填充并转储它们：

```
var dto = new ArrayOfRESTDataSource { 
    new RESTDataSource { Enabled = true, Description = "MyTest" } };

dto.ToXml().Print(); 
```

打印到控制台：

```
<?xml version="1.0" encoding="utf-8"?><ArrayOfRESTDataSource xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://SwitchKing.Common/Entities/RESTSimplified/2010/07"><RESTDataSource><Description>MyTest</Description><Enabled>true</Enabled></RESTDataSource></ArrayOfRESTDataSource> 
```

这看起来像我们想要的。如果它没有调整上述 DTO，直到您获得与预期 XML 相同的块。

当您拥有与 XML 相同形状的 DTO 时，您可以开始尝试序列化它们：

```
var dto = xml.FromXml<ArrayOfRESTDataSource>();
dto.PrintDump(); 
```

这将打印这个漂亮的对象图：

```
[
    {
        Enabled: True,
        Description: MyTest
    }
] 
```

如果所有字段都填充了预期值，那么您就完成了并且可以更新您的 ServiceStack Web 服务 DTO。

# amazon-web-services - 编写重的、复制的、大于内存的键值存储

> ID：13444320
> 
> 赞同：6
> 
> 时间：2012-11-18T20:38:16.650
> 
> 标签：amazon-web-services, nosql, key-value-store

我正在寻找可以从 EC2 实例中使用的键值存储。

*   item 只是一个非结构化字符串，不需要索引
*   项目大小高达〜5MB但通常低于10kB
*   很多写
*   读取不需要很快，可以把memcache放在前面缓存经常需要的读取
*   数据太大而无法放入内存
*   最终一致性很好
*   需要可以从多台机器访问的守护进程

理想情况下，AWS 托管的东西是完美的，但是：

*   由于写入过多，S3 不适合
*   由于项目大小限制，SimpleDB/DynamoDb 不适合，并且不需要索引

由于市场上有很多关键价值商店，因此很难选择最好的一家。你会推荐哪一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T10:26:36.210

我为我的用例找到了完美的解决方案：[memcachedb](http://memcachedb.org/)

它不做花哨的文档/索引，它只是一个简单的键值存储。

不过，我还没有进行任何性能测试。

**编辑：**

由于复制问题，我们删除了 memcachedb。相反，我们现在运行 mongodb。Mongodb 通常需要更多的磁盘空间和更多的资源。但是副本集工作非常可靠并且易于设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:41:29.567

似乎是[HBase](http://hbase.apache.org/)的完美用例。它提供了出色的写入吞吐量，尤其是当您的插入键有些随机时。HBase 通常不被宣传为 K/V 存储，但它应该可以正常工作。[AWS 文档](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/emr-hbase.html)提供了一些您可能希望仔细查看的用例。缺点是 HBase 可以做的不仅仅是 K/V，所以它可能比你需要的更复杂（和复杂）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T22:08:15.440

也许你应该试试 mongodb：
[http ://www.mongodb.org/display/DOCS/Amazon+EC2](http://www.mongodb.org/display/DOCS/Amazon+EC2)

快速入门：
[http ://www.mongodb.org/display/DOCS/Amazon+EC2+Quickstart](http://www.mongodb.org/display/DOCS/Amazon+EC2+Quickstart)

10gen 的免费课程和视频演示：
[http ://www.10gen.com/presentations/nyc-meetup-group/mongodb-and-ec2-a-love-story](http://www.10gen.com/presentations/nyc-meetup-group/mongodb-and-ec2-a-love-story)

其他键值存储：http:
[//google-opensource.blogspot.com/2011/07/leveldb-fast-persistent-key-value-store.html](http://google-opensource.blogspot.com/2011/07/leveldb-fast-persistent-key-value-store.html)

关于 Riak 及其存储的评论，尤其是 bitcask 和 innostore：
[http ://basho.com/blog/technical/2011/07/01/Leveling-the-Field/](http://basho.com/blog/technical/2011/07/01/Leveling-the-Field/)

> **RaptorDB**：一个极小尺寸和快速嵌入式、noSql、使用 b+tree 或 MurMur 哈希索引的持久字典数据库。它主要设计用于存储 JSON 数据（请参阅我的 fastJSON 实现），但可以存储您提供的任何类型的数据。
> 
> **HamsterDB**：一个用 C++ 编写的令人愉快的引擎，当我使用 Aarons Watters 代码进行索引时，它的速度给我留下了深刻的印象。（RaptorDB 现在把它活活吃掉了……咳咳！）对于 64 位版本来说，它相当大，有 600KB。
> 
> **Esent PersistentDictionary**：CodePlex 上的一个项目，它是另一个项目的一部分，该项目在内置的 Windows esent 数据存储引擎上实现托管包装器。索引 40,000 个项目后，字典性能呈指数下降，而索引文件仅在 guid 键上增长。显然，在与项目所有者交谈后，目前这是一个已知问题。
> 
> **Tokyo/Kyoto Cabinet**：密钥存储的 C++ 实现，速度非常快。Tokyo cabinet 是一个 b+tree 索引器，而 Kyoto cabinet 是一个 MurMur2 哈希索引器。
> 
> **4aTech Dictionary**：这是 CodeProject 上的另一篇文章，它做同样的事情，网站上的商业版本很大（450KB），在索引 50,000 个项目后，在 guid 键上的性能表现不佳。
> 
> **BerkeleyDB**：Oracle 拥有的所有数据库的鼻祖，有 3 种风格，C++ 密钥库、Java 密钥库和 XML 数据库。

（引用来源： http: [//www.codeproject.com/Articles/190504/RaptorDB](http://www.codeproject.com/Articles/190504/RaptorDB)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T21:20:52.780

[Couchbase](http://www.couchbase.com/)听起来很适合您的需求。这很像在磁盘存储中使用 memcached。

优点：

*   这是一个键/值数据库。你可以存储任何你想要的二进制 blob。从 2.0 版开始，它支持将数据存储为 json 并在其上运行一些查询和 map/reduce。但是，如果您不需要它，那么将其用作键/值效果很好。

*   在我尝试过的所有 NoSQL 数据库中，它是最快的。这可能是因为您的写入没有立即提交到磁盘。相反，一旦在集群中复制写入，您就会得到确认。数据异步写入磁盘。因此，一个潜在的缺点是，如果您的所有节点同时崩溃（例如，您的数据中心断电），您可能会丢失数据。根据应用程序，这可能是也可能不是问题（如果您的整个集群出现故障，您可能会遇到更大的问题）。

*   根据我的经验，它是可靠的。如果一个节点出现故障，集群会继续工作，并且很容易进行故障转移。添加新节点也很容易。

*   数据不必适合内存。它被存储在磁盘上，并根据需要进行页面调入和调出。

*   管理界面非常非常好。它有漂亮的实时图表来监控集群。

*   它向后兼容 memcached 协议。如果您已经有使用 memcached 的代码，那么让它使用 Couchbase 会非常简单。

缺点：

*   该产品还有些年轻，因此有些缺乏文档和支持工具。有时这可能有点烦人。

# php - 我应该多次访问数据库还是遍历数组？

> ID：13444325
> 
> 赞同：1
> 
> 时间：2012-11-18T20:38:36.093
> 
> 标签：php, database, codeigniter, optimization

收集相关数据的最有效方法是什么？

假设我们有多个项目与一个类别 1:M 相关联。

每个项目都保存它所属的类别的 ID 值。我有一个包含所有项目的数组对象，我现在想向该数组对象添加它的类别名称而不是它的 ID。

因此，例如，而不是：

project_id：1 project_title：第一个项目 project_desc：bla bla project_category_id：1

我希望它是：

project_id：1 project_title：第一个项目 project_desc：bla bla project_category：第一个类别

我没有遇到麻烦，我很好奇实现它的最有效方法是什么。

**选项1**

```
$projects = $this->projects_model->find_all();
$categories = $this->category_model->find_all();

foreach($projects as $project){
   foreach($categories as $category){
      if($project->category_id == $category->id){
         $project->category = $category;
      }
   }
} 
```

**选项 2**

```
$projects = $this->projects_model->find_all();

 foreach($projects as $project){
   $project->category = $this->category_model->find_by('id', $project->category_id);
 } 
```

可能还有许多其他方法可以实现我想要的结果，并且可能在更有效的庄园中，如果这是我喜欢学习的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:40:30.063

1.  你应该自己分析这个，你会得到你的答案

2.  访问数据库是昂贵的。访问数组数据不是。这意味着您将希望尽可能少地访问数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:41:57.593

假设您的 find_all 和 find_by 函数从数据库请求数据，选项 1 将更可取，直到搜索的类别和使用的类别之间的比率变低。SQL 上的顺序（即读取-然后-读取-下一行）读取操作比目标读取操作快得多。

但最终，如果我是你，我会更少担心实际的数组循环，而更多地担心如何获取数据，因为*这*将是性能消耗的地方。

# php - MySQL Query 在 PHPMyAdmin 中有效，但在 PHP 中无效

> ID：13444331
> 
> 赞同：2
> 
> 时间：2012-11-18T20:40:23.293
> 
> 标签：php, mysql, phpmyadmin

我一直在尝试从 1000+ 行的表中获取第 100 到 200 行的示例。我在网上找到了这个片段，它似乎在 PHPMyAdmin 中运行良好，但是当我尝试在代码中使用它时，它就不起作用了。

```
 SELECT * 
FROM ( 
    SELECT 
        @row := @row +1 AS rownum, id
    FROM ( 
        SELECT @row :=0) r, myGames
    ) ranked 
WHERE rownum >= 100 AND rownum < 200" 
```

这是我的 PHP 代码

```
$q = "SELECT * 
FROM ( 
    SELECT 
        @row := @row +1 AS rownum, id
    FROM ( 
        SELECT @row :=0) r, myGames
    ) ranked 
WHERE rownum >= 100 AND rownum < 200";

$query = mysql_query($q); 
```

当我尝试执行 $query = mysql_query($q) 或 die(mysql_error()) 时，我什么也得不到。

对此的任何帮助都非常感谢

编辑：通过使用 LIMIT 100,100 解决。多谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:47:17.633

如果要检索结果集的子集，请使用[限制偏移量 num_rows](http://dev.mysql.com/doc/refman/5.5/en/select.html)

```
select id
from myGames
limit 100, 100; 
```

# c# - ASP.NET 中的模拟失败

> ID：13444334
> 
> 赞同：3
> 
> 时间：2012-11-18T20:40:33.183
> 
> 标签：c#, asp.net

我试图做的事情在原则上似乎很简单。有一个目录包含我需要提供给我的用户的文档，但是运行 IIS 的帐户没有访问权限。因此，我尝试做的是使用模拟在 .ashx 中打开文档，并使用具有访问权限的帐户将文档写入响应流。不幸的是，除非我将网站托管在我以管理员身份运行的 Visual Studio 实例中，否则下面的代码片段会因`using (Stream fileStream = new FileStream(@"c:\test3.pdf", FileMode.Open))`System.UnauthorizedAccessException*而*失败。这似乎没有意义，因为模仿似乎已经生效`WindowsIdentity.GetCurrent().Name`返回我的测试帐户的名称，并且测试帐户确实有权打开文档。好像我在这里遗漏了一些非常简单的东西有人知道它是什么吗？我感谢任何帮助！！！！

```
<%@ WebHandler Language="C#" Class="PDFHandler" %>

using System;
using System.Web;
using System.IO;
using System.Security.Principal;
using System.Runtime.InteropServices;
using System.Threading;

public class PDFHandler : IHttpHandler {

    [DllImport("advapi32.dll", SetLastError = true)]
    public static extern bool LogonUser(
            String lpszUsername,
            String lpszDomain,
            String lpszPassword,
            int dwLogonType,
            int dwLogonProvider,
            ref IntPtr phToken);
    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern bool RevertToSelf();

    public void ProcessRequest (HttpContext context) {
        context.Response.Clear();
        context.Response.ClearContent();
        context.Response.ClearHeaders();
        context.Response.ContentType = "application/pdf";
        byte[] result = null;

        IntPtr admin_token = default(IntPtr);
        WindowsIdentity wid_current = WindowsIdentity.GetCurrent();
        WindowsIdentity wid_admin = null;
        WindowsImpersonationContext wic = null;

        RevertToSelf();

        if (LogonUser("test account", "Odysseus", "test", 2, 0, ref admin_token) == true)
        {
            wid_admin = new WindowsIdentity(admin_token);
            wic = wid_admin.Impersonate();
        using (Stream fileStream = new FileStream(@"c:\test3.pdf", FileMode.Open))
        {
            result = ReadFully(fileStream);

            fileStream.Close();
        }
        }
        else
        {
            //login failed
        }

        context.Response.BinaryWrite(result);
        context.Response.Flush();
    }

    public static byte[] ReadFully(Stream input)
    {
        byte[] returnValue;

        byte[] buffer = new byte[16 * 1024];
        using (MemoryStream ms = new MemoryStream())
        {
            int read;
            while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
            {
                ms.Write(buffer, 0, read);
            }
            returnValue = ms.ToArray();
        }

        return returnValue;
    }

    public bool IsReusable {
        get {
            return false;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T23:20:29.377

您可以将此页面移动到新文件夹并添加 web.config 文件。然后使用[身份](http://msdn.microsoft.com/en-us/library/72wdk8cc%28v=vs.100%29.aspx)标签启用模拟。阅读有关如何将用户名和密码加密到注册表的注释。

阅读本文的“替代方案”[部分](http://www.west-wind.com/weblog/posts/2005/Feb/24/Using-programmatic-Impersonation-from-an-ASPNET-Page)。

# visual-studio - Microsoft Visual Studio Express 2012 RC for Web 已停止工作

> ID：13444336
> 
> 赞同：0
> 
> 时间：2012-11-18T20:40:45.330
> 
> 标签：visual-studio, visual-studio-2012, clr, vwdexpress

我像任何其他项目一样创建了一个新的 MVC 4.5 c# 项目。我可以运行该站点，调试该站点，浏览我想要的所有站点。点击同一个链接20次没有错误，我可以按f5刷新页面，**但只有一次？？！！**

当我第二次单击 f5 时，我收到以下错误：

错误详情：

```
Problem signature:
  Problem Event Name:   CLR20r3
  Problem Signature 01: vwdexpress.exe
  Problem Signature 02: 11.0.50522.1
  Problem Signature 03: 4fbaf6fb
  Problem Signature 04: mscorlib
  Problem Signature 05: 4.0.30319.17626
  Problem Signature 06: 4f9f0f5d
  Problem Signature 07: 4631
  Problem Signature 08: 5e2
  Problem Signature 09: System.IO.PathTooLongException
  OS Version:   6.1.7600.2.0.0.256.1
  Locale ID:    1030
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789

Read our privacy statement online:
  http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409

If the online privacy statement is not available, please read our privacy statement offline:
  C:\Windows\system32\en-US\erofflps.txt 
```

# ruby - 使用 macports 升级 ruby 安装

> ID：13444337
> 
> 赞同：0
> 
> 时间：2012-11-18T20:40:48.287
> 
> 标签：ruby, macos, macports

下列的

```
sudo port selfupdate
sudo port install ruby19 
```

ruby 究竟安装在我的 Mac 上的哪个位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:06:42.077

默认情况下，macports 将东西安装在`/opt/local`.

很可能您的 ruby​​ 二进制文件安装为`/opt/local/bin/ruby19`

要摆脱`19`后缀，请将其安装为：

```
sudo port install ruby19+nosuffix 
```

所以这会将Ruby安装为`/opt/local/bin/ruby`

# python - 快速检索 svn 目录树

> ID：13444341
> 
> 赞同：2
> 
> 时间：2012-11-18T20:41:00.560
> 
> 标签：python, svn

我正在为我的大学开发一个存储库管理系统，该系统将提供一个 gui，用于修改 subversion 存储库中单个文件夹的权限，并使教授可以轻松地为学生和助教添加具有适当权限的目录。为了完成这项工作，我需要能够检索现有 svn 存储库的目录结构，并将其呈现在 Web 上。我看过几种方法，想知道是否有人有其他想法或建议。我看过的一些东西：

每小时运行一个脚本，在所有存储库上运行“svn ls -R --xml”并填充 mysql 数据库。

*   之后快速页面加载
*   不占用大量磁盘空间
*   易于管理权限，即网站根本不需要直接接触svn

消极的：

*   在我们的一些更复杂的存储库上真的很慢
*   没有“实时”更新
*   无论有没有变化都必须运行

在页面加载时，运行'svn ls -R --xml'并仅检索我需要呈现当前页面的目录正面：

*   实时更新
*   没有 cron 作业来占用服务器

消极的：

*   网站慢得像糖蜜
*   网络服务器使用更多资源

直接读取svn数据库正面：

*   快速页面加载
*   实时更新

消极的：

*   难的？

我很好奇有哪些我没有看到或想到的替代方案，因为我觉得其中任何一个在某种程度上都会非常糟糕和不雅。如果可以避免的话，我也不想重新发明轮子。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:57:25.327

如果您可以在 SVN 服务器上运行代码，请尝试

```
svnlook tree /path/to/repo 
```

这非常快，因为它直接从磁盘读取存储库 :) 有关更多使用详情，请参阅[文档](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.tk.svnlook)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T23:38:49.203

首先，这是为了什么？这是源代码吗？这是某种内容管理系统吗？这是用于存储和检索文档吗？你没说。你想用它做什么很大程度上取决于你需要什么类型的工具。

如果这只是为了在教授、学生、助教和部门之间共享资源，请查看 Dropbox。它简单有效。这让教授可以决定他们想与谁分享什么，而让你置身事外。

假设这是为了源代码控制，有几个 GUI 服务器管理系统一开始是免费的：

*   [视觉SVN服务器](http://www.visualsvn.com/server/)
*   [优步SVN](http://www.wandisco.com/ubersvn)

这意味着无需编写任何脚本，无需 MySql 表。它已经为你完成了。这总是最好的解决方案。

但是，**如果**这是为了源代码控制，我将建议您查看 Git 而不是 Subversion，因为这是像 Git 这样的分布式版本控制系统比像 Subversion 这样的集中式版本控制系统工作得更好的时代之一。

问题是访问之一。您有数十名教授、数百名学生和大量 TA 都想要访问。谁将为所有这些人设置帐户。每年有 1/4 的学生会离开，另外 1/4 会进来。当然，总是有学生来来去去。另外，会有团队。每个人都需要访问权限。这是您不希望的管理头痛。

Git 通过向下传播痛苦来提供帮助。在您的 Git 主存储库中，唯一有权访问（至少推送访问。拉取访问可能更广泛）的人将是教授。时期。不允许其他人向该存储库提交更改。您已经从向 500 多人授予许可到仅仅十几人。而且，这十几个通常会留下来，因此维护工作很少。

学生呢？这取决于教授。教授可以将他们的 Git 存储库提供给学生，学生可以将更改推送到教授的存储库。从那里，教授可以将这些更改推送给大师。

因此，首先，您必须准确地决定您想要什么，而不是在工具方面或您认为事情将如何运作，而是实际上您想要什么：

*   是版本控制吗？
*   是文档库吗？
*   是维基吗？
*   它是一个内容管理系统吗？
*   它是在不同组之间共享重要文件的一种方式吗？

然后，一旦你有了它，就更容易选择工具了。如果您真的想要一个大学范围的版本控制系统，Git 可能更适合您的需求，因为您不想要集中访问控制，而是将责任向下分散。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T20:48:38.250

我会参考数据库解决方案。存储库的问题是同时访问。使用存储更新存储库的数据库为您提供了一个可靠的信息来源来检索其布局。

我为实习做了大量的研究，使用数据库几乎总是你阅读 repo 的最快方式。

用伪代码来说：

*   读取存储库
*   加载站点
*   打印布局
*   执行任务——然后重复。

另一个需要考虑的选择是使用独立跟踪存储库布局的数据库。通过这种方式，您可以确保用户不会碰到彼此的更新，并且可以保护存储库数据库免受损坏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T22:03:06.863

1.  您应该通过 file:// 使用直接存储库访问，这与慢速 HD 相当（如果您有快速 CPU 和 HD）
2.  为您各自的脚本语言使用 svn 绑定，不要**依赖**xml 解析，因为它们要慢得多
3.  不要读取**整个**树，而是维护导航层次结构并按需读取目录，通常如果您读取整个层次结构，您最终会在更深层次中获得数百/数千个目录，这通常对您的应用程序不感兴趣，所以您可以省略它们并按需显示（如果用户浏览得这么深）
4.  如果您正在进行 svn 访问修改，请使用访问文件中的条目事先了解您的重要目录

# php - 按标签搜索引擎

> ID：13444343
> 
> 赞同：2
> 
> 时间：2012-11-18T20:41:08.980
> 
> 标签：php, sql, sqlite

所以，我是 PHP 和数据库的新手，这里有一个问题：

我有一个名为的表`news`，其中一列是`tags`. 此列包含 1 个或多个以空格分隔的标签，例如`economics politics sports`. 我有一个页面，它将接收一个或多个标签作为单个参数，我必须返回包含至少一个此标签的所有行。

我可以分解标签并根据需要进行尽可能多的数据库访问，但我确信这不是这样做的方法 =p

`LIKE`并且`IN`也不起作用，因为参数可能以任何顺序包含超过 1 个标签。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:43:39.977

这不是如何构建的。

有一个名为 news 的表，一个名为 tags，一个名为 tagsToNews。

在 tagsToNews 中只需记录新闻项目 ID 和标签 ID，然后进行连接以获取您想要的内容。这也意味着可以重命名标签而不会破坏一切！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T20:45:02.763

**最简单的解决方案**

将您的表转换为 MyISAM 表并`tags`使用 FULLTEXT 索引对其进行索引。从那里，使用该`MATCH()`函数针对查询字符串（可能包含多个单词）提取该行的匹配值

**更具适应性的解决方案**

删除该表并使用每行一个标签重新创建它。您将通过这种方式有效地实现 FULLTEXT 数组，因为这正是它的本质。如果您打算爆炸数据，请避免将数据存储在长字符串中 - 通常，存储原子部分通常效率更高，因为您不必依赖饥饿的 LIKE 运算符。

# generics - MIT Scheme 通用运算符表包

> ID：13444347
> 
> 赞同：0
> 
> 时间：2012-11-18T20:41:22.273
> 
> 标签：generics, scheme, message

我的一次练习考试中的一个问题集中在消息传递和数据导向程序上。它要求使用表初始化这些安装包的过程：

```
(define (attach-tag tag data) (cons tag data))
(define (get-tag data) (car data))
(define (get-contents data) (cdr data))

(define (install-metric-package)
; internal procedures
(define (get-kilometers d) d)
(define (get-miles d) (/ d 1.6))
(define (make-from-kilometers d) d)
(define (make-from-miles d) (* d 1.6))
; install metric packages
(2d-put! 'get-kilometers 'metric get-kilometers)
(2d-put! 'get-miles 'metric get-miles)
(2d-put! 'make-from-kilometers 'metric
   (lambda(d) (attach-tag 'metric (make-from-kilometers d))))
(2d-put! 'make-from-miles 'metric
   (lambda(d) (attach-tag 'metric (make-from-miles d))))
'done)

(define (install-english-package)
; internal procedures
(define (get-kilometers d) (* d 1.6))
(define (get-miles d) d)
(define (make-from-kilometers d) (/ d 1.6))
(define (make-from-miles d) d)
; install english packages
(2d-put! 'get-kilometers 'english get-kilometers)
(2d-put! 'get-miles 'english get-miles)
(2d-put! 'make-from-kilometers 'english
   (lambda(d) (attach-tag 'english (make-from-kilometers d))))
(2d-put! 'make-from-miles 'english
   (lambda(d) (attach-tag 'english (make-from-miles d))))
'done) 
```

并允许通用运算符工作。通常情况下，我会有一些代码来展示我的努力，但是大约一天，我完全不知道如何开始使用这个代码。我得到的只是这个：

```
(define (generic-op operator object) 
```

我确实记得在这方面有一个实验室，但它基本上采用了一个已经存在的通用过程并创建简单的过程来获取其中已经包含的值。如果有人能阐明如何解决这个问题，我将不胜感激。再次，我很抱歉我没有什么可展示的，但老实说，我不知道在这里做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:09:14.403

该`2d-put!`过程只是将条目添加到表中。运行`install-*-package`代码后，您最终会得到类似这样的结果（`[proc]`给定代码中定义的过程之一）：

```
 | 'metric | 'english |
'make-from-kilometers | [proc]  |  [proc]  |
'make-from-miles      | [proc]  |  [proc]  |
'get-kilometers       | [proc]  |  [proc]  |
'get-miles            | [proc]  |  [proc]  | 
```

然后，您将`2d-get`在主体中使用，`generic-op`这样每当您在一段标记数据上调用该过程时，您的程序就会知道它应该使用哪个版本（公制/英文）的过程。

```
(define (generic-op operator object)
    ((2d-get [first-tag] [second-tag]) [data])) 
```

在这种形式中，`[first-tag]`将只是用于指定运算符的符号，例如`'get-miles`，`[second-tag]`将是附加到数据的符号，您可以使用给定的过程访问该符号`get-tag`，并且`[data]`是您实际想要对其进行操作的数字您可以使用给定的过程访问它`get-contents`。将所有这些组合成这样的最终答案：

```
(define (generic-op operator object)
    ((2d-get operator (get-tag object)) (get-contents object))) 
```

# ruby-on-rails - Rails 关联 touch 总是编辑 updated_at 虽然有些东西没有改变

> ID：13444350
> 
> 赞同：1
> 
> 时间：2012-11-18T20:41:47.827
> 
> 标签：ruby-on-rails, activerecord

我对 Rails 协会中的触摸指令有严重问题。

它总是编辑 updated_at 时间戳。这很奇怪，因为当关联对象没有改变时，总是更新时间戳。

有地方

```
class Place < ActiveRecord::Base
  has_one     :location,        inverse_of: :place, dependent: :destroy

  attr_accessible :name
  attr_accessible :location_attributes

  accepts_nested_attributes_for :location
end 
```

和位置

```
class Location < ActiveRecord::Base
  belongs_to :place, inverse_of: :location, touch: true

  attr_accessible :number, :street, :locality, :region, :postal_code, :country, :description, :description_en, :latitude, :longitude
  attr_accessible :place_id

  validates :place,       presence: true
  validates :number,      presence: true
  validates :street,      presence: true
  validates :locality,    presence: true
  validates :postal_code, presence: true, postal_code: { country: :sk }
  validates :latitude,    presence: true, numericality: true, allow_nil: true
  validates :longitude,   presence: true, numericality: true, allow_nil: true
end 
```

当我加载并保存存在的地方而不进行更改时：

```
Place.last.save # changed? == false 
```

它会自动编辑 updated_at

```
SQL (0.4ms)  UPDATE `places` SET `updated_at` = '2012-11-18 20:38:48' WHERE `places`.`id` = 490 
```

有人对此有任何经验吗？如何解决？

使用 Rails 3.2.9 和 MySQL（mysql2 适配器）

编辑：

Location.last.save 更改为 Place.last.save。这是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:08:41.457

rails`touch`指令可能松散地模仿了同名 Unix 工具的既定和预期行为。

根据文档，它没有损坏。

如果它没有做你想让它做的事情，那很可能是错误的方法。

* * *

从[RailsAPI 的文档中](http://railsapi.com/doc/rails-v3.0.8rc1/)：

> ## **触摸（名称=无）**
> 
> 保存设置为当前时间的 updated_at/on 属性的记录。请注意，不执行验证，也不执行回调。如果传递了属性名称，则该属性将与 updated_at/on 属性一起更新。

在 Linux 上触摸的 man 描述：

> ## **触摸(1)**
> 
> 描述 将每个 FILE 的访问和修改时间更新为当前时间。

* * *

如果您真的认为这是错误的行为，您可以自由提交补丁或报告错误。

# http - 来自 csv 文件的 JMeter 和数据集

> ID：13444352
> 
> 赞同：0
> 
> 时间：2012-11-18T20:42:02.087
> 
> 标签：http, web-applications, jmeter, load-testing

我正在研究使用 JMeter 进行负载测试。
我计划创建适量的线程 ~300，因为我从各种帖子中读到 JMeter 不能很好地扩展并且我没有一些真正特殊的硬件。
所以我打算循环大约 20 次来模拟 6000 个用户。

如果我使用具有 6000 个条目的 CSV 数据集，JMeter 将为*每个*线程提供 CSV 文件的单独条目，因此在 20 个循环结束时，*所有*条目都将作为请求的一部分**或**在开始时发送到服务器每个循环，从 csv 文件中读取的数据集会从头开始读取吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:40:07.753

它取决于 CSV 数据集配置中设置的共享模式。如果共享模式=所有线程，则每次执行 CSV 数据集时，都会从 CSV 中读取新行。这似乎是你想要的。

笔记：

*   如果您将线程数设置为 300，则无论循环中的计数器如何，您都只会同时获得 300 个“用户”。
*   你不能事先说你的测试机可以同时提供多少用户。根据测试计划、SUT、网络，此数字可能高于或低于 300。如果您想在您的站点上产生高负载，请遵循[官方关于减少资源使用的最佳实践](http://jmeter.apache.org/usermanual/best-practices.html#lean_mean)，考虑[分布式测试](http://jmeter.apache.org/usermanual/jmeter_distributed_testing_step_by_step.pdf)，最后考虑使用[HTTP Raw](http://code.google.com/p/jmeter-plugins/wiki/RawRequest)来自 Jmeter 插件的[请求。](http://code.google.com/p/jmeter-plugins/wiki/RawRequest)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T23:08:03.403

我同意 Andrey 在 csv 上的观点，但您不需要原始请求，标准的 http 采样器就足够了。

关于 JMeter 的可扩展性，只要您遵循最佳实践，它就可以很好地扩展。读：

*   [http://wiki.apache.org/jmeter/JMeterPerformance](http://wiki.apache.org/jmeter/JMeterPerformance)

最后，6000 个并发用户并不意味着 6000 个线程。读这个：

*   [http://www.webperformance.com/library/tutorials/CalculateNumberOfLoadtestUsers/](http://www.webperformance.com/library/tutorials/CalculateNumberOfLoadtestUsers/)

# ruby - 如何强制加载自动加载的类？

> ID：13444353
> 
> 赞同：1
> 
> 时间：2012-11-18T20:42:15.503
> 
> 标签：ruby

我打开了一个类（[来自 OmniAuth Identity 库](https://github.com/intridea/omniauth-identity/blob/master/lib/omniauth/strategies/identity.rb#L13)）来更改它生成的表单。该库使用[autoload](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-autoload)，因此为了使补丁正常工作，我需要强制加载库，但到目前为止我尝试过的方法会导致错误，这是我迄今为止最好的猜测：

```
OmniAuth::Strategies::Identity if autoload? OmniAuth::Strategies::Identity 
```

> 未初始化的常量 OmniAuth::Strategies::Identity (NameError)

谁能告诉我如何做到这一点？任何帮助或见解将不胜感激。

Ruby v1.9.x
OmniAuth Identity v1.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:46:16.613

由于自动加载只是减少`require`语句数量的一种神奇方式，您可以完全使用它来强制加载某个文件：

```
require 'omniauth/strategies/identity' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:56:07.763

鉴于您只是希望它被加载，您能否不只是使用以下代码来确保它被加载？

`OmniAuth::Strategies::Identity`

# security - 风险 mongoDb _id 和 cookie

> ID：13444354
> 
> 赞同：0
> 
> 时间：2012-11-18T20:42:21.073
> 
> 标签：security, mongodb, cookies

我想知道是否存在安全问题 id 我在 cookie 中设置了我的用户的 _id 以识别用户，或者最好设置一个 cookie 用户名和其他人编码 pwd

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:51:21.767

是的，这绝对是一个安全风险——这意味着，如果用户可以发现`_id`另一个用户的信息（例如，如果您不小心将其显示在某个地方），他们可以以该用户身份登录。更糟糕`_id`的是，事后无法更改，因此无法强制另一个会话远程注销或从被盗的 cookie 中恢复。

使用会话登录，而不是用户特定的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:18:43.647

一种评论，一种回答。

提出的选择都很糟糕。也称为[莫顿叉](http://en.wikipedia.org/wiki/Morton%27s_fork)。

1.  将用户ID放入cookie中：不好，因为正如duskwuff所说，cookie可以被盗并且ID被传回。没有办法阻止它。

2.  将用户名和加密密码放入 cookie: bad 原因完全相同。

第三种选择更可取：发回具有有限生命周期的加密会话 ID。一旦服务器确定会话超时，就不要再使用它了。

# javascript - JavaScript 右键单击 和双击右键

> ID：13444355
> 
> 赞同：0
> 
> 时间：2012-11-18T20:42:36.267
> 
> 标签：javascript, right-click

> **可能重复：**
> [右键单击 Javascript 事件吗？](https://stackoverflow.com/questions/2405771/is-right-click-a-javascript-event)

我正在搜索一个 JavaScript 事件，我可以使用 addEventListener('event',...) 方法。

我知道有 click 和 dblclick。但是右键单击和双击是否存在相同的事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:51:04.700

首先，a`click`是由单击触发的，这基本上是鼠标主键（通常是左键）在相同位置的a`mousedown`后跟 a 。`mouseup`

就事件而言，右键单击不算作`click`。但是，它仍然会注册`mousedown`和`mouseup`事件，您可以检查`*Event*.which`属性以查看是否按下了鼠标右键。或者，您可以使用`oncontextmenu`，在某些情况下可以认为与右键单击相同。

但是，这仍然存在双击右键的问题。为此，您需要测量两次右键单击之间的时间，如果您认为它足够短，可以双击，则按此处理。这是一个非常复杂的设置，但双击右键对用户来说根本不友好，所以也许您应该考虑替代输入？

# mysql - Django ORM 在多个连接上运行缓慢

> ID：13444356
> 
> 赞同：0
> 
> 时间：2012-11-18T20:42:47.040
> 
> 标签：mysql, django-orm, entity-attribute-value

我在我的服务器上使用 Django ORM、**eav-django**、mysql 5.1。当它进行这样的查询时，它完全杀死了我的小型服务器（实际上也是我的 4core 开发机器）。这是因为它指的是自己，即 bon_attr 表吗？

有没有什么好的技巧可以加快速度（缓存除外）？

```
SELECT DISTINCT `bon_property`.`id`, `bon_property`.`company_id`, `bon_property`.`remote_id`, `bon_property`.`category_id`, `bon_property`.`slug`, `bon_property`.`address_id`, `bon_property`.`address_given_id`, `bon_property`.`agent_contact_id`, `bon_property`.`date_modyfied`, `bon_property`.`status` 

FROM `bon_property` 
INNER JOIN `bon_attr` ON (`bon_property`.`id` = `bon_attr`.`entity_id`) 
INNER JOIN `bon_attr` T5 ON (`bon_property`.`id` = T5.`entity_id`) 
INNER JOIN `bon_attr` T6 ON (T5.`id` = T6.`id`) 
INNER JOIN `bon_attr` T10 ON (`bon_property`.`id` = T10.`entity_id`) 
INNER JOIN `bon_attr` T11 ON (T10.`id` = T11.`id`) 

WHERE ((`bon_attr`.`value_float` <= 1  
AND `bon_attr`.`entity_type_id` = 18 ) 
AND (`bon_attr`.`schema_id` = 23  
AND `bon_attr`.`entity_type_id` = 18 ) 
AND (T6.`value_float` >= 1  
AND T6.`entity_type_id` = 18 ) 
AND (T6.`schema_id` = 23 
AND T6.`entity_type_id` = 18 ) 
AND `bon_property`.`company_id` = 27  
AND (T11.`value_float` >= 200000  
AND T11.`entity_type_id` = 18 ) 
AND (T11.`schema_id` = 42  
AND T11.`entity_type_id` = 18 ) 
AND `bon_property`.`status` = 1 ) 

ORDER BY `bon_property`.`id` ASC; 
```

即使这个查询正在杀死服务器：

```
SELECT  * FROM `bon_property` 

INNER JOIN `bon_attr` T3 ON (`bon_property`.`id` = T3.`entity_id`) 
INNER JOIN `bon_attr` T4 ON (T3.`id` = T4.`id`) 
INNER JOIN `bon_attr` T8 ON (`bon_property`.`id` = T8.`entity_id`) 
WHERE `bon_property`.`status` = 1 
```

大约 4 分钟后，慢查询日志显示 Query_time: 430.093778 Lock_time: 0.000247 Rows_sent: 0 Rows_examined: 164591659 并且我检查了大量行...
我的配置：[http ://dpaste.com/hold/833263/](http://dpaste.com/hold/833263/)

编辑类似查询的解释：

```
1   PRIMARY T4  ref PRIMARY,entity_type_id,bon_attr_299a9dd7,bon_attr_...   bon_attr_6f9d19 4   const   9770    Using where; Using temporary; Using filesort
1   PRIMARY T9  ref PRIMARY,entity_type_id,bon_attr_299a9dd7,bon_attr_...   bon_attr_6f9d19 4   const   12037   Using where
1   PRIMARY T3  eq_ref  PRIMARY PRIMARY 4   om.T4.id    1   Using where
1   PRIMARY bon_property    eq_ref  PRIMARY,bon_property_543518c6   PRIMARY 4   om.T3.entity_id 1   Using where
1   PRIMARY T8  eq_ref  PRIMARY PRIMARY 4   om.T9.id    1   Using where; Distinct
5   DEPENDENT SUBQUERY  U1  ref entity_type_id,bon_attr_299a9dd7,bon_attr_6f9d19    entity_type_id  12  const,func,const    1   Using where; Using index
5   DEPENDENT SUBQUERY  U0  eq_ref  PRIMARY PRIMARY 4   func    1   Using where; Using index
4   DEPENDENT SUBQUERY  U1  ref entity_type_id,bon_attr_299a9dd7,bon_attr_147166d7  entity_type_id  8   const,func  17  Using where; Using index
4   DEPENDENT SUBQUERY  U0  eq_ref  PRIMARY PRIMARY 4   func    1   Using where; Using index
3   DEPENDENT SUBQUERY  U1  ref entity_type_id,bon_attr_299a9dd7,bon_attr_6f9d19    entity_type_id  12  const,func,const    1   Using where; Using index
3   DEPENDENT SUBQUERY  U0  eq_ref  PRIMARY PRIMARY 4   func    1   Using where; Using index
2   DEPENDENT SUBQUERY  U1  ref entity_type_id,bon_attr_299a9dd7,bon_attr_147166d7  bon_attr_147166d7   5   const   1   Using where
2   DEPENDENT SUBQUERY  U0  eq_ref  PRIMARY PRIMARY 4   func    1   Using where; Using index 
```

编辑 2 是的，这是一个索引它的问题，甚至更多 EXPLAIN 以及 Duke Silver 都非常有帮助。

# facebook - 无法发送自动通知？

> ID：13444360
> 
> 赞同：0
> 
> 时间：2012-11-18T20:43:11.290
> 
> 标签：facebook, notifications, send, sendmessage

我正在编写一个应用程序，并且我能够让我的代码向已验证我的应用程序的用户发送通知。

只要我在浏览器中打开 php 页面，它就会向用户发送通知。这就像一个魅力，直到我尝试让代码在没有用户启动的情况下发送通知。

我一直遇到令牌问题，只是无法让它工作。我尝试将访问令牌保存到我的数据库中，并让代码使用这些令牌，但无济于事。然后，我尝试将这些令牌换成长期存在的令牌，一切正常，我得到了有效期为 60 天的令牌，但是当我尝试使用这些令牌时，它就不起作用了。

有没有人有让应用程序发送通知或消息的经验？我在这里没有想法..

编辑我将详细说明我是如何做事的，以及什么起作用和不起作用：我将 php sdk 用于大多数事情，例如初始化应用程序：

```
 require_once("facebook.php");

  $config = array();
  $config['appId'] = 'xxxx';
  $config['secret'] = 'xxxx';
  $config['fileUpload'] = false; // optional

  $facebook = new Facebook($config);

$user_id = $facebook->getUser();
$access_token = $facebook->getAccessToken(); 
```

然后我检查用户是否已登录，如果没有，将他发送到登录页面等：

```
if($user_id) {
 try {
  $user_profile = $facebook->api('/me?fields=friends.fields(picture,name,gender,link),name','GET');
  } catch(FacebookApiException $e) {
  $login_url = $facebook->getLoginUrl(); 
  header( $login_url ) ;
 }   
} else {
 $login_url = $facebook->getLoginUrl();
 header( $login_url ) ;
} 
```

然后，我的应用程序绘制 html 等，工作正常。在代码的最后，我将用户 acces_token 交换为一个长期存在的令牌：

```
$existingtoken = $access_token;
$token_url =    "https://graph.facebook.com/oauth/access_token?" .
                "client_id=" . $config['appId'] .
                "&client_secret=" . $config['secret'] .
                "&grant_type=fb_exchange_token" .
                "&fb_exchange_token=" . $existingtoken;

$new_app_token = file_get_contents($token_url);
$new_app_token = str_replace("access_token=", "", $new_app_token);

$NewToken = str_replace("&expires=", "", $new_app_token);

$mystring = $new_app_token;
$findme   = '&expires=';
$pos = strpos($mystring, $findme);
// check if the token actually is long-lived and has the expires data
if ($pos === false) {                                                       
    echo "Error getting long lived token.<br>";
} else {
$expirationtime = substr($mystring, ((int)$pos+9));
} 
```

直到现在，一切都运作良好。我什至可以使用此代码发送通知（我花了一天时间才真正让它工作，有关此的信息不容易找到）：

```
$notificationdata = array(
    'href'=> 'https://apps.facebook.com/MY_APP/',
    'access_token'=> $app_token,
    'template'=> '180 char string as information'
);
$sendnotification = $facebook->api('/' . $user_id . '/notifications', 'post', $notificationdata); 
```

EDIT2：实际上，我现在可以使用它了:)

# c++ - c++ 错误 48 错误 C1004: 发现意外的文件结尾

> ID：13444362
> 
> 赞同：0
> 
> 时间：2012-11-18T20:43:13.940
> 
> 标签：c++, eof

我得到了 .cpp 和头文件，但我得到了这个错误，无法弄清楚它是什么。

我记得在标题结尾的 endif

和 }; 作为一个更接近班级

和 #endif 之后的空行

无法弄清楚出了什么问题。感谢您的回答

头文件：

```
#ifndef playerreceiver_h
#define playerreceiver_h

#include "Client.h"
#include <SFML\Graphics.hpp>
#include <SFML\Network.hpp>
#include "ClientGameFrame.h"
#include "Packets.h"
#include <string>
#include <iostream>

class PlayerReceiver{
public:
    PlayerReceiver(int id, std::string name, ClientGameFrame * clientGameFrame);
    void recievePackets(sf::Packet &p1);
    void draw(sf::RenderWindow & rw);

    ClientGameFrame * clientGameFrame;
    int id,x, y, hp,energy;
    std::string name;
    double angle;
    Output o;

    sf::Sprite sprite;
};

#endif 
```

和 cpp 文件：

```
#include "PlayerReceiver.h"

PlayerReceiver::PlayerReceiver(int id, std::string name,  ClientGameFrame * clientGameFrame){
    this->id=id;
    this->name=name;
    this->clientGameFrame=clientGameFrame;
    x=0;
    y=0;
    hp=100;
    energy=100;
}

void PlayerReceiver::draw(sf::RenderWindow & rw){
    rw.draw(sprite);
}

void PlayerReceiver::recievePackets(sf::Packet &p1){

    if(checkPacket(p1,output)){
        p1>>o;
        if(o.id==id){
            angle=o.angle;
            x=o.x;
            y=o.y;
            //sprite.setPosition(x, y);
        }
    }
}

//asda 
```

# c - C 指针未正确分配

> ID：13444363
> 
> 赞同：4
> 
> 时间：2012-11-18T20:43:34.983
> 
> 标签：c, memory, pointers, variable-assignment

我正在创建一个名为“mcguffins”的结构数组，但我遇到了一个非常奇怪的错误。

```
 //prints the info in a mcguffin 
    void printInfo(int i,struct mcguffin * new) {
      printf("%d \tNum: %d\t Word: %s\n", i, new->num, new->word);
    }

    //creates a new mcguffin
    struct mcguffin * addMG(int n, char * w) {
      printf("Expected output:\n\tNum: %d\tWord: %s\n", n, w);
      struct mcguffin * new;
      new = malloc(sizeof *new);
      new->num = n;
      strncpy(new->word, w, sizeof(char[20]));
      printf("Actual output: \n\t");
      printInfo(1, new);
      return new;
    }

//creates a list of mcguffin pointers, and sets these pointers to new mcguffins
struct mcguffin ** writeList() {
  struct mcguffin ** list = malloc(10 * sizeof(*list));
  list[0] = addMG(2, "Jeter");
  list[1] = addMG(14, "Granderson");
  list[2] = addMG(25, "Teixeira");
  list[3] = addMG(13, "Rodriguez");
  list[4] = addMG(24, "Cano");
  list[5] = addMG(33, "Swisher");
  list[6] = addMG(55, "Martin");
  list[7] = addMG(20, "Posada");
  list[8] = addMG(11, "Gardner");
  list[9] = addMG(42, "Mo");
  return list;
} 
```

由于某种原因，list[0] 和 list[1] 没有被分配给创建的结构，但是 list[2] 到 list[9] 是。addMG 工作正常，并且确实为 list[0] 和 list[1] 创建了结构，但是由于某种原因，当我尝试在它们上使用 printInfo 时，它不是在结构上打印信息，而是打印出一个内存地址，其中 new- >num 应该不会打印任何 new->word。

```
0   Num: 30519472    Word: 
1   Num: 30519600    Word: 
2   Num: 25  Word: Teixeira
3   Num: 13  Word: Rodriguez
4   Num: 24  Word: Cano
5   Num: 33  Word: Swisher
6   Num: 55  Word: Martin
7   Num: 20  Word: Posada
8   Num: 11  Word: Gardner
9   Num: 42  Word: Mo 
```

这可能是一些愚蠢的错误，因为我是 C 新手，但任何帮助将不胜感激。

编辑：为了澄清，mcguffins 在一个单独的头文件中声明，如下所示：

```
struct mcguffin {

  int num;
  char word[20];
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:45:11.687

```
new = (struct mcguffin *)malloc(sizeof(struct mcguffin *));
                                                      ^^ 
```

您正在**为指向 mcguffin 的指针**分配足够的空间。放下`*`. 更好的是，将其更改为：

```
new = malloc(sizeof *new); 
```

你的`list`分配也是错误的。你应该分配：

```
struct mcguffin **list = malloc(10 * sizeof *list); 
```

# c# - 部分方法实现给出错误“没有找到实现部分方法声明的定义声明......”

> ID：13444366
> 
> 赞同：2
> 
> 时间：2012-11-18T20:43:43.500
> 
> 标签：c#, winforms, partial-methods

我正在编写一个需要设置表单的 Winforms 项目。对于该设置表单，我想要两种模式，基本模式和高级模式。我编写了代码以使其在这两者之间进行更改，并且为了节省时间，我希望 InitializeComponent() 方法只调用与调用相同的方法以切换到基本模式。我创建了一个这样的部分方法：

```
 partial void InitializeComponent()
        {
            BasicSettingsButton_Click(new object(), new EventArgs());
        } 
```

在我的程序文件中的部分类中（不是 Windows 窗体设计器生成的那个），并将 Window 窗体设计器生成的代码中的一个更改为：

```
 partial void InitializeComponent();
        //{
        //...
        //} 
```

我认为这是签名的正确语法，实现定义如上。

但是，当我尝试构建代码时，它告诉我“没有找到用于实现部分方法 InitializeComponent() 的声明的定义声明”，并指向我拥有的第一个代码示例。

我检查了名称，甚至复制并粘贴了相应的名称以确保它们相同，但我仍然无法运行它。这是我的代码中唯一阻止我构建和运行的错误。有任何想法吗？

# input - 西蒙游戏中的ArrayIndexOutOfBoundsException，无法弄清楚为什么

> ID：13444368
> 
> 赞同：1
> 
> 时间：2012-11-18T20:44:18.647
> 
> 标签：input

我对Java很陌生，但一般来说不是OOP。我正在开发经典的 Simon 游戏，其中用户遵循我的 Java 类的随机生成模式（实际上是数字）的递增序列。我收到一个错误：

```
java.lang.ArrayIndexOutOfBoundsException: 20
at Simon.generateSequence(Simon.java:58)
at Simon.<init>(Simon.java:23) 
```

我不知道如何解决这个问题。看起来我调用的元素并不多于数组中的元素。这是代码：

```
import acm.program.*;
import acm.graphics.*;
import java.awt.Color;
import java.awt.Font;
import javax.swing.*;
import java.awt.event.*;

public class Simon extends Program implements ActionListener
{
private int array[];
private int currentSeqLength;
private int usersInput;

public Simon()
{
    //Initialize Class Values
    array = new int[20];
    currentSeqLength = 1;
    usersInput = 0;

    generateSequence();

    while(currentSeqLength <= array.length)
    {
        playSequence();

        //Wait For User's Input Here, Assign To Variable
        //usersInput = 

        if (pushButton(usersInput)== true)
        {

            currentSeqLength++;
        }

        else
        {
            gameOverMessage();
            break;

            //Reset Variables:

        }

    }

}

public void generateSequence()
{

    //Fill Array With Random Numbers
    for (int i = 0; i <= array.length; i++ )
    {
        array[i] = (int)(Math.random()*4);

    }

}

public void setLength(int length)
{
    //Set Current Length To Size Of Given Argument
    currentSeqLength = length;

}

int getLength()
{
    return currentSeqLength;

}

int[] playSequence()
{
    //Print Out The Current Sequence

    //New Local Array To Return
    int newArray[]= new int[currentSeqLength];

    //Repeat As Many Times As Value Of currentSeqLength
    for(int i = 0; i <= currentSeqLength ; i++)
    {
        System.out.println(array[i]);

        //Return an array of int's to the player. 
        newArray[i] = array[i];

    }

    return newArray;
}

boolean pushButton(int usersInput)
{
    //Given A Button Press (0-3), Return Whether That Was The 
        //Correct Button To Play At The Moment

    if (usersInput == array[currentSeqLength])
    {
        return true;
    }

    else
    {
        return false;
    }

}

boolean isTurnOver()
{
    //If Current Sequence Length Matches Or Exceeds Value Of 
        //Array Element In Location Of Current Sequence Length

    if (currentSeqLength >= array[currentSeqLength])
    {
        return true;
    }

    else
    {
        return false;
    }

}

//Not Needed?
boolean isGameOver()
{
    if (pushButton(usersInput) == false)
    {
        return true;
    }

    else
    {
        return false;
    }
}

String gameOverMessage()
{
    return "Game Over";
}

/*public void actionPerformed(ActionEvent event)
{
    int input;

}
*/ 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:51:43.763

```
for (int i = 0; i <= array.length; i++ )
    {
        array[i] = (int)(Math.random()*4);

    } 
```

您正在从 0 循环到 20。20 是数组的长度，21 是此 for 循环将执行的迭代次数。

将 <= 替换为 <。

# c# - System.IO.Serial

> ID：13444370
> 
> 赞同：0
> 
> 时间：2012-11-18T20:44:23.807
> 
> 标签：c#, serial-port, usb, libusb, usbserial

我有一个 USB 设备，它应该在查询时发送一个号码。

我的指示是：

1.  将 USB 端口连接到 PC，然后以 9600 波特、8 个数据位、无奇偶校验、1 个停止位打开虚拟串行端口。
2.  发送 ESC（我认为是 char 27）
3.  你会得到“>”作为确认
4.  发送“c”，您将得到计数，后跟“<”

我到处看了看，一定不明白我在读什么，因为我不知道如何从单位得到回应。

1.  我是否正确发送“ESC”键？
2.  我是否正确查询响应？
3.  我是否正确显示了假设的响应？
4.  `libusb`我需要研究什么吗？我认为它是 .NET 早期版本的库。

提前致谢。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO.Ports;

namespace SerialPortTest
{
public partial class Form1 : Form
{
    System.IO.Ports.SerialPort counter = new SerialPort("COM5", 9600, Parity.None, 8, StopBits.One);
    public Form1()
    {
        InitializeComponent();
    }

    private void btnWrite_Click_1(object sender, EventArgs e)
    {
        // Get a list of serial port names. 
        string[] ports = System.IO.Ports.SerialPort.GetPortNames();

        lblOut.Text = ("The following serial ports were found:");

        // Display each port name to the console. 
        txtOut.Clear();
        foreach (string port in ports)
        {
            txtOut.Text = (port);
        }
    }

    private void Form1_KeyDown_1(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.A)
        {
            //configuring the serial port
            //serialPort1.PortName = "COM5";
            //serialPort1.BaudRate = 9600;
            //serialPort1.DataBits = 8;
            //serialPort1.Parity = Parity.None;
            //serialPort1.StopBits = StopBits.One;

            //Open the serial port
            serialPort1.Open();

            //Write data to serial port
            serialPort1.Write(Keys.Escape.ToString());

            //Read data from serial port
            //string[] number;
            //counter.DataReceived += counter.ReadExisting();
            //counter.ReadLine();
            //new SerialDataReceivedEventHandler(counter_DataReceived);
            txtOut.Text = counter.ReadLine();

            //Close the serial port
            serialPort1.Close();
        }
    }

    //private static SerialDataReceivedEventHandler counter_DataReceived(object sender, SerialDataReceivedEventArgs e)
    //{
    //    //throw new NotImplementedException();
    //    SerialPort sp = (SerialPort)sender;
    //    string indata = sp.ReadExisting();
    //    return (sp.ReadExisting());
    //}
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:11:59.097

`counter.ReadLine()`只会在读取换行符时返回，根据您给出的规范，这永远不会发生。

在第一次输入之后，您期望返回一个字节的输出，因此您应该读取一个字节。然后你需要发送一个`c`，之后你必须阅读直到你遇到一个`<`。

所以这样的事情应该有效：

```
SerialPort serialPort = new SerialPort("COM5", 9600, Parity.None, 8, StopBits.One);

var esc = new byte { 27 };
var c = new byte { 99 };

serialPort.Write(esc, 0, 1);

serialPort.ReadTo(">"); // Or ReadByte() and check if the byte read has a value of 62

serialPort.Write(c, 0, 1);

string data = serialPort.ReadTo("<"); 
```

然后，您可以将数据字符串解析为您期望的任何格式。

# iphone - Xcode 中的 NSUserDefault

> ID：13444371
> 
> 赞同：0
> 
> 时间：2012-11-18T20:44:23.460
> 
> 标签：iphone, ios, ipad, cocoa-touch, core-data

我有一个关于如何使用核心日期来更新我的公式的问题。我试过使用 NSUserDefault 但公式是空白的（虽然它保存）。所以我有两个文本字段需要更新我的公式。当用户退出应用程序时，需要保存两个文本字段日期。那么我应该如何处理这种方式......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:06:54.177

**将文本字段的内容保存**到用户默认值：

```
[[NSUserDefaults standardUserDefaults] setObject:field1.text forKey:@"field1"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

**从用户默认值加载**文本字段的内容：

```
[[NSUserDefaults standardUserDefaults] synchronize];
field1.text = [[NSUserDefaults standardUserDefaults] stringForKey:@"field1"]; 
```

CoreDat **a**与保存诸如此类的简单事物几乎没有关系。

# php - PHP MYSQL 格式 在表格中显示的时间

> ID：13444384
> 
> 赞同：-2
> 
> 时间：2012-11-18T20:46:36.770
> 
> 标签：php, mysql

> **可能重复：**
> [在 MySQL PHP 中更改日期和时间字段的显示格式](https://stackoverflow.com/questions/2411970/change-display-format-of-date-and-time-field-in-mysql-php)

我有一个包含列和信息的表以及一个日期字段，该字段存储在 mysql 数据库中并显示在 PHP 中的表中，该表在 mysql 中运行良好，但我如何正确输出和格式化它，以便它显示在表行中。我目前有这个

```
 echo "<td>".$row['date']."</td>"; 
```

但它显示为“2012-11-18 20:17:01”。如何正确格式化它，使其显示为 2012 年 12 月 13 日。

如果它有助于创建用户数据库。所以它告诉我他们第一次创建帐户的时间。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-18T20:49:01.613

**（PHP 5 >= 5.4.0）**

```
echo "<td>" . (new DateTime($row['date']))->format('d M Y') . "</td>"; 
```

**（PHP 5 >= 5.2.0）**

```
$dt = new DateTime($row['date']);
echo "<td>" . $dt->format('d M Y') . "</td>"; 
```

**（PHP 4，PHP 5）**

```
echo "<td>" . date('d M Y', strtotime($row['date'])) . "</td>"; 
```

# windows-phone-7 - 在 Windows Phone 7.1 上取消对绑定文本框的更改

> ID：13444388
> 
> 赞同：0
> 
> 时间：2012-11-18T20:46:53.460
> 
> 标签：windows-phone-7, data-binding

我有一个绑定到对象属性的文本框。如果用户编辑该控件并且不想应用更改，我如何撤消对属性的更改？

我知道我可以在编辑之前保存旧值并在用户取消编辑时恢复它们。但是，该解决方案消除了数据绑定的大部分好处，因为所有绑定的属性都必须手动重置。

这是 XAML

```
<TextBox Text="{Binding BindingText, Mode=TwoWay}"/> 
```

PageLoaded 处理程序中的代码：

```
DataContext = App.Binder; // Set data context for the page 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T04:50:59.820

您可以使用一种方式数据绑定，但这不会达到我认为的目的。

还要记住，提供了数据绑定，因此开发人员不必手动执行额外的代码行。它可以自动执行常见任务。要进行手动控制，您必须手动进行。我知道这不是您可能想要的答案，但事实就是如此。

* * *

现在我认为您可以使用额外的属性/变量和 2 个单向绑定来设置它。

让这个对象属性绑定到那个变量，即当这个属性改变时，实际的对象属性改变（只有一种方式）

文本框绑定到对象属性（一种方式），因此当对象属性更改时，文本框会反映它。

并使用一个提交按钮，该按钮将根据文本框更改临时变量值。

tempVar ----> 对象属性对象属性 ----> 文本框文本框手动更改 tempVar。

但这仍然不是直接的答案，而是一种解决方法（使用数据绑定）。

# f# - 如何通过 NuGet 分发 F# 类型提供程序？

> ID：13444389
> 
> 赞同：6
> 
> 时间：2012-11-18T20:47:03.770
> 
> 标签：f#, nuget, type-providers

我的 F# 类型提供程序似乎无法正常工作，除非它的所有依赖项都在同一个文件夹中。这不适用于通过 nuget 分发类型提供程序。关于如何解决这个问题的任何建议？

我会收到如下错误：错误 FS3033：类型提供程序“Froto.Gen.ProtoTypeProvider”报告错误：无法加载文件或程序集“Froto.Roslyn，版本=0.0.0.1，文化=中性，PublicKeyToken=null”或它的依赖项之一。该系统找不到指定的文件。

类型提供程序在此库中：packages\Froto.Gen.0.0.0.1\lib\net45\Froto.Gen.dll

依赖项都在项目中。如果我将它们全部复制到 packages\Froto.Gen.0.0.0.1\lib\net45\ 中，则类型提供程序有效。

2012-11-19 更新：我今天将创建一个 NuGet 包来更好地解释问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:55:25.453

此问题不是 F# 特定的。你绝对必须要么

*   将所有必需的依赖项作为 nuget 包的一部分提供
*   让 NuGet 知道您的包依赖于将提供所需参考的其他包

一个 nuget 包可以很容易地包含多个 dll（如果打包正确）。您可以在此处阅读有关如何创建包的更多信息：http: [//docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)

如果您在将 NuGet 与您的项目 msbuild 脚本集成时遇到问题，我建议您查看其他开源项目用于构建其 NuGet 包的脚本（例如，查看 FSharpX 或 FSharp Power Pack）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T11:38:21.757

依赖于 FSharpx.Core 的 FSharpx.TypeProviders 也存在类似问题。解决方案是使用 ILMerge 将所有依赖项合并到类型提供程序中。[检查https://github.com/fsharp/fsharpx/issues/91](https://github.com/fsharp/fsharpx/issues/91)中的线程

# c++ - 如何每年自动更改年龄

> ID：13444390
> 
> 赞同：0
> 
> 时间：2012-11-18T20:47:03.990
> 
> 标签：c++

我写了这个程序，但我有一个变量“年龄”。我如何做到这一点，这样我就不必每年改变狗的年龄？换句话说，它应该自动改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T20:49:06.640

而不是保存年龄，您应该保存生日，这样可以在需要时计算年龄

# asp.net - 部署 ASP.net 项目时如何隐藏文件？（或者根本不上传它们。）

> ID：13444394
> 
> 赞同：1
> 
> 时间：2012-11-18T20:47:34.763
> 
> 标签：asp.net, visual-studio-2010, asp.net-4.0, web-application-project, visual-web-developer-2010

在部署 ASP.net 项目时，我有一些文本文件（和其他文件）希望对公众隐藏。我怎么做？（那是什么技术术语？“隐藏”？搜索，我找不到答案，所以我可能使用了错误的术语。）

此外，如果您知道在发布时指定不上传某些文件的方法 - 我想听听。（我知道我可以通过将它们从项目中排除来做到这一点，但我宁愿它们保持包括在内，因为我在 localhost 上调试时使用它们。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:52:11.853

我想如果您希望包含文件，但无法通过 Web 请求访问，您可以查看 IIS 重定向模块。至于根本不上传文件，只需在解决方案资源管理器中选择项目，右键单击并选择属性（或按 F4），然后将构建操作更改为无。仅当您选择内容时，文件才应包含在部署中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:25:38.817

您可以将它们放在`App_Data`项目中的文件夹中，该文件夹可通过文件系统或应用程序在网络服务器上可用，但无法从 Internet 访问。

# git - 如何最小化 git 合并冲突？

> ID：13444398
> 
> 赞同：9
> 
> 时间：2012-11-18T20:47:57.627
> 
> 标签：git, shell, version-control

我们公司使用 git 来跟踪文档/代码更改，有几个人进行更改并推送到中央存储库。一般来说，他们中的大多数都是 git 或命令行工具的新手。对于他们，我们有脚本可以在进行更改后更新或发布他们的本地仓库。

是否有任何工作流程更适合此类情况，以最大程度地减少发生的合并冲突，这些冲突必须由更有 git 经验的人来解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T06:50:11.263

合并冲突的第一个原因是**每次合并之间**的时间。
您在每次合并之间等待的时间越长，您就越能确定合并冲突。

您可以通过选择[合并工作流程](https://stackoverflow.com/a/13433314/6309)（例如[git flow](http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/)）来最小化这种情况，该工作流程将提倡每个功能的分支，并促进任务的隔离。
但是只要涉及到一组*共同*的文件（在两种不同的开发中），你最终会出现合并冲突，尤其是如果你等待的时间太长。

因此，对于*分布式*VCS，学习定期发布（推/拉），并**[在合并之前学习 rebase](https://stackoverflow.com/questions/457927/git-workflow-and-rebase-vs-merge-questions/457988#457988)**。

这不仅会减少冲突的数量，还会减少**语义冲突**的数量：这些合并*似乎*是自动的（没有冲突），但会产生不正确的代码。
请参阅“[更好、更简单的‘语义冲突’示例？](https://stackoverflow.com/a/2515163/6309) ”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-18T21:15:06.107

Git 不能替代正确的开发实践。它不会为您编写*更好*的代码。

如果两个开发人员接触完全相同的代码，git 无法让他们的工作更轻松，如果是合并冲突，无论你是否在分支上，它都会是一个。

短期解决方案：使用适当的本地和远程分支来封装不同功能的工作。使用分支差异（或 github 拉取请求）来审查功能集并帮助解决差异和冲突。

长期：修复您的代码，使您的代码适应您的团队，反之亦然，并使用适当的开发实践。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T21:48:37.280

没什么神奇的。主要是纪律。

如果人们必须执行诸如拉取请求之类的操作，或者在与某些“主”存储库或分支合并之前等待审查提交，请尽量缩短审查时间。

您可能应该尝试缩短分支的生命周期，但这实际上取决于您正在从事的项目类型。

规定所有提交必须尽可能小。制定一条规则，即提交必须只改变一件事。规定不要将外观更改（如空格）与功能更改和重大重构混为一谈。（不要完全禁止空白更改 - 只需将它们与其他更改分开即可。）

除了版本控制本身之外，尝试以一种减少他们在同一周左右更改相同代码的机会的方式将任务分配给编码人员。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-18T21:54:17.537

这里有一篇文章可以帮助你更好地理解，“[一个成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)”。它指出您应该区分不同类型的分支，其中包括：

*   掌握
*   修补程序
*   发布分支
*   开发
*   特征分支

# ruby-on-rails - 您如何处理自定义图像？

> ID：13444399
> 
> 赞同：0
> 
> 时间：2012-11-18T20:48:03.430
> 
> 标签：ruby-on-rails, image, asset-pipeline

我正在创建一个 Rails 应用程序，其中将包含不同模型的多个图像。现在我想组织它们，甚至可能使用 Rails 资产管道来添加一些缓存。我不认为将图像放在 app/assets/images 中是个好主意；）。那么我该怎么做呢？

我已经尝试将图像存储在公共目录的子目录中。但后来我收到这样的路由错误：

```
ActionController::RoutingError (No route matches [GET] "/public/links/link.png") 
```

现在想请教专家。我可以把我的图像放在哪里？你的经验是什么？使用资产管道是否困难，或者这通常不是一个好主意？我也可以使用 CDN，但我认为现在这对我来说太过分了。

任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:55:43.270

我可以建议您使用像 Carrierwave 或 PaperClip 这样的图像上传器。创建它们是为了简化在 Rails 应用程序中上传图像的所有过程。看看[这个 railscast](http://railscasts.com/episodes/253-carrierwave-file-uploads?view=asciicast)。有很多关于存储的配置可能性 - localy ， S3 ， RackSpace 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:00:07.380

最好的方法是使用像 Amazon S3 这样的 CDN。如果这太过分了，那就把它们放在公共/图像中。不在资产文件夹中。

从[Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html)：

> 资产管道提供了一个框架来连接、缩小或压缩 JavaScript 和 CSS 资产。

您的图像应该已经使用 png、jpeg 或 gif 进行了压缩。

# android - src 包爆炸 eclipse

> ID：13444401
> 
> 赞同：0
> 
> 时间：2012-11-18T20:48:18.073
> 
> 标签：android, eclipse, structure

这个问题时不时地发生，我似乎看不出它为什么或如何发生，不确定它是 Eclipse 还是我或两者兼而有之

在 Eclipse 中，通常我会看到这样的结构

应用

---->源

-------->com.xxxxxx.yyyy

------------>活动1

------------>活动2

...

当发生这种情况时，一切似乎在构建中运行顺利，或者对我来说尽可能顺利，但是我有时也会看到这种情况，我不知道如何将其恢复到以前的格式

应用

---->源

-------->com

------------>xxxxxx

---------------->yyyy

-------------------->活动1

-------------------->活动2

...

发生这种情况时，事情往往会很快爆发，我无法做我通常做的事情

有什么建议么？？？发生了什么？这第二个版本损坏了吗？

![包资源管理器视图](../Images/59034c57db17a37de0fc22c9e60bda73.png)

![平面模式的第一部分](../Images/4e9645ab21f7219777f311e37cf548e1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:57:33.427

你确定你在同一个日食视图上吗？您所描述的是 Package Explorer 和 Navigation 的一般行为。它们每个都以不同的方式显示您的应用程序的内容，但这对于构建目的来说并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:05:48.957

可能您正在 eclipse 上的不同视图之间切换。顺便说一句，如果您只想在平面包导航（您描述的第一个）和分层视图之间切换，您只需单击项目资源管理器的视图菜单（视图菜单是选项卡右下方的小倒三角形项目资源管理器），

![查看菜单示例](../Images/a9fa113e0ba086ebcdc2a4b0bbc7e818.png) 单击包演示并在平面/分层之间切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T16:08:15.213

这是您的过滤器 - 设置的问题。我遇到了同样的问题，但是当将过滤器配置为 "Empty packages" 、 "Empty parent packages" （表示已选中框）时，您将获得您在“我通常看到的”中描述的通常的 convience 包列表 -图像的一部分。

# actionscript-3 - AS3 阶段 = 空？

> ID：13444408
> 
> 赞同：3
> 
> 时间：2012-11-18T20:48:39.873
> 
> 标签：actionscript-3, events, actionscript, parent-child

我刚刚尝试实现一个菜单系统，我看到了我正在开发的游戏的教程，一切都很顺利，直到我现在遇到了舞台设置为 null 的问题，我不知道如何阻止它。不断破坏它的行在 AvoiderGame.as 文件中，并且`stage.addEventListener(Event.ADDED_TO_STAGE, init);`它不断返回以下错误

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at AvoiderGame()[M:\Users\Andy\Documents\Programming For Fun\Flash\Tutorial - Avoider Game\Classes\AvoiderGame.as:29]

at States/changeState()[M:\Users\Andy\Documents\Programming For Fun\Flash\Tutorial - Avoider Game\States.as:26]

at mainMenu/brnP_Button()[M:\Users\Andy\Documents\Programming For Fun\Flash\Tutorial - Avoider Game\Classes\mainMenu.as:34] 
```

目前我编写游戏的方式是从包含以下代码的 States.as 开始。

```
package
{
import flash.display.*;
import flash.system.fscommand;

public class States extends MovieClip
{
    public function States()
    {
        changeState(null, "menu");
    }
    public function changeState (currentState, nextState)
    {
        if (currentState != null)
        {
            removeChild(currentState);
        }
        switch(nextState)
        {
            case "menu": var mm:mainMenu = new mainMenu(changeState); 
                         addChild(mm);
            break;
            case "game": var g:AvoiderGame = new AvoiderGame(changeState);
                         addChild(g);
            break;
            case "exit": fscommand("quit");
            break;
        }
    }

}

} 
```

从那里它将进入 mainMenu.as 直到用户单击播放 - 在 mainMenu.as 内部是以下代码

```
package
{
import flash.display.*;
import flash.events.*;

public class mainMenu extends MovieClip
{
var theCallBackFunction:Function;

public function mainMenu(callBack)
{
    var Background:gameBackground;
    Background = new gameBackground();
    addChild(Background);

    var btnPlay:mmPlay = new mmPlay();
    btnPlay.addEventListener(MouseEvent.MOUSE_DOWN, brnP_Button);
    btnPlay.x = width/2;
    btnPlay.y = height/2 - btnPlay.height/2;
    addChild(btnPlay);

    var btnExit:mmExit = new mmExit();
    btnExit.addEventListener(MouseEvent.MOUSE_DOWN, brnE_Button);
    btnExit.x = width/2;
    btnExit.y = height/2 - btnExit.height/2;
    btnExit.y += btnExit.height + 4;
    addChild(btnExit);

    theCallBackFunction = callBack;
}
public function brnP_Button(e:MouseEvent)
{
    theCallBackFunction(this, "game");
    return;
}

public function brnE_Button(e:MouseEvent)
{
    theCallBackFunction(this, "exit");
    return;
}

}
} 
```

现在这就是它出错的地方 - 它进入了 AvoiderGame.as，然后它以一个我不知道如何修复的错误将我踢回来 - 谁能告诉我如何修复它？

```
package
{
import flash.display.MovieClip;
import flash.utils.Timer;
import flash.events.Event;
import flash.events.TimerEvent;
import com.freeactionscript.CollisionTest;
import flash.display.Stage;

public class AvoiderGame extends MovieClip
{
    var theCallBackFunction:Function;

    public static var enemyArray:Array;
    public var enemy:Enemy
    public var Background:gameBackground;

    public var avatar:Avatar;
    public var gameTimer:Timer;

    private var _collisionTest:CollisionTest;
    private var numStars:int = 80;

    private var fireTimer:Timer; //causes delay between fires
    private var canFire:Boolean = true; //can you fire a laser

    public function AvoiderGame(callBack)
    {
        stage.addEventListener(Event.ADDED_TO_STAGE, init);
        theCallBackFunction = callBack;
    }

    private function init(e:Event):void
    {
        Background = new gameBackground();
        addChild(Background);

        enemyArray = new Array();
        var enemy = new Enemy(Math.round(1 + (500 - 1) * Math.random()), - 2, stage);
        enemyArray.push(enemy);
        addChild(enemy);

        avatar = new Avatar(stage);
        addChild(avatar);

        avatar.x = stage.stageWidth / 2;
        avatar.y = stage.stageHeight / 2;

        for (var i:int = 0; i < numStars; i++)
        {
            stage.addChildAt(new Star(stage), 1);
        }

        _collisionTest = new CollisionTest();

        gameTimer = new Timer(25);
        gameTimer.addEventListener(TimerEvent.TIMER, onTick);
        gameTimer.start();

        fireTimer = new Timer(300, 1);
        fireTimer.addEventListener(TimerEvent.TIMER, fireTimerHandler, false, 0, true);
        fireTimer.start();
    }

    public function onTick(timerEvent:TimerEvent):void 
    {
        if (Math.random() < 0.1)
        {
            trace('array length: ', AvoiderGame.enemyArray.length);
            enemy = new Enemy(Math.round(1 + (500 - 1) * Math.random()), - 28, stage);
            enemyArray.push(enemy);
            addChild(enemy);
        }

        avatar.UpdateAvatar(canFire);
        if (canFire == true)
        {
            canFire = false;
            fireTimer.start();
        }
        avatar.StayOnScreen();

        for each (var enemy:Enemy in enemyArray)
        {
            enemy.moveDown();
            enemy.StayOnScreen();
            if (_collisionTest.complex(enemy, avatar)) 
            {
                gameTimer.stop();
            }
        }
    }
    private function fireTimerHandler(e:TimerEvent) : void
    {
        //timer ran, we can fire again.
        canFire = true;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T20:52:18.060

```
public function AvoiderGame(callBack)
{
    stage.addEventListener(Event.ADDED_TO_STAGE, init);
    theCallBackFunction = callBack;
} 
```

应该是这样的

```
public function AvoiderGame(callBack)
{
    this.addEventListener(Event.ADDED_TO_STAGE, init);
    theCallBackFunction = callBack;
} 
```

调用 init 函数时不要忘记删除事件侦听器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T20:51:02.613

当显示对象未添加到舞台或显示列表中已存在其他显示对象时，舞台为空。Event.ADDED_TO_STAGE 将在 stage 设置并可用时被调度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T20:52:33.060

当您创建 AvoiderGame 对象时，它会触发构造函数。此时，该对象没有添加到舞台或显示列表中的任何对象，因此它不会对舞台有任何引用。

`init`您可以将侦听器添加到 ADDED_TO_STAGE 事件或在手动将其添加到阶段之前调用自定义方法。

# javascript - 通过javascript获取图像大小

> ID：13444410
> 
> 赞同：0
> 
> 时间：2012-11-18T20:48:52.127
> 
> 标签：javascript, jquery, html

为什么您选择**了两倍**于未显示的二阶图像大小的图像？

我的完整代码：http: [//jsfiddle.net/ayxZM/](http://jsfiddle.net/ayxZM/)

```
<script type="text/javascript">
    function handleFiles(files) {
        for (var i = 0; i < files.length; i++)
        {
            alert(files[i].size + " Bytes");
        }
    }
</script>
<input type="file" onchange="handleFiles(this.files)">​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:50:39.803

如果您选择*相同*的图像两次，则图像选择并没有真正改变，因此`onchange`不会触发处理程序。如果您选择*不同*的图像，则会显示其大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:55:52.650

因为当你第二次点击同一张图片时，文件没有变化，所以`onchange`没有触发事件，所以`handleFiles`没有调用函数，所以没有显示大小。在这种情况下使用另一个事件。也许您可以重置`handleFiles`函数内的输入文件。这样，即使用户再次选择同一张图片，也会被视为新图片，因此`onchange`会触发该事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T22:16:50.243

像这样重置您的字段。我测试了它。它完美地工作。

```
 <script type="text/javascript">

                function handleFiles(files) {
                    for (var i = 0; i < files.length; i++)
                    {
                       alert(files[i].size + ' Bytes' );
                       reset_field('handleFilesfield');
                }
                }

                function reset_field(id) {
                $('#'+id).html($('#'+id).html());
                }

            </script>
            ​&lt;form>
                <span id="handleFilesfield"><input type="file" onchange="handleFiles(this.files)"/></span>
            </form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T00:09:10.823

正如这里已经提到的：`onchange`当您选择相同的图像时不会触发（= 不要更改值 - 看到吗？这是有道理的）。但是，如果您想`onchange`每次都触发，您可以尝试在`onmousedown`事件中重置值。这样，价值就会保持提交并强制`onchange`触发。演示： http: [//jsfiddle.net/LeZuse/ayxZM/27/](http://jsfiddle.net/LeZuse/ayxZM/27/)
注意：如果您需要它与触摸兼容，您可能也想使用`ontouchstart`。

# java - 为什么 int[] a = new int[0]; 允许吗？

> ID：13444414
> 
> 赞同：16
> 
> 时间：2012-11-18T20:49:24.550
> 
> 标签：java

有没有理由

```
int[] myArray = new int[0]; 
```

编译？

**这样的表达有什么用吗？**

```
myArray[0] = 1; 
```

给`java.lang.ArrayIndexOutOfBoundsException`.

```
if (myArray == null) {
    System.out.println("myArray is null.");
} else {
    System.out.println("myArray is not null.");
} 
```

给`myArray is not null.`.

所以我看不出为什么`int[] myArray = new int[0]`应该优先于`myArray = null;`.

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-18T20:54:13.550

它只是为了减少空检查。

您可以对**空**数组进行迭代，但不能对 null 进行迭代。

考虑代码：

```
for (Integer i: myArray) {
   System.out.println(i);
} 
```

在空数组上它什么也不打印，在 null 上它会导致`NullPointerException`.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-18T20:51:45.523

为什么不？

您可以获得一个包含目录中`.exe`文件列表的数组。并且该目录可以没有`.exe`文件。

在这种情况下强制使用`null`会使创建和处理数组的逻辑复杂化，并且无济于事。

更新：更重要的是，Java 中的数组大小是在编译时决定的。确实`new int[0]`可以在编译时检测到，但`new int[System.currentTimeMillis % 10]`不能。因此，在编译时检查 0 情况并不能确保您不会得到空数组。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-18T20:51:42.883

例如：

```
public void getArraySum(int[] array) {
    int sum = 0;    

    for (int i = 0; i < array.length; i++)
        sum += array[i];

    return sum;
} 
```

这将适用于空数组，但不适用于`null`参考。

您只需保存一个多余的`null`检查。这就是为什么您也可以创建一个空列表的原因。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-18T20:50:59.703

是的，例如没有命令行参数的主方法执行。它为您提供了一个 0 大小的数组而不是 null。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-02T07:49:32.970

```
 int[] myArray = new int[0]; 
```

java中的数组是常规对象。所以上面的代码说数组大小为零。这对于防止**空指针异常**特别有用。

Similar to this even Collections API have a way to initialize to an empty place holder.

```
 List<String> list = Collections.EMPTY_LIST; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-18T20:51:23.000

```
public int[] getData()
{
    if (iGotNothinForYa)
    {
        return new int[0];
    }

    int[] data = buildUpArray();
    return data;
} 
```

在使用这样的方法返回的数据的代码中，不必进行空值检查通常更容易。特别是在遍历数组时。

```
int[] data = getData();
for (int i : data) // yay! no null check!
{
    doSomethingWith(i);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-17T01:01:57.123

An empty array can be used in thread synchronization when the goal is to use the least amount of memory for a locking object. Recall that arrays are objects, so if you wish to synchronize multiple threads on a single dummy object, the smallest object you can utilize is an empty array (possibly byte size):

```
byte bLock = new byte[0];
// Thread T1 synchronizes on this empty array object
synchronize(bLock) {
    // perform some task while blocking other threads
    // synchronizing on bLock
} 
```

# regex - 使用 sed 和 grep 搜索和替换（跳过 .svn 或 .git）

> ID：13444421
> 
> 赞同：1
> 
> 时间：2012-11-18T20:49:53.563
> 
> 标签：regex, sed, grep

我正在[使用 sed 和 grep 搜索](https://stackoverflow.com/questions/1169927/using-sed-and-grep-to-search-and-replace)boost::shared_ptr 并将其替换为 std::shared_ptr。我该如何`egrep`远离`.svn`。它导致当地腐败：

```
Transmitting file data .svn: E155017: Commit failed (details follow):
svn: E155017: Working copy text base is corrupt
svn: E200014: Checksum mismatch for text base of '/home/jeffrey/owasp-esapi-cplusplus/doc/html/_codec_8cpp_source.html':
   expected:  09ead67f10a06a392ec41455179da560
     actual:  310ceca1a9c721b40db494f62854d2df 
```

杰夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T20:52:10.623

我建议您使用[ack](http://betterthangrep.com/)而不是`grep`搜索文件。它采用与 相同的基本选项`grep`。

默认情况下，它将跳过`.svn`, `.git`... dirs 和二进制文件。

例子 ：

```
ack -rl --print0 "pattern" . | xargs -0 -l sed -i 's/pattern/other_pattern/g' 
```

所以最后：

```
ack -rl --print0 "boost::shared_ptr" . |
    xargs -0 -l sed -i 's/boost::shared_ptr/std::shared_ptr/g' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T21:01:01.767

尝试`find`_`xargs`

```
find /path/to/basedir -name .svn -prune -o -iname '*.h' -print0 , -iname '*.cpp' -print0 | xargs -0 sed -i 's/boost::shared_ptr/std::shared_ptr/g' 
```

# java - JFreeChart XYSplineRenderer 分段多项式字符串

> ID：13444422
> 
> 赞同：0
> 
> 时间：2012-11-18T20:50:11.243
> 
> 标签：java, jfreechart, spline

我有一个使用 JFreeChart 显示样条曲线的小程序。有没有办法获得分段多项式的字符串表示？我可以编写一个使用 XYSeries 中的 getX 和 getY 自己计算的方法，但我只是想知道是否有内置方法。我在 JFreeChart api 中找不到它，但也许我错过了它。我还四处寻找其他图书馆，但一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:56:43.463

`XYSplineRenderer`的父类[`XYLineAndShapeRenderer`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/xy/XYLineAndShapeRenderer.html)包含一个嵌套[`State`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/xy/XYLineAndShapeRenderer.State.html)类`GeneralPath`，其中包含您可以从中获取[`PathIterator`](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/PathIterator.html). 此相关[示例](https://stackoverflow.com/a/5878090/230513)检查`PathIterator`a 的`Polygon`，它仅包含直线段。据推测，a`GeneralPath`将包括二次和三次段。

# java - java中的递归算法实现

> ID：13444427
> 
> 赞同：0
> 
> 时间：2012-11-18T20:50:50.663
> 
> 标签：java, recursion

我正在尝试使用以下标头编写一个方法：

```
public static boolean difference(int[] numbers, int size, int difference) {...} 
```

我希望它能够确定是否可以从列表“数字”中选择任意两个整数，使得它们之间的差异等于参数“差异”。

到目前为止，我在想我应该创建一个列表，其中元素包含列表“数字”中元素的所有可能组合，然后填充所有可能差异值的另一个列表。

然后我最后会检查参数“difference”是否在该列表中。如果是，那么它将返回 true。我也想递归地执行此操作，因此将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:56:18.583

无需创建*完整*的差异列表 - 如果`numbers[1] - numbers[0]`给出所需的差异怎么办？你会浪费很多时间。您可以只使用两个嵌套`for`的 -loop 循环遍历数组并检查不同索引处的任何两个数字是否具有所需的差异；如果有，`return true`则完全退出该方法，因为没有理由继续循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:07:27.550

我假设您正在尝试学习递归，并且我假设这是家庭作业。我不会给你一个代码示例，但我希望这对你有帮助。

也许您需要考虑如何将您的问题分解为更简单的子问题。也许不是在列表中找到具有给定差异的一对更难的问题，您可以编写一个方法，通过获取列表开头的数字并将其与所有其他数字进行比较来检查是否可以找到正确的差异列表中的数字。

然后，也许您可​​以修改您的方法，使其在开始时弹出数字，检查列表的其余部分，如果不成功则使用列表的其余部分调用自身？考虑要返回什么。如果你走到这一步，你已经做到了。当您用完列表中剩余的元素时，请注意会发生什么。

# java - 类 ExecutorService 类，用户控制何时调用 Callables

> ID：13444432
> 
> 赞同：1
> 
> 时间：2012-11-18T20:51:04.213
> 
> 标签：java, android, executorservice, callable

我正在使用 ExecutorService 来安排将来要执行的任务。在看到一些“奇怪”的行为之后，我的 Callable 在通过将 Callable 提交到 ExecutorService 池返回的 Future 对象上调用 get() 之前被执行，我阅读了一些文档，发现提交的任务将在它之间执行提交或最迟在 Future 对象上调用 get() 时提交。

我的问题 - 是否有任何类允许将 Callables 提交给它并且仅在调用 get() 时才执行？在这一点上，似乎只是自己管理可调用对象并在我准备好执行它们时自己调用 call() 似乎可以完成我想要的，但我想确保已经没有服务实现了这一点。

简而言之，是否有任何替代 ExecutorService 可以让我控制何时调用提交给它的 Callables？注意 - 我希望它们调用的未来时间是可变的，并且未确定，因为我可能决定不调用它们，因此 ScheduledExecutorService 池不会在这里工作。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:05:18.460

听起来您真的想使用 a`Queue<Callable>`而只是轮询队列中的任务。

这样，您可以提交任意数量的任务，并按照您的意愿执行它们 - 一项一项。

# c# - 当不再引用订阅者时，如何实现取消订阅的事件？

> ID：13444435
> 
> 赞同：4
> 
> 时间：2012-11-18T20:51:23.093
> 
> 标签：c#, events, messaging, weak-references

我正在尝试实现一个消息传递系统，我只是使用常规的 .NET 事件，但问题是发布者的寿命比订阅者长，并且发布者持有对订阅者的引用并防止事件被取消注册。

我一直在研究弱事件，但是它们有很多不同的实现方式，我很难将我的大脑包裹在它们周围。我想要一些简单的东西。

此外，一旦事件没有引用，他们中的大多数都不会立即取消注册该事件。我想要一个在对象没有更多引用或超出范围时立即取消注册事件的系统。

我可以不使用内置的事件语法糖，而是使用各种公共静态类来促进整个工作。

我只想能够在一个类中引发一个事件，该事件将调用所有订阅者的方法，这些方法将在订阅者不再使用后立即自动取消注册。

可以做到这一点还是已经以某种方式存在于框架中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T07:37:19.993

如果我们定义一个委托：

```
public delegate void Callback (string s); 
```

如果发布者类持有一个事件：

```
public event Callback Notify; 
```

然后，订阅者构造函数将包含注册代码，并且它的类将包含将订阅事件的“更新”方法：

```
 class Subscriber 
 {
     Publisher publisher;

     public Subscriber (Publisher publisher) 
     {
      this.publisher = publisher;
      publisher.Notify += Update;
     }

    public void Update(string subjectState) 
    {
     state = subjectState;
    }
 } 
```

为了改变这个订阅者在它即将死亡时从事件中注销，我们需要为它的类实现一个终结器：

```
~Subscriber () 
 {
   if (publisher != null)
   {
     publisher.Notify -= Update;
   }
 } 
```

这样我们就可以确定订阅者将不再注册到该事件。有关“Finalize”方法的更多信息，请阅读[“MSDN”杂志上关于“垃圾收集”的这篇精彩文章](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx)。

# nfc - NFC SNEP 推送分片 - ACR122U 到 Android ICS P2P

> ID：13444436
> 
> 赞同：1
> 
> 时间：2012-11-18T20:51:24.803
> 
> 标签：nfc, nfc-p2p

它是如何完成的？文档不清楚，也没有示例。

我做的是以下..

我将数据切成小片段，然后按顺序发送这些片段。SNEP 标头仅包含在第一个片段中一次。我是否需要更改我的 SNEP 标头或 LLCP 中的某些内容？我不明白应如何更改 LLCP 以使 android 了解消息的顺序？发送完整个消息后，android 不确认收到消息。

例子将不胜感激。

C# 桌面应用程序尝试通过 NFC 点对点将数据发送到在 SIII 上运行的 android ICS。非接触式智能卡读卡器是 ACS ACR-122U/T

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:04:10.347

需要实施 SNEP 分片。LLCP 序列号需要注意，最后，我认为片段之间应该有一些确认消息，这是我出错的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:25:04.887

您需要实现 SNEP 分片并将分片封装在 LLCP 帧中。在 NFC 论坛中了解 LLCP 协议。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T20:01:50.867

是的，和你描述的一模一样。

它们在它们之间改变连续的块，就像在 SNEP 协议中指定的那样

检查这些类，我已经测试过它们并且在 4.0.4 中工作正常（不适用于 => 4.1）

# iphone - 'NSRangeException'，原因：'* -[__NSArrayM objectAtIndex:]：索引 2 超出范围 [0 .. 1]'

> ID：13444437
> 
> 赞同：1
> 
> 时间：2012-11-18T20:51:24.843
> 
> 标签：iphone, ios, nsrangeexception

我正在尝试删除一些项目，但我收到了这个 NSException：

'NSRangeException'，原因：' *** -[__NSArrayM objectAtIndex:]：索引 2 超出范围 [0 .. 1]'

这是我的代码：

```
-(void)deletePressed:(id)sender {

if (data.count > 0) {

    NSString *path = [NSHomeDirectory() stringByAppendingString:@"/Documents/Galeria/"];

    NSFileManager *manager = [NSFileManager defaultManager];

    for (NSIndexPath *indexPath in itensSelecionados) {

        NSString *result = [path stringByAppendingFormat:@"%@", [[manager contentsOfDirectoryAtPath:path error:nil] objectAtIndex:indexPath.row]];

        [manager removeItemAtPath:result error:nil];

    }

    [self viewWillAppear:YES];

}} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:09:45.017

您不能从正在迭代的数组中删除对象。
可能有几个解决方案适合您。

一种是使用一个额外的可变数组来保存所有应该删除的对象，然后遍历它并从原始数组中删除对象：

```
-(void)deletePressed:(id)sender {
    if (data.count > 0) {
        NSString *path = [NSHomeDirectory() stringByAppendingString:@"/Documents/Galeria/"];
        NSFileManager *manager = [NSFileManager defaultManager];
        NSMutableArray *filesToDelete = [NSMutableArray array];

        // Build a list of files to delete
        for (NSIndexPath *indexPath in itensSelecionados) {
            NSString *result = [path stringByAppendingFormat:@"%@", [[manager contentsOfDirectoryAtPath:path error:nil] objectAtIndex:indexPath.row]];
            [filesToDelete addObject:result];
        }

        // Actually delete the files
        for (NSString *indexPathString in filesToDelete) {
            [manager removeItemAtPath:indexPathString error:nil];
        }

        // Why do you call viewWillAppear directly ??
        [self viewWillAppear:YES];
    }
} 
```

**编辑**由于蒂亚戈的建议，在第二次迭代中
修复了`NSIndexPath`to 。`NSString`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:02:45.763

您需要以相反的行顺序进行删除。假设您有 3 行，并且您想删除索引 0 和 2 处的行。

如果您先删除索引 0 处的行，那么当您尝试删除索引 2 处的行时，它会崩溃，因为现在只剩下 2 行了。

如果先删除索引 2 处的行，然后删除索引 0，一切都会好起来的。

# html - 让滚动条出现在 div 中

> ID：13444444
> 
> 赞同：2
> 
> 时间：2012-11-18T20:51:58.910
> 
> 标签：html, css

我在以下问题上找不到明确的答案：

我有这个html：

```
<html>
<head>
    <title>Title blabla</title>
</head>

<body>
    <div id="gHeader">
    </div>
    <div id="gBody">
    </div>
</body>
</html> 
```

gHeader 是标题部分，这是菜单所在的位置，gBody 是正文部分，这是其他所有内容的所在。

当我在 gBody 中获得大量内容时，超出了屏幕的容量，右侧会出现一个滚动条。问题是这个滚动条将 gHeader 向左推了一点。

我正在寻找的解决方案是，当滚动条出现时，它只出现在 gBody 中，而不是部分出现在 gHeader 中。

我不希望滚动条影响标题的外观。特别是因为我的菜单的一部分是从右边开始的。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:54:46.517

您需要手动设置内容区域的高度，并使用`overflow:auto`. 像这样的东西可能会起作用：

```
#gHeader {
    position: fixed;
    left: 0; top: 0; right: 0; height: 150px;
}
#gBody {
    position: fixed;
    left: 0; top: 150px; right: 0; bottom: 0;
    overflow: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:56:53.887

您唯一需要的是固定高度和`overlow-y;`自动；在你的`gBody`.

例子：

```
#gBody {
    height: 600px;
    overflow-y: auto;
} 
```

# networking - Lua 二进制网络

> ID：13444446
> 
> 赞同：0
> 
> 时间：2012-11-18T20:52:06.257
> 
> 标签：networking, lua, coronasdk

尝试使用 Corona SDK 创建网络游戏，但在使用 lua 套接字时遇到了一些问题。起初我使用 tcp 和 json 数据，但现在重新制作为 udp 和二进制数据。
如何将自定义结构发送到服务器？
例如，我需要发送操作代码（short）、ID（long）和两个坐标（float）。我可以用 C 或 Java 做到这一点，但不明白如何用 Lua 做到这一点，如何将它写入套接字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T22:20:19.270

如果您想为您的数据坚持二进制表示，则可以使用[lpack](http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/#lpack)库（如果您熟悉这些方法，它的工作方式类似于 Perl 打包/解包方法）。另一种选择是将数据打包到/从 C 结构格式中的[结构库。](http://www.inf.puc-rio.br/~roberto/struct/)

还有多种[序列化](http://lua-users.org/wiki/TableSerialization)器；我写[Serpent](http://notebook.kulchenko.com/programming/serpent-lua-serializer-pretty-printer)正是为了通过套接字发送 Lua 数据。

无论哪种情况，您最终都会得到一个代表您的（打包）数据的字符串。您只需使用常规发送/接收调用（[TCP](http://w3.impa.br/~diego/software/luasocket/tcp.html)和[UDP](http://w3.impa.br/~diego/software/luasocket/udp.html)）发送此字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:13:25.023

在最一般的意义上，你*没有。*Lua 不是低级语言；它没有办法假装整数或浮点数是一袋位，它可以将其推入管道。

如果您需要发送非文本数据，那么 Lua 可能不是您最好的选择。但是（取决于 Corona 允许您做什么），您可以用 C 语言编写一个函数，该函数接受一些 Lua 值，将它们打包以便发送，并返回一个 Lua 字符串，Lua 可以将其交给 LuaSockets。这个“字符串”将作为字节数组传输，而不是人类可读的字符串。

# jquery - 自定义 jquery 验证器在 iPad 上不起作用

> ID：13444459
> 
> 赞同：2
> 
> 时间：2012-11-18T20:53:48.883
> 
> 标签：jquery, validation, datetime

我有一个特定日期控件的自定义验证器。该控件为日、月和年呈现三个下拉菜单。

该功能适用​​于 Firefox、Chrome 和 IE9/10。它在 iPad 浏览器上失败。我尝试使用 Adbode Edge Inspect 进行调试，但无法调试 javascript。

这是我的代码。有什么建议么？

```
$.validator.addMethod("validcustomdateday", function (value, element) {

    var elementName = $(element).attr("Id");
    var day = value.length === 1 ? "0" + value : value;
    var month = $("#" + elementName.substr(0, elementName.lastIndexOf("_")) + "_Month").val();
    month = month.length === 1 ? "0" + month : month;
    var year = $("#" + elementName.substr(0, elementName.lastIndexOf("_")) + "_Year").val();

    var dateStr = year + "-" + month + "-" + day;
    return !isNaN(Date.parse(dateStr));

}); 
```

这是渲染的控件

```
<div class="control-group offset2 span6">
                <label class="control-label" for="Solicitors___0__DateOfBirth">Fecha de Nacimiento</label>
                <div class="controls">

<input id="Solicitors___0__DateOfBirth_DateOfBirth" name="Solicitors()[0].DateOfBirth.DateOfBirth" type="hidden" value="">
<select class="input-mini" data-bind="value: Solicitors()[0].DateOfBirth.Day" data-val="true" data-val-number="The field Dia must be a number." data-val-required="Debe especificar el Día" data-val-validcustomdateday="Se debe especificar una fecha válida" id="Solicitors___0__DateOfBirth_Day" name="Solicitors()[0].DateOfBirth.Day" placeholder="Dia"><option selected="selected">1</option>
<option>2</option>
<!-- Other days go here -->
<option>31</option>
</select>
<select class="input-small" data-bind="value: Solicitors()[0].DateOfBirth.Month" data-val="true" data-val-number="The field Mes must be a number." data-val-required="Debe especificar el Mes" id="Solicitors___0__DateOfBirth_Month" name="Solicitors()[0].DateOfBirth.Month"><option selected="selected" value="1">Enero</option>
<option value="2">Febrero</option>
<option value="3">Marzo</option>
<option value="4">Abril</option>
<option value="5">Mayo</option>
<option value="6">Junio</option>
<option value="7">Julio</option>
<option value="8">Agosto</option>
<option value="9">Septiembre</option>
<option value="10">Octubre</option>
<option value="11">Noviembre</option>
<option value="12">Diciembre</option>
</select>
<select class="span1" data-bind="value: Solicitors()[0].DateOfBirth.Year" data-val="true" data-val-number="The field Año must be a number." data-val-required="Debe especificar el Año" id="Solicitors___0__DateOfBirth_Year" name="Solicitors()[0].DateOfBirth.Year"><option value="1993">1993</option>
<option value="1992">1992</option>
<!-- Full Year List goes here -->
<option value="1937">1937</option>
</select>
<span class="help-inline field-validation-valid" data-valmsg-for="Solicitors()[0].DateOfBirth.Day" data-valmsg-replace="true"></span>
<span class="help-inline field-validation-valid" data-valmsg-for="Solicitors()[0].DateOfBirth.Month" data-valmsg-replace="true"></span>
<span class="help-inline field-validation-valid" data-valmsg-for="Solicitors()[0].DateOfBirth.Year" data-valmsg-replace="true"></span>
                    <span class="field-validation-valid help-inline" data-valmsg-for="Solicitors()[0].DateOfBirth" data-valmsg-replace="true"></span>
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:49:05.330

通过将 Date.parse("1993-01-01") 更改为 Date.parse("1993/01/01") 进行修复。所有 Safari 浏览器都无法将第一个字符串识别为有效日期

# java - Java 条件（if 子句设置）

> ID：13444460
> 
> 赞同：1
> 
> 时间：2012-11-18T20:53:53.540
> 
> 标签：java

我想弄清楚的是当用户提出`age < 18`我希望程序停止时。与下面的“杰克”部分相同的想法如果用户名为杰克，我也希望它停止。

```
import java.util.Scanner;

class Newbie
{
  public static void main(String[] arg)
  {
    Scanner qk = new Scanner(System.in);
    int age;
    String ans;

    System.out.println("How old are you?");
    age = qk.nextInt();

    if(age < 18)
      System.out.println(age + " is too young!");           

    if(age > 18)
      System.out.println("You can enter. What is your name?");

    Scanner q = new Scanner(System.in);
    ans = q.nextLine();

    if(ans.equals("Jack"))
    System.out.println("Jack, you are not allowed to use this program.");
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:55:28.880

您可以写入`return;`以终止当前方法的执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T20:59:07.210

只需使用`System.exit(0)`在您所在的位置停止程序， `return;`只需终止该方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T21:02:16.707

考虑使用一个`boolean`字段来跟踪用户是否被授权使用该程序。

**例子：**

```
import java.util.Scanner;

class Newbie
{
    public static void main(String[] arg)
    {
      boolean authorized = true;
      Scanner qk = new Scanner(System.in);
      int Age;
      String ans;

      System.out.println("How old are you?");
      Age=qk.nextInt();
      in.nextLine(); // clear newline char from the buffer
      if(Age < 18) {
        System.out.println ( Age +" is too young! " ); 
        authorized = false;         
      }
      else { // else statement fixes logic error
        System.out.println ( " You can enter. What is your name ? " );
        ans=qk.nextLine();
        if (ans.equals("Jack")) {
          System.out.println ( "Jack, you are not allowed to use this program " );
          authorized = false;         
        }
      }
      if(authorized) {
        // Do program stuff here
      }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T20:57:02.333

放一个“返回”；在 if ( 但是把你想在 if 后面的东西放在花括号 {} 之后

因为你在主函数内部，所以 return 只会退出函数，然后退出程序

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T20:57:39.973

如果您希望它在用户输入时停止`"Jack"`，请执行以下操作：

```
if (ans.equals("Jack")) {
    System.out.println ( "Jack, you are not allowed to use this program " );
    System.exit();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-18T20:58:39.567

在这种情况下退出程序执行`return`工作，因为您只有一个非常简单的`main`设置。如果您想独立于您使用的方法停止执行，请使用以下命令。

```
if(age < 18)
  System.exit(0); 
```

在你的情况下，它会是这样的。

```
if(age < 18){
  System.out.println(age +" is too young!");
  System.exit(0);
} 
```

除此之外，您的代码中存在逻辑错误。如果用户输入*18*会发生什么？他/她仍然被允许进入，但没有任何东西可以告诉他/她。请改用此条件。

```
if(age < 18){
  System.out.println(age +" is too young!");
  System.exit(0);
} else {
  System.out.println("You can enter. What is your name?");
} 
```

# c# - 如何从代码隐藏中将 AutoGeneratedColumn 标题包装在 TextBlock 中？

> ID：13444463
> 
> 赞同：1
> 
> 时间：2012-11-18T20:54:15.367
> 
> 标签：c#, .net, wpf, xaml, mvvm

由于整个 GUI 是动态生成的，因此我在代码隐藏中完全有一个 DataGrid。

我偶然发现了一个问题，即我的 dataGrid 中的标题不显示下划线。因此，我读到将标题包装在 TextBlocks 中将解决此问题。

但是，我的 DataGrid 的源是一个 DataTable，我不确定如何将列的标题包装在 TextBlock 中，因为所有内容都是自动生成的。

这是我的代码：

```
DataGrid dgResults = new DataGrid();
dgResults.IsReadOnly = true;
dgResults.AutoGenerateColumns = true;
dgResults.CanUserAddRows = false;
dgResults.CanUserDeleteRows = false;
dgResults.CanUserReorderColumns = false;
dgResults.CanUserResizeColumns = false;
dgResults.CanUserResizeRows = false;
dgResults.CanUserSortColumns = false;
dgResults.ItemsSource = dtResults.AsDataView(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:57:55.510

如果有人有类似的问题，我已经自己解决了。这可以在 DataGrid 的 OnColumnGenerating 事件中处理。

# c# - 在 WPF 中的视图中加载数据时显示进度圈

> ID：13444464
> 
> 赞同：0
> 
> 时间：2012-11-18T20:54:19.463
> 
> 标签：c#, .net, wpf, caliburn.micro

每当我的 UI 加载某些内容时，我想显示一个进度圈。

我尝试在 shellView 中使用布尔值并将其设置为 true 或 false。

```
IsBusy=true; 
```

但是当我将 Caliburn Micro 用于 MVVM 时，视图没有显示进度圈，因为 UI 在后台工作时冻结。我尝试使用后台工作人员，但没有工作。

当我的视图很忙时，我想显示一个进度指示器。可能正在加载 ComboBox 或执行一些后台任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:06:18.847

如果您正在执行后台任务（例如从 Web 服务检索数据），您可以使用`BackgroundWorker`或`Task.Factory.StartNew()`在 .Net 4.0 中在单独的线程中执行该操作（而不是在所谓的“UI 线程”中执行）。这将允许您的视图在执行后台操作时保持响应。

现在，在加载视图本身的情况下，您无法在单独的线程中执行此操作，因此无法阻止 UI 在完全加载之前冻结一会儿。

因此，一个选项是在单独的线程中创建一个“覆盖窗口”（因此有自己的调度程序），这将是一个透明窗口，位于当前加载的窗口的“上方”（按 Z 顺序）。覆盖窗口保持响应，因为它有自己的调度程序，因此您可以显示加载指示器或动画，并在加载完成时将其删除。

[这](http://graemehill.ca/wpf-responsiveness-asynchronous-loading-animations-during-rendering)是我的意思的一个例子。

# ruby - 如何每天将 DataMapper 集合切成一个集合？

> ID：13444471
> 
> 赞同：0
> 
> 时间：2012-11-18T20:55:04.380
> 
> 标签：ruby, database, sinatra, datamapper, ruby-datamapper

我有一个 DataMapper::Collection 对象。它的每个条目都有一个`created_at`属性。我想将条目呈现到 html 表中，每天一张表（为此我使用 Sinatra）。

将所有内容渲染到一张表中是没有问题的，但我并没有让它每天都这样做。我想到了一个 DataMapper::Collection 对象数组，我将对其进行迭代并完成工作。但我不知道如何构建这样一个数组：/

有谁知道如何解决我的问题，或者有没有人有不同/更好的方法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:16:22.127

你有（至少）两个选择。首先是让数据库为您完成工作**。**我不了解数据映射器，但大多数数据库映射器（！）都具有使用 SQL 的 GROUP BY 进行分组的功能。在这种情况下，您必须使用数据库函数从时间戳中获取日期，然后对其进行分组。这是最快的选择，如果您和未来的维护人员熟悉关系数据库，这可能也是最好的选择。

第二**个**选项是到您的代码中的映射。我现在不能想出一个优雅的 Ruby 东西，但你至少可以这样做：

```
mapped_result = Hash.new [] # initiates each new entry with empty array
mapper_collection.each do |one_record|
  mapped_result[one_record.created_at.strftime '%Y-%m-%d'] << one_record
end 
```

然后你可以录制一天

```
mapped_result['2012-11-19'] 
```

# php - PHP中的数字输入验证

> ID：13444474
> 
> 赞同：0
> 
> 时间：2012-11-18T20:55:08.323
> 
> 标签：php

我正在尝试验证 php 表单中帐​​号的输入。它应该包含 8 个数字和可选的“-”。如果有'-' - 它应该被忽略。按下提交按钮后，如果输入无效，则应在表单上方显示警告消息。

请帮忙。

这是我到目前为止得到的，但我不确定这是否正确，也不知道如何在表单上方显示警告消息。

```
$acctnum= "$acctnum";

if(empty($acctnum)){
  echo "You did not enter an account number, please re-enter"; }

else if(!preg_match("\-^[0-9]{8}", $acctnum)){
  echo "Your account number can only contain eight numbers. Please re-enter."; } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:57:32.567

你似乎没有在尝试。没有文档或教程会告诉您制作这样的正则表达式。首先，分隔符在哪里？为什么`-`当它在字符类之外并因此没有特殊含义时会被转义？那`^`在那儿做什么？

这应该这样做：

```
$acctnum = str_replace("-","",$acctnum);
if( !preg_match("/^\d{8}$/",$acctnum)) echo "Error..."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:02:07.093

由于正则表达式非常昂贵，我会这样做：

```
$acctnum = (int) $acctnum; // this automatically ignore the '-'
if ($acctnum < 0) $acctnum = -$acctnum;
$digits = ($acctnum == 0) ? log10($acctnum) + 1 : 1;
if ($digits === 8) { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T21:12:52.293

将任务一分为二。首先去掉“-”，`str_replace`然后检查数字。

```
$match = preg_match("/^\d{8}$/", str_replace("_", "", $str));
if ($match > 0) {
    // Correct
} else {
    // incorrect
} 
```

# php - 从另一个 PHP 页面上运行的查询创建 mysql 表

> ID：13444482
> 
> 赞同：-2
> 
> 时间：2012-11-18T20:55:42.250
> 
> 标签：php, html, mysql, tabular

我有一个 PHP 页面，可以在按下按钮时处理一些信息。其中一个信息是处理查询。然后，我希望将查询结果放入另一个页面的表中。我知道如何将查询结果放入表中，但我不知道如何将它们逐行传递到另一页上的表中。任何人都可以帮助或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:57:13.740

如果我理解正确，您将需要 AJAX（并且，根据要求，JavaScript）。你想要做的是调用你的生成函数并让它返回一个你可以解析的格式（JSON、XML，你可以命名它）。

从那里，您将使用 JavaScript 的 DOM 操作函数将其附加到您的表中。

**世代部分**

假设您以数组格式获取数据，如下所示：

```
$row = array('column 1','column2'); 
```

你会得到很多这样的行，或者只有一个 - 我们将编写脚本来处理这两种情况，而无需重写。每次获得一行时，将其添加到非关联数组中，称为 $RowArray。所以，在每一行，你都会调用`$RowArray[] = $row;`.

您现在几乎完成了 PHP 端 - 您现在需要做的就是将其回显给客户端。确保你*只*回显这个：`echo json_encode($RowArray);`。这会将您的数组格式化并序列化为完美的 JSON 对象。

**JavaScript 方面**

为简单起见，我们假设使用 jQuery。您的目标是读取 JSON 对象并将行添加到表中。我们假设该表的 ID 为 #MyTable。

AJAX 调用如下：

```
$.ajax({
  url: "your_url.php",
  dataType: "json",
  type: "post",
  success: function(d) {
     // Your code here
  }
}); 
```

`success`成功解析对象后将触发处理程序，变量将`d`是对象。该对象将是一个 JavaScript 数组，其中每个元素都是一个对象。您现在需要做的就是循环`d`并为每个条目创建一行！

```
success: function(d) {
   for(var i=0; i < d.length; i++) {
      var newRow = $("<tr></tr");
      for (var k in d[i]) {
          newRow.append($("<td></td>").text(d[i][k]));
      }
      newRow.appendTo($("#MyTable"));
   }
} 
```

瞧，六行动态 AJAXified 表！

# python - 这个具有“更好” __repr__() 的抽象基类是否危险？

> ID：13444487
> 
> 赞同：0
> 
> 时间：2012-11-18T20:56:21.303
> 
> 标签：python, pickle, signature, abc, repr

让我感到`__repr__()`困扰的是，一个类的默认值是如此无信息：

```
>>> class Opaque(object): pass
... 
>>> Opaque()
<__main__.Opaque object at 0x7f3ac50eba90> 
```

...所以我一直在考虑如何改进它。经过一番考虑，我想出了这个利用`pickle`协议[`__getnewargs__()`](http://docs.python.org/2/library/pickle.html#object.__getnewargs__)方法的抽象基类：

```
from abc import abstractmethod

class Repro(object):

    """Abstract base class for objects with informative ``repr()`` behaviour."""

    @abstractmethod
    def __getnewargs__(self):
        raise NotImplementedError

    def __repr__(self):
        signature = ", ".join(repr(arg) for arg in self.__getnewargs__())
        return "%s(%s)" % (self.__class__.__name__, signature) 
```

这是其用法的一个简单示例：

```
class Transparent(Repro):

    """An example of a ``Repro`` subclass."""

    def __init__(self, *args):
        self.args = args

    def __getnewargs__(self):
        return self.args 
```

...以及由此产生的`repr()`行为：

```
>>> Transparent("an absurd signature", [1, 2, 3], str)
Transparent('an absurd signature', [1, 2, 3], <type 'str'>)
>>> 
```

现在，我可以看到 Python 在默认情况下不立即执行此操作的一个原因 - 要求每个类定义一个`__getnewargs__()`方法比期望（但不要求）它定义一个`__repr__()`方法更加繁琐。

我想知道的是：它有多危险和/或脆弱？副手，我想不出任何可能出错的地方，除非一个`Repro`实例包含自己，你会得到无限递归......但这是可以解决的，代价是使上面的代码更丑陋。

我还错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:40:59.687

如果你喜欢这种事情，为什么不`__init__`使用装饰器自动提取参数呢？然后，您不需要手动处理它们给用户带来负担，并且您可以透明地处理具有多个参数的普通方法签名。这是我想出的一个快速版本：

```
def deco(f):
    def newFunc(self, *args, **kwargs):
        self._args = args
        self._kwargs = kwargs
        f(self, *args, **kwargs)
    return newFunc
class AutoRepr(object):
    def __repr__(self):
        args = ', '.join(repr(arg) for arg in self._args)
        kwargs = ', '.join('{0}={1}'.format(k, repr(v)) for k, v in self._kwargs.iteritems())
        allArgs = ', '.join([args, kwargs]).strip(', ')
        return '{0}({1})'.format(self.__class__.__name__, allArgs) 
```

现在您可以正常定义 AutoRepr 的子类，使用正常`__init__`签名：

```
class Thingy(AutoRepr):
    @deco
    def __init__(self, foo, bar=88):
        self.foo = foo
        self.bar = bar 
```

并且`__repr__`自动工作：

```
>>> Thingy(1, 2)
Thingy(1, 2)
>>> Thingy(10)
Thingy(10)
>>> Thingy(1, bar=2)
Thingy(1, bar=2)
>>> Thingy(bar=1, foo=2)
Thingy(foo=2, bar=1)
>>> Thingy([1, 2, 3], "Some junk")
Thingy([1, 2, 3], 'Some junk') 
```

穿上`@deco`你`__init__`的比写一个整体要容易得多`__getnewargs__`。如果您甚至不想这样做，您可以编写一个`__init__`以这种方式自动装饰方法的元类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T22:36:22.407

整个想法的一个问题是，可能有一些对象的状态不完全依赖于其构造函数的参数。对于一个简单的情况，考虑一个具有随机状态的类：

```
import random

def A(object):
    def __init__(self):
        self.state = random.random() 
```

这个类没有办法正确实现`__getnewargs__`，所以你的植入`__repr__`也是不可能的。可能是像上面这样的类设计得不好。但是`pickle`可以毫无问题地处理它（我假设使用`__reduce__`继承自的方法`object`，但我的pickle-fu不足以肯定地说）。

这就是为什么`__repr__`可以编写代码来做任何你想做的事情是件好事。如果您希望内部状态可见，您可以让您的班级`__repr__`这样做。如果对象应该是不透明的，您也可以这样做。对于上面的类，我可能会`__repr__`这样实现：

```
def __repr__(self):
    return "<A object with state=%f>" % self.state 
```

# android - 加载 i 应用程序时照片模糊

> ID：13444488
> 
> 赞同：-1
> 
> 时间：2012-11-18T20:56:44.967
> 
> 标签：android, save, photo, blurry

我已经实现了这种拍照风格。当我拍完照片后预览照片时，它很漂亮，但是当我在应用程序中重新加载它时，它看起来很模糊。这是代码，有谁知道我可以做些什么来修复它？

```
private void takePhoto(int actionCode) 
    {
        takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(takePictureIntent, actionCode);
    }
    protected void onActivityResult(int requestCode, int resultCode, Intent intent)
    {
        super.onActivityResult(requestCode, resultCode, intent);
        Bundle extras = intent.getExtras();
        newImageP = (Bitmap) extras.get("data");
        newImage.setImageBitmap(newImageP);     
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:01:50.127

这样做的原因是相机活动发回了图像的缩略图。如果这个低质量的图像被放大，你会看到它模糊。

要获得全分辨率图像，您应该使用以下额外内容调用相机活动

```
Intent cameraIntent = new Intent( MediaStore.ACTION_IMAGE_CAPTURE );
cameraIntent.putExtra( MediaStore.EXTRA_OUTPUT, Uri.fromFile(   temporalPictureFile ) );
startActivityForResult(cameraIntent, actionCode); 
```

这样相机应用程序就可以将图像的内容转储到物理文件中，而不会因为应用程序内存非常有限而混乱。据我记得，该文件在将其传递给意图之前必须存在。

# google-visualization - 将 html 添加到谷歌图表工具提示

> ID：13444493
> 
> 赞同：1
> 
> 时间：2012-11-18T20:57:06.743
> 
> 标签：google-visualization

我正在使用谷歌图表 api。

javascript代码：

```
 var data = new google.visualization.DataTable();
       data.addColumn('number', 'buy'); 
       data.addColumn('number', 'sell'); 
       data.addColumn({type:'string', role:'tooltip'});
       data.addRows( ... my data here  ... 
                   [[ 10 ,12 , "I'm very long long message in tooltip" ] [ ...  and more data. 
```

图表上的工具提示在 1 行中显示“我在工具提示中的消息很长”。

我怎样才能使工具提示为 50px 宽度......或有里面
？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T12:33:07.963

您应该在 OPTION 对象上设置以下内容：

```
options = {
    tooltip: {isHtml: true}
}; 
```

您还应该修改该行：

```
data.addColumn({type:'string', role:'tooltip'}); 
```

在：

```
data.addColumn({'type': 'string', 'role': 'tooltip', 'p': {'html': true}}); 
```

希望这可以帮助。

# python - Python 一种快速计算列表中匹配项的方法

> ID：13444495
> 
> 赞同：0
> 
> 时间：2012-11-18T20:57:17.097
> 
> 标签：python

```
print sum(1 for x in alist if x[1] == 8) 
```

这段代码运行良好，但是太慢了。有没有比这更好的方法。因为，我的列表非常大，计算需要很多时间。你知道更好更快的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:00:03.557

您必须创建索引或缓存计数来加速此类代码；用内存换速度。

无论您在哪里处理您的列表（添加到列表、从中删除、编辑条目），您还可以维护您的索引。例如，如果您有一个以 id 作为键并将其频率作为值的计数字典，您所要做的就是直接查找计数，并确保在您操作时计数保持最新`alist`。

管理此问题的最佳方法是将列表封装在自定义类型中，以便您可以控制数据结构的所有操作并维护额外信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:00:45.333

不知道它会快多少，但是

```
len([x for x in alist if x[1] == 8]) 
```

是清楚一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T20:47:53.900

我会使用 numpy. 我的 numpy 技能有点生疏，但`len(np_array == 8)`可以为您提供单个深度数组所需的东西。我想对你来说会是`len(np_array[:,1])`，但我必须检查（这假设你的问题可能使用 numpy 数组）

# python - 如何使用 matplotlib 正确显示此线图

> ID：13444497
> 
> 赞同：3
> 
> 时间：2012-11-18T20:57:28.480
> 
> 标签：python, matplotlib

我有这些数据结构：

```
 X axis values:
 delta_Array = np.array([1000,2000,3000, 4000, 5000, 6000, 7000, 8000, 9000, 10000])

  Y Axis values
   error_matrix = 
 [[ 24.22468454  24.22570421  24.22589308  24.22595919  24.22598979
    24.22600641  24.22601644  24.22602294  24.2260274   24.22603059]
  [ 28.54275713  28.54503017  28.54545119  28.54559855  28.54566676
    28.54570381  28.54572615  28.54574065  28.5457506   28.54575771]] 
```

如何使用 matplotlib 和 python 将它们绘制为线图

我想出的这段代码呈现如下图（3）i = 0

```
 for i in range(error_matrix.shape[0]):
  plot(delta_Array, error_matrix[i,:])

 title('errors')
 xlabel('deltas')
 ylabel('errors')
 grid()
 show() 
```

这里的问题看起来像是轴的缩放。但我不知道如何解决它。任何想法，建议如何正确显示曲率？

![在此处输入图像描述](../Images/1b93c6d4002b1abda48b6363932d9513.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:10:48.547

您可以使用`ax.twinx`创建双轴：

```
import matplotlib.pyplot as plt
import numpy as np

delta_Array = np.array([1000,2000,3000, 4000, 5000, 6000, 7000, 8000, 9000, 10000])

error_matrix = np.array(
    [[ 24.22468454, 24.22570421, 24.22589308, 24.22595919, 24.22598979, 24.22600641, 24.22601644, 24.22602294, 24.2260274, 24.22603059],
     [ 28.54275713, 28.54503017, 28.54545119, 28.54559855, 28.54566676, 28.54570381, 28.54572615, 28.54574065, 28.5457506, 28.54575771]])

fig = plt.figure()
ax = []
ax.append(fig.add_subplot(1, 1, 1))
ax.append(ax[0].twinx())
colors = ('red', 'blue')

for i,c in zip(range(error_matrix.shape[0]), colors):
    ax[i].plot(delta_Array, error_matrix[i,:], color = c)
plt.show() 
```

产量

![在此处输入图像描述](../Images/1b493920d4c01cdac2a44506564c72aa.png)

红线对应`error_matrix[0, :]`，蓝线对应`error_matrix[1, :]`。

另一种可能性是绘制比率`error_matrix[0, :]/error_matrix[1, :]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T04:48:01.867

Matplotlib 向您展示了正确的东西。如果您希望两条曲线在相同的 y 尺度上，那么它们将是平坦的，因为它们的差异远大于每条曲线的变化。如果您不介意不同的 y 比例，那么按照 unutbu 的建议进行操作。

如果您想比较函数之间的变化率，那么我建议按每个函数中的最大值进行标准化：

```
import matplotlib.pyplot as plt
import numpy as np

plt.plot(delta_Array, error_matrix[0] / np.max(error_matrix[0]), 'b-')
plt.plot(delta_Array, error_matrix[1] / np.max(error_matrix[1]), 'r-')
plt.show() 
```

![功能](../Images/697b45acb83238eadb3de8f91e0895cd.png)

顺便说一句，您不需要明确说明 2D 数组的维度。使用时`error_matrix[i,:]`与`error_matrix[i]`.

# ajax - 基于 AJAX 的网站会阻止 JavaScript 在每次页面加载时重新评估吗？

> ID：13444509
> 
> 赞同：0
> 
> 时间：2012-11-18T20:58:50.130
> 
> 标签：ajax

我正在制作一个网络应用程序，我考虑过使用 AJAX 来使网站更快。在实践中使用 AJAX 更新 container-div 会导致网站更快吗？由于缓存，加载不会有任何影响，但它是否会更快，因为 JavaScript 不必在每次页面加载时重新评估？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:00:46.447

如果您对所有内容都使用 AJAX，则不会加载页面，所以是的，JS 只评估一次。

总体上传输的数据也更少，因此事情应该更快。

但是，请确保每个页面仍然有一个可以访问的 URL，以便在没有 JS 的情况下获取该内容，以便 Google 等。仍然可以索引该站点（如果这很重要！）

# ios - 如何在 IOS 中存储 OptionDialog 选项的自定义属性？

> ID：13444510
> 
> 赞同：1
> 
> 时间：2012-11-18T20:58:53.653
> 
> 标签：ios, titanium, appcelerator, titanium-mobile, appcelerator-mobile

在查看文档时，您似乎只能将 options 属性设置为字符串数组。当用户选择一个选项时，我需要知道与选项对话框中显示的字符串相关联的数字 ID #。如果我不能通过每个选项传递自定义属性，我将如何处理？这是针对 iPad 应用程序的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:53:21.827

您将索引作为单击事件的属性，在单击选项之一时触发

```
 var dialog = Titanium.UI.createOptionDialog({
    options:['Option 1', 'Option 2', 'Option 3']
});
 dialog.addEventListener('click',function(e) {
    switch (e.index) {
        case 0: //do something
               break;
        case 1: // Option 2
               break;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:41:40.083

如果所选项目的索引，您可以访问您需要的项目

# android - 导致堆大小和分配的内存之间存在这些差异的因素是什么？

> ID：13444511
> 
> 赞同：1
> 
> 时间：2012-11-18T20:59:05.123
> 
> 标签：android, memory-management, heap-memory

我已经跟踪了堆大小并在不同设备上分配了内存。我想知道为什么这些价值观之间存在差异，您的处理方法是什么？感谢您的帮助。

**我的 layout.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerInParent="true" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/square1" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/hello_world"
            android:textSize="@dimen/txt_size" />

    </FrameLayout>

</RelativeLayout> 
```

设备

![设备](../Images/d4d39e0f31b9f984e4af2dc9e5357509.png)

**i9100**

![i9100](../Images/20dfe88946dee03056ff0ff7b3060424.png)

**p6700**

![p6700](../Images/29077c2b9fa4b155812da7680a7c15fb.png)

**n7000**

![n7000](../Images/7679059e2ac7adabeffac2e3fb0747ba.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:13:07.810

dalvik vm 堆大小在每个 android 版本/设备上的 /system/build.prop 首选项文件中设置。确切的偏好键是***dalvik.vm.heapsize***。该值以兆字节为单位，取决于设备功能

如何处理不同的值？以下是一些一般性提示

*   始终让您的应用在您计划支持的最低规格设备上可用
*   为每种类型的设备提供所有类型的资源，特别是图像和视频。
*   对引用要格外小心，因为它们可能会阻止垃圾收集器取回内存（又名内存泄漏）

# c# - 隔离存储文件不写入文件

> ID：13444519
> 
> 赞同：1
> 
> 时间：2012-11-18T20:59:33.923
> 
> 标签：c#, persistence, isolatedstorage

我必须在会话之间存储控件的内容。这就是我所做的：

```
 private void Window_Closing(object sender, CancelEventArgs e)
    {
        IsolatedStorageFile f = IsolatedStorageFile.GetUserStoreForAssembly();
        using(IsolatedStorageFileStream stream = new IsolatedStorageFileStream("somefilename", FileMode.Create, f))
        using(StreamWriter writer = new StreamWriter(stream))
        {
            foreach(string path in searchFoldersListView.Items)
            {
                writer.WriteLine(path);
            }
        }
    } 
```

这是附加到`Closing`窗口的事件。调试时，控件遍历所有项目，但是当我再次运行程序时，控件为空。事实证明，当我导航到该文件时，它是空的。当我通过将 a 放入 foreach 循环中更改代码以保存到常规文件`File.AppendAllText()`时，该文件保存得很好。这是为什么？

编辑：阅读事件处理程序：

```
 private void Window_Initialized(object sender, EventArgs e)
    {
        IsolatedStorageFile f = IsolatedStorageFile.GetUserStoreForAssembly();
        using(IsolatedStorageFileStream stream = new IsolatedStorageFileStream("somefilename", FileMode.OpenOrCreate, f))
        using(StreamReader reader = new StreamReader(stream))
        {
            string line = reader.ReadLine();
            while(line != null)
            {
                searchFoldersListView.Items.Add(line);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:04:02.410

您的方法中有一个从文件读取的错误。您只阅读了第一行，可能是`null`. 尝试以下操作：

```
 using(StreamReader reader = new StreamReader(stream))
    {
        string line = reader.ReadLine();
        while(line != null)
        {
            searchFoldersListView.Items.Add(line);
            line = reader.ReadLine();
        }
    } 
```

# java - 验证子字符串中的端点，无需拆分

> ID：13444521
> 
> 赞同：0
> 
> 时间：2012-11-18T20:59:56.027
> 
> 标签：java, regex

我想验证（最好使用 .matches()）例如“ookd&sr34!abc* *%* *blabla.h”中的 % 之前的部分不以例如“k”开头或结尾。但是，必须允许在这些端点之间使用“k”（以 % 开头，不包括）。

我不能使用结束锚，因为我不想要整个字符串的结尾。另外，我不想拆分字符串，我想在一个正则表达式中完成所有操作。

可能是某种前瞻？我被困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:06:32.810

试试这个正则表达式`^k.*k%`。

```
matches("ookd&sr34!abc*%*blabla.h") -> false
matches("kokd&sr34!abc*k%*blabla.h") -> true
matches("kookd&sr34!abc*%*blabla.h") -> false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:11:33.437

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class TestClass {    
  public static void main(String[] args) {
    String myString = "ookd&sr34!abc*%*blabla.h";
    Pattern p = Pattern.compile("^k.*k%");
    Matcher m = p.matcher(myString);
    while(m.find()){
      System.out.println(m.group());
    }
    System.out.println(Pattern.matches("^k.*k%.*", myString));
    System.out.println(myString.matches("^k.*k%.*"));
  }
} 
```

以前从未使用过匹配项，但它似乎需要 .* 最后，在 % 之后，否则它将返回 false - 大概是因为它评估整个字符串，而不仅仅是像 Matcher.find() 方法那样评估它的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T21:12:43.793

就像是

```
str.matches("(?!k)[^%]*(?<!k)%.*") 
```

如果您忽略环视，这将匹配任何字符序列，直到第一个 %，然后是 %，然后是其他所有字符。开头的前瞻确保第一个字符（如果有的话）不是 k，而后瞻确保第一个 % 之前的最后一个字符（如果有的话）不是 k。与天真不同，`[^k].*?[^k]%`这允许在 % 之前有少于两个字符的情况。

# r - 使用 lm 对象填充列表

> ID：13444524
> 
> 赞同：8
> 
> 时间：2012-11-18T21:00:16.683
> 
> 标签：r, list, for-loop

我正在尝试用 R 中的 OLS 的结果填充命名列表。我试过了

```
li = list()
for (i in 1:10)
    li[["RunOne"]][i] = lm(y~x) 
```

这`RunOne`是一个随机名称，用于指定拟合运行一次，`y`并且`x`是一些预定义的向量。这打破并给了我错误

```
Warning message:
In l[["RunOne"]][1] = lm(y ~ x) :
  number of items to replace is not a multiple of replacement length 
```

虽然我理解错误，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T21:07:08.517

有两种解决方案（具体取决于您想要做什么）。

1.  创建一个列表，并`lm`为每个元素添加一个对象：

    ```
    li = list() 
    for (i in 1:10) 
        li[[i]] = lm(y~x) 
    ```

2.  有一个列表列表：

    ```
    li[["RunOne"]] = list()
    for (i in 1:10) 
        li[["RunOne"]][[i]] = lm(y~x) 
    ```

通常，单括号`[ ]`用于向量和数据框，双括号用于列表。

# c# - 如何在没有内存问题的情况下加载/操作巨大的图像？

> ID：13444526
> 
> 赞同：2
> 
> 时间：2012-11-18T21:00:39.657
> 
> 标签：c#, asp.net, c#-4.0

尝试将巨大的图像（例如 9000x9000 像素的图像）加载到 Bitmap 对象中可能会产生内存不足错误、[“参数无效”错误](https://stackoverflow.com/questions/6333681/c-sharp-parameter-is-not-valid-creating-new-bitmap)以及毫无疑问的其他相关问题。

如何从磁盘加载 9000x9000 像素的图像，最终在保存回磁盘之前调整其大小，而不会导致致命错误（例如内存不足）？

让我们假设一个 32 位环境，具有 2gb 的 ram，C# 4.0，并且将使用 jpg、gif、bmp、tif、png 的图像格式。

我尝试了以下 3 个片段，每个片段都因内存错误而失败。

尝试1：

```
using (Bitmap srcImg = new Bitmap(@"C:\9000x9000.jpg"))
{
    // boom
} 
```

尝试2：

```
using (Image srcImg = Image.FromFile(@"C:\9000x9000.jpg"))
{
    // kapow
} 
```

尝试 3：

```
using (FileStream fs = new FileStream(@"C:\9000x9000.jpg", FileMode.Open, FileAccess.Read))
{
    using (Image srcImg = Image.FromStream(fs))
    {
        // kelly clarkson
    }
} 
```

我对一个可能的解决方案的想法是将图像文件直接加载到一个数组中（这样你就没有 Bitmap 对象的巨大开销），以某种方式使用该数组将其调整为更小（可能需要为不同的图像格式标题编码？ )，在最终转换为可管理大小的 Bitmap 对象之前。

想法或可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:21:53.660

看看[AForge.Net 库](http://www.aforgenet.com/framework/)，[据说它擅长](https://stackoverflow.com/questions/538746/what-libraries-are-available-for-manipulating-super-large-images-in-net)处理大文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T12:12:57.577

以下是我为其工作所遵循的步骤：

1.转到[http://www.opennetcf.org/PermaLink.aspx?guid=d57ace50-2762-4b19-b07d-39421829d410](http://www.opennetcf.org/PermaLink.aspx?guid=d57ace50-2762-4b19-b07d-39421829d410)并下载下载 SDF 2.0 Beta1 Redistributables。安装。

2.在针对 PPC 2003 SE 设备的 VS.NET 2005 中创建一个智能设备项目。我必须右键单击我的项目并选择“升级”以确保它针对的是 .NET CF v2.0 而不是 .NET CF 1.1 SP3。

3.我添加了OpenNETCF.dll和OpenNETCF.Drawing.dll文件作为默认安装目录（C:\Program Files\OpenNETCF\Smart Device Framework 2.0）的引用

4.我在表单上创建了一个带有图片框的简单应用程序，它会在加载表单时加载我的图像。以下是相关代码，其中一些是从 Alex Feinman 的网络日志中复制而来的：

```
#region Using directives
using System;
using System.Drawing;
using System.Collections;
using System.Windows.Forms;
using System.Runtime.InteropServices;
using OpenNETCF.Drawing.Imaging;
using System.IO;
#endregion

....

const string szFileName = @"\Storage Card\TEMP\2MBJPEG.JPG";

private void Form1_Load(object sender, EventArgs e)
{
IBitmapImage imageBitmap;
FileStream fsImage;
fsImage = new FileStream(
    szFileName,
    FileMode.Open);
imageBitmap = CreateThumbnail(
    fsImage,
    new Size(100, 100));

Bitmap bm = ImageUtils.IBitmapImageToBitmap(
    imageBitmap);
pictureBox1.Image = bm;
}

static public IBitmapImage CreateThumbnail(Stream stream, Size size)
{
IBitmapImage imageBitmap;
ImageInfo ii;
IImage image;
ImagingFactory factory = new ImagingFactoryClass();
    factory.CreateImageFromStream(
    new StreamOnFile(stream), 
    out image);
image.GetImageInfo(out ii);
factory.CreateBitmapFromImage(
    image, 
    (uint)size.Width, 
    (uint)size.Height,
    ii.PixelFormat, 
    InterpolationHint.InterpolationHintDefault, 
    out imageBitmap);
    return imageBitmap;
} 
```

# c++ - 使用 BST 实现队列

> ID：13444531
> 
> 赞同：3
> 
> 时间：2012-11-18T21:01:01.357
> 
> 标签：c++, c, binary-search-tree

如何使用 BST 实现队列。

这是这样做的方法吗，继续在树中插入节点，同时保持与每个节点关联的计数值，但是在删除 BST 时应该像队列（FIFO）一样工作，所以开始从 BST 中删除具有最低计数的节点树中的值。

我得到了正确的问题和解决方案吗？如果没有，那么请向我解释这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:36:37.053

BST 实际上是一种不适合用于支持队列的数据结构。你真的应该使用链表，因为它会更快，更简单，更简单。

但是，如果您坚持使用 BST...

您可以将 BST 用作优先级队列，并定义一个包含“队列索引”的包装器类型，这是对项目进行排序的依据。但是，您必须定义比较以考虑当前队列索引，因为否则您只能添加与索引类型的最高值和最低值之间的差值一样多的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:27:42.277

你可以有一个这样的队列：

```
BST // to store data
pointer to head; // Points to the head of the Queue
pointer to tail  // Points to the tail of the Queue 
```

您还向 BST 的节点结构添加了一个指向另一个节点的指针，该节点将表示插入顺序。

```
struct Node{
  int x;
  //left pointer
  //right pointer
  struct Node *next_queune_element;
} 
```

**在插入过程中** 当你想添加一个元素时，你首先访问指针tail指向的节点，使其指向你刚刚插入的新元素（BST节点）。然后更新尾指针以指向新元素。

**删除期间删除** 元素时，首先访问头指针指向的节点，将其存储`next_queune_element`在辅助临时变量中并删除该节点。最后，使头指针指向辅助临时变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-30T15:12:04.300

我认为二叉树将是这里所需的数据结构，而不是二叉*搜索*树。在进行函数式编程时，使用二叉树实现队列可能很有用。您可以使用在每次推送和弹出操作后保持高度平衡的二叉树来做到这一点，因此它们将始终为*O* (log *n* )。Push 和 pop 看起来像：

*   将元素插入到树的最左侧的函数（push 函数）；
*   从树的最右侧删除元素的函数（pop 函数）。

在这两种情况下，重新平衡都不会违反插入顺序。两者也很容易实现。您实际上正在使用具有更改的插入功能的 AVL 树。一个好处是元素不需要（完全）可订购。

# android - 安卓上的 Python + Django

> ID：13444534
> 
> 赞同：14
> 
> 时间：2012-11-18T21:01:29.077
> 
> 标签：android, python, django

我是一名 Django 开发人员，想知道是否有人知道使用 Android 平板电脑（如 nexus 7）在 Django 上安装和开发的可能性。这似乎是一个相当强大的设备，可以连接蓝牙键盘，并且以 linux 为操作系统的核心。

那么 - 是否可以在 Android 上安装 Python 和 Django（甚至 Flask）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-06-06T17:31:01.663

是的！它是可能的！，但你需要在 Android 上安装 termux 终端，然后打开 termux 终端并编写：

```
apt-update
apt-install python
pip install django
django-admin startproject demo
cd demo
python manage.py runserver 0.0.0.0:8000 
```

一切，在浏览器上打开 localhost:8000 ，看图片：

[![在此处输入图像描述](../Images/11ac07fda414ebdf6e46c14cd6da5811.png)](https://i.stack.imgur.com/89a7e.jpg)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-18T22:26:12.380

我们正在开发[PythonAnywhere](https://www.pythonanywhere.com)来填补这种利基市场。我们首先对其进行了调整以与 iPad 配合使用。但现在 Nexus 7 似乎已经足够流行，可能有足够的需求为 Android 做同样的事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-22T20:53:53.353

SL4A 是一个非常出色的 android 库/sdk/应用程序，它为您提供了一种安装多种语言/脚本运行时的方法，以及通过脚本框架访问 android 功能的薄单板。

碰巧 Python 是一个选项，我在 Android 上将它与cherrypy（python 框架）一起使用。我没有用烧瓶或 Django 尝试过，但通过一些工作应该是可能的。

该应用程序提供了一种下载 python、安装它的方法，然后是一种启动 python 控制台甚至只是运行 python 脚本的方法。

[http://code.google.com/p/android-scripting/](http://code.google.com/p/android-scripting/)

由于 Android SDK 中的一个愚蠢的错误/限制，最初对 python 的支持有一个缺点。这限制了名称中带有 _ 下划线的 apk 资产的使用。细节在我脑海中模糊不清，但我订阅了 Android 中的问题，因此我可以跟进有关此问题的详细信息。这会给许多 python 框架带来问题，因为下划线是 python 样式的一部分。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T06:43:49.567

在 Nexus7 上完成 django 开发环境的一种好方法是在 Android 旁边安装带有包管理器的 linux 发行版。 [Debian Kit](https://play.google.com/store/apps/details?id=org.dyndns.sven_ola.debian_kit&hl=en)使用符号链接而不是 chroot 环境连接到现有的 Android 目录。

有了它，您可以安装 Debian 或 Ubuntu，并使用 apt-get 和 pip 来安装 git、virtualenv 以及您在桌面上设置开发环境所需的所有包和库。您可以在 DroidEdit 中编写代码，通过 ssh 到 localhost 在 Android 终端中运行 django 开发服务器，然后在 Android 上的浏览​​器中测试您的应用程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-06T14:57:56.443

[QPython](https://play.google.com/store/apps/details?id=com.hipipal.qpyplus&hl=pt_PT)在 Android 上支持 Django。我在我的安卓设备上运行它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-25T06:11:47.420

你想要[这个](http://keniallee.blogspot.com/2012/08/django-14-for-android-only-dev-runserver.html)吗？：

ps：我承认这篇文章的原始来源是我。但这不是很好吗？:)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-02-14T12:07:06.620

我可以按照以下步骤在我的平板电脑 (android) 和智能手机 (android) 上运行：

*   安装“GNUroot Debian”应用程序；
*   打开“GNUroot Debian”应用程序；
*   运行这些命令：

    ```
    apt-get update
    apt-get install python3
    apt-get install python3-setuptools
    easy_install3 pip
    pip install django
    django-admin startproject demo
    cd demo
    python manage.py runserver 
    ```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-22T12:39:55.593

好吧，如果您的最终目标是开发 Web 应用程序并将它们托管在您的 Android 上，既然您有烧瓶，为什么不试一试bottle.py。这只是您复制到 sl4a 脚本文件夹中的一个文件，瞧。瓶子是极简主义的，几乎类似于烧瓶。无需生根或 Unix 环境。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-20T09:58:40.230

在 Android 上安装 termux 终端，稍后打开 termux 终端并写入：

```
pkg install python
pip install django
django-admin startproject demo
vim demo/demo/settings.py 
```

在**settings.py**

```
ALLOWED_HOSTS = ['*'] 
```

保存**settings.py**后

```
python manage.py runserver 0.0.0.0:8000 
```

及其全部，在浏览器上打开 localhost:8000

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-18T21:05:04.137

如果您正在开发一个 android 应用程序并且您不想使用 Java，您可能需要考虑 Kivy [http://kivy.org/#home](http://kivy.org/#home)

如果您正在谈论在 Android 上运行 Web 服务器，然后在该 Web 服务器本身上运行您的 django Web 应用程序，这里有一个重复的答案 - [Web Server for Android](https://stackoverflow.com/questions/4509851/web-server-for-android)

# java - Java 正则表达式和 XML

> ID：13444545
> 
> 赞同：0
> 
> 时间：2012-11-18T21:02:36.617
> 
> 标签：java, regex

我一直在做一个周末项目，一个简单、轻量级的 XML 解析器，只是为了好玩，以了解更多关于 Regex 的信息。我已经能够获取属性和元素中的数据，但是很难分离标签。这就是我所拥有的：

```
 CharSequence inputStr = "<a>test</a>abc<b1>test2</b1>abc1";
    String patternStr = openTag+"(.*?)"+closeTag;

    Pattern pattern = Pattern.compile(patternStr);
    Matcher matcher = pattern.matcher(inputStr);

    StringBuffer buf = new StringBuffer();
    boolean found = false;
    while ((found = matcher.find())) {
      String replaceStr = matcher.group();
      matcher.appendReplacement(buf, "found tag (" + replaceStr + ")");
    }
    matcher.appendTail(buf);

    String result = buf.toString();
    System.out.println(result);

Output: found tag (<a>test</a>abc<b1>test2</b1>)abc1 
```

我需要在每个标签处结束“找到的标签”，而不是整个组。有什么办法可以让它做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:52:18.080

您可以尝试以下方法以使其按需要工作；

```
int count = matcher.groupCount();
            for(int i=0;i<count;i++)
            {
                 String replaceStr = matcher.group(i);
                  matcher.appendReplacement(buf, "found tag (" + replaceStr + ")");     
            } 
```

# android - Android ADT 21.0 警告：隐式使用默认语言环境

> ID：13444546
> 
> 赞同：70
> 
> 时间：2012-11-18T21:02:40.063
> 
> 标签：android, adt

我已将 ADT 更新到 v. 21，并且此代码中出现了新警告：

```
if (e.getMessage().toLowerCase().contains("blabla"))

Implicitly using the default locale is a common source of bugs: Use toLowerCase(Locale) instead 
```

所以我尝试：

```
if (e.getMessage().toLowerCase(Locale.ENGLISH).contains("blabla")) 
```

但是错误仍然存​​在！如何解决这个问题？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-11-18T21:25:30.933

`Locale.getDefault()`如果你不能确定你的文本总是用英文，你应该特别使用。此外，在您再次运行 lint 或清理项目后，您通常会遇到类似的 lint 错误。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-11-20T10:37:10.253

您只需要通过单击来清理您的项目：

`Build > Clean Project`或者`Build > Rebuild Project`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-08T19:12:01.930

实际上，`Locale.getDefault()`当目标是向用户呈现文本时使用。但是，这是 Lint 检查的重点，您可能应该`Locale.US`在目标是机器可读性/使用时使用。`Locale.getDefault()`因为如果您不指定一个，它已经隐式使用，并且当设备指定了自己的默认语言环境时，这可能会导致难以发现错误。正如其他人所建议的那样，您似乎还需要以任何一种方式清理您的项目。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-04T06:45:30.053

使用 Locale.getDefault() 而不是清理你的项目。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-08T21:29:37.100

这可能是一个 Lint 错误。试着剪掉整行代码

```
if (e.getMessage().toLowerCase(Locale.ENGLISH).contains("blabla")) 
```

保存，然后粘贴。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-19T17:03:05.860

清理项目对我不起作用，因此我在代码中添加了默认语言环境：

`String.format(Locale.getDefault(), "firstname: %s, lastname: %s", firstName, lastName));`

根据您的项目，您可能需要查看[Locale](https://developer.android.com/reference/java/util/Locale.html)说明。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-02T09:27:23.623

正如在[明确使用 Locale.US 时，为什么 Android Lint 会警告使用默认语言环境的 String.format？](https://stackoverflow.com/questions/16927664/why-does-android-lint-warn-about-string-format-using-default-locale-when-explici/)[当我调用 String#toLowerCase 时应该指定哪个语言环境](https://stackoverflow.com/questions/10336730/which-locale-should-i-specify-when-i-call-stringtolowercase)？某些语言（如土耳其语）有不同的大小写转换规则（“I”和“i”字符不进行大小写转换）。

我想，这是 Lint 规则的错误。设置`Locale.getDefault()`是一个不错的选择。要删除警告，请添加 before 方法：

```
@SuppressLint("DefaultLocale") 
```

# ruby-on-rails - 无法在 CoffeScript 中呈现 ruby 代码

> ID：13444548
> 
> 赞同：0
> 
> 时间：2012-11-18T21:02:46.453
> 
> 标签：ruby-on-rails, coffeescript

我在`/assets/javascript`管道中有一个简单的 CoffeScript 文件，在向其中添加 CoffeScript 时工作正常。

如果我`<%= puts "hello world" %>`在上面添加一个简单的，我希望它在文件上呈现“Hello World”，但是我收到了这个错误消息

```
throw Error("ExecJS::ProgramError: Error: Parse error on line 1: Unexpected 'COMPARE'\n  (in /Users/user/Sites/app/app/assets/javascripts/application/application.js.coffee)") 
```

知道是什么阻止我渲染 Ruby 以及如何解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:23:55.717

您是否尝试添加`.erb`到文件名以启用 ruby​​ 预处理？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T21:25:09.520

您应该在扩展名之前有一个文件扩展`.erb` *名*`.coffee`。`application.js.erb.coffee`

# android - onFling 没有回应

> ID：13444551
> 
> 赞同：0
> 
> 时间：2012-11-18T21:03:33.737
> 
> 标签：android, gesture, onfling

我现在整夜都在盯着这个。我正在尝试为 Android 制作一个简单的交互式球类游戏，但我似乎无法让 onFling 方法正常工作。我在 onFling 中的日志没有出现在 LogCat 中，并且对投掷手势没有响应。我认为我在使用手势检测器或手势监听器时做错了。请帮帮我，这样我终于可以睡觉了:)。这是我的代码：

这在 onCreate 之外，但仍在 Activity 中：

```
@Override
public boolean onTouchEvent(MotionEvent me) {
    return gestureDetector.onTouchEvent(me);
}

SimpleOnGestureListener simpleOnGestureListener = new SimpleOnGestureListener() {

    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        ballSpeed.x = velocityX;
        ballSpeed.y = velocityY;
        Log.d("TAG", "----> velocityX: " + velocityX);
        Log.d("TAG", "----> velocityY: " + velocityY);

        return true;

    }
};

GestureDetector gestureDetector = new GestureDetector(null,
        simpleOnGestureListener); 
```

**编辑：**

显然上面的代码确实有效。这意味着错误在其他地方。@bobnoble 说我应该发布我的 onCreate() 方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_NO_TITLE); // hide title bar
    getWindow().setFlags(0xFFFFFFFF,LayoutParams.FLAG_FULLSCREEN| LayoutParams.FLAG_KEEP_SCREEN_ON);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    // create pointer to main screen
    final FrameLayout mainView = (android.widget.FrameLayout) findViewById(R.id.main_view);

    // get screen dimensions
    Display display = getWindowManager().getDefaultDisplay();

    try {
        display.getSize(size);
        screenWidth = size.x;
        screenHeight = size.y;
    } catch (NoSuchMethodError e) {
        screenWidth = display.getWidth();
        screenHeight = display.getHeight();
    }

    ballPosition = new android.graphics.PointF();
    ballSpeed = new android.graphics.PointF();

    // create variables for ball position and speed
    ballPosition.x = 4 * screenWidth / 5;
    ballPosition.y = 2 * screenHeight / 3;
    ballSpeed.x = 0;
    ballSpeed.y = 0;

    // create initial ball
    ballView = new BallView(this, ballPosition.x, ballPosition.y, 20);

    mainView.addView(ballView); // add ball to main screen
    ballView.invalidate(); // call onDraw in BallView

    //listener for touch event 
    mainView.setOnTouchListener(new android.view.View.OnTouchListener() {
        public boolean onTouch(android.view.View v, android.view.MotionEvent e) {
            //set ball position based on screen touch
            ballPosition.x = e.getX();
            ballPosition.y = e.getY();
            ballSpeed.y = 0;
            ballSpeed.x = 0;
            //timer event will redraw ball
            return true;
        }}); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:57:14.077

我将您提供的代码放入 中`Activity`，注释掉这些`ballSpeed`行并添加`Log`输出。按预期工作。显示输出的 logcat 在最后。

如果这对您不起作用，则问题出在`Activity`代码中的其他地方。您可能想发布您的`onCreate`方法。

```
@Override
public boolean onTouchEvent(MotionEvent me) {
    Log.i(TAG, "onTouchEvent occurred...");
    return gestureDetector.onTouchEvent(me);
}

SimpleOnGestureListener simpleOnGestureListener = new SimpleOnGestureListener() {

    @Override
    public boolean onDown(MotionEvent e) {
        Log.i(TAG, "onDown event occurred...");
        return true;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
//          ballSpeed.x = velocityX;
//          ballSpeed.y = velocityY;
        Log.d("TAG", "----> velocityX: " + velocityX);
        Log.d("TAG", "----> velocityY: " + velocityY);

        return true;
    }
};

GestureDetector gestureDetector = new GestureDetector(null,
        simpleOnGestureListener); 
```

Logcat 显示多个`onTouchEvent`s, the`onDown`和 the`onFling`

```
11-18 15:51:25.364: I/SO_MainActivity(13415): onTouchEvent occurred...
11-18 15:51:25.364: I/SO_MainActivity(13415): onDown event occurred...
...
11-18 15:51:25.584: I/SO_MainActivity(13415): onTouchEvent occurred...
11-18 15:51:25.604: I/SO_MainActivity(13415): onTouchEvent occurred...
11-18 15:51:25.664: D/TAG(13415): ----> velocityX: 3198.8127
11-18 15:51:25.664: D/TAG(13415): ----> velocityY: -1447.966 
```

根据查看`onCreate`方法进行编辑：

该`mainView.setOnTouchListener` `onTouch`方法通过返回 true 来消耗触摸。通过返回 true，该`onTouch`方法表明它已经完全处理了触摸事件，而不是进一步传播它。

将其更改为`return false;`将导致它传播触摸事件，您应该会看到其他触摸事件方法被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:21:34.287

您的 Activity 声明中是否有“implements OnGestureListener”？

看到这个片段

[http://www.androidsnippets.com/gesturedetector-and-gesturedetectorongesturelistener](http://www.androidsnippets.com/gesturedetector-and-gesturedetectorongesturelistener)

# matlab - 递归二叉树代码，不能超过5步……为什么？

> ID：13444552
> 
> 赞同：1
> 
> 时间：2012-11-18T21:03:35.217
> 
> 标签：matlab, recursion, options, binomial-heap

```
function [y]=AmericanPutClassic (St,t)
% S0 = 100;
K = 100;
r = 0.05;
sigma = 0.3;
T = 2;
nsteps = 5;
% St
dt = T / nsteps;
u=exp(sigma*sqrt(dt));
d=1/u;

Pu=(exp(r*dt)-d)/(u-d);
Pd=1-Pu;

if t==T
    y=max(K-St,0);
    return
elseif t<T
    upPrice=AmericanPutClassic(St*u,t+dt);
    downPrice=AmericanPutClassic(St*d,t+dt);
    PrevPrice=(Pu*upPrice+Pd*downPrice)*exp(-r*dt);
    if max(K-St,0) > PrevPrice
        y=max(K-St,0);
    else 
        y=PrevPrice;
    end
    return
end
end 
```

我认为我的代码可以完成这项工作，但是当我使“nsteps”高于 5 时，它会崩溃……我不断收到不同的错误……现在它只是说我的代码在高于 5 时有问题……在它说：“??? 达到 500 的最大递归限制。使用 set(0,'RecursionLimit',N) 更改限制。请注意，超出可用堆栈空间可能会使 MATLAB 和/或您的计算机崩溃。”

有人能发现问题吗？我首先调用 AmericanPutClassic(100,0)...

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:24:04.343

我不知道您要做什么，但是这个问题已经被描述了很多次了，所以它不再有趣了。

让我们画一张图：

你从

```
dt = T / nsteps; 
```

这是我的第一个危险信号。

然后你做：

```
if t==T 
```

在哪里`t = t + dt`

为什么这是错的？因为这个奇妙的东西叫做量化。换句话说，会有一段时间，因为超小的微差，结果是不正确的。nsteps 越大，情况就越糟。

然后雪上加霜，你把这条线放进去

```
elseif t<T ... end 
```

这意味着您的代码将跳过所有内容，并且您不会返回任何内容，从而导致您的代码崩溃。

如何解决这个问题？如果您可以移动整数而不是浮动值，那么您将处于更好的位置。因此，您可以拥有 dt 而不是 dt，`currentStep`这样：

```
function [y]=AmericanPutClassic (St, currentStep)
if nargin < 2
    currentStep = 0;
end
...
if currentStep>=nsteps % if t==T
...
else
...
    upPrice=AmericanPutClassic(St*u,currentStep+1);
...
end 
```

# php - 如何使 /etc/hosts 可写为 php 而不是用户

> ID：13444554
> 
> 赞同：0
> 
> 时间：2012-11-18T21:03:51.973
> 
> 标签：php, apache, permissions, chmod

我一直在尝试设置它，但我被堆叠了。我不知道如何为 php 设置 /etc/hosts 可写，但不知道如何为用户设置。

如果我设置`chmod 060 /etc/hosts`and `chown www-data:www-data /etc/hosts`，则 php 无法写入（我认为 php 的组是 www-data）。如果我设置`chmod 660 /etc/hosts`它适用于 php，但也适用于用户。

这可能吗？

**编辑：** 我发现我的用户在 www-data 组中，所以这就是为什么在 /etc/hosts 上应用 460 不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:45:34.907

您正在做的是一个糟糕的主意-除root以外的任何用户都不应写入主机文件。

尽管如此，为实现此目的而设置的正确权限是：

```
chown www-data:www-data /etc/hosts
chmod 644 /etc/hosts 
```

# php - 替换某个行号处的字符串

> ID：13444555
> 
> 赞同：0
> 
> 时间：2012-11-18T21:03:53.953
> 
> 标签：php, preg-replace, replace

我有一大段文字，我知道特定字符串出现在哪个行号。我需要用别的东西代替它。但是我如何才能仅在某个行号处替换某个字符串？

示例文本：

```
1: Lorem ipsum dolor sit amet, [[consectetur]] adipiscing elit. Aliquam 
2: imperdiet dolor ut urna hendrerit tempus in sit amet nibh. Maecenas 
3: est est, imperdiet quis tristique pulvinar, convallis et justo. 
4:
5: Duis nulla lacus, [[aliquet]] at ornare nec, ultricies ac erat. Aliquam 
6: dignissim, tellus et pharetra [[rhoncus]], magna nisi scelerisque urna, in 
7: imperdiet [[metus]] orci id risus. 
```

在这种情况下，我只想用（两个破折号）替换`[[`line`1`和 at line的字符。`6``--`

在 PHP 中有一个简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:13:35.727

PHP 没有紧凑的方法，但您可以逐行读取文件并在需要时替换字符串：

```
$f = fopen('example.txt', 'r');
for ($i = 1; ($line = fgets($f)) !== false; $i++) {
    if ($i == 1 || $i == 6)
        $line = str_replace('[[', '--', $line);

    echo $line;
}

fclose($f); 
```

# sed - Sed 替换行以空格 & # 字符开头，旁边是变量替换

> ID：13444558
> 
> 赞同：1
> 
> 时间：2012-11-18T21:04:33.703
> 
> 标签：sed

我在 sed 中有一个小问题，我想替换以下行：

```
space here#Include "/usr/local/apache/conf/userdata/std/2/varr1/var2/*.conf" 
```

或者

```
space here# Include "/usr/local/apache/conf/userdata/std/2/varr1/varr2/*.conf" 
```

（注意#后面的空格）

到以下

```
Include "/usr/local/apache/conf/userdata/std/2/varr1/varr2/*.conf" 
```

以下代码有效，行不以空格开头：

```
sed -i "s/# Include \"\/usr\/local\/apache\/conf\/userdata\/std\/2\/$varr1\/$varr2\/\*.conf\"/Include \"\/usr\/local\/apache\/conf\/userdata\/std\/2\/$varr1\/$varr2\/\*.conf\"/" file.name 
```

任何帮助将不胜感激，谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:24:34.023

您不需要编写路径，只需捕获它：

```
sed -i 's!# *Include \("[^"]*"\)!Include \1!' input.file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:14:04.397

`/`您可以选择任何您想要的字符，而不是用作分隔符。

举例：

```
sed -i 's@@@g' file 
```

因此，无需在所有内容上加上反斜杠，这对人类来说很难阅读。

最后，尝试这样做：

```
 sed -i 's@^ *# *Include \+"/usr/local/apache/conf/userdata/std/2/varr1/var\+2/\*\.conf"@Include "/usr/local/apache/conf/userdata/std/2/varr1/varr2/*.conf"@g' file.name 
```

**笔记**

*   `*`字符在正则表达式中表示*零或 N 次出现*
*   `^`字符表示*行首*
*   `*`&`.`是特殊字符，所以它们是反斜杠的。后来表示*任何单个字符*

# python - 没有 django 的服务器端表单验证 GAE

> ID：13444565
> 
> 赞同：1
> 
> 时间：2012-11-18T21:05:15.787
> 
> 标签：python, google-app-engine, validation, server-side

我有一个在谷歌应用引擎中设计的表单，我有一些 javaascript 来进行客户端表单验证，但我没有在我的项目中使用 django（对于我的一生，我不知道如何得到它在新版本的应用引擎中运行），我想知道如何进行服务器端表单验证？我最大的问题是如果我发现数据无效，如何返回数据，以便用户更正。对此有何建议？如果有人需要，我很乐意提供代码。提前致谢！

# c++ - 访问单个类型的可变参数模板

> ID：13444567
> 
> 赞同：1
> 
> 时间：2012-11-18T21:05:22.187
> 
> 标签：c++, c++11, variadic-templates

我正在 C++11 中创建一个 lua 绑定。我想处理可变参数模板中的每种类型。

我在想我可以做这样的事情，除了 using`Params...`代表它内部的所有类型，而不是像可变参数函数参数那样的下一个单一类型。

```
template <class T, typename ReturnType, typename... Params>
struct MemberFunctionWrapper <ReturnType (T::*) (Params...)>
{

    static int CFunctionWrapper (lua_State* luaState)
    {
        for(int i = 0; i < sizeof...(Params); i++)
        {
             //I want to get the next type, not all of the types
             CheckLuaValue<Params...>();
             //Do other stuff
        }
    }
}; 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T21:09:16.390

您可以通过在函数调用后简单地扩展为可以扩展的内容来做到这一点。

```
// put this in your namespace
struct Lunch { template<typename ...T> Lunch(T...) {} }; 

// and this instead of the for loop
Lunch{ (CheckLuaValue<Params>(), void(), 0)... }; 
```

你可以用 lambda 做其他事情。你甚至可以让你的`i`增量

```
static int CFunctionWrapper (lua_State* luaState)
{
    int i = 0;
    Lunch{ 
      (CheckLuaValue<Params>(), 
       [&]{ std::cout << "That was param " << i << std::endl; }(),
       ++i)... 
    };
} 
```

请注意，标准支持将所有内容放入 lambda。直到最近（我上次检查）的编译器支持不是很好

```
static int CFunctionWrapper (lua_State* luaState)
{
    int i = 0;
    Lunch{([&]{ 
       CheckLuaValue<Params>();
       std::cout << "That was param " << i << std::endl;
    }(), ++i)... 
    };
} 
```

# android - 自动从列表中删除

> ID：13444570
> 
> 赞同：-1
> 
> 时间：2012-11-18T21:05:58.643
> 
> 标签：android

我使用`Custom Adapter` 扩展 列表，`ArrayAdapter<HashMap<String, String>>` 所以如果我按下按钮，我可以从数据库中删除特定项目删除它从数据库中删除但它出现在列表中，除非用户转到其他活动并返回到该界面有没有办法我可以在用户从列表中选择项目后自动删除

代码

```
ArrayList<HashMap<String, String>> student;
    student.remove(id); 
```

我尝试这样做，但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T22:14:49.573

```
ArrayAdapter<HashMap<String, String>> adapter;
...
yourListView.setListAdapter(adapter);
adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:08:08.983

删除后，调用：

```
mAdapter.notifyDataSetChanged(); 
```

通知适配器有关更改。

# php - 如何使用 PHP 读取文本文件？

> ID：13444572
> 
> 赞同：0
> 
> 时间：2012-11-18T21:06:01.450
> 
> 标签：php

我有一个名为`Se7enPlug.dspl`. 在这个文件中，我只有一行文本，格式如下：

```
text1,text2,text3 
```

我需要阅读这个文件并返回如下内容：

```
public function rconGetNextMap() {

    $myFile = "E:\mw3-server\admin\Se7enPlug.dspl";
    $fh = fopen($myFile, 'r');
    $theData = fread($text1,$text2,$text3);
    fclose($fh);
    echo $theData;

    if ($theData) {

        $next = array("map" => $text1, "gametype" => $text2, 0=>$text1, 1=>$text2);
    }
    elseif (!$theData)) {

        $next = array("map" => "Unknown", "gametype" => "Unknown", 0=>"Unknown",1=>"Unknown");
    }
    return $next;
} 
```

如您所见，它有很多问题。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:17:12.320

这将读入您的文本文件并将第一个和第二个值保存到数组中

```
<?php

    $myFile = "E:\mw3-server\admin\Se7enPlug.dspl";
    $fh = fopen($myFile, 'r');
    $theData = fgetcsv($fh,$delimiter = ',');

    if ($theData) {

        $next = array("map" => $theData[0], "gametype" => $theData[1]);
    }

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:15:40.477

`fgetcsv()`正如 Dagon 所说，更好地使用：

```
public function rconGetNextMap() {
  $myFile = '...';
  $handle = fopen($myFile, 'r');
  $retArray = array(
    'map' => 'Unknown',
    'gametype' => 'Unkown',
  );

  if (!$handle) {
    return $retArray;
  }

  $data = fgetcsv($handle, 1000, ',', '"');

  if ($data !== false) {
    $retArray['map'] = $data[0];
    $retArray['gametype'] = $data[1];
  }
  fclose($handle);
  return $retArray;
} 
```

我已经从输出数组中删除了两个数字索引。我不会推荐它们，因为它们代表冗余数据。但是您可以轻松地添加它们。

# r - EC2 使用 segue 并行处理自定义包

> ID：13444573
> 
> 赞同：1
> 
> 时间：2012-11-18T21:06:08.377
> 
> 标签：r, parallel-processing, amazon-ec2, elastic-map-reduce

我正在使用 R segue 包（可从[此处](http://code.google.com/p/segue/)下载）来执行并行处理。我想在设置集群时获取要安装的软件包。该软件包是我自己制作的，我已将其转换为 tar.gz 文件，但无法弄清楚如何将其安装在集群实例上。

为了使用现有包制作一个可重现的示例，我从 cran 下载了 devtools 包作为 tar.gz 文件，并尝试将其设置为 sourcePackageToInstall 参数

这是我的例子，我应该做一些不同的事情吗？：

```
require(segue)
myCluster <- createCluster(5, sourcePackagesToInstall = c('/path.to.downloads/Downloads/devtools_0.8.tar.gz')) 
```

产生以下输出

```
[1] "INFO: Now building sources packages to install and uploading them based on the sourcePackagesToInstall list."
[1] "INFO: Source packages uploaded."
STARTING - 2012-11-16 18:24:28
STARTING - 2012-11-16 18:25:00
STARTING - 2012-11-16 18:25:32
STARTING - 2012-11-16 18:26:03
STARTING - 2012-11-16 18:26:35
STARTING - 2012-11-16 18:27:07
STARTING - 2012-11-16 18:27:38
STARTING - 2012-11-16 18:28:10
STARTING - 2012-11-16 18:28:42
SHUTTING_DOWN - 2012-11-16 18:29:14
SHUTTING_DOWN - 2012-11-16 18:29:46
SHUTTING_DOWN - 2012-11-16 18:30:17
SHUTTING_DOWN - 2012-11-16 18:30:50
SHUTTING_DOWN - 2012-11-16 18:31:22
SHUTTING_DOWN - 2012-11-16 18:31:53
SHUTTING_DOWN - 2012-11-16 18:32:25
SHUTTING_DOWN - 2012-11-16 18:32:57
SHUTTING_DOWN - 2012-11-16 18:33:29
SHUTTING_DOWN - 2012-11-16 18:34:01
SHUTTING_DOWN - 2012-11-16 18:34:32
SHUTTING_DOWN - 2012-11-16 18:35:04
SHUTTING_DOWN - 2012-11-16 18:35:36
SHUTTING_DOWN - 2012-11-16 18:36:08
SHUTTING_DOWN - 2012-11-16 18:36:39
SHUTTING_DOWN - 2012-11-16 18:37:11
SHUTTING_DOWN - 2012-11-16 18:37:43
SHUTTING_DOWN - 2012-11-16 18:38:14
SHUTTING_DOWN - 2012-11-16 18:38:47
SHUTTING_DOWN - 2012-11-16 18:39:18
FAILED - 2012-11-16 18:39:50 
```

谢谢

**编辑**

尝试从 EC2 实例运行集群开始......这就是我所做的......我知道 devtools 在 CRAN 上，但目的是在集群创建的每个实例上安装一个自定义包...但无济于事...对不起，如果这很长...但认为最好通过...

```
R version 2.15.1 (2012-06-22) -- "Roasted Marshmallows"
Copyright (C) 2012 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> system("wget -q  http://cran.r-project.org/src/contrib/devtools_0.8.tar.gz")
> system("R CMD INSTALL devtools_0.8.tar.gz")
* installing to library ‘/home/ubuntu/R/library’
* installing *source* package ‘devtools’ ...
** package ‘devtools’ successfully unpacked and MD5 sums checked
** libs
gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG      -fpic  -O3 -pipe  -g  -c devtools.c -o devtools.o
gcc -std=gnu99 -shared -o devtools.so devtools.o -L/usr/lib/R/lib -lR
installing to /home/ubuntu/R/library/devtools/libs
** R
** inst
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded

* DONE (devtools)
> require(devtools)
Loading required package: devtools
> require(segue)
Loading required package: segue
Loading required package: rJava
Loading required package: caTools
Loading required package: bitops
Segue did not find your AWS credentials. Please run the setCredentials() function.
> setCredentials("xxxxxxxxxxxxxxx", "xxxxxxxxxxxxxxxxxx")
> getwd()
[1] "/home/ubuntu"
> cl <- createCluster(2, sourcePackagesToInstall=c("/home/ubuntu/devtools_0.8.tar.gz"))
[1] "INFO: Now building sources packages to install and uploading them based on the sourcePackagesToInstall list."
[1] "INFO: Source packages uploaded."
STARTING - 2012-11-22 03:58:07
STARTING - 2012-11-22 03:58:40
STARTING - 2012-11-22 03:59:11
STARTING - 2012-11-22 03:59:43
STARTING - 2012-11-22 04:00:15
STARTING - 2012-11-22 04:00:47
BOOTSTRAPPING - 2012-11-22 04:01:19
BOOTSTRAPPING - 2012-11-22 04:01:51
BOOTSTRAPPING - 2012-11-22 04:02:23
BOOTSTRAPPING - 2012-11-22 04:02:55
BOOTSTRAPPING - 2012-11-22 04:03:26
BOOTSTRAPPING - 2012-11-22 04:03:59
BOOTSTRAPPING - 2012-11-22 04:04:30
BOOTSTRAPPING - 2012-11-22 04:05:03
BOOTSTRAPPING - 2012-11-22 04:05:34
SHUTTING_DOWN - 2012-11-22 04:06:06
SHUTTING_DOWN - 2012-11-22 04:06:38
SHUTTING_DOWN - 2012-11-22 04:07:10
SHUTTING_DOWN - 2012-11-22 04:07:41
SHUTTING_DOWN - 2012-11-22 04:08:14
SHUTTING_DOWN - 2012-11-22 04:08:45
SHUTTING_DOWN - 2012-11-22 04:09:17
SHUTTING_DOWN - 2012-11-22 04:09:49
SHUTTING_DOWN - 2012-11-22 04:10:21
SHUTTING_DOWN - 2012-11-22 04:10:53
SHUTTING_DOWN - 2012-11-22 04:11:25
SHUTTING_DOWN - 2012-11-22 04:11:56
SHUTTING_DOWN - 2012-11-22 04:12:28
SHUTTING_DOWN - 2012-11-22 04:13:00
SHUTTING_DOWN - 2012-11-22 04:13:32
SHUTTING_DOWN - 2012-11-22 04:14:04
SHUTTING_DOWN - 2012-11-22 04:14:36
SHUTTING_DOWN - 2012-11-22 04:15:07
SHUTTING_DOWN - 2012-11-22 04:15:39
SHUTTING_DOWN - 2012-11-22 04:16:11
FAILED - 2012-11-22 04:16:43
> traceback()
No traceback available 
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C         LC_TIME=C            LC_COLLATE=C         LC_MONETARY=C       
 [6] LC_MESSAGES=C        LC_PAPER=C           LC_NAME=C            LC_ADDRESS=C         LC_TELEPHONE=C      
[11] LC_MEASUREMENT=C     LC_IDENTIFICATION=C 

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] segue_0.05   caTools_1.13 bitops_1.0-5 rJava_0.9-3  devtools_0.8

loaded via a namespace (and not attached):
 [1] RCurl_1.95-3    digest_0.5.2    evaluate_0.4.2  httr_0.2        memoise_0.1     parallel_2.15.1 plyr_1.7.1     
 [8] stringr_0.6.1   tools_2.15.1    whisker_0.1    
> 
```

任何人的任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:50:32.127

hlm 你确定这个包是否会加载到 Linux 机器上吗？调试的第一步是尝试在 Linux EC2 机器上从源代码加载包。如果在 Linux 中无法加载包，则永远无法使用 Segue 将其加载到从节点上。

做一个测试，让我们知道结果

# java - 如何检查一个字符串只包含 JAVA 中的 int？

> ID：13444576
> 
> 赞同：4
> 
> 时间：2012-11-18T21:06:37.677
> 
> 标签：java

我希望写一个小方法来做以下事情：例如字符串a =“a123”，那么该方法应该返回fulse；字符串 b = "111"，它应该返回 true。这意味着只有字符串是一个 int，它应该返回 true，所有其他情况都应该返回 false。有人可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T21:10:55.180

您可以使用[Integer.parseInt(integerString);](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)

```
public boolean isInteger(String integerString){

   try{
      Integer.parseInt(integerString);
      return true;
   } catch (NumberFormatException nfe) {
      return false;
   }
} 
```

NumberFormatException 表示解析不会成功，因此 String 不是整数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T21:09:53.003

如果您的意思是您想要一个*仅*由数字 0-9 （并且具有任意长度）组成的字符串，您可以使用正则表达式`"\\d+"`，即`str.matches("\\d+")`.

如果你想考虑正面和负面的迹象，你可以使用`"[+-]?\\d+"`.

如果您考虑长度（原始`int`错字不能超过 10 位数字），您可以使用`"[+-]?\\d{1,10}+"`.

# mysql - 使用 tinyurl 或类似方法在 mysql 中存储 url

> ID：13444584
> 
> 赞同：0
> 
> 时间：2012-11-18T21:07:06.670
> 
> 标签：mysql, url, tinyurl

我想在 mysql 中存储大量唯一的、可索引的 url。它们将由用户编写，并具有非常广泛的接受度，因此几乎所有内容都会出现。

但我不喜欢已经回答的[SO question](https://stackoverflow.com/questions/6800866/how-to-store-urls-in-mysql)也不喜欢[它的前身](https://stackoverflow.com/questions/4191587/datatype-for-url)。实际上，我认为这样做可能有一种“更好”的方法，但我并不完全明白这一点的含义，所以这就是我问这个问题的原因。

为此目的使用 tinyurl.com 的 API 有哪些优点/缺点？在[此链接](http://www.richardcastera.com/blog/creating-a-tinyurl-with-tinyurl-api)中，我们可以看到有关如何执行此操作的文章。只是这段代码（可能更短，但我更喜欢在函数中使用它）：

```
function createTinyUrl($strURL)
  {
  return file_get_contents("http://tinyurl.com/api-create.php?url=".$strURL);
  } 
```

然后我只需要比较`example`in`tinyurl.com/example`来检查链接的唯一性。从维基百科文章中，我们可以阅读：

> 如果 URL 已经被请求，TinyURL 将返回现有的别名而不是创建一个重复的条目。

缺点（与使用任何集中式系统基本相同）：

*   Tinyurl 服务器可能会暂时或永久关闭。以防万一，完整的 url 将存储在另一个未索引的字段中。

*   不可逆。你可以从你的 url 中得到一个 tinyurl，但反过来更难。但是，第一个问题的解决方案也解决了这个问题。

*   就我而言，网址不是私有的，但这可能会阻止某人使用此解决方案。

*   延迟。请求可能会慢一些，但由于它是服务器到服务器的对话，我认为这不会很明显。不过会做一些基准测试。

**使用此方法可以看到任何其他缺点？**使用它的主要原因是没有重复的条目并使它们可索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:12:42.580

正如用户 eggyal 所建议的，完整 URI 的基于哈希的索引与使用 Tinyurl API 非常相似，只是我不需要在任何地方发送数据。那我就用那个。

注意：此答案仅用于为问题添加闭包

# html - 分发 HTML 文档

> ID：13444586
> 
> 赞同：0
> 
> 时间：2012-11-18T21:07:20.000
> 
> 标签：html, software-distribution

我正在创建 HTML 5 用户手册。这包含许多图像文件夹和 js 文件夹。现在我希望将其作为单个文档分发。在 Windows 中有 mht 或类似的东西。有什么方法可以在不依赖浏览器或操作系统的 ubuntu 上做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:13:01.047

**请注意**:MHTML 是 MIME HTML 的缩写，是一种网页归档格式，用于将通常由外部链接（如图像、Flash 动画、Java 小程序、音频文件）表示的资源与 HTML 代码绑定到一个文件中。使用 MIME 类型 multipart/related 对 MHTML 文件的内容进行编码，就好像它是 HTML 电子邮件一样。文件的第一个通常是编码的 HTML；后续部分是由其原始 URL 标识并以 base64 编码的附加资源。这种格式有时被称为 MHT，在由 Microsoft Word、Internet Explorer 或 Opera 创建时默认赋予此类文件的后缀 .mht。MHTML 是一个提议的标准，在 1999 年的修订版中作为 RFC 2557 传播。所以尽量将文档保存为没有依赖关系的常规 html。这将在任何操作系统上独立运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:17:36.137

好吧，据我所知，您将无法真正将本手册作为独立于 HTML 操作系统的方式分发。

但是：您可以将其分发为 PDF、ZIP 文件、在任何地方托管、ePub 等。这些都是满足您需求的不错选择。Safari 有一个非常酷的功能，称为 webarchive，但这只会将一个页面压缩到一个可查看的、外观始终相同的页面。它只能通过 Safari 浏览。所以你必须为你的所有页面都这样做......

# php - jQuery 无法编码 json

> ID：13444590
> 
> 赞同：-1
> 
> 时间：2012-11-18T21:07:43.040
> 
> 标签：php, jquery, ajax, json

我从我的 php 页面返回这个 json，但 jquery 无法解码它，结果始终为空。

```
{
    "City": [
        {
            "CityID": "1",
            "CityName": "istanbul"
        },
        {
            "CityID": "2",
            "CityName": "Ankara"
        }
    ]
} 
```

jQuery代码：

```
 $.getJSON("handlers/cityhandler.php", function(json){
    var result = jQuery.parseJSON(json);
console.log(result[0].City.CityID); 
```

Jquery备用代码：

```
$.getJSON("handlers/cityhandler.php", function(json){
            $.each(json, function(i,City){
                    $("#selectcity").append('<option value="' + City.CityID + '">' + City.CityName + '</option>');
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:13:44.903

```
console.log(json.City[0].CityID);​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T21:12:18.717

数据在收到时已经解析，无需调用`$.parseJSON`. 此外，您收到空指针异常的原因是因为`result[0]`不存在：结果是关联数组，而不是常规数组。

```
$.getJSON("handlers/cityhandler.php", function(json){

    console.log(json.City[0].CityID);
}); 
```

你的第二次尝试也不对；如果您尝试遍历城市，则必须遍历内部数组：

```
$.getJSON("handlers/cityhandler.php", function(json){
    $.each(json.City, function(i, val){
        $("#selectcity").append('<option value="' + val.CityID + '">' 
            + val.CityName + '</option>');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T21:09:46.697

您的 JSON 输出是有效的 JSON，因此问题不是来自那里。你确定这正是 jQuery 处理程序接收到的吗？

旁注，结果 [0] 不存在！您的顶部元素是一个对象，而不是一个数组！

# java - 如何让非静态方法在新类的静态主文件中打印？

> ID：13444591
> 
> 赞同：0
> 
> 时间：2012-11-18T21:07:58.797
> 
> 标签：java, printing, static, non-static

在java中，我在两个单独的文件中有两个类，我试图让我的打印方法在第二个类中工作。print 方法是非静态的（它必须是非静态的，别无选择）这是一些打印代码：

```
 public void print() {
    System.out.print(re);
    if (im < 0) {
        System.out.print("something");
    }
    else if (im > 0) {
        System.out.print("something else");
    }
    System.out.println("");
    return;
} 
```

并且每次尝试在第二个类中打印时，我发现无法从静态上下文中引用非静态方法 print()。如何在新课程中打印此内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:09:48.917

您使用非静态方法创建类的实例。

```
 MyClass myObject = new MyClass();
 myObject.print(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:40:39.677

在几乎每个 java 应用程序中，我都倾向于编写一个默认的 main 方法来打破静态方法。这是我如何完成它的一个例子。也许这会在您编写未来的应用程序时帮助您。

```
public class Foo {
  public int run (String[] args) {
    // your application should start here
    return 0; // return higher number if error occurred
  }
  public static void main (String[] args) {
    Foo app = new Foo();
    int code = app.run (args);
    System.exit (code);
  }
} 
```

# android - 如何更改弹出菜单弹出的位置

> ID：13444594
> 
> 赞同：7
> 
> 时间：2012-11-18T21:08:30.693
> 
> 标签：android, android-layout

我在每个项目的列表视图适配器中都有一个弹出菜单。菜单在屏幕左边缘弹出，如何将其更改为在右侧

```
private void showPopupMenu(View v, final App app) {
    PopupMenu popupMenu = new PopupMenu(context, v);

    popupMenu.getMenuInflater().inflate(R.menu.quick_action_menu,
            popupMenu.getMenu());
    popupMenu
            .setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
                @Override
                public boolean onMenuItemClick(MenuItem item) {
                    switch (item.getItemId()) {
                    ... 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-08-05T13:58:42.783

迟到总比一次好 =) 这是我的决定，允许您将 PopupMenu 设置为指定的坐标。代码不是很好，但它可以工作。

```
public void show(Activity activity, float x, float y)
{
    final ViewGroup root = (ViewGroup) activity.getWindow().getDecorView().findViewById(android.R.id.content);

    final View view = new View(context);
    view.setLayoutParams(new ViewGroup.LayoutParams(1, 1));
    view.setBackgroundColor(Color.TRANSPARENT);

    root.addView(view);

    view.setX(x);
    view.setY(y);

    PopupMenu popupMenu = new PopupMenu(context, view, Gravity.CENTER);

    popupMenu.setOnDismissListener(new PopupMenu.OnDismissListener()
    {
        @Override
        public void onDismiss(PopupMenu menu)
        {
            root.removeView(view);
        }
    });

    popupMenu.show();
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-10-04T04:40:05.117

您可以使用以下属性更改 PopupMenu 的位置： **gravity**、**dropDownHorizo​​ntalOffset**和**dropDownVerticalOffset**

首先将重力设置为重力。END

```
popup.setGravity(Gravity.END); 
```

然后通过创建样式更改下拉偏移量

```
<style name="MyPopupMenu" parent="@style/Widget.AppCompat.PopupMenu">
    <item name="android:dropDownHorizontalOffset">-4dp</item>
    <item name="android:dropDownVerticalOffset">4dp</item>
</style> 
```

如果你想重叠锚视图使用

```
parent="@style/Widget.AppCompat.PopupMenu.Overflow" 
```

最后将 MyPopupMenu 应用到您的主题

```
<item name="popupMenuStyle">@style/MyPopupMenu</item> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-12T09:16:15.553

您可以改用[PopupWindow](https://developer.android.com/reference/android/widget/PopupWindow)。有很多定位选项：

*   `popupWindow.showAsDropDown(View parent)`将显示在父视图下方
*   `popupWindow.showAsDropDown(View anchor, int xoff, int yoff)`将显示在父视图下方，但也会应用偏移量
*   `popupWindow.showAsDropDown(View anchor, int xoff, int yoff, int gravity)`像以前一样，还有重力
*   `popupWindow.showAtLocation(View parent, int gravity, int x, int y)`在任何绝对位置弹出

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T21:12:06.717

你不能。[正如文档所说](http://developer.android.com/reference/android/widget/PopupMenu.html)：

> PopupMenu 在锚定到视图的模式弹出窗口中显示菜单。如果有空间，弹出窗口将出现在锚视图下方，如果没有，则在其上方。如果 IME 可见，则弹出窗口在被触摸之前不会与它重叠。触摸弹出窗口外部将关闭它。

您可能想尝试使用[PopupWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)，它允许这样的定位。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-30T09:36:12.080

您可以使用 ListPopupWindow 显示列表弹出菜单。有设置偏移量的功能（[ListPopupWindow](http://developer.android.com/reference/android/widget/ListPopupWindow.html)）。

或者您可以使用此[函数显式设置 PopupWindow 的偏移量](http://developer.android.com/reference/android/widget/PopupWindow.html#showAsDropDown(android.view.View,%20int,%20int))

# javascript - 带有类名的简单 Javascript

> ID：13444595
> 
> 赞同：0
> 
> 时间：2012-11-18T21:08:33.547
> 
> 标签：javascript, html, class, getelementsbyclassname

我试图让脚本向用户询问 HTML 类名称和颜色名称，然后将该 HTML 类的所有元素的颜色设置为给定的颜色。

我将 html 设置为 have`class = wish`并且有一个`li`带有`class = class2`. 语法对此是正确的。我只是不知道该怎么做。我一直在对该`document.getElementsByClassName()`功能进行大量测试，但对我来说效果不佳。

```
/*var classask=window.prompt("which class?");
var nodes = getElementsByClassName(classask);
document.writeln(nodes);*/

var styx=window.prompt("pick a classes name so for usage");
var nodes =document.getElementsByClassName(styx);
document.write(nodes);
nodes.style.color=red;
//document.write(document.getElementsByClassName(styx));
//document.writeln(x);
//document.write(document.getElementByClass(styx));
HTMLElement.Object.className=styx;
document.writeln(styx);

//var newcolor=window.prompt("pick a new color for usage");
//var nodes=(document.getElementByClass(classname));
//HTMLElementObject.className=styx;
//nodes.style.color=newcolor; 
```

代码基本上是我自己完成的很多测试，我只是不知道如何让它工作。我要么在它什么都不做的地方得到它，要么它`[object HTMLCollection]` 总是说不管我输入什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:41:52.540

`document.getElementsByClassName()`返回一个`nodeList`。这是一个节点列表。要对 中的所有节点进行操作`nodeList`，您必须遍历`nodeList`并将您的更改应用于每个项目，`nodeList`如下所示：

```
var newcolor = window.prompt("pick a new color for usage");
if (newcolor !== null) {
    var nodes = document.getElementsByClassName(classname);
    for (var i = 0; i < nodes.length; i++) {
        nodes[i].style.color = newcolor;
    }
} 
```

仅供参考，你也`getElementByClass`应该有`getElementsByClassName`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:15:32.610

*NodeList*没有`style`属性。您必须遍历*NodeList*中的*HTMLElementNodes*（它非常像一个数组）并依次访问每个元素的属性。*`style`*

# javascript - 为什么谷歌浏览器控制台延迟？

> ID：13444596
> 
> 赞同：4
> 
> 时间：2012-11-18T21:08:39.600
> 
> 标签：javascript, jquery, google-chrome

> **可能重复：**
> [Chrome 的 JavaScript 控制台是否懒于评估数组？](https://stackoverflow.com/questions/4057440/is-chromes-javascript-console-lazy-about-evaluating-arrays)

基本上我发现谷歌浏览器的开发工具存在问题。

以这个片段为例：

```
console.log($(this).find(' .buttons .cancel'));
$(this).find(' .buttons .cancel').remove(); 
```

当该片段被触发时，如果有两个项目与这些选择器匹配 google chrome 输出`[, ]`。基本上它是在寻找元素，但显示数据的速度似乎比它应该的要慢。

我希望能够记录我要删除的项目，但就目前而言，我必须先运行它而不使用该`.remove()`行。然后在我知道它正在工作之后，我可以使用该`remove()`功能再次运行它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:21:33.787

考虑以下测试：

*   `a={a:'a'}`. 它返回一个对象。
*   `a.a='b'`
*   扩展第一个命令的返回。表明`a: "b"`

因此，一个对象总是以其首次在 Chrome 开发者控制台中打开时的状态显示。对于（伪）数组，重要的是控制台到达对象时的状态。这可能是在正常的 javascript 返回之后（很难说出原因。也许是性能原因）。

您可以通过始终记录不变的元素来处理此问题，例如：

*   原始值：`console.log("hello")`
*   DOM 节点或 jQuery 对象的克隆：`console.log($(this).find(".buttons .cancel").clone())`

如果记录不可变对象不是一个选项，您仍然可以在跟踪代码时记录：`console.log(document); debugger;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:32:23.650

如果您向 Google Chrome 传递的对象`console.log()`不是字符串或数字等原始值，它不会立即输出该对象的内容。可能由于一些进程间通信，实际从对象获取数据并输出到控制台会有一些延迟。如果您立即修改同一个对象，这将/可能导致问题，因为您不一定会在控制台中显示正确的内容。

一种解决方法是仅将完成的字符串传递给`console.log()`. 由于字符串是不可变的，它们永远不会被其他任何东西改变，所以你不会被`console.log()`.

在您的情况下，您将在下一行代码中删除 DOM 元素。由于 Chrome 的计时怪异，这将删除 DOM 元素，然后`console.log()`才能真正看到它们是什么并输出它们。你可以做这样的事情，而不是立即显示字符串并将该字符串传递给`console.log()`：

```
console.log($(this).find(' .buttons .cancel').toString()); 
```

# android - 从 onResume() 调用后，adapter.notifyDataSetChange() 不起作用

> ID：13444598
> 
> 赞同：0
> 
> 时间：2012-11-18T21:08:46.173
> 
> 标签：android, android-adapter

我遇到了一个问题，当我调用`adapter.notifyDataSetChange()`以从函数刷新 listActifity 时`onResume()`，之后它似乎无法从该活动的任何其他函数中工作。

我希望当用户单击后退按钮（在另一个屏幕上）并返回到带有列表的窗口时刷新列表（视图）。我注意到的一件事是，`notifyDataSetChange()`当我从数组列表中更改一个对象时（来自其他函数），但当我想从`ArrayList`. 到目前为止，这对我来说一直有效，但我不希望每次都重新查询列表。

```
@Override  
        protected void onResume() {  
        lightWeightDAO.open(); //db connection  
        adapter.clear();  
        buckets = lightWeightDAO.getExerciseBucketsByWorkoutId(workout.getId());   
        adapter.addAll(buckets);  
        adapter.notifyDataSetChanged();  
        super.onResume();      
    } 
```

当我从 onResume() 中删除 notifyDataSetChange() 时，一切似乎都正常工作（只是在更改数组列表后调用一个简单的 notifyDataSetChange()）。

知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T06:42:08.627

通过使用：

```
buckets = lightWeightDAO.getExerciseBucketsByWorkoutId(workout.getId());   
adapter.addAll(buckets); 
```

您只是将这个 new 的内容*添加*`buckets`到适配器中，您没有将适配器*绑定*到`buckets`. 所以这：

```
buckets.add(string);
adapter.notifyDataSetChanged(); 
```

对适配器内部的数据没有影响。就像我上面在评论中提到的那样，您可以直接添加到适配器，它会`notifyDataSetChanged()`为您调用。因此，只需将使用上述两行的任何地方替换为：

```
adapter.add(string); 
```

# python - Python 以增量方式填充 x 和 y 值

> ID：13444599
> 
> 赞同：1
> 
> 时间：2012-11-18T21:08:55.390
> 
> 标签：python, list, random

我试图想出一个 for 循环来均匀地填充列表字典（不知道这是否是正确的说法）。IE 我开始

```
world = [(0,0,0), (0,0,0), (0,0,0), (0,0,0), (0,0,0), (0,0,0), (0,0,0)...] 
```

只要需要就重复我想以类似的方式分配前两个值

```
0,0

0,1

1,0

0,2

2,0

1,2

2,1

2,2

3,0

0,3

1,3

3,1

2,3

3,2

3,3

And so on 
```

基本上我希望每个 x 和 y 值都可能达到某个值。我一整天都尝试了几件事，但绝对没有成功

至于第三个值，我只有一个噪声函数，它根据该列表的 x 和 y 定义它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:13:58.557

```
>>> from itertools import product
>>> [(x, y, 0) for x, y in product(range(5), repeat=2)]
[(0, 0, 0), (0, 1, 0), (0, 2, 0), (0, 3, 0), (0, 4, 0), (1, 0, 0), (1, 1, 0), (1, 2, 0), (1, 3, 0), (1, 4, 0), (2, 0, 0), (2, 1, 0), (2, 2, 0), (2, 3, 0), (2, 4, 0), (3, 0, 0), (3, 1, 0), (3, 2, 0), (3, 3, 0), (3, 4, 0), (4, 0, 0), (4, 1, 0), (4, 2, 0), (4, 3, 0), (4, 4, 0)] 
```

这个？

应用噪声功能`[(x,y,func(x,y)) for x`等。

顺便说一句，这是“元组列表”，而不是“列表字典”。

# mysql - mysql主键和唯一约束

> ID：13444600
> 
> 赞同：1
> 
> 时间：2012-11-18T21:08:58.917
> 
> 标签：mysql, sql

我对mysql中的主键和唯一约束有疑问。我正在为网站的成员凭据创建一个表。有电子邮件地址、用户名、出生日期等属性。

我相信大多数网站最多允许一个电子邮件地址与一个用户帐户相关联（不确定这是否属实）。所以我将电子邮件设置为我的主键。但用户名也必须是唯一的，不能为空。我不确定如何表示这一点。我应该对用户名创建一个唯一约束并明确声明它不为空吗？我不相信触发器适合这个。有更好的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:12:30.137

尝试这样的事情，

```
CREATE TABLE tableName
(
    userName VARCHAR(50) NOT NULL,
    email VARCHAR(100) NOT NULL,
    -- other columns here .....
    CONSTRAINT tb_PK PRIMARY KEY (userName),
    CONSTRAINT tb_uq UNIQUE (email)
) 
```

# ruby-on-rails - 如何在 Rails 中包含我自己的方法

> ID：13444601
> 
> 赞同：1
> 
> 时间：2012-11-18T21:09:09.277
> 
> 标签：ruby-on-rails, module

我在文件 lib/my/column.rb 中有一个方法

```
module Column
  def array_each_col(num_of_cols, array_arg)
     .. code will return array ..
  end
end 
```

我想在我的模型中使用它

```
class Area < ActiveRecord::Base
  include Column

  def self.my_areas 
     all_areas = Area.all    
     num_of_cols = 2       
     self.array_each_col(num_of_cols, all_areas)
  end
end 
```

我的应用程序.rb

```
module MyAppName
  class Application < Rails::Application
     config.autoload_paths << "#{config.root}/lib/my" 
```

但它不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:22:46.950

要使模块方法在类方法中可用，您必须使用`extend`而不是`include`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:54:25.947

尝试 config.autoload_paths << "#{ **Rails** .root}/lib/my"

# c - C - 传递 message_t 参数

> ID：13444604
> 
> 赞同：1
> 
> 时间：2012-11-18T21:09:23.747
> 
> 标签：c, pointers, parameters

好的，所以我有这段代码，想知道是否有人可以确认我在正确的位置有指针（* 和 &）。这是它的一般要点

```
int main() {
  message_t msg; //this is a structure
  write(&msg);
}

write(message_t *msg) {
  putBuffer(msg);
} 
```

我真的对这个指针业务感到困惑，太习惯于在 java 中工作了。
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:21:22.143

是的，只要你有关于 int main() 的 write 函数的原型，它就可以工作。

关于您对指针的困惑，[这里](http://thenewboston.org/list.php?cat=16)的这些教程将为您提供帮助。他在教程 38 中进入了指针和引用。我通过这些教程了解了指针和东西是如何工作的，我建议他们帮助解决问题。这些教程可能是关于 C++ 的，但他所经历的大部分内容在 C 中都可以正常工作，而任何不应该在 C 中轻松工作的东西。

# php - 用 php 循环遍历 JSON，并写入它。输出为空

> ID：13444606
> 
> 赞同：1
> 
> 时间：2012-11-18T21:09:42.170
> 
> 标签：php, json

我的目标是遍历 JSON 中的每个项目，并为每个“项目”添加一个名为“模态”的附加键，以及与该键配对的包含 html 的值。我在下面剥离了我的代码。

我可以将“模态”添加到每个“项目”，但是该值以某种方式设置为 null，而不是我想要的 html。

JSON文件：

```
{"Item":{
"thumbnail":"http://...",
  "title": "Item title"
},
"Item":{
  "thumbnail":"http://...",
  "title": "Item title"
}} 
```

php:

```
$json_a=json_decode($json, true);

foreach ($json_a['Item'] as &$obj){
    $out = '<img src=\"' . $obj['thumbnail'] . '\">';
    $out .= '<span>' . $obj['title'] . '</span>';

    $obj['modal'] = $out; //value of $out doesn't get passed in, instead the value becomes null.
}

$json_a=json_encode($json_a);
print_r($json_a); 
```

json输出：

```
...{'modal': null}... 
```

将 JSON 编辑为有效。它来自亚马逊的产品 API，我为这个例子缩短了它并使其无效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:17:04.593

您的 JSON 无效。它是一个具有重复键（“Item”）的对象。您应该改用数组：

```
[
    {
        "thumbnail": "...",
        "title": "..."
    },
    {
        "thumbnail": "...",
        "title": "..."
    }
] 
```

然后您可以对其进行迭代并将“模态”添加到所有元素：

```
$json_a = json_decode($json, true);

foreach ($json_a as &$obj) {
    $out = '<img src=\"' . $obj['thumbnail'] . '\">';
    $out .= '<span>' . $obj['title'] . '</span>';

    $obj['modal'] = $out;
}

$json_a = json_encode($json_a);
print_r($json_a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:17:43.410

它的简单你`json`是无效的

```
{
    "Item": {
        "thumbnail": "http://...",
        "title": "Item title",
                             ^---- This should not be here

    },

    "Item": {
       ^-------------- Duplicate name 
        "thumbnail": "http://...",
        "title": "Item title",
                             ^---- This should not be here

    }
} 
```

`json_encode`主要问题是，如果您使用 PHP 进行生成，则需要正确生成对象或数组

# asp-classic - 将框架/iframe 更改为仅一页#aspclassic

> ID：13444612
> 
> 赞同：0
> 
> 时间：2012-11-18T21:10:06.433
> 
> 标签：asp-classic

如何在 Classic ASP 中重写以下 PHP 代码？

```
<head></head>
<body>
<h1>Test</h1>
<section><?php echo include('content/'.$_GET['p'].'.php') ?></section></body> 
```

如果 url 是[http://foo.bar.com/admin.php?p=pages](http://foo.bar.com/admin.php?p=pages)，则显示*content/pages.php*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T06:11:22.723

您不能使用 INCLUDE 执行此操作，但您可以使用 Server.Transfer 代替，例如。

```
Server.Transfer "content/" & Request.Form("p") & ".asp" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:23:47.227

你可以使用这样的东西

```
 <!--#include file="somefile.asp"--> 
```

在您的 HTML 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-31T11:51:33.683

永远不要相信来自客户端（浏览器）的东西，因为他们可能会试图破解你。

由于“shdyhio3hlkehio.asp”或类似文件不太可能是正确的文件，因此您应该将选项限制为您的实际选择，并且还有一个默认文件，即“捕获所有其他请求”。

将它与 Server Side Includes 结合起来，您就可以准备好设置了。

您还应该检查用户是否确实请求了页面——如果“p”为空，则显示默认消息。

注意`LCase`“ `Select Case`”行中的使用和-行中的小写值`Case`。这是因为字符串比较是区分大小写的，意思是“about”（小写“a”）和“About”（大写“A”）是不一样的。

示例：

```
<% If Request.QueryString("p") = "" Then %>

    no specific page was request, show a default message

<% Else %>

    <% Select Case LCase(Request.QueryString("p")) %>
    <% Case "content" %><!-- #include file="content.asp" -->
    <% Case "about" %><!-- #include file="about.asp" -->
    <% Case "contact" %><!-- #include file="contact.asp" -->
    <% Case Else %><!-- #include file="404.asp" -->
    <% End Select %>

<% End If %> 
```

# c# - google api oauth 访问令牌检索 - 400 错误请求

> ID：13444613
> 
> 赞同：4
> 
> 时间：2012-11-18T21:10:13.593
> 
> 标签：c#, oauth, google-api

我正在尝试检索 oauth 访问令牌以调用 asp.net mvc 中的某些 google api，并且我为操作编写了以下代码：

```
 public ActionResult GetOAuthToken()
        {

        String url = "https://accounts.google.com/o/oauth2/token";

        // Create a request using a URL that can receive a post. 
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        // Set the Method property of the request to POST.
        request.Method = "POST";
        request.Host = "accounts.google.com";
        // Create POST data and convert it to a byte array.
        string postData = String.Format("code={0}&client_id={1}&client_secret={2}&redirect_uri={3}&grant_type=authorization_code", Request.QueryString["code"].ToString(), OAuthConfig.client_id, OAuthConfig.client_secret, OAuthConfig.token_redirect_uri);
        ASCIIEncoding encoding = new ASCIIEncoding();
        byte[] byteArray = encoding.GetBytes(postData);
        // Set the ContentType property of the WebRequest.
        request.ContentType = "application/x-www-form-urlencoded";
        // Set the ContentLength property of the WebRequest.
        request.ContentLength = byteArray.Length;
        // Get the request stream.
        Stream dataStream = request.GetRequestStream();

        // Write the data to the request stream.
        dataStream.Write(byteArray, 0, byteArray.Length);
        // Close the Stream object.
        dataStream.Close();
        // Get the response.
        WebResponse response = request.GetResponse();

        // SOME CODE TO PROCESS THE RESPONSE

        Response.Redirect("/Home");
        return View();
        } 
```

OAuthConfig 只是一个包含客户端 ID、客户端密码等的类。

我不断收到“远程服务器返回错误：（400）错误请求。” 在 request.GetResponse() 行。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:21:34.657

Google 确实提供了一个更高级别的库来处理其服务，它处理 url 的格式，我发现它使使用他们的 api 变得更加容易。请参阅[http://code.google.com/p/google-api-dotnet-client/](http://code.google.com/p/google-api-dotnet-client/)

# c++ - C++ - 模板特化和部分特化

> ID：13444615
> 
> 赞同：4
> 
> 时间：2012-11-18T21:10:53.953
> 
> 标签：c++, templates, class-template

我一直在整个互联网和 stackoverflow 上寻找一个具体的答案，但我似乎找不到一个。我必须创建一个通用类，然后实现特定的功能。我的具体说明是：您需要使用模板表达式参数和模板类专业化和部分专业化。

我有一个模板类：

```
template <class T, int x, int y>
class Z {
    T **array[x][y];
    public:
         Z();
         void print();
         //and other methods
}; 
```

我需要：

1) 只有 x= 2 和 y = 2 的 Z 需要公共方法 void J()

2) 对于 x = 2 和 y= 2 的字符 Z，J 会做一些事情；对于其他所有事情，它会做其他事情

3) 只有在 T 为 char 的 Z 中，数组才会被初始化为某个值。其他的都是 0

自然，这有效：

```
template<class T, int x, int y>
Z<T,x,y>::Z<T,x,y>() { //initialize to 0 } 
```

但这不会：

```
template<int x, int y>
Z<char,x,y>::Z<char,x,y>() { //initialize to something} 
```

同样（假设 J 存在）这不起作用：

```
template <class T>
void Z<T,2,2>::J() { //something } 
```

我的问题是：

是否有任何简单的方法来实现上述项目？我需要将所有其他方法保留在 Z 中。给出提示或指出正确的方向（也许我错过了一个问题，因为有很多问题）会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T21:33:50.060

似乎您只想定义某些专业化的某些功能：如果`print()`在专业化和一般情况之间没有变化`char`，您似乎不想重新定义它。

```
// What you want to do (illegal in C++)
template<int,typename T>
struct Z
{
    T myValue;
    Z();
    void print() { /* ... */ }
};

template<int i, typename T>
Z<i,T>::Z() { /* ... */ }

template<int i>
Z<i,char>::Z() { /* ... */ } 
```

但是，它不是这样工作的。**类的部分或全部特化几乎没有共同点，除了模板参数的“原型”**：

```
// The two following types have only two things related: the template parameter is an int,
// and the second type is a full specialization of the first. There are no relations between
// the content of these 2 types.
template<int> struct A {};
template<> struct A<42> { void work(); }; 
```

您必须声明和定义每个（部分）专业化：

```
// Fixed example
template<int,typename T>
struct Z
{
    T myValue;
    Z();
    void print() { /* ... */ }
};
template<int i, typename T>
Z<i,T>::Z() { /* ... */ }

// Specialization for <all-ints,char>
template<int i>
struct Z<i,char>
{
    char myValue;
    char othervalue;
    Z();
    void print() { /* Same code than for the general case */ }
};

template<int i>
Z<i,char>::Z() { /* ... */ } 
```

避免代码重复的唯一方法是使用*特征*继承：

```
// Example with the print function
template<typename T>
struct print_helper
{
    void print() { /* ... */ }
};

// Fixed example
template<int,typename T>
struct Z : public print_helper<T>
{
    T myValue;
    Z();
};
template<int i, typename T>
Z<i,T>::Z() { /* ... */ }

// Specialization for <all-ints,char>
template<int i>
struct Z<i,char> : public print_helper<char>
{
    char myValue;
    char othervalue;
    Z();
};

template<int i>
Z<i,char>::Z() { /* ... */ } 
```

目前，如果没有重复，您将无法做您想做的事情（*删除代码重复的功能已经`static if`并且已经被提议用于下一个 C++ 标准，请参阅[n3322](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3322.pdf)和[n3329](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3329.pdf)）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T11:47:41.203

你可以看看这个课程[http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/Stephan-T-Lavavej-Core-C-5-of-n](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/Stephan-T-Lavavej-Core-C-5-of-n)

虽然您无法为函数模板定义部分特化，但您可以为类或结构模板定义部分特化。

```
template<typename T> struct helper {
    static void doThingy(){}
};

template<typename X> struct helper<X*> {
    static void doThingy(){}
};

Helper(double*)::doThingy(); 
```

在此示例中，您希望仅当模板中的类型是指针类型时才专门化 doThingy() 中的行为。在这种情况下，您不能使用方法 doThingy() 的重载。这是因为您不能重载没有参数的函数。但是您可以对 struct helper 进行部分专业化。在专门的模板中，您为 doThingy() 实现了希望的行为。

# c - 为什么在另一个函数中调用时我的指针没有给出正确的值？

> ID：13444617
> 
> 赞同：-3
> 
> 时间：2012-11-18T21:10:55.077
> 
> 标签：c

这是我的代码：

```
void journal (long accounts[MAX], char debcred[MAX], double amount[MAX], int *totalinput); 
```

= 我正在调用的函数

```
 if (option == '2')
        journal(accounts, debcred, amount, &totalinput); 
```

= 调用函数的条件

```
void journal (long accounts[MAX], char debcred[MAX], double amount[MAX], int *totalinput) {

int i = 0;

printf ("\n");
printf ("\t\t\tGeneral Journal\n");
printf ("Account  Description\t\t\t     Debit   Credit\n");
printf ("-------  ------------------------------   -------- --------\n");

for (i = 0; i < totalinput; i++)
{
    printf ("%ld", accounts[i]);

    if (debcred[i] == 'd')
        printf ("\t\t\t\t\t%lf\n", amount[i]);

    else if (debcred[i] == 'c')
        printf ("\t\t\t\t\t\t%lf\n", amount[i]);
}

} 
```

在我的程序中，当我运行它时，我得到一个无限循环。我猜是因为总输入指针没有被正确调用。

我尝试在我的日志函数中 printf 输入 totalinput 变量，看看我得到了什么数字，我得到了 260000 或类似的东西，这不是它！有没有人看到我如何称呼它的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:12:09.957

哇哇，我在发布问题后一直在寻找答案。我只是在日志函数中的总输入变量之前放了一个“*”，它正确地调用了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:20:36.723

通过引用指针调用你的函数

# objective-c - 多个图像/按钮相对于它们在可缩放图像上的位置保持不变

> ID：13444619
> 
> 赞同：0
> 
> 时间：2012-11-18T21:11:00.457
> 
> 标签：objective-c, ios

我用 UIScrollView 制作了一张地图，我想在地图上放置其他小图像或按钮，并让它们在放大时位于地图上的相对位置，并且可以随时单击它们。因此，当缩小时，国家 A 上的按钮在放大时仍会在国家 A 上，而当您在放大时滚动出国家视图时会从屏幕上消失。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:27:07.457

据我所知，您想在自己的自定义地图上放置自定义视图。并且您需要为视图保持相同的大小，但是当您滚动或缩放 imageView 时它们应该移动。您必须将视图放置到 scrollView 的超级视图并在缩放或滚动时重新计算位置：

CustomMapViewController.h：

```
@interface CustomMapViewController : UIViewController <UIScrollViewDelegate>
{
    UIScrollView *_scrollView;
    UIImageView *_mapImageView;

    NSArray *_customViews;
} 
```

CustomMapViewController.m：

```
#import "CustomMapViewController.h"

enum {
    kAddContactButton = 1,
    kInfoDarkButton,
    kInfoLightButton,
    kLogoImage,
};

@implementation CustomMapViewController

- (void)dealloc
{
    [_scrollView release]; _scrollView = nil;
    [_mapImageView release]; _mapImageView = nil;
    [_customViews release]; _customViews = nil;
    [super dealloc];
}

- (void) loadView
{
    [super loadView];

    UIImageView *mapImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"map.png"]];

    UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    scrollView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    scrollView.delegate = self;
    scrollView.minimumZoomScale = 0.2;
    scrollView.maximumZoomScale = 2.0;

    [scrollView addSubview:mapImageView];
    scrollView.contentSize = mapImageView.frame.size;

    [self.view addSubview:scrollView];

    _scrollView = scrollView;
    _mapImageView = mapImageView;

    // Add custom views
    UIButton *btn1 = [UIButton buttonWithType:UIButtonTypeContactAdd];
    btn1.tag = kAddContactButton;
    [self.view addSubview:btn1];

    UIButton *btn2 = [UIButton buttonWithType:UIButtonTypeInfoDark];
    btn2.tag = kInfoDarkButton;
    [self.view addSubview:btn2];

    UIButton *btn3 = [UIButton buttonWithType:UIButtonTypeInfoLight];
    btn3.tag = kInfoLightButton;
    [self.view addSubview:btn3];

    UIImageView *image = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"logo.png"]] autorelease];
    image.tag = kLogoImage;
    [self.view addSubview:image];

    _customViews = [[NSArray alloc] initWithObjects:btn1, btn2, btn3, image, nil];

    [self _zoomToFit];
}

- (void) _zoomToFit
{
    UIScrollView *scrollView = _scrollView;
    CGFloat contentWidth = scrollView.contentSize.width;
    CGFloat contentHeigth = scrollView.contentSize.height;
    CGFloat viewWidth = scrollView.frame.size.width;
    CGFloat viewHeight = scrollView.frame.size.height;

    CGFloat width = viewWidth / contentWidth;
    CGFloat heigth = viewHeight / contentHeigth;

    CGFloat scale = MIN(width, heigth); // to fit
    // CGFloat scale = MAX(width, heigth); // to fill

    // May be should add something like this
    if ( scale < _scrollView.minimumZoomScale ) {
        _scrollView.minimumZoomScale = scale;
    } else if ( scale > _scrollView.maximumZoomScale ) {
        _scrollView.maximumZoomScale = scale;
    }

    _scrollView.zoomScale = scale;
}
////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Positions

- (void) _updatePositionForViews:(NSArray *)views
{
    CGFloat scale = _scrollView.zoomScale;
    CGPoint contentOffset = _scrollView.contentOffset;
    for ( UIView *view in views ) {
        CGPoint basePosition = [self _basePositionForView:view];
        [self _updatePositionForView:view scale:scale basePosition:basePosition offset:contentOffset];
    }
}

- (CGPoint) _basePositionForView:(UIView *)view
{
    switch (view.tag) {
        case kAddContactButton:
            return CGPointMake(50.0, 50.0);

        case kInfoDarkButton:
            return CGPointMake(250.0, 250.0);

        case kInfoLightButton:
            return CGPointMake(450.0, 250.0);

        case kLogoImage:
            return CGPointMake(650.0, 450.0);

        default:
            return CGPointZero;
    }
}

- (void) _updatePositionForView:(UIView *)view scale:(CGFloat)scale basePosition:(CGPoint)basePosition offset:(CGPoint)offset;
{
    CGPoint position;
    position.x = (basePosition.x * scale) - offset.x;
    position.y = (basePosition.y * scale) - offset.y;

    CGRect frame = view.frame;
    frame.origin = position;
    view.frame = frame;
}

//////////////////////////////////////////////////////////////////////////////////////
#pragma mark - UIScrollViewDelegate

- (void)scrollViewDidZoom:(UIScrollView *)scrollView
{
    [self _updatePositionForViews:_customViews];
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    [self _updatePositionForViews:_customViews];
}

- (UIView *) viewForZoomingInScrollView:(UIScrollView *)scrollView;
{
    return _mapImageView;
}

@end 
```

# mysql - 理解不存在

> ID：13444621
> 
> 赞同：4
> 
> 时间：2012-11-18T21:11:34.647
> 
> 标签：mysql, sql, sqlplus

我正在尝试掌握窍门，`NOT EXISTS`但遇到了一些麻烦。假设我有 2 张桌子。

```
Employees:
+------+------+
| eid  | name |
+------+------+
| 1    | Bob  |
| 2    | Alice|
| 3    | Jill |
+------+------+

Transactions:
+----------+----------+----------+-----------+
| tid      | eid      | type     | amount    |
+----------+----------+----------+-----------+
| 1        | 1        | Deposit  | 50        |
| 2        | 1        | Open     | 500       |
| 3        | 3        | Open     | 200       |
| 4        | 2        | Withdraw | 25        |
| 5        | 2        | Open     | 100       |
+----------+----------+----------+-----------+ 
```

假设我要查找所有未开立账户且金额为 250 美元或更高的员工的姓名。这意味着我只想要员工开设金额 < 250 美元的账户的行。现在我有这样的东西......

```
SELECT name FROM Employees e
WHERE NOT EXISTS (
SELECT * FROM Transactions t
WHERE t.type <> 'Open' AND t.amount >= 250 AND t.eid = e.eid); 
```

这显然是错误的，我真的不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:25:02.980

您需要将 a`EXISTS`与 a结合起来，`NOT EXISTS`因为您“只需要员工开设金额 < 250 美元的帐户的行。”：

```
SELECT name FROM Employees e
WHERE EXISTS (
   SELECT 1 FROM Transactions t
   WHERE t.amount < 250 AND t.type='Open' AND t.eid = e.eid)
AND NOT EXISTS (
   SELECT 1 FROM Transactions t
   WHERE t.amount >= 250 AND t.eid = e.eid); 
```

您需要`EXISTS`确保只返回具有金额 < 250 的未结账户的员工。`NOT EXISTS`需要确保不包括具有金额 >= 250 的额外帐户的员工。

[**这是一个 sql-fiddle 演示**](http://sqlfiddle.com/#!2/1faa3/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:13:10.593

我看到的唯一问题是您使用`<>`了交易类型，而不是`=`

```
SELECT name FROM Employees e
WHERE NOT EXISTS (
SELECT null FROM Transactions t
WHERE t.transaction_type = 'Open' AND t.amount >= 250 AND t.eid = e.eid); 
```

编辑问题后，答案将是：

```
SELECT name FROM Employees e
WHERE EXISTS (
SELECT null FROM Transactions t
WHERE t.transaction_type = 'Open' AND t.amount < 250 AND t.eid = e.eid); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T21:41:51.100

我建议使用 LEFT JOIN 而不是子选择。

```
SELECT name FROM Employees e
LEFT JOIN Transactions t
ON e.eid = t.eid
WHERE t.tid IS NULL
OR t.type <> 'Open'
OR t.amount <= 250; 
```

这将连接所有交易记录，然后只包括不存在交易、用户有未打开交易或金额不符合要求的记录 $250

# c++ - typedef/alias 声明的声明点

> ID：13444626
> 
> 赞同：2
> 
> 时间：2012-11-18T21:12:06.867
> 
> 标签：c++, c++11, typedef, language-lawyer

以下代码有效吗？

```
struct B{ using X=int; };
struct D1:B{ using X=X; };   // (1)
struct D2:B{ typedef X X; }; // (2) 
```

我希望 D2::X 的声明点位于 (2) 中的两个 X 之间，但 gcc 4.8 和 clang 3.2 似乎都接受它。这是标准行为吗？对工作草案/标准的参考将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:39:14.713

关于是否`using X = X`应该选择正在定义`X`的或`X`可能已经在范围内的存在争论。为了避免“未知类型”并使其与 相似`typedef`，被定义`X`为在其要分配的类型表达式中不可见（**因此与其相似`int x = x`，不如与 相似`typedef x x;`**）。

回想一下，这`typedef`只是一个带有`typedef`关键字的普通声明。第一次提到`X`并没有声明任何东西，它只是说什么类型将被别名。如果委员会以这种方式决定，`using X = X` 这就是*可以*提前宣布的主要区别。`X`

但是请注意，您的代码实际上具有*未定义的行为*，因为它违反了不需要诊断的规则。3.3.7p1b2

> 在 S 类中使用的名称 N 应在其上下文中引用相同的声明，并且在 S 的完整范围内重新评估时。违反此规则不需要诊断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T21:27:13.790

在`typedef`声明中，最终名称是被声明的名称，这就是声明点。所以第一个`X`出现在声明之前`D2::X`，因此解析为`B::X`。

# bluetooth - 使用 MATLAB 和蓝牙连接 Neurosky Mindwave

> ID：13444633
> 
> 赞同：0
> 
> 时间：2012-11-18T21:12:45.017
> 
> 标签：bluetooth, matlab

我有一个[Neurosky Mindwave](http://store.neurosky.com/products/mindwave-1)设备，我想可视化并记录它的原始数据，以便使用 MATlab 进行进一步分析。我已经尝试过 Neurosky 商店中推荐的所有免费应用程序（Brain Grapher、Mindstream 等），但我无法导出原始数据（可能是 CSV 格式）。我在 MATlab 中有仪器控制工具箱，但无法通过蓝牙找到设备。该设备本身可以工作，我已经能够通过其内置的蓝牙连接和不同的软件来使用它。这是我输入 instrhwinfo('Bluetooth') 时 MATlab 给我的错误消息：

```
Error using instrhwinfo (line 195)

Java exception occurred:
java.lang.NullPointerException

at com.mathworks.toolbox.instrument.BluetoothDiscovery.discoverDevices(BluetoothDiscovery.java:448)

at com.mathworks.toolbox.instrument.BluetoothDiscovery.hardwareInfo(BluetoothDiscovery.java:247) 
```

Mindwave 是否与 MATlab 开箱即用不兼容？

提前谢谢你-亚历克斯

ps 在我的问题中格式似乎错误，我的经验非常有限

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T09:04:38.913

你试过neurosky matalab_dll [click for neurosky link](http://developer.neurosky.com/docs/lib/exe/fetch.php?media=matlabdll.zip)吗？它与串行端口连接。

注意：您也可以使用嵌入式编码器下的 simulink 串行接收块来执行此操作，但您还需要一个数据包解析器来查看原始数据。

# java - jdbc 将数据导出为 xml

> ID：13444637
> 
> 赞同：2
> 
> 时间：2012-11-18T21:13:01.623
> 
> 标签：java, sql, xml, jdbc

> **可能重复：**
> [Java：如何缩进由 Transformer](https://stackoverflow.com/questions/1384802/java-how-to-indent-xml-generated-by-transformer)
> [jdbc 导出到 xml 生成的 XML - 声明显示独立 = 否](https://stackoverflow.com/questions/13445031/jdbc-export-to-xml-declaration-showing-standalone-no)

```
 TransformerFactory factory = TransformerFactory.newInstance();
      Transformer transformer = factory.newTransformer();
      String outputPathname = "output.xml";
      StreamResult result = new StreamResult(new File(outputPathname));
      Source source = new DOMSource(dataDoc);
      transformer.transform(source, result); 
```

我需要使用 jdbc 将数据导出到特定的结构化 xml 文档中。我正在使用解析方法。我需要顶部显示

```
 <?xml version="1.0" standalone="yes"?> 
```

但是，文件创建实际上显示

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>. 
```

如何修改代码以实现所需的形式？

# php - 多个单选按钮ajax帖子

> ID：13444640
> 
> 赞同：1
> 
> 时间：2012-11-18T21:13:06.210
> 
> 标签：php, javascript, jquery, html, mysql

我是网络编程新手，我真的需要你的帮助。我有一个带有几个单选按钮的表单，我想通过 ajax 帖子将它们插入 mysql。我可以为一个按钮做到这一点，但不止一个，我不知道该怎么做。

这是我的 html 和 jquery 的一部分：

```
<html>
    <script>
        $(document).ready(function () {
            $("#submit").click(function () {
                var q1 = $('input[type="radio"]:checked').val();
                if ($('input[type="radio"]:checked').length == "0") {
                    alert("Select any value");
                } else {
                    $.ajax({
                        type: "POST",
                        url: "ajax-check.php",
                        data: "q1=" + q1,
                        success: function () {
                            $("#msg").addClass('bg');
                            $("#msg").html("value Entered");
                        }
                    });
                }
                return false;
            });
        });
    </script>
    </head>
    <body>
        <div id="msg"></div>
        <form method="post" action="">
            <div class="Clear">
                question1:bla bla bla
                <input class="star required" type="radio" name="q1" value="1" />
                <input class="star" type="radio" name="q1" value="2" />
                <input class="star" type="radio" name="q1" value="3" />
                <input class="star" type="radio" name="q1" value="4" />
                <input class="star" type="radio" name="q1" value="5" />
            </div>
            <br />
            <div class="Clear">
                question2:bla bla bla
                <input class="star required" type="radio" name="q2" value="1" />
                <input class="star" type="radio" name="q2" value="2" />
                <input class="star" type="radio" name="q2" value="3" />
                <input class="star" type="radio" name="q2" value="4" />
                <input class="star" type="radio" name="q2" value="5" />
            </div>
            <input type="submit" name="submit" id="submit" />
        </form>
    </body>
</html> 
```

这是我在 mysql 中插入按钮的方法：

```
<?php
$query = mysql_connect("localhost", "root", "");
mysql_select_db('db', $query);

if (isset($_POST['q1'])) {
    $choice1 = $_POST['q1'];
    $choice2 = $_POST['q2'];
    mysql_query("INSERT INTO tb VALUES('','$choice1')");
}
?> 
```

我试图为每个按钮制作一个 var，但没有奏效。我如何在 php 中发布所有值，我应该将什么更改为我的 ajax 和 php？谢谢！

这就是我做 .php 的方式

```
<?php
$query=mysql_connect("localhost","root","");
mysql_select_db('cosmote',$query);
$q = array();
for ($i = 1; $i <= 2; $i++) {
  $q[$i] = isset($_POST['q'+$i]) ? mysql_real_escape_string($_POST['q'+$i]) : 0;
}
mysql_query("INSERT INTO tabel (q1,q2) VALUES ('$q[1]','$q[2]')");
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T23:09:59.073

好的，这是如何做到的。首先，`id`在表单中添加一个：

```
<form id="myform" method="post" action=""> 
```

这将使通过 jQuery 访问更容易。然后，将序列化的表单作为 POST 数据传递给您的 PHP 脚本：

```
$(document).ready(function () {
    $("#submit").click(function () {                
        if ($('input[type="radio"]:checked').length == "0") {
            alert("Select any value");
        } else {
            $.ajax({
                type: "POST",
                url: "ajax-check.php",
                data: $("#myform").serialize(),
                success: function () {
                    $("#msg").addClass('bg');
                    $("#msg").html("value Entered");
                }
            });
        }
        return false;
    });
}); 
```

之后，您可以从`$_POST`PHP 脚本中的数组中获取单选按钮值：

```
$_POST['q1'] // value of q1, can be 1-5
$_POST['q2'] // value of q1, can be 1-5 
```

**编辑：**您的 PHP 代码的问题是您使用`+`而不是`.`连接字符串。改为这样写：

```
$q[$i] = isset($_POST['q'.$i]) ? mysql_real_escape_string($_POST['q'.$i]) : 0; 
```

在此之后，我很确定它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:20:24.273

您可以[`.serialize()`](http://api.jquery.com/serialize/)在表单上使用，它会为您提供表单的值，就像您定期提交一样`data: $('form').serialize(),`

# java - 如何在 Eclipse RCP 4 中获取 TrimWindow 的 TrimBar？

> ID：13444643
> 
> 赞同：0
> 
> 时间：2012-11-18T21:13:13.293
> 
> 标签：java, eclipse-rcp, e4

我在应用程序的 TrimmedWindow 顶部放置了一个工具栏。我有一个处理程序，它必须检查是否在此菜单栏上按下了检查按钮。

我尝试放入`EMenuService`我`execute()`的处理程序方法，但它没有有用的方法。如果我调试到我的应用程序，我可以在`EMenuService`对象中看到我的菜单。

如何从 Eclipse 上下文中获取菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:38:09.223

没有代码很难帮助你。

但是您的处理程序的基本思想如下：

```
public class BrokerHandler {

    @Inject
    // the services you need

    @Execute 
    public void execute(IEclipseContext context, @Named(IServiceConstants.ACTIVE_SHELL) Shell shell)
            throws InvocationTargetException, InterruptedException {
        // do some stuff
    }
} 
```

然后，在您的 application.e4xmi 中，您需要创建一个`Window>Trimmed Window>Trim Bars>Window Trim>Toolbar>Handled Tool Item`指向您的指向`Commands>Command`您的`Handlers>Handler`指向您的 java 类的指向，并使用`@Execute`上述注释的方法。

那么该方法的每次执行都`@Execute`意味着用户已经按下了工具栏按钮。

您可以使用事件代理服务将消息传递到应用程序的其他部分，或者将您自己的一些内容存储在`IEclipseContext`.

你可以看看这里：http: [//xseignard.github.com/demoCamp2012/prez/#1](http://xseignard.github.com/demoCamp2012/prez/#1)

希望这会有所帮助，但你的问题太模糊了。

# agile - 如何在分布式团队中保持代码质量和敏捷流程？

> ID：13444644
> 
> 赞同：2
> 
> 时间：2012-11-18T21:13:20.007
> 
> 标签：agile, software-quality

我的团队即将转变为分布式敏捷团队，我担心我们将如何保护我们的代码库和流程。目前，我们是一个非常敏捷的团队，致力于代码质量，我们希望沿着这条道路继续前进。但是，我们中没有人曾在敏捷分布式团队中工作过。

你们中有人有什么建议或经验可以分享，以帮助我们保护分布式环境中的敏捷流程和代码质量吗？你知道我可以读什么书吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:16:14.717

首先，我认为您的文字听起来有点防御/悲观（“保护过程”）。我当然理解你的担忧，但要开放并尝试接受改变：）

目前我是一个项目的一部分，该项目包括来自 4 个不同国家的 23 名开发人员（但只有一小时的时差）。公司聘请了外部开发人员，因为我们需要更多的人力；我们有 4 个团队和另外 3 名专门的测试人员；“主要”开发人员（他们是公司的一部分）和产品负责人都在一个位置。

我们拥有所有标准的敏捷流程/技术，但当然这是具有挑战性的，我们需要很长时间才能弄清楚所有事情。所以，我可以分享我们的经验，并告诉你什么对我们的环境和情况有效。

由于时区差别不大，我们创建了混合团队；2个“主要”开发人员和（至少）2个来自另一个位置。这非常重要，有几个原因：

*   知识共享速度更快，并帮助远程人员了解领域
*   如果远程开发人员需要来自其他人（例如 PO）的特定信息，Scrum Master 可以为他们提供支持……电子邮件很容易被忽略。
*   您对源代码有更好的控制；主要开发人员可以组织代码审查、结对编程会议和/或创建指南。
*   沟通是最重要的；总是让每个人都参与重要的决定

敏捷当然是关于人的，但是在与远程团队打交道时，您需要工具。什么对我们有用：

*   用于每日站立会议的 Skype
*   只要您需要共享屏幕，请加入我[或](http://www.teamviewer.com/en/index.aspx)Teamviewer [。](https://join.me/)它也适用于远程结对编程
*   [corkboard.me](https://corkboard.me/)用于回顾或当您需要虚拟软木板时
*   Google Docs 或 Google + 也可用于 sprint 计划等。

不时让人们聚在一起，尤其是在开始时。如果您至少见过您的同事一次，这会有所帮助，如果您一起喝啤酒会更有帮助:) 尝试营造一种氛围，让每个开发人员都受到平等对待，以获得真正的生产环境。

不幸的是，我没有阅读到有关该主题的资源。但是有很多关于分布式敏捷团队的博客文章等。

希望对您的情况有所帮助。如果您有任何其他/更具体的问题，请不要犹豫：）

# html - 具有多个标识符的 css 类定义

> ID：13444647
> 
> 赞同：28
> 
> 时间：2012-11-18T21:13:27.623
> 
> 标签：html, css, class

我刚开始学习 CSS，遇到了一个我不完全理解的例子。我无法很好地描述它，这使得找到答案变得困难（因此，如果我忽略的答案已经存在，我深表歉意）。

我的问题是关于以下示例：

```
.theme-light.slider-wrapper {
  background: #fff;
  padding: 10px;
} 
```

我知道 CSS 中的类是使用`.name`语法定义的，然后可以在标签中使用，如下所示：

```
<div class="name"></div> 
```

我不明白“双重”声明的`.name1` `.name2`工作原理以及如何在标签中使用它。

在相关说明中，给我的示例网站在样式表中不存在的标签中使用了一个 ID.. 还能在哪里定义呢？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-11-18T21:32:46.247

在带有选择器的 CSS 中，`.className`您可以使用“className”类为每个元素定义属性。每个元素都可以有更多的类。具有更多类的选择器的含义取决于您在声明中如何组合它们：

*   `.class1.class2`将仅匹配定义了这两个类的元素。

    ```
    .class1.class2 { background: red; }
    <div class="class1 class2"></div> 
    ```

*   `.class1, .class2`将匹配 .class1 或 .class2 的元素

    ```
    .class1, .class2 { background: yellow; }
    <div class="class1"></div>
    <div class="class2"></div> 
    ```

*   `.class1 .class2`将仅匹配具有 class1 的元素中具有 class2 的元素。

    ```
    .class1 .class2 { background: blue; }
    <div class="class1">
        <div class="class2"></div>
    </div> 
    ```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-11-18T21:20:28.103

也许这个使用示例会为您解决问题。

想象以下场景。

你将会拥有：

```
<div class="general-div">some stuff</div>
<div class="general-div special">some stuff</div>
<div class="general-div">some stuff</div>
<div class="extra-div">some stuff</div>
<div class="extra-div special">some stuff</div> 
```

假设您希望 div 具有以下相同的属性：

```
.general-div {width: 300px; height: 300px; border: 1px solid #000;}

.extra-div {width: 200px; height: 200px; border: 1px solid #666;} 
```

但是您希望具有 .special 类的 .general-div 具有红色背景，而具有 .special 类的额外 div 具有蓝色背景。

你会写：

```
.general-div.special {background-color: red;}

.extra-div.special {background-color: blue;} 
```

希望它可以清除有关情况的使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T21:38:04.230

*如何使用双重课程，例如* `<div class="name1 name2"></div>`？

你`div`必须上课`name1`和`name2`（[见现场演示](http://jsfiddle.net/U8a45/)）。

* * *

*怎么样* `.theme-light.slider-wrapper`？

这意味着您的元素必须同时具有 `theme-light`和`slide-wrapper`类（[参见现场演示](http://jsfiddle.net/BDLCs/)）。

它对更多元素有好处。您希望某些元素具有灰色背景。没问题！将它们添加类`gray`并定义 css：

```
.gray {
   background: #ddd;
} 
```

您还需要一些元素有红色文本。`red-text`用css定义类：

```
.red-text {
   color: red;
} 
```

最后你的段落有灰色背景和红色文本。只需像这样添加`gray`和`red-text`类`<p class="gray red-text">Lorem ipsum</p>`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T21:20:18.283

`.theme-light.slider-wrapper`只是意味着它有两个类。在 HTML 中，它可能如下所示：

```
<div class="theme-light slider-wrapper"></div> 
```

至于 ID，没有理由必须在 CSS 中引用 HTML 中的 ID

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-03T07:42:06.307

这是您的问题的详细解释。

[![颜色编码的类图](../Images/dd85fbc055486c362c428a2a79919eb5.png)](https://i.stack.imgur.com/HvWad.jpg)

来自：www.itsmesharath.in

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-18T21:20:17.503

你必须使用

```
<div class="class1 class2"> 
```

将多个类应用于一个对象。

# objective-c - aUIScrollView 中的 UITextField - inputView 不起作用

> ID：13444648
> 
> 赞同：0
> 
> 时间：2012-11-18T21:13:31.247
> 
> 标签：objective-c, uiscrollview, uitextfield, inputview

我有`UItextField`一个`UIScrollView`。我在我的身上分配了一个`inputView`（选择器），`UITextField`但它不起作用。当我点击 my`textfield`时，我得到的是键盘而不是选择器。当我删除`UIScrollView`它时效果很好（我得到了选择器）。你有什么想法？谢谢。

编辑（更清楚）：我有`UItextField`一个`UIScrollView`. 我调用了一个显示选择器的方法。`textfield`但是当我在 a`scrollview`并且我得到键盘时，永远不会调用该方法。当我删除 时`UIScrollView`，我的方法（显示选择器）被调用，我得到了我的选择器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T22:16:22.377

如果您已经在使用文本字段委托，请尝试...

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField 
{
    [self openCustomPicker:self]; // Call your IBAction method
    return NO;  // Hide both keyboard and blinking cursor.
} 
```

防止 UITextField 显示键盘。

# c++ - 在 C++ 中使用带有队列的地图

> ID：13444657
> 
> 赞同：1
> 
> 时间：2012-11-18T21:14:21.407
> 
> 标签：c++, stl, map, queue

当尝试运行下面的代码时，它编译没有任何错误。

```
int main()
{
    queue<map<int,int> >run_time;
} 
```

但是，现在当我尝试使用下面的代码将某些东西推入队列时。

```
int main()
{
    queue<map<int,int> >run_time;

    run_time.push(make_pair(1,2));
    run_time.push(make_pair(3,4));
} 
```

我得到错误：

`no matching function for call to 'std::queue<std::map<int,int,std::less<int>,std::allocator<std::pair<const int,int>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:16:02.743

问题是它`make_pair`不会创建一个`map`. 您需要事先创建地图，使用 插入其中`make_pair`，然后将地图本身插入`queue`.

```
map<int,int> x;
x.insert(make_pair(1,2));
run_time.push(x); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T21:16:21.600

你有一个地图队列，而不是成对的队列。您需要将地图推入其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T13:13:13.540

从问题中给出的代码看来，您想要创建一个 Queue ，其中 Queue 的每个元素都是一组其他两个元素。这可以使用类模板“pair”或“tuple”轻松完成。

对于**对**`template <class T1, class T2> struct pair;`[1]，您在为**元组**[2]编写时`template <class... Types> class tuple;`

元组是对的泛化，其中两个以上的成员可以组成组。我觉得您的代码中的错误是您正在初始化地图但没有将其用作地图，您想将地图的各个元素推送到队列中，这破坏了创建地图的目的。Pair 和 Tuple 创建可以与其他类似对象分开处理的单独对象，它们的行为类似于使用**struct**来形成不同数据类型的组。

[1]。[http://www.cplusplus.com/reference/utility/pair/](http://www.cplusplus.com/reference/utility/pair/)

[2]。[http://www.cplusplus.com/reference/tuple/tuple/](http://www.cplusplus.com/reference/tuple/tuple/)

# mysql - 查询仅选择第一个匹配项，而不是满足 2 个条件的地方

> ID：13444660
> 
> 赞同：0
> 
> 时间：2012-11-18T21:14:29.790
> 
> 标签：mysql, join, where

我正在为 Xbox 上的虚拟曲棍球联赛开发统计跟踪网页。我已经为此工作了一段时间，并且已经完成了大部分工作，但是在显示某些信息时发现了一个问题。似乎选择了表中与我的 JOIN 匹配的第一行，而不是也通过 WHERE 条件选择它。我想要做的是有一个页面来显示游戏的得分。

IE，从下面的信息来看，第 1 场比赛将是“纽约在芝加哥”，最终结果应该是 NY-5，CHI-3。这样可行。我遇到的问题是当我显示第 3 场比赛“纽约芝加哥”时，它显示相同的统计数据，而不是 CHI-2 NY-4。

我在这里缺少什么，还是有更好的方法来做到这一点？我基本上希望我的 JOIN 执行以下操作..这就是我认为我在 WHERE 行中所做的事情。

```
JOIN GameStats GSA ON ((GSA.team_ID = gs.awayTeam_ID) AND (GSA.gameSchedule_ID = '" . $scheduleID . "')
JOIN GameStats GSH ON ((GSH.team_ID = gs.homeTeam_ID) AND (GSH.gameSchedule_ID = '" . $scheduleID . "') 
```

任何帮助将不胜感激！

```
$sql="SELECT
    away.name as AWAY_TEAMNAME, 
    away.ID as AWAY_TEAMID,
    home.name as HOME_TEAMNAME,
    home.ID as HOME_TEAMID,
    gs.ID as GAMEID

    GSA.GOALS AS AWAY_GOALS,
    GSA.SHOTS AS AWAY_SHOTS

    GSH.GOALS AS HOME_GOALS,
    GSH.SHOTS AS HOME_SHOTS

FROM
    GameSchedule gs
    JOIN Team away ON away.ID = gs.awayTeam_ID
    JOIN Team home ON home.ID = gs.homeTeam_ID
    JOIN GameStats GSA ON GSA.team_ID = gs.awayTeam_ID
    JOIN GameStats GSH ON GSH.team_ID = gs.homeTeam_ID
WHERE
    gs.ID = " . $scheduleID;

Table: Team
-------------------
| ID | name       | 
-------------------
|  1  | New York  |
|  2  | Chicago   |
|  3  | Detroit   |
|  4  | Boston    |
-------------------

Table: GameStats
--------------------------------------------------
| ID | gameSchedule_ID | team_ID | goals | shots |
--------------------------------------------------
| 1  |        1        |    1    |   5   |   5   |
| 2  |        1        |    2    |   3   |   2   |
| 3  |        2        |    3    |   6   |   1   |
| 4  |        2        |    4    |   1   |   7   |
| 5  |        3        |    2    |   2   |  14   |
| 6  |        3        |    1    |   4   |   7   |
| 7  |        4        |    4    |   5   |   9   |
| 8  |        4        |    3    |   5   |   4   |
-------------------------------------------------

Table: GameSchedule
----------------------------------
| ID | awayTeam_ID | homeTeam_ID |
----------------------------------
| 1  |      1      |      2      |
| 2  |      3      |      4      |
| 3  |      2      |      1      |
| 4  |      4      |      3      |
| 5  |      2      |      4      |
| 6  |      1      |      3      |
---------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:41:53.017

您的查询正在选择多行，而您的应用程序仅显示第一行。碰巧第一行是按游戏排序的，但不一定如此。

正如您在问题本身中所说，问题在于游戏统计数据的加入。您的`from`子句应如下所示：

```
FROM
    GameSchedule gs
    JOIN Team away ON away.ID = gs.awayTeam_ID
    JOIN Team home ON home.ID = gs.homeTeam_ID
    JOIN GameStats GSA ON GSA.team_ID = gs.awayTeam_ID and
                          gsa.gameschedule_id = gs.id
    JOIN GameStats GSH ON GSH.team_ID = gs.homeTeam_ID and
                          gsh.gameschedule_id = gs.id 
```

# javascript - 如何在处理中中断while语句？

> ID：13444661
> 
> 赞同：-2
> 
> 时间：2012-11-18T21:14:29.827
> 
> 标签：javascript, while-loop, processing

我有两个按钮，当单击一个按钮时，它会启动一个`while`语句。该`while`语句播放音符，这是一首长旋律。现在我希望当不再单击按钮时，while 语句会立即停止并且不再播放旋律。

现在我有一个简单的 while 语句 - 我试过`break;`但没有解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:02:48.627

您尚未发布有关您的 while 语句的任何代码。根据您的描述，这听起来很简单：

*   如果按下鼠标声音会播放和更新（根据旋律/等更改音符）
*   否则没有声音（没有更新，没有输出）

从我的角度来看，这很简单`if/else`，因此只需注册鼠标事件，例如`mousePressed`和`mouseReleased`（因为单击本质上是一对由按下然后释放组成的）来切换声音更新。我不是声音/音符/旋律方面的专家，但这里是 Minim SineWaveSignal Processing 示例的修改版本：

```
import ddf.minim.*;
import ddf.minim.signals.*;

Minim minim;
AudioOutput out;
SineWave sine;

float freq = 60;

void setup()
{
  size(512, 200, P2D);

  minim = new Minim(this);
  out = minim.getLineOut(Minim.STEREO);
  sine = new SineWave(440, 0.5, out.sampleRate());
  sine.portamento(200);
  sine.setAmp(0);
  out.addSignal(sine);
}

void draw()
{
  background(0);
  stroke(255);
  //update sound only if mouse is pressed
  if(mousePressed){
    freq += 10;//in this case I'm updating the frequency
    if(freq > 1500) freq = 60;//change melody according to time delays/etc. here
    sine.setFreq(freq);
  }
  // draw the waveforms
  for(int i = 0; i < out.bufferSize() - 1; i++)
  {
    float x1 = map(i, 0, out.bufferSize(), 0, width);
    float x2 = map(i+1, 0, out.bufferSize(), 0, width);
    line(x1, 50 + out.left.get(i)*50, x2, 50 + out.left.get(i+1)*50);
    line(x1, 150 + out.right.get(i)*50, x2, 150 + out.right.get(i+1)*50);
  }
}
//updated sound "while" mouse is clicked (press+release)
void mousePressed(){
  sine.setAmp(.75);
}
void mouseReleased(){//reset, kill volume/amp and reset freq, in your case return to 1st note of melody for example
  freq = 60;
  sine.setAmp(0);
}

void stop()
{
  out.close();
  minim.stop();
  super.stop();
} 
```

# java - Java .jar 应用程序无法在 Mac Os X Snow Leopard 上启动

> ID：13444662
> 
> 赞同：1
> 
> 时间：2012-11-18T21:14:33.507
> 
> 标签：java, macos, swing, osx-snow-leopard, compatibility

我正在使用*NetBeans 7.2*和 JDK 7 开发一个 Java 应用程序。它设置为使用系统外观。*它在Windows*上运行良好，但是当我双击*Mac OS X* Snow Leopard上的*jar时，我得到：*

 *`The Java JAR File could not be launched, check console for possible error messages.`

显然 Snow Leopard 正在使用 JRE 6 并且无法更新。我认为 Java 就是关于“一次编写，随处运行”，但似乎并非如此。

这里有什么问题，我可以以某种方式让我的应用程序在这台 Mac 上运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:15:33.050

猜测一下，您已经使用 Java 7 编译了这些类，并且您正在尝试使用 Java 6 运行时运行它们。检查控制台输出以查看：`java -jar your.jar`。

在 NetBeans`Tools > Java Platforms`中，验证 JDK 1.6 是否可用。在`File > Project Properties > Sources > Source/Binary Format`中，选择 JDK 1.6。在`File > Project Properties > Libraries > Java Platform`中，选择 JDK 1.6。

附录：*您还没有解释源和平台版本之间的联系。*

Netbeans 使用这些设置来操作Java 编译器的`-source`和选项，这说明了更多。从命令行，可用于确保在针对早期版本时不会无意中使用更高版本的库类。此[*源和目标选项*](http://mindprod.com/jgloss/javacexe.html)表概述了一些重要功能的历史。`-target`[`javac`](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html)`-bootclasspath`[](http://mindprod.com/jgloss/javacexe.html)*

# python - 使用 Flask 在 Python 中实现面包屑？

> ID：13444666
> 
> 赞同：10
> 
> 时间：2012-11-18T21:15:23.397
> 
> 标签：python, navigation, flask, breadcrumbs

我想要导航我的[Flask](http://flask.pocoo.org)应用程序的面包屑。一个选项可能是使用像[bread.py](http://russell.ballestrini.net/a-homegrown-python-bread-crumb-module/)这样的通用 Python 模块：

> 面包对象接受一个 url 字符串并授予对 url crumbs（部分）或 url 链接（每个 crumb 的 href 列表）的访问权限。

bread.py 从 url 路径生成面包屑，但我希望面包屑的元素是以前访问过的页面的标题和链接。

在 Flask 中，也许这可以使用装饰器或扩展`@route`装饰器来完成。

有没有办法让每次调用都`route()`将页面的标题和链接（在用 装饰的函数/类中定义`@route`）添加到面包屑？还有其他方法吗？为 Flask 实现的面包屑的任何示例？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T00:07:07.883

所以你是在“路径/历史”面包屑之后，而不是“位置”面包屑来使用[维基百科文章](http://en.wikipedia.org/wiki/Breadcrumb_%28navigation%29)中的术语？

如果您想访问用户访问链接的历史记录，那么您将不得不将它们保存在会话中。我已经尝试过创建一个装饰器来做到这一点。

`breadcrumb.py`：

```
import functools
import collections

import flask

BreadCrumb = collections.namedtuple('BreadCrumb', ['path', 'title'])

def breadcrumb(view_title):
    def decorator(f):
        @functools.wraps(f)
        def decorated_function(*args, **kwargs):
            # Put title into flask.g so views have access and
            # don't need to repeat it
            flask.g.title = view_title
            # Also put previous breadcrumbs there, ready for view to use
            session_crumbs = flask.session.setdefault('crumbs', [])
            flask.g.breadcrumbs = []
            for path, title in session_crumbs:
                flask.g.breadcrumbs.append(BreadCrumb(path, title))

            # Call the view
            rv = f(*args, **kwargs)

            # Now add the request path and title for that view
            # to the list of crumbs we store in the session.
            flask.session.modified = True
            session_crumbs.append((flask.request.path, view_title))
            # Only keep most recent crumbs (number should be configurable)
            if len(session_crumbs) > 3:
                session_crumbs.pop(0)

            return rv
        return decorated_function
    return decorator 
```

这是一个演示它的测试应用程序。请注意，我刚刚使用了 Flask 的内置客户端会话，您可能希望在生产中使用更安全的服务器端会话，例如[Flask-KVsession](http://flask-kvsession.readthedocs.org/en/0.2/)。

```
#!/usr/bin/env python
import flask
from breadcrumb import breadcrumb

app = flask.Flask(__name__)

@app.route('/')
@breadcrumb('The index page')
def index():
    return flask.render_template('page.html')

@app.route('/a')
@breadcrumb('Aardvark')
def pagea():
    return flask.render_template('page.html')

@app.route('/b')
@breadcrumb('Banana')
def pageb():
    return flask.render_template('page.html')

@app.route('/c')
@breadcrumb('Chimp')
def pagec():
    return flask.render_template('page.html')

@app.route('/d')
@breadcrumb('Donkey')
def paged():
    return flask.render_template('page.html')

if __name__ == '__main__':
    app.secret_key = '83cf5ca3-b1ee-41bb-b7a8-7a56c906b05f'
    app.debug = True
    app.run() 
```

这是以下内容`templates/page.html`：

```
<!DOCTYPE html>
<html>
    <head><title>{{ g.title }}</title></head>
    <body>
        <h1>{{ g.title }}</h1>
        <p>Breadcrumbs:
        {% for crumb in g.breadcrumbs %}
            <a href="{{ crumb.path }}">{{ crumb.title }}</a>
            {% if not loop.last %}&raquo;{% endif %}
        {% endfor %}
        </p>
        <p>What next?</p>
        <ul>
            <li><a href="/a">Aardvark</a>?</li>
            <li><a href="/b">Banana</a>?</li>
            <li><a href="/c">Chimp</a>?</li>
            <li><a href="/d">Donkey</a>?</li>
        </ul>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-26T12:33:51.797

我试图使用 breadcrumb.py ，但我需要检查：

*   如果新项目“item = (flask.request.path, view title)”已经存在于会话碎片中，那么我将从索引中删除所有其他项目到最后，我这样做是为了避免在我的会话碎片中重复.

    ```
     flask.session.modified = True
             item = (flask.request.path, view_title)
             try:
                 if not item in session_crumbs:
                     session_crumbs.append(item)
                 else:
                     index = session_crumbs.index(item)

                     session_crumbs = session_crumbs[:index+1]

             except:
                 pass

             return rv
         return decorated_function
     return decorator 
    ```

# android - chartengine 缩放按钮大小

> ID：13444672
> 
> 赞同：2
> 
> 时间：2012-11-18T21:15:55.033
> 
> 标签：android, achartengine

我可以更改 achartengine 上缩放按钮的大小吗？我知道我可以使用自己自定义的按钮实现，但我想使用 achartengine 缩放按钮。

如果不能选择更改缩放按钮的大小，有人知道全息主题缩放按钮吗？我注意到 btn_zoom 在 2.3 之后不再在 android drawables 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:54:42.477

不，您不能更改缩放按钮的大小。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-13T14:07:49.910

最后，我通过设计自定义按钮并隐藏默认按钮来做到这一点。检查此讨论 [achartengine 自定义缩放按钮](https://stackoverflow.com/questions/9142212/achartengine-custom-zoom-buttons)

# iphone - UIViewController 内的 UIPageViewController

> ID：13444673
> 
> 赞同：1
> 
> 时间：2012-11-18T21:15:58.357
> 
> 标签：iphone, ios6, uipageviewcontroller

我正在玩 UIPageViewController 并使用 UIPageViewController 作为独立控制器，我需要的一切都像魅力一样工作。我现在需要向 PageController 添加一些控制器，并且我已经实现了一个 UIViewController 并将所有内容添加到这个 ViewController。除了没有通知 UIPageViewController 进行设备旋转之外，一切都正常工作，因为它不是 firstResponder。我该如何解决？我试图在 viewWillRotateToInterfaceRotation 中手动调用 spinlocationForInterfaceOrientation 但这不像我会......有人有任何提示吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:11:34.137

你的 UIViewController 是 UIPageViewController 的代表吗？

如果没有，试试这个：

```
@interface YourViewController : UIViewController <UIPageViewControllerDelegate> 
```

并实现这一点：

```
- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation 
```

# python - Python re：在变量中存储多个匹配项

> ID：13444675
> 
> 赞同：7
> 
> 时间：2012-11-18T21:16:03.430
> 
> 标签：python, regex

我想匹配字符串的不同部分并将它们存储在单独的变量中以备后用。例如，

```
string = "bunch(oranges, bananas, apples)"
rxp = "[a-z]*\([var1]\, [var2]\, [var3]\)" 
```

所以我有

```
var1 = "oranges"
var2 = "bananas"
var3 = "apples" 
```

类似于 re.search() 所做的事情，但针对同一匹配的多个不同部分。

编辑：事先不知道列表中的水果数量。应该把这个和问题放在一起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:19:39.503

就是`re.search`这样。只需使用捕获组（括号）来访问稍后与某些子模式匹配的内容：

```
>>> import re
>>> m = re.search(r"[a-z]*\(([a-z]*), ([a-z]*), ([a-z]*)\)", string)
>>> m.group(0)
'bunch(oranges, bananas, apples)'
>>> m.group(1)
'oranges'
>>> m.group(2)
'bananas'
>>> m.group(3)
'apples' 
```

另请注意，我使用原始字符串来避免双反斜杠。

如果您内部的“变量”数量`bunch`可以变化，那么您就有问题了。大多数正则表达式引擎无法捕获可变数量的字符串。但是，在这种情况下，您可以摆脱这种情况：

```
>>> m = re.search(r"[a-z]*\(([a-z, ]*)\)", string)
>>> m.group(1)
'oranges, bananas, apples'
>>> m.group(1).split(', ')
['oranges', 'bananas', 'apples'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T21:21:40.220

For regular expressions, you can use the `match()` function to do what you want, and use groups to get your results. Also, don't assign to the word `string`, as that is a built-in function (even though it's deprecated). For your example, if you know there are always the same number of fruits each time, it looks like this:

```
import re
input = "bunch(oranges, bananas, apples)"
var1, var2, var3 = re.match('bunch\((\w+), (\w+), (\w+)\)', input).group(1, 2, 3) 
```

Here, I used the `\w` special sequence, which matches any alphanumeric character or underscore, as explained in [the documentation](http://docs.python.org/2/library/re.html)

If you don't know the number of fruits in advance, you can use two regular expression calls, one to get extract the minimal part of the string where the fruits are listed, getting rid of "bunch" and the parentheses, then `finditer` to extract the names of the fruits:

```
import re
input = "bunch(oranges, bananas, apples)"
[m.group(0) for m in re.finditer('\w+(, )?', re.match('bunch\(([^)]*)\)', input).group(1))] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-18T21:33:05.670

If you want, you can use `groupdict` to store matching items in a dictionary:

```
regex = re.compile("[a-z]*\((?P<var1>.*)\, (?P<var2>.*)\, (?P<var3>.*)")
match = regex.match("bunch(oranges, bananas, apples)")
if match:
    match.groupdict()

#{'var1': 'oranges', 'var2': 'bananas', 'var3': 'apples)'} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T21:22:31.297

Don't. Every time you use var1, var2 etc, you actually want a list. Unfortunately, this is no way to collect arbitrary number of subgroups in a list using `findall`, but you can use a hack like this:

```
import re
lst = []
re.sub(r'([a-z]+)(?=[^()]*\))', lambda m: lst.append(m.group(1)), string)
print lst # ['oranges', 'bananas', 'apples'] 
```

Note that this works not only for this specific example, but also for any number of substrings.

# ruby - Ruby 中的 method_missing 调用有多少个输出参数

> ID：13444676
> 
> 赞同：0
> 
> 时间：2012-11-18T21:16:08.787
> 
> 标签：ruby

我想知道在 Ruby 中调用了多少**返回**参数 method_missing 。我想根据它应该产生多少返回参数来改变函数的行为。我正在寻找与`nargout`Matlab 等效的东西。本例中的 XXX：

```
class Test
  def method_missing(method_id, *args)
    n_return_arguments = XXX
    if n_return_arguments == 1
      return 5
    else
      return 10, 20
    end
  end
end

t = Test.new.missing_method # t should now be 5

t1, t2 = Test.new.missing_method # t1 should now be 10 and t2 should now be 20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:31:29.733

因为如果有多个参数，`args`变量将是一个。`Array`我们可以直接查看退货。如果是数组，它会响应大小，如果不是，它可能不会。我们可以使用类或检查它来获取我们需要的信息。

```
class Test
  def method_missing(method_id, *args)
    n_return_arguments = XXX
    if n_return_arguments == 1
      return 5
    else
      return 10, 20
    end
  end
end

XXX = "anything but 1"
t = Test.new.this_nonexistent_method # => 5
puts "t = #{t.inspect}"

XXX = 1
t1, t2 = Test.new.this_nonexistent_method.size # => 2
puts "t1 = #{t1.inspect}, t2 = #{t2.inspect}" 
```

使用 XXX 值来更改方法的行为。

返回值总是一个值，有时是一个包含 1 个以上元素的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T01:48:43.110

Ruby 中没有多重返回值。方法总是只返回一个值。再也不会了。永远不会少。

# php - 目录迭代器和递归目录迭代器

> ID：13444677
> 
> 赞同：0
> 
> 时间：2012-11-18T21:16:19.213
> 
> 标签：php, recursion, iterator

我必须列出目录中的所有文件和文件夹：

```
 $images = array();
            $dirs   = array();

            $dir = new DirectoryIterator($upload_dir_real);

             foreach ($dir as $file) {
               if ($file->isDot()) {
                    continue;
                }

                if ($file->isDir()) {
                    // dir
                    $scanned_dirs[] = $file->getPath();
                      continue;
                } else {
                    // file

                    //echo $file->getFilename() . "<br>\n";//DEBUG
                    $realfile =  $file->getFilename() . "<br>\n";
                    $realpath = $file->getPathname();
                    echo realpath($realfile);//DEBUG
                    $file->getFilename();
                    $images[] = realpath( $realpath );
                }

             } 
```

这工作正常（没有错误），但当然只计算了根，所以我尝试了递归：

```
 $images = array();
            $dirs   = array();
$dir = new RecursiveDirectoryIterator($upload_dir_real);

             foreach ($dir as $file) {
               if ($file->isDot()) {
                    continue;
                }

                if ($file->isDir()) {
                    // dir
                    $scanned_dirs[] = $file->getsubPath();
                      continue;
                } else {
                    // file

                    //echo $file->getFilename() . "<br>\n"; //DEBUG
                    $realfile =  $file->getsubFilename() . "<br>\n";
                    $realpath = $file->getsubPathname();
                    echo realpath($realfile);//DEBUG
                    $file->getFilename();
                    $images[] = realpath( $realpath );
                }

             } 
```

基本上，我改变了`getPath();`with `getsubPath()`（和等价的）。问题是它给了我一个错误：

> `Fatal error: Call to undefined method SplFileInfo::isDot() in blah blah path`

所以我搜索了一段时间，发现了这个：

[为什么 isDot() 对我失败？(PHP)](https://stackoverflow.com/questions/6337810/why-does-isdot-fail-on-me-php)

这基本上是同样的问题，但是当我尝试时，我得到了这个错误：

> `Fatal error: Class 'FilesystemIterator' not found in in blah blah path`

问题：

1 - 为什么其他接受的答案中描述的方法对我不起作用？2 - 在同一个答案中，以下代码是什么：

```
new RecursiveIteratorIterator(
  new RecursiveDirectoryIterator(
    $pathToFolder,
    FilesystemIterator::KEY_AS_PATHNAME | FilesystemIterator::CURRENT_AS_SELF)); 
```

这实际上调用`RecursiveIteratorIterator`了两次？我的意思是，如果它是递归的，它就不能递归两次:-)

2b -`FilesystemIterator`即使PHP手册声明（据我所知）它是构建递归迭代器的一部分，为什么找不到？

（这些问题是因为我想更好地理解，而不仅仅是复制和粘贴答案）。

3 - 有没有更好的方法来列出跨平台的所有文件夹和文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T21:33:04.017

*   1 - 为什么其他接受的答案中描述的方法对我不起作用？？`

据我所知。代码运行良好，但你的实现是错误的，你正在使用以下

代码

```
 $dir = new RecursiveDirectoryIterator($upload_dir_real); 
```

代替

```
 $dir = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($upload_dir_real)); 
```

*   在同一个答案中实际上调用了 RecursiveIteratorIterator 两次？我的意思是，如果它是递归的，它就不能递归两次...... :-))

不，它没有不同

```
RecursiveIteratorIterator != RecursiveDirectoryIterator != FilesystemIterator
            ^                             ^ 
```

*   为什么找不到 FilesystemIterator ，即使 php 手册声明（据我所知）它是递归迭代器所基于的一部分？

您已经在评论中回答您自己正在使用`5.2.9`不再支持或推荐的 PHP 版本

*   3 - 有没有更好的方法来列出所有跨平台的文件夹和文件？

既然这已经解决了，你所需要的就是`FilesystemIterator::SKIP_DOTS`你不必打电话`$file->isDot()`

例子

```
$fullPath = __DIR__;
$dirs = $files = array();

$directory = new RecursiveDirectoryIterator($fullPath, FilesystemIterator::SKIP_DOTS);
foreach (new RecursiveIteratorIterator($directory, RecursiveIteratorIterator::SELF_FIRST) as $path ) {
    $path->isDir() ? $dirs[] = $path->__toString() : $files[] = realpath($path->__toString());
}

var_dump($files, $dirs); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-28T23:30:40.970

这是另一种方法，利用`setFlags`：

```
<?php

$o_dir = new RecursiveDirectoryIterator('.');
$o_dir->setFlags(RecursiveDirectoryIterator::SKIP_DOTS);
$o_iter = new RecursiveIteratorIterator($o_dir);

foreach ($o_iter as $o_info) {
   echo $o_info->getPathname(), "\n";
} 
```

[https://php.net/filesystemiterator.setflags](https://php.net/filesystemiterator.setflags)

# django - Django——表单验证

> ID：13444680
> 
> 赞同：0
> 
> 时间：2012-11-18T21:16:34.870
> 
> 标签：django, django-forms

我有一个可以访问 Api 并返回 json 数据的模型

```
class Video(models.Model):
   url = models.URLField(_('URL'), blank=True)
   type = models.CharField(max_length=10, null=True, blank=True)

   def get_oembed_info(self, url):
      api_url = 'http://api.embed.ly/1/oembed?'
      params = {'url': url, 'format': 'json'}
      fetch_url =  'http://api.embed.ly/1/oembed?%s' % urllib.urlencode(params)
      result = urllib.urlopen(fetch_url).read()
      result = json.loads(result)
      return result

  def get_video_info(self):
     url = self.url
     result = self.get_oembed_info(url)
     KEYS = ('type', 'title', 'description', 'author_name')
     for key in KEYS:
       if result.has_key(key):
          setattr(self, key, result[key])

  def save(self, *args, **kwargs):
     if not self.pk:
        self.get_video_info()

     super(Video, self).save(*args, **kwargs)

class VideoForm(forms.ModelForm):
  def clean(self):
    if not self.cleaned_data['url'] and not self.cleaned_data['slide_url']:
      raise forms.ValidationError('Please provide either a video url or a slide url')
    return self.cleaned_data 
```

我想在提交表单时访问类型字段，因此如果类型不是“某物”，则会引发错误，如上述 clean 方法。或者如何在 VideoForm 类中访问 get_oembed_info 方法结果。

# 解决方案

正如 Thomas 所说，调用模型的 clean 方法然后施展魔法

```
def clean(self):
   self.get_video_info()
   if self.type == 'something':
      raise ValidationError("Message") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:39:19.120

A`ModelForm`将在其验证过程中[调用您的模型的`clean`方法。](https://github.com/django/django/blob/master/django/forms/models.py#L331)该方法*可以*raise`ValidationError`将添加到表单的错误中。

`clean`因此，您可以在模型的方法中实现您的验证逻辑，该`get_oembed_info`方法可以使用`self.get_oembed_info()`.

# sql - 如何在 SQL Server 2000 上使用正确的订单号更正添加到表中的记录？

> ID：13444682
> 
> 赞同：0
> 
> 时间：2012-11-18T21:16:38.713
> 
> 标签：sql, sql-server-2000

如何在 SQL Server 2000 上使用正确的订单号更正添加到表中的记录？

我有以下有序表：

```
OrderNo Data
      0    A
      1    B
      2    C 
```

我需要将以下记录添加到表中（保存订单）：

```
OrderNo Data
      2    E
      3    F
      1    D 
```

并在表上得到以下结果：

```
OrderNo Data
      0    A
      1    B
      2    C
      3    D
      4    E
      5    F 
```

如何在 SQL Server 2000 上执行此操作？

PS OrderNo 不能是身份或唯一的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:24:00.647

`ROW_NUMBER`在 SQL Server 2000 中进行模拟

```
select (select count(*) 
        from Table1 as e2
        where e2.OrderNo <= e1.OrderNo) as OrderNo, e1.Data
from Table1 as e1
ORDER BY OrderNo 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/30544/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:23:34.407

假设您的表名是订单...

```
SELECT count(order_count.OrderNo), orders.Data
FROM orders
  LEFT OUTER JOIN orders order_count
    ON order_count.Data < orders.Data
GROUP BY orders.Data 
```

# ios - Facebook 发送请求应用委托

> ID：13444683
> 
> 赞同：0
> 
> 时间：2012-11-18T21:16:46.347
> 
> 标签：ios, xcode, facebook

我有一个带有 .h、一个 .m 文件和两个 appDelegate 文件的示例代码。我想将项目的功能添加到我的应用程序中。前两个文件是一个ViewController文件，所以我只要把它拖进去，但是另外两个是AppDelegate，我显然不能有两个app delegate。但是在这个示例应用程序的情况下，应用程序委托被用作适当的视图控制器，因为在 UIViewController 文件的 .m 文件中，有以下代码：

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate]; 
```

由于 AppDelegate 不使用 willBecomeActive... 之类的功能，我如何在 UIViewController 文件中转换文件？我需要在上面的代码中更改什么来调用控制器而不是委托（我的 AppDelegate 将保持不变）。

代码在这里：[https](https://github.com/fbsamples/ios-3.1-howtos/tree/master/SendRequestsHowTo) ://github.com/fbsamples/ios-3.1-howtos/tree/master/SendRequestsHowTo ...然后打开项目：SendRequestsHowTo ...它只有4个文件

PS我想我必须创建一个类似于应用程序委托的东西，但它不是一个应用程序委托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:54:59.960

据我所知，您想将代码从 SendRequestsHowTo 移动到您的项目中。而且您不想通过您的 AppDelegate 使用 Facebook？您可以创建新类（例如 FacebookManager）。然后将代码从 SendRequestsHowTo 的 AppDelegate 移动到 FacebookManager，就可以使其成为单例。然后你可以从 ViewController 访问：

```
FacebookManager *manager = [FacebookManager sharedManager];
[manager openSessionWithAllowLoginUI:NO] 
```

并从 AppDelegate 到 handleOpenURL：

```
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    self.openedURL = url;
    // attempt to extract a token from the url
    return [[FacebookManager sharedManager] handleOpenURL:url];
} 
```

不要忘记将 CFBundleURLTypes 添加到 Info.plist，它应该如下所示：

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>fb1234567890</string>
        </array>
    </dict>
</array> 
```

[使用单点登录对用户进行身份验证时，Facebook iOS Safari“无法打开页面错误”](https://stackoverflow.com/questions/5131178/facebook-ios-safari-cannot-open-page-error-when-authenticating-user-with-singl)

# javascript - jquery消除麻烦

> ID：13444685
> 
> 赞同：1
> 
> 时间：2012-11-18T21:16:52.790
> 
> 标签：javascript, jquery, greasemonkey, wikipedia

我正在为 Wikipedia 制作 GreaseMonkey 脚本。这是我正在使用的代码：

```
// ==UserScript==
// @name        wikipedia
// @namespace   wikipedia
// @include     http://es.wikipedia.org/wiki/*
// @version     1
// @grant GM_addStyle
// @require     http://code.jquery.com/jquery.min.js
// ==/UserScript==

$(document).ready(function(){
    $("#mw-panel").remove();
    $("#localNotice").remove();
    $("#mw-head").remove();
    $("#mw-head-base").remove();
    $("#mw-page-base").remove();
    $("#footer").remove();
    $("span[class=\"editsection\"]").remove();
    $("#mw-articlefeedback").remove();
    $("#content").css("margin-top", "0px");
    $("#content").css("margin-left", "0px");
    $("#content").css("padding", "0px");
    $("body").css("font-family", "Droid Sans");
}); 
```

这工作正常，但这一行没有预期的效果，即删除文章反馈对话框。

```
 $("#mw-articlefeedback").remove(); 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:21:12.510

它会在页面加载后稍后动态添加。

替换`$(document).ready`为`$(window).load`

如果这不起作用，那么只需在`setTimeout`几秒钟内将您的代码添加到其中。

# java - 部署到 AppFog 时未检测到环境变量

> ID：13444688
> 
> 赞同：0
> 
> 时间：2012-11-18T21:17:05.497
> 
> 标签：java, spring, appfog

似乎在将我的 Spring 应用程序部署到 AppFog 时，没有检测到环境变量。

我在控制台中声明了环境变量：

![环境变量](../Images/897063768561c331a04d7ddb2360b419.png)

我尝试从我的应用程序代码中引用这些，如下所示：

```
<context:property-placeholder 
    location="classpath:server.common.properties,
    classpath:server.${concorde-env}.properties"/> 
```

但是，这会产生错误：

> 引起：java.io.FileNotFoundException：类路径资源[server.${concorde-env}.properties]无法打开，因为它不存在

这种方法在其他（非 AppFog）环境中运行良好。

我通过调用注销了属性：

```
 log.info("Properties: " + System.getProperties().toString()); 
```

而且它没有显示这些属性是可用的。

但是，如果我执行 a `af env <<MY_APP_NAME>>`，它会显示存在的变量：

```
+--------------------------+------------------+
| Variable                 | Value            |
+--------------------------+------------------+
| concorde-env             | test             |
| spring.profiles.active   | runtime,test     |
+--------------------------+------------------+ 
```

在运行时让这些变量暴露给我的应用程序我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:21:55.933

尝试像这样访问值：`System.getenv("concorde-env")`查看环境变量是否甚至可以在代码中访问。

根据错误消息`"class path resource [server.${concorde-env}.properties] cannot be opened because it does not exist"`，似乎`${concorde-env}`甚至没有被评估或替换为空字符串。

看起来 Spring 有其他访问环境变量的方法。尝试`#{systemEnvironment['concorde-env']}`代替`${concorde-env}`

# c - 通过函数指针传递附加参数是否合法/在 C 中定义？

> ID：13444690
> 
> 赞同：7
> 
> 时间：2012-11-18T21:17:12.430
> 
> 标签：c, parameters, function-pointers

> **可能重复：**
> [将函数指针转换为另一种类型](https://stackoverflow.com/questions/559581/casting-a-function-pointer-to-another-type)

假设我用一个实际上需要比函数指针定义更少的参数的函数初始化一个函数指针，如果通过函数指针调用该函数是否仍能正确执行？

我用 gcc 进行了尝试，它按预期工作，但我想知道这种行为在编译器/平台之间是否一致（我怀疑在某些环境中它可能会对堆栈造成严重破坏）：

```
#include <stdio.h>

typedef void (*myfun)(int, int, int);

void test_a(int x, int y, int z) {
    printf("test_a %d %d %d\n", x, y, z);
}

void test_b(int x, int y) {
    printf("test_b %d %d\n", x, y);
}

int main() {
    myfun fp;
    fp = test_a;
    fp(1, 2, 3);
    fp = (myfun) test_b;
    fp(4, 5, 6);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-18T21:27:10.807

这是未定义的行为。使用风险自负。传闻会引起[鼻魔！](http://en.wikipedia.org/wiki/Undefined_behavior)

![在此处输入图像描述](../Images/2d785569f9d90862fa8bc81b2a27eddb.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-18T21:25:19.097

您的程序的行为是未定义的。它完全编译的事实是因为强制转换，它有效地告诉编译器“这是错误的，但无论如何都要这样做”。如果您删除演员表，您将收到相应的错误消息：

```
a.c:17:8: error: assignment from incompatible pointer type [-Werror] 
```

（从`gcc -Wall -Werror`。）

更具体地说，行为取决于调用约定。如果您在一个平台上，参数在堆栈上以“反向”顺序传递，程序将给出非常不同的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T21:29:14.393

函数调用是未定义的行为。

> （C99，6.3.2.3p8）“[...] 如果转换后的指针用于调用类型与指向的类型不兼容的函数，则行为未定义。”

有关信息，请注意*函数类型*：

> （C99，6.2.5p20）“[...] 描述了具有指定返回类型的函数。函数类型的特征在于其返回类型以及其参数的数量和类型。”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-18T21:28:59.587

它是否有效取决于所使用的[调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions)。

我不会推荐它。

# android - 餐桌高度没有改变？

> ID：13444692
> 
> 赞同：2
> 
> 时间：2012-11-18T21:17:19.237
> 
> 标签：android, android-4.0-ice-cream-sandwich, tablerow, android-tablelayout, layoutparams

例如，我以编程方式创建 4 个表格行，并且我希望每个表格行的高度为屏幕大小的 1/4。每个 tablerow 高度是屏幕大小的一半。我尝试了不同的方法，但 tablerow 高度没有改变。我管理更改表格宽度，但高度没有。这是我的代码：

```
@SuppressLint("NewApi")
public class GameActivity extends Activity {

    private Context context;

    public void drawTable(){
        int i;
        TableLayout table = new TableLayout(context);

        table.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.MATCH_PARENT));
        //table.setStretchAllColumns(true);
        //table.setShrinkAllColumns(true);
        //table.setWeightSum(1.0F);
        TableRow[] rows = new TableRow[5];
        for(i = 0; i < 4; ++i){
            rows[i] = new TableRow(context);
            rows[i].setBackgroundResource(R.drawable.images214);
            rows[i].setWeightSum((float)1.0);
            rows[i].setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, 10));
            //rows[i].setScaleY(0.25F);
            table.addView(rows[i]);
        }

        LinearLayout l = (LinearLayout) findViewById(R.id.linear);
        l.addView(table);
    }
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_game);

        context = this;
//        TableLayout table = new TableLayout(this);
//        TableRow row1 = new TableRow(this);
//        TableRow row2 = new TableRow(this);
//        row1.addView(new EditText(this));
//        row2.addView(new Button(this));
//        table.addView(row1);
//        table.addView(row2);
//        //table.setBackground(getResources().getDrawable(R.drawable.ic_launcher));
//        table.setBackgroundResource(R.drawable.ic_launcher);
//        LinearLayout l = (LinearLayout) findViewById(R.id.linear);
//        l.addView(table);
        drawTable();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_game, menu);
        return true;
    }
} 
```

XML:

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

  <ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scrollbars="none"
    android:layout_weight="1">
        <LinearLayout 
         android:id="@+id/linear" 
         android:layout_width="match_parent"
         android:layout_height="match_parent"  
         android:scrollbars="vertical|horizontal">
        </LinearLayout>
 </ScrollView>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T18:30:50.250

您没有使用正确的`LayoutParams`, 对于您应该设置的*表* （当您将表添加到 a 时）和对于您的 the should be （因为它们是 的子级）。即使进行了上述更改，事情也不会起作用，因为它是一个对其子级施加约束的小部件，最值得注意的是高度将自动设置为for 。改变它的唯一方法是像这样使用：`TableLayout``LinearLayout.LayoutParams``LinearLayout``TableRows``LayoutParams``TableLayout.LayoutParams``TableLayout``TableLayout``WRAP_CONTENT``TableRows``weight`

```
TableLayout table = new TableLayout(context);
table.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT));
table.setWeightSum(1.0f);
TableRow[] rows = new TableRow[4];
for(int i = 0; i < 4; ++i){
    rows[i] = new TableRow(context);
    rows[i].setBackgroundResource(R.drawable.images214);
    rows[i].setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT, 0, 0.25f));        
    table.addView(rows[i]);
}

LinearLayout l = (LinearLayout) findViewById(R.id.linear);
l.addView(table); 
```

但这不起作用，因为您`TableLayout`设置为填充父级，父级是一个`ScrollView`不会对其子级施加尺寸的父级。我不知道您要在`ScrollView`那里做什么（尤其是当您希望表格填满整个屏幕时）所以我不知道该推荐您什么。另外，我不知道您的完整布局，但您嵌套到许多布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T22:01:05.083

对于每个表格行设置高度：

```
DisplayMetrics metrics = context.getResources().getDisplayMetrics();
int height = metrics.heightPixels / 4; // quarter of screen height
rows[i].setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, height)); 
```

# lisp - 如何在 XLISP 中询问用户输入？

> ID：13444693
> 
> 赞同：0
> 
> 时间：2012-11-18T21:17:22.230
> 
> 标签：lisp

我正在用 XLISP 编写一个程序，它需要我询问用户输入。我使用过 C 语言，而且它相当简单，因为我是 LISP 的新手，尤其是 XLISP，这使得为它寻找合适的东西有点困难。我想在 XLISP 中写的东西是这样的：

```
scanf("Enter your position: %d %d\n",pos1,pos2); 
```

我如何在 XLISP 中写这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T22:04:29.773

最基本的是`enter-position`带有程序块（指令列表）的函数，例如[progn](http://www.lispworks.com/documentation/HyperSpec/Body/s_progn.htm)：

```
(defun enter-position ()
(progn
    (format t "Enter your position:")
    (let pos1 (read))
    (let pos2 (read)))) 
```

（输入可能需要通过辅助函数进行清理，但这是故事的另一部分）两个变量 pos1 和 pos2 将具有“词法范围”，因此它们在`enter-position`.

# r - 从R中一行的内容创建变量

> ID：13444694
> 
> 赞同：1
> 
> 时间：2012-11-18T21:17:29.013
> 
> 标签：r

我有一个医院就诊数据，其中包含性别、年龄、主要诊断和医院标识符的记录。我打算为这些条目创建单独的变量。数据有一些模式：大多数观察以性别代码（M 或 F）开头，然后是年龄，然后是诊断，主要是医院标识符。但也有一些例外。在某些情况下，性别 ID 编码为 01 或 02，在这种情况下，性别标识符出现在末尾。我查看了档案，发现了一些 grep 的例子，但我没有成功地将它有效地应用到我的数据中。例如代码

```
ndiag<-dat[grep("copd", dat[,1], fixed = TRUE),] 
```

可以单独提取每个诊断，但不能一次全部提取。我怎样才能完成这项任务？

包含当前情况（第 1 列）和我打算拥有的示例数据如下所示：

```
diagnosis hospital  diag    age   gender
m3034CVDA   A   cvd 30-34   M
m3034cardvA A   cardv   30-34   M
f3034aceB   B   ace 30-34   F
m3034hfC    C   hf  30-34   M
m3034cereC  C   cere    30-34   M
m3034resPC  C   resp    30-34   M
3034copd_Z_01   Z   copd    30-34   M
3034copd_Z_01   Z   copd    30-34   M
fcereZ          Z   cere    NA      F
f3034respC  C   resp    30-34   F
3034copd_Z_02   Z   copd    30-34   F 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:41:19.623

这个问题似乎有两个关键部分。

1.  处理字符串以两种不同方式编码的事实
2.  将字符串拼接到适当的数据列中

注意：至于一次对多个值应用函数，许多函数已经可以处理向量。例如`str_locate`和`substr`。

### 第 1 部分 - 为 m/f // 01/02 编码清理字符串

```
# We will be using this library later for str_detect, str_replace, etc
library(stringr)

# first, make sure diagnosis is character (strings) and not factor (category)
diagnosis <- as.character(diagnosis)

# We will use a temporary vector, to preserve the original, but this is not a necessary step.
diagnosisTmp <- diagnosis

males <- str_locate(diagnosisTmp, "_01")
females <- str_locate(diagnosisTmp, "_02")

# NOTE: All of this will work fine as long as '_01'/'_02' appears *__only__* as gender code.
#  Therefore, we put in the next two lines to check for errors, make sure we didn't accidentally grab a "_01" from the middle of the string
#-------------------------
  if (any(str_length(diagnosisTmp) != males[,2], na.rm=T))  stop ("Error in coding for males")
  if (any(str_length(diagnosisTmp) != females[,2], na.rm=T))   stop ("Error in coding for females")
#------------------------

# remove all the '_01'/'_02'  (replacing with "")
diagnosisTmp <- str_replace(diagnosisTmp, "_01", "")
diagnosisTmp <- str_replace(diagnosisTmp, "_02", "")

# append to front of string appropriate m/f code 
diagnosisTmp[!is.na(males[,1])] <- paste0("m", diagnosisTmp[!is.na(males[,1])])
diagnosisTmp[!is.na(females[,1])] <- paste0("m", diagnosisTmp[!is.na(females[,1])])

# remove superfluous underscores
diagnosisTmp <- str_replace(diagnosisTmp, "_", "")

# display the original next to modified, for visual spot check
cbind(diagnosis, diagnosisTmp) 
```

### 第 2 部分 - 拼接字符串

```
# gender is the first char, hospital is the last. 
gender <- toupper(str_sub(diagnosisTmp, 1,1))    
hosp  <- str_sub(diagnosisTmp, -1,-1) 

# age, if present is char 2-5\. A warning will be shown if values are missing. Age needs to be cleaned up
age   <- as.numeric(str_sub(diagnosisTmp, 2,5))    # as.numeric will convert none-numbers to NA
age[!is.na(age)]  <- paste(substr(age[!is.na(age)], 1, 2), substr(age[!is.na(age)], 3, 4), sep="-")

# diagnosis is variable length, so we have to find where to start
diagStart <- 2 + 4*(!is.na(age))
diag  <- str_sub(diagnosisTmp, diagStart, -2)

# Put it all together into a data frame
dat <- data.frame(diagnosis, hosp, diag, age, gender)
    ## OR WITHOUT ORIGINAL DIAGNOSIS STRING ##
dat <- data.frame(hosp, diag, age, gender) 
```

# node.js - 在每个请求 node.js 上执行一个脚本

> ID：13444695
> 
> 赞同：1
> 
> 时间：2012-11-18T21:17:31.243
> 
> 标签：node.js, request, express

我确定每次使用 res 和 req var 执行请求（app.get 或 app.post）时，我都可以执行脚本或函数，但我找不到如何

你能帮我么

谢谢

编辑：

我试试

```
var express = require('express')
, http = require('http')
, path = require('path');

var app = express();

app.use(function(err, req, res, next){
  console.log('aa');
  next();
}); 
```

在我的 app.js 中，但我的控制台中从来没有 aa

我的 app.get 在控制器中：

```
files = fs.readdirSync(__dirname + '/controllers');
files.forEach(function(file){
    var name = file.replace('.js', '');
    require('./controllers/' + name)(app, models);
}); 
```

如果我删除此代码 app.add 有效，但我不能使用 app.get

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:32:49.387

您需要使用通用中间件：

```
app.use(function (req, res, next) {
  //do stuff
  next();
}); 
```

# api - Google 地图和 Yelp API 混搭不适用于某些搜索词

> ID：13444697
> 
> 赞同：2
> 
> 时间：2012-11-18T21:17:37.893
> 
> 标签：api, google-maps-api-3, google-maps-markers

我目前正在开发一个融合 Yelp 和 Google Maps API 的网络应用程序。我完成了代码，它似乎正在工作，直到我发现谷歌地图不会显示某些搜索词。例如，当我在丹佛搜索披萨时，我的应用程序运行良好，但当我在纽约搜索寿司时，谷歌地图却无法加载。搜索后我检查了我的源代码，结果都在那里。我似乎无法弄清楚是什么问题。该应用程序[在线](http://www.frankkluytmans.nl/zoek.php) 。

谷歌地图代码片段：

```
<script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script>
      //Er word een kaart neergezet
      function initialize(lat,lon,label) {
        var lancenter =
          "<?
          echo $latitude_center
          ?>";
        var loncenter = 
          "<?
          echo $longitude_center
          ?>";
          var map;
        var mapOptions = {
          zoom: 12,
          center: new google.maps.LatLng(lancenter, loncenter),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
              var map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);

    var companyLogo = new google.maps.MarkerImage('image.png',
    new google.maps.Size(35,60),
    new google.maps.Point(0,0),
    new google.maps.Point(18,60)
    );
    var companyShadow = new google.maps.MarkerImage('shadow.png',
    new google.maps.Size(69,60),
    new google.maps.Point(0,0),
    new google.maps.Point(18,60)
    );

<?    
//Er word een loop gemaakt die de array met resultaten doorloopt en vervolgens markers, infowindows en beschrijving op de kaart plaatst voor alle resultaten.
     while($i<sizeof($response["businesses"])) {
        $latitude_result = $response["businesses"][$i]["location"]["coordinate"]["latitude"];
        $longitude_result = $response["businesses"][$i]["location"]["coordinate"]["longitude"];  
        $result_description = $response["businesses"][$i]["name"];
        $result_rating = $response["businesses"][$i]["rating_img_url_small"];
        $result_ratingnr = $response["businesses"][$i]["review_count"];
        $result_beschrijving = $response["businesses"][$i]["snippet_text"];
        $result_beschrijving=str_replace("\n"," ",$result_beschrijving);
        $result_beschrijving=str_replace("\r"," ",$result_beschrijving);
        $result_adres0 = $response["businesses"][$i]["location"]["display_address"][$i];
        $result_adres1 = $response["businesses"][$i]["location"]["display_address"]["1"];
        $result_adres2 = $response["businesses"][$i]["location"]["display_address"]["2"];
        $result_adres3 = $response["businesses"][$i]["location"]["display_address"]["3"];
        $result_image = $response["businesses"][$i]["image_url"];
        $result_url = $response["businesses"][$i]["url"];
        $result_image = $result_image ? $result_image : 'noimg.gif';
        $result_beschrijving = $result_beschrijving ? $result_beschrijving : 'Er is helaas geen beschrijving beschikbaar voor deze locatie.';
        ?>   

     var lanresult =
          "<?
          echo $latitude_result
          ?>";
     var lonresult = 
          "<?
          echo $longitude_result
          ?>";
    var resultloc = new google.maps.LatLng(lanresult, lonresult);
     var beschrijving = 
          '<h3>'+"<?
          echo "<div id='container'>",Naam,":","&nbsp;","<h2>", $result_description,"</h2>","</br>",Beschrijving,":","&nbsp;","<h2>", $result_beschrijving,"<a href='", $result_url,"' target='_new'>","Lees verder","</a>","</h2>","</br>", Adres,":","&nbsp;","<h2>", $result_adres0,"</br>", $result_adres1,"</h2>","</br>", Waardering,":","&nbsp;","<img src='", $result_rating,"'/>","<h2>",$result_ratingnr,"&nbsp;",recensies,"</h2>","</br>","<img src='", $result_image,"'/>","</br>","</br>","<h2>","<a href='", $result_url,"' target='_new'>","Lees meer informatie via YELP","</a>","</h2>","</div>"
          ?>";'</h3>'

                  var marker<? echo $i; ?> = new google.maps.Marker({
        map: map,
        icon: companyLogo,
        shadow: companyShadow,
        position: resultloc,
        });
        var infowindow<? echo $i; ?>= new google.maps.InfoWindow({
        content: beschrijving,
        maxWidth: 260
        });
        google.maps.event.addListener(marker<? echo $i; ?>, 'click', function() {
          infowindow<? echo $i; ?>.open(map,marker<? echo $i; ?>);
        });

    <?
        $i++;
     } // einde while php
     ?>
     }  
      google.maps.event.addDomListener(window, 'load', initialize);
    </script> 
```

我真的希望有人能帮助我。

亲切的问候

# java - 递归查找目录中的所有文本文件

> ID：13444701
> 
> 赞同：2
> 
> 时间：2012-11-18T21:18:09.550
> 
> 标签：java, recursion, java-io

我正在尝试获取目录中所有文本文件的名称。如果目录有子目录，那么我也想获取其中的任何文本文件。我不确定如何使任何数量的子目录继续该过程。

现在下面的代码只是获取当前目录和目录中的子目录中的所有文本文件。对于找到的每个子目录，它还会找到任何文本文件和更深的子目录。问题是，如果那些更深的子目录还有更深的子目录，那么我找不到所有的文本文件。这似乎是一个需要递归的问题，因为我不知道这会走多远。

到目前为止，这是我的代码：

```
File rootDirectory = new File(rootDir);
if (rootDirectory.isDirectory()) {
    System.out.println("Valid directory");

    File[] listOfFiles = rootDirectory.listFiles(); 
    for (int i = 0; i < listOfFiles.length; i++) {
        String iName = listOfFiles[i].getName();
        if (listOfFiles[i].isFile()) {
            if (iName.endsWith(".txt") || iName.endsWith(".TXT")) {
                System.out.println("File: "+iName);
            }
        }
        if (listOfFiles[i].isDirectory()) {
            System.out.println("Directory: "+iName);

            File[] subList = listOfFiles[i].listFiles();
            for (int j = 0; j < subList.length; j++) {
                String jName = subList[j].getName();
                if (subList[j].isFile()) {
                    if (jName.endsWith(".txt") || jName.endsWith(".TXT")) {
                        System.out.println("\tFile: "+jName);
                    }
                }
                if (subList[j].isDirectory()) {
                    System.out.println("\tDirectory: "+jName);
                }
            }
        }
    }
}
else System.out.println("Invalid directory"); 
```

**编辑**：得到它的工作，谢谢Olaf Dietsche：

```
public void findFiles(File root, int depth) {
    File[] listOfFiles = root.listFiles();
    for (int i = 0; i < listOfFiles.length; i++) {
        String iName = listOfFiles[i].getName();
        if (listOfFiles[i].isFile()) {
            if (iName.endsWith(".txt") || iName.endsWith(".TXT")) {
                for (int j = 0; j < depth; j++) System.out.print("\t");
                System.out.println("File: "+iName);
            }
        }
        else if (listOfFiles[i].isDirectory()) {
            for (int j = 0; j < depth; j++) System.out.print("\t");
            System.out.println("Directory: "+iName);
            findFiles(listOfFiles[i], depth+1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T21:24:22.680

这是一个[递归问题](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)

```
public void find_files(File root)
{
    File[] files = root.listFiles(); 
    for (File file : files) {
        if (file.isFile()) {
            ...
        } else if (file.isDirectory()) {
            find_files(file);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T18:27:00.380

使用java 7的java.nio.file功能。我实现了类似的功能。并添加了一些测试。

在我的 PC 上搜索 .txt 时的基准

```
 "c:/"  "c:/windows"
file.io   36272ms       14082ms
file.nio   7167ms        2987ms 
```

在 javadoc 中阅读更多内容，它是非常强大的 API

[java.nio.file.filevisitor javadoc](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileVisitor.html#visitFileFailed%28T,%20java.io.IOException%29)

```
public static void main(String[] args) {
    long starttime = System.currentTimeMillis();
    try {
        Path startPath = Paths.get("c:/");
        Files.walkFileTree(startPath, new SimpleFileVisitor<Path>() {
            @Override
            public FileVisitResult preVisitDirectory(Path dir,
                    BasicFileAttributes attrs) {
                System.out.println("Dir: " + dir.toString());
                return FileVisitResult.CONTINUE;
            }

            @Override
            public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) {
                if (file.toString().endsWith(".txt")){
                    System.out.println(file.toString());    
                }
                return FileVisitResult.CONTINUE;
            }

            @Override
            public FileVisitResult visitFileFailed(Path file, IOException e) {
                return FileVisitResult.CONTINUE;
            }
        });
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    long completetime = System.currentTimeMillis() - starttime;
    System.out.println("totaltime=" + completetime);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T21:22:58.247

答案在您问题的标签中。使用递归。递归在于有一个方法调用本身。

在这种情况下，该方法应直接打印给定目录下的所有文本文件，并为该目录的每个子目录调用自身。

# winforms - 更新 WinForms 中的 BindingSource

> ID：13444706
> 
> 赞同：0
> 
> 时间：2012-11-18T21:18:55.107
> 
> 标签：winforms, data-binding, datasource, bindingsource

在我尝试在 Winforms 中使用 DataBinding 的过程中，我遇到了一个问题。看起来更新 DataSource DataGridView 后不会刷新数据。不明白哪里出了问题。

```
var companies = new List<Company> { new Company { Name = "Test", Id = 100 }} 
```

这是将项目列表绑定到 DataGridView 的代码：

```
bindingSource1.DataSource = _context.Companies;
dataGridView1.DataSource = bindingSource1.DataSource; 
```

但在那之后，如果我`companies`像这样更新列表

```
 companies.Add(new Company { Name = "MDG", Id = 500 }); 
```

我在 DataGridView 中找不到新添加的项目。有人可以帮助我了解我所缺少的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:51:55.803

这里的问题是无法让 BindingSource 和 DataGridView 自动知道对 List 的更改。

相反，使用新的 BindingList()。这具有将被调用以通知 BindingSource 的事件，进而通知 DataGridView 已将新项目添加到列表中。

```
var companies = new BindingList<Company>();
companies.Add(new Company { Name = "Test", Id = 100 }); 
```

# java - Java MVVM 和 WPF 替代方案

> ID：13444712
> 
> 赞同：5
> 
> 时间：2012-11-18T21:20:07.037
> 
> 标签：java, mvvm, dependency-injection

这些技术是否有 Java 替代品？我发现最常用的数据绑定功能和 INotifyPropertyChanged（以及容器和元素之类的），但 .NET 跨平台的缺乏让我想到了 Java。你有什么建议？有没有同类产品？一种实现 XAML 的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T21:32:43.813

**技术（WPF）**

如果您正在为 Java 平台寻找 WPF 的替代品，您应该看看[JavaFX](http://docs.oracle.com/javafx/index.html)。

该技术在以下方面与 WPF 非常相似：

*   应用程序用户界面由对象树组成，称为由对象组成的场景图`Node`（类似于由`UIElement`对象组成的 WPF 可视化树）。
*   该`Pane`节点及其派生项在概念上类似于 WPF 布局面板。
*   可以使用类似于 XAML 的称为 FXML 的标记来创建用户界面。
*   JavaFX 提供了表示支持绑定和更改通知的属性的对象（想想依赖属性）。与依赖属性不同，它们不依赖于用户界面技术，因此可以由您的模型类使用。
*   用户界面可以使用 CSS 设置样式。

看看我对[JavaFx 如何与 WPF 进行比较](https://stackoverflow.com/a/13140746/577417)的问题的回答，它提供了 WPF 和 JavaFX 的更详细（但仍然是高级别的）比较。

**设计模式（MVVM）**

MVVM 模式是[表示模型](http://martinfowler.com/eaaDev/PresentationModel.html)模式的一种特殊形式。可以在 JavaFX 中创建它的变体，因为平台提供支持绑定的属性，并且表示模型基本上是一个对象，它封装模型的状态并提供作用于该状态的操作。

尽管我看到的大多数示例都使用了模型-视图-演示者模式的变体。开箱即用的 JavaFX 支持一个非常简单的 MVP 结构，其中每个视图都与一个“控制器”类相关联。这对于小型应用程序来说很好，但并不能真正提供很好的关注点分离。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-21T07:57:08.827

也许您应该关注出色的[MVVMFX 框架](https://github.com/sialcasa/mvvmFX)。基于 WPF 和 JavaFX 之间的相似之处，例如描述性 UI 声明 (FXML/XAML)，他们尝试采用 WPF 开发的最佳实践。

当然，它支持数据绑定概念，并为视图、视图模型和模型之间的通知实现必要的接口。UI 及其 UI-Logic（代码隐藏）通过 fxml 文件（使用 Scene Builder 创建）和必需的 Java 类来实现。有很多很好的例子，理解它们的概念并不难，因为它是最纯粹的 MVVM 模式的严格实现。您所需要的只是在您的项目依赖项中建立框架。

# ruby-on-rails - Ruby / ROR - 语法错误关键字END（所有块都有结束）

> ID：13444720
> 
> 赞同：0
> 
> 时间：2012-11-18T21:20:31.473
> 
> 标签：ruby-on-rails, ruby

收到以下错误：

```
syntax error, unexpected keyword_ensure, expecting keyword_end 
```

和

```
syntax error, unexpected $end, expecting keyword_end 
```

带代码

```
 <% if user.admin? do %>
        <%= form_tag({:controller => '/admin/link', :action=> 'link', :id => @link.id}) do %>

        <%= render :partial => "link_form" %>

        <% end %>
    <% end %> 
```

虽然我已经通过代码大约 10 次，但我所有的块都关闭了。答案可能很简单，因为我是 ruby​​/ror 新手。代码也不是很困难，只有大约 15 行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T21:23:53.563

好像你有一个额外的“做”。第一行应该只是

```
<% if user.admin? %> 
```

# python - xslt 模板根标签，在文本输出中省略

> ID：13444721
> 
> 赞同：4
> 
> 时间：2012-11-18T21:20:35.397
> 
> 标签：python, xslt, lxml, export-to-csv, mindmap

我在 xsl 上工作，将思维导图文件转换为 csv 树结构。我使用 python lxml

还有一个小问题 - 如何省略模板中必需的根标签？离开它们会导致：

```
AssertionError: ElementTree not initialized, missing root 
```

源xml

```
<map version="0.9.0">

<node TEXT="Familie">
<node TEXT="Kinder">
<node TEXT="Sohn">
</node>

<node TEXT="Tochter">
<node TEXT="Hobbies">
<node TEXT="Fu&#xdf;ball">
</node>
</node>
</node>

</node>
</node>
</map> 
```

输出。注意*p*标签。如何丢弃它们？

```
<p>,"Familie"
  "Familie","Kinder"
  "Familie","Kinder","Sohn"
  "Familie","Kinder","Tochter"
  "Familie","Kinder","Tochter","Hobbies"
  "Familie","Kinder","Tochter","Hobbies","Fu&#223;ball"
  </p> 
```

我的床单

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text" indent="no" encoding="ISO-8859-1" omit-xml-declaration="yes" media-type="string"/>
<xsl:strip-space elements="*" />

  <xsl:template match="/">
    <p>
      <xsl:apply-templates/>
    </p>
  </xsl:template>

<xsl:template match="node">
  <xsl:param name="par"/>
  <xsl:variable name="nodetext" select="@TEXT"/>
  <xsl:variable name="depth" select="count(ancestor::*)"/>
<xsl:value-of select="$par"/>,&quot;<xsl:value-of select="$nodetext"/>&quot;
  <xsl:choose>

    <xsl:when test="$depth&lt;2">
      <xsl:apply-templates>
        <xsl:with-param name="par" select="concat('&quot;',$nodetext,'&quot;')"/>
      </xsl:apply-templates>
    </xsl:when>

    <xsl:otherwise>
      <xsl:apply-templates>
        <xsl:with-param name="par" select="concat($par,',&quot;',$nodetext,'&quot;')"/>
      </xsl:apply-templates>
    </xsl:otherwise>

  </xsl:choose>

</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:01:04.957

**更改此模板：**

```
<xsl:template match="/">
  <p>
    <xsl:apply-templates/>
  </p>
</xsl:template> 
```

**...对此：**

```
<xsl:template match="/">
  <xsl:apply-templates/>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T22:34:08.543

**我无法重现报告的结果——使用 Saxon 6.5.4 我得到**：

```
,"Familie"
  "Familie","Kinder"
  "Familie","Kinder","Sohn"
  "Familie","Kinder","Tochter"
  "Familie","Kinder","Tochter","Hobbies"
  "Familie","Kinder","Tochter","Hobbies","Fuޢall" 
```

并且任何兼容的 XSLT 处理器都应该遵守`<xsl:output method="text"/>`并生成纯文本输出。

**无论如何，如果您不想生成任何元素，请将它们从转换中删除：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text" indent="no" encoding="ISO-8859-1" omit-xml-declaration="yes" media-type="string"/>
<xsl:strip-space elements="*" />

  <xsl:template match="/">
      <xsl:apply-templates/>
  </xsl:template>

<xsl:template match="node">
  <xsl:param name="par"/>

  <xsl:variable name="nodetext" select="@TEXT"/>
  <xsl:variable name="depth" select="count(ancestor::*)"/>

  <xsl:value-of select="$par"/>,&quot;<xsl:value-of select="$nodetext"/>&quot;

  <xsl:choose>
    <xsl:when test="$depth&lt;2">
      <xsl:apply-templates>
        <xsl:with-param name="par" select="concat('&quot;',$nodetext,'&quot;')"/>
      </xsl:apply-templates>
    </xsl:when>

    <xsl:otherwise>
      <xsl:apply-templates>
        <xsl:with-param name="par" select="concat($par,',&quot;',$nodetext,'&quot;')"/>
      </xsl:apply-templates>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template>
</xsl:stylesheet> 
```

# apache - TCL XMLRPC 服务器的 Java XmlRpc 客户端 POST 问题

> ID：13444729
> 
> 赞同：2
> 
> 时间：2012-11-18T21:21:40.450
> 
> 标签：apache, tcl, xml-rpc

我有一个简单的问题，我的 Java XMLRPC 客户端似乎无法正确地与用 TCL 编写的 XMLRPC 服务器对话

（使用 TCL XMLRPC SERVER OPEN SOURCE[实现](http://sourceforge.net/projects/xmlrpctcl/)）

摘要：TCL/Python 等中的 XMLRPC 客户端可以/确实向 TCL XMLRPC 服务器发送/接收消息，但我的 Java XMLRPC 客户端似乎无法正常工作。

**Java客户端代码：**

```
 /*
    * try's, catches, comments removed to show code-flow w/ out mess.
    * host/port/target all same as whats set in Python
    */
    //show imports / package used, this is using apache's xmlrpc v3.1.3
    import org.apache.xmlrpc.XmlRpcException;
    import org.apache.xmlrpc.client.XmlRpcClient;
    import org.apache.xmlrpc.client.XmlRpcClientConfigImpl;
    //... host and port are the same as whats used in working tcl/python clients. (remoteHostName / 5555)
    //... method is the same as well, 'fooBar123', and args is just 1 string passed to it.
    XmlRpcClientConfigImpl config = new XmlRpcClientConfigImpl();
    target = "RPC2";
    String targetUrl = "http://"+host+":"+port+"/" + target;
    TestNgUtil.ReportInfo("config.SetServerUrl("+targetUrl+")");
    config.setServerURL(new URL(targetUrl));
    XmlRpcClient client = new XmlRpcClient();
    client.setConfig(config);
    String result = null;
    /*
    * This Result Never Returns from TCL XMLRPC Server
    */
    result = (String) client.execute(command, params); 
```

**TCL 服务器对 Java 的 Debug ERROR 响应：**

```
 //(notice unlike Python example below, no proper Header, Content-Type, etc)

    TCL Server Side of the Java Error
    in serveOnce: addr: 10.21.69.13
    in serveOnce: port: 64522
    Unknown type: fooBar123</value></param></params>
    bgerror failed to handle background error.
    Original error: 
    Error in bgerror: can't read "xmlcall": no such variable** 
```

但是，Python 示例有效，还请注意我打印出 XML-debug 以查看成功的请求：

但是，如果我尝试使用 TCL 客户端，甚至是简单的 Python XMLRPC 客户端，它就可以工作。我什至使用 Python 打印出 XMLRPC 请求：

（来自 Python 客户端，[没什么](http://tldp.org/HOWTO/XML-RPC-HOWTO/xmlrpc-howto-python.html)花哨的，）

```
 import xmlrpclib
    server_url = "http://remoteHostName:5555";
    server = xmlrpclib.Server(server_url, verbose=True);
    result = server.hello('hello world')
    ## DEBUG INFO PRINTED FROM REQUEST POST ##
    send: "POST /RPC2 HTTP/1.1\r\nHost: remoteHostName:5555\r\nAccept-Encoding: gzip\r\nUser-Agent: xmlrpclib.py/1.0.1 (by www.pythonware.com)\r\nContent-Type: text/xml\r\nContent-Length: 160\r\n\r\n<?xml version='1.0'?>\n<methodCall>\n<methodName>hello</methodName>\n<params>\n<param>\n<value><string>hello world</string></value>\n</param>\n</params>\n</methodCall>\n"

    reply: 'HTTP/1.1 200 OK\n'
    header: Content-Type: text/xml
    header: Content-length: 162
    body: '<?xml version="1.0"?>\n<methodResponse>\n\t<params>\n\t\t<param>\n\t\t\t<value>     <string>hello(hello world) yaaaah?!</string></value>\n\t\t</param>\n\t</params>\n</methodResponse>\n' 
```

**在推回正确响应之前，TCL 服务器对 Python 的调试/响应：**

```
 send: "POST /RPC2 HTTP/1.1
    Host: remoteHostName:5555
    Accept-Encoding: gzip
    User-Agent: xmlrpclib.py/1.0.1 (by www.pythonware.com)
    Content-Type: text/xml
    Content-Length: 156 
```

## 这是 hello( arg ) 的 TCL XMLRPC 服务器代码，适用于 tcl、python，而不是 java。（可能是java客户端配置问题）

```
 #using the TCL XMLRPC Server ( http://sourceforge.net/projects/xmlrpctcl/ ) 
    package require xmlrpc
    xmlrpc::serv 5555

    proc hello { world } {
  puts "IN HELLO WORLD!"
  set res "hello(${world}) yaaaah?!"
  return [list string $res]
    }

    vwait forever 
```

我很感激任何指示，到目前为止，我已经尝试使用带有嵌入式 TCL 解释器的 Java 或 Python 来避免这种情况，但是由于该应用程序必须使用、获取和共享大量 TCL，我必须得到一个 TCL XMLRPC 服务器启动并工作。

我还尝试将 webservices httpd 与 XMLRPC 一起使用，但即使让它与 tcl/python 客户端一起使用也没有太多成功。

已经杀死了整个周末。

感谢您的阅读，以及任何指针/帮助。

* * *

找到解决方案（在此处发布）

1.  问题归结为旧 tcl xmlrpc 服务器的 XML 不包括数据类型。它们是隐含的，因此为了让 apache 的 XMLRPC 客户端围绕字符串发送隐含的数据类型，只需实现“自定义数据类型”以放回标签。

代码在这里：

```
import java.net.URL;

import org.apache.xmlrpc.client.XmlRpcClient;
import org.apache.xmlrpc.client.XmlRpcClientConfigImpl;
import org.apache.xmlrpc.common.TypeFactoryImpl;
import org.apache.xmlrpc.common.XmlRpcController;
import org.apache.xmlrpc.common.XmlRpcStreamConfig;
import org.apache.xmlrpc.serializer.StringSerializer;
import org.apache.xmlrpc.serializer.TypeSerializer;
import org.xml.sax.ContentHandler;
import org.xml.sax.SAXException;

public class XMLRPCClient {
    public static void main(String[] argv) throws Exception {
        XmlRpcClientConfigImpl config = new XmlRpcClientConfigImpl();
        config.setServerURL(new URL("http://127.0.0.1:6800/rpc"));
        XmlRpcClient client = new XmlRpcClient();
        client.setConfig(config);
        client.setTypeFactory(new MyTypeFactoryImpl(client));
        Object[] params = new Object[] {
            new String[] { "http://www.google.com" }
        };
        String result = (String)client.execute("aria2.addUri", params);
    }

    static private class MyStringSerializer extends StringSerializer {
        public void write(ContentHandler pHandler, Object pObject)
            throws SAXException {
            // Write <string> tag explicitly
            write(pHandler, STRING_TAG, pObject.toString());
        }
    }

    static private class MyTypeFactoryImpl extends TypeFactoryImpl {
        public MyTypeFactoryImpl(XmlRpcController pController) {
            super(pController);
        }

        public TypeSerializer getSerializer(XmlRpcStreamConfig pConfig, Object pObject) throws SAXException {
            if(pObject instanceof String) {
                return new MyStringSerializer();
            } else {
                return super.getSerializer(pConfig, pObject);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-04T23:27:21.990

问题归结为旧 tcl XMLRPC 服务器的 XML 不包括数据类型。它们是隐含的，因此为了让 Apache 的 XMLRPC 客户端围绕字符串发送隐含的数据类型，只需实现“自定义数据类型”以放回标签。

```
import java.net.URL;

import org.apache.xmlrpc.client.XmlRpcClient;
import org.apache.xmlrpc.client.XmlRpcClientConfigImpl;
import org.apache.xmlrpc.common.TypeFactoryImpl;
import org.apache.xmlrpc.common.XmlRpcController;
import org.apache.xmlrpc.common.XmlRpcStreamConfig;
import org.apache.xmlrpc.serializer.StringSerializer;
import org.apache.xmlrpc.serializer.TypeSerializer;
import org.xml.sax.ContentHandler;
import org.xml.sax.SAXException;

public class XMLRPCClient {
    public static void main(String[] argv) throws Exception {
        XmlRpcClientConfigImpl config = new XmlRpcClientConfigImpl();
        config.setServerURL(new URL("http://127.0.0.1:6800/rpc"));
        XmlRpcClient client = new XmlRpcClient();
        client.setConfig(config);
        client.setTypeFactory(new MyTypeFactoryImpl(client));
        Object[] params = new Object[] {
            new String[] { "http://www.google.com" }
        };
        String result = (String)client.execute("aria2.addUri", params);
    }

    static private class MyStringSerializer extends StringSerializer {
        public void write(ContentHandler pHandler, Object pObject)
            throws SAXException {
            // Write <string> tag explicitly
            write(pHandler, STRING_TAG, pObject.toString());
        }
    }

    static private class MyTypeFactoryImpl extends TypeFactoryImpl {
        public MyTypeFactoryImpl(XmlRpcController pController) {
            super(pController);
        }

        public TypeSerializer getSerializer(XmlRpcStreamConfig pConfig, Object pObject) throws SAXException {
            if(pObject instanceof String) {
                return new MyStringSerializer();
            } else {
                return super.getSerializer(pConfig, pObject);
            }
        }
    }
} 
```

# php - 如何将 SOCKS 5 代理与 cURL 一起使用？

> ID：13444738
> 
> 赞同：22
> 
> 时间：2012-11-18T21:22:37.370
> 
> 标签：php, curl, proxy, socks

普通代理（例如`72.41.132.22:3128`：）适用于 cURL，但是当我使用带有用户名/密码的 SOCKS 5 代理时，它只会在页面上给我“[1”。

有没有办法将 SOCKY 5 代理与 cURL 一起使用？

```
$proxy = "cagsan:jw22wdw@108.61.25.223:34792";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_PROXY, $proxy);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 0);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_HEADER, 1);
$curl_scraped_page = curl_exec($ch);
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-18T21:26:49.500

您需要告诉 cURL 代理是 SOCKS5 代理，否则 cURL 假定它是 HTTP 代理：

```
curl_setopt($ch, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5); 
```

从[文档](http://php.net/curl_setopt)：

> **CURLOPT_PROXYTYPE**
> 
> > CURLPROXY_HTTP（默认）或 CURLPROXY_SOCKS5。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-05-28T20:39:22.837

从 cURL 7.21.7 开始，您可以使用`CURLOPT_PROXY`和指定 SOCKS 协议：

```
curl_setopt($ch, CURLOPT_PROXY, 'socks5://bob:marley@localhost:12345'); 
```

[libcurl 文档](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTPROXY)中的更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-11T01:55:41.003

对于那些希望通过主机名（localhost？）进行连接的人，并且它无法使用`CURLPROXY_SOCKS5`，您可以尝试`CURLPROXY_SOCKS5_HOSTNAME`.

```
curl_setopt($ch, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5_HOSTNAME); 
```

在一些较早的 PHP 版本中，您必须执行以下操作：

```
curl_setopt($ch, CURLOPT_PROXYTYPE, 7); 
```

# c++ - 是否可以将 c++ 单元测试集成到 Maven 构建过程中，如果可以，使用哪个单元测试框架

> ID：13444739
> 
> 赞同：1
> 
> 时间：2012-11-18T21:22:41.770
> 
> 标签：c++, unit-testing, maven

我们计划将我们的原生 c++ 项目集成到一个 Maven 构建过程中。此外，我们还想为 c++ 项目制定使用标准 maven 语法（如 java 单元测试）自动运行的单元测试。这对 c++ 单元测试框架是否可行，如果可以，哪个框架与 maven 集成得很好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:45:02.733

我建议深入研究[maven-nar-plugin](http://duns.github.com/maven-nar-plugin/)与 Boost 库的关系，它应该适合您的需求。

# erlang - 主管重新启动策略和 childspec

> ID：13444742
> 
> 赞同：0
> 
> 时间：2012-11-18T21:22:49.817
> 
> 标签：erlang, rabbitmq, erlang-supervisor

我正在阅读rabbitmq的`supervisor2.erl,rabbit_channel_sup_sup.erl, rabbit_channel_sup.erl`源代码。

当`childspec`start 参数为`"temporary"`时，表示子进程在任何原因退出后都不会重新启动。这样对吗？

当启动参数为`"temporary"`时，每个重启参数没有区别，`one-for-one, one-for-all,one-for-rest,simple-one-for-one`。因为代码运行结果是一样的。这样对吗？

以下代码来自`supervisor2.erl`文件

```
do_restart({permanent = RestartType, Delay}, Reason, Child, State) ->
    do_restart_delay({RestartType, Delay}, Reason, Child, State);
do_restart(permanent, Reason, Child, State) ->
    report_error(child_terminated, Reason, Child, State#state.name),
    restart(Child, State);
do_restart(Type, normal, Child, State) ->
    del_child_and_maybe_shutdown(Type, Child, State);
do_restart({RestartType, Delay}, {shutdown, restart} = Reason, Child, State)
  when RestartType =:= transient orelse RestartType =:= intrinsic ->
    do_restart_delay({RestartType, Delay}, Reason, Child, State);
do_restart(Type, {shutdown, _}, Child, State) ->
    del_child_and_maybe_shutdown(Type, Child, State);
do_restart(Type, shutdown, Child = #child{child_type = supervisor}, State) ->
    del_child_and_maybe_shutdown(Type, Child, State);
do_restart({RestartType, Delay}, Reason, Child, State)
  when RestartType =:= transient orelse RestartType =:= intrinsic ->
    do_restart_delay({RestartType, Delay}, Reason, Child, State);
do_restart(Type, Reason, Child, State) when Type =:= transient orelse
                                            Type =:= intrinsic ->
    report_error(child_terminated, Reason, Child, State#state.name),
    restart(Child, State);
do_restart(temporary, Reason, Child, State) ->  %%<<----attention here, just report_error,not calling restart child function
    report_error(child_terminated, Reason, Child, State#state.name),
    NState = state_del_child(Child, State),
    {ok, NState}. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:43:37.447

一个临时的孩子永远不会重新启动，这是真的。但是重启策略仍然在决定主管行为方面发挥作用——all-for-one 策略将杀死所有孩子（不会重新启动，因为它们是临时的），而 one_for_one 不会杀死任何其他孩子。基本上，这些重启策略告诉主管如何处理*其他*进程（其他进程是没有死的进程），所以有区别。

# for-loop - 将嵌套 FOR 循环转换为 PARFOR 循环 matlab

> ID：13444745
> 
> 赞同：2
> 
> 时间：2012-11-18T21:23:00.350
> 
> 标签：for-loop, parallel-processing, matlab

我有这些嵌套的 for 循环，我想将它们转换为 parfor：

```
row = 1;
for i = 5 : 0.2 : 5.4
    col = 1;
    for j = 2 : 0.5 : 2.5
        matrx(row, col) = i * j;
        col = col + 1;
    end
    row = row + 1;
end 
```

有没有人可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T21:52:42.097

我希望您只显示代码的极其简化的版本，但无论如何，通过聆听 Matlab 的大量消息并阅读文档可以找到 parfor 的秘密。从学习良好的 Matlab 编码实践开始，并以这样一种方式简化您的代码，以使您的数据适合 Matlab 在`parfor`循环中想要的内容。

注意事项：

1.  Parfor 循环应该是整数。
2.  所有矩阵都必须分类（阅读文档）。
3.  容器矩阵应该用在嵌套的 for 循环中

这是我会做的一种方式，虽然这取决于你的最终申请

```
iVal = 5 : 0.2 : 5.4;
jVal = 2 : 0.5 : 2.5;

iLen = length(iVal);
jLen = length(jVal);

matrx = zeros(iLen, jLen);

parfor i = 1:iLen
    dummy = zeros(1, jLen);
    for j = 1:jLen
        dummy(j) = iVal(i) * jVal(j);
    end
    matrx(i,:) = dummy;
end 
```

# jquery - jquery json生成带有条件的html按钮

> ID：13444751
> 
> 赞同：1
> 
> 时间：2012-11-18T21:23:53.453
> 
> 标签：jquery, html, json, button

我的需要是生成带有 json 中描述的条件的按钮。请帮助我，我是新手，我被卡住了。问题是我的代码生成带有文本“未定义”的按钮，并且在单击按钮时没有任何反应。

这是我的 JSON 代码（由于[http://www.jsoneditoronline.org/](http://www.jsoneditoronline.org/)的检查结果有效，但不适用于下面的 html 代码）：

```
 {
        "Caption": "Module caption",
        "IconsDirectory": "C://Images/",
        "Buttons": [
            {
                "Conditions": [
                    {
                        "ConditionText": "1 == 1",
                        "ButtonText": "Text1",
                        "Visible": true,
                        "Colors": {
                            "FontColor": "#FFFFFF",
                            "BGColor": "#669933"
                        },
                        "BButtonText": {
                            "TText": "Textt1"
                            },
                        "Size": {
                            "Width": 200,
                            "Height": 50
                        },
                        "Icon": {
                            "FileName": "Smile.png",
                            "Width": 16,
                            "Height": 16
                        },
                        "Url": {
                            "UrlAddress": "http://www.google.com",
                            "OpenNewWindow": true
                        },
                        "JavaScriptAction": {
                            "Text": "alert('ok');"
                        }
                    },
                    {
                        "ConditionText": "2 == 2",
                        "ButtonText": "Text2",
                        "Visible": true,
                        "Colors": {
                            "FontColor": "#0FFFFF",
                            "BGColor": "#FF9966"
                        },
                        "BButtonText": {
                            "TText": "Textt1"
                            },
                        "Size": {
                            "Width": 200,
                            "Height": 50
                        },
                        "Icon": {
                            "FileName": "Smile.png",
                            "Width": 16,
                            "Height": 16
                        },
                        "Url": {
                            "UrlAddress": "http://www.google.com",
                            "OpenNewWindow": true
                        },
                        "JavaScriptAction": {
                            "Text": "alert('ok');"
                        }
                    }
                ]
            }
        ]
    } 
```

html代码：

```
 <html>
    <head>
    <title>SMButtons</title>
    <script src="jquery/jquery-1.4.2.js"></script>
    <script type="text/javascript">         
    //When document loaded.
    $(document).ready(function(){   
    // Get data from file as JSON
                $.getJSON('weekendtask.json', function(data) {
            //var buttons = data.Buttons;
               //$.each(buttons, function(key, val)
               //{  
                //$('<li><input type="button" onClick="'+         val.Conditions[0].JavaScriptAction +'" value="'+ val.Conditions[0].ButtonText +'"/>        </li>').appendTo('#ulObj');
                //$('<li><input type="button" value="'+         val.Conditions[1].BButtonText.TText +'"/></li>').appendTo('#ulObj');
    var res=""
    $.each(data.Buttons, function(key, button){
        $.each(button.Conditions,function(key,condition){
        //  console.log(condition)
            res+="<li>"
            res+='<input type="button"' + 
                //'" value="'+ '"Ttt"' +
                '" value="'+ condition.ButtonText +
                //'" value="'+ data.Buttons.Conditions.ButtonText +
                '" onclick="' + condition.JavascriptAction +
                '" style="background-color:'+condition.Colors.BGColor+'         color:'+condition.Colors.FontColor+
                '"/>'
            res+="<\/li><\/br><\/br>test<\/br>"
        })
    })
    $(res).appendTo('#ulObj')

               //});
       });             
         });

    window.onload = function(){ alert("welcome"); }

       </script>
    </head>
    <body bgcolor="silver">
    <br>
    <br>
    <div>
    <ul id='ulObj'>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    </ul>
    </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:36:20.013

`onClick`处理程序应该是`condition.JavaScriptAction.Text`. 休息一切正常。

```
var res = ""
    $.each(data.Buttons, function(key, button) {
        $.each(button.Conditions, function(key, condition) {
            res += "<li>"
            res += '<input type="button"' + '" value="' + condition.ButtonText + '" onclick="' + condition.JavaScriptAction.Text + '" style="background-color:' + condition.Colors.BGColor + '         color:' + condition.Colors.FontColor + '"/>'
            res += "<\/li><\/br><\/br>test<\/br>"
        })
    })
    $(res).appendTo('#ulObj') 
```

[http://jsfiddle.net/x8Ysd/](http://jsfiddle.net/x8Ysd/)

# blackberry-cascades - 级联黑莓。点击其他后面的控制

> ID：13444754
> 
> 赞同：3
> 
> 时间：2012-11-18T21:24:00.163
> 
> 标签：blackberry-cascades

我们有一张`ImageButton`被`Label`.

是否可以单击`ImageButton`标签下方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:00:52.920

我找到了

```
touchPropagationMode: TouchPropagationMode.PassThrough
        focusPolicy: FocusPolicy.None 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:58:03.097

那么显而易见的想法是在此之上使用透明控制。但在我看来，这不是干净的方式。

# php - mysql按字母排序并将“其他”设置为末尾

> ID：13444756
> 
> 赞同：0
> 
> 时间：2012-11-18T21:24:03.750
> 
> 标签：php, mysql, sql-order-by

我的表“类别”有两列：“id”和“name”。

我想显示名称并按字母顺序排列表格，但如果存在名称“其他”，我想将其设置为最后一行。

有没有办法在不创建另一个标记位置的列的情况下实现这一点？

```
ORDER BY name DESC { something to set name = "other" to the end } 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:25:11.527

使用`CASE`，您可以有条件地在 中应用排序`ORDER BY`。`name <> 'other'`有条件地分配 a 的行排在分配了 a`0`的匹配之前。然后它由 子排序。`other``1``name`

```
ORDER BY
  CASE WHEN name <> 'other' THEN 0 ELSE 1 END,
  name ASC 
```

您`name DESC`在示例中使用，但您的描述暗示您希望它按字母升序排序。如果这是不正确的并且您*确实*希望它下降，请`name DESC`改用。

请注意，对于 MySQL，布尔表达式`(name = 'other')`将计算为 0 或 1。因此可以简化为省略`CASE`：

```
ORDER BY
  /* name <> 'other' returns 0 */
  (name = 'other'),
  name ASC 
```

但是，这不能移植到任何 RDBMS。

# django - django 的 urls.py 中的冗余

> ID：13444761
> 
> 赞同：2
> 
> 时间：2012-11-18T21:24:23.727
> 
> 标签：django, django-urls

在`urls.py`我发现自己做了很多这样的事情：

```
url(r'^show_comments/?$', 'show_comments', name='show_comments') 
```

我重复相同的字符串三遍。这种模式是否有常用的速记，或者我应该继续编写自己的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T21:33:42.643

我不相信有一个内置的速记，不。

* * *

但是，我不确定这样做是否可取。考虑以下：

*   如果您想更改函数但将来不想更改 URL *（以免断开链接）* ，将 URL 与函数本身分离是很有用的。
*   不需要名称。除非您打算使用`reverse`，在这种情况下，将 URL 和函数解耦是很有用的。*（在您的示例中，这完全是多余的）*
*   如果您使用基于类的视图/ URL 级装饰器，则必须导入该函数而不使用其名称。
*   如果您不以“标准”方式进行操作，那么进入您的项目的开发人员将需要一些时间来适应您创建 URL 的方式。

# c - CUDA共享内存速度

> ID：13444763
> 
> 赞同：1
> 
> 时间：2012-11-18T21:24:42.670
> 
> 标签：c, cuda, hpc

这是一个与性能相关的问题。我基于“CUDA By Example”示例代码编写了以下简单的 CUDA 内核：

```
#define N 37426 /* the (arbitrary) number of hashes we want to calculate */
#define THREAD_COUNT 128

__device__ const unsigned char *m = "Goodbye, cruel world!";

__global__ void kernel_sha1(unsigned char *hval) {
  sha1_ctx ctx[1];
  unsigned int tid = threadIdx.x + blockIdx.x * blockDim.x;

  while(tid < N) {
    sha1_begin(ctx);
    sha1_hash(m, 21UL, ctx);
    sha1_end(hval+tid*SHA1_DIGEST_SIZE, ctx);
    tid += blockDim.x * gridDim.x;
  }
} 
```

代码在我看来是正确的，并且确实吐出了相同哈希的 37,426 个副本（如预期的那样。根据我对第 5 章第 5.3 节的阅读，我假设每个写入全局内存的线程都以“hval”的形式传入）效率极低。

然后我实现了我认为使用共享内存的性能提升缓存。代码修改如下：

```
#define N 37426 /* the (arbitrary) number of hashes we want to calculate */
#define THREAD_COUNT 128

__device__ const unsigned char *m = "Goodbye, cruel world!";

__global__ void kernel_sha1(unsigned char *hval) {
  sha1_ctx ctx[1];
  unsigned int tid = threadIdx.x + blockIdx.x * blockDim.x;
  __shared__ unsigned char cache[THREAD_COUNT*SHA1_DIGEST_SIZE];

  while(tid < N) {
    sha1_begin(ctx);
    sha1_hash(m, 21UL, ctx);
    sha1_end(cache+threadIdx.x*SHA1_DIGEST_SIZE, ctx);

    __syncthreads();
    if( threadIdx.x == 0) {
      memcpy(hval+tid*SHA1_DIGEST_SIZE, cache, sizeof(cache));
    }
    __syncthreads();
    tid += blockDim.x * gridDim.x;
  }
} 
```

第二个版本似乎也可以正常运行，但比初始版本慢几倍。后者代码在大约 8.95 毫秒内完成，而前者在大约 1.64 毫秒内运行。我对 Stack Overflow 社区的问题很简单：为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T22:20:43.753

我通过示例查看了 CUDA，找不到类似的东西。是的，附录中有一些关于 GPU 哈希表的讨论，但它看起来不像这样。所以我真的不知道你的函数是做什么的，尤其是 sha1_end。如果此代码与那本书中的某些内容相似，请指出，我错过了。

但是，如果 sha1_end 一次（每个线程）写入全局内存并以合并的方式执行，则没有理由不能非常高效。大概每个线程都在写入不同的位置，因此如果它们或多或少相邻，则肯定有合并的机会。在不讨论合并的细节的情况下，只要说它允许多个线程*在单个事务中将*数据写入内存就足够了。而且，如果您要将数据写入全局内存，您将不得不在某个地方至少支付一次这种惩罚。

对于您的修改，您已经完全扼杀了这个概念。您现在已经从单个线程执行了所有数据复制，并且 memcpy 意味着后续数据写入（整数或字符等）发生在单独的事务中。是的，有一个缓存可以帮助解决这个问题，但在 GPU 上这样做是完全错误的。让每个线程更新全局内存，并利用机会并行进行。但是，当您强制在单个线程上进行所有更新时，该线程必须按顺序复制数据。这可能是时间差异中最大的单一成本因素。

__syncthreads() 的使用也会带来额外的成本。

CUDA by Examples 一书的第 12.2.7 节提到了视觉分析器（并提到它可以收集有关合并访问的信息）。视觉分析器是帮助尝试回答此类问题的好工具。

如果您想了解有关高效内存技术和合并的更多信息，我建议您参加题为“GPU Computing using CUDA C – Advanced 1 (2010)”的 NVIDIA GPU 计算[网络研讨会。](https://developer.nvidia.com/gpu-computing-webinars)与它的直接链接在[这里](http://developer.download.nvidia.com/CUDA/training/NVIDIA_GPU_Computing_Webinars_CUDA_Memory_Optimization.wmv)与[幻灯片](http://developer.download.nvidia.com/CUDA/training/NVIDIA_GPU_Computing_Webinars_CUDA_Memory_Optimization.pdf)。

# android - 用于智能手机的摄像头控制 HTML/PHP/Javascript？

> ID：13444765
> 
> 赞同：2
> 
> 时间：2012-11-18T21:24:45.263
> 
> 标签：android, ios, html, ios4, smartphone

我是否可以使用 HTML5、Javascript 或 PHP 访问 iOS 或 Android 智能手机的相机，以便用户在拍摄后进行拍照和查看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:51:18.160

您应该能够将`camera`API 与 Javascript 一起使用。

[https://developer.mozilla.org/en-US/docs/DOM/Using_the_Camera_API](https://developer.mozilla.org/en-US/docs/DOM/Using_the_Camera_API)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-07T17:21:24.913

好吧，您可以使用此 html5 代码，因为它对我有用。

```
 <input type="file" class='form-control' accept="image/*" capture="camera" /> 
```

# ruby - 从数组中删除仅大小写不同的字符串值（Ruby）

> ID：13444767
> 
> 赞同：1
> 
> 时间：2012-11-18T21:24:53.980
> 
> 标签：ruby, arrays, anagram

所以，这是前言：

我是 Ruby 的初学者。我正在研究一个字谜查找脚本（在文本文件中查找所有字谜）。本质是：我创建了一个字典，其中键是单词代码，值是一个数组，其中包含引用此代码的单词。是这样的：`{"abdeis"=>["abides", "biased"] ,"achr"=>["char"], ... }`。最后我只是打印出长度> 1的值。到目前为止这么好。

这是交易：我想修改输出，以便省略这种情况：`["Wood", "wood", "WooD"]`- 仅在情况下都是不同的。但是这种情况应该保留：`["Doom", "DooM", "mood"]`。

我目前的一段代码：

```
def print_anagram(anagram_dict)
  anagram_list = anagram_dict.values
  anagram_list.each { |i|
    if i.length > 1
      print i.join("\t")
      print "\n"
    else
      next
    end
   }
end 
```

anagram_dict 是上面提到的字典。

我应该做哪些检查才能扔掉这些箱子？我想到的东西对我来说似乎很笨重。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:34:47.950

```
def print_anagram(anagram_dict)
  anagram_list = anagram_dict.values
  anagram_list.each do |i|
    next if i.map(&:downcase).uniq.length == 1

    if i.length > 1
      print i.join("\t")
      print "\n"
    else
      next
    end
  end
end 
```

What this does:

*   make all Strings lowercase

*   get only unique elements from the array

*   if you only have one unique element, all elements are the same

`map(&:downcase)` is a shorter way of doing: `map { |element| element.downcase }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:33:35.060

这是做你想做的吗？

```
def print_anagram(anagram_dict)
  anagram_list = anagram_dict.values.uniq{|word| word.downcase}
  # rest of your code 
```

# iphone - 无法在 iOS 5.1.1 设备上运行应用程序

> ID：13444771
> 
> 赞同：0
> 
> 时间：2012-11-18T21:25:11.657
> 
> 标签：iphone, xcode, ios5

我正在开发一个针对 iOS 5.1 的 iPhone 应用程序，它在具有此类 iOS 版本的真实 iPhone 设备上运行时表现良好，但在部署在具有 5.1.1 版本的 iPhone 上时却没有。它似乎已正确安装，但在运行时甚至没有显示 GUI，它看起来像是尝试启动应用程序但它崩溃了。我有 Xcode 4.5，但没有发现任何关于 iOS 5.1.1 SDK 的信息，我应该将应用程序更新到 iOS 6.0 吗？我怎么能解决这个问题？

编辑：我在设备上运行时收到此日志：

```
Nov 19 16:35:29 unknown SpringBoard[605] <Warning>: Unable to obtain a task name port right for pid 744: (os/kern) failure
Nov 19 16:35:29 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:TA.MyTestApp[0x9d15]) Exited: Killed: 9
Nov 19 16:35:30 unknown com.apple.launchd[1] <Warning>: (UIKitApplication:TA.MyTestApp[0x9d15]) Throttling respawn: Will start in 2147483647 seconds
Nov 19 16:35:30 unknown SpringBoard[605] <Warning>: Application 'MyTestApp' exited abnormally with signal 9: Killed: 9
Nov 19 16:35:30 unknown sandboxd[745] <Notice>: MS:Notice: Installing: (null) [sandboxd] (690.10)
Nov 19 16:35:30 unknown kernel[0] <Debug>: Sandbox: hook..execve() killing pid 744: (err=22) unable to set the builtin profile: container 
```

# c++ - c++ 如何以不同的方式循环代码？（不是你想的那种）

> ID：13444774
> 
> 赞同：0
> 
> 时间：2012-11-18T21:25:24.200
> 
> 标签：c++

好的，所以我正在尝试制作一个非常简单的文字角色扮演游戏，但我遇到了问题。我不知道我可以使用什么样的循环来循环这段代码：

```
getline(cin, response);
if(response == "Pick up the gun")
{
    cout << "You pick up the gun.\n";
    cout << "Knock down the door with it? (Y/N)\n";
    getline(cin, response);
    if(response == "Y")
    {
        cout << "The door opens.\n";
        cout << "You see a zombie.\n";
        cout << "You see an open window.\n";
        cout << "What do you do?\n";
        getline(cin, response);
        if(response == "Shoot the zombie")
        {
            cout << "The zombie dies and it attracts other zombies.\n";
            cout << "GAME OVER!\n";
            cin.get();
            return 0;
        }
        else if(response == "Jump out the window")
        {
            cout << "The zombie does not hear you and you safely make it out!\n";
            cout << "VICTORY!\n";
            cin.get();
            return 0;
        }
    }
    else if(response == "N")
    {
    }
}
else if(response == "Open the door")
{
    cout << "It appears to be locked.\n";
} 
```

因此，如果他们弄错了（例如，他们选择“开门”，它只会说它已锁定，并且由于某种原因它会结束程序。我希望用户能够选择不同的选择，而不是拥有它只是空白或损坏或结束等）它只会循环，但是当我尝试它时，它要么不会结束程序，只是让它我可以输入并且无论如何都不会发生任何事情，或者它绝对是垃圾邮件100次和我不能做任何事情等等。它很奇怪。那我怎么能这样做呢？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T22:25:47.377

如果你做了很多这样的事情，我建议你让读者更容易......一种选择路径的事情，而不是用户不知道他们应该输入什么。

```
int GetChoice( vector<string> & choices )
{
    cout << "Do you wish to:" << endl;

    // Output choices 1..N
    for( int i = 0; i < choices.size(); i++ ) {
        cout << "  " << i+1 << ". " << choices[i] << endl;
    }

    // Ask user for their choice.
    for(;;) {
        // This is pretty basic.  You could use getline instead...
        cout << "Enter your choice: ";
        cout.flush();
        int n;
        cin >> n;

        if( n < 1 || n > choices.size() ) {
            cout << "Invalid choice.\n";
            continue;
        }

        // Output the choice and clear the choices vector (so it can be used again)
        cout << "You " << choices[n-1] << endl;
        choices.clear();
        return n;
    }
 } 
```

然后：

```
 vector<string> opts;
 int choice;

 cout << "You see a door and a gun.\n";
 do {
     opts.push_back( "try the door" );
     opts.push_back( "pick up the gun" );
     choice = GetChoice(opts);
     if( choice == 1 ) cout << "The door appears to be locked.\n";
 } while( choice == 1 );
 if( choice != 2 ) GameQuit();

 cout << "You are armed and dangerous.  Now what?\n";
 opts.push_back( "assault the door with the gun" );
 opts.push_back( "look down the barrel and pull the trigger" );
 choice = GetChoice(opts);

 if( choice == 1 ) {
    cout << "The door crashes from its hinges.\n";
    cout << "You see a zombie and an open window.\n";
    opts.push_back( "shoot the zombie" );
    opts.push_back( "jump out the window" );
    choice = GetChoice(opts);

    if( choice == 1 ) {
        cout << "The zombie explodes and it attracts hundreds more zombies.\n";
        GameOver();
    } else if( choice == 2 ) {
        cout << "You plummet 17 stories to a grisly death.\n";
        GameOver();
    } else {
        GameQuit();
    }
 } else if( choice == 2 ) {
    cout << "Your head explodes.\n";
    GameOver();
 } else {
    GameQuit();
 } 
```

并不是说它很漂亮，但是这种格式允许您随时使用其他选项（例如 'q' 退出，它可能返回零）。

显然，您会看到以这种方式进行游戏会导致大量嵌套块`if`......最好将游戏安排为状态机，正如之前在评论中所建议的那样。最终，您可以定义一个包含整个游戏的简单文本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:32:29.573

创建一个布尔变量预设为 FALSE。如果用户选择“跳出窗口”，则将布尔变量更改为 TRUE。然后将整个代码放入一个循环中。

```
while (myBooleanVariable == FALSE) {

  //insert game code

} 
```

# php - 从非 wp 页面中的 wp 页面访问 $_SESSION 变量

> ID：13444783
> 
> 赞同：1
> 
> 时间：2012-11-18T21:26:50.620
> 
> 标签：php, wordpress

我的 wordpress 博客需要用户名和密码。在我放置的第一个 wp 页面上：

```
<?php 
  global $current_user;
  get_currentuserinfo();
  $name = $current_user->user_firstname . ' '.$current_user->user_lastname;
  $_SESSION['memberName'] = $name;
  echo '<h2>Welcome ' . $name . '</h2>';
?> 
```

正如预期的那样，“欢迎”与用户名一起出现。我有一个自定义菜单，将用户转移到一个非 WP 页面，初始行：

```
<?php 
  session_start(); 
  $name = $_SESSION['memberName'];
?> 
```

但是，在链接到这个非 wp 页面后， $name 是空白的。如何在会话中传输 !name？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:35:21.570

你为什么不使用[**WP Sessions Plugin**](http://codecanyon.net/item/wordpress-sessions-plugin-with-database/3405722?WT.ac=new_item&WT.seg_1=new_item&WT.z_author=screets)。它为您创建会话，当用户更改他的个人资料数据时，此插件也会更新他的会话数据。同时，如果用户注销，则插件会从数据库中删除他的会话数据。

一些例子：

您可以像这样**添加**会话数据：

```
// One value
$session->set_userdata( 'username', 'john' );

// Passing array
$array = array(
    'username' => 'john',
    'email'    => 'john@gmail.com'
);

$session->set_userdata( $array ); 
```

要**检索**会话数据：

```
$session->userdata( 'username' ); 
```

**获取所有**会话数据：

```
$session->all_userdata(); // returns array 
```

要从会话**中删除**一项：

```
$session->unset_userdata( 'username' ); 
```

要从会话**中删除更多项目：**

```
$array = array(
    'username' => '',
    'email'    => ''
);
$session->unset_userdata( $array ); 
```

您还可以使用**Flashdata**，它是仅可用于下一个服务器请求的会话数据，然后会自动清除。当您将它们用于*信息*或*状态消息*（例如“产品已被删除”）时，它们会非常有用。

```
// Add Flashdata
$session->set_flashdata( 'item', 'value' );

// Retrieve Flashdata
$session->flashdata( 'item' );

// Preserving flashdata 
// (if you need to preserve flashdata through an additional request, 
// you can use this function):
$session->keep_flashdata( 'item' ); 
```

销毁会话：

```
$session->sess_destroy(); 
```

该插件还支持**简码**。您可以在帖子或页面上打印任何会话数据：

```
[session key="username"] 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:38:13.127

让它成为一个加载 WP 的 WP 页面，如下所示：

```
require_once('PathToBlogRoot/wp-load.php'); 
```

我认为这将是实现这一目标的最简单方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T21:40:48.297

如果它在同一个域上，您可以将其添加到 cookie 中，就像这样

```
<?php 
  global $current_user;
  get_currentuserinfo();
  $name = $current_user->user_firstname . ' '.$current_user->user_lastname;
  setcookie("guest_name", $name);

  echo '<h2>Welcome ' . $name . '</h2>';
?> 
```

然后在 NON WP 页面上你有类似的东西

```
<?php echo $_COOKIE('guest_name'); ?> 
```

如果要将它们重定向到另一个域，最好将用户名放在 GET 参数中。就像当您重定向到新页面时，您只需添加用户名

```
<?php

   $name = $current_user->user_firstname . ' '.$current_user->user_lastname;
   header( 'Location: http://your_non_wp_page/index.php?username='.$name ) ;

?> 
```

然后在那个页面上你就做

`<?php echo $_GET['username']; ?>`

但是cookie会更持久。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T23:44:24.407

虽然 Vladimir 获得了一些荣誉——因为他向我指出了 setcookie()——一个主要问题是需要将 setcookie 放在文件中的 html 行之前；在 WP 中并不容易。在 WordPress 中执行此操作的少数地方之一是在 functions.php 文件中；例如：

```
function set_user_cookie() {
  global $current_user;
  get_currentuserinfo();
  $name = $current_user->user_firstname . ' '.$current_user->user_lastname;
  setcookie('member_name', $name,time()+60*60*20,'/');   // 20 hours
}
add_action( 'init', 'set_user_cookie'); 
```

然后很容易在我的非 wp 页面中检索 cookie 信息

# multithreading - perl Thread::Queue 没有使所有项目出队

> ID：13444792
> 
> 赞同：2
> 
> 时间：2012-11-18T21:27:48.813
> 
> 标签：multithreading, perl

我正在使用 perl 的[Thread::Queue](https://metacpan.org/module/Thread::Queue)模块来保持线程池忙于为我正在研究的简单爬虫下载 url。使用`Thread::Queue`，我将哈希引用列表（准确地说是 360）排入队列，其中每个哈希包含有关单个 url 的信息：

```
#set up thread queue
my $THREADS=30; # Number of threads
my $url_q = Thread::Queue->new(); # Work to do
my $url_arr = urls();

my $count = 0;
for(@$url_arr) { 
    print "ENQUEUEING $_->{'url'}\n";
    $url_q->enqueue($_);
    $count++;
}

print "COUNT $count\n";
print "QUEUE COUNT " . $url_q->pending() . "\n";

threads->create( sub { 
            while(my $url_h = $url_q->dequeue()) { 
                print "url: $url_h->{'url'}\n\n";
                print "PENDING: " . $url_q->pending() . "\n";
                process_url($url_h);
            }
        }) for (1..$THREADS);   

$url_q->end;
print "WAITING\n";
$_->join() for threads->list;
print "DONE WAITING\n"; 
```

问题是我看到所有 360 个 url 都被排入队列，但是我只看到挂起的数字下降到 260 左右，这意味着只有大约 100 个真正得到评估，而 260 永远不会这样做？我用 Thread::Queue 做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T19:56:03.443

你确定你没有看到任何错误？当我运行您的代码时，我看到“无法通过包“Thread::Queue”找到对象方法“end””。查看 Thread::Queue 的文档，我没有看到任何关于 end 函数的提及，所以这可能是您的代码中的一个错误。在我的测试中，每当调用 $url_q->end 时，“PENDING”计数器都会停止，这取决于您的计算机速度、当前负载以及它如何调度线程。可能是在你的盒子上，这发生在大约 260 处。

# java - 在java中使用并发线程

> ID：13444794
> 
> 赞同：0
> 
> 时间：2012-11-18T21:28:08.033
> 
> 标签：java, multithreading, concurrency, awt

我有一个程序（一个 AWT 框架，是的，我知道 Swing 更好，但我被限制使用它）有 2 个移动对象。所以我想我会把每个都放在自己的线程中，以允许对象以不同的速度移动，等等。

一个线程 ( `gameThread`) 处理弹跳球，另一个线程 ( ) 处理`cannonThread`画在屏幕上的大炮和它发射的弹丸。我不确定如何区分球的速度和弹丸的速度，这就是为什么我认为 2 个线程可以工作（通过使用`thread.sleep(speedofobject)`）。

我不知道如何实现它们，而且我的随机猜测（显然）没有用。屏幕上什么也没有显示，编译时也没有产生错误。以前，球会出现在屏幕上并按应有的方式移动。

这是我尝试执行多个线程的片段。如果您需要更多信息，请告诉我，我会发布。

```
public void start()
{
    if (gameThread == null)
    {
        gameThread = new Thread(this);
        gameThread.start();
    }
    if (cannonThread == null)
    {
        cannonThread = new Thread(this);
        cannonThread.start();
    }       
}

public void run()
    {
        //thread for the ball, collision detection and scorekeeping
        if (Thread.currentThread().equals(gameThread))
        {
            Thread.currentThread().setPriority(Thread.MAX_PRIORITY);
            while (!kill)
            {
                if (!paused)
                {
                    target.repaint();
                }
                try
                {
                    Thread.sleep(ballSpeed);
                }
                catch(InterruptedException e){System.err.println("Interrupted.");}
            }
            stop(); 
        }

        //thread for the cannon and projectile
        if (Thread.currentThread().equals(cannonThread))
        {
            Thread.currentThread().setPriority(Thread.NORM_PRIORITY);
            if (!paused)
            {
                if (projectileFiring)
                {
                    cannon.repaint();
                }
                try
                {
                    Thread.sleep(projectileSpeed);
                }
                catch(InterruptedException e){System.err.println("Interrupted.");}
            }
        }   
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:36:49.027

为您的世界中的每个对象设置一个单独的线程并不是要走的路。解决此问题的一种方法是拥有一个单独的线程，负责更新“世界模型”（在您的情况下，是球和大炮）。这个世界模型线程将运行以下动画循环：

1.  睡一小会
2.  根据当前时间更新代表球和大炮的数据
3.  表示需要使用当前模型更新 UI

请注意，使用这种方法，您将需要同步对模型数据的访问，因为它将由动画循环在一个线程中更新，并由渲染代码读取以更新 UI。您不希望数据在阅读时发生变化。

# objective-c - iOS 上的 GLKView 快照性能问题

> ID：13444799
> 
> 赞同：2
> 
> 时间：2012-11-18T21:29:23.970
> 
> 标签：objective-c, ios5, opengl-es, opengl-es-2.0, glkit

我需要从 GLKView 中检索屏幕图像并调整其大小并将其发送到网络以提供 Led 矩阵。所以有了这个要求，我需要每 30 毫秒拍摄一次 GLKView 的快照。我遇到的问题是我的 iPad 需要大约 150 毫秒才能继续：

```
UIImage *snap = [(GLKView *)self.view snapshot] ; 
```

我正在寻找这种快照方法的更快/更好的替代方法来检索屏幕截图。

感谢您的帮助，问候，克里斯托夫。

# c++ - 对虚拟基类析构函数的“未定义引用”

> ID：13444800
> 
> 赞同：35
> 
> 时间：2012-11-18T21:29:24.703
> 
> 标签：c++, abstract-class, undefined-reference

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我有一些 Java 经验，现在正在学习 C++ 课程。我想尝试编写一个接口，但我遇到了一些我无法解决的析构函数问题，即使在互联网上的帮助下......这是我的代码：

```
 class Force {

    public:

    virtual ~Force();
    virtual VECTOR eval(VECTOR x, double t);

};

class InvSquare : public Force {

    public:

    InvSquare(double A) {

        c = A;

    }

    ~InvSquare(){};

    VECTOR eval(VECTOR x, double t) { // omitted stuff }

    private:
    double c;

}; 
```

我试图为基类声明一个虚拟析构函数，为派生类声明一个非虚拟析构函数，但我收到一条错误消息，提示“未定义对‘Force::~Force()’的引用”。这是什么意思，我该如何解决？

如果这是一个愚蠢的问题，请原谅我！

非常感谢你的帮助，夜光

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-18T21:33:44.567

您已经声明了析构函数，但没有定义它。将声明更改为：

```
virtual ~Force() {} 
```

定义它什么都不做。

您还希望使抽象接口中的所有函数都成为*纯虚拟*函数，否则也需要定义它们：

```
virtual VECTOR eval(VECTOR x, double t) = 0; 
```

# iphone - 如何使用 NSTimer，启动/停止？

> ID：13444803
> 
> 赞同：0
> 
> 时间：2012-11-18T21:29:42.770
> 
> 标签：iphone, objective-c, animation, timer, nstimer

我将如何使用 NSTimer 每秒执行一次操作？

关于尼基塔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T21:35:13.000

这样用，

```
-(void)fireTimer{
   [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selected(timeOut:) userInfo:nil repeats:YES];
} 
```

现在，这将每 1 秒调用一次你的 timeOut: 选择器，然后在 timeOut 中调用：

```
-(void)timeOut:(NSTimer*)timer{
   static int count = 0;
   count++;
   if(count == 60){
     [timer invalidate]; 
     timer = nil;
   }
} 
```

有很多api。我希望您想查看[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)。

# javascript - 尝试从外部主应用程序激活 Win 8 应用程序时出现应用程序未定义错误

> ID：13444804
> 
> 赞同：0
> 
> 时间：2012-11-18T21:29:57.473
> 
> 标签：javascript, search, windows-8

我正在使用 Windows 8 搜索合同功能，特别是在将搜索合同添加到项目时创建的默认 searchResults.js 文件。当我尝试搜索处于暂停或终止状态（即不是主窗口）的应用程序时，就会出现我的问题。

代码如下：

```
// Handles when a users performs a search and the app is not already the main app
WinJS.Application.addEventListener("activated", function (args) {
    //If activation kind is search...
    if (args.detail.kind === appModel.Activation.ActivationKind.search) {

        args.setPromise(ui.processAll().then(function () {
            // If there is no current navigation  location 
            if (!nav.location) {
                // Declare object
                nav.history.current = { location: Application.navigator.home, initialState: {} };
            }
            // Else navigate to searchPageURI, 
            return nav.navigate(searchPageURI, { queryText: args.detail.queryText });
        }));
    }
}); 
```

我自己添加了注释以尝试分解代码。现在我理解了这个前提，这段代码检查应用程序是如何被激活的，并根据它们是否是现有的导航位置来运行两个不同的进程。但是，当我运行该应用程序并从外部搜索时，我收到一个错误，即：`JavaScript runtime error: 'Application' is undefined`. 它指的是以下行：

```
nav.history.current = { location: Application.navigator.home, initialState: {} }; 
```

有人可以解释为什么会发生这种情况以及我已经定义了什么，或者我应该在哪里定义它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T18:47:23.373

确保你包括

```
<script src="/js/navigator.js"></script> 
```

在 default.html 上

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T09:44:33.913

看来这是一个仅在您使用将内置“搜索合同”添加到空白项目时才会发生的问题。如果您将搜索合同与其他类型的项目模板一起添加，它显然可以工作。

我在空白模板中修复它的解决方案是删除`Application.`，只留下`Navigator.home`. 我不得不承认我并不完全理解它为什么会起作用，但是一旦我这样做了，我就能够再次编译我的项目。

如果有人可以更新它并解释为什么它会起作用，我相信随着 Win 8 开发的兴起，它可能对其他开发人员有所帮助。

# jquery - jQuery 悬停仅适用于第二次悬停

> ID：13444805
> 
> 赞同：1
> 
> 时间：2012-11-18T21:30:21.327
> 
> 标签：jquery, html, css, function

我是 jQuery 新手，我的 .hover 函数有问题。当我第一次将鼠标悬停在图像上时，动画确实可以工作，但是当我再次将鼠标悬停在它上面时，它可以正常工作。谢谢你的帮助。您可以在 zacknoblauch.com 上查看实时示例这是我的代码：

html:

```
<div class="home_post_box">

    <?php } ?>

        <?php the_post_thumbnail('home-image'); ?>

            <div class="home_post_text">

                <a href="<?php the_permalink(); ?>"><h3><?php the_title(); ?></h3></a>

                <a href="<?php the_permalink(); ?>"><p class="home_post_text_back">check it out >></p></a>

            </div><!--//home_post_text-->

    </div><!--//home_post_box--> 
```

CSS：

```
.home_post_text {
background-color: #50D07D;
width: 320px;
height: 200px;
padding: 0;
position: absolute;
bottom: 0;
left: 0;
color: #fff;
z-index: 10;
visibility: hidden;
text-decoration: none; 
```

}

```
.home_post_box {
max-width: 320px;
max-height: 200px;
width: 320px;
height: 200px;
margin: 5px;
float: left;
position: relative;
overflow: hidden; 
```

}

jQuery：

```
 $(function(){
        $(".home_post_box").hover(function(){
            $(".home_post_text", this).stop().animate({top:"0px"},{queue:false,duration:1000});
    },

        function() {
            $(".home_post_text", this).stop().animate({top:"200px"},{queue:false,duration:1000});
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:03:53.633

摆脱`visibility: hidden;`并添加`top: 200px;`到 .home_post_text。

```
.home_post_text {
background-color: #50D07D;
width: 320px;
height: 200px;
padding: 0;
position: absolute;
bottom: 0;
left: 0;
color: #fff;
z-index: 10;
text-decoration: none;    
//visibility: hidden;
top: 200px; } 
```

试试看：http: [//jsfiddle.net/viktorb/f24pZ/](http://jsfiddle.net/viktorb/f24pZ/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-18T21:36:28.780

Use closest for Div selection

```
closest( selector  )
    .closest( selector )
    .closest( selector [, context] )
    .closest( jQuery object )
    .closest( element )
closest( selectors [ , context ]  ) 
```

## .closest( selectors [, context] )

$(this).closest("div.first-div").find("div.inside-div");

# css - CSS“引用中的引用”问题

> ID：13444806
> 
> 赞同：3
> 
> 时间：2012-11-18T21:30:51.050
> 
> 标签：css, css-selectors, quotes

我正在尝试找到以下问题的解决方案，如果有的话。

假设主引号是双引号“（开始）和”（结束）。假设第二个引号是一个单引号'（开始）和'（结束）。

想想报价中的报价是如何显示的。

写引号的标准当然是交替的，像这样。

> “双'单'双'单'双'单'双。”</p>

现在，在 HTML 中，你可以这样写：

```
<q>Double <q>single <q>double <q>single </q>double </q>single </q>double.</q> 
```

但是不，如果不应用 CSS 规则，这是行不通的。我不会在这里使用 :lang 伪选择器，所以我只是不使用它。

```
q:before,
q q q:before,
q q q q q:before { content: '“' }

q:after,
q q q:after,
q q q q q:after { content: '”' }

q q:before,
q q q q:before,
q q q q q q:before { content: '‘' }

q q:after,
q q q q:after,
q q q q q q:after { content: '’' } 
```

你知道这是怎么回事，对吧？qs 累加起来。

所以现在有两个选择：要么我没有看到以正确顺序选择 q 元素的合乎逻辑的方式，要么就是不可能。

PS：我知道在引用中引用引用中引用引用是非常理论的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T05:17:40.363

CSS2.1 具有专门为处理[引号](http://www.w3.org/TR/CSS21/generate.html#quotes)而设计的功能。特别是该`quotes`属性对嵌套有基本的支持，但它只能支持任意深度的嵌套，而不支持递归或重复嵌套。

因此，虽然目前还没有涵盖所有嵌套级别的 CSS 解决方案，但您可以根据需要尽可能深地指定引号，同时从选择器中的硬编码嵌套元素`:before`和`:after`伪元素中节省相当多的字节：

```
q { quotes: '“' '”' '‘' '’' '“' '”' '‘' '’' '“' '”' '‘' '’' '“' '”' '‘' '’'; }

/* 
 * These should already be in the default UA stylesheet per HTML specs
 * so you should not have to include them, but some older browsers may forget.
 */
q:before { content: open-quote; }
q:after { content: close-quote; } 
```

您无需担心浏览器支持，因为 HTML`q`元素和 CSS`quotes`属性与 for`:before`和`:after`.

目前还没有任何 CSS3 模块在积极开发中通过报价生成来解决这个问题，但希望我们很快就会看到一些东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T21:39:53.493

没有办法编写一个规则来捕获第 1、第 3、第 5 等与第 2、第 4、第 6 层相同的嵌套元素，递归地用于任何*n*层。

除了理论问题之外，您还必须设置类和/或使用 javascript。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T21:40:53.300

我不能让它只与 CSS 选择器一起工作`nth-child(odd)`，`nth-child(even)`因为它们是嵌套的，但使用 jQuery 是可能的：

首先定义你的 CSS 类：

```
.e:before {content:'“'}
.o:before {content:'‘'}
.e:after {content:'”'}
.o:after {content:'’'} 
```

然后使用 jQuery 将类添加到每个偶数/奇数引号中：

```
$("q:odd").addClass('o');
$("q:even").addClass('e'); 
```

[演示](http://jsbin.com/upofun/1/edit)

相关问题：

*   [CSS指的是每一个奇怪的嵌套孩子？](https://stackoverflow.com/questions/8499496/css-refer-to-every-odd-nested-child)
*   [在 Chrome 中嵌套 nth-child 的 querySelector 似乎不起作用](https://stackoverflow.com/questions/6345358/queryselector-with-nested-nth-child-in-chrome-doesnt-appear-to-work)

# c++ - 每年自动更改年龄

> ID：13444807
> 
> 赞同：-1
> 
> 时间：2012-11-18T21:30:52.510
> 
> 标签：c++

> **可能重复：**
> [如何每年自动更改年龄](https://stackoverflow.com/questions/13444390/how-to-change-the-age-automatically-every-year)

我写了这个程序，但我有一个变量“年龄”。我如何做到这一点，这样我就不必每年改变狗的年龄？换句话说，它应该自动改变？

```
#include <iostream>
#include <conio.h>
#include <string>
#include <stdlib.h>

using namespace std;

class Dog//instance class
{
string Fam;
string & Name;
//string  Name;
string Otch;
static string mField;
unsigned int    Nagradi;
unsigned int    Age;
public:

Dog(string fam="", string otch="", string nam="", 
unsigned nagradi=0, unsigned age=0):Fam("")
    ,Name(Fam)
{
    cout << "Dog::Dog(" << nam << ")" << endl;
    Name = nam;
    Otch = otch;
    Fam  = fam;
    Nagradi = nagradi;
    Age = age;
}

Dog(Dog const & st): Name(Fam)//constructor
{
    cout << "Dog::Dog(copy:" << st.Name << ")" << endl;
    Name = st.Fam;
    Otch = st.Name;
    Fam  = st.Otch;
    Nagradi = st.Nagradi;
    Age = st.Age;
}

~Dog()//Destructor
{
    cout << "Dog::~Dog(" << Name << ")" << endl;
     system ("pause");
      }

void Show()
{
    cout<< Name << ' ' << Fam << ' ' << Otch <<
           " #" << Nagradi << " age:" << Age << endl;
}
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T21:32:09.353

存储出生日期而不是年龄，然后在需要时计算年龄。

就像上次你问这个问题时有人说的那样。请不要重复同样的问题。

# objective-c - UI 设置代码在哪里？

> ID：13444810
> 
> 赞同：0
> 
> 时间：2012-11-18T21:31:30.190
> 
> 标签：objective-c, ios, uibutton

在呈现程序之前，我有一些代码可以在我的视图中设置按钮。设置按钮后，在程序执行的其余部分对 UI 没有其他更改。这段代码应该放在 viewDidLoad 中吗？

这是我指的代码类型：

```
UIButton *buyerButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
buyerButton.frame = CGRectMake(leftSide, topSide+(c-1)*(buttonHeight+interButtonHeight), buttonWidth, buttonHeight);
[buyerButton setTitle:thisName forState:UIControlStateNormal];
[self.view addSubview:buyerButton]; 
```

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:36:04.537

如果“设置”是指创建（alloc/init），那么您应该在`awakeFromNib:`（如果您的视图控制器是从 nib 加载）或`loadView`（如果您自己创建所有 GUI）中进行。

如果您实际上是指设置（并且按钮已经从笔尖添加），那么可以，您可以在`viewDidLoad`.

# ruby - 带有AND运算符的红宝石正则表达式

> ID：13444811
> 
> 赞同：0
> 
> 时间：2012-11-18T21:31:45.923
> 
> 标签：ruby, regex

我有一个正则表达式可以检测字符串何时不是给定的模式：

```
/\A((?!.*(www|http|@|\.com\b|\.net\b|\.de\b|\.info\b)).*)$/m 
```

这意味着像“hi you at www.test.com”这样的字符串是 FALSE 但现在我想允许一个 URL：www.example.com。

它的意思是：

“这是一个测试”> TRUE

“这是一个测试**www.example.com** ” > TRUE

“这是一个测试**example.com**这个”> TRUE

“这是一个测试**www.test.com**这个” > FALSE

“这是一个测试**test.com**这个” > FALSE

"this is a test **test.com** this **www.example.com** " > FALSE（错误，因为存在一个禁止的 URL）

看来我需要包含一个 AND 运算符，我认为它是：

```
(?=.*PATTERN) 
```

但不幸的是我无法让它工作。

ps：我知道这个检测url的正则表达式一点也不完美，但是因为我的要求，它总比没有好。

谢谢 ！

编辑：我的正则表达式位于验证器中：

```
def self.validates_is_url_and_email_free(*attr_name)
    validates_format_of attr_name, {:with => /\A((?!.*(www|http|@|\.com\b|\.net\b|\.de\b|\.info\b)).*)$/m, :message => I18n.t(:not_url_email)}
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:53:11.097

在这种情况下，使用两个单独的表达式可能是解决方案：

```
OKAY_EXPR = /example\.com/
BANNED_EXPR = /.../ # Existing expression

if (string.match(OKAY_EXPR) and !string.match(BANNED_EXPR))
  # ...
end 
```

不清楚您在这里做什么，但这似乎是一组极其严格的 TLD。实际上有数千个可能需要处理的[有效 TLD 。](http://publicsuffix.org/list/)

# python - Python中的请求URL

> ID：13444814
> 
> 赞同：0
> 
> 时间：2012-11-18T21:32:04.120
> 
> 标签：python, curl, solr, request

要触发更新，您必须访问浏览器中的 url。这个脚本是在 shell 中制作的：

```
#!/bin/bash
# Bash to initiate Solr Delta Import Handler

# Setup Variables
hostName=localhost
portNum=8080
SOLRPATH=/solr
SOLR='delta-import&clean=false'
STATUS='dataimport?command=status'
urlCmd='http://${hostName}:${portNum}${SOLRPATH}/dataimport?command=${SOLRCMD}"

# Operations
curl $URLCMD 
```

我试图用 Python 写这个，这就是我得到的结果：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

# Setup Variables
hostName='localhost'
portNum='8080'
SOLRPATH='/solr'
SOLRCMD='delta-import&clean=false'
STATUSCMD='dataimport?command=status'
urlCmd='http://${hostName}:${portNum}${SOLRPATH}/dataimport?command=${SOLRCMD}'

# Alternative to Curl {URLCMD} 
```

所以基本上我有两个问题：

1.  到目前为止我的python代码还好吗？
2.  python中Curl的简单替代品是什么？该事件通常仅通过访问 URL 来触发，但我不知道如何简单地在 Python 中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:46:15.190

首先，在 Python 中使用其中一种字符串格式：

```
urlCmd='http://{0}:{1}{2}/dataimport?command={3}'.format(hostName,portnum, SOLRPATH, SOLRCMD)
#or
urlCmd='http://%s:%s%s/dataimport?command=%s' % (hostName,portnum, SOLRPATH, SOLRCMD) 
```

虽然 python 中有使用 libcurl 的[pycurl](http://pycurl.sourceforge.net/)`urllib2` ，但如果您希望脚本保持可移植性，您应该使用内置模块，例如访问您生成的 URL。

```
import urllib2
req = urllib2.urlopen(urlCmd) 
```

现在，您可以对您的请求做几件事：

```
req.close      req.fileno     req.getcode    req.headers    req.msg  
req.read       req.readlines  req.code       req.fp         req.geturl   
req.info       req.next       req.readline   req.url 
```

虽然大多数方法都是不言自明的，但请参阅[urllib2 文档](http://docs.python.org/2/library/urllib2.html)以获取有关它们作用的详细说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T21:42:18.473

> 1.  到目前为止我的python代码还好吗？

不，这不对。请查看 Python 中的字符串格式。

试试这个：

```
...
urlCmd='http://%s:%d%s/dataimport?command=%s' % (hostName, portNum, SOLRPATH, SOLRCMD) 
```

> 1.  python中Curl的简单替代品是什么？该事件通常仅通过访问 URL 来触发，但我不知道如何简单地在 Python 中执行此操作。

试试这个[`urllib`](http://docs.python.org/2/library/urllib.html)模块：

```
import urllib    
urllib.urlopen(url) 
```

# java - Java spring + hibernate 接口（DAO）

> ID：13444815
> 
> 赞同：2
> 
> 时间：2012-11-18T21:32:06.727
> 
> 标签：java, spring, hibernate

这是一个非常简单的 spring + hibernate 示例。我在这里做错了什么？

DTO：

```
package com.xx.dto;

import java.util.Date;
import javax.persistence.*;

@Entity
@Table(name = "users")
public class UserData {

    @Id
    @GeneratedValue
    @Column(name = "id")
    private Integer id;

    @Column(name = "user_firstname")
    private String firstname;

    @Column(name = "user_lastname")
    private String lastname;

    @Column(name = "user_sex")
    private String sex;

    @Column(name = "user_birthdate")
    private Date birthDate;

    @Column(name = "user_email")
    private String email;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getFirstname() {
        return firstname;
    }

    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }

    public String getLastname() {
        return lastname;
    }

    public void setLastname(String lastname) {
        this.lastname = lastname;
    }

    public String getSex() {
        return sex;
    }

    public void setSex(String sex) {
        this.sex = sex;
    }

    public Date getBirthDate() {
        return birthDate;
    }

    public void setBirthDate(Date birthDate) {
        this.birthDate = birthDate;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }
} 
```

DAO接口：

```
package com.xx.dao;

import java.util.List;
import com.provisori.dto.UserData;

public interface UserDataDao {

    void saveUser(UserData user);

    void deleteUser(String key);

    void updateUser(UserData user);

    List<UserData> listUser();
} 
```

DAO 实现：

```
package com.xx.imp;

import java.util.List;
import org.hibernate.Criteria;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.criterion.Restrictions;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.transaction.annotation.Transactional;
import com.provisori.dao.UserDataDao;
import com.provisori.dto.UserData;

public class UserDataImp implements UserDataDao{

    @Autowired
    SessionFactory sessionFactory;

    @Transactional
    @Override
    public void saveUser(UserData user) {
        sessionFactory.getCurrentSession().save(user);
    }

    @Transactional
    @SuppressWarnings("unchecked")
    @Override
    public List<UserData> listUser() {
        return sessionFactory.getCurrentSession()
                .createCriteria(UserData.class).list();
    }

    @Transactional
    @Override
    public void updateUser(UserData user) {
        sessionFactory.getCurrentSession().update(user);

    }

    @Transactional
    public UserData getUser(String key) {
        Session session = sessionFactory.getCurrentSession();
        Criteria criteria = session.createCriteria(UserData.class);
        criteria.add(Restrictions.eq("key", key));
        return (UserData) criteria.uniqueResult();
    }

    @Transactional
    @Override
    public void deleteUser(String key) {
        UserData user = getUser(key);
        sessionFactory.getCurrentSession().delete(user);
    }
} 
```

春天.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
      http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
      http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <!-- Needed for Autowiring -->
    <context:annotation-config />

    <!-- MySQL DataSource -->
    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
        <property name="driverClass" value="com.mysql.jdbc.Driver" />
        <property name="jdbcUrl" value="jdbc:mysql://localhost:3306/xx" />
        <property name="user" value="root" />
        <property name="password" value="" />
    </bean>

    <!-- Hibernate SessionFactory -->
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>com.provisori.dto.UserData</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <value>
                hibernate.hbm2ddl.auto=update
                hibernate.dialect=org.hibernate.dialect.MySQL5Dialect
            </value>
        </property>
    </bean>

    <!-- Transaction Management -->
    <tx:annotation-driven transaction-manager="txManager" />
    <bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <!-- Java Bean -->
    <bean id="userDataDao" class="com.provisori.imp.UserDataImp" />

</beans> 
```

主类

```
package com.provisori.dto;
import org.springframework.context.support.AbstractApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.provisori.dao.UserDataDao;
import com.provisori.imp.UserDataImp;

public class TestMain {

   public static void main(String[] args) {

      // Construct the spring application context
      AbstractApplicationContext context = new ClassPathXmlApplicationContext("spring.xml");

      // Register hook to shutdown Spring gracefully
      // See http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-shutdown
      context.registerShutdownHook();

      // Get the business bean from context
      UserDataDao dao = (UserDataImp) context.getBean("userDataDao");

      // Create simple property objects
      UserData user = new UserData();
      user.setFirstname("firstnameTest");
      user.setLastname("lastnameTest");
      dao.saveUser(user);
   }
} 
```

结果

线程“主”java.lang.ClassCastException 中的异常：$Proxy13 无法在 com.provisori.dto.TestMain.main(TestMain.java:21) 处转换​​为 com.provisori.imp.UserDataImp

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T21:33:47.633

错误是一个很好的指标——接口不能被实例化。使用 bean 实现：

```
<bean id="userDataDao" class="com.provisori.imp.UserDataImp"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T21:41:35.347

您无法实例化接口。

你的代码：

```
<!-- Business Bean -->
<bean id="userDataDao" class="com.provisori.dao.UserDataDao">  
    <property name="userDataImp" ref="userDataImp" />  
</bean>
<bean id="userDataImp" class="com.provisori.imp.UserDataImp" /> 
```

您需要删除第一个名为`userDataDao`. 我建议您阅读 Spring Docs，因为您可能不了解/了解 Spring IoC 容器基础知识。

文档是你的朋友：[阅读](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/)

编辑**在您更改源代码后，您的问题中的堆栈跟踪：**

你的代码：

```
UserDataDao dao = (UserDataImp) context.getBean("userDataDao"); 
```

尝试将其更改为：

```
UserDataDao dao = (UserDataDao) context.getBean("userDataDao"); 
```

您当前的错误是由 Spring 生成的代理类引起的，该代理类不是其子类，`UserDataImp`但它实现了相同的接口。所以它不能被投射到你的具体实现中。相反，您需要用户界面。

# c++ - 子弹物理，Visual Studio 中的链接错误

> ID：13444816
> 
> 赞同：14
> 
> 时间：2012-11-18T21:32:07.250
> 
> 标签：c++, visual-studio, linker, visual-studio-2012

我在 Windows 7 和 Visual Studio 2012 上使用 Bullet Physics。我已经编译了库，并且演示工作正常，但是当我尝试创建自己的解决方案时，出现链接错误。我已将代码量降至最低

```
#include "btBulletDynamicsCommon.h"
int main(int argc, char*argv[])
{
    btBoxShape* box = new btBoxShape(btVector3(1, 1, 1));
    return 0;
} 
```

当我链接时，使用 Visual Studio 会给我以下错误：

```
1>------ Build started: Project: HelloBulletApp, Configuration: Release Win32 ------  
1>  main.cpp  
1>  main.obj : MSIL .netmodule or module compiled with /GL found; restarting link with /LTCG;   add /LTCG to the link command line to improve linker performance
1>BulletCollision.lib(btCollisionShape.obj) : error LNK2038: mismatch detected for   'RuntimeLibrary': value 'MT_StaticRelease' doesn't match value 'MD_DynamicRelease' in main.obj
1>BulletCollision.lib(btConvexShape.obj) : error LNK2038: mismatch detected for   'RuntimeLibrary': value 'MT_StaticRelease' doesn't match value 'MD_DynamicRelease' in main.obj
1>BulletCollision.lib(btPolyhedralConvexShape.obj) : error LNK2038: mismatch detected for   'RuntimeLibrary': value 'MT_StaticRelease' doesn't match value 'MD_DynamicRelease' in main.obj
1>BulletCollision.lib(btConvexPolyhedron.obj) : error LNK2038: mismatch detected for   'RuntimeLibrary': value 'MT_StaticRelease' doesn't match value 'MD_DynamicRelease' in main.obj
1>LinearMath.lib(btConvexHullComputer.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MT_StaticRelease' doesn't match value 'MD_DynamicRelease' in main.obj
1>LinearMath.lib(btGeometryUtil.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MT_StaticRelease' doesn't match value 'MD_DynamicRelease' in main.obj
1>LINK : warning LNK4098: defaultlib 'LIBCMT' conflicts with use of other libs; use /NODEFAULTLIB:library
1>c:\path\to\HelloBulletApp\HelloBulletApp\Release\HelloBulletApp.exe : fatal error LNK1319: 6 mismatches detected 
```

当我在调试或发布模式下构建时，会出现相同的错误。我尝试过：
- 重建项目符号 2.81，
- 重新下载 2.81，
- 创建一个空白项目并添加库，
- 创建一个空白项目并按照 [http://bulletphysics.org/mediawiki-1.5.8/中的建议添加项目index.php/Creating_a_project_from_scratch](http://bulletphysics.org/mediawiki-1.5.8/index.php/Creating_a_project_from_scratch)，但无济于事。

有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-18T21:41:23.407

看起来 BulletCollision.lib 被编译为与 C 运行时库 (/MD) 的 DLL 版本链接，但您正在编译为与静态链接的运行时库 (/MT) 链接。更改编译器选项以链接 DLL 运行时库。

# java - java，打印输出模式

> ID：13444818
> 
> 赞同：1
> 
> 时间：2012-11-18T21:32:10.890
> 
> 标签：java

我正在尝试计算模式的数量，并将模式作为输出，但我遇到了一些困难。你能帮帮我吗？

```
public class Main{
    public static void main(String[] args){

        int modes;
        int terval = -1;
        int[]a;

        while(a != terval){                     //problem is in this line and after.
            a = IO.readInt[];              

            for(int i = 0; i < a.length; i++){
                int count = 0;
                for(int j = 0;j < a.length; j++){
                    if(a[j] == a[i])
                        count++;        
                }
                modes = a[i];
            }
        }
        System.out.println(count);
        System.out.println(modes);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:35:17.770

This line: `while(a != terval)` contains a compilation error.

1.  `int[] a` was never initialized so it has a `null` a value when the loop begins.

2.  `int[] a` is an integer array and `int terval` is an integer. The conditional `a != terval` is undefined because you cannot compare an int array to an int.

*Undefined Comparison:* `int[] != int`

You can compare a single integer in the integer array to another single integer

*Defined Comparison:* `int[x] != int`

This would work: `a[x] != terval` where `x` is an array index you want to check

**Consider this revision:**

```
public class Main{
public static void main(String[] args){

boolean go = true; //controls master loop
int modes;
int terval = -1;
int[]a;

while(go) { //master loop
    a = IO.readInt[];              
    for(int i = 0; i < a.length; i++){
      go &= !(a[i] == -1); //sets go to false whenever a -1 is found in array
                           //but the for loops do not stop until 
                           //the array is iterated over twice
      int count = 0;
      for(int j = 0;j < a.length; j++){
        if(a[j] == a[i])
            count++;        
      }
      modes = a[i];         
    }
}
System.out.println(count);
System.out.println(modes);

} 
```

**To get user input from the Console:**

```
import java.util.Scanner;
public class Main{

  public static void main(String[] args){

    Scanner in = new Scanner(System.in);
    boolean go = true;
    int modes;
    int count;
    int size = 32; //max array size of 32
    int terval = -1;
    int t=0;
    int i=0;
    int[] a = new int[size]; 

    while(go && i < size) { //master loop
      t = in.nextInt();
      go &= !(t == terval);
      if (go) { a[i++] = t; }  
    }
    // "a" is now filled with values the user entered from the console
    // do something with "modes" and "count" down here
    // note that "i" conveniently equals the number of items in the partially filled array "a"
  }
} 
```

# xcode - Xcode 错误 -19011

> ID：13444825
> 
> 赞同：0
> 
> 时间：2012-11-18T21:32:42.870
> 
> 标签：xcode

我是 Xcode 的新手，我刚刚完成了我的第一个 iPhone 应用程序的创建。我现在正在尝试将其存档以发布它。但是，我不断收到此错误：

```
Validate /Users/mannyrothman/Library/Developer/Xcode/DerivedData/LASD_Mobile-avjipewnjellnpgfnksgomejhqim/Build/Intermediates/ArchiveIntermediates/LASDMobile/InstallationBuildProductsLocation/Applications/LASDMobile.app
    cd "/Users/mannyrothman/Documents/LASD Mobile copy"
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    setenv PRODUCT_TYPE com.apple.product-type.application
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/Validation /Users/mannyrothman/Library/Developer/Xcode/DerivedData/LASD_Mobile-avjipewnjellnpgfnksgomejhqim/Build/Intermediates/ArchiveIntermediates/LASDMobile/InstallationBuildProductsLocation/Applications/LASDMobile.app

Unable to validate your application. - (null)Executable=/Users/mannyrothman/Library/Developer/Xcode/DerivedData/LASD_Mobile-avjipewnjellnpgfnksgomejhqim/Build/Intermediates/ArchiveIntermediates/LASDMobile/InstallationBuildProductsLocation/Applications/LASDMobile.app/LASDMobilecodesign_wrapper-4.1: using Apple CA for profile evaluation/Users/mannyrothman/Library/Developer/Xcode/DerivedData/LASD_Mobile-avjipewnjellnpgfnksgomejhqim/Build/Intermediates/ArchiveIntermediates/LASDMobile/InstallationBuildProductsLocation/Applications/LASDMobile.app: valid on disk/Users/mannyrothman/Library/Developer/Xcode/DerivedData/LASD_Mobile-avjipewnjellnpgfnksgomejhqim/Build/Intermediates/ArchiveIntermediates/LASDMobile/InstallationBuildProductsLocation/Applications/LASDMobile.app: satisfies its Designated Requirementtest-requirement: code failed to satisfy specified code requirement(s)codesign_wrapper-4.1: failed to execute codesign(1) - (null) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T23:01:11.193

![@fcpwiz 提供的屏幕](../Images/88dcbf2a0c319679b319a79b00b6e7c7.png)

您的屏幕截图显示 Xcode 的管理器中没有可用的分发配置文件。在 Apple Developer Portal 中创建配置文件，通过“刷新”下载它们，并确保将此配置文件用于您需要的操作。

# iphone - iPhone关闭时是否可以引发事件？

> ID：13444828
> 
> 赞同：2
> 
> 时间：2012-11-18T21:32:49.267
> 
> 标签：iphone, ios

我想做一个在用户尝试关闭其 idevice 时执行某些操作的应用程序。这可能吗？iOS SDK 中是否有针对此的事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:48:09.730

不，这是不可能的。当设备关闭时，没有可用于通知 3rd 方应用程序的 API。

# java - 静态嵌套类如何是静态的，如果是，那么为什么我们必须使用 new 来初始化它？

> ID：13444829
> 
> 赞同：0
> 
> 时间：2012-11-18T21:32:58.867
> 
> 标签：java, static, nested

```
public class MyClass {
public int myclassMember=NestedClass.nestedclassMember; //Compiler error,static reference to a non-static field

    public static class NestedClass {
        public int nestedclassMember=myclassMember; //Compiler error,static reference to a non-static field.
        public NestedClass() {
       }
    }

} 
```

但同时，以下是完全合法的，当然，在消除编译时错误之后 - ：

```
MyClass.NestedClass nestedInstance= new MyClass.NestedClass(); 
```

什么给了？类如何同时是静态和非静态的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T21:41:32.723

`static`在这种情况下，与字段和方法的含义不同。

静态嵌套类是不需要创建任何外部类实例的类。

非静态嵌套类需要创建其外部类的实例，并且具有对该实例的隐式引用（可`TheNameOfTheOuterClass.this`在内部类中使用）。

静态内部类通常用于避免在仅由一个类使用时将类暴露给外部，或者让一个类能够访问外部类的私有字段和方法，或者将一个类的范围限定为另一个类，因为它与它紧密相连。

# c# - 使用 ref 将 C# 属性传递给函数

> ID：13444832
> 
> 赞同：0
> 
> 时间：2012-11-18T21:33:07.420
> 
> 标签：c#, .net, c#-4.0

我在“public ClassA”中有一个 C# 属性，如下所示：//假设存在私有字段

```
public String Test
{
    get
    {
        return _test;
    }
    set
    {
        _test= value;
        OnPropertyChanged("Test");
    }
} 
```

如果我从 ClassA 成员函数更新 Test 的值，我会收到有关其属性更改的通知。

但是，如果我将此属性作为参数传递给属于某个其他类的函数，并从那里更改其值，我不会收到通知。

是因为它是按价值传递的吗？我想我会尝试用 ref 传递它，但这不会编译。

如何将此属性传递给任何函数并仍然收到更改通知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:38:08.990

如果将属性的值作为参数传递给另一个方法，然后更改其值，则属性的值保持不变。

在接收端传递父对象并操作其属性怎么样？毕竟 setter 属于那个对象，而不是它持有的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T21:38:37.733

您提出的建议将导致令人难以置信的臭代码。实现此目的的一种简单方法是调用该函数，并将其返回值分配给您的属性：

```
this.Test = SomeObject.CallSomeFunction(); 
```

这将实现使您的代码保持简洁的目标，并将触发属性更改通知。您可以调用目标函数并将调用者的引用传递给它（`SomeObject.CallSomeFunction(this);`），但在 99% 的情况下，您不应该简单地这样做，以便目标函数可以操纵调用者的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T21:49:05.680

> 是因为它是按价值传递的吗？

是的

> 我想我会尝试用 ref 传递它，但这不会编译

因为只能通过引用传递字段和变量；属性实际上更像方法（实际上是方法对：get/set）。一种解决方法是执行以下操作：

```
string test = Test;
SomeMethod(ref test);
Test = test; 
```

# php - 优化句子消毒剂的正则表达式

> ID：13444836
> 
> 赞同：2
> 
> 时间：2012-11-18T21:33:39.337
> 
> 标签：php, regex, preg-replace

这是一个句子消毒剂。

```
function sanitize_sentence($string) {
    $pats = array(
    '/([.!?]\s{2}),/',      # Abc.  ,Def
    '/\.+(,)/',             # ......,
    '/(!|\?)\1+/',          # abc!!!!!!!!, abc?????????
    '/\s+(,)/',             # abc   , def
    '/([a-zA-Z])\1\1/');    # greeeeeeen
    $fixed = preg_replace($pats,'$1',$string); # apply pats
    $fixed = preg_replace('/(?:(?<=\s)|^)[^a-z0-9]+(?:(?=\s)|$)/i', '',$fixed); # bad chunks
    $fixed = preg_replace( '/([!?,.])(\S)/', '$1 $2', $fixed); # spaces after punctuation, if it doesn't exist already
    $fixed = preg_replace( '/[^a-zA-Z0-9!?.]+$/', '.', $fixed); # end of string must end in period
    $fixed = preg_replace('/,(?!\s)/',', ',$fixed); # spaces after commas
    return $fixed;
} 
```

这是测试语句：

> 你好朋友.....？你好吗 [}}}}}}

它应该返回：

> 你好朋友.....？你好吗

但相反，它正在返回：

> 你好朋友。.. .. ? 你好吗。

所以有两个问题，我找不到解决方案：

1.  这组时期被分成“.. .. .” 由于某些原因。它们应该在问号旁边保留为“.....”。
2.  字符串的结尾必须仅以句点结尾，*并且仅*当字符串中的任何位置至少存在以下字符之一时：**!?,。**（如果在字符串中找不到这些字符中的至少一个，则不应执行 preg_replace）

第二个问题的例子：

> 这句话不需要结束句号，因为找不到提到的字符
> 
> 这句话，需要！为什么？因为它包含至少一个提到的字符

*（当然，结束期只有在不存在的情况下才应该放置）*

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:40:43.540

这是您第一个问题的答案。倒数第三个替换是问题：

```
$fixed = preg_replace( '/([!?,.])(\S)/', '$1 $2', $fixed); # spaces after punctuation, if it doesn't exist already 
```

它将第一个句点与字符类匹配，第二个句点作为非空格字符。然后插入一个空格。由于匹配不能重叠，因此它将匹配第三个和第四个句点并插入一个空格等等。这可能最好像这样固定：

```
$fixed = preg_replace( '/[!?,.](?![!?,.\s])/', '$0 ', $fixed); 
```

以下是您如何处理第二个要求（替换倒数第二个`preg_replace`）：

```
$fixed = trim($fixed);
$fixed = preg_replace( '/[!?.,].*(?<![.!?])$/', '$0.', $fixed); 
```

首先，我们去掉前导和尾随空格，以将此关注点与尾随句点区分开来。然后`preg_replace`将尝试在字符串中找到标点符号，如果找到，它将匹配所有内容，直到字符串结尾。替换将匹配放回原处并附加句点。注意消极的后视。它断言该字符串尚未以句子结尾的标点符号结尾。

# c# - 数据随机不保存可能是什么原因？

> ID：13444842
> 
> 赞同：1
> 
> 时间：2012-11-18T21:33:56.777
> 
> 标签：c#, asp.net-mvc, wcf

我在一个 ASP.NET MVC 网站上工作，并且随机出现了一个问题（而且似乎只在一台服务器上），用户导航到一个包含一些文本字段和一个提交按钮的编辑页面，更改了一些其中一个字段中的有效数据并单击提交按钮，但有时不是保存数据并将用户返回到查看详细信息页面（如预期的那样），编辑页面再次显示并且仅在单击提交按钮后保存再多几次。

鉴于输入到文本框中的数据是有效的，并且鉴于此问题无法在其他服务器或网站的本地开发副本上重现，这可能是什么原因？它可能与服务器上的资源有关吗？

您将如何进行调查以找出导致此问题的原因？

笔记; 无法调试代码，因为它在另一台服务器上。我可以使用相同的数据库，但问题仍然无法重现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:29:41.767

以下是我推荐的步骤：

1.  在相应的控制器中设置断点，就在逻辑的顶部，然后查看传递给控制器​​的内容。然后，按照逻辑向下查看它被踢出的位置。
2.  打开浏览器调试器并查看网络流量。准确查看您发送到控制器的内容。这可能有助于了解更新失败的原因。

# vb6 - Communicating between Basic4android and VB6

> ID：13444843
> 
> 赞同：1
> 
> 时间：2012-11-18T21:34:01.090
> 
> 标签：vb6, basic4android

I would like a simple answer as to how to press a button on an Android (using basic4android), and get a VB6 program to accept the data and respond. Both the Android and the computer running the VB6 program are connected to the same WiFi.

Erel gives me a URL, but after reading for hours, I can't seem to find a SIMPLE example of the Android code and the VB6 code.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T07:12:00.863

我不知道basic4android，但是在电脑上一个简单的VB6项目可以如下：

```
'1 form with :
'  1 textbox : name=Text1
'  1 winsock control : name=Winsock1

Option Explicit

Private Sub Form_Load()
  Text1.Move 0, 0, ScaleWidth, ScaleHeight 'position the textbox
  With Winsock1
    .LocalPort = 5001                      'set the port to listen on
    .Listen                                'start listening
  End With 'Winsock1
End Sub

Private Sub Winsock1_ConnectionRequest(ByVal requestID As Long)
  With Winsock1
    If .State <> sckClosed Then .Close     'close the port when not closed (you could also use another winsock control to accept the connection)
    .Accept requestID                      'accept the connection request
  End With 'Winsock1
End Sub

Private Sub Winsock1_DataArrival(ByVal bytesTotal As Long)
  Dim strData As String
  Winsock1.GetData strData                 'get the data
  ProcessData strData                      'process the data
End Sub

Private Sub Winsock1_Error(ByVal Number As Integer, Description As String, ByVal Scode As Long, ByVal Source As String, ByVal HelpFile As String, ByVal HelpContext As Long, CancelDisplay As Boolean)
  MsgBox Description, vbCritical, "Error " & CStr(Number)
End Sub

Private Sub ProcessData(strData As String)
  Text1.SelText = strData                  'show the data
End Sub 
```

一些评论：

该项目使用监听 winsock 控件来接受连接，因此之后您将不再监听新的连接请求。当您计划发送大量数据时，您可能应该缓冲数据，并在完成时对其进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-30T07:30:23.503

在 VB6 端使用 MSComm 通过 COM 端口之一控制串行通信。OnComm 将捕获接收事件。蓝牙转换器可以连接到端口以处理无线通信。 [https://msdn.microsoft.com/en-us/library/aa259393(v=vs.60).aspx](https://msdn.microsoft.com/en-us/library/aa259393(v=vs.60).aspx)

在 B4A 端，使用串行库通过 RFCOMM（一个虚拟串行 COM 端口）连接蓝牙设备。[https://www.b4x.com/android/help/serial.html](https://www.b4x.com/android/help/serial.html)

# air - FlashBuilder 4.6/Adobe Air - TextInput duplicating letters

> ID：13444845
> 
> 赞同：0
> 
> 时间：2012-11-18T21:34:08.547
> 
> 标签：air, adobe, flash-builder, flash-builder4.5

I am using FB 4.6 to develop an App for both Android and iOS. I have run into a situation with text input fields where on some occasions, when pressing a single letter will actually add multiple characters of the same letter to the text input field. When I attempt to add the next letter, it will duplicate the existing text in the text field and add it on to the text. For example, entering the word, "Adobe" may end up looking something like "AAddAAddoobbAAddoobbee". This issue seems to be isolated to Android.

Here's an example of one of my input fields:

```
<s:TextInput id="email_txt" left="20" top="47" width="316" prompt="Player's Email"    restrict="^'&quot;" focusIn="email_txt_focusInHandler(event)" focusOut="email_txt_focusOutHandler(event)" skinClass="spark.skins.mobile.StageTextInputSkin" softKeyboardType="email" /> 
```

Screenshot:

![enter image description here](../Images/ca69029ab9cae99855d7571e3d1dbd65.png)

Thanks, in advance, for any and all replies.

# asp.net - 在多选 RadComboBox 中设置“选定项目”

> ID：13444846
> 
> 赞同：7
> 
> 时间：2012-11-18T21:34:12.280
> 
> 标签：asp.net, vb.net, telerik, radcombobox

有什么方法可以在多选 RadComboBox 中设置 Selected Items 或 Checked Items ？我想设置服务器回发的值。

我尝试了以下代码，但仅当它不是多选 RadComboBox 时才有效。

`Radbox1.SelectedValue = "123"`

我的前端代码。

`<telerik:RadComboBox ID="Radbox1" runat="server" CheckBoxes="true" EnableCheckAllItemsCheckBox="true" Width="300" Height="200" AutoPostBack="True" OnSelectedIndexChanged="Radbox1_SelectedIndexChanged" />`

我在 Radbox1 中有值，它将从数据库中填充。

谢谢，拉胡尔

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T07:18:20.200

当 Radcombobox 设置为允许通过复选框进行多项选择时，您必须使用每个项目的选中属性。

我在这里使用一个列表来模拟我希望在回发时标记的项目。您可以预先填充此列表，甚至可以从数据库中加载它：

![在此处输入图像描述](../Images/847351bd169689aeffb8b2bd29ef0899.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-23T11:14:47.330

```
protected void RadComboBox1_ItemDataBound(object sender, RadComboBoxItemEventArgs e)
{
    if ("YourString" == e.Item.Text))
    {
        e.Item.Checked = true;
    }
} 
```

或者

```
protected void RadComboBox1_ItemDataBound(object sender, RadComboBoxItemEventArgs e)
{
    List<String> yourStringList = new List<String>() {"string1","string2"};
    if (yourStringList.Contains(e.Item.Text))
    {
         e.Item.Checked = true;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-20T22:39:38.283

我做过这样的事情；**Machine_Serial_Numbers**是一个**Telerik:RadComboBox**；

```
foreach (var machine in bulletinData.Machines)
        {
            var comboItem = Machine_Serial_Numbers.FindItemByValue(machine.Id.ToString());

            if (comboItem != null)
            {
                comboItem.Checked = true;
            }                
        } 
```

这对我有用。

[![在此处输入图像描述](../Images/ff836af0851919dbf1f9f3239cd63bd4.png)](https://i.stack.imgur.com/fvvue.png)

# c# - Access .Net classes from C++?

> ID：13444848
> 
> 赞同：1
> 
> 时间：2012-11-18T21:34:28.040
> 
> 标签：c#, c++, bridge

I'm currently trying to expose a scripting language (similar to Forth, but not quite) written in C++, to C# and vice versa. Exposing C++ to C# is not difficult, and I ***already know how to do that***.

However, I also want to expose .Net classes to the scripting language, as in, access those classes within C++. I would like to keep the code crossplatform, so a method that makes it possible to use it with Mono would be greatly preferred.

A quick google search sort-of implied that this can only be achieved by using Visual Studio, but I'm sure that there has got to be a different way to achieve this?

My apologies if this question is not well-formed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:40:34.803

您可能必须重写部分脚本引擎以使用 .NET 反射来查找名称和调用函数。您可能会发现使用其中一种 .NET 脚本解决方案更容易，但即使不是这样，动态语言运行时也将有助于将您的脚本引擎与它应该提供访问权限的 .NET 类型集成在一起。

# algorithm - Matlab Taking Particular Rows From Matrix

> ID：13444849
> 
> 赞同：0
> 
> 时间：2012-11-18T21:34:32.263
> 
> 标签：algorithm, matlab, matrix, cross-validation

I am working on implementing cross validation at Matlab without using any other functions except for native ones.

I have a matrix like that:

```
1
2
3
..
N 
```

I have a fold size **M**

At first iteration I want to take that:

```
1
2
3
..
N-M 
```

at second iteration:

```
1
2
3
..
.. //Number o f M elements didn't included here
N-M+1
N-M+2
..
N 
```

iterate until I process

```
M+1
M+2
..
N 
```

When I don't include any set of elements I want to assign them into another variable or I want to know indexes so I can process them (this one is better for performance)

Further information about cross validation: [http://en.wikipedia.org/wiki/Cross-validation_(statistics)](http://en.wikipedia.org/wiki/Cross-validation_(statistics))

This graphic explains what I want(form Georgia Tech University slides): ![enter image description here](../Images/6dd19cf0aedeeb475322ed1af1cc0923.png)

I am new to matlab, how can I implement it easily?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:32:10.400

以下代码将分段您的数据，如图所示。

```
K = 5; %Fold size
N = 25; % Number of data points

data = rand(1,N); % Some fake data

testIdxs = reshape(1:N,K, N/k)'; %now each row has the indices for one test set

% All indices that aren't in the test, should belong to the training set. 
trainIdx = zeros(K, N-K);
for ix = 1:N/k
    temp                = 1:25;
    temp(testIdxs(ix,:)) = [];
    trainIdx(ix,:)      = temp;
end 
```

请记住，此方法仅在 N 是 K 的倍数时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T23:03:23.137

一般来说，交叉验证可以通过函数[crossvalind](http://www.mathworks.in/help/bioinfo/ref/crossvalind.html)来完成。

你可以这样做

```
Indices = crossvalind('Kfold', matrix , M) 
```

# jquery - Query String to Control BXSlider startSlide

> ID：13444854
> 
> 赞同：0
> 
> 时间：2012-11-18T21:35:20.930
> 
> 标签：jquery, string, bxslider

I am trying to have the start slide on bxslider controlled by a query string. For example, the url [http://page.html?id=3](http://page.html?id=3) would start slide three and the user could then advance the slides in an infinite loop. The code I currently have is:

```
$(document).ready(function(){
$('.bxslider').bxSlider({
  startSlide: 0,
  infiniteLoop: true,
  });
}); 
```

I am not sure how to pull the query string value and then insert its value into the startSlide. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:20:00.580

您可以手动从中提取 id `window.location.search`。或者使用一些带有`deparam`函数的库。

```
$(function(){
var search = window.location.search.substr(1),
    params = $.map(search.split('&'), function(item) {
         var matches = item.split('=');
         return { name: matches[0], value: matches[2]};
    }),
    id = parseInt($.grep(params, function(param){
        return param.name === 'id';
    }).value, 10);

$('.bxslider').bxSlider({
  startSlide: id - 1, //zero based
  infiniteLoop: true,
  });
}) 
```

# jquery-mobile - 自 jquery mobile 1.2.0 以来，按钮不在文本输入的右侧

> ID：13444856
> 
> 赞同：1
> 
> 时间：2012-11-18T21:35:27.607
> 
> 标签：jquery-mobile

升级到 jquery mobile 1.2.0 后，我无法将按钮放在文本输入字段的右侧。

```
<div data-role="fieldcontain">
        <fieldset data-role="controlgroup" data-type="horizontal">
             <input type="text" data-inline="true"/>
             <button data-inline="true" data-theme="b">Send</button>
         </fieldset>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:46:22.247

我修复了删除 data-type="horizo​​ntal" 并添加了一个带有 style="float: right;" 的类 到按钮。

# php - 如何从 jQuery 将对象（或数组）传递给 PHP？

> ID：13444857
> 
> 赞同：2
> 
> 时间：2012-11-18T21:35:34.387
> 
> 标签：php, javascript, jquery

我有一个数组，我试图将它传递给一个正在传递的 php 文件，但它将数组显示为一个字符串。如何将字符串转换为数组，以便可以在 php 中遍历它？这是我的代码：

**jQuery**

```
$('#add-child').click(function()
{
    var _attributes = [];
    $('#attributes input').each(function()
    {
        _attributes.push($(this).val());
    });
    $.post('../assets/hub.php',{'task':'add-child','parent':$('#parent-id').val(),'value':$('#child-value').val(),'attributes':JSON.stringify(_attributes)},function(callback)
    {
        console.log(callback);
    });
}); 
```

**PHP**

```
case 'add-child':
    $department = $_POST['parent'];
    $category   = $_POST['value'];        
    $attributes = $_POST['attributes'];
    print($department.' : '.$category.' : '.$attributes);
break; 
```

**电流输出**

```
test1 : test2 : ["sdfg","34","vsdf"] 
```

** 编辑 **

我删除`JSON.stringify()`并添加了`var_dump()`，这是输出：

```
string(3) "114"
string(4) "asdf"
array(3) {
    [0]=>
    string(4) "asdf"
    [1]=>
    string(4) "ZVCX"
    [2]=>
    string(5) "asdfr" 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:40:11.047

```
$attributes = json_decode($_POST['attributes']); 
```

如果你想用逗号将数组重新加入 agian 那么

```
$attributes = implode(',' , json_decode($_POST['attributes'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:44:21.250

你根本不需要`JSON.stringify`，你检查一切都使用成功通过

```
var_dump($department, $category, $attributes); 
```

不是`pring_r`with 连接

# ios - ios - crash when returning from a remote server call and evaluating the error object

> ID：13444858
> 
> 赞同：0
> 
> 时间：2012-11-18T21:35:42.827
> 
> 标签：ios, ios5, nsurlconnection

I have this code after a remote call is made and

```
 [NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
     {   
         NSString *responseString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] ;
         NSString *responseError = [[NSString alloc] initWithData:error encoding:NSUTF8StringEncoding] ;
         ... 
```

And on the last line sometimes the code crashes. I can not reproduce the crash, but one guess I have is that if the error object is nil then the crash happens, am I right? Should I check if error is not nil first?

This is the error from crashalytics:

```
Reason:
-[NSURLError bytes]: unrecognized selector sent to instance 0x22b215d0 
```

which does not support my guess of why the error happens. Any idea why this crash happens?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:39:15.680

您不能将`NSError`对象传递给`initWithData:`方法（该方法需要一个`NSData`对象。很可能您会收到编译器警告。永远不要忽略编译器警告。您的代码应该编译干净。

要获取错误消息，请使用正确的`NSError`方法，例如`localizedDescription`.

```
NSString *responseError = [error localizedDescription]; 
```

# sql - SQL ON DELETE CASCADE，删除是通过哪种方式发生的？

> ID：13444859
> 
> 赞同：156
> 
> 时间：2012-11-18T21:36:00.670
> 
> 标签：sql, database, database-design, cascade, relation

如果我在数据库中有两个关系，如下所示：

```
CREATE TABLE Courses (
  CourseID int NOT NULL PRIMARY KEY,
  Course VARCHAR(63) NOT NULL UNIQUE,
  Code CHAR(4) NOT NULL UNIQUE
);

CREATE TABLE BookCourses (
  EntryID int NOT NULL PRIMARY KEY,
  BookID int NOT NULL,
  Course CHAR(4) NOT NULL,
  CourseNum CHAR(3) NOT NULL,
  CourseSec CHAR(1) NOT NULL
); 
```

我在两者之间建立了外键关系，如下所示：

```
ALTER TABLE BookCourses
ADD FOREIGN KEY (Course)
REFERENCES Courses(Code)
ON DELETE CASCADE; 
```

然后可以看到关系中的属性引用了关系中`Course`的属性。`BookCourses``Code``Courses`

我的问题是当两个关系中的任何一个发生删除时，删除会以哪种方式级联？如果我删除`Courses`关系中的元组，它会删除关系中的所有引用元组`BookCourses`，还是相反？

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-11-18T21:38:38.270

当您删除 table 上的某些内容时，Cascade 将起作用`Courses`。表上任何`BookCourses`引用表的记录`Courses`都将被自动删除。

但是当您尝试在表上删除时，`BookCourses`只有表本身会受到影响，而不是在`Courses`

*追问：为什么`CourseID`表中有Category？*

也许你应该把你的模式重组成这个，

```
CREATE TABLE Categories 
(
  Code CHAR(4) NOT NULL PRIMARY KEY,
  CategoryName VARCHAR(63) NOT NULL UNIQUE
);

CREATE TABLE Courses 
(
  CourseID INT NOT NULL PRIMARY KEY,
  BookID INT NOT NULL,
  CatCode CHAR(4) NOT NULL,
  CourseNum CHAR(3) NOT NULL,
  CourseSec CHAR(1) NOT NULL,
);

ALTER TABLE Courses
ADD FOREIGN KEY (CatCode)
REFERENCES Categories(Code)
ON DELETE CASCADE; 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2018-08-22T11:52:00.730

这是其他访问此旧帖子的其他人的一个简单示例，但对问题中的示例和其他答案感到困惑：

*交货 -> 包裹（一个 -> 多个）*

```
CREATE TABLE Delivery(
    Id INT IDENTITY PRIMARY KEY,
    NoteNumber NVARCHAR(255) NOT NULL
)

CREATE TABLE Package(
    Id INT IDENTITY PRIMARY KEY,
    Status INT NOT NULL DEFAULT 0,
    Delivery_Id INT NOT NULL,
    CONSTRAINT FK_Package_Delivery_Id FOREIGN KEY (Delivery_Id) REFERENCES Delivery (Id) ON DELETE CASCADE
) 
```

外键 Delivery_Id (Package) 的条目与 FK 关系 (Delivery) 中的引用实体一起删除。

因此，当 Delivery 被删除时，引用它的 Packages 也将被删除。如果一个包被删除，任何交付都不会发生任何事情。

# assembly - Access registers between/cross cores in multicore CPUs

> ID：13444860
> 
> 赞同：2
> 
> 时间：2012-11-18T21:36:03.150
> 
> 标签：assembly, multicore, cpu-registers

This may sounds crazy but it seems unclear to me whether there is an interface to assembly programmers to write code to load one register on core 1 to a register on core 2\. For example, load EAX on core 1 to EAX on core 2. Is it even possible?

More over what is the interface to assembly programmers to use two cores (run code on more than one core)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T05:13:55.703

不。为此，一个核心必须将值存储在内存中，而另一个核心必须将其取出。所以核心可能看起来像这样：

```
mov eax, [235] 
```

核心 2 会这样做：

```
mov [235], eax 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T05:46:09.107

硬件不直接提供此功能。

然而，为了构建真正的工具（例如，调试器），必须存在一些这样的工具。这通常由系统的内核软件实现，该软件为一个 CPU“停止”另一个 CPU、检查其寄存器状态、修改其寄存器状态、单步、修改另一个 CPU 的内存映射提供了便利等。此类设施建立在允许一个 CPU 中断另一个 CPU 的低级硬件原语之上，并且代码组织使得 CPU 中断导致被中断的 CPU 使其状态对中断的 CPU 可用。（这往往是非常棘手的代码，并且非常依赖于硬件）。

Windows 通过 Win32 调用 GetThreadContext() 提供这些功能（至少是寄存器访问部分）。我敢肯定 Win64 有一个等价物，Linux 等也有类似的东西。

# haskell - Haskell Switch/Case Use

> ID：13444862
> 
> 赞同：4
> 
> 时间：2012-11-18T21:36:11.927
> 
> 标签：haskell, recursion, switch-statement

As part of a mini interpreter that I'm writing in Haskell, I'm writing a function that does the following: In case of `eval (App e1 e2)`, I want to recursively evaluate `e1` (`eval e1`), setting the result to `v1`. Then using Switch/Case, I want to check the pattern of the `v1` and if it's not an Error then recursively evaluate `e2` (`eval e2`) and setting that value to `v2`. Using these two values `v1` and `v2`, then I apply another function (`appVals`) on those values.

```
eval :: Exp -> Error Val
eval (App e1 e2) = appVals v1 v2 where
    v1 = case (eval e1) of
        Error err -> Error "Not an application"
        /= Error err -> eval e1 = v1
    v2 = case (eval e2) of
        Error err -> Error "Not an application"
        /= Error err -> eval e2 = v2 
```

I think I may have figured it out but I'm not entirely sure I've done the switch/case part correctly. Any ideas/suggests?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-18T21:40:30.333

您的案例陈述的第二部分不应该尝试重新测试，因为您已经知道它不是`Error`- 与第一部分相匹配。（跳过`/= Error err`。）

`eval e1 = v1`尝试重做你在开始时所做的评估。你不需要这样做。

这就是我认为你打算做的事情：

```
eval :: Exp -> Error Val
eval (App e1 e2) = case eval e1 of
    Error _ -> Error "Not an application"
    S v1    ->    case eval e2 of        -- nested case statement
     Error _ -> Error "Not an application"
     S v2    -> appVals v1 v2            -- match the S away 
```

但这一切似乎有点难看，所以让我们从 Gabriel Gonzalez 那里得到极好的建议，并从`Error`.

```
instance Functor Error where
   fmap f (Error e) = Error e  -- pass through errors
   fmap f (S x)     = S (f x)  -- edit successes 
```

例如，`fmap (+4) (Error "oops") = Error "oops"`而`fmap (+4) (S 5) = S 9`.

如果这`fmap`对您来说是全新的，为什么不阅读[Functors 教程](https://stackoverflow.com/questions/13134825/how-do-functors-work-in-haskell/13137359#13137359)呢？

接下来让我们创建一个 Applicative 实例。Applicative 让您可以像使用简单的功能一样使用复杂的功能。您需要`import Control.Applicative`在文件顶部才能使其正常工作。

```
instance Applicative Error where
    pure x = S x   -- how to put ordinary data in
    S f     <*> S x     = S (f x)
    Error e <*> _       = Error e
    _       <*> Error e = Error e 
```

现在，如果没有任何错误，那么您将定义

```
appVal' :: Val -> Val -> Val

eval' :: Exp -> Val
eval' (App e1 e2) = appVal' (eval' e1) (eval' e2) 
```

使用 applicative，我们可以使用`<$>`which 有点像，`$`除了它执行您在`fmap`. 类似地，`<*>`工作有点像`函数应用程序，除了额外的管道，所以我们可以定义`

 ````
eval :: Exp -> Error Val
eval (App e1 e2) = appVals <$> eval e1 <*> eval e2 
```

这是处理幕后错误同时专注于功能的一种很好的干净方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T23:36:25.073

[我昨天离开了你](https://stackoverflow.com/questions/13426449/haskell-syntax-parse-error-on-input/13429870#13429870)（模重命名）

```
eval (App e1 e2) = appVals <$> eval e1 <*> eval e2 
```

这几乎就是您想要的，不同之处在于如果两个输入中的任何一个是错误的，您想用特定的错误消息替换它。（我不明白为什么。）所以让我们编写一个函数来完成最后一点！

```
butError :: String -> Error a -> Error a
butError message (Error _) = Error message
butError _       noError   = noError 
```

现在您可以将您的`eval`子句重写为

```
eval (App e1 e2) = appVals <$> butError message (eval e1) <*> butError message (eval e2)
  where message = "Not an application" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T22:03:17.650

我假设您有一些数据类型，如下所示：

```
data Result a = Error String | Success a 
```

您的问题的解决方案是：

(a) 使你的`Result`类型 a`Monad`

(b) 使用`Either String`而不是结果，因为它已经有一个`Monad`实例。

无论你做什么，你都会写：

```
eval :: SyntaxTree a -> Result a
eval (App ef ex) = do
    f <- eval ef
    x <- eval ex
    return (f x) 
```

从技术上讲，一个`Applicative`就足够了，你可以写：

```
eval (App ef ex) = eval ef <*> eval ex 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-18T21:40:55.910

在 a`case`中，你需要有替代*模式*，你不能在`/= Error err`那里。

此外，表达式中的箭头右侧不能有 a，因此不是`=`有效的Haskell。`->``case``-> eval e1 = v1`

在您的情况下，您只关心它不是一个`Error something`，但是一旦第一个模式不匹配，就会自动出现这种情况，并且由于您不在乎得到什么，您可以使用变量模式：

```
eval (App e1 e2) = appVals v1 v2 where
    v1 = case (eval e1) of
        Error err -> Error "Not an application"
        other -> other
    v2 = case (eval e2) of
        Error err -> Error "Not an application"
        other -> other 
````

# python - Can't open bz2-compressed (with python) file with normal archive manager

> ID：13444864
> 
> 赞同：2
> 
> 时间：2012-11-18T21:36:20.287
> 
> 标签：python, compression, bzip2

I've written some code to bz2-compress a file with the BZ2 Compressor Object:

```
def compressFile(file_name, new_name):      
    comp = bz2.BZ2Compressor()
    comFile = open(new_name, "wb")
    oldFile = open(file_name, "rb")
    while True:
        data = oldFile.read(1024*1024)
        if(len(data) == 0):
            break
        compressed = comp.compress(data)
        comFile.write(compressed)
    comp.flush()
    comFile.close() 
```

I don't get an error and the file is created, but when I want to open it with an archive manager, I get a nonspecific error. I can't find my mistake and this module is poorly documented.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T21:55:49.423

当您使用 a`BZ2Compressor`时，您在调用时获取数据块`compress()`，并且很有可能您仅在调用时获取数据`flush()`。

如果您像这样更改功能，它应该可以工作：

```
def compressFile(file_name, new_name):      
    comp = bz2.BZ2Compressor()
    comFile = open(new_name, "wb")
    oldFile = open(file_name, "rb")
    while True:
        data = oldFile.read(1024*1024)
        if(len(data) == 0):
            break
        comFile.write(comp.compress(data))
    comFile.write(comp.flush())
    comFile.close() 
```

# java - HttpPost Java with Apache Library

> ID：13444865
> 
> 赞同：2
> 
> 时间：2012-11-18T21:36:26.720
> 
> 标签：java, json, apache, http, http-headers

I'm trying to get a confirmation response from a server after sending a json file to it. I can't see what the problem is with the following. I've been consistently getting a 502 error when attempting to connect to the server.

Thanks for the help!

```
 HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("https://stage-api.e-signlive.com/aws/rest/services/codejam");
    post.setHeader("Authorization", "Basic Y29kZWphbTpBRkxpdGw0TEEyQWQx");
    post.setHeader("Content-Type", "application/json");

    File file = new File("test.json");

    try{
        post.setEntity(new FileEntity(file, "application/json"));

        HttpResponse response = client.execute(post);
        BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

        String line = "";
        while ((line = rd.readLine()) != null){
            System.out.println(line);
        }
        //System.out.println(response.getStatusLine().getStatusCode());
    }
    catch (IOException e){
        e.printStackTrace();
    } 
```

# c++ - Find Algorithm over Map Keyset (c++)

> ID：13444870
> 
> 赞同：0
> 
> 时间：2012-11-18T21:36:39.523
> 
> 标签：c++, map, iterator, keyset

Is there a way to use the .find(itr, itr, value) algorithm over the keyset of a map? I know you could use an iterator over the map to transfer the key values into a set (and then use that), but I wasn't sure if there was a quicker way to do so.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:49:44.977

您可能最好使用`std::map<K, V>`'`find()`成员，因为这利用了`map`s 内部结构。如果你真的想找到一些东西，例如，因为你只是在键中寻找一个属性，你需要使用`std::find_if()`：

```
auto it = std::find_if(m.begin(), m.end(),
    [=](decltype(*m.begin()) const& e){
        return e.first == v;
    }); 
```

# hash - 主键的正确哈希函数

> ID：13444873
> 
> 赞同：4
> 
> 时间：2012-11-18T21:36:48.767
> 
> 标签：hash, random, md5, sha1, sha256

想知道我应该使用哪种散列算法从字符串创建主键。现在我正在使用 SHA-1。

过去我使用过 SHA-256，尽管我听说 256 对我的目的来说可能是“矫枉过正”。我也听说过一些关于可能使用 MD5 的事情，但我不太了解那个的利弊。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:09:48.423

很大程度上取决于您的用例：对于初学者来说，如果发现碰撞，恶意用户是否可以获得任何东西。散列函数和加密安全散列算法之间存在很大差异。我会假设您的用例是一个正常的编程问题。

[MD5 坏了](http://en.wikipedia.org/wiki/MD5#Collision_vulnerabilities)。看到最近如何导致[各种语言的字典键散列问题](http://lwn.net/Articles/474912/)，我不会将它用于任何事情。

[随着时间的推移，SHA-1 越来越坏](http://en.wikipedia.org/wiki/SHA-1#Cracking)。即使您可能不需要加密安全算法，我也会使用 SHA-256，除非性能差异非常显着，[过早优化是邪恶的](http://c2.com/cgi/wiki?PrematureOptimization)等等。

# cucumber - Polymorphism in a Cucumber-jvm Given Step

> ID：13444875
> 
> 赞同：0
> 
> 时间：2012-11-18T21:36:59.547
> 
> 标签：cucumber, polymorphism

I'm trying to write some steps in Cucumber-jvm and I've got a step that is approximately like the following:

```
@Given("I am a (regular|admin|guest) user")
 public void setUser(String userType){
     if("regular".equals(userType))
         setUserType(REGULAR);
     if("admin".equals(userType))
         setUserType(ADMIN);
     if("guest".equals(userType))
         setUserType(GUEST);
} 
```

Is there a better way of writing such a step, to make it polymorphic?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T19:22:48.780

在某些时候，您需要在字符串和要设置的类型之间建立关系，所以如果您不想要这样的大 if statmenet，那么设置映射可能是要走的路。

这样的事情怎么办......

```
public static Map<String,UserType> types = new HashMap<String,UserType>();
static {
  types.put("regular", REGULAR);
  types.put("admin", ADMIN);
  types.put("guest", GUEST);
} 
```

接着

```
@Given("I am a (regular|admin|guest) user")
public void setUser(String userType){
 setUserType(types.get(userType));
} 
```

# node.js - Node.js - Mongoose - Check if a collection exists

> ID：13444876
> 
> 赞同：27
> 
> 时间：2012-11-18T21:37:02.630
> 
> 标签：node.js, mongodb, mongoose

I need to insert some data using mongoose but the name of the collection is provided by the user at the moment of the insertion, so I first have to check if the collection exists.

The way I know how to check if a collection exists is by querying the `system.namespaces` collection. I can see 3 possible approaches to doing that.

1.  Find a way to query `system.namespaces` using mongoose (maybe defining a schema that matches the one in the db).
2.  Getting some underlying node-mongodb-native object from mongoose and performing the query manually. In any case, this is something I would like to learn how to do.
3.  Using a separate instance of a node-mongodb-native (or some other driver) to perform the query

Number `3` is the least elegant and the one i'm trying to avoid, I don't want to load another instance of the driver nor create a new connection when mongoose already created one.

I'm going to try number `1` after writing this. I just checked `system.namespaces` and the schema looks quite simple

I'd still like to hear some opinions.

Thanks!

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-18T22:21:12.317

选项 2 可能是最干净的。假设您有一个`Connection`名为 Mongoose 的对象`conn`，该对象已使用 . 打开`mongoose.createConnection`，您可以`Db`通过`conn.db`. 从那里您可以调用[`collectionNames`](http://mongodb.github.com/node-mongodb-native/api-generated/db.html#collectionnames)which 应该提供您正在寻找的内容：

```
conn.db.collectionNames(function (err, names) {
    // names contains an array of objects that contain the collection names
}); 
```

您还可以将集合名称作为参数传递`collectionNames`给以将结果过滤为您正在寻找的内容。

**猫鼬 4.x 更新**

在 Mongoose 4.x 使用的 MongoDB 本机驱动程序的 2.x 版本中，`collectionNames`已被替换为[`listCollections`](http://mongodb.github.io/node-mongodb-native/2.0/api/Db.html#listCollections)接受过滤器并返回游标，因此您可以这样做：

```
mongoose.connection.db.listCollections({name: 'mycollectionname'})
    .next(function(err, collinfo) {
        if (collinfo) {
            // The collection exists
        }
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-22T01:40:22.837

这对我有用（猫鼬版本 5.1.1）：

```
const mongoose = require('mongoose');
const mongoURI = 'mongodb://localhost:27017/mydb'
// notice the mongoose.createConnection instead of mongoose.connect
const conn = mongoose.createConnection(mongoURI);
conn.on('open', function () {
    conn.db.listCollections().toArray(function (err, collectionNames) {
      if (err) {
        console.log(err);
        return;
      }
        console.log(collectionNames);
        conn.close();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-16T17:48:59.450

这是另一个对我有用的选项（稍微使用`express`，但我认为没有它也可以正常工作）。假设您导入了一个模型。而且，假设`Blog`是您的模型的名称。

```
const app = express();
const Blog = require('./models/blog');

app.post('/example', (req, res) => {
  Blog.findOne({name: 'collectionname'})
  .then(result => {
    if(result) {
      //If it exists
    }
  })
}) 
```

''
'`result`要么`null`要么`object`。

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2013-02-25T09:46:03.743

在收藏列表中查找收藏

```
public function CollectionExists($collectionName)
    {
        $mongo = new Mongo();
        $collectionArr = $mongo->selectDB('yourrec')->listCollections();
        if (in_array($collectionName, $collectionArr)) {
            return true;
        }
        return false;
    } 
```

# c# - How to manage delegate of WinForms buttons created at run-time?

> ID：13444877
> 
> 赞同：1
> 
> 时间：2012-11-18T21:37:21.170
> 
> 标签：c#, winforms, events

Let's look at the following code in which I'm creating a List of buttons.

```
List<System.Windows.Forms.Button> buttons = new List<System.Windows.Forms.Button>(); 

for(int i = 0; i < 5; i++) {
    buttons.Add(  System.Windows.Forms.Button>()  );
    buttons[i].Name = "button_" + i.ToString();
    this.Controls.Add(buttons[i]);
    buttons[i].Click += new System.EventHandler(this.Bt_windowClick);
} 
```

The next part is where I'm confused. When this delegate is called I would like it to tell me which button was actually clicked. How would I do this?

```
void Bt_windowClick(object sender, EventArgs e)
{
    // I would like to get the name of the button that was clicked
} 
```

Thank you in advance for your support!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:38:39.683

Sender 对象是一个按钮，它引发了事件。因此，只需将其转换为`Button`类型：

```
void Bt_windowClick(object sender, EventArgs e)
{
    Button button = (Button)sender;
    // use button
    MessageBox.Show(button.Name);
} 
```

# ios - UITableView 单元格删除崩溃？

> ID：13444879
> 
> 赞同：0
> 
> 时间：2012-11-18T21:37:34.140
> 
> 标签：ios, uitableview, cells

所以我有这段代码来删除我的表格视图中的一行：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    [self.cellArray removeObjectAtIndex:indexPath.row/2];
    [[NSUserDefaults standardUserDefaults] setObject:self.cellArray forKey:@"cellArray"];
    [tableView deleteRowsAtIndexPaths:[NSMutableArray arrayWithObject:indexPath] withRowAnimation:YES];
} 
```

现在我做 indexPath.row/2 因为我这样做：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [cellArray count] * 2;
} 
```

只是因为它使我的 UI 看起来像现在这样。无论如何，这是崩溃：

> *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 0 节中的行数无效。更新后现有节中包含的行数 (42) 必须等于行数更新前包含在该节中的行数 (44)，加上或减去从该节插入或删除的行数（0 插入，1 删除），加上或减去移入或移出该节的行数（0 移入, 0 移出）。

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    NSIndexPath *nextPath = [NSIndexPath indexPathForRow:indexPath.row + 1 inSection:indexPath.section];
    [self.cellArray removeObjectAtIndex:indexPath.row/2];
    [[NSUserDefaults standardUserDefaults] setObject:self.cellArray forKey:@"cellArray"];
    [tableView deleteRowsAtIndexPaths:[NSMutableArray arrayWithObjects:indexPath, nextPath, nil] withRowAnimation:UITableViewRowAnimationFade];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:40:50.887

也许这只是这一行的一个小错字。

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
{
    [self.cellArray removeObjectAtIndex:indexPath.row]; // Returning a number instead of possible double
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:45:08.983

问题是您在单元格数组中为每个对象使用两个表格行。但是在您发布的代码中，您只从表中删除了一行。您需要删除两行。

```
NSIndexPath *nextPath = [NSIndexPath indexPathForRow:indexPath.row + 1 inSection:indexPath.section];
[tableView deleteRowsAtIndexPaths:[NSMutableArray arrayWithObjects:indexPath, nextPath, nil] withRowAnimation: UITableViewRowAnimationFade]; 
```

顺便说一句 -`YES`不是行动画的有效参数。

# c++ - 在动态库未定义引用中提升 python 包装器

> ID：13444884
> 
> 赞同：0
> 
> 时间：2012-11-18T21:38:09.020
> 
> 标签：c++, boost-python, undefined-reference, dynamic-library

我目前正在尝试将复杂程序的一部分放入动态库中。这部分由一些类组成，这些类也用 boost python 包装到一个模块中，以便再次嵌入。这是 dll 源的简化版本。

你好.cpp：

```
#include <boost/shared_ptr.hpp>
#include <boost/make_shared.hpp>
#include <boost/python.hpp>
#include <Foo.h>

using namespace boost::python;

typedef boost::shared_ptr<Hello> hello_ptr;

BOOST_PYTHON_MODULE(Hello)
{
    class_<Hello, hello_ptr>("Hello")
        .def("say_hello", &Hello::say_hello)
    ;
};

void Hello::say_hello(){
    cout << "Hello World!" << endl;
}

void World::foo(){
    Py_Initialize();

    try {
        PyRun_SimpleString(
            "hello = None\n"
            "\n"
            "def setup(hello_from_cxx):\n"
            "    print 'setup called with', hello_from_cxx\n"
            "    global hello\n"
            "    hello = a_foo_from_cxx\n"
            "\n"
            "def run():\n"
            "    hello.say_hello()\n"
            "\n"
            "print 'main module loaded'\n"
        );
        //initialize eviroment
        initHello();

        hello_ptr hello = boost::make_shared<Hello>();

        object main = object(handle<>(borrowed(
            PyImport_AddModule("__main__")
        )));

        // pass the reference to hello into python:
        object setup_func = main.attr("setup");
        setup_func(hello);

        // now run the python 'main' function
        object run_func = main.attr("run");
        run_func();
    }
    catch (error_already_set) {
        PyErr_Print();
    }
} 
```

你好.h

```
#ifndef HELLO_H_INCLUDED
#define HELLO_H_INCLUDED

#include <iostream>
#include <boost/python.hpp>

using namespace std;

class Hello{
public:
    void say_hello();
};

class World{
public:
    void foo();
};

#endif // HELLO_H_INCLUDED 
```

然后，在应用程序的主函数中，我创建了一个嵌入 python 的类的实例，但它给出了对 World::foo() 的未定义引用，即使该函数是在动态库 libFoo.dll 中定义的，它也链接到主要应用。

主.cpp：

```
#include <iostream>
#include <Hello.h>

using namespace std;

int main(){
    cout << "Test" << endl;

    World world;

    world.foo();
} 
```

安慰：

```
undefined reference to `World::foo()' 
```

我在 MinGW 中使用 Code::Blocks。

这个问题让我有好几天没睡了，我似乎无法找到解决它的方法。希望您能够帮助我。

提前致谢。

更新：

我现在尝试使用普通的 Python C API 来完成这项任务。定义与此错误肯定相关的 Python_Module (BOOST_PYTHON_MODULE()) 的步骤是通过定义如下函数来完成的：

```
PyMODINIT_FUNC initHello(void){
...
} 
```

现在写在前面

```
#define PyMODINIT_FUNC void 
```

解决了错误。现在有人知道 boost.python 库是如何定义 BOOST_PYTHON_MODULE 函数的吗？也许也有这种解决方案？我在源文件中找不到任何 PyMODINIT_FUNC 内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:21:09.340

自己找到了解决方案。

就像我已经猜到了一样。需要的是像这样定义 BOOST_PYTHON_MODULE_INIT(name) 。

```
#   define BOOST_PYTHON_MODULE_INIT(name)                               \
  void BOOST_PP_CAT(init_module_,name)();                               \
extern "C" __attribute__ ((__visibility__("default"))) _BOOST_PYTHON_MODULE_INIT(name) 
```

实际上，我在其中一个带有#ifdef infront 的头文件中发现了这一点，但它们似乎无法正常工作。至少对我来说不是。

# java - 升级和比较

> ID：13444891
> 
> 赞同：0
> 
> 时间：2012-11-18T21:38:50.797
> 
> 标签：java, casting, floating-point

我似乎找不到以下代码破坏的原因：

从我的角度来看，发生的事情是整数 lbnd 减少了

```
public class Test {
    public static void main(String[] args) {
        methode1();
    }
    static void methode1() {
        int ubnd = Integer.MAX_VALUE;
        int lbnd = ubnd;

        while ((float)lbnd == (float)ubnd) {
            --lbnd;
        }   
        System.out.println((++lbnd) + ".." + ubnd);
    }
} 
```

问题是这个循环应该是我所看到的无限循环，但是它在 64 个循环后中断，因为 int 的值发生了变化。结果是：

2147483584..2147483647

但它应该是一个无限循环：

2147483647..2147483647

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:45:19.813

请记住，**浮点数没有足够的精度来精确存储整数的所有 32 位**。因此，对于一个大整数， (float) i 和 (float) (i-1) 对于浮点比较而言是相同的。

（顺便说一句，在比较 int 和 float 时，它将被视为 float 比较。因此，为了说明一个额外的问题，您甚至不需要强制转换在 == 比较的一侧浮动。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:47:42.957

要验证 Neil Coffey 的出色答案，您可以查看带有附加输出的代码输出：

```
 while ((float)lbnd == (float)ubnd) {
        System.out.println(
                "Lower Int " + lbnd 
                + " Lower Float " + (float)lbnd 
                + " .. Upper Int " + ubnd
                + " Upper Float "+ (float)ubnd);
        --lbnd;
    }   
    System.out.println((++lbnd) + ".." + ubnd); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T21:48:43.467

对于大整数，一个由几个整数组成的块都舍入到相同的浮点数，因此对于前几次迭代，lbnd 的浮点数转换保持等于 ubnd 的浮点数转换。

在对 lbnd 进行足够的 int 减法之后，它足够小以映射到下一个较低的浮点值，并且两个浮点转换变得不同，从而结束循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T21:55:42.373

您正在递减和递增 lbnd。这表示相差一。一个仅在数字 16777217 之前有意义（在 strictfp 浮点中）。如果您的 vm 具有更高的精度（非 strictfp），则该数字可能更高。

# c - 标准输出如何存储数据？- C

> ID：13444892
> 
> 赞同：0
> 
> 时间：2012-11-18T21:39:05.737
> 
> 标签：c, memory, monitor

显示器如何存储其上显示的数据？它是否存储在内存中，如果是，我该如何访问它？我问的原因是因为我正在编写一个文本编辑器，我在其中使用一个数组来存储正在操作的数据。我想知道是否可以访问包含屏幕上显示的数据的内存，而不是使用我自己的数组。为相同的数据保留两次内存似乎是多余的。但我只是不知道监视器如何存储显示在其上的数据，或者它是否甚至存储它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:47:06.407

你可以对去向做出很少的假设`stdout`。它可能会到达一个终端，最终会在某处的缓冲区中结束。或者它可能会被传送到另一个进程。或者它可能会`/dev/null`。或者到行式打印机等。即使在它最终在内存中某处的情况下，该缓冲区也将具有有限的大小，因此不一定保存整个文件。而且您可能无论如何都无权访问该内存。因此，虽然这在理论上可以在某些情况下工作，但这绝对不是正确的方法。

您可能根本不想将 stdout 用于您的文本编辑器，而是使用类似的东西`ncurses`，它可以让您将文本放置在终端中您想要的位置，并随意更新它。文件的实际内容可能最好通过您自己的内部缓冲区进行管理，您已经这样做了，尽管您也可以考虑`mmap`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:50:53.373

stdout 是程序的输出流。您运行程序的环境决定了该流指向的位置。您可能正在从控制台终端或某些 IDE 运行程序。

默认情况下，控制台终端将输出存储在内部，除非被指示将输出重定向到文件或其他程序的输入。

您不能在没有任何协议的情况下依赖第三方存储任何输出信息供您以后查询。您需要在程序中保存足够的数据来生成所需的视图。是的，如上所述，ncurses 和此类库使控制台应用程序的构建更加容易。

# file-upload - 处理 varbinary 文件以下载、上传和显示？Primefaces 3.4 - 文件上传 - 文件下载 - 媒体

> ID：13444893
> 
> 赞同：0
> 
> 时间：2012-11-18T21:39:12.620
> 
> 标签：file-upload, primefaces, download, media, varbinary

我使用 Glassfish 3.1.2.2、Sql Server 2005、PF 3.4 和 Mojarra 2.1.6。IDE Eclipse Juno。

我使用存储过程，并添加 jar commons-io.1.4 和 commons-fileupload.1.2.1

**在数据库中，我们将所有文件（pdf、doc、xls 等）保存在 varbinary 中。** 我有这些疑问：

1.  如何使用**p:fileupload上传任何****文件（pdf、doc、xls 等）并在****数据库**中另存为**varbinary**文件？
*******   如何使用**p:FileDownload下载****数据库的任何****varbinary**文件？*****   如何使用**p:media**显示 pdf，从**数据库**中恢复文件**varbinary**？**********

 ********一个问题**

如何使用 p: fileupload 上传任何文件（pdf、doc、xls 等）并将它们保存到数据库中？

我不明白 p:fileupload，因为文档。我使用这个方法handlerFileUpload 来上传文件。Firsts 获取事件的 inputScream

```
<p:fileUpload fileUploadListener="#{fileBean.handleFileUpload}" />

public class FileBean {
    public void handleFileUpload(FileUploadEvent event) {
       UploadedFile file = event.getFile();
       //application code
    }
} 
```

我使用了 file.getInputStream 并将存储过程发送到 BinaryStream setBinaryStream(4, inputStream, (int)inputStream.toString().getBytes().length);

这个好？？

**两个问题**

如何使用**p:FileDownload下载任何****varbinary**文件？

 **我使用 getBytes 恢复数据库以来的 varbinary。记住我使用存储过程。

此方法在具有请求范围的类中。

```
 public byte[] ArchivoBin(int CDTPEnlaceImagen, int iddoc) {
  Context();
  Null_Rs_and_Proc();
  Connection(0);
  PA(2, 51);

  [b]byte[] file = null;[/b]

  try {
     setProc(getCon().prepareCall(getCall()));
     getProc().setInt(1, CDTPEnlaceImagen);
     getProc().setInt(2, iddoc);

     setRs(getProc().executeQuery());
     getRs().next();

     [b]file = getRs().getBytes(1);[/b]
     System.out.println(file);
  }
  catch(SQLException e) {
     System.out.println("Exception ArchivoBin");
     System.out.println(e);
  }
  CloseConnections();

  return file;} 
```

但是，当我以字节为单位获取文件时，我将一个字节转换为 inputcream，然后将 inputcream 转换为 DefaultStreamedContent。

这部分是一个具有请求范围的类。

```
byte[] bytes = null;
bytes = getRecuperarDatos().ArchivoBin(
               1, 
               idarchivo);

//Archivo is a Session Scope
getArchivo().setFile(new DefaultStreamedContent(
                  [b]new ByteArrayInputStream(bytes)[/b], 
                  "application/pdf", 
                  nomArchivo)); 
```

**f:download**没有得到正确的文件，它已损坏。

```
<h:commandButton value="Download">
           [b]<p:fileDownload value="#{archivo.file}"[/b] />
        </h:commandButton> 
```

我不知道为什么这么糟糕

**三个问题**

如何使用**p:media显示 pdf，****从数据库**中恢复varbinary 文件？

这类似于两个问题，p:media 说“加载 PDF 文档时发生错误”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:38:33.193

一切都解决了，当我将文件与方法内容一起保存在数据库中时。具体来说，与

```
public void SubirAlBaseDatos(FileUploadEvent e) {
  bytes[] file = e.getFile().getContents();

); 
```

因此，我可以在 p:media 中显示，并在 p:filedownload 中下载。一些无关紧要的事情导致了这个问题。

感谢！！BalusC 为您的提示 [来源](https://stackoverflow.com/a/8310773/1303201)********

# c++ - C++ REG_SZ 值添加失败

> ID：13444899
> 
> 赞同：0
> 
> 时间：2012-11-18T21:39:29.707
> 
> 标签：c++, winapi, registry

此代码的目的是添加或编辑 KeyboardDelay REG_SZ 的值。我能做的是将其值设为 0，但是当我尝试将其设为 31 时，它会失败，并且一个奇怪的“框”作为 KeyboardDelays 数据值而不是数字 31 出现。我做错了什么，因为它不会添加 31 但它会做0吗？

```
HKEY key;
if (RegOpenKey(HKEY_CURRENT_USER, TEXT("Control Panel\\Keyboard"), &key) != ERROR_SUCCESS)
{
cout << "Unable to open registry key";
}

if (RegSetValueEx(key, TEXT("KeyboardDelay"), 0, REG_SZ, (LPBYTE)"31", strlen("31")*sizeof(char)) != ERROR_SUCCESS)
{
RegCloseKey(key);
cout <<"Unable to set registry value value_name";
}
else
{
   cout << "KeyboardDelay was set" << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T22:05:44.990

RegSetValueEx 在 winreg.h 中定义如下：

```
#ifdef UNICODE
#define RegSetValueEx  RegSetValueExW
#else
#define RegSetValueEx  RegSetValueExA
#endif // !UNICODE 
```

这意味着当定义 UNICODE 时，将使用 RegSetValueExW。最后一个字母“W”表示它接受宽字符串（wchar_t*），“A”表示它接受多字节字符串。所以如果你知道你在编译时启用了 UNICODE（项目属性 -> 配置 -> 字符集 -> 使用 Unicode 字符集），你应该提供宽字符串文字。windows下最简单的方法是使用宏：

```
TEXT("31") 
```

或我最喜欢的：

```
_T("31") 
```

这两个宏将在非 UNICODE 编译下生成“31”，在 UNICODE 编译下生成 L“31”。

您还应该使用适当的字符串函数，以获取长度，将 wcslen 用于 UNICODE，将 strlen 用于多字节字符集。您可以使用 _t* 宏为您检查字符集并使用 _tcslen() 来获取长度。

实际上，在创建新项目时应该始终使用 UNICODE。

修复您的代码使用：

```
if (RegSetValueEx(key, TEXT("KeyboardDelay"), 0, REG_SZ, (LPBYTE)TEXT("31"),_tcslen(TEXT("31"))*sizeof(TCHAR)) != ERROR_SUCCESS) 
```

此处使用 sizeof(TCHAR) 是因为当定义 UNICODE 时，单个字符的长度为两个字节，而 RegSetValueEx 需要字节数而不是字符数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T03:12:48.393

MSDN 中描述“如果数据的类型为 REG_SZ、REG_EXPAND_SZ 或 REG_MULTI_SZ，则 cbData 必须包含终止空字符的大小。”

所以我想代码应该是：

```
if (RegSetValueEx(key, TEXT("KeyboardDelay"), 0, REG_SZ, (LPBYTE)TEXT("31"), (_tcslen(TEXT("31")) + 1)*sizeof(TCHAR)) != ERROR_SUCCESS) 
```

# python - 无法导入模块

> ID：13444900
> 
> 赞同：2
> 
> 时间：2012-11-18T21:39:31.887
> 
> 标签：python, eclipse, python-2.7, pydev

首先，这很可能不是路径问题。

我在 Eclipse 中有一个 pydev 项目。这是目录结构：

```
Genetic-Framework
  | Genetic-Framework
    | Genetic
      | __init__.py
      | GA.py
      | crossover.py
      | fitness.py
      | individual.py
      | mutation.py
      | population.py
      | selection.py
      | settings.py
      | visualization.py 
```

在`GA.py`中，我有以下行：

```
from Genetic import settings, selection, visualization as vis 
```

是的，`Genetic`在`sys.path`. 但是，我收到以下错误：

```
 File "/.../Genetic-Framework/Genetic-Framework/Genetic/GA.py", line 17, in <module>
    from Genetic import settings, selection, visualization as vis
ImportError: cannot import name settings 
```

但是，当我`settings`从该行中删除时，其他所有内容都可以正常导入。

有趣的是，第一行`settings.py`是这样的：

```
from Genetic import fitness, selection, mutation, crossover, population, GA 
```

当我`GA`从那条线上删除时，一切似乎都导入得很好。

为什么我会收到此错误？这是循环进口的问题吗？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:46:20.373

是的，这是循环导入的问题。

## 问题

问题是，当你`GA.py`运行时，它首先尝试导入`settings`. 这意味着它`settings.py`开始运行，并立即尝试导入`GA`.

但是，`GA`已经在加载过程中，因此`GA.py`不会再次运行 - 相反，`settings`只是加载`GA`已经在内存中的（目前大部分是空的，因为它仍在执行其导入）。

因此，其中的事物`settings`尝试使用事物而`GA`不是失败，因为他们正在寻找的事物`GA`尚未定义（因为处理`GA.py`尚未通过导入）。

这使得对`settings.py`raise的求值产生一个异常，表现为导入失败（因为import时抛出的异常导致导入失败）。

## 解决方案

### a) 首先避免这种情况。

一般来说，您首先应该尽量避免循环导入。它们通常意味着你有非常奇怪的依赖结构，以后很难调试。

做到这一点的一种方法是尝试找到两个模块中需要的东西，并将它们分解成一个单独的第三个模块，可以在其他两个模块之间共享 - 所以不要在 B 中使用 Ax，在 A 中使用 By，而是在 A 和 B 中都使用 Cx 和 Cy。

### b) 在加载所有内容之前，不要真正尝试使用循环导入中的内容。

您可以做的另一件事是将其他模块的某些内容的使用推迟到所有导入完成之后。换句话说，不要尝试从顶级代码中引用导入模块的内容，而是将其放在类初始化程序或稍后可以在所有导入完成后调用的函数中。

例如，而不是这个......

```
import Foo

class Baz:
    top_level_variable = Foo.bar 
```

你可以这样做：

```
import Foo

class Baz:
    def __init__(self):
        self.instance_variable = Foo.bar 
```

显然，实例属性与类属性略有不同，但其想法是将实际必须从其他模块中查找内容的时间推迟到所有模块完成执行并因此它们的内容可用之后。另请注意，`from Foo import bar`此处会失败，因为它会尝试`Foo`在导入时访问 的内容，这是需要避免的。

# windows-8 - 本地化 Windows Store App MakePRI 警告

> ID：13444917
> 
> 赞同：1
> 
> 时间：2012-11-18T21:40:58.840
> 
> 标签：windows-8

我为我的应用程序添加了本地化字符串作为相应文件夹（en-US，nb-NO）下的 Resources.resw 文件，并在编译时收到以下警告：

**MakePRI：警告 0xdef00520：无效的限定符：EN-US**

**MakePRI：警告 0xdef00520：无效的限定符：NB-NO**

我怀疑无效字符作为键，但我无法追踪违规者。

这是构建输出：

```
1>Task "GenerateProjectPriFile"
1>  C:\Program Files (x86)\Windows Kits\8.0\bin\x86\MakePri.exe New -ProjectRoot "C:\Users\Eivind\documents\visual studio 2012\Projects\FructoseStore\FructoseStore\\" -ConfigXml obj\Debug\priconfig.xml -OutputFile "C:\Users\Eivind\documents\visual studio 2012\Projects\FructoseStore\FructoseStore\bin\Debug\resources.pri" -IndexName 1e111781-63c0-4629-81a6-442da5904cb6 -Verbose -Overwrite  
1>  Option Verbose specified
1>  Option Overwrite specified
1>  Index Pass Completed: obj\Debug\layout.resfiles
1>  
1>  Index Pass Completed: obj\Debug\resources.resfiles
1>  Language Qualifiers: EN-US, NB-NO
1>  
1>  Index Pass Completed: obj\Debug\pri.resfiles
1>  Language Qualifiers: EN-US, NB-NO
1>  
1>  Finished building
1>  Version: 1.0
1>  Resource Map Name: 1e111781-63c0-4629-81a6-442da5904cb6
1>  Named Resources: 79
1>  Resource Candidates: 140
1>  Output File at C:\Users\Eivind\documents\visual studio 2012\Projects\FructoseStore\FructoseStore\bin\Debug\resources.pri
1>  Successfully Completed
1>MakePRI : warning 0xdef00520: Invalid Qualifier: EN-US
1>MakePRI : warning 0xdef00520: Invalid Qualifier: NB-NO
1>Done executing task "GenerateProjectPriFile". 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T22:13:41.313

据我所知，这是通过重新启动 Visual Studio 解决的。

# eclipse - 如何在 Eclipse 中禁用抗锯齿？

> ID：13444918
> 
> 赞同：0
> 
> 时间：2012-11-18T21:41:11.790
> 
> 标签：eclipse, fonts, antialiasing

操作系统是 Debian Wheezy XFCE。Eclipse 版本：3.8.0。字体非常模糊。我已经在系统范围内禁用了它。但是在 Eclipse 中字体仍然是消除锯齿的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T22:16:32.577

首先，最好在[https://superuser.com/上询问这个问题](https://superuser.com/)

我不知道你做了什么来禁用全系统的抗锯齿，但是这里有一篇很好的[文章](http://flossblog.wordpress.com/2012/03/02/arreglando-fuentes-feas-ugly-fonts-en-gnulinux/)，介绍了如何使用你的配置获得清晰的字体。它是西班牙语的，所以这里有一个摘要：

第 1 步：启用亚像素渲染：

```
$ mkdir ~/.fonts.conf.d
$ ln -s /etc/fonts/conf.avail/10-sub-pixel-rgb.conf ~/.fonts.conf.d 
```

步骤2：`$HOME/.fonts.conf`使用以下内容创建：

```
<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<fontconfig>

  <!-- settings go here -->
  <match target="font">
    <edit name="antialias" mode="assign">
      <bool>true</bool>
    </edit>
  </match>
  <match target="font">
    <edit name="hinting" mode="assign">
      <bool>true</bool>
    </edit>
  </match>
  <match target="font">
    <edit name="hintstyle" mode="assign">
      <const>hintfull</const>
    </edit>
  </match>
  <match target="font">
    <edit mode="assign" name="lcdfilter">
      <const>lcddefault</const>
    </edit>
  </match>
</fontconfig> 
```

另请参阅[此论坛主题](https://bbs.archlinux.org/viewtopic.php?id=134575)，了解有关如何处理 XFCE4 字体问题的其他信息。

但是，对于一个令人沮丧的消息，请查看[这个线程](http://ubuntuforums.org/showthread.php?t=1232080)，其中的结论是因为 Eclipse 不使用 GTK+，所以您在操作系统级别无能为力。似乎还有一个与此相关的[Eclipse 打开错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=374543)。

抱歉，我无法提供更明确的答案。

# pyqt - PyQt：QAxBase.dynamicCall 以列表作为参数重载

> ID：13444919
> 
> 赞同：1
> 
> 时间：2012-11-18T21:41:17.967
> 
> 标签：pyqt, activex

像这样调用 QAxBase.dynamicCall 有效：

```
my_comp.dynamicCall("MyMethod(const QString&, int, bool)", "test", 2, False) 
```

但是，使用重载调用（[http://qt-project.org/doc/qt-4.8/qaxbase.html#dynamicCall-2](http://qt-project.org/doc/qt-4.8/qaxbase.html#dynamicCall-2)）不会：

```
my_comp.dynamicCall("MyMethod(const QString&, int, bool)", ["test", 2, False]) 
```

它给出了一个错误：... 缺少非可选参数

重载调用需要`QList<QVariant>`Qt 中的 a。我提供的列表是否自动映射到`QList<QVariant>`SIP？我可以手动创建吗？

因为我有 18 个参数，所以我需要使用重载调用。

编辑：我也将 args 显式转换为像这样的 QVariant，但同样的问题。

```
args = ["test", 2, False]
q_var_args = [QVariant(arg) for arg in args]
my_comp.dynamicCall("MyMethod(const QString&, int, bool)", ["test", 2, False]) 
```

干杯，

简

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T23:59:03.447

您可以有一个固定参数，后跟一个解压缩的参数列表：

```
 params = ["test", 2, False]
 my_comp.dynamicCall("MyMethod(QString, int, bool)", *params) 
```

# c++ - C++11中是否需要u8字符串文字

> ID：13444930
> 
> 赞同：33
> 
> 时间：2012-11-18T21:42:25.517
> 
> 标签：c++, utf-8, c++11, literals, string-literals

来自[维基百科](http://en.wikipedia.org/wiki/C++11#New_string_literals)：

> 为了增强 C++ 编译器中对 Unicode 的支持，已将 char 类型的定义修改为至少存储 UTF-8 的八位编码所需的大小。

我想知道这对于编写可移植应用程序到底意味着什么。写这个有什么区别吗

```
const char[] str = "Test String"; 
```

或这个？

```
const char[] str = u8"Test String"; 
```

是否有任何理由不对代码中的每个字符串文字使用后者？

当 TestString 中有非 ASCII 字符时会发生什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-18T21:48:42.957

的编码`"Test String"`是实现定义的系统编码（窄的，可能是多字节的）。

的编码`u8"Test String"`始终为 UTF-8。

这些例子并不是很能说明问题。如果您在字符串中包含一些 Unicode 文字（例如`\U0010FFFF`），那么您总是会得到那些（编码为 UTF-8），但它们是否可以在系统编码的字符串中表示，如果是，它们的值是什么，是实现定义的。

如果有帮助，想象一下您正在 EBCDIC 机器上创作源代码。然后文字“测试字符串”总是在源文件本身中进行 EBCDIC 编码，但`u8`-initialized 数组包含 UTF-8 编码值，而第一个数组包含 EBCDIC 编码值。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-18T22:13:40.117

你引用维基百科：

> 为了在 C++ 编译器中增强对 Unicode 的支持，已将 char 类型的定义修改为至少存储 UTF-8 的八位编码所需的大小。

好吧，“为了目的”是不正确的。由于C 标准中要求的范围`char`，始终保证至少为 8 位，即`CHAR_BIT`始终要求≥8 。`char`这是（引用 C++11 §17.5.1.5/1）“合并”到 C++ 标准中。

如果我应该猜测措辞更改的*目的*，那将只是为那些不知道对 C 标准的依赖的读者澄清一些事情。

关于`u8`字面前缀的效果，它

*   影响可执行文件中字符串的编码，但

*   不幸的是，它*不会*影响类型。

因此，在这两种情况下`"tørrfisk"`，`u8"tørrfisk"`您都会得到一个. 但是在前一种文字中，编码是为编译器选择的任何内容，例如，对于拉丁语 1（或 Windows ANSI Western），对于数组大小为 9，字符为 8 个字节加上一个空字节。而在后一种文字中，编码是保证为 UTF-8，其中“ø”将被编码为 2 或 3 个字节（我不记得确切），用于稍大的数组大小。`char const[*n*]`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-05-02T14:08:49.250

如果编译器的**执行字符集**设置为 UTF-8，则`u8`使用与否没有区别，因为编译器在两种情况下都将字符转换为 UTF-8。

但是，如果编译器执行字符集是系统的非 UTF8 代码页（例如 Visual C++ 的默认值），则`u8`省略时可能无法正确处理非 ASCII 字符。例如，转换为宽字符串会崩溃，例如在 VS15 中：

```
std::string narrowJapanese("スタークラフト");
std::wstring_convert<std::codecvt_utf8_utf16<wchar_t>, wchar_t> convertWindows;
std::wstring wide = convertWindows.from_bytes(narrowJapanese); // Unhandled C++ exception in xlocbuf. 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-18T22:04:15.167

编译器选择平台自然的本机编码。在典型的 POSIX 系统上，它可能会选择 ASCII 并且可能取决于环境对 ASCII 范围之外的字符值的设置。在大型机上，它可能会选择 EBCDIC。比较从文件或命令行接收的字符串可能最适合使用本机字符集。但是，在处理使用 UTF-8 显式编码的文件时，最好使用`u8"..."`字符串。

也就是说，随着最近与字符编码相关的变化，C 和 C++ 中字符串处理的基本假设被打破：每个内部字符对象（`char`、`wchar_t`等）用于表示一个字符。对于每个字符对象仅代表某个字符的一个字节的 UTF-8 字符串，这显然不再适用。因此，所有字符串操作、字符分类等功能不一定适用于这些字符串。我们没有任何好的库来处理这些字符串以包含在标准中。

# php - 我如何知道图像是否已完全传输？

> ID：13444933
> 
> 赞同：0
> 
> 时间：2012-11-18T21:42:30.110
> 
> 标签：php

我通过 FTP 向我的网络服务器发送了很多（每秒几个）图像。问题是我向用户显示收到的最后一张图片，但有时最后一张图片没有完全传输。那么如何在向用户显示图像之前检查图像是否已完全传输。

```
$directory = dir($path);
        while (false !== ($entry = $directory->read())) {

            $filepath = "{$path}/{$entry}";

            // could do also other checks than just checking whether the entry is a file
            $imageFormats = array(IMAGETYPE_JPEG);

            if (is_file($filepath) && filectime($filepath) > $latest_ctime)
            {
                if(in_array(exif_imagetype($filepath), $imageFormats) && $imageResource = imagecreatefromjpeg($filepath))
                {
                    $latest_filename = $entry;
                    $latest_ctime = filectime($filepath);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T21:45:35.583

简单的答案是在 GD 中强力打开它，看看是否有错误。

长的（也是更可取的）答案是上传包含您的文件的 CRC32 校验和列表，并在显示它们之前让 PHP 检查校验和是否匹配。

如果你提供了代码，我会提供实现细节，但是......缺乏精确性，缺乏精确的答案。

# ruby-on-rails - 我可以在 application.css 中使用基金会 scss 中定义的变量吗

> ID：13444934
> 
> 赞同：0
> 
> 时间：2012-11-18T21:42:44.720
> 
> 标签：ruby-on-rails, zurb-foundation

在我的 rails 应用程序的资产`application.css`中，我有以下行

```
/*
 *= require foundation_and_overrides
 *= require_self
 *= require_tree .
 */

ul#mainmenu li {
    background-color: $mainColor;
} 
```

其中包括`foundation_and_overrides.scss`我定义以下变量的文件

```
$mainColor: #eba10e; 
```

但是当我现在尝试直接在我的`application.css`文件中使用这个变量时，它没有被翻译成`#eba10e`，所以我在生成的 css 文件中得到这样的行：

```
background-color: $mainColor; 
```

所以我的问题是，**如何在 application.css 文件中使用该变量？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:21:25.540

不，纯 CSS 不支持变量。

但它会起作用，如果你把它重命名为`application.scss`. 之后，它将使用 Sass 进行编译。CSS 始终是有效的 SCSS，因此这将毫无问题地工作。

此外，您必须使用`@import`语句而不是`require`，因此其他文件将以“SASS 方式”导入。

# c# - Wpf 中的数据表是未知的

> ID：13444941
> 
> 赞同：0
> 
> 时间：2012-11-18T21:44:20.543
> 
> 标签：c#, wpf, datatable, wpfdatagrid

我有一个应该从 sqlserver 表中填充的 datagridview。

```
 SqlConnection SqlConnectionInstance = new SqlConnection(WinLogin.connectinStringSecure);
        SqlConnectionInstance.Open();
        SqlCommand sqlCommandInstance = new SqlCommand("Select * From T_Kala", SqlConnectionInstance);
        SqlDataAdapter SqlDataAdapterInstance = new SqlDataAdapter("Select * From T_Kala", SqlConnectionInstance);
        DataTable dt = new DataTable("Employee"); 
```

但visual studio无法识别**DataTable**！

错误 ：

> 找不到类型或命名空间名称“DataTable”（您是否缺少 using 指令或程序集引用？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:50:51.640

检查`System.Data`参考列表中的参考。它应该默认添加，但它可能已被删除。

如果存在，请确保`using System.Data;`在文件顶部有声明。

# python - 将对象属性按设定顺序分配给列表

> ID：13444942
> 
> 赞同：0
> 
> 时间：2012-11-18T21:44:21.297
> 
> 标签：python

如何迭代一个对象并将它的所有属性分配给一个列表

从

```
a = []

class A(object):
    def __init__(self):
        self.myinstatt1 = 'one'
        self.myinstatt2 = 'two' 
```

至

```
a =['one','two'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T22:00:47.920

如果您只想存储一堆属性并返回一个列表以便您的 API 可以使用它，请不要创建一个完整的类。改用 a [`namedtuple`](http://docs.python.org/2/library/collections.html#collections.namedtuple)。这是一个例子。

```
>>> import collections
>>> Point = collections.namedtuple('Point', ['x', 'y'])
>>> p = Point(1, 2)
>>> p
Point(x=1, y=2) 
```

如果您的 API 只需要一个序列（不是特别是 a `list`），您可以`p`直接传递。如果它特别需要一个列表，则将`Point`对象转换为列表是微不足道的。

```
>>> list(p)
[1, 2] 
```

您甚至可以对新创建的类进行子`Point`类化并添加更多方法（文档有详细信息）。如果`namedtuple`不能满足您的需求，请考虑对[`abc.Sequence`](http://docs.python.org/2/library/collections.html#collections.Sequence)抽象基类进行子类化或将其用作 mixin。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T22:02:25.400

`list`一种方法是通过实现部分或全部[容器 API](http://docs.python.org/2/reference/datamodel.html#emulating-container-types)使您的类表现得像一个。根据您使用的外部 API 的工作方式，您可能只需要实现`__iter__`. 如果它需要更多，你总是可以传递它`list(a)`，它将使用迭代器构建一个列表。

这是一个添加`__iter__`方法的简单示例：

```
class A(object):
    def __init__(self):
        self.myAttr1 = "one"
        self.myAttr2 = "two"

    def __iter__(self):
        yield self.myAttr1
        yield self.myAttr2 
```

# c - 用C读取文件

> ID：13444944
> 
> 赞同：0
> 
> 时间：2012-11-18T21:44:28.100
> 
> 标签：c, string

我正在读取我的 C 程序中的文件并将其中的每个单词与我的单词进行比较，该单词是通过命令行参数输入的。但是我崩溃了，我不明白出了什么问题。如何跟踪此类错误？我的情况有什么问题？

我的编译器是铿锵的。代码编译得很好。运行时显示“分段错误”。

这是代码。

```
#include <stdio.h>
#include <string.h>

int main(int argc, char* argv[])
{
    char* temp = argv[1];
    char* word = strcat(temp, "\n");

    char* c = "abc";
    FILE *input = fopen("/usr/share/dict/words", "r");

    while (strcmp(word, c))
    {
        char* duh = fgets(c, 20, input);
        printf("%s", duh); 
    }

    if (!strcmp (word, c))
    {
        printf("FOUND IT!\n");
        printf("%s\n%s", word, c);  
    }

    fclose(input);    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T22:11:10.760

这里的问题是您试图在 C 中处理字符串，就像在另一种语言（如 C++ 或 Java）中一样，它们是可调整大小的向量，您可以轻松地将任意数量的数据附加或读取到其中。

C字符串的级别要低得多。它们只是一个字符数组（或指向此类数组的指针；无论如何，数组可以被视为指向它们在 C 中的第一个元素的指针），并且字符串被视为该数组中的所有字符，直到第一个空字符. 这些数组是固定大小的；如果你想要一个任意大小的字符串，你需要自己分配它`malloc()`，或者在堆栈上分配你想要的大小。

这里有点令人困惑的一件事是您使用的是非标准类型`string`。鉴于上下文，我假设它来自您的`cs50.h`, 并且只是一个 typedef 到`char *`. 如果您实际使用`char *`而不是，它可能会减少混淆`string`；使用 typedef 掩盖了真正发生的事情。

让我们从第一个问题开始。

```
 string word = strcat(argv[1], "\n"); 
```

`strcat()`将第二个字符串附加到第一个字符串上；它从第一个字符串的空终止符开始，并用第二个字符串的第一个字符替换它，依此类推，直到它在第二个字符串中达到空值。为了使其工作，包含第一个字符串的缓冲区需要有足够的空间来容纳第二个字符串。如果没有，您可能会覆盖任意其他内存，这可能会导致您的程序崩溃或出现各种其他意外行为。

这是一个插图。假设`argv[1]`包含单词`hello`，并且缓冲区具有与其所需的空间一样多的空间。之后是其他一些数据；我已经填写`other`了示例，虽然它实际上不是那样，它可以是任何东西，它可能重要也可能不重要：

```
+---+---+---+---+---+---+---+---+---+---+---+---+
| h | e | l | l | o | \0| o | t | h | e | r | \0|
+---+---+---+---+---+---+---+---+---+---+---+---+ 
```

现在如果你使用`strcat()`append `"\n"`，你会得到：

```
+---+---+---+---+---+---+---+---+---+---+---+---+
| h | e | l | l | o | \n| \0| t | h | e | r | \0|
+---+---+---+---+---+---+---+---+---+---+---+---+ 
```

你可以看到我们已经覆盖了`other`之后的数据`hello`。这可能会导致各种问题。要解决此问题，您需要将您的字符串复制`argv[1]`到一个新字符串中，该字符串有足够的空间加上一个字符（并且不要忘记尾随的空值）。您可以调用`strlen()`以获取字符串的长度，然后为 . 添加 1，`\n`为结尾的 null 添加 1，以获得您需要的长度。

实际上，与其尝试将 a 添加`\n`到您从命令行输入的单词中，我建议`\n`您从输入的单词中删除 ，或者使用`strncmp()`来比较除最后一个字符（the `\n`）之外的所有字符。一般来说，最好在 C 中避免附加字符串，因为附加字符串意味着您需要分配内存并复制内容，这样做很容易出错，而且效率低下。高级语言通常会为您处理细节，使附加字符串变得更容易，尽管仍然同样低效。

编辑后，您将其更改为：

```
 char* temp = argv[1];
    char* word = strcat(temp, "\n"); 
```

然而，这也有同样的问题。A`char *`是指向字符数组的指针。您的`temp`变量只是复制指针，而不是实际值；它仍然指向同一个缓冲区。这是一个插图；我为了演示的目的编了地址，在真机中这些东西之间会有更多的对象，但这对于演示的目的应该足够了。

```
+------------+---------+-------+
|    name    | address | value |
+------------+---------+-------+
| argv       |    1000 |  1004 |-------+
| argv[0]    |    1004 |  1008 | --+ <-+
| argv[1]    |    1006 |  1016 | --|---+
| argv[0][0] |    1008 |   'm' | <-+   |
| argv[0][1] |    1009 |   'y' |       |
| argv[0][2] |    1010 |   'p' |       |
| argv[0][3] |    1011 |   'r' |       |
| argv[0][4] |    1012 |   'o' |       |
| argv[0][5] |    1013 |   'g' |       |
| argv[0][6] |    1014 |     0 |       |
| argv[1][0] |    1016 |   'w' | <-+ <-+
| argv[1][1] |    1017 |   'o' |   |
| argv[1][2] |    1018 |   'r' |   |
| argv[1][3] |    1019 |   'd' |   |
| argv[1][4] |    1020 |     0 |   |
+------------+---------+-------+   | 
```

现在，当您创建`temp`变量时，您所做的就是复制`argv[1]`到一个新的`char *`：

```
+------------+---------+-------+   | 
|    name    | address | value |   |
+------------+---------+-------+   |
| temp       |    1024 |  1016 | --+
+------------+---------+-------+ 
```

作为旁注，你也不应该在`argv[1]`不检查`argc`大于 1 的情况下尝试访问。如果有人没有传入任何参数，那么`argv[1]`它本身就无法访问。

我会继续下一个问题。

```
 string c = "abc";

    // ...

        char* duh = fgets(c, 20, input); 
```

在这里，您指的是静态字符串`"abc"`。在源代码中出现的字符串，如`"abc"`，进入程序内存的一个特殊的只读部分。记住我说的话；`string`这里只是一种说法`char *`。所以`c`实际上只是指向这个只读内存部分的指针；并且它只有足够的空间来存储您在文本中提供的字符（4，用于`abc`和终止字符串的空字符）。`fgets()`它的第一个参数是一个存储正在读取的字符串的位置，第二个参数是它拥有的空间量。因此，您尝试将最多 20 个字节读取到一个只读缓冲区中，该缓冲区只有 4 个空间。

您需要在堆栈上分配用于读取的空间，例如：

```
char c[20]; 
```

或动态地，使用`malloc()`：

```
char *c = malloc(20); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T22:14:11.130

代码相当有缺陷。另一个：

```
char* duh = fgets(c, 20, input); 
```

在这里定义一个指向 char 的指针，不要初始化它（因此它包含一个随机值），然后将最多 20 个字节写入随机数据指向的地址。如果你幸运的话，你会得到一个现金。如果没有，您将覆盖其他一些重要数据。幸运的是，当今使用的大多数系统都不允许您访问另一个程序的地址空间，因此代码只会对其自身造成严重破坏。

有问题的行可能如下所示：

```
#define BUFFERSIZE 1024
...
while (reasonable condition) {
    char *duh = malloc(BUFERSIZE);
    if (NULL == duh) { /* not enough memory - handle error, and exit */
    }
    duh = fgets(duh, BUFFERSIZE, input);
    if (NULL == duh) { /* handle error or EOF condition */
    } else { /* check that the line is read completely,
        i.e. including end-of-line mark,
        then do your stuff with the data */
    }
    free (duh);
} 
```

当然，您可以只分配一次缓冲区（在循环之外）并重用它。这`#define`使得调整最大缓冲区大小变得容易。

或者，在最近的系统上，您可以使用`getline()`，它能够为您分配适当大小的缓冲区。你**必须** `free()`在循环结束时。

如果您使用的是 Linux/BSD，请使用`man`（例如`man fgets`）获取有关功能的信息，否则请使用 Internet 或一本像样的 C 书籍来获取文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T21:51:11.827

我看到的第一个问题是：

```
string word = strcat(argv[1], "\n"); 
```

您在此处将字符添加到缓冲区的末尾。运行时环境为您分配的缓冲区，您应该考虑只读。

**编辑**

恐怕您对代码的更改仍然具有相同的效果。

```
char* temp = argv[1]; 
```

指向`temp`与 相同的缓冲区`argv[1]`。您需要分配适当大小的缓冲区并使用它。

```
char* temp = (char*)malloc(sizeof(char) * (strlen(argv[1]) + 2)); 
```

是`+2`用于添加`\n`和`\0`结束。比你这样做：

```
strcpy(temp, argv[1]);
strcat(temp,"\n"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T21:57:48.643

首先，我的 C 知识很老，所以我不确定字符串是什么。无论哪种方式，它都是有帮助的，但并非绝对需要有一个很好的预置零缓冲区来读取文件的内容。因此，无论您是归零`word`还是执行以下操作，请先将输入归零。

```
#define IN_BUF_LEN 120
char in_buf[IN_BUF_LEN] = {0}; 
```

120 个字符是一个安全的大小，假设您的大部分文本行的长度约为 80 个字符或更少。

其次，您基于 a 的值循环`strcmp`而不是实际读取文件。它可能会完成同样的事情，但我会`while`以到达文件结尾为基础。

最后，您声明`duh`了一个指针，而不是一个存储`fgets`返回值的地方。这也是个问题。所以，`duh`应该与`in_buf`上面类似地声明。

最后，您`argv[1]`在编译时分配值，而不是运行时。我看不出你在哪里得到你想要的。如果您声明`temp`为指针然后分配`argv[1]`给它，您将只有另一个指向 的指针`argv[1]`，但实际上并未将值复制`argv[1]`到局部变量。为什么不直接使用`argv[1]`？

# ruby-on-rails - Rails HABTM 关联没有使用 .clear 清除，想法？

> ID：13444947
> 
> 赞同：1
> 
> 时间：2012-11-18T21:44:38.457
> 
> 标签：ruby-on-rails, ruby, associations, has-and-belongs-to-many

高人。这不是我认为应该的方式，这意味着我做错了；

```
class Tag < ActiveRecord::Base
  has_and_belongs_to_many :properties
end

class Property < ActiveRecord::Base
  has_and_belongs_to_many :tags

  def amenities
    tags.where(:classification => :amenity)
  end
end 
```

所以我有属性和标签。它们与数据透视表有 HABTM 关系。

当我`.tags`对一个属性执行 a 时，我会得到完整的列表，如果我`.clear`在该完整列表上执行 a ，它会正确地从数据库中删除关联。

当我执行 a 时，`.amenities`我只会得到正确标记为舒适性分类的那些标签，但是如果我`.clear`对这些结果执行 a ，它将无法删除它们，而只是`.amenities`在控制台中再次执行查询，输出为`[]`.

所以这意味着它只是`.clear`'结果数组..不是我真正想要的关联。

那么问题来了；`.clear`从 HABTM 关系中建立关联的正确方法是什么，同时给它本质上一个`where`子句来限制哪些关联被删除？

多谢你们。希望这不会太混乱..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:12:07.537

除了定义查询标签的方法之外，您还可以添加另一个与条件关联的标签，例如：

```
class Property < ActiveRecord::Base
  has_and_belongs_to_many :tags

  # this will be just like the tags association, except narrow the results
  # to only tags with the classification of 'amenity'
  has_and_belongs_to_many :amenities, 
                          :class_name => 'Tag', 
                          :conditions => { :classification => 'amenity' }

end 
```

`clear`，以及任何其他 habtm 关联方法，应该按预期工作。

# graphics - 帕斯卡得到了预期的短字符串

> ID：13444948
> 
> 赞同：1
> 
> 时间：2012-11-18T21:44:56.737
> 
> 标签：graphics, syntax-error, pascal

```
program MouseInput;
Uses WinCrt,WinMouse, Graph;
Var
   GraphicsDriver, GraphicsMode,
   ErrCode : smallint;
   x, y: shortstring;

Begin
x:=GetMouseX;
Y:=GetMouseY;

     Writeln('Initialising Graphics, please wait...');
     GraphicsDriver := Detect;
     InitGraph(GraphicsDriver, GraphicsMode,'');
     GetmouseX();
     GetmouseY();
     OuttextXY(0,0,x);
     readln();
end. 
```

它给了我错误：23 / 20 mouse.pas 错误：不兼容的类型：得到“WORD”预期“SHORTSTRING”但我不知道如何更改它，因此它可以工作，因为 GetmouseX 需要是 Word。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:53:06.210

将 X,Y 改回 word 并将 outtextxy 行更改为

```
 OuttextXY(0,0,inttostr(x)); 
```

确保“sysutils”在您的使用条款中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T22:01:09.893

您的 GetMouseX 和 GetMouseY 函数不返回结果，并且在您调用它们的地方不会读取结果，我原以为您会收到堆栈溢出错误，因为它们调用了自己（或者这是编译器错误）。

刚刚看到 paulsm 的评论（我不记得 Turbo Pascal 函数）我认为您的代码应该是这样的：

```
 InitGraph(GraphicsDriver, GraphicsMode,'');
 x := GetmouseX();
 y := GetmouseY();
 OuttextXY(0,0,x); 
```

从[您的链接](http://orion.lcg.ufrj.br/RPMS/myrpms/lazarus/fpc-lazarus-doc/rtl/mouse/getmousex.html)：

```
InitGraph(GraphicsDriver, GraphicsMode,'');
InitMouse;
x := GetmouseX;
y := GetmouseY; 
```

# orchardcms - Orchard CMS 内容字段与类属性

> ID：13444950
> 
> 赞同：0
> 
> 时间：2012-11-18T21:45:06.350
> 
> 标签：orchardcms

什么时候应该使用 CMS 中的字段，什么时候应该使用类属性和数据库字段？

我的场景：创建了一个包含字段使用（文本）和价格（双）的产品内容部分。然后我创建了一个内容类型产品并添加了该部分。

我还可以在模型中创建产品记录并添加产品表。还有一个带有驱动程序等的部分。乍一看，除了需要编程的选项 2 之外，我看不出有什么不同。

但是我确实遇到了一个问题：在选项 2 中，我可以使用存储库并以编程方式创建很多项目。在选项 1 中，我可以创建产品内容项，但无法填写产品部分的字段（没有错误，但字段仍然为空）

那么何时使用选项 1，何时使用选项 2？我对选项 1 的问题与该选项有关吗？

编辑：澄清选项1的问题

我创建了一个产品部分。在 productpart 中，我添加了小数字段 price，并且我添加了一个字段 Usage of product，它是一个文本字段。

在代码中，我有以下内容：

```
 dynamic item = _cm.New("Product");
        item.TitlePart.Title = "Mijn dummy product";
        item.BodyPart.Text = "Some dummy text for this product";
        item.ProductPart.Price.Value = new decimal(20.5);
        item.ProductPart.Usage.Value = "Some dummy usage of this product";
        _cm.Create(item); 
```

运行代码后，使用正确的标题和正文创建产品，但使用和价格出现空。我还尝试了 item.As<> 方法。但这不会编译为 As，因为我没有创建具有该名称的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:29:57.567

不同之处在于，只能通过投影查询字段，但更一般地，部件和字段用于不同的用途：部件是可重用的，而不是字段。例如，价格将成为任何产品的特征，因此它可能应该是部分属性。用法，我不知道，这听起来对你正在做的事情相当具体，作为一个领域可能会做得更好。

至于选项 1 的问题，如果没有看到您的代码，很难说，但很可能您做错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T07:57:25.093

显然，在访问内容部分和字段之前必须先创建该项目。至少它对我有用。

请验证我的分析是否正确。如果是这样，我会将其标记为答案，以及 Bertrand 的答案。

代码现在如下所示：

```
 var item = _cm.New("Product");
    item.As<TitlePart>().Title = "Mijn dummy product";
    item.As<BodyPart>().Text = "Some dummy text for this product";

    //Create first before accessing the contentparts that are dynamic.
    _cm.Create(item);

    //And then access the product via dynamic object.
    dynamic dyn = item;
    item.ProductPart.Price.Value = new decimal(20.5);
    item.ProductPart.Usage.Value = "Some dummy usage of this product"; 
```

# php - 选择时出现 PDO 错误？

> ID：13444951
> 
> 赞同：1
> 
> 时间：2012-11-18T21:45:06.633
> 
> 标签：php, mysql, pdo

我在（不成功）尝试从我的 MySQL 数据库中获取一行时执行以下操作：

```
$qry = $this->pdo->prepare("SELECT `post`,`user`,`id` FROM `posts` WHERE `id`='?' ORDER BY `id` DESC");
$qry->execute(array($this->id));
$qry->setFetchMode(PDO::FETCH_ASSOC);

$this->row = $qry->fetch() or die(print_r($qry->errorInfo(), true)); 
```

（它是类内部的一个函数，因此`$this`使用了变量）。所以错误发生在`$qry->fetch()`并且错误消息是：

`Array ( [0] => 00000 )`

这是什么意思？为什么它不起作用？

**回答：**周围的`'`引号`WHERE id='?'`是不必要的。它应该是`WHERE id=?`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:45:43.020

删除参数周围的单引号

```
`id` = ? 
```

# ruby-on-rails - 为什么捆绑安装rails 0.9.5？

> ID：13444954
> 
> 赞同：1
> 
> 时间：2012-11-18T21:45:18.450
> 
> 标签：ruby-on-rails, bundler

在我的 Gemfile 中，我有：

宝石“导轨”

直到昨天它运行良好，我的 Rails 版本是 3.2.9。我没有添加新的 gem，今天，在运行 bundle update 之后，我看到它安装了 rails-0.9.5。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:09:43.437

`bundle update`如果您没有在 Gemfile 中设置次要版本，则在不指定要更新的 gem 的情况下运行是个坏主意。这样做的原因是因为您可能会升级具有不同公共接口的 gem，它会破坏您的应用程序。

我建议在 Gemfile 中指定 Rails 的主要和次要版本，以便它“锁定”它，这样它只会升级补丁级别：

```
gem "rails", "~> 3.2.9" 
```

然后当你想升级它时，只需运行：

```
bundle update rails 
```

这会将 Rails 更新到最新补丁（3.2.x），只要它们遵循[语义版本控制](http://semver.org/)，您就不必担心它会破坏您的应用程序。

# mysql - 简单插入语句的问题

> ID：13444956
> 
> 赞同：0
> 
> 时间：2012-11-18T21:45:26.397
> 
> 标签：mysql, sql

我正在处理这段代码，我正在使用一个简单的插入语句，但我无法弄清楚它为什么不起作用。如果有人能看到我做错了什么，请告诉我。谢谢！这是我得到的错误：

```
You have an error in your SQL syntax; check the manual that corresponds 
to your MySQL     server version for the right syntax to use near 'long,comments) 
VALUES (2 ,2012-11-18 21:25:30, 39.3436984, -76.5856958, hh)' at line 1 
```

这是代码：

```
 mysql_query ("INSERT INTO incidents (emergency_type,date_time,lat,long,comments)  
VALUES  (2 ,$catchDate, $catchLat, $catchLong, $catchDescription)") or die(mysql_error());   
 echo"<br /> Data inserted"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:51:53.457

Long 是保留字，请尝试用反引号括起来的 `long`。

参考[https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

快速浏览文档会发现您应该研究[PDO::prepare](http://www.php.net/manual/en/pdo.prepare.php "PDO::准备")和[PDO::execute](http://www.php.net/manual/en/pdostatement.execute.php "PDO::执行")来执行此操作。您当前的方法似乎容易受到 SQL 注入的影响。

我不是 PHP 程序员，但类似：

```
$db = get a db handle from somewhere
$st = $db->prepare('Insert Into Incidents (emergency_type, date_time, lat, `long`, comments) Values (?, ?, ?, ?, ?)');
$st->execute(array(2 ,$catchDate, $catchLat, $catchLong, $catchDescription)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:47:16.670

```
INSERT INTO incidents (emergency_type,date_time,lat,`long`,comments)  
VALUES  (2 ,$catchDate, $catchLat, $catchLong, '$catchDescription') 
```

`LONG`位于[MySQL 保留关键字](https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)列表中。用反引号转义它。

还有一件事，`date_time`and的值`comments` *必须用单引号括起来*，因为它们不是数字。

并且您的查询现在很容易受到攻击`SQL Injection`，请花点时间阅读下面的文章

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T21:54:15.503

[LONG 是 mysql 中的关键字/保留字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。您可以使用反引号来逃避它

```
INSERT INTO incidents (emergency_type,date_time,lat,`long`,comments) 
```

或将您的表列名称更改为`longitude`

# android - 从 App Inventor 转移到 Eclipse 的技巧

> ID：13444959
> 
> 赞同：7
> 
> 时间：2012-11-18T21:45:39.520
> 
> 标签：android, android-2.2-froyo, android-sdk-2.3, app-inventor, android-sdk-tools

我非常擅长使用 AppInventor 构建 Android 应用程序。我对 C++ 有很好的了解，而对 Java 和 Java 中的 GUI 构建知之甚少。建议我应该如何从 App Inventor 转移到 Eclipse 来构建 Android 应用程序？我应该走哪条路？在 Eclipse 中构建是否类似于在 AppInventor 中构建，比如定义不同的组件然后处理它们的事件？还是远不止这些？请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T21:03:33.467

在[java.appinventor.org](http://java.appinventor.org)上还有**AppInventor to Java Bridge 项目**，详情见下文

> 关于：
> 
> AppInventor to Java Bridge 项目是对 AppInventor 的补充，它从通过 AppInventor 创建的现有应用程序创建应用程序的 Java 编写版本。通过 AppInventor 创建应用程序后，用户可以下载使用 JavaBridge* 库的 Java 编写的应用程序版本。
> 
> 我们的应用程序可以做什么：
> 
> *   使用 AppInventor 在 JavaBridge 中创建 Android 项目
> *   支持使用短信、互联网和/或声音的应用程序
> 
> 限制：
> - 尚不支持位置感知应用程序 - 尚不支持
> 嵌套列表，并且会产生不正确的代码

**更新**：该工具的最新版本可以在这里找到：[java.appinventor.org](http://java.appinventor.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T15:31:30.330

当然，您应该查看**“ALTERNATE Java Bridge”**。由应用程序发明者团队最初构建的常规版本早已被废弃。另一位程序员拿起了火炬，并一直在稳定地使用，并改进了一段时间的桥梁。我自己已经使用了 2 年，非常棒。

谷歌项目位于：**[https ://code.google.com/p/alternate-java-bridge-library/](https://code.google.com/p/alternate-java-bridge-library/)**

谷歌讨论组位于：**[http ://groups.google.com/group/alternate-java-bridge-library-discussion](http://groups.google.com/group/alternate-java-bridge-library-discussion)**

我会去上面的谷歌项目网站准备教程。这很容易上手，而且他非常擅长为新手回答问题（我也可以提供帮助）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T22:32:50.570

您可以查看**[App Inventor Java Bridge](https://groups.google.com/forum/#!msg/app-inventor-instructors/EKZOZLeIavs/KIjf5kMAbwkJ)**。
查看链接以获取大量信息，另请参阅[此处](http://amerkashi.wordpress.com/2011/07/10/howto-using-ai-javabridge/)...

> **Google App Inventor Java Bridge**
> App Inventor Java Bridge 有助于实现从使用 App Inventor for Android 开发 Android 应用程序到使用 Java 和 Android SDK 开发的转变。它允许您将 App Inventor 组件合并到您使用标准 Android SDK 工具在 Java 中创建的应用程序中。如果您一直在使用 App Inventor 并了解一些 Java，那么 Java Bridge 是开始使用 SDK 的好方法，因为使用 App Inventor 组件进行构建隐藏了 Android 框架的许多复杂性。随着经验的积累，您可以切换到常规的 SDK 开发并创建充分利用 Android 功能的应用程序。

这里有另一个链接： [http](http://code.google.com/p/apptomarket/) ://code.google.com/p/apptomarket/您还可以在 Youtube 上找到有关 Java Bridge 的视频，例如[这个](http://www.youtube.com/watch?v=D0hq7yuH2EE)

# php - 如何与我的网站 (php) 和 facebook 或 twitter 通信？

> ID：13444967
> 
> 赞同：-6
> 
> 时间：2012-11-18T21:46:48.857
> 
> 标签：php, facebook, twitter, communication

我想在 facebook 或 twitter 上分享我的文章。如何连接我的网站（php）和 facebook？我不需要任何插件（如 addthis）。我怎么能用php做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:51:57.427

使用[php facebook sdk](https://developers.facebook.com/docs/reference/php/)和[相关的 twitter 库](https://dev.twitter.com/docs/twitter-libraries#php)

# arm - ARM 在寄存器 14 之后从哪里读取程序指令？

> ID：13444969
> 
> 赞同：1
> 
> 时间：2012-11-18T21:46:55.270
> 
> 标签：arm, opcode, instructions

我是如何理解 ARM 架构的基本工作原理的；

有 15 个主寄存器，第 15 个 (r15) 是程序计数器 (PC)。

如果程序计数器指向一个特定的寄存器，那么你怎么能有一个运行超过 14 行的程序呢？

显然这不是真的，但我不明白你怎么能合并一个只有 15 个寄存器的大程序？我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T21:49:34.823

程序计数器指向*内存*，而不是另一个寄存器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-18T21:50:16.597

寄存器不存储程序代码。程序代码在主存中，程序计数器指向下一条指令在内存中的位置。

其他寄存器是高速位置，用于在应用程序处理期间存储临时或经常访问的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:35:35.987

最简单的形式是程序（指令存储器）、数据存储器、堆栈存储器和寄存器。

ARM指令存储在指令存储器中，它们是一系列命令，告诉处理器要做什么。它们永远不会存储在处理器的寄存器中。程序计数器仅指向该指令，该指令只是一个命令，其基本形式具有操作码（操作码）和变量/文字..

所以发生的事情是从程序计数器指向的位置从内存中读取（获取）指令。它没有被加载到寄存器中，而是被解码的控制单元（即知道要执行什么操作，即 add、sub、mov 等）以及在哪里读取/存储其输入和输出。

那么要操作和存储的输入/输出在哪里呢？ARM架构是一种加载/存储架构，这意味着它对加载到其寄存器中的数据进行操作，即R1，R2 .. R7 ..etc ..寄存器可以被认为是所有输入和输出的临时变量存储。使用寄存器是因为它们非常快并且以与处理器频率相同的速度运行，而不是较慢的内存。

现在的问题是，如何首先用值填充这些寄存器？

这些值可以存储在数据存储器或堆栈存储器中，因此有将它们复制到这些寄存器的指令，然后是对它们进行操作并将值存储在寄存器中的指令，然后是其他指令将结果复制回记忆。一些指令还可以加载带有常量的寄存器。

```
Instruction 1 // Copy Variable X into R1 from memory
Instruction 2 // Copy Variable Y into R2 from memory
ADD, R3, R1, R2 // add them together
Instruction 3 // Copy back the result into Memory 
```

我试图让它尽可能简单，有很多细节需要涵盖。需要书：）

# scheme - 列表中的方案返回对

> ID：13444975
> 
> 赞同：0
> 
> 时间：2012-11-18T21:48:04.390
> 
> 标签：scheme, racket

嗨，我收到了错误 mcar：合同违反预期：mpair？给定：（）在运行这些代码时：

```
(define helpy 
  (lambda (y listz)
    (map (lambda (z) (list y z))
         listz)))

(define print
  (lambda (listy)
    (cond
      ((null? list) (newline))
      (#t (helpy (car listy) (cdr listy))
          (print (cdr listy)))))) 
```

我的代码试图在列表中返回对。例如，当我调用 `(print '(a b c))`它时应该返回`((a b) (a c) (b c))`.

我只是修复和更新我的代码，现在它不返回错误但我只能得到对（（ab）（ac），运行这些代码时：

（定义帮助

(lambda (y listz)

(map (lambda (z) (list yz))

列表z）））

（定义打印

（拉姆达（列表）

（条件

((null?listy) (换行符))

(#t (helpy (car listy) (cdr listy)))

```
(print (cdr listy))))) 
```

我认为我的递归有问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:59:01.140

代码有几个问题。首先，按照惯例， a 的“else”子句`cond`应该以 a 开头`else`，而不是 a `#t`。其次，`null?`测试中`print`应该收到`listy`，而不是`list`。第三，你没有对`helpy`in返回的结果做任何事情`print`，你只是在当前列表上前进`print`，`cdr`而不对递归调用返回的值做任何事情。试试这个：

```
(define print
  (lambda (listy)
    (cond
      ((null? listy) (newline))
      (else
       (displayln (helpy (car listy) (cdr listy)))
       (print (cdr listy)))))) 
```

`displayln`只是一个示例，如有必要，请对返回的结果执行其他操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:01:08.960

我尝试这样实现：

```
#lang racket

(define data '(a b c d))

(define (one-list head line-list)
  (if (null? line-list)
      null
      (cons
       (cons head (car line-list))
       (one-list head (rest line-list)))))

(letrec ([deal-data
           (lambda (data)
             (if (null? data)
                 '()
                 (append
                  (one-list (car data) (rest data))
                  (deal-data (rest data)))))])

  (deal-data data)) 
```

运行结果：

```
'((a . b) (a . c) (a . d) (b . c) (b . d) (c . d)) 
```

# validation - 如何在 Zend 框架 2 中使用没有表单类的 InputFilter

> ID：13444977
> 
> 赞同：8
> 
> 时间：2012-11-18T21:48:15.050
> 
> 标签：validation, zend-framework2, zend-inputfilter

我的模型对象实现 InputFilterAwareInterface 并具有 getInputFilter() 方法，该方法返回 Zend\InputFilter\InputFilter 实例

在我的情况下，我不需要表单，我只需要验证数组中的元素。如何在不创建表单类的情况下使用 Zend\InputFilter\InputFilter 验证数组中的数据？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-18T22:36:41.647

希望代码是不言自明的（`setData`设置你的数组，`setValidationGroup`检查所有元素，并`isValid`获得验证结果）：

```
use \Zend\InputFilter\InputFilterInterface;

/* ... */

/** @var $data array */

/** @var $filter InputFilterInterface */
$filter = $this->getInputFilter();

$isValid = $filter->setData($data)
                  ->setValidationGroup(InputFilterInterface::VALIDATE_ALL)
                  ->isValid();

if (!$isValid)
{
    $errorMessages = $filter->getMessages();
    /* ... */
} 
```

# java - 将两个类似的包导入eclipse

> ID：13444983
> 
> 赞同：1
> 
> 时间：2012-11-18T21:48:48.183
> 
> 标签：java, eclipse, import

我有两个需要使用的导入：

```
import net.robotmedia.billing.model.Transaction;
import com.google.analytics.tracking.android.Transaction; 
```

我收到以下错误：

```
The import com.google.analytics.tracking.android.Transaction collides with another import statement 
```

但我需要使用这两个项目。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T21:50:55.197

必须通过键入其完全限定名称来使用其中一个类。例如：

```
net.robotmedia.billing.model.Transaction tx = new net.robotmedia.billing.model.Transaction(); 
```

请记住，导入只是用于让您通过其简单名称使用类，而不是使用其完全限定名称。如果您愿意，您可以在没有任何导入的情况下对所有类进行编码，并始终使用完全限定的类名。它的可读性要低得多，编写起来也更麻烦。但是如果在同一个类中使用了两个具有相同简单名称的类，那么您只能导入其中一个。

# php - 调试 PHP/MySQL

> ID：13444986
> 
> 赞同：2
> 
> 时间：2012-11-18T21:49:01.693
> 
> 标签：php, html, mysqli

我对 PHP/MySQL 非常陌生，我不知道最好的工具集或如何正确调试。

这是我正在处理的代码片段。我有两个主要问题。

1：我注意到转义序列不起作用。在页面显示中忽略所有 \n。

2：我的代码没有进入while循环，因此没有显示结果。当我在 phpMyAdmin 上运行相同的查询时，我得到一个结果。

这是输出：

> 我在你的数据库中！echoinside post我们有一个结果表存在名称：outside post

```
<?php
$mysqli = new mysqli("****", "*****", "******", "******");
if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}
echo "I'm in your db!";
echo "echo";
if( $_POST["submit"] ) {
echo "inside post"; 
    if (!($stmt = $mysqli->prepare("SELECT Cust_name FROM SERVICE_TICKET WHERE Ticket_num=?"))) {
            echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
    }
    if (!$stmt->bind_param("i", $_POST['ticket'])) {
        echo "Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;
    }
    if (!$stmt->execute()) {
        echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
    }
    if (!$stmt->bind_result($Cust_name)) {
        echo "Binding output parameters failed: (" . $stmt->errno . ") " . $stmt->error;
    }
    else {
        echo "We have a result";
        echo "<table><br/>";
        echo "table exists";
        printf("<br/>\n\n\n\n\nname:  %s", $Cust_name);
        while ($stmt->fetch()){
            echo "in while loop";
            echo "<tr>\n<td>".$Cust_name."</td>\n</tr>";
        }
        echo "</table>";
    }

}
echo "outside post";
?> 
```

为表单添加 html：

```
<head>
    <title>Bicycle Store Service Ticket</title>
    <link rel="stylesheet" type="text/css" href="web.css" />
</head>
<body>
    <h1>ACME BICYCLE SHOP</h1>
    <h3 align="center">GET IN GEAR!</h3>

    <form action="search_service.php" method="post">
    <h3>CHECK A SERVICE TICKET</h3>

    <h4>Ticket Number: <input type="text" ticket="ticket">&nbsp;&nbsp;

    <input type="submit" name="submit" value="Search">
    </form>

    <p><a href="index.html">HOME</a></p>
</body>
</html> 
```

任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:51:30.110

**问题 #1：**转义序列*正在*工作，但在 HTML 中，换行符是“无关紧要的空白”，因此不会显示。`<br>`您可以使用标签添加换行符。

**问题 #2：**看起来您的查询返回一个空结果集（没有指定编号的票证），因此第一次调用`$stmt->fetch()`返回 false。

**编辑：** HTML 中带有“ticket”输入的行应如下所示：

```
<h4>Ticket Number: </h4><input type="text" name="ticket">&nbsp;&nbsp; 
```

所以它`name="ticket"`不是`ticket="ticket"`，并且`<h4>`标签应该被关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:52:55.447

> 1：我注意到转义序列不起作用。在页面显示中忽略所有 \n。

`\n`不是转义字符。它是换行符（LF ala 换行符）。并且它在 HTML 外部块中被忽略，`<PRE>`因此要么添加`<PRE>`（但这会“杀死”标记，或者使用`<br />`这意味着 exaclty`\n`但“在 HTML 中”。

PS：不需要的请勿使用`?>`。

# erlang - erlang的EXIT和DOWN信号

> ID：13444993
> 
> 赞同：1
> 
> 时间：2012-11-18T21:49:39.033
> 
> 标签：erlang, rabbitmq, exit, erlang-supervisor

以下代码也来自`rabbitmq's supervisor2.erl`. 代码的功能是杀死主管的孩子，为每个孩子：

1.  monitor child 发送一个可捕获的退出信号

2.  启动计时器

3.  如果计时器到达，则发送一个无法捕获的退出信号（kill）。

我的问题`EXIT and DOWN signal.`

如果孩子没有捕获退出信号，主管会收到2个信号，第一个是`exit`信号，然后是`DOWN`信号，对吗？信号顺序是否得到严格保证？

如果孩子陷阱`exit`信号，主管只会收到1个信号，只是`down`信号，是吗？

```
terminate_simple_children(Child, Dynamics, SupName) ->
    Pids = dict:fold(fun (Pid, _Args, Pids) ->
                         erlang:monitor(process, Pid),
                         unlink(Pid),
                         exit(Pid, child_exit_reason(Child)),
                         [Pid | Pids]
                     end, [], Dynamics),
    TimeoutMsg = {timeout, make_ref()},
    TRef = timeout_start(Child, TimeoutMsg),
    {Replies, Timedout} =
        lists:foldl(
          fun (_Pid, {Replies, Timedout}) ->
                  {Reply, Timedout1} =
                      receive
                          TimeoutMsg ->
                              Remaining = Pids -- [P || {P, _} <- Replies],
                              [exit(P, kill) || P <- Remaining],
                              receive {'DOWN', _MRef, process, Pid, Reason} ->
                                      {{error, Reason}, true}
                              end;
                          {'DOWN', _MRef, process, Pid, Reason} ->
                              {child_res(Child, Reason, Timedout), Timedout};
                          {'EXIT', Pid, Reason} -> %%<==== strict signal, first EXIT, then DOWN.
                              receive {'DOWN', _MRef, process, Pid, _} ->
                                      {{error, Reason}, Timedout}
                              end
                      end,
                  {[{Pid, Reply} | Replies], Timedout1}
          end, {[], false}, Pids),
    timeout_stop(Child, TRef, TimeoutMsg, Timedout),
    ReportError = shutdown_error_reporter(SupName),
    [case Reply of
         {_Pid, ok}         -> ok;
         {Pid,  {error, R}} -> ReportError(R, Child#child{pid = Pid})
     end || Reply <- Replies],
    ok. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:07:09.757

您在这里混淆了两件事：

*   首先，孩子是一个陷阱出口，但您正在查看主管代码。孩子对退出信号所做的事情不会直接影响主管。
*   退出`kill`信号*不能*被捕获。它总是杀死孩子。

孩子身上`supervisor2`有显示器。这意味着它保证会收到一条`'DOWN'`消息，并且此代码关注的是获得那种消息。如果`supervisor2`也是陷阱出口，它会`'EXIT'`另外得到消息。

# magento - 在可配置的产品视图 Magento 上显示动态 SKU

> ID：13444995
> 
> 赞同：3
> 
> 时间：2012-11-18T21:49:56.553
> 
> 标签：magento, dynamic

我有这个脚本可以在选择选项上显示动态 sku，但我无法开始工作。

正在加载正确的 sku，但在选择时没有任何反应。

此代码获取 Javascript 上的 sku 列表，并在可配置产品视图上更新产品选择选项的 div。

```
<?php
$_product    = $this->getProduct();
$_attributes = Mage::helper('core')->decorateArray($this->getAllowAttributes());
?>
<?php if ($_product->isSaleable() && count($_attributes)):?>
    <dl>
    <?php foreach($_attributes as $_attribute): ?>
        <dt><label class="required"><em>*</em><?php echo $_attribute->getLabel() ?></label></dt>
        <dd<?php if ($_attribute->decoratedIsLast){?> class="last"<?php }?>>
            <div class="input-box">
                <select name="super_attribute[<?php echo $_attribute->getAttributeId() ?>]" id="attribute<?php echo $_attribute->getAttributeId() ?>" class="required-entry super-attribute-select" onchange="return changeSku(this);">
                    <option><?php echo $this->__('Choose an Option...') ?></option>
                  </select>
              </div>
        </dd>
    <?php endforeach; ?>
    </dl>
    <script type="text/javascript">
        var spConfig = new Product.Config(<?php echo $this->getJsonConfig() ?>);
    </script>

<?php endif;?>

<?php
$conf = Mage::getModel('catalog/product_type_configurable')->setProduct($_product);
$col = $conf->getUsedProductCollection()->addAttributeToSelect('*')->addFilterByRequiredOptions();

echo '<script type="text/javascript">';

echo '
document.observe("dom:loaded", function() {
  $("sku-container").update("<strong>Product Id: </strong> Select an option to display Product Id");
});
';
echo ' function changeSku(sel){';       

$itemId = array();           
foreach($col as $simple_product){
$itemId[] = array($simple_product->getSelectLabel() => $simple_product->getSku());
} 

//echo "<pre>";
//print_r($itemId);
//echo "</pre>";

foreach($itemId as $val){
 foreach($val as $k => $v){
echo "\n".'if(sel.options[sel.selectedIndex].value == "'.$k.'"){'."\n";
echo '$("sku-container").update("<strong>Product Id: </strong>'.$v.'");'. "\n";
echo '}';
    }
}

echo "\n".'if(sel.options[sel.selectedIndex].value == ""){'."\n";
echo '$("sku-container").update("<strong>Product Id: </strong> Select an option to display Product Id");'. "\n";
echo '}'; 

echo "}";
echo "\n</script>";
?> 
```

我很感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T01:17:22.343

该脚本几乎是正确的，除了`$simple_product->getSelectLabel()`是一个错误的键。简单的产品模型中不存在这样的方法/属性。为了使脚本工作，这个键应该被替换为一个正确的 - 一个产品 ID。利用产品 ID，可以找到所选择产品的 sku。

因此，首先您需要重组`itemId`数组以使其成为“productId => productSku”映射：

```
$productMap = array();
foreach($col as $simpleProduct){
    $productMap[$simpleProduct->getId()] = $simpleProduct->getSku();
} 
```

然后您需要更改“onchange”函数调用以将 Configurable 的属性 id 传递给`changeSku()`函数。因此，底层逻辑能够搜索适当的简单产品属性。

```
onchange="return changeSku(<?php echo $_attribute->getAttributeId() ?>, this);"> 
```

之后，您需要利用可配置的配置来将选定的简单产品的属性 id 映射到选定的产品 id：

```
function changeSku(confAttributeId, sel) {
    var productMap = <?php echo Mage::helper('core')->jsonEncode($productMap);?>;
    var selectedAttributeId = sel.options[sel.selectedIndex].value;
    if (selectedAttributeId) {
        var options = spConfig.config.attributes[confAttributeId].options;
        var productId = options.find(function (option) {return option.id == selectedAttributeId}).products[0]
        $("sku-container").update("<strong>Product Id: </strong>" + productMap[productId]);
    } else {
        $("sku-container").update("<strong>Product Id: </strong> Select an option to display Product Id");
    }
} 
```

供您参考，下面是整个模板的外观摘要（我已经美化了一点）：

```
<?php
$_product    = $this->getProduct();
$_attributes = Mage::helper('core')->decorateArray($this->getAllowAttributes());
?>
<?php if ($_product->isSaleable() && count($_attributes)):?>
<dl>
    <?php foreach($_attributes as $_attribute): ?>
    <dt><label class="required"><em>*</em><?php echo $_attribute->getLabel() ?></label></dt>
    <dd<?php if ($_attribute->decoratedIsLast){?> class="last"<?php }?>>
        <div class="input-box">
            <select name="super_attribute[<?php echo $_attribute->getAttributeId() ?>]" id="attribute<?php echo $_attribute->getAttributeId() ?>" class="required-entry super-attribute-select"
                    onchange="return changeSku(<?php echo $_attribute->getAttributeId() ?>, this);">
                <option><?php echo $this->__('Choose an Option...') ?></option>
            </select>
        </div>
    </dd>
    <?php endforeach; ?>
</dl>
<script type="text/javascript">
    var spConfig = new Product.Config(<?php echo $this->getJsonConfig() ?>);
</script>

    <?php endif;?>

<div id="sku-container"></div>

<?php
$conf = Mage::getModel('catalog/product_type_configurable')->setProduct($_product);
$col = $conf->getUsedProductCollection()->addAttributeToSelect('*')->addFilterByRequiredOptions();

$productMap = array();
foreach($col as $simpleProduct){
    $productMap[$simpleProduct->getId()] = $simpleProduct->getSku();
}
?>

<script type="text/javascript">

document.observe("dom:loaded", function() {
  $("sku-container").update("<strong>Product Id: </strong> Select an option to display Product Id");
});

function changeSku(confAttributeId, sel) {
    var productMap = <?php echo Mage::helper('core')->jsonEncode($productMap);?>;
    var selectedAttributeId = sel.options[sel.selectedIndex].value;
    if (selectedAttributeId) {
        var options = spConfig.config.attributes[confAttributeId].options;
        var productId = options.find(function (option) {return option.id == selectedAttributeId}).products[0]
        $("sku-container").update("<strong>Product Id: </strong>" + productMap[productId]);
    } else {
        $("sku-container").update("<strong>Product Id: </strong> Select an option to display Product Id");
    }
}
</script> 
```

这将完成您最初需要的任务。

* * *

还要注意以下几点

1.  **您的方法不适用于具有两个或更多可配置属性的可配置产品**。对于该产品，在用户为所有选择输入选择值之前，不知道最终的简单产品。所以应该改变一种方法，在输出 SKU 之前检查所有选择。
2.  **当用户编辑产品配置而不是为新产品指定配置时，代码不考虑这种情况**。您可以从购物车点击编辑链接进入编辑模式。在这种情况下，所有选择输入都将预先填充先前选择的值。但文本会显示“选择一个选项以显示产品 ID”。该脚本还可能在编辑模式下产生其他 Javascript 错误。代码应稍作修改，以支持编辑模式。
3.  **模板充满了逻辑**。Magento 模板应该只有简单的打印和`foreach`迭代。所有类似的方法`$conf->getUsedProductCollection()->addAttributeToSelect('*')->addFilterByRequiredOptions()`都最好移动到块中。这降低了代码复杂度。希望能帮助到你。

# jquery - 获取最后点击的项目 ID

> ID：13444997
> 
> 赞同：3
> 
> 时间：2012-11-18T21:50:09.723
> 
> 标签：jquery, asp.net

我有这样的功能：

```
$(document).ready(function () {
          $("*").click(function () {             
              alert($(this).attr('id').toString());                
        });
    }); 
```

在页面上我有这样的东西：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<script language="javascript" src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
<div id="div1">Some stuff
    <div id="div2">Some other stuff
    <asp:Button ID="Button1" runat="server" Text="Button" />        
        <div id="div3">More stuff
        <asp:Button ID="Button2" runat="server" Text="Button" />        
        </div>
    </div>        
</div> 
```

如果我单击某些东西它可以正常工作，但它会提醒我 3 次（或更多）。例如：我点击button2。Alertbox 与 button2.id 一起出现，然后与 div3.id、div2.id 等一起出现。它显示了该按钮下的所有 id。如果我尝试将此 id 存储到这样的变量中：

```
 var storedId = $(this).attr('id').toString(); 
```

它存储最后一个。这意味着我得到了form1的ID。

我怎样才能得到第一个id？单击按钮或单击标签的 id 或我页面上的任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T21:51:49.233

您需要停止事件在 DOM 树上的传播，这样父项就不会看到相同的事件。在 jQuery 中，你可以这样做`e.stopPropagation()`：

```
$("*").click(function(e) {
    alert($(this).attr('id').toString());                
    e.stopPropagation();
}); 
```

仅供参考，这是一种非常低效的方法。您最好使用单个事件处理程序来做到这一点，该处理程序利用事件冒泡并在文档中捕获冒泡的单击事件并仅在一个地方检查它们：

```
$(document).click(function(e) {
    alert(e.target.id);                
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T21:51:27.193

您应该停止事件传播[`stopPropagation()`](http://api.jquery.com/event.stopPropagation/)：

```
$("*").click(function(e) {
    alert($(this).attr("id").toString());
    e.stopPropagation();
}); 
```

方法*防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T21:52:59.117

事件冒泡，因此它将显示它冒泡的每个元素的 id。

使用该[`stopPropagation`方法](http://api.jquery.com/event.stopPropagation/)防止事件冒泡：

```
$(document).ready(function () {
  $("*").click(function (e) {             
    e.stopPropagation();
    alert($(this).attr('id').toString());                
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T00:05:13.877

其他人回答说，您可以通过停止传播来筛选其余的“无用”事件。+1，对于这种情况，我认为这是完全正确的。但是，我认为除了使用 * 选择器之外，您还可以使用更好的方法。

`$("*").click()`使用[*所有选择器 ("*")*](http://api.jquery.com/all-selector/)。当使用*all 选择器*(*) 时，它会将该事件附加到页面上的每个元素。除非您有理由为页面上的*每个*元素处理单击事件（可能，但极不可能），否则使用这种方法并不理想（性能下降、不良做法、过于复杂）。

更好的方法是将点击事件分配给单个元素（一种网络标准）。

所以，如果给定这种情况

```
<asp:Button ID="Button1" runat="server" Text="Button" />        
<div id="div3">More stuff
    <asp:Button ID="Button2" runat="server" Text="Button" />        
    </div>
</div> 
```

使用两个事件处理程序（每个按钮一个）

```
$(document).ready(function () {
    $("#Button1").click(function () {             
          alert($(this).attr('id').toString());//note that this.id will also work                
    });
    $("#Button2").click(function () {             
          alert($(this).attr('id').toString());                
    });
}); 
```

尽管这种方法需要更多的事件定义，但它通过轻松地为每个元素提供独特的事件处理、更易读的代码和更好的关注点分离来弥补这一点。

# asp.net - 如何将添加到 ajax html 编辑器的文本保存为 html 文档？

> ID：13444999
> 
> 赞同：1
> 
> 时间：2012-11-18T21:50:16.643
> 
> 标签：asp.net, html, ajax

我在我的 ASP.NET Web 应用程序中添加了一个 AJAX html 编辑器，它工作正常。但是，当我将编辑器的内容保存到我的 sql 数据库时，它只会保存 html。我需要将其保存为 html 文档。有没有办法以编程方式将内容保存为数据库中的文档，然后可以使用我的 asp.net 应用程序打开？另外，有没有办法使用 html 编辑器来锚定编辑器中添加的文本部分？

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:59:28.347

大多数 html 编辑器只插入 html 片段，所以您可以做的是在插入数据库之前获取编辑器的内容并添加到 html 文档中。

```
string.Concat('<html><body>', editor_contents, '</body></html>'); 
```

您必须对其进行修改以满足您的特定需求，但这应该可以帮助您入门。要锚定文本，您只需向要锚定的部分添加一个 id。

```
<a href="#someID">Go to section</a>
<div id="someID">Section</div> 
```