# StackOverflow 问答 14872000-14872999

# titanium - 如何在 Titanium 中为 Android 设备准备线图？

> ID：14872001
> 
> 赞同：0
> 
> 时间：2013-02-14T09:52:15.867
> 
> 标签：titanium

我正在使用 Titanium SDK 3.0.0.GA，我想在窗口上显示折线图。我如何执行此任务。在 iOS 中，这可以通过 JS 库轻松实现。像：- 拉斐尔，丝状图书馆。Titanium Appcelerator 图形模块。我正在使用它，但这仅适用于 iOS。

1.  [http://www.filamentgroup.com/lab/update_to_jquery_visualize_accessible_charts_with_html5_from_designing_with/](http://www.filamentgroup.com/lab/update_to_jquery_visualize_accessible_charts_with_html5_from_designing_with/)

2.  [http://raphaeljs.com/](http://raphaeljs.com/)

但是，这不适用于 Android 设备和模拟器。请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:29:32.457

这对我很有用。这很容易在 iOS 和 Android 上工作....谢谢

[http://dygraphs.com/](http://dygraphs.com/)

# soa - SOA 和 ESB 的区别

> ID：14872020
> 
> 赞同：25
> 
> 时间：2013-02-14T09:53:19.617
> 
> 标签：soa, esb

我对这些 Web 服务术语 SOA、ESB 感到困惑。

任何人请解释一下。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-01-24T16:32:07.283

`SOA`是`service oriented architecture`。在 SOA`services are decoupled`中，无论服务类型如何，都可以相互交互。这意味着特定服务可以是特定于平台或协议的，但 SOA 使此类服务能够交互和交换数据。这些数据本质上是通过`ESB`( `Enterprise service bus`) 交换的，它构成了任何 SOA 架构的主干。

让我继续举个具体的例子来帮助更好地理解这一点。我们可以通过使用`JMS servers`和使用`XML/XSD`作为在各种服务之间传输数据的手段来实现 ESB 的一种方式。因此各种服务将注册或连接到这些 JMS 服务器并使用 XML 格式交换数据。通常，SOA 套件与所谓`adapters`的捆绑包一起帮助将消息转换为服务和 XML 可以理解的格式。

例如考虑股票交易系统。来自证券交易所的消息来自`FIX`协议。您可能已经构建了一个期望`JSON`. 要使这两个系统正常工作，您将使用 SOA - FIX 适配器将 FIX 消息转换为 XML，然后此 xml 将通过 ESB 传输到 JSON 适配器，然后根据系统端点的要求转换为 JSON。

最后希望下面的图片可以很清楚。

![在此处输入图像描述](../Images/543be88526a519eaedee73416d5af88f.png)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-16T09:30:33.783

SOA 是一种架构方法，您可以在其中以粗粒度方式公开和封装“服务”。它没有规定任何技术机制或实现。SOA 与系统之间的边界/集成交互更相关。因此，如果系统 A 使用 SOA 公开服务，我可以与系统 B 中的这些服务进行交互。

另一方面，ESB 是一种有助于交付 SOA 的技术实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-20T13:38:55.990

**SOA :-**基本上在 SOA 中，一方面我们有生产者/提供者，另一方面我们有消费者，由双方通信的桥（即网络）隔开。所以重点是两方如何交互（生产/消费）服务

**ESB：-** ESB 是架构模式，多个应用程序/组件/系统如何按照 SOA 原则相互通信/交互，尽管这里没有直接的生产者/消费者。因此，在这里我们关注多个异构应用程序如何相互交互并实现业务目标。

此外，ESB 提供了 API，可用于开发服务并使服务之间可靠地交互。从技术上讲，ESB 是一个消息代理，它执行协议转换、消息格式转换、路由、接受和传递来自与 ESB 链接的各种服务和应用程序的消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T23:34:58.583

以下问题解释了定义和差异：

*   [什么是 ESB，它有什么用处？](https://stackoverflow.com/q/597397/772000)
*   [什么是 SOA“简单的英语”？](https://stackoverflow.com/q/2026523/772000)

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-02-14T09:57:25.153

**SOA**代表`Service Oriented Architecture`和**ESB**代表`Enterprise Service Bus`. 您可以参考[这个 IBM 站点。](http://www.ibm.com/developerworks/webservices/library/ws-soa-esbarch/)还有[这个](http://eai.ittoolbox.com/documents/difference-between-soa-and-esb-16734)

# php - PHP Binding a Wildcard

> ID：14872029
> 
> 赞同：3
> 
> 时间：2013-02-14T09:53:53.537
> 
> 标签：php, mysql, sql, mysqli, prepared-statement

Hope Somebody will help me about how I bind a parameter in mysqli when a multiple character wildcard needs to be next to the variable value. I found that it worked for me when creating a SQL statement, like this:

```
$sql = "SELECT item_title FROM item WHERE item_title LIKE '%$title%'"; 
```

However, I tried to bind the variable following the same pattern, and found that it failed. They used this code:

```
$sql = "SELECT item_title FROM item WHERE item_title LIKE '%?%'"; 
```

It raised this error:

> Warning: mysqli_stmt_bind_param() [function.mysqli-stmt-bind-param]: Number of variables doesn't match number of parameters in prepared statement in program_name on line......

Can anybody tell me how fix this problem? Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T09:56:37.897

您只能绑定数据文字而不是任意查询部分。
所以，首先准备你的文字

```
$var = "%$var%";
$sql = "SELECT item_title FROM item WHERE item_title LIKE ?"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T09:58:47.120

你可以这样做：

```
$sql = "SELECT item_title FROM item WHERE item_title LIKE ? "; 
```

接着

```
$title_new =  '%'.$title.'%';
mysqli_stmt_bind_param($stmt, 's', $title_new); 
```

**根据用户评论更新**

实现下面的 SQL

```
 s2.subject_name LIKE '%$keyword%' OR c.city_name LIKE '%$keyword%' 
```

在下面使用 MySqli 语句 s2.subject_name LIKE ？或 c.city_name LIKE ？

```
 $keyword = '%'.$keyword.'%';
 mysqli_stmt_bind_param($stmt, 'ss', $keyword, $keyword); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T20:45:00.057

```
 $sql="SELECT item_title FROM item WHERE item_title LIKE concat ('%',?,'%') "; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T20:59:07.720

每个绑定变量有一个问号。例如 prepare(SELECT item_title FROM item WHERE item_title LIKE ? and name2 like ? and ...) 准备好的语句的好处是您不必担心引用变量。

然后绑定所有参数，如 bind_param("ss...", $param1, $param2, ....);

# export - Export server ignores param "width"

> ID：14872030
> 
> 赞同：0
> 
> 时间：2013-02-14T09:53:52.997
> 
> 标签：export, highcharts

I want to create server sided images from my charts in order to build reports. The creation of and saving of the images works fine, but i want to state different values of "width" of the images. My attempts to do this were unfortunately not successful. I have changed the value of "width" and "scale" but nothing has changed. There is always the same width of the created image.

My $command is:

```
chartExport/phantomjs/bin/phantomjs chartExport/js/highcharts-convert.js  -infile chartExport/js/tmp/test.json -outfile chartExport/js/tmp/test.png -width 1000 -scale 1 -constr Chart 
```

How can I change the measurements of the images?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T19:45:07.570

我有同样的问题。您可以在导出选项中设置比例，并将导出选项中的 url 设置为导出服务器，并在图表呈现后尝试调用 chart.exportChart()。

我认为这是 Highcharts 中的一个错误，即并非所有内容都正确导出，并且并非所有导出参数都有效。

# cocoa-touch - Hide/Show UITableView on Button touch

> ID：14872032
> 
> 赞同：1
> 
> 时间：2013-02-14T09:53:55.803
> 
> 标签：cocoa-touch, uitableview, uibutton, xcode4.5, ios6.1

I Have one Screen in which i have to hide or show UITableview on button touch. This single button have two diffrent image which is change by button click.

I had tried with this code.

```
- (void)collapseOrExpandButtonPressed:(UIButton *)sender
{
      int i = [sender.titleLabel.text intValue];

NSNumber *numb;
if(i == 0)
{
    numb = [NSNumber numberWithBool:NO];
    sender.titleLabel.text = @"1";
    [sender setImage:[UIImage imageNamed:@"down.png"] forState:UIControlStateNormal];
    [sender setImage:[UIImage imageNamed:@"up.png"] forState:UIControlStateHighlighted];
    tView.hidden = YES;
}
else
{
    numb = [NSNumber numberWithBool:YES];
    sender.titleLabel.text = @"0";
    [sender setImage:[UIImage imageNamed:@"up.png"] forState:UIControlStateNormal];
    [sender setImage:[UIImage imageNamed:@"down.png"] forState:UIControlStateHighlighted];
    tView.hidden = NO;
}

} 
```

And with this i set button manually

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
UIView *a = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 280, 62)];
a.backgroundColor = [UIColor clearColor];

[self.view addSubview:a];
button = [[UIButton alloc] initWithFrame:CGRectMake(240, 20, 30, 30)];

[button addTarget:self action:@selector(collapseOrExpandButtonPressed:) forControlEvents:UIControlEventTouchUpInside];

button.tag = section;

if(button.tag != section)
{
    [button setImage:[UIImage imageNamed:@"down.png"] forState:UIControlStateNormal];
    [button setImage:[UIImage imageNamed:@"up.png"] forState:UIControlStateHighlighted];
    button.titleLabel.text = @"0";
}
else
{
    [button setImage:[UIImage imageNamed:@"up.png"] forState:UIControlStateNormal];
    [button setImage:[UIImage imageNamed:@"down.png"]      forState:UIControlStateHighlighted];
    button.titleLabel.text = @"1";
}

[a addSubview:button];
return a;

} 
```

But nothing works for me.

I also tried with Breakpoint but it wasn't calling my custom method.

`Help` is greatly appreciated.

# ksoap2 - 随机：ConnectException：连接失败：ETIMEDOUT（连接超时）

> ID：14872037
> 
> 赞同：1
> 
> 时间：2013-02-14T09:54:08.913
> 
> 标签：ksoap2, android-ksoap2

Webservice 已开发于`ASP.NET`

我们`KSOAP2`在Android App中使用。现在，**有时**应用程序会出现上述错误。

服务器和客户端都在同一个网络环境中。由于错误是在**RANDOM**生成的，因此我无法找到它的原因。

**试过：**

1.  网络检查/可达性检查/telnet 和 ping 到服务器。
2.  相同和不同网络上的设备/模拟器。
3.  设备上的 3G / EDGE / WiFi 连接。
4.  服务器已分配最大带宽（另外，目前只有一台设备在使用它。）

**注意：**以上各点的所有可能组合都已尝试过多次。

谁能建议我如何追踪它？（主要问题是它是随机的）

另外，关于它是 on`server side`还是的任何想法`client side`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:40:01.907

首先，您应该检查您的**KSOAP2 调用**是否在单独的`Thread`.

然后你应该为超时设置适当的值。

```
HttpsTransportSE transport = new HttpsTransportSE(host, port, file, timeout); 
```

这是随机异常，所以很难找到原因。可能您的服务器有时会出现延迟。但这是通常的问题。您应该为正确运行的应用程序处理异常。在这种情况下，对您的 Web 服务进行新的调用。

# wpf - 从代码和样式列表项创建列表框

> ID：14872039
> 
> 赞同：0
> 
> 时间：2013-02-14T09:54:23.253
> 
> 标签：wpf, vb.net, xaml

我有这段代码可以在后面的 Menu.xaml 代码（Menu.xaml.vb）上创建一个列表框：

```
Dim mm as new ListBox()
mm.FontSize=20
mm.Items.add("Notifications:")
For Each Row as DataRow in mydt.Rows
  mm.Items.add(Row("name"))
Next 
```

代码效果很好，我可以看到列表框，但我想要的是为每个列表框项设置样式。例如，我想要第一个 fontsize=24，fontbold，backcolor=black，字体颜色白色，其余的 fontsize=16

xaml 上没有列表框，它是由代码创建和绘制的。

任何帮助或线索？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:18:00.623

您可以为每个项目显式创建一个[ListBoxItem](http://msdn.microsoft.com/en-us/library/ms611063.aspx)并设置所有必要的属性。在 C# 中，它可能如下所示（抱歉，我不会说 VB）。

```
mm.Items.Add(new ListBoxItem
{
    Content = "Item 1",
    Foreground = Brushes.White,
    Background = Brushes.Black,
    FontSize = 24,
    FontWeight = FontWeights.Bold
});
mm.Items.Add(new ListBoxItem
{
    Content = "Item 2",
    FontSize = 16
});
... 
```

# c - How to use printf() functions with adaptative types?

> ID：14872043
> 
> 赞同：2
> 
> 时间：2013-02-14T09:54:34.300
> 
> 标签：c, printf

Let me explain the situation : I have a C struct as follows :

```
typedef struct {
  int *val;
  char *name;
} tStruct; 
```

This structure might be populated as follows : - val can be null if the "val" value is not available, otherwise val is an integer value (can be negative) - name can be an empty string if name is not available, or a filled string (not null pointer here) if a name is available.

I wish to write a log line as follows :

*   if val is invalid, name is valid (equals WOOT):

> LOG val=# name=WOOT

*   if val is invalid, name is invalid :

> LOG val=# name=#

*   if val is valid, name is invalid:

> LOG val=123456 name=#

*   if val is valid, name is valid (equals WOOT):

> LOG val=123456 name=WOOT

This means I'd need to use either printf("val=%s name=%s",...) or printf("val=%d name=%s",...) depending on the id value (so that I can either output a # or the integer). Outputing a fake integer value when val is invalid is not suitable since any signed or unsigned value is possible.

Any idea ? I wish I could avoid the following kind of construct because my struct will actually contain many fields, making too many the "if" combinations :

```
if ( (struct.val == NULL ) && ( struct.name ) ) then printf ("val=# name=%");
else if ((struct.val == NULL ) && ( ! struct.name ) ) then printf ("val=# name=#");
else if ... 
```

Thank you

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:00:23.223

创建一个返回该类型的字符串表示的函数，然后在 printf 中使用它

```
printf("%s", tStruct_to_string(contents)); 
```

请注意，以这种方式使用它可能会很困难~~，除非您的转换函数有一些静态缓冲区。~~

**编辑：**在这里使用单个静态缓冲区是错误的，因为它不适用于多个参数。正如@pmg 所说，接受缓冲区更好，但有缓冲区溢出的风险，所以也许你可以将长度作为参数传递，但现在优雅的解决方案并不像以前那么优雅。因此，您的函数可以返回 malloced char*，但之后您将其释放，动态分配可能会很慢。Ufff ...在C中管理字符串是相当痛苦的。

我现在能想到的最好方法（但它存在可重入问题）是拥有静态字符串数组并在每次调用时循环遍历它们。

```
char* tStruct_to_string(tStruct st)
{
    /* 
     * here assuming no one will call printf 
     * with more than 32 arguments of this type,
     * and assuming length of string 100.
     */ 
    static char strings[32][100];
    static int next = 0;
    int current = next;
    // here you write to strings[current]
    // use s(n)printf for writing to string
    next = (next+1)%32;
    return strings[current];
} 
```

此外，其他答案提供了如何避免重复条件的极好建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T09:58:22.967

```
printf("LOG val=");
if (struct.val) printf("%d", *struct.val); else printf("#");
printf(" name=");
if (*struct.name) printf("%s", struct.name); else printf("#");
printf("\n"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T10:25:11.190

为什么要通过所有这些努力将所有内容都压缩到一个 printf 调用中？只需调用它两次。

```
if (s.val)
    printf("val=%d ", *s.val);
else
    printf("val=# ");
printf("s.name=%s", s.name ? *s.name : "#"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T10:01:14.080

对于`val`成员，您必须使用`if`语句，因为输出是字符串或数字，但对于`name`您可以使用[三元表达式](http://en.wikipedia.org/wiki/%3F%3a#C)：

```
if (str.val)
    printf("val=%d name=%s", *str.val, *str.name == '\0' ? "#" : str.name);
else
    printf("val=# name=%s", *str.name == '\0' ? "#" : str.name); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T10:01:22.700

如果你的结构有很多这样的对，显而易见的事情是将*一* 对的打印分解成一个函数，然后为真实结构中的每一对调用它。

```
void print_pair(const int *value, const char *name)
{
    if(value == NULL && name == NULL)
      printf("val=# name=#");
    else if(value == NULL && name != NULL)
      printf("val=# name=%s", name);
    else if(value != NULL && name == NULL)
      printf("val=%d name=#", *value);
    else
      printf("val=%d name=%s", *value, name);
} 
```

`#`您也可以通过使用可表示为字符串的事实来缩短上述内容。

您可以通过考虑将整数以两种方式转换为字符串的想法来使其更短，但这可能是过度的：

```
void print_pair(const int *value, const char *name)
{
    char vbuf[32];

    if(value == NULL)
      strcpy(vbuf, "#");
    else
      snprintf(vbuf, sizeof vbuf, "%d", *value);

    printf("val=%s name=%s", vbuf, name != NULL ? name : "#");
} 
```

# python - 在列表中查找元素

> ID：14872046
> 
> 赞同：2
> 
> 时间：2013-02-14T09:54:43.583
> 
> 标签：python, list

我有一个类似的清单

```
list_a = [(1, 2), (2, 3), (4, 5)] 
```

现在使用这个列表，我想找到一个最后值为 3 的元素，有什么简短的方法可以实现这个吗？它应该返回`(2,3)`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T09:58:19.987

例如：

```
In [1]: list_a = [(1, 2), (2, 3), (4, 5)]

In [2]: next(x for x in list_a if x[1] == 3)
Out[2]: (2, 3) 
```

请注意，它返回单个元素，而不是它们的列表（似乎是您要问的）。如果有多个元组，则返回第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:57:45.513

```
for item in list_a:
    if item[-1] == 3:
        return item 
```

或者，如果您可能想要返回多个值：

```
return_list = []
for item in list_a:
    if item[-1] == 3:
        return_list.append(item)
return return_list 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:59:32.833

像这样简单的东西

```
for x in list_a: 
    if x[1] == 3: print x 
```

# xamarin.ios - Monotouch dispose viewcontroller as subview

> ID：14872049
> 
> 赞同：0
> 
> 时间：2013-02-14T09:54:48.927
> 
> 标签：xamarin.ios, viewcontroller, subviews

I Have a ViewController that I want to display over another viewController (like a popup), so I use this code:

```
MyViewController vc = new MyViewController();           
this.View.AddSubview(vc.View); 
```

And it works fine, but I am not sure to unload it correctly since I am not able to interact with the background view anymore, I use this code (from the MyViewController class) to unload it:

```
foreach (UIView view in this.View.Subviews) {
    view.RemoveFromSuperview();
} 
```

How can I remove the subview within the second viewcontroller itself and enable the first view again?

Thanks!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:57:20.447

以上是一个非常糟糕的主意。

如果您正在创建一个新的 View Controller，您应该展示 View Controller，而不是落后于该 View Controller 的视图并在其他地方管理它们。

所以你应该展示你的视图控制器，要么推送它，要么以模态方式激活它。细节取决于您包含的视图控制器的细节。

# asp.net-mvc - WebApi 中多部分/表单数据的模型绑定

> ID：14872051
> 
> 赞同：4
> 
> 时间：2013-02-14T09:54:52.557
> 
> 标签：asp.net-mvc, asp.net-web-api

我有这样的模型：

```
public class Model
{
        [MaxLength(500)]
        public string UserEmail { get; set; }

        [Required]
        [MaxLength(100)]
        public string Product { get; set; }

        // ... And other 10 parameters

        public byte[] StatisticsData { get; set; }

        public byte[] UserXmlFile { get; set; }
} 
```

Api 应该使用 multipart/formdata 从客户端获取一些包含二进制数据的统计信息。有几种不同模型的类似方法，所以：

1.  我不想为每个模型编写自定义 MediaTypeFormatter
2.  由于验证和易于绑定，我想将标准绑定模型保留为简单字段
3.  我们有一个这样的 api 帮助生成[器](http://blogs.msdn.com/b/yaohuang1/archive/2012/05/21/asp-net-web-api-generating-a-web-api-help-page-using-apiexplorer.aspx)。因此，在每种情况下都在控制器中解析请求是很糟糕的。

想以 mvc 风格绑定 :)

```
[HttpPost]
public HttpResponseMessage SiteMark(Model model)
{ 
```

我阅读了此解决方案[Web API 模型绑定器不适用于 HttpPostedFileBase？](https://stackoverflow.com/questions/12697310/web-api-model-binder-doesnt-work-with-httppostedfilebase)，但似乎不太适合我的情况，也没有解决简单字段绑定的问题。

我考虑编写对简单字段使用标准绑定的自定义 ModelBinder。甚至我们可以为此使用默认的 mvc binder（webapi 默认绑定在自己的代码中似乎无法重用）。然后通过自定义代码读取循环中的所有二进制数据并将其映射到二进制字段。

也许我遗漏了一些东西并且有一个更简单的解决方案？

# mongodb - 数据资源移动到新分片后，MongoDB 会立即清理内存映射文件吗？

> ID：14872054
> 
> 赞同：0
> 
> 时间：2013-02-14T09:55:12.667
> 
> 标签：mongodb, sharding

我是 MongoDB 的新手，有一个关于分片的问题。

我必须知道，当一个新的分片被添加到集群中时。Balancer 会将部分块从现有分片移动到新分片中。

但由于 MongoDB 使用内存映射文件将数据源映射到内存中，我的问题是：内存映射文件是否也会在磁盘上的块被移动后立即“重新映射”？

例如，目前我有 shard 1 和 shard 2，每个 shard 在一台机器上运行，然后添加一个新机器作为 shard 3。对于存储 shard 2 的机器，一些块被移出到 shard 3，但在它的内存中，那些映射被删除数据的内存映射文件是否也会立即被清除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T17:21:57.980

这是 Chrsitina 的精彩网络广播：[http ://www.youtube.com/watch?v=SkSK7dwlebg](http://www.youtube.com/watch?v=SkSK7dwlebg)

基本答案：旧分片上的数据将被删除/移除。（并且空间将被添加到freelist）

# gnuplot - 如何绘制在gnuplot中大部分具有真实值的数据？

> ID：14872055
> 
> 赞同：0
> 
> 时间：2013-02-14T09:55:27.843
> 
> 标签：gnuplot

在每一行我可以有 0 或 1。如果我的数据是这样的

```
1
1
1
1
1
1 
```

我希望`plot 0:1`图表看起来像一个红色块，当我使用时我`line`什么都看不到，因为可能所有值都触及图表的天花板。

我应该使用哪种图形类型在 gnuplot 中可视化这样的图形？

另一个例如

```
1
1
1
0
1
1 
```

应该看起来像被一条细白线分开的两个红色块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:43:01.833

当您的数据非常有限时，您应该避免自动范围，您可以显式设置 yrange 或将其作为`plot`.

我能想出的获得块状图的最好方法是使用`boxes`. 这样的事情可能会做：

```
set boxwidth 1.8          
plot [] [0:1.1] 'in2' using 0:1 with boxes fs solid .5 noborder 
```

# php - Eclipse PDT 调试 - 如何避免第一个 php 标签中断？

> ID：14872058
> 
> 赞同：0
> 
> 时间：2013-02-14T09:55:44.640
> 
> 标签：php, debugging, eclipse-pdt

我最近设置了我的 Eclipse PDT 环境。一切都好，只有一个令人不安的功能：每当我调试我的代码时，调试器不仅会在第一个断点处停止，而且还会在第一个`<?php`标记处停止。所以我需要一直按`F8`才能继续。

有什么办法可以避免这种最初的休息？我只想在断点处停止。

![PHP断点](../Images/64e6a76c9f8d242a5ec70847974bdfe6.png)

屏幕截图显示我的意思，`<?php`即使没有设置断点，初始停止

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:43:19.797

在“调试配置”中选择您正在使用的配置。您应该看到“断点”部分。取消选中“在第一行中断”。保存并重试。

# python - Django 和 ipython - __import__() 参数 1 必须是字符串，而不是 DictConfigurator

> ID：14872061
> 
> 赞同：0
> 
> 时间：2013-02-14T09:56:03.263
> 
> 标签：python, django, ipython

我的目的是能够启动一个 python shell（ipython、bpython 或简单 python）并且：

1.  自动设置设置.py
2.  从 INSTALLED_APPS 自动加载模型
3.  我知道 ./manage.py shell 和 django.extensions，但我想随心所欲地选择运行什么 shell。

为此，我将这段代码（来自[http://agiliq.com/blog/2009/12/using-bpython-shell-with-django-and-some-ipython-f/](http://agiliq.com/blog/2009/12/using-bpython-shell-with-django-and-some-ipython-f/)）放在我的 PYTHONSTARTUP 中：

```
try:
 from django.core.management import setup_environ
 import settings
 setup_environ(settings)
 print 'imported django settings'
 try:
   exec_strs = ["from %s.models import *"%apps for apps in settings.INSTALLED_APPS ]
   for x in exec_strs:
     try:
         exec(x)
     except Exception,e:
         print 'Not imported for %s' %x
         print "Exception:%s" %repr(e)
   print 'imported django models'
 except:
   pass
except:
 pass 
```

这在 bpyton/python 中工作正常。Ipython 忽略了它，所以我自定义了 ipy_user_conf.py 来加载它：

```
import os

try:
    if os.environ.get("PYTHONSTARTUP",None) is not None:
        execfile(os.environ.get("PYTHONSTARTUP"))
except:
    pass 
```

然而，这失败了，并且似乎永久地破坏了 ipython 的导入，并带有令人费解的诊断：

```
Not imported for from tick.et.models import *
Exception:ValueError("Unable to configure handler 'mail_admins': __import__() argument 1 must be string, not DictConfigurator",) 
```

谷歌搜索揭示了与 Django 使用日志工具的方式有关的问题，细节超出了我的理解。但请注意，manage.py shell 使用 python 很好，没有上述问题。问题因此变成了，我做错了什么？

***之后***

[在对http://bugs.python.org/issue12718](http://bugs.python.org/issue12718)进行了一些挖掘和仔细阅读之后- 看来问题是由 winpdb/rpdb2 的错误（安装在我的盒子上）错误地包装了 python 的内置导入引起的。我想 django 也覆盖了 import，这就是 manage.py 逃脱这个特殊障碍的原因。我仍然很想知道是否存在外部修复（即缺少修补 rpdb2）。

***后来还是***

我将此问题报告为 winpdb 网站上的错误。**没有**结束问题，因为可用的理由似乎都不适用。

# forms - 为什么不建议在运行时更改表单样式？

> ID：14872063
> 
> 赞同：6
> 
> 时间：2013-02-14T09:56:05.100
> 
> 标签：forms, delphi, runtime

在有关[TCustomForm.FormStyle](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.TCustomForm.FormStyle)的 Delphi 文档中添加了一条注释，指出：“不建议在运行时更改 FormStyle。”

我想知道为什么不建议在运行时更改表单样式。从用户界面的角度来看，这是不可取的，还是可能会出现一些技术问题？在运行时更改表单样式后可能会出现什么样的问题？

**用例**

我们想改进我们的 MDI 应用程序的多显示器支持。目前所有子窗口都在主窗口（MDI 父窗口）中打开。用户想要的是能够在主窗口之外打开/移动子窗口，以便子窗口将作为单独的浮动窗口打开，可以位于 Windows 桌面的任何位置。

我在 Adob​​e Photoshop、Google chrome 和 Microsoft Internet Explorer 中看到了此功能的示例。（选项卡可以从选项卡栏移动，将在单独的浮动窗口中打开）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T10:08:07.967

`FormStyle`将运行时从更改`fsNormal`为`fsMDIform`或`fsMDIChild`需要重新创建窗口句柄，而这反过来又需要为表单上的所有控件重新创建所有窗口句柄。发生这种情况时，有很多事情超出了 Delphi 的控制范围：也许您正在使用一些依赖于某些 Windows 控件的第 3 方控件，但第 3 方控件不知道如何保存它的状态。重新创建窗口句柄时，用户将失去所有工作。

幸运的是，您可以解决这个问题：

*   停止使用 MDI，让所有窗口“浮动”并以其他方式处理它们。MDI 已经过时了一段时间。
*   就这样做吧，这取决于您拥有的控件类型，它可能会正常工作。如果没有，看看哪里出了问题并解决它（例如：您可能需要自己保存一些控件的状态并在交换后恢复它）
*   试着把所有东西都放在一个框架上；当用户想要移动时，创建一个新的空非 MDI/MDI 窗体，重新父框架，销毁旧窗体。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T10:03:30.303

很可能是因为表单样式更改会导致重新创建窗口句柄。这也将强制重新创建所有子窗口的句柄。

窗口重新创建总的来说是在你没有注意到的情况下发生的事情。但是有些控件在重新创建方面存在问题。例如，我过去曾在工具栏控件上遇到过这种情况。最新版本的 Delphi 对重新创建更具弹性。

# linux - 无法建立 ssh 连接无密码运行 PVM 代码

> ID：14872065
> 
> 赞同：0
> 
> 时间：2013-02-14T09:56:08.650
> 
> 标签：linux, shell, ssh, distributed-system, pvm

我尝试构建**PVM**代码。为此，需要一个没有密码的 ssh 连接。我搜索了很多，我找到了一个教程，我实现了相同的，但它没有用。

**我的工作：-**

1.  主人是jhamb。

2.  奴隶是天真的。

3.  首先，我使用命令在 master(jhamb) 上生成 ssh 密钥

    ssh-keygen -t rsa

4.  然后我使用命令将 id_rsa.pub 文件复制到 slave(naveen) 机器中

    scp /home/jhamb/.ssh/id_rsa.pub naveen@10.40.54.92:/home/naveen/.ssh/authorized_keys

5.  然后我从主人登录到奴隶。，通过使用

    ssh naveen@10.40.54.92

6.  但它总是要求输入密码。

帮我解决这个问题，然后只有我可以为 PVM 进一步配置。

寻找您的善意回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:10:40.597

根据 ssh 版本，您可能还必须这样做：

```
 - Put the public key in .ssh/authorized_keys2 
 - Change the permissions of .ssh to 700 
 - Change the permissions of .ssh/authorized_keys2 to 640 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:04:31.570

naveen 是否有权读取该文件？还尝试编辑authorized_keys，使密钥中没有最后一个字符串（密钥后面的“someone@somwhere”）。因此，而不是例如：

> SSH-RSA AAAAB3NzaC1yc2EAAAADAQABBAABAQC5IA9w8Knc9YFJZHvRiyZHv7XWXjRgCkLMQdj3LG1pDL8N + 7g8C3TB7apA8JqmSs + 8YyogN5UzIL1mFz4h1kRvmEcJuoSq + S5 + X8aVL0V5qXmcN + TDSevELUpkFm /米/ d2RuJAC6 + 1Eih4PbaGQ0tDVjyBWkgQwbmUNstn3YmdIcavm3z9cPVPIdRGzznLmndOxXOkcMFb32ESuc5NMNKNLcKnzbzyHhXS7JoeKGarTlhmmch7icoRivBWZIWBrdITy6KxkZN8ZSEU1jd6F7WQx1qWO0oEMHrEHnGN4wgi1CZuJTMHXzJbfKc1k91ivb8yh / OK6 + iydBNFj94yqAwAD为myuser @ MYPC-的EasyNote-TE11HC

你应该有这个：

> SSH-RSA AAAAB3NzaC1yc2EAAAADAQABBAABAQC5IA9w8Knc9YFJZHvRiyZHv7XWXjRgCkLMQdj3LG1pDL8N + 7g8C3TB7apA8JqmSs + 8YyogN5UzIL1mFz4h1kRvmEcJuoSq + S5 + X8aVL0V5qXmcN + TDSevELUpkFm /米/ d2RuJAC6 + 1Eih4PbaGQ0tDVjyBWkgQwbmUNstn3YmdIcavm3z9cPVPIdRGzznLmndOxXOkcMFb32ESuc5NMNKNLcKnzbzyHhXS7JoeKGarTlhmmch7icoRivBWZIWBrdITy6KxkZN8ZSEU1jd6F7WQx1qWO0oEMHrEHnGN4wgi1CZuJTMHXzJbfKc1k91ivb8yh / OK6 + iydBNFj94yqAwAD ==

*编辑：只是一个快速信息-在密钥末尾添加“==”后，您可以将计算机名称放回原处-双等号在密钥注释之后结束密钥和内容（谁的密钥是它等等..)*

# sql - 数据库事务 - 防止某些数据回滚

> ID：14872071
> 
> 赞同：0
> 
> 时间：2013-02-14T09:56:28.710
> 
> 标签：sql, database, tsql, transactions

如何从预期回滚的事务中保留一些数据？

有没有办法告诉事务不要回滚某些行？

执行存储过程会阻止事务回滚存储过程中的操作吗？

将数据保存到不在事务范围内的变量或表变量中是唯一的方法吗？

# nginx - 如何使用 NGINX 构建这个 301 Permanently Moved 规则？

> ID：14872074
> 
> 赞同：0
> 
> 时间：2013-02-14T09:56:45.213
> 
> 标签：nginx

我的动态生成页面的 URL 曾经是这样的：

```
http://domain.tld/folder/dynamic_label_1/dynamic_label_2/the_rest_... 
```

但是现在所有页面都移至：

```
http://domain.tld/folder/dynamic_label_2-dynamic_label_1/the_rest_... 
```

**注意：这些页面的最后一部分是可选的 > the_rest_.. 意思是，在dynamic_label_2-dynamic_label_1/**之后并不总是有东西

 **我对 Nginx 还很陌生，不知道如何设置这个重定向规则。

我的问题是：

这里 nginx 服务器的重定向规则是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:03:43.690

在这里，应该这样做-

```
rewrite  ^/folder/(\w+)/(\w+)(.*)$  /folder/$2-$1$3  break; 
```

I'm assuming `\w` would be enough for your `dynamic_label`. If not, feel free to add the characters inside the `(\w+)` parenthesis.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:29:07.440

以下*重写*要插入到您的虚拟主机中，*位置*（或*服务器*）

```
rewrite ^/folder/dynamic_label_1/dynamic_label_2(.*)$  /folder/dynamic_label_2-dynamic_label_1$1  break; 
```

根据评论编辑

```
rewrite ^/folder/([^/]+)/([^/]+)(/.*)?$  /folder/$2-$1$3  break; 
```

*可选*部分（包括可选前导`/`）在`$3`.**

# c++ - 如何在 C++ 中计算以 2 为底的对数？

> ID：14872078
> 
> 赞同：4
> 
> 时间：2013-02-14T09:56:56.787
> 
> 标签：c++

这是我的代码。

```
#include <iostream>
#include<stdlib.h>
#include<stdio.h>
#include<conio.h>
#include<math.h>
#include <cmath>
#include <functional>
using namespace std;
void main()
{
    cout<<log2(3.0)<<endl;

} 
```

但上面的代码给出了错误。错误代码是：错误 C3861：'log2'：找不到标识符。如何使用 C++ 计算 log2？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T10:00:13.697

例如以 2 为基数的 log 3

```
log (3) / log(2) 
```

会做的。

```
#include <iostream>
#include <cmath>

using namespace std;

int main()
{
    cout << log(3.0) / log(2.0) << endl;

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T10:00:38.600

使用高中数学：

```
log_y(x) = ln(x)/ln(y) 
```

但我同意，这有点奇怪，那里没有这样的实用功能。这可能是由于这些功能几乎直接映射到 FPU..

但是不要担心使用这种“扩展”的方式。数学不会改变。该公式将至少在接下来的几个生命周期内有效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-14T10:52:44.847

以下代码适用于 gcc 编译器

```
#include <iostream>
#include<stdlib.h>
#include <stdio.h>
#include <math.h>
#include <cmath> 
#include <functional>
using namespace std;
main()
{
    cout<<log2(3.0)<<endl;

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-14T10:14:51.677

这应该是用于查找具有任何给定数字的基数的日志的通用功能

```
double log_base_n(double y, double base){
return log(y)/log(base);
} 
```

所以：

```
cout<<log_base_n(3.0,2.0); 
```

应该做的伎俩。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-14T09:59:50.407

使用`log(3.0)/log(2.0)`. `log2`不包含在 C90 中。

```
double log_2( double n )  
{  
    return log(n) / log(2);  
} 
```

# php - PHP 5.4.11 中的日期时间问题

> ID：14872079
> 
> 赞同：-2
> 
> 时间：2013-02-14T09:56:56.997
> 
> 标签：php

我在 PHP 5.3 中使用下面的代码，但现在我必须在 5.4.11 上运行它并且它不起作用。页面上没有错误，我收到 500 错误。如果我评论最后 3 行，一切正常。

```
$sql = "*****";
$query = mysqli_query($dbc, $sql) or die('Error selecting date range.');
$row = mysqli_fetch_array($query);
$firstDate = $row['min'];
$lastDate = $row['max'];
$arrDates = array();
$date1 = new DateTime($firstDate);
$date2 = new DateTime($lastDate);
$interval = $date1->diff($date2); 
```

EDIT1：$firstDate 和 $lastDate 的 var_dump，不可能为 $date1 和 $date2 获得一个，因为在我取消注释对象的那一刻，一切都停止了。

```
$firstDate - string(10) "2013-01-27"
$lastDate - string(10) "2013-02-06" 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:01:47.283

过去我发现，`createFromFormat`如果您事先知道输入字符串的格式，使用静态方法生成 DateTime 对象更可靠：

```
$date1 = DateTime::createFromFormat($format, $firstDate);
$date2 = DateTime::createFromFormat($format, $lastDate);
$interval = $date1->diff($date2); 
```

# r - 为列名添加前缀

> ID：14872081
> 
> 赞同：69
> 
> 时间：2013-02-14T09:57:04.530
> 
> 标签：r, dataframe

阅读以下[帮助文件](http://stat.ethz.ch/R-manual/R-patched/library/base/html/colnames.html)时，应该可以为列名添加前缀：

```
colnames(x, do.NULL = TRUE, prefix = "col") 
```

以下对我不起作用。我在这里做错了什么？

```
m2 <- cbind(1,1:4)
colnames(m2, do.NULL = FALSE)
colnames(m2) <- c("x","Y")
colnames(m2) <- colnames(m2, prefix = "Sub_")
colnames(m2) 
```

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-02-14T10:04:42.897

您误读了帮助文件。这是要查看的论点：

`do.NULL`: 合乎逻辑。如果`FALSE`和 names 是`NULL`，则创建名称。

请注意该描述中的**and**。你的名字不再是`NULL`，所以使用前缀是行不通的。

相反，使用这样的东西：

```
> m2 <- cbind(1,1:4)
> colnames(m2) <- c("x","Y")
> colnames(m2) <- paste("Sub", colnames(m2), sep = "_")
> m2
     Sub_x Sub_Y
[1,]     1     1
[2,]     1     2
[3,]     1     3
[4,]     1     4 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2019-04-14T23:52:20.603

我将为`tidyverse`这个问题添加一种方法，您可以为所有列名添加后缀和前缀。下面在`dplyr`管道中添加前缀。

### dplyr 1.0.2 及更高版本

```
library(dplyr)
df <- data.frame(x = c(1, 2), y = c(3, 4))

## Adding prefixes
df %>% rename_with( ~ paste0("a", .x))

## Adding suffixes
df %>% rename_with( ~ paste0(.x, "a")) 
```

如果你想有下划线之类的分隔符，你也可以使用`paste`参数`sep`。

* * *

### dplyr 1.0.2 更新前

```
library(dplyr)
df <- data.frame(x = c(1, 2), y = c(3, 4))
df %>% rename_all( ~ paste0("a", .x)) 
```

添加后缀更容易。

```
df %>% rename_all(paste0, "a") 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-08-31T04:41:22.263

更新的`tidyverse`方法 (with `dplyr 1.0.2`)`rename_with()`用作`rename_all()`函数已被取代。

```
iris %>% rename_with( ~ paste("Sub", .x, sep = "_")) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-10-20T21:11:09.917

该`stats::setNames`功能对此工作得很好，实际上比替代品要快得多。

```
 iris.dt <- data.table::as.data.table(iris)

microbenchmark::microbenchmark(

  base = colnames(iris) <- paste("Sub", colnames(iris), sep = "_"),
  stats = setNames(iris, paste("Sub", colnames(iris), sep = "_")), 
  dplyr = dplyr::rename_with(iris, ~ paste("Sub", .x, sep = "_")),
  datatable = data.table::setnames(iris.dt, paste("Sub", names(iris.dt), sep = "_"))

)
#> Unit: microseconds
#>       expr     min       lq       mean   median      uq        max neval cld
#>       base  11.094  16.2140   21.62408  19.2010  23.681     65.707   100   a
#>      stats   8.107  13.8670   17.40435  16.6405  19.841     39.254   100   a
#>      dplyr 786.772 842.8785 5236.67222 877.0130 984.959 402378.407   100   a
#>  datatable  40.961  49.9200   84.06237  62.2935  73.600    834.560   100   a 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2020 年 10 月 21 日创建)

# iphone - 在iOS前台应用程序时获取推送通知

> ID：14872088
> 
> 赞同：220
> 
> 时间：2013-02-14T09:57:10.200
> 
> 标签：iphone, ios, objective-c, push-notification

我在我的应用程序中使用推送通知服务。当应用程序在后台时，我可以在通知屏幕上看到通知（当我们从 iOS 设备顶部向下滑动时显示的屏幕）。但是如果应用程序在前台，委托方法

```
- (void)application:(UIApplication*)application didReceiveRemoteNotification:(NSDictionary*)userInfo 
```

正在被调用，但通知屏幕中未显示通知。

我想在通知屏幕上显示通知，无论应用程序是在后台还是前台。我厌倦了寻找解决方案。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2016-11-23T04:44:08.153

要在应用程序处于前台时显示横幅消息，请使用以下方法。

**iOS 10，斯威夫特 3/4**：

```
// This method will be called when app received push notifications in foreground
func userNotificationCenter(_ center: UNUserNotificationCenter, willPresent notification: UNNotification, withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -> Void) 
{
    completionHandler([.alert, .badge, .sound])
} 
```

**iOS 10，斯威夫特 2.3**：

```
@available(iOS 10.0, *)
func userNotificationCenter(center: UNUserNotificationCenter, willPresentNotification notification: UNNotification, withCompletionHandler completionHandler: (UNNotificationPresentationOptions) -> Void)
{
    //Handle the notification
    completionHandler(
       [UNNotificationPresentationOptions.Alert,
        UNNotificationPresentationOptions.Sound,
        UNNotificationPresentationOptions.Badge])
} 
```

您还必须将您的应用代理注册为通知中心的代理：

```
import UserNotifications

// snip!

class AppDelegate : UIResponder, UIApplicationDelegate, UNUserNotificationCenterDelegate

// snip!

   func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {

      // set the delegate in didFinishLaunchingWithOptions
      UNUserNotificationCenter.current().delegate = self
      ...
   } 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-02-14T10:50:22.750

下面的代码将为您工作：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo  {
    application.applicationIconBadgeNumber = 0;             
    //self.textView.text = [userInfo description];
    // We can determine whether an application is launched as a result of the user tapping the action
    // button or whether the notification was delivered to the already-running application by examining
    // the application state.

    if (application.applicationState == UIApplicationStateActive) {                
        // Nothing to do if applicationState is Inactive, the iOS already displayed an alert view.                
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Did receive a Remote Notification" message:[NSString stringWithFormat:@"Your App name received this notification while it was running:\n%@",[[userInfo objectForKey:@"aps"] objectForKey:@"alert"]]delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alertView show];          
    }    
} 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2017-01-28T07:52:38.900

**目标 C**

[![在此处输入图像描述](../Images/9626c4af15240e5cb4a3e598e4708fbf.png)](https://i.stack.imgur.com/1EKh2.png)

因为`iOS 10`我们需要集成`willPresentNotification`显示通知横幅的方法`foreground`。

如果应用程序处于前台模式（活动）

```
- (void)userNotificationCenter:(UNUserNotificationCenter* )center willPresentNotification:(UNNotification* )notification withCompletionHandler:(void (^)(UNNotificationPresentationOptions options))completionHandler {
    NSLog( @"Here handle push notification in foreground" ); 
    //For notification Banner - when app in foreground

    completionHandler(UNNotificationPresentationOptionAlert);

    // Print Notification info
    NSLog(@"Userinfo %@",notification.request.content.userInfo);
} 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2014-04-29T12:54:44.033

对于任何可能感兴趣的人，我最终创建了一个自定义视图，该视图看起来像顶部的系统推送横幅，但添加了一个关闭按钮（蓝色小 X）和一个用于点击消息以进行自定义操作的选项。它还支持在用户有时间阅读/关闭旧通知之前到达多个通知的情况（不限制可以堆积多少......）

[链接到 GitHub：AGPushNote](https://github.com/avielg/AGPushNote)

**用法基本是在线的：**

```
[AGPushNoteView showWithNotificationMessage:@"John Doe sent you a message!"]; 
```

它在 iOS7 上看起来像这样（iOS6 具有 iOS6 的外观......）

![在此处输入图像描述](../Images/f0dfaa2ba5fd9f8101f2c766554ce262.png)

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2013-02-15T03:56:57.023

如果应用程序在前台运行，iOS 将不会显示通知横幅/警报。这是设计使然。但是我们可以通过`UILocalNotification`如下方式来实现

*   在收到远程通知时检查应用程序是否处于活动状态。如果处于活动状态，则触发 UILocalNotification。

    ```
    if (application.applicationState == UIApplicationStateActive ) {

        UILocalNotification *localNotification = [[UILocalNotification alloc] init];
        localNotification.userInfo = userInfo;
        localNotification.soundName = UILocalNotificationDefaultSoundName;
        localNotification.alertBody = message;
        localNotification.fireDate = [NSDate date];
        [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
    } 
    ```

迅速：

```
if application.applicationState == .active {
    var localNotification = UILocalNotification()
    localNotification.userInfo = userInfo
    localNotification.soundName = UILocalNotificationDefaultSoundName
    localNotification.alertBody = message
    localNotification.fireDate = Date()
    UIApplication.shared.scheduleLocalNotification(localNotification)
} 
```

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2019-06-21T04:54:42.277

**Xcode 10 斯威夫特 4.2**

当您的应用程序处于前台时显示推送通知 -

**第 1 步：**在 AppDelegate 类中添加委托 UNUserNotificationCenterDelegate。

```
class AppDelegate: UIResponder, UIApplicationDelegate, UNUserNotificationCenterDelegate { 
```

**第 2 步：**设置 UNUserNotificationCenter 委托

```
let notificationCenter = UNUserNotificationCenter.current()
notificationCenter.delegate = self 
```

**第 3 步：**此步骤将允许您的应用程序显示推送通知，即使您的应用程序在前台也是如此

```
func userNotificationCenter(_ center: UNUserNotificationCenter,
                                willPresent notification: UNNotification,
                                withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -> Void) {
        completionHandler([.alert, .sound])

    } 
```

**第四步：**这一步是**可选**的。检查您的应用程序是否在前台，如果它在前台，则显示 Local PushNotification。

```
func application(_ application: UIApplication,didReceiveRemoteNotification userInfo: [AnyHashable: Any],fetchCompletionHandler completionHandler:@escaping (UIBackgroundFetchResult) -> Void) {

        let state : UIApplicationState = application.applicationState
        if (state == .inactive || state == .background) {
            // go to screen relevant to Notification content
            print("background")
        } else {
            // App is in UIApplicationStateActive (running in foreground)
            print("foreground")
            showLocalNotification()
        }
    } 
```

本地通知功能 -

```
fileprivate func showLocalNotification() {

        //creating the notification content
        let content = UNMutableNotificationContent()

        //adding title, subtitle, body and badge
        content.title = "App Update"
        //content.subtitle = "local notification"
        content.body = "New version of app update is available."
        //content.badge = 1
        content.sound = UNNotificationSound.default()

        //getting the notification trigger
        //it will be called after 5 seconds
        let trigger = UNTimeIntervalNotificationTrigger(timeInterval: 1, repeats: false)

        //getting the notification request
        let request = UNNotificationRequest(identifier: "SimplifiedIOSNotification", content: content, trigger: trigger)

        //adding the notification to notification center
        notificationCenter.add(request, withCompletionHandler: nil)
    } 
```

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2020-05-12T06:36:44.800

**对于斯威夫特 5**

> 1) 向 AppDelegate 确认委托`UNUserNotificationCenterDelegate`
> 
> 2)`UNUserNotificationCenter.current().delegate = self`在`didFinishLaunch`
> 
> 3) 实现下面的方法`AppDelegate`。

```
func userNotificationCenter(_ center: UNUserNotificationCenter,
                                willPresent notification: UNNotification,
                                withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -> Void) {
     print("Push notification received in foreground.")
     completionHandler([.alert, .sound, .badge])
} 
```

就是这样！

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2013-02-14T10:06:11.387

如果应用程序在前台运行，iOS 将不会显示通知横幅/警报。这是设计使然。您必须编写一些代码来处理您的应用程序在前台接收通知的情况。您应该以最合适的方式显示通知（例如，将徽章编号添加到`UITabBar`图标、模拟通知中心横幅等）。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2014-03-28T14:51:18.377

您可以创建自己的模仿横幅警报的通知。

一种方法是创建一个看起来像横幅的自定义 uiview，并且可以动画和响应触摸。考虑到这一点，您可以创建具有更多功能的更好的横幅。

或者你可以寻找一个 api 为你做这件事，并将它们作为 podfiles 添加到你的项目中。

这是我用过的一对：

[https://github.com/terryworona/TWMessageBarManager](https://github.com/terryworona/TWMessageBarManager)

[https://github.com/toursprung/TSMessages](https://github.com/toursprung/TSMessages)

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2016-12-27T09:12:49.477

这是当应用程序处于活动状态（前台或打开）时接收推送通知的代码。 [UNUserNotificationCenter 文档](https://developer.apple.com/reference/usernotifications/unusernotificationcenter)

```
@available(iOS 10.0, *)
func userNotificationCenter(center: UNUserNotificationCenter, willPresentNotification notification: UNNotification, withCompletionHandler completionHandler: (UNNotificationPresentationOptions) -> Void)
{
     completionHandler([UNNotificationPresentationOptions.Alert,UNNotificationPresentationOptions.Sound,UNNotificationPresentationOptions.Badge])
} 
```

如果需要访问通知使用代码的userInfo：`notification.request.content.userInfo`

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-03-07T20:31:16.590

将 completionHandler 行添加到委托方法为我解决了同样的问题：

```
//Called when a notification is delivered to a foreground app.
@available(iOS 10.0, *)
func userNotificationCenter(_ center: UNUserNotificationCenter, willPresent notification: UNNotification, withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -> Void) {

completionHandler([.alert, .badge, .sound])
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-11-11T13:18:33.727

**用于 swift 5 解析 PushNotification 字典**

```
 func application(_ application: UIApplication, didReceiveRemoteNotification data: [AnyHashable : Any]) {
            if application.applicationState == .active {
                if let aps1 = data["aps"] as? NSDictionary {
                    if let dict = aps1["alert"] as? NSDictionary {
                        if let strTitle = dict["title"] as? String , let strBody = dict["body"] as? String {
                            if let topVC = UIApplication.getTopViewController() {
                                //Apply your own logic as per requirement
                                print("strTitle ::\(strTitle) , strBody :: \(strBody)")
                            }
                        }
                    }
                }
            }
        } 
```

**获取我们在其上显示 topBanner 的 top viewController**

```
extension UIApplication {

    class func getTopViewController(base: UIViewController? = UIApplication.shared.keyWindow?.rootViewController) -> UIViewController? {

        if let nav = base as? UINavigationController {
            return getTopViewController(base: nav.visibleViewController)

        } else if let tab = base as? UITabBarController, let selected = tab.selectedViewController {
            return getTopViewController(base: selected)

        } else if let presented = base?.presentedViewController {
            return getTopViewController(base: presented)
        }
        return base
    }
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-10-23T07:41:28.083

在您的应用委托中使用以下代码

```
import UIKit
import UserNotifications
@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate, UNUserNotificationCenterDelegate {
 var currentToken: String?
 var window: UIWindow?
 func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
        // Override point for customization after application launch.
        application.registerForRemoteNotifications()
        let center = UNUserNotificationCenter.current()
        center.requestAuthorization(options: [.alert, .sound, .badge]) { (granted, error) in

            // Enable or disable features based on authorization.
            if granted == true
            {
                print("Allow")
                UIApplication.shared.registerForRemoteNotifications()
            }
            else
            {
                print("Don't Allow")
            }
        }
        UNUserNotificationCenter.current().delegate = self

        return true
    }
func application(_ application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: Data){
        let tokenParts = deviceToken.map { data -> String in
            return String(format: "%02.2hhx", data)
        }
        let token = tokenParts.joined()
        currentToken = token  //get device token to delegate variable

    }
 public class var shared: AppDelegate {
        return UIApplication.shared.delegate as! AppDelegate
    }
 func userNotificationCenter(_ center: UNUserNotificationCenter, willPresent notification: UNNotification, withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -> Void) {
         completionHandler([.alert, .badge, .sound])
    }
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-04-17T14:53:05.593

最好的方法是通过使用添加`UNUserNotificationCenterDelegate`该 扩展程序告诉应用程序能够在使用时获得通知`AppDelegate``extension AppDelegate: UNUserNotificationCenterDelegate`

并实现这个方法

```
func userNotificationCenter(_ center: UNUserNotificationCenter, willPresent notification: UNNotification, withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -> Void) {
        completionHandler(.alert)
    } 
```

**仅当应用程序位于Foreground**时，才会在委托上调用此方法。

所以最终的实现：

```
extension AppDelegate: UNUserNotificationCenterDelegate {
    func userNotificationCenter(_ center: UNUserNotificationCenter, willPresent notification: UNNotification, withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -> Void) {
        completionHandler(.alert)
    }
} 
```

并且要调用它，您必须在 AppDelegate 中设置委托`didFinishLaunchingWithOptions`添加此行

```
UNUserNotificationCenter.current().delegate = self 
```

你可以修改

```
completionHandler(.alert) 
```

和

```
completionHandler([.alert, .badge, .sound])) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-01-30T16:34:13.250

如上所述，您应该使用`UserNotification.framework`来实现这一点。但出于我的目的，无论如何我都必须在应用程序中显示它并且想要有`iOS 11`风格，所以我创建了一个小的帮助视图，也许对某人有用。

[GitHub iOS 11 推送通知视图](https://github.com/hydro0/iOS-11-Push-Notifications-InApp-View)。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-01-24T09:16:05.323

**100% 工作测试**

首次导入

```
import UserNotifications 
```

然后在类中添加委托

**UNUserNotificationCenterDelegate**

```
 class AppDelegate: UIResponder, UIApplicationDelegate, UNUserNotificationCenterDelegate 
```

当应用程序打开并收到通知时，以下方法负责。

**将呈现**

```
 @available(iOS 10.0, *)
    func userNotificationCenter(_ center: UNUserNotificationCenter, willPresent notification: UNNotification, withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -> Void) {
            let content = notification.request.content

           let alertVC = UIAlertController.init(title: title, message: body, preferredStyle: .alert)

            alertVC.addAction(UIAlertAction.init(title: appLan_share.Ok_txt, style: .default, handler: {
                _ in
                   //handle tap here or navigate somewhere…..                
            }))

            vc?.present(alertVC, animated: true, completion: nil)

            print("notification Data: \(content.userInfo.values)")
                completionHandler([.alert, .sound])

} 
```

您还可以通过检查当前应用程序状态来处理应用程序状态。

此外，如果您的应用程序未运行，则以下方法负责处理推送通知

**收到**

```
func userNotificationCenter(_ center: UNUserNotificationCenter, didReceive response: UNNotificationResponse, withCompletionHandler completionHandler: @escaping () -> Void) {
        let userInfo = response.notification.request.content.userInfo
        let aps = userInfo["aps"] as? [String: Any]
        let alert = aps?["alert"] as? [String: String]

} 
```

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2016-05-12T06:10:34.767

如果您的应用程序处于前台状态，则表示您当前正在使用同一个应用程序。所以一般不需要在顶部显示通知。

但是，如果您想在这种情况下显示通知，则必须创建自定义警报视图或自定义视图，例如 Toast 或其他东西，以向用户显示您已收到通知。

如果您的应用中有此类功能，您也可以在顶部显示徽章。

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2013-02-14T10:20:14.620

正如@Danial Martine 所说，iOS 不会显示通知横幅/警报。这是设计使然。但如果真的必须这样做，那么有一种方法。我也通过同样的方式实现了这一点。

[1.从Parse FrameWork](https://www.parse.com)下载解析框架

2.进口`#import <Parse/Parse.h>`

3.将以下代码添加到您的 didReceiveRemoteNotification 方法

```
 - (void)application:(UIApplication *)application
didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    [PFPush handlePush:userInfo];
} 
```

PFPush 会注意如何处理远程通知。如果应用程序在前台，则会显示警报，否则会在顶部显示通知。

# plsql - IBM DB2 for i (iSeries) 的 PL/SQL Developer 等开发工具

> ID：14872089
> 
> 赞同：3
> 
> 时间：2013-02-14T09:57:11.950
> 
> 标签：plsql, db2, ibm-midrange, udb

我有在 Oracle 上使用 PL/SQL Developer 的经验。

现在我有一个客户，我需要在 IBM DB2 for i（以前称为 DB2 UDB for iSeries，AS400）上编写一些存储过程。

IBM DB2 是否有像 PL/SQL Developer 这样的工具，我可以在其中开发调试存储过程（步入、退出、查看变量）

db2 开发人员使用什么工具？

谢谢奥利弗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:46:48.760

我相信您正在寻找[IBM Data Studio](http://www-142.ibm.com/software/products/us/en/data-studio)

> IBM® Data Studio 为 IBM DB2® for Linux、UNIX 和 Windows 的数据库开发和管理提供了一个集成的模块化环境。它还为 IBM DB2 for z/OS®、IBM DB2 for i 和 IBM Informix® 提供协作数据库开发工具。该软件免费提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:55:15.907

Data Studio 正是您所寻找的。它可以在 IBM 的 developerWorks 站点上找到，并且可以免费下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T09:42:06.980

对于那些使用 DB2 for i（AS/400、iSeries 和更高版本）的人来说，IBM Data Studio 值得学习和学习。它具有许多有用的开发功能。但是对于调试，您需要进行大量学习才能使其正常工作（如果有的话）。如果服务器上有 IBM i 6.1 或 7.1，并且 DB2 Group PTF 级别至少达到 2013 年中期的级别，Data Studio 可用于调试。（V5R4 也可能是可能的，尽管在 IBM 站点上有相互矛盾的陈述；而且我没有看到需要 PTF 的迹象。）

在尝试使用 Data Studio 进行调试时，您可以通过从服务器下载和安装 iSeries Navigator 更快地获得结果。确保最低安装包括“数据库”组件。（不是“数据传输”，它本质上是不相关的，需要许可。）“数据库”组件允许访问 AS/400 数据库的“运行 SQL 脚本”，并包括与系统图形调试器的连接。

还包括许多其他直接数据库功能。iNav 功能的下载、安装和配置速度比 Data Studio 快很多。它也更容易学习并且更适合较小的显示器。（请注意，还应应用最近的 iNav 修复包。）但它并不是真正的高级数据库 IDE。*它只是为除主要项目*开发之外的大部分数据库工作提供所需的功能。

如果您无法控制服务器上的修复级别，或者服务器版本不是最新的，那么您可能没有其他好的选择，尤其是对于存储过程的调试等。

# android - Android 通知中的持续活动指示器

> ID：14872091
> 
> 赞同：0
> 
> 时间：2013-02-14T09:57:15.130
> 
> 标签：android, android-activity, android-notifications

我有一个带有持续活动指示器的[通知。](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)问题是当应用程序被用户终止时，指示器仍在运行。关闭应用程序时是否会调用某种“OnExit”方法，以便我可以从通知面板中删除通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:09:12.710

请参考[这里](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/LdIljkPFack)的讨论，据我所知，目前还没有这种方法。我认为您不能依赖`application.onTerminate()`，因此您最好更改逻辑以使用在其生命周期方法上创建和删除通知的服务。

# javascript - Backbone.js 架构：集合 vs javascript 数组

> ID：14872093
> 
> 赞同：0
> 
> 时间：2013-02-14T09:57:18.900
> 
> 标签：javascript, rest, backbone.js

我将很快开始开发我的第一个使用 Backbone 的应用程序。看了很多教程，但无法决定如何构建我的应用程序，因为它与典型的单模型 CRUD 示例略有不同。这是交易：

我的应用程序基本上是蚂蚁地图集。所以基本上，用户选择一个蚂蚁物种，可选择添加过滤器，然后将显示一个 Leaflet.js 地图和一个类似电子表格的结果表。我们还需要在页面上积累几个搜索结果（例如比较不同物种的地理分布）。

我在那里设想了两种选择：

A）要么（Backbone）模型是蚂蚁事件，而且每个用户搜索都是一个不同的 Backbone 集合，包含匹配的事件和一些搜索级别的属性。这是有道理的，因为服务器端模型也将成为蚂蚁出现，然后我将能够充分利用自动 REST 集成。但是我必须使用 JavaScript 数组来跟踪这些不同的集合。还必须在这些集合上管理事件，例如当用户想要从显示的数据中删除以前的搜索时。

B）要么模型是一个“搜索”对象，而且这些不同的累积搜索保存在一个集合中。然后我可以充分利用这些集合，但客户端/服务器模型将不是同一件事（搜索与出现），因此我将无法在那里使用简单的 RESTful 方法。

你会选择什么？

谢谢，尼古拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:46:14.640

当我必须弄清楚某个东西是集合还是数组时，我觉得很困惑，所以我选择了一个并坚持使用它。您可以从 Backbone Collections 中获得更多功能，因此我为所有内容选择这些功能并避免使用数组。

# http - 在 onModuleLoad 中完成的请求根本不会被缓存。主要在火狐中

> ID：14872107
> 
> 赞同：2
> 
> 时间：2013-02-14T09:58:02.143
> 
> 标签：http, firefox, gwt, firebug

我遇到了一个问题，在大多数情况下（主要是使用 FireFox），在 onModuleLoad 事件中完成的请求没有被缓存。我检查了 FireBug 上的网络控制台，它几乎总是显示那些从服务器而不是从缓存中获取的请求。

我准备了一个测试用例，你可以在[http://tradeosam.appspot.com/查看](http://tradeosam.appspot.com/)

这是 onModuleLoad 实现：

```
public void onModuleLoad() {
    RequestBuilder request = new RequestBuilder(RequestBuilder.GET,
            "query/test?v=1-8951245");
    try {
        request.sendRequest(null, new RequestCallback() {

            @Override
            public void onResponseReceived(Request request,
                    Response response) {
            }

            @Override
            public void onError(Request request, Throwable exception) {
            }
        });
    } catch (RequestException e) {
    }

    new Timer() {

        @Override
        public void run() {
            RequestBuilder request = new RequestBuilder(RequestBuilder.GET,
                    "query/test?v=1-23478.34");
            try {
                request.sendRequest(null, new RequestCallback() {

                    @Override
                    public void onResponseReceived(Request request,
                            Response response) {
                    }

                    @Override
                    public void onError(Request request, Throwable exception) {
                    }
                });
            } catch (RequestException e) {
            }
        }
    }.schedule(1000);
} 
```

从代码中可以看出，我在ModuleLoad上做了两个请求，第一个是直接完成的，几乎从不被浏览器缓存。第二个是在 1 秒后使用计时器完成的，并且缓存没有问题。这两个请求具有相同的标头，并转到相同的 Servlet，唯一的区别是用于区分两者的“v”参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T20:14:37.817

现在我在您的展示中看不到“查询/测试”请求，但我看到的所有 XHR 请求都没有任何针对浏览器的缓存指令。默认情况下，浏览器不缓存 XHR 请求，b/c 作为规则，此类请求必须带来最新的数据。但是如果你想强制浏览器缓存它们，只需将 Cache-Control 添加到客户端的请求标头中。我无法指定具体规则，因为我不知道您对它的要求——至少它应该保留数据多长时间。

请参考 RFC：“ [HTTP 中的缓存](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html)”和有关 http 缓存的精彩文章：“[缓存教程](http://www.mnot.net/cache_docs/)”。

希望这可以帮助。

# c# - 无法将数据从listview插入sql数据库

> ID：14872110
> 
> 赞同：0
> 
> 时间：2013-02-14T09:58:08.093
> 
> 标签：c#, sql

```
foreach ( ListViewItem l in lvSA.Items)
{
      SqlConnection con = new SqlConnection("data source = .; database = ePartyDatabase; integrated security = true");
      con.Open();

      SqlCommand cmd = new SqlCommand("insert into PARTY_ROOMS(PR_ROOMNO,PR_RATES,PR_REMARK) values(" + l.SubItems[1].ToString() + "," + l.SubItems[3].ToString() + l.SubItems[4].ToString(), con);

       cmd.ExecuteNonQuery();

        con.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:02:59.220

应该是：

```
SqlCommand cmd = new SqlCommand("insert into PARTY_ROOMS(PR_ROOMNO,PR_RATES,PR_REMARK) values('" + l.SubItems[1].Text + "','" + l.SubItems[3].Text + "','" + l.SubItems[4].Text + "')", con); 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:06:32.657

既然你给了我们一些信息，我认为你`SqlCommand`有一些问题。

您尝试插入 3 列（`PR_ROOMNO`, `PR_RATES`, `PR_REMARK`），但在您的 VALUES 部分，您有 2 个值；

*   `l.SubItems[1].ToString()`和
*   `l.SubItems[3].ToString() + l.SubItems[4].ToString()`

我认为您需要将第二个值分成两个值，例如；

```
values('" + l.SubItems[1].ToString() + "','" + l.SubItems[3].ToString() + "','" + l.SubItems[4].ToString() + "')", con); 
```

查看如何使用MSDN*中的**[INSERT](http://msdn.microsoft.com/en-us/library/aa933206%28v=sql.80%29.aspx)*。

 *请记住，始终使用 *[`parameterized SQL`](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)*查询。*[您的代码对SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)*攻击是开放的。*

# javascript - 有没有办法为调试目的获取 JavaScript 的执行顺序

> ID：14872112
> 
> 赞同：2
> 
> 时间：2013-02-14T09:58:13.920
> 
> 标签：javascript, jquery

我在使用异步函数时遇到了很多问题，我想知道是否有任何工具可以在脚本运行后向我显示脚本的执行顺序（不停止它）。我有 Firebug，但我看不到执行此操作的选项。

我正在寻找这个的原因是我有一个回调被调用，`.done()`但`.get()`由于某种原因它有时会失败，所以我试图找出发生这种情况的确切位置。

这不是我在问如何解决异步问题（尽管欢迎提出建议），而是我更想学习如何自己追踪它。任何建议或工具/教程的链接都非常欢迎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:07:01.490

`console.log('myFunctionName')`在您的功能中。您还可以记录变量，以仔细检查它们的内容是否正确。

基本上，是这样的：

```
var myInt = 0;

function init(){
    console.log('init()')
    stepOne();
    myInt = 10
    console.log('Between steps')
    stepTwo();
    // more stuff;
    console.log('init() end');
}

function stepOne(){
    console.log('stepOne()', myInt);
    // Do stuff
    console.log('stepOne() end', myInt);
}

function stepTwo(){
    console.log('stepTwo()', myInt);
    // Do stuff
    console.log('stepTwo() end', myInt);
} 
```

ETC...

如果您会在日志中看到类似的内容，请在运行后`init()`：

```
init()
stepOne() 0
stepOne() end 0
Between steps
stepTwo() 10 
```

那么这意味着你的代码正在闯入`stepTwo()`。

# ajax - Blueimp jQuery 文件上传和 symfony2：自定义上传处理程序的问题

> ID：14872115
> 
> 赞同：2
> 
> 时间：2013-02-14T09:58:23.380
> 
> 标签：ajax, jquery, symfony, file-upload, blueimp

我正在使用 Symfony2，我想使用 BlueImp 插件，[基本设置](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)。

实际上，我有一个表格，您可以在其中加载 3 张图片和一首歌曲（用于艺术家注册）。

首先，我尝试为一张图片实现插件。但是当我在我的输入“图片 1”中选择一个文件时，什么也没有发生。有什么问题？

```
<html>
 <head>
    <script type="text/javascript"  src="{{ asset('bundles/mybundle/js/jquery-file-upload/js/vendor/jquery.ui.widget.js') }}"></script>
    <script type="text/javascript"  src="{{ asset('bundles/mybundle/js/jquery-file-upload/js/jquery.iframe-transport.js') }}"></script>
    <script type="text/javascript"  src="{{ asset('bundles/mybundle/js/jquery-file-upload/js/jquery.fileupload.js') }}"></script>
  </head>

 <form id="myForm" action="{{ path('MyBundle_artist_new') }}" {{ form_enctype(form) }} method="post" novalidate>
     <div class="field">
        {{ form_label(form.picture1 "Picture 1") }}
        {{ form_widget(form.picture1) }}
      </div>
      <input type="submit" value="Register"/>
</form>

<script type="text/javascript">

$(document).ready(function(){

    $('#myform_picture1').fileupload(
    {
        dataType: 'json',
        url:'{{path('MyBundle_ajax_upload_picture') }}',
        done: function (e, data) {
            $.each(data.result.files, function (index, file) {
                $('<p/>').text(file.name).appendTo(document.body);
            });
        }
    });
  });
</script> 
```

这是**上传处理程序**（url {{path('MyBundle_ajax_upload_picture') }} 的操作：

```
<?php

    public function ajaxUploadPicture()
    {
        $request = $this->get('request');
        $uploaded_file = $request->files->get('myform_picture1');

        if ($uploaded_file) 
        {
            $picture1 = $this->processImage($uploaded_file);
            $picture1->setPath('pictures/artist/' . $picture1);
            $em->persist($picture1);
            $em->flush();

            $response = 'success';
        }

        else $response= 'error';

        $response = new Response(json_encode(array('response'=>$response)));
        $response->headers->set('Content-Type', 'application/json');
        return $response;
    }

    public static function processImage(UploadedFile $uploaded_file)
    {
        $path = 'pictures/artist/';
        $uploaded_file_info = pathinfo($uploaded_file->getClientOriginalName());
        $filename = uniqid() . "." .$uploaded_file_info['extension'];

        $uploaded_file->move($path, $filename);

        return $filename;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:11:55.143

您应该检查从 ajax 请求中获得的内容：

```
$('#myform_picture1').fileupload(
{
    dataType: 'json',
    url:'{{path('MyBundle_ajax_upload_picture') }}',
    done: function (e, data) {
        $.each(data.result.files, function (index, file) {
            $('<p/>').text(file.name).appendTo(document.body);
        });
    },
    always: function (e, data) {
       console.log(data);
    }
}); 
```

我不确定这一行`$uploaded_file = $request->files->get('myform_picture1');` ，您确定您的文件输入名称是`myform_picture1`？

请试试`$uploaded_file = $request->files->get('myform[picture1]', array(), true);`

# multithreading - 面向初学者的基于 ARM 处理器的开发板

> ID：14872119
> 
> 赞同：-1
> 
> 时间：2013-02-14T09:58:37.360
> 
> 标签：multithreading, arm, rtos, toolchain, jtag

1.  我想买一块基于 ARM 微处理器的板子，谁能告诉我哪个是最好的（就功能而言）和成本效益？
2.  我需要购买哪些硬件/软件工具和电缆（用于调试、IDE 等）？

（**注：** *要测试的多线程代码，RTOS（Linux，ThreadX等），硬件调试*）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:08:35.830

1.  从. `lpc2xxx`_ `nxp`它有ARM7内核。
2.  软件-`keil`很好。`jtag`调试器可用于调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:14:52.263

根据您的预算和您想用它做什么，有几个选项。如果你想运行 Linux，你需要一些实质性的东西。我推荐[树莓派](http://downloads.element14.com/raspberryPi1.html?COM=raspi-group)。它有一个很好的在线社区和 Linux 端口。

# hibernate - Hibernate Hql查询选择内部对象的属性

> ID：14872126
> 
> 赞同：0
> 
> 时间：2013-02-14T09:58:51.093
> 
> 标签：hibernate, hql

情况是这样的：我有一个包含对象 B 的类 A，我想做的是编写一个 Select 查询女巫提取仅加载 B 女巫的一个属性的 A 对象

例子 ：

```
Class A {
   private B b;
}

Class B {
  private String s1;
  private Strung s2;
  private String s3; 
```

}

我想提取 A 对象，只加载 B.s1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:08:54.520

像这样的东西？

```
select
  a,
  b.s1
from A a join a.B b 
```

这会加载并初始化`A`. 如果是延迟加载，则除了显式加载的 s1 之外`B`，它不会加载任何关于的内容。`B`如果它不是延迟加载的，你可能应该只加载 id，如果有的话。

```
select
  a.id,
  b.s1
from A a join a.B b 
```

# java - @Autowired 的 Spring 3.2 默认值

> ID：14872130
> 
> 赞同：0
> 
> 时间：2013-02-14T09:59:09.553
> 
> 标签：java, spring, dependency-injection, inversion-of-control, autowired

Spring 3.2 的默认自动装配方法是什么？所以假设我有这门课

```
public class Saxophonist implements IPerform{

    @Override
    public String perform() {
        return "I am A Saxophonist and I am Playing The : "+ saxophone;
    }

    private Instrument saxophone;

    public Instrument getSaxophone() {
        return saxophone;
    }

    @Autowired
    public void setSaxophone(Instrument saxophone) {
        this.saxophone = saxophone;
    }
} 
```

它会按名称执行还是按类型执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:01:08.433

默认情况下，自动装配按类型执行。您可以使用`@Qualifier`来指定自动装配的名称。

当容器中存在多个相同类型的 bean 时，Spring 将回退到该名称。因此，如果字段名称与 bean 名称匹配，则将使用相应的 bean。

> 对于回退匹配，bean 名称被视为默认限定符值。因此，您可以使用 id “main”而不是嵌套的限定符元素来定义 bean，从而获得相同的匹配结果。但是，尽管您可以使用此约定按名称引用特定的 bean，但 @Autowired 从根本上讲是关于带有可选语义限定符的类型驱动注入。这意味着限定符值，即使使用 bean 名称回退，也总是在类型匹配集中具有缩小语义；它们不会在语义上表达对唯一 bean id 的引用。好的限定符值是“main”或“EMEA”或“persistent”，表示独立于 bean id 的特定组件的特征，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T10:05:01.413

@Autowired 是类型驱动的，但它提供了一个后备捕获来按名称注入 bean。如果要根据名称执行 bean 查找和注入，请使用 @Resource，或者 @Autowired 和 @Qualifier 也可以工作，尽管它在对 bean 进行分组时更有用。 [http://www.spiritwalker-jiang.com/archive/2013/02/11/Understanding-Autowired-annation-in-Spring](http://www.spiritwalker-jiang.com/archive/2013/02/11/Understanding-Autowired-annation-in-Spring)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T10:02:45.587

它将按其类型执行查找。如果您在同一个 ApplicationContext 中有多个相同类型的 bean，那么您应该使用`@Qualifier`它们各自的名称自动装配所有这些 bean。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T10:01:09.387

按类型。要使其按名称接线执行，您必须添加注释`@Qualifier`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T10:05:28.717

`bean name``@Qualifier()`如果添加到 setter 方法，则被视为默认限定符值。[更多](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-autowired-annotation-qualifiers)_

# ruby - 使用 ruby rake 运行 windows cmd

> ID：14872136
> 
> 赞同：2
> 
> 时间：2013-02-14T09:59:26.357
> 
> 标签：ruby

我正在尝试使用 Ruby Rake 任务在同一系统进程中运行一些 Windows 命令行调用。我需要找到正确拨打电话的方法，而且这些电话不能相互依赖。

我知道'fork' 功能可以是一个解决方案，但它在 Windows 中不起作用。我尝试了其他功能，比如`IO.POPEN`and `Process.spawn`我没有找到真正的解决方案。

我正在使用`Ruby 1.9.3`Windows XP。

```
task :CmdTest,:value do |t, args|
  value=args.value.to_s
  begin

    $cmd<<("set MYVAR=#{value}")
    $cmd<<("set MYVAR")
    $cmd<<("exit")
  rescue Exception => e
    puts e.message
  end
end

task :CmdTest3 do

  IO.popen("cmd", "r+") do |io|
    th = Thread.new(io) do |chan|
      chan.each {|line| puts line}
    end
    $cmd.each do |f|
      io.puts f
    end
    io.close_write
    th.join
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:16:11.520

看看[win32utils](http://win32utils.rubyforge.org/)，这就是你所追求的吗？

# ejb-3.0 - Weblogic 10.3.5 & EJB 3 JNDI 名称

> ID：14872141
> 
> 赞同：2
> 
> 时间：2013-02-14T09:59:38.780
> 
> 标签：ejb-3.0, jndi, weblogic11g

有人能告诉我在哪里可以找到有关 EJB 3 的默认 JNDI 命名的信息吗？

Weblogic 是否使用像 Glassfish 这样的可移植 JNDI 名称？

我可以找到（例如 Glassfish）使用 JNDI 名称的 EJB 部署的痕迹吗？

例如 ：

*   只有@Remote 的接口（服务）
*   一个只有 @Stateless 实现接口的 bean (ServiceImpl)
*   打包在`.ear`文件中的所有内容 (service-application-1.0)

在 Weblogic 上部署时，我看到的唯一 JNDI 参考是：

```
service-application-1.0service-application-1.0_jarServiceImpl_Home 
```

但我不能在上下文查找中使用该名称。如果我做

```
Service myService = (Service) context.lookup("service-application-1.0service-application-1.0_jarServiceImpl_Home"); 
```

它给了我

```
Exception in thread "main" java.lang.ClassCastException: weblogic.ejb.container.internal.StatelessEJBHomeImpl_1035_WLStub cannot be cast to com.tuto.Service
at com.tuto.TestEjb.main(TestEjb.java:24) 
```

PS。有了 Glassfish，它给了我

```
Portable jndi names for .... : java:global/service-application-1.0/service-application-ejb-1.0/ServiceImpl 
```

和

```
Service myService = (Service) context.lookup("java:global/service-application-1.0/service-application-ejb-1.0/ServiceImpl"); 
```

正在工作中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T06:30:37.910

不幸的是，EJB 3.0 没有指定标准的 JNDI 命名，而是由服务器供应商决定。引用有关 mappedName 的 WL 文档是对的：“如果指定此属性，则无状态会话 bean 可能不可移植”。mappedName 属性的缺点是全局 JNDI 名称将默认为 mappedName#FullyQualifiedRemoteInterface。由于 mappedName 是源代码中的注释，它使您的代码不可移植。首选方法是将特定于供应商的行为保留在特定于供应商的部署描述符中，例如 weblogic-ejb-jar.xml。这样，您还可以选择指定您自己的自定义 JNDI 名称，而不需要预先确定的格式，如 mappedName#FullyQualifiedRemoteInterface。

EJB 3.1 为在全局、应用程序和模块级别标准化 JNDI 名称做出了一些努力。请参阅[http://docs.oracle.com/cd/E19798-01/821-1841/girgn/index.html](http://docs.oracle.com/cd/E19798-01/821-1841/girgn/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:54:51.203

您可以尝试， bean 的映射名称`context.lookup("ServiveImpl#com.Service");`在哪里，它应该是完全限定的接口名称。`ServiveImpl``#`

# opengl-es - 是否可以使用 opengles 加速 GTK

> ID：14872148
> 
> 赞同：1
> 
> 时间：2013-02-14T09:59:57.480
> 
> 标签：opengl-es, gtk

是否可以使用 OpenglES2.0 硬件加速 GTK 的渲染？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:00:41.777

并不真地。您可以使用 Clutter-gtk 模块将 GtkWidgets 放入 OpenGL 场景图 Clutter，但 Gtk 仍然使用 cairo 进行绘制，然后将其作为纹理上传到 GFX 卡，因此对​​于普通窗口来说没有太多的加速。

# android - 软键盘和编辑文本问题

> ID：14872150
> 
> 赞同：0
> 
> 时间：2013-02-14T10:00:01.867
> 
> 标签：android, android-edittext, android-softkeyboard

我的应用程序底部有一个编辑文本。我想在收到触摸事件时始终实现这一点，软键盘出现将整个窗口滚动到顶部，以便我的 EditText 保持可见。

问题是有时窗口根本不滚动，编辑文本仍然隐藏在软键盘后面。奇怪的是，在那些时刻，如果我按下任何东西或与窗口中的其他元素交互，显然它会刷新或类似的东西，然后它会正确滚动到顶部，让我看到编辑文本。

我尝试了不同的东西，这是我的最终代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:background="@android:color/black">

<my.Custom_Edit_Text
    android:id="@+id/my_custom_edit_text"
    style="@style/my_custom_edit_text_Style"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_centerInParent="true"
    android:maxLength="@integer/data_title_max_length"
    android:text="@string/my_custom_edit_text_default" 
    android:selectAllOnFocus="true"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:cursorVisible="true"
    android:inputType="text"/> 
```

这是我的 Custom_Edit_Text 代码，我在其中处理 onTouch 事件：

```
setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
                requestFocus();
            }
            return false;
        }
    }); 
```

我还在 Manifest 文件中设置了这个属性：

```
android:windowSoftInputMode="stateHidden|adjustPan" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:04:40.543

用这个

```
android:configChanges="keyboardHidden|orientation" 
```

和

```
android:windowSoftInputMode="adjustPan" 
```

让我知道使用这两种方法是否对您有帮助，并且在您的虚拟键盘造成问题的布局中使用滚动视图，它也有一点帮助

将您正在分发的整个布局放在滚动视图中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:14:45.910

这篇文章给了我解决我的问题的线索[https://stackoverflow.com/a/5989385/1382250](https://stackoverflow.com/a/5989385/1382250)

我只是尝试将我的编辑文本更改为文本视图，现在它可以完美运行（在所有情况下都滚动窗口）。

# mysql - 你能简化这个查询吗？

> ID：14872158
> 
> 赞同：0
> 
> 时间：2013-02-14T10:00:34.690
> 
> 标签：mysql, sql

我有一个具有这种结构的表：

```
CREATE  TABLE IF NOT EXISTS `mydb`.`sizes` (
  `id_size` INT NOT NULL ,
  `cm_min` INT NOT NULL ,
  `cm_max` INT NOT NULL ,
  PRIMARY KEY (`id_size`) )
ENGINE = InnoDB; 
```

* * *

此查询返回大小为 5 的宽度和高度：

```
select cm_min, cm_max from sizes where id_size = 5; 
```

哪个是：

```
45, 56 
```

好吧，我想获得所有在此范围之间具有 cm_min 或 cm_max 的尺寸。我坚持这样的事情：

[http://sqlfiddle.com/#!2/83e93/51](http://sqlfiddle.com/#!2/83e93/51)

它有效，但有些尺寸不在任何范围之间。我的意思是，如果我有这个：

```
id_size    cm_min    cm_max
1          56        59
2          63        67
3          70        74
4          76        79
5          83        86
6          60        62
7          12        14 
```

如果我有 id_size 6 的值，并且我执行上一个查询，它将返回 0 行选择，并且我希望获得比这更高和更小的尺寸的 id_size，尽管不是严格在值之间。在这种情况下会返回：

```
id_size    cm_min    cm_max
1          56        59
2          63        67 
```

或者例如，如果 te id_size 7 的值是次要值，我需要获取下一个次要值，在我的情况下是：

```
id_size    cm_min    cm_max
1          56        59 
```

或者，如果我有更高的值，我需要具有第二个更高值的尺寸的 id。

然后，如果我发布的第一个查询没有任何结果，我会这样做： [http ://sqlfiddle.com/#!2/83e93/32/0](http://sqlfiddle.com/#!2/83e93/32/0)

它适用于。所以，我的问题是： **我可以只用一个查询做同样的事情吗？**

我希望我的解释很清楚，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:24:12.807

下面的 SQL 将帮助您入门，这将返回所有高于或低于所选 id 的行，例如此处为 id = 6

```
SELECT id_size 
FROM sizes 
WHERE (cm_min < 60 or  cm_min > 62) and
(cm_max < 60 or cm_max > 62); 
```

**[SqlFiddle 演示](http://sqlfiddle.com/#!2/c08f3/4)**

**更新 - 示例**

下面我提供了更接近您需要的示例：`LIMIT 1`如果您需要所有记录，请删除，更低和更高

```
SELECT id_size , 'lower'
FROM sizes 
WHERE (cm_min < 12 AND cm_max < 12)  
LIMIT 1
UNION
SELECT id_size , 'HIGHER'
FROM sizes 
WHERE (cm_min > 14 AND cm_max > 14)
LIMIT 1 
```

[SqlFiddle 演示](http://sqlfiddle.com/#!2/c08f3/10)

# iphone - UIImage 方法没有被调用

> ID：14872159
> 
> 赞同：0
> 
> 时间：2013-02-14T10:00:35.597
> 
> 标签：iphone, ios

我正在尝试在视图上操作 UIImage 对象。但是当我尝试调用 UIImage 类上的任何方法时，它会抛出异常

```
2013-02-14 15:24:42.301 Test[4685:19a03] -[UIImage scaleToSize:]: unrecognized selector sent to instance 0x94642c0 
2013-02-14 15:24:42.303 Test[4685:19a03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIImage scaleToSize:]: unrecognized selector sent to instance 0x94642c0'
*** First throw call stack:`
(0x1cc1012 0x1ae6e7e 0x1d4c4bd 0x1cb0bbc 0x1cb094e 0x47ee9 0x47bc0 0xb0f817 0xb0f882 0xb0fb2a 0xb26ef5 0xb26fdb 0xb27286 0xb27381 0xb27eab 0xb27fc9 0xb28055 0xc2d3ab 0xa7e92d 0x1afa6b0 0x5c3fc0 0x5b833c 0x5b8150 0x5360bc 0x537227 0x5378e2 0x1c89afe 0x1c89a3d 0x1c66f61 0x1c66e1b 0x39117e3 0x3911668 0xa2e65c 0x31fcd 0x29d5)
libc++abi.dylib: terminate called throwing an exception 
```

这是我正在使用的代码：

```
 UIImage *test = [[UIImage alloc] init];
    test = [UIImage imageNamed:@"image0.jpg"];
    [test scaleToSize:CGSizeMake(40.0f, 40.0f)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:04:22.213

看看[UIImage 的类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)。你不会找到你正在寻找的方法。也许您忘记添加您正在使用的类别（例如）：

```
#import "UIImage+Scale.h" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T10:03:56.163

首先定义图像大小然后缩放它。

```
UIImage *test = [[UIImage alloc] init;
test = [UIImage imageNamed:@"image0.jpg"];
[test scaleToSize:CGSizeMake(40.0f, 40.0f)]; 
```

试试这行代码。或者在 UIImageView 中使用这个图像

# ruby-on-rails - 让 rails3-autocomplete-jquery gem 与具有多个输入的 Simple_Form 很好地配合使用

> ID：14872162
> 
> 赞同：0
> 
> 时间：2013-02-14T10:00:38.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, autocomplete, jquery-autocomplete

所以我正在尝试使用[这个 gem](https://github.com/crowdint/rails3-jquery-autocomplete/)和 simple_form 实现多个自动完成，但我得到了一个错误。

我试过这个：

```
<%= f.input_field :neighborhood_id, collection: Neighborhood.order(:name), :url => autocomplete_neighborhood_name_searches_path, :as => :autocomplete, 'data-delimiter' => ',', :multiple => true, :class => "span8" %> 
```

这是我得到的错误：

```
undefined method `to_i' for ["Alley Park, Madison"]:Array 
```

在我的参数中，它发送这个`neighborhood_id`：

```
"search"=>{"neighborhood_id"=>["Alley Park, Madison"], 
```

所以它甚至没有使用这些值的 ID。

有没有人有任何想法？

**编辑1：**

针对@jvnill 的问题，我没有明确地`params[:search]`在控制器中做任何事情。搜索会创建一条新记录，并且正在搜索`listings`。

在我的搜索控制器中，`create`操作，我只是这样做：

```
@search = Search.create!(params[:search]) 
```

然后我的`search.rb`（即搜索模型）有这个：

```
def listings
    @listings ||= find_listings
end

private
  def find_listings
    key = "%#{keywords}%"
    listings = Listing.order(:headline)
    listings = listings.includes(:neighborhood).where("listings.headline like ? or neighborhoods.name like ?", key, key) if keywords.present?
    listings = listings.where(neighborhood_id: neighborhood_id) if neighborhood_id.present?
    #truncated for brevity
    listings
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:40:41.237

首先，如果表单返回的是 id 而不是邻居的名称，这会更容易。我还没有使用过 gem，所以我不熟悉它是如何工作的。阅读自述文件说它会返回 ID，但我不知道为什么你只得到名字。我敢肯定，一旦您弄清楚如何返回 ID，您就可以更改下面的代码以适应它。

您需要在邻域和搜索之间创建一个连接表。我们称之为search_neighborhoods。

```
rails g model search_neighborhood neighborhood_id:integer search_id:integer
# dont forget to add indexes in the migration 
```

之后，您需要设置模型。

```
# search.rb
has_many :search_neighborhoods
has_many :neighborhoods, through: :search_neighborhoods

# search_neighborhood.rb
belongs_to :search
belongs_to :neighborhood

# neighborhood.rb
has_many :search_neighborhoods
has_many :searches, through: :search_neighborhoods 
```

现在我们已经设置了关联，我们需要设置设置器和属性

```
# search.rb
attr_accessible :neighborhood_names

# this will return a list of neighborhood names which is usefull with prepopulating
def neighborhood_names
  neighborhoods.map(&:name).join(',')
end

# we will use this to find the ids of the neighborhoods given their names
# this will be called when you call create!
def neighborhood_names=(names)
  names.split(',').each do |name|
    next if name.blank?
    if neighborhood = Neighborhood.find_by_name(name)
      search_neighborhoods.build neighborhood_id: neighborhood.id
    end
  end
end

# view
# you need to change your autocomplete to use the getter method
<%= f.input :neighborhood_names, url: autocomplete_neighborhood_name_searches_path, as: :autocomplete, input_html: { data: { delimiter: ',', multiple: true, class: "span8" } %> 
```

最后但并非最不重要的是更新`find_listings`

```
def find_listings
  key = "%#{keywords}%"
  listings = Listing.order(:headline).includes(:neighborhood)

  if keywords.present?
    listings = listings.where("listings.headline LIKE :key OR neighborhoods.name LIKE :key", { key: "#{keywords}")
  end

  if neighborhoods.exists?
    listings = listings.where(neighborhood_id: neighborhood_ids)
  end

  listings
end 
```

就是这样:)

更新：使用 f.input_field

```
# view
<%= f.input_field :neighborhood_names, url: autocomplete_neighborhood_name_searches_path, as: :autocomplete, data: { delimiter: ',' }, multiple: true, class: "span8" %>

# model
# we need to put [0] because it returns an array with a single element containing
# the string of comma separated neighborhoods
def neighborhood_names=(names)
  names[0].split(',').each do |name|
    next if name.blank?
    if neighborhood = Neighborhood.find_by_name(name)
      search_neighborhoods.build neighborhood_id: neighborhood.id
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:14:15.343

您的问题是您如何从邻域模型中收集值

```
 Neighborhood.order(:name) 
```

将返回一个名称数组，您还需要收集 id，但只显示名称使用 collect 并传递一个块，我相信这可能适合您

```
Neighborhood.collect {|n| [n.name, n.id]} 
```

如果您想恢复剧院功能，请在 Neighborhood 类上声明一个范围以按名称对其进行排序，因为无论如何该行为也属于模型。

编辑>要向邻域模型添加范围/类方法，您通常会这样做

```
scope :desc, where("name DESC") 
```

比你可以写这样的东西：

```
Neighborhood.desc.all 
```

这将返回一个数组，从而允许 .collect 但还有其他方法可以获取 select 选项识别的那些 name 和 id 属性。

# javascript - d3条形图在firefox中模糊但在chrome中没有

> ID：14872172
> 
> 赞同：0
> 
> 时间：2013-02-14T10:01:17.843
> 
> 标签：javascript, html, google-chrome, firefox, d3.js

我对 d3 条形图有奇怪的情况。我可以用 chrome 很好地看到它，但在 Firefox 中，它的行为就好像某些元素覆盖了它的某些部分。但是当我在 Firefox 中查看 3D 页面时，它向我显示了矩形，但它们在页面上不可见。我包括使用 d3 生成的 HTML，它在 chrome 和 firefox 中的行为不同。

```
<script type="text/javascript" src="js/bar_chart.js"></script><script  type="text/javascript" src="d3/d3.v3.min.js"></script></head>
<body>
<div style="position:fixed;
    position:obsolute;/*for ie6*/
    background-color: rgba(0,0,0,1.0);
    height:206px;
    width: 100%;
    top:0px;
    right:0px;" class="plot" id="barchart">

<br><br>
<p class="bob"></p>
<svg class="bar"><g transform="translate(20,0)"><line x1="0" x2="1295" y1="149.5"  y2="149.5" style="stroke: #ffffff;"></line><line x1="0" x2="1295" y1="119.5" y2="119.5" style="stroke: #cccccc;"></line><line x1="0" x2="1295" y1="89.5" y2="89.5" style="stroke: #cccccc;"></line><line x1="0" x2="1295" y1="59.5" y2="59.5" style="stroke: #cccccc;"></line><line x1="0" x2="1295" y1="29.5" y2="29.5" style="stroke: #cccccc;"></line><line x1="0" x2="1295" y1="-0.5" y2="-0.5" style="stroke: #cccccc;"></line><rect x="-0.5" y="119.5" width="64" height="30" fill="steelblue"></rect><rect x="63.5" y="89.5" width="64" height="60" fill="steelblue"></rect><rect x="127.5" y="71.5" width="64" height="78" fill="steelblue"></rect><rect x="191.5" y="35.5" width="64" height="114" fill="steelblue"></rect>
<rect x="255.5" y="23.5" width="64" height="126" fill="steelblue"></rect><rect x="319.5" y="-0.5" width="64" height="150" fill="steelblue"></rect><rect x="383.5" y="17.5" width="64" height="132" fill="steelblue"></rect><rect x="447.5" y="41.5" width="64" height="108" fill="steelblue"></rect><rect x="511.5" y="59.5" width="64" height="90" fill="steelblue"></rect><rect x="575.5" y="71.5" width="64" height="78" fill="steelblue"></rect><rect x="639.5" y="83.5" width="64" height="66" fill="steelblue"></rect><rect x="703.5" y="77.5" width="64" height="72" fill="steelblue"></rect><rect x="767.5" y="59.5" width="64" height="90" fill="steelblue"></rect><rect x="831.5" y="29.5" width="64" height="120" fill="steelblue"></rect><rect x="895.5" y="41.5" width="64" height="108" fill="steelblue"></rect><rect x="959.5" y="47.5" width="64" height="102" fill="steelblue"></rect><rect x="1023.5" y="53.5" width="64" height="96" fill="steelblue"></rect><rect x="1087.5" y="41.5" width="64" height="108" fill="steelblue"></rect><rect x="1151.5" y="11.5" width="64" height="138" fill="steelblue"></rect><rect x="1215.5" y="-0.5" width="64" height="150" fill="steelblue"></rect><text class="rule" x="0" y="149.5" dx="6" text-anchor="middle" fill="white" font-size="14px">0</text><text class="rule" x="0" y="119.5" dx="6" text-anchor="middle" fill="white" font-size="14px">5</text><text class="rule" x="0" y="89.5" dx="6" text-anchor="middle" fill="white" font-size="14px">10</text><text class="rule" x="0" y="59.5" dx="6" text-anchor="middle" fill="white" font-size="14px">15</text><text class="rule" x="0" y="29.5" dx="6" text-anchor="middle" fill="white" font-size="14px">20</text><text class="rule" x="0" y="-0.5" dx="6" text-anchor="middle" fill="white" font-size="14px">25</text></g></svg></div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:04:09.293

这个问题已经在以下线程中得到解决： [SVG 呈现但仅在 Firefox 中被切断 - 为什么？](https://stackoverflow.com/questions/12830897/svg-renders-but-gets-cut-off-in-firefox-only-why) 谢谢你。

# c++ - 异常类

> ID：14872176
> 
> 赞同：0
> 
> 时间：2013-02-14T10:01:30.223
> 
> 标签：c++, exception

所以我正在为链表做一个异常类，但我不知道该放什么。例如，如果用户想要删除列表中不存在的元素，它将打印出“捕获稀疏异常” ：未找到元素，删除失败”或“捕获到稀疏异常：稀疏矩阵为空，打印失败”。我可以这样做吗？如果是这样，我如何打印出消息？

```
SparseException::SparseException ()
{
}
SparseException::SparseException (char *message)
{
if (strcmp(message, "delete"))
      cout << "Sparse Exception caught: Element not found, delete fail";
   else
      cout << "Sparse Exception caught: sparse matrix empty, printing failed";
}

void SparseException::printMessage () const
{

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:03:34.910

在我看来，异常应该始终继承`std::exception`或其子类之一。这将使您对应该实现的接口有所了解。例如，您需要一个`what`方法（实际上`what`返回您可能`printMessage`会打印的内容）。此外，如果您真的想打印您的异常是什么消息，最好重载`operator<<`.

需要继承`std::exception`，以便您知道 a`catch(std::exception& ex)`将捕获代码抛出的任何异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:41:39.600

> 所以我正在为链表做一个例外类，但我不知道该放什么。

首先，考虑从 std::exception 层次结构继承（通常我从 std::runtime_error 或 std::logic_error 继承）。它将为您提供一个接收描述错误的字符串消息的基本类，并允许您的客户端代码通过捕获通用 std::exception ref 来接收和处理您的异常。

> 例如，如果用户想删除一个列表中不存在的元素，它会打印出“Sparse Exception catch: Element not found, delete fail”，或者“Sparse Exception crawl: sparse matrix empty, printing failed”。我可以这样做吗？

通常，您应该使用描述错误的完整消息（可以记录的字符串），而不是描述异常的类型（将其留给您的异常类层次结构）。

在你的情况下：

```
class SparseException: public std::runtime_error
{
public:
    SparseException(const std::string& message): std::runtime_error(message) {}
}; 
```

您的队列：

```
// ... 
if (whatever1)
    throw SparseException("element not found, delete failed");

// ...
if (whatever2)
    throw SparseException("sparse matrix empty, printing failed"); 
```

> 如果是这样，我如何打印出消息？

客户端代码：

```
try
{
    // ...
} catch(const SparseException& e)
{
    std::cerr << "SparseException: " << e.what() << "\n"; // what() is a member
                                                          // of std::exception
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:05:38.237

添加到@Ivaylo 帖子，该行

```
if (strcmp(message, "delete")) 
```

应该读

```
if (0 == strcmp(message, "delete")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T10:06:08.347

如果你想创建一个自定义`Exception`，你最好继承它`std::exception`或其子类型，如`runtime_error`or `logic_error`。此外，在异常类中打印消息是没有意义的，这是客户的责任。您只需要 override`what`方法，该方法返回详细的异常消息（也就是说，`runtime_error`or`logic_error`的默认实现通常是可以的）。

声明`if (strcmp(message, "delete")) {...}`也没什么意义（实际上应该是`!strcmp(...)`）。如果您只想打印不同的消息，将该消息传递给异常的构造函数就足够了。但是，如果您需要区分异常，则最好添加一些类，例如`SparseDeletionException`或`SparseEmptyException`继承自公共基础`SparseException`（而后者又继承自`std::exception`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T10:07:15.860

通常，异常类只包含有关问题所在的信息。通常，它们包含一个字符串，因为字符串可以包含几乎所有您想要“将 123 写入文件 c:/a.txt 失败”的内容。

在您提出的简单案例中，您应该使用不同类别的异常（如 SparseDeleteException）。或者，如果您想要更复杂的逻辑来获取错误文本，我建议使用不同的类来处理“错误 id”->“错误字符串”转换，因为这不是异常的任务。

此外，异常应该有一个方法`toString`而不是 print - 捕获方法应该能够决定如何处理消息。

# android - 如何预先分配 RadialGradient？

> ID：14872177
> 
> 赞同：1
> 
> 时间：2013-02-14T10:01:30.873
> 
> 标签：android, android-canvas, gradient, radial-gradients

我在画布上画了一些圆圈。我想对这个圆圈的每一个应用一个径向渐变。我目前正在为每个圆圈分配一个新的渐变，但我猜这不是一个好主意。

```
protected void onDraw(Canvas canvas) 
{
    int radius = 6;
    int cx = radius;
    int cy = radius ;

    for(int i = 0; i < nbPage; i++)
    {
        if(i % 12 ==  0 && i > 0) {
            cx = radius;
            cy += 20;
        }

        RadialGradient gradient = new RadialGradient(cx, cy, radius, 0xFFFFFFFF,
                0xFF000000, android.graphics.Shader.TileMode.CLAMP);
        p.setDither(true);
        p.setShader(gradient);

        canvas.drawCircle(cx, cy, radius, p);
        cx += 20; //16px + 4 de marge

    }
} 
```

知道每个圆具有相同的半径但不同的坐标，是否有预先分配径向梯度的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T16:46:33.560

获取 RadialGradient 对象并将其绘制到位图，然后继续将该位图绘制到每个圆圈的画布上。

```
Bitmap circleBitmap = Bitmap.create((int) (radius * 2.0f), (int) (radius * 2.0f),
    Bitmap.Config.ARGB_8888);
Canvas tempCanvas = new Canvas(circleBitmap);

RadialGradient gradient = new RadialGradient(cx, cy, radius, 0xFFFFFFFF,
            0xFF000000, android.graphics.Shader.TileMode.CLAMP);
p.setDither(true);
p.setShader(gradient);

tempCanvas.drawCircle(radius, radius, radius, p);

for (int i = 0; i < nbPage; i++)
    canvas.drawBitmap(circleBitmap, cx + (i * 20) - radius, cy - radius, p); 
```

# mysql - MySQL简单连接使用临时表

> ID：14872178
> 
> 赞同：0
> 
> 时间：2013-02-14T10:01:47.187
> 
> 标签：mysql, sql, query-optimization

我有（我认为）是对 MySQL 数据库的一个非常简单的查询，但使用`explain`表明该查询正在使用临时表。我试过改变选择和加入的顺序，但无济于事。我已将表格简化为最简单的表格（看看这是否是我的表格复杂性的问题，但我仍然有问题）。我已经用两个基本表进行了尝试，一个带有“名称”字段，另一个带有指向该表的外键引用：

```
a:
+-------+--------------+------+-----+---------+----------------+
| Field | Type         | Null | Key | Default | Extra          |
+-------+--------------+------+-----+---------+----------------+
| id    | int(11)      | NO   | PRI | NULL    | auto_increment |
| name  | varchar(128) | NO   | MUL | NULL    |                |
+-------+--------------+------+-----+---------+----------------+

b:
+-------+---------+------+-----+---------+----------------+
| Field | Type    | Null | Key | Default | Extra          |
+-------+---------+------+-----+---------+----------------+
| id    | int(11) | NO   | PRI | NULL    | auto_increment |
| a_id  | int(11) | NO   | MUL | NULL    |                |
+-------+---------+------+-----+---------+----------------+ 
```

这是我的查询：

```
SELECT a.id, a.name FROM a JOIN b ON a.id = b.a_id ORDER BY a.name; 
```

我认为这很简单......只是所有记录的列表，`a`其中有记录`b`，按名称排序。唉`explain`，这样说：

```
+----+-------------+-------+--------+---------------+---------+---------+--------+------+----------------------------------------------+
| id | select_type | table | type   | possible_keys | key     | key_len | ref    | rows | Extra                                        |
+----+-------------+-------+--------+---------------+---------+---------+--------+------+----------------------------------------------+
|  1 | SIMPLE      | b     | index  | a_id          | a_id    | 4       | NULL   |    2 | Using index; Using temporary; Using filesort |
|  1 | SIMPLE      | a     | eq_ref | PRIMARY       | PRIMARY | 4       | b.a_id |    1 |                                              |
+----+-------------+-------+--------+---------------+---------+---------+--------+------+----------------------------------------------+ 
```

看起来它应该使用`b`桌子上的钥匙，但由于某种原因它不是。我觉得我错过了一些基本的东西（或者我的 RDBMS 知识需要稍微提高一下）。任何人都知道为什么它使用临时表进行如此简单的查询？

# javascript - try-catch 块上的 mongoose.save() 抛出的错误对象是否存在冲突？

> ID：14872183
> 
> 赞同：0
> 
> 时间：2013-02-14T10:02:00.667
> 
> 标签：javascript, node.js, mongodb, mongoose

考虑以下代码：

```
mongoose.connect('MyDatabaseURL');
var sch_obj = {field1: String};
var db = mongoose.connection;
db.on('error', console.error.bind(console, 'connection error:'));
db.once('open', function() {
    var model_obj = db.model('SchemaName', sch_obj);
    var obj = new model_obj({field1:'MyValue'});
    obj.save(function(err,data){
      if(err) 
         console.log('error occurred:' + err);   // <=== Case 1
      else
         console.log('saved'); 
      });
});

/* ----------------------------------  */

mongoose.connect('MyDatabaseURL');
var sch_obj = {field1: String};
var db = mongoose.connection;
db.on('error', console.error.bind(console, 'connection error:'));
db.once('open', function() {
    var model_obj = db.model('SchemaName', sch_obj);
    var obj = new model_obj({field1:'MyValue'});
    obj.save(function(err,data){
      try {
          console.log('saved');
      }
      catch(err)                            // <=== Case 2
      {
        console.log('error occurred:' + err);
      }
    });
}); 
```

**问题**：它们是一样的吗？如果是，哪一种是处理错误的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:09:06.187

不，它们不一样。Mongoose newer 抛出错误，所以你会更新捕获一个。这就是为什么你不能使用`try ... catch ...`语句来处理猫鼬错误。

所以，唯一正确的方法是：

```
obj.save(function(err,data){
  if(err)
     console.log('error occurred:' + err);
  else
     // err == null
     console.log('saved'); 
  }); 
```

其背后的原因是`throw`终止当前进程，除非它被捕获。因此，大多数 nodejs 模块（例如`express`，`mongoose`等）使用回调而不是抛出它们来传递它们的错误，这是 nodejs 中的常见做法。

# netsuite - 如何使用 Web 服务在 Netsuite 中添加员工

> ID：14872189
> 
> 赞同：-1
> 
> 时间：2013-02-14T10:02:19.780
> 
> 标签：netsuite

我正在尝试在 .Net 中创建 netsuite 员工身份管理应用程序，我找到了他们的 CRM 示例应用程序，可以添加、更新、删除和搜索客户，我需要实现添加员工、删除员工、获取所有员工、使用更新员工等功能他们的网络服务。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:22:00.467

希望这些链接会有所帮助。

[http://tellsaqib.github.com/NSPHP-Doc/dc/d5c/class_employee.html](http://tellsaqib.github.com/NSPHP-Doc/dc/d5c/class_employee.html)

[http://tellsaqib.github.com/NSPHP-Doc/da/d81/class_add_request.html](http://tellsaqib.github.com/NSPHP-Doc/da/d81/class_add_request.html)

# java - 选项卡已折叠

> ID：14872190
> 
> 赞同：3
> 
> 时间：2013-02-14T10:02:21.620
> 
> 标签：java, swing, jtabbedpane

我正在创建一个 GUI，其中主窗口将包含许多选项卡。它们应水平相邻放置。

使用此代码会生成一个“折叠”版本，我可以在其中使用箭头切换选项卡。

```
 JTabbedPane tabs = new JTabbedPane();
    JPanel tab_virksomheder = new JPanel();
    tabs.addTab("Virksomheder", tab_virksomheder);

    JPanel tab_praktikpladser = new JPanel();
    tabs.addTab("Praktikpladser", tab_praktikpladser);

    panel.add(tabs); 
```

如何使标签彼此相邻？

![在此处输入图像描述](../Images/04b855529b1b70856a4f04beb5992776.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:04:27.863

`panel`容器应该有一个布局集，`BorderLayout`例如。

```
panel.setLayout(new BorderLayout()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:38:48.440

确切的结果取决于几件事：

*   平台的 TabbedPaneUI，`AquaTabbedPaneUI`在 Mac OS X 上。

*   提供给 的设置`setTabLayoutPolicy()`。

*   内容的首选大小，`pack()`在封闭的 . 上调用时使用`Window`。

您可以使用此[示例](https://stackoverflow.com/a/11949899/230513)来试验各种外观设置。请注意内容的首选大小如何定义每个选项卡的内容窗格的大小。

![图片](../Images/f689e0e8073fc99a1806ee2fe771f8fa.png)

# ruby-on-rails-3 - rake 多次重复相同的测试

> ID：14872193
> 
> 赞同：1
> 
> 时间：2013-02-14T10:02:34.243
> 
> 标签：ruby-on-rails-3, rake, ruby-1.9, minitest

我正在向我的 Rails 应用程序添加一个新的（普通旧的）ruby 类。我对该课程进行了最小的单元测试：

```
require 'minitest_helper'
class ReportOptionTest < MiniTest::Unit::TestCase
  def setup
    @report_option = Cmdx::ReportGenerator::ReportOption.new( "testing123" )
  end

  def test_depends_on
    assert @report_option.depends_on.empty?
  end
end 
```

如果我只通过 rake 运行这个测试，它会像我预期的那样运行，但它运行*了六次*，而我没有：

```
$ time rake test TEST=test/unit/report_generator/report_option_test.rb 
Rack::File headers parameter replaces cache_control after Rack 1.5.
Run options: --seed 64427

# Running tests:
.

Finished tests in 0.003272s, 305.6309 tests/s, 305.6309 assertions/s.

1 tests, 1 assertions, 0 failures, 0 errors, 0 skips
Rack::File headers parameter replaces cache_control after Rack 1.5.
Run options: --seed 17980

# Running tests:
.

Finished tests in 0.003284s, 304.4809 tests/s, 304.4809 assertions/s.

1 tests, 1 assertions, 0 failures, 0 errors, 0 skips
Rack::File headers parameter replaces cache_control after Rack 1.5.
Run options: --seed 45845

# Running tests:
.

Finished tests in 0.003267s, 306.0590 tests/s, 306.0590 assertions/s.

1 tests, 1 assertions, 0 failures, 0 errors, 0 skips
Rack::File headers parameter replaces cache_control after Rack 1.5.
Run options: --seed 49526

# Running tests:
.

Finished tests in 0.003258s, 306.9620 tests/s, 306.9620 assertions/s.

1 tests, 1 assertions, 0 failures, 0 errors, 0 skips
Rack::File headers parameter replaces cache_control after Rack 1.5.
Run options: --seed 53716

# Running tests:
.

Finished tests in 0.003246s, 308.1155 tests/s, 308.1155 assertions/s.

1 tests, 1 assertions, 0 failures, 0 errors, 0 skips
Rack::File headers parameter replaces cache_control after Rack 1.5.
Run options: --seed 44898

# Running tests:
.

Finished tests in 0.003272s, 305.6556 tests/s, 305.6556 assertions/s.

1 tests, 1 assertions, 0 failures, 0 errors, 0 skips

real   0m34.999s
user   0m32.034s
sys    0m1.440s 
```

我注意到[这个页面](http://flavio.castelli.name/2010/05/28/rails_execute_single_test/)提到了一个类似的问题。我不明白发生了什么，以及是否需要更改一些配置设置以仅运行一次测试，并且坦率地说，让运行测试更快地完成。

版本：

```
$ ruby -v
ruby 1.9.3p362 (2012-12-25 revision 38607) [x86_64-linux]
$ rake -V
rake, version 10.0.3
$ rails -v
Rails 3.2.12 
```

# java - Java中的倒置HashMap频率

> ID：14872195
> 
> 赞同：-2
> 
> 时间：2013-02-14T10:02:41.290
> 
> 标签：java

我有一个`HashMap<String, LinkedList<Integer>>`并且我想创建一个`hashMapInverted<LinkedList<Integer>, Set<String>>`在键中包含列表、第一个映射的值以及在第一个映射中具有相同列表的字符串集的值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:11:06.860

你可以做：

```
Map<LinkedList<Integer>, Set<String>> mapInverted = new HashMap<>(myMap.size());
for(Entry<<String, LinkedList<Integer>> entry : myMap.entrySet()) {
    String key = entry.getKey();
    LinkedList<Integer> list = entry.getValue();
    Set<String> strings = mapInverted.get(list);
    if(strings == null) { // the list has not already been put in the map
        strings = new HashSet<String>(); // create a new set
        mapInverted.put(list, strings); // put the list and the new set
    }
    strings.add(key);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:08:00.120

你可以试试 -

```
Map<String, LinkedList<Integer>> map =new HashMap<String, LinkedList<Integer>>();
Map<LinkedList<Integer>, Set<String>> invertMap = new HashMap<LinkedList<Integer>, Set<String>>();
for (Entry<String, LinkedList<Integer>> entry : map.entrySet()) {
    if(invertMap.containsKey(entry.getValue())){
        invertMap.get(entry.getValue()).add(entry.getKey());
    }else{
        Set<String> set = new HashSet<String>();
        set.add(entry.getKey());
        invertMap.put(entry.getValue(), set);
    }
} 
```

# ios - Sharekit 正在授权但未共享

> ID：14872197
> 
> 赞同：0
> 
> 时间：2013-02-14T10:02:48.433
> 
> 标签：ios, facebook, twitter, sharekit

我知道有很多关于这个问题的话题，但我就是不知道哪里出了问题。

我想为 Facebook 和 Twitter 实现 sharekit，所以我按照 github 上的安装说明进行操作：

Appid 已设置，我在 cfurlschemes 中输入了内容，等等。

我授权我的应用程序：

```
- (void)authorizeFacebook {
    [self.facebook authorize];
} 
```

（self.facebook 是共享控制器单例的强大成员）。

分享：

```
- (void)shareFacebook:(SHKItem*)toShare {
    [SHKFacebook shareItem:toShare];
} 
```

我也试过：

```
- (void)shareFacebook:(SHKItem*)toShare {
    [self.facebook setItem:toShare];
    [self.facebook share];
} 
```

为 twitter 制作了相同的结构。

我可以毫无问题地授权我的应用程序，所以我的配置应该没问题。当我在调用 shareFacebook 函数之前授权我的应用程序时，它已被授权，但共享没有任何反应。当我在调用 shareFacebook 之前不进行授权（因此 sharekit 检测到它未授权并首先打开授权）时，会触发“sharekitSendDidFinish”通知，但 Facebook 上没有任何内容。

Twitter 也是如此，授权​​有效，但没有出现任何推文。我要分享的 SHKItem 不是零，并且充满了我需要分享的正确内容。

*编辑我正在尝试与以下内容共享 SHKItem：标题文本图像

*   我还尝试发送仅包含文本的 SHKItem，但这也不起作用。
*   重新安装 ShareKit 什么也没做。
*   失败并没有被解雇
*   Senddidfinish 正在被解雇（但前提是您通过共享功能授权）并且没有“最后一个错误”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:17:23.547

解决了，我忘了设置共享类型......愚蠢的是它没有给出错误：S

# asp.net - ASP.NET MVC 4 中的自定义成员资格和角色提供程序

> ID：14872202
> 
> 赞同：18
> 
> 时间：2013-02-14T10:03:00.430
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我正在创建一个 ASP.NET MVC 4 Web 应用程序。我在谷歌上搜索了自定义会员资格，但找不到好的资源或视频讲座。

它们中的大多数要么是过时的要么是死链接。请您推荐一些有关如何开始编写会员和角色提供者的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-04T18:55:17.943

我也很难理解成员资格和角色，正如您所说，您在网络上找不到很多可靠和详细的内容。我尝试观看几个视频以了解该主题，但不清楚。但随后来自一个名为 Code Project 的网站的两篇文章来拯救。我正在分享这些链接，您可以在其中查看有关自定义会员资格的分步指南

[链接 1](https://www.codeproject.com/articles/1052354/using-user-name-instead-of-email-in-asp-net-identi)
链接 1 将帮助您用用户名替换电子邮件以进行登录身份验证，这是开发人员在微软提供的身份模块中需要的最常见的定制之一。

[链接2](https://www.codeproject.com/articles/1075134/asp-net-mvc-security-and-creating-user-role)

第二篇文章将帮助您了解向创建的用户添加和附加角色，以及如何将用户注册页面的访问权限限制为仅限管理员。这样在这两篇文章的帮助下，我希望您能够了解身份验证和授权的基础知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-08T15:42:39.810

我建议使用 ASP.Net Identity 而不是旧会员资格。ASP.Net Identity 比旧会员资格更好、更灵活，它还支持使用操作过滤器的基于角色的身份验证，您可以实现自己的自定义提供程序（例如角色和用户提供者）。

请参阅下面的链接

[https://weblog.west-wind.com/posts/2015/Apr/29/Adding-minimal-OWIN-Identity-Authentication-to-an-Existing-ASPNET-MVC-Application](https://weblog.west-wind.com/posts/2015/Apr/29/Adding-minimal-OWIN-Identity-Authentication-to-an-Existing-ASPNET-MVC-Application)

[http://www.c-sharpcorner.com/article/create-identity-in-simple-ways-using-asp-net-mvc-5/](http://www.c-sharpcorner.com/article/create-identity-in-simple-ways-using-asp-net-mvc-5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-25T08:09:34.570

```
http://logcorner.com/how-to-configure-custom-membership-and-role-provider-using-asp-net-mvc4/

**for creating a CustomerMemberShipClass** your class must implement System.Web.Security.MembershipProvider abstarct class. and you override the method ValidateUser()
in this ValidateUser() you have to write your own logic based on which you want authenticate user and return true or false according to it.

Sample ValidateUser method 
  public override bool ValidateUser(string username, string password)
        {
           int count=db.GetAll().Where(x => x.UserEmail == username && x.password == password).Count();
           if (count != 0)
               return true;
           else
               return false;
        }

later in web.config file you have add the fallowing under <sytem.web> element

<membership defaultProvider="MyMembershipProvider">
      <providers>
        <clear/>
        <add name="MyMembershipProvider" type="Write your class name that is implementing membershipproviderclas"/>
      </providers>
    </membership>

after doing this you can validate user using **MemberShip.Validate(Username,password)** which returns true or false based on ur code in ValidateUser() in CustomMemberShipProvider class and this will also set **[Authorize] attribute**

**for creating a CustomRoleProviderClass** your class must inherit System.Web.Secuirty.RoleProvider and override the appropriate method to get the roles for the user

SAmple method for getting roles for user

 public override string[] GetRolesForUser(string username)
        {
            string[] str={db.GetAll().Where(x=>x.UserEmail==username).FirstOrDefault().Role};
            return str;
        }

after this you must add the fallowing in web.config file in <system.web> element

<roleManager enabled="true" defaultProvider="MyRoleProvider">
      <providers>
        <clear/>
        <add name="MyRoleProvider" type="BLL.DoctorAppointmentRoleProvider"/>
      </providers>
    </roleManager>

 and after this u can check the role of the user using attribute **[Authorize(role="admin"])** and in Razor view you can check using User.IsinROle("A"). 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-19T14:47:45.737

**ASP.NET MVC 4 Internet 模板添加了一些新的、非常有用的功能，这些功能建立在SimpleMembership**之上。这些更改添加了一些很棒的功能，例如更简单且可扩展的会员 API 和对 OAuth 的支持。但是，新的帐户管理功能需要**SimpleMembership**，并且不适用于现有的 ASP.NET Membership Providers

在此处查看 ASP.NET Identity 的资源：

[http://www.asp.net/identity/overview/getting-started/aspnet-identity-recommended-resources](http://www.asp.net/identity/overview/getting-started/aspnet-identity-recommended-resources)

# r - gwidgets glabel 在 R 中使用什么标记？

> ID：14872203
> 
> 赞同：3
> 
> 时间：2013-02-14T10:03:01.557
> 
> 标签：r, user-interface, markdown, markup, gwidgets

在 gWidget 的 glabel 对象中，有一个选项可以在标签的文本中使用标记。我已将其激活为 true 并尝试使用一些标记约定，例如粗体、 、 ''' text ''' Markdown 约定等。但我尝试过的没有一个有效。谷歌搜索“gwidgets 中的哪些标记代码”对我也没有帮助。我想将我的一些标签文本格式化为粗体并集中其他部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T08:18:36.393

> 取决于，Pango 适合 RGtk2，Qt 中的基本 HTML，不适合 tcltk。

jverzani 一针见血，tcltk 什么都没有，这是我在 windows 上使用的工具包

# android - 如何在android中制作自定义视图并重复多次？

> ID：14872205
> 
> 赞同：1
> 
> 时间：2013-02-14T10:03:07.580
> 
> 标签：android, android-layout, android-view

我想做一个海关布局。

因为它在底部 包含一个**文本视图**和一个**共享按钮，如下所示**![在此处输入图像描述](../Images/7037e17a3ca44a9794c318dfb532cde6.png)

我想像这样多次重复这个视图

![在此处输入图像描述](../Images/a5dde74ac3c519e5b68fe3f6f1685597.png)

当新主菜添加到数据库时，它应该动态添加视图。那么谁能帮我解决这个问题

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:10:48.697

使用[网格视图](http://developer.android.com/reference/android/widget/GridView.html)。这将有助于解决您的要求。

# php - 用特定数据填充下拉菜单的innerhtml

> ID：14872206
> 
> 赞同：0
> 
> 时间：2013-02-14T10:03:07.173
> 
> 标签：php, javascript, mysql, ajax, xmlhttprequest

我有一个 xmlhttp/php 问题。我有一个下拉菜单，人们可以在其中选择自治市。然后我想将该自治市内的可能选项列表返回到二级下拉菜单。

人们首先选择一个自治市（下面的html代码）：

```
<select name="pszplaats" id="gemeente" onchange="fdisplay();loadXMLDoc(this.value)">
    <?php while($row=mysql_fetch_array($selectgem)){?>
    <option value="<?php echo $row['Gemeente']; ?>"><?php echo $row['Gemeente'];?>
    </option>
     <?php } ?>
    </select> 
```

loadXMLDoc 是应该将此答案发送到（php-）服务器并检索与该市镇中的名称匹配的名称列表的函数。到目前为止，我相关的 java/xml/ajax 代码是这样的：

```
function loadXMLDoc() {
      var xmlhttp;
      gem=document.getElementById("gemeente").value;
      if (window.XMLHttpRequest)
         {// code for IE7+, Firefox, Chrome, Opera, Safari
         xmlhttp=new XMLHttpRequest();
         }
      else
          {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }
          xmlhttp.onreadystatechange=function(){
                 if (xmlhttp.readyState==4 && xmlhttp.status==200)
                 {
                 document.getElementById("test").innerHTML=xmlhttp.responseText;
                 }
           }
      xmlhttp.open("POST","http://www.doenwatikkan.nl/jeroen/dynamic.php",true);
      xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
      xmlhttp.send();
      alert(gem)

           } 
```

Alert(gem) 显示选定的选项，所以我知道至少这是可行的。检索正确值的 php 是这样的：

```
$gem=$_POST["pszplaats"];
$gennam=mysql_query("SELECT * FROM psz WHERE Gemeente=$gem");
echo $gennam["$gem"]; 
```

现在问题在于二级下拉菜单的填充

```
<select name="psznaam" id="test" style="display:none">
<?php while($row=mysql_fetch_array($selectall)){?>
<option value="<?php echo $row['NaamPSZ']; ?>"><?php echo $row['NaamPSZ'];?>
</option>
<?php } ?>
</select> 
```

java函数完成后，下拉菜单完全为空。谁能告诉我如何才能在该菜单中实际获取相关数据？任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:49:22.710

您还没有发送`gem`网址。尝试`xmlhttp.open("POST","http://www.doenwatikkan.nl/jeroen/dynamic.php?gem="+gem,true);` 在您的`dynamic.php`页面中通过`$_POST["gem"]`

# android - Android - json解析

> ID：14872207
> 
> 赞同：0
> 
> 时间：2013-02-14T10:03:12.697
> 
> 标签：android, json

我有一个如下所示的 JSON：

```
{
        "places": [{
            "name": "Ankola",
            "slug": "ankola",
            "category": "beach",
            "distance": "521",
            "travel_time": "8 hrs, 2 mins",
            "days": "3",
            "latitude": "14.669456",
            "longitude": "74.300952",
            "weather": "Summer 21\u00b0-36\u00b0C, Winter 12\u00b0-35\u00b0C",
            "todo": "Baskal gudda, Nadibag, Shedikuli, Keni, Belekeri",
            "about": "Ankola is a small town surrounded by numerous temples. It is in line with Arabian sea. Ankola is famous for its native breed of mango called ishaad and for cashews harvesting.",
           "image": [
                     "Cm5NXlq.jpg",
                     "9OrlQ9C.jpg",
                     "DRWZakh.jpg",
                     "dFKVgXA.jpg",
                     "5WO2nDf.jpg"
                     ]

        }]
} 
```

我知道如何获取键值对，但我不知道如何解析 json 中的数组以形成字符串数组（图像 - 在我的情况下）

总而言之，我想要这样的东西：我在“图像”标签下有 5 个图像名称，我希望它们在一个字符串数组中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:05:29.593

采用 ：

```
JSONArray images = yourJSONObject.getJSONArray("image");
for(int i = 0; i < images.length(); i++){
   String image = images.getString(i);
} 
```

我记得这应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:08:28.820

干得好：

```
JSONArray ja = whatEverYourJsonObject.getJSONArray("image");

for(int i=0; i<ja.length(); j++){
    String name = ja.getString(i);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T10:11:18.583

您首先必须将 JSON 字符串转换为 Java 对象 ( `JSONObject`)。然后，您获得`JSONArray`并迭代它。

例子：

```
JSONObject jsonObj = null;
try {
    jsonObj = new JSONObject (jsonString);
    JSONArray images = itemObj.getJSONArray ("images");
    int length = images.length ();

    for (int i = 0; i < length; i++)
        Log.d ("Image Filename", images.getString (i));
} catch (JSONException e) {
    e.printStackTrace();
} 
```

编辑：现在我看到您的 JSON 无效 - 每个图像都有一个对象，并且该对象仅包含数据的值部分。有效图像数组的示例如下：

```
{
    "image": [
        "Cm5NXlq.jpg",
        "9OrlQ9C.jpg",
        "DRWZakh.jpg",
        "dFKVgXA.jpg",
        "5WO2nDf.jpg"
    ]
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T10:21:40.660

我会建议：

1.  创建您自己的类，该类描述由这些 json 对象定义的数据结构。作为最后的手段，您甚至可以基于 JSON 字符串生成 Java 类 - 查看 [jsongen](http://jsongen.byingtondesign.com/)
2.  当您拥有自己的 Java 类（比如说）时，您可以使用[GSON](https://sites.google.com/site/gson/Home)`MyClass`轻松地将 JSON 解析为生成的 Java 类，例如：

    `MyClass myClass = gson.fromJson(jsonString, MyClass.class);`

# php - 我的表格未能提交

> ID：14872208
> 
> 赞同：1
> 
> 时间：2013-02-14T10:03:14.197
> 
> 标签：php, wordpress

我有以下代码，它可以自行运行，但是当我在 wordpress 上尝试时，它显示登录信息，但是当我点击提交时，它没有提交表单，而是转到以下地址并显示一个白页。

```
 http://localhost:8080/wordpress/wp-admin/admin.php

    <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
              Username <input type="text" name="username"  />
              <br /> 
              Password <input type="password" name="password" />
              <br />
             <input type="submit" value="Login" />

    <?php 
        if(isset($_POST["username"])
        .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:57:00.953

您或许应该更详细地了解您想要实现的目标。

您不使用[wp_login_form()](http://codex.wordpress.org/Function_Reference/wp_login_form)的任何原因？

至于白屏，我也建议打开调试，在你的 wp-config.php 文件里面是`define('WP_DEBUG', false);`. 将其更改为 true。（我也只能假设登录显示白屏，因为缺少随机数字段，使用 wp_login_form() 会消失）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:21:45.807

在表单字段中添加名称属性

```
<form method="post" name="form_name" action="<?php echo $_SERVER['PHP_SELF']; ?>"> 
```

# sql - sql - 比较表

> ID：14872211
> 
> 赞同：0
> 
> 时间：2013-02-14T10:03:20.077
> 
> 标签：sql, oracle, compare

我如何比较两个表并根据结果做出反应。例如，我有 2 个表（确切结构）：tableA(key, text) 和 tableB(key, text) 和一个结果表（key, field, case）。

```
if key is in tableA, but not in tableB --> case: insert
if key is in tableB, but not in tableA --> case: delete
if key is in tableA and in tableB, but the text is different -> update
if key is in tableA and in tableB, and the text is the same -> nothing 
```

结果表如下所示：

```
key | text | case
------------------
1   |  t1  | update
2   |  t2  | delete
3   |  t3  | insert
4   |  t4  | nothing 
```

是否可以只用一个查询来完成？

获取插入（反之亦然删除）：

```
SELECT key FROM tableA
MINUS
SELECT key FROM tableB; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:10:27.340

我认为你需要这样的东西：

```
 select 'IN Table1, NOT Table2', Key_column
    from user_tab_columns
   where table_name = 'Table1'
  MINUS
  select 'IN Table1, NOT Table2', Key_column
    from user_tab_columns
   where table_name = 'Table2'
  )
  UNION ALL
  (
  select 'IN Table2, NOT Table1', Key_column
    from user_tab_columns
   where table_name = 'Table2'
  MINUS
  select 'IN Table2, NOT Table1', Key_column
    from user_tab_columns
   where table_name = 'Table1'
  ) 
```

您可以在链接中找到此概念的一些示例和变体：http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID: [1004115105172](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:1004115105172)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:17:43.950

这会有帮助吗？

```
SELECT NVL (a.key, b.key) AS "KEY",
       NVL (a.text, b.text) as "TEXT",
       CASE
          WHEN a.key IS NOT NULL AND b.key IS NULL THEN
             'Insert'
          WHEN a.key IS NULL AND b.key IS NOT NULL THEN
             'Delete'
          WHEN a.key IS NOT NULL AND b.key IS NOT NULL AND a.text != b.text THEN
             'Update'
          WHEN a.key IS NOT NULL AND b.key IS NOT NULL AND a.text = b.text THEN
             'Nothing'
       END
          "CASE"
  FROM tablea a FULL OUTER JOIN tableb b ON a.key = b.key; 
```

# mysql - Mysql - 具有自动增量的键的重复输入错误

> ID：14872215
> 
> 赞同：6
> 
> 时间：2013-02-14T10:03:34.337
> 
> 标签：mysql, sql, database

为什么我会收到表单错误：

`Error in query: Duplicate entry '10' for key 1`

...当执行如下 INSERT 语句时：

`INSERT INTO wp_abk_period (pricing_id, apartment_id) VALUES (13, 27)`

... 13 和 27 是现有行`pricing`和`apartment`行的有效 id-s，表定义为：

```
CREATE TABLE `wp_abk_period` (
  `id` int(11) NOT NULL auto_increment,
  `apartment_id` int(11) NOT NULL,
  `pricing_id` int(11) NOT NULL,
  `type` enum('available','booked','unavailable') collate utf8_unicode_ci default NULL,
  `starts` datetime default NULL,
  `ends` datetime default NULL,
  `recur_type` enum('daily','weekly','monthly','yearly') collate utf8_unicode_ci default NULL,
  `recur_every` char(3) collate utf8_unicode_ci default NULL,
  `timedate_significance` char(4) collate utf8_unicode_ci default NULL,
  `check_in_times` varchar(255) collate utf8_unicode_ci default NULL,
  `check_out_times` varchar(255) collate utf8_unicode_ci default NULL,
  PRIMARY KEY  (`id`),
  KEY `fk_period_apartment1_idx` (`apartment_id`),
  KEY `fk_period_pricing1_idx` (`pricing_id`),
  CONSTRAINT `fk_period_apartment1` FOREIGN KEY (`apartment_id`) REFERENCES `wp_abk_apartment` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_period_pricing1` FOREIGN KEY (`pricing_id`) REFERENCES `wp_abk_pricing` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

`key 1` `id`在这种情况下并没有足够`auto_increment`的能力来指定它吗？

注意：如果我只是为 提供了一个未使用的值`id`，就像`INSERT INTO wp_abk_period (id, pricing_id, apartment_id) VALUES (3333333, 13, 27)`它工作正常一样，但话又说回来，它被设置为`auto_increment`所以我不需要这样做！

* * *

注意 2：**好的，这是一个完整的“暮光区”时刻：**所以在运行上面带有大量 for 的查询后`id`，事情开始正常工作，不再是`duplicate entry errors`。**有人能解释一下我 WTF 是 MySQL 是为了产生这种奇怪的行为吗？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-14T10:21:26.043

可能是表的 AUTO_INCREMENT 值和`id`列中的实际值不正常。

这可能会有所帮助：

**第 1 步 - 从表中获取 Max id**

```
select max(id) from wp_abk_period 
```

**第 2 步 - 对齐表上的 AUTO_INCREMENT 计数器**

```
ALTER TABLE wp_abk_period AUTO_INCREMENT = <value from step 1 + 100>; 
```

**第 3 步 - 重试插入**

至于*为什么*AUTO_INCREMENT 不正常我不知道。数据在表中后添加 auto_increment？将数据插入表后更改了 auto_increment 值？

希望能帮助到你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-04T20:50:49.410

我有同样的问题，这是我的解决方案：

我的 ID 列有一个错误的参数。是 Tinyint，MySql 想写第 128 行。

有时，您认为更大的问题只是一个很小的参数...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-06T01:08:22.840

派对迟到了，但我今晚刚刚遇到这个 - 重复键'472817'并且提供的答案没有帮助。

我一时兴起跑了：

```
repair table wp_abk_period 
```

哪个输出

```
Number of rows changed from 472816 to 472817 
```

似乎mysql的行数错误，问题就消失了。

我的环境：

```
mysql  Ver 14.14 Distrib 5.1.73, for Win64 (unknown) 
```

创建表语法：

```
创建表`env_events`（
  `tableId` int(11) NOT NULL AUTO_INCREMENT,
  `deviceId` varchar(50) 默认为空，
  `timestamp` int(11) 默认为 NULL，
  `温度`浮动默认为空，
  `湿度`浮动默认为空，
  `压力`浮动默认为空，
  `motion` int(11) 默认为 NULL，
  主键（`tableId`）
) 引擎=MyISAM AUTO_INCREMENT=528521 默认字符集=latin1

```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-14T10:25:01.327

您可以使用以下命令检查 auto_increment 的当前值：

```
show table status 
```

然后检查 id 的最大值，看看它是否正确。如果不更改表的 auto_increment 值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-26T00:59:20.310

When debugging this problem check the table name [case sensitivity](http://dev.mysql.com/doc/refman/5.7/en/identifier-case-sensitivity.html) (especially if you run MySql not on Windows). E.g. if one script uses upper case to 'CREATE TABLE my_table' and another script tries to 'INSERT INTO MY_TABLE'. These 2 tables might have different contents and different file system locations which might lead to the described problem.

# android - 从本机代码调用 java 函数时出错

> ID：14872218
> 
> 赞同：0
> 
> 时间：2013-02-14T10:03:43.817
> 
> 标签：android, android-ndk, java-native-interface

我想从本机代码调用 java 方法。我遵循了中给出的步骤： [Calling a java method from c++ in Android](https://stackoverflow.com/questions/5198105/calling-a-java-method-from-c-in-android)

但是，我的应用程序在调用 java 函数的地方崩溃。

我的java代码如下所示：

```
package com.example.jnitry;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Log.d("MYAPP","Ocreate entered....");
        Button btn=(Button) findViewById(R.id.button1);
        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                mainfunc(8);
            }
        });
    }

    public void display(byte[] byt){
        Log.d("MYAPP", "display() is entered....");
        for(int i=0;i<byt.length;i++)
            Log.d("MYAPP", "byt["+i+"]="+byt[i]);
        Log.d("MYAPP", "display finished");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    public static native void mainfunc(int n);

    static
    {
        System.loadLibrary("mylib");
    }
} 
```

我的本机代码如下所示：

```
#include <jni.h>
#include "com_example_jnitry_MainActivity.h"
#include <android/log.h>
#include <stdio.h>

JNIEXPORT void JNICALL Java_com_example_jnitry_MainActivity_mainfunc
  (JNIEnv *env, jclass obj, jint n){

    __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","mainfunction entered...",NULL);
    int i;
    unsigned char arr[10];
    jbyteArray bArray=(*env)->NewByteArray(env,n);

    jclass cls = (*env)->FindClass(env, "com/example/jnitry/MainActivity");
        jmethodID mid = (*env)->GetMethodID(env, cls, "display", "([B)V");
        if (mid == 0){
            __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","mid==0",NULL);
            return;
        }
        if(bArray==NULL)
            {   __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","bArray==NULL...",NULL);
                return ;
            }
    for(i=0;i<n;i++){
        arr[i]=i;
        __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","Iteration number:%d",i);
    }

    (*env)->SetByteArrayRegion(env,bArray,0,n,arr);
    __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","bArray successfully created...",NULL);
    (*env)->CallVoidMethod(env, obj, mid, bArray);
    __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","Returned from disp() java function.....",NULL);

} 
```

打印日志消息后，我的应用程序崩溃：

```
02-14 15:37:06.814: D/MYAPP(11584): bArray successfully created... 
```

谁能告诉我原因。并为此提供解决方案。提前致谢。

**注意：**我已经尝试过**CallVoidMedthodA()**、**callByteMethod()**、**CallObjectMethod()**但它们的结果是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:20:48.280

您的本机方法`mainFunc`是静态方法 - 它没有有效的`this`指针。同时，`display`是一个实例方法——它需要一个。

根据JNI 规则，第二个参数`mainFunc`实际上是 的类对象指针。`MainActivity`在 Java 端声明`mainFunc`为非静态，这将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:40:42.687

我可以给你这个。有用。但它是 C++。（所以吃了标签——对不起。）

```
// it returns NULL in the case of an exception
// the returned memory is calloc()'d; it's the caller's responsibility to free() it.
char* changeEncoding(const char*source, int len, int direction)
{
    JNIEnv* env = threadUnsafeInfo.env;
    jobject obj = threadUnsafeInfo.obj;

    if (!source) {
    JNU_ThrowByName(env, "java/lang/NullPointerException", 0);
    return NULL;
    }
    jbyteArray srcArray = env->NewByteArray(len);

    jclass cls = env->FindClass("com/xxx/Yyy");
    jmethodID mid = env->GetMethodID(cls, "convert", "([BI)[B");

    if (mid != NULL && srcArray != NULL) {
    env->SetByteArrayRegion(srcArray, 0, len, (jbyte*)source);
    env->ExceptionClear();

    jbyteArray resArray = (jbyteArray)env->CallObjectMethod(obj, mid, srcArray, direction);
    if(env->ExceptionOccurred()) {
        DLOG("exception in convert ([BI)[B");
        env->ExceptionDescribe();
        //env->ExceptionClear(); // ??
        return NULL;
    }

    int resultLen = env->GetArrayLength(resArray);
    char* result = (char*)calloc(2 + resultLen,1); // why 2: a bit of healthy paranoia ain't gonna hurt anyone
    if (result == 0) {
        JNU_ThrowByName(env, "java/lang/OutOfMemoryError", 0);
        return NULL;
    }
    env->GetByteArrayRegion(resArray, 0, resultLen, (jbyte *)result);
    env->DeleteLocalRef(cls);
    env->DeleteLocalRef(resArray);
    env->DeleteLocalRef(srcArray);
    return result;
    } else {
    JNU_ThrowByName(env, "java/lang/NullPointerException", 0);
    myassert(("method id = 0",0));
    }
    return NULL;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:17:28.953

AFAIK CallVoidMethod 不采用 env 参数。至少在 C++ 中。

# css - 在 IE7 中使用 css 隐藏锚点和跨度

> ID：14872220
> 
> 赞同：0
> 
> 时间：2013-02-14T10:03:44.647
> 
> 标签：css

为简单起见，我在文档中创建了我的样式以突出我的问题。我有一排 4 个链接，它们的样式看起来像按钮。我使用 css 隐藏的下一个链接（第 3 项）。在 IE8+、Chrome、Firefox 中它可以完美运行，但在 IE7 中，取消和接受按钮（下一步按钮所在的位置）之间存在间隙。

```
<!DOCTYPE html>
<html>
    <head>
        <title>Test Page</title>
        <style type="text/css">
            .ButtonBar
            {
                margin-top: 20px;
                text-align: center;
            }
            .LinkButton
            {
                background-color: #01699b;
                border: 0px solid;
                border-radius: 14px;
                color: #fff;
                cursor: pointer;
                font-weight: bold;
                height: 28px;
                padding: 0px 11px 0px 11px;
                overflow: hidden;
                position: relative;
                text-decoration: none;
                display: inline-block;
                line-height: 28px;
            }
            .NextButton
            {
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="ButtonBar">
            <a class="PreviousButton"><span class="LinkButton">Previous</span></a>
            <a class="CancelButton"><span class="LinkButton">Cancel</span></a>
            <a class="NextButton"><span class="LinkButton">Next</span></a>
            <a class="AcceptButton"><span class="LinkButton">Accept</span></a>
        </div>
    </body>
</html> 
```

如果您从 .LinkBut​​ton 类中删除除背景颜色之外的所有 CSS，它的作用相同，我只是将其全部包含在内以显示我到目前为止所做的事情。

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:40:11.713

你有没有想过这些空间实际上来自哪里？

这是您的内联元素之间的换行符`<a>`导致了间隙。

```
 <div class="ButtonBar">
        <a class="PreviousButton">...</a> <!-- Linebreak! -->
        <a class="CancelButton">...</a>   <!-- Linebreak! -->
        <a class="NextButton">...</a>     <!-- Linebreak! -->
        <a class="AcceptButton">...</a>   <!-- Linebreak! -->
    </div> 
```

现在现代浏览器折叠了其中的多个，但 IE7 没有，所以你的元素之间实际上有 2 个换行符，导致间隙加倍。

你有几个解决方案：

1）浮动元素

2）修改标记：

```
 <!-- end tag on the new line -->
     <a>...
     </a><a>...
     </a>...

     <!-- comments in between -->
     <a>...</a><!--
  --><a>...</a>

     <!-- all on one line -->
     <a>...</a><a>...</a>

     <!-- In some cases (e.g. list elements) you can skip the end tag --> 
```

3) 修改字体大小

4) 使用负边距——但这可能会导致旧浏览器出现问题。

您想采取什么解决方案取决于您。

**对于您的特殊情况，您只需隐藏有问题的元素，您可以在该元素上声明 absolute`position`或 any `float`。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:42:11.553

一种解决方案是将 float:left 仅添加到 .NextButton css 类。这应该有效。

# python - 如何用 PyQt 实现 QLCDNumbers？

> ID：14872223
> 
> 赞同：1
> 
> 时间：2013-02-14T10:03:50.787
> 
> 标签：python, pyqt

通过为我的 python 脚本设计一个 GUI，它与 PySerial 一起用于实现一些串行接口功能，我希望显示一些读取源的参数。因此，此 GUI 例如必须显示由参数 volt_act 表示的实际电压。我认为我可以使用以下代码连接 QLCDNumber lcdVoltage：

```
self.connect(self, QtCore.SIGNAL("selfVoltage"), self.lcdVoltage, QtCore.SLOT("display(int)")) 
```

在我想读取电压时，我发出参数：

```
self.emit(QtCore.SIGNAL("selfVoltage"), volt_act) 
```

但这不起作用。如何正确实现 QLCDNumber，其中在发出参数时会实时更新它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:18:38.477

来自[文档](http://pyqt.sourceforge.net/Docs/PyQt4/old_style_signals_slots.html#short-circuit-signals)：

> 短路信号没有参数列表或周围的括号。
> 
> 短路信号只能连接到已在 Python 中实现的插槽。它们不能连接到 Qt 插槽或包装 Qt 插槽的 Python 可调用对象。

如果您打算使用 Qt 插槽，则需要显式声明变量类型：

```
self.connect(self, QtCore.SIGNAL("selfVoltage(int)"), self.lcdVoltage, QtCore.SLOT("display(int)")) 
```

和

```
self.emit(QtCore.SIGNAL("selfVoltage(int)"), volt_act) 
```

但是，我真的建议你使用[新风格的信号](http://pyqt.sourceforge.net/Docs/PyQt4/new_style_signals_slots.html)。

首先，您将信号定义为类变量：

```
voltage = QtCore.pyqtSignal(int) 
```

然后连接它：

```
self.voltage.connect(self.lcdVoltage.display) 
```

最后，你会发出：

```
self.voltage.emit(volt_act) 
```

# php - 将两个输入绑定在一起（文本和隐藏）？

> ID：14872227
> 
> 赞同：1
> 
> 时间：2013-02-14T10:04:06.630
> 
> 标签：php, html

我在下面有一个循环，它显示了一个数量框，并包含一个包含产品名称的隐藏字段。

我希望将这些绑定在一起，因此如果用户在 100 个输入中更改了输入 90 的数量，那么并希望将隐藏字段输入 90 绑定到它。

然后，这给了我大于零的项目的数量和产品名称。

```
<?php if(get_field('sizes')) {
while(the_repeater_field('sizes')) { ?>
   <input type="text" name="quantity[]" value="0"> <?php the_title(); ?>
   <input type="hidden" name="product[]" value="<?php the_title(); ?>">
<?php } } ?> 
```

我想将这两者联系在一起，这样它就会回显以下内容：

*   1 x 产品一
*   10 x 产品三
*   20 x 产品八

仅当数量大于零时，如何输出数量和产品名称？

* * *

这是使用的实际代码：

```
 <?php if(get_field('sizes')) { ?>
    <?php while(the_repeater_field('sizes')) { ?>
        <tr>    
            <td width="150"><p><?php echo the_sub_field('size'); ?></p></td> 
            <td width="30" align="right">
                <p>
                    <input type="text" class="quantity" name="quantity[]" style="width:15px;text-align:center!IMPORTANT;margin-left:10px;" value="0">
                    <input type="hidden" class="productinput" name="product[]" value="<?php echo the_title(); ?> - <?php echo the_sub_field('size'); ?>"></td>
                </p>
            </td>
        </tr>
    <?php } ?>
    <?php } else { ?>
        <tr>            
            <td width="150"><p>Quantity</p></td>
            <td width="30" align="right">
                <p>                
                    <input type="text" class="quantity" name="quantity[]" style="width:15px;text-align:center!IMPORTANT;margin-left:10px;" value="0"><?php echo the_sub_field('size'); ?>
                    <input type="hidden" class="productinput" name="product[]" value="<?php echo the_title(); ?>">
                </p>
            </td>
        </tr> 
    <?php } ?> 
```

然后创建准备在电子邮件中输出的代码：

```
$quantities = array_combine($_POST['product'], $_POST['quantity']);
foreach ($quantities as $product => $quantity) {
    if ($quantity > 0) {
        $productresults = "$quantity x $product";
    }
} 
```

* * *

[这](http://www.teamworksdesign.com/clients/rogue/system/dc-stimulator/)是我正在处理的页面。如果点击“获取报价”，第二步就是上面的代码。

* * *

@Sn0opy

```
foreach($_POST['quantity'] as $check) {
    if($check > 0) {
        $quantityresults .= $check."\n";
    }
}

echo $quantityresults; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:09:48.887

您显然需要串联迭代这两个数组，以便您可以查看产品的数量是否非零，从而决定是否应该显示它。

一般来说`foreach`，这项工作是一个笨拙的工具，要走的路是`for`循环并使用相同的计数器对两个数组进行索引。但是，在这种特定情况下，您可以轻松地将两个数组转换为一个，其中键是产品名称，数量是使用的值[`array_combine`](http://php.net/manual/en/function.array-combine.php)：

```
$quantities = array_combine($_POST['product'], $_POST['quantity']); 
```

然后，您可以轻松地迭代`foreach`：

```
foreach ($quantities as $product => $quantity) {
    if ($quantity > 0) {
        echo "$quantity x $product<br>";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T10:10:37.777

我建议在数量数组中使用产品 ID，如下所示：

```
<input type="text" name="quantity[<?php the_title(); ?>][]" value="0"> 
```

Ofc，这不是您要寻找的答案，而是应该也可以使用的替代版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T03:22:08.480

Rob，我看到你有一个很好的答案，但你可能想知道一个重要的问题。

通过发布独立的`quantities[]`and `products[]`，那么您将依赖于两个序列化彼此一致 - 即。两者都按 DOM 顺序序列化 - 因此索引`$_POST['quantity']`和`$_POST['product']`对应的元素逐个元素。对我来说，这不是一个完全安全的假设 - 请参阅[此处](https://stackoverflow.com/questions/4400698/is-the-order-of-inputs-in-a-post-guaranteed-for-array-inputs-in-php)选择的答案。

`<input>`如果每个产品有一个字段，用一个产品 ID 的表示和一个表示数量的值来命名，这会更安全，也更传统。因此，产品 ID 和它们的值保证是一致的。

需要相应地审查客户端和服务器端代码。

# php - 一次用于多个 ID 的 Facebook 供稿/消息

> ID：14872233
> 
> 赞同：-2
> 
> 时间：2013-02-14T10:04:27.033
> 
> 标签：php, jquery, facebook

是否有任何选项可用于在 FB 中使用多用户消息发送或馈送墙帖子？尝试使用“to”字段的数组，逗号分隔的 id，......它只需要第一个 id。

==================================================== =====================

FB.init({appId: "APP_ID", status: true, cookie: true});

var obj = { 方法：'发送'，redirect_uri：'site_url'，链接：' [https://developers.facebook.com/docs/reference/dialogs/](https://developers.facebook.com/docs/reference/dialogs/) '，图片：' [http://fbrell.com/f8。 jpg](http://fbrell.com/f8.jpg) ', to:[fbid1,fbid2], name: '测试名称', caption: '测试标题', description: '测试与用户交互。};

FB.ui(obj,callback);

==================================================== =====================

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:42:58.727

```
$.each(yourFBIdsArray, function(index, fbid){
   FB.api('/'+fbid+'/photos', 'post', {
            message: messageToSend,
            url: ABSOLUTE_IMAGE_URL,      
        }, function(responseOne){
            if (!responseOne || responseOne.error) {
              //ERROR
            } else {
              //SUCCESS
            }
        });
}); 
```

你可以这样做。它会很慢，但工作。该示例在通过 facebook id 的人的墙上发布了一张照片。您还需要在登录应用程序时询问权限 {scope:'publish_stream'}。

# methods - 同步运行方法 vbscript

> ID：14872239
> 
> 赞同：0
> 
> 时间：2013-02-14T10:04:46.440
> 
> 标签：methods, vbscript, synchronize

我有个问题。我需要在我的循环的每个循环中在 vbscript 中抛出一些同步命令（一个运行方法，删除一个和 moveFile 一个）。我不知道我是怎么做到的。

我的代码是：

```
Public Function UnificarCRIs(ByVal path, ByVal FICRIEC, ByVal sessio, ByVal CIBAA)
    Dim objFile, objCurrentFolder, filesys, origenFitxers
    Dim FileName, WshShell

    On error resume next

    Set filesys = CreateObject("Scripting.FileSystemObject")
    Set WshShell = WScript.CreateObject("WScript.Shell")
    Set objCurrentFolder = filesys.getFolder(path)

    For Each objFile In objCurrentFolder.Files
        FileName = objFile
        If (right(FileName, 4) = ".cri") Then
            If filesys.FileExists(path & FICRIEC & sessio) Then
                 'WshShell.Run ("copy " & path & FICRIEC & sessio & "+" & FileName & " " & path & FICRIEC & sessio & "_tmp")
                 WshShell.run ("cmd /K " & "copy /Y " & path & FICRIEC & sessio & "+" & FileName & " " & path & FICRIEC & sessio & "_tmp",8,TRUE)
                 Set WshShell = Nothing
                 filesys.DeleteFile path & FICRIEC & sessio
                'filesys.MoveFile path & FICRIEC & sessio & "_tmp", path & FICRIEC & sessio
            Else
                WshShell.run "cmd /K " & "copy /Y " & FileName & " " & path & FICRIEC & sessio,8,TRUE
                Set WshShell = Nothing
            End If     
        End If 
    Next

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:31:04.243

**完整**阅读[.Run 的文档](http://msdn.microsoft.com/en-us/library/d5fk67ky%28v=vs.84%29.aspx) 并反思参数。**`bWaitOnReturn`**

 ****道歉：**

抱歉，我没有仔细阅读您的代码。.Run 应该等待。但是我看到您在中使用了全局`On Error Resume Next`和参数列表（）

```
WshShell.run ("cmd /K " & "copy /Y " & path & FICRIEC & sessio & "+" & FileName & " " & path & FICRIEC & sessio & "_tmp",8,TRUE) 
```

当你消除这些错误时会发生什么？你确定你`WshShell`在第二次循环中可以使用吗？**

# c++ - constexpr 变量的唯一地址

> ID：14872240
> 
> 赞同：14
> 
> 时间：2013-02-14T10:04:55.567
> 
> 标签：c++, c++11, extern, memory-address, constexpr

是否可以为 constexpr 变量分配一个唯一地址，即变量可用的所有翻译单元都相同（通常通过标题）？考虑以下示例：

```
// foo.hh
#include <iostream>
constexpr int foo = 42;

// a.cc
#include "foo.hh"
void a(void) { std::cout << "a: " << &foo << std::endl; }

// b.cc
#include "foo.hh"
extern void a(void);
int main(int argc, char** argv) {
  a();
  std::cout << "b: " << &foo << std::endl;
} 
```

分别编译`a.cc`并`b.cc`使用 gcc 4.7 将它们链接在一起，我看到打印了两个不同的地址。`extern`如果我在标题中添加关键字，我会收到一个链接器错误`duplicate symbol _foo in: a.o and b.o`，我觉得这有点令人惊讶，因为我认为添加`extern`更有可能导致编译器从另一个对象导入该符号，而不是从当前对象导出它。但似乎我对事情如何运作的理解在这里是错误的。

**是否有一种合理的方法可以在一个标头中声明一个 constexpr，以便所有翻译单元都可以在其常量表达式中使用它，并且所有翻译单元都同意该符号的地址？**我希望有一些额外的代码来表示这个符号实际属于的单个翻译单元，就像 with`extern`和 non- `extern`variables without一样`constexpr`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-12-08T00:15:35.763

如果需要获取 constexpr 变量的地址，则声明为静态成员变量。它可以通过这种方式用作常量表达式（与使用返回 const 的函数相反）。

富.h：

```
#ifndef FOO_H
#define FOO_H

struct Foo {
  static constexpr int foo { 42 }; // declaration
};

#endif // FOO_H 
```

foo.cpp：

```
#include "foo.hpp"

constexpr int Foo::foo; // definition 
```

bar.cpp：

```
#include "foo.hpp"

const int* foo_addr() {
  return &Foo::foo;
}

int foo_val() {
  return Foo::foo;
} 
```

主.cpp：

```
#include <iostream>
#include "foo.hpp"

extern const int* foo_addr();
extern int foo_val();

constexpr int arr[Foo::foo] {}; // foo used as constant expression

int main() {
  std::cout << foo_addr() << " = " << foo_val() << std::endl;
  std::cout << &Foo::foo << " = " << Foo::foo << std::endl;
} 
```

输出：

```
$ g++ -std=c++11 foo.cpp bar.cpp main.cpp -o test && ./test
0x400a44 = 42
0x400a44 = 42 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-12-22T19:28:38.280

**C++17`inline`变量**

这个很棒的 C++17 特性使我们能够：

*   方便地为每个常量只使用一个内存地址
*   将其存储为`constexpr`：[如何声明 constexpr extern？](https://stackoverflow.com/questions/30208685/how-to-declare-constexpr-extern)
*   从一个标题在一行中执行

主文件

```
#include <cassert>

#include "notmain.hpp"

int main() {
    // Both files see the same memory address.
    assert(&notmain_i == notmain_func());
    assert(notmain_i == 42);
} 
```

不是main.hpp

```
#ifndef NOTMAIN_HPP
#define NOTMAIN_HPP

inline constexpr int notmain_i = 42;

const int* notmain_func();

#endif 
```

非main.cpp

```
#include "notmain.hpp"

const int* notmain_func() {
    return &notmain_i;
} 
```

编译并运行：

编译并运行：

```
g++ -c -o notmain.o -std=c++17 -Wall -Wextra -pedantic notmain.cpp
g++ -c -o main.o -std=c++17 -Wall -Wextra -pedantic main.cpp
g++ -o main -std=c++17 -Wall -Wextra -pedantic main.o notmain.o
./main 
```

[GitHub 上游](https://github.com/cirosantilli/cpp-cheat/tree/085c4b22b1b290a6d033a44958d05054e7e303c7/cpp/inline_variable). 另请参阅：[内联变量如何工作？](https://stackoverflow.com/questions/38043442/how-do-inline-variables-work)

**内联变量的 C++ 标准**

C++ 标准保证地址是相同的。[C++17 N4659 标准草案](https://github.com/cplusplus/draft/blob/master/papers/n4659.pdf) 10.1.6“内联说明符”：

> 6 具有外部链接的内联函数或变量在所有翻译单元中应具有相同的地址。

cppreference [https://en.cppreference.com/w/cpp/language/inline](https://en.cppreference.com/w/cpp/language/inline)解释说如果`static`没有给出，那么它有外部链接。

**内联变量实现**

我们可以观察它是如何实现的：

```
nm main.o notmain.o 
```

其中包含：

```
main.o:
                 U _GLOBAL_OFFSET_TABLE_
                 U _Z12notmain_funcv
0000000000000028 r _ZZ4mainE19__PRETTY_FUNCTION__
                 U __assert_fail
0000000000000000 T main
0000000000000000 u notmain_i

notmain.o:
0000000000000000 T _Z12notmain_funcv
0000000000000000 u notmain_i 
```

并`man nm`说`u`：

> "u" 该符号是唯一的全局符号。这是标准 ELF 符号绑定集的 GNU 扩展。对于这样的符号，动态链接器将确保在整个过程中只有一个具有此名称和类型的符号在使用中。

所以我们看到有一个专门的 ELF 扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-05T01:43:44.537

我认为 constexpr 更适用于返回值恒定的函数。您可以将常量变量绑定到 constexpr 函数的返回值，并将其暴露在外部。例如：

```
// constexpr.h
#ifndef __CONSTEXPR_H
#define __CONSTEXPR_H

extern const int foo;

#endif // __CONSTEXPR_H

// constexpr.cpp
#include "constexpr.h"

constexpr int foo_expr()
{
    return 42;
}

const int foo = foo_expr();

// unit1.cpp
#include <iostream>
#include "constexpr.h"

void unit1_print_foo()
{
    std::cout << &foo << " = " << foo << std::endl;
}

// unit2.cpp
#include <iostream>
#include "constexpr.h"

void unit2_print_foo()
{
    std::cout << &foo << " = " << foo << std::endl;
}

// main.cpp
extern void unit1_print_foo();
extern void unit2_print_foo();

int main(int, char**)
{
    unit1_print_foo();
    unit2_print_foo();
} 
```

我的结果是：

```
$ g++-4.7 -std=c++11 constexpr.cpp unit1.cpp unit2.cpp main.cpp -o test && ./test
0x400ae4 = 42
0x400ae4 = 42 
```

但是，通常使`foo_expr`函数本身在外部可见就足够了，调用者将使用它`foo_expr()`来获取值，而不是将其视为变量。

# php - php循环和数组

> ID：14872241
> 
> 赞同：0
> 
> 时间：2013-02-14T10:04:56.827
> 
> 标签：php, arrays, wordpress

我目前正在研究一个 PHP 类，它允许人们在 CMS 中创建新的内容块，我想要做的是让用户能够向类发送输入名称、值和以及更多选项（认为已选择，以及复选框和单选按钮的选项）

我的第一个问题是我无法将这些数据发送到我的班级，目前我正在这样做，

```
homepageSlider->add_meta_box(
    'Book Info',
    array(
        'Year' => array(
            'type' => 'checkbox',
            array(
                'options' => 'Year 1',
                'Year 2',
                'Year 3'
            )
        ),
        'Genre' => 'text'
    )
); 
```

在上面你可以看到我正在创建一个名为 book info 的内容块，该内容类型有 2 个表单字段，Year（有 3 个复选框）和 Genre，它将是一个文本字段。

我的问题是这种方法似乎不起作用。我不知道如何循环遍历上述数组的每个部分以吐出我需要的所有信息？任何人都可以对此有所了解吗？

我是否正确地形成了多维数组？这是我认为需要的，还是我的班级有问题？

```
function() use( $box_id, $box_title, $post_type_name, $box_context, $box_priority, $fields )
{
    add_meta_box(
        $box_id,
        $box_title,
        function( $post, $data )
        {
            global $post;

            // Nonce field for some validation
            wp_nonce_field( plugin_basename( __FILE__ ), 'custom_post_type' );

            // Get all inputs from $data
            $custom_fields = $data['args'][0];

            // Get the saved values
            $meta = get_post_custom( $post->ID );

            //die(print_r($custom_fields));
            // Check the array and loop through it
            if( ! empty( $custom_fields ) )
            {

                /* Loop through $custom_fields */
                foreach( $custom_fields as $label => $type )
                {
                    $field_id_name  = strtolower( str_replace( ' ', '_', $data['id'] ) ) . '_' . strtolower( str_replace( ' ', '_', $label ) );
                    echo '<label for="' . $field_id_name . '">' . $label . '</label>';
                    //self::getFormField($type, $field_id_name);
                    //<input type="'. self:getFormField($type) . '" name="custom_meta[' . $field_id_name . ']" id="' . $field_id_name . '" value="' . $meta[$field_id_name][0] . '" />';
                }
            }

        },
        $post_type_name,
        $box_context,
        $box_priority,
        array( $fields )
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:12:25.740

我认为你正在形成错误的数组。

```
homepageSlider->add_meta_box(   
    'Book Info',
    array(  
        'Year' => array('type' => 'checkbox' , 'options' => array('Year 1', 'Year 2', 'Year 3')),  
        'Genre' => array('type' => 'text'),
    )  
); 
```

但它看起来很乱。我相信用这样的数组来做这不是一种直观的方式。您是否考虑过将其抽象为类？我认为这样的事情会更干净：

```
class metaBox {
     private $inputFields = array();
     public function addField($inputFieldObject) {
       $this->inputFields[] = $inputFieldObject;
     }
}

class inputField {
     public $type = "";  // which tags
     public $attributes; // which attributes
} 
```

# android - 计算文本到语音的总持续时间，如 MediaPlayer

> ID：14872243
> 
> 赞同：4
> 
> 时间：2013-02-14T10:05:05.470
> 
> 标签：android, text-to-speech

我想显示一个带有文本到语音的进度条，我如何计算总时间例如我们可以像这样计算 android 中 mediaPlayer 的持续时间`mp.getDuration()`

# python - Django中原始MySQL查询中的语法错误

> ID：14872256
> 
> 赞同：0
> 
> 时间：2013-02-14T10:05:54.207
> 
> 标签：python, mysql, django

我在 django 中使用带有限制的原始 mysql 查询（限制是动态的，在 Url 中提到），例如。

```
cursor.execute("some select query limit %s " , [limit_value] ) 
```

这个限制值来自 URL `www.asd.com/qwe/?limit=5` ，我捕获这个值 `limit_value=request.GET.get('limit')` ，当我打印这个限制值时，它将打印 5 意味着我可以从 URL 获取限制值，但是当我在选择查询中提到它时，如上所示。它会抛出错误

> （1064，“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''5'' 附近使用正确的语法”）

但是，如果我在文件中提到限制值`limit_value=5`并在选择查询中使用它，就像我在上面显示的那样，它将起作用。

所以这意味着如果我在 URL 中提到它并将其捕获到文件中，则选择查询中的限制将不起作用。为什么？还是我缺少什么？

我的查询：

```
SELECT DISTINCT 
    A.entity_id AS entity_id, 
    A.email AS email,
    A.catquizid AS style_quiz_score,
    A.catquizquesans AS style_quiz_answer,
    A.created_at AS date_joined,
    A.is_active AS is_active,
    B.attribute_id AS attribute_id,
    B.value AS info
FROM customer_entity AS A
inner join  customer_entity_varchar AS B on A.entity_id=B.entity_id 
WHERE B.attribute_id
limit %s 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:14:19.170

你`limit_value`是一个字符串，而不是一个整数，因此作为一个 SQL 参数，它被赋予了引号。

试试这个：

```
cursor.execute("some select query limit %s", (int(limit_value),)) 
```

# android - android UUID和phonegap设备UUID的区别

> ID：14872257
> 
> 赞同：2
> 
> 时间：2013-02-14T10:06:02.350
> 
> 标签：android, cordova, device, uuid

谁能告诉我android唯一ID即UUID和phonegap设备ID UUID之间的区别？它们是相同的还是不同的值？如果这些值不同，那么两者中是否存在相同的唯一属性值。？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T19:11:43.143

**更新**

以上两个参数取值不同，请勿相互匹配。

**安卓UUID：**

```
TelephonyManager  manager=(TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
String uuid=manager.getDeviceId(); 
```

**android phonegap UUID**

-- 返回一个随机的 64 位整数（再次作为字符串！）

--整数在设备第一次启动时生成

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {

   try {
      var uuid = device.uuid; * * //always use device object after deviceready.**

   } catch (e) {

      alert(e);

   }
} 
```

**从我的 android(2.3) 手机获得的值是：**

**安卓 UUID：** 354457052232596（16 个数字）

**android phonegap UUID**：70a0353498a27a34（16 位十六进制数）

更多关于设备 UUID 检查：

[http://docs.phonegap.com/en/1.0.0/phonegap_device_device.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_device_device.md.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-26T13:09:43.590

获取设备的通用唯一标识符 (UUID)。

```
var string = device.uuid; 
```

描述：如何生成 UUID 的详细信息由设备制造商确定，并且特定于设备的平台或型号。

支持的平台：

*   安卓
*   BlackBerry WebWorks（OS 5.0 及更高版本）
*   苹果手机
*   Windows Phone 7 和 8
*   巴达 1.2 & 2.x
*   网络操作系统
*   蒂岑
*   视窗 8

快速示例

```
// Android: Returns a random 64-bit integer (as a string, again!)
//          The integer is generated on the device's first boot
//
// BlackBerry: Returns the PIN number of the device
//             This is a nine-digit unique integer (as a string, though!)
//
// iPhone: (Paraphrased from the UIDevice Class documentation)
//         Returns a string of hash values created from multiple hardware identifies.
//         It is guaranteed to be unique for every device and cannot be tied
//         to the user account.
// Windows Phone 7 : Returns a hash of device+current user, 
// if the user is not defined, a guid is generated and will persist until the app is uninstalled
// 
// webOS: returns the device NDUID
//
// Tizen: returns the device IMEI (International Mobile Equipment Identity or IMEI is a number
// unique to every GSM and UMTS mobile phone.
var deviceID = device.uuid; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-15T06:58:59.233

我有同样的问题。这是明确的解决方案。

```
HTML Code:

<!DOCTYPE html>
<html>
  <head>
    <title>Device Properties Example</title>

    <script type="text/javascript" charset="utf-8" src="phonegap-1.0.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>

    <script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is ready
    //
    function onDeviceReady() {
      alert("checking...");
        var element = document.getElementById('deviceProperties');

        element.innerHTML = 'Device Name: '     + device.name     + '<br />' + 
                            'Device PhoneGap: ' + device.phonegap + '<br />' + 
                            'Device Platform: ' + device.platform + '<br />' + 
                            'Device UUID: '     + device.uuid     + '<br />' + 
                            'Device Version: '  + device.version  + '<br />';
    }

    </script>
  </head>
  <body>
    <p id="deviceProperties">Loading device properties...</p>
  </body>
</html>

config.xml look like
<?xml version="1.0" encoding="UTF-8" ?>
    <widget xmlns = "http://www.w3.org/ns/widgets"

        xmlns:gap   = "http://phonegap.com/ns/1.0"
        id          = "com.phonegap.example"
        version     = "1.0.0"
        versionCode = "10" >

        <!-- versionCode is optional and Android only -->

        <preference name="phonegap-version" value="3.5.0" />

        <name>kali</name>

        <description>
        An example for phonegap build docs. 
        </description>

        <author href="http://yoursite.com" email="you@youremail.com">
        Your Name
        </author>
<gap:plugin name="org.apache.cordova.device" version="0.2.12" />

    </widget>

You have to add cordova.js

its works fine from my side. 
```

# c - 通过 a[0] 或 0[a] 访问数组元素，实际用法是什么？

> ID：14872261
> 
> 赞同：-1
> 
> 时间：2013-02-14T10:06:09.820
> 
> 标签：c

**我知道的？**

有一个数组，`int a[10]`要访问它的第一个元素，我可以使用`a[0]`或`0[a]`; 这导致

```
*(a+0) and *(0+a) -> Both results in accessing first element of the array. 
```

**我想知道什么？**

我想知道使用 0[a] 而不是 a[0] 是否更实用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:09:47.350

不，是相反的。当一个是指针而另一个是整数时`a + b`，意思是一样的。`b + a`这导致`*(a + b)`并`*(b + a)`意味着相同的事情，并且*导致*并`a[b]`意味着`b[a]`相同的事情。

`i + p`通过添加指向整数 ( )的指针，可以使某些情况更具可读性。`i[p]`通过索引整数 ( ) ，没有任何案例更易读。不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:37:40.270

在您的示例`int a[10]`中，不，编写`0[a]`.

FredOverflow 链接到一个示例，但从评论中提取原因有点困难。因此，我将其添加为答案。

`a[0]`如果可以是任何表达式（或例如宏参数）而不是简单名称，`0[a]`则*不一定*等价。`a`

假设`a`展开为`b + 1`。那么`b + 1[0]`与 完全不同`0[b + 1]`。

为了解决这个尴尬的情况，您可以询问使用它是否更实用`0[a]`而不是`(a)[0]`. 答案仍然是否定的。除非你喜欢简洁而不是熟悉。

宏可以扩展为包含不匹配的括号，例如`#define a x]+0[x`或其他内容，因此两者在所有情况下仍然不是严格等价的。但是 if`a`是一个表达式 then`0[a]`并且`(a)[0]`是等价的。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-02-14T10:09:13.443

**(0+a)**这意味着在某个时间值增加，**(a+0)**这意味着再次来之后值增加

# axapta - 如何在.Net中获取数组中值的数量？

> ID：14872264
> 
> 赞同：2
> 
> 时间：2013-02-14T10:06:20.187
> 
> 标签：axapta, business-connector

AX 允许定义数组，但在通过 .NET Business Connector 获取信息时，它显示为单个字段。例如：维度由以下方式设置：

```
axRec.setField("Dimension[1]","A");
axRec.setField("Dimension[2]","B");
axRec.setField("Dimension[3]","C");
// and so on... 
```

我怎么知道“维度”有多少个字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T08:35:34.087

AX 支持编译时函数`dimOf`来返回计数，但 .Net 不提供此功能！

拯救来了`DictField`类：

X++ 代码：

```
DictField df = new DictField(tablenum(CustTable), fieldnum(CustTable, AccountNum));   
if (df)  
{ 
    print strfmt("The arraySize is %1.", df.arraySize());  
} 
```

您可以创建一个 X++ 实用程序函数，然后调用它：

```
static int arraySize(str tableName, str fieldName)
{
    DictField df = new DictField(tableName2Id(tableName), fieldName2Id(tableName2Id(tableName), fieldName)));   
    return df ? df.arraySize() : -1;  
} 
```

# qooxdoo - 在运行时更改/更新模型

> ID：14872266
> 
> 赞同：0
> 
> 时间：2013-02-14T10:06:24.457
> 
> 标签：qooxdoo

我想在运行时更改/更新创建的模型

`var model = qx.data.marshal.Json.createModel(def.model)`.

并将文本字段与使用此创建的对象控制器绑定

`var controller = new qx.data.controller.Object(model)`

怎么做？`de.model`是模型的 JSON 定义，如下所示：

```
{
     f_name: "baskar",
     l_name: "vignesh"
} 
```

例如，我想`address`用这个现有模型添加字段。所以

```
{
     f_name: "baskar",
     l_name: "vignesh",
     address: "blah blah blah"
} 
```

怎么做？任何人请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:07:13.583

由于模型是动态创建的类的实例，因此这是不可能的。您不能就地更改类以及它的所有实例。可行的方法是创建一个新模型并复制数据。这是我现在能想到的唯一可能的方法。

# javascript - 将 Raphael 论文存储在 html 对象的 id 中

> ID：14872271
> 
> 赞同：0
> 
> 时间：2013-02-14T10:06:34.180
> 
> 标签：javascript, raphael

所以我有一些名为“paper_0”、“paper_1”等的论文，我想以这种方式存储它们：

```
<h2 id="paper_0" onclick="doThing(this.id, 'myFunction')">Name of this thing</h2> 
```

在我的 javascript 文件中：

```
//some code here
function doThing(id, func){
   currentId = id; //store current game
   func(); //this would create paper_0 **error**
   //some code here
}

function removePaper(){
   currentId.remove(); // **error**
} 
```

所以我有这两个错误，因为*id*和*func*都是字符串。

有什么建议可以存放纸质**物品**吗？或者我可以给论文ID吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:11:11.717

您传入的是函数名称，而不是实际函数。

试试这个：

```
function doThing(id, func){
   currentId = id; //store current game

   if(func == "myFunction") myFunction(currentId);

   //...
} 
```

您可以将对象存储在全局变量中：

```
var papers = array();

function myFunction(id) {
    papers.push(id);
} 
```

要从数组中删除元素，您可以这样做：[如何在 JavaScript 中从数组中删除特定元素？](https://stackoverflow.com/questions/5767325/remove-specific-element-from-a-javascript-array)

```
function removePaper(id){
    papers.splice(array.indexOf(id), 1);
} 
```

您可以修改此狗对象以满足您的纸张需求：

```
var myDog = {

    "name" : "Spot",

    "bark" : function() { alert("Woof!"); },

    "displayFullName" : function() {
        alert(this.name + " The Alpha Dog");
    }
};

myDog.displayFullName(); 

myDog.bark(); // Woof! 
```

# android - iOS 中 Localizable.strings 的基本样式

> ID：14872276
> 
> 赞同：0
> 
> 时间：2013-02-14T10:07:08.017
> 
> 标签：android, ios, objective-c, country, localizable.strings

从 Android 背景来看，我认为可以通过使用 HTML 标记向 iOS Localizable.strings 添加基本样式，如下所示：

[http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling](http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)

有没有办法添加一些基本的样式信息？对于许多不同语言，以给定样式显示以下文本的 iOS 方式是什么：

**标题**

*信息1：*
blablabla

*信息2：*
blablabla

我必须为每个单词添加一个新键吗？如果结构根据语言发生变化，那将是疯狂的......每个国家都必须有一种方法来做到这一点：

```
"text.screen1" = "<b>Title</b> <br><br> <i>Information1</i> ..." 
```

很高兴有任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:16:14.097

显示 HTML 的唯一方法是使用*UIWebView*和*loadHTMLString*方法：

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320,200)];
[webView loadHTMLString:@"test <i>italic</i>" baseURL:nil];
[self.view addSubview:webView]; 
```

您也可以使用 \n，但您不能更改 UITextView 的呈现文本的字体/样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:05:24.583

您可以将本地化字符串存储为 Markdown 格式的文本，使用[GHMarkdownParser](https://github.com/OliverLetterer/GHMarkdownParser)之类的内容对其进行解析，然后使用`UIWebView`.

或者您可以只存储纯 HTML。我建议使用 Markdown，因为它更容易阅读。

您还可以将 HTML 转换为具有[DTCoreText](https://github.com/Cocoanetics/DTCoreText)`NSAttributedString`类别的，或者简单地通过实现您自己的转换器。`NSScanner`

# java - 如何在“InetAddress”方法中传递“主机名”数组而不是传递一个主机名

> ID：14872277
> 
> 赞同：0
> 
> 时间：2013-02-14T10:07:10.167
> 
> 标签：java, hostname, inetaddress

在我们只传递一个主机名的以下代码块中，您如何传递多个“主机名”？可能吗？

```
private static void run() {

  String host = "www.google.com";
  try {
    inetAddress = InetAddress.getAllByName(host);
    String all = "";
    for (int i = 0; i < inetAddress.length; i++) {
      all = all + String.valueOf(i) + " : " + inetAddress[i].toString() + "\n";
      Log.d("IPADDR", "IP Address : " + all);                  
      prefs.sethostIPaddress(context, all);  //Setting HostIP Address in Preference File
    }
  }
  catch (UnknownHostException e) {
       e.printStackTrace();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:13:00.617

从[InetAddress](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html)没有采用 Strings 数组的方法。所以你不能那样做。

您可以创建自己的主机数组并使用 for 循环来获取`InetAddress`. 喜欢

```
String [] hosts = {"host1", "host2", "host3"};

for(String host : hosts){
   try {
      inetAddress = InetAddress.getAllByName(host);
      String all = "";
      for (int i = 0; i < inetAddress.length; i++) {
          all = all + String.valueOf(i) + " : " + inetAddress[i].toString() + "\n";
          Log.d("IPADDR", "IP Address : " + all);
          prefs.sethostIPaddress(context, all); //Setting HostIP Address in Preference File    
       }
    }
    catch (UnknownHostException e) {
          e.printStackTrace();
    }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:14:34.390

我没有看到合适的 API，为什么不只是传递一个主机数组并循环它呢？

```
String[] hosts = {"www.google.com", "www.pippo.com", "...."};
for(String host : hosts){
  // Do your thing
} 
```

# internet-explorer - 不使用兼容模式

> ID：14872279
> 
> 赞同：0
> 
> 时间：2013-02-14T10:07:14.803
> 
> 标签：internet-explorer

谁能告诉我为什么[这个页面](http://www.westberks.gov.uk/frontline/describe_case.aspx)没有强制浏览器进入兼容模式？

我已将此添加到 HEAD：

```
<meta http-equiv="X-UA-Compatible" value="IE=8" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:24:43.937

`<!DOCTYPE>`应该在文件的第一行。`X-UA-Compatible`应该在任何`link`或`script`任何其他之前，这可能会影响文档模式。你`X-UA-Compatible`的格式也不正确，应该是`<meta http-equiv="X-UA-Compatible" content="IE=8" />`. 火灾`initpage()`时未定义。`body.onload`

# iphone - ios - 如何在 iPad 中创建待办事项列表

> ID：14872280
> 
> 赞同：-5
> 
> 时间：2013-02-14T10:07:15.277
> 
> 标签：iphone, ios, ipad, ios6

我想创建一个应用程序来编写/查看我的`to-do`列表和与联系人的约会。

有谁知道要使用哪个库以及如何在 ipad 中实现它

感谢您的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:14:17.357

您可能正在查看适用于 iOS 的[EventKit](https://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/Introduction/Introduction.html)。有日历、闹钟和提醒。阅读。

# objective-c - 从登录屏幕到 `UITabBarController`

> ID：14872284
> 
> 赞同：2
> 
> 时间：2013-02-14T10:07:22.833
> 
> 标签：objective-c, uitabbarcontroller

我有一个登录屏幕，用于检查插入的密码是否正确。

之后，我想从登录屏幕切换到`UITabBarController`.

LoginViewController.m 中的代码：

```
-(IBAction)LoginButton:(id)sender {

    [PassWortEingabe resignFirstResponder];
    NSString *pnssPasswortEingabe = [NSString stringWithFormat:@"%@",PassWortEingabe.text];
    NSString *pnssPasswortString  = [NSString stringWithFormat:@"%s","Hallo"];

    if( [pnssPasswortEingabe isEqualToString: pnssPasswortString ]){

        DebugTextView.text = @"Login succesfull";
        //PassWortEingabe = 0;
        //[PassWortEingabe resignFirstResponder];
    }else{

        DebugTextView.text = @"Login unsuccesfull";
        //PassWortEingabe = 0;
       //[PassWortEingabe resignFirstResponder];
    }

} 
```

我想跳转到`UITabBarController`登录成功时...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:23:08.847

就像下面的代码一样简单。

```
if( [pnssPasswortEingabe isEqualToString: pnssPasswortString ]){
   // This is for iOS 5.0 and above.
    UITabBarController *myTabBarController = [self.storyboard instantiateViewControllerWithIdentifier:@"myTabBarController"];
    [myTabBarController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
    [self presentViewController:myTabBarController animated:YES completion:^(void){
        // You can set some sort of completion block here which will run when all other code finishes, this can just be nil.
     }];
} else {
    DebugTextView.text = @"Login unsuccesfull";
} 
```

您也可以将此行替换为

```
[self presentViewController:myTabBarController animated:YES completion:nil]; 
```

用。。。来代替

```
[self presentModalViewController:myTabBarController animated:YES]; 
```

但这在 iOS 6.0 中已被弃用。因此，如果您正在为 iOS 5.0 及更高版本制作应用程序，则最好使用第一行，这样您以后就不必进行更改。

如果您想使用 nib 文件执行上述代码，则使用情节提要，然后更改

```
[self.storyboard instantiateViewControllerWithIdentifier:@"myTabBarController"]; 
```

至

```
[[UITabBarController alloc] initWithNibName:@"myTabBarController" bundle:[NSBundle mainBundle]]; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:11:16.447

```
if( [pnssPasswortEingabe isEqualToString: pnssPasswortString ]){

    DebugTextView.text = @"Login succesfull";
    MyTabBarClass *myTabBar = [[MyTabBarClass alloc]initWithNibName:nil bundle:nil];
    myTabBar.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:myTabBar animated:YES];
    //PassWortEingabe = 0;
    //[PassWortEingabe resignFirstResponder];
}else{

    DebugTextView.text = @"Login unsuccesfull";
    //PassWortEingabe = 0;
    //[PassWortEingabe resignFirstResponder];
} 
```

# c# - 远程验证不会将数据传递给行动

> ID：14872285
> 
> 赞同：4
> 
> 时间：2013-02-14T10:07:25.533
> 
> 标签：c#, asp.net-mvc, validation, remote-validation

我有模型：

```
public class MyModel
...fields
[Remote(ActionName, ControllerName)]
public string SomeNumber { get; set; }
..fields 
```

并在 ControllerName 控制器中有一个动作：

```
public JsonResult ActionName(string someNumber)
{...} 
```

但是当调用操作时，参数 someNumber 始终为空。当我尝试调试它时，我得到

```
GET /ControllerName/ActionName?MyModel.SomeNumber =34189736 
```

我怎样才能让它工作？（我不能传递整个模型 MyModel，也不能在我的视图中更改 MyModel.SomeNumber 字段的名称）

**UPD。**在我看来输入：

```
<input data-val="true" data-val-remote-additionalfields="*.SomeNumber" data-val-remote-url="/ControllerName/ActionName" id="MyModel_SomeNumber" name="MyModel.SomeNumber" type="text" value="34189734" class="valid"> 
```

**UPD**解决了！:) 我使用单个字段 SomeNumber 创建新模型并使用前缀：

```
SomeNumber([Bind(Prefix = "MyModel")]MySingleFieldModel model) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-11T17:30:14.410

如果您使用的是 nested ，则需要在您的操作`ViewModels`中接受父级`ViewModel`作为参数。`Validation`例如：

```
public class ParentViewModel
{
    public UserViewModel User {get; set; }

    //....
}

public class UserViewModel 
{
    [Remote("UniqueUsername", "Validation")]
    public string Username { get; set; }

    //....
} 
```

在验证控制器中：

```
public class ValidationController : Controller
{ 
     public JsonResult UniqueUsername(ParentViewModel Registration) 
     {
        var Username = Registration.User.Username; //access the child view model property like so

        //Validate and return JsonResult

     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T10:32:37.383

尝试使用您的模型作为参数。这样它就可以将值绑定到它。

```
public JsonResult ActionName(MyModel model)
{
    //...
    model.SomeNumber;
    //...

   return Json(validationResult, JsonRequestBehavior.AllowGet)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:23:33.917

```
public JsonResult ActionName(string SomeNumber)
{...} 
```

我认为您可能需要在输入参数上匹配大小写。

# android - 无一例外的阻止下载

> ID：14872289
> 
> 赞同：0
> 
> 时间：2013-02-14T10:07:55.363
> 
> 标签：android, download, inputstream, urlconnection, timeoutexception

我尝试从移动设备下载文件。手机是通过wifi连接的，有时候手机换个位置，就连接到另一个wifi。对于下载，我使用：

```
 final URLConnection ucon = url.openConnection();
    ucon.setReadTimeout(10000);
    ucon.setConnectTimeout(10000);
    final InputStream inputStream = ucon.getInputStream();
    final BufferedInputStream bis = new BufferedInputStream(inputStream); 
```

在 bis.available() 和 bis.read() 之后获取数据，直到字节数 > ucon.getContentLength()。

当wifi连接发生变化时，我预计会出现（IO）异常（或至少是TimeoutException），但什么也没有。

在另一堂课中，我检查了网络连接（使用广播接收器），我看到事件断开/连接正常。所以，我可以使用广播接收器停止并重新开始下载，但我认为这不是最好的方法去做。

你有什么想法在这种情况下得到一个例外吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:12:02.513

我相信在这种情况下可能不会出现异常/错误，至少不可靠。

对端基本不可用，所以你不会再收到任何数据。如果您不发送数据（如果您使用 HTTP 下载不会发生这种情况），那么只要您不实现自己的超时，就不会发生任何事情。

因此，我会采用您的方式来监听网络更改事件。

进一步说明：

问题是，对于 TCP 连接，您（或操作系统）只能检测错误：

*   如果您发送数据并且没有从另一端返回 ACK
*   如果对方发送 RST 或类似的东西。

如果另一端已经消失（或无法访问，在您的情况下）并且您不发送数据，则您无法检测到错误（仅通过您自己的超时）。

# assembly - 没有编程经验的学习汇编

> ID：14872290
> 
> 赞同：1
> 
> 时间：2013-02-14T10:07:57.393
> 
> 标签：assembly, mips, powerpc

除了阅读一些 ASM 操作数 (MIPS) 的最基本能力外，我没有任何编程经验。

由于严重的健康状况，我有 1 年的空闲时间。这段时间我不能工作或外出，所以我决定要学习 ASM。

我对黑客游戏感兴趣；特别是 GameCube (PowerPC ASM) 和 PlayStation (MIPS ASM)。

像我这样的人正确学习 ASM 的最佳方法是什么？

我想要足够流利，我可以编写简单的程序，重要的是我能真正理解它，所以我可以在反汇编程序中查看游戏的功能（使用断点等）。

我基本上需要对我感兴趣的少量游戏进行逆向工程，这样我就可以破解/更改/修改某些属性（当然完全合法）。

这对我来说只是一个爱好。我没有兴趣在这个领域找到工作；我的大学专业与编程完全无关，我不能在我的大学学习编程课程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:20:28.367

如果您想更深入地了解事物，那么我建议您查看像 Udacity 的[计算机科学概论](https://www.udacity.com/course/cs101)这样的课程，该课程教授使用 python 进行计算机编程的基础知识。

然后我会继续看一些中级编程课程——比如数据结构理论——这听起来很无聊——但是如果你没有掌握高级语言的基础知识，那么当你学习时你就会完全迷失在汇编中。必须自己管理*一切*！只有这样我才会看游戏汇编器——它通常比“hello world”先进得多！

我建议你不要太早去组装:-)

我没有挂断 Udacity - 但 GPU 编程课程才刚刚开始 - 虽然它绝对是一门高级课程！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T03:41:00.460

如果您想了解 MIPS 汇编程序，您应该获得一份[See MIPS Run](https://rads.stackoverflow.com/amzn/click/com/0120884216)的副本。本书假设您对 C 语言有一定的了解。如果您不熟悉 C，可以使用很多书籍。 [Stephen G. Kochan 的Programming in C](https://rads.stackoverflow.com/amzn/click/com/0672326663)是我在 Amazon 上找到的第一个有用的内容，尽管我从未读过它。

（如果您的目标是了解特定游戏的工作原理，您可能会发现学习 Python 有点偏题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T08:05:52.443

为了学习 MIPS，我使用[MIPSIT](http://www.bostream.nu/mats.brorsson/mipsit/)，这取决于您的环境。你可以得到一个实际的芯片或模拟/仿真。

# android - android 应用程序中的 IllegalStateException 尝试在模拟器中运行

> ID：14872293
> 
> 赞同：0
> 
> 时间：2013-02-14T10:08:01.697
> 
> 标签：android, illegalstateexception

我的 android 应用程序中出现错误`java.lang.IllegalStateException: Could not find a method onClick(View) in the activity class com.example.mysostest.MySOSTestActivity for onClick handler on view class android.widget.Button with id 'button1'`，它只有一个活动类。当我尝试单击应用程序中的唯一按钮（在模拟器中）时，错误出现在 logcat 中

我在我的活动类中添加了 onClick 方法和一个带有*id:button1*的按钮。下面是我的代码

```
package com.example.mysostest;

import android.app.ActionBar;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;

import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
//import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
//import android.widget.TextView;
import android.widget.Toast;
import android.app.*;
//import com.example.sostestproject.*;
import com.tcs.sos.api.Connection;
import com.tcs.sos.api.Operations;
import com.tcs.sos.api.OperationsEnum;
import com.tcs.sos.api.OperationsFactory;
import com.tcs.sos.api.operations.InsertObservationRequest;
import com.tcs.sos.api.operations.InsertObservationResponse;
import com.tcs.sos.api.operations.Location;
import com.tcs.sos.api.operations.Observation;
import com.tcs.sos.api.operations.RegisterSensorRequest;
import com.tcs.sos.api.operations.RegisterSensorResponse;
import com.tcs.sos.api.operations.Sensor;
import com.tcs.sos.api.operations.SensorMLOutput;
import com.tcs.sos.api.operations.exceptions.SOSException;
import com.tcs.sos.api.operations.exceptions.ValidationException;;

public class MySOSTestActivity extends Activity {

    final Context context=this;
    public static final String TAG="Just to create LOG";

    static String SOSBaseURL="http://192.168.161.52:8080/52nSOSv3.2.1/sos";
    static String API_KEY = "65bda03805a7f0186ef44687682d108f";
    static String APP_KEY = "e9f718e06f2872f02283b83a4b499ee4";

    private EditText text1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my_sostest);
        text1=(EditText)findViewById(R.id.editText1);

         Button button=(Button)findViewById(R.id.button1);
         final String inputString=text1.getText().toString();
            if(text1.getText().length()==0){
            Toast.makeText(this, "You have enetered blank ", Toast.LENGTH_LONG).show();
            return;
            }
         button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // TODO Auto-generated method stub
                try{
                Connection.sos = SOSBaseURL;
                RegisterSensorRequest r = null;
                String ECG_Offering = "Sample_Data_testing_FromAndroidApp";
                r = new RegisterSensorRequest(Sensor.newSensor(inputString));
                r.add("heart_rate_value", ECG_Offering).Quantity();
                r.add("heart_rate_behaviour", ECG_Offering).Text(); //Category Type
                r.add("ecg", ECG_Offering).Text(); //Category Type
                r.add("patientId", ECG_Offering).Text(); //New field to accommodate location
                r.add("Location", ECG_Offering).Location();

                r.setApiKey(API_KEY);
                r.setAppKey(APP_KEY);
                RegisterSensorResponse response = (RegisterSensorResponse)OperationsFactory.get(OperationsEnum.RegisterSensor).execute(r);

                if(response.isSuccess()) {
                    System.out.println("Generating API KEY....");
                    System.out.println("The response is"+response.toString());
                    Log.e(TAG,"Connected to SOS");

                AlertDialog.Builder alertDialogBuilder=new AlertDialog.Builder(context);
                alertDialogBuilder.setMessage("Connected to SOS")
                                  .setCancelable(false)
                                  .setPositiveButton("OK",new DialogInterface.OnClickListener() {

                                    @Override
                                    public void onClick(DialogInterface dialog, int which) {
                                        // TODO Auto-generated method stub
                                        dialog.cancel();
                                    }
                                });
                alertDialogBuilder.create();
                alertDialogBuilder.show();
                }
                }catch(ClassNotFoundException ex){
                    ex.printStackTrace();
                }
                catch(IllegalAccessException ex){
                    ex.printStackTrace();
                }
                catch(InstantiationException ex){
                    ex.printStackTrace();
                }
                catch(ValidationException ex){
                    ex.printStackTrace();
                }
                catch(SOSException ex){
                    ex.printStackTrace();
                }
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_my_sostest, menu);
        return true;
    }

} 
```

我在 logcat 视图中出现以下错误

```
02-14 09:47:49.476: E/AndroidRuntime(839): FATAL EXCEPTION: main
02-14 09:47:49.476: E/AndroidRuntime(839): java.lang.IllegalStateException: Could not find a method onClick(View) in the activity class com.example.mysostest.MySOSTestActivity for onClick handler on view class android.widget.Button with id 'button1'
02-14 09:47:49.476: E/AndroidRuntime(839):  at android.view.View$1.onClick(View.java:3584)
02-14 09:47:49.476: E/AndroidRuntime(839):  at android.view.View.performClick(View.java:4202)
02-14 09:47:49.476: E/AndroidRuntime(839):  at android.view.View$PerformClick.run(View.java:17340)
02-14 09:47:49.476: E/AndroidRuntime(839):  at android.os.Handler.handleCallback(Handler.java:725)
02-14 09:47:49.476: E/AndroidRuntime(839):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-14 09:47:49.476: E/AndroidRuntime(839):  at android.os.Looper.loop(Looper.java:137)
02-14 09:47:49.476: E/AndroidRuntime(839):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-14 09:47:49.476: E/AndroidRuntime(839):  at java.lang.reflect.Method.invokeNative(Native Method)
02-14 09:47:49.476: E/AndroidRuntime(839):  at java.lang.reflect.Method.invoke(Method.java:511)
02-14 09:47:49.476: E/AndroidRuntime(839):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-14 09:47:49.476: E/AndroidRuntime(839):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-14 09:47:49.476: E/AndroidRuntime(839):  at dalvik.system.NativeStart.main(Native Method)
02-14 09:47:49.476: E/AndroidRuntime(839): Caused by: java.lang.NoSuchMethodException: onClick [class android.view.View]
02-14 09:47:49.476: E/AndroidRuntime(839):  at java.lang.Class.getConstructorOrMethod(Class.java:460)
02-14 09:47:49.476: E/AndroidRuntime(839):  at java.lang.Class.getMethod(Class.java:915)
02-14 09:47:49.476: E/AndroidRuntime(839):  at android.view.View$1.onClick(View.java:3577)
02-14 09:47:49.476: E/AndroidRuntime(839):  ... 11 more
02-14 09:48:33.115: I/Process(839): Sending signal. PID: 839 SIG: 9 
```

我将不胜感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:18:01.780

由于您在 xml 文件中指定`onClick`了属性，因此您也收到了错误，并且您也在 java 代码中为同一按钮设置了侦听器。

只需`onClick`从 xml 文件中删除。或`onClick`仅保留并从 java 文件中删除侦听器。

# apache - 当 Apache 和 MySQL 启动并运行时，浏览器找不到 localhost

> ID：14872294
> 
> 赞同：2
> 
> 时间：2013-02-14T10:08:06.653
> 
> 标签：apache, xampp, localhost

我已经重新安装了我的 Xampp 应用程序，Apache 在端口 443 和 8080 上运行，MySQL 在 3306 上运行。

如果我去 Localhost，它仍然给我一个 404 错误，而它应该给我一个消息，比如“你已经成功安装了 Xampp！”

可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T12:52:44.447

如果省略端口，http 默认使用端口 80，https 使用端口 443。

所以试着打电话

```
http://localhost:8080 
```

或者

```
https://localhost 
```

如果这没有帮助，您应该检查您的网络服务器的访问日志。

# android - 恢复导航选项卡状态时出现 IndexOutOfBoundsException

> ID：14872296
> 
> 赞同：0
> 
> 时间：2013-02-14T10:08:10.027
> 
> 标签：android

我正在使用操作栏选项卡导航，当我旋转屏幕时，我得到 IndexOutOfBoundsException

根据logcat问题在`getSupportActionBar().setSelectedNavigationItem( savedInstanceState.getInt(STATE_SELECTED_NAVIGATION_ITEM));`

```
@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    // Restore the previously serialized current tab position.
    if (savedInstanceState.containsKey(STATE_SELECTED_NAVIGATION_ITEM)) {
        getSupportActionBar().setSelectedNavigationItem(
                savedInstanceState.getInt(STATE_SELECTED_NAVIGATION_ITEM));
    }
}

@Override
public void onSaveInstanceState(Bundle outState) {
    // Serialize the current tab position.
    outState.putInt(STATE_SELECTED_NAVIGATION_ITEM, getSupportActionBar()
            .getSelectedNavigationIndex());
} 
```

**编辑**
我发现了问题。我使用 AsyncTask 收集将显示在选项卡中的所有信息，并在`onPostExecute`.

`onRestoreInstanceState`之前调用过，`onPostExecute`所以标签计数仍然为 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:14:44.053

尝试

`if (savedInstanceState!= null && savedInstanceState.getInt(STATE_SELECTED_NAVIGATION_ITEM) >= 0)`

反而`if (savedInstanceState.containsKey(STATE_SELECTED_NAVIGATION_ITEM))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:15:40.833

我不确定`onSaveInstanceState`屏幕旋转时是否调用。
由于[此文档](http://developer.android.com/reference/android/app/Activity.html)， “*在将活动置于这种背景状态之前调用了 onSaveInstanceState(Bundle) 方法*”。

您是否检查过屏幕旋转时是否调用了该函数？

# android - 获取联系人选择器的 gumber 时发生异常

> ID：14872298
> 
> 赞同：0
> 
> 时间：2013-02-14T10:08:15.127
> 
> 标签：android, android-contacts, android-contentresolver

在我的程序中执行联系人拾取代码时，光标正在检索值的行导致异常。我无法弄清楚为什么会发生异常。任何人都可以帮助我。我的代码如下。

```
public void onActivityResult(int requestcode, int resultcode, Intent data){
    super.onActivityResult(requestcode, resultcode, data);

    switch(requestcode){
        case (CONTACT_PICKER_RESULT):
                if(resultcode == Activity.RESULT_OK)
                {
                    Cursor cursor = null;
                    String phno ="";
                    try
                    {
                        Uri my_uri = data.getData();
                        String id = my_uri.getLastPathSegment();
                        Toast.makeText(getApplicationContext(), "id="+id, Toast.LENGTH_SHORT).show();

                        int phnoidx = 0;

                              //Exception occured in the next line
                        cursor = getContentResolver().query(Phone.CONTENT_URI, null, Phone.CONTACT_ID+"=?", new String[] { id }, null);//--> Exception occurs here
                        phnoidx = cursor.getColumnIndex(Phone.DATA);
                        if(cursor.moveToFirst())
                        {
                            while(cursor.isAfterLast() == false)
                            {
                                phno = cursor.getString(phnoidx);
                                Toast.makeText(getApplicationContext(), "no="+phno, Toast.LENGTH_SHORT).show();
                                cursor.moveToNext();
                            }
                        }
                    }
                    catch(Exception e)
                    {
                        Toast.makeText(getApplicationContext(), "Error occured.", Toast.LENGTH_SHORT).show();
                        //exception handle
                    }
                    finally{
                        if(cursor != null)
                            cursor.close();
                    }
                    if(phoneno.getText().equals("") || !addphone_enable)
                        phoneno.setText(phno);
                    else if(addphone_enable)
                        addphno.setText(phno);
                }
                break;
    }
    activitytype = "main";

} 
```

这是我得到的例外：

```
02-15 12:44:55.594: E/DatabaseUtils(187): java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.ContactsProvider2 uri content://com.android.contacts/data/phones from pid=336, uid=10036 requires android.permission.READ_CONTACTS 
```

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:29:22.830

添加以下代码行：

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

到结束清单标记之前。

删除了任何其他提到此权限的代码，停止收到此错误。

# css - css -在相同大小的盒子中不同

> ID：14872300
> 
> 赞同：0
> 
> 时间：2013-02-14T10:08:25.377
> 
> 标签：css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:12:18.310

不太了解，但是如果您想要相同大小的包装器而不是仅仅使用`display: block;`，因为`<a>`它是一个内联元素，因此您需要将其设为块级元素，或者如果您想要内联块，只需使用`display: inline-block;`

```
<style>
a {
    background: #DDD;
    border: #BBB;
    padding:1px;
    width: 20em;
    height: 2em;
    display: block; <------ Add This
}
</style> 
```

# c++ - OpenCV 中的局部归一化

> ID：14872306
> 
> 赞同：7
> 
> 时间：2013-02-14T10:08:36.430
> 
> 标签：c++, matlab, opencv, image-processing

我正在尝试在 OpenCV 中实现一种局部归一化算法，以减少图像中的照明差异。我找到了一个[MATLAB 函数](http://www.mathworks.com/matlabcentral/fileexchange/8303-local-normalization)，并在 OpenCV 中实现了它。但是，我得到的结果与 MATLAB 函数给出的结果不同。

这是我的代码：

```
Mat localNorm(Mat image, float sigma1, float sigma2)
{
    Mat floatGray, blurred1, blurred2, temp1, temp2, res;

    image.convertTo(floatGray, CV_32FC1);
    floatGray = floatGray/255.0;

    int blur1 = 2*ceil(-NormInv(0.05, 0, sigma1))+1;
    cv::GaussianBlur(floatGray, blurred1, cv::Size(blur1,blur1), sigma1);
    temp1 = floatGray-blurred1;

    cv::pow(temp1, 2.0, temp2);
    int blur2 = 2*ceil(-NormInv(0.05, 0, sigma2))+1;
    cv::GaussianBlur(temp2, blurred2, cv::Size(blur2,blur2), sigma2);
    cv::pow(blurred2, 0.5, temp2);

    floatGray = temp1/temp2;
    floatGray = 255.0*floatGray;
    floatGray.convertTo(res, CV_8UC1);

    return res;
} 
```

该函数`NormInv`是 Euan Dean 在[这篇文章](https://stackoverflow.com/questions/2901750/is-there-a-c-sharp-library-that-will-perform-the-excel-norminv-function)中给出的 C++ 实现。

下面显示了我得到的结果和理论结果，对于相同的值`sigma1`和`sigma2`（分别为 2.0 和 20.0）

![http://s9.postimage.org/3xfdf8f8f/Results.jpg](../Images/a189dc5de67d7062df1ee27d81c75473.png)

我尝试对 and 使用不同的值`sigma1`，`sigma2`但它们似乎都不起作用。我也尝试过在高斯函数中做`blur1=0`和`blur2=0`，但它也不起作用。

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T10:48:52.473

您需要在将图像转换为 CV_8UC1 之前将其标准化为 0 到 255 之间

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T12:33:54.887

这是我的实现（我正在使用`sigma1=2`, `sigma2=20`）：

```
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
using namespace cv;

int main(int argc, char** argv)
{
    Mat img, gray, float_gray, blur, num, den;

    // Load color image
    img = cv::imread("lena.png", 1);
    if( !img.data ) {
        return -1;
    }

    // convert to grayscale
    cv::cvtColor(img, gray, CV_BGR2GRAY);

    // convert to floating-point image
    gray.convertTo(float_gray, CV_32F, 1.0/255.0);

    // numerator = img - gauss_blur(img)
    cv::GaussianBlur(float_gray, blur, Size(0,0), 2, 2);
    num = float_gray - blur;

    // denominator = sqrt(gauss_blur(img^2))
    cv::GaussianBlur(num.mul(num), blur, Size(0,0), 20, 20);
    cv::pow(blur, 0.5, den);

    // output = numerator / denominator
    gray = num / den;

    // normalize output into [0,1]
    cv::normalize(gray, gray, 0.0, 1.0, NORM_MINMAX, -1);

    // Display
    namedWindow("demo", CV_WINDOW_AUTOSIZE );
    imshow("demo", gray);

    waitKey(0);

    return 0;
} 
```

结果符合预期：

![归一化图像](../Images/d2ef1f66f33828984ac798a57c9d5941.png)

请注意，您可以将内核大小指定为`Size(0,0)`，它将根据 sigma 值计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-06T01:44:16.947

这是上面相同算法的 Python 实现：

```
import cv2
import numpy as np

img = cv2.imread('/home/anmol/Downloads/lena.png')

gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

float_gray = gray.astype(np.float32) / 255.0

blur = cv2.GaussianBlur(float_gray, (0, 0), sigmaX=2, sigmaY=2)
num = float_gray - blur

blur = cv2.GaussianBlur(num*num, (0, 0), sigmaX=20, sigmaY=20)
den = cv2.pow(blur, 0.5)

gray = num / den

gray = cv2.normalize(gray, dst=gray, alpha=0.0, beta=1.0, norm_type=cv2.NORM_MINMAX)

cv2.imwrite("./debug.png", gray * 255) 
```

输出：

[![在此处输入图像描述](../Images/21ad57ad733de3b482469f99d674dcb5.png)](https://i.stack.imgur.com/2rpbp.png)

# sql - 将值列表与表格进行比较

> ID：14872307
> 
> 赞同：3
> 
> 时间：2013-02-14T10:08:36.493
> 
> 标签：sql, database, oracle, oracle10g

我试图为这个问题找到解决方案一段时间但没有成功，所以任何帮助将不胜感激。需要将 ID 列表与表进行比较，并找出哪些记录存在（及其值之一），哪些不存在。
有一个 ID 列表，采用文本格式：

```
100,
200,
300 
```

数据库表：

```
ID(PK)   value01 value02 value03 .....
--------------------------------------
100       Ann
102       Bob
300       John
304       Marry
400       Jane 
```

我需要的输出是：

```
100 Ann
200 missing or empty or whatever indication
300 John 
```

明显的解决方案是创建表并加入，但我只有读取权限（数据库是封闭的供应商产品，我只是一个用户）。编写 PL/SQL 函数似乎也很复杂，因为表有 200 多列和 100k 多条记录，而我在创建动态记录数组时没有运气。此外，要检查的 ID 列表包含数百个 ID，我需要定期执行此操作，因此必须在单独的代码行中更改每个 ID 的任何解决方案都不会很有用。数据库是Oracle 10g。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:26:26.600

有许多内置的公共集合类型。您可以像这样利用其中一个：

```
with ids as (select /*+ cardinality(a, 1) */ column_value id
               from table(UTL_NLA_ARRAY_INT(100, 200, 300)) a
            )
select ids.id, case when m.id is null then '**NO MATCH**' else m.value end value
  from ids
         left outer join my_table m
                     on m.id = ids.id; 
```

要查看数据库上的公共类型列表，请运行：

```
select owner, type_name, coll_type, elem_type_name, upper_bound, precision, scale from all_coll_types
 where elem_type_name in ('FLOAT', 'INTEGER', 'NUMBER', 'DOUBLE PRECISION') 
```

提示

```
/*+ cardinality(a, 1) */ 
```

只是用来告诉 oracle 我们的数组中有多少元素（如果没有指定，默认将假设 8k 元素）。只需设置为一个合理准确的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:21:06.117

`CONNECT BY`您可以使用（在 11g 上测试，应该在 10g+ 上工作）将变量转换为查询：

```
SQL> WITH DATA AS (SELECT '100,200,300' txt FROM dual)
  2  SELECT regexp_substr(txt, '[^,]+', 1, LEVEL) item FROM DATA
  3  CONNECT BY LEVEL <= length(txt) - length(REPLACE(txt, ',', '')) + 1;

ITEM
--------------------------------------------
100
200
300 
```

然后，您可以将此结果连接到表中，就像它是标准视图一样：

```
SQL> WITH DATA AS (SELECT '100,200,300' txt FROM dual)
  2  SELECT v.id, dbt.value01
  3    FROM dbt
  4    RIGHT JOIN
  5      (SELECT to_number(regexp_substr(txt, '[^,]+', 1, LEVEL)) ID
  6         FROM DATA
  7       CONNECT BY LEVEL <= length(txt) - length(REPLACE(txt, ',', '')) + 1) v
  8       ON dbt.id = v.id;

        ID VALUE01
---------- ----------
       100 Ann
       300 John
       200 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:23:29.413

解决此问题的一种方法是动态创建一个公共表表达式，然后可以将其包含在查询中。您的最终目标是：

```
with list_of_values as (
  select 100 val from dual union all
  select 200 val from dual union all
  select 300 val from dual union all
  ...)
select
  lov.val,
  ...
from
  list_of_values lov left outer join 
  other_data     t   on (lov.val = t.val) 
```

它不是很优雅，尤其是对于大量值集，但是与您可能没有多少权限的数据库的兼容性非常好。

# c# - Fluent NHibernate - 脱水属性值错误；字典中没有给定的键

> ID：14872308
> 
> 赞同：2
> 
> 时间：2013-02-14T10:08:40.663
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有一个名为`ProjectTaskBudget`type 的类`IBudgetableIncomeStream`，如下所示：

```
public class ProjectTaskBudget
{
    public virtual IBudgetableIncomeStream BudgetableIncomeStream { get; set; }
} 
```

`IBudgetableIncomeStream`是一个接口，除其他外，它应用于一个名为的抽象类`Deliverable`：

```
public abstract class Deliverable : IBudgetableIncomeStream
{
    // Some stuff
} 
```

和一个名为的具体类`RecurringIncomeLine`：

```
public class RecurringIncomeLine : IBudgetableIncomeStream
{
    // Some stuff
} 
```

继承自的具体类`Deliverable`是`DeliverableItem`和`DeliverableTime`。

的映射`ProjectTaskBudget`如下所示：

```
public class ProjectTaskBudgetMap : MappingBase<ProjectTaskBudget>
{
    public ProjectTaskBudgetMap()
    {
        ReferencesAny(n => n.BudgetableIncomeStream)
            .EntityTypeColumn("IncomeStreamType")
            .EntityIdentifierColumn("IncomeStream_id")
            .AddMetaValue<Deliverable>("Deliverable")
            .AddMetaValue<RecurringIncomeLine>("RecurringIncomeLine")
            .IdentityType<Guid>();
    }
} 
```

这与 . 一样有效`RecurringIncomeLine`，所以我怀疑问题与抽象/接口映射有关。当我尝试`ProjectTaskBudget`使用`Deliverable`, 和刷新向数据库添加新的时，我收到此错误：

```
NHibernate.PropertyValueException: Error dehydrating property value for xxx.xxx.xxx.ProjectTaskBudget.BudgetableIncomeStream ---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at NHibernate.Type.MetaType.NullSafeSet(IDbCommand st, Object value, Int32 index, ISessionImplementor session)
   at NHibernate.Type.AnyType.NullSafeSet(IDbCommand st, Object value, Int32 index, Boolean[] settable, ISessionImplementor session)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Dehydrate(Object id, Object[] fields, Object rowId, Boolean[] includeProperty, Boolean[][] includeColumns, Int32 table, IDbCommand statement, ISessionImplementor session, Int32 index)
   --- End of inner exception stack trace ---
   at NHibernate.Persister.Entity.AbstractEntityPersister.Dehydrate(Object id, Object[] fields, Object rowId, Boolean[] includeProperty, Boolean[][] includeColumns, Int32 table, IDbCommand statement, ISessionImplementor session, Int32 index)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object id, Object[] fields, Boolean[] notNull, Int32 j, SqlCommandInfo sql, Object obj, ISessionImplementor session)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object id, Object[] fields, Object obj, ISessionImplementor session)
   at NHibernate.Action.EntityInsertAction.Execute()
   at NHibernate.Engine.ActionQueue.Execute(IExecutable executable)
   at NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
   at NHibernate.Engine.ActionQueue.ExecuteActions()
   at hiJump.Infrastructure.DataAccess.EventListeners.FixedDefaultFlushEventListener.PerformExecutions(IEventSource session) in c:\code\Git\Harmony\SharedCode\hiJump\hiJump.Infrastructure\DataAccess\EventListeners\FixedDefaultFlushEventListener.cs:line 35
   at NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
   at NHibernate.Impl.SessionImpl.Flush() 
```

我想知道是否将接口直接应用到`DeliverableItem`并`DeliverableTime`会有所作为，并让映射包括

```
.AddMetaValue<DeliverableItem>("DeliverableItem")
.AddMetaValue<DeliverableTime>("DeliverableTime") 
```

但这是一个相当大的重构，所以我想先检查一下，看看我是否遗漏了更明显的东西，或者这听起来像是无稽之谈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:15:20.890

好的，我想通了。问题出在映射中，但不是我想的那样。

`IBudgetableIncomeStream`它试图添加的实际上是从 派生的东西，`DeliverableItem`所以映射 `DeliverableItem`是不够的，我必须在映射的每个子类中放入 `DeliverableItem`和`DeliverableTime`，例如：

```
.AddMetaValue<DeliverableItemSubclass1>("DeliverableItemSubclass1")
.AddMetaValue<DeliverableItemSubclass2>("DeliverableItemSubclass2")
.AddMetaValue<DeliverableTimeSubclass1>("DeliverableTimeSubclass1") 
```

# c++ - 标准随机函数不起作用 - Qt MinGw

> ID：14872314
> 
> 赞同：0
> 
> 时间：2013-02-14T10:08:53.927
> 
> 标签：c++, qt, random, stl, mingw

我正在使用 QtCreator 2.4.1、QtSdk 4.8.1 和 MinGw 4.7.2

我正在尝试使用 (c++11) 随机库，但到目前为止我一直没有成功。采取以下示例代码：

```
#include <random>
...
std::default_random_engine generator;
std::uniform_int_distribution<int> distribution(1,6);
int dice_roll = distribution(generator);  // generates number in the range 1..6 
```

编译器抱怨：

> 错误：“default_random_engine”不是“std”的成员
> 
> 错误：“uniform_int_distribution”不是“std”的成员

我的 .pro 文件中有 -std=c++0x 标志。所有其他 STL 功能似乎都可以正常工作，所以我很困惑！如果有人能帮我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:34:18.813

好吧，愚蠢的问题，但可能会发生在其他人身上，所以我们开始：

出于某种原因，我的代码是用 MinGW 4.4 编译的，这是我的 Qt Creator 默认附带的版本。要将其带回我已经安装在计算机中的 MinGw 4.7.2，我单击了 QCreator 屏幕左侧的“项目”选项卡，然后选择了正确的工具链。

感谢 Joachim Pileborg 为我指明了正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-08T20:30:59.847

我遇到了同样的问题，无法更改编译器。

我用 qrand() 替换了 std::rand()

[http://qt-project.org/doc/qt-4.8/qtglobal.html#qrand](http://qt-project.org/doc/qt-4.8/qtglobal.html#qrand)

# xslt - 根据 xslt 中的当前节点值更改先前的 NODE 值

> ID：14872316
> 
> 赞同：0
> 
> 时间：2013-02-14T10:08:54.267
> 
> 标签：xslt, xslt-2.0

我正在努力解决以下问题。希望你们中的任何人建议或指导我解决这个问题。

我有一个低于伪 xsd 类型的有效负载。

```
<element name=Main maxCoccurs=unbounded>
        <complexType>
            <element name=input1/>
            <element name=input2/>
            <element name=input3/>
            <element name=input4/>
            <element name=input5/>
            <element name=inside/>
                <element name=username/>
                <element name=address/>
        </complextype>
    <element> 
```

Main 是一个可重复的元素。我想检查用户名，如果所有节点的用户名中的值不相等，那么我需要为第一个节点用户名分配空白值。

我如何在转型中做到这一点？

我正在尝试如下：在变量中获取第一个用户名，然后使用 for-each 检查所有用户名。如果它不相等....但是我不能将空白值分配给第一个节点，因为我在第 n 个节点的用户名中的某个位置。

我正在考虑使用变量来表示 unmatched=true()，但是 xslt 不允许我们在声明后对变量进行更改。因此，即使是该选项也被排除在外。

我怎样才能做到这一点？帮我解决这个..

希望我清楚。

干杯钱德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:11:27.723

假设是您可以使用`foo`的元素的父元素的名称`main`

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="foo[some $m in main satisfies $m/username != main/username]/main[1]/username">
  <xsl:copy/>
</xsl:template>

</xsl:stylesheet> 
```

这是一些输入示例：

```
<root>
  <foo>
     <main>
       <input1/>
       <input2/>
       <input3/>
       <input4/>
       <input5/>
       <inside/>
       <username>u1</username>
       <address/>
     </main>
     <main>
       <input1/>
       <input2/>
       <input3/>
       <input4/>
       <input5/>
       <inside/>
       <username>u1</username>
       <address/>
     </main>
     <main>
       <input1/>
       <input2/>
       <input3/>
       <input4/>
       <input5/>
       <inside/>
       <username>u2</username>
       <address/>
     </main>
     <main>
       <input1/>
       <input2/>
       <input3/>
       <input4/>
       <input5/>
       <inside/>
       <username>u1</username>
       <address/>
     </main>
  </foo>
</root> 
```

当样式表与 Saxon 9.4 一起应用时，我得到的输出是

```
<root>
  <foo>
     <main>
       <input1/>
       <input2/>
       <input3/>
       <input4/>
       <input5/>
       <inside/>
       <username/>
       <address/>
     </main>
     <main>
       <input1/>
       <input2/>
       <input3/>
       <input4/>
       <input5/>
       <inside/>
       <username>u1</username>
       <address/>
     </main>
     <main>
       <input1/>
       <input2/>
       <input3/>
       <input4/>
       <input5/>
       <inside/>
       <username>u2</username>
       <address/>
     </main>
     <main>
       <input1/>
       <input2/>
       <input3/>
       <input4/>
       <input5/>
       <inside/>
       <username>u1</username>
       <address/>
     </main>
  </foo>
</root> 
```

第`username`一个的 the`main`现在是空的，因为有一个`main`与`username`其他的不同。

[编辑] 当答案被接受时，我有点困惑，但有评论说您需要 XSLT 1.0 解决方案。我将在下面提供一个 XSLT 1.0 样式表：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="foo[main[username != ../main/username]]/main[1]/username">
  <xsl:copy/>
</xsl:template>

</xsl:stylesheet> 
```

# cgal - Delaunay三角剖分：顶点存储Point_handle而不是Point

> ID：14872325
> 
> 赞同：0
> 
> 时间：2013-02-14T10:09:43.397
> 
> 标签：cgal

我将点存储在自定义容器中，我想在这些点的子集上构建 Delaunay 三角剖分。

由于容器中已经存在这些点，我不希望 Delaunay 三角剖分存储这些点的副本。

我的点类是从 Point_3 派生的，包含几个信息（布尔值和整数）。

为此，我创建了一个自定义 triangulation_vertex 类：

```
template < typename GT, typename Pt, typename DSVb = Triangulation_ds_vertex_base_3<> >
class Convection_vertex : public DSVb
{
public:

  typedef typename DSVb::Cell_handle Cell_handle;

  typedef GT Geom_traits;
  typedef typename GT::Point_3 Point;
  typedef typename Pt::Point_handle Point_handle;    

template < typename TDS2 >
struct Rebind_TDS {
  typedef typename DSVb::template Rebind_TDS<TDS2>::Other DSVb2;
  typedef Convection_vertex<GT, Pt, DSVb2> Other;
};

private:
  static int rank_id;
  int number_id;
  bool discovered;

  Point_handle _ph;

public:
  Convection_vertex() : DSVb(), number_id(rank_id++), discovered(false) {}

  Convection_vertex(const Point_handle& p) : DSVb(), _ph(p), number_id(rank_id++),   discovered(false) {}

  Convection_vertex(const Point_handle& p, const Cell_handle& c) : DSVb(c), _ph(p), number_id(rank_id++), discovered(false) {}

  Convection_vertex(const Cell_handle& c) : DSVb(c), number_id(rank_id++), discovered(false) {}

  const Point& point() const
  { return (*_ph); }

  Point& point()
  { return (*_ph); }

  void set_point(const Point& p){ }

  void set_point(const Point_handle& ph)
  { _ph = ph; }

   void set_point_handle(Point_handle ph)
  { _ph = ph; }

  const Point_handle& point_handle() const
  { return _ph; }

  Point_handle& point_handle()
  { return _ph; }
}; 
```

要在 Delaunay 三角剖分中插入一个点，我会：

```
DVertex_handle dvh = dt.insert(*p);
dvh->set_point_handle(p); 
```

其中 p 是一个 point_handle（即 My_point*）。

要删除 Delaunay 三角剖分中的一个点，我会：

```
dt.remove(dvh); 
```

其中 dvh 是一个 vertex_handle。

在三角剖分中插入点工作正常，但我在删除点时遇到问题。我的自定义顶点类不正确吗？

有更好的方法吗？

--edit-----

dt is the Delaunay triangulation:

```
typedef CGAL::Convection_vertex<K,Point> Conv_Vb3d;
typedef CGAL::Convection_cell<K> Ce3d;
typedef CGAL::Triangulation_data_structure_3<Conv_Vb3d,Ce3d > Tds3d;
typedef CGAL::Delaunay_triangulation_3<K,Tds3d > Dh;

Dh dt; 
```

--

@sloriot: Is this a good start ?

```
template < typename CK, bool UseStaticFilters, typename Pt >
struct Convection_traits
  : public Filtered_kernel_adaptor<
           Type_equality_wrapper<
               typename CK:: template Base< Convection_traits<CK, UseStaticFilters,Pt> >::Type,
               Convection_traits<CK, UseStaticFilters,Pt> >,
           UseStaticFilters >
{
    typedef Pt Point_3;

    [...] // functors

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:52:14.237

Here is what I have done to use my point_handle as point in the Delaunay_triangulation:

```
template < typename K_, typename Pt >   
class My_traits
{

  K_ K;  

 public:
  typedef Pt Point_3;
  typedef My_traits<K_, Pt> Self;

//triangulation traits

typedef typename K_::Segment_3 Segment_3;
typedef typename K_::Tetrahedron_3 Tetrahedron_3;
typedef typename K_::Triangle_3 Triangle_3;

typedef typename K_::Construct_segment_3 Construct_segment_3;
typedef typename K_::Construct_triangle_3 Construct_triangle_3;
typedef typename K_::Construct_tetrahedron_3 Construct_tetrahedron_3;

typedef typename K_::Compare_xyz_3 Compare_xyz_3;
typedef typename K_::Coplanar_orientation_3 Coplanar_orientation_3;
typedef typename K_::Orientation_3 Orientation_3;

Construct_tetrahedron_3 construct_tetrahedron_3_object () const{
    return K.construct_tetrahedron_3_object ();
}
Construct_triangle_3 construct_triangle_3_object () const{
    return K.construct_triangle_3_object ();
}
Construct_segment_3 construct_segment_3_object () const{
    return K.construct_segment_3_object ();
}
Compare_xyz_3 compare_xyz_3_object () const{
    return K.compare_xyz_3_object ();
}
Coplanar_orientation_3 coplanar_orientation_3_object () const{
    return K.coplanar_orientation_3_object ();
}
Orientation_3 orientation_3_object () const{
    return K.orientation_3_object ();
}

//delaunay triangulation traits

typedef typename K_::Line_3 Line_3;
typedef typename K_::Object_3 Object_3;
typedef typename K_::Ray_3 Ray_3;

typedef typename K_::Coplanar_side_of_bounded_circle_3 Coplanar_side_of_bounded_circle_3;
typedef typename K_::Side_of_oriented_sphere_3 Side_of_oriented_sphere_3;
typedef typename K_::Compare_distance_3 Compare_distance_3;

Coplanar_side_of_bounded_circle_3 coplanar_side_of_bounded_circle_3_object() const{
    return K.coplanar_side_of_bounded_circle_3_object();
}
Side_of_oriented_sphere_3 side_of_oriented_sphere_3_object() const{
    return K.side_of_oriented_sphere_3_object();
}
Compare_distance_3 compare_distance_3_object() const{
    return K.compare_distance_3_object();
}
}; 
```

# jquery - 用于不同分类按钮的 Jquery if 语句

> ID：14872329
> 
> 赞同：0
> 
> 时间：2013-02-14T10:10:13.440
> 
> 标签：jquery

我有 5 个按钮，它们都有不同的类（每个都有精美的图像），我希望能够在单击按钮时打开特定的活动类，并在单击另一个按钮时关闭。` --按钮的HTML--

```
 <ul>
 <li class="home">
  <a href="#home" class="buttonhome">HOME</a>
 </li>

 <li class="about">
   <a href="#about" class="buttonabout">ABOUT US</a>
 </li>

 <li class="otres">
 <a href="#otres" class="buttonotres">OTRES BEACH</a>
 </li>

 <li class="rates">
   <a href="#rates" class="buttonrates">FACILITIES <br /> & RATES</a>
 </li>

 <li class="contact">
  <a href="#contact" class="buttoncontact">CONTACT US</a>
 </li>
 </ul> 
```

`

我可以设法让 jQuery 切换一个按钮的类，但我被困在一个 if 语句或更好的语句中。

```
 --Jquery--

<script type="text/javascript">
    $(".buttonhome").click( function() {
        $(".activehome").removeClass("activehome");
        $(this).parent("li").addClass("activehome");
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:15:30.153

我会给你`<ul>`一个班级或一个 ID，然后给所有人`<li>`一个相同的活动班级。

```
 <ul id="menu">
 <li class="home">
  <a href="#home" class="buttonhome">HOME</a>
 </li>

 <li class="about">
   <a href="#about" class="buttonabout">ABOUT US</a>
 </li>

 <li class="otres">
 <a href="#otres" class="buttonotres">OTRES BEACH</a>
 </li>

 <li class="rates">
   <a href="#rates" class="buttonrates">FACILITIES <br /> & RATES</a>
 </li>

 <li class="contact">
  <a href="#contact" class="buttoncontact">CONTACT US</a>
 </li>
 </ul> 
```

JavaScript：

```
<script type="text/javascript">
    $("ul#menu li a").on('click', function() {
        $("ul#menu li.active").removeClass("active");
        $(this).parent("li").addClass("active");
    });
</script> 
```

CSS：

```
li.home { background-image: url(image1.jpg); }
li.home.active { background-image: url(image2.jpg); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:22:02.577

这将在 li 上添加类“activehome”、“activeabout”、“activeotres”、“activerates”、“activecontact”，具体取决于您单击的按钮，如果单击另一个按钮则删除。

```
$('ul li').find('a').on('click', function () {
        $('ul li').find('a').each(function () {
            $(this).parent().removeClass('active' + $(this).attr('href').replace("#", ""));
        });
        $(this).parent().addClass('active' + $(this).attr('href').replace("#", ""));
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:16:11.633

```
$('ul > li > a').click(function() {
    $('.active').removeClass('active');
    $(this).parent().addClass('active');
}) 
```

由于您的链接已经有 ID，因此没有理由也使用唯一的活动类，因为您可以简单地使用以下方式设置样式：

```
#home.active { ... }
#about.active { ... }
etc. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T10:19:28.800

你可以实现类似下面的逻辑；

("按钮").click(函数(){

//获取按钮id或类

// 在 if 语句中使用上面的 id 或 class 并做你喜欢做的事

});

# php - YUI 3 Uploader 在 IE 中的使用

> ID：14872340
> 
> 赞同：0
> 
> 时间：2013-02-14T10:10:40.957
> 
> 标签：php, javascript, yui

我正在使用 YUI 3 上传器。
我从给定的参考网址中举了这个例子：http:
[//yuilibrary.com/yui/docs/uploader/uploader-multiple.html](http://yuilibrary.com/yui/docs/uploader/uploader-multiple.html)

我有`IE.8`版本。
我创建了一个 php 文件说 test.php 并从给定的 url 编写了脚本，如下所示：

```
 <script src="http://yui.yahooapis.com/3.8.1/build/yui/yui-min.js"></script>
  <script>

  YUI({filter:"raw"}).use('uploader', function(Y) {
  Y.one("#overallProgress").set("text", "Uploader type: " + Y.Uploader.TYPE);
  if (Y.Uploader.TYPE != "none" && !Y.UA.ios) {
   var uploader = 
         new Y.Uploader({width: "250px",
               height: "35px",
               multipleFiles: true,
               swfURL: "http://localhost.com  /test/flashuploader.swf?t="  + Math.random(),
               uploadURL: "http://localhost.com/test/test.php",
               simLimit: 2,
               withCredentials: false
         });
  }); 
```

当我在 IE 中打开此页面时，没有任何反应，没有打开文件对话框来选择文件。

如果有人已经解决了这个问题，请建议我如何解决？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:00:31.997

```
 I have used all source code from below url:
   http://yuilibrary.com/yui/docs/uploader/uploader-multiple.html

   and 
   <script src="http://yui.yahooapis.com/3.8.1/build/yui/yui-min.js"></script>
   to    create instance the uploader.

   We need to just replace another version file of yui-min.js file as below
   <script src="http://yui.yahooapis.com/3.5.1/build/yui/yui-min.js"></script>

   Apart from js file we need to change these 
   swfUrl: http://mudomain.com/test/flashuploader.swf
   UploadeUrl: http://mudomain.com/test/uploader.php

   To Upload file on the server, just write the script in the given above page in
    the  uploadUrl "uploader.php" as

   <?php
   $uploadedPath = 'Uploaded_Files/';
    foreach ($_FILES as $fieldName => $file) {
       move_uploaded_file($file['tmp_name'], $uploadedPath.$file['name']);
    }
    ?>

    Now you will see all selected files will be uploaded.

   But there is limitation in the IE, We can upload 1 to 5 files at a time. 
```

# java - SpringJUnit4ClassRunner 是否为每个测试或类加载了上下文？

> ID：14872341
> 
> 赞同：4
> 
> 时间：2013-02-14T10:10:45.043
> 
> 标签：java, spring, testing

我的问题是某些测试失败了。我认为一个函数破坏了上下文，因此测试失败了。

Spring 是否为每个测试或每个测试类加载了新的上下文，或者只为测试运行加载了一次？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T10:18:45.667

开箱即用，没有配置更改 Spring 应该只为每个测试套件加载一次上下文。

> 默认情况下，一旦加载，配置的 ApplicationContext 将被重复用于每个测试。因此，每个测试套件只产生一次设置成本，随后的测试执行速度要快得多。在这种情况下，术语测试套件意味着所有测试都在同一个 JVM 中运行——例如，所有测试都从给定项目或模块的 Ant、Maven 或 Gradle 构建中运行。在不太可能的情况下，测试破坏了应用程序上下文并需要重新加载——例如，通过修改 bean 定义或应用程序对象的状态——可以将 TestContext 框架配置为在执行下一个之前重新加载配置并重建应用程序上下文测试。

来源：[http ://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html#testcontext-ctx-management](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html#testcontext-ctx-management)

# c# - Unity - 如何避免循环引用？

> ID：14872343
> 
> 赞同：1
> 
> 时间：2013-02-14T10:10:49.720
> 
> 标签：c#, asp.net-mvc, unity-container, circular-reference

我正在尝试使用 Unity 在我的 ASP.NET MVC 项目中实现依赖注入，并希望获得一些关于如何避免循环引用的建议。

在我的工作中，我们曾经实现服务定位器模式，它为应用程序的每个单独服务返回一个单例。

```
public class ServiceWrapper 
{
  private UserService _userService;
  private ProductService _productService;

  public UserService User
  {
    if(_userService == null) 
    {
      _userService = new UserService();
    }
    return _userService;
  }

  public ProductService Product
  {
    if(_productService == null) 
    {
      _productService = new ProductService();
    }
    return _productService;
  }
} 
```

然后在控制器中，您可以通过实例化 ServiceWrapper 和调用方法轻松访问所有服务，例如：

```
private ServiceWrapper _services = new ServiceWrapper();

public ActionResult Index()
{
  List<Product> products = _services.Product.GetProducts();
  return View(products);
} 
```

使用 Unity 设置 DI 轻而易举。我在 Application_Start() (global.asax) 中创建了一个容器，如下所示：

```
var container = new UnityContainer();
container.RegisterType<IUserService, UserService>(new ContainerControlledLifetimeManager());
container.RegisterType<IProductService, ProductService>(new ContainerControlledLifetimeManager());
container.RegisterType<IServiceWrapper, ServiceWrapper>(new ContainerControlledLifetimeManager());
DependencyResolver.SetResolver(new UnityDependencyResolver(container)); 
```

ServiceWrapper 注册为单例。并实现构造函数注入如下：

```
public class ProductController: Controller
{
  private IServiceWrapper _services;

  public ProductController(IServiceWrapper services)
  {
    _services = services;
  }

  public ActionResult Index()
  {
    List<Product> products = _services.Products.GetProducts();
    return View(products);
  } 
```

那效果很好。但后来我遇到了问题。

**我们希望每个服务也有一个包含 ServiceWrapper 的属性，以便您可以轻松地从另一个服务访问其他服务**，如下所示：

```
public class ProductService
{
   private IServiceWrapper _services;

  public ProductService(IServiceWrapper services)
  {
    _services = services;
  }

  public IServiceWrapper Services { get { return _services; } }
} 
```

但是当我在各个服务中实现 ServiceWrapper 的构造函数注入时，由于循环引用，它导致了 stackoverflow 异常。

我读到 Unity 不支持循环引用。有没有解决这个问题的（可靠的）方法。或者我应该实现不同的架构？如果是这样，你能推荐一个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:17:46.767

通常这样做的方式是仅声明您需要的服务并将它们注入 ctor。不要注入只包含所有内容的“ServiceWrapper”。注入你需要的东西。随着容器构建您的类型，您不必担心提供服务。他们会在那里。

开发工作流程通常是这样的：

1.  添加一个新的依赖注入字段
2.  删除现有的ctor
3.  使用 Resharper 重新生成 ctor：alt+ins，生成 ctor。

# sql-server - 从多个表中删除一条记录

> ID：14872345
> 
> 赞同：0
> 
> 时间：2013-02-14T10:11:04.417
> 
> 标签：sql-server, vb.net, winforms, tsql, ado.net

已经为每个科目（例如英语语言、数学）创建了一个表，并且学生表与每个科目表相关，如果有人可以编辑下面的代码以使我能够执行删除命令来删除一个，我将不胜感激从这些多个表中记录。

一个重要的问题是应该有一种方法来执行删除命令，这样相关记录也可以从任何其他主题表中删除，这些记录将在未来引入新主题时创建。

```
Dim cd As String

If txtName.Text = "" And cboDay.Text = "" And cboMonth.Text = "" And txtYear.Text = "" And lblAge.Text = "" And radioMale.Checked = False Or RadioFemale.Checked = False And txtGName.Text = "" And txtMPhone.Text = "" And txtEmail.Text = "" And txtAddress.Text = "" And txtCity.Text = "" And cboRegion.Text = "" And PictureBox1.ImageLocation = "" Then
    MessageBox.Show("There is no record selected to delete. Search for the record to delete.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
Else
    cd = MessageBox.Show("You are about to delete this record. Are you sure you want to delete?", "Confirm Delete", MessageBoxButtons.YesNo, MessageBoxIcon.Question)
    If cd = vbYes Then
        cmd = New SqlCommand("Delete from StudentDetails.Registration where StudentId='" & txtStudentId.Text & "'", cn)
        cmd.ExecuteNonQuery()

        cmd = New SqlCommand("Delete from StudentDetails.Students where StudentId='" & txtStudentId.Text & "'", cn)
        cmd.ExecuteNonQuery()

        cmd = New SqlCommand("Delete from ProgramDetails.EnglishLanguage where StudentId='" & txtStudentId.Text & "'", cn)
        cmd.ExecuteNonQuery()

        MessageBox.Show("Record deleted", "Deleted", MessageBoxButtons.OK, MessageBoxIcon.Information)
        Showgrid()
        txtStudentId.Clear()
        txtName.Clear()
        cboDay.Text = ""
        cboMonth.Text = ""
        lblAge.Text = ""
        txtNationality.Clear()
        If radioMale.Checked = True Then
            Sex = ""
        End If
        cboStudentType.Text = ""
        cboHouse.Text = ""
        cboRoom.Text = ""
        txtGName.Clear()
        txtMPhone.Clear()
        txtHPhone.Clear()
        txtEmail.Clear()
        txtAddress.Clear()
        txtCity.Clear()
        cboRegion.Text = ""
        PictureBox1.Image = PictureBox1.ErrorImage
        txtStudentId.Focus()
    End If
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:15:02.103

你为什么不试试[DELETE CASCADE](http://msdn.microsoft.com/en-us/library/ms186973%28v=sql.105%29.aspx)。它比在代码中手动执行要好。

> 通过使用级联参照完整性约束，您可以定义 SQL Server 在用户尝试删除或更新现有外键指向的键时执行的操作。
> 
> **ON DELETE CASCADE** 指定如果尝试删除具有由其他表中现有行中的外键引用的键的行，则包含这些外键的所有行也将被删除。

至于您提供的代码，命令应如下所示：

```
cmd = New SqlCommand("Delete from StudentDetails.Registration where StudentId=" & Integer.Parse(txtStudentId.Text), cn) 
```

尽管您应该使用参数化查询来避免 Sql Injection ：

```
cmd = New SqlCommand("Delete from StudentDetails.Registration where StudentId = @StudentId" , cn)
cmd.Parameters.AddWithValue("@StudentId", Integer.Parse(txtStudentId.Text)) 
```

# android - 刷新android中的所有视图？

> ID：14872354
> 
> 赞同：8
> 
> 时间：2013-02-14T10:11:34.473
> 
> 标签：android, android-layout

我在whatsup之类的消息传递平台上工作。当我发送消息时，我必须更新屏幕，因为我正在数据库中获取数据。当我按下发送按钮时，我必须更新视图。我用谷歌搜索，但我不能确切的解决方案。有人可以帮助我吗？

编辑：

我的代码：

```
RelativeLayout layout=new RelativeLayout(this);
                LayoutParams lparams = new LayoutParams(
                        1200,LayoutParams.WRAP_CONTENT);
                layout.setLayoutParams(lparams);
                //layout.setBackgroundResource(R.drawable.bubble);
                // Creating a new TextView
                TextView tv = new TextView(this);
                tv.setText(msgdesc[i]);
                layout.setGravity(Gravity.RIGHT);
                tv.setPadding(30, 10, 0, 0); 
                layout.addView(tv);
                bubbleLayout.addView(layout); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T10:14:49.983

您将需要调用`requestLayout()`或`invalidate()`取决于您在视图中准确更新的内容

如果您只需要`View`重绘，请致电`invalidate()`

如果您更改`View`边界（例如大小）调用`requestLayout()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T10:20:39.547

如果您使用带有列表适配器的列表视图，那么您必须使用`listadapter.notifyDataSetChanged();`它来使用新数据更新您的列表视图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T10:16:14.550

你试过`view.invalidate()`吗？ [http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)

**绘画**

> 通过遍历树并渲染与无效区域相交的每个视图来处理绘图。因为树是按顺序遍历的，这意味着父母将在他们的孩子之前（即之后）绘制，兄弟姐妹按照它们在树中出现的顺序绘制。如果您为 View 设置了背景可绘制对象，则 View 将在回调其 onDraw() 方法之前为您绘制它。
> 
> 请注意，框架不会绘制不在无效区域中的视图。
> 
> 要强制绘制视图，请调用`invalidate()`.

您可以尝试像这篇文章中的回复使视图组无效： [如何强制整个布局视图刷新？](https://stackoverflow.com/questions/5991968/how-to-force-an-entire-layout-view-refresh)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T13:18:46.390

最后，如果您的布局中只有一个 TextView，请尝试以下操作：

```
//Supposing that msgdesc is a class field.

void myRefreshFunction(RelativeLayout l)
{
                if(l != null)
                {
                  l.removeAllViews();  
                  TextView tv = new TextView(this);
                  tv.setText(msgdesc[i]);
                  layout.setGravity(Gravity.RIGHT);
                  tv.setPadding(30, 10, 0, 0); 
                  layout.addView(tv);
                }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-15T00:58:23.587

见[戴安娜的回答](https://groups.google.com/forum/#!topic/android-developers/FL5dlnCMjQo)：

invalidate() 只是导致视图被重绘：http: [//developer.android.com/reference/android/view/View.html#invalidate()](http://developer.android.com/reference/android/view/View.html#invalidate())

requestLayout() 要求视图通过新的度量/布局传递（然后重绘）：http: [//developer.android.com/reference/android/view/View.html#requestLayout()](http://developer.android.com/reference/android/view/View.html#requestLayout())

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-13T23:27:27.433

如果您正在构建一个消息传递应用程序并将项目添加到某种列表中，我建议使用 RecyclerView 和 Recyclerview 适配器来实现您想要做的事情。当列表的大小增加时，您的相对布局将不会滚动，`RecyclerView`但是会。最重要的是，`RecyclerView`通过非常长的列表为您提供更多性能，因为从名称`~Recycle~rView`中，它回收了以前的项目，从而提高了性能。

这是一个关于如何实现你想要的合理的教程： [https ://blog.sendbird.com/android-chat-tutorial-building-a-messaging-ui](https://blog.sendbird.com/android-chat-tutorial-building-a-messaging-ui)

（我不隶属于 SendBird 或任何东西，这只是你 google 时的第一个结果：RecyclerView 聊天示例）

# sharepoint - 从 TFS 2010 升级到 TFS 2012 后共享点丢失

> ID：14872355
> 
> 赞同：0
> 
> 时间：2013-02-14T10:11:38.513
> 
> 标签：sharepoint, upgrade

我最近从 Team Foundation Server 2010 升级到 Team Foundation Server 2012，在数据库恢复并且 Team Foundation Server 2012 在新机器上运行后，我发现我的新 TFS 2012 正在链接到我的旧 TFS 2010 Sharepoint，所以我在我的新机器上安装了 Sharepoint 的扩展并将 TFS 2012 与新的 Sharepoint 链接。

为了确保它不会链接到我的旧机器，我将其关闭。所以我的新 Sharepoint 可以在 tfs:8080/tfs 上访问，但我无法添加团队项目，如果我想添加新集合，它会将其添加到 tfs:8080/sites/DefaultCollection。

在将新团队项目添加到升级项目时，我收到以下错误消息：TF218017,TF250044

为了升级，我使用[了 http://blog.damianbrady.com.au/2012/06/03/upgrading-tfs2010-tfs2012-rc-done/](http://blog.damianbrady.com.au/2012/06/03/upgrading-tfs2010-tfs2012-rc-done/)

有谁知道我如何在 tfs:8080/tfs 上配置 Sharepoint 站点？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:18:07.910

当创建 TFS 团队项目的用户没有在该 SharePoint 网站集上创建网站的适当权限时，会发生这些特定错误。将尝试创建团队项目的用户添加为您用于 TFS 的网站集的网站集管理员。

# codeigniter - Codeigniter - 从 ajax 响应中分离两个视图

> ID：14872358
> 
> 赞同：0
> 
> 时间：2013-02-14T10:11:45.437
> 
> 标签：codeigniter, jquery

我正在使用 Ajax 将数据存储到数据库中，并且我在控制器函数中加载了两个视图。现在，作为回应，我得到了两个视图的两个内容。谁能告诉我如何将两个 div 分开？

我的ajax代码如下：

```
$.ajax({
        url:base_url+'welcome/add_group_to_archieve',
        type:'post',
        data:data,
        success:function(response){
            $(".group_value").html(response);               
            alert(response);
            get_groups_list();
            $(".archieves_list").html(response);
        },
        error:function(){
            alert('ajax failure');
        }

    }); 
```

控制器：

```
public function add_group_to_archieve() {
        $user_id = $this->tank_auth->get_user_id();
        $archieve_selected = $this->input->post('archieve_selected');
        $this->s_model->insert_as_archieve($archieve_selected);
        $data['get_archieved_groups'] = $this->s_model->get_archieved_groups();
        $data['retrieved_group_values'] = $this->s_model->retrieve_group_post();
        $data['file_id'] = $this->s_model->get_profile_picture($user_id);
        $data['edited_content'] = $this->s_model->get_save($user_id);
        $this->load->view('ajax_response_archieved_groups_list', $data);
        $this->load->view('ajax_response_archieved_groups_select', $data);
    } 
```

模型：

```
 function get_archieved_groups() {
        $this->db->select('*');
        $this->db->where('archieved', 'archieved');
        $data = $this->db->get('groups');

        return $data->result();
    } 
```

div1：

```
<div class="archieves clearfix" id="ajax_response_archieved_groups_list">
    <div class="archieves_list">
        <h6>Archieved Group Tags</h6>
        <? //php echo '<pre>'; print_r($get_archieved_groups[0]); echo '</pre>'; exit; ?>
        <ul><?php
        if (isset($get_archieved_groups)) {
            foreach ($get_archieved_groups as $row) {
                ?>
                    <li><?php if (isset($row->group_name)) { ?><?php
                echo $row->group_name;
            }
                ?></li>

                    <?
                }
            }
            ?>
        </ul>
    </div>
</div> 
```

div2：

```
<div class="creating archieves" id="ajax_response_archieved_groups_select1">
    <select id="archieves_select_box">
        <option value="<?php echo "All"; ?>"><?php echo "All"; ?></option>
        <?php foreach ($get_archieved_groups as $row) { ?>

            <option value="<?php echo $row->group_name; ?>"><?php echo $row->group_name; ?></option>        
        <?php } ?>

    </select>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:02:14.023

明白了，只是做了两个单独的函数来加载不同的视图，并调用了两个不同的 ajax 响应。以下是我的ajax代码：

```
$.ajax({
        url:base_url+'welcome/add_group_to_archieve',
        type:'post',
        data:data,
        success:function(response){
            $(".group_value").html(response);               
            alert(response);
            get_groups_list();
            $(".archieves_list").html(response);
            archieved_select();
},
error:function(){
    alert('ajax failure');
}     
});
function archieved_select(){
     $.ajax({
    url:base_url+'welcome/add_group_to_archieve_select',
    type:'post',
    data:data,
    success:function(response){
    $("#ajax_response_archieved_groups_select1").html(response);
},
error:function(){
    alert('ajax failure');
}    
}); 
```

# wso2esb - ESB 4.6.0。路由器中介

> ID：14872363
> 
> 赞同：0
> 
> 时间：2013-02-14T10:11:57.017
> 
> 标签：wso2esb, mediator

我在 ESB 4.0.0 中使用了路由器中介。当我们将 ESB 升级到 4.6.0 时，路由器中介器不起作用。并且不存在于调解员列表中。

ESB 4.6.0 中是否仍然存在路由器中介？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:27:32.303

路由器中介已被弃用。请改用条件路由器（[http://docs.wso2.org/wiki/display/ESB460/Conditional+Router+Mediator](http://docs.wso2.org/wiki/display/ESB460/Conditional+Router+Mediator)）。

# jquery - 最新版本的 jQuery 破坏了浮动缩放？

> ID：14872366
> 
> 赞同：1
> 
> 时间：2013-02-14T10:12:03.403
> 
> 标签：jquery, charts, flot

最新版本的 jQuery 似乎破坏了 Flot 缩放。放大会导致图表被清空和空白。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T15:03:18.430

[这是在master](https://github.com/flot/flot/zipball/master)中修复的。您的选择是使用它，恢复到早期版本的 jQuery，或者将修复移植到本地 0.7 直到 0.8 的最终版本。

# xsl-fo - XSL-FO 在一行或 fo:leader 上写入文本

> ID：14872369
> 
> 赞同：3
> 
> 时间：2013-02-14T10:12:22.173
> 
> 标签：xsl-fo, apache-fop

我正在从 xml 和 xsl-fo 和 Apache FOP 创建一个 pdf 文件，我需要在一行上写文本。我的意思是类似于手动编译的表格，您可以在其中写姓名，姓氏等。类似这样的内容： `Name: ______John_________`
但在名称下也有行。我试图使用 fo:leader。一切都在一个表格单元格中。使用此代码

```
 <fo:table-cell column-number="3" font-size="10pt" number-columns-spanned="4">
   <fo:block space-before="2mm" wrap-option="no-wrap" overflow="visible" margin-top="2mm" margin-left="3mm">
     <xsl:value-of select="$element/value"/>
   </fo:block>
   <fo:block wrap-option="no-wrap" overflow="visible" margin-left="2mm" margin-top="0mm">
     <fo:leader leader-length="130mm"
                leader-pattern="rule"
                rule-style="solid"
                rule-thickness="0.1mm"
                color="black"></fo:leader>
   </fo:block>
 </fo:table-cell> 
```

我得到一条线，但它不是在单词下面，如果我为前导块设置**margin-top="-3mm" ，什么都没有改变。**我怎样才能得到这样的结果？还有其他方法吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T08:17:50.020

我用另一种方式得到了结果：`fo:block border-bottom="solid" border-bottom-width="0.2mm"`成功了。需要有下划线的值（本例中为 John）为`<fo:leader />`空。`</fo:block>`

```
<fo:table-row>
    <fo:table-cell font-size="10pt">
        <fo:block>
            <xsl:text>Nome:</xsl:text>
        </fo:block>
    </fo:table-cell>
    <fo:table-cell font-size="10pt">
        <fo:block border-bottom="solid" border-bottom-width="0.2mm">
            <xsl:text>John</xsl:text>
            <fo:leader />
        </fo:block>
    </fo:table-cell>
</fo:table-row> 
```

[![在此处输入图像描述](../Images/39900b5b4e2b6f99879d9e346c94a80a.png)](https://i.stack.imgur.com/VSeou.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T23:47:26.303

这有点像黑客，但你可以使用`fo:list-block`......

**XSL-FO**

```
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <fo:layout-master-set>
        <fo:simple-page-master master-name="my-page" page-width="8.5in" page-height="11in">
            <fo:region-body margin="1in" margin-top="1.5in" margin-bottom="1.5in"/>
        </fo:simple-page-master>
    </fo:layout-master-set>
    <fo:page-sequence master-reference="my-page">
        <fo:flow flow-name="xsl-region-body">
            <fo:table width="50%">
                <fo:table-body>
                    <fo:table-row>
                        <fo:table-cell border-style="solid" padding="4px">
                            <fo:list-block provisional-distance-between-starts="15%">
                                <fo:list-item>
                                    <fo:list-item-label end-indent="label-end()">
                                        <fo:block>Name:</fo:block>
                                    </fo:list-item-label>
                                    <fo:list-item-body start-indent="body-start()">
                                        <fo:block text-align="center" border-bottom-style="solid">John</fo:block>
                                    </fo:list-item-body>
                                </fo:list-item>
                            </fo:list-block>
                        </fo:table-cell>
                    </fo:table-row>
                </fo:table-body>
            </fo:table>
        </fo:flow>
    </fo:page-sequence>
</fo:root> 
```

**PDF 输出**（使用 FOP 1.0）

![在此处输入图像描述](../Images/b3a6ca6536dc657fe9d97438ba09b371.png)

您可能需要使用`provisional-distance-between-starts`来查看对您的数据有用的方法。

# java - 在没有 ANT 或 Maven 的情况下将 CSV 转换为 JSON

> ID：14872375
> 
> 赞同：-4
> 
> 时间：2013-02-14T10:12:41.537
> 
> 标签：java, javascript, json, apache-poi

我试图将 CSV 文件转换为 JSON 格式，但我不知道 ANT 或 MAVEN。我使用过 Apache POI。我正在尝试使用 Apache POI 来做到这一点。有没有其他方法可以做到这一点？

这就是我试图做的，但出现以下错误--java.lang.ClassNotFoundException: org.openxmlformats.schemas.spreadsheetml.x2006.main.CTSheet

// 开始构建 JSON。

```
 JSONObject json = new JSONObject();
    JSONArray rows=new JSONArray();

    for ( Iterator<org.apache.poi.ss.usermodel.Row> rowsIT = sheet.rowIterator(); rowsIT.hasNext(); )
    {
        org.apache.poi.ss.usermodel.Row row = rowsIT.next();
        JSONObject jRow = new JSONObject();

        // Iterate through the cells.
        JSONArray cells = new JSONArray();
        for ( Iterator<Cell> cellsIT = row.cellIterator(); cellsIT.hasNext(); )
        {
            Cell cell = cellsIT.next();
            cells.put( cell.getStringCellValue() );
        }
        jRow.put( "cell", cells );
        rows.put( jRow );
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:16:57.320

简单的CSV可以通过简单的java编码转换成Json如下

首先使用加载文件

```
BufferedReader.readLine() 
```

然后使用

```
String.split(",") // to get the value from each line 
```

并使用将每个值写入输出

```
BufferedWriter //  with the necessary JSON braces and quoting 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:58:09.530

我的问题得到了答案，我阅读了我的 CSV usig BufferReader 并使用 [http://code.google.com/p/google-gson/将其转换为 JSON](http://code.google.com/p/google-gson/)

# python - Python MySQL将行添加到一个变量

> ID：14872377
> 
> 赞同：0
> 
> 时间：2013-02-14T10:12:47.577
> 
> 标签：python, mysql, variables, rows

我想将 MySQL 查询的结果存储在一个变量中（Python）

```
sql = "SELECT * FROM movies"
result = cursor.fetchall()
for row in result:
    movies = row[1]

print(movies) 
```

（只打印最后一行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:15:05.723

`movies = row[1]`这`movies`是一个变量，将只有 for 循环中的最后一个元素。

你需要创建一个列表`movies`

`movies = []`

做

```
for row in result:
    movies.append(row[1])

print(movies) 
```

# delphi - 在运行时让形状显示在表单上

> ID：14872382
> 
> 赞同：-5
> 
> 时间：2013-02-14T10:13:18.643
> 
> 标签：delphi, delphi-xe2

我有一个按钮，点击后，我希望 TMachine（又名 TShape）出现在表单上。目前我没有收到任何错误，但它从未出现在表单上。

按钮点击代码

```
procedure TfDeptLayout.bAddMachineClick(Sender: TObject);
var
  machine: TMachine;
  shapeAsset,
  shapeShape,
  shapeNumber,
  shapeName: string;
begin
  if not OkToAdd() then
  begin
    ShowMessage('Please fill out form correctly!');
    Exit;
  end;

  ShapeAsset := Edit2.text;
  ShapeShape := Combobox1.Text;
  ShapeNumber := Edit3.Text;
  ShapeName := Edit1.Text;

  if sub = false then
    begin
      machine := TMachine.Create(self);
      machine.Parent := Self;
      machine.PlaceShape(0, FDB.GetWW(ShapeShape), FDB.GethW(ShapeShape), 
        '20', '20', ShapeName, ShapeNumber, ShapeAsset)
      //show save button
      //lockout add machine button
      //let user place machine top / left.
      //save all locations
      //save top and left for each tmachine to database
      //lockout save button
      //show add machine button
    end;

  if sub then
    ShowMessage('auto save form');

  ShowMessage('congrats you added a machine');        
end; 
```

如果需要，我可以展示 TMachine 单元吗？

```
type    
  TMachine = class(TShape)
  private
    FOnMouseEnter: TNotifyEvent;
    procedure CMMouseEnter(var Message: TMessage); message CM_MOUSEENTER;
  protected
    procedure DoMouseEnter; virtual;
  published
    property OnMouseEnter: TNotifyEvent Read FOnMouseEnter write FOnMouseEnter;
  public
    mnName: string;
    mnAsset: string;
    mnNumber: string;
    mnIsPanel: string;
    mnBasicName: string;
    mnLShape: string;
    procedure PlaceShape(AM, sizeW, sizeH: Integer; ptop, pleft, name, order, 
      asset: string);
  end;

implementation

uses
  deptlayout;

procedure TMachine.CMMouseEnter(var Message: TMessage);
begin
  DoMouseEnter;
  inherited;
end;

procedure TMachine.DoMouseEnter;
begin
  if Assigned(FOnMouseEnter) then
    FOnMouseEnter(Self);
end;

procedure TMachine.PlaceShape(AM, sizeW, sizeH: Integer; ptop, pleft, name, 
  order, asset: string);
var
  myLabel: TLabel;
begin
  if ptop = '0' then
    Top := 136
  else
    Top := StrToInt(ptop);

  Width := sizeW;
  Height := sizeH;

  if pleft = '0' then
    Left := MyDataModule.fDB.LastX + 2  //set left
  else
    Left := StrToInt(pleft);

  MyDataModule.fDB.lastx := Left + sizeW;

  if AM = 1 then  //if in edit mode..
  begin
    //create label put inside the shape.
    myLabel := TLabel.Create(FDeptLayout);
    mylabel.Parent := FDeptLayout;
    mylabel.Left := Left;
    mylabel.Top := Top + 8;
    mylabel.Caption := '#' + mnNumber;
  end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:17:05.170

当然不行！

添加机器的代码在里面`if not OkToAdd() then`，所以它只会在`not OkToAdd`. 但！即使是这种情况，你`Exit`在运行代码之前！因此，代码永远不会运行！

可能你的意思是这样的：

```
if not OkToAdd then
begin
  ShowMessage('Please fill out form correctly!');
  Exit;
end; //END!!!!!! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T10:44:07.727

总结一下我上面的评论：

正如您在编辑中所做的那样，将 fDeptLayout 的引用更改为 Self：

```
procedure TfDeptLayout.bAddMachineClick(Sender: TObject);
var
  machine : TMachine;
  shapeAsset,
  shapeShape,
  shapeNumber,
  shapeName : string;
begin
if not OkToAdd() then
begin
  showmessage('Please fill out form correctly!');
  Exit;
End;

  shapeAsset := edit2.text;
  ShapeShape := Combobox1.Text;
  ShapeNumber := Edit3.Text;
  ShapeName := Edit1.Text;

  if sub = false then
    begin
      machine := TMachine.Create(self);
      machine.Parent := Self;
      machine.PlaceShape(0,FDB.GetWW(ShapeShape),FDB.GethW(ShapeShape),'20','20',ShapeName,ShapeNumber,ShapeAsset)
      //show save button
      //lockout add machine button
      //let user place machine top / left.
      //save all locations
      //save top and left for each tmachine to database
      //lockout save button
      //show add machine button
    end;

  if sub then
      showmessage('auto save form');

showmessage('congrats you added a machine');

end; 
```

为避免将来出现混淆，请删除 Delphi IDE 为除主窗体和任何其他自动创建的窗体之外的所有窗体创建的全局窗体变量 - 如果需要，它们很少，并且“污染命名空间”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:40:24.587

不知道为什么这解决了它，但是在尝试通过放置找到 Machine 的父级之后

```
showmessage('Machine Parent: '+Machine.parent.name); 
```

它给出了访问错误。

已删除

```
Machine.parent := self; 
```

编译，构建。然后阅读添加

```
Machine.parent := self; 
```

一切正常。

# iphone - 故事板界面在设备上不起作用

> ID：14872384
> 
> 赞同：0
> 
> 时间：2013-02-14T10:13:30.633
> 
> 标签：iphone, ios, ipad, uistoryboard

我有一个 iPhone 的日历视图，我将它复制到 ipad 视图中，这样做我的故事板界面出现了问题，我在故事板上所做的更改没有传递给设备，这就是问题所在，我的示例显示的是正在构建的日历：

![故事板界面中的设计](../Images/10966078632cc2bbe6f3131a1d5363d3.png)

![iPad 上的视图](../Images/26b3d1fd9c76b2f4a232b21826cbe0a8.png)

你有没有看到，有些地方很不对劲，我编辑了自动调整大小但仍然没有改变，这是什么巫术？

在此先感谢并为我的英语不好感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:29:16.867

日历视图很可能是`view`关联视图控制器的属性。在这种情况下，它会默认尝试占用整个屏幕。

您需要将日历视图添加为**视图**控制器主视图的子视图。保持控制器与 iPad 和 iPhone 兼容的最佳策略是将 iPhone 也更改为此方案。（即主`view`视图和子视图`calendarView`应具有相同的大小和边界`view`）。

# maven - 如何将批处理文件挂接到 Maven？

> ID：14872385
> 
> 赞同：1
> 
> 时间：2013-02-14T10:13:32.367
> 
> 标签：maven, batch-file, hook

我需要挂钩或附加批处理文件到 Maven

所以如果让我说我输入 mvn package

并且没有错误，然后我创建的批处理文件将开始运行。

有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T10:23:24.083

你可以很容易地做到这一点，[`maven-exec-plugin`](http://www.mojohaus.org/exec-maven-plugin/)并将其与包阶段链接：

```
 <build>
      <plugins>
        <plugin>
          <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2</version>
            <executions>
              <execution>
                <id>runbatchfile</id>
                <phase>package</phase>
                <goals>
                  <goal>exec</goal>
                </goals>
              </execution>
            </executions>
            <configuration>
              <executable>c:\path\to\file.bat</executable>
            </configuration>
          </plugin>
        </plugins> 
```

使用此配置：您的批处理文件将在与包阶段关联的默认目标之后执行。

# android - 从 Eclipse 将创建的应用程序运行到 android 时出现分段错误

> ID：14872387
> 
> 赞同：0
> 
> 时间：2013-02-14T10:13:39.670
> 
> 标签：android

在将一个示例项目从 eclipse 运行到我的 android 设备时，我收到
“ActivityManager：Segmentation fault”。

一个月前，当我的 android 版本是 JB 4.1 时，没有任何问题。

我的手机是 Galaxy nexus
android 版本 =
从三星网站安装的 JB 4.2.1 Rooted 驱动程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:03:43.367

我通过试错法得到了答案..

```
 Make sure your sdk and adt are of latest version.  
  If the issue still there then its due to the rom installed.   

    1\. Some custom roms may leads to this issue.   
    2\. Installation of busybox may lead to this issue.
    3\. Corrupted OS installation. 
```

**这可以通过擦除所有数据并将库存 rom 放回来解决。**

# c# - 我可以在 Windows Phone 7.1 及更高版本中使用蓝牙串口吗？

> ID：14872388
> 
> 赞同：1
> 
> 时间：2013-02-14T10:13:39.980
> 
> 标签：c#, windows-phone-7, visual-studio-2012, bluetooth

我想为 Windows Phone 应用商店开发一个应用程序，通过蓝牙与我汽车的 OBD2 端口进行通信。

长话短说，该应用程序将使用蓝牙串行端口发送一个十六进制值并检索 ECU 寄存器中的相应值。有一个名为 Torque 的安卓应用程序可以做到这一点。

我不知道如何使用串行端口。提到的唯一蓝牙功能是高级功能，如推送对象、配对等。但与设置波特率或写入特定 COM 端口无关。

这在 WP7/* 上可行吗？或者，我怎样才能*使*这成为可能并让我的应用程序获准分发？

更新：我还没有接触到 WP8 设备，所以我无法验证这是否可以使用 SSP。

如果您来这里寻找替代品，请注意：您也不能连接到 ad-hoc wifi 连接，因此基于妻子的 OBD2 适配器也不好。连接到后者有一种丑陋的方式，即在您的汽车中安装一台笔记本电脑，该笔记本电脑同时以 ad-hoc 模式连接到该设备，并且还充当 wifi 热点。这是完全不切实际的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:20:19.817

Windows Phone 7.x 的公共 API 无法使用蓝牙串行端口 (SSP)。正如您已经猜到的那样，如果私有 API 被 P/调用或以其他方式使用，该应用程序可能不会被市场批准。

考虑升级到 Windows Phone 8，因为蓝牙 SSP 在那里部分可用，例如，请参阅[诺基亚开发者网站](http://www.developer.nokia.com/Community/Wiki/Introduction_to_Bluetooth_support_on_Windows_Phone_8#Serial_Port_Profile_.28SSP.29)。

# php - 如何重新排序内联块元素列表以填充所有空白空间？

> ID：14872390
> 
> 赞同：0
> 
> 时间：2013-02-14T10:13:45.953
> 
> 标签：php, jquery, html, css, list

我需要重新排序具有属性`display: inline-block`且未定义宽度的元素列表以填充所有空白空间。

你可以通过这个例子理解我的意思：

[http://jsbin.com/ozuxip/1/edit](http://jsbin.com/ozuxip/1/edit)

如您所见，在第一个列表中，在“Not so long text”附近有很多空白，而在第二个列表中，该空间填充了两个足够短的元素以填充空间。我需要自动化它。

在此示例中，您可以使用红色矩形看到“空白”是什么 [http://jsbin.com/ozuxip/7/edit](http://jsbin.com/ozuxip/7/edit)

我可以使用 PHP、jQuery、CSS 等。你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:06:00.070

如果我正确理解了您的问题，您基本上想要不同宽度的元素来创建某种整齐的网格。如果是这样，您可以尝试使用同位素插件：http: [//isotope.metafizzy.co/](http://isotope.metafizzy.co/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:48:16.480

如果我理解正确，您想删除 LI 之间的空格吗？这就是我得到的。将整个 UL 封装在父元素中。

```
<div id="test">
<ul class="discussions">
    <li class="discussion btn btn-primary">Not so long text</li>
    <li class="discussion btn btn-primary">Very very long text with lot of words.</li>
    <li class="discussion btn btn-primary">Another long text foobar.</li>

    <li class="discussion btn btn-primary">I'm short</li>
    <li class="discussion btn btn-primary">I'm so short</li>
    <li class="discussion btn btn-primary">And me?</li>
    <li class="discussion btn btn-primary">Shut up</li>
    <li class="discussion btn btn-primary">Ok, sorry... peace bro</li>
</ul>
</div> 
```

然后，将其添加到您的 CSS

```
#test{
  font-size: 0px;
}

li
{
  margin: 0px !important;
  font-size: 12; //this can be varied depending on your desired font size
} 
```

# java - 在 Antlr 3 中生成自定义 JavaDoc

> ID：14872391
> 
> 赞同：1
> 
> 时间：2013-02-14T10:13:49.897
> 
> 标签：java, antlr, javadoc, antlrworks

我为我的公司在 Antlr 3 中实现了一种语法语言。目前，生成代码时没有注释。我想对注释进行编码，以便出现自定义注释。例如：

```
/**
* This class does something.
* @author name
*/
public class GrammarLanguageExample() {
} 
```

如下所示的语法语言示例：

```
grammar Example;

options {
output=AST;
}

@header {
package com.example;
}

@rulecatch {
// ANTLR does not generate its normal rule try/catch
catch(RecognitionException e) {
    throw e;
}
}

insert      : 'INSERT INTO table' 'VALUES';
QUOTE       : '"';
SPECIALCHAR : '-'|'~'|;
STRING  : QUOTE('a'..'z'|'A'..'Z'|SPECIALCHAR|WS)+QUOTE;
WS: (' '|'\t'|'\f'|'\n'|'\r')+ { $channel = HIDDEN;}; // hide token from parser 
```

上面的语法只是一个例子，并不是完整的语法。当代码由 AntlrWorks 3.4 生成时，当前会发生什么：

我得到两个 Java 文件：ExampleLexer 和 ExampleParser。

在 ExampleLexer 中，没有包信息。我希望它进入 com.example 包，而 ExampleParser 包含包 com.example。每次更改语法时，我都必须输入 com.example 以编译 Lexer 代码。如何更改语法中的代码以便添加包信息？

另外，我将如何添加自定义 JavaDoc 注释？我想要这种格式：

```
package com.example;

Then import statements;

/**
* This class is used for Lexer.
* @author name
*/
public class ExampleLexer() {
}

package com.example;

Then import statements

/**
* This class is used for parsing.
* @author
*/
public class ExampleParser() {
} 
```

我还想在包信息之前删除自动生成的注释，它告诉语法是什么时候生成的。这怎么可能？

我希望你能帮忙。我在 Google 上进行了搜索，但找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:30:50.317

> 在 ExampleLexer 中，没有包信息。[...]如何更改语法中的代码以便添加包信息？

对于组合语法文件（一个同时生成词法分析器和标记解析器的文件），指定包名称需要指定两个`header`部分：一个用于词法分析器，一个用于分析器。正如您所发现的，`@header`仅适用于解析器。这是一个使用两个标题部分的示例：

```
@parser::header {
    package com.example;
    //parser's imports go here.
}

@lexer::header { 
    package com.example;
    //lexer's imports go here.
} 
```

> 另外，我将如何添加自定义 JavaDoc 注释？

我认为组合语法只能为解析器类指定Javadoc注释，而不是词法分析器。这是通过在声明语法之前添加文档注释来完成的：

```
/**
* This class is used for parsing.
* @author name
*/
grammar Example; 
```

输出是您所期望的：

```
/**
* This class is used for parsing.
* @author name.
*/
@SuppressWarnings({"all", "warnings", "unchecked"})
public class ExampleParser extends Parser {
 //etc 
```

我认为获取 lexer 类的 Javadoc 注释的唯一方法是专门为 lexer 创建一个语法文件并给它一个 doc 注释：

```
/**
* Lexer!
* @author name
*/
lexer grammar ExampleLexer; 
```

那么输出是：

```
/**
* Lexer!
* @author name
*/
@SuppressWarnings({"all", "warnings", "unchecked"})
public class ExampleLexer extends Lexer {
     //etc 
```

因此，您必须决定是仅在解析器上需要一个包含 Javadoc 的组合语法文件，还是需要两个语法文件和您可以处理的所有 Javadoc。

> 我还想在包信息之前删除自动生成的注释，它告诉语法是什么时候生成的。这怎么可能？

ANTLR 不提供允许此操作的[命令行选项](http://www.antlr.org/wiki/display/ANTLR3/Command+line+options)，因此它不太可能自动完成。

如果您希望有很多访问者在您生成的文件中四处寻找（听起来像您这样做），请考虑明确说明文件实际上是生成的，并且读者应该在其他地方查找完整的文档（并且不应该进行更改） . 您可以通过在文件顶部添加一个又大又丑的注释来轻松做到这一点，如下所示：

```
@parser::header {

    //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    //!!!                                                            !!!
    //!!! THIS CODE IS AUTOMATICALLY GENERATED! DO NOT MODIFY!       !!!
    //!!! Please refer to file Example.g for grammar documentation.  !!!
    //!!!                                                            !!!
    //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

    package com.example;
} 
```

# c - 将来自用户输入的转义序列转换为其真实表示

> ID：14872399
> 
> 赞同：4
> 
> 时间：2013-02-14T10:14:12.317
> 
> 标签：c, escaping, lolcode

我正在尝试为 LOLCODE 编写一个解释器，它从以下形式的文件中读取转义字符串：

```
VISIBLE "HAI \" WORLD!" 
```

我希望显示以下输出：

```
HAI " WORLD! 
```

为了做到这一点，我尝试为 printf 动态生成格式字符串，但似乎转义是在字符串文字的声明阶段完成的。

从本质上讲，我正在寻找的正是这个问题的反面： [Convert characters in ac string to their escape sequences](https://stackoverflow.com/questions/3535023/convert-characters-in-a-c-string-to-their-escape-sequences)

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-14T14:23:29.713

这是一个非常标准的扫描练习。根据您打算与 LOLCODE 规范的接近程度（我现在似乎无法达到，所以这是从记忆中得出的），您有几种方法可以走。

# 手写一个词法分析器

这并不像听起来那么难。您只想一次分析输入的一个字符，同时保留一些上下文信息。在您的情况下，重要的上下文包含两个标志：

*   一个要记住您当前正在对字符串进行词法分析。读取时置位，读取时`"`清零`"`。
*   记住前一个角色是一种逃避。读取时设置，`\`之后读取字符时清除，不管它是什么。

然后一般算法看起来像：（伪代码）

```
loop on: c ← read next character
  if not inString 
    if c is '"' then clear buf; set inString
    else [out of scope here]
  if inEscape then append c to buf; clear inEscape
  if c is '"' then return buf as result; clear inString
  if c is '\' then set inEscape
  else append c to buf 
```

`inEscape`如果您想实施`\r`等，您可能想改进案例`\n`。

# 使用词法分析器生成器

这里的传统工具是[lex](http://en.wikipedia.org/wiki/Lex_%28software%29)和[flex](http://en.wikipedia.org/wiki/Flex_lexical_analyser)。

# 获得灵感

您不是第一个编写 LOLCODE 解释器的人。偷看别人是怎么做的也没什么不好。例如，这是[来自 lci 的字符串解析代码](https://github.com/justinmeza/lci/blob/610f897733e18cf7f59414c2f213f1c3b410f612/lexer.c#L294)。

# jquery - Jquery：访问 $(this) 中的标记元素

> ID：14872400
> 
> 赞同：0
> 
> 时间：2013-02-14T10:14:16.240
> 
> 标签：jquery

```
<li><a href="home.html"> Home </a> </li>
<li> <a href="contact.html">Contact </a></li>

$('li').mouseenter( function() { 
    $(this).attr('a').css("color", "red");   
}); 
```

失败。我试图了解如何在那个'li'中达到那个a。（不是任何'li a'）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:15:00.060

`a`是一个元素而不是一个属性，你可以使用`find`方法：

```
$('li').mouseenter(function() { 
    $(this).find('a').css("color", "red"); 
    // or using $(selector, context):
    // $('a', this).css("color", "red"); 
}); 
```

但是 JavaScript 不像 CSS 那样工作，你应该改变`mouseleave`事件的颜色，你可以创建一个类并使用`toggleClass`方法：

```
.red {
   color: red;
} 
```

```
$('li').hover(function() { 
    $(this).find('a').toggleClass('red');
}); 
```

您还可以使用 CSS（*更轻更快*）：

```
li:hover a {
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:14:48.553

使用[**find()**](http://api.jquery.com/find/)而不是[attr()](http://api.jquery.com/attr/)，因为`a`元素不是当前元素的属性。

```
$('li').mouseenter( function() { 
    $(this).find('a').css("color", "red");   
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T10:22:00.547

您可以使用`children`或`find`为此

```
$('li').mouseenter( function() { 
    $(this).children('a').css("color", "red");   
}); 
```

**注意：** `Children`只查看节点的直接子节点，而`find`遍历节点下方的整个 DOM，因此给定等效实现的子节点应该更快。但是 find 使用本机浏览器方法，而 children 使用在浏览器中解释的 JavaScript。在我的实验中，典型情况下的性能差异不大。

复制自[jQuery 中最快的 children() 或 find() 是什么？](https://stackoverflow.com/questions/648004/what-is-fastest-children-or-find-in-jquery)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T10:23:11.950

你也可以这样做：

```
$('li').mouseenter( function() { 
   $('a', this).css("color", "red");   
}); 
```

# java - 复制和镜像 GeneralPath

> ID：14872405
> 
> 赞同：0
> 
> 时间：2013-02-14T10:14:20.223
> 
> 标签：java, 2d, java-2d

有没有办法复制一般路径，镜像它并移动它？

我在创造一个卡通人物，我意识到她左边的头发，身体和右边一样。

例如：

![图片](../Images/c7a1e393f5dfcec62ea8e4b0536ec22e.png)

我已经完成了她头发和身体的左侧部分，代码很长。

所以为了更快地完成角色，我想也许有一种方法可以复制代码，水平翻转并将其移动到正确的位置。

我有这个示例代码：

```
public void paint(Graphics g)
{
    Graphics2D g2d = (Graphics2D) g;
    GeneralPath body, mirror;

    body = new GeneralPath();
    mirror = new GeneralPath();

    body.moveTo(205.5,97);
    body.lineTo(207,132);
    body.quadTo(193,105, 197,80);
    body.curveTo(188,98, 156,127, 159,167);
    body.quadTo(163,174, 166,184);
    body.curveTo(173,196, 193,210, 213,208);
    body.curveTo(247,208, 267,196, 274,184);

    g2d.setPaint(new Color(255,251,223));
    g2d.fill(body);
    g2d.setPaint(Color.black);
    g2d.draw(body);

    //mirror = duplicate(body)
    //flip(mirror)
    //mirror.moveTo(x,y)
    //..something like that
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:25:53.090

您可以使用转换。有关示例，请参阅[变换形状、文本和图像](http://docs.oracle.com/javase/tutorial/2d/advanced/transforming.html)教程。

这是基于问题中原始代码的示例：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.AffineTransform;
import java.awt.geom.GeneralPath;

import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                final JPanel panel = new JPanel() {
                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(600, 300);
                    }

                    @Override
                    protected void paintComponent(Graphics g) {
                        super.paintComponents(g);
                        final Graphics2D g2d = (Graphics2D) g.create();

                        try {
                            GeneralPath body, mirror;

                            body = new GeneralPath();
                            mirror = new GeneralPath();

                            body.moveTo(205.5, 97);
                            body.lineTo(207, 132);
                            body.quadTo(193, 105, 197, 80);
                            body.curveTo(188, 98, 156, 127, 159, 167);
                            body.quadTo(163, 174, 166, 184);
                            body.curveTo(173, 196, 193, 210, 213, 208);
                            body.curveTo(247, 208, 267, 196, 274, 184);

                            g2d.setPaint(new Color(255, 251, 223));
                            g2d.fill(body);
                            g2d.setPaint(Color.black);
                            g2d.draw(body);

                            AffineTransform tx = AffineTransform
                                    .getScaleInstance(-1, 1);
                            tx.translate(-274 * 2, 0);
                            g2d.transform(tx);

                            g2d.setPaint(Color.YELLOW);
                            g2d.fill(body);
                            g2d.setPaint(Color.BLACK);
                            g2d.draw(body);
                        } finally {
                            g2d.dispose();
                        }
                    }
                };
                JOptionPane.showMessageDialog(null, panel, "Mirror", 
                        JOptionPane.INFORMATION_MESSAGE);
            }
        });
    }
} 
```

结果如下所示：

![在此处输入图像描述](../Images/08118b3d9e9037484e21858ab9f73667.png)

# php - 希腊语日期和时间

> ID：14872406
> 
> 赞同：6
> 
> 时间：2013-02-14T10:14:26.953
> 
> 标签：php, datetime, localization

我目前正在使用一个网站来获取雅典的时间：

```
$d = new DateTime("now", new DateTimeZone("Europe/Athens"));
echo $d->format("l, d M Y"); 
```

但我希望日期以希腊语和相同格式显示。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-02T10:02:48.650

完整答案：

```
date_default_timezone_set('Europe/Athens');

setlocale(LC_TIME, 'el_GR.UTF-8');
echo strftime('%A ');
$greekMonths = array('Ιανουαρίου','Φεβρουαρίου','Μαρτίου','Απριλίου','Μαΐου','Ιουνίου','Ιουλίου','Αυγούστου','Σεπτεμβρίου','Οκτωβρίου','Νοεμβρίου','Δεκεμβρίου');
$greekDate = date('j') . ' ' . $greekMonths[intval(date('m'))-1] . ' ' . date('Y');
echo $greekDate; 
```

这将显示日期，如：

```
Πέμπτη 4 Φεβρουαρίου 2013 
```

更新：为了使上述代码块正常工作，将 PHP 语言环境设置为希腊语非常重要。

这是另一种选择：

```
date_default_timezone_set('Europe/Athens');

setlocale(LC_TIME, 'el_GR.UTF-8');
$day = date("w");
$greekDays = array( "Κυριακή", "Δευτέρα", "Τρίτη", "Τετάρτη", "Πέμπτη", "Παρασκευή", "Σάββατο" ); 
$greekMonths = array('Ιανουαρίου','Φεβρουαρίου','Μαρτίου','Απριλίου','Μαΐου','Ιουνίου','Ιουλίου','Αυγούστου','Σεπτεμβρίου','Οκτωβρίου','Νοεμβρίου','Δεκεμβρίου');

$greekDate = $greekDays[$day] . ' ' . date('j') . ' ' . $greekMonths[intval(date('m'))-1] . ' ' . date('Y');
echo $greekDate; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-12T13:44:07.810

我一直在寻找相同的东西，但我没有找到我需要的完整解决方案。就我而言，我需要用希腊语写文章的发布日期时间，例如`Αναρτήθηκε Σάββατο 2 Μαΐου 2015`.

因此，使用一些`costastg`答案代码，我设法将以下功能放在一起。

我相信还有其他解决方案：

```
function formatToGreekDate($date){
    //Expected date format yyyy-mm-dd hh:MM:ss
    $greekMonths = array('Ιανουαρίου','Φεβρουαρίου','Μαρτίου','Απριλίου','Μαΐου','Ιουνίου','Ιουλίου','Αυγούστου','Σεπτεμβρίου','Οκτωβρίου','Νοεμβρίου','Δεκεμβρίου');
    $greekdays = array('Δευτέρα','Τρίτη','Τετάρτη','Πέμπτη','Παρασκευή','Σάββατο','Κυριακή');

    $time = strtotime($date);
    $newformat = date('Y-m-d',$time);

    return $greekdays[date('N', strtotime($newformat))-1].' '. date('j', strtotime($newformat)).' '.$greekMonths[date('m', strtotime($newformat))-1]. ' '. date('Y', strtotime($newformat)); // . ' '. $date;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-20T15:37:50.527

你应该使用 setlocale 和 strftime，一个例子来了解这个想法：

```
setlocale(LC_TIME, 'el_GR.UTF-8');

// Your display formatting from https://www.php.net/manual/en/function.strftime.php
$field_date_format = '%A, %d %B, %Y'; 

// Will display= Greek: Πέμπτη, 14 Φεβρουάριος, 2013
echo "Greek: ".strftime($field_date_format, strtotime("14-02-2013")); 
```

我知道“Φεβρουάριος”不是“Φεβρουάριου”，但如果对您的需求不重要，您可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T10:22:58.507

如果我是对的，您想`l`用希腊语显示参数。您应该将您的 PHP 语言环境设置为希腊语。

使用`setlocale()`： http: [//php.net/manual/en/function.setlocale.php](http://php.net/manual/en/function.setlocale.php)

```
setlocale(LC_TIME, 'greek'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T10:31:34.400

您应该拥有使用[date](http://us2.php.net/manual/en/function.date.php)所需的一切：

```
$greekMonths = [
    'Ianouarios', 'Fevrouarios', 'Martios', 'Aprilios', 'Maios',
    'Iounios', 'Ioulios', 'Avgoustos', 'Septemvrios', 'Oktovrios', 
    'Noemvrios', 'Dekemvrios'
];
$greekDate = date('d') . ' ' . $greekMonths[intval(date('m'))-1] . ' ' . date('Y');  
echo $greekDate; 
```

[使用setlocale](http://php.net/manual/pt_BR/function.setlocale.php)的第二种方式：

```
setlocale(LC_CTYPE, 'greek');  
setlocale(LC_TIME, 'greek'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-25T13:04:09.910

适用于所有格式的简单方法

```
function date_greek($format,$time=null){
    if($time===null)$time=time();
    $date = date($format,$time);
    if(strpos($format,'F')!==false){
        $en_months = array('January','February','March','April','May','June','July','August','September','October','November','December');
        $el_months = array('Ιανουαρίου','Φεβρουαρίου','Μαρτίου','Απριλίου','Μαΐου','Ιουνίου','Ιουλίου','Αυγούστου','Σεπτεμβρίου','Οκτωβρίου','Νοεμβρίου','Δεκεμβρίου');
    }else{
        $en_months = array('Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec');
        $el_months = array('Ιαν','Φεβ','Μαρ','Απρ','Μαι','Ιουν','Ιουλ','Αυγ','Σεπ','Οκτ','Νοε','Δεκ');
    }

    $en_days = array('Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday');
    $el_days = array('Δευτέρα','Τρίτη','Τετάρτη','Πέμπτη','Παρασκευή','Σάββατο','Κυριακή');
    $en_days_s = array('Mon','Tue','Wed','Thu','Fri','Sat','Sun');
    $el_days_s = array('Δευ','Τρι','Τετ','Πεμ','Παρ','Σαβ','Κυρ');
    $en_ampm = array('AM','PM');
    $el_ampm = array('ΠΜ','ΜΜ');

    $date_el = str_replace($en_months,$el_months,$date);
    $date_el = str_replace($en_days,$el_days,$date_el);
    $date_el = str_replace($en_days_s,$el_days_s,$date_el);
    $date_el = str_replace($en_ampm,$el_ampm,$date_el);

    return $date_el;
}

echo date_greek('l, d M Y',strtotime('2021-04-25')); // Πέμπτη, 22 Απρ 2021
echo date_greek('l j F Y h:i:s A',strtotime('2021-04-25')); // Πέμπτη 22 Απριλίου 2021 12:00:00 ΠΜ 
```

# php - 当我使用代理时，$_SERVER['REMOTE_PORT'] 没有提供真实端口

> ID：14872407
> 
> 赞同：1
> 
> 时间：2013-02-14T10:14:27.557
> 
> 标签：php, proxy

我已与 wifi 路由器连接，我在 Firefox 中设置代理连接以检查 REMOTE_PORT 提供哪个端口

```
echo $_SERVER['REMOTE_PORT']; 
```

我正在使用它来获取我正在使用的代理端口。但它提供了随机端口。我正在使用 ip : 123.134.167.208 Port : 6675 上面的代码返回 53603 Port 这是不正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:47:04.193

那是因为您使用的代理正在将数据转发到另一个端口，因此它不会将同一端口用于入站/出站连接

> 计算机（firefox）<--> 端口 6657 上的代理 <-portforwarding-> 随机端口 53603 上的代理 <--> 使用 PHP 代码的服务器

# apache-pig - 使用参数读取包的某个字段

> ID：14872408
> 
> 赞同：0
> 
> 时间：2013-02-14T10:14:28.897
> 
> 标签：apache-pig

我正在通过 Alan Gates*编写 Programming Pig*，但在介绍宏功能的脚本中出现错误：http: [//ofps.oreilly.com/titles/9781449302641/advanced_pig_latin.html#macros](http://ofps.oreilly.com/titles/9781449302641/advanced_pig_latin.html#macros)

```
--macro.pig
-- Given daily input and a particular year, analyze how
-- stock prices changed on days dividends were paid out.
define dividend_analysis (daily, year, daily_symbol, daily_open, daily_close)
returns analyzed {
divs          = load 'NYSE_dividends' as (exchange:chararray,
                    symbol:chararray, date:chararray, dividends:float);
divsthisyear  = filter divs by date matches '$year-.*';
dailythisyear = filter $daily by date matches '$year-.*';
jnd           = join divsthisyear by symbol, dailythisyear by $daily_symbol;
$analyzed     = foreach jnd generate dailythisyear::$daily_symbol,
                    $daily_close - $daily_open;
};

daily   = load 'NYSE_daily' as (exchange:chararray, symbol:chararray,
        date:chararray, open:float, high:float, low:float, close:float,
        volume:int, adj_close:float);
results = dividend_analysis(daily, '2009', 'symbol', 'open', 'close'); 
```

`$`错误是 .中的双冒号后出现的意外符号`dailythisyear::$daily_symbol`。

如果不替换该行，您将如何解决此问题：

```
$analyzed = foreach jnd generate divsthisyear::symbol, $daily_close - $daily_open; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:58:37.927

参数替换不能在宏内部使用。参数应显式传递给宏，参数替换仅在顶层使用。

您可以使用 -dryrun 命令行参数来查看宏是如何在线展开的。

所以无论如何你不能以这种方式在宏中使用参数。

# bash - 如何在 AWK 中插入 shell 脚本的命令行参数？

> ID：14872412
> 
> 赞同：2
> 
> 时间：2013-02-14T10:14:36.767
> 
> 标签：bash, awk

我必须找到所有具有特定数据的记录，这些数据我将作为命令行参数传递。

awk 表达式是这样的（日期格式为：'02/08/2013'）

> 猫记录.txt| awk -F ',' '$4 ~ /02/08/2013/ {打印 $1 $2}'

这里第 4 列是日期列。

我想要做的是，提供日期作为第一个参数并进行比较。

我试过这个，但它不起作用。

> 猫记录.txt| awk -F ',' -v awkvar="$1" '$4 ~ /^"awkvar/ {打印 $1 $2}'

这里日期列以“报价”开头，所以我告诉查找以“+awkvar 给定日期开头的记录。

谁能帮我这个？

编辑：

> awk -F ',' -v var1="$1" '$4 ~ /^"2013/ {print $1 $2}' {这个有效，因为我直接将记录与 2013 年进行比较}

当我这样做时

> awk -F ',' -v var1="$1" '$4 ~ /^"var1/ {print $1 $2}' ，它不返回任何东西，有什么区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:15:43.883

要将变量传递给`awk`，请使用

```
awk -v awkvar=$value '{print awkvar}' 
```

也就是说，不需要管道`cat | awk`（无用的猫）所以最后：

```
awk -F, -v awkvar="$1" '$4 ~ "^\""awkvar {print $1 $2}' records.txt 
```

# c# - Windows 8 应用程序中的日志记录机制？

> ID：14872415
> 
> 赞同：0
> 
> 时间：2013-02-14T10:14:47.587
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps, error-logging

我已经制作了几个 Windows 8 应用程序，但我还没有实现日志记录机制。

我试图在 Windows 8 应用程序中搜索实现错误日志记录或任​​何其他日志记录，但每个都只显示了登录本地设备的方法。

如何创建一个日志机制，在用户端记录 Windows 8 应用程序中的任何错误或问题，并通过电子邮件向我发送报告或保存在某个远程服务器上。

我发现很少有日志记录机制是：

1.  [http://blogs.msdn.com/b/agile/archive/2013/02/07/embracing-semantic-logging.aspx](http://blogs.msdn.com/b/agile/archive/2013/02/07/embracing-semantic-logging.aspx)
2.  [http://blogs.msdn.com/b/eternalcoding/archive/2012/08/07/tips-and-tricks-for-c-windows-8-developer-try-to-catch-the- Famous-it-为我工作的 bug.aspx](http://blogs.msdn.com/b/eternalcoding/archive/2012/08/07/tips-and-tricks-for-c-windows-8-developer-try-to-catch-the-famous-it-works-for-me-bug.aspx)

但是这些日志记录机制不会通过电子邮件或某些服务器向我发送报告。
我怎样才能做到这一点。如果可能的话，提供一些代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:45:11.397

因此，您可以通过共享发送电子邮件，正如评论中的问题所述：[如何从 WinRT/Windows 应用商店应用程序发送电子邮件？](https://stackoverflow.com/questions/12732263/how-do-i-send-an-email-from-a-winrt-windows-store-application). 这是一种方式，但它迫使用户使用他们的邮件客户端，我认为这不是很好的用户体验。

如果您有一个可以编写和运行某种错误报告服务的远程服务器，您的应用只需调用它的服务，您可以向用户显示一条友好的消息，说“您的报告已提交“或任何你想要的。那里的挑战是编写这个远程服务器。

无法真正提供代码，因为这取决于您想要使用的后端技术、您想要对收到的数据做什么等。

编辑：就跟踪错误的更好方法而言，比什么更好？您应该遵循[任何最佳实践](http://msdn.microsoft.com/en-us/library/seyhszts.aspx)。此外，您的`Windows.UI.Xaml.Application`对象有一个[UnhandledException](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.unhandledexception.aspx)事件，您可以使用该事件处理 UI 线程上未在您的代码中处理的任何异常。我会创建某种组件，您可以在其中排队错误报告。如果您需要用户输入，它将显示该 UI。一份报告已准备就绪，它会将其发送到您的网络服务。

# jquery - jquery 在不使用其他文件的情况下刷新 div？

> ID：14872422
> 
> 赞同：0
> 
> 时间：2013-02-14T10:15:03.737
> 
> 标签：jquery

现在，我知道如果我想每 xx 秒重新加载一个 div，我必须将 div 放在一个单独的文件中，然后每 xx 秒使用第一个文件加载，所以使用如下代码：

```
<script>
    $(document).ready(function(){
$('#chat_holder').load('file.page.php');

setInterval(function(){

        $('#chat_holder').load('file.page.php');

}, 10000);
});

</script> 
```

..所以这会将内容加载到此文件中。有没有办法在同一个文件中只有一个 div 并在每 xx 秒内重新加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:34:28.697

我认为你`want to access a specific div`从`file.page.php`页面：

```
 $(document).ready(function(){
     $('#chat_holder').load('file.page.php #targetDivId');
     setInterval(function(){
        var loaded = $('#chat_holder').load('file.page.php #targetDivId');
        $('#chat_holder').html(loaded);
     }, 10000);
 }); 
```

这会将目标 div 加载到`#chat_holder`div 中，并且每秒执行一次

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T10:19:07.713

是的，这是可能的，但我怀疑这是否是“好习惯”。看这个：

```
$("#chat_holder").load("thePageOfChatHolder.html #chatbox"); 
```

这将获取 的内容`thePageOfChatHolder.html`，剥离除聊天框以外的所有内容并将其放入`#chat_holder`.

**编辑：**
也许这个解决方案会将 div 放在“自身”中，如下所示：

```
<div id="chat_holder">
    <div id="chat_holder">
        <div id="chat_holder">
        ... and so on ...
        </div>
    </div>
</div> 
```

在这种情况下，包装`#chat_holder`在另一个 div 中（在我的示例中它具有 ID `wrapper`）并执行以下操作：

```
$("#wrapper").load("thePageOfChatHolder.html #chat_holder"); 
```

# c++ - 错误 LNK2001：当我在定义文件中不包含标头时，无法解析外部符号“int const * const A_array”

> ID：14872424
> 
> 赞同：3
> 
> 时间：2013-02-14T10:15:07.050
> 
> 标签：c++, extern

编译器：MS VS 2010

在下面的程序中，我将 A_array 声明为 extern（告诉编译器它将在某处定义）并在 A.cpp 中定义它。

但是我收到链接器错误。即使 A.cpp 编译得很好，这意味着 A_array 应该已经分配了内存并且存在。什么可能导致此问题？

注意：我已经在 SO 中搜索了链接器错误代码，但仍然找不到此错误的确切原因。

```
A.h
----------------------
#ifndef INC_A_H
#define INC_A_H
extern const int A_array[];
#endif
----------------------

A.cpp
----------------------
const int A_array[] = {10, 20, 30};
----------------------

B.cpp
----------------------
#include <iostream>
#include "A.h"

int main()
{
    for(int i=0; i<3; i++)
    {
        std::cout << A_array[i] <<"\n";
    }
    int x;
    std::cin >> x;
    return 0;
}
---------------------- 
```

输出：

```
1>ClCompile:
1>  B.cpp
1>  A.cpp
1>  Generating Code...
1>B.obj : error LNK2001: unresolved external symbol "int const * const A_array" (?A_array@@3QBHB)
1>Visual Studio 2010\Projects\test_extern\Debug\test_extern.exe : fatal error LNK1120: 1 unresolved externals 
```

更新 - 1：

当我在 A.cpp 中包含 Ah 时，代码会编译、链接并正常工作。有人可以解释为什么在 A.cpp 中需要包含此内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:54:36.490

问题是您在头文件中有一个（稍微不正确的）前向声明。

的类型`const int A_array[] = {10, 20, 30};`是数组或长度为 3。

的类型`const int A_array[]`是`int`指针或长度未定义的数组（它还不知道数组的长度）。

由于这些定义不完全匹配，编译器不会知道它们是相同的，除非你包含`A.h`in `A.cpp`，因为这样定义和声明都将在同一个文件中，编译器会将它们链接起来。

进行声明`A.h` `extern const int A_array[3]`应该有效。虽然包括在内`A.h`会`A.cpp`更正确。

# eclipse-rcp - Guice.createInjector 错误

> ID：14872425
> 
> 赞同：2
> 
> 时间：2013-02-14T10:15:08.297
> 
> 标签：eclipse-rcp, guice, mybatis

我正在尝试在 eclipse 4 rcp 项目中使用 mybatis-guice：

```
injector = Guice.createInjector(new MyBatisModule() {
        @Override
        protected void initialize() {
        install(JdbcHelper.HSQLDB_Embedded);
        bindDataSourceProviderType(PooledDataSourceProvider.class);
        bindTransactionFactoryType(JdbcTransactionFactory.class);
        addMapperClass(UserMapper.class);
        Names.bindProperties(binder, createTestProperties());
        bind(FooService.class).to(FooServiceMapperImpl.class);
        }
        }); 
```

并得到例外：

```
java.lang.NoSuchMethodError: org.mybatis.guice.AbstractMyBatisModule.bindInterceptor(Lcom/google/inject/matcher/Matcher;Lcom/google/inject/matcher/Matcher;[Lorg/aopalliance/intercept/MethodInterceptor;) 
```

我做错了什么？

# android - 将文本附加到文件末尾

> ID：14872429
> 
> 赞同：7
> 
> 时间：2013-02-14T10:15:28.273
> 
> 标签：android

每次调用文件时，我都使用下面的代码段将文本写入文件末尾。但是，它正在擦除旧数据，然后将新数据写入文件的开头。如何修复以下代码，使其**始终**在文件末尾附加新数据？

```
public boolean writeToFile(String directory, String filename, String data ){
    File out;
    OutputStreamWriter outStreamWriter = null;
    FileOutputStream outStream = null;

    out = new File(new File(directory), filename);

    if ( out.exists() == false ){
                out.createNewFile();
    }

    outStream = new FileOutputStream(out) ;
    outStreamWriter = new OutputStreamWriter(outStream); 

    outStreamWriter.append(data);
    outStreamWriter.flush();
   } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-14T10:17:52.733

尝试在以下位置将`boolean`附加值设置为 true `FileOutputStream`：

```
outStream = new FileOutputStream(out, true);
outStreamWriter = new OutputStreamWriter(outStream); 
```

# python - 使用元素树获取值

> ID：14872430
> 
> 赞同：0
> 
> 时间：2013-02-14T10:15:29.213
> 
> 标签：python, elementtree, xml.etree

我想获取特定组件的一些值。例如，我想从以下输出中仅获取 2 个值（即 Component --> name: paristrain 和 Stat --> TimeoutValue: value）。我试图用 xpath 做到这一点，但我无法获得所需的输出。你能帮我解决这个问题吗？

```
from xml.etree import ElementTree

with open('rejexstats.xml', 'rt') as f:
    tree = ElementTree.parse(f)

for node in tree.iter():
    print node.tag, node.attrib 
```

这打印：

```
Statistics {}
{http://www.rejex.com/stats}Server {'start': '2013-01-22T22:30:13.583', 'product': 'rejex', 'end': '2013-01-23T09:39:45.249', 'startup': '2013-01-22T22:30:13.583', 'name': 'localhost'}
{http://www.rejex.com/statistics}Component {'subtype': 'Thread', 'type': 'Supplier', 'name': 'paristrain'}
{http://www.rejex.com/statistics}Stat {'type': 'entry', 'name': 'TimeoutValue', 'value': '120'}
{http://www.rejex.com/statistics}Stat {'type': 'entry', 'name': 'PendingRequests', 'value': '0'}
{http://www.rejex.com/statistics}Stat {'type': 'entry', 'name': 'Session|0|SupplierTimeout', 'value': '0'}
{http://www.rejex.com/statistics}Stat {'type': 'entry', 'name': 'Session|0|Errors', 'value': '0'}
{http://www.rejex.com/statistics}Stat {'type': 'entry', 'name': 'Session|3|SupplierTimeout', 'value': '0'}
{http://www.rejex.com/statistics}Stat {'type': 'entry', 'name': 'ApplyRulesErrors', 'value': '0'} 
```

XML 文件

```
<Statistics>
    <Server end="2013-02-14T07:06:35.533" name="localhost" product="regex" start="2013-02-13T22:30:12.982" startup="2013-02-13T22:30:12.982">
        <Component name="paristrain" subtype="Thread" type="Supplier">
            <Stat name="TimeoutValue" type="entry" value="120"/>
            <Stat name="PendingRequests" type="entry" value="0"/>
            <Stat name="Session|0|SupplierTimeout" type="entry" value="0"/>
            <Stat name="Session|0|Errors" type="entry" value="0"/>
            <Stat name="Session|3|SupplierTimeout" type="entry" value="0"/>
            <Stat name="ApplyRulesErrors" type="entry" value="0"/>
            <Stat name="LateResponses" type="entry" value="0"/>
            <Stat name="CacheTries" type="entry" value="0"/>
            <Stat name="Session|4|Errors" type="entry" value="0"/>
            <Stat name="MaxActiveThreads" type="entry" value="0"/>
            <Stat name="MaxPendingQueueSize" type="entry" value="10"/>
            <Stat name="ValidResponses" type="entry" value="0"/>
            <Stat name="TranslateResponses" type="entry" value="0"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:17:40.963

您需要在 XPath 查询中包含完整的命名空间：

```
for component in tree.iterfind('{http://www.rejex.com/statistics}Component'):
    print component.attrib['name'] 
```

或者，您可以使用显式命名空间映射，将前缀（您选择）映射到命名空间 URI：

```
nsmap = {'rej': 'http://www.rejex.com/statistics`}

for stat in tree.iterfind('rej:Stat', namespaces=nsmap):
    print stat.attrib['value'] 
```

在您传入的`rej`任何内容中都会查找前缀`namespaces`，然后将其转换为第一个示例中给出的相同 XPath 查询。

您可以扩展`{namespace}`xpath 限定符以查找更复杂的匹配项：

```
tree.find(
    "{http://www.rejex.com/statistics}Component[@name='paristrain']/"
    "{http://www.rejex.com/statistics}Stat[@name='TimeoutValue']") 
```

例如，应该返回`Stat`具有属性的元素，`name="TimeoutValue"`其父元素是具有属性的`Component`元素`name="paristrain"`。

# java - Maven POM 的 XPath

> ID：14872433
> 
> 赞同：1
> 
> 时间：2013-02-14T10:15:33.723
> 
> 标签：java, xml, xpath, pom.xml

我正在寻找一种查询`XML`文件的方法，似乎`XPath`很推荐这种方法。唯一的问题是我找不到任何关于如何将其导入我的 maven pom 的文档。有谁知道细节？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T10:26:22.933

你可以试试

```
 <dependency>
        <groupId>xalan</groupId>
        <artifactId>xalan</artifactId>
        <version>2.7.1</version>
    </dependency> 
```

见[http://xml.apache.org/xalan-j/](http://xml.apache.org/xalan-j/)

# c# - 从 Web App 调用时 System.Reflection.Assembly.GetEntryAssembly() 为 null

> ID：14872435
> 
> 赞同：5
> 
> 时间：2013-02-14T10:15:38.517
> 
> 标签：c#, system.reflection

我正在 Visual Studio 2010 中使用目标框架开发一个 Web 应用程序 - 3.5 我正在使用一个 dll（由另一个团队开发），其中出现以下代码错误：

```
 string strName = System.Reflection.Assembly.GetEntryAssembly().GetName().Name; 
```

我检查并发现 System.Reflection.Assembly.GetEntryAssembly() 正在返回 null，并且还对其进行了搜索，并在 msdn 上发现 GetEntryAssembly() 在从任何非托管代码调用时可能返回 null。

当我从我的 Web 应用程序调用时，它返回 null，当我从任何 Windows 应用程序调用时，它工作正常，即它获取条目程序集名称（开始执行的程序集）。为什么它在 Web 应用程序中返回 null？我无法理解。我还尝试从 Visual Studio 中的项目属性将我的 Web 项目的输出类型更改为类库，但是输出类型的下拉菜单被禁用，我无法更改项目的输出类型。如果此问题存在任何解决方案，请帮助我。

提前致谢

阿米特·沙哈尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:23:26.653

是否管理 ASP.Net 主机进程。答案是不。因此，`GetEntryAssembly`在您的网络应用程序中的结果为空。

解决方案完全取决于您的第三方程序集试图做什么以及它调用的原因`GetEntryAssembly`。

您可以创建一个可执行文件来托管程序集并在单独的进程中启动它，然后调用将返回您的可执行程序集。但是，这可能不是最好的行动方案，这取决于您想要实现的总体目标。

# c# - 如何使用 Where 条件和调用方法优化此 LINQ 表达式？

> ID：14872437
> 
> 赞同：2
> 
> 时间：2013-02-14T10:15:43.627
> 
> 标签：c#, linq, lambda

我正在寻求有关以下方法的任何建议或提示，即使用 LINQ 在 Collection 中查找某个为 null 的属性，然后遍历结果（子列表）并在同一 Collection 中的另一个属性上执行方法.

```
private void SetRaises()
{
    if (employeeCollection != null)
    {
      var noRaiseList = employeeCollection .Where(emp => emp.Raise == null).ToList();
      foreach (var record in noRaiseList )
      {
         CalculateRaise(record);
      }
    }
}

public void CalculateRaise(Employee emp)
{
    if (emp!= null)
        emp.Raise = emp.YearsOfService * 100;
} 
```

第一种方法 SetRaises() 中我不喜欢的部分是以下代码段：

```
foreach (var record in noRaiseList )
{
    CalculateRaise(record);
} 
```

有没有办法将该部分直接集成到我的 LINQ 表达式中，即我不知道的一些扩展方法？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T10:17:44.813

您可以做的第一件事是：*不要生成中间列表*：

```
 var pending = employeeCollection.Where(emp => emp.Raise == null);
 foreach (var record in pending)
 {
     CalculateRaise(record);
 } 
```

这等同于：

```
 foreach (var record in employeeCollection.Where(emp => emp.Raise == null))
 {
     CalculateRaise(record);
 } 
```

这现在是非缓冲延迟执行。

但坦率地说，这里的 LINQ 并没有给你太多。你也可以：

```
foreach(var emp in employeeCollection)
{
    if(emp.Raise == null) CalculateRaise(emp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:19:30.330

如果您不需要 Raise 的员工列表，您可以在一行中执行此操作：

```
employeeCollection.Where(emp => emp.Raise == null).ToList().ForEach(x => x.Raise = x.YearsOfService * 100); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:22:56.777

您可以使用 ForEach 链方法。但这只是糖语法。

```
employeeCollection.Where(emp => emp.Raise == null)
                  .ToList()
                  .ForEach(record => CalculateRaise(record)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T10:23:29.017

它应该是这样的：

```
var noRaiseList = employeeCollection .Where(emp => emp.Raise == null).ToList().ForEach(e=>e.Raise = e.YearsOfService * 100); 
```

# c# - 将对象二进制反序列化为 XML？

> ID：14872439
> 
> 赞同：1
> 
> 时间：2013-02-14T10:15:45.770
> 
> 标签：c#, xml, deserialization, xmlserializer, binaryformatter

我在将对象反序列化为 XML 时遇到了一些麻烦。我正在尝试反序列化没有空构造函数的东西，因此我需要使用 BinaryFormatter？我有：

*   一个 DLL，它包含一个我想反序列化为 XML 的类。
*   从反映类型我可以看出它没有无参数构造函数。
*   此类包含一些属性，其中一些也没有空构造函数。

我的问题是，是否可以将此类反序列化为 XML？我确实找到了一种使用方法：

*   二进制格式化程序
*   将内容加载到流中
*   使用 FileStream 写入其内容，但以垃圾结束

提前致谢。我发现了一个叫做 FormatterServices 的东西……但不知道你是否可以将它与 XmlSerializer 结合使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:11:11.140

1.  将二进制数据反序列化回对象。

2.  将您的对象复制到代理对象中。

3.  Xml 序列化您的代理对象。

假设您的原始非 xml 可序列化对象的类型是“Foo”

```
[XmlRoot]
public class FooSurrogate {

     public FooSurrogate() { }; // note the empty constructor for xml deserialization

     public FooSurrogate(Foo foo) {  // this constructor is used in step 2
          // in here you copy foo's state into this object's state
          this.Prop1 = foo.Prop1; // this prop can be copied directly 
          this.Bar = new BarSurrogate(foo.Bar); // this prop needs a surrogate as well  
     } 

     [XmlAttribute]  // note your surrogate can be used to xml-format too!
     public string Prop1 { get; set; }

     [XmlElement]
     public BarSurrogate Bar { get; set; }

}

public class BarSurrogate { 
...
} 
```

# c - setxattr 失败，操作不支持

> ID：14872453
> 
> 赞同：3
> 
> 时间：2013-02-14T10:16:35.007
> 
> 标签：c, linux

我正在尝试将文件属性设置如下：

1.  使用 0644 权限创建文件 foo.txt
2.  当我试图为此设置xattr时

    ```
    if (setxattr("foo.txt", "user.test", "test", 4, XATTR_CREATE) == -1)
        perror(""); 
    ```

我收到错误，因为不支持操作

有什么可以启用的吗？如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T10:37:14.100

从[`setxattr`](http://www.kernel.org/doc/man-pages/online/pages/man2/lsetxattr.2.html)

> **返回值**
> 
> ```
>  On success, zero is returned.  On failure, -1 is returned and errno is set
>    appropriately.  
>    ...  
>    If extended attributes are not supported by the file system, or are disabled,
>    errno is set to ENOTSUP. 
> ```

因此，要么您的文件系统不支持扩展属性（例如，ext[234]、cifs、btrfs 支持），要么它们在内核构建或挂载时被禁用。

对于 NFS，在内核配置中没有单独的开关来启用扩展属性。从源代码来看，当您启用对or`fs/nfs/dir.c`的支持时，它似乎已启用。但是 NFS 仍然依赖于底层文件系统。因此，您还必须在服务器端启用扩展属性。`CONFIG_NFS_V3``CONFIG_NFS_V4`

从[`man mount`](http://linux.die.net/man/8/mount)

> **ext2 的挂载选项**
> ...
> **user_xattr|nouser_xattr**
> 支持“用户”。扩展属性（或没有）。

# python - 如何避免使用带有 sqlalchemy 声明性的复杂元类

> ID：14872454
> 
> 赞同：1
> 
> 时间：2013-02-14T10:16:43.413
> 
> 标签：python, sqlalchemy

我刚刚注意到，在[stackoverflow 的回复](https://stackoverflow.com/questions/6700735/sqlalchemy-mixin-vs-metaclass-modification)中，sqlalchemy 的创建者 Mike Bayer (zzzeek) 说：“对于简单的用例，Declarative 不需要自定义元类，对于硬用例也几乎不需要。混合 + 自定义基础应该几乎可以做任何事情。” 这提高了我的希望，即我在 sqlalchemy 中使用自定义元类`declarative_base`所做的事情可以使用 mixins + 自定义基础来完成。但是，我无法使其工作。我将不胜感激任何提示！

我有一个 mixin `ConciseRelationshipMixin`，可以使用简洁的语法创建关系。它的用法如下：

```
class Eggs(ConciseRelationshipMixin, OtherMixin1, OtherMixin2):
    pass

Spam = declarative_base(cls=Eggs)

class Ham(Spam):
    some_column = Column(Integer)
    crispy_bacon = ConciseRelationship(Bacon) 
```

这将创建一个额外的列`Ham.__table__`来保存关系的 FK，以及名称下的关系本身`Ham.bar`，使用项目特定的约定来命名额外列的名称和`primaryjoin`. 我真的很喜欢这个 mixin，因为它使`Ham`外观的定义非常清晰和整洁。

如果不使用元类，我无法实现这一点的原因是我试图将分配转换`crispy_bacon = ...`为*两个*分配`column_for_crispy_bacon = Column(...)`，并且`crispy_bacon = relationship(...)`我看不到任何其他方法可以做到这一点。

我也愿意接受“你不应该做这种事情，因为......”形式的回复。

# ios - 导航控制器不能正常工作

> ID：14872455
> 
> 赞同：0
> 
> 时间：2013-02-14T10:16:48.383
> 
> 标签：ios, uibutton, mkmapview, mkannotation

我（希望）有一个小问题。`rightCalloutAccessoryView`按钮方法。我尝试将其推到`navigationcontroller`，`another viewcontroller`但它不能正常工作。我总是黑屏。已`navigationBar`禁用

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
// ... code ...
        pinAnnotationView.canShowCallout = YES;
        UIButton *detailButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        [detailButton addTarget:self action:@selector(showDetailView:) forControlEvents:UIControlEventTouchUpInside];
        pinAnnotationView.rightCalloutAccessoryView=detailButton;
// ... code ...
} 
```

按钮：

```
-(IBAction)showDetailView:(UIButton *)sender
{
    InfoViewController *infoView = [[InfoViewController alloc] init];
    [self.navigationController pushViewController:infoView animated:YES];

    NSLog(@"pushed Button!!!!!!");

} 
```

我的目标：`ViewController`按下`detailButton`并推到`InfoViewController`。

也许这只是一个小错误，我没有发现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:56:30.463

如果您的 InfoViewController 在情节提要中，那么您需要获取那个，而不是使用 alloc init 创建一个新的。InfoViewController 需要故事板中的标识符，然后您可以像这样实例化它：

```
InfoViewController *infoView = [self.storyboard instantiateViewControllerWithIdentifier:@"InfoViewController"]; 
```

# android - 广告提供商的必要清单权限？

> ID：14872457
> 
> 赞同：0
> 
> 时间：2013-02-14T10:16:55.450
> 
> 标签：android, permissions, manifest

我想为我的 android 应用尝试一些不同的广告提供商。他们中的一些人希望清单中有很多我并不总是觉得合适的权限。

（当然他们都需要 android.permission.INTERNET 因为他们从他们的服务器获取广告）

例如：千禧传媒想要android.permission.WRITE_EXTERNAL_STORAGE；许多其他提供商想要 android.permission.ACCESS_COARSE_LOCATION。

如果我没有在清单中授予这些权限，那么应用程序是否可以正常工作，或者这会导致问题吗？

如果没有这些清单权限，我是否会从这些提供商那里获得广告？

**编辑：**
很难测试广告提供商的所有 SDK。对于 MoPub，我知道如果我不给他们 android.permission.ACCESS_COARSE_LOCATION 它仍然有效 - 我从他们那里得到广告。

我认为只有当他们的 SDK 代码尝试使用需要许可的方法时，我才会收到错误消息——但他们可以捕捉到这一点。所以我的问题更多：

所有广告提供商都正确处理这个问题吗？然后他们会拒绝一般地发送广告吗？

**编辑 2：**
是否有人因为未授予广告提供商 SDK 请求的特殊权限而出现错误/崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:22:19.343

来自[官方文档](http://developer.android.com/guide/topics/manifest/manifest-intro.html#perms)

> 如果应用程序需要访问受权限保护的功能，它必须使用 `<uses-permission>`清单中的元素声明它需要该权限。然后，当应用程序安装在设备上时，安装程​​序通过检查签署应用程序证书的机构并在某些情况下询问用户来确定是否授予请求的权限。如果授予权限，则应用程序可以使用受保护的功能。如果没有，它访问这些功能的尝试将简单地失败，而不会通知用户。

[这是](http://developer.android.com/reference/android/Manifest.permission.html)您必须根据需要提供的权限的完整列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:19:15.523

应用程序可以正常工作，但你不会得到添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:19:23.747

这些是强制的，你需要在Android Manifest文件中添加权限......它的强制

# http - 如何检测检查 http 消息的文件上传？

> ID：14872460
> 
> 赞同：1
> 
> 时间：2013-02-14T10:16:57.610
> 
> 标签：http, file-upload, http-headers

我想检测 Http-Request 是否是文件上传。我知道，有一个视图可能表明文件上传：

*   请求方法：如果是 POST，通常有一个消息体。但我知道，也可以使用 GET 请求发送内容。是否也可以使用 GET 请求上传文件？
*   content-type：我猜，content-type 字段通常是设置的，file-upload-message。但是文件上传的内容类型是什么？
*   content-length：应该为文件上传设置 content-length 字段。

有一个视图问题离开：

如何区分文件上传和普通的 html 形式的帖子？浏览器是否使用分块编码进行文件上传？（据我所知，那是没有意义的，但我知道的不多）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:32:12.087

通常可以通过检查请求是否为*multipart*来检测。

以下示例代码是来自[Apache Commons FileUpload 库的 c&p](https://github.com/apache/commons-fileupload/blob/b_1_2_1/src/java/org/apache/commons/fileupload/servlet/ServletFileUpload.java#L66)

```
/**
 * Utility method that determines whether the request contains multipart
 * content.
 *
 * @param request The servlet request to be evaluated. Must be non-null.
 *
 * @return <code>true</code> if the request is multipart;
 *         <code>false</code> otherwise.
 */
public static final boolean isMultipartContent(
        HttpServletRequest request) {
    if (!"post".equals(request.getMethod().toLowerCase())) {
        return false;
    }
    String contentType = request.getContentType();
    if (contentType == null) {
        return false;
    }
    if (contentType.toLowerCase().startsWith(MULTIPART)) {
        return true;
    }
    return false;
} 
```

其中 MULTIPART 是

```
/**
 * Part of HTTP content type header.
 */
public static final String MULTIPART = "multipart/"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-17T19:07:07.747

检查多部分表单提交只是让您通过前门。问题是，您可以有一个实际上不包含文件上传的多部分表单提交。如果你想知道你是否真的有上传的文件，你需要搜索表单部分。像这样：

```
public static int getUploadCount(HttpServletRequest request) throws Exception {
    int fileCt = 0;
    String[] tokens;
    String contentDisp;
    String fileName;
    // Search through the parts for uploaded files
    try{
        for (Part part : request.getParts()) {
            fileName = "";
            contentDisp = part.getHeader("content-disposition");
            // System.out.println("content-disposition header= "+contentDisp);
            tokens = contentDisp.split(";");
            for (String token : tokens) {
                if (token.trim().startsWith("filename")) {
                    fileName = token.substring(
                        token.indexOf("=") + 2, 
                        token.length() - 1
                    );
                }
            }

            if (!fileName.equals("")) {
                fileCt++;
            }
        }
    } catch (ServletException ex) {
        throw new Exception(ex);
    }
    return fileCt;
} 
```

# excel - 将列中的所有单元格从日期格式化为文本

> ID：14872464
> 
> 赞同：2
> 
> 时间：2013-02-14T10:17:20.480
> 
> 标签：excel, office-2013

我有一个大约 500 行的 excel 文档。我需要将 B 列中的所有单元格从日期格式化为文本。

这是它现在的样子：

```
2012-06-15
2012-06-01
2012-06-14 
```

格式化为文本时的样子：

```
41075
41061
41074 
```

据我了解，这是代表自 1900 年 1 月 1 日以来的天数的时间戳，对吗？无论如何，这不是我想要的。我希望该字段的值与文本的列类型完全相同。我已经找到了使用这样的函数的各种解决方案：`=TEXT(B1, "yyyy-mm-dd")`但这不是重新格式化单元格，而是从一个单元格中提取一个值，重新格式化它并将其表示为另一个单元格中的文本。

我遵循的规则：`I want all cells in B column to have the type text without changing the value`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:03:47.290

如果您的列`A`是`D`500 行的日期，那么：

1.  使用`=TEXT(A1, "yyyy-mm-dd")`您在 cell 中描述的功能`E1`。

2.  将此公式复制 4 列宽，向下 500 行。

3.  **然后将值**复制并粘贴到前面的单元格中。

**复制示例：**

![复制](../Images/ff09697302a8424ab7a69f73c3c17509.png)

**输出：**

![输出](../Images/2b952113798e56193764b389d442f1f9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:24:41.370

没错，Excel 在内部将日期存储为自 1900 年 1 月 1 日以来的天数（除了一个小的闰年错误）。

因此，恐怕你不能同时拥有：

*   要么保留值，例如 ( `41075`) 并简单地将其*格式化*为日期，因此它将显示为`2012-06-15`-
*   或者您将其转换为文本格式 - 但是您要么
    *   失去基础价值 - 如果您使用您提到的文本函数将其转换为您希望的格式
    *   保留值 ( `41075`)，但看不到日期

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T10:52:59.830

如果您正在输入值，您可以在`'`值之前添加 a 以将其保留为文本。

例如

![示例输出](../Images/0ab6e52785b62926771afc7ef39a0d72.png)

但是根据第三方服务用于导入这些值的方法，这可能不起作用，我敢打赌，除非您将其导出到文本编辑器并再次导入，否则您将无法绕过它。

**还**可以尝试为您的第三方服务使用不同类型的文本，例如`"2012-06-15"`，有些人看到引号并删除它们。

# scriptella - 如何设置速度模板的路径？

> ID：14872465
> 
> 赞同：0
> 
> 时间：2013-02-14T10:17:26.663
> 
> 标签：scriptella

我尝试用脚本和速度制作报告。在脚本分布中只有一个速度示例。那里的页眉和页脚是当前路径。但是如何使用模板设置特定路径？

@ejboy，谢谢你的重播。

速度驱动程序有两个问题。首先是如何将速度连接定义中的 url 参数设置为变量。我有一个像“SELECT * FROM table”这样的查询，对于每条记录，我必须在一个单独的文件中制作一个报告，该文件的名称与记录的 id 相关联。

第二个问题是“header.vm”和“footer.vm”文件的路径。在我的项目（我使用 maven）中，我的 etl.xml 文件位于 src/main/resources/scriptella 下，并且页眉和页脚可以位于同一目录中。我在哪里可以在 etl.xml （或我可以包含的属性文件）中设置此路径。

问候， 雅克

# php - 生成文本框

> ID：14872466
> 
> 赞同：0
> 
> 时间：2013-02-14T10:17:26.833
> 
> 标签：php, javascript

如何使用选择选项在 JavaScript 中生成 n 个输入文本框。以及如何在 PHP 中获取变量。

下面是我的html表单

```
<HTML>
    <HEAD>
        <TITLE>Dynamically add Textbox in html Form using JavaScript</TITLE>
        <SCRIPT language="javascript">
            var numberOfElementsAdded;
            var arrayOfInputs = new Array();
            function addToDatabase(numberOfElementsAdded) {
                numberOfElementsAdded = numberOfElementsAdded * numberOfElementsAdded;
                var alltext = "";
                for (var j = 1; j <= numberOfElementsAdded; j++) {
                    var tvalue = document.getElementsByName("text" + j)[0].value;
                    arrayOfInputs.push(tvalue);
                    alltext = alltext + tvalue + " ";
                }
                alert(alltext);
            }

            function add(type, num) {
                numberOfElementsAdded = num;
                //Create an input type dynamically.
                var k = 0;
                for (var j = 0; j < num; j++) {
                    for (var i = 0; i < 4; i++) {
                        var element = document.createElement("input");
                        k = k + 1;
                        //Assign different attributes to the element.
                        element.setAttribute("type", type + k);
                        element.setAttribute("id", type + k);
                        element.setAttribute("name", type + k);
                        element.setAttribute('width', '30');
                        element.setAttribute('border', '3px solid #FF0000');

                        var foo = document.getElementById("fooBar");
                        //Append the element in page (in span).
                        foo.appendChild(element);
                    }
                    var breakLoop = document.createElement('br')
                    foo.appendChild(breakLoop)
                }
                var element = document.createElement("input");
                element.setAttribute("type", "button");
                element.setAttribute("id", "Submit");
                element.setAttribute("name", "Insert into database");
                element.setAttribute("value", "Insert into database");
                element.setAttribute("onclick", "addToDatabase(numberOfElementsAdded)");
                var breakLoop = document.createElement('br')
                foo.appendChild(breakLoop)
                foo.appendChild(element);
            }
        </SCRIPT>
    </HEAD>
    <BODY>
        <FORM>
        <H2>Dynamically add element in form.</H2>
        <SELECT name="element">
            <OPTION value="1">1</OPTION>
            <OPTION value="2">2</OPTION>
            <OPTION value="3">3</OPTION>
            <OPTION value="4">4</OPTION>
            <OPTION value="5">5</OPTION>
            <OPTION value="6">6</OPTION>
            <OPTION value="7">7</OPTION>
            <OPTION value="8">8</OPTION>
            <OPTION value="9">9</OPTION>
            <OPTION value="10">10</OPTION>
        </SELECT>
        <INPUT type="button" value="Add" onclick="add('text',document.forms[0].element.value)"/>
        <BR/>
        <span id="fooBar">&nbsp;</span>
        </FORM>
    </BODY>
</HTML> 
```

它生成文本框。但我想获取文本框的值作为 PHP 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:24:39.083

假设代码正确生成文本框，要获取 PHP 中的值，您必须修改：

```
element.setAttribute("name", "Insert into database"); 
```

至

```
element.setAttribute("name", "myFieldName[]"); // with the [] brackets 
```

然后在 PHP 中，你会这样得到它：

```
$fields = $_POST['myFieldName'];

// make it into a single delimited field
$fields = implode('|', $fields); 
```

# c# - 运行时带有变量的 TableLayoutPanel 中的单元格颜色？

> ID：14872468
> 
> 赞同：0
> 
> 时间：2013-02-14T10:17:33.323
> 
> 标签：c#, winforms, tablelayoutpanel

我有一个 TableLayoutPanel 目前有多行 + 列。它由一个 for 循环填充，每次运行时都会有所不同，具体取决于 SQL 查询的输出。

```
void tblTableLayoutPanel_CellPaint(object sender, TableLayoutCellPaintEventArgs e)
    {
        if (e.Row == 2 || e.Row == 4)
        {
            Graphics g = e.Graphics;
            Rectangle r = e.CellBounds;
            g.FillRectangle(Brushes.Red, r);
        }
    } 
```

这是我目前为单个行着色的代码，但我希望能够根据 2 个变量（J 和 K）为单个单元格着色。

```
 TableLayoutPanel.Controls.Add(label, J, K); 
```

同样，这里是我如何使用 J 和 K 向 TableLayoutPanel 中的单元格添加标签的示例。是否可以重载 CellPaint 方法以允许在其中使用 J 和 K？或者如果是这样，我怎么能在运行时重新着色单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:53:40.270

CellPaint 是一个事件而不是方法。我建议您创建一个方法**GetColor(int row,int column)**，它返回一个颜色**画笔**，然后在 CellPaint 事件中使用 e.Row 和 e.Column 调用您的方法。

# soundcloud - 从响亮的可嵌入小部件中隐藏标题/图稿

> ID：14872474
> 
> 赞同：0
> 
> 时间：2013-02-14T10:17:45.387
> 
> 标签：soundcloud

我正在寻找一种方法来从可嵌入的 soundcloud 小部件中隐藏艺术品/标题/其他识别信息。这是一个测验项目，所以用户应该能够播放录音，而不会看到作者/标题。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:02:22.883

您可以将小部件放在屏幕外并使用小部件 API 控制播放。

# java - java小技巧（字符串转数组）

> ID：14872476
> 
> 赞同：-2
> 
> 时间：2013-02-14T10:17:47.467
> 
> 标签：java, arrays, string, converter

那里。我在java编程方面遇到了一些麻烦

**有人可以给我一个提示，使用哪种方法

```
string= "23578893762467290465" convert to array y= [2,3,5,7]....??** 
```

我的意思是，例如 y[0]=2, y[1]=3, y[2]=5....

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:25:38.940

将 String 转换为整数数组。

```
String string= "23578893762467290465";
int[] intArray = new int[string.length()];
for(int i = 0; i<string.length(); i++){
    intArray[i] = Integer.parseInt(String.valueOf(string.charAt(i)));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T10:24:11.873

```
String.toCharArray() 
```

从官方[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray%28%29)：

> 它返回一个新分配的字符数组，它的长度就是这个字符串的长度，并且它的内容被初始化为包含这个字符串表示的字符序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:08:28.370

```
public class StringToInt{
public int[] convert(String arg){
    char[] characters = arg.toCharArray();
    int[] integers = new int[arg.length()];

    for ( int i = 0; i < characters.length; i++ ) 
        integers[i] = Character.getNumericValue(characters[i]);  

    return integers;
}

private void prettyPrint(int[] result){
    System.out.print("array: ");
    for(int i : result){
        System.out.print(i+" ");
    }
}

public static void main(String[]args){
    StringToInt converter = new StringToInt();
    int[] result = converter.convert(args.length > 0?args[0]: "23578893762467290465" );
    converter.prettyPrint(result);
}
} 
```

好吧，人们打败了我。但这会奏效。

在本质上：

*   转换为字符数组。
*   为每个字符调用*Character.getNumericValue() 。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:23:21.483

另一种方式可能是：

```
int[] arr = new int[string.length()];

for(int i = 0; i<string.length(); i++){
    arr[i] = Character.getNumericValue(string.charAt(i));
    System.out.println(arr[i] + "  ") ;
} 
```

# sql - 在 Sql Server 问题中存储多行？

> ID：14872477
> 
> 赞同：0
> 
> 时间：2013-02-14T10:17:47.907
> 
> 标签：sql, sql-server

我正在开发适用于 SQL Server 的程序。

对于将数据存储在数据库表中，以下哪种方法是正确的？

1.  在一张表中存储多行（1000 万条记录）

2.  在几个表中存储更少的行（500000 条记录）（exp：每年创建一个表）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:30:43.620

这取决于您访问数据的频率。如果您不使用旧记录，那么您可以归档这些记录。拆分表是不可取的，因为它可能会使您在获取数据时感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:45:06.080

我会说将所有数据存储在一个表中，但在旧数据上实现一个表分区。对数据进行分区将提高查询性能。

以下是一些参考资料：

[http://www.mssqltips.com/sqlservertip/1914/sql-server-database-partitioning-myths-and-truths/](http://www.mssqltips.com/sqlservertip/1914/sql-server-database-partitioning-myths-and-truths/)

[http://msdn.microsoft.com/en-us/library/ms188730.aspx](http://msdn.microsoft.com/en-us/library/ms188730.aspx)

[http://blog.sqlauthority.com/2008/01/25/sql-server-2005-database-table-partitioning-tutorial-how-to-horizo​​ntal-partition-database-table/](http://blog.sqlauthority.com/2008/01/25/sql-server-2005-database-table-partitioning-tutorial-how-to-horizontal-partition-database-table/)

请注意，此表分区功能仅在企业版中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T10:03:37.537

这要看情况！你打算用这些数据做什么？如果您多次查询此数据，则将数据拆分为（例如）年份表可能是更好的解决方案。这样，您将获得更好的性能，因为您必须查询较小的表。但另一方面。使用更大的表和良好的查询，您甚至可能看不到性能问题。如果您只需要存储这些数据，最好只使用 1 个表。

顺便说一句，要将这些数据加载到数据库中，您可以使用 BCP（批量复制），这是一种插入大量行的快速方法。

# c# - GeometryDrawing 的动画笔刷

> ID：14872479
> 
> 赞同：0
> 
> 时间：2013-02-14T10:17:58.637
> 
> 标签：c#, .net, wpf, animation

我正在尝试为 Rectangle 的鼠标悬停设置动画，以便矩形下 GeometryDrawing 的渐变颜色发生变化。

但是，当我这样做时，我收到以下错误：

```
Cannot resolve all property references in the property path 'Drawing.(0).(1)[0].(2)'. Verify that applicable objects support the properties. 
```

我正在使用的代码如下：

```
<Canvas>
    <Rectangle Width="{Binding ElementName=ParentControl, Path=Width}" Height="{Binding ElementName=ParentControl, Path=Height}">
        <Rectangle.Resources>
        </Rectangle.Resources>
        <Rectangle.Style>
            <Style TargetType="Rectangle">
                <Style.Triggers>
                    <EventTrigger RoutedEvent="MouseEnter">
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Storyboard.TargetProperty="Drawing.(GeometryDrawing.Brush).(RadialGradientBrush.GradientStops)[0].(GradientStop.Color)" To="#486A71" Duration="0:0:0.5"></ColorAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                    <EventTrigger RoutedEvent="MouseLeave">
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Storyboard.TargetProperty="Drawing.(GeometryDrawing.Brush).(RadialGradientBrush.GradientStops)[0].(GradientStop.Color)" To="#485A71" Duration="0:0:0.5" FillBehavior="Stop"></ColorAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Style.Triggers>
            </Style>
        </Rectangle.Style>
        <Rectangle.Fill>
            <DrawingBrush>
                <DrawingBrush.Drawing>
                    <GeometryDrawing>
                        <GeometryDrawing.Geometry>
                            <GeometryGroup>
                                <PathGeometry>
                                    <PathFigure StartPoint="2,0">
                                        <PathFigure.Segments>
                                            <LineSegment Point="200,0"></LineSegment>
                                            <LineSegment Point="200,7"></LineSegment>
                                            <LineSegment Point="185,20"></LineSegment>
                                            <LineSegment Point="200,33"></LineSegment>
                                            <LineSegment Point="200,40"></LineSegment>
                                            <LineSegment Point="2,40"></LineSegment>
                                        </PathFigure.Segments>
                                    </PathFigure>
                                </PathGeometry>
                            </GeometryGroup>
                        </GeometryDrawing.Geometry>
                        <GeometryDrawing.Brush>
                            <RadialGradientBrush GradientOrigin="0, 0.5" Center="0, 0.5" RadiusX="0.90" RadiusY="0.6">
                                <RadialGradientBrush.GradientStops>
                                    <GradientStop Color="#485A71" Offset="0" x:Name="GradientStop0"></GradientStop>
                                    <GradientStop Color="#687F9F" Offset="1" x:Name="GradientStop1"></GradientStop>
                                </RadialGradientBrush.GradientStops>
                            </RadialGradientBrush>
                        </GeometryDrawing.Brush>
                        <GeometryDrawing.Pen>
                            <Pen Thickness="2" Brush="#374C6A" />
                        </GeometryDrawing.Pen>
                    </GeometryDrawing>
                </DrawingBrush.Drawing>
            </DrawingBrush>
        </Rectangle.Fill>
    </Rectangle>
</Canvas> 
```

我知道我需要整理`Storyboard.TargetProperty`属性的值，但是我仍在学习 WPF，所以我不太知道如何解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:25:26.643

好吧，我觉得自己很傻！看起来我在引用渐变时错过了一个属性！

我还发现在查找属性时不需要使用括号：

```
<ColorAnimation Storyboard.TargetProperty="Fill.Drawing.Brush.GradientStops[0].Color" To="#486A71" Duration="0:0:0.5"></ColorAnimation> 
```

我从这个答案中得到了提示：[Trouble animating RadialGradientBrush in WPF](https://stackoverflow.com/questions/2539910/trouble-animating-radialgradientbrush-in-wpf?rq=1)

# actionscript-3 - 没有插件的 actionscript 3 中的 3d 对象

> ID：14872480
> 
> 赞同：0
> 
> 时间：2013-02-14T10:17:59.607
> 
> 标签：actionscript-3

我对 actionscript 还很陌生，想知道是否可以使用 actionscript 创建 3d 形状（圆锥体、球体、立方体）。

我不想使用插件。

形状必须是 3d，因为我需要旋转它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:23:55.120

在这里，您将找到您正在寻找的 Adob​​e 文档：http: [//help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS7D38179D-58B9-409c-9E5C-257DDECB1A02.html](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS7D38179D-58B9-409c-9E5C-257DDECB1A02.html)

您是否有任何特定原因不想使用像 away3D 这样的 3D 库？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:50:23.453

我认为 Matej 的回答并未完全涵盖该主题，因为他提供的链接仅描述了绘制 3D 对象的经典显示列表方法。根据您的需要，使用经典显示列表绘制内容可能会很慢，因为它不是 GPU 加速的。如果您想利用您的 GPU，您可以使用 Stage3D API - 这不需要任何外部框架。[对于初学者来说，这是](http://www.adobe.com/devnet/flashplayer/articles/how-stage3d-works.html)一篇很棒的文章。即使您可以使用“原始”Context3D 渲染 3D 内容，我还是建议您使用 Away3D 或 Alternativa3D 之类的框架。顺便说一句，两者都是开源的。

# netbeans - Netbeans & JavaFX - 在每次运行时清理和构建？

> ID：14872484
> 
> 赞同：5
> 
> 时间：2013-02-14T10:18:03.990
> 
> 标签：netbeans, javafx-2, fxml

我最近开始`JavaFX`在 Netbeans IDE 工作。我附上了 Hello World 的例子，因为它并不复杂，但有一件大事让我非常恼火：

在我的`FXML`项目中，我必须在应用更改之前清理和构建整个项目。

*   这是正常的吗？
*   我可以跳过这个吗？在我的联想瑜伽上工作，`Clean & Build & Run`需要一分钟多的时间！那是渴望一个单一的改变的角色。

我在用着：

*   网豆版本：`7.2.1`
*   项目类型：`JavaFX FXML`
*   JDK：`7`

另外，我无法选中该`Properties -> Build -> Compile -> Compile on Save`复选框。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T10:21:41.330

Netbeans 7.2.1 不支持 JavaFX 项目的保存时编译，因此您每次都必须手动重新编译项目。

一种替代方法是创建一个普通的 Java 项目，导入 JavaFX JAR ( `jfxrt.jar`IIRC)。保存时编译将可用，并且您不必每次进行更改时都重新编译整个项目（尽管在发布项目之前您仍应运行“清理并构建”）。

这样做时，您可能会丢失一些与 JavaFx 相关的特性——不完全确定。

# asp.net - 将“and userName in('kuldeep')”分配给变量并添加到查询然后执行

> ID：14872485
> 
> 赞同：-1
> 
> 时间：2013-02-14T10:18:04.760
> 
> 标签：asp.net, sql-server

我有一些代码，例如：

```
declare @Condition nvarchar(50), --value  'and user_name in ('deep') 
select * from table where id = 10 
```

之后`10`我想放`@Condition`价值。如何分配和放置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:02:54.143

要将包含 SQL 的字符串用作查询的一部分，您需要该`EXECUTE`语句。

```
DECLARE @Condition NVARCHAR(50) = 'AND user_name IN (''deep'')';

EXECUTE( 'SELECT * FROM table WHERE id = 10 ' + @Condition ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:26:04.793

使用[SET @local_variable](http://msdn.microsoft.com/en-us/library/aa259193%28v=sql.80%29.aspx)

```
SET { { @local_variable = expression } 
    | { @cursor_variable = { @cursor_variable | cursor_name 
            | { CURSOR [ FORWARD_ONLY | SCROLL ] 
                [ STATIC | KEYSET | DYNAMIC | FAST_FORWARD ] 
                [ READ_ONLY | SCROLL_LOCKS | OPTIMISTIC ] 
                [ TYPE_WARNING ] 
            FOR select_statement 
                [ FOR { READ ONLY | UPDATE [ OF column_name [ ,...n ] ] } 
                ] 
            } 
    } } 
} 
```

# git - 从远程 Git 存储库检索特定提交

> ID：14872486
> 
> 赞同：215
> 
> 时间：2013-02-14T10:18:07.943
> 
> 标签：git, git-fetch

有什么方法可以从远程 Git 存储库中只检索一个特定的提交而不在我的 PC 上克隆它？远程仓库的结构和我的完全一样，因此不会有任何冲突，但我不知道怎么做，我不想克隆那个巨大的仓库。

我是git新手，有什么办法吗？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2015-06-08T05:22:17.167

从 Git 版本 2.5+（2015 年第二季度）开始，实际上可以获取单个提交（无需克隆完整的 repo）。

请参阅[Fredrik Medley (](https://github.com/moroten) [)的](https://github.com/moroten)[提交 68ee628，2015](https://github.com/git/git/commit/68ee628932c2196742b77d2961c5e16360734a62)年5 月 21 日。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 a9d3493](https://github.com/git/git/commit/a9d34933803198f89ad721ee17f138b046131090))^(中，2015 年 6 月 1 日）)[`moroten`](https://github.com/moroten)
^([`gitster`](https://github.com/gitster))

您现在有一个新配置（在服务器端）

```
uploadpack.allowReachableSHA1InWant 
```

> 允许`upload-pack`接受请求可从任何参考提示访问的对象的获取请求。但是，请注意，计算对象可达性的计算成本很高。
> 默认为`false`.

如果您将该服务器端配置与浅层克隆 ( [`git fetch --depth=1`](https://stackoverflow.com/a/19394911/6309)) 结合使用，您可以请求一次提交（请参阅[`t/t5516-fetch-push.sh`](https://github.com/git/git/blob/68ee628932c2196742b77d2961c5e16360734a62/t/t5516-fetch-push.sh#L1123-L1176)：

```
git fetch --depth=1 ../testrepo/.git <full-length SHA1> 
```

您可以使用该`git cat-file`命令查看提交是否已被获取：

```
git cat-file commit <full-length SHA1> 
```

> " `git upload-pack`" that services " `git fetch`" 可以被告知为不在任何 ref 顶端的提交提供服务，只要它们可以通过`uploadpack.allowReachableSHA1InWant` 配置变量从 ref 访问。

正如[马特](https://stackoverflow.com/users/341994/matt)在[评论](https://stackoverflow.com/questions/14872486/retrieve-specific-commit-from-a-remote-git-repository/30701724#comment119562995_30701724)中指出的那样：

> 注意 SHA 必须是完整的未缩写的 SHA，否则 Git 会声称它找不到提交

* * *

完整的文档是：

> ## `upload-pack`: 可选地允许获取可达的 sha1

> 在`uploadpack.allowReachableSHA1InWant`服务器端设置配置选项后，“ `git fetch`”可以使用“want”行发出请求，该行命名尚未公布的对象（可能已从带外或从子模块指针获得）。
> 只有从分支提示可到达的对象，即广告分支和被隐藏的分支的并集`transfer.hideRefs`，才会被处理。
> 请注意，必须回溯历史记录以检查可达性会产生相关成本。
> 
> **当获取某个提交的内容时，可以使用此功能，其中 sha1 是已知的，而无需克隆整个存储库，尤其是在使用浅获取的情况下**。
> 
> 有用的案例是例如
> 
> *   历史中包含大文件的存储库，
> *   仅获取子模块结帐所需的数据，
> *   在共享 sha1 而不告诉它属于哪个确切分支以及在 Gerrit 中时，如果您考虑的是提交而不是更改编号。
>     （Gerrit 案例已经解决，`allowTipSHA1InWant`因为每个 Gerrit 更改都有一个参考。）

* * *

Git 2.6（2015 年第三季度）将改进该模型。
请参阅[Jeff King (](https://github.com/peff) [)的](https://github.com/peff)[提交 2bc31d1](https://github.com/git/git/commit/2bc31d1631229d863376d48ef84eb846fea1df02)和[提交 cc118a6](https://github.com/git/git/commit/cc118a65b4590cc2d669679260bad7ca627f2a30)（2015 年 7 月 28 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([824a0be 提交中](https://github.com/git/git/commit/824a0be6be8d6c3323003bae65b3df98387e575b))^(，2015 年 8 月 19 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> # `refs`: 支持**否定** `transfer.hideRefs`

> 如果您使用配置隐藏参考层次结构`transfer.hideRefs`，则无法稍后覆盖该配置以“取消隐藏”它。
> 这个补丁实现了一个“负面”隐藏，这会导致匹配立即被标记为未隐藏，即使另一个匹配会隐藏它。
> 我们注意以与配置机制提供给我们的方式相反的顺序应用匹配项，因为这让我们通常的“最后一个获胜”配置优先级起作用（`.git/config`例如，中的条目将覆盖`/etc/gitconfig`）。
> 
> 所以你现在可以这样做：
> 
> ```
> git config --system transfer.hideRefs refs/secret
> git config transfer.hideRefs '!refs/secret/not-so-secret' 
> ```
> 
> 隐藏`refs/secret`在所有回购中，除了一个特定回购中的一个公共位。

* * *

Git 2.7（2015 年 11 月/12 月）将再次改进：

请参阅[提交 948bfa2](https://github.com/git/git/commit/948bfa2c0f40a97d670c6a3fc22c05ceb2ec2c3f)、[提交 00b293e](https://github.com/git/git/commit/00b293e519d1aa0c5b57ae9359ec5306d7023b3f)（2015 年 11 月 5 日）、[提交 78a766a](https://github.com/git/git/commit/78a766ab6eaaa91c2638158bd4fda06a93291da0)、[提交 92cab49](https://github.com/git/git/commit/92cab492ba988ffd3e3edf040f19ba820306c833)、[提交 92cab49](https://github.com/git/git/commit/92cab492ba988ffd3e3edf040f19ba820306c833)、[提交 92cab49](https://github.com/git/git/commit/92cab492ba988ffd3e3edf040f19ba820306c833)（2015 年 11 月 3 日）、[提交 00b293e](https://github.com/git/git/commit/00b293e519d1aa0c5b57ae9359ec5306d7023b3f)、[提交 00b293e](https://github.com/git/git/commit/00b293e519d1aa0c5b57ae9359ec5306d7023b3f) （2015年11 月 5日）和[提交 92cab49](https://github.com/git/git/commit/92cab492ba988ffd3e3edf040f19ba820306c833)、[提交](https://github.com/git/git/commit/92cab492ba988ffd3e3edf040f19ba820306c833)[92cab49](https://github.com/git/git/commit/92cab492ba988ffd3e3edf040f19ba820306c833) [Lukas Fleischer (](https://github.com/lfos) [)](https://github.com/lfos)[提交 92cab49](https://github.com/git/git/commit/92cab492ba988ffd3e3edf040f19ba820306c833)（2015 年 11 月 3 日） 。 帮助者：[Eric Sunshine (](https://github.com/sunshineco) [)](https://github.com/sunshineco)。^(（由)^([Jeff King 合并 --](https://github.com/peff)) ^([--](https://github.com/peff))^在^([提交 dbba85e](https://github.com/git/git/commit/dbba85e46b9c7450710a23208ca1868179330e1e))^(中，2015 年 11 月 20 日）)[`lfos`](https://github.com/lfos)
[`sunshineco`](https://github.com/sunshineco)
^([`peff`](https://github.com/peff))

> ## `config.txt``hideRefs`: 记录命名空间的语义

> 目前，对于`transfer.hideRefs`设置命名空间时的行为方式还没有明确的定义。
> 说明`hideRefs`在这种情况下前缀匹配剥离的名称。这就是`hideRefs`当前在接收包中处理模式的方式。

> ## hideRefs：添加对匹配完整参考的支持

> 除了匹配剥离的 ref 之外，现在还可以添加`hideRefs`与完整（未剥离的）ref 匹配的模式。
> 为了区分剥离匹配和完全匹配，这些新模式必须以抑扬符 ( `^`) 为前缀。

因此，[新文档](https://github.com/git/git/blob/78a766ab6eaaa91c2638158bd4fda06a93291da0/Documentation/config.txt#L2677-L2684)：

```
transfer.hideRefs: 
```

> 如果名称空间正在使用中，则名称空间前缀会在与`transfer.hiderefs`模式匹配之前从每个引用中剥离。
> 例如，如果`refs/heads/master`在中指定`transfer.hideRefs`且当前命名空间为`foo`，`refs/namespaces/foo/refs/heads/master` 则从广告中省略，但`refs/heads/master`仍 `refs/namespaces/bar/refs/heads/master`作为所谓的“拥有”行进行广告。
> 为了在剥离之前匹配 refs，`^`请在 ref 名称前添加一个。如果组合`!`和`^`，`!`必须首先指定。

* * *

[R..](https://stackoverflow.com/users/379897/r)[在评论](https://stackoverflow.com/questions/14872486/retrieve-specific-commit-from-a-remote-git-repository/30701724#comment89086774_30701724)中提到了 config [`uploadpack.allowAnySHA1InWant`](https://git-scm.com/docs/git-config#git-config-uploadpackallowAnySHA1InWant)，它允许`upload-pack`接受一个`fetch`请求任何对象的请求。（默认为`false`）。

请参阅[David "novalis" Turner (](https://github.com/novalis) [)的](https://github.com/novalis)[提交 f8edeaa](https://github.com/git/git/commit/f8edeaa05d8623a9f6dad408237496c51101aad8)（2016 年 11 月，Git v2.11.1 ） ：[`novalis`](https://github.com/novalis)

> ## `upload-pack`：可选地允许获取任何 sha1

> 在我们相信用户绝对可以访问存储库中的所有内容的情况下，进行可访问性检查似乎有点愚蠢。
> 
> 此外，它在分布式系统中很活跃——也许一个服务器发布了一个 ref，但另一台服务器已经强制推送到该 ref，也许这两个 HTTP 请求最终被定向到这些不同的服务器。

* * *

使用 Git 2.34（2021 年第四季度），在 ( man ) 的另一侧运行的 " ^" ^([(](https://git-scm.com/docs/git-fetch)) ^(man) )[`git upload-pack`](https://github.com/git/git/blob/1ab13eb973fce31026165391900562be940e0f34/Documentation/git-upload-pack.txt)在^(处理[want](https://git-scm.com/docs/git-upload-pack) -) ref 请求时忘记考虑 ref 命名空间。[`git fetch`](https://github.com/git/git/blob/1ab13eb973fce31026165391900562be940e0f34/Documentation/git-fetch.txt)

请参阅[Kim Altintop () 的](https://github.com/kim)[commit 53a66ec](https://github.com/git/git/commit/53a66ec37cfd8fc9f9357f201ae16ae3e8795606)、[commit 3955140](https://github.com/git/git/commit/39551406539e6ea87f89f619f7f0800e887e9b57)、[commit bac01c6](https://github.com/git/git/commit/bac01c6469b2489042b867d409894a3152ec98a1)（2021 年 8 月 13 日[）](https://github.com/kim)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 1ab13eb](https://github.com/git/git/commit/1ab13eb973fce31026165391900562be940e0f34))^(中，2021 年 9 月 10 日）)[`kim`](https://github.com/kim)
^([`gitster`](https://github.com/gitster))

> ## [`docs`](https://github.com/git/git/commit/53a66ec37cfd8fc9f9357f201ae16ae3e8795606): 阐明 transfer.hideRefs 和命名空间的交互
> 
> ^(签字人：Kim Altintop)
> ^(审核人：Jonathan Tan)

> 展开文档中关于命名空间的部分`transfer.hideRefs`，指出 和 之间的细微`upload-pack`差别`receive-pack`。
> 
> [3955140](https://github.com/git/git/commit/39551406539e6ea87f89f619f7f0800e887e9b57)（“ [`upload-pack.c`](https://github.com/git/git/blob/39551406539e6ea87f89f619f7f0800e887e9b57/upload-pack.c)：对待希望引用相对于命名空间”，2021-07-30，Git v2.34.0 -[批次 #5](https://github.com/git/git/commit/8b7c11b8668b4e774f81a9f0b4c30144b818f1d1)中列出的[合并](https://github.com/git/git/commit/1ab13eb973fce31026165391900562be940e0f34)）教导拒绝s 隐藏引用，现在提到。 需要澄清的是，隐藏的 ref 的名称在任何时候都不会显示，但它指向的对象 id 可能。`upload-pack``want-ref`

`git config`现在在其[手册页](https://github.com/git/git/blob/53a66ec37cfd8fc9f9357f201ae16ae3e8795606/Documentation/config/transfer.txt#L55-L58)中包含：

> 在与模式匹配之前引用`transfer.hiderefs`。为了在剥离之前匹配 refs，`^`请在 ref 名称前添加一个。如果组合`!`和`^`，`!`必须首先指定。

`git config`现在在其[手册页](https://github.com/git/git/blob/53a66ec37cfd8fc9f9357f201ae16ae3e8795606/Documentation/config/transfer.txt#L61-L65)中包含：

> 从广告中省略。如果`uploadpack.allowRefInWant`设置， `upload-pack`将`want-ref refs/heads/master`在协议 v2 `fetch`命令中视为`refs/namespaces/foo/refs/heads/master`不存在。 `receive-pack`另一方面，仍然会宣传 ref 指向的对象 id 而不会提及其名称（所谓的“ `.hav`e”行）。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2013-02-14T10:23:16.903

您只克隆一次，因此如果您已经克隆了远程存储库，则从其中提取不会再次下载所有内容。只需指出您要提取的分支，或获取更改并签出您想要的提交。

从新存储库获取带宽**非常**便宜，因为它只会下载您没有的更改。考虑 Git 以最小的负载做出正确的事情。

Git将所有内容存储在`.git`文件夹中。提交不能单独获取和存储，它需要它的所有祖先。它们是*相互关联*的。

* * *

但是，为了减少下载大小，您可以要求 git 仅获取与特定分支或提交相关的对象：

```
git fetch origin refs/heads/branch:refs/remotes/origin/branch 
```

这将仅下载远程分支中包含的提交`branch` **（并且仅下载您错过的提交）**，并将其存储在`origin/branch`. 然后，您可以合并或结帐。

你也可以只指定一个 SHA1 提交：

```
git fetch origin 96de5297df870:refs/remotes/origin/foo-commit 
```

这将仅下载指定的 SHA-1 96de5297df870（以及您错过的其祖先）的提交，并将其存储为（不存在的）远程分支`origin/foo-commit`。

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2014-06-06T14:50:35.090

您可以简单地获取远程仓库的单个提交

```
git fetch <repo> <commit> 
```

在哪里，

*   `<repo>`可以是远程仓库名称（例如`origin`），甚至可以是远程仓库 URL（例如`https://git.foo.com/myrepo.git`）
*   `<commit>`可以是 SHA1 提交

例如

```
git fetch https://git.foo.com/myrepo.git 0a071603d87e0b89738599c160583a19a6d95545 
```

在您获取提交（以及丢失的祖先）之后，您可以简单地检查它

```
git checkout FETCH_HEAD 
```

请注意，这将使您进入“分离头”状态。

* * *

## 回答 #4

> 赞同：64
> 
> 时间：2013-12-03T12:43:17.463

我拉动了我的 git repo：

```
git pull --rebase <repo> <branch> 
```

允许 git 提取分支的所有代码，然后我去重置我感兴趣的提交。

`git reset --hard <commit-hash>`

希望这可以帮助。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2015-07-16T17:32:16.637

您可以简单地使用以下方法获取远程仓库：

```
git fetch <repo> 
```

在哪里，

*   `<repo>`可以是远程仓库名称（例如`origin`），甚至可以是远程仓库 URL（例如`https://git.foo.com/myrepo.git`）

例如：

```
git fetch https://git.foo.com/myrepo.git 
```

在您获取存储库后，您可以合并您想要的提交（因为问题是关于检索一个提交，而不是合并，您可以使用cherry-pick 只选择一个提交）：

```
git merge <commit> 
```

*   `<commit>`可以是 SHA1 提交

例如：

```
git cherry-pick 0a071603d87e0b89738599c160583a19a6d95545 
```

或者

```
git merge 0a071603d87e0b89738599c160583a19a6d95545 
```

如果是您要合并的最新提交，您也可以使用 FETCH_HEAD 变量：

```
git cherry-pick (or merge) FETCH_HEAD 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-05-16T23:15:14.440

这效果最好：

```
git fetch origin specific_commit
git checkout -b temp FETCH_HEAD 
```

将“temp”命名为您想要的任何名称......虽然这个分支可能是孤立的

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-28T15:42:04.597

我认为'git ls-remote'（[http://git-scm.com/docs/git-ls-remote](http://git-scm.com/docs/git-ls-remote)）应该做你想做的事。无需强制获取或拉动。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-03T04:19:49.577

最后，我找到了一种使用**git cherry-pick**克隆特定提交的方法。假设您在本地没有任何存储库并且您正在从远程提取特定提交，

**1）在本地和git init**中创建空存储库

 **2) **git remote add origin** " *url-of-repository* "

3) **git fetch origin** [这不会将您的文件移动到您的本地工作区，除非您合并]

4) **git cherry-pick** " *Enter-long-commit-hash-that-you-need* "

完成。这样，您将只在本地拥有来自该特定提交的文件。

## 输入长提交哈希：

你可以使用 -> **git log --pretty=oneline**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-16T14:56:11.073

如果请求的提交在远程仓库的拉取请求中，您可以通过其 ID 获取它：

```
# Add the remote repo path, let's call it 'upstream':
git remote add upstream https://github.com/repo/project.git

# checkout the pull ID, for example ID '60':
git fetch upstream pull/60/head && git checkout FETCH_HEAD 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-12T08:20:43.207

在一个项目中，我们遇到了一个问题，因此我们不得不恢复到某个提交。我们使用以下命令成功实现了它：

```
git reset --hard <commitID> 
```**

# matlab - 获取变量名

> ID：14872487
> 
> 赞同：2
> 
> 时间：2013-02-14T10:18:09.200
> 
> 标签：matlab

我正在尝试创建一个散点图，使用变量名称标记 x 轴。

我尝试使用 R 命令获取数据集变量的变量名称：

```
name(dsExample.Variable) 
```

但这不起作用。

我尝试了另一个stackoverflow问题 [Matlab get string contains variable name中给出的代码](https://stackoverflow.com/questions/11453165/matlab-get-string-containing-variable-name)

但我得到了一个空白的答案。也许是因为使用了数据集而不是矩阵，但后来我尝试使用 double() 作为输入来转换数据集变量。

接下来我应该尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:19:38.847

您可以使用以下方法检索数据集中的变量名称`get`：

```
data = rand(1000,2);
d = dataset({data, 'Random'});

scatter(data(:,1), data(:,2));
xlabel( get(d,'VarName') ); 
```

# extjs - 通过 nodeid 获取树节点

> ID：14872488
> 
> 赞同：0
> 
> 时间：2013-02-14T10:18:09.607
> 
> 标签：extjs

如果树未展开，则无法获取树的节点。我是这样使用的。tree.getNodeById(id);

提前致谢！

已解决：这是我使用的代码。

```
 node_ids = [search_node_id,parent1_node_id,parent2_node_id]

 function select_node(node_ids,length,evt,e){
 var node=leftnav_treePanel.getNodeById(node_ids[length]); //length is length of node_ids list
 var ajaxReq = ajaxRequest(node.attributes.url,0,"GET",true);
 ajaxReq.request({
     success: function(xhr) {
        var response=Ext.util.JSON.decode(xhr.responseText);
        if(length>0){
            removeChild(node); // method to remove existing childnodes
            appendChild(response.nodes,node); // method to add child nodes from response
            node.expand();
            select_node(node_ids,length-1,evt,e);
        }else{
           node.fireEvent(evt,node,e);
        }
            },
     failure: function(xhr){
            Ext.MessageBox.alert( _("Failure") , xhr.statusText);
     }
 }); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:23:24.753

因为您没有提供任何代码，所以对这里发生的事情进行了疯狂的猜测。我认为您有一个通过 ajax 异步加载的树存储，并且存储中的节点尚未加载到用户页面，这就是 javascript 无法找到它们的原因。

# asp.net - 在 Umbraco CMS 中导入 asp.net 和 html 页面

> ID：14872489
> 
> 赞同：0
> 
> 时间：2013-02-14T10:18:10.873
> 
> 标签：asp.net, asp-classic, import, umbraco

我是 Umbraco CMS 的新手。我有一个用 asp 和 asp.net 开发的现有网站。现在我需要使用 Umbraco CMS 将这个现有网站转换为新网站。

现有网站中可用的页面几乎都是静态页面。

**我的问题：**有什么方法可以将这些静态页面导入我的 Umbraco 网站。这样我就可以跳过在 Umbraco 中手动创建这些页面的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:39:14.677

简而言之，这取决于您需要在原始页面上编辑多少以及有多少页面。

如果内容永远不会被编辑，那么您可以像创建普通母版页（umbraco 模板）一样创建大多数内容。然后，您可以添加导航和其他 CMS 规范

或者另一种方法是创建 1 个模板并向 DocType 添加一个大文本框，然后您可以将 HTML 粘贴到其中。但是，这将意味着您最终会在数据库中加载大量 HTML。

如果您想让它成为一个“真正的”Umbraco 站点并尽可能多地使用 CMS 功能，那么将 HTML 转换为 Umbraco 站点并没有真正简单的方法。

如果数据在数据库中，您可以使用 CMSImport 并将旧的映射到新的 DocType 字段，但您可能仍然需要在导入之前对其进行一些 HTMLTidy 工作。

根据页面的数量，我认为最好和最简单的方法通常是复制和粘贴，因为它使您有机会同时执行内容审核并在必要时清理 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-15T10:59:09.507

我以前这样做过。创建了一个带有页眉和页脚以及主要内容区域的基本模板/视图。

然后使用 Screaming Frog（或类似工具）抓取该网站。使用页面抓取的输出来制作一个以逗号分隔的 Urls 列表，然后使用它来查找每个页面。对于每个页面，使用 url 的名称创建一个 Umbraco 页面，即 /something-page-name = 'Something Page Name' 使用 HTML Agility 包导航 HTML 并提取标题、描述等关键元素并找到主要内容通过导航 DOM 并将该部分的 InnerHTML 放入 Umrbaco 页面的内容字段并*保存并发布*。

确保您允许 Umbraco 中的内容编辑器编辑在源页面中找到的所有 html 元素。即，您可能有编辑可能无法识别的*部分*或*小标签。*

# iphone - 使用 performSelector:withObject: afterDelay: inside UIButton action

> ID：14872490
> 
> 赞同：1
> 
> 时间：2013-02-14T10:18:12.207
> 
> 标签：iphone, ios, objective-c, ipad

我正在使用 `[performSelector:@selector(reloadData) withObject:nil afterDelay:0.01]`UIButton 的内部 IBAction，reloadData 方法以特定方式在主视图上绘制了一些子视图，问题是当我快速反复点击按钮时，选择器“ReloadData”多次执行，事件虽然我正在取消之前对该选择器的所有请求，这会导致主视图中的子视图重复

```
-(IBAction) myButtonIsTapped
{
     [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(reloadData) object:nil];

    [self performSelector:@selector(reloadData) withObject:nil afterDelay:0.01];

} 
```

并重新加载数据方法，如下所示：

```
-(void) reloadData
{
     @synchronized(self){
        // clear all subviews from the main view
        // draw new subviews
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:21:20.263

那这个呢：

```
-(IBAction) myButtonIsTapped
{
    [self.myButton setUserInteractionEnabled:NO];

    [self performSelector:@selector(reloadData) withObject:nil afterDelay:0.01];

}

-(void) reloadData
{
    // Long task...
    // Enable the button again:
    [self.myButton setUserInteractionEnabled:YES];

} 
```

有时，控制用户正在做什么（UI）比从逻辑上处理他所做的事情更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:20:55.920

做一件事，创建一个`BOOL variable`并设置为`viewdidload`是，如果是，则检查函数，然后方法调用，并在 buttonmake 方法中将其设为否。

# php - 运行'pdf2swf -Q 10'时PHP exec（）不会中止

> ID：14872491
> 
> 赞同：0
> 
> 时间：2013-02-14T10:18:21.573
> 
> 标签：php, exec, pdf2swf

我有一个 pdf 文件，可以让该`pdf2swf`工具永远运行。手动运行以下命令时：

```
pdf2swf -Q 10 test.pdf 
```

由于该标志，脚本在 10 秒后中止`-Q 10`，但是当使用 php 运行相同的命令时，脚本将永远运行。我试过使用`shell_exec()`,`exec()`和[passthru()](http://php.net/manual/en/function.passthru.php)，他们都忽略了这个`-Q`标志。

`pdf2swf`有没有人用工具或任何其他 PHP遇到过这样的事情`exec`？

**编辑**

当我手动运行它时

```
php -r "exec('pdf2swf -Q 10 test.pdf');" 
```

它在 10 秒后中止，但是当作为守护进程运行时，它不会中止

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:28:48.800

我在我的测试项目中尝试了相同的命令，它运行良好，没有问题，请找到我的代码 -

> $out = exec("pdf2swf font_example.pdf -o varun.swf", $rest);

# c++ - 是否有相当于 Linux 的 MulDiv？

> ID：14872499
> 
> 赞同：5
> 
> 时间：2013-02-14T10:18:48.457
> 
> 标签：c++, linux, winapi

Windows API 中的[MulDiv](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383718%28v=vs.85%29.aspx)便利函数相当于`(a*b)/c`，但它在除以之前将的中间结果存储`a*b` **在一个 64 位变量**`c`中，以避免`a*b`大于`MAX_INT`但`(a*b)/c`不是的整数溢出。

```
WINBASEAPI
int
WINAPI
MulDiv(
    _In_ int nNumber,
    _In_ int nNumerator,
    _In_ int nDenominator
    ); 
```

在Linux中编程时，是否有等效的便利功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T14:27:30.253

Linux 似乎没有等效的功能。

我创建了一个可以工作的简单内联函数（虽然我还没有用 64 位编译测试过它）

```
inline int mul_div(int number, int numerator, int denominator) {
    long long ret = number;
    ret *= numerator;
    ret /= denominator;
    return (int) ret;
} 
```

# groovy - Selenium 2 获取域上的所有 cookie

> ID：14872500
> 
> 赞同：0
> 
> 时间：2013-02-14T10:19:00.020
> 
> 标签：groovy, webdriver, geb

全部。我在域上获取 cookie 时遇到问题。我尝试获取cookie：

```
def "go to site"() {
    when:
        go "http://bla-bla-bla.bla"
    then:
        title == "Bla-bla-bla"
        // check cookies
        String cookies = driver.manage().getCookieNamed("name1").getValue()
        println cookies
} 
```

但是 cookie 可以`name1`在其他域上获取，而不是`http://bla-bla-bla.bla`，`name1`它是域上的 cookie，`http://ululu.ulu`并尝试获取所有域（站点）上的所有 cookie，但我没有得到。

请帮我获取所有域（站点）上的所有 cookie。谢谢你。我的英语很烂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:00:22.617

Selenium 仅允许您访问当前活动域的 cookie。也就是说，与当前浏览器状态相关的 cookie。

据我所知，没有办法解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-30T18:42:33.823

使用 Mozilla firefox[插件可以](https://addons.mozilla.org/en-US/firefox/addon/get-all-cookies-in-xml)解决此问题，该插件会将所有 cookie 以 XML 格式保存在当前配置文件目录下。这个附加组件将保存来自所有域的 cookie，并且可以使用 webdriver 访问。

有关实现的更多详细信息，请参阅以下博客： [http ://automationoverflow.blogspot.in/2013/07/getting-cookies-from-all-domains.html](http://automationoverflow.blogspot.in/2013/07/getting-cookies-from-all-domains.html)

如果这个答案对您有帮助，请记得投票。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-06T16:20:37.393

您不需要使用插件来获取所有 cookie（*包括 httpOnly 和安全 cookie*）。如果您使用 ChromeDriver，则可以从浏览器配置文件文件夹中获取所有 cookie。

**它们存储在 ./profile/Default/Cookies 中的 sqlite 数据库文件中**

java/selenium 的示例：

```
//set Browsers profile folder with ChromeOptions:

String intendedProfileDestinationPath = "C:/temp/somefolder";
ChromeOptions options = new ChromeOptions();
options.addArguments("user-data-dir="+intendedProfileDestinationPath);
WebDriver driver = new ChromeDriver(options);

//...visit one or more pages...    

//use sqlite to access file:

try {
  // db parameters
  String url = "jdbc:sqlite:"+pathToSqliteCookiesFile;
  // create a connection to the database
  conn = DriverManager.getConnection(url);
} catch (SQLException e) {
  System.out.println(e.getMessage());
}
String sql = "SELECT * FROM cookies";
ResultSet result = conn.createStatement().executeQuery(sql);
//... iterate resultset ... 
```

通过 maven 获取 sqlite 驱动程序：

```
<!-- https://mvnrepository.com/artifact/org.xerial/sqlite-jdbc -->
<dependency>
    <groupId>org.xerial</groupId>
    <artifactId>sqlite-jdbc</artifactId>
    <version>3.28.0</version>
</dependency> 
```

如果您只需要访问过的页面中的 cookie，请确保在重新启动 selenium 浏览器时删除完整的文件夹内容。

# three.js - 带纹理的 JSONLoader

> ID：14872502
> 
> 赞同：3
> 
> 时间：2013-02-14T10:19:04.657
> 
> 标签：three.js, blender

我在 Blender 中制作了一个带有纹理的形状并将其导出。然后用 json loader 显示它。几乎一切都很好，几何形状很好，可以在形状上看到纹理，但没有颜色。只是黑色和枯萎。如何显示纹理颜色？我做错了什么？

json文件：

```
{

    "metadata" :
    {
        "formatVersion" : 3.1,
        "generatedBy"   : "Blender 2.65 Exporter",
        "vertices"      : 64,
        "faces"         : 92,
        "normals"       : 64,
        "colors"        : 0,
        "uvs"           : [133],
        "materials"     : 1,
        "morphTargets"  : 0,
        "bones"         : 0
    },

    "scale" : 1.000000,

    "materials" : [ {
        "DbgColor" : 15658734,
        "DbgIndex" : 0,
        "DbgName" : "Material",
        "blending" : "NormalBlending",
        "colorAmbient" : [0.44769230556029527, 0.44769230556029527, 0.44769230556029527],
        "colorDiffuse" : [0.44769230556029527, 0.44769230556029527, 0.44769230556029527],
        "colorSpecular" : [0.0, 0.0, 0.0],
        "depthTest" : true,
        "depthWrite" : true,
        "mapNormal" : "texture3.jpg",
        "mapNormalFactor" : -0.058823585510253906,
        "mapNormalWrap" : ["repeat", "repeat"],
        "shading" : "Phong",
        "specularCoef" : 50,
        "transparency" : 1.0,
        "transparent" : false,
        "vertexColors" : false
    }],

    "vertices" : [-1.37836e-07,-2.55512,-2.55512,-1.37836e-07,2.55512,-2.55512,0.498479,-2.55512,-2.50602,0.498479,2.55512,-2.50602,0.977802,-2.55512,-2.36062,0.977802,2.55512,-2.36062,1.41955,-2.55512,-2.1245,1.41955,2.55512,-2.1245,1.80674,-2.55512,-1.80674,1.80674,2.55512,-1.80674,2.1245,-2.55512,-1.41955,2.1245,2.55512,-1.41955,2.36062,-2.55512,-0.977801,2.36062,2.55512,-0.977801,2.50602,-2.55512,-0.498479,2.50602,2.55512,-0.498479,2.55512,-2.55512,4.14106e-07,2.55512,2.55512,1.90731e-07,2.50602,-2.55512,0.498479,2.50602,2.55512,0.498479,2.36062,-2.55512,0.977802,2.36062,2.55512,0.977802,2.1245,-2.55512,1.41955,2.1245,2.55512,1.41955,1.80674,-2.55512,1.80674,1.80674,2.55512,1.80674,1.41955,-2.55512,2.1245,1.41955,2.55512,2.1245,0.977801,-2.55512,2.36062,0.977801,2.55512,2.36062,0.498478,-2.55512,2.50602,0.498478,2.55512,2.50602,-9.68575e-07,-2.55512,2.55512,-9.68575e-07,2.55512,2.55512,-0.49848,-2.55512,2.50602,-0.49848,2.55512,2.50602,-0.977803,-2.55512,2.36062,-0.977803,2.55512,2.36062,-1.41955,-2.55512,2.1245,-1.41955,2.55512,2.1245,-1.80674,-2.55512,1.80674,-1.80674,2.55512,1.80674,-2.12451,-2.55512,1.41955,-2.12451,2.55512,1.41955,-2.36062,-2.55512,0.977801,-2.36062,2.55512,0.9778,-2.50602,-2.55512,0.498477,-2.50602,2.55512,0.498477,-2.55512,-2.55512,-1.86021e-06,-2.55512,2.55512,-2.08358e-06,-2.50602,-2.55512,-0.498481,-2.50602,2.55512,-0.498481,-2.36062,-2.55512,-0.977804,-2.36062,2.55512,-0.977804,-2.1245,-2.55512,-1.41955,-2.1245,2.55512,-1.41955,-1.80674,-2.55512,-1.80674,-1.80674,2.55512,-1.80674,-1.41955,-2.55512,-2.12451,-1.41955,2.55512,-2.12451,-0.977799,-2.55512,-2.36062,-0.977799,2.55512,-2.36062,-0.498475,-2.55512,-2.50602,-0.498475,2.55512,-2.50602],

    "morphTargets" : [],

    "normals" : [0,-0.68569,-0.727866,0,0.68569,-0.727866,0.142003,0.68569,-0.713889,0.142003,-0.68569,-0.713889,0.278542,0.68569,-0.672475,0.278542,-0.68569,-0.672475,0.40437,0.68569,-0.605213,0.40437,-0.68569,-0.605213,0.514664,0.68569,-0.514664,0.514664,-0.68569,-0.514664,0.605213,0.68569,-0.40437,0.605213,-0.68569,-0.40437,0.672475,0.68569,-0.278542,0.672475,-0.68569,-0.278542,0.713889,0.68569,-0.142003,0.713889,-0.68569,-0.142003,0.727866,0.68569,0,0.727866,-0.68569,0,0.713889,0.68569,0.142003,0.713889,-0.68569,0.142003,0.672475,0.68569,0.278542,0.672475,-0.68569,0.278542,0.605213,0.68569,0.40437,0.605213,-0.68569,0.40437,0.514664,0.68569,0.514664,0.514664,-0.68569,0.514664,0.40437,0.68569,0.605213,0.40437,-0.68569,0.605213,0.278542,0.68569,0.672475,0.278542,-0.68569,0.672475,0.142003,0.68569,0.713889,0.142003,-0.68569,0.713889,0,0.68569,0.727866,0,-0.68569,0.727866,-0.142003,0.68569,0.713889,-0.142003,-0.68569,0.713889,-0.278542,0.68569,0.672475,-0.278542,-0.68569,0.672475,-0.40437,0.68569,0.605213,-0.40437,-0.68569,0.605213,-0.514664,0.68569,0.514664,-0.514664,-0.68569,0.514664,-0.605213,0.68569,0.40437,-0.605213,-0.68569,0.40437,-0.672475,0.68569,0.278542,-0.672475,-0.68569,0.278542,-0.713889,0.68569,0.142003,-0.713889,-0.68569,0.142003,-0.727866,0.68569,0,-0.727866,-0.68569,0,-0.713889,0.68569,-0.142003,-0.713889,-0.68569,-0.142003,-0.672475,0.68569,-0.278542,-0.672475,-0.68569,-0.278542,-0.605213,0.68569,-0.40437,-0.605213,-0.68569,-0.40437,-0.514664,0.68569,-0.514695,-0.514664,-0.68569,-0.514695,-0.40437,0.68569,-0.605213,-0.40437,-0.68569,-0.605213,-0.278542,0.68569,-0.672475,-0.278542,-0.68569,-0.672475,-0.142003,0.68569,-0.713889,-0.142003,-0.68569,-0.713889],

    "colors" : [],

    "uvs" : [[0.595239,0.415587,0.593966,0.00043,0.633876,0.000307,0.63515,0.415464,0.671471,0.000192,0.672745,0.415349,0.705306,8.8e-05,0.70658,0.415245,0.73408,0,0.735354,0.415157,0.735354,0.417126,0.73408,0.832282,0.705306,0.832194,0.70658,0.417037,0.671472,0.83209,0.672745,0.416934,0.633877,0.831975,0.63515,0.416818,0.593966,0.831853,0.59524,0.416696,0.553274,0.831728,0.554547,0.416571,0.513363,0.831605,0.514637,0.416449,0.475768,0.83149,0.477042,0.416333,0.441933,0.831386,0.443207,0.41623,0.41316,0.831298,0.414433,0.416141,0.736627,0.832106,0.735354,0.416949,0.769188,0.416845,0.770462,0.832002,0.806783,0.41673,0.808057,0.831887,0.846694,0.416608,0.847967,0.831764,0.887386,0.416483,0.88866,0.83164,0.927297,0.41636,0.92857,0.831517,0.964892,0.416245,0.966165,0.831402,0.998726,0.416141,1,0.831298,0.998726,0,1,0.415157,0.966165,0.415261,0.964892,0.000104,0.92857,0.415376,0.927297,0.000219,0.88866,0.415498,0.887386,0.000342,0.847967,0.415623,0.846694,0.000466,0.808057,0.415746,0.806783,0.000589,0.770462,0.415861,0.769188,0.000704,0.736627,0.415965,0.735354,0.000808,0.41316,0.000985,0.441933,0.000896,0.443207,0.416053,0.475768,0.000793,0.477042,0.415949,0.513363,0.000677,0.514637,0.415834,0.226926,0.41316,0.266837,0.421098,0.304432,0.436671,0.338267,0.459278,0.186233,0.41316,0.367041,0.488053,0.146323,0.421098,0.389648,0.521887,0.108727,0.436671,0.405221,0.559482,0.074893,0.459279,0.41316,0.599393,0.046119,0.488053,0.41316,0.640086,0.023511,0.521887,0.405221,0.679997,0.007939,0.559483,0.389648,0.717592,0,0.599393,0.367041,0.751426,0,0.640086,0.338267,0.7802,0.007939,0.679997,0.304432,0.802808,0.023511,0.717592,0.266837,0.81838,0.046119,0.751427,0.226926,0.826319,0.074893,0.780201,0.186233,0.826319,0.108728,0.802808,0.146323,0.81838,0.554547,0.415711,0.553274,0.000555,0.304432,0.023511,0.338267,0.046119,0.367041,0.074893,0.266837,0.007939,0.389648,0.108728,0.226926,0,0.405221,0.146323,0.186233,0,0.41316,0.186234,0.146323,0.007939,0.41316,0.226926,0.108728,0.023511,0.405221,0.266837,0.074893,0.046119,0.389648,0.304432,0.046119,0.074893,0.367041,0.338267,0.023511,0.108728,0.338267,0.367041,0.007939,0.146323,0.304432,0.389649,0,0.186233,0.266837,0.405221,0,0.226926,0.007939,0.266837,0.023511,0.304432,0.146322,0.405221,0.046119,0.338267,0.108727,0.389648,0.074893,0.367041]],

    "faces" : [43,0,1,3,2,0,0,1,2,3,0,1,2,3,43,2,3,5,4,0,3,2,4,5,3,2,4,5,43,4,5,7,6,0,5,4,6,7,5,4,6,7,43,6,7,9,8,0,7,6,8,9,7,6,8,9,43,8,9,11,10,0,10,11,12,13,9,8,10,11,43,10,11,13,12,0,13,12,14,15,11,10,12,13,43,12,13,15,14,0,15,14,16,17,13,12,14,15,43,14,15,17,16,0,17,16,18,19,15,14,16,17,43,16,17,19,18,0,19,18,20,21,17,16,18,19,43,18,19,21,20,0,21,20,22,23,19,18,20,21,43,20,21,23,22,0,23,22,24,25,21,20,22,23,43,22,23,25,24,0,25,24,26,27,23,22,24,25,43,24,25,27,26,0,27,26,28,29,25,24,26,27,43,26,27,29,28,0,30,31,32,33,27,26,28,29,43,28,29,31,30,0,33,32,34,35,29,28,30,31,43,30,31,33,32,0,35,34,36,37,31,30,32,33,43,32,33,35,34,0,37,36,38,39,33,32,34,35,43,34,35,37,36,0,39,38,40,41,35,34,36,37,43,36,37,39,38,0,41,40,42,43,37,36,38,39,43,38,39,41,40,0,43,42,44,45,39,38,40,41,43,40,41,43,42,0,46,47,48,49,41,40,42,43,43,42,43,45,44,0,49,48,50,51,43,42,44,45,43,44,45,47,46,0,51,50,52,53,45,44,46,47,43,46,47,49,48,0,53,52,54,55,47,46,48,49,43,48,49,51,50,0,55,54,56,57,49,48,50,51,43,50,51,53,52,0,57,56,58,59,51,50,52,53,43,52,53,55,54,0,59,58,60,61,53,52,54,55,43,54,55,57,56,0,29,62,63,64,55,54,56,57,43,56,57,59,58,0,64,63,65,66,57,56,58,59,43,58,59,61,60,0,66,65,67,68,59,58,60,61,42,35,33,31,0,69,70,71,34,32,30,42,35,31,29,0,69,71,72,34,30,28,42,37,35,29,0,73,69,72,36,34,28,42,37,29,27,0,73,72,74,36,28,26,42,39,37,27,0,75,73,74,38,36,26,42,39,27,25,0,75,74,76,38,26,24,42,41,39,25,0,77,75,76,40,38,24,42,41,25,23,0,77,76,78,40,24,22,42,43,41,23,0,79,77,78,42,40,22,42,43,23,21,0,79,78,80,42,22,20,42,45,43,21,0,81,79,80,44,42,20,42,45,21,19,0,81,80,82,44,20,18,42,47,45,19,0,83,81,82,46,44,18,42,47,19,17,0,83,82,84,46,18,16,42,49,47,17,0,85,83,84,48,46,16,42,49,17,15,0,85,84,86,48,16,14,42,51,49,15,0,87,85,86,50,48,14,42,51,15,13,0,87,86,88,50,14,12,42,53,51,13,0,89,87,88,52,50,12,42,53,13,11,0,89,88,90,52,12,10,42,55,53,11,0,91,89,90,54,52,10,42,55,11,9,0,91,90,92,54,10,8,42,57,55,9,0,93,91,92,56,54,8,42,57,9,7,0,93,92,94,56,8,6,42,59,57,7,0,95,93,94,58,56,6,42,59,7,5,0,95,94,96,58,6,4,42,61,59,5,0,97,95,96,60,58,4,42,3,61,5,0,98,97,96,2,60,4,42,3,63,61,0,98,99,97,2,62,60,42,3,1,63,0,98,100,99,2,1,62,43,1,0,62,63,0,1,0,101,102,1,0,63,62,43,60,61,63,62,0,68,67,102,101,61,60,62,63,42,30,32,34,0,103,104,105,31,33,35,42,28,30,34,0,106,103,105,29,31,35,42,28,34,36,0,106,105,107,29,35,37,42,26,28,36,0,108,106,107,27,29,37,42,26,36,38,0,108,107,109,27,37,39,42,24,26,38,0,110,108,109,25,27,39,42,24,38,40,0,110,109,111,25,39,41,42,22,24,40,0,112,110,111,23,25,41,42,22,40,42,0,112,111,113,23,41,43,42,20,22,42,0,114,112,113,21,23,43,42,20,42,44,0,114,113,115,21,43,45,42,18,20,44,0,116,114,115,19,21,45,42,18,44,46,0,116,115,117,19,45,47,42,16,18,46,0,118,116,117,17,19,47,42,16,46,48,0,118,117,119,17,47,49,42,14,16,48,0,120,118,119,15,17,49,42,14,48,50,0,120,119,121,15,49,51,42,12,14,50,0,122,120,121,13,15,51,42,12,50,52,0,122,121,123,13,51,53,42,10,12,52,0,124,122,123,11,13,53,42,10,52,54,0,124,123,125,11,53,55,42,8,10,54,0,126,124,125,9,11,55,42,8,54,56,0,126,125,69,9,55,57,42,6,8,56,0,127,126,69,7,9,57,42,6,56,58,0,127,69,73,7,57,59,42,4,6,58,0,128,127,73,5,7,59,42,4,58,60,0,128,73,129,5,59,61,42,2,4,60,0,130,128,129,3,5,61,42,2,60,62,0,130,129,131,3,61,63,42,0,2,62,0,132,130,131,0,3,63],

    "bones" : [],

    "skinIndices" : [],

    "skinWeights" : [],

    "animation" : {}

} 
```

加载网格的代码是：

```
var loader = new THREE.JSONLoader();
loader.load('cylinder.js', function(geo, mat){

    var materials = new THREE.MeshFaceMaterial( mat );

    var mesh = new THREE.Mesh(geo, materials);

    mesh.position.y=0;
    mesh.position.x=5;
    loadJson(mesh );
});

 function loadJson(mesh){
     scene.add( mesh );    
 } 
```

结果：

![圆柱](../Images/fa284160291e6ed27494e01aa4de5cc6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T17:05:26.993

您的 JSON 文件中的材料看起来不正确：

你有

```
"mapNormal" : "texture3.jpg" 
```

它应该是

```
"mapDiffuse" : "texture3.jpg" 
```

三.js r.55

# python - Python：正则表达式捕获数据

> ID：14872504
> 
> 赞同：5
> 
> 时间：2013-02-14T10:19:10.080
> 
> 标签：python, regex

我想请你帮忙。

我有一大段数据，如下所示：

```
 a
  b : c 901
   d : e sda
 v
     w : x ads
  any
   abc : def 12132
   ghi : jkl dasf
  mno : pqr fas
   stu : vwx utu 
```

说明：文件以包含**单个**单词的行开头（可以以空格开头，空格也可以在单词之后），然后是由冒号分隔的属性行（也可以有空格），然后是属性行或带有a的行一个字。我无法创建正确的正则表达式来以这种形式捕获它：

```
{
  "a": [["b": "c 901"], ["d", "e sda"]],
  "v": [["w", "x ads"]],
  "any": ["abc", "def 12132"], ["ghi", "jkl dasf"],
  # etc.
} 
```

这是我尝试过的：

```
regex = str()
regex += "^(?:(?:\\s*)(.*?)(?:\\s*))$",
regex += "(?:(?:^(?:\\s*)(.*?)(?:\\s*):(?:\\s*)(.*?)(?:\\s*))$)*$"
pattern = re.compile(regex, re.S | re.M) 
```

但是，它没有找到我需要的东西。你可以帮帮我吗？我知道我可以在没有正则表达式的情况下处理文件，使用逐行迭代器并检查“：”符号，但是文件太大而无法以这种方式处理它（如果你知道如何在没有正则表达式的情况下快速处理它，这也将是正确答案，但首先想到的太慢了）。

提前致谢！

PS 文件的规范形式如下所示：

```
a
  b : c 901
  d : e sda 
```

每个部分都以一个单词开头，然后是属性行（在两个空格之后），属性之间用 (" : ") 分隔，然后是属性行或单个单词的行。禁止使用其他空格。可能会更容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:25:55.940

这里真的需要正则表达式吗？试试这个伪代码：

```
result = {}

last = None
for _line in data:
    line = _line.strip( ).split( ":" )
    if len( line ) == 1:
        last = line[ 0 ]
        if last not in result:
            result[ last ] = []
    elif len( line ) == 2:
        obj = [ line[ 0 ].strip( ), line[ 1 ].strip( ) ]
        result[ last ].append( obj ) 
```

我希望我能正确理解你的数据结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:34:30.597

你可以使用这个正则表达式..

```
 (?:[\n\r]+|^)\s*(\w+)\s*[\n\r]+(\s*\w+\s*:\s*.*?)(?=[\n\r]+\s*\w+\s*[\n\r]+|$) 
```

您需要将以上内容与or选项相**匹配**`regex``singleline``dotall`

Group1 和 Group2 每次匹配时匹配您想要的

在[这里查看](http://fiddle.re/u381)..use dot all 选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:54:59.253

```
# a more golf - like solution
from itertools import groupby

groups = groupby(map(lambda s: map(str.strip,s.split(':')), data), len)
dict((next(i[1])[0], list(next(groups)[1])) for i in groups) 
```

出去：

```
{'a': [['b', 'c 901'], ['d', 'e sda']],
 'any': [['abc', 'def 12132'],
  ['ghi', 'jkl dasf'],
  ['mno', 'pqr fas'],
  ['stu', 'vwx utu']],
 'v': [['w', 'x ads']]} 
```

# c++ - 移动 std::unique_ptr 时出错

> ID：14872506
> 
> 赞同：0
> 
> 时间：2013-02-14T10:19:14.747
> 
> 标签：c++

我尝试在复制构造函数中运行此代码以将 unique_ptr 从第一个向量移动到另一个向量：

```
class Text
{
    struct paragraph
    {
        int index;
        string text;
    };

    vector<unique_ptr<paragraph>> paragraphs; 

public:

    Text()
    {
        paragraphs.push_back(unique_ptr<paragraph>(new paragraph));
    }

    Text(const Text & t)
    {
        for(int i = 0; i < (int)t.paragraphs.size(); i++)
        {
            paragraphs.push_back(move(t.paragraphs[i]));
        }
    }
}; 
```

我得到了这个错误：

```
1>c:\program files\microsoft visual studio 10.0\vc\include\xmemory(208): error C2248: 'std::unique_ptr<_Ty>::unique_ptr' : cannot access private member declared in class 'std::unique_ptr<_Ty>'
1>          with
1>          [
1>              _Ty=Text::paragraph
1>          ]
// Etc. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T10:32:23.417

您的代码有几处问题。

首先，您不能从 a 移动`const&`，这也适用于 a 的成员`const&`。运动是破坏性的；你应该只从`&&`. 您的复制构造函数应该*复制*；如果您不想要复制构造函数，那么`= delete`它或您的编译器允许的任何内容。

其次，假设您采用`Test &&`了适当的移动构造函数，则不应像那样移动每个元素。相反，将向量移动到新的向量中，如下所示：

```
Text(Text && t) : paragraphs(std::move(t.paragraphs)) {} 
```

第三，您应该只在您选择的编译器不支持自动生成的移动构造函数（即：是 Visual Studio）的情况下编写此函数。如果它确实支持它，你*根本不应该写一个*。让编译器完成它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:33:17.240

```
Text(const Text & t)
{
    for(int i = 0; i < (int)t.paragraphs.size(); i++)
    {
        paragraphs.push_back(move(t.paragraphs[i]));
    }
} 
```

在这个构造函数`t`中是 const，所以`t.paragraphs[i]`给 a 一个 const 左值引用`unique_ptr`。

`move(t.paragraphs[i])`把它变成一个 const*右值*引用，但它仍然是 const。移动构造`unique_ptr`函数需要非常量右值引用，因此不可行，因此删除的复制构造函数是最佳匹配。您不应该尝试移动`t`复制构造函数中的内容，这就是移动构造函数的用途。

您还应该说不`std::move`只是`move`，以防止 ADL 找到错误的举动。

# facebook-android-sdk - Facebook 会话过期时请求登录

> ID：14872507
> 
> 赞同：0
> 
> 时间：2013-02-14T10:19:15.057
> 
> 标签：facebook-android-sdk

我尝试从 Facebook 应用程序列表中撤销权限。`Session.getActiveSession()`LoginButton 在被调用并返回时关闭并变为“登录” `AccessToken token:ACCESS_TOKEN_REMOVED`。

是否可以以编程方式显示登录页面（并启动 LoginActivity）？或者用户应该手动按下登录按钮？

# google-cloud-sql - 60 秒后 Google Cloud SQL 的 DeadlineExceededError

> ID：14872512
> 
> 赞同：0
> 
> 时间：2013-02-14T10:19:31.207
> 
> 标签：google-cloud-sql

我们有一个脚本调用一个有时需要超过 60 秒才能执行的过程。当程序超过 60 秒时，我们得到一个`DeadlineExceededError`. 错误消息如下所示：

`DeadlineExceededError: The API call rdbms.Exec() took too long to respond and was cancelled.`

此脚本被安排为 cron 并使用 B8 类后端。使用后端是否对查询的超时限制有任何影响？如果查询的执行时间超过 60 秒，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T17:08:23.693

显然有一个错误，因为我在后端实例上运行查询，并且它还在 60 秒后引发了 DeadlineExceededError。

这是 googleappengine [https://code.google.com/p/googleappengine/issues/detail?id=9479](https://code.google.com/p/googleappengine/issues/detail?id=9479)和 googlecloudsql [https://code.google.com/p/googlecloudsql/issues/detail?id=71中的票](https://code.google.com/p/googlecloudsql/issues/detail?id=71)

还没有回应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:49:44.793

是的，使用 cron 或后端会给你更长的截止日期。请参阅此常见问题解答条目： [https ://developers.google.com/cloud-sql/faq#sizeqps](https://developers.google.com/cloud-sql/faq#sizeqps)

# php - 不要在 POST 变量中传递 OAuth - PHP OAuth Pecl 库

> ID：14872515
> 
> 赞同：2
> 
> 时间：2013-02-14T10:19:37.943
> 
> 标签：php, oauth

我正在使用第三方服务，该服务要求我通过 OAuth1 进行身份验证才能发出请求。我可以使用 GET 成功地通过他们的大多数调用进行身份验证并取回数据，但是他们需要 POST 的一些调用，这就是问题所在。要进行身份验证，我正在使用以下内容：

```
$oauth = new OAuth(MY_KEY,MY_SECRET);
$oauth->setNonce(rand());    
$oauth->setToken('',''); 
```

然后对于 GET 调用，我正在执行如下操作：

```
$array = array(
    'partnerId'=>'1234'
    );

$call = $oauth->fetch("https://domain.co.uk/api/getInfo/",$array);
$data = $oauth->getLastResponse(); 
```

这一切都很完美，我可以打印出 $data

但是使用 POST 调用：

```
$oauth = new OAuth(MY_KEY,MY_SECRET);
$oauth->setNonce(rand());    
$oauth->setToken('','');
$oauth->enableDebug();
$oauth->setAuthType(OAUTH_AUTH_TYPE_AUTHORIZATION);

$array = array(
    'rid' => "$restaurantId",
    'datetime' => "$datetime",
    'partysize' => $covers,
    'timesecurityID' => "$securityId",
    'resultskey' => "$resultskey"
);

$call = $oauth->fetch("https://domain.co.uk/api/booking/?pid=1234&st=0",$array,OAUTH_HTTP_METHOD_POST);
$data = $oauth->getLastResponse(); 
```

我不断收到错误：`Invalid Consumer Signature`

他建议与他们的技术人员交谈

> 您的 sbs 值表明您正在使用所有 POST 参数进行签名，而您只需要使用查询字符串进行签名。在这种情况下，它将是“pid=1234&st=0”。不幸的是，我不熟悉 PHP 库，也没有关于如何改变行为的任何建议。

并且还提到了 PHP 实现的常见问题是：

1.  一旦方法从 GET 更改为 POST，PHP HTTP 库将删除查询字符串。
2.  PHP oAuth 库将使用发布数据对请求进行签名，而不是使用查询字符串或两者兼而有之。

如果我转储标题，我会得到：

```
[sbs] => POST&https%3A%2F%2Fdomain.co.uk%2Fapi%2Fbooking%2F&datetime%3D2013-02-21T10%253A30%253A00%26oauth_consumer_key%3DMySiteV3TT%26oauth_nonce%3D1213111151%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1360835965%26oauth_token%3D%26oauth_version%3D1.0%26partysize%3D2%26pid%3D1531%26resultskey%3DfoqgEnYK%25252bIzRd6BV3T8eGQ%25253d%25253d%26rid%3D31852%26st%3D0%26timesecurityID%3D349367809
[headers_sent] => POST /api/booking/?pid=1234&st=0 HTTP/1.1 
```

看起来它正在与帖子的其余部分一起发送 OAuth 数据，我只想在 Authorization 标头中发送它（它也在发送）

```
Authorization: OAuth oauth_consumer_key="MySite",oauth_signature_method="HMAC-SHA1",oauth_nonce="1772854358",oauth_timestamp="1360768712",oauth_version="1.0",oauth_token="",oauth_signature="2%2B7xb%2BJ5cdbUDC5UHfsdfsNpFM1pE%3D" 
```

因此，我认为我需要从发布请求中删除 OAuth 数据，但将其保留为授权标头，但找不到这样做的神奇方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T13:31:46.417

我见过这个。在 fetch() 中，尝试对您的 $array 进行 urlencoding 并将其作为以下形式的字符串传递：

```
rid=[restaurantId]&datetime=[datetime]&... 
```

还要给出标题（fetch() 的最终参数）：

```
Content-Type: application/x-www-form-urlencoded 
```

# cuda - 在内核中声明共享内存变量

> ID：14872517
> 
> 赞同：1
> 
> 时间：2013-02-14T10:19:47.650
> 
> 标签：cuda, shared-memory

我有一个关于共享变量如何工作的问题。

当我像这样在内核中声明一个共享变量时 `__shared__ int array1[N]` ，每个活动块的每个唯一共享内存现在都有一个大小为 N 的 array1 实例。这意味着每个活动块的每个共享内存现在都分配了 N*sizeof(int) 个字节。对于计算能力为 1.3 的 gpu，N*sizeof(int) 最多必须为 16KB。

因此，假设上述内容是正确的并使用在主机上分配的 2D 线程和 2D 块，如下所示：

```
dim3 block_size(22,22);
dim3 grid_size(25,25); 
```

我将有 25x25 个 array1 实例，每个实例的大小为 N*sizeof(int)，并且可以访问块的每个共享内存的最多线程是 22x22。这是我最初的问题，并得到了回答。

问：当我给array1赋值时

`array1[0]=1;`

那么所有活动块是否立即在自己的共享内存中分配该值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:35:16.990

每个块将始终分配自己的共享内存数组。因此，如果您启动 25x25 块，您最终将在共享内存中创建 25x25 数组。

然而，这并不意味着所有这些数组将同时存在，因为不能保证所有块同时存在。活动块的数量取决于运行它的 GPU 的实际型号。GPU 驱动程序将尝试启动尽可能多的块，并且额外的块将在之前的块结束它们的工作后运行。

N*sizeof(int) 的最大值取决于卡的计算能力和 L1 缓存配置。它可以在：8KB、16KB、32KB 和 48KB 之间变化。

要回答您的最后一个问题 - 每个共享数组对属于相应块的所有线程都是可见的。在您的情况下，相应的 22x22 线程将可以看到每个共享数组。

# c - C Returning char[] 警告“返回局部变量的地址”

> ID：14872518
> 
> 赞同：6
> 
> 时间：2013-02-14T10:19:48.990
> 
> 标签：c, pointers, return, compiler-warnings

这是家庭作业的一部分。

我试图在我的方法 getLine 中读取并返回文件的一行。

```
char *getLine(FILE *input) {
    char line[30];
    if(fgets(line, sizeof(line), input)!=NULL)
    {
        return line;
    }else{
        return NULL;
    }
} 
```

从我所学到的关于指针的内容来看，这似乎可行，但是我无法删除警告消息`warning: function returns address of local variable [enabled by default]`。此警告指的是行`return line;`。我的任务要求我在编译时没有警告或错误。我看不出我做错了什么。

我发现的大多数帮助都建议为文本行分配 malloc-ing 空间，但我们还没有在课堂上讨论过这一点，尽管我在另一堂课上做过一些。这真的是最好的方法吗？如果是这样，我可以在程序的任何地方释放吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-14T10:23:18.673

`char line[30];`是一个具有自动存储持续时间的数组。一旦执行超出您的函数范围，它所在的内存就会被释放，因此指向您返回的该内存的指针变得无效（悬空指针）。

试图访问已经被释放的内存会导致**未定义的行为**。

您可以动态分配数组并让调用者显式释放它：

```
char *getLine() {
    char* line = malloc(30);
    ...
    return line;
}

// somewhere:
char* line = getLine();
...
free(line); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T10:30:40.590

不使用 malloc 的替代方案，据我所知，前面的问题并未涵盖：

```
/* Warning, this function is not re-entrant. It overwrites result of previous call */
char *getLine(FILE *input) {
    static char line[30];
    return fgets(line, sizeof(line), input);
    /* fgets returns NULL on failure, line on success, no need to test it */
} 
```

说明：[函数范围内的](http://en.wikipedia.org/wiki/Local_variable#Static_local_variables)[静态变量](http://en.wikipedia.org/wiki/Static_variable)即使在函数返回后仍保留其值。这种变量只有一个实例，每次调用该函数时都使用相同的实例（因此不是可重入/线程安全的）。静态变量的内存是在程序启动时分配的，它既不是堆也不是堆栈，而是运行程序内存空间中自己的保留区域。静态变量的值在第一次使用之前只初始化一次（上面没有特定的初始化，所以用 0 填充，但它也可以有一个初始化器，这只是第一次调用函数时的值）。

虽然以这种方式使用静态变量可能看起来有点 hacky（我同意它），但它仍然是标准 C 也采用的有效模式，[例如`strtok()`function](http://linux.die.net/man/3/strtok)。它还表明需要一个可重入的版本，因为 C 标准也有`strtok_r()`，它使用起来更复杂，因为它有一个额外的参数，而不是其中有局部静态变量。

# java - JAXB/MOXy：如何取消/编组包含标量或标量列表的字段

> ID：14872519
> 
> 赞同：1
> 
> 时间：2013-02-14T10:19:50.050
> 
> 标签：java, jaxb, moxy

我有一组属性，单个属性的每个值要么是标量（字符串，整数，...），要么是标量的集合（集合，集合，...）。下面是一个 XML 文档作为示例：

```
<properties xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:java="http://java.oracle.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <property name="test#1" xsi:type="xs:int">1</property>
    <property name="test#2" xsi:type="java:int[]">
        <value xsi:type="xs:int">1</value>
        <value xsi:type="xs:int">2</value>
        <value xsi:type="xs:int">3</value>
    <value xsi:type="xs:int">4</value>
    </property>
</properties> 
```

这是我想使用的类，但我不知道如何正确标记值字段以使用和生成此结构。它必须以标量或标量列表的形式包含属性元素的解析内容。数据类型作为属性值存在。

```
@XmlRootElement(name = "property")
public class Property {

    @XmlAttribute(name = "name")
    protected String name;
    @???
    protected Object value;
} 
```

使用两个字段`protected Object scalar`和`protected List<Object> list`，一个用 标记`@XmlValue`，另一个用`@XmlElement(name = "value")`不工作。

有人有想法吗？

# 更新 1

我标记`Property`如下：

```
@XmlRootElement(name = "property")
public class Property {

    @XmlAttribute(name = "name")
    protected String name;
    @XmlJavaTypeAdapter(Test2Adapter.class)
    @XmlPath(".")
    protected Object value;
} 
```

我已经部分实现了以下适配器类

```
public class Test2Adapter extends XmlAdapter<AdaptedValue, Object> {

@Override
public Object unmarshal(AdaptedValue v) throws Exception {
    if (v instanceof Scalar) {
    return ((Scalar) v).value;
    }
    if (v instanceof Complex) {
        return ((Complex) v).value;
    }
    return null;
}

@Override
public AdaptedValue marshal(Object v) throws Exception {
    if (v instanceof String) {
    Scalar s = new Scalar();
    s.value = v;

    return s;
    }
if (v instanceof Collection) {
    Complex c = new Complex();
    c.value = (Collection<? extends Object>) v;

    return c;
}
return null;
} 
```

**适应值：**

```
@XmlSeeAlso({ Scalar.class, Complex.class })
public abstract class AdaptedValue {
} 
```

**标量：**

```
public class Scalar extends AdaptedValue {

    @XmlValue
    public Object value;

} 
```

**复杂的 ：**

```
public class Complex extends AdaptedValue {

    @XmlAttribute(name = "xsi:type")
    public String type;

    @XmlElement(name = "value")
    public Collection<? extends Object> value   
} 
```

一切都正确编组，但解组不起作用。我得到以下异常：

```
javax.xml.bind.UnmarshalException
 - with linked exception:
[Exception [EclipseLink-43] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345):
org.eclipse.persistence.exceptions.DescriptorException
Exception Description: Missing class for indicator field value [xs:string] of type[class java.lang.String].
Descriptor:
XMLDescriptor(com.materna.osgi.service.cm.rest.resource.representation.Test2Adapter$AdaptedValue --> [])]
at org.eclipse.persistence.jaxb.JAXBUnmarshaller.unmarshal(JAXBUnmarshaller.java:190) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:58:00.590

如果我没记错的话，你需要一个叫做 XmlJavaTypeAdapter 的东西。我很久以前就用过这个，我现在手头没有我的代码，但请看一下链接，如果你仍然卡住，那么请给我留言。

[http://weblogs.java.net/blog/kohsuke/archive/2005/04/xmladapter_in_j.html](http://weblogs.java.net/blog/kohsuke/archive/2005/04/xmladapter_in_j.html)

在上述帖子的评论部分，“pomcompot”提到使用列表/集合的包装器。我记得使用包装类，它工作。

[http://www.caucho.com/resin-3.1/doc/jaxb-annotations.xtp#XmlJavaTypeAdapter](http://www.caucho.com/resin-3.1/doc/jaxb-annotations.xtp#XmlJavaTypeAdapter)

# php - 两个数组匹配它们并显示不匹配

> ID：14872526
> 
> 赞同：2
> 
> 时间：2013-02-14T10:20:04.773
> 
> 标签：php, arrays

我有两个数组`$jlist`，`$vlist`我需要显示不匹配的条目。

```
if($jlist==$vlist) echo ''; 
else echo $vlist; 
```

我的循环尝试与使用 foreach 方法一起失败了。请指教。

```
if(count($jlist)>0)&&(count($vlist)>0)
{
    foreach($jlist as $j)&&($vlist as $v)
    {
        if($v==$j)echo '';
        else 
            echo '<option>'.$v.'</option>';
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:26:31.030

```
if(count($jlist)>0 && count($vlist)>0)
{
  $new_list=array_diff($jlist,$vlist);
  foreach($new_list as $j)
  {
    echo '<option>'.$j.'</option>';
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T10:32:37.240

如果您正在寻找第一个数组中不在第二`array_diff($jlist, $vlist)`个数组中的元素，如果您想要第二个数组中不存在于第一个数组中的元素，您应该尝试反转数组顺序。

如果你正在寻找两者，那么你只需要合并这两个结果，比如`array_merge(array_diff($jlist, $vlist), array_diff($vlist, $jlist))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:24:25.977

一探究竟

```
foreach($jlist as $j)
{

    if(!in_array($j,$vlist))
            echo $j."<br/>";

} 
```

# c - 为什么 gdb 不能在没有二进制文件的情况下显示非符号堆栈跟踪？

> ID：14872533
> 
> 赞同：3
> 
> 时间：2013-02-14T10:20:27.907
> 
> 标签：c, debugging, gdb

只是好奇：当我在 gdb 中加载核心文件时，回溯如下所示：

```
...

Thread 2 (Thread 1109):
#0  0x2b03d968 in ?? ()

Thread 1 (Thread 23490):
#0  0x2b0c3624 in ?? ()
(gdb) 
```

但是在我使用“文件”加载二进制文件后，我得到了这个：

```
...

#0  __pthread_cond_wait (cond=0x46b810, mutex=0x46b7f0) at pthread_cond_wait.c:156
#1  0x004076a8 in main (argc=1, argv=0x7fa66784) at idpoint.c:258
...

#0  0x2b0c3624 in *__GI_raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:67
#1  0x2b0c8464 in *__GI_abort () at abort.c:88
#2  0x2b0faeec in __libc_message (do_abort=2, fmt=0x2b1d0840 "*** glibc detected *** %s: %s: 0x%s ***\n") at ../sysdeps/unix/sysv/linux/libc_fatal.c:173
#3  0x2b107e3c in malloc_printerr (action=3, str=0x2b1d0930 "free(): invalid next size (fast)", ptr=<value optimized out>) at malloc.c:5994
... 
```

问题：为什么 gdb 甚至不尝试在加载符号之前显示调用堆栈？我的猜测是，它不知道段在内存中的位置，也不知道哪些堆栈数据要解释为数据与地址？它是否正确？

如果有可能获得 gdb:s 最好的尝试来显示没有符号的调用堆栈、了解堆栈深度或供以后解释，那就太好了……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:31:27.177

因为二进制文件包含允许调试器理解的符号信息（调试符号），例如，每个函数的堆栈帧有多大[在函数中的任何给定时间也是如此！]。此信息在代码启动时不会加载到内存中，因此无法将其保存在`core`文件中。

你当然可以使用`x/200 $esp`（或者任何调用堆栈指针的东西——我猜是x86——如果它是ARM，那么它是`$R15`从内存中调用的）。不幸的是，如果无法访问符号，`gdb`就不会真正知道堆栈上是什么，并且只能提供堆栈的原始转储 - 在大多数情况下，这甚至比不显示任何内容更有帮助，因为显示大量随机数据（并且大部分堆栈将是 - 特别是如果帧指针被关闭 - 使用帧指针你有一些机会取消嵌套堆栈）在大多数情况下是非常无用的。

# arrays - 使用 update_user_meta 保存数组

> ID：14872537
> 
> 赞同：3
> 
> 时间：2013-02-14T10:20:39.127
> 
> 标签：arrays, wordpress

我在用户信息中添加了更多字段，但现在我正在努力保存一组值。

我如何显示值：

```
<tr>
    <th><label for="days">days</label></th>
    <td>
        <input type="checkbox" name="days" value="<?php echo esc_attr( get_the_author_meta( 'monday', $user->ID ) ); ?>"> Monday<br>
        <input type="checkbox" name="days" value="<?php echo esc_attr( get_the_author_meta( 'tuesday', $user->ID ) ); ?>"> Tuesday<br>
        <input type="checkbox" name="days" value="<?php echo esc_attr( get_the_author_meta( 'wednesday', $user->ID ) ); ?>"> Wednesday<br>
        <input type="checkbox" name="days" value="<?php echo esc_attr( get_the_author_meta( 'thursday', $user->ID ) ); ?>"> Thursday<br>
        <input type="checkbox" name="days" value="<?php echo esc_attr( get_the_author_meta( 'friday', $user->ID ) ); ?>"> Friday<br>
    </td>
</tr> 
```

我如何保存值：

```
update_user_meta($user_id, 'days', $_POST['monday, tuesday, wednesday, thursday, friday']); 
```

我知道我做错了，但我找不到正确的方法。我希望这里有人可以帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T11:25:50.023

更改`name="days"`为`name="days[]"`所有输入字段并使用

```
update_user_meta( $user_id, 'days', $_POST['days'] ); 
```

您将存储一个具有真/假值的数值数组，具体取决于这些字段是否被选中。

要设置复选框的预设值，您不能简单地将其值设置为您想要的值。这样做的正确属性是`checked="checked"`. 这是一个完整的例子：

```
$values = array_combine( array( 'monday', 'tuesday', 'wednesday', 'thursday', 'friday' ), $_POST['days'] );
update_user_meta( $user_id, 'days', $values ); 
```

对于显示：

```
<?php 
$days = get_user_meta( $user_id, 'days', true );
foreach( $days as $day => $checked ):
?>
<input type="checkbox" name="days[]" <?php if( $checked ) echo 'checked="checked"'; ?>>
<?php endforeach; ? 
```

但实际上，在您的情况下，使用数组作为字段名称只是笨拙的。您可以将每个字段命名为“星期一”、“星期二”等，使用`$_POST['monday']`例如检索值，然后存储`array( 'monday' => $_POST['monday'], ... )`. 有了数据库中的这个，您就可以在 foreach 循环中替换`name='days[]'`为。`name="<?php echo $day; ?>"'`

请注意，我使用`get_user_meta`的是`get_author_meta`- 它们不可互换！

Wordpress API 对您来说可能是一个小障碍，但我认为您真正需要学习的只是如何构建表单以及如何使用 PHP 处理它们。希望这可以是一个开始，但互联网上有更多的材料。

# iphone - 在 App Store 中重新提交应用程序不显示“准备提交”

> ID：14872538
> 
> 赞同：1
> 
> 时间：2013-02-14T10:20:42.147
> 
> 标签：iphone, ios, app-store

由于元数据失败，我的第一个应用在 App Store 中被拒绝。我删除了他们指向的页面，我想重新提交应用程序以存储但是“准备提交”按钮没有出现在页面上。他们要求我解释我想要一些用户信息的注册页面。我将如何重新提交？

PS：-如果我将删除该应用程序。我将无法第二次为应用程序使用相同的名称，我不希望这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:39:50.310

登录后，点击您的应用程序，在右侧，您有 3 到 4 个选项，分别是版本摘要、二进制详细信息、状态历史记录。转到二进制详细信息，然后如果您有一个选项，请单击拒绝此二进制文件，然后重新提交并上传新的二进制文件。

# php - 在 php json 编码中组合数组

> ID：14872539
> 
> 赞同：-1
> 
> 时间：2013-02-14T10:20:53.400
> 
> 标签：php, json

我开发这样的php代码：

```
while($row = mysql_fetch_array ($result))     
    {

        $catalogue = array(
            'catalogue_id' => $row[0],          
            'catalogue_name' => $row[1],
            'catalogue_cover' => $row[2],

            'category' =>  array(
                            'id' => $row[3],
                            'name' => $row[4],
                            'cover' => $row[5],
                            'item' => array (
                                'id' => $row[6],
                                'name' => $row[7],
                                'cover' => $row[8],
                                'description' => $row[9],
                                'price' =>$row[10]
                            )
            ),                  
        );
        array_push($json, $catalogue);              
    }   
    $jsonresult  =  array2json($json);
    echo $jsonresult; 
```

结果json是：

```
[
    {
        "catalogue_id": "59",
        "catalogue_name": "IT Catalog",
        "catalogue_cover": "http://192.168.0.22:90/Ecatalogue/catalogue/covers/511b21f398969.jpeg",
        "category": {
            "id": "60",
            "name": "Computer Accessory",
            "cover": "http://192.168.0.22:90/Ecatalogue/category/covers/511b2e11e8b26.jpg",
            "item": {
                "id": "61",
                "name": "CD",
                "cover": "http://192.168.0.22:90/Ecatalogue/item/covers/511b2e1da3063.jpg",
                "description": "",
                "price": "0.00"
            }
        }
    },
    {
        "catalogue_id": "59",
        "catalogue_name": "IT Catalog",
        "catalogue_cover": "http://192.168.0.22:90/Ecatalogue/catalogue/covers/511b21f398969.jpeg",
        "category": {
            "id": "61",
            "name": "IT Category",
            "cover": "http://192.168.0.22:90/Ecatalogue/category/covers/511caf7329f63.jpeg",
            "item": {
                "id": "63",
                "name": "IT Item",
                "cover": "http://192.168.0.22:90/Ecatalogue/item/covers/511cafa17cce5.jpeg",
                "description": "",
                "price": "0.00"
            }
        }
    }
] 
```

但我想像这样组合相同的目录：

```
[
    {
        "catalogue_id": "59",
        "catalogue_name": "IT Catalog",
        "catalogue_cover": "http://192.168.0.22:90/Ecatalogue/catalogue/covers/511b21f398969.jpeg",
        "category": {
            "id": "60",
            "name": "Computer Accessory",
            "cover": "http://192.168.0.22:90/Ecatalogue/category/covers/511b2e11e8b26.jpg",
            "item": {
                "id": "61",
                "name": "CD",
                "cover": "http://192.168.0.22:90/Ecatalogue/item/covers/511b2e1da3063.jpg",
                "description": "",
                "price": "0.00"
            },
        "category-2": {
                "id": "61",
                "name": "IT Category",
                "cover": "http://192.168.0.22:90/Ecatalogue/category/covers/511caf7329f63.jpeg",
                "item": {
                    "id": "63",
                    "name": "IT Item",
                    "cover": "http://192.168.0.22:90/Ecatalogue/item/covers/511cafa17cce5.jpeg",
                    "description": "",
                    "price": "0.00"
                }
            }
        }
    }
] 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:36:16.977

您可以索引`$catalogue`by并在它们出现时`catalogue_id`追加`category`

```
while ($row = mysql_fetch_array($result)) {
    $catalogue_id = $row[0];
    if (!isset($json[$catalogue_id])) {
        $json[$catalogue_id] = array(
            'catalogue_id' => $catalogue_id,
            'catalogue_name' => $row[1],
            'catalogue_cover' => $row[2]
            'categories' => array();
            );
    }

    $json[$catalogue_id]['categories'][] = array(
        'id' => $row[3],
        'name' => $row[4],
        'cover' => $row[5],
        'item' => array (
            'id' => $row[6],
            'name' => $row[7],
            'cover' => $row[8],
            'description' => $row[9],
            'price' =>$row[10]
        );
}

$jsonresult = array2json(array_values($json));
echo $jsonresult; 
```

而不是`array2json`你也可以使用`json_encode`

```
echo json_encode(array_values($json)); 
```

# c# - 如何在C#中删除所有名为“test”的子文件夹

> ID：14872552
> 
> 赞同：-4
> 
> 时间：2013-02-14T10:21:26.997
> 
> 标签：c#, subdirectory

我是 C# 新手。我必须删除以名称“test.number”开头的子文件夹 test.1 test.2 test.3 .... 存在于 C:\ 目录中。这些文件夹不为空。实现这一目标的最佳方法是什么？

我尝试使用 directory.delete

```
try 
{ 
    Directory.Delete(@"C:\test", true); 
}
catch (Exception e)
{
    Console.WriteLine(e.ToString());
    Console.ReadLine();
} 
```

但这会删除名称为 test 的文件夹，剩下的就是

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:31:08.610

尝试这样的事情：

```
 var testDirectories = Directory.GetDirectories(@"C:\", "test.*");

  foreach (var directory in testDirectories)
  {
      Directory.Delete(directory, true);
  } 
```

# ios6 - 如何使用coreimage框架在ios中实现倾斜移位模糊（如instagram中的圆形选择性模糊）

> ID：14872553
> 
> 赞同：0
> 
> 时间：2013-02-14T10:21:29.243
> 
> 标签：ios6, blur, core-image

我知道，这可以使用 GPUImageFramework 来完成。但我希望它使用 CoreImageFramework 完成。有教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:22:07.400

Apple 在 CoreImage Programming Guide: [Tilt-Shift Filter Recipe](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_filer_recipes/ci_filter_recipes.html#//apple_ref/doc/uid/TP30001185-CH4-SW17)中介绍了倾斜移位。

要使此方法适用于圆形，您需要使用 a`CIRadialGradient`而不是两个`CILinearGradient`s

# javascript - Sorting on a custom order

> ID：14872554
> 
> 赞同：35
> 
> 时间：2013-02-14T10:21:29.890
> 
> 标签：javascript, arrays

I was wondering how I can sort an array on a custom order, not alphabetical. Imagine you have this array/object:

```
var somethingToSort = [{
    type: "fruit",
    name: "banana"
}, {
    type: "candy",
    name: "twix"
}, {
    type: "vegetable",
    name: "broccoli"
}, {
    type: "vegetable",
    name: "carrot"
}, {
    type: "fruit",
    name: "strawberry"
}, {
    type: "candy",
    name: "kitkat"
}, {
    type: "fruit",
    name: "apple"
}]; 
```

In here we have 3 different types: fruit, vegetable and candy. Now I want to sort this array, and make sure that all fruits are first, candies come after fruits, and vegetables be last. Each type need their items to be sorted on alphabetical order. We will use a function like `sortArrayOnOrder ( ["fruit","candy","vegetable"], "name" );` So basically, you would end up with this array after sorting:

```
var somethingToSort = [{
    type: "fruit",
    name: "apple"
}, {
    type: "fruit",
    name: "banana"
}, {
    type: "fruit",
    name: "strawberry"
}, {
    type: "candy",
    name: "kitkat"
}, {
    type: "candy",
    name: "twix"
}, {
    type: "vegetable",
    name: "broccoli"
}, {
    type: "vegetable",
    name: "carrot"
}]; 
```

Anyone an idea how to create a script for this?

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-14T10:31:59.533

Improved version of Cerbrus' code:

```
var ordering = {}, // map for efficient lookup of sortIndex
    sortOrder = ['fruit','candy','vegetable'];
for (var i=0; i<sortOrder.length; i++)
    ordering[sortOrder[i]] = i;

somethingToSort.sort( function(a, b) {
    return (ordering[a.type] - ordering[b.type]) || a.name.localeCompare(b.name);
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-14T10:27:29.407

Try this:

```
var sortOrder = ['fruit','candy','vegetable'];   // Declare a array that defines the order of the elements to be sorted.
somethingToSort.sort(
    function(a, b){                              // Pass a function to the sort that takes 2 elements to compare
        if(a.type == b.type){                    // If the elements both have the same `type`,
            return a.name.localeCompare(b.name); // Compare the elements by `name`.
        }else{                                   // Otherwise,
            return sortOrder.indexOf(a.type) - sortOrder.indexOf(b.type); // Substract indexes, If element `a` comes first in the array, the returned value will be negative, resulting in it being sorted before `b`, and vice versa.
        }
    }
); 
```

Also, your object declaration is incorrect. Instead of:

```
{
    type = "fruit",
    name = "banana"
}, // etc 
```

Use:

```
{
    type: "fruit",
    name: "banana"
}, // etc 
```

So, replace the `=` signs with `:`'s.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-17T19:33:23.790

For people looking to simply sort an array of strings in a custom order, try this function below:

```
// sorting fn
const applyCustomOrder = (arr, desiredOrder) => {
  const orderForIndexVals = desiredOrder.slice(0).reverse();
  arr.sort((a, b) => {
    const aIndex = -orderForIndexVals.indexOf(a);
    const bIndex = -orderForIndexVals.indexOf(b);
    return aIndex - bIndex;
  });
}

// example use
const orderIWant = ['cat', 'elephant', 'dog'];
const arrayToSort = ['elephant', 'dog', 'cat'];

applyCustomOrder(arrayToSort, orderIWant); 
```

This will sort the array in the order specified. Two sample input / outputs to this function:

Example 1:

```
const orderIWant = ['cat', 'elephant', 'dog'] 
const arrayToSort = ['mouse', 'elephant', 'dog', 'cat'];
applyCustomOrder(arrayToSort, orderIWant); 
console.log(arrayToSort); // ["cat", "elephant", "dog", "mouse"] 
```

Example 2:

```
const orderIWant = ['cat', 'elephant', 'dog'];
const arrayToSort = ['mouse', 'elephant', 'rabbit', 'dog', 'cat'];
applyCustomOrder(arrayToSort, orderIWant); 
console.log(arrayToSort); /* ["cat", "elephant", "dog", "mouse", 
"rabbit"] */ 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-14T10:23:34.247

Array.sort accepts a sort function where you can apply custom sorting logic.

# javascript - HTML5/JS - 一个不依赖 Canvas 的优秀游戏引擎？

> ID：14872557
> 
> 赞同：3
> 
> 时间：2013-02-14T10:21:36.900
> 
> 标签：javascript, html, css, canvas, game-engine

我正在寻找主要以 HTML/CSS 构建的 RTS 游戏。会有一张地图，但我不确定是用 Canvas 还是其他方式构建它。

地图需要针对不同的窗口大小进行拉伸，所以我想可能是 SVG。

我确实发现了大量的游戏引擎，但它们似乎主要依赖于画布。

我想我的主要优先事项是：

*   声音
*   帧限制
*   时间穿越
*   人工智能

我正在寻找一个在 Javascript 中使用的游戏引擎库，它可以让我渲染 DOM 元素而不仅仅是画布元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:33:17.303

试试[狡猾的游戏引擎](http://craftyjs.com/)。它允许您在画布和 DOM 渲染之间进行选择。它还有很多其他的好东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T18:37:09.020

BabylonJS 是目前最好的游戏引擎。它支持几何实例化，这为在屏幕上渲染大量单位提供了良好的性能。此外，它带有自己的物理引擎，支持 WebGL，导入 Blender 模型和大量其他强大功能。 [http://www.babylonjs.com/](http://www.babylonjs.com/)

# python - 仅获取一个 MySQL 列作为列表而不是元组

> ID：14872562
> 
> 赞同：1
> 
> 时间：2013-02-14T10:21:57.620
> 
> 标签：python, list, tuples, mysql-python

我有一个小方法可以从 MySQL 数据库中获取一列。它有效，但它返回一个元组，如：

```
((1L,),(2L,),(3L,), ...) 
```

我只想得到一个列表`[1L, 2L, 3L,...]`（或者甚至转换为 int 而不是 long）。我知道我可以编写一个循环来手动完成，但可能有一种更奇特、更蟒蛇的方式来做这件事。

这是我的函数的代码，以防万一有某种方法可以将 MySQL 结果直接放入列表中而我还没有听说过！

```
def getFTPSentNotamIds():
    selectedIds = None
    try:
        # Connect to database
        db = MySQLdb.connect(host=Constants.database_host,
                             user=Constants.database_user,
                             passwd=Constants.database_passwd,
                             db=Constants.database_name)

        # Create a cursor to execute queries
        cursor = db.cursor()

        # Get every ObjectID of those objects which are Selected=1
        cursor.execute('SELECT ObjectID FROM MYTABLE WHERE Selected=1')

        # Get the NOTAMS
        selectedIds = cursor.fetchall()
    except MySQLdb.Error, e:
        print 'ERROR ' + str(e.args[0]) + ': ' + str(e.args[1])
    return selectedIds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:24:07.800

返回值中的每个元组代表一行，如果该行中只有 1 个元素，

您可以使用如下列表理解来获取包含 ObjectID 的列表：

```
In [38]: l = ((1L,),(2L,),(3L,))

In [39]: [x[0] for x in l]
Out[39]: [1L, 2L, 3L] 
```

在你的功能中你可以做`return [x[0] for x in selectedIds]`

# oracle - 查找视图所依赖的所有表

> ID：14872564
> 
> 赞同：1
> 
> 时间：2013-02-14T10:22:00.990
> 
> 标签：oracle, view, dependencies

我有一个 Oracle VIEW，我想找到我的视图所依赖的所有表。可能，我的视图依赖于其他视图：在这种情况下，我想递归地导航依赖项并访问表。

这是我的架构示例：

```
CREATE TABLE T1 (A NUMBER);
CREATE TABLE T2 (B NUMBER);
CREATE TABLE T3 (A NUMBER, B NUMBER);

CREATE VIEW V1 AS SELECT * FROM T1;
CREATE VIEW V2 AS SELECT * FROM T2;
CREATE VIEW V3 AS SELECT * FROM V1, V2 UNION ALL SELECT * FROM T3; 
```

这是我想要得到的输出：

```
VIEW_NAME TABLE NAME
--------- ----------
V3        T1
V3        T2
V3        T3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:33:48.330

DBA/USER/ALL_DEPENDENCIES 系统视图具有此信息。[http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_1066.htm#i1576452](http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_1066.htm#i1576452)

您可以使用 SELECT 中的 CONNECT BY 子句递归地查询它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T12:09:20.433

用大卫奥尔德里奇的回答解决。我使用了以下查询：

```
SELECT CONNECT_BY_ROOT d.name AS view_name, d.referenced_name AS table_name
FROM user_dependencies d
WHERE d.referenced_type = 'TABLE'
START WITH d.name = 'V3' AND d.type = 'VIEW'
CONNECT BY PRIOR d.referenced_name = d.name AND PRIOR d.referenced_type = d.type 
```

# sql - 在 where 子句中比较字符串

> ID：14872565
> 
> 赞同：-5
> 
> 时间：2013-02-14T10:22:02.440
> 
> 标签：sql, oracle11g

您好我根据sql中的字符串比较感到困惑。

```
select * from table where column1 = 'abc'; 
```

据我了解，字符串 'abc' 已转换为数字，让我们在此示例中假装 (1+2+3=6)。

这意味着

```
select * from table where column1 = 'cba'; 
```

也将具有相同的值 6。字符串不一样。请赐教。

编辑：因为你认为这是一个笑话。

"字符字母 King 被转换为数字表示。假设使用 AMERICAN NLS 设置的 US7ASCII 数据库字符集，文字 king 被转换为其序数字符值的总和：K+i+n+g = (75+105+ 110+103=393)。”

这是一本让我感到困惑的书中的确切文字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:28:02.640

你宁愿这样看

```
 a= 00000100
    b= 00010000
    c= 01100100

    abc= 000001000001000001100100
    cba= 011001000001000000000100 
```

因此不一样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:41:53.547

引用似乎来自[此 OCA/OCP Oracle Database 11g All-in-One Exam Guide 第 9 章的](http://www.ktipsntricks.com/data/ebooks/oracle/oca-ocp-11g/ch09.pdf)第 31 页。这似乎是不正确的（善良），因为如果它像当时那样工作`abc`并且`cba`确实会被视为等效。

[11gR2 SQL 语言参考](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements002.htm#sthref311)说：

> 在默认的二进制比较中，Oracle根据数据库字符集中字符的数字代码的连接值来比较字符串。如果一个字符在字符集中的数值大于另一个字符，则它大于另一个字符。

关键区别在于短语“连接值”，即更接近@JoroenMoonen 演示的内容，其中字符集中的数字代码拼凑在一起；而不是书中显示的值的总和。

但是，如果认为每个字符的数字代码被连接在一起，并且结果（可能很长！）字符串代表一个比较的数字，那将是一种误导。取这些值`abc`= `000001000001000001100100`=`266340`和`cba`= `011001000001000000000100`= `6557700`。仅将 6557700 与 266340 进行比较确实会表明`cba`'大于' `abc`。但`cb`也“大于” `abc`- `select greatest('abc', 'cb') from dual`- 如果您进行相同的转换，您会得到`cb`= `0110010000010000`= `25616`，它作为一个数字显然小于 266340。

我认为它实际上在[等效的 10gR1 文档](http://docs.oracle.com/cd/B14117_01/server.101/b10759/sql_elements002.htm)中得到了更好的解释：

> Oracle 逐字符比较两个值，直到第一个不同的字符。在该位置具有较大字符的值被认为较大。如果两个不同长度的值在较短的值结束之前是相同的，则认为较长的值更大。如果两个长度相等的值没有不同的字符，则认为这些值相等。

因此，假设 ASCII，`c`(99) 大于`a`(97)，因此它不需要查看任一字符串中的任何其他字符。这永远看不到`abc`和`cba`等价的。

无论如何，您对这本书的解释感到困惑是完全正确的。

# jquery - Jquery Draggable Sortable写入正确的输入，让子元素不起作用

> ID：14872567
> 
> 赞同：0
> 
> 时间：2013-02-14T10:22:03.717
> 
> 标签：jquery, draggable, jquery-ui-sortable, children, input-field

我正在尝试在 sortable 中重新排序一组照片`ul`；要以新顺序保存它们，我必须覆盖匹配的输入字段（名称和标题）：

那是我的`ul`结构：

```
 <ul class="float drag1">
    <g:each in="${fotos}" var="foto" status="index" >
        <li class="float editimg 1" id="${index}">
            <div class="float imgbox">
                <span class="floatr imgdel" onclick="deletePicture('${foto.name}')" title="Löschen"></span>
                <img src="${di.createImageURL(bucket:'foo', name: foto.name, format:'m')}" alt="${foto.titel}" />
                <g:hiddenField name="fotos[${index}].name" readonly="readonly" value="${foto.name}"/>
            </div>
            <input type="text" name="fotos[${index}].titel" class="fototitel"  value="${foto.titel}"/>
        </li>
    </g:each>
</ul> 
```

那就是我的JS

```
<script type="text/javascript">
$( sort );
function sort() 
{$('.drag1').sortable({
update: function(event,ui) {
    var draggingElement = $(ui.item);
    var ordering = draggingElement.index();
    var string1 = 'fotos['+ordering+'].name' ;
    var string2 = 'fotos['+ordering+'].titel' ;
    alert(string1+'---'+string2);
    //the following part doesn´t work, when i give those inputs unique id´s it work´s but i want this to be more self fulfilling.
    var inputs = draggingElement.getElementsByTagName("input");
    inputs[0].attr('name',string1);
    inputs[1].attr('name',string2);
 }
});
}
</script> 
```

警告 string1 和 string2 表明它们是正确的，我只需要更新输入的 name 属性。但在上面的例子中，我得到了一个 typeError

```
draggingElement.getElementsByTagName is not a function 
```

我无法弄清楚如何获取 draggingElement 的子输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:33:23.810

代替

```
var inputs = draggingElement.getElementsByTagName("input");
inputs[0].attr('name',string1);
inputs[1].attr('name',string2); 
```

试试这个

```
var inputs = draggingElement.find("input");
inputs.eq(0).attr('name',string1);
inputs.eq(1).attr('name',string2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:28:34.457

我想`getElementsByTagName`你会得到 HTML 元素对象，而你想要 jQuery 元素对象——以便使用该`attr`方法。

查看 jQuery 手册以获取返回 jQuery 元素数组的正确方法，然后像您所做的那样使用数组访问方法，或者`each`在它们上运行迭代器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:40:28.510

*代表 OP 发布以代替问题附录。*

这是我需要的脚本，感谢您的回答。

```
$( sort );
function sort() {
    $('.drag1').sortable({
    update: function(event,ui) {
        var draggingElement = $('.editimg');
        draggingElement.each(function() {
            var ordering = $(this).index();
            var string1 = 'fotos['+ordering+'].name';
            var string2 = 'fotos['+ordering+'].titel';
            var inputs = $(this).find("input");
            inputs.eq(0).attr('name',string1);
            inputs.eq(1).attr('name',string2);
       });
     }
    });
}; 
```

# javascript - TinyMCE 返回没有 HTML 的内容

> ID：14872569
> 
> 赞同：4
> 
> 时间：2013-02-14T10:22:04.120
> 
> 标签：javascript, tinymce, wysiwyg

我正在使用内部使用 tinyMCE 编辑器的内联编辑器[ipweditor工具。](http://spacebug.com/projects/ipweditor_in-place_wysiwyg_editor/)在他们的演示页面上，它使用的是旧版本的 tinyMCE，它在我的 IE 中不起作用。所以我用最新版本更新了 tinyMCE。

在旧版本的 TinyMCE 中，它返回给我定义的所有 HTML 标签的内容，而在新版本中，它只返回没有 HTML 标签的文本。这是 jsFiddle[演示](http://jsfiddle.net/nehalpatel/ya9Vh/1/)的链接。任何人都知道如何配置 tinyMCE，以便它也返回 HTML 标签。

HTML

```
<div style="display:none">
    <form method="post" action="somepage">
        <textarea name="content" style="width:100%"></textarea>
    </form>
</div>
<div style="border: solid thin gray; padding:5px;">
    <div class="my_text"><b> <span>Click me! I am editable and WYSIWYG!!!</span></b> 
</div> 
```

Javascript

```
 $(document).ready(function () {
    var ed = new tinymce.Editor('content', {
        mode: "exact",
        theme: "advanced",
        plugins: "emotions,table",
        theme_advanced_toolbar_location: "top",
        theme_advanced_statusbar_location: "bottom",
        theme_advanced_resizing: true,
        theme_advanced_buttons1: "bold,italic,underline,fontselect,fontsizeselect,forecolor,backcolor,|,code,",
        theme_advanced_buttons2: "",
        theme_advanced_buttons3: "",
        table_default_cellspacing: 0,
        table_default_border: 1,
        remove_linebreaks: false
    });

    $('.my_text').editable({
        type: 'wysiwyg',
        editor: ed,
        onSubmit: function submitData(content) {
            alert(content.current);
        },
        submit: 'save',
        cancel: 'cancel'
    });
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T14:09:32.570

在插件库中进行任何修改总是不可取的，但这确实需要一些修改。问题出在“ipweditor.js”工具上。它在内部创建新的 tinyMCE 编辑器对象，并从 tinyMCE 获得“文本”格式的响应。

```
var r =options.editor.getContent({format : 'text'}); 
```

我们需要用 'html' 替换 'text'

```
var r =options.editor.getContent({format : 'html'}); 
```

最好使此格式设置也是动态的，因此在初始设置中附加一个设置变量并从那里获取值。

```
var defaults = {
    onEdit: null,
    onSubmit: null,
    onCancel: null,
    editClass: null,
    submit: null,
    cancel: null,
    type: 'text', //text, textarea or select
    submitBy: 'blur', //blur,change,dblclick,click
    editBy: 'click',
    editor: 'non',
    options: null,
    format:'text'
}
var options = $.extend(defaults, options); 
```

现在使用设置中定义的格式进行检索。

```
var r =options.editor.getContent({format : options.format}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:36:13.033

您可以使用`content.previous`. [这](http://jsfiddle.net/6tTBj/)是一个修改过的小提琴。

# entity-framework - DDD中的非业务逻辑数据库访问

> ID：14872570
> 
> 赞同：0
> 
> 时间：2013-02-14T10:22:14.460
> 
> 标签：entity-framework, architecture, domain-driven-design

刚从 DDD 开始。我了解所有域实体及其逻辑应与存储库接口一起保存在域层中。在我的应用程序中，我将一些数据存储在数据库中，这些数据用于在运行时构建部分用户界面（表示层）。我应该在哪里保留此类类型的 poco 类和存储库接口，在应用程序层或域层中。我无法弄清楚，因为这些对象不会有任何与域相关的业务逻辑，但它们需要从数据库中获取水分，而且我使用的是 EF，所以对于数据访问，我需要实体和存储库，所以对我来说，显而易见的选择是保留它们域层中的所有其他实体和存储库接口，但违反了 DDD 规则

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:29:01.113

我想你已经回答了你自己的问题：

> 在我的应用程序中，我将一些数据存储在数据库中，这些数据用于在运行时构建用户界面（**表示层**）的一部分。

对用于服务 UI 的数据的访问应封装在表示层中。这与应用层的不同之处在于，DDD 应用层通过编排存储库并委托给适当的实体、域服务来实现用例——它围绕您的域层形成一个 API。不同的表示实现可以使用相同的应用服务。

然而，不同的表示层实现可能需要不同的数据。因此，将表示数据访问直接放在表示层中。这可以通过 EF 来实现，这不是 DDD 场景独有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:58:16.220

考虑它的一个好方法是 - 如果出于性能原因必须用存储过程替换 EF，则不必修改域代码。所以任何需要隐藏在界面后面并可以替换的东西。

存储库可以是域逻辑的一部分。然而，不应该是持久性的机制。这可以很容易地封装到 DAL 服务或其他对象中，当然这些对象被编程为 IDALService 接口。因此，当您需要切换持久性（例如，从 EF 迁移到 NoSQL 解决方案）时，您只需编写一个实现 IDALService 接口的替代版本，就可以了。存储库仍然可以在其中执行逻辑，但现在使用一种新的方式来存储它们（这是控制反转的想法）。

至于 POCO 对象，在 DDD 中真正的问题是它们代表什么？它们是需要持久化的实体吗？他们是有价值的对象吗？不要让技术 (EF) 决定您的对象模型的结构是什么，而是提供转换为应用程序范围的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:24:22.933

在应用层。保持域完整和隔离。

# c++ - 在字符串中找到完美的正方形

> ID：14872571
> 
> 赞同：1
> 
> 时间：2013-02-14T10:22:19.063
> 
> 标签：c++, python, algorithm

一个完美的正方形采用二进制格式，一些位被替换为“？” 例如 1??，数字将是 4.（或 1????000???0000）

我需要找到那个完美的正方形。（只有这样的可能数字）

字符串中的 '?' 数为 n

为了找到这个数字，我正在做的是遍历 2**n 个数字（111,110,101,100）并检查它是否是一个完美的正方形。我正在使用以下函数来检查它是否是一个完美的正方形。

```
bool issqr(int n){
   int d=(int)(sqrt(n));
   if(d*d==n) return true;
   else return false;
} 
```

即使在 python 中我做到了，它也需要很多时间，所以我只使用位操作来填充 2**n 数字（这比 python 版本快得多）转移到 C++

但如果数字超过 64 位，则会失败

如何避免这个问题？如果一个数字有 120 位，我怎么能做同样的事情。

(10100110???1?1?01?1?011000?1100?00101000?1?11001101100110001010111?0?1??0110?110?01?1100?1?0110?1?10111?01?0111000?10? ?101?01)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:42:25.750

与其用 C++ 重写，不如先考虑改进算法。最低可能的答案是原始值的平方根，所有“？” 替换为四舍五入的 0，可能的最高答案是模式的平方根，将“？”替换为向下舍入的 1。找到这两个值，遍历它们，平方并检查模式。

这更快，因为您迭代的数字要少得多，而且因为您没有在循环中计算任何平方根：平方要容易得多。

您无需比较字符串即可检查匹配项：

```
mask = int(pattern.replace('0', '1').replace('?', '0'), 2)
test = int(pattern.replace('?', '0'), 2)

def is_match(n):
    return (n&mask)==test 
```

所以把它们放在一起：

```
def int_sqrt(x):
    if x < 0:
        raise ValueError('square root not defined for negative numbers')
    n = int(x)
    if n == 0:
        return 0
    a, b = divmod(n.bit_length(), 2)
    x = 2**(a+b)
    while True:
        y = (x + n//x)//2
        if y >= x:
            return x
        x = y

def find_match(pattern):
    lowest = int(pattern.replace('?', '0'), 2)
    highest = int(pattern.replace('?', '1'), 2)
    mask = int(pattern.replace('0', '1').replace('?', '0'), 2)
    lowsqrt = int_sqrt(lowest)
    if lowsqrt*lowsqrt != lowest:
            lowsqrt += 1
    highsqrt = int_sqrt(highest)
    for n in range(lowsqrt, highsqrt+1):
        if (n*n & mask)==lowest:
            return n*n

print(find_match('1??1??1'))
print(find_match('1??0??1'))
print(find_match('1??????????????????????????????????????????????????????????????????????1??0??1')) 
```

输出：

```
121
81
151115727461209345152081 
```

注意 这仅适用于 Python 3.x，最后一个测试将`range`在 Python 2.x 中溢出

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T10:40:32.880

据我了解，给定一个整数`n`，您试图找到一个`sq`匹配的平方数：

> 2 ^n - 1 < 平方 < 2 ^(n+1) - 1

这个条件是“我的数字必须有形式 1????”的数学翻译。哪里有`n`“？”。

首先，您可以注意到，如果`n`是偶数，则数字 2 ^n是一个完全平方并且符合您的条件（在二进制中，它是数字 1000...000 - n 个零 -）。

如果`n`是不均匀的（比如 n = 2.p + 1），那么 2 ^(n+1)是一个完美的正方形（(2 ^(p+1) ) ²）。计算以下数字将为您提供一个完美的正方形：

> (2 ^(p+1) - 1) ²

为了满足第一个不等式，p 必须满足：

> 2 ^n - 1 < (2 ^(p+1) - 1) ²

然后

> 0 < 2 ^(n+1) - 2 ^(p+2) + 1 - 2 ^n + 1，

最后，

> 2 ^n + 2 - 2 ^(p+2) > 0
> 或
> 2 ^(2p) - 2 ^(p+1) + 1 > 0

如果我们考虑将 p 与 f(p) 匹配的函数，则：

> f(p) = 2 ^(2p) - 2 ^(p+1) + 1

该函数是为每个正实数定义的，并且是严格递增的。此外，f(0) = 0。最后，当`p > 0`! 对于`p = 0`- 或`n = 1`-，问题没有有效的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:36:27.540

您不需要遍历所有 2**n 数字来找到完美的平方，实际上您只需要一个小数平方操作：

假设您有整数 n，并且您想找到小于或等于 n 的最大完全平方，我们将其称为 m。然后：

```
d = (int)sqrt(n);
m = d*d; 
```

解释：

假设有一个完美的正方形 m' 比 m 大，这意味着有一个整数 d' 使得：d' > d 并且 d'*d' = m'。

但是 d' >=d+1 和 (d+1)*(d+1) > n 所以 m' > n 与我们的要求 m' <= n 相矛盾。

现在回答你的问题：

为了找到完美的正方形，只需将所有“？”更改为“1”。并找到完美的正方形，如果它符合你的字符串，你得到了你正在寻找的数字，如果没有改变足够的“？” 从 msb 到“0”，使结果数字小于或等于您刚刚找到的完美正方形，并继续前进，直到找到完美正方形或用完选项。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T10:36:05.747

您的操作可能返回对于整数来说太大的东西...... [http://www.cplusplus.com/doc/tutorial/variables/](http://www.cplusplus.com/doc/tutorial/variables/)

# c++ - C++ 创建多个派生类的数组

> ID：14872573
> 
> 赞同：1
> 
> 时间：2013-02-14T10:22:18.933
> 
> 标签：c++

我有一个基类 Student()，有两个派生类 GradStudent() 和 UndergradStudent()。

基类有一个名为 getInfo() 的函数，两个派生类有自己的 getInfo() 函数。

任务是创建一个学生数组并将每个班级的对象存储在该数组中。然后我从每个调用 getInfo() （对每个使用基类函数的版本），然后从两个派生类调用 getInfo() 函数。

对于我的生活，我无法弄清楚如何做到这一点。这是我到目前为止所拥有的：

（我想我应该在这里提一下，我不能修改基类）

```
 Student *classRoom[3];

    Student base ( "Jim", "Bean", 1111 );
    classRoom[0] = &base;

    GradStudent test ( "Jack", "Daniels", 1234, 'M', "Art" );
    classRoom[1] = &test;

    UndergradStudent ust1 ( "Johnny", "Walker", 1235, 1 );
    classRoom[2] = &ust1;

    cout << classRoom[1]->getInfo(); 
```

谁能指出我正确的方向？我会说说明它必须是一个数组，所以请不要使用矢量解决方案（无论如何仍然不熟悉它们）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:37:27.210

如果您甚至无法修改派生类，则很难在不知道它们是特定类型的情况下对它们调用 GetInfo。也许您需要使用直接解决方案：

```
GradStudent gradStudent;
cout << gradStudent.GetInfo(); 
```

或者您可以尝试检查学生是否属于指定的派生类，但 IMO 它非常丑陋和危险（就扩展代码而言）：

```
for (int i = 0; i < 3; i++)
{
    GradStudent * gs = dynamic_cast<GradStudent *>(classRoom[i]);
    if (gs != nullptr)
        cout << gs->GetInfo();
    else
    {
        UndergradStudent * ugs = dynamic_cast<UndergradStudent *>(classRoom[i]);
        if (ugs != nullptr)
            cout << ugs->GetInfo();
        else
            cout << classRoom[i]->GetInfo();
    }
} 
```

我不得不说，多态性是专门为处理这种情况而创建的，而 GetInfo 在基类中不是虚拟的是严重的架构缺陷。

另外：如果您正在使用指针，请避免将地址检索到局部变量。那可能很危险。相反，手动分配和释放内存：

```
classRoom[0] = new Student;
classRoom[1] = new GradStudent;
classRoom[2] = new UndergradStudent;

// Process data

for (int i = 0; i < 3; i++)
    delete classRoom[i]; 
```

在边缘：我讨厌这样的任务：做 X 而不使用 Y（其中 Y 是*专门*为解决 X 而设计的）。

* * *

**编辑**：（回应评论）

你问，虚函数如何解决这个问题。假设一下，那`Student::GetInfo`是虚拟的。我们来分析以下几段代码：

```
Student * student = new Student;
student->GetInfo(); // Student::GetInfo is called

GradStudent * gradStudent = new GradStudent;
gradStudent->GetInfo(); // GradStudent::GetInfo is called 
```

暂时没有什么大惊小怪的。

```
Student * student = new GradStudent;
student->GetInfo();
// if Student::GetInfo is virtual, GradStudent::GetInfo is called here
// if Student::GetInfo is not virtual, Student::GetInfo is called here 
```

现在仔细阅读。If`Student::GetInfo` **是虚拟**的并且在`GradStudent`类中实现，`GradStudent::GetInfo`将被调用，尽管事实上它是在`Student`变量上调用的。但是，如果`Student::GetInfo` **不是 virtual**，在以前的情况下，`Student::GetInfo`将被调用。这基本上就是虚函数的工作方式。

在您的情况下，您有一组 Student * 变量 - 您不完全知道它们是`Student`s、`GradStudent`s 还是`UndergradStudent`s。由于 your`Student::GetInfo`不是虚拟的，因此对这些变量调用此方法将始终导致调用`Student::GetInfo`，而不管它们的实际类型如何。

在这种情况下，我能想到的唯一解决方案是尝试猜测它们实际上是哪个类：

```
Student * student = new UndergradStudent;

Student * s = student; // Ok
GradStudent * gs = dynamic_cast<GradStudent *>(student); // Not true, will return NULL/nullptr
UndergradStudent * ugs = dynamic_cast<UndergradStudent *>(student); // Ok 
```

这样就可以返回原来的类型，调用`GetInfo`实际的变量类型。

但请注意，这是一个丑陋的解决方案，这类问题是由虚函数解决的。

[C++ FAQ](http://www.parashift.com/c++-faq/virtual-functions.html)是进一步阅读虚函数的好地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:19:16.460

我对这个问题有点困惑，但这就是我从中得到的：

遍历 中的每个元素`classRoom`，调用`getInfo()`每个元素。然后输出 和 的`test.getInfo()`结果`ust1.getInfo()`。

如果这是正确的，我认为老师可能试图指出的是，如果`getInfo()`正在调用的对象是派生类类型之一（`GradStudent`或`UndergradStudent`），即使指向对象的指针是 type `Student*`，`getInfo()`将始终调用派生类版本。

这是因为即使您调用`getInfo()`a `Student*`，`getInfo()`也会在运行时绑定到派生类实现（因为`getInfo()`是虚拟的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:31:30.217

如果`getInfo()`成员函数不是虚拟的，则分配的第一部分是迭代数组并调用`getInfo()`每个实例。

对于第二部分，您必须将派生类的实例向下转换为它们的真实类型，以便调用派生类的实际成员函数。

另外，我建议您按以下方式填充数组：

```
classRoom[0] = new Student( "Jim", "Bean", 1111 );
classRoom[1] = new GradStudent( "Jack", "Daniels", 1234, 'M', "Art" );
classRoom[2] = new UndergradStudent ( "Johnny", "Walker", 1235, 1 ); 
```

不要忘记在程序结束时删除它们。

# winforms - 遍历checkedListBox测试检查-强制错误

> ID：14872577
> 
> 赞同：6
> 
> 时间：2013-02-14T10:22:27.583
> 
> 标签：winforms, foreach, checkedlistbox

我正在尝试检查已选中列表框中的每个项目，并根据是否选中该项目来处理该项目。我已经能够使用 indexCollection 获取已检查的项目，但我无法获取所有项目，我收到此错误“无法将类型为“System.String”的对象转换为类型“System.String”。 Windows.Forms.ListViewItem'

```
 foreach (ListViewItem item in checkedListBox2.Items)
        {
            if (item.Checked == true)
                //do something with item.name

            else
                //do something else with item.name
        } 
```

我不确定为什么它在 foreach 行中给我字符串转换错误。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T10:40:28.660

如果您允许复选框具有 Indeterminate 状态，那么您应该使用[GetItemCheckState](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.getitemcheckstate%28v=vs.100%29.aspx)方法来检索复选框的状态

```
for (int i = 0; i < checkedListBox2.Items.Count; i++) 
{
     CheckState st = checkedListBox2.GetItemCheckState(checkedListBox2.Items.IndexOf(i));
     if(st == CheckState.Checked)
        ....
     else if(st == CheckState.Unchecked)
        ....
     else
        ... // inderminate
} 
```

否则足以调用返回真/假值的[GetItemChecked （对于不确定状态也为真）](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.getitemchecked%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T10:32:26.773

CheckedListBox.Items 包含 的集合`objects`，而不是 的集合`ListViewItem`

你可以这样检查

```
 for (int i = 0; i < checkedListBox2.Items.Count; i++)
        {
            if (checkedListBox2.GetItemChecked(i))
            {
                //do something with checkedListBox2.Items[i]
            }
            else
            {
                //do something else with checkedListBox2.Items[i]
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-29T11:39:37.733

如果您允许复选框具有 Indeterminate 状态，那么您应该使用[GetItemCheckState](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.getitemcheckstate%28v=vs.100%29.aspx)方法来检索复选框的状态

```
for (int i = 0; i < checkedListBox2.Items.Count; i++) 
{
     CheckState st = checkedListBox2.GetItemCheckState(i);
     if(st == CheckState.Checked)
        ....
     else if(st == CheckState.Unchecked)
        ....
     else
        ... // inderminate
} 
```

否则足以调用返回真/假值的[GetItemChecked （对于不确定状态也为真）](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.getitemchecked%28v=vs.100%29.aspx)

# php - 函数 file_get_content 偶尔不起作用

> ID：14872578
> 
> 赞同：2
> 
> 时间：2013-02-14T10:22:27.287
> 
> 标签：php

当我使用 a`file_get_content`下载 php 脚本执行的结果时：

```
 //mainfile.php
    $ctx = stream_context_create(array(
        'http' => array(
            'timeout' => $this->cfg['gp_timeout']/2
            )
        )
    );
    $url_xml='http://test.server.eu/webgatescript.php?getphoto&param1=1&test=1&param2=2&param3=3';
    $webgateResponse=file_get_contents($url_xml,false,$ctx); 
```

据我所知，函数`file_get_content`返回`string`- 文件的内容，如果文件不存在则返回`FALSE`。

有时函数会`file_get_content`返回`FALSE`，尽管我 100% 确定远程文件返回了内容（在我的情况下是 xml 文件，我有访问权限和日志）。此外，在执行远程脚本结束后`file_get_content`返回`FALSE`几微秒，但设置超时所需的时间更少。

部分日志：

```
10:22:04<?xml version="1.0" encoding="UTF-8"?>
10:22:16<response><htlName/><lang/><texts/></response>
10:22:46<?xml version="1.0" encoding="UTF-8"?>
10:22:58<response><htlName/><lang/><texts/></response>
10:23:28<?xml version="1.0" encoding="UTF-8"?>
10:23:29<response><htlName/><lang/><texts/></response>
10:23:59<?xml version="1.0" encoding="UTF-8"?>
10:23:59<response><htlName/><lang/><texts/></response>
10:24:29<?xml version="1.0" encoding="UTF-8"?>
10:24:29<response><htlName/><lang/><texts/></response>

Warning: file_get_contents(http://test.server.eu/webgatescript.php?getphoto&param1=1&test=1&param2=2&param3=3): failed to open stream: HTTP request failed!  in /home/www/mainfile.php on line 22

Call Stack:
    0.0002      93616   1\. {main}() /home/www/mainfile.php:0
      175.5346     109072   2\. file_get_contents(string(172), bool, resource(14) of type     (stream-context)) /home/www/mainfile.php:22

10:24:5910:25:46<?xml version="1.0" encoding="UTF-8"?>
10:25:47<response><htlName/><lang/><texts/></response> 
```

我做了一些测试，其中一个正在运行文件（我`mainfile.php`在`exec`同一台测试服务器上有两个文件，但在生产服务器上将是两个独立的系统）

```
 exec("php webgatescript.php >> tom2.log"); 
```

并且每个跑步案例都在`webgatescript.php`记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:26:35.220

我不会依赖的`file_get_contents`。

许多（共享）网络服务器不允许`file_get_contents`从其他服务器获取文件，但允许使用[cURL](http://php.net/manual/en/book.curl.php)。

```
$url = 'http://www.stackoverflow.com';

// start cURL
$ch = curl_init($url);

// set options (http://www.php.net/manual/en/function.curl-setopt.php)
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 4); // four seconds until connect timeout
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); // we want the response in a variable
curl_setopt($ch, CURLOPT_TIMEOUT, 4); // four seconds until timeout

$response = curl_exec($ch); // get contents

curl_close($ch); // close the cURL handle 
```

这并不容易，但非常可靠。

* * *

我（可能）找到了答案！正如我所提到的，您可以设置一个选项来允许或禁止`file_get_contents`（以及一些其他功能）从 URL 获取文件。

我找到了[Filesystem and Streams Configuration Options](http://php.net/manual/en/filesystem.configuration.php)。该`allow_url_fopen`设置可用于允许或禁止打开 URL 的 using `fopen`，这也适用于`file_get_contents`。它应该默认启用，所以我不知道为什么它不适合你。

无论哪种方式，我仍然支持 cURL ;)

# java - 无法将消息发送到 activemq 中的 xmpp 队列

> ID：14872579
> 
> 赞同：1
> 
> 时间：2013-02-14T10:22:40.883
> 
> 标签：java, jms, xmpp, activemq

我无法在 .xmpp 队列中发送消息`activemq`。我得到以下示例。根据文档，我下载*了 wstx* jar 并放在`activemq/lib/optional`文件夹中。

我得到以下异常：

```
Caught: javax.jms.JMSException: Could not create Transport. Reason: java.io.IOException: Transport scheme NOT recognized: [xmpp]
javax.jms.JMSException: Could not create Transport. Reason: java.io.IOException: Transport scheme NOT recognized: [xmpp]
        at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:35)
        at org.apache.activemq.ActiveMQConnectionFactory.createTransport(ActiveMQConnectionFactory.java:252)
        at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:265)
        at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:238)
        at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:184)
        at App$HelloWorldProducer.run(App.java:41)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.IOException: Transport scheme NOT recognized: [xmpp]
        at org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:27)
        at org.apache.activemq.transport.TransportFactory.findTransportFactory(TransportFactory.java:196)
        at org.apache.activemq.transport.TransportFactory.connect(TransportFactory.java:66)
        at org.apache.activemq.ActiveMQConnectionFactory.createTransport(ActiveMQConnectionFactory.java:250)
        ... 5 more
Caused by: java.io.IOException: Could not find factory class for resource: META-INF/services/org/apache/activemq/transport/xmpp
        at org.apache.activemq.util.FactoryFinder$StandaloneObjectFactory.loadProperties(FactoryFinder.java:96)
        at org.apache.activemq.util.FactoryFinder$StandaloneObjectFactory.create(FactoryFinder.java:58)
        at org.apache.activemq.util.FactoryFinder.newInstance(FactoryFinder.java:146)
        at org.apache.activemq.transport.TransportFactory.findTransportFactory(TransportFactory.java:193)
        ... 7 more 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T13:36:50.373

你需要给你的maven pom.xml添加activemq-xmpp依赖

```
 <dependency>
<groupId>org.apache.activemq</groupId>
<artifactId>activemq-xmpp</artifactId>
<version>5.8.0</version>
 </dependency> 
```

如果您不使用 maven ，请将[activemq-xmpp.jar](http://mvnrepository.com/artifact/org.apache.activemq/activemq-xmpp/5.8.0)与所有其他 jars 添加到您的 /lib

# c++ - 如何专门化一个类模板成员函数？

> ID：14872582
> 
> 赞同：2
> 
> 时间：2013-02-14T10:22:56.357
> 
> 标签：c++, templates

我有一个类模板，它是简化的，有点像这样：

```
template<typename T>
class A
{
protected:
    T _data;
public:
    A* operator%(const A &a2) const
    {
        A * ptr;

        ptr = new A(this->_data % a2._data);
        return ptr;
    }
}; 
```

另一个继承自这个类的类：

```
class B : public A<double>
{
    // ...
}; 
```

但是当我这样做时，编译器会说：

```
 invalid operands of types ‘double’ and ‘const double’ to binary ‘operator%’ 
```

然后，我尝试将我`operator%`的 for *double*和*float*专门化，因为 % 对于这些类型似乎是不可能的。**我在A 类**声明之后添加了以下代码。

```
template<>
A* A<double>::operator%(const A &a2) const
{
    A * ptr;
    ptr = new A((uint32_t)this->_data % (uint32_t)a2._data);
    return ptr;
} 
```

我得到这个错误，我真的不明白为什么......

```
In function `A<double>::operator%(A const&) const':
./include/A.hpp:102: multiple definition of `A<float>::operator%(A const&) const'
src/Processor.o:./include/A.hpp:102: first defined here 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T10:24:15.990

如果您在类之外实现了专业化，则它不再是内联的，因此它将被定义多次。将其标记为内联：

```
template<>
inline A* A<double>::operator%(const A &a2) const
{
    A * ptr;
    ptr = new A(this->_data % a2._data);
    return ptr;
} 
```

或将其移动到类定义中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T10:25:28.000

这是因为与“真实”模板不同，全功能模板特化在链接和 ODR 方面与普通功能类似。而且由于您在任何类之外对其进行了专门化，因此它不像在类定义中定义的普通方法那样隐式声明为内联。

因此，您要么必须内联声明函数，要么只在头文件中*声明*它并像任何普通函数一样在源文件中*定义它。*

# c# - 如何在中继器控件中调用 Html 按钮控件

> ID：14872591
> 
> 赞同：0
> 
> 时间：2013-02-14T10:23:17.703
> 
> 标签：c#, asp.net, asprepeater

下面是我的代码，任何人都可以指导我在转发器控件上调用 html 按钮。

标记：

```
 <asp:Repeater ID="rptList" runat="server" onitemcommand="rptList_ItemCommand1">
 <HeaderTemplate>
    <table id="tbllist">
        <tr>
            <th>Qty</th>
            <th width="100%" align="left">Item</th>
            <th></th>
        </tr>
</HeaderTemplate>
<ItemTemplate>
        <tr>
            <td align="center"><%# Eval("Quantity")%></td>
            <td align="left"><%# Eval("ItemName")%></td>
            <td align="center"><input id="Button1" runat="server" commandname="btnAdd" type="button" value="Addtocart" /></td>
        </tr>
</ItemTemplate>
<FooterTemplate>
    </table>
</FooterTemplate> 
```

.CS 文件代码：

```
 protected void rptList_ItemCommand1(object source, System.Web.UI.WebControls.RepeaterCommandEventArgs e)
    {
        if (e.CommandName == "btnAdd")
        {
            Response.Write("hello,I am a button.");
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:25:04.707

你使用了没有输入`runat="server"`的，你需要添加runat="server"来制作一个按钮服务器按钮控件并执行`postback`

改变

```
<input id="btnAddtocart" type="button" value="Addtocart" /> 
```

至

```
<input id="btnAddtocart" runat="server" type="button" value="Addtocart" /> 
```

如果您没有任何特殊原因使用它，请使用`asp:button`代替。`input type="button"`

```
 <asp:Button ID="btnAddtocart"  runat="server" Text="Addtocart" CommandName="Addtocart"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:29:06.103

您使用了没有 runat="server" 的输入

改变

```
<input id="btnAddtocart" type="button" value="Addtocart" /> 
```

至

```
<input id="btnAddtocart" runat="server" type="button" value="Addtocart"  CommandName="CommandName"/> 
```

使用 asp:button 代替 input type="button"

```
 <asp:Button ID="btnAddtocart"  runat="server" CommandName="CommandName"/> 
```

# ruby-on-rails - Rails 时区活动记录

> ID：14872600
> 
> 赞同：2
> 
> 时间：2013-02-14T10:23:39.050
> 
> 标签：ruby-on-rails, ruby, timezone

我的应用程序.rb：

```
config.time_zone = 'Moscow'
config.time_zone = "(GMT+04:00) Moscow"
config.active_record.default_timezone = 'Moscow'
config.active_record.default_timezone = :local 
```

当我运行此命令时，我得到：

```
1.9.3-p362 :001 > Time.now
 => 2013-02-14 14:18:42 +0400
1.9.3-p362 :002 > Time.zone.now
 => Thu, 14 Feb 2013 10:18:52 UTC +00:00 
```

所以在 db 我看到 10:18:52 UTC +00:00。但是要配置什么以及如何配置才能看到这样的时间，例如在 Time.Now 中？（当我向 db 插入新行时，我必须看到 Time.now 给出的时间，要配置什么？）

服务器的时间是莫斯科....

db也是mysql

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T10:47:29.283

您可以像这样使用当地时间：

```
> current_time = Time.now.utc
  => 2013-02-14 15:15:58 UTC 
> current_time .localtime
  => 2013-02-14 10:15:58 -05 hours 
```

您还可以使用：

```
Time.now.utc.in_time_zone("Moscow") 
```

但是对于您的问题的答案，解决方案可能是这样设置：

```
config.time_zone = 'Moscow' (don't set this - delete this line)
config.active_record.default_timezone = :local 
```

你也可以使用你的当地时间：

```
Time.local_time 
```

我希望其中一些方法可以帮助你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T10:36:10.847

在您的 application.rb 中包括以下几行：

```
config.time_zone = 'Moscow'
config.active_record.default_timezone = 'Moscow' 
```

现在您已经设置了时区：

```
Time.now
=> 2013-02-14 11:14:46 +0000 
Time.current
=> Thu, 14 Feb 2013 15:14:48 MSK +04:00 
user = User.create(name: 'test')
=> #<User id: 6, name: "test", created_at: "2013-02-14 11:15:00", updated_at: "2013-02-14 11:15:00"> 
user.created_at
=> Thu, 14 Feb 2013 15:15:00 MSK +04:00 
```

如您所见，尽管 rails 将时间存储为`UCT +0000`（非常聪明的顺便说一句），但 rails 接口提供了所需的偏移量。如果调用任何对象，比如`user.created_at`它会偏移数据库时间，返回区域时间。
它非常有用，因为它允许为不同的用户配置不同的时区。时间将无偏移地存储，但每个用户将获得其等效的时区。

`Time.now`返回 +00:00，与您的时区无关。
`Time.current`是一样的`Time.zone.now`。

# python - 如何找出所需的窗口大小？

> ID：14872604
> 
> 赞同：4
> 
> 时间：2013-02-14T10:23:59.347
> 
> 标签：python, tkinter

我有一个包含标签 w 的窗口，其文本可以是给定种类中的任何一种（在本例中为“Hello World！”一次、两次和三次）：

```
from Tkinter import *
import time

root = Tk()
text = "Hello, World! "
w = Label(root)

for i in range(1, 4):

    w["text"] = text*i
    w.update_idletasks()
    w.grid()
    w.update_idletasks()
    time.sleep(1)

root.mainloop() 
```

我想将窗口的大小设置为固定宽度。这个宽度应该是 w 可以获得的最长文本所需的宽度。我怎样才能最容易地做到这一点？我是否必须循环浏览所有可能的文本，读取相应的窗口宽度并将最终宽度设置为这些值的最大值？如果这是最好的方法，我怎么能在屏幕上不出现窗口的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:04:44.127

如果你不循环浏览它们，你怎么知道最大文本的大小？唯一的可能性是早点知道每个的大小，但那样你就已经解决了这个问题。因此，您所要做的就是设置标签并检查窗口所需的宽度，然后检查此宽度是否大于当前最大值并在需要时更新它。如果在此过程中碰巧出现了窗口，您可以调用`withdraw`，做所有您需要的事情，然后调用`deiconify`。

```
import time
import random
import Tkinter

root = Tkinter.Tk()
root.withdraw()

text = "Hello, World! "
w = Tkinter.Label()
w.grid()

maxwidth = 0
for _ in range(10):
    i = random.randint(1, 5)
    w["text"] = text*i
    print i
    w.update_idletasks()
    maxwidth = max(maxwidth, root.winfo_reqwidth())

root.wm_minsize(maxwidth, root.winfo_reqheight())
root.wm_maxsize(maxwidth, int(1e6))
root.deiconify()

root.mainloop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:08:40.857

您可以为标签设置固定宽度，并使用[textwrap](http://docs.python.org/2/library/textwrap.html)模块包装文本。`textwrap.wrap(text, width)`将分成`text`不超过`width`字符的行。它也有用于打断长词或连字符的选项，但请参阅相关文档。

![在此处输入图像描述](../Images/e71cf1989bc7dc2bb83dc47983d8053a.png)

```
from Tkinter import *
import time
import textwrap

root = Tk()
text = "Hello, World! "
w = Label(root, width=35)
w.grid()

for i in range(1, 4):
    w.update()
    s = text*i 
    s = "\n".join(textwrap.wrap(s, 21))

    w["text"] = s
    time.sleep(1)

root.mainloop() 
```

# servlets - 将json文件传输到客户端

> ID：14872606
> 
> 赞同：0
> 
> 时间：2013-02-14T10:24:00.560
> 
> 标签：servlets, file-transfer

```
String objectToReturn = "{ key1: 'value1', key2: 'value2' }";
JsonObject json = new JsonObject(objectToReturn);
DataOutputStream dos = new DataOutputStream(resp.getOutputStream());
dos.write(json.toString().getBytes());
dos.close(); 
```

上面的代码用于将 json 文件传输到客户端。（实际上我是服务器）当我执行该代码时，字符串'objectToReturn'显示在结果页面中{key1：'value1'，key2：'value2'}。我希望它作为流文件传输。转移得好吗？或不。我应该怎么办？

# http-post - android：如何转换gps坐标并使用post方法将其发送到mysql服务器

> ID：14872608
> 
> 赞同：1
> 
> 时间：2013-02-14T10:24:04.303
> 
> 标签：http-post

我正在尝试在我的 php 服务器中发送数据，但数据是纬度和经度格式。

这是错误：`Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject`

```
private class sendlocation extends AsyncTask<String,String,String>

{

@Override
protected String doInBackground(String... args0) 
{       
    double latlat = gps.getLatitude();
    double longlong = gps.getLongitude();
    String resultlat = Double.toString(latlat);
    String resultlong = Double.toString(longlong);

    List<NameValuePair> params = new ArrayList<NameValuePair>(2);
    params.add(new BasicNameValuePair("Latitude",resultlat));
    params.add(new BasicNameValuePair("Longitude",resultlong));
    JSONObject json = jsonParser.makeHttpRequest(url_send_loc,"POST", params);

    Log.d("Create Response", json.toString());
    try
    {
        int success = json.getInt(TAG_SUCCESS);
        if(success == 1)
        {
            Toast.makeText(getApplicationContext(),"Location Successfully sent: \nLat "+resultlat+" nLong" + resultlong ,Toast.LENGTH_LONG).show();

        }
        else
        {   pdialog.dismiss();
            Toast.makeText(getApplicationContext(), "Unknown error! Location not sent", Toast.LENGTH_LONG).show();
        }
    }catch(JSONException e)
    {
        e.printStackTrace();
    }
    return null;
};
} 
```

# android - 在类 View 中显示 ListView

> ID：14872609
> 
> 赞同：1
> 
> 时间：2013-02-14T10:24:05.677
> 
> 标签：android, listview, view, android-activity

对不起，我重新创建我的帖子，PLZ 这次只是回答，如果你知道或对答案有想法，我厌倦了人们回答“你为什么这样做？” 或者“天哪，你不知道 Android 吗？”。

在我的 MainActivity（扩展 Activity）中，我想调用显示 ListView 的类 ListDataView（扩展 View）。

可能吗 ？不要问我为什么要这样做，只要回答是或否以及为什么请回答。

泰

ps：对不起我的行为，但真的很厌倦这个社区中的一些无用的家伙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:29:03.093

你真正想要什么？

1.  在您的 mainView 中显示 ListDataView：您应该检查我认为您真正想要做的片段。[https://stackoverflow.com/questions/5710573/need-a-fragments-example](https://stackoverflow.com/questions/5710573/need-a-fragments-example)

2.  添加一个按钮（例如）以转到另一个视图：使用新视图创建一个新活动并执行一个意图。[http://www.vogella.com/articles/AndroidIntent/article.html](http://www.vogella.com/articles/AndroidIntent/article.html)

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:45:28.553

所以你有一个`Activity`和一个视图类被称为`ListDataView`显示数据列表。并且您想设置`ListDataView`为您的活动的视图。如果我的理解不正确，请纠正我..

您可以通过 using [()](http://developer.android.com/reference/android/app/Activity.html#setContentView%28android.view.View%29)`ListDataView`方法创建类的对象并将该对象设置为视图，如以下代码所示：`Activity`[`setContentView`](http://developer.android.com/reference/android/app/Activity.html#setContentView%28android.view.View%29)

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {

        ListDataView view = new ListDataView(this);
        //may be some initialization of the ListDataView
        setContentView(view)
       } 
```

# java - twitter链接android所有@mentions

> ID：14872611
> 
> 赞同：3
> 
> 时间：2013-02-14T10:24:08.913
> 
> 标签：java, android, tweets, linkify

我想在 android 的 mytweets 应用程序上提供所有 twitter @mentions 的链接。如果我点击@mentions，我想打开另一个关于@mentions 的页面。

此代码不起作用。首先，我想在推文中搜索@mentions，并提供此@mentions 的链接，如果我在推文中单击此@mentions，我想打开有关此@mentions 的另一个页面。

```
TextView bt = (TextView) v.findViewById(R.id.bottomtext);
Pattern atMentionPattern = Pattern.compile("@([A-Za-z0-9_]+)");
String atMentionScheme = "http://twitter.com/";

TransformFilter transformFilter = new TransformFilter() {

    public String transformUrl(final Matcher match, String url) {
        return match.group(1);
    }
};

Linkify.addLinks(bt, Linkify.ALL);
Linkify.addLinks(bt, atMentionPattern, atMentionScheme, null, transformFilter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:30:19.403

试试这样

```
 textView.setAutoLinkMask(0);    

// Recognize phone numbers and web URLs
Linkify.addLinks(text, Linkify.PHONE_NUMBERS | Linkify.WEB_URLS);

// Recognize all of the default link text patterns 
Linkify.addLinks(text, Linkify.ALL);

// Disable all default link detection
Linkify.addLinks(text, 0); 
```

看到这里是文档

[http://polamreddyn.blogspot.in/2013/01/android-text-links-using-linkify.html](http://polamreddyn.blogspot.in/2013/01/android-text-links-using-linkify.html)

# php - 在漂亮的 URL 中使用 & 符会破坏 URL

> ID：14872628
> 
> 赞同：0
> 
> 时间：2013-02-14T10:25:07.970
> 
> 标签：php, mod-rewrite, ampersand

我见过很多人遇到这个问题，似乎阻止 apache 处理编码的 & 和 URL & 的唯一方法是使用 mod rewrite B 标志，RewriteRule ^(.*)$ index.php?path=$1 [ L,QSA,B]。

但是，这在早期版本的 apache 中不可用，并且必须安装，一些托管公司也不支持。

我找到了一个适合我们的解决方案。我们的网址是 /search/results/Takeaway+Foods/Inverchorachan,+Argyll+&+Bute+

这显然破坏了 & 给我们 /search/results/Takeaway+Foods/Inverchorachan,+Argyll 的 url，然后给出 404 错误，因为没有这样的页面。

url 保存在 $_GET['url'] 数组中。如果它找到一个 & ，它会为每个 & 符拆分数组。

以下代码通过遍历每个片段的 $_GET 数组将 URL 重新组合在一起。

我想知道这是否有任何我可能不知道的隐藏问题。

编码：

```
 $newurl = "";
    foreach($_GET as $key=>$pcs) {
        if($newurl=="")
            $newurl = $pcs;
        else
            $newurl .= "& ".rtrim($key,"_");
    }
    //echo $newurl;exit;
    if($newurl!='') $url=$newurl; 
```

当 apache 添加这个时，我正在修剪下划线。不知道为什么，但对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:08:21.477

你在一旁说：

> 我们希望 URL 显示 & 符号，因此不能用其他字符替换。

简短的回答：不要这样做。

说真的，不要在 URL 中以这种方式使用 & 符号。即使长得漂亮。和号在 URL 中具有特殊含义，并且因为看起来不错而试图覆盖该含义是一个**非常**糟糕的主意。

大多数基于 Web 的软件（包括 Apache、PHP 和所有浏览器）都会对 URL 中的 & 符号的含义做出假设，您会发现很难解决。

特别是，如果你在 URL 中有任意的 & 符号，你会完全混淆谷歌和其他搜索引擎，所以它会完全破坏你的 SEO 排名。

如果字符串中必须有 & 符号，请使用 urlencoding 将其转换为 URL 友好的`%26`. 这在用户的 URL 字符串中看起来不太好，但它会按预期工作。

如果这是不可接受的，那么用不同的东西代替＆符号；可能是单词“and”，或者像和下划线这样的字符，或者可能只是将其从字符串中删除而无需替换。

所有这些都是常见的做法。试图强制 URL 在其中包含实际的 & 字符不是常见的做法，而且有很好的理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:31:30.147

看看[urlencode](http://php.net/manual/fr/function.urlencode.php)：

您还可以将“&”字符替换为不破坏 URI 的字符，并且不会像“|”那样被 apache 解释 字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:55:45.890

我们已经修复了两周，所以我相信这已经解决了这个问题。我希望这会帮助有类似问题的人，因为我搜索了数周来寻找 apache 升级之外的解决方案以包含 B 标志。我们的用户现在可以输入床和早餐，然后我们可以提供相应的页面。

这是PHP中的修复程序。

```
$newurl = "";
foreach($_GET as $key=>$pcs) 
{
    if($newurl=="")
        $newurl = $pcs;
    else
        $newurl .= "& ".rtrim($key,"_");
}

if($newurl!='') $url=$newurl; 
```

# javascript - URIencode 和冒号

> ID：14872629
> 
> 赞同：9
> 
> 时间：2013-02-14T10:25:08.450
> 
> 标签：javascript, uri, uriencoding

冒号是一个字符，可以根据许多站点编码为“%3A”，当我尝试使用`URIencode`它进行编码时它不起作用

例如，如果我尝试像这样编码，`URIencode(':');`那么什么也不会发生。返回冒号。为什么是这样？？有人可以帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-14T10:26:36.117

`encodeURI()`编码特殊字符，除了：

`, / ? : @ & = + $ #`

你应该改用这个`encodeURIComponent(':');`

此函数对特殊字符进行编码。此外，它对跳过的字符进行编码`encodeURI()`

# php - 如何在 javascripts 中使用 php 和 mysql 函数

> ID：14872633
> 
> 赞同：0
> 
> 时间：2013-02-14T10:25:18.077
> 
> 标签：php, javascript

这是我的 php/html 页面标签中添加的 javascript 代码：

```
<script type="text/javascript">

    $(document).ready(function() {  

        $('#status').change(function(){

           var status = $('#status').val();                  
           var html = ''; //string variable for html code for fields 

           if( status=="closed"){

               html += '<th>Close By :</th><td align="left"><select name="close_by">'+<?php $user=mysql_query("SELECT * FROM user");
                        while($data=mysql_fetch_array($user)){?>+'<option value="'+<?php echo $data['username'] ?>+'">'+<?php echo $data['username']; ?>+'</option>'+<?php } ?>+'</select></td>'; 
            }

            $('#close_by').html(html);
        });
    }); 
</script> 
```

代码就是为此，如果 Status=="closed" 那么将出现一个选择标签，并且将使用 mysql 函数从数据库中获取选项值。但它不起作用。请帮忙解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:28:34.233

你不能。PHP/MySQL 驻留在您的服务器上，而 JS 在浏览器中执行。

当然你可以让浏览器通过适当的[HTTP 请求](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html)与你的服务器交互，在你的服务器上设置[正确的路由](http://tomayko.com/writings/rest-to-my-wife)之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:36:52.053

您可以将 PHP 混合到 Javascript 中。PHP 将在服务器上执行，然后在客户端上执行 JS。这很可怕，非常糟糕的做法，调试的噩梦。将它们分开并使用 jQuery ajax 加载数据要好得多。

或者使用 PHP 在 javascript 的开头将数据放入 JSON 对象，并使用 Javascript 进行处理，而不是使用 PHP 代码在 Javascript 中连接字符串。

但是在您的示例中，问题到底是什么？`html`变量的 PHP（在 HTML 源代码中）的最终结果是什么？我怀疑某处有括号或引号错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:37:52.423

你可以用ajax来做

```
$(document).ready(function() {  

  $('#status').change(function(){

       var status = $('#status').val();                  

       if( status=="closed"){
          $.ajax({
                url: 'ajax.php?',//if you have parameters
                success:function (response) {
                    $('#close_by').html(response);
                }
            });          
       }
    });
}); 
```

然后为 ajax 请求 ajax.php 创建一个新的 php 文件

```
<th>Close By :</th>
<td align="left">
    <select name="close_by">
        <?php $user=mysql_query("SELECT * FROM user");
            while($data=mysql_fetch_array($user)){?>
                 <option value="<?php echo $data['username'] ?>"><?php echo $data['username']; ?>     
                 </option>
            <?php } ?>
    </select>
</td> 
```

# jquery - Nivo Slider：第一次显示时，第一张图像不成比例地缩放

> ID：14872634
> 
> 赞同：6
> 
> 时间：2013-02-14T10:25:21.260
> 
> 标签：jquery, html, nivo-slider

我在一个 div 中使用 Nivo Slider jQuery 插件，它的尺寸比我正在显示的图像小。当滑块滑动到第二个图像时，图像上的图像被正确缩小。

但是当第一次显示第一张图片时（直接在加载页面之后），它只在宽度上缩放，而不是在高度上。我该如何改变呢？

示例：假设我所有的图像的大小都是 1024*768 像素。div 的宽度为 400 像素。我在滑块中有 3 张图像。

*   加载图像 1 后直接显示为**400*768 像素** *（错误）*
*   然后它会滑动到 400*300 像素的图像 2
*   然后以 400*300 像素的图像 3
*   然后以**400*300 像素的图像 1** *（右）*
*   ...

![图1错了](../Images/eaae2348f51a563007cd56b90885a7a8.png) ![图 2 右](../Images/a899a3d8daf638e75f0ee3cb2e861391.png)

编辑：我刚刚注意到，这只发生在 IE 中，在 Firefox 中没有这样的错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T18:26:22.773

我也有同样的问题 - 我添加`height: auto !important;`到`.nivo-main-image`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T21:51:52.573

在 nivo-slider.css 添加

```
.nivoSlider { height:520px; }//specifies the height 
```

# ios - 带有 iOS vDSP 的 FFT 不对称

> ID：14872635
> 
> 赞同：3
> 
> 时间：2013-02-14T10:25:24.027
> 
> 标签：ios, fft, vdsp

我正在使用 Apples vDSP API 来计算音频的 FFT。但是，根据我对实际输入上的 FFT 的理解，我的结果（在 中`amp[]`）在 N/2 周围不是对称的，它们应该是对称的？

下面`frame`是一个包含音频样本的浮点数组[128]。

```
 int numSamples = 128;
        vDSP_Length log2n = log2f(numSamples);
        FFTSetup fftSetup = vDSP_create_fftsetup(log2n, FFT_RADIX2);
        int nOver2 = numSamples/2;

        COMPLEX_SPLIT A;
        A.realp = (float *) malloc(nOver2*sizeof(float));
        A.imagp = (float *) malloc(nOver2*sizeof(float));

        vDSP_ctoz((COMPLEX*)frame, 2, &A, 1, nOver2);

        //Perform FFT using fftSetup and A
        //Results are returned in A
        vDSP_fft_zrip(fftSetup, &A, 1, log2n, FFT_FORWARD);

        //Convert COMPLEX_SPLIT A result to float array to be returned
        float amp[numSamples];
        amp[0] = A.realp[0]/(numSamples*2);
        for(int i=1;i<numSamples;i++) {
            amp[i]=A.realp[i]*A.realp[i]+A.imagp[i]*A.imagp[i];
            printf("%f ",amp[i]);
        } 
```

如果我将相同的浮点数组放入在线 FFT 计算器中，我会得到一个对称的输出。我在上面做错了吗？

出于某种原因，大多数值`amp[]`都在 0 到 1e-5 左右，但我也得到了一个大约 1e23 的巨大值。我在这里没有做任何窗口，只是试图让一个基本的 FFT 最初工作。

我使用相同的数据附上了两个 FFT 输出的图片。您可以看到它们与 64 相似，尽管不是恒定的比例因子，所以我不确定它们有什么不同。然后超过64，它们完全不同。

![在此处输入图像描述](../Images/f2c42112308259082946df3e5d22b0e2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T20:30:12.857

因为实数到复数 FFT 的数学输出是对称的，所以返回后半部分没有任何价值。在传递给的数组中也没有空间`vDSP_fft_zrip`。所以`vDSP_fft_zrip`只返回前半部分（除了特殊的 N/2 点，下面讨论）。后半部分通常不需要明确，如果需要，您可以从前半部分轻松计算。

`vDSP_fft_zrip`用于前向（实数到复数）变换时的输出具有 H 0[输出]（纯实数；其虚部为零）`A.realp[0]`。H [N/2]输出（也是纯实数）存储在`A.imagp[0]`. 对于 0 < i < N/2，其余值 H [i]正常存储在`A.realp[i]`和中`A.imagp[i]`。

解释这一点的文档[在这里](https://developer.apple.com/library/ios/#documentation/Performance/Conceptual/vDSP_Programming_Guide/UsingFourierTransforms/UsingFourierTransforms.html)，在“Real FFT 的数据打包”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:23:33.550

要获得从严格实数输入到基本 FFT 的对称结果，您的复杂数据输入和输出数组的长度必须与您的 FFT 相同。您似乎只将一半数据分配和复制到 FFT 输入中，这可能会将非真实内存垃圾提供给 FFT。

# html - 如何在不复制和打印的情况下将pdf文档嵌入html

> ID：14872638
> 
> 赞同：0
> 
> 时间：2013-02-14T10:25:36.660
> 
> 标签：html, pdf

我是网络编程的初学者，我的问题是如何将 pdf 文档嵌入到 html 一个部门标签中，并且我们可以避免复制、打印和下载选项。

以下是我的代码。

```
<html>
  <head>
    <title>Pdf Document
    </title>
  </head>
  <body>
    hello world!
      <br>
        <div width="500px" height="500px">

          <embed src="myfile.pdf#toolbar=0&navpanes=0&scrollbar=0" width="425" 

            height="425">
          </div>
          <div width="1px"> hello</div>
        </body>
      </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:44:20.283

一些选项可能会帮助你：

第一的：

如果您坚持使用 pdf 嵌入选项，则 Pdf 文件在网页上看起来不会那么好。无论如何，一定要严格编码。因此：

```
<iframe src="path/to/pdf" width=500 height = 500> 
```

应该

```
<iframe src="path/to/pdf" width="500" height="500"> 
```

第二：

为此，您还可以使用 Google PDF 查看器。

您需要先在某处上传您的 PDF，然后使用它的 URL：

```
<iframe src="http://docs.google.com/gview?url=http://example.com/mypdf.pdf&embedded=true"  style="width:500px; height:500px;" frameborder="0"></iframe> 
```

第三：

最好的方法是使用 PDF.JS 库。它是一个纯 HTML5/JavaScript 的 PDF 文档渲染器，没有任何第三方插件。

在线演示： http: [//mozilla.github.com/pdf.js/web/viewer.html](http://mozilla.github.com/pdf.js/web/viewer.html)

GitHub：[https ://github.com/mozilla/pdf.js](https://github.com/mozilla/pdf.js)

链接：

[将 PDF 嵌入 HTML 的推荐方法？](https://stackoverflow.com/questions/291813/recommended-way-to-embed-pdf-in-html)

[如何在网站中嵌入 PDF 文件？](https://stackoverflow.com/questions/4082672/how-to-embed-a-pdf-file-in-a-web-site)

# java - 使用java替换数据库中的文本

> ID：14872641
> 
> 赞同：0
> 
> 时间：2013-02-14T10:25:40.237
> 
> 标签：java, mysql

我正在使用替换方法来编辑 mysql 数据库中的文本，并且它适用于

每次我尝试用其他字符串替换字符串时，例如

```
 REPLACE(Eligibility_Points , '(ii)', 'second point is')"; 
```

适用于上述情况

但在以下情况下效果不佳

```
 REPLACE(Eligibility_Points , '(ii)-(iii)', 'second and third point is')"; 
```

我该如何解决这个问题，谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:57:10.563

假设这是`REPLACE`您正在谈论的 MySQL 字符串函数，我能看到为什么第二个示例不起作用的唯一原因是（可能）该`Eligibility_Points`字段（或其他）根本不包含第一个字符串。

也许您可以提供更多上下文；例如，您有什么证据表明替换不起作用。

但是@vadchen 提出了一个很好的观点。如果您在第一个示例中进行替换，那么它将删除所有可能触发第二个示例中的替换的示例。也许您只需要以相反的顺序进行“编辑”。

* * *

从 Java 或 SQL 的角度来看，无需转义这些片段中的任何字符。

# yii - 零件链接到现有模型的自定义表单 (ActiveRecord)

> ID：14872644
> 
> 赞同：0
> 
> 时间：2013-02-14T10:25:47.103
> 
> 标签：yii

我正在制作一个不代表数据库表的表单（Yii 框架），但它包含一个“映射”到数据库表的部分（如belong_to 关系）。

因此，您可以考虑一个**联系表格**，您可以在其中选择向谁发送电子邮件，并带有一个代表数据库中**用户的****下拉列表**。您可以在下面输入您的电子邮件主题和内容。

 **所以这里的**联系表格没有存储在数据库**中，所以它不是一个 ActiveRecord 实例，但它像 ActiveRecord 一样包含“关系”。

我的问题是：我如何构建我的表单类？

我希望能够在视图中执行此操作：

```
$activeFormWidget->dropdown($form->user, 'name', User::model()->getUsers()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:09:45.103

您可以使用[CHtml::dropdownList](http://www.yiiframework.com/doc/api/1.1/CHtml/#dropDownList-detail)来构建`dropdown list`没有`CActiveForm`：

```
<?php
    echo CHtml::dropDownList('user', // the input name
                    '', // initial selected value
                    CHtml::listData(User::model()->getUsers(), 'id', 'name'), // your data
                    array()); // htmlOptions
?> 
```**

# c# - 使用 jQuery 将复杂数据发送到 C#

> ID：14872646
> 
> 赞同：1
> 
> 时间：2013-02-14T10:25:50.883
> 
> 标签：c#, ajax, api, query-string

我有一个 JavaScript 对象，所以我想发送到 C#（问题在底部）

```
var data = {
    mykey1: "somevalue",
    mykey2: "somevalue2",
    addProducts: [
        {
            id: 1,
            quantity: 3,
            variation: 54
        },
        {
            id: 2,
            quantity: 5,
            variation: 23
        }
    ]
} 
```

它是将单个产品或多个产品添加到用户购物篮中。我想发回一组对象..

我可以使用 Javascript 访问它

```
data.addProducts[1].id 
```

使用以下...

```
$.ajax({
    url: "/ajax/myurl",
    data: data,
    dataType: "json",
    type: "GET",
    success: function( response ){
        // Data returned as JSON
    }
}); 
```

它正在发送这样的数据（为您的阅读乐趣进行了 URL 解码）

```
?mykey1=somevalue&mykey2=somevalue2&addProducts[0][id]=1&addProducts[0][quantity]=3&addProducts[0][variation]=54&addProducts[0][id]=2&addProducts[0][quantity]=5&addProducts[0][variation]=23 
```

我的问题是......不使用`JSON.stringify`数据，它只会将其作为完整对象发送到 url`/ajax/myurl/{mykey1:1 ...}`

如何从 C# 读回这些信息？jQuery 只是将其编码为标准方式，我是否应该对此做任何其他事情，是否有一种内置方式可以在 C# 中获取这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-18T09:54:46.033

```
var strValue = $(getStringValue);
var intValue = $(getIntValue)
$.ajax({
type: \"post\",
url: \"default.aspx/getData\",
data: \"{\'postedAjaxStringValue\"\': \'\" + encodeURIComponent(strValue) + \"\', postedAjaxIntValue: \" + encodeURIComponent(intValue ) + \"}\",
contentType: \"application/json; charset=utf-8\",
dataType: \"json\",
success: OnSuccess,
failure: function (response) {
error: function (response) {
});
```

//ON C# KodeBehind..

```
[System.Web.Services.WebMethod]
public static string getData(string postedAjaxStringValue, int postedAjaxIntValue){} 
```

# android - 如何使用分隔符更改 ListView 的 listSeparatorTextViewStyle 颜色

> ID：14872653
> 
> 赞同：3
> 
> 时间：2013-02-14T10:26:03.217
> 
> 标签：android, listview

我有一个带有分隔符的列表视图，对于我使用这个 xml 的标题：

```
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_header_title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingTop="2dip"
    android:paddingBottom="2dip"
    android:paddingLeft="5dip"
    android:textSize="20sp"
    style="?android:attr/listSeparatorTextViewStyle" /> 
```

通过使用`listSeparatorTextViewStyle`默认颜色为灰色，我如何更改该颜色或添加图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T21:54:37.957

You'll need to create your own `style`.

The Android Source code is a best friend for quickly gathering and building system styled themes.

Follow this path from the source code you've downloaded via `Android SDK Manager`

`platforms/android-19/data/res/values`

You'll find something like this inside `styles.xml`:

For Dark theme:

```
<style name="Widget.Holo.TextView.ListSeparator" parent="Widget.TextView.ListSeparator">
    <item name="android:background">@android:drawable/list_section_divider_holo_dark</item>
    <item name="android:textAllCaps">true</item>
</style> 
```

For Light theme

```
<style name="Widget.Holo.Light.TextView.ListSeparator" parent="Widget.TextView.ListSeparator">
    <item name="android:background">@android:drawable/list_section_divider_holo_light</item>
    <item name="android:textAllCaps">true</item>
</style> 
```

By following the path the code mentioned above, you'll get all the assets/images you need to build your own one.

# ms-access - 比较两个表中的值以更新第三个表

> ID：14872656
> 
> 赞同：1
> 
> 时间：2013-02-14T10:26:10.800
> 
> 标签：ms-access

我试图根据 table`a`和 table之间的比较结果更新表 c 中的字段`b`。它是这样的：

表`a`包含患者姓名、状态及其状态描述。- 这是一个用于比较的完整表格。

表`b`包含患者姓名和状态。- 这张表被添加到每隔一段时间。

table`c`是目标表，需要根据 table`a`和的结果更新特定字段`b`。

到目前为止，我的逻辑是这样的：

```
UPDATE tblc
SET patntStatus to results from comparison of table a & table b. 
```

我知道我需要一个 JOIN 但不清楚我是否需​​要一个或两个 - 例如 join `a`and`b`或 join results of `a`and `b`to `c`？

我认为第一个更正确，那么更新的正确语法是什么？

谢谢

**更新

已添加显示我要添加到表 c 的内容的 SQL 语句

```
SELECT STATUS, STATUS_DESCRIPTION
FROM tbla INNER JOIN tblb ON     
tbla.STATUS = tblb.STATUS
WHERE tblb.STATUS = tbla.STATUS; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:24:23.373

你离你需要的很近。我不知道你想更新什么`C`，但假设你想`Staus_Desc`在和的比较中`tblc`匹配：`Status_Description``A``B`

1.  将您的 SQL 保存在查询中（例如`qry_A_B_Compare`）
2.  使用以下 SQL 创建一个 UPDATE 查询：

：

```
UPDATE tblc 
INNER JOIN qry_A_B_Compare ON tblc.Status = qry_A_B_Compare.Status
SET tblc.Status_Desc = [Status_Description]; 
```

# facebook - 使用 api 在 C# 中的 Facebook 提要对话框示例代码

> ID：14872663
> 
> 赞同：3
> 
> 时间：2013-02-14T10:26:28.763
> 
> 标签：facebook, dialog, feed

我写了一个应用程序，它在我朋友的时间轴上写了一条消息。使用 2013 年 2 月的新政策，我需要显示提要对话框才能这样做。是否有任何示例代码可用于了解如何执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T05:54:18.807

转到休闲链接，它可能会对您有所帮助。

[http://webmodelling.com/webbits/socialmedia/facebook-api.aspx?ml-d-uepp=1](http://webmodelling.com/webbits/socialmedia/facebook-api.aspx?ml-d-uepp=1)

# node.js - 将一些文档从 CouchDB 放入 Array (Node.JS)

> ID：14872670
> 
> 赞同：1
> 
> 时间：2013-02-14T10:26:38.283
> 
> 标签：node.js, couchdb

我尝试获取 ID 为 1、100、1000 的 3 个文档。但 node.js 是异步的，结果中的数组**对象**为空。如何将文件放入数组？

```
var objects = {};
var objectsID = [1, 100, 1000];
objectsID.forEach( function( elem ){
  objectsDB.get( elem, function( err, object ){
    objects[elem] = object;
   })
 });
 console.log(objects); 
```

console.log 返回 {}。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:37:44.650

所以这是一个经典的异步代码问题。您的代码可以这样重写：

```
var objects = {};
var objectsID = [1, 100, 1000];

var finalize = function( ) {
    console.log(objects);
};

objectsID.forEach( function( elem ){
    objectsDB.get( elem, function( err, object ){
        objects[elem] = object;

        // remove ID from the list of IDs
        var idx = objectsID.indexOf(elem);
        if (idx!=-1) {
            objectsID.splice(idx, 1);
        }

        // check if it is time to finalize
        if (!objectsID.length) {
            finalize();
        }
    })
}); 
```

您可能还想看看[Caolan 的 async.js 库](https://github.com/caolan/async)（尤其是 async.parallel ）。

# javascript - 如何从网格中删除水平滚动？

> ID：14872672
> 
> 赞同：1
> 
> 时间：2013-02-14T10:26:40.300
> 
> 标签：javascript, extjs, extjs3

我在 ExtJs 3.4 应用程序中有一个网格面板：

```
kad_tab = new Ext.ux.grid.livegrid.GridPanel({
    store: store,
    region: 'center',
    cm: cm, 
    selModel: new Ext.ux.grid.livegrid.RowSelectionModel(),
    stripeRows : true,
    view: myView,
    //height: 390,
    loadMask: true,
    id: 'kad_tab',
    autoExpandColumn:'cadColumn',
    title:'Земельные участки',
    autoWidth:true,
    autoScroll: true, 
```

并查看：

```
 var myView = new Ext.ux.grid.livegrid.GridView({
    nearLimit : 70,
    autoFill: true,
    scrollOffset: 0,
    loadMask  : {
        msg :  'Buffering. Please wait...'
    }
}); 
```

以及它的外观：

![在此处输入图像描述](../Images/dd4cc9ae4bf3d821653f261e4d3bfceb.png)

您会看到最后一行存在一些问题。我认为它是因为水平滚动。它可以删除水平滚动吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T06:42:29.283

试试这个

```
forceFit: true 
```

网格的内部 viewConfig

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:15:06.777

使用样式：{overflowX:'hidden'} 或 {'overflow-x':'hidden'}。

'**隐藏**'应该是类。

并尝试**autoscroll:false**

# php - 无法打开本地主机？

> ID：14872673
> 
> 赞同：-1
> 
> 时间：2013-02-14T10:26:40.187
> 
> 标签：php, apache, ubuntu, lampp

我一直在测试机器上使用 Lampp。操作系统是 Ubuntu 12.1。它在运行我的脚本之前运行良好。然后它开始显示一个弹出窗口，询问我是否要打开或保存文件？我尝试更改端口并重新启动机器并重新启动 Lampp。到目前为止，没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:28:33.277

您的 MIME 类型错误和/或 mod_php 未加载。

文件中有什么？如果它们包含您的 PHP 代码，则 Apache 正在提供文件，而不是通过 PHP 放置它们。检查您是否正在加载 mod_php。

如果它们包含 PHP 代码（即 HTML）的输出，那么它们没有被赋予正确的 MIME 类型。我不确定这是在哪里完成的，我认为 Apache 或 PHP 会自动添加标题。检查 Apache MIME 类型配置

# mysql - 如何使用 GROUP BY 获得 2 个以上字段的最接近时间

> ID：14872677
> 
> 赞同：1
> 
> 时间：2013-02-14T10:26:54.923
> 
> 标签：mysql, mysql-workbench

我只想尝试通过在超过 2 个字段上使用 GROUP BY 来获取最接近的日期时间。但是当我尝试时，数据变得混乱。我正在使用：

数据源是：

```
Start Time              Real End Time           Staff
2013-02-14 16:44:27     2013-02-14 18:44:27     P 
2013-02-14 16:44:08     2013-02-14 17:09:08     C
2013-02-14 16:42:51     2013-02-14 16:43:51     P
2013-02-14 16:31:26     2013-02-14 17:06:26     V
2013-02-14 16:04:02     2013-02-14 16:34:02     C 
```

当我使用时：

```
SELECT staff AS name, start_time, max(real_end_time) AS work_end_time
FROM treatments 
WHERE date(real_end_time) = curdate()
GROUP BY name
ORDER BY work_end_time ASC 
```

我得到了：

```
name        start_time                work_end_time
V           2013-02-14 16:31:26       2013-02-14 17:06:26
C           2013-02-14 16:04:02       2013-02-14 17:09:08
P           2013-02-14 16:42:51       2013-02-14 18:44:27 
```

显然数据乱了，正确的应该是这样的：

```
name        start_time                work_end_time
V           2013-02-14 16:31:26       2013-02-14 17:06:26
C           2013-02-14 16:44:08       2013-02-14 17:09:08
P           2013-02-14 16:44:27       2013-02-14 18:44:27 
```

为此，它浪费了我很多时间，你应该有好的解决方案吗？我也试过：

```
SELECT staff AS name, start_time, max(real_end_time) AS work_end_time
FROM treatments 
WHERE date(real_end_time) = curdate()
GROUP BY name, start_time
ORDER BY work_end_time ASC 
```

我得到了：

```
name     start_time               work_end_time
C        2013-02-14 16:04:02      2013-02-14 16:34:02
P        2013-02-14 16:42:51      2013-02-14 16:43:51
V        2013-02-14 16:31:26      2013-02-14 17:06:26
C        2013-02-14 16:44:08      2013-02-14 17:09:08
P        2013-02-14 16:44:27      2013-02-14 18:44:27 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:33:11.810

```
SELECT staff AS name, start_time, real_end_time AS work_end_time
FROM (  SELECT staff, start_time, real_end_time
        FROM treatments 
        WHERE date(real_end_time) = curdate()
        ORDER BY real_end_time ASC) AS h
GROUP BY name 
```

您必须使用`ORDER BY`before嵌套查询`GROUP BY`。`ORDER BY`像你一样只处理粉碎在一起的结果，因此有故障和`name`风险`start_time`

# xml - 在 xml 模式中允许可变元素属性

> ID：14872678
> 
> 赞同：1
> 
> 时间：2013-02-14T10:27:01.217
> 
> 标签：xml, xsd

如果我希望元素 complexType 具有变量属性名称、计数和值，它会是什么样子？

```
<mtd:attributes icon="remove" security="D" variable1="F" variable2="D"/> 
```

我试过了 ：

```
 <xsd:element name="attributes">
            <xsd:complexType>
                <xsd:anyAttribute/>
            </xsd:complexType>
        </xsd:element> 
```

但它不这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:34:00.210

尝试添加`processContents=skip`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:40:38.287

我终于做到了：

```
<xsd:anyAttribute processContents="skip"/> 
```

# c++ - Visual Studio C++ 多行注释

> ID：14872680
> 
> 赞同：12
> 
> 时间：2013-02-14T10:27:11.927
> 
> 标签：c++, visual-studio-2010, comments, styling

在 VS C++ 代码中，如果我没有选择任何内容或选择了整行并按下注释选择 (Ctrl+K + Ctrl+C)，那么它将用 // 注释整行

```
int x = 5; 
```

按 Ctrl+K + Ctrl+C 后未选择任何内容或选择整行。

```
// int x = 5; 
```

现在，如果我选择该行的某些部分并再次按下评论按钮，则只会评论选定的文本（粗体表示已选择）

诠释**x = 5** ;

按 Ctrl+K + Ctrl+C 并选择 x = 5 后。

```
int /*x = 5*/; 
```

多行时

诠释**x = 5;**

**整数 y = 2;**

**整数 z =** x * 5;

并在评论快捷方式之后

```
int/* x = 5;
int y = 2;
int z =*/ x * 5; 
```

我想要的是

```
//int x = 5;
//int y = 2;
//int z = x * y; 
```

现在这是我不喜欢的。通常我选择多行并按评论按钮。这将只评论选定的*字符*，但我希望所有选定的*行都*被评论。无论如何，我可以通过任何扩展或从 Visual Studio 设置来更改它吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T10:37:58.573

您必须选择整行（即从该行的第一个字符开始）才能对多行使用 c++ 注释。

更新：如果选中的行中有注释，即使选择不是从行首开始，Ctrl+K,Ctrl+C也会生成C++风格的注释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-16T14:17:36.100

三击第一行并按住鼠标按钮拖动到底部（结束）行。之后，您可以轻松选择整行并按 Ctrl+K，Ctrl+C 将在前面用“//”注释所有这些行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-10T15:38:07.040

如果您选择一个代码块并使用按键序列 Ctrl+K+C，您将注释掉该代码段。Ctrl+K+U 将取消注释代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-28T10:21:46.217

## 单行注释快捷方式

要实现多行注释，请选择行并使用`ctrl + /`.

根据问题询问，只需使用上述快捷方式，而不是使用您正在使用的方式来实现您想要的。

## 多行注释快捷方式

此外，而不是这么长的快捷方式（在问题中提到）。要进行多行注释，请选择文本并使用`ctrl+shift+a`.

相同的快捷方式用于取消注释。

# java - javax.sql.DataSource 线程安全吗？

> ID：14872685
> 
> 赞同：13
> 
> 时间：2013-02-14T10:27:46.897
> 
> 标签：java, datasource

我在 JBoss 7 中部署的 Java EE 应用程序中使用 PostgreSQL 9.1 JDBC4 驱动程序 (postgresql-9.1-902.jdbc4.jar)。

我可以假设**javax.sql.DataSource**是线程安全的，以便多个线程可以同时调用它的 getConnection() 方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T10:50:57.117

[javax.sql.DataSource](http://docs.oracle.com/javase/6/docs/api/javax/sql/DataSource.html)本身是一个接口，所以它是特定于实现的，它是否是线程安全的。

对于 postgres sql 驱动，我推荐你阅读官方文档[中的第 10 章。在多线程或 Servlet 环境中使用驱动：](http://jdbc.postgresql.org/documentation/91/thread.html)

> PostgreSQL JDBC 驱动程序是线程安全的。[...]

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-14T11:06:40.833

通常，`DataSource`您从 Java EE 容器获得的实现将是由连接池支持的线程安全对象，而底层 JDBC 连接的线程安全（或其他）并不真正相关。当您需要与数据库通信时，通常的模式是调用`getConnection()`数据源以获取连接对象，进行必要的数据库调用，然后`close()`进行连接。在幕后，这实际上不会关闭底层连接，而只是将其返回到连接池以供将来使用。任何单独的连接一次只能由一个线程使用。

这是 Spring 之类的东西使用的成语`JdbcTemplate`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-04T06:09:02.977

如果它是“连接池实现”，那么它应该是线程安全的。

# javascript - 如何在 d3.js 中围绕中心旋转对象

> ID：14872687
> 
> 赞同：8
> 
> 时间：2013-02-14T10:27:54.260
> 
> 标签：javascript, d3.js

我在 d3.js 中有两个简单的对象，它们应该围绕视口的中心旋转（就像围绕太阳的行星）。

我是 d3.js 的新手，我知道我必须使用转换，但由于行星必须一直在旋转，而不仅仅是在进入或退出时，我不知道在哪里以及如何设置转换。

这是我当前的代码：

```
var planets = [
    {d:100,r:2},
    {d:150,r:4}
];

var w = 500, h = 400, svg, circle;

function init(){

    svg = d3.select("#drawArea").append("svg").attr({width: w, height: h});

    var center = {
        x: Math.floor(w/2),
        y: Math.floor(h/2)
    };

    svg.append('circle').attr({
        'cx': center.x,
        'cy': center.y,
        'r': 10,
        'class': 'sun'
    });

    circle = svg.selectAll(".planet")
        .data(planets)
        .enter()
            .append("circle")
                .attr("class", "planet")
                .attr("r", function(s){return s.r});

    circle.attr({
        // distance from the center
        'cx': function(s){ return center.x - s.d; },
        // center of the screen
        'cy': function(s){ return center.y; }
    });

} 
```

这是一个可以玩的**[jsfiddle 。](http://jsfiddle.net/marcgrabow/52SNU/)**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T15:46:23.967

你需要：

1.  将你的行星`g`分组放在`g`以你的太阳为中心的地方
2.  创建一个[`d3.timer`](https://github.com/mbostock/d3/wiki/Transitions#wiki-d3_timer)轮换组。

有关使用示例，`d3.timer`请参见 Mike Bostocks Epicyclic [Gearing](http://bl.ocks.org/1353700)示例。使用那个例子，我把类似于你问的东西放在一起：http: [//bl.ocks.org/4953593](http://bl.ocks.org/4953593)

示例的核心：

```
 var w = 800, h = 800;
  var t0 = Date.now();

  var planets = [
    { R: 300, r:  5, speed: 5, phi0: 90},
    { R: 150, r: 10, speed: 2, phi0: 190}
  ];

  var svg = d3.select("#planetarium").insert("svg")
    .attr("width", w).attr("height", h);

  svg.append("circle").attr("r", 20).attr("cx", w/2)
    .attr("cy", h/2).attr("class", "sun")

  var container = svg.append("g")
    .attr("transform", "translate(" + w/2 + "," + h/2 + ")")

  container.selectAll("g.planet").data(planets).enter().append("g")
    .attr("class", "planet").each(function(d, i) {
      d3.select(this).append("circle").attr("class", "orbit")
        .attr("r", d.R);
      d3.select(this).append("circle").attr("r", d.r).attr("cx",d.R)
        .attr("cy", 0).attr("class", "planet");
    });

  d3.timer(function() {
    var delta = (Date.now() - t0);
    svg.selectAll(".planet").attr("transform", function(d) {
      return "rotate(" + d.phi0 + delta * d.speed/200 + ")";
    });
  }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-02T16:16:33.103

我知道这可能来得太晚了。但我确实希望这可以帮助未来的读者，如果他们也面临同样的问题。我创建了小提琴并在这里添加了一些解释，希望它可以帮助：

[http://www.zestyrock.com/data-visualization/d3-rotate-object-around-the-center-object-part-2/](http://www.zestyrock.com/data-visualization/d3-rotate-object-around-the-center-object-part-2/)

这是代码：

```
var start = Date.now();

var mode = 0;

var svg = d3.select("#canvas")
    .append("svg")
    .attr("width", 500)
    .attr("height", 500);

svg.append("circle")
    .attr("r", 50)
    .attr("cx", 250)
    .attr("cy", 250)
    .attr("fill", "#e05038");

var rotateElements = svg.append("g");

rotateElements.append("circle")
    .attr("r", 25)
    .attr("cx", 250)
    .attr("cy", 50)
    .attr("fill", "#f2b632")
    .attr("class", "orangeNode");

rotateElements.append("line")
    .attr("x1", 250)
    .attr("y1", 75)
    .attr("x2", 250)
    .attr("y2", 200)
    .attr("class", "edge")
    .attr("stroke", "grey");

d3.select("#start")
    .on("click", startAnimation);

function startAnimation() {
    if (mode === 0) {
        d3.timer(function() {
            var angle = (Date.now() - start);
            var transform = function() {
                return "rotate(" + angle + ", 250, 250)";
            };
            d3.selectAll(".orangeNode, .edge")
                .attr("transform", transform);

            if (mode === 0) {
                return true;
            } else {
                return false;
            }
        });
        mode = 1;
    } else {
        mode = 0;
    }

} 
```

# linux - GTK# 在进程窗口句柄之间切换

> ID：14872688
> 
> 赞同：1
> 
> 时间：2013-02-14T10:27:55.217
> 
> 标签：linux, mono, centos, monodevelop, gtk#

GTK# 在进程窗口句柄之间切换

你好，

在 GTK# 程序中。有谁知道如何在进程窗口句柄之间切换？例如，如果我在 GTK# 程序中按下一个按钮，它会将窗口切换到处理 gedit（文本编辑器），或者将窗口进程切换到正在运行的另一个 GTK# 程序。

基本上我正在尝试移植一些我以前在窗口（进程）之间切换的 Windows C# 代码。例如在 C# 中切换我使用的窗口：

```
[DllImport("user32", EntryPoint = "SetForegroundWindow")]
public static extern int SetForegroundWindow(IntPtr hWnd); 
```

我只是将进程主窗口句柄传递给上面的这个函数。我可以在 MonoDevelop for Centos Linux 的 GTK# 中使用类似的东西吗？

谢谢，

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:46:02.553

有一个名为 libwnck 的库：http: [//developer.gnome.org/libwnck/stable/](http://developer.gnome.org/libwnck/stable/)（Window Navigator Construction Kit），它处理所有这些功能。似乎有一个名为 wnck-sharp 的 Mono 绑定，据我所知，它包含在 gtk-sharp 中。

# sql - 如何一步用随机数据批量更新 SQL 表？

> ID：14872693
> 
> 赞同：3
> 
> 时间：2013-02-14T10:28:09.737
> 
> 标签：sql, sql-server, sql-server-2012

我有一个大表，出于测试目的，我想在每行上将一列更新为不同的随机值。

如果我说：

```
update MyTable
set MyCol = Rand()*100 
```

那么该值确实是随机的 - 但它是应用于每一行的相同随机数。

我可以使用游标来逐一迭代和更新每一行，这显然是我在必要时会依赖的。但是是否有一些 SQL 语法会在一个简洁的语句中使用不同的随机值更新每一行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T10:30:14.943

您需要`RAND`为每一行添加一些新内容：

`RAND(CHECKSUM(NEWID()))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T10:29:59.080

```
UPDATE MyTable
SET MyCol = CAST(RAND(CHECKSUM(NEWID())) * 10 as INT) + 1 
```

[http://sqlfiddle.com/#!3/78a75/2](http://sqlfiddle.com/#!3/78a75/2)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T10:30:18.847

您可以使用表的主键为 Random 函数播种吗？

```
update MyTable
set MyCol = Rand(MyIDColumn)*100 
```

# php - Symfony2 TreeBuilder 配置 - 根据设定值验证

> ID：14872694
> 
> 赞同：1
> 
> 时间：2013-02-14T10:28:10.547
> 
> 标签：php, symfony, symfony-2.1

我有以下捆绑包配置：

```
 $supportedAdapters = array('curl', 'socket');

    $treeBuilder = new TreeBuilder();
    $rootNode = $treeBuilder->root('example_bundle');
    $rootNode
            ->children()
            ->scalarNode('username')->isRequired()->cannotBeEmpty()->end()
            ->scalarNode('password')->isRequired()->cannotBeEmpty()->end()
            ->scalarNode('adapter')
                ->validate()
                    ->ifNotInArray($supportedAdapters)
                    ->thenInvalid('The adapter %s is not supported. Please choose one of '.json_encode($supportedAdapters))
                ->end()
                ->cannotBeOverwritten()
                ->isRequired()
                ->cannotBeEmpty()
            ->end()
            // allow the use of a proxy for cURL requests
            ->arrayNode('proxy')
                ->children()
                    ->scalarNode('host')->isRequired()->cannotBeEmpty()->end()
                    ->scalarNode('port')->isRequired()->cannotBeEmpty()->end()
                    ->scalarNode('username')->defaultValue(null)->end()
                    ->scalarNode('password')->defaultValue(null)->end()
                ->end()
            ->end();

    return $treeBuilder; 
```

我们支持两种适配器：`curl`和`socket`.

`curl`我们仅支持对请求使用代理。在配置中，我想检查是否设置了代理并且适配器不是 curl，然后抛出错误通知用户“我们只支持 curl 适配器与代理一起使用”。有没有办法获得一个设定值（在我们的例子中是适配器）并检查它的值并对其进行验证？

伪代码：

```
IF PROXY IS SET AND ADAPTER IS NOT EQUAL TO CURL THEN:
 THROW ERROR ("We don't support the use of a proxy with the socket adapter");
END IF; 
```

我希望这是有道理的。我已经阅读了所有文档和 API 文档，但是，唉，我看不到实现这一点的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:49:11.607

解决了：

```
 $supportedAdapters = array('curl', 'socket');

    $treeBuilder = new TreeBuilder();
    $rootNode = $treeBuilder->root('example_bundle');
    $rootNode
            ->validate()
                ->ifTrue(function($v){ return isset($v['proxy']) && 'curl' !== $v['adapter'];})
                ->thenInvalid('Proxy support is only available to the curl adapter.')
            ->end()
            ->children()
                ->scalarNode('username')->isRequired()->cannotBeEmpty()->end()
                ->scalarNode('password')->isRequired()->cannotBeEmpty()->end()
                ->scalarNode('adapter')
                    ->validate()
                        ->ifNotInArray($supportedAdapters)
                        ->thenInvalid('The adapter %s is not supported. Please choose one of '.json_encode($supportedAdapters))
                    ->end()
                    ->cannotBeOverwritten()
                    ->isRequired()
                    ->cannotBeEmpty()
                ->end()
                // allow the use of a proxy for cURL requests
                ->arrayNode('proxy')
                    ->children()
                        ->scalarNode('host')->isRequired()->cannotBeEmpty()->end()
                        ->scalarNode('port')->isRequired()->cannotBeEmpty()->end()
                        ->scalarNode('username')->defaultValue(null)->end()
                        ->scalarNode('password')->defaultValue(null)->end()
                    ->end()
            ->end();

    return $treeBuilder; 
```

:-)

# python - 使用 PySpotify 加载 Spotify 专辑元数据

> ID：14872696
> 
> 赞同：1
> 
> 时间：2013-02-14T10:28:19.017
> 
> 标签：python, python-2.7, spotify, libspotify

我不知道如何使用 pyspotify 加载专辑元数据。无论我尝试过什么，专辑浏览器仍在加载。

这是我的课：

当我们在主函数中使用 session.connect() 成功登录时，logged_in 会被回调调用。

```
class sessionManager(SpotifySessionManager):
    appkey_file =  os.path.join(os.path.dirname(__file__), 'spotify_appkey.key')

    def __init__(self, *a, **kw):
            SpotifySessionManager.__init__(self, *a, **kw)

    def logged_in(self, session, error):
            link=Link.from_string("spotify:album:4DR0GWo7w2GJyQnFVa4jAB")
            line=""
            if link.type() == link.LINK_ALBUM:
                    browser = AlbumBrowser(link.as_album())
                    while not browser.is_loaded():
                            line+="."
                            time.sleep(1)
                            sys.stdout.write("\r%s" % line)
                            sys.stdout.flush()
                    for track in browser:
                            print track.name()
            if link.type() == link.LINK_ARTIST:
                    browser = ArtistBrowser(link.as_artist())
                    while not browser.is_loaded():
                            line+="."
                            time.sleep(1)
                            sys.stdout.write("\r%s" % line)
                            sys.stdout.flush()
                    for album in browser:
                            print album.name() 
```

这是我的班级如何被调用的：

```
if __name__ == '__main__':
        import optparse
        op = optparse.OptionParser(version="%prog 0.1")
        op.add_option("-u", "--username", help="Spotify username")
        op.add_option("-p", "--password", help="Spotify password")
        op.add_option("-v", "--verbose", help="Show debug information",
                dest="verbose", action="store_true")
        op.add_option("-b", "--album", help="Spotify Album ID")
        (options, args) = op.parse_args()
        if options.verbose:
                logging.basicConfig(level=logging.DEBUG)
        sessionM = sessionManager(options.username, options.password, True)
        sessionM.connect() 
```

你对我会忘记的事情有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:32:19.000

你的问题很可能是这样的：

```
while not browser.is_loaded(): 
```

libSpotify（以及扩展的 PySpotify）在您初始化它的线程中运行。由于你正在做一个紧密的循环，你实际上阻止了 libSpotify 做任何事情的能力，并且浏览请求最终会超时。

与其进行紧密的循环，不如依靠回调在加载内容时得到通知。

# java - Java 代码到 UNIX 服务器中的 Zip/FTP 目录

> ID：14872698
> 
> 赞同：0
> 
> 时间：2013-02-14T10:28:26.813
> 
> 标签：java, unix, ftp, zip

我想在 Java 包中编写几个方法，这些方法将部署在 UNIX 服务器中。到目前为止，我的代码是针对 Windows Server 的，为此我使用以下代码压缩目录。

```
public static final void zipDirectory(File fBatchDirectory, String batchName, String ondemandDocExtension) throws IOException 
{
    //Set zip file name
    File zip = new File(fBatchDirectory + "\\" + StringUtils.replace(batchName,".ind", "") + ".zip");                       

    //filter file
    FileFilter filter = new FileFilter(ondemandDocExtension);       
    File[] files = fBatchDirectory.listFiles(filter);

    if(files.length > 0)
    {           
        ZipOutputStream zos = new ZipOutputStream( new FileOutputStream(zip) );
        zip(files, fBatchDirectory, zos , ondemandDocExtension);
        zos.close();
    }         

}

private static final void zip(File[] files, File base,ZipOutputStream zos , String docExtension) throws IOException 
{                   
        byte[] buffer = new byte[8192];
        int read = 0;
        for (int i = 0, n = files.length; i < n; i++) 
        {
           //Add to zip only if its file
          if (files[i].isFile())
          {
            FileInputStream in = new FileInputStream(files[i]);
            ZipEntry entry = new ZipEntry(files[i].getPath().substring(base.getPath().length() + 1));
            zos.putNextEntry(entry);

            while (-1 != (read = in.read(buffer))) 
            {
              zos.write(buffer, 0, read);
            }
            in.close();
          }
        }
} 
```

对于如何将相同的功能复制到 Java 中的 zip 目录，对于 UNIX，我感到很困惑？然后我想将文件从 UNIX 服务器 FTP 到另一个 UNIX 服务器。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:47:00.237

乍一看，我看到的唯一问题是在这一行：

```
File zip = new File(fBatchDirectory + "\\" + StringUtils.replace(batchName,".ind", "") + ".zip"); 
```

因为您在文件名中明确使用了双反斜杠 ( `\\`)。如果您更改`File.separator`您的代码应该适用于两个操作系统：

```
File zip = new File(fBatchDirectory + File.separator + StringUtils.replace(batchName,".ind", "") + ".zip"); 
```

对于其中的 FTP 部分，您可以使用[FTP 客户端](http://www.sauronsoftware.it/projects/ftp4j/)或使用更高级的库（如[Apache Commons VFS](http://commons.apache.org/vfs/)），顺便说一下，它启发了 Java 7 中的新 IO FileSystem API，但我没有现在关于目前使用新 API 实现 FTP 协议的任何库。

# linux - 嵌入式 linux：readdir() 有时会因 EFAULT 而失败

> ID：14872705
> 
> 赞同：1
> 
> 时间：2013-02-14T10:28:58.720
> 
> 标签：linux, readdir

我`readdir()`在嵌入式应用程序中出现了一些问题，因此我在应用程序代码的一个方便位置添加了这个独立的测试：

```
FILE *f;
DIR *d;

f = fopen ("/mnt/mydir/myfile", "r");
printf ("fopen %p\r\n", f);
if (f) fclose(f);

d = opendir ("/mnt/mydir");
printf ("opendir ret %p\r\n", f);
if (d)
{
    struct dirent *entry;
    do
    {
    errno = 0;
    entry = readdir (d);
    printf ("readdir ret %p %s, errno %d %s\r\n", entry, entry ? entry->d_name : "", errno, strerror(errno));
    } while (entry);
    closedir (d);
} 
```

`/mnt/mydir`是一个 NFS 挂载（虽然我不确定这是否相关）。在该目录中打开文件的`fopen()`调用始终成功，并且该`opendir()`目录上的 也始终成功。但是，有时（大多数）`readdir()`失败与`errno=EFAULT`.

我不相信应用程序中的其他任何地方都在使用该目录做任何事情。测试与编写的完全相同，所有变量都是本地堆栈范围。

如果我将它作为独立程序运行，它总是会成功。

任何人都可以就这里可能导致 EFAULT 的原因提供任何建议吗？我很确定我的 DIR 指针变量没有被破坏，尽管我猜 DIR 结构本身可能是。我没有在其他地方看到任何堆损坏的证据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:31:44.700

从`man 2 readdir`页面：

```
 EFAULT Argument points outside the calling process's address space. 
```

这意味着您的结构已损坏

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:43:31.190

我想我找到了问题所在。opendir/readdir 的 uClibc 实现对目录执行 stat()，然后执行大小为 statbuf.st_blksize 的堆栈 alloca()。我的 NFS 目录以 rsize=512KB 挂载，导致 readdir() 尝试在堆栈上分配 512KB 来保存凹痕。我的嵌入式设置在堆栈之间没有那么大的空间，所以在某些时候会在内存中碰到下面的东西并导致 EFAULT。

如果我将 NFS 挂载选项更改为 rsize=4096，它可以正常工作。

# php - Facebook publish_stream 代码以循环结束

> ID：14872706
> 
> 赞同：3
> 
> 时间：2013-02-14T10:29:02.583
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我有以下代码，只要在应用程序的前一部分中，用户接受对`publish_stream`.

```
# The facebook library
require_once("/var/www/facebook-php-sdk-master/src/facebook.php");

# Create facebook object
$config = array();
$config['appId'] = 'appId_here';
$config['secret'] = 'secret_here';
$config['fileUpload'] = false; // optional

$facebook = new Facebook($config); 

$user_id = $facebook->getUser();

if ($user_id) {

    try {

        $user_profile = $facebook->api('/me','GET');

        #check permissions
        $api_call = array(
                'method' => 'users.hasAppPermission',
                'uid' => $user_id,
                'ext_perm' => 'publish_stream'
        );

        #set to true if true...
        $can_offline = $facebook -> api( $api_call );

        #is it true?
        if( $can_offline ) {

            $post =  array(
                'message' => 'post_a_message'
            );

            $facebook->api('/' . $_GET["id"] . '/feed', 'POST', $post);

        } else {

            // can't post message - don't have permission

        }

    } catch (FacebookApiException $e) {

        error_log($e);
        exit;

    }

} else {

    error_log("user not logged in");
    exit;

} 
```

为了解决这个问题，我尝试将以下代码插入到`else statement`上面代码中当前仅包含注释的代码中`// can't post message - don't have permission`

我试图插入的代码`else`是这样的：

```
$loginUrl = $facebook->getLoginUrl( array( 'scope' => 'publish_stream' ) );
header("Location: ".$loginUrl); 
```

只要用户接受允许我的应用程序使用`publish_stream`. 但是，如果用户不接受，我的应用程序会不断要求用户接受`publish_stream`。如果用户决定不接受，我该如何阻止该循环的发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T09:13:37.060

据我记得，`$facebook -> getLoginUrl`可以采用参数`cancel_url`，其中包含链接，如果用户不授予您的应用权限，则应将其重定向到该链接。

所以代码将是这样的

```
$login_url = $facebook -> getLoginUrl( array(
'scope' => 'publish_stream',
'cancel_url' => YOUR_LINK_HERE
)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T06:57:20.400

这是工作代码：请检查：

页面名称：events.php

您可以看到`$redirect_uri = https://localhost/facebook_page/events.php`它正在返回到同一页面。

```
<?php

$facebook_appid         = "your appid";                     // Facebook appplication id
$facebook_secret        = "your app secret";                // Facebook secret id
$redirect_uri           = "https://localhost/facebook_page/events.php";   // return url to our application after facebook login ## should be SAME as in facebook application
$scope                  = "publish_stream"; // User permission for facebook

$profile_id             = "profile_id";// Where do you want to post it(profile id - It is a number)

$code                   = $_REQUEST["code"]?$_REQUEST["code"]:"";

if(empty($code)) {
    $_SESSION['state']  = rand(); // CSRF protection
    $dialog_url         = "https://www.facebook.com/dialog/oauth?client_id=". $facebook_appid . "&redirect_uri=" . urlencode($redirect_uri) . "&state=". $_SESSION['state'] . "&scope=".$scope;
    header("location:".$dialog_url);
}

if($_SESSION['state'] && ($_SESSION['state'] == $_REQUEST['state'])) {
    $token_url          = "https://graph.facebook.com/oauth/access_token?". "client_id=" . $facebook_appid . "&redirect_uri=" . urlencode($redirect_uri). "&client_secret=" . $facebook_secret . "&code=" . $code;
    $response           = @file_get_contents($token_url);

    $params             = null;
    parse_str($response, $params);

    $access_token       = $params['access_token'];

}

?>

<!-- Here you can use 
      message, picture, link, name, caption, description, source, place, tags 
     as input fields-->

<form enctype="multipart/form-data" method="POST" action="https://graph.facebook.com/<?php echo $profile_id;?>/feed?access_token=<?php echo $access_token; ?>">
    <input type="text" name="message" value="test" />
    <input type="submit" name="submit" value="Submit" />
</form> 
```

您也可以使用 jquery 发布它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T07:44:02.047

我使用以下代码检查用户是否允许发布权限：

```
$permissions = $facebook->api('me/permissions');
if( array_key_exists('publish_stream', $permissions['data'][0]) ) {
    //Continue with posting on users wall
} else {
    //Continue without posting on users wall
} 
```

# batch-file - 批量解析字符串

> ID：14872709
> 
> 赞同：0
> 
> 时间：2013-02-14T10:29:04.387
> 
> 标签：batch-file, directory

我有一个**输入目录**和一个**输出目录**。

**我的主要目标是将输入目录**中具有特定扩展名的所有文件读入一个数组。

然后我希望在**输出目录**下的**输入目录**中创建每个文件的目录树。

 **例如：

**输入目录 =`C:\Input`**

**输出目录 =`C:\Output`**

**输入目录树：**

`C:\Input\1\first.bat`

`C:\Input\2\3\second.bat`

`C:\Input\2\3\4\third.bat`

`C:\Input\3\1\forth.bat`

我希望现在没有文件和文件夹的输出树看起来像这样：

**输出目录树：**

`C:\Output\1\`

`C:\Output\2\3\`

`C:\Output\2\3\4\`

`C:\Output\3\1\`

我有以下代码：

**用于创建文件数组：**

```
 set k=0
    for /f "eol=: delims=" %%F in ('dir /b /s %InputDir%\*.%StandardExtension%') do (
        set /a k+=1  
        set filesArray[!k!]=%%F 
    )
    set n=%k% 
```

**为每个文件创建目录：**

```
for /l %%i in (1,1,%n%) do (
    set CurrentFile=!filesArray[%%i]!
    call :CheckAndCreateDirectory %SequencesDir% !CurrentFile! %OutputDir% UpdatedOutputDir
) 
```

**最后，创建目录的函数：**

```
:CheckAndCreateDirectory
set IntputDir=%1
set CurrentDir=%~dp2
set OutputDir=%3

set UpdatedOutputDir=!CurrentDir:%IntputDir%=%OutputDir%!
set %4=%UpdatedOutputDir%

if not exist %UpdatedOutputDir% (^
echo. & ^
mkdir %UpdatedOutputDir% & ^
echo.) 
```

事情是这样的：如果输入（我猜也是输出）不包含任何“特殊”字符`&`等，则代码有效。但是，如果是这样，则不会创建目录树。

**工作输入：`C:\Input_Dir`**

**不工作输入：`C:\Input&Dir`**

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:05:47.787

我想我有一个更简单的解决方案给你：

```
xcopy /T c:\input c:\ouptut 
```

一些细节：

> /T 创建文件夹结构，但不复制文件。不要包括空文件夹或子文件夹。/T /E 将包括空文件夹和子文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:30:05.097

Kaysax 的解决方案看起来不错，但要回答您最初的问题：
始终使用延迟扩展。
并尝试将您的论点括在引号中，例如

```
mkdir "!UpdatedOutputDir!" 
```

关键是，延迟扩展可以毫无问题地处理所有特殊字符。

剩下的唯一问题是在您的循环中，因为您可能会在文件或路径名中丢失感叹号`!`，因为 FOR 循环参数在延迟扩展发生之前被扩展。
为了解决这个问题，需要付出更多的努力。**

# mysql - Mysql 安排事件

> ID：14872712
> 
> 赞同：-1
> 
> 时间：2013-02-14T10:29:10.540
> 
> 标签：mysql, cron, scheduled-tasks

我正在学习一些 Mysql 并且我有一个问题：在我的数据库中，当有人将商品放入购物车时，它会处于“保留”状态。但如果此人在接下来的 30 分钟内没有结帐，则该项目应再次设置为“免费”。不使用 CRON 可以制作吗？或者一些轻量级的解决方案......

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:55:03.307

一种方法是将 reserved 设置为特定时间，例如：

```
update `item` set `reserved` = 1, `reservedto` = ADDTIME(NOW(),'00:30') where `id` = ?; 
```

然后在检查可用项目之前（或其他地方，如果经常发生这种情况）只需添加一个 realese 语句，如下所示：

```
update `item` set `reserved` = 0 where `reservedto` < NOW() and `reserved` = 1; 
```

如果您有一个大表，您可能希望在 reservedto 列上放置一个索引。

# colors - HighCharts：标签的颜色根据饼图的颜色

> ID：14872718
> 
> 赞同：7
> 
> 时间：2013-02-14T10:29:55.033
> 
> 标签：colors, label, highcharts

这个问题的标题说明了一切。我只发现了如何更改连接器的颜色。如果我删除该`color:`选项，它们都是灰色的。我试图用十六进制存储的颜色放入该字段，但没有结果，保持黑色。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-14T12:23:20.147

在`dataLabels.formatter`您可以访问`this.point.color`. 如此简单的数据标签集`useHTML: true`，并创建具有指定颜色的跨度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T21:18:50.053

formatter 函数为您提供了一个回调对象，该对象具有一个颜色属性，可以使用您选择的颜色进行设置

```
formatter: (format) ->
  format.color = @point.color 
```

# php - 分页功能不起作用

> ID：14872722
> 
> 赞同：0
> 
> 时间：2013-02-14T10:30:10.750
> 
> 标签：php, codeigniter, function, pagination, uri

嗨，每个人都可以解释一下这是什么剂量

```
$this->uri->segment()); 
```

它是我的分页功能的一部分，我无法弄清楚我为什么需要它以及是否有东西可以替换它。它导致我的脚本出错。感谢您的帮助。我也是 codeigniter 和 php plys 的新手，试着提前让我 tnx 变得简单。

错误信息

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：试图获取非对象的属性
> 
> 文件名：views/survay_view.php
> 
> 行号：31

这是我的分页功能的所有代码

```
//pagination
        function page()
           {

            $this->load->library('pagination');

            $config['base_url'] = 'http://localhost/admin/index.php/survay/';
            $config['total_rows'] = $this->db->get('save_survay')->num_rows();

            $config['per_page'] = 1;
            $config['num_links'] =10;

            $this->pagination->initialize($config);
            //print_r($this->uri->segment());die;

            $data['records'] = $this->db->get('save_survay', $config['per_page'], $this->uri->segment());
            $data['pagination'] = $this->pagination->create_links();
            $this->load->view('survay_view', $data);

          }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:43:48.957

该变量`$this->uri->segment();`表示特定的 URI 段。

例如，如果您有一个 URL /page/view/1

如果您确实回显`$this->uri->segment(2);`，它将返回“视图”。

有关详细信息，请参阅[http://ellislab.com/codeigniter/user-guide/libraries/uri.html](http://ellislab.com/codeigniter/user-guide/libraries/uri.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:44:15.247

这 $this->uri->segment(); 实际上是从 url 中获取值。就像 $_GET[]。有关详细帮助，请参阅[http://ellislab.com/codeigniter/user-guide/libraries/uri.html](http://ellislab.com/codeigniter/user-guide/libraries/uri.html)。

# asp.net-mvc - MVC ViewModel 问题

> ID：14872736
> 
> 赞同：2
> 
> 时间：2013-02-14T10:30:46.880
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个具有 2 个属性的视图模型，第一个属性是 Model 对象，第二个属性是 List 。在我看来，我有 2 个部分。

第一部分填充第一个对象的数据，名字、姓氏、电子邮件和其他一些东西。

我的观点的第二部分是用户添加多个地址的 webgrid。

现在我的问题是什么，我的控制器上有一个 JSON 操作，它从表单获取数据，将它们添加到 viewmodel List 属性，但没有任何反应。

我检查了数据是否来自视图，添加到视图模型但每次视图模型为空。

 ````
[Authorize]
public JsonResult addAddress(Address addr, CustomerViewModel model)
{
    if (model.CAddress== null)
        model.CAddress= new List<Address>();

    model.CAddress.Add(addr);

    return Json(model, JsonRequestBehavior.AllowGet);
} 
````  `我正在使用 Javascript：

 ````
function AddAddress() 
{ 
 var addID = $("#lstID option:selected").val(); 
 var addName = $("#lstAddName option:selected").text(); 

 var Address = 
 { 
  addID : addID.toString(), 
  addName : addName.toString() 
 }; 

$.ajax({ 
 type: "POST", 
 url: "@Url.Action("addAddress","Customer")", 
 dataType: "json", contentType: "application/json; charset=utf-8", 
 data: JSON.stringify(Address), 
 success: function (data) {} }); }; 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:57:21.990

好吧，从编写一个真实的视图模型开始，而不是一些混合模型：

```
public class CustomerViewModel 
{
    public List<AddressViewModel> Addresses { get; set; }

    ... some other properties you already had
}

public class AddressViewModel
{
    public string Id { get; set; }
    public string Name { get; set; }
} 
```

然后调整您的控制器操作以获取您的真实视图模型，而不是视图模型和域模型之间的一些混合和混合：

```
[Authorize]
[HttpPost]
public ActionResult AddAddress(CustomerViewModel model)
{
    return Json(model);
} 
```

最后调整您的 AJAX 调用：

```
function AddAddress() { 
    $.ajax({ 
        url: '@Url.Action("AddAddress", "Customer")', 
        type: 'POST', 
        contentType: 'application/json; charset=utf-8', 
        data: JSON.stringify({ 
            addresses: [
                { 
                    id : $('#lstID').val(), 
                    name : $('#lstAddName option:selected').text()
                }
            ],
            someOtherPropertyOnYourViewModel: 'some other value'
        }), 
        success: function (data) {

        } 
    }); 
} 
`````

# ruby-on-rails - 使用 Ruby 脚本中的 .rvmrc 文件

> ID：14872737
> 
> 赞同：1
> 
> 时间：2013-02-14T10:30:49.123
> 
> 标签：ruby-on-rails, ruby, rvm, thor

# 背景

先介绍一下这个问题的背景：Ruby on Rails 最近存在一些安全问题。所以我们需要更新我们项目的 Rails 版本。如果你有几个，如果你手工做的话，它会很快变老......所以我想我可以为此创建一个 Thor 任务。

# 问题

现在效果很好！但！在安装新版本的 rails 时，我需要尊重每个项目的 .rvmrc 文件。我希望这个脚本尽快开源，但我想先解决不尊重 .rvmrc 文件的问题。

所以我需要的是一种在我切换到目录以更新 Rails 版本时使用正确的 RVM ruby​​ 版本/gemset 的方法。

如何做到这一点？是否可以通过 Ruby 脚本以某种方式完成它，以便它可以在 Mac 和 Linux 上运行，无论 Shell 是什么（找到了 zsh 支持的答案，但是那里的所有其他 shell 呢？）

快速示例代码：

```
#Scan the base directory down for Gemfiles
gem_files = File.join("**", "Gemfile")
Dir.glob(gem_files){|gemfile|
  project_folder = File.dirname(gemfile)
  puts "Found Gemfile in #{project_folder}"
  Dir.chdir(project_folder) do
    #TODO: Respect/load the rvmrc file in this directory
    update_gem_file(project_folder) #example
    run 'bundle update rails' #<--- needs to be done in the RVM gemset
  end
} 
```

只是为了让您了解我正在尝试做的事情。

## 链接到 githubs 上的脚本

[我的脚本的 github 存储库——正在进行中！](https://github.com/davidakachaos/scan_and_up_rails)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:31:50.697

基本上看看这个项目[https://github.com/versapay/bundler-auto-update它：](https://github.com/versapay/bundler-auto-update)

> 尝试将 Gemfile 中的每一个 gem 更新到其最新补丁，次要版本和主要版本。运行测试命令以确保更新成功

至于 RVM 使用这个简单的代码：

```
#Scan the base directory down for Gemfiles
gem_files = File.join("**", "Gemfile")
Dir.glob(gem_files){|gemfile|
  project_folder = File.dirname(gemfile)
  puts "Found Gemfile in #{project_folder}"
  run "rvm in #{project_folder} do bundle-auto-update -c rake spec"
} 
```

[您可以在https://rvm.io](https://rvm.io)上找到有关使用 RVM 编写脚本的更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:28:49.350

盲目升级 Rails 不是一个好主意。至少运行您的测试套件以确保没有任何问题。之后，您仍然想对应用程序进行一些 QA，以确保您没有破坏所有内容。

那么，你怎么知道你正在更新的当前分支实际上是主开发分支？您不想创建一个“修补程序”分支并将其应用到您的生产*和*开发分支吗？

但是，假设您*确实*设法升级了所有应用程序，它们仍未部署到生产环境中。

# objective-c - 如何将 xib 的子视图显示到另一个 xib 的表格单元加载中

> ID：14872739
> 
> 赞同：2
> 
> 时间：2013-02-14T10:30:53.180
> 
> 标签：objective-c, uitableview, xib, subview

我从 xib 文件加载 xib 子视图 [TestSummaryView] 到表格单元 [NotesTableCell] 时遇到问题。我的 xib 子视图只有在通过拖出屏幕刷新单元格后才可见。

主文件.m：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

NotesTableCell *cell = [tableView dequeueReusableCellWithIdentifier:@"NotesTableCell"];
if (cell == nil) 
{
    [[NSBundle mainBundle] loadNibNamed:@"NotesTableCell" owner:self options:nil];
    cell = __noteTableCell;
    self.__noteTableCell = nil;
}

(...)

for (UIView* view in [cell.summaryView subviews])
    [view removeFromSuperview];

UIView* view = [note.form summaryView];
[cell.summaryView addSubview:view];
view.bounds = cell.summaryView.bounds;
view.center = CGPointMake(cell.summaryView.bounds.size.width/2, cell.summaryView.bounds.size.height/2);

[cell.webView setHidden:YES];
[cell.summaryView setHidden:NO];                               
} 
```

测试表格.m

```
-(UIView*)summaryView 
{
if (!_testSummaryView) 
{
    NSArray* xib = [[NSBundle mainBundle] loadNibNamed:@"TestSummaryView" owner:self options:nil];
    _testSummaryView = [[xib objectAtIndex:0] retain];
}

(...)

return _testSummaryView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:33:38.833

问题解决了。它在代码的其他部分。

# xml - 使用 XSLT 和 XML 创建 HTML 表，选择一组特定的元素？

> ID：14872746
> 
> 赞同：1
> 
> 时间：2013-02-14T10:31:12.800
> 
> 标签：xml, xslt

我需要从 XSLT 文件以 html 格式创建一个表，但只选择一组特定的节点。例如，在以下 XML 中，我希望选择 routename 包含 fco-dxb 的所有 from 和 to 子节点：

```
<?xml version="1.0" encoding="UTF-8"?>

<flights
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="flights.xsd">

<flight flightid="1">
    <flightno>EK98</flightno>
    <callsign>UAE98</callsign>
    <airline>Emirates Airline</airline>

    <plane planeid="1">
        <name>Airbus A380-861</name>

        <registereddate>07-06-10</registereddate>
    </plane>

    <registration>3A6-EDJ</registration>
    <altitude height="feet">41000</altitude>
    <speed ratio="mph">564</speed>
    <distance unit="miles">erf</distance>

    <route>
    <routename>FCO-DXB</routename>
        <from>
            <iatacode>FCO</iatacode>
            <airport>Fiumicino</airport>
            <country>Italy</country>
            <city>Rome</city>
            <latitude>41.8044</latitude>
            <longitude>12.2508</longitude>
        </from>

        <to>
            <iatacode>DXB</iatacode>
            <airport>Dubai Intl</airport>
            <country>United Arab Emirates</country>
            <city>Dubai</city>
            <latitude>25.2528</latitude>
            <longitude>55.3644</longitude>
        </to>
    </route>

    <course bearing="degrees">154</course>

    <journey>
        <distance type="miles">2,697</distance> 
        <time>PT5H30M</time>
    </journey>

</flight>

<flight flightid="2">
    <flightno>BA283</flightno>
    <callsign>BAW283</callsign>
    <airline>British Airways</airline>

    <plane planeid="2">
        <name>Boeing 747-436</name>
        <registereddate>06-12-97</registereddate>
    </plane>

    <registration>3A6-EDJ</registration>
    <altitude height="feet">41000</altitude>
    <speed ratio="mph">564</speed>
    <distance unit="miles">erf</distance>

    <route>
    <routename>LHR-LAX</routename>
        <from>
            <iatacode>LHR</iatacode>
            <airport>Heathrow</airport>
            <country>England</country>
            <city>London</city>
            <latitude>51.4775</latitude>
            <longitude>0.4614</longitude>
        </from>

        <to>
            <iatacode>LAX</iatacode>
            <airport>Los Angeles International</airport>
            <country>United States of America</country>
            <city>L.A</city>
            <latitude>33.9471</latitude>
            <longitude>-118.4082</longitude>
        </to>
    </route>

    <course bearing="degrees">154</course>

    <journey>
        <distance type="miles">5,441 miles</distance> 
        <time>PT11H5M</time>
    </journey>

</flight>

</flights> 
```

并将其输出到表格中，这是我在 XSLT 中的尝试：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" omit-xml-declaration="yes" />

    <xsl:template match="/">
    <xsl:element name="html">
        <xsl:element name="head">
            <xsl:element name="title">flights</xsl:element>
        </xsl:element>

  <xsl:element name="body"> 
      <xsl:element name="table"><xsl:attribute name="border">1</xsl:attribute>
        <xsl:element name="tr">
          <xsl:element name="td">
            <xsl:element name="b">Title</xsl:element>
          </xsl:element>
          <xsl:element name="td">
            <xsl:element name="b">Artist</xsl:element>
          </xsl:element>
          <xsl:element name="td">
            <xsl:element name="b">Year</xsl:element>
          </xsl:element>
        </xsl:element>
        <xsl:apply-templates select="flights/flight/route[contains(text(), 'FCO-DXB')]" />
      </xsl:element>
    </xsl:element>
</xsl:element>
</xsl:template>

<xsl:template match="from">
<xsl:element name="tr">
  <xsl:element name="td"><xsl:value-of select="iatacode"/></xsl:element>
  <xsl:element name="td"><xsl:value-of select="airport"/></xsl:element>
  <xsl:element name="td"><xsl:value-of select="country"/></xsl:element>
  <xsl:element name="td"><xsl:value-of select="city"/></xsl:element>
</xsl:element>
</xsl:template>

<xsl:template match="to">
<xsl:element name="tr">
<xsl:element name="td"><xsl:value-of select="iatacode"/></xsl:element>
  <xsl:element name="td"><xsl:value-of select="airport"/></xsl:element>
  <xsl:element name="td"><xsl:value-of select="country"/></xsl:element>
  <xsl:element name="td"><xsl:value-of select="city"/></xsl:element>
</xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

我的目标是最终弄清楚如何将参数传递给 XSLT 文件，因此我可以将参数传递给它，而不是硬编码包含文本，但到目前为止我只想知道如何回答这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:04:34.690

您没有说是否可以有多个具有相同标识符的路由名。如果有，它们应该显示在同一个表中还是显示在不同的表中（每场比赛一个）？

我在这里假设如果有多个具有相同标识符的路由名称，它们会打印在同一个表中（如果这个假设不正确，请纠正我，我会相应地更改代码）。

这是实现您想要实现的目标的一种方式：

```
<?xml version="1.0" encoding="utf-8" ?>

<xsl:stylesheet version="1.0"
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="html" omit-xml-declaration="yes" />

<xsl:param name="code"
           select="'FCO-DXB'" />

<xsl:template match="/flights">
    <html>
        <head>
            <title>flights</title>
        </head>
        <body>
            <xsl:apply-templates select="flight/route[routename/. = $code]" />
        </body>
    </html>
</xsl:template>

<xsl:template match="route">
    <table>
        <tr>
            <td><b>IATA Code</b></td>
            <td><b>Airport</b></td>
            <td><b>Country</b></td>
            <td><b>City</b></td>
        </tr>
        <xsl:apply-templates select="*" />
    </table>
</xsl:template>

<xsl:template match="from|to">
    <tr><xsl:apply-templates select="*" /></tr>
</xsl:template>

<xsl:template match="iatacode|airport|country|city">
    <td><xsl:value-of select="." /></td>
</xsl:template>

<xsl:template match="text()" />

</xsl:stylesheet> 
```

# jquery - jQuery 数据表隐藏列

> ID：14872747
> 
> 赞同：1
> 
> 时间：2013-02-14T10:31:12.777
> 
> 标签：jquery, datatables

我用 jQuery 创建数据表

在有以下列表：

```
var list = [["name1", "id1"],["name2", "id2"],["name3", "id3"]] 
```

我初始化数据表：

```
var oTable = $('#myTable').dataTable({
    "bDestroy": true,
    "bJQueryUI": true,
    "bPaginate" : false,
    "bFilter": false,
    "bSortClasses": false
}) 
```

和

添加数据：

```
oTable.fnAddData(list); 
```

它显示名称1，名称2，名称3

我的问题：我可以添加 id1、id2、id3 作为隐藏数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:44:07.750

```
$(document).ready(function() {
    $('#myTable').dataTable( {
        "aoColumns": [ 
            /* name1 */   null,                                     /*  visible */
            /* id1 */  { "bVisible":    false },                    /* hidden */
            /* name2 */  null,
            /* id2 */  { "bVisible":    false },
            /* name3 */    null,
            /* id3 */  { "bVisible":    false }
        ]
    });
}); 
```

# ios - iOS：使用 CoreText 更好地证明

> ID：14872749
> 
> 赞同：2
> 
> 时间：2013-02-14T10:31:17.427
> 
> 标签：ios, objective-c, whitespace, core-text, justify

我在图像周围浮动一些文本，并使用`CoreText`并`kCTJustifiedTextAlignment`显示文本对齐 - 但是对于更大的图像，更小的文本区域和更少的空白`CoreText`不仅会扩大空白，还会扩大字母之间的边距。

看这里： ![非常有道理](../Images/54aa25a7b39a8069f3afe1f17f4e2c67.png)

这有时看起来真的很糟糕，所以我搜索了一些替代方案或解决方法，但只找到了自己做的建议，方法是在每个空格之后添加更多空格以匹配宽度并使用`kCTLeftTextAlignment`. 听起来有很多陷阱要处理，所以我想，我想在这里问一下，也许有人知道如何处理这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T23:28:58.233

这里的基本问题是“那你想要什么？” 另一个明显的答案是“完全证明，除非……我要制定一些规则，比如只有一个词。”

如果您想要这种控制，那么您需要下拉到`CTLine`级别并仅在需要时创建对齐的线。假设您已经对 CoreText 有所了解，那么这段代码应该是有意义的。仅当它不是段落的最后一行时，它才证明该行是合理的。

```
 CFIndex lineCharacterCount = CTTypesetterSuggestLineBreak(self.typesetter, startIndex, boundsWidth);
  CTLineRef line = CTTypesetterCreateLine(self.typesetter, CFRangeMake(startIndex, lineCharacterCount));

  // Fetch the typographic bounds
  CTLineGetTypographicBounds(line, &(*ascent), &(*descent), &(*leading));

  // Full-justify all but last line of paragraphs
  NSString *string = self.attributedString.string;
  NSUInteger endingLocation = startIndex + lineCharacterCount;
  if (endingLocation >= string.length || [string characterAtIndex:endingLocation] != '\n') {
    CTLineRef justifiedLine = CTLineCreateJustifiedLine(line, 1.0, boundsWidth);
    CFRelease(line);
    line = justifiedLine;
  } 
```

`CTLine`所以我们根据`CTTypesetter`建议创建一个法线。然后我们应用一些规则（只有一个词？不是段落的结尾？随便。）如果我们通过了，那么我们创建一个新的，对齐的行。（我不确定为什么`CTTypesetter`不能自己创建一条合理的线。）

有关这方面的完整示例，请参阅[PinchText](https://github.com/rnapier/richtext-coretext/blob/master/PinchText/Classes/PinchTextLayer.m)。它比您需要的要复杂得多，但它展示了如何使用大量注释进行所有布局。

# java - 配置 appengine-web.xml 中的静态文件设置后，每次请求都会返回 404

> ID：14872756
> 
> 赞同：2
> 
> 时间：2013-02-14T10:31:31.687
> 
> 标签：java, google-app-engine, static-files

首先，提前感谢您阅读本文。

```
<application>${APPLICATION}</application>
<version>${VERSION}</version>

<system-properties>
    <property
        name="java.util.logging.config.file"
        value="WEB-INF/classes/logging.properties"
    />
    <property name="appengine.datastore.disableChunkSizeWarning" value="false"></property>
</system-properties>

<static-files>
    <include path="/images/**" expiration="40d 0h 0m 0s" />
</static-files>

<precompilation-enabled>true</precompilation-enabled>

<warmup-requests-enabled>true</warmup-requests-enabled>

<threadsafe>true</threadsafe>

<inbound-services>
    <service>channel_presence</service>
</inbound-services> 
```

以上是我的appengine-web.xml，在我配置静态文件设置后，每个页面请求都返回“错误404”

[http://dev.magic-note.appspot.com/](http://dev.magic-note.appspot.com/)

这是网站的链接。。

有人有什么建议吗？？任何事物？？真的很感激..谢谢大家..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:06:29.320

通过扩展尝试：

例如：

```
 <static-files>
        <include path="/**.gif" expiration="1d" />
        <include path="/**.png" expiration="1d" />
        <include path="/**.jpg" expiration="1d"  />
        <include path="/**.ico" expiration="1d"  /> 
 </static-files> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-05T04:04:13.383

将所有静态文件复制到 src\main\webapp 文件夹中，并将静态文件模式包含在 appengine-web.xml 中，如下所示。

```
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
  <application>YOUR-PROJECT-ID</application>
  <version>1</version>
  <threadsafe>true</threadsafe>
  <static-files>
    <include path="/**.html" />
    <include path="/**.js" />
    <include path="/**.css" />
  </static-files>
</appengine-web-app> 
```

# delphi - 如何在 Windows 服务中收到时间更改通知

> ID：14872757
> 
> 赞同：4
> 
> 时间：2013-02-14T10:31:33.103
> 
> 标签：delphi, winapi, service

我创建了一个 WindowProc 来通知系统时间更改：

```
constructor TJJWScheduler.Create;
begin 
  fTimeChangeWnd := Classes.AllocateHWnd(TimeChangeWndProc);
end;

procedure TJJWScheduler.TimeChangeWndProc(var msg: TMessage);
var
  i: integer;
begin
  case msg.Msg of
    WM_TIMECHANGE:
      begin
        // my things
      end;
  end;
end; 
```

此代码在 Windows 服务中运行。问题是当我更改系统时间时它没有被触发！

为什么广播消息 (WM_TIMECHANGE) 没有传递到我的窗口？还有另一种没有循环的方法吗？

* * *

**编辑**

我不知道为什么，但是我硬编码了 PeekMessage 来处理该窗口的消息，并且一切正常。下面的代码解决了我的问题：

```
 var 
   msg: TMsg;

 if PeekMessage(msg, fTimeChangeWnd, WM_TIMECHANGE, WM_TIMECHANGE, PM_REMOVE) then
 begin
   TranslateMessage(msg);
   DispatchMessage(msg);
 end; 
```

这种解决方法很奇怪，因为我已经有其他窗口处理消息（通过通用 ProcessMessages），只有这个不处理它的消息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T13:22:16.513

您的窗口没有收到`WM_TIMECHANGE`消息的原因是您的窗口是从辅助线程创建的。

进程中的每个线程都有自己的消息队列。当您为消息队列提供服务时，同步消息会被传递，因此对于像您这样的非排队消息，`WM_TIMECHANGE`您需要为辅助线程消息队列提供服务才能传递消息。

例如，查看文档[`GetMessage`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644936.aspx)，这是提取队列消息的最常见方法：

> 该函数分派传入的已发送消息，直到发布的消息可用于检索。

对于`PeekMessage`. 它在查看队列之前调度传入的已发送消息。

发送消息还有其他几种发送方式，但这些是主要方式。

现在，我怀疑您定期从辅助线程发送消息可能不方便。如果您的辅助线程什么都不做，那么它可以简单地位于传统的`GetMessage`, `TranslateMessage`,`DispatchMessage`循环中。大多数情况下，它会愉快地阻止`GetMessage`发送任何传入的已发送消息。但是，如果您的辅助线程做更多的工作，那么这可能不是一个可行的选择。

您已经在主服务线程上运行和服务一个消息队列。使您的侦听器窗口与主服务线程具有亲和力可能更有意义。通过从在主服务线程中运行的代码创建它来做到这一点。

另请注意，这`AllocateHWnd`不是线程安全的。您不能从进程的主线程以外的任何线程调用它。因此，如果您确实希望保留在辅助线程上，则需要使用`CreateWindow`而不是`AllocateHWnd`. 但这也许是将这个窗口移到主线程上的另一个很好的理由。

# iphone - 使用 iPhone 应用在 Google+ 中共享图像

> ID：14872759
> 
> 赞同：6
> 
> 时间：2013-02-14T10:31:34.960
> 
> 标签：iphone, ios, objective-c, xcode, ipad

在这里，我正在使用 IOS 应用程序中的 Google+ 集成..

我已经阅读了链接[https://developers.google.com/+/mobile/ios/share上的指南](https://developers.google.com/+/mobile/ios/share)

我在以下方面取得了**成功。**

-->>**分享文字**。

-->>**分享网址**。

-->>**共享应用程序（Google+ 应用程序）图标和说明** [使用深度链接]。

但我一直**停留**在以下方面。

-->>**共享本地或 URL 图像**。

所以..有没有可能通过 Google+ 分享 iPhone 应用程序中的图像。

请帮我...

**提前谢谢**...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T10:14:52.667

根据这些讨论，目前还不可能：

[iOS：可以在 Google Plus 中发送或发布消息](https://stackoverflow.com/questions/9105949/ios-possible-to-send-or-post-message-in-google-plus)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T12:37:53.323

你可以使用 -(id) setURLToShare: (NSURL *)urlToShare

[https://developers.google.com/+/mobile/ios/api/protocol_g_p_p_share_builder-p#a0f2e350ef29af0eb3ed4771c12e54925](https://developers.google.com/+/mobile/ios/api/protocol_g_p_p_share_builder-p#a0f2e350ef29af0eb3ed4771c12e54925)

我希望它有所帮助。

# python - 如何从 PySide Qt 中的 tabWidget 弹出一个单独的窗口

> ID：14872763
> 
> 赞同：8
> 
> 时间：2013-02-14T10:31:48.533
> 
> 标签：python, qt, pyside

我有一个扩展的主窗口，其中`QtGui.QTabWidget`添加了一个。我正在创建几个扩展的小部件`QtGui.QWidget`，我可以从中添加和删除到选项卡小部件。

我想做的是有一个“弹出”按钮，导致子小部件从选项卡小部件中删除并作为它自己的独立窗口出现（以及一个“弹出”按钮将其放回主窗口）。与 Gtalk-in-Gmail 的想法相同。请注意，如果我关闭主窗口，其他“选项卡”或“窗口”也应该关闭，并且我应该能够并排放置所有窗口并让它们都可见并同时更新。（我将显示近乎实时的数据）。

我是 Qt 的新手，但如果我没记错的话，如果 Widget 没有父级，它会独立出现。这行得通，但是我不知道如何将窗口“弹出”回。

```
class TCWindow(QtGui.QMainWindow): 
    .
    .
    .
    def popOutWidget(self, child):
        i = self.tabHolder.indexOf(child)
        if not i == -1:
             self.tabCloseRequested(i)
        self.widgets[i].setParent(None)
        self.widgets[i].show() 
```

我的直觉说，两者之间应该仍然存在父/子关系。

有没有办法让父母保持独立但仍然让窗口独立出现，或者我误解了Qt的风格？

否则，在孩子中创建一个变量来保存指向主窗口的链接（如`self.parentalUnit = self.parent()`）是一个好主意还是一个 hackish/kludgy 的主意？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T11:32:43.713

保持`parent`原样。如果删除`parent`, 则关闭主窗口不会关闭“浮动”选项卡，因为它们现在是顶级窗口。[`windowFlags`](http://qt-project.org/doc/qt-4.8/qwidget.html#windowFlags-prop)定义小部件是窗口还是子小部件。`QtCore.Qt.Window`基本上，您需要在和之间交替`QtCore.Qt.Widget`

下面是一个小而完整的例子：

```
#!/usr/bin/env python
# -.- coding: utf-8 -.-
import sys
from PySide import QtGui, QtCore

class Tab(QtGui.QWidget):
    popOut = QtCore.Signal(QtGui.QWidget)
    popIn = QtCore.Signal(QtGui.QWidget)

    def __init__(self, parent=None):
        super(Tab, self).__init__(parent)

        popOutButton = QtGui.QPushButton('Pop Out')
        popOutButton.clicked.connect(lambda: self.popOut.emit(self))
        popInButton = QtGui.QPushButton('Pop In')
        popInButton.clicked.connect(lambda: self.popIn.emit(self))

        layout = QtGui.QHBoxLayout(self)
        layout.addWidget(popOutButton)
        layout.addWidget(popInButton)

class Window(QtGui.QWidget):
    def __init__(self, parent=None):
        super(Window, self).__init__()

        self.button = QtGui.QPushButton('Add Tab')
        self.button.clicked.connect(self.createTab)
        self._count = 0
        self.tab = QtGui.QTabWidget()
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.button)
        layout.addWidget(self.tab)

    def createTab(self):
        tab = Tab()
        tab.setWindowTitle('%d' % self._count)
        tab.popIn.connect(self.addTab)
        tab.popOut.connect(self.removeTab)
        self.tab.addTab(tab, '%d' % self._count)
        self._count += 1

    def addTab(self, widget):
        if self.tab.indexOf(widget) == -1:
            widget.setWindowFlags(QtCore.Qt.Widget)
            self.tab.addTab(widget, widget.windowTitle())

    def removeTab(self, widget):
        index = self.tab.indexOf(widget)
        if index != -1:
            self.tab.removeTab(index)
            widget.setWindowFlags(QtCore.Qt.Window)
            widget.show()

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)

    w = Window()
    w.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:21:31.660

在 Qt 中，布局对添加到布局的小部件拥有所有权，因此让它处理父级关系。您可以创建另一个小部件（没有父小部件），该小部件将被隐藏，直到您按下弹出按钮，当按下它时，您从其原始布局中删除“弹出小部件”并将其添加到隐藏小部件的布局中。当按下弹出按钮时 - 将小部件返回到其原始布局。要关闭此隐藏窗口，在关闭主窗口时，您需要重新定义`closeEvent(QCloseEvent* ev)`为这样的内容（对不起 c++，但我敢打赌，在 python 中都是一样的）：

```
void MainWindow::closeEvent(QCloseEvent* ev)
{
   dw->setVisible(false); // independent of mainwindow widget
   sw->setVisible(false); // independent of mainwindow widget
   QWidget::closeEvent(ev); //invoking close event after all the other windows are hidden
} 
```

# asp.net - Gridview中的排序顺序下拉菜单

> ID：14872770
> 
> 赞同：2
> 
> 时间：2013-02-14T10:32:18.287
> 
> 标签：asp.net, c#-3.0, webforms

我有一个包含两列的 Gridview 控件：一列是 ID（标签），另一列是排序顺序（下拉列表）。下拉列表从 1 到*n*编号，其中*n*是 Gridview 中的行数。

例如：

```
ID        Sort Order
001          1
002          2
003          3
004          4 
```

在我更改其中一行的下拉列表中的值后 - 例如，我将 ID 的排序顺序下拉列表`002`从更改`2`为`3`- 网格视图应该像这样更新：

```
 ID        Sort Order
001          1
003          2
002          3
004          4 
```

我需要在下拉事件中完成此操作的逻辑`SelectedIndexChanged`，以及执行数据库更新的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-02T10:51:25.767

如果我正确理解了您的问题，那么找到您的问题的解决方案，如下所示：

**代码背后**

> ```
>  public partial class _Default : System.Web.UI.Page
>    {
>      protected void Page_Load(object sender, EventArgs e)
>      {
>         if (!Page.IsPostBack)
>         {
>             BindGrid();
>         }
>     }
> 
>     protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
>     {
>         if (e.Row.RowType == DataControlRowType.DataRow)
>         {
>             DropDownList objDropDownList = e.Row.FindControl("DropDownList1") as DropDownList;
>             objDropDownList.DataSource = CustomSorting.GetAll();
>             objDropDownList.DataTextField = "SOText";
>             objDropDownList.DataValueField = "SOID";
>             objDropDownList.DataBind();
> 
>             HiddenField objHiddenField = e.Row.FindControl("HiddenField1") as HiddenField;
>             string currSortOrder = (!string.IsNullOrEmpty(objHiddenField.Value) ? objHiddenField.Value :
>      "0");
>             objDropDownList.SelectedIndex = objDropDownList.Items.IndexOf(objDropDownList.Items.FindByValue(currSortOrder));
>         }
>     }
> 
>     protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
>     {
>         DropDownList objDropDownList = sender as DropDownList;
>         string test = objDropDownList.SelectedValue;
> 
>         GridViewRow currRow = objDropDownList.NamingContainer as GridViewRow;
>         Label objLabel = currRow.FindControl("Label1") as Label;
>         HiddenField objHiddenField = currRow.FindControl("HiddenField1") as HiddenField;
> 
>         List<TestClass> lstTestClass = PageData;
>         if (lstTestClass.Exists(x => x.SortOrder == Convert.ToInt32(test)))
>             lstTestClass.Find(x => x.SortOrder == Convert.ToInt32(test)).SortOrder =
>      Convert.ToInt32(objHiddenField.Value);
>         if (lstTestClass.Exists(x => x.ID == objLabel.Text))
>             lstTestClass.Find(x => x.ID == objLabel.Text).SortOrder = Convert.ToInt32(test);
>         PageData = lstTestClass;
>         BindGrid();
>     }
> 
>     protected List<TestClass> PageData
>     {
>         get
>         {
>             return (Session["_PageData"] == null) ? TestClass.GetAll() : Session["_PageData"] as List<TestClass>;
>         }
>         set
>         {
>             Session["_PageData"] = value;
>         }
>     }
>     protected void BindGrid()
>     {
>         GridView1.DataSource = PageData.OrderBy(x=>x.SortOrder);
>         GridView1.DataBind();
>     }
> }
> 
> public class CustomSorting
> {
>     public int SOID { get; set; }
>     public string SOText { get; set; }
> 
>     public static List<CustomSorting> GetAll()
>     {
>         return new List<CustomSorting>(){
>            new CustomSorting(){SOID=1,SOText="1"},
>            new CustomSorting(){SOID=2,SOText="2"},
>            new CustomSorting(){SOID=3,SOText="3"},
>            new CustomSorting(){SOID=4,SOText="4"},
>        };
>     }
> }
> 
> public class TestClass
> {
>     public string ID { get; set; }
>     public int SortOrder { get; set; }
> 
>    public static List<TestClass> GetAll()
>     {
>         return new List<TestClass>(){
>            new TestClass(){ID="001",SortOrder=1},
>            new TestClass(){ID="002",SortOrder=2},
>            new TestClass(){ID="003",SortOrder=3},
>            new TestClass(){ID="004",SortOrder=4}
>        }.OrderBy(x=>x.SortOrder).ToList();
>     }
> } 
> ```

**ASPX 变化：**

> ```
>  <asp:GridView ID="GridView1" runat="server"
>  OnRowDataBound="GridView1_RowDataBound" AutoGenerateColumns="False">
>     <Columns>
>         <asp:TemplateField HeaderText="ID">
>             <ItemTemplate>
>                 <asp:Label ID="Label1" runat="server" Text='<%# Eval("ID")%>'></asp:Label>
>             </ItemTemplate>
>         </asp:TemplateField>
>         <asp:TemplateField HeaderText="Sort Order">
>             <ItemTemplate>
>                 <asp:HiddenField ID="HiddenField1" runat="server"      Value='<%#Eval("SortOrder") %>' />
>                 <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True"
>  OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged"></asp:DropDownList>
>             </ItemTemplate>
>         </asp:TemplateField>
>     </Columns>
> </asp:GridView> 
> ```

# c# - 将 XML 元素读取到 ListView - 我如何将两个变量都传递给方法

> ID：14872779
> 
> 赞同：3
> 
> 时间：2013-02-14T10:32:35.590
> 
> 标签：c#, xml, winforms, listview, linq-to-xml

我有一个简单的 XML 文件，我需要从中提取 2 个元素的内部文本并将它们传递给在 ListView 的 2 列中列出文本的方法。我让它工作，以便它从元素 1 中提取文本，但我很难理解如何让它用来自第二个元素的数据填充第二列。

XML 文件：

```
<?xml version="1.0"?>
<Projects>
  <Project>
    <ProjectName>Test project1</ProjectName>
    <ProjectType>MSWORD</ProjectType>
  </Project>
  <Project>
    <ProjectName>MyNewProject</ProjectName>
    <ProjectType>SGML</ProjectType>
  </Project>
  <Project>
    <ProjectName>NewProject3</ProjectName>
    <ProjectType>XML</ProjectType>
  </Project>
  <Project>
    <ProjectName>Jake'sProject</ProjectName>
    <ProjectType>SGML</ProjectType>
  </Project>
  <Project>
    <ProjectName>P3_test</ProjectName>
    <ProjectType>SGML</ProjectType>
  </Project>
</Projects> 
```

加载和提取元素的方法：

```
private void openProjectToolStripMenuItem_Click(object sender, EventArgs e)
{
    Projects myProjects = new Projects(this); 

    myProjects.Show(); //displays the Form 2 (called Projects)

    XmlDocument xdoc = new XmlDocument();
    xdoc.Load("O:\\TestDaws\\projects.xml");

    string projList = "/Projects/Project";

    XmlNodeList xname = xdoc.SelectNodes(projList + "/ProjectName");
    XmlNodeList xtype = xdoc.SelectNodes(projList + "/ProjectType");

    foreach (XmlNode xNodeName in xname)
    {
        myProjects.buildProjectList(xNodeName.InnerText.ToString());
    }
} 
```

最后是我构建listView的第二种形式的方法：

```
public void buildProjectList(string project)
{
    ListViewItem projItem = new ListViewItem(project);

   // projItem.SubItems.Add("--");
    listView1.Items.Add(projItem);
} 
```

谁能告诉我我是如何做到这一点的？我可以看到我只是将其中一个元素（xname）传递给第二种形式的方法。但是我如何传递另一个？有单独的 foreach 吗？我需要做的是将 xname 和 xtype 变量都传递给第二种形式的方法，但我不知道最好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:42:19.967

In [EaterOfCorpses's answer](https://stackoverflow.com/a/14872956/2134311) change the following, it will work

```
XmlNodeList xprojects = xdoc.SelectNodes("//Project");

projectname = xProjectAttr.InnerText;
projecttype = xProjectAttr.InnerText; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:38:27.847

上定义了一个[索引器](http://msdn.microsoft.com/en-us/library/system.xml.xmlnodelist.itemof.aspx)[`XmlNodeList`](http://msdn.microsoft.com/en-us/library/system.xml.xmlnodelist.aspx)，因此您可以使用简单的 for：

```
for (int i=0; i<xname.Count; i++)
{
   XmlNode xNodeName = xname[i];
   XmlNode xNodeType = xtype[i];

   myProjects.buildProjectList(xNodeName.InnerText.ToString(), 
                               xNodeType.InnerText.ToString());
} 
```

此代码假定`xname`and`xtype`列表将始终是并行的。

当然，您应该将其更改为`buildProjectList`：

```
public void buildProjectList(string project, string type)
{
    ListViewItem projItem = new ListViewItem(project+"-"+type);

    listView1.Items.Add(projItem);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:42:26.793

我认为这是解决方案，这也更安全，因为您没有不同数组中的类型和名称

```
XmlNodeList xprojects = xdoc.SelectNodes(projList);

foreach (XmlNode xProject in xprojects)
{
    string projectname = "";
    string projecttype = "";
    foreach(XmlNode xProjectAttr in xProject){
        switch(xProjectAttr.Name){
            case "ProjectName":
                projectname = xProjectAttr.Value;
                break;
            case "ProjectType":
                projecttype = xProjectAttr.Value;
                break;
        }
    }
    myProjects.buildProjectList(projectname,type);
} 
```

你的其他功能将是

```
public void buildProjectList(string project,string type)
{
   ListViewItem projItem = new ListViewItem(project);

   projItem.SubItems.Add(type);
   listView1.Items.Add(projItem);
} 
```

**编辑**

我编辑了一下。我对 XPath 不好，所以我认为这是问题所在

# python - 如何停止正在运行的 python 脚本

> ID：14872782
> 
> 赞同：1
> 
> 时间：2013-02-14T10:32:39.343
> 
> 标签：python, pyqt

我用 PyQt 创建了一个 GUI，它实现了“开始”和“停止”按钮。当我单击“开始”时，会启动一个巨大的 python 脚本。“停止”的功能必须结束这个 python 脚本，但是当我启动脚本时它运行并且我无法停止它。我什至无法在 GUI 上激活其他任何东西，也没有任何反应。所以我必须等待很长时间，直到 python 脚本结束。如何实现这些方法，以便即使在需要时也可以使用“停止”按钮中断脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:36:44.380

由于您在 QButton.clicked 信号中执行所有操作，因此您的 GUI 会锁定，直到您退出该功能。

我在一个小项目中使用的解决方案是将它分成 GUI 和工作进程。

使用[multiprocessing.Process](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.Process)进行处理并让它通过[multiprocessing.Pipe](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.Pipe)发送结果。工人还有第二个管道来接收命令（我的项目只使用一个命令 - 退出）

在 GUI 中，您创建 2 个管道：一个用于结果，一个用于命令。使用两个管道初始化工作人员并启动该过程。下一步是让 QTimer 轮询管道以获取结果并显示它们。

通过这样做，您的 UI 在后台进行计算时保持响应。

# r - 如何显示所有箱线图标签

> ID：14872783
> 
> 赞同：18
> 
> 时间：2013-02-14T10:32:42.747
> 
> 标签：r, boxplot

我创建了一个箱线图，左边的数据是连续变量，右边的数据有大约 10 个唯一选项。当我创建箱线图时，我看不到标签。如何让它显示所有标签，可能是垂直的？

```
boxplot(data$Rate ~ as.factor(data$Purpose)) 
```

我环顾四周，无法弄清楚我想要遵循什么。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-14T10:40:15.213

您可以`las=2`向函数添加参数以`boxplot()`使所有标签垂直于轴。

```
df<-data.frame(Rate=rnorm(100),Purpose=rep(letters[1:10],each=10))
boxplot(df$Rate~df$Purpose,las=2) 
```

如果您的标签名称很长，那么您还应该调整绘图边距。

```
par(mar=c(7,5,1,1))
boxplot(df$Rate~df$Purpose,las=2) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-14T10:40:24.597

当您想要精确指定轴标签时，我使用的策略如下：

```
##Generate a boxplot without axes
boxplot(count ~ spray, data = InsectSprays, axes=FALSE)

##Add in a y-axis
axis(2, seq(0,25, 5), seq(0, 25, 5))

##Add in an x-axis
##las=2 changes the orientation
axis(1, 1:6, paste("Big Label", 1:6), las=2) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-14T10:40:49.647

R FAQ 中有一个关于如何在基本图形中旋转轴标签的条目：

[http://cran.r-project.org/doc/FAQ/R-FAQ.html#How-can-I-create-rotated-axis-labels_003f](http://cran.r-project.org/doc/FAQ/R-FAQ.html#How-can-I-create-rotated-axis-labels_003f)

但我个人更喜欢使用`ggplot2`，这使得它更容易：

```
data <- data.frame(Rate=rnorm(1:1000),Purpose=sample(c("foo","bar","baz"),1000,replace=TRUE))
ggplot(data, aes(x=factor(Purpose), y=Rate)) + geom_boxplot() + theme(axis.text.x  = element_text(angle=90, vjust=0.5)) 
```

![在此处输入图像描述](../Images/af321145e09ff5ac38529566b282b337.png)

# c# - 如何映射对象数据类型

> ID：14872784
> 
> 赞同：0
> 
> 时间：2013-02-14T10:32:43.150
> 
> 标签：c#, nhibernate

我的域对象具有对象数据类型的实体

```
public virtual object ProviderUserKey {get; set;} 
```

我正在使用代码映射方法，所以我尝试像这样的任何其他数据类型进行映射

```
Property(x => x.ProviderUserKey); 
```

但我收到了这个错误

> {“属性映射的列数错误：Model.Account.ProviderUserKey 类型：对象”}

那么如何解决这个问题呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:42:47.423

不要在实体类中使用对象数据类型。`Nhibernate`不知道如何将对象映射到有效的数据库类型。

而不是将您的转换`ProviderUserKey`为`Guid`或更改它并使用明确的数据类型，如`Guid ProviderUserKey`.

# git - 如何确保所有内容都已使用 git 推送？

> ID：14872785
> 
> 赞同：7
> 
> 时间：2013-02-14T10:32:43.683
> 
> 标签：git, command-line

我喜欢从我的计算机中删除我没有处理的存储库。我检查了一些东西，我正在处理它，当我完成后，我推送所有内容并从我的计算机中删除该文件夹。这样一来事情就保持整洁，很容易了解我实际在做什么，而且我知道我没有任何本地内容等待推送。

但...

在删除我的本地仓库之前，我想确保所有内容都已推送到我的遥控器。我经历的过程通常是这三个步骤：

```
git st    # check if there's something I haven't committed

git stash list    # check if I've stashed something

git log --oneline --decorate --all    # check if all branches have been pushed 
```

我想简化一下。尤其是最后一步，这需要我查看所有分支，看看本地分支和远程分支是否同步。确切地说，我什至可能需要向下滚动一点以确保我没有遗漏任何东西。

我正在考虑编写一个脚本来自动完成所有这些，但也许已经有解决方案了？（我认为我不必强调我希望在命令行上完成此操作，而不是使用任何花哨的 GUI：D）

你们如何处理这个问题？你检查你没有忘记任何东西的过程是什么？你用什么工具？欢迎所有想法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T10:48:07.130

要知道本地和远程分支是否同步，您需要比较 HEAD 修订的哈希值。

执行时，`git branch -v -a`您将收到本地和远程分支的列表以及相应 HEAD 修订的哈希：

```
$ git branch -v -a
  develop                             44e61b5 <Commit message>
  feature/CodeContracts               c26edee <Commit message>
* feature/Foo                         3a40e22 <Commit message>
  master                              e68e28a <Commit message>
  remotes/origin/HEAD                 -> origin/master
  remotes/origin/develop              44e61b5 <Commit message>
  remotes/origin/feature/Bar          be9666c <Commit message>
  remotes/origin/master               e68e28a <Commit message> 
```

可以很容易地看到，develop 和 master 在本地和远程都是最新的，本地`feature/Bar`不存在也不远程存在，所以在删除本地存储库之前应该推送它们。`feature/CodeContracts``feature/Foo`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T14:35:01.487

基于 Daniel Hilgarth 的回答，我推荐以下步骤

首先，运行`git fetch --all`以确保您拥有来自所有上游存储库的最新更改

然后运行`git branch -vva`-（注意双-v）。这将打印所有分支（`a`），以及每个分支的最新提交，以及上游分支的信息（如果设置了上游）。

结果将如下所示：

```
 br1                   88006cd Branch
  br2                   0b68b6f [origin/br2] New commit
  c                     9ed6569 Dummy
* master                f4664d4 [origin/master: ahead 1] my commit
  remotes/origin/HEAD   -> origin/master
  remotes/origin/br3    9ed6569 Dummy
  remotes/origin/master 9ed6569 Dummy 
```

您可以看到您有四个本地分支（master、c、br1、br2）。master 和 br2 有上游分支。br2 已完全推送，master 有一个尚未推送的本地提交（“提前 1”）。

br1 和 c 是没有上游信息的本地分支。对于这些，您必须检查并决定要做什么——它们可能完全合并，并且是多余的；或者你可能想把它们推到上游；或者您可能想在本地合并它们，例如掌握，然后推送。要查看未完全合并到本地 master 的分支，请使用`git branch --no-merged master`. 在本例中，这将打印“br1 br2”（因为分支 c 是 master 的祖先）。

最后，您可以看到 br2 列出了上游分支 origin/br2，但它不存在。这意味着远程存储库已删除此分支（并且您使用“git remote prune”或“git fetch -p”获取了此删除）。同样，您必须决定是要丢弃本地提交，还是重新推送或合并它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:52:58.367

反复删除您的存储库是一件坏事。例如，[**Linux**](http://github.com/torvalds/linux)存储库是 126 MB；你可以看到它怎么会很快变老。也许这个脚本会有所帮助。它检查目录中的所有文件夹（在这种情况下`/opt`）并为您`git status`提供每个文件夹。

```
#!/bin/sh
warn ()
{
  printf '\e[1;35m%s\e[m\n' "$*"
}
c ()
{
  printf '\ec'
}
compgen -d /opt/ | while read k
do
  c
  cd $k
  git status
  warn $k
  read </dev/tty
done 
```

# java - vaadin 焦点替换组件

> ID：14872789
> 
> 赞同：1
> 
> 时间：2013-02-14T10:32:58.927
> 
> 标签：java, vaadin

我在按钮单击侦听器中使用 replaceComponent(oldButton, newTextField) ，之后该操作按钮被文本字段替换，但我必须单击它才能输入文本。

我想单击按钮并将文本写入文本字段而不单击文本字段。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:45:11.540

[您需要使用AbstractField#focus()](https://vaadin.com/api/com/vaadin/ui/AbstractField.html#focus%28%29)方法请求关注新的 TextField ，即

```
replaceComponent(oldButton, newTextfield)
newTextField.focus(); 
```

# ios - iOS 应用附加内容下载

> ID：14872790
> 
> 赞同：2
> 
> 时间：2013-02-14T10:33:00.320
> 
> 标签：ios, download, storage

我有一个 iOS 应用程序，其中包含大量图像和声音，因此构建大小正在迅速增长，不再适合 3G 下载的 50MB 限制。我想将这些图像和声音上传到在线服务器并按需从应用程序下载它们。任何人都可以推荐一些在线存储（例如 Amazon S3）并提供有关此问题的最佳实践建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:17:03.107

我使用网络解决方案将我的文件上传到“无限站点”，但是，如果您不想支付此类费用，只需将照片上传到照片存储桶或其他东西，然后右键单击它们并单击“获取图像地址”然后使用此 URL 将图像下载到您的应用程序。（检查以确保它不违反他们的使用条款，但我不知道是否违反！）

至于最佳实践，我可能会使用最糟糕的方法，即在屏幕外的 UIWebView 中显示它并使用 CoreGraphics 对其进行拍照，然后保存该图片哈哈！我会给你留下这个链接，以便为你的问题的后半部分提供更好的解决方案，即“最佳实践”：[ios store URL images in offline mode(not connected to internet)](https://stackoverflow.com/questions/11574403/ios-store-url-images-in-offline-modenot-connected-to-internet)

# jax-ws - JAX-WS - 如何避免注释

> ID：14872791
> 
> 赞同：1
> 
> 时间：2013-02-14T10:33:07.977
> 
> 标签：jax-ws

WSGEN——SEI 类是否必须用@Webservice 注释？有没有办法避免注释java类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:39:49.603

如果选择自下而上的方法，显然不是。SEI 是`wsgen`工具的强制参数，您必须指定特定的 Java 类**是**SEI。[Java EE 6 教程](http://docs.oracle.com/cd/E19798-01/821-1841/bnbos/index.html)中有关 SEI 的摘录：

*   类必须使用 the`javax.jws.WebService`或注解进行`javax.jws.WebServiceProvider`注解。

也可以看看：

*   [在基于 SEI 的 JAX-WS Web 服务中公开方法](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.express.iseries.doc/info/iseriesexp/ae/twbs_devjaxws_exposewebmethod.html)
*   [wsgen](http://docs.oracle.com/javase/6/docs/technotes/tools/share/wsgen.html)

# grails - 我应该在我的 gsp 中删除通配符域类导入吗

> ID：14872803
> 
> 赞同：1
> 
> 时间：2013-02-14T10:33:48.427
> 
> 标签：grails

我正在查看使用 grails 2.1.0 的现有应用程序。

我在主布局视图中注意到以下内容（所有其他视图都使用此布局）。

```
<%@ page import="com.mysite.domains.*" %> 
```

此文件夹下的一些域类在整个应用程序的视图中直接使用。但它们肯定都不会在视图中使用或不需要。例如**类别**：

```
<g:select name='category' value="${beanInstance?.category?.categoryKey}"
              from='${Category.findAllByActive(true)}' optionValue="name"
              optionKey="categoryKey"></g:select> 
```

Grails 是否足够聪明，只有在知道它们在当前视图中使用时才导入它们？

或者我应该删除这个通配符导入并单独指定每个必需的类？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:09:13.750

GSP 最终被编译成扩展 org.codehaus.groovy.grails.web.pages.GroovyPage 的类。页面导入指令被翻译成常规包成员导入指令。Import 仅告诉编译器在哪里查找符号，因此导入包中的所有类不会有特殊的开销。

# android - 方法 distanceTo(double) 未定义

> ID：14872809
> 
> 赞同：0
> 
> 时间：2013-02-14T10:34:06.707
> 
> 标签：android, object, locationmanager

我有一个问题要从我的 2 个地理点获得正确的方法来获取 distanceTo。如何让它工作？

来自 gps 类：

```
double latitude; // latitude
String mlat;

    latitude = location.getLatitude();
    mlat = String.valueOf(latitude); 
```

从列表视图：

```
 // Get distance
                        String mReportA;
                        double mLocB;
                        int distance;
                        mReportA = e.getString("lat");
                        mReportA = e.getString("lon");
                        mLocB = gps.latitude;
                        mLocB = gps.longitude;
                        distance = mReportA.distanceTo(mLocB); 
```

Eclipse 中的错误：对于我从 json`distanceTo(double)`获得的 String 类型，该方法未定义`e.getString("lat");`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:39:49.130

您可以将纬度和经度值**加倍**，然后只计算距离。所以不要将双精度值更改为字符串。

```
Location locationA = new Location("point A");

locationA.setLatitude(orginlat);
locationA.setLongitude(orginlong);

Location locationB = new Location("point B");

locationB.setLatitude(tolat);
locationB.setLongitude(tolong);

Float distance = locationA.distanceTo(locationB); 
```

**字符串**转换为**double**，

```
public static double parseDoubleSafely(String str) {
    double result = 0;
    try {
        result = Double.parseDouble(str);
    } catch (NullPointerException npe) {
        //sysout found null
        return 0; 
    } catch (NumberFormatException nfe) {
        //sysout NFE 
        return 0; 
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:38:45.480

```
// Here is the code to find out the distance between two locations 

float distance;
Location locationA = new Location("A");  

locationA.setLatitude(latA);  
locationA.setLongitude(lngA);  

Location locationB = new Location("B");  

locationB.setLatitude(latB);  
LocationB.setLongitude(lngB);  

distance = locationA.distanceTo(locationB); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T10:44:07.843

要计算两个地理点之间的距离，您可以按照以下示例进行操作。

```
double currentLatitude = location.getLatitude();
double currentLongitude = location.getLongitude();

double endLatitude = lat;
double endLongitude = lng;

float[] results = new float[3];
Location.distanceBetween(currentLatitude, currentLongitude,endLatitude, endLongitude, results);

BigDecimal bd = new BigDecimal(results[0]);// results in meters
BigDecimal rounded = bd.setScale(2, RoundingMode.HALF_UP);
double values = rounded.doubleValue(); 
```

**编辑**

```
if (values > 1000) {
 values = (Double) (values * 0.001f);// convert meters to Kilometers
 bd = new BigDecimal(values);
 rounded = bd.setScale(2, RoundingMode.HALF_UP);
 values = rounded.doubleValue();
} 
```

# mysql - mysql一致读：事务一致快照

> ID：14872810
> 
> 赞同：1
> 
> 时间：2013-02-14T10:34:09.670
> 
> 标签：mysql, transactions, snapshot

我有一个数据库，其中包含几个要从中读取的 InnoDB 表，然后将数据转储为 XML 格式。这样的 XML 将表示一个对象及其所有相关对象。

我不希望在我的读取过程（SELECT、SELECT、bad INSERT、SELECT...）中间执行任何 INSERT，因为这会导致数据不一致。我应该使用哪种类型的交易？我无法清楚地看到 和 之间的`START TRANSACTION`区别`START TRANSACTION WITH CONSISTENT SNAPSHOT`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-28T21:38:06.940

对于 INNODB 的事务快照来说，这似乎是一个极好的案例。你是对的，WITH CONSISTENT SNAPSHOT 之间的区别并不重要——它只控制快照是在开始事务时拍摄还是在第一次读取时拍摄。

重要的是您必须在 REPEATABLE_READ 隔离级别执行。这是默认级别。

其他程序可以根据需要插入或更新尽可能多的记录，您仍然可以从快照中获取版本。

见[http://dev.mysql.com/doc/refman/5.0/en/innodb-consistent-read.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-consistent-read.html)

# java - jacorb 中的 InvalidName 异常

> ID：14872811
> 
> 赞同：2
> 
> 时间：2013-02-14T10:34:20.310
> 
> 标签：java, exception, corba, jacorb

我正在使用 Jacorb 进行 corba 实现。我已经在端口 900 上启动了 NS。当我尝试启动服务器时，出现以下异常

```
D:\eclipse_workspace\WorkSpace\corba\bin>jaco  hello.MyServer -DORBInitRef.NameService=jacorb::localhost:900
org.jacorb.orb.ORB
Feb 14, 2013 4:00:07 PM org.jacorb.config.JacORBConfiguration <init>
WARNING: no properties found for configuration jacorb
Feb 14, 2013 4:00:07 PM org.jacorb.orb.ORBSingleton <init>
INFO: created ORBSingleton
Exception in thread "main" org.omg.CORBA.ORBPackage.InvalidName:    IDL:omg.org/CORBA/ORB/InvalidName:1.0
    at org.jacorb.orb.ORB.resolve_initial_references(ORB.java:1371)
    at hello.MyServer.main(MyServer.java:15) 
```

代码如下

```
public static void main(String[] args) throws Exception{
    Properties props = new Properties();
    props.setProperty("ORBInitRef","NameService=jacorb::localhost:900");
    System.out.println(System.getProperty("org.omg.CORBA.ORBClass"));
    org.omg.CORBA.ORB orb = org.omg.CORBA.ORB.init(args, props);

    org.omg.CORBA.Object o = orb.resolve_initial_references("NameService");
    NamingContextExt nc = NamingContextExtHelper.narrow( o );

} 
```

有人可以告诉这里有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:34:00.603

NameService 引用必须是对包含 IOR 的文件的引用，例如，`file://tmp/NS_Ref`或 URL，例如，`http://www.testme.not/NS_Ref`或者只是一个 corbaloc/corbaname URL，例如，`corbaloc:iiop:1.2@host1:3075/NameService`

最后一种是最常见的。例如，您可以将其缩短为`corbaloc::localhost:900/NameService`

有关 corbaloc 的更多信息，[请访问 http://www.ciaranmchale.com/corba-explained-simply/the-corbaloc-and-corbaname-urls.html](http://www.ciaranmchale.com/corba-explained-simply/the-corbaloc-and-corbaname-urls.html)

# php - 使用应用程序 REST 的不同处理程序捕获异常

> ID：14872816
> 
> 赞同：5
> 
> 时间：2013-02-14T10:34:30.630
> 
> 标签：php, symfony, exception-handling, silex

## 问题

我正在使用**Silex**构建一个小型应用程序。它分为 REST 应用程序和网站。（[两个控制器](http://silex.sensiolabs.org/doc/organizing_controllers.html)，同一个应用程序）。该网站安装了[自己的自定义错误处理程序](http://silex.sensiolabs.org/doc/usage.html#error-handlers)，它返回一个用户友好的 html 页面。问题在于，在部分专用 REST 应用程序中，我应该以某种方式处理异常以返回类型 [json] 和与错误处理程序的自定义网站不同的内容。

## 使用 Symfony2

这个论点也可以应用于 Symfony2，我也想有可能的解决方案！

## Silex 的第一个解决方案

将方法包装在 try-catch 块中，以便将异常重新抛出到处理程序。

```
$app->get('/api/show-list', function() use($app){
    try {
        $show = // db query, etc.
        return $app->json(array('show' => $show), 200);
    } catch (Exception $e) {
        throw new MyException;
    }
});

$app->error(function (MyException $e, $code) {
    // error api
}); 
```

问题是，如果我的控制器抛出异常，将使用默认错误处理程序。一些技巧？Symfony 呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T10:03:39.697

我一直在我的 Silex RESTful 应用程序中使用以下内容以 json 格式返回错误：

```
$app->error(function (\Exception $e, $code) use($app) {
    return $app->json(array("error" => $e->getMessage()),$code);    
}); 
```

不确定这是否是正确的方法，但它对我有用。

这记录在 Silex 网站上： [http ://silex.sensiolabs.org/doc/usage.html#error-handlers](http://silex.sensiolabs.org/doc/usage.html#error-handlers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T00:29:26.710

在 Symfony2 上，您可以使用 ExceptionHandler。在 Exception 上，您有堆栈跟踪，因此您可以确定它被抛出的位置。

此外，在 Symfony2 中，您可以根据预期的格式进行自定义。[它的文档中有](http://symfony.com/doc/2.1/cookbook/controller/error_pages.html)很好的解释。

例如，如果您将 ExceptionController 替换为您的一个，第三个参数将显示预期的格式：

[关于在何处更改 ExceptionController 的参考](http://symfony.com/doc/2.1/reference/configuration/twig.html#config-twig-exception-controller)

[异常控制器 API](http://api.symfony.com/2.1/Symfony/Bundle/TwigBundle/Controller/ExceptionController.html)

# python - 从映射列表中取出所有值

> ID：14872817
> 
> 赞同：1
> 
> 时间：2013-02-14T10:34:34.200
> 
> 标签：python, list, map

我想在下面更改

```
[{'course_id': '8'}, {'course_id': '16'}] 
```

至

```
['8','16'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:36:26.517

使用列表推导：

```
[x['course_id'] for x in data] 
```

或使用[**`operator.itemgetter`^([docs])**](http://docs.python.org/2/library/operator.html#operator.itemgetter)：

```
map(itemgetter('course_id'), data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:50:17.060

根据 phant0m 的回答，这是两种变体的速度比较：

```
import timeit
import operator
setup = "data = [{'course_id': '8'}, {'course_id': '16'}]; import operator"

print timeit.timeit( "[x['course_id'] for x in data]", setup, number=1000000 )
# [x['course_id'] for x in data]
# Result: 0.219176683582

print timeit.timeit( "map(operator.itemgetter('course_id'), data)", setup, number=1000000 )
# map(operator.itemgetter('course_id')
# Result: 0.476915375646 
```

字典越长，差异就越小：

```
# [x['course_id'] for x in data]
# Result: 1.65939845357

# map(operator.itemgetter('course_id')
# Result: 1.85912657123 
```

这可能是函数调用的开销。

# bash - 带数字的 Grep

> ID：14872819
> 
> 赞同：0
> 
> 时间：2013-02-14T10:34:37.913
> 
> 标签：bash, grep, design-patterns

我怎么能用`grep`数字。我有以下数据

```
[240465] SERVICE ALERT: localhost;demo-jms2:Critical Services;CRITICAL;SOFT;2;Disk Space,OutConnectorResponse-MCASMS,OutConnectorResponse-SPONSORED-SMS,
[240465] SERVICE EVENT HANDLER: localhost;demo-jms2:Critical Services;CRITICAL;SOFT;1;notify-service-by-email 
```

我想要`grep`这个带有数字“2”的数据，它是“SOFT”之后的一个参数。在这里我的问题是当我用 2 grep 时我得到了两条线，因为 2 包含在第二行的时间戳中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:40:38.477

已经有很多答案建议修复您的`grep`表情。*如果您以交互方式处理问题，那么这可能是正确的做法，并且立即*缩小结果范围的快速破解对您来说就足够了。

如果您正在编写脚本，我会推荐类似以下`awk`命令的内容：

```
awk -F';' '{if ($5==2) print}' 
```

或者@sudo_O 在评论中提供的更具可读性的等效项：

```
awk -F';' '$5==2' 
```

首先，我们必须从您的示例中重建您想要的*规范。*您处于可靠执行此操作的最佳位置，但*看起来*您希望`2`在分号分隔字段的第五个字段中找到。这就是上面命令的作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:37:02.927

只需使用模式`;2;`

```
$ grep ';2;' file
[240465] SERVICE ALERT: localhost;demo-jms2:Critical Services;CRITICAL;SOFT;2;... 
```

或者，如果您只想匹配`2`以下内容，请`SOFT`使用`;SOFT;2;`

```
$ grep ';SOFT;2;' file
[240465] SERVICE ALERT: localhost;demo-jms2:Critical Services;CRITICAL;SOFT;2;... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:36:23.677

更多上下文的 Grep：

```
 grep "SOFT;2;" data 
```

注意引号，否则“;” 将由 shell 解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T10:36:34.207

尝试这样做：

```
grep 'SERVICE.*ALERT.*SOFT;2' file 
```

我为单一性添加了更多模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T10:47:47.807

```
grep -Po "(?<=SOFT;)\d+" 
```

与您的数据

```
kent$  echo "[240465] SERVICE ALERT: localhost;demo-jms2:Critical 
Services;CRITICAL;SOFT;2;Disk Space,OutConnectorResponse-MCASMS,OutConnectorResponse-SPONSORED-SMS,
[240465] SERVICE EVENT HANDLER: localhost;demo-jms2:Critical Services;CRITICAL;SOFT;1;notify-service-by-email"|grep -Po "(?<=SOFT;)\d+"
2
1 
```

# javascript - 未在包含的 Facelets 页面中调用 Java 脚本

> ID：14872822
> 
> 赞同：0
> 
> 时间：2013-02-14T10:34:56.160
> 
> 标签：javascript, jsf, facelets, jsf-1.2

我在一个（主）Facelets 页面中有以下代码，

```
<h:panelGroup rendered="true">  
            <ui:insert>
                <ui:include src="/includeSecondPage.xhtml" />
           </ui:insert>
</h:panelGroup> 
```

以下是 includeSecondPage.xhtml 页面中的内容，

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core">
<head>
<script type="text/javascript">
/* <![CDATA[ */

   function myScript () 
   {
        alert("Inside myScript");
   }

   myScript();

    /* ]]> */
</script>
</head>
<f:view>
<body>

<h:form id="secondForm">
<ui:composition>

<h:outputText value="This panel is called using Component Control Component"></h:outputText>

</ui:composition>
</h:form>
</body>
</f:view>
</html> 
```

我的 Java 脚本没有在我的 includeSecondPage.xhtml 中被调用。我的第一个（主）页面中没有弹出警报框，其中包括第二个页面。Java Script 控制台中没有 Java Script 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:34:10.450

在包含期间，外部的任何内容都会`<ui:composition>`被丢弃。外部的任何内容`<ui:composition>`仅由 Dreamweaver 等可视化编辑器使用，并且实际上应仅以这种方式表示“填充”内容，以便“正确”可视化表示包含内容。如果您通过右键单击在浏览器中*查看源代码*仔细查看了 JSF 生成的 HTML 输出，您会注意到这些部分在 HTML 输出中完全不存在。

将包含内容放入`<ui:composition>`. 如果您不使用可视化编辑器，那么也只需摆脱外部的任何内容`<ui:composition>`。以下是*整个*包含文件的样子：

```
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <script type="text/javascript">
        // <![CDATA[

        function myScript () {
            alert("Inside myScript");
        }

        myScript();

        // ]]>
    </script>

    <h:outputText value="This panel is called using Component Control Component" />
</ui:composition> 
```

### 也可以看看：

*   [如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets/4793959#4793959)

# asp.net-mvc - 弹出编辑模式下的多列

> ID：14872825
> 
> 赞同：4
> 
> 时间：2013-02-14T10:35:07.793
> 
> 标签：asp.net-mvc, razor, kendo-ui, kendo-grid

我认为弹出编辑模式是最好的编辑模式，但是对于较大的模型，弹出窗口会变得很长，看起来不太好。

我已经找到了解决方案，我很好奇您对此解决方案的想法/反馈/增强功能。

我创建了两个自定义属性：

```
public class NumberOfColumnsAttribute : Attribute, IMetadataAware
{
    private readonly int _numberOfColumns;

    public NumberOfColumnsAttribute(int numberOfColumns)
    {
        _numberOfColumns = numberOfColumns;
    }

    public void OnMetadataCreated(ModelMetadata metadata)
    {
        if (!metadata.AdditionalValues.ContainsKey("NumberOfColumns"))
        {
            metadata.AdditionalValues.Add("NumberOfColumns", _numberOfColumns);
        }
    }
}

public class ShowInColumnAttribute : Attribute, IMetadataAware
{
    private readonly int _column;

    public ShowInColumnAttribute(int column)
    {
        _column = column;
    }

    public void OnMetadataCreated(ModelMetadata metadata)
    {
        if (!metadata.AdditionalValues.ContainsKey("ShowInColumn"))
        {
            metadata.AdditionalValues.Add("ShowInColumn", _column);
        }
    }
} 
```

然后使用编辑模型上方的 [NumberOfColumns( *m* )] 属性并使用属性上方的 [ShowInColumn( *n* )] 属性（如果未应用任何属性，则假定 n=1）。

我在 Views/Shared/EditorModels/ 中创建了一个 Object.cshtml 文件，如下所示。

```
@if (ViewData.TemplateInfo.TemplateDepth > 1)
{
    @ViewData.ModelMetadata.SimpleDisplayText
} else {

    for (var i = 1; i <= (int)(!ViewData.ModelMetadata.AdditionalValues.ContainsKey("NumberOfColumns") ? 1 : ViewData.ModelMetadata.AdditionalValues["NumberOfColumns"]);i++)
    {
        <div class="editor-column">
        @foreach (var prop in ViewData.ModelMetadata.Properties.Where(pm => pm.ShowForEdit && !ViewData.TemplateInfo.Visited(pm) && ((int)(!pm.AdditionalValues.ContainsKey("ShowInColumn") ? 1 : pm.AdditionalValues["ShowInColumn"])) == i))
        {
            if (prop.HideSurroundingHtml) {
                @Html.Editor(prop.PropertyName)
            } else {
                <div class="editor-label">
                    @Html.Label(prop.PropertyName)
                    @(prop.IsRequired ? "*" : "")
                </div>
                <div class="editor-field">
                    @Html.Editor(prop.PropertyName)
                    @Html.ValidationMessage(prop.PropertyName, "*")
                </div>
            }
        }
        </div>
    }
    <div class="editor-seperator"></div>
} 
```

以及以下几行 CSS：

```
.k-edit-form-container {
    width: auto;
}
.editor-column {
    width: 400px;
    float: left;
}
.editor-seperator {
    clear: both;
} 
```

你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-10T00:06:51.257

我想，这会简单得多。请在宽屏上运行此脚本。

```
 var crudServiceBaseUrl = "//demos.telerik.com/kendo-ui/service",
                        dataSource = new kendo.data.DataSource({
                            transport: {
                                read:  {
                                    url: crudServiceBaseUrl + "/Products",
                                    dataType: "jsonp"
                                },
                                update: {
                                    url: crudServiceBaseUrl + "/Products/Update",
                                    dataType: "jsonp"
                                },
                                destroy: {
                                    url: crudServiceBaseUrl + "/Products/Destroy",
                                    dataType: "jsonp"
                                },
                                create: {
                                    url: crudServiceBaseUrl + "/Products/Create",
                                    dataType: "jsonp"
                                },
                                parameterMap: function(options, operation) {
                                    if (operation !== "read" && options.models) {
                                        return {models: kendo.stringify(options.models)};
                                    }
                                }
                            },
                            batch: true,
                            pageSize: 20,
                            schema: {
                                model: {
                                    id: "ProductID",
                                    fields: {
                                        ProductID: { editable: false, nullable: true },
                                        ProductName: { validation: { required: true } },
                                        UnitPrice: { type: "number", validation: { required: true, min: 1} },
                                        Discontinued: { type: "boolean" },
                                        UnitsInStock: { type: "number", validation: { min: 0, required: true } }
                                    }
                                }
                            }
                        });

                    $("#grid").kendoGrid({
                        dataSource: dataSource,
                        pageable: true,
                        height: 550,
                        toolbar: ["create"],
                        columns: [
                            { field:"ProductName", title: "Product Name" },
                            { field: "UnitPrice", title:"Unit Price", format: "{0:c}", width: "120px" },
                            { field: "UnitsInStock", title:"Units In Stock", width: "120px" },
                            { field: "Discontinued", width: "120px" },
                            { command: ["edit", "destroy"], title: "&nbsp;", width: "250px" }],
                        editable: "popup",
                        edit: fnMultipleLayoutForm
                    });

function fnMultipleLayoutForm(){

    $(".k-edit-form-container").prepend('<div class="column1" style="display: inline-block; float: left;padding-right:30px"></div><div class="column2" style="display: inline-block;float: left;padding-right:30px;"></div>');

    $(".k-edit-form-container").children(".k-edit-label, .k-edit-field").slice(0, parseInt($(".k-edit-form-container").children(".k-edit-label, .k-edit-field").length / 2)).appendTo(".column1");

    $(".k-edit-form-container").children(".k-edit-label, .k-edit-field").appendTo(".column2");

    $(".k-edit-form-container").css("width", "auto");

    $('.k-window').css({ top: '50%', left: '50%', margin: '-' + ($('.k-window').height() / 2) + 'px 0 0 -' + ($('.k-window').width() / 2) + 'px' });

  };
```

```
<script src="//kendo.cdn.telerik.com/2015.3.1111/js/jquery.min.js"></script>
<script src="//kendo.cdn.telerik.com/2015.3.1111/js/kendo.all.min.js"></script>
      <link rel="stylesheet" href="//kendo.cdn.telerik.com/2015.3.1111/styles/kendo.common.min.css" />
<link rel="stylesheet" href="//kendo.cdn.telerik.com/2015.3.1111/styles/kendo.default.min.css" />

   <div id="grid"></div>
```

# c# - 将一组控件添加到列表

> ID：14872828
> 
> 赞同：0
> 
> 时间：2013-02-14T10:35:18.507
> 
> 标签：c#, iteration

我正在尝试将 3 个 TextBox 控件的值添加到列表中，问题是这些控件是通过单击按钮以编程方式添加的。我不知道如何将 3 个文本框组合在一起，以便将它们的值添加到列表中。

这是一些代码：

按钮点击添加控件：

```
protected void Button_Add_Click(object sender, EventArgs e)
{
    int count = 0;
    if (ViewState["count"] != null)
    {
        count = (int)ViewState["count"];
    }
    count = PlaceHolder_ForEntries.Controls.Count + 1;
    ViewState["count"] = count;
    createcontrols();
} 
```

添加控件的方法

```
protected void createcontrols()
{
    int count = 0;
    if (ViewState["count"] != null)
    {
        count = (int)ViewState["count"];
    }
    while (PlaceHolder_ForEntries.Controls.Count < count)
    {
        TextBox TextBox_Name = new TextBox();
        TextBox TextBox_MemberNo = new TextBox();
        TextBox TextBox_Points = new TextBox();
        TextBox_Name.Attributes.Add("placeholder", "Navn");
        TextBox_Name.ID = "TextBox_Name" + PlaceHolder_ForEntries.Controls.Count.ToString();
        TextBox_Name.CssClass = "input-small";
        TextBox_MemberNo.Attributes.Add("placeholder", "Medlemsnr.");
        TextBox_MemberNo.ID = "TextBox_MemberNo" + PlaceHolder_ForEntries.Controls.Count.ToString();
        TextBox_MemberNo.CssClass = "input-small";
        TextBox_Points.Attributes.Add("placeholder", "Point");
        TextBox_Points.ID = "TextBox_Points" + PlaceHolder_ForEntries.Controls.Count.ToString();
        TextBox_Points.CssClass = "input-small";
        PlaceHolder_ForEntries.Controls.Add(TextBox_Name);
        PlaceHolder_ForEntries.Controls.Add(TextBox_MemberNo);
        PlaceHolder_ForEntries.Controls.Add(TextBox_Points);
        PlaceHolder_ForEntries.Controls.Add(new LiteralControl("<br />"));
    }
} 
```

最后，在保存按钮上运行的代码单击，将项目添加到列表中：

```
public struct content
{
    public string name;
    public string memberNo;
    public int points;
}

List<content> rows = new List<content>();

protected void LinkButton_Submit_Attendees_Click(object sender, EventArgs e)
{
    foreach (Control item in PlaceHolder_ForEntries.Controls)
    {
        if (item is TextBox)
        {
            string txt = item.ID.ToString(); // String to run RegEx on
            string re1 = ".*?"; // Non-greedy match on filler
            string re2 = "(\\d+)";  // Integer Number 1

            Regex r = new Regex(re1 + re2, RegexOptions.IgnoreCase | RegexOptions.Singleline);
            Match m = r.Match(txt);

            int id = Convert.ToInt32(m.Groups[1].ToString());
            TextBox txtBox = (TextBox)item;

            content row = new content();
            if(item.ID.Contains(id.ToString()) && item.ID.Contains("Name"))
            {
                row.name = txtBox.Text;
            }
            else if (item.ID.Contains(id.ToString()) && item.ID.Contains("MemberNo"))
            {
                row.memberNo = txtBox.Text;
            }
            else if (item.ID.Contains(id.ToString()) && item.ID.Contains("Points"))
            {
                row.points = Convert.ToInt32(txtBox.Text);
            }
            rows.Add(row);
        }
    }
} 
```

我需要的是，对于这个迭代的每三个控件，都使用它们各自的值`rows.Add(row)`调用。`row.name, row.memberNo and row.points`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:48:07.920

1.  您可以使用 Linq 在以下位置`OfType`查找所有内容：`TextBoxes``PlaceHolder`

    ```
    var alltxt = PlaceHolder_ForEntries.Controls.OfType<TextBox>(); 
    ```

您可以对所有人使用 Linq：

```
List<content> rows = PlaceHolder_ForEntries.Controls.OfType<TextBox>()
    .Select(txt => new{
        Txt = txt,
        Number = new String(txt.ID.SkipWhile(c => !Char.IsDigit(c)).ToArray())
     })
    .GroupBy(x => x.Number)
    .Select(g => new content{ 
        name = g.First(x => x.Txt.ID.StartsWith("TextBox_Name")).Txt.Text,
        memberNo = g.First(x => x.Txt.ID.StartsWith("TextBox_MemberNo")).Txt.Text,
        points = int.Parse(g.First(x => x.Txt.ID.StartsWith("TextBox_Points")).Txt.Text)
    })
    .ToList(); 
```

我按您用于 ID (1-n) 的数字后缀进行分组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:49:23.877

我会更改您的 LinkBut​​ton_Submit_Attendees_Click 功能：

```
protected void LinkButton_Submit_Attendees_Click(object sender, EventArgs e)
{
        content row = new content();
foreach (Control item in PlaceHolder_ForEntries.Controls)
{
    if (item is TextBox)
    {
        string txt = item.ID.ToString(); // String to run RegEx on
        string re1 = ".*?"; // Non-greedy match on filler
        string re2 = "(\\d+)";  // Integer Number 1

        Regex r = new Regex(re1 + re2, RegexOptions.IgnoreCase | RegexOptions.Singleline);
        Match m = r.Match(txt);

        int id = Convert.ToInt32(m.Groups[1].ToString());
        TextBox txtBox = (TextBox)item;

        if(item.ID.Contains(id.ToString()) && item.ID.Contains("Name"))
        {
            row.name = txtBox.Text;
        }
        else if (item.ID.Contains(id.ToString()) && item.ID.Contains("MemberNo"))
        {
            row.memberNo = txtBox.Text;
        }
        else if (item.ID.Contains(id.ToString()) && item.ID.Contains("Points"))
        {
            row.points = Convert.ToInt32(txtBox.Text);
        }
if(!string.IsNullOrEmpty(row.name)
  && !string.IsNullOrEmpty(row.memberNo)
  && row.points > 0)){
        rows.Add(row);
        row = new content();
}
    }
} 
```

}

# python - 通过nosetests测试flask应用程序时获取IP地址

> ID：14872829
> 
> 赞同：20
> 
> 时间：2013-02-14T10:35:25.690
> 
> 标签：python, testing, flask, nosetests, werkzeug

我的应用程序取决于我`request.remote_addr`何时`None`通过使用`app.test_client().post('/users/login', ....)`.

**运行测试时如何模拟 IP（127.0.0.1 可以正常工作）？** 我已经尝试设置环境变量，使用 post() 方法在标头中发送，并且我已经深入研究了nosetests、werkzeugs 和 flasks 文档，但我没有尝试过任何工作。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-14T10:46:21.087

[您可以使用environ_base](http://werkzeug.pocoo.org/docs/test/#testing-api)为基础 Werkzeug 环境设置选项：

```
from flask import Flask, request
import unittest

app = Flask(__name__)
app.debug = True
app.testing = True

@app.route('/')
def index():
    return str(request.remote_addr)

class TestApp(unittest.TestCase):

    def test_remote_addr(self):
        c = app.test_client()
        resp = c.get('/', environ_base={'REMOTE_ADDR': '127.0.0.1'})
        self.assertEqual('127.0.0.1', resp.data)

if __name__ == '__main__':
    unittest.main() 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-14T10:54:06.290

一位朋友给了我这个解决方案，它适用于所有请求：

```
class myProxyHack(object):

    def __init__(self, app):
        self.app = app

    def __call__(self, environ, start_response):
        environ['REMOTE_ADDR'] = environ.get('REMOTE_ADDR', '127.0.0.1')
        return self.app(environ, start_response)

app.wsgi_app = myProxyHack(app.wsgi_app)

app.test_client().post(...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-22T15:43:19.103

如果您愿意，也可以将`header`参数传递给。`test_request_context`

例子：

```
from flask import Flask, request
import unittest

app = Flask(__name__)
app.debug = True
app.testing = True

@app.route('/')
def index():
    return str(request.remote_addr)

class TestApp(unittest.TestCase):

    def test_headers(self):
        user_agent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:52.0) Gecko/20100101 Firefox/52.0"
        ip_address = 127.0.0.1
        headers = {
            'Remote_Addr': ip_address,
            'User_Agent': user_agent
        }

        with self.test_request_context(headers=headers):
            # Do something
            pass 
```

`request`当您需要使用其他模块中的对象执行多个单元测试时，这很有用。

请参阅[test_request_context 文档](https://flask.palletsprojects.com/en/1.0.x/testing/#other-testing-tricks)。

# java - 在jsp中从组合框获取价值到servlet

> ID：14872834
> 
> 赞同：1
> 
> 时间：2013-02-14T10:35:49.503
> 
> 标签：java, jsp, servlets, combobox

我从 .jsp 文件中的组合框获取值到 servlet 时遇到问题。我在其他 servlet 中使用 request.getParameter 方法，它可以工作。在这堂课中它没有。我也试图从文本字段中获取价值到这个 servlet，但也不起作用。我不知道如何解决这个问题。

我有这样的组合框：

```
<form action="upload" method="POST" enctype="multipart/form-data"> 
            <p class="folders_save">Folder:
                <select name="folders1" id="user">
                        <% 
                        user = (User)session.getAttribute("user");
                        listOfFolders = user.listOfFolders(); 
                        if(listOfFolders != null){
                           for(File file : listOfFolders){
                                out.print("<option value="+file.getName()+">"+file.getName()+"</option>");
                            }
                           }
                        %> 
                    </select>

                     </p>
                <input class="pole" type="file" name="file" />
                <input class="wrzuc" type="submit" value="Wrzuc!">
            </form> 
```

我正在努力获得价值：

```
String folder = request.getParameter("folders1"); 
```

我的jsp文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org /TR/html4/loose.dtd">
<html>
<head>
<%@ page import="tools.User" %>
<%@ page import="java.io.File" %>
<%@ page import="java.text.DecimalFormat" %>
<%@page language="Java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="style.css" />
<title>Serwer dysku sieciowego </title>
</head>
<body>
<div class="container">
<div class="ramka_zaproszenie">

    <% 
        File[] listOfFolders;
        User user;
        String username;
        String status = null;
        if(session.getAttribute("user")!=null){
            user = (User)session.getAttribute("user");
            username = user.getLogin();
            status = user.getType().toString();
        } else {
            username = "unknown";
        }
    %>
    <p class="loguj">Witaj, <%= username %>!</p><br>
    <% if(session.getAttribute("user")!=null){ %>
        <p class="tekst">Wrzuc plik na serwer:</p>

        <form action="upload" method="POST" enctype="multipart/form-data"> 
        <p class="folders_save">Folder:
            <select name="folders1" id="user">
                    <% 
                    user = (User)session.getAttribute("user");
                    listOfFolders = user.listOfFolders(); 
                    if(listOfFolders != null){
                       for(File file : listOfFolders){
                            out.print("<option value="+file.getName()+">"+file.getName()+"</option>");
                        }
                       }
                    %> 
                </select>

                 </p>
            <input class="pole" type="file" name="file" />
            <input class="wrzuc" type="submit" value="Wrzuc!">
        </form>

    <form action="folder" method="get">
        <p class="tekst"> Folder: <br><input class="pole" id="Folder" type="text" name="folderName" /> 
        <br /></p>
        <input class="zatwierdz" type="submit" id="submit" value="Utwórz" /><br>
    </form>
    <br />
    <% if(status.equalsIgnoreCase("ADMIN")){ %>
        <a class="wroc" href="zmiana_rozmiaru.jsp">Zmiana Pojemnosci</a>
    <%}%>
        <br />
        <br /> 
        <p class="tekst">Posiadane pliki na serwerze:</p>

        <form method="post">
        Folder:
            <select name="folders">
            <option value=0 selected="selected" >Wybierz folder</option>
                    <% 
                    user = (User)session.getAttribute("user");
                    listOfFolders = user.listOfFolders(); 
                    if(listOfFolders != null){
                       for(File file : listOfFolders){
                            out.print("<option value="+file.getName()+">"+file.getName()+"</option>");
                        }
                       }
                    %> 
                </select> 
                <input type="submit" value="Wybierz"><br>
                </form>
        <br />  
        Pliki z folderu: <%=request.getParameter("folders")%>

        <center><table id="tabela">
        <tr class="alt">
        <th>Nazwa</th>
        <th>Rozmiar</th>
        <th>Pobierz</th>
        <th>Usun</th>
        </tr>
        <% 
        System.out.println(request.getParameter("folders"));
           user = (User)session.getAttribute("user");
           File[] listOfFiles = user.listOfFiles(request.getParameter("folders"));
           if(listOfFiles != null){
           for(File file : listOfFiles){
                DecimalFormat twoDForm = new DecimalFormat("#.##");
                out.print("<tr class=\"alt\"><td>" + file.getName()+"</td><td>" +twoDForm.format((double)file.length()/1024.0)+" KB</td><td align=center> <a href=\"download?filePath="+file.getAbsolutePath()+"\"><img border=\"0\" src=\"downloadsmall.png\"></a></td><td align=center><a src=\"deletesmall.png\" href=\"delete?filePath="+file.getAbsolutePath()+"\" ><img border=\"0\" src=\"deletesmall.png\"></a></td></tr>");
            }
           }
        %>

        </table>
        </center><br>
        <form action="logout" method="post">
            <input type="image" src="wylacznik.png" id="submit">
        </form>
        <br><br>
            <%
        if (session.getAttribute("warning") != null) {
    %>
    <span><%= session.getAttribute("warning") %></span> 
    <%
        session.removeAttribute("warning");
        }
    %>

    <% } %>
    <div class="footer">Copyright 2013 by JavaProjectTeam.</div>
    </div>
    </div>
</body>
</html> 
```

还有我的 servlet 文件

```
<pre>package servlets;

import java.io.*;
import java.sql.SQLException;
import java.util.*;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import javax.servlet.annotation.WebServlet;

import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;

import java.sql.Connection;
import java.text.DecimalFormat;
import java.text.DecimalFormatSymbols;

import tools.Connector;
import tools.User;

@WebServlet("/upload")
public class UploadServlet extends HttpServlet {

   private boolean isMultipart;
   private String filePath;
   private File file ;

   public void init(){
      // Get the file location where it would be stored.
      filePath = getServletContext().getInitParameter("file-upload");
   }
   public void doPost(HttpServletRequest request, HttpServletResponse response)
              throws ServletException, java.io.IOException {
      // Check that we have a file upload request
      request.setCharacterEncoding("UTF-8"); 
      String folder = request.getParameter("folders1");
      HttpSession session = request.getSession(true);
      User user = (User)session.getAttribute("user");
      isMultipart = ServletFileUpload.isMultipartContent(request);
      response.setContentType("text/html");

      java.io.PrintWriter out = response.getWriter( );
      if( !isMultipart ){
          session.setAttribute("warning", "Nie masz zadnych plikow");
          response.setStatus(HttpServletResponse.SC_MOVED_TEMPORARILY);
          response.setHeader("Location", "hello.jsp");
          return;
      }
      DiskFileItemFactory factory = new DiskFileItemFactory();
      // Create a new file upload handler
      ServletFileUpload upload = new ServletFileUpload(factory);
      // maximum file size to be uploaded.
      upload.setSizeMax(user.getSpace() * 1024);

      try{ 
      // Parse the request to get file items.
      List fileItems = upload.parseRequest(request);

      // Process the uploaded file items
      Iterator i = fileItems.iterator();

      while ( i.hasNext () ) 
      {
         FileItem fi = (FileItem)i.next();
         if ( !fi.isFormField () )  
         {
            // Get the uploaded file parameters
            String fileName = fi.getName();
            // Write the file
            if( fileName.lastIndexOf("\\") >= 0 ){
               file = new File( filePath+"\\"+user.getId()+"\\"+folder+"\\"+ 
               fileName.substring( fileName.lastIndexOf("\\"))) ;
            }else{
               file = new File( filePath+"\\"+user.getId()+"\\"+folder+"\\"+
               fileName.substring(fileName.lastIndexOf("\\")+1)) ;
            }
            fi.write(file);
            System.out.println(file.getName());
            try{
                Connection connection = new Connector().getConnection();
                DecimalFormatSymbols otherSymbols = new DecimalFormatSymbols(Locale.GERMAN);
                otherSymbols.setDecimalSeparator('.');
                otherSymbols.setGroupingSeparator('.'); 
                DecimalFormat twoDForm = new DecimalFormat("#.##", otherSymbols);
                System.out.println(twoDForm.format((double)file.length()/1024.0));
                connection.createStatement().executeUpdate("UPDATE `users` SET `space` = `space`-"+twoDForm.format((double)file.length()/1024.0)+" where id="+user.getId());
            } catch(SQLException e){
                e.printStackTrace();
            }
            session.setAttribute("warning", "Plik został dodany do wirtualnego dysku.");
            response.setStatus(HttpServletResponse.SC_MOVED_TEMPORARILY);
            response.setHeader("Location", "hello.jsp");

         }
      }
      out.println("</body>");
      out.println("</html>");
   }catch(Exception ex) {
       System.out.println(ex);
        session.setAttribute("warning", "File is too big! Only "+user.getSpace()+"KB left.");
        response.setStatus(HttpServletResponse.SC_MOVED_TEMPORARILY);
        response.setHeader("Location", "hello.jsp");

   }
   }
   public void doGet(HttpServletRequest request, 
                       HttpServletResponse response)
        throws ServletException, java.io.IOException {

        throw new ServletException("GET method used with " +
                getClass( ).getName( )+": POST method required.");

   } 
}<code> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:41:32.807

这是因为您正在发送一个`multipart/form-data`请求，而servlet*默认*不支持该请求。然而，我注意到您仍在使用“旧版”Apache Commons FileUpload 来获取上传的文件，而不是提供的新 Servlet 3.0 `HttpServletRequest#getPart()`。在这种情况下，您基本上有两个选择：

1.  坚持 Commons FileUpload。您应该在您当前完全忽略的`else`块中收集常规表单字段。`if (!fi.isFormField())`

    ```
    if (!fi.isFormField()) {
        // Collect uploaded file from fi.
    } else {
        // Collect normal form field from fi.
    } 
    ```

2.  摆脱 Commons FileUpload 并使用`@MultipartConfig`注释。

    ```
    @WebServlet("/upload")
    @MultipartConfig
    public class UploadServlet extends HttpServlet { 
    ```

    通过这种方式，您可以获取文件`request.getPart()`并继续使用`request.getParameter()`常规表单字段的常用方式。

### 也可以看看：

*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)

* * *

**与具体问题无关**，这不是组合框，而是下拉菜单。组合框是可编辑的下拉菜单。此外，在 JSP 中编写 Java 代码是一种不好的做法。Java 代码像 servlet 一样属于 Java 类。要循环选项，请使用 JSTL `<c:forEach>`。而且，在像 servlet 这样的 Java 类中编写 HTML 代码是一种不好的做法。HTML 代码属于 JSP 文件。用于`RequestDispatcher#forward()`在 JSP 中显示结果。另请参阅[我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)。

哦，您的 servlet 中有一个主要的线程安全问题。在应用程序生命周期中只有一个 servlet 实例在所有 HTTP 请求中共享。那些领域

```
private boolean isMultipart;
private String filePath;
private File file ; 
```

当多个用户同时使用同一个 servlet 时，将在所有 HTTP 请求之间共享，从而导致潜在的重大问题。摆脱它们并将它们移动到`doXxx()`方法块内。

# python - 在 pylab 中重新初始化绘图

> ID：14872835
> 
> 赞同：2
> 
> 时间：2013-02-14T10:35:53.590
> 
> 标签：python, matplotlib

我是使用 PyLab 的新手。我想画一些点。但我不想显示以前的点，即当一个新点出现时，以前的绘制点将消失，新的点将被绘制。我进行了很多搜索，但找不到如何重新初始化两者之间的情节。我面临的问题是我可以使用 plt.figure(f1.number) 设置当前图形，但是在绘制该图形中的点后，它会永久更改。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T14:39:46.217

`plt.hold(False)`在你开始绘图之前会做你想做的事。

`hold`老艺术家的决定在新艺术家被绘制时被保留。默认值为保持打开。

前任

```
# two lines 
plt.figure()
plt.hold(True)
plt.plot(range(5))
plt.plot(range(5)[::-1])

#one line
plt.figure()
plt.hold(False)
plt.plot(range(5))
plt.plot(range(5)[::-1]) 
```

通过更改它来`plt.hold`更改所有（新）轴。`axes`您可以通过以下方式更改个人的保持状态

```
ax = gca()
ax.hold(True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:40:40.767

使用pylab，`pylab.clf()`应该清除图形，之后您可以重新绘制绘图。

或者，您可以使用 和 更新数据`set_xdata`，`set_ydata`这些方法是在您创建新绘图时返回的轴对象上的方法（使用`pylab.plot`或`pylab.subplot`）。

后者可能是首选，但需要更多的工作。我可以快速找到的一个例子是[另一个 SO question](https://stackoverflow.com/questions/10944621/dynamically-updating-plot-in-matplotlib)。

# c# - 在 ASP.NET 中将 HTML 转换为 Docx 时保持 CSS 样式

> ID：14872838
> 
> 赞同：0
> 
> 时间：2013-02-14T10:36:08.080
> 
> 标签：c#, asp.net, openxml-sdk, docx

我正在尝试在不使用互操作 dll 的情况下将 HTM 转换为 docx。我尝试过使用 HTML 和 CSS以及[Html 到 OpenXml](http://html2openxml.codeplex.com/)[动态生成 MS Word 文档](http://www.codeproject.com/Articles/7341/Dynamically-generate-a-MS-Word-document-using-HTML?fid=59794&select=3614596&fr=21#xx0xx)。

我没有找到一种方法将 HTML 转换为 Docx，并且所有样式和图像都完好无损。Openxml 确实支持样式，但仅在样式为内联时才支持。如果我在 CSS 文件中定义了样式，则样式不会得到反映。

我可以采取什么替代方案来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:41:51.590

**Queston 1 - 保留样式**

在使用 html2openxml 转换文档之前，预处理 HTML 以内联 css 文件中的样式。

**问题 2 - 保留图像**

根据此处[http://html2openxml.codeplex.com/wikipage?title=ImageProcessing&referringTitle=Documentation ，图像应该在该转换器中工作](http://html2openxml.codeplex.com/wikipage?title=ImageProcessing&referringTitle=Documentation)

也许你需要调试一下/发布更多信息

**编辑** 也许你忘了设置基本路径

```
converter.BaseImageUrl = new Uri("http://myserver:8080/"); 
```

# bash - shell 脚本的输出是另一个 shell 脚本

> ID：14872843
> 
> 赞同：0
> 
> 时间：2013-02-14T10:36:21.657
> 
> 标签：bash, shell

我有一个 shell 脚本，它会将另一个 shell 脚本打印到标准输出。我需要使用单行 bash 命令执行这两个脚本（初始脚本和输出脚本）。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:39:14.573

也许是这样的：

```
sh ./test.sh | sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:41:57.993

尝试这样做：

```
bash test.bash | bash -s 
```

# java - 如何为 Groovy 编程改进 Apache Wicket？

> ID：14872851
> 
> 赞同：1
> 
> 时间：2013-02-14T10:36:31.560
> 
> 标签：java, groovy, wicket

我现在正在使用 Groovy 语言使用 Apache Wicket。我想知道是否有机会为 Groovy 编程改进 Apache Wicket？

我在想什么。我希望有能力编写这样的代码：

```
new AjaxLink("ajaxLink", {link, target -> /* some Closure body */ }) 
```

但是没有创建像这样的装饰器

```
class GroovyWicketAjaxLink extends AjaxLink {
    def clickClosure;

    GroovyWicketAjaxLink(wicketId, onClickClosure) {
        super(wicketId)
        this.clickClosure = onClickClosure
    }

    void onClick(AjaxRequestTarget target) {
        clickClosure.call([this, target]);
    }
} 
```

也许有某种方法可以创建某种`DefaultWicketGroovyMethods`与支持完全一样的 for `DefaultGroovyMethods`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:17:46.940

**我认为您应该启动一个名为Gricket**的开源项目，这是一个用于 Wicket 的 Groovy DSL，您可以在其中编写如下内容：

```
code = { // i wrote this in a closure, but you can write it in a separate file

    ajaxLink id: "link", onClick: { ->
      // write the link
    }

} 
```

这将被解析为脚本，并且`missingMethod`调用被解析为 apache wicket 类的实例化：

```
class GricketParser {
  def components = []
  def methodMissing(String method, args) {
    def clazz = "org.apache.wicket.ajax.markup.html." + method.capitalize() as Class
    def component = clazz.newInstance()
    args[0].each { key, value -> component[key] = value }
  }
}

code.delegate = new GricketParser()
code() 
```

您还可以在类之上应用元编程，`String`而不是解析脚本

* * *

**更新：**

似乎[这个想法是](http://mail-archives.apache.org/mod_mbox/wicket-users/200803.mbox/%3C200803071501.41343.no.mail.su@gmail.com%3E)在 2008 年提出的，在对匿名类的常规支持方面存在一些问题。是时候换一个新的了`WicketBuilder`？:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T10:50:52.213

最后，我创建了您要求的项目。我使用了 ExtensionModule groovy 功能​​，所以你只需要从 github 导入一个 dsl 项目并开始使用它。带有标签的 AjaxLink 的语法如下所示：

```
@Override
void onInitialize() {
 ajaxLink('link') {
     label('label')
     click { AjaxRequestTarget t, AjaxLink link -> // or even without these params

     }
  }
} 
```

您可以像在脑海中想象的那样链接组件 :) 使用 Wicket 感受美妙的自由。WicketDSL 类中的所有方法都包含@DelegatesTo 和@ClosureParams 注解，因此您可以感受到IDE 对DSL 的出色支持。此外，使用此 DSL 编写的所有代码都支持 @CompileStatic groovy 注释。它应该会大大提高性能。在此处查看两个 github 分支： [https](https://github.com/eugene-kamenev/wicket-groovy-DSL) ://github.com/eugene-kamenev/wicket-groovy-DSL 并随时与我联系。

# javascript - jQuery ajax 在 chrome 中工作，但在 IE 9 中没有

> ID：14872853
> 
> 赞同：0
> 
> 时间：2013-02-14T10:36:35.440
> 
> 标签：javascript, jquery

以下 jQuery 片段适用于 chrome 但不适用于 IE-9 我错过了什么。第一个警报在 IE 和 Chrome 中都显示，但第二个仅在 Chrome 中有效。

```
getBeaconXML: function ()
{
  var myself = this;
  var beaconUrl = this.beaconXMLUrl;
  alert("Url : " + beaconUrl);

  $.ajax({ 
    async: false,
    url: beaconUrl,                            
    dataType: "xml"
  })
  .done(function (data) {
    alert("Reach done");
    myself.bXML = data;
    myself.parseBeaconId();
    myself.parseUseKey();
    myself.parseBeacons();
  });
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:49:55.517

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)
在文档中没有方法`done`。尝试`success`或`complete`视任务而定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T11:57:10.173

试试这个..

```
getBeaconXML: function ()
                    {
                        var myself = this;
                        var beaconUrl = this.beaconXMLUrl;
                        alert("Url : " + beaconUrl);
                        $.ajax(
                        { 
                            async: false,
                            url: beaconUrl,                            
                            dataType: "xml",
                      success: function(data)
                       {
                            alert("Reach done");
                            myself.bXML = data;
                            myself.parseBeaconId();
                            myself.parseUseKey();
                            myself.parseBeacons();
                      }
                        });

                }, 
```

# jquery-mobile - 在 jQuery Mobile 中混合单页和多页文档

> ID：14872857
> 
> 赞同：2
> 
> 时间：2013-02-14T10:36:51.710
> 
> 标签：jquery-mobile

我从 jQuery Mobile 开始，但我遇到了问题。我有两个 HTML 文档：

*   page1.html
*   page2.html
    *   第2a页
    *   第2页

问题如下：

*   当我从 page1.html 浏览到 page2.html 时，它显示 page2a，但我无法浏览到 page2b
*   当我从 page1.html 浏览到 page2a 时，它停留在 page1.html
*   当我从 page2.html 浏览到 page2a 或 page2b 时，它运行良好

我的解决方案有什么问题？有什么好的解决方案可以让它正常工作吗？

这是一个供参考的代码：

*Page1.html*

```
<!DOCTYPE html> 
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <title>Page 1</title> 
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.css" />
  <script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js"></script>
</head> 

<body> 

<div data-role="page">
  <div data-role="header">
    <h1>Single page</h1>
  </div>
  <div data-role="content">  
    <p>See <a href="page2.html">page 2</a>.</p>
    <!-- <p>See <a href="page2.html#a">page 2a</a>.</p> -->
  </div>
</div>

</body>
</html> 
```

*页面2.html：*

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <title>Page 2</title> 
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.css" />
  <script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js"></script>
</head> 

<body> 

<!-- Start of first page: #a -->
<div data-role="page" id="a">
  <div data-role="header">
    <h1>Page 2a</h1>
  </div>
  <div data-role="content" >  
    <p><a href="#b" data-role="button" data-transition="slide">Show page "2b"</a></p>
  </div>
</div>

<!-- Start of second page: #b -->
<div data-role="page" id="b">
  <div data-role="header">
    <h1>Page 2b</h1>
  </div>
  <div data-role="content">  
    <p><a href="#a" data-direction="reverse" data-transition="slide" data-role="button">Back to page "2a"</a></p>  
  </div>
</div><!-- /page b -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:02:52.593

检查以下问题。它似乎只适用于`data-rel="external"`.

[JQM 多页](https://stackoverflow.com/questions/9142624/jquery-mobile-multipage-wont-work)

**更新：**

注意：您不能链接到激活 Ajax 导航的多页文档，因为框架只会加载它找到的第一个页面，而不是完整的内部页面集。在这些情况下，您必须在不使用 Ajax 的情况下进行链接（请参阅下一节）以进行整页刷新，以防止潜在的哈希冲突。当前有一个子页面[***插件***](https://github.com/ToddThomson/jQuery-Mobile-Subpage-Widget)，可以加载多页文档。

来源：[JQM - 链接页面](http://jquerymobile.com/test/docs/pages/page-links.html)

# php - 使用动态文本链接提交表单

> ID：14872859
> 
> 赞同：0
> 
> 时间：2013-02-14T10:36:56.157
> 
> 标签：php, mysql, forms

我迷路了。我想要做的是，我希望我的网站允许用户在我的数据库中选择某一行（记录），然后将他们重定向到另一个网页，该网页将向他们显示有关该特定记录的完整信息。我不知道如何使用动态表格/文本将这两个网页连接在一起。下面是我的代码的一部分：（这是第一个网页：）

```
mysql_select_db($database_rfq_portal, $rfq_portal);
$query_rfqrecord = "SELECT tblrfq.`RFQ_ID`, tblrfq.`Company_Name`, tblrfq.Service,
tblrfq.`Kind_of_Request`, tblrfq.Status, tblrfq.`Date` FROM tblrfq";
$rfqrecord = mysql_query($query_rfqrecord, $rfq_portal) or die(mysql_error());
$row_rfqrecord = mysql_fetch_assoc($rfqrecord);
$totalRows_rfqrecord = mysql_num_rows($rfqrecord);

<form id="viewform" name="viewform" method="get" action="ViewSpecificRFQ.php">
<table width="716" border="1" align="center" cellpadding="5">
<tr>
<td>RFQ ID</td>
<td>Company Name</td>
<td>Service</td>
<td>Kind of Request</td>
<td>Status</td>
<td>Date</td>
</tr>
<?php do { ?>
  <tr>
    <td><a href="ViewSpecificRFQ.phpRFQID=<?php echo $row_rfqrecord['RFQ_ID'];?>"><?php echo $row_rfqrecord['RFQ_ID']; ?></a></td>
    <td><a href="ViewSpecificRFQ.phpRFQID=<?php echo $row_rfqrecord['RFQ_ID'];?>"><?php echo $row_rfqrecord['Company_Name']; ?></a></td>
    <td><a href="ViewSpecificRFQ.phpRFQID=<?php echo $row_rfqrecord['RFQ_ID'];?>"><?php echo $row_rfqrecord['Service']; ?></a></td>
    <td><a href="ViewSpecificRFQ.phpRFQID=<?php echo $row_rfqrecord['RFQ_ID'];?>"><?php echo $row_rfqrecord['Kind_of_Request']; ?></a></td>
    <td><a href="ViewSpecificRFQ.phpRFQID=<?php echo $row_rfqrecord['RFQ_ID'];?>"><?php echo $row_rfqrecord['Status']; ?></a></td>
    <td><a href="ViewSpecificRFQ.phpRFQID=<?php echo $row_rfqrecord['RFQ_ID'];?>"><?php echo $row_rfqrecord['Date']; ?></a></td>
  </tr>
<?php } while ($row_rfqrecord = mysql_fetch_assoc($rfqrecord)); ?>
</table>
}
</form> 
```

这是将获得表单的网页..（我的代码的一部分）

```
$RFQID = $_GET['RFQ_ID'];
mysql_select_db($database_rfq_portal, $rfq_portal);
$query_rfqrecord = "SELECT * FROM tblrfq WHERE $RFQID";

$rfqrecord = mysql_query($query_rfqrecord, $rfq_portal) or die(mysql_error());
$row_rfqrecord = mysql_fetch_assoc($rfqrecord);
$totalRows_rfqrecord = mysql_num_rows($rfqrecord);

mysql_select_db($database_rfq_portal, $rfq_portal);
$query_user = "SELECT tbluser.Username, tbluser.Password FROM tbluser";
$user = mysql_query($query_user, $rfq_portal) or die(mysql_error());
$row_user = mysql_fetch_assoc($user);
$totalRows_user = mysql_num_rows($user);

<table width="716" border="0" align="center">
<tr>
  <th colspan="2" scope="row">RFQ ID:</th>
  <td><?php echo $row_rfqrecord['RFQ_ID']; ?></td>
</tr>
<tr>
  <th colspan="2" scope="row">Company Name:</th>
  <td width="511"><?php echo $row_rfqrecord['Company_Name']; ?></td>
</tr>
<tr>
  <th width="101" rowspan="2" scope="row">Address:</th>
  <th width="90" scope="row">Site A:</th>
  <td><?php echo $row_rfqrecord['Address_A']; ?></td>
</tr>
<tr>
  <th scope="row">Site B:</th>
  <td><?php echo $row_rfqrecord['Address_B']; ?></td>
</tr>
<tr>
  <th colspan="2" scope="row">Contact Number:</th>
  <td><?php echo $row_rfqrecord['Contact_Number']; ?></td>
</tr>
<tr>
  <th colspan="2" scope="row">Contact Person:</th>
  <td><?php echo $row_rfqrecord['Contact_Person']; ?></td>
</tr>
<tr>
  <th colspan="2" scope="row">Service:</th>
  <td><?php echo $row_rfqrecord['Service']; ?></td>
</tr>
<tr>
  <th colspan="2" scope="row">Bandwidth:</th>
  <td><?php echo $row_rfqrecord['Bandwidth']; ?></td>
</tr>
<tr>
  <th colspan="2" scope="row">Telco:</th>
  <td><?php echo $row_rfqrecord['Telco']; ?></td>
</tr>
<tr>
  <th colspan="2" scope="row">Account Manager:</th>
  <td><?php echo $row_rfqrecord['Account_Manager']; ?></td>
</tr>
<tr>
  <th colspan="2" scope="row">Status:</th>
  <td><?php echo $row_rfqrecord['Status']; ?></td>
</tr>
<tr>
  <th colspan="2" scope="row">Kind of Request:</th>
  <td><?php echo $row_rfqrecord['Kind_of_Request']; ?></td>
</tr>
<tr>
  <th colspan="2" scope="row">Date:</th>
  <td><?php echo $row_rfqrecord['Date']; ?></td>
</tr>
<tr>
  <th colspan="2" scope="row">Remarks:</th>
  <td><?php echo $row_rfqrecord['Remarks']; ?></td>
</tr>

</table>
</form> 
```

这会将用户重定向到下一页，但我的问题是它一直显示相同的记录，这是我数据库中的第一条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:48:26.903

1- 考虑 page1.php 是用户选择记录的第一页，然后在 page2.php 中显示完整的详细信息。

对于 page1.php

您需要发送一些参数，例如记录 ID 或任何其他键，以便能够识别记录并选择数据库中的详细信息。

例如： Record 1 一旦用户点击了这个链接，你必须在 page2.php 中做这样的事情，记住我们的参数是 record_id

```
<?php
$id = $_GET['record_id'];
//we have to check it for validity
//if id is an integer (numbers) then simply we can check it
//if(!is_numeric($id)) { die("invalid id") }

// now the id is there
//lets build query
$query = "SELECT * from tablename where id= '$id' ";
?> 
```

对于您的代码，它必须是这样的：//添加 where 子句 $query_rfqrecord = "SELECT * FROM tblrfq where RFQ_ID = '$id'";

```
$rfqrecord = mysql_query($query_rfqrecord, $rfq_portal) or die(mysql_error());
$row_rfqrecord = mysql_fetch_assoc($rfqrecord);
$totalRows_rfqrecord = mysql_num_rows($rfqrecord); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:48:27.170

如果您希望用户在单击特定行时加载特定记录，则必须确保将他们重定向到特定 url。在您的示例中，您`<a href="ViewSpecificRFQ.php">`在您的 do-while 中拥有，因此表中的每一行都将具有相同的链接，然后是相同的目标页面。

您可能想要类似的东西`<a href="ViewSpecificRFQ.php?recordId=<?php echo $row_rfqrecord['RFQ_ID'] ?>">`，然后在您的登录页面中，将针对您将拥有的键执行查询`$_GET['recordId']`。

编辑：do-while 问题

您使用 do-while，因此在第一次迭代中您没有加载任何记录，因为 fetch 指令位于代码块的底部，因此您应该将其更改为：

```
<?php
while ($row_rfqrecord = mysql_fetch_assoc($rfqrecord)) {
    ?>
    <tr>
        <td><a href="ViewSpecificRFQ.php?recordId=<?php echo $row_rfqrecord['RFQ_ID'] ?>"><?php echo $row_rfqrecord['RFQ_ID']; ?></a></td>
        <td><a href="ViewSpecificRFQ.php?recordId=<?php echo $row_rfqrecord['RFQ_ID'] ?>"><?php echo $row_rfqrecord['Company_Name']; ?></a></td>
        <td><a href="ViewSpecificRFQ.php?recordId=<?php echo $row_rfqrecord['RFQ_ID'] ?>"><?php echo $row_rfqrecord['Service']; ?></a></td>
        <td><a href="ViewSpecificRFQ.php?recordId=<?php echo $row_rfqrecord['RFQ_ID'] ?>"><?php echo $row_rfqrecord['Kind_of_Request']; ?></a></td>
        <td><a href="ViewSpecificRFQ.php?recordId=<?php echo $row_rfqrecord['RFQ_ID'] ?>"><?php echo $row_rfqrecord['Status']; ?></a></td>
        <td><a href="ViewSpecificRFQ.php?recordId=<?php echo $row_rfqrecord['RFQ_ID'] ?>"><?php echo $row_rfqrecord['Date']; ?></a></td>
    </tr>
    <?php
}
?> 
```

# android - 用于 Google 云消息传递客户端的 BroadcastReceiver 或 GCMBroadcastReceiver？

> ID：14872867
> 
> 赞同：2
> 
> 时间：2013-02-14T10:37:13.863
> 
> 标签：android, google-cloud-messaging

在文档中，关于为 Google Cloud Messaging 编写 Android 部分，描述了两个不同的选项：

- 使用`com.google.android.gcm.GCMRegistrar`，`com.google.android.gcm.GCMBroadcastReceiver`并`com.google.android.gcm.GCMBaseIntentService`在 [http://developer.android.com/google/gcm/gs.html#android-app](http://developer.android.com/google/gcm/gs.html#android-app)

- 使用`android.content.BroadcastReceiver`和+ 在[http://developer.android.com/google/gcm/gcm.html#writing_apps](http://developer.android.com/google/gcm/gcm.html#writing_apps)`android.app.IntentService`中编写处理程序。

这令人困惑。推荐的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:52:54.647

-使用

> com.google.android.gcm.GCMRegistrar、com.google.android.gcm.GCMBroadcastReceiver 和 com.google.android.gcm.GCMBaseIntentService

在[http://developer.android.com/google/gcm/gs.html#android-app](http://developer.android.com/google/gcm/gs.html#android-app)

在这里工作得很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:48:28.593

由于我信任 Commonsware，我查看了他的[Busy Coder's Guide to Android Development](http://commonsware.com/Android/)并使用了 com.google.android.gcm.GCM* 类。它们使一切变得更容易（将注册保存到首选项，使用唤醒锁......）。

# windows-phone-8 - Windows Phone 8 模拟器中的 Internet 连接

> ID：14872871
> 
> 赞同：2
> 
> 时间：2013-02-14T10:37:35.113
> 
> 标签：windows-phone-8, hyper-v

请帮我解决一下这个。

*   我想通过在主机和模拟器中启用 Internet 连接来运行我的 windows phone 8 模拟器。
*   当我搜索启用 Internet 连接时，我了解到，它需要两个专用 NIC。一个用于主机，另一个用于仿真器。
*   所以，我想通过在我的笔记本电脑上启用以太网和 wifi 连接，它将获得两个独立的网络适配器，这样我就可以将其中一个用于主机，另一个用于模拟器。
*   但我不知道如何配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:17:15.113

嗨我也有这种类型的问题，最后我成功了。

1.转到控制面板并**禁用 Hyper-v**只是取消选中所有 Hyper-V 选项。

1.  运行 VMware 设置，您可以从这里下载。
    [下载工作站](http://www.vmware.com/go/downloadworkstation)
2.  再次转到控制面板并**启用 Hyper-V**。

4.你运行模拟器你有一个对话框点击重试然后点击是

5.在模拟器上**运行VS**并享受互联网。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T13:45:59.663

这对我有用：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681694(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681694(v=vs.105).aspx)

无法连接到 Internet 目的地

* * *

Windows Phone 8 Emulator 使用来自主机的 HTTP 代理设置。如果您无法从模拟器访问 Internet 资源，请咨询您的 IT 管理员以确保您的代理设置适用于模拟器。

如果您的网络代理服务器不可用或出现故障，则可以通过禁用主机上的自动代理检测来恢复模拟器的连接。但是，这仅适用于某些网络配置。

在主机上禁用自动代理检测

1\. 在主机上，从控制面板打开 Internet 选项。Internet 属性对话框打开。

2\. 在 Internet 属性对话框中，单击连接选项卡。

3\. 在连接页面上，单击 LAN 设置按钮。局域网 (LAN) 设置对话框打开。

4\. 在局域网 (LAN) 设置对话框中，取消选中所有复选框。单击确定两次关闭这两个对话框。

5\. 重启模拟器并重试连接。

# cakephp - 如何在 cakephp 中用两种语言创建一个简单的“Hello World”？

> ID：14872876
> 
> 赞同：1
> 
> 时间：2013-02-14T10:37:48.287
> 
> 标签：cakephp, multilingual

我一直在寻找简单的多语言项目示例`cakephp`。
但我找不到这个样本。我认为应该使用`i18n`，但我不能使用。
可以帮我做这个样品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T17:07:22.250

你需要在app>controllers>中创建一个控制器（在这里创建控制器）然后你需要在控制器中声明一个动作。例如在 examples_controllers.php 控制器文件中：

`ExamplesController extends AppController{ function anyName() { var $uses = null; $this->set('hello', "hello world"); } }`

从视图中调用它：

在视图下创建一个文件夹（确保名称与控制器名称相同） 对于上述控制器，文件夹名称将是示例。然后在文件夹中，创建“any_Name.ctp”文件。（名称应该作为动作名称）在该 ctp 文件中，只需调用该变量 hello。那会做的。

我在网上冲浪并在我的网站上找到了一个完整的解决方案： [http ://www.getallthing.com/cake-php-hello-world/](http://www.getallthing.com/cake-php-hello-world/)

祝你好运！干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:32:21.070

基本上你必须结合马特给你的链接，这是在你的网站上使用静态文本翻译的方式。像链接“更多...”等，带有翻译行为，如前所述，它基于 i18n，让您可以在存储在数据库中的模型上使用翻译。

请在书中查看此页面：http: [//book.cakephp.org/1.3/en/The-Manual/Core-Behaviors/Translate.html](http://book.cakephp.org/1.3/en/The-Manual/Core-Behaviors/Translate.html)希望这会有所帮助

# objective-c - CDATA 块中的文本 + 图像

> ID：14872880
> 
> 赞同：0
> 
> 时间：2013-02-14T10:38:02.603
> 
> 标签：objective-c, image, parsing, text, cdata

所以我需要从 CDATA 块中解析数据。

它看起来像

```
<![CDATA[Important text I need<span style=" color:#000000;"><img src="imageName.jpg" alt="imageName" border=0 style="vertical-align:text-bottom;" /></span>Still important text]]> 
```

或者

```
<![CDATA[Important text I need]]> 
```

或者

```
<![CDATA[imageName.jpg]]> 
```

或类似的东西。

结果应该是一个数组，在第一个示例中，数组的内容将是“我需要的重要文本”、“imageName.jpg”、“仍然重要的文本”

另一个的结果将是一个数组，其中一个对象包含 imageName 或文本。

我现在被这个问题困扰了一段时间，因为我不太擅长正则表达式。这里有没有人遇到过同样的问题，你是怎么解决的？

还是我错过了一个简单的解决方法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T13:54:07.410

如果你使用`NSXMLParser`的是一个委托方法`foundCDATA`，它看起来像这样：

```
- (void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock{
    if (!parseElement) {
        return;
    }
    if (parsedElementData==nil) {
        parsedElementData = [[NSMutableData alloc] init];
    }
    [parsedElementData appendData:CDATABlock];

    //Grabs the whole content in CDATABlock.
    NSMutableString *content = [[NSMutableString alloc] initWithData:CDATABlock encoding:NSUTF8StringEncoding];

 } 
```

现在[将此预先编写的类](https://gist.github.com/leighmcculloch/1202238)添加到您的项目中。然后将其导入您要在其中使用它的解析器类：

`#import NSString_stripHTML`

现在您可以简单地将以下行添加到`foundCDATA`方法中：

```
NSString *strippedContent;
strippedContent = [content strippedHtml]; 
```

现在您将拥有没有任何额外字符的剥离文本。您可以从此剥离的文本中添加任何您想要的子串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:42:20.900

所以我找到了自己的解决方案：第一种方法在 cdataString 中搜索任何 HTML。如果 cdataString 包含任何 HTML，我会搜索“src=...”的出现。

```
- (NSString *)stringByStrippingHTML:(NSString *)htmlString {
    NSRange r;
    while ((r = [htmlString rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound){
        // substring from htmlString starting with "<" and ends with ">"
        NSString *substring     = [htmlString substringWithRange:r];

        //new Image String, stays empty if no image is found
        NSString *imageString   = @"";

        //length >= 9 because shortest possible result can be length nine, i.e. "src=1.png"
        if (substring.length >= 9) {

            //substring contains String "src=" ?
            NSRange imageRange      = [substring rangeOfString:@"src=[^>]+" options:NSRegularExpressionSearch];
            if (imageRange.location != NSNotFound) {

                //find the image name
                imageString  = [self imageFromHTMLString:substring];
            }
            //set the image string the imagename + my seperator tag
            imageString = [NSString stringWithFormat:@"##__##%@##__##",imageString];
        }
        //replace html stuff with either emty string or my imagename
        htmlString = [htmlString stringByReplacingCharactersInRange:r withString:imageString];

    }
    return htmlString;
}
- (NSString *)imageFromHTMLString:(NSString *)htmlString{
    NSRange range;

    NSString *result = @"";
    while ((range = [htmlString rangeOfString:@"src=[^>]+ " options:NSRegularExpressionSearch]).location != NSNotFound) {

        htmlString  = [[[htmlString substringWithRange:range] componentsSeparatedByString:@" "] objectAtIndex:0];
        result      = [htmlString stringByReplacingOccurrencesOfString:@"src=" withString:@""];
    }

    return result;

} 
```

这些方法用于：

```
myCdataString = [self stringByStrippingHTML:myCdataString]; 
```

返回值是一个字符串，格式如下：

```
Important Text I need##__##ImageName.png##__##More ImportantText I need 
```

创建一个数组可以通过 componentsSeparatedByString:@"##__##"

# c# - WPF 捕获文本框 onBlur 事件

> ID：14872883
> 
> 赞同：0
> 
> 时间：2013-02-14T10:38:08.683
> 
> 标签：c#, wpf, xaml, wpf-controls

我的 WPF 应用程序中有一个文本框。我习惯于 Web 开发，您可以在其中`onBlur`使用 JavaScript 捕获事件。这在我的 WPF 应用程序中也可能吗？

我想做的只是没有“保存”按钮，而是在他们完成修改文本后更新数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:43:55.947

您是否阅读了所有可用的事件描述？请参阅：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.textbox.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.aspx)

我猜您正在寻找**LostFocus**事件，但您应该寻找最适合您的解决方案的事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T11:41:29.747

为什么要使用事件来做呢？

在 WPF 中，当您想在失去对控件的关注时更新您的后台逻辑时，您通常使用与[UpdateSourceTrigger](http://msdn.microsoft.com/en-us/library/system.windows.data.updatesourcetrigger.aspx)相等的 Binding`LostFocus`

就像例子

```
<TextBox Text="{Binding myBackLogicText, UpdateSourceTrigger=LostFocus}"  /> 
```

# c - 未定义对“ftdi_init”的引用

> ID：14872888
> 
> 赞同：2
> 
> 时间：2013-02-14T10:38:36.723
> 
> 标签：c, ubuntu

我过去使用过 libftdi 并使用以下命令进行编译：

gcc -lftdi -o i2csend i2csend.c

一切都很顺利。今天，在 Ubuntu 12.10 上我遇到了很多错误，例如`undefined reference to`ftdi_init'`

我知道 libftdi 被重命名为 libftdi1 所以我尝试了相同的命令`-lftdi1`并得到了错误：

/usr/bin/ld: 找不到 -lftdi1 collect2: 错误: ld 返回 1 退出状态

谁能解释为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T10:41:53.833

您通常不应直接指定外部包的库名称。

最好使用打包系统的帮助程序，即[`pkg-config`](http://linux.die.net/man/1/pkg-config)像这样：

```
$ gcc -o i2csend i2csend.c $(pkg-config --cflags --libs libftdi1) 
```

请注意，这假设包名称`libftdi1`在`pkg-config`'s 数据库中；我不确定如何以便携方式验证这一点。你可以跑`pkg-config --list-all | grep ftdi`过去一探究竟。

`-l`将库部分（选项）保留在命令行末尾通常是一个好主意，上面就是这样做的。将部分分解出来会更干净一些`CFLAGS`，但这需要重复命令：

```
$ gcc $(pkg-config --cflags libftdi1)  -o i2csend  i2csend.c  $(pkg-config --libs libftdi1) 
```

在这里，我使用双空格来分隔命令行的逻辑部分以提高清晰度。

# android - Android 反向地理编码

> ID：14872889
> 
> 赞同：1
> 
> 时间：2013-02-14T10:38:41.313
> 
> 标签：android, geolocation, geocoding

如何从提供的邮政编码（美国）获取城市、州信息，是否可以使用 android 库？如果没有必要，我想避免使用外部库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:50:18.930

基本上你需要使用反向地理编码。

首先从邮政编码中获取经纬度。看这里：

[https://stackoverflow.com/a/8187031/1369222](https://stackoverflow.com/a/8187031/1369222)

然后使用 lat,long 得到你需要的任何东西。看这里：

[https://stackoverflow.com/a/9409229/1369222](https://stackoverflow.com/a/9409229/1369222)

# c# - WP7 创建辅助类以便于使用 HttpWebRequest 和 POST 方法

> ID：14872891
> 
> 赞同：0
> 
> 时间：2013-02-14T10:38:52.090
> 
> 标签：c#, windows-phone-7, asynchronous, httpwebrequest

其实我有这样的事情：

```
private void createHttpRequest()
    {
        System.Uri myUri = new System.Uri("..url..");
        HttpWebRequest myHttpRequest = (HttpWebRequest)HttpWebRequest.Create(myUri);
        myHttpRequest.Method = "POST";
        myHttpRequest.ContentType = "application/x-www-form-urlencoded";
        myHttpRequest.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), myHttpRequest);
    }

void GetRequestStreamCallback(IAsyncResult callbackResult)
    {
        HttpWebRequest myRequest = (HttpWebRequest)callbackResult.AsyncState;
        // End the stream request operation
        Stream postStream = myRequest.EndGetRequestStream(callbackResult);

        string hash = HashHelper.createStringHash("123", "TEST", "0216");
        // Create the post data
        byte[] byteArray = createByteArrayFromHash(hash);

        // Add the post data to the web request
        postStream.Write(byteArray, 0, byteArray.Length);
        postStream.Close();

        // Start the web request
        myRequest.BeginGetResponse(new AsyncCallback(GetResponsetStreamCallback), myRequest);
    }

 void GetResponsetStreamCallback(IAsyncResult callbackResult)
    {
        HttpWebRequest request = (HttpWebRequest)callbackResult.AsyncState;
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(callbackResult);
        using (StreamReader httpWebStreamReader = new StreamReader(response.GetResponseStream()))
        {
            string result = httpWebStreamReader.ReadToEnd();
            ApiResponse apiResponse = (ApiResponse)JsonConvert.DeserializeObject<ApiResponse>(result);
        }
    } 
```

很好，它正在工作，但现在我必须在每个页面中使用这些方法，只需更改创建请求的方法 createByteArrayFromHash。如果我想创建可以帮助我在页面中大约 3 行代码中执行此操作的辅助类怎么办。你会怎么做？我正在考虑[这种方式](http://matthiasshapiro.com/2012/12/10/window-8-win-phone-code-sharing-httpwebrequest-getresponseasync/)，但是如何在响应之前添加请求？或者你会用另一种方式吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:24:08.760

是的，最好使用`async`and `await`。以下是此类包装器的示例：

```
public async Task<string> SendRequestGetResponse(string postData, CookieContainer cookiesContainer = null)
{
    var postRequest = (HttpWebRequest)WebRequest.Create(Constants.WebServiceUrl);
    postRequest.ContentType = "Your content-type";
    postRequest.Method = "POST";
    postRequest.CookieContainer = new CookieContainer();
    postRequest.CookieContainer = App.Session.Cookies;

    using (var requestStream = await postRequest.GetRequestStreamAsync())
    {
        byte[] postDataArray = Encoding.UTF8.GetBytes(postData);
        await requestStream.WriteAsync(postDataArray, 0, postDataArray.Length);
    }

    var postResponse = await postRequest.GetResponseAsync() as HttpWebResponse;

    if (postResponse != null)
    {
        var postResponseStream = postResponse.GetResponseStream();
        var postStreamReader = new StreamReader(postResponseStream);

        // Can use cookies if you need
        if (cookiesContainer == null)
        {
            if (!string.IsNullOrEmpty(postResponse.Headers["YourCookieHere"]))
            {
                var cookiesCollection = postResponse.Cookies;
                // App.Session is a global object to store cookies and etc.
                App.Session.Cookies.Add(new Uri(Constants.WebServiceUrl), cookiesCollection);
            }
        }

        string response = await postStreamReader.ReadToEndAsync();
        return response;
    }
    return null;
} 
```

你可以随意修改

# c++ - 在第二个线程上加载 OpenGL 资源

> ID：14872892
> 
> 赞同：6
> 
> 时间：2013-02-14T10:38:53.680
> 
> 标签：c++, multithreading, opengl

我在 OpenGL 2.1 中使用 win32 线程。我想要实现的是渲染简单的图像说“正在加载”，而在后台加载整个 3D 场景。它现在可以工作，但我有一个问题，有时我的立方体贴图纹理的一部分从 Mozilla Firefox 浏览器获取数据（这到底是怎么发生的？？？）并忽略那个带有纹理的小盒子，它只是一个精灵和它应该在哪里。： ![在此处输入图像描述](../Images/fb291cb36a29df69589a6d2f480cf45b.png)

这种情况发生在我尝试加载程序的 3 次中。这是我的线程的样子：

```
WindowsThread::WindowsThread(HGLRC graphicsContext, HDC deviceContext) :
    graphicsContext_(graphicsContext),
    deviceContext_(deviceContext),
    running_(false),
    task_(0),
    mode_(WT_NORMAL)
{
    handle_ = CreateThread(0, 0,
        (unsigned long (__stdcall *)(void *)) this->staticRun,
        (void*) this, CREATE_SUSPENDED, &id_);

    if (handle_ == 0) {
        LOGE("Unable to create thread.");
        return;
    }

    if (!SetThreadPriority(handle_, THREAD_PRIORITY_NORMAL)) {
        LOGE("Unable to set thread priority for thread.");
        return;
    }
}

WindowsThread::~WindowsThread() {
    finishTask();
    running_ = false;
    WaitForSingleObject(handle_, INFINITE);
    CloseHandle(handle_);
    wglDeleteContext(graphicsContext_);
}

void WindowsThread::start() {
    running_ = true;
    if (!ResumeThread(handle_)) {
        LOGW("Unable to resume thread.");
    }
}

bool WindowsThread::isRunning() {
    return running_;
}

void WindowsThread::setTask(Task* task, Mode mode) {
    finishTask();
    task_ = task;
    mode_ = mode;
}

bool WindowsThread::hasTask() {
    return task_ != 0;
}

void WindowsThread::finishTask() {
    while (task_ != 0) {
        Sleep(1);
    }
}

void WindowsThread::stop() {
    running_ = false;
}

int WindowsThread::staticRun(void* thread) {
    return ((WindowsThread*) thread)->run();
}

int WindowsThread::run() {
    wglMakeCurrent(deviceContext_, graphicsContext_);
    while (running_) {
        if (task_ != 0) {
            task_->run();
            task_ = 0;
        }
        Sleep(10);
    }
    wglMakeCurrent(0, 0);
    return 1;
} 
```

线程管理器：

```
WindowsThreadManager::WindowsThreadManager(
    System* system, UINT threadPoolSize)
{
    if (threadPoolSize == 0) {
        SYSTEM_INFO info;
        GetSystemInfo(&info);
        threadPoolSize = info.dwNumberOfProcessors;
        if (threadPoolSize == 0) {
            threadPoolSize = 1;
        }
    }
    LOGI("Number of threads used: %d", threadPoolSize);
    masterContext_ = wglGetCurrentContext();
    HDC hdc = wglGetCurrentDC();
    for (UINT i = 0; i < threadPoolSize; i++) {
        HGLRC threadContext = wglCreateContext(hdc);
        wglShareLists(masterContext_, threadContext);
        WindowsThread* thread = new WindowsThread(threadContext, hdc);
        thread->start();
        threads_.push_back(thread);
    }
}

WindowsThreadManager::~WindowsThreadManager() {
    for (UINT i = 0; i < threads_.size(); i++) {
        delete threads_[i];
    }
    for (UINT i = 0; i < tasks_.size(); i++) {
        delete tasks_[i];
    }
}

void WindowsThreadManager::execute(Task* task, Mode mode) {
    WindowsThread::Mode wtMode = WindowsThread::WT_NORMAL;
    if (mode == TM_GRAPHICS_CONTEXT) {
        wtMode = WindowsThread::WT_GRPAHICS_CONTEXT;
    }
    tasks_.push_back(task);
    for (UINT i = 0; i < threads_.size(); i++) {
        if (!threads_[i]->hasTask()) {
            threads_[i]->setTask(task, wtMode);
            return;
        }
    }
    threads_[0]->setTask(task, wtMode);
}

void WindowsThreadManager::joinAll() {
    for (UINT i = 0; i < threads_.size(); i++) {
        if (threads_[i]->hasTask()) {
            threads_[i]->finishTask();
        }
    }
} 
```

我在 Winodws 8 上使用带有最新驱动程序的 Nvidia 670GTX。任何想法可能出在哪里？

**[编辑]**我在加载程序线程的末尾添加了 glFinish()，现在一切正常加载。我在某处发红，OpenGL 并没有立即完成所有工作，所以我猜是这种情况，上下文在完成工作之前被设置为 NULL。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T11:14:18.543

> 它现在可以工作，但我有一个问题，有时我的立方体贴图纹理的一部分从 Mozilla Firefox 浏览器获取数据（这到底是怎么发生的？？？）

您的纹理从未初始化的图形内存接收数据，这些数据很可能包含来自另一个进程的残留图像，该进程之前使用了该内存区域。这样的事情可能会发生，如果

a) 驱动程序有错误，线程之间不同步资源

和

b）如果您尝试修改纹理，而它已绑定到另一个线程中的纹理单元。

*编辑：*您可以（并且应该）自己引入适当的同步。仅仅因为它提高了性能。当纹理当前不忙时，使用[条件变量在线程之间进行通信。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682052%28v=vs.85%29.aspx)理想情况下，您使用两个或更多纹理，以循环方式更新。

# python - 如何使用模型中的数据编辑表单

> ID：14872894
> 
> 赞同：0
> 
> 时间：2013-02-14T10:38:53.853
> 
> 标签：python, django

视图.py

```
Editrow = KEBReading.objects.get(id=id)
print Editrow.datetime_reading
event_full_datetime=datetime(Editrow.datetime_reading.year,
                             Editrow.datetime_reading.month,
                             Editrow.datetime_reading.day,  
                             Editrow.datetime_reading.hour, 
                             Editrow.datetime_reading.minute,  
                             Editrow.datetime_reading.second)
date = event_full_datetime.year, event_full_datetime.month, event_full_datetime.day
time = event_full_datetime.hour, event_full_datetime.minute
print date
print time

form = KEBReading_form(instance=Editrow) 
```

在我的模型中，我有一个日期时间字段。但在我的表格中，我有一个单独的日期和时间字段。但是当我想编辑一行时，我的变量 Editrow 具有日期时间值我如何在传递实例时使用单独的日期和时间填充表单（Editrow）

```
form = KEBReading_form(instance=Editrow) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:06:37.127

首先，您应该了解如何将[小部件用于表单字段](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#specifying-widgets)。然后，只需使用[SplitDateTimeWidget](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#django.forms.SplitDateTimeWidget)。

# excel - 数组返回的空单元格

> ID：14872896
> 
> 赞同：1
> 
> 时间：2013-02-14T10:39:04.280
> 
> 标签：excel, vba

我一直在研究这个特殊问题一段时间，显然我错过了一些非常简单的东西。我正在尝试根据 Excel 中的动态范围创建一个数组，并使用各个元素与另一个数组进行比较。附加代码的唯一问题是它继续显示空元素。任何指导将不胜感激。附上我的整体代码的一部分。

```
Sub Test_Again()
Dim R As Long
Dim C As Long
Dim List() As Variant
Dim i As Integer

List = Sheets("Sheet11").Range("A2:A17").Value

For R = 1 To UBound(List, 1) ' First array dimension is rows.
    For C = 1 To UBound(List, 2) ' Second array dimension is columns.
        Debug.Print List(R, C)
    Next C
Next R

ReDim List(UBound(List, 1))    
    Do Until i = UBound(List)
               If List(i) = Now() Then                                      
                          End If
               i = i + 1
    Loop
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:53:36.923

正常`Redim`将清除您的阵列 - 除非您使用`Redim Preserve`. 但是，根据帮助：

> 如果使用 Preserve 关键字，则只能调整最后一个数组维度的大小，并且根本无法更改维度数。例如，如果您的数组只有一个维度，您可以调整该维度的大小，因为它是最后一个也是唯一的维度。但是，如果您的数组有两个或多个维度，您可以只更改最后一个维度的大小，并且仍然保留数组的内容。

因此，在您的情况下`Redim`不会在这里帮助您。如果要将二维数组转换为一维数组，则需要手动执行此操作：

```
Sub Test_New()
    Dim lRow As Long, lCol As Long
    Dim vListSource() As Variant, vListTarget() As Variant

    'Assign soure array
    vListSource = Sheets("Sheet11").Range("A2:A17").Value

    'Show full content for debug
    For lRow = LBound(vListSource) To UBound(vListSource) ' First array dimension is rows.
        For lCol = LBound(vListSource, 2) To LBound(vListSource, 2) ' Second array dimension is columns.
            Debug.Print vListSource(lRow, lCol)
        Next lCol
    Next lRow

    'Transfer array to one dimension
    ReDim vListTarget(LBound(vListSource) To UBound(vListSource))
    For lRow = LBound(vListSource) To UBound(vListSource)
        vListTarget(lRow) = vListSource(lRow, LBound(vListSource, 2))
    Next lRow

    'Your check code
    For lRow = LBound(vListTarget) To UBound(vListTarget)
        If vListTarget(lRow) = Now() Then
            'Do something here
        End If
    Next lRow
End Sub 
```

这会将您的范围/数组的第一行复制到一维数组中，并将其用于进一步处理。

但是，从您的代码和问题中，我看不到将其重新调整为一维的优势-您可以轻松地循环一个二维数组-只需查看第一列也是唯一一列。

# android - 打开时更改 Spinner 内容

> ID：14872900
> 
> 赞同：7
> 
> 时间：2013-02-14T10:39:29.370
> 
> 标签：android, events, spinner

我有一个 Spinner，它的内容取决于实际位置（GPS 位置）。所以内容应该不断变化，但只有当他/她选择一个项目时它才对用户可见。我不想拥有一个不断更新 Spinner 内容的线程，或者一个强制用户更新的按钮，我想获得另一种行为。当用户触摸 Spinner 时，在 Spinner 打开之前，它应该被更新。我已经能够以编程方式更改 Spinner 的内容。我需要的是一个在用户触摸关闭的 Spinner 时触发的事件，但在显示打开的 Spinner 之前触发。我希望这个问题足够清楚。谢谢你的关注。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T10:47:03.367

您可以使用`onTouchListener`

```
spinner.setOnTouchListener(new OnTouchListener(){

    @Override
    public boolean onTouch(View v, MotionEvent event) {
       if(event.getAction() == MotionEvent.ACTION_DOWN){
        // Load your spinner here
       }
        return false;
    }

}); 
```

# performance - 休眠：em.getReference().getList().add(record) 性能？

> ID：14872904
> 
> 赞同：0
> 
> 时间：2013-02-14T10:39:44.043
> 
> 标签：performance, hibernate, jpa

使用 Hibernate (JPA) 时，如果我执行以下调用：

```
MyParent parent = em.getReference("myId");
parent.getAListMappedAsOneToMany().add(record) 
record.setParent(parent); 
```

有性能问题吗？

我的想法是`getReference`不加载实体，`getAListeMappedAsOneToMany().add`也不需要加载列表，因为它被定义为延迟获取。

`getAListMappedAsOneToMany`如果真的被访问（通过调用`get`或`size`方法），可能会返回一个非常大的列表。

您能否确认这样的代码没有性能问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:12:30.800

`getReference()`不去数据库，并返回一个代理。但是如果你在代理上调用一个方法，它会初始化代理并从数据库中获取实体数据。因此，由于您调用`getAListMappedAsOneToMany()`您的实体，因此调用`getReference()`而不是`find()`.

同样，列表是延迟加载的。这意味着它只会在您调用它的方法时加载。你确实调用了一个方法：`add()`. 所以列表中元素的数据也是从数据库中加载的。

在 devlopment 中打开 SQL 日志记录，以查看和了解 Hibernate 执行的所有查询。

如果您想避免加载列表，请将您的代码替换为

```
MyParent parent = em.getReference("myId");
record.setParent(parent); 
```

这不会从数据库中加载任何内容，并且会使关联持久化，因为 Record.parent 是关联的所有者。但是请注意，如果之前已经加载了父对象，这也会使您的内存对象图不一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:21:23.300

`getReference()`当您不想使用对象的任何成员而是将对象的引用提供给另一个对象时，它很有用。例如，当实体 A 引用实体 B 并且您想将 b 设置为 A 的 B 时，`getReference()`这就是您所需要的。

但是在您的情况下，当您获得代理对象时，您会立即尝试联系其成员之一。( `aListMappedAsOneToMany`) 因此这将导致整个`parent`对象将从 db 加载。

确实，当您`getAListMappedAsOneToMany().add(record)`设置时，它不会从数据库加载`inverse="true"`

您可以从以下网址了解有关性能的更多信息：http: [//docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-collections-mostefficentinverse](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-collections-mostefficentinverse)

# c# - 锁定 C# 开关盒的首选方式

> ID：14872910
> 
> 赞同：2
> 
> 时间：2013-02-14T10:40:08.793
> 
> 标签：c#, asynchronous, locking

```
internal static void ExecuteCommand(NLO nlo)
{
    switch (nlo.action)
    {
        //synchronize each method in case
        case (NLO.Actions.SET):
            swSet(nlo);
            break;
        case (NLO.Actions.ADD):
            swAdd(nlo);
            break;
        default:
            throw new System.Exception("Error");
            //break;
    }
    return;
} 
```

我想锁定每个方法`swSet`并且`swAdd`能够并行运行，但锁定`swSet`不能与自身并发运行，并且对于`swAdd`

最简单的方法是在每种情况下加锁还是在方法本身或方法上加锁`[MethodImpl(MethodImplOptions.Synchronized)]` ？

最后一个解决方案会锁定所有方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:43:48.590

`[MethodImpl(MethodImplOptions.Synchronized)]`没有过度记录，但通常会为同一类型的所有此类方法使用相同的锁对象；[来自 MSDN](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimploptions.aspx)：

> 只有一个线程可以在任何实例函数中执行，并且只有一个线程可以在任何类的静态函数中执行。

坦率地说，我从来没有发现这个属性有用。在您的情况下，听起来您需要为两种方法单独锁定：

```
private static readonly object setLock = new object(), addLock = new object();

static void swAdd(...) {
    lock(addLock) {...}
}
static void swSet(...) {
    lock(setLock) {...}
} 
```

# javascript - Backbone.js 路由条件默认路由

> ID：14872916
> 
> 赞同：1
> 
> 时间：2013-02-14T10:40:15.100
> 
> 标签：javascript, backbone.js, underscore.js

我有一个带有许多不同选项的路由器，例如，我需要加载其中一个运行良好的路由，但是始终称为默认路由的默认路由会加载到一些其他模板中。
只是想知道是否有办法说如果在这种情况下这条路线 CMS，那么不要从默认路线加载元素。
来自我的路由器的代码：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'views/common/header',
  'views/common/menu',
  'views/rightPanel',
  'views/landing',
  'views/personalBanking',
  'views/currentAccounts',
  'views/signIn',
  'views/cms/cmsView',
], function($, _, Backbone, headerView, menuView, rightPanelView, landingView, personalBankingView, accountsView, signInView, CMS){

    var AppRouter = Backbone.Router.extend({
        currentView: null,

        initialize: function() {
            this.showView(headerView);
            this.showView(menuView);
            //TODO set for TV-width
            if($(window).width() > 180) {
                this.showView(rightPanelView);
            }
        },

        routes: {
            '': 'defaultAction',
            'personal': 'showPersonalBankingView',
            'accounts': 'showCurrentAccountsView',
            'signIn': 'showSignInView',
            'CMS': 'CMSView',
        },

        defaultAction: function(actions){
            this.showView(landingView);
        },

        showPersonalBankingView: function(actions){
            this.showView(personalBankingView);
        },

        showCurrentAccountsView: function(actions){
            this.showView(accountsView);
        },

        showSignInView: function(actions){
            this.showView(signInView);
        },

        CMSView: function(actions){
            this.showView(CMS);
            console.log("cms view going on");
        },

        showView: function(view) {
            view.render();
            if(view.postRender) {
                view.postRender();
            }   
        }
    });

    var initialize = function(){
        new AppRouter();
        Backbone.history.start();
    };

    return {
        initialize: initialize
    };
}); 
```

如果我解释得不够详细，请向我询问更多信息，期待一些帮助我对骨干很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:30:46.440

您需要将默认操作移动到路由字典的底部，以便它不会首先匹配，而是在所有其他路由失败时作为最后的手段。

```
routes: {
    'personal': 'showPersonalBankingView',
    'accounts': 'showCurrentAccountsView',
    'signIn': 'showSignInView',
    'CMS': 'CMSView',
    '': 'defaultAction'
}, 
```

# objective-c - 在视图控制器中放置不同的背景

> ID：14872917
> 
> 赞同：0
> 
> 时间：2013-02-14T10:40:17.680
> 
> 标签：objective-c, uiviewcontroller, ios6, background, xcode4.5

我正在做我在 iOS 中创建应用程序的第一步，所以也许我在问一个愚蠢的问题。在视图控制器中，我放置了一些按钮和文本字段来执行不同的操作。为了改善组织，我想放置几个带边框的背景来分隔放置按钮和文本字段的区域。我尝试放置一个没有文本和颜色背景的文本标签，并将我的对象移到它上面，但我不知道为什么将图层放置在按钮和文本字段上。然后，我尝试修改文本标签的不透明度，但完全不能令人满意。

```
label1.layer.cornerRadius = 5.0;
label1.layer.masksToBounds = YES;
label1.layer.borderColor = [UIColor lightGrayColor].CGColor;
label1.layer.borderWidth = 1.0;
label1.layer.opacity = 0.1;
label1.layer.backgroundColor = [UIColor whiteColor].CGColor; 
```

任何人都可以帮助我找到更好的方法来做到这一点或改进我的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:25:03.870

如果我没听错的话，...

让自己熟悉子视图层次背后的逻辑和兄弟的绘制顺序。在您的界面构建器/故事板中，您可以按如下方式对齐视图：

```
 UIView (the default view that is connected to the view controller's view property) 
    \--UIView   (This is a background to group UI Items as buttons or Lables
       \-- UILabel
       \-- UIButton
    \--UIView (the next background) 
       \-- UILabel
       \-- UIButton 
```

当谈到坐标时，你会注意到每个视图的坐标都是相对于它的子视图的。因此 UILabel 和 UIButton 可能具有相同的坐标，但它们中的每一个都将位于其子视图中。

另一种选择是：

```
UIView (the default view that is connected to the view controller's view property) 
\--UIView (Background) 
\--UIButton
\--UILable
\--UIView (Background) 
\--UIButton
\--UILable 
```

甚至

```
UIView (the default view that is connected to the view controller's view property) 
\--UIView (Background) 
\--UIView (Background) 
\--UIButton
\--UILable
\--UIButton
\--UILable 
```

在这种情况下，所有 UI 元素共享相同的坐标空间。在这种情况下，您需要注意正确的布局。

这个是行不通的： UIView（连接到视图控制器的视图属性的默认视图）--UIButton --UILable --UIButton --UILable --UIView（背景） --UIView（背景）即使所有坐标等与上面的示例相同，两个背景视图会隐藏其他 UI 元素，因为它们是在其他元素之后绘制的。最后一个赢得空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:49:39.027

1）您可以只使用普通的 UIView 而不是没有文本的标签（相同的区别只是更正确）

2）在故事板中，UI元素在左侧栏的顺序很重要，基本上是元素的绘制顺序，顶部的先绘制，因此它下面的东西将被绘制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:05:54.453

您可以尝试在 Interface Builder 中放置多个 UIImageView 对象并根据 Attributes Inspector 的需要设置背景，并注意如何将元素放入 UIView 中。下面的那些是在顶部的之后绘制的。

# vba - 用于格式化选定文本的 Microsoft Word 宏，例如所有 eg 实例的斜体

> ID：14872928
> 
> 赞同：0
> 
> 时间：2013-02-14T10:40:44.707
> 
> 标签：vba, ms-word

这是我的第一个问题，我必须检查大量文档并确保几个格式问题是正确的。此类问题的一个示例是确保所有句点“.”不是粗体、斜体、下划线等。另一个示例是确保所有“等”都不是粗体、斜体、下划线等。是斜体。

我有一个所需格式问题的列表。

我宁愿编写一个可以应用于每个文档的宏，而不是遍历每个文档并使用查找/替换功能。

我没有使用VBA的经验。另一方面，我有一些使用 C 语言和 C 语言编程的经验。

任何帮助将不胜感激。

顺便说一句，我不是要一个完整的程序，而是一个我可以从中学习并继续我自己的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T14:12:36.663

有几个选项：

1.在 Word 的开发人员选项卡下，您可以点击“录制宏”按钮，并在使用 ctrl + H 快捷键录制宏时多次查找和替换。

2.有多个较小的宏设置（例如下面的两个）点击“录制宏”并按照您想要的顺序运行它们。

```
Sub ItalicizeEct()
  Selection.Find.ClearFormatting
  Selection.Find.Replacement.ClearFormatting
  Selection.Find.Replacement.Font.Italic = True
  With Selection.Find
    .Text = "ect."
    .Replacement.Text = ""
    .Forward = True
    .Wrap = wdFindContinue
    .Format = True
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
  End With
  Selection.Find.Execute Replace:=wdReplaceAll
End Sub

Sub RemoveBoldPeriods()
  Dim PunctAllRng As Word.Range
  Set PunctAllRng = ActiveDocument.Range
  With PunctAllRng.Find
  .Format = True
  .Text = "."
  .Font.Bold = True
  .Replacement.Text = "."
  .Replacement.Font.Bold = False
  .Execute Replace:=wdReplaceAll
End With
End Sub 
```

3.或者简单地编写一个大宏来完成你需要的所有编辑过程

# xcode - 将本地 Subversion 存储库导入 bitbucket

> ID：14872931
> 
> 赞同：1
> 
> 时间：2013-02-14T10:40:49.690
> 
> 标签：xcode, macos, svn, bitbucket

我的 MacOS 上有一个本地 Subversion 存储库，我想将一个 iOS 项目上传到 bitbucket。

我正在尝试按照本[教程](https://confluence.atlassian.com/display/BITBUCKET/Importing+code+from+an+existing+project#Importingcodefromanexistingproject-Importanexisting,unversionedcodeprojecttoanemptyrepository)进行操作，但找不到“*入门”面板*。

如何将我的项目上传到 bitbucket？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:52:36.687

无论如何，您都不能将 Subversion 存储库上传到 BitBucket - 它**只有**Git 和 Mercurial 支持

# c# - 从 Windows 8 访问 WCF 服务

> ID：14872932
> 
> 赞同：2
> 
> 时间：2013-02-14T10:40:50.663
> 
> 标签：c#, wcf, windows-8

我正在尝试从 Windows 8 设备访问网络服务。我需要提供的凭据是托管 ECF 服务的域的域帐户的凭据。我的 Windows 8 设备不在此域中（因为它应该在 WinRT 设备上运行，它可能根本不在域中）。

我无法使身份验证正常工作。我尝试使用 HttpCredentialTypes Basic、Ntlm 和 Windows，并尝试将其与设置用户名的不同方式结合起来。

我收到此错误：

```
The authentication header received from the server was 'Negotiate,NTLM,Basic realm="webservice.company.com"'. ---> System.Net.WebException: The remote server returned an error: (401) Unauthorized. 
```

我还尝试更改 SecurityMode (Transport, TransportWithMessageCredential) 但这没有帮助。

当我尝试使用本地帐户（即网络服务器的本地帐户）访问服务时，它使用 Basic 和 Transport 工作。

**编辑：** Web 服务通过 SSL 工作，所以我必须使用 https。

# java - Spring MVC 和 Facelets 等模板引擎

> ID：14872933
> 
> 赞同：1
> 
> 时间：2013-02-14T10:40:53.350
> 
> 标签：java, jsp, templates, spring-mvc, facelets

使用 Spring MVC 时是否有真正的 JSP 标签替代品？

我正在使用 Spring MVC 将其集成到 JS 框架中。我在 Spring MVC 中缺少的是一种**模板框架**

我以前使用过带有 JSF2 的 Facelets 模板，我喜欢它。

是否有与 Spring MVC 很好地集成并提供与 Facelets 类似的功能的框架/技术？

*   没有（或很少）xml 配置
*   可以在一个模板文件中定义部分，并从一个文件中填充所有部分的所有供应内容

我正在查看 Apache Tiles 文档，看来您需要为模板中的每个部分提供单独的文件。

示例（伪代码）：

**模板.html**：

```
<insert:headerSection>
<insert:bodySection> 
```

**使用-template.html**：

```
<use-template: template.html>

<define:headerSection>this is a header</define:headerSection>
<define:bodySection>this is a body</define:bodySection> 
```

我知道我可以使用 JSP 来实现这一点，但使用 Facelets 编写代码看起来更干净、更快捷。

如果 JSP 是我最好的选择，我在[这个线程中找到了一些建议](https://stackoverflow.com/questions/1296235/jsp-tricks-to-make-templating-easier)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:53:54.357

在对 Tiles 进行了一些测试后，我决定使用**JSP**。我不需要配置，我通过编写一个简单的**标签**文件并使用`<jsp:attribute/>`和`<jsp:invoke/>`标签实现了上述功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:29:06.983

我认为 Spring Webflow 支持 JSF 2。如果你想坚持使用纯 Spring MVC，它还提供了 Tiles 和 Velocity 模板，或者你甚至可以编写自己的自定义 ViewResolver。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-20T16:31:11.820

关于freemarker 或velocity，关于如何将这些技术与Spring MVC 集成有一个清晰的解释。看看以下内容：[http ://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/view.html](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/view.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-06T19:28:59.253

It is possible to configure Facelets with Spring MVC. Check it out here: [https://github.com/acichon89/springmvcfacelets](https://github.com/acichon89/springmvcfacelets)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-21T16:55:07.703

我认为制作模板的框架正在被弃用。在这方面，您可以考虑公开一个 Restful API，以便您可以将后端与前端技术分开。通过这种方式，您可以在后端使用 Spring-MVC 的优势，并让前端来决定构建用户界面 (AngularJS) 的技术。

Spring-MVC 支持构建 Restful 控制器，你只需要将你的类标记为@RestController。

# c# - 从 Windows Phone 中的其他类更改图像

> ID：14872936
> 
> 赞同：0
> 
> 时间：2013-02-14T10:41:13.313
> 
> 标签：c#, windows-phone

我正在使用 c# 为 windows phone 开发一些应用程序，但我在尝试将一些数据（文本块、图像等）从 MainPage 传递到其他类时遇到了一些麻烦。

我可以更好地解释它：

我有 MainPage.xaml + MainPage.xaml.cs（我的图像被称为“myImage”）。这是 xaml 代码：

```
<Image  Name="myImage" DataContext="{Binding}" /> 
```

并使用此类中的按钮，我只需键入以下内容即可更改图像：

```
myImage.Source = new BitmapImage(new Uri("images/xxxx.png", UriKind.Relative)); 
```

它有效。

我有另一个类“x.cs”，我想在发生某些事情时更改图像，但是如何在不使用计时器的情况下从此类访问 myImage 并更改其源？我搜索了很多，但没有找到有趣的东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:48:41.677

有几种方法可以做到这一点。

1）。事件 - 引发事件 - 订阅事件机制。

2）。使用事件聚合器而不是传统的事件委托模型。

3）。使用 INotifyPropertyChange 或类似的对象来获取有关某些更改的通知并执行打算完成的操作。

它们都不难理解、发现、学习和实施。

# jquery - jquery if 语句不能正常工作

> ID：14872938
> 
> 赞同：1
> 
> 时间：2013-02-14T10:41:21.540
> 
> 标签：jquery, html, if-statement

我有个问题。我已经创建了一些代码，从逻辑上讲它应该可以工作，但是每次我触发它时，它都没有做它应该做的事情。我将在下面发布代码和 jsFiddle，但主要问题是当 div 的值设置为 Gold 时，会禁用第二个选择框

jQuery：

```
$('select[name="Package Options"]').change(function() {
  $('#result').html($(this).find(":selected").val());
  var result = $('#result').val();
  if(result == 'Gold') {
      $('select[name="Bolt On Options"]').attr('disabled', 'disabled');
  }
}); 
```

jsFiddle - [http://jsfiddle.net/andyjh07/xHrHA/](http://jsfiddle.net/andyjh07/xHrHA/)

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:43:31.087

您应该使用该`html()`方法来检索元素的内容，`#result`. `val()`主要用于检索表单元素的值。

```
$('select[name="Package Options"]').change(function() {
  $('#result').html($(this).find(":selected").val());
  var result = $('#result').html();  //Notice .html() instead of val()
  if(result == 'Gold') {
      $('select[name="Bolt On Options"]').attr('disabled', 'disabled');
  }
}); 
```

工作示例：http: [//jsfiddle.net/xHrHA/2/](http://jsfiddle.net/xHrHA/2/)

正如评论中指出的那样，这一切都可以简化为：

```
$('select[name="Package Options"]').change(function() {
  $('#result').html($(this).find(":selected").val());   
  if($(this).val() == 'Gold') {
      $('select[name="Bolt On Options"]').attr('disabled', 'disabled');
  }
}); 
```

工作示例：http: [//jsfiddle.net/xHrHA/3/](http://jsfiddle.net/xHrHA/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:46:36.917

你的代码太复杂了——不需要`.find`值`:selected`——它已经`this.value`在事件处理程序中可用。

You also need to be able to re-enable the control when another value is picked, so:

```
$('select[name="Package Options"]').change(function () {
    var result = this.value;
    $('#result').html(result);
    $('select[name="Bolt On Options"]').prop('disabled', result === 'Gold');
}); 
```

注意：您应该使用`.prop`来更改现有控件的属性，而不是`.attr`. 后者只应该反映 HTML 源代码中存在的属性，尽管 jQuery 确实对`disabled`属性进行了修改以确保它在这些情况下工作。另一个优点（如此处所示）是提供的值是布尔值，进一步简化了代码。

我还建议用`select[name="..."]`简单的 ID 替换您的选择器（当然，这些 ID 也必须出现在元素上）。它将使您的代码更具可读性，给出如下所示的最终解决方案，它不仅比您的原始代码短得多，而且效率更高*，并且*在选择另一个选项时将“重置”处理回“启用” ：

```
$('#package').change(function () {
    var result = this.value;
    $('#result').html(result);
    $('#bolton').prop('disabled', result === 'Gold');
}); 
```

见[http://jsfiddle.net/alnitak/gBMQ9/](http://jsfiddle.net/alnitak/gBMQ9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:44:33.583

尝试这个

***JS代码***

```
$('select[name="Package Options"]').change(function() {
  $('#result').html($(this).find(":selected").val());
  var result = $('#result').text();//use `text()` or `html()` instead of val()
  if(result == 'Gold') {
      $('select[name="Bolt On Options"]').attr('disabled', 'disabled');
  }
}); 
```

***[现场演示](http://jsfiddle.net/xHrHA/4/)***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T10:44:46.383

div 没有 value 属性，因此 val() 不能使用。您将需要使用 .text() 或 .html() 代替。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-14T10:44:56.223

尝试使用

var 结果 = $.trim('#result').val();

# php - 如何重新打包 JSON 字符串？

> ID：14872942
> 
> 赞同：0
> 
> 时间：2013-02-14T10:41:38.767
> 
> 标签：php, json, codeigniter, replace, fancybox

## JSON 通配符替换值

我的目的是在我的幻想框中添加一个动态值，我必须生成一个从数据库中获取的 JSON。

这是我在 Code Igniter 模型中的当前代码：

```
 function get_gallery_list($album) {
        $query = $this->db->query('SELECT id, img_name, caption FROM tb_gallery WHERE album = "'.$album.'"');
        $tags = array('img_name', 'caption');
        $replacementTags = array('html', 'title');
        $json = str_replace($tags, $replacementTags, json_encode($query->result()));
        $search_array = array_fill(0, sizeof($replacements), $search_pattern);
        $result = preg_replace($search_array, $replacements, $subject, 1);
        return $json;
     }

    //img_name is replace with html, caption = title.
    /* returns: [{"id":"1","html":"roadshow2012_1.jpg","title":"WOW"},{"id":"2","html":"roadshow2012_1.jpg","title":"Wew"}] */ 
```

## 我的问题是，如何在“.jpg”值中添加值？

例子：

### 从“roadshow2012_1.jpg”到“directlink-to-localhost/images/gallery/roadshow2012/roadshow2012_1.jpg”

非常感谢那些回答的人！：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:23:41.830

当您可以这样做时，您不会这样做。它的工作量更少，其他人也更容易遵循

```
$sql='SELECT id, 
        CONCAT("directlink-to-localhost/images/gallery/",img_name) AS html, 
        caption AS title 
    FROM tb_gallery 
    WHERE album = "'.$album.'"';
$query = $this->db->query($sql);
return json_encode($query->result()); 
```

...

我真的不应该按照你的要求发布如何做，因为它有点生气，但如果你必须......

当 str_replace 更快时，您没有充分理由使用 preg_replace 。

```
$query = $this->db->query('SELECT id, img_name, caption FROM tb_gallery WHERE album = "'.$album.'"');
$find = array('"img_name":"', '"caption"');
$replace = array('"html":"directlink-to-localhost/images/gallery/', '"title"');
$result=str_replace($find, $replace, json_encode($query->result());
return $json; 
```

我看不到 db 类，所以假设 query->result() 符合您的预期。

# drupal - 多个取消链接在 drupal 中无法正确重定向

> ID：14872943
> 
> 赞同：-1
> 
> 时间：2013-02-14T10:41:39.087
> 
> 标签：drupal, recurring-billing

如果用户单击其经常性费用表中的“更新”链接，然后决定不进行任何更改并单击取消而不是更新，他们将被拒绝访问，因为取消链接重定向到经常性费用的管理员视图，而不是返回到用户视图。这是 authorize.net 处理程序，有问题的 URL 如下所示：

example.com/user/263/recurring/715/cancel/authorizenet_cim?destination=user/263/recurring-fees

这是我做研究时得到的代码，我根据下面提到的更改了我的代码，但它对我没有任何帮助！

在 uc_recurring.uc_authorizenet.inc 的第 140-147 行附近：

```
$form['submit'] = array(
'#type' => 'submit',
'#value' => t('Update'),
// '#suffix' => l(t('Cancel'), 'admin/store/orders/recurring/view/fee/' . $rfid),
'#suffix' => l(t('Cancel'), $_SERVER['HTTP_REFERER']), //This is the line I have added 
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:27:39.907

这很容易，你可以添加规则，它会重定向。

# android - 在 GridView 中找不到错误原因

> ID：14872944
> 
> 赞同：-2
> 
> 时间：2013-02-14T10:41:49.967
> 
> 标签：android

我正在 Android Developers 网页上测试一个 GridView 的示例，但我得到了一些错误，尽管我已经复制并粘贴了代码！下面链接到示例。我做错了什么？一些帮助！谢谢！

![在此处输入图像描述](../Images/995c527fa8d6d64e503897d1cd172f29.png)

错误消息：此行有多个标记 - OnItemClickListener 无法解析为类型 - AdapterView 类型中的方法 setOnItemClickListener(AdapterView.OnItemClickListener) 不适用于参数（新的 OnItemClickListener(){}）

[网格视图示例](http://developer.android.com/guide/topics/ui/layout/gridview.html#example)

编辑：所有代码

MainActivity.java

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.GridView;
import android.widget.Toast;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickSelectedListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Toast.makeText(MainActivity.this, "" + position, Toast.LENGTH_SHORT).show();
        }
    });

}
} 
```

ImageAdapter.java

```
 import android.content.Context;
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.BaseAdapter;
 import android.widget.GridView;
 import android.widget.ImageView;

public class ImageAdapter extends BaseAdapter {
private Context mContext;

public ImageAdapter(Context c) {
    mContext = c;
}

public int getCount() {
    return mThumbIds.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(mThumbIds[position]);
    return imageView;
}

// references to our images
private Integer[] mThumbIds = {
        R.drawable.sample_0, R.drawable.sample_1,
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
};
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:46:26.523

你可以试试这个`gridView.setOnItemSelectedListener`

这对我来说很好

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T10:57:35.600

你需要导入这个

```
import android.widget.GridView;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.view.View;

       or 
```

使用 BaseAdapter

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T10:54:29.770

你能导入以下类吗？

```
import android.widget.GridView;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.view.View; 
```

然后保存文件。一个。eclipse 上的等价物是 ctrl shift o 然后是 ctrl s

# c - 使用互斥锁和不同的生命周期创建多个线程

> ID：14872949
> 
> 赞同：0
> 
> 时间：2013-02-14T10:41:59.210
> 
> 标签：c, pthreads, mutex, semaphore

```
void process(int number, int time) {
    printf("Prosess %d kjører\n", number);
    sleep(time);
    printf(" Prosess %d terminated after %d sekunder\n", number, time);
}

int main(void)  {
    pid_t pid[7];
    int status= 0;

    if((pid[1]= fork())== 0)    {
        process(1, 1);
        exit(0);
    }
    if((pid[3]= fork())== 0)    {
        process(3, 3);
        exit(0);
    }
    waitpid(pid[1], NULL, 0);

    if((pid[5]= fork())== 0)    {       
        process(5, 3);
        exit(0);
    }       
    if((pid[2]= fork())== 0)    {
        process(2, 2);
        exit(0);
    }
    waitpid(pid[3], NULL, 0);
    //waitpid(pid[2], NULL, 0);
    if((pid[4]= fork())== 0)    {
        process(4, 2);
        exit(0);
    }
    waitpid(pid[5], NULL, 0);

    if((pid[6]= fork())== 0)    {   
        process(6, 3);
        exit(0);
    }   
    wait(NULL);
        while(wait(&status)> 0) {
        //We just wait for the children to finish their processes
    }
    printf("All processes is now terminated\n");
    return 0;
} 
```

我怎样才能把这段代码做同样的事情，而是使用 pthread 和互斥锁？我们被要求创建一个带有 id 的结构方法（应该有 6 个线程，每个线程睡眠不同的时间。），sec（睡眠时间）和 int 信号 [6]。它是一项学校任务，我们没有接受任何 c 培训。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:44:40.927

*您将通过同一个*互斥锁同步对不同线程之间的任何共享数据的访问，然后您将`join_all`在主线程中执行一个等待所有线程完成的操作。

我将实施留给读者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T13:39:59.897

```
sem_t sem[6];     /* one semaphore for each thread */

struct threadargs {
  int id;         /* thread number */
  int sec;        /* how many seconds to sleep */
  int signal[6];  /* which threads to signal when done */
};

void* tfunc(void *arg) {
  int i;
  struct threadargs *targs=arg;
// VENT PÅ DIN EGEN SEMAFOR
  sem_wait(&sem[targs->id-1]);
  printf("Tråd %d kjører\n", targs->id);
  sleep(targs->sec);
  printf("Tråd %d er ferdig og vekker kanskje andre...\n", targs->id);
// ITERATE OVER Signal-array and wake up thread nr "i" if Signal[i] is 1
  for(i= 0; i< 6; i++)  {
    if(targs->signal[i]== 1)
        sem_post(&sem[i]);
  }
}

int main(void)
{
  int i,j;
  pthread_t tid[6];
  struct threadargs *targs[6];

  /* allocate memory for threadargs and zero out semaphore signals */
  for(i=0;i<6;i++) { 
    targs[i] = (struct threadargs*) malloc(sizeof(struct threadargs));
    for(j=0;j<6;j++) 
    targs[i]->signal[j]=0;
  }

  targs[0]->id=1;             /* thread number 1 */
  targs[0]->sec=1;            /* how long to sleep */
  targs[0]->signal[1]=1;      /* which threads to wake up when done */
  targs[0]->signal[4]=1;
// INITIALIZES THREADS SEMAPHORE TO 1 OR 0
  sem_init(&sem[0], SHARED, 1);
// START THREAD
  pthread_create(&tid[0], NULL, tfunc, (void*) targs[0]);

  targs[1]->id= 2;             /* thread number 2 */
  targs[1]->sec=2;            /* how long to sleep */
  targs[1]->signal[3]=1;      /* which threads to wake up when done */
  sem_init(&sem[1], SHARED, 0);
  pthread_create(&tid[1], NULL, tfunc, (void*) targs[1]);

  targs[2]->id= 3;             /* thread number 3 */
  targs[2]->sec=3;            /* how long to sleep */
  sem_init(&sem[2], SHARED, 0);
  pthread_create(&tid[2], NULL, tfunc, (void*) targs[2]);

  targs[3]->id= 4;             /* thread number 4 */
  targs[3]->sec=2;            /* how long to sleep */
  sem_init(&sem[3], SHARED, 0);
  pthread_create(&tid[3], NULL, tfunc, (void*) targs[3]);

  targs[4]->id= 5;             /* thread number 5 */
  targs[4]->sec=3;            /* how long to sleep */
  targs[4]->signal[5]=1;      /* which threads to wake up when done */
  sem_init(&sem[4], SHARED, 0);
  pthread_create(&tid[4], NULL, tfunc, (void*) targs[4]);

  targs[5]->id= 6;             /* thread number 6 */
  targs[5]->sec=3;            /* how long to sleep */
  sem_init(&sem[5], SHARED, 0);
  pthread_create(&tid[5], NULL, tfunc, (void*) targs[5]);

  for(i=0;i<6;i++) 
    pthread_join(tid[i], NULL);

  return 0;
} 
```

这是我使用的代码。带信号量的 Pthreads =) 谢谢你的帮助！

# iphone - UIImagepickercontroller：转换为低质量视频错误

> ID：14872953
> 
> 赞同：5
> 
> 时间：2013-02-14T10:42:16.443
> 
> 标签：iphone, ios, objective-c, avfoundation

我`[info objectForKey:UIImagePickerControllerMediaURL]`从 UIImagepickercontroller 的`didFinishPickingMediaWithInfo`方法中获取 inputurl。

```
NSURL *inputURL = [NSURL URLWithString:inputurlstring]; 
```

我从这段代码中给出 outputurl

```
 NSString  *documentsDirectory = [paths objectAtIndex:0];
        NSString *videoPath = [NSString stringWithFormat:@"%@/%@", documentsDirectory,@"capturedvideo.MOV"];
        NSURL *outputURL = [NSURL fileURLWithPath:videoPath]; 
```

我使用以下代码获取低质量视频

```
 - (void)convertVideoToLowQuailtyWithInputURL:(NSURL*)inputURL 
    outputURL:(NSURL*)outputURL 
    handler:(void (^)(AVAssetExportSession*))handler 
    { 

    [[NSFileManager defaultManager] removeItemAtURL:outputURL error:nil]; 
    AVURLAsset *asset = [AVURLAsset URLAssetWithURL:inputURL options:nil]; 
    AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:asset presetName:AVAssetExportPresetLowQuality]; 
    exportSession.outputURL = outputURL; 
    exportSession.outputFileType = AVFileTypeQuickTimeMovie; 

    [exportSession exportAsynchronouslyWithCompletionHandler:^(void) 
    { 
    if (exportSession.status == AVAssetExportSessionStatusCompleted) 
    { 
    printf("completed\n"); 

    } 
    else 
    { 
    printf("error\n"); 
    NSLog(@"error is %@",exportSession.error); 

    } 

    }]; 
} 
```

仅使用大文件时出现以下错误。因为当我使用小尺寸视频文件时，我没有收到任何错误。

```
Error Domain=NSURLErrorDomain Code=-1 "unknown error" UserInfo=0x616d890         
 {NSErrorFailingURLStringKey=/private/var/mobile/Applications/EE1E6701-EED0-4830-BD1D-7366680713C0/tmp//trim.7mL7VS.MOV, NSErrorFailingURLKey=/private/var/mobile/Applications/EE1E6701-EED0-4830-BD1D-7366680713C0/tmp//trim.7mL7VS.MOV, NSLocalizedDescription=unknown error, NSUnderlyingError=0x2d1460 "The operation couldn’t be completed. (OSStatus error -12935.)", NSURL=/private/var/mobile/Applications/EE1E6701-EED0-4830-BD1D-7366680713C0/tmp//trim.7mL7VS.MOV} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:48:56.773

上面的代码是完美的作品。唯一的变化是 inputURL。

在我将 inputURL 更改为 fileURLWithPath 之后：

```
 NSURL *inputURL = [NSURL fileURLWithPath:inputurlstring]; 
```

现在它完美地工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T05:33:15.337

而不是这个

```
[info objectForKey:UIImagePickerControllerMediaURL]; 
```

采用

```
NSURL *imageURL = [info valueForKey:UIImagePickerControllerReferenceURL]; 
```

`AVAssetLibrary`只能通过它访问您的视频`reference url`。

# android - 当我展开子行时，Expandablelistview 的背景变得更白

> ID：14872977
> 
> 赞同：3
> 
> 时间：2013-02-14T10:43:32.753
> 
> 标签：android, expandablelistview

当我展开子行时，Expandablelistview 的背景变得更白。我该如何解决？

我设置：

```
android:cacheColorHint="@null"
android:scrollingCache="false" 
```

我也试过：

```
android:cacheColorHint="@android:color/transparent"
android:scrollingCache="false" 
```

但这并不能解决问题。

展开子前的截图：

[http://i.imgur.com/fbaKPus.png](http://i.imgur.com/fbaKPus.png) [http://i.imgur.com/pHejwDn.png](http://i.imgur.com/pHejwDn.png)

后：

[http://i.imgur.com/hftsxhA.png](http://i.imgur.com/hftsxhA.png)

编辑：

应用程序使用 Sherlock 主题：...

可扩展列表视图 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ExpandableListView
        android:id="@+id/expandableListView"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/background"
        android:cacheColorHint="@android:color/transparent"
        android:childDivider="@color/expandablelist_divider"
        android:divider="@color/expandablelist_divider"
        android:dividerHeight="1dp"
        android:groupIndicator="@drawable/expandablelistindicator" >
    </ExpandableListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:08:32.907

主题导致您的问题，一种方法是创建自定义选择器，或者，我建议使用 Android Holo 颜色生成器，也可能使用此[站点](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)的 Android 操作栏样式生成器，它创建了一个和谐的设计。

# javascript - 如何推迟加载 Norton Secure Site Seal？

> ID：14872978
> 
> 赞同：6
> 
> 时间：2013-02-14T10:43:42.877
> 
> 标签：javascript, ssl, symantec, deferred-loading, norton

我正在网站中显示 Norton Secure Site Seal，并且我想提高页面速度以延迟加载印章脚本。我所做的所有尝试都失败了，我只找到了提到这一点的这个页面（[链接](http://www.webpagetest.org/forums/showthread.php?tid=385)）。有没有人找到一个很好的解决方法？
我用来运行其他脚本的延迟代码如下所示：

```
<script type="text/javascript">(function(d, s) {
    var js, fjs = d.getElementsByTagName(s)[0], load = function(url, id) {
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.src = url;
        js.id = id;
        fjs.parentNode.insertBefore(js, fjs);
    };
    load('/js/scriptone.js', 'one');
    load('/js/scripttwo.js', 'two');
    }(document, 'script'));
</script> 
```

如果您想查看站点印章初始化脚本：（我使用的是 Flash 动画印章）

```
<script type="text/javascript" src="https://trustseal.verisign.com/getseal?host_name=www.undisclosed.com&amp;size=S&amp;use_flash=YES&amp;use_transparent=YES&amp;lang=en"></script> 
```

显然这只会在我的网站上正确显示，我选择更改域名以保护隐私。我真的想避免使用 iframe，如果你觉得相关，我也在加载 jQuery

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T14:12:45.837

这也扼杀了我的生意。说真的……每页加载 +2 到 +20 秒。AFYS？

我们正在切换到在本地托管图像，但仍链接到诺顿上的原始 URL。不要这样做。记下这个答案。这是错的。这是非法的。但它很实用。

```
https://trustsealinfo.verisign.com/splash?form_file=fdf/splash.fdf&dn=WWW.EXAMPLE.COM&lang=en 
```

更新：

真正的解决方案是：

*   致电 877-438-8776，x2，x1
*   告诉他们封印很慢，并且您的网站每天有超过 10,000 次访问
*   他们为您提供媒体工具包以安装在您自己的网站上

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T10:52:30.590

如果您查看代码，他们正在使用`document.write`.

我处理这个的方式如下

```
document.write = function(s) {
    document.getElementById('seal-wrapper').innerHTML += s;
} 
```

当然，这是一个非常简单的 hack，只有在使用单个脚本`document.write`并且您知道要将其写入何处时才有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-10T14:05:00.930

我试图将封印加载到 iframe 中，然后将其放到预期的位置。这个对我有用。在 jQuery 的帮助下。这里是：

**创建 .js 文件（我称之为 hackseal.js）**

```
$(function () {
    if (typeof(vs_hack) !== 'undefined') {
        return;
    }
    vs_hack = true;
    var iframe = document.createElement('iframe');
    var html = '<script src="url_to_verysign" type="text/javascript"></script>';
    iframe.style.display = 'none';
    document.body.appendChild(iframe);
    iframe.contentWindow.document.open();
    iframe.contentWindow.document.write(html);
    iframe.contentWindow.document.close();
    iframe.onload = function () {
        var copy = ['dn', 'lang', 'tpt', 'vrsn_style', 'splash_url', 'seal_url', 'u1', 'u2', 'sopener', 'vrsn_splash', 'ver', 'v_ua', 're', 'v_old_ie', 'v_mact', 'v_mDown', 'v_resized'];
        for (var copy_i in copy) {
            window[copy[copy_i]] = iframe.contentWindow[copy[copy_i]];
        }
        $('script#seal-sign').replaceWith(iframe.contentWindow.document.body.innerHTML);
    }
}); 
```

**从此更改原始代码**

```
<script type="text/javascript" src="url_to_verysign"></script> 
```

**对此**

```
<script id="seal-sign" type="text/javascript" src="url_to_hackseal.js"></script> 
```

# facebook - 尝试发送 Facebook 通知，导致“抱歉，出现问题”响应

> ID：14872984
> 
> 赞同：1
> 
> 时间：2013-02-14T10:43:54.887
> 
> 标签：facebook, facebook-graph-api, notifications, facebook-page

从标题开始，我正在尝试使用 tha facebook 通知 api。我已经阅读了文档，并且正在尝试对图表进行 POST，如下所示：

```
String notificationURL = 
                "https://graph.facebook.com/" +
                String.valueOf(facebookUserId) + 
                "/notifications?" +
                "access_token=444146492324422|8LOOIj7xPT2LFlx14_3SqKCDgVc"  +
                "&href=https://apps.facebook.com/Nmctesting" + 
                "&template=@["+String.valueOf(facebookUserId)+"]! You have won!!"; 
```

访问令牌是从图形查询返回的：

```
String appAccessURL = "https://graph.facebook.com/oauth/access_token?client_id=444146492324422"+
           "&client_secret=[MYAPPSECRET]" +
           "&grant_type=client_credentials"; 
```

我曾尝试使用当时是管理员的登录用户的访问令牌，但它没有用。

对于我所做的任何测试，我都会收到 html 页面作为响应，其中显示“抱歉，出了点问题”

出了什么问题？！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T19:45:09.310

确保您的 FACEBOOK_USER_ID 是有效的 Facebook 用户名。您可能需要先对它进行 URI 转义。如果用户名正确，则 https://www.facebook.com/FACEBOOK_USER_ID 将是用户的 Facebook 页面，因此请先在浏览器中点击它，然后再尝试其他任何操作。

# sql - 将 2 个 sql 查询合并为 1 个查询

> ID：14872986
> 
> 赞同：1
> 
> 时间：2013-02-14T10:43:56.283
> 
> 标签：sql, db2

我有 2 个查询从同一个表中检索记录。我想要一张表中的所有结果。

第一次查询

```
SELECT ID, NAME, FKNGRP
  FROM EMPINFO      
 WHERE ID = ‘03’
   AND SERIALNO =  ‘N’
   AND (FKNGRP  = 1001 OR FKNGRP = 1002 ) 
```

第二次查询

```
SELECT ID, NAME, FKNGRP
  FROM EMPINFO      
 WHERE ID = ‘04’
   AND SERIALNO =  ‘N’
   AND (FKNGRP  = 1001 OR FKNGRP = 1005 OR FKNGRP = 1009  ) 
```

我想结合这两个查询并在 DB2 中得到结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:50:21.820

```
SELECT ID, NAME, FKNGRP
FROM EMPINFO      
WHERE 
(
   ID = ‘04’
   and SERIALNO =  ‘N’
   AND FKNGRP in (1001, 1005, 1009)
)
or
(
   ID = ‘03’
   and SERIALNO =  ‘N’
   AND FKNGRP in (1001, 1002)
) 
```

# java - 以编程方式检查编译错误 java 文件

> ID：14872987
> 
> 赞同：0
> 
> 时间：2013-02-14T10:43:58.220
> 
> 标签：java

我想以编程方式检查 java 类是否有编译错误。你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:45:10.103

您可以使用[JavaCompiler API](http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaCompiler.html)来编译该类，它会通知您是否存在一些编译错误。

人为的示例（使用字符串作为输入，但您可以改为读取文件）：

```
String className = "somepackage.YourClass";
String body = "package somepackage;   "
                + "public class YourClass {         "
                + "}                              ";
compile(className, body, TEMP_PATH); //TEMP_PATH: Where the .class file is saved 
```

其中 compile 可能如下所示：

```
private static void compile(String className, String body, Path path) throws Exception {
    List<JavaSourceFromString> sourceCode = Arrays.asList(new JavaSourceFromString(className, body));

    JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
    StandardJavaFileManager fileManager = compiler.getStandardFileManager(null, null, null);
    fileManager.setLocation(StandardLocation.CLASS_OUTPUT, Arrays.asList(path.toFile()));
    boolean ok = compiler.getTask(null, fileManager, null, null, null, sourceCode).call();

    System.out.println("compilation ok = " + ok);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:49:44.890

来自[how-do-i-programmatically-compile-and-instantiate-a-java-class](https://stackoverflow.com/questions/2946338/how-do-i-programmatically-compile-and-instantiate-a-java-class)

> 你需要先编译它。这可以使用[javax.tools API](http://docs.oracle.com/javase/6/docs/api/javax/tools/package-summary.html)以编程方式完成。这只需要在JRE 之上的本地机器上安装[JDK 。](http://www.oracle.com/technetwork/java/javase/downloads/jdk6-jsp-136632.html)

# drop-down-menu - Yii 组合框验证

> ID：14872993
> 
> 赞同：1
> 
> 时间：2013-02-14T10:44:10.743
> 
> 标签：drop-down-menu, yii, validation

我正在使用 Yii 框架进行开发

这是我的观点的一部分

```
echo CHtml::dropDownList('codCity', '',$cityList); 
```

下拉列表被填满，所以最后，选项是这样的

```
<option value="XX">(Select a city)</option>
<option value="RM">Rome</option>
<option value="FL">Florence</option>
... 
```

从验证的角度来看，第一个选项（XX）无效，而其他选项有效，所以在我的模型中我有

```
public function rules()
{
        return array(
            ...
            array('codCity', 'compare', 'operator'=>'!=', 'compareValue'=>'XX' ,
                  'message'=>'please select a city'),
            ...
    );
} 
```

这是我应用于 codCity 字段的唯一验证规则。

不幸的是，事情并没有像我想象的那样发展，所有选项都被验证为“好”，即使是坏的（XX）

有什么建议么？

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:26:54.780

看看[http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail](http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail)

您可以指定一个`prompt`选项。

> prompt：字符串，指定显示为第一个列表选项的提示文本。它的值为空。请注意，提示文本不会是 HTML 编码的。

# logging - Scons 记录标准输出/标准错误

> ID：14872994
> 
> 赞同：2
> 
> 时间：2013-02-14T10:44:12.267
> 
> 标签：logging, scons

我是 SCons 的初学者，我只是想记录来自 stdout 和 stderr 的所有信息。

一个简短的问题：如何将所有 stdout/stderr 输出写入文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:02:07.370

`scons 1>std.out 2>std.err`

# ios - 如何检查互联网连接是否处于非活动状态 - 尽可能快？

> ID：14872997
> 
> 赞同：0
> 
> 时间：2013-02-14T10:44:21.363
> 
> 标签：ios, objective-c

有谁知道是否有（真正）快速的方法来检查不活动的互联网连接？

我已经实施了[这里](https://stackoverflow.com/questions/1083701/how-to-check-for-an-active-internet-connection-on-iphone-sdk)建议的解决方案，它可以工作，但需要大约 30 秒才能确定是否没有互联网连接。

我也试过：

```
- (BOOL) isConnectionAvailable {
    SCNetworkReachabilityFlags flags;
    BOOL receivedFlags;

    SCNetworkReachabilityRef reachability = SCNetworkReachabilityCreateWithName(CFAllocatorGetDefault(), [@"www.google.com" UTF8String]); 

    receivedFlags = SCNetworkReachabilityGetFlags(reachability, &flags);

    CFRelease(reachability);

    return  (!receivedFlags || flags == 0) ? FALSE : TRUE;
} 
```

这也有效，但仍然需要大约 20-30 秒才能确定是否没有活动的互联网连接。

我觉得它必须是一种快速确定是否没有互联网连接的方法。如果有人能指出我一个好的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:53:11.287

我想“最快”的方法是简单地利用最少数据的连接。只需设置适合您的适当超时。

Apple 甚至在 WWDC 上建议**您应该只是尝试**建立连接，因为可达性 API 在某些条件下可能会提供不准确的答案。正确测量的唯一方法是发送真实请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:55:25.463

您可以在您的应用程序中创建一个后台线程，该线程将检查是否有互联网连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:26:33.703

我在我的一个应用程序中使用了这个自定义的可达性类：（代码由于长度而放在别处）Reachability.h - [http://pastebin.com/qUVp4tFb](http://pastebin.com/qUVp4tFb) Reachability.m - [http://pastebin.com/3C8LUjkS](http://pastebin.com/3C8LUjkS)

确保 #import 它，并调用以下返回 BOOL 的命令：

```
([[Reachability reachabilityForInternetConnection] currentReachabilityStatus] == ReachableViaWWAN); 
```

需要大约一秒钟的时间来确定此类的 Internet 连接是否处于活动状态。

希望有帮助:)

# java - 将外部类添加到现有项目

> ID：14872998
> 
> 赞同：0
> 
> 时间：2013-02-14T10:44:23.410
> 
> 标签：java, android, jar

我最近收到了来自制造商的定制 SDK。我在我的项目中使用了它，但我注意到我需要的类不包含在给定的 jar 中。

基本上在我的平台文件夹中，我有一个 android 2.3.5 存储库，包括一个 jar、4 个文件（build.prop、framework.aidl、sdk.properties、source.properties 和包含我需要的自定义类的存储库。

我应该用这些构建一个jar文件吗？我的项目中有一个现有的 manifest.xml 文件，这是导致问题的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:49:31.983

将你的库作为android项目导入eclipse，然后你可以在项目属性中标记“isLibrary”。这允许您将项目作为库包含在主项目中。

# wcf - 了解提琴手统计数据

> ID：14872999
> 
> 赞同：2
> 
> 时间：2013-02-14T10:44:26.577
> 
> 标签：wcf, http, fiddler

我们正在向托管在我们服务器上的第 3 方系统发送 HTTP WCF 请求，并且在发送请求和获得响应之间经历了明显的延迟。第 3 方声称他们在几秒钟内完成了他们的工作，但在提琴手中，我可以`ServerBeginResponse`看到`GotResponseHeaders`.

现在我不确定是什么导致了这种延迟？有人可以解释 Fiddler 中的`ServerBeginResponse`和`GotResponseHeaders`计时器的实际含义吗？

![Fiddler 统计选项卡屏幕截图](../Images/4e84ef47b67d70ed0ee56a210b337308.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T19:55:11.017

计时器的含义几乎与他们所说的完全一样——当 Fiddler 完成将 HTTP 请求传输到服务器时，就会设置**ServerGotRequest计时器。**当Fiddler 从服务器读取完整的响应标头集时，将设置**GotResponseHeaders计时器。**

**在您的屏幕截图中， ServerBeginResponse**（在返回服务器响应的第一个字节时设置）和**GotResponseHeaders**之间存在巨大延迟，这表明服务器花费了大量时间来完成 HTTP 响应标头的返回。

如果您向我发送（通过帮助 > 发送反馈）此流量的 SAZ 捕获，我可以仔细查看它。