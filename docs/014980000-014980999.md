# StackOverflow 问答 14980000-14980999

# php - 由于并发用户负载过重导致 502 bad gateway 错误

> ID：14980002
> 
> 赞同：-1
> 
> 时间：2013-02-20T12:34:43.067
> 
> 标签：php, nginx

我的服务器上安装了 Nginx + PHP FPM。我们正在为 30 个并发用户长期加载服务器。

对于初始用户，它工作正常，但一段时间后它开始抛出 502 bad gateway 错误。

我放了一些nginx php-fpm的日志和php-fpm的慢日志。

由于长时间运行的脚本和服务器上的负载，有条目记录在 php-fpm 的慢日志中。我认为这是 502 bad gateway 错误的原因。但我不知道如何解决这个问题。

*   我需要在 php-fpm.conf 中进行哪些调整才能解决此错误？
*   如何让 nginx 长时间等待 php-fpm 的响应？
*   如何增加 php-fpm 最大执行时间？

以下是附上的日志。

### NGINX 日志

> 2013/01/29 15:03:38 [错误] 2493#0: *1046562 recv() 在从上游读取响应标头时失败（104：对等方重置连接），客户端：49.248.0.2，服务器：******* *** *** .com，请求：“GET MY_SCRIPT_URI HTTP/1.1”，上游：“fastcgi://127.0.0.1:9000”，主机：“ ***** ****** .com”，引用者：“MY_SCRIPT_URL”**
> 
>  **2013/01/29 15:03:39 [错误] 2493#0: *1046561 recv() 在从上游读取响应标头时失败（104：对等方重置连接），客户端：49.248.0.2，服务器：******* ***** .com，请求：“GET MY_SCRIPT_URI HTTP/1.1”，上游：“fastcgi://127.0.0.1:9000”，主机：“ ***** ****** .com”，引用者：“MY_SCRIPT_URL”****

 ****这种类型的错误很多，并且在整个文件中重复出现。

### PHP FPM 日志

```
[14-Feb-2013 12:54:13] ERROR: failed to ptrace(PEEKDATA) pid 10748: Input/output error (5)
[14-Feb-2013 12:54:18] ERROR: failed to ptrace(PEEKDATA) pid 10112: Input/output error (5)
[14-Feb-2013 12:54:18] ERROR: failed to ptrace(PEEKDATA) pid 12147: Input/output error (5)
[14-Feb-2013 12:54:19] ERROR: failed to ptrace(PEEKDATA) pid 30857: Input/output error (5)
[snip: many more] 
```

### PHP FPM 慢日志

> [14-Feb-2013 12:55:13] [pool www] pid 10748 script_filename = MY_SCRIPT_PATH [0x00007f446e8e06b0] curl_exec() MY_SCRIPT_PATH_1.php:317 [0x00007f446e8e0490] callService() MY_SCRIPT_PATH_2:1331 [0x00007f446e8e0148] convertToPurchaseOrders() MY_SCRIPT_PATH_3:15 [0x00007fff0102b4d0] convertToPurchaseOrders() 未知：0 [0x00007f446e8de0d8] call_user_func_array() MY_SCRIPT_PATH_4:359 [0x00007f446e8dd4d0] +++ 转储失败
> 
> [14-FEB-2013 12:55:13] [pool www] pid 10117 script_filename = my_script_path [0x00007f446e8e8e06b0 curl_exec（curl_exec（）my_sscript_ppath_ppath_ppath_ppath_path_path_path_path_path_path_path_path_path_path：317 [0x000077f446e.346e.88e.8e8e8ebeservice_14.814ebevice]：34.14.8e8ebeervice） [0x00007fff0102b4d0] convert() 未知：0 [0x00007f446e8de0d8] call_user_func_array() MY_SCRIPT_PATH_4:359 [0x00007f446e8dd4d0] +++ 转储失败

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:54:29.000

首先，30 个并发用户是一个相当低的负载——取决于应用程序和硬件，我期待更多。

阅读慢日志，看起来您的应用程序正在调用 curl_exec() 命令，并且该命令很慢。我猜正在发生的是您的 30 个并发用户都在请求您的脚本；反过来，您的脚本正在某处调用另一个 Web 应用程序，该应用程序要么响应非常慢，要么完全超时（基于`max_execution_time`php.ini）。我不知道 NGINX 和 PHP-FPM 的来龙去脉，但我认为它触发的并发 PHP 实例的数量是最大的；由于这些实例都在等待您的 CURL 请求返​​回，因此 NGINX 无法启动更多 PHP 实例，而是返回一个错误的网关。

我首先要看的是加快脚本的响应时间，或者通过异步运行 CURL 请求，或者缓存它，或者找到另一种加速它的方法——运行同步 CURL 请求基本上意味着性能和可伸缩性您网站的性能完全取决于您调用的 URL 的性能和可扩展性。

如果您不能这样做，请将 CURL 的超时时间（php.ini 中的 max_execution_time）减少到 5 秒；这将导致您的一些 CURL 请求失败，但至少您的应用可以处理该问题并更快地返回给用户；这也意味着您等待的 PHP 线程要少得多。

大概有一种方法可以增加 NGINX 启动的 PHP 实例的数量。你可以玩这个，但你只是稍微转移了问题 - 没有 Web 服务器可以优雅地支持大量等待线程。****

# c# - Resharper 向公共、内部或受保护建议 void 方法 - 如何始终拥有需求访问修饰符

> ID：14980006
> 
> 赞同：1
> 
> 时间：2013-02-20T12:34:55.923
> 
> 标签：c#, visual-studio-2012, resharper, resharper-7.0

在我的解决方案中，我有这样的方法设置

```
void OnFooLoaded(param bar)
{
    // method body
} 
```

使用 ReSharper 7，它表明我可以将方法设为公共、内部或受保护的。我似乎无法弄清楚我可以在哪里更改它，因此方法签名**必须**具有可见性修饰符（即私有、公共等）。我应该在 Resharper 选项 -> 代码检查 -> 检查严重性下查看还是在其他地方我我错过了一个设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:48:58.860

在 ReSharper 中，是否添加访问修饰符是一种格式化首选项。您可以在 处更改它`ReSharper | Options -> Code Editing | C# | Formatting Style | Other | Modifiers`。打开`Use explicit ...`以在进行代码清理时始终添加修饰符，或者将其关闭以不执行此操作。

但 ReSharper 无法突出显示或下划线使用错误格式样式的地方（例如，没有访问修饰符的地方）。您应该为此尝试 StyleCop。

# regex - emacs 语法高亮数字不是单词的一部分（使用正则表达式？）

> ID：14980008
> 
> 赞同：4
> 
> 时间：2013-02-20T12:35:01.563
> 
> 标签：regex, emacs, syntax-highlighting

我最近搬到了 emacs，我习惯/喜欢突出显示的数字。我从[这里](http://ubuntuforums.org/showthread.php?t=688505)获得的快速破解将以下内容放入我的`.emacs`：

```
(add-hook 'after-change-major-mode-hook
      '(lambda () (font-lock-add-keywords 
                   nil 
                   '(("\\([0-9]+\\)" 
                      1 font-lock-warning-face prepend))))) 
```

这提供了一个良好的开端，即突出显示*任何数字。*但是，我是一个完整的正则表达式初学者，理想情况下会喜欢以下行为：

*   如果它是浮点数的一部分，也要突出显示小数点，例如 12.34
*   如果它是单词的下一个/部分，请不要突出显示数字的任何部分。例如在这些情况下： foo11 ba11r 11spam，不应突出显示*任何'1'*
*   允许在两个数字整数内使用“e”以允许科学记数法（非必需，奖励学分）

不幸的是，这看起来很像一个我不愿意发布的“为我做这个”问题，但到目前为止我自己还没有取得任何体面的进展。

据我所知，发现`[^a-zA-Z][0-9]+[^a-zA-Z]`除了字母以外的任何东西都可以匹配（例如等号），但这所做的只是在突出显示中包含相邻的符号。我不知道如何告诉它“如果两边都没有字母，则仅突出显示数字”。

当然，我无法想象正则表达式是复杂语法突出显示的方式，因此也欢迎任何好的数字突出显示在 emacs 想法中，

非常感谢任何帮助。（如果有任何区别，这是在 Python 编码时使用的。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T13:47:46.590

首先转到您的暂存缓冲区并输入一些测试文本。放一些数字，一些包含数字的标识符，一些缺少部分的数字（如`.e12`）等。这些将是我们的测试用例，让我们快速进行实验。现在运行`M-x re-builder`以进入正则表达式构建器模式，这将让您针对当前缓冲区的文本尝试任何正则表达式以查看它匹配的内容。这是一个非常方便的模式；您将可以一直使用它。请注意，因为 Emacs lisp 要求您将正则表达式放入字符串中，所以您必须将所有反斜杠加倍。你已经正确地做到了，但我不会在这里把它们加倍。

因此，将匹配限制为不属于标识符的数字非常容易。\b 将匹配单词边界，因此在正则表达式的任一端放置一个将使其匹配整个单词

您可以通过在您开始使用的字符类中添加一个句点来匹配浮点数，使其变为`[0-9.]`. 不幸的是，这可以完全匹配一个时期。我们真正想要的是`[0-9]*\.?[0-9]+`，它将匹配 0 个或多个数字，后跟一个可选的句点，后跟一个或多个数字。

前导符号可以与 匹配`[-+]?`，因此得到负数。

为了匹配指数，我们需要一个可选的 group: `\(...\)?`，因为我们只使用它来突出显示，实际上不需要分离组的内容，我们可以这样做`\(?:...\)`，这将节省正则表达式匹配器的时间。在组内，我们需要匹配一个“e”（`[eE]`）、一个可选符号（`[-+]?`）和一个或多个数字（`[0-9]+`）。

把它们放在一起：`[-+]?\b[0-9]*\.?[0-9]+\(?:[eE][-+]?[0-9]+\)?\b`。请注意，我已将可选符号放在第一个单词边界之前，因为“+”和“-”字符创建了单词边界。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T13:34:41.733

首先，丢掉`add-hook`和`lambda`。`font-lock-add-keywords`通话也不需要。如果您只希望它用于`python-mode`，请将模式符号作为第一个参数而不是`nil`.

其次，有两种主要方法可以做到这一点。

1.  在数字周围添加一个分组结构。font-lock-keywords 表单中的数字对应于组，所以这将是`'(("\\([^a-zA-Z]\\([0-9]+\\)[^a-zA-Z]\\)" 2 font-lock-warning-face prepend)`. 但是，外部分组在这里相当无用，因此可以简化为`'(("[^a-zA-Z]\\([0-9]+\\)[^a-zA-Z]" 1 font-lock-warning-face prepend)`.

2.  只需使用符号反斜杠结构的[开头和结尾。](http://www.gnu.org/software/emacs/manual/html_node/elisp/Regexp-Backslash.html#Regexp-Backslash)然后正则表达式看起来像这样：`\_<[0-9]+\_>`. 我们可以在此处突出显示整场比赛，因此不需要组号：`'(("\\_<[0-9]+\\_>" . font-lock-warning-face prepend)`。作为一种变体，您可以使用词首和词尾结构，但您可能不想突出显示与下划线相邻的数字或`python-mode`语法 class 中具有的任何其他字符（如果有） `symbol`。

最后，可能不需要`prepend`. 在此之前这些数字可能都未突出显示，如果您考虑与其他次要模式（如 ）的可能交互`whitespace`，您最好选择`append`，或者完全省略此元素。

最终结果：

```
(font-lock-add-keywords nil '(("\\_<[0-9]+\\_>" . font-lock-warning-face))) 
```

# c# - 如何在c#中的ipaddress数组中按升序排列所有ipaddress

> ID：14980010
> 
> 赞同：2
> 
> 时间：2013-02-20T12:35:07.247
> 
> 标签：c#, .net-3.5

如何在c#中的ipaddress数组中按升序排列所有ipaddresses我有ipaddress类的数组

```
ipaddress[] device = new ipaddress[10]; 
```

它有不同的 ip 值，我想按升序排列它们

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T12:43:22.917

您可以使用*Version-trick*：

样本数据：

```
IPAddress[] ips = new[]{
        IPAddress.Parse("192.168.1.4"),
        IPAddress.Parse("192.168.1.5"),
        IPAddress.Parse("192.168.2.1"),
        IPAddress.Parse("10.152.16.23"),
        IPAddress.Parse("69.52.220.44"),
    }; 
```

升序：

```
var sortedIps = ips
    .Select(ip => Version.Parse(ip.ToString()))
    .OrderBy(v => v)
    .Select(v => IPAddress.Parse(v.ToString()))
    .ToArray(); 
```

结果：

```
{10.152.16.23}  System.Net.IPAddress
{69.52.220.44}  System.Net.IPAddress
{192.168.1.4}   System.Net.IPAddress
{192.168.1.5}   System.Net.IPAddress
{192.168.2.1}   System.Net.IPAddress 
```

**更新**

> 你：它给出了这个错误'System.Version'不包含'Parse'的定义。我：那你至少没有使用 .NET framework 4.0。 [Version.Parse](http://msdn.microsoft.com/en-us/library/system.version.parse%28v=vs.100%29.aspx) 你：是的，我正在使用 .NET 框架 3.5 那么我需要做些什么改变呢？

然后你可以使用 [`IPAddress.GetAddressBytes`](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.getaddressbytes%28v=vs.90%29.aspx)for `Enumerable.OrderBy`/ `ThenBy`：

```
sortedIps = ips
    .Select(ip => new { IP = ip, Bytes = ip.GetAddressBytes() })
    .OrderBy(x => x.Bytes[0]).ThenBy(x => x.Bytes[1]).ThenBy(x => x.Bytes[2]).ThenBy(x => x.Bytes[3])
    .Select(x => x.IP)
    .ToArray(); 
```

**更新2**

> 谢谢，但是如果数组的任何成员为空，它就会停止。如果我们想使用包含一些空值的数组。我想最后订购空值。

然后使用此查询，该查询将`Byte[]`with`Byte.MaxValue`用于空值：

```
var sortedIps = ips
    .Select(ip => new { 
        IP = ip,
        Bytes = ip == null
            ? new[] { Byte.MaxValue, Byte.MaxValue, Byte.MaxValue, Byte.MaxValue }
            : ip.GetAddressBytes() 
    })
    .OrderBy(x => x.Bytes[0]).ThenBy(x => x.Bytes[1]).ThenBy(x => x.Bytes[2]).ThenBy(x => x.Bytes[3])
    .Select(x => x.IP)
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:39:38.440

如果我是正确的，你可以这样做：

```
var list = new string[5];
list = list.OrderByDescending(x => x).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:39:54.453

您可以为此使用 Linq

```
using System.Linq;

ipaddress[] sortedDevice1 = device.OrderBy(d => d.IP).ToArray(); // assuming the ip address is saved in a field named 'IP'
ipaddress[] sortedDevice2 = device.OrderByDescending(d => d.IP).ToArray(); // if you need it sorted by descending order 
```

如果您的`IP`字段不是 a `string`，您可能希望实现`IComparable`该字段的接口`IP`，以提高排序质量，即：获取`11.100 > 2.100`而不是`2.100 > 11.100`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:40:21.743

使用其中一种 Array.Sort 方法，[Array.Sort 方法](http://msdn.microsoft.com/en-us/library/cxt053xf.aspx)等。例子很简单：

```
Array.Sort(device, (a,b) => [compare here, return int] ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T12:42:26.273

这应该有效：

```
 Array.Sort(devices, (d1, d2) => d1.IPValue.CompareTo(d2.IPValue)); 
```

但更好地使用`List`而不是`Array`

# c# - 同步忽略过滤器

> ID：14980011
> 
> 赞同：0
> 
> 时间：2013-02-20T12:35:11.920
> 
> 标签：c#, ado.net, microsoft-sync-framework, data-synchronization, smart-device

我正在尝试将 Microsoft 同步服务实现到我正在开发的智能设备应用程序中，但是我似乎遇到了障碍，我希望有人能够提供解决方案。我已经设法实现同步，以便它下载表中的每条记录，但是我想过滤记录，以便只下载与用户相关的数据。为此，我在 SelectIncrementalInsertsCommand 中添加了**WHERE Operator.kde = @kde**子句，如下面的代码所示。

```
this.SelectIncrementalInsertsCommand.CommandText = @"IF @sync_initialized = 0 SELECT dbo.Operator.[OperatorID], [kde], [OperatorName], [Pass] FROM dbo.Operator LEFT OUTER JOIN CHANGETABLE(CHANGES dbo.Operator, @sync_last_received_anchor) CT ON CT.[OperatorID] = dbo.Operator.[OperatorID] WHERE dbo.Operator.[kde] = @kde AND (CT.SYS_CHANGE_CONTEXT IS NULL OR CT.SYS_CHANGE_CONTEXT <> @sync_client_id_binary) ELSE  BEGIN SELECT dbo.Operator.[OperatorID], [kde], [OperatorName], [Pass] FROM dbo.Operator JOIN CHANGETABLE(CHANGES dbo.Operator, @sync_last_received_anchor) CT ON CT.[OperatorID] = dbo.Operator.[OperatorID] WHERE dbo.Operator.[kde] = @kde AND (CT.SYS_CHANGE_OPERATION = 'I' AND CT.SYS_CHANGE_CREATION_VERSION  <= @sync_new_received_anchor AND (CT.SYS_CHANGE_CONTEXT IS NULL OR CT.SYS_CHANGE_CONTEXT <> @sync_client_id_binary)); IF CHANGE_TRACKING_MIN_VALID_VERSION(object_id(N'dbo.Operator')) > @sync_last_received_anchor RAISERROR (N'SQL Server Change Tracking has cleaned up tracking information for table ''%s''. To recover from this error, the client must reinitialize its local database and try again',16,3,N'dbo.Operator')  END "; 
```

然后我声明了@kde 参数，如下所示。

```
this.SelectIncrementalInsertsCommand.Parameters.Add(new System.Data.SqlClient.SqlParameter("@kde", System.Data.SqlDbType.Int)); 
```

为了传入参数，我在负责启动同步的代码中添加了以下行。

```
syncAgent.Configuration.SyncParameters.Add(new SyncParameter("@kde", kde)); 
```

*注意：kde 值是传递给我的同步方法的整数*

尽管添加了这些过滤器，但同步过程似乎完全忽略了它们并为每个操作员下载所有数据。我已经在网上调查了这个问题，我的代码似乎与我读过的许多教程相同，但它仍然不能按预期工作。

我对同步服务相当陌生，所以如果有人可以为我提供解决此问题的信息和指导，我将不胜感激

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:37:33.570

你试过这个吗？

[将过滤器添加到本地数据库缓存生成的同步](http://jtabadero.wordpress.com/2010/03/17/adding-filter-to-local-database-cache-generated-sync/)

我建议您也运行 SQL Profiler 以查看传递给 SQL Server 的实际命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:46:42.687

我设法解决了这个问题，结果是数据库上的一些“脏”记录由于某种原因影响了同步。一旦我删除了这些记录，一切都会正常运行。

# date - 如何计算打字稿中两个日期之间的时间

> ID：14980014
> 
> 赞同：186
> 
> 时间：2013-02-20T12:35:25.407
> 
> 标签：date, typescript

这适用于Javascript

```
new Date() - new Date("2013-02-20T12:01:04.753Z") 
```

但是在打字稿中我不能休息两个新日期

```
Date("2013-02-20T12:01:04.753Z") 
```

不工作，因为参数与日期签名不匹配

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2013-02-20T12:41:12.577

使用该[`getTime`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime)获取自 1970-01-01 以来的总毫秒数，然后减去：

```
var time = new Date().getTime() - new Date("2013-02-20T12:01:04.753Z").getTime(); 
```

* * *

## 回答 #2

> 赞同：147
> 
> 时间：2015-08-07T22:48:20.213

这是在打字稿中应该如何完成的：

```
(new Date()).valueOf() - (new Date("2013-02-20T12:01:04.753Z")).valueOf() 
```

更好的可读性：

```
 var eventStartTime = new Date(event.startTime);
      var eventEndTime = new Date(event.endTime);
      var duration = eventEndTime.valueOf() - eventStartTime.valueOf(); 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2018-03-22T09:41:03.603

为了计算差异，您必须输入`+`运算符，

这种方式`typescript`将日期转换为数字。

```
+new Date()- +new Date("2013-02-20T12:01:04.753Z") 
```

从那里您可以制定一个公式将差异转换为`minutes`或`hours`。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2013-02-20T12:42:19.603

它不起作用，因为`Date - Date`完全依赖于 TypeScript 旨在防止的类型强制。

有一个使用`+`前缀的解决方法：

```
var t = Date.now() - +(new Date("2013-02-20T12:01:04.753Z")); 
```

或者，如果您不想使用`Date.now()`：

```
var t = +(new Date()) - +(new Date("2013-02-20T12:01:04.753Z")); 
```

[请参阅此处的讨论](https://web.archive.org/web/20170506161203/http://typescript.codeplex.com/workitem/156)。

或者参见下面的 Siddharth Singh 的回答，以获得更优雅的解决方案`valueOf()`

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-09-05T03:18:38.383

```
// TypeScript

const today = new Date();
const firstDayOfYear = new Date(today.getFullYear(), 0, 1);

// Explicitly convert Date to Number
const pastDaysOfYear = ( Number(today) - Number(firstDayOfYear) ); 
```

# mediaelement.js - 未捕获的类型错误：对象# 没有方法'setSrc'

> ID：14980015
> 
> 赞同：0
> 
> 时间：2013-02-20T12:35:28.487
> 
> 标签：mediaelement.js

我正在尝试加载带有 javascript 的视频，但它会导致错误...

编码：

```
<script src="mediaelement/build/mediaelement-and-player.min.js"></script>
<link rel="stylesheet" href="mediaelement/build/mediaelementplayer.min.css" />
<video controls="controls" preload="none" id="dinamic-video">
</video>
<script>
    var player = new MediaElementPlayer('dinamic-video');
    $('#btn-play').click(function(){
        player.setSrc('mediaelement/media/teste-html5-MP4.mp4');
    });
</script> 
```

错误：

**未捕获的类型错误：对象 # 没有方法 'setSrc'**

我怎样才能正确运行它？！

* * *

***--- 编辑以放置有关[Ricardus](https://stackoverflow.com/users/1993097/ricardus)答案的更多详细信息 ---***

不工作...

也不执行回调**成功**，不加载视频

```
var player;
$(document).ready(function(){
    var player = new MediaElementPlayer('video', {
        features: ['playpause', 'progress', 'duration', 'volume'],
        success: function (mediaElement) { 
            console.log(mediaElement);
            var sources =[{ src: "mediaelement/media/teste-html5-MP4.mp4" }];
            mediaElement.pause();
            mediaElement.setSrc(sources); 
            mediaElement.load();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:58:22.620

发生这种情况是因为**setSrc()**并不是真正的 mediaelement 对象的方法，除非您告诉 javascript 对象应该包含所有 mediaelement 方法和属性。**您应该首先在document.ready();**上动态创建媒体元素；只是要确定。这是一个例子：

```
 var player;

    $(document).ready(function() {

    player = new MediaElementPlayer('#dinamic-video', {
        features: ['playpause', 'progress', 'duration', 'volume'],
        success: function (mediaElement) { 

    var sources = [{ src: "mediaelement/media/teste-html5-MP4.mp4" }];
       mediaElement.setSrc(sources); 
       mediaElement.pause();
       mediaElement.load();

         }

    });

}); 
```

# jquery - 并排浮动堆栈栏

> ID：14980021
> 
> 赞同：6
> 
> 时间：2013-02-20T12:35:49.623
> 
> 标签：jquery, charts, stack, flot

是否可以使用 Flot 将并排条形图与堆叠条形图混合在一起？

类似于这里的 jqplot 问题：[jqplot Side by Side Stacked Bar Chart](https://stackoverflow.com/questions/9270945/jqplot-side-by-side-stacked-bar-chart)

尝试同时使用，但只有一个并排运行，如果我并排禁用，堆叠条可以完美运行。

图片将类似于： http: [//peltiertech.com/Utility/pix/clusterstackchart.png](http://peltiertech.com/Utility/pix/clusterstackchart.png)

我写的示例代码是：http: [//jsfiddle.net/WAGbt/](http://jsfiddle.net/WAGbt/)（注释掉顺序：X 属性，你会看到它们切换）

```
$(document).ready(function ()
{
    DrawChart();
});

function GenerateSeries(added)
{
    var data = [];
    var start = 100 + added;
    var end = 500 + added;

    for (i = 1; i <= 20; i++)
    {
        var d = Math.floor(Math.random() * (end - start + 1) + start);
        data.push([i, d]);
        start++;
        end++;
    }

    return data;
}

function DrawChart()
{
    var dataa = GenerateSeries(100);
    var datab = GenerateSeries(100);
    var datac = GenerateSeries(100);

    var ds = new Array();

    var data =
    [
        {
            label: "data1",
            data: dataa,
            bars:
            {
                show: true,
                barWidth: 0.2,
                order: 1,
                lineWidth: 2
            }
        },
        {
            label: "data2",
            data: datab,
            bars:
            {
                show: true,
                barWidth: 0.2,
                order: 2,
                lineWidth: 2
            }
        },
        {
            label: "data3",
            data: datac,
            bars:
            {
                show: true,
                barWidth: 0.2,
                order: 3,
                lineWidth: 2
            }
        }
    ];

    var options = {
        series: {
            stack: true
        },
        xaxis: {
        },
        grid: {
            backgroundColor: { colors: ["#FFF", "#FFF"] }
        }
    };

    var plot = $.plot($("#placeholder"), data, options);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T13:24:31.387

添加`bars`到选项...

```
var options = {
    series: {
        stack: true
    },
    xaxis: {
    },
    grid: {
        backgroundColor: { colors: ["#FFF", "#FFF"] }
    },
    bars:{ // show the bars with a width of .4
        show: true,
        barWidth: .4
    }

}; 
```

并将数据按摩成这种格式......

```
var data = [ // all series

    [ // first series (Q1)
        [0,100], // pens Q1 N America
        [0.4,120], // pencils Q1 N America
        [1,130], // pens Q1 Europe
        [1.4,140], // pencils Q1 Europe
        [2,150], // pens Q1 Asia
        [2.4,200], // pencils Q1 Asia
    ],

    [ // second series (Q2)
        [0,100],
        [0.4,200],
        [1,200],
        [1.4,200],
        [2,200],
        [2.4,200],
    ],

    [ // third series (Q3)
        [0,100],
        [0.4,200],
        [1,200],
        [1.4,200],
        [2,200],
        [2.4,200],
    ],

    [ // fourth series (Q4)
        [0,100],
        [0.4,200],
        [1,200],
        [1.4,200],
        [2,200],
        [2.4,200],
    ]

] 
```

它的工作原理是这样的：http: [//jsfiddle.net/WAGbt/2/](http://jsfiddle.net/WAGbt/2/)

我对该系列的标签进行了另一次更新，并在轴上：http: [//jsfiddle.net/WAGbt/3/](http://jsfiddle.net/WAGbt/3/)

# javascript - 适用于小型设备的 Twitter Bootstrap 响应式导航栏标题

> ID：14980032
> 
> 赞同：0
> 
> 时间：2013-02-20T12:36:37.563
> 
> 标签：javascript, jquery, html, twitter-bootstrap

帖子的标题相当模糊。但我遇到的问题是，我在全宽时拥有的响应式导航栏上不应该有“品牌”或“标题”。只有在较小的设备上（即在响应模式下）查看导航栏时，导航栏上才应该有一个品牌说“菜单”......

很难掌握，所以我创建了一个[JSfiddle](http://jsfiddle.net/Relborg/bS54w/) ，在那里也可以在[全屏模式下](http://jsfiddle.net/Relborg/bS54w/embedded/result/)查看。我喜欢在响应模式下查看的结果，但在正常模式下看起来很乱。那时“菜单”这个词不应该再出现了，那是毫无意义的。

```
// Ignore this comment 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:47:52.397

它实际上很容易修复，请查看您的代码的这个 JSFiddle 分支：http: [//jsfiddle.net/sfAY6/](http://jsfiddle.net/sfAY6/)

您可以应用一组实用的 CSS 类来控制取决于设备的可见性，例如隐藏在桌面上但在任何较小的设备上可见。

所以我修改了你的菜单链接是这样的：

```
<a class="brand hidden-desktop" href="#">Menu</a> 
```

这将在任何被视为桌面的设备上隐藏您的菜单锚点，但在平板电脑和智能手机上保持可见。

有关更多详细信息，请参见此处：http: [//twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

# c++ - 如何设计一个平面以任何窗口大小位于视口的中心

> ID：14980034
> 
> 赞同：0
> 
> 时间：2013-02-20T12:36:47.617
> 
> 标签：c++, opengl

我需要在 OpenGL（c++，OS：windows）中绘制一个平面（使用 GL_QUADS），以便它与屏幕中心对齐。

我的意思是，在任何窗口调整大小时，原点都将位于平面的中心。

我知道我必须使用视口坐标和大小，但我无法配置如何使用它们。

另外，我正在使用`gluPerspective`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:18:01.533

原点与您的窗口大小无关。当您调整窗口大小时，重新计算窗口的纵横比（window.width / window.height）并使用新的方面再次调用 gluPerspective 来重置您的投影矩阵。

在此之后，只要你 glLoadIdentity() 进入模型视图矩阵，你应该能够使用在屏幕中心绘制一个四边形

```
glBegin(GL_QUADS);
glVertex3f(-.5f,.5f,-1);
glVertex3f(-.5f,-.5f,-1);
glVertex3f(.5f,-.5f,-1);
glVertex3f(.5f,.5f,-1);
glEnd(); 
```

这应该在屏幕的中心放置一个单位大小的四边形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:24:36.417

```
glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glLoadIdentity();

glBegin(GL_QUADS);
glVertex3f(-.5f,.5f,-1);
glVertex3f(-.5f,-.5f,-1);
glVertex3f(.5f,-.5f,-1);
glVertex3f(.5f,.5f,-1);
glEnd();

glPopMatrix(); 
```

请注意，这仍然使用您所有的 3D 渲染状态，例如深度测试、着色等。您很可能希望将其关闭。

# c# - 窗口和文本框作为函数中的参数

> ID：14980036
> 
> 赞同：1
> 
> 时间：2013-02-20T12:36:52.767
> 
> 标签：c#, wpf, textbox, window

我必须为 WPF 应用程序编写一个函数：

```
public void function(Window win)
{
    win.mytextbox.Text=""; // will show error
} 
```

被调用的参数 Window 将`mytextbox`在所有这些中都有，但是我如何在函数中设置值作为 win 没有`mytextbox`？

只有在所有窗口实例都存在的情况下才会调用函数`MainWindow`，即 win1、win2、win3、.. 并且所有和函数也在`MainWindow`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:42:54.210

如果您的 TextBox 的名称是“mytextbox”，您可以通过

```
((TextBox)win.FindName("mytextbox")).Text = ""; 
```

您也可以将 MainWindow 作为参数传递，然后直接访问 mytextbox，如下所示：

```
public void MyFunction(MainWindow mw)
{
    mw.mytextbox.Text = "";
} 
```

由于您使用的是 WPF，因此您应该考虑使用[DataBinding](http://wpftutorial.net/DataBindingOverview.html)而不是在代码隐藏中操作控件属性。

# c++ - 如何从 if 语句中获取类模板的实例？(C++)

> ID：14980042
> 
> 赞同：5
> 
> 时间：2013-02-20T12:37:09.607
> 
> 标签：c++, class, templates, pointers, scope

假设我有一个类模板，它有一个成员`pData`，它是一个`AxB`任意类型的数组`T`。

```
template <class T> class X{ 
public:
    int A;
    int B;
    T** pData;
    X(int a,int b);
    ~X();        
    void print(); //function which prints pData to screen

};  
template<class T>X<T>::X(int a, int b){ //constructor
    A = a;
    B = b;
    pData = new T*[A];
    for(int i=0;i<A;i++)
        pData[i]= new T[B];
    //Fill pData with something of type T
}
int main(){
    //...
    std::cout<<"Give the primitive type of the array"<<std::endl;
    std::cin>>type;
    if(type=="int"){
        X<int> XArray(a,b);
    } else if(type=="char"){
        X<char> Xarray(a,b);
    } else {
        std::cout<<"Not a valid primitive type!";
    } // can be many more if statements.
    Xarray.print() //this doesn't work, as Xarray is out of scope.
} 
```

由于实例 Xarray 是在 if 语句中构造的，因此我无法在其他任何地方使用它。我试图在 if 语句之前创建一个指针，但由于此时指针的类型未知，所以我没有成功。

处理此类问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:41:34.893

这里的问题是，`X<int>`并且`x<char>`是完全不相关的类型。

它们都是同一个模板类的结果这一事实在这里无济于事。

我可以看到几种解决方案，但这取决于您真正需要什么。

例如，您可以使`X<>`实例派生自具有该方法的通用非模板基类`print()`（最终作为纯虚拟）。但在你这样做之前，请确保它在功能层面上有意义：应该使用继承，因为它有意义，而不仅仅是因为技术限制。如果你这样做，你可能也会想要一个虚拟析构函数。

您还可以将 a 绑定并存储`std::function<void ()>`到您要调用的方法，但确保对象仍然“活动”（它们不在您当前的代码中：当它们超出范围时，和在您之前被销毁`X<int>`）`X<char>`实际调用`print()`）。

最终的解决方案是制作一些与两者兼容的变体类型 `X<int>`（`X<char>`boost [::variant<>](http://www.boost.org/doc/libs/1_53_0/doc/html/variant.html)可以在这里提供帮助）。然后，您可以编写一个访问者来实现`print()`每种类型的功能。

选择最后一个解决方案，它会变成这样：

```
typedef boost::variant<X<int>, X<char>> genericX;

class print_visitor : public boost::static_visitor<void>
{
public:
    template <typename SomeType>
    void operator()(const SomeType& x) const
    {
        // Your print implementation
        // x is your underlying instance, either X<char> or X<int>.
        // You may also make several non-templated overloads of
        // this operator if you want to provide different implementations.
    }
};

int main()
{
  boost::optional<genericX> my_x;

  if (type=="int") {
    my_x = X<int>(a,b);
  } else if(type=="char") {
    my_x = X<char>(a,b);
  }

  // This calls the appropriate print.
  if (my_x) {
    boost::apply_visitor(print_visitor(), *my_x)
  }
} 
```

我们实际上缺乏给出明确答案的知识：如果您的类是“实体”，那么您可能应该去继承。如果它们更像“值类”，那么变体方式可能更适合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:50:11.460

如果您想使用不同的数组，无论它们的类型如何，单独的模板都无法帮助您。`X<int>`目前，和之间完全没有关系`X<char>`。

如果您想将它们视为公共类型的两个子类型，则必须使用继承（和动态分配的变量）。例如，所有人都`X<T>`可以继承相同的基类，比如`Printable`，并且您可以将数据存储在 a 中`unique_ptr<Printable>`：

```
unique_ptr<Printable> r;
if(type=="int"){
    r.reset(new X<int>(a,b));
} else if(type=="char"){        
    r.reset(new X<char>(a,b);
}
r->print(); 
```

但这可能不是最好的设计。

一个可能更好的解决方案是，而不是尝试在 if 之外工作，而是将所有工作移到 if 内部。在您的简单示例中，这可以通过复制调用 print 来完成，但这也不是很好。但是，按照这个想法，我们可以创建一个模板函数来完成这项工作：

```
template<class T>
void workWithType(int a, int b)
{
   X<T> Xarray(a, b);
   Xarray.print();
}

//...

if(type=="int"){
    workWithType<int>(a,b);
} else if(type=="char"){
    workWithType<char>(a,b);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T12:57:43.297

C++ 是一种静态类型语言，这意味着您必须在编译时知道对象的类型。在这种情况下，您基于用户输入构造的对象的类型，因此在运行时不可能知道类型。

解决此问题的最常见方法是使用[动态多态性](http://www.cpptutor.com/static-polymorphism-and-dynamic-polymorphism-in-c++.htm)，其中函数通过使用[后期绑定](https://en.wikipedia.org/wiki/Late_binding)的公共接口调用。我们在 C++ 中使用[虚函数](https://en.wikipedia.org/wiki/Virtual_function)来实现这一点。例如：

```
struct IPrintable {
   virtual void print() = 0;
};

template<class T>
class X : public IPrintable {
  // Same code as you showed above.
};

int main() {
  std::cout<<"Give the primitive type of the array"<<std::endl;
  std::cin>>type;

  std::unique_ptr<IPrintable> XArray;

  if(type=="int"){
      XArray.reset(new X<int>(a,b));
  } else if(type=="char"){
      XArray.reset(new X<char>(a,b));
  } else {
      std::cout<<"Not a valid primitive type!";
  } // can be many more if statements.

  Xarray->print() // this works now!
} 
```

这解决了超出范围的问题，并允许您使用 XArray 变量的动态类型进行打印。虚拟功能是使这成为可能的秘诀。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T13:13:47.617

与其尝试将模板放入其中，不如采取`main`与其他建议相反的方式...将代码*移出*`main`并移入需要处理单一类型的自己的（可能是模板化的）函数中：

```
template <typename T>
void generateAndPrint(int a, int b) {
   X<T> x(a,b);
   x.print();
}
int main() { ...
   if (type=="int") generateAndPrint<int>(a,b);
   else if (type=="char") generateAndPrint<char>(a,b);
   else ...
} 
```

# c - 以下宏返回的值是多少

> ID：14980043
> 
> 赞同：0
> 
> 时间：2013-02-20T12:37:10.707
> 
> 标签：c, linux-device-driver

如果 SNDRV_CARDS 等于 8，以下宏返回的值是多少

```
#define SNDRV_DEFAULT_IDX  { [0 ... (SNDRV_CARDS-1)] = -1 } 
```

我在驱动程序代码中找到了这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:40:11.350

那是一个[GNU 扩展的指定初始化器](http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html)。

宏展开的代码是：

```
{ [0 ... (8-1)] = -1 } 
```

这又是一个由 8 个整数组成的数组，全部设置为 -1。

# c# - 创建目录

> ID：14980046
> 
> 赞同：2
> 
> 时间：2013-02-20T12:37:32.880
> 
> 标签：c#, directory

我需要创建一个目录，但是，我需要创建的目录在另一个目录中。像这样的东西：

```
 Directory.CreateDirectory(@"teste\teste\teste\teste\"); 
```

基本上，这个目录不存在（当然），但是，`CreateDirectory(...)`不支持这种字符串样式，我该如何创建这个目录？

我的方法是：

```
 private void createdir(string _path)
    {
        string path = string.Empty;
        string[] dir = _path.Split('\\');

        for(int i=0;i<dir.Length;i++)
        {
            path += dir[i] + "\\";
            Directory.CreateDirectory(path);
        }
    } 
```

但是，我想知道，是否有更好的方法来使这个（更清晰）更快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:44:54.673

`Directory.Create("c:\teste\teste\teste\teste");`应该工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T12:41:38.363

[Directory.CreateDirectory()](http://msdn.microsoft.com/en-us/library/system.io.directory.createdirectory%28v=vs.71%29.aspx)可用于创建路径指定的目录和子目录。

这是一个例子：

```
static void Main(string[] args)
{
    try
    {
        Directory.CreateDirectory(@"D:\ParentDir\ChildDir\SubChildDir\");
        Console.WriteLine("Directories Created");
        Console.ReadLine();
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
    }
} 
```

[资源](http://www.devcurry.com/2010/02/create-nested-directories-in-c-and.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T12:43:05.137

我选择的方法是：

```
DirectoryInfo di = new DirectoryInfo(@"teste\teste\teste\teste\");
di.Create(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T12:41:29.557

根据 MSDN，您可以嵌套目录。[创建目录](http://msdn.microsoft.com/en-us/library/54a0at6s%28v=vs.100%29.aspx)

```
 Directory.CreateDirectory("Public\\Html");
     Directory.CreateDirectory("\\Users\\User1\\Public\\Html");
     Directory.CreateDirectory("c:\\Users\\User1\\Public\\Html"); // using verbatim string you can escape slashes

if(System.IO.Directory.Exists(yourPath))
{
  Directory.CreateDirectory(yourPath);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T12:46:20.213

你的方法对于这个过程来说太复杂了。您不必也使用`Split()`方法来创建这种目录。

你可以像这样使用它；

```
string tempFolderAbsolutePath = @"C:\Temp";
string subFolderRelativePath = @"teste\teste\teste\teste\";

DirectoryInfo tempFolder = new DirectoryInfo( tempFolderAbsolutePath );
DirectoryInfo subFolder = tempFolder.CreateSubdirectory( subFolderRelativePath ); 
```

如您所见，此过程创建嵌套的子目录。

![在此处输入图像描述](../Images/7f5ba7efd3ca69c4d4fbe1c741ac2c8d.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-20T12:49:40.727

如果您当前的目录是（比如说`C:\`）并且您想创建一个目录`C:\A\B\C`，那么我认为最好的方法是使用

```
Directory.CreateDirectory(@"\A\B\C"); 
```

如果您需要*另一个根*目录中的目录（例如`D:\`），那么您需要将完整路径指定为

```
Directory.CreateDirectory(@"D:\A\B\C"); 
```

您*`do not need to have a for loop`*可以像 CreateDirectory 那样为您创建每个目录。

# compression - pigz如何解压

> ID：14980048
> 
> 赞同：19
> 
> 时间：2013-02-20T12:37:35.253
> 
> 标签：compression, tar, gunzip

我正在尝试使用 pigz 进行并行压缩和解压缩。我找到了一种使用以下命令并行压缩的方法：

```
tar cf - /input/dir | pigz > output_file.tar.gz 
```

解压缩的等效命令是什么？我需要能够在命令中指定文件名和输出目录路径，以便它对我有用。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-20T16:24:03.500

用于`pigz -dc`解压到标准输出。然后`>`在您的示例中使用将输出定向到所需的路径和文件。

您可以键入`pigz`命令选项帮助。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-08-04T18:14:22.387

您可能正在寻找以下方面的内容：

```
pigz -dc archive.tar.gz | tar xf - 
```

但注意到 Mark Adler 的（传奇，此时）原始帖子，pigz 不使用多个核心进行减压。但是，它确实使用了额外的核心来进行读取、写入和一些额外的计算，这确实比 gzip 产生了适度的性能提升。享受！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-02-26T16:31:34.040

`tar -I pigz -xvf compressed_file.tar.gz`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-01-10T10:36:31.113

出于某种原因，pigz 不会自动完成“.gz”压缩文件，但是如果您键入文件的名称，pigz 会找到它们。

要解压缩并保留压缩文件，请使用：`pigz -dk yourfilename.gz`. 如果您不需要压缩版本，请使用`pigz -d yourfilename.gz`.

`pigz --help`显示所有可用选项。

# c# - 如何在 Linux 中使用 libusb 获取设备路径

> ID：14980052
> 
> 赞同：5
> 
> 时间：2013-02-20T12:37:47.013
> 
> 标签：c#, linux, usb, libusb

我正在寻找一种在 C# 中获取 USB 到达和移除事件的跨平台方式，我发现了“LibUsbDotNet C# USB 库”（[http://sourceforge.net/projects/libusbdotnet/?source=navbar](http://sourceforge.net/projects/libusbdotnet/?source=navbar)）。

它可以正常工作，但在 Linux 中，我似乎无法获取设备挂载点（路径）。在 Linux 中，它使用“libusb”库，该库没有获取设备路径的方法。

这是一个检测设备事件的简单代码示例：

```
internal class DeviceNotification
{
    public static IDeviceNotifier UsbDeviceNotifier = DeviceNotifier.OpenDeviceNotifier();

    private static void Main(string[] args)
    {
        // Hook the device notifier event
        UsbDeviceNotifier.OnDeviceNotify += OnDeviceNotifyEvent;

        // Exit on and key pressed.
        Console.Clear();            
        Console.WriteLine();
        Console.WriteLine("Waiting for system level device events..");
        Console.Write("[Press any key to exit]");

        while (!Console.KeyAvailable)
            Application.DoEvents();

        UsbDeviceNotifier.Enabled = false;  // Disable the device notifier

        // Unhook the device notifier event
        UsbDeviceNotifier.OnDeviceNotify -= OnDeviceNotifyEvent;
    }

    private static void OnDeviceNotifyEvent(object sender, DeviceNotifyEventArgs e)
    {
        // A Device system-level event has occured

        Console.SetCursorPosition(0,Console.CursorTop);

        Console.WriteLine(e.ToString()); // Dump the event info to output.

        Console.WriteLine();
        Console.Write("[Press any key to exit]");
    }
} 
```

这是输出示例：

> [DeviceType:DeviceInterface] [EventType:DeviceArrival] Name:usbdev1.17 BusNumber:1 DeviceAddress:17 Length:18 DescriptorType:Device BcdUsb:0x0200 Class:PerInterface SubClass:0x00 Protocol:0x00 MaxPacketSize0:64 VendorID:0x059F ProductID:0x1014 BcdDevice: 0x0000 制造商字符串索引：1 产品字符串索引：2 序列字符串索引：3 配置计数：1
> 
> [按任意键退出][DeviceType:DeviceInterface] [EventType:DeviceRemoveComplete] Name:usbdev1.17 BusNumber:1 DeviceAddress:17 Length:18 DescriptorType:Device BcdUsb:0x0200 Class:PerInterface SubClass:0x00 Protocol:0x00 MaxPacketSize0:64 VendorID :0x059F ProductID:0x1014 BcdDevice:0x0000 ManufacturerStringIndex:1 ProductStringIndex:2 SerialStringIndex:3 ConfigurationCount:1

我的问题是如何获取附加或删除设备的路径，或者如何将 libusb 返回的信息与实际设备路径绑定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:34:18.110

您需要使用 UDev 而不是 libusb。Libusb 只会告诉您系统上有哪些 USB 设备，但不会告诉您它们的安装位置。UDev 处理安装它们。

有 libudev，文档应该在这里：[http](http://www.freedesktop.org/software/systemd/libudev/) ://www.freedesktop.org/software/systemd/libudev/但目前似乎已关闭。这是关于libudev的教程：[教程：如何在Linux中使用libudev和SysFS](http://www.signal11.us/oss/udev/)

还有一个基于 GLib 的 libudev 包装器，这里的文档：http: [//ftp.osuosl.org/pub/linux/utils/kernel/hotplug/gudev/](http://ftp.osuosl.org/pub/linux/utils/kernel/hotplug/gudev/)并且似乎有 ac# 用于 libgudev 的包装器。

但最后你可能会发现使用 GLib 的 GIO 比进入 udev 级别更容易：[Volumes and Drives](https://developer.gnome.org/gio/stable/volume_mon.html) API 参考。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T03:15:50.357

USB设备文件通常存放在以下路径：

```
/dev/bus/usb 
```

该文件夹中的子目录应与您上面的巴士号码相匹配。如果 USB 设备没有直接连接到计算机，例如通过集线器或其他外部设备，事情会变得复杂。不要忘记从十六进制转换。

# regex - 正则表达式帮助，接受十六进制字符范围

> ID：14980063
> 
> 赞同：0
> 
> 时间：2013-02-20T12:38:30.110
> 
> 标签：regex, posix, posix-ere

我希望只接受十六进制字符，大小写无关紧要，所以`[0-9a-fA-F]`我只想接受 10 到 64 个字符之间的字符串，这个范围的最佳方法是什么？

我正在使用 POSIX 基本正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:42:28.657

使用量词

```
^[0-9a-fA-F]{10,64}$ 
```

`w{n}`**表示精确**匹配 wn 次，其中 n 是正数

`w{n,m}`表示匹配 w**在**n 到 m 次之间

`w{n,}`表示匹配wn**多次**

`^`是字符串的开头

`$`是字符串的结尾

现在在这里`^`，`$`是必不可少的，否则它会匹配两者之间的任何地方

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T12:41:38.703

您可以在大括号中给出一个范围。

```
^[0-9a-fA-F]{10,64}$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T12:41:48.377

试试这个：

```
^[0-9a-fA-F]{10,64}$ 
```

# nhibernate - 是否有一些带有 C#、NHibernate.Mapping.Attributes 的免费 NHibernate 生成器工具？

> ID：14980065
> 
> 赞同：1
> 
> 时间：2013-02-20T12:38:56.300
> 
> 标签：nhibernate, attributes, generator

是否有一些带有 C#、NHibernate.Mapping.Attributes 的免费 NHibernate 生成器工具？我不想使用xml映射文件，但想使用属性，你知道一些好的生成器工具可以支持最新版本的NHibernate 3.3.1吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:00:59.033

我是 nmg codeplex 工具的开发人员。今天下午有一个新版本，如果仍然出现错误，请在 codeplex 上发布异常，我将在明天早上修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T12:42:38.817

NHibernate 映射生成器。这可能是我找到的最好的免费的了。

[http://nmg.codeplex.com/](http://nmg.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:43:14.453

您可以使用 TT 模板、mygeneration 或其他基于模板制作代码的工具。该工具只是一个代码生成器，它不了解 NHibernate 的任何内容。您制作的模板将为特定产品/版本生成魔法。

# javascript - 当一个或多个项目被取消选择时，knockoutjs 取消选择/选择所有复选框

> ID：14980066
> 
> 赞同：0
> 
> 时间：2013-02-20T12:38:56.197
> 
> 标签：javascript, checkbox, knockout.js, selectall

这与围绕该主题的其他问题类似，但又有所不同。

我有一个包含记录列表的表格，每个表格都有一个选择复选框。

在表格标题中，我有一个“全选”复选框。

当用户选中/取消选中“全选”时，记录被选中/取消选中。这工作正常。

但是，当取消选择一条或多条记录时，我需要取消选择“全选”复选框。

我的标记：

```
<table>
    <thead>
        <tr>
            <th>Name</th>
            <th><input type="checkbox" data-bind="checked: SelectAll" /></th>
        </tr>
    </thead>
    <tbody data-bind="foreach: $data.People">
        <tr>
            <td data-bind="text: Name"></td>
            <td class="center"><input type="checkbox" data-bind="checked: Selected" /></td>
        </tr>
    </tbody>
</table> 
```

我的脚本（已编辑）：

```
function MasterViewModel() {
    var self = this;

    self.People = ko.observableArray();
    self.SelectAll = ko.observable(false);

    self.SelectAll.subscribe(function (newValue) {
        ko.utils.arrayForEach(self.People(), function (person) {
            person.Selected(newValue);
        });
    });
}

my.Person = function (name, selected) {
    var self = this;

    self.Name = name;
    self.Selected = ko.observable(false);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T13:17:23.753

这有效

[http://jsfiddle.net/AneL9/](http://jsfiddle.net/AneL9/)

```
self.SelectAll = ko.computed({
    read: function() {
        var item = ko.utils.arrayFirst(self.People(), function(item) {
            return !item.Selected();
        });
        return item == null;           
    },
    write: function(value) {
        ko.utils.arrayForEach(self.People(), function (person) {
            person.Selected(value);
        });
    }
}); 
```

但是在选择全部取消选择时会给你一个 ordo n ^ 2 问题，你可以使用一个可计算的来解决这个问题

[http://www.knockmeout.net/2011/04/pausing-notifications-in-knockoutjs.html](http://www.knockmeout.net/2011/04/pausing-notifications-in-knockoutjs.html)

编辑：您还可以使用节流阀扩展计算，这样可以避免 ordo n^2 问题

```
.extend({ throttle: 1 }) 
```

[http://jsfiddle.net/AneL9/44/](http://jsfiddle.net/AneL9/44/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:34:03.133

您应该`SelectAll`像这样使计算可观察：

```
self.SelectAll = ko.computed({
    read: function() {
        var persons = self.People();
        for (var i = 0, l = persons.length; i < l; i++)
            if (!persons[i].Selected()) return false;
        return true;
    },
    write: function(value) {
        ko.utils.arrayForEach(self.People(), function(person){
            person.Selected(value);
        });
    }
}); 
```

并剥离`SelectAll.subscribe`。

[http://jsfiddle.net/Yqj59/](http://jsfiddle.net/Yqj59/)

# python - 如何在底图中绘制网格数据并沿特定方位查找网格点

> ID：14980070
> 
> 赞同：0
> 
> 时间：2013-02-20T12:39:19.963
> 
> 标签：python, map, matplotlib, matplotlib-basemap

更新：我正在尝试映射一些数据。我有一组从网格中的参考点测量的后向方位角（baz）。我想在网格上找到沿着 baz 的一个大圆圈会穿过的所有点。为此，我遍历网格中的每个点，计算该点与参考点之间的预期后向方位角，并与每个测量的 baz 进行比较。如果两者之间的差异很小（小于 2 度），我会权衡这一点。然后我把它全部放在地图上。我使用的代码如下，但结果看起来有点奇怪，有谁知道我哪里出错了，或者如果有更好的方法（更快）然后我做了什么？

```
from matplotlib.colorbar import ColorbarBase
import matplotlib.cm as cm
import matplotlib.pyplot as plt
import numpy as np
from mpl_toolkits.basemap import Basemap
import mpl_toolkits.basemap.pyproj as pyproj

llcrnrlon = -30.0
llcrnrlat = 45.0
urcrnrlon = 0.0
urcrnrlat = 65.0
lon_0 = (urcrnrlon + llcrnrlon) / 2.
lat_0 = (urcrnrlat + llcrnrlat) / 2.

lat = 51.58661577  # reference point
lon = -9.18822525

# Generate random back-azimuths.
baz = zeros((20))
for i in xrange(len(baz)):
  baz[i] = random.randint(200,230)

####################################################################
## Set up the map background.
m = Basemap(llcrnrlon=llcrnrlon,llcrnrlat=llcrnrlat,urcrnrlon=urcrnrlon,urcrnrlat=urcrnrlat,
    resolution='i',projection='lcc',lon_0=lon_0,lat_0=lat_0)
m.drawcoastlines()
m.fillcontinents() 

# draw parallels
m.drawparallels(np.arange(10,70,10),labels=[1,0,0,0])
# draw meridians
m.drawmeridians(np.arange(-80, 25, 10),labels=[0,0,0,1])

# Plot station locations.
x, y = m(lon, lat)            # array ref points
m.plot(x,y,'ro', ms=5)

####################################################################
## Set up the grids etc.
glons = np.linspace(llcrnrlon, urcrnrlon, 100)
glats = np.linspace(llcrnrlat, urcrnrlat, 100)

# Convert to map coords.
xlons, ylats = m(glons, glats)

# create grid for pcolormesh.
grid_lon, grid_lat = np.meshgrid(xlons, ylats)

# create weights for pcolormesh.
weights = np.zeros(np.shape(grid_lon))

# create grid of lat-lon coords for baz calculation.
gln, glt = np.meshgrid(glons, glats)

####################################################################
## calculate baz from grid_lon, grid_lat to lon, lat. If less 
## than error weight grid point.

# method for BAZ calculation via pyproj.
def get_baz(lon1, lat1, lon2, lat2):
  g = pyproj.Geod(ellps='WGS84')
  az, baz, dist = g.inv(lon1, lat1, lon2, lat2)
  return baz

# BAZ calcultion for each point in grid.
ll=0
for mBAZ in baz:
  for i in xrange(len(gln)):
    for k in xrange(len(gln[i])):
      nbaz = get_baz(lon, lat, gln[i][k], glt[i][k])
      nbaz += 180
      if abs(nbaz - mBAZ) < 2:
    weights[i][k] = 1
  ll+=1

# plot grid.
m.pcolormesh(grid_lon, grid_lat, weights, cmap=plt.cm.YlOrBr)
plt.colorbar()
plt.show() 
```

## 下面的原始问题，现在已经过时了。

我正在尝试映射一些数据。我有一个数据集，它为每个方向提供一系列值（频率）。我想将它们绘制在网格上，以便沿特定方位角的每个网格点都由特定频率的功率加权。我创建了一个带有底图的地图并在其上绘制了一个网格，如下所示，

```
from mpl_toolkits.basemap import Basemap
import matplotlib.pyplot as plt
import numpy as np
from shoot import *

llcrnrlon = -20.0
llcrnrlat = 45.0
urcrnrlon = 10.0
urcrnrlat = 65.0
lon_0 = (urcrnrlon + llcrnrlon) / 2.
lat_0 = (urcrnrlat + llcrnrlat) / 2.

m = Basemap(llcrnrlon=llcrnrlon,llcrnrlat=llcrnrlat,urcrnrlon=urcrnrlon,urcrnrlat=urcrnrlat,
        resolution='i',projection='lcc',lon_0=lon_0,lat_0=lat_0)

## Set up the grid.
glons = np.linspace(-20,10,50)
glats = np.linspace(45, 65, 50)
xlons, ylats = m(glons, glats)
grid_lon, grid_lat = np.meshgrid(xlons, ylats) 
pwr = np.zeros((50,50))

m.drawcoastlines()
m.fillcontinents() 

# draw parallels
m.drawparallels(np.arange(10,70,10),labels=[1,0,0,0])
# draw meridians
m.drawmeridians(np.arange(-80, 25, 10),labels=[0,0,0,1])

lats = [54.8639587, 51.5641564]
lons = [-8.1778180, -9.2754284]

x, y = m(lons, lats)            # array ref points

# Plot station locations.
m.plot(x,y,'ro', ms=5)
m.pcolormesh(grid_lon, grid_lat, pwr) 
```

[然后我使用我在这个不错的网站上](http://www.geophysique.be/2011/02/19/matplotlib-basemap-tutorial-08-shooting-great-circles/)找到的一些功能射出我想要的大圆圈

```
glon1 = lons[0]
glat1 = lats[0]
azimuth = 280.
maxdist = 200.
great(m, glon1, glat1, azimuth, color='orange', lw=2.0)
plt.show() 
```

但是，仅绘制线条是不够的，我希望能够找到大圆穿过的网格点，以便为它们分配值。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T16:32:54.753

你能指定你的意思是哪个交叉点吗？运行您的代码仅返回一行...

![在此处输入图像描述](../Images/c68f4d9bf4e6e65185fba56e0b4ed293.png)

# mysql - 简单有序的 MySQL 查询在大表上运行非常慢

> ID：14980073
> 
> 赞同：0
> 
> 时间：2013-02-20T12:39:23.950
> 
> 标签：mysql, select, sql-order-by

我有一张有 ~ 1.500.000 条记录的表：

```
CREATE TABLE `item_locale` (
  `item_id` bigint(20) NOT NULL,
  `language` int(11) NOT NULL,
  `name` varchar(256) COLLATE utf8_czech_ci NOT NULL,
  `text` text COLLATE utf8_czech_ci)
  PRIMARY KEY (`item_id`,`language`),
  KEY `name` (`name`(255))
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_czech_ci; 
```

使用`item_id`,`language`作为主键和索引`name`，大小为 255。

使用以下查询：

```
select item_id, name from item_locale order by name limit 50; 
```

尽管只需要 50 行，但 select 需要大约 3 秒的时间。

我能做些什么来加快这样的查询？

编辑：你们中的一些人建议添加一个索引。我在上面提到过，该`name`列的索引大小为 255。

我`explain`按以下命令运行：

```
+----+-------------+---------------+------+---------------+------+---------+------+---------+----------------+
| id | select_type | table         | type | possible_keys | key  | key_len | ref  | rows    | Extra          |
+----+-------------+---------------+------+---------------+------+---------+------+---------+----------------+
|  1 | SIMPLE      | item_locale | ALL  | NULL          | NULL | NULL    | NULL | 1558653 | Using filesort |
+----+-------------+---------------+------+---------------+------+---------+------+---------+----------------+ 
```

奇怪的是它似乎没有使用任何索引......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:54:25.867

Try to use query hint:

```
select item_id, name 
 from item_locale USE INDEX FOR ORDER BY (name) 
  order by name limit 50; 
```

also try to use

```
select item_id, name 
 from item_locale FORCE INDEX (name) 
  order by name limit 50; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:42:07.783

检索 50 条记录也很繁重。将它们限制为 10 因为您也使用 Order by..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T05:08:40.237

最后，索引出现了某种问题 - 我将它们全部删除并重新创建它们。它终于奏效了。谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:45:26.933

在名称字段上应用索引可能会加快速度。

# php - 在 Wordpress 的边栏中显示 PDF 文件列表

> ID：14980085
> 
> 赞同：0
> 
> 时间：2013-02-20T12:40:15.173
> 
> 标签：php, wordpress, sidebar

我正在用静态 HTML 和 Wordpress 制作这个网站（我对主题文件夹进行了一些更改）。该网站即将完成，但我想在侧边栏中制作一个新框，上传不同的 PDF 文件（列表）非常容易。例如：

*   通讯1.pdf
*   通讯2.pdf
*   时事通讯3.pd

我正在为我叔叔制作网站，但他仍然需要电视遥控器方面的帮助，因此它必须尽可能方便用户使用。

我所追求的是一个小部件或只是某种方式，在侧边栏中显示 PDF 文件列表。如果它涉及更改主题代码，那很好。在这个小部件中插入 ned PDF 文件应该尽可能简单。

我想过各种不同的想法。我一直在寻找一个小部件，您可以在其中插入媒体文件。但是所有这些小部件在过去两年都没有更新。那是因为它已成为 Wordpress 核心的一部分，而我遗漏了一些东西吗？

我也想过，如果有可能有一个 PHP-widget 或类似的东西，它包括一些东西——但这是一个糟糕的主意。

理想情况下，如果有一个小部件，您可以进入并添加 PDF 文件，就好像它是一个帖子一样，这将是很酷的。或者也许是一个小部件，它从帖子（或页面）中获取所有内容并显示整个内容（从那时起我可以向我叔叔解释，他只需要将页面或帖子放在正确的位置，然后它会将所有链接从该帖子或页面拉到侧边栏小部件）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:11:09.350

使用下面的代码：

```
<ul id="attachments">
<?php foreach ($attachments as $attachment) { 

    if ($attachment ->post_mime_type != 'image/jpeg') {
    $filetipe = $attachment->post_mime_type;
    $signs = array(".", ",", "-", "application", "/");
    $filetype = str_replace($signs, "", $filetipe);

?>

    <li class="<?php echo $filetype; ?>"><a href="<?php echo wp_get_attachment_url($attachment->ID); ?>" target="blank"><?php  echo apply_filters( 'the_title', $attachment->post_title ); ?> </a></li>

<?php } } ?>
</ul> 
```

您可以获得除图片外的所有帖子附件。现在您可以编辑您的 sidebar.php 并查询附有这些 pdf 文件的帖子。这将是您的 sidebar.php 文件的完整代码，其中 5 是您的帖子的 ID

```
 <?php
    query_posts( 'p=5' );
    while ( have_posts() ) : the_post(); ?>

<?php $args = array(
    'post_type' => 'attachment',
    'numberposts' => null,
    'posts_per_page' => 666,

    'post_status' => null,
    'post_parent' => $post->ID
); 
$attachments = get_posts($args);
if ($attachments) {?>

<ul id="attachments">
    <?php foreach ($attachments as $attachment) { 

        if ($attachment ->post_mime_type != 'image/jpeg') {
        $filetipe = $attachment->post_mime_type;
        $signs = array(".", ",", "-", "application", "/");
        $filetype = str_replace($signs, "", $filetipe);

    ?>

        <li class="<?php echo $filetype; ?>"><a href="<?php echo wp_get_attachment_url($attachment->ID); ?>" target="blank"><?php  echo apply_filters( 'the_title', $attachment->post_title ); ?> </a></li>

    <?php } } ?>
    </ul>
    <?php   } ?>    
    <?php endwhile; ?>
    <?php wp_reset_query(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:55:27.043

我发现这个 Wordpress 插件可以解决问题。它从给定的帖子或页面中提取所有 PDF 文件并将其显示在小部件中。虽然它给了我一些问题，但没有什么是不能用小小的摆弄来解决的......

[http://wordpress.org/extend/plugins/cop-pdf-attachment-menu/](http://wordpress.org/extend/plugins/cop-pdf-attachment-menu/)它被称为：AGC：COP PDF 附件菜单

# javascript - 隐藏行时Opera不会冻结表格

> ID：14980087
> 
> 赞同：1
> 
> 时间：2013-02-20T12:40:20.573
> 
> 标签：javascript, jquery, html-table, cross-browser, opera

考虑以下代码：http: [//jsfiddle.net/nzzzH/](http://jsfiddle.net/nzzzH/)

尝试在 Chrome、IE、Firefox 中点击 div 然后与 Opera 比较

你可以注意到，一开始所有的 <tr> 元素都被隐藏在一起了，但它是一个一个地被 Opera 隐藏起来的。

根据规格，哪种行为是正确的？怎么能强迫 Opera 像其他浏览器一样工作呢？

代码：

```
<div> click </div>

<table>
  <tr><td>a</td></tr>
  <tr><td>b</td></tr>
  <tr><td>c</td></tr>
  <tr><td>d</td></tr>
  <tr><td>e</td></tr>
</table>

var sleep = function (ms) {
    var unixtime_ms = new Date().getTime();
    while(new Date().getTime() < unixtime_ms + ms) {}
}

$('div').click(function(){
    $('tr').each(function(){
        $(this).hide();
        sleep(200);
    })
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:58:33.870

因此，如果您只想隐藏行并将某些样式应用于可见行，为什么不一步隐藏它们呢？

```
$('div').click(function(){
    $('tr.rows-to-hide').hide();
    $('tr:not(.rows-to-hide)').css('background-color', 'blue');
}); 
```

**编辑** 我做了三个例子：

[http://jsfiddle.net/nzzzH/8/](http://jsfiddle.net/nzzzH/8/) ->`.hide()`在`each()`-loop

[http://jsfiddle.net/nzzzH/10/](http://jsfiddle.net/nzzzH/10/) ->`.hide()`一次

[http://jsfiddle.net/nzzzH/10/](http://jsfiddle.net/nzzzH/10/) ->`.css('display', 'none')`在`each()`-loop

所以确实`.hide()`in `each()`-loop 的使用是迄今为止最慢的，不幸的是我无法找出这种行为的具体原因，我的猜测是歌剧在处理大量 jQuery 动画时具有性能。我的提示是立即使用`.hide()`。

**编辑 2** 我认为我的猜测是正确的：[为什么歌剧动画这么慢？](https://stackoverflow.com/questions/7460942/why-is-opera-animation-so-slow)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T13:02:02.977

尝试用 .css({'display':'none'}) 替换 .hide() ：

```
$('div').click(function(){
    $('tr').each(function(){
        $(this).css({'display':'none'});
    })
}) 
```

# android - Android 4.0导航栏隐藏软键盘

> ID：14980089
> 
> 赞同：0
> 
> 时间：2013-02-20T12:40:27.160
> 
> 标签：android, xml, mono, xamarin.android, android-4.0-ice-cream-sandwich

正如您在图片上看到的那样，我的问题是底部导航栏位于键盘上方。我正在 Mac OSX 上使用 Mono for Android (MonoDevelop) 进行开发。

![在此处输入图像描述](../Images/6e69c9f142f43288d018c165ee331cf0.png)

登录活动.axml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/LoginFormContainer"
    android:orientation="vertical">
<EditText
    android:id="@+id/username"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:hint="@string/prompt_username"
    android:inputType="textEmailAddress"
    android:maxLines="1"
    android:singleLine="true"
    android:layout_marginBottom="14.0dp"
    android:layout_marginTop="54.0dp" />
<EditText
    android:id="@+id/password"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/prompt_password"
    android:imeActionId="@+id/login"
    android:imeActionLabel="@string/action_sign_in"
    android:imeOptions="actionUnspecified"
    android:inputType="textPassword"
    android:maxLines="1"
    android:singleLine="true" />
<Button
    android:id="@+id/sign_in_button"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:layout_marginTop="16dp"
    android:paddingLeft="32dp"
    android:paddingRight="32dp"
    android:text="@string/action_sign_in"
    android:layout_marginLeft="0.0dp" />
</LinearLayout> 
```

和themes.xml：

```
<style name="LoginFormContainer">
    <item name="android:layout_width">match_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:padding">16dp</item>
</style> 
```

为 Android 4.0 构建。在 Android 4.0 模拟器上进行测试（因为我正在评估 Mono for Android）。模拟器将“Hardware Home/Back keys”属性设置为“no”。

# java - 您可以链接两个 JFormattedTextField 的值吗？

> ID：14980090
> 
> 赞同：0
> 
> 时间：2013-02-20T12:40:28.653
> 
> 标签：java, swing, jformattedtextfield, documentlistener

我有一个带有 2 个 JFormattedTextFields 的接口，我需要它们的值（不仅仅是显示的文本）相同。理想情况下，它们都应该是可编辑的，其中一个的更改反映在另一个中。

我一开始只是在两者之间共享一个 Document，但很快就遇到了一个问题，即这只链接了显示的文本，而不是底层的值。（我真傻！）
我没有尝试为“值”属性添加倒数 PropertyChangeListeners，因为我希望这会设置一个无限循环的修改。

我错过了什么吗？有没有办法做到这一点？还是我坚持只允许用户编辑两者之一并且只让值在一个方向传播？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:43:39.193

> 我需要相同的值（不仅仅是显示的文本）。理想情况下，它们都应该是可编辑的，其中一个的更改反映在另一个中。

*   使用[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)，

*   例如（只有一个方向）

![在此处输入图像描述](../Images/f4bf4530e48760611aa17b7e1106800d.png)

```
import java.awt.GridLayout;
import javax.swing.*;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;

public class TextLabelMirror {

    private JPanel mainPanel = new JPanel();
    private JTextField field = new JTextField(20);
    private JTextField field1 = new JTextField(20);

    public TextLabelMirror() {
        field.getDocument().addDocumentListener(new DocumentListener() {

            @Override
            public void changedUpdate(DocumentEvent e) {
                updateLabel(e);
            }

            @Override
            public void insertUpdate(DocumentEvent e) {
                updateLabel(e);
            }

            @Override
            public void removeUpdate(DocumentEvent e) {
                updateLabel(e);
            }

            private void updateLabel(DocumentEvent e) {
                java.awt.EventQueue.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        field1.setText(field.getText());
                    }
                });
            }
        });

        mainPanel.setLayout(new GridLayout(1, 0, 10, 0));
        mainPanel.add(field);
        mainPanel.add(field1);
    }

    public JComponent getComponent() {
        return mainPanel;
    }

    private static void createAndShowUI() {
        JFrame frame = new JFrame("TextLabelMirror");
        frame.getContentPane().add(new TextLabelMirror().getComponent());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T17:10:08.027

您可以使用键侦听器。您只需使用以下代码向两个字段添加一个键侦听器。您需要其他事件的原因是它会抛出错误，除非您在代码中包含它们。

```
import javax.swing.*;   
import java.awt.*;  
import java.awt.event.*;

public class CreateGrid 
{    
    JFrame thisframe;
    JFormattedTextField jFormattedTextField1, jFormattedTextField2;

    public CreateGrid()
    {
        GridLayout thislayout = new GridLayout(0,2);
        thisframe = new JFrame();
        thisframe.setLayout(thislayout);

        jFormattedTextField1 = new JFormattedTextField();
        jFormattedTextField2 = new JFormattedTextField();
        jFormattedTextField1.addKeyListener(new KeyAdapter()
        {
            public void keyReleased(KeyEvent e) 
            {                
                JFormattedTextField textField = (JFormattedTextField) e.getSource();
                String text = textField.getText();
                jFormattedTextField2.setText(text);
            }
            public void keyTyped(KeyEvent e) 
            {
            }
            public void keyPressed(KeyEvent e) 
            {
            }            
        });
        jFormattedTextField2.addKeyListener(new KeyAdapter()
        {
            public void keyReleased(KeyEvent e) 
            {                
                JFormattedTextField textField = (JFormattedTextField) e.getSource();
                String text = textField.getText();
                jFormattedTextField1.setText(text);
            }
            public void keyTyped(KeyEvent e) 
            {
            }
            public void keyPressed(KeyEvent e) 
            {
           }            
       });
       thisframe.add(jFormattedTextField1);
       thisframe.add(jFormattedTextField2);
       thisframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
       thisframe.setVisible(true);
       thisframe.pack();
   }

public static void main(String args[])
{
    new CreateGrid();
} 
```

我已经对此进行了测试，它可以完美地工作，无论您在一个字段中输入什么，都会在您输入时显示在另一个字段中。

# php - 连接到自定义模块中的另一个数据库

> ID：14980094
> 
> 赞同：1
> 
> 时间：2013-02-20T12:40:36.933
> 
> 标签：php, magento

我在其 config.xml 文件中创建了一个新模块**forumprodposts**我添加了以下 xml。在控制器中，我添加了此代码

```
$sql    = "SELECT * FROM comments";
$conn   = Mage::getSingleton('core/resource')->getConnection('forumprodposts_read');
$data   = $conn->fetchAll($sql); 
```

但是上面的代码抛出了comments不是核心数据库的表的错误。我认为在我的 xml 中有一些错误，因此没有建立与**prodcomments**数据库的连接。

```
<resources>
    <forumprodposts_write>
        <connection>
            <use>prodcomments_database</use>
        </connection>
    </forumprodposts_write>
    <forumprodposts_read>
        <connection>
            <use>prodcomments_database</use>
        </connection>
    </forumprodposts_read>
    <forumprodposts_setup>
        <connection>
            <use>core_setup</use>
        </connection>
    </forumprodposts_setup>
    <forumprodposts_database>
        <connection>
            <host><![CDATA[localhost]]></host>
            <username><![CDATA[username]]></username>
            <password><![CDATA[password]]></password>
            <dbname><![CDATA[prodcomments]]></dbname>
            <model>mysql4</model>
            <type>pdo_mysql</type>
            <active>1</active>
        </connection>
    </forumprodposts_database>
</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:31:45.753

您命名了数据库资源`<forumprodposts_database>`，但告诉您的读/写句柄`prodcomments_database`用作资源。从以下位置更改`<use>`节点：

```
<use>prodcomments_database</use> 
```

至

```
<use>forumprodposts_database</use> 
```

应该解决这个问题。

# php - 如何在zend框架中扩展模板

> ID：14980099
> 
> 赞同：0
> 
> 时间：2013-02-20T12:40:48.513
> 
> 标签：php, zend-framework, layout

1.  我有一个网站，其中所有页面共享一个共同的页眉和页脚。有一些控制器动作使用这个布局作为模板

2.  还有另一个模板是选项卡式模板。登录应用程序后，用户将获得一个选项卡式界面（也具有相同的页眉和页脚）。我有这个应用程序是用**Stripes**框架（基于 Java）编写的。在那里，有一个主模板（包含页眉和页脚），它被扩展为一个选项卡式界面（这是另一个模板），然后所有其他操作都向该模板添加了一些特定的内容（将显示的实际页面），结果得到显示。

假设有一个个人资料页面，使用选项卡式界面的帐户页面（使用第二个模板）和一个关于我们的页面，使用第一个模板联系我们页面。

在 zend 中，我知道如果我想要第二个模板中第一个模板的所有功能，我必须将所有该模板复制到该模板。不是这样吗？或者这里有任何扩展功能吗？扩展后，我可以直接将该模板用于帐户和个人资料页面而不是第一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:09:24.290

是的你可以，

在您的 Layout 文件夹中，您可以有名为“parts”的文件夹，在它们中您可以分别有页眉和页脚，在您的主模板页面中，您可以如下调用它们，

```
<head>  
  <title>Site Title</title>
</head> 
<body>
  <?php echo $this->render('parts/header.phtml') ?>
  <?php echo $this->layout()->content ?>
  <?php echo $this->render('parts/footer.phtml') ?>
</body>
</html> 
```

# matlab - 如何对具有相同列值的行进行分组？

> ID：14980104
> 
> 赞同：4
> 
> 时间：2013-02-20T12:41:26.483
> 
> 标签：matlab, matrix, grouping

给定具有 3D 空间坐标的矩阵和两个矩阵中两个变量（例如 a 和 b）的值，我想将相同点的行合并到一个公共矩阵中。

为了清楚地解释这个问题，假设我们有矩阵

```
A=[posX, posY, posZ, a]
and 
B=[posX, posY, posZ, b] 
```

并想将它们组合成

```
AB = [posX, posY, posZ, a, b] 
```

例如

```
A = [0 0 1 1; 0 1 0 4; 5 0 12 8];
B = [0 0 0 5; 0 1 0 3; 5 11 7 7]; 
```

会给

```
AB = [0 0 0 0 5; 0 0 1 1 0; 0 1 0 4 3; 5 0 12 8 0; 5 11 7 0 7]; 
```

为了做到这一点，我首先创建了

```
ATemp = [A, zeros(length(A,0)] 
```

和

```
BTemp = [B(:, [1 2 3]), zeros(length(B),1), B(:,4)] 
```

然后尝试使用函数`accumarray`，`grpstats`但没有设法形成 AB 矩阵。

如果有人提出获得所需矩阵的方法，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:49:22.113

```
AB=union(A(:,1:3),B(:,1:3),'rows');
AB(ismember(AB,A(:,1:3),'rows'),4)=A(:,4);
AB(ismember(AB(:,1:3),B(:,1:3),'rows'),5)=B(:,4) 
```

[编辑] 此解决方案仅在每个 (x,y,z) 点在每个矩阵中仅出现一次时才有效。如果有多个，则第二行（和/或第三行）存在尺寸不匹配。

# ruby-on-rails - 在类别之间进行选择，然后通过许多子类别进行选择

> ID：14980110
> 
> 赞同：0
> 
> 时间：2013-02-20T12:41:37.520
> 
> 标签：ruby-on-rails, categories, acts-as-taggable

我有一些问题，我会尽力解释。

我想建立分类，提供这样的功能。我有一些大类别，例如废物回收设备，下面是子类别，例如切碎机，然后我又有子类别。

我想建立分类系统，允许当我创建新产品时选择这样的分类路径。

我想知道为我的应用程序提供此类功能的最佳方式是什么？

有什么建议么？

act_as_taggable 提供这样的功能吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:48:34.503

我已经将宝石[血统](https://github.com/stefankroes/ancestry)用于类似目的。这至少会在模型层中为您正在谈论的树结构提供支持。

[RailsCasts](http://railscasts.com/episodes/262-trees-with-ancestry)已经完成了一个关于它的教程。

要与祖先一起玩，我建议使用`rails console`，例如：

```
# category.rb

class Category < ActiveRecord::Base
  attr_accessor :name, :parent
  has_ancestry
end

# rails console

~/Rails/CTK/jwbc[master] $ rails console
Loading development environment (Rails 3.2.11)
1.9.3p286 > main = Category.create(name: "Main category")
# => created
1.9.3p286 > sub1 = Category.create(name: "First subcategory", parent: main)
# => created
1.9.3p286 > sub2 = Category.create(name: "Sub-subcategory"), parent: sub1)
# => created
1.9.3p286 > main.children
# => Would return sub1
1.9.3p286 > main.descendants
# => Returns sub1 and sub2
1.9.3p286 > Category.at_depth(1)
# => Returns all subcategories, in this case sub1 
```

# android - Android 应用程序：预览冻结/NPE

> ID：14980113
> 
> 赞同：0
> 
> 时间：2013-02-20T12:41:40.080
> 
> 标签：android, camera, nullpointerexception, freeze, fileoutputstream

这是我的第一个 Android 应用程序，我使用相机预览和 FileOutputStream 将图片保存在我的 SD 卡上。在应用程序中，我想通过按一次按钮来制作单张图片或连续图片行。当我调用方法“手动跟踪”时，预览会冻结，我只能返回上一个屏幕。当我调用方法“串行跟踪”时，应用程序以 NPE 结尾。（碰巧我在崩溃一次后也无法在其他应用程序中使用我的相机；必须重新启动我的设备）

我在哪里失败？

```
package com.example.autoimageapp;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;

import android.annotation.SuppressLint;
import android.hardware.Camera;
import android.hardware.Camera.PictureCallback;
import android.hardware.Camera.ShutterCallback;
import android.os.Environment;
import android.util.Log;

public class PictureTaker {

private static final int MEDIA_TYPE_IMAGE = 1;
private static final int MEDIA_TYPE_VIDEO = 2;
private static final String TAG = "PictureTaker";

private int milliseconds;
private CameraPreview preview;
public Thread t;

// Called when shutter is opened
private ShutterCallback shutterCallback = new ShutterCallback() {
    public void onShutter() {
        Log.d(TAG, "onShutter'd");
    }
};

// Handles data for raw picture
private PictureCallback rawCallback = new PictureCallback() {
    public void onPictureTaken(byte[] data, Camera camera) {
        Log.d(TAG, "onPictureTaken - raw");
    }
};

// Handles picture data after picture was taken.
// Saves picture.
private PictureCallback jpegCallback = new PictureCallback() {

    @Override
    public void onPictureTaken(byte[] data, Camera camera) {
        Log.d(TAG, "onPictureTaken - jpeg");
        File pictureFile = getOutputMediaFile(MEDIA_TYPE_IMAGE);
        if (pictureFile == null) {
            Log.d(TAG,
                    "Error creating media file, check storage permissions.");
            return;
        }

        try {
            FileOutputStream fos = new FileOutputStream(pictureFile);
            fos.write(data);
            fos.close();
        } catch (FileNotFoundException e) {
            Log.d(TAG, "File not found: " + e.getMessage());
        } catch (IOException e) {
            Log.d(TAG, "Error accessing file: " + e.getMessage());
        }
    }
};

public PictureTaker(CameraPreview preview, int milliseconds) {
    this.milliseconds = milliseconds;
    this.preview = preview;
}

/** Create a File for saving an image or video */
@SuppressLint({ "NewApi", "SimpleDateFormat" })
private static File getOutputMediaFile(int type) {

    if (Environment.getExternalStorageState().equals(
            Environment.MEDIA_UNMOUNTED)) {
        Log.d(TAG, "SD Card is not mounted");
        return null;
    }

    // Create folder with name "AutoImageApp" in "Pictures"
    File mediaStorageDir = new File(
            Environment
                    .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
            "AutoImageApp");

    // Create the storage directory if it does not exist
    if (!mediaStorageDir.exists()) {
        if (!mediaStorageDir.mkdirs()) {
            Log.d("AutoImageApp", "failed to create directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmssSSS")
            .format(new Date());
    File mediaFile;
    if (type == MEDIA_TYPE_IMAGE) {
        mediaFile = new File(mediaStorageDir.getPath() + File.separator
                + "IMG_" + timeStamp + ".jpg");
    } else if (type == MEDIA_TYPE_VIDEO) {
        mediaFile = new File(mediaStorageDir.getPath() + File.separator
                + "VID_" + timeStamp + ".mp4");
    } else {
        return null;
    }

    return mediaFile;
}

/**
 * Calls
 * {@link Camera#takePicture(ShutterCallback, PictureCallback, PictureCallback)}
 * <br>
 * with a frequency of milliseconds, which are given from the user in a
 * Spinner.<br>
 * Runs a new thread so the preview can be shown and pictures can be taken
 * at the same time.
 */
public void takeSerialPics() {
    t = new Thread() {
        @Override
        public void run() {
            while (!isInterrupted()) {
                Log.d(TAG, "vor takePicture Methode");
                try {
                    preview.camera.takePicture(shutterCallback,
                            rawCallback, jpegCallback);
                } catch (RuntimeException e) {
                    Log.d(TAG, "Smartphone zu lahm!");
                    return;
                }
                Log.d(TAG, "nach takePicture Methode");
                try {
                    Thread.sleep(milliseconds);
                } catch (InterruptedException e) {
                    interrupt();
                }
            }
        }
    };
    t.start();
}

/**
 * Calls
 * {@link Camera#takePicture(ShutterCallback, PictureCallback, PictureCallback)}
 * .
 */
public void takeSinglePics() {
    preview.camera.takePicture(shutterCallback, rawCallback, jpegCallback);
} 
```

}

我设置了权限：

```
<uses-feature android:name="android.hardware.camera" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

我认为 NPE 发生在第 57 行 -> fos.write(data)

这是堆栈跟踪：

```
02-20 14:53:26.689: D/PictureTaker(995): vor takePicture Methode
02-20 14:53:26.729: D/PictureTaker(995): nach takePicture Methode
02-20 14:53:26.769: D/PictureTaker(995): onShutter'd
02-20 14:53:27.229: D/PictureTaker(995): vor takePicture Methode
02-20 14:53:41.109: E/SensorManager(995): unregisterListener:: all sensors,  listener = com.example.autoimageapp.Accelerometer@40569578
02-20 14:53:41.109: E/SensorManager(995): unregisterListener:: all sensors,  listener = com.example.autoimageapp.MagneticField@4056bda8
02-20 14:53:41.109: E/SensorManager(995): unregisterListener:: all sensors,  listener = com.example.autoimageapp.Gyroscope@4056cff0
02-20 14:54:26.789: D/SensorManager(1037): ====>>>>>Num Sensor: 1
02-20 14:54:26.789: D/SensorManager(1037): ====>>>>>Num Sensor: 2
02-20 14:54:26.789: D/SensorManager(1037): ====>>>>>Num Sensor: 3
02-20 14:54:26.789: D/SensorManager(1037): ====>>>>>Num Sensor: 4
02-20 14:54:26.799: D/SensorManager(1037): ====>>>>>Num Sensor: 5
02-20 14:54:26.799: D/SensorManager(1037): ====>>>>>Num Sensor: 6
02-20 14:54:26.799: D/SensorManager(1037): ====>>>>>Num Sensor: 0
02-20 14:54:26.799: E/SensorManager(1037): registerListener :: handle = 0  name= BMA220 delay= 200000 Listener= com.example.autoimageapp.Accelerometer@40568ed0
02-20 14:54:26.799: E/SensorManager(1037): =======>>>Sensor Thread RUNNING <<<========
02-20 14:54:26.799: E/SensorManager(1037): reg :: handle = 0
02-20 14:54:26.799: E/SensorManager(1037): registerListener :: handle = 1  name= MMC314X delay= 200000 Listener= com.example.autoimageapp.MagneticField@4056b700
02-20 14:54:26.799: E/SensorManager(1037): reg :: handle = 1
02-20 14:54:26.799: E/SensorManager(1037): registerListener :: handle = 0  name= BMA220 delay= 200000 Listener= com.example.autoimageapp.Accelerometer@40568ed0
02-20 14:54:26.809: E/SensorManager(1037): reg :: handle = 0
02-20 14:54:26.809: E/SensorManager(1037): registerListener :: handle = 1  name= MMC314X delay= 200000 Listener= com.example.autoimageapp.MagneticField@4056b700
02-20 14:54:26.809: E/SensorManager(1037): reg :: handle = 1
02-20 14:54:26.809: E/SensorManager(1037): registerListener :: handle = 0  name= BMA220 delay= 200000 Listener= com.example.autoimageapp.Accelerometer@40568ed0
02-20 14:54:26.819: E/SensorManager(1037): reg :: handle = 0
02-20 14:54:26.819: E/SensorManager(1037): registerListener :: handle = 1  name= MMC314X delay= 200000 Listener= com.example.autoimageapp.MagneticField@4056b700
02-20 14:54:26.819: E/SensorManager(1037): reg :: handle = 1
02-20 14:54:26.939: D/CameraPreview(1037): cannot open Camera
02-20 14:54:26.939: W/dalvikvm(1037): threadid=1: thread exiting with uncaught exception (group=0x40018578)
02-20 14:54:26.959: E/AndroidRuntime(1037): FATAL EXCEPTION: main
02-20 14:54:26.959: E/AndroidRuntime(1037): java.lang.NullPointerException
02-20 14:54:26.959: E/AndroidRuntime(1037):     at com.example.autoimageapp.CameraPreview.surfaceCreated(CameraPreview.java:48)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.SurfaceView.updateWindow(SurfaceView.java:552)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.SurfaceView.dispatchDraw(SurfaceView.java:350)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.View.draw(View.java:6883)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.View.draw(View.java:6883)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1921)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.ViewRoot.draw(ViewRoot.java:1528)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1264)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1866)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.os.Looper.loop(Looper.java:130)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at android.app.ActivityThread.main(ActivityThread.java:3687)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at java.lang.reflect.Method.invokeNative(Native Method)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at java.lang.reflect.Method.invoke(Method.java:507)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
02-20 14:54:26.959: E/AndroidRuntime(1037):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我的班级“跟踪屏幕”的一部分，其中创建了“预览”：

```
preview = new CameraPreview(this);
((FrameLayout) findViewById(R.id.preview)).addView(preview);
preview.setKeepScreenOn(true); 
```

# string - 字符串比较：比较 'zürich' 和 'zurich' 的结果为 -1

> ID：14980114
> 
> 赞同：1
> 
> 时间：2013-02-20T12:41:45.000
> 
> 标签：string, compare

我正在尝试对“zürich”和“zurich”进行字符串比较，如下所示：

```
int compareResult = String.Compare(zürich, zurich); 
```

所以会发生什么是它返回`-1`，这会导致一个问题，因为我稍后将 compareResult 用于 if-else。

有人可以指出我为什么会发生这种情况的正确方向。在比较“zürich”之前我需要先清洁这个还是别的什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:50:08.940

您使用该方法就好了，但字符串实际上是不同的。

因此，为了以您的方式进行比较，您需要：

1.  决定是否要使用 ü 和其他“特殊”拉丁字符的每个比较来查看它们，因为它们是简单字符。 **即在每次你看到ü时，它都会把它当作一个“u”**
2.  如果是这样，您需要对两个字符串进行**预处理**，并将所有特殊字符替换为常规字符。这里还有另一个主题： [如何删除字符串上的重音符号？](https://stackoverflow.com/questions/3769457/how-can-i-remove-accents-on-a-string)

希望它有所帮助。

# android - HTML5 离线网络应用程序无法在 Android 2.x、iPhone 中运行。（但适用于 Android 4.0）

> ID：14980126
> 
> 赞同：1
> 
> 时间：2013-02-20T12:42:23.827
> 
> 标签：android, iphone, django, html, html5-appcache

尝试实现 HTML5 的离线功能。在做了很多谷歌搜索之后，这就是我的代码的样子。`mod_wsgi`（这是一个 django 项目；使用插件部署在 apache2.2 中）
**HTML**
`

```
<!DOCTYPE HTML>
    <html manifest="{{MEDIA_URL}}cache.manifest">
       <head>
          <meta charset="utf-8">      
          <title>MyHomeStuff</title>      
          <script type="text/javascript" src="{{MEDIA_URL}}MyHomeStuff.js" ></script>
          <script></script>
       </head>
       <body>
         .............
       </body>
    </html> 
```

`

**Apache conf\mime.types**
`text/cache-manifest manifest`

**\Python27\Lib\mimetypes.py**
添加`'.manifest': 'text/cache-manifest',`到`types_map`dict

（将上述添加到 mimetypes.py 后，它开始适用于 android 4.0）

**缓存清单**
`CACHE MANIFEST` ``CACHE:`
`index.html`
`MyHomeStuff.js``

 `*编辑* ：
**views.py`**

```
def offlineApp(request):
    t = get_template('index.html')
    html = t.render(Context({'MEDIA_URL':'http://myDomain.com/site_media/'}))
    return HttpResponse(html) 
```

*EDIT2*
**是否需要使用任何特定的`module/middleware`来处理？`text/manifest``django`**

该应用程序在 chrome、opera 和其他桌面浏览器上运行正常；但在 android 2.x、iPhone 浏览器的飞行模式下不加载。但是它适用于 Android 4.0 浏览器！
可能是什么问题呢？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:59:30.893

[在这里](https://groups.google.com/d/msg/django-users/JuW3rWcBzcY/7LEEcYe2_bEJ)得到了谷歌组的答案..

本质上它告诉了这个：

> 当您提供离线 HTML5 时，您需要提供（至少）2 个页面——一个带有 html 的页面，以及一个包含清单的*完全独立的第二个页面。*清单文件的内容类型为 text/cache-manifest；您的 HTML 以普通的 text/html 内容类型提供。`

# linux - Linux bash 脚本中的 Perl 脚本

> ID：14980132
> 
> 赞同：0
> 
> 时间：2013-02-20T12:42:47.147
> 
> 标签：linux, perl, unix, scripting

我正在阅读我遇到以下行的 bash 脚本之一。我无法猜测以下这些行到底在做什么？谁能给我一些关于这些行到底在做什么的提示。我已经分别执行了这些行，但没有输出。我什至尝试使用断点。

```
ssh $HOST bash -e <<
'END' 2>&1 |
 /usr/bin/perl -ne
 'BEGIN { $|=1 } ; 

if (/(bmake|create_dirs\.sh)\[\d+\] Leaving/)
 { --$indent };
 print " "x($indent * 4), "$_" ;
 if (/(bmake|create_dirs\.sh)\[\d+\] Entering/) { ++$indent }' 
```

我期待着任何善意的回应。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:53:08.220

它是一个跟踪身份的脚本。在“离开”行，缩进减少，在“进入”行，缩进增加。然后我们看到基于缩进变量打印了空格。详细地：

```
/usr/bin/perl -ne 
```

`-n`flag`while(<>)`在脚本周围放置一个循环，这基本上使 perl 从标准输入或参数文件中读取。

```
BEGIN { $|=1 } 
```

自动冲洗已打开。

```
if (/(bmake|create_dirs\.sh)\[\d+\] Leaving/) { --$indent }; 
```

这个正则表达式在这里寻找诸如

```
bmake[9] Leaving
create_dirs.sh[2] Leaving 
```

找到后，`$indent`变量减 1。

```
print " "x($indent * 4), "$_" ; 
```

这将打印一个空格，重复 4 *`$indent`次，然后是输入行。

```
if (/(bmake|create_dirs\.sh)\[\d+\] Entering/) { ++$indent } 
```

该行通过与上述相同的方法增加缩进。

关于正则表达式的更多解释（参见[这里](http://rick.measham.id.au/paste/explain.pl?regex=/%28bmake%7Ccreate_dirs%5C.sh%29%5C%5B%5Cd%2b%5C%5D%20Leaving/)，尽管我从这个站点清理了语法）：

```
NODE                     EXPLANATION
--------------------------------------------------------------------------------
  (                        group and capture to $1:
--------------------------------------------------------------------------------
    bmake                  literal string 'bmake'
--------------------------------------------------------------------------------
   |                       OR
--------------------------------------------------------------------------------
    create_dirs\.sh        literal string 'create_dirs.sh'
--------------------------------------------------------------------------------
  )                        end of $1
--------------------------------------------------------------------------------
  \[                       literal string '['
--------------------------------------------------------------------------------
  \d+                      digits (0-9) (1 or more times (matching
                           the most amount possible))
--------------------------------------------------------------------------------
  \] Leaving               literal string '] Leaving' 
```

# jms-topic - 如何配置消息驱动 Bean 以订阅远程 JMS 主题

> ID：14980136
> 
> 赞同：1
> 
> 时间：2013-02-20T12:43:00.237
> 
> 标签：jms-topic

我正在尝试让 MessageDriven (EJB 3) bean 订阅另一个主机上另一个 glassfish 实例上的 JMS 主题。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:56:41.423

在 Glassfish 控制台中，您可以修改 JMS 服务器并将其指向另一个 Glassfish 实例或独立的 OpenMQ 代理。尽管据我所知，您可以配置多个 JMS 主机，但 Glassfish 将始终使用被调用的主机，`default_JMS_host`因此这就是您要编辑的主机。

只有一件事：在这样的设置中，两个服务器实例将共享队列和主题，如果两个服务器运行相同的应用程序但不想共享例如特定队列，这可能不是您想要的。这可以通过 Destination Resources 配置轻松解决，方法是为该队列指定不同的物理名称。

# image - Wordpress 图片缩略图

> ID：14980137
> 
> 赞同：0
> 
> 时间：2013-02-20T12:43:02.687
> 
> 标签：image, wordpress, post, thumbnails, blogs

我正在尝试找到一种解决方案，如何仅在博客主页上显示缩略图，并在帖子内显示附加到帖子的所有其他图像。

我用谷歌搜索它没有运气......有人可以帮忙吗？

在这里你可以明白我的意思：blog.turdidesigns.com

我是wordpress的新手，所以如果这是一个愚蠢的问题，我很抱歉。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:37:13.807

这么晚才回复很抱歉 ！！！

这是 content.php 代码：

```
<?php

/**

 *

 * content*.php

 *

 * The post format template. You can change the structure of your posts or add/remove post elements here.

 * 

 * 'id' - post id

 * 'class' - post class

 * 'thumbnail' - post icon

 * 'title' - post title

 * 'before' - post header metadata

 * 'content' - post content

 * 'after' - post footer metadata

 * 

 * To create a new custom post format template you must create a file "content-YourTemplateName.php"

 * Then copy the contents of the existing content.php into your file and edit it the way you want.

 * 

 * Change an existing get_template_part() function as follows:

 * get_template_part('content', 'YourTemplateName');

 *

 */ 

    global $post;

    theme_post_wrapper(

        array(

                'id' => theme_get_post_id(), 

                'class' => theme_get_post_class(),

                'thumbnail' => theme_get_post_thumbnail(),

                'title' => '<a href="' . get_permalink( $post->ID ) . '" rel="bookmark" title="' . strip_tags(get_the_title()) . '">' . get_the_title() . '</a>', 

        'heading' => theme_get_option('theme_'.(is_single()?'single':'posts').'_article_title_tag'),

                'before' => theme_get_metadata_icons( 'date,author,edit', 'header' ),

                'content' => theme_get_excerpt(), 

                'after' => theme_get_metadata_icons( 'category,tag,comments', 'footer' )

        )

    );

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:48:34.003

在我的索引 php 中我没有这个...

这是我所拥有的：在我的主题文件夹 infex php 中，我只有这个：

```
<?php get_header(); ?>

<div class="art-layout-wrapper">

    <div class="art-content-layout">

        <div class="art-content-layout-row">

            <div class="art-layout-cell art-content">

            <?php get_sidebar('top'); ?>

            <?php 

                if(have_posts()) {

                    /* Display navigation to next/previous pages when applicable */

                    if ( theme_get_option('theme_' . (theme_is_home() ? 'home_' : '') . 'top_posts_navigation' ) ) {

                        theme_page_navigation();

                    }

                    /* Start the Loop */ 

                    while (have_posts()) {

                        the_post();

                        get_template_part('content', get_post_format());

                    }

                    /* Display navigation to next/previous pages when applicable */

                    if (theme_get_option('theme_bottom_posts_navigation')) {

                         theme_page_navigation();

                    }

                } else {

                     theme_404_content();

                } 

            ?>

            <?php get_sidebar('bottom'); ?>

              <div class="cleared"></div>

            </div>

            <div class="art-layout-cell art-sidebar1">

              <?php get_sidebar('default'); ?>

              <div class="cleared"></div>

            </div>

        </div>

    </div>

</div>

<div class="cleared"></div>

<?php get_footer(); ?> 
```

我和 Artisteer 一起做了这个主题，所以不要过多地评价我 ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:04:06.437

在你的 index.php 文件中替换 the_content(); 与 the_excerpt();

此外，这可能在一个循环中，因此请确保将其替换为文章列表（类别、存档、搜索），而不是在单个循环中。

# django - django-cms admin 使用 CMS_PERMISSION 时页面加载速度很慢

> ID：14980140
> 
> 赞同：1
> 
> 时间：2013-02-20T12:43:09.613
> 
> 标签：django, django-admin, profiling, django-cms

我有一个站点，在 CMS_PERMISSIONS = True 的情况下，加载 django-cms 页面（即 /admin/cms/page/127/）的管理表单需要 18 到 25 秒。没有权限问题就消失了。

这也只有在加载管理表单时才会发生，前端的页面没有这样的延迟。

该网站有超过 35k 的用户——这可能与问题有关，但我不确定。

我使用：Django 1.4 和 django-cms 2.3.4

我试图进行一些分析，但它没用，它显示总时间为 127...500 毫秒，而实际页面加载时间约为 20 秒。

我还尝试使用 johnny-cache（带有 redis）来缓存 SQL 查询，但它也无济于事。

在这种情况下如何改善管理页面加载时间的任何想法？

# ruby-on-rails - Rails 属性在控制台中工作，而不是在应用程序中

> ID：14980142
> 
> 赞同：0
> 
> 时间：2013-02-20T12:43:13.497
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-activerecord

我在图像模型上运行迁移以添加列位置。

模式已更新，列实际上已添加到数据库中，并且可以通过 Rails 控制台访问。我什至在 ActiveAdmin 中使用该列调用 order by 子句，这并没有抱怨。

但是，当尝试在应用程序中访问该属性时，我会遇到未知属性错误。

当尝试在 ActiveAdmin 索引视图中显示该列时，我得到：

```
undefined method `position' for #<Image:0x007f8a3429be98> 
```

它（位置）也已添加到 attr_accessible 中。

我也跑过：

```
Image.connection.schema_cache.clear!
Image.reset_column_information 
```

这也没有帮助。

导轨 3.2.12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:36:08.507

经过一番搜索和尝试后，我能够重现它由前过滤器触发的错误。

这篇文章让我找到了解决方案： [Undefined method "reorder" for #<Array:0xbc38600> using ActiveAdmin](https://stackoverflow.com/questions/9384346/undefined-method-reorder-for-array0xbc38600-usign-activeadmin)

当它有帮助时，请支持其他评论。

# google-maps - 从 Google 地图自动完成功能中提取建议

> ID：14980150
> 
> 赞同：0
> 
> 时间：2013-02-20T12:43:26.563
> 
> 标签：google-maps, google-maps-api-3

我正在实例化一个谷歌地图自动完成框，例如：

```
autocomplete = new google.maps.places.Autocomplete(input, options); 
```

现在，当用户开始输入并出现建议列表时，如果用户只是按 Enter，我希望将排名第一的预测用作搜索词。

例如，当用户搜索：**London**时，我想拉出并发送**英国伦敦**- 只需用户按 Enter。

我可以使用（使用最新的 V3.11）提取该预测：

```
autocomplete.gm_accessors_.place.Gc.predictions[0].wg 
```

但是，这显然依赖于“已编译”的对象名称，例如随着 Google 更新其代码库而更改`Gc`。`wg`

这样做的正确方法是什么？自动完成 API 是否支持它？

**注意**

请在 Google 上为这个问题加注星标以获得解决方案：

[https://code.google.com/p/gmaps-api-issues/issues/detail?id=4945](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4945)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:31:48.377

使用时没有正确`places.Autocomplete`的方法，目前还没有实现。

您可以做什么：API 创建下拉列表，一个带有 className " `pac-container`" 的 div，在该 div 中为每个预测创建一个带有 className " " 的 div `pac-item`，您可以使用第一个文本`.pac-item`作为输入的值。

正确的方法是请求[Places Autocomplete Service](https://developers.google.com/places/documentation/autocomplete)，但是您需要自己创建下拉列表。

# git - git clone over HTTP 不显示任何输出

> ID：14980156
> 
> 赞同：0
> 
> 时间：2013-02-20T12:43:41.360
> 
> 标签：git, http, clone, output

我已经设置了一个 git repo 并希望通过 HTTP 访问它。一切都很好，但是当我这样做`git clone http://mygit/abc.git`时需要一段时间才能完成。我没有看到任何“计数对象......”类型的打印。我的回购克隆很好。

见下文。

为什么会这样？

```
$ git clone http://mygit/abc.git
Cloning into abc...
$
$ ls
abc
$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:35:11.387

也许还*没有*对象？

当你做 a 时会发生什么`git count-objects -v`？

# javascript - 如何在同一项目的android native和android phonegap中共享sqlite数据库

> ID：14980159
> 
> 赞同：2
> 
> 时间：2013-02-20T12:43:55.730
> 
> 标签：javascript, android, cordova

在我的 android phonegap 应用程序中，我编写了调用本机代码的插件。在本机代码中，我正在创建 sqlite 数据库、创建表和插入数据。这里我试图打开同一个数据库并使用 phonegap 存储从 javascript 文件中获取数据阿皮。用于打开数据库和创建表的原生 android 代码

```
enter code here
private void openDatabase(String dbname, String password)
{
File dbfile = this.cordova.getActivity().getDatabasePath("TheTeamScore"+ ".db");
myDB = SQLiteDatabase.openOrCreateDatabase(dbfile, null);
}
private void createTableAndInsert()
{
try {
this.openDatabase(dbname, null);
myDB.execSQL("CREATE TABLE IF NOT EXISTS Contacts(id INTEGER NOT NULL,name TEXT NOT NULL, selectedEmail TEXT, selectedPhone TEXT)");
String sql ="INSERT INTO Contacts (id,name,selectedEmail,selectedPhone) VALUES   (1,'Saranga','Saranga@gmail.com', '7620765783')";
    myDB.execSQL(sql);
}
catch(Exception e)
{
Log.e("Error", "Error", e);
}
} 
```

Javascript 文件包含打开同一数据库（databasename="TheTeamScore"）并从创建的表中选择数据的代码

```
enter code here
function open_DB() {
return window.openDatabase("TheTeamScore", "1.0", "TheTeamScore DB", 200000);
}
function query_DB(tx) {
if (dbquery == "select"){
tx.executeSql('SELECT * FROM Contacts', [], select_EmailSuccess, error_CBForSelect);
}
} 
```

但上面的代码无法从联系人表中获取数据并显示错误没有找到联系人表。如何打开同一个数据库并使用 phonegap 使用表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-11T20:58:18.993

两者都使用不同的数据库，在这种情况下，我要求您使用以下插件...

**[github链接](https://github.com/brodysoft/Cordova-SQLitePlugin)**

SQLite 是一个单用户数据库。如果你走“复制数据库”的路线，那么你就有丢失数据的风险。如果桌面用户添加数据和iOS用户添加数据，复制文件时会丢失某人的数据。

您可以实现自己的“同步”算法来识别数据库之间的更改并使它们保持同步。这可能会很痛苦，但这是一种常见的解决方案，也是我推荐的。我已经为桌面/iOS应用程序这样做了。

您可以选择使用数据库服务器，但这需要网络访问才能连接到它。[从这里](https://stackoverflow.com/questions/30177406/shared-sql-lite-db-between-phonegap-app-and-native-java-app/30177504#30177504)

# php - 未定义的索引（未识别隐藏）

> ID：14980164
> 
> 赞同：0
> 
> 时间：2013-02-20T12:44:20.957
> 
> 标签：php

**在运行以下代码时，我收到以下错误：**

```
Notice: Undefined index: hid in E:\Program Files\xampp\htdocs\cont.php

echo "<table align='right'><tr><td><a href='cont.php?hid=101'><input type='button' value='Account Settings'></a></td></tr></table>"; 
```

**cont.php 代码：**

```
$con = mysql_connect("localhost","Rahul","");
    mysql_select_db("ebusiness", $con);

if($_SESSION['id']==1)
    {
 include 'business.php';
}
else if($_GET['hid']==101)
{
    session_start();
     include 'edprofile.php';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:46:03.707

您直接检查`$_GET['hid']`而不检查它是否已设置。

```
else if(isset($_GET['hid']) && $_GET['hid'] == 101) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:45:53.623

试试这个代码：

添加 ： `$hid = isset($_GET['hid'])?$_GET['hid']:"";`

编辑：`$_GET['hid']`到`else if($hid==101)`

```
$con = mysql_connect("localhost","Rahul","");
    mysql_select_db("ebusiness", $con);

$hid  = isset($_GET['hid'])?$_GET['hid']:"";

if($_SESSION['id']==1)
    {
 include 'business.php';
}
else if($hid==101)
{
    session_start();
     include 'edprofile.php';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:46:19.253

更改此行：

```
else if($_GET['hid']==101) 
```

至：

```
else if(isset($_GET['hid']) && $_GET['hid']==101) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:48:12.710

请记住，当您在页面上使用 GET 或 POST 时，不能保证已发送某个变量，因为 HTTP 协议默认情况下是无状态的。

重要的是要检查变量是否存在，并且变量是否已验证。为此，isset() 方法非常有用。我建议你做一个

`isset($_GET['hid'])`

在 if 语句中的代码中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T12:50:31.177

您还缺少在获取请求中传递隐藏变量（在 URL 中）。一探究竟。它应该在某个地方包含 ?hid=101 或 &hid=101 的内容。

并将您的 else if 条件替换为

```
else if(isset($_GET['hid']) && $_GET['hid']==101) 
```

# css - 使用 :focus 的纯 CSS 移动切换菜单存在非菜单链接失败的问题

> ID：14980165
> 
> 赞同：0
> 
> 时间：2013-02-20T12:44:21.940
> 
> 标签：css, mobile, menu, hyperlink, focus

我正在尝试为我的简单水平一级顶级菜单创建简单的移动版本。我想用最初隐藏但当用户单击屏幕右上角的简单菜单链接时显示的垂直菜单替换水平顶部导航。

事实上，如果您将窗口压缩到小于 768 像素，您可以在[http://www.janparker.co.uk](http://www.janparker.co.uk)上看到我迄今为止构建的内容。

这几乎是一个精美简单的纯 CSS 结果。

菜单完美运行，但是如果用户首先单击“菜单”来激活菜单，然后不使用菜单，而是单击菜单外页面上的其他链接，就会出现问题。

外面的链接不起作用。更糟糕的是，菜单也会关闭并且页面滚动（自然行为和非不良行为），如果用户在页面向下滚动很长一段时间，这种组合会让用户完全迷失方向。

代码是：

`<a id="menu-invoker" tabindex="0">Menu</a> <nav><ul><li>First menu item</li><li>second menu item</li></ul></nav> <p><a href="http://www.google.com">Some other link</a></p>`

`#menu-invoker:focus ~ nav {display: block;} nav {display:none;} ul:focus, ul:active, ul:hover {display: block;}`

或看小提琴：http: [//jsfiddle.net/YNxVs/1/](http://jsfiddle.net/YNxVs/1/)

有什么解决办法吗？实现这一目标的最简单方法是什么？乔纳森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:53:03.173

问题是已经`#menu-invoker`没有了`:focus`。一种解决方案可能是`position: absolute;`导航，因此它浮动在其他内容之上。这样滚动高度永远不会改变。

（菜单外的链接在 Firefox 中有效，但在 IE 或 Webkit 中无效。不确定哪个“错误”）

# ios6 - 来自消息的事件处理

> ID：14980169
> 
> 赞同：1
> 
> 时间：2013-02-20T12:44:25.157
> 
> 标签：ios6, xcode4.5, mfmailcomposeviewcontroller

我们可以在从应用程序发送的消息（短信）中的内容/笑脸中添加一个动作吗？**我的疑问是：* *如何或从哪里可以处理消息中的事件/动作

# scala - 如何从 Java 调用具有 Unit 返回类型的 PartialFunction 的 Scala 函数？

> ID：14980173
> 
> 赞同：0
> 
> 时间：2013-02-20T12:44:45.620
> 
> 标签：scala, scala-java-interop

我正在尝试使用 oxbow_lakes 中描述的脚手架，[在](https://stackoverflow.com/users/16853/oxbow-lakes)Java[中实现 Scala PartialFunction 的最简单方法是什么？](https://stackoverflow.com/questions/10650338/what-is-the-easiest-way-to-implement-a-scala-partialfunction-in-java)调用采用 PartialFunction 的 Scala 方法。这是我的 Scala 代码：

```
class MyScalaClass {
   def instanceOfSomeType: SomeType = ...

   def consume(processor: PartialFunction[SomeType, Unit]) {
      processor.lift(instanceOfSomeType)
   }
} 
```

这就是我试图从 Java 中调用它的方式：

```
 MyScalaClass myScalaClass = new MyScalaClass();

  PartialTransformer<SomeType, Unit> fn = new PartialTransformer<SomeType, Unit>() {
     @Override public boolean isDefinedAt(SomeType input) { return true; }
     @Override protected Unit transform0(SomeType input) { return null; }
  };

  PartialFunction<SomeType, Unit> partial = PartialFunctionBridge$.MODULE$.fromPartialTransformer(fn);

  myScalaClass.consume(partial); 
```

编译器告诉我：

```
consumeInt(scala.PartialFunction<SomeType,java.lang.Object>) in MyScalaClass cannot be applied
to        (scala.PartialFunction<SomeType,scala.Unit>) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:50:20.090

在`void`Java 中用作返回类型以对应`Unit`于 Scala。用于`scala.Unit`泛型中的实际类型参数。

**更新**

我错了。您不能在 Java 端使用 void 来对应 Scala 端的 Unit。这是 Scala 在相反方向提供的另一个虚构。

正在努力...

**更新 2**

似乎很多在 PartialFunction 中标记为具体的方法都是由编译器创建的。事实证明，这比我想象的和工作更乏味。

像往常一样，从 Java 访问 Scala 比反过来要困难得多。也许您可以在 Scala 端创建一个对 Java 友好的 API？

# wpf - 将 UI 从 Windows 窗体转换为 WPF 数据绑定

> ID：14980174
> 
> 赞同：1
> 
> 时间：2013-02-20T12:44:49.007
> 
> 标签：wpf, winforms, visual-studio-2010, user-interface

我目前在 Windows 窗体中有一个带有用户界面的应用程序。此用户界面背后的代码与服务通信。

例如，我有以下代码：

```
public partial class MainWindow : Window
{
    private KeyLessAccessLogic ServiceLogic;

    public MainWindow()
    {
        InitializeComponent();
        ServiceLogic = new KeyLessAccessLogic();
       //LoadValues();
    }

    public KeyLessAccessLogic MyServiceLogic
    {
        get { return ServiceLogic; }
        set
        {
            ServiceLogic = value;
           // RaisePropertyChanged("MyServiceLogic");
        }
    }
    private void BindDataSource()
    {
        cmb_user_name.DataSource = null;
        cmb_user_name.Sorted = false;
        cmb_user_name.DataSource = ServiceLogic.Users;
        cmb_user_name.DisplayMember = "name";
    } 
```

还有我的 XAML：

```
 <ComboBox Height="23" HorizontalAlignment="Left" Margin="6,71,0,0" 
     Name="cmb_user_update" VerticalAlignment="Top" Width="120" 
     ItemsSource="{Binding Path=MyServiceLogic.Users}" DisplayMemberPath="name" /> 
```

现在我在 WPF 中重新创建了 UI，我对新格式有点迷失了。我确实相信我在这里给出的示例是 WPF 和 Windows 窗体之间差异的示例之一。

如何让我的应用程序知道 Dropdown-box 的数据源应该是什么`cmb_user_name`？`ServiceLogic`是我的服务的中心块，例如访问数据库。

第二件事是，我有一个列表框来向我展示一些设备。我尝试以不同的方式处理数据源以显示我还尝试过的其他内容：

```
 <ListBox Height="100" HorizontalAlignment="Left" Margin="6,44,0,0" 
     Name="listBox_detected" VerticalAlignment="Top" Width="120" 
     ItemsSource="{Binding Path=ServiceLogic.TheDevicesList}" DisplayMemberPath="name" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:47:52.453

用于`XAML`：

```
<ComboBox ItemsSource="{Binding MyServiceLogic.Users}" 
    SelectedItem="{Binding User}" 
    DisplayMemberPath="name" /> 
```

`ServiceLogic`在你的创建一个属性`ViewModel`来保存一个`ServiceLogic`对象：

```
private ServiceLogic myServiceLogic;
public ServiceLogic MyServiceLogic 
{
    get { return  myServiceLogic; }
    set
        {
            myServiceLogic = value;
            RaisePropertyChanged("MyServiceLogic");
        }
} 
```

我假设`Users`是`ObservableCollection`. 或者您可以创建一个直接保存`Users`集合的属性。

# css - IE 按钮问题

> ID：14980177
> 
> 赞同：0
> 
> 时间：2013-02-20T12:45:09.970
> 
> 标签：css, wordpress, internet-explorer, button

仅 IE 中的“了解更多”按钮存在问题，导致它在页面上运行并扭曲布局。页面 URL：[http](http://www.mvholisticretreat.com/) ://www.mvholisticretreat.com/ CSS：[http](http://www.mvholisticretreat.com/wp-content/themes/nebula/style.css) ://www.mvholisticretreat.com/wp-content/themes/nebula/style.css 任何帮助将不胜感激。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:52:16.510

问题1：清理你的代码，你有一个无用的endif

问题2：您的文档类型之前有一些样式。这就是为什么 IE 默认以 quirks 模式加载的原因。修复你的文档类型声明，它几乎是固定的。要预览问题，在 IE9 中按 F12，然后从 quirks mode 下拉列表中选择 IE 9 Standards，您将看到该站点是如何修复的

# asterisk - 呼叫断开星号

> ID：14980183
> 
> 赞同：0
> 
> 时间：2013-02-20T12:45:27.527
> 
> 标签：asterisk, disconnect, ivr

如何使用 PHPAGI 捕获星号的呼叫断开连接？例如，如果用户断开呼叫，则调用哪个事件？如何捕捉它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:27:58.770

您可以检查 PHP-AGI API 调用的返回结果，例如[stream_file](http://phpagi.sourceforge.net/phpagi2/docs/phpAGI/AGI.html#methodstream_file)在挂断时返回`-1`。

`h`您还可以在拨号方案中的扩展上调用另一个 AGI 脚本。

如果你必须清理一些东西，你也可以注册一个[Shutdown function](http://php.net/manual/en/function.register-shutdown-function.php)。

另一种方法是注册一个edmund 在他的博客中长期描述的[信号处理程序。](http://edmundlong.com/edsBlog/php-agi-hangup/)PCNTL 是一个 PHP 扩展，可以让 PCNTL 用`--enable-pcntl`.

```
<?php
declare(ticks=1);

function sig_handler($signo)
{   //Do some stuff in here
    exit(0);
}

//Register the hangup handler
if (function_exists('pcntl_signal'))
{
      pcntl_signal(SIGHUP,  "sig_handler");
} 
```

# java - 关于扩课

> ID：14980184
> 
> 赞同：0
> 
> 时间：2013-02-20T12:45:30.740
> 
> 标签：java

我在java中有一个查询，因为`Object`类是所有的父类，我想知道`Object`java中的每个类都在隐式扩展类。

例如：如果我创建一个对象类，`B`那么我扩展类`A`是可以的，因为在 java 中，类最多只能扩展一个类，但是由于我的类`B`已经隐式扩展了`Object`类，那么它如何扩展类`A`呢？请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:55:51.743

将其视为个人只有一个父母的家谱。每个人只有一个父母，但父母的所有祖先也是个人的祖先。这就是说所有类都扩展时的含义`Object`：它是所有类中最远的祖先，尽管只有那些声明有`extends Object`或没有`extends`声明的类的直接祖先（父级）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:51:13.637

仅当未指定父级时，它才会隐式继承`Object`，否则仅继承指定的父级。

**边注：**

这是允许的：

```
 C
  |
  A
  |
  B 
```

在上述情况下，替换`C`为`Object`符合您的要求。

这是不允许的：

```
C   A
 \ /
  B 
```

继承可以任意深，但一个对象不能有多个父对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:00:07.300

我想你知道这个概念，但你一定有点困惑。想想一棵树。对象类是那棵树的根。它之间有叶子和其他节点。无论你的类层次结构是如何设计的，它最终都会是一个，`Object`因为它的根就是那个。因此，您可以扩展任何类（不是抽象或接口），而无需考虑`Object`类。因为`Object`扩展会自动为您完成。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-20T13:16:15.990

在这里，我会建议，关键字是**EXPLICIT**。您只能**明确**扩展一个类。但是，如果您不这样做，Java 将使用 Object 类隐式扩展您的类。如果你已经完成了，那么 Object 必须在继承类的层次结构中的某个位置。

# android - 自定义Flip动画片段间android支持包

> ID：14980188
> 
> 赞同：10
> 
> 时间：2013-02-20T12:45:41.957
> 
> 标签：android

我正在尝试找出如何在 2 个片段之间创建翻转动画。

我曾尝试将[CardFlip](http://developer.android.com/training/animation/cardflip.html)培训作为指导，但似乎无法实现。我正在使用android支持包并将其设置为补间动画，但不成功。

如何实现片段之间的翻转动画？

这是我从指南创建的前 2 个 xml，也许你可以看看我做错了什么。screen_flip_left_in.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

     <!-- Before rotating, immediately set the alpha to 0\. -->
    <alpha
        android:valueFrom="1.0"
        android:valueTo="0.0"
        android:propertyName="alpha"
        android:duration="0" />

    <!-- Rotate. -->
    <rotate
        android:valueFrom="-180"
        android:valueTo="0"
        android:propertyName="rotationY"
        android:interpolator="@android:anim/accelerate_decelerate_interpolator"
        android:duration="@integer/card_flip_time_full"/>

    <!-- Half-way through the rotation (see startOffset), set the alpha to 1\. -->
    <alpha
        android:valueFrom="0.0"
        android:valueTo="1.0"
        android:propertyName="alpha"
        android:startOffset="@integer/card_flip_time_half"
        android:duration="1" />
</set> 
```

screen_flip_left_out.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >
        <!-- Rotate. -->
    <rotate
        android:valueFrom="0"
        android:valueTo="180"
        android:propertyName="rotationY"
        android:interpolator="@android:anim/accelerate_decelerate_interpolator"
        android:duration="@integer/card_flip_time_full" />

    <!-- Half-way through the rotation (see startOffset), set the alpha to 0\. -->
    <alpha
        android:valueFrom="1.0"
        android:valueTo="0.0"
        android:propertyName="alpha"
        android:startOffset="@integer/card_flip_time_half"
        android:duration="1" />

</set> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:37:25.077

android:propertyName 仅适用于 ObjectAnimator (Honeycomb+) 动画，不适用于 Gingerbread 的视图动画。只有使用 Honeycomb animator api 才能实现卡片翻转动画。我创建了一个支持库的分支，以允许使用来自[NineOldAndroids](http://nineoldandroids.com)的 Animator api进行片段转换。使用我的[github 项目](http://www.github.com/kedzie/android_frameworks_support)的 animator-transition 分支。一旦你有了修改后的支持库，请查看[http://developer.android.com/training/animation/cardflip.html](http://developer.android.com/training/animation/cardflip.html)以制作 animator xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-18T19:25:45.483

您的 xml 应该在 objectAnimator 标签内包含值，而不是在 alpha 和 rotate 标签内。objectAnimator 具有 propertyName ，其中您已经指定了属性值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-21T17:50:42.797

那不对！“一旦你修改了支持库，请查看[http://developer.android.com/training/animation/cardflip.html](http://developer.android.com/training/animation/cardflip.html)以制作动画 xml。”

这并不真正支持 v4 库。

# c++ - gcc搜索错误目录下的头文件

> ID：14980196
> 
> 赞同：3
> 
> 时间：2013-02-20T12:46:07.563
> 
> 标签：c++, c, gcc

我安装了两个版本的 gcc/g++：gcc-4.5（从包管理器安装，二进制文件在 /usr/bin 下，头文件在 /usr/include 下）和 gcc-4.4.3（自己编译，放在/opt/gcc-4.4.3)。

当我将 gcc/g++ 4.4.3 设置为默认版本时（使用“update-alternatives”使 /usr/bin/gcc 和 /usr/bin/g++ 指向目录下的相应版本“/opt/gcc-4.4 .3/bin") 并编译文件，总是报如下错误：

> /usr/include/c++/4.5/bits/basic_string.h:1659: 未定义引用`std::basic_string, std::allocator::_S_construct_aux_2(unsigned long, char, std::allocator const&)'

似乎编译器试图在 /usr/include/c++/4.5 下查找 c++ 的头文件，这会导致链接错误。当我将 gcc 的默认版本更改为 gcc-4.5 时，错误消失了。

那么如何让编译器在正确的目录“/opt/gcc-4.4.3/include”下搜索头文件呢？我曾尝试导出 CPLUS_INCLUDE_PATH，但似乎不起作用。

PS：gcc -v

```
Using build-in specs
Target: x86_64-suse-linux
Configured with: ./configure --prefix=/opt/gcc-4.4.3
Thread model: posix
gcc version 4.4.3 (GCC) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:07:26.747

尝试再次编译 gcc 4.4.3，但使用[`--with-gxx-include-dir=/opt/gcc-4.4.3/include`](http://gcc.gnu.org/onlinedocs/libstdc++/manual/configure.html)配置步骤中的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:41:00.247

这可能是`update-alternatives`已完成或未完成的问题。

当我构建一个备用编译器时，我倾向于使用 a`--prefix` *并且* `--program-suffix=-XY`只是为了发现问题。检查哪个`cpp`正在运行：

```
/opt/gcc-4.4.3/bin/g++ --print-prog-name=cpp
cpp -v </dev/null
/opt/gcc-4.4.3/bin/cpp -v < /dev/null
/opt/gcc-4.4.3/bin/g++ -print-search-dirs | grep '^programs:' 
```

（您也可以检查`ld`和）`as``--print-prog-name`

Setting `CPPFLAGS="-v -H`" during a build may help track things down too.

An ugly workaround might be `CPPFLAGS="-nostdinc -nostdinc++ -I/opt/gcc-4.4.3/include/"` but it's better to fix your compile environment, as that's likely to cause as many problems as it solves. There are also options `-isystem` and `-sysroot` to help in certain cases, see [http://gcc.gnu.org/onlinedocs/cpp/Invocation.html](http://gcc.gnu.org/onlinedocs/cpp/Invocation.html) .

# c# - 将特殊字符（例如 Ã¼ 和 Ãƒ）转换回 C# 中的原始拉丁字母对应字符

> ID：14980200
> 
> 赞同：19
> 
> 时间：2013-02-20T12:46:19.573
> 
> 标签：c#, character-encoding, special-characters, latin, mojibake

我从 MySQL 数据库中得到了一个导出，随着时间的推移，它的编码似乎有些混乱，并且包含`HTML char codes`诸如`& uuml;`和更多问题字符的混合，代表相同的字母，例如`Ã¼`和`Ãƒ`。我的任务是使文件恢复一些一致性并将所有内容都转换为正确的拉丁字符，例如`ú`和`ó`.

我正在处理的那种字符串的一个例子是

> DesinfektionslÃƒÂ¶sungstÃƒÂ¼cher fÃƒÂ¼r FlÃƒÂ¤chen

这应该等于

```
50 Tattoo Desinfektionsl ö    sungst ü    cher f ü    r Fl ä    chen 
50 Tattoo Desinfektionsl ÃƒÂ¶ sungst ÃƒÂ¼ cher f ÃƒÂ¼ r Fl ÃƒÂ¤ chen 
```

C#/.Net 4.5 中是否有一种方法可以成功地重新编码`Ã¼`和`Ãƒ`to之类的方法`UTF-8`？

否则什么方法是可取的？

上面示例字符串中的段落`¶`字符也是实际的段落字符还是其他字符组合的一部分？

在需要查找和替换的情况下，我创建了一个查找表，如下所示，但是我不确定它的完整性。

```
Ã‰ -> É
â€œ -> "
â€ -> "
Ã‡ -> Ç
Ãƒ -> Ã
Ã©, 'é
Ã  -> À
Ãº -> ú
â€¢ -> -
Ã˜ -> Ø
Ãµ -> õ
Ã­ -> í
Ã¢ -> â
Ã£ -> ã
Ãª -> ê
Ã¡ -> á
Ã© -> é
Ã³ -> ó
â€“ -> –
Ã§ -> ç
Âª -> ª
Âº -> º
Ã  -> à 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-20T13:01:30.737

好吧，首先，由于数据已使用错误的编码进行解码，因此某些字符可能无法恢复。看起来它是使用 8 位编码错误解码的 UTF-8 数据。

没有内置的方法可以像这样恢复数据，因为这不是您通常会做的事情。没有可靠的方法来解码数据，因为它已经被破坏了。

您可以尝试对数据进行编码，然后再次使用错误的编码对其进行解码，反之亦然：

```
byte[] data = Encoding.Default.GetBytes(input);
string output = Encoding.UTF8.GetString(data); 
```

为您的`Encoding.Default`系统使用当前的 ANSI 编码。您可以在那里尝试一些不同的编码，看看哪种编码效果最好。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-20T16:50:40.923

由于 Windows-1252 编码有 5 个未分配的插槽，因此数据仅部分无法恢复。Windows-1252 的一些修改用控制字符填充这些，但这些不会使其在 Stackoverflow 中的帖子。如果已使用修改过的 Windows-1252，只要不丢失复制粘贴中的隐藏控制字符，您就可以完全恢复。

还有一个不间断的空格字符被忽略或转换为通常使用复制粘贴的空格，但是当您直接处理字节时，这不是问题。

该字符串所经历的错误编码滥用是：

```
UTF-8 -> Windows-1252 -> UTF-8 -> Windows-1252 
```

要恢复，这里有一个例子：

```
String a = "DesinfektionslÃƒÂ¶sungstÃƒÂ¼cher fÃƒÂ¼r FlÃƒÂ¤chen";
Encoding utf8 = Encoding.GetEncoding(65001);
Encoding win1252 = Encoding.GetEncoding(1252);

string result = utf8.GetString(win1252.GetBytes(utf8.GetString(win1252.GetBytes(a))));

Console.WriteLine(result);
//Desinfektionslösungstücher für Flächen 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-20T13:58:43.473

它可能是您读取为 UTF-8 的 windows-1252 编码字符串。

正如 Guffa 所说，数据已损坏。

让我们看一下字节：
ö -> UTF8 中的 C3B6

在 windows-1252 C3 ->Ã B6 ->¶

所以 ö ->Ã¶

所有这些“ƒÂ”怎么样：

ƒ ->83 Â ->C2

老实说，我不知道它们为什么会出现，但是您可以尝试擦除它们并按照 Guffa 提到的那样进行一些转换。祝你好运

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-17T08:53:42.843

在这里您可以找到更完整的列表：

[http://bueltge.de/wp-content/download/wk/utf-8_kodierungen.pdf](http://bueltge.de/wp-content/download/wk/utf-8_kodierungen.pdf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-27T19:51:49.907

我以前一直被这个字符问题困扰。解决方案：

我的 .(cs)html 文件是 UTF-8；我转换为 UTF-8Y（带有 BOM 的 UTF-8）。

# vb.net - VB.NET 迭代和文件夹操作

> ID：14980205
> 
> 赞同：-3
> 
> 时间：2013-02-20T12:46:56.127
> 
> 标签：vb.net

我是 VB 的新手。任何人都可以帮助解决这个问题，谢谢。顺便说一句，在这里弄乱格式真是太痛苦了：）如何缩进？

参数：

*   源文件
*   目标
*   备份文件夹

**伪代码：**

```
get all sub folders under target  

for each folder under target   
    if exists source file   
       if exists backup folder 
          replace/copy source file to backup folder  
       else
          create backup folder
          replace/copy source file to backup folder  
       replace source file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:51:49.757

检查此方法：

*   [Directory.GetDirectories()](http://msdn.microsoft.com/en-gb/library/system.io.directory.getdirectories(v=vs.71).aspx)
*   [文件已存在（）](http://msdn.microsoft.com/en-gb/library/system.io.file.exists%28v=vs.80%29.aspx)
*   [Directory.Exists()](http://msdn.microsoft.com/en-gb/library/system.io.directory.exists%28v=vs.80%29.aspx)
*   [Directory.CreateDirectory()](http://msdn.microsoft.com/en-gb/library/system.io.directory.createdirectory%28v=vs.80%29.aspx)
*   [文件.复制（）](http://msdn.microsoft.com/en-gb/library/c6cfw35a%28v=vs.80%29.aspx)

[正如我之前在其他帖子上告诉过你的](https://stackoverflow.com/a/14976926/1967056)，只需检查上的方法即可`System.IO`。[它在MSDN](http://msdn.microsoft.com/en-gb/library/system.io%28v=vs.80%29.aspx)上有很好的记录，特别是[File](http://msdn.microsoft.com/en-gb/library/system.io.file(v=vs.80).aspx)、[Directory](http://msdn.microsoft.com/en-gb/library/system.io.directory(v=vs.80).aspx)和[Path](http://msdn.microsoft.com/en-gb/library/system.io.path(v=vs.80).aspx)类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:52:52.470

要获取子文件夹，请参阅[此](https://stackoverflow.com/questions/6003598/get-subdirectories)问题

然后，您需要将子文件夹位置放入一个数组中。从这个数组中，循环遍历每个对象等等。

尝试使用“文件”下的方法。因为这将包括许多文件处理功能。这将需要“导入 System.IO”。

# security - 将自签名 https 证书添加到 teamcity 后，TeamCity 构建代理断开连接

> ID：14980207
> 
> 赞同：18
> 
> 时间：2013-02-20T12:47:01.070
> 
> 标签：security, https, teamcity, teamcity-7.0, build-agent

我向我的 Teamcity BuildServer 添加了一个自签名证书以引入 https 支持，以便现在可以在

```
https://ServerUrl:8443 
```

（有关[此处的](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html#Configuration)更多详细信息）

结果是我能够通过 https 访问服务器，但我的构建代理现在已断开连接。如何解决这个问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-20T12:47:01.070

构建代理作为构建服务器的客户端工作，并使用 http/https 与它通信，事实证明，当您添加自签名证书时，构建代理不接受它。

我需要

1.  让构建代理知道与服务器通信的新路径
2.  让构建代理知道它可以信任自签名证书

要更改路径，我执行了以下操作（有关更多详细信息，请参阅[此帖子](http://earlyandoften.wordpress.com/2011/11/17/teamcity-port/)）

> 找到文件：
> **$TEAMCITY_HOME/buildAgent/conf/buildAgent.properties**
> 
> 将属性
> **serverUrl=http:\://localhost\:8080**更改为您的新 url

为了让构建代理知道它可以信任新证书，我必须将其导入构建代理的密钥库。这是使用 keytool 完成的：

```
keytool -importcert -file <cert file>  
        -keystore <agent installation path>/jre/lib/security/cacerts 
```

（*除非您已更改，否则密钥库受密码保护：changeit*）

[TeamCity 团队在这里](http://confluence.jetbrains.com/display/TCD7/Using+HTTPS+to+access+TeamCity+server)更详细地描述了这个过程

**注意**
*如果您需要从 TeamCity buildserver 密钥库中检索您的证书，您也可以使用 keytool 来执行此操作*：

```
keytool -export -alias <alias name>  
        -file <certificate file name> 
        -keystore <Teamcity keystore path> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-02T21:46:53.610

这是keytool 上 TeamCity v8 文档的[链接。](http://confluence.jetbrains.com/display/TCD8/Using+HTTPS+to+access+TeamCity+server)

我在 Windows 构建代理上执行此操作，并在我的 Amazon Linux 构建服务器上拥有自签名 SSL 证书。以下是我采取的步骤：

1.  在 Build Agent 上的浏览​​器中构建服务器，即[https://teamcity.example.com](https://teamcity.example.com)
2.  点击URL中的证书错误，将证书下载到本地机器
3.  将 Windows 中证书资源管理器中的证书导出到 cer 文件中。
4.  完全按照文档中的说明使用 keytool

    ```
    > keytool -importcert -file <cert file where it was exported to> 
      -keystore <path to JRE installation>/lib/security/cacerts
    password: changeit 
    ```

5.  重新启动构建代理和中提琴！

# c# - 列表中的属性访问器 在 .NET 中

> ID：14980210
> 
> 赞同：0
> 
> 时间：2013-02-20T12:47:12.237
> 
> 标签：c#, .net

我有一个名为 Fruits 的属性，其中包含一个逗号分隔的字符串，格式为“apples,bananases,peaches”

我想在同一个类中创建一个列表，这使得 Fruits 属性更易于操作。访问器将不起作用，因为列表不支持它们或看起来如此。

基本上我想要一个名为 FruitList 的属性，它根据 Fruits 属性自动填充，当添加项目或操作 FruitList 时，它应该自动填充 fruits 属性。

我需要实体框架的水果属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:05:02.193

您可以反转逻辑：

```
List<string> fruitsList = new List<string>();
public List<string> FruitsList
{
    get
    {
        return fruitsList;
    }
}

public string Fruits
{
    get
    {
        return string.Join(',', fruitsList);
    }
    set
    {
        // Incomplete, does not handle null
        FruitsList.Clear();
        FruitsList.AddRange(value.Split(','));
    }
} 
```

如果`Fruits`通过`Fruits`查看`FruitsList`. 您提到您需要`Fruits`作为`string`实体框架的属性，但 EF 并不关心它是否由`string`字段支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:53:57.703

唯一现实的方法是使用可以观察更改的集合，并处理更改时引发的事件，并更新属性。

像[`ObservableCollection<T>`](http://msdn.microsoft.com/en-GB/library/ms668604.aspx)这样的东西很适合。

例子：

```
public class MyObject
{
    public string Fruits{get;set;}

    public IList<string> FruitList 
    {
        get
        {
            var list = new ObservableCollection<string>(Fruits.Split(','));
            list.CollectionChanged += (s,ea) => {
               var items = (IList<string>)s;
               Fruits = String.Join(",",items);
            };
            return list;
        }
    }
} 
```

用法：

```
var obj= new MyObject(){ Fruits="Apple,Banana,Orange" };
var list = obj.FruitList;
list.Add("Satsuma");
list.Add("Grapes");
list.Remove("Apple");
Console.WriteLine(obj.Fruits); // Output: Banana,Orange,Satsuma,Grapes 
```

现场示例：[http ://rextester.com/KCT33825](http://rextester.com/KCT33825)

看到这里的*概念*有效，值得注意的是，上述实现充满了一点危险。`ObservableCollection`每次您在其上调用访问器时，它都会创建一个新的`get`，这可能会产生一些意想不到的后果。

例如，如果您在我原来的之前添加以下行`Console.WriteLine`：

```
Console.WriteLine("{0}", obj.FruitList == list); 
```

它输出`false`的结果可能看起来很奇怪，就像您可能（并且理论上应该）期望的那样`list`，并`obj.FruitList`指向同一个列表。

您可以通过将实现更改为仅创建 1`ObservableCollection`并始终从`get`访问器返回它来解决此问题：

```
public class MyObject
{
    private string fruits;
    private ObservableCollection<string> fruitList;
    public string Fruits
    {
        get{ return this.fruits; }
        set
        {
            this.fruits = value;
            this.fruitList = CreateFruitList();
        }
    }

    private ObservableCollection<string> CreateFruitList()
    {
        var list = new ObservableCollection<string>(this.fruits.Split(','));
        list.CollectionChanged += (s,ea) => {
           var items = (IList<string>)s;
           this.fruits = String.Join(",",items);
        };
        return list;
    }

    public IList<string> FruitList 
    {
        get
        {

            return fruitList;
        }
    }
} 
```

现在世界一切都好起来了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:54:19.857

这是您可以做的，为您的逗号分隔列表创建一个代理：

```
public class MyClass
{
    public string Fruits {get;set;}

    public string [] FruitList {
        get { return Fruits.Split(new [] {','}); }
        //warning, the setter is dangerous
        set { Fruits = string.Join(',', value); }
    }
} 
```

当我说 setter 很危险时，我只是说如果你改变了数组的一个元素， Fruit 就不会被更新。仅当您推送新数组时才会更新。如果您需要该行为，请考虑使用 ObservableCollection 实现它

# java - 开发人员可以跟踪应用程序的统计信息吗？- 安卓

> ID：14980213
> 
> 赞同：0
> 
> 时间：2013-02-20T12:47:15.497
> 
> 标签：java, android, sqlite, statistics

我制作了一个琐事游戏应用程序。有什么方法可以在用户不知情的情况下跟踪如下统计信息：

*   用户玩了多少次某个测验
*   每个测验的问题以及所有测验的总正确百分比
*   有多少次用户没时间回答一个问题
*   等等等等

我希望能够跟踪这一点，以便我可以不断监控数据以查看，例如，是否需要更多时间来解决问题，因为它们一直没时间等等。现在我不需要服务器或任何互联网互动来玩这个游戏，所以如果需要这样做我上面的要求，请说出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:56:46.427

您应该看看[Google Analytics for Android](https://developers.google.com/analytics/devguides/collection/android/)。互联网连接将是必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:51:57.750

您可以通过多种方式执行此操作，但都使用 Web 服务。是否要在手机上存储统计数据然后发送这些数据，或者只是在游戏完成时发送每个单独的统计数据，这取决于您。

您需要一个服务器充当 Web 服务端点，然后在每晚（如果您将统计数据存储在手机上的 localdb 上）或在每场比赛之后从手机调用（可能使用 SOAP/REST）。

我建议每晚或间隔而不是阻塞手机所有者的带宽发送统计信息:)

# algorithm - 遍历以打印使用递归排序的两个 BST。不允许使用像数组这样的额外内存

> ID：14980217
> 
> 赞同：0
> 
> 时间：2013-02-20T12:47:24.097
> 
> 标签：algorithm, data-structures, tree, binary-search-tree, tree-traversal

我在一次采访中被问到这个问题。给出了两个 BST（二叉搜索树）。我们需要以这样一种方式遍历两棵树，以使合并的排序输出成为结果。约束是我们不能像数组那样使用额外的内存。我建议对两棵树进行组合的中序遍历。该方法是正确的，但我陷入了递归，无法编写代码。

注意：我们不能将两棵树合并为一棵。

请有人指导我朝这个方向发展。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:57:14.760

“最简单”的方法是：

1.  将树 A 转换为双向链表（已排序）
2.  将树 B 转换为双向链表（已排序）
3.  遍历排序列表打印最小值（简单）
4.  将列表 A 转换为树 A
5.  将列表 B 转换为树 B

您可以在线找到此步骤的算法。
我认为对树进行并行遍历是不可能的。您将需要其他信息，例如访问标志来消除已访问的左子树，即使这样您也会遇到其他问题。
如果有人知道并行遍历如何实现这一点，我将很高兴知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:52:56.687

```
print $ merge (inorder treeA) (inorder treeB) 
```

有什么问题？

（注意，上面是实际运行并执行任务的实际 Haskell 代码）。`inorder`用递归实现是微不足道的。 `merge`是一个近乎标准的功能，合并它的两个参数有序（非递减）列表，生成有序输出列表，保留重复项。

由于惰性求值和垃圾收集，实际上并没有创建列表 - 每棵树最多保留一个生成的元素，并在生成下一个元素时丢弃，实际上为遍历创建迭代器（每个都有自己的内部状态）。

* * *

**这是解决方案**（如果您的语言不支持上述内容，或等效`yield`机制，或 Scheme 的显式延续，它允许在每个控制堆栈深处的两个上下文之间切换（因此可以并行进行“两个递归”，如上））：

他们没有说时间复杂度，所以我们可以对第一棵树进行*递归遍历*，并为第一棵树的每个节点重新遍历第二棵树——同时在第一棵树上保存`previous`价值。因此，我们在第一棵树上有两个连续的值，并在它们之间打印第二棵树的所有值，使用新的递归遍历，从第二棵树的顶部重新开始，为第一棵树的每对新值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:25:43.670

我假设树中没有指向父节点或下一个节点的链接，否则这将很容易：您只需按照这些链接迭代您的树并编写您的合并算法，就像您对链表一样。

如果您没有下一个或父链接，则无法编写简单的递归。您将需要两个“递归”堆栈。您可以实现以下结构，它允许您分别迭代每个树。

```
class Iterator
{
    stack<Node> st;
    int item(){
       return st.top().item();
    }
    void advance(){
        if (st.top().right != null)
            st.push(st.top().right);
            // Go as far left as possible
            while (st.top().left != null) st.push(st.top().left);
        else {
            int x = st.top().item();
            // we pop until we see a node with a higher value
            while(st.top().item()<=x) st.pop(); 

        }
    }
}; 
```

然后使用其中两个迭代器编写合并算法。

您将需要 O(log n) 空间，但渐近地说，这只不过是任何递归迭代。

# css - SmartGWT TextItem 动态添加样式

> ID：14980218
> 
> 赞同：3
> 
> 时间：2013-02-20T12:47:26.220
> 
> 标签：css, smartgwt

在我计算之后，我需要在 DynamicForm 中的 TextItem 对象中添加一个“行高”值。我不能这样做 myTextItem.getElement.getStyle... 有人可以帮助我吗？

# asp.net - 使用 Eval 设置 ImageButton 的可见性

> ID：14980220
> 
> 赞同：0
> 
> 时间：2013-02-20T12:47:32.230
> 
> 标签：asp.net

我正在尝试设置 ImageButton 可见属性。

```
<asp:ImageButton ID="img_DataDeleted" runat="server" Visible='<%# !Convert.ToBoolean(Eval("IsDeleted")) %>' CausesValidation="false" CommandName="Delete" OnClientClick="return confirm('Are you sure you want to delete this record?');" Text="Delete" ImageUrl="~/Images/Delete_btn.gif" ToolTip="Delete this record" /> 
```

这在删除记录时工作正常

我正在尝试添加，

```
 && !Convert.ToBoolean(Eval("DataID" == '1')) 
```

所以如果 DataID 是 1 我希望 ImageButton 是不可见的

（DataID 数据类型为 int）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:50:59.133

试试这个

```
Visible='<%# !Convert.ToBoolean(Eval("IsDeleted")) && !(Eval("DataID") == 1) %>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:08:48.347

```
 Visible='<%# !Convert.ToBoolean(Eval("IsDeleted")) &&  !(Convert.ToInt32(Eval("DataID")) == 1 ) %>' 
```

这有效

# jsf - p:selectOneMenu，自定义内容和editable=true

> ID：14980221
> 
> 赞同：1
> 
> 时间：2013-02-20T12:47:34.083
> 
> 标签：jsf, primefaces, selectonemenu

我有以下用法`p:selectOneMenu`：

```
<p:selectOneMenu id="selectField"
    value="#{someBean.someField}"
    converter="#{selectItemConverter}" var="x" editable="true">
    <f:selectItems
        value="#{selectItemsBean.getSelectItems(tab, field)}" var="si"
        itemLabel="#{si.label}" itemValue="#{si}" />
    <p:column>
        <h:outputText value="#{si.label}" />
    </p:column>
    <p:column>
        <h:graphicImage library="images" name="noway_16x16.png"
            title="#{si.disabledReason}" rendered="#{si.disabled}" />
    </p:column>
    <p:ajax event="change" update="@form" partialSubmit="true" process="selectField" />
</p:selectOneMenu> 
```

如您所见，我将自定义内容与`editable=true`. 当我提交表单时，转换器将所选项目的标签作为值，而不是实际值。在 HTML 页面中，值是正确的，例如`<option value="C">C-style mounting</option>`. 使用`editable=false`，正确的值（例如`C`发送到转换器，使用`editable=true`转换器检索`C-style mounting`.

我想要的是用户可以选择列表中的预定义项目之一，然后服务器提交该项目的值，*或者*用户输入一些内容并将其作为值提交。但目前的行为有点奇怪——或者我只是想要太多？

# sql - SQL 语法检查

> ID：14980223
> 
> 赞同：0
> 
> 时间：2013-02-20T12:47:46.983
> 
> 标签：sql, sum, between, having

我想知道这个 SQL 查询是否正确：

```
Select t
from S
having sum(S.r) between 0 AND 10000 
```

我的问题是关于 X 和 Y 之间的 Sum() 是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:51:13.677

你缺少`GROUP BY`条款

```
Select t
from S
GROUP BY t
having sum(S.r) between 0 AND 10000 
```

# java - 依赖 p:selectOneMenu 值的填充

> ID：14980224
> 
> 赞同：0
> 
> 时间：2013-02-20T12:47:49.790
> 
> 标签：java, jsf, jsf-2, primefaces

我正在使用 JSF 2.0 和 Primefaces 3.4.2

我有两个`p:selectOneMenu`，第一个父级和第二个子级，基于父值，子组件被填充。

家长`p:selectOneMenu`

```
<p:selectOneMenu id="empl" value="#{empMB.employee}">
<f:selectItems value="#{empMB.employeeList}" var="emp"
itemLabel="#{emp.employeeName}" itemValue="#{emp.employeeNumber}"/>     
                        <p:ajax update="department"  />                      
                    </p:selectOneMenu> 
```

孩子`p:selectOneMenu`

```
<p:selectOneMenu id="department" value="#{deptMB.department}">
<f:selectItems value="#{deptMB.loadDepartments(<??>)}" var="dept"
itemLabel="#{dept.departmentName}" itemValue="#{dept.departmentCode}"/>
                </p:selectOneMenu> 
```

我在部门 ManagedBean 中有一个名为 loadDepartments 的方法，带有一个参数

```
public void loadDepartments(String employeeNumber) 
```

如何将值传递给子组件中的 loadDepartments，以便它根据父组件中选择的代码加载所有部门？

如果我要替换 `#{deptMB.loadDepartments(empMB.employee.employeeCode)}`，我会得到

```
Error Parsing: #{deptMB.loadDepartments({empMB.employee.employeeCode})} 
```

任何帮助是非常可观的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:10:11.790

我会这样做：

1.  将列表变量添加到您的 bean（和适当的 getter）：此列表将保存子组合框的值；
2.  向父组合框上的 p:ajax 调用添加一个侦听器：侦听器填充子值列表（您将可以访问其侦听器中选定的父项）；和
3.  更新您的 xhtml 以使用在步骤 1 中创建的列表中的值，而不是您尝试调用的 loadDepartments 方法。

这通常是我做这种事情的方式，它应该适合你。

**编辑**

页面代码：

```
<p:selectOneMenu id="empl" value="#{empMB.employee}" converter="#{employeeConverter}">
<f:selectItems value="#{empMB.employeeList}" var="emp" itemLabel="#{emp.employeeName}" itemValue="#{emp.employeeNumber}"/>     
    <p:ajax update="department" listener="#{empMB.onEmployeeSelect}" process="@this"/>                      
</p:selectOneMenu>

<p:selectOneMenu id="department" value="#{deptMB.department}" converter="#{departmentConverter}">
    <f:selectItems value="#{empMB.departmentList}" var="dept" itemLabel="#{dept.departmentName}" itemValue="#{dept.departmentCode}"/>
</p:selectOneMenu> 
```

bean 的片段：

```
public class EmpMB{
...
private List<Department> departmentList;
private Employee employee;

public List getDepartmentList(){
    return departmentList;
}

public void onEmployeeSelect(){
    departmentList = someService.getDepartmentsForEmployee(employee);
}
...
} 
```

转换器示例（请注意，它是一个弹簧组件，因此我可以将我的服务层注入其中，但您不必这样做）：

```
@Component("employeeConverter")
public class EmployeeConverter implements Converter {

    @Override
    public Object getAsObject(FacesContext arg0, UIComponent arg1, String arg2) {
        //TODO: implement this
    }

    @Override
    public String getAsString(FacesContext arg0, UIComponent arg1, Object arg2) {
        //TODO: implement this
    }

} 
```

# android - Android在editText上拦截粘贴\复制\剪切

> ID：14980227
> 
> 赞同：41
> 
> 时间：2013-02-20T12:47:54.363
> 
> 标签：android, textview, android-edittext, textwatcher

我怎样才能拦截这种事件？

`EditText`当用户尝试将一些文本粘贴到我的我知道我可以使用时，我需要添加一些逻辑，`TextWatcher`但是这个入口点对我不利，因为我只需要在粘贴的情况下进行拦截，而不是每次用户按下我`EditText`时，

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-02-20T13:44:50.967

使用 API 似乎无能为力：[android paste event](https://stackoverflow.com/questions/5167381/android-paste-event)

[**源阅读救援！**](http://www.codinghorror.com/blog/2012/04/learn-to-read-the-source-luke.html)

我深入研究了`TextView`（`EditText`具有`TextView`一些不同配置）的 Android 源代码，发现用于提供剪切/复制/粘贴选项的菜单只是经过修改的[`ContextMenu`](http://developer.android.com/reference/android/view/ContextMenu.html)（[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/android/widget/TextView.java#6756)）。

对于普通的上下文菜单，视图必须创建菜单（[source](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/android/widget/TextView.java#7386)），然后在回调方法（[source](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/android/widget/TextView.java#7516)）中处理交互。

因为处理方法是`public`，我们可以简单地通过扩展`EditText`和覆盖方法来对不同的动作做出反应来挂钩它。这是一个示例实现：

```
import android.content.Context;
import android.util.AttributeSet;
import android.widget.EditText;
import android.widget.Toast;

/**
 * An EditText, which notifies when something was cut/copied/pasted inside it.
 * @author Lukas Knuth
 * @version 1.0
 */
public class MonitoringEditText extends EditText {

    private final Context context;

    /*
        Just the constructors to create a new EditText...
     */
    public MonitoringEditText(Context context) {
        super(context);
        this.context = context;
    }

    public MonitoringEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.context = context;
    }

    public MonitoringEditText(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        this.context = context;
    }

    /**
     * <p>This is where the "magic" happens.</p>
     * <p>The menu used to cut/copy/paste is a normal ContextMenu, which allows us to
     *  overwrite the consuming method and react on the different events.</p>
     * @see <a href="http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/android/widget/TextView.java#TextView.onTextContextMenuItem%28int%29">Original Implementation</a>
     */
    @Override
    public boolean onTextContextMenuItem(int id) {
        // Do your thing:
        boolean consumed = super.onTextContextMenuItem(id);
        // React:
        switch (id){
            case android.R.id.cut:
                onTextCut();
                break;
            case android.R.id.paste:
                onTextPaste();
                break;
            case android.R.id.copy:
                onTextCopy();
        }
        return consumed;
    }

    /**
     * Text was cut from this EditText.
     */
    public void onTextCut(){
        Toast.makeText(context, "Cut!", Toast.LENGTH_SHORT).show();
    }

    /**
     * Text was copied from this EditText.
     */
    public void onTextCopy(){
        Toast.makeText(context, "Copy!", Toast.LENGTH_SHORT).show();
    }

    /**
     * Text was pasted into the EditText.
     */
    public void onTextPaste(){
        Toast.makeText(context, "Paste!", Toast.LENGTH_SHORT).show();
    }
} 
```

现在，当用户使用剪切/复制/粘贴时，`Toast`会显示 a（当然你也可以做其他事情）。

巧妙的是，**这适用于 Android 1.5**，并且您不需要重新创建上下文菜单（如上面链接的问题中所建议的那样），这将**保持平台的不变外观**（例如使用 HTC Sense ）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-06T17:35:16.400

有一个**更简单的方法**，虽然不是 100% 可靠。

将 TextChangedListener 添加到您的编辑框：

```
EditText et = (EditText) mView.findViewById(R.id.yourEditText);
et.addTextChangedListener(new TextWatcher() {

  @Override
  public void onTextChanged(CharSequence s, int start, int before, int count) {
     if (count > 2) toast("text was pasted");
  }

  @Override
  public void beforeTextChanged(CharSequence s, int start, int count, int after) {

  }

  public void afterTextChanged(Editable s) {

  }
}); 
```

如果文本更改超过 2 个字符，您可以假设它已被粘贴（一些笑脸占用两个字符）。

当然，当用户粘贴 1 或 2 个字符时它不会检测到粘贴，如果文本的更改是由其他东西触发的，它会错误地报告粘贴。

但对于**大多数目的，它可以完成工作**

# javascript - 如何使用 JavaScript 在 HTML 中显示当前国家和城市

> ID：14980230
> 
> 赞同：2
> 
> 时间：2013-02-20T12:47:57.077
> 
> 标签：javascript, geolocation

我正在寻找 JavaScript，它使我能够在我的应用程序上显示城市和国家。

如下图所示：

![例子](../Images/2c1aed5f619d2562c61e4b0ede4aec7e.png)

我尝试了许多不同的解决方案，通过地理定位等，不显示任何内容，有人知道如何找到正确的工作脚本，因为即使在这里我也找到了一些解决方案，但没有显示任何内容！

下面的例子之一！将不胜感激任何帮助！

提前致谢

```
<html>
<head>
<script language="JavaScript" src="http://j.maxmind.com/app/geoip.JavaScript"></script>
<script language="JavaScript">
var city = geoip_city();
var country = geoip_country_name();
</script>
</head>
<body>
You are from <script>document.write(city)</script>, <script>document.write(country)</script>.
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:56:00.463

您需要为此使用 API。

检查这个，看看它是否对你有帮助

[http://www.jquery4u.com/api-calls/geolocation-jquery-api-geoplugin/](http://www.jquery4u.com/api-calls/geolocation-jquery-api-geoplugin/)

# wpf - WPF 应用程序中 WinForms 控件的触摸手势支持

> ID：14980231
> 
> 赞同：0
> 
> 时间：2013-02-20T12:47:58.667
> 
> 标签：wpf, winforms, touch, webbrowser-control, multi-touch

WebBrowser 控件有两个版本（WinForms 和 WPF）。WPF 版本支持触控和多点触控手势。带有 WindowsFormsHost 的 WPF 应用程序中嵌入的 WinForms 版本的 WebBrowser 是否支持触控和多点触控手势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:10:38.420

是的 WebBrowserControl 不管它是如何托管的。只要它唯一获得输入并且触摸是从可识别的触摸设备到 Windows，它仍然会获得触摸和多点触摸手势。

请注意，您不能完全理解这一点，也不能触摸 WebBrowserControl 的外部和内部，因为它在不同的上下文中运行，类似于在不同的窗口中运行

同样，底层的 ActiveX 主机只是运行一个 Internet Explorer 框架。如果您有 IE8 或更新版本（例如假设您使用的是 Windows 7 或 8？），它也会在 IE7 兼容模式下运行。

# visual-c++ - 在 Visual Studio 2008 中使用 zeranoe libavcodec 构建

> ID：14980236
> 
> 赞同：0
> 
> 时间：2013-02-20T12:48:18.417
> 
> 标签：visual-c++, ffmpeg, libavcodec, libavformat

我正在尝试在 Visual Studio 2008 中使用来自 zeranoe 的 libavcoded 共享构建。我已经在调试模式下使用 libavcodec 测试了我的应用程序，它运行良好。但是当我尝试通过发布版本构建应用程序时，它编译得很好，但是在运行时它显示错误为“过程入口点 CoCreateInstance 无法位于动态链接库 avcodec-54.dll 中”有人可以帮忙吗我来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:15:17.010

转到项目属性，在链接器部分选择优化。您将在左侧看到引用，选择“保留未引用的数据 (/OPT:NOREF)”

( [http://ffmpeg.org/platform.html](http://ffmpeg.org/platform.html) 4.2.1 使用 Microsoft Visual C++ 链接到 FFmpeg)

# mysql - MySQL：获取来自子选择的两个日期之间的差异+按标准对它们进行分组？

> ID：14980238
> 
> 赞同：0
> 
> 时间：2013-02-20T12:48:22.077
> 
> 标签：mysql, group-by

我从查询中得到这些结果：

乔恩·多伊 63741 | 26.11.2012 11:32:09
Joh Doe 63741 | 06.12.2012 10:30:03

如您所见，第一列是相等的，第二列中的日期不相等。SQL 如下所示：

```
select name, date from (
    select 
      concat(sfoa.firstname, ' ', sfoa.lastname, ' ', sfoa.postcode) as name,
      sfo.created_at as "date"
          from sales_flat_order sfo join sales_flat_order_address sfoa on sfo.entity_id = sfoa.parent_id where sfoa.address_type = 'shipping' and sfoa.lastname = 'Doe'
  ) d 
```

现在我想按名称对其进行分组，如下所示：

```
group by name having count(name) > 1 
```

并获取 2 个日期之间的差异。那可能吗？结果应该是这样的：

乔恩·多伊 63741 | 10

可以有超过 2 行，我总是想要结果中的第一行和最后一行。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:55:15.817

对的，这是可能的。

```
select name, MAX(date) - MIN(date) as date_diff from (
select 
  concat(sfoa.firstname, ' ', sfoa.lastname, ' ', sfoa.postcode) as name,
  sfo.created_at as "date"
      from sales_flat_order sfo 
      join sales_flat_order_address sfoa 
      on sfo.entity_id = sfoa.parent_id 
      where sfoa.address_type = 'shipping' 
      and sfoa.lastname = 'Doe'
) d
group by name
having count(name) > 1 
```

然后，您可以根据需要格式化日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:58:28.050

您可以尝试如下：

```
select name, date1,date2, datediff(date1,date2) as diff from (
    select 
    concat(sfoa.firstname, ' ', sfoa.lastname, ' ', sfoa.postcode) as name,
    sfo.created_at as "date1"
    from sales_flat_order sfo join sales_flat_order_address sfoa on sfo.entity_id = sfoa.parent_id where sfoa.address_type = 'shipping' and sfoa.lastname = 'Doe'
    ORDER BY sfo.created_at LIMIT 1

    UNION

    select 
    concat(sfoa.firstname, ' ', sfoa.lastname, ' ', sfoa.postcode) as name,
    sfo.created_at as "date2"
    from sales_flat_order sfo join sales_flat_order_address sfoa on sfo.entity_id = sfoa.parent_id where sfoa.address_type = 'shipping' and sfoa.lastname = 'Doe'
    ORDER BY sfo.created_at DESC LIMIT 1
) d

GROUP BY name 
HAVING count(name) > 1 
```

我没有测试它。

# android - 将小部件添加到主屏幕

> ID：14980239
> 
> 赞同：0
> 
> 时间：2013-02-20T12:48:25.103
> 
> 标签：android, android-widget

恐怕我从来没有拥有过安卓设备，只有模拟器可以使用。

我正在构建一个小部件（> = API 14）并想在主屏幕上对其进行测试。但是，我不知道如何实际创建我的小部件！在主屏幕上长按只会显示“从以下位置选择壁纸”弹出窗口。

当我使用 Widget 预览应用程序时，我可以在列表中看到它，但作为测试的一部分，我想测试真正的功能。如何让小部件出现在主屏幕上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:50:01.837

> 如何让小部件出现在主屏幕上？

打开你的启动器。继续从右向左滑动以访问应用小部件。长按应用小部件以将其添加到主屏幕。

# debugging - 如何（如果可能）获取内存对象（类实例）的引用？

> ID：14980241
> 
> 赞同：4
> 
> 时间：2013-02-20T12:48:35.347
> 
> 标签：debugging, reflection, scripting, abap

我正在尝试查看是否有办法获得对本地（和全局）范围之外但存在于内存中的对象的引用。

假设在我的程序中，我实例化了一个对象，其引用如下： {O:9*\PROGRAM=ZAVG_DELETE_THIS\CLASS=LCL_SMTH}

在无数次调用之后，在我无法访问这个对象的上下文中，我可以做一些简单的事情，比如通过知道上面的字符串来获取这个对象的引用吗？

我正在研究 cl_abap_*descr 类，但我还没有找到采用“program_name”、“class_name”和“instance_number”来返回对象引用的方法。

我试图这样做是为了调试，而不是构建有效的东西。

[编辑 1]：我假设需要 o:9 字符串才能获取对象的引用。正如@mydoghasworms 的回复中所指出的，情况并非如此。看来我只需要保存引用的变量的本地名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:15:05.013

我希望我能正确理解您的问题，因为我不确定您所说的“出于调试目的”是什么意思，但这里是：

您可以使用以下方法访问加载在同一会话的内存中的另一个程序的变量（我很确定它不需要在调用堆栈中）：

```
ASSIGN ('(PROGRAM)VARIABLE') TO LV_LOCAL. 
```

使用参考变量，它变得有点棘手，但这里有一个示例，将有助于演示。

这是我们的调用程序，其中包含一个`LR_TEST`我们想要在其他地方访问的引用变量。为了演示的目的，我引用了一个本地定义的类（因为这是我从你的问题中收集到的）。

```
REPORT  ZCALLER.

class lcl_test definition.
  public section.
    data: myval type i.

    methods: my_meth exporting e_val type i.
endclass.

data: lr_test type ref to lcl_test.

CREATE OBJECT lr_test.

lr_test->MYVAL = 22.

perform call_me(zcallee).

class lcl_test implementation.
  method my_meth.
* Export the attribute myval as param e_val.
    e_val = myval.
  endmethod.
endclass. 
```

这是我们要从上述程序访问变量的程序。

```
REPORT  ZCALLEE.

form call_me.

  field-symbols: <ref>.
  data: ld_test type ref to object.
  data: lv_val type i.

* Exhibit A: Gettinf a reference to a 'foreign' object instance
  assign ('(ZCALLER)LR_TEST') to <ref>.
* <ref> now contains a reference to the class instance from the program
* ZCALLER (not very useful, except for passing around maybe)

* Exhibit B: Getting a public attribute from a 'foreign' class instance
  assign ('(ZCALLER)LR_TEST->MYVAL') to <ref>.
* <ref> now contains the value of the attribute MYVAL

* Exhibit C: Getting a reference to an instance and calling a method
  assign ('(ZCALLER)LR_TEST') to <ref>. "Again the class reference
  if sy-subrc = 0\. "Rule: Always check sy-subrc after assign before
                   "accessing a field symbol! (but you know that)
    ld_test = <ref>. "Now we have a concrete handle
* Now we make a dynamic method call using our instance handle
    CALL METHOD ld_test->('MY_METH')
      IMPORTING
        e_val = lv_val.
  endif.
endform. 
```

# android - CalendarView android中的小数字

> ID：14980242
> 
> 赞同：4
> 
> 时间：2013-02-20T12:48:36.110
> 
> 标签：android, calendar

我的应用需要 CalendarView。但是天数非常少。如何让它们变大？

[![日历视图](../Images/45e47c2d212d18938e07ff740aec4cfb.png)](https://i.stack.imgur.com/2Rae4.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-30T23:53:52.867

如果有人仍然感兴趣，这是我的解决方案，基于 Phil 的帖子中提供的信息和 XSJoJo 的报告。如那里所述，存在问题是因为`mDateTextSize`没有分配`mMonthNumDrawPaint`给`CalendarViewLegacyDelegate`. 我正在使用 Java 反射。

```
 /**
     * I'm doing this in my fragment's onCreateView() callback
     */

    CalendarView calendarView = (CalendarView) contentView.findViewById(R.id.calendar_view);

    if (Build.VERSION.SDK_INT == Build.VERSION_CODES.JELLY_BEAN) { // this bug exists only in Android 4.1
        try {
            Object object = calendarView;
            Field[] fields = object.getClass().getDeclaredFields();
            for (Field field : fields) {
                if (field.getName().equals("mDelegate")) { // the CalendarViewLegacyDelegate instance is stored in this variable
                    field.setAccessible(true);
                    object = field.get(object);

                    break;
                }
            }

            Field field = object.getClass().getDeclaredField("mDateTextSize"); // text size integer value
            field.setAccessible(true);
            final int mDateTextSize = (Integer) field.get(object);

            field = object.getClass().getDeclaredField("mListView"); // main ListView
            field.setAccessible(true);
            Object innerObject = field.get(object);

            Method method = innerObject.getClass().getMethod(
                    "setOnHierarchyChangeListener", ViewGroup.OnHierarchyChangeListener.class); // we need to set the OnHierarchyChangeListener
            method.setAccessible(true);
            method.invoke(innerObject, (Object) new ViewGroup.OnHierarchyChangeListener() {
                @Override
                public void onChildViewAdded(View parent, View child) { // apply text size every time when a new child view is added
                    try {
                        Object object = child;
                        Field[] fields = object.getClass().getDeclaredFields();
                        for (Field field : fields) {
                            if (field.getName().equals("mMonthNumDrawPaint")) { // the paint is stored inside the view
                                field.setAccessible(true);
                                object = field.get(object);
                                Method method = object.getClass().
                                        getDeclaredMethod("setTextSize", float.class); // finally set text size
                                method.setAccessible(true);
                                method.invoke(object, (Object) mDateTextSize);

                                break;
                            }
                        }
                    } catch (Exception e) {
                        Log.e(APP_TAG, e.getMessage(), e);
                    }
                }

                @Override
                public void onChildViewRemoved(View parent, View child) {}
            });
        } catch (Exception e) {
            Log.e(APP_TAG, e.getMessage(), e);
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T06:17:45.473

显然，这是 CalendarView 代码中的错误。这是对该错误的参考。我猜这不是一个真正的答案，而是更多的解释。

[https://code.google.com/p/android/issues/detail?id=34932](https://code.google.com/p/android/issues/detail?id=34932)

据称，它已在 4.2 中修复。

# c# - 在 C# 中将点列表转换为数组

> ID：14980243
> 
> 赞同：2
> 
> 时间：2013-02-20T12:48:37.250
> 
> 标签：c#, winforms, list, paint

我目前正在尝试使用 Windows 窗体应用程序在 C# 中制作一个简单的绘图程序。使用 ToArray 函数将我的点列表转换为数组时，我收到一个通用的“ArgumentException 未处理：参数无效”错误。我知道我以前做过这个并且效果很好，我不知道 DrawLines 函数有什么特别之处吗？下面是代码，有问题的行是 panel1_Paint 事件的最后一行。提前感谢您提供的任何帮助。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace GetSig
{
    public partial class Form1 : Form
{
    bool paint = false;
    List<Point> myPointList = new List<Point>();

    private void panel1_MouseDown(object sender, MouseEventArgs e)
    {
        paint = true;
    }

    private void panel1_MouseMove(object sender, MouseEventArgs e)
    {
        if (paint)
        {
            myPointList.Add(e.Location);
            panel1.Invalidate();
        }
    }

    private void panel1_MouseUp(object sender, MouseEventArgs e)
    {
        paint = false;
    }

    private void panel1_Paint(object sender, PaintEventArgs e)
    {
        e.Graphics.DrawLines(Pens.Black, myPointList.ToArray());
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:54:51.677

根据[MSDN](http://msdn.microsoft.com/pl-pl/library/7ewkcdb3.aspx)：

> 数组中的前两个点指定第一行。

你需要在你的`Array`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:53:16.947

该异常很可能不是来自对 的调用，`ToArray`而是来自`e.Graphics.DrawLines`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:55:00.327

好吧，如果没有至少两点，你就不能画线:)

```
if (myPointList.Count >= 2)
{
    e.Graphics.DrawLines(Pens.Black, myPointList.ToArray());
} 
```

# android - Android中的假指南针值

> ID：14980247
> 
> 赞同：3
> 
> 时间：2013-02-20T12:48:40.217
> 
> 标签：android, mocking, android-sensors

我正在尝试开发一个 Android 应用程序来模拟传感器值（尤其是指南针）以用于研究目的。对于 GPS 传感器，我已经基于`addTestProvider()`LocationManager 中调用的函数实现了这部分。

我找不到其他传感器的类似方法。有谁知道这样做的方法？

问候，dns

# vba - 变量没有在案例之间设置？

> ID：14980249
> 
> 赞同：0
> 
> 时间：2013-02-20T12:48:48.357
> 
> 标签：vba, excel

我有以下代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)

If Target.Cells.Count > 1 Then Exit Sub
On Error Resume Next
Dim StartBox As Long
Dim StartBox2 As Long

Select Case UCase(Target.Value)

Case "NEW-BOX"
    StartBox = ActiveCell.Row
    StartBox2 = ActiveCell.Column
    MsgBox (StartBox)
    MsgBox (StartBox2)
    Selection.Offset(-1, 2).Select
    Selection.ClearContents
    Selection.Activate
    Selection.Offset(1, -2).Select

Case "RESTART-BOX"
    MsgBox (StartBox)
    MsgBox (StartBox2)

   If StartBox = 0 And StartBox2 = 0 Then
MsgBox "Cannot restart box without scanning a new box first!", vbCritical
ElseIf StartBox <> 0 And StartBox2 <> 0 Then
ActiveSheet.Range(Cells(StartBox, StartBox2), Cells(ActiveCell.Row, ActiveCell.Column)).ClearContents
End If

 End Select

End Sub 
```

我扫描一个新框，并将变量设置为正确的列和行，但是当我扫描重新启动框时，消息框都出现 0？为什么是这样？我需要将这些变量传递到我的代码中以清除内容，但由于某种原因，即使我正在设置它们，它们也不会出现在 'RESTART-BOX' 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:03:11.953

我们需要更多的上下文才能提供明确的答案。您的代码是在某种循环中还是被多次调用的子函数或函数？

如果是后者，那么您将在每次调用 sub / 函数时创建 StartBox 和 StartBox2 的新副本，因此它们不会保留这些值。如果您将`dim`语句放在子或函数之外，那么它们将成为全局变量，并将在每次调用子或函数时保留它们的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:07:55.820

您需要在 select 语句之前设置 2 个变量：

```
...

StartBox = ActiveCell.Row
StartBox2 = ActiveCell.Column

Select Case UCase(Target.Value)

... 
```

# c# - 在用户本地机器上下载并保存 xml 文件

> ID：14980252
> 
> 赞同：0
> 
> 时间：2013-02-20T12:48:52.523
> 
> 标签：c#, silverlight

在我的应用程序中，我有一个按钮，用于将 xlm 文件保存在代码中指示的特定 uri 上。但我想让用户可以将这个文件保存在他想要的地方。

页面.xaml

页面.cs

```
private void Bt_Export_Click(object sender, RoutedEventArgs e)
        {
            CIRCUIT _selectedCircuit = (CIRCUIT)Lb_Circuits.SelectedItem;
            busyIndicator.IsBusy = true;

            this.DBContext.SaveXmlFile(_selectedCircuit.CIR_CIRCUIT, _action =>
            {
                if (!_action.HasError)
                {

                }
                busyIndicator.IsBusy = false;
            }, null);

        }

//

public void SaveXmlFile(string XMlString)
        {
            XmlDocument XmlCircuit = new XmlDocument();
            XmlCircuit.LoadXml(XMlString);          
            XmlCircuit.Save("C:/Users/izdoudou/Ciruit" + DateTime.Now.Date.ToString("yyMMddHHmm") + ".xml");
            string ts= XmlCircuit.BaseURI;
        } 
```

您能否告诉我是否可以将此功能与 silverlight 集成，我该怎么做？

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:59:32.257

您可以使用 a`FolderBrowserDialog`来达到目的。

```
string foldername=@"C:\Users\izdoudou\Ciruit";    
DialogResult result = folderBrowserDialog1.ShowDialog();
            if( result == DialogResult.OK )
            {
                folderName = folderBrowserDialog1.SelectedPath;

            } 
```

在您的代码更改中

`XmlCircuit.Save("C:/Users/izdoudou/Ciruit" + DateTime.Now.Date.ToString("yyMMddHHmm") + ".xml");`

至

`XmlCircuit.Save(foldername +"\\"+ DateTime.Now.Date.ToString("yyMMddHHmm") + ".xml");`

希望能帮助到你。

# concurrency - 多内核的 Cuda 流处理

> ID：14980254
> 
> 赞同：0
> 
> 时间：2013-02-20T12:49:03.390
> 
> 标签：concurrency, cuda, cuda-streams

您好，关于多内核的 Cuda 流处理的几个问题。假设 s 流和内核在支持 3.5 的开普勒设备中，其中 s <= 32。内核使用大小为 n 的 dev_input 数组和大小为 s*n 的 dev 输出数组。内核从输入数组读取数据，将其值存储在寄存器中，对其进行操作并将其结果写回 dev_output 的位置 s*n + tid。

我们的目标是每次使用 n 个流之一运行相同的内核 s 次。类似于 simpleHyperQ 示例。您能否评论以下任何一项是否以及如何影响并发？

1.  dev_input 和 dev_output 未固定；
2.  dev_input 原样与 dev_input 大小 s*n，其中每个内核读取唯一数据（无读取冲突）
3.  内核从常量内存中读取数据
4.  每个块分配 10kb 的共享内存。
5.  内核使用 60 个寄存器

任何好的评论将不胜感激......！！！

干杯，塔纳西奥

罗伯特，非常感谢您的详细回答。这非常有帮助。我编辑了 4，它是每块 10kb。所以在我的情况下，我启动了 61 个块和 256 个线程的网格。内核在计算上相当受限制。我启动了同一个内核的 8 个流。分析它们，然后我看到前两者之间有很好的重叠，然后它变得越来越糟。内核执行时间约为 6ms。在前两个流几乎完全并发执行后，其余的流之间有 3ms 的距离。关于 5，我使用具有 255 个寄存器文件的 K20。所以我不会指望那里有缺点。我真的无法理解为什么我没有实现与 gk110s 指定的并发性等效。

请查看以下链接。有一个名为 kF.png 的图像。它显示了流的分析器输出..!!!

[https://devtalk.nvidia.com/default/topic/531740/cuda-programming-and-performance/concurrent-streams-and-hyperq-for-k20/](https://devtalk.nvidia.com/default/topic/531740/cuda-programming-and-performance/concurrent-streams-and-hyperq-for-k20/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T14:43:30.113

内核之间的并发性取决于许多因素，但许多人忽略的因素仅仅是内核的大小（即网格中的块数）。大小能够有效利用 GPU 的内核通常不会在很大程度上同时运行，即使他们这样做也几乎没有吞吐量优势。GPU 内部的工作分配器一般会在一个内核启动后立即开始分配块，所以如果一个内核在另一个内核之前启动，并且两者都有大量的块，那么第一个内核通常会占用 GPU 直到它几乎完成，此时第二个内核的块将被调度和执行，可能会有少量的“并发重叠”。

要点是具有足够块来“填满 GPU”的内核将阻止其他内核实际执行，除了调度之外，这在计算 3.5 设备上没有任何不同。此外，不仅仅是为整个内核指定几个参数，还在块级别指定启动参数和统计信息（如寄存器使用情况、共享内存使用情况等）有助于提供清晰的答案。计算 3.5 架构在这一领域的优势仍将主要来自“少数”块的“小”内核，它们试图一起执行。Compute 3.5 在这方面有一些优势。

您还应该查看[此问题](https://stackoverflow.com/questions/14124673/cuda-kernels-not-executing-concurrently)的答案。

1.  当内核使用的全局内存不固定时，它会影响数据传输的速度，以及重叠*复制和计算*的能力，但不影响两个内核并发执行的能力。然而，复制和计算重叠的限制可能会扭曲您的应用程序的行为。
2.  不应该有“读取冲突”，我不确定你的意思。允许两个独立的线程/块/网格读取全局内存中的相同位置。通常，这将在 L2 缓存级别进行排序。只要我们谈论的*只是读取*，就应该没有冲突，并且对并发没有特别的影响。
3.  常量内存是一种有限资源，在设备上执行的所有内核之间共享（尝试运行 deviceQuery）。如果您没有超过总设备限制，那么唯一的问题将是常量缓存的利用率之一，以及缓存抖动等问题。除了这种次要关系之外，对并发没有直接影响。
4.  *识别每个块*而不是每个内核的共享内存量会更有指导意义。这将直接影响可以在 SM 上调度多少块。但是，如果您指定每个内核的启动配置以及启动调用的相对时间，那么回答这个问题也会更加清晰。 *如果*共享内存恰好是调度的限制因素，那么您可以将每个 SM 的总可用共享内存除以每个内核使用的数量，以了解基于此可能的并发性。我自己的观点是，每个网格中的块数可能是一个更大的问题，除非您的内核每个网格使用 10k 但整个网格中只有几个块。
5.  我在这里的评论与我对 4 的回复几乎相同。查看您设备的 deviceQuery，*如果*寄存器成为在每个 SM 上调度块的限制因素，那么您可以将每个 SM 的可用寄存器除以每个 SM 的寄存器使用量内核（同样，讨论每个块的寄存器使用情况和内核中的块数更有意义）以发现限制可能是什么。

同样，如果您有合理大小的内核（数百或数千个块，或更多），那么工作分配器对块的调度很可能是内核之间并发量的主要因素。

**编辑：**响应问题中发布的新信息。我看过 kF.png

1.  首先让我们从每个SM的角度来分析。CC 3.5 允许每个 SM 有 16 个“打开”或当前计划的块。如果您要启动 2 个内核，每个内核有 61 个块，这可能足以填充 CC 3.5 设备上的“准备就绪”队列。换句话说，GPU 一次可以处理 2 个这样的内核。当其中一个内核的块“耗尽”时，工作分配器会安排另一个内核。第一个内核的块在大约一半的总时间​​中充分“耗尽”，因此下一个内核在前两个内核完成的一半左右被安排，所以在任何给定点（在时间轴上画一条垂直线）你有 2 个或 3 个内核同时执行。（根据图表，启动的第 3 个内核与前 2 个内核重叠了约 50%，我不同意您的说法，即每次连续内核启动之间有 3 毫秒的距离）。如果我们说在高峰期我们安排了 3 个内核（有很多垂直线将与 3 个内核时间线相交）并且每个内核有大约 60 个块，那么大约是 180 个块。您的 K20 有 13 个 SM 和[每个 SM 最多可以安排 16 个区块](http://docs.nvidia.com/cuda/kepler-tuning-guide/index.html#device-utilization-and-occupancy)。这意味着在峰值时，您有大约 180 个块（可能）与 16*13 = 208 的理论峰值相比。所以你在这里非常接近最大值，而且你可能得到的不多。但也许你认为你只得到 120/208，我不知道。
2.  现在让我们从共享内存的角度来看看。一个关键问题是您的 L1/共享拆分的设置是什么？我相信它默认为每个 SM 48KB 的共享内存，但是如果您更改了此设置，那将非常重要。无论如何，根据您的说法，每个计划的块将使用 10KB 的共享内存。这意味着我们最多可以为每个 SM 安排大约 4 个块，或者 4*13 总块 = 最多 52 个块，可以在任何给定时间安排。你显然超过了这个数字，所以我可能没有足够的信息来了解你的内核的共享内存使用情况。如果您真的使用 10kb/block，这或多或少会阻止您一次执行多个内核的线程块。还是会有一些重叠，我相信这很可能是您申请中的实际限制因素。第一个 60 个块的内核被调度。在几个块耗尽之后（或者可能是因为 2 个内核被启动得足够近），第二个内核开始被调度，几乎同时。然后我们必须等待一段时间，让内核的块消耗殆尽，然后才能安排第三个内核，这很可能是在时间轴上指示的 50% 点。

无论如何，我认为上面的分析 1 和 2 清楚地表明，基于内核结构固有的限制，您正在从设备中获得大部分功能。（我们可以根据寄存器进行类似的分析，以发现这是否是一个重要的限制因素。）关于这个陈述：“我真的无法理解为什么我没有实现与 gk110s 指定的并发等效......”我希望你看到并发规范（例如 32 个内核）是*最大*规范，在大多数情况下，在达到可以同时执行的最大内核数的限制之前，您会遇到某种其他类型的机器限制。

**编辑：**关于文档和资源，我在上面从 Greg Smith 链接到的答案提供了一些资源链接。这里还有一些：

*   C 编程指南有一个关于[异步并发执行](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#asynchronous-concurrent-execution)的部分。
*   NVIDIA 的 Steve Rennich 博士的 GPU 并发和流演示在 NVIDIA 网络研讨会[页面上](http://on-demand.gputechconf.com/gtc-express/2011/presentations/StreamsAndConcurrencyWebinar.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T08:29:22.197

到目前为止，我对 HyperQ 的体验是我的内核的 2-3 (3.5) 倍并行化，因为内核通常更大，可以进行更复杂的计算。对于小内核，情况就不同了，但通常内核更复杂。

Nvidia 在他们的 cuda 5.0 文档中也回答了这个问题，即更复杂的内核将减少并行化的数量。

但是，GK110 仅允许这样做就有很大的优势。

# c# - 根据起点填充矩形，但必须在一条线上

> ID：14980260
> 
> 赞同：0
> 
> 时间：2013-02-20T12:49:23.923
> 
> 标签：c#, drawing, rectangles

我知道有人可以帮助我。

我正忙于开发一个选择文字游戏，但我不确定如何突出显示选定的字母。

我目前正在创建一个块网格。

然后，当用户单击并将鼠标从ON块移动到另一个时，我使用rect检查它们是否相交时，我会在选择时标记该块选择块号 4 时发生。因此该模式为：不应选择 1、3、5、7 块编号 2、4、6。

![在此处输入图像描述](../Images/44de80b2c659fcaa0a5b2bd79f39e1a8.png)

亲切的问候，

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:22:05.083

我假设它是一个标准的猜词游戏，其中单词字母总是落在站立线上、睡线上或 45 度角线上的盒子里。在这种情况下，您只需要用户输入的开始框和结束框，您可以通过添加 +1 来选择/标记开始框中的所有框，直到到达最后一个框。

说用户盯着 startBox(rowStart,colStart) 直到 lastBox(rowLast,colLast) 所以你需要做的就是

```
rowPos = startBox.rowStart;
colPos = startBox.colStart;

do{
  mark startBox(rowPos, colPos)
  rowPos++;
  colPos++;
} while(rowPos<=rowLast && colPos<=colLast) 
```

注意：您必须评估 startBox 和 lastBox 以确定用户是在右下角、左下角、右上角还是左上角，并相应地在行和/或列上加/减 1。

# java - java中的MVC模式，观察者不止一种更新方法

> ID：14980262
> 
> 赞同：1
> 
> 时间：2013-02-20T12:49:30.033
> 
> 标签：java, model-view-controller

我正在用 mvc 设计中的 gui 编写一个国际象棋游戏。

第 1 步：弹出一个主菜单，然后您选择一个游戏模组。

第 2 步：一旦您选择，主菜单关闭并打开一个新窗口，其中包含棋盘和棋子，然后您可以使用鼠标进行游戏。

**对于第 1 步**；我使用 actionEvent 并检查您单击的按钮的字符串。例如，您有按钮标准游戏，然后模型设置数据板并通知观察者（=视图）。

**对于第 2 步**；我使用 mouseEvent 并检查相对坐标 x/y，模型执行它的工作并决定您是否可以移动该块。

我想查看两种更新方法，一种用于`step 1`，另一种用于`step 2`. 目前它总是进行第一次更新。

```
// this is in the model, initializing once you chose a game mod,
// this is for the first step.
public void initializeGame(String givenString){
    abstractGame = factoryGame.createGame(givenString);
    abstractGame.startPlaying(boardTest);
    setChanged();
    notifyObservers(5);
}

// this is in the model, doing stuff, this is for the second step.
public boolean checkGivenCoordinates(int sourceRow, int sourceColumn, int     destinationRow, int destinationColumn) throws IncorrectCoordinatesException,     IncorrectColorException, InvalidMoveException
{
    if(abstractGame.checkCorrectCoordinates(sourceRow, sourceColumn, destinationRow, destinationColumn) == true)
    {
        abstractGame.checkMove(sourceRow, sourceColumn, destinationRow, destinationColumn);
        int [] changeView = {sourceRow, sourceColumn, destinationRow, destinationColumn};
        System.out.println("Model     : in the move ");
        setChanged();
        notifyObservers(changeView);
        return true;
    }
    else
        throw new IncorrectCoordinatesException();
}

// Called from the Model
public void update(Observable obs, Object obj) { // this is the one it always goes to now.

    //who called us and what did they send?
    System.out.println ("First update View    : Observable is " + obs.getClass() + ", object passed is " + obj.getClass());
} //update()

// Called from the Model
/* this is for step 2, but is not invoked.
   The array I send holds 4 ints, source row/column and destination row/column.
   this is what I do in model just prior to notifying,
   supposed to go to step 2's update method,
   but as stated, it doesnt.
*/
public void update(Observable obs, int[] obj) {

    //who called us and what did they send?
    System.out.println ("Second update View     : Observable is " + obs.getClass() + ", object passed is " + obj.getClass());
    graphBoardView.setMove(obj[0], obj[1], obj[2], obj[3]);

} //update() 
```

所以，

1）我可以在一个班级中有多个更新吗？

2）如果是这样，我怎样才能直接通知正确的更新方法？

3）如果 q1 不可能，我该如何绕过这个？

4）可能是 Object obj 导致它总是转到第一个吗？

在此先感谢，爱丽儿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:23:05.147

您确实可以在同一个类中拥有多个同名但具有不同参数的方法。

如果存在歧义，当编译器无法确定使用哪种方法时，您可以看到您所看到的 - 请记住，数组也是一个`Object`。

使用一个简单的测试用例，它应该可以工作：

```
new Test().update(new Observable(), new int[]{1, 2});
new Test().update(new Observable(), new Object()); 
```

正确的方法被调用。

你怎么称呼你的方法？

# asp.net-mvc - MVC4 中的会话和状态管理

> ID：14980265
> 
> 赞同：1
> 
> 时间：2013-02-20T12:49:35.953
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我可以知道如何在 MVC4 中使用会话和状态管理。我使用 Webapi 来获取 . 我正在创建一个购物车应用程序，因此在经典的 asp.net 网络表单中，我们使用会话管理存储用户特定的数据。

请让我知道如何通过简单的示例在 MVC 中实现相同的目标。如果该示例还包括缓存相关的内容，那将会很有帮助。

# java - maven/visualvm：我如何使用 visualvm 来分析正在运行的surefire进程？

> ID：14980266
> 
> 赞同：6
> 
> 时间：2013-02-20T12:49:36.227
> 
> 标签：java, maven, visualvm, jvisualvm

我可以附加到万无一失的过程，但试图分析它显示采样：

```
CPU sampling:
Not available. Failed to create JMX connection to target application. Use 'Add JMX Connection' action to attach to the application.

Memory sampling:
Not available. Failed to read objects in target application. Check the logfile for details (use Help | About | Logfile). 
```

并尝试开始分析显示一个空的错误消息框

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:20:34.333

正如它所说的“无法创建 JMX 连接”启动 maven 时启用 jmx 怎么样？这是一个[如何激活 jmx](https://stackoverflow.com/questions/856881/how-to-activate-jmx-on-my-jvm-for-access-with-jconsole)的问题，我认为您可以使用 MAVEN_OPTS 或 JAVA_OPTS 将这些参数提供给 maven。

# matlab - 在矩阵中查找多个项目的索引？

> ID：14980276
> 
> 赞同：4
> 
> 时间：2013-02-20T12:50:10.297
> 
> 标签：matlab, search, matrix

我有一个元素数组，我想在另一个矩阵中查看它们的索引

例如，对于

```
A = [1 2 3] 
B = [1 2 3 4 5 3 4 5 1 2 3] 
```

然后结果数组

```
C = [1 2 3 6 9 10 11] 
```

给出 1 2 3 的索引

是否有任何功能或简短的处理方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T12:53:30.250

我想你想要：

```
find(ismember(B, A))

ans =

    1    2    3    6    9   10   11 
```

# php - 卷曲功能在 XAMPP 1.8.0 中不起作用

> ID：14980281
> 
> 赞同：0
> 
> 时间：2013-02-20T12:50:28.137
> 
> 标签：php, curl, xampp

我使用的是 Windows 7。我安装了 XAMPP 1.8.0 并启用了 CURL 功能。但是，我仍然无法抓取网页。

**我使用了以下代码段：**

```
<?php
// create a new cURL resource
$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, "http://www.google.com/");
curl_setopt($ch, CURLOPT_HEADER, 0);

 // grab URL and pass it to the browser
 curl_exec($ch);

 // close cURL resource, and free up system resources
 curl_close($ch);
 ?> 
```

**当我执行程序时，错误消息是：**

```
Fatal error: Maximum execution time of 30 seconds exceeded in
C:\xampp\htdocs\testing\curl.php on line 14 
```

**第 14 行：** `curl_close($ch)`

为什么我会收到这样的错误？我该如何调试它？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:53:26.907

`set_time_limit($seconds);`在您的页面中添加

还

添加`curl_setopt ($ch, CURLOPT_TIMEOUT, 60);`并尝试

# javascript - 页面加载状态

> ID：14980284
> 
> 赞同：4
> 
> 时间：2013-02-20T12:50:33.683
> 
> 标签：javascript, jquery, html, browser

有没有办法知道浏览器加载页面的距离？

通过使用 JavaScript 或浏览器本机函数。

根据页面状态我想建立进度条。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:01:56.320

我不是 100% 确定这会起作用，但是.. 这是理论：

首先，在页面加载之前**不要**停止 JavaScript 的运行。意思是，不要使用 window.ready document.ready 等。

在页面顶部初始化一个 JavaScript 变量，称为加载或其他东西，并将其设置为 0。

`var loaded = 0;`

在您认为处于正确百分比的不同点加载的整个页面增量。

例如，在您认为一半的页面会在代码集中加载之后`loaded = 50;`。

ETC..

正如我所说，这只是一个概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:04:36.623

代码：

```
function request() {
    showLoading(); //calls a function which displays the loading message

    myRequest = GetXmlHttpObject();
    url = 'path/to/script.php';
    myRequest.open('GET',url,true);
    myRequest.onreadystatechange = function() {
        if(myRequest.readyState == 4 && myRequest.status == 200) {
            clearLoading(); //calls a function which removes the loading message

            //show the response by, e.g. populating a div
            //with the response received from the server
        }
    }
    myRequest.send(null);
} 
```

在我调用的请求开始时，`showLoading()`它使用 Javascript 动态添加您的`preLoaderDiv`. 然后，当收到响应时，我调用`clearLoading()`它动态删除您的`preLoaderDiv`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:00:10.703

您必须自己确定它，并且要做到这一点，您必须有一种方法来确定它。一种可能性是在页面上有虚拟元素，知道它们的总数，并在每一点计算已经存在的数量。但这只会为您提供获得的 DOM 数量，而这可能只是加载时间的一小部分——通常情况下，浏览器处于空闲状态等待脚本和图像。

# mysql - MySQL：计算左天总和小于30的行

> ID：14980288
> 
> 赞同：0
> 
> 时间：2013-02-20T12:50:39.157
> 
> 标签：mysql, date, count, sum, row

我想计算表中订阅将在一个月（30 天）内到期的用户。这是我的代码：

**用户数据库**

```
id         name        exp_date
1          John        2013-03-01
2          Alice       2013-02-25
3          Ken         2013-01-10
4          Elise       2013-04-11
5          Bruce       2013-03-14 
```

根据上面的数据库。应该有 3 个人的订阅即将到期 - John、Alice 和 Bruce。**我不希望肯被计算在内**，因为他不想订阅更多。

这是我的 MySQL 代码：

```
SELECT count(id) AS exp_pax, 
       datediff(exp_date,now()) AS day_left 
FROM labour_db 
WHERE day_left<=30 
```

好吧，代码确实只选择了一天总和小于 30 的行，但它不计算在内。所以请你建议我。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:00:44.610

如果是这种情况，那么您需要添加条件来检查是否`exp_date`小于今天。

```
SELECT  COUNT(*) totalCount
FROM    user_db 
where   exp_date <= timestampadd(day, 30, now()) AND
        exp_date > NOW() 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/54c03/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:01:16.390

如果要计算 (1) 到期日期在现在 30 天内和 (2) 到期日期不在现在之前的所有记录，则使用

```
SELECT count(*) AS exp_pax 
FROM   user_db 
WHERE exp_date<=timestampadd(day, 30, now())
       AND exp_date >= now(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:51:40.083

删除`group by id`以获取您的计数。

正如您所料，Count 将汇总行，但是当与`group by`子句结合使用时，将对每个“组”进行计数。您可以有用地使用它，例如，按到期日期分组。

# backbone.js - Backbone.Marionette Route 改变时改变 Region

> ID：14980290
> 
> 赞同：3
> 
> 时间：2013-02-20T12:50:43.537
> 
> 标签：backbone.js, marionette

我的应用程序有一个主要区域，有时在主要区域中会有一些子区域，应该可以通过 URL 访问。主要区域内容由应用程序路由器的功能更改，因为他知道主要区域。但是子视图中的临时区域呢？

因此，例如，url`/docs`将显示文档链接列表，并`/doc/:id`应在列表旁边显示文档的内容。`/doc/:id`那么，当有人单击列表时如何呈现内容，并在某些人在新选项卡中打开 URL 时同时呈现列表和内容。

据我所见，有两个选项为每个区域配备一个路由器，或者区域管理器触发带有应该更改的路由和区域的事件。有关解决此问题的最佳方法的任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:36:03.820

好的，我想出了一个适用于每个区域解决方案的路由器。路由器可以通过路线图和视图轻松配置。当路由匹配时，最初通过的区域将显示一个新的视图实例。

[这](https://gist.github.com/eskimoblood/4995526)是路由器的高级版本，其中路由参数将传递到视图中。

**更新**

上述解决方案仅适用于每条路线仅注册一次。如果您第二次注册相同的路由，第一次的回调将被覆盖。所以我想出了一个解决方案，区域控制器不直接在路由器上注册路由，而是`route:change`在全局事件总线（Marionette.Application.vent）上监听事件，然后路由器`route:change`在该事件总线上触发事件。

路由器控制器：

```
// The problem with backbone router is that it can only register one function per route
// to overcome this problem every module can register routes on the RouterController
// the router will just trigger an event on the `app.vent` event bus when ever a registered routes match
define(function() {

  function RouterController(vent) {
    this.vent = vent;
    this.router = new Backbone.Router();
  }

  RouterController.prototype = _.extend({
      //just pass the route that change you wanna listen to
      addRoutes: function(routes) {
        _.each(routes, function(route) {
          this.router.route(
            route,
            _.uniqueId('e'),
            //create a closure of vent.trigger, so when ever the route match it simply trigger an event passing the route
//            _.partial(_.bind(this.vent.trigger, this.vent), 'route:change', route)
            _.bind(function() {
              this.vent.trigger.apply(this.vent, ['route:change', route].concat(_.toArray(arguments)));
            }, this)
          );
        }, this);

      }
    },
    Backbone.Events);

  return RouterController;
}); 
```

区域路由器：

```
define(['common/App'], function(app) {

    function RegionRouter(region, routerSettings) {
      app.router.addRoutes(_.keys(routerSettings));

      this.listenTo(app.vent, 'route:change', function() {
        var route = arguments[0];
        var View = routerSettings[route];

        if (!View) {
          return;
        }

        var params;

        if (arguments.length > 1) {
          params = computeParams(arguments, route);
        }
        region.show(new View(params));
      });
    }

    RegionRouter.prototype = _.extend(
      {
        onClose: function() {
          this.stopListening(app.vent);
        }
      }, Backbone.Events
    );

    function computeParams(args, route) {
      args = Array.prototype.slice.call(args, 1);

      //map the route params to the name in route so /someroute/:somevalue will become {somevalue: passedArgs}
      //this object will be passed under the parameter key of the options
      var params = {};
      var regEx = /(?::)(\w+)/g;
      var match = regEx.exec(route);
      var count = 0;
      while (match) {
        params[match[1]] = args[count++];
        match = regEx.exec(route);
      }

      return {params: params};
    }

    return RegionRouter;
  }
); 
```

# php - 使用 DOMdocument 或 SimpleDOM 仅在某些 span ID 内获取 div 标签之间的文本

> ID：14980295
> 
> 赞同：0
> 
> 时间：2013-02-20T12:50:57.620
> 
> 标签：php, dom

这是我的代码：-

```
<?php
$url = file_get_contents("http://www.youtube.com/watch?v=QR8A3T6sPzU");
$doc = new DOMDocument();
@$doc->loadHTML($url);
$xpath = new DOMXPath($doc);
$myNews = $xpath->query('//@id="watch7-views-info"')->item(0);
echo $myNews;
?> 
```

如何仅在某些跨度 ID 内获取 div 标签之间的所有文本...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:02:25.770

我会使用 simpleHtmlDOM （[simpleHtmlDOM](http://simplehtmldom.sourceforge.net/)）：

```
include 'simpledom.php';

$html = file_get_html('http://www.youtube.com/watch?v=QR8A3T6sPzU');

// Find all divs with id watch7-views-info and echo their contents
foreach($html->find('div[id=watch7-views-info]') as $element) 
   echo $element->plaintext . '<br>'; 
```

这将找到所有具有特定 id 的 div，您提到了一些关于 span 的内容，但您必须详细说明，因为我不知道您的意思。

# stream - Racket 中的无限升序

> ID：14980299
> 
> 赞同：4
> 
> 时间：2013-02-20T12:51:02.923
> 
> 标签：stream, scheme, racket, infinite-sequence

[`itertools.count`](http://docs.python.org/2/library/itertools.html#itertools.count) Racket中是否有 Python 的类似物？我想创建一个无限的均匀间隔数字流。[`in-naturals`](http://docs.racket-lang.org/reference/sequences.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._in-naturals%29%29)类似于我想要的，但不提供步骤。我不想重新发明轮子，但如果没有等效的功能，如何写一个？（我想，应该使用发电机）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T13:53:26.143

[`count`](http://docs.python.org/2/library/itertools.html#itertools.count)您可以使用[`in-range`](http://docs.racket-lang.org/reference/sequences.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._in-range%29%29)无限`end`值​​获得与 Python 相同的功能：

```
(define (count start step)
  (in-range start +inf.0 step)) 
```

例如：

```
(define s (count 2.5 0.5))

(stream-ref s 0)
=> 2.5
(stream-ref s 1)
=> 3.0
(stream-ref s 2)
=> 3.5
(stream-ref s 3)
=> 4.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-05T13:34:14.067

自己制作函数可以在一行中完成：

```
(define (stream-from n s) (stream-cons n (stream-from (+ n s) s))) 
```

为了测试它，你这里是一个打印 100000 个数字的例子：

```
#lang racket
(require racket/stream)

(define (stream-from n s) (stream-cons n (stream-from (+ n s) s)))

(define (stream-while s p)
  (let ([fst (stream-first s)])
  (if (p fst) (stream-cons fst (stream-while (stream-rest s) p)) empty-stream)))

(define test (stream-while (stream-from 0 1) (λ (x) (< x 100000))))

(stream-for-each println test) 
```

# java - 如何调用静态类中存在的方法？

> ID：14980307
> 
> 赞同：1
> 
> 时间：2013-02-20T12:51:24.733
> 
> 标签：java

我对 Java 编程很陌生，我有一个疑问。

我有一个这样的程序：

```
class A {

  static final class B {

       public int addMe() {
       }

  }

} 
```

我该如何调用该方法`addMe`？

当我这样做时，`A.B.addme()`我得到一个错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T12:53:23.437

`addme()`是内部类B的一个实例方法。所以你需要一个B实例才能调用它：

```
A.B b = new A.B();
b.addme(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T12:53:16.247

你的`addMe()`方法不是静态的，所以你不能在没有`B`类实例的情况下调用它：

```
A.B b = new A.B();
b.addMe(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T12:54:12.277

典型的java内部类（没有静态）只能在它声明的类内部初始化。静态内部类实际上是一个普通类，对程序中的任何其他类可见，但在其他类的文件中声明。

您必须实例化静态类 B 并调用方法或将方法本身标记为静态。

# java - 级联无法在休眠状态下正常工作

> ID：14980308
> 
> 赞同：0
> 
> 时间：2013-02-20T12:51:24.467
> 
> 标签：java, mysql, hibernate, hbm

在下面给出的代码中，cascade="save-update" 用于与 Student 类关联的 Course 类（包）。

学生班级是-->

```
 private int id;
    private String firstName;
    private String lastName;
    private Address address;
    private List<Course> courses; 
```

课程类是-->

```
 private int id;
    private String name;
    private int unit; 
```

学生的 hbm 文件是-->

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate.Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="pojos.Student" table="Student">

        <id name="id" type="integer" column="ID">
            <generator class="increment" />
        </id>

        <property name="firstName">
            <column name="FIRST_NAME" />
        </property>

        <property name="lastName">
            <column name="LAST_NAME" />
        </property>

        <many-to-one name="address" 
                     class="pojos.Address" 
                     column="ADDRESS_ID"
                     cascade="save-update" />

        <bag name="courses" inverse="true" cascade="save-update">
            <key column="STUDENT_ID" />
            <one-to-many class="pojos.Course" />
        </bag>

    </class>
</hibernate-mapping> 
```

我正在执行的交易很简单-->

```
 Student stud = new Student("Ketan", "Dikshit");
            Address address = new Address("Dm-Road", "Uttar Pradesh", "201301");
            Course course1 = new Course("Core Java", 101);
            Course course2 = new Course("Advanced Java", 201);

            List<Course> courses = new ArrayList<Course>();
            courses.add(course1);
            courses.add(course2);

            stud.setAddress(address);
            stud.setCourses(courses);

            try {
                tr = session.beginTransaction();
                System.out.println("\n Transaction has begun..!!");
                session.save(stud);
                tr.commit();
                System.out.println("\n Transaction is Commit..!!");
                session.close();
                System.out.println("\n Session is Closed..!!");

            } catch (Exception e) {
                System.out.println("\n Transaction is in errror..!!");
                tr.rollback();
                System.out.println("\n Transaction is RollBack..!!");
                session.close();
                System.out.println("\n Session is Closed..!!");
            } 
```

现在，根据代码，课程表应该包含一个名为“STUDENT_ID”的列，其中包含课程表中每个条目的关联学生的主键。但是“STUDENT_ID”列没有显示任何数据（全部为空插入的值）。

查询顺序是-->

```
 Transaction has begun..!!
Hibernate: select max(ID) from Student
Hibernate: select max(ID) from Address
Hibernate: select max(ID) from Course
Hibernate: insert into Address (STREET, CITY, ZIPCODE, ID) values (?, ?, ?, ?)
Hibernate: insert into Student (FIRST_NAME, LAST_NAME, ADDRESS_ID, ID) values (?, ?, ?, ?)
Hibernate: insert into Course (NAME, UNIT, ID) values (?, ?, ?)
Hibernate: insert into Course (NAME, UNIT, ID) values (?, ?, ?)

 Transaction is Commit..!! 
```

为什么课程表中的列显示 NULL 值，而不是保存学生的 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:34:29.187

从您的包映射中删除`inverse="true"`，否则此关系的所有者将是课程而不是学生。

# asp.net - 连接来自多个输入文本框的字符串

> ID：14980313
> 
> 赞同：0
> 
> 时间：2013-02-20T12:51:51.230
> 
> 标签：asp.net, asp.net-mvc-3, linq, razor

我有一个 cshtml 页面，我要求用户提供一些输入数据，然后我需要将这些数据连接成一个字符串以在我的控制器中构建一个动态 LINQ 查询。此视图不使用模型。到目前为止，这是我的 html 代码。

```
<div id="filter">
Enter a customer name. It can be a part of a name to get broader results. (optional)
<br />
<input type="text", id="customer", value="") />
<br />
Enter a case status ( OPEN or CLOSED ), or leave blank to get both. (optional)
<br />
<input type="text", id="status", value="") />
<br />
Enter a date range to filter by date. (optional)
<br />
Start Date 
<input type="text", id="startdate", value="") />
End Date
<input type="text", id="enddate", value="") />
<br />
Enter a PromoID (optional)
<br />
<input type="text", id="promoid", value="") />
<br />
Enter a Complaint Code (optional)
<br />
<input type="text", id="complaintcode", value="") />
</div>

@Html.ActionLink("Export Case Data To Excel for Analysis", "CaseReport", "Reports",   "Excel", new { stringFilter = mystring }) 
```

控制器操作有一个名为 stringFilter 的字符串参数。我基本上需要构建一个字符串过滤器并将其传递给控制器​​。我正在使用动态 Linq 查询库。

如何从 DOM 中获取字符串值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:06:18.340

您可以做的一件事是在按钮单击事件处理程序中将它们全部连接起来，就像..

```
$('#form-input-submit-button').click(function() { /* do it here & then submit. */ }); 
```

但我建议您在 MVC 控制器操作方法中包含您需要的所有参数

```
[HttpPost]
public void CaseReport(string promoId, string coplaintCode, ... ) { } 
```

或者最好有强类型模型

```
public class ReportModel
{
    public string PromoId { get; set; }
    public string ComplaintCode { get; set; }
    ...
} 
```

所以你可以：

```
[HttpPost]
public void CaseReport(ReportModel model) { /* Validate ModelState */ } 
```

实际上，MVC 缩写中的**模型**就是您所需要的。

但你也可以这样做

```
[HttpPost]
public void CaseReport(FormCollection form)
{
} 
```

查看所有传入的数据。

# c# - 我无法在 C# 中为 Windows 8 创建 XAML/DirectX 应用程序？

> ID：14980315
> 
> 赞同：0
> 
> 时间：2013-02-20T12:51:54.483
> 
> 标签：c#, visual-studio, windows-8, sdk

我正在为 Windows Phone 8 开发游戏，因为我比 C++ 更了解 C#，所以我选择了

“Windows Phone XAML 和 Direct3D App”，因为 XNA 已死。但除了我的 windows phone 应用程序之外，我还想为 win8 和 win8 rt 制作一个 windows 8 应用程序。

我刚刚安装了适用于 Windows 8 的 VS Express，但在 C# 部分中找不到适用于 Windows 8 的项目模板。我有的是：

*   空白应用 (XAML)
*   网格应用 (XAML)
*   拆分应用程序 (XAML)
*   类图书馆
*   Windows 运行时组件
*   单元测试库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:39:34.420

您列出的 3 个 XAML 模板是用于使用 C# 执行 XAML 的模板。要使用 C# 执行 DirectX，没有模板（只有 C++ 的 DirectX 模板）。解决这个问题的方法是使用 SharpDX，它允许您同时使用 C# 和 DirectX。以下是一些帮助您入门的链接：

*   [http://code.google.com/p/sharpdx/](http://code.google.com/p/sharpdx/)
*   [http://www.sharpdx.com/documentation/](http://www.sharpdx.com/documentation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:22:24.067

您可以使用[Monogame](http://www.monogame.net/)为 Windows 运行时/Windows Phone 8 编写 C#/XNA 游戏。Monogame 是 XNA 的开源实现，并在后台使用 SharpDX 来针对 Windows。

请注意，Monogame 的功能还不完整，并且缺少内容管道等内容。但是，有一些解决方法。

# c# - 使用 ref 超过 return

> ID：14980321
> 
> 赞同：3
> 
> 时间：2013-02-20T12:52:21.060
> 
> 标签：c#, reference, abstract-class

我正在创建一个实例化私有结构的“适配器”基类。该结构通过抽象的 Configure() 方法暴露给继承者，因此他们可以在其上设置属性。实现如下：

```
public abstract class PaymentAdapter {

    private PaymentObject p = new PaymentObject();

    protected PaymentObject CreditCardPayment {
        get { return p; }
    }

    protected abstract void Configure(PaymentObject payment);

    public MyResponse ProcessPayment() {
        // Run the adapter's setup
        Configure(p);

        // Charge the customer
        var chargeResult = p.DoSomething();

        return new MyResponse {
            MyResult = chargeResult
        };
    }
} 
```

那些细心的人会看到以下行需要注意的地方：

```
protected abstract void Configure(PaymentObject payment); 
```

当在具体类中被重写时，这个方法（几乎）让消费者有机会直接修改结构的属性。这是期望的结果。

我的问题是 - 我应该使用 ref 参数，还是将 void 更改为 PaymentObject，让消费者自己返回一个实例？

方法一：

```
protected abstract PaymentObject Configure(PaymentObject payment); 
```

方法二：

```
protected abstract void Configure(ref PaymentObject payment); 
```

因此，在继承类时，消费者必须执行以下操作：

方法一：

```
public class MyConsumer : PaymentAdapter {
    #region Overrides of PaymentAdapter

    protected override PaymentObject Configure(PaymentObject payment) {
        payment.AProperty = "Something";
            return payment;
    }

    #endregion
} 
```

方法二：

```
public class MyConsumer : PaymentAdapter {
    #region Overrides of PaymentAdapter

    protected override void Configure(ref PaymentObject payment) {
        payment.AProperty = "Something";
    }

    #endregion
} 
```

除了语法上的细微变化之外，还有其他区别吗？这是一种偏好，还是我看不到使用其中一种的好处？

由于代码略少，我倾向于使用“ref”方法，这与我多年来专门从方法返回对象相反。这似乎是 ref 参数的完美案例 - 它使消费者的工作稍微容易一些，并且意味着我不会到处设置对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:56:35.813

引用类型默认是通过引用传递的，所以这里不必使用`ref`关键字。

如果您的类型是 a`Struct`您绝对应该使用`return`语句，因为结构应该是不可变的（为什么？阅读[为什么可变结构“邪恶”？](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil)以及[为什么 C# 结构不可变？](https://stackoverflow.com/questions/3751911/why-are-c-sharp-structs-immutable)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:14:26.990

如果`PaymentObject`是结构，那么方法 2 会更快，因为在方法 1 中，您首先复制 的实例`PaymentObject`，修改该副本，然后返回该副本的副本。在我做的一个基准测试中（对于 64 字节大的结构，Linux Mint 14 上的 Mono），第二种方法的速度快了三倍。

然而，第二种方法有一些缺点。在 C# 中，有一条不成文的规则，您不应该直接改变不属于相关方法或类的结构。这主要与线程和有关接口的复杂性有关。

所以我会选择第一种方法，除非你**真的**想要性能并且不需要担心线程的复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:59:24.890

如果您只更改实际 PaymentObject 的属性，则无需使用 ref。它仍然是被改变的同一个对象。

我建议你去

```
protected abstract void Configure(PaymentObject payment); 
```

不需要返回对象，因为它是将要更改的实际对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T13:49:00.453

我认为在这种情况下你应该选择 'ref' 参数。因为使用“ref”，您也可以从“CreditCardPayment”属性中获取 PaymentObject 值。但是，如果您返回对象，那么它将仅在“ProcessPayment”方法中返回该对象，并且您无法从“CreditCardPayment”属性中获取实际值。

# r - 是否可以在 RStudio 中为 R-script 指定命令行参数？

> ID：14980322
> 
> 赞同：16
> 
> 时间：2013-02-20T12:52:22.047
> 
> 标签：r, rstudio

我想使用 RStudio 编辑具有命令行参数的 R 脚本，例如，

```
my_rscript --dataset mydataset 
```

然后将选项值读入 R 变量，`dataset`例如，使用`optparse`库。

但是，我找不到可以在 RStudio 中提供命令行的位置，以便我可以使用“保存时源”功能。相反，我必须在程序本身中硬编码所有程序参数：

```
dataset <- "mydataset" 
```

每次我需要指定不同的数据时，都需要修改脚本文本。

有人知道如何提供命令行信息吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-08-05T21:19:56.360

现在我这样做：打开一个编辑新 Rscript 的新窗口。如果我想保留它，我可以保存并将其命名为：`test_myscript.R` 这是以下内容`test_myscript.R`：

```
debug(getopt) # suppose I want to debug 'getopt' function in 'myscript.R'
system("myscript.R -a -b -c")
# Debug process start after this. 
# Check ?browser for help about navigating inside browser 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-02T21:06:52.270

我知道这个问题很旧，下面的链接也很旧，但它回答了这个问题。不，从 RStudio 访问命令行参数是不可能的（或者截至 2012 年 1 月 29 日还没有）。

链接 [https://support.rstudio.com/hc/communities/public/questions/200659066-Accessing-command-line-options-in-RStudio?locale=en-us](https://support.rstudio.com/hc/communities/public/questions/200659066-Accessing-command-line-options-in-RStudio?locale=en-us)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-26T15:13:37.667

您可以使用`Rscript programname.r arg1 arg2 arg3`. 参数被传递给`commandArgs`，因此以下情况为真：

```
Rscript programname.r F N 32

> args <- commandArgs(trailingOnly=TRUE)
> args[1]
[1] F
> args[2]
[1] N
> args[3]
[1] 32 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-12T16:53:56.240

这对我有用：我的 Rscript 如下：

```
args <- commandArgs()
print(paste0("args:", args))
print(paste0("args[1]:",args[1]))
print(paste0("args[2]:",args[2]))
print(paste0("args[3]:",args[3]))
print(paste0("# of args:",length(args))) 
```

'

为了模拟我将在 Rscript 中使用的命令行输入，我在 RStudio 中输入了这个：

`commandArgs <- function() c("AMZN", 10, 200)`

这给出了预期的结果：

```
[1] "args:AMZN" "args:10"   "args:200" 
[1] "args[1]:AMZN"
[1] "args[2]:10"
[1] "args[3]:200"
[1] "# of args:3" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-20T08:41:33.843

如果您有兴趣使用例如 argparser 并继续使用 Rstudio 进行交互式开发/分析，您可以使用以下解决方法：

1.  编写命令行解析器`my_rscript`并创建一个`args`包含所有已解析输入的对象。
2.  添加将`args`对象保存到文件的行。
3.  `my_rscript`从命令行运行并指定感兴趣的参数。
4.  `args`从 Rstudio 中的文件加载对象并以交互方式继续

例子：

```
library("argparser")
parser <- arg_parser(description='Process commandline arguments')
parser <- add_argument(parser, arg="--dataset", type="character", help = "Dataset argument")
args = parse_args(parser)
args_file = "tempArgObjectFile.rds"
saveRDS(args, args_file); print(args); quit(); #comment this after creating args_file
args = readRDS(args_file)  #use this to load during interactive development 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-27T16:09:44.430

虽然这种行为仍然没有内置到 Rstudio 中，但有几种方法可以帮助您实现所需的工作流程。

### 1\. 互动提示

`readline`和函数允许您通过`menu`在终端中添加提示并接受输入作为响应来使您的脚本具有交互性。因此，如果您主要关心的不是每次在 Rstudio 中运行时都修改脚本，您可以设置一系列这些命令来每次输入参数，如下所示：

```
x <- readline("What is your quest? ")
y <- menu(title = "What is your favorite color?", choices = c("Blue", "Clear"))

print(paste("Your quest is", x))
if (y == 1) print("Aaaaaargh!") 
```

### 2.检测交互模式

一个相关的问题是希望能够在 Rstudio 中工作时更改脚本的参数，但不会阻止脚本在命令行上使用。这是脚本中硬编码参数的问题。虽然替换或覆盖`commandArgs`可以更轻松地在一个地方提供所有参数，当需要使用完成的代码时可以将其注释掉，但这仍然不能解决问题。相反，请考虑检测您是否处于交互模式并相应地处理参数：

```
if (interactive()) {
  opts <- c('grail')
} else {
  opts <- commandArgs(trailingOnly = TRUE)
}

print(paste("I seek the", opts[1])) 
```

### 3\. 使用 optparse 的默认值

如果您使用 optparse，它会变得更加容易。只需将`default`每次调用中的参数设置为`make_option`，这将是您以交互方式运行程序时使用的参数。这也可以与上述任一工作流程结合使用。

```
library(optparse)
opt_list <- list(make_option(
    c("--quest"),
    dest = 'your_quest',
    type = 'character',
    default = "the grail"
))

opt_parser <- OptionParser(option_list = opt_list)
opt <- parse_args(opt_parser)

print(paste("You seek", opt$your_quest)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-31T11:35:32.993

这真的很老了，但是我在尝试做同样的事情时偶然发现了它，我最终只是尝试了以下方法，如果人们想尝试它，它又好又快（可能只对有几个简单的命令有用参数虽然）：

鉴于我当前启动的 Rscript：

```
args <- commandArgs(TRUE)
df <- read.csv(args[1], sep=",", check.names=FALSE, row.names = 1)
.
. # Do some analysis and plotting etc.
. 
```

如果我想模拟 Rscript 否则会收到的命令行，您可以`args`“手动”创建向量：

```
args <- c("/path/to/my/inputfile.csv") 
```

然后`args[1]`具有它始终具有的相同值。我只是通过在 RStudio 中突出显示和执行来运行脚本中的所有其他内容。

# javascript - 如何在 ASP.NET MVC 4 中进行复杂的客户端数据验证

> ID：14980329
> 
> 赞同：0
> 
> 时间：2013-02-20T12:52:32.183
> 
> 标签：javascript, .net, asp.net-mvc-4, validation

我是一名长期的 Windows 窗体开发人员，正在努力思考如何进行 Web 开发。正如标题所说，我很确定我想继续使用 ASP.NET MVC。我也很确定答案将在 Javascript、jQuery（和 jQueryUI）领域的某个地方，我还没有机会学习。

在我们当前的 Windows 应用程序中，我们有使用选项卡控件的表单，其中每个选项卡控件都有大量用于数据输入的控件。所以，下面是我需要能够做的问题类型（在客户端）

1.  例如，有条件地要求表单上的一个或多个控件子集是必需的。因此，例如，因为在下拉框中选择了某个值，所以触发上述规则，其中必须输入一个或多个控件......或者 1 并且只有 1 个子集是有条件的。此外，有条件的必需控件的子集可以是不同的类型。

我可以继续讨论这个问题，但我怀疑其他示例会改变答案。

所以为了清楚起见，我不需要像我认为我可以用 mvc 数据注释做的事情，我可以使用属性来根据需要或在一定范围内标记特定字段。我需要将这种类型的验证隐藏在一堆其他验证中。

那么，对于这种复杂的客户端验证，是否有最佳实践解决方案？是否有一些 3rd 方 Javascript 库可能允许这样做？

在我的 Windows 应用程序中，我已经能够编写所有从公共基类派生的小包装规则。因此，例如，我有一个带有方法的规则，`addChilren`例如，所有这些都允许您添加从基类规则派生的其他对象，或者只是其他控件，并且可以在运行时更新此规则以要求 1 个或更多孩子们的对象...

然后当然这个规则“RequireOneOrMore”可以在其他地方重用，甚至可以作为孩子传递给其他规则......

我希望其中一些有意义....

所以，当我通过我的 mvc 书来编写我的 Javascript 书时，任何人都可以建议我可以研究哪些选项来实现这一点？

谢谢，乔纳森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:54:29.117

我完全同意你的观点，数据注释在执行复杂的验证规则方面非常有限。

但在考虑客户端验证之前，您应该确保所有验证规则，无论多么复杂，至少都在服务器上强制执行。我推荐你做复杂服务器端验证的伟大框架是[`FluentValidation.NET`](http://fluentvalidation.codeplex.com/). 它与 ASP.NET MVC 有很好的集成，允许您处理任意复杂的验证规则。

Once you have setup server side validation you could start thinking about the user experience and optionally provide client side validation as well. For complex rules I would recommend you to get rid of the `jquery.unobtrusive.validate.js` script and then use the `jquery.validate.js` plugin directly. This means that basically you could write the validation rules yourself for a given form:

```
$('form').validate({
    rules: {
        // ... here you could write your validation rules
        // you could also extend the plugin by writing custom
        // validation methods to handle arbitrarily complex scenarios
    }
}); 
```

I invite you to read the [`documentation of the plugin`](http://docs.jquery.com/Plugins/Validation) now to familiarize yourself with the syntax.

But since you said that you are very new to jQuery, before doing any client side development with validation and plugins, your first task will be to learn jQuery. A great place to start is here: [http://learn.jquery.com/](http://learn.jquery.com/)

# c++ - 默认构造函数的奇怪错误（C++）

> ID：14980330
> 
> 赞同：5
> 
> 时间：2013-02-20T12:52:34.513
> 
> 标签：c++, xcode, constructor

首先，如果答案很明显，我想提前道歉；我对 C++ 很陌生，我的第一语言是 Java。我也是 Stack Overflow 的新手，所以如果我的问题有问题或者您需要其他任何东西，请告诉我。

所以。我在这里有这段代码：（我将 SFML 用于向量和 CircleShape）

```
Ball::Ball() {

    // This ugly thing calls the full constructor with a random x and y position
    // in such a way the the entire ball is inside the screen.

    Ball::Ball((rand() % (WINDOW_X - (2 * BALL_RADIUS))) + BALL_RADIUS, (rand() % (WINDOW_Y - (2 * BALL_RADIUS))) + BALL_RADIUS);

}
Ball::Ball(float x, float y) {

    loc.x = x;
    loc.y = y;

    ball.setPosition(loc.x - BALL_RADIUS, loc.y - BALL_RADIUS);
    ball.setRadius(BALL_RADIUS);
    ball.setFillColor(sf::Color::Red);
    ball.setOutlineColor(sf::Color::Black);
    ball.setOutlineThickness(1);

} 
```

这是标题（#included 到上面的文件中）：

```
class Ball {

private:
    sf::CircleShape ball;
    sf::Vector2f loc;
    sf::Vector2f vel;
    sf::Vector2f acc;

    void update();
    void bounce();
    void draw();

public:
    Ball();
    Ball(float x, float y);
    void run();

}; 
```

当我用

```
Ball ball; 
```

（是的，所有 SFML 渲染的东西都有效），它从不显示。一点调查表明，它的 loc.x 和 loc.y 变量没有设置，可能球对象的半径、填充颜色等也没有设置。*如果我在*构造函数中使用 std::cout 打印这些值，则 loc.x 和 loc.y 以及所有其他值*都已*设置，因此我假设它们在构造函数之后的某处未设置。奇怪的是，如果我用

```
Ball ball((rand() % (WINDOW_X - (2 * BALL_RADIUS))) + BALL_RADIUS, (rand() % (WINDOW_Y - (2 * BALL_RADIUS))) + BALL_RADIUS); 
```

甚至

```
Ball ball(400, 300); 
```

一切正常，球出现在屏幕上。我真的很难过伙计们。如果有人可以帮助我，那就太好了。

顺便说一句，我正在运行带有 Xcode 4.5.2 的 OS X 10.8，并使用 SFML RC2.0，如果这有什么不同的话。

谢谢，

马特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T12:56:17.710

在 C++11 之前，从另一个构造函数调用构造函数（称为委托构造函数）是不可能的。要在 C++11 中执行此操作，您需要使用成员初始化列表：

```
Ball::Ball()
 : Ball((rand() % (WINDOW_X - (2 * BALL_RADIUS))) + BALL_RADIUS,
        (rand() % (WINDOW_Y - (2 * BALL_RADIUS))) + BALL_RADIUS)
{ } 
```

在 C++11 之前，您可以创建另一个执行常见工作的函数并让两个构造函数都调用它。

```
Ball::Ball() {
  init((rand() % (WINDOW_X - (2 * BALL_RADIUS))) + BALL_RADIUS,
       (rand() % (WINDOW_Y - (2 * BALL_RADIUS))) + BALL_RADIUS);
}

Ball::Ball(float x, float y) {
  init(x, y);
}

void Ball::init(float x, float y) {
  loc.x = x;
  loc.y = y;

  ball.setPosition(loc.x - BALL_RADIUS, loc.y - BALL_RADIUS);
  ball.setRadius(BALL_RADIUS);
  ball.setFillColor(sf::Color::Red);
  ball.setOutlineColor(sf::Color::Black);
  ball.setOutlineThickness(1);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T12:55:44.747

不允许 C++ 中的构造函数链接，相反，这里将创建一个临时版本的类，而不是在任何地方分配，然后丢弃。

相反，使用您想要的参数创建一个私有初始化方法，并使用正确的参数从您的构造函数中调用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T13:05:31.907

Constructor Chaining is not supported in C++ before C++ 11

You can take the logic to a function and call it from both constructor. something like:

```
Ball::Ball() {

    // This ugly thing calls the full constructor with a random x and y position
    // in such a way the the entire ball is inside the screen.

   init((rand() % (WINDOW_X - (2 * BALL_RADIUS))) + BALL_RADIUS, (rand() % (WINDOW_Y - (2 * BALL_RADIUS))) + BALL_RADIUS);

}

Ball::Ball(float x, float y) {

    init(x,y);

}

Ball::init(float x, float y) {

    loc.x = x;
    loc.y = y;

    ball.setPosition(loc.x - BALL_RADIUS, loc.y - BALL_RADIUS);
    ball.setRadius(BALL_RADIUS);
    ball.setFillColor(sf::Color::Red);
    ball.setOutlineColor(sf::Color::Black);
    ball.setOutlineThickness(1);

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T12:55:14.927

C++ 不支持构造函数链接，除非您使用的是 C++ 11，我认为您不是。

请查看此答案以获取详细信息：

[关联](https://stackoverflow.com/questions/7349183/constructor-chaining-in-c)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T12:56:16.487

我建议您不要使用构造函数链接，而是使用两阶段初始化，这意味着您创建一个`init()`在默认构造函数中调用的函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-20T13:15:15.883

其他答案给出了语法正确的方法来做到这一点。

我会在语义上做一些正确的事情，以便您这样称呼它：

```
Ball ball = Ball::createRandom(); 
```

您`createRandom`作为以下`static`功能实现`Ball`：

```
class Ball {
public:
    //...
    static Ball createRandom();
}; 
```

实现为：

```
int randomisePosition(int position) {
    return (rand() % (position - (2 * BALL_RADIUS))) + BALL_RADIUS;
}

Ball Ball::createRandom() {
    return Ball(randomisePosition(WINDOW_X),
                randomisePosition(WINDOW_Y));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-20T12:57:49.017

您应该创建一个 init() 方法并在两个构造函数中调用它。

```
Ball::Ball((rand() % (WINDOW_X - (2 * BALL_RADIUS))) + BALL_RADIUS, (rand() % (WINDOW_Y - (2 * BALL_RADIUS))) + BALL_RADIUS); 
```

创建一个临时球对象并立即销毁它

# python - Lambda 意外评估

> ID：14980333
> 
> 赞同：2
> 
> 时间：2013-02-20T12:52:43.720
> 
> 标签：python, python-3.x

第一次在这里发帖。

我正在尝试制作电影列表。电影将显示在 Tkinter 的列表中。计划是当您单击更新按钮时，程序将更新它旁边的标签。问题是无论您单击哪个按钮，它总是会更新最后一个标签。我认为这是因为

`lambda: self.update_rating(x)`

在运行时进行评估，x 也是如此。我希望 x 成为该特定循环中的内容，而不是单击按钮时超出范围的内容。

我是 python 新手，所以任何帮助表示赞赏

代码：

```
from Tkinter import *
class Application(Frame):
    def __init__(self, master):
        Frame.__init__(self, master)
        self.grid()
        self.create_widgets()
    def create_widgets(self):
        self.movies = list()
        for x in range(0, 10):
            movie = list()
            rating = Label(self, text = "Rating: NA")
            rating.grid(row = x, column = 0, columnspan = 1, sticky = W)
            movie.append(rating)
            update = Button(self, text = "update", command = lambda: self.update_rating(x))
            update.grid(row = x, column = 1, columnspan = 1, sticky = W)
            movie.append(update)
            self.movies.append(movie)
    def update_rating(self, num):
        self.movies[num][0]["text"] = "rating updated"
root = Tk()
root.title("Movie Sorter")
root.geometry("640x480")
app = Application(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:53:29.070

改用这个：

```
lambda x=x: self.update_rating(x) 
```

示范：

```
>>> x = 1
>>> a = lambda x=x:x
>>> a()
1
>>> x = 2
>>> a()
1 
```

这里的想法是在*定义函数时评估默认参数，而不是创建一个闭包，该闭包在**调用*函数时从封闭范围中获取变量。

# javascript - ajax成功后设置数据属性

> ID：14980337
> 
> 赞同：0
> 
> 时间：2013-02-20T12:52:50.853
> 
> 标签：javascript, coffeescript

我有这样的输入：

```
<input class="txthoras" type="text" value="" data-fetxa="2013/02/24" data-lineaid=""> 
```

在我的 CoffeScript 文件中，我编写了如下函数：

```
$('.txthoras').blur ->
   that=this
   url = Routing.generate('post_lineas')
        $.ajax url,
            type: "POST"
            data: { proyectoid: proyectoid, hitoid: hitoid, tareaid: tareaid, usuarioid: usuarioid, fetxa: fetxa, totalhoras:that.value }
            contentType: "application/json"
            success: (data) ->
              $(tr).effect "highlight" , {}, 1500
              $(that).effect "pulsate", { times:3 }, 1000
              datos = undefined
              if data is "null"
                $("#divmaterialincorrecto").show "slow"
              else
                datos = jQuery.parseJSON(data)
                $(that).data "lineaid", datos.id

            error: (xhr, ajaxOptions, thrownError) ->
              $(tr).effect "highlight", { color:"#CC3232"}, 1500
              $(that).effect "shake", { times:3 }, 300
              console.log "Errorea"
              alert xhr.status
              alert thrownError 
```

ajax 工作正常，它返回数据，我检查了一下。

现在，如果我设置`$(that).data "lineaid", datos.id`并检查它是否写入 dom，它不会。但是如果我写 console.log`$(that).data "lineaid"`它会显示数据。

事实是我有另一个函数（PUT），我需要这些数据，它在启动时是空的。

任何帮助或线索？

[CoffeScript 中的所有代码： http](http://pastebin.com/WcQcNnPz) ://pastebin.com/WcQcNnPz JavaScript 中的所有代码：http: [//pastebin.com/RtZ02Wh4](http://pastebin.com/RtZ02Wh4)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:31:45.687

`data-`HTML5属性和 jQuery 的[.data()](http://api.jquery.com/data/#data-html5)方法有很大的不同。虽然 jQuery 将*读取*所有`data-`属性（一次，第一次运行`$(foo).data()`），但它永远不会将它们写入 DOM。从文档：

> data- 属性在第一次访问 data 属性时被拉取，然后不再被访问或改变（然后所有数据值都存储在 jQuery 内部）。

所以你的发现完全在意料之中。如果您实际上*不需要*该属性位于 HTML 源代码中，则无需执行任何操作。如果出于某种原因这样做，则必须改用[.attr()](http://api.jquery.com/attr/)方法。

# xcode - 如何删除字符串中两个字符之间的字符？

> ID：14980355
> 
> 赞同：0
> 
> 时间：2013-02-20T12:53:41.083
> 
> 标签：xcode, nsstring

我有一个字符串我想在字符之间删除并在字符串中添加字符我该怎么做？

```
NSString  *strUrl =@"str&mn=12&yr=2012str";
int month =10, int year =2013; 
```

我想从 &mn= &yr 之间删除字符 12`strul`并附加与年份相同的 10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:58:55.913

看起来您只想用“10”替换“12”。

使用 stringByReplacingOccurrencesOfString：

```
NSString  *strUrl = [@"str&mn=12&yr=2012str" stringByReplacingOccurrencesOfString:@"12" withString:@"10"]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T12:59:03.187

我建议你使用拆分：

```
var fields = *strUrl.split("&"); //splits the *strurl by "&"
var newString = fields[0]+"&"+fields[1].split("=")[0]+"="+month+fields[2].split("=")[0]+"="+year+"str"; //builds the new assembled string 
```

# .net - 使用 iMessageFilter 的性能损失

> ID：14980362
> 
> 赞同：1
> 
> 时间：2013-02-20T12:54:17.657
> 
> 标签：.net, performance, imessagefilter

我想`iMessageFilter`在我的 .Net Winforms 应用程序中实现检查某些消息（你知道，WM_[messages]）。我已经搜索过，但在使用此过滤器时找不到任何有关性能损失的信息。有没有人对应用程序性能的实施和影响有经验`iMessageFilter`？

我知道这也取决于我将在`PreFilterMessage`函数中做什么。它将`Message.Msg`与特定的 WM_[messages] 或其中的一个范围进行比较，最多 20 个左右。

将获得我的“答案”标记的帖子可能包含：

*   您对 iMessageFilter 的体验（具有绝对性能数据？）。

*   和/或描述如何使用 iMessageFilter 监控/确定性能损失的方法。（将 PerformanceCounter 与 CPU 滴答结合使用？）。如果它是应用程序上 CPU 使用率的相对百分比，则结果将是最好的。

先感谢您。

# c# - PictureBox 中的 DragDrop - DragEnter 永远不会被调用

> ID：14980364
> 
> 赞同：4
> 
> 时间：2013-02-20T12:54:23.213
> 
> 标签：c#, winforms, drag-and-drop, picturebox, mousemove

我想`DragDrop`在我的`PicureBox`es 中使用，但`DragDrop()`永远`DragEnter()`不会调用方法。

我创建了方法`MouseMove`，在这个方法中我调用`DoDragDrop()`了应该调用`DragDrop()`and的方法`DragEnter()`。`MouseMove`被调用但不休息。

表单构造函数：

```
public Form1()
{
   InitializeComponent();
   this.AllowDrop = true;
} 
```

这是在以下构造函数中创建的`PictureBox`：

```
this.DragDrop += new DragEventHandler(ttile_DragDrop);
this.DragEnter += new DragEventHandler(ttile_DragEnter);
this.MouseMove += new MouseEventHandler(ttile_MouseMove); 
```

还有我的方法：

```
public void ttile_DragEnter(object sender, System.Windows.Forms.DragEventArgs e)
{
   int i = 0;
}

public void ttile_DragDrop(object sender, System.Windows.Forms.DragEventArgs e)
{
   int i = 0; 
}

public void ttile_MouseMove(object sender, System.Windows.Forms.MouseEventArgs e)
{
   if (e.Button == MouseButtons.Left)
   {
      ((PictureBox)sender).DoDragDrop(sender, DragDropEffects.All);
   }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-16T09:34:19.237

我有一个类似的问题。问题是你有`AllowDrop`表格，但没有图片。出于我忽略的原因，`AllowDrop`它不是`PictureBox`.

对我有用的技巧是替换

```
this.AllowDrop = True; 
```

经过

```
((Control)myPictureBox).AllowDrop = True; 
```

`myPictureBox`我的实例在哪里`PictureBox`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-08T01:28:29.323

```
myPictureBox.AllowDrop = true; 
```

尽管在 myPictureBox 的方法列表中看不到“AllowDrop”，但您可以使用此代码。

# jquery - jQuery 添加可折叠面板

> ID：14980368
> 
> 赞同：0
> 
> 时间：2013-02-20T12:54:39.630
> 
> 标签：jquery

使用 jQuery 我想动态添加新的可折叠面板。手风琴是不够的，因为我需要一次打开多个部分。

[除了我想要一个按钮单击来动态添加一个新面板之外，这里](http://dl.dropbox.com/u/24708866/labs/jquery-multi-open-accordion/index.html)的示例正是我所需要的。

使用 .append() 添加新标签不起作用。我不介意解决方案是否包含插件或其他任何东西（我不想使用诸如“KendoUI”之类的框架）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:56:31.090

如[jQuery 文档](http://docs.jquery.com/UI/Accordion)中所示：

> 手风琴不允许同时打开多个内容面板，而且要做到这一点需要付出很多努力。如果您正在寻找一种允许打开多个内容面板的小部件，请不要使用它。通常它可以用几行 jQuery 来代替，如下所示：

```
jQuery(document).ready(function(){
  $('.accordion .head').click(function() {
      $(this).next().toggle();
      return false;
  }).next().hide();
});
Or animated:

jQuery(document).ready(function(){
  $('.accordion .head').click(function() {
      $(this).next().toggle('slow');
      return false;
  }).next().hide();
}) 
```

;

# java - 减少测试用例之间的耦合

> ID：14980370
> 
> 赞同：7
> 
> 时间：2013-02-20T12:54:42.180
> 
> 标签：java, unit-testing, testing, junit, tdd

我正在尝试了解有关 JUnit 和 TDD 的更多信息，但我遇到了一些与测试用例之间的耦合有关的问题。

当我为特定数据类型的 API 编写测试用例时，比如 a `Deque<T>`，如何限制测试用例之间的耦合？例如，如果我正在为 method 编写一个测试用例`insertFirst(T item)`，那么假设我应该能够在正确初始化对象上调用该方法后断言两件事：

1.  对象的大小`Deque`应该增加一
2.  如果我随后调用相应的`T removeFirst()`方法，它应该返回对我在初始调用中插入的对象的引用。

但是，这会在我的至少两个测试用例之间产生不希望的耦合，其中一个测试用例的通过取决于另一种 API 方法的正确实现。例如，为了让这个测试用例通过，我需要一个正确的实现来检查项目的数量`Deque`以及删除项目。如果我对其中任何一种方法的测试由于某种原因不正确或不完整，那么我对该`insertFirst`方法的测试将自动受到怀疑。

避免这种情况的最佳做法是什么？我编写测试用例的方法在某种程度上是错误的吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T12:57:10.237

在为一种方法编写测试时，您*必须*假设类的其余部分工作正常。如果你不做这个假设，唯一的结论就是每个班级进行一次*大规模的测试。*这不是我们所做的。

您可以假设该类的其他部分正常工作，因为也会对这些其他部分进行测试，以确保它们的正确性。
如果某个部分工作不正常，则测试将失败，向您显示某些地方不正确。
一旦您的测试套件的测试失败，您就必须修复一个错误。你不能再做任何假设了。

例子：

你有一个简单的列表实现，只有三种方法：

1.  插入
2.  消除
3.  数数

你有三个测试：

1.  测试`insert`：

    *   创建列表实例（*排列*）
    *   `insert`项目（*法案*）
    *   检查是否`count`等于 1（*断言*）
2.  测试`remove`：
    *   创建列表和`insert`项目的实例（*排列*）
    *   `remove`项目（*法案*）
    *   检查是否`count`等于 0（*断言*）
3.  测试`count`：
    *   创建列表和`insert`n 个项目的实例（*排列*）
    *   检索`count`（*行为*）
    *   检查是否`count`等于 n（*断言*）

现在，如果上述任何测试失败，您就无法确定班级中单个成员的正确性：

*   如果第一个测试失败，第三个测试也将失败。第二个会通过，但实际上并没有 test `remove`，因为没有什么要删除的。
*   如果第二个测试失败，其他两个测试仍然会通过。尽管如此，您仍不能确定它`insert`是否`count`正常工作，因为如果三个成员中的任何一个不能正常工作，第二个测试将失败。
*   如果第三个测试失败，另外两个很可能也会失败。

但是，失败的测试告诉你一些事情：
根据失败的测试，你通常可以推断出错误所在。
示例：如果只有第二个测试失败，而第一个或第三个测试没有失败，则错误很可能出在`remove`方法中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T23:20:08.417

将单元测试视为测试特定功能而不是特定方法通常更有效率。任何给定的测试都将检查某些方法集合是否正确地实现了作为测试主题的功能，并且设计良好的一组测试中的失败模式往往会告诉您哪个方法很快就崩溃了。

大量的测试往往会自然而然地脱离 TDD；这是使这项技术如此强大的原因之一。如果我正在写 a `Deque`，我写的测试往往如下，通常按此顺序呈现。

1.  `empty_Deque_isEmpty`-- 实现`isEmpty`总是返回`true`
2.  `non_empty_Deque_isntEmpty`-- 实现`insertFirst`使`isEmpty`实例变量为假
3.  `re_emptied_Deque_isEmpty`-- 将使用的实例变量更改`isEmpty`为响应`insertFirst`和的数字`removeFirst`
4.  `is_empty_Deque_size_correct`-- 实现`size`始终返回 0
5.  `is_nonempty_Deque_size_correct`-- 添加实例变量以跟踪大小；意识到它正在做同样的事情`isEmpty`；重构
6.  `is_re_emptied_Deque_size_correct`-- 让测试通过，因为我们做了什么来实现 5\. 发生
7.  `does_removing_from_empty_Deque_throw`--在做任何其他事情之前`removeFirst`需要检查`size`
8.  `is_inserted_item_returned`--`insertFirst`现在`removeFirst`填充一个`T`实例变量
9.  `is_inserted_item_returned_from_end`-- 加上`removeLast`那是一个副本`removeFirst`；重构
10.  `is_rear_inserted_item_returned`-- 添加`insertLast`该副本`insertFirst`；重构
11.  `are_all_inserted_items_returned`——改变`insertFirst`并`removeFirst`采取行动`SomeKindOfCollection<T>`；不检查检索顺序
12.  `does_removeFirst_retrieve_items_in_correct_order`-- 插入两个东西，确保第二个由`removeFirst`. 可能已经是真的了。
13.  `does_removeLast_retrieve_items_in_correct_order`- 同上`removeLast`，除非很确定不会通过。

这是一大堆测试，但是当您查看它们时，您应该注意到其中的模式。这些测试都不是真正的“测试`count`”或“测试`removeFirst`”。但是当我们完成时，该类的整个接口都在运行，并且该接口所需的所有内部组件都已开发完毕。一些测试依赖于不止一种方法，如果该方法失败，它们都会中断。但是中断的模式往往会非常有助于确定错误在哪里。

同样有趣的是，我们可以通过多少这些测试而无需承诺在对象中实际拥有一个集合，这表明可以将这组测试分解成一个更通用的测试套件，这在开发`PriorityQueue`.

# lua - lua - main.lua:18: 'end' 应在'elseif' 附近（在第 12 行关闭'function'）

> ID：14980371
> 
> 赞同：0
> 
> 时间：2013-02-20T12:54:42.470
> 
> 标签：lua, love2d

我来自 Java 并尝试使用 lua 和 love2d 对 iPad 应用程序进行编程。我很新，我总是得到这个错误：

```
Syntax error: main.lua:18: 'end' expected (to close 'function' at line 12) near 'elseif' 
```

这是我的代码：

```
function setup()
i = 0
end

function draw()
if i == 0
then
background(0, 0, 0, 0)
i = i + 1
end
elseif i == 1
then
background(255, 0, 0, 0)
i = i + 1

elseif i == 2
then
background(0, 255, 0, 0)
i = i + 1

elseif i == 3
then
background(0, 0, 255, 0)
i = i + 1

elseif i == 4
then
background(255, 255, 0, 0)
i = i + 1

elseif i == 5
then
background(255, 255, 255, 0)
i = i + 1

elseif i == 6
then
background(0, 255, 255, 0)
i = i + 1

elseif i == 7
then
background(255, 0, 255, 0)
i = 0
end 
```

有什么问题，我该怎么做才能解决它并在将来避免它？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T12:56:48.047

你有 if...then...end...elseif.... “end”不属于那里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T14:03:38.680

John 的答案是正确的，但是既然你刚开始，我不禁给你一些建议：以数据驱动的方式编写这种代码要好得多。这意味着例如像这样重写你的`draw()`函数：

```
backgrounds = {
  {  0,   0,   0, 0},
  {255,   0,   0, 0},
  {  0, 255,   0, 0},
  {  0,   0, 255, 0},
  {255, 255,   0, 0},
  {255, 255, 255, 0},
  {  0, 255, 255, 0},
  {255,   0, 255, 0}
}

function draw()
  background(unpack(backgrounds[i+1]))
  i = (i+1) % 8
end 
```

和 Lua 一起玩吧！

# jpa-2.0 - JPA2 实体中的奇怪行为

> ID：14980375
> 
> 赞同：0
> 
> 时间：2013-02-20T12:54:55.613
> 
> 标签：jpa-2.0, java-ee-6, ejb-3.1

在观察一些日志条目时，我观察到一种行为，我不明白。我重新创建了场景。

实体：

```
@Entity
public class SimpleEntity implements Serializable {

    private static final long serialVersionUID = 2777681889998131084L;

    @Id
    @GeneratedValue
    private Long id;
    @Version
    private Long version;
    @Column(length = 20, nullable = false, unique = true, updatable = false)
    @NotNull
    private String username;
    @Column(length = 60)
    private String email;

    // Constructors

    // getters/setters

    // @Override
    // toString : generated by eclipse, modified to include super.toString
    // hashCode, equals : generated by eclipse, based on 'username'

} 
```

测试用例

```
@Test
public void testUpdate() {
    SimpleEntity simple;
    SimpleEntity simple2;

    try {
        simple = bean.create(new SimpleEntity("user",
                "original@original.com"));  // em.persist
        simple.setEmail("updated@updated.com");
        simple2 = bean.update(simple);          // em.merge
        System.out.println(simple);
        System.out.println(simple2);
    } catch (EJBException e) {
        System.out.println(e.getMessage());
    }
} 
```

它打印与上述 System.out.println 行对应的以下行

```
...SimpleEntity@36ebea SimpleEntity [id=1, version=1, username=user, email=updated@updated.com]
...SimpleEntity@36ebea SimpleEntity [id=1, version=2, username=user, email=updated@updated.com] 
```

我觉得奇怪的是两个实体的地址相同（**SimpleEntity@36ebea**），但如果我查看数据，它就不一样了。“版本”不同。( **1** & **2** )

相同的实例（地址相同）如何显示不同的数据？有一些代理在玩吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:10:36.610

`simple`并且`simple2`实际上是两个不同的实例。你说“toString：由eclipse生成，修改为包含super.toString”。继承`toString()`自`Object`看起来像：

```
public String toString() {
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
} 
```

所以`@36ebea`不是对象的地址，而是它的哈希码（仅基于`username`）对于不同的实例保持相同，只有不同的实例`version`。

您可能希望使用`System.identityHashCode()`从对象的地址派生的哈希码（`hashCode()`如果您没有覆盖从 继承的那个，它基本上会返回您从调用中获得的内容`Object`）。

# string - div里面的字符串

> ID：14980376
> 
> 赞同：0
> 
> 时间：2013-02-20T12:54:55.933
> 
> 标签：string, function, return

需要一些编码建议，我想结合 2 个不同的***wordpress 函数***，它们以 $string 开头并返回代码。

**返回**码是

```
return '<div> some html </div>'; 
```

**$sting**代码是

```
$string .= '<div>';
if else
$string .= '</div>'; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:03:09.167

Well I dont have experience in coding and html..

1st function

```
<?php function _bit_header_inside(){ /* HEADER WITH LOGO + BANNER */

global $wpdb,$PPT;

return '<div id="header" class="full"><div class="w_960">

    <div class="f_half left" id="logo">

        <a href="'.$GLOBALS['bloginfo_url'].'/" title="'.get_bloginfo('name').'">

            <img src="'.$PPT->Logo(true).'" alt="'.get_bloginfo('name').'" />

        </a>

    </div>

    <div class="left" id="banner">

        '.test_banner("top",true).'

    </div>

    </div> <!-- end header w_960 -->

    <div class="clearfix"></div>

    </div> <!-- end header -->';

    } ?>

<?php echo test_header_inside(_bit_header_inside()); /* HOOK  / FILTER  */ ?> 
```

2nd function

```
<?php function custom_login_logout(){ /* Custom LOGIN-LOGOUT BAR */

global $wpdb,$PPT, $userdata; get_currentuserinfo(); $string='';  

$string .= '<div id="submenubar"><div class="w_960">';

    if(isset($GLOBALS['ppt_layout_styles']['header']) && isset($GLOBALS['ppt_layout_styles']['header']['loginlogout']) && $GLOBALS['ppt_layout_styles']['header']['loginlogout'] == 1){ }else{

$string .= '<ul class="submenu_account">';

    if ( isset($userdata) && $userdata->ID ){ 

$string .= '<li id="submenu_li_logout"><a href="'.wp_logout_url().'">'.$PPT->_e(array('head','4')).'</a></li>
<li id="submenu_li_account"><a href="'.$GLOBALS['test']['dashboard_url'].'">'.$PPT->_e(array('head','5')).'</a></li>
<li id="submenu_li_username"><b>'.$userdata->display_name.'</b></li>';

    }else{

$string .= '<li><a href="'.$GLOBALS['bloginfo_url'].'/wp-login.php" rel="nofollow" id="submenu_li_login">'. $PPT->_e(array('head','6')).'</a>

<a href="'.$GLOBALS['bloginfo_url'].'/wp-login.php?action=register" rel="nofollow" id="submenu_li_register">'.$PPT->_e(array('head','7')).'</a></li>';

    }

$string .= '</ul> ';

}

$string .= '</div> <!-- end w_960 --> </div><!-- end submenubar --> ';

return $string;

} ?>

<?php echo test_submenu_inside(custom_login_logout()); /* HOOK / FILTER */  ?> 
```

How to insert "custom_login_logout" inside "test_header_inside" below

```
<div class="left" id="banner">

    '.test_banner("top",true).'

</div> 
```

Can I combine them this way

```
<?php
return '<div> some html';

$string .= '<div>';
if else
$string .= '</div>';

return '</div>';
?>
<?php echo test_header_inside(_bit_header_inside()); /* HOOK  / FILTER  */ ?> 
```

Thanks

# java - 如何在 netbeans 7.2.1 中将 Java 程序连接到 Derby

> ID：14980382
> 
> 赞同：1
> 
> 时间：2013-02-20T12:55:19.137
> 
> 标签：java, sql, database, derby

我是新手程序员，我想知道在 netbeans 7.2.1 中将 java 程序连接到 Derby 的基本方法是什么。我的教授让我制作一个程序，让我可以添加、删除、保存、搜索和编辑表格中的条目。我已经知道如何在 netbeans 中制作 GUI java 程序以及如何在 netbeans 上制作数据库。我只想知道程序中要包含哪些基本代码，以使其能够连接到 netbeans 7.2.1 上的数据库。感谢您花时间阅读我的问题。

```

`public void connection(){
    try{
            Class.forName("org.apache.derby.jdbc.ClientDriver");
            String myDb = "jdbc:derby://localhost:1527/HWtrial";
            Connection DBconn = DriverManager.getConnection(myDb, "","");
            s1 = DBconn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);

            result = s1.executeQuery("SELECT * from HWSTUD");
            result.next();

            result.last();
        }catch(Exception ex){
            JOptionPane.showMessageDialog(null,"Cannot Connect to Database", "Error Message", JOptionPane.OK_OPTION);
          };
}` 

            回答 #1

赞同：1

时间：2013-02-20T20:53:23.140

Derby 文档包含一组出色的教程来帮助您入门：[http ://db.apache.org/derby/docs/10.9/getstart/](http://db.apache.org/derby/docs/10.9/getstart/)

            回答 #2

赞同：0

时间：2014-03-03T07:46:46.177

```
 Class.forName("org.apache.derby.jdbc.ClientDriver");
        String myDb = "jdbc:derby://localhost:1527/HWtrial";
        Connection DBconn = DriverManager.getConnection(myDb, "","");
         Statement st=DBconn.createStatement();
         ResultSet rs=st.executeQuery("select * from student");
         while(rs.next)
          {
            out.println(rs.getString(1));
          }| 
```

```

# android - 按钮和级别

> ID：14980383
> 
> 赞同：0
> 
> 时间：2013-02-20T12:55:20.660
> 
> 标签：android

我有一门课，我在代码中添加了一些按钮。我正在添加此按钮，单击我的第二​​个按钮。我想在第二个上方添加这个按钮。我的意思是：我点击按钮，第一个按钮正在添加到布局中，我第二次点击，第二个按钮添加，但他必须先完成这个。在我的意思下，第一个按钮覆盖第二个，我看不到第二个。我不想看到第二个按钮。我第三次单击，第三个按钮在第二个按钮下添加。我怎么能在代码中做到这一点？我知道如何添加按钮，但我不知道如何做第一个按钮高于第二个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:03:27.090

您可以`RelativeLayout`用于父布局。每次单击按钮时，创建一个新按钮`Button`并将其添加到您的父布局中：

```
addView(YOUR_NEWLY_CREATED_BUTTON, 0) 
```

功能。这会将您的按钮作为第一个孩子添加到您的布局中。这意味着它将`under`是您的孩子的其他按钮`Relative Layout`

如果您的`created`按钮具有相同的`width`和`height`，则添加的按钮将不可见

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:03:39.670

我建议在 XML 布局中添加您需要的所有按钮，然后对于您不想在首次加载时显示的按钮添加以下内容：

```
android:visibility="gone" 
```

然后在您的代码中，只要您希望查看按钮，只需在 onClickListener 中添加以下代码行：

```
// Getting you button form your xml layout
Button testBtn = (Button)findViewById(R.id.btnTest);
// Set visibility of button here
testBtn.setVisibility(View.VISIBLE);
// To hide the button again simply use this
testBtn.setVisibility(View.GONE); 
```

# php - 如何让 PHP 从 C: 驱动器读取 csv 文件

> ID：14980385
> 
> 赞同：2
> 
> 时间：2013-02-20T12:55:24.970
> 
> 标签：php, file-io

我想使用 PHP 从 Windows`C:`驱动器中读取 CSV（逗号分隔值）文件`C:\downloads`。

这是我到目前为止的代码：

```
<?php
$file = "c:\\downloads\\test.csv";
$f = fopen($file, "r");
while ($record = fgetcsv($f)) {
    foreach($record as $field) {
        echo $field . "<br>";
    }
}
fclose($f);
?> 
```

但是，我收到以下警告：

```
Warning: fopen(c:\downloads\test.csv) [function.fopen]: failed to open stream: 
No such file or directory in /home/content/99/10187599/html/csvread.php on line 3

Warning: fgetcsv() expects parameter 1 to be resource, boolean given 
in /home/content/99/10187599/html/csvread.php on line 4

Warning: fclose() expects parameter 1 to be resource, boolean given in 
/home/content/99/10187599/html/csvread.php on line 9 
```

我从[http://phpmaster.com](http://phpmaster.com)关注这个例子。

如何在 PHP 中从本地磁盘读取 csv 文件？

# rdf - 通过联合 SPARQL 查询连接 Linkedmdb 和 DBpedia

> ID：14980386
> 
> 赞同：1
> 
> 时间：2013-02-20T12:55:28.323
> 
> 标签：rdf, sparql, semantic-web, dbpedia, linkedmdb

[我运行了以下查询，并从linkedmdb](http://linkedmdb.org/)获取了电影的数据及其对应的 DBpedia URI 。

```
SELECT ?film ?label ?dbpediaLink
WHERE { 
  ?film rdf:type movie:film .
  ?film rdfs:label ?label .
  ?film owl:sameAs ?dbpediaLink 
  FILTER(regex(str(?dbpediaLink), "dbpedia", "i"))
}
LIMIT 100 
```

`?dbpediaLink`我想使用URI从 DBpedia 获取这些电影的类别。另外，我需要`dcterms:subject`从 DBpedia 获取电影的属性值。我无法理解如何连接它们？我可以通过 SPARQL 来完成，还是需要为此编写代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-23T23:22:21.383

您需要一个[联合 SPARQL 查询](http://www.w3.org/TR/sparql11-federated-query/)。您不需要编写代码（SPARQL 查询除外）。您将需要一个支持它们的端点，并且由于它需要查询多个端点，您可能需要运行自己的端点（可能不包含任何实际数据，但可以为您进行联合）。根据您上面概述的要求，您可能需要如下查询。请注意，我`?dbpediaLink`从投影变量中删除了；也就是说，这个查询不会`SELECT ?dbpediaLink`，因为您可能对查看该值不感兴趣，而是对使用它从 DBpedia 检索数据感兴趣。当然，如果需要，您可以将其添加回来。

```
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX movie: <http://data.linkedmdb.org/resource/movie/>
PREFIX dcterms: <http://purl.org/dc/terms/>

SELECT ?film ?label ?subject WHERE {
    SERVICE <http://data.linkedmdb.org/sparql> {
        ?film a movie:film .
        ?film rdfs:label ?label .
        ?film owl:sameAs ?dbpediaLink 
        FILTER(regex(str(?dbpediaLink), "dbpedia", "i"))
    }
    SERVICE <http://dbpedia.org/sparql> {
        ?dbpediaLink dcterms:subject ?subject
    }
}
LIMIT 50 
```

您不能直接针对[DBpedia SPARQL 端点](http://dbpedia.org/sparql)运行它，但您可以使用[Jena 的 ARQ](http://jena.apache.org/documentation/query/)在本地运行查询，并且 ARQ 将为您执行对其他端点的查询。我创建了一个空文件，`data.n3`作为参数传递给 ARQ `--query`，并且能够像这样运行查询（`query.sparql`上面的查询在哪里）：

```
$ arq --query query.sparql --data data.n3 
```

结果如下所示。请注意，每个 DBpedia 资源都可以通过`dcterms:subject`属性与多个类别相关联，因此即使我们有一个`LIMIT 50`那里，我们实际上并没有得到 50 部电影，而是 50 行结果。

```
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
| film                                          | label                          | subject                                                                                     |
================================================================================================================================================================================
| <http://data.linkedmdb.org/resource/film/11>  | "Godzilla vs. the Sea Monster" | <http://dbpedia.org/resource/Category:1960s_horror_films>                                   |
| <http://data.linkedmdb.org/resource/film/11>  | "Godzilla vs. the Sea Monster" | <http://dbpedia.org/resource/Category:Films_directed_by_Jun_Fukuda>                         |
| <http://data.linkedmdb.org/resource/film/11>  | "Godzilla vs. the Sea Monster" | <http://dbpedia.org/resource/Category:Giant_monster_films>                                  |
| <http://data.linkedmdb.org/resource/film/11>  | "Godzilla vs. the Sea Monster" | <http://dbpedia.org/resource/Category:Monster_movies>                                       |
| <http://data.linkedmdb.org/resource/film/11>  | "Godzilla vs. the Sea Monster" | <http://dbpedia.org/resource/Category:1966_films>                                           |
| <http://data.linkedmdb.org/resource/film/11>  | "Godzilla vs. the Sea Monster" | <http://dbpedia.org/resource/Category:Godzilla_films>                                       |
| <http://data.linkedmdb.org/resource/film/11>  | "Godzilla vs. the Sea Monster" | <http://dbpedia.org/resource/Category:Japanese_films>                                       |
| <http://data.linkedmdb.org/resource/film/11>  | "Godzilla vs. the Sea Monster" | <http://dbpedia.org/resource/Category:Kaiju_films>                                          |
| <http://data.linkedmdb.org/resource/film/11>  | "Godzilla vs. the Sea Monster" | <http://dbpedia.org/resource/Category:Mothra>                                               |
| <http://data.linkedmdb.org/resource/film/11>  | "Godzilla vs. the Sea Monster" | <http://dbpedia.org/resource/Category:Terrorism_in_fiction>                                 |
| <http://data.linkedmdb.org/resource/film/11>  | "Godzilla vs. the Sea Monster" | <http://dbpedia.org/resource/Category:1960s_science_fiction_films>                          |
| <http://data.linkedmdb.org/resource/film/11>  | "Godzilla vs. the Sea Monster" | <http://dbpedia.org/resource/Category:Sequel_films>                                         |
| <http://data.linkedmdb.org/resource/film/11>  | "Godzilla vs. the Sea Monster" | <http://dbpedia.org/resource/Category:Japanese-language_films>                              |
| <http://data.linkedmdb.org/resource/film/11>  | "Godzilla vs. the Sea Monster" | <http://dbpedia.org/resource/Category:Mystery_Science_Theater_3000_episodes>                |
| <http://data.linkedmdb.org/resource/film/105> | "Top Hat"                      | <http://dbpedia.org/resource/Category:1930s_musical_films>                                  |
| <http://data.linkedmdb.org/resource/film/105> | "Top Hat"                      | <http://dbpedia.org/resource/Category:American_musical_comedy_films>                        |
| <http://data.linkedmdb.org/resource/film/105> | "Top Hat"                      | <http://dbpedia.org/resource/Category:American_romantic_comedy_films>                       |
| <http://data.linkedmdb.org/resource/film/105> | "Top Hat"                      | <http://dbpedia.org/resource/Category:American_romantic_musical_films>                      |
| <http://data.linkedmdb.org/resource/film/105> | "Top Hat"                      | <http://dbpedia.org/resource/Category:1935_films>                                           |
| <http://data.linkedmdb.org/resource/film/105> | "Top Hat"                      | <http://dbpedia.org/resource/Category:American_screwball_comedy_films>                      |
| <http://data.linkedmdb.org/resource/film/105> | "Top Hat"                      | <http://dbpedia.org/resource/Category:Black-and-white_films>                                |
| <http://data.linkedmdb.org/resource/film/105> | "Top Hat"                      | <http://dbpedia.org/resource/Category:Films_directed_by_Mark_Sandrich>                      |
| <http://data.linkedmdb.org/resource/film/105> | "Top Hat"                      | <http://dbpedia.org/resource/Category:1930s_romantic_comedy_films>                          |
| <http://data.linkedmdb.org/resource/film/105> | "Top Hat"                      | <http://dbpedia.org/resource/Category:United_States_National_Film_Registry_films>           |
| <http://data.linkedmdb.org/resource/film/105> | "Top Hat"                      | <http://dbpedia.org/resource/Category:Films_set_in_London>                                  |
| <http://data.linkedmdb.org/resource/film/105> | "Top Hat"                      | <http://dbpedia.org/resource/Category:RKO_Pictures_films>                                   |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:American_children's_fantasy_films>                    |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:Best_Original_Music_Score_Academy_Award_winners>      |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:E.T._the_Extra-Terrestrial>                           |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:English-language_films>                               |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:1980s_science_fiction_films>                          |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:1982_films>                                           |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:Alien_visitation_films>                               |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:Amblin_Entertainment_films>                           |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:Films_directed_by_Steven_Spielberg>                   |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:1985_novels>                                          |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:American_science_fiction_films>                       |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:Films_produced_by_Steven_Spielberg>                   |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:Films_set_in_the_San_Fernando_Valley>                 |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:Films_that_won_the_Best_Sound_Mixing_Academy_Award>   |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:United_States_National_Film_Registry_films>           |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:Universal_Pictures_films>                             |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:Best_Drama_Picture_Golden_Globe_winners>              |
| <http://data.linkedmdb.org/resource/film/154> | "E.T. the Extra-Terrestrial"   | <http://dbpedia.org/resource/Category:Films_that_won_the_Best_Visual_Effects_Academy_Award> |
| <http://data.linkedmdb.org/resource/film/155> | "Easy Rider"                   | <http://dbpedia.org/resource/Category:1960s_drama_films>                                    |
| <http://data.linkedmdb.org/resource/film/155> | "Easy Rider"                   | <http://dbpedia.org/resource/Category:American_films>                                       |
| <http://data.linkedmdb.org/resource/film/155> | "Easy Rider"                   | <http://dbpedia.org/resource/Category:1969_films>                                           |
| <http://data.linkedmdb.org/resource/film/155> | "Easy Rider"                   | <http://dbpedia.org/resource/Category:Films_shot_in_New_Orleans,_Louisiana>                 |
| <http://data.linkedmdb.org/resource/film/155> | "Easy Rider"                   | <http://dbpedia.org/resource/Category:Directorial_debut_films>                              |
| <http://data.linkedmdb.org/resource/film/155> | "Easy Rider"                   | <http://dbpedia.org/resource/Category:Films_about_drugs>                                    |
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
```

# c# - 如何使用 FluentValidation 获取单选按钮所需的错误消息

> ID：14980387
> 
> 赞同：0
> 
> 时间：2013-02-20T12:55:29.277
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, fluentvalidation

我正在使用`ASP.NET MVC 4`最新的`FluentValidation`.

我正在努力让我的单选按钮进行验证。当我单击提交按钮时，我需要在单选按钮列表中进行选择。

在我看来，我有以下几点：

```
@model MyProject.ViewModels.Servers.ServicesViewModel
@Html.ValidationMessageFor(x => x.ComponentTypeId)
@foreach (var componentType in Model.ComponentTypes)
{
     <div>
          @Html.RadioButtonFor(x => x.ComponentTypeId, componentType.Id, new { id = "emp" + componentType.Id })
          @Html.Label("emp" + componentType.Id, componentType.Name)
     </div>
} 
```

我的 ComponentType 类：

```
public class ComponentType : IEntity
{
     public int Id { get; set; }

     public string Name { get; set; }
} 
```

我设置视图模型属性的操作方法的一部分：

```
ServicesViewModel viewModel = new ServicesViewModel
{
     ComponentTypes = componentTypeRepository.FindAll(),
     Domains = domainRepository.FindAll()
}; 
```

我的视图模型：

```
[Validator(typeof(ServicesViewModelValidator))]
public class ServicesViewModel
{
     public int ComponentTypeId { get; set; }

     public IEnumerable<ComponentType> ComponentTypes { get; set; }

     public int DomainId { get; set; }

     public IEnumerable<Domain> Domains { get; set; }
} 
```

我的验证器类：

```
public class ServicesViewModelValidator : AbstractValidator<ServicesViewModel>
{
     public ServicesViewModelValidator()
     {
          RuleFor(x => x.ComponentTypeId)
               .NotNull()
               .WithMessage("Required");

          RuleFor(x => x.DomainId)
               .NotNull()
               .WithMessage("Required");
     }
} 
```

我的 http Post 操作方法：

```
[HttpPost]
public ActionResult Services(ServicesViewModel viewModel)
{
     Check.Argument.IsNotNull(viewModel, "viewModel");

     if (!ModelState.IsValid)
     {
          viewModel.ComponentTypes = componentTypeRepository.FindAll();
          viewModel.Domains = domainRepository.FindAll();

          return View(viewModel);
     }

     return View(viewModel);
} 
```

当没有选择任何内容时，如何让它显示我所需的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:32:13.700

我认为问题在于您使用的是`int`for`ComponentId`而不是 nullable `int`。然后，您将使用`NotNull()`永远不会触发的验证器，因为 an`int`不能为空。

尝试将其切换为：

```
[Validator(typeof(ServicesViewModelValidator))]
public class ServicesViewModel
{
     public int? ComponentTypeId { get; set; }

     public IEnumerable<ComponentType> ComponentTypes { get; set; }

     public int DomainId { get; set; }

     public IEnumerable<Domain> Domains { get; set; }
} 
```

如果该剂量不起作用，那么您可以尝试使用范围验证：

```
public class ServicesViewModelValidator : AbstractValidator<ServicesViewModel>
{
     public ServicesViewModelValidator()
     {
          RuleFor(x => x.ComponentTypeId)
               .InclusiveBetween(1, int.MaxValue)
               .WithMessage("Required");

          RuleFor(x => x.DomainId)
               .NotNull()
               .WithMessage("Required");
     }
} 
```

这将使 0 不是有效值。

# c# - 声明数组类型

> ID：14980393
> 
> 赞同：8
> 
> 时间：2013-02-20T12:55:40.620
> 
> 标签：c#, arrays

在讨论关于 SO 的另一个问题时，有人告诉我语法

```
int[] numbers = new int[10]; 
```

优于

```
Array numbers = Array.CreateInstance(typeof(int), 10); 
```

我的问题是，第一种语法什么时候有用，第二种语法什么时候有用？为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T13:09:02.357

这会“直接”创建一个强类型的单维数组：

```
int[] array = new int[10]; 
```

在后台它使用 IL 命令`newarr`。

这个更类似于使用反射创建数组（类型可以在运行时决定）

```
int[] array2 = (int[])Array.CreateInstance(typeof(int), 10); 
```

最后创建的数组是一样的，但是使用`Array.CreateInstance`. 请注意，`Array.CreateInstance`您可以动态选择数组的类型（就像通过反射可以在运行时创建给定类型的类型的实例一样），例如：

```
Type type = someCondition ? typeof(int) : typeof(string);
Array array2 = Array.CreateInstance(type, 10); 
```

另一个很大的区别：“基”`Array`类是弱类型的（所以它的方法使用`object`参数，而不是`int`/ `string`'/ `something`）。所以：

```
int num = (int)array2.GetValue(1); // You have to cast the return value to int from object 
```

* * *

另一个使用理由

```
array[5] = 1; 
```

代替

```
array2.SetValue(5, 1); 
```

是第一种方法在 IL 代码中被优化为直接访问一维数组 (`stelem`和`ldelem`)。对于`GetValue`.

* * *

我使用术语“一维数组”的原因：

在 .NET 中有两种“类型”的数组：单维数组和“复杂”数组（它们可以是多维的，或者第一个元素不在 0 索引处，或两者兼而有之）。第二组要慢得多。和`stelem`仅`ldelem`适用于一维数组。对于多维/特殊数组，“隐藏”方法用于访问它们（C# 编译器更改 get 和 set 以便调用这些方法）（它们类似于类的`GetValue`/ `SetValue`，`Array`例如参见[https://stackoverflow。 com/a/597729/613130](https://stackoverflow.com/a/597729/613130)）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T13:01:30.577

在编译时，看起来它们之间没有太大区别。就像数组一样，**[Array.CreateInstance](http://msdn.microsoft.com/en-us/library/zb3cfh7k.aspx)**方法也使引用类型的元素初始化为`null`. 值类型元素被初始化为`zero`.

![在此处输入图像描述](../Images/b7b942071c8e7b7a97ddf31805400969.png)

第二个的唯一区别是；来自*[MSDN](http://msdn.microsoft.com/en-us/library/zb3cfh7k.aspx)*；

> 与大多数类不同，Array 提供了 CreateInstance 方法，而不是公共构造函数，以允许后期绑定访问。

同样正如 Stefano Altieri 所[提到的，第一种语法在](https://stackoverflow.com/a/14980612/447156)*编译时*需要数组大小，但第二种语法需要在*运行时*的大小。例如，您可以成功构建这些代码；

```
int[] numbers1 = new int[10];
Array numbers2 = Array.CreateInstance(typeof(int), -1); 
```

但是你不能建造这些；

```
int[] numbers1 = new int[];
Array numbers2 = Array.CreateInstance(typeof(int), -1); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-20T13:07:05.593

您编写的示例是等效的。关键是要使用第一种语法（new int[size]），您需要在编译时知道数组类型。

第二种语法允许您在运行时决定数组项的类型。这要强大得多，但您并不总是需要这种力量。IE

```
Type myType = SelectTheBestType();
var numbers = Array.CreateInstance(myType, 10); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T14:07:50.927

[Soner Gönül](https://stackoverflow.com/users/447156/soner-gonul)的回答非常好。你的问题的一个简单原因是

***如果数组作为对象或接口传递，则元素类型在编译时是未知的。***

[[这个答案](https://stackoverflow.com/questions/14088636/can-the-element-type-be-defined-with-an-unknown-class-possibly-presents-as-arra/14088788#14088788)]可能会给你带来这个想法，[[这里](https://stackoverflow.com/questions/14533082/why-doesnt-array-class-expose-its-indexer-directly/14735142#14735142)]是一些代码示例。

> 第一种语法什么时候有用，第二种语法什么时候有用？

示例链接中的方法，

```
static IList CreateArray<T>(this T source); 
```

泛型类型参数`T`不是`T[]`因为我不能假设它`source` **一定**是一个数组，但它仍然**可能**。因此我只能`Array.CreateInstance`在方法内部使用。

大多数时候，如果元素类型在编译时已经知道，最好使用语言提供的语法。

# c# - 当在不同的项目但相同的命名空间中时，来自父 XAML 类的 TreeView 不存在于“当前上下文”中

> ID：14980401
> 
> 赞同：0
> 
> 时间：2013-02-20T12:55:56.547
> 
> 标签：c#, wpf, xaml, inheritance, treeview

所以，我创建了一个基于基本 XAML 的子类（见下文），但我在另一个项目中创建了子类，Visual Studio 在 TreeView 上给我一个错误，说“当前上下文中不存在名称“ViewTree” ”。但是，存在于同一项目中的其他子类没有相同的错误。为什么是这样？

我添加了对另一个项目的引用，并使用了相同的命名空间，但仍然没有乐趣。

谢谢！

基础 XAML：

```
<UserControl x:Class="myLibrary.Material.ViewTreeSpace.ViewingTree"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" Background="#00000000" >
    <DockPanel>
        <TreeView Name="ViewTree" />
    </DockPanel>
</UserControl> 
```

父代码隐藏：

```
namespace myLibrary.Material.ViewTreeSpace {
    public partial class ViewingTree : Usercontrol {
        public string TreeName = String.Empty;
        public ViewingTree(){ }
} 
```

不同项目中的子类：

```
namespace myLibrary.Material.ViewTreeSpace {
    public class ImportedTree : ViewingTree {
        public ImportedTree() : base() {
            ViewTree.Items.Clear(); // <- This line gives me error
            TreeName = "My imported Tree in another project."; // <- This works
        }
} 
```

编辑：我还注意到代码隐藏中存在的变量可以被引用，只有 UIElements 不能被引用。

编辑：收到@Liju 的回答后，我将 TreeView 设置为使用`x:FieldModifier="public"`. 但是，我现在收到以下错误。

```
System.Exception: The component 'myLibrary.Material.ViewTreeSpace.ImportedTree' does not have a resource identified by the URI '/myLibrary;component/material/view%20tree/viewingtree.xaml'.
at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)
at myLibrary.Material.ViewTreeSpace.ViewingTree.InitializeComponent()
at myLibrary.Material.ViewTreeSpace.ViewingTree..ctor()
at myLibrary.Material.ViewTreeSpace.ImportedTree..ctor() in c:\..\ImportedTree.cs:line 51 
```

据我所知，不可能从不同的程序集中继承 XAML 类。（即[回答“组件没有由 URI 标识的资源](https://stackoverflow.com/a/10647528/1466627)显然，这是[自 2008 年以来的问题](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/e92390eb-bbfa-42fb-baa9-2286444c0dca)。

编辑2：

使用@Liju的第二个答案，我尝试设置ResourceDictionary，但它说它无法加载资源。

```
System.InvalidOperationException: ResourceDictionary LoadFrom operation failed with URI 'pack://application:,,,/myLibrary;component/Material/View Tree/ViewingTree.xaml'.
at System.Windows.ResourceDictionary.set_Source(Uri value)
at myLibrary.Material.ViewTreeSpace.ImportedTree..ctor() in c:\..\ImportedTree.cs:line 59 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:39:31.243

您可以将 x:FieldModifier 属性用作 Public x:FieldModifier="public"

默认字段修饰符值为“不公开”。

[http://msdn.microsoft.com/en-us/library/vstudio/aa970905(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/vstudio/aa970905(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:24:08.390

我假设您在运行时收到此错误。如果是这样，请在派生构造函数
示例代码中显式加载树视图资源：

```
 ResourceDictionary treeResource = new ResourceDictionary
    {
        Source = new Uri(@"pack://application:,,,/<<AssemblyName>>;component/<<Path to the xaml to load>>")
};
    this.Resources.MergedDictionaries.Add(treeResource); 
```

希望这可以帮助！

# objective-c - 如何使 GNUstep libobjc2 工作？

> ID：14980402
> 
> 赞同：3
> 
> 时间：2013-02-20T12:55:56.800
> 
> 标签：objective-c, ubuntu, runtime, gnustep, libobjc2

我下载并构建了 GNUstep libobjc2 1.6.1，

```
svn co http://svn.gna.org/svn/gnustep/libs/libobjc2/1.6.1/ rep
cd rep
make 
```

并在我尝试编译 Objective-C 代码时出现此错误。

```
hoon@ubuntu:~/work/objc2$ clang -fobjc-nonfragile-abi -fobjc-arc -fblocks *.m *.a -l pthread; ./a.out
Objective-C ABI Error: Loading modules from incompatible ABIs while loading 
a.out: loader.c:38: __objc_exec_class: Assertion `objc_check_abi_version(module)' failed.
Aborted (core dumped) 
```

看来我需要`libobjc.a`使用一些不同的配置进行构建。有什么问题，我应该怎么做才能解决这个错误？

环境：Ubuntu 12.04 LTS

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T15:14:44.640

这是一个很好的问题，因为 LLVM 和 CLang 和 GNUstep 并不声称使用起来很难或复杂。他们确实要求他们的用户阅读（并重新阅读）他们的文档。我自己刚刚为 Ubuntu 发现了这种组合，它非常有趣。目前有很多活动部件。

如果 OP 在其中一个 gnustep 邮件列表上得到了答案，那么很高兴在这里听到它是如何解决的。

没有建议重新开始的正常路线，只直接从 LLVM 和 GNUstep 安装最新版本，这是我的看法。

OP 正在尝试将 ARC 和块与 gunstep/libobjc2 项目提供的运行时一起使用。

libobjc2 可能应该使用 clang 版本 3.2 构建 - 或者可能是树的顶部。clang -v 会告诉你你的机器上有什么版本。我发现即使 Ubuntu 12.10 也不提供 clang-3.2。所以我从 LLVM 网站下载它。他们为 Ubuntu 12.04 LTS 预构建了二进制文件。为了在这个构建步骤中使用 clang，我看到了设置和导出 CC=clang 和 CXX=clang++ 的说明。

一旦构建了 libobjc2，就必须注意它的安装位置。如果系统已经有一个较旧的 libobjc.so.xy 库（它为 Obj-C 提供运行时环境），那么当您开始编译自己的源代码时，clang 或链接器可能会选择错误的库。当我运行 make install 步骤时，我发现从 libobjc2 源构建的 libobjc.so.4.6.0 在 Ubuntu 12.04 和 12.10 上都安装到了 /usr/local/lib 中。此路径不是由 libobjc2 安装步骤设置的。

为了获取这个库，我必须将 /usr/local/lib 添加到环境变量 LD_LIBRARY_PATH。尝试 'locate libojbc.so' 看看系统上是否有其他版本不会有什么坏处。

最后，libobjc2 自述文件[https://github.com/gnustep/gnustep-libobjc2#readme](https://github.com/gnustep/gnustep-libobjc2#readme)说这个新版本的 gnustep 库支持两个 ABI，每个 ABI 都支持 ARC 和块。我看到的关于使用 libobjc2 进行编译的建议是还提供预期要编译和链接的运行时版本：-fobjc-runtime=gnustep。Ubuntu 上的 Clang 仍然默认使用旧的 ABI。-fobjc-nonfragile-abi 可能会完成同样的事情，但我已经看到它提到该标志已经或将被弃用。

OP 错误实际上可能来自运行 a.out 的步骤，而不是编译 clang 的位置。也许动态加载器正在拾取遗留的 libobj.so。同样，我会使用 locate 来查看系统是否有多个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:58:04.123

这只是一个猜测，但我会冒昧地猜测 GNUstep 将默认使用 GCC 构建。一个好的第一步可能是重新配置 GNUstep 构建以使用 Clang。我不能说会暴露出什么样的问题，但是......

或者，您可以尝试使用 GCC 而不是 Clang 构建您的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-14T09:38:37.330

这是一个相当晚的答案，但我找到了一种让一切正常工作的方法（特别是在 Elementary OS 上，所以我想在 Ubuntu 和类似的发行版上应该没问题）。

如前所述，从源代码构建所有内容会更好/更容易，因为您可以选择前缀、构建选项等。一般方法：

1.  安装 cmake（如果尚未安装）-->`sudo apt-get install cmake`
2.  按照[此处](http://clang.llvm.org/get_started.html)的说明下载、构建和安装 llvm 和 clang （或查看附加的构建脚本）。为了速度，使用`--enable-optimized`标志。测试是“可选的”;-)
3.  的默认构建脚本`compiler-rt`不包括 Blocks 运行时。您可以修改构建脚本，或者为其他人已经完成它而感到高兴（特别是如果像我一样，您的 cmake 不是很好）。`libBlocksRuntime`从此[git repo](https://github.com/mackyle/blocksruntime.git)下载、构建和安装（它本质上是`compiler-rt`带有自定义构建脚本的最新 Blocks 运行时代码的克隆）。遵循他们的编译和测试方法。
4.  [`libobjc2`从 GNUStep](https://github.com/gnustep/gnustep-libobjc2)下载、构建和安装。正确构建的说明实际上在现已弃用的 makefile 中。
5.  运行`ldconfig`（如果需要 - 尽管运行它没有任何害处，即使它不是）。

作为@WeakPointer，您可能仍需要编辑`LD_LIBRARY_PATH`环境变量以获取新库。另一种选择是制作一些快速而肮脏的符号链接，以便 clang 可以找到您的新库。

最后一点：我没有对 GNUStep 的 libobjc2 和 GCC 的 libobjc 进行任何比较，后者确实包含一些 Objective-C 2.0 特性……如果同时在系统上保留这两个特性，请小心选择库！

* * *

以下脚本应该完成所有操作（未经测试！）：

```
#!/bin/bash
# Temporary base directories
basedir="./clangllvm_temp"
basedir2="./libBlocksRuntime_temp"
basedir3="./libObjc2_temp"

# Clang, llvm, compiler-rt
mkdir $basedir
cd $basedir
svn co http://llvm.org/svn/llvm-project/llvm/trunk llvm
cd llvm/tools
svn co http://llvm.org/svn/llvm-project/cfe/trunk clang
cd ../..
cd llvm/tools/clang/tools
svn co http://llvm.org/svn/llvm-project/clang-tools-extra/trunk extra
cd ../../../..
cd llvm/projects
svn co http://llvm.org/svn/llvm-project/compiler-rt/trunk compiler-rt
cd ../..

mkdir build
cd build
../llvm/configure --prefix=$PREFIX --enable-optimized
make
sudo make install
cd ../..

# libBlocksRuntime
git clone https://github.com/mackyle/blocksruntime.git $basedir2
cd $basedir2
sudo ./buildlib
sudo ./checktests
sudo ./installlib
# Test!
clang -o sample -fblocks sample.c -lBlocksRuntime && ./sample
cd ..

# libobjc2
https://github.com/gnustep/gnustep-libobjc2.git $basedir3
cd $basedir3
mkdir Build
cd Build
cmake .. -DCMAKE_C_COMPILER=clang -DCMAKE_CXX_COMPILER=clang++
sudo make && sudo -E make install
cd ../..    

# Cleanup
rm -rf $basedir
rm -rf $basedir2
rm -rf $basedir3

# ldconfig
sudo ldconfig

# Additional symlink/LD_LIBRARY_PATH stuff here if required.

# EOF 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T00:15:11.447

关键区别在于使用 Clang 进行构建。注意不要使用系统默认编译器 GCC。我从系统中删除`gobjc`和`g++`包以避免这个问题。

```
export CC=clang
export CXX=clang++

svn co http://svn.gna.org/svn/gnustep/libs/libobjc2/1.6.1/
cd 1.6.1
make 
```

这个答案是从这个邮件列表线程提示的：http: [//lists.gnu.org/archive/html/discuss-gnustep/2012-12/msg00036.html](http://lists.gnu.org/archive/html/discuss-gnustep/2012-12/msg00036.html)

描述的脚本发布在这里： [http ://wiki.gnustep.org/index.php/GNUstep_under_Ubuntu_Linux](http://wiki.gnustep.org/index.php/GNUstep_under_Ubuntu_Linux)

现在它编译简单的 ARC 代码。

* * *

似乎 GCC 和 Clang 生成的代码不兼容。

## 更新

我编写了[在 FreeBSD 和 CentOS 上](https://github.com/eonil/bootstrap)[设置的脚本`libobjc2`](https://github.com/eonil/bootstrap)。

[这些脚本大多是从博客](http://brilliantobjc.blogspot.kr/2012/12/cocoa-on-freebsd.html)中复制而来的。

# java - 重绘 JLabel、图像应用程序的问题

> ID：14980404
> 
> 赞同：2
> 
> 时间：2013-02-20T12:56:00.333
> 
> 标签：java, swing, jpanel, jlabel, hsb

所以这是我们的代码......我们是贵族，需要一些帮助来让我们的按钮在显示高度和宽度的色调/饱和度/亮度之间切换。目前，我们的应用程序仅显示宽度的色调和高度的饱和度。我们的按钮不起作用，我们无法清空视图并重新绘制另一个。有人可以帮忙吗？

```
package no.uib.info221.oblig1;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Frame;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.URL;
import java.util.List;

import javax.imageio.ImageIO;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

import com.github.imgur.ImgUr;
import com.github.imgur.api.album.AlbumRequest;
import com.github.imgur.api.album.AlbumResponse;
import com.github.imgur.api.model.ImageProperty;

public class ImgurViz extends JFrame {
    private static final long serialVersionUID = 7954882289770950884L;
    //private JProgressBar progressBar;
    private JButton HSbutton;
    private JButton BSbutton;
    private JButton BHbutton; 
    private JPanel knappepanel;
    private JPanel bildepanel; 
    public JLabel skjerm;
    int w = 0;
    int h = 1;  

    /**
     * constructor
     * klassen.
     * @throws IOException 
     */

    public ImgurViz() throws IOException {
        super(); //Calls the superclass
        setupInterface(); //        
        fetchAndDisplayImages(); //     
    }

    //Empties the panel when a new jlabel is called
    public void emptyPanel(){   
        bildepanel.revalidate(); 
        bildepanel.removeAll();
        bildepanel.repaint();       
    }

    // Creates JButtons to change the sorting of the images
    public void knapper(){
        knappepanel = new JPanel(); // Knappepanel = button panel
        bildepanel = new JPanel();      // Imagepanel = image panel
        bildepanel.setLayout(null);
        this.getContentPane().setLayout(new BorderLayout());
        this.getContentPane().add(knappepanel,BorderLayout.NORTH);
        this.getContentPane().add(bildepanel,BorderLayout.CENTER);

        //knappepanel.setOpaque(false);

        // Knapp for HUE og SATURATION KNAPP = button
        HSbutton = new JButton ("Hue og Saturation");
        knappepanel.add(HSbutton);

        //Knapp for BRIGHTNESS og SATURARION
        BSbutton = new JButton ("Brightness og Saturation");
        knappepanel.add(BSbutton);

        // Knapp for BRIGHTNESS OG HUE
        BHbutton = new JButton ("Brightness og Hue");
        knappepanel.add(BHbutton);      

        // Metode for knapp for HUE og SATURATION
        HSbutton.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e) {            
                emptyPanel();   

                w = 0; 
                h = 1;          

                System.out.println("Hue: " + w + " Saturation: " + h);
            }       
        });

        // Metode for knapp for BRIGHTNESS og SATURATION
        BSbutton.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {

                w = 2; 
                h = 1;

                System.out.println("Brightness: " + w + " Saturation: " + h);
            }
        });

        // Metode for knapp for BRIGHTNESS OG HUE
        BHbutton.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e) {
                emptyPanel(); 

                w = 2; 
                h = 0;      
                System.out.println("Brightness: " + w + " Hue: " + h);
            }           
        });

        this.setContentPane(knappepanel);       
    }

    /**
     * Fetches images for an album on Imgur
     * 
     * @throws IOException
     */

    public void fetchAndDisplayImages() throws IOException {
        ImgUr imgUr = new ImgUr ("4ded93e63e96762");
        AlbumResponse response = imgUr.call(new AlbumRequest("RJBiQ"));
        List<ImageProperty> images = response.getImages();
        float[] bildedata = new float[3];
        int count = images.size();      

        for (int i = 0; i<count;i++){

            BufferedImage img = ImageIO.read(new URL(images.get(i).getLinks().getOriginal()));          
            BufferedImage thumb = ImageIO.read(new URL(images.get(i).getLinks().getSmallSquare())); 
            bildedata = pictureAnalyze (img);

            int width  = ((int)Toolkit.getDefaultToolkit().getScreenSize().getWidth())/2; // Henter ut bredden pÂ brukerens skjerm
            int height = ((int)Toolkit.getDefaultToolkit().getScreenSize().getHeight())/2; // Henter ut høyden pÂ brukerens skjerm
            int posW = (int)(bildedata [w] * width);
            int posH = (int)(bildedata [h] * height);

            skjerm = new JLabel(new ImageIcon(thumb));
            skjerm.setBounds(posW, posH, width, height);
            bildepanel.add(skjerm);
            this.getContentPane().add(skjerm);
            this.getContentPane().setLayout(null);          
            this.getContentPane().repaint();                
            this.setVisible(true);      

//          skjerm.addMouseListener(new MouseAdapter() {
//              @Override
//              public void mouseEntered(java.awt.event.MouseEvent evt) {
//                  //FAEN TA DEG!!
//              }
//          });
        }
    }

    // RGB to HSB Finds the RGB value of each image, transformes the values to HSB and finds the average 
    public float[] pictureAnalyze (BufferedImage img){
        float[] result = new float[3];          
        float h = 0f; 
        float s = 0f;
        float b = 0f; 
        for (int x = 0; x < img.getWidth(); x++){
            for (int y = 0; y < img.getHeight(); y++){
                int c = img.getRGB(x,y);        
                int red = (c >> 16) & 0xff;
                int green = (c >> 8) & 0xff;
                int blue = (c & 0xff);

                float[] hsb = Color.RGBtoHSB(red,green,blue, null);

                h += hsb[0];
                s += hsb[1];
                b += hsb[2];       
            }
        }

        h = h/(img.getWidth()*img.getHeight());
        s = s/(img.getWidth()*img.getHeight());
        b = b/(img.getWidth()*img.getHeight());
        result [0] = h;
        result [1] = s;
        result [2] = b;
        return result;
    }

    //      // Shannon entropi
    //      public static Double calculateShannonEntropy(List <ImageProperty> images) {         
    //            Map<String, Integer> map = new HashMap<String, Integer>();    
    //            
    //            // tel kvar instans av verdiane           
    //            for (String sequence : images) {          
    //              if (!map.containsKey(sequence)) {           
    //                map.put(sequence, 0);
    //          
    //              }           
    //              map.put(sequence, map.get(sequence) + 1);           
    //            }      
    //            
    //            //Kalkulerer entropien
    //          
    //            Double result = 0.0;          
    //            for (String sequence : map.keySet()) {            
    //              Double frequency = (double) map.get(sequence) / images.size();          
    //              result -= frequency * (Math.log(frequency) / Math.log(2));          
    //            }      
    //          
    //            return result;
    //          
    //          }

    /**

    private void setupInterface() {
        int width  = (int)Toolkit.getDefaultToolkit().getScreenSize().getWidth(); // Henter ut bredden pÂ brukerens skjerm
        int height = (int)Toolkit.getDefaultToolkit().getScreenSize().getHeight(); // Henter ut h¯yden pÂ brukerens skjerm
        this.setSize(width, height); // Setter st¯rrelsen pÂ vinduet til Â vÊre lik skjermens bredde og h¯yde
        this.setExtendedState(Frame.MAXIMIZED_BOTH); // Sier fra om at vinduet skal vÊre maksimert 
        this.setUndecorated(true); // setter fullscreen
        this.getContentPane().setBackground(Color.BLACK ); // Setter bakgrunnsfargen pÂ innholdspanelet (contentPane) til svart 
        knapper(); 
        this.setVisible(true); // Viser vinduet pÂ skjermen

    }

    public static void main(String[] args)  throws IOException { 
        ImgurViz viz = new ImgurViz(); // Oppretter et nytt ImgurViz-objekt. Dette medf¯rer at det nye objektets konstrukt¯r kj¯res

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:15:11.050

如 的 HSV 面板所示，一次只显示颜色空间的[三个维度](http://en.wikipedia.org/wiki/HSL_and_HSV)[`JColorChooser`](http://docs.oracle.com/javase/tutorial/uiswing/components/colorchooser.html)中的两个更容易。无论您的目标是什么，使用. 这些[示例](https://stackoverflow.com/search?q=%5Bjava%5D+user%3A230513+Color.getHSBColor)可能会提供一些见解或帮助您准备[sscce](http://sscce.org/)。[`Color.getHSBColor()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html#getHSBColor%28float,%20float,%20float%29)

# c# - 从子窗体更改文本框文本父级

> ID：14980412
> 
> 赞同：1
> 
> 时间：2013-02-20T12:56:29.950
> 
> 标签：c#, winforms

我的程序中有两种形式。我在他们两个都有一个文本框和一个按钮。当我单击 form1 中的按钮时，使用 form2 显示`showdialog();` 当我在 form2 中输入文本框并单击此表单中的按钮时，form2 关闭并且焦点位于 form1 上，并且我在 form2 中输入的文本被传输到 form1 上的文本框.

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:01:33.803

1.  在 form1 中保留对作为对话框显示的 form2 实例的引用
2.  在 form2 中公开一个公共属性，给出 form2 中文本框的内容
3.  当 form2 关闭时，下一行代码应该访问这个属性并使用它的值来填充 form1 中的文本框，

就像是：

```
Window form2 = new Form2();
form2.ShowDialog();
this.textBox1 = form2.TextBoxValue; 
```

在哪里`form2`定义了一个属性：

```
public string TextBoxValue {
  get { return textBox2.Text; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:03:35.267

如果您不关心安全性，最简单的方法是将form1 中的TextBox 声明为public，然后从form2 更改其文本属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:07:41.227

在 form2 中，您必须将文本框修饰符属性更改为 public。这将使设计器为文本框生成一个公共属性，以便您可以在任何地方访问它。

当 form2 关闭时，您只需执行以下操作：

```
myTextbox.Text = form2.textBox1.Text; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T13:23:54.957

试试这个：

（按顺序）在 Form1 上：

```
 private void button1_Click(object sender, EventArgs e)
{
    Form2 frm2 = new Form2();
    frm2.Showdialog();
    this.Hide();
} 
```

然后Form2：

```
 private void button1_Click(object sender, EventArgs e)
{
    Form2 frm2 = new Form2(textBox2.Text);
    frm2.Showdialog();
    this.Hide();
} 
```

然后表格1：

```
public partial class Form1 : Form
{
public string textBoxValue;

public Form1()
{
    InitializeComponent();
}

public Form1(string textBoxValue)
{
    InitializeComponent();
    this.textBoxValue = textBoxValue;
}

private void Form1_Load(object sender, EventArgs e)
{
     textBox1.Text = textBoxValue;
} 
```

# jquery - jquery - 内联日期选择器上的 beforeshow 和 beforeshowday

> ID：14980414
> 
> 赞同：3
> 
> 时间：2013-02-20T12:56:31.993
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我有以下代码在附加到输入的日期选择器上工作正常，但在与内联日期选择器一起使用时不运行 beforeshow 和 beforeshowday 部分。

我能做些什么来解决这个问题？

```
$('.mydate').datepicker({
        showWeek: true,
        firstDay: 1,
        dateFormat: 'yy, m, d',
        minDate: 0,
        maxDate: '+2Y',
        showOtherMonths: true,
        selectOtherMonths: true,
        numberOfMonths: 2,
        beforeShow: function(input, inst) {
            selectdatesElem = $(input).siblings("div").find("select.startdates");
            $(input).siblings("div").find("select.startdates").find("option").each( function() {
                  startDates.push($(this).val())
            });
            $(input).siblings("div").find("select.availdates").find("option").each( function() {
                  eventDates.push($(this).val())
            });
        },
        beforeShowDay: function(date) {
            for (var i = 0; i < eventDates.length; i++) {
                  if (date.getFullYear()+", "+date.getMonth()+", "+date.getDate() == eventDates[i]) {
                        return [false, 'eventDay'];
                  } 
            }
            for (var i = 0; i < startDates.length; i++) {
                  if (date.getFullYear()+", "+date.getMonth()+", "+date.getDate() == startDates[i]) {
                        return [true, 'eventDay'];
                  }
            }
            return [false, ''];
        }, 
        onSelect: function(dateText, input, inst) {
            var selectedDateParts = dateText.split(',');
            selectdatesElem.val(parseInt(selectedDateParts[0]) + ", " + (parseInt(selectedDateParts[1])-1) + ", " + parseInt(selectedDateParts[2])).change();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:41:56.473

我把它通过 JSLint 并返回了一些缺少的分号并且`var i`已经被声明（从第二个 for 循环中删除 var）。缺少分号的行：

```
startDates.push($(this).val())
eventDates.push($(this).val()) 
```

它还返回此行缺少基数参数。基数是值所在的基数（十进制、二进制、十六进制等）。如果您只想要十进制，则将 ,10 添加到 val() 和 parseInt() 函数的末尾，就像这样

```
selectdatesElem.val(parseInt(selectedDateParts[0], 10) + ", " + (parseInt(selectedDateParts[1], 10) - 1) + ", " + parseInt(selectedDateParts[2],10 ),10).change(); 
```

我怀疑这些更改会解决它，但值得一试。

我对其进行了更多研究，它将与 beforeShow 一起运行，但是当我添加 beforeShowDay 时，它不会显示。

我看了一会儿代码和 api 文档，听起来好像需要一个输入字段以及日期选择器。我看到您正在阅读选择元素，但我认为 beforeShow 缺少它需要的输入元素。

# c# - 在 C# 中使用 SqlBulkCopy 时舍入数字数据

> ID：14980419
> 
> 赞同：3
> 
> 时间：2013-02-20T12:56:41.920
> 
> 标签：c#, sql-server, oracle11g, sqlbulkcopy

我`SqlBulkCopy`用于将数据从 Oracle 11g 源导入 MS SQL Server 2012。但`NUMERIC`Oracle 中的一列包含 53682.0(~35times)1、263.9(~32times) 等值。Sql Server 中的目标列当前是一种`FLOAT`数据类型，目前我收到以下异常：

> *算术运算导致溢出。*

这是我的示例代码：

```
using (SqlConnection conn = new SqlConnection(destConnString))
        {
            conn.Open();
            try
            {
                using (OracleConnection connection = new OracleConnection(srcConnString))
                {
                    using (OracleCommand command = new OracleCommand(selectQuery, connection))
                    {
                        connection.Open();
                        using (OracleDataReader reader = command.ExecuteReader(CommandBehavior.Default))
                        {
                            using (SqlBulkCopy bulkCopy = new SqlBulkCopy(conn, SqlBulkCopyOptions.KeepIdentity, trans))
                            {
                                bulkCopy.DestinationTableName = tableName;
                                bulkCopy.BulkCopyTimeout = 0;
                                bulkCopy.WriteToServer(reader);
                            }
                        }
                    }
                }
                trans.Commit();
            }
            .... 
```

我正在尝试对这些数据进行四舍五入，但没有成功，我也无法更改 Oracle 表中的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:08:01.500

您不能只修改您的 Oracle SELECT 查询，例如截断有问题的数值吗？

# php - JSON解码中的阿拉伯字符

> ID：14980421
> 
> 赞同：19
> 
> 时间：2013-02-20T12:56:46.987
> 
> 标签：php, json

```
$test = json_encode('بسم الله');
echo $test; 
```

作为此代码的结果，输出是：`"\u0628\u0633\u0645 \u0627\u0644\u0644\u0647"`虽然它应该类似于“بسم الله”。阿拉伯字符在被 JSON 编码时被编码，而在 Youtube API 这不是这种情况： [http ://gdata.youtube.com/feeds/api/videos/RqMxTnTZeNE?v=2&alt=json](http://gdata.youtube.com/feeds/api/videos/RqMxTnTZeNE?v=2&alt=json)

您可以在 Youtube 上看到阿拉伯字符显示正确。我的错误可能是什么？

提示：我正在开发一个 API< 这个例子只是为了澄清。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-20T13:04:29.970

`"\u0628\u0633\u0645 \u0627\u0644\u0644\u0647"`并且`"بسم الله"`在 JSON 中是等价的。

PHP 只是默认使用 Unicode 转义而不是多字节字符的文字。

您可以使用[JSON_UNESCAPED_UNICODE](http://www.php.net/manual/en/json.constants.php)指定其他方式（前提是您使用的是 PHP 5.4 或更高版本）。

```
json_encode('بسم الله', JSON_UNESCAPED_UNICODE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:05:47.813

那是 UTF-8 字符串的正确 JSON 编码版本。无需更改，它代表正确的字符串。JSON 中的字符可以通过这种方式进行转义。

如果您愿意，JSON*可以直接表示 UTF-8 字符。*从 PHP 5.4 开始，您可以选择设置`JSON_UNESCAPED_UNICODE`标志以生成原始 UTF-8 字符串：

```
json_encode($string, JSON_UNESCAPED_UNICODE) 
```

但这只是一种偏好，没有必要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T13:06:31.547

两种格式都是有效且等效的[JSON](http://json.org/)字符串：

> ```
> char
>     any-Unicode-character-
>         except-"-or-\-or-
>         control-character
>     \"
>     \\
>     \/
>     \b
>     \f
>     \n
>     \r
>     \t
>     \u four-hex-digits 
> ```

如果您更喜欢未编码的版本，只需添加`JSON_UNESCAPED_UNICODE`标志：

```
<?php

$test = json_encode('بسم الله', JSON_UNESCAPED_UNICODE);
echo $test; 
```

此标志需要 PHP/5.4.0 或更高版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T13:37:08.260

好吧，如前所述，这并不重要，因为两个字符串是等价的。但是，您应该做的是确保在将编码字符串发送到输出之前对其进行解码。

```
echo json_decode($test); 
```

或者因为 JSON 很可能不仅仅包含一个字符串：

```
$obj['arabic'] = 'بسم الله';
$obj['latin'] = 'abcdef';
$obj['integer'] = 12345;

$test = json_encode($obj);

$testobject = json_decode($test);
echo $testobject['arabic']; 
```

# sql - 加入同一张表

> ID：14980423
> 
> 赞同：1
> 
> 时间：2013-02-20T12:56:50.510
> 
> 标签：sql, select, informix

嗨，我有表格徽章，其中包含列`facility`和`date`（其他列不重要）。我想要的`select count(*)`应该是这样的：

```
DATE       | FACILITY 4 COUNT | FACILITY 1 COUNT
12/12/2012 | 234              |  647 
```

我为 1 和 4 编写了两个单独的查询，`facility`但是如何将它加入一个查询；

```
SELECT
    date,
    COUNT(*)
    FROM      badge
    WHERE     facility = 3
    AND       xtype = 19
    AND       date BETWEEN 'some_date' AND 'some_date'
    GROUP BY  date 
```

另一个查询的不同之处仅在于设施的值。

**编辑：**它是informix 数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:02:01.637

```
SELECT date,
       SUM(case when facility = 1 then 1 else 0 end) "FACILITY 1 COUNT",
       SUM(case when facility = 4 then 1 else 0 end) "FACILITY 4 COUNT"
FROM      badge
WHERE     (facility = 1 OR facility = 4)
AND       xtype = 19
AND       date BETWEEN 'some_date' AND 'some_date'
GROUP BY  date 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T12:59:17.460

试试这个，

```
SELECT  date,
        SUM(CASE WHEN facility = 3 THEN 1 ELSE 0 END) `Facility 3 Count`,
        SUM(CASE WHEN facility = 1 THEN 1 ELSE 0 END) `Facility 1 Count`
FROM      badge
WHERE     xtype = 19 AND      
          date BETWEEN 'some_date' AND 'some_date'
GROUP     BY  date 
```

# linux - 如何从进程中获取root权限

> ID：14980425
> 
> 赞同：0
> 
> 时间：2013-02-20T12:57:01.577
> 
> 标签：linux, root, privileges

可以通过如下简单的代码获得root权限：

```
char *name[2];
name[0] = "/bin/bash";
name[1] = "-p";
name[2] = 0x0;

execve(name[0], name, 0x0); 
```

但是这个解决方案需要设置sticky bit chown root:root; chmod u+s。

问题是如何仅通过提供用户名和密码来获得 root 权限（通过进程和此进程，-因此进程向用户询问登录信息并使用此权限执行）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T10:30:35.983

通过直接向 su 实用程序提供根密码来解决问题。通过使用 fd_set 或管道和系统调用 forkpty 可以很容易地丰富它，它返回一个准备登录的 shell。

请查看我描述此问题并显示解决方案的帖子： [http ://www.andreypudov.com/2013/02/user-authorization-in-linux.html](http://www.andreypudov.com/2013/02/user-authorization-in-linux.html)

# iphone - 如何将带参数的块传递给方法

> ID：14980430
> 
> 赞同：0
> 
> 时间：2013-02-20T12:57:17.950
> 
> 标签：iphone, ios, facebook, objective-c-blocks

如何将 typedef void 传递给方法

我有一个 typedef

```
typedef void (^FBLoginHandler)(id <FaceBook>,bool,NSError *error); 
```

FBLoginHandler 测试处理程序；

```
^(id<FBLoginHandler>, bool, NSError *)error

[login log:@"AccessToken" handler:^(id<FBLoginHandler>, bool, NSError *)error]; 
```

谁能建议我如何将 typedef 值传递给方法

```
 [login log:@"AccessToken" handler:???]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:45:49.633

```
[login log:@"AccessToken" handler:^(id<FaceBook> object, bool trueOrFalse, NSError *error){
    // ... do whatever you'd like to do here.
}]; 
```

或者...

```
void ^(handlerBlock)(id<FaceBook>, bool, NSError *) = ^(id<FaceBook> object, bool trueOrFalse, NSError *error) {
    // ... do whatever you'd like to do here
};

[login log:@"AccessToken" handler:handlerBlock]; 
```

或者...

```
[login log:@"AccessToken" handler:nil]; 
```

# asp.net - 如何在 asp.net 4.0 中使用 global.asax 文件计算天数

> ID：14980431
> 
> 赞同：0
> 
> 时间：2013-02-20T12:57:22.460
> 
> 标签：asp.net, datetime, global-asax, days

[单击此处](http://www.sujitbhujbal.com/2012/12/how-to-count-website-visitors-in-aspnet.html) Global.asax.cs

```
 namespace WebApplication7
     {
    public class Global : System.Web.HttpApplication
      {
    private static int countdays=0;

    protected void Application_Start(object sender, EventArgs e)
    {
        countdays = 0;
    }

    protected void Session_Start(object sender, EventArgs e)
    {
        countdays += 1;
    }

    protected void Application_BeginRequest(object sender, EventArgs e)
    {

    }

    protected void Application_AuthenticateRequest(object sender, EventArgs e)
    {

    }

    protected void Application_Error(object sender, EventArgs e)
    {

    }

    protected void Session_End(object sender, EventArgs e)
    {
        countdays -= 1;
    }

    protected void Application_End(object sender, EventArgs e)
    {

    }
    public static int CountNo { get { return countdays; } }
  }
} 
```

全球.apsx

```
 <body>
  <form id="fromHitCounter" method="post" runat="server">
  Total number of days since the Web server started:
 <asp:label id="lblCount" runat="server"></asp:label><br />
 </form>
 </body> 
```

全局.aspx.cs

```
 private void Page_Load(object sender, System.EventArgs e)

        {

      int Countdays = HitCounters.Global.Countdays;//Hit counter does not exist  

      lblCount.Text = Countdays.ToString();

        } 
```

如何使用 global.asax 文件计算 asp.net 中的天数计数器，在 Global.aspx.cs iam 中获取错误命中计数器在当前上下文中不存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:01:47.483

我不会问为什么，我可能不会喜欢你给我的理由。但是，您没有在这里计算天数。您正在计算会话开始。

你真正想做的是这样的：

```
public class Global : System.Web.HttpApplication
{

    private static DateTime started;
    private static int days;

    protected void Application_Start(object sender, EventArgs e)
    {
        started = DateTime.UtcNow;
        days = 0;
    }

    protected void Session_Start(object sender, EventArgs e)
    {
        TimeSpan ts = DateTime.UtcNow - started;
        days = (int)ts.TotalDays;
    }

    ...

  }
} 
```

但是，这是假设会话事件触发并且您还忽略了应用程序可以并且确实被卸载的事实，您的应用程序可能甚至一天都不会保持加载状态。

您的链接指向计算网站访问次数，这与计算天数或获取网络服务器运行的时间不同。这也是一个非常糟糕的尝试，因为它没有考虑来自同一用户的重复访问等，并且在应用程序域卸载之间并不是真正持久的。

# java - Android登录并存储cookie来操作数据库

> ID：14980432
> 
> 赞同：1
> 
> 时间：2013-02-20T12:57:24.557
> 
> 标签：java, php, android, json

我是 Android 新手，所以如果我不清楚我正在开发一个操作 mysql 数据库（phpmyadmin）的 android 应用程序，那么我是个新手。它具有注册和登录类，将文本框的输入发送到我的 JSONPARSER.java 类，该类将它们标识为 POST 方法并将它们发送到我的服务器上的 API，该 API 反过来查询数据库。这部分有效，但是我想拥有它，这样当用户登录时，他们可以添加到数据库中，但我需要确定哪个用户正在查询数据库？

我该如何做到这一点？

谢谢

# asp.net - 已发布站点中包含的资源文件

> ID：14980448
> 
> 赞同：0
> 
> 时间：2013-02-20T12:58:16.603
> 
> 标签：asp.net, web-deployment

如何在发布 ASP.NET 站点时包含资源文件？在正常情况下，它不包括在内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:51:10.877

得到了解决方案。需要将我的网站转换为 Web 应用程序。对于我要发布的资源文件，执行以下操作：

将“构建操作”设置为内容。将“复制到输出目录”设置为始终复制。

# java - JFreeChart MultiPiePlot 更改标题字体颜色

> ID：14980451
> 
> 赞同：2
> 
> 时间：2013-02-20T12:58:19.557
> 
> 标签：java, colors, jfreechart, title

JFreechart 1.0.14 处理 MultiPiePlot。
数据集是一个`CategoryDataSet`定义子图标题文本的类别。

我需要更改每个子图的标题颜色。

我正在将背景更改为黑色，并且需要对比鲜明的标题颜色。我已经找到了如何改变几乎所有其他东西的颜色。

在下图中，子标题“ `Response Pending`”、“ `Resplan Pending`”和“ `Resolution Pending`”都需要更改颜色。

![带子标题的 MultiPiePlot](../Images/167c0424356e922f4e9e13ad0a0cb7f5.png)

我似乎无法访问对象以在任何地方设置油漆颜色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:38:19.903

你有没有尝试过：

```
chart1.getTitle().setPaint(Color.RED); 
```

char1 是您的其中一个图表的名称？

![在此处输入图像描述](../Images/e29e4125542a50c20bce2c2e1f6da151.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:34:15.280

感谢 GrahamA。以为我会为 MultipPiePlot 提供更多细节

对于 MultiPiePlot，您可以使用以下内容更改所有标题

```
// Get vars to control visual
p = (MultiplePiePlot) chart.getPlot();
JFreeChart subchart = p.getPieChart();
subchart.getTitle().setPaint(Color.red); 
```

获得主标题`chart.getTitle()`会改变顶部标题。

# java - 我可以验证 HTTP 请求的域名吗？

> ID：14980455
> 
> 赞同：1
> 
> 时间：2013-02-20T12:58:31.297
> 
> 标签：java, http, cookies

我有一个 Java Web 应用程序，它有一个入口点 URL，并且一个外部 Web 应用程序重定向到该 URL。我可以在服务器端使用 cookie 或其他方式检查请求是否来自特定域？

**编辑：** 我无法更改外部应用程序代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:01:17.033

我认为您想知道 HTTP Referer（“调用”您的页面的 URL）：

```
String referrer = request.getHeader("referer"); 
```

**编辑**

我忘记了，正如*gustafc*所说，HTTP 引荐来源网址是客户端控制的值，可以欺骗完全不同的东西，甚至被客户端删除，因此您无法确定您的 HTTP 引荐来源网址不是假值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T13:01:47.123

您可以检查[HTTP referer](http://en.wikipedia.org/wiki/HTTP_referer)，但它不可靠：它很容易伪造，并且有些人出于隐私原因选择禁用 referer。因此，虽然它可能在大多数情况下都有效，但不要依赖它来解决安全或其他基本问题。

尝试这样做的*真正*原因是什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T13:01:29.217

是的。您可以从请求对象中的方法`getRemoteHost()`或方法获取请求的来源。`getRemoteAddr()`

[http://docs.oracle.com/javaee/5/api/javax/servlet/ServletRequest.html#getRemoteHost()](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletRequest.html#getRemoteHost())

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T14:05:59.350

如果您只需要验证请求是否来自特定 IP（或 IP 范围），您可以在防火墙上配置一条规则来支持这一点（假设代理在防火墙内。

# extjs - 我应该为我的控制器定义一个别名吗？

> ID：14980459
> 
> 赞同：1
> 
> 时间：2013-02-20T12:58:35.227
> 
> 标签：extjs, extjs4, extjs4.1, extjs4.2

我通过在似乎不使用别名的应用程序实例上调用 getController 来获得所有控制器的实例。但是我发现了在一些没有设置别名的地方设置了别名的例子。

**那么是否建议为我的控制器定义一个别名，或者我可以/应该保留这个属性吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:34:59.250

好吧，你应该能够自己回答这个问题......

根据 ExtJS 中 MVC 项目的结构和调用控制器的方式，您永远不需要别名，并且该`getController()`方法不使用别名。所以你可以省去这些行。

但是，如果您喜欢它，您可以定义一个，我认为在您不需要它的情况下，我认为没有任何可以针对赞成和反对给出的建议。

# php - 如何将变量传递到while循环MySQLi

> ID：14980460
> 
> 赞同：-1
> 
> 时间：2013-02-20T12:58:51.083
> 
> 标签：php, mysqli

我有一个从 MySQL 中选择的简单函数：

```
function dbSelect($query) {
    $db = db(); // refers to a database connect function
    $result = mysqli_query($db, $query);

    while ($row = mysqli_fetch_array($result)) {
       echo $row['f_name'] . ' : ' . $row['s_name'] . '</br>';
    }
} 
```

如您所见，它接受 $query var，它是：

```
$query = "SELECT * FROM user"; // or whatever 
```

我想做的是通过这条线：

```
echo $row['f_name'] . ' : ' . $row['s_name'] . '</br>'; 
```

作为函数调用中的 arg，例如：

```
function dbSelect($query, $display) 
```

并且 $display 类似于（我会在 while 语句下回显）：

```
$display = $row['f_name'] . " : " . $row['s_name'] . "</br>"; 
```

上面的行会给出一个未定义的变量错误，我知道为什么。

我将如何将 $display 传递给函数或正确定义它？

附言。我知道没有任何错误检查，我只是想弄清楚这一点，稍后会添加。:-)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:04:54.517

有两种方法可以做到这一点。正确的方法是让这个函数只运行查询并返回结果。您可以制作另一个输出结果的函数。这样，您就可以清楚地分离代码中的逻辑。

但是，如果您知道您希望以这种方式完成，那么这样的事情应该可以工作：

```
function dbSelect($query, $format) {
    $db = db();
    $result = mysqli_query($db, $query);
    while ($row = mysqli_fetch_array($result)) 
    {
        echo preg_replace_callback("/\{\{\s*(\w+)\s*\}\}/", function($matches) use ($row) { $column = trim($matches[1]); return isset($row[$column]) ? $row[$column] : $matches[0]; }, $format);
    }
} 
```

论点可能类似于：

```
dbSelect("SELECT * FROM user", "{{ f_name }} {{ s_name }}"); 
```

您不能以传递它的方式传递它，因为`$row`调用函数时它不存在（因为它是在函数内部定义的）。此外，当调用函数时，您的变量将被评估*一次*，而不是每次在 while 循环中。

在任何人提出“建议”之前：*eval 不是一种选择。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:09:05.023

就我个人而言，我会将模板名称传递给函数，并将模板作为具有标准替换变量的 html 片段存储在某处

所以你可能有这样的东西（注意这行不通，盒子需要一些摆弄，但它的概念）

```
 define TEMPLATE_NAME = "<tr><td>%COL1%</td><td>%COL2</td></tr>";

    $colstospitout = array('COL1'=>'f_name','COL2'=>'s_name');

    function dbSelect($query,$reportcols,$templatename) {

    while ($row = mysqli_fetch_array($result)) 
          {
           $template = str_replace("%COL1%",$reportcols['COL1'],$templatename);
           $template = str_replace("%COL2%",$reportcols['COL2'],$templatename);
           echo $template;
          }

    }

dbSelect($inputquery,$colstospitout,TEMPLATE_NAME); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:34:27.363

试试这个，以保持从程序逻辑到程序输出的分离：

```
// some configuration file you include
$db = db(); // refers to a database connect function

// some common functions file
function dbSelect($query)
{
    global $db;
    $result = mysqli_query($db, $query);
    return $result;
}

// output script
$records = dbSelect('SELECT * FROM somewhere');
// loop until cannot fetch any more rows from the record set
while ($row = mysqli_fetch_array($records))
{
       echo $row['f_name'] . ' : ' . $row['s_name'] . '</br>';
} 
```

# python - 如何在 Pyramid 中使用 SQLAlchemy HSTORE？

> ID：14980472
> 
> 赞同：1
> 
> 时间：2013-02-20T12:59:35.117
> 
> 标签：python, sqlalchemy, pyramid, hstore

我有一个模型使用添加到 SQLAlchemy 0.8 的新 PostgreSQL HSTORE 支持：

```
class Gateway(Base):
    __tablename__ = 'gateway'
    id = Column(Integer, primary_key=True)
    access = Column(Mutable.as_mutable(HSTORE), nullable=False, unique=True) 
```

但是当我运行时`session.query(Gateway).all()`，会引发以下异常：

```
ValueError: Attribute 'access' does not accept objects of type <type 'dict'> 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:40:03.153

[SQLAlchemy 示例](http://docs.sqlalchemy.org/en/rel_0_8/dialects/postgresql.html#sqlalchemy.dialects.postgresql.HSTORE)显示了`Column`使用 a而`MutableDict`您正在使用`Mutable`. 这种差异与您看到的错误消息非常吻合。

# ruby-on-rails - 独角兽工人产生太多线程（内存泄漏）

> ID：14980477
> 
> 赞同：0
> 
> 时间：2013-02-20T12:59:59.767
> 
> 标签：ruby-on-rails, ruby, unicorn

我有运行由独角兽处理的 RoR 站点。独角兽主进程产生 10 个工作人员并很好地处理它们，但工作人员有时会开始在内部产生线程并且不杀死它们......这会导致内存泄漏和服务器故障。

我通过每 10 分钟重新启动 unicorn 的 cron 脚本解决了它，但它的解决方案非常糟糕。有任何想法吗？

屏幕证明： ![工人内存泄漏](../Images/f6ab208aed5b72fc4220db425bf24b33.png)

独角兽（4.6.1）配置文件：[https ://gist.github.com/907th/4995323](https://gist.github.com/907th/4995323)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:03:34.877

研究使用 Monit ( [http://mmoni.com/monit/](http://mmonit.com/monit/) ) 来监控 Unicorn 并对其进行检查。观看 Ryan Bates 关于该主题的精彩视频：* [http://railscasts.com/episodes/375-monit](http://railscasts.com/episodes/375-monit)

*需要订阅，但他要求的 9 美元非常值得。

# postgresql - 使用 Sphinx 作为 PostgreSQL 数据库中数据的搜索引擎有什么优势？

> ID：14980479
> 
> 赞同：0
> 
> 时间：2013-02-20T13:00:02.223
> 
> 标签：postgresql, search, sphinx

我喜欢使用 PostgreSQL 的内置文本搜索功能将我的数据库查询和搜索查询保存在一个地方的想法。

但是，如果我完全依赖 Postgres 的本地搜索工具，那么使用专用搜索引擎和索引器（尤其是 Sphinx）是否有优势？这些是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:49:02.227

目前 Sphinx 更快，因为它是一个专门的系统。

另一方面，PostgreSQL也在不断发展。看看来自 Oleg Bartunov 的[这条消息](http://www.postgresql.org/message-id/5075BF57.9010602@hathawaymix.org)，它宣布即将对 FTS 进行性能改进。这是他在布拉格最新的 PostgreSQL 会议上所做[的演讲。](http://wiki.postgresql.org/images/2/25/Full-text_search_in_PostgreSQL_in_milliseconds-extended-version.pdf)

只需查看并确定您的项目是否符合计划的交付条款，根据我发现的信息，这些更改将在 9.3 中可用，计划在即将到来的夏季“某个时候”。

# javascript - Ajax.BeginForm 中的两个提交按钮。OnSuccess中需要调用不同的js函数

> ID：14980483
> 
> 赞同：5
> 
> 时间：2013-02-20T13:00:18.567
> 
> 标签：javascript, asp.net-mvc-4

我的 MVC 页面上有一个 Ajax 表单，有两个单独的提交按钮......

```
@using (Ajax.BeginForm("Save", "Company", new AjaxOptions() {
    HttpMethod="Post", OnSuccess="closeForm" 
}, new {@id = "companyEditForm"})) {
    ....some edit fields......

    <input type="submit" value="Save & Next"/>
    <input type="submit" value="Save" />
} 
```

使用“保存并下一步”按钮提交表单后，我想调用不同的 js 函数。因此，如果用户单击“保存”按钮，它应该提交表单然后调用“closeForm”javascript 函数。如果用户单击“保存并下一步”按钮，它应该提交表单，然后调用“nextForm”javascript 函数。有没有一种简单的方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T13:03:19.243

> 有没有一种简单的方法可以实现这一目标？

不，但是您可以让控制器操作传递在结果中单击的按钮。这可以作为 Json 属性（如果您要返回 JSON）来完成，也可以是自定义响应 HTTP 标头。

然后在您的成功回调（只能是一个）中，您可以检索此值以了解单击了哪个按钮并采取相应措施。

因此，首先为您的提交按钮命名，以便您知道点击了哪个按钮：

```
@using (Ajax.BeginForm("Save", "Company", new AjaxOptions() {
    HttpMethod="Post", OnSuccess="onSuccess" 
}, new { id = "companyEditForm" })) {
    ....some edit fields......

    <button type="submit" name="btn" value="save_next">Save &amp; Next</button>
    <button type="submit" name="btn" value="save">Save</button>
} 
```

然后在你的控制器动作中

```
[HttpPost]
public ActionResult Save(MyViewModel model)
{
    Response.AppendHeader("X-Button", Request["btn"]);

    ... your usual processing
} 
```

最后在你的`onSucecss`回调中：

```
function onSuccess(data, status, xhr) {
    function onSuccess(data, status, xhr) {
        var btn = xhr.getResponseHeader('X-Button');
        if (btn == 'save_next') {
            // The "Save & Next" button was clicked
        } else if (btn == 'save') {
            // The "Save" button was clicked
        } else {
            // The user didn't submit the form by using the mouse and
            // clicking on a button, he simply pressed Enter while 
            // inside some text field or you have some other portion of
            // javascript which triggered the form submission without pressing
            // on any submit button
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:39:47.593

您可以从 Ajax.BeginForm() 切换到 Html.BeginForm()，然后使用 JQuery 提交您的表单。

```
<script type="text/javascript">
$('#save').on('click', function () {
    var form = $('form');

    $.ajax({
        url: form.attr('action'),
        type: 'post',
        data: form.serialize(),
        success: function (result) {

            // call another function
        }
    });

    return false;
});

$('#saveAndEdit').on('click', function() {

    $.ajax({
        url: form.attr('action'),
        type: 'post',
        data: form.serialize(),
        success: function (result) {

            // call another function
        }
    });

    return false;
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-07T09:51:34.853

你也可以这样写：

```
@using (Ajax.BeginForm("Save", "Company", new AjaxOptions() {
    HttpMethod="Post", OnSuccess="closeForm" 
}, new { id = "companyEditForm" })) {

    <input type="submit" onclick="showNextForm = true;">Save & Next</button>
    <input type="submit" onclick="showNextForm = false;">Save</button>
} 
```

...

```
var showNextForm = false;

function closeForm(data) {
    if(showNextForm) {
        nextForm();
    }
    else {
        // do your stuff
    }
} 
```

# perl - linux 上的 perl GUI 使用什么模块？

> ID：14980484
> 
> 赞同：0
> 
> 时间：2013-02-20T13:00:21.070
> 
> 标签：perl, user-interface

我想用 perl 构建 GUI 应用程序。

但是，选择太多，我真的不知道有什么优点/缺点。

这个关于 perlmonks 的页面[http://perlmonks.org/?node_id=108708](http://perlmonks.org/?node_id=108708)已经有 10 多年的历史了，所以这并不是很有帮助。

我的目标是使用 Linux 操作系统的人，所以我不必关心互操作性。

# alias - 使用别名将 shell 中的变量放入 ack-grep

> ID：14980487
> 
> 赞同：0
> 
> 时间：2013-02-20T13:00:38.040
> 
> 标签：alias, zsh, ack

我想在 .zshrc 中使用 ack-grep 别名。这是我的别名现在的样子：

```
alias 'ack'='ack-grep -C -i -G --match' 
```

但我需要的是从中输入字符串：

```
% ack string1 string2 
```

里面

```
alias 'ack'='ack-grep -C -i -G string1 --match string2' 
```

这个怎么做？

# **更新**

这是有效的代码：

```
ack() { 
    case $# in
    1) args="$1";;
    2) args="$1 -G $2";;
    *) args="$@";;
    esac
    eval "ack-grep -iC $args"
} 
```

就我而言，我需要`eval`使用多个变量。

# **更新 2**

没有安全问题的更新代码：

```
ack () {
    if (( $# == 2 )); then
        ack-grep -iC "$1" -G "$2"
    elif (( $# == 1 )); then
        ack-grep -iC "$1"
    else
        echo 'Sorry, function works only for one and two params. In other case use ack-grep. Reread .zshrc'
    fi
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:12:05.543

```
Use a function:

ack() { ack-grep -C -i -G $1 --match $2; } 
```

您可能希望使其更加健壮。就像是：

```
ack() { 
    case $# in
    1) args="-G $1";;
    2) args="-G $1 --match $2";;
    *) args="$@";;
    esac
    ack-grep -C -i "$args"
} 
```

别名不能为这类事情提供足够的功能，几乎总是应该使用函数来代替。（实际上，您可以从前面省略“几乎”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T00:32:05.087

`eval`很少需要。

```
ack () { 
    if (( $# > 2 )); then
        ack-grep -iC "$@"
    else
        ack-grep -iC "$1" ${2:+-G "$2"}
    fi
} 
```

更新：这是您的第一个解决方案的确切版本，没有`eval`.

```
ack() { 
    case $# in
    1) ack-grep -iC "$1";;
    2) ack-grep -iC "$1" -G "$2";;
    *) ack-grep -iC "$@";;
    esac
} 
```

# c# - 检查坐标是否在区域内

> ID：14980490
> 
> 赞同：1
> 
> 时间：2013-02-20T13:00:41.043
> 
> 标签：c#, coordinates, latitude-longitude, area

我遇到了房地产面临的问题。

我有一个真实世界的地址，我正在将其转换为地球坐标（例如“伦敦眼”到“-0.119543;51.503324”）。

我还有一个要搜索的周长或区域（例如“10”是“10 公里”）。

现在我得到了一堆坐标（在地球周围完全随机），我想检查当前坐标是否在伦敦眼坐标的 10 公里范围内。

有什么解决方案，或者我什至面临[xy 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:12:21.977

您可以使用 Haversine 公式计算两点之间的距离：

[http://www.stormconsultancy.co.uk/blog/development/code-snippets/the-haversine-formula-in-c-and-sql/](http://www.stormconsultancy.co.uk/blog/development/code-snippets/the-haversine-formula-in-c-and-sql/)

[基于与给定点的距离的最近 GPS 坐标](https://stackoverflow.com/questions/5368049/nearest-gps-coordinate-based-on-distance-from-a-given-point)

但是对于速度，我认为您需要计算最大/最小经度和纬度值（即伦敦眼周围的正方形），因为如果有很多点要检查，计算起来会快得多。然后对这个小点子集（在您的正方形内）使用Haversine 公式来找到 10 公里内的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:07:43.543

该问题有一个众所周知的解决方案。[Haversine_formula](http://en.wikipedia.org/wiki/Haversine_formula)

我认为您也可以搜索相同的 C# 代码。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:04:49.927

看起来这可以帮助你： http: [//www.doogal.co.uk/dotnetcoords.php](http://www.doogal.co.uk/dotnetcoords.php)

它基于[http://www.jstott.me.uk/jcoord](http://www.jstott.me.uk/jcoord)，它允许计算点之间的距离。不过不要相信我的话，也没有使用过。

# twitter-bootstrap - Bootstrap 和 Boilerplate IE9 演示页面损坏？

> ID：14980493
> 
> 赞同：0
> 
> 时间：2013-02-20T13:00:49.447
> 
> 标签：twitter-bootstrap, html5boilerplate

好吧，我试图从[http://www.initializr.com/](http://www.initializr.com/)测试引导程序和样板文件 ，他们的模板中没有演示作品在我的 IE9 中工作吗？它不应该工作吗？

还是我需要做额外的修改？

Win7 IE9 标准（甚至重置）截图：

[https://www.dropbox.com/s/pg9611rxe4hfbeo/initilizr_try.jpg](https://www.dropbox.com/s/pg9611rxe4hfbeo/initilizr_try.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:07:10.723

检查屏幕截图，它在我的电脑上工作正常。

![IE9截图完美运行](../Images/9b04af930f2751c262cb1741c7516f4f.png)

![选择 IE9 而不是 IE9 兼容性 - 检查屏幕截图](../Images/2c4fbd69926d5efdb5bbcc89a9c3d13e.png)

# jquery - 无法使用 Jquery mobile 解析 json

> ID：14980495
> 
> 赞同：1
> 
> 时间：2013-02-20T13:00:56.077
> 
> 标签：jquery, json, jquery-mobile

实际上我想通过 jQuery mobile 解析一个 json 数组，但是我被卡住的地方没有被搜索很多，请帮助我。

我的json格式

```
{
"messagedetails":
    [{
    "msgData":"DEAR MEMBER\\\"S TODAY\\\"S KITTY WINNER IS N0 55.HOPE YOU ALL ENJOYED THE EVENING. THANK YOU\r\n MAHAVIRD (PLEASE KEEP SLIPS CAREFULLY)",
    "requestNosSms":64,
    "requestUserid":"16459",
    "spamReason":
    {
        "userApprove":"0",
        "senderApprove":"0",
        "templateMatch":80,
        "templateId":"6586",
        "spamKeywords":["winner"],
        "maxNosLimit":"0"
    },
    "id":"5124c1c446923e6c4100005f",
    "userName":"MAHAVIR DIAMOND",
    "date":"2013-02-20 17:59:57"
    },

     {
    "msgData":"DEAR MEMBER\\\"S TODAY\\\"S KITTY WINNER IS N0 55.HOPE YOU ALL ENJOYED THE EVENING. THANK YOU\r\n MAHAVIRD (PLEASE KEEP SLIPS CAREFULLY)",
    "requestNosSms":64,
    "requestUserid":"16459",
    "spamReason":
    {
        "userApprove":"0",
        "senderApprove":"0",
        "templateMatch":80,
        "templateId":"6586",
        "spamKeywords":["winner"],
        "maxNosLimit":"0"
    },
    "id":"5124c1c446923e6c4100005f",
    "userName":"MAHAVIR DIAMOND",
    "date":"2013-02-20 17:59:57"
    }]
} 
```

我正在使用这样的代码

```
var test =null;                                     
                                        $.each(data, function(i,messages) {
                                            test = test + "<h1>"+messages][2]+"</h1>";

});

$("#results").html(test); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:03:05.920

在 json 中你不能在值中使用引号**"**你必须对值进行编码

输入

```
 array('<foo>',"'bar'",'"baz"','&blong&', "\xc3\xa9"); 
```

通过某种编码输出

```
 Normal: ["<foo>","'bar'","\"baz\"","&blong&","\u00e9"]
Tags: ["\u003Cfoo\u003E","'bar'","\"baz\"","&blong&","\u00e9"]
Apos: ["<foo>","\u0027bar\u0027","\"baz\"","&blong&","\u00e9"]
Quot: ["<foo>","'bar'","\u0022baz\u0022","&blong&","\u00e9"]
Amp: ["<foo>","'bar'","\"baz\"","\u0026blong\u0026","\u00e9"]
Unicode: ["<foo>","'bar'","\"baz\"","&blong&","é"]
All: ["\u003Cfoo\u003E","\u0027bar\u0027","\u0022baz\u0022","\u0026blong\u0026","é"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:15:25.827

您的 JSON 是有效的。

只需尝试使用此代码：

```
var test =null;                                     
$.each(data.messagedetails, function(i,messages) {
test = test + "<h1>" + messages.msgData +"</h1>";
});
$("#results").html(test); 
```

# powershell-2.0 - Powershell：有人可以帮助我了解我需要做些什么来防止这个错误吗？

> ID：14980515
> 
> 赞同：0
> 
> 时间：2013-02-20T13:01:54.253
> 
> 标签：powershell-2.0

我有一个正在运行的脚本，我在其中声明了我正在使用的路径，然后将我的源文件定义为该路径中的所有子项。

```
$htmPath = "c:\users\x\desktop\cgc\ht"
$srcfiles = Get-ChildItem $htmPath -filter "*.htm*" 
```

我过去曾成功运行过此程序，但今天早上我开始收到以下错误：

```
You must provide a value expression on the right-hand side of the '*' operator.
At C:\users\x\desktop\cgc\CGC002.PS1:63 char:46
+ $srcfiles = Get-ChildItem $htmPath -filter "* <<<< .htm*"
    + CategoryInfo          : ParserError: (:) [], ParseException
    + FullyQualifiedErrorId : ExpectedValueExpression 
```

对我来说，似乎抛出了这个错误，因为脚本将我的通配符解释为乘法，并且需要右侧的值来完成操作。我是否正确解释它？如果确实如此，我如何确保我的通配符被解释为通配符？

我*确实*找到[了这个链接](http://powershell.com/cs/forums/t/9036.aspx)，但这是一个足够不同的场景，有足够多的代码，我不确定它是否适用。但是，我确实发现线程中的这条评论很有趣：

**尝试将 *, 放在属性列表的开头而不是结尾。我认为这只是变得混乱。主要是你的格式。**

...所以我退出了 PS，热启动，通常的你尝试关闭并重新打开混淆重置器，仍然是同样的错误。

也许我在看不到的地方有错字？

或者，如果我完全错过了对错误的解释……请教我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:44:13.483

最终成为我的文本编辑器右侧的一个双引号。颜色编码语法检查帮助我验证这是一个不匹配的报价问题......考虑向右滚动以查找所需`"`的时间比它应该有的要多得多。掌心。

感谢@Richard 提出这个建议。

# playframework - PlayFramework2 将列表传递给 main.scala

> ID：14980517
> 
> 赞同：0
> 
> 时间：2013-02-20T13:02:01.507
> 
> 标签：playframework, playframework-2.1, scala-template

我将 Play2.1 用于我的一个项目。

我正在尝试在其中创建一个动态菜单，`main.scala.html`以便它可以在所有子页面中扩展。

但是我应该如何传递`List`给`main.scala.html` ..

我试过这样的子页面

```
@(menu: List[Rights])
...
@for((l, index) <- menu.zipWithIndex){
    <span class="data-@index">@l.rightName</span>
} 
```

..那行得通我可以看到列出的权利，但我只想在..中显示这些权利。`main.scala.html`请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:40:49.393

你有`@(title: String)(content: Html)`在主要的开头。

你试过类似的东西`@(title: String, menu:List[Rights])(content: Html)`吗？

您甚至应该能够添加默认参数，例如`@(title: String, menu:List[Rights] = Nil)(content: Html)`

# java - 多服务器-客户端 SCP 文件传输

> ID：14980521
> 
> 赞同：1
> 
> 时间：2013-02-20T13:02:13.573
> 
> 标签：java, networking, file-io, scp

我正在使用服务器将文件发送到使用 SCP 程序发送文件的多个客户端。在上传文件的过程中，中间显示以下异常。但是服务器和客户端都在ping。（有时它上传成功，但有时它显示异常）

SCP 程序:JSch: SCP 一个 Java 文件

不知道什么时候出现这个异常

```
Exception in thread "Exec thread 117.97.213.116"    java.lang.NullPointerException
        at com.jcraft.jsch.ChannelSession.run(Unknown Source)
        at java.lang.Thread.run(thread.java) 
```

请建议我解决问题。

问候普拉卡什

# java - 从 JAVA 内部强制重新加载 JAVA WAR

> ID：14980525
> 
> 赞同：1
> 
> 时间：2013-02-20T13:02:14.990
> 
> 标签：java, war

有没有办法从 JAVA WAR 内部以编程方式要求 App Server 重新加载 WAR。我需要每天重新启动我的网络应用程序，并希望我可以从应用程序本身内部强制重新加载。又名 System.forceReload() 或类似的东西....有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:07:30.360

您能否“触摸”诸如 web.xml 之类的文件来欺骗容器启动重新加载？非常hacky，我知道:-)

对于更强大的解决方案，我必须承认，我会考虑使用外部 cron 脚本，可能会强制停止/启动容器本身。例如，就修复任何内存泄漏而言，这可能会“更好”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:08:51.527

从应用程序内部做这样的事情不是一个好主意。

更好的方法是在外部进行。您可以安排可以为您做同样事情的脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:28:11.157

它可能因您的容器而异，但我没有在我使用过的容器中看到这种功能。

尽管我可以理解您的需求，但我建议更好的方法是尽可能反弹容器本身，也许使用 cron 作业。

如果您使用的是 JBoss，您可能可以使用[Twiddle 实用程序做一些事情](http://docs.jboss.org/jbossas/jboss4guide/r1/html/ch2.chapter.html)

JMX / MBeans 也可以是一种选择——但同样，所有这些都在实际应用程序之外。

# web-services - NoClassDefFoundError：com.ibm.ws.wstx.handler.WSATGenerator

> ID：14980526
> 
> 赞同：2
> 
> 时间：2013-02-20T13:02:24.190
> 
> 标签：web-services, websphere, axis2, classloader, noclassdeffounderror

我正在使用 Web 客户端进行**Web 服务**。客户端存根是使用**Axis 2**生成的。一切都部署在**WebSphere 7.0**上。

当部署在我的开发人员机器上时（在**IBM RAD Eclipse**中运行的 websphere 实例），我已连接到远程 Web 服务。但是，在测试机器上，会抛出错误：

```
java.lang.NoClassDefFoundError: com.ibm.ws.wstx.handler.WSATGenerator (initialization failure)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:140)
    at com.ibm.ws.wstx.WSTXClientTCMImpl.handleInbound(WSTXClientTCMImpl.java:100)
    at com.ibm.ws.wstx.WSTXClientTCMImpl.cleanupContext(WSTXClientTCMImpl.java:81)
    at org.apache.axis2.util.ThreadContextMigratorUtil.performContextCleanup(ThreadContextMigratorUtil.java:192)
    at org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.postExecute(AxisInvocationController.java:657)
    at org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.execute(AxisInvocationController.java:589)
    at org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.doInvoke(AxisInvocationController.java:130)
    at org.apache.axis2.jaxws.core.controller.impl.InvocationControllerImpl.invoke(InvocationControllerImpl.java:93)
    at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invokeSEIMethod(JAXWSProxyHandler.java:364)
    at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invoke(JAXWSProxyHandler.java:185)
    at $Proxy94.getList(Unknown Source) 
```

部署在那里的**耳朵**是我在我的开发机器上制作的，所以它是完全相同的代码。所以我想这是一些配置问题。但是，我不知道配置的哪一部分可以对此负责。

所以，我有一个问题，这是什么，它应该`WSATGenerator`在哪个**jar中可用？**它是 WebSphere 上的标准库，还是必须手动配置？哪些配置差异可能导致在测试服务器上抛出该错误而我没有？

我正在运行 Windows 7，测试机器在 Unix 上。两台机器都是64位的。

**- 编辑 -**

之前`NoClassDefFoundError`，有 throws `ExceptionInInitializerError`：

```
java.lang.ExceptionInInitializerError
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:222)
    at com.ibm.ws.wstx.handler.WSATGenerator.<clinit>(WSATGenerator.java:127)
    at java.lang.J9VMInternals.initializeImpl(Native Method)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)
    at com.ibm.ws.wstx.WSTXClientTCMImpl.migrateThreadToContext(WSTXClientTCMImpl.java:61)
    at org.apache.axis2.util.ThreadContextMigratorUtil.performMigrationToContext(ThreadContextMigratorUtil.java:163)
    at org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.preExecute(AxisInvocationController.java:608)
    at org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.execute(AxisInvocationController.java:570)
    ... 82 more
Caused by: 
java.lang.ClassCastException: com.systinet.jaxrpc.rpc.ServiceFactoryImpl incompatible with com.ibm.wsspi.webservices.rpc.ServiceFactory
    at com.ibm.ws.Transaction.wstx.WSATServices$1.run(WSATServices.java:83)
    at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:63)
    at com.ibm.ws.Transaction.wstx.WSATServices.<clinit>(WSATServices.java:74)
    at java.lang.J9VMInternals.initializeImpl(Native Method)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)
    ... 89 more 
```

# perl - Perl 访问散列/散列引用数据结构中的元素

> ID：14980529
> 
> 赞同：2
> 
> 时间：2013-02-20T13:02:26.897
> 
> 标签：perl, hash, www-mechanize, hash-of-hashes, hashref

我有一个问题希望你能帮忙，因为我是哈希和哈希引用的新手？

我有以下数据结构：

```
$VAR1 = {
    'http://www.superuser.com/' => {
        'difference' => {
            'http://www.superuser.com/questions' => '10735',
            'http://www.superuser.com/faq' => '13095'
        },
        'equal' => {
            'http://www.superuser.com/ ' => '20892'
        }
    },
    'http://www.stackoverflow.com/' => {
        'difference' => {
            'http://www.stackoverflow.com/faq' => '13015',
            'http://www.stackoverflow.com/questions' => '10506'
        },
        'equal' => {
            'http://www.stackoverflow.com/ ' => '33362'
        }
    } 
```

如果我想访问密钥中的所有 URL，`'difference'`然后我可以对 URL 执行一些其他操作，那么访问这些元素的正确或首选方法是什么？

例如，我最终会得到以下 URL，然后我可以在`foreach`循环中执行以下操作：

```
http://www.superuser.com/questions
http://www.superuser.com/faq
http://www.stackoverflow.com/faq
http://www.stackoverflow.com/questions 
```

- - - 编辑 - - -

访问上述数据结构下方元素的代码：

```
my @urls;
foreach my $key1 ( keys( %{$VAR1} ) ) {
    print( "$key1\n" );
    foreach my $key2 ( keys( %{$VAR1->{$key1}} ) ) {
        print( "\t$key2\n" );
    foreach my $key3 ( keys( %{$VAR1->{$key1}{$key2}} ) ) {
        print( "\t\t$key3\n" );
    push @urls, keys %{$VAR1->{$key1}{$key2}{$key3}};
    }
  }
}
print "@urls\n"; 
```

使用上面的代码为什么会出现以下错误？

`Can't use string ("13238") as a HASH ref while "strict refs" in use at ....`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T13:07:52.217

这并不难，只需从变量中的每个键中取出第二级键即可：

```
my @urls;
for my $key (keys %$VAR1) {
    push @urls, keys %{$VAR1->{$key}{'difference'}};
} 
```

如果您正在为取消引用而苦苦挣扎，请记住哈希或数组中的所有值只能是标量值。在多级哈希或数组中，级别只是堆叠在彼此之上的单个哈希/数组。

例如，您可以这样做：

```
for my $value (values %$VAR1) {
    push @urls, keys %{$value->{'difference'}};
} 
```

或者

```
for my $name (keys %$VAR1) {
    my $site = $VAR1->{$name};
    push @urls, keys %{$site->{'difference'}};
} 
```

..直接在值（对哈希的引用）或临时变量上采用路由，通过键表示值。[*perldoc perldata*](http://perldoc.perl.org/perldata.html)中还有更多要阅读的内容。

# java - 日期属性在类java的方法中不起作用

> ID：14980531
> 
> 赞同：0
> 
> 时间：2013-02-20T13:02:29.357
> 
> 标签：java, date, attributes

这是类客户的属性。

```
public class Customer {
private String customer_username;
private String customer_password;
private String name;
private String surname;
private Date dateOfBirth;
private String address;
private String postcode;
private String email;
(...) 
```

这是一种保存到 txt 文件的方法，它的 Date dateOfBirth 有错误，我不知道要包含什么才能使其工作

```
public void saveToFile(){
    FileWriter out = null;
    try{
        out = new FileWriter("CustomerDetails.txt", true);
        out.append("Customer Username:   ");
        out.append(customer_username);
        out.append(System.getProperty("line.separator"));
        out.append("Customer Password:   ");
        out.append(customer_password);
        out.append(System.getProperty("line.separator"));
        out.append("Name:   ");
        out.append(name);
        out.append(System.getProperty("line.separator"));
        out.append("Surname:   ");
        out.append(surname);         
        out.append(System.getProperty("line.separator"));
        **out.append("Date of Birth:   ");**
        **out.append(dateOfBirth);**
        out.append(System.getProperty("line.separator"));
        out.append("Address:   ");
        out.append(address);
        out.append(System.getProperty("line.separator"));
        out.append("Postcode:   ");
        out.append(postcode);
        out.append(System.getProperty("line.separator"));
        out.append("Email:   ");
        out.append(email);
        out.append(System.getProperty("line.separator"));
        out.append(System.getProperty("line.separator"));
        out.append("**********************************");
        out.append(System.getProperty("line.separator"));
        out.append(System.getProperty("line.separator"));
        out.close();
    }catch (IOException ioe){  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:05:18.793

try

```
out.append(dateOfBirth.toString()); 
```

If you don't like the format, you can use a `SimpleDateFormat` to change it. (see the [Documentation](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:06:49.667

Your dateOfBirth is an object of type Date, you can not print it in a standart syso.

I you want to print the date use: `dateOfBirth.toString());`

# android - Sencha Touch App 在多点触控/Android 时冻结

> ID：14980533
> 
> 赞同：1
> 
> 时间：2013-02-20T13:02:36.550
> 
> 标签：android, extjs, touch, freeze, pinch

我构建了一个 sencha touch (2.1.0) 应用程序并在我的三星 Galaxy S2 (Android 4.0.3) 上对其进行了测试。一旦我使用 snecha cmd 的本机构建命令和另一个我用 phonegap 包装它。当我用两根手指同时触摸屏幕时，我两次都卡住了。我无法再按按钮或滚动。

有没有人解决这个问题？

我还阅读了 Sencha 论坛（[http://www.sencha.com/forum/showthread.php?249581-Multi-touch-and-phonegap](http://www.sencha.com/forum/showthread.php?249581-Multi-touch-and-phonegap)）中的帖子，但这对我不起作用或者我正在做某事错误的。

任何帮助都是不言而喻的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T10:19:50.323

我最近遇到了这个问题，并访问了您提到的 Sencha 论坛链接，并在我的代码中实现了它，实现了以下目标。
1.与修复合并的应用程序将永远不会冻结同时点击。
2\. 在您之前同时点击两个或更多点之后，您将不得不再次点击屏幕上的某个位置。

注意：这个问题只能在 android 4.0.x 和 Sencha 2.1 上重现。

**非常感谢 Sencha 论坛的 TROELS**
**在您的 app.js 中，将 if 条件放在您的 Ext.application 之外，如下所示**

```
 Ext.application({
    name:xyz
    requires:[abc]
    //other stuffs
    });

    if(Ext.os.is.Android && Ext.os.version.equals(4.0)) {

        Ext.define('app.overrides.TouchGesture', {
            override: 'Ext.event.publisher.TouchGesture',

            reset: function(e){
                if(Ext.os.version.equals(4.0) && this.currentTouchesCount > 0){
                    e.changedTouches = Ext.Object.getValues(this.currentTouches);
                    this.onTouchEnd(e);
                }
            }
        });

            window.orgPinchEndMethod = Ext.event.recognizer.Pinch.prototype.end;
            Ext.define('app.overrides.Pinch', {
            override: 'Ext.event.recognizer.Pinch',

            end: function(e){
            var wasTracking = this.isTracking,
            result = window.orgPinchEndMethod.apply(this, arguments);
            if(wasTracking){
                this._resetDetection(e);
            }
            return result;
        },

            _resetDetection: function(e){
                var tg = Ext.event.Dispatcher.getInstance().getPublishers().touchGesture;
                setTimeout(function(){
                    tg.reset(e);
                }, 0);
            }
           });

     } 
```

# java - 如何使用 Geotools 编写 GML 解析器？

> ID：14980535
> 
> 赞同：0
> 
> 时间：2013-02-20T13:02:42.217
> 
> 标签：java, geotools, gml-geographic-markup-lan

我使用 geotools 8.4 为 OS Mastermap 中的 GML 文件编写了一个解析器。有一部分我仍然有问题。xsd的这个片段：

```
<complexType name="RoadLinkType">
    <complexContent>
        <extension base="osgb:AbstractFeatureType">
            <sequence>
                <element name="polyline" type="gml:GeometryPropertyType"/>
                <element name="directedNode" type="osgb:directedNodeAssociationType" minOccurs="2" maxOccurs="2"/>
            </sequence>
        </extension>
    </complexContent>
</complexType> 
```

gml 文件中的部分：

```
<osgb:RoadLink fid='osgb4000000023204016'>
    <osgb:polyline>
        <gml:LineString srsName='osgb:BNG'>
            <gml:coordinates>516609.000,257678.000 516615.000,257733.000 516618.000,257786.000</gml:coordinates>
        </gml:LineString>
    </osgb:polyline>
    <osgb:directedNode orientation='-' xlink:href='#osgb4000000027916595'/>
    <osgb:directedNode orientation='+' gradeSeparation='1' xlink:href='#osgb4000000028203009'/>
</osgb:RoadLink> 
```

它被解析得几乎正确，即折线是正确的（我得到一个类 com.vividsolutions.jts.geom.LineString），但我只得到一个（而不是两个）directedNode。

我的代码：

```
GML gml = new GML(Version.GML3);
CRSAuthorityFactory crsFac = ReferencingFactoryFinder.getCRSAuthorityFactory("EPSG", null);
CoordinateReferenceSystem osgbCrs = crsFac.createCoordinateReferenceSystem("EPSG:27700");
gml.setCoordinateReferenceSystem(osgbCrs);
SimpleFeatureIterator iter = gml.decodeFeatureIterator(in);
while (iter.hasNext())
{
    SimpleFeature feature = iter.next();
    System.out.println("id: " + feature.getID());
    System.out.println("polyline: " + feature.getAttribute("polyline"));
    Object dnode = feature.getAttribute("directedNode");
    System.out.println("directedNode: '" + dnode + "'\t" + dnode.getClass());
} 
```

和输出：

```
id: osgb4000000023204016
polyline: LINESTRING (516609 257678, 516615 257733, 516618 257786)
directedNode: '{orientation=-, href=#osgb4000000027916595}' class java.util.HashMap 
```

我究竟做错了什么？为什么我不同时得到两个directedNode？如何绑定到真正的 Java 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-06T14:00:40.710

在你正在调用的循环中`Object dnode = feature.getAttribute("directNode");`。如[`SimpleFeature`](http://docs.geotools.org/latest/javadocs/org/opengis/feature/simple/SimpleFeature.html#getAttribute%28java.lang.String%29)的文档中所述，该调用将仅返回一个节点，即列表中的第一个或最后一个节点，文档没有说明。如果要检索所有节点，则应调用[`getAttributes()`](http://docs.geotools.org/latest/javadocs/org/opengis/feature/simple/SimpleFeature.html#getAttributes%28%29). 虽然您需要自己检查名称，但它会解决您的问题。

虽然已经过去了很长一段时间，但它可能仍然与读者相关！

# ios - iOS 中的 Google 驱动器集成在调用插入时出错

> ID：14980536
> 
> 赞同：3
> 
> 时间：2013-02-20T13:02:42.553
> 
> 标签：ios, objective-c, macos, google-drive-api

我正在一个应用程序中工作并尝试添加 Google API 以使用 Google 驱动器，用户可以在其中存储/共享我的应用程序文件。我找到了[谷歌驱动器教程的好教程](https://developers.google.com/drive/examples/objectivec)我下载了示例代码，我昨天下载了代码，它运行良好，文件按预期存储，今天我正在检查，每次我收到错误消息。请找到控制台消息

> 发生错误：Error Domain=com.google.GTLJSONRPCErrorDomain Code=400“操作无法完成。（类型不受支持的内容：application/json-rpc; charset=utf-8）”UserInfo=0x75b11f0 {error=Unsupported内容类型：application/json-rpc；charset=utf-8, GTLStructuredError=GTLErrorObject 0x75a3f90: {message:"Unsupported content with type: application/json-rpc; charset=utf-8" code:400 data:[1]}, NSLocalizedFailureReason=(Unsupported content with type:应用程序/json-rpc；字符集=utf-8)}

有人可以建议我将 Google 驱动器集成到 iOS 应用程序中的替代方法吗？

如果这种情况发生在示例代码中，那么 Google API for iOS 如何可靠地集成到我们的应用程序中。

**注意：**我创建了 kClientSecret 和 kClientId 也是为了使用 Google 提供的 DrEdit 示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:38:20.550

Google Drive 服务的最新更改要求您在上传文件时指定不同于“application/json-rpc”的 mime 类型。使用 ObjectiveC SDK 时默认使用这种 mime 类型，因此需要指定一个。

要使 SDK 附带的示例正常工作，请打开 DriveWindowController.m 并在“newFile.title = filename;”下的“uploadFileAtPath:”方法中 添加“newFile.mimeType = @”image/png“;”。将“image/png”更改为您正在上传的文件的 MIME 类型。

```
GTLDriveFile *newFile = [GTLDriveFile object];
newFile.title = filename;
newFile.mimeType = @"image/png"; 
```

编辑：谷歌服务器似乎也存在临时问题

# php - 使用 php simple_html_dom.php 解析 html 时出错

> ID：14980537
> 
> 赞同：0
> 
> 时间：2013-02-20T13:02:45.953
> 
> 标签：php, html, parsing, simple-html-dom

我是 php 新手，`simple_html_dom.php` 我正在尝试解析一个小的 html 页面。但我遇到了一个错误。
`Fatal error: Call to a member function find() on a non-object in C:\xampp\htdocs\result\do.php on line 8`

我的 php 代码在这里：
`

```
$html = new simple_html_dom();
$html->load_file('C:\xampp\htdocs\result\www.html');
$tableData = array();
$table = $html->find('table');      
foreach($table->find('tr') as $row) {
    $rowData = array();
    foreach($row->find('td.text') as $cell) {
        $rowData[] = $cell->innertext;
    }       
    $tableData[] = $rowData;
}
echo "Result :<br/>";
foreach($tableData as $test)
    echo "-".$test[0]."-".$test[1]."-".$test[2]."-".$test[3]."-".$test[4]."<br/>"; 
```

?>`
我的 html 页面在这里（www.html）：

```
<table>
<tr>
    <td width=250>Subject</td>
    <td width=60 align=center>External </td>
    <td width=60 align=center>Internal</td>
    <td align=center width=60>Total</td>
    <td align=center width=60>Result</td>
</tr>
<tr>
    <td width=250><i>Analog Communication (06EC53)</i></td>
    <td width=60 align=center>0</td>
    <td width=60 align=center>17</td>
    <td width=60 align=center>17</td>
    <td width=60 align=center><b>A</b>
</td> 
```

我想知道为什么会出现此错误以及如何解决此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:07:13.567

您是否尝试过添加 html 和 body 标签？我相信图书馆需要它。

它应该是`<html><body> .... </body></html>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:15:27.393

这个错误意味着你试图调用`find()`一个空的东西，可能是因为那个东西是另一个调用的结果，`find()`实际上没有找到任何东西。这里可能的罪魁祸首是因为在继续尝试使用结果之前，`$table`您从不费心检查实际成功。`$html->find('table')`

# asp.net-web-api - 使用 OAuth 和单页应用程序实现 Web API

> ID：14980538
> 
> 赞同：4
> 
> 时间：2013-02-20T13:02:48.830
> 
> 标签：asp.net-web-api, oauth-2.0, single-page-application

我们正在开发一个 API 和一个单页应用程序（这是它未来更多可能的消费者之一）。

我们已经开始使用 Web API，并且基本上实现了一个非常类似于 John Papa 在其关于复数视图的课程中制作的系统，名为“使用 HTML5、ASP.NET Web API、Knockout 和 jQuery 构建单页应用程序 (SPA)”。

我们现在需要在这个应用程序中实现身份验证和用户管理，并且需要尽快找到简单的方法来实现这一点，因为我们很着急。

我们意识到 ASP.NET 更新中包含的 SPA 模板具有与我们的需求非常相似的功能，但我们想知道在现有代码中实现类似功能的最佳方法是什么。

正如您所想，我们是新手开发人员。

是否可以使用包管理器安装一些包，瞧，一个简单的成员资格和 OAuth 身份验证选项很容易获得？

我们的用例是，我们需要根据角色保护 API 上的一些资源，并且应该能够使用用户名和密码登录，还可以使用 Facebook、google 或 twitter 帐户登录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:41:11.523

在此处找到有关该主题的有趣讨论：[https](https://vimeo.com/43603474) : //vimeo.com/43603474，名为 Dominick Baier - 保护 ASP.NET Web API。

**概要**：Microsoft 用于编写 RESTful Web 服务和 Web API 的新框架被称为 ASP.NET Web API 非常恰当。顾名思义，这项技术是 ASP.NET 的一部分，也继承了其著名的安全架构。但除此之外，它还支持许多新的扩展点和 IIS 之外的灵活托管基础架构。有许多方法可以在 Web API 中进行身份验证和授权 - 从 Windows 到用户名和密码，再到基于令牌的身份验证以及介于两者之间的所有内容。本演讲探讨了各种选项，并特别关注声明、SAML、OAuth2、简单 Web 令牌和委托等技术。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-04T00:17:27.433

我们最终选择了 SPA 模板，对 API 进行身份验证（单独的 MVC 部分）。然后 API 会生成一个唯一的令牌，并使用 url 参数中的令牌将用户重定向到前端。

然后前端需要在每个后续请求中发送此令牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:05:48.477

看看[这里](https://github.com/thinktecture/Thinktecture.IdentityServer.v2)- 由安全专家完成的身份服务器。这就是你在一个包中所需要的。

就 OAuth 而言，您需要使用客户端 Web 应用程序流，访问令牌会立即发给客户端并且可以使用。

# c# - 在 Windows 应用程序 GridView 中显示外键数据

> ID：14980540
> 
> 赞同：0
> 
> 时间：2013-02-20T13:02:52.673
> 
> 标签：c#, .net, datagridview

我有两张桌子

```
'Item Catagory' with fields

CatagoryId 
```

和

```
CatagoryName 
```

和`Items`

带字段

```
ItemId 
```

和

```
CatagoryId 
```

现在`Item Form`我想`Item`在 A 中显示数据`DataGridView`

我想在 GridView 列中`CatogoryName`从表中显示`ItemCatogory`

目前我无法做到这一点，任何人都可以在这方面帮助我吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:16:32.770

您与 gridview 绑定的查询应该是这样的。

```
SELECT Items.ItemId, ItemCatogory.CatogoryName FROM Items JOIN ItemCatogory USING(CatagoryId) 
```

这是执行此操作的示例代码：

```
using System.Data;
using System.Data.SqlClient; 
```

然后

```
SqlDataAdapter da;
DataSet ds = new DataSet();
SqlCommand cmd = new SqlCommand();
static SqlConnection oc = new SqlConnection(@"Data Source=xxxx;Network Library=DBMSSOCN;Initial Catalog=xxxx;User Id=xxxx;Password=xxxx;");
cmd.CommandText = "SELECT Items.ItemId, ItemCatogory.CatogoryName FROM Items JOIN ItemCatogory USING(CatagoryId)";

oc.Open();
cmd.Connection = oc;
da = new SqlDataAdapter(cmd);
da.Fill(ds);
cmd.ExecuteNonQuery();

GridView1.DataSource = ds;

GridView1.DataBind();

oc.Close(); 
```

# c++ - 在过渡到 C++11 期间管理外部库（例如 boost）

> ID：14980544
> 
> 赞同：18
> 
> 时间：2013-02-20T13:03:09.897
> 
> 标签：c++, boost, c++11

我想将我当前的项目移动到 C++11。代码全部使用 clang++ -std=c++0x 编译。这是容易的部分:-)。困难的部分是处理外部库。不能依赖将自己的 C++11 对象与未使用 c++11 编译的外部库链接（参见[http://gcc.gnu.org/wiki/Cxx11AbiCompatibility](http://gcc.gnu.org/wiki/Cxx11AbiCompatibility)）。例如，Boost 肯定需要重新构建（[Why can't clang with libc++ in c++0x mode link this boost::program_options example?](https://stackoverflow.com/questions/8454329/why-cant-clang-with-libc-in-c0x-mode-link-this-boostprogram-options-examp)）。我有我使用的所有外部库的源代码，所以我可以（有些痛苦）理论上用 C++11 重新构建这些库。但是，这仍然给我留下了一些问题：

**在混合 C++03/C++11 环境中开发：**我有一些使用 C++03 的旧项目需要偶尔维护。当然，我希望将这些与现有版本的外部库链接起来。但是对于我当前的（和新的）项目，我想链接我重新构建的 C++11 版本的库。我该如何组织我的开发环境（目前是 Ubuntu 12.04 和 Mac OS X 10.7）来应对这个问题？

我假设许多开发人员都会面临这个问题。它不会消失，但我还没有找到推荐和普遍认可的解决方案。

**部署：**目前，我部署到云中的 Ubuntu 12.04 LTS 服务器。经验导致人们（在可能的情况下）依赖于 linux 发行版中可用的标准软件包（例如 libboost）。如果我将当前项目迁移到 c++11，我的理解是我将不得不构建我自己使用的外部库的版本。我的猜测是，在某些时候这会改变，它们将是具有 C++11 兼容性的库包的“标准”版本。有谁知道什么时候会发生这种情况？并且大概这也需要对上述问题的标准解决方案——在同一平台上同时存在 C++03 库和 C++11 库。

我希望我错过了一些基本的东西，以便这些感知到的问题在一阵适当的信息中消失！我是否试图过早迁移到 C++11？

更新（2013-09-11）：macports 的相关讨论：[https ://lists.macosforge.org/pipermail/macports-users/2013-September/033383.html](https://lists.macosforge.org/pipermail/macports-users/2013-September/033383.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:04:35.377

您应该使用您的配置工具链（例如 autotools）来“正确地”为您的目标部署配置您的构建。您的配置测试应检查与 ABI 兼容的 C++11 二进制文件，并指示链接器在检测到时首先使用它们。如果不是，*可选择*失败或回退到 C++03 构建。

至于安装在单独的并行目录树中的 C++11 第 3 部分库，这不是绝对必要的。库版本控制已经存在了很长时间，它允许您将不同的版本并排放置在系统上或您想要的任何位置，再次基于配置。

这可能看起来很混乱，但配置工具链旨在处理这些混乱。

# java - 我们如何序列化单例？我想我们不能

> ID：14980547
> 
> 赞同：4
> 
> 时间：2013-02-20T13:03:10.790
> 
> 标签：java

我发现在 stackoverflow.com 中运行了许多线程，用于使 SingleTon 对象可序列化。专家们也在提供序列化 Singleton 对象的方法。

在我看来，即使我们实现了 Serializable 接口，我们也无法序列化单例对象，
因为 SingleTon 引用变量在同一个类中是静态的。
并且序列化 api 说我们不能在文件中序列化或写入静态引用的状态。
而且我们也不能保存瞬态变量的状态。
而序列化过程（实际写入过程）静态和瞬态变量被忽略。
如果我误解了，请提供您宝贵的意见。如果我误解了，有人可以用代码示例帮助序列化 Singleton 对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:06:28.903

我认为您混淆了单例的实现方式和对象的序列化方式。

虽然经常用于实现单例的静态字段确实不会作为序列化实例的一部分进行序列化，但实例本身绝对可以序列化。您需要做的就是将其反序列化版本设置回静态字段，您需要在代码中手动执行此操作。

PS请注意，我并不是说序列化（甚至实现）单例一定是一个好主意，我只是说它可以完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:05:28.450

是的，静态引用没有序列化。这并不意味着您不能获取静态引用（单例实例）的值并选择对其进行序列化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-29T07:35:55.513

单例可以序列化，这里是如何做到这一点的代码：

```
 import java.io.Serializable;

public class MySingleton implements Serializable {

    private MySingleton(String name) {
        this.name = name;
    }

    private static MySingleton mySingleton;

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public static MySingleton getInstance(String name) {
        if(mySingleton == null) {
            System.out.println("in if...");
            mySingleton = new MySingleton(name);
        }

        return mySingleton;
    }
} 
```

这是“main”方法，它获取上面的 Singleton 类的实例，对其进行序列化和反序列化：

```
 public static void main (String[] args) {

        MySingleton m = MySingleton.getInstance("Akshay");

        try {
            ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("D://temp.ser"));
            oos.writeObject(m);

            ObjectInputStream ois = new ObjectInputStream(new FileInputStream("D://temp.ser"));
            MySingleton m2 = (MySingleton) ois.readObject();
            System.out.println(m2.getName());
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }

    } 
```

输出是： -

> 在如果...
> 
> 阿克谢

谢谢。

# python - Django-storages S3：cname 域？

> ID：14980549
> 
> 赞同：1
> 
> 时间：2013-02-20T13:03:15.300
> 
> 标签：python, amazon-s3

有没有办法将 CNAME 域与 Django-storages 的 S3 后端一起使用？[此处建议的](https://bitbucket.org/david/django-storages/issue/48/allow-for-domain-cnames-to-s3)`AWS_S3_CUSTOM_DOMAIN` 设置不生效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:21:08.853

`AWS_S3_CUSTOM_DOMAIN`仅适用于`s3boto`后端。

# c - TCP客户端服务器使用epoll（EPOLLOUT | EPOLLET），EPOLLOUT事件只触发一次？

> ID：14980559
> 
> 赞同：0
> 
> 时间：2013-02-20T13:03:40.183
> 
> 标签：c

epoll TCP 与 EPOLLOUT | 即使我在收到第一个事件后发送数据，EPOLLET 也会收到一次事件并超时。

而在 UDP 中，epoll 在发送新数据后不断收到 EPOLLOUT 事件。

你能解释一下这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:08:09.347

EPOLLET 是边沿触发模式，这意味着它只会通知您状态转换。在这种情况下，它会在文件描述符从*不可*写变为可写时通知您。使其不可写的唯一方法是填充传出缓冲区。所以你只需要继续发送直到你得到EAGAIN，然后你会等待通知。

# c# - Linq 删除 Telerik 数据网格行

> ID：14980560
> 
> 赞同：0
> 
> 时间：2013-02-20T13:04:01.910
> 
> 标签：c#, asp.net, linq, telerik, telerik-grid

我正在`asp.net 3.5`使用`c#`. 我正在获取`dataset`包含 name 字段的记录`IsDeleted`。现在对于这个字段，如果它设置为`true`然后我想删除整行的文本。

例如：我正在使用以下代码制作`Capital Case`字段文本：`Alert``linq`

```
ds.Tables[0].AsEnumerable().ToList().ForEach(i => i["Alert"] = System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.ToTitleCase(i["Alert"].ToString())); 
```

这样的事情是可能的`to strikeout the entire row's text?`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:14:59.467

显然`TextInfo`没有任何方法可以进行这种修改，因为它仅应用于 HTML。

但是，您可以将 HTML 添加`text-decoration`到每个单元格。试试这个：

```
ds.Tables[0].AsEnumerable().ToList()
          .Where(i=>i["IsDeleted"].ToString().Equals("True"))
          .ForEach(i => 
          {
              i["Alert"] = "<span style='text-decoration:line-through;'>" + 
                           i["Alert"].ToString() +
                           "</span>";
              i["Name"] = "<span style='text-decoration:line-through;'>" + 
                           i["Name"].ToString() +
                           "</span>";
              i["Date"] = "<span style='text-decoration:line-through;'>" + 
                           i["Date"].ToString() +
                           "</span>";
          }); 
```

# plsql - 如何在 PLSQL 中测试异常

> ID：14980562
> 
> 赞同：0
> 
> 时间：2013-02-20T13:04:11.147
> 
> 标签：plsql

我正在使用 plsql，并且我有一些包含过程和函数的包，并且一些方法包含异常。

我必须编写一些单元测试来测试方法中的异常。

你能告诉我我该怎么做吗？

这可能吗？

感谢您的时间！

BR，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:54:51.480

如果你真的想测试一个异常......只需在你的程序中使用 RAISE(exception) 并确保当你运行测试时，它会命中这个 raise 语句；

# php - htaccess 重写 url 并检查 404

> ID：14980563
> 
> 赞同：0
> 
> 时间：2013-02-20T13:04:14.227
> 
> 标签：php, .htaccess, mod-rewrite, redirect, url-rewriting

我有一家网店，想使用 htaccess 缩短链接，有 3 种 url 情况：

```
shop.com/shop/18 (number) - products.php?categoryid=$1
shop.com/shop/18/page-2 (number)/(page+number) - products.php?categoryid=$1&page=$2
shop.com/shop/18/9877 (number)/(number) - description?categoryid=$1&productid=$2 
```

**我的尝试**

```
RewriteRule ^shop/?$                        shop.php
RewriteRule ^shop/(.*)/([0-9]+)/?$          description.php?categoryid=$1&productid=$2
RewriteRule ^shop/(.*)/page-(.*)/?$         products.php?categoryid=$1&page=$2
RewriteRule ^shop/(.*)/?$                   products.php?categoryid=$1 
```

用我的尝试 - 1（有效），2（有效），3（无效）

1.  我怎样才能重写网址呢？

2.  如果没有这样数量的类别或这样的产品（猜测用 php 和 mysql 检查然后重定向），我如何重定向到 404 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:25:42.670

有很多方法可以解决这个问题；

*   全部在 htaccess 中（因多个深度而变得混乱）
*   结合 htaccess 和服务器端代码

最好的方法是根据商店的编码方式适合您的方法。我个人认为在服务器端代码中处理它更好，它简化了 htaccess 文件，并且在验证数据、如何处理发送的内容、发送到哪里以及发送到那里时如何处理它方面为您提供了更多控制权.

例如，在我的 htaccess 文件中；

```
<IfModule mod_rewrite.c>
Options +FollowSymlinks
RewriteEngine on
#
# Do not apply rewrite rules for non required areas 
RewriteCond %{REQUEST_URI} "/hidden-areas/" [OR]
RewriteCond %{REQUEST_URI} "/other-areas/"
RewriteRule (.*) $1 [L]

# Do Not apply if a specific file or folder exists
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# The rules on how to rewrite the urls  
RewriteRule (.*) /index.php?url=$1 [QSA,L]
</IfModule> 
```

基本上，简而言之，我不会为某些文件夹重写任何内容，我会直接转发它们。这是为了停止对外部脚本的调用，或者可以毫无问题地访问额外添加的系统。

然后，我将整个 url 作为字符串转发到我的索引页面，并处理使用 PHP 产生的内容，下面是一个示例。

```
// collect the passed url
$url = $_GET['url'];
// split the url into parts
$url_parts = explode('/', $url);
/*
* start sorting what is what in the url
*/
// count how many parts there are
$url_parts_count = count($url_parts);
// determine the class/module
$class = $url_parts[0]; // generally the class/method/module depending on your system, thgough could be a category so run some checks
// determine the last part in the array
$last_url_part = ($url_parts_count - 1);
// set the last part of the url to be used
$slug = $url_parts[$last_url_part]; // generally the slug and will be empty if theres a trailing slash
etc etc etc 
```

这只是一个总结，我做的更多，因为这是从我写的一个 CMS 中摘录的，但如果你希望自己动手，它应该会给你一个很好的起点。当然，如有必要，我很乐意进一步详细说明。

当然，需要注意的是，如果您使用的是现成的系统，他们应该已经为您提供了此代码；）

我根据您更新的问题在下面添加了一些内容，如果您仍然打算按照自己的方式行事，这将有所帮助:)

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine on
  RewriteBase /
  #
  # Do not apply rewrite rules for non required areas 
    RewriteCond %{REQUEST_URI} "/hidden-areas/" [OR]
    RewriteCond %{REQUEST_URI} "/other-areas/"
    RewriteRule (.*) $1 [L]

  # Do Not apply if a specific file or folder exists
  # RewriteCond %{REQUEST_FILENAME} !-f
  # RewriteCond %{REQUEST_FILENAME} !-d
  # The rules on how to rewrite the urls

  RewriteRule ^([a-zA-Z0-9_-]+)$ /index.php?slug=$1 [QSA,L]  
  RewriteRule ^([a-zA-Z0-9_-]+)/$ /index.php?type=$1 [QSA,L]  
  RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ /index.php?type=$1&slug=$2 [QSA,L]  
  RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ /index.php?type=$1&cat=$2 [QSA,L]
  RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ /index.php?type=$1&cat=$2&slug=$3 [QSA,L] 
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:51:29.160

谢谢，结束了

```
RewriteRule ^shop$                             shop.php [L]
RewriteRule ^shop/([0-9]+)$                    products.php?categoryid=$1 [L]
RewriteRule ^shop/([0-9]+)/(page-[0-9]+)$      products.php?categoryid=$1&page=$2 [L]
RewriteRule ^shop/([0-9]+)/([0-9]+)$           description.php?categoryid=$1&productid=$2 [L] 
```

# java - 尝试连接到蓝牙 android 时应用程序崩溃

> ID：14980566
> 
> 赞同：0
> 
> 时间：2013-02-20T13:04:17.170
> 
> 标签：java, android, eclipse, bluetooth

我正在尝试在我的手机和蓝牙设备之间建立蓝牙连接，但应用程序不断崩溃。通过评论，我发现错误出在 openBT() 函数中。谁能帮帮我？

```
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.OutputStream;
 import java.util.Set;
 import java.util.UUID;
 import android.app.Activity;
 import android.bluetooth.BluetoothAdapter;
 import android.bluetooth.BluetoothDevice;
 import android.bluetooth.BluetoothSocket;
 import android.content.BroadcastReceiver;
 import android.content.Context;
 import android.content.Intent;
 import android.content.IntentFilter;
 import android.os.Bundle;
 import android.view.View;
 import android.widget.Button;
 import android.widget.TextView;

 public class PageOne extends Activity {

TextView myLabel;
TextView deviceFound;
Button openButton,closeButton;
BluetoothAdapter mBluetoothAdapter;
BluetoothDevice mmDevice;
BluetoothSocket mmSocket;
OutputStream mmOutputStream;
InputStream mmInputStream;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.pageone);
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    setUp();
    openButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            if (openButton.getText().equals("Enable")) {
                findBT();
            }

            if(openButton.getText().equals("Start Connection")){
                System.out.println("here");

                try{
                    openBT();
                }catch (IOException e){e.printStackTrace();};
            }
        }
    });

    closeButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            closeBT();
            System.out.println("here too");
        }
    });

}
private void setUp() {
    openButton = (Button) findViewById(R.id.button1);
    myLabel = (TextView) findViewById(R.id.textView1);
    closeButton = (Button) findViewById(R.id.button2);
    deviceFound = (TextView) findViewById(R.id.textView2);
    setButtonText();

    BroadcastReceiver receiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            setButtonText();

        }
    };

    IntentFilter filter = new IntentFilter (BluetoothAdapter.ACTION_STATE_CHANGED);
    registerReceiver (receiver, filter);
}   

private void setButtonText() {

    closeButton.setText("Disable bluetooth");
    if (mBluetoothAdapter.isEnabled()) {
        openButton.setText("Start Connection");
        myLabel.setText("Bluetooth is enabled");
    } else {
        openButton.setText("Enable");
        myLabel.setText("Bluetooth is disabled");
    }

}

private void findBT(){

    if(mBluetoothAdapter == null)
    {
        myLabel.setText("No bluetooth adapter available");
    }

    if (!mBluetoothAdapter.isEnabled()) {
        Intent discoverableIntent = new
        Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
        discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
        startActivity(discoverableIntent);

    } 

    Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
    if(pairedDevices.size() > 0)
    {
        for(BluetoothDevice device : pairedDevices)
        {
            if(device.getName().equals("Hauwa")) 
            {
                mmDevice = device;
                break;
            }
        }
    }
    deviceFound.setText("Bluetooth Device Found");

}

private void closeBT(){
    if (mBluetoothAdapter.isEnabled()) {
        mBluetoothAdapter.disable();
        deviceFound.setText("bvnbvnvb");
    }
}

void openBT() throws IOException{

    final UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805f9b34fb"); 
    mmSocket = mmDevice.createRfcommSocketToServiceRecord(uuid);        
    mmSocket.connect();
    mmOutputStream = mmSocket.getOutputStream();
    mmInputStream = mmSocket.getInputStream();

}

 } 
```

这是logcat错误

```
 01-07 02:55:23.189: W/dalvikvm(11382): threadid=1: thread exiting with uncaught exception (group=0x401f0560)
     01-07 02:55:23.189: E/AndroidRuntime(11382): FATAL EXCEPTION: main
     01-07 02:55:23.189: E/AndroidRuntime(11382): java.lang.NullPointerException
     01-07 02:55:23.189: E/AndroidRuntime(11382):   at com.example.BluetoothExample.PageOne.openBT(PageOne.java:147)
     01-07 02:55:23.189: E/AndroidRuntime(11382):   at       com.example.BluetoothExample.PageOne$1.onClick(PageOne.java:51)
     01-07 02:55:23.189: E/AndroidRuntime(11382):   at android.view.View.performClick(View.java:2579)
     01-07 02:55:23.189: E/AndroidRuntime(11382):   at         android.view.View$PerformClick.run(View.java:9246)
     01-07 02:55:23.189: E/AndroidRuntime(11382):   at android.os.Handler.handleCallback(Handler.java:587)
     01-07 02:55:23.189: E/AndroidRuntime(11382):   at android.os.Handler.dispatchMessage(Handler.java:92)
     01-07 02:55:23.189: E/AndroidRuntime(11382):   at android.os.Looper.loop(Looper.java:130)
     01-07 02:55:23.189: E/AndroidRuntime(11382):   at android.app.ActivityThread.main(ActivityThread.java:3735)
     01-07 02:55:23.189: E/AndroidRuntime(11382):   at java.lang.reflect.Method.invokeNative(Native Method)
     01-07 02:55:23.189: E/AndroidRuntime(11382):   at java.lang.reflect.Method.invoke(Method.java:507)
     01-07 02:55:23.189: E/AndroidRuntime(11382):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:904)
     01-07 02:55:23.189: E/AndroidRuntime(11382):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:662)
     01-07 02:55:23.189: E/AndroidRuntime(11382):   at dalvik.system.NativeStart.main(Native Method)
     01-07 02:55:23.199: E/AndroidRuntime(11382): [Blue Error Handler] Make Debugging Report file for main
     01-07 02:55:23.199: E/AndroidRuntime(11382): java.lang.NullPointerException
     01-07 02:55:23.199: E/AndroidRuntime(11382):   at com.example.BluetoothExample.PageOne.openBT(PageOne.java:147)
     01-07 02:55:23.199: E/AndroidRuntime(11382):   at       com.example.BluetoothExample.PageOne$1.onClick(PageOne.java:51)
     01-07 02:55:23.199: E/AndroidRuntime(11382):   at android.view.View.performClick(View.java:2579)
     01-07 02:55:23.199: E/AndroidRuntime(11382):   at android.view.View$PerformClick.run(View.java:9246)
     01-07 02:55:23.199: E/AndroidRuntime(11382):   at android.os.Handler.handleCallback(Handler.java:587)
     01-07 02:55:23.199: E/AndroidRuntime(11382):   at android.os.Handler.dispatchMessage(Handler.java:92)
     01-07 02:55:23.199: E/AndroidRuntime(11382):   at android.os.Looper.loop(Looper.java:130)
     01-07 02:55:23.199: E/AndroidRuntime(11382):   at android.app.ActivityThread.main(ActivityThread.java:3735)
     01-07 02:55:23.199: E/AndroidRuntime(11382):   at java.lang.reflect.Method.invokeNative(Native Method)
     01-07 02:55:23.199: E/AndroidRuntime(11382):   at java.lang.reflect.Method.invoke(Method.java:507)
     01-07 02:55:23.199: E/AndroidRuntime(11382):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:904)
     01-07 02:55:23.199: E/AndroidRuntime(11382):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:662)
     01-07 02:55:23.199: E/AndroidRuntime(11382):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:19:30.937

你确定你`mmDevice`没有空吗？你确定你设置了 mmDevice`findBT()`吗？

```
Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
if(pairedDevices.size() > 0)
{
    for(BluetoothDevice device : pairedDevices)
    {
        if(device.getName().equals("Hauwa")) 
        {
            mmDevice = device;
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-09T00:59:56.463

```
Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
String tmpS;
String targetS = "Hauwa";

if(pairedDevices.size() > 0)
{
for(BluetoothDevice device : pairedDevices)
{
    tmpS = device.getName() + "           ";
    tmpS = tmpS.substring(0,targetS.length());
    if(tmpS.equals(targetS)) 
    {
        mmDevice = device;
        break;
    }
} 
```

您需要防止设备名称为空。即使您自己的设备名称不为空，代码也可以读取附近其他为空的 BLE 设备。您还需要防止子字符串和等于函数的溢出，

# c# - 如何从正则表达式中获取匹配的字符串？[C＃]

> ID：14980568
> 
> 赞同：2
> 
> 时间：2013-02-20T13:04:34.427
> 
> 标签：c#, .net, regex, winforms

我有以下代码：

```
private void button_borrow_Click(object sender, EventArgs e)
    {
        Regex filter = new Regex(@"[0-9]*");
        String items = "";
        var selectedItems = checkedListBox_bookview.CheckedItems;
        foreach (var item in selectedItems)
        {

        }
        MessageBox.Show(items.ToString() + " Were selected: " + selectedItems.Count);
    } 
```

我想从中获取匹配的字符串`filter`。我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T13:09:41.067

使用[Regex.IsMatch](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.ismatch.aspx)方法检查正则表达式是否在输入字符串中找到匹配项。例如

```
 foreach (var item in selectedItems)
    {
         if (filter.IsMatch(item.ToString())
             // matched
    } 
```

顺便说一句，请记住，这`[0-9]*`将匹配任何内容，因为您不需要在输入字符串中包含任何数字。可能你需要`^\d+$`

更新：获得匹配的号码：

```
Regex filter = new Regex(@"(\d+)");

foreach (var item in checkedListBox1.CheckedItems)
{
    var match = filter.Match(item.ToString());
    if (match.Success)
    {
        MessageBox.Show(match.Value);
    }    
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T14:31:23.540

要查找所有匹配项，您需要使用 .Matches() 并迭代返回的集合。

另一个好的做法是编译你的正则表达式，这样你就不会在每次执行它时都受到性能影响，为此将它分配给你的类中的一个静态字段并使用“RegexOptions.Compiled”。

这是一个小示例，可以轻松修改以支持您的方案：

```
class Program {
    private static Regex _filterRegex = new Regex(@"[0-9]+", RegexOptions.Compiled);

    static void Main(string[] args) {
      foreach (Match match in _filterRegex.Matches("1,2,3,4,5,6")) {
        Console.WriteLine("Match: " + match.Value);
      }
    }
  } 
```

# php - 如何对要上传的每个文件进行检查？

> ID：14980570
> 
> 赞同：0
> 
> 时间：2013-02-20T13:04:37.283
> 
> 标签：php, javascript, upload, image-uploading

我正在尝试为图像制作一个多重上传系统。我正在使用带有多个文件上传的文件的输入类型。我想对每个文件进行检查，并且只有在它们通过所有检查时才上传，否则停止上传当前（失败）文件，但继续上传剩余文件。我想用 Javascript 和 PHP 来做。谁能建议要遵循的步骤？请不要使用 JQuery。

```
 <input id="uploadfiles"  style="overflow:hidden" type="file"  name="files[]" value="upload" multiple /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:45:40.350

让我总结一下通用上传过程：

1.  用户将选择文件
2.  他们将点击上传（或提交表单的任何内容）
3.  文件将使用 multipart/form-data 表单上传到 php 临时文件夹
4.  将调用 PHP 脚本（表单的目标），并将传递 tmp 文件夹中的文件路径
5.  php 脚本将决定将文件从 tmp 文件夹复制到网页上的某个文件夹

这清楚地表明了一件事：如果您想通过 PHP 脚本验证文件，所有文件必须已经完全上传，这意味着您不能在其他文件上传时单独调用每个文件的脚本（不是使用 html 和常规表单）。

此外（取决于您需要检查文件的要求）出于某些安全原因，您可能无法使用 javascript 验证文件。

所以有一个简单（但不太令人满意）的解决方案。让用户上传所有文件，然后用你的javascript一一验证。如果它们通过了您的要求，请将它们复制到预期的文件夹，如果没有，您可以将它们保持原样，它们将从 tmp 文件夹中删除。它只有一个缺点，用户在上传大文件时需要等待很长时间才能知道它没有通过要求。

# android - 项目“HelloFacebookSample”缺少必需的 Java 项目“facebook”

> ID：14980573
> 
> 赞同：3
> 
> 时间：2013-02-20T13:04:49.027
> 
> 标签：android, facebook

我一直按照将 facebook SDK 集成到我的应用程序中[的说明进行操作。](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)除了“helloFacebookSample”之外，我已成功编译和运行所有给定的示例应用程序。为此，我得到一个编译错误：

```
Project 'HelloFacebookSample' is missing required Java project 'facebook' 
```

我对项目/库/构建路径等的理解有点模糊，但我无法弄清楚为什么在所有其他人都成功的情况下这会失败。

这是我的 HelloFacebookSample 属性窗口的屏幕截图： ![在此处输入图像描述](../Images/30d14adc75bdb246c02b4e31a0031b78.png)

我可以确认目录：

```
c:\android stuff\facebook\facebook-android-sdk-3.0\facebook\bin 
```

包含一个文件 facebooksdk.jar

有任何想法吗？

**编辑：**再折腾一些，我只是单击了您在上面的屏幕抓取中看到的“项目”选项卡，并看到它显示“facebook（缺失）”。我有点困惑，因为我认为项目可能需要依赖*库*而不是其他项目......但我仍然不知道如何解决这个问题。我似乎没有一个简单地称为“facebook”的项目......

**编辑：**再折腾一些，我只是从java构建路径中实验性地删除了“facebook（缺失）”，然后“添加”了“FacebookSDK”......我以为这是在抓住稻草，但令我惊讶的是工作！HelloFacebookSample 编译运行！！！- 我不知道发生了什么，但仍然希望得到解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:12:32.230

以前版本的 Android Facebook SDK 将该项目称为“facebook”。看起来此示例未更新以删除旧引用，并将新引用添加到“FacebookSDK”。您已经通过修改项目的 Java 构建路径采取了纠正措施来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T10:57:12.653

只需转到项目的属性并右键单击它，然后转到项目选项卡，选择提示丢失的项目并将其删除，即可轻松删除该问题。

现在点击`project->build project->clean`

现在运行你的项目，它肯定会做得很好

# c# - SlideShowExtender 在 chrome 中不起作用

> ID：14980577
> 
> 赞同：1
> 
> 时间：2013-02-20T13:04:54.347
> 
> 标签：c#, ajax

幻灯片扩展器在所有浏览器中的本地系统上都可以正常工作，但是上传到服务器时它不能在 chrome 中正确呈现。as 在 IE 和 Mozilla 中运行良好。请帮忙。下面是代码

```
 <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server" CombineScripts="false"></asp:ToolkitScriptManager>
         <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
       <table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>

        <td width="10%" valign="top"> <asp:ImageButton ID="prevButton" runat="server"  ImageUrl="~/images/previous1.jpg" Height="13px" Width="12px" /></td>
        <td width="10%" valign="top"> <asp:ImageButton ID="playButton" runat="server" 
                ImageUrl="~/images/pause1.jpg" Height="13px" Width="10px"  /></td>
        <td valign="top" align="left" class="style9" >
        <asp:ImageButton ID="nextButton" runat="server" ImageUrl="~/images/next1.jpg" Height="13px" Width="12px" /></td>
        <td width="20%" valign="top"></td>
      </tr>
    </table>

     <table width="100%"  border="0" cellpadding="0" cellspacing="0" style="height:120px;">
          <tr>
            <td valign="top" align="left" colspan="2"> <asp:Image ID="Image1" ImageAlign="Left" ImageUrl="Admin/wowimg/Welcome to CADmylife-pic2x.jpg" runat="server" Height="117px" /></td>
            <td valign="top"><asp:Label ID="Label111" runat="server" Font-Names="Verdana" Font-Size="Small"></asp:Label>

     <asp:SlideShowExtender ID="SlideShowExtender1"  runat="server" 
      SlideShowServiceMethod="GetSlides" SlideShowServicePath="naresh.asmx"
      ImageDescriptionLabelID="Label111" 
      Loop="true" PlayInterval="5000"
       NextButtonID="nextButton"  PlayButtonText="Play"   StopButtonText="Stop"
       PreviousButtonID="prevButton"
        PlayButtonID="playButton" TargetControlID="Image1" Enabled="True" AutoPlay="true">      

              </asp:SlideShowExtender>

      </td>
          </tr>
        </table>
    </ContentTemplate>
            </asp:UpdatePanel> 
```

***小路***

```
 <%@ WebService Language="C#" CodeBehind="App_Code/naresh.cs" Class="naresh" %> 
```

***从数据库中获取详细信息的 C# 代码***

```
using System;
using System.Collections;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.Xml.Linq;
using System.Data.SqlClient;
using System.Data;
using System.Configuration;

/// <summary>
/// Summary description for naresh
/// </summary>

[WebService(Namespace = "http://tempuri.org")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 

[System.Web.Script.Services.ScriptService]
public class naresh : System.Web.Services.WebService {

    public naresh () {

        //Uncomment the following line if using designed components 
        //InitializeComponent(); 
    }

    [System.Web.Services.WebMethod]
    [System.Web.Script.Services.ScriptMethod]

    public  AjaxControlToolkit.Slide[] GetSlides()
    {
        AjaxControlToolkit.Slide[] s = new AjaxControlToolkit.Slide[5];
        try
        {
            SqlConnection con = new SqlConnection(ConfigurationSettings.AppSettings["conn"]);
            SqlCommand cmd = new SqlCommand("select top 5 substring([mesg],0,50)as [mesg],img,link,type from abcd where IsOnHme='Yes' order by slno desc", con);
            System.Data.DataSet ds = new System.Data.DataSet();
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            da.Fill(ds);

            string k1 = "";
            if (ds.Tables[0].Rows[0]["type"].ToString() == "Wow")
            {
                if (ds.Tables[0].Rows[0]["link"].ToString() == "")
                {
                    k1 = "<font>" + ds.Tables[0].Rows[0][0].ToString() + "</font>";
                }
                else
                {
                  k1 = ds.Tables[0].Rows[0][0].ToString() + "...<a href=javascript:openwindow('" + ds.Tables[0].Rows[0]["link"].ToString() + "') class='smtxt'>More</a>";
                }
                s[0] = new AjaxControlToolkit.Slide("admin/wowimg/dot.jpg", "1", "<table><tr><td align='left'>" + k1 + "</td></tr></table>");
            }
            else if (ds.Tables[0].Rows[0]["type"].ToString() == "Ads")
            {
                if (ds.Tables[0].Rows[0]["link"].ToString() == "")
                {
                    k1 = " ";
                    s[0] = new AjaxControlToolkit.Slide("admin/wowimg/" + ds.Tables[0].Rows[0][1].ToString() + "", "1", "<table><tr><td align='left'>" + k1 + "</td></tr></table>");

                }
                else
                {
                    k1 = "<a href=javascript:openwindow('" + ds.Tables[0].Rows[0]["link"].ToString() + "') class='smtxt'><img src='admin/wowimg/" + ds.Tables[0].Rows[0][1].ToString() + "'></a>";

                    s[0] = new AjaxControlToolkit.Slide("admin/wowimg/dot.jpg", "1", "<table><tr><td align='left'>" + k1 + "</td></tr></table>");

                }

            //   s[0] = new AjaxControlToolkit.Slide("admin/wowimg/" + ds.Tables[0].Rows[0][1].ToString() + "", "a", "<table><tr><td align='left'>" + k1 + "</td></tr></table>");
            }
            else
            {
                k1 = ds.Tables[0].Rows[0][0].ToString() + "...<a href=javascript:openwindow('" + ds.Tables[0].Rows[0][2].ToString() + "') class='smtxt'>More</a>";
                s[0] = new AjaxControlToolkit.Slide("admin/wowimg/" + ds.Tables[0].Rows[0][1].ToString() + "", "1", "<table><tr><td align='left'>" + k1 + "</td></tr></table>");

            }
            string k2 = "";

            if (ds.Tables[0].Rows[1]["type"].ToString() == "Wow")
            {
                if (ds.Tables[0].Rows[1]["link"].ToString() == "")
                {
                    k2 = "<font>" + ds.Tables[0].Rows[1][0].ToString() + "</font>";
                }
                else
                {
                    k2 = ds.Tables[0].Rows[1][0].ToString() + "...<a href=javascript:openwindow('" + ds.Tables[0].Rows[1]["link"].ToString() + "') class='smtxt'>More</a>";
                }
                s[1] = new AjaxControlToolkit.Slide("admin/wowimg/dot.jpg", "2", "<table><tr><td align='left'>" + k2 + "</td></tr></table>");
            }
            else if (ds.Tables[0].Rows[1]["type"].ToString() == "Ads")
            {
                if (ds.Tables[0].Rows[1]["link"].ToString() == "")
                {
                    k2 = " ";
                    s[1] = new AjaxControlToolkit.Slide("admin/wowimg/" + ds.Tables[0].Rows[1][1].ToString() + "", "2", "<table><tr><td align='left'>" + k2 + "</td></tr></table>");
                }
                else
                {
                    k2 = "<a href=javascript:openwindow('" + ds.Tables[0].Rows[1]["link"].ToString() + "') class='smtxt'><img src='admin/wowimg/" + ds.Tables[0].Rows[1][1].ToString() + "'></a>";
                    s[1] = new AjaxControlToolkit.Slide("admin/wowimg/dot.jpg", "2", "<table><tr><td align='left'>" + k2 + "</td></tr></table>");

                }

            }
            else
            {
                k2 = ds.Tables[0].Rows[1][0].ToString() + "...<a href=javascript:openwindow('" + ds.Tables[0].Rows[1][2].ToString() + "') class='smtxt'>More</a>";
                s[1] = new AjaxControlToolkit.Slide("admin/wowimg/" + ds.Tables[0].Rows[1][1].ToString() + "", "2", "<table><tr><td align='left'>" + k2 + "</td></tr></table>");

            }

            string k3 = "";

            if (ds.Tables[0].Rows[2]["type"].ToString() == "Wow")
            {

                if (ds.Tables[0].Rows[2]["link"].ToString() == "")
                {
                    k3 = "<font >" + ds.Tables[0].Rows[2][0].ToString() + "</font>";
                }
                else
                {
                    k3 = ds.Tables[0].Rows[2][0].ToString() + "...<a href=javascript:openwindow('" + ds.Tables[0].Rows[2]["link"].ToString() + "') class='smtxt'>More</a>";

                }
                s[2] = new AjaxControlToolkit.Slide("admin/wowimg/dot.jpg", "3", "<table><tr><td align='left'>" + k3 + "</td></tr></table>");
            }
            else if (ds.Tables[0].Rows[2]["type"].ToString() == "Ads")
            {
                if (ds.Tables[0].Rows[2]["link"].ToString() == "")
                {
                    k3 = " ";
                    s[2] = new AjaxControlToolkit.Slide("admin/wowimg/" + ds.Tables[0].Rows[2][1].ToString() + "", "3", "<table><tr><td align='left'>" + k3 + "</td></tr></table>");
                }
                else
                {
                    k3 = "<a href=javascript:openwindow('" + ds.Tables[0].Rows[2]["link"].ToString() + "') class='smtxt'><img src='admin/wowimg/" + ds.Tables[0].Rows[2][1].ToString() + "'></a>";
                    s[2] = new AjaxControlToolkit.Slide("admin/wowimg/dot.jpg", "3", "<table><tr><td align='left'>" + k3 + "</td></tr></table>");

                }

            }
            else
            {
                k3 = ds.Tables[0].Rows[2][0].ToString() + "...<a href=javascript:openwindow('" + ds.Tables[0].Rows[2][2].ToString() + "') class='smtxt'>More</a>";
                s[2] = new AjaxControlToolkit.Slide("admin/wowimg/" + ds.Tables[0].Rows[2][1].ToString() + "", "3", "<table><tr><td align='left'>" + k3 + "</td></tr></table>");

            }

            string k4 = "";

            if (ds.Tables[0].Rows[3]["type"].ToString() == "Wow")
            {

                if (ds.Tables[0].Rows[3]["link"].ToString() == "")
                {
                    k4 = "<font >" + ds.Tables[0].Rows[3][0].ToString() + "</font>";
                }
                else
                {
                    k4 = ds.Tables[0].Rows[3][0].ToString() + "...<a href=javascript:openwindow('" + ds.Tables[0].Rows[3]["link"].ToString() + "') class='smtxt'>More</a>";
                }

                s[3] = new AjaxControlToolkit.Slide("admin/wowimg/dot.jpg", "4", "<table><tr><td align='left'>" + k4 + "</td></tr></table>");
            }
            else if (ds.Tables[0].Rows[3]["type"].ToString() == "Ads")
            {
                if (ds.Tables[0].Rows[3]["link"].ToString() == "")
                {
                    k4 = " ";
                    s[3] = new AjaxControlToolkit.Slide("admin/wowimg/" + ds.Tables[0].Rows[3][1].ToString() + "", "4", "<table><tr><td align='left'>" + k4 + "</td></tr></table>");

                }
                else
                {
                    k4 = "<a href=javascript:openwindow('" + ds.Tables[0].Rows[3]["link"].ToString() + "') class='smtxt'><img src='admin/wowimg/" + ds.Tables[0].Rows[3][1].ToString() + "'></a>";
                    s[3] = new AjaxControlToolkit.Slide("admin/wowimg/dot.jpg", "4", "<table><tr><td align='left'>" + k4 + "</td></tr></table>");

                }
                           }
            else
            {
                k4 = ds.Tables[0].Rows[3][0].ToString() + "...<a href=javascript:openwindow('" + ds.Tables[0].Rows[3][2].ToString() + "') class='smtxt'>More</a>";
                s[3] = new AjaxControlToolkit.Slide("admin/wowimg/" + ds.Tables[0].Rows[3][1].ToString() + "", "4", "<table><tr><td align='left'>" + k4 + "</td></tr></table>");

            }

            string k5 = "";

            if (ds.Tables[0].Rows[4]["type"].ToString() == "Wow")
            {

                if (ds.Tables[0].Rows[4]["link"].ToString() == "")
                {
                    k5 = "<font>" + ds.Tables[0].Rows[4][0].ToString() + "</font>";
                }
                else
                {
                    k5 = ds.Tables[0].Rows[4][0].ToString() + "...<a href=javascript:openwindow('" + ds.Tables[0].Rows[4]["link"].ToString() + "') class='smtxt'>More</a>";
                }

                s[4] = new AjaxControlToolkit.Slide("admin/wowimg/dot.jpg", "5", "<table><tr><td align='left'>" + k5 + "</td></tr></table>");
            }
            else if (ds.Tables[0].Rows[4]["type"].ToString() == "Ads")
            {
                if (ds.Tables[0].Rows[4]["link"].ToString() == "")
                {
                    k5 = " ";
                    s[4] = new AjaxControlToolkit.Slide("admin/wowimg/" + ds.Tables[0].Rows[4][1].ToString() + "", "5", "<table><tr><td align='left'>" + k5 + "</td></tr></table>");
                }
                else
                {
                    k5 = "<a href=javascript:openwindow('" + ds.Tables[0].Rows[4]["link"].ToString() + "') class='smtxt'><img src='admin/wowimg/" + ds.Tables[0].Rows[4][1].ToString() + "'></a>";
                    s[4] = new AjaxControlToolkit.Slide("admin/wowimg/dot.jpg", "5", "<table><tr><td align='left'>" + k5 + "</td></tr></table>");

                }

            }
            else
            {
                k5 = ds.Tables[0].Rows[4][0].ToString() + "...<a href=javascript:openwindow('" + ds.Tables[0].Rows[4][2].ToString() + "') class='smtxt'>More</a>";
                s[4] = new AjaxControlToolkit.Slide("admin/wowimg/" + ds.Tables[0].Rows[4][1].ToString() + "", "5", "<table><tr><td align='left'>" + k5 + "</td></tr></table>");

            }

            return s;
        }
        catch (Exception eex)
        {

            return s;
        }
    }

} 
```

# java - Java 错误的用户名和密码消息似乎无法正常工作

> ID：14980578
> 
> 赞同：1
> 
> 时间：2013-02-20T13:04:56.983
> 
> 标签：java, sql-server-2008, netbeans

这是 jFrame 按钮上的编码，一个简单的登录表单，用户名和密码验证工作正常，但如果其他条件不执行，如果你们中的任何人在这里帮助我，请给我一个提示

```
String u_id=jTextField1.getText();
String p_word=jPasswordField1.getText();
        try
        {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        Connection con=DriverManager.getConnection("jdbc:sqlserver://localhost:1433; databaseName=LoginForm; user=sa; password=aptech");
        Statement st=con.createStatement();
        ResultSet result=st.executeQuery("select pass_word from employee where user_name='"+u_id+"'  ");

         if(result.next())
        {

          String pwd =  result.getString("pass_word");

           if( p_word.equals(pwd))
           {
                jLabel4.setText("you are logged in");
           }
           else if (!p_word.equals(pwd))
           {
                jLabel4.setText("Your id password is Wrong");
           }

        }
        else 
        {
            jLabel4.setText("Enter your id password again");
            jTextField1.setText("");
            jPasswordField1.setText("");
        }       
     }            
     catch (ClassNotFoundException a)
     {
          System.out.println(""+a);
     }
     catch (SQLException s)
     {
          System.out.println(""+s);
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:20:22.133

你的代码比你需要的多十倍。改为执行此操作（伪代码）：

请改用此查询：

```
select count(*)
from employee
where user_name = ?
and pass_word = ? 
```

您将得到正好一行，返回一列。
该列的值将是`1`或`0`

你应该能够自己处理剩下的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:12:20.727

试试这个：

创建一个名为（我希望您正在使用和 IDE！）“Log.java”的新类，将以下代码复制并粘贴到该类中。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Log extends JFrame {

public static void main(String[] args) {
Log frameTable = new Log();
}

JButton Login = new JButton("Login");
JPanel panel = new JPanel();
JTextField txuser = new JTextField(15);
JPasswordField pass = new JPasswordField(15);

Log(){
super("Login Autentification");
setSize(300,200);
setLocation(500,280);
panel.setLayout (null); 

txuser.setBounds(70,30,150,20);
pass.setBounds(70,65,150,20);
Login.setBounds(110,100,80,20);

panel.add(Login);
panel.add(txuser);
panel.add(pass);

getContentPane().add(panel);
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setVisible(true);
actionlogin();
}

public void actionlogin(){
Login.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent ae) {
String puname = txuser.getText();
String ppaswd = pass.getText();
if(puname.equals("1") && ppaswd.equals("2")) {
newframe regFace =new newframe();
regFace.setVisible(true);
dispose();
} else {

JOptionPane.showMessageDialog(null,"Wrong Password or Username!");
txuser.setText("");
pass.setText("");
txuser.requestFocus();
}

}
});
}
} 
```

然后，创建一个新类“newframe.java”，并用以下代码填充它：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class newframe extends JFrame {

public static void main(String[] args) {
newframe frameTabel = new newframe();
}

JLabel welcome = new JLabel("Welcome to a New Frame");
JPanel panel = new JPanel();

newframe(){
super("Welcome");
setSize(300,200);
setLocation(500,280);
panel.setLayout (null); 

welcome.setBounds(70,50,150,60);

panel.add(welcome);

getContentPane().add(panel);
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setVisible(true);
}

} 
```

现在您应该可以开始了，如果有不清楚的地方，请随时询问或自己弄清楚，这个可爱的社区会尽力提供帮助。

# c# - 与 wcf REST 通信的 JSON.NET 兼容序列化

> ID：14980579
> 
> 赞同：2
> 
> 时间：2013-02-20T13:04:57.250
> 
> 标签：c#, asp.net, serialization, compact-framework, json.net

我有一个关于 JSON.NET 序列化和使用 WCF REST Web 服务的问题。

我的设备运行 .NET 紧凑型框架并且功能支持有限，它使用 JSON.NET 进行序列化/反序列化。通过 HttpWebRequest 与带有字符串或简单类等参数的简单 WCF REST Web 服务进行通信就像一个魅力。

现在我必须传输一组键值对

```
List<KeyValuePair<int, object>> 
```

使用一个包含 Guid 作为值的元素序列化集合的结果如下所示：

```
[
    {
        "Key": 52120,
        "Value": "180047f8-2ee5-41bb-8da1-68bd94178d79"
    },
] 
```

我认为这是正确的 json 格式，但如果我查看我的 WCF 服务，它需要我发送如下数据：

```
[{
    "key":2147483647,
    "value":{
        "KeyValuePairOfintanyType":{
            "key":2147483647,
            "value":{
                "KeyValuePairOfintanyType":null
            }
        }
    }
}] 
```

发送由 JSON.NET 序列化的数据会导致连接中止。有谁知道如何序列化通用列表以满足 WCF 服务的要求？有没有办法告诉 JSON.NET 插入那些 KeyValuePairOf... 格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:14:53.167

使用`DataContractJsonSerializer`wcf 用于休息，它们完全兼容

# php - 将 MySQL 数据导出为 CSV 并支持泰语

> ID：14980582
> 
> 赞同：1
> 
> 时间：2013-02-20T13:05:12.507
> 
> 标签：php, mysql, csv, thai

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:22:25.263

`$buffer`如果您要导出 ，请将其添加到开头：

```
$buffer = chr(239) . chr(187) . chr(191) . $buffer; 
```

编码是带有 BOM 的 UTF，添加它会添加 BOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:10:06.050

将您的数据库编码设置为`utf8_general_ci`

还要检查您的带有字符串的列是否具有 encoding `utf8_general_ci`。

# html - 将 div 的高度设为父 td 高度的 100%（仅限 CSS）？

> ID：14980588
> 
> 赞同：3
> 
> 时间：2013-02-20T13:05:43.803
> 
> 标签：html, css, inheritance, height

[http://jsfiddle.net/zVscL/](http://jsfiddle.net/zVscL/)

这听起来很愚蠢，但有没有办法做到这一点？我一直在使用`height:100%`，我得到了 0px 的高度。

我已经阅读了有关`height`从父级传递显式值以使其正常工作的要求。问题是我不能只输入 28px 或任何幻数，因为父母的高度是由内容决定的（即它会有所不同）。我有哪些选择？

编辑：请记住，这是我的问题的简化示例。是的，我需要使用这张桌子。无法说服高层。（仅用于显示数据，幸好不是用于页面布局！）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T13:15:03.383

您可以尝试使用`overflow: auto`. 这是一个[工作小提琴](http://jsfiddle.net/zVscL/4/)。

# listview - show checkbox on all lines in jqm listview

> ID：14980590
> 
> 赞同：1
> 
> 时间：2013-02-20T13:05:51.680
> 
> 标签：listview, checkbox, jquery-mobile

I am new to JQM.

I have a JQM listview already rendered. I want to add a checkbox to all lines in the listview and show it on each line when I click on a global Delete button. However I have only been able to get the first li to render with a checkbox.

Any suggestions?

# c# - 在 windows phone 中将数据绑定到动态创建的网格中

> ID：14980591
> 
> 赞同：1
> 
> 时间：2013-02-20T13:05:55.953
> 
> 标签：c#, windows-phone-7, xaml

我有一个 jsonObject，其中包含数据并且我想在我的 Windows 手机屏幕中显示这些数据。这些数据实际上是从 Web 服务中检索的并将其转换为 json 对象。但因为我是 Windows 应用程序的新手，所以我不知道网格、画布等，所以任何人都可以帮我这样做吗？

我写了下面的代码来做到这一点，但是所有的文本块都被覆盖在一个之下，它可能是不正确的代码--->

```
for (var rows = 0; rows < jsonObject["data"].Count(); rows++)
            {
                for (var cols = 0; cols < jsonObject["data"][rows].Count(); cols++)
                {
                    ColumnDefinition scheduleTimeColumn = new ColumnDefinition();
                    GridLength timeGrid = new GridLength(10);
                    scheduleTimeColumn.Width = timeGrid;
                    grid1.ColumnDefinitions.Add(scheduleTimeColumn);

                    TextBlock timeTxtBlock = new TextBlock();
                    timeTxtBlock.Text = (String)jsonObject["data"][rows][cols];

                    timeTxtBlock.FontSize = 28;
                    timeTxtBlock.Margin = new Thickness(0, 20, 0, 0);

                    Grid.SetColumn(timeTxtBlock, 0);

                    grid1.Children.Add(timeTxtBlock);
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:55:22.223

您应该创建一个包含您需要的字段的类

```
public class C{
public string name {get; set; }
} 
```

类项的可观察集合

```
ObservableCollection<C> AllAlbums = new ObservableCollection<C>(); 
```

创建一个绑定（例如到一个列表框）

```
<ListBox x:Name="albumsListBox" ItemsSource="{Binding}">

                    <ListBox.ItemTemplate>
                        <DataTemplate>

                                        <TextBlock Text="{Binding Name}" />

                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

并将集合绑定到列表框

```
albumsListBox.DataContext = AllAlbums; 
```

# android - Use VLC to stream video to Android device

> ID：14980592
> 
> 赞同：0
> 
> 时间：2013-02-20T13:05:59.933
> 
> 标签：android, video-streaming, android-videoview, vlc

I try to use VLC to Streaming a video to my android phone here is my code

```
 public class VideoMain extends Activity {
    VideoView myVideoView;   
        protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_video_main);
        VideoView myVideoView = (VideoView)findViewById(R.id.videoView1);        
        myVideoView.setVideoPath("http://140.118.208.220:8080");
        myVideoView.setMediaController(new MediaController(this));   
} 
```

and the I use VLC streaming wizard->streaming to network->myVideo->HTTP->MPEG2->FINISH

But it seem to not work at all

please help my solve this:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T07:48:59.400

Android 在视频中支持**3GPP (.3gp)**和**MPEG-4 (.mp4)**，没有 MPEG-2 更多详细信息，请参阅[Android 开发人员媒体格式](http://developer.android.com/guide/appendix/media-formats.html)。

# atg - How ATG Nucleus layers modules on start up

> ID：14980596
> 
> 赞同：1
> 
> 时间：2013-02-20T13:06:08.420
> 
> 标签：atg, atg-dynamo

I want to know how ATG modules get started & are layered by Nucleus on server startup without explicitly specifying `-Datg.dynamo.modules` on server start up. I have observed that it picks up the modules in the order in which the build was done. But from where it is picking up that dynamo_module list? Till now I have found out "startNucleus.bat" where I saw `dynamo_modules` property.

```
:startNucleus
%JAVA_VM% -classpath %CLASSPATH% -Datg.dynamo.home=%NUCLEUS_HOME% -Datg.dynamo.root=%NUCLEUS_ROOT% -Datg.dynamo.server.home=%NUCLEUS_HOME% %JAVA_ARGS% atg.applauncher.dynamo.DynamoServerLauncher %DYNAMO_MODULES% %CONFIGPATH% 
```

With Regards, Nutan

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T01:00:27.790

组装应用程序时，nucleus 会记录组装模块的顺序。此信息存储在 EAR 中位于 @ **\atg_bootstrap.war\WEB-INF\ATG-INF的文件中**

这里有一个名为***dynamo.env***的文件，在服务器启动时由 nucleus 使用。您可以在服务器启动时使用*-Datg.dynamo.modules覆盖此配置。*

问候， 阿齐姆

# xna - XNA 不显示我自己的 fbx 模型的纹理

> ID：14980597
> 
> 赞同：4
> 
> 时间：2013-02-20T13:06:08.897
> 
> 标签：xna, textures, blender

由于我在 XNA 中制作游戏时模型已经用完，所以我尝试制作自己的模型。但是有一个问题 - 当我制作 .fbx 模型，通过搅拌机添加纹理，进行 uv 映射然后将此模型应用于我的 XNA 项目时，一切正常，但纹理没有显示。我唯一看到的是灰色模型。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T13:21:59.170

纹理不会与模型文件一起保存。您必须单独加载纹理：

```
var texture = Content.Load<Texture>("TextureName"); 
```

加载纹理后，您可以[将其绑定到效果](http://msdn.microsoft.com/en-us/library/bb464051.aspx)：

```
basicEffect.TextureEnabled = true;
basicEffect.Texture = texture; 
```

# python - Batch (basename) file/folder renaming using an "index"

> ID：14980602
> 
> 赞同：0
> 
> 时间：2013-02-20T13:06:41.320
> 
> 标签：python, r, bash, awk

Renaming of files and folder in batch is a question often asked but after some search I think none is similar to mine.

Background: we send some biological samples to a service provider which returns files with unique names and a table in text format containing, amongst other information, the file name and the sample that originated it:

```
head samples.txt
fq_file Sample_ID   Sample_name Library_ID  FC_Number   Track_Lanes_Pos
L2369_Track-3885_R1.fastq.gz    S1746_B_7_t B 7 t   L2369_B_7_t 163 6
L2349_Track-3865_R1.fastq.gz    S1726_A_3_t A 3 t   L2349_A_3_t 163 5
L2354_Track-3870_R1.fastq.gz    S1731_A_GFP_c   A GFP c L2354_A_GFP_c   163 5
L2377_Track-3893_R1.fastq.gz    S1754_B_7_c B 7 c   L2377_B_7_c 163 7
L2362_Track-3878_R1.fastq.gz    S1739_B_GFP_t   B GFP t L2362_B_GFP_t   163 6 
```

The directory structure (for 34 directories):

```
L2369_Track-3885_
   accepted_hits.bam      
   deletions.bed   
   junctions.bed         
   logs
   accepted_hits.bam.bai  
   insertions.bed  
   left_kept_reads.info
L2349_Track-3865_
   accepted_hits.bam      
   deletions.bed   
   junctions.bed         
   logs
   accepted_hits.bam.bai  
   insertions.bed  
   left_kept_reads.info 
```

Goal: because the file names are meaningless and hard to interpret, I want to rename the files ending in .bam (keeping the suffix) and the folders with the correspondent sample name, re-ordered in a more suitable manner. The result should look like:

```
7_t_B
   7_t_B..bam      
   deletions.bed   
   junctions.bed         
   logs
   7_t_B.bam.bai  
   insertions.bed  
   left_kept_reads.info
3_t_A
   3_t_A.bam      
   deletions.bed   
   junctions.bed         
   logs
   accepted_hits.bam.bai  
   insertions.bed  
   left_kept_reads.info 
```

I've hacked together a solution with bash and python (newbie) but it feels over-engineered. The question is whether there is a more simple/elegant way of doing it that I've missed? Solutions can be in python, bash, and R. could also be awk since I am trying to learn it. Being a relative beginner does make one complicate things.

This is my solution:

A wrapper puts it all in place and gives an idea of the workflow:

```
#! /bin/bash

# select columns of interest and write them to a file - basenames
tail -n +2 samples.txt |  cut -d$'\t' -f1,3 >> BAMfilames.txt 

# call my little python script that creates a new .sh with the renaming commmands
./renameBamFiles.py

# finally do the renaming
./renameBam.sh

# and the folders to
./renameBamFolder.sh 
```

renameBamFiles.py:

```
#! /usr/bin/env python
import re

# Read in the data sample file and create a bash file that will remane the tophat output 
# the reanaming will be as follows:
# mv L2377_Track-3893_R1_ L2377_Track-3893_R1_SRSF7_cyto_B
# 

# Set the input file name
# (The program must be run from within the directory 
#  that contains this data file)
InFileName = 'BAMfilames.txt'

### Rename BAM files

# Open the input file for reading
InFile = open(InFileName, 'r')

# Open the output file for writing
OutFileName= 'renameBam.sh'

OutFile=open(OutFileName,'a') # You can append instead with 'a'

OutFile.write("#! /bin/bash"+"\n")
OutFile.write(" "+"\n")

# Loop through each line in the file
for Line in InFile:
    ## Remove the line ending characters
    Line=Line.strip('\n')

    ## Separate the line into a list of its tab-delimited components
    ElementList=Line.split('\t')

    # separate the folder string from the experimental name
    fileroot=ElementList[1]
    fileroot=fileroot.split()

    # create variable names using regex
    folderName=re.sub(r'^(.*)(\_)(\w+).*', r'\1\2\3\2', ElementList[0])
    folderName=folderName.strip('\n')
    fileName = "%s_%s_%s" % (fileroot[1], fileroot[2], fileroot[0])

    command= "for file in %s/accepted_hits.*; do mv $file ${file/accepted_hits/%s}; done" % (folderName, fileName)

    print command
    OutFile.write(command+"\n")  

# After the loop is completed, close the files
InFile.close()
OutFile.close()

### Rename folders

# Open the input file for reading
InFile = open(InFileName, 'r')

# Open the output file for writing
OutFileName= 'renameBamFolder.sh'

OutFile=open(OutFileName,'w') 

OutFile.write("#! /bin/bash"+"\n")
OutFile.write(" "+"\n")

# Loop through each line in the file
for Line in InFile:
    ## Remove the line ending characters
    Line=Line.strip('\n')

    ## Separate the line into a list of its tab-delimited components
    ElementList=Line.split('\t')

    # separate the folder string from the experimental name
    fileroot=ElementList[1]
    fileroot=fileroot.split()

    # create variable names using regex
    folderName=re.sub(r'^(.*)(\_)(\w+).*', r'\1\2\3\2', ElementList[0])
    folderName=folderName.strip('\n')
    fileName = "%s_%s_%s" % (fileroot[1], fileroot[2], fileroot[0])

    command= "mv %s %s" % (folderName, fileName)

    print command

    OutFile.write(command+"\n")  

# After the loop is completed, close the files
InFile.close()
OutFile.close() 
```

RenameBam.sh - created by the previous python script:

```
#! /bin/bash

for file in L2369_Track-3885_R1_/accepted_hits.*; do mv $file ${file/accepted_hits/7_t_B}; done
for file in L2349_Track-3865_R1_/accepted_hits.*; do mv $file ${file/accepted_hits/3_t_A}; done
for file in L2354_Track-3870_R1_/accepted_hits.*; do mv $file ${file/accepted_hits/GFP_c_A}; done
(..) 
```

Rename renameBamFolder.sh is very similar:

```
mv L2369_Track-3885_R1_ 7_t_B
mv L2349_Track-3865_R1_ 3_t_A
mv L2354_Track-3870_R1_ GFP_c_A
mv L2377_Track-3893_R1_ 7_c_B 
```

Since I am learning, I feel that some examples of different ways of doing this, and thinking about how to do it, will be very useful.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:51:22.763

bash 中的一种简单方法：

```
find . -type d -print |
while IFS= read -r oldPath; do

   parent=$(dirname "$oldPath")
   old=$(basename "$oldPath")
   new=$(awk -v old="$old" '$1~"^"old{print $4"_"$5"_"$3}' samples.txt)

   if [ -n "$new" ]; then
      newPath="${parent}/${new}"
      echo mv "$oldPath" "$newPath"
      echo mv "${newPath}/accepted_hits.bam" "${newPath}/${new}.bam"
   fi
done 
```

在初始测试后删除“echo”以使其实际执行“mv”。

如果您的所有目标目录都像@triplee 的答案所暗示的那样处于一个级别，那么它就更简单了。只需 cd 到他们的父目录并执行以下操作：

```
awk 'NR>1{sub(/[^_]+$/,"",$1); print $1" "$4"_"$5"_"$3}' samples.txt |
while read -r old new; do
   echo mv "$old" "$new"
   echo mv "${new}/accepted_hits.bam" "${new}/${new}.bam"
done 
```

在您预期的输出之一中，您重命名了“.bai”文件，而在另一个输出中您没有，并且您没有说是否要这样做。如果您也想重命名它，只需添加

```
echo mv "${new}/accepted_hits.bam.bai" "${new}/${new}.bam.bai" 
```

到您喜欢的上述任何解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:35:34.157

这是使用 shell 脚本的一种方法。像这样运行：

```
script.sh /path/to/samples.txt /path/to/data 
```

内容`script.sh`：

```
# add directory names to an array
while IFS= read -r -d '' dir; do

    dirs+=("$dir")

done < <(find $2/* -type d -print0)

# process the sample list
while IFS=$'\t' read -r -a list; do

    for i in "${dirs[@]}"; do

        # if the directory is in the sample list
        if [ "${i##*/}" == "${list[0]%R1.fastq.gz}" ]; then

            tag="${list[3]}_${list[4]}_${list[2]}"
            new="${i%/*}/$tag"
            bam="$new/accepted_hits.bam"

            # only change name if there's a bam file
            if [ -n $bam ]; then

                mv "$i" "$new"
                mv "$bam" "$new/$tag.bam"
            fi
        fi
    done

done < <(tail -n +2 $1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T07:04:32.433

虽然它不是您正在寻找的东西（只是跳出框框思考）：您可能会考虑文件系统的替代“视图” - 使用术语“视图”就像数据库视图对表一样。您可以通过“用户空间中的文件系统”FUSE 来做到这一点。可以使用许多现有的实用程序来做到这一点，但我不知道有一个通常适用于任何一组文件，特别是用于重命名/重新组织。但作为如何使用它的具体示例，[pytagsfs](http://www.pytagsfs.org/Introduction)创建了一个[虚拟（熔断）文件系统](http://fuse.sourceforge.net/)根据您定义的规则，使文件的目录结构以您想要的方式出现。（也许这也适用于您——但 pytagsfs 实际上是为媒体文件设计的。）然后您只需使用通常访问该数据的任何程序在该（虚拟）文件系统上进行操作。或者，要使虚拟目录结构永久化（如果 pytagsfs 没有执行此操作的选项），只需将虚拟文件系统复制到另一个目录（虚拟文件系统之外）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T13:56:29.030

似乎您可以在一个简单的`while`循环中简单地从索引文件中读取所需的字段。文件的结构并不明显，所以我假设文件是​​空格分隔的，`Sample_Id`实际上是四个字段（复杂的 sample_id，然后是名称中的三个组件）。也许您有一个制表符分隔的文件，字段中有内部空格`Sample_Id`？无论如何，如果我的假设是错误的，这应该很容易适应。

```
# Skip the annoying field names
tail +1 samples.txt |
while read fq _ c a b chaff; do
    dir=${fq%R1.fastq.gz}
    new="${a}_${b}_$c"
    echo mv "$dir"/accepted_hits.bam "$dir/$new".bam
    echo mv "$dir"/accepted_hits.bam.bai "$dir/$new".bam.bai
    echo mv "$dir" "$new"
done 
```

`echo`如果输出看起来像您想要的，请取出s。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T13:32:31.233

当然，您只能在 Python 中执行此操作 - 它可以为此生成一个小的可读脚本。

首先：读取 sampels.txt 文件并创建从现有文件前缀到所需映射前缀的映射 - 该文件未格式化为使用 Python CSV 阅读器模块，因为在最后一个数据列中使用了列分隔符。

```
mapping = {}
with open("samples.txt") as samples:
   # throw away headers
   samples.readline()
   for line in samples():
       # separate the columns spliting the first  whitespace ocurrences:
       # (either space sequences or tabs)
       fields = line.split()
       # skipp blank, malformed lines:
       if len(fields) < 6: 
           continue
       fq_file, sample_id, Sample_name, Library_ID,  FC_Number,  track_lanes_pos, *other = fields
       # the [:-2] part is to trhow awauy the "R1"  sufix as for the example above
       file_prefix = fq_file.split(".")[0][:-2]
       target_id = "_".join((Library_ID, FC_number. Sample_name))
       mapping[file_prefix] = target_id 
```

然后检查目录名称，并在每个目录中检查“.bam”文件以进行重新映射。

```
import os
for entry in os.listdir("."):
     if entry in mapping:
         dir_prefix = "./" + entry + "/")
         for file_entry in os.listdir(dir_prefix):
              if ".bam" in file_entry:
                   parts = file_entry.split(".bam")
                   parts[0] = mapping[entry]
                   new_name = ".bam".join(parts)

                   os.rename(dir_prefix + file_entry, dir_prefix + new_name)
         os.rename(entry, mapping[entry]) 
```

# firefox - filepicker.io mimetype audio in firefox

> ID：14980606
> 
> 赞同：1
> 
> 时间：2013-02-20T13:06:50.837
> 
> 标签：firefox, mime-types, filepicker.io

The mimetype settings look like this:

```
 mimetypes: ['audio/*'], 
```

Firefox on windows 7 cannot upload mp3 files, other browsers work fine. They get the "not audio file" error.

Is this a bug with filepicker?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:32:18.010

这很可能是 Firefox 报告 mp3 文件的 mimetypes 方式的问题 - 我建议尝试按扩展名过滤。有时 mimetype 更合适，有时它们会由于不同的实现而崩溃，这就是我们提供这两种机制的原因。

# directshow - Unable to RenderStream when using SampleGrabber with Microsoft DTV-DVD Audio Decoder and Direct Sound Renederer

> ID：14980607
> 
> 赞同：0
> 
> 时间：2013-02-20T13:06:55.703
> 
> 标签：directshow

I would like to play only audio from video file. For this I'm using directshow SampleGrabber with Major_type set to MEDIATYPE_Audio and DirectSound Audio Renderer.

This works fine for .wmv files. However when I try to play .mp4 files. The RenderStream fails.

I then tried creating filter in GrapStudioNext with following filtet

File Source->LAV Splitter (Automatically load)->SampleGrabber->MS DTV-DVD Audio Decoder->Default DirectSoude Device

The above filter works fine and I'm to listen to the audio.

However when I create the same filter graph manually in vc++. The RenderStream calls fails while connecting source filter to SampleGrabber

```
HRESULT hr = CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC_SERVER, 
                        IID_IGraphBuilder, (void **)&m_pGraph);
if(FAILED(hr))
{
ReleaseResource();
return hr;
}

hr = CoCreateInstance(CLSID_CaptureGraphBuilder2, NULL, CLSCTX_INPROC_SERVER, IID_ICaptureGraphBuilder2, 
        (void **)&m_pBuilder);
    if (SUCCEEDED(hr))
    {
        m_pBuilder->SetFiltergraph(m_pGraph);
    }
else
{
std::cout<<"Failed to Created Capture Graph"<<std::endl;
ReleaseResource();
return hr;
}

hr = m_pGraph->QueryInterface(IID_IMediaControl, (void**)&m_pControl);
if(FAILED(hr))
{
std::cout<<"Failed to Get Media Control Interface"<<std::endl;
ReleaseResource();
return hr;
}

hr = m_pGraph->QueryInterface(IID_IMediaEvent, (void**)&m_pEvent);
if(FAILED(hr))
{
std::cout<<"Failed to Get Media Event"<<std::endl;
ReleaseResource();
return hr;
}

hr = m_pGraph->QueryInterface(IID_IMediaSeeking, (void**)&m_pMediaSeek);
if(FAILED(hr))
{
std::cout<<"Failed to Get Media Seeking"<<std::endl;
ReleaseResource();
return hr;
}

hr = m_pGraph->QueryInterface(IID_IBasicAudio, (void**)&m_pBasicAudio);
if(FAILED(hr))
{
std::cout<<"Failed to Get Basic Audio"<<std::endl;
ReleaseResource();
return hr;
}
#if 0
hr = CoCreateInstance(CLSID_AudioRender, NULL, CLSCTX_INPROC_SERVER, 
IID_IBaseFilter, (void**)&m_pBaseFilter);
#endif

hr = CoCreateInstance(CLSID_DSoundRender, NULL, CLSCTX_INPROC_SERVER, 
IID_IBaseFilter, (void**)&m_pBaseFilter);

if(FAILED(hr))
{
std::cout<<"Failed to Create Audio Render"<<std::endl;
ReleaseResource();
return hr;
}

hr = m_pGraph->AddFilter(m_pBaseFilter, L"Audio Filter");
if(FAILED(hr))
{
std::cout<<"Failed to Add Audio Render"<<std::endl;
ReleaseResource();
return hr;
}

hr = m_pGraph->AddSourceFilter((LPCWSTR)wxStr,L"SourceFlt", &m_pSourceFilter);
if(FAILED(hr))
{
std::cout<<"Failed to Add Source Filter"<<std::endl;
ReleaseResource();
return hr;
}

hr = CoCreateInstance(CLSID_SampleGrabber, NULL, CLSCTX_INPROC_SERVER, 
IID_IBaseFilter, (void**)&m_pBaseFilterSG);
if(FAILED(hr))
{
std::cout<<"Failed to Create Sample Grabber"<<std::endl;
ReleaseResource();
return 1;
}

hr = m_pGraph->AddFilter(m_pBaseFilterSG, L"Sample_Grabber");
if(FAILED(hr))
{
std::cout<<"Failed to Add Sample Grabber"<<std::endl;
ReleaseResource();
return 1;
}

hr = m_pBaseFilterSG->QueryInterface(IID_ISampleGrabber, (void**)&m_pSampleGrabber);

if(FAILED(hr))
{
std::cout<<"Query Interface Failed for Sample Grabber"<<std::endl;
ReleaseResource();
return 1;
}
ZeroMemory(&mt, sizeof(mt));
mt.majortype = MEDIATYPE_Audio;
mt.subtype = MEDIASUBTYPE_RAW_AAC1;
 hr = m_pSampleGrabber->SetMediaType(&mt);

  if(FAILED(hr))
{
std::cout<<"Failed to Set Media Type"<<std::endl;
ReleaseResource();
return 1;
}

hr = CoCreateInstance(CLSID_CMPEG2AudDecoderDS , NULL, CLSCTX_INPROC_SERVER, 
IID_IBaseFilter, (void**)&m_pMSAduioDecoder);
if(FAILED(hr))
{
std::cout<<"Failed to Create Sample Grabber"<<std::endl;
ReleaseResource();
return 1;
}

hr = m_pGraph->AddFilter(m_pMSAduioDecoder, L"Audio_Decoder");
if(FAILED(hr))
{
std::cout<<"Failed to Add Adudio Decoder"<<std::endl;
ReleaseResource();
return 1;
}

hr = m_pBuilder->RenderStream( &PIN_CATEGORY_CAPTURE, &MEDIATYPE_Audio,m_pSourceFilter, m_pBaseFilterSG,m_pMSAduioDecoder);
 if(FAILED(hr))
{
std::cout<<"Failed to Render First Chain"<<std::endl;
ReleaseResource();
return hr;
}

  hr = m_pBuilder->RenderStream(NULL, NULL,m_pMSAduioDecoder,NULL,  m_pBaseFilter);
 if(FAILED(hr))
{
std::cout<<"Failed to Render Second Chain"<<std::endl;
ReleaseResource();
return hr;
} 
```

Also when I SetMediaType to MEDIATYPE_Video the first chain connects properly. But seconds one fails even after using PIN_CATEOGARY_CAPTURE and MediaType_Audio.

Also the error I'm getting in RenderStream invalid args.

Please suggest what could be going wrong. Thanks in advance.

Pradeep

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:44:59.070

这是完全错误的。您根本没有捕获源，因此首先尝试利用 Capture Graph Builder 很弱。您的图表中没有一个引脚，`PIN_CATEGORY_CAPTURE`因此它失败了。

您知道需要使用的所有过滤器`CoCreateInstance`，`IGraphBuilder::AddFilter`并且`IPin::Connect`足以构建图形，您根本不需要捕获图形构建器。

# c# - Can a method be abstract but not virtual?

> ID：14980609
> 
> 赞同：2
> 
> 时间：2013-02-20T13:07:02.960
> 
> 标签：c#

As I understand it, a method being marked abstract is implicitly virtual. The reason: Suppose the compile-time type of a given object is abstract. If one of the object's abstract methods is being called, the actual method to be executed is the one defined in the object's runtime type. Isn't it? If I'm right then the abstract method behaves as if it is also virtual.

In spite of that, I have successfully marked a C# method both abstract and virtual simultaneously:

```
public abstract virtual void crazy(); 
```

I suppose it means that an abstract method is not necessarily virtual and being abstract is actually orthogonal to being virtual.

What do I get wrong? How can an abstract method not be virtual?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T13:10:04.937

您不能将方法同时标记为`abstract`和`virtual`。这将导致编译器错误：

> 抽象方法“Namespace.Class.Foo()”不能标记为虚拟

你的问题的其余部分是正确的：`abstract`方法是隐式的`virtual`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T13:14:49.920

来自[MSDN](http://msdn.microsoft.com/en-us/library/sf985hc5%28v=vs.71%29.aspx)

*   抽象方法隐含地是虚拟方法。
*   抽象方法声明只允许在抽象类中。
*   因为抽象方法声明没有提供实际的实现，所以没有方法体；方法声明仅以分号结尾，签名后没有大括号 ({ })。
*   该实现由一个覆盖方法提供，该方法是非抽象类的成员。
*   在抽象方法声明中使用**static**或**virtual**修饰符是**错误的。**

 ***** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T13:10:34.280

“您不能将 virtual 修饰符与 static、abstract、private 或 override 修饰符一起使用。”

*   [http://msdn.microsoft.com/en-us/library/9fkccyh4(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/9fkccyh4(v=vs.100).aspx)****

# java - Java Swing Button

> ID：14980611
> 
> 赞同：0
> 
> 时间：2013-02-20T13:07:05.503
> 
> 标签：java, swing, jbutton

I've written this:

```
JButton saveButton = new JButton(saveAction); 
```

How do I then call it so that it displays within the window? (I've already got the code for the window, I just don't know how to call it so it shows)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:13:09.500

首先，您应该为窗口创建一些 ContentPane（我猜您的意思是 JFrame）。将按钮直接添加到窗口不是一个好主意：P 接下来，您可以将按钮添加到该窗格：

```
panel.addComponent(button); 
```

最后要做的是：

```
frame.setContentPane(panel) 
```

这就是全部：P 简而言之；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:13:50.563

使用这样的东西

```
public class MainWindow extends JFrame {
    public static void main(String[] args) {
        MainWindow frame = new MainWindow();
        frame.setVisible(true);
    }

    public MainWindow() throws IOException {
        setTitle("Conveyor");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 851, 515);
        contentPane = new JPanel();
        JButton refreshButton = new JButton("refresh");
        contentPane.add(refreshButton, BorderLayout.EAST);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:10:20.803

`saveButton.setVisible(true);`

`your_window.add(saveButton);`

就这样。

# java - 在服务android中停止录制

> ID：14980613
> 
> 赞同：1
> 
> 时间：2013-02-20T13:07:06.753
> 
> 标签：java, android

我有一个应用程序，它在其中运行服务。该服务包括两件事： - 从蓝牙获取读数。- 录制音频文件。

对于录音，我使用的是发布的代码：[http ://www.androiddevblog.net/android/android-audio-recording-part-2](http://www.androiddevblog.net/android/android-audio-recording-part-2)

我在本网站已发布的问题之一中找到了此链接。如果你可以查看代码，你会发现有两个主要的录制函数：startrecording()和stoprecording()。

有一个带有开始和关闭按钮的活动“main_activity”。启动按钮启用服务，并调用 startrecording 函数，并从血氧计获取读数。

我的问题是：我应该在哪里调用 stoprecording 函数？在服务的destroy() 函数中？在“main_activity”的关闭按钮内？

我都试过了。第一种方式，stoprecording函数没有完成，即录制生成raw文件，stoprecording将其复制并转换为wav文件。

在第二种方式中，按钮挂起：S

感谢您的帮助

谢谢，托琳

# html - 为什么单击不会从第一次在 chrome 中激活链接？

> ID：14980614
> 
> 赞同：0
> 
> 时间：2013-02-20T13:07:11.573
> 
> 标签：html, css, google-chrome, hyperlink, anchor

我有两个锚点，其中包含一个在悬停时有过渡的 div，但我需要一些耐心才能真正打开链接。我想不出为什么不。

我在div上使用javascript重定向到页面尝试了同样的事情，但我仍然遇到同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:41:06.023

```
#socialbuttons a {
  display: inline-block;
} 
```

移除（或将其放在锚上）

```
#socialbuttons div:first-child {
   margin-left: 20px;
} 
```

现在将悬停规则应用于周围的锚点

```
#socialbuttons a:hover div {
...
} 
```

我还没有尝试过，但这应该可以解决 div 转动并且不再位于光标下时的闪烁问题。如果这仍然不起作用，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:21:02.223

```
#socialbuttons a {
    display: block; /*added*/
    height: 64px;
    width: 54px;
} 
```

添加显示：块；facebook 链接有效，那么您必须修复其他类以获得良好的显示效果。

最后：HTML 4.01 规定元素只能包含内联元素。A 是一个块元素，因此它可能不会出现在 .

**编辑**：

```
#socialbuttons div:first-child {
    margin-left: 20px /* REMOVE THIS */;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-20T13:11:54.740

我可能已经找到 Chrome + LastPass 以这种方式运行的原因。我卸载了 Chrome 及其所有扩展。然后使用 LastPass 安装程序安装较早版本的 Chrome 版本 13 和较早版本的 LastPass (1.9)。我厌倦了安装 LastPass 的 Chrome 扩展路线，但它给出了一个错误，因为它想要最新版本的 Chrome。不知道为什么，但是当我检查 LastPass“关于”时，它现在显示 2.0.0 版本。它自己升级了吗？使用这种新组合，浏览器似乎可以与外部链接一起正常工作。我说“似乎”，因为我在使用不同的浏览器/扩展程序组合方面取得了立竿见影的成功，只是让浏览器恢复到 certin 链接的问题，并且在使用了这么多之后：我无法识别。我' 将再监视此设置几天并安装一些其他扩展。如果我的怀疑成立，那么出于安全原因不使用最新版本的 Chrome 将是一个问题，并且我将无法安装最新的扩展。真可惜。

# gwt - GWT CellTable 数据不显示

> ID：14980617
> 
> 赞同：1
> 
> 时间：2013-02-20T13:07:23.903
> 
> 标签：gwt, dataprovider, celltable

我的模块`onModuleLoad()`方法中有以下代码：

```
 List<MyPromo> promotionData = new ArrayList<MyPromo>();
    MyPromo promotion1 = new MyPromo(...);
    promotionData.add(promotion1);

    PromotionTable<MyPromo> promoTable = new PromotionTable<MyPromo>(tableColumns, promotionData); 
```

和

```
public class PromotionTable <T extends Promotion> extends CellTable<T>{

    public PromotionTable(List<ColumnGroup<T>> columns, List<T> data) {
        super();
        this.setWidth("100%");
        this.setHeight("500px");

        this.setHeaderBuilder(new PromotionTableHeaderBuilder(columns, this));
        this.setFooterBuilder(new PromotionTableFooterBuilder(this));

        ListDataProvider<T> dataProvider = new ListDataProvider<T>();
        dataProvider.setList(data);
        dataProvider.addDataDisplay(this);
    }
    ... 
```

的列`CellTable`只是从`MyPromo`对象中获取属性并返回`String`要显示的值。但是，表格中不显示任何内容，仅显示列标题。知道这是为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:54:37.610

问题在于以下代码

```
 ListDataProvider<T> dataProvider = new ListDataProvider<T>();
    dataProvider.setList(data);
    dataProvider.addDataDisplay(this); 
```

当您执行 setList 时，ListDataProvider 必须知道它的消费者，即显示（请参阅 setList 实现）。

所以，代码的顺序是错误的。先做addDataDisplay，然后做setList。它会起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:12:24.673

我正在构造 dataProvider 并将其分配给构造函数中的单元格表（或 mu 扩展名）。由于某种原因，它不喜欢这个，当我把它移出来时，它起作用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T12:40:12.843

下面是 CellTable、SimplePager 和 ListDataProvider 的简单示例。

```
 CellTable<AlarmDisplayBTO> cellTable= new CellTable<AlarmDisplayBTO>();
    TextColumn<AlarmDisplayBTO> dateColumn = new TextColumn<AlarmDisplayBTO>() {
        @Override
        public String getValue(AlarmDisplayBTO object) {
            return object.getDate();
        }
    };
    cellTable.addColumn(dateColumn, "Date");
    TextColumn<AlarmDisplayBTO> alarmNameColumn = new TextColumn<AlarmDisplayBTO>() {
        @Override
        public String getValue(AlarmDisplayBTO object) {
            return object.getAlarmName();
        }
    };
    cellTable.addColumn(alarmNameColumn, "Alarm Name");

    cellTable.setRowCount(alarmList.size());
    // alarmList is an ArrayList<AlarmDisplayBTO> rendered from RPC call
    cellTable.setRowData(0, alarmList); 
    cellTable.setEmptyTableWidget(new Label(" No Records Found"));

    ListDataProvider<AlarmDisplayBTO> dataProvider = new ListDataProvider<AlarmDisplayBTO>();
    dataProvider.addDataDisplay(cellTable);
    dataProvider.setList(alarmList);

    SimplePager pager = new SimplePager();
    pager.setDisplay(cellTable);
    pager.setPageSize(20); // 20 rows will be shown at a time

    VerticalPanel vPanel = new VerticalPanel();
    vPanel.add(cellTable);
    vPanel.add(pager);

    setWidget(new ScrollPanel(vPanel)); 
```

希望这可能会有所帮助..

# qt - Qt 布局，在小部件大小更改后调整为最小

> ID：14980620
> 
> 赞同：33
> 
> 时间：2013-02-20T13:07:35.603
> 
> 标签：qt, layout, qt5, qgridlayout

基本上我有一个`QGridLayout`带有一些小部件的。重要的是 2 个标签，我用它们将图像绘制到屏幕上。好吧，如果用户想要，他可以更改传入图像的分辨率，从而强制标签调整大小。

假设标签的初始大小为`320x240`. 用户将 VideoMode 更改为`640x480`，标签和整个 GUI 完美调整大小。但是当用户切换回 时`320x240`，标签会缩小，但布局/窗口不会。

我玩过`sizePolicies`and `sizeHints`, and `resize(0,0)`，但没有成功。有人可以帮我解决这个问题吗？

这里有一些截图来澄清问题：

![在这里，一切都好](../Images/2406f3d13d964d2c86d35dd1fe261833.png) ![尽管如此，640 x 480 可以完美调整大小](../Images/3bf2ef602d93c2c19c87588ded805d2f.png) ![但是在这里，布局太大了。](../Images/a9040e3f8939cb13a4282eb99cc144c8.png)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2014-01-30T14:13:32.190

您需要将包含所有小部件的布局的大小约束设置为“SetFixedSize”。虽然这个名字听起来不像它会起作用，但它确保你的布局只会使用它需要的空间。您不会像在第二个屏幕截图中那样遇到问题。

例子：

```
mainLayout.setSizeConstraint(QLayout::SetFixedSize); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-11-26T05:05:26.540

QLayout::setSizeConstraint(QLayout::SetFixedSize) 很好地解决了这个问题，当您希望始终保持小部件的大小固定时 - 也就是说，如果您希望它始终固定为其“打包”大小（可能仍然随着子小部件大小的变化而变化）。这就是“固定”的含义：“固定”到正确的大小，即使后者有所不同。（在 Qt 术语中，我所说的“打包”大小只是小部件的 sizeHint。）

但是在某些情况下，约束可能是一个太强的解决方案。特别是，如果您将其应用于顶级窗口，则用户将无法自由调整窗口大小。如果您不喜欢这样，您可以在每次需要时立即执行“将大小设置为 sizeHint”操作，而不是将其作为无情的约束。这样做的方法是调用 QWidget::adjustSize()。

[http://doc.qt.io/qt-5/qwidget.html#adjustSize](http://doc.qt.io/qt-5/qwidget.html#adjustSize)

请注意，如果子级正在更改大小的容器不是顶级窗口，则可能必须在容器及其父级上递归调用 adjustSize()。（在我的情况下，无论如何我必须这样做。我还尝试了大小约束方案，发现仅在最顶层应用约束可以成功压缩所有级别。我对 Qt 的了解不足，无法进行有用的评论关于这些观察，所以我只是分享它们。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T13:19:58.897

在对布局应用任何更改之前，您需要存储小部件父窗口的原始大小，并在用户切换回原始大小时恢复它。

请注意，您需要使用**小部件父窗口**大小而不是**小部件父**大小。

在应用布局更改之前在您的小部件中：

```
minimumWindowSize = this->window().size(); 
```

当您完成将小部件重组为紧凑尺寸时

```
this->window().resize(minimumWindowSize); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-18T09:15:02.967

这正是我在 mu 项目中所做的。分辨率操作系统无关紧要。在您的情况下，我只需要一个用于渲染视频或图像的小部件。

```
void MainWindow::resizeEvent(QResizeEvent* event)
 {
   QMainWindow::resizeEvent(event);
   if ((player != 0) && ((player->isPlaying()) || player->isLoaded() || player>isLoaded())){
     renderer->resize(ui->mainVideoWidget->width(),ui->mainVideoWidget->height());
     resizeFilter();

 }
} 
```

# java - Java中的无符号字节CRC32

> ID：14980625
> 
> 赞同：2
> 
> 时间：2013-02-20T13:07:50.553
> 
> 标签：java, hash, checksum, crc32

我正在尝试在 Java 中复制 PHP 中可用的 CRC32 散列函数。Java 中现有的 CRC32 类返回不同的哈希值，我相信这是因为我的字节数组中的 Java 字节是无符号的 -128 到 128 而不是 0-255。

我没有弄清楚如何解决这种情况。我看过使用 Guava 的 UnsignedBytes，但我找不到将它作为参数的散列方法。我可以用它来编写我自己的散列函数，但坦率地说，我对它的工作原理或一般的按位算术几乎没有足够的了解以使其合理化。

用最简单的术语来说，我试图 CRC32 有一个字符串并返回十进制表示。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T13:20:15.940

CRC 不关心符号。

Java 的 CRC32 给了我与 PHP 相同的结果。

```
public static void main(String[] args) {
    String a = "Hello World!";
    CRC32 crc = new CRC32();
    crc.update(a.getBytes());
    System.out.println(Long.toHexString(crc.getValue()));
} 
```

输出：`1c291ca3`

使用[这个在线 PHP CRC32 计算器](http://www.tools4noobs.com/online_php_functions/crc32/)给出的 CRC 值与上面的 Java 代码相同。

# cpanel - CPanel 缓存问题

> ID：14980629
> 
> 赞同：0
> 
> 时间：2013-02-20T13:07:56.243
> 
> 标签：cpanel

我在我的站点中进行了一些更改，并通过 CPanel 在服务器中更新了它们，但我看不到受影响的更改。我已经更改了一个 pdf，但仍然显示旧的 pdf。如果有人知道为什么会这样，请帮助我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T08:07:10.777

尝试

> 挖 +trace domain.com

并确保该域指向正确的服务器 IP（您所做的更改）

没有像 cPanel 缓存这样的东西。否则试试

> 远程登录服务器_IP 25

确保它指向正确的服务器 IP。

如果域指向了您进行更改的正确服务器，则需要根据脚本或代码进行调查。检查pdf文件是否正确上传

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T12:27:04.200

有些它也发生在我身上，但即使我们上传它更正了它的浏览器缓存，它仍然显示旧页面并且不反映新的变化。大多数时候我都会在私人浏览器中或通过代理网址检查它：D

# mysql - 如何 SUM 查询 3 个表？

> ID：14980630
> 
> 赞同：1
> 
> 时间：2013-02-20T13:07:58.107
> 
> 标签：mysql

```
A table
--------------------
id bId        txnVolume
1  1(b table) 10.00
2  1          5.00
3  2          7.00
4  3          2.00

B table
--------------------
id cId
1  1(C table)
2  2
3  3

C table
--------------------
id cusId prodId
1  1     1
2  1     2
3  1     1
4  1     2 
```

如果 C 表是 custId 1 和 prodId 1，我想获得表 A 上 txnVolume 的总和？谢谢你们的帮助！干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:10:21.717

```
Select sum(coalesce(txnVolume,0))
FROM A INNER JOIN B on A.BID = B.Bid
INNER JOIN C on C.ID = B.CID
WHERE C.CustID = 1 and C.ProdID = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:10:38.320

尝试以下操作：

```
select sum(txnVolume) from A
   join B on A.bID = B.id
   join C on C.cID = C.id
  where prodID = 1 and custID = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T13:10:42.607

在 sql 中，您需要连接表。当表连接时，它们会创建一个大表。然后，您可以将 where 子句添加到列中。

```
SELECT sum(txnVolume)
FROM A
JOIN B on A.bId = B.id
JOIN C on B.cID = c.id
where c.custid = 1 and c.prodid = 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T13:11:11.003

```
SELECT SUM(a.txnVolume)
FROM c 
  LEFT JOIN b 
    ON c.id=b.cId 
  LEFT JOIN a 
    ON b.id=a.bId 
WHERE c.cusId=1 AND c.prodId=1; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T13:11:33.697

```
SELECT  SUM(a.txnVolume) totals
FROM    tableA a
        INNER JOIN tablB b
            ON a.bid = b.id
        INNER JOIN tableC c
            ON b.cid = c.ID
WHERE   c.custID = 1 AND c.prodID = 1 
```

# visual-studio-2012 - VS2012 无打字稿智能

> ID：14980635
> 
> 赞同：0
> 
> 时间：2013-02-20T13:08:23.940
> 
> 标签：visual-studio-2012, intellisense, typescript

我在我的 Visual Studio 2012 上安装了打字稿，但是当我编辑文件时根本没有智能感知。即使是没有花哨的打字稿检查的简单 javascript。你知道我应该怎么做才能修复它并让它运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:31:12.687

我做到了，但它对我不起作用。我重新启动了电脑等。但仍然没有。好消息我找到了对我有用的解决方案，也许会帮助其他人 C:\Users\UserName\AppData\Roaming\Microsoft\VisualStudio 这是 Visual Studio 缓存和扩展的通行证，我只是删除它并重新启动我的 vs 并安装支持我的扩展和工具以及所有工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:18:10.387

安装最新的工具包： http: [//go.microsoft.com/fwlink/ ?LinkId=282650](http://go.microsoft.com/fwlink/?LinkId=282650)

和最新的 Web Essentials：http: [//visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)

# grails - 一对多关系没有按预期工作

> ID：14980640
> 
> 赞同：0
> 
> 时间：2013-02-20T13:08:52.440
> 
> 标签：grails

我在使 grails 中的一对多关系正常工作时遇到了一些问题。我有一个人实例，这个人与其他人有关系。此关系在关系对象中定义。相关代码如下。

```
class Person {
  static hasMany = [relationships:Relationship]
  String name

}

class Relationship {
   Person relationShipTo

   // Enum containing married, living together, parent etc.
   RelationshipType typeOfRelationship
} 
```

现在我想要的是一个对多的引用来保持这种关系，但是在 grails 中发生的事情是它似乎认为relationshipTo 实例正在引用与其他人有这种关系的人，而不是其他人. 所以一个人有一个关系的引用，而那个关系有一个类型和一个对你与之有关系的人的引用。我无法为此更改域模型。有什么方法可以实现我想要的吗？

如果我为关系使用生成的视图和控制器并尝试创建与类型和它所引用的人的关系，那么当前正在发生什么，只有类型被持久化并且该人被忽略。然后，当我尝试将其添加到人员编辑或创建页面中的人员时，我添加的关系的所有 relationShipTo 属性都与人员的 ID 一起保存。

希望我写的可以理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:32:48.003

终于让它工作了。

必须添加一个静态 mappedBy =[relationship: 'belongsTo'] 到 person 和一个静态 belongsTo = [belongsTo: Person]。

不完全是我想要的，但它有效，是一个不错的妥协

# shell - Oozie shell Action - 从 shell 问题运行 hive

> ID：14980642
> 
> 赞同：2
> 
> 时间：2013-02-20T13:09:01.600
> 
> 标签：shell, hadoop, hive, oozie

基于条件为真，我正在 shell 脚本中执行 hive -e。它工作正常。当我将此脚本放入 Oozie 中的 Shell 操作并运行时，我得到一个 scriptName.sh: 第 42 行：hive:command not found 异常。

我尝试在 shell 操作中传递 < env-var >PATH=/usr/lib/hive</env-var> ，但我想我在那里犯了一些错误，因为我得到了相同的错误 scriptName.sh: line 42 : hive: 找不到命令

**编辑：** 我`which hive`在shell脚本中使用。它的输出不一致。我得到了两种不同的输出：
1.`/usr/bin/hive`还有一个`Delegation token can be issued only with kerberos or web authentication`Java IOException。”

2.`which : hive not in {.:/sbin:/usr/bin:/usr/sbin:...}`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T12:55:57.533

好的，最后我想通了。对于壳牌专家来说可能是一件微不足道的事情，但可以帮助某人开始。

**1\. hive : command not found** 这不是类路径问题。这是 shell 问题。我运行的环境是 korn shell（回显 $SHELL 以查找）。但是 hive 脚本（/usr/lib/hive/bin/hive.sh）是一个 bash shell。所以我在我的脚本中更改了 shebang（#！/bin/bash）并且它起作用了。

**2.Delegation Token 只能通过kerberos 或web 认证来颁发。** 在我的 hive 脚本中，我添加了`SET mapreduce.job.credentials.binary = ${HADOOP_TOKEN_FILE_LOCATION}`HADOOP_TOKEN_FILE_LOCATION 是一个保存 jobToken 位置的变量。需要传递此令牌以在安全集群中对 HDFS 数据的访问（在我的情况下，HDFS 读取操作，通过 Hive Select 查询）进行身份验证。[在此处了解有关委派令牌的更多信息](http://hortonworks.com/blog/the-role-of-delegation-tokens-in-apache-hadoop-security/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T16:33:27.430

显然，你错过了 shell 环境变量。

要确认它，`export`请在 oozie 调用的 shell 中使用。

如果你使用 oozie 调用 shell，一个简单的方法是使用`/bin/bash -l your_script`.

PS。PATH 是一个目录列表，所以你需要附加`${HIVE_HOME}/bin`到你的 PATH 不是`${HIVE_HOME}/bin/hive`。

# c++ - dllexport/dllimport 开关的宏

> ID：14980649
> 
> 赞同：14
> 
> 时间：2013-02-20T13:09:26.103
> 
> 标签：c++, visual-studio-2010, visual-c++

```
#if COMPILING_DLL
    #define DLLEXPORT __declspec(dllexport)
#else
    #define DLLEXPORT __declspec(dllimport)
#endif 
```

我如何/在哪里定义`COMPILING_DLL`？

在这里看到： [__declspec(dllimport) 的真正含义是什么？](https://stackoverflow.com/questions/8863193/what-does-declspecdllimport-really-mean)

如果我不能使用相同的标头，听起来我根本不能使用加载时动态链接？

![在此处输入图像描述](../Images/4eb86561ffe2d4362c10dbef7f2b01c9.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-06-13T15:33:56.433

**另一种选择：**

使用项目**本地****默认**定义的宏。

 **您可以在以下位置查看项目本地默认定义的宏：

**属性 -> C/C++ -> 预处理器 -> 预处理器定义。**

**例子：**

假设您的项目名称是：**MyDLL**

该项目的默认宏本地：**MYDLL_EXPORTS**

```
 #ifdef  MYDLL_EXPORTS 
    /*Enabled as "export" while compiling the dll project*/
    #define DLLEXPORT __declspec(dllexport)  
 #else
    /*Enabled as "import" in the Client side for using already created dll file*/
    #define DLLEXPORT __declspec(dllimport)  
 #endif 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-20T13:16:02.543

定义的最佳位置`COMPILING_DLL=1`是编译器的命令行。如果您使用 Visual Studio IDE，那么它位于项目属性 ... C/C++ ... 预处理器 ... 预处理器定义中。

`__declspec(dllimport)`是 Microsoft 对 C++ 的特定扩展。Microsoft 拥有出色的在线文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T13:14:23.337

在 DLL 项目中，`#define`为`COMPILING_DLL`. 因为这不会为任何其他项目设置（特别是如果您将其命名为比 更好的名称`COMPILING_DLL`），那么该`#if`指令将正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T13:16:05.803

您（在理想情况下实际上是 Visual Studio）在`COMPILING_DLL`构建 DLL 时将 定义为编译器的参数。因此，它将默认为`__declspec(dllexport)`. 另一方面，当您使用 DLL 的头文件时，您没有定义它，因此`DLLEXPORT`默认情况下将评估为`__declspec(dllimport)`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T13:45:05.827

您不能在头文件中以这种方式定义函数体。它被[__declspec(dllimport) 禁止](http://msdn.microsoft.com/en-us/library/62688esh%28v=vs.71%29.aspx)。该说明符只能在函数声明中指定，不能在定义中指定。

您必须将函数体移动到源文件。

在头文件中：

```
extern DLLEXPORT void test2(); 
```

在 .cpp 文件中：

```
void test2()
{
   // ...
} 
```

正如人们所说，不要忘记将 COMPILING_DLL 添加到项目预处理器定义中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-23T17:18:48.710

实际上，真正的问题是预处理器指令。您应该使用`#ifdef`而不是`#if`测试变量是否真正定义（我们不关心定义的值或是否存在）。

注意：我知道这个线程已有 1 年的历史，但它仍然可能对将来遇到此问题的人有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-15T13:18:00.350

如果您使用 CMake 生成构建配置，您应该能够以`<projectname>_EXPORTS`您想要使用的方式使用宏`COMPILING_DLL`，其中`projectname`使用 CMake 命令定义`project(projectname)`：

> `<target_name>_EXPORTS`检测到共享库编译时定义预处理器宏。

[来源](https://cmake.org/cmake/help/v3.14/module/FindCUDA.html)

我进行了测试，它使用 Ninja 生成器和 Visual Studio 2015 Express 的编译器 MSVC 在 Windows 上运行。

相关：[CMake 添加 -Dlibname_EXPORTS 编译定义](https://stackoverflow.com/questions/27429732/cmake-adds-dlibname-exports-compile-definition)**

# c++ - 如何使用 dlopen 检查共享库是否加载成功或未加载？

> ID：14980650
> 
> 赞同：1
> 
> 时间：2013-02-20T13:09:35.350
> 
> 标签：c++, linux, shared-libraries

我在 C++ 程序中使用 dlopen() 函数加载共享库。

那么如何检查它是否成功加载？或者我们可以使用该库中存在的任何函数的名称来检查库的加载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:12:33.007

从[手册页](http://linux.die.net/man/3/dlopen)：

> 如果**dlopen()**由于任何原因失败，则返回 NULL。

* * *

该`dlsym`函数无法处理 C++ 标识符，除非它们已被声明`extern "C"`，或者您使用了损坏的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:13:33.150

如果未成功加载，则 dlopen() 返回 NULL。

dlopen() 的手册页说：

> **返回值**
> 
> 如果找不到文件、无法打开读取、不是 dlopen() 处理的适当对象格式，或者如果在加载文件或重新定位其符号引用的过程中发生错误，则 dlopen() 应返回 NULL。应通过 dlerror() 获得更详细的诊断信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:22:28.780

正如每个人提到的，如果 dlopen() 失败，你会得到一个空值，但是如果你试图解决为什么即使你指定的路径上存在库，你也会得到神秘的空值，可以确保所有库都存在于那个“特别library" 依赖，否则调用将失败并返回 NULL ;)

使用 extern "C" 作为 .cpp 文件中的函数，这样编译器就不会破坏它，并且一旦加载库就可以调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T13:14:05.753

根据文档（[http://linux.die.net/man/3/dlopen），dlopen](http://linux.die.net/man/3/dlopen)在任何失败时都返回 NULL。所以你可以检查一下并完成。但是，如果由于某种原因您不相信该库是一个“好”的库，您可以为您的系统定义自己的约定。例如，您可以要求系统可加载的任何库都定义一个具有特定名称的符号，该符号具有某些特定属性，直到并包括诸如“API 密钥”之类的东西，您可以将其分配给想要编写兼容库的用户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T13:14:56.010

如果 dlopen 遇到错误，则返回 NULL，dlerror 将返回相应的错误消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-14T10:39:34.903

您还可以在共享库的其中一个文件中添加静态块。当它加载成功时，它会打印一条消息。例子 ：

```
struct LoadMessage {
        init(void){
        std::cout << "I am loaded\n";
        }
};

LoadMessage message; 
```

# mongodb - 集合文档中不同子类型的聚合

> ID：14980653
> 
> 赞同：1
> 
> 时间：2013-02-20T13:09:42.957
> 
> 标签：mongodb, mapreduce, aggregation-framework

集合 md 中的摘要文档给出：

```
{
    vals : [{
        uid : string,
        val : string|array
    }]
} 
```

给出了以下部分正确的聚合：

```
db.md.aggregate(
    { $unwind : "$vals" },
    { $match : { "vals.uid" : { $in : ["x", "y"] } } },
    {
        $group : { 
            _id : { uid : "$vals.uid" },
            vals : { $addToSet : "$vals.val" }

        }
    }
); 
```

这可能会导致以下结果：

```
"result" : [
    {
        "_id" : {
            "uid" : "x"
        },
        "vals" : [
            [
                "24ad52bc-c414-4349-8f3a-24fd5520428e",
                "e29dec2f-57d2-43dc-818a-1a6a9ec1cc64"
            ],
            [
                "5879b7a4-b564-433e-9a3e-49998dd60b67",
                "24ad52bc-c414-4349-8f3a-24fd5520428e"
            ]
        ]
    },
    {
        "_id" : {
            "uid" : "y"
        },
        "vals" : [
            "0da5fcaa-8d7e-428b-8a84-77c375acea2b",
            "1721cc92-c4ee-4a19-9b2f-8247aa53cfe1",
            "5ac71a9e-70bd-49d7-a596-d317b17e4491"
        ]
    }
] 
```

由于 x 是在包含数组而不是字符串的文档上聚合的结果，因此结果中的 vals 是一个数组数组。在这种情况下，我寻找的是一个扁平的数组（如 y 的结果）。

对我来说，似乎我只想通过一个聚合调用来实现的目标，目前不受任何给定操作的支持，例如无法完成类型转换或在每种情况下展开都期望将数组作为输入类型。

map reduce 是我唯一的选择吗？如果没有......任何提示？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:40:38.187

您可以使用聚合来执行所需的计算，而无需更改架构（尽管您可能会考虑更改架构只是为了使该字段的查询和聚合更易于编写）。

为了便于阅读，我将管道分成多个步骤。为了便于阅读，我还稍微简化了您的文档。

样本输入：

```
> db.md.find().pretty()
{
    "_id" : ObjectId("512f65c6a31a92aae2a214a3"),
    "uid" : "x",
    "val" : "string"
}
{
    "_id" : ObjectId("512f65c6a31a92aae2a214a4"),
    "uid" : "x",
    "val" : "string"
}
{
    "_id" : ObjectId("512f65c6a31a92aae2a214a5"),
    "uid" : "y",
    "val" : "string2"
}
{
    "_id" : ObjectId("512f65e8a31a92aae2a214a6"),
    "uid" : "y",
    "val" : [
        "string3",
        "string4"
    ]
}
{
    "_id" : ObjectId("512f65e8a31a92aae2a214a7"),
    "uid" : "z",
    "val" : [
        "string"
    ]
}
{
    "_id" : ObjectId("512f65e8a31a92aae2a214a8"),
    "uid" : "y",
    "val" : [
        "string1",
        "string2"
    ]
} 
```

管道阶段：

```
> project1 = {
    "$project" : {
        "uid" : 1,
        "val" : 1,
        "isArray" : {
            "$cond" : [
                {
                    "$eq" : [
                        "$val.0",
                        [ ]
                    ]
                },
                true,
                false
            ]
        }
    }
}
> project2 = {
    "$project" : {
        "uid" : 1,
        "valA" : {
            "$cond" : [
                "$isArray",
                "$val",
                [
                    null
                ]
            ]
        },
        "valS" : {
            "$cond" : [
                "$isArray",
                null,
                "$val"
            ]
        },
        "isArray" : 1
    }
}
> unwind = { "$unwind" : "$valA" }
> project3 = {
    "$project" : {
        "_id" : 0,
        "uid" : 1,
        "val" : {
            "$cond" : [
                "$isArray",
                "$valA",
                "$valS"
            ]
        }
    }
} 
```

最终聚合：

```
> db.md.aggregate(project1, project2, unwind, project3, group)
{
    "result" : [
        {
            "_id" : "z",
            "vals" : [
                "string"
            ]
        },
        {
            "_id" : "y",
            "vals" : [
                "string1",
                "string4",
                "string3",
                "string2"
            ]
        },
        {
            "_id" : "x",
            "vals" : [
                "string"
            ]
        }
    ],
    "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:36:02.643

如果您始终使用“vals.val”字段作为数组字段来修改架构（即使记录仅包含一个元素），您可以按如下方式轻松完成：

```
db.test_col.insert({
    vals : [
        {
            uid : "uuid1",
            val : ["value1"]
        },
        {
            uid : "uuid2",
            val : ["value2", "value3"]
        }]
    });
db.test_col.insert(
    {
        vals : [{
            uid : "uuid2",
            val : ["value4", "value5"]
        }]
    }); 
```

使用这种方法，您只需要使用两个 $unwind 操作：一个展开“父”数组，第二个展开每个“vals.val”值。所以，像这样查询

```
db.test_col.aggregate(
    { $unwind : "$vals" },
    { $unwind : "$vals.val" },
    {
        $group : { 
            _id : { uid : "$vals.uid" },
            vals : { $addToSet : "$vals.val" }
        }
    }
); 
```

您可以获得您的期望值：

```
{
    "result" : [
        {
            "_id" : {
                "uid" : "uuid2"
            },
            "vals" : [
                "value5",
                "value4",
                "value3",
                "value2"
            ]
        },
        {
            "_id" : {
                "uid" : "uuid1"
            },
            "vals" : [
                "value1"
            ]
        }
    ],
    "ok" : 1
} 
```

不，您不能使用当前模式执行此查询，因为当字段不是数组字段时 $unwind 会失败。

# javascript - MVC3 阻止导航离开页面

> ID：14980654
> 
> 赞同：0
> 
> 时间：2013-02-20T13:09:43.797
> 
> 标签：javascript, jquery, asp.net-mvc-3

当单击页面上的链接时，如何防止页面不导航。我有下面的代码，但它反而显示了两次消息。该页面还有一个数据网格。只有当我通过单击网格上的记录离开页面时，才会显示两次弹出消息。其他地方都很好。

```
 var canShowWarning = "@(Model.CanEdit)";
var showWarning = false;

window.onbeforeunload = function () {
    if (canShowWarning && showWarning) {
        return 'You have made unsaved changes';
    }
}
$(function () {
$("#Form").submit(function () {
        showWarning = false;
    });

    $("#Form").change(function () {
        showWarning = true;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:17:40.260

```
var canShowWarning = "@(Model.CanEdit)";
var showWarning = false;
var alreadyShown = false;

window.onbeforeunload = function () {
    if (canShowWarning && showWarning && !alreadyShown) {
        alreadyShown = true;
        return 'You have made unsaved changes';
    }
}
$(function () {
$("#Form").submit(function () {
        showWarning = false;
    });

    $("#Form").change(function () {
        showWarning = true;
        alreadyShown =  false;
    });
}); 
```

# php - 会话标头重定向不起作用

> ID：14980656
> 
> 赞同：1
> 
> 时间：2013-02-20T13:09:50.560
> 
> 标签：php, session

您好，当用户输入错误的用户名或密码时，我正在做小型登录表单，它重定向到登录页面，但在我的脚本标题功能不起作用

这是 logging.php 页面

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<style type="text/css">
* { font-family: Verdana; font-size: 96%; }
label { width: 10em; float: left; }
label.error { float: none; color: red; padding-left: .5em; vertical-align: top; }
p { clear: both; }
.submit { margin-left: 12em; }
em { font-weight: bold; padding-right: 1em; vertical-align: top; }
</style>
  <script>
  $(document).ready(function(){
    $("#commentForm").validate();
  });
  </script>

</head>
<body>

 <form class="cmxform" enctype="multipart/form-data" id="commentForm" method="post" action="buy.php">
 <fieldset>
   <legend>A simple comment form with submit validation and default messages</legend>
   <p>
     <label for="cname">Name</label>
     <em>*</em><input id="name" name="name" size="25" class="required" minlength="2" />
   </p>
   <p>
     <label for="cemail">Password</label>
     <em>*</em><input id="password" type="password" name="password" size="25"  class="required" />
   </p>
   <p>&nbsp;</p>
  <p>&nbsp;</p>
   <p>
     <input class="submit" type="submit" value="login"/>
   </p>
 </fieldset>
 </form>
</body>
</html> 
```

这是登录后的buy.php页面，它转到此页面

```
<?php
session_start();

$Name = $_POST['name'];
$Pass = $_POST['password'];

//STEP 1 Connect To Database
$host= "localhost";
$dbname= "register";
$user = "root";
$pass = "";

try {  
  # MySQL with PDO_MYSQL  
  $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);  
  //$DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
  $STH = $DBH->query("SELECT username, password from tbl_users");
  $STH->execute();

  //STEP 2 Declare Variables

$Query = $DBH->query("SELECT * FROM tbl_users WHERE username='$Name' AND password='$Pass'");
$Query->execute();
$Query->setFetchMode(PDO::FETCH_NUM); 

$NumRows = $Query->fetch();
$_SESSION['name'] = $Name;
$_SESSION['password'] = $Pass;

//STEP 3 Check to See If User Entered All Of The Information

if(empty($_SESSION['name']) || empty($_SESSION['password']))
{
die("could not connect");
}

if($Name && $Pass == "")
{
die("Please enter  a name and password!");
}

if($Name == "")
{
die("Please enter your name!" . "</br>");
}

if($Pass == "")
{
die("Please enter a password!");
echo "</br>";
}

//STEP 4 Check Username And Password With The MySQL Database

if($NumRows != 0)
{

$STH->setFetchMode(PDO::FETCH_ASSOC); 
while($Row = $STH->fetch())
{
$dname = $Row['username'];
$dpass = $Row['password'];

}

}
else
{
die("Incorrect Username or Password!");

 if( $_SESSION['name']!= $dname || $_SESSION['password'] != $dpass) 
 {
    header("location: login.php");
  } 
  else 
  {
     header("location: http://www.google.com");
  }

}

if($Name == $dname && $Pass == $dpass)
{
// If The User Makes It Here Then That Means He Logged In Successfully
echo "Hello " . $Name . "!";
}
}  

catch(PDOException $e) {  
    echo "I'm sorry, Dave. I'm afraid I can't do that.";  
    $e->getMessage(); 
} 
?>
<html>
<body>
<p>Here is where you can put information for the user to see when he logs on. (Anything inside these html tags!)</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:15:04.753

当您使用：

```
die("Incorrect Username or Password!"); 
```

它将输出文本：`Incorrect Username or Password!`并且在使用标题时，在调用它之前不得输出任何内容。

从[文档](http://php.net/manual/en/function.header.php)：

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

**编辑**

实际上`die`是等价的，`exit`所以一旦你点击那行，脚本的其余部分就不会运行。所以对 header() 的调用永远不会进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:22:54.177

die("用户名或密码错误！"); 它将输出文本：用户名或密码不正确！并且在使用标头时，您不能在调用它之前输出任何内容。因为当你使用 header 时，请记住不要使用 before header 函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:17:30.560

检查`<?php`标签前是否有空格，如果有，请将其删除

改变 ：

`if($Name && $Pass == "")`

至 ：

`if($Name=="" && $Pass == "")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T13:17:48.080

在使用标头之前您不能输出任何内容，它会产生标头已发送错误。当用户输入错误的用户名或密码时，使用 url 中的标志（如 ?error=true）进行重定向，并触发 javascript 代码显示登录无效的错误消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T13:25:11.683

超出主题，您需要更改此行。因为您似乎是直接从帖子中获取这些变量，这并不安全。

```
// wrong
$Query = $DBH->query("SELECT * FROM tbl_users 
    WHERE username='$Name' AND password='$Pass'");
$Query->execute();

// true
$Query = $DBH->query("SELECT * FROM tbl_users 
    WHERE username = :username AND password = :password");
$Query->execute(array(':username' => $Name, ':password' => $Pass)); 
```

在此处查看更多详细信息：http: [//php.net/manual/en/pdostatement.execute.php](http://php.net/manual/en/pdostatement.execute.php)

# javascript - 通过 rails 中的 hidden_ field 传递值

> ID：14980658
> 
> 赞同：2
> 
> 时间：2013-02-20T13:09:58.380
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我正在尝试在我的应用程序中实现评级系统，我尝试了 Rateit 但无法让它工作，所以我想我会尝试构建自己的，而且我希望通过了解这个过程来学习更多

目前我正在尝试传递点击星的值

### 形式

```
<%= form_for @rating do |f| %>
  <%= f.hidden_field :ratings, :id => "hiddenRating", :value => '' %>
  <%= f.hidden_field :user_id, :value => current_user.id %>
  <%= f.hidden_field :recipe_id, :value => @recipe.id %>
  <div class="ratings">
    <ul>
      <li id="firstStar"></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
    </ul>
  </div>
  <%= f.submit "Submit" %>
<% end %> 
```

### JS

```
$(document).ready(function(){
  $('#firstStar').click(function(){
    $('#hiddenRating').value = 1;
  });
}); 
```

所以想法是，如果用户单击第一个星，则应将值 1 作为表单中的评级值传递，这不会发生，因为我不知道在其中传递什么

```
:value => '' 
```

我相信有更好的方法可以做到这一点，但正如我所说，我想一点一点地学习，以便到最后我可以把它们放在一起，当然如果有人有更好的建议，请告诉我。

## 编辑

### 控制器

```
def new
  @rating = Rating.new

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @rating }
  end
end

def create
  @rating = Rating.new(params[:rating])

  respond_to do |format|
    if @rating.save
      format.html { redirect_to @rating, notice: 'Rating was successfully created.' }
      format.json { render json: @rating, status: :created, location: @rating }
    else
      format.html { render action: "new" }
      format.json { render json: @rating.errors, status: :unprocessable_entity }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:43:52.263

好的，希望这可以帮助处于类似情况的其他人，我的表格现在看起来像这样

```
<%= f.hidden_field :ratings, :id => "hiddenRating"%>#Value has been removed 
```

我的 Jquery 看起来像这样

```
$(document).ready(function(){
 $('#firstStar').click(function(){
  $('#hiddenRating').val(1);
 });
}); 
```

无需在表单中传递值，因为 .val() 将其分配给 id

反正这是我的理解

# c# - 如何将 Type 转换为视觉上不错的、visual-studio 风格的字符串

> ID：14980660
> 
> 赞同：0
> 
> 时间：2013-02-20T13:10:01.810
> 
> 标签：c#, reflection

我编写了一个反射工具来分析我们数据模型的接口层次结构。

在我的自定义类中，我有一个`List<Type>`，其中包含我要显示的所有属性。我写了一个`PropertyWrapper`类，让我更容易很好地显示这些某些属性：

```
public class PropertyWrapper
{
    public PropertyInfo PropertyInfo { get; set; }
    public string PropertyType { get; set; }
    public string PropertyName { get; set; }

    public PropertyWrapper(PropertyInfo propertyInfo)
    {
        PropertyInfo = propertyInfo;

        if (propertyInfo != null)
        {
            PropertyNameString = propertyInfo.Name;

            if (propertyInfo.PropertyType.IsGenericType)
                PropertyTypeString = propertyInfo.PropertyType.FullName.Split('`').First().Split('.').Last()
                                     + "<"
                                     + propertyInfo.PropertyType.GenericTypeArguments.First()
                                                   .FullName.Split('.')
                                                   .Last()
                                     + ">";
            else
                PropertyTypeString = propertyInfo.PropertyType.FullName.Split('.').Last();
        }
    }
} 
```

我的 Xaml 是这样的：

```
<DataTemplate DataType="PropertyWrapper">
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding PropertyType}" FontWeight="Bold" />
        <TextBlock Text="{Binding PropertyName}" Margin="5 0 0 0" />
    </StackPanel>
</DataTemplate> 
```

我的目标是能够以类似 Visual Studio 的样式显示某些属性。问题不在于属性名称，更有可能是`PropertyType`，它实际上看起来像这样 ( `.ToString()`): `System.Collections.Generic.IList'1[System.Object]`。但我想要的是这样的字符串：（`IList<Object>`实际上`IList<object>`，但我们不要太完美主义）。

我的问题是，由于我经常执行此代码，是否有更有效/优雅的方法来实现这一点？我在想，如果我们的代码库变得越来越大，这个反射代码可能无法扩展。

我也很高兴批评有关此反射代码的批评，因为我对反射还很陌生。它会在哪里失败，我在哪里可以编写更安全的代码？但是，它不是生产代码，只是开发人员的工具。

关于代码，要说的一点是，其中没有任何具有多个泛型参数的泛型类型。

**编辑**

关于stackoverflow代码块格式的一个小问题。我可以以某种方式转义内联代码块中的“`”字符吗？不将其用作代码块初始化程序，而是将其用作文本中的普通字符，它几乎弄乱了我的格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:18:56.253

我不会太在意“字符串处理”的速度。

反射操作要慢得多，所以关注如何减少那个时间。

您可以使用 2 种方法：

1）仅使用反射程序集使用加载（它更快：

```
Assembly.ReflectionOnlyLoad()
Assembly.ReflectionOnlyLoadFrom() 
```

2) 使用程序集唯一签名缓存结果并将结果保存到文件中（即使用序列化），因此您无需重新加载已解析的程序集。

希望这可以帮助

# symfony - 在 symfony 2 的站点布局中渲染不同的控制器视图

> ID：14980661
> 
> 赞同：0
> 
> 时间：2013-02-20T13:10:02.433
> 
> 标签：symfony, twig, symfony-2.1

我有一个带有侧边栏的布局。在侧边栏内，有一个用于显示类别列表的块。我已经调用了一个控制器（获取类别列表）以在此块内呈现。这是我的侧边栏的样子：

这是我的包含侧边栏的主要布局文件：

```
<!--  siteLayout.html.twig   -->
<div id="sidebar">
  {% block sidebarBlock1 %}
    {% render "TestBundle:Index:categoryList" %}
  {% endblock %}
</div> 
```

**TestBundle:Index:categoryList**从数据库中获取类别列表并返回如下：

```
<ul>
   <li><a href="/category/1">Category 1</a></li>
   <li><a href="/category/2">Category 2</a></li>
</ul> 
```

我所有的其他视图都扩展了 siteLayout.html.twig。我想要的是，当用户加载此 url “/category/1”时，我想将 css 类添加到 li 标签。

例如，如果有人点击 /category/1 那么输出应该是

```
<li class="active">.......</li> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:22:50.027

```
<li  {% if app.request.attributes.get('_route') == 'category_view' %} 
         class="active" 
     {% endif %}>
</li> 
```

如果路线与您的类别路线匹配，请检查路线并设置类别。将 category_view 替换为 /category 的路由名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:05:29.233

```
 {%if app.request.server.get('REQUEST_URI')== path('viewCategoryItems', {'slugName': category.slugName})%} class="active"{%endif%} 
```

这对我有用

# duplicates - BIRT DataSet 删除重复项

> ID：14980662
> 
> 赞同：0
> 
> 时间：2013-02-20T13:10:04.873
> 
> 标签：duplicates, reporting, birt

我知道如何使用抑制重复项或通过可见性从表中删除重复项。有没有办法从数据集中删除重复项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:40:05.170

如果您使用 SQL 查询来获取您的数据集，那么您可以将您的更改`SELECT`为 `SELECT DISTINCT`.

# ios - 在 iPhone 通话期间检测暂停

> ID：14980667
> 
> 赞同：0
> 
> 时间：2013-02-20T13:10:15.013
> 
> 标签：ios, iphone, twilio, core-audio, phone-call

我需要在通话时检测暂停（可能是 VOIP 通话）并使用 Core Audio API 自动发送预先录制的回复。我也探索了 Twilio API，我想知道以下事情的可行性 -

1.  是否可以在对方通话时检测到暂停，无论是正常通话还是 VOIP 通话？
2.  是否可以在 iOS 实时通话期间插入预先录制的音频文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-21T06:20:37.007

在 iOS 10中引入[CallKit](https://developer.apple.com/documentation/callkit)后，您可以检测用户是否使用 DTMF 进行了任何操作，这通常是接听 IVR 呼叫的方式。在正常的人机交互的情况下，这应该是不可能的，因为每个调用都具有 supportDTMF 的这个[属性](https://developer.apple.com/documentation/callkit/cxcallupdate/1648585-supportsdtmf)

在相反的情况下，您可以在以编程方式拨打电话时添加软暂停和硬暂停，也可以使用简单的[init](https://developer.apple.com/documentation/callkit/cxplaydtmfcallaction/2147857-init)调用。

# java - 如何从资源加载 Log4j2 配置文件

> ID：14980668
> 
> 赞同：2
> 
> 时间：2013-02-20T13:10:19.590
> 
> 标签：java, log4j2

我想知道如何从嵌入在我的应用程序中的资源加载 Log4j 的配置文件？

也就是说，我的计算机本身没有文件，该文件嵌入在我的应用程序中，我想加载它。

以下是我使用的代码：

```
ConfigurationSource source = new ConfigurationSource(Main.class.getResourceAsStream("/in/gunbound/prelauncher/server/log4j2/log4j2.xml"));
ConfigurationFactory factory = (ConfigurationFactory) XMLConfigurationFactory.getInstance().getConfiguration(source);
ConfigurationFactory.setConfigurationFactory(factory); 
```

但结果是这个例外：

> 线程“主”java.lang.ClassCastException 中的异常：org.apache.logging.log4j.core.config.XMLConfiguration 无法在 in.gunbound.prelauncher.server 中转换为 org.apache.logging.log4j.core.config.ConfigurationFactory .Main.main(Main.java:62)

我不想让用户看到设置文件，所以我遇到了这个问题，你知道吗？

有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:16:55.273

请参阅[此内容](http://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/config/ConfigurationFactory.html#getConfiguration%28org.apache.logging.log4j.core.config.ConfigurationFactory.ConfigurationSource%29)以供参考。

的返回类型`XMLConfigurationFactory.getInstance().getConfiguration(source);`不是。`Configuration``ConfigurationFactory`

# jquery - Jquery EasyUI 选项卡布局

> ID：14980676
> 
> 赞同：2
> 
> 时间：2013-02-20T13:10:40.600
> 
> 标签：jquery, tabs, html, jquery-easyui

我正在使用 jQuery EasyUI Tabs 开发一个 Web 应用程序。

我在应用程序的左侧有几个垂直链接，单击这些新选项卡将添加到顶部的水平 jQuery EasyUI 选项卡条上。

我已经通过`addTab()`单击垂直链接的功能来实现这一点。这将添加一个以 iFrame 作为其内容的选项卡，并在此 iframe 中加载子页面。一切正常，但我不想垂直或水平地“包含”页面。

使用 jQuery EasyUI 选项卡迫使我这样做，因为它带有 jQ​​uery easyUI - 选项卡 - 容器 css，它创建了一个加载 iframe 的框。

这是我现在所拥有的：

![当前实施](../Images/f6af33b9e931ca262d51d016ab6790ff.png)

我打算把它变成这样。。

![计划实施](../Images/caab462d302bcae6baacd55163a93013.png)

有人可以帮助我开发像 css 这样的布局，其中我的标题在北部区域，在西部区域的 bertical 链接和在中心区域的 jQuery EasyUI 选项卡面板。

页面滚动必须仅用于中心区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:18:44.303

我通过`layout`在easyui中使用实现了相同的...这里是[文档](http://jeasyui.com/documentation/index.php#)...

注意文档本身的布局.... :).. 它与您所要求的（我认为）相同.. 查看源代码可能会对您有所帮助.. 因为我做了同样的...只是让当然..您离开中心区域的宽度和高度自动（100％）..这将为您提供所需的滚动条..

**更新**

使用 easyui-layout 类

```
<div class="easyui-layout" style="width: auto; height: 950px;">
  <div region="west" split="true" title="yourTitle" style="width: 225px;"> //width of left container
      //content of left container
  </div>
  <div id="content" region="center" style="padding: 5px;"> //this is the center part
      <div id="tt" class="easyui-tabs" style="width: auto; height: 900px;">
           //this is center tab part
       </div>
  </div>
</div> 
```

# android - android在滑动时改变视图

> ID：14980679
> 
> 赞同：0
> 
> 时间：2013-02-20T13:11:02.800
> 
> 标签：android, gesturedetector

我正在寻找一种方法来更改`TextViews`用户滑动包含这些视图的布局时的内容。我的目标是这样的： ![在此处输入图像描述](../Images/ec6a87888703139e524ee25eafc77b2b.png)

我正在尝试使用`SimpleOnGestureListener`（代码如下）来做到这一点。问题：当我从左向右滑动时，i 的值变为-1，并且后续滑动没有反应。从右向左滑动会导致 i 变为 1（到底是零？）并且视图再次停止对滑动做出反应。我究竟做错了什么？

```
 public class MainActivity extends Activity {
private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;
private GestureDetector gestureDetector;
public View mainview;
public TextView lol;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    gestureDetector = new GestureDetector(new MyGestureDetector());
    mainview = (View) findViewById(R.id.mainView);
    lol = (TextView) findViewById(R.id.textView2);

    mainview.setOnTouchListener(new View.OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            if (gestureDetector.onTouchEvent(event)) {
                return true;
            }
            return false;
        }
    });
}

class MyGestureDetector extends SimpleOnGestureListener {
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        int i = 0;

        if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH) {
            return false;
        }

        if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
                && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            i++;
            lol.setText("Text" + " " + Integer.toString(i));

            return true;
        } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE
                && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            i--;
            lol.setText("Text" + " " + Integer.toString(i));

            return true;
        }

        return false;
    }

    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }
}
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:38:58.687

你为什么不使用[viewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)？它完全满足您的需求并支持指标。有一些带有指标的自定义库，您可以在其中找到您需要的确切指标，例如[这个很好](http://viewpagerindicator.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:45:07.240

不用管理手势，而是使用 Gallery 或 Horizo​​ntal ScrollView 或 ViewPager

# google-app-engine - GAE在启动服务器时创建GAE的多个进程ID

> ID：14980681
> 
> 赞同：0
> 
> 时间：2013-02-20T13:11:06.737
> 
> 标签：google-app-engine

当我启动服务器 GAE 时，总是创建新的进程，

**`ant runserver`**

build.xml

```
 <target name="runserver" depends="datanucleusenhance"
      description="Starts the development server.">
    <dev_appserver war="war" />
  </target>

C:\>netstat -a -n -o | grep 8080
  TCP    127.0.0.1:8080         0.0.0.0:0              LISTENING       6496
  TCP    127.0.0.1:8080         0.0.0.0:0              LISTENING       2288
  TCP    127.0.0.1:8080         0.0.0.0:0              LISTENING       2572
  TCP    127.0.0.1:8080         0.0.0.0:0              LISTENING       7240
  TCP    127.0.0.1:8080         0.0.0.0:0              LISTENING       1672
  TCP    127.0.0.1:8080         0.0.0.0:0              LISTENING       7492
  TCP    127.0.0.1:8080         0.0.0.0:0              LISTENING       5660 
```

如何使用我的 build.xml 脚本停止 GAE 实例，或者使用哪个命令停止 GAE 实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:31:43.103

通常，当您在控制台窗口中调用“ant runserver”时，生成的 Java 进程会作为活动作业在前台运行。因此，为了阻止它，您只需键入 Control-C（或 Windows 上的 Control-BREAK）。

（ App Engine 文档中的[此页面](https://developers.google.com/appengine/docs/java/tools/ant?hl=en)提到了 Control-C。有关Windows 上的 Control-BREAK，请参见[此处。）](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682541%28v=vs.85%29.aspx)

# woocommerce - woocommerce add_to_cart

> ID：14980687
> 
> 赞同：0
> 
> 时间：2013-02-20T13:11:17.050
> 
> 标签：woocommerce

当我编程时：

```
$woocommerce->cart->add_to_cart( $group_product_id, 1); 
```

作为产品发布`$group_product_id`ID（例如 300），购物车显示的数量是 2 而不是 1。

当我直接输入 URL（例如[http://www.mystore.com/shop/stuff?add_to_cart=300](http://www.mystore.com/shop/stuff?add_to_cart=300)）时，购物车显示数量为 1（正确的预期行为）。

任何建议都会非常有帮助。

谢谢你。

PS Bonus 问题：在将用户带到购物车页面之前，有什么方法可以编程将多个项目添加到购物车（未分组或变体）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-14T13:24:37.633

分组产品不能直接添加到购物车。组产品实际上是一组简单的产品。`$group_product_id`构成分组产品的任何简单产品的 id 也应该如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T02:42:44.717

您必须在 $woocommerce->cart->add_to_cart 上使用的前两个参数是 $product->id 和/或要添加的数量。post id 与这里无关。

您可以使用 ajax 调用一次添加多个产品，但在评论中描述并不那么简单，这取决于您的配置、主题等，但是是的，这是可能的，事实上我最近做了类似的事情. 关键是使用实际调用 add_to_cart 函数的同步 ajax 调用。您可以使用 jquery 同时触发多个添加到购物车按钮。

# c# - 如何防止 EntityFramework 生成多个外键关系？

> ID：14980690
> 
> 赞同：0
> 
> 时间：2013-02-20T13:11:26.090
> 
> 标签：c#, entity-framework, ef-code-first

我有以下模型类

```
public class MenuItem
{
    public int MenuItemId { get; set; }
    public int MenuId { get; set; }
    public Menu Menu { get; set; }
    public string Name { get; set; }
    public int Price { get; set; }
    public MenuType MenuType { get; set; }
}

public class Menu 
{
    public int MenuId { get; set; }
    public DateTime Date { get; set; }
    public ICollection<MenuItem> BreakFast { get; set; }
    public ICollection<MenuItem> Lunch { get; set; }
    public ICollection<MenuItem> Snacks { get; set; }
    public ICollection<MenuItem> Dinner { get; set; }
} 
```

现在我的理解是，根据 EF Code First 约定，它应该生成表

**菜单项**

将**MenuItemId**作为主键，**将 MenuId**作为外键，但由于某些原因，EF 不断为 MenuId 生成重复的外键（准确地说是额外的 4 个），例如**MenuId1、2、3、4**。

是因为我有`ICollection`MenuItems 吗？

我不明白为什么这应该是一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:16:33.853

您当前的设置将创建与`MenuItem`表的四种不同关系。如何更改您的模型以便`Menu`拥有一个`ICollection<MenuItem> MenuItems`. 这将包含所有`MenuItem`s，对于所有`MenuType`s。

然后，您可以为`BreakfastMenuItems`、`LunchMenuItems`等创建属性，`MenuItems`基于该`MenuType`属性进行过滤。或者，创建一个`Menu.GetMenuItemsByType(MenuType menuType)`返回所需结果的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:42:28.430

是的，这是因为您的菜单类中的集合而发生的。从您的模型中，EF 推断出一个菜单项可以属于菜单中的早餐、午餐、小吃、晚餐列表。任何菜单项都可以是全部/部分/没有。所以这是它生成的最直接的设计。

然而，代码的重点是......首先编码。一旦你弄清楚你的模型，那么你总是可以做一些小的改变。

# android - Android：从 URL 显示打开 Activity 而不是在最近的应用程序中调用应用程序

> ID：14980691
> 
> 赞同：0
> 
> 时间：2013-02-20T13:11:26.510
> 
> 标签：android, intentfilter

我的活动中有一个`IntentFilter`集合，例如：

```
<intent-filter>
            <data android:host="www.example.com" android:scheme="http" android:pathPrefix="/d/"/>
            <action android:name="android.intent.action.VIEW"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <category android:name="android.intent.category.BROWSABLE"/>
 </intent-filter> 
```

按下链接时启动 Activity 效果很好，问题是在查看最近的应用程序时，我的 Activity 显示在调用应用程序的预览中，而不是拥有自己的实例。

例如：如果从 WhatsApp 中单击带有 url 的链接，在最近的应用程序中，我会在 WhatsApp 的预览中看到我的活动，而不是看到我的应用程序除了 WhatsApp 之外还打开了。

我检查了其他应用程序，但没有一个是那样的。

我该如何解决 ？

# python - 如何将表单中的数据添加到电子邮件内容？

> ID：14980693
> 
> 赞同：0
> 
> 时间：2013-02-20T13:11:29.033
> 
> 标签：python, django

```
if form.is_valid():
    name = form.cleaned_data['name']
    phone = form.cleaned_data['phone']
    email = form.cleaned_data['email']
    content = form.cleaned_data['content']

    subject = 'Subject'
    body = 'Your data: name: name, phone: phone, your question: content' 
```

如何将表单中的数据（姓名、电话和内容）添加到电子邮件内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:15:06.613

```
body = "Your data: name: %s, phone: %s, your question: %s" % (name, phone, content) 
```

或者

```
body = "Your data: name: " + name + ", phone: " + str(phone) + ", your question: " + content 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:19:40.247

您可以使用

```
"Your String".format() 
```

它适用于新旧python版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:16:44.883

最pythonic的方式是使用`string.format()`

像这样：

```
first_name = 'Peter'
last_name = 'Pan'
email = 'peter.pan@wunderland.com'

body = 'Hello, my name is {first_name} {last_name}. Send me a mail to {email}.'.format(first_name=first_name, last_name=last_name, email=email) 
```

你也可以传入一个`dict`。`string.format()`

# c++ - 如何将文件中的一行数字读入列表中？

> ID：14980700
> 
> 赞同：-1
> 
> 时间：2013-02-20T13:11:43.480
> 
> 标签：c++

假设我有一个 .in 文件，其中第一行数据“3 59 98”和第二行数据“8 52 77 45”。

我正在尝试将每一行整数读入一个列表。我已经了解如何制作列表并将数字放入列表中。我遇到的问题是如何将第一行数字放入列表对象中。

以下是我到目前为止的想法：

```
// in is a filestream object
int a
while (in >> a)
{
     integer_list.push_back(a);
} 
```

我知道这不起作用，因为它将两行数字都放在一个列表中。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:15:17.097

使用[getline](http://en.cppreference.com/w/cpp/string/basic_string/getline)读取整行，然后`std::istringstream`从该行创建。从`std::istringstream`列表中的数字中读取，就像从文件流中读取一样。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-20T13:23:08.857

您需要做的是创建一个整数列表列表，尽管在 C++ 中您更喜欢使用[vector](http://www.cplusplus.com/reference/vector/vector/)。

```
std::vector< std::vector<int> > list_of_integer_lists; 
```

然后为每一行添加一个新列表或向量。

```
list_of_integer_lists.push_back( std::vector<int>() ); 
```

并且对于每一行，您将数字添加到最后一个列表中。

```
list_of_integer_lists.back().push_back( number ); 
```

# visual-studio - 如何在 Visual Studio 2012 中更改 ipch 路径

> ID：14980701
> 
> 赞同：3
> 
> 时间：2013-02-20T13:11:46.093
> 
> 标签：visual-studio, visual-studio-2012

我看到 VS2012 在解决方案文件夹中创建了一些文件（.sdf、.suo、.ipch 等）。是否可以更改创建这些文件的文件夹？

VS2010 的方法在 VS2012 中不起作用，见截图： ![在此处输入图像描述](../Images/fe55c2fee79aac81c0d54c9e2ea27838.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-11T01:15:49.637

转到**工具**->**选项**->**文本编辑器**-> **C/C++** ->**高级**

在“ **Fallback Location** ”中，将“ **Always Use Fallback Location** ”设置为`True`“ **Do Not Warn If Fallback Location Used** ” `True`。在“**后备位置**”中，您可以将其留空，VS 将使用您的`%TEMP%`文件夹，或者指定您选择的其他位置。

（请注意 .suo 文件仍将位于您的解决方案旁边）

# shiro - apache shiro 允许多个角色访问一个 url 不起作用

> ID：14980703
> 
> 赞同：16
> 
> 时间：2013-02-20T13:11:53.213
> 
> 标签：shiro

我有一个简单的网络项目。我想在这个项目中访问多个角色是一个 URL。

网址的 sihor.ini 部分

```
[urls]
/login.xhtml = authc
/logout = logout
/admin/** = user, roles[admin]
/guest/** = user, roles[admin,guest] 
```

当用户管理员的角色访问来宾目录时，我收到 401 错误。

为什么？

shiro 版本 1.2.1

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-24T10:29:05.083

还有另一种选择：使用`OR`提供的角色集而不是`AND`.

```
import org.apache.shiro.subject.Subject;
import org.apache.shiro.web.filter.authz.RolesAuthorizationFilter;

import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import java.io.IOException;

/**
 * Allows access if current user has at least one role of the specified list.
 * 
 * Basically, it's the same as {@link RolesAuthorizationFilter} but using {@literal OR} instead
 * of {@literal AND} on the specified roles.
 *
 * @see RolesAuthorizationFilter
 * @author Andy Belsky
 */
public class AnyOfRolesAuthorizationFilter extends RolesAuthorizationFilter {

    @Override
    public boolean isAccessAllowed(ServletRequest request, ServletResponse response,
                                   Object mappedValue) throws IOException {

        final Subject subject = getSubject(request, response);
        final String[] rolesArray = (String[]) mappedValue;

        if (rolesArray == null || rolesArray.length == 0) {
            //no roles specified, so nothing to check - allow access.
            return true;
        }

        for (String roleName : rolesArray) {
            if (subject.hasRole(roleName)) {
                return true;
            }
        }

        return false;
    }
} 
```

中的用法`shiro.ini`是这样的：

```
[main]
...
anyofroles = com.your.package.AnyOfRolesAuthorizationFilter

[urls]
...
/path/to/some/url = anyofroles["role1,role2"] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-08T09:27:35.740

代替

`/guest/** = user, roles[admin,guest]`

试用

```
/guest/** = user, roles[admin],roles[guest] 
```

# opengl - 如何在立方体上获得平坦的法线

> ID：14980712
> 
> 赞同：5
> 
> 时间：2013-02-20T13:12:17.717
> 
> 标签：opengl, glsl, opengl-3

我正在使用没有弃用功能的 OpenGL，并且我的光照计算是在片段着色器上完成的。所以，我正在做平滑的阴影。

我的问题是，当我绘制立方体时，我需要平面法线。所谓平面法线，我的意思是面部生成的每个片段都具有相同的法线。

到目前为止，我对此的解决方案是为每个面生成不同的顶点。所以，现在我有 24(6*4) 个顶点，而不是 8 个顶点。

但这对我来说似乎是错误的，复制顶点。有没有更好的方法来获得平坦的法线？

更新：我使用的是 OpenGL 版本 3.3.0，我还不支持 OpenGL 4。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T13:48:05.743

如果您在相机空间中进行照明，则可以使用 dFdx/dFdy 从顶点的相机空间位置计算人脸的法线。

所以片段着色器看起来有点像这样。

```
varying vec3 v_PositionCS; // Position of the vertex in camera/eye-space (passed in from the vertex shader)

    void main()
    { 
      // Calculate the face normal in camera space
      vec3 normalCs = normalize(cross(dFdx(v_PositionCS), dFdy(v_PositionCS)));

      // Perform lighting 
      ...
      ...
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T13:44:08.083

由于几何着色器可以一次“看到”三角形的所有三个顶点，因此您可以使用几何着色器计算法线并将它们发送到片段着色器。这样，您不必复制顶点。

```
// Geometry Shader

#version 330 

layout(triangles) in;
layout(triangle_strip, max_vertices = 3) out;

out vec3 gNormal;

// You will need to pass your untransformed positions in from the vertex shader
in vec3 vPosition[];

uniform mat3 normalMatrix;

void main()
{
    vec3 side2 = vPosition[2] - vPosition[0];
    vec3 side0 = vPosition[1] - vPosition[0];
    vec3 facetNormal = normalize(normalMatrix * cross(side0, side2));

    gNormal = facetNormal;
    gl_Position = gl_in[0].gl_Position;
    EmitVertex();

    gNormal = facetNormal;
    gl_Position = gl_in[1].gl_Position;
    EmitVertex();

    gNormal = facetNormal;
    gl_Position = gl_in[2].gl_Position;
    EmitVertex();

    EndPrimitive();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T14:00:56.047

另一种选择是将 MV-matrix 和未旋转的 AxisAligned 坐标传递给片段着色器：

```
 attribute aCoord;
 varying vCoord;
 void main() {
    vCoord = aCoord;
    glPosition = aCoord * MVP;
 } 
```

在片段着色器中，可以通过计算 vCoord 的主导轴来识别法线，将其设置为 1.0（或 -1.0），将其他坐标设置为零——即法线，它必须由 MV 矩阵旋转。

# google-maps-api-3 - Amazon EC2 上的弹性 IP - 这如何影响速率限制？

> ID：14980715
> 
> 赞同：-2
> 
> 时间：2013-02-20T13:12:23.060
> 
> 标签：google-maps-api-3, amazon-web-services, amazon-ec2, ip, debian

我有一个快速的问题。我一直在阅读有关 Amazon EC2 实例的弹性 IP。我想知道，我对服务器所做的很多事情都是基于 IP 限制的，例如谷歌地图地理编码，每个 IP 限制为 2,500 个（我相信它仅限于 IP 而不是服务器）。

首先，如果我有 3 个弹性 IP 连接到我的 Amazon EC2 实例，这是否意味着我的服务器实际上可以位于三个不同的 IP 上，所以我可以有效地将我可以制作的谷歌地图地理编码数量增加三倍？

其次，有没有办法确定我的服务器使用哪个 IP，并且可以在服务器运行时更​​改它吗？

我并没有试图做任何非法的事情，我也向谷歌发送了电子邮件，但这只是为了进一步了解我的知识，看看这是否可能/合法。任何信息都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:42:02.357

一个弹性 IP 只能绑定一个正在运行的实例。在运行时可以重新映射 IP（例如更改为另一个 IP，或将当前使用的 IP 提供给另一个实例）。

请参阅[底部的亚马逊功能指南及其常见问题解答。](http://aws.amazon.com/articles/1346)

作为旁注，我认为现在很多 Google Maps API 请求都是基于用户的（例如，您必须发送特定于您帐户的令牌），而不是基于每个 IP。

# java - 在 Java 中读取 Excel 工作表的更好 API - JXL 或 Apache POI

> ID：14980717
> 
> 赞同：95
> 
> 时间：2013-02-20T13:12:26.987
> 
> 标签：java, excel, apache-poi, jxl

2 个 API 中的哪一个更易于读取/写入/编辑 Excel 表格？这些 API 不支持 CSV 扩展吗？

对 file.xls 和 file.xlsx 使用 JXL，我得到一个异常，例如：

```
jxl.read.biff.BiffException: Unable to recognize OLE stream
    at jxl.read.biff.CompoundFile.<init>(CompoundFile.java:116)
    at jxl.read.biff.File.<init>(File.java:127)
    at jxl.Workbook.getWorkbook(Workbook.java:268)
    at core.ReadXLSheet.contentReading(ReadXLSheet.java:46)
    at core.ReadXLSheet.init(ReadXLSheet.java:22)
    at core.ReadXLSheet.main(ReadXLSheet.java:72) 
```

适用于 .xls 和 .xlsx 扩展名。我使用的Java版本是：JDK1.6

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2013-02-20T18:12:07.553

我使用了[JXL](http://sourceforge.net/projects/jexcelapi/)（现在是“JExcel”）和[Apache POI](http://poi.apache.org/)。起初我使用 JXL，但现在我使用 Apache POI。

首先，这两个 API 具有相同的最终功能：

*   两者都是免费的
*   单元格样式：对齐、背景（颜色和图案）、边框（类型和颜色）、字体支持（字体名称、颜色、大小、粗体、斜体、删除线、下划线）
*   公式
*   超链接
*   合并单元格区域
*   行和列的大小
*   数据格式：数字和日期
*   单元格内的文本换行
*   冻结窗格
*   页眉/页脚支持
*   读/写现有和新的电子表格
*   两者都试图尽可能地保持他们读取的电子表格中的现有对象完好无损。

但是，有很多不同之处：

*   也许最显着的区别是 Java JXL 不支持 Excel 2007+“.xlsx”格式；它只支持旧的 BIFF（二进制）“.xls”格式。Apache POI 以通用设计支持两者。
*   此外，JXL API 的 Java 部分最后一次更新是在 2009 年（在我写这篇文章时是 3 年零 4 个月前），尽管看起来有一个 C# API。Apache POI 得到积极维护。
*   JXL 不支持条件格式化，Apache POI 支持，尽管这并不重要，因为您可以使用自己的代码有条件地格式化单元格。
*   JXL 不支持*富* **文本**格式，即文本字符串中的不同格式；Apache POI 确实支持它。
*   JXL 仅支持某些文本旋转：水平/垂直、+/- 45 度和堆叠；Apache POI 支持任意整数度数加上堆叠。
*   JXL 不支持绘制形状；Apache POI 可以。
*   JXL 支持大多数页面设置设置，例如横向/纵向、边距、纸张大小和缩放。Apache POI 支持所有这些以及重复行和列。
*   JXL 不支持拆分窗格；Apache POI 可以。
*   JXL 不支持图表创建或操作；Apache POI 中还没有这种支持，但是 API 正在慢慢开始形成。
*   Apache POI 具有比 JXL 更广泛的可用文档和示例集。

此外，如果您只想读取电子表格内容，POI 不仅包含主要的“用户模型”API，还包含基于事件的 API。

总之，由于更好的文档、更多的功能、积极的开发和 Excel 2007+ 格式支持，我使用 Apache POI。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-20T13:14:37.753

我用过POI。

如果您使用它，请留意那些单元格格式化程序：创建一个并多次使用它，而不是每次都为单元格创建，这是一个巨大的内存消耗差异或大量数据。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-20T13:43:26.233

我不熟悉 JXL，但我们使用 POI。POI 维护良好，可以处理二进制 .xls 格式和 Office 2007 中引入的新的基于 xml 的格式。

CSV 文件不是 excel 文件，它们是基于文本的文件，因此这些库不会读取它们。您需要自己解析一个 CSV 文件。我不知道有任何 CSV 文件库，但我也没有看过。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-03T15:43:15.913

为了阅读 Java 中的“普通”CSV 文件，有一个名为 OpenCSV 的库，可在此处获得：http: [//opencsv.sourceforge.net/](http://opencsv.sourceforge.net/)

# javascript - Internet Explorer 8 仅在屏幕的一半显示图表

> ID：14980727
> 
> 赞同：0
> 
> 时间：2013-02-20T13:13:06.850
> 
> 标签：javascript, internet-explorer, internet-explorer-8, internet-explorer-7

我有一个尝试呈现条形图的应用程序。它在 Internet Explorer 7 中正确显示，但在 Internet Explorer 8 中不能正确显示。在 IE8 中它只使用一半屏幕来显示图表，在 IE7 中它使用整个屏幕。该图表也在 chrome 和 firefox 中正确显示。该应用程序使用 jsp 和 servlet 来创建此页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T05:52:19.097

出现此问题的原因是为防止 csrf 攻击而创建的一些标签。撤消它们是在起作用

# c# - 集合中的值更改时的通知

> ID：14980732
> 
> 赞同：1
> 
> 时间：2013-02-20T13:13:24.307
> 
> 标签：c#, xaml, windows-8, observablecollection, inotifypropertychanged

我正在为 C# 中的 Windows 8 商店应用程序开发自定义控制器。我添加了一些 DependencyProperties；一些简单的（如下`Radius`所示）和一组用于构造和绘制各种形状的自定义项（`NinjaSource`）。

```
<StackPanel>
    <cc:NinjaControl Margin="120,0,0,0" NinjaSource="{Binding NinjaCollection}" Radius="45"/>
</StackPanel> 
```

集合看起来像这样

```
public ObservableCollection<Ninja> NinjaCollection{ get; set; } 
```

而Ninja类基本都有一些属性和实现`INotifyPropertyChanged`

```
public class Ninja : INotifyPropertyChanged
    {
        private string _name;
        private double _value;
        private Path _path;
        private bool _showName;

        public string Name
        {
            get { return _name; }
            set
            {
                if (value == _name) return;
                _name = value;
                OnPropertyChanged();
            }
        }

        ... 
```

`Radius`每当更改一个简单的属性，例如

```
public sealed partial class NinjaControl: UserControl
{
        public static readonly DependencyProperty RadiusProperty =
            DependencyProperty.Register("Radius", typeof (double), typeof (NinjaControl),
                                        new PropertyMetadata(default(double), PropertyChangedCallback));

        ...

        private static void PropertyChangedCallback(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            var instance = o as NinjaControl;

            if (instance == null) return;
            instance.RedrawMyControl();
        } 
```

这很好用，我可以将 Radius 绑定到我想要的任何东西，并且`PropertyChangedCallback`只要它改变就会被调用。

*每当NinjaCollection*中的任何值发生变化时，我都希望发生同样的事情。

我为实际集合注册了一个 DependencyProperty，带有一个属性包装器，但我相信它只会查看对实际集合的更改，而不是其中的值。

```
 public static readonly DependencyProperty NinjaSourceProperty = 
DependencyProperty.Register("NinjaSource", typeof(ObservableCollection<Ninja>), typeof(NinjaControl), new PropertyMetadata(new ObservableCollection<Ninja>(), PropertyChangedCallback)); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:43:29.247

您想要做的不是将 ObservableCollection 公开为 NinjaSource。创建一个包含可观察集合的自定义对象。公开特定的 Add Remove 方法，这些方法将允许您随后引发事件。

# jquery - 迭代jQuery对象的最有效方法是什么

> ID：14980738
> 
> 赞同：0
> 
> 时间：2013-02-20T13:13:42.543
> 
> 标签：jquery, performance, for-loop

我在[jsperf](http://jsperf.com/iterate-over-jquery-objects)上创建了一个简单的示例来帮助解释我的问题。在 jsperf 的示例中，在链接上设置了样式属性（我知道这可以在没有循环的情况下完成）。

**迭代 jQuery 对象**的最有效方法是什么？

根据 jsperf 的结果，`.each`性能相当不错，但也不是最快的。也许有一个更好的解决方案，我错过了。

1.以.each为例：

```
$('body').find('div.iojo-test-container a').each(function() {
  $(this).css('color', 'red');
}); 
```

2.for循环示例（略快于.each）：

```
var $a = $('body').find('div.iojo-test-container a');
for (var i = $a.length; --i;) {
  $($a[i]).css('color', 'red');
} 
```

3.最快的方式设置风格，但**请忽略这种情况**。这是关于迭代而不是设置 css 样式。

```
$('body').find('div.iojo-test-container a').css('color', 'red'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:19:22.323

**我的拙见**

部署后进行优化是一回事，也许只是想进行微调，但除非您*需要*优化，否则不要担心。`.each()`工作正常，同时还具有可读性的额外好处。（很明显，您在被调用时正在迭代集合`.each`）。并不是说`for`循环不那么简洁，但除非您的加载时间或性能受到巨大影响，否则在游戏的这个阶段不要担心它。

如果速度真的是一个问题，那么 jQuery*可以说*是一个臃肿的库。像`$(this).attr()`直接访问这样的调用`this.attr`可以在不牺牲可读性的情况下增加好处（并且避免仅仅为了设置属性而加载 jQuery 包装器）。但是，您已选择使用该库，所以现在继续使用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T13:17:32.090

```
$('div.iojo-test-container a').css('color', 'red'); 
```

jquery 将自行迭代所有`.iojo-test-container a`并将它们设置为您的 css 属性

# facebook - Facebook signed_request cookie 坚持错误代码

> ID：14980745
> 
> 赞同：1
> 
> 时间：2013-02-20T13:14:06.550
> 
> 标签：facebook, facebook-php-sdk, facebook-oauth

我正在尝试获取用户页面：

```
<?php
try {
    $pages = $facebook->api('/me/accounts?fields=id,name');
    if (isset($pages['data'])) {
        $this->assign('pages', $pages['data']);
        $this->pages = $pages['data'];
    }
} catch (\FacebookApiException $e) {
    $loginUrl = $facebook->getLoginUrl(
        array(
            'redirect_uri' => $this->container->getParameter('home_url'),
            'scope'        => 'email,manage_pages'
        )
    );
    echo '<script type="text/javascript">top.location.href = "'.$loginUrl.'";</script>';
    exit;
} 
```

但我跳进了无休止的重定向循环。经过一番研究，我发现 PHP SDK 在`getAccessTokenFromCode`方法中从 API 获取错误。[`$access_token_response`](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L775)变量是：

```
{"error":{"message":"This authorization code has expired.","type":"OAuthException","code":100}} 
```

PHP SDK`code`从 COOKIE 中获取价值。问题是它`fbsr_{app_id}`没有被刷新，它仍然包含相同的代码。这就是无限循环的原因。

我能做些什么来克服这个问题。我正在考虑删除`fbsr_{app_id}`cookie，但它看起来很奇怪。为什么 SDK 不为我处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:26:43.217

好的，我想我找到了解决方法。我同时使用 PHP SDK 和 JS SDK。我使用以下代码进行重定向：

```
echo '<script type="text/javascript">top.location.href = "'.$loginUrl.'";</script>';
exit; 
```

但是我在其中添加了 JS SDK 并且不再出现问题：

```
echo "
<div id=\"fb-root\"></div>
<script type=\"text/javascript\">
  window.fbAsyncInit = function() {
    FB.init({appId: ".$app_id.", status: true, cookie: true, xfbml: true, oauth: true});
    FB.getLoginStatus(function(response) {
        top.location.href = '".$loginUrl."';
    });
  };
  (function() {
    var e = document.createElement('script'); e.async = true;
    e.src = document.location.protocol +
      '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
  }());
</script>
";
exit; 
```

我不确定这是否不是 JS SDK/PHP SDK 的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:19:55.707

如果您使用的是 PHP 5.4，我也遇到了这个问题。我写了一个关于如何解决这个问题的[教程。](https://www.webniraj.com/2012/12/19/facebook-php-sdk-fixing-getuser-on-php-5-4-x/)原因是 PHP SDK 没有正确提取代码。

如果收到异常，您还可以尝试销毁会话（`session_destroy()`或框架等效项）或手动清除 cookie（ ）。`setcookie ("cookie_name", "", time() - 3600);`

**编辑**：

确保应用中的 App ID 和 App Secret 也正确。不正确的应用程序密钥有时是问题，因为它用于解码`signed_request`.

此外，如果问题是特定于 IE 的，请尝试将以下标头添加到您的代码中：

```
header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT'); 
```

IE 的安全设置有时会阻止 cookie 在 iframe 中设置。上面的标题应该会有所帮助。

# asp.net - 对asp.net的不理解

> ID：14980746
> 
> 赞同：0
> 
> 时间：2013-02-20T13:14:08.033
> 
> 标签：asp.net, ajax

我想当我单击按钮时我的 textbox1 必须更改，但 textbox3 不为什么它**不起作用**？

```
 protected void Page_Load(object sender, EventArgs e)
        {
            TextBox3.Text = DateTime.Now.ToLongTimeString();
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            TextBox1.Text = DateTime.Now.ToLongTimeString();
        }

<asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>

        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
          <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Button"/>
          <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>  
             </ContentTemplate>
    <br />
<asp:TextBox ID="TextBox3" runat="server"></asp:TextBox>
        </asp:UpdatePanel> 
```

当我单击**Button1**我的**TextBox3**更改 **为什么**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:15:50.200

因为当您单击按钮时，您向服务器提交请求，这会导致往返，从而导致`Page_Load`再次执行。`IsPostBack`您可以通过使用以下属性检测请求是否是回发周期的一部分来避免这种情况：

```
if (IsPostBack) {

} 
```

*或者，在大多数情况下，在不是*回发时做一些事情：

```
if (!IsPostBack) {
  TextBox3.Text = DateTime.Now.ToLongTimeString();
} 
```

# git - 切换到分支，保留旧分支，以便稍后返回

> ID：14980747
> 
> 赞同：0
> 
> 时间：2013-02-20T13:14:20.483
> 
> 标签：git

我正在开发一个特性分支`branch1`，我的工作还没有完成并且仍然不稳定，我需要切换回开发分支来创建一个新分支，`branch2`以获得一个新特性。`branch1`当我计划重新开始工作时，我该如何以“冻结”的方式做到这一点。有没有办法做到这一点而不承诺`branch1`？什么是正确的名字？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:16:38.500

您可以`stash`进行更改，但没有理由不提交。如果您不发布提交，您可以随时重置它并将其从历史记录中删除。使用`stash`非常方便，但是如果“稍后”是很长一段时间（30 天以上），找到正确的存储可能会变得令人沮丧（假设您经常存储。）进行提交确实没有错：

```
$ git commit -a -m "Temporary changes"
$ git checkout other-branch
$ ... # lots of work, but do not push original-branch
$ git checkout original-branch
$ git reset HEAD~  # Back to where you were with a dirty tree as modified before first commit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:16:43.200

您将隐藏工作目录的当前状态：

```
git stash 
```

这会将您的工作副本重置为 HEAD 状态并将此后的更改保存在存储库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T13:18:23.810

git stash 对此有好处（[http://www.kernel.org/pub/software/scm/git/docs/git-stash.html](http://www.kernel.org/pub/software/scm/git/docs/git-stash.html)）

但是为什么你害怕在本地提交你的更改呢？你可以随时在 git 中编辑你的旧提交，甚至恢复它

# vba - 如何使用 VBA 锁定/解锁 Microsoft Word 2010 文档中的所有字段？

> ID：14980752
> 
> 赞同：2
> 
> 时间：2013-02-20T13:14:34.960
> 
> 标签：vba, ms-office, ms-word

我遇到的问题是，我的公司模板集在每个 word 文档的页脚中使用了 SaveDate 字段 - 用于详细说明文档的保存时间，这与我们的自定义文档管理系统相关联。

随后，当用户想要制作旧文档的 PDF 时，使用 Office 2010 的另存为 PDF 功能，会更新保存日期 - 创建旧文档的 PDF，但使用今天的日期。这是错误的。我们只是试图为原始文档中的任何内容创建一个真正的 PDF 版本。

为了解决这个问题，我正在编写一个宏解决方案，它锁定字段，将文档导出为 PDF，然后再次解锁字段。

我遇到了一个问题，我可以识别和锁定页眉/页脚中的所有字段（这实际上是我正在尝试做的），但为了使其更健壮，需要找到一种方法来锁定所有字段所有部分。

在下面向您展示我的代码，我如何识别所有部分中的所有字段？这是否必须使用索引工具来完成？

```
Sub CPE_CustomPDFExport()

'20-02-2013

    'The function of this script is to export a PDF of the active document WITHOUT updating the fields.
    'This is to create a PDF of the document as it appears - to get around Microsoft Word 2010's native behaviour.

 'Route errors to the correct label
 'On Error GoTo errHandler

'This sub does the following:

    ' -1- Locks all fields in the specified ranges of the document.
    ' -2- Exports the document as a PDF with various arguments.
    ' -3- Unlocks all fields in the specified ranges again.
    ' -4- Opens up the PDF file to show the user that the PDF has been generated.

        'Lock document fields
        Call CPE_LockFields

        'Export as PDF and open afterwards
        Call CPE_ExportAsPDF

        'Unlock document fields
        Call CPE_UnlockFields

'errHandler:
 ' MsgBox "Error" & Str(Err) & ": " &

End Sub
Sub CPE_LockFields()

   'Update MS Word status bar
        Application.StatusBar = "Saving document as PDF. Please wait..."

   'Update MS Word status bar
        Application.StatusBar = "Locking fields in all section of the active document..."

   'Declare a variable we can use to iterate through sections of the active document
        Dim docSec As section

   'Loop through all document sections and lock fields in the specified ranges
        For Each docSec In ActiveDocument.Sections
             docSec.Footers(wdHeaderFooterFirstPage).Range.fields.Locked = True
             docSec.Footers(wdHeaderFooterPrimary).Range.fields.Locked = True
             docSec.Footers(wdHeaderFooterEvenPages).Range.fields.Locked = True
        Next

End Sub
Sub CPE_UnlockFields()

   'Update MS Word status bar
        Application.StatusBar = "PDF saved to DocMan Temp. Now unlocking fields in active document. Please wait..."

   'Declare a variable we can use to iterate through sections of the active document
        Dim docSec As section

   'Loop through all document sections and unlock fields in the specified ranges
        For Each docSec In ActiveDocument.Sections
                  docSec.Footers(wdHeaderFooterFirstPage).Range.fields.Locked = False
                  docSec.Footers(wdHeaderFooterPrimary).Range.fields.Locked = False
                  docSec.Footers(wdHeaderFooterEvenPages).Range.fields.Locked = False
        Next

End Sub
Sub CPE_ExportAsPDF()

    'Update MS Word status bar
    Application.StatusBar = "Saving document as PDF. Please wait..."

    'Chop up the filename so that we can remove the file extension (identified by everything right of the first dot)
    Dim adFilename As String
    adFilename = Left(ActiveDocument.FullName, (InStrRev(ActiveDocument.FullName, ".", -1, vbTextCompare) - 1)) & ".pdf"

     'Export to PDF with various arguments (here we specify file name, opening after export and exporting with bookmarks)
        With ActiveDocument

                    .ExportAsFixedFormat outPutFileName:=adFilename, _
                    ExportFormat:=wdExportFormatPDF, OpenAfterExport:=True, _
                    OptimizeFor:=wdExportOptimizeForPrint, Range:=wdExportAllDocument, _
                    Item:=wdExportDocumentContent, IncludeDocProps:=True, KeepIRM:=True, _
                    CreateBookmarks:=wdExportCreateWordBookmarks, DocStructureTags:=True, _
                    BitmapMissingFonts:=True, UseISO19005_1:=False

        End With

        'Update MS Word status bar
        Application.StatusBar = "PDF saved to DocMan Temp."

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:50:31.107

尝试以下操作以获取文档、页眉、页脚、背景和正文中的所有字段：

```
Sub LockAllFieldsInDocument(poDoc As Document, Optional pbLock As Boolean = True)
    Dim oRange As Range

    If Not poDoc Is Nothing Then
        For Each oRange In poDoc.StoryRanges
            oRange.Fields.Locked = pbLock
        Next
    End If

    Set oRange = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-26T13:14:13.333

这是另一种方法。它会选择整个文档，然后锁定所有字段，然后再取消选择所有内容。

```
Sub SelectUnlink()
    ActiveDocument.Range(0, 0).Select
    Selection.WholeStory
    Selection.Range.Fields.Unlink
    Selection.End = Selection.Start
End Sub 
```

# console - 为什么 Console.WriteLine 在 MSpec 断言中不起作用？

> ID：14980753
> 
> 赞同：1
> 
> 时间：2013-02-20T13:14:34.917
> 
> 标签：console, mspec

我无法从 MSpec 断言写入控制台。我正在使用 Nuget 的 v0.5.11（无符号）。这里没有什么激进的，但它不起作用。有人知道我错过了什么吗？

```
public class When_doing_stuff
{
    It should_out_stuff_to_console = () =>
    {
        var val1 = 1;
        var val2 = 2;
        (val1 + val2).ShouldEqual(3);
        Console.WriteLine(val2); 
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:09:08.530

我怀疑您的真实代码中实际上有一个失败的断言。您发布了一个通过断言，它应该打印得很好（正如亚历山大和我都在当地验证过的那样）。

然而，失败的断言会抛出 a`SpecificationException`并且该`Console`行将永远不会被执行。您应该在断言之前打印。例如

```
It should_out_stuff_to_console = () => 
{
    Console.WriteLine(val2);
    (val1 + val2).ShouldEqual(3);
} 
```

`mspec`以及命令行运行器的输出

```
cmd> mspec-clr4.exe test.dll

Specs in test:

When doing stuff
Blah
» should out stuff to console 
```

但是，我不建议将调试语句从您的断言打印到控制台，或者您的测试运行一般。它会破坏测试报告（如上所示）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:10:50.253

事实上，这里的断言没有任何问题，安东尼 :-)

我将发布的代码 user287079 粘贴到一个新的类库中，看看我的控制台中打印了什么：

```
>mspec-clr4 <somewhere>\bin\Debug\ClassLibrary1.dll

Specs in ClassLibrary1:

When doing stuff
2
» should out stuff to console

Contexts: 1, Specifications: 1, Time: 0.11 seconds 
```

# ruby-on-rails - 如何在 Rails 的购物车中添加删除功能？

> ID：14980755
> 
> 赞同：-2
> 
> 时间：2013-02-20T13:14:41.603
> 
> 标签：ruby-on-rails

# 购物车控制器 - 我在声明删除功能时遇到问题

```
class CartController < ApplicationController

def add
id = params[:id]

cart = session[:cart] ||= {}
cart[id] = (cart[id] || 0) + 1

redirect_to :action => :index
end

def index
@cart = session[:cart] || {}
end

end 
```

# 主项目页面 - 删除项目的链接已经定义，我在控制器部分感到困惑

```
<h1 id="prodhead">Products</h1>

<table class="catalog">

<% for item in @items %>
<tr>
<td>
    <div class="image">
        <%= link_to (image_tag item.image_url), item %>
    </div>
</td>
<td>
    <div class="title">
        <%= link_to item.title, item %>
    </div>
    <div class="description">
        <%=h item.description %>
    </div>
    <div class="links">
        <% if session[:login] == 1 %>
            <%= link_to 'Edit Item', edit_item_path(item) %> |
            ***<%= link_to 'Delete Item', item, :confirm => 'Are you sure?', :method =>   :delete %>***
        <% else %>
            <%= link_to "Add to Cart", :controller => :cart, :action => :add, :id => item %><br />
        <% end %>
    </div>
    <div class="price"> 
        <%= number_to_currency(item.price, :unit => "&dollar;") %>
    </div>
</td>
</tr>

<% end %>

</table>

<% if session[:login] == 1 %>
<p><%= link_to 'New item', new_item_path %></p>

<% end %> 
```

# Routes.rb - 删除的路线也已经定义

```
OnlineShop::Application.routes.draw do
get "cart/index"

get "cart/add"

get "cart/checkout"

get "cart/del"

get "site/about"

get "site/contact"

get "user/admin_login"

get "user/logout"

resources :items 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:42:38.130

好吧，首先我注意到您重新发布了您的问题，但是这次更具描述性，请对于未来的问题，在创建票证之前请三思，并花时间编辑需要改进以保持社区清洁的以前的票证。

OT：我看到你已经创建了具有基本 CRUD 功能的物品和购物车资源，但是你这样做的方式并不完全是“铁轨方式”我建议你使用脚手架命令开始一个项目 bij 来了解这个 CRUD 和路线应该如何实施的。

如果您愿意了解有关该主题的更多信息，我建议您阅读： http: [//guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

另外我注意到您使用“h”语法来转义输出，这仅在 Rails 2.3.8 之前完成，我可以建议在开始时使用更新的 rails 版本吗？

# networking - 如何监控正在运行的进程的网络流量

> ID：14980758
> 
> 赞同：0
> 
> 时间：2013-02-20T13:14:47.380
> 
> 标签：networking, process, monitoring

我需要一个监控网络流量的程序。但就像这样：它将显示正在运行的进程以及它们正在获取/发送数据包的 IP 和网站。我有这样的程序，但我找不到也不记得它的名字。我在谷歌搜索中找到的所有程序都返回相同的程序样式，它只监视一般网络流量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:26:05.233

您可以在数据包级别使用wireshark。端口级别的 Netstat（本地）。

监控网络：

*   在交换机上放置一个端口作为监控端口，并将设备置于混杂模式。
*   使用wireshark查看流量。

（wireshark 过去是空灵的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T15:53:11.140

您需要的程序取决于架构的类型。如果您有支持 Netflow 的设备，这可以非常方便地识别瓶颈或错误。在低预算下只有几个很好的 netflow 工具，试试 solarwinds 或 Pandora FMS。

对于 SNMP 监控，可能是最常见的情况，大多数工具都做得很好：cacti、zabbix、pandora fms 或 nagios。OpenNMS 和 Pandora FMS 对 Traps 的管理最好，只有少数能正确管理 v3。

对于监控的混合范围：服务器、应用程序和网络，您拥有的工具较少，因此我们使用 Pandora FMS，可以管理 netflow、snmp、wmi（用于远程服务器监控）和基于代理的 unix 和 windows 服务器监控。

一些链接：

[http://pandorafms.com/Producto/network-monitoring/en](http://pandorafms.com/Producto/network-monitoring/en) [http://opems.org](http://opems.org)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T14:55:42.723

你可以试试LSP或者WinpCap monito处理流量。希望对你有帮助。

# jsf - 如何将复合组件的动态列表绑定到 panelGroup

> ID：14980774
> 
> 赞同：1
> 
> 时间：2013-02-20T13:15:33.833
> 
> 标签：jsf

复合组件 xhtml：

```
<composite:interface componentType="metroComponent">
        <composite:attribute name="uniqueId" />
    </composite:interface>

    <composite:implementation>

        <rich:panel width="100%" header="#{msgs['pages.metroEth.header2']}">
            <table class="resData">
                <tr>
                    <td class="labelLeft"><h:outputLabel id="optionLabelId"
                            value="#{msgs['pages.ccparams.serviceOption']}" /></td>
                    <td><h:inputText id="optionTextId"
                            binding="#{cc.serviceOption}" size="15" /> <h:message
                            for="ccvodTextId" style="color:red" /></td>

            </table>
        </rich:panel>

    </composite:implementation>

</ui:composition> 
```

组件类型实现如下：

```
@FacesComponent (value="metroComponent")
public class HtmlMetroCC extends UIComponentBase implements NamingContainer {

    UIInput serviceOption;

    public UIInput getServiceOption() {
        return serviceOption;
    }

    public void setServiceOption(UIInput serviceOption) {
        this.serviceOption = serviceOption;
    }

    @Override
    public String getFamily() {

        return "javax.faces.NamingContainer";
    }

} 
```

还有一个支持 bean，它使用上面呈现的复合组件列表准备 panelGroup 元素。我删除了 getter/setter 以便更好地阅读

```
@ManagedBean (name="metroethernetBean")
@RequestScoped
public class MetroEthernetMBean implements IBean{

    private MetroEthCCData metroCCData;

    private HtmlPanelGroup metroCCPanel;
    private List<HtmlMetroCC> metroCClist;

    @PostConstruct
    public void initBean(){

        metroCClist = new ArrayList<HtmlMetroCC>();
        metroCCPanel = new HtmlPanelGroup();

        HtmlMetroCC initialMetroCC = new HtmlMetroCC(); 
        metroCClist.add(initialMetroCC);

        processMetroCCPanel();

    }

    private void processMetroCCPanel(){
        metroCCPanel.getChildren().clear();

        for (HtmlMetroCC comp: metroCClist){
            metroCCPanel.getChildren().add(comp);
        }   

    }   
} 
```

负责显示 panelGroup 的页面片段如下所示：

```
<h:panelGroup id="metroCCPanelGrouId" binding="#{metroethernetBean.metroCCPanel}" /> 
```

问题是，为什么我的复合组件没有出现在面板上？看起来面板根本没有添加任何孩子..

当我把它放在页面上时：

```
<gui:metroCC /> 
```

然后复合comp。在页面上正确显示。我想要实现的是页面上的一个面板，其中包含复合组件，可以通过单击添加新的或删除选定的来动态添加或删除

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:49:01.910

有一个解决方法，而不是在管理 bean 中绑定动态创建的面板

```
<h:panelGroup id="metroCCPanelGrouId" binding="#{metroethernetBean.metroCCPanel}" /> 
```

使用 mBean 初始化列表/添加新/删除并在页面上循环遍历它：

```
<h:panelGroup id="metroCCPanelGrouId">
    <ui:repeat var="test" value="#{metroethernetBean.metroCClist}">
        <gui:metroCC binding="#{test}" />
    </ui:repeat>
</h:panelGroup> 
```

但是：仍然不明白为什么我的第一个方法会失败...... BaluC，你在哪里;）

# etl - 从 informatica 中的源自动映射目标字段

> ID：14980775
> 
> 赞同：6
> 
> 时间：2013-02-20T13:15:36.987
> 
> 标签：etl, informatica-powercenter, informatica

我在 informatica 中有一个源结构，例如

```
col1 number   col2 varchar(40)   col3 DATE   col4 varchar(50)   col5 number 
```

我的目标定义就像

```
col4 varchar(50)   col1 number  col5 number  col3 varchar(40)  col3 DATE 
```

如果我想将源记录加载到目标中，我将以之字形方式将列从源适当地映射到目标

我只是想知道，如果有任何像 informatica 这样的概念会根据列名自动将字段从源映射到目标，即目标列是否被打乱但列名相同......

任何有关相同的建议都会有所帮助..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T14:39:07.807

PowerCenter 可以**按位置**和**名称**自动链接转换之间的端口。

你应该使用后者：

1.  点击`Layout`> `Autolink by Name`,
2.  选择您要链接的映射对象（例如源）并将所选端口拖到另一个映射对象（例如目标）。

# opengl-es - open gl es 1.X 中的顶点缓冲区

> ID：14980776
> 
> 赞同：0
> 
> 时间：2013-02-20T13:15:42.620
> 
> 标签：opengl-es

我正在自学有关开放式 gl es 和顶点缓冲区 (VBO) 的知识，并且我已经编写了代码，它应该绘制一个红色三角形，但它却将屏幕着色为黑色：

```
- (void)drawRect:(CGRect)rect {

// Draw a red triangle in the middle of the screen:
glColor4f(1.0f, 0.0f, 0.0f, 1.0f);
// Setup the vertex data:
typedef struct {
    float x;
    float y;
} Vertex;
const Vertex vertices[] = {{50,50}, {50,150}, {150,50}};
const short indices[3] = {0,1,2};
glGenBuffers(1, &vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);
NSLog(@"drawrect");
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(3, GL_FLOAT, 0, 0);
// The following line does the actual drawing to the render buffer:
glDrawElements(GL_TRIANGLE_STRIP, 3, GL_UNSIGNED_SHORT,  indices);
glBindRenderbufferOES(GL_RENDERBUFFER_OES, framebuffer);
[eAGLcontext presentRenderbuffer:GL_RENDERBUFFER_OES];
} 
```

这里 vertexBuffer 是 GLuint 类型。出了什么问题？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:36:40.443

您的顶点没有 Z 组件，请尝试`{{50,50,-100}, {50,150,-100}, {150,50,-100}};`（默认情况下，您的相机向下看 Z 轴，因此将其放在 -Z 中应该将其放在屏幕上）如果您看不到它仍然尝试较小的数字，我不确定您的近处和远处绘制截止距离是，如果它甚至没有设置，我不知道默认值是什么。这可能不是唯一的问题，但它是我通过快速查看可以看到的唯一问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:09:45.833

您需要添加

```
glViewport(0, 0, 320, 480); 
```

在其中创建帧缓冲区并设置上下文。

并将您对 glDrawElements 的调用替换为

```
glDrawArrays(GL_TRIANGLE_STRIP, ...); 
```

# c# - Entity Framework 5.0 设计器找不到数据库连接

> ID：14980781
> 
> 赞同：0
> 
> 时间：2013-02-20T13:15:52.170
> 
> 标签：c#, entity-framework, app-config, entity-framework-5

我有一个从数据库生成的 EF 5.0 模型。该模型存在于类库项目中。此类库项目有一个 app.config 文件，其中包含模型的连接字符串信息。

每当我选择“从数据库更新模型”时，我都必须重新输入连接字符串。它似乎没有看到 app.config 文件中的字符串。

此外，在模型更新期间，如果我单击以将连接字符串保存在 app.config 中，它永远不会这样做。

这是我的 app.config 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
  <connectionStrings>
    <add name="mapEntities"
        connectionString="metadata=res://*/mapModel.csdl|
                                                       res://*/mapModel.ssdl|
                                                       res://*/mapModel.msl;
                                           provider=Oracle.DataAccess.Client
                                           provider connection string=
                                               &quot;Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=myserver.com)(PORT=1521)))(CONNECT_DATA=(SID=MYDB)));User Id=MYUSERNAME;Password=MYPASSWORD;&quot;"
     providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

如何让 EF 查看 app.config 中的连接字符串？我需要向模型添加一个函数导入，但我不能，因为它说没有为模型配置连接。

**编辑** 好吧，我找到了一个解决方案，尽管它很老套。

[在此处查看此 stackoverflow 帖子](https://stackoverflow.com/questions/5413220/entity-framework-losing-binding-to-connection-string-in-visual-studio)。

OP 表示他在项目中重新创建了一个新的 EDMX 文件，并修复了它。我也这样做了，确实如此。我没有重新生成旧的 EDMX 文件。我刚刚创建了一个新的，然后回到旧的 EDMX，它现在可以工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:09:28.460

将 connectionString 部分复制到您的 web.config 文件中。

# iphone - NSOperationQueue 阻塞不相关的 NSOperationQueue？

> ID：14980787
> 
> 赞同：2
> 
> 时间：2013-02-20T13:16:11.420
> 
> 标签：iphone, ios, asynchronous, concurrency, nsoperation

我正在使用 NSOperation 和 NSOperationQueue （用于 2d 游戏）在后台加载图像。

为了了解 NSOperations 的行为方式，我尝试添加以下不相关的 NSOperationQueue / NSOperation （我在开始任何图像加载之前调用 -startNewEndlessBackgroundTask 方式）：

```
static int stop = NO;
static int c = 1000;
-(void)takeTime {
    stop = NO;
    while (!stop) {
        for (int i = 0; i < 10000; i++) {
            c += 1;
        }
        c = c;
    }
}
-(void)stopBackgroundTask {
    stop = YES;
}
-(void)startNewEndlessBackgroundTask {
    //[self performSelectorInBackground:@selector(takeTime) withObject:nil];
    NSOperationQueue* queue = [[NSOperationQueue alloc] init];
    [queue addOperationWithBlock:^{
         [self takeTime];
    }];
} 
```

这完全阻止了我在 iPhone4 上加载图像的其他 NSOperationQueue。在 iPhone4s 上，它会在 2 次调用 startNewEndlessBackgroundTask 后阻止我的图像加载。两者都运行 iOS 6。

我的应用程序的主循环没有被阻塞。

如果我改为使用 performSelectorInBackground 来调用 takeTime，则一切正常，没有阻塞，并且 takeTime 例程也可以在后台正常工作。

当两个 NSOperationQueue 完全分开分配初始化并且没有依赖关系时，为什么会发生这种情况？对我来说，以这种简单的方式使用 NSOperationQueue 和使用 performSelectorInBackground 之间应该没有区别，但我想我误解了一些基本的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:48:54.117

不确定细节，但这是我现在认为正在发生的事情的部分答案。

NSOperation 在下面使用 GCD（至少从 OSX 和 iOS 的最后几个版本开始）。GCD 中有一些全局优先级队列。

当较高优先级队列中有任务时，较低优先级队列中的任务甚至不会启动（尽管同一全局优先级队列中的任务可以启动，因为尽管名称中有“队列”，但默认优先级队列中的任务可以并发）。

由于我没有指定任何线程优先级，我想我的 -takeTime 操作被安排在默认优先级队列上，而我的图像加载操作被安排在默认的低优先级队列上。这可以解释为什么 -takeTime 操作会阻止我的图像加载。

这并不能真正解释的是，为什么需要两次 -takeTime 操作来阻止我在 iPhone 4s 上的图像加载操作，因为没有提到低优先级队列中的任务等待高优先级队列中的任务取决于CPU 内核的数量 - 据我在文档中看到的。

[Apple - 调度队列](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)：“除了获取默认并发队列之外，您还可以通过将 DISPATCH_QUEUE_PRIORITY_HIGH 和 DISPATCH_QUEUE_PRIORITY_LOW 常量传递给函数来获取具有高和低优先级的队列，或者通过传递 DISPATCH_QUEUE_PRIORITY_BACKGROUND 来获取后台队列常量。如您所料，高优先级并发队列中的任务在默认和低优先级队列中的任务之前执行。同样，默认队列中的任务在低优先级队列中的任务之前执行。

# sql - 将多行合并为一行，其中仅一列中的数据发生变化，并将变化列的数据添加到行尾

> ID：14980789
> 
> 赞同：0
> 
> 时间：2013-02-20T13:16:12.647
> 
> 标签：sql

我希望你能帮助我，因为我的 sql 非常基础。以下是我的查询：

我的数据如下所示：

```
Policy Number | Commission Amount | Relationship | PersonLinked
50422         | 1000.00           | Owner        | John Smith
50422         | 1000.00           | Advisor      | Richard Bass
50422         | 1000.00           | Port Man     | Craig Thomson
74857         | 500.00            | Owner        | Karen Jones
98765         | 20000.00          | Owner        | Tim Crosby
98765         | 20000.00          | Port Man     | Josh Bishop 
```

但我想在一行中显示所有数据，所以它看起来像这样：

```
Policy Number | Commission Amount | Owner          | Advisor        | Port Man
50422         | 1000.00           | John Smith     | Richard Bass   | Craig Thomson
74857         | 500.00            | Karen Jones    |                |
98765         | 20000.00          | Tim Crosby     |                | Josh Bishop 
```

如果可以以这种方式操作数据，请告诉我 SQL 是什么。我真的被困住了。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:21:15.790

除非从一开始就知道有固定的、静态数量的关系，否则答案是：不。您不能进行返回可变列数的 SQL 查询。

您的机会是： - 如果您使用专有的 SQL rdbms，可能会有一些旋转功能 - 如果您使用任何类型的语言（如 PHP、VBA）来创建查询 - 那么您可以动态创建它，之后查询可能的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:38:30.627

首先，您的答案取决于您未指定的 SQL 版本。每个版本中都有允许您连接的功能。值，例如将表数据转换为字符串。在 Oracle - LISTAGG()、MY SQL - GROUP_CONCAT() 等... 除非您为每个案例创建视图或表，否则无法在 SQL 中创建动态列。您可以创建表作为选择您需要的所有列并从 your_table 添加更多列，您还可以创建具有不同列数的视图。您需要在您的 SQL 版本中对此进行研究。所有带有 CASE 表达式的示例都很好，但我会进行研究，看看您的 SQL 版本中有什么可用的，因为 LISTAGG() 或 GROUP_CONCAT() 是您真正想要的，而不是 CASE。这是创建“动态”列的 Oracle 示例。

```
CREATE TABLE test_tab AS
 SELECT empno
      , ename
      , ename "OWNER" -- This column name is OWNER and datatype is the same as ename 
  FROM scott.emp
 WHERE 1=2 -- False - empty table is created, no data...
/

-- Describe newly created table:

SQL> desc test_tab  

Column Name  Data Type 
--------------------------------
EMPNO    NUMBER (4)              
ENAME    VARCHAR2 (10 Byte)        
OWNER    VARCHAR2 (10 Byte) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:23:15.970

这是假设您在每个保单编号中都有一个角色，并且您需要显示的唯一角色是这三个角色。

```
Select [own].[Policy Number], 
       [own].[Commission Amount],
       [own].[PersonLinked] as [Owner],
       [adv].[PersonLinked] as [Advisor],
       [port].[PersonLinked] as [Port Man]
From   PolicyRoles as [own]
Join   PolicyRoles as [adv] on [own].[Policy Number] = [adv].[Policy Number]
                            and [adv].[Relationship] = 'Advisor'
Join   PolicyRoles as [port] on [own].[Policy Number] = [port].[Policy Number]
                             and [port].[Relationship] = 'Port Man'
Where  [own].[Relationship] = 'Owner' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T13:24:05.360

试试这个查询

```
Select a.Policy Number, a.Commission Amount, a.PersonLinked as 'Owner', b.PersonLinked 'Advisor', c.PersonLinked as 'Port Man' 
FROM tbl a, tbl b, tbl c
WHERE a.Policy Number = b.Policy Number AND a.Policy Number = c.Policy Number AND
b.Policy Number = c.Policy Number AND a.Relationship = 'Owner' AND 
b.Relationship = 'Advisor' AND c.Relationship = 'Port Man'; 
```

# razor - “'/' 应用程序中的服务器错误。” 在 MVC4 中，当我使用新视图创建新文件夹时

> ID：14980799
> 
> 赞同：0
> 
> 时间：2013-02-20T13:16:36.523
> 
> 标签：razor, asp.net-mvc-4, entity-framework-5

我在 MVC4 中相当新。我正在使用实体框架使用 C# Razor 视图引擎。

我想添加包含多个模型的新视图模型（显然）。但我需要一个新的观点。所以我在名为“MasterView”的视图中创建了一个新文件夹，里面有一个示例 Index.cshtml，将它链接到 _Layout.cshtml 中

```
<li>@Html.ActionLink("Klick me", "Index", "MasterView")</li> 
```

当我运行我的应用程序时，所有默认链接都有效，除了一个（**描述：HTTP 404。您正在寻找的资源（或其依赖项之一）可能已被删除、更改名称或暂时不可用。请查看以下 URL 并确保其拼写正确。**）。我是否在某些项目文件中缺少该页面的某些权限？我如何解决它？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:29:20.427

在 MVC 中，您链接到控制器内部的操作而不是页面/视图。

在这种情况下，您将需要一个具有如下索引操作的 MasterViewController（在 Controllers 文件夹中）：

```
public ActionResult Index() 
{
    return View();
} 
```

这将呈现并返回您的 Index.cshtml 文件。

# java - 在选择 JList 中的行时，字符串未正确写入 JTextField/Area

> ID：14980801
> 
> 赞同：0
> 
> 时间：2013-02-20T13:16:39.703
> 
> 标签：java, swing, event-handling, jlist

我正在使用一个向量来存储 JList 中显示的信息，并且我想使用所选索引的索引将该行的数据复制到 JTextField 和 JTextArea 中。我遇到了一些问题，其中所选项目未显示在 JTextField/Area 中，而是显示先前所选索引的数据。每个第二个索引都有显示错误数据的问题，2、4、6、8、10 然后是 11。如果您在程序刚刚执行时选择第一个，它们中的每一个都只会显示正确的数据。我添加到 ListSelectionEvent 侦听器的打印行显示了所选索引的正确数据，但它没有正确地将其复制到 JTextArea/JTextField 中。

在程序执行后立即选择。 ![在程序执行后立即选择。](../Images/8390ea93e8c0a935c550ea54a47b7fb5.png)

我选择了其他一些索引，然后尝试再次选择它 ![我选择了其他一些索引，然后尝试再次选择它](../Images/4993965015e1e3f7b736a5c965a083a8.png)

**代码：**

```
public class EditFlashcardGui implements ListSelectionListener {

private JFrame frame;
private JPanel listPanel;
private Vector<Vector> flashcardMasterVector = new Vector<Vector>();
private JList list;
private JPanel tablePanel, dataPanel, textFieldPanel;
private JButton submitButton, cancelButton;
private JTextField frontTextField;
private JTextArea reverseTextArea;
private GridBagLayout gridBagLayout;
private GridBagConstraints constraints;
private JLabel frontTextLabel, reverseTextLabel;
Vector<Vector> masterVector = new Vector<Vector>();

public EditFlashcardGui() {

    frame = new JFrame("Edit / Delete Flashcards");
    frame.setSize(500, 200);

    Container con = frame.getContentPane();
    con.setLayout(new BorderLayout());

    listPanel = new JPanel(new BorderLayout());

    Vector<String> columnNames = new Vector<String>();

    columnNames.add("id");
    columnNames.add("front text");
    columnNames.add("reverse text");

    list = new JList(populateList());
    list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    list.addListSelectionListener(this);

    Font font1 = new Font("SansSerif", Font.BOLD, 20);
    list.setFont(font1);

    tablePanel = new JPanel();
    tablePanel.add(list);

    JScrollPane scrollPane = new JScrollPane(list);

    con.add(scrollPane, BorderLayout.NORTH);

    // south panel

    gridBagLayout = new GridBagLayout();
    constraints = new GridBagConstraints();
    textFieldPanel = new JPanel(gridBagLayout);

    // cancelButton = new JButton("Cancel");
    // dataPanel.add(cancelButton, BorderLayout.SOUTH);

    frontTextLabel = new JLabel("Front Text");
    constraints.ipadx = 1;
    constraints.ipady = 1;
    constraints.gridx = 0;
    constraints.gridy = 0;
    gridBagLayout.setConstraints(frontTextLabel, constraints);
    textFieldPanel.add(frontTextLabel);

    frontTextField = new JTextField();
    frontTextField.setColumns(30);
    constraints.ipadx = 1;
    constraints.ipady = 1;
    constraints.gridx = 0;
    constraints.gridy = 1;
    gridBagLayout.setConstraints(frontTextField, constraints);
    textFieldPanel.add(frontTextField);

    reverseTextLabel = new JLabel("Reverse Text");
    constraints.ipadx = 1;
    constraints.ipady = 1;
    constraints.gridx = 0;
    constraints.gridy = 2;
    gridBagLayout.setConstraints(reverseTextLabel, constraints);
    textFieldPanel.add(reverseTextLabel);

    reverseTextArea = new JTextArea(3, 30);
    constraints.ipadx = 1;
    constraints.ipady = 1;
    constraints.gridx = 0;
    constraints.gridy = 3;
    gridBagLayout.setConstraints(reverseTextArea, constraints);
    textFieldPanel.add(reverseTextArea);

    submitButton = new JButton("Submit");
    constraints.ipadx = 1;
    constraints.ipady = 1;
    constraints.gridx = 0;
    constraints.gridy = 4;
    gridBagLayout.setConstraints(submitButton, constraints);
    textFieldPanel.add(submitButton);

    con.add(textFieldPanel, BorderLayout.CENTER);

    frame.setResizable(false);
    frame.pack();
    frame.setVisible(true);

}

public Vector<Vector> populateList() {
    //flashcardMasterVector = flashcardDB.getList();
    //Vector<String> flashcardVector = new Vector<String>();

    Integer temp = 0;

    for(int i = 0; i <= 20; i++) {
        Vector<String> flashcardVector = new Vector<String>();
        flashcardVector.add(temp.toString());
        flashcardVector.add(temp.toString());
        flashcardVector.add(temp.toString());
        masterVector.add(i, flashcardVector);
        temp++;
    }

    return masterVector;
}

public static void main(String[] args) {
    EditFlashcardGui gui = new EditFlashcardGui();
}

@Override
public void valueChanged(ListSelectionEvent e) {
    if (! e.getValueIsAdjusting())
    {
        System.out.print("id : " );
        System.out.println(masterVector.get(list.getSelectedIndex()).get(0));
        System.out.print("front text : ");
        System.out.println(masterVector.get(list.getSelectedIndex()).get(1));
        frontTextField.setText(masterVector.get(e.getFirstIndex())
                .get(1).toString());
        System.out.print("reverse text : ");
        System.out.println(masterVector.get(list.getSelectedIndex()).get(2));
        reverseTextArea.setText(masterVector.get(e.getFirstIndex())
                .get(2).toString());
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:34:48.163

*   必须阅读有关[如何使用 JList的 Oracles 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)

*   不能`Vector<Vector>`直接`JList`放

*   put value and to use `XxxListModel`only，但在这种情况下必须创建疯狂的解决方法`AbstractListModel`，使用简单数组代替

*   `JList`是基于一维数组必须使用`Vector<Object (or String or Double...)>`

* * *

*   不要把简单的事情复杂化，把这个数组放到`JTable`（到`XxxTableMode`l ），删除所有同步列，`JTableHeader`如果需要，删除，然后输出到 GUI 看起来像`JList`

*   `JTable.removeColumn`仅从视图中删除列，所有数据仍会显示并存储到其中`XxxTableModel`，无需任何更改

*   然后选择（必须测试`-1 == none of row is selected`）行（必须`convertViewToModel`在排序或过滤的情况下`JTable`）返回所有需要的数据`XxxTableModel`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:24:07.727

使用 list.getSelectedIndex() 而不是 e.getFirstIndex() 方法。

代码 ：

```
 frontTextField.setText( masterVector.get(list.getSelectedIndex() ).get(1).toString() );
        reverseTextArea.setText(masterVector.get( list.getSelectedIndex()).get(2).toString() ); 
```

清洁代码：

```
public void valueChanged(ListSelectionEvent e) {

    if (!e.getValueIsAdjusting()) {
        Vector masterVec = masterVector.get( list.getSelectedIndex() );

        System.out.print("id : ");
        System.out.println(masterVec.get(0));

        System.out.print("front text : ");
        System.out.println(masterVec.get(1));

        System.out.print("reverse text : ");
        System.out.println(masterVec.get(2));

        frontTextField.setText(masterVec.get(1).toString());
        reverseTextArea.setText(masterVec.get(2).toString());;
    }
} 
```

# iphone - 使用 Foursquare 的 API 将场所放入 NSArray

> ID：14980803
> 
> 赞同：1
> 
> 时间：2013-02-20T13:16:43.833
> 
> 标签：iphone, xcode, api, nsarray, foursquare

我正在尝试将场地保存到`NSArray`. `NSDictionary`Venue 是Response中的一个数组。我想要一个`NSArray`有所有场地的，这样我就可以填满一张桌子。

```
NSURL *url = [[NSURL alloc] initWithString:@"https://api.foursquare.com/v2/venues/search?ll=40.7,-74&query=dog&limit=10"];
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSDictionary *responseData = [JSON objectForKey:@"response"];
    self.venues = responseData[@"venues"];

    [self.tableView setHidden:NO];
    [self.tableView reloadData];
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
}];
[operation start]; 
```

四个正方形部分

```
response: {
    venues: [{
        id: "4ea2c02193ad755e37150c15"
        name: "The Grey Dog"
        contact: {
            phone: "+12129661060"
            formattedPhone: "+1 212-966-1060"
        }
        location: {
            address: "244 Mulberry St"
            crossStreet: "btwn Spring & Prince St"
            lat: 40.723096
            lng: -73.995774
            distance: 2595
            postalCode: "10012"
            city: "New York"
            state: "NY"
            country: "United States"
            cc: "US"
        } 
```

[链接到 Foursquare API](https://developer.foursquare.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:32:56.137

你不需要一个新的阵列来保存所有的场地。

首先创建一个全局`NSDictionary`，如：

```
NSDictionary* venuesDict;

@property (nonatomic, retain) NSDictionary* venuesDict; 
```

并合成它。然后，您可以在上面的代码中分配它，如下所示：

```
venuesDict = [[JSON objectForKey:@"response"] objectForKey:@"venues"];
NSLog(@"%@", venuesDict); //everything should work up to here! 
```

* * *

假设 NSLog 打印您在问题中发布的输出（但将场所作为第一个对象），您可以填充如下表格：

```
#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [[venuesDict objectForKey:@"venues"] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    cell.textLabel.text = [[venuesDict objectForKey@"venues"] objectForKey:@"name"];

    return cell;
} 
```

# angularjs - Angularjs 将控制器解析为字符串

> ID：14980805
> 
> 赞同：22
> 
> 时间：2013-02-20T13:16:51.230
> 
> 标签：angularjs

我编写角度控制器的风格是这样的（使用控制器名称而不是函数）

```
angular.module('mymodule', [
])
    .controller('myController', [
        '$scope',
        function($scope) {
            // Some code here

        }
    ]); 
```

我现在需要的是在提供我想要定义解析部分的路线时：

```
 $routeProvider.when('/someroute', {
        templateUrl: 'partials/someroute.html', 
        resolve: myController.resolve}) // THIS IS THE CRITICAL LINE 
```

由于控制器被定义为名称，如何完成下面的解析部分？

为了更详细地说明，我想在解析路由之前从服务器加载一些数据，然后在控制器中使用这些数据。

**更新：**更准确地说，我希望每个模块都有其“resolve”函数，该函数将在执行该控制器的 root 之前调用。[这篇文章](https://stackoverflow.com/questions/11972026/delaying-angularjs-route-change-until-model-loaded-to-prevent-flicker)中的解决方案（由 Misko Hevery 回答）完全符合我的要求，但我没有将控制器作为函数，而是作为名称。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-20T13:52:39.287

控制器定义和解析部分将在路由定义中单独指定。

如果您在模块级别定义控制器，则需要将它们作为字符串引用，因此：

```
 $routeProvider.when('/someroute', {
        templateUrl: 'partials/someroute.html', 
        controller: 'myController',
        resolve: {
          myVar: function(){
            //code to be executed before route change goes here
          };
        }); 
```

上面的代码还展示了如何定义一组将在路由更改之前解析的变量。解析后，这些变量可以注入到控制器中，因此以上面代码段中的示例为例，您可以像这样编写控制器：

```
.controller('myController', ['$scope', 'myVar', function($scope, myVar) {
            // myVar is already resolved and injected here
        }
    ]); 
```

该视频也可能有所帮助：[http ://www.youtube.com/watch?v=P6KITGRQujQ](http://www.youtube.com/watch?v=P6KITGRQujQ)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-11T08:01:09.077

@pkozlowski.opensource 的答案有效，但我真的不想弄乱我的路由和控制器，因为我总是将它分开（与 Yo Generator）。实际上，我们也可以将 controller 和 resolve(r) 都作为`string`/name（不是函数）。

```
angular.module('mymodule', [
])
  .controller('myController', [
      '$scope', 'myModelCombination'
      function($scope, myModelCombination) {
          // myModelCombination[0] === (resolved) myModel 
          // myModelCombination[1] === (resolved) myModel2

      }
  ])
  .controller('myController2', [
      '$scope', 'myModel'
      function($scope, myModel) {
          // Some code here

      }
  ])
  .factory('myModel', [
      '$scope',
      function($scope) {
          // return a promise

      }
  ])
  .factory('myModel2', [
      '$scope',
      function($scope) {
          // return a promise

      }
  ])
  .factory('myModelCombination', [
      '$scope', 'myModel', 'myModel2'
      function($scope) {
          return $q.all(['myModel', 'myModel2']);

      }
  ]); 
```

然后在你的路由文件中添加这个

```
$routeProvider.when('/someroute', {
    templateUrl: 'partials/someroute.html', 
    resolve: ['myModel'] //ALWAYS IN ARRAY)
});
$routeProvider.when('/myModelCombination', {
    templateUrl: 'partials/someroute2.html', 
    resolve: ['myModel'] //ALWAYS IN ARRAY)
}); 
```

[http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$routeProvider

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T22:39:06.233

@TruongSinh 答案对我有用，比在路由器中具有附加功能要好得多。我对其进行了一些调整，因为它返回的是延迟对象而不是实际解析的数据。

```
$routeProvider.when('/someroute', {
    templateUrl: 'partials/someroute.html', 
    controller: 'SomeController',
    resolve: {
       myModel: 'myModel'
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-23T09:37:06.837

这也可以

```
var MyController = myApp.controller('MyController', ['$scope', 'myData', function($scope, myData) {
  // Some code here
}]);

MyController.resolve = {
  myData: ['$http', '$q', function($http, $q) {
    var defer = $q.defer();

    $http.get('/foo/bar')
      .success(function(data) {
        defer.resolve(data);
      })
      .error(function(error, status) {
        defer.reject(error);
      });

    return defer.promise;
  }]
}; 
```

# sql - 决定是否执行 WHERE 的条件

> ID：14980808
> 
> 赞同：0
> 
> 时间：2013-02-20T13:16:54.740
> 
> 标签：sql, conditional, where

我有一个非常大的存储过程，我想`WHERE`在最后包含一个子句，以防万一`@myparameter=1`。我不希望存储过程注意 WHERE 子句 when `@myparameter=0`. 有没有办法做到这一点`CASE`或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:28:11.723

```
WHERE @myparameter=0 OR (insert the current conditions here) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:45:14.170

如果你真的想使用 CASE，像这样的东西......

```
WHERE
  CASE 
    WHEN (@myparameter=0) THEN 1
    WHEN (@myparameter=1) AND (rest of where clause) THEN 1
    ELSE 0
  END = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:29:23.997

添加 where 而不是你的修改版本

```
where (@myparemeter = 0 or (@myparameter = 1 and (your where conditions here))) 
```

# java - servlet url 路径和参数有什么不同？

> ID：14980810
> 
> 赞同：0
> 
> 时间：2013-02-20T13:16:58.567
> 
> 标签：java, url, tomcat, servlets, path

`localhost/user/user123`和`localhost/user?user=user123`和有什么区别`localhost/?user=user123`？

如何从servlet 中`user123`的 URL获取参数？`localhost/user/user123`

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:38:32.517

您可以从 HttpServletRequest 对象的 getPathInfo() 中解析。

示例代码

```
String urlPath = request.getPathInfo();

System.out.println("" + urlPath.substring(urlPath.lastIndexOf("/"), urlPath.length()- 1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:23:27.430

localhost/user/user123 看起来像是一种识别资源的 RESTful 方式。

其他两个不是，我想。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:27:19.757

这些都可以从**Servlet API**访问。检查[HttpServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)，您可以从那里访问所有信息。

实际值可能与您的 web 应用程序的部署方式不同，但通常

*   `localhost`是上下文路径
*   之后的字符串是 Servlet 路径
*   后面的参数`?`是查询字符串 - 如果你想使用，你必须解析它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T13:28:27.417

*   `localhost/user/user123`- 这个网址将由模式处理`/user/user123`
*   `localhost/user?user=user123`- 此 url 将由 pattern 处理`/user`，`user`参数设置为`user123`（用于 GET 请求）
*   `localhost/?user=user123`- 此 url 将由参数设置为的模式`/`处理（同样，对于 GET）`user``user123`

我不知道如何使用纯 servlet`user123`从 url中检索`localhost/user/user123`，但是使用 web MVC 框架很容易。弹簧示例：

```
@Controller
@RequestMapping("/user")
public class Controller {
    @RequestMapping(value = "/{user}")
    public String getUser((@PathVariable String user) {
        //here variable "user" is available and set to "user123" in your case
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T13:28:49.267

通常，您传递参数，例如

```
/localhost/Servlet?parameter1=one 
```

或者对于 JSP

```
/localhost/mypage.jsp?parameter1=one 
```

在 servlet 中，您可以使用请求对象访问参数。所以一般是这样的：

```
String parameter1 = request.getParameter("parameter1"); 
```

[这是有关HttpServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)的 getParameter 的一些详细信息

希望这可以帮助。

# javascript - 如何在html中将文本框输入限制为数字0-10

> ID：14980812
> 
> 赞同：2
> 
> 时间：2013-02-20T13:17:09.373
> 
> 标签：javascript, html, validation

嗨，我在 html 中有一个文本框，我希望用户只输入数字值，例如。0,1,2,3,4,5,6,7,8,9,10，如果用户输入 11，它应该显示一个警告框，显示“只允许 0-10”，因为到目前为止我是新手有这个脚本

```
SCRIPT language=Javascript>

         function validateForm()
         {
             var x=document.form["tst"]["num"].value;
             var y = parseInt( x  ,  10  )
             var i=15;
             if (y>i)
             {
                 alert("Range is Between 0-10");
                 return false;
             }
         }
</script> 
```

这是我的文本框代码，

```
 <INPUT  id="num" name="num" onkeypress="return validateForm()" size="2" maxlength="2" type="text" > 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T13:19:46.260

您可以轻松使用 HTML5 输入类型：

```
<input type="number" min="0" max="10"> 
```

这可能会消除对可怕的模式弹出窗口的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:20:48.857

尝试更改`var i=15;`为`var i=11;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-01T19:00:31.200

```
<input type="number" name="quantity" min="0" max="10"> 
```

# c# - 反序列化有效，但缺少 XMLArray c# XMLSerialize

> ID：14980813
> 
> 赞同：1
> 
> 时间：2013-02-20T13:17:15.663
> 
> 标签：c#, .net, xml-serialization, dynamics-crm-2011, deserialization

XML 由使用 XMLSerialize 序列化/反序列化的具有 c# 桌面应用程序的相同 .NET 生成和加载。

可序列化的类结构非常复杂，所以我只选择了两个相关的类。

现在，当我反序列化时，除了映射消息（或消息作为对象列表在组织中的调用方式）之外的所有内容都已加载。

有人对这种行为有解释吗？

任何改进已经完成的内容的提示或提示也总是值得赞赏的。

谢谢你。

我有以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration xmlns:xsd="Company.Test3.Crm.Crm2Queue.Config.xsd">
    <organizations>
        <organization name="Vanilla">
            <settings>
                <ignoreemptyfields>true</ignoreemptyfields>
                <throwerroronmissingconfiguration>true</throwerroronmissingconfiguration>
            </settings>
            <endpoints>
                <endpoint>
                    <serviceUri>http://www.webservicex.net/usaddressverification.asmx</serviceUri>
                </endpoint>
            </endpoints>
            <messages>
                <message name="account">
                    <field name="accountnumber" mappedname="State" />
                    <field name="address1_county" mappedname="Zip" />
                    <field name="address1_latitude" mappedname="City" />
                </message>
            </messages>
            <entities>
                <entity name="account" messageschema="/XSD/.xsd" identifier="accountid">
                    <events>
                        <event name="create" message="" />
                        <event name="update" message="" />
                        <event name="delete" message="" />
                    </events>
                </entity>
            </entities>
        </organization>
    </organizations>
</configuration> 
```

现在可序列化的类如下所示：

```
[Serializable()]
public class Organization
{
    #region XmlIgnore

    [XmlIgnore()]
    public string Id { get; set; }

    [XmlIgnore()]
    public bool Checked { get; set; }

    [XmlIgnore()]
    public List<MappingMessage> mappingMessages { get; set; }

    #endregion

    #region Attributes

    [XmlAttribute("name")]
    public string Name { get; set; }

    #endregion

    #region Properties

    [XmlElement("settings")]
    public Settings Settings { get; set; }
    public bool ShouldSerializeSettings() { return (Settings != null && (Settings.IgnoreEmptyFields.HasValue || Settings.ThrowErrorOnMissingConfiguration.HasValue)); }

    [XmlArray("endpoints")]
    [XmlArrayItem("endpoint")]
    public List<Endpoint> Endpoints { get; set; }
    public bool ShouldSerializeignoreEndpoints() { return (Endpoints.Count > 0); }

    [XmlArray("messages")]
    [XmlArrayItem("message")]
    public List<MappingMessage> Messages 
    {
        get { return mappingMessages.Where(mm => (mm.Fields.Where(fi => !string.IsNullOrEmpty(fi.MappedName)).ToList().Count > 0)).ToList(); }
        set { mappingMessages = value; }
    }
    public bool ShouldSerializeFilledMappingMessages() { return (mappingMessages.Where(mm => (mm.Fields.Where(fi => !string.IsNullOrEmpty(fi.MappedName)).ToList().Count > 0)).ToList().Count > 0); }
    //public bool ShouldSerializeMappingMessages() { return (MappingMessages.Where(mm=> (mm.Fields.Where(fi=> !string.IsNullOrEmpty(fi.MappedName)).ToList().Count > 0)).ToList().Count > 0); }

    [XmlArray("entities")]
    [XmlArrayItem("entity")]
    public List<Entity> Entities { get; set; }
    public bool ShouldSerializeEntities() { return (Entities.Count > 0); }

    #endregion

    #region Constructors

    public Organization()
    {
        Settings = new Settings();
        Endpoints = new List<Endpoint>();
        mappingMessages = new List<MappingMessage>();
        Entities = new List<Entity>();
        Checked = false;
    }

    public Organization(string name)
        : this()
    {
        Name = name;
    }

    public Organization(string id, string name)
        : this(name)
    {
        Id = id;
    }

    #endregion
}

[Serializable()]
public class MappingMessage
{
    #region XmlIgnore

    [XmlIgnore()]
    public string EntityId { get; set; }

    [XmlIgnore()]
    public bool Checked { get; set; }

    [XmlIgnore()]
    public List<Field> Fields { get; set; }

    #endregion

    #region Attributes

    [XmlAttribute("id")]
    public string Id { get; set; }

    [XmlAttribute("name")]
    public string Name { get; set; }

    #endregion

    #region Properties

    [XmlElement("field")]
    public List<Field> SelectedFields
    {
        get
        {
            return Fields.Where(fi=> !string.IsNullOrEmpty(fi.MappedName)).ToList();
        }
        set
        {
            Fields = value;
        }
    }
    public bool ShouldSerializeSelectedFields() { return (SelectedFields.Count > 0); }

    [XmlElement("subentity")]
    public List<SubEntity> SubEntities { get; set; }
    public bool ShouldSerializeSubEntities() { return (SubEntities.Count > 0); }

    [XmlElement("parententity")]
    public List<ParentEntity> ParentEntities { get; set; }
    public bool ShouldSerializeParentEntities() { return (ParentEntities.Count > 0); }

    #endregion

    #region Constructors

    public MappingMessage()
    {
        Checked = false;
        Fields = new List<Field>();
        SubEntities = new List<SubEntity>();
        ParentEntities = new List<ParentEntity>();
    }

    public MappingMessage(string entityId)
        : this()
    {
        EntityId = entityId;
    }

    public MappingMessage(string entityId, string name)
        : this(entityId)
    {
        Name = name;
    }

    #endregion
} 
```

我使用反序列化，如下所示：

```
foreach (ZipEntry zipEntry in zipFile)
                {
                    using (MemoryStream memoryStream = new MemoryStream())
                    {
                        if (zipEntry.FileName.ToLower().EndsWith(".crm.crm2queue.config.xml"))
                        {
                            using (StreamReader streamReader = new StreamReader(memoryStream, Encoding.UTF8))
                            {
                                zipEntry.Extract(memoryStream);
                                memoryStream.Position = 0;
                                XmlSerializer xmlSerializer = new XmlSerializer(typeof(Ciber.Crm.MappingCRMTo.Data.Configuration));
                                configuration = (Configuration)xmlSerializer.Deserialize(streamReader);
                            }
                        }
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:20:12.787

反序列化器尝试填充列表 returne `public List<MappingMessage> Messages`。为了让序列化程序调用 setter，您必须将属性类型更改为不可变的集合类型，例如`MappingMessage[]`.

编辑：要看到这一点，您可以将实体自动属性替换为具有支持字段的属性，并在 getter 和 setter 中设置断点。您不应该在 setter 中中断，而应该在 getter 中中断。

# c# - 递归目录结构列表需要很长时间才能处理

> ID：14980824
> 
> 赞同：0
> 
> 时间：2013-02-20T13:17:44.380
> 
> 标签：c#, asp.net, directoryinfo

我使用下面的代码从 GET 变量提供的路径（根）开始，递归地进入每个子文件夹并将其内容显示为列表项。我使用的路径大约有 3800 个文件和 375 个子文件夹。我需要大约 45 秒来呈现页面，有什么办法可以缩短这个时间，因为这对我的用户来说是不可接受的。

```
string output;
protected void Page_Load(object sender, EventArgs e) {
    getDirectoryTree(Request.QueryString["path"]);
    itemWrapper.InnerHtml = output;
}

private void getDirectoryTree(string dirPath) {
    try {
        System.IO.DirectoryInfo rootDirectory = new System.IO.DirectoryInfo(dirPath);
        foreach (System.IO.DirectoryInfo subDirectory in rootDirectory.GetDirectories()) {
            output = output + "<ul><li><a>" + Regex.Replace(subDirectory.Name, "_", " ");
            if (subDirectory.GetFiles().Length != 0 || subDirectory.GetDirectories().Length != 0) {
                output = output + " +</a>";
            } else {
                output = output + "</a>";
            }
            getDirectoryTree(subDirectory.FullName);
            if (subDirectory.GetFiles().Length != 0) {
                output = output + "<ul>";
                foreach (System.IO.FileInfo file in subDirectory.GetFiles()) {
                    output = output + "<li><a href='" + file.FullName + "'>" + file.Name + "</a></li>";
                }
                output = output + "</ul>";
            }
            output = output + "</li></ul>";
        }
    } catch (System.UnauthorizedAccessException) {
        //This throws when we don't have access.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-19T06:16:36.440

*   您应该使用 System.Text.StringBuilder（性能良好）而不是字符串连接（不可变）性能不佳。
*   您应该使用普通的字符串替换功能，而不是使用复杂的搜索。subDirectory.Name.replace("_", "");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-21T08:00:54.283

代码运行缓慢的主要原因很可能是多次调用 GetFiles 和 GetDirectories。`if`您在条件和初始查找中一遍又一遍地调用它们。您只需要计数一次。此外，添加字符串也无济于事。

以下代码能够在 300 毫秒内通过我的简单 USB 驱动器并返回超过 400 个文件夹和 11000 个文件。在慢速网络驱动器上，它能够在 9 秒内返回 300 个文件夹中的 4000 个文件。它可能可以在递归期间使用[Parallel.ForEach进一步优化。](https://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach(v=vs.110).aspx)

```
protected void Page_Load(object sender, EventArgs e) {

    itemWrapper.InnerHtml = GetDirectory(Request.QueryString["path"]);
}

static string GetDirectory(string path)
{
    StringBuilder output = new StringBuilder();
    var subdir = System.IO.Directory.GetDirectories(path);
    var files = System.IO.Directory.GetFiles(path);
    output.Append("<ul><li><a>");
    output.Append(path.Replace("_", " "));
    output.Append(subdir.Length > 0 || files.Length > 0 ? "+</a>" : "</a>");

    foreach(var sb in subdir)
    {
        output.Append(GetDirectory(sb));
    }

    if (files.Length > 0)
    {
        output.Append("<ul>");
        foreach (var file in files)
        {
            output.AppendFormat("<li><a href =\"{0}\">{1}</a></li>", file, System.IO.Path.GetFileName(file));
        }
        output.Append("</ul>");
    }
    output.Append("</ul>");
    return output.ToString();
} 
```

# java - 更改 String.xml 的值

> ID：14980827
> 
> 赞同：0
> 
> 时间：2013-02-20T13:17:50.483
> 
> 标签：java, android

这可能是一个愚蠢的问题，但请原谅我，因为我只是一个学习者。

如果可以，是否可以在类的方法中更改 player 的值，请告诉我如何。

**这是我的 R.java 的一部分**

```
 public static final class string {
    public static final int player=0x7f060003; 
```

**这是值文件中我的 string.xml 的一部分**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="player">player</string>
</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:19:55.330

不，您不能以任何方式更改 android 应用程序资源。所有资源都是只读的。也许您可以使用 SharedPreferences。您可以从资源中读取初始值，然后使用 SharedPreferences 存储可以修改的实际值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:53:17.810

不，您不能更改 R.java 中的任何内容。甚至不要尝试。如果你这样做，你只是在要求很多错误。
如果您想更改标题并且您正在使用 ActionBar，您可以使用 setTitle("String"); 方法。

在类的方法中，您需要：

```
public void onCreate (Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ActionBar ab= getActionBar();   //Creates new ActionBar Instance Object
    ab.setTitle("Welcome to my App!"); //Sets the title of that ActionBar Object
}

//Method that inflates the ActionBar
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.home_action_bar, Menu);
    return true;
} 
```

您可以更改标题的另一种方法是，如果您将 TextView 放在布局顶部并更改 TextView 中显示的内容。

# asp.net-mvc - 如何在 Asp.net MVC 中集成 Aloha Editor 并提交到数据库

> ID：14980828
> 
> 赞同：0
> 
> 时间：2013-02-20T13:17:57.440
> 
> 标签：asp.net-mvc, aloha-editor

我已经包含了 js 文件并且能够在浏览器上看到控件。

您能否请任何人解释如何在 Asp.net MVC 框架中使用 Aloha 编辑器，我对从编辑器控件获取值并将其发布到数据库感到震惊。

谢谢，巴斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:23:15.820

这是一个简单的示例，说明如何使用 .Net MVC 从 aloha 编辑器中保存内容。

这应该足以让你开始。

添加按钮以将内容保存在与 Aloha 编辑器相同的页面上

```
<input type="button" id="save-content" value="save"/> 
```

创建一个控制器操作来保存您的内容。

```
public ActionResult SaveContent(string editor, string content)
{
    //save content to db here
    return Json(new {success = true}, JsonRequestBehavior.AllowGet);
} 
```

然后将以下脚本添加到页面。这将遍历您页面上的任何 aloha 编辑器，并使用您刚刚创建的控制器操作发出 ajax 请求以保存内容。

```
<script>   
    $('#save-content').on('click', function() {

        jQuery.each(Aloha.editables, function(index, editable) {
            $.ajax({
                url: @Url.Action("SaveContent"),
                type: 'post',
                data: {editor: editable.getId(), content: editable.getContents()}
            }).done(function(){
                alert('content saved');
            });    
        });
    });
</script> 
```

# coldfusion - ColdFusion 如何映射会话？

> ID：14980835
> 
> 赞同：1
> 
> 时间：2013-02-20T13:18:20.167
> 
> 标签：coldfusion, jrun

我们正在使用 ColdFusion 9.0.1，并且开始注意到，如果我们点击一​​个子域，然后是一个根域（例如 www.example.com example.com )

ColdFusion 似乎能够成功管理这一事实并将会话与正确的会话变量正确匹配。

我希望了解 ColdFusion/JRUN 如何处理会话变量映射。我知道应用程序名称是等式的一部分，但是当有多个 JSESSIONID cookie 时会发生什么。它如何决定哪一个是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:23:36.797

默认情况下，cookie 是特定于域的，因此在 www.foo.com 上创建的 cookie 不会转移到 foo.com。在您的 Application.cfc 中，您需要将`setdomaincookies`值设置为`true`，如下所示：

```
<cfapplication name="myapp" setdomaincookies="true" /> 
```

或者，如果您在 cfscript 中编写它：

```
this.setdomaincookies = true; 
```

这会将您的会话 cookie 设置为 *.foo.com 的一部分，并且它们将从一个子域传送到另一个子域而不会出现问题。

# wix - 如何检查 WiX 中的值？

> ID：14980836
> 
> 赞同：0
> 
> 时间：2013-02-20T13:18:20.480
> 
> 标签：wix, windows-installer, wix3.6

我在 WiX 中有以下内容：

一个对话框提供了两个复选框来安装 Excel 2007 和/或 Excel 2010 的软件。

```
<Control Type="CheckBox" Id="Excel2007" Width="88" Height="17" X="22" Y="120" Text="Excel 2007" Property="INSTALLEXCEL2007_2010" CheckBoxValue="1" />

<Control Type="CheckBox" Id="Excel2010" Width="88" Height="17" X="22" Y="120" Text="Excel 2010" Property="INSTALLEXCEL2010" CheckBoxValue="1" /> 
```

我想评估用户设置了哪个复选框来检查是否安装了 PIA（Excel 2007 / 2010 的工具）。如果没有，安装应停止并显示一条消息。

当前的问题是：

我无法检查这两个值作为启动条件，因为我不知道用户的决定。我想我可能会在复选框所在的对话框中使用一个条件，如下所示：

```
<Publish Dialog="ExcelConfigDlg" Control="ExcelConfigDlg_Proceed" Event="NewDialog" Value="InstallDirDlg"><![CDATA[INSTALLEXCEL2007>="1"]]></Publish> 
```

但是，这不起作用。单击按钮时，安装程​​序继续进行。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:49:09.773

回答你的第一个和第二个问题：

```
<Publish Dialog="ExcelConfigDlg" Control="ExcelConfigDlg_Proceed" Event="NewDialog" Value="InstallDirDlg"><![CDATA[INSTALLEXCEL2007_2010="1"]]></Publish> 
```

如果他们的用户没有选择任何复选框，我认为你想提出一个警告对话框。这是我的警告对话框之一的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
<Fragment>
 <UI>
  <Dialog Id="WarningDlg" Width="260" Height="85" Title="!(loc.Title)">
    <Control Id="Ok" Type="PushButton" X="112" Y="57" Width="56" Height="17" Default="yes" Cancel="yes" Text="Ok">
      <Publish Event="EndDialog" Value="Return">1</Publish>
    </Control>
    <Control Id="Text" Type="Text" X="48" Y="15" Width="194" Height="30" NoPrefix="yes" Text="!(loc.IntegerOnlyDlgDecription)" />
    <Control Id="Icon" Type="Icon" X="15" Y="15" Width="24" Height="24" FixedSize="yes" IconSize="32" Text="Exclamation" />
  </Dialog>
</UI>
</Fragment> 
```

并使用以下内容：

```
<Publish Dialog="ExcelConfigDlg" Control="ExcelConfigDlg_Proceed" Event="SpawnDialog" Value="WarningDlg"><![CDATA[(INSTALLEXCEL2007_2010<>"1") AND (INSTALLEXCEL2010<>"1")]]></Publish> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:18:57.807

我想验证一个复选框值，并根据它检查更多值（通过 RegistrySearch 接收）。到目前为止，我最终得到了以下结果（目前正在工作）：

```
<Publish Dialog="ExcelChooserDlg" Control="ExcelChooser_Weiter" Event="NewDialog" Value="FileConfigDlg" Order="1"><![CDATA[INSTALLEXCEL2003="1" OR INSTALLEXCEL2007="1" OR INSTALLEXCEL2010="1"]]></Publish>
        <Publish Dialog="ExcelChooserDlg" Control="ExcelChooser_Weiter" Event="SpawnDialog" Value="CancelDlg" Order="2"><![CDATA[INSTALLEXCEL2003<>"1" AND INSTALLEXCEL2007<>"1" AND INSTALLEXCEL2010<>"1"]]></Publish>
        <Publish Dialog="ExcelChooserDlg" Control="ExcelChooser_Weiter" Event="SpawnDialog" Value="CancelDlg" Order="3"><![CDATA[INSTALLEXCEL2007="1" AND OFFICERUNTIME<"10.0.31007"]]></Publish>
        <Publish Dialog="ExcelChooserDlg" Control="ExcelChooser_Weiter" Event="SpawnDialog" Value="CancelDlg" Order="4"><![CDATA[INSTALLEXCEL2007="1" AND OFFICERUNTIME<"10.0.31007" AND OFFICE_2007_PIA<>"Microsoft Office 2007 Primary Interop Assemblies"]]></Publish>
        <Publish Dialog="ExcelChooserDlg" Control="ExcelChooser_Weiter" Event="SpawnDialog" Value="CancelDlg" Order="5"><![CDATA[INSTALLEXCEL2010="1" AND OFFICERUNTIME<"10.0.31007" AND OFFICE_2010_PIA<>"Microsoft Office 2010 Primary Interop Assemblies"]]></Publish> 
```

我不确定这是否是最好的解决方案，但正如我所说，到目前为止它对我有用。

# c# - WebKit .NET 使用缓存、cookie 和触摸支持

> ID：14980838
> 
> 赞同：3
> 
> 时间：2013-02-20T13:18:24.727
> 
> 标签：c#, webkit

我想在我的应用程序中使用[WebKit.NET 网络浏览器。](http://webkitdotnet.sourceforge.net/)我没有在 webkit 网站上找到任何有关使用缓存和 cookie 的信息。有什么方法可以清除缓存/cookie 以及如何禁用/启用 cookie？
我想在 WPF 应用程序中使用此控件，并希望创建具有多点触控支持的缩放和平移功能。这个 webkit 浏览器是否支持它？如果不是，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-11T17:38:24.933

“基本对象”是我正在使用的。我都试过了，只有这个项目准备好生产了。

# android - 字符串比较

> ID：14980839
> 
> 赞同：0
> 
> 时间：2013-02-20T13:18:30.897
> 
> 标签：android

我实际上是通过 post 方法在 php 中发布数据，如果数据是在 php 中正确发送的，我得到响应并转换为字符串格式。

问题是我得到了响应，我检查了 log cat 中的响应，结果显示了，但是当我将这些响应与它们不运行的字符串进行比较时。

我的代码是：-

```
String TAG="SUCCESS";

HttpRequest http =new HttpRequest(data1,data2,data3);
    String result = http.httpRequestPostUser(url);

    Log.d("HTTP POST RESULT FOR VALIDATION","SUCCESS"+result+"<");
    int Tag=0;

    if(TAG.equalsIgnoreCase(result)){
        System.out.println("COMPARING SUCCESS AND INCREMENT TAG");
        Tag=1;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:28:01.287

像这样检查

```
if(result!= null && result.trim().equalsIgnoreCase(TAG)) 
```

看看它是否在比较

# javascript - Javascript 函数不会重复自身

> ID：14980842
> 
> 赞同：1
> 
> 时间：2013-02-20T13:18:41.590
> 
> 标签：javascript

我试图在 Javascript 的帮助下垂直对齐网站上的每个 .class。到目前为止，我得到了这个：

```
<script type="text/javascript">
        function setContent() {
            var windowHeight = 67;
            if (windowHeight > 0) {
                var contentElement = document.getElementById('center');
                var contentHeight = contentElement.offsetHeight;
                if (windowHeight - contentHeight > 0) {
                    contentElement.style.position = 'relative';
                    contentElement.style.top = ((windowHeight / 2) - (contentHeight / 2)) + 'px';
                }
            }
        }
        window.onload = function() {
            setContent();
        }
    </script> 
```

这有效，但仅适用于具有 ID 中心的第一个元素。由于我有 6 个元素需要更改，因此我将代码更改为：

```
<script type="text/javascript">
        function setContent() {
            var windowHeight = 67;
            if (windowHeight > 0) {
                var contentElement = document.getElementsByClassName('center');
                var contentHeight = contentElement.offsetHeight;
                if (windowHeight - contentHeight > 0) {
                    contentElement.style.position = 'relative';
                    contentElement.style.top = ((windowHeight / 2) - (contentHeight / 2)) + 'px';
                }
            }
        }
        $('.center').each(function(){
            $(this).setContent();
        });
    </script> 
```

我改变了 document.getElementById('center'); 到 document.getElementsByClassName('center'); 所以它需要所有的类（是的，我也在 html 中改变了它）。我还插入了一些代码，应该为每个具有类中心的元素重复该函数。问题是，它不起作用，我不知道哪里出了问题..

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:23:16.033

`document.getElementsByClassName('center')` returns a NodeList containing all the elements with that class name, not a single element. If you use it, then you need to *loop over it*.

You never call `setContent()` though.

You call `$(this).setContent();`. If we assume that `$` is jQuery, then you would have to express `setContent` as a jQuery plugin, and fetch the element from `this` instead of searching the DOM (since you have already searched the DOM with the `$('.center')` call.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:24:34.387

Try this:

```
function setContent(contentElement) {
    var windowHeight = 67;
    if (windowHeight > 0) {
        var contentHeight = contentElement.offsetHeight;
        if (windowHeight - contentHeight > 0) {
            contentElement.style.position = 'relative';
            contentElement.style.top = ((windowHeight / 2) - (contentHeight / 2)) + 'px';
        }
    }
}
$('.center').each(function(){
    setContent(this);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:26:04.223

Try with these changes:

```
 function setContent() {
            var windowHeight = 67;
            if (windowHeight > 0) {
                var elems = document.getElementsByClassName('center');
                for(var i in elems) {
                  var contentElement = elems[i];
                  var contentHeight = contentElement.offsetHeight;
                  if (windowHeight - contentHeight > 0) {
                      contentElement.style.position = 'relative';
                      contentElement.style.top = ((windowHeight / 2) - (contentHeight / 2)) + 'px';
                  }
                }
            }
        }
        window.onload = function() {
            setContent();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T13:44:02.387

First of all, as you can see [document.getElementByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName) does not return only one single DOM-Element, instead you get a NodeList of all the Nodes which have the class 'center'.
And as a NodeList does not have the property style, your modifications have no effect.

```
$('.center').each(function(){
    $(this).setContent();
}); 
```

Here you iterate through all the elements with class 'center', but you are trying to call a function which actually does not exist on those elements, so it has not effect either.

As you are using jQuery i would recommend you to try this:

```
<script type="text/javascript">
    function setContent(contentElement) {
        var windowHeight = 67;
        if (windowHeight > 0) {
            var contentHeight = contentElement.offsetHeight;
            if (windowHeight - contentHeight > 0) {
                contentElement.style.position = 'relative';
                contentElement.style.top = ((windowHeight / 2) - (contentHeight / 2)) + 'px';
            }
        }
    }
    window.onload = function() {
        var centerElements = document.getElementByClassName('center')
        for(var i = 0; i < centerElements.length; i+=1)
            setContent(centerElements[i]);
    }
</script> 
```

# sql - 在 sybase 中使用 self join 更新语句

> ID：14980847
> 
> 赞同：0
> 
> 时间：2013-02-20T13:19:04.250
> 
> 标签：sql, sybase, self-join

我有一张包含以下数据的表格。

```
Emp_Id  Name    dept   cat
 1      abc             P
 1               HC     G
 2      def             P 
 2               ET     G
 3      ghi             P
 3               BC     G
 3               MN     G
 4      jkl             P
 4               LS     G
 4               LS     G 
```

我想更新此表以具有类似的输出记录。

```
Emp_Id     Name    dept    cat
     1      abc      HC     P
     2      def      ET     P
     3      ghi      BC     P
     4      jkl      LS     p 
```

如果 Emp_Id 与两个不同的部门相关联，那么它应该更新任何一个部门 (Emp_Id=3)。如果一个 Emp_Id 与两个相同的部门相关联，那么它应该出现一次 (Emp_Id=4)。我正在使用以下查询

```
UPDATE Table1 
    SET a.dept = b.dept
    from Table1 a, Table1 b          
    WHERE
      a.Emp_Id=b.Emp_Id
      and a.cat='P' 
```

但它没有更新 Emp_Id 3 和 4 的任何内容有人可以帮忙吗？

谢谢， 迪拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:28:23.540

多步骤伪代码，因为我不太了解 sybase 语法：

```
Get the results you're after in a select.
SELECT EMP_ID, max(name), max(Dept), max(cat)
FROM tableName
GROUP BY EMPI_ID 
```

将这些结果插入临时表

删除您的表并从临时表中重新创建它。

# corba - 如何在 NAT 后面实现 CORBA 客户端

> ID：14980848
> 
> 赞同：2
> 
> 时间：2013-02-20T13:19:04.763
> 
> 标签：corba, nat

我有以下接口。

```
interface Server {
   void subscribe(in Client client);
};

interface Client {
   void ping();
   void pong();
}; 
```

初始化时，客户端将连接到服务器并调用 subscribe(this)。然后服务器将不时在客户端调用 ping() 或 pong() 方法。但是，如果客户端位于 NAT 之后，这将不起作用。此问题有哪些可能的解决方法？

是否可以将客户端创建的 TCP 连接用于呼叫服务器-> 客户端？请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:39:40.233

查明您的 ORB 是否支持双向 IIOP，这解决了服务器->客户端回调的 NAT/防火墙问题。

以下是一些支持它的 ORB：

OmniORB - [http://omniorb.sourceforge.net/omni40/omniORB/omniORB008.html#sec:bidir](http://omniorb.sourceforge.net/omni40/omniORB/omniORB008.html#sec:bidir)

Orbix - [http://documentation.progress.com/output/Iona/orbix/migration/html/InteropCx3.html](http://documentation.progress.com/output/Iona/orbix/migration/html/InteropCx3.html)

Visibroker - [http://www.albany.edu/dept/csi/csi518/fall03/inprise/vbroker/doc/books/vbj/vbj45/programmers-guide/bidir.html](http://www.albany.edu/dept/csi/csi518/fall03/inprise/vbroker/doc/books/vbj/vbj45/programmers-guide/bidir.html)

# file - Struts2 存储文件

> ID：14980852
> 
> 赞同：0
> 
> 时间：2013-02-20T13:19:23.977
> 
> 标签：file, struts2, store

我正在使用 tomcat7 和 eclipse 处理我的第一个 struts2 项目。我需要将 txt 文件放在服务器上并从中读取数据。我尝试将文件放在源项目目录中并使用从文件中读取的标准 java

```
try {
   File file = new File("hello.txt");
   Scanner scanner = new Scanner(file);
   while (scanner.hasNext()) {
    System.out.println(scanner.next());
   }
   scanner.close();
  } catch (FileNotFoundException e) {
   e.printStackTrace();
  } 
```

但这是行不通的。将文本文件放在哪里（如果可能，重启程序/tomcat后不得刷新），以及如何读取/写入它？请帮忙，这是一个很好的文件教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:05:16.940

您可以使用来自 commons-io jar 的 fileUtils.copyfile(file1,file2)

首先获取文件的绝对路径，然后在这些服务器路径上复制文件

然后您可以修改、读取和写入文件

# jquery - 通过 jQuery 将子级放在带有 z-index 的父级上

> ID：14980853
> 
> 赞同：0
> 
> 时间：2013-02-20T13:19:29.687
> 
> 标签：jquery

我有一种情况，我想*在*它的父项上放置一个子项，但这似乎是不可能的。有关快速情况检查，请参阅此示例

[http://jsfiddle.net/Mr3bH/](http://jsfiddle.net/Mr3bH/)

当我将父鼠标悬停时，我假设我通过该行重新定义了子 css 设置（从其父元素中删除元素，以便删除父>子关系）

```
$('#e11').fadeIn().css({position:'absolute',left:'50px',bottom:0,zIndex:15});
```

从 jsfiddle 示例中可以看出，我希望元素`#e11`悬停在`#e1`and`#e2`元素之上。

有人知道解决方案或解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:59:57.483

z-index css 属性的行为起初不是很容易掌握，因为涉及到几个规则 - 在您的情况下更改 z-index 是不够的，因为您的每个绝对定位的**div**元素都具有 z-index 属性创建一个新的堆叠上下文，一种“层”，其包含元素的 z-index 仅在相同的堆叠上下文中有效。

两篇文章提供了有关此事的更多见解：

*   [http://www.vanseodesign.com/css/css-stack-z-index/](http://www.vanseodesign.com/css/css-stack-z-index/)
*   [https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/Stacking_context_example_1](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/Stacking_context_example_1)

回到你的例子，如果你从 div 中删除 z-index，只留下你通过 jQuery 明确设置的那个，你会发现它会起作用。

（请记住，某些浏览器的行为很可能与预期不符，因为存在或过去存在很多关于不同浏览器之间 z-index 属性解释的异常情况）

# c# - SMTP：发送电子邮件

> ID：14980854
> 
> 赞同：-2
> 
> 时间：2013-02-20T13:19:33.820
> 
> 标签：c#, asp.net, smtp

我想使用 C# 和 ASP.NET 通过 SMTP 发送电子邮件，但主要是我想更改或隐藏来自地址，请帮我解决这个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T13:33:59.893

使用此代码：

将 from@email 设置为您喜欢的任何内容。

```
var client = new SmtpClient("yoursmptserver.com")
{
   Credentials = new NetworkCredential("user@email", "pass"),
};

client.Send("from@email", "to@email", "subject", "body"); 
```

哦，顺便说一句，没有办法隐藏发件人。

但是，您可以使用：

```
var from = new MailAddress("from@email", "DisplayName"); 
```

设置显示名称...

# xaml - 如何为 DevExpress.UI.Xaml.Grid Gridcontrol 添加备用行颜色？

> ID：14980856
> 
> 赞同：0
> 
> 时间：2013-02-20T13:19:38.633
> 
> 标签：xaml, windows-8, microsoft-metro, devexpress

我正在尝试为 Windows 8 Metro App 中的 devexpress xaml 网格的奇数行和偶数行添加备用行颜色。我怎样才能做到这一点？我在谷歌上搜索了很多，但在我的大多数示例中，我的命名空间引用不匹配。我正在使用 Devexpress v12.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:31:33.997

因此？：

```
<MultiDataTrigger>
    <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding Path=EvenRow}" Value="False"/>
        <Condition Binding="{Binding Path=SelectionState}" Value="None"/>
    </MultiDataTrigger.Conditions> 
    <Setter Property="Background" Value="{StaticResource evenRowBrush}" />
</MultiDataTrigger>

<MultiDataTrigger>
    <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding Path=EvenRow}" Value="True"/>
        <Condition Binding="{Binding Path=SelectionState}" Value="None"/>
    </MultiDataTrigger.Conditions>
    <Setter Property="Background" Value="{StaticResource oddRowBrush}" />
</MultiDataTrigger> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:33:42.790

您可以修改`GridControl.ItemTemplate`（行模板）。这种方法在条件格式演示模块（DevExpress v12.2 功能演示）中进行了演示：

```
<UserControl 
    ...
    xmlns:Grid="using:DevExpress.UI.Xaml.Grid">
    <UserControl.Resources>
        <local:RowHandleToBackgroundConverter x:Key="RowHandleToBackgroundConverter" EvenRowBackground="Transparent" OddRowBackground="#FFDFE7EF"/>
    </UserControl.Resources>
...
<Grid:GridControl.ItemTemplate>
    <DataTemplate>
        <Border Background="{Binding Path=RowControl.RowHandle, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource RowHandleToBackgroundConverter}}">
            <Grid:GridCellPanel x:Name="PART_RowPanel" RowControl="{Binding Path=RowControl, RelativeSource={RelativeSource Mode=TemplatedParent}}" Margin="0,0,1,0"/>
        </Border>
    </DataTemplate>
</Grid:GridControl.ItemTemplate> 
```

'RowHandleToBackgroundConverter' 类实现如下：

```
public class RowHandleToBackgroundConverter : IValueConverter {
    public Brush EvenRowBackground { get; set; }
    public Brush OddRowBackground { get; set; }
    public object Convert(object value, Type targetType, object parameter, string language) {
        if(((int)value % 2) == 0)
            return OddRowBackground;
        else
            return EvenRowBackground;
    }
    public object ConvertBack(object value, Type targetType, object parameter, string language) {
        throw new NotImplementedException();
    }
} 
```

# jquery - 过滤字母 jquery

> ID：14980858
> 
> 赞同：1
> 
> 时间：2013-02-20T13:19:40.883
> 
> 标签：jquery, html

她是我的 html 和 jQuery。当我按下过滤器 div 中的“排序”“按钮”时，我希望能够按类名的字母对它们进行排序。现在我可以用“绿色”隐藏所有其他人，所有其他人都会隐藏。但是我需要对它们进行排序的能力。

```
 <div id='filters'>
        <a href='#' id ="sort">Sort</a> 
        <a href='#' id='blue'>blue</a>
        <a href='#' id='green'>green</a>
        <a href='#' id='yellow'>yellow</a>
    </div

    <div id="box">
        <ul id="filter">
            <li class="green"></li>
            <li class="blue"></li>
            <li class="yellow"></li>
            <li class="blue"></li>
            <li class="yellow"></li>
        </ul> 
    </div>

$('#filters a').click(function(e){ 
    e.preventDefault();  
    var filter = $(this).attr('id');  
        $('#box ul li').show();  
        $('#box ul li:not(.' + filter + ')').hide();  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:31:39.530

这将按升序对列表进行排序：

```
 <div id='filters'>
    <a href='#' id ="sort">Sort</a> 
    <a href='#' id='blue'>blue</a>
    <a href='#' id='green'>green</a>
    <a href='#' id='yellow'>yellow</a>
</div>

<div id="box">
    <ul id="filter">
        <li class="green">Green</li>
        <li class="blue">Blue</li>
        <li class="yellow">Yellow</li>
        <li class="blue">Blue</li>
        <li class="yellow">Yellow</li>
    </ul> 
</div>

$('#filters a').click(function(e){ 

  e.preventDefault();  

  var filter = $(this).attr('id'); 

  if (filter == "sort") {

    $('#box ul li').sort(asc_sort).appendTo('#filter');
  }
  else {

    $('#box ul li').show();  
    $('#box ul li:not(.' + filter + ')').hide(); 

  }
});

function asc_sort(a, b) { 
    return ($(b).text()) < ($(a).text());
} 
```

[JSFiddle](http://jsfiddle.net/M8u8Q/)

完全披露：我使用了在[这个问题](https://stackoverflow.com/a/8838790/1011161)中找到的代码。

如果您要扩展它以使列表交替升序和降序排序，您可能只需要一个变量来跟踪列表当前的顺序，否则检查列表当前是否按升序排列，然后降序排序，反之亦然。

# android - 为什么我下面的实现会在不应该响起警报的时候发出警报？

> ID：14980863
> 
> 赞同：2
> 
> 时间：2013-02-20T13:20:02.080
> 
> 标签：android, alarmmanager, repeatingalarm

我正在实现一个 AlarmManager 来请求我的应用程序的更新，这应该每天只发生一次。我不希望警报在警报创建后立即响起。为此，我创建了一个日历对象。

每当创建警报时，它也会触发。请注意，这并不总是发生。~~我注意到这个问题只发生在一天中的特定时间。我住在香港，我希望我所在的时区没有任何问题。除了使用 AlarmManager.INTERVAL_DAY，我还尝试使用 24*60*60*1000。~~仅当日历轧机比当前轧机旧时才会发生这种情况。在删除此问题之前，我将检查当前时间是否较新并在日历对象中添加 24*60*60*1000。

这是一个创建 AlarmManager 的服务。该服务也在启动时启动。只是为了确保 dataPreferenceObj，它是我的应用程序中 DataPreference 类的一个实例，它为我的应用程序处理与 SharedPreferences 相关的调用。而 ACTION_SCHEDULE_ALARM 是 Keys ENUM 类的一部分，它包含所有字符串常量。

```
public class TukiService extends Service {

private static AlarmManager calendarAlarmManager;
private static PendingIntent calendarPendingIntent;
private static final int SCHEDULE_REQUEST_CODE = 1001;

@Override
public void onCreate() {
    super.onCreate();

    updateScheduleUpdate();
}

private static void updateScheduleUpdate() {

    if (dataPreferenceObj.getEnabledUpdate() == true) {
        cancelScheduleUpdate();
        requestScheduleUpdate();
    } else if (dataPreferenceObj.getEnabledUpdate() == false) {
        cancelScheduleUpdate();
    }
}

private static void requestScheduleUpdate() {
    setScheduleAlarmParamaters();

    Calendar calendar = new GregorianCalendar();
    calendar.set(Calendar.HOUR_OF_DAY, 9);
    calendar.set(Calendar.MINUTE, 0);
    calendar.set(Calendar.SECOND, 0);
    calendar.set(Calendar.MILLISECOND, 0);

    scheduleAlarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
            calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY,
            schedulePendingIntent);
}

/*
 * Cancels an existing alarm if user doesn't want to auto update.
 */
private static void cancelScheduleUpdate() {
    setScheduleAlarmParamaters();
    scheduleAlarmManager.cancel(schedulePendingIntent);
}

private static void setScheduleAlarmParamaters() {
    Intent intent = new Intent(Keys.ACTION_SCHEDULE_ALARM.toString(),
            Uri.parse(Long.toString(SCHEDULE_REQUEST_CODE)), context,
            AlarmReceiver.class);

    schedulePendingIntent = PendingIntent.getBroadcast(mContext,
            SCHEDULE_REQUEST_CODE, intent,
            PendingIntent.FLAG_UPDATE_CURRENT);

    scheduleAlarmManager = (AlarmManager) mContext
            .getSystemService(Context.ALARM_SERVICE);
} 
```

}

这是一个接收广播的广播接收器：

```
public class ScheduleReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {

    if (intent.getAction().equals(Keys.ACTION_SCHEDULE_ALARM.toString())) {

        if (TukiService.SCHEDULE_REQUEST_CODE == Long.parseLong(intent
                .getData().getSchemeSpecificPart())) {
            new NetworkHandler(context).fetchAutoEnabledUpdate();
        }
    } 
} 
```

}

这是我在 mainfest 中的接收者声明：

```
 <uses-permission android:name="android.permission.WAKE_LOCK" />
    <receiver
        android:name="com.milanix.tuki.service.ScheduleReceiver"
        android:enabled="true" >
    </receiver>
    <service android:name="com.milanix.tuki.service.TukiService" >
    </service> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T08:07:09.710

我现在已经解决了这个问题。似乎如果 triggerAtMillis 比 currentMillis 旧，则无论您何时设置警报都会触发。我编写了以下代码来检查 triggerAtMillis 是否比 currentMillis 旧。如果它早于我们将在 triggerAtMillis 中添加一个天间隔。现在，无论我何时设置闹钟，它都会在准确的时间触发，如果闹钟时间过去，它将在第二天的同一时间触发。这是代码：

```
public static final int INTERVAL_DAY = 24 * 60 * 60 * 1000;

private static void requestScheduleUpdate() {
    setScheduleAlarmParamaters();

    Calendar calendar = new GregorianCalendar();
    calendar.set(Calendar.HOUR_OF_DAY, 15);
    calendar.set(Calendar.MINUTE, 55);
    calendar.set(Calendar.SECOND, 0);
    calendar.set(Calendar.MILLISECOND, 0);

    long triggerMillis = calendar.getTimeInMillis();

    if (calendar.getTimeInMillis() < Calendar.getInstance()
            .getTimeInMillis()) {
        triggerMillis = calendar.getTimeInMillis() + INTERVAL_DAY;

        System.out.println("Alarm will go off next day");
    }

    scheduleAlarmManager
            .setRepeating(AlarmManager.RTC_WAKEUP, triggerMillis,
                    AlarmManager.INTERVAL_DAY, schedulePendingIntent);
} 
```

如果有人能指出比这个更好的解决方案，那就太好了。

# google-apps-script - 将脚本插入多个 Google 电子表格

> ID：14980864
> 
> 赞同：9
> 
> 时间：2013-02-20T13:20:03.907
> 
> 标签：google-apps-script, google-sheets

我是一名业余编码员——我真的只做一些事情来让我的生活更轻松。我设置了谷歌表格和电子表格来跟踪我学校不同年级的纪律问题。我写了一个简短的脚本，通过电子邮件通知适当的人任何提交，并且可以过滤和创建有关选定学习者的报告。

因为我是 DIY 编码的（英语和法语老师，所以我没有学编程），我经常想出一些从一开始就应该很明显的改进。我真的不想将脚本改进复制并粘贴到每个电子表格的脚本编辑器中。我已将此脚本作为独立文件复制到 Google 云端硬盘中，但我无法将其插入任何电子表格，因为图库只能访问已发布的脚本/应用程序。有没有解决的办法？我见过提到使用库，但我什至不知道从哪里开始。您可以在 Google Drive 中创建一个独立的脚本但实际上不使用它，这感觉有点傻。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T13:54:52.710

This was initially raised as a problem a while ago, and Google's solution was the "libraries" feature.

So you will want to

1.  You must save a version of your project. File > Manage Versions...
2.  Then go into File > Project Properties and copy the project key.
3.  Then in all other spreadsheets, you must go into the Script Editor and to go Resources > Manage Libraries. Then paste the project key from above and add it to that spreadsheet script.

There is not an automated way to accomplish this. In order to have a script run on any spreadsheet, you must go into the Script Editor for each spreadsheet.

[Source](https://developers.google.com/apps-script/guide_libraries)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T16:25:23.060

另一个答案（Phil Bozak）一点也不差，因为它概述了如何构建图书馆，但恐怕这不足以让你真正“走上正轨”。

如文档中所述，***您可以像使用默认服务一样使用包含的库，***这意味着库函数不能直接作为脚本使用，而是应该被视为脚本函数可以调用的工具箱。

因此，在您的每个电子表格中，您应该有许多实际“调用”图书馆服务的基本功能，后者负责实际操作。

让我举一个简单的例子：假设您想更改工作表的背景颜色，您有一个函数`yourLibrary`可以更改当前工作表的颜色（`yourLibrary`是您给库的名称），该函数将被调用`changeColor`。

现在在您的脚本中您可以使用`yourLibrary.changeColor`，但如果您希望在特殊操作（onEdit、onOpen... 或菜单调用）上执行此“服务调用”，则电子表格脚本本身必须存在此“服务调用”，并且该库必须是在同一个脚本编辑器的资源中也引用了。

所有这些都是为了说明库功能非常有用且非常简单，但是您仍然需要在每个电子表格中都有一个“骨架脚本”，并且您将不得不考虑如何使用调用“***可更新部分”的基本结构来重建脚本真正的东西***'。

不是那么简单，但（完成之后）很舒服;-)

希望这足够清楚。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T04:01:26.197

您可能还想考虑您的个人电子表格是否甚至需要自己的容器脚本。为什么你的一个人不能只读入并在所有工作表上运行报告？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-03T17:27:27.320

另一种解决方案可能对您有所帮助，您可以在驱动器中创建**脚本应用程序文件，并将****您想要的所有电子表格 ID 放入数组中**并使用循环技巧运行脚本

# c# - 如何确保我可以唯一标识 .NET 中的目录路径

> ID：14980865
> 
> 赞同：0
> 
> 时间：2013-02-20T13:20:06.317
> 
> 标签：c#, .net

我刚刚在我的应用程序中发现了一个错误，对于同一路径的不同表示，`Path.GetFullPath()`它不会返回*完全相同*的结果。在这种情况下，`../include`和`../include/`分别返回`c:\\...\\include`& `c:\\...\\include\\`; 因为我维护了一个`Dictionary<string,...>`目录名称，所以这会破坏事情。

如何解决这个问题，最好不要对字符串进行令人讨厌的检查，而是使用框架方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:34:10.880

`../include`可能指向目录*或*文件（文件不必具有扩展名），并且`../include/`由于尾部斜杠而始终是目录。所以他们肯定不一样。

如果*您*确定输入始终是目录（`Path.GetFullPath()`无法确定），您可以执行以下操作：

```
path = Path.Combine(input, Path.DirectorySeparatorChar.ToString()); 
```

这样，所有输入都将被视为目录，而不是文件，并且`Path.GetFullPath()`对于两种变体都将返回相同的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:24:29.293

他们不应该返回相同的结果。如果您需要检查路径是否实际上是文件或目录，您可以使用`Path.GetFullPath("../include")`不带斜杠。如果路径是以编程方式提供的，则执行 a `string.TrimEnd('\\')`然后检查路径是文件还是目录，使用：

[File.Exists()](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)和[Directory.Exists()](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)来判断指定的路径是文件还是目录。

您需要确保通过插入/比较非尾随斜杠路径来完成所有表格插入和搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:29:07.610

如果可行，请执行 .TrimEnd('\') 。

# android - Android C++：使用 ndk 从资产中读取文本文件

> ID：14980868
> 
> 赞同：4
> 
> 时间：2013-02-20T13:20:13.050
> 
> 标签：android, c++, android-ndk, ifstream

我正在尝试从存储在 android 项目的 assets 文件夹中的文本文件创建输入流，但我遇到了一些麻烦。像在常规桌面程序（使用）中那样提供文件的路径就足够了`ifstream file_handle; file_handle.open("path/to/fileName");`，还是必须以其他方式将其加载到应用程序中？如果是后者，那么在 ndk 中执行此操作的代码是什么？我仍然可以将文件用作`ifstream`对象吗？

谢谢，

交换

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T14:12:34.033

Android 资源打包在`apk`'s 中，因此您无法直接使用流或文件句柄访问它们。

您需要使用`Native Asset Manager API / AAssetManager`才能阅读它们。查看`asset_manager.h`有关`$NDK/platforms/..`如何从本机访问您的资产的可能功能。

您可能想查看类似的[问题/答案](https://stackoverflow.com/questions/13317387/how-to-get-file-in-assets-from-android-ndk/13317651#13317651)。

# c# - 如何终止线程

> ID：14980869
> 
> 赞同：2
> 
> 时间：2013-02-20T13:20:12.860
> 
> 标签：c#, multithreading

我知道有很多关于这个的问题。我尝试了它们，但没有得到任何结果。

我在第一次运行时创建了一个线程，当我尝试关闭表单时，表单关闭但应用程序（线程）仍在运行。

我不在乎线程会发生什么。我只想在用户单击 X 按钮时关闭整个应用程序。我试过`thread_name.Abort();`但没有任何反应。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T13:21:43.797

在没有代码的情况下，完整的答案很棘手。

我怀疑最简单的解决方案可能是将 Thread 的[IsBackground](http://msdn.microsoft.com/en-GB/library/system.threading.thread.isbackground.aspx)属性设置为 true。

从文档：

> 线程要么是后台线程，要么是前台线程。后台线程与前台线程相同，只是后台线程不会阻止进程终止

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:22:04.047

尝试在创建线程时将[Thread.IsBackground](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)设置为。`true`

如果后台线程正在运行，它们不会阻止进程终止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T13:23:17.280

当您将线程声明为前台线程时，应用程序不会停止，因为该线程仍然存在，即使您单击了“X”。您需要将其设置为后台线程。

```
Thread.IsBackground = true; 
```

[在这里](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T13:34:08.453

不完全是你问的我知道，但 .NET 4.0 中的任务并行库以相当明智的方式支持取消。在您的情况下它可能可行，也可能不可行，但可以在此处获得更多详细信息

[http://msdn.microsoft.com/en-us/library/dd460717(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd460717(v=vs.100).aspx)

# css - 使用rails导入引导程序，错误

> ID：14980871
> 
> 赞同：0
> 
> 时间：2013-02-20T13:20:17.017
> 
> 标签：css, ruby-on-rails, twitter-bootstrap, import

我是编程新手，一直致力于开发我的第一个基本应用程序。我现在已经有同样的问题超过 24 小时了。

当我在安装引导程序并导入后尝试重新加载我的应用程序主页时收到此错误...

```
Sass::SyntaxError in Static_pages#home 
```

我安装了引导 gem 并运行 bundle install ...

```
gem 'bootstrap-sass' 
```

然后我在我的样式表文件夹中创建了一个新的 css 文档并将其命名为 custom.css.scss

从那里我导入了引导程序...

```
@import "bootstrap"; 
```

我保存了文件，当我刷新页面时，我收到了我在开头列出的错误消息。

以下是我收到的错误消息。它告诉我错误发生在第 5 行附近。我尝试将文件保存为 .scss 而不是 .css.scss，但问题仍然存在。

```
File to import not found or unreadable: bootstrap.
Load path: Sass::Rails::Importer(/Users/jackburum/Documents/rails_projects/omrails/app/assets/stylesheets/custom.css.scss)
  (in /Users/jackburum/Documents/rails_projects/omrails/app/assets/stylesheets/custom.css.scss)
Extracted source (around line #5):

2: <html>
3:     <head>
4:       <title>Omrails</title>
5:      <%= stylesheet_link_tag    "application", :media => "all" %>
6:      <%= javascript_include_tag "application" %>
7:      <%= csrf_meta_tags %>
8:     </head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-13T12:54:53.310

通过添加解决它

```
require "bootstrap-sass" 
```

到应用程序.rb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T19:15:50.027

尝试将您的项目 gem 捆绑到项目文件夹本身中。

`bundle install --path .bundle`

我有同样的问题，我从[这里](https://github.com/gregbell/active_admin/issues/270)找到了解决方案。

# ios - iOS api暴露PointOfInterest时间

> ID：14980872
> 
> 赞同：2
> 
> 时间：2013-02-20T13:20:19.463
> 
> 标签：ios

iOS API 需要多长时间`exposurePointOfInterest`来确定点周围的曝光测光？时间是固定的吗？我们对 iPhone 设备有固定的时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T05:01:30.150

我相信它是可变的。如果您监视对 的更改`adjustingExposure`，您会发现它有时会进行快速更改，有时会进行较长时间的更改。

# ios - 通过 POST 用户名和密码在 UIWebView 中加载 url？

> ID：14980873
> 
> 赞同：1
> 
> 时间：2013-02-20T13:20:21.667
> 
> 标签：ios, uiwebview, http-post, nsmutableurlrequest

我正在尝试通过自动登录到该网站来在 UIWebView 中加载网站。我正在发布用户名和密码。它加载网站但未登录。登录不起作用。任何想法？

```
NSURL *url = [NSURL URLWithString:@"http://www.abc.com"];

        NSString *post = [NSString stringWithFormat:@"login_name=%@&login_password=%@&submit=Login", @"abc", @"abc"];
        NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];

        NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
        NSLog(@"POST Length = %@",postLength);
        NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
        [request setURL:url];
        [request setHTTPMethod:@"POST"];
        [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
        [request setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];
        [request setHTTPBody:postData];
        [request setTimeoutInterval:5.0];
         [webView loadRequest:request]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:33:10.937

`application/x-www-form-urlencoded`是否会因为在and之间缺少分号而失败`charset=utf-8`？

试试看`application/x-www-form-urlencoded;charset=UTF-8`是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:32:02.480

我刚刚用我的代码构建了一个示例应用程序来加载 webview。我在表单提交中调用了一个特定页面，它可以登录到 Web 服务。我在这里发布代码：

```
NSString *username = @"abc";
NSString *password = @"abc";
NSString *postString = [NSString stringWithFormat:@"username=%@&password=%@",username, password];
NSLog(@"%@", postString);
NSData *postData = [postString dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:@"http://www.someurl.com/loginscript"]];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:postData];
[webView loadRequest:request]; 
```

也许这段代码会对你有所帮助。

# dos - 使用 djgpp 对 dlopen 的未定义引用

> ID：14980876
> 
> 赞同：0
> 
> 时间：2013-02-20T13:20:23.737
> 
> 标签：dos, dlopen, djgpp

当我尝试使用 djgpp 编译 sqlite3 时，它给出了错误未定义的 dlopen 引用、未定义的 dlclose 引用、未定义的 dlsym 引用等。在 Linux 上，如果我们使用 -ldl，问题就解决了。但是 djgpp 中没有可用的 dl.a。那么如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:44:09.173

您必须禁用所有需要支持动态加载可执行对象的 sqlite 部分。我对 sqlite 不是很熟悉，但是查看它的源配置选项，我会从`SQLITE_OMIT_LOAD_EXTENSION`.

# html - 如何在另一个 div 前面获取一个 div 的子元素？

> ID：14980877
> 
> 赞同：1
> 
> 时间：2013-02-20T13:20:30.147
> 
> 标签：html, css

我试图在另一个 div 前面获取一个 div 的子元素，但 z-index 似乎只在 div 内起作用：

HTML：

```
<div class="below">
  <div class="above">Oben!</div>
</div>

<div class="middle"></div> 
```

CSS：

```
.below{
  position:absolute;
  z-index:0;
}

.middle{
  position:absolute;
  z-index:1;
}

.above{
  position:absolute;
  z-index:2;
} 
```

我希望这些类按以下顺序出现：下面、中间、上面。这是一个 jsFiddle 来说明我的问题：http: [//jsfiddle.net/1Blerk/jH4vX/](http://jsfiddle.net/1Blerk/jH4vX/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:26:00.367

`position:absolute`从中删除`.below`

[更新的演示](http://jsfiddle.net/Matt_Coughlin/TLEZR/1/)

给一个元素一个绝对或相对的位置，以及一个 z-index，创建一个*局部堆叠上下文*。这意味着对于任何绝对或相对定位的子元素，它们的 z-index 是相对于它们的父元素（本地堆叠上下文），而不是相对于父元素之外的元素的 z-index。

如果`.below`需要绝对定位，则将`.below`和`.above`放入容器中并给容器`position:absolute`而不是`.below`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:38:49.503

只需锻炼此代码。

html

```
<div class="below">
 <div class="above">Oben!</div>
</div>
<div class="middle"></div> 
```

css

```
.below{
 position:absolute;
 top:20px;
z-index:0;
 }
.middle{
position:absolute;
z-index:0;
}
.above{
 position:absolute;
z-index:-1;
} 
```

# jakarta-ee - 上传到地方

> ID：14980878
> 
> 赞同：0
> 
> 时间：2013-02-20T13:20:30.650
> 
> 标签：jakarta-ee, tomcat, servlets

我正在处理文件上传并希望将文件放在一个文件夹中。

浏览了一些网站后才知道。

解决方案1：我们可以将文件放在我们的webapps/appname/images 缺点：如果我们重新部署war，那么它将被删除。

解决方案1：使用绝对路径。缺点：我必须在某个地方走硬核路线。

所以我想把文件放在 Tomcat/uploads/images 文件夹中。

这是放置我们上传的正确位置吗？我将如何获取存储的 Tomcat 目录的路径。

我可以转到上下文根位置并找到它的绝对路径，然后后退一步将带我到 webapps 目录。这是正确的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:48:41.300

`Yes`,你可以放在那里。`Tomcat home directory`或`Catalina directory`存储在`Java System Property environment`. 如果 Java Web 应用程序部署到 Tomcat Web 服务器中，我们可以使用以下命令获取 Tomcat 目录

```
System.getProperty("catalina.base"); 
```

# string - PChar / PWideChar / PAnsiChar 转换中是否有任何编译器魔法？

> ID：14980880
> 
> 赞同：1
> 
> 时间：2013-02-20T13:20:42.133
> 
> 标签：string, delphi, pointers, casting

我经常读到编译器在转换为`PChar`.

的主要目的`PChar`是调用库中的外部代码，这些库需要一个以零结尾的字符数组（C 风格的“字符串”）。

`PChar`是`PWideChar`Unicode Delphi 上的别名和`PAnsiChar`非 Unicode Delphi 上的别名的类型。

另一方面， Delphi 字符串（`string`= `AnsiString`/ `UnicodeString`，我不是在`WideString`这里谈论，更不用说......）具有隐藏长度而不是终止字符。`ShortString`它们也被引用计数并在写入时使用复制。

Delphi 字符串是否自动分配并使用隐式 #0 字符保持一个字符长，以便更轻松地转换为`PChar`(PAnsiChar / PWideChar) 还是编译器在遇到转换时检查和调整字符串`PChar`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T13:27:19.697

过程如下：

*   如果字符串`s`的长度大于零，则`PChar(s)`返回指向字符串内容的第一个元素的指针。因为`string`管理有一个*隐藏*的空终止符，所以不需要做更多的事情。
*   如果字符串`s`的长度为零，则`PChar(s)`返回指向包含空终止符的内存块的指针。

作为实现细节，从中返回的空终止符是`PChar(nil)`在已编译模块的只读部分中分配的全局常量。

> Delphi 字符串是否自动分配并使用隐式 #0 字符保持一个字符长，以便更轻松地转换为 PChar（PAnsiChar / PWideChar）？

是的。

如果你可以这么说的话，神奇之处在于：

1.  在空字符串上使用`PChar()`会返回一个指向空终止符的指针。
2.  Delphi在字符串末尾保留*隐藏的空终止符。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T14:08:01.323

字符串变量内部是指向包含前缀、字符和空终止符的结构的指针。虽然结构从前缀开始（包含字符串长度、引用计数、字符大小和代码页），但指针指向第一个字符，因此转换为 PChar 很简单。

string -> PChar 强制转换的神奇之处在于`PChar(S) <> nil`，即使 string 为空（`S = ''`and `Pointer(S) = nil`），也总是如此。不是像`Pointer(S)`do那样返回一个字符串变量指针'as is'，而是`PChar(S)`调用一个检查是否`Pointer(S)`为 nil 的函数，如果`Pointer(S) = nil`返回一个指向虚拟空字符串`nil`的指针而不是（即指向虚拟空字符串的空终止符的指针）。

# jquery - 创建/销毁 HTML 元素与在需要时隐藏它们，哪个更好？

> ID：14980881
> 
> 赞同：10
> 
> 时间：2013-02-20T13:20:42.353
> 
> 标签：jquery, css, html

有两种方法可以用来显示/隐藏内容：

1.  使用 jQuery.append() 和 jQuery.remove() 在需要/不需要时创建/销毁元素。
2.  将所有内容都包含在 html 中，但在适当的时候隐藏/禁用这些元素。

那么什么是最佳实践呢？我可以看到这两种方法的优点/缺点。

例如，我有一个网站，人们可以用他们的网络摄像头拍摄照片。网络摄像头所在的窗口显示在一个单独的窗口中，与站点的所有其他内容重叠。拍摄照片时，网络摄像头重叠再次被移除。所以我可以隐藏它或插入/删除它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T13:40:24.537

有一种介于两者之间的方法可以充分利用您提到的每种方法。您提到使用附加和删除创建和销毁元素。必须明确的是，创建元素与将元素附加到 DOM 是不同的任务。IE

**创建一个 div**

```
var node = $('<div>node content</div>); 
```

与**附加 div 不同：**

```
parent.append(node); 
```

因此，您可以做的只是将元素分配给变量（即将它们**缓存**到变量中），然后根据需要附加和分离它们。这样，您不必在销毁它后每次想要使用它时都创建相同的元素（因此会产生多余的处理成本）。

同时，您不必将它不必要地附加到 DOM 树然后隐藏它（即在不使用它时，从而通过使整体体验变慢而产生 UI/UX 成本 b/c 页面加载节点，其中一些根本不被用户使用）。

我认为这是最好的方法。

# android - 从特定浏览器启动 android 应用程序

> ID：14980882
> 
> 赞同：2
> 
> 时间：2013-02-20T13:20:42.727
> 
> 标签：android, android-intent

我从浏览器启动我的 android 应用程序时遇到问题。我在清单文件中指定了以下代码。

```
<intent-filter>
    <data android:scheme="https" android:path="/store" android:host="play.google.com"/>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <category android:name="android.intent.category.LAUNCHER" />
 </intent-filter> 
```

当我尝试从 Android 2.2 上的默认浏览器启动应用程序时，一切正常：出现一个对话框，询问我们要使用什么来处理意图（浏览器或我的自定义应用程序）。但是当我在 Android 4.0.1 上从 firefox 或 chrome 尝试它时，浏览器会处理 url 并打开网页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:09:48.130

chrome 现在似乎不允许其他应用程序捕获自定义模式，而是自己处理它们。我相信这是最近的 chrome 更新。我知道我现在正在调查这个问题，因为它破坏了我的一个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:33:42.390

您在 上注册您的意图过滤器`android.intent.action.VIEW`。您应该查看您的 logcat，它`ACTION`会在您使用 firefox 或 chrome 时发送。

# c# - 编写单元测试用例

> ID：14980885
> 
> 赞同：0
> 
> 时间：2013-02-20T13:20:54.017
> 
> 标签：c#, unit-testing, nunit, mstest

在我的项目中，我们正在处理数据库（SQL server 2008）。读取、插入、删除和更新数据。一些 SQL 脚本是由 xml 自动化工具创建的，一些是由开发人员手动编写的。大多数时候，我们通过手动丢失条目和自动生成的脚本来面临问题。我会撒谎为这些脚本编写单元测试用例，只是为了小心，这样我们在签入代码后就不会遇到问题。所以我的问题是这是为这些脚本编写单元测试用例的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:28:24.297

如果您想测试您的 sql，那么我建议您查看[SQL Server Data Tools](http://msdn.microsoft.com/en-us/data/tools.aspx)，其中包括可以通过 Visual Studio 2010 和 2012 运行的数据库 UT

# javascript - jQuery mobile：clientX 和 clientY 以及 taphold 事件

> ID：14980886
> 
> 赞同：6
> 
> 时间：2013-02-20T13:20:54.467
> 
> 标签：javascript, jquery, jquery-mobile

我在我的项目中使用了 taphold 事件，并且需要用户点击点的坐标。不幸的是， event.clientX 和 event.clientY 是未定义的（cp. my example [here](http://cip.uni-trier.de/~baltes/Client/)）。是否有可能获得类似于 onclick 事件的这些坐标？

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T13:46:43.643

您需要作弊，我为您做了一个工作示例：http: [//jsfiddle.net/Gajotres/STLWn/](http://jsfiddle.net/Gajotres/STLWn/)

```
$(document).on('vmousedown', function(event){
    holdCords.holdX = event.pageX;
    holdCords.holdY = event.pageY;
});

$(document).on('taphold', function(e){
    alert('X: ' + holdCords.holdX + ' Y: ' + holdCords.holdY ); 
});

var holdCords = {
    holdX : 0,
    holdY : 0
} 
```

在桌面 Firefox、Android 4.1.1 Chrome 和 iPad 6.0 上测试

# python - colorbar matplotlib 颜色从红色到蓝色

> ID：14980891
> 
> 赞同：0
> 
> 时间：2013-02-20T13:21:14.003
> 
> 标签：python, colors, matplotlib, wxpython, colorbar

继我所有其他令人讨厌的难以理解的帖子之后，我有一个列表：

```
[0,1,4,3,2,4,2,1,0] 
```

我希望他们每个人都有一个颜色使用

```
cmap = mpl.colors.ListedColormap([[1,0,0],[0,0,1],[0,1,0],[1,1,0],[0,1,1]]) 
```

会给我颜色红色，蓝色绿色黄色和浅蓝色。

我想要的是从红色开始并以蓝色结束的颜色，而其他颜色则介于这些颜色之间。

我可能能够以同样的方式做到这一点，但我猜会有更好的方法，然后使用某种方程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:12:42.383

你可以伪造它。假设您想要行的前三分之一为红色，下一个为蓝色，下一个为绿色。

您需要在数据中创建 3 个单独的行。您需要三行如下所示：

```
[0,1,4,None,None,None,None,None,None]
[None,None,None,3,2,4,None,None,None]
[None,None,None,None,None,None,2,1,0] 
```

这些线用 Nones 填充，使它看起来像 matplotlib 正在绘制一条连续的线。然后你绘制每条线并告诉 matplotlib 你想要什么颜色

# xml - 将相似的 XML 记录/字段与 XSL 结合

> ID：14980892
> 
> 赞同：0
> 
> 时间：2013-02-20T13:21:13.793
> 
> 标签：xml, xslt, merge, transform

我正在尝试将类似的记录（相同的 UniqueID）与 XSL 结合起来。

这是我的 XML：

```
<ExportXML xmlns="http://www.taleo.com/ws/integration/toolkit/2005/07">
  <record>
    <field name="UniqueID">1234</field>
    <field name="Location">Michigan</field>
    <field name="Category">Math</field>
  </record>
  <record>
    <field name="UniqueID">1234</field>
    <field name="Location">Texas</field>
    <field name="Category">Science</field>
  </record>
  <record>
    <field name="UniqueID">1234</field>
    <field name="Location"></field>
    <field name="Category">History</field>
  </record>
  <record>
    <field name="UniqueID">2345</field>
    <field name="Location">Ohio</field>
    <field name="Category"></field>
  </record>
</ExportXML> 
```

这是我希望输出的样子：

```
<ExportXML>
  <record>
    <field name="UniqueID">1234</field>
    <field name="Location">Michigan, Texas</field>
    <field name="Category">Math, Science, History</field>
  </record>
  <record>
    <field name="UniqueID">2345</field>
    <field name="Location">Ohio</field>
    <field name="Category"></field>
  </record>
</ExportXML> 
```

我尝试了很多不同的东西，我的头都在旋转。我还是新手，我发现很难学习。

我可能很遥远，但这就是我到目前为止所拥有的。一开始我只是试图合并其中一个字段（类别），但它只是重复所有记录而不尝试合并......

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:t="http://www.taleo.com/ws/integration/toolkit/2005/07"
exclude-result-prefixes="t">

<xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

<xsl:key name="distinctRecord" match="t:record" use="t:field[@name='UniqueID']" />

<xsl:template match="/">

  <xsl:for-each select="//t:record[generate-id(.) = generate-id(key('distinctRecord', t:field[@name='UniqueID'])[1])]">
    <xsl:variable name="UniqueID" select="t:field[@name='UniqueID']" />
    <record>
          <UniqueID><xsl:value-of select="$UniqueID" /></UniqueID>
          <Category>
            <xsl:for-each select="key('distinctRecord', $UniqueID)">
                  <xsl:if test="position() != 1">, </xsl:if>
                  <xsl:value-of select="t:field[@name='Category']"/>
            </xsl:for-each>
          </Category>
    </record>
  </xsl:for-each>

</xsl:template>
</xsl:stylesheet> 
```

任何帮助将不胜感激！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:50:05.103

好吧，您发布的输入样本格式不正确，在更正时我得到了

```
<ExportXML>
  <record>
    <field name="UniqueID">1234</field>
    <field name="Location">Michigan</field>
    <field name="Category">Math</field>
  </record>
  <record>
    <field name="UniqueID">1234</field>
    <field name="Location">Texas</field>
    <field name="Category">Science</field>
  </record>
  <record>
    <field name="UniqueID">1234</field>
    <field name="Location"></field>
    <field name="Category">History</field>
  </record>
  <record>
    <field name="UniqueID">2345</field>
    <field name="Location">Ohio</field>
    <field name="Category"></field>
  </record>
</ExportXML> 
```

那么您发布的 XSLT 确实使用了名称空间，尽管输入没有任何名称，更正我得到的 XSLT

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

<xsl:key name="distinctRecord" match="record" use="field[@name='UniqueID']" />

<xsl:template match="/">

  <xsl:for-each select="//record[generate-id(.) = generate-id(key('distinctRecord', field[@name='UniqueID'])[1])]">
    <xsl:variable name="UniqueID" select="field[@name='UniqueID']" />
    <record>
          <UniqueID><xsl:value-of select="$UniqueID" /></UniqueID>
          <Category>
            <xsl:for-each select="key('distinctRecord', $UniqueID)">
                  <xsl:if test="position() != 1">, </xsl:if>
                  <xsl:value-of select="field[@name='Category']"/>
            </xsl:for-each>
          </Category>
    </record>
  </xsl:for-each>

</xsl:template>
</xsl:stylesheet> 
```

那么我认为你得到了你想要的分组：

```
<record>
   <UniqueID>1234</UniqueID>
   <Category>Math, Science, History</Category>
</record>
<record>
   <UniqueID>2345</UniqueID>
   <Category/>
</record> 
```

然后，您可以进一步编辑 XSLT 以创建根元素并添加位置，例如

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

<xsl:key name="distinctRecord" match="record" use="field[@name='UniqueID']" />

<xsl:template match="/">
 <ExportXML>
  <xsl:for-each select="//record[generate-id(.) = generate-id(key('distinctRecord', field[@name='UniqueID'])[1])]">
    <xsl:variable name="UniqueID" select="field[@name='UniqueID']" />
    <record>
          <UniqueID><xsl:value-of select="$UniqueID" /></UniqueID>
          <Location><xsl:value-of select="field[@name='Location']"/></Location>
          <Category>
            <xsl:for-each select="key('distinctRecord', $UniqueID)">
                  <xsl:if test="position() != 1">, </xsl:if>
                  <xsl:value-of select="field[@name='Category']"/>
            </xsl:for-each>
          </Category>
    </record>
  </xsl:for-each>
 </ExportXML>
</xsl:template>
</xsl:stylesheet> 
```

因此，您的 XSLT 中的主要分组已正确编码，您只需确保将其应用于格式良好的 XML 输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:15:08.000

这个答案取决于您是否可以访问 XSLT 2.0（Saxon 9.0 或更高版本）我使用的是 Saxon 9.4.0.4。这允许使用“for each group”。

* * *

```
<xsl:stylesheet version="2.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:t="http://www.taleo.com/ws/integration/toolkit/2005/07"
exclude-result-prefixes="t">

<xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

<xsl:template match="t:ExportXML">
    <ExportXML>
        <xsl:for-each-group select="t:record" group-by="t:field[@name='UniqueID']">
            <record>
                <field name="UniqueID">
                    <xsl:value-of select="t:field[@name='UniqueID']"></xsl:value-of>
                </field>
                <field name="Location">
                    <xsl:for-each select="current-group()">
                        <xsl:if test="position() != 1  and  t:field[@name='Location'] &gt; ' '">,</xsl:if>
                        <xsl:value-of select="t:field[@name='Location']"/>
                    </xsl:for-each>
                </field>
                <field name="Category">
                    <xsl:for-each select="current-group()">
                        <xsl:if test="position() != 1  and  t:field[@name='Category'] &gt; ' '">,</xsl:if>
                        <xsl:value-of select="t:field[@name='Category']"/>
                    </xsl:for-each>
                </field>
            </record>
        </xsl:for-each-group>
    </ExportXML>
</xsl:template> 
```

# ember.js - 如何在不预加载模型的情况下建立链接？

> ID：14980895
> 
> 赞同：6
> 
> 时间：2013-02-20T13:21:27.183
> 
> 标签：ember.js

现在，我们正在建立这样的链接：

```
<a {{action showComment comment href=true}}>Show</a> 
```

这会生成一个看起来像`/comments/45`.

不幸的是，这只有在我们预加载评论时才有效——即使我们已经有了评论的 ID。是否可以不预加载评论？

可能看起来像这样的东西：

```
<a {{action showComment comment_id href=true}}>Show</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T16:59:17.490

这里的实际问题是什么？这对我来说不是很清楚。

因此，您当前的操作处理程序如下所示：

```
showComment : function(comment){
  //do your stuff with the model
} 
```

现在您想要的解决方案可能如下所示：

```
<a {{action showCommentById comment_id href=true}}>Show</a> 
```

以及相应的处理程序：

```
showCommentById : function(commentId){
  var comment = App.Comment.findById(commentId); // i assume you have this retrieval method or something like it
  this.showComment(comment);
},
showComment : function(comment){
  //do your stuff with the model
} 
```

**这对你有用吗？**还是你有别的打算？

* * *

**更新：OP希望在您的路线中处理所有数据处理** 您的路线应该处理我之前提出的操作“showCommentById”：

```
App.ArticlesRoute = Ember.Route.extend({
    events : {
        showCommentById : function(commentId){
            var comment = App.Comment.findByIds(commentId); // i assume you have this retrieval 
            this.transitionTo("root.articles.comment", comment);
        }
    }
}); 
```

所以实际上**你可以自由决定**在你的应用程序中处理动作的位置。

# c# - 使用瞬态故障处理应用程序块避免调试器停止

> ID：14980896
> 
> 赞同：1
> 
> 时间：2013-02-20T13:21:29.213
> 
> 标签：c#, azure, visual-studio-debugging, transient

我开始将瞬态故障处理应用程序块 (TFHAB) 与 Azure 缓存一起使用。它很容易使用，但是在调试器中时，缓存提供程序中抛出的错误并从 TFHAB 传递出来的错误不是瞬态停止调试器声称“MyLib.dll 中发生'Microsoft.ApplicationServer.Caching.DataCacheException'类型的异常但未处理”在用户代码中'尽管调用被包装在 try/catch 块中。代码是这样的：

```
UserData cacheItem;
try
{
    cacheItem = RetryPolicyFix.ExecuteAction(() => dataCache.GetAndLock(...) as UserData;
}
catch (DataCacheException e)
{
    if (e.ErrorCode == DataCacheErrorCode.ObjectLocked)
        ...
} 
```

在调试代码的其他部分以被这些错误的暂停中断时，这真的很烦人。

我经历了很多讨论，最终得到了下面的解决方法。

```
UserData cacheItem;
try
{
    var res = RetryPolicyFix.ExecuteAction(
        () =>
            {
                try
                {
                    var data = dataCache.GetAndLock(...) as UserData;
                    return new TFHResult(data);
                }
                catch (DataCacheException ex)
                {
                    // transient error should pass through as the TFHAB is responsible for its handling
                    if (RetryPolicyFix.ErrorDetectionStrategy.IsTransient(ex))
                        throw;
                    return new TFHResult(ex);
                }
            });

    if (res.Error != null)
        throw res.Error;

    cacheItem = res.Data;
}
catch (DataCacheException e)
{
    if (e.ErrorCode == DataCacheErrorCode.ObjectLocked)
        ...
} 
```

该代码使用辅助结构：

```
private struct TFHResult
{
    public TFHResult(DataCacheException error)
    {
        Error = error;
        Data = null;
    }

    public TFHResult(UserDirectoryMappingData data)
    {
        Error = null;
        Data = data;
    }

    public DataCacheException Error;
    public UserDirectoryMappingData Data;
} 
```

这个解决方案很丑陋，并且会稍微降低运行时的性能（没有附加调试器），并且需要更多不必要的编码来解决调试器中的问题。我很乐意听取社区的意见。有更好的方法吗？

# linux - Qt中的linux系统守护进程

> ID：14980898
> 
> 赞同：5
> 
> 时间：2013-02-20T13:21:34.417
> 
> 标签：linux, qt, daemon

我需要编写一些特定于 linux 的系统守护进程（它将以 root 权限运行）。

我有一种刻板印象，认为 Qt 是关于 GUI 应用程序的，所以依赖于 Qt 的守护进程对我来说看起来很奇怪。

另一方面，Qt 为 DBUS/threads/settings/... 提供了不错的 C++ 绑定——我的守护进程所需的一切。

现在我很感兴趣，用Qt写非GUI系统工具/守护进程可以吗？是否有此类工具的示例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T13:22:23.850

> 可以用 Qt 编写非 GUI 系统工具/守护进程吗？

是的，这很好。

非 UI 应用程序有[QCoreApplication](http://qt-project.org/doc/qt-4.8/qcoreapplication.html)类。

具体到守护进程，您可能需要查看[Daemonizing a Qt-application](http://www.qtcentre.org/threads/26923-Daemonizing-a-Qt-application)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:25:32.630

自 Qt4 以来，Qt 库已拆分为多个模块。

你甚至可以在没有安装 Qt Gui 或任何其他图形的东西的情况下使用 Qt Core。

我可以想到一个仅使用 Qt 的命令行示例（例如`qdbus`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T13:28:29.617

首先，QT 不仅仅与 GUI 有关。它是一个完整的跨平台开发框架。

您可以确保使用 QT 制作守护程序。但是，您想用它解决什么目的？您是否也想为 windows 平台提供类似的 windows 服务？

如果你真的不希望你的代码是跨平台的，你可以简单地使用 C++。如果您正在寻找易于编码的问题，那么 qt 也是一个不错的选择。

# java - 如何在日历中将时间设置为 24 小时格式

> ID：14980899
> 
> 赞同：36
> 
> 时间：2013-02-20T13:21:38.400
> 
> 标签：java, calendar

我需要在当前日期设置时间。时间字符串始终采用 24 小时格式，但我得到的结果是错误的：

```
 SimpleDateFormat df = new SimpleDateFormat("kk:mm");
  Date d1 = df.parse("10:30");
  Calendar c1 = Calendar.getInstance();
  c1.set(Calendar.HOUR, d1.getHours());
  c1.set(Calendar.MINUTE, d1.getMinutes()); 
```

日期应为今天的日期，时间设置为 10:30。相反，c1 中的时间最终是 22:30。如何强制日历控件识别我的时间是 24 小时格式？

**编辑：** 如果我这样做：

```
Calendar c1 = Calendar.getInstance();
c1.set(Calendar.HOUR, 10);
c1.set(Calendar.MINUTE, 30); 
```

这给了我同样的结果。为什么？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2013-02-20T14:18:35.370

替换这个：

```
c1.set(Calendar.HOUR, d1.getHours()); 
```

有了这个：

```
c1.set(Calendar.HOUR_OF_DAY, d1.getHours()); 
```

Calendar.HOUR 严格为 12 小时。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-20T13:23:44.317

`SimpleDateFormat df = new SimpleDateFormat("HH:mm");`改为使用

**更新**

@Ingo 是对的。更好用`setTime(d1);`

第一种方法`getHours()`，`getMinutes()`现已弃用

我测试这段代码

```
SimpleDateFormat df = new SimpleDateFormat("hh:mm");
  Date d1 = df.parse("23:30");
  Calendar c1 = GregorianCalendar.getInstance();
  c1.setTime(d1);
  System.out.println(c1.getTime()); 
```

并且输出没问题`Thu Jan 01 23:30:00 FET 1970`

尝试这个

```
SimpleDateFormat df = new SimpleDateFormat("KK:mm aa");
  Date d1 = df.parse("10:30 PM");
  Calendar c1 = GregorianCalendar.getInstance(Locale.US);
  SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");  
  c1.setTime(d1);
  String str = sdf.format(c1.getTime());
  System.out.println(str); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-11T10:09:16.900

您可以将日历设置为仅使用 AM 或 PM 使用

> calendar.set(Calendar.AM_PM, int);

0 = 上午

1 = 下午

希望这可以帮助

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-03-05T11:21:26.793

如果您将函数 SimpleDateFormat("hh") 替换为 ("HH") 将格式化 24 小时而不是 12 小时。

```
SimpleDateFormat df = new SimpleDateFormat("HH:mm"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-22T02:42:07.787

我最近在我的项目中使用fullcalendar，我不知道你想要达到什么确切的视图效果，在我的项目中我想将事件时间视图从12h格式更改为

[![在此处输入图像描述](../Images/db3eb723be5a157f64941ccf1d3d267d.png)](https://i.stack.imgur.com/lmRLg.png)

为 24 小时制。

[![在此处输入图像描述](../Images/662d04ce3c92f6a3bfee2453008658db.png)](https://i.stack.imgur.com/LS3cy.png)

如果这是您想要达到的效果，下面的解决方案可能会有所帮助：

放 `timeFormat: 'H:mm'`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-29T11:44:31.700

私人无效 setClock() {

```
 Timeline clock = new Timeline(new KeyFrame(Duration.ZERO, e -> {
        Calendar cal = Calendar.getInstance();
        int second = cal.get(Calendar.SECOND);
        int minute = cal.get(Calendar.MINUTE);
        int  hour = cal.get(Calendar.HOUR_OF_DAY);
        eski_minut = minute;
        if(second < 10){

            time_label.setText(hour + ":" + (minute) + ":0" + second);

        }else if (minute < 10){
            time_label.setText(hour + ":0" + (minute) + ":0" + second);

        }
        else {
        time_label.setText(hour + ":" + (minute) + ":" + second);}
    }),
            new KeyFrame(Duration.seconds(1))
    );
    clock.setCycleCount(Animation.INDEFINITE);
    clock.play();
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-31T07:49:09.980

在这里你会遇到各种时间相关的问题。我希望这能解决你的问题。

```
public class MyClass {

    public static void main(String[] args) {

        Calendar cal = Calendar.getInstance();

        // To get the current hour
        int hour = cal.get(Calendar.HOUR_OF_DAY);
        System.out.println("hour: " + hour);

        // To get the current time in 12 hours format
        SimpleDateFormat sdf = new SimpleDateFormat("hh:mm a",Locale.US);
        String a = sdf.format(cal.getTime());
        System.out.println("Time: " + a);

        // To get the desired time in 12 hours format from 23 hours format
        cal.set(Calendar.HOUR_OF_DAY, 24);
        SimpleDateFormat sdf1 = new SimpleDateFormat("hh:mm a",Locale.ENGLISH);
        String a1 = sdf1.format(cal.getTime());
        System.out.println("Time: " + a1);

        /*  H Hour in day (0-23) 
            k Hour in day (1-24) 
        */

        //To get the desired time in 24 hours format as 0-23 or 1-24
        cal.set(Calendar.HOUR_OF_DAY, 24);
        SimpleDateFormat sdf2 = new SimpleDateFormat("HH:mm",Locale.ENGLISH);
        SimpleDateFormat sdf3 = new SimpleDateFormat("kk:mm",Locale.ENGLISH);
        String a2 = sdf2.format(cal.getTime());
        String a3 = sdf3.format(cal.getTime());
        System.out.println("Time: " + a2);
        System.out.println("Time: " + a3);

        //For example, time like 12:30 PM. How can i convert to 24 hours time in java?

        SimpleDateFormat bigFormat = new SimpleDateFormat("kk:mm");
        SimpleDateFormat smallFormat = new SimpleDateFormat("hh:mm a");

        Date date = null;
        try {
            date = smallFormat.parse("12:30 AM");
        } catch (ParseException e) {
            e.printStackTrace();
        }        
        System.out.println(smallFormat.format(date) + " = " + bigFormat.format(date));

    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-20T13:25:39.847

尝试这个 ：

```
SimpleDateFormat df = new SimpleDateFormat("hh:mm"); 
```

或者

```
SimpleDateFormat df = new SimpleDateFormat("KK:mm"); 
```

参考：[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-31T18:46:48.553

# tl;博士

```
LocalTime.parse( "10:30" )  // Parsed as 24-hour time. 
```

# java.time

避免麻烦的旧日期时间类，例如现在被 java.time 类取代的 和`Date`。`Calendar`

## `LocalTime`

java.time 类提供了一种表示没有日期和时区的时间的方法：`LocalTime`

```
LocalTime lt = LocalTime.of( 10 , 30 );  // 10:30 AM.
LocalTime lt = LocalTime.of( 22 , 30 );  // 22:30 is 10:30 PM. 
```

## ISO 8601

java.time 类在生成和解析字符串时默认使用标准 ISO 8601 格式。这些格式使用 24 小时制。

```
String output = lt.toString(); 
```

> LocalTime.of(10, 30).toString(): 10:30
> 
> LocalTime.of(22, 30).toString(): 22:30

因此解析`10:30`将被解释为上午 10:30。

```
LocalTime lt = LocalTime.parse( "10:30" );  // 10:30 AM. 
```

## `DateTimeFormatter`

如果您需要使用 AM/PM 生成或解析 12 小时点击格式的字符串，请使用`DateTimeFormatter`该类。提示：养成指定`Locale`.

# c - 如何使用外部文件成为主程序的一部分？

> ID：14980902
> 
> 赞同：-1
> 
> 时间：2013-02-20T13:21:48.653
> 
> 标签：c

我正在编写一个很长的程序，所有这些都是必要的，这意味着我不能只删除一些部分或缩小一些代码。你猜怎么着，我正在通过一个名为 C4Droid 的应用程序使用 Android 进行编程。

因此，我想到程序的每个“部分”都将编写在单独的文本（或任何）文件中。

我是初学者，所以请给我这个问题的最简单的解决方案。

希望你们都明白我想说的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:32:47.367

我不会花 2.99 美元买它，但[C4Droid 的市场页面](https://play.google.com/store/apps/details?id=com.n0n3m4.droidc&hl=en)说：

> C4droid 是一个简单的 C/C++ IDE + C/C++ 编译器，适用于 Android，支持 GNU Makefile、SDL 和 Qt... 安装 GCC 插件

因此，由于它支持 GNU Makefiles 和完整的 gcc，您应该能够创建单独的文件并将它们一起编译：

第一个.c

```
int main(){
   a();
   b();
   return 0;
} 
```

第二个.c

```
#include <stdio.h>
void a(void) {
    printf("Hello ");
} 
```

第三个.c

```
#include <stdio.h>
void b(void) {
    printf("World!");
} 
```

然后编译它们：

```
gcc first.c second.c third.c 
```

当然最好把它分解成一个头文件，在那里有原型和通用定义。但我不知道你真的想在你的手机上打字多少；如果 C4Droid 真的有完整的 gcc 支持，那应该可以。

# c# - 您可以在事务回滚c#中调用多个存储过程吗

> ID：14980908
> 
> 赞同：1
> 
> 时间：2013-02-20T13:22:05.030
> 
> 标签：c#, sql, sql-server-2008

我有一个创建记录的存储过程。

我可以使用 SqlTransaction 对象多次调用 create 并在任何失败时回滚所有插入吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:24:08.293

只要存储过程不提交自己：是的，您可以这样做。

这是首先进行交易的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:24:13.147

是的，只需在事务中多次执行命令并`try/catch`为提交/回滚添加一个块：

```
transaction = connection.BeginTransaction("SampleTransaction");

try {
      // Execute Stored Procedure n times here.
      transaction.Commit();
} catch(SQLException e) {
     transaction.Rollback();
} 
```

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.aspx)

为了获得最佳实践，您可能希望将其包装`.Rollback`在 try/catch 中，以防回滚失败。

# java - 如何配置 slf4j 以便能够同时写入控制台和文件？

> ID：14980912
> 
> 赞同：0
> 
> 时间：2013-02-20T13:22:15.580
> 
> 标签：java, logging, slf4j

目前我正在使用 log4j，但许多 Java 技术使用 slf4j（例如休眠）。我想配置 log4j 而不是 slf4j。这是我的 log4j 文件：

```
log4j.rootLogger=trace, stdout, file

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.encoding=UTF-8
log4j.appender.stdout.target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.conversionPattern=%d{ABSOLUTE} %5p %t %c{1}:%M:%L - %m%n

log4j.appender.file=org.apache.log4j.FileAppender
log4j.appender.encoding=UTF-8
log4j.appender.file.append=false
log4j.appender.file.file=myproject.log
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.conversionPattern=%d{ABSOLUTE} %5p %t %c{1}:%M:%L - %m%n 
```

谁能给我看一个适合它的配置文件？PS 如何从 Servlet 登录？因为它们基于tomcat webapps中的战争。在这种情况下，他们在哪里写日志？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T03:15:42.180

slf4j 是 java 的日志外观，可以与不同的日志框架一起使用，例如 log4j、logback 等。它提供的优点是您可以更改底层框架（仅 jar 和配置文件），而无需触摸代码，以防您想要切换到未来的另一种。

要在 log4j 上使用 slf4j，您仍然需要 log4j 属性和一些 jar，例如 slf4j-api-1.6.1.jar、slf4j-log4j12-1.6.1.jar 和 log4j-1.2.16.jar（假设您已经拥有这个）

参考本[教程](http://rusya7.blogspot.com/2011/10/how-to-use-slf4j-with-log4j.html)。希望能帮助到你。

# wordpress - Wordpress 二十一主题页脚小部件

> ID：14980915
> 
> 赞同：0
> 
> 时间：2013-02-20T13:22:22.617
> 
> 标签：wordpress, widget, footer

我目前正在使用 21 个主题，并且我已经成功地使用在线教程添加了第四个页脚小部件，并且一切正常。

现在我正在寻找单独减小每个小部件的大小和间距。我已经进行了一些广泛的搜索，并尝试了几乎所有我能想到的使用 css 来实现这一目标的方法，但都无济于事。

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:08:57.897

你有一个示例网站吗？每个小部件都应该有自己的 ID。使用那些使用 css [http://twentyelevendemo.wordpress.com/](http://twentyelevendemo.wordpress.com/)来设置它们的样式- 这是一个 21 的演示。在你的页脚

# java - 从 Google App Engine 应用程序内部读取目录中的所有文件

> ID：14980918
> 
> 赞同：2
> 
> 时间：2013-02-20T13:22:26.970
> 
> 标签：java, google-app-engine, file-io

我了解 Google App Engine (GAE) 允许您使用以下几种方法读取爆炸 WAR 中的任何文件：

```
String file = "/WEB-INF/name-of-my-filexml";
InputStream in = getClass().getResourceAsStream(file); 
```

问题是，我需要使用如下目录结构部署我的 Web 应用程序：

```
MyApp/
    WEB-INF/
        lib/
        classes/
        web.xml
        appengine-web.xml
        ...

        profiles/
            fizz.txt
            buzz.txt
            foo.txt
            ... dozens of other text files 
```

我需要一种将每个`profiles/*.txt`文件读入 Java 字符串的方法。在任何人评论**好之前，为什么不直接对字符串进行硬编码，伙计......**，让我们说我在这里删减了很多背景故事，以便发布一个简单的问题。幽默我，让我们假装我不能硬编码字符串。通常，如果我可以完全访问`java.io.*`，我会执行以下操作：

```
File profilesHome = new File("path/to/profiles");
File[] profiles = profilesHome.listFiles();
List<String> profileList = new ArrayList<String>();
for(File profile : profiles)
    profileList.add(readFileIntoString(profile)); 
```

但是在这里，我认为我不能调用`File#listFiles()`，如果我所拥有的`InputStream`只是我从中得到的`getClass().getResourceAsStream(file)`，我不确定如何将其转换为`File`句柄或字符串对象。有任何想法吗？提前致谢。

**更新：**使用`ZipInputStream`建议：

```
InputStream inputStream = event.getServletContext()
        .getResourceAsStream("/WEB-INF/profiles.zip");
ZipInputStream zipInputStream = new ZipInputStream(inputStream);
List<String> list = new ArrayList<String>();
ZipEntry currEntry;
try {
    while((currEntry = zipInputStream.getNextEntry()) != null)
        // TODO: How to convert the contents of currEntry to a string
        // in a manner that is GAE-friendly?
        list.add(convertEntryContentsToString(currEntry));
} catch (IOException e) {
    e.printStackTrace();
} 
```

现在，**我该如何实施`convertEntryContentsToString(ZipEntry)`？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:13:49.400

看看以下选项是否适合您：

1.  创建一个名为 的文件`filelist.txt`，该文件也存在于`WEB-INF/profiles`文件夹或以 . 开头的任何其他文件夹中`wEB-INF`。此文件可以包含文件`/profiles`夹中存在的文件名列表。每行一个文件名。这样您就可以将名称一一解析出来，然后读取文件。
2.  创建一个包含您期望的文件名列表的数据存储实体，并按照与 1 相同的步骤操作，但文件名列表是从数据存储实体获取的。
3.  Google Drive（请参阅此[App Engine 和 Google Drive API](https://stackoverflow.com/questions/12185504/app-engine-and-google-drive-api)）是否适合您？另一种选择是谷歌云存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:00:50.687

如果您可以将每个 .txt 放入单个 Zip-File 中，则可以使用 ZipInputStream 和 ZipEntry 列出 Zip-File 中的所有文件（或如果需要直接访问它们）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T15:53:15.990

也许这个代码片段可以帮助你（也许你必须添加一些异常处理，关闭代码，一些其他的东西，......）：

```
while ((zipEntry = zipStream.getNextEntry()) != null) {
    String name = zipEntry.getName();
    if (!zipEntry.isDirectory()) {
        Scanner scanner = new Scanner(zipStream);
        StringBuilder builder = new StringBuilder();
        while (scanner.hasNextLine()) {
            builder.append(scanner.nextLine());
        }
        String YOURSTRING = builder.toString();
    }
} 
```

# php - 使用soap api列出特定类别并具有相似名称的产品

> ID：14980919
> 
> 赞同：0
> 
> 时间：2013-02-20T13:22:26.233
> 
> 标签：php, magento, soap

我有类似名称的产品清单，比如耐克的 10 款鞋，锐步的 10 款等等。所以所有的产品都会以 nike、reebok 等名字开头（它们都在一个叫做鞋子的类别中）。我需要从使用肥皂 api 的类别鞋中单独列出耐克鞋。

```
<?php
$path="http://localhost/magento/";
try{
$proxy=new SoapClient($path.'index.php/api/soap/?wsdl=1');
$sessionId=$proxy->login('apiuser','apikey');
echo $sessionId;
$result=$proxy->call($sessionId,'catalog_category.assignedProducts','4');
print_r($result);
}
catch (SoapFault $e)
{
    $msg = "Could not connect to the site".$e->getMessage();
    echo $msg."<br/>";   
}
?> 
```

我尝试了上述方法，但它列出了该类别的所有产品，是否可以发送（或添加）另一个参数以便它单独获取耐克鞋？帮我解决这个问题，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:22:26.347

你的问题的答案是不要依赖肥皂来提供你想要的对象，而是用它来提供获得你想要的对象的*方法。*这是如何思考的：

1.  让soap给你一个类别中的产品ID列表
2.  使用该列表加载产品集合
3.  根据您的需求过滤产品集合

如果您正在编写将在与 magento 相同的服务器上执行的代码，只需执行以下操作：

1.  创建一个名为“Shoes”的属性集
2.  创建一个名为 shoe_type 的下拉属性，并为您要过滤的每种鞋子类型（耐克、锐步等）添加选项。请注意下拉属性 ID。
3.  在您的 magento 根目录中的 test.php 文件中使用以下代码。我已经对其进行了测试，并且可以正常工作。

这个想法是，您将根据“IN”类别创建一个集合，并根据某些属性过滤它们。

```
 echo "<PRE>";
    umask(0);

    // MAKE SURE TO PUT THIS FILE IN THE RIGHT PLACE (MAGENTO ROOT)
    require_once 'app/Mage.php';

    Mage::app('admin');

    $attributeSetId = '26'; // Your attribute set id (shoes)
    $shoeTypeId = '1'; // The ID of the dropdown item to filter on (taken from the ids of the items you added to the shoe_type attribute

    // Create a collection based on a catalog category. Load category ID 196
    $products = Mage::getModel('catalog/category')->load(196)
        ->getProductCollection()
        ->addAttributeToSelect('*')
        ->addAttributeToFilter('status', 1)
        ->addAttributeToFilter('visibility', 4)
        ->addAttributeToFilter('attribute_set_id', $attributeSetId)
        ->addAttributeToFilter('type_id', 'simple')
        ->addAttributeToFilter('shoe_type', $shoeTypeId);

    foreach ($products as $product)
    {
        // Write out the useful info!
        var_dump($product->debug());
    } 
```

使用这种方法不仅快了近 100 倍，而且您可以更清楚地使用 magento 的对象模型。Soap 对于从服务器到服务器的通信更有用，或者如果您需要一台 Windows 机器与您的 magento linux 机器通信（就像我使用同步服务一样）。

# r - R中的幽默无

> ID：14980922
> 
> 赞同：2
> 
> 时间：2013-02-20T13:22:32.323
> 
> 标签：r, fonts

尝试[按照此线程](https://stackoverflow.com/a/12680311)安装 Humor Sans 时，我运行

```
font_import(".") 
```

并收到以下警告：

```
Found FontName for 1 fonts.
Scanning afm files in C:/Program Files/R/R-2.15.2/library/extrafontdb/metrics
Writing font table in C:/Program Files/R/R-2.15.2/library/extrafontdb/fontmap/fonttable.csv
Writing Fontmap to C:/Program Files/R/R-2.15.2/library/extrafontdb/fontmap/Fontmap...
Warning message:
In readLines(fd, 30) :
  seek on a gzfile connection returned an internal error 
```

我已经尝试了几种不同的方法来让字体工作，但我认为这一定是错误。有人对如何解决这个问题有任何建议吗？

我正在运行 Windows XP。

# c++ - 我将如何为 C++ 项目使用 Python 类定义

> ID：14980928
> 
> 赞同：0
> 
> 时间：2013-02-20T13:23:04.223
> 
> 标签：c++, python

我有很长的 Python 中 C 结构的网络类定义列表。在 C++ 中使用它们的最佳方式是什么？

有没有我可以使用的解析器来导出 C++ 类？像 Boost 这样的框架包装器是否足够快以将其用于 tcp 连接处理？其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:22:35.000

您可以将 Python 解析器嵌入到 C++ 程序中，以便直接加载 Python 类，或者编写 Python 程序来生成这些 Python 类的 C++ 等效项。[在此处](http://docs.python.org/3/c-api/intro.html#embedding-python)阅读有关嵌入 Python 3.x或 2.x[的信息](http://docs.python.org/2.7/c-api/intro.html#embedding-python)。

# php - PHP文件上传权限

> ID：14980929
> 
> 赞同：4
> 
> 时间：2013-02-20T13:23:05.053
> 
> 标签：php, wordpress, permissions, chmod

我正在设置共享主机。我的用户可以通过 SFTP 访问服务器来上传他们的内容。我正在使用单独的 PHP 进程作为各自的用户（每个站点一个）运行。我希望用户默认看不到其他用户的内容（除了通过网络服务器作为任何其他非特权客户端），但网络服务器（作为 www-data 用户/组运行）应该能够读取所有内容。现在，我将 www 中的文件的所有权授予特定用户，并将组所有权授予 www-data，并使用 set GID 位将组所有权传播到新文件/目录（用户不在 www-data 组中）。

它工作得很好，但现在我面临一个问题。一些网站正在使用 wordpress，当他们上传文件时，设置的 GID 位会丢失，这意味着 Web 服务器无法访问它。有没有办法将 PHP 或 wordpress（更有可能）配置为 chmod 文件和目录到正确的权限？

注意：我没有在 PHP 中使用安全模式，所以应该可以添加设置的 GID 位。

更新：我尝试在 wordpress 配置中调整**FS_CHMOD_DIR**和**FS_CHMOD_FILE值。**我认为这将允许我将上传的文件更改为我想要的任何内容。但是，它并不影响新上传文件的权限。[根据codex](http://codex.wordpress.org/Editing_wp-config.php)中的信息，我猜这些设置仅适用于核心更新功能。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:16:18.653

这不是确切问题的答案，而是一般问题的解决方案。将用户的 web 目录的所有权分配给 user/www-data 并将权限设置为 750，无 SGID 位。用户**不得**属于 www-data 组。但是，在该目录中，可以将组所有权设置为用户的主组（例如用户）。里面的权限可以分别是文件和子目录的644和755。其他用户将无法进入或遍历此 Web 目录，因此即使他们有足够的权限自行访问文件，也无法访问其中的任何文件，从而提供了安全性。这将限制通过 SFTP 连接和执行 PHP 命令的用户。

由于此解决方案不使用设置 GID 位，因此它解决了原始问题。上传的文件可以保留其默认所有权和权限。

一个小示范：

```
transistor# mkdir www
transistor# chown :www-data www
transistor# chmod 750 www
transistor# ls -l
total 4
drwxr-x--- 2 root www-data 4096 Feb 20 20:59 www
transistor# touch www/file1.txt
transistor# mkdir www/subdir
transistor# touch www/subdir/file2.txt
transistor# ls -l www
total 4
-rw-r--r-- 1 root root    0 Feb 20 21:00 file1.txt
drwxr-xr-x 2 root root 4096 Feb 20 21:00 subdir
transistor# ls -l www/subdir 
total 0
-rw-r--r-- 1 root root 0 Feb 20 21:00 file2.txt
transistor# exit
giedrius@transistor:/tmp/sandbox$ cd www
bash: cd: www: Permission denied
giedrius@transistor:/tmp/sandbox$ ls www/subdir
ls: cannot access www/subdir: Permission denied
giedrius@transistor:/tmp/sandbox$ cat www/file1.txt
cat: www/file1.txt: Permission denied
giedrius@transistor:/tmp/sandbox$ cat www/subdir/file2.txt
cat: www/subdir/file2.txt: Permission denied
giedrius@transistor:/tmp/sandbox$ sudo -su www-data
transistor% ls www 
file1.txt  subdir
transistor% cat www/file1.txt 
transistor% cat www/subdir/file2.txt 
transistor% 
```

# c++ - 在 boost::phoenix::lambda 中通过引用捕获

> ID：14980931
> 
> 赞同：2
> 
> 时间：2013-02-20T13:23:09.233
> 
> 标签：c++, boost, c++11, boost-phoenix

我可以创建一个`boost::phoenix::lambda`按价值捕获的产品。但是，尝试修改由 value 捕获的变量会产生以下错误

```
error: read-only variable is not assignable
    BOOST_PROTO_BINARY_DEFAULT_EVAL(=, assign, make_mutable, make) 
```

有道理，然后通过引用捕获。通过引用捕获会在 clang 3.2 中产生以下错误：

```
error: call to 'ref' is ambiguous
    auto a = lambda(_a = ref(dv), _b = ref(i))[ _a[arg1] = _b, _a[arg1] ];
                         ^~~

/usr/include/c++/v1/__functional_base:388:1: note: candidate function [with _Tp =
      std::__1::vector<double, std::__1::allocator<double> >]
ref(_Tp& __t) _NOEXCEPT
^
/usr/local/include/boost/phoenix/core/reference.hpp:68:12: note: candidate function [with T
      = std::__1::vector<double, std::__1::allocator<double> >]
    inline ref(T & t)
           ^ 
```

在下面的示例中，我需要通过引用来捕获以获取与 C++11 lambda 等效的代码。通过引用捕获的正确方法是`boost::phoenix::lambda`什么？

**最小的例子：**

```
#include<iostream>
#include<vector>
#include<boost/phoenix/phoenix.hpp>
using namespace boost::phoenix;
using namespace boost::phoenix::placeholders;
using namespace boost::phoenix::local_names;

template<class D = void> struct A {
  A() : i(1), dv(2,2) {}
  int i; std::vector<int> dv;
  void fun() {
    //auto a = [&](int j){ dv[j] = i; return dv[j]; }; // C++11

    // boost::phoenix capture by value works, does not modify dv.
    //auto a = lambda(_a = val(dv), _b = val(i))[ _a[arg1] + _b];

    // boost::phoenix capture by value: modifying the vector does not work.
    auto a = lambda(_a = val(dv), _b = val(i))[ _a[arg1] = _b, _a[arg1] ];

    // boost::phoenix capture by reference: doesn't work.
    auto a = lambda(_a = ref(dv), _b = ref(i))[ _a[arg1] = _b, _a[arg1] ];
    for(size_t t = 0; t != dv.size(); ++t) {
      std::cout << "vt: " << a()(t) << std::endl;
    }   
  }
};

int main() {
  A<void> a;
  a.fun();
  return 0;
} 
```

**更新 1：**已删除`using namespace std;`（Xeo 在评论中建议）。

# python - 管理员活动时 Django 主页不活动

> ID：14980938
> 
> 赞同：0
> 
> 时间：2013-02-20T13:23:19.657
> 
> 标签：python, django, sqlite, django-admin

首先，我是新手。我在 Mac OSX Mountain Lion 上运行 Django 1.4.3。我正在浏览 Django 网站上的教程，我注意到当我的管理员处于活动状态时我的主页不起作用。

我已取消注释 urls.py 中的管理行，管理页面工作正常，但主页不会加载：

**使用 mysite.urls 中定义的 URLcong，Django 尝试了这些 URL 模式，按以下顺序： 1\. ^admin/ 当前 URL， ，不匹配任何这些。**

网址.py：

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover

urlpatterns = patterns('',
    #url(r'^admin/doc/' include('django.contrib.admindocs.urls')),
    url(r'^admin/' include(admin.site.urls)
) 
```

管理员.py：

```
from polls.models import *
from django.contrib import admin

admin.site.register(Poll) 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:03:29.773

如教程的[第 3](https://docs.djangoproject.com/en/1.4/intro/tutorial03/#design-your-urls)部分所述，您需要将其他条目添加到您的`urls.py`. 如果您使用`./manage.py runserver`.

如果您有一个可查看的主页，`http://localhost:8000/`并带有您`urlpatterns`喜欢的条目：

```
url(r'^$', 'polls.views.index'), 
```

只要`polls`在 python 路径上，`views.py`其中就有一个包含一个名为`index`.

# php - 双引号内的PHP单引号

> ID：14980939
> 
> 赞同：1
> 
> 时间：2013-02-20T13:23:26.207
> 
> 标签：php, quotes, double-quotes

我对在准备插入语句时为什么应该在双引号中使用单引号有疑问。我的理解是变量，双引号会被解释。带单引号的变量不会被解释。

```
$var1 = 5; print "$var1"; //output value 5
$var2 = 'jason'; print '$var2'; //output $var2 
```

我不确定为什么在下面代码的值部分中使用单引号。请给我一些解释。谢谢！

```
$first_name = $_POST['first_name'];
$first_name = trim($first_name);
$last_name = $_POST['last_name'];

$stmt = $con->prepare("insert into reg_data (first_name, last_name) 
                       values('$first_name', '$last_name')"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:26:17.070

您对引号的使用是正确的，但是您错误地使用了准备好的语句 - 您的代码容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响！相反，在查询中使用占位符（不带引号），稍后传入实际值，如[示例](http://php.net/manual/en/pdostatement.execute.php#example-1014)中所示：

```
$first_name = $_POST['first_name'];
$first_name = trim($first_name);
$last_name = $_POST['last_name'];

$stmt = $con->prepare("insert into reg_data (first_name, last_name) 
                       values(:first_name, :last_name)");
$stmt->execute(array(':first_name' => $first_name, ':last_name' => $last_name)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:26:41.310

单引号实际上是 SQL 的单引号。SQL 变为：

`insert into reg_data (first_name, last_name) values('bob', 'bobowitz')`

SQL 中的文字值需要用单引号括起来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T13:25:39.773

为什么：单引号用于获取最终查询，例如：

`insert into reg_data (first_name, last_name) values('Bogdan', 'Burim')`

一般是坏主意。

SQL注入是可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T13:26:53.590

单引号是 SQL 语句的分隔符，与 PHP 无关。它们告诉 MySQL 该字段的值从哪里开始，在哪里停止。

考虑一下：

```
SELECT * FROM mytable WHERE field=new order by name desc 
```

查询应该限制 where `field`= "new order by name desc" 还是应该限制 where `field`= "new" 然后按 "name" 字段以降序排列结果？

引号明确表示：

```
SELECT * FROM mytable WHERE field='new order by name desc' 
```

**此外**：这就是您应该在 MySQL 中转义您的值的原因。如果用户`' OR 1 = 1; --`在您的用户名字段中键入，并且您的身份验证查询是：

```
SELECT * FROM users WHERE username = '$_POST['username']' AND password = '$_POST['password']' 
```

你最终得到：

```
SELECT * FROM users WHERE username = '' OR 1 = 1 -- ' AND password = 'asfd' 
```

这是有效的 SQL 并将选择表中的所有用户（因为输入`$_POST['username']`已将查询的其余部分注释掉。但是，如果您正确转义值，您最终会得到：

```
SELECT * FROM users WHERE username = '\' OR 1 = 1 -- ' AND password = 'asfd' 
```

这意味着 MySQL 将查找具有`username`=`\' OR 1 = 1 --`和匹配密码的用户。您可以使用简单的 . 进行转义`mysqli_real_escape_string`，但始终建议使用 PDO 和参数化查询。

我强烈建议您在使用任何 Web 应用程序中的数据库之前阅读一些关于 PDO、参数和 SQL 注入的教程。以后你会感谢自己的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T13:37:40.700

那些说他们的答案的人非常技术性，并且可能会给出非常具体的答案，在查询中使用单引号将如何导致 SQL 注入。但是当你问**为什么你应该在查询中使用单引号时，**我会试着用一个例子来解释你。

使用静态值查询：

```
insert into reg_data (first_name,last_name)values('fn_value','ln_value'); 
```

你不能从值部分删除单引号，就好像你会这样做你会得到一个mysql错误，因为值是字符串。因此，要在 db 中插入带有变量的字符串值，您必须将该变量放在单引号中，并避免 mysql 错误。

# java - HashSet 不会拒绝第二次添加调用

> ID：14980950
> 
> 赞同：1
> 
> 时间：2013-02-20T13:23:47.123
> 
> 标签：java, collections, hashset

我刚刚开始使用 Collection 并且我已经编写了代码来测试`HashSet`

这是代码（Person.java）：

```
public class Person
{
  int id;

  public Person(int id)
  {
    this.id=id;
  }

  public int getId()
  {
    return id;
  }

  public void setId(int id)
  {
    this.id=id;
  }

  public boolean equals(Object o)
  {
    if (o instanceof Person)
    {
      Person p=(Person)o;
      if (this.id==p.id)
        return false;
      else
        return true;
    }
    else return false;
  }

  public int hashCode()
  {
    return 21*id;
  }
} 
```

而实现类，只是一个简单的类：

```
import java.util.*;

class HashSetTest
{
  public static void main(String[] args)
  {
    Set<Person> set=new HashSet<Person>();
    Person p1=new Person(6);
    Person p2=new Person(6);
    System.out.println(set.add(p1));
    System.out.println(set.add(p2));        
  }
} 
```

如果我没有错，第二`System.out.println`条语句应该返回`false`，因为它不应该添加元素，因为它是重复的，但它返回 true。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T13:27:40.313

当元素匹配时，该方法似乎`Person.equals`正在返回。`false`

它应该是

```
if (this.id==p.id)
    return true;
else
    return false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:27:56.723

你的`equals`方法有问题。`false`当 id 相同时返回。

# scala - 带有可选参数的路由 - Play 2.1 Scala

> ID：14980952
> 
> 赞同：15
> 
> 时间：2013-02-20T13:23:49.027
> 
> 标签：scala, playframework-2.0, playframework-2.1

所以在 Play 2.0 中我有这个：

```
GET     /tasks/add              controllers.Tasks.addTask(parentId: Option[Long] = None)
GET     /tasks/:parentId/add    controllers.Tasks.addTask(parentId: Option[Long]) 
```

使用这样的控制器方法：

```
def addTask(parentId: Option[Long]) = Action { 
    Ok(views.html.addTask(taskForm, parentId))  
} 
```

它正在工作。当我迁移到 2.1 时，它似乎抱怨这些行：`No URL path binder found for type Option[Long]. Try to implement an implicit PathBindable for this type.`基本上，我想要完成的是让 route`tasks/add`和 route`tasks/123/add`链接到接受`Optional[Long]`. 知道怎么做吗？谢谢。

好的，所以我得到了一种它不是错误，它是 Lighthouse 上的功能响应：“我们删除了路径可绑定中的 Option[Long] 支持，因为拥有可选路径参数没有意义。您可以实现自己的如果你愿意，可以支持它的路径可绑定。” 到目前为止，我有 2 个解决方案，将 -1 作为 parentId 传递，我不太喜欢。或者有两种不同的方法，在这种情况下可能更有意义。现在实现 PathBindable 似乎不太可行，所以我可能会坚持使用 2 种方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T16:26:06.450

路径参数支持 Play 2.0 `Option`，Play 2.1 不再支持，他们删除了 Option 的 PathBindable。

一种可能的解决方案是：

```
package extensions
import play.api.mvc._
object Binders {
  implicit def OptionBindable[T : PathBindable] = new PathBindable[Option[T]] {
    def bind(key: String, value: String): Either[String, Option[T]] =
      implicitly[PathBindable[T]].
        bind(key, value).
        fold(
          left => Left(left),
          right => Right(Some(right))
        )

    def unbind(key: String, value: Option[T]): String = value map (_.toString) getOrElse ""
  }
} 
```

并将其添加到`Build.scala`using `routesImport += "extensions.Binders._"`. 运行`play clean ~run`它应该可以工作。动态重新加载活页夹有时才有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T14:19:12.270

我认为您必须添加一个问号：

`controllers.Tasks.addTask(parentId: Option[Long] ?= None)`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-20T14:31:47.570

从这个[带有可选参数的路由中，](https://stackoverflow.com/questions/14980952/routes-with-optional-parameter-play-2-1-scala)建议如下：

```
GET   /                     controllers.Application.show(page = "home")
GET   /:page                controllers.Application.show(page) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-06T01:06:52.640

您的问题的简单解决方案，无需传递默认值，是添加一个简单的代理方法，将参数包装在一个选项中。

路线：

```
GET     /tasks/add              controllers.Tasks.addTask()
GET     /tasks/:parentId/add    controllers.Tasks.addTaskProxy(parentId: Long) 
```

控制器：

```
def addTask(parentId: Option[Long] = None) = Action { 
    Ok(views.html.addTask(taskForm, parentId))  
}

def addTaskProxy(parentId: Long) = addTask(Some(parentId)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T17:08:55.917

我有同样的事情，如果你指定 pass`GET/foo:id`并且`controllers.Application.foo(id : Option[Long] ?= None)`你在另一边得到一个错误`It is not allowed to specify a fixed or default value for parameter: 'id' extracted from the path`，你可以按照以下方式做`GET/foo controllers.Application.foo(id : Option[Long] ?= None)`，它会工作，期待你的请求看起来像`.../foo?id=1`

# android - AsyncTask doInBackground 方法 - 参数错误

> ID：14980960
> 
> 赞同：0
> 
> 时间：2013-02-20T13:24:11.033
> 
> 标签：android, android-asynctask

我正在使用 AsyncTask 调用另一个类中的一些代码：

```
public class addNewLocation extends AsyncTask<HomerLocation, Integer, Void> {

    @Override
    protected Void doInBackground(HomerLocation... location) {
        bridge.addNewLocation(location);
        return null;
    }

    protected void onPostExecute(String result) {
        System.out.println("Result after execution is : " + result);
    }
} 
```

我在按钮代码中通过此命令调用它：

```
new addNewLocation().execute(newLocation,null,null); 
```

newLocation 是一个具有一些属性的对象，我通过用户在对话框中的输入来设置这些属性。

“bridge.addNewLocation(location); 行正在尝试调用我的网桥类中的 addNewLocation 方法，并传递一个名为 location 的 HomerLocation 对象作为参数。但是，我收到一个错误：

```
The method addNewLocation(HomerLocation) in the type HomerJSONBridge is not 
applicable for the arguments (HomerLocation[]) 
```

桥接类的方法如下：

```
public void addNewLocation(HomerLocation location) {
    // code to add new location to homer
    //HomerLocation location = locationArray;
    client = new DefaultHttpClient();
    StringBuilder url = new StringBuilder(HomerURL);
    url.append("%7B%22operation%22%3A%22setLocation%22%2C%20%22name%22%3A%22"+location.getName()+
            "%22%2C%20%22locationContextID%22%3A%22"+location.getContextID()+"%22%2C%20%22image%22%3A%22"+location.getIcon()+
            "%22%2C%22design%22%3A%22"+location.getDesign()+"%22%7D");
} 
```

这会将 JSON 命令传递给我正在访问的 servlet。如果我在所有地方重写代码如下：

```
protected Void doInBackground(HomerLocation... location) {
        HomerLocation location1 = location[0];
        bridge.addNewLocation(location1);
        return null;
    } 
```

和

```
 public void addNewLocation(HomerLocation[] locationArray) {
    // code to add new location to homer
    HomerLocation location = locationArray[0];
    client = new DefaultHttpClient();
    StringBuilder url = new StringBuilder(HomerURL);
    url.append("%7B%22operation%22%3A%22setLocation%22%2C%20%22name%22%3A%22"+location.getName()+
            "%22%2C%20%22locationContextID%22%3A%22"+location.getContextID()+"%22%2C%20%22image%22%3A%22"+location.getIcon()+
            "%22%2C%22design%22%3A%22"+location.getDesign()+"%22%7D");
} 
```

我仍然收到类似的错误（！）：

```
The method addNewLocation(HomerLocation[]) in the type HomerJSONBridge is 
not applicable for the arguments (HomerLocation) 
```

我真的很困惑，因为它似乎既是 HomerLocation 对象又是 HomerLocation[]！任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:27:07.887

```
protected Void doInBackground(HomerLocation... location) 
```

`...`方法参数中的语法表示`location`是一个`HomerLocation`( `HomerLocation[]`) 数组，而不是单个`HomerLocation`对象。

如果您确定它总是一个元素宽，那么最快的解决方法是：

```
@Override
protected Void doInBackground(HomerLocation... location) {
    bridge.addNewLocation(location[0]);
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:33:58.500

像这样尝试因为您的 HomerLocation... 位置是 HomerLocation 对象的数组。

```
protected Void doInBackground(HomerLocation... location) {

    bridge.addNewLocation(location[0]);
    return null;
} 
```

和

```
public void addNewLocation(HomerLocation locationArray) {

   HomerLocation location = locationArray;
   client = new DefaultHttpClient();
   StringBuilder url = new StringBuilder(HomerURL);
   url.append("%7B%22operation%22%3A%22setLocation%22%2C%20%22name%22%3A%22"+location.getName()+
        "%22%2C%20%22locationContextID%22%3A%22"+location.getContextID()+"%22%2C%20%22image%22%3A%22"+location.getIcon()+
        "%22%2C%22design%22%3A%22"+location.getDesign()+"%22%7D");
} 
```

我想这会对你有所帮助。

# django - Django：管理员限制更改权限但允许用户查看内容（即保留超链接）

> ID：14980963
> 
> 赞同：1
> 
> 时间：2013-02-20T13:24:23.573
> 
> 标签：django, django-admin

这个问题之前被问过几次，但我没有得到合适的答案。

1.  在 django 管理仪表板中，我想删除更改按钮。
2.  删除更改按钮后，添加按钮应向左对齐。
3.  `has_change_permission`通过在方法中设置 false 来移除更改按钮时，不应禁用模型名称上的超链接。
4.  单击超链接时，应该只能查看内容。不应允许任何人更改内容。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:24:49.967

Indeed it can be done. One would have to override the main admin index.html template, and in there make all custom changes they wish.

For example:

```
{% if model.perms.change %}
     <td><a href="{{ model.admin_url }}" class="changelink">{% trans 'Change' %}</a></td>
{% else %}
    <td>&nbsp;</td>
{% endif %} 
```

could be changed with just:

```
<td>&nbsp;</td> 
```

as far as "Add" going to left one would have to redesign the table (it depends on haw far exactly link would have to be. Also all of other points in question could be redone in this fashion.

My emphasis at this point would be to encourage not to override directly in the site packages, but instead override it with the creating index.html in global templates/admin folder. Even this has to be considered and done if absolutely necessary.

# php - .htaccess 重定向网址

> ID：14980966
> 
> 赞同：-3
> 
> 时间：2013-02-20T13:24:25.800
> 
> 标签：php, .htaccess, wampserver

我正在尝试改变这一点：

[http://www.test.com/testuser/findUser.php?city=Chennai&txtAreaZip=Annanagar](http://www.test.com/testuser/findUser.php?city=Chennai&txtAreaZip=Annanagar)

进入

[http://www.test.com/testuser/chennai/Annanagar/](http://www.test.com/testuser/chennai/Annanagar/)。

如何将上面的 URL 重定向到 .htaccess 中的下面？我是.htaccess 的新手。请给出你的答案。

谢谢， 塔米拉桑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:28:35.163

这应该适合你：

```
RewriteEngine on
RewriteBase /
RewriteRule ^testuser/(.*)/(.*)/$ testuser/findUser.php?city=$1&txtAreaZip=$2 [L,NC] 
```

# c# - 使用 DataContractJsonSerializer 将 JSON 反序列化为字典

> ID：14980973
> 
> 赞同：13
> 
> 时间：2013-02-20T13:24:49.900
> 
> 标签：c#, .net, json, serialization, .net-4.5

我在响应中收到以下 JSON 结果：

```
{"result": { "":-41.41, "ABC":0.07, "XYZ":0.00, "Test":0.00 }} 
```

我为反序列化准备了以下类：

```
[DataContract]
public sealed class RpcResponse
{
    [DataMember(Name = "result")]
    public List<KeyValuePair<string, decimal>> Result { get; set; }
} 
```

但是，当我尝试使用`DataContractJsonSerializer`该`Result`属性对其进行反序列化时，最终的条目为零。`Result`（声明为时也不起作用`Dictionary<string, decimal>`）

有没有办法执行此操作`DataContractJsonSerializer`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:55:18.933

Your JSON string represents an object with a property Result that is itself an object with 4 properties: "", ABC, XYZ, and Test. For result to be a list of KeyValuePairs, the JSON would look like this:

```
{"result": [{ "":-41.41}, {"ABC":0.07}, {"XYZ":0.00}, {"Test":0.00 }] } 
```

Note that if you are using an associative array in Javascript code, that it is going to be serialized as an object with property-value pairs, not as an array of objects. If that is the source of the JSON string, you may need to switch to using an ordinary indexed array in your JS to get the proper JSON.

# ios - 锁定按钮以在 iOS 中进一步释放

> ID：14980975
> 
> 赞同：0
> 
> 时间：2013-02-20T13:24:51.493
> 
> 标签：ios, app-store, in-app-purchase

我已经重新阅读了苹果的指南，但我没有答案：我的应用程序按级别划分——第一、第二等。除非以前的级别尚未完成，否则用户无法购买新级别。我想使用内置 IAP 和我的问题 - 我已经为超过 10 个级别设计了应用程序，但实际上只完成了几个级别 - 我应该从主屏幕上删除所有其他级别按钮还是我可以将它留在原处“禁用”模式？我对应用程序审查和应用程序拒绝的可能性很感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:07:56.923

如果某些按钮无法点击，您的应用可能会被拒绝。与其禁用某些按钮，不如向它们添加一些消息，例如可爱的“即将推出”屏幕将是一个好主意且安全（查看基于关卡的游戏如何做，愤怒的小鸟或割绳子） .

# java - GWT：RichTextArea 不会自动隐藏 PopupPanel

> ID：14980979
> 
> 赞同：0
> 
> 时间：2013-02-20T13:24:58.707
> 
> 标签：java, gwt, event-handling

我有一个带有 autoHide = true 的 PopuppupPanel。除了我点击 RichTextArea 的情况外，它工作得很好。如果我点击它，什么也不会发生，并且 PopupPanel 不会自动关闭。

我检查了“自动关闭”PopupPanel 的代码。当面板显示时，他们添加了一个 Handler，如下所示：

```
nativePreviewHandlerRegistration = Event.addNativePreviewHandler(new NativePreviewHandler() {
    public void onPreviewNativeEvent(NativePreviewEvent event) {
      previewNativeEvent(event);
    }
  }); 
```

..并且在 previewNativeEvent(event) 中，如果满足某些条件，它们会隐藏面板，尤其是 MouseDownEvent 被捕获。

但看起来 RichTextArea 没有触发 MouseDownEvent！在调试 previewNativeEvent(event) 时我无法捕获此事件。看来我必须手动触发它。我在 RichTextArea 的容器或其父级上触发它，它们分别是 HTMLPanel 和 div：

```
myPanel.fire(new MouseDownEvent() {}); 
```

但这没有给我任何结果：如果我在事件目标上添加 MouseDownHandler 可以捕获该事件，但它不会被我上面提到的 NativePreviewHandler 捕获。

所以，最后：

1.  为什么我的 RichTextArea 不能“自动关闭”我的 PopupPanel？
2.  当我认为 PreviewNativeEventHandler 应该捕获系统中的所有事件并且我可以使用该处理程序打印以记录我的应用程序中的所有事件时，我是对的吗？
3.  为什么 PreviewNativeEvent 处理程序没有从我的 RichtextArea（原始的或人工的）中捕获 MouseDown 事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T09:11:40.890

RichTextArea 使用 iframe 进行富文本编辑器。PreviewNativeEvent 只是当前页面的预览。您可以尝试在 textarea 之前添加掩码以捕获事件。蒙版只是一个 div，它以透明背景占据所有屏幕。弹出面板有一个遮罩选项，尝试使用它：

```
final PopupPanel popup = new PopupPanel(false, true); // Create a modal dialog box that will not auto-hide
popup.add(new Label("Please wait"));
popup.setGlassEnabled(true); // Enable the glass panel
popup.center(); // Center the popup and make it visible 
```

# oracle11g - 从异常块继续循环

> ID：14980982
> 
> 赞同：0
> 
> 时间：2013-02-20T13:25:04.913
> 
> 标签：oracle11g

我知道这个问题已经得到回答，我已经提到了那个问题。但是，当我尝试编译以下代码时，我试图通过包含 INSERT 语句的 LOOP，如果插入语句不成功，我需要检查 DML-insert 失败引发的错误是否是 UNIQUE 约束或不是，如果是唯一约束错误（-1），那么我需要执行更新语句并继续循环。

甲骨文版本：11g

```
 CREATE OR REPLACE PROCEDURE "TESTSAMPLE" AS

type array_test IS TABLE OF NUMBER;

test_arr array_test := array_test(1,   2,   3);

v_key NUMBER;
dup_chk NUMBER;
v_excp_error_code varchar2(25);

BEGIN

  FOR i IN test_arr.FIRST .. test_arr.LAST

  LOOP

    DBMS_OUTPUT.PUT_LINE(i || ' = ' || test_arr(i));
    dup_chk := test_arr(i);
    INSERT
    INTO trig_test
    VALUES('TEST324',   test_arr(i),   'Y',   'Y') returning KEY
    INTO v_key;

    IF v_key IS NOT NULL THEN
      DBMS_OUTPUT.PUT_LINE(' commiting insert ' || v_key || ' ' || dup_chk);
      COMMIT;
    END IF;

  EXCEPTION
  WHEN OTHERS THEN
    v_excp_error_code := SQLCODE;
    DBMS_OUTPUT.PUT_LINE('ERROR CODE = ' || v_excp_error_code);

    IF v_excp_error_code = '-1' THEN
      DBMS_OUTPUT.PUT_LINE('entered unique constraint exception ' || v_key);

      IF v_key = dup_chk OR v_key IS NULL THEN

        UPDATE trig_test
        SET status = 'tstsample'
        WHERE KEY = v_key;
        DBMS_OUTPUT.PUT_LINE('updated ');
        COMMIT;

      END IF;

    ELSE
      RAISE;
    END IF;
  END;  

  END LOOP;

END testsample; 
```

上面的存储过程抛出以下编译错误，

> 错误（33,3）：PLS-00103：在预期以下情况之一时遇到符号“EXCEPTION”：（begin case declare end exit for goto if loop mod null pragma raise return select update while with << continue close current delete fetch lock insert open rollback savepoint set sql execute commit forall merge pipe purge
> 
> 错误（56,7）：PLS-00103：在预期以下情况之一时遇到符号“LOOP”：；
> 
> 错误（59）：PLS-00103：在预期以下情况之一时遇到符号“文件结尾”：结束不是 pragma 最终实例化顺序覆盖静态成员构造函数映射

非常感谢您的帮助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:33:20.643

你在`begin`循环之后错过了一个。IE：

```
loop

  begin -- ADD THIS
    dbms_output.put_line(i || ' = ' || test_arr(i));
    dup_chk := test_arr(i);
    insert into trig_test
    values
      ('TEST324', test_arr(i), 'Y', 'Y')
    returning key into v_key;

    if v_key is not null
    then
      dbms_output.put_line(' commiting insert ' || v_key || ' ' || dup_chk);
      commit;
    end if;

  exception 
```

而不是陷阱`others`，因为你只对你感兴趣，`ORA-00001`你可以只陷阱`when dup_val_on_index`而不是检查 sqlcode。

# multithreading - 我怎样才能使全局缓存线程安全

> ID：14980984
> 
> 赞同：1
> 
> 时间：2013-02-20T13:25:20.180
> 
> 标签：multithreading, delphi, thread-safety, delphi-6, overhead-minimization

我的应用程序曾经是单线程的，但现在为了提高性能，我们需要使其成为多线程。

我们在以下架构中有 Lists 和 ListItems：

```
TBListItem = class(TBusinessObjects)
private 
  FList : TBList;
protected
  //methods
public 
  constructor Create(AList: TBList); reintroduce;
  //other methods
  //properties... 
end; 
```

我们更喜欢列表的组合，而不是继承。

```
TBList = class(TPersistent)
private 
  FItemClass : TBListItemClass; //class of TBListItem

  //this is used to AddObject(key, object) of the TStringList duplicates are no allowed   
  function  BuildKey(ArrayOfKeys: array of Variant): string;
protected
  //we use a stringlist to save the items
  FList: TStringList; 

  function  GetItem(Index: Integer): TBListItem;
  //methods like Load(); Unload(); Save();
public 
  constructor Create(ARefClassItem: TBListItemClass); reintroduce;

  //these methods use buildkey
  function Add(ArrayOfKeys: Array of Variant): TBListItem; reintroduce;
  function FindByKey(const ArrayOfKeys: array of Variant): TBListItem;

  //other methods
  //properties... 
end; 
```

在 ADD() 方法中执行以下操作：

```
var Index: Integer;
begin   
  Index:= FList.IndexOf(BuildKey(ArrayOfKeys));    
  if Index <> -1 then
    Result:= TBListItem(FList.Objects[Index])
  else 
  begin        
    Result:= FListItemClass.Create(Self);
    Result.FCodigo:= ArrayOfKeys;
    //load data from database.
    FList.AddObject(BuildKey(ArrayOfKeys), Result)
  end;    
end; 
```

正如我所说，这些对象用于在运行时记录缓存数据，但每次我们需要在其中读取/写入对象时，我们必须：

```
EnterCriticalSection(instance of TRTLCriticalSection);
//Do Stuff
LeaveCriticalSection(Same instance); 
```

我不能改变太多的架构，因为有无数的类继承自它。
当我运行这些进程时，处理器图形中有很多尖峰，也有很多停机时间。
该系统由delphi 6编译器编译而成。
关键会话已在单元初始化时创建。

还有另一种方法吗？
我可以以某种方式至少不锁定读数吗？

另外，我必须保证完整性，不允许使用相同密钥的 2 个对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:53:28.270

您将需要在阅读时执行一些同步。你不能让一个线程改变一个数据结构，而另一个线程试图读取它。一种常见的方法是单写多读锁。

Delphi 附带其中之一，即`TMultiReadExclusiveWriteSynchronizer`. 但是，我认为它的性能很差，而且自从`TMonitor`崩溃以来，我个人对 Emba 工程师编写正确同步原语的能力没有多少信心。

我的建议是使用Vista 中引入的[Slim Reader/Writer (SRW) Lock 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa904937.aspx)如果您仍然需要支持 XP，那么我建议您回到关键部分。

# php - HipHop 编译器无法识别对象 $this 变量

> ID：14980985
> 
> 赞同：0
> 
> 时间：2013-02-20T13:25:20.273
> 
> 标签：php, object, compiler-errors, this, hiphop

我是 HipHop 的新手，我正在尝试编译和运行自定义 PHP 应用程序，编译错误日志文件包含数百个与 $this 变量“未声明”相关的错误。这是一个简化的示例：-

文件 bar.php：

```
class Bar {
     private $_baz = 'Hello';

     public function __construct() {
         echo 'Constructed';
     }

     public function foo() {
         echo $this->_baz;
     }
}

$bah = new Bar();
$bah->foo(); 
```

该文件被列为列表文本文件 f.lst 中的唯一条目，并调用 HipHop 编译器...

```
root@hiphop:/home/rich/www# hhvm --hphp --input-list=f.lst -k 1 --log=3
running hphp...
creating temporary directory /tmp/hphp_rC6OVL ...
parsing inputs...
parsing inputs took 0'00" (3605 us) wall time
pre-optimizing...
pre-optimizing took 0'00" (1757 us) wall time
analyze includes...
analyze includes took 0'00" (4 us) wall time
inferring types...
inferring types took 0'00" (1503 us) wall time
post-optimizing...
post-optimizing took 0'00" (2870 us) wall time
creating binary HHBC files...
creating binary HHBC files took 0'00" (254854 us) wall time
saving code errors...
all files saved in /tmp/hphp_rC6OVL ...
running hphp took 0'00" (357323 us) wall time 
```

生成的 JSON 错误日志 /tmp/hphp_rC60VL/CodeError.js - 包含以下内容：-

```
[1,{"UseUndeclaredVariable":[{"c1":["bar.php",11,8,11,12]
 ,"d":"$this"}
]
}
] 
```

我在这里遗漏了一些明显的东西吗？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-19T11:39:26.487

自从我发布我的问题后，我在 GitHub 上提出了一个问题，我被告知他们已经修复了导致问题的错误 - > [https://github.com/facebook/hiphop-php/issues/698](https://github.com/facebook/hiphop-php/issues/698) - 我已经被转移了到其他事情上，所以我还没有机会验证这一点，但会假设现在没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T23:36:10.380

这是在 HHVM 上吗？对我来说，尝试您的示例在 HHVM 上效果很好。

# cordova - 将 ASP.NET MVC4 SPA AntiForgeryToken 转换为 PhoneGap

> ID：14980989
> 
> 赞同：3
> 
> 时间：2013-02-20T13:25:33.347
> 
> 标签：cordova, asp.net-mvc-4, single-page-application, bundling-and-minification, antiforgerytoken

我确实有使用 ASP.NET MVC4 的某些功能的 SPA 应用程序，例如 AntiForgeryToken。

我不知道如何在不使用 Phonegap 不支持的 CSHTML 的情况下在 HTML 中实现 AntiForgeryToken 功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-06T03:35:22.710

我认为有一种安全的方法可以在没有服务器生成页面的情况下实现防伪令牌：

1.  创建一个控制器或 Web api 方法，使用您的防伪令牌值设置仅 HTTP 的 cookie，并返回防伪令牌值（作为 JSON）。有一个由 Html.AntiForgeryToken()调用的公共方法[AntiForgery.GetTokens](http://msdn.microsoft.com/en-us/library/system.web.helpers.antiforgery.gettokens%28v=vs.111%29.aspx) [()](http://msdn.microsoft.com/en-us/library/dd470175%28v=vs.100%29.aspx)。使用此方法读取 C# 代码中的令牌值。
2.  在您的 phonegap 应用程序中从 javascript 调用控制器或 web api 方法（在步骤 1 中）并获取返回的防伪令牌并使用 javascript 将其添加到表单中（使用名为 _RequstVerificationToken 的隐藏输入字段）。
3.  将表单提交给具有 [ValidateAntiForgeryToken] 属性的方法，它应该进行适当的验证。

[Microsoft在此处](http://www.asp.net/web-api/overview/security/preventing-cross-site-request-forgery-%28csrf%29-attacks)提供了一个非常相似的示例实现（请参阅标题为“Anti-CSRF 和 AJAX”的部分）。

从表面上看，这可能看起来不安全，因为您有一个设置和返回防伪令牌的控制器方法，但是 Web 浏览器强制执行[相同来源的安全策略](http://en.wikipedia.org/wiki/Same_origin_policy)，因此[XSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)攻击应该是不可能的。

由于 phonegap 使用本地文件，它不受[相同来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的约束（[请参见此处](https://stackoverflow.com/questions/7440725/how-ajax-call-is-working-in-mobile-app-phonegap-but-not-in-pc-browser)），因此它将能够向您的 config.xml 中指定的任何域发出 AJAX 请求（[请参见 <access origin="..." /> 此处](https://build.phonegap.com/docs/config-xml))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:29:30.180

ASP.NET MVC 中 AntiForgery 令牌的当前实现依赖于 HTML 帮助程序，该帮助程序生成隐藏的输入字段并设置 cookie。如果你不能使用这个助手，你将不得不自己滚动这个功能。

# dotnetopenauth - 如何在 DotNetOpenAuth 中为 Google OpenId 提供程序指定弹出显示模式？

> ID：14980995
> 
> 赞同：0
> 
> 时间：2013-02-20T13:25:39.520
> 
> 标签：dotnetopenauth

我有一个使用 DotNetOpenAuth 3.5 进行 Google OpenId 身份验证的 ASP.NET 应用程序。

我最近不得不将 OpenId 行为更改为弹出窗口，以获得更流畅的 UX 体验。但是，弹出窗口会显示一个未针对弹出窗口优化的 Google 登录对话框。我意识到我必须以某种方式将 ltmpl=popup 参数添加到 url [https://accounts.google.com/ServiceLogin](https://accounts.google.com/ServiceLogin)？，但不知道如何。你能提供一些帮助吗？这是我正在使用的代码

```
string discoveryUri = "https://www.google.com/accounts/o8/id";
OpenIdRelyingParty openid = new OpenIdRelyingParty();
var b = new UriBuilder(context.Request.Url);
var req = openid.CreateRequest(discoveryUri, b.Uri, b.Uri);
var fetchRequest = new FetchRequest();
fetchRequest.Attributes.AddRequired(WellKnownAttributes.Contact.Email);
req.AddExtension(fetchRequest);
req.RedirectToProvider(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:37:22.567

我从来没有听说过`ltmpl=popup`你提到的这个参数，但是有一个 OpenID UI 扩展，它应该是 RP 如何与弹出窗口中的 OP 通信的。我已在您的代码片段中添加了必要的行，并清理了其他一些位。

```
var openid = new OpenIdRelyingParty();
var req = openid.CreateRequest(WellKnownProviders.Google);
var fetchRequest = new FetchRequest();
fetchRequest.Attributes.AddRequired(WellKnownAttributes.Contact.Email);
req.AddExtension(fetchRequest);
req.AddExtension(new UIRequest()); // inform the OP it's in a popup.
req.RedirectToProvider(); 
```

UIRequest 扩展将`openid.ui.mode=popup`参数添加到身份验证请求。