# StackOverflow 问答 14215000-14215999

# objective-c - 关于 nil 接收器的警告

> ID：14215007
> 
> 赞同：1
> 
> 时间：2013-01-08T12:30:32.840
> 
> 标签：objective-c, xcode

> **可能重复：**
> [有没有办法记录发送给 nil 的消息？](https://stackoverflow.com/questions/9883599/is-there-any-way-to-log-a-message-send-to-nil)

我想知道当 nil 对象访问时是否有可能记录？类似于“启用僵尸对象”，但为 nil。

# android - 当有人接近设备时打开 Android 显示屏

> ID：14215008
> 
> 赞同：5
> 
> 时间：2013-01-08T12:30:37.660
> 
> 标签：android, computer-vision

使用一点计算机视觉，当人类走到（w/in 2 英尺）设备时，我想打开壁挂式 Android 设备的显示器。

我是一位经验丰富的开发人员，但我对计算机视觉几乎一无所知。以编程方式打开显示器很容易。任何指导、阅读建议、教程、起点等将不胜感激。

编辑：在答案中的一些评论后澄清 - 因为这是一个永久的壁挂式情况，该设备将具有全时电源。电池寿命不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:48:29.807

Android 有接近和光传感器，但我认为这些不足以满足您的需求。

如果显示器有前置摄像头，您可能会使用[OpenCV](http://opencv.org/platforms/android.html)和某种形式的[运动检测](http://labs.pieterdedecker.be/blog/detecting-webcam-movement-with-opencv/)来检测有人靠近屏幕的时间。

编辑：这是使用 OpenCV 进行计算机视觉的文档.. [http://docs.opencv.org/](http://docs.opencv.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T12:51:52.367

我认为有三种方法可以做到这一点。

1.  使用相机和人脸识别
2.  使用接近传感器
3.  使用麦克风检测噪音
4.  （使用磁力传感器，强迫用户随身携带强磁铁）

第一个的问题是：功耗 第二个的问题是：非常不准确的传感器和糟糕的 API 第三个的问题是：难以识别“真实”的声音

[您可以在此处](http://thecodeartist.blogspot.de/2011/01/proximity-sensor-on-android-gingerbread.html)阅读接近传感器，当然也可以[在此处](http://developer.android.com/guide/topics/sensors/sensors_position.html)阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T12:49:51.103

我不太确定，但我会说你可以使用光传感器，因为当有人走近时光值会发生变化。

```
public void onSensorChanged(SensorEvent event) {
  if( event.sensor.getType() == Sensor.TYPE_LIGHT) {
    //do something
  }
} 
```

# magento - Magento 1.7 - 在网格中加入日期列

> ID：14215009
> 
> 赞同：0
> 
> 时间：2013-01-08T12:30:49.027
> 
> 标签：magento, magento-1.7

我需要有一个显示订单项目的网格。

我用收藏`sales/order_item_collection`

我加入这个`sales/orders`以获得订单日期

```
$collection->getSelect()->join( 
           array('orders_alias' => $resource->getTableName('sales/order'))
           , 'main_table.order_id = orders_alias.entity_id'
           , array('orders_alias.increment_id', 'order_date' => 'orders_alias.created_at')
           , null); 
```

添加列定义：

```
$this->addColumn('order_date',
        array(
            'header'=> $this->__('Date'),
            'align' =>'left',
            'width' => '100px',
            'index' => 'order_date',
            'type' => 'date'
        )
    ); 
```

我可以在网格中看到日期。见截图[http://imageshack.us/photo/my-images/252/scr027.jpg/](http://imageshack.us/photo/my-images/252/scr027.jpg/)

如果我使用过滤器框并尝试过滤某个日期，则会收到此错误：

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'order_date' in 'where clause' 
```

如果我使用此列索引：

```
orders_alias.created_at 
```

我得到一个空列。

我需要更改什么才能使用日期列上的过滤器？

* * *

## @KalpeshMehta 的这个解决方案有效：

```
 $this->addColumn('order_date',
        array(
            'header'=> $this->__('Date'),
            'align' =>'left',
            'width' => '100px',
            'index' => 'order_date',
            'type' => 'date',
            'filter_index' => 'orders_alias.created_at'
        )
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:48:12.740

@Guus，添加我的评论作为答案，以便它可以帮助其他也面临同样问题的人。

要使用过滤器，您还应该`filter_index`与 一起使用`index`。

# android - 使用 ViewPager 的 Cover Flow 效果

> ID：14215011
> 
> 赞同：4
> 
> 时间：2013-01-08T12:31:04.453
> 
> 标签：android, android-viewpager, coverflow

我想使用 ViewPager 获得覆盖流效果。我发现了[CoverFlowWidget](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)，因为它的扩展库小部件已被弃用，它最好继续使用`ViewPager`。知道如何实现这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:36:08.757

我目前也在研究如何做到这一点。

我认为您应该使用：[https](https://gist.github.com/8cbe094bb7a783e37ad1) : //gist.github.com/8cbe094bb7a783e37ad1 并将 PageTransformer 添加到 ViewPager。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T21:14:06.583

创建一个容器（布局）来容纳您的 ViewPager。在容器和 ViewPager 上设置 setClipChildren(false)。如果要显示 2 个整页（左 1/2、中 1、右 1/2），请将 ViewPager 的宽度设置为 container/2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T02:46:28.100

使用 ViewPager setPageMargin 使屏幕外页面同时可见。然后使用 setPageTransformer 制作封面流动画。

# iphone - 如何在 UIButtons 之间添加间距

> ID：14215012
> 
> 赞同：-2
> 
> 时间：2013-01-08T12:31:04.487
> 
> 标签：iphone, objective-c, ios, uibutton

我正在使用以下代码添加一系列带有数组的 UIButton。我想知道是否有办法在每个按钮之间添加一些间距，因为它们目前太靠近了。

这是我的代码，感谢您的帮助：

```
 // Create buttons for the sliding category menu.
    buttonArray = [NSMutableArray array];
    myImages = [NSArray arrayWithObjects:@"category-cafe-unsel.png", @"category-food-unsel.png", @"category-clothing-unsel.png", @"category-health-unsel.png", @"category-tech-unsel_phone.png" , @"category-tech2-unsel.png", @"catefory-theatre-unsel.png", @"category-travel-unsel.png", nil];

    myImagesSel = [NSArray arrayWithObjects:@"category-cafe-sel.png", @"category-food-sel.png", @"category-clothing-sel.png", @"category-health-sel.png", @"category-tech-sel_phone.png" , @"category-tech2-sel.png", @"catefory-theatre-sel.png", @"category-travel-sel.png", nil];

    // only create the amount of buttons based on the image array count
    for(int i = 0;i < [myImages count]; i++)
    {
        // Custom UIButton

        btn.tag  = i+1;

        btn = [UIButton buttonWithType:UIButtonTypeCustom];

        [btn setFrame:CGRectMake(0.0f, 20.0f, 52.0f, 52.0f)];
        [btn setTitle:[NSString stringWithFormat:@"Button %d", i] forState:UIControlStateNormal];
        [btn setImage:[UIImage imageNamed:[myImages objectAtIndex:i]] forState:UIControlStateNormal];
        [btn setImage:[UIImage imageNamed:[myImagesSel objectAtIndex:i]] forState:UIControlStateSelected];

        NSLog(@"The button title is %@ ", btn.titleLabel.text);

        [btn addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [buttonArray addObject:btn];

     //   NSLog(@"Button tag is: %d",btn.tag);

    }

    UIImageView *blackColor = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"blackColor.png"]];

    // initialize the slide menu by passing a suitable frame, background color and an array of buttons.
    slideMenuView = [[SlideMenuView alloc] initWithFrameColorAndButtons:CGRectMake(0.0f, 0.0f, 320.0f, 80.0f) backgroundColor:[UIColor clearColor]  buttons:buttonArray]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:44:12.010

利用：

垂直间距：

```
 [btn setFrame:CGRectMake(0.0f, (20.0f + ((52.0 * i) +5)), 52.0f, 52.0f)]; 
```

水平间距

```
if(i==0)
{
   [btn setFrame:CGRectMake(0.0, 52.0, 52.0f, 52.0f)];
}
else
{
   [btn setFrame:CGRectMake((52.0+(52.0 * i)+5), 52.0, 52.0f, 52.0f)];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:39:06.397

试试这个：`[btn setFrame:CGRectMake(0.0f, i*25.0f, 52.0f, 52.0f)];`你会在按钮之间得到 5 像素的间隙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:43:28.390

尝试这个 ：-

[btn setFrame:CGRectMake(0.0f+54*i, 20.0f, 52.0f, 52.0f)];

# jquery - jquery mobile changePage 外部文件

> ID：14215013
> 
> 赞同：0
> 
> 时间：2013-01-08T12:31:06.280
> 
> 标签：jquery, animation, mobile, slide

现在，要重定向到我使用的另一个页面：

```
document.location.href = "nextPage.html" 
```

它工作正常，但没有任何动画！

所以我尝试了：

```
$.mobile.changePage('nextPage.html','slide'); 
```

它工作正常，但我不能使用我的外部脚本！

任何想法 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:59:27.237

$.mobile.changePage('nextPage.html','slide');

这实际上与 ajax 请求加载到相同的 DOM 中，并且您知道 ajax 无法运行脚本，除非您在 ajax 成功时编写它们。所以你必须在 pageinit 中调用你的脚本而不是 document.ready。希望你明白了。

# ruby - 散列中的值本身可以引用其他值吗？

> ID：14215016
> 
> 赞同：0
> 
> 时间：2013-01-08T12:31:09.937
> 
> 标签：ruby, hash

我有一个这样的哈希：

```
config = {
  :assets => {
    :path => '/assets',
    :aliases => {
      '/assets/' => '/assets/index.html',
      '/assets/index.htm' => '/assets/index.html'
    }
  },
  :api => {
    :path => '/auth/api',
    :aliases => {
      '/auth/api/me' => '/auth/api/whoami'
    }
  }
} 
```

是否可以删除重复项并`config[...][:aliases]`按照`config[...][:path]`like进行分配`"#{dict_im_in()[:path]}/index.html"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:25:04.683

您正在尝试做的事情有过早优化的味道。我建议在哈希中尽可能集中使用符号作为键和值。符号的内存效率很高，查找速度也很快，因为 Ruby 只会为给定的符号创建一个内存槽，有效地做你想做的事情。

您的示例结构可以使用符号重写：

```
config = {
  :assets => {
    :path => :'/assets',
    :aliases => {
      :'/assets/' => :'/assets/index.html',
      :'/assets/index.htm' => :'/assets/index.html'
    }
  },
  :api => {
    :path => :'/auth/api',
    :aliases => {
      :'/auth/api/me' => :'/auth/api/whoami'
    }
  }
} 
```

`:'/assets/index.html'`，无论在哪里看到，总是指向同一个符号，不像字符串。

每当您需要访问期望字符串的值时，请`to_s`对它执行 a 。添加值时，`to_sym`对其执行 a 。

在幕后，您将在 Hash 中更有效地使用内存，并使用 Ruby 中最快的值查找。

现在，如果您使用哈希结构来配置您的应用程序，并且它被存储在磁盘上，您可以使用 YAML 节省一些空间，它支持其数据文件中的[别名和锚点。](http://www.yaml.org/YAML_for_ruby.html#aliases_and_anchors)在解析为 Ruby 对象后，它们不会在哈希内创建指针，但它们可以减小文件的大小。

* * *

编辑：

如果您需要动态定义配置，则为各种字符串的所有子部分创建变量，然后添加一个生成它的方法。以下是动态创建此类事物的基础知识：

```
require 'awesome_print'

def make_config(
  assets = '/assets',
  index_html = 'index.html',
  auth_api = '/auth/api'
)
  assets_index = File.join(assets, index_html)
  {
    :assets => {
      :path => assets,
      :aliases => {
        assets + '/' => assets_index,
        assets_index[0..-2] => assets_index
      }
    },
    :api => {
      :path => auth_api,
      :aliases => {
        File.join(auth_api, 'me') => File.join(auth_api, 'whoami')
      }
    }
  }
end

ap make_config()
ap make_config(
  '/new_assets',
  ['new','path','to','index.html'],
  '/auth/new_api'
) 
```

将生成什么：

```
{
    :assets => {
          :path  => "/assets",
        :aliases => {
                    "/assets/"  => "/assets/index.html",
            "/assets/index.htm" => "/assets/index.html"
        }
    },
      :api => {
          :path  => "/auth/api",
        :aliases => {
            "/auth/api/me" => "/auth/api/whoami"
        }
    }
} 
```

和：

```
{
    :assets => {
          :path  => "/new_assets",
        :aliases => {
                                "/new_assets/"  => "/new_assets/new/path/to/index.html",
            "/new_assets/new/path/to/index.htm" => "/new_assets/new/path/to/index.html"
        }
    },
      :api => {
          :path  => "/auth/new_api",
        :aliases => {
            "/auth/new_api/me" => "/auth/new_api/whoami"
        }
    }
} 
```

* * *

编辑：

复制值指针的另一种方法是创建返回所需信息的 lambda 或 proc。我认为它们就像是 C 或 Perl 中的函数指针，允许我们保留范围内变量的状态，或操作传入的值。这不是一个完美的解决方案，因为会发生变量范围，但它是该框的另一个工具：

```
lambda1 = lambda { 'bar' }
proc2   = Proc.new { |a,b| a + b }
proc3   = Proc.new { proc2.call(1,2) }

foo = {
  :key1 => lambda1,
  :key2 => proc2,
  :key3 => proc2,
  :key4 => proc3
}

foo[:key1].object_id # => 70222460767180
foo[:key2].object_id # => 70222460365960
foo[:key3].object_id # => 70222460365960
foo[:key4].object_id # => 70222460149600

foo[:key1].call          # => "bar"
foo[:key2].call(1, 2)    # => 3
foo[:key3].call(%w[a b]) # => "ab"
foo[:key4].call          # => 3 
```

有关 lambda 和 procs 的更多信息，请参阅“[何时使用 lambda，何时使用 Proc.new？](https://stackoverflow.com/questions/626/when-to-use-lambda-when-to-use-proc-new) ”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T12:43:34.720

这是个有趣的问题 ;）。

我认为您可以“重新打开”哈希，然后只使用变量名。

例如：

```
config = {
  :assets => {
    :path => '/assets',
    :aliases => {
      '/assets/' => '/assets/index.html',
      '/assets/index.htm' => '/assets/index.html'
    }
  }
}
# Then "re-open" the Hash
config[:api] = {
  :path => '/auth/api',
  :aliases => {
    '/auth/api/me' => config[:assets][:aliases]['/assets/index.htm']
  }
} 
```

您还可以编写一个辅助方法来从该哈希中提取给定的别名。但我不确定这是否值得。

# delphi - 有没有在栈上分配内存的Delphi内存管理功能？

> ID：14215019
> 
> 赞同：3
> 
> 时间：2013-01-08T12:31:14.783
> 
> 标签：delphi

C 世界有[alloca()](http://www.gnu.org/software/libc/manual/html_node/Variable-Size-Automatic.html)或[_alloca()](http://msdn.microsoft.com/en-us/library/wb1s57t5.aspx)在堆栈而不是堆上分配内存。

Delphi有这样的功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:49:18.497

如果您真的想复制`alloca`Delphi 中的功能，我建议您查看`StackAlloc`VCL 中 Grids 单元中的功能。这是在单元的实现部分中声明的过程，因此您必须复制 VCL 源才能使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T12:35:57.437

您可以声明一个局部变量，例如一个字节数组：

```
var
  Buf: array[0..BufSize - 1] of Byte; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T12:38:07.620

这是从网上截取的：

```
unit LocalObject;

interface

uses
  SysUtils, Windows;

const
  // AOS -> allocate object strategy
  // allocate objects on stack
  AOS_STACK = 0;
  // allocate on a global buffer
  AOS_GLOBAL = 1;
  // allcoate on a specified buffer
  AOS_LOCAL = 2;
  //allocate through IMemoryAllocator
  AOS_ALLOCATOR = 3;
  // allocate as normal Delphi does (on the heap).
  AOS_HEAP = 4;

  GlobalBufferLen = 1024 * 16;

type
  IMemoryAllocator = interface
    function GetMem(Size: Integer): Pointer;
    function FreeMem(P: Pointer): Integer;
  end;

{ Control how and where to allocate the objects.
  AStrategy: the strategy values. Can be any constant prefixed with AOS_
  ABuffer and ABufferSize: Only used by AOS_LOCAL and AOS_ALLOCATOR.
    For AOS_LOCAL, ABuffer is the memory address of the buffer, ABufferSize is the buffer size.
    For AOS_ALLOCATOR, ABuffer is a pointer of interface IMemoryAllocator, ABufferSize is unused.
}
procedure SetObjectAllocateStrategy(AStrategy: Integer;
  ABuffer: Pointer = nil; ABufferSize: Integer = 0);

{ Enter the local object memory allocation. You must call it once
  for each procedure.
  ASize: the size of total memory. It's the maximum size that can be allocated.
}
procedure EnterLocalObject(ASize: Integer); overload;

{ Enter the local object memory allocation
  AClass: the class type
  ACount: the maximum object count
}
procedure EnterLocalObject(AClass: TClass; ACount: Integer = 1); overload;

{ Leave the local object memory allocation
}
procedure LeaveLocalObject;

{ Reset current local object memory allocation
  Then all memory will be reclaimed and can be reused again
}
procedure ResetLocalObject;

{ Initialize locat object memory allocation.
  This function should be called only once or called by EnterLocalObject implicitly.
}
procedure InitLocalObject;

{ Finalize locat object memory allocation.
  This function should be called only once or called by LeaveLocalObject implicitly.
}
procedure DeInitLocalObject;

implementation

const
  HookHeaderLen = 5;

type
  THookHeader = array[0 .. HookHeaderLen - 1] of Byte;
  TAllocateStrategy = packed record
    Strategy: Integer;
    Buffer: Pointer;
    BufferSize: Integer;
  end;

  TLocalMemoryInfo = packed record
    TopMost: Pointer;
    Top: Pointer;
    Size: Cardinal;

    Strategy: Integer;
    Buffer: Pointer;
  end;
  PLocalMemoryInfo = ^TLocalMemoryInfo;

const
  LocalMemoryInfoSize = SizeOf(TLocalMemoryInfo);
var
  MemInfoStack: array of TLocalMemoryInfo;
  MemInfoStackSize: Integer;
  MemInfoStackTop: Integer;
  CriticalSection: TRTLCriticalSection;
  HookHeaders: array[ 0 .. 1 ] of THookHeader;
  CanLocalObject: Boolean;
  LocalObjectInitCount: Integer;
  AllocateStrategy: TAllocateStrategy;
  GlobalBuffer: array[ 0 .. GlobalBufferLen - 1 ] of Byte;

procedure GrowMemInfoStack;
begin
  Inc(MemInfoStackSize, 10);
  SetLength(MemInfoStack, MemInfoStackSize);
end;

// eax - ASize
procedure EnterLocalObject(ASize: Integer);
asm
  push eax

  call InitLocalObject

  lea ecx, CriticalSection
  push ecx
  call EnterCriticalSection

  mov ecx, MemInfoStackTop
  cmp ecx, MemInfoStackSize
  jb @@nogrow
  call GrowMemInfoStack
  mov ecx, MemInfoStackTop
@@nogrow:

  pop eax

  inc MemInfoStackTop

  imul ecx, LocalMemoryInfoSize
  lea edx, MemInfoStack[0]
  mov edx, [edx]
  add edx, ecx
  mov edx.TLocalMemoryInfo.Size, eax

  mov ecx, AllocateStrategy.Buffer
  mov edx.TLocalMemoryInfo.Buffer, ecx
  mov ecx, AllocateStrategy.Strategy
  mov edx.TLocalMemoryInfo.Strategy, ecx

//  mov ecx, AllocateStrategy.Strategy

  cmp ecx, AOS_STACK
  jz @@Stack
  cmp ecx, AOS_GLOBAL
  jz @@Global
  cmp ecx, AOS_LOCAL
  jz @@Local
  cmp ecx, AOS_HEAP
  jz @@Heap
  cmp ecx, AOS_ALLOCATOR
  jz @@Allocator
@@Stack:
  pop ecx //store the return address

  mov edx.TLocalMemoryInfo.Top, esp

  add eax, 3
  and eax, not 3
@@loop:
  cmp eax, 4096
  jb @@1
  sub esp, 4092
  push edx
  sub eax, 4096
  jmp @@loop
@@1:
  sub esp, eax

  mov edx.TLocalMemoryInfo.TopMost, esp

  push ecx
  jmp @@end

@@Global:
  lea eax, GlobalBuffer[0]
  mov edx.TLocalMemoryInfo.TopMost, eax
  add eax, GlobalBufferLen
  mov edx.TLocalMemoryInfo.Top, eax
  jmp @@end

@@Local:
  mov eax, AllocateStrategy.Buffer
  mov edx.TLocalMemoryInfo.TopMost, eax
  add eax, AllocateStrategy.BufferSize
  mov edx.TLocalMemoryInfo.Top, eax
  jmp @@end

@@Heap:
  mov edx.TLocalMemoryInfo.Top, 0
  jmp @@end

@@Allocator:
//  jmp @@end

@@end:
end;

procedure EnterLocalObject(AClass: TClass; ACount: Integer); overload;
asm
  push edx
  call TObject.InstanceSize
  pop edx
  mul eax, edx
  jmp EnterLocalObject
end;

procedure LeaveLocalObject;
asm
  mov ecx, MemInfoStackTop
  dec ecx
  jl @@end
  imul ecx, LocalMemoryInfoSize
  lea edx, MemInfoStack[0]
  mov edx, [edx]
  add edx, ecx

  mov ecx, edx.TLocalMemoryInfo.Strategy

  cmp ecx, AOS_ALLOCATOR
  jnz @@NotAllocator
  push ecx
  push edx

  push MemInfoStackTop
  mov MemInfoStackTop, 0
  mov ecx, edx.TLocalMemoryInfo.Buffer
  push ecx
  mov ecx, [ecx]
  call dword ptr [ecx] + VMTOFFSET IMemoryAllocator._Release
  pop MemInfoStackTop

  pop edx
  pop ecx
@@NotAllocator:
  cmp ecx, AOS_STACK
  jnz @@done

  // store stack that should not be modified.
  // ecx is the return address
  // eax may be used by try..finally code structure.
  pop ecx
  pop eax

  add esp, edx.TLocalMemoryInfo.Size
//  mov edx.TLocalMemoryInfo.Top, 0

  push eax
  push ecx

@@done:
  lea eax, CriticalSection
  push eax
  call LeaveCriticalSection

  call DeInitLocalObject
@@end:
end;

procedure ResetLocalObject;
begin
  if (MemInfoStackTop <> 0) then
    MemInfoStack[MemInfoStackTop - 1].Top := Pointer(Cardinal(MemInfoStack[MemInfoStackTop - 1].TopMost)
      + MemInfoStack[MemInfoStackTop - 1].Size);
end;

procedure SetObjectAllocateStrategy(AStrategy: Integer; ABuffer: Pointer;
  ABufferSize: Integer);
begin
  EnterCriticalSection(CriticalSection);
  try
    AllocateStrategy.Strategy := AStrategy;
    if AStrategy = AOS_LOCAL then
    begin
      AllocateStrategy.Buffer := ABuffer;
      AllocateStrategy.BufferSize := ABufferSize;
      Assert(ABuffer <> nil, 'The buffer can not be nil.');
    end
    else
    begin
      if AStrategy = AOS_ALLOCATOR then
      begin
        AllocateStrategy.Buffer := ABuffer;
        IMemoryAllocator(AllocateStrategy.Buffer)._AddRef;
      end
      else
      begin
        AllocateStrategy.Buffer := nil;
      end;
    end
  finally
    LeaveCriticalSection(CriticalSection);
  end;
end;

function GetLocalMem(ASize: Integer): Pointer;
var
  lMemInfo: PLocalMemoryInfo;
begin
  if (MemInfoStackTop = 0) or (MemInfoStack[MemInfoStackTop - 1].Strategy = AOS_HEAP) then
  begin
    GetMem(Result, ASize);
  end
  else
  begin
    lMemInfo := @MemInfoStack[MemInfoStackTop - 1];
    if lMemInfo^.Strategy = AOS_ALLOCATOR then
      Result := IMemoryAllocator(lMemInfo^.Buffer).GetMem(ASize)
    else
    begin
      ASize := (ASize + 3) and not 3;
      if Cardinal(lMemInfo^.Top) + Cardinal(ASize) < Cardinal(lMemInfo^.TopMost) then
        raise Exception.Create('Out of stack memory');
      lMemInfo^.Top := Pointer(Cardinal(lMemInfo^.Top) - Cardinal(ASize));

      Result := lMemInfo^.Top;
    end;
  end;
end;

procedure FreeLocalMem(AMem: Pointer);
var
  lMemInfo: PLocalMemoryInfo;
begin
  if (MemInfoStackTop = 0) or (MemInfoStack[MemInfoStackTop - 1].Strategy = AOS_HEAP) then
  begin
    FreeMem(AMem);
  end
  else
  begin
    lMemInfo := @MemInfoStack[MemInfoStackTop - 1];
    if lMemInfo^.Strategy = AOS_ALLOCATOR then
      IMemoryAllocator(lMemInfo^.Buffer).FreeMem(AMem);
  end;
end;

function NewNewInstance(ASelf: TClass): TObject;
var
  P: Pointer;
begin
  P := GetLocalMem(ASelf.InstanceSize);
  Result := TObject(P);
  Result := ASelf.InitInstance(Result);
end;

procedure NewFreeInstance(ASelf: TObject);
begin
  ASelf.CleanupInstance;
  FreeLocalMem(Pointer(ASelf));
end;

procedure SimpleHook(ATarget, AHook: Pointer);

  function GetRelativeAddr(ACode: PByte; AInstOffset: Integer;
    AAddr: Cardinal): Integer;
  begin
    Inc(ACode, AInstOffset);
    Result := Integer(AAddr) - (Integer(ACode) + 4);
  end;
begin
  PByte(ATarget)^ := $e9;
  PInteger(Cardinal(ATarget) + 1)^ := GetRelativeAddr(ATarget, 1, Cardinal(AHook));
end;

procedure SimpleUnhook(ATarget: Pointer; AHeader: THookHeader);
begin
  Move(AHeader[0], ATarget^, HookHeaderLen);
end;

procedure SimplePrepareHook(ATarget: Pointer; var AHeader: THookHeader);
var
  lOldProtect: Cardinal;
begin
  VirtualProtect(ATarget, HookHeaderLen, PAGE_READWRITE, lOldProtect);
  if IsBadWritePtr(ATarget, HookHeaderLen) then
  begin
    CanLocalObject := False;
    raise Exception.Create('Can not write target function required by local object.');
  end;

  Move(ATarget^, AHeader[0], HookHeaderLen);
end;

procedure InitLocalObject;
begin
  if not CanLocalObject then
    Exit;

  EnterCriticalSection(CriticalSection);
  try
    Inc(LocalObjectInitCount);
    if LocalObjectInitCount = 1 then
    begin
      SimpleHook(@TObject.NewInstance, @NewNewInstance);
      SimpleHook(@TObject.FreeInstance, @NewFreeInstance);
    end;
  finally
    LeaveCriticalSection(CriticalSection);
  end;
end;

procedure DeInitLocalObject;
begin
  if not CanLocalObject then
    Exit;

  EnterCriticalSection(CriticalSection);
  try
    Dec(LocalObjectInitCount);
    if LocalObjectInitCount <= 0 then
    begin
      LocalObjectInitCount := 0;

      SimpleUnhook(@TObject.NewInstance, HookHeaders[0]);
      SimpleUnhook(@TObject.FreeInstance, HookHeaders[1]);
    end;
  finally
    LeaveCriticalSection(CriticalSection);
  end;
end;

procedure Init;
begin
  LocalObjectInitCount := 0;

  MemInfoStackSize := 0;
  MemInfoStackTop := 0;
  GrowMemInfoStack;

  InitializeCriticalSection(CriticalSection);

  CanLocalObject := True;

  SetObjectAllocateStrategy(AOS_STACK, nil, 0);

  SimplePrepareHook(@TObject.NewInstance, HookHeaders[0]);
  SimplePrepareHook(@TObject.FreeInstance, HookHeaders[1]);
end;

initialization
  Init;

end. 
```

用法，在此示例中，将在堆栈上创建 TestObject：

```
procedure TestIt;
var
  lObj: TTestObject;
  I: Integer;
begin
  EnterLocalObject(TTestObject, 100);
  try
    for I := 1 to 100 do
      lObj := TTestObject.Create;
    try
      lObj.ShowMsg;
    finally
      lObj.Free;
    end;
  finally
    LeaveLocalObject;
  end;
end; 
```

参考： [http ://www.kbasm.com/delphi-stack-local-object.html](http://www.kbasm.com/delphi-stack-local-object.html)

# cakephp - CakePHP 2.2.4 reCAPTCHA 验证不起作用

> ID：14215021
> 
> 赞同：0
> 
> 时间：2013-01-08T12:31:17.960
> 
> 标签：cakephp, recaptcha

您好，我有一个在 cakePHP 2.2.4 中工作的注册系统，从这个链接中[注册](http://www.androtutorials.com/Users/signup)我正在使用的 reCAPTCHA [Jahdrien/ReCaptcha-Plugin](https://github.com/Jahdrien/ReCaptcha-Plugin) 在我的视图中显示，但代码验证不起作用请有人告诉我该怎么做reCAPTCHA 验证？

UsersController.php // 我的控制器。

```
<?php
class UsersController extends AppController{
    public $components = array('Recaptcha.Recaptcha');
    public $helpers = array('Recaptcha.Recaptcha');
    public function signup(){

        $d = $this->request->data;
        $d['User']['id'] = null;
        if(!empty($d['User']['password'])){
                $d['User']['password'] = Security::hash($d['User']['password'],null,true);  
        }
        if($this->User->save($d,true,array('username','password','email'))){
            $link = array('controller'=>'Users','action'=>'activate',$this->User->id.'-'.md5($d['User']['password']));
            App::uses('CakeEmail','Network/Email');
            $mail = new CakeEmail();
            $mail->from('noreplay@localhost.com')
                 ->to($d['User']['email'])
                 ->subject('CakePHP Test :: Registration on Ohyeahhh.com')
                 ->emailFormat('html')
                 ->template('signup')
                 ->viewVars(array('username'=>$d['User']['username'],'link'=>$link))
                 ->send();
                 $this->request->data = array();
            $this->Session->setFlash("Your account was successfully created.","notif",array('type'=>'Success'));
        }else{
            $this->Session->setFlash("Please correct the following errors.","notif");
        }

    }
?> 
```

User.php // 我的模型。

```
<?php
class User extends AppModel{
    public $validate = array(
        'username'=>array(
            array(
                'rule'=>'alphaNumeric',
                'allowEmpty'=>false,
                'message'=>'Invalide Username!'
            ),
            array(
                'rule' => array('minLength', '4'),
                'message' => 'Username has to be more than 3 chars'
            ),
            array(
                'rule'=>'isUnique',
                'message'=>'Username already taken!'
            )
        ),
        'password' => array(
                array(
                    'rule' => 'alphaNumeric',
                    'allowEmpty'=>false,
                    'message' => 'Password must be AlphaNumeric!'
                ),
                array(
                    'rule' => array('minLength', '4'),
                    'message' => 'Username has to be more that 3 chars'
                ),
                array(
                    'rule' => array('confirmPassword', 'password'),
                    'message' => 'Passwords do not match'
                )), 
        'confirmpassword' => array(
                            'rule' => 'alphanumeric'
        ),
        'email'=>array(
            array(
                'rule'=>'email',
                'allowEmpty'=>false,
                'required'=>true,
                'message'=>'Invalide mail adress!'
            ),
            array(
                'rule'=>'isUnique',
                'message'=>'Mail adress already taken!'
            )
        )
    );
    function confirmPassword($data)
    {
        if ($data['password'] == Security::hash($this->data['User']['confirmpassword'],null,true)) {
            return true;
        }
            return false;
    }
}
?> 
```

signup.ctp // 我的观点。

```
<?php 

echo $this->Session->flash();
echo $this->Form->create('User');   
echo $this->Form->input('username' ,array('label'=>"Username :")); 
echo $this->Form->input('password' ,array('label'=>"Password :")); 
echo $this->Form->input('confirmpassword' ,array('label'=>"Password (type again to catch typos) :", 'type' => 'password')); 
echo $this->Form->input('email' ,array('label'=>"Email :"));  
echo $this->Recaptcha->show(array(
                'theme' => 'red',
                'lang' => 'en',
            ));
echo $this->Recaptcha->error();
echo $this->Form->end('Register'); 
?> 
```

Recaptcha 文件夹位于我的“root/plugin/”文件夹中。

这是我不知道如何用于使验证工作的 ValidationBehavior.php。

```
<?php
class ValidationBehavior extends ModelBehavior {
    function beforeValidate(&$model) {
        die(' probando funcion de validacion ');
        $model->validate['recaptcha_response_field'] = array(
            'checkRecaptcha' => array(
                'rule' => array('checkRecaptcha', 'recaptcha_challenge_field'),
                'required' => true,
                'message' => 'You did not enter the words correctly. Please try again.',
            ),
        );
    }

    function checkRecaptcha(&$model, $data, $target) {
        App::import('Vendor', 'RecaptchaPlugin.recaptchalib');
        Configure::load('RecaptchaPlugin.key');
        $privatekey = Configure::read('Recaptcha.Private');
        $res = recaptcha_check_answer(
            $privatekey,                            $_SERVER['REMOTE_ADDR'],
            $model->data[$model->alias][$target],   $data['recaptcha_response_field']
        );
        return $res->is_valid;
    }
}
?> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:09:50.087

老实说，试试我们的。

[https://github.com/CakeDC/recaptcha](https://github.com/CakeDC/recaptcha)

它经过统一测试和记录。您正在使用的那个实际上做得并不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T19:07:53.327

使用 CakeDC recaptcha 是一个很好的解决方案。刚刚实施它没有问题。如果您收到错误，可能是因为未加载插件。确保所有文件都放在 Plugin\Recaptcha 目录中，并且您在 bootstrap.php 中添加了以下行：

CakePlugin::load('Recaptcha');

# c# - System.Windows.TriggerAction 与 System.Windows.Interactivity.TriggerAction

> ID：14215024
> 
> 赞同：1
> 
> 时间：2013-01-08T12:31:26.540
> 
> 标签：c#, wpf, silverlight

我正在尝试将 Silverlight 项目移植到 WPF，该项目依赖触发器和操作在视觉状态下进行转换。

我知道这很有效，因为我以前做过，但是由于某种原因，在我当前的版本中，当我尝试将 GoToStateAction（继承自 System.Windows.Interactivity.TriggerAction）添加到 EventTrigger 操作集合时，我得到了错误“GoToStateAction”无法添加到“TriggerActionCollection”类型的集合或字典（正在寻找 System.Windows.TriggerAction）

我必须做什么才能让 WPF 中的 GoToStateAction 工作？我的目标是使用类似以下的东西：（基于原始的 silverlight 实现）

```
<Grid.Triggers>
    <EventTrigger RoutedEvent="MouseLeave" SourceName="PART_DataWaveGrid">
        <ei:GoToStateAction x:Name="MouseLeaveTrigger" StateName="Collapsed"/>
    </EventTrigger>
    <EventTrigger RoutedEvent="MouseEnter" SourceName="PART_DataWaveGrid">
        <ei:GoToStateAction x:Name="MouseEnterTrigger" StateName="Expanded"/>
    </EventTrigger>
    <EventTrigger RoutedEvent="Loaded">
        <ei:GoToStateAction x:Name="LoadTrigger" StateName="Collapsed"/>
    </EventTrigger>
</Grid.Triggers> 
```

另外 - 第二个问题，EventName 不再存在于 EventTrigger 上，那么我应该改用什么？RoutedEvent 看起来可以满足需求，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T07:52:08.897

当然这已经很晚了，但是因为我在相关搜索中发现了这个，所以我会尝试回答它。

System.Windows.Interactivity 中的触发器功能是为与 Blend 良好集成而开发的，不能与 System.Windows 中的触发器类混合。我会选择 System.Windows.Interactivity 触发器，并将代码修改为这样的内容（未经实际测试）：

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="MouseLeave" SourceName="PART_DataWaveGrid">
        <ei:GoToStateAction x:Name="MouseLeaveTrigger" StateName="Collapsed"/>
    </i:EventTrigger>
    <i:EventTrigger EventName="MouseEnter" SourceName="PART_DataWaveGrid">
        <ei:GoToStateAction x:Name="MouseEnterTrigger" StateName="Expanded"/>
    </i:EventTrigger>
    <i:EventTrigger EventName="Loaded">
        <ei:GoToStateAction x:Name="LoadTrigger" StateName="Collapsed"/>
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

使用命名空间 i: 定义为

```
 xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" 
```

# android-intent - Android 意图：市场/Play 商店类别

> ID：14215025
> 
> 赞同：2
> 
> 时间：2013-01-08T12:31:25.850
> 
> 标签：android-intent

取自 Android 开发者的网站，它声明您可以使用以下 uri 构造[链接到 Play 商店中的集合：](http://developer.android.com/distribute/googleplay/promote/linking.html#OpeningCollection)

```
market://apps/collection/<collection_name> 
```

上面链接中的表格给出了`<collection_name>`使用示例：

```
market://apps/collection/editors_choice 
```

上述失败，活动未找到异常。

因此，我不得不恢复到 web url 代码并使用 Play 商店包名称（如果已安装）来执行此操作。

```
Intent psi = new Intent(Intent.ACTION_VIEW);
// psi.setData(Uri.parse("http://play.google.com/store/apps/collection/editors_choice"));
psi.setData(Uri.parse("market://apps/collection/editors_choice"));
// psi.setPackage("com.android.vending"); 
psi.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(psi); 
```

其他任何人都可以确认它对他们也不起作用，或者我是否遗漏了一些明显的东西......？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:28:25.870

您的问题表明您正在获得活动未找到异常。确保您已在 manifest 中定义。删除这一行**psi.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);** 从你的代码。

# c# - MVC C# 复杂模型编辑

> ID：14215030
> 
> 赞同：1
> 
> 时间：2013-01-08T12:31:55.300
> 
> 标签：c#, model-view-controller, post, model, edit

我正在尝试找到一种方法来编辑我的数据库中的条目，我的模型是这样的：

```
public class ComplexModel {
public int id {get;set;}
public string Name {get;set;}
public List<Lines> FavoriteNumbers {get;set;}
}

public class Lines{
public int id {get ;set ;} 
public string FavoriteLetter {get;set;}
} 
```

我的观点有这个列出输入框

```
@model MvcApplication.Models.ComplexModel
@using(BeginForm()){
<fieldset>
<legend>Enter your name</legend>
@Html.EditorFor(model=>model.Name)
</fieldset>
@foreach (var item in Model.FavoriteNumber)
            {       

              <fieldset>
                <legend>Favorite number:</legend>
                @Html.EditorFor(model=>item.FavoriteLetter)
              </fieldset>
            }
<input type="submit" value="Save">
} 
```

是否可以以这种方式编辑 ComplexModel 中的每一行？我试图编辑，但在控制器中它说我的列表是空的/空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:40:13.250

您应该使用 Model.FavoriteNumberS，而不是 Model.FavoriteNumber...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:40:31.620

使用 for 循环代替 foreach。它看起来像这样：

```
@for (int i=0; i < Model.FavoriteNumbers.Count; i++)
        {       
          <fieldset>
            <legend>Favorite number:</legend>
            @Html.EditorFor(model=>model.FavoriteNumbers[i].FavoriteLetter)
            @Html.HiddenFor(model=>model.FavoriteNumbers[i].id)
          </fieldset>
        } 
```

我添加了带有 id 的 HiddenFor 以确保为该项目发布了一些内容。否则，如果发布了数据并且某个字段为空，则列表将被断开。

# java - 确定事件调度线程的范围

> ID：14215032
> 
> 赞同：1
> 
> 时间：2013-01-08T12:31:56.873
> 
> 标签：java, multithreading, swing, event-handling, event-dispatch-thread

我是摇摆新手，仍在学习它的来龙去脉。我编写了一个基本代码并开始尝试使用 EDT。这是代码：

```
public class SwingDemo2 extends Thread implements ActionListener {

JLabel jl;

SwingDemo2() {
    JFrame jfr = new JFrame("Swing Event Handling");
    jfr.setSize(250, 100);
    jfr.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    jl = new JLabel("Press a button!", SwingConstants.CENTER);

    System.out.println("After Label: " + SwingUtilities.isEventDispatchThread());

    JButton jb1 = new JButton("OK");
    jb1.setActionCommand("OK");

    jb1.addActionListener(this);

    JButton jb2 = new JButton("Reset");
    jb2.setActionCommand("Reset");

    jb2.addActionListener(this);

    jfr.add(jl, BorderLayout.NORTH);
    jfr.add(jb1, BorderLayout.WEST);
    jfr.add(jb2, BorderLayout.EAST);

    System.out.println("After adding: " + SwingUtilities.isEventDispatchThread());

    jfr.setVisible(true);
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            System.out.println("In main: " + SwingUtilities.isEventDispatchThread());
            new SwingDemo2();
        }
    });
}

public void actionPerformed(ActionEvent ae) {
    if (ae.getActionCommand() == "OK") {
        System.out.println("In OK: " + SwingUtilities.isEventDispatchThread());
        jl.setText("You pressed Ok");
    }
    else if (ae.getActionCommand() == "Reset") {
        System.out.println("In Reset: " + SwingUtilities.isEventDispatchThread());
        jl.setText("You pressed Reset");
    }

}

} 
```

我添加了一些`isEventDispatchThread()`方法来验证我所在的线程。除了 GUI 之外，控制台中的消息还有：

```
In main: true
After Label: true
After adding: true
In OK: true
In Reset: true 
```

似乎我一直在 EDT。我的问题是，在`jfr.setVisible(true)`语句之后`SwingDemo2()`构造函数不应该返回`main()`并且不应该是 EDT 的结尾吗？

在我第一次按下 GUI 中的任何按钮之前，我等了很多秒，那么为什么我的事件处理仍在 EDT 中完成？这不应该给 EDT 足够的时间来终止吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:37:05.677

在事件调度线程中，您会看到“事件”一词。这意味着所有（UI）“事件”总是在该特定线程上调度：ActionEvent、PaintEvent、KeyEvent、MouseEvent 等......您可以等待任意时间，按钮单击（ActionEvent）将始终被调度美国东部时间。

当 JVM 启动时，它会调用`main()`“主”线程上的方法。在其中，您使用`SwingUtilities.invokeLater()`which 将启动 EDT，并且`Runnable`您提供的将被执行（在 EDT 的范围内）。同时，您的主线程在到达最后一条语句后停止运行。另一方面，EDT 永远不会停止运行并不断等待新事件的发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:39:24.763

**EDT**的范围将持续到**事件处理**，其中包括：

*   由最终用户直接触发的所有事件（**鼠标事件、按键事件）**以及由这些事件触发的所有更高级别的事件（`actionListeners`等`focusListeners`...）；实际上你可以说 all`AWT`并且`Swing` `EventListeners`总是在**EDT中被调用**
*   所有绘画代码（由组件的变化或寡妇大小或位置的变化触发，无论何时需要绘制一个区域）
*   `SwingUtilities.invokeAndWait()`或通过or调用的任何代码`SwingUtilities.invokeLater()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T12:46:27.107

1.  默认情况下（我在谈论你的代码）创建 Swing 代码是重要的两点

    *   在 EDT 上使用和应用 LayoutManager（例如`pack()`，setSize 等...）

    *   EDT 上容器的 setVisible()

    *   其余构建的 Swing 代码对 EDT 完全不敏感

2.  EDT 是一个单独的特殊线程，如果从 Swing 代码初始化，则在当前 JVM 中一直存在（不活动），也与 currnet JVM 过期

    *   默认情况下来自 invokeLater 或 invokeAndWait （永远看不到使用 == 我的观点的真正理由）

    *   EDT 在所有事件都完成的情况下不活动，然后必须唤醒，从 invokeLater / invokeAndWait 激活此线程（如果 EDT 活动，请注意导致异常）或使用 SwingWorker

3.  WorkersThread 默认从不调用/激活 EDT，Swing GUI 不知道从 WorkersThreads 到 GUI 的输出，Swing API 中方法的事件部分被声明为 thread_safe，这仅在 EDT 活动的情况下有效，否则什么都没发生，

4.  > 在我第一次按下 GUI 中的任何按钮之前，我等了很多秒，那么为什么我的事件处理仍在 EDT 中完成？那不应该给 EDT 足够的时间来终止吗？

[在 EDT 为空然后返回为 false 的情况下不为真，例如参见](https://stackoverflow.com/a/11204639/714968)

# ios - 将贝宝访问与 ios 应用程序集成

> ID：14215036
> 
> 赞同：0
> 
> 时间：2013-01-08T12:32:12.837
> 
> 标签：ios, email, paypal

我已将 paypal sdk 集成到我的 ios 应用程序中。用户可以登录我的应用程序并使用“Paypal 支付”按钮进行支付。但我希望商家使用他的贝宝 ID 登录我的应用程序，并希望将他的贝宝电子邮件地址存储在我的应用程序数据库中。请帮我找回商家的电子邮件地址。我进行了很多搜索，发现使用贝宝访问登录，但我无法将其与我的 iphone 应用程序集成。

我想验证商家的电子邮件地址，无论是他的贝宝电子邮件 ID 还是假的。就像我们在登录时在 facebook 中所做的那样，我们会得到字典作为响应，其中包含电子邮件地址和其他字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:38:31.770

经过大量搜索，我找到了答案，paypal提供了“GetVerifiedStatus” api，用于检查用户是否拥有正确的paypal电子邮件地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:21:56.350

只需使用以下代码

创建一个带有文本字段并询问电子邮件 ID 的弹出窗口。

```
-(IBAction)savemarchentID:(id)sender
{
PayPalPayment *payment = [[PayPalPayment alloc] init] ;
payment.recipient = emailfield.text;

//if you want to save in data base then call the method here

} 
```

# java - 如何执行登录取消 HttpPost 方法。我必须在 Post 中发送哪些参数，以及如何获取响应

> ID：14215040
> 
> 赞同：0
> 
> 时间：2013-01-08T12:32:20.943
> 
> 标签：java, http-post, apache-commons

我需要通过 HttpPost 方法使用 HttpClient 提供一个简单的登录。这就是我所拥有的：

```
DefaultHttpClient httpclient = new DefaultHttpClient();

String url = "http://10.20.128.47/ilias/ilias.php?lang=de&amp;client_id=0001&amp;cmd=post&amp;cmdClass=ilstartupgui&amp;cmdNode=jt&amp;baseClass=ilStartUpGUI&amp;rtoken=";

List<NameValuePair> formparams = new ArrayList<NameValuePair>();
formparams.add(new BasicNameValuePair("username", "client01"));
formparams.add(new BasicNameValuePair("password", "client01"));

UrlEncodedFormEntity entity = new UrlEncodedFormEntity(formparams, "UTF-8");
HttpPost httppost = new HttpPost(url);
httppost.setEntity(entity); 
```

它似乎不起作用。我正在使用“action =” - 该登录页面上 html 代码中的 url。我可以毫无问题地做一个 HttpGet。

```
HttpGet httpget = new HttpGet(url);

HttpResponse response = httpclient.execute(httpget);

BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

String line = "";

while ((line = rd.readLine()) != null) {
    System.out.println(line);
} 
```

这给了我想要的登录页面。所以我想执行 HttpPost 方法，它会让我登录，然后我想做一个 HttpGet，它给我登录用户的 http 代码。有人可以帮我吗？我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:31:34.323

你不是忘了打电话吗

*响应 = httpclient .execute(httppost);*

# silverlight - 具有不同数据绑定的 Silverlight / WPF DataTemplate

> ID：14215041
> 
> 赞同：0
> 
> 时间：2013-01-08T12:32:22.917
> 
> 标签：silverlight, binding, datatemplate

通常它会是：

```
<DataTemplate>
   <TextBox Text ="{Binding SomeProperty}" />
</DataTemplate> 
```

这意味着对于列表的每个项目，`TextBox`都绑定到绑定项目的相应属性。

`DataTemplate`是否可以为每个项目创建具有不同数据绑定的数据？

例如：我有一个产品实体列表。第一项需要绑定名称，第二项需要绑定地址，第三项需要绑定价格，以此类推。

模板的`TextBox`保留所有项目，但`Binding`更改：

```
<DataTemplate>
   <TextBox Text ="{Binding <RunTimePropertyName>}" />
</DataTemplate> 
```

注意：<""> - 更改`Binding`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:49:37.500

我会围绕您要绑定的对象创建一个包装类。就像是：

```
public class ItemWrapper : OriginalItem
{
    public int RowNum { get; set; }
    public string TextForRow
    {
        get
        {
            if(RowNum == 0)
                return this.Name
            else if(RowNumb == 1)
                return this.Address
        }
} 
```

然后绑定到 TextForRow 属性。

您将不得不以某种方式填写 RowNum，但我假设那在您的某个地方`OriginalItem`

# javascript - onClientClick 在 JavaScript 中不起作用

> ID：14215044
> 
> 赞同：2
> 
> 时间：2013-01-08T12:32:41.463
> 
> 标签：javascript, asp.net

如果输入无效，我会尝试显示警报，但 OnClientClick 不起作用，这是我的代码：

```
function validation1() {

    if (document.getElementById('firstname').value == "" || document.getElementById('firstname').value == "First Name..." ){
    alert("Please Enter First Name");
    } 
    if(document.getElementById('lastname').value == "" || document.getElementById('lastname').value == "Last Name..."){
    alert("Please Enter Last Name");
    }
}

<asp:Button runat="server" ID="SearchButton" Text="Instant Search" OnClick="SearchButton_Click" OnClientClick="validation1" /> 
```

我的代码在母版页中，所以这可能是个问题吗？

尝试了许多不同的方法来使用 OnClientClick 调用该函数，但没有成功：

*   [stackoverflow.com/questions/2155048/onclientclick-and-onclick-is-not-working-at-the-same-time](https://stackoverflow.com/questions/2155048/onclientclick-and-onclick-is-not-working-at-the-same-time)
*   [当我同时使用 Onclick 和 OnClientClick 时，OnClick 不起作用](https://stackoverflow.com/questions/9619395/onclick-not-working-when-i-use-both-onclick-onclientclick)
*   [OnClientClick 不起作用](https://stackoverflow.com/questions/10810178/onclientclick-not-working)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:35:01.787

您在函数调用中缺少括号（括号），您可能还希望验证函数的结果确定服务器端点击是否应该触发：

```
function validation1() {

if (document.getElementById('firstname').value == "" ||document.getElementById('firstname').value == "First Name..." ){
   alert("Please Enter First Name");
   return false;
} 

if(document.getElementById('lastname').value == "" || document.getElementById('lastname').value == "Last Name..."){
   alert("Please Enter Last Name");
   return false;
}

return true;
}

<asp:Button runat="server" ID="SearchButton" Text="Instant Search" OnClick="SearchButton_Click" OnClientClick="return validation1();" /> 
```

这里的主要区别是客户端点击函数返回一个值来说明验证是否通过以及正确声明的实际方法调用，很容易错过:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:42:22.837

试试这个

```
 function validation1() {

    if (document.getElementById('firstname').value == "" || document.getElementById('firstname').value == "First Name..." ){
    alert("Please Enter First Name");
    return false;
    } 
    if(document.getElementById('lastname').value == "" || document.getElementById('lastname').value == "Last Name..."){
    alert("Please Enter Last Name");
    return false;
    }
} 
```

这是aspx代码

```
<asp:Button runat="server" ID="SearchButton" Text="Instant Search" OnClick="SearchButton_Click" OnClientClick="return validation1();" /> 
```

# facebook - Facebook SDK .Login 在 .Init 问题之前调用

> ID：14215046
> 
> 赞同：-1
> 
> 时间：2013-01-08T12:32:48.260
> 
> 标签：facebook, sdk

在我的母版页中，我有以下代码：

```
<body>
<div id="fb-root">
</div>
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: "xxx",
            channelUrl: "/xd_receiver.htm",
            xfbml: false
        });
    };
</script>
....
</body> 
```

在一个单独的 .js 文件中，我的 facebook 代码如下：

```
var Facebook = function () {
    var pub = {};
    var priv = {};

    pub.Login = function () {
        return priv.FacebookLogin();
    };

    priv.FacebookLogin = function () {
        FB.login(function (response) {
            if (response.authResponse) {
                FB.api('/me', function (response) {
                    console.log("you are logged in");
                    return response;
                });
            }
        });
    };

    return pub;
}; 
```

现在我的问题是，使用这样的代码，调用调用 FacebookLogin 函数的 Login 将返回控制台消息，即 login 在 init 之前调用，即使 init 就在 fb 说它应该在的位置，就在标签之后。我测试将我的 init clal 放在我的 FB.login 上方，然后它再次工作，所以 placemet 出了点问题。以前我在标签中链接了 js 文件（包含 facebook 函数），但我也尝试将它放在 init 脚本之后，但我遇到了同样的错误。（facebook函数的调用在一个链接的js文件中，有关系吗？）

任何想法为什么我收到此错误消息，FB.login() 在 FB.init() 之前调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:17:59.027

问题似乎是实际测试，在 localhost 中进行测试时，我必须重建允许我使用登录名的项目，但如果我只是使用 F5 更新页面，那么我遇到了问题。不是 100% 确定为什么，但我在进行更改后通过运行来解决它。

# python - 线程即将终止怎么办？

> ID：14215047
> 
> 赞同：2
> 
> 时间：2013-01-08T12:32:48.767
> 
> 标签：python, multithreading

我有一个即将终止的正在运行的线程，但那时我已经想摆脱它的引用。我可以开始它并希望最好还是我应该以某种特殊的方式处理它？

```
class CoolThing(object):

    def __init__(self):
        self.thread = None

    def run_in_background(self, callback, period=0.5):
        if self.thread:
            raise RuntimeError

        def worker():
            worker.running = True
            while worker.running:
                if some_event():
                    callback(self)
                time.sleep(period)

        self.thread = (threading.Thread(target=worker), worker)
        self.thread[0].start()

    def stop_background(self, join=False):
        if not self.thread:
            raise RuntimeError

        # Make the worker function end harmfully.
        self.thread[1].running = False

        if join:
            self.thread[0].join()

        # What should I now do with the thread being about to
        # terminate, when not being joined?

        # ...

        self.thread = None 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:52:56.670

`worker`当 while 循环离开时，您应该在从 within 调用的回调中将 thread 设置为 None ：

**编辑**：现在还支持立即重启后台进程

```
import time
import threading

class CoolThing(object):

    def __init__(self):
        self.thread = None

    def run_in_background(self, callback, period=0.5):
        wait_count = 0
        while True:
            if self.thread:
                if self.thread[1].running or wait_count>10:
                    raise RuntimeError()
                time.sleep(0.5)
                wait_count += 1
            else:
                break

        def worker():
            t0 = time.time()
            worker.running = True
            while worker.running:
                if time.time()-t0>2:
                    callback()
                    t0 = time.time()
                time.sleep(period)
            worker.callback()

        worker.callback = self.dispose
        self.thread = (threading.Thread(target=worker), worker)
        self.thread[0].start()

    def stop_background(self, join=False):
        if not self.thread:
            raise RuntimeError
        self.thread[1].running = False
        if join:
            self.thread[0].join()
        self.stopping = True

    def dispose(self):
        self.thread = None
        self.stopping

def my_callback():
    print "Beep"

if __name__=="__main__":
    cool_thing = CoolThing()
    cool_thing.run_in_background(my_callback, 0.5)
    time.sleep(10)
    cool_thing.stop_background()
    # Immediatley restart process
    cool_thing.run_in_background(my_callback, 0.5)
    time.sleep(10)
    cool_thing.stop_background()
    print cool_thing.thread
    time.sleep(3)
    print cool_thing.thread 
```

给出输出：

```
Beep
Beep
Beep
(<Thread(Thread-2, started 10760)>, <function worker at 0x02DEDD70>)
None 
```

所以在调用 stop_background 之后，self.thread 仍然被设置，但后来，它是`None`. 您还可以保存 worker.callback-variable 并通过它的名称调用 dispose()，但是这样，代码更加灵活。

**编辑 2**：新要求，新代码示例

我为工人（SRP）创建了一个单独的班级，CoolThing 保存了一份此类工人的名单。如果`run_background(...)`已启动，它会检查是否有任何工作人员仍在运行（未请求停止），然后引发 RuntimeError。否则，启动一个新的工人。 `stop_background()`告诉每个工人停止，每个工人调用一个回调，然后从所有工人的列表中删除这个工人。

```
import time
import threading

class Worker(threading.Thread):
    def __init__(self, callback, period=0.5, finished_callback = None):
        threading.Thread.__init__(self)
        self.callback = callback
        self.period = period
        self._stop_requested = False
        self._finished_callback = finished_callback

    def run(self):
        t0 = time.time()
        while not self._stop_requested:
            if time.time()-t0>2:
                self.callback()
                t0 = time.time()
            time.sleep(self.period)
        if self._finished_callback:
            self._finished_callback(self)

    def request_stop(self):
        self._stop_requested = True

    @property
    def stopping(self):
        return self._stop_requested

class CoolThing(object):

    def __init__(self):
        self.workers = []
        self.workers_lock = threading.Lock()

    def run_in_background(self, callback, period=0.5):
        if len([w for w in self.workers if not w.stopping])>0:
            raise RuntimeError()
        worker = Worker(callback, period, finished_callback=self.dispose)
        with self.workers_lock:
            self.workers.append(worker)
        worker.start()

    def stop_background(self, join=False):
        if len(self.workers) == 0:
            raise RuntimeError()
        for worker in self.workers:
            worker.request_stop()
        if join:
            for worker in self.workers:
                worker.join()

    def dispose(self, worker):
        with self.workers_lock:
            self.workers.remove(worker)

def my_callback():
    print "Beep"

if __name__=="__main__":
    cool_thing = CoolThing()
    cool_thing.run_in_background(my_callback, 0.5)
    time.sleep(10) 
    print cool_thing.workers
    cool_thing.stop_background()
    # Immediatley restart process
    cool_thing.run_in_background(my_callback, 0.5)    
    print cool_thing.workers
    time.sleep(5)
    print cool_thing.workers
    time.sleep(5)
    cool_thing.stop_background()
    print cool_thing.workers
    time.sleep(3)
    print cool_thing.workers 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:17:02.370

正如评论者已经提到的那样，您不能使用`join()`，因为所做的只是等待线程自然终止。我不知道有任何本机 Python API 可以强制终止线程，尽管底层线程库通常会有一个（例如`pthread_kill()`）。这通常是因为在 Python 中强行杀死一个线程通常是一件非常糟糕的事情。

然而，在这种情况下，您似乎并没有试图杀死一个不合作的线程，您已经向线程发出信号，希望它优雅地终止（通过设置您的`running`属性）。

我看不出有什么理由不能立即设置`thread`为`None`- 我不相信删除对线程对象的最后一个引用实际上会导致任何问题，因为线程将保持活动状态直到它终止（除非你'已经设置`daemon`为`True`它并且主程序终止）。当然，在定义`worker()`函数时创建的闭包中的任何对象仍然存在，因此在线程终止之前它们不会被释放（甚至可能不是设置闭包的方式 - 我需要仔细考虑一下）。

`join()`无论如何，如果您在线程终止时安排线程，我认为您的生活会更轻松。如果您担心您将不得不等待线程的时间超时，您可以使用一个`threading.Condition`对象来解决这个问题：

```
class CoolThing(object):

    def __init__(self):
        self.thread = None
        self.exit_condition = threading.Condition()

    def run_in_background(self, callback, period=0.5):
        if self.thread:
            raise RuntimeError

        def worker(exit_condition):
            exit_condition.acquire()
            worker.running = True
            while worker.running:
                if some_event():
                    callback(self)
                exit_condition.wait(period)
            exit_condition.release()

        self.thread = (threading.Thread(target=worker, args=(self.exit_condition,)),
                       worker)
        self.thread[0].start()

    def stop_background(self):
        if not self.thread:
            raise RuntimeError

        # Make the worker function end harmfully.
        self.exit_condition.acquire()
        self.thread[1].running = False
        self.exit_condition.notify()
        self.exit_condition.release()

        self.thread[0].join()
        self.thread = None 
```

# java - 从图像视图获取图像并上传到 php-Server

> ID：14215048
> 
> 赞同：0
> 
> 时间：2013-01-08T12:32:51.043
> 
> 标签：java, android, image-uploading

我得到了这个代码，它从一个**`image`**名为**“dmlo”**的地方`drawable`上传**到 php 服务器**，我想要的**不是从 drawable 中获取那张图片，而是****从一个`imageview`**中获取它，我应该怎么做？我应该用另一个替换第一行中的任何代码吗？

```
Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(),R.drawable.dmlo);
ByteArrayOutputStream bao = new ByteArrayOutputStream();
bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);

byte [] ba = bao.toByteArray();
String ba1=Base64.encodeBytes(ba);

ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("image",ba1));

StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy);

try{
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new
    HttpPost("http://192.168.1.38/mobileappd/base.php");
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    is = entity.getContent();
}catch(Exception e){
    Log.e("log_tag", "Error in http connection "+e.toString());
    Toast.makeText(getBaseContext(), e.toString(),Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:43:39.600

检查此代码 - 如果未分配可绘制对象，它可能会返回 null

```
imageView.getDrawable(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:42:40.183

试试这个，它以drawable格式返回图像，从imageview获取图像后，你可以将Drawable的对象传递给php服务器。

```
ImageView mImg1 = (ImageView) findViewById(R.id.mImg1);
// For get Drawable from Image
Drawable d = mImg1.getDrawable();

// For Convert Drawable to Bitmap
Bitmap bitmapOrg = ((BitmapDrawable)d).getBitmap(); 
```

它会解决你的问题。

# angularjs - 如何使用 AngularJS 下载文件并调用 MVC API？

> ID：14215049
> 
> 赞同：53
> 
> 时间：2013-01-08T12:32:50.917
> 
> 标签：angularjs

我正在使用 AngularJS，并且我有一个 MVC 4 API，它返回一个带有附件的 HttpResponseMessage。

```
var result = new MemoryStream(pdfStream, 0, pdfStream.Length) {
     Position = 0
};
var response = new HttpResponseMessage {
     StatusCode = HttpStatusCode.OK,
     Content = new StreamContent(result)
};
response.Content.Headers.ContentDisposition = 
           new ContentDispositionHeaderValue("attachment") {
                    FileName = "MyPdf.pdf"
           };
response.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
return response; 
```

我正在使用一个名为[fileDownload](http://johnculviner.com/category/jQuery-File-Download.aspx)的 jQuery 插件......它可以很好地下载文件......但我还没有找到以“Angular”方式执行此操作的方法......任何帮助将不胜感激。

// _e

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2014-05-15T16:22:35.113

我有同样的问题。通过使用一个名为[FileSaver的 javascript 库解决了这个问题](https://github.com/eligrey/FileSaver.js/)

打电话

```
saveAs(file, 'filename'); 
```

**完整的 http post 请求：**

```
$http.post('apiUrl', myObject, { responseType: 'arraybuffer' })
  .success(function(data) {
            var file = new Blob([data], { type: 'application/pdf' });
            saveAs(file, 'filename.pdf');
        }); 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2014-12-12T11:41:47.333

在这里，您有任何客户端都必须执行的对 API 的 angularjs http 请求。只需根据您的情况调整 WS url 和参数（如果有）。这是 Naoe 的答案和[这个](https://stackoverflow.com/questions/17836273/export-javascript-data-to-csv-file-without-server-interaction)答案之间的混合：

```
$http({
    url: '/path/to/your/API',
    method: 'POST',
    params: {},
    headers: {
        'Content-type': 'application/pdf',
    },
    responseType: 'arraybuffer'
}).success(function (data, status, headers, config) {
    // TODO when WS success
    var file = new Blob([data], {
        type: 'application/csv'
    });
    //trick to download store a file having its URL
    var fileURL = URL.createObjectURL(file);
    var a = document.createElement('a');
    a.href = fileURL;
    a.target = '_blank';
    a.download = 'yourfilename.pdf';
    document.body.appendChild(a); //create the link "a"
    a.click(); //click the link "a"
    document.body.removeChild(a); //remove the link "a"
}).error(function (data, status, headers, config) {
    //TODO when WS error
}); 
```

**代码说明：**

1.  Angularjs 在 URL 处请求一个 file.pdf `/path/to/your/API`：.
2.  响应收到成功
3.  我们在前端使用 JavaScript 执行一个技巧：
    *   创建一个 html 链接 ta: `<a>`。
    *   点击超链接`<a>`标签，使用JS`click()`函数
4.  `<a>`单击后删除 html标记。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-15T14:56:21.613

根据各种帖子...您无法通过 XHR 触发下载。我需要为下载实现条件，所以，我的解决方案是：

```
//make the call to the api with the ID to validate
someResource.get( { id: someId }, function(data) {
     //confirm that the ID is validated
     if (data.isIdConfirmed) {
         //get the token from the validation and issue another call
         //to trigger the download
         window.open('someapi/print/:someId?token='+ data.token);
     }
}); 
```

我希望以某种方式，或者有一天可以使用 XHR 触发下载以避免第二次调用。// _e

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-11-10T09:54:11.380

There is 2 ways to do it in angularjs..

1) By directly redirecting to your service call..

```
<a href="some/path/to/the/file">clickme</a> 
```

2) By submitting hidden form.

```
$scope.saveAsPDF = function() {
    var form = document.createElement("form");
    form.setAttribute("action", "some/path/to/the/file");
    form.setAttribute("method", "get");
    form.setAttribute("target", "_blank");

    var hiddenEle1 = document.createElement("input");
    hiddenEle1.setAttribute("type", "hidden");
    hiddenEle1.setAttribute("name", "some");
    hiddenEle1.setAttribute("value", value);

    form.append(hiddenEle1 );

    form.submit();

} 
```

use the hidden element when you have to post some element

```
<button ng-click="saveAsPDF()">Save As PDF</button> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-20T03:48:44.773

tremendows 的解决方案对我来说效果很好。但是，文件也没有保存在 Internet Explorer 10+ 中。以下代码适用于 IE 浏览器。

```
var file = new Blob(([data]), { type: 'application/pdf' });
if (window.navigator.msSaveOrOpenBlob) {
    navigator.msSaveBlob(file, 'fileName.pdf');
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-09-05T13:45:37.120

这就是我解决这个问题的方法

```
$scope.downloadPDF = function () {
    var link = document.createElement("a");
    link.setAttribute("href",  "path_to_pdf_file/pdf_filename.pdf");
    link.setAttribute("download", "download_name.pdf");
    document.body.appendChild(link); // Required for FF
    link.click(); // This will download the data file named "download_name.pdf"
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-06-01T21:49:04.150

另一个使用`Blob()`代码的例子：

```
function save(url, params, fileName){
    $http.get(url, {params: params}).success(function(exporter) {
        var blob = new Blob([exporter], {type: "text/plain;charset=utf-8;"});
        saveAs(blob, fileName);
    }).error(function(err) {
        console.log('err', err);
    });
};

// Save as Code
function saveAs(blob, fileName){
    var url = window.URL.createObjectURL(blob);

    var doc = document.createElement("a");
    doc.href = url;
    doc.download = fileName;
    doc.click();
    window.URL.revokeObjectURL(url);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-01T10:39:14.247

```
string trackPathTemp = track.trackPath;

            //The File Path
            var videoFilePath = HttpContext.Current.Server.MapPath("~/" + trackPathTemp);

            var stream = new FileStream(videoFilePath, FileMode.Open, FileAccess.Read);
            var result = new HttpResponseMessage(HttpStatusCode.OK)
            {
                Content = new StreamContent(stream)
            };
            result.Content.Headers.ContentType = new MediaTypeHeaderValue("video/mp4");
            result.Content.Headers.ContentRange = new ContentRangeHeaderValue(0, stream.Length);
            // result.Content.Headers.Add("filename", "Video.mp4");
            result.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
            {
                FileName = "Video.mp4"
            };
            return result; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-29T09:37:24.677

使用 FileSaver.js 解决了我的问题感谢帮助，下面的代码帮助了我

```
'$'

 DownloadClaimForm: function (claim) 
{
 url = baseAddress + "DownLoadFile";
 return  $http.post(baseAddress + "DownLoadFile", claim, {responseType: 'arraybuffer' })
                            .success(function (data) {
                                var file = new Blob([data], { type: 'application/pdf' });
                                saveAs(file, 'Claims.pdf');
                            });

    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-16T14:44:57.497

有角服务写的[角文件服务器](https://github.com/alferov/angular-file-saver) 使用**FileSaver.js**和**Blob.js**

```
 vm.download = function(text) {
    var data = new Blob([text], { type: 'text/plain;charset=utf-8' });
    FileSaver.saveAs(data, 'text.txt');
  }; 
```

# oracle - ORA-12505。TNS：侦听器当前不知道连接描述符中给出的 SID

> ID：14215052
> 
> 赞同：0
> 
> 时间：2013-01-08T12:33:03.100
> 
> 标签：oracle, oracle11g

我无法从 SQL plus 连接到 Oracle 数据库。这是我收到的错误消息：

```
Status: Failure -Test failed: Listener refused the connection with the following error: ORA-12505\. TNS: listener dos not currently know of SID given in connect descriptor 
```

这是***listener.ora 的配置：***

```
# listener.ora Network Configuration File: /u01/app/oracle/product/11.2.0/dbhome_1/network/admin/listener.ora
# Generated by Oracle configuration tools.

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.1.104)(PORT = 1521))
    )
  )

ADR_BASE_LISTENER = /u01/app/oracle 
```

***sqlnet.ora：***

```
# sqlnet.ora Network Configuration File: /u01/app/oracle/product/11.2.0/dbhome_1/network/admin/sqlnet.ora
# Generated by Oracle configuration tools.

NAMES.DIRECTORY_PATH= (TNSNAMES, EZCONNECT)

ADR_BASE = /u01/app/oracle 
```

***tnsnames.ora：***

```
# tnsnames.ora Network Configuration File: /u01/app/oracle/product/11.2.0/dbhome_1/network/admin/tnsnames.ora
# Generated by Oracle configuration tools.

ORACLE =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.1.104)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = oracle)
    )
  ) 
```

我该如何解决这个问题？

***PS*** 这是命令 lsnrctl status 的输出

```
[oracle@localhost bin]$ ./lsnrctl status

LSNRCTL for Linux: Version 11.2.0.1.0 - Production on 08-JAN-2013 14:38:00

Copyright (c) 1991, 2009, Oracle.  All rights reserved.

Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROC1521)))
STATUS of the LISTENER
------------------------
Alias                     LISTENER
Version                   TNSLSNR for Linux: Version 11.2.0.1.0 - Production
Start Date                08-JAN-2013 14:37:06
Uptime                    0 days 0 hr. 0 min. 54 sec
Trace Level               off
Security                  ON: Local OS Authentication
SNMP                      OFF
Listener Parameter File   /u01/app/oracle/product/11.2.0/dbhome_1/network/admin/listener.ora
Listener Log File         /u01/app/oracle/diag/tnslsnr/localhost/listener/alert/log.xml
Listening Endpoints Summary...
  (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=192.168.1.104)(PORT=1521)))
The listener supports no services
The command completed successfully
[oracle@localhost bin]$ 
```

# php - PdfLib 生成的 PDF 文件在上传到 Amazon S3 后损坏/不完整

> ID：14215054
> 
> 赞同：0
> 
> 时间：2013-01-08T12:33:07.377
> 
> 标签：php, pdf, amazon-s3, pdflib

我正在使用 PdfLib PHP 扩展生成一个 PDF 文件。我开始一个新文件，将图像加载到其中，然后调用 end_document 来完成文件。

一切正常，文件生成正确，但我试图在生成文件后立即将文件上传到 Amazon S3 云（在生成文件的同一函数中）。该文件已上传但不完整，似乎上传了一个空的pdf。

```
// get a PDFLib object
$p = new PDFlib();

// determine filename
$pageFileName = $page->getPageNr() . '_' . sha1(microtime()) . '.pdf';

// determine local file path and S3 file path
$filePath = $this->fs->getPath(
    Dt_Util_FileStorage_Path::FILETYPE_SOURCEFILE,
    $pageFileName,
    $job
);

// start the document
if ($p->begin_document($filePath->getTmpPath(), "") == 0) {
    throw new Dt_Exception_DtException($p->get_errmsg(), 3, null);
}

// begin a new page inside the new document
$p->begin_page_ext($widthScreenResPixels, $heightScreenResPixels, "");

// load an image resource
$image = $p->load_image("auto", $imgfile, "");
if ($image == -1){
    throw new Exception("Error: " + $p->get_errmsg());
}

// load the image into the current page
$p->fit_image($image, 0, 0, "boxsize={" . $widthScreenResPixels . " " . $heightScreenResPixels . "} fitmethod=entire");

// end the page
$p->end_page_ext("");

// release the image
$p->close_image($image);

//write PDF file
$p->end_document("");

// sleep(5);

// upload the file to S3
$this->fs->putFile($filePath); 
```

我在本地保存文件的位置包含应有的文件：图像已加载到其中，文件大小约为 600KB。上传的文件就像一个空骨架，当我调用 PdfLib->begin_document 时生成的文件，但在实际放入任何内容之前，我无法打开它，它的大小为 104 字节。

我尝试在 end_document 之后和上传之前睡几秒钟，因为我认为 PdfLib 可能需要一些时间才能完成，但这没有效果，结果完全一样。

有没有人对如何解决这个问题有任何想法，什么会导致这个，在哪里寻找解决方案？

**更新** 问题似乎是我正在使用的 S3 api 类。我正在使用[这个](http://undesigned.org.za/2007/10/22/amazon-s3-php-class)。使用官方 SDK 上传成功如预期。我将继续使用官方 SDK。最初的问题，为什么它使用其他 API 类失败，仍然存在。

# mysql - 如果来自不同表的两个 id 匹配，MySQL 将特定值插入列？

> ID：14215056
> 
> 赞同：0
> 
> 时间：2013-01-08T12:33:08.493
> 
> 标签：mysql, phpmyadmin

我有 3 张表**员工**、**经理**、**用户**。只有当**员工的****id**与**manager的****id**匹配时，我才想将值 1 插入**users**列**is_manager**。**id在****员工**中是主键，在**经理**中是主键和外键。

 ******任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:35:42.473

任何一个

```
UPDATE users 
INNER JOIN managers ON users.id=managers.id
SET users.is_manager=1 
```

或者

```
UPDATE users SET is_manager=1
WHERE id IN (
  SELECT id FROM managers
) 
```

会做。我推荐后者以获得更好的可读性。******

# iphone - IframeExtractor 不使用 rtsp 输出声音

> ID：14215059
> 
> 赞同：0
> 
> 时间：2013-01-08T12:33:27.190
> 
> 标签：iphone, ios, ffmpeg, codec

我使用来自 git [mooncatventure](https://github.com/mooncatventures-group/iFrameExtractor)的 IframeExtractor ，它可以很好地播放 .mov 文件。但是当我尝试读取 rtsp 流时，我听不到任何声音。

这是 rtsp 流中的 FFMEG 转储：

```
Metadata:
title           : unknown
comment         : unknown
Duration: N/A, start: 49435.000589, bitrate: 258 kb/s
Program 3223 
No Program
Stream #0:0: Video: h264 (High) ([27][0][0][0] / 0x001B), yuv420p, 720x576 [SAR 64:45 DAR 16:9], 25 fps, 25 tbr, 90k tbn, 50 tbc
Stream #0:1(fra): Audio: aac ([15][0][0][0] / 0x000F), 48000 Hz, stereo, fltp, 142 kb/s
Stream #0:2(fra): Subtitle: dvb_teletext ([6][0][0][0] / 0x0006)
Stream #0:3(qad): Audio: aac ([15][0][0][0] / 0x000F), 48000 Hz, mono, fltp, 47 kb/s
Stream #0:4(qaa): Audio: aac ([15][0][0][0] / 0x000F), 48000 Hz, stereo, fltp, 68 kb/s 
```

这是本地 .mov 文件中有效的转储：

```
Metadata:
major_brand     : qt  
minor_version   : 0
compatible_brands: qt  
creation_time   : 2010-01-17 21:52:33
model           : iPhone 3GS
model-eng       : iPhone 3GS
date            : 2010-01-17T16:52:33-0500
date-eng        : 2010-01-17T16:52:33-0500
encoder         : 3.1.2
encoder-eng     : 3.1.2
make            : Apple
make-eng        : Apple
Duration: 00:00:03.25, start: 0.000000, bitrate: 3836 kb/s
Stream #0:0(und): Video: h264 (Baseline) (avc1 / 0x31637661), yuv420p, 640x480, 3695 kb/s, 30.02 fps, 30 tbr, 600 tbn, 1200 tbc
Metadata:
  rotate          : 90
  creation_time   : 2010-01-17 21:52:33
  handler_name    : Core Media Data Handler
Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 63 kb/s
Metadata:
  creation_time   : 2010-01-17 21:52:33
  handler_name    : Core Media Data Handler 
```

管理声音的音频类包含一个编解码器检测器，它表示为两个输入找到了编解码器 CODEC_ID_AAC：

```
audioStreamBasicDesc_.mFormatFlags = 0;
switch (_audioCodecContext->codec_id) {
    case CODEC_ID_MP3:
         audioStreamBasicDesc_.mFormatID = kAudioFormatMPEGLayer3;
        break;
    case CODEC_ID_AAC:
         audioStreamBasicDesc_.mFormatID = kAudioFormatMPEG4AAC;
         audioStreamBasicDesc_.mFormatFlags = kMPEG4Object_AAC_Main;
        NSLog(@"audio format aac %s (%d) is  supported",  _audioCodecContext->codec_name, _audioCodecContext->codec_id);
        break;
} 
```

我看到数据进入缓冲区，但我什么也没听到。可能是 audioStreamBasicDesc_ 设置错误，但我找不到。

它可能不是同一个 AAC 编解码器吗？

有人遇到过同样的问题吗？

欢迎任何帮助，我从几天以来就一直在解决这个问题。

编辑：我发现了一个以前没有的错误，我不知道如何解决它。如果我将 audioStreamBasicDesc.mFramesPerPacket 更改为 0 或除以 2，则错误消息消失。

```
AudioConverterNew returned 'fmt?'
Prime failed ('fmt?'); will stop (72000/0 frames) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:48:15.487

您可以尝试在此处强制使用任意大的缓冲区大小，例如 480000

```
status = AudioQueueAllocateBufferWithPacketDescriptions(audioQueue_, 
    audioStreamBasicDesc_.mSampleRate * kAudioBufferSeconds / 8, 
    _audioCodecContext->sample_rate * kAudioBufferSeconds / 
      _audioCodecContext->frame_size + 1, 
    &audioQueueBuffer_[i]); 
```

# servicestack - 由于代理身份验证，DownloadURL 失败

> ID：14215061
> 
> 赞同：1
> 
> 时间：2013-01-08T12:33:31.037
> 
> 标签：servicestack

我正在使用 servicestack 设置 facebook 身份验证，并且一直在获取返回类型 #f=Unknown，我已将其追踪到来自身份验证块：

```
try
{
    var contents = accessTokenUrl.DownloadUrl();
    var authInfo = HttpUtility.ParseQueryString(contents);
    tokens.AccessTokenSecret = authInfo["access_token"];
    session.IsAuthenticated = true;
    authService.SaveSession(session, SessionExpiry);
    OnAuthenticated(authService, session, tokens, authInfo.ToDictionary());

    //Haz access!
    return authService.Redirect(session.ReferrerUrl.AddHashParam("s", "1"));
}
catch (WebException we)
{
    var statusCode = ((HttpWebResponse)we.Response).StatusCode;
    if (statusCode == HttpStatusCode.BadRequest)
    {
        return authService.Redirect(session.ReferrerUrl.AddHashParam("f", "AccessTokenFailed"));
     }
 }

//Shouldn't get here
return authService.Redirect(session.ReferrerUrl.AddHashParam("f", "Unknown")); 
```

它通过的原因是 catch 检查响应状态代码。在我的场景中，我收到 407 Proxy Authentication Required。

我已经进一步追踪到这条线：

```
var contents = accessTokenUrl.DownloadUrl(); 
```

任何人都可以帮助我如何实施所需的代理身份验证吗？

对于信息，我的应用程序在 Windows 环境中运行，它以 Windows 身份验证用户身份运行，因此有权访问代理服务器，我只需要告诉代码使用此 - 或任何 - 凭据。

感谢期待

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:05:42.527

您可以通过在 Web.Config 中设置来尝试[为 .NET 应用程序设置默认代理：](http://msdn.microsoft.com/en-us/library/kd3cf2ex.aspx)`<defaultProxy/>`

```
<configuration>
  <system.net>
    <defaultProxy>
      <proxy
        usesystemdefaults="true"
        proxyaddress="http://192.168.1.10:3128"
        bypassonlocal="true"
      />
      <bypasslist
        <add address="[a-z]+\.contoso\.com" />
      </bypasslist>
    </defaultProxy>
  </system.net>
</configuration> 
```

# javascript - JavaScript中可以将数组添加到对象吗？

> ID：14215062
> 
> 赞同：2
> 
> 时间：2013-01-08T12:33:31.630
> 
> 标签：javascript

可以将数组添加到对象吗？我已经定义了 2 个数组 itemId 和 itemName 并在其中推送了一些值。这两个数组可以被推送或成为 ItemCatalog 对象的一部分吗？

```
var ItemCatalog = new Object();

itemId = new Array();
itemName = new Array()

/*
var itemId = new Array();
var itemName = new Array();
*/
var currentItemIndex = 5;

itemId.push(1);
itemId.push(2);
itemId.push(3);
itemId.push(4);
itemId.push(5);
itemId.push(6);
itemId.push(7);
itemId.push(8);
itemId.push(9);
itemId.push(10);

itemName.push("A");
itemName.push("B");
itemName.push("C");
itemName.push("D");
itemName.push("E");
itemName.push("F");
itemName.push("G");
itemName.push("H");
itemName.push("I");
itemName.push("J"); 
```

谢谢， 安基特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:36:37.313

是的你可以：

```
var itemId = [1,2,3,4,5,6,7,8,9,10];
var itemName = ["A","B","C","D","E","F","G","H","I","J"];

var currentItemIndex = 5;

var ItemCatalog = {
    itemIds: itemId,
    itemNames: itemName
}; 
```

将变量分配给对象的另一种方法是：

```
var ItemCatalog = {}
// or like you did: var ItemCatalog = new Object(); That's the same as = {}

// Then:
ItemCatalog.itemIds = itemId;
// Or
ItemCatalog['itemNames'] = itemName; 
```

**[请注意我如何用对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Object_literals)/[数组](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Array_literals)文字**替换您的对象/数组初始化。两者都有效，但我更喜欢文字，因为它们更短。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:35:52.760

是的

```
var ItemCatalog = {
    itemId : itemId,
    itemName : itemName 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:35:54.913

您可以将数组分配为对象属性的值，如下所示：

```
// setup arrays here...

var itemCatalog = {
    itemId: itemId;
    itemNames: itemName
}; 
```

但是，如果`id`和`name`相关联，为什么不将它们添加到单个数组中？像这样的东西：

```
items = [];
items.push({ id: 1, name: 'A' });
items.push({ id: 2, name: 'B' });

console.log(items[0].name); // = A 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:38:10.177

是的。继续您发布的代码：

```
ItemCatalog.itemId = itemId;
ItemCatalog.itemName = itemName; 
```

但是，您可以在创建数组的同时执行此操作，这样可以避免使用不必要的变量使当前范围变得混乱：

```
var ItemCatalog = new Object();

ItemCatalog.itemId = new Array();
ItemCatalog.itemName = new Array();

ItemCatalog.itemId.push(1);
...

ItemCatalog.itemName.push("A");
... 
```

另请注意，按照 JavaScript 的约定，以大写字母开头的名称用于构造函数而不是对象。（[至少根据道格拉斯·克罗克福德](http://javascript.crockford.com/code.html#names)的说法。）

所以这会更惯用：

```
var itemCatalog = new Object(); 
```

# wpf - WPF ToolTipService.BetweenShowDelay 不起作用

> ID：14215074
> 
> 赞同：7
> 
> 时间：2013-01-08T12:34:09.733
> 
> 标签：wpf, tooltip

我注意到 ToolTipServices.BetweenShowDelay 没有按预期工作。另外，我发现了同样的[问题](http://connect.microsoft.com/VisualStudio/feedback/details/623656/tooltipservices-betweenshowdelay-doesnt-work#details)

STR： 1\. 在VS2010中创建一个WPF应用程序。2\. 在 WPF 窗口中添加两个按钮，它们是 3\. 运行应用程序，将鼠标从一个按钮移动到另一个按钮。

实际结果：当我将鼠标从一个按钮移动到另一个按钮时，工具提示会立即显示。

预期结果：工具提示应显示初始延迟。

# php - 使用动态href时如何从url中删除参数？

> ID：14215075
> 
> 赞同：0
> 
> 时间：2013-01-08T12:34:08.527
> 
> 标签：php, .htaccess, http

使用传递参数

```
$n=isset($_GET['page']) ? (int)$_GET['page'] : 0;

echo('<a href="?page='.($n+1).'">Next</a>'); 
```

因此网址是：

```
home.php?page=2 
```

如何从 url 或 make 中删除参数和 *.php 文件名

```
"home/browse/" ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:46:03.660

你为什么不使用重写引擎来避免它通过 .htaccess

```
<IfModule mod_rewrite.c>
Options +FollowSymLinks

#enter code here
IndexIgnore */*

# Turn on RewriteEngine
RewriteEngine On

#  Rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:39:32.237

在根目录下添加 .htaccess ：

> 重写引擎开启
> 
> RewriteCond %{REQUEST_FILENAME} !-d
> 
> RewriteCond %{REQUEST_FILENAME} !-f
> 
> RewriteCond %{REQUEST_FILENAME} !-l
> 
> RewriteRule ^(.+)$ index.php?MyVar=$1 [QSA,L]

例如，您可以`$_GET['MyVar']`在您的代码中使用：

```
$MyVar = isset($_GET['MyVar'])? $_GET['MyVar'] : 'Nop' ;
$Arr= explode('/',$MyVar)  ; 
```

之后比你在数组中的请求数组上。

# javascript - 带有 history.pushState 和 popstate 的 Ajax - 当 popstate 状态属性为空时我该怎么办？

> ID：14215079
> 
> 赞同：22
> 
> 时间：2013-01-08T12:34:35.483
> 
> 标签：javascript, jquery, html, browser-history, html5-history

我正在尝试使用 ajax 加载内容的 HTML5 历史 API。

我有一堆通过相对链接连接的测试页面。我有这个 JS，它处理对这些链接的点击。单击链接时，处理程序获取其 href 属性并将其传递给 ajaxLoadPage()，后者将来自请求页面的内容加载到当前页面的内容区域。（如果您正常请求，我的 PHP 页面设置为返回完整的 HTML 页面，但如果 ?fragment=true 附加到请求的 URL，则仅返回一部分内容。）

然后我的点击处理程序调用 history.pushState() 在地址栏中显示 URL 并将其添加到浏览器历史记录中。

```
$(document).ready(function(){

    var content = $('#content');

    var ajaxLoadPage = function (url) {
        console.log('Loading ' + url + ' fragment');
        content.load(url + '?fragment=true');
    }

    // Handle click event of all links with href not starting with http, https or #
    $('a').not('[href^=http], [href^=https], [href^=#]').on('click', function(e){

        e.preventDefault();
        var href = $(this).attr('href');
        ajaxLoadPage(href);
        history.pushState({page:href}, null, href);

    });

    // This mostly works - only problem is when popstate happens and state is null
    // e.g. when we try to go back to the initial page we loaded normally
    $(window).bind('popstate', function(event){
        console.log('Popstate');
        var state = event.originalEvent.state;
        console.log(state);
        if (state !== null) {
            if (state.page !== undefined) {
                ajaxLoadPage(state.page);
            }
        }
    });

}); 
```

当您使用 pushState 将 URL 添加到历史记录时，您还需要为 popstate 事件包含一个事件处理程序，以处理对后退或前进按钮的单击。（如果您不这样做，单击返回会在地址栏中显示您推送到历史记录的 URL，但页面未更新。）因此，我的 popstate 处理程序获取保存在我创建的每个条目的 state 属性中的 URL，并将其传递给 ajaxLoadPage 以加载适当的内容。

这适用于我的点击处理程序添加到历史记录的页面。但是当我“正常”请求浏览器添加到历史记录的页面时会发生什么？假设我正常登陆我的第一页，然后通过执行 ajax 加载的点击浏览我的网站 - 如果我然后尝试通过历史返回到该第一页，最后一次点击显示第一页的 URL，但没有'不在浏览器中加载页面。这是为什么？

我可以看出这与最后一个 popstate 事件的 state 属性有关。该事件的 state 属性为 null，因为只有通过 pushState() 或 replaceState() 添加到历史记录的条目才能为其赋值。但是我第一次加载页面是一个“正常”请求——为什么浏览器不只是退后一步并正常加载初始 URL？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-21T20:19:46.457

这是一个较老的问题，但是对于这个问题，使用本机 javascript 有一个更简单的答案。

对于初始状态，您不应该使用`history.pushState`，而是`history.replaceState`.

两种方法的所有参数都是相同的，唯一的区别是`pushState`创建一个新的历史记录，因此是问题的根源。`replaceState`仅替换该历史记录的状态并将按预期运行，即返回初始起始页面。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-29T12:37:58.207

我遇到了与原始问题相同的问题。这条线

```
var initialPop = !popped && location.href == initialURL; 
```

应该改为

```
var initialPop = !popped; 
```

这足以捕获初始流行音乐。那么您就不需要将原始页面添加到`pushState`. 即删除以下内容：

```
var home = 'index.html';
history.pushState({page:home}, null, home); 
```

基于 AJAX 选项卡（并使用 Mootools）的最终代码：

```
if ( this.supports_history_api() ) {
    var popped = ('state' in window.history && window.history.state !== null)
    ,   changeTabBack = false;

    window.addEvent('myShowTabEvent', function ( url ) {
       if ( url && !changingTabBack )
           setLocation(url);
       else
           changingTabBack = false;
       //Make sure you do not add to the pushState after clicking the back button
    });

   window.addEventListener("popstate", function(e) {
       var initialPop = !popped;
       popped = true;
       if ( initialPop )
           return;

       var tabLink = $$('a[href="' + location.pathname + '"][data-toggle*=tab]')[0];
       if ( tabLink ) {
           changingTabBack = true;
           tabLink.tab('show');
       }
   });
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-09T12:15:49.757

我仍然不明白为什么后退按钮会这样 - 我原以为浏览器会很乐意退回到由正常请求创建的条目。也许当您使用 pushState 插入其他条目时，历史记录会停止以正常方式运行。但我找到了一种让我的代码更好地工作的方法。您不能总是依赖于包含要退回的 URL 的 state 属性。但是回溯历史记录会改变地址栏中的 URL，因此根据 window.location 加载内容可能更可靠。按照这个[很好的示例](http://diveintohtml5.info/history.html)，我更改了我的 popstate 处理程序，以便它根据地址栏中的 URL 加载内容，而不是在 state 属性中查找 URL。

您必须注意的一件事是，某些浏览器（如 Chrome）在您最初点击页面时会触发 popstate 事件。发生这种情况时，您可能会不必要地重新加载初始页面的内容。[所以我从优秀的pjax](http://pjax.heroku.com/)中添加了一些代码来忽略最初的弹出。

```
$(document).ready(function(){

    // Used to detect initial (useless) popstate.
    // If history.state exists, pushState() has created the current entry so we can
    // assume browser isn't going to fire initial popstate
    var popped = ('state' in window.history && window.history.state !== null), initialURL = location.href;

    var content = $('#content');

    var ajaxLoadPage = function (url) {

        console.log('Loading ' + url + ' fragment');
        content.load(url + '?fragment=true');

    }

    // Handle click event of all links with href not starting with http, https or #
    $('a').not('[href^=http], [href^=https], [href^=#]').on('click', function(e){

        e.preventDefault();
        var href = $(this).attr('href');
        ajaxLoadPage(href);
        history.pushState({page:href}, null, href);

    });

    $(window).bind('popstate', function(event){

        // Ignore inital popstate that some browsers fire on page load
        var initialPop = !popped && location.href == initialURL;
        popped = true;
        if (initialPop) return;

        console.log('Popstate');

        // By the time popstate has fired, location.pathname has been changed
        ajaxLoadPage(location.pathname);

    });

}); 
```

如果浏览器支持历史 API，您可以对此 JS 进行的一项改进是仅附加单击事件处理程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T21:02:45.323

实际上，我今天发现自己也有类似的需求，并且发现您提供的代码非常有用。我遇到了与您相同的问题，并且我相信您所缺少的只是将索引文件或主页以与所有后续页面相同的方式推送到历史记录。

这是我为解决此问题所做的一个示例（不确定这是否是正确的答案，但它很简单并且有效！）：

```
var home = 'index.html';
history.pushState({page:home}, null, home); 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-17T14:12:47.887

我意识到这是一个老问题，但是当尝试像这样轻松管理状态时，最好采用以下方法：

```
$(window).on('popstate',function(e){
    var state = e.originalEvent.state;
    if(state != null){
        if(state.hasOwnProperty('window')){
            //callback on window
            window[state.window].call(window,state);
        }
    }
}); 
```

这样，您可以在添加到历史时在状态对象上指定一个可选的回调函数，然后在`popstate`触发时，会以状态对象作为参数调用该函数。

```
function pushState(title,url,callback)
{
    var state = {
        Url : url,
        Title : title,
    };
    if(window[callback] && typeof window[callback] === 'function')
    {
        state.callback = callback;
    }
    history.pushState(state,state.Title,state.Url);
} 
```

您可以轻松扩展它以满足您的需求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-06T19:50:41.990

**最后**说：

> 我原以为浏览器会很乐意退回到由正常请求创建的条目。

[我在这里](https://stackoverflow.com/a/11844412/1830051)找到了对该奇怪浏览器行为的解释。解释是

> **您应该在您的网站第一次加载时保存状态**，之后每次更改状态时

我对此进行了测试 - 它有效。

这意味着无需*根据 window.location 加载您的内容*。

我希望我不会误导。

# wpf - 当图像超出网格时获取图像的缩放因子

> ID：14215080
> 
> 赞同：1
> 
> 时间：2013-01-08T12:34:53.590
> 
> 标签：wpf, image, grid, scale, out

我有一个包含图像的网格。

```
<Grid Name="grid1">
    <Image Name="image1" Stretch="None" Source="C:\Users\User\Desktop\image.jpg"/>
</Grid> 
```

如果图像的大小大于网格的大小，我想通过渲染变换手动缩放它以适应网格。我不想使用 Stretch="Fill" 因为我需要比例因子。有什么方法可以检测到 UIElement 不在视野范围内的情况？我需要你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:38:04.747

您可以简单地将`Stretch`属性设置为`Uniform`（或可能），并在需要时从Image 和ImageSource`Fill`的 中计算比例因子。下面的示例在 SizeChanged 处理程序中进行计算，但它可以在其他任何地方。`ActualWidth``Width`

```
<Image Name="image1" Stretch="Uniform" Source="C:\Users\User\Desktop\image.jpg"
       SizeChanged="ImageSizeChanged"/> 
```

计算如下所示：

```
private void ImageSizeChanged(object sender, SizeChangedEventArgs e)
{
    var scale = image1.ActualWidth / image1.Source.Width;
} 
```

与属性`Uniform`的默认值一样`Stretch`，您根本不必设置它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:49:52.067

我不确定当 WPF 可以为您完成时，您为什么要手动重新缩放图像...

不要将图像直接放入网格中，而是使用**[Viewbox](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.aspx)**控件：

```
<Grid Name="grid1">
    <Viewbox>
        <Image Name="image1" Stretch="None" Source="C:\Users\User\Desktop\image.jpg"/>
    </Viewbox>
</Grid> 
```

Viewbox 将自动缩放图片以适合网格内...

# php - Zend 框架入门

> ID：14215084
> 
> 赞同：0
> 
> 时间：2013-01-08T12:35:08.683
> 
> 标签：php, zend-framework2

我正在尝试从 zend 开始。我遵循了本指南。我正在使用 wamp。 [http://zf2.readthedocs.org/en/latest/user-guide/skeleton-application.html](http://zf2.readthedocs.org/en/latest/user-guide/skeleton-application.html) 它说将安装所有依赖项，是的，我在安装后在供应商文件夹中看到了框架。我按照他告诉我的方式配置了虚拟主机。但我就是无法开始。它给了我内部服务器错误。尝试使用 localhost/zf2-tutorial 访问它。但我没有看到任何公用文件夹。我只是不知道我在哪里做错了。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:00:22.790

> C：/wamp/www/zf2-tutorial/public/.htaccess：无效命令“RewriteEngine”，可能拼写错误或由服务器配置中未包含的模块定义

（见问题的评论）

下次，请用谷歌搜索错误消息；）但是，它告诉您，`mod_rewrite`要么未安装，要么已启用。在 Linux 上就像

```
sudo a2enmod rewrite 
```

并重新启动服务器。我知道，您使用的是 Windows，但我必须说我不知道​​ ;) 我担心当您环顾四周时，您会发现很多关于这个问题的信息，因为这是一个很常见的问题。

# javascript - Richfaces 4.x 日历组件 ondateselected 事件

> ID：14215085
> 
> 赞同：0
> 
> 时间：2013-01-08T12:35:12.620
> 
> 标签：javascript, jsf-2, calendar, richfaces

在我使用 RichFaces 4.0 的应用程序之一中，我使用了日历控件。我想读取选定日期的值并在 javascript 中使用它（例如向用户提醒选定的值）。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:42:19.100

您至少有 2 个通过 Richfaces JavaScript API 的选项。以下 EL 将返回提供的客户端 id ( `findComponent`) 的组件的值是一个 RF 函数

```
 #{rich:findComponent('input').value} 
```

或者

```
 #{rich:component('input component').value} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:32:43.257

您可以添加一个 p:ajax 请求

```
 onstart="alert('sometext'#yourbean.datevalue);" 
```

或者您可以添加 a`<p:dialog/>`和 a `<p:ajax/>`。并在您的事件被触发时显示对话框。

# jquery - 如何让 jQuery 单独处理元素？

> ID：14215087
> 
> 赞同：2
> 
> 时间：2013-01-08T12:35:17.060
> 
> 标签：jquery

在下面的代码中，我创建了十个元素并将它们全部传递给 jQuery 代码以获取功能。但是，当我单击一个时，所有这些都会触发 click 事件。如何更改此代码，以便当我单击其中一个时，它只会触发该元素中的事件？

**html/php:**

```
<?php
    for ($x = 0; $x < 10; $x++) {
        $r .= '<div class="testItem"><span class="title">title1</span><span class="message"/></div>';
    }
?>  
<script type="text/javascript">
    $(function() {
        TESTITEM.initialize($('.testItem'));
    });
</script> 
```

**javascript:**

```
var TESTITEM = TESTITEM || {};

TESTITEM.initialize = function(elemTest) {
    var elemTitle;

    this.defineVariables = function() {
        elemTitle = elemTest.find('.title');
        elemMessage = elemTest.find('.message');
    }

    this.functionalizeElements = function() {
        elemTitle.click(function(e) {
           elemMessage.html('done'); 
        });
    }

    this.decorateElements = function() {
        elemTitle.css('color','brown');
    }

    this.defineVariables();
    this.decorateElements();
    this.functionalizeElements();
} 
```

## 附录：

当我将其更改为此并单击任何元素时，只有最后一个元素显示文本：

```
$('.testItem').each(function(){
    TESTITEM.initialize($(this));
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:39:11.847

您必须使用 jquery 的每个功能，并在其中使用**$(this)**

```
$('.testItem').each(function(){
   $(this).find('.title').click(function(e) {
       $(this).parents('.testItem').find('.message').html('done');
        $(this).css('color','brown');
    });
}) 
```

**$('.testItem').each**将获得所有具有**testItem**类的选择器

和

使用**$(this)**您可以单独选择选择器，因此操作不会影响到具有类**testItem的其他元素**

@@@@@ [见例子](http://fiddle.jshell.net/jXwaq/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:40:53.130

已经提供的答案的替代方法是将解决方案推迟`elemMessage`到点击事件本身；在点击处理程序中，`this`将被`elemTitle`点击。

```
this.functionalizeElements = function() {
    elemTitle.click(function(e) {
       $(this).closest('.testItem').find('.message').html('done'); 
    });
} 
```

这是因为`elemTitle`和`elemMessage`都是页面上所有实例的 jQuery`.message`对象`.title`；调用`elemMessage.html('done')`click 处理程序（如您所见）设置所有这些元素的 HTML。

# java - 找不到符号ois

> ID：14215089
> 
> 赞同：0
> 
> 时间：2013-01-08T12:35:33.363
> 
> 标签：java, serialization, objectoutputstream, objectinputstream

我正在编写简单的客户端 - 服务器应用程序，但我有一个愚蠢的问题（它简化了示例（当我不使用 java 序列化时一切都很好））：

```
 ServerSocket serversocket=null;
    Socket socket=null;    
    String slowo=null;

    try {
        serversocket=new ServerSocket(8877);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        socket=serversocket.accept();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        ObjectOutputStream oos=new ObjectOutputStream(socket.getOutputStream());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    slowo=(String)ois.readObject(); 
```

我的编译器显示：

```
Serwer.java:51: cannot find symbol
symbol  : variable ois
location: class Serwer
slowo=(String)ois.readObject();
                      ^
1 error 
```

任何人都可以帮忙吗？

我还有一个问题。为什么这个程序不发送消息？

服务器.java：

公共类服务器{

```
public static void main(String[] args) {
    ServerSocket serversocket=null;
    Socket socket=null;
    InputStream we=null;
    OutputStream wy=null;
    BufferedReader odczyt=null;
    BufferedReader odczytWe=null;
    DataOutputStream zapis=null;
    String slowo=null;
    String tekst=null;

    ObjectInputStream ois=null;
    ObjectOutputStream oos=null;

    try {
        serversocket=new ServerSocket(8877);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        socket=serversocket.accept();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        ois = new ObjectInputStream(socket.getInputStream());
        } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        oos=new ObjectOutputStream(socket.getOutputStream());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    //slowo=(String)ois.readObject();

    while(true) {
        try {
            slowo=(String) ois.readObject();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        if(slowo==null || slowo.equals("end")) {
            try {
                socket.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.exit(0);
        }
        else if(slowo!=null) {
            System.out.println(slowo);
        }

            odczyt=new BufferedReader(new InputStreamReader(System.in));
            try {
                tekst=odczyt.readLine();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            try {
                oos.writeObject(tekst);
                oos.flush();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            }

} 
```

}

客户端.java：

```
public class Klient {
public static void main(String[] args) {

Socket socket=null;
InputStream we=null;
OutputStream wy=null;
BufferedReader odczyt=null;
BufferedReader odczytWe=null;
DataOutputStream zapis=null;
String slowo=null;
String tekst=null;
ObjectInputStream ois=null;
ObjectOutputStream  oos=null;

try {
    socket=new Socket("localhost", 8877);
} catch (UnknownHostException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
try {
    ois=new ObjectInputStream(socket.getInputStream());
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
try {
    oos=new ObjectOutputStream(socket.getOutputStream());
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

while(true) {
    try {
        slowo=(String) ois.readObject();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    if(slowo==null || slowo.equals("end")) {
        try {
            socket.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        System.exit(0);
    }
    else if(slowo!=null) {
        System.out.println(slowo);
    }

        odczyt=new BufferedReader(new InputStreamReader(System.in));
        try {
            tekst=odczyt.readLine();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        try {
            oos.writeObject(tekst);
            oos.flush();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

}

} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T12:37:08.157

当您到达第 51 行时，它已超出范围，因为您在前一次尝试中声明了它。

将声明移到两者之外，或者以不同的方式编写代码。

我认为这种风格杂乱无章，难以阅读。我会这样写：

```
ServerSocket serversocket=null;
String slowo="";
try {
    serversocket=new ServerSocket(8877);
    Socket socket = serversocket.accept();
    ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());
    ObjectOutputStream oos=new ObjectOutputStream(socket.getOutputStream());
    slowo=(String)ois.readObject();
} catch (Exception e) {
    e.printStackTrace();
} finally {
    close(serversocket);
} 
```

不要让糟糕的 IDE 为您编写糟糕的代码。

您应该在 finally 块中关闭您的套接字。

# php - PHP - 你如何随机化电话号码的最后 4 位数字

> ID：14215093
> 
> 赞同：-1
> 
> 时间：2013-01-08T12:35:49.130
> 
> 标签：php, random, numbers, phone-number

您如何随机化电话号码的最后 4 位数字？

鉴于：

```
$phone = '000-000-0000'; 
```

结果将是：

```
$phone = '000-000-1943'; 
```

其中**1943**是一个随机数

这可以使用 preg 之类的单行命令来完成吗？

或其他一些单行命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:39:02.907

[`substr`](http://php.net/manual/en/function.substr.php)适合从字符串的开头/结尾提取*n 个*字符；[`rand`](http://php.net/manual/en/function.rand.php)可用于生成随机数，[`sprintf`](http://php.net/manual/en/function.sprintf.php)可用于格式化数字。将所有三个功能放在一起：

```
$phone = '000-000-0000';
$phone = sprintf('%s%04d', substr($phone, 0, -4), rand(0, 9999));
echo $phone;
// 000-000-2317 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T12:38:13.247

```
$phone = preg_replace_callback('/\d{4}$/', function($m) {
    return str_pad(mt_rand(0, 9999), 4, '0');
}, $phone); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T12:39:59.977

您可以将[rand](http://php.net/manual/en/function.rand.php)方法与[str_pad](http://php.net/manual/en/function.str-pad.php)方法一起使用。

```
$phone = '000-000-'.str_pad(rand(0,9999), 4, '0'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:40:52.770

```
$phone = '000-000-0000';
$phone=explode('-',$phone);
$phone[2]=str_pad(rand(0,9999), 4, 0);
$phone=implode('-', $phone); 
```

# jsf - 未使用 URL 参数时在 POST 上重新创建视图范围的 bean

> ID：14215098
> 
> 赞同：6
> 
> 时间：2013-01-08T12:36:00.943
> 
> 标签：jsf, viewparams

我有一个**视图范围的**JSF 托管 bean，它支持一个**xhtml视图，我使用****f:viewParam**从 URL 读取一个参数。

视图向用户呈现一个表单。但是，当用户通过按下**p:commandButton**提交表单时，似乎重新创建了视图范围的 bean（我添加了一个**@PostConstruct**注释来验证这一点），因此不记得从**f:viewParam**读取的实例变量（下面代码中的*invId*）。

我最初使用包含*URL*参数的*GET*导航到视图，但是当用户按下**p:commandButton**时发送的*POST*消息不包含*URL*参数。所以我在想，当 JSF 运行时在*POST*上看不到 URL 参数时，它认为这是一个不同的视图，并且正在重新创建 JSF 管理的 bean。当我将视图范围更改为**会话范围**时，代码有效。

 *******这是代码：

## 看法

```
<f:metadata>
    <f:viewParam name="invId" value="#{registerBean.invId}"/>
</f:metadata>
<h:form id="registrationForm">
     ....
    <p:commandButton value="register" action="#{registerBean.register}"
                     icon="ui-icon ui-icon-newwin" ajax="false"/>
</h:form> 
```

## 后备豆

```
@ManagedBean                                      
@ViewScoped
public class RegisterBean implements Serializable {
    @ManagedProperty(value="#{invId}")
    private String invId;
    ... 
```

# 更新

事实证明，这根本与 URL 参数无关。按照下面的*BalusC*建议，我删除了我的视图使用的**c:when**标记（依赖**渲染**属性而不是相同的效果），现在不再重新创建视图范围的 bean，并且正确保留了**invId字段。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T14:21:09.827

该问题在到目前为止发布的代码中不可见，但对于 JSF 2.0/2.1 而言，这是一个已知问题，即当视图范围 bean 的一个属性绑定到标记处理程序（如 JSTL`<c:if>`或 Facelets`<ui:include>`或查看 JSF 组件的构建时间属性，例如`id`和`binding`，同时启用部分状态保存（默认情况下）。

背景解释是这些属性中的任何 EL 表达式都是在构建和恢复视图期间执行的。由于视图范围 bean 存储在视图中，因此只有*在*恢复视图后才可用，因此这样的 EL 表达式评估将导致创建一个全新且单独的视图范围 bean。这基本上是一个鸡蛋问题。它在即将到来的 JSF 2.2 中得到修复。

基本上有3种解决方案：

1.  相应地更改视图，以便仅在视图渲染期间评估这些 EL 表达式。例如替换`<c:if>`/ `<c:choose>`。`rendered`
2.  或者将这些属性绑定到请求范围 bean（设计注意事项：您可以将视图范围 bean 作为请求范围 bean 的托管属性注入）。
3.  如果需要，仅对特定视图关闭部分状态保存。

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)
*   [`@ViewScoped`标记处理程序失败](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ViewScopedFailsInTagHandlers)*******

# apache-flex - Flex 4 新状态格式

> ID：14215099
> 
> 赞同：1
> 
> 时间：2013-01-08T12:36:04.763
> 
> 标签：apache-flex, flex4, flex3, flash-builder

有人能解释一下新状态在 flex 4 中是如何工作的吗？我从 flex 3 迁移到 flex 4 时，我在状态代码中遇到了错误：

```
<s:states>

        <s:State name="login"/>
        <mx:RemoveChild target="{viewStack}" />
        <mx:RemoveChild target="{header}" />
        <mx:RemoveChild target="{footer}" />
        <mx:SetStyle target="{login}" name="verticalAlign" value="middle" />

        <s:State name="menu"/>
        <mx:RemoveChild target="{login}" />
        <mx:AddChild relativeTo="{null}" >
            <search:Drawer title="{resourceManager.getString('locale','mySearch')}" 
                           dockSide="left" 
                           backgroundAlpha="0.9" 
                           backgroundColor="#ccccff">
                <search:SearchContent />
            </search:Drawer>
        </mx:AddChild>

    </s:states> 
```

如果您需要“目标”代码，请在此处说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:47:16.247

您显示的代码有点太短，无法为您提供确切的代码，但它应该看起来像这样：

```
<s:states>
    <s:State name="login"/>
    <s:State name="menu"/>
</s:states>

<mx:ViewStack id="viewStack" excludFrom="login" 
              paddingTop="15" width="100%" height="100%"/>

<s:HGroup id="header" excludeFrom="login" width="100%"/>
<s:HGroup id="footer" excludeFrom="login" width="100%" verticalAlign="bottom"/>

<mx:Box id="login" includeIn="login" width="100%" height="100%"
        horizontalAlign="center" verticalAlign="middle"/>

<search:Drawer includeIn="menu" ... /> 
```

基本上，您使用`includeIn`and`excludeFrom`特殊属性而不是旧的`RemoveChild`and`AddChild`标记。请注意，由于只有 2 个状态，`includeIn="menu"`并且`excludeFrom="login"`具有完全相同的效果。
还可以根据当前状态设置属性，例如：

```
<v:MyComp left.login="0" left.menu="25"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:48:33.223

视图状态标签应该只包含如下状态：

```
 <s:states> 
        <s:State name="State1"/> 
        <s:State name="State2"/> 
        <s:State name="State3"/> 
    </s:states> 
```

然后，使用点 (.) 运算符为组件定义特定于状态的属性值：

`propertyName.stateName`

例如：

```
<s:Button label="Play" label.State2="Stop" label.State3="Paused"/> 
```

[您可以在 Flex 4.6创建和应用视图状态](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf63611-7ffa.html)的 Adob​​e 帮助页面上阅读有关状态的更多信息

# php - 将数据库值插入表单字段

> ID：14215101
> 
> 赞同：1
> 
> 时间：2013-01-08T12:36:17.107
> 
> 标签：php, html, xml, joomla, joomla3.0

**问题：**如何将数据库表 (#__mytable) 中的值插入到Joomla 3.0 平台内的 XML 文件呈现的表单文本字段 (`motitle`和) 中？`modescription`

-

几天来，我一直在尝试解决这个“简单”的 Joomla！基于无证挑战。我遵循[了 Joomla! 的开发 MVC 指南](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Introduction)，阅读了他们大部分过时的文档并拆开了`com_content`组件，但仍然不知道如何填充我的字段。

我一直在玩`$this->form->bind($this->item);`。

下面我包含了一些代码来显示我正在使用的结构。请随时指出您在此过程中发现的任何问题。

**模型\表单\item.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<form>
    <fields name="groupOPTIONS">
        <fieldset name="Options">
            <field
                type="text"
                name="motitle"
                id="motitle"
                label="Title"
                description="MY TEXT FIELD DESCRIPTION"
                maxLength="255" />
            <field
                type="textarea"
                name="modescription"
                id="modescription"
                label="Description"
                description="MY TEXT FIELD DESCRIPTION"
                rows="15"
                cols="5"
                maxLength="255" />
        </fieldset>
    </fields>
</form> 
```

**模型\item.php**

```
jimport('joomla.application.component.modelitem');
class MagicObjectsModelItem extends JModelForm {

public function getForm($data = array(), $loadData = true) {
    // Get the form 'items'
    $form = $this->loadForm('com_magicobjects.item', 'item',
        array('control' => 'jform', 'load_data' => $loadData));

if (empty($form)) {
    return false;
}

            return $form;
}

protected function loadFormData() {
    // Check the session for previously entered form data.
    $data = JFactory::getApplication()->getUserState('com_magicobjects.item.edit.data', array());

    if (empty($data)) {
            $data = $this->getDBItem(1);
    }

    return $data;
}

public function getDBItem($pk) {
    //Obtain JDatabase static connection
    $oDb = JFactory::getDbo();
    $oQuery = $oDb->getQuery(true);
    $sValueToMatch = $pk;
    $oQuery
        ->select(array('mid', 'name', 'keyword', 'description'))
        ->from('#__mytable')
        ->where('mid = "' . $sValueToMatch . '"')
        ->order('mid ASC');

    $oDb->setQuery($oQuery);
    return $oDb->loadObjectList();
} 
```

**视图\项目\view.html.php**

```
jimport('joomla.application.component.view');

function display($tpl = null) {

    // Initialise variables.
    $this->form = $this->get('Form');
    $this->item = $this->get('Item');

//Display the view
    parent::display($tpl);
} 
```

**视图\项目\tmpl\default.php**

```
foreach ($this->form->getFieldset('Options') as $field) {
    echo $field->label;
    echo $field->input;
} 
```

通过对项目执行 print_r() 可以看到我有数据，但我需要将数据插入显示的字段中。

![数据在数组中可用，但在字段中不可用](../Images/5c930778a3567d57b991607c8d064922.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:32:48.047

如果这仍然是一个问题，因为表单定义正在定义一个`<fields />`组。

这意味着表单字段将按如下方式输出：

```
input type="text" name="[groupOPTIONS][motitle]" 
```

*根据你上面给出的例子*。如果您删除字段分组，它可能会起作用。这很烦人，因为某些 JForm 方法只适用于组......

如果您想保持字段分组（例如通过重载getItem），您可能需要更改将数据传递到表单的方式。

希望这是有道理的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T04:26:52.423

在 Joomla 3 中，该`JForm::bind()`方法似乎接受对象或关联数组作为参数。然后，所有对象/数组字段都存储在一个名为 的受保护`JRegistry`类型数据成员`JForm::$data`中。

当您尝试显示表单字段（通过调用`JForm::getInput()`）时，调用堆栈如下

```
JForm::getInput() -> JForm::getField() -> JForm::loadField() -> JForm::getValue() 
```

`JForm::getValue()`从（上述`JRegistry`）`JForm::$data`数据成员返回一个值。该`JForm::loadField()`方法还将默认值（由表单定义）传递给该`JForm::getValue()`方法，以防`JForm::$data`变量中的值不存在。

就在模型中执行此操作而言，您可能希望从数据库查询或表中生成一个对象或关联数组（确保字段名称与表单 xml 中定义的字段名称相对应），然后将其`JForm::bind()`作为参数传递给. 但是，如果您正在使用`JModelForm`，我认为您应该只覆盖`JModelForm::loadFormData()`以将对象/关联数组传递给加载的表单。

看 ：`libraries/joomla/form/form.php`

希望有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:50:04.567

而不是在你的函数中`$oDb->loadObjectList();`使用。`$oDb->loadAssoc();``getDBItem()`

检查这个 - [http://docs.joomla.org/Accessing_the_database_using_JDatabase/1.5](http://docs.joomla.org/Accessing_the_database_using_JDatabase/1.5)

还要检查这个 - [joomla loadformdata](https://stackoverflow.com/questions/12928475/joomla-loadformdata/12928984#12928984)

希望这会奏效。

# c# - 滚动条的自动滑动

> ID：14215109
> 
> 赞同：0
> 
> 时间：2013-01-08T12:36:48.500
> 
> 标签：c#, winforms, drawing, scrollbar

在我的 Winforms 应用程序中，我有一个用户控件，它充当“屏幕”来绘制各种 2D 形状。我已将其“AutoScroll”属性设置为 true，并且当您缩放屏幕（即用户控件）时滚动条工作正常现在，当我选择任何形状（如矩形或圆形等）并移动它以使其超出可见部分时屏幕，我希望相应的滚动条自动滑动，以便将该形状保持在屏幕的可见区域。我需要设置滚动条的任何其他属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:53:12.413

在此处查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.scrollablecontrol.autoscroll%28v=vs.100%29.aspx)`AutoScroll`，了解该属性的确切含义和作用。它只会使容器具有大于其可见边界的虚拟大小。它实际上并没有为你做滚动。

如果您希望控件在用户拖动形状时随用户“移动”，则您必须自己捕获该操作并手动滚动控件。我建议从 MouseDown 和 MouseMove 事件开始。您需要一些逻辑来确定何时需要滚动以及实际滚动多少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:54:40.577

我认为如果不创建自己的方法就不可能实现这一目标。

您可以使用以下方式设置滚动条位置：

```
this.VerticalScroll.Value = Y; 
```

然后你必须找出你的`Rectangle`via的位置：

```
Rectangle.Location.Y; 
```

所以这应该适用于您的垂直滚动条：

```
this.VerticalScroll.Value = Rectangle.Location.Y; 
```

水平：

```
this.HorizontalScroll.Value = Rectangle.Location.X; 
```

结合 MouseDown-Event 可以解决问题。

# c# - c#圆形展平数组

> ID：14215113
> 
> 赞同：2
> 
> 时间：2013-01-08T12:37:03.657
> 
> 标签：c#, arrays, flatten, circular-buffer

我正在尝试将 (x,y,z) 坐标的 3 维数组展平为展平数组。

所以[这里](https://stackoverflow.com/questions/7367770/how-to-flatten-or-index-3d-array-in-1d-array)基本上说解决方案是；

```
elements[x][y][z] = Tiles[x + y*WIDTH + Z*WIDTH*DEPTH] 
```

这对我来说都很好，除了上面那个在迭代时优先考虑 x 坐标。

问题是，当我迭代数组时，我主要线性访问 y 值。给出一个想法，我所有的迭代都像

```
 for (int x = -someXVal; x <=  someXVal; x++)
        {
            for (int z = -someZVal; z <= someZVal; z++)
            {
                for (int y = -someYVal; y < someYVal; y++ )
                { 
```

所以我想在展平列表中优先考虑 y 坐标，以便我的线性 y 坐标读/写性能更好。

我进一步发现了一些有趣的[阅读](http://blokworld.forumotion.co.uk/t6p30-lighting-technique)here，他基本上使用圆形扁平数组（是的，我还需要我的数组是圆形的）。

为了计算指向 x,y,z 坐标的指针，他使用以下函数；

```
Public Shared Function GetPTR(ByVal x As Integer, ByVal y As Integer, ByVal z As Integer) As Integer

    Dim bx, bz As Integer

    bx = x Mod BlockBuffWidth
    If bx < 0 Then
      bx += BlockBuffWidth
    End If
    bz = z Mod BlockBuffWidth
    If bz < 0 Then
      bz += BlockBuffWidth
    End If

    Return bx * BMX + bz * BMZ + y

  End Function 
```

我真的不确定他如何计算 BlockBuffWidth、BMX 和 BMZ。

以下代码是我想出的；

```
/// <summary>
/// Flatten offset x step to advance next block in x direction.
/// </summary>
public static readonly int XStep = CacheLenghtInBlocks*Chunk.HeightInBlocks;

/// <summary>
/// Flatten offset z step to advance next block in z direction.
/// </summary>
public static readonly int ZStep = Chunk.HeightInBlocks;

public static int BlockIndexByWorldPosition(int x, byte y, int z)
{
    var wrapX = x%CacheWidthInBlocks;
    if (wrapX < 0)
        wrapX += CacheWidthInBlocks;

    var wrapZ = z%CacheLenghtInBlocks;
    if (wrapZ < 0)
        wrapZ += CacheLenghtInBlocks;

    var flattenIndex = wrapX * XStep + wrapZ * ZStep + y;
    return flattenIndex;
} 
```

显然我的代码没有按预期工作。欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:14:08.783

所以：

```
elements[x][y][z] = Tiles[x + y*WIDTH + Z*WIDTH*DEPTH] 
```

对您来说没问题，但您想将`y`相同的值彼此相邻分组，`x`并且`z`：

```
elements[x][y][z] = Tiles[y + x*HEIGHT + Z*HEIGHT*DEPTH] 
```

在哪里`HEIGHT = max y + 1`

# apache - Apache > 设置服务器端包括 > OSX Snow Leopard > 仍然无法正常工作

> ID：14215116
> 
> 赞同：0
> 
> 时间：2013-01-08T12:37:07.310
> 
> 标签：apache, osx-snow-leopard, server-side-includes

我已经研究了大约 2 个多小时，其中包括 1 个多小时的准备报告（考虑到我 24 小时没有睡觉，我一定是个慢工：-P）

虚拟服务器端包括在 Dreamweaver 中的工作（图像渲染除外），但在我浏览网页时不起作用。

`<!--#include virtual="/partialHtml/businessResult.shtml" -->`

我意识到我已经覆盖了太多的配置设置（如果有更简单和更优雅的方式，也许只是使用一个`.htaccess`文件`~/Sites/mysite.com/`然后请评论）;-)

从顶部开始 (1)`sudo nano /etc/apache2/httpd.conf`

```
#
# Filters allow you to process content before it is sent to the client.
#
# To parse .shtml files for server-side includes (SSI):
# (You will also need to add "Includes" to the "Options" directive.)
#
AddType text/html .shtml
AddOutputFilter INCLUDES .shtml 
```

(2)`sudo nano /etc/apache2/extra/httpd-vhosts.conf`

```
<VirtualHost *:80>
  <Directory /Users/tidy/Sites/mysite.com>
    Options +FollowSymlinks +SymLinksIfOwnerMatch +Includes
    DirectoryIndex index.htm
    AllowOverride All
    AddType text/html .shtml
    AddOutputFilter INCLUDES .shtml
  </Directory>
  DocumentRoot /Users/tidy/Sites/mysite.com
  ServerName mysite.local
  ErrorLog "/Users/tidy/Sites/mysite.com/log/error_log"
  CustomLog "/Users/tidy/Sites/mysite.com/log/access_log" common
</VirtualHost> 
```

(3)`sudo nano /private/etc/apache2/users/tidy.conf`

```
<Directory "/Users/tidy/Sites/">
  Options +Indexes +MultiViews +FollowSymlinks +SymLinksIfOwnerMatch +Includes
  AllowOverride All
  Order allow,deny
  Allow from all
  AddType text/html .shtml
  AddOutputFilter INCLUDES .shtml
</Directory> 
```

(4)`sudo nano ~/Sites/mysite.com/.htaccess`

```
AddType text/html .shtml
AddHandler server-parsed .shtml
DirectoryIndex index.html index.htm
Options +Includes
XBitHack on 
```

我还尝试`XBitHack on`通过执行`chmod +x ~/Sites/mysite.com/partialHtml/businessResult.html`然后包含该文件来使用（`.html`如果您不想使用`.shtml`文件，显然它使文件服务器端包含高效）

显然，我正在做一个`sudo apachectl configtest`以确保一切正常。

我收到一个警告（我试图摆脱），但语法没问题。

```
httpd: Could not reliably determine the server's fully qualified domain name, using complexity.local for ServerName
Syntax OK 
```

然后一个`sudo apachectl restart`

这是我最近的活动`cat ~/Sites/mysite.com/log/access_log`

```
::1 - - [08/Jan/2013:12:11:05 +0000] "OPTIONS * HTTP/1.0" 200 -
::1 - - [08/Jan/2013:12:11:07 +0000] "OPTIONS * HTTP/1.0" 200 -
::1 - - [08/Jan/2013:12:11:08 +0000] "OPTIONS * HTTP/1.0" 200 -
::1 - - [08/Jan/2013:12:11:15 +0000] "OPTIONS * HTTP/1.0" 200 -
::1 - - [08/Jan/2013:12:11:16 +0000] "OPTIONS * HTTP/1.0" 200 -
::1 - - [08/Jan/2013:12:11:17 +0000] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [08/Jan/2013:12:12:03 +0000] "GET / HTTP/1.1" 200 3924
127.0.0.1 - - [08/Jan/2013:12:12:03 +0000] "GET /css/site.css HTTP/1.1" 200 3077
127.0.0.1 - - [08/Jan/2013:12:12:03 +0000] "GET /css/bootstrap.css HTTP/1.1" 200 124223
127.0.0.1 - - [08/Jan/2013:12:12:03 +0000] "GET /img/logo.png HTTP/1.1" 200 19217
127.0.0.1 - - [08/Jan/2013:12:12:04 +0000] "GET /img/searchFormGradient.gif HTTP/1.1" 200 501
127.0.0.1 - - [08/Jan/2013:12:12:04 +0000] "GET /img/glyphicons-halflings-white.png HTTP/1.1" 200 8777
127.0.0.1 - - [08/Jan/2013:12:12:04 +0000] "GET /img/headerGradient.png HTTP/1.1" 200 216
127.0.0.1 - - [08/Jan/2013:12:12:04 +0000] "GET /js/bootstrap.min.js HTTP/1.1" 200 31596
::1 - - [08/Jan/2013:12:12:14 +0000] "OPTIONS * HTTP/1.0" 200 -
127.0.0.1 - - [08/Jan/2013:12:12:18 +0000] "GET / HTTP/1.1" 304 -
127.0.0.1 - - [08/Jan/2013:12:12:18 +0000] "GET /css/bootstrap.css HTTP/1.1" 304 -
127.0.0.1 - - [08/Jan/2013:12:12:18 +0000] "GET /js/bootstrap.min.js HTTP/1.1" 304 -
127.0.0.1 - - [08/Jan/2013:12:12:18 +0000] "GET /img/logo.png HTTP/1.1" 304 -
127.0.0.1 - - [08/Jan/2013:12:12:18 +0000] "GET /css/site.css HTTP/1.1" 304 -
127.0.0.1 - - [08/Jan/2013:12:12:18 +0000] "GET /img/headerGradient.png HTTP/1.1" 304 -
127.0.0.1 - - [08/Jan/2013:12:12:18 +0000] "GET /img/glyphicons-halflings-white.png HTTP/1.1" 304 -
127.0.0.1 - - [08/Jan/2013:12:12:18 +0000] "GET /img/searchFormGradient.gif HTTP/1.1" 304 - 
```

该`HTTP/1.1 304`代码`HTTP Error 304 - Not modified`不是错误，它是从服务器到浏览器的信号，表明当前内容自上次请求以来没有更改。

从`GET`请求中可以看出，没有迹象表明`/partialHtml/businessResult.shtml`

这是我最近的活动`cat ~/Sites/mysite.com/log/error_log`

```
[Tue Jan 08 11:24:49 2013] [error] [client 127.0.0.1] File does not exist: /Users/tidy/Sites/mysite.com/favicon.ico 
```

毕竟......服务器端包含机制不起作用:-(

非常感谢任何帮助。

整齐的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:30:29.110

我想我有解决问题的办法。

我在 Windows 7 上使用服务器端包含时遇到了同样的问题，因为我有一种错误的印象，即**只有**包含的文件必须具有`.shtml`扩展名。

因为这条线： `<!--#include file="partialHtml/businessResult.shtml" -->`

在一个名为： `index.html`

服务器端包含模块未预处理文件。

在我更改`index.html`为`index.shtml`服务器端包含模块后，正确地预处理了所有内容。

TL;DR - 包含服务器端包含的文件必须具有 .shtml 扩展名。

# wix - 组合框更改值事件

> ID：14215124
> 
> 赞同：0
> 
> 时间：2013-01-08T12:37:50.680
> 
> 标签：wix, wix3.5

我有支持多个数据库的产品。在安装过程中，我想要一个包含它支持的所有数据库的组合框。还有一个文本框，用户可以在其中输入连接字符串。我想为每个受支持的数据库提供连接字符串模板，当组合框发生更改时，我想在文本框中显示与所选数据库相关的连接字符串模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:41:49.420

正如严所说，这是不可能在一个屏幕上做到的。但是，您可以在它自己的页面上有下拉菜单，然后在单击下一步后通过测试设置的属性来确定用户选择的内容，并使用正确的模板填充文本框。

# c# - 这种语法有效吗？

> ID：14215129
> 
> 赞同：-1
> 
> 时间：2013-01-08T12:23:48.683
> 
> 标签：c#, syntax

我有一个`C#`有两个构造函数的类

```
public class GObject {

    public GObject(){
        // The default constructor
    }

    public GObject(int xPos, int yPos){
        // Second constructor
    }

} 
```

编写这样的子类是否有效`Block`？

```
public class Block : GObject {

    // Sub class methods go here, no special constructor

} 
```

`Block`并用^(第二)个构造函数实例化？

```
Block myBlock = new Block(10, 15); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T12:38:04.910

由于您没有在 上定义两个参数的构造函数`Block`，因此您无法编写最后一行 - 它不会编译。

你可以有一个链式构造函数`Block`：

```
public Block(int xPos, int yPos) : base(xPos, yPos)
{} 
```

在这种情况下：

```
Block myBlock = new Block(10, 15); 
```

会工作得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:47:13.783

默认情况下，如果你不显式编写构造函数；编译器创建一个没有参数的默认构造函数。

在您的情况下，由于`Block`没有定义任何构造函数，因此只创建了无参数构造函数。因此，您不能`Block`使用两个参数创建对象。

# ruby-on-rails - 使用带有 Rspec (Rails) 的 Factory girl 时未创建测试数据库结构

> ID：14215136
> 
> 赞同：1
> 
> 时间：2013-01-08T12:38:37.950
> 
> 标签：ruby-on-rails, integration-testing, factory-bot

我在 Rails 应用程序中使用 FactoryGirl 而不是 Fixtures。

当我尝试在测试中使用工厂女孩并创建一些测试数据时，它显示为

`PG:Error relation "users" doesn't exists`（我有一个名为 User 的模型）

但是当我运行`rake db:test:clone`，然后运行测试时，测试通过了。该`rake db:test:clone`命令将所有表结构从开发数据库克隆到测试数据库，这解决了问题。

但是有什么办法让我`rake db:test:clone`在使用 FactoryGirl 时不运行？

或者我错过了什么？

**更新 ：**

我发现了另一件事，我有另一个使用 Rspec 和 FactoryGirl 的应用程序。在运行`rake spec --trace`命令时执行下面的那个应用程序

```
** Invoke spec (first_time)
** Invoke db:test:clone_structure (first_time)
** Invoke db:structure:dump (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:structure:dump
** Invoke db:test:load_structure (first_time)
** Invoke db:test:purge (first_time)
** Invoke environment 
** Invoke db:load_config 
** Execute db:test:purge
** Execute db:test:load_structure
** Invoke db:structure:load (first_time)
** Invoke environment 
** Invoke db:load_config 
** Execute db:structure:load 
```

但在任何新应用程序中，我看到运行时执行以下`rake spec --trace`

```
** Invoke spec (first_time)
** Invoke noop (first_time)
** Execute noop
** Execute spec 
```

请建议我错过了什么？

问候

巴兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:14:45.100

每次运行 a 时`db:migrate`，也要运行 a `db:test:prepare`，因此数据库更改也会反映在您的测试数据库上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:09:05.003

我找到了解决方案，我们需要在`customrake.rake`下面创建一个 rake 任务`/lib/tasks` 并添加行`task :spec => 'db:test:prepare'`，这将确保`rake db:test:prepare`在运行 Specs 之前执行。

# javascript - 对象不支持 IE9 和 IE8 中的属性或方法“切换”

> ID：14215138
> 
> 赞同：0
> 
> 时间：2013-01-08T12:38:48.750
> 
> 标签：javascript, jquery

我收到 JavaScript 错误，例如：

> 对象不支持属性或方法“切换”

在`slideToggle`IE 中运行良好。但是我在 IE 中收到了这个 JavaScript 错误。我该如何解决这个问题。需要添加任何插件或更改任何内容。

```
 $('#divid').slideToggle("slow");
 $('#divid').Toggle("slow"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T12:39:24.657

代替

```
$('#divid').Toggle("slow"); 
```

和

```
$('#divid').toggle("slow"); 
```

Javascript 区分大小写。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T12:39:48.757

应该`$('#divid').toggle("slow");`

**所有 jQuery 方法都以*小写字母*开头。**
*camelCase*通常用于组合两个（或多个）术语

```
slideToggle() 
```

或者这里是 JavaScript 的一个例子：

```
toLowerCase() 
```

通常（不是规则）您可以在命名 JS 对象或引用对象的变量时使用 *大写*，例如：`var Calculate = new Object();`

# c++ - C++ 析构函数真的会删除东西吗？

> ID：14215140
> 
> 赞同：1
> 
> 时间：2013-01-08T12:38:49.823
> 
> 标签：c++

我知道删除运算符以及它如何自动调用类的析构函数。然而，我最近看到有人直接调用一个类的析构函数，这对我来说似乎很奇怪。所以我写了一个简短的程序，它给出了一个非常出乎意料的结果：

```
#include <stdio.h>

class A
{
public:
  A()  {a = new int; *a=42; b=33;}
  ~A() {delete a;}

  int* a;
  int  b;
};

int main(int argc, const char ** argv)
{
  A* myA = new A();
  printf("a:%d  b:%d\n", *(myA->a), myA->b);
  myA->~A();
  printf("b:%d\n", myA->b);
  printf("a:%d\n", *(myA->a));
} 
```

正如你所看到的，我调用了析构函数~A()，所以在我的预期中，程序在第二次尝试访问变量“a”时应该会崩溃（因为它在两行前被删除了）。相反..程序只是打印这个没有任何抱怨：

```
a:42  b:33
b:33
a:42 
```

... 为什么？当我直接调用 ~A() 时会发生什么？在任何情况下这样做有用吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T12:40:32.457

手动调用析构函数就像调用一个函数——代码被执行，但内存没有被释放，与调用相反`delete`，当内存被释放时。

删除后访问`a`将导致未定义的行为，并且看起来可以正常工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T12:48:26.453

> 尝试第二次访问变量“a”时程序应该崩溃

访问已删除的变量是未定义的行为。这意味着任何事情都可能发生，包括程序崩溃。

> 当我直接调用 ~A() 时会发生什么？

在您的示例中什么都没有，因为您没有删除该对象，但[您不应该这样做](http://www.parashift.com/c++-faq/dont-call-dtor-on-obj-allocd-via-new.html)。

> 在任何情况下这样做有用吗？

是的，[应该为放置 new 显式调用](http://www.parashift.com/c++-faq/placement-new.html)析构函数，这是唯一应该调用析构函数的情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T12:46:16.100

当你直接调用 ~A() 时，会执行析构函数的代码。这不会像 C++ 那样阻止析构函数再次被调用。例如：

```
void func()
{
   A a;
   a.~A();  // calls destructor
   // Destructor runs again here as it always would.
} 
```

在您的示例中，将释放 int 的内存。这只是意味着运行时会记下您的程序不再使用内存......但这并不一定意味着内存会立即被擦除或用于其他用途。因此，当您稍后访问 int 的内存时，它仍然包含相同的值。但是，其他一些线程有可能重用了这个内存，而其他东西可能会覆盖它，但这恰好不会发生在你的程序中。

直接调用 ~A() 很有用的一种情况是，您想为某些要优化的情况处理自己的内存分配。例如，您可能拥有自己的字符串类并一次性保留大量内存。您可以手动调用构造函数和析构函数来将此池中的内存区域设置为正确初始化的字符串。您可以这样做而无需进行任何新的分配 - 只需重用池。但是...我会说这是专家级编程，您需要知道自己在做什么，并且这样做是为了获得有价值的性能提升。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-08T12:41:15.563

> 正如你所看到的，我调用了析构函数~A()，所以在我的预期中，程序在第二次尝试访问变量“a”时应该会崩溃（因为它在两行前被删除了）。相反..程序只是打印这个没有任何抱怨：

不奇怪。正如您所注意到的，代码有问题。所以它不会做你期望的事情，而是一些难以预测或理解的事情。如果您想要行为可预测的代码，则必须遵守规则。这就是他们的目的。

> “有人告诉我，在篮球中你不能拿着球跑。我拿了一个篮球试了一下，效果很好。他显然不懂篮球。” ——罗杰·米勒

# maven-jaxb2-plugin - 生成序列化的 jaxb 对象

> ID：14215143
> 
> 赞同：1
> 
> 时间：2013-01-08T12:39:03.813
> 
> 标签：maven-jaxb2-plugin

> 我已经阅读了几篇关于我们如何生成序列化的 jaxb 对象的文章我得到了配置

```
<jxb:bindings version="1.0"
 xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
 xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
 jxb:extensionBindingPrefixes="xjc">

   <jxb:bindings schemaLocation="mirth.xsd" node="/xs:schema">
       <jxb:globalBindings>
           <xjc:superClass name="com.webreach.mirth.managers.types.MirthElement" />
                        <xjc:serializable />
       </jxb:globalBindings>
   </jxb:bindings>
</jxb:bindings> 
```

> 据我所知，我无法在我的 POM.xml 中添加此配置有人可以建议我在哪里可以添加此配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:13:22.343

实际上，您不能将此 jxb:bindings 元素添加到您的 pom.xml 文件中。在 pom.xml 中，您可以定义可以引用 bindings.xml 文件的 maven-jaxb2-plugin。你可以在这里找到一些有用的材料

[JAXB 绑定到 JAR 中的模式](https://stackoverflow.com/questions/9506665/jaxb-bindings-to-schemas-in-a-jar)

[http://mojo.codehaus.org/jaxb2-maven-plugin/index.html](http://mojo.codehaus.org/jaxb2-maven-plugin/index.html)

# c - C 循环复杂度

> ID：14215145
> 
> 赞同：0
> 
> 时间：2013-01-08T12:39:06.430
> 
> 标签：c, loops, complexity-theory, asymptotic-complexity

我正在准备考试，这些是去年考试中的一些问题。任务是计算精确复杂度和渐近复杂度。你会怎么解决？普遍，如果可能的话。

```
for ( i = j = 0; i < n; j ++ ) {
  doSomething ();
  i += j / n;
  j %= n;
}

for ( i = 0; i < 2 * n; i += 2 )
  for ( j = 1; j <= n; j <<= 1 )
    if ( j & i )
      doSomething ();

for (i = 0; i < 2*n; i++) {
  if ( i > n )
    for (j = i; j < 2 * i; j ++ ) doSomething();
  else
    for (j = n; j < 2 * n; j ++ ) doSomething();
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T12:08:59.457

我对第三个循环的解决方案是

```
t(n) = [ (n-1)*n +  ((n-1)*n)/2 ] *D  + [ n^2 +n ] *D + [ 2n ]*I 
```

所以它是`O(n^2)`给定的，`doSomething()`有一个恒定的时间，`i`并且`j`是整数。

第二项 ( `[ n^2 +n ] *D`) 相当简单。

循环

```
for (j = n; j < 2 * n; j ++ ) doSomething(); 
```

被调用 while`i <= n`所以它会被调用`n+1`次数，因为它从 0 开始。

循环`for (j = n; j < 2 * n; j ++ )`调用`doSomething()` `n`时间，所以我们有`(n+1)*n*D = [n^2+n] *D`. 我假设`doSomething()`有一个恒定的时间，等于`D`

第一项稍微复杂一些。

```
for (j = i; j < 2 * i; j ++ ) doSomething(); 
```

什么时候被调用，`i>n`所以它会被调用`n-1`次数。循环调用`doSomething()`i 次。第一次被调用`n+1`，第二次被调用，以此类推，直到它`2n-1`等于`n + (n-1)`。所以我们得到一个这样的序列`{n+1, n+2, n+3, ... , n+(n-1)}`。

如果我们对序列求和，我们会得到`n-1`times`n`和 sum `1+2+3+...+ (n-1)`。最后一个术语可以用[“Gaußsche Summenformel”](http://de.wikipedia.org/wiki/Gau%C3%9Fsche_Summenformel)解决（对不起，我没有它的英文名称，但你可以在德语 wiki 链接中看到公式）所以它等于`((n-1)*n)/2`

所以第一项是`(n-1) * n + ((n-1)*n)/2 *D`

最后一项是 if 语句，它被称为，执行 If 语句的时间在`2*n*I`哪里。`I`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:12:08.077

好吧，这里的问题是，对于所有三个循环结构，迭代次数如何与 成比例变化`n`，对吧？所以让我们看看循环。我将省略第一个，因为您已经解决了它。

```
for ( i = 0; i < 2 * n; i += 2 )
  for ( j = 1; j <= n; j <<= 1 )
    if ( j & i )
      doSomething (); 
```

外部 for 循环显然运行准确的`n`时间。`log_2(n)`由于按位移位操作，内部循环运行时间。if 子句在恒定时间内运行，因此整个循环在 中`O(n * log_2(n))`，假设它`doSomething()`也在恒定时间内。

这是否使它更清楚？:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:16:07.783

根据要求，我将解释我如何得出第一个循环等于这样的结构的结果：

```
int i, j;
for (i=0; i < n; i++) {
    for (j=0; j <= n; j++) {
        doSomething();
    }
} 
```

首先，我必须承认，在我真正考虑之前，我只是编写了一个小示例程序，其中包括在迭代过程中打印出来`i`的三个 for 循环中的第一个。`j`看到结果后，我在想*为什么*结果是这样的。

在评论中，我忘了添加我定义`n=200`的 .

## 解释

我们可以说，虽然`j`在迭代中的每一步都有规律地递增，但它永远不会超过`n`. 为什么？`n`迭代后， `j==n`. 递增**后将**`0`在语句中设置为。语句中,将递增次，第 th 次递增。这一切重新开始，直到。`j %= n` **`i``i += j / n``i``0` `n-1``n``1``i >= n`**

# delphi - 了解 Delphi 7 中多选 TTreeView 项的工作原理

> ID：14215150
> 
> 赞同：1
> 
> 时间：2013-01-08T12:39:16.037
> 
> 标签：delphi, treeview, delphi-7, multi-select

有人可以解释一下，`MultiSelectStyle`Delphi 7 中的`Selected`属性`Selected.Count`如何工作吗？`TTreeView`我已经离开 Delphi 编码多年，除非有人指出我，否则我想念什么，我认为这背后绝对没有逻辑。

说到点子上了。我有一个填充`TTreeView`所选文件夹内容的例程。它使用递归，因此每个文件夹都表示为带有子节点的节点——它是子文件夹和文件。用户可以在树上选择多个项目，因为`MultiSelect`设置为`True`. 在`MultiSelectStyle`组中，我也将所有四个子属性设置`True`为（也许这是一个错误）。

作为我的程序的调试（我希望它的工作方式完全相反），我有这个代码：

```
ShowMessage(IntToStr(tvShell.Selected.Count) + ' selected');

for i := 0 to (tvShell.Selected.Count - 1) do
begin
    ShowMessage(tvShell.Selected.Item[i].Text);
end; 
```

所以我运行我的程序并选择任何文件夹。树渲染，我看到：

*   具有所选文件夹完整路径的根节点`Text`和六个子文件夹，因为所选文件夹包含六个子文件夹且没有文件，
*   这六个子文件夹仅包含文件，因此根节点的六个子节点包含相应数量的子节点，例如 - 第一个包含 44 个（文件或项目），最后一个包含 9 个（项目或文件）。

使用`Ctrl`鼠标，我选择第一个（44 个文件）和最后一个（9 个文件）树节点（根节点的子节点）并点击执行上述调试代码的按钮。

![示例树内容](../Images/70555fa37615f789cb5e468f84a6f1ec.png)

我期待什么？我看到**两个项目被选中**。由于`msVisibleOnly`设置为`True`between `MultiSelectStyle`，我希望`tvShell.Selected.Count`设置为`2`并看到三个消息。

我能得到什么？第一条消息说我**选择了... 九个项目**，当我继续时，我收到另外九条消息，显示*最后一个文件夹*（树子）的内容。最可笑的是，`tvShell.Selected` *这两个竟然没有出现，居然*是我选的！怎么回事？

胡说八道继续……

我重复所有这些步骤，但这次我选择（单击）最后一个文件夹（子级）并`Ctrl`按下按钮，我单击第一个文件夹（根的子级）。作为一个人，我再次看到，我**选择了两个项目**。看这棵树时，我在视觉上看不出选择有什么不同。但德尔福做到了。

执行调试代码时，这一次我得到的信息是**选择了 44 个项目**，并且我得到了 44 个额外的消息框，显示第一个文件夹的内容。完全糊涂了，我点击`+`第一个和最后一个文件夹旁边，看看里面是否有任何项目被选中，但没有（因为`msVisibleOnly`设置为`True`）。

我明白了，它是如何工作的（总是声称上次单击项目的子项都在选定项目中），但我不明白。这背后的逻辑在哪里，如果有的话？如果代码的结果不能反映现实，这有什么用？

对不起，舌头很硬，但这对我来说完全是愚蠢的。由于我不在 Delphi 中编码（我实际上讨厌这种语言来做更多类似的事情）我不寻求启发或解释，为什么这会像它一样有效（尽管，如果有人有空闲时间，我会非常乐意阅读它）。

但我真的会很高兴，如果有人可以解释我，我必须在代码和`TTreeView`属性中做些什么魔法，才能从代码中得到真正选择的东西，而不是德尔福对现实的错误解释。如果我看到两个项目被选中，我想`tvShell.Selected.Count`设置为 2 并且我想`tvShell.Selected`包含两个项目——我选择的两个项目。不多也不少。

抱歉，这个问题太长了，但是当我发现（再次，多年后）感到沮丧之后，我不得不做出反应，Delphi 真的是一种奇怪的语言。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T13:26:32.097

您的代码显示的值

```
tvShell.Selected.Count 
```

这是 的直接子节点的数量`tvShell.Selected`。请记住，这`tvShell.Selected`只是一个节点。

您可能打算使用

```
tvShell.SelectionCount 
```

然后你显示

```
tvShell.Selected.Item[i].Text 
```

这些是 的直接子级的标题`tvShell.Selected`。

如果要遍历所有选定的节点，则可以这样做：

```
for i := 0 to tvShell.SelectionCount-1 do
  DoSomething(tvShell.Selections[i]); 
```

* * *

当您遇到此类情况时，我建议您阅读在线帮助。特别是对于 Delphi 7，文档非常清晰。对于`Selected`文档状态：

> 指定树视图中的选定节点。
> 
> **属性**选择：TTreeNode；
> 
> **描述**
> 
> 读取选定以访问树视图的选定节点。如果没有选中节点，Selected 的值为 nil。
> 
> ......
> 
> 如果 MultiSelect 属性为 True 并且 MultiSelectStyle 属性包括 msControlSelect，则 Selected 将返回最后一个单击的节点，即使该单击取消选择该节点也是如此。有关 MultiSelect 为 True 时的当前选择状态，请参阅 Selections 属性。

然后，当您继续阅读文档时，`Count`它会说：

> 表示树节点的直接后代数。
> 
> **属性**计数：整数；
> 
> **描述**
> 
> 使用 Count 来确定有多少子节点属于一个树节点。Count 仅包括直系子代，不包括其后代。Count 在遍历树节点的子节点时很有用。

换句话说，文档告诉你的和我告诉你的一样。

# multithreading - PostgreSQL：在恶劣的多用户环境中使用 SELECT nextval 生成器线程安全吗？

> ID：14215151
> 
> 赞同：12
> 
> 时间：2013-01-08T12:39:17.800
> 
> 标签：multithreading, postgresql

我的意思是像成千上万的用户及时更新数据库中的值？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-08T13:56:38.937

是的，`nextval`从多个并发操作的事务中使用是安全的。这就是它的目的和存在的理由。

也就是说，它实际上并不是“线程安全的”，因为 PostgreSQL 使用多处理模型而不是多线程模型，并且因为大多数客户端驱动程序（例如 libpq）一次不允许超过一个线程与单个连接进行交互。

您还应该知道，虽然`nextval`可以保证返回不同且不断增加的值，但不能保证在没有“洞”或“间隙”的情况下这样做。当生成的值被丢弃而不被提交（例如，由 a `ROLLBACK`）以及 PostgreSQL 在服务器崩溃后恢复时，就会产生这种间隙。

虽然`nextval`总是返回越来越多的数字，但这并不意味着您的事务将按照它们从给定序列中获取 ID 的顺序提交。因此，发生这样的事情是完全正常的：

```
Start IDs in table: [1 2 3 4]
1st tx gets ID 5 from nextval()
2nd tx gets ID 6 from nextval()
2nd tx commits:     [1 2 3 4 6]
1st tx commits:     [1 2 3 4 5 6] 
```

换句话说，洞可以出现也可以消失。

这两种异常都是使一个`nextval`呼叫不阻塞另一个呼叫的必要且不可避免的后果。

如果您想要一个没有此类排序和间隙异常的序列，则需要使用无间隙序列设计，该设计一次仅允许一个事务具有未提交的生成 ID，从而有效地消除了该表中插入的所有并发性。这通常使用`SELECT FOR UPDATE`或`UPDATE ... RETURNING`在柜台上实现。

搜索“PostgreSQL 无间隙序列”以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:41:41.647

是：[http ://www.postgresql.org/docs/current/static/functions-sequence.html](http://www.postgresql.org/docs/current/static/functions-sequence.html)

否则它不会有用。

编辑：这是你如何使用 nextval 和 currval：

nextval 返回一个新的序列号，您可以将其用于第一个表的插入中的 id

currval 返回此会话获得的最后一个序列号，您在外键中使用它来引用第一个表

每次调用 nextval 都会返回另一个值，不要在同一组插入中调用它两次。

当然，您应该在任何多用户代码中使用事务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T12:43:07.153

是的，它是线程安全的。

从[手册](http://www.postgresql.org/docs/current/static/functions-sequence.html)：

> nextval
> 
> 将序列对象推进到下一个值并返回该值。这是原子完成的：**即使多个会话同时执行 nextval，每个会话都将安全地接收到不同的序列值。**

（强调我的）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T17:36:26.167

这张海报对同一个有缺陷的代码提出了不同的问题。 [这里](https://stackoverflow.com/q/14182914/1802986)的重点是：他似乎不知道外键是如何工作的，并且将它们颠倒过来（作为外键的序列有点尴尬恕我直言）

顺便说一句：这应该是评论，而不是答案；但我还不能发表评论。

# python - 检查列表长度后渲染到不同的模板

> ID：14215158
> 
> 赞同：0
> 
> 时间：2013-01-08T12:39:32.567
> 
> 标签：python, django

在 Django 和 Python 方面几乎都是新手。将不胜感激这里的一些建议。我确实搜索了类似的问题，但找不到解决我问题的问题。

这是我写的一个观点。预期的行为是检查列表（区域列表）的长度，如果该列表中只有一个对象，则渲染到一个模板，如果有多个则渲染到另一个模板。如果列表中没有对象，则自动引发 404。

```
 @never_cache
def district_list(request, county_slug):
    districts_list = get_list_or_404(NeigbourhoodPostcodeDistrict, county__slug=county_slug)
    if districts_list.count() == 1:
        context = {
        'districts_list': districts_list,
        }
        return render_to_response('neighbourhood/neighbourhood.html',context,context_instance=RequestContext(request))
    else:
        context = {
            'districts_list': districts_list,
        }
        return render_to_response('neighbourhood/district-list.html',context,context_instance=RequestContext(request)) 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:41:20.977

您正在寻找[内置](http://docs.python.org/3/library/functions.html#len)[的`len()`](http://docs.python.org/3/library/functions.html#len).

例如：

```
if len(districts_list) == 1:
    ... 
```

该[`seq.count()`](http://docs.python.org/3/library/stdtypes.html#common-sequence-operations)方法计算单个元素在序列中出现的次数，并且需要一个参数（要计数的元素）。

# sql-server - SQL : INSERT INTO 中的条件 (IF-ELSE)

> ID：14215160
> 
> 赞同：16
> 
> 时间：2013-01-08T12:39:35.607
> 
> 标签：sql-server, insert, request

是否可以 ？

> ```
> INSERT INTO tblPeople (id, group, company) VALUES (1, 'myGroup', 
> IF($company = '') BEGIN 'no company' ELSE 'myCompany' END) 
> ```

我想测试一个值，如果变量 $company 为空，我想写 no company。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-08T12:44:33.583

试试这个：

```
INSERT INTO tblPeople (id, group, company) 
select 1, 'myGroup', 
case 
  when @company is null or  @company = '' then 'no company' 
  else 'myCompany' 
END as  company
/*from tab --<-- optional*/ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T12:45:10.113

可能不是，但是

```
INSERT INTO tblPeople (id, [group], company) 
Select 1, 'myGroup', Case When @Company = '' then 'no company' Else 'my company' End 
```

应该是路人

# java - Servlet 的 EJB 注入 - JBoss AS 7

> ID：14215161
> 
> 赞同：3
> 
> 时间：2013-01-08T12:39:39.517
> 
> 标签：java, ejb, jboss7.x

我正在尝试使用 JBoss7 将 EJB 注入到 servlet 并且它不起作用。该代码在 JBoss 6 上运行良好我将 EJB 代码从 WAR 和与 WAR 的接口打包出来，但我没有在 SERVLETS（GWT Servlets）中注入。

我的代码看起来像

界面：

```
@Local
public interface MyService{
} 
```

执行：

```
@Stateless(name = "MyService")
@TransactionManagement(TransactionManagementType.CONTAINER)
public class MyServiceImpl implements MyService {
} 
```

小服务程序

```
@EJB(name = "MyService")
private MyService service; 
```

相同的实现在 JBoss AS 6 中运行良好。我没有主意了。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:09:21.983

如果你`EJB`只是一个本地人，你可以把所有的东西都放在战争中。

如果接口只有一个实现，您可以删除 的名称`EJB`，容器将根据类型解析`EJB`注入。（您可以将接口与`EJB`3.1 一起删除）。

如果您需要更多，您应该提供存档（`EAR`或`WAR`）结构和一些日志条目（`EJB`进行注入时列表+错误）。

# mysql - mysql求和函数问题

> ID：14215169
> 
> 赞同：2
> 
> 时间：2013-01-08T12:40:12.687
> 
> 标签：mysql, aggregate-functions

我对mysql 中的***SUM() 函数***有一些疑问。当我在没有条件的情况下使用 SUM() 函数时会正常工作。但是，如果我将 SUM() 函数与条件一起使用，它将返回与条件匹配的记录数。给我解释一下。

我创建了一张有四列的表老师，如下所示。

```
mysql> desc Teacher;

+--------------+-------------+------+-----+-------------------+
| Field        | Type        | Null | Key | Default           |
+--------------+-------------+------+-----+-------------------+
| TeacherId    | varchar(36) | NO   | PRI | NULL              |
| FirstName    | varchar(50) | NO   |     | NULL              |
| LastName     | varchar(50) | NO   |     | NULL              |
| SyncStatus   | int(11)     | NO   |     | NULL              |
+--------------+-------------+------+-----+-------------------+ 
```

**它包含以下记录。**

```
mysql> select * from Teacher;

+-----------+-----------+-----------+------------+
| TeacherId | FirstName | LastName  | SyncStatus |
+-----------+-----------+-----------+------------+
| 001       | Sagar     | Kapadia   |          1 |
| 002       | Vishal    | Chaudhari |          1 |
| 003       | Milan     | Panchal   |          1 |
| 004       | Jugal     | Desai     |          1 |
| 005       | Baburao   | Apte      |          1 |
| 006       | Jaya      | Bacchan   |          0 |
| 007       | Jaya      | Bacchan   |          2 |
| 008       | Jaya      | Bacchan   |          2 |
+-----------+-----------+-----------+------------+
8 rows in set (0.00 sec)

mysql> select TeacherId,FirstName,LastName,Concat(FirstName,' ',LastName) as FullName,SUM(SyncStatus) from Teacher having FullName like '_____ %';
+-----------+-----------+----------+---------------+-----------------+
| TeacherId | FIrstName | LastName | FullName      | sum(SyncStatus) |
+-----------+-----------+----------+---------------+-----------------+
| 001       | Sagar     | Kapadia  | Sagar Kapadia |               9 |
+-----------+-----------+----------+---------------+-----------------+
1 row in set (0.00 sec) 
```

**所以它会给我返回同步状态的完美总和。但如果我将使用带条件的 SUM() 则返回记录数。**

```
mysql> select TeacherId,FIrstName,LastName,Concat(FirstName,' ',LastName) as FullName,sum(SyncStatus = 0) from Teacher having FullName like '_____ %';
+-----------+-----------+----------+---------------+---------------------+
| TeacherId | FIrstName | LastName | FullName      | sum(SyncStatus = 0) |
+-----------+-----------+----------+---------------+---------------------+
| 001       | Sagar     | Kapadia  | Sagar Kapadia |                   1 |
+-----------+-----------+----------+---------------+---------------------+
1 row in set (0.00 sec)

mysql> select TeacherId,FIrstName,LastName,Concat(FirstName,' ',LastName) as FullName,sum(SyncStatus = 1) from Teacher having FullName like '_____ %';
+-----------+-----------+----------+---------------+---------------------+
| TeacherId | FIrstName | LastName | FullName      | sum(SyncStatus = 1) |
+-----------+-----------+----------+---------------+---------------------+
| 001       | Sagar     | Kapadia  | Sagar Kapadia |                   5 |
+-----------+-----------+----------+---------------+---------------------+
1 row in set (0.00 sec)

mysql> select TeacherId,FIrstName,LastName,Concat(FirstName,' ',LastName) as FullName,sum(SyncStatus = 2) from Teacher having FullName like '_____ %';
+-----------+-----------+----------+---------------+---------------------+
| TeacherId | FIrstName | LastName | FullName      | sum(SyncStatus = 2) |
+-----------+-----------+----------+---------------+---------------------+
| 001       | Sagar     | Kapadia  | Sagar Kapadia |                   2 |
+-----------+-----------+----------+---------------+---------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:46:44.750

你说的对。此函数`sum(SyncStatus = 2)`将返回行数，因为这就是它的执行方式

在每一行`SyncStatus = 2`中都会测试 if`SyncStatus equals 2`和 returns `1(true) or 0(false)`，所以你基本上得到了真值的总和（1）

# php - htaccess ：停止子目录自动重定向到根索引

> ID：14215178
> 
> 赞同：1
> 
> 时间：2013-01-08T12:40:35.137
> 
> 标签：php, .htaccess, redirect

好吧，如果这个问题已经存在，我很抱歉，但是即使经过严格的搜索，我也没有找到它。

假设我的站点目录的一部分是这样的 -

```
/index.php (root)
/appdir/app1/index.php 
```

**但是当我尝试访问 app1/index.php 时，它会自动重定向到根 index.php。**我找不到可能的原因。我的 .htaccess 看起来像这样：

```
IndexIgnore *
RewriteEngine on

#RewriteBase only requires in localhost alias 
RewriteBase /

Options +FollowSymlinks

RewriteRule ^(.*)_(v|V)[0-9\.]+\.(css|png|gif|jpe?g|html?|swf|js)$ $1.$3

AddDefaultCharset UTF-8 
```

有没有办法访问我的应用程序 index.php 或停止重定向到根目录？感谢您的赞赏。

注意：完整的根 htaccess 文件： http: [//pastebin.com/D1tvXh76](http://pastebin.com/D1tvXh76)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:43:53.750

您需要添加`RewriteCond`：

```
RewriteCond %{REQUEST_FILENAME} !-f #Does not rewrite file
RewriteCond %{REQUEST_FILENAME} !-d #Does not rewrite direcotry 
```

为了更好地理解`mod_rewrite`工作原理，请阅读[手册](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# svn - Subclipse Branch/Tag 命令的命令行等效项

> ID：14215180
> 
> 赞同：0
> 
> 时间：2013-01-08T12:40:41.723
> 
> 标签：svn, version-control, subclipse

我只想标记我的子目录的一个子集。在 Subclipse 中，我可以标记几个子目录并只标记它们。例如

```
BigProject/
  SubProjectA/
  SubProjectB/
  SubProjectC/ 
```

现在我只想用and`svn copy`说。Subclipse中选择子项目的命令行版本如何？`BigProject/``SubProjectA``SubProjectB`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:32:44.027

我认为 svn copy 命令与 Unix 'cp' 命令基本相同。无论哪种方式，您都将采取多个步骤。

从命令行你会：

```
svn mkdir /path_to_your_repo/new_tag
svn cp /path_to_your_repo/BigProject/SubProjectA /path_to_your_repo/new_tag/ 
```

您也可以在 Subclipse的[SVN Explorer 透视图中执行此操作。](http://subclipse.tigris.org/screenshots.html)

# jquery - 干掉事件处理程序

> ID：14215181
> 
> 赞同：3
> 
> 时间：2013-01-08T12:40:43.653
> 
> 标签：jquery, event-handling, dry

我有一个带有三个按钮的模式：关闭、删除和保存。每个按钮都需要一个单击处理程序，并且每个单击处理程序都将模式隐藏为其最后一个操作。这是天真的方法：

```
// Close
$('#edit-user-close').on('click', function () {
  $modal.modal('hide');
});

// Remove
$('#edit-user-remove').on('click', function () {
  removeUser();

  $modal.modal('hide');
});

// Save
$('#edit-user-save').on('click', function () {
  saveChanges();

  $modal.modal('hide');
}); 
```

这段代码感觉就像它可以被干掉一样。我可以使用什么技术/语法来干掉那些事件处理程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:46:54.470

代码本身对我来说似乎很好。如果您想在单击处理程序下执行此操作，则可以使用具有`data`属性的类来确定操作，请尝试以下操作：

```
<a href="#" class="modal-action" data-action="close">Close/a>
<a href="#" class="modal-action" data-action="remove">Remove user</a>
<a href="#" class="modal-action" data-action="save">Save</a> 
```

```
$('.modal-action').click(function() {
    switch ($(this).data('action')) {
       case 'remove':
           removeUser();
           break;
       case 'save':
           saveChanges();
           break;
    }

    $modal.modal('hide');
}); 
```

如果您只有 2 个按钮（除了`close`），那么`switch`可以缩短为一个`if`声明。`switch`如果您将来需要添加不同的按钮操作，我使用了 a ，因为它更具可扩展性。

# php - 检查 curl http 命令

> ID：14215188
> 
> 赞同：4
> 
> 时间：2013-01-08T12:41:08.027
> 
> 标签：php, http, unix, post, curl

### 你好！

我正在尝试自动将图像上传到站点，女巫正在使用数据库来跟踪文件。用户界面……嗯，很糟糕，而且我有很多文件。我无法访问数据库，所以我必须找到解决方法，我发现我可以使用**cURL**轻松模仿网站的上传机制。

我用 Mozilla 的 Firebug 检查了浏览器发送的 POST 数据，以及网站上传表单的源代码。我能够确定要发送到服务器的所需 POST 字段，因此我在 PHP 中放置了一个小 cURL 命令。

我正在使用 Debian GNU/Linux 和版本号为 5.3.20-1 的 PHP。相关代码如下所示：

```
$strfilepath = '@' .  $item->getPathname();  // get next file from directory (directory iterator)

$postdata = array();

$postdata['upload'] = 1;
$postdata['category_id'] = 43;
$postdata['imgtoupload'] = $strfilepath;
$postdata['actie'] = 1;

curl_setopt($somecurl, CURLOPT_URL, "http://some.site.at.somwhere.com/image_up.php");
curl_setopt($somecurl, CURLOPT_POST, true);
curl_setopt($somecurl, CURLOPT_POSTFIELDS, $postdata);
curl_setopt($somecurl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($somecurl, CURLOPT_NOPROGRESS, false);
curl_setopt($somecurl, CURLOPT_VERBOSE, true); // FTW!

$response = curl_exec($somecurl); 
```

我想将浏览器的 POST 命令与我的“人工”http 请求进行比较，所以我的确切问题是**如何获取 cURL 生成的 POST（或任何其他 HTTP）请求？**（就像 Firebug 可以做的那样。）我对 curl 唯一能做的就是启用 CURLOPT_VERBOSE，但它只返回标题数据。

检查 curl_getinfo() 的返回和命令行列表，我发现服务器给出了 302 HTTP 警告，并且它没有上传任何文件：

```
Connection #0 to host some.site.at.somwhere.com left intact 
```

身份验证可能存在一些问题，但我想确保代码为服务器发送适当的数据。

提前致谢！真诚的：G。

**编辑（13.01.09）：**

哈！我成功了！问题是 cURL 以某种方式覆盖了发送数据的类型。它将图像标记为`application/octet-stream`而不是`image/jpeg`。我在“要发送的文件”字段中明确指定了类型，女巫解决了这个问题：

```
 $strfilepath = '@' .  $item->getPathname() . ";type=image/jpeg" ; 
```

它可以正常工作。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:07:13.760

最简单的方法是`ngrep`从命令行使用：

```
ngrep -W byline host some.site.at.somwhere.com and port 80 
```

这会将所有进出`some.site.at.somwhere.com`端口 80 的流量转储到标准输出。`-O`您还可以使用以下标志将输出写入 pcap 文件：

```
ngrep -O http-traffic.pcap -W byline host some.site.at.somwhere.com and port 80 
```

一些发行版不打包`ngrep`在它们的主存储库中，但`tcpdump`在这种情况下是一个很好的选择，并且语法类似：

```
tcpdump -A -s 1600 host some.site.at.somwhere.com and port 80 
```

并将其发送到文件，而不是：

```
tcpdump -w http-traffic.pcap -s 1600 host some.site.at.somwhere.com and port 80 
```

请注意，`host some.site.at.somwhere.com and port 80`无论您使用哪种工具，表达式都是相同的。您可以使用`man pcap-filter`.

# javascript - Travis CI 上的 QUnit 测试失败（在带有 grunt.js 的 phantomjs 上运行）

> ID：14215189
> 
> 赞同：7
> 
> 时间：2013-01-08T12:41:13.247
> 
> 标签：javascript, testing, phantomjs, qunit, travis-ci

我们在 JavaScript 上的开源项目 enchant.js 中引入了带有 travis CI 的 CI 系统。 [https://github.com/wise9/enchant.js](https://github.com/wise9/enchant.js)

我们喜欢 qunit 测试，我们使用 grunt.js (npm) 运行它们，但它在 Travis CI 上失败并出现如下错误：

```
<WARN> PhantomJS timed out, possibly due to a missing QUnit start() call. Use --force to continue. </WARN> 
```

完整的错误信息在这里：[https ://travis-ci.org/wise9/enchant.js/builds/4016842](https://travis-ci.org/wise9/enchant.js/builds/4016842)

奇怪的是，每次我运行`grunt`命令时，不同的测试都会导致超时错误，有时所有的测试都会通过（尽管可能性很小）

.travis.yml

```
language: node_js
node_js:
  - 0.8
before_install:
  - phantomjs --version 
```

包.json

```
{
  "name": "enchant.js",
  "version": "0.6.2",
  "engines": {
    "node": ">=0.8"
  },
  "scripts": {
    "test": "grunt default --verbose"
  },
  "devDependencies": {
    "grunt": "0.3.17",
    "grunt-exec": "0.3.0"
  }
} 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T05:02:26.067

> 我有同样的问题，这导致我在 PhantomJS 中运行时 QUnit 的 asyncTest 永远不会返回。
> 
> 我们通过将 grunt 和 grunt-qunit 升级到 v0.4 解决了这个问题。我们放弃了解确切的问题，但您发现的错误似乎可能是

# c#-4.0 - 在 Esent 持久字典中存储对象给出：不支持 SetColumn 参数错误

> ID：14215195
> 
> 赞同：2
> 
> 时间：2013-01-08T12:41:27.623
> 
> 标签：c#-4.0, esent

我正在尝试保存一个实现接口的对象，比如 IInterface。

```
private PersistentDictionary<string, IInterface> Object = new PersistentDictionary<string, IInterface>(Environment.CurrentDirectory + @"\Object"); 
```

由于许多类实现了相同的接口（所有这些都需要缓存），因此对于通用方法，我想将 IInterface 类型的 Object 存储在字典中。
这样我就可以在任何地方拉出该对象类型，将其转换为 IInterface 并使用该对象的内部方法实现等。

但是，一旦初始化 Esent 缓存，它就会引发此错误： SetColumn 参数名称
不支持：TColumn 实际值为 IInterface。

我试图不使用`XmlSerializer`做同样的事情，但无法反序列化接口类型。此外，`[Serializable]`属性不能在接口之上使用，所以我被卡住了。

我还尝试将接口的所有实现（类）`[Serializable]`作为垂死的尝试，但没有用。

有人知道出路吗？提前致谢 ！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-20T16:25:34.623

仅支持结构（以及一些基本的*不可变*类，例如字符串）的唯一原因是它`PersistentDictionary`旨在替代`Dictionary`,`SortedDictionary`和其他类似的类。

假设我有以下代码：

```
class MyClass
{
    int val;
}

.
.
.

var dict = new Dictionary<int,MyClass>();
var x = new MyClass();
x.val = 1;
dict.Add(0,x);
x.val = 2;
var y = dict[0];
Console.WriteLine(y.val); 
```

在这种情况下，输出为 2。但如果我使用`PersistentDictionary`代替常规输出，则输出将为 1。该类是使用值 1 创建的，然后在将其添加到字典后进行更改。由于类是引用类型，当我们从字典中检索项目时，我们也将拥有更改后的数据。

由于`PersistentDictionary`将数据写入磁盘，因此它不能真正以这种方式处理引用类型。对其进行序列化并将其写入磁盘本质上与将对象视为值类型（制作完整副本）相同。

因为它打算用来代替标准字典，而且它不能以完全透明的方式处理引用类型，所以开发人员选择只支持结构，因为结构已经是值类型。

但是，如果您意识到这个限制并承诺要小心不要落入这个陷阱，那么您可以让它很容易地序列化类。只需下载源代码并编译您自己的 EsentCollections 库版本。您需要对其进行的唯一更改是更改此行：

```
if (!(type.IsValueType && type.IsSerializable)) 
```

对此：

```
if (!type.IsSerializable) 
```

这也将允许将类写入`PersistentDictionary`，前提是它是可序列化的，并且它的成员也是可序列化的。一个巨大的好处是它还允许您以这种方式在其中存储数组。您需要记住的是它不是真正的字典，因此当您向其中写入对象时，它将存储该对象的*副本*。因此，在将对象的任何成员添加到之后更新它们`PersistentDictionary`也不会自动更新字典中的副本，您需要记住手动更新它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:01:55.070

PersistentDictionary 只能存储值结构和非常有限的类子集（字符串、Uri、IPAddress）。查看 ColumnConverter.cs，在 private static bool IsSerializable(Type type) 中了解完整限制。你会遇到 typeinfo.IsValueType() 限制。

[顺便说一句，您还可以尝试在http://managedesent.codeplex.com/discussions](http://managedesent.codeplex.com/discussions)上发布有关 PersistentDictionary 的问题。

-马丁

# shell - Unix 脚本 - 字符串验证

> ID：14215197
> 
> 赞同：-3
> 
> 时间：2013-01-08T12:41:31.483
> 
> 标签：shell, unix, ksh

我对 Unix 脚本（.ksh）很陌生。我必须实现一个功能来检查我的参数是否说“欢迎”存在于字符串数组中，例如

`{"welcome","test","exit"}`

逻辑类似于`String.contains`Java。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:57:43.123

你可以做这样的事情。以下是在`bash`，您需要将其相应更改为`ksh`。

### 脚本

```
array=(welcome test exit)
string='welcome';
for item in ${array[*]}
do
    if [[ $string =~ .*$item.* ]]
    then
        echo "It's present!"
    fi
done 
```

### 输出

```
It's present! 
```

要迭代传递给 shell 脚本的参数，请使用 for with empty in，默认迭代参数，或`in '$@'`.

# c - 递归计算从 (0,0) 到 (x,y) 的格子路径数

> ID：14215198
> 
> 赞同：1
> 
> 时间：2013-01-08T12:41:31.393
> 
> 标签：c, recursion

有谁知道我如何编写一个递归函数来获取无符号整数 x, y 并返回 C 中从 0,0 到点 x,y 的路径数？

每次只有一步：向上或向右。步数的限制在矩形内：(0,0), (0, x), (0,y), (x,y)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:06:18.603

对不起，这不是C，但你应该很好理解。以美元开头的都是变量，其余的都是类似的。

```
function path($x, $y){
    if($x==0 && $y==0){ /* && is logical AND operator */
        return 1;
    // here's first (and only) edge case. If X and Y is 0, that means were are already where we want to be. We assume there's one path from the position you are on to the same position you are on.
    }

    $count=0;

    if($x>0){
        $count+=path($x-1, $y); // Here, we ask how many paths go from position (x-1, y) to zero, if the X is not zero already..
    }
    if($y>0){
        $count+=path($x, $y-1); // here same stuff for Y, if Y is not zero, let's recurse into (x, y-1)
    }

    return $count; // in those conditions above, the result is added into COUNT variable
}

$x=6; 
$y=4; // some input

print path($x, $y); // here it all starts, with the original input numbers 
```

它背后没有数学，它是一个递归。在 path() 函数的每次运行中，path 函数都会运行 path 函数的另一个实例，然后运行另一个实例，然后运行另一个实例。... 位置总是比当前位置小一，在一个维度上，然后在一个维度上小一个另一个维度。仅当递归已经到达 (0,0) 位置时，它才会返回 1，该值将添加到前一个实例中的 count 变量中，该值将添加到前一个实例中的 count 变量中，依此类推，直到它返回给打印函数。

注意：函数不是从 (0,0) 到 (x,y) 而是从 (x,y) 到 (0,0)。但结果是一样的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-01T00:41:02.453

Java解决方案：

```
/**
 * Compute the number of ways you can get from 0,0 to x,y
 *
 * @param x grid width
 * @param y grid height
 * @return number of lattice paths
 */
public long compute(int x, int y) {
    // there's only 1 way you can reach a point which is on some edge
    if (x == 0 || y == 0) {
        return 1;
    }
    /* Otherwise apply back recursion, i.e. take the last step (when you reach x,y) :
    you can get there only by moving from x-1,y (right) or from x,y-1 (up).
    So the result would be the number of ways you can get to x-1,y plus the number 
    of ways you can get to x,y-1 */
    return compute(x - 1, y) + compute(x, y - 1);
} 
```

随着网格面积的增长（x 和 y），算法变得非常慢，因为由于递归，您多次计算相同的值，因此您可能需要缓存：

```
Map<Pair, Long> cache = new HashMap<>();

public long compute(int x, int y) {
    Pair pair = new Pair(x, y);
    if (cache.containsKey(pair)) {
        return cache.get(pair);
    }
    if (x == 0 || y == 0) {
        return 1;
    }
    long result = compute(x - 1, y) + compute(x, y - 1);
    cache.put(pair, result);
    return result;
} 
```

Pair 是一个遵循[equals() 和 hashCode() Contract](http://www.programcreek.com/2011/07/java-equals-and-hashcode-contract/)的简单 POJO 。

# jquery - 无限滚动保罗爱尔兰人不工作

> ID：14215199
> 
> 赞同：4
> 
> 时间：2013-01-08T12:41:33.020
> 
> 标签：jquery

Paul Irish 有一个插件infiniteScroll，我以前用过这个，在这种情况下它对我不起作用，

问题是，“显示时间”是否定的，请看一下：

![在此处输入图像描述](../Images/595681be7ba99e6c01b905ef7bd94124.png)

我尝试检查黑客以使其工作，我开始玩东西，当我触摸 时`bufferPX`，如果我尝试使用`bufferPx`2000 - 3000 或更大，我会收到此错误。

`TypeError: I.join is not a function`

```
ApplicationHelper.GroupViewMember.MainSection.find('> section.information > section.wall > section.wall_container')
    .infinitescroll({
        navSelector     : "section.navigation_wall",
        nextSelector    : "section.navigation_wall a.next:last",
        itemSelector    : 'section.wall_entry',
        dataType        : 'html',
        bufferPx        :  100,
        debug           :  true,
        pathParse: function(path,page){
            return $(this.nextSelector).attr("href");
        }
    }, function(newElements, data, url){

}); 
```

路径是正确的，我已经测试过了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:11:31.807

```
pathParse: function(path,page){
    return $(this.nextSelector).attr("href");
} 
```

到

```
path: function(path,page){
    return $(this.nextSelector).attr("href");
} 
```

# android - Java - Android SQLite 不存在这样的表

> ID：14215204
> 
> 赞同：0
> 
> 时间：2013-01-08T12:41:50.137
> 
> 标签：android, sqlite, cursor, android-cursor

我正在创建一个将查询数据库的应用程序，但是无法检测到这些表。

我已按照此博客中指示的步骤操作：[http ://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

我制作了 android_metadata 表，将其复制到 assets 文件夹，并创建了 DataBaseHelper 类，如下所示：

```
public class DataBaseHelper extends SQLiteOpenHelper{
private static final String MedicalStaff = null;
private static final String Patients = null;

//The Android's default system path of your application database.
private static String DB_PATH = "/data/data/com.angelo.thesis/databases/";

private static String DB_NAME = "androidHospital";

private SQLiteDatabase myDataBase; 

private final Context myContext;

/**
 * Constructor
 * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
 * @param context
 */
public DataBaseHelper(Context context) {

    super(context, DB_NAME, null, 1);
    this.myContext = context;
}   

/**
 * Creates a empty database on the system and rewrites it with your own database.
 * */
public void createDataBase() throws IOException{

    boolean dbExist = checkDataBase();

    if(dbExist){
        //do nothing - database already exist
    }else{

        //By calling this method and empty database will be created into the default system path
           //of your application so we are gonna be able to overwrite that database with our database.
        this.getReadableDatabase();

        try {

            copyDataBase();

        } catch (IOException e) {

            //throw new Error("Error copying database");
            System.out.println("Error copying database");

        }
    }

}

/**
 * Check if the database already exist to avoid re-copying the file each time you open the application.
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase(){

    SQLiteDatabase checkDB = null;

    try{
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }catch(SQLiteException e){

        //database does't exist yet.

    }

    if(checkDB != null){

        checkDB.close();

    }

    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created empty database in the
 * system folder, from where it can be accessed and handled.
 * This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException{

    //Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void openDataBase() throws SQLException{

    //Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

}

@Override
public synchronized void close() {
        if(myDataBase != null)
            myDataBase.close();

        super.close();
}

@Override
public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

} 
```

}

然后使用以下方法初始化此数据库助手：

```
DataBaseHelper myDbHelper = new DataBaseHelper(null); 
```

在`onCreate`方法中：

```
myDbHelper = new DataBaseHelper(this);

    try {
        myDbHelper.createDataBase();
        System.out.println("Database Created!");
    } 
    catch (IOException e) {
        // TODO Auto-generated catch block
        System.out.println("Unable to create database");
    }

    try {
        myDbHelper.openDataBase();
        System.out.println("Database Opened!");
    } 
    catch (SQLException e) {
        // TODO Auto-generated catch block
        System.out.println("Unable to open database");
    } 
```

try-catch 语句起作用，LogCat 显示 Created 和 Opened 消息。

然后通过这个函数进行查询： 字符串输入是一个用户输入，一个用于查找与该数字对应的人的数字。

```
public String searchStaff(DataBaseHelper myDB, String input){

    System.out.println("searchStaff entered");

    String data = null;
    Cursor cursor = null;
    SQLiteDatabase db = myDB.getReadableDatabase();

    //int myNum = Integer.parseInt(input);

    try{
        cursor = db.rawQuery("SELECT LastName, FirstName FROM MedicalStaff WHERE _id =" + input, null);

    }   
    catch(Exception e){
    }

    if( cursor != null ){
        cursor.moveToFirst();

        data = cursor.getString(cursor.getColumnIndexOrThrow("LastName")) + " " +
                cursor.getString(cursor.getColumnIndex("FirstName"));   
        cursor.close();
    }

    System.out.println("Data: " + data);
    return data;

} 
```

但是，显示的数据变成了`null`，Log Cat 告诉我该表`MedicalStaff`不存在。

我有一种感觉，我在这里错过了一些非常基本的东西。谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:46:08.723

更改这行代码

``DataBaseHelper myDbHelper = new DataBaseHelper(null);`

到

`DataBaseHelper myDbHelper = new DataBaseHelper(this);`

这是因为您创建了一个带有 null 的 Databasehelper 对象。所以用指定的上下文创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:00:31.237

我认为数据库创建成功。但表创建未完成。请检查..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:44:26.263

更改这行代码

```
DataBaseHelper myDbHelper = new DataBaseHelper(null); 
```

到

```
DataBaseHelper myDbHelper; 
```

如果您初始化 DataBaseHelper，然后将 null 作为参数传递，Database Helper 将无法获取 Context 并会导致您现在面临的意外行为。因此，如上所述更改您的代码并尝试。希望对你有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:44:32.277

`new DataBaseHelper(null);`看起来不太好。您应该使用有效的上下文对其进行初始化

# entity-framework - EF 5.0 代码优先 - TPH 映射

> ID：14215205
> 
> 赞同：2
> 
> 时间：2013-01-08T12:42:02.703
> 
> 标签：entity-framework, entity-framework-5

我正在尝试对以下类使用 TPH 映射。忽略现在只有一个派生类，真正的代码有很多派生。

```
public abstract class Account
{
    public virtual int Id { get; set; }
}

public class UserAccount : Account
{
    public virtual string Username { get; set; }
    public virtual string Password { get; set; }
    public virtual string PasswordSalt { get; set; }
    public virtual bool Verified { get; set; }
} 
```

映射...

```
public class AccountMapping : EntityTypeConfiguration<Account>
{
    public AccountMapping()
    {
        this.ToTable("Account");
    }
}

public class UserAccountMapping : EntityTypeConfiguration<UserAccount>
{
    public UserAccountMapping()
    {
        this.Property(x => x.Username).HasMaxLength(50);
        this.Property(x => x.Password).HasMaxLength(68);
        this.Property(x => x.PasswordSalt).HasMaxLength(24);

        this.Map(x => x.Requires("AccountTypeId").HasValue((int)AccountType.User));
    }
} 
```

尝试调用 Add-Migration 时出现以下错误...

> Map 被多次调用，类型为“UserAccount”，并且至少有一次调用未指定目标表名称。

将 UserAccountMapping 更改为...

```
public class UserAccountMapping : EntityTypeConfiguration<UserAccount>
{
    public UserAccountMapping()
    {
        this.Property(x => x.Username).HasMaxLength(50);
        this.Property(x => x.Password).HasMaxLength(68);
        this.Property(x => x.PasswordSalt).HasMaxLength(24);

        this.Map(x => 
            {
                x.ToTable("Account");
                x.Requires("AccountTypeId").HasValue((int)AccountType.User));
            });
    }
} 
```

似乎解决了这个问题，但后来我得到关于属性被多次映射的错误：

> 'UserAccount' 类型的属性只能映射一次。非键属性“用户名”被多次映射。确保 Properties 方法只指定每个非键属性一次。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:39:40.673

这归结为现有项目中的一些奇怪的映射配置。我无法准确指出问题所在，但它现在正在工作。应该在发布之前在一个干净的项目中进行测试！

# facebook - Open Graph 审批，在不更改应用 URL 的情况下使用暂存站点进行操作审批提交

> ID：14215208
> 
> 赞同：1
> 
> 时间：2013-01-08T12:42:35.780
> 
> 标签：facebook, facebook-opengraph

您好我有一个已经在运行的网站。它使用常规的 facebook 发布操作。我已经建立了一个包含开放图的新版本。现在我需要先批准这些操作，然后才能将此版本上传到生产环境。我有一个位于子域中的临时站点。

```
http://staging.mysite.com 
```

我的 facebook 应用程序当然被指出：`http://www.mysite.com` 在我的登台 ENV 中发布开放图形操作似乎不起作用..我如何批准这个生产应用程序上的操作？（无法将应用程序 URL 切换到暂存，因为那样我的产品将无法工作）

请帮忙谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-26T22:04:42.070

看来这个问题已经在这里成功回答了

[提交新的 OpenGraph 操作以供审核​​，而不将其部署到实时环境](https://stackoverflow.com/questions/17743550/submitting-new-opengraph-action-for-review-without-deploying-it-to-the-live-envi)

# winforms - 使用终端服务器上运行的后台工作进程的 Win 应用程序无响应

> ID：14215211
> 
> 赞同：1
> 
> 时间：2013-01-08T12:42:46.417
> 
> 标签：winforms, backgroundworker, c#-2.0

终端服务器上运行着一个 Win app 工具（C#），用于下载邮件、处理其中的附件并更新其 UI。邮件附件的下载和处理是使用后台工作进程完成的，该进程还负责使用该实例的邮件和附件总数和处理计数更新 UI。有一个计时器可以在指定的持续时间后重新初始化相同的后台工作进程并寻找新邮件。

在我登录 RDC 之前一切正常，但是当我锁定系统（窗口键 + L）或切换用户并返回以重新获得相同的会话时，工具卡住/无响应，即使我锁定和解锁也会发生系统瞬间。我使用了另一个进程监控工具，它最初显示子线程被创建并定期退出，但在它卡住后没有显示任何活动。

我不知道为什么会发生这种情况，窗口混乱是否停止或 UI 控件句柄丢失或或或....

以下是我正在使用的代码块：

```
private void tmrScheduler_Tick(object sender, EventArgs e)
    {
        Application.DoEvents();
        if (bgwMailParser == null || (!bgwMailParser.IsBusy && !objfeMailImportNParse.Is_Parsing))
        {
            bgwMailParser = new BackgroundWorker();
            bgwMailParser.DoWork += new DoWorkEventHandler(objfeMailImportNParse.opLoadCommonData);
            bgwMailParser.DoWork += new DoWorkEventHandler(objfeMailImportNParse.StartMailImport);

            if (HireCraft.Properties.Settings.Default.Close_App_After_Parsing)
                bgwMailParser.RunWorkerCompleted += new RunWorkerCompletedEventHandler(opCloseApplication);

            bgwMailParser.RunWorkerCompleted += new RunWorkerCompletedEventHandler(opDisposeWorker);

            bgwMailParser.RunWorkerAsync();
        }
        Application.DoEvents();
    } 
```

下面的方法处理 bgWorker 进程引发的事件

```
private delegate void Del_updateParsedCounter(Int64 del_MailCount, Int64 del_AttchCount);
    private void UpdateParsedCounter(Int64 MailCount, Int64 AttchCount)
    {
        try
        {
            if (lblMailParsedCount.InvokeRequired)
            {
                Del_updateParsedCounter objUpdateParsedCounter = new Del_updateParsedCounter(UpdateParsedCounter);
                this.Invoke(objUpdateParsedCounter, new object[] { MailCount, AttchCount });
            }
            else
            {
                lblMailParsedCount.Text = MailCount.ToString();
                lblAttchSavedCount.Text = AttchCount.ToString();
            }
        }
        catch (Exception ex)
        {
            Debug.Assert(false, ex.Message, ex.StackTrace);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T18:03:57.537

我确定了问题的解决方案，但忘记了我在这里提出了一个没有得到回答的问题。

问题是后台工作线程在代码的深处声明了一个 UIControl。

当线程创建 UIControl 时，它还会向 SystemEvents.UserPreferenceChanged 事件注册自己，该事件通知颜色、主题、屏幕大小更改、系统锁定/解锁等，并响应哪个父线程需要缺少后台工作线程的消息泵，事件invoke 等待（永远不会出现）响应，导致应用程序挂起或无响应。

[http://support.microsoft.com/kb/943139](http://support.microsoft.com/kb/943139)指向 Microsoft 支持的链接解释了相同的内容。

# java - 我应该使用什么集合

> ID：14215212
> 
> 赞同：0
> 
> 时间：2013-01-08T12:42:51.010
> 
> 标签：java, android

> **可能重复：**
> [选择 Java 集合实现的经验法则？](https://stackoverflow.com/questions/48442/rule-of-thumb-for-choosing-an-implementation-of-a-java-collection)

我的情况是这样的：

*   我有一组需要保存的对象，并且不时地迭代
*   集合的大小是动态的
*   迭代应该访问每个元素
*   集合不需要排序

创建或更新集合没有时间限制，但我想尽可能快地遍历集合。

什么是最好的 Collection 使用（或者您可能会建议使用数组？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:44:57.487

您可以使用一个`List`集合 probaly `ArrayList`。

这取决于参数，例如它是否是有序集合，是否要保持插入顺序，是否要保持唯一性等

[List vs Set](https://stackoverflow.com/questions/1035008/what-is-the-difference-between-set-and-list)
Set：唯一的、无序的集合
List：有序的集合，允许重复元素

[ArrayList 与 LinkedList](https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:45:52.087

一般来说：如果你没有特别的限制，那`ArrayList`是你最好的选择。除非您有非常严格的性能控制，否则不要选择空白数组，否则您有太多出错的机会（并且很有可能无法胜过 ArrayList 实现）。

在您的情况下，快速迭代要求意味着`ArrayList`是一个不错的选择。

# facebook - Facebook 对象可以有两个 URL 吗？

> ID：14215213
> 
> 赞同：1
> 
> 时间：2013-01-08T12:42:53.650
> 
> 标签：facebook, facebook-opengraph

我正在通过 Facebook 的 Open Graph 创建一个“对象”。显然，它在我的应用程序中分配了一个唯一的 URL（例如 www.myapp.com/something/hash），并且我正在注入相关的 OG 元标记。一切都好，然后我可以“附加”一个“喜欢”按钮和 Facebook 评论。

然而，这些用户创建的对象是从 Facebook 应用程序中生成的——它恰好“存在”在同一域下（例如 www.myapp.com/fb），并且该对象在 Facebook 应用程序中有自己的页面（例如 www.myapp .com/fb/something/hash)

因此，同一个对象实际上有两个唯一的 URL。“外部”是我用来识别它的，但我还希望在该页面上有一个“Like”按钮和 Facebook 评论。它似乎不接受类似于 fb 的 DIV 和相应的 og:url 元标记中的 URL，它与它所在的 URl 不匹配。

有没有办法解决这个问题 - 或者我需要在 Facebook 应用程序中调用页面时执行重定向之类的操作，或者进行某种巧妙的模板切换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:57:05.973

只需将*两个*`og:url`URL 的元标记值设置为您希望成为对象“实际” URL 的一个 URL。

# objective-c - UIApplication scheduleLocalNotifications 对于过去的非重复通知为空

> ID：14215214
> 
> 赞同：3
> 
> 时间：2013-01-08T12:42:55.723
> 
> 标签：objective-c, ios, cocoa-touch, uilocalnotification

我已经试用了[3do 应用程序](http://www.cleversome.com/3do/index.php?tab=3do)，它似乎能够安排非重复通知并删除来自通知中心的特定通知。它的工作原理是这样的：当应用程序处于后台时，它们会在通知中心传递，如果您选择其中一个通知，3do 将打开并且您可以选择点击“完成”，如果您点击“完成”，则特定通知将被删除从通知中心。如果您不点击任何内容，通知将留在通知中心。

这是我自己在自己的一个应用程序中遇到的问题，我不明白如何从通知中心删除单个通知。如果通知没有重复间隔，则`scheduledLocalNotifications`UIApplication 数组将为空，因此我无法取消该特定通知并将其从通知中心删除。但是，如果通知具有重复间隔，则 scheduleLocalNotifications 数组不会为空，我可以删除此通知。但是，当通知不重复时，我该如何处理呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T12:58:05.947

`scheduledLocalNotifications array will show as empty even if you have set local notifications`. 最好的方法是保留单独的本地通知对象。这样您就可以轻松删除它。

设置本地通知时，像这样保存对象

```
[[UIApplication sharedApplication] scheduleLocalNotification:localNotification];

NSString *userDefKey =  @"key";
NSData *dataEnc = [NSKeyedArchiver archivedDataWithRootObject:localNotification];
[[NSUserDefaults standardUserDefaults] setObject:dataEnc forKey:userDefKey]; 
```

你应该保留钥匙

当您要删除特定的本地通知时

```
if([[NSUserDefaults standardUserDefaults] objectForKey:userDefKey]){

    NSData *data = [[NSUserDefaults standardUserDefaults] objectForKey:userDefKey];
    UILocalNotification *localNotif = [NSKeyedUnarchiver unarchiveObjectWithData:data];
    [[UIApplication sharedApplication] cancelLocalNotification:localNotif];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:20:48.263

Harikrishnan 让我走上了正轨，但我认为实际上有一个更好的解决方案，它非常简单。

在`- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification`您将参考通知中心中的点击通知。所以你可以这样做：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {

    // This removes the notification from notification center
    [[UIApplication sharedApplication] cancelLocalNotification:notification];
} 
```

# r - 合并 R 中的大数据集并标记不匹配

> ID：14215219
> 
> 赞同：2
> 
> 时间：2013-01-08T12:43:25.787
> 
> 标签：r, loops, join, merge, match

我正在尝试连续加入几个数据集，并标记第一个数据集中在后续数据集中找不到匹配项的观察结果。下面是一个例子，我模拟原始数据集加上三个附加加入。当前的代码可以满足我的要求，但效率非常低。对于大型数据集，可能需要几天时间。是否可以使用 apply 或其他功能来完成此任务？

```
#Toy datasets: x, y, z and w

#dataset X
id <- c(1:10, 1:100)
X1 <- rnorm(110, mean = 0, sd = 1)
year <- c("2004","2005","2006","2001","2002") 
year <- rep(year, 22)

month = c("Jul","Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar","Apr")
month <- rep(month, 11)

x <- data.frame(id, X1, month, year)

#dataset Y
id2 <- c(1:10, 41:110)
Y1 <- rnorm(80, mean = 0 , sd = 1)
year <- c("2004","2005","2006","2001") 
year <- rep(year, 20)

month = c("Jul","Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar","Apr")
month <- rep(month, 8)

y <- data.frame(id2,Y1, year,month)

#dataset z 
id3 = c(1:60, 401:10000)
Z1 = rpois(9660, 10) 
year = c('2004','2005','2006','2002')
year = rep(year, 2415)

month = c("Jul","Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar","Apr")
month <- rep(month, 966)

z = data.frame(id3,Z1,year,month)

#dataset w
id4 = c(1:300, 20:29)
W1 = rnorm(310, 20, 36)
year = c('2004','2005','2006','2000','2002')
year = rep(year, 62)

month = c("Jul","Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar","Apr")
month <- rep(month, 31)

w = data.frame(id4, W1, year, month)

x$id2 = x$yflag = x$zflag = x$wflag = rep(NA, nrow(x))

y.index = rep(NA, nrow(x))
z.index = rep(NA, nrow(x))
w.index = rep(NA, nrow(x))

for(i in 1:nrow(x)) {

  #compare to dataset y, insert yflag == 1 if the same ID, month, year is in x, otherwise 0 
  y.index = which(as.character(y$id2) == as.character(x$id[i]) 
                     & as.character(y$year) == as.character(x$year[i])
                     & as.character(y$month) == as.character(x$month[i])) 
  x$yflag[i] = ifelse(length(y.index==1), 1, 0)
  x$id2[i] = ifelse(length(y.index) == 1, y$id2[y.index], x$id[i])

  ## compare to dataset z, insert zflag == 1 if the same ID, month, year is in x, otherwise 0
  z.index <- which(as.character(z$id3) == as.character(x$id[i])
                   & as.character(z$month) == as.character(x$month[i])
                   & as.character(z$year) == as.character(x$year[i]))
  x$zflag[i] <- ifelse(length(z.index == 1), 1, 0)

  ## compare to dataset w, insert wflag == 1 if the same ID, month, year is in x, otherwise 0
  w.index <- which(as.character(w$id4) == as.character(x$id[i]) 
                   & as.character(w$month) == as.character(x$month[i])
                   & as.character(w$year) == as.character(x$year[i]))
  x$wflag[i] <- ifelse(length(w.index == 1), 1, 0)  
}

print(x) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:24:00.697

众多解决方案之一：
创建所有四个后`data.frames`，

```
x$match.idx <- do.call(paste, c(x[,c("id", "month", "year")], sep=":"))
y$match.idx <- do.call(paste, c(y[,c("id2", "month", "year")], sep=":"))
z$match.idx <- do.call(paste, c(z[,c("id3", "month", "year")], sep=":"))
w$match.idx <- do.call(paste, c(w[,c("id4", "month", "year")], sep=":"))

xy.m <- match(x$match.idx, y$match.idx)
xz.m <- match(x$match.idx, z$match.idx)
xw.m <- match(x$match.idx, w$match.idx)
x$yflag <- x$zflag <- x$wflag <- 0
x$yflag[which(!is.na(xy.m))] <- 1
x$zflag[which(!is.na(xz.m))] <- 1
x$wflag[which(!is.na(xw.m))] <- 1

x <- subset(x, select=-c(match.idx))
> head(x)

  id         X1 month year wflag zflag yflag
1  1 -0.2470932   Jul 2004     1     1     1
2  2  0.2262816   Aug 2005     1     1     1
3  3  0.8473442   Sep 2006     1     1     1
4  4  0.9338628   Oct 2001     0     0     1
5  5 -0.1385540   Nov 2002     1     0     0
6  6  0.7825385   Dec 2004     1     0     0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:38:29.820

我建议结合`within()`和`interaction()`如下：

```
output <- within(x, {
    temp <- interaction(id, month, year) # Something to match to
    # The actual matching takes place here
    # The `+0` at the end is a lazy way to convert
    #   TRUE and FALSE logical values to numeric 1 and 0
    wflag <- temp %in% with(w, interaction(id4, month, year)) + 0
    zflag <- temp %in% with(z, interaction(id3, month, year)) + 0
    yflag <- temp %in% with(y, interaction(id2, month, year)) + 0
    # Remove the temp variable that we created 
    #   since it's no longer required.
    rm(temp)
})

head(output)
#   id          X1 month year yflag zflag wflag
# 1  1 -0.03595218   Jul 2004     1     1     1
# 2  2  0.56329165   Aug 2005     1     1     1
# 3  3  0.74372988   Sep 2006     1     1     1
# 4  4  1.49634088   Oct 2001     1     0     0
# 5  5  0.23107131   Nov 2002     0     0     1
# 6  6  0.15121196   Dec 2004     0     0     1
tail(output)
#      id         X1 month year yflag zflag wflag
# 105  95 -0.0911546   Nov 2002     0     0     1
# 106  96 -0.4140724   Dec 2004     0     0     1
# 107  97 -0.1477702   Jan 2005     0     0     1
# 108  98 -0.3164388   Feb 2006     0     0     1
# 109  99 -0.5082118   Mar 2001     0     0     0
# 110 100 -0.6072856   Apr 2002     0     0     1 
```

# c# - LongListSelector：项目点击？

> ID：14215227
> 
> 赞同：36
> 
> 时间：2013-01-08T12:43:45.263
> 
> 标签：c#, xaml, windows-phone-8, longlistselector

我在 Windows Phone 8 上使用 LongListSelector 控件，但无法找出处理点击项目的最佳方式。我发现的几个示例依赖于 SelectionChanged 事件。但是，这个解决方案是有问题的，因为如果我点击一个打开新页面的项目，回击，然后再次点击同一个项目，它将不起作用，因为该项目已被选中，因此不会触发 SelectionChanged。

我尝试注册点击事件并将当前选定的项目用作点击的项目，但有时当前选定的项目不是我期望的。

我可以将我的 ItemTemplate 包装在一个按钮中并处理每个项目的点击，但我需要重新设置按钮以使其看起来像一个简单的列表项。

最后，我不明白为什么要实现这样一个基本的东西这么复杂。我错过了一种简单而标准的方式吗？

我的第二个愿望是在被点击时对项目产生影响。有没有标准的方法来做到这一点？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-09T10:30:45.463

您可以在每个事件结束时使用`null`LongListSelector 。IE`SelectedItem``SelectionChanged`

```
<phone:LongListSelector x:Name="LLS" SelectionChanged="LLS_SelectionChanged"> 
```

和事件处理程序：

```
private void LLS_SelectionChanged(object sender, SelectionChangedEventArgs e) {

  // If selected item is null, do nothing
  if (LLS.SelectedItem == null)
    return;

  // Navigate to the next page
  NavigationService.Navigate(new Uri("/nextpage.xaml", UriKind.Relative));

  // Reset selected item to null
  LLS.SelectedItem = null;
} 
```

您将触发 SelectionChanged 事件两次，但第二次不会发生任何事情，您应该得到您正在寻找的行为 - （即设置`SelectedItem`为`null`将触发一个新`SelectionChanged`事件，但第二个事件被捕获在 if -陈述）

至于问题的第二部分，您最好发布一个新问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-13T22:21:42.353

我通过**Tap 事件**处理完成了它。

我不喜欢使用 Selected 属性，而是以这种方式获取项目（而且我没有注意到任何错误）：

```
MyListItemClass item = ((FrameworkElement)e.OriginalSource).DataContext 
                                                             as MyListItemClass; 
```

此外，您可以通过从 e.OriginalSource 向上导航 VisualTree 来获取原始项目 ContentPresenter。那样：

```
ContentPresenter itemPresenter = SomeHelperClass
                              .FindParent<ContentPresenter>(e.OriginalSource,""); 
```

FindParent 类似于 find child 在此问题中的位置：[如何按名称或类型查找 WPF 控件？](https://stackoverflow.com/questions/636383/wpf-ways-to-find-controls)

ContentPresenter 是您需要手动更改项目模板的对象（例如，设置“选定”状态）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-13T10:50:45.953

```
 private void Item_tap(object sender, RoutedEventArgs e)
        {
            var element = (FrameworkElement)sender;
            DataSource data = (DataSource)element.DataContext;

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T12:03:13.330

> 我的第二个愿望是在被点击时对项目产生影响。有没有标准的方法来做到这一点？

为此，您唯一需要做的是将其添加到您的控件（或您想要此效果的堆栈面板）：

```
<StackPanel toolkit:TiltEffect.IsTiltEnabled="True"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-28T10:04:35.833

首先将此添加到 *.xaml 页面内

```
LongListSelectorSelectionChanged="listBox_SelectionChanged" 
```

使它看起来像这样：

```
<toolkit:LongListSelector x:Name="listBox" SelectionChanged="listBox_SelectionChanged"> 
```

然后在事件处理程序的 *.xaml.cs 文件中

```
private void listBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    // Write your logic on what you want to do with the selected item
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-18T07:53:56.107

除了halil的回答：

首先，您需要通过 NuGet 安装 Windows Phone Toolkit (WPtoolkit)。然后在 PhoneApplicationPage 上添加命名空间声明。

```
xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit" 
```

在此之后，您可以添加`toolkit:TiltEffect.IsTiltEnabled="True"`到控件定义。

诺基亚的文档很好：http: [//developer.nokia.com/community/wiki/Tilt_Effect_for_Windows_Phone](http://developer.nokia.com/community/wiki/Tilt_Effect_for_Windows_Phone)

奥利弗

# php - Codeigniter 连接表？

> ID：14215228
> 
> 赞同：1
> 
> 时间：2013-01-08T12:43:51.637
> 
> 标签：php, mysql, codeigniter

我有这种表结构：

```
Table Name: collisions
Fields: id, creator1, creator2
(1, 1, 2) - simple data in my sql table

Table Name: creators
Fields: id, artistname
(1, john smith)- simple data in my sql table
(2, steven michael)- simple data in my sql table 
```

我需要加入这些表，这样我就可以获得艺术家姓名而不是 creator1 id 和 creator 2 id。

这是我到目前为止所做的：

```
$this->db->select('collisions.*, creators.artist_name AS cr1, creators.artist_name as cr2');
$this->db->join('creators', 'collisions.creator1 = cr1.id AND collisions.creator2 = cr2.id', 'left');
$data = $this->db->get('collisions')->result(); 
```

但我收到此错误：

```
Unknown column 'cr1.id' in 'on clause'

SELECT `collisions`.*, `creators`.`artist_name` AS cr1, `creators`.`artist_name` as cr2 FROM (`collisions`) LEFT JOIN `creators` ON `collisions`.`creator1` = `cr1`.`id` AND collisions.creator2 = cr2.id 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:50:07.780

请使用实际表名而不是别名：

```
$this->db->select('collisions.*, creators.artist_name AS cr1, creators.artist_name as cr2');
$this->db->join('creators', 'collisions.creator1 = creators.id AND collisions.creator2 = creators.id', 'left');
$data = $this->db->get('collisions')->result(); 
```

不能使用别名的原因是sql的执行顺序如下：

```
1)FROM clause
2)WHERE clause
3)GROUP BY clause
4)HAVING clause
5)SELECT clause
6)ORDER BY clause 
```

因为您使用的是在**select子句中创建的别名，该子句在****where**子句之后执行。

这就是为什么您不能使用不存在的别名的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:09:13.823

这完成了工作

```
 $this->db->select('collisions.*, cr1.artist_name as cr1, cr2.artist_name as cr2');
    $this->db->join('creators AS cr1', 'collisions.creator1 = cr1.id', 'left');
    $this->db->join('creators AS cr2', 'collisions.creator2 = cr2.id', 'left');
    $data = $this->db->get('collisions')->result(); 
```

# drupal-7 - drupal 7 覆盖未在我的站点中呈现

> ID：14215230
> 
> 赞同：0
> 
> 时间：2013-01-08T12:43:54.340
> 
> 标签：drupal-7

我正在为我的网站使用 drupal 7。

突然**/admin/content?render=overlay**显示没有收到数据。:-(

在控制台中显示 defaultVIew 未在 overlay-parent.js 中定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-22T13:19:17.790

发生此问题是因为在 php.ini 中 max_execution_time 设置为低，并且 memory_limit 值也设置为低。

# java - 将 InputStream 重定向到 Socket 的 OutputStream

> ID：14215231
> 
> 赞同：1
> 
> 时间：2013-01-08T12:44:04.647
> 
> 标签：java, sockets, inputstream

假设我在服务器上有以下 Java 代码：

```
Socket aSocket = new Socket(aInetaddr, aPort); //aSocket is a client i m connecting to
InputStream input = aSocket.getInputStream();
Socket bSocket = new Socket(bInetaddr, bPort); //bSocket is a client i m connectin to 
```

现在我想要实现的是，将`InputStream`“输入”`aSocket`从`bSocket`. 我没有关于来自 的内容`InputStream`或最终如何使用它的信息。

整个数据传输必须通过我的服务器，我无法在两个客户端之间建立直接连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:45:58.853

获取第二个套接字的输出流，然后您可以使用[Apache Commons IOUtils.copy()](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#copy%28java.io.InputStream,%20java.io.OutputStream%29)轻松完成此操作。在许多变体中，有一个将输入和输出流作为参数。

# c# - 如何将一个表的自动生成的 ID 插入另一个表的 ID

> ID：14215237
> 
> 赞同：0
> 
> 时间：2013-01-08T12:44:27.320
> 
> 标签：c#, asp.net, .net

我正在尝试制作一个在线购物网站的项目。我有三个表，即类别表、子类别表和产品表。在类别表中我有`CategoryID`和`CategoryName`作为两个字段。在子类别表中我有`CategoryID`和作为字段，在产品表中我有、`Sub-CategoryID`和。`SubCategoryName``CategoryID``SubCategoryID``ProductID``ProductName`

现在在类别表中，categoryID 自动生成并设置为主键。在 sub-Category 表中，没有任何键是自动生成的，并且 categoryID 和 subCategory ID 都设置为组合主键。现在，当我将 categoryName 插入到类别表中时，我希望将 CategoryID（自动生成）插入到 SubCategory 表的 categoryID 列和 ProductTable 的 CategoryID 列中。网上有很多关于这件事的内容，但没有一个能完全解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:51:23.223

我觉得你的设计有一股难闻的气味。

您不需要在子表中具有复合主键，因为您已经在表中定义了唯一标识符。相反，只需使用一列作为主键并将外键关系添加到您的子表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:06:19.163

我认为您为此对用户 SCOPE_IDENTITY 感到羞耻

SCOPE_IDENTITY 返回为任何表生成的最后一个标识值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:34:12.840

```
INSERT INTO Category (....) VALUES(....)

DECLARE @id int;
SELECT @id=SCOPE_IDENTITY();

INSERT INTO Subcategory(CatagoryID,....) VALUES(@id,....)
INSERT INTO Product (CategoryID,....) Values(@id,...) 
```

# javascript - 动态填充复选框的值

> ID：14215238
> 
> 赞同：-3
> 
> 时间：2013-01-08T12:44:28.027
> 
> 标签：javascript, json, jquery-mobile

我的页面中有一个复选框。我编写了 javascript，这样一旦在我的页面中发生点击，属性就会被填充。我必须根据复选框是否选中来为复选框分配真或假。我不知道如何分配自动态填充以来的值

我现在像这样填充我需要真或假（#faxbox）。如何实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:21:19.837

我想这会对你有所帮助。

```
<input class="chkField" type="checkbox"   name="checkbox">

      $('.chkField').change(function () {
        if ($(this).is(':checked')) {
        alert('Checked');
       }
       else
       {
          alert('UnCheked');
       } 
```

# php - 从 2 个表的组合中检测数据中的差距

> ID：14215245
> 
> 赞同：1
> 
> 时间：2013-01-08T12:44:51.197
> 
> 标签：php, mysql, sql, grouping

给定下表设置：

```
--
-- Table structure for table `errors`
--

CREATE TABLE IF NOT EXISTS `errors` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `url` varchar(255) NOT NULL,
  `num` int(11) NOT NULL,
  `pid` bigint(20) unsigned NOT NULL,
  `error` varchar(512) NOT NULL,
  `datetime` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=190441 ;

-- --------------------------------------------------------

--
-- Table structure for table `stored_pictures`
--

CREATE TABLE IF NOT EXISTS `stored_pictures` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `url` varchar(255) NOT NULL,
  `pid` bigint(20) unsigned NOT NULL,
  `num` int(11) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `created_at` datetime DEFAULT NULL,
  `picture_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_url` (`url`),
  KEY `idx_picture_id` (`picture_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2145543 ;

-- -------------------------------------------------------- 
```

我需要能够处理在`stored_pictures`or中不存在的缺失 pid 值`errors`

例如给出：

```
stored_pictures pids:
1
5
6
7
8
9
15
19
20
21
22
23
24
25

errors pids:
2
4
14
17 
```

我需要得到一份清单：

```
3
10
11
12
13
16
18 
```

然后将它们放入 php 数组中进行处理。我还认为我需要在 pid 上为两个表设置一个索引以加快速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:38:23.813

这似乎是一件奇怪的事情。为什么不忘记丢失的 pid 并继续前进呢？反正...

```
 CREATE TABLE ints(i INT NOT NULL PRIMARY KEY);

    INSERT INTO ints VALUES (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);

    CREATE TABLE stored_pictures (pid INT NOT NULL PRIMARY KEY);

    INSERT INTO stored_pictures VALUES (1),(5),(6),(7),(8),(9),(15),(19),(20),(21),(22),(23),(24),(25);

    CREATE TABLE errors (pid INT NOT NULL PRIMARY KEY);

    INSERT INTO errors VALUES(2),(4),(14),(17);

    SELECT i3.i*100 + i2.i*10 + i1.i + 1 missing_pid
      FROM ints i1
      JOIN ints i2
      JOIN ints i3
      LEFT
      JOIN 
         ( SELECT pid FROM stored_pictures
            UNION
           SELECT pid FROM errors
         ) a 
        ON a.pid = i3.i*100 + i2.i*10 + i1.i + 1
      JOIN
         ( SELECT MAX(pid) max_pid 
             FROM 
                ( SELECT pid FROM stored_pictures
                   UNION
                  SELECT pid FROM errors
                ) x
         ) b
        ON b.max_pid >= i3.i*100 + i2.i*10 + i1.i + 1
     WHERE a.pid IS NULL; 
```

# delphi - 除了进程消息，我还能用什么来保持程序响应？

> ID：14215248
> 
> 赞同：5
> 
> 时间：2013-01-08T12:45:06.413
> 
> 标签：delphi

我有一个可以运行很长时间扫描数据库的应用程序。
在此过程中，我使用 processmessage 保持程序响应。
当我的进度条被更新和添加时，会触发此进程消息。
这在大多数情况下都可以正常工作，但是当数据库变大时，进度条需要更长的时间才能上升 1%，程序在此之前变得无响应。

除了进程消息之外，还有其他方法可以让我的程序保持活力吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T13:08:11.917

多线程就是答案。一个标准的 Delphi 应用程序基本上是一个单线程应用程序，一次只能做一件事。因此 gui 锁定，如果它正在做其他事情，它就不能保持响应。

如果您想要一个响应式 gui 并同时进行繁重的工作，您需要在一个或多个单独的线程中进行繁重的工作。这样，您的主线程可以确保您有一个响应式程序，而工作线程可以完成繁重的工作。这适用于繁重的数据库工作，但也适用于下载文件或远程服务器的响应可能需要很长时间的情况。

但是这个答案可能会给你更多的问题然后答案，因为解释如何使用多线程对于这个问题的解释太大了。

不过还有一件事：仔细查看您的数据库代码。您如何从数据库中检索记录，数据库上是否有良好的索引等等等等。在开始考虑多线程之前，您可以通过优化此代码来获得疯狂的速度提升。

我找到了以下资源：[http](http://thaddy.co.uk/threads/) ://thaddy.co.uk/threads/ ，您可以在以下网址下载图片：[http](http://cc.embarcadero.com/item/14809) ://cc.embarcadero.com/item/14809 ，这是非常有用的线程教程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T12:46:51.750

如果您想让您的 GUI 程序显示为响应式，您必须及时为消息队列提供服务。没有替代。

在运行数据库查询时，在不冻结 UI 的情况下执行此操作的方法是将查询移动到不同的线程。

# objective-c - 使用Objective-C中的If语句根据数值设置UITextfield的颜色

> ID：14215251
> 
> 赞同：3
> 
> 时间：2013-01-08T12:45:19.143
> 
> 标签：objective-c, ios, if-statement, uitextfield, uistepper

我目前在连接到 a`UIStepper`的自定义中使用 a来让人们选择他们想要添加到购物车的商品数量。`UITableViewCell``UITextField`

要检查对象是否有库存，我有两个数字：LocalStock 和 TotalStock。

我想做以下事情：

如果对象的数量落入本地库存，我希望显示数字的文本字段变为绿色。

如果对象的数量落入供应商库存（所以要么没有本地库存，或者步进值高于本地库存，所以我们需要从供应商库存中获取）变成`UITextField`蓝色。

如果供应商库存和本地库存都不够，我希望文本字段变为黄色。

我得到以下代码：

```
- (IBAction)stepperValueChanged:(id)sender

NSLog(@"localstock: %@",localstock);
NSLog(@"TotalStock: %@",totalstock);

NSDecimalNumber *value = [NSDecimalNumber decimalNumberWithString: self.textField.text];

if (value <= localstock) 
{
self.aantalTextField.backgroundColor = [UIColor greenColor]; 

NSLog(@"Value %@ <= Localstock %@ >GREEN< Totalstock: %@",value,localstock, totalstock);
}

else if (value <= totalstock) 
{
self.aantalTextField.backgroundColor = [UIColor blueColor]; 

NSLog(@"Value %@ <= totalstock %@ >BLUE< Localstock: %@",value,totalstock,localstock);
}

else
{
self.aantalTextField.backgroundColor = [UIColor yellowColor]; 
NSLog(@"Value: %@ LocalStock: %@ TotalStock %@ >YELLOW<",value,localstock,totalstock);}} 
```

当我运行它时它没有多大意义......有时它会捕捉到绿色语句，有时会捕捉到蓝色，有时相同的值会返回黄色。

有人愿意看一下这个并告诉我（逻辑）错误在哪里吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:50:33.283

您正在比较对象，而不是它们的值。只要它们都是 NSDecimalNumber 类型...您需要与此类似的比较。

```
[value integerValue ] <= [localstock integerValue] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:56:35.113

据我从您的代码中了解到，localstock、totalstock 和 value 是对象，而不是整数，并且您正在比较对象指针，而不是值。相反，您应该使用

```
- (NSComparisonResult)compare:(NSNumber *)decimalNumber 
```

在`NSDecimalNumber`课堂上声明。

或使用例如将所有转换为整数

```
[value intValue] 
```

# jquery - 使用 jQuery 或 RegEx 获取样式表中编写的 CSS 值

> ID：14215256
> 
> 赞同：7
> 
> 时间：2013-01-08T12:45:32.740
> 
> 标签：jquery, regex, css

我正在查看 CSS3 [calc()](https://developer.mozilla.org/en-US/docs/CSS/calc?redirectlocale=en-US&redirectslug=CSS/-moz-calc)，我想知道是否可以使用 jQuery（或 RegEx）从输入字符串中减去一个值。

例如：

```
div {
  width: calc(100% - 50px);
} 
```

我想得到百分比值 ( `100%`) 和像素值 ( `50px`)，我需要知道它后面是什么 ( `px`, `em`, `pt`, `%`)。

所以基本上：

*   `calc(`在分隔符 ( `+`, `-`, `*`, `/`)之后和之前获取一个值
*   在分隔符之后和之前获取一个值`)`
*   请注意，值可能不止一个！例如`calc(100% - 20px - 0.8em)`

**编辑：** Spudley 谈到解析整个 CSS 样式表，但这可能会导致开销。因为这是一个非常糟糕的项目*，*所以开销是**允许**的，所以你可以乱七八糟地做任何你想做的事情！

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T16:25:29.763

您不应该在现实生活中的应用程序中真正这样做，甚至不需要这样做，但既然您说这只是为了好玩；这是有趣的部分：

**是的，你可以做到。**通过 AJAX 调用加载 CSS 文件**不是**唯一的方法，但它可能是使其真正跨浏览器的唯一（但效率低下）的方法。~~即使下面的声明也不能使它真正跨浏览器，因为[**并非所有浏览器都支持**](http://caniuse.com/calc)**`calc()`**该功能，并且它是 CSS3 功能。[](http://caniuse.com/calc)~~

 *****编辑**：截至 2018 年，`calc`所有现代浏览器都支持。*

```
div {
    width: 300px; /* a fallback value for old browsers */
    width: -webkit-calc(100% - 50px);
    width: -moz-calc(100% - 50px);
    width: calc(100% - 50px);
} 
```

您**可以**从中获取原始 CSS 代码`document.styleSheets`及其规则。该**`cssText`**规则的属性将为您提供完整的声明。但是不同的浏览器可能会以不同的方式解析具有`calc()`函数的值。

我将用一个更复杂的例子来看看浏览器是如何处理这个**`calc()`**函数的：

```
calc(100% - -50px*6 + 4em/2); 
```

这就是**Firefox** (v.18) 处理它的方式：

![Firefox 中的 calc() 函数](../Images/01e3fdcbe1ee790344b9d411c838a8e8.png)

这就是**Google Chrome** (v.24) 的处理方式：

![Chrome 中的 calc() 函数](../Images/5e7c0613be708568df79729d3f109605.png)

如图所示; `calc`FF按原样获取非前缀值，Chrome 获取`-webkit`前缀值并使用嵌套括号重新解析它（如果需要）。如果你没有在 Chrome 中声明它 -webkit；它将完全忽略该值。因此，我们在操作 calc 语句时应该考虑到这些。

现在，使用复杂的示例；我们将首先获取 calc() 函数中的语句：

```
"100% - -50px*6 + 4em/2" 
```

然后将语句的元素分解成一个数组：

```
["100%", "-", "-50px", "*", "6", "+", "4em", "/", "2"] 
```

最后，处理数组项的值和单位，使它们以编程方式可用（如您所愿）：

```
[{ value:100, unit:"%" }, "-", { value:-50, unit:"px" }, "*", { value:6, unit:undefined }, "+", { value:4, unit:"em" }, "/", { value:2, unit:undefined }] 
```

上面的最终结果包括值对象和运算符（按顺序）。

*在进一步阅读之前；请注意，下面的代码并未在所有浏览器和情况下完全测试。它不处理嵌套括号解析（像 Chrome 那样）或具有多个或组合 calc() 函数的值。如果你想测试这个；我推荐 Firefox，因为它不解析嵌套括号，或者您可以扩展代码以启用对它们的支持。*

```
// Get the sheet you want to process. (assume we want to process the third sheet):
var sheet = document.styleSheets[2]; //you could also iterate all the sheets in a for loop
processRules(sheet); 
```

```
/** Iterates through the rules of the specified style sheet;  
 *  then dissolves and logs values including a calc() function.
 */
function processRules(sheet) {
    var rules = sheet.cssRules // Mozilla, Safari, Chrome, Opera
        || sheet.rules; // IE, Safari
    for (var i = 0; i < rules.length; i++) {
        var rule = rules[i];
        // Check if we have a calc() function in this rule
        if (hasCalc(rule.cssText)) {
            // Get the calculation statement inside the calc() function.
            var statement = getCalcStatement(rule.cssText);
            // Dissolve the statement into its elements and log.
            console.log(dissolveCalcElements(statement));
        }
    }
} 
```

```
/** Checks whether the CSS value includes a calc() function, 
 *  (This is also for avoiding unnecessary regex.)
 */
function hasCalc(value) {
    return value.toLowerCase().indexOf('calc(') >= 0;
}

/** Gets the full statement (string) inside a calc() function.
 */
function getCalcStatement(rule) {
    if (!rule) return '';
    var pattern = /calc\(([^\)]+)\).*/;
    var match = pattern.exec(rule);
    return match && match.length > 1 ? match[1] : '';
}

/** Splits the calc operation's elements (values and operators) and 
 *  dissolves the values into objects with value and unit properties. 
 */
function dissolveCalcElements(statement) {
    // The CSS calc() function supports 4 basic math operations only: 
    // Addition (+), Subtraction (-), Multiplication (*), Division (/)
    // White-spaces are very important in a calc statement. 
    // From Mozilla: "The + and - operators must always be surrounded by whitespace. 
    // The * and / operators do not require whitespace, but adding it for consistency is allowed, and recommended."
    // We could use: statement.split(/(\s+[\+\-]\s+|\s*[\*\/]\s*)/);
    // to include the operators inside the output array, but not all browsers 
    // support splicing the capturing parentheses into the array like that. So:
    statement = statement.replace('*', ' * ').replace('/', ' / ');
    var arr = statement.split(/\s+/);

    console.log("arr", arr);
    var calcElems = [];
    for (var i = 0; i < arr.length; i++) {
        var d = dissolveElement(arr[i]);
        calcElems.push(d);
    }
    return calcElems;
}

/** Dissolves the value and unit of the element and 
 *  returns either the operator or an object with "value" and "unit" properties.
 */
function dissolveElement(val) {
    // Check if the value is an operator.
    var ops = '+-*/';
    if (ops.indexOf(val) >= 0) return val;

    var o = {};
    // CSS units in a calc statement can have all the regular units. 
    // According to W3C; they can also, can include a "vw" unit (stands for viewport).
    var pattern = /([\+\-]?[0-9\.]+)(%|px|pt|em|in|cm|mm|ex|pc|vw)?/;
    // Exec the value/unit pattern on the property value.
    var match = pattern.exec(val);
    // So we reset to the original value if there is no unit.
    if (match) { 
        var v = match.length >= 2 ? match[1] : match[0];
        o.value = toFloat(v); //parse value as float
        o.unit = match.length >= 3 ? match[2] : '';
    }
    else {
        o = { value:val, unit:''};
    }
    console.log("dissolve", match, val, o);
    return o;
}

// Helper Functions
function toFloat(value) { return parseFloat(value) || 0.0; } 
```

就是这样。正如我所提到的，我不会这样做，但知道是否有可能总是很好。

***注意****：既然你提到了制作一个 jQuery 插件（为了好玩）；你真的不需要 jQuery。并且像这样调用函数`$('div').css('width')`只会给你计算的值，而不是原始的 calc 语句。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T11:36:51.070

这里简短的回答是否定的，你不能那样做。浏览器 API 不会为您提供原始 CSS 代码，因此您无法按照您的要求进行操作。

实现此目的的唯一方法是将样式表文件手动加载到您的 javascript 中（即通过 Ajax 调用），然后对其进行解析。这对浏览器来说是*很多*开销。

这是一些 polyfill 脚本用来实现某些浏览器中不可用的 CSS 功能的一种技术（例如[，这个脚本用于 IE 中的媒体查询支持](http://code.google.com/p/css3-mediaqueries-js/)，但是对于您正在做的检查值，我会说它比它更努力值得像这样的小问题。

如果您愿意冒险并在您的 JS 代码中手动解析整个 CSS 文件只是为了检索 calc 值，那么您最好的选择可能是从现有的 polyfill 脚本之一中复制解析代码。但是，如果我站在你的立场上，我会为潜在问题找到替代解决方案，而不是试图将这个想法强加于其合乎逻辑的结论。

我想根本的问题是这个问题确实需要转过头来：为什么你有一个`calc`具有固定值的CSS `100%`，`50px`如果你不知道代码中这些值是什么？的重点`calc`是允许您指定*已知*值的组合。这不是一些未知的用户输入值（或者至少不应该是），那么为什么您的 Javascript 不知道这些值呢？

如果您的 JS 和 CSS 代码之间存在脱节，您应该考虑如何在比浏览器更高的链上处理它，因为即使您确实设法从`calc`使用 Javascript 中获取值，这意味着浏览器每次页面加载时都必须一遍又一遍地进行相同的处理，以获取每次相同的值。这是很多浪费的努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T19:37:14.253

假设其中没有使用[嵌套括号](https://stackoverflow.com/questions/14215256/get-css-value-as-written-in-stylesheet-with-jquery-or-regex/14445924#comment19721490_14215256)`calc(...)`，并假设对整个 css 进行一些正则表达式匹配的开销是可以接受的，下面的代码

1.  [使用jQuery.get()](http://api.jquery.com/jQuery.get/)加载你的 CSS ，
2.  搜索*任何* `: calc(...);`（有点脏但可能就足够了），
3.  提取大括号之间的任何内容，
4.  删除任何运算符和周围的空格，
5.  警告每个操作数，包括其单位。

您当然必须根据自己的需要进行一些调整，但我认为这基本上是您想要的：

```
$(document).ready(function() {
    $.get("your.css", function(data) {
        var re1 = /: calc\((.*)\);/g;
        var re2 = /\s*[\-\+\/\*]\s*/;
        while (match = re1.exec(data)) {
            var arr = match[1].split(re2);
            for (i in arr) {
                alert(arr[i]);
            }
        }
    });
}); 
```**

# jsf-2 - 如果不使用，则阻止创建 SessionScoped bean

> ID：14215258
> 
> 赞同：1
> 
> 时间：2013-01-08T12:45:38.853
> 
> 标签：jsf-2

我的应用程序主页上有以下代码段：

```
<h:panelGroup rendered="#{loginBean.loggedIn}">
    <p>Welcome, #{loginBean.currentUser.firstName}</p>
</h:panelGroup> 
```

登录豆是`@SessionScoped`. 由于它在主页上被引用，因此在页面加载时将创建一个相同的实例。

现在，假设用户从未登录。在这种情况下，我的 LoginBean 没有用，因为它不会保存有关用户的任何信息。这不是多余的吗？

我并不是说这会导致问题，但我只是想知道不必要的实例化占用了内存空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:59:17.180

将`#{loginBean}`请求/视图设置为范围，并在成功登录时手动将用户置于会话范围内。会话范围可作为地图使用[`ExternalContext#getSessionMap()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getSessionMap%28%29)。

```
@ManagedBean
@ViewScoped
public class LoginBean {

    public void login() {
        // ...

        if (user != null) {
            externalContext.getSessionMap().put("user", user);
        }

        // ...
    }

} 
```

这样你就可以逃脱

```
<h:panelGroup rendered="#{not empty user}">
    <p>Welcome, #{user.firstName}</p>
</h:panelGroup> 
```

### 也可以看看：

*   [使用 j_security_check 在 Java EE / JSF 中执行用户身份验证](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0/2207147#2207147)- 第二个示例（在底部）

# r - 具有 3 个变量的条形图（连续 X 和 Y 以及第三个堆叠变量）

> ID：14215263
> 
> 赞同：0
> 
> 时间：2013-01-08T12:46:02.983
> 
> 标签：r, plot, ggplot2, visualization

我有一些这样的数据：

```
myd <- structure(list(var1 = structure(1:4, .Label = c("II", "III", 
       "IV", "V"), class = "factor"), zero_co = c(15.15152, 3.030303, 
        0, 0), non_zero_CO = c(84.84848, 96.969697, 100, 100), size = c(230, 
        813, 317, 1532)), .Names = c("var1", "zero_co", "non_zero_CO", 
        "size"), row.names = c(NA, -4L), class = "data.frame")

# myd
# I                   II         III   IV     V  
# zero_co       15.15152    3.030303    0     0
# non-zero CO   84.84848   96.969697  100   100
# size         230.00000  813.000000  317  1532 
```

我想`size`在 y 轴和其他两个变量上绘制，`zero_co`并在 x 轴上绘制`non-zero CO`成堆积条形图。我正在尝试使用但发现困难来绘制`gplots`这个`ggplots`。我如何绘制这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:55:46.853

如果我理解正确，这是一个解决方案。由于您在 x 和 y 轴上都有定量变量，因此您不能使用条形图。您需要使用矩形（无论如何看起来像条）。

```
myd <- data.frame (var1 = c("II", "III", "IV", "V"), zero_co = c(15.15152 , 3.030303,    0,     0),
             non_zero_CO = c(84.84848,   96.969697,  100,   100),
              size = c(230.00000,  813.000000,  317,  1532))

    require(ggplot2)

ggplot(myd) + geom_rect(aes(xmin = 0, xmax = zero_co, ymin =size , ymax =size + 80 ), fill = "lightgreen") +
geom_rect(aes(xmin = zero_co, xmax = zero_co + non_zero_CO, ymin =size , ymax =size + 80 ), fill = "darkblue") + theme_bw() 
```

给你剧情：

![在此处输入图像描述](../Images/a143a608844a9429cc88f3e9b7ae4d5d.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T15:19:31.567

根据我有限的理解，这是我可以到达的地方：

```
myd <- data.frame (var1 = c("II", "III", "IV", "V"), zero_co = c(15.15152 , 3.030303,    0,     0),
             non_zero_CO = c(84.84848,   96.969697,  100,   100),
              size = c(230.00000,  813.000000,  317,  1532))
myd1 <- as.matrix (t(myd[,2:3]))

barplot(myd1) 
```

![在此处输入图像描述](../Images/3bec5132e465c80913307e9fd1c5e05b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T15:54:41.237

我不确定你希望最终的情节如何，但这里有一个`ggplot2`建议。

首先，将数据重塑为长格式：

```
library(reshape2)
myd_long <- melt(myd, measure.vars = c("zero_co", "non_zero_CO")) 
```

计算绝对值（我想`value`代表的百分比`size`。）：

```
myd_long <- within(myd_long, valueAbs <- size * value / 100) 
```

阴谋：

```
library(ggplot2)    

ggplot(myd_long, aes(y = valueAbs, x = var1, fill = variable)) +
  geom_bar(stat = "identity") 
```

![在此处输入图像描述](../Images/1b2c5fc2e79e5ad9d7dc15e12d9a89f5.png)

# android - 在android中为不同的屏幕尺寸实现不同的布局时找不到视图ID

> ID：14215265
> 
> 赞同：0
> 
> 时间：2013-01-08T12:46:03.937
> 
> 标签：android, android-layout, android-fragments, findviewbyid

我对片段很陌生。我有实现片段的应用程序，它有不同的布局。当应用程序在智能手机和平板电脑中以纵向运行时，它只显示一种布局（带有一个片段），而在平板电脑中横向运行时，它显示两个窗格布局（带有两个片段）。

尝试在片段布局中获取视图 ID 时出现错误。下面是 res/layout 和 res/layout-large 中的 activity_main_screen.xml 代码，

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

这是 res/layout-large-land 中的 activity_main_screen.xml 代码，

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/grey">

    <fragment android:name="com.pongodev.dr.know.QuestionFragment"
              android:id="@+id/question_fragment"
              android:layout_weight="1"
              android:layout_width="0dp"
              android:layout_height="match_parent" 
              android:layout_marginRight="2dp"/>

    <fragment android:name="com.pongodev.dr.know.AnswerFragment"
              android:id="@+id/answer_fragment"
              android:layout_weight="2"
              android:layout_width="0dp"
              android:layout_height="match_parent" />

</LinearLayout> 
```

这是包含按钮、编辑文本和列表视图的片段视图 question_view.xml，

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainScreen" 
    android:background="@drawable/app_background">

    <LinearLayout 
        android:id="@+id/lytSearchBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/green"
        android:orientation="horizontal"
        android:layout_alignParentTop="true"
        android:gravity="center_vertical"
        android:padding="5dp">
        <EditText 
            android:id="@+id/edtSearch"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:textSize="14sp"
            android:hint="@string/type_question"
            android:textColor="@android:color/widget_edittext_dark"
            android:layout_marginRight="5dp"
            android:background="@drawable/edittext_style"
            android:padding="12dp"
            android:singleLine="true"/>
        <ImageButton 
            android:id="@+id/btnSearch"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@android:drawable/ic_menu_search"
            android:background="@drawable/button_style"
            android:padding="5dp"/>
    </LinearLayout>
    <ListView 
            android:id="@id/android:list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:fadeScrollbars="true"
            android:fastScrollEnabled="true"
            android:divider="@android:color/transparent"
    android:dividerHeight="3dp"
    android:layout_below="@+id/lytSearchBar"/>
</RelativeLayout> 
```

这是 QuestionFragment.java 代码，

```
public class QuestionFragment extends ListFragment {
    OnQuestionSelectedListener mCallback;
    ImageButton btnSearch;
    QuestionListAdapter qla;

    public interface OnQuestionSelectedListener{

        public void onQuestionSelected(int position);
    }

    @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
    Bundle savedInstanceState) {
    // Inflate the layout for this fragment
    View v = inflater.inflate(R.layout.question_view, container, false);
    //list = (ListView) v.findViewById(R.id.list);

    prgLoading = (ProgressBar) v.findViewById(R.id.prgLoading);
    txtAlert = (TextView) v.findViewById(R.id.txtAlert);
    btnSearch = (ImageButton) v.findViewById(R.id.btnSearch);

    btnSearch.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Toast.makeText(getActivity(), "button click", Toast.LENGTH_SHORT).show();
        }
    });

    return v;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    qla = new QuestionListAdapter(getActivity());
    new getQuestionList().execute();
    //setListAdapter(qla);

}

@Override
public void onStart() {
    super.onStart();

    // When in two-pane layout, set the listview to highlight the selected list item
    // (We do this during onStart because at the point the listview is available.)
    if (getFragmentManager().findFragmentById(R.id.answer_fragment) != null) {
        getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    }
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // This makes sure that the container activity has implemented
    // the callback interface. If not, it throws an exception.
    try {
        mCallback = (OnQuestionSelectedListener) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement OnHeadlineSelectedListener");
    }
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // Notify the parent activity of selected item
    mCallback.onQuestionSelected(position);

    // Set the item as checked to be highlighted when in two-pane layout
    getListView().setItemChecked(position, true);
}

public class getQuestionList extends AsyncTask<Void, Void, Void>{

    getQuestionList(){
        if(!prgLoading.isShown()){
            prgLoading.setVisibility(0);
            txtAlert.setVisibility(8);
        }
    }

    @Override
     protected void onPreExecute() {
      // TODO Auto-generated method stub

    }

    @Override
    protected Void doInBackground(Void... arg0) {
        // TODO Auto-generated method stub
        //parseJSONData();

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        prgLoading.setVisibility(8);
        if((Question.length > 0)){
            setListAdapter(qla);
        }else{
            txtAlert.setText(R.string.no_connection_alert);
            txtAlert.setVisibility(0);
        }

    }
}
    } 
```

当我尝试在 QuestionFragment 中获取按钮 ID 时，应用程序出错。如何解决此错误？

**更新**：我不知道为什么，突然我的按钮 id 问题解决了。但是，ProgressBar id 和 TextView id 还有其他问题。这是日志猫。

```
01-08 21:53:34.942: E/AndroidRuntime(23579): FATAL EXCEPTION: main
01-08 21:53:34.942: E/AndroidRuntime(23579): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pongodev.dr.know/com.pongodev.dr.know.MainScreen}: java.lang.NullPointerException
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.os.Looper.loop(Looper.java:137)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.app.ActivityThread.main(ActivityThread.java:4514)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at java.lang.reflect.Method.invokeNative(Native Method)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at java.lang.reflect.Method.invoke(Method.java:511)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at dalvik.system.NativeStart.main(Native Method)
01-08 21:53:34.942: E/AndroidRuntime(23579): Caused by: java.lang.NullPointerException
01-08 21:53:34.942: E/AndroidRuntime(23579):    at com.pongodev.dr.know.QuestionFragment$getQuestionList.<init>(QuestionFragment.java:140)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at com.pongodev.dr.know.QuestionFragment.onCreate(QuestionFragment.java:97)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.support.v4.app.Fragment.performCreate(Fragment.java:1437)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:877)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:551)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1137)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.app.Activity.performStart(Activity.java:4475)
01-08 21:53:34.942: E/AndroidRuntime(23579):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1943)
01-08 21:53:34.942: E/AndroidRuntime(23579):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:31:08.300

您需要确保在针对它们运行代码之前初始化所有视图。正如 njzk 所说，getQuestionList 正在抛出，因此 prgloading 或 txtAlert 为空，因此将访问 getQuestionList 的代码从 OnCreate 移动到覆盖的 onActivityResult。（片段生命周期 - [https://developer.android.com/reference/android/app/Fragment#Lifecycle](https://developer.android.com/reference/android/app/Fragment#Lifecycle)）

# cakephp - 关联在 CakePHP 中无法正常工作

> ID：14215270
> 
> 赞同：0
> 
> 时间：2013-01-08T12:46:19.137
> 
> 标签：cakephp, cakephp-2.0

我有以下型号

```
Shop
_____________________________________
Id  Name  address  city postalcode ...

Category
_______________________________________
Id  Name  Description  shop_id  ...

Product
______________________________________
Id Name Description category_id  ... 
```

而我的`Product`模型我已经定义了`$belongsTo`这样的关系

```
public $belongsTo = array(
            'Category' => array(
                'className' => 'Category',
                'conditions' => array('Category.shop_id' => 5)
            )
        ); 
```

我需要的是，当我想添加新产品时，在类别选择框中应该只显示属于的类别，`shop_id = 5`但我得到了所有类别。

还是我必须更改查找方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:59:36.347

是的，您需要在查找查询中添加条件，因为您需要添加产品表单。

# javascript - 使用javascript获取相邻的div id

> ID：14215275
> 
> 赞同：0
> 
> 时间：2013-01-08T12:46:37.153
> 
> 标签：javascript, html

我正在创建一个简单的 java 脚本驱动的图片拼图。到目前为止，我所做的是创建一个作为父级工作的 div，在该 div 内，我创建了 9 个 div 元素来表示图片的每个部分（这是一个 3x3 拼图）。这是我用于图片元素 div 的 CSS 样式。

```
.part{
background-image: url(../images/image.jpg);
background-position: top left;
background-repeat: no-repeat;
box-shadow: 1px 1px 10px;
}

 #part{
width: 200px;
height: 200px;
float: left;
border: 1px dotted #fff;
} 
```

我的概念是，如果用户单击 div 元素，脚本应该检查相邻的 div 元素。如果元素没有分配背景图像，它应该获取被点击元素的值。

我的问题是，如何从用户点击的 div 中获取相邻 div 的元素 id！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:49:11.727

您可以使用 dom 对象的[nextSibling](https://developer.mozilla.org/en-US/docs/DOM/Node.nextSibling)属性访问相邻的 div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:56:30.267

我推荐 Ankur 的答案，但我必须建议你必须非常小心 nextSibling。看看下面的标记：

```
<div id="Div1">Text1</div>
<div id="Div2">Text2</div> 
```

在 chrome`document.getElementById("Div1").nextSibling`中将返回带有 id 的 div `Div2`。然而，在 IE 中，同一行返回一个 #Text 节点，引用两个`div`标签之间的空白。

为确保您将获得下一次`div`尝试以下内容。

```
var div = document.getElementById("Div1");
do {
    div = div.nextSibling;
} while (div !== null && div.tagName !== "DIV"); 
```

编辑：我设置了一个 jsFiddle 来演示我可能认为您正在寻找的内容：http: [//jsfiddle.net/9q6vz/](http://jsfiddle.net/9q6vz/)

# java - 使用休眠条件的左连接

> ID：14215288
> 
> 赞同：8
> 
> 时间：2013-01-08T12:47:23.223
> 
> 标签：java, mysql, hibernate, hibernate-criteria

我有两个实体：`Issue`和`Issue_Tracker`. 我正在使用休眠 3.6。

```
SELECT `issues`.`issue_id`,
       `issues`.`issue_raised_date`,
       `issues`.`issue_description`,
       `issue_tracker`.`tracker_status`
FROM `issues`
   LEFT JOIN  `issue_tracker` ON `issues`.`issue_id` = `issue_tracker`.`issue_id`
WHERE `issues`.`status`="Escalate To" 
```

如何使用 Hibernate Criteria 实现这一点，最重要的是，我必须使用它进行分页。

**和My Dao如下显示jqgrid中的Issue列表**

> 公共列表 showHelpDeskIssues(DetachedCriteria dc, int from, int size) {
> 
> ```
> Session session = HibernateUtil.getSessionFactory().getCurrentSession();
>  try
>   {
> 
>     Criteria criteria = dc.getExecutableCriteria(session);
>     criteria.setFirstResult(from);
>     criteria.setMaxResults(size);
>     criteria.add(Restrictions.eq("status","Escalate To"));
> 
>     return criteria.list();
>   }
>   catch (HibernateException e)
>   {
>     e.printStackTrace();
>     throw e;
>   } } 
> ```

有关简要说明，请参考这个问题[如何使用 struts2 在 jqgrid 中显示两个表数据 - jqgrid 插件和休眠](https://stackoverflow.com/questions/14211501/how-to-show-two-tables-data-in-jqgrid-using-struts2-jqgrid-plugin-and-hibernat) 任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T12:53:42.897

你可以试试以下

```
Criteria criteria = session.createCriteria(Issues.class);
criteria.setFirstResult(from);
criteria.setMaxResults(size);
criteria.setFetchMode('parent.child', FetchMode.JOIN);
criteria.add(Restrictions.eq("status", "Escalate To");
List<Issues> list= criteria.list(); 
```

这里 parent 是 in 中的属性名称`Issues.java`， child 是 in 中的属性`IssueTracker.java`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-08T13:05:19.270

好，

跟随一个样本...

```
Criteria crit = session.createCriteria(Issues.class);
crit.createAlias("otherClass", "otherClass");
crit.add(Restrictions.eq("otherClass.status", "Escalate To"));
List result = crit.list(); 
```

我认为这可以提供帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-26T13:36:58.410

试试这个，因为这对我有用

```
Criteria criteria = sessionFactory.getCurrentSession().createCriteria(Issues.class, "issues");
criteria.setFetchMode("issues.issuetracker", FetchMode.JOIN);
criteria.createAlias("issues.issuetracker", "issuetracker");
criteria.add(Restrictions.eq("status","Escalate To"));
List list = criteria.list();
return list; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-03T08:43:07.987

注意：在 Hibernate 标准中，内外连接和内连接是一回事。不要混淆。

```
Session session = HibernateUtil.getSessionFactory().getCurrentSession();
 try{
     Criteria criteria = session.createCriteria(Issues.class, "issues");
     criteria.setFirstResult(from);
     criteria.setMaxResults(size);
     criteria.createAlias("issues.issuestracker", "issuestracker", JoinType.LEFT_OUTER_JOIN);
     criteria.add(Restrictions.eq("issues.status", "Escalate To"));

     return criteria.list();
   }catch(HibernateException e){
       e.printStackTrace();
       throw e;
     } 
```

这应该可以解决您的问题。如果您遇到任何麻烦，请告诉我。

# visual-studio-2010 - 创建测试项目时出错：所选项目类型的模板文件丢失

> ID：14215290
> 
> 赞同：2
> 
> 时间：2013-01-08T12:47:26.557
> 
> 标签：visual-studio-2010, unit-testing

有没有人遇到过以下问题：

当我尝试在 VS 中创建单元测试（通过使用上下文菜单“创建单元测试...”类）时，它返回一个异常：

“创建测试项目时出现以下错误。所选项目类型的模板文件丢失。”

我检查了，文件夹 Common7\IDE\ProjectTemplates\CSharp\Test\1033 已经包含 TestProject.zip

以防万一我尝试运行 devenv /installvstemplates 和 devenv /resetsettings。没有帮助。

有任何想法吗？

# android - 带有 Checkboxes 的 Android Listview 如何访问 Checkbox

> ID：14215292
> 
> 赞同：1
> 
> 时间：2013-01-08T12:47:41.100
> 
> 标签：android, listview, checkbox, row

您好，我有一个带有复选框的自定义 ListView，但我不知道如何访问它们。我试过这个：

```
list.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        ViewGroup row = (ViewGroup)view;
        TextView tv = (TextView) row.findViewById(R.id.username);
        CheckBox check = (CheckBox) row.findViewById(R.id.chbUsers);
        check.toggle();

    }
}); 
```

但这不起作用。我到处搜索，但找不到解决方案。这是 list_row.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/list_selector"
    android:orientation="horizontal"
    android:padding="5dip" 
    android:longClickable="true">

    <!--  Bild auf der linken Seite -->
    <LinearLayout android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="3dip"
        android:layout_alignParentLeft="true"
        android:background="@drawable/image_bg"
        android:layout_marginRight="5dip">

        <ImageView
            android:id="@+id/list_image"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:src="@drawable/ic_launcher"/>

    </LinearLayout>

    <!-- Name des Benutzers -->
    <TextView
        android:id="@+id/username"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/thumbnail"
        android:layout_toRightOf="@+id/thumbnail"
        android:text="Alexander Janjic"
        android:textColor="#040404"
        android:typeface="sans"
        android:textSize="15dip"
        android:textStyle="bold"/>

    <!-- Status des Nutzers -->
    <TextView
        android:id="@+id/status"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/username"
        android:textColor="#343434"
        android:textSize="10dip"
        android:layout_marginTop="1dip"
        android:layout_toRightOf="@+id/thumbnail"
        android:text="audiobolle an die Macht!" />

    <!-- Rechts oben (Zuletzt online) -->
    <TextView
        android:id="@+id/lastonline"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@id/username"
        android:gravity="right"
        android:text="11.12.2012 09:14"
        android:layout_marginRight="5dip"
        android:textSize="10dip"
        android:textColor="#10bcc9"
        android:textStyle="bold"/>

     <!-- Checkbox -->
     <CheckBox 
        android:id="@+id/chbUsers"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:focusable="false"/>

</RelativeLayout> 
```

这是 ListAdapter：

```
import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class ListAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader;

    public ListAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader = new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.list_row, null);

        TextView username = (TextView)vi.findViewById(R.id.username); // Username
        TextView status = (TextView)vi.findViewById(R.id.status); // Status
        TextView lastonline = (TextView)vi.findViewById(R.id.lastonline); // Last Online
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // Thumb Image

        HashMap<String, String> user = new HashMap<String, String>();
        user = data.get(position);

        // Alle Einträge in die ListView eintragen
        username.setText(user.get(MainActivity.KEY_USERNAME));
        status.setText(user.get(MainActivity.KEY_STATUS));
        lastonline.setText(user.get(MainActivity.KEY_LASTONLINE));
        if (!user.get(MainActivity.KEY_THUMB_URL).equals("NOURL"))
        {
            imageLoader.DisplayImage(user.get(MainActivity.KEY_THUMB_URL), thumb_image);
        }

        return vi;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:50:36.163

您必须在 getView 方法中添加 checkbox.setOnCheckedChangeListener ，然后您可以访问复选框及其在 Listview 中的位置...

这是方法..

```
checkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() 
        {

            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                // TODO Auto-generated method stub

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:51:18.430

您为复选框设置了侦听器 insede yot getView nethod

像这样：

```
viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check);
      viewHolder.checkbox
          .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
              Model element = (Model) viewHolder.checkbox
                  .getTag();
              element.setSelected(buttonView.isChecked());

            }
          }); 
```

# cloud - 普适计算和云计算有什么区别？

> ID：14215299
> 
> 赞同：0
> 
> 时间：2013-01-08T12:48:31.320
> 
> 标签：cloud, distributed-computing

普适计算和云计算有什么区别？这些是一样的吗？哪一个比另一个来得早？如果有的话，有什么相似之处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:29:49.667

我的理解是，泛在计算是指日常生活中的物体成为计算节点，比如智能家电。云计算是指在互联网上而不是在本地运行应用程序。Gmail 和 Flickr 等服务就是消费者云计算的例子。人们可以在互联网上做这些事情，而不是在自己的机器上阅读邮件或存储照片。有关更多详细信息，请参见维基百科。

*   [普适计算](http://en.wikipedia.org/wiki/Ubiquitous_computing)
*   [云计算](http://en.wikipedia.org/wiki/Cloud_computing)

我不明白你所说的“先于”另一个是什么意思。这两个概念多年来一直作为想法四处流传，有时使用不同的名称。云计算是已经付诸实践的东西。普适计算正在兴起，但尚未广泛部署。

这些概念不直接相关或特别相似。普适计算是关于将计算添加到日常对象和活动中，云计算是关于托管服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T05:19:47.083

普适计算是软件工程中的一个概念，其中计算无处不在。云计算是一种模型，用于实现对可配置计算资源共享池的无处不在的计算访问

[https://javaarchitectview.wordpress.com/2014/06/01/ubiquitous-computing-is-were-everyone-is-moving-now/](https://javaarchitectview.wordpress.com/2014/06/01/ubiquitous-computing-is-were-everyone-is-moving-now/)

# c - 是否可以在 x86-64 上将代码注入堆栈

> ID：14215302
> 
> 赞同：1
> 
> 时间：2013-01-08T12:48:35.330
> 
> 标签：c, buffer-overflow

我的系统是 x86-64 Linux，我尝试在系统上执行堆栈或数据段中的代码。具体来说，我首先将一条二进制指令放入一个整数数组中（我尝试将数组放入堆栈或数据段中），然后将普通函数返回地址替换为数组地址。每次，我都会遇到分段错误。

我的问题是，x86-64 是否有一些分段保护机制来停止堆栈或数据段中的执行行为？如果是真的，这是否意味着通过缓冲区溢出的代码注入在 x86-64 架构中完全停止了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:02:30.617

几乎所有现代通用架构都有办法阻止您执行某些内存区域。操作系统是否使用这些工具取决于操作系统。Linux 禁用堆栈上的执行以及易于执行的架构上的大多数数据。x86_64 就是其中之一。

# python - scipy 与 py2exe

> ID：14215303
> 
> 赞同：16
> 
> 时间：2013-01-08T12:48:41.033
> 
> 标签：python, scipy, py2exe

我使用 python v2.7.3 和 scipy v0.11.0 和 py2exe v0.6.10 在 64 位机器上使用[Christoph Gohlke](http://www.lfd.uci.edu/~gohlke/pythonlibs)的 64 位版本的软件包时收到以下错误消息。如果有人能提供相关和有用的建议，我将不胜感激。这是错误消息：

```
Traceback (most recent call last):
  File "test2.py", line 4, in <module>
  File "scipy\sparse\__init__.pyo", line 191, in <module>
  File "scipy\sparse\csgraph\__init__.pyo", line 146, in <module>
  File "scipy\sparse\csgraph\_shortest_path.pyo", line 12, in <module>
  File "scipy\sparse\csgraph\_shortest_path.pyo", line 10, in __load
  File "_shortest_path.pyx", line 18, in init scipy.sparse.csgraph._shortest_path (scipy\sparse\csgraph\_shortest_path.c:14235)
ImportError: No module named _validation 
```

编译和运行可执行文件在旧的 32 位笔记本电脑上工作（所有东西都是 32 位版本），所以我想我可能没有包括我需要的所有东西。[我新创建的 test2.exe 文件正确地创建并显示了与scipy 的 Getting Started page](http://www.scipy.org/Getting_Started)所示相同的图形。这是我的测试脚本：

```
# test2.py
# code is from the scipy web site example and works in Idle

from scipy import sparse
from scipy import optimize
from scipy import special
from numpy import *
from pylab import *

x = arange(0,10,0.01)
for k in arange(0.5,5.5):
     y = special.jv(k,x)
     plot(x,y)
     f = lambda x: -special.jv(k,x)
     x_max = optimize.fminbound(f,0,6)
     plot([x_max], [special.jv(k,x_max)],'ro')
title('Different Bessel functions and their local maxima')
show() 
```

这是我的 setup.py 文件：

```
# setup.py
from distutils.core import setup
import py2exe
import os
import matplotlib
setup(
    windows=[{'script': r'test2.py'}],
    data_files = matplotlib.get_py2exe_datafiles(),
    options = {
        'py2exe': {
            r'compressed': True,
            r'optimize': 2,
            r'includes': [
                r'matplotlib',
                r'matplotlib.backends.backend_tkagg',
                r'matplotlib.pyplot',
                #r'mpl_toolkits',
                r'pytz'
                ],
            r'dll_excludes': [r'MSVCP90.dll'],
            r'excludes': [
                '_gtkagg',
                '_tkagg',
                '_agg2',
                '_cairo',
                '_cocoaagg',
                '_fltkagg',
                '_gtk',
                '_gtkcairo',
                'tcl'
                ]
            }
        },
    )
os.system("pause")  # leaves the command prompt box open so I can read it 
```

test2.py 和 setup.py 都位于 c:\python27\ 中，我在 64 位机器上成功编译了 test2.exe。在（可能）相关的注释中，我可以读到 scipy v0.11.0 引入了新的稀疏图形工具，我怀疑这是错误消息试图指向我的地方。我是否遗漏了需要明确包含的内容？如果 scipy 有一个像 matplotlib 这样的*get_py2exe_datafiles()*函数来帮助正确捆绑东西，那就太好了。

提前感谢您提供的任何帮助，以及到目前为止的阅读。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-08T13:49:20.880

这似乎是 scipy 0.11.0 的 py2exe 和 pyinstaller 常见的问题，如此处[所述](http://www.pyinstaller.org/ticket/596)。

该线程中给出的临时解决方案是手动导入文件：

> 将以下代码添加到您的程序中
> 
> ```
> def dependencies_for_myprogram():
>     from scipy.sparse.csgraph import _validation 
> ```
> 
> pyInstaller 和 py2exe 都解决了问题

您也可以尝试使用“包含”包含此文件。py2exe 应该足够了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-08T14:33:07.593

Problem solved! Thank you VERY much joaquin. In searching for two days I had not come across that pyinstaller link. For future readers, in the options for py2exe I added

```
scipy.sparse.csgraph._validation 
```

to the includes.

# regex - Vim Regex，匹配最后一次出现的表达式并将其他出现封装为包含的内容？

> ID：14215305
> 
> 赞同：0
> 
> 时间：2013-01-08T12:48:46.747
> 
> 标签：regex, vim

尝试将叶子变量严格转换为 jason 我遇到了一些对我来说很特殊的东西。我的正则表达式匹配最后一次出现的关闭容器，而不是它们相应的关闭容器，最值得注意的是`author`.

维姆命令：

```
%s/ \{6}<\(.*\)>\(\_.*\)<\/\1>/      "\1":"\2", 
```

命令前：

```
<?xml version="1.0"?>
<catalog>
   <book id="bk101">
      <author>Gambardella, Matthew</author>
      <title>XML Developer's Guide</title>
      <genre>Computer</genre>
      <price>44.95</price>
      <publish_date>2000-10-01</publish_date>
      <description>An in-depth look at creating applications 
      with XML.</description>
   </book>
   <book id="bk102">
      <author>Ralls, Kim</author>
      <title>Midnight Rain</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2000-12-16</publish_date>
      <description>A former architect battles corporate zombies, 
      an evil sorceress, and her own childhood to become queen 
      of the world.</description>
   </book>
   <book id="bk103">
      <author>Corets, Eva</author>
      <title>Maeve Ascendant</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2000-11-17</publish_date>
      <description>After the collapse of a nanotechnology 
      society in England, the young survivors lay the 
      foundation for a new society.</description>
   </book>
   <book id="bk104">
      <author>Corets, Eva</author>
      <title>Oberon's Legacy</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2001-03-10</publish_date>
      <description>In post-apocalypse England, the mysterious 
      agent known only as Oberon helps to create a new life 
      for the inhabitants of London. Sequel to Maeve 
      Ascendant.</description>
   </book>
   <book id="bk105">
      <author>Corets, Eva</author>
      <title>The Sundered Grail</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2001-09-10</publish_date>
      <description>The two daughters of Maeve, half-sisters, 
      battle one another for control of England. Sequel to 
      Oberon's Legacy.</description>
   </book>
   <book id="bk106">
      <author>Randall, Cynthia</author>
      <title>Lover Birds</title>
      <genre>Romance</genre>
      <price>4.95</price>
      <publish_date>2000-09-02</publish_date>
      <description>When Carla meets Paul at an ornithology 
      conference, tempers fly as feathers get ruffled.</description>
   </book>
   <book id="bk107">
      <author>Thurman, Paula</author>
      <title>Splish Splash</title>
      <genre>Romance</genre>
      <price>4.95</price>
      <publish_date>2000-11-02</publish_date>
      <description>A deep sea diver finds true love twenty 
      thousand leagues beneath the sea.</description>
   </book>
   <book id="bk108">
      <author>Knorr, Stefan</author>
      <title>Creepy Crawlies</title>
      <genre>Horror</genre>
      <price>4.95</price>
      <publish_date>2000-12-06</publish_date>
      <description>An anthology of horror stories about roaches,
      centipedes, scorpions  and other insects.</description>
   </book>
   <book id="bk109">
      <author>Kress, Peter</author>
      <title>Paradox Lost</title>
      <genre>Science Fiction</genre>
      <price>6.95</price>
      <publish_date>2000-11-02</publish_date>
      <description>After an inadvertant trip through a Heisenberg
      Uncertainty Device, James Salway discovers the problems 
      of being quantum.</description>
   </book>
   <book id="bk110">
      <author>O'Brien, Tim</author>
      <title>Microsoft .NET: The Programming Bible</title>
      <genre>Computer</genre>
      <price>36.95</price>
      <publish_date>2000-12-09</publish_date>
      <description>Microsoft's .NET initiative is explored in 
      detail in this deep programmer's reference.</description>
   </book>
   <book id="bk111">
      <author>O'Brien, Tim</author>
      <title>MSXML3: A Comprehensive Guide</title>
      <genre>Computer</genre>
      <price>36.95</price>
      <publish_date>2000-12-01</publish_date>
      <description>The Microsoft MSXML3 parser is covered in 
      detail, with attention to XML DOM interfaces, XSLT processing, 
      SAX and more.</description>
   </book>
   <book id="bk112">
      <author>Galos, Mike</author>
      <title>Visual Studio 7: A Comprehensive Guide</title>
      <genre>Computer</genre>
      <price>49.95</price>
      <publish_date>2001-04-16</publish_date>
      <description>Microsoft Visual Studio 7 is explored in depth,
      looking at how Visual Basic, Visual C++, C#, and ASP+ are 
      integrated into a comprehensive development 
      environment.</description>
   </book>
</catalog> 
```

命令后：

```
<?xml version="1.0"?>
<catalog>
   <book id="bk101">
      "author":"Gambardella, Matthew</author>
      <title>XML Developer's Guide</title>
      <genre>Computer</genre>
      <price>44.95</price>
      <publish_date>2000-10-01</publish_date>
      <description>An in-depth look at creating applications 
      with XML.</description>
   </book>
   <book id="bk102">
      <author>Ralls, Kim</author>
      <title>Midnight Rain</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2000-12-16</publish_date>
      <description>A former architect battles corporate zombies, 
      an evil sorceress, and her own childhood to become queen 
      of the world.</description>
   </book>
   <book id="bk103">
      <author>Corets, Eva</author>
      <title>Maeve Ascendant</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2000-11-17</publish_date>
      <description>After the collapse of a nanotechnology 
      society in England, the young survivors lay the 
      foundation for a new society.</description>
   </book>
   <book id="bk104">
      <author>Corets, Eva</author>
      <title>Oberon's Legacy</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2001-03-10</publish_date>
      <description>In post-apocalypse England, the mysterious 
      agent known only as Oberon helps to create a new life 
      for the inhabitants of London. Sequel to Maeve 
      Ascendant.</description>
   </book>
   <book id="bk105">
      <author>Corets, Eva</author>
      <title>The Sundered Grail</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2001-09-10</publish_date>
      <description>The two daughters of Maeve, half-sisters, 
      battle one another for control of England. Sequel to 
      Oberon's Legacy.</description>
   </book>
   <book id="bk106">
      <author>Randall, Cynthia</author>
      <title>Lover Birds</title>
      <genre>Romance</genre>
      <price>4.95</price>
      <publish_date>2000-09-02</publish_date>
      <description>When Carla meets Paul at an ornithology 
      conference, tempers fly as feathers get ruffled.</description>
   </book>
   <book id="bk107">
      <author>Thurman, Paula</author>
      <title>Splish Splash</title>
      <genre>Romance</genre>
      <price>4.95</price>
      <publish_date>2000-11-02</publish_date>
      <description>A deep sea diver finds true love twenty 
      thousand leagues beneath the sea.</description>
   </book>
   <book id="bk108">
      <author>Knorr, Stefan</author>
      <title>Creepy Crawlies</title>
      <genre>Horror</genre>
      <price>4.95</price>
      <publish_date>2000-12-06</publish_date>
      <description>An anthology of horror stories about roaches,
      centipedes, scorpions  and other insects.</description>
   </book>
   <book id="bk109">
      <author>Kress, Peter</author>
      <title>Paradox Lost</title>
      <genre>Science Fiction</genre>
      <price>6.95</price>
      <publish_date>2000-11-02</publish_date>
      <description>After an inadvertant trip through a Heisenberg
      Uncertainty Device, James Salway discovers the problems 
      of being quantum.</description>
   </book>
   <book id="bk110">
      <author>O'Brien, Tim</author>
      <title>Microsoft .NET: The Programming Bible</title>
      <genre>Computer</genre>
      <price>36.95</price>
      <publish_date>2000-12-09</publish_date>
      <description>Microsoft's .NET initiative is explored in 
      detail in this deep programmer's reference.</description>
   </book>
   <book id="bk111">
      <author>O'Brien, Tim</author>
      <title>MSXML3: A Comprehensive Guide</title>
      <genre>Computer</genre>
      <price>36.95</price>
      <publish_date>2000-12-01</publish_date>
      <description>The Microsoft MSXML3 parser is covered in 
      detail, with attention to XML DOM interfaces, XSLT processing, 
      SAX and more.</description>
   </book>
   <book id="bk112">
      <author>Galos, Mike",
      "title":"Visual Studio 7: A Comprehensive Guide",
      "genre":"Computer",
      "price":"49.95",
      "publish_date":"2001-04-16",
      "description":"Microsoft Visual Studio 7 is explored in depth,
      looking at how Visual Basic, Visual C++, C#, and ASP+ are 
      integrated into a comprehensive development 
      environment.",
   </book>
</catalog> 
```

我不明白为什么会发生这种情况以及如何在我的表达式中表达第一次出现的关闭容器？IE`%s/ \{6}<\(.*\)>\(\_.*\)<\/\1\{FIRST_OCCURRENCE}>/ "\1":"\2",`

注意：前面的内容与[这个 VimGolf 挑战](http://vimgolf.com/challenges/50ea3ca82bf6290002000040)有关。

另请注意：VimGolf 旨在帮助人们学习更多内容，而不仅仅是一场严肃的比赛。正如它对每一个挑战所说：

> 最好的学习方法是练习。下面，您将找到其他高尔夫球手输入的一些解决方案。要解锁排名更高的解决方案，请提交您自己的条目，该条目与您当前看到的解决方案一样或更好 - 爬梯子！
> 
> 查看这些有用的资源来提高您的 Vim 技能...继续游戏。

请不要因为我试图学习而投票给我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:16:24.167

第二个`\_.*`是贪婪的，这意味着它将搜索所有内容，直到最后一次出现。一种替代方法可能是使用`\{-}`而不是`*`，这是非贪婪的替代方法。

# php - codeigniter 分页库中表格上的序列号

> ID：14215306
> 
> 赞同：0
> 
> 时间：2013-01-08T12:48:48.730
> 
> 标签：php, codeigniter, pagination

使用带有库分页的 CodeIgniter 框架对表进行编号时遇到问题。下面是表格。。

```
+------------------------------------------+
| num| NIP    | Name   | Category  | Type  |
+------------------------------------------+
| 1  | 12345  | udin   | A         |  A1   |
+------------------------------------------+
|    |        |        | B         |  B1   |
+------------------------------------------+
|    |        |        | C         |  C1   |
+------------------------------------------+
| 2  | 54321  | JHON   | B         |  B2   |
+------------------------------------------+
|    |        |        | C         |  C1   |
+------------------------------------------+ 
```

问题在下表的下一页。

```
+------------------------------------------+
| num| NIP    | Name   | Category  | Type  |
+------------------------------------------+
| 1  | 54321  | JHON   | F         |  F2   |
+------------------------------------------+
|    |        |        | G         |  G3   |
+------------------------------------------+
|    |        |        | G         |  G4   |
+------------------------------------------+
|    |        |        | I         |  I3   |
+------------------------------------------+
|    |        |        | J         |  J1   |
+------------------------------------------+ 
```

我想要从前一个值的末尾开始的下一页编号顺序编号。假设在图 2 中编号为“2”而不是“1”。

控制器中的代码：

```
$this->load->library('pagination');
$data['judul'] = 'Report Data Attachment';
$start_row = $this->uri->segment(3);
$per_page = 10; 

        if (trim($this->uri->segment(3)) == '')
        {
            $start_row = '0';
        }
    $config['base_url'] = base_url().'report/index/';
    $config['total_rows'] = $this->lampiran_m->lampiran_karyawan_semua_page_conter()->num_rows();
    //$config['uri_segment'] = '3';
    $config['per_page'] = $per_page;
    $config['full_tag_open'] = '<p class="page">';
    $config['full_tag_close'] = '</p>';       
      $this->pagination->initialize($config);
    $data['pagination'] = $this->pagination->create_links();
     $data['lampiran'] = $this->lampiran_m->lampiran_karyawan_semua_page($start_row,','.$per_page);

        $data['no'] = '';
     $data['last'] = '';

     $this->template->display('tabel_report',$data); 
```

和我的模型中的代码：

```
public function lampiran_karyawan_semua_page($offset='',$limit='')
{
    $qry = "select distinct lampiran.id_category,name_category,tipe,lampiran.nip from lampiran
    left join employee on (lampiran.nip = employee.nip)
    left join category on (lampiran.id_category=category.id_category) where lampiran.id_category = category.id_category and lampiran.nip=employee.nip  order by lampiran.nip desc limit $offset $limit";
    return $this->db->query($qry);
} 
```

并查看此代码：

```
<table border="1" width="100%" cellpadding="0" cellspacing="0" id="product-table" >
            <tr>
            <th class="table-header-repeat line-left minwidth-1"> <a href="#mainform">No</a></th>
                <th class="table-header-repeat line-left minwidth-1"> <a href="#mainform">NIP</a></th>
                <th class="table-header-repeat line-left minwidth-1"> <a href="#mainform">Name</a></th>
                <th class="table-header-repeat line-left minwidth-1"> <a href="#mainform">Category Attachment</a></th>
                <th class="table-header-repeat line-left minwidth-1"><a href="#mainform">Type Attachment</a>    </th>
                <th class="table-header-repeat line-left minwidth-1"><a href="#mainform">Page</a>   </th>

            </tr>
            <?php 

                    foreach($lampiran->result_array() as  $k) {

             $now=$k['nip'];
              if($last!=$now )  {
                $no++;
              echo "<tr><td>$no</td><td>$k[nip]</td><td>".$this->employee_m->get($k['nip'])->nama."</td><td>$k[name_category]</td><td>$k[tipe]</td><td>"; ?>
              <?php foreach($this->lampiran_m->conter_tabel_semua($k['id_category'],$k['tipe'],$k['nip'])->result() as $row) :?>
                        <?php echo $row->nilai;?>
                    <?php endforeach; 
              echo "</td></tr>";

              }else{

              echo "<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>$k[name_category]</td><td>$k[tipe]</td><td>"; ?>
              <?php foreach($this->lampiran_m->conter_tabel_semua($k['id_category'],$k['tipe'],$k['nip'])->result() as $row) :?>
                        <?php echo $row->nilai;?>
                    <?php endforeach; 
              echo "</td></tr>";
              }
             $last = $k['nip'];

             }
            ?>
           <tr><td colspan="5" style="text-align: center;"><b>Jumlah Total</b></td><td>
                <?php foreach($this->lampiran_m->jumlah_semua_lampiran()->result() as $row) :?>
                        <?php echo "<b>$row->jumlah</b>";?>
                    <?php endforeach; ?>
           </td></tr>

            </table> 
```

我希望有人可以在这个问题上帮助我..谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T05:39:20.710

在 foreach 你必须添加

$no = $this->uri->segment(3)+1;

无 NIP 名称 类别 附件类型 附件页

```
 </tr>
        <?php 

            //before foreach you have to add 
            $no = $this->uri->segment(3)+1;
                foreach($lampiran->result_array() as  $k) {

         $now=$k['nip'];
          if($last!=$now )  {
            $no++; 
          echo "<tr><td>$no</td><td>$k[nip]</td><td>".$this->employee_m->get($k['nip'])->nama."</td><td>$k[name_category]</td><td>$k[tipe]</td><td>"; ?>
          <?php foreach($this->lampiran_m->conter_tabel_semua($k['id_category'],$k['tipe'],$k['nip'])->result() as $row) :?>
                    <?php echo $row->nilai;?>
                <?php endforeach; 
          echo "</td></tr>";

          }else{

          echo "<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>$k[name_category]</td><td>$k[tipe]</td><td>"; ?>
          <?php foreach($this->lampiran_m->conter_tabel_semua($k['id_category'],$k['tipe'],$k['nip'])->result() as $row) :?>
                    <?php echo $row->nilai;?>
                <?php endforeach; 
          echo "</td></tr>";
          }
         $last = $k['nip'];

         }
        ?>
       <tr><td colspan="5" style="text-align: center;"><b>Jumlah Total</b></td><td>
            <?php foreach($this->lampiran_m->jumlah_semua_lampiran()->result() as $row) :?>
                    <?php echo "<b>$row->jumlah</b>";?>
                <?php endforeach; ?>
       </td></tr>

        </table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-26T05:09:20.437

请在 foreach 语句之前添加以下行

```
$currentffset = ($this->uri->segment(3)) ？$this->uri->segment(3) : 0;
$slno_start = (($currentffset / $per_page) * per_page) + 1;
```

之后，在 foreach 的最后一行使用 $slno_start 作为 foreach 中每个项目的序列号，只需递增它

```
$slno_start++;
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-02T07:21:41.550

上述答案的微小改进。谢谢你们俩

```
$count =$this->uri->segment(3)+1;
foreach($records as $rec){echo $count; $count++;} 
```

# c# - 如何在列表视图的图像列表中添加系统图标

> ID：14215307
> 
> 赞同：2
> 
> 时间：2013-01-08T12:48:49.300
> 
> 标签：c#, winforms, listview, imagelist

我`imageList`在列表视图中使用此代码添加了图标。现在我希望在显示某个目录的列表视图时显示它们。

我的问题是：

我需要做出哪些改变来`imagelist1`控制？以及如何调用`imagelist1`代码？

```
imageList1.Images.Add(
    BlackFox.Win32.Icons.IconFromExtensionShell(
        ".*", 
        BlackFox.Win32.Icons.SystemIconSize.Small));

//lv.ImageIndex = 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:40:12.840

如果我理解正确，您希望将 ImageList 中的图标与 ListView 中的相应文件一起显示。为此，您只需将 ListView 对象的`SmallImageList`or`LargeImageList`属性指向 ImageList（取决于您的 ListView 使用的图标显示模式）。

```
private void UpdateListView() {
   ImageList IconList = new ImageList();

   IconList.Images.Add(
        BlackFox.Win32.Icons.IconFromExtensionShell(".*",
        BlackFox.Win32.Icons.SystemIconSize.Small));

   YourListview.SmallImageList = IconList;

   //Add the items to your Listview                

} 
```

不要忘记将 ImageList 中的图标分配给 ListView 中的项目：

```
MyListItem.ImageIndex = 0; 
```

或者

```
MyListItem.ImageKey = "MyImageName"; 
```

或在添加 ListItems 时立即添加它们：

```
ListViewItem MyListItem= new ListViewItem("ItemName", "MyImageName");
ListViewItem MyListItem2= new ListViewItem("ItemName2", int ImageIndex); 
```

# c# - C# word 自动查找和替换长文本字段

> ID：14215308
> 
> 赞同：2
> 
> 时间：2013-01-08T12:48:58.183
> 
> 标签：c#, ms-word

我有一个功能可以在 word 文档中查找和替换文本占位符。这适用于短文本字符串。但是，当尝试用更大的文本字符串（即一段文本）替换时，什么也不做。

```
DocReplaceField(ref Word.Document objDoc, string Field, string Value)
{
   object missing = System.Reflection.Missing.Value;

   Word.Range range = objDoc.Content;

   object findtext = Field;
   object f = false;
   object findreplacement = Value;
   object findforward = false;
   object findformat = true;
   object findwrap = WdFindWrap.wdFindContinue;
   object findmatchcase = false;
   object findmatchwholeword = false;
   object findmatchwildcards = false;
   object findmatchsoundslike = false;
   object findmatchallwordforms = false;
   object findreplace = WdReplace.wdReplaceAll;

   range.Find.Execute(
       findtext,
       findmatchcase,
       findmatchwholeword,
       findmatchwildcards,
       findmatchsoundslike,
       findmatchallwordforms,
       findforward,
       findwrap,
       findformat,
       findreplacement,
       findreplace,
       missing,
       missing,
       missing,
       missing);
} 
```

如果我尝试用“Something”替换“[placeholder]”，这可以找到，但是如何用“Something”替换“[placeholder]”

“Nullam non lorem sapien, et imperdiet sapien. Curabitur vestibulum justo eu enim bibendum vulputate. Integer vel velit non elit molestie auctor non ut nisi. Suspendisse potenti. Donec augue nulla, vestibulum a pulvinar id, scelerisque quis mauris. Integer eget ullamcorper velit。 Sed at purus sit amet felis pulvinar dictum at non neque. Praesent laoreet mauris id sem venenatis pellentesque。

例如

更新：

问题似乎是单词的查找和替换不能替换超过 255 个字符。搜索匹配占位符，但实际上无法替换文本。有没有人有调用 find 来定位占位符然后手动选择文本并插入新文本的示例。而不是使用单词查找和替换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:31:26.200

替换文本非常简单：一旦找到它，范围对象将包含文档的找到部分。您需要先删除找到的文本，然后插入新的文本：

```
range.Find.Execute(findtext, findmatchcase, findmatchwholeword, 
    findmatchwildcards, findmatchsoundslike, findmatchallwordforms, findforward, 
    findwrap, findformat, findreplacement, findreplace, missing, 
    missing, missing, missing);

range.Delete();
range.Text = "This is the new content."; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-09T12:45:42.580

我所做的是将替换字符串分成更小的部分，并在除最后一个字符串之外的每个字符串的末尾添加占位符，然后重复替换命令的次数与字符串片段一样多。它也适用于较小的字符串，因此您不必使用其他方法：

```
string acierto; // where acierto is my placeholder
string[] cadenas;
cadenas = BSV.Funciones.ParteCadenas(valor, 170); // function to split a string into 170 character pieces

for (int xx = 0; xx < cadenas.Length; xx++)
{
    if (xx < cadenas.Length - 1) cadenas[xx] += acierto;
    parrafo.Range.Find.Execute(acierto, nulo, nulo, nulo, nulo, nulo, nulo, nulo, nulo, cadenas[xx], WdReplace.wdReplaceAll, nulo, nulo, nulo, nulo);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-05T15:57:59.040

这是针对您的问题的快速而简短的解决方案。如果 range.Find.Execute 方法对超过 255 个字符不起作用，那么您可以简单地手动扫描文档并搜索文本，然后从文本字符串发出替换。

要使用下面的代码，您必须包含以下内容：

```
Using Word = Microsoft.Office.Interop.Word;
Using System.Text.RegularExpressions;   //This is used for Regex 
```

您需要在 Microsoft Word 对象库中添加。下面是从头到尾的代码。

```
string filePath = @"C:\YourfilePathHere";
string findText = "Your text to locate goes here";
string replaceText = "The replacement text longer than 255 characters";
Word.Application fileOpen = new Word.Application;
Word.Document doc = fileOpen.Documents.Open(filePath, ReadOnly: false);
foreach (Word.Paragraph para in doc.Paragraphs) {
   Word.Range paraRange = para.Range;
   string text = paraRange.Text;
   Regex regex = new Regex(findText);
   string final = regex.Replace(text, replaceText);
   paraRange.Text = final;
} 
```

现在上面将用无限大小的替换替换您的文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:54:56.623

您可以尝试使用 Word 书签而不是查找和替换吗？

一个示例狙击手 -

```
object oBookMark = "MyBookmark";
oDoc.Bookmarks.Item(ref oBookMark).Range.Text = "Some Text Here"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T13:02:38.807

您的问题可能是搜索多行文本。

每次越线时尝试添加“\r\n”，也不能只制作这样的多行字符串，您需要在开头使用@：

```
@"firstLine\r\n
second"; 
```

除此之外，我在执行方法中看不到任何多行选项。请注意，execute 方法中的参数都有一个默认值，您可以使用命名参数并忽略不使用的参数。

另外请编辑您的问题，多行确实导致了问题。

编辑：您应该在之后设置它，而不是将替换文本作为参数。 [http://social.msdn.microsoft.com/forums/en-US/vsto/thread/9c50450e-9579-4e89-8e9c-8c84c8319d0b](http://social.msdn.microsoft.com/forums/en-US/vsto/thread/9c50450e-9579-4e89-8e9c-8c84c8319d0b)

```
range.Execute(... arguments ...);
range.Text = "Replacement text more than 255 characters"; 
```

另一种选择是使用 ^c 作为替换文本，这将提示 Word 使用放置在剪贴板上的任何文本作为替换文本。 [http://word.tips.net/T000021_Replacing_Long_Blocks_of_Text.html](http://word.tips.net/T000021_Replacing_Long_Blocks_of_Text.html)

```
System.Windows.Forms.Clipboard.SetText("Replacement text longer than 255 chars");
range.Execute(... replacementText: "^c ...); // don't actually know where you enter your replacement text :P 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-02T11:33:09.873

Word.Application.Selection.Find.Execute 不支持在替换文本中超过 255 个字符。

因此，我们需要首先选择要替换的单词，而不是用所需的文本替换选定的文本。

```
object missing = System.Reflection.Missing.Value;

  wordApp.Application.Selection.Find.Execute(findText, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing, missing,
                                 missing, missing, missing);

            wordApp.Application.Selection.Text = (String)(replaceText);
            wordApp.Application.Selection.Collapse(); 
```

# c++ - 如何在linux中运行exe？

> ID：14215309
> 
> 赞同：-4
> 
> 时间：2013-01-08T12:49:00.197
> 
> 标签：c++, elf, portable-executable

假设我有一个 .exe 文件，我希望它在不使用 wine 工具的情况下在 Linux 中运行。

我想转换 PE-> ELF。

谁能帮助如何以编程方式做到这一点？

谢谢， Sujitha.kv

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:51:00.837

这是不可能的，因为它是一个完全不同的操作系统！

唯一的方法是让它通过像 Wine 这样的程序运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:52:01.770

您基本上需要从 EXE 中删除所有有趣的代码部分，但没有 PE 特定信息，然后将代码重新组合并重新链接到 ELF 文件中。这将需要一些逆向工程和大量的手动工作。

这将非常困难，所以我建议您简单地使用 WINE。

# python - PythonWebkit 默认目录列表

> ID：14215318
> 
> 赞同：2
> 
> 时间：2013-01-08T12:49:29.527
> 
> 标签：python, webkit, directory-listing

我想为我正在处理的应用程序更改 pythonwebkit 的默认目录列表（从 gi​​.repository 导入的目录列表）。webkit中是否有任何功能/脚本可以完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:02:00.370

**编辑**

默认目录列表样式的代码位于文件[net/base/dir_header.html](http://code.google.com/searchframe#OAMlx_jo-ck/src/net/base/dir_header.html)`chrome.pak`中，并以and结尾`chrome_100_percent.pak`。

[python 模块 data_pack.py](http://code.google.com/searchframe#OAMlx_jo-ck/src/tools/grit/grit/format/data_pack.py&exact_package=chromium&ct=rc&cd=3&q=data_pack)可以处理这些文件。

如果您想从列表中过滤某些文件类型，您可以在`addRow()`

~~您将不得不使用[os.chdir()](http://docs.python.org/3/library/os.html#os.chdir)来更改整个过程的当前目录。AFAIK，WebKit 不会为当前文件夹等内容保留内部环境。~~

# php - CS 购物车相关产品选项

> ID：14215319
> 
> 赞同：2
> 
> 时间：2013-01-08T12:49:33.480
> 
> 标签：php, smarty, cs-cart

我认为当前的 CS Cart 设置 (v3) 不可能做到这一点，但一些自定义开发不会成为问题（或者可能是附加组件）。

当客户选择一个选项时，我希望显示另一个选项。例如，选择“雕刻顶部”选项“是”，因此应显示另一个选项（文本字段）以将雕刻文本添加到其中。如果选择“否”，则应隐藏文本文件。

我可以用 JavaScript 做到这一点，但区分某些选项有点困难（因为它们都有随机 id）。

是否可以将一种选择与另一种联系起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T05:25:26.060

您可以通过选项名称挂钩；）因为在所有产品上都相同，只有语言差异，但您需要添加到选项 ex ：`<div data-name="color" id="opt_12" class="cm-picker-product-options ty-product-options">`

请告诉我您的 cs-cart 版本，我可以指导您如何添加数据字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T07:31:32.863

您应该使用带有例外的顺序选项。

[http://screencast.com/t/3JWHn6i7M](http://screencast.com/t/3JWHn6i7M)

例如，您有 2 个选项。使用“相框”拍照。如果“是”，客户应选择框架颜色。

使用选项类型作为允许的顺序异常。

创建新异常：

```
Use Frame:       [Yes]
Color of Frame:  - Any variant - 
```

所以在客户区你会看到这个： [http ://screencast.com/t/ecPh5A9Av](http://screencast.com/t/ecPh5A9Av)

当您单击复选框时，颜色选择器将可用，“否” - 将被阻止。如果您将此设置：“缺少变体处理”更改为“完全隐藏选项”（在管理区域的选项详细信息弹出窗口中），如果您勾选“否”，第二个选项将被删除。

# php - 如何构建具有许多配置文件的巨大 mysql 数据库

> ID：14215320
> 
> 赞同：-1
> 
> 时间：2013-01-08T12:49:35.703
> 
> 标签：php, mysql, sql, database

问题是如何用例如 10.000 个配置文件构建一个巨大的 mysql 数据库。

**示例 1**

1 个数据库

3 数据库字段（field_profile、field_images、field_posts 等）

field_profile 10.000 个带有 id 和其余信息的配置文件。

field_images 150.000 张与 database_profile 中的 id 相关的图像。

field_images 350.000 个与 database_profile 中的 id 相关的帖子。

搜索缓慢，但是当我想改变一些非常容易的东西时。

**示例 2**

1 个数据库

30.000 个数据库字段（field_profile_profile1、field_images_profile1、field_posts_profile1、field_profile_profile2、field_images_profile2、field_posts_profile2 等。

field_profile_profile1 1 个带有信息的配置文件。

field_images_profile1 50

field_posts_profile1 3500

快速搜索但是当我想改变一些非常困难的东西时？！

**哪个例子是最好的还是有更好的选择？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:57:08.060

我会进行规范化，因为您的记录数量甚至还不算多：

```
[table_profile]
profile_id

[table_image]
image_id
profile_id

[table_post]
post_id
profile_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:36:01.520

您应该简单地提出表格，如果不同帖子的字段配置文件和字段图像相同，那么

```
table profile  
field_id   field_profile   field_image 

table post
field_id   field_post 
```

第二个选项如果 field_profile ， field_image 每次都不同，然后拿出一个表。

```
table field
field profile  field_image  field_post 
```

尝试将重复数据存储在不同的表中，并在需要时使用 id，这将减少您的数据存储并提高数据库访问速度。

# actionscript-3 - 用于游戏 AS3 的 Continuos 计时器和对象

> ID：14215327
> 
> 赞同：1
> 
> 时间：2013-01-08T12:49:50.900
> 
> 标签：actionscript-3, timer, character

我目前正在开发一款游戏，您需要尽可能长时间地生存，同时避免遇到的问题。（全部使用AS3）
目前我在游戏场和问题场之间从一个场景到另一个场景，但是每次我去问题场景时，游戏场景中的计时器都会自行重置。我想知道在问题场景中是否可以让计时器继续？
此外，我在菜单之间有一个可移动角色，顺便说一下，它也是在不同的场景中制作的，玩家可以移动他，我非常希望他留在他在下一个屏幕中的最后一个位置，如我将他移动到主菜单的右上角，当我进入选项菜单时，我希望他仍然在右上角，而不是在他的初始位置。

至于我的计时器，这是我目前正在使用的代码：

```
 import flash.utils.Timer;    
    import flash.events.Event;    
    import flash.events.TimerEvent;    
    import flash.globalization.DateTimeFormatter;    

    var timer:Timer = new Timer(100);    
            timer.start();    
    timer.addEventListener(TimerEvent.TIMER, timerTickHandler);    
    var timerCount:int = 0;    

    function timerTickHandler(Event:TimerEvent):void    
    {
        timerCount += 100;
        toTimeCode(timerCount);
    }

    function toTimeCode(milliseconds:int) : void {
//create a date object using the elapsed milliseconds
var time:Date = new Date(milliseconds);

//define minutes/seconds/mseconds
var minutes:String = String(time.minutes);
var seconds:String = String(time.seconds);
var miliseconds:String = String(Math.round(time.milliseconds)/100);

//add zero if neccecary, for example: 2:3.5 becomes 02:03.5
minutes = (minutes.length != 2) ? '0'+minutes : minutes;
seconds = (seconds.length != 2) ? '0'+seconds : seconds;

//display elapsed time on in a textfield on stage
timer_txt.text = minutes + ":" + seconds+"." + miliseconds;

    } 
```

我的角色正在使用以下代码：

```
 /* Move with Keyboard Arrows
    Allows the specified symbol instance to be moved with the keyboard arrows.

    Instructions:
    1\. To increase or decrease the amount of movement, replace the number 5 below with                the number of pixels you want the symbol instance to move with each key press.
    Note the number 5 appears four times in the code below.
    */

    var upPressed:Boolean = false;    
    var downPressed:Boolean = false;    
    var leftPressed:Boolean = false;    
    var rightPressed:Boolean = false;    

    rutte.addEventListener(Event.ENTER_FRAME, fl_MoveInDirectionOfKey);    
    stage.addEventListener(KeyboardEvent.KEY_DOWN, fl_SetKeyPressed);    
    stage.addEventListener(KeyboardEvent.KEY_UP, fl_UnsetKeyPressed);    

    function fl_MoveInDirectionOfKey(event:Event)    
    {    
        if (upPressed)    
        {    
            rutte.y -= 5;    
        }    
        if (downPressed)    
        {    
            rutte.y += 5;    
        }    
        if (leftPressed)    
        {    
    rutte.x -= 5;    
    rutte.scaleX = 1; // face left    
}    
if (rightPressed)    
{    
    rutte.x += 5;    
    rutte.scaleX = -1; // face right    
}    
    }    

    function fl_SetKeyPressed(event:KeyboardEvent):void    
    {    
switch (event.keyCode)    
{    
    case Keyboard.UP:    
    {    
        upPressed = true;    
        break;    
    }    
    case Keyboard.DOWN:    
    {
        downPressed = true;    
        break;    
    }    
    case Keyboard.LEFT:    
    {    
        leftPressed = true;    
        break;    
    }    
    case Keyboard.RIGHT:    
    {    
        rightPressed = true;    
        break;    
    }    
}    
    }    

    function fl_UnsetKeyPressed(event:KeyboardEvent):void    
    {    
switch (event.keyCode)    
{    
    case Keyboard.UP:    
    {    
        upPressed = false;    
        break;    
    }    
    case Keyboard.DOWN:    
    {    
        downPressed = false;    
        break;    
    }    
    case Keyboard.LEFT:    
    {    
        leftPressed = false;     
        break;    
    }    
    case Keyboard.RIGHT:    
    {    
        rightPressed = false;    
        break;    
    } 
```

预先感谢您为我提供的所有帮助。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:32:54.967

在 Flash 中，时间轴和场景的工作方式有一个基本方面。一旦你从一个框架移到另一个框架，框架的内容和它的属性/状态/动作就会消失并重置。

我个人建议您使用单个场景，将时间线划分为标记为帧的帧，在那里您可以为动作和全局变量指定一个层，一个用于用户界面，另一个用于每个帧的特定动作。例子：

![闪存时间轴](../Images/81f217881d1ea5642d6d06075d8f0591.png)

因此，您永远不会丢失变量的引用，因为帧不会不断地重新创建，您所有的重要动作，包括您的计时器，都应该在您的第一帧中。

我正在测试，在这里你可以看到一个工作示例： [http](http://db.tt/FZuQVvt3) ://db.tt/FZuQVvt3 。您可以在此处下载 FLA 文件以用作项目的基础：http: [//db.tt/RHG9G5lo](http://db.tt/RHG9G5lo)

# intellij-idea - 让 IntelliJ 了解 XML 文件中指向 Java 元素的链接

> ID：14215330
> 
> 赞同：5
> 
> 时间：2013-01-08T12:49:54.003
> 
> 标签：intellij-idea

我有一个链接到 Java 资源的自定义 XML 格式。为简单起见，假设我的 XML 文件如下所示：

```
<root>
  <java-class>my.fully.qualified.class.name</java-class>
</root> 
```

最终我的参考文献会稍微复杂一些。它不会直接包含完全限定的类名，我需要一些逻辑来解析正确的类，但我想在这里尽可能简单地保持示例。

现在我希望可以 Strg+Click 元素的文本并希望 IntelliJ 将我带到 .java 文件，就像在 Spring-XML 文件中一样。在[IDEA 插件开发常见问题解答](http://confluence.jetbrains.net/display/IDEADEV/Plugin+Development+FAQ "IDEA 插件开发常见问题")中，有一个名为“[如何在 XML 文件中添加对 Java 元素的自定义引用？](http://www.intellij.net/forums/thread.jspa?threadID=196522 "如何在 XML 文件中添加对 Java 元素的自定义引用？") ”的链接，这听起来很像我所需要的。不幸的是，它链接到一个讨论，其中有人或多或少地完成了这样的事情，有一些小问题。尽管如此，我明白我可能需要编写接口 com.intellij.psi.PsiReference 的实现。不幸的是，谷歌搜索“PsiReference”和“IntelliJ”或“IDEA”并没有提供任何关于如何使用它的教程，但我找到了[XmlValueReference类](http://grepcode.com/file/repository.grepcode.com/java/ext/com.jetbrains/intellij-idea/10.0/com/intellij/psi/impl/source/resolve/reference/impl/providers/XmlValueReference.java?av=h#XmlValueReference "XmlValueReference")这听起来很有用。再次谷歌搜索“XmlValueReference”并没有发现任何关于如何使用该类的有用信息。至少[PSI Cookbook](http://confluence.jetbrains.net/display/IDEADEV/PSI+Cookbook "PSI 食谱")告诉我，我可以使用`JavaPsiFacade.findClass()`. 我会感谢任何指导正确用法的教程、提示等。

上面链接的讨论提到，一旦我最终设法实现它，我需要调用`registry.registerReferenceProvider(XmlTag.class, provider)`以注册我的提供者，但是“注册表”属于哪种类型，我从哪里得到它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T10:25:35.420

首先，这是几天前出现的一个[很好的教程，它解释了 IntelliJ 插件开发的基础知识（你应该看看](http://confluence.jetbrains.com/display/IntelliJIDEA/Custom+Language+Support)[参考贡献者](http://confluence.jetbrains.com/display/IntelliJIDEA/Reference+Contributor)部分）。

您可能必须定义自己的`PsiReferenceContributor`，这将在您的引用中`plugin.xml`像这样：

```
<psi.referenceContributor implementation="com.yourplugin.YourReferenceContributor"/> 
```

在您的参考贡献者中，有一种方法`registerReferenceProviders(PsiReferenceRegistrar)`可以让您调用`registry.registerReferenceProvider(XmlTag.class, provider)`.

最后，在您的实例中`PsiReferenceProvider`，您必须测试标签名称以过滤掉不包含类引用的标签，[然后](http://devnet.jetbrains.net/message/5460579#5460579)使用`JavaPsiFacade.findClass()`.

根据我的经验，获得有关 IntelliJ 插件开发帮助的最佳地点是[JetBrains 的论坛。](http://devnet.jetbrains.net/community/idea/open_api_and_plugin_development)

# php - PHP/Mysql 日期保存为 '0000-00-00'

> ID：14215331
> 
> 赞同：14
> 
> 时间：2013-01-08T12:49:53.583
> 
> 标签：php, mysql, date

我有一个 Mysql 数据库，我在其中保存客户订单的日期。

日期由 php 函数生成`date('Y-m-d')`。我的数据库中有两条记录有值`'0000-00-00'`。一个是由澳大利亚的客户创建的，另一个是由意大利的客户创建的。其他5000个订单都可以。

我的问题是如何生成这样的日期？可能与个别浏览器设置有关吗？

感谢帮助

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T12:53:00.663

我能找到的唯一原因是您的客户输入了不正确的日期格式，或者他输入了一个空字符串。请记住 Mysql 中的日期格式是 yyyy-mm-dd。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-06T21:47:35.740

我注意到我遇到了同样的问题，结果只是我在插入 $date 变量时没有在我的 $date 变量周围加上单引号，因此它插入了一个显示为 0000-00- 的空值或空白值00 在数据库中。一旦我在我的插入语句中输入**'$date'**而不是**$date ，该值就会按预期出现。**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-08T12:51:02.377

这意味着 MySQL 传递了一个无效值，其中根本没有值。检查您的代码以确保它始终具有该日期的有效值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-08T12:56:27.400

检查此帖子[默认日期 '0000-00-00 00:00:00' 或 null](https://stackoverflow.com/questions/12482560/default-date-0000-00-00-000000-r-null)。它会回答你的问题。客户端代码中的年、月和日变量可能尚未初始化。

**编辑** 如果不是这种情况，那么您似乎`recently changed the Date-related column`在数据库中从`VARCHAR or TEXT`to `DATE`。

`MySql changes``NULL`在这种情况下，所有值都为`'0000-00-00'`。因此，如果某个时间过去，日期不是 UI 上的必填字段，并且如果它作为 NULL 传递，那么上面的事情就发生了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-29T04:33:49.923

可能是您有纯粹的编程或过时的`mysql`功能。例如：`CURDATE() + 5`将在数据库中正确插入日期，但是如果用户在`2016-12-28`数据库中执行此操作，则会显示`0000-00-00`. 如果当前日期是 2016-12-20，它将正常工作。绝对正确的功能是`CURDATE() + INTERVAL 5 DAY`. 你写在一月初，所以也许你有类似的问题。

# matlab - 如何在 MATLAB 中使用插值？

> ID：14215336
> 
> 赞同：-3
> 
> 时间：2013-01-08T12:50:19.227
> 
> 标签：matlab, interpolation

谁能帮助我应该如何在 MATLAB 上对以下数据使用 interp1-function：

```
 -99
     3
     1
     7
    10
    10
    22
    29
   -99
   -99
    25
    26
    60
   142
    78
   124
    74
    26
    13
    18 
```

-99 数据值对应于错误值，我想对它们进行插值...建议？=) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:58:32.723

目前不在 Matlab 周围，但我认为您可以执行以下操作：

```
 Y =  [-99
         3
         1
         7
        10
        10
        22
        29
       -99
       -99
        25
        26
        60
       142
        78
       124
        74
        26
        13
        18];

%Make an array of x values - I'm assuming yours are evenly spaced
Xi = 1:length(Y);

%remove the -99 points
errors = Y == -99;
X = Xi(~errors);
Y = Y(~errors);

Yi = interp1(X, Y, Xi); 
```

所以在代码中 X 和 Y 是你想要插值的点的 x 和 y 坐标向量，即你的输入点（没有错误！），而 Xi 是你想要插值的点的位置的向量值对于（如果您认为 X 是位置，Y 是值）。点 Yi 将是对应于 Xi 的插值，我认为在这种情况下它将是你的原始向量，其中 -99 点被线性插值替换。有趣的事情可能会发生在边缘：/检查文档。希望没有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:01:03.900

假设您的数组是`a`.

```
x = find(a ~= -99);
y = a(x);
xi = 1:length(a);
yi =  interp1(x, y, xi); 
```

`yi`就是你要找的。

# python - 如何删除列表中的多个字符？

> ID：14215338
> 
> 赞同：9
> 
> 时间：2013-01-08T12:50:27.263
> 
> 标签：python, string, list

有这样的清单：

```
x = ['+5556', '-1539', '-99','+1500'] 
```

如何以很好的方式删除 + 和 - ？

这可行，但我正在寻找更多的pythonic方式。

```
x = ['+5556', '-1539', '-99', '+1500']
n = 0
for i in x:
    x[n] = i.replace('-','')
    n += 1
n = 0
for i in x:
    x[n] = i.replace('+','')
    n += 1
print x 
```

# 编辑

`+`并不`-`总是处于领先地位；他们可以在任何地方。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-08T13:35:11.273

使用`string.translate()`, 或用于 Python 3.x `str.translate`：

Python 2.x：

```
>>> import string
>>> identity = string.maketrans("", "")
>>> "+5+3-2".translate(identity, "+-")
'532'
>>> x = ['+5556', '-1539', '-99', '+1500']
>>> x = [s.translate(identity, "+-") for s in x]
>>> x
['5556', '1539', '99', '1500'] 
```

Python 2.x Unicode：

```
>>> u"+5+3-2".translate({ord(c): None for c in '+-'})
u'532' 
```

Python 3.x 版本：

```
>>> no_plus_minus = str.maketrans("", "", "+-")
>>> "+5-3-2".translate(no_plus_minus)
'532'
>>> x = ['+5556', '-1539', '-99', '+1500']
>>> x = [s.translate(no_plus_minus) for s in x]
>>> x
['5556', '1539', '99', '1500'] 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-08T12:52:41.727

使用[`str.strip()`](http://docs.python.org/2/library/stdtypes.html#str.strip)或最好[`str.lstrip()`](http://docs.python.org/2/library/stdtypes.html#str.lstrip)：

```
In [1]: x = ['+5556', '-1539', '-99','+1500'] 
```

使用`list comprehension`：

```
In [3]: [y.strip('+-') for y in x]
Out[3]: ['5556', '1539', '99', '1500'] 
```

使用`map()`：

```
In [2]: map(lambda x:x.strip('+-'),x)
Out[2]: ['5556', '1539', '99', '1500'] 
```

**编辑：**

如果您也介于数字之间，请使用@Duncan的基于解决`str.translate()`方案[。](https://stackoverflow.com/a/14216120/846892)`+``-`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-08T12:52:27.950

```
x = [i.replace('-', "").replace('+', '') for i in x] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-28T13:21:02.657

`string.translate()`仅适用于非 unicode 的字节字符串对象。我会使用`re.sub`：

```
>>> import re
>>> x = ['+5556', '-1539', '-99','+1500', '45+34-12+']
>>> x = [re.sub('[+-]', '', item) for item in x]
>>> x
['5556', '1539', '99', '1500', '453412'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-16T20:07:27.207

这些函数清除不需要字符的字符串列表。

```
lst = ['+5556', '-1539', '-99','+1500']
to_be_removed = "+-"

def remove(elem, to_be_removed):
    """ Remove characters from string"""
    return "".join([char for char in elem if char not in to_be_removed])

def clean_str(lst, to_be_removed):
   """Clean list of strings"""
   return [remove(elem, to_be_removed) for elem in lst]

clean_str(lst, to_be_removed)
# ['5556', '1539', '99', '1500'] 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-01-11T05:00:17.083

```
basestr ="HhEEeLLlOOFROlMTHEOTHERSIDEooEEEEEE"

def replacer (basestr, toBeRemove, newchar) :
    for i in toBeRemove :
        if i in basestr :
        basestr = basestr.replace(i, newchar)
    return basestr

newstring = replacer(basestr,['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'], "")

print(basestr)
print(newstring) 
```

> 输出 ：
> 
> 嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻
> 
> 你好

# c# - 将现有数据库映射到创建另一个数据库的模型

> ID：14215342
> 
> 赞同：0
> 
> 时间：2013-01-08T12:50:39.213
> 
> 标签：c#, database, entity-framework, mapping

我正在使用 CodeFirst 方法，EF 4.0。我有应用程序使用的表模型。但是我想用另一个数据库作为百科全书，这意味着这个数据库有很多数据，这些数据是通过外键互连的。我已经声明了我的外部数据库的 DbSet。但是，当生成模型时，必须存在于我的外部数据库中的所有实体都作为空表放置在我的主数据库中。所以这就是问题所在。如何指定某些实体使用外部数据库而其他使用主数据库？

# ios - 在同一个应用程序中从右到左和从左到右的语言？

> ID：14215344
> 
> 赞同：1
> 
> 时间：2013-01-08T12:50:50.853
> 
> 标签：ios, objective-c, xcode, localization

据我了解，苹果不允许在应用商店中使用不同语言的 2 个相同的应用程序，但是如果一种语言从左到右而另一种语言从右到左怎么办？这意味着不同的菜单、不同的项目定位、不同的 UI 等（即使是 segues 也不同）。显然我不能为此使用常规本地化。是否有解决方案，或者我只是要编写一个非常大的应用程序，其中包含很多“如果用户使用希伯来语转到 vc1，否则转到 vc2”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:20:18.413

考虑 iOS 6.0 的自动布局功能。

[https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html)

“你甚至不必为像希伯来语和阿拉伯语这样的语言指定新的布局，其中元素本身的从左到右的顺序通常应该颠倒过来。”

# c++ - 运行没有窗口的控制台应用程序

> ID：14215345
> 
> 赞同：3
> 
> 时间：2013-01-08T12:50:55.777
> 
> 标签：c++, c, visual-c++

我有 3 个控制台程序 (.exe)，我想从一个控制台应用程序运行它们而不显示 3 个控制台程序的窗口。所有程序都是用VC++编写的。关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T13:06:04.813

您可以使用 ShellExecute 命令运行其他应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:05:02.523

看看 ShellExecute 函数[http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx)

SW_HIDE 作为最后一个参数将......好吧，隐藏窗口。

# sql - 删除带条件的前导字符

> ID：14215346
> 
> 赞同：0
> 
> 时间：2013-01-08T12:50:59.147
> 
> 标签：sql, sql-server, sql-server-2008

我有一个带有字段 ID 的表。

以下是一些示例值：

1.  0001
2.  0002
3.  990003
4.  990004
5.  880005
6.  880006
7.  888006

我有一点要获取这些记录，我需要删除 99/88（在我的情况下，它是一个预先知道的前缀，它是 99 或 88 ......请记住，有效的 id 也可以说是 888888需要转换为8888！。

我知道，如果所有记录都有前导 99 或 88，我可以使用：

```
SELECT RIGHT(MyColumn, LEN(MyColumn) - 2) AS MyTrimmedColumn 
```

如果有领先的 99/88，我将如何包含一个条件，否则不修剪？

预期的输出将是：

1.  0001
2.  0002
3.  0003
4.  0004
5.  0005
6.  0006
7.  8006

该函数应该是选择查询的一部分，而不是独立查询（问题示例 - 字段 ID）！

```
SELECT
ISNULL(ProcId,0) ProcId,
ISNULL(ID,'') ID,
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:53:34.157

```
SELECT case when mycolumn >= 880000 
            then RIGHT(MyColumn, LEN(MyColumn) - 2) 
            else mycolumn
       end AS MyTrimmedColumn 
```

或者

```
SELECT case when mycolumn between 880000 and 889999
            then MyColumn - 880000 
            when mycolumn between 990000 and 999999
            then MyColumn - 990000 
            else mycolumn
       end AS MyTrimmedColumn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:53:25.063

```
SELECT RIGHT(MyColumn, LEN(MyColumn) - 2) AS MyTrimmedColumn from table-name 
where id like '99%' 
```

# sql-server - 优化 TSQL 存储过程

> ID：14215350
> 
> 赞同：0
> 
> 时间：2013-01-08T12:51:14.850
> 
> 标签：sql-server, tsql, stored-procedures, query-optimization

我正在尝试在我们的网站上将下面的存储过程调整为每分钟 30k 次。

```
CREATE PROCEDURE [dbo].[mltHttpCallStatus] 

    @SupplierId     AS INTEGER,
    @CallIsGood     AS BIT,
    @MaxWorkerThreads   AS INT,
    @MaxIOThreads       AS INT,
    @AvailWorkerThreads AS INT,
    @AvailIOThreads     AS INT,
    @ScriptTypeId       AS INT,
    @SiteTypeId         AS VARCHAR(50),
    @ConnectionTime     AS INT,
    @SiteName       AS VARCHAR(50),
    @HostName       AS VARCHAR(50)

AS

    --DEBUG BEN (Flight details keep failing) 07012008 19:30
    --Return
SET NOCOUNT ON

DECLARE @GoodCalls      AS INT,
    @BadCalls       AS INT

SET @BadCalls = 0
SET @GoodCalls = 0

IF @CallIsGood = 1
    SET @GoodCalls = 1

ELSE
    SET @BadCalls = 1

    UPDATE  HttpCallStatus_tbl SET
        GoodCalls       = GoodCalls + @GoodCalls,
        BadCalls        = BadCalls + @BadCalls,
        TotalConnectionTime = TotalConnectionTime + @ConnectionTime
     --WHERE dbo.datepart_fn(DayDate) = dbo.datepart_fn(getDate())
    WHERE DATEADD(dd, 0, DATEDIFF(dd, 0, DayDate)) = DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()))
        AND DATEPART(HOUR, DayDate) = DATEPART(HOUR, getDate()) 
        AND SupplierId   = @SupplierId
        AND ScriptTypeId = @ScriptTypeId
        AND SiteTypeId = @SiteTypeId
        AND SiteName = @SiteName
        AND HostName = @HostName

    IF @@ROWCOUNT = 0

    BEGIN
        INSERT INTO HttpCallStatus_tbl (DayDate,SupplierId,GoodCalls,BadCalls,ScriptTypeId,SiteTypeId,TotalConnectionTime, 
                        MaxWorkerThreads,MaxIOThreads,AvailWorkerThreads,AvailIOThreads,SiteName,HostName)
             VALUES (CONVERT(DATETIME, getDate(), 103),
                @SupplierId,
                @GoodCalls,
                @BadCalls,
                @ScriptTypeId,
                @SiteTypeId,
                @ConnectionTime,
                0,
                0,
                0,
                0,
                @SiteName,
                @HostName)
    END 
```

表结构

```
 Column_name         Type        Length
    DayDate             datetime    8
    SupplierId          int     4
    GoodCalls           int     4
    BadCalls            int     4
    ScriptTypeId                int     4
    SiteTypeId          varchar     50
    TotalConnectionTime         int     4
    MaxWorkerThreads            int     4
    MaxIOThreads                int     4
    AvailWorkerThreads          int     4
    AvailIOThreads              int     4
    SiteName            varchar     50
    HostName            varchar     50
    SearchCount         int     4
    DomainId            int     4 
```

索引

```
[PK_HttpCallStatus_tbl] clustered, unique, primary key [DayDate],[SupplierId]

[IX_HttpCallStatus_tbl] nonclustered [SupplierId]

[idx_HttpCallStatus_tbl_1]  nonclustered    
[SupplierId], [ScriptTypeId], [SiteTypeId], [SiteName], [HostName]
 , [DayDate], [GoodCalls], [BadCalls], [TotalConnectionTime] 
```

我注意到这些变量是未使用的@MaxWorkerThreads、@MaxIOThreads、@AvailWorkerThreads、@AvailIOThreads。也可以使变量@goodcalls & @Badcalls TINYINTS。我还在插入语句 VALUES (CONVERT(DATETIME, getDate(), 103) 中注意到了这种转换。但我认为这是默认值，因此可以更改为 Getdate()

我的问题是很难衡量改进，因为它们都非常快，我是否值得进行这些更改，我什至会看到一点点收获吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:59:41.407

我认为您在错误的地方进行了优化。您担心插入时一行的转换，而忽略了它前面的 where 子句中的转换/函数。看起来您已将逻辑从标量函数移回 where 子句，这将有所帮助，但我将专注于更改这一点：

```
WHERE DATEADD(dd, 0, DATEDIFF(dd, 0, DayDate)) = DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()))
        AND DATEPART(HOUR, DayDate) = DATEPART(HOUR, getDate()) 
```

进入可以与索引一起使用的东西。看看 sargability [http://en.wikipedia.org/wiki/Sargable](http://en.wikipedia.org/wiki/Sargable)并找出一种方法来避免您的数据出现这种情况。那将是真正的收益所在。

此外，仍然在 where 子句中，只需检查所有其他条件是否具有相同的数据类型，以防止隐式转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:39:57.247

试试这个：

```
CREATE PROCEDURE [dbo].[mltHttpCallStatus] 

    @SupplierId     AS INTEGER,
    @CallIsGood     AS BIT,
    @MaxWorkerThreads   AS INT,
    @MaxIOThreads       AS INT,
    @AvailWorkerThreads AS INT,
    @AvailIOThreads     AS INT,
    @ScriptTypeId       AS INT,
    @SiteTypeId         AS VARCHAR(50),
    @ConnectionTime     AS INT,
    @SiteName       AS VARCHAR(50),
    @HostName       AS VARCHAR(50)

AS

    --DEBUG BEN (Flight details keep failing) 07012008 19:30
    --Return
SET NOCOUNT ON

DECLARE @GoodCalls      AS INT,
        @BadCalls       AS INT,
        @StartHour DateTime,
        @EndHour   DateTime

Select  @StartHour = DATEADD(Hour, DATEDIFF(Hour, 0, GETDATE()), 0),
        @EndHour   = DATEADD(Hour, 1 + DATEDIFF(Hour, 0, GETDATE()), 0),
        @BadCalls = 0,
        @GoodCalls = 0

IF @CallIsGood = 1
    SET @GoodCalls = 1

ELSE
    SET @BadCalls = 1

    UPDATE  HttpCallStatus_tbl SET
        GoodCalls       = GoodCalls + @GoodCalls,
        BadCalls        = BadCalls + @BadCalls,
        TotalConnectionTime = TotalConnectionTime + @ConnectionTime
     --WHERE dbo.datepart_fn(DayDate) = dbo.datepart_fn(getDate())
    WHERE DayDate >= @StartHour
        And DayDate < @EndHour
        AND SupplierId   = @SupplierId
        AND ScriptTypeId = @ScriptTypeId
        AND SiteTypeId = @SiteTypeId
        AND SiteName = @SiteName
        AND HostName = @HostName

    IF @@ROWCOUNT = 0

    BEGIN
        INSERT INTO HttpCallStatus_tbl (DayDate,SupplierId,GoodCalls,BadCalls,ScriptTypeId,SiteTypeId,TotalConnectionTime, 
                        MaxWorkerThreads,MaxIOThreads,AvailWorkerThreads,AvailIOThreads,SiteName,HostName)
             VALUES (CONVERT(DATETIME, getDate(), 103),
                @SupplierId,
                @GoodCalls,
                @BadCalls,
                @ScriptTypeId,
                @SiteTypeId,
                @ConnectionTime,
                0,
                0,
                0,
                0,
                @SiteName,
                @HostName)
    END 
```

请注意，我在查询之前计算了开始时间和结束时间，然后将其用作要搜索的日期范围。由于您的主键的第一列是 DayDate，这应该会大大提高性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:37:28.633

1.  **删除索引** `[IX_HttpCallStatus_tbl] nonclustered [SupplierId]`。**它被 覆盖** `[idx_HttpCallStatus_tbl_1]`。
2.  **将索引更改** `[idx_HttpCallStatus_tbl_1] nonclustered [SupplierId], [ScriptTypeId], [SiteTypeId], [SiteName], [HostName], [DayDate], [GoodCalls], [BadCalls], [TotalConnectionTime]` **为索引** `[SupplierId], [ScriptTypeId], [SiteTypeId], [SiteName], [HostName], [DayDate]` **并[包含](http://msdn.microsoft.com/en-us/library/ms190806.aspx)列** `[GoodCalls], [BadCalls], [TotalConnectionTime]`

就存储过程而言，我将在更新上方添加：

```
DECLARE @MinDate DATETIME
DECLARE @MaxDate DATETIME
SET @MinDate=DATEADD(HOUR,DATEPART(HOUR, GETDATE()),CONVERT(DATETIME,CONVERT(VARCHAR,GETDATE(),101)))
SET @MaxDate=DATEADD(HOUR,1,@MinDate) 
```

并更改 where to be 的前两行

```
WHERE  DayDate>=MinDate AND DayDate<MaxDate 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T13:45:03.527

几件事：

以下将所有插入的 GETDATE() 转换为 'dd/mm/yyyy' （无时间信息）

```
CONVERT(DATETIME, getDate(), 103) 
```

因此，可以将数据类型更改为 DATE 而不是 DATETIME。通过该更改，可以更改/删除以下项目：

```
CONVERT(DATETIME, getDate(), 103) 

Can change to:

CAST(GETDATE() AS DATE) 
```

这可以一起删除，因为时间部分没有被保存：

```
AND DATEPART(HOUR, DayDate) = DATEPART(HOUR, getDate()) 
```

这

```
DATEADD(dd, 0, DATEDIFF(dd, 0, DayDate)) = DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE())) 
```

可以改为：

```
DayDate = CAST(GETDATE() AS DATE) 
```

而且因为您使用的是 SQL Server 2008+，所以您可以使用 MERGE 而不是 UPDATE/INSERT 逻辑

[http://technet.microsoft.com/en-us/library/bb510625.aspx](http://technet.microsoft.com/en-us/library/bb510625.aspx)

# objective-c - 找出第一次安装的应用程序版本 - iOS

> ID：14215355
> 
> 赞同：2
> 
> 时间：2013-01-08T12:51:22.927
> 
> 标签：objective-c, ios

我想将我的应用从付费版本更改为带有广告的免费版本。但是，我不希望最初为该应用付费的人获得广告。

我在想我可以包含一个新的更新，它有额外的代码来设置一些 UserDefaults，说这个版本没有广告，然后更新到免费版本。但这似乎不是一个非常可靠的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:01:41.490

我认为，这取决于您的程序可以运行的最低操作系统版本。对于 iOS 5.0 及更高版本，您可以尝试使用 iCloud 存储有关已购买版本的一些标志。它允许您不仅为一个设备设置此标志，还可以为用户的帐户设置此标志。

或者您可以将此信息存储在钥匙串中以供以后获取。但在这种情况下，您的用户将无法使用他（她）的帐户在其他设备上没有广告。

无论如何，据我所知，您需要先为您的应用程序创建一个更新，以便在任何地方写入此标志。并且仅在一段时间内使用 AD 进行更新。

如果有人对此问题有其他想法，我将很高兴看到评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:50:55.783

似乎没有可靠的方法来检测是否有人为您的应用付费或后来在价格更改为免费时下载了它。出于这个原因，我决定在应用商店中创建两个单独的条目。

# c# - Windows 应用商店应用程序栏按钮文本绑定

> ID：14215358
> 
> 赞同：2
> 
> 时间：2013-01-08T12:51:28.147
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我有一个带有一些像这样的按钮的应用栏

```
<Page.BottomAppBar>
    <AppBar x:Name="bottomAppBar" Padding="10,10,10,10"  >
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Style="{StaticResource ReadAppBarButtonStyle}"  >
            </Button>
        </StackPanel>
    </AppBar>
</Page.BottomAppBar> 
```

我想将按钮文本绑定到**ListView**的选定项属性并使用**IValueConverter**。

我发现要使用 AutomationProperties.Name 设置按钮文本

如何通过**XAML**或**Code**绑定此属性。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:06:20.827

你是对的，由于某种原因，以下方法不起作用，尽管相同的绑定工作得很好，你将它用于例如`Text`a 的属性`TextBox`：

```
<Button Style="{StaticResource SkipBackAppBarButtonStyle}" AutomationProperties.Name="{Binding SelectedItem, ElementName=List}" /> 
```

我确实设法通过在视图模型中使用属性并绑定到它来使其工作，`ListView.SelectedItem`并且`AutomationProperties.Name`：

```
<ListView ItemsSource="{Binding Strings}" 
          SelectedItem="{Binding SelectedString, Mode=TwoWay}" />
<!-- ... -->
<Button Style="{StaticResource SkipBackAppBarButtonStyle}" 
        AutomationProperties.Name="{Binding SelectedString}" /> 
```

`SelectedString`应该是视图模型中的一个属性，实现`INotifyPropertyChanged`：

```
public class ViewModel : INotifyPropertyChanged
{
    public ViewModel()
    {
        Strings = new ObservableCollection<string>();
        for (int i = 0; i < 50; i++)
        {
            Strings.Add("Value " + i);
        }
    }

    public ObservableCollection<string> Strings { get; set; }

    private string _selectedString;
    public string SelectedString
    {
        get { return _selectedString; }
        set
        {
            if (value == _selectedString) return;
            _selectedString = value;
            OnPropertyChanged();
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

# git - 启用集成 SMTP 通知与自制挂钩

> ID：14215359
> 
> 赞同：1
> 
> 时间：2013-01-08T12:51:34.497
> 
> 标签：git, gitolite, gitlab

首先，我对使用 gitlab 时通过 Web 应用程序管理用户和项目的强大解决方案感到非常兴奋。

我完成了安装并将我的 smpt 设置添加到文件 config/production.rb 中：

```
 config.action_mailer.delivery_method = :smtp
 config.action_mailer.smtp_settings = {
 :address => 'myserver.com',
 :port => 25,
 :domain => 'gitlab.adomain.com',
 :authentication => :plain,
 :user_name => 'gitlab@myserver.com',
 :password => '',
 :enable_starttls_auto => true
 } 
```

此外，我更改了文件 config/gitlab.yml：

```
email:
from: account@myserver.com
… 
```

检查 SMTP 设置并与其他应用程序一起正常工作。我重新启动了 gitlab-server，期望在将用户添加到项目时发送通知，或者即使在不使用自制钩子的情况下将提交传播到远程。但他们不是。

这是我的网络界面的输出：

```
 gitserver:3254 on mailer at 2 minutes ago

Class
    Notify
Arguments

    "project_access_granted_email"
    31    
Exception
    Net::SMTPAuthenticationError
Error
    502 Command "AUTH PLAIN <tokenid>" not implemented 
```

这些是我的问题：

1.  在我的 resque 概述中，有一个名为 mailer 的队列，其中包含 1 个未完成的活动（邮件）作业。下面有一条信息表明目前没有工人在工作。我该如何处理？

2.  如果 gitlab 无法管理这个，我想实现接收后挂钩来发送邮件。如何为此配置我的后缀？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:50:02.610

这取决于您的 GitLab 版本，但最新版本似乎不适用于 Resque 工作人员（包括[resque mailer](https://github.com/gitlabhq/gitlabhq/pull/813)）：
请参阅[问题 2472](https://github.com/gitlabhq/gitlabhq/issues/2472)：

```
# bundle exec rake environment resque:work QUEUE=post_receive,mailer,system_hook RAILS_ENV=production PIDFILE=tmp/pids/resque_worker.pid
Starting worker git1-0:7710:post_receive,mailer,system_hook
Registered signals
Running before_first_fork hooks with [#<Worker git1-0:7710:post_receive,mailer,system_hook>]
#~ 
```

如果您的案例中至少有一个进程（管理/发送电子邮件）在运行，您可以通过这种方式进行检查。

由于版本过时，提到的问题具有更新 redis 的当前解决方案：

> 作为 root - 在稳定的 debian 上

```
/etc/init.d/redis-server stop
cd /tmp
wget http://redis.googlecode.com/files/redis-2.2.4.tar.gz
cd redis-2.2.4
make PREFIX=/usr
make install PREFIX=/usr
/etc/init.d/redis-server start 
```

> 编辑`init.d`脚本并`PIDFILE=`从 resque 命令中删除。
> 在启动命令后`resque`添加以下内容

```
ps auxww|grep QUEUE=post|head -n1|awk '{print $2}' > $RESQUE_PID 
```

> 所以`pidfile`创建了 - 这修复了“停止”错误
> 
> `stop/start gitlab`- 推动和你的罚款

# objective-c - xcode 无法将其他项目添加到工作区

> ID：14215361
> 
> 赞同：6
> 
> 时间：2013-01-08T12:51:37.870
> 
> 标签：objective-c, ios, xcode

将新项目添加到工作区时，无法扩展它，无法编译，并且无法访问相关文件，似乎 xcode 将其视为资源文件（尽管它能够解析正确的图标） .

这是我添加项目的方式

1.  xcode->文件->将文件添加到“%ProjName%”
2.  选择项目文件

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-08T18:06:07.437

问题是我在另一个 IDE 中打开了正在添加的项目，关闭另一个 IDE 解决了问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:09:50.253

右键单击您的项目并选择新项目名称，该名称将在您的工作区中添加新项目。请参阅图片以供参考。

![看这里](../Images/28bd7377d020ddb744c964c51911af93.png).

您还可以通过拖放添加新项目。

# asp.net-mvc - 如何在 Image click 上对从外部站点下载的 PDF 进行编码？

> ID：14215363
> 
> 赞同：0
> 
> 时间：2013-01-08T12:51:38.133
> 
> 标签：asp.net-mvc

我有一个“下载 PDF”图像链接，我正在调用控制器的操作以允许用户从外部站点下载特定文件（因此给出了 PDF 文件链接的完整 URL）

我已经编写了以下代码，但它不起作用。

```
public virtual ActionLink OpenPDF()
{
string fileName = "http://mysite/filetodownload.pdf";
return File(fileName, "application/pdf", Server.UrlEncode(fileName);
} 
```

这个控制器动作是从一个图像链接调用的。我可以看到这个动作被调用了。当我点击图像时，代码被执行，并要求打开/保存文件，但是当我说保存它说“这个文件无法下载”

你认为这里有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:12:48.523

为什么不直接将链接指向该站点

```
<a href="http://mysite/filetodownload.pdf" class="some_image_class">Download File</a> 
```

您不需要为此通过控制器

另一方面，如果要返回 FileResult，则需要将流、字节数组或磁盘上文件的路径传递给它。您不能将第三方 URL 传递给它。它不是那样工作的。它的工作原理是这样的：

```
public virtual ActionLink OpenPDF()
{
string fileName = Server.MapPath("~/Download/filetodownload.pdf");
return File(fileName, "application/pdf");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:15:26.293

我认为

[在 Asp.net-mvc3 中的数据库中显示表中的图像](https://stackoverflow.com/questions/11309076/show-images-in-table-from-database-in-asp-net-mvc3/11309718#11309718)

[Azure blob 和缩略图](https://stackoverflow.com/questions/5645761/azure-blobs-and-thumbnails/10059294#10059294)

[ASP.NET MVC - 用户管理图片文件夹（FTP？）](https://stackoverflow.com/questions/10781541/asp-net-mvc-user-managment-of-folder-with-pictures-ftp/10782161#10782161)

遇到答案时的链接。

# php - 访问对象的语法

> ID：14215370
> 
> 赞同：0
> 
> 时间：2013-01-08T12:51:58.450
> 
> 标签：php, codeigniter

所以我正在使用 CodeIgniter，我想访问我的数据库查询的结果对象。

我知道如何通过 result_array 访问某个条目

```
$foo = $result->result_array();
$bar = $foo[8]['firstname'];

echo $bar; 
```

我不知道如何通过

```
$foo = $result->result_object();
$bar = … 
```

我将不胜感激，尤其是有关如何执行此操作的教程的链接。这可能看起来很懒，但是从这个问题的标题可以看出，我只是不知道要搜索什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:57:17.310

用这个：

```
if($result -> num_rows() > 0)
    {
        return $result -> result();
    }
    else
    {
        return false;
    } 
```

现在你可以循环你的结果：

```
foreach($result as $key => $value)
    {
        print $result[$key] -> attrib;
    } 
```

或这个：

```
if($result -> num_rows() == 1)
    {
        foreach($result -> result() as $row)
        {
            return $row;
        }
    }
    else
    {
        return false;
    } 
```

现在可以访问您的对象：

```
print $result -> attrib; 
```

另外，请看这里：[教程](http://ellislab.com/codeigniter/user-guide/database/results.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:01:06.860

你将不得不使用

```
$foo = $result->result();
$bar = $foo[8]->firstname;

echo $bar; 
```

# spam - 为什么我的电子邮件会出现在垃圾邮件中？

> ID：14215374
> 
> 赞同：0
> 
> 时间：2013-01-08T12:52:12.760
> 
> 标签：spam

我正在从服务器发送电子邮件。但是所有的电子邮件都落在了 Gmail 帐户的垃圾邮件箱中，并且在 MS Outlook 上也被自动过滤为垃圾邮件。所以我的问题：

1.  更改我的 ip 会有所帮助，但这足以阻止 Gmail 问题吗？
2.  有没有办法检查为什么电子邮件被 Outlook 标记为垃圾邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:55:28.797

您发送邮件的邮件服务器的 DNS 记录是否解析到邮件声称来自的域？现代邮件服务器对传入的邮件执行反向 DNS 查找，如果 DNS 查找无法正确解析，会将邮件标记为垃圾邮件。

# c++ - 在单个返回对象中组合多个对象

> ID：14215376
> 
> 赞同：0
> 
> 时间：2013-01-08T12:52:23.497
> 
> 标签：c++, oop, pointers, reference

我想从包含在方法中创建的多个对象的方法调用中返回一个signle 对象。

```
Results calculate() {

    Foo f;
    Bar b;
    ...
    Results r(f, b);
    return r;
}

class Results {

private:
    ?

public:

    Results(Foo& f, Bar& b);

    Foo? getFoo();

    Bar? getBar();

} 
```

a)`Results`成员变量应该是指针吗？

```
private:
    Foo* foo;
    Bar* bar;

public:
    Results(Foo& f, Bar& b) {
        this->foo = &f;
        this->bar = &b;
    } 
```

b) 应该`getFoo`返回`Foo`，`Foo&`还是`Foo*`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:00:35.310

使用 C++11 的元组（或 boost's，否则），你基本上是在重新实现它们：

```
#include <tuple>

std::tuple<Foo, Bar> calculate() {
    Foo f;
    Bar b;
    ...
    return std::make_tuple(f, b);
}

void test() {
    Foo f;
    Bar b;
    std::tie(f, b) = calculate();
} 
```

请注意，这可以很容易地扩展为返回 2 个以上的对象。这就是为什么我使用`std::tuple`而不是`std::pair`另一个答案中提到的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:00:43.527

不，不要这样做。因为 in`calculate()`和是本地对象，当您从此函数返回时，它们将消失`Foo f`。`Bar b`复制`f`并`b`进入`Results`.

```
class Results {
private:
    Foo foo;
    Bar bar;

public:
    Results(const Foo& f, const Bar& b) : foo(f), bar(b) {}

    const Foo &getFoo() const { return foo; }
    const Bar &getBar() const { return bar; }
} 
```

一种更简单的方法是使用 a[`std::pair`](http://www.cplusplus.com/reference/utility/pair/)并返回它

```
std::pair<Foo, Bar> calculate() {
    Foo f;
    Bar b;
    ...
    return std::make_pair(f, b);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:00:41.230

a) 不会。通过初始化 中的值`calculate()`，这些变量会在函数完成执行时“死亡”。这样，您之前初始化的指针将指向一个空白空间。

b）考虑到私有成员不是指针，您可以根据需要执行此操作。如果您希望数据“停留”在对象内，您可以使用指针或引用（不管是哪一个）。否则取“正常”变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T13:01:37.783

我仍然有点不确定你想要实现什么，但目前你会遇到麻烦：a 和 b 在计算中的堆栈上，你基本上返回指向它们的指针。但是，一旦计算完成并`a`超出`b`范围，您就会有野指针。这很糟糕。
如果您有更多返回值，请创建智能指针并在对象中返回它们。
或者传递指向`a`和计算的指针，并使用in calculate`b`在堆上创建对象。`new`但请注意，您必须自己删除它们，否则最终会导致内存泄漏。所以基本上，如果你有两个以上的对象`result`，那么添加一个智能指针，比如`std::auto_ptr`or `std::shared_ptr`（或者如果你不使用 C++11 `boost::shared_ptr`）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T13:07:48.840

a) 结果成员变量应按值保存。否则，您将返回本地、超出范围的数据的地址（或引用）。

b) getFoo 应该返回对对象的 const 引用，或者在 POD 类型的情况下按值返回。

也就是说，考虑更改您的界面以接受 Foo& 和 Bar& 类型的 i/o 参数，填充内部变量而不返回它们。这将避免返回值的两个副本，否则这是必需的。

你也可以`Results`用 std::tuple 替换你的类：

```
std::tuple<Foo,Bar> calculate() {

    Foo f;
    Bar b;
    ...
    return std::tuple(f,b);
}

// client code:
Foo foo;
Bar bar;

std::tie(foo, bar) = calculate(); 
```

编辑：如果您不使用 C++11 (for `std::tuple`)，请考虑`boost::tuple`。

# qt - Qt5 参考文档：qch 文件

> ID：14215378
> 
> 赞同：9
> 
> 时间：2013-01-08T12:52:23.810
> 
> 标签：qt, qt-creator, qt5

我想在 QtAssistant 中查看 Qt 参考文档，但是 Qt5 的安装没有附带 Qt 库的 .qch 文档文件。

我试图在[http://qt-project.org](http://qt-project.org)上找到它们，但在任何地方都找不到它们。如何获取 Qt5 文档文件？

我使用的是 Ubuntu 12.10，我已经从 qt-project 网站安装了新的 qt-library sdk。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T04:08:06.340

打开`Assistant`( `5.0.1/gcc/bin/assistant`)，然后转到`Edit`->`Preferences`菜单。

有一个`Documentation`标签。如果列表为空，请添加在`.qch`目录中找到的`5.0.1/gcc/doc/`文件。

[这](http://i.imgur.com/3ISPqWq.png)就是它的外观。这也是 Ubuntu 12.10。随包安装的 Qt 5.0.1 `qt-linux-opensource-5.0.1-x86-offline.run`(388Mb)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T20:19:20.527

是的，Qt5 的官方 Ubuntu 文档非常不完整。您几乎没有任何课程的信息。

如果您想使用来自 Ubuntu 的 QtCreator/QtAssistant 构建，您必须自己获取文档。我做了并将这些上传到我的个人超级帐户上。这是[文档](https://mega.co.nz/#F!IEQViZBD!IH66QnC6nus5tKn7Sh7Usw)。我使用来自 qt-project.org 的安装程序安装了 Qt 框架，获取文档并将其插入到软件中心版本中。

我不将 QtAssistant 用作独立程序，而是集成在 QtCreator 中。要将文档添加到 QtCreator，请转到工具>选项>帮助>文档并单击添加。然后选择所有 .qch 文件，单击应用并享受。也许可以试试上面提到的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-17T21:38:47.693

毕竟，您可以从 Ubuntu 软件包商店[下载](http://packages.ubuntu.com/trusty/qtbase5-doc)必要的 *.deb 文件，然后将其安装到您的系统上。正如他们在[此处](http://packages.ubuntu.com/trusty/qtbase5-doc/filelist)所写，此软件包将安装 *.qch 文件`/usr/share/qt5/doc`。陷阱是你必须记住你已经这样做了，因为你的 Ubuntu 不会为你记录任何记录。

# google-chrome - 得到“你正在使用不受支持的命令行标志：--disable-web-security。稳定性和安全性将受到影响”错误

> ID：14215382
> 
> 赞同：7
> 
> 时间：2013-01-08T12:52:36.733
> 
> 标签：google-chrome, selenium, selenium-rc, flags

在将 Selenium RC 用于 Google Chrome 时出现以下错误

您正在使用不受支持的命令行标志：--disable-web-security。稳定性和安全性将受到影响。我不知道chrome有什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:57:10.743

标志的参考代码`--disable-web-security`

> // 不要强制执行同源策略。（供人们测试他们的网站使用。）
> 
> const char kDisableWebSecurity[] = "禁用网络安全";

它不允许跨脚本代码，你在 selenium RC 上做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T10:04:13.977

2013 年 2 月，某人（专家用户/开发人员“PhistucK”；截至 01/2014 已有 1498 个帖子）在[chrome-discuss gougle-group](https://groups.google.com/a/chromium.org/forum/#!topic/chromium-discuss/O4WpwWvGz4A)上说：

*不，它[通知]无法关闭。您可以自己编译 Chromium 并删除显示它的代码。*

# ajax - MVC3 如何实现像 twitter/facebook 这样的结果浏览器（无需分页）

> ID：14215383
> 
> 赞同：1
> 
> 时间：2013-01-08T12:52:38.680
> 
> 标签：ajax, asp.net-mvc-3

我正在寻找有关如何在不使用分页的情况下实现（搜索）结果浏览器的线索。但更像是 twitter/facebook 的做法。

起初只需要显示 10 个左右的结果，但向下滚动时，应异步添加更多结果（如果有）。我在末尾找到了带有 [more] 按钮的示例，但我希望浏览器在到达窗格底部时自动获取更多。

我很难找到正确的例子。可能是因为我不知道谷歌搜索什么关键字...

希望您能在正确的方向上帮助我！

亲切的问候，

保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:58:28.260

我建议您阅读以下有关此主题的文章：

*   [ASP.NET MVC 中的无限滚动](http://tpeczek.blogspot.co.uk/2012/04/infinite-scroll-in-aspnet-mvc.html)

[这里](http://tpeczek.codeplex.com/releases/view/86969)还有一个示例应用程序可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T12:57:00.043

请参阅[用 jQuery 替换分页和亚音速连续滚动方法](http://blog.solutionrevolution.net/replace-paging-with-jquery-and-subsonic-conti)博客文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T12:57:26.453

请查看以下页面：

[On 向下滚动如何进行 ajax 调用并获取响应数据](https://stackoverflow.com/questions/8687978/on-scroll-down-how-to-make-ajax-call-and-get-the-respone-data)

[使用 ajax 创建动态滚动内容框](http://webdeveloperplus.com/jquery/create-a-dynamic-scrolling-content-box-using-ajax/)

我相信应该对你有帮助！

# wordpress - Wordpress 编辑/订阅者角色

> ID：14215389
> 
> 赞同：-1
> 
> 时间：2013-01-08T12:52:58.290
> 
> 标签：wordpress, editor, subscriber

在我的一个网站上，编辑和订阅者可以访问仪表板、个人资料和插件。这真的很奇怪。无法访问其他任何内容 - 页面、帖子等。

已经尝试重新安装 wordpress 并没有什么区别。

不使用任何用户访问插件

任何帮助将不胜感激！克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:56:19.463

你应该切换到一个标准的主题，比如二十十二，看看它是否正常工作，问题是你的主题，你应该联系主题作者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:33:41.343

You should test the capabilities of your users and re structure them accordingly. Have a look at [The Codex](http://codex.wordpress.org/Roles_and_Capabilities) to get a list of capabilities for [editors](http://codex.wordpress.org/Roles_and_Capabilities#Editor) and [subscribers](http://codex.wordpress.org/Roles_and_Capabilities#Subscriber).

If you want to use plugins, you can find some that will allow you to edit the capabilities.

else you can then use [get_role()](http://codex.wordpress.org/Function_Reference/get_role), [add_cap()](http://codex.wordpress.org/Function_Reference/add_cap) and [remove_cap()](http://codex.wordpress.org/Function_Reference/remove_cap) to correct their capabilities.

# image - 使用 vb6 在 ActiveX dll 中裁剪图像

> ID：14215400
> 
> 赞同：0
> 
> 时间：2013-01-08T12:53:34.750
> 
> 标签：image, vb6, crop

我正在使用 vb6 构建一个 ActiveX 来处理带有调整大小/裁剪操作的图像。

关于裁剪图像，主要的方法是放置两个图片框，然后

```
Form1.Picture2.PaintPicture Form1.Picture1.Image, 0, 0, wid, hgt, m_X1, m_Y1, wid, hgt 
```

在 exe 项目中可以，但在 activex 中，'ASP 0115' C0000005 出现错误（在 ASP 经典中使用），那么我该如何解决这个问题？或者是否有另一种方法可以在 vb6 中裁剪图像，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:16:32.287

如果您想在经典 ASP 中执行此操作，您可以查看 WIA 2.0 自动化库。这是 Vista 和更高版本的一部分，直到最近，您还可以下载一个 redist 版本，以便向后移植到现在濒临死亡的 WinXP（SP1 或更高版本）。缩放和裁剪只是您可以使用它的两件事。

# android - 在 edittext 控件内点击不会将插入符号放在我点击的位置。任何人都知道为什么

> ID：14215403
> 
> 赞同：1
> 
> 时间：2013-01-08T12:53:58.020
> 
> 标签：android, onclick, cursor, textview

我的屏幕上有一个 EditText 控件。当我点击它时，键盘会出现，轻松分裂。但我的胡萝卜不在我点击的地方。
光标在右上角...当我键入时，它当然从光标所在的位置流出。

如果我点击足够长的时间，就会出现一个蓝色的三角形小东西，我可以将它拖到我真正想要输入的位置。

我真的不知道从这里去哪里.. 这是一个让我设置光标/carot/insertionpoint :) 我点击的设置..

一如既往地简单会很酷。

# sql - INSERT INTO 减去 2 个值

> ID：14215404
> 
> 赞同：2
> 
> 时间：2013-01-08T12:54:11.603
> 
> 标签：sql, sql-server-2008

INSERT 查询是否可以减去您输入的 2 个值以创建第三个值，然后可以将其插入到表中 - 如果这有意义...

例如

```
INSERT INTO table1 (column1, column2, column3)
VALUES ('50', '25', column1 - column2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:05:02.343

```
INSERT INTO table1 (column1, column2, column3)
(select ('50', '25', column1 - column2) from table1 where conditions) 
```

这是一个示例查询！希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:22:21.217

令人费解的：

```
INSERT INTO table1 (column1,column2,column3)
select column1,column2,column1-column2
from
    (select 50 as column1,
            25 as column2
    ) t 
```

由于您不能引用同一`SELECT`子句中的其他列，因此您必须将其作为子查询来执行。我也改用`int`文字而不是字符串，因为否则我无法让减法在我的脑海中变得有意义。

您也可以使用[Table Value Constructor](http://technet.microsoft.com/en-us/library/dd776382%28v=sql.100%29.aspx)来做到这一点：

```
INSERT INTO table1 (column1,column2,column3)
select column1,column2,column1-column2
from
    ( VALUES (50, 25)
    ) AS t (column1, column2); 
```

* * *

正如我在评论中指出的那样，如果这种关系应该始终保持，我会将 table1 构建为：

```
CREATE TABLE table1 (
    column1 int not null,
    column2 int not null,
    column3 as column1 - column2
    --More columns
) 
```

因为那样，`column3`值总是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:35:49.640

您可以创建减去值的函数并在插入中使用此函数。这是做这些事情的正确方法：

```
INSERT INTO table1 (column1, column2, column3)
 (select ('50', '25', your_function() ) from table1 where conditions)
/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T13:41:15.483

使用“INSERT INTO”可以做到这一点：

```
INSERT INTO Table1Name (column1, column2, column3,)
(select 'X', 'Y', X - Y as Z) 
```

这是 SQL Authority 的[链接](http://blog.sqlauthority.com/2007/08/15/sql-server-insert-data-from-one-table-to-another-table-insert-into-select-select-into-table/)，其中包含更多 INSERT INTO 示例

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T13:38:32.283

另一种方法是向表中添加触发器，在插入数据时，第三列将根据前两列的差异进行更新。

# java - 如何找到hibernate和直接运行sql的查询区别？

> ID：14215406
> 
> 赞同：1
> 
> 时间：2013-01-08T12:54:18.637
> 
> 标签：java, oracle, hibernate, time

我有这样的查询：

```
 delete from tableA where fk in (select id from tableA where fk='somevalue'
 and tableA.date between date1 and date2) 
```

当我从 TOAD 运行这个查询时，它需要将近 100 毫秒。当我使用

```
 session
                .createSQLQuery(
                        "delete ....")
                .setParameter("...")
                .setParameter("...")
                .setParameter("...")
                .executeUpdate(); 
```

大约需要 30 分钟 真正的查询删除了 0 行。所以可能存在一些休眠/oracle问题。我怎样才能找到它们？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T12:59:21.370

您可能正在谈论[Hibernate 配置中的 hibernate.show_sql 属性](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html)（ctrl+f for "show_sql"）

将此属性设置为“true”会将使用的 SQL 打印到标准输出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:05:48.933

在这么长时间的情况下，hibernate可能产生的小开销是不会被注意到的。

`fk`您可以通过在和列中添加索引来加快删除速度`date`（在这种情况下，复合索引可能会很好地工作）。

**更新** 我会详细说明一下，以澄清我为什么建议这样做。Hibernate 必须为执行的查询解析映射（并且在 select 语句的情况下，它必须创建对象并用结果填充它们）。在这种情况下，这个开销看起来并不重要，因为我们谈论的是 30 分钟的执行时间。

所以问题可能出在其他地方，例如：

*   如果从不同的机器执行 TOAD 和 java 进程，网络问题
*   JDBC和OCI的一些区别
*   查询的错误翻译，可以使用 show_sql 属性进行检查。在这种情况下，映射**通常**有问题。

由于问题中没有任何删除，即使查询需要 30 分钟，这就是我建议索引的原因。确实，它可能会减慢删除速度，但同样，在这种情况下不会删除任何行，因此执行子查询需要 30 分钟，而不是执行任何删除操作。

这个答案可能无法解决问题，但老实说，我认为它不应该被否决。

# php - CSV 到 php 关联数组

> ID：14215407
> 
> 赞同：1
> 
> 时间：2013-01-08T12:54:20.200
> 
> 标签：php, arrays, multidimensional-array

我的 CSV 文件具有这种结构

```
title;firstName;lastName;email;
Sir;Bob;Public;bob.p@gmail.com; 
```

第一行显示列名。内容从第二行开始。现在我希望将它放入这样的关联数组中

```
array([0] => 
            array(
                   'title' => 'Sir', 
                   'firstName' => 'Bob', 
                   'lastName' => 'Public', 
                   'email' => 'bob.q@gmail.com'
            ) 
) 
```

我尝试了什么：

```
 $entities = array();

    while (($data = fgetcsv($handle, 1000, ";")) !== FALSE) {

        $num = count($data);

        for ($c = 0; $c < $num; $c++) {

              $line = array();
               //save first row
               if ($row == 1) {
                  foreach (explode(';', $data[$c]) as $field) {
                      //dont save empty fields
                      if ($field != "") {
                         $fields[] = $field;
                         $line[$field] = array();
                      }
                   }
               }
               //go through contents and save them
               foreach ($fields as $field) {
                   for ($i = 2; $i < count($fields); $i++) {
                       $cust = explode(";", $data[$c]);
                       $line[$field][] = $cust[$i];
                   }
               }
               $entities[] = $line;
               $row++;
            }
        }

        fclose($handle);
    } 
```

这没有给出错误，而是一个似乎被搞砸的奇怪数组。有什么想法可以得到我想要的结构吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:00:29.073

这应该有效：

```
$entities = array();
$header = fgetcsv($handle, 0, ";"); // save the header
while (($values = fgetcsv($handle, 0, ";")) !== FALSE) {
    // array_combine
    // Creates an array by using one array for keys and another for its values
    $entities[] = array_combine($header, $values);    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:23:07.693

```
$entities = array();
//Assuming you are able to get proper array from CSV
$data = array('title;firstName;lastName;email;', 'Sir;Bob;Public;bob.p@gmail.com;');
$num = count($data);

for ($c = 0; $c < $num; $c++) {

$line = array();
//save first row

foreach (explode(';', $data[$c]) as $field) {
    //dont save empty fields
    if ($c == 0) {
        if ($field != "") {
            $fields[] = $field;
            //$line[$field] = array();
        }
    } else {
        if ($field != "") {
            $line[$field] = $field;
        }
    }

}
if (count($line) > 0)
    $entities[] = $line;
} 
```

# javascript - EditorInstance.document.getById("some id") 返回 null

> ID：14215410
> 
> 赞同：2
> 
> 时间：2013-01-08T12:54:25.303
> 
> 标签：javascript, jquery, asp.net, google-chrome, ckeditor

我在我的应用程序中使用 CKeditor-4，在我的编码中我想通过它的 id 来获取元素。下面的代码在 FF 和 IE 中返回元素，但**在 Google Chrome 中返回 null**。

```
var ele = EditorInstance.document.getById("id_1"); 
```

任何替代品都可以通过其在 Google Chrome 中的 id 获取元素。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:59:50.430

检查是否使用本机方法：

```
EditorInstance.document.$.getElementById( 'id_1' ); 
```

如果这也是`null`，请确保您`id`的正确。`id`s 区分大小写，所以`iD_1`!= `id_1`。

`document.getById`实现非常简单：

```
getById: function( elementId ) {
    var $ = this.$.getElementById( elementId );
    return $ ? new CKEDITOR.dom.element( $ ) : null;
}, 
```

有一个很小的机会，这里真的有什么东西坏了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:40:18.083

以前我用

```
 content = EditorInstance.getData(); 
 EditorInstance.setData(content);" 
```

由于它不能在 chrome 中工作。

但现在我正在使用

```
content = rootElement.getHtml(); 
rootElement.setHtml(content); 
```

并且工作正常...

# text - 跨不同（共享）操作写入同一文本文件

> ID：14215412
> 
> 赞同：1
> 
> 时间：2013-01-08T12:54:31.147
> 
> 标签：text, vbscript, qtp

我有一个主脚本，它调用不同的动作（来自不同的位置）。我想在执行此主脚本期间编写某些日志消息。我已经实现了一个脚本对象和一个文本文件

```
Set fso = CreateObject("Scripting.FileSystemObject")
Set  write_log =fso.CreateTextFile("C:\ExecutionLog.txt",true)
...
write_log.WriteLine("Execution Step 1 Completed) 
```

现在，当调用另一个（外部）操作时，我正在尝试在上面引用的同一文件中实现日志记录。我尝试了以下方法，但无济于事：

```
Set fso = CreateObject("Scripting.FileSystemObject")
Set write_log = fso.OpenTextFile("C:\ExecutionLog.txt", ForAppending, False)
...
write_log.WriteLine("Execution Step 10 Completed) 
```

**我的问题是如何以不同的动作写入同一个文件？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:07:39.470

如果“无济于事”意味着“无法写入另一个进程正在使用的文件”，则您必须（附加）打开-写入-关闭每个“操作”的文件（由 .Run 或 .Exec 启动的脚本?) 甚至每个日志记录。

# java - 如何在 Java 的 Aspect 类中实现线程安全缓存？

> ID：14215417
> 
> 赞同：1
> 
> 时间：2013-01-08T12:54:39.853
> 
> 标签：java, caching, thread-safety, aspect

我有一个方面类（spring-aop）。我有一个建议可以获取一些参数并将其存储在类字段中。第二个建议使用这些参数。它用于功能测试，我需要使它们成为线程安全的，因为它可以由多个用户同时运行。我该怎么做？

```
public class SomeAspect {
    private String parameters;

    public void saveParameters(JoinPoint jp) {
        Object[] args = jp.getArgs();
        Object firstArg = args[0];
        this.parameters= (String) firstArg;     
    }

    public void useParameters() {
        doSmth(parameters);
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:05:17.840

我认为你应该使用`ThreadLocal`来存储`parameters`. 根据文档，一个请求将用一个线程处理，所以它应该是安全的。文档在[这里](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)

# apache-camel - 使用 org.apache.camel.jmx.createRmiConnector 进行 Camel + JMX + LDAP 身份验证

> ID：14215418
> 
> 赞同：2
> 
> 时间：2013-01-08T12:54:40.977
> 
> 标签：apache-camel, jmx, jaas

全部。

一直在尝试使用 JAAS 身份验证获取远程 JMX 以在 Camel 版本 2.10.3 + Java 6 中工作。

该应用程序使用 Java DSL 并且是“手动连接的”，并使用系统属性运行：

```
-Dcom.sun.management.jmxremote.authenticate=true 
-Djmx.remote.x.login.config=StagingJmxAuthConfig 
-Dorg.apache.camel.jmx.usePlatformMBeanServer=true 
-Djava.security.auth.login.config=./src/main/resources/conf/ldap-auth.config 
-Dcom.sun.management.jmxremote.ssl=false
-Dorg.apache.camel.jmx.createRmiConnector=true
-Dorg.apache.camel.jmx.rmiConnector.registryPort=9140 
```

但是，出于所有意图和目的，我似乎还不如在关闭身份验证/授权的情况下运行。

调试 JRE 的 JMX 和 JAAS 类（以及 Camel），请注意以下几点：

在课堂上`org.apache.camel.management.DefaultManagementAgent`：

```
cs = JMXConnectorServerFactory.newJMXConnectorServer(url, null, server); 
```

这反过来又为构造函数参数创建了一个`javax.management.remote.rmi.RMIJRMPServerImpl`带有空 Map的实例。`env`

现在，我想知道是否有什么东西让我忽略了——当请求稍后到达连接器时，并且`javax.management.remote.rmi.RMIServerImpl`执行 a`doNewClient()`时，它不可能触发任何 JAAS 活动？

RMIServerImpl 的第 197-208 行 - 记住 Camel 将“env”设置为`null`，它被转换为空映射：

```
JMXAuthenticator authenticator =
    (JMXAuthenticator) env.get(JMXConnectorServer.AUTHENTICATOR);
if (authenticator == null) {
    /*
     * Create the JAAS-based authenticator only if authentication
     * has been enabled
     */
    if (env.get("jmx.remote.x.password.file") != null ||
    env.get("jmx.remote.x.login.config") != null) {
    authenticator = new JMXPluggableAuthenticator(env);
    }
} 
```

我是否正确假设要远程，JAAS 认证的 JMX 工作必须手动编写 JMX RMI 连接器设置？

Camel 不应该提供一个让 JAAS 工作的环境吗？甚至似乎都没有触及 JAAS 配置文件......

**更新：已解决**

在 VM 上设置以下系统属性可以解决问题：

```
-Dcom.sun.management.jmxremote=true 
-Dcom.sun.management.jmxremote.port=9410
-Dcom.sun.management.jmxremote.authenticate=true
-Djmx.remote.x.login.config=StagingJmxAuthConfig
-Dorg.apache.camel.jmx.usePlatformMBeanServer=true
-Djava.security.auth.login.config=./src/main/resources/conf/ldap-auth.config
-Dcom.sun.management.jmxremote.ssl=false 
-Dorg.apache.camel.jmx.createRmiConnector=false 
-Dcom.sun.management.jmxremote.login.config=StagingJmxAuthConfig 
```

对于我们来说，使用安全的 LDAP，以下是登录配置：

```
StagingJmxAuthConfig {
   com.sun.security.auth.module.LdapLoginModule REQUIRED
   java.naming.security.authentication="simple"
   java.naming.security.principal="cn=Directory Manager"
   java.naming.security.credentials="PASSWORD"
   userProvider="ldap://LDAPHOST:389/BASEDN"
   userFilter="(&(uid={USERNAME})(appRole=SOME_VALUE))"
   authzIdentity=monitorRole
   debug=true
   useSSL=false;
   }; 
```

现在我可以使用 jmxterm 进行连接：

```
java -jar jmxterm-1.0-alpha-4-uber.jar -l service:jmx:rmi:///jndi/rmi://THEHOST:9410/jmxrmi -u LDAPUSER -p LDAPPASS 
```

请注意，JNDI RMI 名称缺少“/camel”后缀——这似乎是唯一的区别。

万岁！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:47:25.587

在本质上：

*   使用 Java6 认证的[JMX 远程处理](http://docs.oracle.com/javase/6/docs/technotes/guides/management/agent.html)
*   设置 org.apache.camel.jmx.createRmiConnector=false
*   设置 org.apache.camel.jmx.usePlatformMBeanServer=true

上面的示例还显示了如何连接到受搜索保护的 LDAP，它实际上是隔离的，因为所讨论的应用程序使用不同的 LDAP 进行 JMS 的 JNDI 查找。

# php - 以 url 为参数的 Mod-security 例外规则

> ID：14215419
> 
> 赞同：2
> 
> 时间：2013-01-08T12:54:48.950
> 
> 标签：php, mod-security, mod-security2

我是 mod 安全的新手，并且能够将它安装在我的服务器上。但是，在安装后，托管的网站正在崩溃。在跟踪问题后，我发现它不允许我在 php 代码中将 url 作为参数传递。例如：xyz.php?url= **http://www.example.com/img/abc.jpg¶m2=xyz** 是否可以将任何例外添加到 modsecurity 以便允许将 url 作为参数传递。

感谢您，

阿齐姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:10:39.093

添加规则以忽略该特定参数到您的虚拟主机应该这样做

```
SecRule !ARGS:url 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:01:46.367

您需要从日志中找到 mod_security 规则 ID，然后将以下指令添加到您的虚拟主机部分：

`SecRuleRemoveById`

例子：

`SecRuleRemoveById 950005`

您可以查看 apache 和 modsec 日志吗？

# java - 方法返回可运行对象

> ID：14215424
> 
> 赞同：2
> 
> 时间：2013-01-08T12:54:57.963
> 
> 标签：java, thread-safety, runnable

我可以在 Java 中做这样的事情吗：

```
 protected Runnable getRunnable(final int seconds) {
    Runnable runnable = new Runnable() {
        public void run() {
                sendData();             
                try {
                    Thread.sleep(seconds * 1000);
                } 
                catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
        }
    };
    return runnable;
} 
```

进而：

```
protected void startTimer(int seconds) throws InterruptedException,NullPointerException {
    Thread thread = new Thread(getRunnable(seconds));
    thread.start();
} 
```

上述过程安全吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:02:38.163

是的，它是安全的（假设`sendData`它本身是安全的），但我不确定你期望它做什么。您编写的代码将创建一个新线程，该线程将立即调用`sendData()`，然后在`sendData`返回后线程将休眠几秒钟，然后终止而不做任何其他事情（因此休眠是没有意义的，除了阻止 JVM 退出`Runnable`或其包含的对象不会被垃圾收集，直到睡眠完成）。如果您希望它在调用*之前*`sendData`等待，那么您需要稍微交换一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T13:36:16.733

在你说的评论中

> 我要做的就是每隔特定的秒数（即每 15 秒）执行一次 sendData() 方法

然后使用一个内置的 Timer 来为你组织，例如：

```
ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
Runnable r = new Runnable() {
    @Override
    public void run() {
        sendData();
    }
};
ScheduledFuture<?> future = scheduler.scheduleAtFixedRate(r, 0, 15, TimeUnit.SECONDS);

//when you want to cancel the scheduled task
future.cancel(true);

//and before you leave your program, don't forget to call:
scheduler.shutdown(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T12:57:50.773

你试过了吗？答案是它确实有效。`Runnable`是由`Object`（上面示例中的匿名类）实现的接口，您可以像任何其他对象一样传递/引用它。

请注意，因为上面是一个内部类，所以您将*隐式*引用外部（周围）类。

# visual-studio-2012 - Visual Studio 2012 中的重绘问题

> ID：14215427
> 
> 赞同：1
> 
> 时间：2013-01-08T12:55:06.233
> 
> 标签：visual-studio-2012

我想知道是否其他人已经看到了这个问题并有解决方法？问题在于 VS 2012 Ultimate，当它被最小化或锁定屏幕覆盖它时，它会出现在所附的屏幕截图中。

这是我的系统（运行 Windows 8 的戴尔 E6510）上唯一出现这些症状的应用程序，因此我倾向于将责任归咎于应用程序而不是系统。

![在此处输入图像描述](../Images/e0430e2f6aeb11fca3b3070cc7e60690.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:28:16.333

玩弄以下设置似乎已经为我解决了这个问题。您的公里数可能会有所不同![VS2012 设置](../Images/db808a324b87bbdff5e525a5698e3009.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T13:25:29.153

如果我选中然后取消选中其中任何一个选项，它会在我关闭它之前起作用，那么你下次必须再次重复。

所以做了更多的研究，发现在 MS Connect 网站上提到了这一点......

“我快速浏览了在 VS2012 中运行的“扩展”，并注意到我记得有一个在我没有真正要求的情况下神奇地出现。用于 Azure 的 HDInsightTools。

我删除了它，所有的作品！:) 那么也许您需要查看已安装的扩展程序？

# javascript - jQuery superfish 在使用 box-sizing 属性时添加隐藏在 ul 标签上的溢出？

> ID：14215428
> 
> 赞同：4
> 
> 时间：2013-01-08T12:55:08.340
> 
> 标签：javascript, jquery, css, superfish

我在使用 jQuery superfish 菜单插件时遇到了一个奇怪的问题，使用时一切正常，`animation: {opacity: 'show'}`应用于`ul`元素的内联样式是：

`display: none; visibility: hidden;`

我想使用`animation: {height: 'show'}` ，但是使用它时，下拉菜单仅显示一级下拉菜单，因为 superfish 正在添加`overflow: hidden;`到`ul`元素中，并且应用的内联样式是：

`display: none; overflow: hidden; visibility: hidden;`

所以问题是`overflow: hidden;`阻止嵌套的 ul 元素在悬停时显示所以我尝试添加`overflow: visible !important;`修复了问题但菜单的行为缓慢并且我不想要这个解决方案。

所以我发现`* {box-sizing: border-box;}`我的 css 文件内部正在产生这种行为，当删除时，superfish 不会添加`overflow: hidden;`到 ul 元素中。

我在 codepen 上创建了一个演示：http: [//codepen.io/anon/pen/Awqdn](http://codepen.io/anon/pen/Awqdn)

正在发生的事情的摘要：

1-`animation: {opacity: 'show'}`即使我有也可以正常工作`* {box-sizing: border-box;}`

2-`animation: {height: 'show'}`由于插件添加到ul元素的溢出隐藏不起作用，并且`* {box-sizing: border-box;}`从css文件中删除时解决了这个问题。

那么我该如何解决这个问题呢？`overflow: hidden;`当我有什么让超级鱼添加的时候`box-sixing: border-box;`？

并提前感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T13:44:44.940

没有`* {box-sizing: border-box;}`它在动画期间给出`overflow:hidden`并在动画结束后将其删除。但是有了这条线，它不会在动画后删除溢出。我在 jQuery 跟踪器[http://bugs.jquery.com/ticket/10335中找到了票](http://bugs.jquery.com/ticket/10335)

要解决此问题，您可以在动画后移除溢出

```
jQuery(function($) {
  $('#nav').superfish({
    animation: {height:'show'},
    onShow: function(){
      $(this).css("overflow", "visible");
    }
  });
}); 
```

[http://codepen.io/anon/pen/Apqyl](http://codepen.io/anon/pen/Apqyl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:20:42.970

也许使用 clearfix hack 而不是 overflow:hidden;

```
.clearfix:after {
     visibility: hidden;
     display: block;
     font-size: 0;
     content: " ";
     clear: both;
     height: 0;
     }
.clearfix { display: inline-block; }
/* start commented backslash hack \*/
* html .clearfix { height: 1%; }
.clearfix { display: block; }
/* close commented backslash hack */ 
```

# scala - 未找到 Playframework、scala 案例类和属性

> ID：14215434
> 
> 赞同：2
> 
> 时间：2013-01-08T12:55:45.837
> 
> 标签：scala, playframework, playframework-2.0, case-class

当我在 scala 中运行 playframework 时，我的行为非常奇怪。我使用 anorm 作为数据库访问层，因此我开始编写一些代码，我看到了非常奇怪的 scala 编译器行为。

这是有效的代码：

```
case class P_Page_Control(Control_ID:Int,
                      Client_ID:String,
                      cContent: String,
                      Page_ID: Int,
                      Language_ID: Int,
                      InsertTime: Date,
                      ChangeTime: Option[Date],
                      IsDeleted: Boolean) 
```

和：

```
object P_Page_Control {  val parser = {
  get[Int]("Control_ID") ~
  get[String]("Client_ID") ~
  get[String]("Content") ~
  get[Int]("Page_ID") ~
  get[Int]("Language_ID") ~
  get[Date]("InsertTime") ~
  get[Option[Date]]("ChangeTime") ~
  get[Boolean]("IsDeleted") map {
    case a ~ b ~ c ~ d ~ e ~ f ~ g ~ h =>
      P_Page_Control(a, b, c, d, e, f, g, h)
  }}} 
```

目前没有编译错误。工作正常。但是当我更改属性名称时出现错误：

```
object P_Page_Control {  val parser = {
  get[Int]("Control_ID") ~
  get[String]("Client_ID") ~
  get[String]("Content") ~
  get[Int]("Page_ID") ~
  get[Int]("Language_ID") ~
  get[Date]("InsertTime") ~
  get[Option[Date]]("ChangeTime") ~
  get[Boolean]("IsDeleted") map {
    case A_B ~ b ~ c ~ d ~ e ~ f ~ g ~ h =>
      P_Page_Control(A_B, b, c, d, e, f, g, h)
  }}} 
```

由于我是 Scala 的新手，我认为`_`这是一些神奇的关键字或其他神奇的东西。

所以我将属性名称更改为`aBB_AccAd`但没有编译错误。

**哎呀**...

下一个有趣的事情：我将其重命名为`AAbbdddsadasdasAAFFFFeeee`，我再次看到编译错误。那么是什么促使 Scala 为某些字面量抛出编译错误呢？

这是错误还是功能？:-)

![编译错误](../Images/e88edc99d0624e657ba7f3f98e9b8f11.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T12:58:33.183

模式中的名称以大写字母开头，被解释为引用提取器（具有`unapply`or`unapplySeq`方法的对象）的变量或对象名称。由于您还没有声明这样的变量或对象，Scala 找不到它并抛出错误。

# java - 在 Java 中操作大文本文件

> ID：14215435
> 
> 赞同：6
> 
> 时间：2013-01-08T12:55:51.250
> 
> 标签：java, text, nio

我想知道如果我们假设文件大小大于内存，你如何在 Java 中操作大文本文件。我用谷歌搜索了那个主题，它表明大多数人都推荐`java.nio`这样的任务。

不幸的是，我还没有找到任何关于如何操作文件的文档。例如读取每一行，修改它，写它。我尝试过这样的事情，但这不起作用：

```
 FileChannel fileChannel = null;
    try {
        fileChannel = new RandomAccessFile(file, "rw").getChannel();
        ByteBuffer buffer = ByteBuffer.allocate(256);

        while (fileChannel.read(buffer) != -1) {
            buffer.rewind();
            buffer.flip();
            String nextLine = buffer.asCharBuffer().toString();
            if (replaceBackSlashes) {
                nextLine = nextLine.replace("\\\\", "/");
            }
            if (!(removeEmptyLines && StringUtils.isEmpty(nextLine))) {
                buffer.flip();
                buffer.asCharBuffer().put(nextLine);
            }

            buffer.clear();
        }
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {
        if (fileChannel != null) {
            try {
                fileChannel.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    } 
```

那么你的建议是什么？此外， String`nextline`与我的文件中的任何内容都不匹配。也许我需要设置编码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T13:19:34.877

逐行。像这样的东西...

```
public static void main(String[] args) throws Exception {

    File someFile = new File("someFile.txt");
    File temp = File.createTempFile(someFile.getName(), null);
    BufferedReader reader = null;
    PrintStream writer = null;

    try {
        reader = new BufferedReader(new FileReader(someFile));
        writer = new PrintStream(temp);

        String line;
        while ((line = reader.readLine())!=null) {
            // manipulate line
            writer.println(line);
        }
    }
    finally {
        if (writer!=null) writer.close();
        if (reader!=null) reader.close();
    }
    if (!someFile.delete()) throw new Exception("Failed to remove " + someFile.getName());
    if (!temp.renameTo(someFile)) throw new Exception("Failed to replace " + someFile.getName());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:35:15.093

感谢 xagyg 提供了一个[漂亮、干净的答案](https://stackoverflow.com/a/14215864/180740)！以下内容不适合评论：

If you're running Java 7 already, you can save a lot of boilerplate code by using [try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) for the processing loop:

```
File source = ...
File target = ...
try (BufferedReader in = new BufferedReader(new FileReader(source));
     PrintStream out = new PrintStream(target)) {
  String line;
  while ((line = in.readLine()) != null) {
    // manipulate line
    out.println(line);
  }
}
// no catch or finally clause! 
```

No more of that `initalize-to-null-try-catch-finally-close-if-not-null` mess, Java will take care of that for you now. Less code, less potential to forget or screw up that crucial call to `close()`.

# c - 如何在C中取一行字符串

> ID：14215440
> 
> 赞同：1
> 
> 时间：2013-01-08T12:56:10.183
> 
> 标签：c

我想在 C 中取一行字符串。怎么做？如果我在 printf 中使用格式说明符 %s，它只会占用字符到第一个空格。如何摆脱它？除了使用getline还有其他方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:22:18.430

`scanf`从输入流中获取行是一个糟糕的选择。虽然你可以很容易地做到这一点：

```
buf[SIZE];
scanf ("%[^\n]\n", buf); 
```

您将面临遭受缓冲区溢出错误/攻击的风险。

更好的方法是使用 一次读取“SIZE”字符`fgets`，并将数据复制到动态分配的缓冲区中，您可以在填充时调整其大小：

```
buf[SIZE];
do {
  fgets (buf, SIZE, stdin);
  /* Handle copying to dynamic buffer and resize over here */
} while (/*check we haven't reached eol*/); 
```

# javascript - 交换图像源，同时避免额外的 GET 请求，维护支持和语义

> ID：14215441
> 
> 赞同：0
> 
> 时间：2013-01-08T12:56:12.987
> 
> 标签：javascript, html

我正在尝试根据窗口大小和像素密度交换我的图像源 - 以防止手机加载超大图像，同时仍将全分辨率图像提供给具有大屏幕的视网膜 macbook 之类的东西。我有一个看起来像这样的 img 元素：

```
<img class="projectimg responsivize" src=mobile.jpg data-mobile-x2=mobile-retina.jpg data-tablet=tablet.jpg data-tablet-x2=tablet-retina.jpg data-full=desktop.jpg data-full-x2=desktop-retina.jpg   /> 
```

我在下面使用vanila javascript（不想等待lidbaries加载）（WIP，需要屏幕尺寸测试，现在只换成全尺寸图像）

```
var toresponsive = document.getElementsByClassName("responsivize");
for (var i=toresponsive.length -1; i >= 0;i--){
  toresponsive[i].setAttribute('src',toresponsive[i].getAttribute('data-full'));
} 
```

这工作正常 - 我的问题是关于放置 - 如果我把它放在`head`然后它在浏览器可以看到图像标签之前运行。如果我把它放在末尾`body`，浏览器会获取所有小图像源——非移动屏幕的 http 请求数量翻倍。有没有办法让浏览器在运行 javascript 之前不获取图像，同时在标签的`src`属性中保留一个值，`img`以便我支持不运行 javascript 的系统？

# android - Eclipse - 新的 android 活动显示在清单中，但在 src 下丢失

> ID：14215445
> 
> 赞同：1
> 
> 时间：2013-01-08T12:56:25.340
> 
> 标签：android, eclipse

我从 Eclipse 的“新建”菜单中创建了一个新的空白活动。

我没有收到任何错误，并且该活动看起来已正确填充到清单中，但是，没有创建任何 java 类文件。

我的印象是，在 Eclipse 中，应该使用 onCreate 和 onOptionsItemSelected 方法模板自动创建并自动填充该类。

为什么 Eclipse 没有自动为我创建类？

清单代码按要求：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.myfirstandroidapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.myfirstandroidapp.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.myfirstandroidapp.DisplayMessageActivity"
        android:label="@string/title_activity_display_message"
        android:parentActivityName="com.example.myfirstandroidapp.MainActivity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.myfirstandroidapp.MainActivity" />
    </activity>
</application> 
```

![AndroidManifest.xml 应用程序节点显示 src 下缺少的新活动](../Images/003537b6ae7a2f3dc60f6c2b7885b155.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:11:45.380

最快的解决方案：将 Activity 保留在清单中，但通过右键单击您的包 -> 新建 -> 类 -> DisplayMessageActivity 创建 java 类，然后扩展 Activity 类并添加缺少的方法。请注意，类名必须与清单中声明的​​类名匹配

**编辑** 完成后，通过选择 project -> clean 清理项目并检查是否有任何错误消息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-09T20:27:43.690

什么对我有用...
在 Eclipse 中，转到**帮助**> **安装新软件...** > 使用：[https ://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)

点击回车，勾选“*开发者工具*”和“ *NDK插件*”。

让它下载并安装。我不得不删除“myfirstapp”并重新制作它。
下载并安装后重新启动 Eclipse。

遇到这个问题并重新做一遍，帮助我更多地了解我之前已经学习过的课程中使用的语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T17:59:18.640

我需要卸载 Eclipse 并从[http://developer.android.com/](http://developer.android.com/)安装 sdk（adt 包），它与 eclipse 捆绑在一起来解决这个问题。

我发现我原来的设置不仅无法创建源文件，而且也无法创建新的 android 项目，即使它成功创建了第一个项目。毫无疑问，一定是发生了什么事情破坏了设置，这是我做过但无法追踪的事情。

# jquery - jQuery查找包含超链接的td

> ID：14215452
> 
> 赞同：1
> 
> 时间：2013-01-08T12:56:40.493
> 
> 标签：jquery, select, text, hyperlink, html-table

我需要找到一个包含超链接文本值的 TD（最低级别）。例如：

```
<td>
  <a href....>Hours</a>
</td> 
```

我想使用 jQuery 来获取元素并右对齐超链接文本。这是我正在使用的（显然不起作用）。

```
$('td').filter(function(index) { return $(this).text().contains("Hours"); }).attr('style', "text-align:'right'"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:57:53.513

jQuery 中有一个专用的选择器: [:contains](http://api.jquery.com/contains-selector/)

```
$('td:contains("Hours")').attr('style', "text-align:'right'"); 
```

由于我不确定您的问题（“超链接”？），如果您尝试在其 href 包含“小时”的表中获取链接，您可以这样做：

```
$('td a[href~="Hours"]').attr('style', "text-align:'right'"); 
```

编辑：格式化问题后，我认为第二部分没用。

# javascript - 在特定html表单的中心显示加载图像？

> ID：14215453
> 
> 赞同：0
> 
> 时间：2013-01-08T12:56:43.607
> 
> 标签：javascript, jquery, html, css

我有具有 id 属性的图像标签。我想在特定 html 表单的中心显示这个加载图像（我有那个 html 表单的 id）。我正在使用 jquery。我不知道该怎么做？

```
 <img id="loading" src="loading.gif" /> 
```

这样做的原因我可以在一个页面内有多个表单。我想在特定表单边界的中心显示图像而不是完整的页面边界

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:14:22.313

你可以使用这样的东西......

```
$('#form-id').submit(
  function(e) {
    $(this).children().hide();
    $(this).append('<img id="loading" src="loading.gif" />');
  }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:17:16.710

随着 CSS 的到来，我们来到了这个非常基本的结构（将这个 HTML 放在一个表单中，并将 CSS 添加到样式覆盖）

```
<div class="loader">
    <img src="http://cdn1.iconfinder.com/data/icons/duesseldorf/32/process.png">
</div> 
```

[http://jsfiddle.net/aG3DP/](http://jsfiddle.net/aG3DP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:00:37.007

您可能应该将表单包装在 DIV 中，然后只需放置`img`带边距，使其显示在 DIV 的中心（包含您的表单）

```
img#loading {
    display: block;
    margin-left: auto;
    margin-right: auto;
} 
```

您可能希望默认使用 javascript 或其他方式隐藏它。

编辑：关于表单中的现有内容，我会用`position:absolute;`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T13:20:02.973

你需要这些 jQuery 方法：

*   `offset()`
*   `width()`
*   `height()`

一些数学运算，您可以轻松地将元素放在表单上。请注意，表单的默认宽度为 100%。

检查我的解决方案：http: [//jsfiddle.net/3pbkV/](http://jsfiddle.net/3pbkV/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T13:21:24.843

如果您使用`position:absolute;`将加载器定位在表单的中心，请记住`position: relative;`在表单上使用，因为绝对定位的元素是相对于它们的第一个定位的父元素定位的。

示例：HTML：

```
<form id="myform">
    <div class="loader"><img src="loading.gif"></div>
</form> 
```

CSS：

```
form#myform {
    position: relative;
}
div.loader {
   width: 60px;
   height: 60px;
   position: absolute;
   left: 50%;
   top: 50%;
   margin-top: -30px;
   margin-left: -30px;
   display: none;
} 
```

jQuery：

```
$(function() {
   $('form#myform').submit(function() {
      $(this).find('.loader').show();
   });
}); 
```

# android - Android：自定义键盘行不居中

> ID：14215454
> 
> 赞同：4
> 
> 时间：2013-01-08T12:56:48.570
> 
> 标签：android, keyboard, center, ime

我正在尝试为 Android 创建一个自定义键盘。我使用软键盘示例应用程序作为起点。我的问题是我无法在键盘中居中一行，而我在网上找到的其他示例显然可以工作。

我的 XML 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?><Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
android:horizontalGap="@dimen/horizontal_gap"
android:keyHeight="@dimen/key_height"
android:keyWidth="10%p"
android:verticalGap="@dimen/vertical_gap" >
<Row>
    <Key
        android:codes="49"
        android:keyEdgeFlags="left"
        android:keyLabel="1" />
    <Key
        android:codes="50"
        android:keyLabel="2" />
    <Key
        android:codes="51"
        android:keyLabel="3" />
    <Key
        android:codes="52"
        android:keyLabel="4" />
    <Key
        android:codes="53"
        android:keyLabel="5" />
    <Key
        android:codes="54"
        android:keyLabel="6" />
    <Key
        android:codes="55"
        android:keyLabel="7" />
    <Key
        android:codes="56"
        android:keyLabel="8" />
    <Key
        android:codes="57"
        android:keyLabel="9" />
    <Key
        android:codes="48"
        android:keyEdgeFlags="right"
        android:keyLabel="0" />
</Row>
<Row>
    <Key
        android:codes="1"            
        android:keyEdgeFlags="left"
        android:keyLabel="q" />
    <Key
        android:codes="2"
        android:keyLabel="w" />
    <Key
        android:codes="3"
        android:keyLabel="e" />
    <Key
        android:codes="4"
        android:keyLabel="r" />
    <Key
        android:codes="5"
        android:keyLabel="t" />
    <Key
        android:codes="6"
        android:keyLabel="y" />
    <Key
        android:codes="-5"
        android:isRepeatable="true"
        android:keyEdgeFlags="right"
        android:keyIcon="@drawable/sym_keyboard_delete" />
</Row>
<Row>
    <Key
        android:codes="99"
        android:keyEdgeFlags="left"
        android:keyLabel="c" />
    <Key
        android:codes="32"
        android:isRepeatable="true"
        android:keyIcon="@drawable/sym_keyboard_space"
        android:keyWidth="30%p" />
    <Key
        android:codes="63"
        android:keyLabel="\?"
        android:keyWidth="@dimen/small_buttons" />
    <Key
        android:codes="33"
        android:keyLabel="!"
        android:keyWidth="@dimen/small_buttons" />
    <Key
        android:codes="46"
        android:keyLabel="."
        android:keyWidth="@dimen/small_buttons" />
    <Key
        android:codes="44"
        android:keyEdgeFlags="right"
        android:keyLabel=","
        android:keyWidth="@dimen/small_buttons" />
</Row></Keyboard> 
```

为了使第二行和第三行居中，缺少什么？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T12:26:08.643

第一行有 10 个键，而第二行和第三行分别只有 7 个和 6 个键。由于 keyWidth 定义为 10%，这 10 个键填充了整个空间。但是，第二行和第三行分别有 7 个和 6 个键，只填充了整个空间的 70% 和 60%，这意味着它们看起来向左对齐，而右侧有空白空间。为了使键在行的中间对齐，第二行的第一个键应该有 15% 的水平间隙，第三行应该有 20% 的水平间隙，以便将左侧移动到中心。

请更正第二行和第三行的第一部分如下：

```
<Row>
    <Key
        android:horizontalGap="15%"
        android:codes="1"            
        android:keyEdgeFlags="left"
        android:keyLabel="q" />

......

<Row>
    <Key
        android:horizontalGap="20%"
        android:codes="99"
        android:keyEdgeFlags="left"
        android:keyLabel="c" /> 
```

# php - 如何测试空记录集

> ID：14215455
> 
> 赞同：3
> 
> 时间：2013-01-08T12:56:56.860
> 
> 标签：php, unixodbc

我正在使用 PHP ODBC 库连接到 MSSQL 2008 服务器 ( [http://php.net/manual/en/ref.uodbc.php](http://php.net/manual/en/ref.uodbc.php) )。

我的一些存储过程不返回记录集（例如，它们只是进行插入或更新）。我希望能够在这种情况下优雅地处理输出。在进行数据库调用后，输出被注入到一个数组中，该数组返回给应用程序进行处理。以下是代码的关键部分（不包括错误处理等）：

```
$sql_result = odbc_exec($connection, $sql);
while ($row = odbc_fetch_array($sql_result)) {
    $resultArray[$i] = $row;
    $i++;
} 
```

如果`$sql_result`已成功执行，但不包含记录集（因为它会在插入或更新之后）然后`odbc_fetch_array`触发此警告：

> 警告：odbc_fetch_row()：此结果索引处没有可用的元组

理想情况下，我想先测试`$sql_result`一下它是否包含空记录集，但我尝试过的每一次明显尝试总是会导致相同的警告消息。

任何人都有一种检查是否`$sql_result`为空的简洁方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:17:49.650

我认为没有使用 PHP odbc API 的简单方法。通常，您会使用不同的函数来处理返回值的语句，例如 SELECT 和不返回值的 UPDATE。

如果这是一个运行任意语句的实用程序，您可以解析该语句。

这不是一个空的结果集，它根本不是结果集，您可以通过在调试器中检查结果或使用 var_dump 来区分。

# facebook-graph-api - 前向搜索 RestFB

> ID：14215457
> 
> 赞同：1
> 
> 时间：2013-01-08T12:57:00.080
> 
> 标签：facebook-graph-api, restfb

我正在使用 RestFB 在 Facebook 上搜索多个术语。我正在使用以下代码来实现这一点。

```
Connection<Post> publicSearch = publicOnlyFacebookClient
            .fetchConnection(
                    "search",
                    Post.class,
                    Parameter.with("since",
                            DateFormatter.stringToDate("2013-01-01")),
                    Parameter.with("q", "apple OR oranges"),
                    Parameter.with("type", "post")); 
```

我有两个问题。

1.  这是使用 OR 的正确方法吗
2.  我观察到，即使我提到了“自从”，我得到的结果也是按时间戳降序排列的。结果从 NOW 开始，然后是 backwords。是否有一种方法可以开始以正向方式获取方法（例如 twitter 流 API）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:13:21.930

1.  您可以使用`|`OR 字符（例如`apple | oranges`）

2.  Graph API 总是首先返回最新的结果，没有参数可以控制它。要解决这个问题，您可以实现一个[比较](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)器，按时间比较`Post`类并`List`使用[Collections.html#sort(java.util.List, java.util.Comparator)对结果进行排序](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

# c# - 如何正确使用列表框项目模板/数据模板中的按钮？

> ID：14215460
> 
> 赞同：5
> 
> 时间：2013-01-08T12:57:06.390
> 
> 标签：c#, silverlight, styles, datatemplate

我有一个 Silverlight 应用程序，它显示`ListBox`. 每个项目代表我的应用程序的不同“页面”，因此我有一个应用于`ItemContainerStyle`属性的样式，如下所示：

```
<Style x:Key="navigationItemContainerStyle" TargetType="ListBoxItem">
    <Setter Property="Margin" Value="5,3"/>
    <Setter Property="FontSize" Value="16"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate>
                <Grid Cursor="Hand">
                    <VisualStateManager.VisualStateGroups>
                        <!-- code omitted --!> 
                    </VisualStateManager.VisualStateGroups>
                    <Border x:Name="contentBorder"
                            Background="{StaticResource navigationHighlightBrush}" 
                            CornerRadius="3"
                            Opacity="0"/>
                    <ContentControl x:Name="content"
                                    Margin="10,5"
                                    Content="{Binding}" 
                                    Foreground="DarkGray"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

风格非常简单。`Border`当`ListBoxItem`' 的视觉状态等于 'Selected'时，它只显示。请注意，内容由 a 托管，`ContentControl`因为我希望能够`Foreground`在项目处于“已选择”状态时更改属性。

从下面的屏幕截图可以看出，这非常有效：

![在此处输入图像描述](../Images/9cdbf28c8f73ecbbf8661cc7113ca76f.png)

现在我希望所选项目调用导航，所以我的想法是创建一个`DataTemplate`将每个项目的内容设置为 a `HyperLinkButton`：

```
<DataTemplate x:Key="navigationListBoxItemTemplate">
    <HyperlinkButton Content="{Binding}" 
                     Background="Transparent"/>
</DataTemplate> 
```

现在这不适用于它的内容在 a而不是 a中的`ItemTemplate`主机，所以我不得不更新模板以使用 a代替。`ContentControl``ContentPresenter``ListBoxItem``ContentPresenter`

```
<ContentPresenter x:Name="content" Margin="10,5"/> 
```

我现在得到以下结果：

![在此处输入图像描述](../Images/4e23ff82c370ae98ebbdf26a5bb8c5f7.png)

当我点击现在不再被选中（我可以点击外面`HyperLinkButton`并且被选中）。我真正想要的是在单击时被选中。没有选择的 概念，所以我不能绑定到'属性。`ListBoxItem``HyperLinkButton``ListBoxItem``ListBoxItem``HyperLinkButton``HyperLinkButton``ListBoxItem``IsSelected`

**注意：**实际导航效果很好，问题纯粹是`ListBoxItems`.

**所以我的问题是：**

1.  我可以这样做，以便在`HyperLinkButton`单击时，`ListBoxItem`像第一张图片一样被选中？
2.  我还需要一些方法来改变`HyperLinkButton`它被选中时的前景，因为我在项目模板中不再这样做，因为我交换了`ContentControl`fro a `ContentPresenter`。

**注意：**我可能可以通过将 的`SelectedItem`属性绑定`ListBox`到我的 viewModel 并处理那里的导航来解决这个问题，从而否定`HyperLinkButton`每个主机托管的要求，`ListBoxItem`但我很想知道是否可以使用样式和模板来实现我想要的结果.

**更新**

我已经尝试了几件事来尝试解决这个问题，但到目前为止都没有成功。我尝试的第一件事是对`HyperLinkButton`我的控件应用一种新样式，`DataTemplate`这基本上从控件中删除了所有默认外观，但我的应用程序仍然以上述方式运行。

我尝试的第二件事是将`IsHitTestVisible`属性设置为 false。这允许我单击“通过”`HyperLinkbutton`并选择，`ListBoxItem`但这意味着现在不再调用导航。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:20:08.793

未选择 ListBoxItem，因为 Button（无论它是什么类型）将 MouseLeftButtonDown 事件标记为 Handled。因此，所需的事件不会冒泡到父 ListBoxItem。

显然，您的 ListBoxItem 正在从单击中获得焦点（我假设这是您最终图像中的边框），因此无论如何都必须发生这种情况。

在幕后，ListBoxItem 将设置一个标准的 LeftMouseButtonDown 事件处理程序来处理选择，并且它必须调用 AddHandler 来处理设置焦点。

* * *

您可以通过为事件添加自己的处理程序来实现类似的效果，如下所示：

```
 listboxitem.AddHandler(UIElement.MouseLeftButtonDownEvent, new System.Windows.Input.MouseButtonEventHandler(MyMouseLeftButtonDownEventHandler), true); 
```

最后一个参数指示处理程序处理已处理的事件......

附加这个我留给你的处理程序，但使用行为可能是最直接的。您可以事件从 Button 派生一个类型，并让它沿着 Visual Tree 查找并选择 ListBoxItem……可能性是无穷无尽的。

# android - 如何创建一个 android 原生服务并使用 binder 与之通信？

> ID：14215462
> 
> 赞同：14
> 
> 时间：2013-01-08T12:57:08.030
> 
> 标签：android, c++, android-service, android-binder

我的基本任务是在 android 中创建一个原生服务，然后编写一个简单的原生程序来测试它。假设我想编写一个简单的服务，它返回两个整数的总和。我必须使用活页夹从程序中与之交谈，我试图用谷歌搜索，但找不到一个精确的例子。我需要知道如何创建本机服务并在程序中找到它，如果需要，还需要在 Java 中找到它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T10:31:45.233

如果您使用 NDK 创建普通的 Android 应用程序，则不能使用 Binder，因为它不是 NDK API 的一部分。

在 NDK docs/STABLE-APIS.html 中查看完整的稳定 API 列表，并在此线程中查看 David Turner（NDK 维护者）的明确评论，即 Binder 不是受支持的 API。

[https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/1QmVRrNckfM](https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/1QmVRrNckfM)

您的选择是：

*   在本机代码中使用其他形式的 IPC - 例如 UNIX 域套接字
*   使用 Android SDK 的常规`Service`和 AIDL 工具在 Java 中执行此操作。如果您希望将其与本机代码结合使用，您可以使用 JNI 从本机代码调用 Java。
*   （不推荐）从 Android 开源项目中复制相关的库和头文件；构建到您的 NDK 项目中；并使用 API。但是，这不受官方支持，并且极有可能在将来的版本中破坏您的应用程序，因为 Google 没有义务维护此类库的兼容性（并且通常不会）。这也很困难，因为您需要找到某种方法来注册服务，以便客户端可以找到它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-11T11:21:55.253

我找到的解决方案是在本机中使用 Binder 并使用

```
defaultServiceManager()->addService(
        String16("TestService"),new CalcService()); 
```

然后使用活页夹并在客户端使用以下内容。

```
sp<IServiceManager> sm = defaultServiceManager();
sp<IBinder> binder = sm->getService(String16("TestService")); 
```

我在这里找到了有关如何执行此操作的示例： [https ://github.com/gburca/BinderDemo/blob/master/binder.cpp](https://github.com/gburca/BinderDemo/blob/master/binder.cpp)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-05T03:43:44.050

在@Android NDK 学习和编码之后，我发现Binder API在Android NDK 中是**不可用的。**而且即使你使用android开源来调用binder api，也许你会因为binder安全检查而**被拒绝。**

这里如果我想给系统服务添加一个服务，我需要一个系统级的用户组。详细代码可以在[https://github.com/qianjigui/android_system_service_example](https://github.com/qianjigui/android_system_service_example)找到。它包含C和Java级别的客户端和服务，但需要系统权限。

# jquery - 使用jquery控制css3转场打开和关闭嵌套菜单下拉菜单

> ID：14215463
> 
> 赞同：0
> 
> 时间：2013-01-08T12:57:08.360
> 
> 标签：jquery, drop-down-menu, css-transitions, toggleclass

我正在使用 Jquery 来控制嵌套下拉菜单的 css3 过渡（边距）动画。我可以在单击触发菜单主要部分中的事件的链接时将嵌套菜单下拉，然后如果我再次单击相同的触发器，它将关闭它应该执行的下拉菜单。但是，如果我单击所有下拉触发器，所有下拉菜单都同时可见。

我所追求的是，​​当我单击同一主菜单中的另一个下拉触发器时，如果其中一个下拉菜单已经打开，则打开的下拉菜单将在新的下拉菜单打开时使用 Jquery 控制的 css3 转换关闭。所以一次只能打开一个下拉菜单。

我是 jquery 的新手，我知道下面的 jquery 不是最好的方法。非常感谢任何正确方向的指导。

**查询：**

```
$(function() {  
    $("#drop1").click(function() {  
        $(".sub1").toggleClass("submenu");
    });  
});

$(function() {  
    $("#drop2").click(function() {  
        $(".sub2").toggleClass("submenu");
    });  
});

$(function() {  
    $("#drop3").click(function() {  
        $(".sub3").toggleClass("submenu");
    });  
}); 
```

**CSS：**

```
ul {width:100%; list-style: none; display:block;}

ul li {display:inline-block; width: 20%; height: 40px; float:left; background: #ccc; text-align:center;}

ul li a {display:block; width:100%; height: 40px; position:relative;}

.sub1, .sub2, .sub3 {width:300px; margin: -40px 0 0 0; position:absolute; z-index:-1;
transition: margin 0.2s ease; 
-moz-transition: margin 0.2s ease; 
-webkit-transition: margin 0.2s ease;
-o-transition: margin 0.2s ease;
-ms-transition: margin 0.2s ease;}

.submenu {margin:0; background: #666;}

.sub1 li, .sub2 li, .sub3 li {text-align:center; width: 33%;} 
```

**HTML：**

```
<ul>
    <li>normal</li>
    <li><a id="drop1" href="#">drop</a>
        <ul class="sub1">
            <li>drop</li>
            <li>drop</li>
            <li>drop</li>
        </ul>
    </li>
    <li><a id="drop2" href="#">drop</a>
        <ul class="sub2">
            <li>drop</li>
            <li>drop</li>
            <li>drop</li>
        </ul>
    </li>
    <li>normal</li>
    <li><a id="drop3" href="#">drop</a>
        <ul class="sub3">
            <li>drop</li>
            <li>drop</li>
            <li>drop</li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:04:41.253

我会选择一个更简单的解决方案，我希望它可以帮助你（我已经测试过了）。

您将需要更改一些代码，以使激活下拉列表的链接成为同一类的所有成员，在这种情况下`drop`。例如：

`<a id="drop1" href="#" class="drop">drop</a>`

您应该对所有下拉选择器（#drop1、#drop2、#drop3）执行此操作。

然后使用这个函数：

```
$(function() {  
    $("a.drop").click(function() {  
    $('.submenu').not( $(this).next() ).toggleClass("submenu");
        $(this).next().toggleClass("submenu");
    });  
}); 
```

这将做的是：

1.  检查是否已经存在子菜单，以及该子菜单是否不是我们正在单击的当前菜单。这会再次切换（禁用子菜单）每个不是我们单击的元素（因为将在下一行切换）。这是在函数的第一行进行的。
2.  然后，它将切换当前单击元素的类。

我们需要这两行，因为菜单的状态是没有任何元素显示其子菜单。

在这种`$(this).next()`情况下使用 是因为您的子菜单是单击的子菜单的下一个元素；换句话说，它就在激活点击之后。

# mysql - 查询以选择当前和上一个小时、日和月

> ID：14215474
> 
> 赞同：2
> 
> 时间：2013-01-08T12:57:50.690
> 
> 标签：mysql, sql, datetime

我的sql不太好，所以我想知道这些语句对于选择当前和前一个小时、天和月是否正确？

```
DATE_SUB(NOW(), INTERVAL '1' HOUR) <= ADDTIME(Datestamp, Timestamp)
DATE_SUB(NOW(), INTERVAL '1' DAY) <= ADDTIME(Datestamp, Timestamp)
DATE_SUB(NOW(), INTERVAL '1' MONTH) <= ADDTIME(Datestamp, Timestamp) 
```

例如，如果现在是 14:49，那么我需要计算：

1.  所有从 14:00 到 15:00（或直到 14:49）-`DATE_SUB(NOW(), INTERVAL '0' HOUR) <= ADDTIME(Datestamp, Timestamp)`
2.  全部从 13:00 到 14:00`DATE_SUB(NOW(), INTERVAL '1' HOUR) <= ADDTIME(Datestamp, Timestamp)`

与天和蛾相同，例如如果当前是 2013-01-08，那么我需要计算 2013-01-08 和 2013-01-07

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T16:01:39.897

这是一个如何使用[MySQL 日期函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)来创建日期的示例：

```
SELECT 
    NOW() AS CurrentDateTime, 
    DATE_FORMAT(NOW(), '%Y-%m-%d %H:00:00') AS CurrentHour, 
    DATE_FORMAT(NOW(), '%Y-%m-%d %H:00:00') - INTERVAL 1 HOUR AS PreviousHour, 
    CURDATE() AS CurrentDate, 
    CURDATE() - INTERVAL 1 DAY AS PreviousDate, 
    DATE_FORMAT(NOW(), '%Y-%m-01') AS CurrentMonth, 
    DATE_FORMAT(NOW(), '%Y-%m-01') - INTERVAL 1 MONTH AS PreviousMonth 
```

输出：

```
CurrentDateTime: 2013-01-08 21:00:51
    CurrentHour: 2013-01-08 21:00:00
   PreviousHour: 2013-01-08 20:00:00
    CurrentDate: 2013-01-08
   PreviousDate: 2013-01-07
   CurrentMonth: 2013-01-01
  PreviousMonth: 2012-12-01 
```

这是示例用法：

```
-- SELECT PREVIOUS HOUR ROWS
SELECT *
FROM table1
WHERE ADDTIME(Datestamp, Timestamp) >= DATE_FORMAT(NOW(), '%Y-%m-%d %H:00:00') - INTERVAL 1 HOUR
AND   ADDTIME(Datestamp, Timestamp) <  DATE_FORMAT(NOW(), '%Y-%m-%d %H:00:00')

-- SELECT CURRENT HOUR ROWS
SELECT *
FROM table1
WHERE ADDTIME(Datestamp, Timestamp) >= DATE_FORMAT(NOW(), '%Y-%m-%d %H:00:00') 
```

对于其他情况也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T13:21:18.457

当前加上前一小时：

```
ADDTIME(Datestamp, Timestamp) BETWEEN ADDDATE(DATE(NOW()), INTERVAL HOUR(NOW())-1 HOURS) AND NOW() 
```

今天加上昨天：

```
ADDTIME(Datestamp, Timestamp) BETWEEN DATE(DATE_ADD(DATE(NOW()), INTERVAL -1 DAY)) AND NOW() 
```

编辑：添加了单个查询

当前时间（包括未来）：

```
ADDTIME(Datestamp, Timestamp) >= ADDDATE(DATE(NOW()), INTERVAL HOUR(NOW()) HOURS) 
```

上一个小时：

```
DateStamp = DATE(NOW()) AND HOUR(Timestamp) = HOUR(NOW()) 
```

当前日期：

```
Datestamp = DATE(NOW()) 
```

最后一天：

```
Datestamp = DATE(DATE_ADD(NOW(), INTERVAL -1 DAY)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:57:02.410

获取当前时间开始的正确方法是：

```
SUBDATE(SUBDATE(SUBDATE(NOW(),
        INTERVAL EXTRACT(MICROSECOND FROM NOW()) MICROSECOND),
        INTERVAL EXTRACT(SECOND FROM NOW()) SECOND),
        INTERVAL EXTRACT(MINUTE FROM NOW()) MINUTE)) 
```

所以要获得一个完整的小时范围，你会做类似的事情

```
SUBDATE(SUBDATE(SUBDATE(SUBDATE(NOW(),
        INTERVAL EXTRACT(MICROSECOND FROM NOW()) MICROSECOND),
        INTERVAL EXTRACT(SECOND FROM NOW()) SECOND),
        INTERVAL EXTRACT(MINUTE FROM NOW()) MINUTE),
        INTERVAL 1 HOUR) <= my_date
    AND my_date < SUBDATE(SUBDATE(SUBDATE(NOW(),
        INTERVAL EXTRACT(MICROSECOND FROM NOW()) MICROSECOND),
        INTERVAL EXTRACT(SECOND FROM NOW()) SECOND),
        INTERVAL EXTRACT(MINUTE FROM NOW()) MINUTE) 
```

这实际上非常痛苦，如果您不太了解数据类型的纯度，您将使用格式化技巧来获取当前时间：

```
STR_TO_DATE(DATE_FORMAT(NOW(), '%Y%m%d%H'), '%Y%m%d%H') <= my_date
AND my_date <= ADDDATE(STR_TO_DATE(DATE_FORMAT(NOW(), '%Y%m%d%H'), '%Y%m%d%H'), INTERVAL 1 HOUR) 
```

和前一小时：

```
SUBDATE(STR_TO_DATE(DATE_FORMAT(NOW(), '%Y%m%d%H'), '%Y%m%d%H'), INTERVAL 1 HOUR) <= my_date
AND my_date < STR_TO_DATE(DATE_FORMAT(NOW(), '%Y%m%d%H'), '%Y%m%d%H') 
```

当天：

```
STR_TO_DATE(DATE_FORMAT(NOW(), '%Y%m%d'), '%Y%m%d') <= my_date
AND my_date <= ADDDATE(STR_TO_DATE(DATE_FORMAT(NOW(), '%Y%m%d'), '%Y%m%d'), INTERVAL 1 DAY) 
```

和前一天：

```
SUBDATE(STR_TO_DATE(DATE_FORMAT(NOW(), '%Y%m%d'), '%Y%m%d'), INTERVAL 1 DAY) <= my_date
AND my_date < STR_TO_DATE(DATE_FORMAT(NOW(), '%Y%m%d'), '%Y%m%d') 
```

当月：

```
STR_TO_DATE(DATE_FORMAT(NOW(), '%Y%m'), '%Y%m') <= my_date
AND my_date <= ADDDATE(STR_TO_DATE(DATE_FORMAT(NOW(), '%Y%m'), '%Y%m'), INTERVAL 1 MONTH) 
```

和上个月：

```
SUBDATE(STR_TO_DATE(DATE_FORMAT(NOW(), '%Y%m'), '%Y%m'), INTERVAL 1 MONTH) <= my_date
AND my_date < STR_TO_DATE(DATE_FORMAT(NOW(), '%Y%m'), '%Y%m') 
```

# ios - 如何从 iOS 私有 api 二进制文件中获取标头和函数？如何对应用程序进行逆向工程？

> ID：14215480
> 
> 赞同：0
> 
> 时间：2013-01-08T12:58:01.453
> 
> 标签：ios, ios5, iphone-sdk-3.0, iphone-privateapi

我已经阅读了 class-dump 实用程序用于从 iphone 私有 api 转储标头。但是，它只适用于objective-c 框架。我想知道它对于用 C 编写的框架是如何工作的，例如 - IOSurface、IOMobileFramebuffer 等。

问题的第二部分非常笼统。我有一个从 cydia 或 istore 下载的应用程序。我如何在越狱设备上对应用程序进行逆向工程（如果确实需要）。具体来说，我能够找到可执行的二进制文件和 dylib。我能够看到正在使用的框架。但是，我如何确定应用程序正在调用框架内的哪些函数？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:45:33.100

我建议将这个问题分解为两个问题：

**1）** *“我想知道它是如何在用 C 语言编写的框架上工作的，例如 - IOSurface、IOMobileFramebuffer 等。”*

我有完全相同的问题： [Getting signatures of private API methods for iOS](https://stackoverflow.com/questions/11511570/getting-signatures-of-private-api-methods-for-ios)

答案是

   a) 尝试谷歌 C 方法，看看是否有人反汇编并找到方法签名。

   b) 如果以前没有人这样做，你可以成为第一个这样做的人

**2）** *“我如何确定应用程序正在调用框架内的哪些功能？”*

框架/库中有两种类型的函数引用：

*   编译时参考

您使用一些反汇编程序，它将列出对框架/dylibs 的所有编译时引用。

*   运行时参考

当有人这样做或使用某些功能时`dlopen`，这些是参考。您将不得不反汇编并通过反汇编代码查看/grep 以找到它们的使用位置。将有带有所使用方法名称的字符串。`dlsym``NSBundle`

# ssh - FORTRAN自启动MPI程序

> ID：14215485
> 
> 赞同：0
> 
> 时间：2013-01-08T12:58:12.523
> 
> 标签：ssh, fortran, cluster-computing, mpi

有什么方法可以在 FORTRAN 程序中调用 mprirun 吗？我正在通过 ssh 处理公共 linux 集群，主要思想是在程序执行结束后自动将程序加入队列。

我试图在程序结束时写这样的东西：

```
CALL system('mpirun -np 16 -maxtime 100 TestNP') 
```

但收到此错误：

```
sh: mpirun: command not found 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:12:52.020

问题是缺少路径前缀，因此为 mpirun 指定绝对路径应该会有所帮助。但是，您的方法存在几个问题：

*   如果每个 MPI 进程都执行它，您将运行太多实例，因此只有一个节点（例如主节点）应该执行它。

*   原始程序不会完成，直到通过 system() 调用调用的程序没有完成。因此，如果您的队列受挂钟限制，您将一无所获。

通常，像这样的任务是通过 shell 脚本完成的。例如，在 Bash 中，您会编写如下内容：

```
while true; do
  mpirun your_program
done 
```

这将不断地重新调用 mpirun 直到未被您或排队系统杀死。（所以*要小心*！）

# wix - WiX：石蜡和存储库/构建服务器集成

> ID：14215486
> 
> 赞同：2
> 
> 时间：2013-01-08T12:58:15.500
> 
> 标签：wix, guid, paraffin

简短版本：如何确保我的组件 GUID 在构建服务器上使用石蜡保持稳定？

* * *

我目前正在开发一个应该通过 WiX 部署的项目。由于这是一个网络项目，它包含许多文件（仍处于早期阶段，已经有近 200 个文件）。此外，在开发过程中，文件会不断添加和删除，因此手动维护 WiX 组件列表根本不是一种选择。

由于我阅读了很多有关组件规则的内容，并且违反它们的人会下地狱，因此我决定使用石蜡作为收割机。此工具能够更新现有组件列表，因此不会为现有组件重新创建新的 GUID。

但是，当创建一个新组件时，该工具会分配一个新的 GUID。即使组件文件相同，初始 GUID 在不同的机器上也会不同，甚至只是在不同的时间。

因此，很明显，我需要一个中央机构来修复初始 GUID。我的想法是提交空的组件列表，然后由构建服务器在构建时调用 Paraffin 填充。因此，当我只分发由构建服务器创建的 MSI 时，我可以确定组件规则得到遵守。

但是，这种方法的问题是，如果构建服务器崩溃或清空其本地存储库，我无法跟踪我的 GUID。我正在考虑让构建服务器将生成的组件列表提交到我的存储库，但这似乎不是一个干净的想法。

我想到的另一个解决方案是让所有开发人员在提交之前构建（因此称为石蜡）。因此，每个开发人员都会为其新添加的文件创建初始 GUID，并将它们提交到组件列表。

这种方法的明显问题是：人们（例如开发人员 A）在提交之前会忘记构建。因此，在这些情况下，构建服务器将为新文件创建初始 GUID，但这些也将仅存储在本地。几次提交之后，开发人员 B 将出现并构建解决方案，为开发人员 A 创建的文件创建一个新的 GUID。然后他将提交包含此 GUID 的组件列表，构建服务器将检查它。现在，构建服务器已经获得了一个包的 GUID（由开发人员 A 创建），它之前使用了一个不同的（自己创建的）GUID，即使文件在此期间没有更改。

那么，我如何确保我的 GUID 在构建之间保持稳定，而不依赖于开发人员在提交之前构建他们的解决方案？上面列出的方法对我来说似乎都不满意，但我现在能想到的就只有这些了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:15:13.097

不完全正确。当且仅当您提前安排 RemoveExistingProducts 以便文件在重新安装新 GUID 之前离开系统时，才可以将组件 GUID 从构建更改为构建。这种方法适用于文件不多的小型安装程序，但随着安装程序的增长，您会感到需要执行两倍的 IO，因为您删除然后重新安装，而不是仅仅覆盖您的文件。简而言之，这取决于您，但在采用建议的方法之前，您应该仔细考虑您的应用程序可能会变得多大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:28:07.250

就我而言，只有当您有多个安装程序共享具有相同 guid 的组件（然后应该是完全相同的资源）或者您使用的是 wixlib 或合并模块时，组件规则才真正发挥作用然后作为不同安装程序的一部分包含在内。

根据您上面所说的，对我来说，听起来您不会这样，为每个构建使用不同的组件 guid 并没有什么坏处。这只是意味着当您升级网站时，未更改的文件将被删除并在不同的组件 guid 下重新安装。恕我直言，只要安装程序正确安装站点运行所需的所有文件并且不从其他产品中删除组件，这并不重要。

如果您使用[MajorUpgrade](http://wix.sourceforge.net/manual-wix3/wix_xsd_majorupgrade.htm)元素，旧产品将在安装新产品之前完全删除，因此两个版本之间共享的任何组件 guid 都将被删除，然后重新安装。

我总是只留下我的 guid 元素，`Guid='*'`因为这样我就知道在我的多个产品中的任何组件中永远不会有任何 guid 冲突。

^ 我知道这在理论上是不正确的，但在这个用例中它是正确的。

# .htaccess - 使用 htaccess 将 folder.domain.com 重写为 www.domain.com/folder

> ID：14215494
> 
> 赞同：0
> 
> 时间：2013-01-08T12:58:42.793
> 
> 标签：.htaccess, dns, rewrite

我想在我当前的域上建立一个博客

[http://www.ashrobbins.com/folder/](http://www.ashrobbins.com/folder/)

并使用 htaccess 以便可以通过简单地访问

[http://folder.ashrobbins.com](http://folder.ashrobbins.com)

我目前在我的 .htaccess 中的重写如下。

RewriteRule ^blog$ blog.php [L,NC]

但是当我在浏览器中访问 folder.ashrobbins.com 时，我发现一个页面没有找到......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:39:04.937

您必须在主机中设置 ashrobbins.com 以提供本地文件夹中的内容，并在其中添加一个“文件夹”文件夹。

并且还在您的主机中设置 folder.ashrobbins.com 以提供来自另一个本地文件夹的内容。如我所见，您尚未设置 folder.ashrobbins.com ，因此您会收到该错误。

看来您正在创建一个新站点，但不知道该怎么做。如果它是新的，只需设置 subdomain.ashrobbins.com 并将您的网站放在上面。如果 ashrobbins.com/folder/ 中没有任何内容，请不要乱用它。

# bash - 如何从 bash 脚本中获取正确的表格输出，例如 mysql 命令行

> ID：14215495
> 
> 赞同：0
> 
> 时间：2013-01-08T12:58:45.280
> 
> 标签：bash

我正在使用以下查询从 bash 脚本查询数据库：-

```
Output = echo "$QUERY_STR" | mysql -h $DB_HOST -u $DB_USER -p$DB_PASS $DB_NAME 
```

它给了我所需的输出，我保存在一个变量中

但是，当我回显时，`$output`我没有像在 mysql 查询的命令行中那样得到正确的格式化输出。

阅读要在查询中使用的一篇文章，`-t`但是对于大型数据集，它没有提供正确的输出。

为了解决这个问题，我将输出保存在 .csv 文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:30:14.790

为了维护变量值中确实保留的所有空格，双引号变量至关重要：

```
echo "$output" 
```

此外，变量赋值中的等号周围不能有空格：

```
output=$(mysql ... <<< "$QUERY_STR") 
```

# vbscript - 我正在尝试将 VB 脚本中的值传递回 mathcad 工作表，但脚本无法创建工作表对象

> ID：14215496
> 
> 赞同：0
> 
> 时间：2013-01-08T12:58:46.783
> 
> 标签：vbscript, mathcad

谁能告诉我为什么活动工作表对象 MCWS 不是由以下 VB 脚本创建的吗？它是 mathcad 工作表中组合框的代码。谢谢

```
Public Sub SizeBoxEvent_Start()
  Dim objEX
  Dim objMC

  Dim MCWS
  Dim objEXWB
  Dim objEXWS
  Dim intLineNo
  Dim objRange
End Sub

Sub SizeBoxEvent_Exec(Inputs,Outputs)
  Set objMC = CreateObject("MathCad.Application")
  Set MCWS = objMC.ActiveWorkSheet

  Set objEX = CreateObject("Excel.Application")
  Set objEXWB = GetObject("C:\UB_Dims.xls")

  Set objEXWS = objEXWB.worksheets("UB")

  Dim MyList(71)

  For i = 0 to 71
    Mylist(i) = CStr(objEXWS.cells(i+3,1))
    'MsgBox Mylist(i)
  Next

  SizeBox.List() = MyList
  intLineNo = SizeBox.ListIndex + 3
  objRange = "A" & intLineNo & ":U" & intLineNo

  Dim varDimProps(21)
  Dim varDimName(21)

  For i = 1 to 21
    varDimProps(i) = objEXWS.cells(intLineNo,i)
    varDimName(i) = CStr(objEXWS.cells(1,i))
  Next

  MCWS.SetValue "Size", ABC
  MCWS.SetValue "M", 288
  MCWS.SetValue "D", 203

  Outputs(0).Value = varDimProps
End Sub

Sub SizeBoxEvent_Stop()
  Rem TODO: Add your code here
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-16T17:27:18.090

我没有使用公共潜艇，所以我不知道你的声明是否会延续到其他潜艇。这是我从 PTC 论坛中挑选的一些东西，它可以在 Excel 2007 和 Mathcad 15.0 中使用（我知道 excel 插件对于更高版本的 excel 版本已损坏）。

我的猜测是你应该在使用它们的函数中定义你的对象。另外，我认为您不能将 Activeworksheet 用于 MathCad 工作表。

```
Private Function RunMCAD(InputFile As String)
Dim MC As Object
Set MC = CreateObject("Mathcad.Application")
MC.Visible = True

Set Wk = MC.Worksheets
Set WS = Wk.Open("C:\RDDA\RDDA 2014-10-16_excel.xmcd")
WS.SetValue "InputFile", InputFile

WS.Recalculate
WS.Save
WS.Close False
MC.Quit
RunMCAD = "Done"
End Function 
```

# javascript - 替换 Javascript 中的希腊字母

> ID：14215498
> 
> 赞同：3
> 
> 时间：2013-01-08T12:59:04.963
> 
> 标签：javascript, character-encoding

我有下面的函数，它用类似的“普通”字母替换希腊字母。然而，一些浏览器并不真正喜欢这个代码（IE）。我想这是因为代码中的希腊字母。

如何在不破坏 js 的情况下做到这一点？

```
function string_to_url(string) {
    replace = new Array('á','Á','é','É','í','Í','ó','Ó','ú','Ú','ü','Ü','ö','Ö','õ','Õ','û','Û','¾','š','è','ž','ý','ô','ä','ò','å','¼','Š','È','Ž','Ý','Ò','Å','ì','Ì','ê','Æ','æ','Ø','ø');

    replace_n = new Array('a','A','e','E','i','I','o','O', 'u','U','u','U','o','O','o','O','u','U','l','s','c','z','y','o','a','n','a','l','s','C','Z','Y','N','A','e','E','e','AE', 'ae','O','o');

    for (var i = 0; i < replace.length; i++) {
        string = string.replace(replace[i], replace_n[i]);
    }

    return string;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:13:09.380

您可以尝试对 JS 中的非标准字符进行 unicode 编码，看看它是否更适用于“纯 ASCII”源：

```
function string_to_url(string) {
    var replace = new Array('\u00E1','\u00C1','\u00E9','\u00C9','\u00ED','\u00CD','\u00F3','\u00D3','\u00FA','\u00DA','\u00FC','\u00DC','\u00F6','\u00D6','\u00F5','\u00D5','\u00FB','\u00DB','\u00BE','\u0161','\u00E8','\u017E','\u00FD','\u00F4','\u00E4','\u00F2','\u00E5','\u00BC','\u0160','\u00C8','\u017D','\u00DD','\u00D2','\u00C5','\u00EC','\u00CC','\u00EA','\u00C6','\u00E6','\u00D8','\u00F8');
    var replace_n = new Array('a','A','e','E','i','I','o','O', 'u','U','u','U','o','O','o','O','u','U','l','s','c','z','y','o','a','n','a','l','s','C','Z','Y','N','A','e','E','e','AE', 'ae','O','o');

    for (var i = 0; i < replace.length; i++) {
        string = string.replace(replace[i], replace_n[i]);
    }

    return string;
} 
```

（我使用[http://rishida.net/tools/conversion/](http://rishida.net/tools/conversion/)进行了转换）。

# smartgwt - SMARTGWT，菜单项宽度不变

> ID：14215499
> 
> 赞同：0
> 
> 时间：2013-01-08T12:59:04.343
> 
> 标签：smartgwt

我在我的应用程序中使用 MenuItem 但它显示在整个页面上，请查看附件，我尝试了几个小时并搜索了但这个宽度没有减少，我正在使用 SmartGWT 的演示应用程序，使用它代码，但我不知道是什么问题

任何的想法

谢谢 ![在此处输入图像描述](../Images/2e90d45c2c9b6cb07efa4d55159ab805.png)

代码片段：

```
 itemListMenu = new Menu();  
    itemListMenu.setCellHeight(22); 
    MenuItem detailsMenuItem = new MenuItem("Show Details");  
    detailsMenuItem.addClickHandler(new ClickHandler() {  
        public void onClick(MenuItemClickEvent event) {  
            searchItemDetails.selectTab(0);  
            searchItemDetails.updateDetails();  
        }  
    });  

    MenuItem editMenuItem = new MenuItem("Edit Item");  
    editMenuItem.addClickHandler(new com.smartgwt.client.widgets.menu.events.ClickHandler() {  
        public void onClick(MenuItemClickEvent event) {  
            searchItemDetails.selectTab(1);  
            searchItemDetails.updateDetails();  
        }  
    });  

    MenuItem deleteMenuItem = new MenuItem("Delete Item");  
    deleteMenuItem.addClickHandler(new com.smartgwt.client.widgets.menu.events.ClickHandler() {  
        public void onClick(MenuItemClickEvent event) {  
            userGrid.removeSelectedData();  
            searchItemDetails.clearDetails(null);  
        }  
    });  

    itemListMenu.setData(detailsMenuItem, editMenuItem, deleteMenuItem); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:09:35.273

我们可以看看菜单本身的代码，你设置了它的宽度吗？

我试过你的代码

```
static void testMenu(){
     Menu itemListMenu = new Menu();  
        itemListMenu.setCellHeight(22); 
        MenuItem detailsMenuItem = new MenuItem("Show Details");  
        detailsMenuItem.addClickHandler(new com.smartgwt.client.widgets.menu.events.ClickHandler() {  
            public void onClick(MenuItemClickEvent event) {  

            }  
        });  

        MenuItem editMenuItem = new MenuItem("Edit Item");  
        editMenuItem.addClickHandler(new com.smartgwt.client.widgets.menu.events.ClickHandler() {  
            public void onClick(MenuItemClickEvent event) {  

            }  
        });  

        MenuItem deleteMenuItem = new MenuItem("Delete Item");  
        deleteMenuItem.addClickHandler(new com.smartgwt.client.widgets.menu.events.ClickHandler() {  
            public void onClick(MenuItemClickEvent event) {  

            }  
        });  

        itemListMenu.setData(detailsMenuItem, editMenuItem, deleteMenuItem); 
        RootLayoutPanel.get().add(itemListMenu);
} 
```

一切都很好，不做任何事情的宽度对应于最长项目的长度。那么您将菜单添加到哪个容器中？

# c# - ReaderWriterLockSlim vs 双锁检查模式

> ID：14215502
> 
> 赞同：3
> 
> 时间：2013-01-08T12:59:11.167
> 
> 标签：c#, .net, multithreading, locking, readerwriterlockslim

**编辑：**从我已经得到的答案中，我了解到我提出的第一个解决方案，并不是真正的“不阻塞读取”，因为只有一个线程可以进入可升级锁并且在读取释放之前不能获取写入锁......

所以我的问题是，如果不存在，如何以正确的方式使第一个解决方案成为“非阻塞读取”的创建？

* * *

我试图了解非阻塞多线程读取的两种解决方案。以下两种解决方案有什么区别（也许我仍然不明白一些事情，但我正在尝试）：

```
/// <summary>
/// ReaderWriterLockSlim pattern
/// </summary>
public class ReadWriteLockCheck
{
    Dictionary<string, object> _dict = new Dictionary<string, object>();

    private ReaderWriterLockSlim _rwLock = new ReaderWriterLockSlim(LockRecursionPolicy.NoRecursion);

    public void CreateByKey(string key)
    {
        _rwLock.EnterReadLock();
        try
        {
            if (!_dict.ContainsKey(key)) //Non blocking read - Check if exists
            {
                _rwLock.EnterWriteLock(); //Lock
                try
                {
                    _dict.Add(key, new object());
                }
                finally
                {
                    _rwLock.ExitWriteLock();
                }
            }
        }
        finally
        {
            _rwLock.ExitReadLock();
        }
    }

    public bool GetByKey(string key)
    {
        _rwLock.EnterWriteLock();
        try
        {
            if (_dict.ContainsKey(key)) //Non blocking read
            {
                return true;
            }

            return false;
        }
        finally
        {
            _rwLock.ExitReadLock();
        }
    }
}

/// <summary>
/// Double check lock pattern
/// </summary>
public class MonitorLock
{
    Dictionary<string, object> _dict = new Dictionary<string, object>();

    private object _syncObj = new Object();

    public void CreateByKey(string key)
    {
        if (!_dict.ContainsKey(key)) //Non blocking read - Check if exists
        {
            Monitor.Enter(_syncObj); //Lock
            try
            {
                if (!_dict.ContainsKey(key)) //Check if between first check and lock someone already added
                {
                    _dict.Add(key, new object());
                }
            }
            finally
            {
                Monitor.Exit(_syncObj);
            }
        }
    }

    public bool GetByKey(string key)
    {
        if (_dict.ContainsKey(key)) //Non blocking read
        {
            return true;
        }

        return false;
    }
} 
```

在我看来，这两种解决方案都可以进行非阻塞读取，并且仅在写入时阻塞……如果是这样，有什么好处`ReaderWriterLockSlim`？正如我在 google 中发现的那样，`Monitor`它比`ReaderWriterLockSlim`. 当然，我知道我在阅读时可能会得到不正确的字典状态，但这对我来说没关系。
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T13:05:00.933

[来自 MSDN](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.enterupgradeablereadlock%28v=vs.100%29.aspx)：

> 在任何给定时间只有一个线程可以进入可升级模式

基本上，你没有比仅仅使用一个完整的锁做得更好——除了`lock`实际上会更快。

奇怪的是，这里的一种好方法是`Hashtable`；特别是因为值是`object`，并且键是引用类型（没有额外的装箱）。`Hashtable`不寻常的是，*读取*是完全线程安全的；你只需要防范多个**writer**。

例如：

```
readonly Hashtable lookup = new Hashtable();

...

object val = lookup[key]; // no need to synchronize when reading

...

lock(lookup)
{
    lookup[key] = newVal; // synchronize when writing
} 
```

# maven - 如何从 Maven 构建手动更新 Maven 存储库？

> ID：14215507
> 
> 赞同：2
> 
> 时间：2013-01-08T12:59:26.673
> 
> 标签：maven, maven-2

我们目前没有自己的存储库。因此，当我们使用 maven 构建时，它会在当前用户的主目录中创建 .m2 存储库。

现在有两个第三方 jar 在 Maven Central 中找不到。假设其中之一是**hasp-srm-api.jar**。今天的流程是这样的：

**一种。**依赖于**hasp-srm-api.jar**的项目的 pom.xml包含以下几行：

```
    <依赖>
      <groupId>com.safenet</groupId>
      <artifactId>搭扣</artifactId>
      <版本>1</版本>
    </依赖>

```

**湾。**在进行第一次构建之前，我们执行以下命令：

```
    mvn install:install-file -Dfile=hasp-srm-api.jar -DgroupId=com.safenet -DartifactId=hasp -Dversion=1 -Dpackaging=jar

```

我的问题是 - 是否可以自动化这一步？我希望能够告诉 maven 检查搭扣工件是否存在，如果不存在 - 使用上述命令行手动安装它。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:01:56.993

不。不可能让 Maven 以您建议的方式自动将工件部署到存储库中。这适用于本地和远程存储库。如果工件存在于某个存储库中，您可以将该存储库添加到构建的已知远程存储库列表中，但除此之外，您必须自己添加它。

您可以将其添加到您的本地 .m2 存储库，但这只会对那个单独的环境有益。其他开发人员将不得不重复该过程。这是运行自己的存储库服务器（如 Nexus）的主要吸引力之一；您可以将工件添加到该存储库，然后您组织中的每个人都可以永久使用它。仍然没有办法自动化工件的部署，但它很容易做到并且是永久性的。

请注意，设置存储库管理器非常容易。强烈推荐。它使整个 Maven 事情变得更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:04:02.967

此类问题的最佳解决方案是使用[存储库管理器](http://maven.apache.org/repository-management.html)，这导致仅将此类依赖项安装一次到存储库管理器中，整个公司都可以使用它作为通常的依赖项。就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-04T11:28:44.980

您拥有的其他选择是编写自己的 Maven 插件。可能是下面的链接将是您开始的正确地方

[MOJO 常见问题](http://mojo.codehaus.org/faq.html)

# zope - Zope 2: What's the difference between "template" and "view"?

> ID：14215510
> 
> 赞同：1
> 
> 时间：2013-01-08T12:59:34.820
> 
> 标签：zope

I know, it's a naive question :-)

Originally poped up into my mind over [Zope 2: How to properly “browser:page” to make a page available everywhere?](https://stackoverflow.com/questions/14214808/zope-2-how-to-properly-browserpage-to-make-a-page-available-everywhere/14215186#14215186)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:01:21.563

Views are callable adapters that provide output based on the context and the request.

Templates are callables that render a piece of text based on a template. They are often used in views.

Note that views can return text without using a template:

```
from zope.publisher.browser import BrowserView

class MyView(BrowserView):
    def __call__(self):
        return "Hello world, I am located at {0}".format(self.context.absolute_url()) 
```

Views can also be used by other Zope code, without themselves being published. Zope code uses a lot of views internally.

# c# - 在客户端和服务器 wcf 服务上使用自定义数据类型

> ID：14215515
> 
> 赞同：4
> 
> 时间：2013-01-08T12:59:47.123
> 
> 标签：c#, wcf

我有一个自定义数据类型，我放入了类库 SharedTypes

```
namespace SharedTypes
{
    public class District
    {
        public long Id { get; set; }
        public string Name { get; set; }
    }
} 
```

然后我有一个带有此服务的 WCF 服务器

```
using System.ServiceModel;
using SharedTypes;

namespace WCF.WCFInterfaces
{
    [ServiceContract]
    public interface IWcfService
    {
        [OperationContract]
        District GetDistrict(long id);

        [OperationContract]
        void CreateDistrict(District district);

        [OperationContract]
        List<District> GetDistricts();
     }
} 
```

在客户端我有一个接口（所以我注入了实现）

```
using SharedTypes;

namespace WcfInterfaces
{
    public interface IDistrictManager
    {
        void CreateDistrict(District district);
        District GetDistrict(long id);
        List<District> GetDistricts();
    }
} 
```

我终于有了客户应该使用的实现

```
public class DistrictManager : IDistrictManager
{
    private readonly WcfServiceClient _salesService;
    public DistrictManager()
    {
        _salesService = new WcfServiceClient();
    }

    public void CreateDistrict(District district)
    {
        _salesService.CreateDistrictAsync(district);
    }

    public District GetDistrict(long id)
    {
        return _salesService.GetDistrict(id);
    }

    public List<District> GetDistricts()
    {
        var list = _salesService.GetDistricts();
        return list.ToList();
    }
} 
```

但是这里出现了问题，这个实现期望使用它从服务引用中获得的 District 版本

```
WcfClientLibrary.SalesService.District 
```

代替

```
SharedTypes.District 
```

它们是相同的，但 VS 不知道

因此，我收到接口未正确实现的错误，因为我有 2 种不同类型的 District 类。

如何获得服务参考以使用 SharedTypes.District 代替？还是我实现它的方式很遥远？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:03:16.607

右键单击**客户端项目**中的**服务引用**并选中“Reuse Types in Referenced Assemblies”。

 **确保您已添加`SharedTypes.District`到您的客户服务参考项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:03:24.567

在客户端添加 WCF 引用时。单击高级选项。您可以指定一个设置来告诉它重用来自指定程序集的类型。您将能够指定程序集。**

# actionscript-3 - 如何在 Flash 中构造代码/帧

> ID：14215516
> 
> 赞同：1
> 
> 时间：2013-01-08T12:59:46.240
> 
> 标签：actionscript-3, flash, flash-cs5, flash-cs6

我正在开发一个 Flash 游戏，其中的场景显示了几个动画阶段；动画由用户可点击的按钮（1 到 4）和一个进度条控制，该进度条会随着计时器的增加而增加。

现在我将动画的每个阶段放在不同的帧上，但我不确定如何在帧之间共享动作脚本和状态（例如进度变量的值）。

我是否应该将这些帧合并为一个并让每个部分（按钮、进度条和动画）都是三个独立的影片剪辑，由该帧的动作脚本控制？还是有另一种方法可以正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:56:59.293

您所说的可能是这种情况下最好的解决方案：将所有内容放在一个框架上并使用 ActionScript 进行控制。按钮可以是它们自己`MovieClip`的 s（或`Button`s），也可以是进度条和动画。然后，您可以将动画的每个阶段放在 中的不同帧上`MovieClip`，并控制使用时出现的帧`gotoAndStop()`。

通常，如果 SWF 是纯粹的动画，不涉及或涉及最少的 ActionScript，我只使用基本帧（即 SWF 根部的那些）作为动画帧。在任何其他情况下（游戏、应用程序等），最好在自己的`MovieClip`s 中包含动画，以便您可以轻松控制和操作它们。

# mysql - 将变量传递给命令行脚本

> ID：14215517
> 
> 赞同：1
> 
> 时间：2013-01-08T12:59:49.240
> 
> 标签：mysql, command-line, coldfusion

我有以下脚本，旨在使用传递给它的值在远程服务器上创建一个 mysql 数据库：

```
set arg1=\\192.168.0.254\e$\Program Files\MySQL\MySQL Server 5.5\bin
set arg2=192.168.0.254
set arg3=%1

echo %arg1%
echo %arg2%
echo %arg3%

pushd %arg1%
mysql -uignite -h %arg2% -p***** -e "CREATE DATABASE %arg3%"

pause 
```

如果我在 arg3 中放置一个值，即 MYDatabaseName，则脚本会从使用以下冷融合代码调用脚本的网页运行并正常运行：

```
<cfexecute name="E:\Domains\ignite.flinthosts.co.uk\wwwroot\domains\processes\database\MySQL\AddDatabase.cmd"
arguments="'MyDatabaseName'">
</cfexecute> 
```

但是，如果我将 %1 保留在那里 - 即变量的持有者 - 那么它似乎不会拿起它并创建数据库。

我是否使用正确的语法将变量传递到文件中？

# c# - 我可以在 ScheduledTaskAgent 中存储要归档的内容吗？

> ID：14215520
> 
> 赞同：0
> 
> 时间：2013-01-08T13:00:02.640
> 
> 标签：c#, windows-phone-7, windows-phone-8

我想每隔几天运行一次，所以每次运行时我都需要 ScheduledTaskAgent 来检查日期，如果差异大于 3 天，它应该做一些事情。

但是如何将日期存储到 ScheduledTaskAgent 中的文件中，然后再读取和更新它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:03:37.387

是的，这是使用代理时[不受支持的 API 列表。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202962%28v=vs.105%29.aspx)

# spring-security - 如何在 java 类而不是 xml 配置中管理 spring 安全 url 模式

> ID：14215527
> 
> 赞同：2
> 
> 时间：2013-01-08T13:00:28.697
> 
> 标签：spring-security

我是spring security的初学者，对此我有疑问（（我使用了spring security 3.1））。我有一个项目，我必须从 Db 而不是 springSecurity 应用程序上下文中读取所有 spring security url 模式。

我该怎么做？我的观点是如何在我的 java 类中管理对特殊 url 的访问，而不是在 springSecurity 应用程序上下文中使用下面的配置。

```
<intercept-url pattern="/customer/showAll" access="hasAnyRole('OPERATOR,ADMIN')"/> 
```

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:02:08.197

您可以提供自己的**FilterInvocationSecurityMetadataSource**实现。在**Collection getAttributes(Object object)**方法中，您可以加载模式并从 DB 访问参数（[请参阅默认实现](https://github.com/SpringSource/spring-security/blob/master/web/src/main/java/org/springframework/security/web/access/intercept/DefaultFilterInvocationSecurityMetadataSource.java)）。每个模式都必须转换为 RequestMatcher 对象。访问属性值必须转换为 ConfigAttribute 对象的集合。作为输入对象，您将收到传入请求。您必须从 DB 填充**requestMap 。**[请参阅此处](https://stackoverflow.com/questions/6893061/how-to-dynamically-decide-intercept-url-access-attribute-value-in-spring-secur#6898824)如何配置 Spring Security 以使用您自己的 FilterInvocationSecurityMetadataSource 实现而不是默认的 ExpressionBasedFilterInvocationSecurityMetadataSource。

# html - 具有 3D 效果边框的画布矩形

> ID：14215530
> 
> 赞同：0
> 
> 时间：2013-01-08T13:00:35.997
> 
> 标签：html, canvas

![画布_边框](../Images/74b6c86cab0a62a81074dee6bd181ce9.png)

（参考图片）图片的第一部分显示了带有凸起边框的 div（使用 -webkit-box-shadow,box-shadow 属性）。我想为使用 HTML5 画布元素绘制的矩形提供相同的效果。有什么办法可以实现这个吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:03:20.020

这是可能的，尝试这样的事情：

```
context.rect(50, 50, 100, 100);
context.fillStyle = 'white';
context.shadowColor = 'black';
context.shadowBlur = 25;
context.shadowOffsetX = 10;
context.shadowOffsetY = 10;
context.fill(); 
```

**[工作示例](http://jsbin.com/eqakot/2/edit)**

# jquery - 我不能让我的 jquery 代码工作吗？

> ID：14215543
> 
> 赞同：1
> 
> 时间：2013-01-08T13:01:14.900
> 
> 标签：jquery

> **可能重复：**
> [JQuery 代码不工作](https://stackoverflow.com/questions/1660447/jquery-code-not-working)

我不能让我的 jquery 工作......这就是我想要做的：

```
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <link rel="stylesheet" href="try_1.css">
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/click.js"></script>
  </head>
  <body>
    <input type="button" value="Hide" id="hide_message"/>
    <p id="message">This is a message</p>
  </body>
</html> 
```

点击.js：

```
$('#hide_message').click(function() {
    $('#message').hide();
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T13:02:35.733

```
$(function() {
    $('#hide_message').click(function() {
        $('#message').hide();
    });
}); 
```

`$( function() { });`在您的代码或等效代码之前使用`$(document).ready(function() { });`为了进一步阅读，为什么要使用它？见：[教程](http://www.learningjquery.com/2006/09/introducing-document-ready)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T13:03:53.600

您的代码将在元素存在之前执行，因此无法将事件处理程序绑定到它。将代码包装在`$(document).ready()`处理程序中，以便在 DOM 准备好（并且元素存在）后执行。

```
$(document).ready(function() {
    $('#hide_message').click(function() {
        $('#message').hide();
    });
}); 
```

这在[文档](http://docs.jquery.com/How_jQuery_Works#Launching_Code_on_Document_Ready)中有所介绍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:46:30.497

这将起作用：

```
$(document).ready(function() {
    $('#hide_message').click(function() {
        $('#message').hide();
    });
}); 
```

# c# - 如何循环收集并保存到数据库

> ID：14215545
> 
> 赞同：-5
> 
> 时间：2013-01-08T13:01:31.010
> 
> 标签：c#

通过循环遍历我拥有的两个集合，我在执行数据库时遇到了一些问题。请注意，这只是一个示例。

第一个系列包括：性别 - 男性、女性 第二个系列包括：名字 - john、james、mike、stacy、paula

例如，我使用了 for 循环：

```
for (int i = 0; i < genders.count; i++)
{
    for (int j = 0, j < names.count; j++)
    {
        //call to stored procedure there
        //parameters
        //execute
    }
} 
```

谁能建议如何以不同的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:06:44.143

我看不出有什么问题，但如果你问你的方法是否可以改进，是的。

我会简单地使用具有这些属性（包括性别）的类。

```
class Person
{
    public bool IsFemale { get; set; }
    public string Name { get; set; }
} 
```

现在您可以创建一个**集合**，例如一个`List<Person>`并循环它。

```
var persons = new List<Person>() { 
    new Person{IsFemale=false, Name="john"},new Person{IsFemale=false, Name="james"},
    new Person{IsFemale=true, Name="stacy"},new Person{IsFemale=true, Name="paula"}
};

foreach(Person p in persons)
{
    //call to stored procedure there
    //parameters
    //execute
} 
```

**编辑**：如果您对 ADO.NET 部分有疑问，这里有一个例子：

```
using (var con = new SqlConnection(connectionString))
using (var cmd = new SqlCommand("StoredProcedureName", con))
{
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add("@Gender", typeof(string));
    cmd.Parameters.Add("@Name", typeof(string));
    con.Open();
    foreach (var person in persons)
    {
        cmd.Parameters["@Gender"].Value = person.IsFemale ? "female" : "male";
        cmd.Parameters["@Name"].Value = person.Name;
        cmd.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:08:21.073

首先，为什么不创建自己的类？

```
class Person
{
    private String name;
    private String sex;

    public Person(String name, String sex)
    {
        this.name = name;
        this.sex = sex;
    }

    public String Name
    {
        get { return name; }
        set { name = value; }
    }

    public String Sex
    {
        get { return sex; }
        set { sex = value; }
    }
} 
```

然后创建人员列表

```
List<Person> people = new List<Person>();
people.add(new Person("Ashley", "Male")); 
```

然后是一个foreach循环......

```
foreach(Person p in people)
{
Console.WriteLine(p.Name + " " + p.Sex);
} 
```

你的问题很模糊，但这就是我会做的......

# php - 不同 Web 应用程序共享的 Sqlite 2 和 MySQL 数据库

> ID：14215546
> 
> 赞同：2
> 
> 时间：2013-01-08T13:01:35.453
> 
> 标签：php, sqlite

嗨，我想知道不同的 PHP Web 应用程序，包括 Yii 一个共享 sqlite 2 或 MySQL 数据库....如果他们同时进行修改，sqlite 2 和 MySQL 是否会临时锁定数据库，以便 Yii 和普通 PHP 应用程序保持数据库工作正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:03:59.823

是的，他们有。就像两个不同的用户浏览 Web 应用程序一样，每个用户都会锁定数据库。
您可以将两个不同的应用程序视为同一个应用程序上的两个不同页面。在这两种情况下，您都在“无状态”工作，因此 RDBMS 在某些微秒内适用于其中一个应用程序，而在其他微秒内，它适用于另一个应用程序，或两者都适用（排队直到解锁）
在 Sqlite 的情况下，没有引擎，但无论如何，图书馆解决（并保证）共享和查找

# c# - MVC 对象更改跟踪

> ID：14215547
> 
> 赞同：0
> 
> 时间：2013-01-08T13:01:36.650
> 
> 标签：c#, .net, asp.net-mvc, entity-framework

我目前遇到了一个问题，我需要查看编辑字段上哪些字段已更改以用于审计目的，其中我有代码，但我认为我的问题出在我的 MVC 视图中。

我有（测试代码）：

```
[HttpPost]
public ActionResult Adjustment(GroupPolicy groupPolicy)
{
          if (ModelState.IsValid)
          {
              _service.SaveGroupPolicy(groupPolicy);
              return RedirectToAction("Index");
          }
          return View(groupPolicy);
} 
```

这很好，政策节省了。但是，请考虑到这一点：

GroupPolicy 有 3 个字段（实际上可能有 60 个）：

```
bool IsPolicy
string Name
string Description 
```

名称和描述在表格上，所以没关系。IsPolicy 未在表单上使用，因此当在 Adjustment 方法中发布回 GroupPolicy 对象时**默认为 false 。**

我真的不能`IsPolicy`在表单上添加一个隐藏字段，因为在我的实际解决方案中，这对于 60 多个字段来说并不优雅，HTML 会到处都是。

现在 bool 默认为 false，它完全消除了我知道该字段是否已更改的机会。我真正想要的是一种保留这些数据的方法，同时将新信息保留在编辑表单上。

这可能吗，我是否遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:20:06.733

首先，`GroupPolicy`应该是*视图*模型而不是实体 - 因此它应该为视图量身定制，例如

```
public class GroupPolicyViewModel
{
    [HiddenInput]
    public Guid Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    ...
} 
```

然后在您的操作中，您无需担心分配已更改的值，您只需将视图模型直接映射到例如

```
public ActionList Adjustment(GroupPolicyViewModel viewModel)
{
    if (ModelState.IsValid)
    {
        // pull actual entity from service
        var groupPolicy = _service.GetGroupPolicy(viewModel.Id);
        // update entity from view model
        groupPolicy.Name = viewModel.Name;
        groupPolicy.Description = viewModel.Description;
        ...
    }
} 
```

这使您的视图和业务逻辑保持清晰的分离。此外，它还允许您为客户端验证添加注释，而不会影响您的*真实*模型。

> GroupPolicy 有 3 个字段（实际上可能有 60 个）

我建议为此使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)，例如

```
// call this once only e.g. Application_Start in the Global.asax
Mapper.CreateMap<GroupPolicyViewModel, GroupPolicy>();
...
// in your Adjustment action
var groupPolicy = _service.GetGroupPolicy(viewModel.Id);
groupPolicy = Mapper.Map<GroupPolicyViewModel, GroupPolicy>(viewModel, groupPolicy);
_service.SaveGroupPolicy(groupPolicy); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:19:44.223

如果`IsPolicy`不在表单上，​​那么它甚至不应该是您模型的一部分 - 这将阻止将此字段发布到您的模型中，因此 IsPolicy 甚至不需要您的检查。

与其将其作为参数接受到操作中，不如创建一个仅包含表单上字段`GroupPolicy`的缩减对象。`GroupPolicyInputModel`

然后使用您的通用审核仅比较所有已发布的字段，就像任何其他形式一样。

# image - AVFrame 到 RGB - 解码伪影

> ID：14215554
> 
> 赞同：1
> 
> 时间：2013-01-08T13:01:50.623
> 
> 标签：image, ffmpeg, h.264, libavcodec, libavformat

我想以编程方式将 mp4 视频文件（使用 h264 编解码器）转换为单个 RGB 图像。使用命令行看起来像：

```
ffmpeg -i test1080.mp4 -r 30 image-%3d.jpg 
```

使用此命令会生成一组漂亮的图片。但是当我尝试以编程方式做同样的事情时，一些图像（可能是 B 和 P 帧）看起来很奇怪（例如，有一些带有差异信息的扭曲区域等）。读取和转换代码如下：

```
AVFrame *frame = avcodec_alloc_frame();
AVFrame *frameRGB = avcodec_alloc_frame();

AVPacket packet;

int buffer_size=avpicture_get_size(PIX_FMT_RGB24, m_codecCtx->width,
    m_codecCtx->height);
uint8_t *buffer = new uint8_t[buffer_size];

avpicture_fill((AVPicture *)frameRGB, buffer, PIX_FMT_RGB24,
    m_codecCtx->width, m_codecCtx->height);

while (true)
{
    // Read one packet into `packet`
    if (av_read_frame(m_formatCtx, &packet) < 0) {
        break;  // End of stream. Done decoding.
    }

    if (avcodec_decode_video(m_codecCtx, frame, &buffer_size, packet.data, packet.size) < 1) {
        break;  // Error in decoding
    }

    if (!buffer_size) {
        break;
    }

    // Convert
    img_convert((AVPicture *)frameRGB, PIX_FMT_RGB24, (AVPicture*)frame,
        m_codecCtx->pix_fmt, m_codecCtx->width, m_codecCtx->height);

    // RGB data is now available in frameRGB for further processing
} 
```

如何转换视频流，以便每个最终图像显示所有图像数据，以便所有帧中包含来自 B 和 P 帧的信息？

**[编辑：]**显示工件的示例图像在这里：http: [//imageshack.us/photo/my-images/201/sampleq.jpg/](http://imageshack.us/photo/my-images/201/sampleq.jpg/)

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:38:30.390

如果 的第三个参数`avcodec_decode_video`返回空值，则不代表错误。这意味着框架还没有准备好。您需要继续读取帧，直到该值变为非零。

```
if (!buffer_size) {
    continue;
} 
```

**UPD**

尝试添加检查并仅显示关键帧，这将有助于隔离问题。

```
while (true)
{
  // Read one packet into `packet`
  if (av_read_frame(m_formatCtx, &packet) < 0) {
    break;  // End of stream. Done decoding.
  }

  if (avcodec_decode_video(m_codecCtx, frame, &buffer_size,
      packet.data, packet.size) < 1)
  {
    break;  // Error in decoding
  }

  if (!buffer_size) {
    continue; // <-- It's important!
  }

  // check for key frame
  if (packet.flags & AV_PKT_FLAG_KEY)
  {
    // Convert
    img_convert((AVPicture *)frameRGB, PIX_FMT_RGB24, (AVPicture*)frame,
      m_codecCtx->pix_fmt, m_codecCtx->width, m_codecCtx->height);
  } 
} 
```

# javascript - 用户可以操纵 javascript 来覆盖 S3 crossdomain.xml 吗？

> ID：14215557
> 
> 赞同：2
> 
> 时间：2013-01-08T13:01:55.953
> 
> 标签：javascript, file-upload, amazon-s3

我允许用户直接上传到s3，不需要经过服务器；一切正常；我唯一担心的是安全。

在我的 javascript 代码中，我检查文件扩展名。但是我知道在 javascript 代码中，用户可以操纵脚本——在我的情况下允许上传 xml 文件——（因为客户端上传），因此他们不能替换我存储桶中的 crossdomain.xml 并因此能够控制我的桶？

注意：我正在使用存储桶所有者访问密钥和密钥。

**更新：**

任何可能的方法来克服这个问题......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:49:48.887

如果您不反对运行额外的资源，您可以通过运行[Token Vending Machine](http://aws.amazon.com/articles/4611615499399490)来完成此操作。

这是要点：

*   您的令牌自动售货机 (TVM) 以降低权限的用户身份运行。
*   您的客户端代码仍会直接上传到 S3，但它需要联系您的 TVM 以获取临时的、用户特定的令牌，以便在用户登录时访问您的存储桶
*   TVM 调用[Amazon Security Token Service](http://docs.amazonwebservices.com/STS/latest/APIReference/Welcome.html?r=7687)为您的用户创建临时凭证以访问 S3
*   S3 API 在发出上传/下载请求时使用临时凭证
*   您可以在存储桶上定义[策略以限制每个用户可以访问的存储桶区域](http://docs.amazonwebservices.com/IAM/latest/UserGuide/PoliciesOverview.html?r=3093)

[此处](http://aws.amazon.com/code/4598681430241367)详细介绍了使用每用户访问创建类似“Dropbox”的服务的简单示例。

# php - hotmail 使用 API 通过 curl 获取联系人

> ID：14215563
> 
> 赞同：0
> 
> 时间：2013-01-08T13:02:26.833
> 
> 标签：php, curl, contacts, hotmail

```
function tratar_hotmail(){
        $client_id = '0xxxxxxxxxxxxxxxx2';
        $client_secret = 'Wyyyyyyyyyyyyyyyyyp';
        $redirect_uri = 'http://example.com/';

        $auth_code = $_GET["code"];

        $fields=array(
            'code'=>  urlencode($auth_code),
            'client_id'=>  urlencode($client_id),
            'client_secret'=>  urlencode($client_secret),
            'redirect_uri'=>  urlencode($redirect_uri),
            'grant_type'=>  urlencode('authorization_code')
        );
        $post = '';
        foreach($fields as $key=>$value) { $post .= $key.'='.$value.'&'; }
        $post = rtrim($post,'&');

        $curl = curl_init();
        curl_setopt($curl,CURLOPT_URL,'https://login.live.com/oauth20_token.srf');
        curl_setopt($curl,CURLOPT_POST,5);
        curl_setopt($curl,CURLOPT_POSTFIELDS,$post);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER,TRUE);
        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER,0);
        $result = curl_exec($curl);
        curl_close($curl);

        $response =  json_decode($result);
        $accesstoken = $response->access_token;

        $url = 'https://apis.live.net/v5.0/me/contacts?access_token='.$accesstoken.'';
        $xmlresponse =  curl_file_get_contents($url);
        echo $xmlresponse;

        $xml = json_decode($xmlresponse, true);
        foreach($xml['data'] as $emails)
        {
                echo $emails['name'];
        }       
} 
```

输出：

> { "error": { "code": "request_token_invalid", "message": "访问令牌无效。" } }

如何获取 request_access_token？

-编辑-

忘记卷曲功能

```
function curl_file_get_contents($url)
{
 $curl = curl_init();
 $userAgent = 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.1.4322)';

 curl_setopt($curl,CURLOPT_URL,$url);   //The URL to fetch. This can also be set when initializing a session with curl_init().
 curl_setopt($curl,CURLOPT_RETURNTRANSFER,TRUE);    //TRUE to return the transfer as a string of the return value of curl_exec() instead of outputting it out directly.
 curl_setopt($curl,CURLOPT_CONNECTTIMEOUT,5);   //The number of seconds to wait while trying to connect.    

 curl_setopt($curl, CURLOPT_USERAGENT, $userAgent); //The contents of the "User-Agent: " header to be used in a HTTP request.
 curl_setopt($curl, CURLOPT_FOLLOWLOCATION, TRUE);  //To follow any "Location: " header that the server sends as part of the HTTP header.
 curl_setopt($curl, CURLOPT_AUTOREFERER, TRUE); //To automatically set the Referer: field in requests where it follows a Location: redirect.
 curl_setopt($curl, CURLOPT_TIMEOUT, 10);   //The maximum number of seconds to allow cURL functions to execute.
 curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0); //To stop cURL from verifying the peer's certificate.
 curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);

 $contents = curl_exec($curl);
 curl_close($curl);
 return $contents;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:43:23.010

这是我刚刚为与 API 对话而整理的一个类：

```
<?php

  // Note: the test script below assumes this is in a
  // file called class.liverestapiconsumer.php

  class LiveRESTAPIConsumer {

    protected $accessTokenURI = 'https://login.live.com/oauth20_token.srf';
    protected $restAPIBaseURI = 'https://apis.live.net/v5.0';

    protected $appId;
    protected $appSecret;

    protected $accessToken;
    protected $accessTokenExpires;

    public function __construct($appId = NULL, $appSecret = NULL, $accessToken = NULL, $accessTokenExpires = NULL) {
      $this->setAppId($appId);
      $this->setAppSecret($appSecret);
      $this->setAccessToken($accessToken);
      $this->setAccessTokenExpires($accessTokenExpires);
    }

    public function getAppId() {
      return $this->appId;
    }
    public function setAppId($appId) {
      $this->appId = $appId;
    }

    public function getAppSecret() {
      return $this->appSecret;
    }
    public function setAppSecret($appSecret) {
      $this->appSecret = $appSecret;
    }

    public function getAccessToken() {
      return $this->accessToken;
    }
    public function setAccessToken($accessToken) {
      $this->accessToken = $accessToken;
    }

    public function getAccessTokenExpires() {
      return $this->accessTokenExpires;
    }
    public function setAccessTokenExpires($accessTokenExpires) {
      $this->accessTokenExpires = $accessTokenExpires;
    }

    public function accessTokenIsExpired() {
      return $this->accessTokenExpires <= time();
    }
    public function fetchAccessToken($code, $redirectURI) {
      if (!isset($code, $redirectURI, $this->appId, $this->appSecret)) {
        throw new \Exception('Cannot fetch access token without an authorization code, redirect URI, application id and application secret');
      }

      $postFields = array(
        'client_id' => $this->appId,
        'client_secret' => $this->appSecret,
        'code' => $code,
        'redirect_uri' => $redirectURI,
        'grant_type' => 'authorization_code'
      );
      $bodyData = http_build_query($postFields);

      $headers = array(
        'Content-Type: application/x-www-form-urlencoded'
      );

      $ch = curl_init($this->accessTokenURI);
      curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
      curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
      curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');
      curl_setopt($ch, CURLOPT_POSTFIELDS, $bodyData);
      curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

      if (!$response = curl_exec($ch)) {
        throw new \Exception('cURL request failed');
      } else if (curl_getinfo($ch, CURLINFO_HTTP_CODE) != 200) {
        throw new \Exception('Live API returned an error response code: '.curl_getinfo($ch, CURLINFO_HTTP_CODE));
      } else if (!$responseObj = json_decode($response)) {
        throw new \Exception('Cannot decode API response as JSON; data: '.$response);
      } else if (!isset($responseObj->access_token)) {
        throw new \Exception('Live API did not return an access token; error: '.$responseObj->error_description);
      }

      $this->setAccessToken($responseObj->access_token);
      $this->setAccessTokenExpires(time() + $responseObj->expires_in);
    }

    protected function normalizeAPIPath($path) {
      return $path[0] == '/' ? $path : '/'.$path;
    }

    public function apiCall($method, $path, array $params = array(), $data = NULL) {
      if (!isset($this->accessToken)) {
        throw new \Exception('Cannot make API requests without an access token');
      } else if ($this->accessTokenIsExpired()) {
        throw new \Exception('The currently defined access token has expired');
      }

      $ch = curl_init();

      $url = $this->restAPIBaseURI.$this->normalizeAPIPath($path);
      if ($params) {
        $url .= '?'.http_build_query($params);
      }
      curl_setopt($ch, CURLOPT_URL, $url);

      $method = trim(strtoupper($method));
      curl_setopt($ch, CURLOPT_CUSTOMREQUEST, $method);

      $headers = array();
      $headers[] = 'Authorization: Bearer '.$this->accessToken;
      if ((array) $data) {
        $bodyData = json_encode($data);
        $headers[] = 'Content-Type: application/json';
        curl_setopt($ch, CURLOPT_POSTFIELDS, $bodyData);
      }
      curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

      curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
      curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);

      if (!$response = curl_exec($ch)) {
        throw new \Exception('cURL request failed');
      } else if (curl_getinfo($ch, CURLINFO_HTTP_CODE) != 200) {
        throw new \Exception('Live API returned an error response code: '.curl_getinfo($ch, CURLINFO_HTTP_CODE));
      } else if (!$responseObj = json_decode($response)) {
        throw new \Exception('Cannot decode API response as JSON; data: '.$response);
      }

      return $responseObj;
    }

  } 
```

...和测试脚本（是的，我完全意识到我的 HTML 技能很糟糕——我写的不多）：

```
<?php

  session_start();

  require 'class.liverestapiconsumer.php';

  // Your details as assigned by Microsoft
  $appId = '<your client id>';
  $appSecret = '<your client secret>';

  // The public (internet) URL of this script
  $localUrl = 'http://example.com/path/to/file.php';

  // Work out whether we have a valid access token or not
  $haveAccessToken = FALSE;
  $accessTokenExpiresIn = 'N/A';
  if (isset($_SESSION['accessToken'])) {
    $now = time();

    $haveAccessToken = $now < $_SESSION['accessTokenExpires'];
    $accessTokenExpiresIn = ($_SESSION['accessTokenExpires'] - $now).' seconds';

    if (!$haveAccessToken || isset($_GET['destroy'])) {
      unset($_SESSION['accessToken'], $_SESSION['accessTokenExpires']);
    }

    if (isset($_GET['destroy'])) {
      header('HTTP/1.1 302 Found');
      header('Location: '.$localUrl);
    }
  }

  function parse_body_data($str) {
    $result = array();
    $items = preg_split('/[\r\n]+/', $str, -1, PREG_SPLIT_NO_EMPTY);
    foreach ($items as $item) {
      $item = explode(':', $item, 2);
      if (count($item) !== 2) {
        return FALSE;
      }
      $result[trim($item[0])] = trim($item[1]);
    }
    return $result;
  }

?>
<html>
  <head>
    <title>Live API Test</title>
    <style>
      div.label {
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <div>Do we have an access token? <b><?php echo $haveAccessToken ? 'Yes <sup>(<a href="?destroy">destroy</a>)</sup>' : 'No'; ?></b> (Expires: <?php echo $accessTokenExpiresIn; ?>)</div>
<?php

  if (isset($_POST['path'])) { // get something from the API

    do { // do-while so we can easily break out of it on error

      $client = new LiveRESTAPIConsumer($appId, $appSecret, $_SESSION['accessToken'], $_SESSION['accessTokenExpires']);

      $path = $_POST['path'];
      $method = $_POST['method'];

      $paramStr = trim($_POST['params']);
      $params = array();
      if (!empty($paramStr)) {
        parse_str($paramStr, $params);
      }

      if (($body = parse_body_data($_POST['body'])) === FALSE) {
        echo "<div>Error: Body data invalid</div>";
        break;
      }

      try {
        $result = $client->apiCall($method, $path, $params, $body);
        // The class returns the response data decoded to an object, so json_encode() it again for display
        echo '
          Result:
          <pre>'.json_encode($result, JSON_PRETTY_PRINT).'</pre>
        ';
      } catch (\Exception $e) {
        echo "<div>Exception: ".$e->getMessage()."</div>";
        break;
      }

    } while(FALSE);

    echo '<div><a href="'.$localUrl.'">Back</a></div>';

  } else if (isset($_GET['code'])) { // handle redirect from live API

    try {
      $client = new LiveRESTAPIConsumer($appId, $appSecret);
      $client->fetchAccessToken($_GET['code'], $localUrl);

      $_SESSION['accessToken'] = $client->getAccessToken();
      $_SESSION['accessTokenExpires'] = $client->getAccessTokenExpires();

      echo '
        <div>Successfully retrieved access token: '.$_SESSION['accessToken'].'</div>
        <div><a href="'.$localUrl.'">Go to form</a></div>
      ';
    } catch (\Exception $e) {
      echo '
        <div>Exception: '.$e->getMessage().'</div>
        <div><a href="'.$localUrl.'">Back</a></div>
      ';
    }

  } else if ($haveAccessToken) { // Output form

    echo '
      <form action="'.$localUrl.'" method="post">
        <div>
          <div class="label">API Path</div>
          <div><input name="path" type="text"></div>
        </div>
        <div>
          <div class="label">Parameters (query string)</div>
          <div><input name="params" type="text"></div>
        </div>
        <div>
          <div class="label">Method</div>
          <div>
            <select name="method">
              <option value="GET">GET</option>
              <option value="POST">POST</option>
              <option value="PUT">PUT</option>
              <option value="DELETE">DELETE</option>
              <option value="MOVE">MOVE</option>
              <option value="COPY">COPY</option>
            </select>
          </div>
        </div>
        <div>
          <div class="label">Body Data (key: value, newline separated)</div>
          <div><textarea name="body" rows="10" cols="40"></textarea></div>
        </div>
        <input type="submit" value="Send Request">
      </form>
      <a href="http://msdn.microsoft.com/en-us/library/live/hh243648" target="_blank">API Reference</a>
    ';

  } else { // Don't have access token yet

    $opts = array(
      'client_id' => $appId,
      'scope' => 'wl.basic',
      'response_type' => 'code',
      'redirect_uri' => $localUrl
    );
    echo '<div><a href="https://login.live.com/oauth20_authorize.srf?'.htmlspecialchars(http_build_query($opts)).'">Get access token</a></div>';

  }

?>
  </body>
</html> 
```

我认为需要解释的所有部分都已注释。如果您有任何问题，请告诉我。

请注意，我没有对这个类进行广泛的测试，并且在涉及更高级的 API 功能时可能缺少它。不过，对于简单的联系人操作，似乎工作得相当好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T09:44:51.670

除了 DaveRandom 的回答和 saveATcode 的评论：您应该在[account live application](https://account.live.com/developers/applications)`$localUrl`提交作为有效重定向 url 的重定向 url 。它们必须完全相同，否则您将收到“为输入参数“redirect_uri”提供的值无效......”消息。我刚刚提到它是因为我有一个错字，我遇到了同样的错误。

# xml - 试图将 CDATA 部分插入 xml

> ID：14215573
> 
> 赞同：0
> 
> 时间：2013-01-08T13:03:09.413
> 
> 标签：xml, xpath, xslt-1.0

嗨，我添加了以下两个 xsl 文本节点以在我的输出 xml 中获取 CDATA

```
<xsl:text disable-output-escaping="yes">&lt;xsl:text disable-output-escaping="yes"&gt;&lt;![CDATA[&lt;/xsl:text&gt;</xsl:text>
<xsl:text disable-output-escaping="yes">&lt;xsl:text disable-output-escaping="yes"&gt;]]&gt;&lt;/xsl:text&gt;</xsl:text> 
```

在我的输出中，我得到以下

```
<xsl:text disable-output-escaping="yes"><![CDATA[</xsl:text>
<xsl:text disable-output-escaping="yes">]]></xsl:text> 
```

我希望我的输出像

```
<xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
<xsl:text disable-output-escaping="yes">]]&gt;</xsl:text> 
```

我对 xslt/xml 有点陌生，所以任何帮助都将不胜感激:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:24:29.650

难道不应该

```
<xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text> <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text> 
```

如果您想要像以前一样的输出

```
<xsl:text disable-output-escaping="yes">&lt;xsl:text disable-output-escaping="yes"&gt;&amp;lt;![CDATA[&lt;/xsl:text&gt;</xsl:text>
<xsl:text disable-output-escaping="yes">&lt;xsl:text disable-output-escaping="yes"&gt;]]&amp;gt;&lt;/xsl:text&gt;</xsl:text> 
```

# javascript - 用于手机和其他设备的 Bootstrap 响应式导航栏

> ID：14215577
> 
> 赞同：0
> 
> 时间：2013-01-08T13:03:23.780
> 
> 标签：javascript, css, mobile, twitter-bootstrap, media-queries

这是我正在开发的网站。

[http://ankursinha.net/TestSite/index.php](http://ankursinha.net/TestSite/index.php)

它堆叠得当，反应灵敏，除了以下之外一切都很好。

当我从我的手机或平板电脑访问这个网站时，导航栏显示 3 行，我点击它并显示所有链接，然后当我点击“登录”时，它会下拉并显示我的教师登录和学生登录，但是当我单击其中之一时，它会切换并关闭下拉内容。

我知道这是由于：

```
data-toggle="collapse" data-target=".nav-collapse" 
```

但是我该如何解决这个问题，让它成为在智能手机和平板电脑上浏览网站的正确链接？所有浏览器都有同样的问题！

我与 Responsinator 核对过，同样的问题也发生在那里。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:23:25.377

**通过在bootstrap-dropdown.js**上添加（替换）这段代码（在脚本末尾）来修复：

```
$(function () {
  $('html').on('click.dropdown.data-api', clearMenus)
  $('body').on('click.dropdown touchstart.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
           .on('click.dropdown.data-api touchstart.dropdown.data-api'  , toggle, Dropdown.prototype.toggle)
           .on('keydown.dropdown.data-api touchstart.dropdown.data-api', toggle + ', [role=menu]' , Dropdown.prototype.keydown)
 }) 
```

基本上阻止下拉菜单上的触摸事件冒泡到下一个元素，这将是 HTML 标记并具有 clearMenus 功能。

# actionscript-3 - 缩放平铺网格

> ID：14215580
> 
> 赞同：0
> 
> 时间：2013-01-08T13:03:26.357
> 
> 标签：actionscript-3, matrix, grid, scaling, tile

我正在开发自己的 tile bliting 引擎，这个引擎使用的是六边形块 - 但我认为它与普通块没有太大区别。

我有巨大的 x,y 瓷砖数组，它们有用于在画布上渲染的 x,y 坐标，我只迭代在当前相机位置的画布上应该可见的那些。

所以我坚持缩放并且无法自己解决这个问题。这是我在画布上绘制瓷砖的代码：

```
public function draw():Void{
    clearCanvas(); //Clear canvas (bitmapData)
            var _m:Matrix;
            iterateTiles(function(_tile:HexTile):Void{ // loop every tile that is visible on screen
                _m = new Matrix();
                _m.translate(_tile.x + cameraPoint.x,_tile.y  + cameraPoint.y);//Get pre calculated tile x,y and add camera x,y
                _m.scale(matrixScale, matrixScale);
                drawToCanvas(_tile,_m);//Send to draw tile on canvas using Matrix
            },true);
        } 
```

这工作得很好而且很快，但唯一的问题是它从左上角缩放瓷砖（就像常规缩放一样）

[缩放前](http://img.lejup.lv/images/lejupyfuzgeq1357649628.png)

* * *

[缩放后](http://img.lejup.lv/images/lejupjiyndic1357649628.png)

> **我的问题是如何将瓷砖转换为始终从中心缩放。因此，如果 tile 10:10 在缩放之前位于屏幕中心，那么它应该在缩放之后保持在那里。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:07:41.063

对不起，我误解了这个问题，但我想我现在明白了：

```
// Scale the distance from the original point to the center of the canvas
var xDistance:Number = ((_tile.x + cameraPoint.x) - xCenter) * matrixScale;
var yDistance:Number = ((_tile.y + cameraPoint.y) - yCenter) * matrixScale;

// Add the distances to the center of the canvas. This is where you want the tile 
// to appear.
var x:Number = xCenter + xDistance;
var y:Number = yCenter + yDistance;

// Because the coordinate is going to be scaled, you need to increase it first.
x = (1 / matrixScale) * x;
y = (1 / matrixScale) * y;

_m.translate(x, y); 
```

我没有测试过这个，我只是在方格纸上画出来的。让我知道它是否有效。

# java - java - 如何使用java代码区分机器中的TCP和UDP数据包？

> ID：14215589
> 
> 赞同：0
> 
> 时间：2013-01-08T13:04:04.420
> 
> 标签：java, sockets, jakarta-ee, tcp, udp

如何在使用 java 将 TCP 和 UDP 数据包发送到 Internet 之前区分它？我需要监听这些数据包并区分它是 TCP 还是 UDP。如何使用 Java 代码实现这一点？

更新：我需要将所有 TCP/IP 和 UDP 数据包重定向到服务器 (Ip)，并且需要跟踪 TCP/IP 和 UDP 数据包的流量并制作日志。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:06:42.697

您无法在 Java 中看到带有 TCP 的单个数据包，但是当您使用 Socket 时，它将是 TCP，如果您使用的是 DatagramSocket，它将是 UDP。即课程不同，因此您不会混淆它们。

如果您想窥探网络适配器以查看正在发送哪种类型的数据包，您可以使用 JPCap。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:08:05.893

如果您正在侦听套接字上的数据包，则需要指定套接字类型。

`java.net.DatagramSocket`对于 UDP 和`java.net.Socket`TCP，您将始终知道您收到的数据包类型。或者您是否正在寻找流量，并以这种方式区分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:29:44.073

如果您可以读取 ip 数据包标头信息，则可以完成。在 ip 数据包头中包含下一个协议号（6 表示 TCP，17 表示 UDP），您应该使用它来区分。

# mako - Mako 模板过滤器排序

> ID：14215591
> 
> 赞同：2
> 
> 时间：2013-01-08T13:04:14.753
> 
> 标签：mako

`$user.text`在 mako 模板中`<br>`输出一些 UGC（

但是，mako 似乎忽略了我应用“h”过滤器的顺序，现在我的`<br>`标签正在被转义而不是呈现。

这是我的添加过滤器：

```
<%
def nl2br(str):
    return str.replace("\n", "<br/>")
%> 
```

这是我的测试字符串：

```
hello,

My name is

James 
```

以下带有过滤器的 mako 标签：

```
${user.text | n,h,nl2br}
${user.text | n,nl2br,h} 
```

`<br>`...生成带有转义标签的相同 html ：

```
hello,
&lt;br/&gt;
&lt;br/&gt;My name is
&lt;br/&gt;
&lt;br/&gt;James 
```

我能够找到允许`<br>`标签通过而不转义的唯一方法是完全删除“h”过滤器，如下所示：

```
${user.text | n,nl2br} 
```

但这违背了对`user.text`场地进行消毒的目的。

如何让“h”过滤器触发然后添加`<br>`标签？

我错过了缓冲区的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T05:46:07.610

您看到的行为是由于`Markup.replace`假设替换字符串不安全：

```
>>> from markupsafe import Markup, escape
>>> e = escape(">x\ny")
>>> e
标记（u'>x\ny'）
>>> e.replace("\n", "<br />")
标记（u'>x<br />y'）

```

解决方案是告诉`markupsafe`是`<br />`受信任的：

```
>>> e.replace("\n", Markup("<br />"))
标记（u'>x<br />y'）

```

所以你的`nl2br`过滤器应该是：

```
from markupsafe import Markup
def nl2br(s):
    return s.replace("\n", Markup("<br />")) 
```

然后`${user.text|h,nl2br}`应该按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:41:13.523

我无法弄清楚上面的订单发生了什么，所以如果你有答案，请在此处发布。相反，我使用了一种解决方法......

由于`h`标签在过滤器顺序中触发得太晚，我创建了自己的版本并通过调用`__str__`.

```
def early_html_escape(string):
    """Run markupsafe escaping and force the result to string."""
    import markupsafe
    return markupsafe.escape(string).__str__() 
```

然后，这允许我首先通过 HTML 转义然后通过`nl2br`过滤器传递用户的文本，而无需将`<br>`标签转换为 HTML 实体。

```
${user.text | early_html_escape,nl2br } 
```

希望对某人有所帮助。

# magento - Magento：使用库存数量计算产品

> ID：14215593
> 
> 赞同：2
> 
> 时间：2013-01-08T13:04:30.773
> 
> 标签：magento

我是magento的新手。我想知道如何使用库存数量计算所有产品。例如，我有

*   第一类
*   产品一 - 库存 10
*   产品二 - 库存 5
*   第 2 类
*   产品三 - 库存 10

所有产品总和的结果应为 25

其实我在用

```
 <?php
$prods =  Mage::getModel('catalog/product')->getCollection();
Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($prods);
$count = number_format(count($prods));
echo $count;
?> 
```

但这会计算没有库存数量的产品。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:27:45.097

未经测试，但这应该可以满足您的需求……

```
$stockItemCollection = Mage::getModel('cataloginventory/stock_item')
    ->getCollection();
$stockTotal = array_sum($stockItemCollection->getColumnValues('qty')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:36:28.487

这也应该有效。报告集合将所有quote_items 连接在一起。但我不确定是否考虑任何订单状态

```
$collection = Mage::getResourceModel('reports/product_sold_collection');
$collection->addOrderedQty();
// EDIT reading the question is all
$sum = 0;
foreach($collection as $product) {
    $sum += $product->getOrderedQty();
}
echo $sum; 
```

# url - URL 中的序号指示符

> ID：14215594
> 
> 赞同：1
> 
> 时间：2013-01-08T13:04:33.223
> 
> 标签：url, seo

假设您有这样的银行办公室地址：

> Praça Almeida Junior , 35 3º Andar Anx I - 圣保罗 - SP

办公室的网址是这样自动生成的：

```
http://www.foo.com/banco-itau-praca-almeida-junior-35-3º-andar-anx-i-sao-paulo-sp 
```

我想知道在 URL 中使用序数指示符是否是不好的做法，特别是如果它对 SEO 有负面影响。

# android - android未知铬错误：-6

> ID：14215598
> 
> 赞同：7
> 
> 时间：2013-01-08T13:04:40.493
> 
> 标签：android, html, cordova

我正在调试我的 phonegap android 应用程序，我`Unknown chromium error: -6`在 logcat 控制台上看到了。

```
Level = D
Tag = chromium 
Text = Unknown chromium error: -6 
```

有人可以解释这个错误的含义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T13:14:31.847

在大多数情况下，此错误是由于文件，

*   这些文件可能没有正确动态加载（没有权限，看错了地方）。
*   `URl`您提供的可能是错误的。

# android - Android初学者应用开发思路

> ID：14215599
> 
> 赞同：-5
> 
> 时间：2013-01-08T13:04:40.447
> 
> 标签：android

我想学习我觉得更有趣的 Android 应用程序。请提供可以用来理解基本操作和创建简单应用程序的简单想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:21:47.703

虽然这不是一个要在这里回答的问题。但仍然作为一个初学者，我想给你我的意见。作为一个初学者，你应该尝试一些简单`Activity`的，`services`（比如音乐播放器，`database`（比如登录表单），`Lists`（比如画廊和网格视图），`receiver`（接收短信和其他一些）项目。

还可以在`Android-sdk's`示例文件夹中查找一些示例项目。很少有项目可以帮助您开始。

# url-rewriting - 是否可以创建条件重写规则

> ID：14215612
> 
> 赞同：0
> 
> 时间：2013-01-08T13:05:22.217
> 
> 标签：url-rewriting, rewrite

这是我的困境。

我继承了对网站的支持，并负责将其移至新主机。

我遇到的一个问题是有一个上传文件夹，其中包含超过 93,000 个文件。我必须根据文件的日期将这些文件移动到“Year\Month”目录结构中，同时保持外部链接有效。

撇开修改数据库信息的复杂性，与单个文件相关的行，以反映新结构，是否可以创建条件重写语句。

我的意思是，如果请求在该目录中查找文件，特别是在根“上传”文件夹中，则会有一个反映新位置的相应重写规则列表。

有这么多规则会导致严重的性能问题吗？

我想我可以进一步简化它，而不是将现有文件放入“年/月”结构中，我可以将它们放入基于文件的第一个字符的字母数字结构中，即以符号开头的文件都将进入“排序\ Symbols 文件夹，以 1 开头的文件将进入 'Sorted\1' 文件夹，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:08:22.807

我假设你正在使用 Apache

是的，可以使用创建条件重写规则`RewriteCond`

有关更多信息，请参见此处：[http ://wiki.apache.org/httpd/RewriteCond](http://wiki.apache.org/httpd/RewriteCond)

如果您对如何设置它是明智的，它不应该对性能产生显着影响。例如，如果您可以提供的第一个重写条件可以消除所有不会被重写的文件，那么它不应该造成很大的性能损失。

例如

```
RewriteCond %{REQUEST_URI} ^/mydir 
```

仅对 uri 以 mydir 开头的请求执行重写

# spring - 如果他们的 XSD 具有唯一粒子属性错误，我如何在 Spring Web 服务中验证 SPML SOAP 请求？

> ID：14215615
> 
> 赞同：1
> 
> 时间：2013-01-08T13:05:25.093
> 
> 标签：spring, xsd, spring-ws, xsd-validation, spml

我想知道是否有人可以在这里指出我正确的方向。

我正在开发一个需要创建 Web 服务功能以符合 SPML v2 规范 (https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=provision) 的项目。它是一个基于 XML 的供应服务规范。

我已经创建了映射到肥皂请求的名称空间和本地部分的端点。我的问题在于尝试使用规范本身提供的 XSD 验证 Spring Web 服务中的有效负载请求。根据我的研究，它是一个“开放内容模型”，任何验证或编译 XSD 的尝试都会导致唯一粒子属性错误。

发生这种情况是因为 CORE XSD 有一个“ExtensibleType”complexType，当其他 complexTypes 从它扩展时会导致错误。从我的研究中，我可以看到错误发生的原因，但我不想修改规范本身提供的 xsd。

例子：

```
<complexType name="ExtensibleType">
    <sequence>
        <any namespace="##other" minOccurs="0" maxOccurs="unbounded" processContents="lax"/>
    </sequence>
    <anyAttribute namespace="##other" processContents="lax"/>
</complexType>

<complexType name="SearchQueryType">
    <complexContent>
        <extension base="spml:ExtensibleType">  
            <sequence>
                <annotation>
                    <documentation>Open content is one or more instances of QueryClauseType (including SelectionType) or LogicalOperator.</documentation>
                </annotation>

                <element name="basePsoID" type="spml:PSOIdentifierType"  minOccurs="0" />
            </sequence>
            <attribute name="targetID" type="string" use="optional"/>
            <attribute name="scope" type="spmlsearch:ScopeType" use="optional"/>
        </extension>
    </complexContent>               
</complexType> 
```

这将在尝试验证 xsds 时导致以下错误：

cos-nonambig: WC[##other:"urn:oasis:names:tc:SPML:2:0"] 和 "urn:oasis:names:tc:SPML: 2:0:search":basePsoID（或来自他们的替换组）违反“唯一粒子属性”。在针对此模式进行验证期间，将为这两个粒子创建歧义。

由于 XSD 本身是无效的，所以我有一段时间想弄清楚如何根据规范本身提供的 XSDS 实际验证有效负载请求。

当服务器尝试启动时，在 spring 上下文文件中添加 PayloadValidatingInterceptor 会导致相同的错误：

```
 <bean id="validatingInterceptor"
            class="org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor">
<property name="schemas">
                <list>
                    <value>/WEB-INF/xsd/spml/pstc_spmlv2_core.xsd</value>
                    <value>/WEB-INF/xsd/spml/pstc_spmlv2_search.xsd</value>
                </list>
            </property>
            <property name="validateRequest" value="true"/>
            <property name="validateResponse" value="false"/>
        </bean> 
```

感谢任何人提前输入，不确定是否有人遇到过此类问题。

达米安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:35:24.437

您需要做的是禁用唯一粒子属性检查。通常，这在 Java 中有效（请参阅此[SO 帖子](https://stackoverflow.com/questions/8951348/disable-unique-partition-attribution-schema-validation-in-java)），您只需要找到一种配置它的方法...最坏的情况可能是根据上面的链接构建您自己的验证器 - 它应该可以工作，因为 Spring 的 XSD 模式是使用 Apache 的实现。

# java - java/android - long 设置为 -1 没有明显的原因

> ID：14215618
> 
> 赞同：1
> 
> 时间：2013-01-08T13:05:34.770
> 
> 标签：java, android, constructor, field, long-integer

我正在调用一个很长的构造函数。然而，长字段设置为 -1：

LogCat：“将包的 ID 设置为 -29270339915449391104。getID() 现在返回 -1”

我不知道为什么。如果你投入很长时间，那么应该没有任何转换问题？我错过了什么？

```
private long ID;

public AFileOrPackView(Context context, long ID) {
    super(context);

    this.ID = ID;
    Log.d("asd", "set the pack's id to " + ID + ". getID() now returns " + this.getId());
}

public Long getID() {
    return this.ID;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:07:09.343

您的代码中有错字。

`this.getId()`

应该

```
this.getID() 
```

此外，如果您不需要，或者返回一个`Long`对象，您应该返回`long`原始类型。改变 ：

```
public Long getID() {
    return this.ID;
} 
```

在

```
public long getID() {
    return this.ID;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:12:05.890

您是否在扩展现有的 Android 视图类型？如果您尝试返回不属于带有 id 的布局文件的视图的 id，或者显式地给定了 id，则继承的 id 值将是 -1 表示 NO_ID。

只是一个想法，很难判断问题中的信息有限是否是这种情况。

# jenkins - 如何更改 Jenkins 构建文件夹？（SVN_REVISION 而不是 BUILD_ID）

> ID：14215621
> 
> 赞同：1
> 
> 时间：2013-01-08T13:05:45.677
> 
> 标签：jenkins

如何更改 Jenkins 使用的构建文件夹？Jenkins 使用 BUILD_ID（时间戳）在 \builds\ 中创建文件夹，因此它们看起来像“2012-12-14_10-17-15”。有没有办法使用 SVN_REVISION 代替？

也许我应该使用指向 jenkins\jobs\job_name\builds\build_id 的 SVN_REVISION 在 C:\Builds\ 上创建一个快捷方式，但我希望有另一种方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:04:23.967

除了修改 Jenkins 内部，您可以在项目末尾添加另一个步骤，将 SVN_REVISION 和 BUILD_ID 信息转储到某处，可能会根据您要执行的操作转储到 CSV 文件中。您甚至可以添加一个步骤来为您创建快捷方式。

# sql - 如何在 PL/SQL 中处理临时查询结果

> ID：14215624
> 
> 赞同：0
> 
> 时间：2013-01-08T13:06:02.317
> 
> 标签：sql, plsql, oracle11g

我会简短地描述。一列`DestinationId` 一列`HierarchyNodeId` 目前一个DestinationId有多个HierarchyNodeId。我有一个查询，它为我提供了我想要保留的每个 DestinationId 和 HierarchyNodeId。因此，我想将与每个 DestinationId 关联的所有其他 HierarchyNodeId 替换为我从上面的查询中获得的那个。

1.  我通过查询创建了一个循环。所以每个循环周期我都有一个 DestinationId (cursor."DestinationId" 和某个 cursor."HierarchyNodeId")
2.  我有 3 个包含“HierarchyNodeId”列的表，我想更新所有 3 个。
3.  在每个循环周期中，我都有一个查询，可以找到与 cursor."DestinationId"（当前循环 DestinationId）关联的所有 HierarchyNodeIds

我的问题是第 3 步中的查询从我要更新的 3 个表中的 2 个获取数据。所以如果我在更新中使用它（例如

```
UPDATE table1 
SET table1."HierarchyNodeId"=cursor."HierarchyNodeId"
WHERE table1."HierarchyNodeId" IN (queryfromstep3) 
```

) 然后我会遇到问题，因为当我进行第一次 UPDATE 时，queryfromstep3 的结果会发生变化。

所以我想在每个循环开始时将 queryfromstep3 的结果存储到一个 TEMP 表中。

这在 PL/SQL 中可能吗？非常感谢！

编辑：

这是我要存储到 TEMP 中的查询

```
SELECT "HierarchyNodeId" FROM 
(
Select t1."Counter", t2.* From
           (SELECT "HierarchyNodeId", (SELECT "Description"
            FROM "Destination"
           WHERE "DestinationId" = hn."DestinationId") "Description", "DestinationId",
         (SELECT "DestinationTypeId"
            FROM "Destination"
           WHERE "DestinationId" = hn."DestinationId") "DestinationTypeId"
    FROM "HierarchyNode" hn
WHERE "DestinationId" IN (SELECT "DestinationId" From(SELECT COUNT ("HierarchyNodeId"), "DestinationId" FROM "HierarchyNode" GROUP BY "DestinationId" HAVING COUNT ("HierarchyNodeId") > 1))) t2, 
(select COUNT (*) "Counter", "HierarchyNodeId" From "HierarchyDetail"
Group By "HierarchyNodeId") t1
Where t1."HierarchyNodeId" = t2."HierarchyNodeId"
AND t2."DestinationId" = cur."DestinationId"
AND t2."HierarchyNodeId" != cur."HierarchyNodeId"
ORDER BY "DestinationId", "Counter" Desc
) 
```

它基本上会产生 1 列带有 Guid 的列。但是在我进行第一次更新后，其中一些指南会发生变化。为了避免这种情况，我想在每个循环开始时将其存储到 TEMP 表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:30:05.080

查看 Oracle 全局临时表：[http ://docs.oracle.com/cd/E11882_01/server.112/e25494/tables003.htm#ADMIN11633](http://docs.oracle.com/cd/E11882_01/server.112/e25494/tables003.htm#ADMIN11633)

# c++ - 如何在不知道 C 中的旧密码的情况下设置用户帐户密码？

> ID：14215626
> 
> 赞同：3
> 
> 时间：2013-01-08T13:06:03.757
> 
> 标签：c++, windows, passwords

我正在编写一个 C++ 程序来管理 Windows 7 上的用户帐户。

我想为现有用户帐户设置密码。

我无法使用 NetUserChangePassword (Netapi32.dll)，因为我没有记录我在创建用户时设置的先前密码。

因此，程序必须能够只设置一个新密码（不知道旧密码）。

有没有办法在 C++ 中以编程方式做到这一点？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T13:11:57.557

调用参数设置[`NetUserSetInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370659.aspx)为`level`1003。

# visual-studio-2010 - 尝试将 Visual Studio 连接到域外的测试控制器时出错

> ID：14215627
> 
> 赞同：4
> 
> 时间：2013-01-08T13:06:05.663
> 
> 标签：visual-studio-2010, visual-studio, load-testing

我的设置如下：

**域 A：**我本地工作站上的 Visual Studio 20120，通过 IP 地址指向我的控制器
**工作组（非域）：**亚马逊 EC2 云中的 Visual Studio 20120 测试控制器

尝试将我的 Visual Studio 连接到控制器时，我收到以下错误“无法与控制器连接......服务器已拒绝客户端凭据。登录尝试失败”

为了解决这个问题，我在我的工作站上创建了一个新的本地（非域）用户，其名称和密码与云上的用户/密码组合相同。

一旦我这样做了，我以该用户的身份启动了一个 Visual Studio 实例（使用“运行方式”）并再次尝试。这给出了不同的错误消息：

“请求的名称有效，但未找到请求类型的数据”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T13:06:05.663

事实证明，Visual Studio 实际上（以一种非常模糊的方式）抱怨的是它能够通过 IP 地址连接到控制器，但无法通过其主机名连接到控制器。

为了解决这个问题，我必须连接到我的控制器计算机并获取它的主机名。然后我转到我的主机文件 (C:\Windows\System32\drivers\etc) 并添加主机名和 IP 地址。

完成后，Visual Studio 成功连接到控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-01T00:48:00.647

我有一个类似的问题。在域中拥有测试控制器时，我注意到一些奇怪的怪癖，而在工作组计算机中拥有我的网络之外的代理。控制器似乎尝试使用其 netbios 名称连接回代理，因此如果该主机名不在您的内部 DNS 中，则需要使用公共 IP 地址将该主机名添加到您的主机文件中。代理似乎尝试使用控制器的 FQDN（活动目录域，而不是 Internet 域）连接到控制器，因此需要进入代理的主机文件。您需要为代理和控制器使用相同的帐户名和密码。如果您的控制器与测试管理器位于不同的计算机上，您需要将控制器服务帐户设置为域帐户，其用户名/密码与代理上的本地服务帐户相同。[http://nerdsknowbest.blogspot.com/2013/10/how-to-setup-visual-studio-tfs-test-agents-cloud.html](http://nerdsknowbest.blogspot.com/2013/10/how-to-setup-visual-studio-tfs-test-agents-cloud.html)如果对您或其他任何人有帮助。此外，如果主机文件中有任何指向 127.0.0.1 的内容，请将其注释掉。

# ios - 编辑静态 tableView 单元格部分

> ID：14215639
> 
> 赞同：3
> 
> 时间：2013-01-08T13:06:46.907
> 
> 标签：ios, xcode, static, tableview, cell

我有一个带有一些自定义单元格的静态 tableView。我不想做的是以编程方式更改章节标题。据我所知，因为单元格是静态的，所以我不能使用 cellForRowAtIndexPath 等方法，所以我的问题是，是否有可能像这样改变它们。

```
self.tableView.section1.text = @"title1"; // something like this? 
```

我尝试创建该部分的 IBOutlet，但出现以下错误：

```
Unknown type name 'UITableViewSection': did you mean 'UITableViewStyle?' 
```

我能做的是编辑单元格的内容，而不是标题。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T13:11:38.210

使用`viewForHeaderInSection`方法。

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

        UILabel *label1 = [[UILabel alloc] init];
        label1.frame = CGRectMake(0, 0, 190, 20);
        label1.textColor = [UIColor blackColor];
        // label1.font = [UIFont fontWithName:@"Helvetica Bold" size:16];
        [label1 setFont:[UIFont fontWithName:@"Arial-BoldMT" size:14]];
        label1.textAlignment = UITextAlignmentCenter;

        label1.text =[NSString stringWithFormat:@"Title %d",section];
// If your title are inside an Array then Use Below Code 

       label1.text =[titleArray objectAtindex:section];

        label1.textColor = [UIColor whiteColor];
        label1.backgroundColor = [UIColor clearColor];

UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 30)];
    [view addSubview:label1];

    view.backgroundColor = [UIColor orangeColor];
         return view;

    } 
```

如果您想使用，请`titleForHeaderInSection`使用以下代码。

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section 
{

return [NSString stringWithFormat:@"Title %d",section];
// If your title are inside an Array then Use Below Code 

       return [titleArray objectAtindex:section];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T13:12:43.030

您可以使用 UITableViewDelegate 协议方法`tableview:titleForHeaderInSection:`

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    NSString *sectionTitle = @"";

    switch (section) {

        case 0: sectionTitle = @"Section 1"; break;
        case 1: sectionTitle = @"Section 2"; break;
        case 2: sectionTitle = @"Section 3"; break;

        default:
            break;
    }

    return sectionTitle;
} 
```

确保`<UITableViewDelegate`在 .h 文件中声明 >：

```
@interface SettingsViewController : UITableViewController <UITableViewDelegate> {

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-20T09:19:49.510

如果您需要在视图显示为“实时”时更改标题，您可以这样做：

```
int sectionNumber = 0;
[self.tableView headerViewForSection:sectionNumber].textLabel.text = @"Foo Bar"; 
```

但是这样做似乎并没有改变标签框的大小。我只是提前把我的放大了。 [更多细节在这里。](https://stackoverflow.com/questions/4346944/changing-uitableviews-section-header-footer-title-without-reloading-the-whole-t/17959411#17959411)

# iphone - 以编程方式更改视图尺寸时，自动布局似乎不起作用

> ID：14215641
> 
> 赞同：12
> 
> 时间：2013-01-08T13:07:00.920
> 
> 标签：iphone, ios, uitableview, autolayout

我有 UITableViewCell 的自定义子类，并设置了一些约束。

问题是当我尝试像这样更改一个视图的大小时：

```
CGRect frm = CGRectMake(0, 0, someValue, 30);
cell.indentView.frame = frm; 
```

其他取决于 cell.indentView 宽度的视图根本没有移动。

可能是什么情况？

此代码将起作用：

```
// enumerate over all constraints
for (NSLayoutConstraint *constraint in cell.indentView.constraints) {
    // find constraint on this view and with 'width' attribute
    if (constraint.firstItem == cell.indentView && constraint.firstAttribute == NSLayoutAttributeWidth)
    {
        // increase width of constraint
        constraint.constant = someValue;
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T13:28:35.790

这是因为您不能只更改具有自动布局约束的对象的框架（因为约束决定了位置，而不是手动设置`frame`属性......`frame`属性将在重新应用约束时被重置）。请参阅[此](https://stackoverflow.com/questions/14189362/animating-an-image-view-to-slide-upwards/14190042#14190042)松散相关的帖子，其中演示了如何正确调整约束以移动视图。（在这种情况下，我们正在制作动画，这不是这里的问题，但它确实演示了如何调整约束以影响 a 的移动`UIView`。）

简而言之，如果你想`UIView`在自动布局内移动一个，你一定不能尝试改变`frame`，而要自己调整约束。如果您为约束本身创建参考，这将被简化，`IBOutlet`此时您可以调整`constant`.`NSLayoutConstraint`

* * *

**更新：**

Egor 建议枚举约束并编辑与所讨论的约束匹配的约束。这很好用，但就个人而言，我更喜欢为`IBOutlet`我想要编辑的特定约束设置一个，而不是枚举它们并寻找有问题的约束。如果您`IBOutlet`要求`indentViewWidthConstraint`的宽度`NSLayoutConstraint`，则`indentView`可以简单地：

```
self.indentViewWidthConstraint.constant = newIndentConstantValue; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:25:55.853

您必须告诉框架进行更新，例如通过调用`setNeedsLayout`,`setNeedsUpdateConstraints`或`layoutIfNeeded`. 有关正确用法，请参阅[UIView的文档。](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816)

# php - 如果存在已关闭状态的客户，请选择工单 ID

> ID：14215642
> 
> 赞同：-4
> 
> 时间：2013-01-08T13:07:06.260
> 
> 标签：php, mysql

我的数据库中有客户的票太多，而这些票的状态太多。我想要一个可以提取客户票号的查询，前提是票证的状态！='已关闭'。否则它应该返回null。

非常感谢您的快速响应。

编辑：这是我的查询：

```
SELECT CASE WHEN custom_field_3 != 'Closed' THEN item_id ELSE NULL END AS ticketID 
FROM aims_items 
WHERE custom_field_22 =221226 
```

它现在有效，这是我的解决方案：

SELECT CASE WHEN ( SELECT COUNT(*) FROM targets_items WHERE custom_field_3 != 'Closed' AND custom_field_22 =221226 )>0 THEN item_id ELSE NULL END AS ticketID FROM targets_items WHERE custom_field_3 != 'Closed' AND custom_field_22 =221226 感谢您的合作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:14:09.143

试试这个查询：

```
SELECT IF(custom_field_3!='Closed',item_id,'') as ticketID FROM `aims_items` 
```

请记住，我没有写出您表中的确切字段。这只是向您展示的示例。有关详细信息，请参阅以下链接
http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:10:09.860

如果没有表结构，就无法评估问题所在。根据您的描述，一个简单的查询如

```
SELECT item_id from aim_items WHERE custom_field_3 != 'Closed' AND custom_field_22 = 221226 
```

就足够了。然后，您可以计算返回的行数以确定结果。

但是，如果您需要返回 null 作为结果，请尝试以下操作：

```
SELECT (SELECT item_id from aim_items WHERE custom_field_3 != 'Closed' AND custom_field_22 = 221226) AS ticketID 
```

上面将基本的选择封装成一个子查询，提供一个空结果。

# python - Python 中的语法错误

> ID：14215644
> 
> 赞同：-2
> 
> 时间：2013-01-08T13:07:08.500
> 
> 标签：python

```
pen_color = input("Enter a color name to set the pen color: ")
pen_width = input("Enter a number from 1-10 to set the pen width: ") 
```

它还有更多内容，但它会打开并要求输入颜色，然后我输入一种颜色，然后它就会关闭说`Syntax error: Unexpected EOF while parsing.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:10:10.360

`input()`提示输入一个字符串，然后`eval()`s 它。使用`raw_input()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:10:15.390

在 Python 2.x 中，[`input()`](http://docs.python.org/2/library/functions.html#input)尝试计算作为 Python 表达式输入的字符串。如果这不是您想要的，并且您使用的是 Python 2.x，那么您应该使用[`raw_input()`](http://docs.python.org/2/library/functions.html#raw_input)而不是`input()`.

[这在 Python 3.x 中发生了变化，](http://www.python.org/dev/peps/pep-3111/)不再`input()`评估输入，`raw_input()`也不再存在。因此，在 Python 3.x 中，[`input()`](http://docs.python.org/3.1/library/functions.html#input)将是正确使用的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:04:52.447

**在 Python 2.x**中：
`input() = eval(raw_input())`
**在 Python 3**
中不再是这种情况，与Python 2.x 中的情况`input()`相同。`raw_input()`

# android - GridView 在缩放视图中滚动不起作用

> ID：14215651
> 
> 赞同：0
> 
> 时间：2013-01-08T13:07:39.467
> 
> 标签：android, android-gridview

为了在 gridView 中产生放大效果，我用 2.0f 值对其进行了缩放。该网格视图上的缩放（缩放效果）效果很好。

随着视图的缩放，我希望在此视图中进行水平和垂直滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:10:39.057

请在网格 Xml 代码中编写代码：

```
android:scrollbars="horizontal"
android:scrollbars="vertical" 
```

# flexslider - Flexslider 在滑块下方添加巨大的空白

> ID：14215654
> 
> 赞同：0
> 
> 时间：2013-01-08T13:07:52.697
> 
> 标签：flexslider, removing-whitespace

我的 flexslider 下方有大量空白，我不知道如何删除。我已经玩了很多 CSS，但似乎没有任何效果，没有破坏“响应”行为。非常感谢任何帮助。

问候...

站点可以在这里查看，所有代码都位于head标签中： http: [//destinjustlisted.com/new/](http://destinjustlisted.com/new/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:10:33.327

包含幻灯片项目的 div 必须具有“flexslider”类。在 flexslider.css 中为该类设置了各种东西，这是下载的一部分。它具有的 CSS 属性之一是“边距”。您将在那里看到三个值。它看起来像这样：

```
margin: 0 0 60px; 
```

我不知道你是否熟悉这种属性格式，但是当你有 4 种设置时，它在 CSS 中很常见，例如边距、边框或填充（所有这些都有 4 个边）。您最多可以有四个值，它们分别代表：上、右、下、左（就像您要绕着时钟转盘，从 12 点开始）。因此，例如：

```
padding: 0 1px 0 2px; 
```

不会在顶部和底部提供填充，但在右侧 1 个像素和左侧 2 个像素。

flexslider CSS 在底部有 60 像素的边距。如果您想要直观地表示您在幻灯片中的位置或选择特定幻灯片，则可以为导航按钮留出空间。不幸的是，如果您在设置插件时将属性“controlNav”设置为“false”，如果您不想显示那些“按钮”，那么您最终会在控件下看到大的空白区域。如果您只是将该属性设置为此：

```
margin: 0; 
```

你所有的问题都会迎刃而解！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T13:10:31.410

如果您的图像尺寸不同（尤其是高度），Flexslider 容器将显示为最高的图像。这可能会造成您可能看到的差距。

如果这是原因，请提前调整图像大小，使它们都具有相同的高度和宽度。

# gwt - 检查模块的继承链；它可能没有继承所需的模块，或者模块可能没有正确添加其源路径条目

> ID：14215669
> 
> 赞同：6
> 
> 时间：2013-01-08T13:08:29.717
> 
> 标签：gwt, maven-2

我想创建一个具有多个 gwt 模块的 gwt maven 项目。其中一些只是实用模块，意味着它们没有入口点。基本上我已经有一个包含多个 gwt 模块的 gwt 项目，并且我已将其转换为 maven，但在编译时它给了我以下异常：

> [错误] 找不到类型'in.appops.showcase.web.gwt.uploadservice.client.UploadService' [信息] [错误] 提示：以前的编译器错误可能导致此类型不可用 [信息] [错误] 提示：检查模块的继承链；它可能没有继承所需的模块，或者模块可能没有正确添加其源路径条目

我的项目有 core 和 dispath 模块，它们是没有入口点的实用程序模块和其他具有继承核心模块的入口点的上传服务模块。

所以我把 core.gwt.xml ,dispatch.get.xml 放在他们的包中，即在 src/main/java 本身和uploadservice.gwt.xml 在maven的资源文件夹中。同样在 pom.xml 我提供了要编译的模块：

```
<configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.codehaus.mojo</groupId>
                                    <artifactId>gwt-maven-plugin</artifactId>
                                    <version>2.4.0</version>
                                    <goals>
                                        <goal>clean</goal>
                                        <goal>resources</goal>
                                        <goal>compile</goal>
                                        <goal>i18n</goal>
                                        <goal>generateAsync</goal>
                                    </goals>
                                    <configuration>
                                        <runTarget>Index.html</runTarget>
                                        <hostedWebapp>${webappDirectory}</hostedWebapp>
                                         <modules>
                                            <!-- <module>platform.bindings.web.gwt.dispatch.Dispatch</module>
                                             <module>platform.core.Core</module>   -->
                                            <module>showcase.web.gwt.addressbook.AddressBook</module>
                                            <module>showcase.web.gwt.uploadservice.UploadService</module>
                                        </modules> 
                                    </configuration>
                                </pluginExecutionFilter>
                                <action>
                                    <execute />
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration> 
```

谁能帮我摆脱这个例外。我是否需要提供编译模块的命令或其他任何东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:16:06.560

**注 1 -** 当使用 gwt 标准方法时，您的文件夹结构

```
 src/main/java/showcase/web/gwt/yourmodule/yourmodule.gwt.xml
    src/main/java/showcase/web/gwt/yourmodule/client 
    src/main/java/showcase/web/gwt/yourmodule/public 

Your pom references 
    <module>showcase.web.gwt.addressbook.AddressBook</module>
    <module>showcase.web.gwt.uploadservice.UploadService</module>

Your .gwt.xml file location
    src/main/java/showcase/web/gwt/addressbook/AddressBook.gwt.xml
    src/main/java/showcase/web/gwt/uploadservice/UploadService.gwt.xml 
```

**注 2** - `<lifecycleMappingMetadata>`适用于您的 m2e = maven eclipse 插件。有关 GWT MAVEN POM 示例的清晰示例 - [http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/validation/pom.xml](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/validation/pom.xml)

**注 3** - 完全按照 gwt maven 示例项目的极其简单的示例 - [http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/validation/](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/validation/)

**不要更改文件夹位置。****遵循命名约定。** 甚至像 public、client 这样的文件夹名称也是由 GWT 中的“名称”选择的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T20:02:32.160

如果在加载入口点时发生此错误，您可能需要更改 *.gwt.xml 文件中的标签。

更改包结构后，我能够成功修复错误“检查模块的继承链；它可能没有继承所需的模块或模块可能没有正确添加其源路径条目”。

*   在您的 .gwt.xml 文件中，在文件底部附近找到源标记。
*   恢复到较早的工作提交，或打开一个已知的工作项目
*   请注意工作源标签相对于工作项目的包结构所遵循的模式。
*   前滚到损坏的提交
*   按照相同的模式修改您的源标签以对应于当前的包结构。

此外，您应该检查以确保您的 .gwt.xml 文件中有适当的继承标签。例如，如果您尝试使用 SmartGWT 而没有标签继承 name="com.smartgwt.SmartGWt"，您将收到类似的错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:30:28.080

你的`UploadService.gwt.xml`文件应该在`src/main/resources/in/appops/showcase/web/gwt/uploadservice`. 其他 GWT 模块描述符也应该在它们的包中。

# android - 无法连接到 UNIX 套接字，Android

> ID：14215670
> 
> 赞同：2
> 
> 时间：2013-01-08T13:08:30.810
> 
> 标签：android, sockets, unix

我在 C 中创建了一个 unix 套接字，并用 ndk 编译它，并通过 adb 我将它从我的 SD 卡推到 /data/local 中。我将该文件的权限更改为 777 并使用 ./ 执行它。现在我可以在 /dev/socket 中看到我自己制作的套接字了。

现在我正在尝试通过以下 JAVA 代码连接此套接字：

```
 mSocket = new LocalSocket();

            mSockAddr = new LocalSocketAddress( "rilproxy"  );
            mSocket.connect( mSockAddr ); 
```

我收到以下错误：

java.io.IOException：连接被拒绝

我努力解决这个问题，但没有运气。在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:15:55.880

您是否在 Android 清单文件中授予 Internet 权限？如果不是，那么您的第一个套接字连接本身将失败..（在其清单中声明网​​络权限的正确编码的 android 应用程序可以接受未授权端口上的连接，因为设备上没有防火墙。）

将以下行添加到您的 AndroidManifest.xml

如果在模拟器上进行测试，则使用 10.0.2.2 代替 localhost（如果在模拟器中运行应用程序，10.0.2.2 是您将使用的“神奇”IP 地址。）

# excel - Excel 时间 dd/hh/mm 仅转换为分钟

> ID：14215672
> 
> 赞同：4
> 
> 时间：2013-01-08T13:08:30.497
> 
> 标签：excel, excel-formula, data-conversion

如何将在 Excel 单元格中写入的周转时间转换为 (0D/1H/6)，这意味着仅在另一个或相邻的 Excel 单元格中将 0 天、1 小时和 6 分钟转换为分钟。我想自动化它以使转换变得容易。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:53:30.863

可以使用一些字符串函数。下面的代码计算分钟，给定一个单元格（在本例中为 A1），其字符串格式为您指定的方式：

```
=VALUE(LEFT(A1;FIND("D/";A1)-1))*24*60 + VALUE(MID(A1;FIND("D/";A1)+2;FIND("H/";A1)-FIND("D/";A1)-2))*60 + VALUE(RIGHT(A1;LEN(A1)-FIND("H/";A1)-1)) 
```

例如，在您的情况下，“0D/1H/6”给出 66。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:28:12.487

因为我不认为 Excel 本身可以理解这种格式，所以我会为此使用 VBA 公式。

Alt+F11，插入 -> 模块并添加

```
Public Function TOMINS(value As String) As Long
    Dim parts() As String: parts = Split(value, "/")
    If (UBound(parts) = 2) Then
        TOMINS = Val(parts(0)) * 1440
        TOMINS = TOMINS + Val(parts(1)) * 60
        TOMINS = TOMINS + Val(parts(2))
    End If
End Function 
```

然后，如果该值在 A1 中，并且您想要 B1 中的分钟，则将 B1 `=TOMINS(A1)`

# search-engine - Google 搜索结果“plus.google.com”条目

> ID：14215674
> 
> 赞同：0
> 
> 时间：2013-01-08T13:09:01.697
> 
> 标签：search-engine, google-plus

我为客户做了一个网站。

现在，当我搜索他时，结果如下所示：

![在此处输入图像描述](../Images/1837ce9e836c5175dec78ff339d391bd.png)

你可以看到第四个条目有点特殊，我不明白这个条目是从哪里来的？

这是一个自动的 google+ 页面吗？我刚刚创建了一个 google 地方条目，但从未创建过 google+ 页面。

我如何摆脱这个搜索结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:12:40.347

Google 地方信息条目会显示在 Google+ 本地中。默认情况下，他们没有与之关联的 Google+ 信息页，但您可以将您的条目转换为一个位置以启用更多功能，并通过使用[徽章代码](https://developers.google.com/+/plugins/badge/)或更最小的[直接连接元数据链接](https://developers.google.com/+/plugins/badge/#connect)来将条目与您的网站挂钩以进行验证您的网站在 Google+ 本地页面上。

将您的网站与 Google+ 本地页面相关联，也应该有助于搜索，并为人们提供一种直接访问您的网站的方法，直到该网站开始显示在搜索索引中。

# objective-c - 使用定义控制每个源文件的宏编译

> ID：14215675
> 
> 赞同：2
> 
> 时间：2013-01-08T13:09:05.520
> 
> 标签：objective-c, c, macros, objective-c++, c-preprocessor

是否可以通过在源文件中使用定义在两个不同的源文件中以不同方式编译头文件？

例如，如果我在两个源文件中包含一个标头，如下所示：

标头.h：

```
#if FOO
#define BAR(x) f(x)
#else
#define BAR(x) g(x)
#endif 
```

源1.cpp：

```
#define FOO 1
#include "header.h"

void a(int x) {
    BAR(x); // f(x)?
} 
```

源代码2.cpp

```
#include "header.h"

void b(int x) {
    BAR(x); // g(x)?
} 
```

这不应该编译以便函数 a 执行 f 而函数 b 执行 g 吗？

我正在尝试在 XCode 和 Objective-C++ 中执行此操作。a 和 b 都执行 g，就好像 source1.cpp 没有定义 FOO 一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:15:14.010

您的宏定义~~不~~正确。 ~~错误是它应该是~~但是我更喜欢使用`#ifdef`而不是`#if`

```
#ifdef FOO
#define BAR(x) f(x)
#else
#define BAR(x) g(x)
#endif 
```

另外你不必给`FOO`一个值，你需要做的就是把`#define`它放进去`source1.cpp`

```
#define FOO
#include "header.h" 
```

在`source2.cpp`我还将通过执行以下操作确保`FOO`未定义（作为任何其他包含的结转）：

```
#ifdef FOO
#undef FOO
#endif
#include "header.h" 
```

**编辑**

我很快就说宏是错误的。根据这个SO问题[#if中使用的未定义常量的值是多少？(C++)](https://stackoverflow.com/questions/5085392/what-is-the-value-of-an-undefined-constant-used-in-if-c)应该按照 OP的`#if`规定工作，因为`FOO`应该衰减到`0`未定义时的值。

但是，我认为 using`#ifdef`提供了更多关于实际需要的上下文。

因此，我怀疑 的定义`FOO`意外地潜入某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:07:05.493

对于您的情况，基于宏进行区分的最佳方法是使用切换方法：

```
#ifdef FOO
#define BAR(x) f(x)
#undef FOO
#else
#define BAR(x) g(x)
#endif 
```

源1.cpp：

```
#define FOO
#include "header.h"

void a(int x) {
    BAR(x); // f(x)?
} 
```

源代码2.cpp

```
#undef FOO
#include "header.h"  
void b(int x) {
    BAR(x); // g(x)?
} 
```

如需更多控制，请尝试以下操作：

```
#ifdef FOO
  #if FOO == 1
  #define BAR(x) f(x)
  #undef FOO
  #elif FOO == 2
  #define BAR(x) g(x)
  #undef FOO
  #endif
#endif 
```

并这样写：

源1.cpp：

```
#undef FOO
#define FOO 1
#include "header.h"

void a(int x) {
    BAR(x); // f(x)?
} 
```

源代码2.cpp

```
#undef FOO
#define FOO 2
#include "header.h"  
void b(int x) {
    BAR(x); // g(x)?
} 
```

有几种方法可以实现，你问什么。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:14:20.833

问题是头文件毕竟间接包含在预编译的头文件中。XCode 似乎自动将预编译的头文件包含在每个编译单元中，因此只有一个版本的宏可用。预编译的版本是没有定义的版本，即#else-branch，因为在预编译时没有读取源文件。

我会接受彼得 M 的回答，因为他对此得出了正确的结论。

askmish 的切换方法对我的情况没有帮助，但这是我将来会这样做的方式，因为这会立即导致解决方案。

# bash - 为什么 ftam 服务将启动并从终端返回提示，而不是从 bash 脚本？

> ID：14215677
> 
> 赞同：0
> 
> 时间：2013-01-08T13:09:08.877
> 
> 标签：bash, service, terminal, centos

我正在`ft820.rc`使用 bash 版本 bash 3.0 启动 ftam 服务器（在 CentOS 5 上），并且从脚本启动它时遇到问题，即在我执行的脚本中

`ssh -nq root@$ip /etc/init.d/ft820.rc start`

并且脚本不会在此行之后继续，尽管当我在定义的机器上执行时`$ip`

`/etc/init.d/ft820.rc start`

我会在服务启动后立即返回提示。

这是开始的代码`ft820.rc`

```
 SPOOLPATH=/usr/spool/vertel
  BINPATH=/usr/bin/osi/ft820
  CONFIGFILE=${SPOOLPATH}/ffs.cfg

  # Set DBUSERID to any value at all. Just need to make sure it is non-null for
  # lockclr to work properly.
  DBUSERID=
  export DBUSERID

  # if startup requested then ...
  if [ "$1" = "start" ]
  then
          mask=`umask`
          umask 0000

          # startup the lock manager
          ${BINPATH}/lockmgr -u 16

          # update attribute database
          ${BINPATH}/fua ${CONFIGFILE} > /dev/null

          # clear concurrency locks
          ${BINPATH}/finit -cy ${CONFIGFILE} >/dev/null

          # startup filestore
          ${BINPATH}/ffs ${CONFIGFILE}
          if [ $? = 0 ]
          then
                  echo Vertel FT-820 Filestore running.
          else
                  echo Error detected while starting Vertel FT-820 Filestore.
          fi

          umask $mask 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:43:59.370

我在这里（应@Patryk 的要求）重新发布我在问题评论中的内容：

“在命令行中执行 ssh 时是否相同... .ssh/authorized_keys 文件？ – Olivier Dulac 20 小时前“

“你说，在命令行（而不是在脚本中）你可以 ssh root@.... 并且它不需要你的密码就可以工作？（即，它可以从脚本运行？） – Olivier Dulac 20几小时前“

" 尝试不带 '-n' 甚至完全不带 -nq 的 ssh ： ssh root@$ip /etc/init.d/ft820.rc start （您甚至可以添加 ssh -v ，它会显示本地（1 :) 和远程 (2:) 事件以非常冗长的方式，帮助了解它究竟卡在哪里）– Olivier Dulac 19 小时前“

"also : 在脚本中的 "ssh..." 行之前，再写一行，例如： ssh root@ip "set ; 密码; ID ; whoami”并查看它是否有效并显示正确的信息。这可能有助于确保 ssh 部分正常工作。“set”部分还将向您显示正在运行的 shell（例如：如果它包含 BASH= ，则您正在运行 bash . 否则 SHELL=... 应该给出一个很好的提示（有时不正确）关于哪个 shell 被调用） – Olivier Dulac 19 小时前“

" 请尝试不使用 '-n' (= 在后台运行并等待，而不是运行然后退出)。它不起作用，尝试将 -t -t -t (3 次) 添加到 ssh，以强制它分配一个 tty。但首先，请去掉 '-n'。——Olivier Dulac 18 小时前“

显然有效的是将`-t`选项添加到 ssh 命令。（你可以上去放 '-t -t -t' 以进一步强制它尝试分配 tty，视情况而定）

我猜这是因为调用的命令预计将在交互式会话中运行，因此需要一个“tty”作为标准输出

一种可能性（但只是一个疯狂的猜测）：调用的 rc 脚本输出信息，但在缓冲环境中（即，当未通过终端启动时），调用脚本看不到足够的行来填充缓冲区并开始打印任何内容出（比如当你在缓冲环境中执行“grep something | something else”并在缓冲区大到足以显示任何内容之前按 ctrl+c 时：你最终认为 grep 没有找到任何行，而可能有一些已经在缓冲区中的行）。关于缓冲有很多话要说，我才刚刚开始阅读这一切。强制 ssh 分配一个 tty 使被调用的命令认为它正在输出到实时终端会话，这可能已经关闭了缓冲并允许显示结果。也许在第一种情况下，它也有效，

# c++ - 在 Visual Studio 2010 中从 .h 和 .lib 创建 .dll

> ID：14215678
> 
> 赞同：4
> 
> 时间：2013-01-08T13:09:12.123
> 
> 标签：c++, dll, header, linker, .lib

我正在尝试从 tngaming 为他们的游戏背心获得的头文件和库文件创建一个 .dll 文件。

到目前为止，我一直在使用[本指南](http://msdn.microsoft.com/en-us/library/ms235636%28v=vs.80%29.aspx)，但我没有创建新的头文件，而是将我的 tngaming 文件添加到头文件所在的文件夹中，然后使用“添加现有项目”将其添加到 Visual Studio 内的文件夹中。

之后我使用了属性 -> 链接器 -> 输入，在其中添加了我的 lib 文件，这似乎也可以正常工作。

然后在 tngaming.cpp 我添加了这一行

```
#include "tngaming.h" 
```

现在可以构建我的 .dll，但它不起作用。当我查看它时，有\ 行说诸如“堆栈内存损坏”之类的东西。

我是正确创建我的 .dll 还是做错了什么？我如何实际创建我的 .dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:51:32.157

最终找到了一个和我有同样问题的人并修复了它，这样问题就解决了。其他任何遇到这个问题的人都可以看看

[http://waterhobo.com/?p=28](http://waterhobo.com/?p=28)

感谢您的帮助

# linux - 如何在文件中间写入（Bourne Shell 脚本）

> ID：14215682
> 
> 赞同：0
> 
> 时间：2013-01-08T13:09:24.653
> 
> 标签：linux, shell, sed, replace

我有某种数据库文件：

```
key1 val1
key2 val2
key3 val3
... 
```

我想写“你好”而不是 val1

我试图做的：

```
while read line
do
    var= cut -d ' ' -f 1
    if [ $var == "key1" ]
    then
        ????
    fi
done < myfile 
```

有没有办法使用 FD 重定向？（或者如果有某种偏移，则回声？...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:13:45.307

对于简单的替换使用`sed`：

```
sed 's/val1/hello/' file 
```

这将用if在一行上多次出现替换`val1`每行上的第一个实例，添加全局标志，如：`hello``val1``g`

```
sed 's/val1/hello/g' file 
```

的默认行为`sed`是打印到`stdout`以便将更改保存到新文件使用重定向：

```
sed 's/val1/hello/g' file > newfile 
```

或使用`-i`选项`sed`将更改保存在原始文件中：

```
sed -i 's/val1/hello/g' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:24:24.097

如果你真的需要一个 shell 解决方案：

```
while read key val ; do
    if [ "$key" == key1 ] ; then
        val=hello
    fi
    echo "$key $val"
done < myfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:45:42.860

您要查找的内容称为“关联数组”，在 Perl 中也称为“哈希”，或“键值存储”或“字典查找”。Bourne shell 不直接支持它们。Awk、Perl 和 Bash 都有关联数组。有一些方法可以在 bourne shell 中将关联数组组合在一起，但它们很丑陋。您最好的选择是 a) 选择一种更适合手头任务的语言或 b) 如果您必须使用 bourne shell，请使用更强大的语言围绕关联数组编写一个包装函数（这本质上是 sudo_O 使用 sed 所做的）。

```
#! /bin/sh

lookup() {
    perl -e '%hash = ( "key1" => "hello", "key2" => "val2", "key3" => "val3" );          
             print $hash{ $ARGV[0] }
            ' $1
}

x=$(lookup "key1")
echo $x 
```

这比纯 bourne shell 的便携性差，但如果你有 perl 可用，这是一条更容易的路线。

If you don't have perl to use in a wrapper, your best bet would be awk -- it's essentially available on any machine which has sed, and it has first class support for associative arrays.

# node.js - 即使在区分大小写的文件系统上，如何使 Node.js 需要忽略大小写的文件？

> ID：14215684
> 
> 赞同：3
> 
> 时间：2013-01-08T13:09:28.343
> 
> 标签：node.js, case-sensitive

我想使用一个库（[rtf](https://github.com/jrowny/node-rtf)），但该库`require`的文件与实际文件名的大小写不同；该文件被调用`align.js`，但`require`d 为`Align`.

有没有办法告诉 Node.js 在`require`ing 文件时忽略大小写，以便我可以在区分大小写的文件系统上使用这个糟糕的库？

# android - 通过 USB 获取 android 设备信息

> ID：14215685
> 
> 赞同：0
> 
> 时间：2013-01-08T13:09:30.670
> 
> 标签：android, usb

我有一个问题，我找不到我要找的东西，所以我决定在这里问我的问题。

我想在我的电脑上查看连接了哪些 android 设备（没有 . 这甚至可能吗？

以及在什么方面？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:57:48.203

你真的应该尝试使用亚行来做到这一点。

安装Android SDK（ADB会自带）

之后，获取插入设备的 android 版本非常简单：

1.  将设备插入 USB。
2.  打开终端（或 cmd.exe，如果您使用的是 Windows）
3.  运行命令：`adb shell getprop ro.build.version.release`

希望能帮助到你。

# html - 如何（以编程方式）在 HTML 表格条目之间绘制箭头？

> ID：14215686
> 
> 赞同：2
> 
> 时间：2013-01-08T13:09:31.617
> 
> 标签：html, tabular

![带箭头的表](../Images/c10ccb6943ecfb50fc75085451798df6.png)

给定一个标准的静态 HTML 表格，以编程方式在任意两个 HTML 表格条目之间绘制箭头的最简单方法是什么？示例见上图。

我知道 HTML5-canvas 可用于绘制图形，但我希望有一种更简单/更容易的方法来实现这一点。

更新：我不受 HTML 表的约束。如果需要，表格可以以任何可以被网络浏览器读取的格式生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T23:32:59.343

我有一个类似的问题，因为我想在不同表格的单元格之间绘制箭头，但我认为我辞职的答案可能对你有用：SVG。如果您从配置了列/行布局的数据结构自动生成它，并且您可以确定所需的行高和列宽，您应该能够为要执行的行生成坐标任何你想要的文本。

```
<svg width="300" height="100">
    <text x='100' y='0' font-size='18px' text-anchor='end'>
      <tspan x='100' dy='1em'>foo1</tspan>
      <tspan x='100' dy='1em'>foo2</tspan>
      <tspan x='100' dy='1em'>foo3</tspan>
    </text>

    <text x='200 y='0' font-size='18px'>
      <tspan x='200' dy='1em'>foo4</tspan>
      <tspan x='200' dy='1em'>foo5</tspan>
      <tspan x='200' dy='1em'>foo6</tspan>
    </text>

    <line x1='100' y1='0.8em' x2='200' y2='2.8em' style="stroke:#999999"/>
    <line x1='100' y1='1.8em' x2='200' y2='1.8em' style="stroke:#999999"/>
    <line x1='100' y1='1.8em' x2='200' y2='0.8em' style="stroke:#ff0000"/>
    <line x1='100' y1='0.8em' x2='200' y2='1.8em' style="stroke:#ff0000"/>
    <line x1='100' y1='2.8em' x2='200' y2='2.8em' style="stroke:#00ff00"/>
  </svg>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:19:22.913

准备一个箭头的图像。您将它包含在页面中的同一容器（通常是`div`或`span`标记）中，该容器包含表本身。该容器被标记为使用`absolute`css 定义中的定位。对于您的阵列图像，您指定一个`relative`定位。现在您可以调整位置以使阵列准确地流向您想要的位置。您可能还必须为数组指定 z-index。

然而，这与箭头的角度有一些问题。显然，您可以使用 css 宽度和高度属性拉伸和弯曲它，但不能转动它。至少据我所知不是。如果您需要一个可以自由转动的数组，例如，如果您通过脚本代码动态可视化箭头，那么您可能更喜欢以下方法之一：

1.  有提供在画布上绘制的 jquery 扩展

2.  将箭头图像创建为矢量图形（SVG 格式）。该格式可以嵌入脚本以进行交互。这样，您就可以在脚本级别上转动数组并以其他方式与数组进行交互。

# c++ - c++：使用new运算符的动态数组

> ID：14215689
> 
> 赞同：-1
> 
> 时间：2013-01-08T13:09:39.900
> 
> 标签：c++, arrays, pointers, memory-leaks, global-variables

用户输入我必须在数组中收集的书籍。你能帮我理解为什么当我进入第二本书时，第一本书是erisen吗？我在全球范围内定义了 BOOK aux ...

你能帮我理解为什么我不能收藏吗

```
#define   stop __asm nop
#include "book.h"
#include <iostream>
#include <cstdio>

using namespace std;

int counter = 0;
BOOK aux [1];

void print_catalogue()
{

}

void print_book(BOOK aBook)
{
    cout << endl;
    cout <<aBook.Autor<<", "<<aBook.Title<<", "<<aBook.Year<<", "<<aBook.PageCount<<", "<<aBook.Cost<<endl; 
}

void new_book()
{
    BOOK temp;
    system("cls");
    cin.getline (temp.Autor, 20);
    cout <<"ENTERING NEW BOOK: " << endl <<endl;
    cout <<"Input the author: ";
    cin.getline (temp.Autor, 20);
    cout  <<"Input the title: ";
    cin.getline (temp.Title, 50);
    cout  <<"Input the year of publishing: ";
    cin >>  temp.Year;
    cout  <<"Input the number of pages: ";
    cin >>  temp.PageCount;
    cout  <<"Input the cost: ";
    cin >>  temp.Cost;
    cout << endl;   

    counter++;

    BOOK * pn = new BOOK [counter];
    if (counter > 0)
    {
        memcpy(pn, aux, counter * sizeof(BOOK));    
    }
    pn[counter - 1] = temp;

    BOOK * aux = new BOOK[counter];
    memcpy(aux,pn, counter * sizeof(BOOK));

    delete[] pn;

    for (int i = 0; i < counter; i++)
    {
        print_book(aux[i]);
    }   

    system("pause");
    return;
}

void delete_books()
{

}

 void write_catalogue()
 {

 }

 void read_catalogue()
 {

 }

void menu()
{
    char command;
    do
    {       
        system("cls");

        cout << "p - Print the whole catalogue."<< endl;
        cout << "n - Input a new book." << endl;
        cout << "d - Delete existing book(s)." << endl;
        cout << "w - Write the catalogue to a file." << endl;
        cout << "r - Read the catalogue from a file." << endl;
        cout << "Input a new command: ";
        cin >> command;

        cout << endl << endl;
        switch (command) 
        {
            case 'p': print_catalogue(); break;
            case 'n': new_book(); break;
            case 'd': delete_books(); break;
            case 'w': write_catalogue(); break;
            case 'r': read_catalogue(); break;
            case 'q': return;
            default : 
                {
                    cout << "Please, enter a correct command." << endl;
                    system("pause");
                }
        }

    } while(true);
}

void main()
{
    menu();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:34:49.090

您的全局 aux 是指向一本书的常量指针 – aux[0] ，仅此而已。您不能复制多个 BOOK hier。您重新定义本地辅助，并隐藏全局。在函数 new_book() 返回之后，您放在那里的内容是“泄漏”。

使用 std::string 和容器，不要滥用指针和全局变量。

# android - 支持android中不同的屏幕尺寸

> ID：14215690
> 
> 赞同：0
> 
> 时间：2013-01-08T13:09:40.363
> 
> 标签：android, screen-size

我希望我的应用程序支持不同的屏幕尺寸。我在 /res 目录中添加文件夹“layout-small 和 layout-large”。但是在我的活动中无法访问此文件夹中的 XML。所以我将所有 XML 添加到默认布局中并添加此代码

```
if((getResources().getConfiguration().screenLayout && 
      Configuration.SCREENLAYOUT_SIZE_SMALL) == Configuration.SCREENLAYOUT_SIZE_SMALL) {
          setContentView(R.layout.main1);
    }else if((getResources().getConfiguration().screenLayout &&
                Configuration.SCREENLAYOUT_SIZE_LARGE) == Configuration.SCREENLAYOUT_SIZE_LARGE){
                     setContentView(R.layout.main2);
        }
        else
            setContentView(R.layout.main); 
```

在我的活动中，但是当我的 AVD 皮肤为 1024*600 并且 hw.lcd.dencity 为 160（大）时，它不起作用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:22:57.530

> 大小：小，正常，大
> 密度：ldpi，mdpi，hdpi，
> nodpi（无自动缩放）纵横比：长，不长
> 方向：陆地

用法：

```
res/layout/my_layout.xml            
res/layout-small/my_layout.xml      
res/layout-large/my_layout.xml      
res/layout-large-long/my_layout.xml      
res/layout-large-land/my_layout.xml     
res/drawable-ldpi/my_icon.png  
res/drawable-mdpi/dpi/my_icon.png  
res/drawable-hdpi/my_icon.png      
res/drawable-nodpi/composite.xml 
```

将您的应用限制为特定的屏幕尺寸（通过 AndroidManifest）：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
...
<supports-screens
          android:largeScreens="true"
          android:normalScreens="true"
          android:smallScreens="true"
          android:anyDensity="true" />
...
</manifest> 
```

对于代码级 tweeking：

```
float scale = getContext().getResources().getDisplayMetrics().density; 
```

不要忘记：

```
dpi    = 160; //At 160dpi
pixels = dips * (density / dpi) 
```

另请参阅[在android中支持多屏](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:19:02.633

请看这个：

```
<supports-screens android:smallScreens="true" 
      android:normalScreens="true" 
      android:largeScreens="true"
      android:xlargeScreens="true"
      android:anyDensity="true" />

res/layout/my_layout.xml         // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size

res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation

res/drawable-mdpi/my_icon.png        // bitmap for medium density
res/drawable-hdpi/my_icon.png        // bitmap for high density
res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

更多阅读，请参阅此链接[如何在 android 中支持不同的屏幕尺寸](https://stackoverflow.com/questions/8255985/how-to-support-different-screen-size-in-android)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:16:47.350

布局名称必须相同

```
layout-small \ main1.xml
layout-normal\ main1.xml
layout-large \ main1.xml 
```

你不需要处理这个，android会自动决定使用哪个布局

```
setContentView(R.layout.main1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T13:17:44.070

Android 会自动为您执行此操作。对于不同的屏幕尺寸，制作不同的 xml 文件，但给它们相同的名称，例如`main.xml`，将 for`large`放在文件夹`/res/layout-large`中，for `small`in`/res/layout-small`等等。

在 中`onCreate()`，只要放`setContentView(R.layout.main)`

有关更多信息，请考虑阅读[Android Developers 的此站点](http://developer.android.com/guide/practices/screens_support.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-12T10:37:20.437

Android 将自动为给定的特定设备挑选最佳资源。如果没有可用的匹配资源，系统将使用默认资源并根据需要将其放大或缩小以匹配当前的屏幕尺寸和密度。

“默认”资源是那些没有用配置限定符标记的资源。

# java - 如何在 Java 中捕获异常？

> ID：14215694
> 
> 赞同：-18
> 
> 时间：2013-01-08T13:09:58.163
> 
> 标签：java, exception, exception-handling

如何在 Java 中捕获异常？我有一个接受用户输入的程序，它是整数值。现在，如果用户输入了一个无效值，它会抛出一个`java.lang.NumberFormatException`. 我如何捕捉到那个异常？

```
 public void actionPerformed(ActionEvent e) {
        String str;
        int no;
        if (e.getSource() == bb) {
            str = JOptionPane.showInputDialog("Enter quantity");
            no = Integer.parseInt(str);
 ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:12:07.740

```
try {
   int userValue = Integer.parseInt(aString);
} catch (NumberFormatException e) {
   //there you go
} 
```

特别是在您的代码中：

```
public void actionPerformed(ActionEvent e) {
    String str;
    int no;
    //------------------------------------
    try {
       //lots of ifs here
    } catch (NumberFormatException e) {
        //do something with the exception you caught
    }

    if (e.getSource() == finish) {
        if (message.getText().equals("")) {
            JOptionPane.showMessageDialog(null, "Please Enter the Input First");
        } else {
            leftButtons();

        }
    }
    //rest of your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:12:33.567

你有 try and catch 块：

```
try {
    Integer.parseInt(yourString);
    // do whatever you want 
}
//can be a more specific exception aswell like NullPointer or NumberFormatException
catch(Exception e) {
    System.out.println("wrong format");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:13:12.550

```
try { 
    //codes that thows the exception
} catch(NumberFormatException e) { 
    e.printTrace();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:21:55.973

值得一提的是，对于许多程序员来说，捕获这样的异常是很常见的：

```
try
{
    //something
}
catch(Exception e)
{
    e.printStackTrace();
} 
```

即使他们知道问题是什么，或者不想在 catch 子句中做任何事情。它只是很好的编程，可以成为一个非常有用的诊断工具。

# r - ggplot 使用小饼图作为带有 geom_point 的点

> ID：14215696
> 
> 赞同：13
> 
> 时间：2013-01-08T13:10:03.613
> 
> 标签：r, ggplot2, data-visualization, pie-chart

我想用 ggplot 制作一个图表，如下所示。这个想法是在两个分类变量之间绘制“百分比匹配”。通过改变点的大小很容易接近，但我想知道是否可以制作这些小饼图......

一个示例代码，用于将点的大小作为分数的度量来绘制。

```
temp <- data.frame(Exercise=c(1, 1, 1, 2, 2, 2), 
    Name=c(1, 2, 3, 1, 2, 3), Score=c(0.2, 0.5, 0.3, 0.9, 1.0, 0.6))
ggplot(temp) + geom_point(aes(Exercise, Name, size=Score)) 
```

如何更改此代码以提供接近下图的内容？

![示例图表](../Images/32ab3a75988a19e7ad34d1a1704bc5d1.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T13:37:00.797

使用绘图作为点的形状很棘手。但是，您可以绕过问题并使用 facet_grid() 非常接近您的模型：

```
ggplot(temp) + 
  geom_bar(aes(x=1, y=Score), stat="identity") + 
  facet_grid(Exercise~Name) + 
  coord_polar(theta = "y") +
  scale_y_continuous(breaks = NULL) +
  scale_x_continuous(name = element_blank(), breaks = NULL) 
```

![在此处输入图像描述](../Images/dbbf23a838888d851badc012d76687dd.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-08T13:44:52.420

首先，修改您的原始数据框，使其前 6 行包含 original `score`，后 6 行包含 1 减去 original `score`。然后添加`group`包含这两组级别的列。

```
temp <- data.frame(Exercise=c(1, 1, 1, 2, 2, 2), 
                   Name=c(1, 2, 3, 1, 2, 3), Score=c(0.2, 0.5, 0.3, 0.9, 1.0, 0.6))
temp<-rbind(temp,temp)
temp$Score[7:12]<-1-temp$Score[1:6]
temp$group<-rep(c("poz","neg"),each=6) 
```

`coord_polar()`用于从条形图制作饼图，然后`facet_grid()`制作六个小图。`theme()`用于移除轴、分面标签、网格线。

```
ggplot(temp,aes(x = factor(1),y=Score,fill=group)) + 
  geom_bar(width = 1, stat = "identity") + facet_grid(Exercise~Name)+
  coord_polar(theta = "y") +
  scale_fill_manual(values = c("black", "grey")) +
  theme_bw() + scale_x_discrete("",breaks=NULL) + scale_y_continuous("",breaks=NULL)+
  theme(panel.border=element_blank(),
        strip.text=element_blank(),
        strip.background=element_blank(),
        legend.position="none",
        panel.grid=element_blank()) 
```

![在此处输入图像描述](../Images/632c0941c2395f3a7015f3111ad68a67.png)

# heroku - Paymill OpenSSL 和 Heroku

> ID：14215697
> 
> 赞同：1
> 
> 时间：2013-01-08T13:10:04.740
> 
> 标签：heroku, paymill

我正在构建一个 Rails 3.2.9 应用程序。在这个应用程序中，我使用的是 Ruby gem Paymill。在本地 Mac 上一切正常，但在 Heroku 上出现此错误：

```
OpenSSL::SSL::SSLError (hostname was not match with the server certificate) 
```

有什么问题？

感谢所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:34:13.293

Solved it buy updating the Ruby version I use on Heroku by adding this to my gem file:

*ruby "1.9.3"*

# database - 将文件存储在服务器上（在数据库中或单独存储位置）的最佳方法是哪种？

> ID：14215701
> 
> 赞同：2
> 
> 时间：2013-01-08T13:10:19.250
> 
> 标签：database, jsp, db2, websphere

在我的项目中（类似于`mediafire`and `rapidshare`），客户端可以将文件上传到服务器。我正在使用`DB2 database`和。我正在创建自己的加密算法，因为它是该项目的主要目标。`IBM WAS web server``JSP as server side scripting`

我需要建议是否应该将文件本身存储在数据库中，或者是否应该只存储文件的位置。哪种方法最好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:46:08.407

在数据库中存储 BLOB 有利有弊。

### 好处

*   如今，DBMS 对 BLOB 的支持非常好
*   对 BLOB 的 JDBC 驱动程序支持非常好
*   对“文档”的访问可能发生在事务中。无需担心手动清理或“管家”。如果该行被删除，那么 BLOB 数据也会被删除
*   不必担心文件系统限制。文件系统通常不擅长将数百万个文件存储在单个目录中。您必须将文件分布在多个目录中。
*   一切都备份在一起。如果您进行数据库备份，您将拥有一切，无需担心额外的文件系统备份（但见下文）
*   通过 SQL 轻松访问（无需 FTP 或其他工具）。这种访问已经存在并且受到控制。
*   与其余数据相同的访问控制。无需设置操作系统用户组来限制对 BLOB 文件的访问。

### 缺点

*   无法直接从操作系统访问（如果您需要使用命令行工具操作文件，则会出现问题）
*   不能由例如网络服务器直接提供服务（这可能是性能问题）
*   数据库备份（和恢复）更复杂（因为大小）。增量备份通常在文件系统中更有效
*   DBMS 缓存注意事项
*   不适合高写入场景

您需要自己判断哪个优势和哪个劣势对您更重要。

*我不同意将 BLOB 存储在数据库中总是*一个坏主意的广泛假设。这取决于 - 与许多其他决定一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:37:00.667

众所周知，将文件存储在数据库中——尤其是大文件——通常是个坏主意。这些问题有精彩的解释：

[将文件存储在数据库中而不是文件系统中？](https://stackoverflow.com/questions/8952/storing-a-file-in-a-database-as-opposed-to-the-file-system)

[在 DB 中存储图像 - 是还是不是？](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

我想自己强调几点：

*   将文件存储在 DBMS 中会使您的数据非常大，而大型数据库是维护的地狱（特别是备份）
*   可移植性成为一个问题，因为每个 DBMS 供应商都有自己的 BLOB 文件实现
*   与磁盘访问相比，SELECT 语句与 BLOB 字段相关的性能损失

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:21:19.663

好吧，我的意见是将路径，名称，描述等相关信息存储在数据库中并保留文件evtl。在文件系统上加密，扩展您的系统添加网络服务器比添加数据库更便宜，因为与数据库相比，网络空间便宜，您所需要的就是在您的数据库或服务器名称中添加一个 IP 列，以便您可以解决新的网络服务器。

# apache-flex - 未处理的异步错误事件：。text=Error #2095: flash.net.SharedObject 无法调用回调接收消息

> ID：14215703
> 
> 赞同：0
> 
> 时间：2013-01-08T13:10:26.287
> 
> 标签：apache-flex, chat, rtmp

我正在开发简单的聊天应用程序，我的主类是 asac.as。单击发送按钮时，它给了我异常 Unhandled AsyncErrorEvent:。text=Error #2095: flash.net.SharedObject 无法调用回调receiveMessag，连接成功，不知道为什么会出现错误。chat.asc 是服务器上的聊天文件。谁能告诉我有什么问题？

```
public class ASAC
{
    protected var so:SharedObject;
    protected var chatStr:String;
    protected var nc1:NetConnection;
    protected var myResponder:Responder = new Responder(onReply);
    protected var chatMsgPanel:TextArea;
    public var Vg:Group = new Group()

    public function ASAC()
    {
        super();

    }
    public function addChatPanel():void{

        chatMsgPanel = new TextArea();
        chatMsgPanel.width = 240;
        chatMsgPanel.height = 240;
        chatMsgPanel.x = 2;

        var msgInput:TextInput = new TextInput()
        msgInput.x = 2;
        msgInput.y = chatMsgPanel.height+1;
        msgInput.width = 165

        var msgSendBtn:Button = new Button()
        msgSendBtn.x = msgInput.width + 5;
        msgSendBtn.y = chatMsgPanel.height+1;
        msgSendBtn.label = "Send"
        msgSendBtn.addEventListener(MouseEvent.CLICK, msgSend);

        var roomLabel:Label = new Label();
        roomLabel.text = "Rooms";

        Vg.addElement(chatMsgPanel)
        Vg.addElement(msgInput)
        Vg.addElement(msgSendBtn);
    }
    public function chatConnection():void{

        nc1 = new NetConnection();

        nc1.client = this
        nc1.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);
        nc1.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);
        nc1.addEventListener(AsyncErrorEvent.ASYNC_ERROR, asyncErrorHandler)
        nc1.objectEncoding = flash.net.ObjectEncoding.AMF0;
        nc1.connect("rtmp:/simple_chat");

        SharedObject.defaultObjectEncoding  = flash.net.ObjectEncoding.AMF0;            
        so = SharedObject.getRemote("message", nc1.uri, false);
        so.client = this;
        so.addEventListener(SyncEvent.SYNC, soOnSync);
        so.connect(nc1);

    }
    public function asyncErrorHandler(event:AsyncErrorEvent):void 
    {
        Alert.show("========================= asyncErrorHandler"+"\r");
        //ignore
    }
    private function soOnSync(event:SyncEvent):void
    {
        chatMsgPanel.text += "soOnSync \n";

        for (var prop:String in so.data) 
        {
            chatMsgPanel.text += "prop "+prop+" = "+so.data[prop]+"\n";

        }

    }

    public function netStatusHandler(event:NetStatusEvent):void 
    {
        chatMsgPanel.text += "netStatusHandler";

        for ( var prop:String in event.info)
        {
            chatMsgPanel.text += "prop : "+prop+" = "+event.info[prop]+"\n";

        }

        chatMsgPanel.text += event.info.code+"\n\n";
    }

    private function securityErrorHandler(event:SecurityErrorEvent):void 
    {
        chatMsgPanel.text += "securityErrorHandler \n";

        for (var prop:String in event) 
        {
            chatMsgPanel.text += "prop "+prop+" = "+event[prop]+"\n";
        }

    }
    public function msgSend(e:Event):void{

        nc1.client = this;
        so.client   = this;
        nc1.call("chat.sendMessage", myResponder, chatMsgPanel.text);

    }
    private function onReply(result:Object):void 
    {
        if (!result)    return;

        chatMsgPanel.text += "onReply : resultObj = " + result+"\n";
        for ( var prop:String in result)
        {
            chatMsgPanel.text += "prop : "+prop+" = "+result[prop]+"\n"; 
        }

    }

    }
} 
```

服务器上的聊天.asc

```
try { var dummy = Chat; } catch ( e ) { // #ifndef Chat

/**
 * Chat component class
 */
Chat = function() 
{
    // Get a non persistent shared object for sending broadcasts
    this.message_so = SharedObject.get( "message", false );
}

// send a message to all others participating in the chat session
Chat.prototype.sendMessage = function( mesg ) 
{
    this.message_so.send( "receiveMessage", mesg );
}

chat    = new Chat();

} // #endif 
```

# php - 通过php中的动态多个下拉列表搜索结果

> ID：14215704
> 
> 赞同：-1
> 
> 时间：2013-01-08T13:10:31.350
> 
> 标签：php, jquery, mysql, ajax

请访问此链接： [http ://tndoctors.in/doctors.php](http://tndoctors.in/doctors.php)

在那六个下拉框中没有....（州，地区，位置，医学，专业，等级）

我将所有数据从 SQL DB 提取到所有下拉框。

我创建了像

`STATE (state id & state name) [st.id as primary key]`

`DISTRICT(district id , district name and used state id as foreign key here)`

`location (location id , location name and used district id as foreign key here)`

医药、专业、等级同上............

最后我创建了一张桌子

`DOCTOR_DETAIL ( name , address , reg.no , contact details , age , and specialty , grade , medicine , district and state)`

对于专业、年级、医学、地区和州，我使用上面的表格 id（主键）作为医生 _detail 表中的外键

例如，如果我选择

```
 STATE: TAMILNADU
 DISTRICT: COIMBATORE
 LOCATION : some data
 medicine : allopathy
 speciality : cardiac surgeon
 grade    : some data.... 
```

如果我从下拉列表中选择以上所有内容....并单击“开始”按钮...

我必须得到可能的搜索结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:38:52.317

像这样尝试查询，仅样本

```
select  location , district , state from state as st left join district as dt on(dt.fkstate_id = st.id) left join location as lt on(lt.fkdistrictId = dt.id) where // Where condition 
```

# c# - System.Web.UI.Control.RenderControl 从后台线程调用时失败

> ID：14215711
> 
> 赞同：1
> 
> 时间：2013-01-08T13:10:46.460
> 
> 标签：c#, asp.net, background-thread, rendercontrol

我需要在后台线程中呈现控件并通过邮件发送输出。所以我让这段代码在后台线程中运行：

```
System.Threading.ThreadPool.QueueUserWorkItem(new System.Threading.WaitCallback(sendmail), new Object());
public void sendmail(object o)
{
    UserControl cntrl = new Page().LoadControl("~/mycontrol.ascx") as UserControl;
    StringWriter stringwriter = new StringWriter();
    Html32TextWriter htmlwriter = new Html32TextWriter(stringwriter);
    cntrl.RenderControl(htmlwriter);
    SendEmailUsingNetMail(stringwriter);
}

At runtime I am getting this exception

System.NullReferenceException: Object reference NOT SET TO an instance of an object.
AT System.Web.UI.HtmlControls.HtmlForm.GetActionAttribute()
AT System.Web.UI.HtmlControls.HtmlForm.RenderAttributes(HtmlTextWriter writer)
AT System.Web.UI.HtmlControls.HtmlControl.RenderBeginTag(HtmlTextWriter writer)
AT System.Web.UI.HtmlControls.HtmlContainerControl.Render(HtmlTextWriter writer)
AT System.Web.UI.HtmlControls.HtmlForm.Render(HtmlTextWriter output)
AT System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
AT System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
AT System.Web.UI.HtmlControls.HtmlForm.RenderControl(HtmlTextWriter writer)
AT System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
AT System.Web.UI.Control.RenderChildren(HtmlTextWriter writer)
AT System.Web.UI.Control.Render(HtmlTextWriter writer)
AT System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter)
AT System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter)
AT System.Web.UI.Control.RenderControl(HtmlTextWriter writer)
AT RedBus.RBMail.sendmail(object o) 
```

从 asp.net 请求线程运行时，相同的代码运行良好。是否有可能让这个东西在后台线程本身工作？如果是怎么办？

谢谢，普拉丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:28:19.353

将表单添加到您的页面：

```
System.Threading.ThreadPool.QueueUserWorkItem(new System.Threading.WaitCallback(sendmail), new Object());
public void sendmail(object o)
{

    System.Web.UI.Page() pageHolder = new System.Web.UI.Page() 
              {AppRelativeTemplateSourceDirectory = HttpRuntime.AppDomainAppVirtualPath };
    System.Web.UI.HtmlControls.HtmlForm form = new System.Web.UI.HtmlControls.HtmlForm();
    UserControl cntrl = new Page().LoadControl("~/mycontrol.ascx") as UserControl;
    form.Controls.Add(cntrl );
    pageHolder.Controls.Add(form);

    StringWriter stringwriter = new StringWriter();

    HttpContext.Current.Server.Execute(pageHolder, stringwriter, false);
    SendEmailUsingNetMail(stringwriter);
} 
```

[此外，我编写了一个名为ucajax](http://nuget.org/packages/ucajax)的 OSS 项目来执行此操作，该库旨在与 Web 服务一起使用，但没有理由不能直接调用这些方法来呈现控件。

# python - 将二进制文件读入结构

> ID：14215715
> 
> 赞同：7
> 
> 时间：2013-01-08T13:10:51.403
> 
> 标签：python, binaryfiles

我有一个具有已知格式/结构的二进制文件。

如何将所有二进制数据读入结构数组？

类似的东西（在伪代码中）

```
bytes = read_file(filename)
struct = {'int','int','float','byte[255]'}
data = read_as_struct(bytes, struct)
data[1]
>>> 10,11,10.1,Arr[255] 
```

**编辑：**

到目前为止的解决方案：

```
data = []

fmt   = '=iiiii256i'
fmt_s = '=iiiii'
fmt_spec = '256i'

struct_size = struct.calcsize(fmt)

for i in range(struct_size, len(bytes)-struct_size, struct_size):
    dat1= list(struct.unpack(fmt_s, bytes[i-struct_size:i-1024]))
    dat2= list(struct.unpack(fmt_spec, bytes[i-1024:i]))
    dat1.append(dat2)
    data.append(dat1) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-08T14:10:29.793

实际上，您似乎正在尝试从文件中读取结构列表（或数组）。在 Python 中执行此操作的惯用方法是使用`struct`模块并[`struct.unpack()`](https://docs.python.org/3/library/struct.html#struct.unpack)在循环中调用（如果您事先知道它们的数量，则可以固定次数，或者直到到达文件结尾）并将结果存储在一个`list`. 这是后者的一个例子：

```
import struct

struct_fmt = '=5if255s' # int[5], float, byte[255]
struct_len = struct.calcsize(struct_fmt)
struct_unpack = struct.Struct(struct_fmt).unpack_from

results = []
with open(filename, "rb") as f:
    while True:
        data = f.read(struct_len)
        if not data: break
        s = struct_unpack(data)
        results.append(s) 
```

[使用列表推导](https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions)和简短的[生成器函数](https://docs.python.org/3/glossary.html#term-generator)助手（即`read_chunks()`下面）也可以更简洁地获得相同的结果：

```
def read_chunks(f, length):
    while True:
        data = f.read(length)
        if not data: break
        yield data

with open(filename, "rb") as f:
    results = [struct_unpack(chunk) for chunk in read_chunks(f, struct_len)] 
```

**更新**

实际上，您不需要显式定义如上所示的辅助函数，因为您可以使用 Python 的内置函数在列表推导本身中[`iter()`](https://docs.python.org/3/library/functions.html#iter)动态创建所需的[迭代器对象，如下所示：](https://docs.python.org/3/glossary.html#term-iterator)

```
from functools import partial

with open(filename, "rb") as f:
    results = [struct_unpack(chunk) for chunk in iter(partial(f.read, struct_len), b'')] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-08T13:12:46.943

使用[`struct`模块](http://docs.python.org/3/library/struct.html)；您需要以使用该库记录的字符串格式定义类型：

```
struct.unpack('=HHf255s', bytes) 
```

上面的示例需要原生字节顺序、两个无符号短裤、一个浮点数和一个 255 个字符的字符串。

要遍历已经完全读取的`bytes`字符串，我会使用`itertools`; 我在这里改编了一个方便的[石斑鱼食谱](https://stackoverflow.com/questions/434287/what-is-the-most-pythonic-way-to-iterate-over-a-list-in-chunks)：

```
from itertools import izip_longest, imap
from struct import unpack, calcsize

fmt_s = '=5i'
fmt_spec = '=256i'
size_s = calcsize(fmt_s)
size = size_s + calcsize(fmt_spec)

def chunked(iterable, n, fillvalue=''):
    args = [iter(iterable)] * n
    return imap(''.join, izip_longest(*args, fillvalue=fillvalue))

data = [unpack(fmt_s, section[:size_s]) + (unpack(fmt_spec, section[size_s:]),)
    for section in chunked(bytes, size)] 
```

这会产生元组而不是列表，但如果您必须进行调整，它很容易：

```
data = [list(unpack(fmt_s, section[:size_s])) + [list(unpack(fmt_spec, section[size_s:]))]
    for section in chunked(bytes, size)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:18:47.250

添加评论

```
import struct 
```

首先只需将二进制文件读入数组

```
mbr = file('mbrcontent', 'rb').read() 
```

所以你可以只取数组的一部分

```
partition_table = mbr[446:510] 
```

然后将其解压缩为整数

```
signature = struct.unpack('<H', mbr[510:512])[0] 
```

一个更复杂的例子

```
little_endian = (signature == 0xaa55) # should be True 
print "Little endian:", little_endian 
PART_FMT = (little_endian and '<' or '>') + ( 
"B" # status (0x80 = bootable (active), 0x00 = non-bootable) 
# CHS of first block 
"B" # Head 
"B" # Sector is in bits 5; bits 9 of cylinder are in bits 7-6 
"B" # bits 7-0 of cylinder 
"B" # partition type 
# CHS of last block 
"B" # Head 
"B" # Sector is in bits 5; bits 9 of cylinder are in bits 7-6 
"B" # bits 7-0 of cylinder 
"L" # LBA of first sector in the partition 
"L" # number of blocks in partition, in little-endian format 
) 

PART_SIZE = 16 
fmt_size = struct.calcsize(PART_FMT) 
# sanity check expectations 
assert fmt_size == PART_SIZE, "Partition format string is %i bytes, not %i" % (fmt_size, PART_SIZE) 

def cyl_sector(sector_cyl, cylinder7_0): 
    sector = sector_cyl & 0x1F # bits 5-0 

    # bits 7-6 of sector_cyl contain bits 9-8 of the cylinder 
    cyl_high = (sector_cyl >> 5) & 0x03 
    cyl = (cyl_high << 8) | cylinder7_0 
    return sector, cyl 

#I have corrected the indentation, but the change is refused because less than 6 characters, so I am adding this useful comment.
for partition in range(4): 
    print "Partition #%i" % partition, 
    offset = PART_SIZE * partition 
    (status, start_head, start_sector_cyl, start_cyl7_0, part_type, end_head, end_sector_cyl, end_cyl7_0, 
    lba, blocks ) = struct.unpack( PART_FMT,partition_table[offset:offset + PART_SIZE]) 
    if status == 0x80: 
        print "Bootable", 
    elif status: 
        print "Unknown status [%s]" % hex(status), 
        print "Type=0x%x" % part_type 
        start = (start_head,) + cyl_sector(start_sector_cyl, start_cyl7_0) 
        end = (end_head,) + cyl_sector(end_sector_cyl, end_cyl7_0) 
        print " (Start: Heads:%i\tCyl:%i\tSect:%i)" % start 
        print " (End: Heads:%i\tCyl:%i\tSect:%i)" % end 
        print " LBA:", lba 
        print " Blocks:", blocks 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-04T08:14:13.520

```
import os, re
import functools
import ctypes
from ctypes import string_at, byref, sizeof, cast, POINTER, pointer, create_string_buffer, memmove
import numpy as np
import pandas as pd

class _StructBase(ctypes.Structure):
    __type__ = 0
    _fields_ = []

    @classmethod
    def Offsetof(cls, field):
        pattern = '(?P<field>\w+)\[(?P<idx>\d+)\]'

        mat = re.match(pattern, field)
        if mat:
            fields = dict(cls.Fields())
            f = mat.groupdict()['field']
            idx = mat.groupdict()['idx']
            return cls.Offsetof(f) + int(idx) * ctypes.sizeof(fields[field])
        else:
            return getattr(cls, field).offset

    @classmethod
    def DType(cls):
        map = {
            ctypes.c_byte: np.byte,
            ctypes.c_ubyte: np.ubyte,
            ctypes.c_char: np.ubyte,

            ctypes.c_int8: np.int8,
            ctypes.c_int16: np.int16,
            ctypes.c_int32: np.int32,
            ctypes.c_int64: np.int64,

            ctypes.c_uint8: np.uint8,
            ctypes.c_uint16: np.uint16,
            ctypes.c_uint32: np.uint32,
            ctypes.c_uint64: np.uint64,

            ctypes.c_float: np.float32,
            ctypes.c_double: np.float64,
        }
        res = []

        for k, v in cls.Fields():
            if hasattr(v, '_length_'):
                if v._type_ != ctypes.c_char:
                    for i in range(v._length):
                        res.append((k, map[v], cls.Offsetof(k)))
                else:
                    res.append((k, 'S%d' % v._length_, cls.Offsetof(k)))
            else:
                res.append((k, map[v], cls.Offsetof(k)))
        res = pd.DataFrame(res, columns=['name', 'format', 'offset'])
        return np.dtype({
            'names': res['name'],
            'formats': res['format'],
            'offsets': res['offset'],
        })

    @classmethod
    def Attr(cls):
        fields = cls._fields_
        res = []
        for attr, tp in fields:
            if str(tp).find('_Array_') > 0 and str(tp).find('char_Array_') < 0:
                for i in range(tp._length_):
                    res.append((attr + '[%s]' % str(i), tp._type_))
            else:
                res.append((attr, tp))
        return res

    @classmethod
    def Fields(cls, notype=False):
        res = [cls.Attr()]
        cur_cls = cls
        while True:
            cur_cls = cur_cls.__bases__[0]
            if cur_cls == ctypes.Structure:
                break
            res.append(cur_cls.Attr())
        if notype:
            return [k for k, v in functools.reduce(list.__add__, reversed(res), [])]
        else:
            return functools.reduce(list.__add__, reversed(res), [])

    @classmethod
    def size(cls):
        return sizeof(cls)

    @classmethod
    def from_struct_binary(cls, path, max_count=2 ** 32, decode=True):
        print(os.path.getsize(path), cls.size())
        assert os.path.getsize(path) % cls.size() == 0
        size = os.path.getsize(path) // cls.size()
        size = min(size, max_count)

        index = range(size)
        array = np.fromfile(path, dtype=cls.DType(), count=size)

        df = pd.DataFrame(array, index=index)
        for attr, tp in eval(str(cls.DType())):
            if re.match('S\d+', tp) is not None and decode:
                try:
                    df[attr] = df[attr].map(lambda x: x.decode("utf-8"))
                except:
                    df[attr] = df[attr].map(lambda x: x.decode("gbk"))
        return df

class StructBase(_StructBase):
    _fields_ = [
        ('Type', ctypes.c_uint32),
    ]

class IndexStruct(StructBase):
    _fields_ = [
        ('Seq', ctypes.c_uint32),
        ('ExID', ctypes.c_char * 8),
        ('SecID', ctypes.c_char * 8),
        ('SecName', ctypes.c_char * 16),
        ('SourceID', ctypes.c_int32),
        ('Time', ctypes.c_uint32),
        ('PreClose', ctypes.c_uint32),
        ('Open', ctypes.c_uint32),
        ('High', ctypes.c_uint32),
        ('Low', ctypes.c_uint32),
        ('Match', ctypes.c_uint32),
    ]

df = IndexStruct.from_struct_binary('your path')
print(df) 
```

# wordpress - 如何通过 Wordpress 发送匿名电子邮件？

> ID：14215719
> 
> 赞同：0
> 
> 时间：2013-01-08T13:11:07.210
> 
> 标签：wordpress, email, anonymous

我有一个客户，他有一个犯罪阻止者的网站。他们希望为访客提供一种提交匿名犯罪提示的方法，然后将其转发到当地警察局预先建立的电子邮件地址。

完成此任务的最佳/最简单方法是什么？发件人的 IP 地址需要隐藏。我的客户还需要能够提取报告，显示提交和转发了多少提示。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:44:55.917

虽然设置提交到电子邮件地址的联系表单相当简单（只需使用出色的 ContactForm7，正如 rrikesh 的回答所建议的那样）。然而，正确地匿名（尤其是针对拥有同样多权力和资源的政党）是很棘手的。您需要清楚您可以提供的匿名级别。日志文件、文档元数据或您的 ISP 很容易泄露大量信息。

这是两个具有不同方法的项目。它们都不是您问题的现成解决方案，但仍然相关：

### [隐私框](https://privacybox.de/index.en.html)：

这是由德国隐私基金会运营的网络服务。它基本上是一个消息中继，就像你想要的那样，只是用户必须信任基金会，而不是你。这种模式高度依赖于提供这种服务的机构。我敢肯定还有其他类似的美国服务。

### [简报](https://github.com/ZeitOnline/briefkasten)：

*德国报纸Die ZEIT*使用的开源软件工具。

> 一个相当安全的网络应用程序，用于匿名提交内容。它允许上传附件，然后对可能危及提交者身份的许多元数据进行清理。接下来，经过清理的文件通过 GPG 加密并通过电子邮件发送到预先配置的收件人列表。然后从服务器的文件系统中删除原始（可能是“脏”）文件。因此，有权访问服务器的管理员既不能访问任何提交，也不能任何接收者访问未经处理的原材料。

这是一种尝试自动化关键步骤，从提交中删除任何识别数据并对其进行加密，因此只有预期的收件人才能访问它。

不过，您必须自己主持。它是一个 Python 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:23:40.357

A simple contact form can be used. It's up to the developer's trust to hide the IP. The submitter won't see anything what is being done using PHP.

You can then update a database with the tips being posted before sending the mails.

In terms of development, you can use a plugin such as [Contact Form 7](http://wordpress.org/extend/plugins/contact-form-7/) and then use its [hooks](http://xaviesteve.com/3298/wordpress-contact-form-7-hook-unofficial-developer-documentation-and-examples/) to save the tips submitted before sending the mails.

# c# - C# vs Java HmacSHA1 然后是 base64

> ID：14215726
> 
> 赞同：5
> 
> 时间：2013-01-08T13:11:34.650
> 
> 标签：c#, java, base64, hmacsha1

我有一个 java 代码示例，可以使用 HMAC-SHA1 算法（RFC 2104.）计算摘要，然后使用 Base64 编码（RFC 2045）进行编码。

这是java代码

```
public static String buildDigest(String key, String idString) throws SignatureException {

 try {
    String algorithm = "HmacSHA1";
    Charset charset = Charset.forName("utf-8");
    SecretKeySpec signingKey = new SecretKeySpec(key.getBytes(), algorithm);
    Mac mac = Mac.getInstance(algorithm);
    mac.init(signingKey);
    return new String(Base64.encodeBase64(mac.doFinal(idString.getBytes(charset))), charset);
  } catch (Exception e) {
    throw new SignatureException("Failed to generate HMAC : " + e.getMessage());
  }
} 
```

我在 Stack Overflow 中找到了答案，所以这里是 C# 代码

```
 private string EncodeHMAC(string input, byte[] key)
    {
        HMACSHA1 myhmacsha1 = new HMACSHA1(key);
        byte[] byteArray = Encoding.UTF8.GetBytes(input);
       // MemoryStream stream = new MemoryStream(byteArray);
        var hashValue = myhmacsha1.ComputeHash(byteArray);
        return hashValue.Aggregate("", (s, e) => s + String.Format("{0:x2}", e), s => s);
    }

    private string EncodeTo64(string toEncode)
    {
        byte[] toEncodeAsBytes = System.Text.UTF8Encoding.UTF8.GetBytes(toEncode);

        string returnValue = System.Convert.ToBase64String(toEncodeAsBytes);

        return returnValue;
    } 
```

我没有得到[我正在关注的教程中显示的正确结果](http://api.summon.serialssolutions.com/help/api/authentication)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T13:48:41.333

尝试这个：

```
// This method will return the base 64 encoded string using the given input and key.
private string EncodeHMAC(string input, byte[] key)
{
    HMACSHA1 hmac = new HMACSHA1(key);
    byte[] stringBytes = Encoding.UTF8.GetBytes(input);
    byte[] hashedValue = hmac.ComputeHash(stringBytes);
    return Convert.ToBase64String(hashedValue);
} 
```

我认为您没有正确地将散列值转换为 base 64 字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T14:21:56.940

我使用此函数来实现 REST Web 服务调用的身份验证。发送者和接收者使用相同的编码很重要。

不幸的是，我花了一段时间才找到与这个 C# 版本匹配的 PHP HAMAC 实现。

```
private bool ValidateHash(String uid, String hash, DataToSign data) {
        StringBuilder strToSign = new StringBuilder();

        strToSign.Append(data.HttpMethod + '\n');
        strToSign.Append(data.Date.ToString("r") + '\n');
        strToSign.Append(data.Uri);

        Byte[] secretBytes = UTF8Encoding.UTF8.GetBytes(this._secretKey);
        HMACSHA1 hmac = new HMACSHA1(secretBytes);

        Byte[] dataBytes = UTF8Encoding.UTF8.GetBytes(strToSign.ToString());
        Byte[] calcHash = hmac.ComputeHash(dataBytes);
        String calcHashString = Convert.ToBase64String(calcHash);

        if (calcHashString.Equals(hash)) {
            if (log.IsDebugEnabled) log.Debug(uid + " - [ValidateHash] HMAC is valid.");
            return true;
        }
        return false;
    } 
```

希望有帮助！

# jquery - jQuery Countdown has incorrect date

> ID：14215731
> 
> 赞同：2
> 
> 时间：2013-01-08T13:11:40.293
> 
> 标签：jquery, jquery-countdown

I'm working with the countdown on this page [http://chips.be-different.co.uk/](http://chips.be-different.co.uk/)

The countdown code (to 18th February) is:

```
 $('#countdown').countdown({until: new Date(2013, 02, 18), format: 'DHMS', labels: ['Years', 'Months', 'Weeks', 'Days', 'Hours', 'Mins', 'Secs'], labels1: ['Year', 'Month', 'Week', 'Day', 'Hour', 'Min', 'Sec'], expiryText: '', layout: '<div class="section"><div class="value">{dnn}</div><div class="label">{dl}</div></div><div class="section no-space"><div class="value">:</div></div><div class="section"><div class="value">{hnn}</div><div class="label">{hl}</div></div><div class="section no-space"><div class="value">:</div></div><div class="section"><div class="value">{mnn}</div><div class="label">{ml}</div></div><div class="section no-space"><div class="value">:</div></div><div class="section"><div class="value">{snn}</div><div class="label">{sl}</div></div>'}); 
```

yet it shows 68 days countdown, which is definitely not right!

Why is this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:16:14.307

`new Date(2013, 2, 18)` is Mon Mar 18 2013 00:00:00 GMT+0100\.

Months start counting in javascript at `0`, so use `new Date(2013, 1, 18)` if you want february 18th :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:15:22.203

Remember that months in `Date` are 0 based, 0 = January. So it's correct

# ruby-on-rails-3 - REST API 调用的 Rspec

> ID：14215733
> 
> 赞同：0
> 
> 时间：2013-01-08T13:11:44.860
> 
> 标签：ruby-on-rails-3, rspec, rspec2, rspec-rails

我正在尝试为 http 调用实现 rspec……但到目前为止我还没有成功……

```
http = Net::HTTP.new("secured site url", "443")
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE  
response = http.get("/query params",initheader = {'Accept' =>'application/xml'})
return response 
```

我需要一个 rspec 。虽然我是新手，但我尝试了很多方法，但它说预期：1 次收到：0 次

这是我写的所有内容：

```
it "should be success" do
  @mock_http = mock("http")
  @mock_http.should_receive(:new).with("secured site url")
end 
```

如果我错了，请纠正我..任何帮助表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:38:43.923

当然，您必须激活调用新语句的方法，这样您的代码应该类似于：

```
it "should be success" do
  @mock_http = mock("http")
  Net::HTTP.should_receive(:new).with("secured site url", "443")
  some_method
end

def some_method
  http = Net::HTTP.new("secured site url", "443")
  http.use_ssl = true
  http.verify_mode = OpenSSL::SSL::VERIFY_NONE  
  response = http.get("/query params",initheader = {'Accept' =>'application/xml'})
  return response 
end 
```

# c - C struct->struct->struct->element（通常）分段错误

> ID：14215738
> 
> 赞同：1
> 
> 时间：2013-01-08T13:12:04.573
> 
> 标签：c, pointers, struct, segmentation-fault

这是一个奇怪的事情：

我有一个结构，它包含指向相同类型结构的指针和指向其他类型结构的指针，以及其他一些值。

```
struct animal {
    struct animal * father;
    struct race * rc;
    int age;
};

struct race {
    char colour;
}; 
```

当我通过父亲访问价值时代时，一切似乎都很好：

```
animal->father->age 
```

但是当我尝试访问父亲种族的颜色时：

```
animal->father->rc->colour 
```

我得到“分段错误”。但是，如果每次都发生，那就太容易了。它有时会，有时会不起作用，我不知道是什么因素使它不稳定。另一件总是有效的事情是：

```
animal->rc->colour 
```

是否有可能您最多可以连接两个指针，然后可能会出现问题？我使用最新的 gcc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:38:54.957

如果它有时可以正常工作而在其他时候不能正常工作，那么几乎可以肯定问题出在内存分配上。如果您可以从声明中发布您如何分配值，您应该很快就能在这里获得帮助。

# android - 在 Android 浏览器中创建链接调用意图接收器

> ID：14215743
> 
> 赞同：-1
> 
> 时间：2013-01-08T13:12:13.717
> 
> 标签：android, android-intent, android-browser

我想在 Android 浏览器中创建一个链接，以便能够调用接收器。

我阅读[了这篇](https://stackoverflow.com/questions/3469908/make-a-link-in-the-android-browser-start-up-my-app/3472228)关于如何使链接启动我的应用程序的帖子，并尝试为我的启动接收器接收器做同样的事情，但它没有用。是否可以？

我的接收器配置如下：

```
 <receiver
        android:name="com.wiziapp.wiziappweb.app.MyStartupIntentReceiver"
        android:label="@string/search" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />

            <category android:name="android.intent.category.HOME" />
        </intent-filter>
        <intent-filter>
            <data android:scheme="myapp" />

            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
        </intent-filter>
    </receiver> 
```

我用来测试它的链接是：

```
<a href=myapp://enable_notification">Enable notification</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:46:10.903

> 我想在 Android 浏览器中创建一个链接，以便能够调用接收器。

这是不可能的。

> 我的接收器配置如下：

`ACTION_VIEW`与`startActivity()`, not一起使用`sendBroadcast()`，因此您的第二个`<intent-filter>`不太可能被使用。

> 我用来测试它的链接是

链接只调用`startActivity()`，不调用`sendBroadcast()`。欢迎您将链接指向`Theme.NoDisplay`发送广播然后调用`finish()`离开的活动。

# c# - Twitter更新时在Win8中发送推送通知

> ID：14215745
> 
> 赞同：0
> 
> 时间：2013-01-08T13:12:32.323
> 
> 标签：c#, twitter, windows-8, toast

**你好，SOF，**

好的。因此，我目前的任务是在某些 Twitter 用户更新他们的状态时，或者当 Twitter 主题标签收到新的推文时，**启用推送/toast 通知**到 Windows 8。所以，这个想法基本上是你可以关注某些 Twitter 用户和主题标签，我已经实现了*（并且他们正在工作）*。我现在想要的是添加这个项目的 toast 通知部分。

你将如何开始实施这个？我假设我会做类似的事情：
**1.**找到一种方法让应用程序自动检查更新，而不是让用户在应用程序中使用“更新”按钮来更新不同的列表视图/网格视图。当应用程序关闭时，这也必须工作。
**2.**使用 XML 或类似技术将 X 条推文保存到一个文件中，然后，如果用户或主题标签有新推文，则让应用程序在后台下载推文，然后创建一个吐司通知。<- 可能需要我创建两个包含推文的文件，并将它们相互比较（？）。

但是，你们中的任何一位 Win8 专家都知道更好的方法吗？

Toast 通知的示例图像： ![在此处输入图像描述](../Images/ce46e66b74c711cfd954e9844189fcce.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:07:28.697

有几点值得一提：

*   Windows 8 应用商店应用程序不会在后台运行，它们会被删除。
*   您可以创建后台任务，但它们仅在最短时间每 30 分钟运行一次。
*   后台任务的进程和下载时间有限。

话虽如此，最好的解决方案是检查 Azure 机器中的新推文并将推送通知发送到应用程序。这就是这种事情的完成方式。

如果您不想为 Azure VM 付费，可以使用 Azure 移动服务来完成，但目前每 15 分钟限制 10 个后台任务。

# c# - Newtonsoft.Json.JsonReaderException：未终止的字符串。预期的分隔符

> ID：14215748
> 
> 赞同：8
> 
> 时间：2013-01-08T13:12:36.030
> 
> 标签：c#, json, exception, json.net

我在解析包含 JSON 的字符串时收到此异常：

```
Newtonsoft.Json.JsonReaderException: Unterminated string. Expected delimiter: ". Path '[114].var2', line 1, position 431602. 
```

所以我去了那个（431602）的位置，发现它在这里：（...）lZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqK* *jp* *KWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW1（...）

所以它只是简单的“jp”字符，不应该有什么问题。

此异常的原因可能是什么？

编辑更具体地说，我还放了一个带有几个变量的整个字符串：

```
"var1":"946","var2":"\/9j\/4AAQSkZJRgABAQAAAQABAAD\/\/gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2NjIpLCBxdWFsaXR5ID0gNjAK\/9sAQwANCQoLCggNCwoLDg4NDxMgFRMSEhMnHB4XIC4pMTAuKS0sMzpKPjM2RjcsLUBXQUZMTlJTUjI+WmFaUGBKUVJP\/9sAQwEODg4TERMmFRUmTzUtNU9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09P\/8AAEQgAeABHAwEiAAIRAQMRAf\/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC\/\/EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29\/j5+v\/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC\/\/EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29\/j5+v\/aAAwDAQACEQMRAD8A9OooooAKTNLTaAI7m5jtoWllYKqjOTXmniTxrqMt00elXflQDg4TB\/765P8AKtPxnqdxc67HokZEVuqB55O+OvH4Vz2qalbQCAWiQqpBwyRAuADjC5GAM5GepwT6Z5pVJqpY0UVy3LXh\/wAU65JGySqb0K3LLOfMH4ZyR+FbMXj0218kN5bs0R4f++h\/TP06+9cdZxWWqyyxo0qXuCyFpMlz+X+FQarMb6CByzedANkin7w\/Hrjg9elTG\/tLjaXKe32tzDd20dxbSLJFIMqw7iiuR8B6r51qtm5XfGigj1P+Qf0orohPmRm1Y7OiiirEFIRS0UAecfEbTJYro6tbSNuKKkir2UgjP8qwRbO+mXiwxxvP+6iw+Pkwoyee3J59q7vxaxt7uGaZN9q8ZjlX\/Zzz\/NT+BrkBJZRXzI8jQMmUVuAJY+wOeOnuCPeuKrKSk1Y2gkZmm2lrZ6haJPbOlwSHExlwu0dWwPboKuqqy+JYbmCNSk12UY5yGRdvzfmrnNYpihuL1ks7Se4cnasa5Kg\/zIq3dx30t+mm26CCWNNrFWwIUx8xJBOBj3\/U05Ru736AnpYteFUuJvFSRwybtxZ2Zc4A2HA\/L+dFdJ4PmtBrMOn6YhaCBGaSXH3jjGfzx+Aoram3JXtYzluegUUUVsSFFFFAFa\/tYby2MM65U9D6GvMfEeg32m5CwPc2n8EkQJaP29cV6fdSJDE0sjYVRkmuD1fxHqU8p\/s+wl8kHALxMS3vjtWU7XuUmznbO38S6lbFIL2SK16Zf5N35DJq9b+FobVDJe3ny9X28A\/UmmNe+J7kbUhkQH\/pkF\/nTU0K8um36ret\/uht5\/wFcbk1vJRXlqzVK\/S50\/guazbVZrfTYx5MURLuBwTkADPfvRWv4Q02HT9PdoI9okbgnknHcmiuyilyKxlPc36KKK1JCmuyopZ2CqoySTgAU6ue8TRXOpQfYLW5WCJj++bBJb\/ZHt61FSpGmryY1FvRFW+8V6O0m37aCq9AqMc\/pVCfxppUIIjiuJPooA\/U1Vj8D2xOZ72Vv91Qv+NWH8JaVFg7ZpSB\/G\/+GK8qpLDSlzSbZulO1kZVz4xspSfL0yTPr52P6VWSbWtXlSGxs3gWRgA+Mf8Ajx\/pW0H0XSG+Y2sJHpgt\/jXReG5YdQR9QhVvKyUiZlxu9SP5fnV0VGU1yQ07sJNpayNextUsrGG1jJKxIFyep9z9etFT0V6pzhRRUNzOtvEZH+gA6k+lJtJXYGP4o8RQ6FbqCplnk+6gbBA9T\/n+VcHP42vHYmC2hjz\/AHiWP9K67UNGsLqd7u\/Rpp5OTuc4HoAB2FUhDodgculnAR\/e27v8a82riaVR\/C2bxhJLexzaa\/r1\/wDLA8p9oYv\/AK2aVtN8QXn+uFwQevnS4A\/AmuifxTpFvlI5Hl9o0P8AXFY194xIJFrZ\/RpG\/oP8aIyqv+HTS\/r5A1Hqw0vwTJdXiJe3ACnlliGePqf8K9OtreK0to7e3QJFEoVVHYCuf8Epezaa2o6gQHuT+6QLgKg7\/j\/hXS13UVNR996mUmr6BRRRWpIyWRIYnklYIiAszE4AA6mvNtW8Q6rqmoNJpqzrbR8QqkeSf9o8dT+ldfrOrWkbtBJcwKkf+s3uBk9l\/qfwrFm8WaRCNrXW8+iKT\/8AWrjrV3fkjG5rGGl27HJyaf4m1FyZRdFT2kk2j8iafB4Ov2cefPDGPYlj\/n8a2LjxnZKD5FvPJ\/vYUf1rHn8Z3jt+4too\/wDeJY\/0rJSxL+GKRVqa3dzctfB9lHg3E80p9BhR\/X+dalloel\/bkt4LWLcBuct8zBfXmuPW58R6mm5Tc7D\/AHR5a\/nxXoXhHQjounE3BDXlwd0zZzj0XPt\/PNOFCpOXvzv5ITmktEboAVQqjAAwAKWiivQMQooooA8417wlc3OsX00U0McUkvmDOc8gE8Y9SazIfCUCNi5upH9kUL\/PNdZ411S60ia3e3ijdLhSpLg8Ffoff9K8+udc1i7lKwswz2hj\/wAmuKca7k7OyNouCWqOpt9A0mFMm3Lkd3cn\/wCtT2uNF0\/7rWkLDsoG79Oa5BNL1q95m8zB7zSf061p6d4OmnuESa5XJONsa5\/U1g6Uft1LlqT6RO18OXUWsXLSW6u1tbEZkYYDP2A+nX8q6qqek6bb6Tp0VlajCRjknqx7k1crvpUo0o2iYSk5O7CiiitSQooooAoavaLc26ExLI0ThgCufY\/zrEOi39xIf3ccMeeNx7fQUUVzzoRqTvIuM3FaFqLw1ggy3ZI7hEx+pP8AStOy0u2sm3xb2fGNznOKKKuNGnHVITnJ7su0UUVqSJRmiigAzRRRQB\/\/2Q==","var3":"77241" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:22:37.047

我注意到这似乎是一个 base64 编码的 JPEG。在大多数情况下，让您的服务器发回 jpeg 而不是 JSON 会更好、更容易。

```
public ActionResult ShowImage() 
{
    var file = Server.MapPath("~/App_Data/UserUpload/asd.png");
    return File(file, "image/png", Path.GetFileName(file));
} 
```

[要查看原始来源，请点击此链接。](https://stackoverflow.com/questions/6225485/asp-net-mvc3-image-loading-through-controller)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T18:40:25.020

故障排除建议：

如果您无法放置整个字符串，您可能希望将其变小以隔离错误。

尝试一次删除 aa 块字符（我会使用二进制左/右半实验方法），直到它停止中断。然后仔细看看坏的一半。如果你可以得到足够小的坏一半并且看不到错误，请发布它。

我猜错误给出的列的计算方式与您计算它们的方式不同。

# c# - 在正则内联表达式中访问数据绑定变量

> ID：14215750
> 
> 赞同：3
> 
> 时间：2013-01-08T13:12:40.427
> 
> 标签：c#, asp.net

我正在尝试访问常规 C# 内联表达式中的数据绑定变量。

我希望有某种方法可以使用该`Eval()`命令访问它，但是您不能在常规的内联代码块中使用它。（我的意思是`<% %>`标签）。

**注意**：下面的内联代码不完整，我事先设置了布尔值（IsCommented）。

```
<%
    if (IsCommented)
        Response.Write("<a href='#' onclick='Comment(" + Eval("commentid") + "', $(this)); return false;' class='btn btn-info'>Comment</a>");
    else
        Response.Write("<a href='#' onclick='Comment(" + Eval("commentid") + "', $(this)); return false;' class='btn btn-inverse'>Commented!</a>");
%> 
```

这是可能吗？

（请注意，我将所有内容都包含在 a 中`ListView`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:22:39.683

我没有正确回答您的问题，

但是您是否正在寻找类似的东西，或者这会解决您的问题

```
<%if (IsCommented) {%>
        <a href='#' onclick='Comment('<%#Eval("commentid")%>', $(this)); return false;' class='btn btn-info'>Comment</a>;
    <%}else{%>
        <a href='#' onclick='Comment('<%#Eval("commentid")%>', $(this)); return false;' class='btn btn-inverse'>Commented!</a>";
<%}%> 
```

# java - 如何通过环绕构造函数来替换类型的实例？

> ID：14215754
> 
> 赞同：4
> 
> 时间：2013-01-08T13:12:56.277
> 
> 标签：java, spring, aspectj

我有一个旧版库，可以创建`BeanProxy`. 不幸的是，这个实现有一个我想修复的缺陷。由于我不想开始使用已修补的库，因此我想创建一个 Aspect 包装构造并返回我修改后的子类型`BeanProxy`的实例。`BeanProxy`

我创建了以下方面，并且每当创建新实例时都会正确编织和调用它`BeanProxy`：

```
@Aspect
public class CWebBeanProxyInjectingAspect {

    @Pointcut("execution(public flex.messaging.io.BeanProxy.new(..))")
    void createBeanProxy() {}

    @Around("createBeanProxy()")
    public Object createAlternateBeanProxy(final ProceedingJoinPoint pjp) throws Throwable {
        System.out.println("createAlternateBeanProxy");
        final Object result = pjp.proceed();
        System.out.println(result);
        return result;
    }
} 
```

不幸`result`的是总是`null`......我做错了什么？我必须改变什么？我应该提一下，我正在使用 AspectJ LoadTimeWeaving 和 spring-instrument-3.1.1.RELEASE.jar 作为代理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:07:09.233

构造函数`execution`不返回任何东西 (is `void`)。如果要返回创建的对象，`call`请在切入点中使用：

```
 @Pointcut("call(public flex.messaging.io.BeanProxy.new(..))")
    void createBeanProxy() {} 
```

请参阅[http://www.eclipse.org/aspectj/doc/next/progguide/semantics-joinPoints.html](http://www.eclipse.org/aspectj/doc/next/progguide/semantics-joinPoints.html)中的 构造*函数调用*和*构造函数执行*

# batch-file - 用于特定服务的 CPU 利用率百分比的 Windows 命令

> ID：14215756
> 
> 赞同：8
> 
> 时间：2013-01-08T13:13:01.007
> 
> 标签：batch-file, batch-processing

有没有办法从 Windows 上的脚本中获取特定服务的 CPU 利用率？我知道`wmic cpu get LoadPercentage`会为整个系统提供 CPU 利用率，但是否有可能为 winword.exe 等特定程序获取它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T18:30:56.030

[是的，有可能](https://stackoverflow.com/questions/206805/tasklist-cpu-usage)。

这个 wmic 命令打印所有进程的 CPU 使用率。然后，您可以通过管道将`findstr`其过滤为特定进程（使用 flag `/c:<process name>`）。

```
wmic path Win32_PerfFormattedData_PerfProc_Process get Name,PercentProcessorTime 
```

执行`help findstr`并`help find`从命令行查看更多过滤列表的方法。

例如：

```
C:\> wmic path Win32_PerfFormattedData_PerfProc_Process get Name,PercentProcessorTime | findstr /i /c:chrome
chrome                  24
chrome#1                0
chrome#2                0
chrome#3                0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:44:23.107

要做到这一点，最简单的是使用 MS 性能工具包，它可以聘请 ETW 来跟踪很多指标，包括 CPU 使用率。安装性能工具包后（现在在 Windows SDK 中）。

执行以下命令：

```
1\. set _NT_SYMBOL_PATH= srv*C:\symbols*http://msdl.microsoft.com/downloads/symbols 
2\. open trace via:  xperf -on base
3\. Excute any program for some times.
4\. output the result:  xperf –d myprofile.etl
5\. launch the graphics UI to analysis :  xperfview myprofile.etl 
```

与 WMI 不同的是，Xperf 是一个更复杂的工具包，可以提供更详细的 CPU 使用情况，不仅包括进程，还包括函数调用消耗、CPU 状态变化等。（这就是我们在第一步导入 Windows 符号的原因）。

另一个好处是 Xperf 租用 ETW，而 ETW 对 CPU 的影响很小。

# android - 增加 viewpager 平滑滚动持续时间

> ID：14215757
> 
> 赞同：6
> 
> 时间：2013-01-08T13:13:05.270
> 
> 标签：android, android-viewpager, android-animation

我正在使用一个`ViewPager`子类`MyPager`（几乎相同），并且我使用它的`setCurrentItem(int index, boolean smooth)`方法，将 smooth 参数设置为 true。它实际上比将参数设置为“false”要平滑一些，但我想增加动画持续时间以使过渡更加明显。

我从不同的帖子中收集了一些信息，[这个解决方案](https://stackoverflow.com/questions/10812009/change-viewpager-animation-duration-when-sliding-programmatically/14179739#comment19704416_14179739)看起来很完美。我最终得到了这段代码”

MyPager.java：

```
public class MyPager extends ViewPager {
    public MyPager(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.enabled = true;
        postInitViewPager();
    }

    private ScrollerCustomDuration mScroller = null;

    /**
     * Override the Scroller instance with our own class so we can change the
     * duration
     */
    private void postInitViewPager() {
        try {
             Class<?> viewpager = ViewPager.class;
                Field scroller = viewpager.getDeclaredField("mScroller");
                scroller.setAccessible(true);
                Field interpolator = viewpager.getDeclaredField("sInterpolator");
                interpolator.setAccessible(true);

                mScroller = new ScrollerCustomDuration(getContext(),
                        (Interpolator) interpolator.get(null));
                scroller.set(this, mScroller);
        } catch (Exception e) {
            Log.e("MyPager", e.getMessage());
        }
    }

    /**
     * Set the factor by which the duration will change
     */
    public void setScrollDurationFactor(double scrollFactor) {
        mScroller.setScrollDurationFactor(scrollFactor);
    }
} 
```

ScrollerCustomDuration.java

```
public class ScrollerCustomDuration extends Scroller {
    private double mScrollFactor = 2;

    public ScrollerCustomDuration(Context context) {
        super(context);
    }

    public ScrollerCustomDuration(Context context, Interpolator interpolator) {
        super(context, interpolator);
    }

    public ScrollerCustomDuration(Context context,
        Interpolator interpolator, boolean flywheel) {
        super(context, interpolator, flywheel);
    }

    /**
     * Set the factor by which the duration will change
     */
    public void setScrollDurationFactor(double scrollFactor) {
        mScrollFactor = scrollFactor;
    }

    @Override
    public void startScroll(int startX, int startY, int dx, int dy,
            int duration) {
        super.startScroll(startX, startY, dx, dy,
                (int) (duration * mScrollFactor));
    }

} 
```

`scroller.set(this, mScroller);`问题是，在运行MyPager 行时，我无法摆脱这个异常：

```
java.lang.IllegalArgumentException: invalid value for field 
```

任何的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T16:11:19.610

能不能修改这部分代码，插入一条Log语句？

```
private void postInitViewPager() {
    try {
         Class<?> viewpager = ViewPager.class;
            Field scroller = viewpager.getDeclaredField("mScroller");
            scroller.setAccessible(true);
            Field interpolator = viewpager.getDeclaredField("sInterpolator");
            interpolator.setAccessible(true);

            mScroller = new ScrollerCustomDuration(getContext(),
                    (Interpolator) interpolator.get(null));
            Log.d("TAG", "mScroller is: " + mScroller + ", "
                + mScroller.getClass().getSuperclass().getCanonicalName() + "; this class is "
                + this + ", " + getClass().getSuperclass().getCanonicalName());
            scroller.set(this, mScroller);
    } catch (Exception e) {
        Log.e("MyPager", e.getMessage());
    } 
```

然后发布输出？

**编辑**：问题是导入语句不正确。`mScroller`是 a`android.widget.Scroller`并且您不能分配给它 a `com.WazaBe.HoloEverywhere.widget.Scroller`。

# python - 使用 Web 套接字的 Tornado 单元测试 - 堆栈上下文呢？

> ID：14215766
> 
> 赞同：3
> 
> 时间：2013-01-08T13:13:26.680
> 
> 标签：python, unit-testing, tornado

我已经使用 Tornado 服务器一段时间了，我不得不说我喜欢它。我有一个处理 Web 套接字和 http 请求的龙卷风服务器（在 python3.2 上运行）。我想要做的是用 ws2py（它实现一个 ws 客户端以与 tornado IOLoop 一起使用）编写一些单元测试（使用 web 套接字）。我看到龙卷风有 AsyncTestCase 类，它看起来很有趣，特别是在与[文档](http://www.tornadoweb.org/documentation/testing.html?highlight=asynctestcase#tornado.testing.AsyncTestCase)中所述的 AsyncHTTPClient 一起使用时：

```
class MyTestCase2(AsyncTestCase):
    def test_http_fetch(self):
        client = AsyncHTTPClient(self.io_loop)
        client.fetch("http://www.tornadoweb.org/", self.stop)
        response = self.wait()
        # Test contents of response
        self.assertIn("FriendFeed", response.body) 
```

我想将 AsyncTestCase 与 Web 套接字一起使用，客户端没有问题，我可以毫无问题地发送和接收消息。

我想我必须做的是`self.stop`作为回调传递给客户端，以便通过调用`wait()`如上面的示例来检索接收到的消息。但不知何故，这不起作用，这就是我所拥有的：

```
class SQLRequests(AsyncTestCase):
    """Tests sql requests"""

    def test_sql_req_1(self):
        """first test function"""
        client = AsyncWSClient(httpBaseUrl, self.io_loop)
        client.sendMessage('some_message', self.stop)

        response = self.wait()
        if response.data:
            print('got %s' % str(response.data))
            # some test
            self.assertTrue(True)

if __name__ == '__main__':
    unittest.main() 
```

这是我的网络套接字客户端：

```
class AsyncWSClient(TornadoWebSocketClient):
"""
Asynchronous web socket client based on ws4py's tornadoclient
Sends a message and calls callback with received message
"""
def __init__(self, url, ioLoop=None, **kwargs):
    TornadoWebSocketClient.__init__(self, url, io_loop=ioLoop, **kwargs)
    self._callback = None
    self._message = None

def opened(self):
    """called when web socket opened"""
    self.send(self._message, binary=False)      

def received_message(self, message):
    """Received a message"""
            self.close()
    if self._callback:
        self._callback(message)

def sendMessage(self, message, callback):
    """Connects and sends message when connected"""
    self._message = message
    self._callback = callback
    self.connect() 
```

我确实收到了一个`ws2py.messaging.TextMessage`对象作为响应，但它的数据字段`None`虽然客户端已收到一些数据。如果我查看 AsyncTestCase，在它调用回调之前，该对象中有一些数据，当它作为 wait() 的返回值传递时，这些数据会以某种方式消失。

我看到龙卷风中有一个神秘的东西叫做 stack_context，这和我的问题有关吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:04:58.190

问题是消息“数据”包含在 的`data`属性中`message`。一旦`received_message`被调用，`message.data`就会重置为 None ( [https://github.com/Lawouach/WebSocket-for-Python/blob/master/ws4py/websocket.py#L369](https://github.com/Lawouach/WebSocket-for-Python/blob/master/ws4py/websocket.py#L369) )。

因此，只需调用您的回调传递`message.data`而不是完整的`message`. 像那样：

```
def received_message(self, message):
    """Received a message"""
    self.close()
    if self._callback:
       self._callback(message.data) 
```

# mod-auth - mod_authz_host 被忽略

> ID：14215767
> 
> 赞同：3
> 
> 时间：2013-01-08T13:13:42.307
> 
> 标签：mod-auth

我的一台服务器（使用 Apache 2.2.25 的 Centos 6.3）出现问题。即使在 httpd.conf 中启用了 mod_authz_host，它似乎也被忽略了

默认情况下，我几乎启用了所有模块，但即使我执行以下操作：

```
<Directory "/"> 
Order deny,allow
deny from all
</Directory> 
```

我仍然可以访问每个页面。甚至对读取 .htaccess 的默认保护也会被忽略。

这是当前加载的模块列表：

*   LoadModule auth_basic_module 模块/mod_auth_basic.so
*   LoadModule auth_digest_module 模块/mod_auth_digest.so
*   LoadModule authn_file_module 模块/mod_authn_file.so
*   LoadModule authn_alias_module 模块/mod_authn_alias.so
*   LoadModule authn_anon_module 模块/mod_authn_anon.so
*   LoadModule authn_dbm_module 模块/mod_authn_dbm.so
*   LoadModule authn_default_module 模块/mod_authn_default.so
*   LoadModule authz_host_module 模块/mod_authz_host.so
*   LoadModule authz_user_module 模块/mod_authz_user.so
*   LoadModule authz_owner_module 模块/mod_authz_owner.so
*   LoadModule authz_groupfile_module 模块/mod_authz_groupfile.so
*   LoadModule authz_dbm_module 模块/mod_authz_dbm.so
*   LoadModule authz_default_module 模块/mod_authz_default.so
*   #LoadModule ldap_module 模块/mod_ldap.so
*   #LoadModule authnz_ldap_module 模块/mod_authnz_ldap.so
*   LoadModule include_module modules/mod_include.so
*   LoadModule log_config_module 模块/mod_log_config.so
*   LoadModule logio_module 模块/mod_logio.so
*   LoadModule env_module 模块/mod_env.so
*   LoadModule ext_filter_module 模块/mod_ext_filter.so
*   LoadModule mime_magic_module 模块/mod_mime_magic.so
*   LoadModule expires_module modules/mod_expires.so
*   LoadModule deflate_module 模块/mod_deflate.so
*   LoadModule headers_module modules/mod_headers.so
*   LoadModule usertrack_module modules/mod_usertrack.so
*   LoadModule setenvif_module 模块/mod_setenvif.so
*   LoadModule mime_module 模块/mod_mime.so
*   LoadModule dav_module 模块/mod_dav.so
*   LoadModule status_module modules/mod_status.so
*   LoadModule autoindex_module 模块/mod_autoindex.so
*   LoadModule info_module modules/mod_info.so
*   LoadModule dav_fs_module 模块/mod_dav_fs.so
*   LoadModule vhost_alias_module 模块/mod_vhost_alias.so
*   LoadModule 协商模块模块/mod_negotiation.so
*   LoadModule dir_module 模块/mod_dir.so
*   LoadModule actions_module modules/mod_actions.so
*   LoadModule 拼写模块模块/mod_speling.so
*   LoadModule userdir_module modules/mod_userdir.so
*   LoadModule alias_module modules/mod_alias.so
*   LoadModule rewrite_module modules/mod_rewrite.so
*   #LoadModule proxy_module modules/mod_proxy.so
*   #LoadModule proxy_balancer_module 模块/mod_proxy_balancer.so
*   #LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
*   #LoadModule proxy_http_module modules/mod_proxy_http.so
*   #LoadModule proxy_connect_module modules/mod_proxy_connect.so
*   LoadModule cache_module modules/mod_cache.so
*   #LoadModule suexec_module 模块/mod_suexec.so
*   LoadModule disk_cache_module 模块/mod_disk_cache.so
*   LoadModule cgi_module 模块/mod_cgi.so

我究竟做错了什么？:-(

# jsf - 丰富的文件上传显示添加时的所有文件，即使是接受类型 =“xls”

> ID：14215770
> 
> 赞同：1
> 
> 时间：2013-01-08T13:13:49.680
> 
> 标签：jsf, file-upload, richfaces, content-type

```
<rich:fileUpload fileUploadListener="# {bean.fileUploadAction}"
 immediateUpload="true" acceptedTypes="xls" maxFilesQuantity="1">        
</rich:fileUpload> 
```

在丰富的文件上传中，我给出了 acceptedTypes="xls" ，但在文件选择框中的“添加”文件类型显示全部。我想将其限制为仅某些特定格式，我该怎么做。任何形式的帮助都是appriciated，在此先感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:11:04.757

只有当它生成以下 HTML（并且该页面由兼容 HTML5 的网络浏览器打开）时才有可能：

```
<input type="file" ... accept="application/vnd.ms-excel" /> 
```

但是，[它不会那样做](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=fileUpload&skin=blueSky)。相反，它会生成一个简单`<input type="file">`的不带该`accept`属性的 HTML4 兼容，并通过 JavaScript 对所选文件进行文件扩展名检查。

所以你在这里不走运。您基本上需要将 替换为`<rich:fileUpload>`另一个组件，该组件会生成所需的 HTML，并`accept`在`<input type="file">`. 就我现在所见，还没有一个 JSF 组件库提供这样的组件。你可能需要自己种植它。

### 也可以看看：

*   [HTML5 规范 - 的`accept`属性`type=file`](http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#attr-input-accept)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T03:56:20.007

这种替代方式可能会在一定程度上解决您的问题。如下向您的组件添加一个`onclick`事件。`<rich:fileUpload`

```
<rich:fileUpload onclick="this.getElementsByTagName('input')[0].setAttribute('accept', 'application/vnd.ms-excel');" fileUploadListener="# {bean.fileUploadAction}"
 immediateUpload="true" maxFilesQuantity="1">        
</rich:fileUpload> 
```

# hadoop - Couchbase/hadoop 连接器：sqoop 作业失败“找到接口 org.apache.hadoop.mapreduce.TaskAttemptContext，但需要类”

> ID：14215771
> 
> 赞同：3
> 
> 时间：2013-01-08T13:13:49.447
> 
> 标签：hadoop, couchbase, sqoop

我的配置：

*   CouchBase 服务器 2.0
*   Sqoop 1.4.2（为 hadoop 版本 2.0.0 编译）
*   堆栈 Hadoop CDH4.1.2

我想使用 CouchBase/Hadoop 连接器（[http://www.couchbase.com/develop/connectors/hadoop](http://www.couchbase.com/develop/connectors/hadoop)），但是当我启动导入时出现以下错误：

```
sqoop-import --connect http://localhost:8091/pools --table DUMP
13/01/07 11:00:34 INFO tool.CodeGenTool: Beginning code generation
13/01/07 11:00:34 INFO orm.CompilationManager: HADOOP_HOME is /usr/lib/hadoop
Note: /tmp/sqoop-agent/compile/fccb413cf9eec92f9a716320cf268a0a/DUMP.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
13/01/07 11:00:42 INFO orm.CompilationManager: Writing jar file: /tmp/sqoop-agent/compile/fccb413cf9eec92f9a716320cf268a0a/DUMP.jar
13/01/07 11:00:42 INFO mapreduce.ImportJobBase: Beginning import of DUMP
13/01/07 11:00:45 WARN util.Jars: No such class couchbase doesn't use a jdbc driver available.
13/01/07 11:00:50 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
2013-01-07 11:00:55.065 INFO net.spy.memcached.MemcachedConnection:  Added {QA sa=/127.0.0.1:11210, #Rops=0, #Wops=0, #iq=0, topRop=null, topWop=null, toWrite=0, interested=0} to connect queue
2013-01-07 11:00:55.098 INFO net.spy.memcached.MemcachedConnection:  Connection state changed for sun.nio.ch.SelectionKeyImpl@41e22632
2013-01-07 11:00:56.266 INFO net.spy.memcached.MemcachedConnection:  Shut down memcached client
13/01/07 11:02:39 INFO mapred.JobClient: Running job: job_201212111702_0131
13/01/07 11:02:40 INFO mapred.JobClient:  map 0% reduce 0%
13/01/07 11:02:59 INFO mapred.JobClient: Task Id : attempt_201212111702_0131_m_000001_0,     Status : FAILED
Error: Found interface org.apache.hadoop.mapreduce.TaskAttemptContext, but class was expected
13/01/07 11:03:02 INFO mapred.JobClient: Task Id : attempt_201212111702_0131_m_000002_0, Status : FAILED
Error: Found interface org.apache.hadoop.mapreduce.TaskAttemptContext, but class was expected
13/01/07 11:03:02 INFO mapred.JobClient: Task Id : attempt_201212111702_0131_m_000000_0, Status : FAILED
Error: Found interface org.apache.hadoop.mapreduce.TaskAttemptContext, but class was expected
13/01/07 11:03:09 INFO mapred.JobClient: Task Id : attempt_201212111702_0131_m_000003_0, Status : FAILED
Error: Found interface org.apache.hadoop.mapreduce.TaskAttemptContext, but class was expected
13/01/07 11:03:12 INFO mapred.JobClient: Task Id : attempt_201212111702_0131_m_000001_1, Status : FAILED
Error: Found interface org.apache.hadoop.mapreduce.TaskAttemptContext, but class was expected
13/01/07 11:03:13 INFO mapred.JobClient: Task Id : attempt_201212111702_0131_m_000002_1, Status : FAILED
Error: Found interface org.apache.hadoop.mapreduce.TaskAttemptContext, but class was expected
13/01/07 11:03:20 INFO mapred.JobClient: Task Id : attempt_201212111702_0131_m_000000_1, Status : FAILED
Error: Found interface org.apache.hadoop.mapreduce.TaskAttemptContext, but class was expected
13/01/07 11:03:24 INFO mapred.JobClient: Task Id : attempt_201212111702_0131_m_000003_1, Status : FAILED
Error: Found interface org.apache.hadoop.mapreduce.TaskAttemptContext, but class was expected
13/01/07 11:03:24 INFO mapred.JobClient: Task Id : attempt_201212111702_0131_m_000001_2, Status : FAILED
Error: Found interface org.apache.hadoop.mapreduce.TaskAttemptContext, but class was expected
13/01/07 11:03:30 INFO mapred.JobClient: Task Id : attempt_201212111702_0131_m_000002_2, Status : FAILED
Error: Found interface org.apache.hadoop.mapreduce.TaskAttemptContext, but class was expected
13/01/07 11:03:33 INFO mapred.JobClient: Task Id : attempt_201212111702_0131_m_000000_2, Status : FAILED
Error: Found interface org.apache.hadoop.mapreduce.TaskAttemptContext, but class was expected
13/01/07 11:03:39 INFO mapred.JobClient: Job complete: job_201212111702_0131
13/01/07 11:03:40 INFO mapred.JobClient: Counters: 7
13/01/07 11:03:40 INFO mapred.JobClient:   Job Counters 
13/01/07 11:03:40 INFO mapred.JobClient:     Failed map tasks=1
13/01/07 11:03:40 INFO mapred.JobClient:     Launched map tasks=14
13/01/07 11:03:40 INFO mapred.JobClient:     Rack-local map tasks=14
13/01/07 11:03:40 INFO mapred.JobClient:     Total time spent by all maps in occupied slots (ms)=74621
13/01/07 11:03:40 INFO mapred.JobClient:     Total time spent by all reduces in occupied slots (ms)=0
13/01/07 11:03:40 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0
13/01/07 11:03:40 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0
13/01/07 11:03:40 INFO mapreduce.ImportJobBase: Transferred 0 bytes in 174.4617 seconds (0 bytes/sec)
13/01/07 11:03:40 WARN mapreduce.Counters: Group org.apache.hadoop.mapred.Task$Counter is deprecated. Use org.apache.hadoop.mapreduce.TaskCounter instead
13/01/07 11:03:40 INFO mapreduce.ImportJobBase: Retrieved 0 records.
13/01/07 11:03:40 ERROR tool.ImportTool: Error during import: Import job failed! 
```

有没有人使用过具有相同配置的连接器并成功使其工作？

谢谢你的帮助！

玛德琳

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:02:14.893

Hadoop 经历了从 Hadoop 1.0 到 Hadoop 2.0（相应地从 CDH3 到 CDH4）的巨大代码重构。一个副作用是针对 Hadoop 1.0 (CDH3) 编译的代码与 Hadoop 2.0 (CDH4) 不兼容，反之亦然。但是源代码是兼容的，因此只需要使用目标 Hadoop 发行版重新编译代码。

当您在 Hadoop 2.0 (CDH4) 上运行为 Hadoop 1.0 (CDH3) 编译的代码时，异常“找到接口 X，但预期类”非常常见，反之亦然。

完全相同的约束也适用于连接器。没有针对哪个 Hadoop 版本 CouchBase 连接器编译的明确信息，所以我猜它是针对 Hadoop 1.0 的，因此它不适用于 Hadoop 2.0 (CDH4)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T02:00:57.470

这已在 CDH4.2 版本中得到修复。

[http://www.cloudera.com/content/cloudera/en/documentation/cdh4/v4-2-0/CDH4-Release-Notes/cdh4ki_topic_2_9.html](http://www.cloudera.com/content/cloudera/en/documentation/cdh4/v4-2-0/CDH4-Release-Notes/cdh4ki_topic_2_9.html)

# soap - 如何使用 freecwmp 上传配置

> ID：14215775
> 
> 赞同：1
> 
> 时间：2013-01-08T13:14:06.553
> 
> 标签：soap, protocols

嗨，我正在使用 freecwmp 作为 TR069 客户端。我从 freecwmp.org 找到了源代码和步骤。我已经使用 openacs 测试了以下功能的代码：下载、获取/设置参数、在 freecwmp 中重置。我们的任务还需要 tr069 客户端要求 acs（自动配置服务器）将文件从客户端上传到服务器。关于如何做到这一点的任何想法？如果对问题有任何疑问，请发表评论，我会详细解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:40:46.353

您是否使用 freecwmp 找到了答案？

如果没有，您可以使用[OpenACS](https://sourceforge.net/p/openacs/)和这行 javascript 来完成：

```
result = cpe.Upload(cmd_key, file_type, acs_url, user, pwd, delay_seconds) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:39:47.567

你应该在 freecwmp 邮件列表或 IRC 频道上询问这个问题。尚不支持此功能，但添加它很容易。

# php - 为 Wordpress 中的每个父页面创建一个子菜单

> ID：14215781
> 
> 赞同：3
> 
> 时间：2013-01-08T13:14:33.977
> 
> 标签：php, wordpress, navigation

我所拥有的是 Wordpress 中非常深的菜单结构，在某些页面中有 5 个级别。我需要的是当前页面上方每个父母的菜单。例如，如果我在这里：

*Main / Sub / SubSub / SubSubSub*我想看到，在彼此之上：

*   所有主要项目的菜单
*   Sub 中所有项目的菜单
*   SubSub 中所有项目的菜单，包括 SubSubSub

我正在使用这样的 wp_list_pages 函数：

```
<?php
  if ( $post->post_parent ) {

$args = array(
  'child_of'    => $post->ID,
  'depth'       => 1,
  'sort_column' => 'post_date',
  'sort_order'  => 'DESC',
  'title_li'    => ''
);
echo '<nav id="subnav"><ul>';
  wp_list_pages( $args );
echo '</ul></nav>';

} ?> 
```

但是我不知道我是在2级还是以下。我找到了这个位的祖先菜单（总是显示）：

```
'child_of' => get_post_top_ancestor_id() 
```

但是我不能让它为不是最高祖先的每个其他父母列出一个菜单。我尝试在这里修改此代码： [https ://wordpress.stackexchange.com/questions/15141/list-wordpress-custom-menus-active-parent-levels-children-as-separate-menu](https://wordpress.stackexchange.com/questions/15141/list-wordpress-custom-menus-active-parent-levels-children-as-separate-menu)

并像这里一样遍历所有父母： [http ://wordpress.org/support/topic/get-and-display-parent-pages-of-a-menu](http://wordpress.org/support/topic/get-and-display-parent-pages-of-a-menu)

主要问题是我不是一个 PHP 程序员，所以创建自己的函数并不是一个真正的选择。任何帮助深表感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:07:38.890

快到了，我仍然需要遍历 $howdeep > 2 并找到要显示的正确级别...如果有人知道该怎么做...

```
<?php

$id = 0;
$thispost = get_post($id);
$howdeep = 1;
$parentID = $thispost->post_parent;
while( $parentID != 0 ) {
$parent = get_post($parentID);
$howdeep++;
$parentID = $parent->post_parent;
}

if ( $howdeep == 2 ) {

$args = array(
    'child_of'      => $post->ID,
    'depth'         => 1,
    'sort_column'   => 'post_date',
    'sort_order'    => 'DESC',
    'title_li'      => ''
);
echo '<nav id="subsubnav"><ul>';
    wp_list_pages( $args );
echo '</ul></nav>';

} else if ( $howdeep == 3 ) {

$args = array(
    'child_of'      => $post->post_parent,
    'depth'         => 1,
    'sort_column'   => 'post_date',
    'sort_order'    => 'DESC',
    'title_li'      => ''
);
echo '<nav id="subsubnav"><ul>';
    wp_list_pages( $args );
echo '</ul></nav>';

} ?> 
```

# c# - 为什么 CancellationToken 与 CancellationTokenSource 是分开的？

> ID：14215784
> 
> 赞同：162
> 
> 时间：2013-01-08T13:14:45.723
> 
> 标签：c#, multithreading, task-parallel-library, cancellationtokensource, cancellation-token

`CancellationToken`我正在寻找除了`CancellationTokenSource`类之外还引入.NET 结构的理由。我了解*如何*使用 API，但也想了解*为什么要*这样设计。

即，为什么我们有：

```
var cts = new CancellationTokenSource();
SomeCancellableOperation(cts.Token);

...
public void SomeCancellableOperation(CancellationToken token) {
    ...
    token.ThrowIfCancellationRequested();
    ...
} 
```

而不是像这样直接传递`CancellationTokenSource`：

```
var cts = new CancellationTokenSource();
SomeCancellableOperation(cts);

...
public void SomeCancellableOperation(CancellationTokenSource cts) {
    ...
    cts.ThrowIfCancellationRequested();
    ...
} 
```

这是基于取消状态检查比传递令牌更频繁发生的事实的性能优化吗？

这样就`CancellationTokenSource`可以跟踪和更新`CancellationTokens`，并且对于每个令牌，取消检查都是本地字段访问？

鉴于在这两种情况下没有锁定的 volatile bool 就足够了，我仍然不明白为什么会更快。

谢谢！

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-03-28T00:40:44.373

我参与了这些类的设计和实现。

简短的回答是“**关注点分离**”。确实存在各种实现策略，并且至少在类型系统和初始学习方面有些更简单。但是，CTS 和 CT 旨在用于许多场景（例如深度库堆栈、并行计算、异步等），因此在设计时考虑了许多复杂的用例。这是一种旨在鼓励成功模式并在不牺牲性能的情况下阻止反模式的设计。

如果对行为不端的 API 敞开大门，那么取消设计的实用性可能会很快被削弱。

**`CancellationTokenSource`== “取消触发器”，加上生成链接的侦听器**

**`CancellationToken`== "取消监听器"**

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2013-07-11T16:26:36.763

我有一个确切的问题，我想了解这个设计背后的基本原理。

接受的答案完全正确。这是设计此功能的团队的确认（强调我的）：

> 两种新类型构成了框架的基础： A`CancellationToken`是一个结构，表示“潜在的取消请求”。此结构作为参数传递给方法调用，方法可以对其进行轮询或注册回调以在请求取消时触发。A`CancellationTokenSource`是一个类，它提供了用于发起取消请求的机制，并且它具有`Token` 用于获取关联令牌的属性。将这两个类合并为一个是很自然的，**但这种设计允许将两个关键操作（发起取消请求与观察和响应取消）完全分开。特别是，只接受 a 的方法`CancellationToken`可以观察到取消请求，但不能发起取消请求。**

链接：[.NET 4 取消框架](http://blogs.msdn.com/b/pfxteam/archive/2009/05/22/9635790.aspx)

在我看来，`CancellationToken`只能观察状态而不能改变状态这一事实是非常关键的。您可以像分发糖果一样分发代币，而不必担心除您之外的其他人会取消它。它可以保护您免受恶意第三方代码的侵害。是的，机会很小，但我个人喜欢这种保证。

我也觉得它使 API 更干净，避免意外错误，促进更好的组件设计。

让我们看看这两个类的公共 API。

![取消令牌 API](../Images/b7a6737bb5045bda4d2a129fe986e734.png)

![CancellationTokenSource API](../Images/fd9a80c0d663bfda2fea62eae9ad34f3.png)

如果你将它们结合起来，在编写 LongRunningFunction 时，我会看到那些我不应该使用的方法，比如“取消”的多个重载。就个人而言，我也讨厌看到 Dispose 方法。

我认为当前的类设计遵循“成功之坑”的理念，它指导开发人员创建可以处理`Task`取消的更好的组件，然后以多种方式将它们组合在一起以创建复杂的工作流程。

我问你一个问题，你有没有想过token.Register的目的是什么？这对我来说没有意义。然后我阅读[了托管线程中的取消](http://msdn.microsoft.com/en-us/library/dd997364.aspx)，一切都变得一清二楚。

我相信 TPL 中的取消框架设计绝对是一流的。

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2013-01-08T13:28:23.240

它们是分开的，不是出于技术原因，而是出于语义原因。如果您查看 `CancellationToken`ILSpy 下的实现，您会发现它只是一个包装器`CancellationTokenSource`（因此在性能方面与传递引用没有什么不同）。

它们提供了这种功能分离以使事情更可预测：当您传递一个方法 a 时`CancellationToken`，您知道您仍然是唯一可以取消它的人。当然，该方法仍然可以抛出 a `TaskCancelledException`，但它`CancellationToken`本身——以及引用相同标记的任何其他方法——将保持安全。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-08T13:26:28.617

这`CancellationToken`是一个结构，由于将其传递给方法，因此可能存在许多副本。

调用源时设置令牌的`CancellationTokenSource`所有副本的状态。[请参阅此 MSDN 页面](http://msdn.microsoft.com/en-us/library/dd997289.aspx)`Cancel`

设计的原因可能只是关注点分离和结构速度的问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-08T13:30:39.787

无论出于何种原因，它都是发出取消的`CancellationTokenSource`“事物”。它需要一种方法来将取消“发送”到`CancellationToken`它已发出的所有 '。例如，当请求中止时，ASP.NET 就是这样取消操作的。每个请求都有一个`CancellationTokenSource`将取消转发给它已发布的所有令牌。

这非常适合单元测试顺便说一句 - 创建您自己的取消令牌源，获取令牌，调用`Cancel`源，并将令牌传递给您必须处理取消的代码。

# windows - 应用程序未在静默模式下安装

> ID：14215789
> 
> 赞同：1
> 
> 时间：2013-01-08T13:15:11.757
> 
> 标签：windows, batch-file, installation, silent-installer

我的任务是在机器上静默安装应用程序。我不知道如何实现这一目标。花了一些时间，我觉得可以通过批处理文件来完成，我开始学习创建批处理文件。我学会了如何在不同的位置复制文件和其他基本的东西。

作为一种实践，我试图`7zip.msi`静默安装。我用代码创建了一个批处理文件

```
start C:\Users\MyName\Desktop\7zip.msi /quiet 
```

我从命令提示符运行批处理文件，它要求我用下面的窗口确认

![在此处输入图像描述](../Images/383edbd65139f3304a63e3a0d908e898.png)

我点击运行。然后什么也没有发生。我觉得它正在后台安装（默默地），但我不确定安装是否完成。并且不知道如何获取安装状态。我等了 20 分钟，看到已安装的程序，但我的应用程序不在那里。我重新启动并再次安装程序中没有任何内容。

我什至尝试过使用以下代码，但结果相同

```
start C:\Users\MyName\Desktop\7zip.msi <Silent> 
```

谁可以帮我这个事？？我知道那里有很多文章，但我只有在那里的帮助下才到达那里。我无法弄清楚发生了什么。

并且同一批次也可以处理`.exe`文件吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:36:53.210

你可以试试这个

```
msiexec.exe /i "C:\Users\MyName\Desktop\7zip.msi" /quiet 
```

我从[这里](http://www.advancedinstaller.com/user-guide/msiexec.html)拿了这个，它有关于 msi 开关的文档和示例。

你不能对 exe 做同样的事情，除非它们有开发人员内置的相同开关。

# regex - REGEX - 删除指定的字符串

> ID：14215793
> 
> 赞同：1
> 
> 时间：2013-01-08T13:15:26.720
> 
> 标签：regex, remove-if

我需要正则表达式方面的帮助。我有像`"testBla"`和之类`"Bla"`的词`test"`。
我想`"test"`从`"testBla"`. 所以它应该只删除`"test"`给定字符串大于 4 个字符的情况。这就是我所拥有的：

```
^test\w{4,} 
```

但它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:17:46.077

如果要删除`test`它是否出现在行首并且后跟一个单词字符，那么您可以使用非单词边界：

```
^test\B 
```

在线查看它：[rubular](http://rubular.com/r/UYsuJn4jI8)

如果要删除`test`它是否出现在行首并且后跟任何字符（新行除外），那么您可以使用前瞻：

```
^test(?=.) 
```

在线查看它：[rubular](http://rubular.com/r/Je1Aw3zUYU)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:21:19.253

这个只会捕获一个单词中的“测试”部分：`\btest(?=\w{4,})`. 我假设您使用的正则表达式引擎的前瞻长度为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:29:59.187

假设您使用的是 JavaScript，请尝试以下操作：

```
string.replace(/test([^]+)/i, "$1");

       'Bla'.replace(/test([^]+)/i, "$1"); // 'Bla'
      'test'.replace(/test([^]+)/i, "$1"); // 'test'
   'testBla'.replace(/test([^]+)/i, "$1"); // 'Bla'
   'blaTest'.replace(/test([^]+)/i, "$1"); // 'blaTest'
'blaTestbla'.replace(/test([^]+)/i, "$1"); // 'blaTestbla' 
```

这将从字符串中删除`test`，仅当字符串以 开头时`test`，并且仅当字符串中的内容多于 时`test`。我添加`i`了使正则表达式不区分大小写。

# assembly - 程序集 8086：两个浮点 [32 位] 加法、减法等

> ID：14215795
> 
> 赞同：1
> 
> 时间：2013-01-08T13:15:45.230
> 
> 标签：assembly, floating-point, 32-bit, x86-16

我需要在 8086 中添加两个浮点数

```
 12.3 ---> 4144 CCCDh
    (AX,BX) = (4144h, CCCDh) 
```

我需要添加任何数字，这个浮点数看起来像：

```
 (AX,BX) = (AX,BX) + 10h 
```

如果我这样做，答案是错误的。

```
 (AX,BX) + 10h == 4144 CCECh 
```

但 23,3 不等于 4144 CCECh

你能帮助我吗？我如何添加这两个数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:20:56.257

您不能像这样将整数 (10) 添加到 IEEE-754 浮点值 (12.3f = 0x4144cccd)。您需要以 IEEE-754 格式（10.0f = 0x41200000）表示 10，然后使用浮点加法指令。

```
 0x4144cccd      12.3
+ 0x41200000    + 10.0
  ----------      ----
  0x41B26666      22.3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:43:10.680

尚未验证这一点（尤其是 bp 中的偏移量），但它应该给出一些观点。它使用古老的[8087 浮点指令集](http://www.intel-assembler.it/portale/5/The-8087-Instruction-Set/A-one-line-description-of-x87-instructions.asp)。

所有操作都发生在协处理器堆栈和/或内存之间。整数可以使用指令从 2 的补码表示形式转换`FILD mem`，在某些情况下，有一个内置的加法指令将整数（从内存）添加到 FP 寄存器。

```
 push bp
 mov bp, sp
 push bx
 push ax
 push word ptr 10   ;  // decimal, not hex
 fld dword ptr [bp] ;   load float (just pushed from bx,ax)
 fiadd word ptr [bp-4] ;   add the integer in stack
 fst dword ptr [bp] ;   store result
 pop ax             
 pop ax             ; restore the high word of result
 pop bx             ; restore low word
 pop bp             ; restore frame pointer 
```

# jsf - ADF 面和特立尼达之间有什么关系？

> ID：14215799
> 
> 赞同：0
> 
> 时间：2013-01-08T13:16:00.947
> 
> 标签：jsf, oracle-adf, trinidad

我正在查看[ADF Faces TreeMap 组件](http://docs.oracle.com/cd/E16162_01/apirefs.1112/e17490/tagdoc/dvt_treemap.html)`AttributeChangeEvent`的文档，并对名为该特定组件支持 的事件的命名空间感到有些惊讶，即`org.apache.myfaces.trinidad.event.AttributeChangeEvent`. ADF Faces 和 Trinidad 之间究竟是什么关系？一个是另一个的超集吗？这些命名空间背后的历史究竟是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:36:37.737

Apache Trinidad 曾经是 ADF 10g。Oracle 将 ADF 提供给了 Apache 基金会（减去一些东西），并开始开发 ADF 11g。因此，Oracle 11g 依赖于现在由 Apache 基金会维护的许多核心库。

事实上，`afh:`命名空间经常被使用，`trh:`因为它现在正确地存在于 Trindad 库中。

# spring - Spring MVC：每个对象一个控制器

> ID：14215808
> 
> 赞同：0
> 
> 时间：2013-01-08T13:16:24.580
> 
> 标签：spring, spring-mvc

我使用 Spring MVC 3.1.2 和 Jackson 1.9 开发了一个网站来启用 JSON 通信。

所有这些都已经奏效了！

现在我的网站旨在处理模型。

我现在拥有的：

*   用户提出请求
*   控制器加载完整的模型
*   Controller 使用 Model 处理请求
*   控制器保存并返回数据

现在我对模型的加载部分有问题。

是否可以制作一个包含模型数据的全局控制器。

这样我就可以将数据传递给 ModelController，而不是每次有请求时都加载模型。

另外，我真的不想要一个在 1 个控制器中包含所有模型的 ModelController，而是每个模型 1 个控制器。

现在，这可能吗？如果是，我该如何声明这样的控制器？

提前致谢！

很抱歉，但我会更清楚地说明我对模型的含义。它是一个用于开发 Uml 模型的网络应用程序。因此，每次在 Uml 模型中更改元素时，我不想加载完整的 Uml 模型，而是在全局“控制器”中加载一次 Uml 模型。如果可能的话，为每个 Uml 模型创建这个控制器的一个实例。

# css - 水平 CSS 布局

> ID：14215809
> 
> 赞同：1
> 
> 时间：2013-01-08T13:16:33.493
> 
> 标签：css, layout

我正在尝试学习以“CSS”方式而不是使用表格来做事。我有一个基本表格，需要按如下方式布置：

```
Label 1: [Drop Down List]     Label 2: [Drop Down List]   Label 3: Drop Down List 
```

总的来说，这三个将左对齐，而不是占据屏幕的整个宽度。但是，下拉列表元素的大小将根据填充它们的数据而动态变化。如果我使用的是表格，我会执行以下操作：

```
<table border='0' cellpadding='0' cellspacing='0'>
  <tr>
    <td>Label 1:&nbsp;</td>
    <td style='padding-right:12px;'><select>...</select></td>

    <td>Label 2:&nbsp;</td>
    <td style='padding-right:12px;'><select>...</select></td>

    <td>Label 3:&nbsp;</td>
    <td style='padding-right:12px;'><select>...</select></td>
  </tr>
</table> 
```

不幸的是，我不确定如何通过 CSS 做到这一点。任何见解都值得赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:18:41.687

您可以在 HTML 中将所有元素一个接一个地放置，然后将`label`元素`display:inline-block`和`margin-left: 50px`.

**HTML**

```
<label>Label 1 <select>...</select></label> 
<label>Label 2 <select>...</select></label> 
<label>Label 3 <select>...</select></label> 
```

**CSS**

```
label {
 display: inline-block; /* perhaps not needed, as commented by cimmanon */
 margin-left: 50px;
} 
```

**现场演示**
[http://jsfiddle.net/Ezgtq/1/](http://jsfiddle.net/Ezgtq/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:19:25.637

```
Label: <select>....</select>
Label: <select>....</select>
Label: <select>....</select> 
```

CSS：

```
select {
display:inline-block;
margin-left:12px;
width:40px; /* What You Want */
} 
```

[JS小提琴](http://jsfiddle.net/EdCPc/)

# apache - 尽管获得了适当的许可，但仍拒绝跨域图像加载

> ID：14215811
> 
> 赞同：2
> 
> 时间：2013-01-08T13:16:35.860
> 
> 标签：apache, three.js, textures, cors

我正在尝试在我的本地 apache 上运行以下示例[http://mrdoob.github.com/three.js/examples/webgl_geometry_cube.html](http://mrdoob.github.com/three.js/examples/webgl_geometry_cube.html)，我只需替换以下行：

```
var texture = THREE.ImageUtils.loadTexture('textures/crate.gif'); 
```

经过

```
var texture = THREE.ImageUtils.loadTexture('http://mrdoob.github.com/three.js/examples/textures/crate.gif'); 
```

我在启用的站点配置中添加了允许跨域请求的指令，如下所示：

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName localhost
    DocumentRoot /var/www
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept"
    <Directory /var/www>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

请求的响应标头确认已考虑标头指令：

```
Accept-Ranges:bytes
Access-Control-Allow-Headers:Origin, X-Requested-With, Content-Type, Accept
Access-Control-Allow-Origin:*
Connection:Keep-Alive
Content-Encoding:gzip
Content-Length:725
Content-Type:text/html
Date:Tue, 08 Jan 2013 12:41:32 GMT
ETag:"40ee7-61b-4d2c62fdc4cf4"
Keep-Alive:timeout=5, max=100
Last-Modified:Tue, 08 Jan 2013 12:35:55 GMT
Server:Apache/2.2.22 (Ubuntu)
Vary:Accept-Encoding 
```

尽管如此，我收到以下错误：Chromium 控制台上**的跨域资源共享策略拒绝了跨域图像加载。**

我错过了我的 apache 配置中的某些内容吗？提前致谢 ！

* * *

**编辑**：这是文档的请求和响应标头（包含 ThreeJS 代码）：

```
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8Accept-Charset:UTF-8,*;q=0.5
Accept-Encoding:gzip,deflate,sdch
Accept-Language:fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4,de;q=0.2
Cache-Control:max-age=0
Connection:keep-alive
Host:localhost
Referer:http://localhost/tests/
User-Agent:Mozilla/5.0 (X11; Linux i686) AppleWebKit/536.11 (KHTML, like Gecko) Ubuntu/12.04 Chromium/20.0.1132.47 Chrome/20.0.1132.47 Safari/536.11

Response Headersview source
Accept-Ranges:bytes
Access-Control-Allow-Headers:Origin, X-Requested-With, Content-Type, Accept
Access-Control-Allow-Methods:GET, PUT, POST, DELETE
Access-Control-Allow-Origin:*
Connection:Keep-Alive
Content-Encoding:gzip
Content-Length:725
Content-Type:text/html
Date:Thu, 10 Jan 2013 17:52:48 GMT
ETag:"40f8f-61b-4d2f2d858c1d0"
Keep-Alive:timeout=5, max=100
Last-Modified:Thu, 10 Jan 2013 17:52:40 GMT
Server:Apache/2.2.22 (Ubuntu)
Vary:Accept-Encoding 
```

这里是 mrdoob.github.com 上所需图像的请求和响应标头：

```
Request URL:http://mrdoob.github.com/three.js/examples/textures/crate.gif
Request Method:GET
Status Code:200 OK

Request Headers
Accept:*/*
Accept-Charset:UTF-8,*;q=0.5
Accept-Encoding:gzip,deflate,sdch
Accept-Language:fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4,de;q=0.2
Host:mrdoob.github.com
Origin:http://localhost
Proxy-Connection:keep-alive
Referer:http://localhost/tests/cors_texture_loading.html
User-Agent:Mozilla/5.0 (X11; Linux i686) AppleWebKit/536.11 (KHTML, like Gecko) Ubuntu/12.04 Chromium/20.0.1132.47 Chrome/20.0.1132.47 Safari/536.11

Response Headers
Accept-Ranges:bytes
Cache-Control:max-age=86400
Connection:keep-alive
Content-Length:67585
Content-Type:image/gif
Date:Thu, 10 Jan 2013 17:52:48 GMT
Expires:Fri, 11 Jan 2013 17:52:48 GMT
Last-Modified:Fri, 28 Dec 2012 00:07:28 GMT
Proxy-Connection:keep-alive
Server:GitHub.com
Via:1.1 proxy.thecorporateproxy.fr:2598 (squid/2.7.STABLE9)
X-Cache:MISS from proxy.ign.fr
X-Cache-Lookup:MISS from : proxy.thecorporateproxy.fr:2598 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T21:49:27.357

在阅读了[Wikipedia CORS 文章](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)和[Mozilla 文档](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)后，我似乎误解了 CORS 的工作原理。

实际上，我的脚本`http://localhost`试图访问托管在 mrdoob.github.com 上的图像。所以，我设置`Access-Control-Allow-Origin`为`"*"`我的本地服务器配置。但实际上，应该配置的是 mrdoob.github.com 服务器，而不是我的本地服务器。

由于我无权访问 mrdoob.github.com 服务器配置，因此在这种情况下，CORS 似乎无法帮助我加载存储在本地服务器之外的另一台服务器上的纹理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:42:08.217

您还需要设置`Access-Control-Allow-Methods`标题：

```
Header set Access-Control-Allow-Methods "GET, PUT, POST, DELETE" 
```

# c# - 将带有自定义 xml 的 word 2003 文档转换为 word 2010

> ID：14215814
> 
> 赞同：0
> 
> 时间：2013-01-08T13:16:50.327
> 
> 标签：c#, asp.net, ms-word

我正在创建一个应用程序，旨在通过将自定义 XML 元素替换为内容控件来将 Word 2003 的现有 xml 文档转换为 DOCX。为此，我正在使用 Interop 程序集 + Word 2007，因为只有 Word 2007 可以支持自定义 XML 元素和内容控件。

提出的方法如下： 1\. 阅读xml文档 2\. 另存为DOCX。3\. 从 DOCX 文件中识别 XMLNodes（自定义 XML 元素） 4\. 将新的内容控件放置在 XMLNodes /将 XMLNodes 映射到内容控件的范围内。5\. 移除 XMLNodes。

我在执行上述操作时发现问题。问题是在上面提到的第 4 步中，一旦保存文档，添加到文档的所有内容控件都会被删除。这是因为文档以 Word 2003 兼容模式保存，而 Word 2003 不支持内容控件。

我已经尝试了很多禁用兼容模式但无法实现它。

你们中的任何人都可以建议我一些方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:02:13.220

我也一直在努力做你正在做的事情。有人指出可以使用open xml来做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T18:21:18.503

*第1步：在word 2003文档中运行下面的word 2003宏并保存。*

```
'Word 2003 macro
Sub BookmarkUpdate()

  Dim objNode As XMLNode
    For Each objNode In ActiveDocument.XMLNodes
        objNode.Range.Bookmarks.Add (objNode.BaseName)
    Next
End Sub 
```

* * *

*第 2 步：在 word 2010 中打开同一个文档并运行下面的 word 2010 宏并保存。*

```
' Word 2010 macro
Sub CreateContentControl()
Dim name As String
For Each bk In ActiveDocument.Bookmarks
   Dim objcc As ContentControl
   Dim objRange As Range   
   ' Get the first paragraph as a range object.
   Set objRange = bk.Range
   ' Create a rich text content control.
   Set objcc = ActiveDocument.ContentControls.Add(wdContentControlRichText, objRange)  
   name = bk.name 
   objcc.Title = name
   objcc.Tag = name
 Next
End Sub 
```

# apache-flex - 浏览器对话框中的 Flash 内容无法使用 IE10 进行渲染 - Windows 8

> ID：14215815
> 
> 赞同：0
> 
> 时间：2013-01-08T13:16:59.920
> 
> 标签：apache-flex, internet-explorer-10

我正在尝试启动窗口弹出对话框。该对话框指向加载 swf 文件的 HTML 页面。一切正常，但对于 Windows 8 上的 IE10，flash 内容不会在弹出对话框中呈现。我已验证 .swf 文件已加载，但未显示其内容。如果我关闭对话框，flash 文件内容会暂时显示。

如果我使用 showModalDialog 或 showModalessDialog 打开对话框，则会出现此问题。如果使用 window.open 打开弹出窗口，则可以正常工作。

再次重申 - 此问题仅发生在 Windows 8 上的 IE10 上。否则，它在 Windows 2012 上的 IE10、Windows 8 上的 Firefox 以及其余 Windows 版本的两个浏览器上都可以正常工作。

看看它就明白了 - [http://youtu.be/SupJYZoLk5I](http://youtu.be/SupJYZoLk5I)。

请求你分享你的想法。

谢谢，Prithveesingh。

# c++ - 迭代器的 STL 容器如何表现？

> ID：14215818
> 
> 赞同：3
> 
> 时间：2013-01-08T13:17:07.843
> 
> 标签：c++, stl

这个问题在我看来更像是出于学术兴趣而不是实际用例：

STL 关联容器，即 [multi]set 和 [multi]map，包含重载方法，例如：

```
// for std::map
void erase ( iterator position );
size_type erase ( const key_type& x );

// for std::set
iterator  erase (const_iterator position);
size_type erase (const value_type& val); 
```

我的问题：**如果`key_type`，分别怎么办。`value_type`是`iterator`或`const_iterator`？**

我知道将迭代器存储在容器中是危险的并且可能没用。但是实际的 STL 实现会如何表现呢？行为是否已定义？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T13:23:19.363

问题是迭代器类型会有所不同。他们永远不可能相同。原因：在这种情况下必须满足以下等式：

```
map<K, V>::iterator == K
map<K, V>::const_iterator == K 
```

但是，这些等式不能成立（你看到递归了吗）？请记住，迭代器类型取决于容器类型，包括其模板参数。

所以在下面的例子中，键类型和迭代器类型是不同的，就像你试图让它们相等一样：

```
map<map<int,int>::iterator, int> i; 
```

实际上，由于上​​述原因，我无法实例化一个键等于其迭代器类型的映射。因此，重载的`erase`方法如下所示：

```
void erase ( map<map<int,int>::iterator, int>::iterator position );
size_type erase ( const map<int,int>::iterator & x ); 
```

所以重载永远不会模棱两可。如果类型相同，那将是模棱两可的，请参见：http: [//ideone.com/fMdwru](http://ideone.com/fMdwru)。但是，只要您使用该方法，编译器就会抱怨。所以，假设我们可以在这里引入歧义，只要我们想使用该方法，它就会困扰我们。我的意思是，我们仍然可以实例化地图类型（如果它存在的话）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T13:20:51.483

将迭代器存储在容器中并没有本质上的错误。需要注意的两个主要问题是：

1.  您可能需要知道每个迭代器指的是哪个容器；
2.  您必须知道原始容器上的哪些操作会使哪些迭代器无效。

> 我的问题：如果`key_type`，分别怎么办。`value_type`是`iterator`或`const_iterator`？

如果所有四种类型都指代相同的容器类型，则答案是根据定义它们不可能相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:26:35.427

这样做没有错，也不是没用。:)

请记住，迭代器基本上只是广义指针。如有疑问，请假设它们的行为类似于指针。您可以创建指针容器，因此也可以创建迭代器容器。

当然，您必须记住，如果您修改容器，指向该容器的迭代器可能会失效（取决于执行的操作和容器的类型），但这仅意味着您必须知道存储的迭代器仍然存在有效的。

# javascript - 新添加的数据未正确保存在剑道网格中

> ID：14215819
> 
> 赞同：3
> 
> 时间：2013-01-08T13:17:14.690
> 
> 标签：javascript, jquery, kendo-ui, kendo-dataviz

完成以下操作后，网格行为与预期不符。

1.  添加新记录
2.  然后按网格中的更新按钮（新添加的行）
3.  然后在保存前按取消。

当上述动作完成时，新添加的行消失。 [链接到 js 小提琴](http://jsfiddle.net/FWPgz/)

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Demo Grid App</title>
    <!-- CDN-based stylesheet reference for Kendo UI DataViz -->
    <link rel="stylesheet" href="http://cdn.kendostatic.com/2012.2.710/styles/kendo.default.min.css">
     <link rel="stylesheet" href="http://cdn.kendostatic.com/2012.2.710/styles/kendo.common.min.css">
            <!-- CDN-based script reference for jQuery; utilizing a local reference if offline -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
       <!-- CDN-based script reference for Kendo UI DataViz; utilizing a local reference if offline -->
    <script src="http://cdn.kendostatic.com/2012.2.710/js/kendo.all.min.js"></script>

</head>
<body>
    <header>
        <h1>Demo Grid App</h1>
    </header>

<div id="grid"></div>
          <script>
          var firstNames = ["Nancy", "Andrew", "Janet", "Margaret", "Steven", "Michael", "Robert", "Laura", "Anne", "Nige"],
    lastNames = ["Davolio", "Fuller", "Leverling", "Peacock", "Buchanan", "Suyama", "King", "Callahan", "Dodsworth", "White"],
    cities = ["Seattle", "Tacoma", "Kirkland", "Redmond", "London", "Philadelphia", "New York", "Seattle", "London", "Boston"],
    titles = ["Accountant", "Vice President, Sales", "Sales Representative", "Technical Support", "Sales Manager", "Web Designer",
    "Software Developer", "Inside Sales Coordinator", "Chief Techical Officer", "Chief Execute Officer"],
    birthDates = [new Date("1948/12/08"), new Date("1952/02/19"), new Date("1963/08/30"), new Date("1937/09/19"), new Date("1955/03/04"), new Date("1963/07/02"), new Date("1960/05/29"), new Date("1958/01/09"), new Date("1966/01/27"), new Date("1966/03/27")];

function createRandomData(count) {
    var data = [],
        now = new Date();
    for (var i = 0; i < count; i++) {
        var firstName = firstNames[Math.floor(Math.random() * firstNames.length)],
            lastName = lastNames[Math.floor(Math.random() * lastNames.length)],
            city = cities[Math.floor(Math.random() * cities.length)],
            title = titles[Math.floor(Math.random() * titles.length)],
            birthDate = birthDates[Math.floor(Math.random() * birthDates.length)],
            age = now.getFullYear() - birthDate.getFullYear();

        data.push({
            Id: i + 1,
            FirstName: firstName,
            LastName: lastName,
            City: city,
            Title: title,
            BirthDate: birthDate,
            Age: age
        });
    }
    return data;
}

function generatePeople(itemCount, callback) {
    var data = [],
        delay = 25,
        interval = 500,
        starttime;

    var now = new Date();
    setTimeout(function() {
        starttime = +new Date();
        do {
            var firstName = firstNames[Math.floor(Math.random() * firstNames.length)],
                lastName = lastNames[Math.floor(Math.random() * lastNames.length)],
                city = cities[Math.floor(Math.random() * cities.length)],
                title = titles[Math.floor(Math.random() * titles.length)],
                birthDate = birthDates[Math.floor(Math.random() * birthDates.length)],
                age = now.getFullYear() - birthDate.getFullYear();

            data.push({
                Id: data.length + 1,
                FirstName: firstName,
                LastName: lastName,
                City: city,
                Title: title,
                BirthDate: birthDate,
                Age: age
            });
        } while(data.length < itemCount && +new Date() - starttime < interval);

        if (data.length < itemCount) {
            setTimeout(arguments.callee, delay);
        } else {
            callback(data);
        }
    }, delay);
}
                $(document).ready(function() {
                    $("#grid").kendoGrid({

                        dataSource: {
                            data: createRandomData(10),

                            schema: {
                                model: {
                                    id:"FirstName",
                                    fields: {
                                        LastName: { type: "string" },
                                        City: { type: "string" },
                                        Title: { type: "string" },
                                        BirthDate: { type: "date" },
                                        Age: { type: "number" }
                                    }
                                }
                            },
                            pageSize: 10
                        },
                        height: 500,
                        width:300,
                         toolbar: ["create"],
                        scrollable: true,
                        sortable: true,
                        filterable: true,
                        pageable: {
                            input: true,
                            numeric: false
                        },
                        columns: [

                            {
                                field: "LastName",
                                title: "Last Name",

                            },
                            {
                                field: "City",

                            },
                            {
                                field: "Title"
                            },
                            {
                                field: "BirthDate",
                                title: "Birth Date",
                                template: '#= kendo.toString(BirthDate,"MM/dd/yyyy") #'
                            },
                            {
                                field: "Age",
                                width: 50
                            },
                              { command: ["edit", "destroy"], title: "&nbsp;", width: "210px" },
                        ],
                         editable: "inline"
                    });
                });
            </script>
    <div role="main">
    </div>
    <footer>
    </footer>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:34:01.153

该行为是预期的。问题在于新创建的记录没有 ID，这就是它们被视为新记录的原因。您可以使用[isNew()](http://docs.kendoui.com/api/framework/model#isnew)方法进行检查。

当您取消对新记录（尚未同步）的编辑时，它将被删除。该操作等同于：按“添加新记录”，然后按“取消”。

这是[一个示例](http://jsfiddle.net/valchev/AWyLf/30/)，演示如何使用本地数据实现 CRUD 操作。

```
 transport: {
            read: function(o) {
                //pass the date
                o.success(data);
            },
            create: function(o) {
                var item = o.data;
                //assign a unique ID and return the record
                counter++;
                item.Id = counter;
                o.success(item);
            },
            update: function(o) {
                //edit the local array and mark the operation as successful
                o.success();
            },
            destroy: function(o) {
                //edit the local array and mark the operation as successful
                o.success();   
            }
        } 
```

# unity3d - 在unity3d中预加载纹理

> ID：14215821
> 
> 赞同：6
> 
> 时间：2013-01-08T13:17:19.817
> 
> 标签：unity3d

我正在通过更改其纹理来修改应用于对象的材质，但问题是我在执行此操作时会出现一些延迟。

我如何在内存中预加载一些纹理以避免unity3d中的时间滞后？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T18:13:38.863

您是否在添加纹理之前立即加载纹理？新纹理是如何存储的？通常，预缓存是在 Awake() 或 Start() 循环期间完成的。

```
Renderer objectRenderer;
public Texture2D replacementTextureAsset;
Texture2D runtimeTextureReplacement;

void Awake()
{
  objectRenderer = (Renderer)GetComponent(typeof(Renderer));

  // Either have the texture assigned via the inspector (replacementTextureAsset above)
  //  or else get a reference to it at runtime. Either way, the texture will be loaded into memory by the end of this loop.
  runtimeTextureReplacement = Resources.Load("myReplacementAsset");
}

void TextureReplace()  // Called whenever
{
  objectRenderer.material.texture = replacementTextureAsset;

  OR

  objectRenderer.material.texture = runtimeTextureReplacement;
} 
```

如果这是您已经在做的事情并且您仍然有“滞后”，那么您可能会遇到将纹理发送到显卡上的帧缓冲区的必然结果。在这种情况下，除了使用较小的纹理之外，您无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:10:52.610

如果您以某种方式使用纹理，它将被上传到显卡。因此，在游戏的加载屏幕期间，您只需遍历所有要“预加载”的纹理，并以某种方式使用它们——例如将它们渲染到 RenderTexture，或使用 GUI.DrawTexture 将它们绘制到屏幕（然后在顶部绘制加载屏幕背景）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T04:05:33.203

我对您的问题进行了更多思考，这是我的建议，它很老套，我希望不必将此代码与我的名字相关联：

```
 public bool TextureCached = false;
public bool TextureLoaded = false;
public bool TextureLoadReady = false;
public string TexturePath = "";
public int MaxPixelConvert = 1000;

Texture2D cached_texture = null;
public Vector2 last_pixel = new Vector2(0,0);

// Use this for initialization
void Start () {
    SwapMainTexture();
    StartWorker();
}

void StartWorker(){
    Thread t1 = new Thread (new ThreadStart (this.ListenForUpdate));
    t1.Start();
}

/// <summary>
/// Reads new texture from TexturePath
/// </summary>
IEnumerator ReadNewTexture(){
    UnityEngine.WWW urltexture = new WWW(TexturePath);
    yield return urltexture;

    cached_texture = urltexture.texture;

    TextureLoadReady = false;
    TextureCached = true;
}
void ListenForUpdate(){
    // Simulate waiting for an asynchronous update notifying us of the updated texture.
    Thread.Sleep(1000); 

    // ...Receive some notification image is ready load.

    // In my case, I'm just loading a local file for testing.
    TexturePath = @"file://C:\Users\Public\Pictures\LargeAssPicture.jpg";
    TextureLoadReady = true;
}

/// <summary>
/// Create a temporary copy of maintexture so that SetPixel doesn't overwrite the original
/// </summary>
void SwapMainTexture(){
    Texture2D texture = (Texture2D)Instantiate(renderer.material.mainTexture);
    renderer.material.mainTexture = texture;
}

/// <summary>
/// Update the main texture in small chunks (<MaxPixelConvert)
/// </summary>
void ImABadIdea(){
    int count = 0;
    Texture2D main_texture = (Texture2D)renderer.sharedMaterial.mainTexture;
    for(int x = (int)last_pixel.x; x <= cached_texture.width; x++){
        for(int y = (int)last_pixel.y; y <= cached_texture.height; y++){
            main_texture.SetPixel(x,y,cached_texture.GetPixel(x,y));
            last_pixel = new Vector2(x,y);

            if(y+1>=cached_texture.height)last_pixel.y = 0;
            count += 1;
            if(count >= MaxPixelConvert)break;
        }
        if(count >= MaxPixelConvert)break;
    }
    main_texture.Apply();

    if(last_pixel.x == cached_texture.width && last_pixel.y == cached_texture.height){
        TextureLoaded = true;
    }
}

void Update () {
    if(TextureLoadReady){   //trigger when new texture ready to load
        TextureLoadReady = false;
        StartCoroutine(ReadNewTexture());
    }
    if(TextureCached && !TextureLoaded){    //trigger when new texture is loaded and start streaming it
        ImABadIdea();
    }
} 
```

纹理加载由一个简单的工作线程触发。当线程“接收”要加载的新纹理的通知时，它会设置适当的标志（我知道我没有锁定共享资源，但我的示例很简单）。之后，纹理被放入缓存中，然后在主线程内的每帧滴答声中以 1000 像素的小块逐渐应用于我的对象的纹理。

在我的测试场景中，我有我的主要对象，然后是该对象的克隆，它仍然隐藏在屏幕外。克隆有脚本并且会加载新的纹理。加载纹理后，我将其换成主要对象。

该代码在 3000x3000 像素的图像上进行了测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-26T04:14:05.647

可能它并不酷，但它适用于 Unity 5.3。在要预加载纹理的每个游戏对象的唤醒/开始场景/单行为中调用此扩展方法。

```
public static class GameObjectExtension
    {
        public static void PreloadTexture( this GameObject go )
        {
            var render = go.GetComponentInChildren<Renderer>();
            if ( render && render.sharedMaterial && render.sharedMaterial.mainTexture )
            {
                int dd = render.sharedMaterial.mainTexture.width;
            }
        }
    } 
```

这个想法取自[这里。](https://forum.unity3d.com/threads/texture-awakefromload.69730/#post-446829)

# c++ - ASSERT 创建 D2D 渲染目标失败

> ID：14215825
> 
> 赞同：0
> 
> 时间：2013-01-08T13:17:26.810
> 
> 标签：c++, mfc, assert, direct2d

我正在构建一个 MFC c++ 程序。

该程序包含一个名为 faceTracking 的类。这个类通常只有一个绘图作业，因此我只传递了它需要绘制到的 MFC 对象。这工作得很好。

最近程序发生了一些变化，现在我需要这个类不仅可以绘制图片，还可以在屏幕上绘制一些文本。所以我改变了一些东西，现在我传递了完整的 MFC 对象，并在创建渲染目标时使用 getDlgItem 将正确的 hwnd 传递给 Direct2D：

```
D2D1_RENDER_TARGET_PROPERTIES rtProps = D2D1::RenderTargetProperties();
rtProps.pixelFormat = D2D1::PixelFormat( DXGI_FORMAT_B8G8R8A8_UNORM, D2D1_ALPHA_MODE_IGNORE);
rtProps.usage = D2D1_RENDER_TARGET_USAGE_GDI_COMPATIBLE;
hr = d2DFactory->CreateHwndRenderTarget(
    rtProps,
    D2D1::HwndRenderTargetProperties(GetDlgItem(hWnd,1010), size),
    &renderTarget
    ); 
```

在我看来，这没有任何改变。因为通常在制作 FaceTracker 对象时，我会这样做：

```
faceTracker = new FaceTracking(getDlgItem(hWnd,1010), d2DFactory); 
```

我把它改成这样：

```
faceTracker = new FaceTracking(hWnd, d2DFactory); 
```

所以应该没什么区别。但确实如此：程序总是运行良好，现在启动它会出现以下错误：

![断言错误](../Images/059c2ac24943dd531d8e6f05cd0de260.png) 如果我按忽略程序运行正常。没有更多的错误，这只是一个断言失败。错误发生在此语句中：

```
hr = d2DFactory->CreateHwndRenderTarget(
    rtProps,
    D2D1::HwndRenderTargetProperties(GetDlgItem(hWnd,1010), size),
    &renderTarget
    ); 
```

并被扔在这里：

```
CWnd* CWnd::GetDlgItem(int nID) const
{
    ASSERT(::IsWindow(m_hWnd));

    if (m_pCtrlCont == NULL)
        return CWnd::FromHandle(::GetDlgItem(m_hWnd, nID));
    else
        return m_pCtrlCont->GetDlgItem(nID);
} 
```

所以，我的实际问题是：为什么断言失败，为什么似乎没有实际错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:33:55.733

你说'启动它'，所以可能在创建窗口之前？根据断言发生的位置 (ASSERT(::IsWindow(m_hWnd));)，m_hWnd（即，您正在调用 GetDlgItem() 的窗口）尚未创建。这将导致 GetDlgItem() 返回 null，这可能会导致您的 d2DFactory->CreateHwndRenderTarget() 调用失败，并且检查返回的 HRESULT 的代码将确保之后不会发生任何不好的事情。

为了避免断言，我认为（在不了解您的程序的情况下）您可以通过放置

```
if (IsWindow(m_hWnd)) {
    ... create render target
} 
```

围绕使渲染目标的部分。

# asp.net - 从 gridview 获取总计

> ID：14215831
> 
> 赞同：1
> 
> 时间：2013-01-08T13:17:43.770
> 
> 标签：asp.net, gridview

是否可以遍历gridview（与数据库绑定）中的每个变量以从gridview获取总计？

```
<asp:TemplateField HeaderText="Unit Price">
<ItemTemplate>
          <asp:Label ID="UnitPriceField" runat="server" Text='<%# Eval("ProductPrice")%>'>             
          </asp:Label>
</ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:23:49.547

`GridViewRows`使用 Linq循环的简单方法：

```
double total = gridView1.Rows.Cast<GridViewRow>()
          .Sum(r => double.Parse(((Label)r.FindControl("UnitPriceField")).Text)); 
```

但是，请注意，在数据库中而不是在 GUI 中计算这些东西总是更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:19:57.013

[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)可以做你需要的，有很多例子：

[ASP.NET 2.0 的 GridView 示例：在页脚中显示摘要数据](http://msdn.microsoft.com/en-us/library/ms972833.aspx)

# php - MongoConnectionException - 无法连接到：localhost:27017

> ID：14215833
> 
> 赞同：4
> 
> 时间：2013-01-08T13:17:46.690
> 
> 标签：php, mongodb, mongodb-php

我使用以下 PHP 代码连接到 MongoDB：

```
$m = new MongoClient("mongodb://localhost:27017"); 
```

但是，我收到以下错误：

> 致命错误：未捕获的异常“MongoConnectionException”，消息“无法连接到：localhost：27017：未知错误”

我尝试了许多在各种博客中发布的连接字符串的可能性；没有任何帮助。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:35:34.427

如果有人遇到此问题，请先参考以下链接。

[连接字符串 URI 格式](http://docs.mongodb.org/manual/reference/connection-string/#connection-string-uri-format)

[PHP MongoClient](http://php.net/manual/en/class.mongoclient.php)

在我的情况下，迈克菲防火墙导致了这个问题。当我“关闭”防火墙时，它开始工作..

# asp.net - 当有新数据可用时如何响应？

> ID：14215835
> 
> 赞同：1
> 
> 时间：2013-01-08T13:17:53.680
> 
> 标签：asp.net, ajax

我正在做聊天项目。我每 2 秒向服务器发送一个 AJAX 请求以接收新数据，但在大多数情况下，服务器上不存在任何新数据。
我想在新数据可用时响应新数据。换句话说，我不想每 2 秒重复一次请求。
当有新数据可用时，我如何响应客户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:21:11.833

我不确定到目前为止你已经实现了什么，但你可能想看看 Asp.net [SignalR](http://signalr.net)是 asp.net 系列的新成员。我认为它更适合您想要实现的目标。

# git - git 空白提交的解决方法：仅提交“真实”更改

> ID：14215837
> 
> 赞同：3
> 
> 时间：2013-01-08T13:18:10.117
> 
> 标签：git, git-commit

最近，我开始在一家新公司担任开发人员。他们中的大多数人不习惯使用“格式化代码”的快捷方式。我的手指实际上在每一行代码之后都在做`ALT`++ ，因为我已经使用 Netbeans 大约 6 年了`SHIFT`。`F`但是现在我必须开发 .NET，所以我使用 VS2012 并将命令的快捷方式绑定到 ++ `Edit.FormatDocument`，`ALT`我仍然在发送垃圾邮件:)。`SHIFT``F`

唯一的问题是我的同事们不是很喜欢这个`Edit.FormatDocument`，他们都是手工做的。因此，从我的角度来看，现在的每一次提交都充满了空格变化……：/**缩进样式（制表符与空格）的变化尤其引人注目。**

是的，我在[这里](https://stackoverflow.com/questions/13793241/make-git-undo-any-whitespace-only-changes)和[这里](https://stackoverflow.com/questions/3515597/git-add-only-non-whitespace-changes)看到了一些例子，但它们并不那么容易......而且它们可能已经过时了。Git 中没有任何功能可以帮助我吗？

**是否可以在Git中打开一个`config`项目？`ignore whitespace``committing`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:55:35.200

如果您的文件中的空格不重要，您可以指示`git`忽略一些警告：

```
git config --global apply.whitespace nowarn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T16:42:53.540

为什么不更改自动格式化设置以匹配其他开发人员使用的设置？如果它*看起来*完全一样，我不明白为什么会伤害你。VS 允许您“用空格替换制表符”以及指定制表符宽度。

# sql - 在 Excel 中使用 SQL 设置差异查询

> ID：14215838
> 
> 赞同：0
> 
> 时间：2013-01-08T13:18:11.907
> 
> 标签：sql, vba, excel

我正在使用以下 SQL 查询来比较两个 Excel 工作表（两者的设置差异）

```
strSql = "SELECT [CD_CLIENTE], [NM_CLIENTE], [CPF/CNPJ], [DS_DOCUMENTO], [DTVALIDADE] FROM [BaseAnterior$] " & _
         "WHERE NOT EXISTS  ( " & _
            "SELECT * FROM [BaseAtual$] WHERE" & _
                "[BaseAtual$].[CD_CLIENTE] = [BaseAnterior$].[CD_CLIENTE] AND " & _
                "[BaseAtual$].[NM_CLIENTE] = [BaseAnterior$].[NM_CLIENTE] AND " & _
                "[BaseAtual$].[DS_DOCUMENTO] = [BaseAnterior$].[DS_DOCUMENTO] AND " & _
                "[BaseAtual$].[CPF/CNPJ] = [BaseAnterior$].[CPF/CNPJ] AND " & _
                "[BaseAtual$].[DTVALIDADE] = [BaseAnterior$].[DTVALIDADE]" & _
            ")" 
```

该语句工作正常，问题是它非常缓慢。工作表有 aprox。100k 条记录（不要问我为什么它们不在一个严肃的数据库中）并且执行可能需要几分钟。我知道问题出在我的 SQL 语句上，所以我的问题是：**有没有更快的方法来选择 SQL 中的集合差异？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:24:05.453

首先尝试按所有列排序两张表，然后尝试以下操作：

```
strSql = "SELECT " &_
      "[B1].[CD_CLIENTE], [B1].[NM_CLIENTE], [B1].[CPF/CNPJ], [B1].[DS_DOCUMENTO], [B1].[DTVALIDADE], " &_
      "[B2].[CD_CLIENTE], [B2].[NM_CLIENTE], [B2].[CPF/CNPJ], [B2].[DS_DOCUMENTO], [B2].[DTVALIDADE] " &_
    [FROM BaseAnterior$] [B1] " & _
         "FULL JOIN [BaseAtual$] [B2] " & _
                "ON [B2].[CD_CLIENTE] = [B1].[CD_CLIENTE] AND " & _
                "[B2].[NM_CLIENTE] = [B1].[NM_CLIENTE] AND " & _
                "[B2].[DS_DOCUMENTO] = [B1].[DS_DOCUMENTO] AND " & _
                "[B2].[CPF/CNPJ] = [B1].[CPF/CNPJ] AND " & _
                "[B2].[DTVALIDADE] = [B1].[DTVALIDADE]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:14:37.833

最快的方法可能是根本不使用 SQL。请执行下列操作：

1.  按列列表对两张表上的记录进行排序
2.  向下列表并比较记录与记录

Excel 在排序记录方面做得很好。比较应该非常快。

在原始公式中，必须将一张纸中的每条记录与另一张纸中的所有（也许是一半）记录进行比较。这需要很长时间。

# php - 如何返回两个控制器变量并查看 html 内容作为 ajax json 响应

> ID：14215839
> 
> 赞同：1
> 
> 时间：2013-01-08T13:18:14.080
> 
> 标签：php, ajax, json, cakephp

我正在使用 CakePHP 并使用 MVC 标准。

我正在使用 ajax 发送请求，并且需要以与高音响应相同的方式进行响应，请参阅下面的高音示例响应。

就像高音喇叭发送：

```
{
"user_id":"155dsfds95",
"html":" \u003Cdiv class=\"module profile-card component profile-header\" data-component-term=\"profile_follow_card\" \u003E\n ",
"screen_name":"abc"
} 
```

我需要从控制器和视图中发送`user_id`和发送内容。`screen_name``html`

我的回复数据如下：

```
$response['user_id'] = $id;
$response['screen_name'] = 'some_name'; 
```

截至目前，我可以发送`user_id`并`screen_name`作为`json_encode($response)`

但是如何`data`在响应的索引中发送视图内容呢？

**更新**

我不想在控制器中制作 html 内容，而应该来自视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:45:22.957

您可以轻松地从控制器呈现当前视图并返回 JSON 响应。

工作示例：

```
public function index() {
    $response = $this->render();
    $data = array(
        'json_key_1' => 'value1',
        'json_key_2' => 123,
        'action_html' => $response->body()
    );
    $options = array(
        'type' => 'json',
        'body' => json_encode($data)
    );
    return new CakeResponse($options);
} 
```

# android - 如何为 Pantech Element 指定正确的编解码器？

> ID：14215842
> 
> 赞同：2
> 
> 时间：2013-01-08T13:18:27.953
> 
> 标签：android, codec, mediarecorder, android-mediarecorder

我们正在构建一个使用 MediaRecorder 在 Android 上录制视频的应用程序，它可以在大多数硬件平台上完美运行。然而，Pantech 的 Element 平板电脑已被证明是一个挑战。当平板电脑在 Android 2.3.1 上时，应用程序在 MediaRecorder.start() 上崩溃。所以我们将平板电脑升级到 4.0.4，它停止了崩溃。

但是，现在它创建了文件，但创建的文件无法通过平板电脑或 PC 打开。我很确定存在编解码器问题，但我发现在 Android 上指定编解码器是一种令人抓狂的体验。

这是我们的 MediaRecorder 代码：

> mRecorder = new MediaRecorder();
> 
> mCamera = Camera.open();
> 
> mCamera.unlock();
> 
> mRecorder.setCamera(mCamera); mRecorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT); mRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA); mRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264); mRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIG H)); mRecorder.setOutputFile(fileToSave); mRecorder.setPreviewDisplay(mPreview.getHolder().getSurface()); mRecorder.prepare(); mRecorder.start(); //这调用很好，但一秒钟后崩溃

这是我们的应用程序录制视频时的 ADB 日志： ![在此处输入图像描述](../Images/2f11550773423f33258a3f62f82c5a43.png)

这是 Element 上的摄像机应用程序录制视频时的 ADB 日志： ![在此处输入图像描述](../Images/b99052271112cc4a54ea5bae02f086b6.png)

所以我可以从中收集到的是，当我们调用 .start() 时，我们得到一个 ERROR(0x80001009, 0) 并且 OMX IL 处于状态 3。
我不确定“17 级”与“19 级”是什么意思，但这是两个日志之间的另一个区别。

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:21:01.440

我认为配置文件/级别是指 H.264 配置文件和级别（尽管不是它们通常的编码方式：常见的 H.264 级别是 3.2、4.1，通常编码为 32、41；那么 17 是？？）。如果为真，那么它将受到您为 mediarecorder 提供的其他设置的影响，尤其是分辨率、比特率和 fps。

```
mMediaRecorder.setVideoFrameRate(mFPS);
mMediaRecorder.setVideoEncodingBitRate(mBitrate);
mMediaRecorder.setVideoSize(mWidth, mHeight); 
```

我还注意到您从未设置输出格式。尝试这个：

```
mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4); 
```

PS您也可以尝试省略对`mRecorder.setProfile()`too的调用，看看日志中的配置文件是否更改，以及它是否有效。

# css - “&”在 LESS CSS 中有什么作用？

> ID：14215843
> 
> 赞同：23
> 
> 时间：2013-01-08T13:18:30.310
> 
> 标签：css, css-selectors, less

试图弄清楚`&`以下代码中的作用？

```
 .controls-container  {
        .flex-control-nav  {
            li a  {
                &.flex-active  {
                    filter: none;
                    background: @color_links!important;
                }
            }
        }
    } 
```

我知道你可以做类似的事情`&:hover`，但不熟悉在它之后显示一个类？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-08T13:21:00.383

> 我知道你可以做类似的事情`&:hover`，但不熟悉在它之后显示一个类？

这里的[逻辑相同](http://lesscss.org/#-nested-rules)：将内部选择器链接到外部选择器表示的任何内容。伪类 like`:hover`和 classes like`.flex-active`的行为与`&`.

将其编译为 CSS 将产生一个带有选择器的规则

```
.controls-container .flex-control-nav li a.flex-active 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-08T13:24:29.497

## 编译器将用当前外部选择器替换“&”

这使得为​​ ie `:hover`、`:active`等`:before`或任何其他情况提供不同的样式成为可能。

在您的情况下，最里面的选择器在编译后在生成的 CSS 文件中看起来像这样：

```
.controls-container .flex-control-nav li a.flex-active { ... } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-08T15:11:28.610

将`&`父嵌套结构附加到`&`可能发生的位置。正如其他人所指出的那样，`&`在您的示例中放入完整的嵌套字符串`.controls-container .flex-control-nav li a`并替换`&`您的代码中的（在这种情况下）导致`.flex-active`类与标签***结合***`a`......

```
.controls-container .flex-control-nav li a.flex-active 
```

...*而不是***`a`标签的***孩子...*****

 **```
.controls-container .flex-control-nav li a .flex-active 
```

如果您只是将其视为选择器的“字符串替换”，它将帮助您进行可视化。例如这个（注意我放的地方`&`）......

```
.controls-container  {
    .flex-control-nav  {
        li a  {
            .flex-active & {
                filter: none;
                background: @color_links!important;
            }
        }
    }
} 
```

...会产生这个选择器...

```
.flex-active .controls-container .flex-control-nav li a 
```

...因为它会在 class*之后*附加嵌套结构`.flex-active`。**

# iphone - 键盘覆盖 iPhone 上的 textview

> ID：14215845
> 
> 赞同：0
> 
> 时间：2013-01-08T13:18:31.790
> 
> 标签：iphone, objective-c, ios6, uitextview, uitextviewdelegate

我是 iPhone 应用程序的新手。下面是我所拥有的...

![在此处输入图像描述](../Images/5552f5bef41efefcbebba0e82bd9250a.png)

当我输入项目名称时，我会看到带有完成选项的正确屏幕。当我单击完成时，键盘被隐藏。

![在此处输入图像描述](../Images/0222958c4ccd0b2820507b3b1594eef7.png)

时间也一样。

现在，当我单击描述并输入内容时，我得到如下屏幕。

![在此处输入图像描述](../Images/8a75c2dfb553a2e3eda7317234cfbc56.png)

**现在我的问题是，我看不到`UITextView`，因此我看不到我正在输入的内容。**

**我怎样才能显示，`UITextView`以便我可以看到我正在输入的内容。**

* * *

## 更新 1

![在此处输入图像描述](../Images/86c369831d8de7a05fcb8b92ae12ac9c.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T13:23:10.637

首先将这些整个控件放入`UIScrollView`并按原样设置，

在`UITextView`委托方法中`textViewDidBeginEditing`设置视图框架后，如下所示......

```
-(void)textViewDidBeginEditing:(UITextView *)textView
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.3];
    yourScrollView.frame = CGRectMake(yourScrollView.frame.origin.x, -160, yourScrollView.frame.size.width, yourScrollView.frame.size.height);
    [UIView commitAnimations];

} 
```

并且在返回后也像以前一样设置，如下所示......

```
-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    if ([text isEqualToString:@"\n"]) 
    {
        [textView resignFirstResponder];
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.3];

        yourScrollView.frame = CGRectMake(yourScrollView.frame.origin.x, 0, yourScrollView.frame.size.width, yourScrollView.frame.size.height);
        [UIView commitAnimations];
        return NO;
    }
    return YES;
} 
```

您还可以设置框架`UIView`而不是`UIScrollView`..

还首先将委托给`UITextView`并将此委托添加到`.h`文件中

我希望这对你有帮助......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:22:11.287

在 viewDidLoad 中为键盘隐藏/显示通知设置以下代码

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWasShown:)
                                                 name:UIKeyboardDidShowNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillBeHidden:)
                                                 name:UIKeyboardWillHideNotification object:nil]; 
```

并设置此方法并更改此代码中的视图框架

```
- (void)keyboardWasShown:(NSNotification *)aNotification
{

}

- (void)keyboardWillBeHidden:(NSNotification *)aNotification
{

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:22:51.190

将所有内容放在 a 中，并在它处于活动状态时`UIScrollView`使用`scrollRectToVisible:animated:`滚动到正确的位置。`TextField`

此外，您必须根据是否显示键盘来调整滚动视图的大小，因此您需要设置`TextField delegates`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T13:23:33.567

用于`UIScrollView`所有控件后面的设计并将其设置在`contentsize`第二`beginEditing`（时间）文本字段`TextView`或`TextFieldShouldReturn`第二（时间）文本字段上。

# jslint - 如何忽略 jslint cli 中的缩进错误（对于节点）

> ID：14215846
> 
> 赞同：2
> 
> 时间：2013-01-08T13:18:32.920
> 
> 标签：jslint

我正在节点上开发一些东西。我真的想忽略所有与缩进相关的错误，但只想捕获关键错误，例如忘记 var 或破坏代码的语法错误等。

我应该如何在 jslint (cli) 中指定它？我已经通过 npm 安装了 jslint。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:49:44.810

您可以使用该`white`选项告诉 JSLint 忽略空格格式错误。您可以使用指令在单个文件的顶部设置这些选项`jslint`：

```
/*jslint white: true */ 
```

[您可以在JSLint 网站](http://www.jslint.com/lint.html)上找到所有可用选项的列表。

# java - jTextField 验证数字和一位小数？

> ID：14215847
> 
> 赞同：2
> 
> 时间：2013-01-08T13:18:40.923
> 
> 标签：java, swing, validation, decimal, jtextfield

我需要设置一个 jTextField 只接受数字和一个小数点。没有别的。小数点不能多次输入，也不能输入其他字符。我怎样才能做到这一点？

我输入了这段代码。但效果不好。我的意思是它接受字符串，直到我输入小数点

```
 if (!Character.isDigit(evt.getKeyChar()) & crqty.getText().indexOf(".") != -1) {
        evt.consume();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T14:06:01.737

您似乎正在使用 a`KeyListener`来管理`KeyEvents in the`JTextField。这不是一个适合过滤this的文件`JTextComponent`。在这里，您可以使用 a`JFormattedTextField`与 a的组合`MaskFormatter`来接受最多 8 位以小数点分隔的数字。

```
JFormattedTextField textField = new JFormattedTextField();
MaskFormatter dateMask = new MaskFormatter("####.####");
dateMask.install(textField); 
```

对于更自由格式的输入（例如更多数字），您可以使用 a`DocumentFilter`和 a `JTextField`。这是一个整数过滤器[示例](https://stackoverflow.com/questions/11093326/restricting-jtextfield-input-to-integers)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T16:37:12.407

非常好的问题！我很久以前下载了这段代码（我不记得是哪个网站了），它只允许你输入一个数字：

```
import java.awt.Color;
import javax.swing.JTextField;
import javax.swing.text.*;

public class JNumericField extends JTextField {
    private static final long serialVersionUID = 1L;

    private static final char DOT = '.';
    private static final char NEGATIVE = '-';
    private static final String BLANK = "";
    private static final int DEF_PRECISION = 2;

    public static final int NUMERIC = 2;
    public static final int DECIMAL = 3;

    public static final String FM_NUMERIC = "0123456789";
    public static final String FM_DECIMAL = FM_NUMERIC + DOT; 

    private int maxLength = 0;
    private int format = NUMERIC;
    private String negativeChars = BLANK;
    private String allowedChars = null;
    private boolean allowNegative = false;
    private int precision = 0;

    protected PlainDocument numberFieldFilter;

    public JNumericField() {

        this(2, DECIMAL);
    }

    public JNumericField(int iMaxLen) {
        this(iMaxLen, NUMERIC);
    }

    public JNumericField(int iMaxLen, int iFormat) {
        setAllowNegative(true);
        setMaxLength(iMaxLen);
        setFormat(iFormat);

        numberFieldFilter = new JNumberFieldFilter();
        super.setDocument(numberFieldFilter);
    }

    public void setMaxLength(int maxLen) {
        if (maxLen > 0)
            maxLength = maxLen;
        else
            maxLength = 0;
    }

    public int getMaxLength() {
        return maxLength;
    }

    public void setEnabled(boolean enable) {
        super.setEnabled(enable);

        if (enable) {
            setBackground(Color.white);
            setForeground(Color.black);
        } else {
            setBackground(Color.lightGray);
            setForeground(Color.darkGray);
        }
    }

    public void setEditable(boolean enable) {
        super.setEditable(enable);

        if (enable) {
            setBackground(Color.white);
            setForeground(Color.black);
        } else {
            setBackground(Color.lightGray);
            setForeground(Color.darkGray);
        }
    }

    public void setPrecision(int iPrecision) {
        if (format == NUMERIC)
            return;

        if (iPrecision >= 0)
            precision = iPrecision;
        else
            precision = DEF_PRECISION;
    }

    public int getPrecision() {
        return precision;
    }

    public Number getNumber() {
        Number number = null;
        if (format == NUMERIC)
            number = new Integer(getText());
        else
            number = new Double(getText());

        return number;
    }

    public void setNumber(Number value) {
        setText(String.valueOf(value));
    }

    public int getInt() {
        return Integer.parseInt(getText());
    }

    public void setInt(int value) {
        setText(String.valueOf(value));
    }

    public float getFloat() {
        return (new Float(getText())).floatValue();
    }

    public void setFloat(float value) {
        setText(String.valueOf(value));
    }

    public double getDouble() {
        return (new Double(getText())).doubleValue();
    }

    public void setDouble(double value) {
        setText(String.valueOf(value));
    }

    public int getFormat() {
        return format;
    }

    public void setFormat(int iFormat) {
        switch (iFormat) {
        case NUMERIC:
        default:
            format = NUMERIC;
            precision = 0;
            allowedChars = FM_NUMERIC;
            break;

        case DECIMAL:
            format = DECIMAL;
            precision = DEF_PRECISION;
            allowedChars = FM_DECIMAL;
            break;
        }
    }

    public void setAllowNegative(boolean b) {
        allowNegative = b;

        if (b)
            negativeChars = "" + NEGATIVE;
        else
            negativeChars = BLANK;
    }

    public boolean isAllowNegative() {
        return allowNegative;
    }

    public void setDocument(Document document) {
    }

    class JNumberFieldFilter extends PlainDocument {
        private static final long serialVersionUID = 1L;

        public JNumberFieldFilter() {
            super();
        }

        public void insertString(int offset, String str, AttributeSet attr)
                throws BadLocationException {
            String text = getText(0, offset) + str
                    + getText(offset, (getLength() - offset));

            if (str == null || text == null)
                return;

            for (int i = 0; i < str.length(); i++) {
                if ((allowedChars + negativeChars).indexOf(str.charAt(i)) == -1)
                    return;
            }

            int precisionLength = 0, dotLength = 0, minusLength = 0;
            int textLength = text.length();

            try {
                if (format == NUMERIC) {
                    if (!((text.equals(negativeChars)) && (text.length() == 1)))
                        new Long(text);
                } else if (format == DECIMAL) {
                    if (!((text.equals(negativeChars)) && (text.length() == 1))) 
                        new Double(text);

                    int dotIndex = text.indexOf(DOT);
                    if (dotIndex != -1) {
                        dotLength = 1;
                        precisionLength = textLength - dotIndex - dotLength;

                        if (precisionLength > precision)
                            return;
                    }
                }
            } catch (Exception ex) {
                return;
            }

            if (text.startsWith("" + NEGATIVE)) {
                if (!allowNegative)
                    return;
                else
                    minusLength = 1;
            }

            if (maxLength < (textLength - dotLength - precisionLength - minusLength))
                return;

            super.insertString(offset, str, attr);
        }
    }
} 
```

您将以这种方式使用它：

```
JNumericField numField = new JNumericField();

numField.setMaxLength(10); //Set maximum length             
numField.setPrecision(1); //Set precision (1 in your case)              
numField.setAllowNegative(true); //Set false to disable negatives 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-22T04:08:22.013

你可以对你的 JTextField 做简单的验证......

```
JTextField.addKeyListener(new java.awt.event.KeyAdapter() {
  public void keyTyped(java.awt.event.KeyEvent evt) {

    char text[];
        int count = 0; 
        text = JTextField.getText().toCharArray();
        for(int i = 0 ; i< text.length ; i++){
            if(text[i] == '.'){
                count++;
            }
        }
        if(count>=1 && evt.getKeyChar() == '.'){
            evt.consume();
        }

  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-04T19:52:01.117

```
 if(!Character.isDigit(evt.getKeyChar())&&evt.getKeyChar()!='.'){
       evt.consume();
   } 
   if(evt.getKeyChar()=='.'&&jTextField1.getText().contains(".")){
      evt.consume();
       } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-12T06:04:32.910

```
char c=evt.getKeyChar();
if(!(Character.isDigit(c)||
    (c==KeyEvent.VK_BACK_SPACE)||c==KeyEvent.VK_DELETE||evt.getKeyChar() == '.')){
//  evt.getKeyChar() == '.' does accept point when jtextfield accepts decimal number
  evt.consume();
  getToolkit().beep();
} 
```

# java - 动态更新我在应用程序中使用的 Jar 文件

> ID：14215854
> 
> 赞同：1
> 
> 时间：2013-01-08T13:19:04.453
> 
> 标签：java, dynamic, jar

在我的应用程序中，我正在使用其他应用程序的外部 jar。当这个其他应用程序更新时，我在我的应用程序中使用的 jar 文件也会动态更新。我需要这方面的帮助。我们是否有任何 Java 代码用于动态更新引用的 jar 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:21:32.893

您应该使用单独的类加载器来动态加载 jar 文件，如果有更新的版本可用，请使用新的类加载器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:21:36.320

尝试使用[Ant](http://ant.apache.org/)脚本来做到这一点。有一些标签可用于从一个项目复制到另一个项目。此外，您可以在运行时生成 jar 文件。

# html - Backbone.js 获取 PDF 响应

> ID：14215855
> 
> 赞同：4
> 
> 时间：2013-01-08T13:19:05.280
> 
> 标签：html, pdf, backbone.js, backbone-views

当我从服务器发出一个 get 请求时，我得到一个 pdf 的字节数组响应。

![在此处输入图像描述](../Images/1dcfd84401fe48315d32d86e94ab4444.png)

如何使用backbone.js 在我的网页上显示它？

到目前为止，我一直在使用backbone.js 并毫无问题地渲染JSON数据，但现在我被卡住了。

**澄清：**

我需要创建一个主干视图来显示我通过 GET 请求获得的 PDF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:02:41.267

我假设您的 GET 请求是通过 AJAX 请求，该请求以字符串（而不是字节数组）的形式返回数据。无法将字符串转换为 PDF。

替代解决方案。我会将 PDF 流式传输并缓存或临时保存在服务器中的某个位置，然后您的 HTTP 响应将是 PDF 位置的路径。您可以在 x 时间后添加令牌、过期或删除临时 PDF。

然后，您可以使用 Backbone 使用 `<embed src="/some.pdf" />`

# scala - 使用 Scala 2.10 更新到 Eclipse Juno 后，多维数组声明失败

> ID：14215857
> 
> 赞同：4
> 
> 时间：2013-01-08T13:19:07.093
> 
> 标签：scala, eclipse-juno, scala-2.10, scala-ide

我最近更新到 Eclipse Juno，因此也更新到 Scala 2.10。我之前的代码可以完美运行，但是，在更新之后，我收到此行的“构造函数数组的参数过多”错误：

```
var labyrinth = new Array[Array[Cell]](lines.length, lines.apply(0).length); 
```

它应该代表一个二维数组。我想知道问题是什么，因为它以前一直在工作。当我运行项目（忽略错误）时，它不会编译，并且给我一个“找不到类”异常。

我在 OSX Lion 上使用 Scala 2.10 运行 Eclipse Juno。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T13:32:42.593

[自scala](http://www.scala-lang.org/api/2.9.2/index.html#scala.Array)以来，不推荐使用构造函数创建数组`2.8`。你应该`Array.ofDim[Cell](lines.length, lines.apply(0).length)`改用。

# ibm-connections - 是否可以将 IBM Connections 导航标题添加到外部应用程序中？

> ID：14215859
> 
> 赞同：-1
> 
> 时间：2013-01-08T13:19:18.307
> 
> 标签：ibm-connections, ibm-sbt

我一直在寻找一种将 IBM Connections 标头导航注入外部应用程序的方法：

![](../Images/2394b2cd254b31af6be6e961f210f558.png)

我确信有一种方法可以用 JavaScript 做到这一点，但找不到任何文档来证实这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:44:13.337

文档将在 oneui 的主题自定义中，这是 Connections 4.0 中 ui 的基础

[http://infolib.lotus.com/resources/oneui/3.0/docPublic/index.htm](http://infolib.lotus.com/resources/oneui/3.0/docPublic/index.htm)

我会先尝试一个可调整大小的 iframe，但这是一个猜测。

# linux - 如何从shell检测wget的下载速度为零

> ID：14215863
> 
> 赞同：1
> 
> 时间：2013-01-08T13:19:30.737
> 
> 标签：linux, bash, wget

大家。我试着用这个命令：`wget -c -i file`。并且通常，某些包可能长时间下载速度为零。所以我想跳过这些包，然后继续 wget。
现在，问题是我如何检测下载速度是否在指定时间内为零，比如 5 分钟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:21:22.127

来自 wget 手册

```
 --read-timeout=seconds
       Set the read (and write) timeout to seconds seconds.  The "time" of
       this timeout refers to idle time: if, at any point in the download,
       no data is received for more than the specified number of seconds,
       reading fails and the download is restarted.  This option does not
       directly affect the duration of the entire download.

       Of course, the remote server may choose to terminate the connection
       sooner than this option requires.  The default read timeout is 900
       seconds. 
```

# django - 在 Google App Engine 上使用 Django/Grappelli 会导致管理员列表视图出现 Javascript 错误

> ID：14215870
> 
> 赞同：1
> 
> 时间：2013-01-08T13:19:48.497
> 
> 标签：django, google-app-engine, django-grappelli

我已将我的 Django 应用程序部署到 Google App Engine。它在管理应用程序中使用 grappelli 以获得额外的效果，虽然它似乎运行良好，但我似乎无法摆脱一个巨大的绊脚石。[此处](https://github.com/sehmaschine/django-grappelli/issues/214)提到了该问题，并在管理应用程序的列表视图中表现出来。不可能从列表中选择模型并对它们执行任何预定义的操作。

在管理应用程序的所有列表视图中，我收到一个 Javascript 错误：

```
Uncaught TypeError: Object [object Object] has no method 'actions' 
```

它发现它起源于以下 Javascript 代码片段：

```
 <script type="text/javascript" charset="utf-8">
        (function($) {
            $(document).ready(function() {
                $("tr input.action-select").actions();
            });
        })(grp.jQuery);
    </script> 
```

我做过的事情：

*   我通过将包添加到我的 Django 应用程序来部署 grappelli。
*   我`STATIC_ROOT`在我的`settings.py`.
*   我在部署前跑去`manage.py collecstatic`收集静态文件。所有静态文件现在都位于应用程序根目录中的静态目录中，如`settings.py`.
*   我检查了生成的页面源代码，似乎所有必需的 Javascript 库都正确地包含在它们各自的静态目录中。我通过将生成的页面源与本地运行版本（没有此问题）进行比较来仔细检查，它们是相同的。
*   我清除了浏览器缓存。

问题很可能是由我的配置引起的——因为该应用程序在我的本地机器上运行完美——但我找不到任何错误。关于如何解决这个问题的任何想法？

**编辑：**为了完整起见，我使用`Django 1.4`并`grappelli 2.4`运行`Google Cloud SQL`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:33:37.623

这仍然是一个谜，除了评论中描述的方式外，我无法解决它。根据 Github 上的问题列表，对于一些没有明确解决方案的用户来说，这是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T22:57:20.513

通过查看这张票：[https ://github.com/sehmaschine/django-grappelli/issues/214](https://github.com/sehmaschine/django-grappelli/issues/214)

您的问题可能可以通过更改设置中的 staticfiles_finders 的顺序来解决，如下所示：

```
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    'django.contrib.staticfiles.finders.FileSystemFinder',
 ) 
```

我没有注意到的是它们必须按那个顺序排列。

清除缓存等后，它开始为我工作。

# c# - RFC 异常返回空字符串 C#

> ID：14215875
> 
> 赞同：1
> 
> 时间：2013-01-08T13:20:13.420
> 
> 标签：c#, exception, abap, sap-dotnet-connector

我使用 RFC_READ_TABLE 将数据输出到我的软件，但很多时候当 RFC 返回和异常时，它不会返回描述。例如，搜索不存在的表或查询大量列。它总是返回相同的标题*RfcAbapException*，没有细节也没有 InnerException。

我的项目中引用的 SAP dll 是 2.0 版。

编辑：

所以问题是：为什么不返回异常细节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:04:11.337

请检查您的系统中是否存在`ST22`与异常相关的短转储（事务）。如果有的话，这或多或少是设计使然。正如我试图在[这个答案](https://stackoverflow.com/questions/14125727/rfc-read-table-throws-rfcabapexception-after-querying-a-lot-of-columns/14136491)中解释的那样（虽然没有详细解释），短转储使 ABAP 处理器处于无效状态。它要么无法将任何类型的消息返回给调用者，要么将任何数据返回给调用者是不明智的，因为它可能是无效的甚至是安全问题。在这种情况下，调用将简单地失败并显示未指定的错误消息。Hogan 在另一个答案中提到的代理异常代码在这种情况下不会有任何帮助，因为它们仅针对 RFC 模块的命名异常生成，而不是基本系统或编程错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:51:22.117

据我所知，RfcAbapException 中没有包含任何描述。而是返回一个可以解码的代码。像这样：

```
catch (RfcAbapException ex)
   {
   switch (ex.AbapException)
     {
   case (SAPProxy1.No_Function_Found):
      MessageBox.Show("abap call failed because no function found");
      break;
   case(SAPProxy1.Nothing_Specified):
      MessageBox.Show("abap call failed because nothing specified");
      break;
   default:
      MessageBox.Show("Some unknown abap error occurred (" 
                       +ex.AbapException.ToString()+")");
      break;
     } //switch
} 
```

请参阅[原始来源](http://help.sap.com/saphelp_nw04/helpdata/en/45/4bb7ba84512e499be80cc79f9972be/content.htm)。

# visual-studio-2012 - TFS2012 与 VS2010 共存？

> ID：14215877
> 
> 赞同：1
> 
> 时间：2013-01-08T13:20:17.420
> 
> 标签：visual-studio-2012

我对 tfs 2012 感兴趣，但并非我们所有的项目和解决方案都在 vs2012 中。我们可以安装 tfs 2012 但仍使用 vs 2010 解决方案/项目吗？我们也进行自动化构建并将我们的构建保留在现有项目版本中？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:24:12.217

是的你可以。TFS 2008、2010 和 2012 的提供程序将愉快地共存，并且有“前向兼容性”包允许（例如）VS2010 连接到 TFS2012。

还值得注意的是，VS2012 是第一个具有向后兼容解决方案文件的 Visual Studio 版本（因此您可以混合使用 VS2012 和 VS2010 来编辑解决方案 - 除非解决方案依赖于每个特定的功能，例如 Windows 8 应用程序）

# c - 可以从第 x 行开始并返回当前行的 Linux 命令行阅读器（如“less”）

> ID：14215879
> 
> 赞同：0
> 
> 时间：2013-01-08T13:20:18.263
> 
> 标签：c, linux

[上下文] 我正在开发一个小应用程序，作为学习 ncurses 的爱好，它在一组文档中进行编目、列出和搜索（目前，它们是 LDP 的 HOWTO）。

我相信，该应用程序最棘手的部分是文件阅读器（很好地显示文件的内容）。为了真正能够提供足够好的用户体验，鉴于 HOWTO 有点长，如果我可以“保存”用户停止阅读的行，并在下次阅读时从同一行开始，这将是一个有价值的功能。用户打开相同的 HOWTO [/context]

所以真正的问题是：是否有一个命令行阅读器不仅可以获取行 X 作为参数并将光标定位在该行，还可以返回最后显示的行？或者，鉴于我将从 C 应用程序进行调用，也许是一个不是外部应用程序的不同解决方案：我愿意接受建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:22:41.020

> 但也返回最后显示的行

对此没有可移植的解决方案。请参阅[Linux 中是否有任何标准的退出状态代码？](https://stackoverflow.com/questions/1101957/are-there-any-standard-exit-status-codes-in-linux/1535733#1535733). IE：

*   该程序将如何发出错误信号？
*   它将如何表示成功？
*   它如何表示大于 255 的行号？

# iphone - 如何检查请求地址和响应地址是否相同

> ID：14215881
> 
> 赞同：2
> 
> 时间：2013-01-08T13:20:24.577
> 
> 标签：iphone, ios, afnetworking

用户使用互联网连接被重定向到互联网提供商登录页面。

在他登录之前运行请求将为您提供来自提供者的 html 数据和来自您最初请求数据的地址的数据。

有没有办法检查您请求数据的数据地址是否与您获得响应的地址相同？

IE

有没有办法获取响应 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:48:32.960

两者都有一个属性，但是比较它们`NSURLRequest`可能[不会给你想要的结果](https://stackoverflow.com/questions/5801580/how-to-compare-two-nsurls-that-are-practically-equivalent-but-have-cosmetic-stri)。这里有一个类别会有所帮助：`NSURLResponse``URL``-isEqual:` `NSURL`

```
@interface NSURL (Equivalence)
- (BOOL)isEquivalent:(NSURL *)aURL;
@end

@implementation NSURL (Equivalence)
- (BOOL)isEquivalent:(NSURL *)aURL
{
    if ([self isEqual:aURL]) return YES;
    if ([[self scheme] caseInsensitiveCompare:[aURL scheme]] != NSOrderedSame) return NO;
    if ([[self host] caseInsensitiveCompare:[aURL host]] != NSOrderedSame) return NO;
    if ([[self path] compare:[aURL path]] != NSOrderedSame) return NO;
    if ([[self port] compare:[aURL port]] != NSOrderedSame) return NO;
    if ([[self query] compare:[aURL query]] != NSOrderedSame) return NO;
    return YES;
}
@end 
```

导入该类别，您可以使用 AFNetworking 执行以下操作：

```
[self getPath:@"somePath" parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {
    if ([operation.request.URL isEquivalent:operation.response.URL]) {
        // they match
    } else {
        // there was a redirect
    }
} failure:nil]; 
```

编辑：我早就加入`NSURL+Equivalence`了我的标准工具箱，但功劳属于[danh](https://stackoverflow.com/users/294949/danh)和[这个出色的 SO 答案](https://stackoverflow.com/a/12332091/840428)。

# c# - 如何确保生成无间隙且安全的发票编号（法律问题）

> ID：14215894
> 
> 赞同：6
> 
> 时间：2013-01-08T13:21:29.160
> 
> 标签：c#, mysql, concurrency

**背景和系统视图**

我们在分布式环境中实现了计费系统。有 4 个终端，每个终端每分钟产生大约 2 个账单。我们使用 Mysql 作为后端，使用 C#、winforms 作为我们的客户端技术。

任何计费系统中最重要的约束是发票编号必须是连续的。为此，我运行类似于

*在伪代码中*

```
let x ="SELECT count(*) from Orders where IsInvoiceGenerated=1 and FinancialYear=val

new invoicenum = x + 1; 
```

**问题** 直到第 411 张发票一切正常，之后系统突然跳过了 2 张发票并生成了 414 发票。我们调查了系统状态，发现系统没有被外部篡改，我们还推断没有人从工作台访问数据库。这是一个主要问题，因为它也有法律后果。

您能否建议确保帐单编号**始终**保持连续的最佳方法。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:25:54.890

要创建唯一编号，您应该将当前编号存储在表格中，然后在创建新发票时必须执行以下步骤：

1.  开始交易
2.  从表中获取数字
3.  将编号设置为您的发票
4.  从之前的表格中设置数字 + 1
5.  犯罪

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-11T13:29:08.623

这是我想出的一个解决方案：

```
CREATE TABLE `inv` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `invNo` int(10) DEFAULT NULL,
  `invName` varchar(100) DEFAULT NULL,
  `cratetedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE     CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=latin1; 
```

并使用此查询创建新发票

```
INSERT INTO `inv` (`invNo`, `invName`) SELECT (SELECT MAX(invNo)+1 FROM `inv` FOR UPDATE) AS `invNo`, 'Invoice 1'; 
```

Using`SELECT FOR UPDATE`将在表上获得写锁，因此同时插入将被阻塞，同时对读取没有限制。所以唯一的瓶颈可能是发票创建，它一次只会发生一个，我认为这是可以接受的。

现在唯一关心的是，如果我的服务器停止、崩溃、网络丢失或发生异常情况并且代码没有机会完成事务，会发生什么情况，最终可能会出现死锁。

坦率地说，我不确定如何处理最后一种情况，但我在某处读到我们可以`wait_timeout`为此使用 MySql 属性，但不确定如何使用它。但是，我将 Spring 用于我的服务器代码并使用`@Transactional` `timeout`属性，不确定这是否会涵盖我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T16:23:08.540

在开始之前，我想向@Grumbler85 道歉——你是对的。这个问题困扰了我一段时间，我会尽我所能回答这个问题。

事务和锁定都不是足够的解决方案。

原因：锁不好，因为一旦你锁定了一个表，你必须解锁它。解锁可能会失败，我们都知道一般网络和计算机的不稳定性质。底线是 - 您必须使用 C# 应用程序来发出锁定和解锁。每次生成发票时，您都必须锁定用作计数器的表，迫使所有其他 MySQL 会话等到您释放锁定。根据我的经验，几天之内，您将不得不聘请一名管理员，其工作是释放锁定。

事务还不够好，因为每个事务都对数据的快照进行操作（简化解释，可以修改事务隔离级别）。这意味着 1 笔交易可以计算出发票编号必须为 6，而另一笔交易也可以计算出发票编号必须为 6。

您可以做的是使 invoice_number 唯一，因此如果 2 个（或更多）交易尝试插入相同的编号，您将获得其中至少 1 个的例外，从而防止出现空白但无法创建发票。

使用 auto_increment 也不是一个选项。Auto_increment 只是一个简单的计数器。这意味着 auto_increment 不会“重用”由于某种原因而丢弃的数字 - 原因是发生错误并且无法保存事务，从而有效地使为该记录计算的 auto_increment 丢失。

那么有哪些选择呢？就个人而言，我会创建一个简单的服务，它会在预定义的时间间隔内运行，它会更新尚未`invoice_number`设置的发票。该服务不会提供并发访问，并且总是有一个活动连接可以处理一组已插入的发票。

确实有法律（在某些国家，例如英格兰）规定必须有一个有序的发票编号，我也错了。资料来源：[http](http://www.hmrc.gov.uk/vat/managing/charging/vat-invoices.htm) ://www.hmrc.gov.uk/vat/managing/charging/vat-invoices.htm 来源摘录：

> 一个唯一的发票编号，它与前一张发票的编号相同——如果您损坏或取消了一张有序列号的发票，您必须保留它，以便在下次增值税检查时向增值税官员出示

最后一个选项是，如果两个或多个交易获得相同的发票编号，您对发票创建失败感到满意，这意味着您必须实施一种重新运行失败交易的方法（这很简单）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-02T19:47:12.103

哼，它可能要简单得多。

*   开始;
*   保存没有数字但精确 created_at 日期时间的发票
*   计算在此 created_at datetime & autoincrement pk 之前创建了多少张发票
*   更新发票中的编号
*   犯罪;

无需锁定任何东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-30T12:31:12.240

我已经研究这个话题半天了，我能想到的最佳解决方案如下：

我创建了一个表来存储下一个发票编号。它从 1 开始。我还指定了一个名称，这样我就可以使用同一张表处理更多序列。

```
CREATE TABLE invoice_numbers (name VARCHAR(50), number int4 DEFAULT 1); 
INSERT INTO invoice_numbers VALUES ('main'); 
```

我在草稿模式下创建发票，草稿发票没有发票编号。也可以删除草稿发票。完成最终检查后，即可最终确定发票。当然，最终的发票是不可变的。最终确定过程开始一个事务，从 invoice_numbers 表中选择适当的行进行更新。这确保只有一个进程可以在任何给定时间访问记录。我将编号分配给发票并将编号加一。最后我提交了交易。

```
START TRANSACTION;
SELECT number FROM invoice_numbers WHERE name='main' FOR UPDATE;

assign the number to the invoice and set its status to finalized;

UPDATE invoice_numbers SET number = number + 1 WHERE name='main';
COMMIT; 
```

# iphone - 如何在我的分组表视图中实现像 instagram 这样的 Stickyheader 功能？

> ID：14215895
> 
> 赞同：2
> 
> 时间：2013-01-08T13:21:31.643
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我需要在其中实现 instagram 应用程序的粘性标题功能。我有一个分组的表格视图，其中每个部分都有单行。到目前为止，我尝试的是在我的 tableview 中添加一个视图，并在滚动开始时取消隐藏它，并在滚动到达顶部时将其移除。

但是我怎样才能获取触摸该标题视图的相应单元格的单元格图像和标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:44:44.343

只需在 tableview 上方添加一个视图。使用您想要的任何凭据。然后在该类的视图 didload 中隐藏该视图。在 scrollviewdidscroll 方法中，当`float scrollOffset = scrollView.contentOffset.y`; 大于零时删除带有动画的导航栏。并取消隐藏view.and 当 scrolloffset 等于 0 时做相反的事情。

# c++ - 调整 QDockWidget 的大小

> ID：14215897
> 
> 赞同：11
> 
> 时间：2013-01-08T13:21:34.110
> 
> 标签：c++, qt, user-interface, qdockwidget

我有一个`QMainWindow`包含几个`QDockWidget`s。一次只能显示其中一个。我的问题是：

当我隐藏一个dockWidget并显示另一个时，无论我设置什么QSizePolicys、sizeHint、sizeConstraint，新显示的大小和刚刚隐藏的一样！我希望新显示的恢复它自己的最后大小，但我找不到任何方法来调整 a 的大小，而不用and`QDockWidget`固定它的大小。`setMinimumSize``setMaximumSize`

实际上有一种方法，但我认为它非常难看：

```
setMinimumWidth(500);
setMaximumWidth(500);
qApp().processEvents();
setMinimumWidth(0);
setMaximumWidth(9999); 
```

一定会有更好的办法？！有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:11:11.467

从文档中：

*QDockWidget 充​​当其子部件的包装器，使用 setWidget() 设置。应在子小部件中实施自定义尺寸提示、最小和最大尺寸以及尺寸策略。QDockWidget 将尊重它们，调整自己的约束以包括框架和标题。大小约束不应该在 QDockWidget 本身上设置，因为它们会根据它是否停靠而改变；停靠的 QDockWidget 没有框架和较小的标题栏。*

这意味着您应该调整子小部件的大小，而不是调整 DockWidget 的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T15:25:57.177

我建议超载

```
protected :
virtual bool    event ( QEvent * event ); 
```

并抓住改变你大小的事件

例如 ：

```
QRect mGeo;
bool    MyDockWidget::event ( QEvent * aEvent )
{
    if(aEvent->isAccepted ())
    {
        if(aEvent->type()==QEvent::Hide)
        {
            mGeo=this->geometry();
        }
        if(aEvent->type()==QEvent::Show)
        {
            this->setGeometry(mGeo);
        }
    }
    return QDockWidget::event(aEvent);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T00:00:51.990

我尝试了您在问题中建议的解决方案，它对我有用，尽管在小部件经历额外的绘画周期时有一个难看的闪光。我还没有找到更好的方法，所以我暂时使用它，直到 Qt 发布对 QDockWidget 的更好支持。

我希望 QDockWidget API 中会添加更多功能。这是一个很棒的 AP​​I，但仍有几个领域非常缺乏。例如，[这种获取选项卡式 QDockWidget 索引的建议方法](http://qt-project.org/faq/answer/how_can_i_check_which_tab_is_the_current_one_in_a_tabbed_qdockwidget)（直接来自 Qt FAQ）很麻烦且容易出错。

# php - 使用 graphi API 批处理请求将照片上传到 Facebook 上的多个页面

> ID：14215905
> 
> 赞同：1
> 
> 时间：2013-01-08T13:21:56.527
> 
> 标签：php, facebook, facebook-graph-api, batch-processing

我已经做了很多寻找答案，但我找不到一个。

我正在尝试使用图形 API 将单张照片上传到众多 Facebook 页面。

使用类似问题的答案，我能够得到我需要做的工作，就像这样；

```
curl 
 –F  'access_token=…' \
 -F  'batch=[{"method":"POST", \
          "relative_url":"me/photos", \
          "body":"message=Photo" \
          "attached_files":"file1" \
         },
         {"method":"POST", \
          "relative_url":"me/photos", \
          "body":"message=Photo" \
          "attached_files":"file2" \
         },
        ]’
 -F  'file1=@/tmp/photo.gif' \
 -F  'file2=@/tmp/photo.gif' \
https://graph.facebook.com 
```

这意味着对于我要发布照片的每个页面，我都必须上传照片的副本。我想做的是这样的；

```
curl 
 –F  'access_token=…' \
 -F  'batch=[{"method":"POST", \
          "relative_url":"me/photos", \
          "body":"message=Photo" \
          "attached_files":"file" \
         },
         {"method":"POST", \
          "relative_url":"me/photos", \
          "body":"message=Photo" \
          "attached_files":"file" \
         },
        ]’
 -F  'file=@/tmp/photo.gif' \
https://graph.facebook.com 
```

这似乎不起作用，将上传一张照片，批处理中的其他请求将返回错误消息；

```
{"error":{"message":"(#1) An unknown error occurred","type":"OAuthException","code":1}} 
```

如果我必须将同一张照片附加到批处理请求中，则每个请求一张。我也可以不使用批处理请求，而只为我想要上传照片的每个页面执行一个请求。

有人知道问题是什么吗？

# c - C程序中的参数类型区分

> ID：14215911
> 
> 赞同：0
> 
> 时间：2013-01-08T13:22:22.557
> 
> 标签：c, command-line-arguments, argv, argc

我有一个主要功能，

```
int main (int argc, char **argv)
{} 
```

我应该传递两个不同的命令行参数：

```
argv[1]=IP ADDRESS type
argv[2]=INTEGER type 
```

例如，`./a.out IP-ADDRESS INTEGER`。我用其他一些脚本调用这个二进制文件。

问题是虽然`argv[1]`不可用，但它的行为类似于`INTEGER`value as `argv[1]`。

我怎样才能检查 if `argv`is type `INT`don't make it to the `argv[1]`or only `IP-ADDRESS`type is allowed in `argv[1]`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T13:30:51.823

传递给主函数的 char **argv 变量不仅仅是一个“*参数*”数组，它是一个 char* 数组，仅包含您在 shell 中键入的空终止字符串。

例如，调用你的程序`./a.out 127.0.0.1 12`将使 argv 如下所示：

> `argv[0] = "./a.out\0"`
> 
> `argv[1] = "127.0.0.1\0"`
> 
> `argv[2] = "12\0"`
> 
> `argv[3] = NULL`

您需要编写一些代码来转换和存储 argv 中的字符串，以便以您想要的方式处理它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:32:36.543

```
int main (int argc, char **argv) 
```

更常见的表示为：

```
int main (int argc, char *argv[]) 
```

也就是说，`argv`是一个指向字符数组的指针。这些字符代表什么取决于您，但通常在命令行上调用程序时，这些字符将是零分隔的字符串。

如果用户不提供位置参数，那么也许您应该使用选项。见`getopt()`。

例如：

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

/* Options:
       -i : integer argument
       -p : ip address
*/
int main (int argc, char *argv[])
{
    int option;
    int integer = 0;
    char *ip_address = NULL;

    opterr = 0;
    while ( (option=getopt(argc, argv, "i:p:")) != EOF ) {
      switch ( option ) {
        case 'i': integer = atoi(optarg);
                  break;
        case 'p': ip_address = optarg;
                  break;
        case '?': fprintf(stderr,"Unknown option %c\n", optopt);
                  exit(1);
                  break;
      }
    }

    if (integer)    printf("INTEGER: %d\n", integer);
    if (ip_address) printf("IPADDRESS: %s\n", ip_address);

    return 0;
} 
```

样品运行：

```
./a.out -i 1234 -p 128.0.0.1
INTEGER: 1234
IPADDRESS: 128.0.0.1

./a.out -i 1234 
INTEGER: 1234

./a.out -p 128.0.0.1
IPADDRESS: 128.0.0.1

./a.out -p 128.0.0.1 -i 1234 
INTEGER: 1234
IPADDRESS: 128.0.0.1

./a.out -x stuff 
Unknown option x 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T13:28:33.190

实际上，argv[1] 和 argv[2] 都是 char 数组（嗯，指向以 0 结尾的 char 数组的指针，也就是 stringz）。可以告诉您该 stringz 是表示整数还是 IP 地址的唯一方法是解析它们（即将字符串转换为 IP 地址或整数）。

请记住，argv[N] 字符串的创建与存储通过命令行调用传递的参数一样多。如果用户不提供 IP-ADDRESS 参数，则不会丢失 arrgv[2]，而只是 argv[1] 将成为唯一的 stringz，因为现在只有一个参数。

基本思想：它们只是字符串，用户可以在这些字符串中传递他想要的任何东西。解析字符串并确保它们有意义是您的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:02:11.760

argv 是一个 char* 数组，带有以空字符结尾的字符串

您可以使用 argc 获取传递给程序的参数数量。

```
if(argc == 3) // you program name is counted
{
   //if ip is here
}
else if (argc == 2)
{
   //// int is here
} 
```

然后你可以检查ip是否通过。

# c++ - inotify 获取目录

> ID：14215912
> 
> 赞同：1
> 
> 时间：2013-01-08T13:22:24.720
> 
> 标签：c++, directory, inotify, watch

我想监视某些目录中新文件的创建并阅读有关[inotify](http://www.linuxforu.com/2011/04/getting-started-with-inotify/)的链接。我喜欢这个实现并使用它。但是，就我而言，我想监视一个最多具有 3 级子目录的目录。

我的想法是每次创建新目录时添加一个手表，但为了做到这一点，我需要知道创建目录的路径。不幸的是，事件结构`inotify`只能给我创建的文件目录的名称，而不是它的路径。任何人都可以为此提出一个想法吗？

```
add_watch(fd,root);
  if ( event->mask & IN_CREATE) {
        if (event->mask & IN_ISDIR){
          printf("%d DIR::%s CREATED\n", event->wd,event->name );
          strcpy(new_dir,root);
          strcat(new_dir,"/");
          strcat(new_dir,event->name);
          add_watch(fd,new_dir); 
```

其中 add_watch 是：

```
void add_watch(int fd, char *root)
  {
  int wd;
  struct dirent *entry;
  DIR *dp;

  dp = opendir(root);
  if (dp == NULL)
  {
  perror("Error opening the starting directory");
  exit(0);
  }

  /* add watch to starting directory */
  wd = inotify_add_watch(fd, root, IN_CREATE | IN_MODIFY | IN_MOVED_TO); 
```

这对于根目录来说没问题，一级子目录也被监视，但是当我尝试向二级子目录添加监视器时，路径不正确。

用netbeans7.2，ubuntu12用c ++编写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T01:31:06.100

我在[Github](https://gist.github.com/pkrnjevic/6016356)上有一个工作示例，它支持 inotify 目录创建/删除事件。一个小的 Watch 类负责将 wd（监视描述符）映射到文件/文件夹名称。这是一个片段，展示了如何处理 inotify CREATE 和 DELETE 事件。完整示例在[Github](https://gist.github.com/pkrnjevic/6016356)上。

```
 if ( event->mask & IN_CREATE ) {
                current_dir = watch.get(event->wd);
                if ( event->mask & IN_ISDIR ) {
                    new_dir = current_dir + "/" + event->name;
                    wd = inotify_add_watch( fd, new_dir.c_str(), WATCH_FLAGS );
                    watch.insert( event->wd, event->name, wd );
                    total_dir_events++;
                    printf( "New directory %s created.\n", new_dir.c_str() );
                } else {
                    total_file_events++;
                    printf( "New file %s/%s created.\n", current_dir.c_str(), event->name );
                }
            } else if ( event->mask & IN_DELETE ) {
                if ( event->mask & IN_ISDIR ) {
                    new_dir = watch.erase( event->wd, event->name, &wd );
                    inotify_rm_watch( fd, wd );
                    total_dir_events--;
                    printf( "Directory %s deleted.\n", new_dir.c_str() );
                } else {
                    current_dir = watch.get(event->wd);
                    total_file_events--;
                    printf( "File %s/%s deleted.\n", current_dir.c_str(), event->name );
                }
            } 
```

# php - 在 iOS Xcode 中将电子邮件变量发布到 PHP

> ID：14215925
> 
> 赞同：0
> 
> 时间：2013-01-08T13:23:18.580
> 
> 标签：php, ios, xcode, variables

我正在尝试将一个变量从 iOS Xcode 发布到 PHP。下面是我的脚本，但 email 变量不会在我的 PHP 中发布：

```
php code $email_from = $_POST['email']; 
```

思维`email`将来自iOS。

下面是Xcode：

```
 //Start of general request setup
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:serverLink]];
[request setHTTPMethod:httpMethod];
[request setTimeoutInterval:connectionTimeout];
NSString *stringBoundary = [NSString stringWithString:@"0xKhTmLbOuNdArY"];
NSString *contentType    = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", stringBoundary];
[request addValue:contentType forHTTPHeaderField:@"Content-Type"];
NSString *email =[NSString stringWithFormat:@"ryan"];
//End of general request setup

//Start of body setup
NSArray *parametersKeys = [parameters allKeys];
NSArray *imagesKeys = [images allKeys];

NSMutableData *postBody = [NSMutableData data];
[postBody appendData:[[NSString stringWithFormat:@"\r\n\r\n--%@\r\n", stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
BOOL addedData = NO;

for (NSString *parameterKey in parametersKeys) {
    if (addedData) {
        [postBody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
    }
    else {
        addedData = YES;
    }
    [postBody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", parameterKey] dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"%@", [parameters objectForKey:parameterKey]] dataUsingEncoding:NSUTF8StringEncoding]];
}

for (NSString *imageKey in imagesKeys) {
    if (addedData) {
        [postBody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
    }
    else {
        addedData = YES;
    }
    [postBody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"; filename=\"%@.jpg\"\r\n", imageKey, imageKey] dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[@"Content-Type: image/jpeg\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; email=\"%@\"\r\n""", email] dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[images objectForKey:imageKey]];
}    

[postBody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:postBody];
//End of body setup

NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

[parameters release];
[images release];

isSending = NO; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:16:12.910

添加这个有效

```
 [postBody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"; filename=\"%@.jpg\"\r\n", imageKey, imageKey] dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[@"Content-Type: image/jpeg\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[images objectForKey:imageKey]];

    [postBody appendData:[[NSString stringWithFormat:@"\r\n\r\n--%@\r\n", stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"email\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"email@email.com"] dataUsingEncoding:NSUTF8StringEncoding]];  // Set Email to 
```

# mysql - 使用JSP私有登录向MYSQL数据库添加信息

> ID：14215927
> 
> 赞同：1
> 
> 时间：2013-01-08T13:23:18.373
> 
> 标签：mysql, jsp, login, restriction

因此，我正在开发一个 JSP 项目，在该项目中我有一个从 MYSQL 数据库中提取信息的用户登录名。

我有一个名为 menu 的表，其中包含 menuid、名称、信息、价格和餐厅 ID。

当我登录时，我可以看到菜单、名称、信息和价格。

问题是当我需要添加菜单时。当我单击添加菜单时，我可以添加名称、信息和价格，因为 menuid 是自动递增的，但我还需要添加餐厅 ID，我不想要它。

我想要做的是，当我登录时，应该根据他添加菜单时登录的用户自动添加餐厅 ID。

我怎样才能做到这一点？

这是我在 JSP 中添加到数据库的内容：

```
 <%
        MenuId = request.getParameter("MenuId");
        Name = request.getParameter("Name");
        Info = request.getParameter("Info");
        Resturants_ResturantID = request.getParameter("Resturants_ResturantID");

        menu_price1 = request.getParameter("Price");
        if (menu_price1 != null || !"".equals(menu_price1))
            Price = Double.parseDouble(menu_price1);

        pstmt = con
                .prepareStatement("Insert into menu(MenuId,Name,Info,Price,Resturants_ResturantID) values(?,?,?,?,?)");
        pstmt.setString(1, MenuId);
        pstmt.setString(2, Name);
        pstmt.setString(3, Info);
        pstmt.setDouble(4, Price);
        pstmt.setString(5, Resturants_ResturantID);
        pstmt.executeUpdate();

        con.close();
        session.setAttribute("menu", "Menu added successfully");
        response.sendRedirect("add_menu.jsp");
    %>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:33:18.147

您可以将登录用户的 restaurantId 保留在用户会话中，并在添加菜单时将其添加到您的插入语句中。

# javascript - 使用 JSON 存储多个表单条目

> ID：14215932
> 
> 赞同：0
> 
> 时间：2013-01-08T13:23:32.740
> 
> 标签：javascript, json, html, local-storage

我正在尝试创建一个笔记网络应用程序，它将使用 HTML5 本地存储简单地存储笔记客户端。我认为 JSON 是这样做的方法，但不确定如何去做。

我有一个带有标题和文本区域的简单表单。有没有办法我可以提交表单并存储使用几个“注释”输入的详细信息，然后将它们列出来？

我是 Javascript 和 JSON 的新手，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:02:09.527

json的使用方法有很多。

1> 你可以在 HTML 页面上创建一个函数并调用 ajax 和发布数据。在这里你必须使用 $("#txtboxid").val()。获取价值并发布它。

2> 使用knock out js绑定两种方式，调用ajax。

这是调用网络应用程序的简单代码。使用ajax调用。

```
var params = { "clientID": $("#txtboxid") };     

        $.ajax({
            type: "POST",
            url: "http:localhost/Services/LogisticsAppSuite.svc/Json/GetAllLevelSubClients",
            contentType: 'application/json',

            data: JSON.stringify(params),
            dataType: 'json',
            async: false,
            cache: false,
            success: function (response) {

            },
            error: function (ErrorResponse) {

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:13:53.773

我编写了一个类似于实体框架的库。我稍后会放在[这里](http://cordova.codeplex.com)，你可以关注我或联系我获取源代码。然后你可以编写类似的js代码：

```
var DemoDbContext = function(){ // define your db
    nova.data.DbContext.call(this);
    this.notes=new nova.data.Repository(...); // define your table
}
//todo: make DemoDbContext implement nova.data.DbContext
var Notes = function(){
    this.id=0; this.name="";
}
//todo: make Note implement nova.data.Entity 
```

如何查询数据？

```
var notes = new DemoDbContext().notes.toArray(function(data){}); 
```

如何向数据库添加注释？

```
var db = new DemoDbContext();
db.notes.add(new Note(...));
db.saveChanges(callback); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:22:20.837

根据您要存储的信息的复杂性，您可能不需要 JSON。

您可以使用 HTML5 中的`setItem()`方法`localStorage`在客户端保存键/值对。您只能使用此方法存储字符串值，但如果您的笔记没有太复杂的结构，这可能是最简单的方法。假设这是您使用的一些 HTML：

```
<input type="text" id="title"></input>
<textarea id="notes"></textarea> 
```

您可以使用这个简单的 Javascript 代码来存储信息：

```
// on trigger (e.g. clicking a save button, or pressing a key)
localStorage.setItem('title', document.getElementById('title').value);
localStorage.setItem('textarea', document.getElementById('notes').value); 
```

您将使用它`localStorage.getItem()`来检索值。

[这是我创建的一个简单的 JSFiddle](http://jsfiddle.net/FZZxV/1/)，用于向您展示这些方法是如何工作的（尽管没有使用与上面完全相同的代码；这个依赖于 keyup 事件）。

我可以看到，您可能想要使用 JSON 的唯一原因是您是否需要一个对您的笔记有深度的结构。例如，您可能希望附上带有诸如撰写日期之类的信息的注释，并将它们放在如下结构中：

```
{
    'title': {
        'text':
        'date':
    }
    'notes': {
        'text':
        'date':
    }
} 
```

那将是 JSON。但请记住，该`localStorage.setItem()`方法仅接受字符串值，您需要将对象转换为字符串来执行此操作，然后在使用`localStorage.getItem()`. 这些方法`JSON.stringify`将执行对象到字符串的转换，`JSON.parse`并将执行相反的操作。但正如我所说，这种转换意味着额外的代码，只有当你的笔记需要那么复杂时才真正值得。

# java - 从 Eclipse 中的所有项目中删除未使用的导入

> ID：14215936
> 
> 赞同：14
> 
> 时间：2013-01-08T13:23:56.970
> 
> 标签：java, eclipse, import, refactoring

有没有办法、快捷方式或任何设置从**所有项目**中删除未使用的导入？**有效地从工作区？**

我发现了以下关于从单个文件中删除的问题。[如何从 Eclipse 中删除未使用的导入](https://stackoverflow.com/questions/5686825/remove-unused-import-from-eclipse)。

但我需要整个工作区？

PS：让我知道是否有任何可用于执行相同操作的插件。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-08T13:27:27.570

组合键`Ctrl+ Shift + O`- 将触发`Organize Imports`将删除和添加缺少的导入。

要将其应用于整个工作区，您只需在视图中选择项目，`Package Explorer`然后使用组合键

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T13:26:28.823

右键单击您的工作集节点或您需要的所有项目，然后选择 Source->Organize Imports。

快捷键是Ctrl+Shift+O，基本上写在菜单里，所以如果你使用不同的操作系统，你应该可以找到它。它适用于包资源管理器中的单个文件以及项目节点

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-08T19:37:04.480

如前所述，`Ctrl+ Shift + O`手动或 Window -> Preferences -> Java -> Editor -> Save Actions -> Organize Imports 以在您保存类时自动组织它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-09T11:01:53.013

Eclipse Workspace -> Java Resources -> 右键单击​​ (src/main/java) 文件夹 -> 从菜单中选择 Sorce -> 现在最后选择 Organize import 就完成了。

# html - CSS 方法而不是 display:run-in; 定位块内联？

> ID：14215939
> 
> 赞同：2
> 
> 时间：2013-01-08T13:24:04.390
> 
> 标签：html, css, firefox

由于我在使用 Firefox 时遇到问题，无法通过使用 display:run-in; 将块元素按性质（标题）定位为内联；我在请求你的帮助！现在已经搜索了很长一段时间，但我找不到可以使用哪种 CSS 方法来代替仅应用 display:run-in; 到所有主要浏览器都支持的元素。以这种方式定位元素至关重要。

任何人都知道如何做到这一点的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:33:06.047

如果您想将元素显示**为块元素**，但会将**其定位为 inline**，那么

```
display: inline-block; 
```

将为您解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:29:39.510

[MDN 仍然将](https://developer.mozilla.org/en-US/docs/CSS/display)run -in 列为实验值，所以如果它目前在 Firefox 中不能完全发挥作用，我们不应该太惊讶。

至于选项，您至少可以使用两个：`display: inline`和`display: inline-block`.

*如果您不需要标题上的块元素的属性，则*内联可能就足够了。**Inline-block*将其保留为块元素，因此您仍然可以做一些不错的事情，例如为其设置宽度、高度、边距等。*

 *[在 JSFiddle 上查看它们。](http://jsfiddle.net/rJsrJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:06:51.703

好吧，我找到了解决方案！:)`display:inline;`与 with 结合使用`float:left;`会使块元素本质上只使用他需要的空间，而不是 100% 的父元素。

如果您使用更大的字体让我们说一个标题并想在它之后添加一个段落（在同一行上），那么这种技术只有一个问题。如果标题`font-size`稍大一点，标题可能会占用 2 行甚至更多行的高度空间，而段落文本应该是，并且标题和它下面的另一行段落之间会有一个小的间隙。解决方案是添加`display:block;`和`margin-top:Xpx;`到段落元素以根据需要对齐它。*

# php - 用于 Windows 的 MTA 用于 PHP Sendmail

> ID：14215943
> 
> 赞同：1
> 
> 时间：2013-01-08T13:24:15.473
> 
> 标签：php, mta, processmaker

我试图在我的 Win7 系统上设置 Processmaker。对于发送电子邮件，我想使用 PHP 的 Sendmail()。但为此我需要在我的机器上安装一些 MTA 并需要为其配置 php.ini。有人可以指导我 MTA 的事情吗？我正在关注此链接以进行电子邮件设置。（[http://wiki.processmaker.com/index.php/2.0/Email_-_Settings](http://wiki.processmaker.com/index.php/2.0/Email_-_Settings)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:47:08.860

尽管我建议使用 phpmailer 选项（嗯，恕我直言，swiftmailer 选项会更好），例如[http://msmtp.sourceforge.net/](http://msmtp.sourceforge.net/)（或更简单的[http://glob.com.au/sendmail/](http://glob.com.au/sendmail/)）

它像 sendmail 邮件提交代理一样接收电子邮件，但不会将其注入本地 MTA 队列。而是通过 smpt 将邮件发送到另一个邮件系统（例如 gmail）。
phpmailer 或多或少会做同样的事情，但不会产生新的进程。

# cakephp - CakePHP 身份验证重定向不起作用

> ID：14215944
> 
> 赞同：0
> 
> 时间：2013-01-08T13:24:16.180
> 
> 标签：cakephp, authentication

为了学习 cakephp，我正在尝试重现食谱的简单身份验证示例；[http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)

我的问题是，当我尝试访问非授权页面时，我只是得到一个空白页面，上面有蛋糕安装通知警告：请更改安全盐和密码种子的值

这是我的 appcontroller 代码

```
class AppController extends Controller {

public $components = array(
    'Session',
    'Auth' => array(
        'loginRedirect' => array('controller' => 'posts', 'action' => 'index'),
        'logoutRedirect' => array('controller' => 'pages', 'action' => 'display', 'home')
    ),
    'RequestHandler'
);

public function beforeFilter() {
    $this->Auth->allow('index', 'view', 'login');
    $this->Auth->authorize = 'actions';
    $this->Auth->autoRedirect   = true;
} 
```

这是我的用户控制器代码

```
public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('add');
    }

    public function login() {
        echo "i am called";
        if ($this->request->is('post')) {
            if ($this->Auth->login()) {
                $this->redirect($this->Auth->redirect());
            } else {
                $this->Session->setFlash(__('Invalid username or password, try again'));
            }
        }
    }

    public function logout() {
        $this->redirect($this->Auth->logout());
    } 
```

是否有任何我不做的配置或关于身份验证实施的任何误解问题？

我正在使用easyPhp for windows作为我的网络服务器，但我在使用php5、mysql和apache 2安装linux时也遇到了问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:00:54.047

密码和盐在 app/Config/core.php 中，您必须更改它们

# asp.net-mvc-3 - Linq To SQL Any 抛出 InvalidOperationException：序列不包含任何元素

> ID：14215945
> 
> 赞同：0
> 
> 时间：2013-01-08T13:24:21.103
> 
> 标签：asp.net-mvc-3, linq-to-sql

现在大约一两天一次，当人们尝试登录时，我的网站开始抛出错误，并且在我重新启动 IIS 之前没有人可以登录。Any() 怎么能做到这一点，我能做些什么来解决它？

这是抛出异常的函数：

```
 public override bool ValidateUser(string username, string password)
    {
        var db = Access.Context;
        var query =
            from p in db.Players
            where p.PlayerName == username
                && p.Password == password 
            select p
        ;
        return query.Any();
    } 
```

其他 LINQ to SQL 查询工作正常。这是堆栈跟踪。

```
InvalidOperationException: Sequence contains no elements 

   System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult) +1151
    System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries) +113
    System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query) +344
    System.Data.Linq.DataQuery`1.System.Linq.IQueryProvider.Execute(Expression expression) +23
    System.Linq.Queryable.Any(IQueryable`1 source) +243
    FortyTwoAccess.PlayerProvider.ValidateUser(String username, String password) in C:\dev\FortyTwo\FortyTwoAccess\PlayerProvider.cs:114
    FortyTwoClient.Models.AccountMembershipService.ValidateUser(String userName, String password) in C:\dev\FortyTwo\FortyTwoClient\Models\AccountModels.cs:117
    FortyTwoClient.Controllers.AccountController.LogOn(LogOnModel model, String returnUrl) in C:\dev\FortyTwo\FortyTwoClient\Controllers\AccountController.cs:42
    lambda_method(Closure , ControllerBase , Object[] ) +157
    System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:36:54.453

这行得通吗？

```
public override bool ValidateUser(string username, string password)
{
    var db = Access.Context;
    return db.Players.Any(p => p.PlayerName == username && p.Password == password);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:39:57.113

对此的解决方法是不使用类变量来保存上下文，而是在使用 using 包装的每个方法中本地实例化上下文。

# php - PHP 使用不同的数据库实现

> ID：14215953
> 
> 赞同：0
> 
> 时间：2013-01-08T13:25:01.663
> 
> 标签：php, mysql, database, join, vertica

感谢您对这篇文章感兴趣，基本上我正在寻找一些关于在 PHP 中处理来自不同数据库实现的数据的建议，或者如果 PHP 不适合这些任务，关于其他方法的任何建议。

我想完成的任务可以用下面的例子来说明。我有一个 MySQL 数据库，我在其中存储有关在“服务器 A”上按 user_id 组织的用户的人口统计信息，这运行到大约 200,000 行。在服务器 B 上，我将 user_id 和 event_id 存储在 Vertica 数据库中的用户使用情况数据运行到大约 300,000,000 行。

我想找到一种方法来加入这些数据集，这样我就可以通过“user_id”字段上的连接生成汇总输出，该输出包括从 Vertica 数据库中获取的聚合用户事件，这些用户事件按 MySQL 数据库中包含的数据（例如年龄和位置）进行分组.

我意识到这可以通过在另一台服务器上创建这些表中的任何一个的副本来实现，但我很好奇如果没有它可以实现这一点。

我的问题是：

*   PHP可以做这样的操作吗？如果是这样，一个示例的链接将非常受欢迎。
*   您是否需要将数据加载到数组中并加入其中？你能像数据库中的表一样加入 PHP 中的数组吗？PHP 可以处理这样的大型数组吗？
*   还有其他我应该考虑的方法吗？

提前感谢您的帮助，

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T18:19:39.677

我建议使用 TALEND ！是一个开源 ETL 工具，其中实现了 Mysql 和 Vertica 连接器。只要 TALEND 可以访问它们，您就可以从任何 rdbms 聚合数据集！然后将它们转储到您需要的地方。试试看 。

# iphone - 将 XML 子文件夹解析到 iphone

> ID：14215956
> 
> 赞同：0
> 
> 时间：2013-01-08T13:25:23.403
> 
> 标签：iphone, ios, xml, ipad

XML 文件：我无法解析如下所示的 XML 子文件夹

![在此处输入图像描述](../Images/bebbce4cb2e7f2e7c6f8cfcbea08fc7d.png)

我可以使用以下方法解析 xml 文件的内容：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{
    currentelement=[elementName copy];
    if ( [elementName isEqualToString:@"Content"] ) {
        item=[[NSMutableDictionary alloc]init];

    }
} 
```

但我无法解析子文件夹`"PictureURL"`，如果我在其中解析它，我会得到空值

```
-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
        if ([currentelement isEqualToString:@"PictureURL"])
        {                   
           [item setObject:string forKey:@"Info8"];
        }
} 
```

任何人都可以让我知道如何访问 XML 的子文件夹。提前致谢

# c++ - 在线程中查找最小队列大小

> ID：14215957
> 
> 赞同：0
> 
> 时间：2013-01-08T13:25:36.880
> 
> 标签：c++, multithreading, scheduling, task-queue

我正在尝试使用多线程实现一种新的调度技术。每个线程都有自己的私有本地队列。这个想法是，每次从程序线程创建任务时，它应该在队列中搜索最小队列大小（任务数量较少的队列）并入队。一种在线程之间进行负载平衡的方法，其中不那么繁忙的队列排队更多。

您能否建议一些逻辑（或）想法，如何从编程的角度动态地在给定队列中找到最小大小的队列。

我正在开发 Visual Studio 2008，我们自己的多线程库中的 C++ 编程语言实现了多速率同步数据流范例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:56:20.713

如您所见，尝试查找负载较少的队列很麻烦，并且可能是一种效率低下的方法，因为您可能会向仅具有一项繁重任务的队列添加更多工作，而具有小任务的队列将没有更多工作并且很快变得不活动。

您最好使用**工作窃取**启发式：当一个线程完成自己的工作时，它会查看其他线程队列并“窃取”一些工作，而不是保持空闲或被终止。

然后系统将自动平衡每个线程处于活动状态，直到每个人都没有足够的工作。

您不应该遇到空闲线程和等待处理的工作的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:35:56.530

为什么线程不从“主”工作队列中获取他们的工作？

如果您真的想将工作项从主源分发到一组工作人员，那么您就是在进行负载平衡，正如您所说。在这种情况下，您实际上是在谈论调度，除非您只是进行循环式平衡。调度是计算中非常深入的主题，您可以轻松地花费数周或数月的时间来学习它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:38:33.313

如果您真的想尝试这个，每个队列是否不仅可以保留一个公共的“int count”成员，并在推送/弹出任务时使用原子 inc/dec 更新？

这样的设计是否值得管理开销以及当任务排队到恰好正在运行特别长的作业的线程时，当另一个线程即将出列一个非常短的作业时偶尔的“错误”是另一个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T13:44:55.550

您可以在线程之间同步一个计数器。但我想这不是你想要的。

由于您想使用数据流来实现所有内容，因此所有内容都应该是队列。

您的第一个选项是查询队列中的作业数。我认为这并不容易，如果你想要一个单一的读写器模式，因为你可能必须使用锁来进行这个操作，这不是你想要的。注意：我只是猜测，你不能在这里使用无锁队列；要么你有一个计数器，要么取两个指针的差，无论哪种方式你都有一个锁。

您的第二个选项（可以使用无锁代码完成）是将命令发送回调度程序线程，告诉他工作线程 x 已经消耗了一个工作。使用这种方法，您有 n 多个队列，每个队列从一个工作线程到调度程序线程。

# c - 在链接描述文件中提取存档文件

> ID：14215958
> 
> 赞同：2
> 
> 时间：2013-01-08T13:25:37.453
> 
> 标签：c, gcc, ld, unix-ar, linker-scripts

我正在尝试处理如下问题：

假设我有一个库 libxyz.a 创建自：

```
/* main.c */
int main(void)
{
  int a;
} 
```

编译和存档：

```
gcc -c main.c -o abc.o && ar cr libxyz.a abc.o 
```

我如何编写链接描述文件才能将 abc.o 准确地放在预期的位置？

我试图以这种方式处理它：

```
/* script.ld */
SEARCH_DIR(.)
INPUT(-lxyz)
SECTIONS
{
   .text : { xyz:abc(.text) }
   .data : { xyz:abc(.data) }
   .bss  : { xyz:abc(.bss) }
} 
```

但运行后：

```
ld -T script.ld 
```

我得到：

```
ld: cannot find xyz:abc 
```

我在论坛的链接器文件中找不到任何提取档案的示例。我唯一找到的是链接器的文档，它只包含有关`archive:file`构造的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-08T09:45:24.863

今天刚要处理同样的问题，所以如果其他人碰到这个问题：缺少一些文件扩展名。类似的东西可以正常工作：

```
SECTIONS
{
   .text : { libxyz.a:abc.o(.text) }
   .data : { libxyz.a:abc.o(.data) }
   .bss  : { libxyz.a:abc.o(.bss) }
} 
```

还需要处理路径（如果库实际上在某个地方/libxyz.a）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:53:07.427

可能你的 ld 有问题，因为我在我的机器上尝试了你的脚本，它运行正确，没有错误。我的 ld 版本是 GNU ld (GNU Binutils for Ubuntu) 2.22

# python - 防止 OS X 使用 Python 进入睡眠状态？

> ID：14215960
> 
> 赞同：8
> 
> 时间：2013-01-08T13:25:42.603
> 
> 标签：python, macos, sleep

有没有办法防止运行 OS X 的计算机在 Python 脚本中进入睡眠状态？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-04-13T11:04:40.833

您可以使用内置的**caffeinate**命令。

```
subprocess.Popen('caffeinate') 
```

这就是我使用它的方式：

```
import sys
import subprocess

if 'darwin' in sys.platform:
    print('Running \'caffeinate\' on MacOSX to prevent the system from sleeping')
    subprocess.Popen('caffeinate') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T13:38:05.487

从 OS 10.6 开始，您必须使用 Cocoa 中可用的 IOPMAssertion 系列函数。[这在那儿](https://stackoverflow.com/questions/8460033/what-is-the-correct-way-to-prevent-sleep-on-os-x)得到了很好的解释。

然后，您将不得不从 Python 调用它。我不确定 Python 中是否已经有针对 Cocoa 的特定绑定，但您可以调用 Objective-C 函数。[这里](https://stackoverflow.com/questions/1490039/calling-objective-c-functions-from-python)描述得很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-10T03:30:32.727

您还可以`caffeinate`在外部终端窗口中运行并保持打开状态以实现 OP 想要的。

1.  打开一个终端

2.  类型`caffeinate`

3.  按`Enter`

完成此操作后，只要您让终端保持运行，您的 Mac 就会保持唤醒状态。

您可以最小化或隐藏它，并且在您使用键盘快捷键 Ctrl+C 中断命令之前，您的 Mac 不会进入睡眠状态。

[来源](https://www.howtogeek.com/245683/how-to-prevent-your-mac-from-sleeping-with-no-additional-software/#:%7E:text=To%20prevent%20the%20display%20from,%E2%80%9Ccaffeinate%20%2Dm%E2%80%9D%20command.)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-19T02:28:52.810

有一个 Python 实用程序说明了如何在 Python 中直接提出所需的断言：[https ://github.com/minrk/appnope](https://github.com/minrk/appnope)

# assembly - 将 10 个数字相加并在 NASM 中打印结果

> ID：14215961
> 
> 赞同：3
> 
> 时间：2013-01-08T13:25:44.197
> 
> 标签：assembly, x86, nasm

我编写了以下用于添加 10 个数字的汇编代码。我能够编译并执行它，但我得到了错误的结果。我只是想知道如何在 scree 上打印**total的值。**

```
section .data
num1: dw 10, 20, 30, 40, 50, 10, 20, 30, 40, 50
total: dw 0
msg :  db "sum=%d",10,0

section .text
    extern _printf
    global _main
_main:
    push ebp
    mov ebp,esp
    mov ebx,num1 ;point bx to first number
    mov ecx,10      ;load count of numbers in ecx
    mov eax,0       ;initialize sum to zero
loop:
    add eax,[ebx]
    add ebx,2
    sub ecx,1
    jnz loop
    mov [total],eax

    push total
    push msg
    call _printf

    pop ebp
    mov esp,ebp
    ret 
```

**解决方案**

```
section .data
num1: dd 10, 20, 30, 40, 50, 10, 20, 30, 40, 50,300
total: dd 0
msg :  dd "sum=%d",10,0

    section .text
        extern _printf
        global _main
    _main:
        push ebp
        mov ebp,esp
        mov ebx,num1 ;point bx to first number
        mov ecx,11     ;load count of numbers in ecx
        mov eax,0       ;initialize sum to zero
    loop:
        add eax,[ebx]
        add ebx,4
        sub ecx,1
        jnz loop
        mov  [total],eax
        push dword [total]

        push msg
        call _printf
        mov esp,ebp
        pop ebp

        ret 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:35:24.310

您正在使用 32 位内存访问来处理 16 位值。

数组的每个元素都是 16 位宽。但是，由于`eax`是 32 位宽，以下将数组视为每个元素也是 32 位宽：

```
add eax,[ebx] 
```

出于完全相同的原因，以下内容也不完全正确：

```
mov [total],eax 
```

我认为还有一个问题，您在调用之前推送*地址*，而您可能应该推送它的*值*。`total``printf()`

 *此外，正如@JasonD 所指出的，您需要在调用`printf()`.

最后，

```
mov esp,ebp 
```

指令应该被删除，因为它所做的只是破坏你的堆栈指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T13:58:10.933

我在这里看到了几个问题。首先，您已经获得`num1`并`total`声明为`dw`. `dw`听起来像是“dword”的意思，但它的意思是“数据字”。你希望这些是`dd`- “数据双字”......因为这就是你使用它们的方式。（而`add ebx, 4`不是 2）如果您确实需要在 32 位代码中使用字（16 位）值，可以这样做，但很尴尬。

我看到的第二个问题是，`push total`在您`call _printf`推送`total`. 你想要内存的“[内容]”，所以`push dword [total]`. （`push msg`是正确的）

在此之后，您可能想要`add esp, 8`（我喜欢将其写为`add esp, 4 * 2`- 两个参数，每个参数 4 个字节）。可以“推迟”此堆栈清理 -`mov esp, ebp`将修复您，但需要在`pop ebp`!!!

……可能还有更多……

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T13:36:07.357

**dw**定义了 16 位实体，但`add eax,[ebx]`正在添加 32 位实体。**将dw**更改为**dd**或将**WORD PTR**放在**[ebx]**之前。此外，正如 NPE 指出的那样，您需要更改将**eax**存储到**total**的方式。*

# yii - 如何在 YII 的 CGridView 中添加自定义列？

> ID：14215965
> 
> 赞同：4
> 
> 时间：2013-01-08T13:25:55.380
> 
> 标签：yii

我需要在 CGridView 中添加一列。

我用这个：

```
$this->widget('zii.widgets.grid.CGridView', array(
            'id'=>'user-grid',
            'dataProvider'=>$model->search(),
            'filter'=>$model,
            'pager' => array(
                'firstPageLabel' => '&lt;&lt;', 
                ),
            'columns'=>array(
                'username',
                'name',
                'email',
                'creationDate',
                array(
                        'class' => 'CButtonColumn',
                        'template' => '{change} {view}',
                        'buttons' => array(
                                        'change' => array(
                                                    'url'=> "'http://test.com/userservice/".$model->username."'",
                                        ),
                        ),

                ),
                array(
                    'name' => 'test',
                    'value' => 'testtest', 
                )
            ),
)); 
```

但我得到了错误：

> 未定义属性“User.test”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T13:36:33.730

你快到了，在你的列数组中，你可以在`name`数据提供者中使用模型属性的参数，而不是自定义列，你可以`header`像这样使用：

```
'columns'=>array(
    ...
    array(
        'header' => 'test',
        'value' => '"testtest"', 
    ),
    ...
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-14T04:34:20.223

您可以像这样在 CGridView 上编写普通代码。

```
'columns'=>array(
                'username',
                'name',
                'email',
                'creationDate',
                'test',
                  ---
            ), 
```

如果你把这样的代码放在你各自的模型上。

```
 ---
    public $test ; 
    public function afterFind() {
        $this->test = 'Test Variable' ; // put your custom code to reflect exact need 
        return parent::afterFind();
    }
    --- 
```

# actionscript-3 - 我的图案是错误的，我该如何让它干燥？

> ID：14215966
> 
> 赞同：0
> 
> 时间：2013-01-08T13:26:01.070
> 
> 标签：actionscript-3, apache-flex, oop, optimization, dry

所以我得到了这个基于 TitleWindow 的 Flex 应用程序，其中这些窗口由其中编写的静态函数调用。这是从 DataGrid 创建或编辑实体需要时的样子：

```
private function incluir():void {
    NavioForm.incluir(dg.dataProvider);
}

private function atualizar():void {
    NavioForm.atualizar(dg.dataProvider, dg.selectedIndex);
} 
```

从这方面来看，它工作得很好。

但是由于我使用了静态函数，代码开始变得有点重复，正如我们在下面的示例中看到的那样：

[CRUD 表单的脚本标签(incluir == include, atualizar == update, excluir == delete)]

```
...

[Bindable] private var navio:Navio;

public static function incluir(dataList:IList):void {
    var form:NavioForm = new NavioForm();
    form.action = FormWindow.ACTION_NEW + Navio.name;

    form.navio = new Navio();
    form.navio.lastUpdate = new Date();

    form.result = function():void {
        PortoService.obj.persistirNavio(form.navio).result(function(navio:Navio):void {
            dataList.addItem(navio);
            form.close();
        }).fault(function(event:FaultEvent):void {
            if(event.fault.faultString == 'duplicate key') {
                Util.showError("This vessel's IMO is already present in our database.");
            } else throw event.fault;
        });
    };

    PopUp.add(form);
}

public static function atualizar(dataList:IList, index:int):void {
    var form:NavioForm = new NavioForm();
    form.action = FormWindow.ACTION_UPDATE + Navio.name;
    form.imoRecieved = true;

    form.navio = dataList[index];

    PortoService.obj.obter(Navio, form.navio.key).result(function(navio:Navio):void {
        form.navio = navio;
        form.navio.lastUpdate = new Date();
    });

    form.result = function():void {
        PortoService.obj.persistir(form.navio).result(function(navio:Navio):void {
            dataList[index] = navio;
            form.close();
        }).fault(function(event:FaultEvent):void {
            if(event.fault.faultString == 'duplicate key') {
                Util.showError("This vessel's IMO is already present in our database.");
            } else throw event.fault;
        });
    };

    PopUp.add(form);
}

... 
```

另一个 CRUD 表单的脚本标签：

```
...
[Bindable] private var vesselType:VesselType;

public static function incluir(dataList:IList):void {
    var form:VesselTypeForm = new VesselTypeForm();
    form.action = FormWindow.ACTION_NEW + VesselType.name;

    form.vesselType = new VesselType();

    form.result = function():void {
        CoreService.obj.persistir(form.vesselType).result(function(type:VesselType):void {
            dataList.addItem(type);
            form.close();
        });
    };

    PopUp.add(form);
}

public static function atualizar(dataList:IList, index:int):void {
    var form:VesselTypeForm = new VesselTypeForm();
    form.action = FormWindow.ACTION_UPDATE + VesselType.name;

    form.vesselType = Util.clone(dataList[index]);

    form.result = function():void {
        CoreService.obj.persistir(form.vesselType).result(function(type:VesselType):void {
            dataList[index] = type;
            form.close();
        });
    };
    form.deleteClick = function():void {
        CoreService.obj.excluir(form.vesselType.key).result(function():void {
            dataList.removeItemAt(index);
            form.close();
        });
    };

    PopUp.add(form);
} 
```

那么，是否有设计模式或任何其他技术来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:35:34.113

您可以创建一个 crud 组件，使用所有动态内容（例如数据提供者位置）进行实例化，并广播您分配适当侦听器的事件（或信号）。

# google-earth-plugin - 如何在 Chrome 中启动 Google 地球插件

> ID：14215967
> 
> 赞同：1
> 
> 时间：2013-01-08T13:26:07.347
> 
> 标签：google-earth-plugin

我安装了谷歌地球插件，它似乎工作正常。

我想做的是在其中打开一个 KML 文件（从 Android 上的 MyTracks 导出）。

但是，我找不到打开 KML 文件或启动 GE 插件的选项。

这可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:51:34.573

要启动该插件，请查看[开发人员指南中的“](https://developers.google.com/earth/documentation/index)[使用 Google Earth Api](https://developers.google.com/earth/documentation/index#using_the_google_earth_api) ”部分。

要加载 KML 文件，请查看以下文档[https://developers.google.com/earth/documentation/kml](https://developers.google.com/earth/documentation/kml)

它提供了有关如何[fetchKml 和 parseKml](https://developers.google.com/earth/documentation/kml#fetchkml_and_parsekml)以及链接到[工作示例的示例](https://google-developers.appspot.com/earth/documentation/samples/fetchkml_example)。

```
var href = 'http://code.google.com/'
               + 'apis/earth/documentation/samples/kml_example.kml';

google.earth.fetchKml(ge, href, function(kmlObject) {
  if (kmlObject) {
    ge.getFeatures().appendChild(kmlObject);
  }
}); 
```

您还可以使用 a`KmlNetworkLink`再次[加载数据](https://developers.google.com/earth/documentation/kml#kmlnetworklink)，该文档链接到此[工作示例](https://developers.google.com/earth/documentation/samples/kmlnetworklink_example)。

```
var link = ge.createLink('');
var href = 'http://code.google.com/'
           + 'apis/earth/documentation/samples/kml_example.kml'
link.setHref(href);

var networkLink = ge.createNetworkLink('');
networkLink.set(link, true, true); // Sets the link, refreshVisibility, and flyToView

ge.getFeatures().appendChild(networkLink); 
```

# r - 从矩阵中提取补丁/写入时复制

> ID：14215970
> 
> 赞同：2
> 
> 时间：2013-01-08T13:26:14.840
> 
> 标签：r

我有一个相当大的（1040x1392）双精度矩阵，我想提取另一个矩阵，其列是第一个矩阵的 16x16 块。（我知道，这是很多数据，使用它可能不实用，但这应该可以......）

我尝试使用此代码，其中“数据”是原始矩阵：

```
# Create a matrix of starting coordinates for each patch
patch.size = 16
patch.inc = patch.size - 1
coords = expand.grid(x=1:(ncol(data)-patch.inc), y=1:(nrow(data)-patch.inc))
coords = as.matrix(coords)

# Pre-allocate the destination matrix
patches = double(nrow(coords)*patch.size^2)
dim(patches) = c(patch.size^2, nrow(coords))

#Create overlapping patches
for (i in 1:nrow(coords))
{
  x=coords[i,1]
  y=coords[i,2]
  patches[,i] = as.vector(data[y:(y+patch.inc), x:(x+patch.inc)])
} 
```

这在具有 8GB RAM 的相当快的 Win7-64 机器上运行得非常慢；即使只创建 100 个补丁也很慢。

事实证明，分配给 patch[,i] 是问题所在。查看任务管理器，当我分配给 patch[,i] 时，内存使用量出现了巨大的峰值。

我有一些问题。首先，发生了什么？看起来整个补丁矩阵正在被复制到每个分配中。是对的吗？如果是这样，为什么？我认为预先分配补丁矩阵可以避免这种情况。其次，有没有更好的方法来编写这段代码，这样它就可以在我的有生之年完成:-)？

谢谢！肯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:57:32.257

对于第二个问题，这是一个使用`lapply`.

`out`如果您想要精确的输出作为脚本，您可以转置结果。我检查了较小的尺寸并验证它等于您的输出`patches`。

```
set.seed(1234)
nr <- 1040
nc <- 1392
data <- matrix(rnorm(nr*nc), nrow = nr)
patch.size <- 16
idx <- expand.grid(1:(ncol(data)-patch.size+1), 1:(nrow(data)-patch.size+1))
idx[,3] <- idx[,1]+patch.size-1
idx[,4] <- idx[,2]+patch.size-1
idx <- as.matrix(idx)

# using rbenchmark
require(rbenchmark)
myFun <- function() {
    out <- do.call(rbind, lapply(1:nrow(idx), 
        function(tx) c(data[idx[tx,2]:idx[tx,4], idx[tx,1]:idx[tx,3]])))
}
benchmark(myFun(), replications = 2)

# Result:
     test replications elapsed relative user.self sys.self user.child sys.child
1 myFun()            2 152.146        1   147.957    4.184          0         0

# using system.time
system.time(out <- do.call(rbind, lapply(1:nrow(idx), 
        function(tx) c(data[idx[tx,2]:idx[tx,4], idx[tx,1]:idx[tx,3]]))))        

# Result
  user  system elapsed 
58.852   1.784  60.638 
```

# c# - LINQ to Entities 无法识别方法“System.String 格式”

> ID：14215971
> 
> 赞同：9
> 
> 时间：2013-01-08T13:26:20.300
> 
> 标签：c#, asp.net, .net, linq

我如何重构这个 LINQ 以使其工作？

```
var a =  (from app in mamDB.Apps where app.IsDeleted == false 
                select string.Format("{0}{1}",app.AppName, 
                app.AppsData.IsExperimental? " (exp)": string.Empty))
               .ToArray();} 
```

我现在得到错误：

> LINQ to Entities 无法识别方法 'System.String Format(System.String, System.Object, System.Object)' 方法，并且此方法无法转换为存储表达式。

我徒劳地尝试过：

```
return (from app in mamDB.Apps where app.IsDeleted == false 
        select new string(app.AppName + (app.AppsData != null && 
        app.AppsData.IsExperimental)? " (exp)": string.Empty)).ToArray(); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-08T13:28:33.127

您可以`string.Format`在 LINQ-to-Objects 中执行后面的操作：

```
var a =  (from app in mamDB.Apps where app.IsDeleted == false 
         select new {app.AppName, app.AppsData.IsExperimental})
         .AsEnumerable()
         .Select(row => string.Format("{0}{1}",
            row.AppName, row.IsExperimental ? " (exp)" : "")).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:33:25.490

尝试这个

```
var a =  (from app in mamDB.Apps where app.IsDeleted == false 
            select new {AppName = app.AppName, IsExperimental = app.AppsData.IsExperimental})
          .Select(app => string.Format("{0}{1}",app.AppName, 
            app.IsExperimental? " (exp)": string.Empty))
           .ToArray();} 
```

# iphone - QLPreviewController - 显示问题

> ID：14215973
> 
> 赞同：1
> 
> 时间：2013-01-08T13:26:22.730
> 
> 标签：iphone, pdf, ios6, qlpreviewcontroller

![在此处输入图像描述](../Images/c4f3798e61628aedbe49d719303b0baa.png)

代码片段

```
 NSMutableArray *samplepdf = [[NSMutableArray alloc]initWithObjects:@"sam1.pdf",@"sam2.pdf",@"sam3.pdf",@"sam4.pdf", nil];

  1)  QLPreviewController *previewController = [[QLPreviewController alloc] init];
    previewController.dataSource = self;
    previewController.currentPreviewItemIndex = [indexPath row];
    [self presentModalViewController:previewController animated:YES];

2) 

- (NSInteger)numberOfPreviewItemsInPreviewController:(QLPreviewController *)previewController
{

    return [samplepdf count];

}

// returns the item that the preview controller should preview
- (id)previewController:(QLPreviewController *)previewController previewItemAtIndex:(NSInteger)index
{   

    NSString *documentsDirectoryPath = [[NSBundle mainBundle]resourcePath]; 

    NSString *dataPath =[documentsDirectoryPath stringByAppendingPathComponent:[samplepdf objectAtIndex:index]];

    NSURL *url = [NSURL fileURLWithPath:dataPath isDirectory:YES];  
    return url; 
} 
```

此代码在 iOS5 中完美运行，但是当我在 ios6 中运行时，一些空间是可见的。

我该如何解决这个问题？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:18:06.273

对 presentModalViewController:animated: 的调用在 iOS6 中已弃用。您可能希望在调用 presentViewController:animated: 之前指定模态转换样式和模态演示样式。你可以尝试这样的事情：

```
 [previewController setModalPresentationStyle:UIModalPresentationFullScreen];
  [previewController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];

  [self presentViewController:previewController animated:YES completion:nil]; 
```

# ios - 在 Unity3d for iOS 中的设备实时摄像头上显示 3d 对象

> ID：14215975
> 
> 赞同：1
> 
> 时间：2013-01-08T13:26:26.233
> 
> 标签：ios, unity3d, textures, vuforia

如何在 Unity3d 中的设备实时摄像头上渲染 3d 或 2d（.jpg 或 .png）对象？这个 3d 对象不应该粘在相机上。它必须显示在特定点，就像我们可以将游戏场景中的任何对象设置在特定位置一样。

# python - Django/Python：更新指向 settings.AUTH_USER_MODEL 的关系

> ID：14215976
> 
> 赞同：10
> 
> 时间：2013-01-08T13:26:26.887
> 
> 标签：python, django, postgresql

我对 Python 和 Django 完全陌生，但我需要在我的服务器上安装 testbedserver-software（我遵循本[教程](http://wiki.confine-project.eu/soft:server-installation)）。现在我在运行以下命令时遇到了麻烦：

```
python manage.py syncdb 
```

显示以下错误：

```
CommandError: One or more models did not validate:
menu.bookmark: 'user' defines a relation with the model 'auth.User', which has been swapped out. Update the relation to point at settings.AUTH_USER_MODEL.
dashboard.dashboardpreferences: 'user' defines a relation with the model 'auth.User', which has been swapped out. Update the relation to point at settings.AUTH_USER_MODEL. 
```

这是我的manage.py：

```
#!/usr/bin/env python
import os
import sys

if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "controller.settings")

    from django.core.management import execute_from_command_line

    execute_from_command_line(sys.argv) 
```

这是我的settings.py：

```
from controller.settings_example import *

# Probably you want to override at least the database configuration:
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.postgresql_psycopg2',
    'NAME': 'controller',
    'USER': 'confine',
    'PASSWORD': 'confine',
    'HOST': 'localhost',
    'PORT': '',
}
} 
```

我已经找到了这个[http://grokbase.com/p/gg/django-users/12ar0b12ca/ver-1-5-specifying-custom-user-model-extends-abstractuser-doesnt-work](http://grokbase.com/p/gg/django-users/12ar0b12ca/ver-1-5-specifying-custom-user-model-extends-abstractuser-doesnt-work)。但我什至不知道在哪里应用该解决方案。（我什至不知道这个问题是基于 PostgreSQL、Python 还是 Django...）

有人可以帮我弄这个吗？

在此先感谢，阿托比

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T15:48:36.050

在`settings_example.py`你有`AUTH_USER_MODEL = 'users.User'`。但是，您使用的应用程序 - `menu.bookmark`- 与 - 有关系`django.contrib.auth.User`- 您不能同时拥有两者。设置`AUTH_USER_MODEL`意味着你正在用你自己的替换内置的 Django 用户模型。有关详细信息，请参阅[http://procrastinatingdev.com/django/using-configurable-user-models-in-django-1-5/](http://procrastinatingdev.com/django/using-configurable-user-models-in-django-1-5/)。

# android - 使用 Android 传感器和 OpenGL 的增强现实

> ID：14215981
> 
> 赞同：0
> 
> 时间：2013-01-08T13:26:43.103
> 
> 标签：android, opengl-es, opengl-es-2.0

图像总是比大量文字说话，这就是我想要做的： ![增强现实场景](../Images/51338b573841f9e3c5ac7719318cf48f.png)

圆圈中心是用户的手机位置（原点）。该应用程序显示一个自定义相机视图，它还显示一个 OpenGL 场景（取决于您正在查看的位置）。OpenGL 场景仅由一个简单的立方体组成，当用户朝正确的方向看时，立方体就会被渲染。

我对 OpenGL 还是很陌生，我实现了在相机前显示立方体，但它是静态的：我无法在 360° 视图中移动。

我从传感器获得设备的方向：

```
 int type = event.sensor.getType();
    float[] data;
    if (type == Sensor.TYPE_ACCELEROMETER) {
        mGData = data;
    } else if (type == Sensor.TYPE_MAGNETIC_FIELD) {
        mMData = data;
    } else {
        // we should not be here.
        return;
    }
    for (int i=0 ; i<3 ; i++)
        data[i] = event.values[i];

    SensorManager.getRotationMatrix(mR, mI, mGData, mMData);
    SensorManager.getOrientation(mR, mOrientation); 
```

据我了解，3 个同时正交的旋转角度存储在 mOrientation 中。但是然后呢？我想`GLU.lookAt(0, 0, 0, X, Y, Z, ?, ?, ?)`在`onDrawFrame`方法中制作类似的东西，但没有奏效。我想做那个家伙说他做不到的东西（见这里的最后一段：[https](https://stackoverflow.com/a/9114246/1304830) ://stackoverflow.com/a/9114246/1304830 ）。

这是我在中使用的代码`onDrawFram`：

```
 gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    gl.glMatrixMode(GL10.GL_MODELVIEW);

    // Look in a direction (with the sensors)
    gl.glLoadIdentity();
    GLU.gluLookAt(gl, 0.0f, 0.0f, 0.0f, ?, ?, ?, ?, ?, ?); // Where I need help

    gl.glPushMatrix();  

    // Place the cube in the scene
    gl.glTranslatef(0, 0, -5);
    mCube.draw(gl); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T00:51:25.377

这将做那个人试图做的事情，但他的想法的问题是向上向量总是指向 y 轴。因此，如果您滚动手机，相机将不会随之滚动。

```
float pi = (float) Math.PI;
float rad2deg = 180/pi;

// Get the pitch, yaw and roll from the sensor. 

float yaw = orientation[0] * rad2deg;
float pitch = orientation[1] * rad2deg;
float roll = orientation[2] * rad2deg;

// Convert pitch, yaw and roll to a vector

float x = (float)(Math.cos( yaw ) * Math.cos( pitch ));
float y = (float)(Math.sin( yaw ) * Math.cos( pitch ));
float z = (float)(Math.sin( pitch ));

GLU.gluLookAt( gl, 0.0f, 0.0f, 0.0f, x, y, z, 0.0f, 1.0f, 0.0f ); 
```

使用三个 glRotates 是 IMO 更好的选择，除非您出于某种原因想要锁定滚动。

注意：我不确定 Android 会根据手机屏幕调用哪个方向，因此我可能错误配置了偏航、俯仰和滚动。

# php - 单击表单内的某个按钮时如何绕过jQuery表单验证器

> ID：14215984
> 
> 赞同：0
> 
> 时间：2013-01-08T13:26:56.987
> 
> 标签：php, jquery, forms, validation

大家好，这行代码我启用了 jQuery 验证器来验证某些表单字段。

```
<script>
$(function() 
{
    $( "#date").datepicker( {autoSize: true, dateFormat: 'yy/mm/dd', showAnim: 'show' } );
});
$(function() 
{
    $( "#starttime, #stoptime, #starttime2, #stoptime2, #starttime3, #stoptime3, #starttime4, #stoptime4" ).timepicker( {autoSize: false, showAnim: 'show' } );
}); 
</script>

<script>
    $(function() {
        $("#productionlogform").validate({
            rules:  {
                date:   {
                    required: true,
                },
                starttime:  {
                    required: true,
                },
                stoptime:   {
                    required: true,
                }
            }
        });
    });
</script> 
```

如您所见，日期、开始时间和停止时间是必需的，因此在设置之前无法发布表单。

现在，如果我的表单中有一个删除按钮，这很烦人......

任何想法如何允许该按钮绕过验证规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:46:19.497

另外，不要忘记在服务器端进行验证。永远不应依赖客户端验证来防止人们输入不良/恶意数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:55:00.840

抱歉 Bhavik Shah 我不能接受你的回答，但无论如何，validationEventTrigger 完成了这项工作。重写了我的代码，看起来像这样：

```
<script>
    $(function() {
    $("#deleteproductionlog").click(function () { 
        $("#productionlogform").validate().cancelSubmit = true;
    });
    $("#newproductionlog").click(function () { 
        $("#productionlogform").validate().cancelSubmit = true;
    });         
        $("#productionlogform").validate({
            rules:  {
                date:   {
                    required: true,
                },
                starttime:  {
                    required: true,
                },
                stoptime:   {
                    required: true,
                }
            },
        });     
    });
</script> 
```

名为“deleteproductionlog”和“newproductionlog”的按钮将跳过表单的验证，该表单称为“productionlogform”。

# jsf-2 - JSF 2 中的部分状态保存功能

> ID：14215987
> 
> 赞同：5
> 
> 时间：2013-01-08T13:27:07.913
> 
> 标签：jsf-2

有人可以解释 JSF 中的部分状态保存功能吗？我使用过 JSF 1.2，但那里不存在此功能。我认为它是 JSF 2.0 的新功能？与常规状态储蓄相比，我们通过部分状态储蓄获得什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:59:23.357

它通过只保存对 bean 的修改来减少内存使用。默认为 true，您可以在 conf 中设置它，如下所示；

```
<context-param>
    <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
    <param-value>false</param-value>
</context-param> 
```

# css - 父母而不是孩子的CSS样式？

> ID：14215988
> 
> 赞同：4
> 
> 时间：2013-01-08T13:27:24.380
> 
> 标签：css

我正在使用 jquery 将从服务器获取的 html 插入到 div 中。根据 div 内容，我想调整容器的样式。我写了一个简单的html测试。当它有 X 孩子时，我如何告诉 css 应用这个网站？谷歌搜索后，我尝试了 :has 和 :contains 都没有工作。我不想在 JS 中保留我的样式，因为 css 更有意义。

演示：http: [//jsfiddle.net/wd9fk/](http://jsfiddle.net/wd9fk/)

html

```
<div id="a"><div id="b">B</div></div>
<div id="a"><div id="c">C</div></div> 
```

css

```
#a { height: 400px; border: 1px solid red;  }
#b { height: 200px; }
#a :has #b { height: 300px; border: 1px solid blue; } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T13:31:04.173

您根本无法在 CSS 中向上遍历 DOM。您将需要使用 JavaScript。

这是一篇解释原因的文章： http: [//snook.ca/archives/html_and_css/css-parent-selectors](http://snook.ca/archives/html_and_css/css-parent-selectors)

长话短说，这是由于浏览器读取 CSS 的方式，通过引入它，性能会提高 10 倍（至少！），因为它需要多次读取每个节点以看看它是否适合配置文件。

这是一个很好的想法，但它根本不可行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T13:32:27.947

目前还没有 CSS 的父选择器，有计划并且正在讨论中。在 CSS 选择器级别 4 中，[提出了一个主题选择器](http://www.w3.org/TR/selectors4/#subject)，它可以让您以这种方式引用元素：

```
ol! > li:only-child 
```

然后写着：“一个`ol`包含单个`li`元素的元素”（虽然这个语法是一个提议），并且可以让你设置父`ol`元素的样式。

如果此提议成功，主题选择器将在下一版本的 CSS 选择器中可用。

目前，Javascript 是要走的路，直到主题选择器成为标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T10:36:07.303

您不能遍历 DOM 来获取当前匹配元素的父选择器。

但是你可以像这样很容易地用 jQuery 做到这一点：

```
$('#Default a span.active').closest('.vehicle_details').css('background-color','#444'); 
```

**[小提琴演示](http://jsfiddle.net/MZ9wa/3/)**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-08T13:30:52.520

```
#a > #b { height: 300px; border: 1px solid blue; } 
```

不确定这是否是您想要的，但请尝试一下。

问候。

# c# - 如何强制任务在 UI 线程上运行？

> ID：14215991
> 
> 赞同：1
> 
> 时间：2013-01-08T13:27:35.100
> 
> 标签：c#, windows-8, task

原文如下。让我尝试更详细地解释我为什么要这样做。

我有一个收听分享魅力请求的页面：

```
void Page_Loaded(object sender, RoutedEventArgs e)
{
    m_transferManager = Windows.ApplicationModel.DataTransfer.DataTransferManager.GetForCurrentView();
    m_transferManager.DataRequested += TransferManager_DataRequested;
} 
```

当事件触发 ( `TransferManager_DataRequested`) 时，它不会在 UI 线程上触发：

```
void TransferManager_DataRequested(DataTransferManager sender, DataRequestedEventArgs args)
{
    var data = args.Request.Data;
          // More related stuff omitted - not important.
    data.SetDataProvider(StandardDataFormats.Bitmap, GetImage_DelayRenderer);
} 
```

现在，当`GetImage_DelayRender`被调用时，它也不会在 UI 线程上被调用。但是，在其中，我需要做一堆与 UI 相关的事情。具体来说，我需要调用一个仅适用于 UI 的方法（这是我在其他地方使用的方法，我想重用它的逻辑）。该方法被调用`GetImageAsync`并且它需要在 UI 上运行，因为它与 WriteableBitmap 进行了一堆交互。它还执行一堆异步操作（例如写入流等），这就是它是异步的原因。`GetImageAsync()`我会尽可能短地关闭 UI 。

如下`GetImage_DelayRender`所示：

```
private async void GetImage_DelayRenderer(DataProviderRequest request)
{
    var deferral = request.GetDeferral();
    await Dispatcher.RunTask(async () => // RunTask() is an extension method - described in the original question below.
        {
            try
            {
                var bitmapStream = await GetImageAsync();
                request.SetData(RandomAccessStreamReference.CreateFromStream(bitmapStream));
            }
            catch
            {
            }
        });

    deferral.Complete();
} 
```

我想知道的是，实现上述调用的最正确方法是什么`Dispatcher.RunTask()`（这是我的 hack 扩展方法）。

----- 开始原始消息 --------

假设我有以下任务：

```
private async Task SomeTask()
{
   await Task.Delay(1000);
   // Do some UI and other stuff that may also be async
} 
```

**编辑（澄清）：我不想阻止用户界面。我要执行的任务（即使在示例中，如果您阅读它）不会阻塞 UI。我只希望任务在 UI 的上下文中运行，因为它是同步部分。**

我想在 UI 线程上的代码上运行它作为异步操作。Dispatcher.RunXXX() 方法执行一个操作，这意味着它们将运行该操作并在完成时通知您。这还不够好。我需要整个任务在 UI 线程上运行（因为如果我从 UI 线程运行它就会执行），然后在完成后通知我。

我能想到的唯一方法是使用 Dispatcher.RunXXX() 方法来执行一个匿名委托，该委托将我的方法中的局部变量设置为任务，然后等待...

```
public async static Task RunTask(this CoreDispatcher dispatcher, Func<Task> taskGiver)
{
    Task task = null;
    await dispatcher.RunAsync(() => task = taskGiver());
    await task;
} 
```

这看起来非常丑陋。有更好的方法吗？

Edit2：伙计们-阅读此代码-如果我使用我拥有的 RunTask() hack 执行上面的第一个代码块，它不会阻塞 Task.Delay() 上的 UI...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T13:40:30.367

> 我想在 UI 线程上的代码上运行它作为异步操作。

然后运行它：

```
async void MyEventHandler(object sender, ...)
{
  await SomeTask();
} 
```

**更新：**

我不确定这是一个“合法”操作，但您可以通过捕获`CoreDispatcher`UI 处于活动状态并稍后调用来安排该方法在 UI 线程上运行[`RunAsync`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.coredispatcher.runasync.aspx)：

```
private async void GetImage_DelayRenderer(DataProviderRequest request)
{
  var deferral = request.GetDeferral();
  Task task = null;
  await coreDispatcher.RunAsync(() => { task = SomeTask(); });
  await task;
  deferral.Complete();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:51:49.850

我没有时间做一个完整的解决方案，所以希望你仍然会发现这很有用......

首先，正如其他人所指出的那样，您不能在 UI 线程上运行某些东西并且不让它阻塞 UI 线程。讨论完毕。你所说的你需要的是在非 UI 线程上运行的东西，并定期通知 UI 线程有需要处理的更新。

要做到这一点，你需要这样的东西......

```
public class LongTask
    {
        public event EventHandler MyEvent;

        public void Execute()
        {
            var task = Task.Factory.StartNew(() =>
            {

                while (true)
                {
                    // condition met to notify UI
                    if (MyEvent != null)
                        MyEvent(this, null);
                }
            });
        }
    } 
```

然后在您的 UI 中，执行类似...

```
private void button_Click(object sender, RoutedEventArgs e)
        {
            var test = new LongTask();
            test.MyEvent += test_MyEvent;
            test.Execute();
        }

        void test_MyEvent(object sender, EventArgs e)
        {
            Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
            {
                test.Text += " bang ";
            }); 
```

您显然可以使用类似 MVVM 的方式以更简洁的方式实现这一点，但这是基本思想。}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:37:32.697

我已经这样做了：

```
public static Task<string> GetResultAsync()
{
    return Task<string>.Factory.StartNew(() => GetResultSync());
} 
```

在用户界面中：

```
private async void test()
{

    string result = await GetResultAsync();

    // update UI no problem  
    textbox.Text = result;  

} 
```

# android - 如何在android mapview中为特定区域着色？

> ID：14215994
> 
> 赞同：1
> 
> 时间：2013-01-08T13:27:52.910
> 
> 标签：android

我是 android 地图视图的新手。我必须根据特定区域的降雨量在 android 地图视图中显示不同的颜色。请帮我弄清楚这个功能。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:42:44.740

确保使用 Map API v2 而不是旧的 API（并非所有人都知道它已经过时了）。当用户通过将 onCameraChangeListener 设置为您的 GoogleMap 滚动时，您始终可以获取更新的可见区域。

```
googleMap.setOnCameraChangeListener(new GoogleMap.OnCameraChangeListener()
{            
    @Override
    public void onCameraChange(CameraPosition arg0)
    {
        VisibleRegion r = googleMap.getProjection().getVisibleRegion();
    }
}); 
```

使您的布局类似于

```
<fragment
    class="com.google.android.gms.maps.SupportMapFragment"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map_fragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    map:cameraZoom="14"/>

<yout.package.view.ColorOverlay
    android:id="@+id/overlay"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#00000000"/> 
```

添加一个全屏地图片段和一个带有透明背景的叠加层，它将绘制您的颜色区域。这个想法是制作自定义视图，它将根据 VisibleRegion 的东北和西南 LatLng 点及其在屏幕上的位置绘制颜色，并使其绘制在地图上方。这是最辛苦的工作：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:46:33.553

在旧的 API 中，您也可以在地图上显示颜色，方法是覆盖您的自定义形状，如圆形、矩形或任何形状。

只需`draw()`在您的`Overlay`班级中覆盖即可。

拥有新的 API 总是好的，但现在可以使用任何人。

[本页](http://android-support-akkilis.blogspot.in/2013/01/map-overlays-of-custom-shape-and-color.html "这一页")试图解释如何构建具有自定义形状和颜色的叠加层。

希望这会有所帮助。

# c# - 对 DataTable 中具有相同值的列进行排序

> ID：14215996
> 
> 赞同：0
> 
> 时间：2013-01-08T13:27:55.313
> 
> 标签：c#, sorting, datatable

我有一个关于在 Datatable 中排序的问题。我有一张像下面这样的表格，想从小到大排序。问题是当我有相同的数字时，我想将第一个作为最后一个，依此类推......

表：------------------------------------排序后：

```
Name   Bit   Size                      Name    Bit     Size    (corrected)
 A      0     1                         A      0         1
 C      1     2                         C      1         2   
 B      1     3                         B      1         3
 D      1     1                         D      1         1 
```

我想要的结果：

```
Name    Bit   Size (corrected)
 A      0     1  
 D      1     1
 B      1     3
 C      1     2 
```

我的代码：

```
arraySBit.DefaultView.Sort = "Bit";
arraySBit = arraySBit.DefaultView.ToTable(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:33:38.983

您可以使用`Linq-To-DataTable`：

```
var tblSorted = table.AsEnumerable()
                     .OrderBy(r => r.Field<int>("Bit"))
                     .CopyToDataTable(); 
```

**编辑**：但实际上`DataView.Sort`也应该工作（测试）。

既然你已经编辑了你的问题。你的要求似乎很奇怪。如果`Bit`相同，您不想按某些东西排序，但您想对`reverse`相等行的行进行“排序”（因此在`Ordinal`中的位置`DataTable`）。

这可以满足您的需求，尽管我不确定它是否真的是您所需要的：

```
DataTable tblSorted = table.AsEnumerable()
                 .Select((Row, Ordinal) => new {Row,Ordinal})
                 .OrderBy(x => x.Row.Field<int>("Bit"))
                 .ThenByDescending(x => x.Ordinal)
                 .Select(x => x.Row)
                 .CopyToDataTable(); 
```

基本上，它通过此重载将表中行的索引传递给[`Enumerable.Select`](http://msdn.microsoft.com/en-us/library/bb534869.aspx)匿名类型。然后它将按`Bit`第一个和索引/序数第二个排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:50:40.283

一种解决方法，

在这些行之后，你应该得到你想要的 arrySBit

```
DataTable arrySBitClone = arrySBit.Copy();
arrySBit.DefaultViewSort.Sort = "Bit";

bool different = false;
for(int i=0; i<arrySBit.Rows.Count; i++)
{
  if(arrySBit.Rows[i]["Bit"]!=arrySBitClone.Rows[i]["Bit"])
  {
    difference = true;
    break;
  }
}

if(!different)
{
  arrySBit = arrySBit.Copy(); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:46:37.913

如果我说对了你的问题。为什么不使用选择？

DataTable dt = arraySBit.Select("", "Bit, Size").CopyToDataTable();

Select Method的第一个参数是过滤条件，第二个是Order By，所以它应该可以工作

# jquery - 使用 jQuery 查找以前未知元素的所有匹配元素

> ID：14215997
> 
> 赞同：1
> 
> 时间：2013-01-08T13:27:58.903
> 
> 标签：jquery, jquery-selectors

不确定我是否在这里遗漏了明显的东西，但已经让自己陷入困境试图解决这个问题。

我想找到一个容器的第一个子元素，然后返回它的元素或类并使用它来获取该容器中的任何其他顶级匹配元素。

例如

```
<div class="box">
    <a href="#">The First Element</a>
    <div><p> some content with a <a href="#">link that should not be included</a></div>
    <h2>a heading</h2>
    <p>this is some content</p>
    <a href="#">This link should be found by the search</a>
</div> 
```

所以我想使用 jQuery 找出第一个孩子是什么（在这种情况下是一个“a”标签），然后搜索任何匹配的元素，我宁愿只得到直接的后代，有什么想法吗？

编辑：感谢您的出色回应-我认为我缺少的第一件事是 .prop 方法，必须测试几个解决方案，看看哪个最适合....更新即将推出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:31:56.073

```
var $box = $('.box'), 
    $first = $box.children().first(),
    type = $first.prop('localName'),
    $matching = $box.children(type); 
```

[http://jsfiddle.net/X8hgP/](http://jsfiddle.net/X8hgP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:44:16.830

有点不清楚，所以这里有一些选择：我把背景调成石灰只是为了演示前几个。

然后，第一个链接的所有兄弟姐妹：

```
$('a:first').siblings().css('background-color', 'lime'); 
```

框内第一个元素的所有兄弟元素：

```
$('.box>:first').siblings().css('background-color', 'lime'); 
```

`a`框内第一个元素的所有兄弟

```
$('.box>:first(a)').siblings().css('background-color', 'lime'); 
```

现在，一些更复杂的东西，与第一个元素匹配的东西：

```
$('.box>:first').each(function () {
  //if it has a single class we can do this
  var myclass = '.' + $(this).attr('class');
  // use that single class above
  $(this).siblings(myclass).css('background-color', 'blue');

  //find elements with the same tag that are siblings of my element
  $(this).siblings(this.tagName).css('background-color', 'lime');

  //handle multiple classes
  var myclassAll = $(this).attr('class');

  //split the multiple classes, then use it
  var myclassList = myclassAll.split(" ");
  $(this).siblings().each(function () {
    var iam = $(this);// each sibling
    $.each(myclassList, function (i) {
      if (iam.hasClass(myclassList[i])) {
        iam.addClass(myclassList[i] + 'New');//add new class on matches
      }
    });
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:38:58.103

```
var fc= jQuery(".box>:first-child").eq(0); //is the first child of container
var allE = fc.parent().children(fc.prop("tagName")); //contains all elements with tagname equal to fc's 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T13:43:58.230

看看这个 - [http://jsfiddle.net/xyK72/](http://jsfiddle.net/xyK72/)

```
var selectedElement = $('.box > :first-child').prop('tagName');
$('.box > :first-child').siblings(selectedElement).addClass('highlight'); 
```

请注意，您正在寻找兄弟姐妹，而不是后代。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T13:45:38.337

```
var first_element = $(".box *:first-child").prop("tagName");
alert( first_element  ); 
```

注意 >>> ***:first-child**它从选择器中获取第一个 HTML 标签

# php - 从 2 个数据库表中获取结果

> ID：14215999
> 
> 赞同：-4
> 
> 时间：2013-01-08T13:28:03.423
> 
> 标签：php, mysql

我需要一些帮助才能获得评论最多的帖子。有 2 个表，一个有帖子 web_content，另一个表有评论 web_jcomments。

我需要获得评论最多的帖子和评论的数量。web_content.ID = web_jcomments.object_id。数据库在 MYSQL 中。

请问有人可以帮助SQL代码吗？感谢您阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:50:45.763

```
SELECT 
       wc.ID,
       wj.Total
FROM web_content as wc
LEFT JOIN (
          SELECT 
                object_id,
                count(object_id)   as Total 
) as  wj on wc.ID = wj.object_id
ORDER BY wi.Total DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:47:49.577

很久没写MySQL了。。

就像是：

```
SELECT  
        web_content.ID, 
        COUNT(*) 
FROM web_content.ID 
LEFT JOIN web_jcomments ON (web_content.ID = web_jcomments.object_id) 
```