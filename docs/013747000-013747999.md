# StackOverflow 问答 13747000-13747999

# asp.net - DetailsView 无法确定如何触发更新事件

> ID：13747003
> 
> 赞同：0
> 
> 时间：2012-12-06T15:32:38.893
> 
> 标签：asp.net, vb.net, sqldatasource, detailsview

在过去的几天里，我一直在尝试使用 DetailsView 来显示和编辑从 GridView 获取的单个记录中的数据，它们都从 SqlDataSource 读取它们的数据。

我一直在互联网和 MSDN 上搜索有关如何使用 DetailsView 编辑数据的信息，并且我设法将一些东西拼凑在一起，问题是显然实际的更新方法没有运行。

所以这是我的代码的摘录

GridView 页面中：

```
 <asp:DetailsView ID="DetailsView1" runat="server" Height="50px" Width="125px" AutoGenerateRows="False" DefaultMode="Edit">
                    <fields>
                        <asp:TemplateField HeaderText="Codice Cliente">
                            <ItemTemplate>
                                <asp:Label ID="lblCliCod" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.cli_cod") %>'></asp:Label>
                            </ItemTemplate>
                            <EditItemTemplate>
                                <asp:TextBox ID="txtCliCod" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.cli_cod")%>'></asp:TextBox>
                            </EditItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Descrizione">
                            <ItemTemplate>
                                <asp:Label ID="lblCliDesc" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.cli_desc")%>'></asp:Label>
                            </ItemTemplate>
                            <EditItemTemplate>
                                <asp:TextBox ID="txtCliDesc" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.cli_desc")%>'></asp:TextBox>
                            </EditItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Nome Utente">
                            <ItemTemplate>
                                <asp:Label ID="lblCliUser" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.cli_user")%>'></asp:Label>
                            </ItemTemplate>
                            <EditItemTemplate>
                                <asp:TextBox ID="txtCliUser" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.cli_user")%>'></asp:TextBox>
                            </EditItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Password">
                            <ItemTemplate>
                                <asp:Label ID="lblCliPass" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.cli_pass")%>'></asp:Label>
                            </ItemTemplate>
                            <EditItemTemplate>
                                <asp:TextBox ID="txtCliPass" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.cli_pass")%>'></asp:TextBox>
                            </EditItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Amministratore">
                            <ItemTemplate>
                                <asp:Label ID="lblCliAdmin" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.cli_admin")%>'></asp:Label>

                            </ItemTemplate>
                            <EditItemTemplate>
                                <asp:CheckBox ID="chkCliAdminE" runat="server" Text='<%# CBool(DataBinder.Eval(Container, "DataItem.cli_admin"))%>' />
                            </EditItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField>
                            <EditItemTemplate>

                                <asp:LinkButton Text="Aggiorna" ID="UpdateButton" runat="Server" CommandName="Update"></asp:LinkButton>
                                <asp:LinkButton Text="Elimina" ID="DeleteButton" runat="server" CommandName="Edit"></asp:LinkButton>
                            </EditItemTemplate>
                        </asp:TemplateField>
                    </fields>
                </asp:DetailsView> 
```

代码隐藏的相关部分：

```
Private Sub SetupDataSource() 'this is the sqldatasource I'm using for the detailsview

    SqlDataSource2.ConnectionString = Assist.connectionString
    SqlDataSource2.SelectCommand = detailsSelect
    SqlDataSource2.SelectParameters.Add(New Parameter("id"))

    SqlDataSource2.UpdateCommand = detailsUpdate
    SqlDataSource2.UpdateParameters.Add(New Parameter("cli_cod"))
    SqlDataSource2.UpdateParameters.Add(New Parameter("cli_desc"))
    SqlDataSource2.UpdateParameters.Add(New Parameter("cli_user"))
    SqlDataSource2.UpdateParameters.Add(New Parameter("cli_pass"))
    SqlDataSource2.UpdateParameters.Add(New Parameter("cli_admin"))

End Sub

Private Sub SetupDetailsView(id As Int32)
    DetailsView1.AutoGenerateRows = False
    DetailsView1.DataSource = SqlDataSource2

    SqlDataSource2.SelectParameters("id").DefaultValue = id

End Sub

Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
    cn.Open()
    SetupDataSource()

   If Not IsPostBack Then
        Dim id As String = Request.QueryString("id")
        If id <> "" Then

            SetupDetailsView(id)
            DetailsView1.DataBind()
        End If
    End If
End Sub

    Protected Sub DetailsView1_ItemUpdating(sender As Object, e As DetailsViewUpdateEventArgs) Handles DetailsView1.ItemUpdating
    Dim cliCod As String = (CType(DetailsView1.FindControl("txtCliCod"), TextBox)).Text.ToString()
    Dim cliDesc As String = (CType(DetailsView1.FindControl("txtCliDesc"), TextBox)).Text.ToString()
    Dim cliUser As String = (CType(DetailsView1.FindControl("txtCliUser"), TextBox)).Text.ToString()
    Dim cliPass As String = (CType(DetailsView1.FindControl("txtCliPass"), TextBox)).Text.ToString()
    Dim cliAdmin As Boolean = If((CType(DetailsView1.FindControl("chkCliAdminE"), CheckBox)).Checked = True, True, False)

    SqlDataSource2.UpdateParameters("cli_cod").DefaultValue = cliCod
    SqlDataSource2.UpdateParameters("cli_desc").DefaultValue = cliDesc
    SqlDataSource2.UpdateParameters("cli_user").DefaultValue = cliUser
    SqlDataSource2.UpdateParameters("cli_pass").DefaultValue = cliPass
    SqlDataSource2.UpdateParameters("cli_Admin").DefaultValue = If(cliAdmin = True, "1", "0")

    DetailsView1.DataBind()
End Sub 
```

我要么遗漏了某些东西，要么在某处做错了，这是哪一个，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:14:18.173

我不是使用 SqlDataSource 的专家，但您可以尝试`SqlDataSource.Update`在 Item_Updating 方法中插入一个：

```
SqlDataSource2.UpdateParameters("cli_cod").DefaultValue = cliCod
SqlDataSource2.UpdateParameters("cli_desc").DefaultValue = cliDesc
SqlDataSource2.UpdateParameters("cli_user").DefaultValue = cliUser
SqlDataSource2.UpdateParameters("cli_pass").DefaultValue = cliPass
SqlDataSource2.UpdateParameters("cli_Admin").DefaultValue = If(cliAdmin = True, "1", "0")

SqlDataSource2.Update();

DetailsView1.DataBind() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:25:08.533

我在正在进行的项目中使用 DetailsView。它们很挑剔，但在正确设置时效果很好。

我可以通过您的 DetailsView 看到的几个潜在问题是：

**评估与绑定**

与所有数据绑定控件一样，Databinder.Eval 是一种只读数据绑定方法。要允许控件自动更新，您必须在编辑模板中使用 Bind。当然，您可以手动更新数据库，但为什么要重新发明轮子呢？

> ```
> <asp:TemplateField HeaderText="Codice Cliente">
> <ItemTemplate>
> <asp:Label ID="lblCliCod" runat="server" Text='<%# Eval("DataItem.cli_cod") %>'></asp:Label>
> </ItemTemplate>
> <EditItemTemplate>
> <asp:TextBox ID="txtCliCod" runat="server" Text='<%# Bind("DataItem.cli_cod")%>'></asp:TextBox>
> </EditItemTemplate>
> </asp:TemplateField> 
> ```

**内置更新功能与手动更新功能**

您实际上不需要使用 DetailsView1_ItemUpdating ，除非您想在提交之后和提交到数据源之前捕获和修改值。即将单个年/月/日文本框连接成一个日期。

但是，由于您当前没有生成更新按钮（使用属性 AutoGenerateEditButton="True"），因此您可能需要在尝试时手动处理更新。或者，对于基本绑定和更新，我会注释掉更新函数，添加 autogenerateeditbutton="True" 属性，然后尝试更新。

**首要的关键**

对于某些数据源，您必须在 DetailsView 上指定 DataKeyNames 属性（您的数据源的主键）以启用自动绑定。我不确定，但您可能还需要设置 DefaultMode 属性。

所有属性和方法都在[MSDN DetailsView 页面](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.aspx)上得到了很好的解释，但它相当冗长。MSDN Updating [a DetailsView 页面](http://msdn.microsoft.com/en-us/library/ms227560%28v=vs.100%29.aspx)更简洁

# java - 在状态 abb 之间添加逗号。和地址列表中的邮政编码

> ID：13747007
> 
> 赞同：0
> 
> 时间：2012-12-06T15:32:50.640
> 
> 标签：java

我相信正则表达式会是`"[A-Z]{2} [0-9]{5}"`. 我将如何浏览列表并在两者之间添加逗号？在州缩写和邮政编码之间。

我应该找到正则表达式的位置，然后在索引 2 处添加一个逗号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:43:22.630

假设字符串列表总是在每个字符串的末尾有一个缩写和一个邮政编码，您可以遍历列表并调用它，使用返回值替换现有字符串。

```
public String addComma(String address) {
    String[] tmp = address.split(" ");
    String newAddress = "";
    int len = tmp.length;
    for (int i = 0; i < len - 2; i++) {
        //add all the information before the state abbreviation and post code
        newAddress = newAddress + tmp[i] + " ";
    }
    return (newAddress + tmp[len - 2] + ", " + tmp[len - 1]);
} 
```

# ibm-connections - 有没有办法在 IBM Connections 名片弹出窗口中注入组件？

> ID：13747009
> 
> 赞同：1
> 
> 时间：2012-12-06T15:32:58.487
> 
> 标签：ibm-connections, ibm-sbt

我正在与 IBM Connections 4.0 集成，并希望在将鼠标悬停在 Connections 界面中的联系人上时将一个组件注入到名片弹出窗口中：

![名片弹出示例](../Images/af06653ffae604b8991fb9ba90f14c25.png)

该组件可以像链接一样简单，但 iWidget 或 OpenSocial Gadget 也很棒。名片是否有任何集成点？

我做了一些初步研究，但除了将名片集成到外部应用程序之外，还没有发现太多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T16:01:55.127

扩展名片在这里解释

[http://infolib.lotus.com/resources/connections/4.0/doc/en_us/ic4_p4.html#c_admin_profiles_customize_biz_card_links](http://infolib.lotus.com/resources/connections/4.0/doc/en_us/ic4_p4.html#c_admin_profiles_customize_biz_card_links)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T17:44:16.063

对于后代，我根据 muenzpraeger 的回答附加了我为实现此目的而采取的步骤，以遵循[IBM Connections 4 Part 4: Customizing, Security, Performance, and Integration](http://infolib.lotus.com/resources/connections/4.0/doc/en_us/ic4_p4.html#c_admin_profiles_customize_biz_card_links)中的步骤。请注意，您的路径可能不同，您需要获得正确的用户和密码才能访问 wsadmin 控制台。

```
$ mkdir -p /tmp/business-card-add-link
$ cd /opt/IBM/WebSphere/AppServer/profiles/Dmgr01/bin
$ ./wsadmin.sh -user USER -password PASSWORD -lang jython
wsadmin> execfile("connectionsConfig.py")
wsadmin> print AdminControl.getCell()
connectionswwCell01
wsadmin> LCConfigService.checkOutConfig("/tmp/business-card-add-link","connectionswwCell01") 
```

将以下内容添加到 /tmp/business-card-add-link 中的 LotusConnections-config.xml

```
<sloc:serviceReference serviceName="googleMeService"
  href="http://www.google.com"   enabled="true"
  ssl_href="http://www.google.com"   ssl_enabled="false"
  person_card_service_url_pattern="/search?hl=en&amp;q=email:{email}:userid:{userid}:uid:{uid}:displayName:{displayName}:phone:{workPhoneNumber}&amp;btnG=Google+Search" 
  person_card_service_name_js_eval="'Google Me'"/> 
```

并保存文件。回到控制台：

```
wsadmin> LCConfigService.updateConfig("versionStamp","")
wsadmin> LCConfigService.checkInConfig()
wsadmin> synchAllNodes() 
```

重新启动连接

链接中的说明说也要对 service-location.xsd 文件进行更改，但这些更改在签入和重新启动后并没有持续存在。这会导致阻止连接服务器正常运行的错误。查看日志文件，它抱怨 LotusConnections-config.xml 中引用的服务 googleMeService 不在 service-location.xsd 的服务列表中。

为了解决这个问题，我刚刚更改了 service-location.xsd 文件。我使用 find 命令发现了两个文件：

```
find . | grep LotusConnections-config/service-location.xsd 
```

我按照链接文档的指示添加`<xsd:enumeration value="googleMeService" />`到该部分并重新启动了 Connections 服务器。`<xsd:simpleType name="serviceNames">`

# teradata - 是否可以在与 PARTITION BY 相同的查询中使用 WHERE 子句？

> ID：13747015
> 
> 赞同：2
> 
> 时间：2012-12-06T15:33:23.707
> 
> 标签：teradata

我需要编写的 SQL 只保留表中每个可识别记录的最少 5 条记录。为此，我使用`partition by`并删除了返回值大于 5 的所有记录。当我尝试在与`partition by`语句相同的查询中使用 WHERE 子句时，我收到错误“WHERE 子句中不允许使用有序分析函数”。所以，为了让它工作，我必须使用三个子查询。我的 SQL 看起来像这样：

```
delete mydb.mytable where (field1,field2) in
(
    select field1,field2 from
    (
        select field1,field2,
        Rank() over
        (
            partition BY field1
            order by field1,field2
        ) n 
        from mydb.mytable
    ) x
    where n > 5
) 
```

最里面的子查询只返回原始数据。因为我不能在那里使用 WHERE，所以我用一个子查询包装了它，其目的是 1）使用 WHERE 获取排名大于 5 的记录，以及 2）只选择 field1 和 field2。我只选择这两个字段的原因是我可以使用 IN 语句删除最外层查询中的那些记录。

它可以工作，但看起来有点麻烦。我想将内部的两个子查询合并为一个子查询。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:25:35.410

听起来您需要使用Window Aggregate 函数`QUALIFY`的`HAVING`子句。以下是我对您要完成的工作的看法。

***请不要在未先测试之前直接针对您的生产数据运行此 SQL。***

```
/* Physical Delete */
DELETE TGT
  FROM MyDB.MyTable TGT
 INNER JOIN
       (SELECT Field1
             , Field2
        FROM MyDB.MyTable
        QUALIFY ROW_NUMBER() (PARTITION BY Field1, ORDER BY Field1,2)
              > 5
       ) SRC
    ON TGT.Field1 = SRC.Field1
   AND TGT.Field2 = SRC.Fileld2

/* Logical Delete */
UPDATE TGT
  FROM MyDB.MyTable TGT
     ,
       (SELECT Field1
             , Field2
        FROM MyDB.MyTable
        QUALIFY ROW_NUMBER() (PARTITION BY Field1, ORDER BY Field1,2)
              > 5
       ) SRC
   SET Deleted = 'Y'
    /* RecordExpireDate = Date - 1 */
 WHERE TGT.Field1 = SRC.Field1
   AND TGT.Field2 = SRC.Fileld2 
```

# qt - 为什么 Qt 中的插件有 .dll 和 .lib 文件？

> ID：13747016
> 
> 赞同：1
> 
> 时间：2012-12-06T15:33:24.150
> 
> 标签：qt, plugins

据我所知，插件是在运行时加载的，因此它们不需要 .lib 文件，而 .dll 文件足以在运行时加载它们。但是当你在 Qt 中创建一个插件并在 Windows 中编译它时，你会得到一个 .dll 文件和一个 .lib 文件以及其他一些文件。故事中最令人惊奇的部分是，如果要使用该插件，您无需将其链接到您的程序。那么为什么有必要呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:41:15.410

这是构建共享库的标准 qmake 方式，它也会自动输出导入库。

仅仅因为它是一个插件并且可以将其作为插件加载，并不意味着您不能将其用作库，因为 dll 仍然是一个库，如果通过通常的共享库接口公开，与插件相关的功能可能会很有用.

# asp.net - 如何计算动态创建的网格视图页脚中的总数？

> ID：13747025
> 
> 赞同：1
> 
> 时间：2012-12-06T15:33:51.753
> 
> 标签：asp.net, gridview

在我的代码中，我动态创建了一些网格视图。对于这些网格视图中的每一个，我想显示一个包含每列总数的页脚。我怎样才能做到这一点？

这是我创建网格视图的代码：

```
 gv_arr(chart_count) = New GridView
            gv_arr(chart_count).ID = "gv" & chart_count.ToString
            gv_arr(chart_count).DataSource = dt
            If statistieksoort = LnxEnum.EBIChartType.DataGridView Then 'DataGridView
                gv_arr(chart_count).Visible = True

                'Footer voor de totalen tonen indien nodig
                gv_arr(chart_count).ShowFooter = True                    
            Else
                gv_arr(chart_count).Visible = objBichart.ShowGridView
            End If
            gv_arr(chart_count).DataBind() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:40:18.340

您需要在 rowDataBound 事件中为每个数据行合计要合计的列，然后在同一事件的页脚行中插入合计。

```
Protected Sub gridDetails_RowDataBound(ByVal sender As Object, ByVal e As Obout.Grid.GridRowEventArgs) Handles gridDetails.RowDataBound
            If e.Row.RowType = GridRowType.DataRow Then
                subTotal+= {column with subtotal value}
                taxTotal += {column with tax value}
                discountTotal += {column with discount value}
            ElseIf e.Row.RowType = GridRowType.ColumnFooter Then
                Dim totalText1 As String = String.Empty
                Dim totalText2 As String = String.Empty
                grandTotal = subTotal + taxTotal + discountTotal
                totalText1 = "Subtotal:<br />Tax:<br />Disc / Surc:<br />Total:"
                totalText2 = String.Format("{0}<br />{1}<br />{2}<br />{3}", subTotal.ToString("c"), taxTotal.ToString("c"), discountTotal.ToString("c"), grandTotal.ToString("c"))

                e.Row.Cells(5).Text = totalText1
                e.Row.Cells(6).Text = totalText2
            End If
        End Sub 
```

我发现这在大约 95% 的时间里都有效。有时，如果您正在处理奇怪的绑定，您可能需要查看数据绑定事件以进行总计。总变量是全局范围的。

# c# - 简单的注入器将硬编码的值传递给构造函数

> ID：13747027
> 
> 赞同：9
> 
> 时间：2012-12-06T15:33:57.227
> 
> 标签：c#, dependency-injection, ioc-container, simple-injector

在[Simple Injector](https://simpleinjector.org)中，我可以执行以下操作：

```
container.RegisterSingle<IAuctionContext>(() => new AuctionContext(
    new Uri("http://localhost:60001/AuctionDataService.svc/"))); 
```

我在这里做的是说当`IAuctionContext`找到时，用这个新的`AuctionContext`. 问题是调用 时`RegisterSingle`，只会使用一个实例`AuctionContext`。我希望它能够`Uri`像上面那样传递参数但没有单个实例但每次都允许一个新实例。

这怎么可能？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T20:19:45.343

您尝试注入的值是一个简单的硬编码值。对于硬编码值和配置值等常量值，只需使用以下`Register`方法：

```
var uri = new Uri("http://localhost:60001/AuctionDataService.svc/");

container.Register<IAuctionContext>(() => new AuctionContext(uri)); 
```

该`Register`方法确保每次都返回一个新实例。

当涉及到注入在应用程序过程中可能发生变化的值时，请阅读[这篇关于注入运行时数据](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=99)的文章。

# c# - 如何在 linq 查询中动态实例化更具体的类型

> ID：13747041
> 
> 赞同：0
> 
> 时间：2012-12-06T15:34:29.050
> 
> 标签：c#, linq, reflection, instantiation

我有一个 linq 查询，它当前正在基于泛型类型参数进行对象实例化。我实际上需要实例化泛型参数的更具体的子类。有没有办法用派生类型进行实例化？如有必要，我愿意使用反射甚至直接 IL 发射，但如果可能的话，我想尝试对基类的属性进行类型检查。

所以我的代码是这样的：

```
IQueryable<TType> myObjects = from blah in blahblah
                              select new TType
                              {
                                   PropertyA = someValue;
                                   PropertyB = someOtherValue;
                              } 
```

但我需要 IQueryable 中的对象实际上是 TType 的派生类。我事先不知道它们将是哪个派生类，只是它们都是基于其他逻辑的相同派生类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:41:56.743

听起来你需要一个工厂模式：

```
from blah in blahblah
select BaseTypeFactory.Create(/* parameters/objects necessary to create the BaseType*/) 
```

然后`BaseTypeFactory`它会做它需要做的任何事情来吐出正确的派生`BaseType`实例。

如果（如您的评论所说）`TType`被限制为特定的基本类型，则工厂可能看起来像：

（假设`TType`受 约束`where TType : BaseType`）

```
public void BaseType TTypeFactory.Create(/* parameters/objects needed to create Base Types*/)
{
    // full of assumptions, modify to fit your needs:
    switch( typeID /*or some othervariable designating type to create*/)
    case 1: // DerivedType 1
        return new DerivedType1 { /* initialization parameters */ };
        break;
    case 2:
        return new DerivedType2 { /* initialization parameters */ };
        break;
    // etc.

} 
```

# php - json_encode(array) 插入数据库

> ID：13747042
> 
> 赞同：1
> 
> 时间：2012-12-06T15:34:31.203
> 
> 标签：php, mysql, arrays, json, insert

我的数组有一些值

```
 0 => '1'
  1 => 'moisturizer'
  2 => 'skincare' 
```

我正在尝试将该数组转换为字符串，我目前正在使用`json_encode`

```
$value = array_shift( $val_ary ); //val_ary is that array
echo json_encode($value); // This will echo my data like

["1","moisturizer","skincare"] 
```

稍后我想在我的 mysql 数据库表中插入这些值

```
mysql_query("INSERT INTO TABLE (sno, type, category)
VALUES ('json_encode($value)')"); 
```

这应该工作吗？

或者我应该`json_decode`在我插入数据库之前？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:36:25.730

`json_encode(array)`返回一个 json 字符串，而 MySQL 插入的值应该是 (value1,value2,...)。`json_decode(json_string)`返回一个数组，并`implode`用“，”将数组片段粘合起来，分隔数组对象。如果您唯一要做的就是将其插入数据库，则无需将其转换为 json。通常 json 用于在页面/服务器之间传递信息（例如 AJAX 调用）或将数组保存为数据库中的字符串

**如果您以 json 格式获取数据：**

```
$value = json_encode(array(value1,value2,...)) 
```

做

```
mysql_query("INSERT INTO TABLE (sno, type, category) 
    VALUES ('".implode(",",json_decode($value))."')"); 
```

**如果您将数据作为数组获取：**

```
$value = array(value1,value2,...) 
```

做

```
mysql_query("INSERT INTO TABLE (sno, type, category) 
    VALUES ('".implode(",",$value)."')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:50:46.060

我认为您在这里不需要 JSON。这些你可以试试

```
$arr = array(0 => '1', 1 => 'moisturizer', 2 => 'skincare');
mysql_query("INSERT INTO TABLE (sno, type, category) VALUES ('{$arr[0]}', '{$arr[1]}', '{$arr[2]}')"); 
```

如果您的数组是多维的，那么您可以使用`foreach`循环插入数据，

```
$values = array();
foreach($arr as $k=>$v){
   $values[] = "('{$v[0]}', '{$v[1]}', '{$v[2]}')";
}
mysql_query("INSERT INTO TABLE (sno, type, category) VALUES ".implode(',', $values)); 
```

**注意：**不要使用 mysql_* 函数，它们很快就会被弃用。而是使用 PDO 或 MySqli 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T15:51:58.620

JSON 是一种将数据表示为字符串的方法。它主要用于传输数据。

JSON在这里没有位置，只有[`implode`](http://us2.php.net/implode)数据，并在查询中使用它。

```
mysql_query("INSERT INTO TABLE (sno, type, category) VALUES ".
    "(" . implode(",", $value) . ")"); 
```

# ruby-on-rails - 安装 minitest rails 后，rake test 不做任何事情

> ID：13747045
> 
> 赞同：4
> 
> 时间：2012-12-06T15:34:32.737
> 
> 标签：ruby-on-rails, ruby, minitest

问题标题几乎概括了它，但这里有一个更按时间顺序的描述：

1.  我开始了一个新的 rails 3.2.9 应用程序，没有通过任何特殊选项（即没有跳过测试单元）。
2.  我添加`minitest-rails`到 gemfile 并运行 bundle install。
3.  我删除了 test 文件夹的内容，然后运行`rails g mini_test:install`​​.

现在，如果我跑步`rake test`，什么也不会发生。

我可以制作自己的 rakefile 并`TestTask`手动指定，但除非我手动复制所有这些，否则我无法获得执行`rake test:controllers`应该内置的类似操作的选项。

有没有其他人遇到过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-05T09:55:24.400

确保`require 'test_helper'`在测试文件之上添加。例如

```
require 'test_helper'

class UsersControllerTest < ActionController::TestCase
  test "should pass" do
    assert true
  end
end 
```

我拥有的自动生成的 test_helper 文件如下所示：

```
ENV["RAILS_ENV"] ||= "test"
require File.expand_path('../../config/environment', __FILE__)
require 'rails/test_help'

class ActiveSupport::TestCase
  ActiveRecord::Migration.check_pending!

  fixtures :all

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T07:38:16.503

很高兴您正在切换到 MiniTest！我也许可以帮助您走上正轨。

老实说，我会完全避免耙子。尝试从命令行运行测试以确保您的测试套件正常工作。

```
ruby -Itest test/unit/something.rb 
```

在您知道您的测试通过之后，然后获取 guard-minitest 并将其设置为监视您的文件。当您保存更改时，它会自动为您运行测试。minitest 和 guard 最糟糕的部分是设置，但是一旦你把它做好了，你就再也不想回去了。

[https://github.com/guard/guard-minitest](https://github.com/guard/guard-minitest)

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:08:58.977

我猜你到目前为止还没有运行/生成任何控制器或脚手架命令。创建脚手架/控制器/模型并迁移数据库后，您的 rake 测试将开始工作

关于 rake test:controllers，当我尝试用 rake -T 列出时，它仍然没有列出

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T16:14:32.777

您可能需要通过将以下内容添加到`config/application.rb`文件中来将 minitest-rails 注册为默认测试引擎：

```
config.generators do |g|
  g.test_framework :mini_test
end 
```

之后，您可以使用以下命令运行控制器测试：

```
rake minitest:controllers 
```

# wpf - DataGrid 区域未填充单元格

> ID：13747049
> 
> 赞同：0
> 
> 时间：2012-12-06T15:34:43.657
> 
> 标签：wpf, datagrid, contextmenu

如何访问未填充单元格的 DataGrid 区域？

![在此处输入图像描述](../Images/7a9769065aa571ee3f5952df6e8836c4.png)

我只想为这个区域添加上下文菜单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:53:08.830

您可以为“空白”区域将 ContextMenu 分配给 DataGrid 本身，但如果您没有为行分配不同的上下文菜单（或“DataGrid.行样式”属性）。

“解决方法”是专门为行分配不同的上下文菜单。

```
<DataGrid>
    <DataGrid.ContextMenu>
        <ContextMenu>
            <MenuItem Header="Menu Item in Blank Area" />
        </ContextMenu>
    </DataGrid.ContextMenu>
    <DataGrid.RowStyle>
        <Style TargetType="{x:Type DataGridRow}">
            <Setter Property="ContextMenu">
                <Setter.Value>
                    <ContextMenu>
                        <MenuItem Header="Menu Item just for Populated Rows" />
                    </ContextMenu>
                </Setter.Value>
            </Setter>
        </Style>
    </DataGrid.RowStyle>   
</DataGrid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:25:19.013

根据您对先前答案的评论，我看到您想在标题上设置一个 ContextMenu，并为您的单元格和空白空间设置一个单独的。我可以通过覆盖模板来设置单独的 ContextMenus：

```
<Window x:Class="Apc_System_Generator.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.Resources>
            <ResourceDictionary>
                <ContextMenu x:Key="cmenu">
                    <MenuItem Header="FOO" />
                    <MenuItem Header="BAR" />
                </ContextMenu>
                <ContextMenu x:Key="omenu">
                    <MenuItem Header="LOL" />
                    <MenuItem Header="WUT" />
                </ContextMenu>
            </ResourceDictionary>
        </Grid.Resources>
        <DataGrid Name="LOL" AutoGenerateColumns="True" ContextMenu="{StaticResource cmenu}">
            <DataGrid.Template>
                <ControlTemplate TargetType="{x:Type DataGrid}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <DataGridColumnHeadersPresenter Grid.Row="0" ContextMenu="{StaticResource omenu}" />
                        <DataGridRowsPresenter Background="gray" Grid.Row="1" IsItemsHost="True" />
                    </Grid>
                </ControlTemplate>
            </DataGrid.Template>
        </DataGrid>
    </Grid>
</Window> 
```

# javascript - 如何在另一帧上使用mediaelementjs播放器的src文件

> ID：13747051
> 
> 赞同：2
> 
> 时间：2012-12-06T15:34:53.390
> 
> 标签：javascript, html, frame, mediaelement.js

我`mediaelementjs`在页面的一个框架中有一个播放器，另一个框架有音频文件列表。谁能告诉我如何从另一个框架访问播放器？

仅供参考，具有媒体播放器的框架：

```
<script type="text/javascript">// <![CDATA[
$(document).ready(function() {
    $('audiox').mediaelementplayer("#audiox");
});
// ]]></script> 
```

谢谢萨蒂什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:53:45.857

出于安全原因，有意阻止在浏览器中的窗口和框架之间传递数据。

如果您想传递数据，您应该尝试摆脱框架并在同一页面上加入内容。

如果您确实必须保留框架，那么我建议您研究*Javascript*和*Ajax*以安全地传递数据，但这需要访问能够运行服务器端代码（如*PHP*或*ASP* ）的服务器。

可能还有一个 HTML5 功能，用于在帧之间将数据作为消息传递。我在这里找到了一个如何使用它的例子：http: [//ajaxian.com/archives/cross-window-messaging-with-html-5-postmessage](http://ajaxian.com/archives/cross-window-messaging-with-html-5-postmessage)

请记住检查消息的来源，以防止有人从外部站点发送消息。

# ios - PhoneGap 2.1 启动画面

> ID：13747053
> 
> 赞同：0
> 
> 时间：2012-12-06T15:34:59.113
> 
> 标签：ios, cordova, splash-screen

我们的 config.xml 有

```
<gap:splash src="splash.png" />
<gap:splash src="res/screen/ios/screen-iphone-portrait.png" gap:platform="ios" width="320" height="480" />
<gap:splash src="res/screen/ios/screen-iphone-portrait-2x.png" gap:platform="ios" width="640" height="960" />
<gap:splash src="res/screen/ios/screen-ipad-portrait.png" gap:platform="ios" width="768" height="1024" />
<gap:splash src="res/screen/ios/screen-ipad-landscape.png" gap:platform="ios" width="1024" height="768" /> 
```

但是，当我们上传到 Phonegap 构建 (build.phonegap.com) 服务时，它并没有给我们 iOS 构建中的启动画面/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:31:36.007

您能否向我们提供有关您使用的设备类型的更多信息？如果您在 iphone 5 上部署测试应用程序，恐怕您会错过启动画面。我的应用程序遇到了同样的问题。尝试为 iphone 5 创建具有以下屏幕尺寸的图像：

```
<gap:splash src="resources/images/ios/Default_iphone5.png"  width="640" height="1136" /> 
```

# java - 使用 java 运行外部 jar

> ID：13747055
> 
> 赞同：0
> 
> 时间：2012-12-06T15:35:02.890
> 
> 标签：java, runtime, external

所以，我一直在做一些搜索，我可以找到一些关于如何运行外部应用程序的东西，但我无法让它们工作！我已经为此工作了一段时间，这真的很烦人。

我想要做的是在目录中运行一个 .jar 文件

`C:\Program Files\AVTECH\NPS\Files\bin\NPS.jar`

我用代码尝试了很多不同的东西

`Process p = Runtime.getRuntime().exec("dir goes here");`.

还

`Process p = Runtime.getRuntime().exec("C:\\Program Files\\AVTECH\NPS\\Files\\bin\\NPS.jar");`.

如果我是正确的，它使用命令提示符来执行此操作？或者至少是 MS-DOS 语言。几年前我做过一些这样的事情，但我不记得如何做到这一点......我以前从未在java中使用过这种东西......

有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:37:49.643

Runtime.exec() 就像你在输入一个命令一样工作。

启动 jar 文件不起作用：您必须调用

> java -jar /path/to/my/jar

查看 Oracle 文档以了解如何执行 jar 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:38:57.397

实际的命令应该是`java -jar C:\\Program Files\\AVTECH\NPS\\Files\\bin\\NPS.jar`. 我的意思是——如果 jar 文件确实是可执行的，这并不意味着它会运行，只需尝试调用它。您需要告诉 Java 运行它，如上所示。

此外，MS-DOS 不是一种语言——它代表 Microsoft 磁盘操作系统。如今，您将其作为 Windows 中内置的命令行提示符（Shell）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:00:39.757

您需要将该命令作为对可执行文件和一组参数的调用来运行。 [检查此版本的 Runtime.exec(String[] cmdarray)](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5b%5d%29)。如果需要，还有一个版本`Runtime.exec()`需要一个基目录来启动可执行文件。

# .net - .net中的定时器合并

> ID：13747058
> 
> 赞同：3
> 
> 时间：2012-12-06T15:35:17.510
> 
> 标签：.net, timer

Windows 7 引入了定时器合并，提高了能源效率。哪些托管 API 公开了计时器容差？似乎利用此功能的唯一方法是 p/invoke [SetWaitableTimerEx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd405521.aspx)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T17:07:27.993

没有我知道的托管 API，但也就是说，它是不那么麻烦的 P/Invokes 之一 - 这是我刚刚拼凑起来的一个快速而简单的类和简单的用法：

（我应该注意我只是*非常*基本地测试了这个......可能需要一些调整）[编辑：好的，有机会在午餐时调整一下，这应该*工作*，或多或少]

```
void Main()
{
    var waitFor = 6000;
    var tickAt = 2000;
    var tickEvery = 1000;
    var sw = Stopwatch.StartNew();  
    var running = true;

    var apcTask = Task.Factory.StartNew(() => 
    { 
        try 
        {
            Console.WriteLine("APC:Creating timer...");
            ApcTimer timer = new ApcTimer(@"Global\WillThisWork", tickAt, tickEvery, true);
            timer.Tick += (o,e) => 
            {
                Console.WriteLine("APC:Hey, it worked! - delta:{0}", sw.Elapsed);
            };
            Console.WriteLine("APC:Starting timer...");
            timer.Start();

            while(running);

            Console.WriteLine("APC:Stopping timer...");
            timer.Dispose();
            Console.WriteLine("APC:Finishing - delta:{0}", sw.Elapsed);
        } 
        catch(Exception ex)
        {
            Console.WriteLine(ex);
        }
    });

    Thread.Sleep(waitFor);
    running = false;
    Task.WaitAll(apcTask);
}

public class ApcTimer : IDisposable
{
    public delegate void TimerApcCallback(object sender, EventArgs args);
    public event TimerApcCallback Tick;

    private const long _MILLISECOND = 10000;
    private const long _SECOND = 10000000;

    private IntPtr _hTimer = IntPtr.Zero;
    private long _delayInMs;
    private int _period;
    private bool _resumeFromSleep;
    private Task _alerter;
    private CancellationTokenSource _cancelSource;
    private bool _timerRunning;

    public ApcTimer(
        string timerName, 
        long delayInMs, 
        int period, 
        bool resumeFromSleep)       
    {
        _hTimer = CreateWaitableTimer(IntPtr.Zero, false,timerName);
        if(_hTimer == IntPtr.Zero)
        {
            // This'll grab the last win32 error nicely
            throw new System.ComponentModel.Win32Exception();
        }   
        _delayInMs = delayInMs;
        _period = period;
        _resumeFromSleep = resumeFromSleep;
    }

    public void Start()
    {
        var sw = Stopwatch.StartNew();
        Debug.WriteLine("ApcTimer::Starting timer...");
        StopAlerter();

        SetTimer(_delayInMs);
        _cancelSource = new CancellationTokenSource();
        _alerter = Task.Factory.StartNew(
            ()=>
            {       
                _timerRunning = true;
                while(_timerRunning)
                {
                    var res = WaitForSingleObject(_hTimer, -1);
                    if(res == WaitForResult.WAIT_OBJECT_0)
                    {
                        if(Tick != null)
                        {
                            Tick.Invoke(this, new EventArgs());
                        }
                        SetTimer(_period);
                    }
                }
            }, _cancelSource.Token);

        Debug.WriteLine("ApcTimer::Started!");
    }

    public void Dispose()
    {
        Debug.WriteLine("ApcTimer::Stopping timer...");
        StopAlerter();
        CancelPendingTimer();

        if(_hTimer != IntPtr.Zero)
        {
            var closeSucc = CloseHandle(_hTimer);
            if(!closeSucc)
            {
                throw new System.ComponentModel.Win32Exception();
            }
            _hTimer = IntPtr.Zero;
        }
        Debug.WriteLine("ApcTimer::Stopped!");
    }

    private void SetTimer(long waitMs)
    {
        // timer delay is normally in 100 ns increments
        var delayInBlocks = new LARGE_INTEGER() { QuadPart = (waitMs * _MILLISECOND * -1)};
        bool setSucc = false;
        setSucc = SetWaitableTimer(_hTimer, ref delayInBlocks, 0, IntPtr.Zero, IntPtr.Zero, _resumeFromSleep);
        if(!setSucc)
        {
            // This'll grab the last win32 error nicely
            throw new System.ComponentModel.Win32Exception();
        }
    }

    private void CancelPendingTimer()
    {
        if(_hTimer != IntPtr.Zero)
        {
            Debug.WriteLine("ApcTimer::Cancelling pending timer...");
            CancelWaitableTimer(_hTimer);
        }
    }

    private void StopAlerter()
    {
        _timerRunning = false;
        if(_alerter != null)
        {
            Debug.WriteLine("ApcTimer::Shutting down alerter...");
            _cancelSource.Cancel();
            Task.WaitAll(_alerter);
        }
    }

    #region secret pinvoke goodness
    [DllImport("Kernel32.dll", SetLastError=true)]
    static extern WaitForResult WaitForSingleObject([In] IntPtr hHandle, int dwMilliseconds);

    [DllImport("Kernel32.dll", SetLastError=true)]
    [return:MarshalAs(UnmanagedType.Bool)]
    static extern bool CancelWaitableTimer([In] IntPtr hTimer);

    [DllImport("Kernel32.dll", SetLastError=true)]
    [return:MarshalAs(UnmanagedType.Bool)]
    static extern bool SetWaitableTimer(
        [In] IntPtr hTimer, 
        [In] ref LARGE_INTEGER dueTime, 
        [In] int period, 
        [In] IntPtr completionRoutine, 
        [In] IntPtr argToCallback, 
        [In] bool resume);

    [DllImport("Kernel32.dll", SetLastError=true)]
    static extern IntPtr CreateWaitableTimer(
        IntPtr securityAttributes, 
        bool manualReset,
        string timerName);

    [DllImport("Kernel32.dll", SetLastError=true)]
    static extern IntPtr CreateWaitableTimerEx(
        IntPtr securityAttributes, 
        string timerName, 
        TimerCreateFlags flags, 
        TimerAccessFlags desiredAccess);

    [DllImport("Kernel32.dll", SetLastError=true)]
    [return:MarshalAs(UnmanagedType.Bool)]
    static extern bool CloseHandle(IntPtr handle);  

    private const int INFINITE_TIMEOUT = 1;

    [Flags]
    private enum WaitForResult : int
    {
        WAIT_ABANDONED = 0x00000080,
        WAIT_OBJECT_0 = 0,
        WAIT_TIMEOUT = 0x00000102,
        WAIT_FAILED = -1
    }
    [Flags]
    private enum TimerAccessFlags : int
    {
        TIMER_ALL_ACCESS = 0x1F0003,
        TIMER_MODIFY_STATE = 0x0002,
        TIMER_QUERY_STATE = 0x0001
    }
    [Flags]
    private enum TimerCreateFlags : int
    {
        CREATE_WAITABLE_TIMER_MANUAL_RESET = 0x00000001
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct LargeIntegerSplitPart 
    {
        public uint LowPart;
        public int HighPart;
    }

    [StructLayout(LayoutKind.Explicit)]
    public struct LARGE_INTEGER 
    {
        [FieldOffset(0)]
        public LargeIntegerSplitPart u;
        [FieldOffset(0)]
        public long QuadPart;
    }
    #endregion  
} 
```

# android - 使用 android PackageManager 授权或不访问包

> ID：13747059
> 
> 赞同：0
> 
> 时间：2012-12-06T15:35:17.493
> 
> 标签：android, security

我刚刚做了以下测试：

*   APK1 : com.sample.apk1 : 用certificate1签名

*   APK2 : com.sample.apk2 : 使用不同于 certificate2 的 certificate2 签名

APK1 可以使用以下方式访问包 APK2 的内容（我对我膨胀的布局进行了测试）：

```
PackageInfo pkInfo = pkManager.getPackageInfo("com.sampla.apk2", 0);
Resources res = pkManager.getResourcesForApplication(pkInfo.packageName); 
```

怎么可能？如何防止 APK1 访问 APK2 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:50:09.617

> 怎么可能？

资源和资产是世界可读的。

> 如何防止 APK1 访问 APK2 ？

不要安装APK2。

# javascript - 一种跟踪和使用顺序点击的方法

> ID：13747061
> 
> 赞同：1
> 
> 时间：2012-12-06T15:35:19.160
> 
> 标签：javascript

我想通过单击第一个然后单击第二个来定义两个 dom 元素之间的关系（在我的特定情况下，在节点之间画线）。以下是我的做法。我不认为它特别优雅或干净。有一个更好的方法吗？

```
$(function() {

   var State = {
      initialClick: false, // tracks clicks status for drawing lines
      initialID: undefined // remember data gotten from the first click
   };

   ...

   $map.on('click', '.node', function() {

     var $this = $(this),
         currentID = $this.attr('data-id');

     if (State.initialClick) {
        if (State.initialID === currentID) {
           // process first click
        } else {
           // process second click
        }

        resetClickTracking();
     } else {
        setState(currentID);
     }
  });

  ...

  function setState(id) {
     State.initialClick = true;
     State.initialID = id;
  }

  function resetState() {
     State.initialClick = false;
     State.initialID = undefined;
  }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:40:45.200

我可能会选择委托模式：

```
var lastNodeClicked = null;

$map.on('click', '.node', function() {
    if (lastNodeClicked && lastNodeClicked !== this) {
        // draw line
        lastNodeClicked = null; // reset
    } else {
        lastNodeClicked = this;
    }
}); 
```

除了重置最后点击的节点，还可以无条件地用点击的节点更新；这样你就可以用更少的点击来画线;-)

# forms - windows xp上的表格不同于7

> ID：13747070
> 
> 赞同：0
> 
> 时间：2012-12-06T15:35:35.117
> 
> 标签：forms, windows-7, windows-xp, ms-access-2010

当我将 access 97 数据库转换为 2010 时，我更新了表单的设计。

现在 1 位用户告诉我，这些变化让她瞬间头疼。

**旧形式**

![在此处输入图像描述](../Images/b9f71bc0249c6273dd1b73f6b4a215c5.png)

**新的一个**

![在此处输入图像描述](../Images/ef4ae9aca866b3f4628b1ab478ade90d.png)

我不知道是什么导致了这种情况，因为我不认为深绿色上的黑色字体更好。我还将字体更改`Arial 9`为`Ms sans serif 8`

她说我的电脑比她好一点。所以我把她的显示器换了一个更好的，因为她有一个非常旧的显示器，但她仍然觉得很难阅读。现在唯一的区别是她在，`Windows XP`而我在`Windows 7`

她说不出哪里不对劲。她发现文字上有*阴影*

但她说她用旧形式没有这个问题。

`Windows XP`和之间的字体有什么区别`Windows 7`吗？

如果不是，我的新设计有什么问题？

谢谢

（如果 StackOverflow 不是问的好地方，请在适当的 stackexchange 网站上发表评论）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:29:37.317

关于“阴影文本”的抱怨让我想知道这里是否可能涉及 ClearType 的 Windows 设置或类似的设置。不幸的是，这只是一个 WAG，我无法提供更好的线索。

如果是我，我会很想通过恢复原始颜色和文本属性来解决问题。

# iphone - 使用 iPhone 中的 AudioUnit 在播放音乐的同时进行录音

> ID：13747071
> 
> 赞同：2
> 
> 时间：2012-12-06T15:35:38.927
> 
> 标签：iphone, audio-recording, audiounit, audio-player

我正在尝试在播放音乐时将语音录制到文件中。
我认为 AudioUnit 是这样做的好选择，但我找不到任何简单的示例代码来做这件事。有什么建议或帮助吗？

# jquery - 仅设置高度的jquery img宽度

> ID：13747073
> 
> 赞同：0
> 
> 时间：2012-12-06T15:35:57.737
> 
> 标签：jquery, width

我有一组图像（一个画廊），只设置了高度，`img: height:200px;`所以所有图像的高度相同但宽度不同，我需要获取所有图像的宽度。

那可能吗？

目前我正在使用：

```
var accum_width = 0;
$('.scroll-content-item img').each(function() {
accum_width += $(this).width() + 20;
});
alert(accum_width);

$( ".scroll-content" ).css('width', accum_width); 
```

但我得到 100（边距）。有任何想法吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:37:43.420

使用 each 遍历 img 标签

```
$('img').each(function(){
   alert(this.width);  
}) 
```

如果您的图像有一些共同的类，那么使用类选择器。

```
$('img.classname').each(function(
   alert(this.width);  //with javascript
   alert($(this).width());  //with jQuery
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:39:37.820

澄清后

```
$(window).load(function(){
    var widthSum = 0;
    $('img').each(function(){
       widthSum += this.width;
    });
    // do something with the widthSum here..
}); 
```

我使用`$(window).load`来确保图像已加载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T15:41:06.867

您可能想查看宽度函数：[http ://api.jquery.com/width/](http://api.jquery.com/width/)

```
$('img').width(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T15:37:51.063

试试下面

```
var widthcoll = $.each(imagecollection,function(){
return $(this).width();
}); 
```

谢谢

# actionscript-3 - AS3 影片剪辑 getRealBounds

> ID：13747077
> 
> 赞同：2
> 
> 时间：2012-12-06T15:36:21.967
> 
> 标签：actionscript-3, movieclip, bounds

众所周知，在 as3 中，我们有一个 getBounds() 方法，它返回我们想要的 DisplayObject 容器中影片剪辑的确切尺寸和坐标。事实上，这些数据是根据调用 getBounds() 时帧中 MC 中的图形状态计算得出的。

我想要的是真正的边界矩形，即整个动画影片剪辑将在其容器中的较大矩形。
我想到了两种方法：
1 - 我不知道的 Flash 内置方法
2 - 遍历每一帧总是得到边界并最终返回最大的（但是如果它是一个长动画呢？我应该等待它在我得到我想要的东西之前完全玩？）

我希望我已经清楚了。如果您需要示例，请告诉我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T18:23:17.370

您可以遍历每一帧，而无需等待动画播放：

假设您的剪辑被称为`bob`：

```
var lifetimeBounds:Rectangle = new Rectangle();
bob.gotoAndStop(1);
for(var i:int=1;i<=bob.totalFrames;i++){
    lifetimeBounds.width = Math.max(lifetimeBounds.width, bob.width);
    lifetimeBounds.height = Math.max(lifetimeBounds.height, bob.height);
    lifetimeBounds.x = Math.min(lifetimeBounds.x, bob.x);
    lifetimeBounds.y = Math.min(lifetimeBounds.y, bob.y);
    bob.nextFrame();
}

bob.gotoAndStop(1); //reset bob back to the beginning 
```

它会增加 CPU 负担（因此，如果上述方法适用于您的情况，我建议不要使用它），但您也可以`getBounds()`在上面的示例中使用并将返回的矩形与 lifeBounds 矩形进行比较：

```
var tempRect:Rectangle;
var lifetimeBounds:Rectangle = new Rectangle();
bob.gotoAndStop(1);
for(var i:int=1;i<=bob.totalFrames;i++){
    tmpRect = bob.getBounds(this);
    lifetimeBounds.width = Math.max(lifetimeBounds.width, tempRect.width);
    lifetimeBounds.height = Math.max(lifetimeBounds.height, tempRect.height);
    lifetimeBounds.x = Math.min(lifetimeBounds.x, tempRect.x);
    lifetimeBounds.y = Math.min(lifetimeBounds.y, tempRect.y);
    bob.nextFrame();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:48:24.690

我在将动画转换为 bitmapData 帧时遇到了这个问题，因为我希望所有生成的帧都具有统一的大小并匹配最大的帧尺寸。

我基本上必须一次循环播放 1 帧动画，并将边界框与当前最大尺寸进行比较。我也认为这不是一个理想的解决方案，但它确实有效。

所以#2 是你最好的选择，因为没有内置的闪存方法可以提供你所寻求的。

# javascript - Javascript从框架更新父内容

> ID：13747080
> 
> 赞同：0
> 
> 时间：2012-12-06T15:36:31.207
> 
> 标签：javascript, frame, updates

我的问题是，在从表单提交加载内容后，我正在尝试从框架内容更新`div`内容（使用）。`id="content"`

其中表单属性`action="test.php"`和`target="source"`哪个是框架名称。

代码示例在这里：[JSBin](http://jsbin.com/welcome/58278/)

结果`test.php`是这样的：

```
<script type="text/javascript">
window.parent.top.getElementById('content').innerHtml = "Western";
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:41:02.920

您需要一个文档参考：

```
window.parent.document.getElementById('content').innerHtml = "Western"; 
```

# android - MenuItem ActionView 高度始终与 ActionBar 高度匹配

> ID：13747082
> 
> 赞同：1
> 
> 时间：2012-12-06T15:36:34.350
> 
> 标签：android, actionbarsherlock

我有一套`MenuItem`。`ActionView`这`ActionView`只是一个里面`FrameLayout`有一个`TextView`。the`FrameLayout`和 the`TextView`都`android:layout_height="wrap_content"`设置了。也有一个黄色背景，`TextView`使它看起来像一个按钮。然而背景总是填满整个高度`ActionBar`。我怎样才能让这个按钮看起来像一个按钮？

如果我将边距设置为，`TextView`那么它可以工作，但我认为这不是一个好的解决方案。

# javascript - 检查 cookie 是否存在的更快更短的方法

> ID：13747093
> 
> 赞同：5
> 
> 时间：2012-12-06T15:37:02.343
> 
> 标签：javascript, cookies

知道 cookie**是否具有值**或**存在**的更短和更快的方法是什么？

我用它来知道是否**存在**：

```
 document.cookie.indexOf('COOKIENAME=')== -1 
```

这知道是否**有价值**

```
 document.cookie.indexOf('COOKIENAME=VALUE')== -1 
```

好点？这种方法有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T15:43:42.080

显然：

```
document.cookie.indexOf("COOKIENAME=VALUE"); 
```

对我来说，[速度更快](http://jsperf.com/cookie-access)，但只有一点点。

正如测试所示，令人惊讶的是，首先将 cookie 拆分为数组会更快：

```
document.cookie.split(";").indexOf("COOKIENAME=VALUE"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T16:43:25.690

我建议编写一个小辅助函数来避免评论中提到的 zzzzBov

*   您使用 indexOf 的方式，如果您检查 cookie 中是否包含字符串，它只会评估正确，它与完整名称不匹配，在这种情况下，上面将返回 false，因此会给您错误的结果。

* * *

```
function getCookie (name,value) {
    if(document.cookie.indexOf(name) == 0) //Match without a ';' if its the firs
        return -1<document.cookie.indexOf(value?name+"="+value+";":name+"=")
    else if(value && document.cookie.indexOf("; "+name+"="+value) + name.length + value.length + 3== document.cookie.length) //match without an ending ';' if its the last
        return true
    else { //match cookies in the middle with 2 ';' if you want to check for a value
        return -1<document.cookie.indexOf("; "+(value?name+"="+value + ";":name+"="))
    }
}
getCookie("utmz") //false
getCookie("__utmz" ) //true 
```

* * *

但是，这似乎有点慢，所以给它一种拆分它们的另一种方法这是另外两种可能性

```
function getCookie2 (name,value) {
    var found = false;
    document.cookie.split(";").forEach(function(e) {
        var cookie = e.split("=");
        if(name == cookie[0].trim() && (!value || value == cookie[1].trim())) {
            found = true;
        }
    })
    return found;
} 
```

这个，使用原生的 forEach 循环并拆分 cookie 数组

```
function getCookie3 (name,value) {
    var found = false;
    var cookies = document.cookie.split(";");
    for (var i = 0,ilen = cookies.length;i<ilen;i++) {
         var cookie = cookies[i].split("=");
         if(name == cookie[0].trim() && (!value || value == cookie[1].trim())) {
              return found=true;
         }
     }
     return found;
}; 
```

而这个，使用一个旧的 for 循环，它的优点是如果找到一个 cookie 就可以提前返回 for 循环

看看[JSPerf](http://jsperf.com/cookietest)，最后 2 个甚至没有那么慢，只有在真的有一个 cookie 分别具有名称或值时才返回 true

我希望你明白我的意思

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T08:07:51.050

我为此使用[Jquery cookie 插件](https://github.com/carhartl/jquery-cookie)。

```
<script type="text/javascript" src="jquery.cookie.js"></script>

function isCookieExists(cookiename) {
    return (typeof $.cookie(cookiename) !== "undefined");
} 
```

# gwt - 我的自定义 CSS 没有被完全拾起

> ID：13747095
> 
> 赞同：0
> 
> 时间：2012-12-06T15:37:11.247
> 
> 标签：gwt, gwt-2.5

我为树和其他小部件创建了一个自定义 css。

我做了以下条目

```
<inherits name='com.google.gwt.user.theme.standard.Standard' />
<stylesheet src="CustomStylesheet.css" /> 
```

但仍然只有一些款式被采用，而另一些则没有。有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:13:05.243

您应该使用“com/google/gwt/user/cellview/client/CellTree.css”css 文件编写相同样式的类名，并且您可以更改内容 css

```
pulic class MyClass extends Composite {
   public interface MyResources extends CellTree.Resources {

        @ImageResource.ImageOptions(flipRtl = true)
        @Source("cellTreeClosedItem.gif")
        ImageResource cellTreeClosedItem();

        @ImageResource.ImageOptions(flipRtl = true)
        @Source("cellTreeOpenItem.gif")
        ImageResource cellTreeOpenItem();

        @Override
        @Source({"com/google/gwt/user/cellview/client/CellTree.css"})
        CellTree.Style cellTreeStyle();
    }

    private MyResources res = GWT.create(MyResources.class);

    public void onInitialize(){
        cellTree = new CellTree(treeViewModel, null, res);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:54:39.450

它将是以下任何一种，

要么你必须使用Andrew 提到的[CSS 资源，要么你错过了](http://code.google.com/p/google-web-toolkit/wiki/CssResource)[Doctype](http://www.w3schools.com/tags/tag_doctype.asp)声明。

你也可以访问这个链接： [doctype explantion wrt to GWT](https://stackoverflow.com/questions/2641866/which-doctype-should-i-use-for-gwt-2-0)

# java - 单选按钮输入上的 HtmlUnit click() 未按预期工作

> ID：13747097
> 
> 赞同：2
> 
> 时间：2012-12-06T15:37:18.753
> 
> 标签：java, htmlunit

我正在尝试从此网页获取数据：http: [//www.atm-mi.it/en/Giromilano/Pages/default.aspx](http://www.atm-mi.it/en/Giromilano/Pages/default.aspx)。基本上，我在 Java 中使用 HtmlUnit 与左列中间的“路线和时间表查找器”进行交互，循环选择中的每个选项，单击“查找”并从结果页面中收集我需要的数据。

我在提取城市路线的数据时没有问题，但似乎无法处理上面的单选按钮：例如，在浏览器中单击“地下”应该会在下面的选择中带来一个带有不同选项的新页面。

但我一直得到和以前一样的选择；更准确地说，我不断获得相同的页面（*page2与**page*具有相同的 HTML 代码）。

**显然 .click() 函数中一定有问题，但是什么？**

这是我的代码的简单版本：

```
WebClient webClient = new WebClient(BrowserVersion.FIREFOX_3_6);
webClient.setThrowExceptionOnScriptError(false);

HtmlPage page = webClient.getPage("http://www.atm-mi.it/en/Giromilano/Pages/default.aspx");

HtmlRadioButtonInput radioButton2 = (HtmlRadioButtonInput) page.getElementById("ctl00_SPWebPartManager1_g_e31ad29e_62a8_401c_43ae_eb61300b4fc0_lines_type_rbl_0");
HtmlPage page2 = radioButton2.click();

HtmlSelect lineSelect = (HtmlSelect) page2.getElementById("ctl00_SPWebPartManager1_g_e31ad29e_62a8_401c_43ae_eb61300b4fc0_txt_dp_lines");
int size = lineSelect.getOptionSize();
System.out.println(size); 
```

这是单选按钮输入 HTML：

```
<input id="ctl00_SPWebPartManager1_g_e31ad29e_62a8_401c_43ae_eb61300b4fc0_lines_type_rbl_0" type="radio" name="ctl00$SPWebPartManager1$g_e31ad29e_62a8_401c_43ae_eb61300b4fc0$lines_type_rbl" value="0" onclick="javascript:setTimeout('__doPostBack(\'ctl00$SPWebPartManager1$g_e31ad29e_62a8_401c_43ae_eb61300b4fc0$lines_type_rbl$0\',\'\')', 0)" />
<label for="ctl00_SPWebPartManager1_g_e31ad29e_62a8_401c_43ae_eb61300b4fc0_lines_type_rbl_0">Underground</label> 
```

选择：

```
<select name="ctl00$SPWebPartManager1$g_e31ad29e_62a8_401c_43ae_eb61300b4fc0$txt_dp_lines" id="ctl00_SPWebPartManager1_g_e31ad29e_62a8_401c_43ae_eb61300b4fc0_txt_dp_lines" class="dplinee"> 
```

* * *

**编辑**：好的，所以我尝试了一种不同的方法：因为它看起来像是某种 JavaScript 引擎问题，我想我可以尝试禁用 JavaScript，自己执行 onclick 操作。这是原始的 JavaScript 函数：

```
var theForm = document.forms['aspnetForm'];
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
} 
```

这就是我所做的：

```
HtmlForm aspnetForm = (HtmlForm) page.getElementById("aspnetForm");
HtmlHiddenInput eventTarget = (HtmlHiddenInput) page.getElementById("__EVENTTARGET");
HtmlHiddenInput eventArgument = (HtmlHiddenInput) page.getElementById("__EVENTARGUMENT");

eventTarget.setValueAttribute("ctl00$SPWebPartManager1$g_e31ad29e_62a8_401c_43ae_eb61300b4fc0$lines_type_rbl$0");
eventArgument.setValueAttribute("");
HtmlElement submitButton = (HtmlElement) page.createElement("button");
submitButton.setAttribute("type", "submit");
aspnetForm.appendChild(submitButton);
HtmlPage page2 = submitButton.click(); 
```

一切都很好，除了我仍然使用相同的旧 Select 获得相同的页面。我知道这是一个很长很无聊的问题，但我想我还是可以更新它。我希望有人最终有耐心尝试一下（至少确认我没有犯一些明显的错误）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:57:45.440

我终于找到了一种方法来完成这项工作。第二种方法几乎是正确的。我正确地提交了表单，但与正常浏览不同：我实际上并没有检查单选按钮。显然，目标页面也使用了该信息。通过添加这个

```
HtmlRadioButtonInput radioButton = (HtmlRadioButtonInput) page.getElementById("ctl00_SPWebPartManager1_g_e31ad29e_62a8_401c_43ae_eb61300b4fc0_lines_type_rbl_0");
radioButton.setChecked(true); 
```

对于我之前的尝试，提交操作非常有效。不过，我仍然不知道为什么该`.click()`方法没有按预期工作，但这对我来说已经足够了。

# c# - 使用 ServiceStack.Text 序列化接口类型列表

> ID：13747098
> 
> 赞同：5
> 
> 时间：2012-12-06T15:37:28.847
> 
> 标签：c#, json, serialization, servicestack

我正在寻找将 BinaryFormatter 序列化以外的东西引入我的应用程序以最终与 Redis 一起使用的方法。ServiceStack JSON 是我想使用的，但它可以用接口做我需要的吗？它可以序列化（通过插入自定义 __type 属性）

```
public IAsset Content; 
```

但不是

```
public List<IAsset> Contents; 
```

- 列表在序列化数据中为空。有没有办法做到这一点 - 序列化接口类型列表？

该应用程序又大又旧，它使用的对象的形状可能不会被允许更改。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:50:51.437

引自[http://www.servicestack.net/docs/framework/release-notes](http://www.servicestack.net/docs/framework/release-notes)

你可能不需要做太多:)

> JSON 和 JSV 文本序列化程序现在支持对具有接口/抽象或对象类型的 DTO 进行序列化和反序列化。除其他外，这允许您拥有一个 IInterface 属性，该属性在序列化时将在 __type 属性字段中包含其具体类型信息（类似于其他 JSON 序列化程序），当序列化时填充该具体类型的实例（如果它存在）。
> 
> [...]
> 
> 注意：此功能会自动添加到所有 Abstract/Interface/Object 类型，即您无需包含任何 [KnownType] 属性即可利用它。

不多：

```
public interface IAsset
{
    string Bling { get; set; }
}

public class AAsset : IAsset
{
    public string Bling { get; set; }
    public override string ToString()
    {
        return "A" + Bling;
    }
}

public class BAsset : IAsset
{
    public string Bling { get; set; }
    public override string ToString()
    {
        return "B" + Bling;
    }
}

public class AssetBag
{
    [JsonProperty(TypeNameHandling = TypeNameHandling.None)]
    public List<IAsset> Assets { get; set; } 
}

class Program
{

    static void Main(string[] args)
    {
        try
        {
            var bag = new AssetBag
                {
                    Assets = new List<IAsset> {new AAsset {Bling = "Oho"}, new BAsset() {Bling = "Aha"}}
                };
            string json = JsonConvert.SerializeObject(bag, new JsonSerializerSettings()
            {
                TypeNameHandling = TypeNameHandling.Auto
            });
            var anotherBag = JsonConvert.DeserializeObject<AssetBag>(json, new JsonSerializerSettings()
            {
                TypeNameHandling = TypeNameHandling.Auto
            }); 
```

# php - MySQL 基准测试：1 个查询返回 1000 行 VS 1000 个单行查询

> ID：13747108
> 
> 赞同：3
> 
> 时间：2012-12-06T15:38:01.590
> 
> 标签：php, mysql, benchmarking, microbenchmark

处理需要从数据库传输大量数据的应用程序。它包括 SELECT 和 UPDATE 查询（即读取和写入数据库）。

首先，我需要获取所有产品的列表（大约 1000 个 SKU）。SELECT 查询非常简单：

```
SELECT
    *
FROM
    `my_db`.`products` 
```

然后对每个产品进行一些自动更新。UPDATE 查询是这样的：

```
UPDATE
    `my_db`.`products`
SET
    `updated` = NOW(),
    `mods` = `mods` + 1,
    /* a couple more updated fields here, if needed */ 
```

现在的问题是哪一个会更快/更好地执行：一次操作所有记录的单个查询，还是单独处理每个产品的 PHP 循环（例如`foreach`or `while`）（1000 个单行查询）？后者当然需要`WHERE model = 'ABC'`and `LIMIT 1`。

为了使问题更复杂（和全面），请考虑其他影响标准，例如：

*   如果目标行数不同：100 或 100,000 行会怎样？
*   如果涉及多张桌子怎么办？请参阅下面的 JOINed 查询示例。

.

```
SELECT
    *
FROM
    `my_db`.`table1` AS `t1`
    INNER JOIN `my_db`.`table2` AS `t2` ON `t1`.`id` = `t2`.`fk`
    INNER JOIN `my_db`.`table3` AS `t3` ON `t2`.`id` = `t3`.`fk`
    /* Etc. */ 
```

**是否有一般的“经验法则”来决定在这种或那种情况下哪种方式更好？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:55:28.320

只要你的 sql 语句写得好，一条包含 1000 条记录的好语句总是比执行 1000 条查询更有效率。

# iis-7.5 - Windows 2008 R2 64 位机器上的 ComponentPresentationAssembler 错误 (Tridion 5.3)

> ID：13747110
> 
> 赞同：5
> 
> 时间：2012-12-06T15:38:13.687
> 
> 标签：iis-7.5, tridion, tridion-content-delivery

我们正在使用 Tridion 5.3 并将我们的内容交付服务器从 32 位 Windows 2003 移动到 Windows 2008 R2 64 位。

我们确实重新安装了内容交付和发布工作正常，但是当我们在浏览器中浏览网站时出现以下错误。

> 由于以下错误，检索具有 CLSID {8602F9B1-4545-4B0E-BA98-CD927A34DAA9} 的组件的 COM 类工厂失败：80070005。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.UnauthorizedAccessException：检索具有 CLSID {8602F9B1-4545-4B0E-BA98-CD927A34DAA9} 的组件的 COM 类工厂失败，原因是以下错误：80070005。
> 
> ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常是 IIS 5 上的 {MACHINE}\ASPNET 或 IIS 6 上的网络服务），如果应用程序不模拟，则使用该标识。如果应用程序通过 模拟，则身份将是匿名用户（通常是 IUSR_MACHINENAME）或经过身份验证的请求用户。
> 
> 要授予 ASP.NET 对文件的访问权限，请在资源管理器中右键单击该文件，选择“属性”并选择“安全”选项卡。单击“添加”以添加相应的用户或组。突出显示 ASP.NET 帐户，然后选中所需访问权限的框。
> 
> 源错误：

```
Line 27: 
Line 28:     pageTitle = "XXXXXXXXXXXXXX";
Line 29:     cpAssembler = new ComponentPresentationAssembler(PageID, Page);
Line 30: 
Line 31: 
```

我们确实为网络服务、IUSR 用户提供了访问网站文件夹的权限，但没有运气。

我们在新环境中有 IIS 7.5。

有谁知道什么会导致这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T17:53:25.293

通常错误如下：

> 异常详细信息：System.UnauthorizedAccessException：检索具有 CLSID {8602F9B1-4545-4B0E-BA98-CD927A34DAA9} 的组件的 COM 类工厂失败，原因是以下错误：80070005。

告诉我 COM 安全权限存在问题，您可以在以下位置设置：`Component Services`-> `Computer`-> `My Computer`->`Properties`在`COM Security`选项卡上。

然后编辑默认值并为IUSR添加本地和远程访问（这是设置它的懒惰方式，正式你应该在DCOM Config中找到CLSID并直接在组件上添加IUSR权限，这当然更安全） .

但在这种情况下，我不确定它是否能解决您的问题，因为 Tridion R5.3 平台支持在 Windows 2003 SP2 中停止，因此很可能 Windows 2008 将永远无法工作。充其量我可以建议您将 Tridion 升级到它的最新版本 (2011 SP1 HR1) 以支持 Windows 2008 的平台。

# javascript - 无效的打字稿？

> ID：13747111
> 
> 赞同：-1
> 
> 时间：2012-12-06T15:38:14.617
> 
> 标签：javascript, typescript

我不明白为什么这个函数认为 a`)`从最后丢失了。当我放置`)`它时，它会创建一个自执行函数并生成*不是*我想要的 javascript。

作品

```
this.Events.off = (): any {
    var events = arguments[0],
        callback = arguments[1];
    if (typeof events === 'string' && typeof callback === 'function') {
        this._events.off.call(this._events, events, callback);
    }
    else if (typeof callback === 'function') {
        this._events.off.call(this._events, callback);
    }
}; 
```

错误

```
declare var $, Backbone;

export class WebControls {

    _events;
    Events;

    constructor (options? ) {

        this._events = $.extend({}, Backbone.Events);

        this.Events = {};

        this.Events.on = (events: string, cb: (event: any) => any) {
            this._events.on.apply(this._events, arguments);
        };

        this.Events.trigger = (eventName: string, ...args: any[]): any {
            this._events.trigger.apply(this._events, arguments);
        };

        this.Events.off = (events?: string, callback?: any) : any {
            if (typeof events === 'string' && typeof callback === 'function') {
                this._events.off.call(this._events, events, callback);
            } else if (typeof callback === 'function') {
                this._events.off.call(this._events, callback);
            }
        };
    }

} 
```

![红色波浪的屏幕截图](../Images/0f53f44465f5541fbd1205ef1c426bca.png) ![编译截图](../Images/78e7b97982fe0d3953dd308c26177bf1.png) ![编译截图](../Images/a1850d0082cef11d9f19da0dd447b440.png) ![编译截图](../Images/214029757e4a15d8c6def683cb347d95.png)

我在这里盲目地遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:30:07.830

在屏幕截图代码中，您需要在参数列表后使用“函数”关键字或粗箭头。

# postgresql - 为大型数据集生成 ngram 频率

> ID：13747120
> 
> 赞同：1
> 
> 时间：2012-12-06T15:38:41.113
> 
> 标签：postgresql, hadoop, mapreduce, bigdata, elastic-map-reduce

我想为大型数据集生成 ngram 频率。维基百科，或者更具体地说，Freebase 的 WEX 适合我的目的。

在接下来的一天左右，最好和最具成本效益的方法是什么？

我的想法是：

*   PostgreSQL 使用正则表达式来拆分句子和单词。我已经在 PostgreSQL 中有 WEX 转储，并且我已经有正则表达式来进行拆分（此处不需要主要准确性）
*   MapReduce 与 Hadoop
*   MapReduce 与 Amazon 的 Elastic MapReduce，我对此几乎一无所知

我使用 Hadoop 的经验包括在三个 EC2 实例上计算 Pi 的效率非常低。我精通Java，并且了解Map + Reduce 的概念。我担心 PostgreSQL 会花费很长时间，因为它不容易并行化。

还有其他方法吗？在接下来的几天里，我最好的选择是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:46:18.273

Mapreduce 可以正常工作，并且可能您可以通过 pig 完成大部分输入-输出混洗。

看

[http://arxiv.org/abs/1207.4371](http://arxiv.org/abs/1207.4371)

对于一些算法。

当然，为了确保你得到一个运行的开始，你实际上不需要使用 mapreduce 来完成这个任务。只需自己拆分输入，制作最简单的快速程序来计算单个输入文件的 ngram，然后聚合 ngram 频率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T18:30:32.717

Hadoop 为您提供了两个好东西，在我看来是主要的：并行任务运行（仅映射作业）和分布式排序（在 map 和 reduce 之间进行洗牌）
对于 NGram，看起来您需要两者 - 并行任务（映射器）来发出 ngram和改组 - 计算每个 ngram 的数量。
所以我认为这里的 Hadoop 是理想的解决方案。

# backbone.js - 在同一页面的多个位置显示相同的 Backbone.js 验证错误消息

> ID：13747122
> 
> 赞同：3
> 
> 时间：2012-12-06T15:38:55.997
> 
> 标签：backbone.js

因此，我一直在使用 n-time 骨干网验证 ( [https://github.com/n-time/backbone.validations](https://github.com/n-time/backbone.validations) ) 进行客户端表单验证，并在我当前的项目中取得了巨大成功。问题是，虽然它可以很好地处理字段下方的错误消息，但我希望有，我需要错误消息显示在两个位置。所以我做了这样的事情

```
All Errors are listed here: 
<span class="error" name="adultFName1Error" /> <br /><br />

.... further down the page....

<label class="form_label" for="adultFName1">First Name:</label>
<input id="adultFName1" type="text" name="adultFName1" size="30" class="validate validate-NotBlank validate-FirstName"/>
<span class="error" name="adultFName1Error" /> 
```

这很好用，但问题是当我添加另一个字段进行验证时，它看起来像这样：

```
All Errors are listed here: 
<span class="error" name="adultFName1Error" /> <br /><br />
<span class="error" name="adultLName1Error" /> <br /><br />

.... further down the page....

<label class="form_label" for="adultFName1">First Name:</label>
<input id="adultFName1" type="text" name="adultFName1" size="30" class="validate validate-NotBlank validate-FirstName"/>
<span class="error" name="adultFName1Error" />

<label class="form_label" for="adultLName1">Last Name:</label>
<input id="adultLName1" type="text" name="adultLName1" size="30" class="validate validate-NotBlank validate-LastName" />
<span class="error" name="adultLName1Error" /> 
```

只有第一个错误 (adult1Fname1Error) 正确显示在页面顶部。所有错误都正确显示到其关联的字段输入，但仅

```
 <span class="error" name="adultFName1Error" /> <br /><br /> 
```

在页面顶部正确显示。（其余的只是不显示在页面顶部）。

我是否缺少让主干验证错误消息在同一页面上针对多个输入字段显示两次的技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T06:53:58.570

当我想在输入文本框的左侧显示错误消息时，我遇到了类似的情况。为此，我刚刚将 style="float:left; 添加到我的 html 代码中并且它有效

# hudson - 在 Hudson 上运行 Emma 会导致 JVM_Bind 异常

> ID：13747125
> 
> 赞同：3
> 
> 时间：2012-12-06T15:39:00.443
> 
> 标签：hudson, emma

我正试图让艾玛在哈德逊担任我的一份工作。我正在使用哈德逊 2.2.0。我安装了 Emma 插件。

我在线阅读了一份指南，介绍了如何配置 Emma 以在 Hudson 上运行 - 它就像添加 emma:emma 的构建步骤一样简单。但遗憾的是，这会导致每个单元测试都失败，并出现以下 JVM_Bind 问题。有没有人见过这个。我已经尽可能地搜索，但我仍然无法找到原因，更不用说解决方案了。我已经使用 netstat -a 进行了检查，并且没有使用下面提到的端口，所以我正在考虑这是一个红鲱鱼的可能性。我将不胜感激提供的任何帮助！

```
[INFO] Copying 6 resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [surefire:test {execution: default-test}]
[INFO] Surefire report directory: C:\Hudson\jobs\EKB\workspace\trunk\hydrocarbon-   plus\target\surefire-reports
EMMA: collecting runtime coverage data ...
EMMA: runtime controller started on port [47653] 
EMMA: collecting runtime coverage data ...
java.net.BindException: Address already in use: JVM_Bind
at java.net.PlainSocketImpl.socketBind(Native Method)
at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:365)
at java.net.ServerSocket.bind(ServerSocket.java:319)
at java.net.ServerSocket.<init>(ServerSocket.java:185)
at java.net.ServerSocket.<init>(ServerSocket.java:97)
at com.vladium.emma.rt.RTController.start(RTController.java:99)
at com.vladium.emma.rt.RT.reset(RT.java:222)
at com.vladium.emma.rt.RT.<clinit>(RT.java:540)
at com.*.application.core.types.RTNumber.$VRi(RTNumber.java)
at com.*.application.core.types.RTNumber.<clinit>(RTNumber.java)
at com.*.application.data.domain.datapoint.EnergyTest.<clinit>(EnergyTest.java:20)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at junit.framework.TestSuite.createTest(TestSuite.java:61)
at junit.framework.TestSuite.addTestMethod(TestSuite.java:294)
at junit.framework.TestSuite.addTestsFromTestCase(TestSuite.java:150)
at junit.framework.TestSuite.<init>(TestSuite.java:129)
at org.junit.internal.runners.JUnit38ClassRunner.<init>(JUnit38ClassRunner.java:71)
at org.junit.internal.builders.JUnit3Builder.runnerForClass(JUnit3Builder.java:14)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
at org.apache.maven.surefire.junit4.JUnit4TestSet.<init>(JUnit4TestSet.java:45)
at org.apache.maven.surefire.junit4.JUnit4DirectoryTestSuite.createTestSet(JUnit4DirectoryTestSuite.java:56)
at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.locateTestSets(AbstractDirectoryTestSuite.java:96)
at org.apache.maven.surefire.Surefire.createSuiteFromDefinition(Surefire.java:209)
at org.apache.maven.surefire.Surefire.run(Surefire.java:90)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:289)
at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1005) 
```

# android - 如何隐藏子样式元素中的元素样式？

> ID：13747126
> 
> 赞同：0
> 
> 时间：2012-12-06T15:39:03.883
> 
> 标签：android

我需要“隐藏”样式中的`textSize`参数`BigButton`，继承自`Button`. 怎么做？

```
<style name="Button">
    <item name="android:background">@color/button_background</item>
    <item name="android:textColor">#FFFFFF</item>
    <item name="android:padding">5dp</item>
    <item name="android:textSize">@dimen/button_text_size</item>
</style>

<style name="BigButton" parent="@style/Button">
    <item name="android:textSize"></item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:44:27.497

尝试

```
<style name="BigButton" parent="@style/Button">
    <item name="android:textSize">@null</item>
</style> 
```

# jsf - 用 JSF 绘制图形结构

> ID：13747130
> 
> 赞同：2
> 
> 时间：2012-12-06T15:39:17.190
> 
> 标签：jsf, structure, paint, mindmap, organizational-chart

我想创建一个 JSF Web 应用程序来**显示**图形结构（由数据库中组织的分层元素组成），如果可能的话，用户最终可以放大/缩小，添加新元素......

但是我无法识别单个 JSF 组件（或兼容组件）来帮助我做到这一点。

这就是我想要的：[http](http://www.yworks.com/products/yfileshtml/demos/Complete/demo.yfiles.graph.orgchart/index.html) ://www.yworks.com/products/yfileshtml/demos/Complete/demo.yfiles.graph.orgchart/index.html 但它不是免费的，也不在 JSF 中。

我想到了 PrimeFaces 思维导图组件，但它与 IE8 不兼容，这是我的项目的要求......

我的第二个想法是使用 RichFaces 的 Paint2D 手动绘制矩形中的信息以及具有计算坐标的矩形之间的链接，但这似乎有点复杂...... [http://livedemo.exadel.com/richfaces-demo/richfaces/paint2D。 jsf?c=paint2d](http://livedemo.exadel.com/richfaces-demo/richfaces/paint2D.jsf?c=paint2d)

最后一个想法是使用 CSS 来显示矩形，但我无法显示链接并与结构交互......

有更好的主意吗？谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:16:15.430

OmniFaces 有[一个用于创建分层树的组件](http://showcase.omnifaces.org/components/tree)。也许您可以使用它来显示自定义标记，并想出一种使用 Javascript 操作它的方法，以获得您想要的行为。

如果这不可行，我建议你学习一点 HTML5 Canvas，看看你能用它做什么。你可以在这里获得灵感，看看[这是开源 (GPL) HTML5 思维导图应用程序](http://drichard.org/mindmaps/)，[代码位于 GitHub](https://github.com/drichard/mindmaps)。

# perl - 我想在 Perl 中支持多种返回类型

> ID：13747133
> 
> 赞同：3
> 
> 时间：2012-12-06T15:39:25.597
> 
> 标签：perl, function

我正在编写一个包含许多模块的 perl 框架。现在对于任何这样的模块，都有一个 SUCESS 和**许多级别的 FAILURE**。

失败可能是因为它不满足某个条件，也可能是由于某些库故障或远程机器不工作。

在我目前的实现中，我传递了不同的返回码**（0、1、2 等）**来**表示不同的场景**。

我想知道是否有更优雅的方式，因为当前逻辑看起来好像是硬编码的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T21:12:06.717

正如评论中多次提到的，您真正想要做的不是重载返回值，而是抛出异常。在返回值中混合成功值和错误代码会使函数的使用变得复杂，既获取值又检测错误，从而产生错误。CPAN 上有几个模块可以更轻松地抛出和捕获异常。 [Try::Tiny](https://metacpan.org/module/Try::Tiny)、[TryCatch](https://metacpan.org/module/TryCatch)、[Throwable](https://metacpan.org/module/Throwable)和[Exception::Class](https://metacpan.org/module/Exception::Class)就是例子。

使用错误代码有一种诱人的、虚假的经济性。假设这两个东西是等价的。

```
# Basic error handling with a return value and flag
my $value = function or die $Some::Module::error;
...continue...

# "Basic" error handling with exceptions
try {
    my $value = function;
    ...continue...
}
catch {
    die $@;
} 
```

异常看起来像*更多的代码*！除了它是一个错误的等价物。如果您要做的只是死于错误，而且大多数情况下都是这样，那么这些是实际的等效返回值和异常示例。

```
# Basic error handling with a return value and flag
my $value = function or die $Some::Module::error;
...continue...

# Basic error handling with exceptions, for reals
my $value = function; 
```

如果你返回一个错误标志，用户*总是*必须检查错误，即使他们要做的只是立即死亡。如果你使用异常，用户只需要在他们想要做一些特别的事情时检查错误。您可能会说，这是规范的*例外。*

这就是例外的巨大经济性和安全性。它为用户减少了工作量，并且不会意外错过。

既然已经说过了，并且真的想使用异常，这里有几种方法可以做你想做的事。这既是为了完整性，也是为了说明每个下降的位置。这是计算机 API 中的一个老问题，老问题，早于异常，所以有很多“聪明”的方法来解决它。与例外相比，它们都有许多严重的问题。我敢肯定我会错过一些，但这更多是为了说明你可以在兔子洞里走多远。

1) 返回 false 并将全局变量设置为错误代码。

在 Perl 社区接受异常之前，这在很多库中很常见，例如 DBI（顺便说一句，它也建议您使用异常）。

```
my $dbh = DBI->connect($data_source, $username, $password)
      or die $DBI::errstr; 
```

这也是 Perl 是如何做到的。

```
open my $fh, $file or die "Cannot open $file for reading: $!"; 
```

这具有返回错误代码的普遍问题：它安静地失败。如果用户忘记检查错误，程序运行时不会在其他地方出现任何错误，这可能很神秘，可能会花费非常长的时间来调试。异常大声失败。忘记检查异常，至少您仍然知道问题的根源。

最大的错误之一（新手和老手）是忘记检查错误，这就是为什么像[autodie](https://metacpan.org/module/autodie)这样的模块非常棒的原因。

它的第二个问题是它只有在您*立即*检查错误标志时才有效。该标志是一个全局变量，如果发生另一个错误，它会覆盖你的。您可能会认为“这没问题，总是这样`function() or die $error_flag`”。除非...

```
sub function {
    ...blah blah blah...
    if( $error ) {
        $Error = "Something went wrong, oh god eject!";
        another_function();
        return 0;
    }
    else {
        return $value;
    }
} 
```

如果`another_function`也有错误怎么办？现在库的内部必须小心始终设置错误标志并立即返回。任何涉及“小心”的系统都注定要失败。

这个问题困扰`$!`着 Perl。许多东西可以设置它，有时 Perl 调用多个内部函数，这些函数可以在单个 Perl 函数调用中设置和重置它。

2) 返回一个简单的成功代码和一个复杂的错误代码。

壳牌就是这样做的。0 是成功，其他都是错误代码。

```
my $exit = system @args;
if( $exit != 0 ) {
    ...error handling...
    ...and what did error code 136 mean again?...
} 
```

我希望问题很明显：你不能返回一个有趣的值。它还颠倒了自然的真 == 成功，假 == 失败的约定，这种约定令人困惑且容易出错。另请参阅`system`。

也很容易混淆导致`undef`成功返回的非常糟糕的错误。

3) 正值为成功，负值为失败。

这是 2，但现在您可以返回有趣的值……只要它们是数字。此外，您所有的错误值都必须是数字，然后您必须在某处的某个表中查找这些数字。喜悦。

```
my $return = function @args;
if( $return <= 0 ) {
    ...error handling...
    ...and what did error code -136 mean again?...
} 
```

至少 true 与“成功”对齐，并且 0 和 undef 都是失败的，就是这样。但负数也是正确的。用户很可能会出错，只检查一个真值，而错过错误代码。

4) 返回一个错误的重载对象。

这是您将获得的最好的，无一例外。

所有真实值都表示成功。所有错误值都表示错误。通过返回一个对象来指示错误，该对象的布尔值重载始终为假，其字符串值重载以返回其错误代码。

```
use overload
    '""'   => sub { $_[0]->error_string },
    'bool' => sub { 0 },
    '0+'   => sub { 0 },
    fallback => 1
; 
```

真为成功，假为错误。错误不能相互覆盖，您可以获取丰富有趣的错误信息。它并不完美，问题之一是你不能有一个错误的成功值，限制你可以返回的东西，但它非常好。

但是，由于需要返回值，所以不能使用`or die`成语。

```
my $value = function;
die $value if !$value; 
```

它仍然存在返回错误代码的普遍问题，用户必须检查它。这是任何错误处理系统都会遇到的最大问题，也是唯一能解决的问题。

5) 传入返回值的引用。

我包括这个是为了展示你可以走多远。它不是让你的函数返回一个值，而是返回一个错误代码。你如何返回值？您传入一个引用，该函数使用该值设置！听起来很疯狂？！

```
my $success_flag = open my $fh, $file; 
```

哦。

这是许多不支持异常的语言的推荐样式。

您可以在不干扰返回值的情况下判断是否存在错误，但代价是笨拙且不可链接的接口，但是您无法返回有关错误的任何信息。您要么必须反转 true/false 成功/失败以返回错误代码或字符串（所以 false 是成功），或者您执行 open 所做的操作并拥有一个 side 全局变量。

*返回值*并传递引用以捕获错误是有道理的，但仅限于相对而言。

```
my $fh = open \$error, $file or die "Can't open $file: $error"; 
```

这是我在野外从未见过的，但效果很好。如果返回错误代码的最大问题是用户会忽略它们，那么强制他们将错误引用作为第一个参数传递将是一个很好的解决方法。

# java - 在jung中显示选定的节点名称

> ID：13747139
> 
> 赞同：0
> 
> 时间：2012-12-06T15:39:41.123
> 
> 标签：java, graph, label, jung, vertex

我试图仅在用户选择顶点时显示顶点名称。我可以显示所有顶点名称，但为我显示选定的顶点名称会更好。我找到了一些关于选择顶点等的例子......但在我的代码中实际上我无法实现我想要的东西。例如要显示所有顶点名称，我正在使用这段代码：

```
 vv.getRenderContext().setVertexLabelTransformer(new ToStringLabeller() {
        @Override
        public String transform(Object v) {
            return super.transform(v);
        }}); 
```

这里我如何选择一个顶点：

```
final PickedState<String> pickedState = vv.getPickedVertexState();
    pickedState.addItemListener(new ItemListener() {

        @Override
        public void itemStateChanged(ItemEvent e) {
            Object subject = e.getItem();
            if (subject instanceof String) {
                String vertex = (String) subject;
                if (pickedState.isPicked(vertex)) {
                    System.out.println("Vertex " + vertex
                            + " is now selected");
                }
            }
        }
    }); 
```

那么我该如何组合它们呢？我只想显示选定的顶点名称。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:18:34.737

如果选择了 Vertex，您可以通过创建一个用于返回 String 的方法来做到`Transformer`这`PickedInfo`一点

```
 private static class VertexLabelTransformer implements Transformer<Integer,String>{
    private final PickedInfo<Integer> pi;

    public VertexLabelTransformer( PickedInfo<Integer> pi ){
        this.pi = pi;
    }

    @Override
    public String transform(Integer t) {
        if (pi.isPicked(t))
            return t.toString();
        else
          return "";
    }
} 
```

然后使用`VertexLabelTransformer`设置`RenderContext`

```
vv.getRenderContext().setVertexLabelTransformer(new VertexLabelTransformer(vv.getPickedVertexState())); 
```

这是完整的代码

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Paint;

import javax.swing.JFrame;

import org.apache.commons.collections15.Transformer;
import org.apache.commons.collections15.functors.ConstantTransformer;

import edu.uci.ics.jung.algorithms.layout.FRLayout;
import edu.uci.ics.jung.algorithms.layout.Layout;
import edu.uci.ics.jung.graph.Graph;
import edu.uci.ics.jung.graph.SparseMultigraph;
import edu.uci.ics.jung.graph.util.EdgeType;
import edu.uci.ics.jung.visualization.VisualizationViewer;
import edu.uci.ics.jung.visualization.control.DefaultModalGraphMouse;
import edu.uci.ics.jung.visualization.picking.PickedInfo;
import edu.uci.ics.jung.visualization.renderers.DefaultVertexLabelRenderer;
import edu.uci.ics.jung.visualization.renderers.Renderer.VertexLabel.Position;

public class Design {

    public Graph<Integer, String> g;
    public Design() {     

         this.g = readNet("SmallTown.net");
    }

    private static class VertexPaintTransformer implements Transformer<Integer,Paint> {

        private final PickedInfo<Integer> pi;

        VertexPaintTransformer ( PickedInfo<Integer> pi ) { 
            super();
            if (pi == null)
                throw new IllegalArgumentException("PickedInfo instance must be non-null");
            this.pi = pi;
        }

        @Override
        public Paint transform(Integer i) {
            Color p = null;
            if ( i % 2 == 0)
                p = Color.GREEN;
            else
                p =  Color.RED;

            if ( pi.isPicked(i)){
                p = Color.yellow;
            }
            return p;
        }
    }

    private static class VertexLabelTransformer implements Transformer<Integer,String>{
        private final PickedInfo<Integer> pi;

        public VertexLabelTransformer( PickedInfo<Integer> pi ){
            this.pi = pi;
        }

        @Override
        public String transform(Integer t) {
            if (pi.isPicked(t))
                return t.toString();
            else
              return "";
        }
    }

    @SuppressWarnings("unchecked")
    public static <Paint> void main(String[] args) {
        Design sgv = new Design(); 
        Layout<Integer, String> layout = new FRLayout(sgv.g);
        layout.setSize(new Dimension(800,800));  
        VisualizationViewer<Integer, String> vv = new VisualizationViewer<Integer, String>(layout);

        Transformer<Integer,Paint> vertexPaint = new Transformer<Integer,Paint>() {

            @Override
            public Paint transform(Integer i) {
                if ( i % 2 == 0)
                    return (Paint) Color.GREEN;
                else
                    return  (Paint) Color.RED;
            }
        };  

        vv.setPreferredSize(new Dimension(850,850));
        vv.getRenderContext().setVertexLabelRenderer(new DefaultVertexLabelRenderer(Color.green));
        vv.getRenderContext().setVertexLabelTransformer(new VertexLabelTransformer(vv.getPickedVertexState()));

        vv.getRenderContext().setEdgeDrawPaintTransformer(new ConstantTransformer(Color.white));
        vv.getRenderContext().setEdgeStrokeTransformer(new ConstantTransformer(new BasicStroke(2.5f)));

        vv.getRenderContext().setVertexFillPaintTransformer(new VertexPaintTransformer(vv.getPickedVertexState()));

        DefaultModalGraphMouse graphMouse = new DefaultModalGraphMouse();
        graphMouse.setMode(edu.uci.ics.jung.visualization.control.ModalGraphMouse.Mode.PICKING);
        vv.setGraphMouse(graphMouse);

        vv.setBackground(Color.gray);

        vv.getRenderer().getVertexLabelRenderer().setPosition(Position.CNTR);

        JFrame frame = new JFrame("Projet Algo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(vv); 
        frame.pack();
        frame.setVisible(true);       
    }

    public static Graph<Integer, String> readNet(String string) {
        // Graph<V, E> where V is the type of the vertices
        // and E is the type of the edges
        Graph<Integer, String> g = new SparseMultigraph<Integer, String>();
        // Add some vertices. From above we defined these to be type Integer.
        g.addVertex(1);
        g.addVertex(2);
        g.addVertex(3);
        // Add some edges. From above we defined these to be of type String
        // Note that the default is for undirected edges.
        g.addEdge("Edge-A", 1, 2); // Note that Java 1.5 auto-boxes primitives
        g.addEdge("Edge-B", 2, 3);
        // Let's see what we have. Note the nice output from the
        // SparseMultigraph<V,E> toString() method
        System.out.println("The graph g = " + g.toString());
        // Note that we can use the same nodes and edges in two different graphs.
        Graph<Integer, String> g2 = new SparseMultigraph<Integer, String>();
        g2.addVertex(1);
        g2.addVertex(2);
        g2.addVertex(3);
        g2.addEdge("Edge-A", 1,3);
        g2.addEdge("Edge-B", 2,3, EdgeType.DIRECTED);
        g2.addEdge("Edge-C", 3, 2, EdgeType.DIRECTED);
        g2.addEdge("Edge-P", 2,3); // A parallel edge
        return  g2;

    }
} 
```

# methods - glassfish 3.1.2 监控 EJB 容器，bean-methods

> ID：13747147
> 
> 赞同：2
> 
> 时间：2012-12-06T15:40:03.653
> 
> 标签：methods, glassfish, ejb, javabeans, monitoring

glassfish 应用服务器提供了一个很好的监控 REST 接口。要使用它，您可以在管理控制台中启用多个可监控项目，例如 EJB 容器。文档说，您可以检索每个已部署应用程序的 EJB 统计信息。

如果您请求像**localhost:4848/monitoring/domain1/server/applications/ *APPNAME/EJBNAME 这样***的 URL ，您将获得应用程序的给定 EJB 的统计信息。

此外，有可能更深入地研究 ejb 的每个 bean-method，例如**executiontime**，关于它的文档说：
*“时间，以毫秒为单位，用于执行最后一次成功/不成功尝试运行该方法的时间操作。**如果在 EJB 容器上启用了监视，则会**为无状态和有状态会话 bean 和实体 bean 收集。*

现在的问题是，在 EJB 容器上启用了监视（级别设置为 HIGH），但是在任何已部署应用程序的任何 EJB 中的任何 bean 方法中都没有采样。

豆子和/或玻璃鱼有什么特别的吗？

提前感谢您的帮助，

克里斯

编辑：

好的，我注意到有关该行为的更多信息：

在服务器日志中，您会收到每个已部署 EJB 的日志消息，如下所示：

```
INFO: EJB5181:Portable JNDI names for EJB DataFetcher // ... 
```

如果我将 ejb-container 监视级别设置为 HIGH（这是我想要做的），我会为每个部署的 EJB 收到以下警告，无论我部署哪个应用程序：

```
WARNING: MNTG0201:Flashlight listener registration failed for listener class : com.sun.ejb.monitoring.stats.StatelessSessionBeanStatsProvider , will retry later 
```

我用谷歌搜索了警告，但没有一个结果真的能帮助我启用 EJB 监控......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T19:59:36.677

这似乎是 Glassfish 中的一个错误。
EJB 监控目前在 3.1.2 中不工作。
JIRA 问题已经提出：http: [//java.net/jira/browse/GLASSFISH-19677](http://java.net/jira/browse/GLASSFISH-19677)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:49:51.917

没有什么“特别”的事情要做。

[http://docs.oracle.com/cd/E18930_01/html/821-2431/abeea.html](http://docs.oracle.com/cd/E18930_01/html/821-2431/abeea.html)

对我来说，好像您可能在错误的配置上启用了监控选项。请仔细检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-24T05:56:36.963

要消除此消息，您可以在图像下方禁用对 ejb 容器的监控选项

从`Monitor Data--->Configure monitoring--->make ejb container log off` [![禁用监视器](../Images/79ab50fc258838ab48d5062da093da7c.png)](https://i.stack.imgur.com/jXoGY.png)

# javascript - 类上的 css 取决于包含的内容

> ID：13747150
> 
> 赞同：0
> 
> 时间：2012-12-06T15:40:09.913
> 
> 标签：javascript, jquery, css, sharepoint

我有一个共享点日历​​，我想根据它们包含的注册号对不同的块进行颜色编码（它用于学校的小巴）

如果 a.ms-cal-tweekitem 包含“EF04 WTR”，我如何设置 .ms-cal-eworkday 的背景颜色

我需要在 js/jquery 中执行此操作，因为我没有能力编辑 aspx（议会政治）

每个条目看起来像这样。

```
<td class="ms-cal-eworkday" rowspan="6"> 
    <table cellpadding="0" cellspacing="0" border="0" class="ms-cal-tweekitem" dir="">
    <tbody><tr>
        <td valign="top" href="/schools/ecclesfield/newdemosite/minibus-booking/Lists/Minibus/DispForm.aspx?ID=3" onclick="GoToLink(this);return false;" target="_self">
         <div>
          <img src="/_layouts/images/blank.gif" width="50" height="1" alt=""><br>
          <img src="/_layouts/images/recursml.gif" class="ms-cal-hidden" alt="" align="absmiddle">
          <a onfocus="OnLink(this)" class="ms-cal-dayitem" href="/schools/ecclesfield/newdemosite/minibus-booking/Lists/Minibus/DispForm.aspx?ID=3" onclick="GoToLink(this);return false;" target="_self" tabindex="5">
            <nobr>03:00 PM</nobr>
            <br>
            <b>test2</b>
            <br>
            EF04 WTR
            </a>
         </div>
         </td>
     </tr>
     </tbody></table>

</td> 
```

我知道代码有点乱，这就是 sharepoint 的工作原理:(

提前致谢。

刘易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:45:18.277

显然改变颜色以适应，但这会将背景设置为任何`td.ms-cal-eworkday`包含`a.ms-cal-dayitem`文本的红色`EF04 WTR`......

```
$("a.ms-cal-dayitem").filter(function() {
    return $(this).text().indexOf("EF04 WTR") != -1;
}).closest("td.ms-cal-eworkday").css("background-color", "red"); 
```

`filter()`意味着它只会返回符合条件的元素，在这种情况下，它包含相关的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:47:03.050

一种方法是遍历表格并检查每个单元格。

```
$(function(){
    $('.ms-cal-dayitem').each(function(){
        if( $(this).text().indexOf("EF04 WTR") != -1 ) {
            $(this).closest('.ms-cal-eworkday').css("background-color","blue");
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:44:47.130

在上面回答的同一行中，我对方法的唯一更改是在 css 中创建类，然后使用 jQuery 添加或删除类，但只是一个细节

# algorithm - 像循环链表一样计数

> ID：13747151
> 
> 赞同：-3
> 
> 时间：2012-12-06T15:40:13.280
> 
> 标签：algorithm, math

我想以有限但循环的方式倒计时。

假设限制为 12，当前迭代为 10，那么我希望结果为 10 - 2 = 8，如果当前迭代为 0，我应该得到如下结果：0 - 2 = 11 而不是 -2。

主要认为我想将其作为算法/公式。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T15:42:04.077

使用模运算符和 Zn[组](http://en.wikipedia.org/wiki/Group_%28mathematics%29)：

```
(i < 0 ? n + i : i) % n 
```

在您的示例中，数字在哪里`n`- 12，并且`i`是迭代次数。

（假设`-n <= i`，否则您可能需要减去`k*n - i`一些自然`k`值以确保结果为正。如果您反复执行上述步骤，这应该不是问题。）

* * *

作为旁注，在`-i == n-i`Zn 组中的纯数学概念中，但我知道的大多数编程语言都不会进行此计算，并且在模数计算之后，左操作数的符号保持不变。
为此，我们首先检查标志，并确保它是正面的。

# ruby - 在 Espresso 中，如何在模板中使用动作参数而不将它们分配给实例变量？

> ID：13747153
> 
> 赞同：1
> 
> 时间：2012-12-06T15:40:20.530
> 
> 标签：ruby

我有很多通过方法参数接收参数的操作：

```
class App < E
  map '/'

  def read page
    @page = page
    # etc.
    render
  end

  def profile user
    @user = user
    # etc.
    render
  end
end 
```

我如何在不将它们分配给实例变量的情况下访问模板`page`中的等？`user`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:21:10.603

您在这里至少有 2 个选项。

最直接的一种是使用`action_params`：

```
def read page
  # use action_params[:page] in templates
end 
```

请注意这仅适用于 Ruby 1.9

在 Ruby 1.8 中使用`action_params[0]`

另一种方法是将参数作为上下文变量传递：

```
def profile user
  render :user => user
  # in templates, user is available as #user getter
  # rather than @user instance variable
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:22:46.563

查看源代码，如果您将哈希传递给渲染函数，它会将这些键作为局部变量分配给视图。就像是

```
render(:foo => "Bar") 
```

在行动中，然后在你可以做的视图中

```
<%= foo %> 
```

这将呈现

```
Bar 
```

# debugging - 调试器：软断点

> ID：13747156
> 
> 赞同：4
> 
> 时间：2012-12-06T15:40:29.560
> 
> 标签：debugging, breakpoints

我目前正在研究调试器。我读过调试器有软件断点（[显然](http://www.nynaeve.net/?p=80)这些是最常用的断点）。这些通过将*操作码的第一个字节替换为 Int 3*（操作码 0xcc）来工作。

我已经读过程序的文本（/code）段是只读的（如果这个段不需要只读的话，就是停止代码修改自己的指令，自我修改代码）。我的问题是调试器如何修改只读指令。我在这里错过了什么吗。对此的任何评论或对此理论的指针表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:47:10.193

在 Windows 桌面和服务器平台上，可以使用 kernel32.dll 导出的 VirtualProtect 函数更改内存页面保护。因此，例如，如果调试器想要在某个地址写入 0xcc，但该地址位于标记为只读的页面中，则调试器可以将该页面的保护设置为读写（假设它具有足够的权限），然后写入价值。

这样做的副作用是它会导致该内存页面的写时复制 (COW) 错误，现在被调试进程将拥有它自己的页面物理副本。这可以防止在共享该物理页面的所有进程中设置断点。

# android - 在可扩展列表 onchildclicklistener 中更改自定义项目的整个布局

> ID：13747157
> 
> 赞同：2
> 
> 时间：2012-12-06T15:40:28.707
> 
> 标签：android

我有一个可扩展列表，当您单击子项而不是组时，我想更改整个布局。我尝试像这样选择子项目，它会更改所有项目。

```
while(parent.getChildAt(i)!=null){
    do something..
} 
```

这是代码：

```
private OnChildClickListener menuListOnChildClickListener = new OnChildClickListener() 
{
    public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) 
    {
       //change whole layout of whole children with an inflator
       //change the one clicked with another inflator
        v.setBackgroundColor(Color.BLACK);
        Toast.makeText(getApplicationContext(), "Tıklandı"+childPosition, Toast.LENGTH_SHORT).show();
        switch(childPosition){
            case 1:
            relativeLayout_sagOrtaEkranlar.setVisibility(v.INVISIBLE);
            relativeLayout_sagOrtaAnasayfa.setVisibility(v.VISIBLE);
            break;
            case 2:
            relativeLayout_sagOrtaEkranlar.setVisibility(v.VISIBLE);
            relativeLayout_sagOrtaAkilliEv.setVisibility(v.VISIBLE);
            relativeLayout_sagOrtaAkilliEvPerde.setVisibility(v.INVISIBLE);
            relativeLayout_sagOrtaAnasayfa.setVisibility(v.INVISIBLE);
            break;
            case 3:
            relativeLayout_sagOrtaEkranlar.setVisibility(v.VISIBLE);
            relativeLayout_sagOrtaAkilliEv.setVisibility(v.INVISIBLE);
            relativeLayout_sagOrtaAkilliEvPerde.setVisibility(v.VISIBLE);
            relativeLayout_sagOrtaAnasayfa.setVisibility(v.INVISIBLE);  
            break;  
            default:
            break;
        }
        return true;
    } 
```

任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:36:22.303

为了理解子项，我必须计算适配器中第一个子项的大小（大小是静态变量而不是 size() 函数），并在更改布局时从主 childOnClick 调用它：

```
int i=0;
while(parent.getChildAt(i)!=null){
    if((i>0 && i<ExpandListAdapter.size)){
        c=(ImageView) parent.getChildAt(i).findViewById(R.id.iv_listChild);
        c.setVisibility(View.VISIBLE);
        d=(ImageView) parent.getChildAt(i).findViewById(R.id.iv_listChild2);
        d.setVisibility(View.INVISIBLE);
    }
    i++;
} 
```

# perl - 从 Monit::HTTP perl 模块获得的 undef 数据和进程/系统状态

> ID：13747165
> 
> 赞同：1
> 
> 时间：2012-12-06T15:40:44.967
> 
> 标签：perl, monit

任何人都知道或使用过 Monit::HTTP 模块通过 HTTP 连接到监控守护进程的 perl 模块？

我正在尝试为 perl 使用 Monit::HTTP 模块，但遇到了一些麻烦。我无法检索状态变量，例如，monit status 命令给我 Status = Running 我在我的系统中运行的一些服务，但 Monit::HTTP 一直给我 Status=0。我尝试使用 monit stop 命令停止服务，我知道该进程已被终止，但 Monit::HTTP 以同样的方式给我 Status = 0。在最后一种情况下，状态 = 0 表示“服务已停止”或“服务正在运行”？

我的代码摘录从我的系统中检索性能数据，由 monit 守护程序监控：

```
my @systems = $hd->get_services(TYPE_SYSTEM);
foreach my $system (@systems) {
  print "system: $system\n";
  my $hash_ref = $hd->service_status($system);
... 
```

在最后一种情况下，我无法从 monit 中检索到好的数据（在使用 Data::Dumper 模块获得的下一个 hash_ref 转储中查找 undef 数据），例如 Monit::HTTP 返回：

```
system: xpto
$VAR1 = {
   'cpu' => {
       'percent' => undef,
       'percenttotal' => undef },
    'status' => '0',
    'name' => 'xpto',
    'children'=> undef,
    'monitor' => '1',
    'host' => 'localhost',
    'memory'=> {
        'percent' => undef,
        'kilobytetotal' => undef,
        'kilobyte' => undef,
        'percenttotal' => undef },
    'group' => undef,
    'pid' => undef;
    'ppid' => undef;
    'uptime' => undef;
    'type'=> '5';
    'load' => {
        'avg05' => undef,
        'avg01' => undef,
        'avg15' => undef },
    'pendingaction' => '0',
}; 
```

监控状态命令返回：

```
System 'xpto'
status                Running
monitoring status     Monitored
load average          [1.25] [1.16] [0.94]
cpu                   8.7%us 7.4%sy
memory usage          3202164 kB [76.3%]
swap usage            1589248 kB [75.7%]
data collected        Thu, 06 Dec 2012 11:50:55 
```

我的代码摘录从我的进程（例如，apache 进程）中检索性能数据，由 monit 守护进程监控：

```
my @systems = $hd->get_services(TYPE_PROCESS);
foreach my $system (@systems) {
    print "system: $system\n";
    my $hash_ref = $hd->service_status($system);
... 
```

感谢您的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:33:35.200

Monit::HTTP 通过 HTTP 协议连接到 Monit。您是否检查过 Monit 正在接受 HTTP 连接并且您的脚本连接到正确的参数？

wget -nd -v -O - --user 用户名 --password 密码 -- http://:/_status?format=xml

但也许问题更微不足道？您询问了 TYPE_PROCESS 并得到了回复：'type'=> '5';

如果您需要所有类型，您应该执行以下操作：（像 TYPE_ALL=-1 这样的模块中的 contans 会更加用户友好）

```
my @systems = $hd->get_services(-1);
foreach my $system (@systems) {
    print "system: $system\n";
    my $hash_ref = $hd->service_status($system); 
```

# ios - 当我的应用程序锁定为纵向时，如何将视频的视图更改为横向

> ID：13747168
> 
> 赞同：0
> 
> 时间：2012-12-06T15:40:49.960
> 
> 标签：ios, mpmovieplayercontroller, mpmovieplayer

我正在开发一个 iPad/iPhone 应用程序，该应用程序在按下按钮时显示视频。我的视频可以正常工作，但是我的应用程序被锁定为纵向模式，我希望我的视频仅以横向显示。这是一些与我的问题相关的代码，如果可能的话，我想要最简单和最简单的方法。

```
-(void) view_intro:(UIButton *)introButton {
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
               pathForResource:@"Introduction" ofType:@".m4v"]];
moviePlayer =  [[MPMoviePlayerController alloc]
                initWithContentURL:url];

[[NSNotificationCenter defaultCenter] addObserver:self
                selector:@selector(moviePlayBackDidFinish:)
                name:MPMoviePlayerPlaybackDidFinishNotification
                object:moviePlayer];

moviePlayer.controlStyle = MPMovieControlStyleDefault;
moviePlayer.shouldAutoplay = YES;
[self.view addSubview:moviePlayer.view];
[moviePlayer setFullscreen:YES animated:YES];} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:08:13.357

我知道在这种情况下很痛苦。我所做的是旋转整个视图。试试看。

```
 // First rotate the screen:
    [UIApplication sharedApplication].statusBarOrientation = UIInterfaceOrientationLandscapeRight;
    // Then rotate the view and re-align it:
    CGAffineTransform landscapeTransform = CGAffineTransformMakeRotation(degreesToRadians(-90));
    landscapeTransform = CGAffineTransformTranslate( landscapeTransform, -90.0, -90.0 );
    [self.view setTransform:landscapeTransform]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:44:40.210

基本上我最终做的是为我的电影播放器​​创建一个单独的视图/类，这似乎工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T11:11:22.430

如果您使用全屏在侧视图控制器中显示视频，那么您可以做一些这样的事情，我做的很好。

使视图控制器仅支持横向模式。（检查横向或左侧）。覆盖supportedInterfaceOrientions 查看下面的代码

`-(NSInteger)supportedInterfaceOrientations { return UIInterfaceOrientationMaskLandscape ; }`

# c# - Lightswitch HTML Client Preview2 中的字段格式设置

> ID：13747170
> 
> 赞同：4
> 
> 时间：2012-12-06T15:40:54.417
> 
> 标签：c#, javascript, visual-studio-lightswitch

只是尝试在 LightSwitch HTML Client Preview 2 中格式化日期（或任何相关字段）。

我试过这个“格式模式”字段：

![http://i.stack.imgur.com/kAasn.png](../Images/742140a07f51ce99b0aebfe3b9dc6396.png)

但它似乎总是被忽略： ![http://i.imgur.com/PoOcD.png](../Images/bfda82a110221cf99fbfc5478c388449.png)

我尝试了很多不同类型的字段，包括文本、段落、自定义控件、文本框——都忽略了我的格式模式。

我也尝试在表格上创建一个“计算字段”，但似乎视图（屏幕）没有接触到计算字段，我无法显示它们。

我找到了一个解决方案，其中有人创建了“自定义”javascript 绑定并根据绑定事件设置值，但这对我来说听起来有点“搞砸”。灯开关中是否有更标准的方式来完成格式化？

编辑：[链接在这里。](http://social.msdn.microsoft.com/Forums/en-US/lightswitchhtml/thread/a51fb10a-b765-49c0-9a6b-b0557c1cab51)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T23:45:01.190

我同意这种观点，但我知道格式化日期的唯一方法是使用 javascript。我使用以下代码段在名为 ViewTable 的视图屏幕中将日期格式化为日/月/年示例 31/12/2013。该列的名称是 StartDate 并且此代码进入 post_render 事件。

```
myapp.ViewTable.StartDate_postRender = function (element, contentItem) {
    contentItem.dataBind("value", function (value) {
        if (value) {
            $(element).text(moment(value).format("DD/MM/YYYY"));
        }
    });
}; 
```

如果您打算在可编辑列中使用此代码，则它会更加复杂。我想代码应该与您发布的链接所引用的页面非常相似。

看来我们毕竟需要了解 JavaScript。希望这可以帮助。

# tfs - TFS 2012 更新 1 - 更新期间的压缩索引错误

> ID：13747171
> 
> 赞同：0
> 
> 时间：2012-12-06T15:40:59.320
> 
> 标签：tfs, tfs-2012

我刚刚尝试在我们的 TFS 2012 服务器上安装更新 1。安装让我重新运行了配置向导。在升级我们的主要项目集合期间，我收到以下错误：

> [错误] 无法创建或重建索引“PK_WorkItemsAre_Sparse”。包含稀疏列或列集列的表不支持压缩索引。

在与我们的 DBA 交谈时，他看到升级删除了表的 PK，因此看起来该进程正在尝试重新创建 PK 并收到此错误。更新的其余部分已完成，现在我留下了一个脱机的项目集合，将无法完成排队等待的服务作业。

接下来我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:02:02.287

1) 您是否尝试过从管理控制台重新运行服务步骤

2) 将所有数据库恢复到您在运行升级之前创建的备份。这会让你现在工作......

然后检查：

1.  您登录的帐户是否具有数据库服务器的 SysAdmin（必需）
2.  TFS 服务帐户是否具有数据库服务器的 SysAdmin（必需）

如果是这种情况，我们需要查看日志中的实际错误。我发现在几个单独的 SQL 服务器的情况下，网络通信错误导致升级出现故障。

*   [TFS 2012 更新 1 – TF255430：数据库在升级失败期间部分升级](http://blog.hinshelwood.com/tfs-2012-update-1-tf255430-the-database-was-partially-upgraded-during-a-failed-upgrade/)

这可能会有所帮助，如果是这样，您可以再次运行升级并且不会出现相同的错误。

3) 刻录与 Microsoft 的支持电话（您的 MSDN 获得 3 个，企业协议获得更多）

# sql - 想要在查询 2 个或更多具有相同格式的表时使我的 SELECT 查询变得简单

> ID：13747175
> 
> 赞同：0
> 
> 时间：2012-12-06T15:41:05.473
> 
> 标签：sql, select

我有 2 个相同的表格，它们具有相同的格式但填充了不同的数据。

我想`SELECT`使用`group by`并且`order by`不想使用 a进行查询，`UNION`因为它使我的查询很长。

这是一个有效的示例：

```
(SELECT a, b, c, d, e, f, g, MIN(h) as h, i 
 FROM `table1` 
 WHERE a LIKE '%this%' AND b LIKE '%that%' 
 GROUP BY b, a,c) 
UNION 
(SELECT a, b, c, d, e, f, g, MIN(h) as h, i 
 FROM `table2` 
 WHERE a LIKE '%this%' AND b LIKE '%that%' 
 GROUP BY b, a,c) 
ORDER BY 
    b DESC, h ASC, c ASC 
```

有没有更优雅的方式来使查询工作？

就像是

```
(SELECT a, b, c, d, e, f, g, MIN(h) as h, i 
 FROM `table1`,`table2` 
 WHERE a LIKE '%this%' AND b LIKE '%that%' 
 GROUP BY b, a, c) 
ORDER BY 
    b DESC, h ASC, c ASC` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:44:35.833

你想要的是`union all`一个子查询：

```
SELECT a, b, c, d, e, f, g, MIN(h) as h, i
FROM ((select table1.*
       from table1
      ) union all
      (select table2.*
       from table2
      )
     ) t
WHERE a LIKE '%this%' AND b LIKE '%that%'
GROUP BY b, a,c
order by b DESC, h ASC, c ASC 
```

我假设查询只是代表，因为您`e, f, g, i`没有`select`聚合函数。

# bash - 为什么我的 shell 脚本在第二次尝试时失败？

> ID：13747179
> 
> 赞同：3
> 
> 时间：2012-12-06T15:41:30.397
> 
> 标签：bash, darwin, getopts

这个脚本应该接受一组搜索词并返回一个格式化的 URL 来搜索 google。

```
$ ./google_search.sh albert einstein
https://www.google.com/search?q=albert+einstein 
```

这样做很好，所以我决定添加一个选项来搜索特定站点，或者忽略该站点，使用`-s`or`-S`标志。

```
$ ./google_search.sh -s wikipedia.org albert einstein
https://www.google.com/search?q=albert+einstein+site%3Awikipedia.org 
```

这在您第一次运行脚本时有效，但在随后的每次尝试中都会失败。

```
$ ./google_search.sh -s wikipedia.org albert einstein
https://www.google.com/search?q=albert+einstein
$ ./google_search.sh -s wikipedia.org albert einstein
https://www.google.com/search?q=albert+einstein 
```

打开一个新的终端窗口或重新启动终端都可以清除此问题并允许在失败前再尝试一次。

剧本：

```
#!/bin/bash

# original source of concatenate_args function by Tyilo:
# http://stackoverflow.com/questions/9354847/concatenate-inputs-in-bash-script
function concatenate_args
{
    string=""
    ignorenext=0
    for a in "$@" # Loop over arguments
    do
        if [[ "${a:0:1}" != "-" && $ignorenext = 0 ]] # Ignore flags (first character is -)
        then
            if [[ "$string" != "" ]]
            then
                string+="+" # Delimeter
            fi
            string+="$a"
        elif [[ $ignorenext = 1 ]]
        then
            ignorenext=0
        else
            ignorenext=1
        fi
    done
    echo "$string"
}

qry="$(concatenate_args "$@")"
glink="https://www.google.com/search?q="

site=""
while getopts :s:S: opt; do
    case $opt in
        s) site="+site%3A$OPTARG" ;; 
        S) site="+-site%3A$OPTARG" ;; 
    esac
done

url=$glink$qry$site

echo $url
# open -a Firefox $url 
```

需要进行哪些更改才能使此脚本更可靠？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T17:31:37.557

这就像您正在采购脚本而不是执行它。如果在脚本前使用点和空格，则会导致脚本在当前 shell 内逐行执行，而不是创建新的 shell。这允许在脚本内更改的环境变量泄漏到当前 shell 的环境中，这可能会使脚本的一次运行与下一次运行不同。

在这种情况下，它似乎是使用 getopts。getopts 每次调用它都会更新一个环境变量，以便它可以跟踪正在检查的参数。第二次获取脚本时，它认为所有参数都已经检查过了，所以你的参数最终被忽略了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:27:42.533

您的脚本，简化：

```
#!/bin/bash
glink="https://www.google.com/search?q="
site=""

# if you're "source"ing, uncomment the following:
# OPTIND=1

while getopts :s:S: opt; do
    case $opt in
        s) site="+site:$OPTARG" ;; 
        S) site="+-site:$OPTARG" ;; 
        ?) echo "invalid option: -$OPTARG" >&2 ;;
    esac
done
shift $((OPTIND - 1))
# the positional parameters are now clear of "-s" and "-S" options

qry=$(IFS="+"; echo "$*")
url=$glink$qry$site
echo "$url"
# open -a Firefox "$url" 
```

# php - INNER JOIN 在多表查询中跳过一些结果

> ID：13747182
> 
> 赞同：0
> 
> 时间：2012-12-06T15:41:50.660
> 
> 标签：php, mysql, join

我正在尝试编写一个查询来查看四个表并提取所有相关数据。我的 get_phocadownload_user_stat 表会跟踪我网站上的每一次下载。无论后续表中每次下载的数据是否丢失，我都需要显示所有这些。问题是查询只是抓取我查询的每个数据片段中都有结果的数据。IE 如果没有下载用户下载信息的用户的 user_ip.ip_address 结果，则下载信息根本不显示。理想情况下，我希望在查询结束时执行以下操作：

```
if($result['ip_address'] == '' || $result['ip_address'] == NULL){
    print "N/A";
} 
```

这是我的查询字符串：

```
$string = "SELECT get_phocadownload_user_stat.fileid, get_phocadownload_user_stat.count, get_phocadownload_user_stat.date, get_users.name, get_users.username, get_users.email, get_phocadownload.filename, user_ip.ip_address, user_ip.location 
            FROM get_phocadownload_user_stat 
            INNER JOIN get_users ON get_phocadownload_user_stat.userid = get_users.id 
            INNER JOIN get_phocadownload ON get_phocadownload_user_stat.fileid = get_phocadownload.id 
            INNER JOIN user_ip ON get_users.username = user_ip.username 
            ORDER BY get_phocadownload_user_stat.date DESC"; 
```

有没有一种简单的方法来告诉查询，如果结果不可用，则默认为 NULL 而不是跳过它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T15:43:08.850

尝试使用 a`LEFT JOIN`而不是`INNER JOIN`，因为[“LEFT JOIN 关键字会返回左表 (table_name1) 中的所有行，即使右表 (table_name2) 中没有匹配项。”](http://www.w3schools.com/sql/sql_join_left.asp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T15:44:05.653

改用 LEFT JOIN。它将为丢失的数据添加 NULL 而不是将其丢弃

# objective-c - 你如何实现 NSPageController 来浏览 webView 的历史

> ID：13747190
> 
> 赞同：16
> 
> 时间：2012-12-06T15:42:11.773
> 
> 标签：objective-c, cocoa, api, view, webview

我有一个基于 webView 的应用程序，但我希望用户能够通过在触控板和魔术鼠标上滑动来导航它。因此，我要实现 NSPageController。

我查看了文档和 PictureSwiper 应用程序，但是这些并不是真正用于 webView。所以，我想知道如何在 webView 上使用 NSPageController。我有一个 webView 定义为`webView`和两个动作，goBack: 和 goForward: 分别加载上一页和下一页。

但是，我不知道如何让 NSPageController 与简单的 webView 一起工作。有一种方法可以做到这一点，但我认为没有办法。如果有人可以请解释我应该做什么，那就太好了。或者，如果您感觉特别大方，可以下载我的免费浏览器源示例。[https://sites.google.com/site/infiniteopensyntax/basic-web-browser](https://sites.google.com/site/infiniteopensyntax/basic-web-browser)

该来源显示了我自己的应用程序是如何设置的。如果您想在该应用程序上实现 NSPageController 并将源代码发送给我，我将不胜感激。这并不多，但如果你这样做，我会将滑动示例添加到 Infinite Open Syntax 并在上面写上你的名字。您可以选择许可证。

这是 Cocoa，不是 Cocoa Touch

***编辑***

好的，现在我只需要确保该应用程序仍然可以在 Snow Leopard 上运行。据说，我可以通过断开插座来测试它。它工作正常，减去后退和前进按钮。为此，我相信我检查了 NSPageController 类。如果它不存在，那么我只是跳过使用 pageController。

```
- (IBAction)goBack:(id)sender {
    if (NSClassFromString(@"NSPageController") != Nil)
    {
        [self.pageController navigateBack:sender];
    }
    {

         //Not 10.8
        [webView goBack];
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T06:49:20.563

您链接到的页面上的下载链接不起作用，所以我会保持我的回答更笼统。

如果您正在使用，则无需保留多个 WebView 或手动生成快照`NSPageController`；它会为您解决这个问题。在您的情况下，您想`NSPageController`在[History Mode](http://developer.apple.com/library/Mac/documentation/AppKit/Reference/NSPageController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40012265-CH1-SW19)中使用。为此，请将您`WebView`连接到`pageController.view`. 您将需要实现三种`NSPageControllerDelegate`方法：

```
- (void)pageControllerWillStartLiveTransition:(NSPageController *)pageController;
- (void)pageController:(NSPageController *)pageController didTransitionToObject:(id)object;
- (void)pageControllerDidEndLiveTransition:(NSPageController *)pageController; 
```

每次 WebView 进入新页面（不是通过后退/前进操作）时，调用[`navigateForwardToObject:(id)object`](http://developer.apple.com/library/Mac/documentation/AppKit/Reference/NSPageController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40012265-CH1-SW14). `pageController`我会创建`object`一个自定义对象来存储导航页面的用户状态（滚动位置、突出显示的文本、表单内容等）以及页面的[`WebHistoryItem`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Classes/WebHistoryItem_Class/Reference/Reference.html#//apple_ref/doc/c_ref/WebHistoryItem). 用户状态最初可以是未定义的，但应该设置为`pageControllerWillStartLiveTransition:`. 这是一个例子：

```
- (void)pageControllerWillStartLiveTransition:(NSPageController *)pageController
{
  // Remember user state
  MyCustomObject *object = [self.pageController.arrangedObjects objectAtIndex:self.pageController.selectedIndex];
  object.userState = someUserState;
} 
```

当该方法返回时，`pageController`将隐藏其视图（WebView）并显示其视图先前状态的快照。

滑动动画完成后，`pageController:didTransitionToObject:`将被调用。凉爽的。在该方法中您应该做的是抓住`WebHistoryItem`并让 WebView 使用该方法`object`返回该项目。[`goToBackForwardItem:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html#//apple_ref/doc/uid/20001903-BABFADDF)您还应该保留您存储的用户状态`object`（例如，在实例变量中），因为您需要在`WebView`完成加载后恢复它。

最后，在`pageControllerDidEndLiveTransition:`重新显示 WebView 之前，您可以做任何您想做的事情。我希望这没什么，因为在 WebView 完成加载之前不会恢复用户状态，所以您在其实现中需要的只是`[pageController completeTransition]`.

最后一个细节是后退/前进按钮。您应该像往常一样实现它们，但也让它们调用`navigateBack:`或`navigateForward:`在 pageController 上。

这几乎涵盖了它。我实际上没有尝试过这个具体的例子，所以如果你遇到任何问题，请告诉我。

## 编辑

以下是我如何修改您的源以获得基本`NSPageController`功能。`NSPageController IBOutlet`在 AppDelegate 头文件中添加一个属性。在您的`MainMenu.xib`文件中添加页面控制器，将其视图连接到您的 WebView，将您的 AppDelegate 设置为它的委托，并为其提供我们刚刚在 AppDelegate 中创建的属性的引用出口。此外，让您的 AppDelegate 成为您的 WebView 的`frameLoadDelegate`. 在里面`basicWebAppDelegate.m`添加一个私有属性：

```
@interface basicWebAppDelegate ()
@property (assign) id currentItem;
@end 
```

然后添加以下内部实现：

```
#pragma mark - WebFrameLoadDelegate

- (void)webView:(WebView *)sender didCommitLoadForFrame:(WebFrame *)frame {
  if (frame == [sender mainFrame]) {
    id object = [sender.backForwardList currentItem];
    BOOL isCurrentItem = self.currentItem && (object == self.currentItem) ? YES : NO;
    if (!isCurrentItem) {
      [self.pageController navigateForwardToObject:[sender.backForwardList currentItem]];
    }
  }
}

#pragma mark - NSPageControllerDelegate

- (void)pageControllerWillStartLiveTransition:(NSPageController *)pageController {
  self.currentItem = [self.webView.backForwardList currentItem];
  // Here is where you'll save any state for your pageController.arrangedObjects[pageController.selectedIndex] object
}

- (void)pageController:(NSPageController *)pageController didTransitionToObject:(id)object {
  BOOL isCurrentItem = self.currentItem && (object == self.currentItem) ? YES : NO;
  if (!isCurrentItem) {
    self.currentItem = object;
    [self.webView goToBackForwardItem:object];
  }
}

- (void)pageControllerDidEndLiveTransition:(NSPageController *)pageController {
  self.currentItem = nil;
  [pageController completeTransition];
} 
```

最后，将您的`goBack:`和`goForward:`操作分别更改为仅调用`[self.pageController navigateBack:sender]`和`[self.pageController navigateForward:sender]`。

请注意，我没有费心在此处保存任何用户状态，而是`WebHistoryItem`直接使用 s 作为对象。您可能需要采取不同的做法。

如果您需要更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T07:39:10.803

来自： [https ://stackoverflow.com/a/13716988/466698](https://stackoverflow.com/a/13716988/466698)

一个明显的解决方案可能是使用多个 Web 视图，但由于它们可能非常重，您可能不想这样做。

最好的想法可能是在离开之前保存每个页面的图像。当用户向后滑动时，只显示保存图像的视图。滑动完成后，交换视图以使 Web 视图本身位于顶部。

这似乎是 Safari 的做法（您有时可以看到图像压缩，并且它经常重新加载页面并跳离上一个屏幕截图）

# java - 多个 Ajax 干扰 PrimeFaces 项目

> ID：13747191
> 
> 赞同：0
> 
> 时间：2012-12-06T15:42:14.207
> 
> 标签：java, ajax, primefaces

我遇到了 Ajax 和 PrimeFaces 的问题。

页面应该做什么：

-用户在“Cas 1”和“Cas 2”（单选按钮）之间进行选择

- 验证案例后，Ajax 查询应显示“cas 1”的一个输入文本区域和“cas 2”的多个输入文本区域。输入文本区域中的文本应保存在数据库中

真正发生的事情：

-用户在“Cas 1”和“Cas 2”之间进行选择

- 输入文本区域第一次正确显示，然后如果您在“Cas 1”和“Cas 2”之间切换，则不会再次更改。此外，文本未保存在数据库中。

单独（没有单选按钮），“Cas 1”和“Cas 2”都可以正常工作

这是我正在使用的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:body>
    <h:form id="form">

        <p:messages id="messages" showDetail="true" autoUpdate="true"/>

        <h:panelGrid columns="1" >
            <h:outputText value="Cas 1 : sélection « travail identique pour l’ensemble des CDC » ou un seul CDC" />
            <h:outputText value=" " />
            <h:outputText value="Cas 2 : sélection « travail différent suivant les CDC »" /> 

            <p:selectOneRadio id="CasTrois" value="#{growlBean.casTrois}" required="true"> 
                <f:selectItem itemLabel="Cas 1" itemValue="1" />                               
                <f:selectItem itemLabel="Cas 2" itemValue="2" />
                <p:ajax  event="change" update="displayTrois" />
            </p:selectOneRadio>                                
        </h:panelGrid>

        <h:panelGrid columns="1" id="displayTrois">
            <c:if test="${growlBean.casTrois == 1}">
                <h:outputText value="Expliquer succinctement en quoi consiste l’affaire." />
                <h:outputText value="Donner notamment les informations liées à l’affaire mais ne figurant pas dans les CDC." />
                <h:outputText value=" " />
                <h:outputText value="Exemple" style="font-weight:bold; color: green"/>
                <h:outputText value="Relance en quantité 1 de tous les sous-ensembles de tous les CDC" style="font-weight:bold; color: green"/>
                <h:panelGrid columns="2">
                    <h:panelGrid columns="1">
                        <p:inputTextarea  rows="8" cols="100" required="false" validatorMessage="Le champ doit être rempli"
                                          value="#{growlBean.natureDesTravaux}" autoResize="true"  >
                            <p:ajax event="keyup" listener="#{growlBean.setNatureDesTravaux(natureDesTravaux)}"/>
                        </p:inputTextarea>  
                    </h:panelGrid>                                       
                </h:panelGrid>
            </c:if>

            <c:if test="${growlBean.casTrois == 2}">
                <h:outputText value="Expliquer succinctement en quoi consiste l’affaire." />
                <h:outputText value="Donner notamment les informations liées à l’affaire mais ne figurant pas dans les CDC." /> 
                <p:dataTable id="TableauNatrureTravaux" value="#{growlBean.listCdcAffaire2}" var="detailCdc" >
                    <f:facet name="header">
                        <h:outputText value="Nature des Travaux"/>
                    </f:facet>
                    <p:column >
                        <h:panelGrid columns="1">
                            <p:outputLabel for="textTravaux" value="#{detailCdc.cdcId.outillageId.numeroOutil} #{detailCdc.cdcId.outillageId.designation}" />
                            <p:inputTextarea id="textTravaux" rows="8" cols="100" value="#{detailCdc.natureTravauxPourFla}"      
                                             autoResize="true" required="false" validatorMessage="test" >
                                <f:validateLength minimum="1" />
                                <p:ajax event="keyup" listener="#{detailCdc.setNatureTravauxPourFla(natureTravauxPourFla)}"/>
                            </p:inputTextarea>
                        </h:panelGrid> 
                    </p:column>  
                </p:dataTable>
            </c:if>
        </h:panelGrid>               

    </h:form>        
</h:body> 
```

有人可以帮我尝试刷新页面并保存文本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:37:03.850

要使单选按钮正常工作，请将您的`displayTrois`元素更改为以下内容，（如果这不能解决它，您将需要发布您的 bean 信息并包含侦听器）：

```
<p:panel id="displayTrois">
<h:panelGrid columns="1" rendered="${growlBean.casTrois == 1}">
            <h:outputText value="Expliquer succinctement en quoi consiste l’affaire." />
            <h:outputText value="Donner notamment les informations liées à l’affaire mais ne figurant pas dans les CDC." />
            <h:outputText value=" " />
            <h:outputText value="Exemple" style="font-weight:bold; color: green"/>
            <h:outputText value="Relance en quantité 1 de tous les sous-ensembles de tous les CDC" style="font-weight:bold; color: green"/>
            <h:panelGrid columns="2">
                <h:panelGrid columns="1">
                    <p:inputTextarea  rows="8" cols="100" required="false" validatorMessage="Le champ doit être rempli"
                                      value="#{growlBean.natureDesTravaux}" autoResize="true"  >
                        <p:ajax event="keyup" listener="#{growlBean.setNatureDesTravaux(natureDesTravaux)}"/>
                    </p:inputTextarea>  
                </h:panelGrid>                                       
            </h:panelGrid>

    </h:panelGrid>
    <h:panelGrid columns="1" rendered="${growlBean.casTrois == 2}">
            <h:outputText value="Expliquer succinctement en quoi consiste l’affaire." />
            <h:outputText value="Donner notamment les informations liées à l’affaire mais ne figurant pas dans les CDC." /> 
            <p:dataTable id="TableauNatrureTravaux" value="#{growlBean.listCdcAffaire2}" var="detailCdc" >
                <f:facet name="header">
                    <h:outputText value="Nature des Travaux"/>
                </f:facet>
                <p:column >
                    <h:panelGrid columns="1">
                        <p:outputLabel for="textTravaux" value="#{detailCdc.cdcId.outillageId.numeroOutil} #{detailCdc.cdcId.outillageId.designation}" />
                        <p:inputTextarea id="textTravaux" rows="8" cols="100" value="#{detailCdc.natureTravauxPourFla}"      
                                         autoResize="true" required="false" validatorMessage="test" >
                            <f:validateLength minimum="1" />
                            <p:ajax event="keyup" listener="#{detailCdc.setNatureTravauxPourFla(natureTravauxPourFla)}"/>
                        </p:inputTextarea>
                    </h:panelGrid> 
                </p:column>  
            </p:dataTable>
    </h:panelGrid>   
</p:panel> 
```

# rdf - 在 SPARQL 中，如何查找一篇文章是否属于某个类别

> ID：13747197
> 
> 赞同：1
> 
> 时间：2012-12-06T15:42:45.463
> 
> 标签：rdf, sparql, freebase

我正在使用 basekb 来提取一些语义信息。

下面的 sparql 查询也可以作为一个 freebase 查询（因为 basekb 也有 freebase）。

问题陈述：检查一个实体是否是某个其他实体的子类别。

例如：检查 en.academy_award_for_best_supporting_actor 是否属于 en.academy_award 类别。

```
prefix basekb: <http://rdf.basekb.com/ns/>
prefix public: <http://rdf.basekb.com/public/>
prefix fbase: <http://rdf.freebase.com/ns/>
prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>

select ?aa_ct ?bb {
?aa_ct public:knownAs basekb:en.academy_awards .
?bb public:knownAs basekb:en.academy_award_for_best_supporting_actor .
**?bb rdfs:categoryOf ?aa .**
} 
```

我们需要使用适当的语法（我不知道）更改粗体文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:22:53.970

如果您的 SPARQL 实现支持 1.1 标准，您应该能够为此使用属性路径，假设数据具有严格的类别层次结构，例如

```
?bb rdfs:categoryOf+ ?aa . 
```

属性路径提供了一种简单的正则表达式样式语法，可用于对已知谓词表示您想要匹配`?bb`和之间存在连接的位置`?aa`。

在这种情况下，`rdfs:categoryOf+`我们需要通过一系列一个或多个链接`?bb`链接到的值。`?aa``rdfs:categoryOf`

## 编辑

您可以使用固定长度的简单路径来实现类似于属性路径的效果`UNION`，例如

```
{ ?bb rdfs:categoryOf ?aa }
UNION
{ ?bb rdfs:categoryOf [ rdfs:categoryOf ?aa ] }
UNION
{ ?bb rdfs:categoryOf [ rdfs:categoryOf [ rdfs:categoryOf ?aa ] ] } 
```

这将匹配1-3 步`?bb`中的子类别的内容`?aa`，您可以根据需要将其扩展到您期望的路径长度。与支持属性路径的实现相比，性能可能会很差。

# ios6 - 如何评估 NSURL URLWithString 中的字符串

> ID：13747199
> 
> 赞同：1
> 
> 时间：2012-12-06T15:42:49.683
> 
> 标签：ios6

我正在尝试加载图像 - 我从 JSON - 字典中获取 URL

字典：api.amioamio.com/?v=1&id=2&pass=8d4a9a5648640eca8f8da4416d0f6999&cmd=getShop&p%5BshopId%5D=110

我写的时候工作得很好-但是如果我尝试使用字符串变量-它不能生成 imageURL

这是我的代码：

NSString *strURLTemp=[[NSString alloc] initWithFormat:@"[[[images objectForKey:@\"%@\"] objectForKey:@\"images\"] objectForKey:@\"small\"]",[keys objectAtIndex :0]];

```
NSLog(@"%@",strURLTemp);//[[[images objectForKey:@"78044"] objectForKey:@"images"] objectForKey:@"small"]

//NSURL *imageURL1 = [NSURL URLWithString:[[[images objectForKey:@"100256"] objectForKey:@"images"] objectForKey:@"small"]];

NSURL *imageURL1 = [NSURL URLWithString:strURLTemp];
NSData *imageData1 = [NSData dataWithContentsOfURL:imageURL1];
UIImage *img1 = [UIImage imageWithData:imageData1]; 
```

我怎样才能使这项工作？谢谢 ！

# crystal-reports - 水晶报表公式中的计算错误

> ID：13747204
> 
> 赞同：1
> 
> 时间：2012-12-06T15:43:11.410
> 
> 标签：crystal-reports, formula

我有 2 个小数字段：GrossSalary 和 Deductions。在报告中，我创建了一个名为 NetSalary 的公式字段，即：

```
If Not IsNull({SalaryDetails.GrossAmount}) Then
 {SalaryDetails.GrossAmount} - {SalaryDetails.Deduction} 
```

当数据可用时，报告会正确运行，但如果没有，我会收到以下错误

```
A number, currency amount,date,time, or date-time is required here.
Details:errorKind
Error in File tempxxxxxxxxx.rpt:
Error in formula NetAmount:
'If Not IsNull({SalaryDetails.GrossAmount}) Then
'
A number,currency amount,date,time, or date-time is required here.
Details:errorKind 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:15:03.430

如果 Crystal Reports 认为它​​正在使用不是数字的值，它将引发此错误。Crystal 有许多转换功能，如（CDBL、CSTR 等）以及您可以使用的数据检查功能（IsNull、IsNumeric 等）。

在您的特定情况下，将值转换为 DBL (CDBL({field}) 可以在 Crystal 检查空值或空白后解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-24T13:56:55.553

CDBL 或 IsNumeric 函数可以正常工作，例如：

{@Total} / 100 * CDBL({tblinvdetail.disc})。在这个公式中，disc 是 tblinvdetail 表的折扣列。我们假设 disc 列也接受空值。为避免此错误，CDBL 或 IsNumeric 函数将 null 转换为 0 值。您应该谨慎地在 Crystal Report 的任何公式中始终应用 cdbl 或 IsNumeric 函数以避免此类错误。如果输出的值没有浮点，则使用 IsNumeric 函数，否则使用 CDBL 函数。您还可以使用 IsNull 函数来确定空值，例如：

如果 IsNull({tblinvdetail.disc}) 那么 "0" 否则 {@Total} / 100 * {tblinvdetail.disc}

==================================================== =================== Munawar Shah AFridi (MCSD.net)

# ruby-on-rails-3 - 使用嵌套模型覆盖 *_attributes= 方法轨

> ID：13747207
> 
> 赞同：5
> 
> 时间：2012-12-06T15:43:20.163
> 
> 标签：ruby-on-rails-3, overriding, nested-attributes

由于某种原因太长无法解释，我需要覆盖`*_attributes=(attributes)`我的模型的方法，该方法接受另一个模型的嵌套属性。例如，这是我的模型：

```
class Experience < ActiveRecord::Base
    accepts_nested_attributes_for :company

    def company_attributes=(attributes)
        ...
    end
end 
```

首先，每次调用此方法时，我都开始创建一家新公司（通过替换`...`为`self.company = Company.new(attributes)`）。不用说它会将新公司保存到数据库中。

当我发现它正在做这样的事情时，我将此方法编辑为以下内容：

```
def company_attributes=(attributes)
    self.company.nil? ? self.company = Company.new : self.company.assign_attributes(attributes)
end 
```

这似乎是正确的方法（如果它是 nil，它只会创建一个新对象，否则它只会分配更改的属性）。但是，对于新体验，它将新创建的公司保存到数据库中，而在编辑体验时，它会在方法的单行之后更改公司的属性，但不会将其保存到数据库中。

**问题1：**生成的`*_attributes=(attributes)`方法如何工作？

**问题2：**我应该如何改变我的`company_attributes=(attributes)`方法以实现我的目标：创建新体验时创建新公司，编辑体验时编辑公司属性。

谢谢

# iphone - 获取 View Controller 的 StoryBoard 实例

> ID：13747211
> 
> 赞同：9
> 
> 时间：2012-12-06T15:43:32.267
> 
> 标签：iphone, ios, uiviewcontroller, instance, uistoryboard

没有故事板的示例：

AppDelegate.h

```
@property (retain, nonatomic) UIViewController *leftController; 
```

AppDelegate.m

```
self.leftController = [[LeftViewController alloc] initWithNibName:@"LeftViewController" bundle:nil]; 
```

其他视图控制器：

```
//This is what I want do to in storyboards
self.viewDeckController.leftController = (AppDelegate*)[[UIApplication sharedApplication] delegate].leftController; 
```

使用情节提要时如何获取 leftController 的实例？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-06T15:48:43.370

您可以在界面生成器中为视图控制器提供一个标识符，然后只需使用：

```
UIStoryboard *mystoryboard = [UIStoryboard storyboardWithName:@"myStoryBoardName" bundle:nil];
self.leftController = [mystoryboard instantiateViewControllerWithIdentifier:@"idyouassigned"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T12:38:19.600

我不确定你是否能得到这个问题的解决方案，但你也可以参考这个问题的答案：

[从情节提要中访问视图控制器](https://stackoverflow.com/questions/8784143/accessing-a-view-controller-created-through-storyboard-using-the-app-delegate)

# ruby - 根据公钥确定密钥大小（PEM 格式）

> ID：13747212
> 
> 赞同：1
> 
> 时间：2012-12-06T15:43:34.000
> 
> 标签：ruby, security, size, certificate, public-key

我试图弄清楚我收到的公钥的大小。如何从密钥中确定大小？[我在文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/X509/Certificate.html)中找不到简单的方法。

我拥有的是公钥本身，我收到的是这样的：

```
cert = OpenSSL::X509::Certificate.new(sock.peer_cert)
pkey = cert.public_key 
```

公钥采用 PEM 格式。所以你有开始和结束线，中间是实际的键。现在密钥本身是 base64 编码的。如果我解码该字符串并计算字节数，我会得到一个大小。这个大小包括一些额外的东西，比如指数和模数（还有更多吗？）。我需要知道确定公钥的位是多少字节模数和指数（如果有更多，那么也是如此）占用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:20:29.877

```
key_length_in_bits = pkey.n.num_bytes * 8 
```

引用[维基百科](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)：

> [...] n 用作公钥和私钥的模数。它的长度，通常以位表示，是密钥长度。[...]

# javascript - jQuery自定义内容滚动器：触摸可滚动区域时无法在ipad上滑动

> ID：13747215
> 
> 赞同：3
> 
> 时间：2012-12-06T15:43:44.170
> 
> 标签：javascript, jquery, css, scroll, swipe

[我在使用jQuery 自定义内容滚动器插件](http://manos.malihu.gr/jquery-custom-content-scroller/)时遇到了问题。

当我的焦点位于可滚动文本区域上方时，我需要能够水平滚动。使用标准滚动条没有问题，但是在我集成了自定义滚动插件之后，我就不能再这样做了。我怎样才能解决这个问题？

请自己尝试：http: [//mestermichael.magnetix.dk/custom-scroll/](http://mestermichael.magnetix.dk/custom-scroll/)

[插件站点： http](http://manos.malihu.gr/jquery-custom-content-scroller/) ://manos.malihu.gr/jquery-custom-content-scroller/

**HTML**

```
<!DOCTYPE HTML>
<html>
  <head>
    <!-- Custom scrollbars CSS -->
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link href="jquery.mCustomScrollbar.css" rel="stylesheet" type="text/css" />
  </head>
  <body>

  <div class="wrapper"> 

    <div class="header"></div>

    <div class="content-wrap">
        <div class="content">
    <div class="txt-box">
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    </div>

    <div class="txt-box">
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    </div>

    <div class="txt-box">
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    </div>

        <div class="txt-box">
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    </div>

        <div class="txt-box">
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    </div>

        <div class="txt-box">
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    </div>

        <div class="txt-box">
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    </div>

    <div class="txt-box">
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    </div>

    <div class="txt-box">
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    </div>

    </div>
    </div>

    <div class="footer">
    </div>

    </div>

    <script src="jquery-1.8.3.min.js"></script>
    <script src="jquery-ui-1.9.1.custom.min.js"></script>
    <script src="jquery.mousewheel.min.js"></script>
    <script src="jquery.mCustomScrollbar.js"></script>
    <script src="mysite.js"></script>
  </body>
</html> 
```

**JQUERY**只是调用插件

```
(function($){
            $(window).load(function(){
                /* custom scrollbar fn call */
                $(".txt-box").mCustomScrollbar({
                    scrollButtons:{
                        enable:true
                    }
                });
        })(jQuery); 
```

**CSS**

```
body {background-color: #FFFFFF;
    font-family: 'Klavika' !important;
    font-size: 12pt;
    margin: 0;
    padding: 0;
}
body, html {
    height: 100%;
}
.wrapper {width:100%; height:auto;}
.header {width:100%; height:100px; background-color:#dedede;}
.content-wrap {background-color: orange;
    bottom: 60px;
    display: block;
    overflow-x: scroll;
    overflow-y: hidden;
    position: absolute;
    top: 60px;
    width: 100%;}
    .content {width:10000px; float:left;
}
.txt-box {width:250px; height:250px; overflow:auto; float:left; margin:20px;
}
.footer {background-color: gray;
    bottom: 0;
    display: block;
    height: 60px;
    position: absolute;
    width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T23:27:10.790

您正在使用的自定义滚动条插件处理该`scroll`事件。[`preventDefault()`](https://developer.mozilla.org/en/docs/DOM/event.preventDefault)它通过调用事件处理程序来防止事件冒泡。

这意味着父 div（水平滚动）永远没有机会响应您的水平滚动。

这似乎是库的预期行为（与[嵌套可滚动区域的演示实现](http://manos.malihu.gr/tuts/custom-scrollbar-plugin/nested_scrollbars_demo.html)相比）

您要么需要修改插件以允许事件冒泡，选择另一个插件，要么放弃自定义滚动条的想法并允许浏览器的默认滚动条完成它们的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-21T21:09:03.243

在插件版本 3.0.5 中，这是固定的，即当您在具有水平滚动条的元素上垂直滑动时，它不会阻止页面滚动（反之亦然）。它也不会阻止两指缩放。

# php - 如何在 Zend Framework 2 中使用 tableGateway 进行 MATCH AGAINST？

> ID：13747217
> 
> 赞同：2
> 
> 时间：2012-12-06T15:43:47.883
> 
> 标签：php, zend-framework2

我需要像在 ZF2 框架应用程序中一样使用 tableGateway 在 ZF2 应用程序中执行 [MATCH (title, description) AGAINST ('text')]。

尝试使用 \Zend\Db\Sql\Where 时，我寄予厚望，但找不到任何方法。关于如何做到这一点的任何建议或例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:46:16.437

我对 stackoverflow 的第一个贡献。

您可以在 ZF2 TableGateway 中这样做：

```
$rowSet = $this->someTableGateway->select(function (Select $select) {
      $select->columns(array(new \Zend\Db\Sql\Expression("MATCH(column) AGAINST('Query') AS score")))
             ->where("MATCH(column) AGAINST('\"Query\"' in boolean mode)")
             ->order('score DESC');
    });

var_dump($rowSet->toArray()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T06:11:14.487

我也没有找到任何使用 MATCH AGAINST 的方法，所以我想你可以使用 LIKE 代替：

```
$rowset = $someTable->select(function (Select $select) {
     $select->where->like('CONCAT(title, description)', '%text%');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T09:50:44.970

似乎没有办法使用 tableGateway 进行 MATCH AGAINST。唯一的解决方案是使用“默认”方式使用 \Zend\Db\Adapter\Adapter -> query($qry)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-20T09:20:24.627

这个怎么样？

```
$db->select()->from('your_table')
    ->where('MATCH (`title, description`) AGAINST (?)', $text) 
```

它也可以在布尔模式下工作：

```
$db->select()->from('your_table')
    ->where('MATCH (`title, description`) AGAINST (? IN BOOLEAN MODE)', $text) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-22T22:59:32.343

这对我有用。

```
$select->where("MATCH(title, description) AGAINST ('{$text}' IN NATURAL LANGUAGE MODE)"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-30T15:33:08.750

您应该使用 Zend\Db\Sql\Where (Predicate/PredicateSet) API 中的表达式($expression, $parameters)。

[https://framework.zend.com/manual/2.2/en/modules/zend.db.sql.html#expression-expression-parameter](https://framework.zend.com/manual/2.2/en/modules/zend.db.sql.html#expression-expression-parameter)

举个例子 ：

```
 $select->where->expression(" MATCH(title, description) AGAINST( ? ))", $text); 
```

# ruby-on-rails - 使用“资源”关键字制作哪些路线？

> ID：13747219
> 
> 赞同：0
> 
> 时间：2012-12-06T15:43:52.407
> 
> 标签：ruby-on-rails, routes

为一个类制作一个 ruby​​ on rails 应用程序，我们不允许使用 resources 关键字，所以我的路由文件如下所示：

```
School::Application.routes.draw do
  # Routes for departments
  get "depts", :to=>"depts#index"
  get "depts/new", :to=>"depts#new"                                              
  post "depts", :to=>"depts#create"
  get "depts/:id", :to=>"depts#show"
  get "depts/:id/edit", :to=>"depts#edit"
  put "depts/:id", :to=>"depts#update"
  delete "depts/:id", :to=>"depts#destroy"
end 
```

当我尝试进入编辑页面时出现问题，这是因为我不知道路线的正确 ':as' 字段并且似乎无法在任何地方找到它们。如果我使用以下行，有人可以告诉我他们会是什么吗？

```
resource :depts 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:45:18.533

您可以阅读**有关路由的指南**：

[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

如果你很懒，ctrl+F "resources :photos"

**`:as`更新：对于关键字`resources`**

[http://guides.rubyonrails.org/routing.html#nested-names](http://guides.rubyonrails.org/routing.html#nested-names)

或者

[http://guides.rubyonrails.org/routing.html#overriding-the-named-helpers](http://guides.rubyonrails.org/routing.html#overriding-the-named-helpers)

**更好：使用`:as`自定义操作**

[http://guides.rubyonrails.org/routing.html#naming-routes](http://guides.rubyonrails.org/routing.html#naming-routes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:48:21.507

此外，您可以使用以下命令了解路线的情况

```
 rake routes 
```

它列出了所有使用 http 方法配置的路由

# c# - 需要 NHibernate 非常快速的集合访问

> ID：13747221
> 
> 赞同：0
> 
> 时间：2012-12-06T15:43:58.430
> 
> 标签：c#, performance, nhibernate

我有一个主用户表，当通过 NHibernate 映射时，它会构建大量关联数据，其中包含我很少需要的完整用户详细信息，因此不要总是加载它。我有一个名为 UserLight 的部分表，它只包含非常基本的信息，并且没有分层连接或集合，因为我多次需要快速访问基本信息。

但我的问题是除此之外，这只是背景。

我的网站涉及从大量用户群中搜索其他用户，我想提供从搜索中删除人员的功能，即您单击用户个人资料上的 X 并将他们添加到将不会出现在未来搜索中的删除列表中。

我创建了一个名为 UserSearchRemoval 的单独表和对象映射，其中只有 UserId、RemovedId 作为数据列。

我试图从代码中找出处理这个问题的最佳方法，因为我希望响应度很高。我想 GUI 明智的最佳方式是在 Web 端调用 Ajax 查询，该查询调用 Web 服务，传入两个用户 ID，然后在数据库级别完成工作。

我不确定的是在数据库级别执行此操作的最佳方法。在基本层面上，我可以检查搜索删除是否已经存在（需要时间），如果不存在，添加它，或者我可以在没有检查的情况下添加它，并冒着重复的风险，我想这不会是一个问题，只是不是最干净的解决方案。因此，仅添加它似乎是最快的方法。

是否有另一种方法可以通过维护用户删除的会话级别列表并添加到该列表并让 NHibernate 完成剩下的工作来做到这一点？在我看来，通过在会话级别保存大量数据以及在内存中更新集合并将其传输到 db 对象的工作听起来很糟糕，这听起来比仅向 DB 添加一行要慢得多。

谁能想到更好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:24:07.547

答案取决于您的用户数据库、平均搜索结果和平均阻止列表的相对大小。它还取决于阻塞规则在未来可能不会变得更复杂的方式，从而可以安全地将它们包含在数据库级别。

假设您的用户数据库是 500 000 个用户，您的平均搜索结果是 500，平均阻止列表是 100，并且规则可能会发展，我会选择基于字典的搜索后应用程序级过滤。

# html - 在画布中绘制光线

> ID：13747223
> 
> 赞同：2
> 
> 时间：2012-12-06T15:44:08.460
> 
> 标签：html, html5-canvas, gradient

有人帮我画这样的光线：

![示例图片](../Images/88ffddbb0b3849f8975d9e66f48ebab4.png)

我已经尝试了很多次，但不能。无需完美匹配颜色，至少基本线条和渐变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T17:21:28.853

[http://jsbin.com/uhuwud/1/edit](http://jsbin.com/uhuwud/1/edit)

```
(function(){
    var can = document.getElementById("lightray"),
        ctx = can.getContext('2d'),
        wid = can.width,
        hei = can.height,
        ang = -90 * Math.PI/180,
        spn = 80 * Math.PI/180,
        ctr = {x: 200, y:200},
        rad = 200,
        grd = ctx.createRadialGradient(ctr.x, ctr.y, 0, ctr.x, ctr.y, rad);

    grd.addColorStop(0, 'rgba(0,200,255,.25)');
    grd.addColorStop(0.75, 'rgba(0,0,0,0.25)');
    grd.addColorStop(1, 'rgba(0,0,0,0)');
    ctx.fillStyle = grd;

  (function draw(){
    ctx.clearRect(0,0,wid,hei);
    ang = Math.sin(new Date()/1000) * Math.PI/2;
    spn = (Math.abs(Math.sin(new Date()/1000/3)) * 120 + 30) * Math.PI/180;

// The below code is the pertinent part
// the concept is that I'm drawing a radial gradient in an arc, and decreasing the span
// of the arc some number of times. This will create the side-to-side fading. 
    for (var i = 2; i < 10; i+=0.1){
      ctx.beginPath();
      ctx.moveTo(ctr.x,ctr.y);
      ctx.arc(ctr.x, ctr.y, rad, ang - spn/i, ang + spn/i, false);
      ctx.closePath();
      ctx.fill();
    }
// the above code

    webkitRequestAnimationFrame(draw);
  })();
})(); 
```

# spring-mvc - A/B，使用 spring MVC 进行多变量测试

> ID：13747227
> 
> 赞同：8
> 
> 时间：2012-12-06T15:44:23.720
> 
> 标签：spring-mvc, ab-testing

我想在现有电子商务网站中开始 A/B 测试和/或多变量测试体验。这个网站严重依赖普通的 Spring + Spring MVC。

许多分析产品（如 Google Content Experiments）处理统计数据收集 + 变体选择；您基本上必须为每个变体创建一个 URL（并在 GCE 中配置每个 URL）。

可以使用：

*   [HandlerInterceptors](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)在运行时选择 Handler
*   [主题解析器](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-themeresolver)在运行时选择 CSS/静态资源

这些技术是否与此用例匹配？

你有使用 Spring MVC 进行 A/B 测试或多变量测试的经验吗？

或者你认为这些特性应该由一个特定的 JavaScript 框架来处理，比如[群组](https://github.com/jamesyu/cohorts)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:35:58.677

[在使用Omniture](http://www.omniture.com/en/products/online-business-optimisation)时，我有处理多变量和 a/b 测试的经验。您几乎可以肯定自己可以完成这些测试套件所做的所有事情，但是您必须构建大量基础设施来容纳变体**并**整理相关数据**，并**以有意义的方式将其显示给感兴趣的人。鉴于这些类型的测试套件中的任何一种都带有大量选项，您自己复制这种类型的功能可能需要大量时间。

如果您有预算，我建议您使用专门从事此类工作的众多工具之一。当然，如果您没有预算但有时间，我可以看到自己在哪里构建它会很有趣......

我不确定这不仅仅是我的意见有多少“答案”。

# filter - opencart如何按属性过滤产品

> ID：13747231
> 
> 赞同：0
> 
> 时间：2012-12-06T15:44:28.750
> 
> 标签：filter, opencart, product

我正在创建在线电子商店，在这里我使用了很多属性。我正在尝试使用这些属性过滤产品。我真的不知道从哪里开始？

请分享你的想法来解决这个问题。

# objective-c - 使用 NSTask 和 NSPipe 会导致 100% 的 CPU 使用率

> ID：13747232
> 
> 赞同：7
> 
> 时间：2012-12-06T15:44:33.313
> 
> 标签：objective-c, macos, cocoa, nstask, nspipe

我正在尝试使用 NSTask 运行一个简单的 bash 脚本并将输出定向到文本视图。执行任务后，我的应用程序的 CPU 使用率为 100%，即使它很简单`echo`（目前）。

我创建了一个全新的项目来隔离问题：

```
@interface AppDelegate ()
@property (nonatomic) NSTask *task;
@property (nonatomic) NSPipe *pipe;
@end

@implementation AppDelegate
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    self.pipe = [NSPipe pipe];
    self.pipe.fileHandleForReading.readabilityHandler = ^(NSFileHandle *h) {
        NSLog(@"Read: %@", [h readDataToEndOfFile]);
    };

    self.task = [[NSTask alloc] init];
    self.task.launchPath = @"/bin/bash";
    self.task.arguments = @[@"-c", @"echo test"];
    self.task.standardOutput = self.pipe;
    [self.task launch];
}
@end 
```

它被正确执行并且输出（作为一个`NSData`）被记录为`NSLog`：

```
PipeTest[3933:2623] Read: <74657374 0a> 
```

但是，在我终止我的应用程序之前，CPU 使用率保持在 100%。

**编辑：**

Time Profiler 测试返回下面的列表，但我不确定如何解释。

![在此处输入图像描述](../Images/d9267fb8b29097a88ccf1b7afb82f3eb.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T17:09:47.487

文件句柄保持打开状态？

```
@interface AppDelegate ()
@property (nonatomic) NSTask *task;
@property (nonatomic) NSPipe *pipe;
@end

@implementation AppDelegate
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    self.pipe = [NSPipe pipe];
    self.pipe.fileHandleForReading.readabilityHandler = ^(NSFileHandle *h) {
        NSLog(@"Read: %@", [h readDataToEndOfFile]);
        [h closeFile];
    };

    self.task = [[NSTask alloc] init];
    self.task.launchPath = @"/bin/bash";
    self.task.arguments = @[@"-c", @"echo test"];
    self.task.standardOutput = self.pipe;
    [self.task launch];
} 
```

关闭文件`NSFileHandle` `h`似乎会使您的 CPU 使用率恢复正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-04T02:11:55.987

如果应用程序写入的内容超过 NSFileHandle 的实现缓冲区（我在 El Capitan 上观察到的 4K），则建议的代码将不起作用。[h readDataToEndOfFile] 倾向于一次读取 4K，因此此示例可能会过早关闭缓冲区。对于您的处理程序，一种更强大且同样未记录的方法是：

```
NSData *data = [h readDataToEndOfFile];
if (data.length) {
  NSLog(@"Read: %@", data);
} else {
  [h closeFile];
} 
```

# java - 如何在其容器中调试 Java EE 应用程序？

> ID：13747237
> 
> 赞同：0
> 
> 时间：2012-12-06T15:44:43.810
> 
> 标签：java, debugging, jakarta-ee, jonas

我的 Java EE 应用程序中的一件事有一个非常困难的问题。

我使用 JoNaS 作为我的应用程序容器，我的问题与其中的同步密切相关。是否可以在其容器中调试应用程序？我应该如何组织我的项目来实现这一点（例如，将 JoNaS 源放在哪里）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:47:48.567

调试这将有几个组件。

我的第一个建议是你使用一个好的 IDE，比如 IntelliJ，来附加到你的应用程序并在其中设置断点。

我的第二个建议是下载最新版本的 Visual VM，安装所有插件，并在运行应用程序时将其指向您的 JVM。它会显示堆、线程、CPU 等。

我的第三个建议是对死锁进行线程转储并学习如何解释它们。

祝你好运 - 线程问题具有挑战性。

# mysql - MySql 创建几个具有相同结构的表

> ID：13747240
> 
> 赞同：2
> 
> 时间：2012-12-06T15:44:49.043
> 
> 标签：mysql, sql

我必须创建 8 个具有完全相同结构的表。最简单的方法是复制粘贴代码并为表应用不同的名称。我想变得很酷，用一个周期创造它们。我怎样才能使那个循环以及应用不同名称的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T15:53:26.910

创建具有重复结构的表的最快方法如下：

```
CREATE TABLE tb1
(
    id int not null auto_increment,
    ...,
    primary key (id)
);
create table tb2 like tb1;
create table tb3 like tb1;
create table tb4 like tb1;
...
create table tb8 like tb1; 
```

这会复制表结构和相应的索引。

如果您需要制作没有索引的表，这对您来说可能没问题

```
CREATE TABLE tb1
(
    id int not null auto_increment,
    ...,
    primary key (id)
);
CREATE TABLE tb2 AS SELECT * FROM tb1 WHERE 1=2; 
```

根据列定义，这可能有效，也可能无效。

# 警告

这不能用于具有外键约束的表。这将分阶段进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:53:45.677

我相信 MySQL 的语法是

```
CREATE TABLE <tablename> LIKE <extant table name>; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T15:51:43.640

```
CREATE TABLE A (
  a INTEGER;
  b INTEGER;
);

CREATE TABLE B AS A; --WITH DATA added to end will copy both ddl and data. 
CREATE TABLE C AS A;
CREATE TABLE D AS A;
CREATE TABLE E AS A;
CREATE TABLE F AS A;
CREATE TABLE G AS A;
CREATE TABLE H AS A; 
```

尽管我怀疑您是否在这里遇到 XY 问题。可以更紧凑地实现具有相同结构的 8 个表，并且在一个结构中，DBMS 将能够更好地管理 1 个表和一个额外的指标 attr 以确定当前行属于 8 个中的哪一个。

```
CREATE TABLE A (
  a INTEGER;
  b INTEGER;
  table_num INTEGER CHECK ( table_num >= 0 && table_num <= 7 ); 
)Primary Index(a,b,table_num)
Index(table_num); 
```

另外我不太了解sql-server，所以所有这些语句可能需要针对方言进行调整，我不确定......但总体思路应该是一样的。

# asp.net - 在 ASP.Net 中使用模拟

> ID：13747242
> 
> 赞同：1
> 
> 时间：2012-12-06T15:44:51.253
> 
> 标签：asp.net, vb.net

任何人都可以向我解释如何

```
 <identity impersonate="true" /> 
```

作品？我创建了一个 Web 应用程序，它有一个对话框，允许用户查看服务器上的文件夹。它通过使用更新面板并刷新对话框树视图来工作。本质上，它所做的是获取父节点（它具有服务器文件夹的路径）并使用 DirectoryInfo 获取其所有子节点。然后，当用户点击一个孩子时，它的所有孩子都会刷新。但是，问题来了。如果我有这样的路径：

\我的服务器\

用户可以导航到

\myServer\someFolder\

然后

\myServer\someFolder\sharedFolderOnAnotherServer\

然后

\myServer\someFolder\sharedFolderOnAnotherServer\anotherFolder\

一切都很好。但是，如果我从

\myServer\someFolder\sharedFolderOnAnotherServer\

并尝试移动到一个孩子，我得到这个错误：

“使用的帐户是计算机帐户。使用您的全局用户帐户或本地用户帐户访问此服务器。”

如路径所示，“sharedFolderOnAnotherServer”文件夹实际上是另一个服务器上共享文件夹的快捷方式。如果我从根目录开始，然后进入最终文件夹，就好像我的第一台服务器的权限被转移到第二台服务器，一切都很好。但是，如果我跳过第一台服务器，直接进入第二台服务器，我就不会继承我的权限。如果我在 web.config 文件中使用模拟标记，它可以正常工作，但会导致获取当前登录用户和使用活动目录的其他问题。谁能解释为什么我不能直接跳到： \myServer\someFolder\sharedFolderOnAnotherServer\anotherFolder\ 路径而不从头开始以及模拟做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:49:37.503

在没有模拟的情况下，Web 服务器使用运行它的应用程序池的身份访问资源。当您使用模拟时，Web 服务器使用经过身份验证的用户（即您的最终用户）的身份访问资源。换句话说，您的 Web 服务器进程“模拟”了您的最终用户。

Impersonate=true 使 Web 服务器模拟整个请求的最终用户。如果您需要更细粒度的控制，另一种选择是在代码中使用模拟：

```
//Request uses application pool identity out here.
WindowsIdentity identity = (WindowsIdentity)HttpContext.Current.User.Identity;
if(identity != null)
{
    using(identity.Impersonate())
    {
        //Request uses end user identity to access resources here
    }
    //back to using application pool resources.
} 
```

这假定您正在使用 Windows 身份验证或将 HttpContext.Current.User 设置为 WindowsPrincipal 的某种其他形式的身份验证。

# c# - 锁定数据库记录的插入只发生一次

> ID：13747243
> 
> 赞同：0
> 
> 时间：2012-12-06T15:44:52.803
> 
> 标签：c#, locking, mutex

我是 C# 新手，有一个问题：

我有一个`.aspx`接受参数的页面`eventId`。

在第一次使用特定请求此页面时`eventId`，我需要在数据库中插入一些对该事件唯一的行。

使用 that 请求页面的所有其他时间`eventId`，都不应插入任何行。

我可以查询数据库以查看该事件是否已经存在这些行，但这不会防止并发问题。

假设有 2 个客户`eventId = 7`同时请求该页面 - 该事件的行可能会被插入两次。

如何使用互斥锁/锁定/监视器或其他任何东西来避免这种情况？

我需要通过字符串识别锁定机制 - 事件 ID

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:50:24.900

在您的数据库中创建一个基于事件 ID 的唯一索引。在您的 asp 页面上始终插入并处理插入失败的情况。如果插入失败，则事件 ID 已被其他人使用。在这个设计中，数据库进行同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:04:05.570

“如果事件 id 已经存在则读取”和“插入该事件 id”方法应该在事务中运行。如果您使用 TransactionScope，您可以将隔离级别设置为 Serializable，这将确保您永远不会在数据库级别进行并发访问，因此您可以防止插入两次事件。

但是，我还会在数据库中的该字段上添加一个唯一键索引，就像 opi 建议的那样。

# c# - 如果日期为 24:00，我该如何管理？

> ID：13747244
> 
> 赞同：3
> 
> 时间：2012-12-06T15:44:56.963
> 
> 标签：c#, .net, date

我有一些来自 XML 文档的数据，例如 2012-12-06T24:00。

问题是当我尝试转换它时：24:00 不存在。所以 ：

```
DateTime.Parse(myDateTimeString).Hour 
```

给我这个例外：`System.FormatException: The DateTime represented by the string is not supported in calendar System.Globalization.GregorianCalendar.`

我该如何解决？

我想到的解决方案是用T00替换（字符串）T24，这看起来很可怕......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T15:49:06.733

`DateTime`不能处理这个。您必须在调用和处理溢出之前“清理”您的字符串`Parse`（取决于“24:00”的实际含义）：

```
DateTime date = DateTime.Parse(myDateTimeString.Replace("T24:00", "T00:00"));

if (myDateTimeString.Contains("T24:00"))
{
    date = date.AddDays(1);
} 
```

**编辑**：添加了“溢出”部分。

# php - .htaccess - 试图不重写一个文件

> ID：13747245
> 
> 赞同：1
> 
> 时间：2012-12-06T15:45:08.307
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我已经阅读了一些 .htaccess 教程，但无法弄清楚这个简单的任务。我有一个通常将每个请求路由到 index.php 的站点。但是我有一个特定的文件（upload_photo.php），我希望它简单地执行而不重新路由到 index.php。下面是我的 htacess 文件，其中包含一个 upload_photo.php 条目，它搞砸了一切。我究竟做错了什么？

```
# AddType x-mapp-php5 .php
# AddHandler x-mapp-php5 .php

RewriteEngine on
Options +FollowSymlinks
#Options +SymLinksIfOwnerMatch

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule upload_photo.php upload_photo.php [L]
RewriteRule . index.php [L]

ErrorDocument 404 /page-unavailable/

<files ~ "\.tpl$">
order deny,allow
allow from none
deny from all
</files> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T15:48:30.023

```
RewriteRule upload_photo\.php - [L] 
```

`-`意思是“不要重写”，`L`当此规则匹配时停止处理其他规则。把它放在一般重写规则之前。

在您的情况下，它搞砸了，因为`RewriteCond`s 一次只适用于一个`RewriteRule`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:53:05.803

你原来的重写：

```
RewriteEngine on
Options +FollowSymlinks
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L] 
```

做这样的事情：

配置：

```
RewriteEngine on
Options +FollowSymlinks 
```

如果请求的路径不是文件

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

如果请求的路径不是目录

```
RewriteCond %{REQUEST_FILENAME} !-d 
```

然后重写为 index.php

```
RewriteRule . index.php [L] 
```

因此，如果您的文件`upload_photo.php`确实存在于相同的目录中，`index.php`则无需更改原始重写。正确的文件 .php 将被自动引用，因为只有在请求的资源（文件或目录）不存在时才会执行对 index.php 的重写。

所以不需要添加这个：

```
RewriteRule upload_photo.php upload_photo.php [L] 
```

# watin - 有没有办法防止 WatIn 超时？

> ID：13747246
> 
> 赞同：3
> 
> 时间：2012-12-06T15:45:09.350
> 
> 标签：watin

由于未知原因，登录应用程序所需的时间显着增加。这通常不是问题。但是，我所做的一切似乎都无法阻止 Watin 超时。

单击“登录”按钮后，最多可能需要 1 分钟才能显示主页。我尝试了一些方法，例如：

ieInUse.Button(Find.ByValue("Log On")).Click();

ieInUse.WaitUntilContainsText("主页上的文字");

或类似...

ieInUse.Button(Find.ByValue("Log On")).Click();

即InUse.WaitForComplete(100000);

但是测试仍然失败并出现错误：

WatiN.Core.Exceptions.TimeoutException ：等待文档状态完成时超时。最后一个状态是“加载”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T21:01:49.520

在初始化 ie 对象之前，使用这个 watin 设置来增加超时。

```
 Settings.AttachToBrowserTimeOut = 240; //240 seconds
   Settings.WaitUntilExistsTimeOut = 240;
   Settings.WaitForCompleteTimeOut = 240; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T13:31:19.790

我肯定迟到了，但我问自己同样的问题，并在 Watin 2.0 发行说明中找到了答案：

> 以前版本的 WatiN 会等到 IE 和 DOM 文档进入“就绪”状态。例如，越来越多的网站由于不断加载而从未达到这种状态。现在，WatiN 将等待 IE 和 DOM 文档进入“交互式”或“就绪”状态，以避免不必要的超时，并提高响应速度。

[http://watin.org/documentation/release-2-0-50-11579/](http://watin.org/documentation/release-2-0-50-11579/)

所以检查你正在使用的版本。希望这可以帮助某人。

# .net - 如何使用 net.tcp 绑定保护 WCF 通信

> ID：13747247
> 
> 赞同：5
> 
> 时间：2012-12-06T15:45:11.850
> 
> 标签：.net, wcf, security, distributed, net.tcp

如何在两个 C# 应用程序之间使用 net.tcp 绑定保护 WCF 通信？我遇到了传输和消息安全问题，但是有没有可以使用其中之一的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T15:50:42.440

看看[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms733089.aspx)。

客户端经过身份验证，并且使用 Windows 身份验证保护消息。

# php - 如何使用 PHP 解释 HTML5 输入日期值

> ID：13747254
> 
> 赞同：5
> 
> 时间：2012-12-06T15:45:27.697
> 
> 标签：php, html, input

我需要让用户选择一个日期（最好采用 dd/mm/yy 格式），然后我决定尝试新的 HTML5 输入日期类型。但是我不知道如何解释它在服务器端给出的值。我得到的值是 yyyy-mm-dd。我怎样才能做到这一点？

如果用户使用不支持它的旧浏览器怎么办，他们将如何输入日期？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T15:48:09.927

1.  只需使用 PHP 的日期功能 ( [`date()`](http://us3.php.net/manual/en/function.date.php),[`DateTime`](http://us3.php.net/manual/en/book.datetime.php)等)转换日期

    `$datetime = new DateTime('2012-12-06');`

    `$new_date = $datetime->format('d/m/Y');`

2.  他们将看到一个纯文本字段。您可以确保他们输入验证日期。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T15:53:18.547

您可以像这样使用转换日期格式`date()`，

```
 $new_date = date('d/m/y', strtotime($_POST['date'])); 
```

[演示](http://codepad.org/yJK7R9D7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T15:59:52.227

如果用户的浏览器不支持它，浏览器只会显示一个常规的文本输入框，用户可以在其中输入他们喜欢的任何内容。

因此，您需要能够处理输入的任意数据。但这无论如何都适用，因为您永远不应该相信来自浏览器的用户输入。

如果您希望所有用户都拥有一个不错的日期控件，您可以使用 jQuery datepicker 或类似工具来为没有它的浏览器回填该功能。

至于`yyyy-mm-dd`当你得到它时如何处理它 - 只需使用`DateTime()`该类将其转换为 PHP DateTime 对象。简单的：

```
$dateObj = new DateTime($_GET['mydate']);  //or whatever your input field is called. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T15:48:18.200

您可以将其作为普通输入检索。然后，您可以将其无缝转换为带有`date()`. 这整个只是浏览器的增强，所有服务器端都没有任何变化。如果浏览器较旧，则浏览器会将其设为正常的文本输入，但您仍然不会看到任何区别。干杯，博扬

# c# - 达到特定财务价值时在列表中查找项目

> ID：13747256
> 
> 赞同：0
> 
> 时间：2012-12-06T15:45:31.753
> 
> 标签：c#, linq, list, lambda

我有一个销售清单。

我还有一个十进制的财务里程碑列表，例如 100 美元、250 美元、500 美元等。

我试图找到产品达到这些里程碑的时间点。我在下面要做的是将我已经检索到的 productSales 列表放入我可以使用的结构中（实际查询执行货币转换等。我只是想让这个问题保持简单），所以对于每个里程碑，我将其转换为此 BusinessPlanningElement 列表并按 DateSold 分组。

然后我按 DateSold 排序，我的想法是检索第一个等于或大于十进制里程碑变量的元素。然后我继续获取日期，并发现 DateSold 和产品提交到系统的日期之间的差异。

```
foreach (decimal milestone in milestones)
{
    List<BusinessPlanningElement> MileStoneSales = (from sale in productSales
                      group sale by sale.DateSold into ds
                      select new BusinessPlanningElements
                      {
                          DateSold = ds.Key,
                          TotalSales = ds.Sum(it => it.TotalProductCut.HasValue ? it.TotalProductCut.Value : 0),
                      }).OrderBy(s => s.DateSold).ToList();

    BusinessPlanningElement bpe = MileStoneSales.Where(mss => mss.TotalSales >= milestone)
                                                .FirstOrDefault();

    if (bpe != null)
    {
        DateTime DateReached = bpe.DateSold;
        TimeSpan ts = DateReached - product.DateTimeSubmitted.Value;
        int NumberOfDays = ts.Days;

        //Output NumberOfDays
    }
    else
    {
        //Do Something Else
    }

} 
```

如果我调试通过，我可以看到列表，并看到列表中应从此查询中检索的项目：

```
BusinessPlanningElement bpe = MileStoneSales.Where(mss => mss.TotalSales >= milestone)
                                            .FirstOrDefault(); 
```

然而，它似乎忽略了它，并返回一个空值给我。

有谁知道如何构造我的查询以检索列表中 TotalSales 等于或大于十进制里程碑的第一个元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T16:09:12.617

尝试使用[`.SkipWhile()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.skipwhile.aspx).

```
List<BusinessPlanningElement> MileStoneSales = (from sale in productSales
                  group sale by sale.DateSold into ds
                  select new BusinessPlanningElements
                  {
                      DateSold = ds.Key,
                      TotalSales = ds.Sum(it => it.TotalProductCut.HasValue ? it.TotalProductCut.Value : 0),
                  }).OrderBy(s => s.DateSold).ToList();

decimal accumulatedSales = 0;
BusinessPlanningElement bpe = MileStoneSales
                                .SkipWhile(mss => {
                                        accumulatedSales += mss.TotalSales;
                                        return accumulatedSales < milestone;
                                 })
                                .FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:31:38.963

我冒昧地在这里重构了你的代码。如所写，您将重新计算每个里程碑的总计，但更有意义的是只计算一次运行总计，然后检查它们以找到每个里程碑。我相信这可行，但当然请测试它。

```
//Order the sales info by date. If it's already ordered then remove this.
productSales = productSales.OrderBy(ps => ps.DateSold).ToList();

//Compute a list of dates, with total sales up to that date
decimal runningTotal = 0m;
var salesRunningTotals = (from sale in productSales
                            select new
                            {
                                DateSold = sale.DateSold,
                                TotalSalesToDate = (runningTotal += (sale.TotalProductCut ?? 0))
                            })
                            .ToList(); 

foreach (decimal milestone in milestones)
{
    //Find the date we reached that milestone
    //If you're going to have a *lot* of dates you could remember the index of the last milestone
    //and start looking for the next one at that index
    var dateReached = (from rt in salesRunningTotals
                        where rt.TotalSalesToDate >= milestone
                        select rt.DateSold).FirstOrDefault();

    if (dateReached != null)
    {
        var bpe = productSales.Where(ps => ps.DateSold == dateReached).FirstOrDefault();

        if (bpe != null)
        {
            DateTime DateReached = bpe.DateSold;
            TimeSpan ts = DateReached - bpe.DateTimeSubmitted.Value;
            int NumberOfDays = ts.Days;

            //Output NumberOfDays
        }
        else
        {
            //Do Something Else
        }
    } 
} 
```

另一个可能的改进——如果你还没有达到一个特定的里程碑（比如，100），那么你显然还没有达到更高的里程碑。您可以记住这一点并跳过对未来循环迭代的搜索。

# javascript - 在javascript中递增到下一个ID

> ID：13747260
> 
> 赞同：0
> 
> 时间：2012-12-06T15:45:42.083
> 
> 标签：javascript, jquery

我点击了一张图片，它会将我带到一个页面，其中包含一些信息和两个按钮，它们是上一个和下一个。

我的代码不断回到同一张幻灯片。每次单击下一个按钮或单击上一个按钮时如何增加我的“id”属性以在我的 id 属性上添加 +1 或 -1？

这是我的代码

```
 $(".portfolioLink").click(function(){

        // Hide slide and portfolio piece info
        $(".inner-content.portfolio").show();

        // Reset slides timer and pagination
        clearInterval($('#slides').data('interval'));
        $("ul.pagination li").removeClass("current");

        var slideID = $(this).parent().next().attr("id");

        $("#next").click(function() {
            slideswitch(slideID);
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:47:48.897

尝试

```
var slideID = $(this).parent().next().attr("id");
slideID = 1 + parseInt(slideID); 
```

如果 ID 包含一些文本（例如 id = "div1"），您可以编写 ID 号：

```
var slideID = $(this).attr("id").match(/\d+/); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:47:56.960

使用正则表达式将您的 id 的基本部分与数字部分分开。然后将数字部分解析为 int 并根据需要递增或递减它。然后将其连接回您的 id 的基本部分。

# html - HTML5 画布没有在 Firefox 中恢复旋转？

> ID：13747263
> 
> 赞同：3
> 
> 时间：2012-12-06T15:45:55.903
> 
> 标签：html, firefox, canvas

此代码在*Firefox* (17.0.1) 中无法正常工作。我希望每次我`drawLine`用相同的参数调用函数时，它都会在相同的位置写入行。在*Chrome*和*IE*中就是这种情况。但是在*Firefox*中，第二次运行它似乎继续从第一个绘制的地方开始旋转新线，给我两条线。如果有人能解释为什么它会这样，那就太好了。

吨

```
<!DOCTYPE HTML>
<html>
<head>
<script type="text/javascript">
function draw(){
  var canvas = document.getElementById('mycanvas');

  if (canvas.getContext){
    var ctx = canvas.getContext('2d');
    ctx.fillStyle = '#993333'       
    drawLine(ctx, 100,100,100,200);
    drawLine(ctx, 100,100,100,200);
  }

  function drawLine(context, x1, y1, x2, y2) {
    context.save();
    context.translate(x1, y1);
    context.moveTo(0, 0);
    context.rotate(1);
    context.lineTo(x2,y2);
    context.stroke();
    context.restore();
  }

}
</script>
</head>
<body onload="draw();">
   <canvas id="mycanvas"></canvas>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:44:11.860

这应该解决它。

```
function drawLine(context, x1, y1, x2, y2) {
    context.save();
    context.translate(x1, y1);
    context.beginPath();       // <--- start a new path. If you don't do this, previous paths may get mixed in with the one you're currently drawing.
    context.moveTo(0, 0);
    context.rotate(1);
    context.lineTo(x2,y2);
    context.closePath();      // close that path. 
    context.stroke();
    context.restore();
} 
```

在这里演示：http: [//jsfiddle.net/kMPLQ/2/](http://jsfiddle.net/kMPLQ/2/)

# c# - 构建 XDocument 以正确格式化标签

> ID：13747274
> 
> 赞同：0
> 
> 时间：2012-12-06T15:46:31.783
> 
> 标签：c#, xml, xml-serialization, xml-formatting

我`XDocument`正在创建一个填充了一组数据的对象。

输出如下所示：

```
 <Results>
      <RuleResult>
        <Title> RuleTitle </Title>
      </RuleResult>
      <RuleResult>
        <Title> Rule2Title </Title>
      </RuleResult>
    </Results> 
```

现在我如何在 C# 中制定如下：

```
 XDocument doc = new XDocument(new XElement("Results"));
    foreach (AnalysisSet rules in allAnalysisSets)
     {
       foreach (var rule in rules.Rules)
        {
          doc.Root.Add(new XElement(rule.GetRuleState()));
        }
     } 
```

据我了解，这将创建`"Results"`为根级别节点。

我的问题是，如果我想设置它以便封装以上所有内容，`<AnalysisSets>`它会是：

```
 <AnalaysisSets>
      <AnalysisSet ProviderName="ProductNameHere">
        <Results>
          <....xml data..../>
        </Results>
      </AnalysisSet>
    </AnalysisSets> 
```

我该怎么做？似乎我会尝试创建一个 Root 元素，然后创建 2 个子根元素？如果这确实是正确的开始，我不太确定如何实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:25:53.300

您是否考虑过直接使用序列化？无论如何，这是我的完整模型。

编辑：我忘记了结果节点:-)

```
public class Program
{
    private static void Main(string[] args)
    {
        var allAnalysisSets = new AnalysisSet[] {
            new AnalysisSet(){
                ProviderName = "productname1",
                Rules = new Rule[]{
                new Rule(){ Title="rule1" }
            } },
            new AnalysisSet(){
                ProviderName = "productname2",
                Rules = new Rule[]{
                new Rule(){ Title="rule1" },
                new Rule(){ Title="rule2" }
            } }
        };

        var sb = new StringBuilder();
        using (var sw = new StringWriter(sb))
        using (var xw = XmlWriter.Create(sw, new XmlWriterSettings() { Indent = true }))
        {
            new XElement("AnalaysisSets"
                , allAnalysisSets
                    .Select(set => new XElement("AnalysisSet"
                            , new XAttribute("ProviderName", set.ProviderName)
                            , new XElement("Results"
                                , set.Rules.Select(rule => rule.GetRuleState())
                            )
                        )
                    )
            ).WriteTo(xw);
        }
        Console.Write(sb.ToString());
        Console.ReadLine();
    }
}

public class AnalysisSet
{
    public IEnumerable<Rule> Rules { get; set; }

    public string ProviderName { get; set; }
}

public class Rule
{
    public string Title { get; set; }

    public XStreamingElement GetRuleState()
    {
        return new XStreamingElement("RuleResult",
            new XElement("Title", Title));
    }
} 
```

# listener - 如何在 AIX 上找到 MQ 侦听器端口？

> ID：13747278
> 
> 赞同：1
> 
> 时间：2012-12-06T15:46:41.537
> 
> 标签：listener, ibm-mq

我已经创建了一个队列管理器 `crtmqm <Queue_manager_name>` ，然后使用它启动它 `strmqm <Queue_manager_name>` 我想查找此队列管理器在哪个端口上侦听？有什么命令可以看到吗？ `ps -ef|grep runmqlsr` 什么 `DISPLAY LSSTATUS(*)` 都不给。难道队列管理器没有监听任何端口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-28T00:03:55.097

我主要使用`MQSC`command `DISPLAY LSSTATUS(*) ALL`。它向我显示所有必要的详细信息以及端口号。

这里示例输出：

```
LISTENER(SYSTEM.LISTENER.TCP.1)         STATUS(RUNNING)
PID(15961)                              STARTDA(2014-02-04)
STARTTI(12.11.10)                       DESCR( )
TRPTYPE(TCP)                            CONTROL(MANUAL)
IPADDR(*)                               PORT(2011)
BACKLOG(100) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T05:08:09.380

启动队列管理器后，您需要创建一个侦听器。该`crtmqm`命令为所有支持的传输类型创建默认侦听器。建议您创建自己的侦听器。在 MQSC shell 中执行以下操作

```
DEF LISTENER(MYMQLISTENER)  TRPTYPE(TCP) +
    CONTROL(QMGR)            PORT(1414) +
    REPLACE

START LISTENER(MYMQLISTENER) 
```

上面的命令创建了一个名为`MYMQLISTENER`transport 的侦听器，并在端口 1414 上进行侦听。它 `CONTROL(QMGR)`指示队列管理器在队列管理器启动时启动侦听器，并在队列管理器关闭时停止它。该`START LISTENER`命令启动侦听器。您还可以使用`STOP LISTENER`MQSC 命令来停止侦听器。

创建并启动侦听器后，您可以发出 DISPLAY LSSTATUS 命令来显示侦听器状态。

# javascript - 使用 JavaScript 在 head 标签之间插入 html

> ID：13747280
> 
> 赞同：4
> 
> 时间：2012-12-06T15:46:47.803
> 
> 标签：javascript

在之前的任务中，我们研究了如何将代码插入到标签中并具有多个属性，以及在第一个标签（doctype）之前，但是如何在头标签之间插入代码，例如新的 CSS 样式表和 JavaScript 插入。

我确实在这里搜索并找到了一些相关的帖子，但没有任何有效的示例。

例如，如何仅使用 JavaScript 添加以下代码行...

```
<link rel="stylesheet" type="text/css" href="chrome.css" />
<script type="text/javascript" src="chrome.js"></script> 
```

下面的一个建议看起来很有希望，但是在测试时它实际上并没有起作用，例如......

```
var refScript = "<SCRIPT>alert('OK');</SCRIPT>";
document.getElementsByTagName("head")[0].innerHTML += refScript; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T15:49:53.777

假设你总是有一个`<head>`，你可以这样做：

```
document.getElementsByTagName("head")[0].innerHTML += "<whatever />"; 
```

当然，您也可以使用 DOM 模型而不是 innerHTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:24:14.543

以下是使用 DOM 方法的方法。

```
var scrp = document.createElement('script');
scrp.type = 'text/javascript';
// approach 1:
scrp.innerHTML = "alert('OK');";
// approach 2:
var txt = document.createTextNode("console.log('hi');");
scrp.appendChild(txt);
document.head.appendChild(scrp); 
```

# javascript - 匹配 Javascript 代码语句的结尾

> ID：13747281
> 
> 赞同：2
> 
> 时间：2012-12-06T15:46:48.600
> 
> 标签：javascript, regex

我想处理/解析和更改一些 Javascript 代码，如果可能的话，最好使用正则表达式（欢迎提出建议）。目的是在 JS 中的每个语句之后插入一个新的代码片段。

**例如：**

*原始的Javascript：*

```
while(true){

    Utils.log("hello world");
    Utils.sleep(1000);

} 
```

*我想插入的代码片段：*

```
checkPause(); 
```

*所以新代码看起来像这样：*

```
while(true){

    checkPause();
    Utils.log("hello world");
    checkPause();
    Utils.sleep(1000);
    checkPause();

}
checkPause(); 
```

上面的例子很简单，但真正的 JS 代码可能更复杂，甚至可以被缩小。代码也可能遗漏一些分号`;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:18:30.393

一种非常肮脏的方法是在每个左大括号、右大括号和分号之后插入您的代码段。像这样：

```
 code.replace(/\;/g, '; checkPause(); ').replace(/\{/g, '{ checkPause(); ').replace(/\}/g, '} checkPause(); ') 
```

正确的方法是使用解析器。

# javascript - 创建 HTML Javascript

> ID：13747283
> 
> 赞同：-1
> 
> 时间：2012-12-06T15:46:58.227
> 
> 标签：javascript, jquery

我在 javascript 中创建一个 html 字符串时遇到了一些问题。它将引号放在错误的位置，坦率地说，它看起来不像是一种非常优雅的方式。有没有更简洁的方法来创建下面的 html？有人可以拍摄一个例子吗？

```
 $(filterList).append('<li id=\'' + filterItemId  + '\'data-icon=\'delete\'><a onclick=' + '\'removeFilterItem(\'' + filterItemId + '\'' + ')\'>' + name + '</a></li>').listview('refresh'); 
```

我正在尝试制作一个看起来像..的html字符串（由上面的变量创建）

```
<li id="someId" data-icon="delete"><a onclick="removeFilterItem('someId')">Jack</a></li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:51:25.573

使用这两种类型的引号来构建字符串没有任何问题：

```
$(filterList).append("<li id='" + filterItemId  + "' data-icon='delete'><a onclick='removeFilterItem('" + filterItemId + "' \>" + name + "</a></li>").listview('refresh'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:52:42.430

您可以将双引号与单引号互换使用，以避免在其内部转义单引号。

```
$(filterList).append('<li id="' + filterItemId  + '"data-icon="delete"><a onclick="removeFilterItem(\'' + filterItemId + '\')">' + name + '</a></li>').listview('refresh'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T15:54:28.630

在 JavaScript 中，您可以使用单引号或双引号，在这种情况下，我通常会在字符串外部使用单引号，在字符串内部使用双引号。如果你发现你需要经常这样做，特别是如果 html 更复杂，你可能需要考虑使用某种 js 模板解决方案。

对于您的示例，以下内容应该有效

```
$(filterList).append('<li id="' + + filterItemId  + '" data-icon="delete"><a onclick="removeFilterItem(' + filterItemId + ')">' + name + '</a></li>').listview('refresh'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T15:50:58.970

使用 jquery 来设置您的属性，而不是尝试编写字符串。这样您就不必担心字符串转义。

```
var $li = $("<li>");
var $a = $("<a>");

$a.appendTo($li);

$li.attr("id", someID);

$a.attr("onclick", "...");

// ...
$(filterList).append($li); 
```

等等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T15:52:01.107

您可以使用双引号并预先计算一些字符串：

```
 var script = "removeFilterItem('" + filterItemId + "');"
 $(filterList).append(
    '<li id="' + filterItemId + '" data-icon="delete">'
    + '<a onclick="'+script+'">' + name + '</a>'
    + '</li>'
 ).listview('refresh'); 
```

另请注意，缩进和分解也简化了任务（和维护）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T15:52:25.653

```
var li = document.createElement("li");
li.id = "someId";
li.setAttribute("data-icon", "delete");
var a = document.createElement("a");
a.onclick = function() { removeFilterItem('someId'); };
li.appendChild(a); 
```

我认为没有太多要解释的。

# mercurial - 如何丢弃默认分支？

> ID：13747287
> 
> 赞同：1
> 
> 时间：2012-12-06T15:47:03.657
> 
> 标签：mercurial

在第 24 版，我为新功能创建了一个分支，与此同时，其他人继续使用默认版本（第 26,28 和 29 版），但最终使项目处于糟糕的状态。我一直在分支上开发（最高版本 36），现在应该成为默认分支。我怎么做？

我尝试回到默认的 24 并与 36 合并，我得到了默认的 37，就像我想要的那样。但现在它抱怨有两个头（37 和 29）。我不想合并，因为 26,28 和 29 都不好。我尝试到 37 并执行 hg merge --tool internal:local -r 29 以丢弃 29，但它没有用。

这似乎很简单，但我有点卡住了。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:09:51.200

解决此问题的一种方法是简单地关闭您不想要的分支：

```
hg update 29
hg commit --close-branch -m "closing branch" 
```

从技术上讲，您仍然有两个头，但一个会被标记为已关闭，因此在一般使用中您不会注意到它（例如，如果您运行`hg heads`）。

或者，我猜想你在哪里声明善变“抱怨有两个头”，那就是当你试图推送到另一个存储库时。在这种情况下，您可以指定“是”，您确实知道新头并接受它的存在。如果您在将分支标记为关闭后执行此操作，则不会导致任何问题：

```
hg push --force 
```

但是，您在进行更新时可能会产生歧义，因此在这种情况下指定修订可能是个好主意。

最后，如果您不想看到尚未合并到自己分支中的变更集，则可以在克隆到新存储库时指定自己的最新版本：

```
hg clone project new_project --rev 37 
```

我*认为*这将创建一个只复制到该修订版所需的变更集。然后，您可以将此作为您工作的基础。缺点是你不会有你可能真正想要的非祖先变更集。

对于其他选项，我会研究一些与 Mercurial 一起打包的扩展，例如`strip`. 我没有用过这个，所以不能给你任何建议。

你可以[在这里](http://mercurial.selenic.com/wiki/PruningDeadBranches)查看更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:25:58.533

克劳迪奥，我会尝试将您的问题“翻译”成更简洁的形式（如果需要，请检查翻译和修复）

您在 rev 24的命名分支中创建了*匿名分支*`default`，现在您只想在开发中使用来自另一棵树的一些变更集，并且在推送到远程服务器时遇到问题，并抱怨创建额外的头。

我的重建正确吗？

如果“是”和不需要的变更集 26、28、29 在单个连续范围内，您可以在“最后一个好”的外部变更集合并（合并 24 是无用的，没有 glog 的 AFAICS - 它似乎是分支点）并关闭不需要的头：@icabod 是正确使用 --close-branch 配方

另一方面，如果您的存储库是唯一的并且未发布，您可以重写历史记录（MQ：strip，histedit...）并在合并之前删除错误的变更集，获取干净的第二个匿名分支，合并，提交，推送

您也可以（虽然不推荐）`push -f`，并且将两个头都推送到远程仓库，您的头将处于活动状态，而您和其他人则使用它

**修复被评论清除的图片**

更正的重建，迭代 2：您在默认分支中有一些变更集，您希望从主线中排除这些变更并将您的分支合并到默认值。

除了建议的早期历史重写（从历史中完全杀死变更集 - 适用于“未发布”存储库），您可以在历史记录中留下错误的变更集，但以额外变更集为代价撤消它们的更改：`hg backout -r REV`创建变更集，撤消来自 REV 的更改（可以不记得在这里使用 revrange）。默认情况下有三个（最大）新的回退变更集，您已准备好将您的分支合并到默认值（即使在合并后您也可以回退）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:12:23.393

基本上，您需要 (a) 恢复`default`到版本 24 时的状态（不破坏任何历史记录），然后 (b) 将您的功能分支合并回默认值。您通过默认创建两个头来使事情变得复杂，但没什么大不了的。让我们一步一步来。

（我建议克隆你的整个 repo，这样你就可以安心地试验了。如果你做了你不喜欢的事情，只需删除整个目录并重新开始）。

以下是如何扭转错误更改的影响（不使用`strip`破坏性重写历史记录之类的命令）：

1.  更新到默认的头部：

    ```
    hg update -r 29 
    ```

2.  在不更改“当前”版本的情况下，将所有文件切换到它们在版本 24 中的内容：

    ```
    hg revert -r 24 
    ```

3.  将此文件状态作为新的头提交`default`：

    ```
    hg commit -m "Backing out revisions 26,28,29" 
    ```

此时，您可能刚刚将您的功能分支合并到新的头上`default`，因为所有错误的更改都已撤消：

```
 hg merge feature 
```

这应该是故事的结局。但是您已经合并`feature`到 rev 24，获得 revset 37。没问题，您仍然可以执行步骤 1-3，这将为您提供一个没有任何破坏性更改的默认 head。然后，不是合并 的头部，而是`feature`合并`37`作为最后一步：

```
 hg merge -r 37 
```

这将统一 的负责人`default`，而不会产生任何不利影响，因为您已经退出了错误的更改。

# android - Drawable draw() 调用未在各种设备上同时执行

> ID：13747288
> 
> 赞同：2
> 
> 时间：2012-12-06T15:47:06.850
> 
> 标签：android, android-canvas, android-drawable

我的操作栏有一个自定义可绘制对象，它扩展了`GradientDrawable`. 我drawable本身绘制的正是我想要的，我的问题似乎是它何时绘制。我在 Nexus 设备上开发它，它运行良好，完全符合预期，但是，当我在非 Nexus 设备上运行它时，它无法正常运行。我将其追溯到`draw(Canvas canvas)`呼叫的呼叫速度与 Nexus 设备的呼叫速度不同。我添加了一行代码，在调整其设置后用相同的可绘制对象替换操作栏可绘制对象，这使其在所有设备上都可以使用，但我不喜欢在用户拖动屏幕时不断重置可绘制对象。这根本不是问题吗？制造商真的可以对绘图系统进行那么多修改吗？有任何想法吗？设备结果和代码如下所示。

**drawable 的 draw() 方法**

```
/*
* mUnderlineColor, mUnderlineWidth, mToplineColor and mToplineWidth are all
* parameters which change as the user drags. The methods to set them call
* invalidateSelf() after changing the values in the corresponding paints
*/
public void draw(Canvas canvas) {
        super.draw(canvas);
        if (Color.alpha(mUnderlineColor) != 0) {
            canvas.drawLine(0, canvas.getHeight()-mUnderlineWidth+1, canvas.getWidth(), 
                    canvas.getHeight()-mUnderlineWidth+1, mUnderlinePaint);
        }
        canvas.drawLine(0, mToplineWidth-1, canvas.getWidth(), mToplineWidth-1, mToplinePaint);
    }

public void setUnderlineAlpha(float alpha) {
    mUnderlineColor = Color.argb(Math.round(alpha * 255), Color.red(mUnderlineColor),
            Color.green(mUnderlineColor), Color.blue(mUnderlineColor));
    mUnderlinePaint.setColor(mUnderlineColor);
    invalidateSelf();
} 
```

**设置参数**

```
public void onPageScroll(int xpos) {
        float alpha = mWidthPercentage - (float)xpos / mScreenWidthPixels;
        mFadingUnderline = alpha / mWidthPercentage;
        int actionBarAlpha = 200 + Math.round((255 - 200) * mFadingUnderline);
        mDrawable.setAlpha(actionBarAlpha);
        mDrawable.setUnderlineAlpha(mFadingUnderline);
        //mActionBar.setBackgroundDrawable(mDrawable);
            //The commented line is unnecessary on Nexus devices, but required on
            //everything else.
} 
```

**不需要我打电话的设备`setBackgroundDrawable()`***

*   银河连结 (4.2.1)
*   连结 10 (4.2.1)
*   连结 7 (4.2.1)
*   连结 S (4.2)
*   摩托罗拉 Xoom (4.0.4)

**需要我打电话的设备`setBackgroundDrawable()`***

*   变压器 Prime (4.1.1)
*   Galaxy Tab 7.0+ (4.0.4)
*   宏碁 A500 (4.0.3)

如果没有重置可绘制对象的开销，我不太介意，对我来说，Nexus 设备都在 invalidateSelf() 之后绘制而制造商设备没有绘制，这对我来说似乎很奇怪。有人有意见吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:00:43.570

`invalidateSelf()`仅当设置了 Drawable 的回调时才执行重绘。我想在成功的设备上 a`getCallback()`将是非空的，而在失败时它将是空的。为什么？你得到了我。

新调用`setBackgroundDrawable()`works 的原因是这会导致`ActionBar`自身无效。您可以绕过并`ActionBar`手动使无效，而不是刷新。不要认为这太重要了。

# powershell - 如何从包含字符串的变量中取出数字？-电源外壳

> ID：13747289
> 
> 赞同：0
> 
> 时间：2012-12-06T15:47:09.380
> 
> 标签：powershell

所以我有一个文件，其中包含这样的行：

```
Peter Nagy 3 4 6 7 4 
```

我需要一个 Power shell 脚本，它要求用户提供一个名称，它会计算出该名称旁边的这些数字的平均值。请帮忙 ：）

```
$name1 = read-host 
$content = Get-Content test.txt
$talalt = $content | Where-Object { $_ -match  $name1 } 
```

我不知道在此之后该怎么做，以及如何从该字符串中摆脱那些数字。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:05:16.477

以下应该做你需要的：

```
$name1 = read-host 
$content = Get-Content NamesList.txt
$talalt = $content | Where-Object { $_ -match  $name1 }

$SplitString = $talalt.split(" ")

$NumberofNumbers = $SplitString.count-2

$total = 0;

for($i=2;$i-le $SplitString.count;$i++)
{
    $total = [int]$SplitString[$i] + $total
}

$average = $total/$NumberofNumbers

write-host "Average for $($name1) is $($average)" 
```

关于阿卡斯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T16:08:32.417

您基本上需要从第一个数字到行尾进行选择，将各个数字分开，然后对它们进行平均，例如：

```
$content | Where-Object { $_ -match  $name1 } | 
   Foreach {if ($_ -match '\D+(\d.*)') {-split $matches[1] | measure -average }} 
```

# c++ - 以线性最小二乘方式求解系统 Ax=b，具有复杂元素和下三角方 A 矩阵

> ID：13747290
> 
> 赞同：0
> 
> 时间：2012-12-06T15:47:11.460
> 
> 标签：c++, linear-algebra, eigen

我想以`Ax = b`线性最小二乘方式求解线性系统，从而获得`x`. 矩阵`A`，`x`并`b`包含复数元素。

矩阵`A`的维数为`n`，`n`并且`A`是一个也是下三角形的方阵。向量`b`和`x`的长度为`n`。这个系统中的未知数与方程的数量一样多，但由于`b`是一个充满实际测量“数据”的向量，我怀疑最好以线性最小二乘法的方式执行此操作。

我正在寻找一种能够以 LLS 方式有效解决该系统的算法，可能使用稀疏矩阵数据结构来处理下三角矩阵`A`。

也许已经有一个具有这种算法的 C/C++ 库？（由于代码优化，我怀疑最好使用库。）环顾 Eigen 矩阵库，似乎 SVD 分解可用于以 LLS 方式求解方程组（[指向 Eigen 文档的链接](http://eigen.tuxfamily.org/dox/TutorialLinearAlgebra.html#TutorialLinAlgLeastsquares)）。但是，如何在 Eigen 中处理复数？

似乎 Eigen 库与 SVD 一起使用，然后将其用于 LLS 求解。

* * *

这是一个代码片段，演示了我想做的事情：

```
#include <iostream>
#include <Eigen/Dense>
#include <complex>

using namespace Eigen;

int main()

{

    // I would like to assign complex numbers
    // to A and b

    /*
    MatrixXcd A(4, 4);
    A(0,0) = std::complex(3,5);     // Compiler error occurs here
    A(1,0) = std::complex(4,4);
    A(1,1) = std::complex(5,3);
    A(2,0) = std::complex(2,2);
    A(2,1) = std::complex(3,3);
    A(2,2) = std::complex(4,4);
    A(3,0) = std::complex(5,3);
    A(3,1) = std::complex(2,4);
    A(3,2) = std::complex(4,3);
    A(3,3) = std::complex(2,4);
    */

    // The following code is taken from:
    // http://eigen.tuxfamily.org/dox/TutorialLinearAlgebra.html#TutorialLinAlgLeastsquares

    // This is what I want to do, but with complex numbers
    // and with A as lower triangular

    MatrixXf A = MatrixXf::Random(3, 3);
    std::cout << "Here is the matrix A:\n" << A << std::endl;
    VectorXf b = VectorXf::Random(3);
    std::cout << "Here is the right hand side b:\n" << b << std::endl;
    std::cout << "The least-squares solution is:\n"
    << A.jacobiSvd(ComputeThinU | ComputeThinV).solve(b) << std::endl;
}// end 
```

这是编译器错误：

```
 error: missing template arguments before '(' token 
```

* * *

**更新**

这是一个更新的程序，展示了如何使用 Eigen 处理 LLS 求解。这段代码确实可以正确编译。

```
#include <iostream>

#include <Eigen/Dense>

#include <complex>

using namespace Eigen;

int main()

{

    MatrixXcd A(4, 4);
    A(0,0) = std::complex<double>(3,5);
    A(1,0) = std::complex<double>(4,4);
    A(1,1) = std::complex<double>(5,3);
    A(2,0) = std::complex<double>(2,2);
    A(2,1) = std::complex<double>(3,3);
    A(2,2) = std::complex<double>(4,4);
    A(3,0) = std::complex<double>(5,3);
    A(3,1) = std::complex<double>(2,4);
    A(3,2) = std::complex<double>(4,3);
    A(3,3) = std::complex<double>(2,4);

    VectorXcd b(4);
    b(0) = std::complex<double>(3,5);
    b(1) = std::complex<double>(2,0);
    b(2) = std::complex<double>(8,2);
    b(3) = std::complex<double>(4,8);

        std::cout << "Here is the A matrix:" << std::endl;
    std::cout << A << std::endl;

        std::cout << "Here is the b vector:" << std::endl;
        std::cout << b << std::endl;

    std::cout << "The least-squares solution is:\n"

        << A.jacobiSvd(ComputeThinU | ComputeThinV).solve(b) << std::endl;

}// end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:07:45.763

因为`std::complex`是一个模板类，你用`std::complex(1,1);`编译器初始化不知道它是什么类型。

改为使用`std::complex<double>(1, 1);`。

# objective-c - 如何在命名空间中声明 Objective-C 中的常量？

> ID：13747293
> 
> 赞同：2
> 
> 时间：2012-12-06T15:47:14.673
> 
> 标签：objective-c, constants

在Java中我会去

```
class SettingKeys
{
    static String USERNAME = "username";
    static String PASSWORD = "password";
} 
```

然后用它去

```
username = settings.get(SettingKeys.USERNAME); 
```

我在 Objective-C 中做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T15:56:42.253

Objective-C 没有命名空间。您可以在类方法中返回常量，但很少这样做；相反，您只需在全局上下文中声明常量，并可能在名称前加上前缀，这样就不会发生命名冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T15:58:56.623

在 Objective-C 中执行此操作的一般方法是使用`typedef`'d `enum`：

```
typedef enum
{
    MyClassConstant1,
    MyClassConstant2,
    MyClassConstant3
} MyClassConstant;

@interface MyClass : NSObject
{
    MyClassConstant _something;
}

@end 
```

当然，这只适用于常量整数值；对于你通常做的字符串：

```
extern NSString * const MyClassString1; 
```

... ETC。

# java - Java Spring Form fields with HTML5 boolean attributes

> ID：13747296
> 
> 赞同：4
> 
> 时间：2012-12-06T15:47:30.807
> 
> 标签：java, forms, html, spring

I want to add the attributes `disabled`, `required`, and `autofocus` to Java Spring Forms 3.1\. Thanks to [some](https://stackoverflow.com/questions/4232983/adding-html5-placeholder-attribute-to-spring-3-0-form-input-elements) [questions](https://stackoverflow.com/questions/2526409/extending-spring-form-tag-library-attributes) I found out how, but I can't get it to work for [boolean attributes](https://stackoverflow.com/questions/4139786/what-does-it-mean-in-html-5-when-an-attribute-is-a-boolean-attribute).

We have a form utility lib that wraps Spring Form so that we can add labels and other things.

*Desired JSP:*

```
<formUtil:formInputBox ... autofocus="true" /> 
```

*Desired output HTML:*

```
<label>...<input type="text" ... autofocus /></label> 
```

*This works* in our formUtil as JSP:include but doesn't use Spring:

```
<input type="text" ... <c:if test="${param.autofocus=='true'}">autofocus</c:if> /> 
```

*This doesn't work* in our formUtil Tag but uses Spring:

```
<form:input ... <c:if test="${autofocus==true}">autofocus</c:if> />
// Gives exception: `Unterminated &lt;form:input tag`. 
```

**Question:** How do I get the desired output with the desired input? I'd like to keep databinding etc in Spring so I don't want to role my own form fields.

**Note:** Boolean attributes in HTML5 don't support boolean values so I can't have `autofocus=true`. It has to be just `autofocus` or `autofocus="autofocus"`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:03:14.243

As far as I know you can't place a core tag inside a spring tag as you were trying

```
<form:input ... <c:if test="${autofocus==true}">autofocus</c:if> /> 
```

it is possible to insert jstl expressions in the value of a spring tag attribute, but they won't help you as html5 only checks if autofocus is present.

```
<s:set var="autofocusVal" value=""/>
<c:if test="${autofocus}">
    <s:set var="autofocusVal" value="autofocus"/>
</c:if>

<form:input autofocus="${autofocusVal}" /> 
```

but you could do something like:

```
<c:choose>
    <c:when test="${autofocus}">
        <form:input autofocus="autofocus" />
    </c:when>

    <c:otherwise>
         <form:input />
    </c:otherwise>
</c:choose> 
```

which is really verbose and difficult to mantain, especially if you have several attributes you want to add.

Another crappy workaround could be set a data-xxx attribute to mark the tags with autofocus, and with javascript modify the html by adding the attribute autofocus where data-autofocus="true":

```
<form:input data-autofocus="${autofocus}" /> 
```

And the more elegant way of doing it (I can think of now) is to extend that tag with the attributes you want to add as it is explained here: [https://stackoverflow.com/a/9891714/249699](https://stackoverflow.com/a/9891714/249699)

# xslt - XSLT 将顺序 XML 转换为分层 XML

> ID：13747297
> 
> 赞同：8
> 
> 时间：2012-12-06T15:47:36.127
> 
> 标签：xslt, biztalk, xslt-1.0, biztalk-2009, biztalk-mapper

我需要将顺序 XML 节点列表转换为层次结构，但我遇到了一些 XSLT 特定的知识差距。输入 XML 包含文章、颜色和尺寸。在下面的示例中，“Record1”是一篇文章，“Record2”代表一种颜色，“Record3”是尺寸。颜色和大小（记录 2 和记录 3）元素的数量可能会有所不同。

```
<root>
 <Record1>...</Record1>
 <Record2>...</Record2>
 <Record3>...</Record3>
 <Record3>...</Record3>
 <Record2>...</Record2>
 <Record3>...</Record3>
 <Record3>...</Record3>
 <Record3>...</Record3>
 <Record3>...</Record3>
 <Record1>...</Record1>
 <Record2>...</Record2>
 <Record3>...</Record3>
 <Record3>...</Record3>
 <Record2>...</Record2>
 <Record3>...</Record3>
 <Record3>...</Record3>
 <Record3>...</Record3>
 <Record3>...</Record3>
</root> 
```

所有字段都在同一层级上，但我仍然必须创建这个结构作为输出：

```
<root>
 <article>              -> Record1
  <color>               -> Record2
   <size>...</size>     -> Record3
   <size>...</size>     -> Record3
  </color>
  <color>               -> Record2
   <size>...</size>     -> Record3
   <size>...</size>     -> Record3
   <size>...</size>     -> Record3
   <size>...</size>     -> Record3
  </color>
 </article>
 <article>              -> Record1
  <color>               -> Record2
   <size>...</size>     -> Record3
   <size>...</size>     -> Record3
  </color>
  <color>               -> Record2
   <size>...</size>     -> Record3
   <size>...</size>     -> Record3
   <size>...</size>     -> Record3
   <size>...</size>     -> Record3
  </color>
 </article>
</root> 
```

我尝试按顺序迭代节点，但例如，在处理“颜色”(=record2) 节点时，“文章”(=record1) 节点标签需要保持未关闭状态。处理未关闭“颜色”的“大小”(=record3) 的计数相同，但 XSLT 不允许这样做。我的下一个想法是为每篇文章、颜色和大小级别调用一个模板，但我不知道如何选择当前“record2”和“record1”表示的下一篇文章之间的所有“record3”节点。

我对 XSLT 版本也有限制，因为我需要在仅支持 XSLT 1.0 的 BizTalk Server 中进行此转换

有人可以将我推向正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:30:39.607

这是一个 XSLT 1.0 选项。我不确定你想对 Record1 和 Record2 的值做什么，所以我把它们放在一个`val`属性中。

**XML 输入**

```
<root>
    <Record1>article1</Record1>
    <Record2>color1</Record2>
    <Record3>size1</Record3>
    <Record3>size2</Record3>
    <Record2>color2</Record2>
    <Record3>size3</Record3>
    <Record3>size4</Record3>
    <Record3>size5</Record3>
    <Record3>size6</Record3>
    <Record1>article2</Record1>
    <Record2>color3</Record2>
    <Record3>size7</Record3>
    <Record3>size8</Record3>
    <Record2>color4</Record2>
    <Record3>size9</Record3>
    <Record3>size10</Record3>
    <Record3>size11</Record3>
    <Record3>size12</Record3>
</root> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/*">
        <xsl:copy>
            <xsl:apply-templates select="Record1"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Record1">
        <article val="{.}">
            <xsl:apply-templates select="following-sibling::Record2[generate-id(preceding-sibling::Record1[1])=generate-id(current())]"/>
        </article>
    </xsl:template>

    <xsl:template match="Record2">
        <color val="{.}">
            <xsl:apply-templates select="following-sibling::Record3[generate-id(preceding-sibling::Record2[1])=generate-id(current())]"/>
        </color>
    </xsl:template>

    <xsl:template match="Record3">
        <size>
            <xsl:value-of select="."/>
        </size>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<root>
   <article val="article1">
      <color val="color1">
         <size>size1</size>
         <size>size2</size>
      </color>
      <color val="color2">
         <size>size3</size>
         <size>size4</size>
         <size>size5</size>
         <size>size6</size>
      </color>
   </article>
   <article val="article2">
      <color val="color3">
         <size>size7</size>
         <size>size8</size>
      </color>
      <color val="color4">
         <size>size9</size>
         <size>size10</size>
         <size>size11</size>
         <size>size12</size>
      </color>
   </article>
</root> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T09:28:31.033

DevNull 和 Novatchev 的解决方案都是可行的。第三种解决方案，在我看来最优雅的一个，是使用“兄弟递归”。我不会给出完整的代码，但你从一个根的模板规则开始，如下所示：

```
<xsl:template match="root">
  <xsl:apply-templates select="*[1]"/>
</xsl:template> 
```

然后为不同的“级别”设置模板规则，如下所示：

```
<xsl:template match="record1">
  <section1>
    <xsl:apply-templates select="following-sibling::*[1][self::record2]"/>
  </section1>
  <xsl:apply-templates select="following-sibling::record1[1]"/>
</xsl:template> 
```

每个级别也是如此。这个解决方案可能比其他解决方案更快、更简洁，尽管在你习惯之前它可能有点“令人费解”。理解它的关键是，在每一层，你首先处理第一个“逻辑子”——即平面序列中的下一个元素，前提是它比当前元素更深；然后你处理下一个“逻辑兄弟”——平面序列中与当前元素处于同一级别的下一个元素。当然，该解决方案可以适用于可能缺少级别或级别编号由属性而不是元素名称指示的情况。它甚至可以适用于事先不知道级别数的情况：您只需使用一个规则，其中“

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T04:56:19.903

**这是使用键的更简单且可能更有效的转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kColors" match="Record2"
          use="generate-id(preceding-sibling::Record1[1])"/>

 <xsl:key name="kSizes" match="Record3"
          use="generate-id(preceding-sibling::Record2[1])"/>

 <xsl:template match="/*">
  <root>
    <xsl:apply-templates select="Record1"/>
  </root>
 </xsl:template>

 <xsl:template match="Record1">
   <article>
     <xsl:apply-templates select="key('kColors', generate-id())"/>
   </article>
 </xsl:template>

 <xsl:template match="Record2">
  <color>
     <xsl:apply-templates select="key('kSizes', generate-id())"/>
  </color>
 </xsl:template>

 <xsl:template match="Record3">
  <size><xsl:apply-templates/></size>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
    <Record1>article1</Record1>
    <Record2>color1</Record2>
    <Record3>size1</Record3>
    <Record3>size2</Record3>
    <Record2>color2</Record2>
    <Record3>size3</Record3>
    <Record3>size4</Record3>
    <Record3>size5</Record3>
    <Record3>size6</Record3>
    <Record1>article2</Record1>
    <Record2>color3</Record2>
    <Record3>size7</Record3>
    <Record3>size8</Record3>
    <Record2>color4</Record2>
    <Record3>size9</Record3>
    <Record3>size10</Record3>
    <Record3>size11</Record3>
    <Record3>size12</Record3>
</root> 
```

**产生了想要的正确结果：**

```
<root>
   <article>
      <color>
         <size>size1</size>
         <size>size2</size>
      </color>
      <color>
         <size>size3</size>
         <size>size4</size>
         <size>size5</size>
         <size>size6</size>
      </color>
   </article>
   <article>
      <color>
         <size>size7</size>
         <size>size8</size>
      </color>
      <color>
         <size>size9</size>
         <size>size10</size>
         <size>size11</size>
         <size>size12</size>
      </color>
   </article>
</root> 
```

**说明**：

1.  命名的键将( ) 元素`kColors`的集合表示为其( ) 逻辑父元素的函数。`Record2``color``Record1``article`

2.  类似地，被命名的键将( ) 元素`kSizes`的集合表示为它们( ) 逻辑父元素的函数。`Record3``size``Record2``color`

# php - functions.php 在 WordPress 中导致白页

> ID：13747303
> 
> 赞同：0
> 
> 时间：2012-12-06T15:47:59.253
> 
> 标签：php, wordpress

出于某种原因，当我编辑我的functions.php 时，各种页面变白。例如，使用以下代码：

```
 <?php
    /* Add a custom field to the field editor (See editor screenshot) */
    add_action("gform_field_standard_settings", "my_standard_settings", 10, 2);
    function my_standard_settings($position, $form_id){
        // Create settings on position 25 (right after Field Label)
        if($position == 25){
?>
            <li class="admin_label_setting field_setting" style="display: list-item; ">
                <label for="field_placeholder">Placeholder Text
                    <!-- Tooltip to help users understand what this field does -->
                    <a href="javascript:void(0);" class="tooltip tooltip_form_field_placeholder" tooltip="&lt;h6&gt;Placeholder&lt;/h6&gt;Enter the placeholder/default text for this field.">(?)</a>
                </label>
                <input type="text" id="field_placeholder" class="fieldwidth-3" size="35" onkeyup="SetFieldProperty('placeholder', this.value);">
            </li>
<?php
        }
    }
    /* Now we execute some javascript technicalitites for the field to load correctly */
    add_action("gform_editor_js", "my_gform_editor_js");
    function my_gform_editor_js(){
?>
        <script>
            //binding to the load field settings event to initialize the checkbox
            $(document).bind("gform_load_field_settings", function(event, field, form){
                $("#field_placeholder").val(field["placeholder"]);
            });
        </script>

<?php
    }
    /* We use jQuery to read the placeholder value and inject it to its field */
    add_action('gform_enqueue_scripts',"my_gform_enqueue_scripts", 10, 2);
    function my_gform_enqueue_scripts($form, $is_ajax=false){
?>
        <script>
            jQuery(function(){
                <?php
                    /* Go through each one of the form fields */
                    foreach($form['fields'] as $i=>$field){
                        /* Check if the field has an assigned placeholder */
                        if(isset($field['placeholder']) && !empty($field['placeholder'])){
                            /* If a placeholder text exists, inject it as a new property to the field using jQuery */
                ?>
                jQuery('#input_<?php echo $form['id']?>_<?php echo $field['id']?>').attr('placeholder','<?php echo $field['placeholder']?>');
                <?php
                        }
                    }
                ?>
            });
        </script>
<?php
    }
?> 
```

更新页面让我处于空白页面（在 url：/wp-admin/post.php）。我试图使用的另一段代码，来自本教程：

[http://www.doitwithwp.com/pre-populate-fields-using-gravity-forms/](http://www.doitwithwp.com/pre-populate-fields-using-gravity-forms/)

导致登录页面出现空白页。我正在运行最新版本的 WordPress。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:53:21.230

尝试删除开始 PHP 标记之前的所有空格。有时这会造成很大的麻烦。通常确保它不回显任何内容，因为此文件仅包含供以后使用的功能并且不提供任何内容。

# mysql - phpMyAdmin 在登录到远程时给我错误.. #2002 无法登录到 MySQL 服务器

> ID：13747304
> 
> 赞同：0
> 
> 时间：2012-12-06T15:48:03.787
> 
> 标签：mysql, phpmyadmin, selinux

我正在尝试将 phpMyAdmin 设置为在 Scientific Linux 6.2 版上与远程 MySQL 数据库一起使用。

如果我使用 mysql 命令行连接到远程数据库，效果很好，但如果我使用 mysqladmin，我会收到“#2002 无法登录到 MySQL 服务器”。

我发现如果我这样做：

**设置强制 0**

它可以从 myphpadmin 到我的远程数据库工作，但是一旦我重新启动或将 Scientific Linux setenforce 设置回一个，它就会再次停止工作。

我知道 setenforce 0 不是正确的做法，但有人可以给我详细说明如何让它以正确的方式工作......谢谢我是 Scientific Linux 的新手并且遇到了一些问题.. 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:15:02.603

我刚刚让它工作了......我所要做的就是**setsebool -P httpd_can_network_connect=1**现在它工作了

# codeigniter - codeigniter 从控制器调用控制器以构建模块化站点

> ID：13747306
> 
> 赞同：0
> 
> 时间：2012-12-06T15:48:08.600
> 
> 标签：codeigniter

我希望能够制作一个模块化的 codeigniter 基础，我可以在其中简单地将模块加载到其中（为了清楚起见，不是 codeigniter 模块）

设置将是在文件夹控制器中有具有模块名称的子文件夹，并且在视图文件夹中相同。

现在，如果调用了控制器**application/controllers/showcustomerinfo**，我希望控制器函数调用**application/controllers/company1/showcustomerinfo**中的控制器来显示，并且该控制器执行它需要执行的操作并将其输出推送到视图中。

所以会发生什么：

```
base showcustomer info 计算基本信息。
base showcustomer使用基本标题呈现视图
base showcustomerinfo获取哪些模块处于活动状态的信息
基础showcustomer调用所有模块控制器，也称为showcustomer company1  
/showcustomerinfo计算基本信息
company1/showcustomerinfo检查自己的模块
company1/showcustomerinfo通过视图显示基本信息
company1/showcustomerinfo停止
base showcustomerinfo呈现基本视图和页脚视图
base showcustomerinfo绘制视图。

```

我怎么能做到这一点？如何从主控制器调用控制器？

# solr - EdgeNGramFilterFactory 中的确切结果（Solr 搜索）

> ID：13747310
> 
> 赞同：3
> 
> 时间：2012-12-06T15:48:18.750
> 
> 标签：solr

我在模式文件中使用 EdgeNGramFilterFactory 和配置

```
<fieldType name="prefix_token_text" class="solr.TextField" positionIncrementGap="1">
    <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="20" side="front" />
    </analyzer>
    <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>            
        <filter class="solr.LowerCaseFilterFactory"/>
    </analyzer>
</fieldType> 
```

我在架构中有八个字段。我有配置

```
<field name="text" type="prefix_token_text" indexed="true" stored="false" multiValued="true"/> 
```

和

```
<copyField source="AccountName" dest="text" /> 
```

我的数据索引大约三亿。

如果我搜索

```
sanosuke 
```

我得到类似的结果

```
sanosuke3
sanosuke2
sanosuke1
sanosuke
sanosukebn
sanosukeqns
...... 
```

我想要结果**sanosuke**在上面。为什么会这样？帮我。谢谢大家:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:13:53.147

向查询添加[排序。](http://wiki.apache.org/solr/CommonQueryParameters#sort)像 q=text:sanonuke&sort=text asc

# linux - 打开 GTS 构建失败

> ID：13747313
> 
> 赞同：2
> 
> 时间：2012-12-06T15:48:21.567
> 
> 标签：linux, amazon-ec2, tomcat6

一切都很好（Opengts dir & tomcat dir 有权限 777）但是我一次又一次地得到这个错误，为什么--

执行`# sudo ant all`然后我得到这个错误

```
BUILD FAILED
/usr/local/OpenGTS_2.4.5/build.xml:111: CATALINA_HOME environment variable has not been defined.
    (make sure CATALINA_HOME is defined and exported to the list of environment variables) 
```

我在启动tomcat时收到了这个消息

```
sudo ./startup.sh
Using CATALINA_BASE:   /usr/local/apache-tomcat-6.0.36
Using CATALINA_HOME:   /usr/local/apache-tomcat-6.0.36
Using CATALINA_TMPDIR: /usr/local/apache-tomcat-6.0.36/temp
Using JRE_HOME:        /usr
Using CLASSPATH:       /usr/local/apache-tomcat-6.0.36/bin/bootstrap.jar 
```

任何人都有解决方案，请告诉我如何解决此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:32:58.900

尝试在您的主目录（而不是 /usr/local/）中配置 OpenGTS。

并使用 ant all 命令（不是 sudo ant all）。

好锁.. :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:07:33.987

首先运行这个命令：

```
echo $CATALINA_HOME 
```

它应该为您提供 tomcat 目录的路径，我假设它是`/usr/local/apache-tomcat-6.0.36`，但如果您看到不同的路径，或者响应为空白，请尝试运行以下命令：

```
export CATALINA_HOME=/usr/local/apache-tomcat-6.0.36 
```

如果您阅读[OpenGTS 配置手册](http://opengts.sourceforge.net/OpenGTS_Config.pdf)，它会在 2.4a 节中讨论 Linux 的 CATALINA_HOME 环境变量。您还必须设置其他环境变量才能成功安装 OpenGTS（手册中提到了所有内容）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-20T11:55:04.340

要解决此问题，请确保 OpenGTS2.6.x 的所有文件和目录到 user:group 与登录用户相同。然后运行 ​​/ant all 命令

请注意，“sudo ant all”不起作用。

使用此命令更改 OpenGTS 文件/目录的所有权

> /usr/local/OpenGTS2.6.2> cd ..
> 
> sudo chown -R ranjan:ranjan OpenGTS2.6.2

将ranjan更改为您的用户名：组名

> /usr/local/OpenGTS2.6.2> 蚂蚁所有

它会起作用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-30T17:57:38.163

尝试通过命令行安装tomcat7而不是tomcat6

```
apt-get update
apt-get install tomcat7 
```

通过配置 CATALINA_HOME

```
export CATALINA_HOME=/usr/share/tomcat7 
```

# javascript - 如何使用 javascript 选择一个选择框（并使用 UI）

> ID：13747315
> 
> 赞同：2
> 
> 时间：2012-12-06T15:48:25.100
> 
> 标签：javascript, jquery, html

我有一个选择框，我在附近放了一个跨度，所以它看起来像：

```
___________________          ___________________
| Sort By: opt1 v |    ->    | Sort By: opt1 v |
|_________________|          |_________________| 
                             :.......opt2......:
                             :.......opt3......: 
```

代替：

```
 ___________                    __________
Sort By:|  opt1 v |    ->      Sort By:| opt1 v |
        |_________|                    |________| 
                                       :..opt2..:
                                       :..opt3..: 
```

见我的[jsfiddle](http://jsfiddle.net/5xcHm/4/)。它具有我尝试使用的所有 html、css 和 jquery。

**问题：** 选择框仅在您单击可见选项名称时才起作用。我需要将跨度（一个包含“排序方式：”，另一个包含自定义下拉箭头 img）上的单击转移到选择元素上的单击。这是我尝试过的：

```
$('span').click(function(){
    var sb = $('select');
    //none of these work! Please help!
    sb.select();
    sb.click();
    sb.focus();
}); 
```

一些免责声明：

*   我不想选择特定选项。我想打开选择框并查看所有选项，就像我点击了选择框一样。
*   我不允许使用 jquery 插件[selectbox](http://www.bulgaria-web-developers.com/projects/javascript/selectbox/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:52:50.107

无法以编程方式打开选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:52:23.453

据我所知，您不允许这样做（模仿用户与控件的交互）。您可能不得不考虑使用选择元素替换小部件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T15:56:35.140

您可以将`sort by:`文本设置为标签并设置其“for”属性。不需要 javascript：

```
<label for="s_featured">Sort By: </span>
<select id="s_featured" ...>
  ...
</select> 
```

虽然这不会在我测试过的任何桌面浏览器中滚动选择，但它确实集中了选择，这是语义上正确的方式。它可能在移动浏览器中具有预期的效果。

向下滚动选择可能是不可能的，因为某些用户代理甚至可能没有办法执行此操作。这取决于浏览器在选择通过标签聚焦时要做什么。

请注意，多选甚至*看起来*不像普通的下拉菜单 - 单选也可能不是。W3C 只定义元素的行为，而不是它的呈现方式（例如，请注意 firefox 和 chrome 以非常不同的方式呈现文件输入 - 两者都是兼容的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T19:14:32.053

您可以做的是在包含文本和箭头的选择框上创建背景图像。使用`appearance: none`，不会绘制本机箭头，并且通过一些左/右填充，您几乎可以实现您想要的。请注意，这可能不是跨浏览器，因此请务必对其进行测试：http: [//jsfiddle.net/5xcHm/16/](http://jsfiddle.net/5xcHm/16/)。

一些用于创建背景图像的画布代码：

```
var w = $(".sb").outerWidth();
var h = $(".sb").outerHeight();

var canvas = $("<canvas>").attr({
    "width": w,
    "height": h
}).get(0);
var ctx = canvas.getContext("2d");

$.extend(ctx, {
    font: "9pt sans-serif",
    textBaseline: "middle"
});

ctx.fillText("Sort By:", 5, h/2+1);

ctx.moveTo(w - 15, 5);
ctx.lineTo(w - 5, 5);
ctx.lineTo(w - 10, 15);
ctx.closePath();
ctx.fill();

var url = canvas.toDataURL("image/png");
$(".sb").css("background-image", "url(%)".replace("%", url)); 
```

和CSS：

```
.sb {
    -webkit-appearance: none;  /* mind the prefixes */
    padding-left: 55px;
    padding-right: 15px;
    position: absolute;
    background-repeat: no-repeat;
    background-position: left center;
}
.sortOptionContainer {
    position: relative;
} 
```

# git - 文档翻译存储库的工作流程

> ID：13747319
> 
> 赞同：1
> 
> 时间：2012-12-06T15:48:49.893
> 
> 标签：git, workflow

考虑以下文档存储库：[https://github.com/symfony/symfony-docs](https://github.com/symfony/symfony-docs) 该存储库的法语版本有一个存储库[https://github.com/symfony-fr/symfony-docs-fr](https://github.com/symfony-fr/symfony-docs-fr)

法国贡献者如何使用 git 来：

*   注意对英语存储库所做的修改
*   在合并这些更改时确保翻译每个单词？
*   轻松与其他贡献者合作？

这已经在[这里](https://github.com/symfony-fr/symfony-docs-fr/issues/171)讨论过了，但是我们缺乏经验丰富的 git 用户的洞察力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:47:43.230

有趣的是，这是我能很快想到的：

如 github 讨论中所述：

您可以拥有原始文档的上游分支，并且通过该分支，您可以查看在任何一天修改了哪些文件。
如果你有一个负责法语翻译的人，那个人可以通过拥有一个单独的存储库或使用 Github 的提要来关注原始分支。

与其他贡献者合作意味着制定一套规则，如果有人开始翻译文档，则需要有问题。翻译将是一个单独的分支，也就是功能分支。在合并到主分支之前，可以将该分支推送到 github 以供其他人查看或修改。

我真的想不出方法来确保原始仓库中更改的每个单词都已被翻译。虽然有些人可能会翻译差异，但问题是法语和英语之间的语法不同，因此几乎不可能使用原始补丁。
您可以做的事情是在法语存储库中为原始存储库中发生的每个合并创建一个问题，您在法语问题中引用原始提交。

# android - ArrayAdapter 中的 TextWatch

> ID：13747324
> 
> 赞同：2
> 
> 时间：2012-12-06T15:49:13.793
> 
> 标签：android

我有一个 ArrayAdapter，我正在使用 TextWatcher 在一些 TextView 中进行控制更改，但是我遇到了问题。我不知道如何在更改后选择可编辑视图。我试图添加一个 OnClickListener 并获得一些利润，但为了一切顺利，我首先需要点击 View 和 TextView 时

```
ViewHolder holder;
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {     

        if (convertView == null) {
            LayoutInflater inflater = 
                    (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.item_row, null);

            holder = new ViewHolder();
            holder.value = (EditText) convertView.findViewById(R.id.value);
            holder.item = (TextView) convertView.findViewById(R.id.item);
            holder.relust = (TextView) convertView.findViewById(R.id.result);

            convertView.setOnClickListener(this);       

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.item.setText(items.get(position) + "");
        holder.position = position;
        return convertView;
    }

    @Override
    public void afterTextChanged(Editable text) {
        if (text.length() != 0) {
            Double value = Double.valueOf(text.toString());
            Double result = value * 2;
            holder.relust.setText("= " + result + " sm");
        }
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,int after) {}

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {}

    @Override
    public void onClick(View v) {
        holder = (ViewHolder) v.getTag();
        holder.value.addTextChangedListener(this);
    } 
```

# assembly - 在以下情况下如何延迟分支？

> ID：13747328
> 
> 赞同：1
> 
> 时间：2012-12-06T15:49:18.787
> 
> 标签：assembly, dlx

我在汇编中有一部分代码。我想知道在以下情况下延迟分支是如何发生的。

```
Loop:;*** Compare R1 and R2
seq r3,r1,r2 ;Compiar R1 == R2 ? if yes r3 =1 if not r3 = 0
bnez r3,Result //call a Result label in bellow
sgt r3,r1,r2 ;R1 > R2 ? //first delayed slot
bnez r3,r1Greater

r2Greater:;*** subtract r1 from r2
sub r2,r2,r1
j Loop

r1Greater:;*** subtract r2 from r1
sub r1,r1,r2
j Loop

Result: ;*** Write the result (R1)
multi f3,f1,f2
cvti2f f4,r1
div f3,f3,f4
sw PrintfValue,r1
addi r14,r0,PrintfPar
trap 5

;*** end
trap 0 
```

# c# - 如何更新 ListBox 项内的控件

> ID：13747329
> 
> 赞同：0
> 
> 时间：2012-12-06T15:49:20.130
> 
> 标签：c#, wpf, xaml, checkbox, listbox

我有一个`ListBox`定义如下。我有需要以编程方式检查/取消选中`CheckBox`的`ListView`项目（只想实现全选/取消全选操作）。实现这一目标的最佳方法是什么？

```
<ListBox Margin="0,0,10,0" Name="listViewChanges" SelectionMode="Multiple">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <CheckBox x:Name="lblChangedSelected" IsChecked="{Binding Selected}" VerticalAlignment="Center" VerticalContentAlignment="Center" Margin="10,0,0,0"></CheckBox>
                <Label x:Name="lblChangedStatus" Content="{Binding Status}" VerticalContentAlignment="Center"></Label>
                <Label x:Name="lblChangedPath" Content="{Binding Path}" VerticalContentAlignment="Center"></Label>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:51:39.733

您应该拥有绑定实现背后的类`INotifyPropertyChanged`。然后，当您更改属性时，触发`NotifyPropertyChanged`事件并且绑定应该自动更新。

# android - Android : 开关 (ToggleButton) 和线程

> ID：13747334
> 
> 赞同：1
> 
> 时间：2012-12-06T15:49:41.500
> 
> 标签：android, multithreading, layout, button, toggle

在我面向 Android 4.0.3 的应用程序中，我曾经有一个按钮用作开关。单击该按钮正在更改其资源（在播放/暂停之间切换），并且一些任务正在后台执行。特殊之处在于，当按下按钮时，我希望切换在短时间内不可用（以防止快速切换）。

为此，我创建了一个等待 X 秒的线程，如下所示：

```
void blockButton(){
    new Thread() {
        public void run(){
            try {
                        synchronized(this){
                             button_ready = false;
                             sleep(5000);
                             button_ready = true;
                        }
                }
                catch(InterruptedException ex){}
            }
        }.start();
    }
} 
```

基本上在我的 Activity/onClickListener

```
if(button_ready){
    // Start background stuff
    changeButtonResource();
    button.setEnabled(false);
    blockButton();
    button.setEnabled(true);
} 
```

到目前为止一切顺利，一切顺利。但我最终希望将其更新为 Switch。代码几乎相同（除了 onClickListener 变成了 OnCheckedChangeListener）。

但是现在当我单击一次按钮时，再次单击它将允许更改其资源-但后台任务将无法启动（我已经尝试使用振动器和其他人，它只会更改资源）。

所以我几乎拥有了我的 Button 曾经的行为，但是资源变得混乱了。任何想法都会受到欢迎！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:09:41.330

您不需要创建另一个线程。`View.postDelayed(Runnable)`为您提供了一种在超时后启用按钮（或执行其他 UI 操作）的更简单方法。您的代码应如下所示：

```
class ... extends Fragment {
    private final Runnable enabler = new Runnable() { public void run() {
        button.setEnabled(true);
    }};

    private View button;

    public View onCreateView(LayoutInflater inflater, ViewGroup container,  Bundle savedInstanceState) {
        View result = ...
        button = result.findViewById(...);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                button.setEnabled(false);
                ...
            }
        });
        ...
    }

    public void onDestroyView() {
        ...
        button = null;
    }

    public void onPause() {
        ...
        button.removeCallbacks(enabler);
    }

    public void onResume() {
        ...
        button.setEnabled(true);
    }
} 
```

`removeCallbacks`在您`Fragment`或`Activity`离开之前调用对于避免用户在禁用期间离开引起的并发问题很重要。`Fragment`在这种情况下禁用回调后，重要的是要确保当用户返回到您的or`Activity`并`View`恢复其保存的状态时，您不会“陷入”禁用状态。

# django - syncdb = 错误：一个或多个模型未验证

> ID：13747335
> 
> 赞同：0
> 
> 时间：2012-12-06T15:49:41.287
> 
> 标签：django, uuid, django-south

当我这样做时，`manage.py syncdb`我得到：

```
Error: One or more models did not validate:
users.userprofile: "uuid": Primary key fields cannot have null=True. 
```

即使我`class UserProfile(models.Model)`有：

```
uuid = UUIDField(primary_key=True, auto=True, editable=False) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:33:37.547

[丹尼尔](https://stackoverflow.com/users/104349/daniel-roseman)的评论可能就是这样，我只是不知道如何遵循线索。

来自[Joshua](https://stackoverflow.com/users/846313/joshua-karjala-svendsen)的解决方法是删除官方的并用 Joshua 的[叉子](https://github.com/joshuakarjala/django-uuidfield)`django-uuidfield`替换它们。

```
-django-uuidfield==0.4
-django-uuidfield-2==0.6.5
+# django-uuidfield==0.4
+# django-uuidfield-2==0.6.5
+-e git://github.com/joshuakarjala/django-uuidfield.git#egg=django-uuidfield 
```

记得要`pip uninstall django-uuidfield`和`pip uninstall django-uuidfield-2`之前`pip install -r requirements.txt`。

# eclipse-plugin - 从用户选择的源项中获取字节码（.class 文件）

> ID：13747336
> 
> 赞同：0
> 
> 时间：2012-12-06T15:49:46.810
> 
> 标签：eclipse-plugin

我希望我的插件（一个自动终止分析工具）在用户在 Eclipse 中选择的代码上运行。自然，用户选择源代码（`.java`文件、大纲中的方法……）。但是，我的程序需要编译`.class`文件作为输入。

如何获取`.class`选定源项目的文件？与此相关，如何获取所选源方法的字节码描述符？如果泛型和可变参数将（Eclipse）源描述符转换为相应的字节码描述符，对我来说似乎并不简单。

我不想`javac`自己运行，也不想猜测`.class`文件是如何命名的（这对内部类来说很讨厌）然后尝试在磁盘上找到它（如果它存在？也许我可以强制 Eclipse 编译？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:15:37.613

Bytecode Outline 插件使用以下解决方案（请参阅 参考资料`JdtUtils.getByteCodePath`）：

1.  根据源元素，找到输出位置，例如`/home/user/workspace/project/build/`）
2.  使用包信息在里面找到正确的目录`build/`，例如`/home/user/workspace/project/build/some/package/`
3.  找到“最外层”的类定义（对内部类很重要），使用这个名称作为文件的文件名`.class`，例如`/home/user/workspace/project/build/some/package/Foo.class`
4.  在内部类的情况下，做奇怪的魔法（`JdtUtils.getClassName`）并相应地修改生成的类文件的名称（可能导致`Foo$1.class`）

所以这个问题的问题就解决了，内部类到相应文件名的翻译可以改进。不过，根据作者的说法，目前的方法（使用“魔术”）适用于“95% 的情况”，而且他不知道过去几年有任何相关的错误。

# android - Android - 如何在 SQLite 数据库中存储 html 字符串

> ID：13747339
> 
> 赞同：1
> 
> 时间：2012-12-06T15:49:56.193
> 
> 标签：android, html, sqlite

我有一个 html 字符串，我想“按原样”存储在我的 SQLite 数据库中。html 字符串中的特殊字符阻止我的`INSERT`语句存储它：

```
INSERT INTO myTable VALUES ('" + htmlString + "') 
```

在 iOS 上，我使用参数化查询来完成此操作，并且效果很好。我怎样才能在 Android 上做到这一点？我已经为 Android 进行了 Google 参数化查询，但结果多种多样且不清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:56:08.217

在 Android 中，您也有参数化查询……实现这一目标的方法很少：

```
ContentValues vals = new ContentValues();
vals.putString("ColumnName", htmlString);
db.insert("myTable", null, vals); 
```

或者

```
final SQLiteStatement insert = db.compileStatement("INSERT INTO myTable VALUES (?)");
insert.bindString(1, htmlString);
//edit: hehe forgot about most important thing 
insert.executeInsert(); 
```

或者

```
db.rawQuery("INSERT INTO myTable VALUES (?)", new String[] {htmlString}); 
```

**编辑：（**插入多行）

如果您想插入多于 1 行，则在事务中执行（应该更快）并更喜欢第二种解决方案：

```
db.beginTransaction();
try {
  final SQLiteStatement insert = db.compileStatement("INSERT INTO myTable VALUES (?)");
  for(...){
    insert.clearBindings();
    insert.bindString(1, htmlString[N]);
    //edit: hehe forgot about most important thing 
    insert.executeInsert();
  }
  db.setTransactionSuccessful();
} finally {
  db.endTransaction();
} 
```

# java - Java中的ResultSet到整数数组

> ID：13747343
> 
> 赞同：0
> 
> 时间：2012-12-06T15:50:03.983
> 
> 标签：java, sql, arrays, integer, resultset

如何将 ResultSet 转换为 Integer 数组？我真的需要一个整数数组。没有列表或类似的东西。

```
ResultSet rs = sqlite.query("SELECT ores FROM testtable WHERE nicknames='"+"testname"+"';"); 
```

"ores" 包含用空格分隔的 8 个整数：10 20 30 40 50 60 70 80

编辑：“ores”存储为 VARCHAR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:55:18.507

错误的代码。我推荐一个 PreparedStatement：

```
PreparedStatement ps = connection.prepareStatement("SELECT ores FROM testtable WHERE nicknames= ?");
ps.setString(1, nickname);
ResultSet rs = ps.executeQuery();
List<Integer> values = new ArrayList<Integer>();
while (rs.next()) {
    String ores = rs.getString("ores");
    String [] tokens = ores.split("\\s+");
    for (int i = 0; i < tokens.length; ++i) {
        values.add(Integer.valueOf(tokens[i]));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T15:52:01.497

ResultSet 是您查询的结果，如果要将其转换为 ArrayList 或简单的 Integer 数组，您可以遍历 ResulstSet 并将所有非空对象添加到 ArrayList 或数组中。这是一个简单的解决方案...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T15:55:11.400

```
Vector<Integer> ores = new Vector<Integer>();
rs.beforeFirst();
while(rs.next()){ores.add(rs.getInt(1));}
Integer[] vals = ores.toArray(new Integer[0]); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-06T15:52:43.430

也许是这样的：

```
rs.last(); 
rowcnt = myResultSet.getRow(); // get row no.
rs.beforeFirst();

int i = 0;  
Integer[] options = new Integer[rowcnt];  
while (rs.next()) {  
  options[i] = Integer.parseInt(rs.getString(i));  
  i++;  
} 
```

# c# - 使用 linq 分组嵌套列表

> ID：13747344
> 
> 赞同：2
> 
> 时间：2012-12-06T15:50:05.837
> 
> 标签：c#, linq, list, group-by

我有一个嵌套的对象列表。我需要分组依据`identifierA`及其`Sum`数字属性，嵌套列表应分别分组：

```
public class TypeA
{
    public String identifierA{ get; set; }
    public Int32 number { get; set; }
    public List<TypeB> nestedList { get; set; }
}
public class TypeB
{
    public String identifierB { get; set; }
    public Int32 otherNumber { get; set; }
} 
```

所以我期待这样的事情：

```
var List<TypeA> groupedList = (from a in TypeAList
                               group a by a.identifierA
                               into groupedData
                               select new TypeA
                               {
                                   identifierA = groupedData.Key,
                                   number = groupedData.Sum(g => g.number ),
                                   nestedList = //HOW TO GROUP NESTED PART?
                               }).ToList(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T15:53:45.607

`SelectMany`接受 an`IEnumerable<SomethingWithAnIEnumerable>`并将所有`SomethingWithAnIEnumerable`选定`IEnumerable`的 s 展平为一个 s `IEnumerable`：

```
nestedList = groupedData.SelectMany(pa => pa.nestedList).ToList() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T08:09:14.063

我认为这将解决您的问题。

```
List<TypeA> list = TypeAList
    .GroupBy(a => a.identifierA)
    .Select(
        g =>
        new TypeA
            {
                identifierA = g.Key,
                number = g.Sum(n => n.number),
                nestedList =
                    g.SelectMany(l => l.nestedList)
                    .GroupBy(b => b.identifierB)
                    .Select(
                        gg =>
                        new TypeB
                            {
                                identifierB = gg.Key,
                                otherNumber = gg.Sum(b => b.otherNumber)
                            }).ToList()
            }).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T15:52:15.723

使用[SelectMany](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)

如果您想将列表分组为一种用途

```
nestedList = groupedData.SelectMany(d=>d.nestedList) 
```

如果您想要`Sum`该列表，请使用

```
nestedList = groupedData.SelectMany(d=>d.nestedList).Sum(o=>o.otherNumber) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T20:06:15.430

我认为您的 IdentfierB 可能是某种键，您的结果应该反映 Grouped 和 Summed TypeB。

```
List<TypeA> groupedList = TypeAList
  .GroupBy(a => a.identifierA)
  .Select(g => new TypeA()
  {
    identierA = g.Key,
    number = g.Sum(a => a.number)
    nestedList = g.SelectMany(a => a.nestedList)
      .GroupBy(b => b.identifierB)
      .Select(g2 => new TypeB()
      {
        identifierB = g2.Key,
        otherNumber = g2.Sum(b => b.otherNumber)
      }
  } 
```

# html - HTML 字段格式

> ID：13747345
> 
> 赞同：0
> 
> 时间：2012-12-06T15:50:07.120
> 
> 标签：html, css

我有一个标准的 HTML 表单。

```
<form method="post" name="myemailform" action="form-to-email.php">
    Enter Name: <input type="text" name="name">
    Enter Email Address:    <input type="text" name="email">
    Enter Message:  <textarea name="message"></textarea>
    <input type="submit" value="Send Form">
</form> 
```

问题是，当输入的值大于字段大小时，单击离开时，字段会跳回到字段的开头，因此结尾会被切断。

有没有办法让田野的视野保持在克拉的位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T15:56:32.787

这是一个 javascript 问题（客户端），而不是 PHP 问题（服务器端）。

你需要这样做：

```
<input type="text" name="name" size="10" onblur="if (this.length > 10) {this.dir = 'rtl';} else {this.dir = 'ltr';}"> 
```

只需检查要使用的正确长度以更改输入方向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:56:34.483

您可以使用 HTML 属性`size`。

# html - 将鼠标悬停在下拉菜单上时保持文本为白色

> ID：13747347
> 
> 赞同：0
> 
> 时间：2012-12-06T15:50:08.963
> 
> 标签：html, css, drop-down-menu

问题是当您离开时`<a>`，字体颜色将恢复为非悬停颜色。

我希望“关于”文本的颜色为白色，即使光标离开“关于”链接。

我一直在尝试将所有内容都`color:`放在悬停链接上的文字上，但没有任何乐趣。

这是我的**[小提琴](http://jsfiddle.net/iamthestig/eZape/)**

HTML

```
 <nav>
    <ul>
        <li class="n1">
            <a href="#">Home</a>
        </li> 
        <li class="n2">
            <a href="#">About</a>
            <ul class="menu">
                <li>
                    <a href="#">List 1</a>
                </li>
                <li>
                    <a href="#">List 2</a>
                </li>
                <li>
                    <a href="#">List 3</a>
                </li>
            </ul>
        </li> 
        <li class="n3">
            <a href="#">Contact</a>
        </li>        
    </ul>
</nav>​ 
```

CSS

```
nav {
    width 100%;
}

nav ul {
    list-type: none;
}

nav ul li {
    maring: 0;
    padding: 0;
}

nav ul li a {
    display: block;
    float: left;
    padding: 10px 20px;
    line-height: 1;
    color: dodgerblue;
    background: silver;
    text-decoration: none;
    text-transform: uppercase;
}

nav ul li a:hover {
    color: white;
}

nav ul li.n2:hover > .menu {
    display: block;
}

.menu {
    position: absolute;
    top: 36px;
    left: 86px;
    background: silver;
    width: 93px;
    display: none;
}

.menu li a {
    color: white;
}

.menu li a:hover {
    color: dimgray;
}
​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:52:58.117

您需要将悬停添加到 li

```
nav ul li:hover a {
    color:white;
} 
```

# java - 从浏览器运行时 JApplet 无法获得焦点

> ID：13747352
> 
> 赞同：2
> 
> 时间：2012-12-06T15:50:21.517
> 
> 标签：java, swing, focus, japplet, appletviewer

我有一些简单的代码，我试图将键盘事件输入到 Java 小程序中。使用 appletviewer 运行代码时运行良好，但是当我从浏览器加载它时（尝试了 Chrome 和 Firefox），JApplet 不会专注于点击。

使用 Applet 而不是 JApplet 尝试完全相同的代码没有问题。

这是我的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Test extends JApplet {
    String s = "";

    public void init() {
            setFocusable(true);
            setEnabled(true);
            addKeyListener(new KeyAdapter() {
                    @Override
                    public void keyPressed(KeyEvent e) {
                            s = "KEY PRESSED: " + e.getKeyCode();
                            repaint();
                    }

            });
            addMouseListener(new MouseAdapter() {
                     @Override
                     public void mousePressed(MouseEvent e) {
                             boolean ret = requestFocusInWindow();
                             s = "requestFocusInWindow: " + ret;
                             repaint();
                     }
            });
            requestFocusInWindow();
    }

    public void start() {
            requestFocusInWindow();
    }

    public void paint(Graphics g) {
            super.paint(g);
            requestFocusInWindow();
            g.setColor(Color.BLACK);
            s = "Focus owner: " + isFocusOwner() + ", " + s;
            g.drawString(s, 24, 24);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:28:54.137

*   应通过将代码包装在块[`Event Dispatch Thread`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)中的重写`init()`方法中来创建小程序`SwingUtilities.invokeAndWait()`

*   不要`KeyListener`用于`JApplet`/Swing 组件使用[`KeyBinding`s](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

*   `requestFocusInWindow()`在创建所有内容并将所有内容添加到容器后调用`JApplet`（虽然这不是键绑定所必需的）

*   也不要画图，`paint()`而是添加`JPanel`到容器中并覆盖`paintComponent(..)`

这是一个小例子，它是一个简单`JLabel`的带有虚拟标签和文本字段的容器，仅使用`KeyBinding`for `A`；所以当按下*A*时，它将被添加到`JLabel`文本中：

![在此处输入图像描述](../Images/4e758d03b1dfd30edaea99afe1ba63a5.png)

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.lang.reflect.InvocationTargetException;
import javax.swing.AbstractAction;
import javax.swing.JApplet;
import javax.swing.JComponent;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class Test extends JApplet {

    @Override
    public void init() {
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                @Override
                public void run() {

                    final JLabel label = new JLabel("Text:");
                    final JLabel label2 = new JLabel("Dummy label");
                    final JTextField jtf = new JTextField("Dummy Field");
                    label2.setFocusable(true);
                    label.setFocusable(true);

                    //allwos user to add letter A to JLabel
                    label.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_A, 0), "A");
                    label.getActionMap().put("A", new AbstractAction() {
                        @Override
                        public void actionPerformed(ActionEvent ae) {
                            String tmp = label.getText();
                            label.setText(tmp + "A");

                        }
                    });

                    setLayout(new GridLayout(3, 1));

                    add(label);
                    add(label2);
                    add(jtf);
                }
            });
        } catch (InterruptedException | InvocationTargetException ex) {
            ex.printStackTrace();
        }
    }
} 
```

# java - 延迟初始化和回调的困境

> ID：13747353
> 
> 赞同：1
> 
> 时间：2012-12-06T15:50:24.483
> 
> 标签：java, interface, callback, lazy-loading, abstract-class

我需要做惰性初始化，所以我选择了单例/多例模式，但我也需要一个回调，所以我选择了一个抽象类，但这是矛盾的，它不能同时是单例和抽象类.

然后，作为解决方案，可以避免抽象类并使用单例和接口（执行回调），将它们（接口）作为参数传递。但这有点难看，因为禁止漂亮的 IDE 有助于实现抽象方法。

我想知道这种不可能的组合是否还有其他选择。

**选项抽象类** （禁止单/多）

```
class abstract Machine
 {                 
     abstract hardwareCallBack();             
     //..
     //Here I can't put a constructor for singleton because it's abstract 
 } 
```

***带有接口***的选项单例（它实际上是一个多例）****

 ***```
public class Machine {

    private CallBackIface callBack; //interface including hardwareCallBack();
    private static final Map<String, Machine> instances 
                                               = new HashMap<String, Machine>();

    private Machine(CallBackIface callback0) 
    {
         callBack=callback0;
    }

    public static Machine getMachine(String name, CallBackIface callback0) 
    {

           Machine instance = instances.get(name);

            if (instance == null) //plus sync stuff...
             {

                instance = new Machine(callback0);  
                instances.put(name, instance);
             }                 
            return instance;            
    }
 //...
} 
```

这里有一个相关的问题 [How can I implement an abstract singleton class in Java?](https://stackoverflow.com/questions/2459061/how-can-i-implement-an-abstract-singleton-class-in-java)***

# authorization - 从后面的 ASP.NET 代码调用服务时，不调用 ServiceStack AuthProvider IsAuthorized

> ID：13747361
> 
> 赞同：1
> 
> 时间：2012-12-06T15:50:48.050
> 
> 标签：authorization, servicestack

我有一个用 Authenticate 属性标记的服务操作

```
[Authenticate]
[Route("/route/to/service", "POST")]
public class OperationA: IReturn<OperationAResponse>
{
 ...
} 
```

当我使用 REST URL 或在单元测试中使用 JsonServiceClient 调用服务时，AuthProvider 的方法 IsAuthorized 被正确调用，但如果我从后面的 ASP.NET 代码（而不是 MVC 控制器）调用服务，则不会调用该方法。

我不使用 IoC 来解析我背后代码中的服务，但我使用这段代码......

```
MyService service = AppHostBase.Instance.Container.TryResolve<MyService>();
service.Post(operationA); 
```

有什么我想念的吗？

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:21:44.907

只是为了澄清：

> 我不使用 IoC 来解析我背后代码中的服务，但我使用这段代码......

```
MyService service = AppHostBase.Instance.Container.TryResolve<MyService>(); 
```

`MyService`您在这里使用 IOC，即解析来自 ServiceStack 的 IOC的自动连接实例。

如果您的服务不使用 HTTP`Request`或`Response`对象，那么您可以将其视为任何普通类并调用 C# 方法。如果服务确实如此（例如 Auth/Registration），那么您还需要注入当前的 HTTP 请求上下文。

CustomAuthenticationMvc [UseCase 项目](https://github.com/ServiceStack/ServiceStack.UseCases/blob/master/CustomAuthenticationMvc/Controllers/HomeController.cs#L35)有一个如何执行此操作的示例：

```
var helloService = AppHostBase.Resolve<HelloService>();
helloService.RequestContext = System.Web.HttpContext.Current.ToRequestContext();
var response = (HelloResponse)helloService.Any(new Hello { Name = "World" }); 
```

# css - 媒体查询：仅针对视网膜 macbook pro

> ID：13747364
> 
> 赞同：1
> 
> 时间：2012-12-06T15:51:02.557
> 
> 标签：css, macos, media-queries, retina-display

我正在为我的网站使用媒体查询，它可以完美地从网络到移动设备。现在我想专门使用 Apples Retina MBP 的一些样式（不是 iPad、iPhone 等）。但是我无法让它工作，当我更改 CSS 时，它只会在所有设备上更改。

有谁知道仅针对他测试的 Macbook Pros 的防弹媒体查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:01:36.853

我使用这个媒体查询：

```
@media 
only screen and (-webkit-min-device-pixel-ratio: 2) and (min-device-width: 1025px),
only screen and (   min--moz-device-pixel-ratio: 2) and (min-device-width: 1025px),
only screen and (   -o-min-device-pixel-ratio: 2/1) and (min-device-width: 1025px),
only screen and (        min-device-pixel-ratio: 2) and (min-device-width: 1025px),
only screen and (           min-resolution: 192dpi) and (min-device-width: 1025px),
only screen and (            min-resolution: 2dppx) and (min-device-width: 1025px) {

    /* MacBook-Retina-specific stuff here */
} 
```

来源：[http ://css-tricks.com/snippets/css/retina-display-media-query/](http://css-tricks.com/snippets/css/retina-display-media-query/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T15:58:18.027

媒体查询不检测用户代理/设备；他们检测*特征*（例如分辨率和方向）。尝试使用 javascript 并将一个类应用于主体，并从那里应用样式。

```
var retina = (window.retina || window.devicePixelRatio > 1);
if (retina) {
    $('body').addClass('retina'); // for example
} 
```

然后在你的CSS

```
body.retina {
    // styles
}

body.retina #element {
    // styles
} 
```

来源：[http ://hjzhao.blogspot.co.uk/2012/07/detect-retina-display-using-javascript.html](http://hjzhao.blogspot.co.uk/2012/07/detect-retina-display-using-javascript.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:33:12.907

我会尝试

```
@media screen and (min-height: (yourtargetdevicepixelsheight)px) and (min-width: (yourtargetdevicepixelswidth)px) {
     you styles here
} 
```

因为它是 Apples Retina MBP，我不认为很多设备可以同时具备这两种条件，您也可以将其锁定添加

```
and (max-height: (yourtargetdevicepixelsheight+1)px ) and the same with 'width' 
```

希望能帮助到你

# jquery - 使用 jquery 查找链接的样式表并在末尾添加一个随机数

> ID：13747366
> 
> 赞同：2
> 
> 时间：2012-12-06T15:51:11.140
> 
> 标签：jquery

我试图让所有样式表看起来像：

```
<link href="style.css?v=1234" rel="stylesheet" type="text/css" /> 
```

我遇到的唯一问题是获取当前链接标签，然后将新的随机数应用于当前路径。我认为我应用查找链接的方法还可以，但是获取当前属性然后应用新属性是我出错的地方。

```
$(document).ready(function() {

var randomNum = Math.ceil(Math.random()*2);
// is this the best way?
$("head").find("link").attr("href")+"?v="+randomNum;

// I don't think this works
$('link[rel="stylesheet"]').end()+"?v="+randomNum;

}); 
```

我有一群人遇到缓存问题，他们指出这将是一个可能的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T15:52:39.443

您没有将值设置回链接。您可以使用函数来设置链接值，如下所示。

```
$("head").find("link").attr("href", function (i, value) {
   return value +"?v="+randomNum;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:56:56.460

如果有人遇到新文件的缓存问题，请尝试以下方法：

*   在 css 文件中添加版本号
*   每次部署新的 CSS 文件时更新版本号（不要忘记更新对它的引用）

这样，人们将始终看到他们加载的页面的相应 css，并且您仍然可以从浏览器缓存中受益

例如 style-1.0.css

# javascript - 如何与节点同步执行node.js文件？

> ID：13747367
> 
> 赞同：0
> 
> 时间：2012-12-06T15:51:10.800
> 
> 标签：javascript, node.js, asynchronous

> **可能重复：**
> [node.js 同步执行系统命令](https://stackoverflow.com/questions/4443597/node-js-execute-system-command-synchronously)

我希望从另一个 node.js 文件同步执行 node.js 文件。这就是我所拥有的，但它是异步的。

```
 var spawn = spawn('node', ['./file.js']);
    spawn.stdout.on('data',function(data){}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:30:30.973

从您在问题下的评论来看，听起来您*不*希望它是同步的，并且您不关心它的输出。

如果您只是想触发另一个进程并忘记，而不看它或关心它何时结束，那么您已经使用的 ( [`spawn`](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)) 会执行此操作。

如果您想*真正*做到一劳永逸，您需要指定该`detached`选项，这样子进程就不会在您的进程终止时被杀死。从文档：

> 如果`detached`设置了该选项，则子进程将成为新进程组的领导者。这使得子进程可以在父进程退出后继续运行。

再往下看，显然你也必须`unref`这样做：

> 默认情况下，父级将等待分离的子级退出。要防止父级等待给定的子级，请使用该`child.unref()`方法，并且父级的事件循环不会将子级包含在其引用计数中。

**`stdio`显然要处理**：****

 **> 使用该`detached`选项启动长时间运行的进程时，该进程将不会在后台保持运行，除非它提供了`stdio`未连接到父进程的配置。如果继承父级的 stdio，则子级将保持连接到控制终端。

所以：

```
spawn('node', ['./file.js'], {
    detached: true,
    stdio: [ 'ignore', 'ignore', 'ignore' ]
}).unref(); 
```**

# objective-c - 分配框架的正确方法

> ID：13747372
> 
> 赞同：1
> 
> 时间：2012-12-06T15:51:19.677
> 
> 标签：objective-c, ios, view

我正在开发一个应用程序，当用户单击按钮时，视图将在其下方显示一个视图，视图高度取决于某些标准。它将是某个 x 高度或 y 高度，没有其他高度。现在我的问题是，什么是为该视图分配高度的正确方法，我应该硬编码它取决于标准还是每次我应该根据放置的内部视图计算高度。如果我每次都计算高度那么现在它是无用的，因为我们知道什么应该是高度，但将来可能会发生 UI 更改，因此高度可能会更改。我想知道你们的想法，正确的方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:58:35.237

只要视图布局不变，我就会使用硬编码值。即使稍后会发生变化，我也会首先使用硬编码值，然后在真正需要时，我会将实现更改为动态值。我的逻辑背后的原因是，在真正需要之前，条件可能会很快发生变化，因此即使您现在实现动态实现，您也不能确定在真正需要时不需要再次更改它，因为在那之前的规格变化，例如

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:04:51.627

我混合了硬编码和计算：

为了计算视图的位置，我定义了硬编码的插图：

```
CGFloat topInset = 5;
CGFloat bottomInset = 5;

CGFloat leftInset = 5;
CGFloat interButtonDistance = 10; 
```

然后我通过以下方式计算子视图框架的位置：

```
CGFloat startX = 0;
CGFloat startY = 0;

CGFloat buttonSize = 50;

CGFloat buttonX = leftInset + column * (buttonSize + interButtonDistance); 
```

此外，我不使用硬编码的屏幕尺寸，我阅读了它们

```
 CGFloat height = self.view.frame.size.height; // or similar 
```

然后我可以在视图底部放置一个按钮

```
buttonY = height - buttonHeight - bottomInset; 
```

使用此技术，您将更加独立于 iphone / ipad 屏幕高度。在具有不同屏幕尺寸（iphone 5）的设备中使用时仍然需要调整值，但这会更容易，希望您只需调整 topInset 和 boittomInset，其余的工作开箱即用（希望如此）

# google-chrome-extension - 如何跟踪我的 Chrome 扩展程序是否已创建上下文菜单项？

> ID：13747374
> 
> 赞同：6
> 
> 时间：2012-12-06T15:51:27.820
> 
> 标签：google-chrome-extension

chrome.contextMenus 只有四种方法：

```
create
update
remove
removeAll 
```

我想知道如何检查是否已经创建了一个菜单？

我试过这个：

```
try {
  chrome.contextMenus.update("byname", {});
} catch (e) {
 // doesn't exist
} 
```

但似乎无法捕获错误（但显示在控制台中）。

感谢您提供任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:56:12.437

每个[`chrome.contextMenus.create`](http://developer.chrome.com/extensions/contextMenus.html#method-create)调用都返回一个唯一标识符。将这些标识符存储在数组或散列中以跟踪它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-10T10:30:52.787

根据 Rob W 的建议，这是任何有操作问题的人的直接解决方案。这个想法是维护您自己的现有上下文菜单 ID 列表。

通过使用这些包装函数来维护上下文菜单条目，还可以跟踪删除和更新（针对 Fuzzyma 的评论）。

用法类似于 Chrome 自己的方法，例如。`createContextMenu({id: "something"}, onclick)`. 这个对我有用。

```
let contextMenus =  {}

// method to create context menu and keep track of its existence
function createContextMenu() {
  if (arguments[0] && arguments[0].id) {
    // TODO: not sure if this will work properly, is creation synchronous or asynchrounous?
    // take in to account calll back and the runtime error?
    chrome.contextMenus[arguments[0].id] = chrome.contextMenus.create.apply(null, arguments);
  }
}

function updateContextMenu() {
  if (arguments[0] && contextMenus[arguments[0]]) {
    chrome.contextMenus.update.apply(mull, arguments);
  }

}

function removeContextMenu() {
  if (arguments[0] && contextMenus[arguments[0]]) {
    chrome.contextMenus.remove.apply(null, arguments);
    contextMenus[arguments[0]] = undefined;
  }
}

function contextMenuExists(id) {
  return !!contextMenus[id];
} 
```

# sharepoint - SharePoint 计算字段：比较 FY calc 的两个日期

> ID：13747375
> 
> 赞同：0
> 
> 时间：2012-12-06T15:51:32.657
> 
> 标签：sharepoint, formula, calculated-columns, date-arithmetic

FY 运行 Oct-Sep，我有一个包含日期字段的列表，我只是想为计算的 FY 字段创建一个公式，它基本上说明了 FY 日期所代表的含义。

我开始尝试这样的嵌套 IF：

=IF(Year([DateField] > 11; =IF(Month([DateField] > 9; 12);....

但唉，我担心我做错了。MSDN 显示计算两个日期之间的差异，并在日期上添加天、周或月，但我还没有真正找到任何可以帮助解决此问题的方法。

一如既往地非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:01:26.787

这适用于在 SharePoint 中将 FY 计算为“YY”，其中财政年度从 10 月 1 日开始，StarTime 是日期字段：=IF(MONTH(StartTime)>9,ROUNDUP((YEAR(StartTime)+1-2000),0 ),ROUNDUP((YEAR(StartTime)-2000),0))

```
 Yeilds "13" for this FY. 
```

源自[http://www.wssdemo.com/Lists/Resources/DispForm.aspx?ID=1266&ContentTypeId=0x01005C6956D831EB0B49B4AEE28DF95A05820C00268EA96B67FC8F448ED6072B5D14B7CF的 Quarter 计算函数](http://www.wssdemo.com/Lists/Resources/DispForm.aspx?ID=1266&ContentTypeId=0x01005C6956D831EB0B49B4AEE28DF95A05820C00268EA96B67FC8F448ED6072B5D14B7CF)

请参阅[http://abstractspaces.wordpress.com/2009/05/02/common-date-time-formulas-for-sharepoint-calculated-fields/上的相关内容](http://abstractspaces.wordpress.com/2009/05/02/common-date-time-formulas-for-sharepoint-calculated-fields/)

# php - 使用 Laravel 的 JSONP

> ID：13747383
> 
> 赞同：3
> 
> 时间：2012-12-06T15:51:53.877
> 
> 标签：php, javascript, jquery, jsonp, laravel

浏览器向 Laravel 发送 JSONP 请求，Laravel 将结果返回给浏览器。在浏览器控制台中，我收到警告：

```
Resource interpreted as Script but transferred with MIME type text/html: 
```

我相信这是由于 JSONP 响应中的标头不正确造成的？这个警告应该如何解决？

**PHP**

```
$callback = Input::get('callback');
$result = DB::table('users')->find(123);

return $callback . '(' . json_encode($result) . ')'; 
```

`Response::JSON($result)`我相信将返回通常的 JSON 响应，而不是带有回调函数名称的 JSONP 变体。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-07-02T15:27:15.397

你可以在 Lavavel 4 中做到这一点：（原文：Tu puedes hacer esto en Laravel 4）

```
Response::json($result)->setCallback(Input::get('callback')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T16:06:58.697

您可以在 Response::json() 调用中提供标头。

```
Response::json($result, 200, array('Content-Type' => 'application/javascript')); 
```

JSONP 的正确 MIME 类型是 application/javascript。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-03T15:51:10.380

```
Response::json($result)->setCallback(Input::get('callback')); 
```

[正如Raul Duran](https://stackoverflow.com/a/17429575/1718312)所建议的那样更好，因为您不必操纵 $result。

另一个选项是回显，而不是使用响应。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-04-20T06:12:18.803

对于 Laravel（5.1 及以上）或 Lumen（5.1 及以上）：

如果您想创建 JSONP 响应，除了 setCallback 之外，您还可以使用 JSON 方法：

```
return response()
    ->json(['name' => 'Abigail', 'state' => 'CA'])
    ->setCallback($request->input('callback')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-28T07:26:36.257

对于 Laravel>8，创建 JSONP 响应：

```
return response()
        ->json(['name' => 'Abigail', 'state' => 'CA'])
        ->withCallback($request->input('callback')); 
```

我们应该使用**withCallback()**而不是**setCallback()**

根据 Laravel[文档](https://laravel.com/docs/8.x/responses#json-responses)

# python - Python 装饰器变量分数

> ID：13747384
> 
> 赞同：1
> 
> 时间：2012-12-06T15:51:56.293
> 
> 标签：python, closures, scope, decorator

我创建了一个简单的装饰器，它接收一个参数（使用函数而不是一个类），当发生一些奇怪的事情时：添加一行代码会中断前一行的执行。

这是代码：

```
def my_decorator(sublabel):
    def duration_wrapper(f):

        print sublabel
        # Uncommenting this code will break the previous line - why?
        # if sublabel is None:
        #     sublabel = f.func_name

        def wrapped_function(*args, **kwargs):
            return f(*args, **kwargs)

        return wrapped_function

    return duration_wrapper

@my_decorator('me')
def myf(): pass

myf() 
```

取消注释这些代码行会导致此异常：

```
Traceback (most recent call last):
  File "test.py", line 16, in <module>
    @my_decorator('me')
  File "test.py", line 4, in duration_wrapper
    print sublabel
UnboundLocalError: local variable 'sublabel' referenced before assignment 
```

谁能解释为什么取消注释那两行代码会破坏它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T15:54:43.270

装饰器是闭包，并且从封闭范围引用的封闭范围中的所有标签必须在封闭范围内保持静态。如果你想让一个封闭范围内的变量在封闭范围内是可变的，你需要将它包装在一个可变对象中，例如：

```
def my_decorator(sublabel):
    sublabel = [sublabel]
    def duration_wrapper(f):

        print sublabel[0]
        if sublabel[0] is None:
            sublabel[0] = f.func_name

        def wrapped_function(*args, **kwargs):
            return f(*args, **kwargs)

        return wrapped_function

    return duration_wrapper 
```

正如@Bakuriu 在评论中指出的那样，Python 3 引入`nonlocal`了删除这个限制，您也可以创建`sublabel`一个全局变量来解决这个问题，但是全局变量通常不是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T16:03:16.397

您的问题可以简化为这个简单的示例

```
sublevel = 1

def func():
    print sublevel
    sublevel = 2

func() 
```

问题是当您在内部范围内分配一个变量时，您正在屏蔽外部范围（全局级别或父函数级别范围），阅读文档以了解[python 范围规则](http://docs.python.org/2/tutorial/classes.html#python-scopes-and-namespaces)如何工作，需要注意的重要一点是`scopes are determined statically`

因此，在我的示例中，您需要`global sublevel`在调用 print 之前说，您需要使用`nonlocal`关键字（python 3+）

# css - 使用css同时旋转3个div

> ID：13747392
> 
> 赞同：2
> 
> 时间：2012-12-06T15:52:20.647
> 
> 标签：css, rotation

我想同时旋转 3 个 div。

```
<img src="logo.png" class="logo" width="150px" height="150px"/>
<img src="1.png" class="logo" width="150px" height="150px"/>
<img src="2.png" class="logo" width="150px" height="150px"/> 
```

这三个图像都是在鼠标移动其中任何一个时旋转的。使用的 Css 是

```
 .logo {
   -webkit-transition: all 1s ease-in-out;
   -moz-transition: all 1s ease-in-out;
   -o-transition: all 1s ease-in-out;
   -ms-transition: all 1s ease-in-out;
   transition: all 1s ease-in-out;
  }
  .logo:hover {
   -webkit-transform: rotate(180deg);
   -moz-transform: rotate(180deg);
   -o-transform: rotate(180deg);
   -ms-transform: rotate(180deg);
   transform: rotate(180deg);
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:05:08.633

您需要将所有图像包装在另一个 div 中，然后将悬停伪类应用于该 div。

HTML

```
<div id="wrap">
  <img src="logo.png" class="logo" width="150px" height="150px"/>
  <img src="1.png" class="logo" width="150px" height="150px"/>
  <img src="2.png" class="logo" width="150px" height="150px"/>
</div> 
```

CSS：

```
.logo {
   -webkit-transition: all 1s ease-in-out;
   -moz-transition: all 1s ease-in-out;
   -o-transition: all 1s ease-in-out;
   -ms-transition: all 1s ease-in-out;
   transition: all 1s ease-in-out;
 }
 #wrap:hover .logo {
   -webkit-transform: rotate(180deg);
   -moz-transform: rotate(180deg);
   -o-transform: rotate(180deg);
   -ms-transform: rotate(180deg);
   transform: rotate(180deg);
 } 
```

jsfiddle：http: [//jsfiddle.net/NbzrV/](http://jsfiddle.net/NbzrV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:02:55.513

请试试这个

```
<style type="text/css">
    .logo {
      -moz-transform:rotate(10deg); //firefox
      -webkit-transform:rotate(10deg); //Chrome, Safari
      -o-transform:rotate(10deg); //Opera
      }

  .logo:hover {
              -moz-transform:rotate(45deg); //firefox
              -webkit-transform:rotate(45deg); //Chrome, Safari
              -o-transform:rotate(45deg); //Opera
              }

</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:06:43.370

将所有图像放在一个容器中，然后将旋转应用于悬停容器中的图像：

```
<div id="container">
    <img src="logo.png" class="logo" width="150px" height="150px"/>
    <img src="1.png" class="logo" width="150px" height="150px"/>
    <img src="2.png" class="logo" width="150px" height="150px"/>
</div> 
```

CSS：

```
 .logo {
   -webkit-transition: all 1s ease-in-out;
   -moz-transition: all 1s ease-in-out;
   -o-transition: all 1s ease-in-out;
   -ms-transition: all 1s ease-in-out;
   transition: all 1s ease-in-out;
  }
  #container:hover .logo {
   -webkit-transform: rotate(180deg);
   -moz-transform: rotate(180deg);
   -o-transform: rotate(180deg);
   -ms-transform: rotate(180deg);
   transform: rotate(180deg);
  } 
```

# android - Android布局：重量在设备上不起作用

> ID：13747395
> 
> 赞同：0
> 
> 时间：2012-12-06T15:52:27.033
> 
> 标签：android, layout

对于 ListActivity 行，我得到了两种不同的行为。Eclipse 图形布局显示正确的行为，但在运行时，在设备上，*layout:weight*似乎无法正常工作，并且 Textview 被调整为最小宽度，具体取决于 text 属性。

这就是我设置布局的方式。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="60dp" 
    android:background="@color/defaultBg" 
    android:orientation="horizontal">

   <ImageButton
        android:id="@+id/myButton"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_marginLeft="5dp"
        android:layout_weight="2" 
        android:src="@drawable/ic_launcher"/>

   <TextView
           android:id="@+id/myText"
           android:layout_width="0dp"
           android:layout_height="fill_parent"
           android:layout_margin="5dp"
           android:background="#2288EE"
           android:layout_weight="6" android:text="Hello" android:textColor="@android:color/white"/>
</LinearLayout> 
```

编辑：**我刚刚发现 LinearLayout 没有填充 listRow 宽度。我仍在努力寻找解决方法**

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:35:44.013

我自己解决问题。问题不在上面发布的表格行布局中。问题出在父 ListView 的 android:layout_width 设置为“wrap_content”而不是“fill_parent”。

感谢所有提供他贡献的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:13:21.740

尝试将 android:scaleType="fitCenter" 添加到您的 ImageButton。如果我没记错的话，你的源 Drawable 太大了，因此使 ImageButton 占用了太多的水平空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:23:52.120

在你的`LinearLayout`放`android:weightSum="8"`. 它应该可以解决问题，在我的设备上工作正常。

# php - 误差差距小但大

> ID：13747396
> 
> 赞同：1
> 
> 时间：2012-12-06T15:52:30.387
> 
> 标签：php

我的网站要求用户每天23:59:59之前在网站上完成某项任务（不用担心时区或任务）

该任务有`$today_status`(`complete`或`incomplete`)

我有一个在一天开始时（00:00:01）运行的 cron 来做两件事：

1.  检查昨天是否完成了所有任务（检查所有仍未完成的任务）。
2.  将所有昨天的任务重置为未完成，以便用户今天可以再次开始任务（新的一天）。

每个任务旁边都有一个倒计时计时器，以便用户可以看到以下两个计时器之一：

1.  ( `IF $today_status = incomplete`) - 他们完成任务所剩的时间（倒计时到一天结束）。
2.  ( `IF $today_status = complete`) - 他们在完成第二个任务之前必须等待的时间（倒计时到一天结束）。

我有两个相关的小问题：

cron 在 00:00:01 进入新的一天后立即运行，但是 cron 可能要到 00:07:19 才能完成所有任务的处理，因此存在 7 分钟的错误间隔......这可能会增加更多用户加入。

因此，如果用户已完成前一天的任务，然后在第二天 00:03:27 查看任务......`$today_status`仍然可能是`completed`因为 cron 可能还没有处理前一天的任务......计时器会说

23:54:33（开始下一个任务还剩等待时间）

它会说上面的，因为它仍然处于“完成”状态......但是用户只是提前登录，所以他们可以提前完成今天的任务但是网站告诉他们否则......它告诉他们他们必须等到明天完成下一个任务……

我希望我能正确解释这一点，如果您费心阅读本文，我将非常感谢您...任何帮助将不胜感激...在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:58:30.820

我只能想到一个解决方法。由于 cron 将越来越慢，因此您可以添加一个“last_cron_date”字段，该字段将显示 cron 上次修复给定任务的时间。因此，在 UI 中，您将检查任务是否已通过 cron TODAY，如果是，则显示剩余的。如果 cron 还没有完成这个任务，它的日期字段仍然是昨天，你可以正确处理这个 - 要么说“这个任务当前正在处理”，要么允许它被处理，或者你决定为处理时间差距。

# android - 作品：Android 自定义组件 - 访问 strings.xml 中的数组，通过 layout.xml 提供

> ID：13747400
> 
> 赞同：1
> 
> 时间：2012-12-06T15:52:45.370
> 
> 标签：android, xml, arrays, components

我有一个类，它扩展`LinearLayout`了 ，其中有`Buttons`一个`Spinner`.

此对象通过我的布局 XML 文件包含在内：

```
<com.ics.spinn.ComboBox android:id="@+id/myautocombo"
  android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:completionThreshold="1"
android:entries="@array/suppliers" />
/> 
```

数组供应商在 strings.xml 中定义。

如果这个组件现在不是 com.ics.spinn.ComboBox，而是一个`Spinner`，Android 会自动将“ `android:entries`”填充到 Spinner 适配器。

我希望我的组件 com.ics.spinn.ComboBox 的行为方式相同：能够访问通过 xml 文件定义的数组，因此我可以通过以下方式将其提供给组件内的 Spinner：

```
 ArrayAdapter<String> a = new ArrayAdapter<String>(this.getContext(),android.R.layout.simple_spinner_dropdown_item, ARRAYINSIDEMYXML);
    s.setAdapter(a); 
```

我现在可以通过直接访问 strings.xml 中定义的数组，`getResources().getStringArray(R.array.suppliers)` 但我的代码不应该知道名称“供应商”，因为它应该通过 android:entries...

这 + João Melo 解决方案 WORK 中 xml 中的条目：

```
 public ComboBox(Context context, AttributeSet attrs) {
        super(context, attrs);

          TypedArray b = context.obtainStyledAttributes(attrs,
                    R.styleable.ComboBox, 0, 0);

            CharSequence[] entries = b.getTextArray(R.styleable.ComboBox_myEntries);
            if (entries != null) {
                ArrayAdapter<CharSequence> adapter =
                        new ArrayAdapter<CharSequence>(context,
                                android.R.layout.simple_spinner_item, entries);
                adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                s.setAdapter(adapter);
            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:41:27.073

我不知道是否可以使用`android:entries`属性来做到这一点，除非您的组件扩展 Spinner，但我只是猜测。

您可以在 attrs.xml 中创建自己的自定义属性来实现这一点

```
<declare-styleable name="ComboBox">
    <attr name="myEntries" format="reference"></attr>
</declare-styleable> 
```

然后你可以在你的组件中访问这个引用（int）并将 ArrayAdapter 设置到你的微调器中。

```
TypedArray customAttrs = context.obtainStyledAttributes(attrs, R.styleable.ComboBox);
    for (int i = 0; i < customAttrs.length(); i++) {
        int attrValue = customAttrs.getIndex(i);
        switch (attrValue) {
            case R.styleable.ComboBox_myEntries:
                mArrayId = customAttrs.getResourceId(attrValue, 0);
                ArrayAdapter<String> a = new ArrayAdapter<String>(this.getContext(),android.R.layout.simple_spinner_dropdown_item, mArrayId);
                s.setAdapter(a);
                break;
        }
    } 
```

在您的布局上，在根视图中添加`xmlns:app="http://schemas.android.com/apk/res/yourPackageName"`以下行：`xmlns:android="http://schemas.android.com/apk/res/android"`

然后你可以通过 xml 实例化你的组件和自定义属性：

```
<com.ics.spinn.ComboBox android:id="@+id/myautocombo"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:completionThreshold="1"
app:myEntries="@array/suppliers" />
/> 
```

不知道这个答案是否正是您正在寻找的，但它的行为就像`android:entries`. 希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:21:13.650

Joala 上面的回答在技术上是正确的，但有一种更简单的表达方式。

您可以直接询问 StringArray 的 resourceId，而不是遍历 StyledAttributes。

```
// Get the DisplayValues from the XML config.
final TypedArray customAttrs = getContext().obtainStyledAttributes(attrs, R.styleable.ComboBox);
final int resourceId = customAttrs.getResourceId(R.styleable.ComboBox_myEntries, -1);
if (resourceId == -1) {
    throw new IllegalArgumentException("ComboBox requires a myEntries attribute that points to a string-array resource");
}

final ArrayAdapter<String> a = new ArrayAdapter<String>(this.getContext(), android.R.layout.simple_spinner_dropdown_item, resourceId);
s.setAdapter(a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:10:49.813

尝试像这样加载您的数组：

```
String[] array = getResources().getStringArray(R.array.recipes_string_array);

ArrayAdapter spinnerAdapter = new ArrayAdapter<String>(getActivity(), R.layout.simple_spinner_dropdown_item) {

    @Override
    public int getCount() {
       return array.length;
    }

    @Override
        public String getItem(int position) {
        return array[position];
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        //Create your item for the spinner and return it         
        return spinnerItemview; 
    }

}

spinner.setAdapter(spinnerAdapter); 
```

# wcf - 当我使用 WsdlImporter 时，我得到了不同的数据，然后使用 Add Web Reference

> ID：13747402
> 
> 赞同：0
> 
> 时间：2012-12-06T15:52:50.467
> 
> 标签：wcf

我必须连接到第三方客户端提供的服务。问题是动态地做到这一点。当我使用添加 Web 引用以静态方式生成代理时，一切正常。通过使用[WsdlImporter](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CC8QFjAA&url=http://msdn.microsoft.com/en-us/library/system.servicemodel.description.wsdlimporter.aspx&ei=pL3AUJf0I4jCswauioHQCw&usg=AFQjCNHH4HA1LbGHqX9cGWCQvJdVPmkJwA)和 CodeDom，我得到了一些奇怪的生成类（每个实例的代理客户端）。

然后我看到在添加服务引用的情况下，我得到了与 WsdlImporter 相同的值。我的结论是 svcutil.exe 使用了 WsdlImporter。

有人知道这里有什么不同吗？服务使用的是 SOAP1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:26:31.440

这个问题的解决方案是使用[ServiceDescriptionImporter](http://msdn.microsoft.com/en-us/library/system.web.services.description.servicedescriptionimporter.aspx)。这个导入器作为 wsdl.exe 工作。此外，必须导入 XSD 方案（还要注意嵌套模式）。很好的示例如下： [http ://forums.asp.net/post/1740748.aspx](http://forums.asp.net/post/1740748.aspx)

谢谢大家，现在可以用了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:50:35.080

它们只是两种不同的工具。**svcutil.exe**实际上`WsdlImporter`在幕后使用（这就是两个输出相同的原因）。**Add Web Reference 使用与工具wsdl.exe**相同的类（我不知道它们内部使用的是哪个类，但您可以使用 ILSpy 或反射器之类的工具来查看 wsdl.exe 使用什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:39:06.887

“添加 Web 引用”是旧版 ASMX 支持的一部分，而不是 WCF 的一部分。如果您有选择，请不要使用它。

# java - 原因：java.lang.ClassCastException: android.widget.RelativeLayout 不能转换为 com.slidingmenu.lib.SlidingMenu

> ID：13747409
> 
> 赞同：0
> 
> 时间：2012-12-06T15:53:06.690
> 
> 标签：java, android

我刚刚在 stackoverflow 和一些论坛上阅读了有关此问题的所有问题，但仍然没有解决方案。我试图删除 R.java，清除缓存，编辑 .xml 但没有任何帮助。

错误文字：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.easyten.app/com.easyten.app.EasyTenActivity}: 
java.lang.ClassCastException: android.widget.RelativeLayout cannot be cast to com.slidingmenu.lib.SlidingMenu ...
Caused by: java.lang.ClassCastException: android.widget.RelativeLayout cannot be cast to com.slidingmenu.lib.SlidingMenu
        at com.slidingmenu.lib.app.SlidingActivityHelper.onCreate(SlidingActivityHelper.java:32) 
```

这是代码：

`slidingmenumain.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<com.slidingmenu.lib.SlidingMenu xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/slidingmenumain"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

`SlidingActivityHelper.java`

```
package com.slidingmenu.lib.app;

import android.app.Activity;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;

import com.slidingmenu.lib.R;
import com.slidingmenu.lib.SlidingMenu;

public class SlidingActivityHelper {

    private Activity mActivity;

    private SlidingMenu mSlidingMenu;
    private View mViewAbove;
    private View mViewBehind;
    private boolean mBroadcasting = false;

    private boolean mOnPostCreateCalled = false;
    private boolean mEnableSlide = true;

    public SlidingActivityHelper(Activity activity) {
        mActivity = activity;
    }

    public void onCreate(Bundle savedInstanceState) {
        mSlidingMenu = (SlidingMenu) LayoutInflater.from(mActivity).inflate(R.layout.slidingmenumain, null);
    }

    ...other code
} 
```

32行`SlidingActivityHelper.java`是`mSlidingMenu = (SlidingMenu) LayoutInflater.from(mActivity).inflate(R.layout.slidingmenumain, null);`

`SlidingMenu.java`

```
package com.slidingmenu.lib;

import java.lang.reflect.Method;

import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Point;
import android.graphics.Rect;
import android.os.Parcel;
import android.os.Parcelable;
import android.util.AttributeSet;
import android.view.Display;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.Window;
import android.view.WindowManager;
import android.widget.RelativeLayout;

import com.slidingmenu.lib.CustomViewAbove.OnPageChangeListener;

public class SlidingMenu extends RelativeLayout {

    public static final int TOUCHMODE_MARGIN = 0;
    public static final int TOUCHMODE_FULLSCREEN = 1;

    private CustomViewAbove mViewAbove;
    private CustomViewBehind mViewBehind;
    private OnOpenListener mOpenListener;
    private OnCloseListener mCloseListener;

    //private boolean mSlidingEnabled;

    public static void attachSlidingMenu(Activity activity, SlidingMenu sm, boolean slidingTitle) {

        if (sm.getParent() != null)
            throw new IllegalStateException("SlidingMenu cannot be attached to another view when" +
                    " calling the static method attachSlidingMenu");

        if (slidingTitle) {
            // get the window background
            TypedArray a = activity.getTheme().obtainStyledAttributes(new int[] {android.R.attr.windowBackground});
            int background = a.getResourceId(0, 0);
            // move everything into the SlidingMenu
            ViewGroup decor = (ViewGroup) activity.getWindow().getDecorView();
            ViewGroup decorChild = (ViewGroup) decor.getChildAt(0);
            decor.removeAllViews();
            // save ActionBar themes that have transparent assets
            decorChild.setBackgroundResource(background);
            sm.setContent(decorChild);
            decor.addView(sm);
        } else {
            // take the above view out of
            ViewGroup content = (ViewGroup) activity.findViewById(Window.ID_ANDROID_CONTENT);
            View above = content.getChildAt(0);
            content.removeAllViews();
            sm.setContent(above);
            content.addView(sm, LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
        }
    }

    public interface OnOpenListener {
        public void onOpen();
    }

    public interface OnOpenedListener {
        public void onOpened();
    }

    public interface OnCloseListener {
        public void onClose();
    }

    public interface OnClosedListener {
        public void onClosed();
    }

    public interface CanvasTransformer {
        public void transformCanvas(Canvas canvas, float percentOpen);
    }

    public SlidingMenu(Context context) {
        this(context, null);
    }

    public SlidingMenu(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public SlidingMenu(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        LayoutParams behindParams = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
        mViewBehind = new CustomViewBehind(context);
        addView(mViewBehind, behindParams);
        LayoutParams aboveParams = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
        mViewAbove = new CustomViewAbove(context);
        addView(mViewAbove, aboveParams);
        // register the CustomViewBehind2 with the CustomViewAbove
        mViewAbove.setCustomViewBehind(mViewBehind);
        mViewBehind.setCustomViewAbove(mViewAbove);
        mViewAbove.setOnPageChangeListener(new OnPageChangeListener() {
            public static final int POSITION_OPEN = 0;
            public static final int POSITION_CLOSE = 1;

            public void onPageScrolled(int position, float positionOffset,
                    int positionOffsetPixels) { }

            public void onPageSelected(int position) {
                if (position == POSITION_OPEN && mOpenListener != null) {
                    mOpenListener.onOpen();
                } else if (position == POSITION_CLOSE && mCloseListener != null) {
                    mCloseListener.onClose();
                }
            }
        });

        // now style everything!
        TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.SlidingMenu);
        // set the above and behind views if defined in xml
        int viewAbove = ta.getResourceId(R.styleable.SlidingMenu_viewAbove, -1);
        if (viewAbove != -1)
            setContent(viewAbove);
        int viewBehind = ta.getResourceId(R.styleable.SlidingMenu_viewBehind, -1);
        if (viewBehind != -1)
            setMenu(viewBehind);
        int touchModeAbove = ta.getInt(R.styleable.SlidingMenu_aboveTouchMode, TOUCHMODE_MARGIN);
        setTouchModeAbove(touchModeAbove);
        int touchModeBehind = ta.getInt(R.styleable.SlidingMenu_behindTouchMode, TOUCHMODE_MARGIN);
        setTouchModeBehind(touchModeBehind);

        int offsetBehind = (int) ta.getDimension(R.styleable.SlidingMenu_behindOffset, -1);
        int widthBehind = (int) ta.getDimension(R.styleable.SlidingMenu_behindWidth, -1);
        if (offsetBehind != -1 && widthBehind != -1)
            throw new IllegalStateException("Cannot set both behindOffset and behindWidth for a SlidingMenu");
        else if (offsetBehind != -1)
            setBehindOffset(offsetBehind);
        else if (widthBehind != -1)
            setBehindWidth(widthBehind);
        else
            setBehindOffset(0);
        float scrollOffsetBehind = ta.getFloat(R.styleable.SlidingMenu_behindScrollScale, 0.33f);
        setBehindScrollScale(scrollOffsetBehind);
        int shadowRes = ta.getResourceId(R.styleable.SlidingMenu_shadowDrawable, -1);
        if (shadowRes != -1) {
            setShadowDrawable(shadowRes);
        }
        int shadowWidth = (int) ta.getDimension(R.styleable.SlidingMenu_shadowWidth, 0);
        setShadowWidth(shadowWidth);
        boolean fadeEnabled = ta.getBoolean(R.styleable.SlidingMenu_behindFadeEnabled, true);
        setFadeEnabled(fadeEnabled);
        float fadeDeg = ta.getFloat(R.styleable.SlidingMenu_behindFadeDegree, 0.66f);
        setFadeDegree(fadeDeg);
        boolean selectorEnabled = ta.getBoolean(R.styleable.SlidingMenu_selectorEnabled, false);
        setSelectorEnabled(selectorEnabled);
        int selectorRes = ta.getResourceId(R.styleable.SlidingMenu_selectorDrawable, -1);
        if (selectorRes != -1)
            setSelectorDrawable(selectorRes);
    }

    public void setContent(int res) {
        setContent(LayoutInflater.from(getContext()).inflate(res, null));
    }

    public void setContent(View v) {
        mViewAbove.setContent(v);
        mViewAbove.invalidate();
        showAbove(true);
    }

    public void setMenu(int res) {
        setMenu(LayoutInflater.from(getContext()).inflate(res, null));
    }

    public void setMenu(View v) {
        mViewBehind.setMenu(v);
        mViewBehind.invalidate();
    }

    public void setSlidingEnabled(boolean b) {
        mViewAbove.setSlidingEnabled(b);
    }

    public boolean isSlidingEnabled() {
        return mViewAbove.isSlidingEnabled();
    }

    /**
     * 
     * @param b Whether or not the SlidingMenu is in a static mode 
     * (i.e. nothing is moving and everything is showing)
     */
    public void setStatic(boolean b) {
        if (b) {
            setSlidingEnabled(false);
            mViewAbove.setCustomViewBehind(null);
            mViewAbove.setCurrentItem(1);
            mViewBehind.setCurrentItem(0);  
        } else {
            mViewAbove.setCurrentItem(1);
            mViewBehind.setCurrentItem(1);
            mViewAbove.setCustomViewBehind(mViewBehind);
            setSlidingEnabled(true);
        }
    }

    /**
     * Shows the behind view
     */
    public void showBehind(boolean b) {
        mViewAbove.setCurrentItem(0, b);
    }

    public void showBehind() {
        mViewAbove.setCurrentItem(0);
    }

    /**
     * Shows the above view
     */
    public void showAbove(boolean b) {
        mViewAbove.setCurrentItem(1, b);
    }

    public void showAbove() {
        mViewAbove.setCurrentItem(1);
    }

    /**
     * 
     * @return Whether or not the behind view is showing
     */
    public boolean isBehindShowing() {
        return mViewAbove.getCurrentItem() == 0;
    }

    /**
     * 
     * @return The margin on the right of the screen that the behind view scrolls to
     */
    public int getBehindOffset() {
        return ((RelativeLayout.LayoutParams)mViewBehind.getLayoutParams()).rightMargin;
    }

    /**
     * 
     * @param i The margin on the right of the screen that the behind view scrolls to
     */
    public void setBehindOffset(int i) {
        RelativeLayout.LayoutParams params = ((RelativeLayout.LayoutParams)mViewBehind.getLayoutParams());
        int bottom = params.bottomMargin;
        int top = params.topMargin;
        int left = params.leftMargin;
        params.setMargins(left, top, i, bottom);
    }

    /**
     * 
     * @param i The width the Sliding Menu will open to in pixels
     */
    @SuppressWarnings("deprecation")
    public void setBehindWidth(int i) {
        int width;
        Display display = ((WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE))
                .getDefaultDisplay();
        try {
            Class<?> cls = Display.class;
            Class<?>[] parameterTypes = {Point.class};
            Point parameter = new Point();
            Method method = cls.getMethod("getSize", parameterTypes);
            method.invoke(display, parameter);
            width = parameter.x;
        } catch (Exception e) {
            width = display.getWidth();
        }
        setBehindOffset(width-i);
    }

    /**
     * 
     * @param res A resource ID which points to the width the Sliding Menu will open to 
     */
    public void setBehindWidthRes(int res) {
        int i = (int) getContext().getResources().getDimension(res);
        setBehindWidth(i);
    }

    /**
     * 
     * @param res The dimension resource to be set as the behind offset
     */
    public void setBehindOffsetRes(int res) {
        int i = (int) getContext().getResources().getDimension(res);
        setBehindOffset(i);
    }

    /**
     * 
     * @return The scale of the parallax scroll
     */
    public float getBehindScrollScale() {
        return mViewAbove.getScrollScale();
    }

    /**
     * 
     * @param f The scale of the parallax scroll (i.e. 1.0f scrolls 1 pixel for every
     * 1 pixel that the above view scrolls and 0.0f scrolls 0 pixels)
     */
    public void setBehindScrollScale(float f) {
        mViewAbove.setScrollScale(f);
    }

    public void setBehindCanvasTransformer(CanvasTransformer t) {
        mViewBehind.setCanvasTransformer(t);
    }

    public int getTouchModeAbove() {
        return mViewAbove.getTouchMode();
    }

    public void setTouchModeAbove(int i) {
        if (i != TOUCHMODE_FULLSCREEN && i != TOUCHMODE_MARGIN) {
            throw new IllegalStateException("TouchMode must be set to either" +
                    "TOUCHMODE_FULLSCREEN or TOUCHMODE_MARGIN.");
        }
        mViewAbove.setTouchMode(i);
    }

    public int getTouchModeBehind() {
        return mViewBehind.getTouchMode();
    }

    public void setTouchModeBehind(int i) {
        if (i != TOUCHMODE_FULLSCREEN && i != TOUCHMODE_MARGIN) {
            throw new IllegalStateException("TouchMode must be set to either" +
                    "TOUCHMODE_FULLSCREEN or TOUCHMODE_MARGIN.");
        }
        mViewBehind.setTouchMode(i);
    }

    public void setShadowDrawable(int resId) {
        mViewAbove.setShadowDrawable(resId);
    }

    public void setShadowWidthRes(int resId) {
        setShadowWidth((int)getResources().getDimension(resId));
    }

    public void setShadowWidth(int pixels) {
        mViewAbove.setShadowWidth(pixels);
    }

    public void setFadeEnabled(boolean b) {
        mViewAbove.setBehindFadeEnabled(b);
    }

    public void setFadeDegree(float f) {
        mViewAbove.setBehindFadeDegree(f);
    }

    public void setSelectorEnabled(boolean b) {
        mViewAbove.setSelectorEnabled(true);
    }

    public void setSelectedView(View v) {
        mViewAbove.setSelectedView(v);
    }

    public void setSelectorDrawable(int res) {
        mViewAbove.setSelectorDrawable(BitmapFactory.decodeResource(getResources(), res));
    }

    public void setSelectorDrawable(Bitmap b) {
        mViewAbove.setSelectorDrawable(b);
    }

    public void setOnOpenListener(OnOpenListener listener) {
        //mViewAbove.setOnOpenListener(listener);
        mOpenListener = listener;
    }

    public void setOnCloseListener(OnCloseListener listener) {
        //mViewAbove.setOnCloseListener(listener);
        mCloseListener = listener;
    }

    public void setOnOpenedListener(OnOpenedListener listener) {
        mViewAbove.setOnOpenedListener(listener);
    }

    public void setOnClosedListener(OnClosedListener listener) {
        mViewAbove.setOnClosedListener(listener);
    }

    private static class SavedState extends BaseSavedState {
        boolean mBehindShowing;

        public SavedState(Parcelable superState) {
            super(superState);
        }

        public void writeToParcel(Parcel out, int flags) {
            super.writeToParcel(out, flags);
            out.writeBooleanArray(new boolean[]{mBehindShowing});
        }

        /*
        public static final Parcelable.Creator<SavedState> CREATOR
        = ParcelableCompat.newCreator(new ParcelableCompatCreatorCallbacks<SavedState>() {

            public SavedState createFromParcel(Parcel in, ClassLoader loader) {
                return new SavedState(in);
            }

            public SavedState[] newArray(int size) {
                return new SavedState[size];
            }
        });

        SavedState(Parcel in) {
            super(in);
            boolean[] showing = new boolean[1];
            in.readBooleanArray(showing);
            mBehindShowing = showing[0];
        }
        */
    }

    @Override
    protected Parcelable onSaveInstanceState() {
        Parcelable superState = super.onSaveInstanceState();
        SavedState ss = new SavedState(superState);
        ss.mBehindShowing = isBehindShowing();
        return ss;
    }

    @Override
    protected void onRestoreInstanceState(Parcelable state) {
        if (!(state instanceof SavedState)) {
            super.onRestoreInstanceState(state);
            return;
        }

        SavedState ss = (SavedState)state;
        super.onRestoreInstanceState(ss.getSuperState());

        if (ss.mBehindShowing) {
            showBehind(true);
        } else {
            showAbove(true);
        }
    }

    @Override
    protected boolean fitSystemWindows(Rect insets) {

        int leftPadding = getPaddingLeft() + insets.left;
        int rightPadding = getPaddingRight() + insets.right;
        int topPadding = insets.top;
        int bottomPadding = insets.bottom;
        this.setPadding(leftPadding, topPadding, rightPadding, bottomPadding);

        return super.fitSystemWindows(insets);
    }

} 
```

怎么了？我该如何解决？我正在使用 IntelliJ IDEA 12 CE。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T18:42:15.993

这可以通过重新创建`R.java`文件来解决。

**1** . 重建或

**2** . 将 XML 文件中的“”更改`android:id`为新的 id 并重新构建。确保您手动更改对此 ID 的所有引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T18:45:37.553

有时，即使重新创建 R.java 文件、清理和重建项目，这也不起作用。

**对我来说，它一直有效，直到我删除`\gen`和`\bin`文件夹**，然后使用资源和它们的 ID 之间的新关系自动重新创建。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T17:03:55.890

我认为问题只是充气器将您的项目转换为 RelativeLayout 并且您不能在您的项目中转换 relativeLayout （也许这篇文章更精确：[ClassCastException](https://stackoverflow.com/questions/3092796/classcastexception)）。也许您必须放弃并使用您的 id 和 findViewById 检索您的对象。

# javascript - 如何在 ES.Next 中编写库

> ID：13747422
> 
> 赞同：1
> 
> 时间：2012-12-06T15:53:46.303
> 
> 标签：javascript, ecmascript-harmony

我已经阅读了很多关于 ES.Next 的内容，并且对 ES.Next 模块有疑问。在这段时间里，所有 JavaScript 程序员都在匿名函数中编写 JavaScript 库。像 jQuery 的东西：

```
(function( window, undefined ) {
    // ...
    window.jQuery = window.$ = jQuery;
})( window ); 
```

下划线：

```
(function() {
    // ...
}).call( this ); 
```

但是当 JavaScript 获得模块时，一切会发生怎样的变化呢？

```
// MyLibrary.js
module MyLibrary {
    export function Hello() {
        console.log( 'Hello' );
    }
}

// Example.js
import Hello from MyLibrary;

Hello(); // Hello 
```

或者模块也需要写匿名函数？全局变量呢？当 ES.Next 出现时，所有 JavaScript 编码风格如何变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:39:15.087

在 es6 中，脚本隐含地是一个模块，因此不需要显式声明一个模块。此文件夹中的每个文件都是模块，应该有助于演示实际的 es6 使用模式。[https://github.com/Benvie/continuum/tree/gh-pages/engine/builtins](https://github.com/Benvie/continuum/tree/gh-pages/engine/builtins)

# css - RGBa 与不透明度（特别是 BBC 滑块）

> ID：13747425
> 
> 赞同：0
> 
> 时间：2012-12-06T15:53:58.900
> 
> 标签：css, opacity, rgba

我目前想知道哪个是最好的 CSS 属性，不透明度还是 RGBa？更具体地说，我正在尝试重新创建类似于著名的[BBC 主页滑块](http://www.bbc.co.uk/)的东西，这让我想到了他们为什么使用 Opacity。

在我的版本中，我遇到了使用以下两个版本的代码：

```
.left-button {
    background: rgb(255, 255, 255) url('../images/left-arrow.png') no-repeat; //FALLBACK
    background: rgba(255, 255, 255, 0.4) url('../images/left-arrow.png') no-repeat;
} 
```

或者

```
.left-button {
    background: #fff url('../images/left-arrow.png') no-repeat; //FALLBACK
    opacity: 0.4;
} 
```

显然，第二个使实际按钮图像也变得不透明，这就是为什么我认为 BBC 已经为按钮制作了单独的按钮和背景蒙版（在我看来，这是不必要的额外标记）。

不过，我想使用带有 RGBa 的第一个版本。有人愿意指出为什么一个比另一个更好，以及是否有任何我不知道的兼容性问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:05:22.600

两者都不是“更好”的，因为它们做的事情不同，所以这取决于你想要完成的事情。

`opacity`设置整个元素及其所有内容（文本、内嵌图像等）的不透明度。`RGBa`是一种定义具有一定 alpha 透明度的颜色的方法。

所以假设你有一个`div`：

```
<div>Hello!</div> 
```

这将使整个`div`及其内容（“Hello！”）50% 不透明：

```
div {
    background: #000;
    color: #fff;
    opacity: 0.5;
} 
```

而这只会使`div`50% 不透明的背景，同时将文本保留为 100% 不透明的纯白色：

```
div {
    background: rgba(0, 0, 0, 0.5);
    color: #fff;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:55:33.513

`Opacity`被继承到所有子项，`RGBa`不是。如果子项的不透明度较低或没有，请使用 RGBa。

IE8 及更低版本不支持 RGBa，因此您可能需要不透明备份计划。

# javascript - Python：获取 flattr 计数

> ID：13747426
> 
> 赞同：3
> 
> 时间：2012-12-06T15:54:06.010
> 
> 标签：javascript, python, flattr

我得到一个这样的列表（数字是评论的数量）......

```
 14 http://www.spiegelfechter.com/wordpress/8726/auswege-aus-der-sackgasse
  26 http://www.spiegelfechter.com/wordpress/8722/die-asozialen-hinter-die-asozialen
  77 http://www.spiegelfechter.com/wordpress/8717/in-gesetz-gegossene-verfassungswidrigkeit
  91 http://www.spiegelfechter.com/wordpress/8714/the-same-procedure-as-every-year-europa-lugt-sich-selbst-in-die-tasche
 279 http://www.spiegelfechter.com/wordpress/8709/konstruktionsfehler-des-grundeinkommens 
```

...通过...

```
import urllib2
import re

def main():
    pattern = re.compile('<a href="(.*)#comments".*>(\d+) Kommentare</a>')
    liste = []
    for k in range(2, 3):
        for line in urllib2.urlopen("http://www.spiegelfechter.com/wordpress/page/" + str(k)):
            matcher = pattern.search(line)
            if matcher != None:
                liste.append("%4s" % matcher.group(2) + " " + matcher.group(1))
    for elt in sorted(liste):
        print elt

if __name__ == '__main__':
    main() 
```

![扁平计数](../Images/de77f54af165332149aad39b5c8e66a9.png)

我有 77，但是如何在 python 中获得 4 ......？我认为 4 是在 javascript 中生成的，我认为它很难在 python 中处理 javascript，但在这种情况下它可能很容易？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:19:51.770

这是另一种使用硒的解决方案。

```
import urllib, selenium.webdriver

driver = selenium.webdriver.Firefox()
driver.get("http://www.spiegelfechter.com/wordpress/page/2")
comments = driver.find_elements_by_xpath('//span[@class="commentbutton"]')
for comment in comments:
    link = comment.find_element_by_xpath('a')
    comment_count = link.text.split()[0]
    url = comment.find_element_by_xpath('iframe').get_attribute('src')
    flattr = urllib.urlopen(url).read()
    flattr = flattr.split('flattr-count"><span>')[1].split('</span>')[0]
    print (flattr, comment_count, link.get_attribute('href'))
driver.close() 
```

**输出**

```
('1', u'14', u'http://www.spiegelfechter.com/wordpress/8726/auswege-aus-der-sackgasse#comments')
('1', u'26', u'http://www.spiegelfechter.com/wordpress/8722/die-asozialen-hinter-die-asozialen#comments')
('4', u'77', u'http://www.spiegelfechter.com/wordpress/8717/in-gesetz-gegossene-verfassungswidrigkeit#comments')
('1', u'91', u'http://www.spiegelfechter.com/wordpress/8714/the-same-procedure-as-every-year-europa-lugt-sich-selbst-in-die-tasche#comments')
('2', u'279', u'http://www.spiegelfechter.com/wordpress/8709/konstruktionsfehler-des-grundeinkommens#comments') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T17:54:54.353

您可以在 JavaScript 执行*后*[使用 PyQt4 的`QtWebKit`模块](http://webscraping.com/blog/Scraping-JavaScript-webpages-with-webkit/)来检查 HTML 。然后，您可以使用像[lxml.html](http://codespeak.net/lxml/)这样的 HTML 解析器来抓取所需的信息。

 *例如，

```
import urllib2
import lxml.html as LH
from PyQt4 import QtGui, QtCore, QtWebKit
import sys

class Render(QtWebKit.QWebPage):
    def __init__(self, url):
        self.app = QtGui.QApplication(sys.argv)
        QtWebKit.QWebPage.__init__(self)
        self.loadFinished.connect(self._loadFinished)
        self.mainFrame().load(QtCore.QUrl(url))
        self.app.exec_()

    def _loadFinished(self, result):
        self.frame = self.mainFrame()
        self.app.quit()

def main():
    liste = []
    for k in range(2, 3):
        url = "http://www.spiegelfechter.com/wordpress/page/" + str(k)
        r = Render(url)
        content = unicode(r.frame.toHtml())
        doc = LH.fromstring(content)
        for span in doc.xpath('//span[@class="commentbutton"]'):
            a = span.xpath('a')[0]
            post = a.attrib['href']
            kommentare = a.text_content()
            # kommentare is expected to be a string such as '14 Kommentare'
            comments = int(kommentare.split()[0])

            iframe = span.xpath('iframe')[0]
            flattr_url = (iframe.attrib['src'])
            flattr_doc = LH.parse(flattr_url)
            span = flattr_doc.xpath('//span[@class="flattr-count"]')[0]
            flattr_count = int(span.text_content())
            liste.append((comments, flattr_count, post))
        for elt in sorted(liste):
            print(elt)

if __name__ == '__main__':
    main() 
```

产量

```
(14, 1, 'http://www.spiegelfechter.com/wordpress/8726/auswege-aus-der-sackgasse#comments')
(26, 1, 'http://www.spiegelfechter.com/wordpress/8722/die-asozialen-hinter-die-asozialen#comments')
(77, 4, 'http://www.spiegelfechter.com/wordpress/8717/in-gesetz-gegossene-verfassungswidrigkeit#comments')
(91, 1, 'http://www.spiegelfechter.com/wordpress/8714/the-same-procedure-as-every-year-europa-lugt-sich-selbst-in-die-tasche#comments')
(279, 2, 'http://www.spiegelfechter.com/wordpress/8709/konstruktionsfehler-des-grundeinkommens#comments') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:59:17.613

与此同时......我自己的解决方案......（hacky但已删除错误）

```
import urllib2
import re

def main():
    pattern = re.compile('<a href="(.*)#comments".*>(.+) Kommentare</a>')
    patternFlattr = re.compile('"flattrs":([0-9]+),')
    liste = []
    for k in range(10, 11):
        for line in urllib2.urlopen("http://www.spiegelfechter.com/wordpress/page/" + str(k)):
            matcher = pattern.search(line)
            if matcher != None:
                url = matcher.group(1)
                for lineFlattr in urllib2.urlopen("https://api.flattr.com/rest/v2/things/lookup?url=" + url):
                    if lineFlattr == '{"message":"not_found","description":"No thing was found"}':
                        liste.append("   0 %4s %s" % (matcher.group(2), url))
                        break
                    matcherFlattr = patternFlattr.search(lineFlattr)
                    if matcherFlattr != None:
                        liste.append("%4s %4s %s" % (matcherFlattr.group(1), matcher.group(2), url))
                        break
    for elt in sorted(liste):
        print elt

if __name__ == '__main__':
    main() 
```

...返回类似...

```
 0    2 http://www.spiegelfechter.com/wordpress/8592/a-very-european-breakup
   0   11 http://www.spiegelfechter.com/wordpress/7764/nicht-nur-in-eigener-sache-probleme-beim-e-mail-verkehr
   0   11 http://www.spiegelfechter.com/wordpress/7977/zum-wohle-des-volkes
   0   29 http://www.spiegelfechter.com/wordpress/8637/die-intellektuelle-tragodie-des-herrn-k
   0   34 http://www.spiegelfechter.com/wordpress/8558/cornelia-yzer-durch-die-drehtur-und-zuruck
   0   37 http://www.spiegelfechter.com/wordpress/8195/die-privatisierungswelle-im-krankenhaussektor-nimmt-erneut-fahrt-auf
   0   43 http://www.spiegelfechter.com/wordpress/8576/wird-steinbruck-etwa-vom-saulus-zum-paulus-aber-nicht-doch
   0   46 http://www.spiegelfechter.com/wordpress/8675/terminhinweis-6-11-in-berlin
   0   48 http://www.spiegelfechter.com/wordpress/8581/was-unsere-steuergesetzgebung-von-den-usa-lernen-konnte
   0   50 http://www.spiegelfechter.com/wordpress/8571/plan-zur-esm-hebelung-fuhrt-das-bundesverfassungsgericht-ad-absurdum
   0   56 http://www.spiegelfechter.com/wordpress/8111/finanzpolitische-nagelprobe-fur-spd-und-grune
   0   61 http://www.spiegelfechter.com/wordpress/8289/deutschland-hat-gewaltiges-aufholpotential
   0   67 http://www.spiegelfechter.com/wordpress/8216/die-zukunft-des-fiskalpakts-liegt-in-den-handen-der-spd
   0   67 http://www.spiegelfechter.com/wordpress/8604/steinbruck-und-seine-nebeneinkunfte-wie-die-suddeutsche-zeitung-politische-korruption-verharmlost
   0   68 http://www.spiegelfechter.com/wordpress/8579/open-thread-syrien-interview-mit-gunter-meyer
   0   69 http://www.spiegelfechter.com/wordpress/8543/heiner-flassbeck-arbeit-im-markt-oder-markt-fur-arbeit
   0   70 http://www.spiegelfechter.com/wordpress/8696/gastarzte-ein-weiteres-symptom-der-krankheit-namens-privatisierung
   0   71 http://www.spiegelfechter.com/wordpress/7803/neue-informationen-zum-ohnesorg-mord
   0   71 http://www.spiegelfechter.com/wordpress/8606/oskar-lafontaine-bei-den-wirtschaftsimpulsen-2012
   0   74 http://www.spiegelfechter.com/wordpress/7664/2012-in-der-glaskugel
   0   74 http://www.spiegelfechter.com/wordpress/7969/am-1-juli-kein-eis-essen
   0   83 http://www.spiegelfechter.com/wordpress/8183/der-mann-mit-dem-messer-im-rucken
   0   83 http://www.spiegelfechter.com/wordpress/8680/griechenland-wenn-marktkonfomer-zynismus-ein-land-vor-die-hunde-gehen-lasst
   0   84 http://www.spiegelfechter.com/wordpress/8328/irrfahrt-im-fiskalsturm
   0   89 http://www.spiegelfechter.com/wordpress/8523/lebensmittelspekulation-wenn-wirtschaftsethiker-der-unmoral-das-wort-reden
   0   91 http://www.spiegelfechter.com/wordpress/8626/energiekostendebatte-umverteilung-mit-sozialem-mantelchen
   0   94 http://www.spiegelfechter.com/wordpress/8326/die-%e2%80%9esponsoren-von-%e2%80%9ebild-fur-alle
   0   94 http://www.spiegelfechter.com/wordpress/8552/karlsruhe-starkt-die-demokratie-mit-allen-vor-und-nachteilen
   0   94 http://www.spiegelfechter.com/wordpress/8587/open-thread-steinbruck-wird-vizekanzler-kandidat
   0   98 http://www.spiegelfechter.com/wordpress/8556/um-wessen-demokratie-geht-es-hier
   0  101 http://www.spiegelfechter.com/wordpress/8441/gibt-es-ein-free-lunch
   0  102 http://www.spiegelfechter.com/wordpress/7855/angie-im-wunderland
   0  102 http://www.spiegelfechter.com/wordpress/8251/open-thread-die-weichen-fur-den-niedergang-der-linkspartei-sind-gestellt
   0  117 http://www.spiegelfechter.com/wordpress/8492/ezb-unter-beschuss
   0  120 http://www.spiegelfechter.com/wordpress/8176/uber-das-vorgehen-der-salafistischen-kampagne-%e2%80%9elies
   0  129 http://www.spiegelfechter.com/wordpress/8426/sparzwang
   0  136 http://www.spiegelfechter.com/wordpress/8630/haufig-gestellte-fragen-muss-der-steuerzahler-fur-verluste-der-zentralbanken-haften
   0  164 http://www.spiegelfechter.com/wordpress/8222/irrungen-wirrungen-vermogensabgabe
   0  170 http://www.spiegelfechter.com/wordpress/8230/europa-spielt-mit-dem-feuer
   0  170 http://www.spiegelfechter.com/wordpress/8282/volkspartei-gegen-richtungspartei
   0  172 http://www.spiegelfechter.com/wordpress/8259/schatzbriefe-zum-nulltarif-die-spekulation-mit-der-angst
   0  175 http://www.spiegelfechter.com/wordpress/8355/island-ein-fanal-der-hoffnung-in-zeiten-der-krise
   0  286 http://www.spiegelfechter.com/wordpress/8274/open-thread-zum-parteitag-der-linken-in-gottingen
   0  318 http://www.spiegelfechter.com/wordpress/8237/wenn-avatare-uber-werte-quasseln
   1    6 http://www.spiegelfechter.com/wordpress/8633/die-politische-okonomie-des-selbstmitleids
   1   14 http://www.spiegelfechter.com/wordpress/8726/auswege-aus-der-sackgasse
   1   25 http://www.spiegelfechter.com/wordpress/8206/studie-uber-bild-vom-guten-zum-bosen-wulff
   1   26 http://www.spiegelfechter.com/wordpress/8722/die-asozialen-hinter-die-asozialen
   1   27 http://www.spiegelfechter.com/wordpress/8521/seifenblasenwelten
   1   33 http://www.spiegelfechter.com/wordpress/8685/promille-am-steuer-vorzugsweise-steuerbefreit
   1   37 http://www.spiegelfechter.com/wordpress/8172/interview-mit-oe1
   1   44 http://www.spiegelfechter.com/wordpress/8668/wenn-helden-den-mund-aufmachen-2
   1   50 http://www.spiegelfechter.com/wordpress/7961/gedenken-gedanken
   1   56 http://www.spiegelfechter.com/wordpress/7654/die-republikanischen-vorwahlen-in-den-usa
   1   59 http://www.spiegelfechter.com/wordpress/8200/doping-fur-die-fdp
   1   59 http://www.spiegelfechter.com/wordpress/8500/pop-aktion-und-uberlegenheitskult
   1   60 http://www.spiegelfechter.com/wordpress/8532/honorarstreit-der-arzte-kehrt-vor-eurer-eigenen-tur
   1   61 http://www.spiegelfechter.com/wordpress/8266/c-rebell-um-a-l-s-guno-im-wahrheitsrausch
   1   62 http://www.spiegelfechter.com/wordpress/8249/grexit-und-geuro-die-planspiele-der-finanzlobby
   1   77 http://www.spiegelfechter.com/wordpress/8548/open-thread-zum-esm-entscheid
   1   79 http://www.spiegelfechter.com/wordpress/8516/datenschutz-fur-eine-diebesbande
   1   81 http://www.spiegelfechter.com/wordpress/8188/demographische-folgen-der-eurokrise
   1   86 http://www.spiegelfechter.com/wordpress/8242/egon-hat-einen-plan-oder-die-olsenbande-der-spd-und-der-fiskalpakt
   1   91 http://www.spiegelfechter.com/wordpress/8714/the-same-procedure-as-every-year-europa-lugt-sich-selbst-in-die-tasche
   1   93 http://www.spiegelfechter.com/wordpress/8539/bazooka-mit-eingebauter-ladehemmung
   1   95 http://www.spiegelfechter.com/wordpress/8654/piratenpartei-politisches-betriebssystem-mit-bugs
   1  108 http://www.spiegelfechter.com/wordpress/7636/die-eurokrise-als-glaubensfrage
   1  117 http://www.spiegelfechter.com/wordpress/8566/ein-pladoyer-auf-den-klassenkampf
   1  127 http://www.spiegelfechter.com/wordpress/8349/krise-der-institutionen
   1  128 http://www.spiegelfechter.com/wordpress/8527/urheberrecht
   1  130 http://www.spiegelfechter.com/wordpress/8611/wahlalternative2013
   1  165 http://www.spiegelfechter.com/wordpress/8618/der-spiegel-und-die-inflation
   1  178 http://www.spiegelfechter.com/wordpress/8438/die-deutsche-regierung-heizt-die-eurokrise-weiter-an
   1  187 http://www.spiegelfechter.com/wordpress/8269/zu-neuen-ufern-die-linkspartei-vor-dem-gottinger-parteitag
   1  191 http://www.spiegelfechter.com/wordpress/7983/kampf-um-die-deutungshoheit-der-gauck-zitate
   1  217 http://www.spiegelfechter.com/wordpress/8351/merkels-welt
   1  262 http://www.spiegelfechter.com/wordpress/8319/die-agenda-des-salzwasserokonomen
   2   19 http://www.spiegelfechter.com/wordpress/7843/punk-economics-europes-austerian-state-of-play
   2   23 http://www.spiegelfechter.com/wordpress/8178/ein-steuerabkommen-mit-sollbruchstellen
   2   28 http://www.spiegelfechter.com/wordpress/8690/zwischentone
   2   33 http://www.spiegelfechter.com/wordpress/8596/wenn-theorie-und-realitat-einfach-nicht-zusammenfinden-wollen
   2   34 http://www.spiegelfechter.com/wordpress/8562/die-neuerfindung-der-volkswirtschaftslehre
   2   35 http://www.spiegelfechter.com/wordpress/8621/kurzschluss
   2   46 http://www.spiegelfechter.com/wordpress/8174/eine-frage-der-ehre
   2   46 http://www.spiegelfechter.com/wordpress/8483/deutschland-sucht-keinen-spd-kandidaten
   2   47 http://www.spiegelfechter.com/wordpress/8431/mehr-mut-beim-wahlrecht
   2   49 http://www.spiegelfechter.com/wordpress/8645/michael-glos-und-sein-amtseid
   2   55 http://www.spiegelfechter.com/wordpress/8339/demokratie-austeritat-und-die-zwei-europas
   2   55 http://www.spiegelfechter.com/wordpress/8511/zwei-wege
   2   56 http://www.spiegelfechter.com/wordpress/8651/die-angst-vor-dem-gelduntergang
   2   68 http://www.spiegelfechter.com/wordpress/7660/frohes-fest-2
   2   68 http://www.spiegelfechter.com/wordpress/8323/profite-mit-der-krise-i
   2   68 http://www.spiegelfechter.com/wordpress/8700/das-schneeballsystem-der-privaten-krankenversicherung-droht-zu-kollabieren
   2   95 http://www.spiegelfechter.com/wordpress/8573/quotensturm-im-genderwasserglas
   2   98 http://www.spiegelfechter.com/wordpress/7845/konservativer-zwergenaufstand
   2  112 http://www.spiegelfechter.com/wordpress/8446/gauck-und-wie-er-die-welt-sieht
   2  136 http://www.spiegelfechter.com/wordpress/8704/staat-ist-keine-schwabische-hausfrau
   2  156 http://www.spiegelfechter.com/wordpress/7952/das-konnen-wir-uns-sparen
   2  158 http://www.spiegelfechter.com/wordpress/8180/wie-okonomische-irrlehren-die-krise-in-europa-vertiefen
   2  181 http://www.spiegelfechter.com/wordpress/8335/der-energiespar-minister-gibt-bekannt
   2  279 http://www.spiegelfechter.com/wordpress/8709/konstruktionsfehler-des-grundeinkommens
   2  290 http://www.spiegelfechter.com/wordpress/8137/der-ganz-reale-judenhass
   2  394 http://www.spiegelfechter.com/wordpress/7645/robert-misik-uber-die-lust-am-untergang
   3   23 http://www.spiegelfechter.com/wordpress/8693/wilfried-schmickler-dat-is-doch-normaal
   3   76 http://www.spiegelfechter.com/wordpress/7772/sopa
   3   90 http://www.spiegelfechter.com/wordpress/8344/zypern-ein-weiteres-opfer-der-finanzkrise
   3   94 http://www.spiegelfechter.com/wordpress/8598/abgang-mit-ansage
   3  114 http://www.spiegelfechter.com/wordpress/7798/der-autismus-der-okonomen
   3  150 http://www.spiegelfechter.com/wordpress/8256/konig-oskar-dankt-ab
   3  201 http://www.spiegelfechter.com/wordpress/8495/ungehorter-weckruf
   3  214 http://www.spiegelfechter.com/wordpress/8133/benzinpreise-im-fokus
   4   58 http://www.spiegelfechter.com/wordpress/8476/iran-will-die-bombe
   4   76 http://www.spiegelfechter.com/wordpress/8246/schicksalstage-einer-kanzlerin
   4   77 http://www.spiegelfechter.com/wordpress/8717/in-gesetz-gegossene-verfassungswidrigkeit
   4   95 http://www.spiegelfechter.com/wordpress/8202/das-parteiensystem-der-weimarer-republik
   4  132 http://www.spiegelfechter.com/wordpress/7988/die-merkwurdige-starke-der-burgerlichen
   4  146 http://www.spiegelfechter.com/wordpress/8225/stefan-sasses-analyse-zur-nrw-wahl
   4  191 http://www.spiegelfechter.com/wordpress/8294/spanien-und-die-brandstifter-eine-hausgemachte-krise
   4  200 http://www.spiegelfechter.com/wordpress/7835/zur-steinbach-debatte
   4  215 http://www.spiegelfechter.com/wordpress/8114/die-fdp-und-die-schlecker-pleite-polittaliban-auser-kontrolle
   4  228 http://www.spiegelfechter.com/wordpress/8671/die-wurde-des-menschen-ist-antastbar
   5  101 http://www.spiegelfechter.com/wordpress/7948/der-bundesprasident-als-spiegel-des-deutschen-parteienhasses
   5  109 http://www.spiegelfechter.com/wordpress/8117/was-hat-es-mit-der-spreizung-der-vermogensschere-und-der-steigerung-der-kapitaleinkommen-auf-sich
   5  198 http://www.spiegelfechter.com/wordpress/8193/sommertheater-statt-sommermarchen
   5  422 http://www.spiegelfechter.com/wordpress/7807/occupy-und-die-rechtspopulisten
   6  120 http://www.spiegelfechter.com/wordpress/8211/die-angst-der-eliten-vor-dem-volk
   6  238 http://www.spiegelfechter.com/wordpress/7823/die-agonie-der-demokratie
   6  283 http://www.spiegelfechter.com/wordpress/7917/wer-wird-wulffs-nachfolger
   6  296 http://www.spiegelfechter.com/wordpress/7941/eigentor
   9  309 http://www.spiegelfechter.com/wordpress/7931/kandidat-der-herzen-ein-theologe-der-herzlosigkeit 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T10:07:18.510

您始终可以使用 Flattrs 开放 REST API。他们有一个名为[Check if a thing exists](http://developers.flattr.net/api/resources/things/#check-if-a-thing-exists)的资源，您可以在那里发送一个 URL。如果有可用的 URL，则响应将是 302，指向 Flattr 系统中的事物。在那里，您将获得 URL 具有的 flattr 数量以及更多信息。*

# java - 未调用 SslSelectChannelConnector.class 的 java 类文件构造函数

> ID：13747427
> 
> 赞同：0
> 
> 时间：2012-12-06T15:54:09.190
> 
> 标签：java, jetty, ijetty

我正在尝试使用 m2e (maven) 插件在 eclipse 中运行[i-jetty 。](http://code.google.com/p/i-jetty/)第 530 行的文件 IJettyService.java 的源代码给出了这个调用

```
 SslSelectChannelConnector sslConnector = new SslSelectChannelConnector(sslContextFactory); 
```

Eclipse IDE 在这里抱怨

```
The constructor SslSelectChannelConnector(SslContextFactory) is 
 undefined 
```

所以我使用了反编译器，发现它确实存在。

```
/* ------------------------------------------------------------ */
public SslSelectChannelConnector()
{
    this(new SslContextFactory(SslContextFactory.DEFAULT_KEYSTORE_PATH));
    setSoLingerTime(30000);
}

/* ------------------------------------------------------------ */
/** Construct with explicit SslContextFactory.
 * The SslContextFactory passed is added via {@link #addBean(Object)} so that 
 * it's lifecycle may be managed with {@link AggregateLifeCycle}.
 * @param sslContextFactory
 */
public SslSelectChannelConnector(SslContextFactory sslContextFactory)
{
    _sslContextFactory = sslContextFactory;
    addBean(_sslContextFactory);
    setUseDirectBuffers(false);
    setSoLingerTime(30000);
} 
```

* * *

我不明白为什么它会这样。有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:00:33.197

根据您在此处发布的内容，这应该可以。也许您的类路径中有旧版本的码头库？试试看`new SslSelectChannelConnector( null )`会发生什么。

# encryption - 密码破解者如何知道何时完成？

> ID：13747428
> 
> 赞同：3
> 
> 时间：2012-12-06T15:54:09.247
> 
> 标签：encryption, passwords, cryptography

我想我缺少一些关于基于密码的数据加密的基本知识。

破解基于密码哈希的登录身份验证的工具在成功登录时知道它找到了正确的密码（或仍然与哈希匹配的备用密码）。但是如何使用密码作为源破解基于文件或流的加密的工具一键知道什么时候成功？在我看来，不同的尝试密码会将加密的源流转换为不同的目标字节集，而特定的密码会生成“正确”的字节集。我不明白破解工具如何识别它具有正确的未加密字节集，停止尝试并报告“破解！”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T16:01:27.280

大多数情况下，纯文本使用已知模式。如果它是完全随机的，那么攻击者就无法区分成功和失败。可能会返回一组密钥，其中只有一个是正确的。也就是说，大多数纯文本包含足够的信息（如一段较长的英文文本）来区分正确的密钥和错误的密钥。

此外，加密模式可能会泄漏足够的信息来区分纯文本和随机文本。分组密码模式（例如[ECB 和 CBC](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)）尤其可能使用某种纯文本[填充](http://en.wikipedia.org/wiki/Padding_(cryptography))。此填充是在块加密之前添加的，通常包含可识别信息。以 PKCS#5/7 填充模式为例。

请注意，加密算法本身甚至需要承受已知的纯文本攻击，因此即使您已经知道解密文本的样​​子，也应该不可能找到密钥。但是，使用密码会削弱现代密码密码的有效密钥数量，因此密码的强度至关重要。

# c++ - 在 Boost shared_ptr 中存储多个 Lua 状态

> ID：13747429
> 
> 赞同：1
> 
> 时间：2012-12-06T15:54:10.620
> 
> 标签：c++, pointers, boost, lua

我以前没有使用过boost，所以如果我做了一些愚蠢的事情，请原谅我。我有一个包含 lua_State 的类。我有一个 boost::shared_ptr 向量，我 push_back 新状态如下：

```
class Lua_State
{
lua_State *L;
std::string m_scr;

public:
Lua_State() : L(luaL_newstate())
{
    lua_register(L, "test", test);
    luaL_openlibs(L);
}

~Lua_State() {
    lua_close(L);
}

inline bool LoadScript(const char* script)
{
    if (!boost::filesystem::exists(script))
        return false;

    m_scr = fs::path(std::string(script)).filename().string();

    chdir(fs::path(scr).parent_path().string().c_str());

    if (luaL_loadfile(L, m_scr.c_str()))
        return false;

    // prime
    if (lua_pcall(L, 0, 0, 0))
        return false;

    return true;
}
};

typedef boost::shared_ptr<Lua_State> LUASTATEPTR;
class Scripts
{
private:
std::vector<LUASTATEPTR> m_Scripts;
public:
    Scripts() { }

    void TestLoad()
{
    m_Scripts.push_back(LUASTATEPTR(new Lua_State()));
    LUASTATEPTR pState = m_Scripts[0];
    pState->LoadScript("C:/test.lua");
}
}; 
```

代码可以正常工作并添加 Lua 状态，但几秒钟后应用程序崩溃。我不知道为什么会这样。当我手动操作时它工作正常（没有 shared_ptrs 和手动取消引用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:17:57.083

你违反了 3 ¹的规则。您创建了一个重要的析构函数并分配构造函数，而没有禁用或编写复制构造函数和`operator=`.

可能当您创建时，`shared_ptr`您正在复制上述课程。然后临时的被丢弃，事情变得繁荣起来。

所以，首先禁用`LuaState::operator=(LuaState const&)`和`LuaState(LuaState const&)`构造函数（制作一个私有的非实现版本，或者在 C++11`delete`中），或者实现它。

接下来，用于`make_shared<LuaState>()`创建您的`shared_ptr<LuaState>`实例。这将“就地”创建它们并删除副本。

¹我所说的 3 法则是什么？请参阅以下链接：[三法则（维基百科）](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)，[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

# jquery - jquery模式对话框加载xhtml页面但不关闭

> ID：13747430
> 
> 赞同：0
> 
> 时间：2012-12-06T15:54:15.457
> 
> 标签：jquery, jquery-dialog

我有一个模式对话框，单击按钮时会打开，打开时会加载`.xhtml`页面。

在这个 XHTML 页面中，我有一个按钮，用于将一些数据传递回父窗口（对话框被初始化的地方），然后我想关闭对话框但它不会关闭！这是我的代码：

第一页：

```
<script type="text/javascript">                         
    var selected_row_data_json;

    window.lang = new jquery_lang_js();

    $().ready(function () {
        $.ajaxSetup ({
            // Disable caching of AJAX responses
            cache: false
        });
        createDataListDialog();                
    });     

    function setSelectedRowJsonData(row_data_)
    {  
       selected_row_data_json = row_data_;                           
    }           

    function setFormSelectedValues()
    {
        $('#dataListDialog').dialog('close');  
    }

    function createDataListDialog()
    {
        $("#dataListDialog").dialog(
        {                   
            autoOpen: false,                      
            modal: true,                    
            resizable: true,
            open: function (event, ui) {   
            /* <![CDATA[ */                    
                $('#dataListDialog').css('overflow', 'hidden');

                $('body').css('overflow','hidden');
                $(this).load("data_list.xhtml");                       
            /* ]]> */
            },
            height: 400,
            width: 550,
            close: function (event, ui) {                        
                $(this).dialog('destroy');
                createDataListDialog();                        
            },
            create: function(event, ui)   
            {                                                  
                $(this).parents(".ui-dialog").css("padding", 0);                           
                $(this).parents(".ui-dialog:first")
                    .find(".ui-dialog-content").css("padding", 0);
            }
        });       
    }
</script>

<f:view>
    <h:outputLabel value="Code:"  lang="en" onclick="openDialog('dataListDialog');return false;" />

    <div id="dataListDialog" lang="en" title="Users" dir="#{user.dir}">                
    </div>
</f:view> 
```

`data_list.xhtml`页：

```
<script type="text/javascript">
    function test()
    {
        window.parent.setSelectedRowJsonData(selected_row_data_json);
        window.parent.setFormSelectedValues();
    }
</script> 

<h:form id="dataListForm" ">   
    <input type="button" onclick="test()" value="TEST">/input>
</h:form> 
```

难道我做错了什么？遗漏了什么？为什么没有从加载的页面关闭对话框？

**更新**：如果加载的页面是一个`html`页面，那么它工作得很好 - 对话框正在关闭。问题是当页面是`xhtml`页面时..我该如何解决这个问题？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:11:49.393

一种更简单的方法是在加载成功完成后触发`test()`函数——即将它绑定到`complete`事件：

```
$(this).load("data_list.xhtml",
    complete: function(response, status, xhr) {
        window.parent.setSelectedRowJsonData(selected_row_data_json);
        window.parent.setFormSelectedValues();
    }); 
```

奖励：添加一些使用该`status`对象处理服务器错误的条件。

# java - 面向 Java 开发人员的 Eclipse IDE 上的 JSP

> ID：13747438
> 
> 赞同：0
> 
> 时间：2012-12-06T15:54:47.377
> 
> 标签：java, eclipse, jsp, jakarta-ee, eclipse-plugin

我需要在 Eclipse for JAVA（不是 Eclipse for Java EE Developers Edition）上使用 JSP 函数。

由于我已经为纯 JAVA 安装了 Eclipse，我需要为 JSP 页面安装一些插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:30:36.760

转到帮助菜单并选择安装新软件。查找并安装 Eclipse Java Web Developers Tools。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:05:37.417

Eclipse 市场很好。你会在那里得到所有支持的插件。转到帮助/Eclipse 市场

# matlab - MATLAB 按值对两个向量进行排序

> ID：13747441
> 
> 赞同：2
> 
> 时间：2012-12-06T15:54:58.613
> 
> 标签：matlab, vector

这是我想要执行的一项相当简单的任务，但我似乎无法找到一种方法来完成它。我尝试过 sortrows、reshaping 和其他解决方案，但没有一个完全符合我的要求。

本质上，我有两个向量来自相同的值范围，长度不等。有些值是相等的，有些不是。例如

```
A = [1 5 20 30 53 70 92]
B = [2 3 4 16 20 30 60 95 100] 
```

我想要做的是在每个向量中添加“NaN”，以“代替”另一个向量中未共享的值。所以，我希望它们看起来像：

```
A = [1 NaN NaN NaN 5 NaN 20 30 53 NaN 70 92 NaN NaN]
B = [NaN 2 3 4 NaN 16 20 30 NaN 60 NaN NaN 95 100] 
```

向量将具有用于另一个向量的值的占位符的某种方法。

我是否合并向量，对其进行排序，然后以某种方式搜索并用 NaN 替换来自另一个向量的所有值？这似乎是一个笨拙的解决方案，尽管并非不可能。我觉得有一些更优雅的方式来完成我所缺少的。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T16:03:04.057

这是使用简单地图的一种解决方案：

```
A = [1 5 20 30 53 70 92]
B = [2 3 4 16 20 30 60 95 100]

% map all A and B elements
% use 1 for A and 2 for B
map = zeros(max([A,B]),1);
map(A) = 1;
map(B) = bitor(map(B), 2);

% find the values present in either A, or B
[~,~,j] = find(map);
AA = nan(size(j));
BB = nan(size(j));
AA(bitand(j,1)~=0) = A;
BB(bitand(j,2)~=0) = B; 
```

与 Rodys 解决方案的比较表明这种方法要快一些：

```
A = unique(randi(10000, 1000, 1));
B = unique(randi(10000, 1000, 1));

tic;
for i=1:1000
    map=zeros(10000,1);
    map(A) = 1;
    map(B) = bitor(map(B), 2);
    [~,~,j] = find(map);
    AA = nan(size(j));
    BB = nan(size(j));
    AA(bitand(j,1)~=0) = A;
    BB(bitand(j,2)~=0) = B;
end
toc

tic
for i=1:1000
    C = union(A,B);
    Ap = NaN(size(C));   
    Ap(ismember(C,A)) = A;
    Bp = NaN(size(C));   
    Bp(ismember(C,B)) = B;
end
toc

isequalwithequalnans(BB, Bp)
isequalwithequalnans(AA, Ap)

Elapsed time is 0.283828 seconds.
Elapsed time is 0.457204 seconds.

ans =
 1

ans =
 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T16:02:09.150

好吧，这是一种方法：

```
% union of sets A and B
C = union(A,B);

% initialize new sets, check membership, and 
% assign old values when applicable
Ap = NaN(size(C));   Ap(ismember(C,A)) = A;
Bp = NaN(size(C));   Bp(ismember(C,B)) = B; 
```

请注意，`union`摆脱重复。如果您想*保留*所有重复，请使用手册`sort`和第二个输出`ismember`：

```
% combine and sort, KEEPING repetitions
C = sort([A B]);

% initialize new sets, check membership, and 
% assign old values when applicable
Ap = NaN(size(C));         Bp = NaN(size(C));  
[I,Ab] = ismember(C,A);    [I,Bb] = ismember(C,B);
Ap(I) = A(Ab(I));          Bp(I) = B(Bb(I)); 
```

# java-ee-5 - 无法解释的编译错误

> ID：13747442
> 
> 赞同：1
> 
> 时间：2012-12-06T15:55:00.807
> 
> 标签：java-ee-5

在一个项目中，开发人员使用了`HttpServletResponse.setContentTYpe()`，然后是`HttpServletResponse.setCharacterEncoding()`; 由于`response.setCharacterEncoding`.

很明显，该`HttpServletResponse`课程丢失了，但仔细检查我做了很多研究并发现最合理的原因可能是这个`servlet-api.jar`并且`jsp-api.jar`没有包含在`classpath`构建过​​程中。我也在开发人员端检查了它，但错误仍然存​​在。所以我问了那些在这个过程中是老手的人，他提出的原因是错误是由于`HttpServletResponse.setContentTYpe()`，其次是，并且在用它的工作正常`HttpServletResponse.setCharacterEncoding()`替换了两条线之后。`HttpServletResponse.setContentType("application/json;UTF8")`

我再次浏览了 javadocs 以查看是否可能，但我没有任何这样的逻辑。谁能告诉我这两种方法是否可能导致编译错误。还是我需要从 Complete Reference 开始学习 Java。

# parsing - 如何限制单子转换器解析器组合器中的回溯

> ID：13747447
> 
> 赞同：3
> 
> 时间：2012-12-06T15:55:12.750
> 
> 标签：parsing, haskell, monad-transformers, parser-combinators, monadplus

**tl; dr，**我如何实现可以限制回溯的解析器，其中解析器是单子转换器堆栈？

我还没有找到这种方法的任何论文、博客或示例实现；似乎限制回溯的典型方法是具有附加构造函数的数据类型，或者默认情况下关闭回溯的 Parsec 方法。

我目前的实现——使用`commit`组合器，见下文——是错误的；我不确定类型，它是否属于类型类，而且我的实例不像它们应该的那样通用。

谁能描述如何干净地做到这一点，或指出我的资源？

我在下面添加了我当前的代码；抱歉帖子这么长！

* * *

堆栈：

```
StateT
MaybeT/ListT
Either e 
```

目的是回溯在中间层运行——一个`Nothing`或一个空列表不一定会产生错误，它只是意味着应该尝试不同的分支——而底层是错误的（有一些上下文信息）立即中止解析。

```
{-# LANGUAGE NoMonomorphismRestriction, FunctionalDependencies, 
             FlexibleInstances, UndecidableInstances #-}

import Control.Monad.Trans.State   (StateT(..))
import Control.Monad.State.Class   (MonadState(..))
import Control.Monad.Trans.Maybe   (MaybeT(..))
import Control.Monad.Trans.List    (ListT(..))
import Control.Monad               (MonadPlus(..), guard)    

type Parser e t mm a = StateT [t] (mm (Either e)) a

newtype DParser e t a = 
    DParser {getDParser :: Parser e t MaybeT a}

instance Monad (DParser e t) where
  return = DParser . return
  (DParser d) >>= f = DParser (d >>= (getDParser . f))

instance MonadPlus (DParser e t) where
  mzero = DParser (StateT (const (MaybeT (Right Nothing))))
  mplus = undefined   -- will worry about later

instance MonadState [t] (DParser e t) where
  get = DParser get
  put = DParser . put 
```

几个解析类：

```
class (Monad m) => MonadParser t m n | m -> t, m -> n where
  item  :: m t
  parse :: m a -> [t] -> n (a, [t])

class (Monad m, MonadParser t m n) => CommitParser t m n where
  commit :: m a -> m a 
```

他们的例子：

```
instance MonadParser t (DParser e t) (MaybeT (Either e)) where
  item = 
      get >>= \xs -> case xs of
                          (y:ys) -> put ys >> return y;
                          []     -> mzero;
  parse = runStateT . getDParser

instance CommitParser t (DParser [t] t) (MaybeT (Either [t])) where
  commit p =
      DParser (
        StateT (\ts -> MaybeT $ case runMaybeT (parse p ts) of
                            Left e          ->  Left e;
                            Right Nothing   ->  Left ts;
                            Right (Just x)  ->  Right (Just x);)) 
```

还有几个组合器：

```
satisfy f = 
    item >>= \x ->
    guard (f x) >>
    return x

literal x = satisfy (== x) 
```

然后这些解析器：

```
ab = literal 'a' >> literal 'b'

ab' = literal 'a' >> commit (literal 'b') 
```

给出这些结果：

```
> myParse ab "abcd"
Right (Just ('b',"cd"))  -- succeeds

> myParse ab' "abcd"
Right (Just ('b',"cd"))  -- 'commit' doesn't affect success

> myParse ab "acd"
Right Nothing       -- <== failure but not an error

> myParse ab' "acd"
Left "cd"           -- <== error b/c of 'commit' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T20:47:01.207

答案似乎在[`MonadOr`类型类](http://www.haskell.org/haskellwiki/MonadPlus_reform_proposal)中（不幸的是，它不是标准库的一部分）：

> ```
> class MonadZero m => MonadOr m where   
>   morelse :: m a -> m a -> m a 
> ```
> 
> 满足 Monoid 和 Left Catch：
> 
> ```
> morelse mzero b = b 
> morelse a mzero = a 
> morelse (morelse a b) c = morelse a (morelse b c) 
> morelse (return a) b = return a 
> ```

# emacs - 在 NTemacs 上的 eshell 中使用 grep

> ID：13747449
> 
> 赞同：1
> 
> 时间：2012-12-06T15:55:20.323
> 
> 标签：emacs, grep, cygwin, eshell

我一直在尝试使用 NTemacs 和 Cygwin 中的 grep 对子文件夹中的文件执行递归 grep 命令。到目前为止，“最好”的结果是在 eshell 中使用 grep。当我使用这个时：

grep "t" -r *

我得到了一个包含字母 t 的所有文件名的列表，在所有子文件夹中向下一层，但没有别的。在 Cygwin 我什么也得不到。我正在研究一个不在 Cygwin 安装中的目录。不知道是不是那个mather。

我想要的是匹配所有文件中更复杂字符串的内容（不仅是文件名，还有内容）。并在所有子目录中。

我想使用 emacs 中的 eshell，但我愿意接受建议，除了使用 LINUX 的形式。这是一台工作 PC，我不想进行 LINUX 安装的所有设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:22:22.253

[我刚刚为另一个问题](https://stackoverflow.com/questions/13749722/comparing-differences-in-files-using-grep-doesnt-seem-to-work-in-windows)写了一个非常相似的答案，但我怀疑这是同一个根本问题：

我的第一个想法是你的文件有 windows 行尾 (CRLF) 而不是 unix/linux 行尾 (LF)，这会影响 grep 解析文件的能力。尝试运行这个：

```
dos2unix filename 
```

在您需要搜索的每个文件上，然后再次尝试您的 grep 语句。

如果您需要跨多个目录转换许多文件，我建议使用`dos2unix`以下`-exec`操作`find`：

```
find . -exec dos2unix {} \; 
```

（当然，在运行之前添加您需要找到的任何其他选项）

# php - 使用 PHP 扫描目录并在 JavaScript 中使用结果

> ID：13747450
> 
> 赞同：2
> 
> 时间：2012-12-06T15:55:22.470
> 
> 标签：php, javascript, jquery, scandir

我用 PHP 扫描一个只包含文件夹的目录：

```
$folders = scandir('gallery'); 
```

现在我想检查 javascript 中的字符串是否是此目录中的文件夹。

```
if(theString == allTheFolders){
     alert('yay');
} 
```

现在`$folders`是一个包含字符串的数组。要获取所有字符串，我使用 foreach 循环并忽略`'.' & '..'`目录的。但是我怎样才能在 if 循环中获取所有这些文件夹？希望你能理解我的问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T15:57:46.947

将您的数组作为 JSON 回显到您的 JavaScript 中。

```
echo 'var folders = ', json_encode($folders); 
```

然后你可以直接在 JavaScript 中循环或做任何你需要的事情。

* * *

**编辑：**现在您已经发布了您的实际问题......在您的 JavaScript 中执行此操作：

```
var wantedFolder = 'something';
var wantedFolderFound = false;
for (folderIndex in folders) {
    if (folders[folderIndex] === wantedFolder) {
        wantedFolderFound = true;
    }
}
if (wantedFolderFound) {
    alert('Folder found!');
} else {
    alert('Folder not found.');
} 
```

作为替代方案，我可能会使用`Array.indexOf()`. 它并非在所有浏览器中都可用，但该问题很容易解决。请参阅文档： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

# cruisecontrol.net - tSQLt 的成功退出代码是什么

> ID：13747453
> 
> 赞同：1
> 
> 时间：2012-12-06T15:55:29.847
> 
> 标签：cruisecontrol.net, tsqlt

我正在尝试将 tSQLt / SQLTest 与 CruiseControl.NET 集成我的测试正在运行，并且我已经编写了 xsl 文件来显示结果，但是如果任何测试失败，我需要知道如何将构建标记为失败。

我的 CCNet 高管是：

```
<exec executable="$(sqlCmdPath)">
    <description>Run Unit Tests</description>
    <buildArgs>-E -d MyDatabase 
       -i "\CruiseControlProjects\Configuration\CI_SQL\RunTests.sql"
    </buildArgs>
    <baseDirectory>\Artifacts\MyDatabase</baseDirectory>
    <successExitCodes>0,63</successExitCodes>
</exec> 
```

运行测试.sql：

```
IF EXISTS (SELECT * FROM sys.objects WHERE OBJECT_ID = OBJECT_ID(N'[tSQLt].[RunAll]')
AND TYPE IN (N'P',N'PC'))
BEGIN
EXECUTE [tSQLt].[RunAll]
END 
```

测试运行，我有一个后续任务，它在 xml 中生成结果，然后合并到构建日志中：

```
<exec executable="$(sqlCmdPath)">
    <description>Get Unit Tests</description>
    <buildArgs>-E -b -d MyDatabase -h-1 -y0 -I 
       -i "\CruiseControlProjects\Configuration\CI_SQL\GetTestResults.sql" 
       -o "\CruiseControlProjects\Configuration\CI_SQL\Results\TestResults.xml"
    </buildArgs>
    <baseDirectory>\Artifacts\MDatabase</baseDirectory>
    <successExitCodes>0,63</successExitCodes>
</exec> 
```

那么如何让整体构建失败呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:23:21.683

如果你使用[sqlcmd](http://msdn.microsoft.com/en-us/library/ms162773.aspx)的 -b 参数，你应该会发现当批处理失败时它会抛出一个非零代码的错误（如果 tSQLt 至少有一个测试失败，就会发生这种情况）。

但是，我有一个潜在的建议要探索。如果您可以在 Cruise Control 中加载 XML 文件，则可以加载测试，因为 XML 文件的格式与 nUnit 测试输出文件的格式相同。（注意 - 我在[TeamCity](http://www.simple-talk.com/sql/sql-tools/using-sql-test-database-unit-testing-with-teamcity-continuous-integration/)和 Jenkins 上使用过这种方法，但没有尝试使用 Cruise Control）。这会将测试视为测试，而不是“全有或全无”的方法，并使您能够跟踪哪些测试反复失败。

希望有帮助，

戴夫。

# android - Google MapFragment 为空白（白色），找不到类“maps.jk”

> ID：13747455
> 
> 赞同：15
> 
> 时间：2012-12-06T15:55:33.357
> 
> 标签：android, google-maps

我正在尝试在（姜饼 2.3.5）手机上构建官方的[android google map api v2示例。](http://developer.android.com/google/play-services/maps.html)我添加`android-support-v4.jar`到官方示例项目中。

我从官方教程中获取了样本`<android-sdk>/extras/google-play-services/samples/maps`

我在 Eclipse 中复制了示例应用程序，将该`google-play-services_lib`项目作为 Android 库引用，并使用 Android SDK 4.1.2 (api 16) 构建整个项目。

不幸的是，当我启动应用程序时，地图是空白的，我没有任何异常或消息。我唯一得到的是 logcat 中的那些可疑行：

```
 Unable to resolve superclass of Lmaps/a/du; (411)                     
    Link of class 'Lmaps/a/du;' failed                                    
    Unable to resolve superclass of Lmaps/a/ej; (2363)                    
    Link of class 'Lmaps/a/ej;' failed                                    
    Unable to resolve superclass of Lmaps/j/k; (2379)                     
    Link of class 'Lmaps/j/k;' failed 
```

ERR 找不到类'maps.jk'，引用自方法maps.y.ae.a
VFY：无法解析Lmaps/y/ae 中的新实例3571 (Lmaps/j/k;)；

我怀疑我在 eclipse 3.8 中的项目结构有些混乱。

我尝试了以下事情（即使是最愚蠢的）但无济于事。

## 1\. api密钥无效？

我使用 keytool 生成了一个“debug.keystore”并更新了 eclipse 首选项（Android/Build/Keystore）。当然，我注册了新的密钥库/SHA1 并获得了我在 AndroidManifest 文件中使用的新 api 密钥

## 2\. 错误的项目目标？

我尝试使用以下目标构建我的两个项目：

*   安卓 4.2.1
*   谷歌 API 4.2.1

## 3\. 添加 google-play-services_lib 作为项目依赖

我尝试将 google-play-services_lib 添加为项目依赖项，并在演示构建路径中添加为 android 库。并勾选匹配的导出复选框。

## 4.在手机上测试google maps api v2

我下载[了trulia房地产](https://play.google.com/store/apps/details?id=com.trulia.android)应用，据说在手机上使用v2 api，以确保手机与新api兼容

这是示例应用程序的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.mapdemo"
    android:versionCode="1"
    android:versionName="1.0" >
    <permission
        android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />
    <uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />
    <!-- Copied from Google Maps Library/AndroidManifest.xml. -->
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <!-- External storage for caching. -->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <!-- My Location -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <!-- Maps API needs OpenGL ES 2.0\. -->
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />
    <!-- End of copy. -->
    <application
        android:hardwareAccelerated="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/demo_title" >
        <!-- You must insert your own Google Maps for Android API v2 key in here. -->
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="XXXXXXXX" />
        <activity android:name=".MainActivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".BasicMapActivity"
            android:label="@string/basic_map" />
        <activity
            android:name=".CameraDemoActivity"
            android:label="@string/camera_demo" />
        <activity
            android:name=".EventsDemoActivity"
            android:label="@string/events_demo" />
        <activity
            android:name=".GroundOverlayDemoActivity"
            android:label="@string/groundoverlay_demo" />
        <activity
            android:name=".LayersDemoActivity"
            android:label="@string/layers_demo" />
        <activity
            android:name=".LocationSourceDemoActivity"
            android:label="@string/locationsource_demo" />
        <activity
            android:name=".MarkerDemoActivity"
            android:label="@string/marker_demo" />
        <activity
            android:name=".OptionsDemoActivity"
            android:label="@string/options_demo" />
        <activity
            android:name=".PolygonDemoActivity"
            android:label="@string/polygon_demo" />
        <activity
            android:name=".PolylineDemoActivity"
            android:label="@string/polyline_demo" />
        <activity
            android:name=".ProgrammaticDemoActivity"
            android:label="@string/programmatic_demo" />
        <activity
            android:name=".TileOverlayDemoActivity"
            android:label="@string/tile_overlay_demo" />
        <activity
            android:name=".UiSettingsDemoActivity"
            android:label="@string/uisettings_demo" />
        <activity
            android:name=".RawMapViewDemoActivity"
            android:label="@string/raw_mapview_demo" />
        <activity
            android:name=".RetainMapActivity"
            android:label="@string/retain_map" />
        <activity
            android:name=".MultiMapDemoActivity"
            android:label="@string/multi_map_demo" />
    </application>
</manifest> 
```

这是我的项目结构/构建路径的一些屏幕截图。

![项目结构](../Images/f84cc0f885eed24202933a675cde3fdf.png)

![目标和库](../Images/82159757f9dc585de35a8c63908e68e3.png)

![构建路径](../Images/710420951cb669472349521726ac8013.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T07:16:03.183

我认为您在应用 api KEY 时可能会出错。我有同样的问题，最后我发现我打开了错误的服务。在[https://code.google.com/apis/console/](https://code.google.com/apis/console/)，

有`Google Maps API v2`和`Google Maps Android API v2`。

你应该使用`Google Maps Android API v2`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T22:53:43.793

我遇到了完全相同的问题（所有配置都相同，logcat 中的 maps.jk 内容）。但是，对我来说，选择 Google API 作为构建目标解决了它。但那是 Google APIs 4.2，所以我建议您安装更新并尝试使用更新的目标。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-13T23:04:28.620

我通过在*AndroiMainfest.xml*文件中使用 de last *targetSdkVersion更改 de* *targetSdkVersion解决了这个问题。*

 **```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T16:18:49.097

你在使用 ProGuard 吗？通常，像“a”、“b”等类名是 ProGuard 混淆类名的结果，当这种情况发生时，地图 API 可能会中断。如果是这种情况，您将不得不禁用 ProGuard 或`-keep`在您的 proguard.cfg 文件中添加一些行。[这篇文章](https://stackoverflow.com/q/9158373/1207921)展示了这些线条的外观。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-19T21:47:59.633

就我而言，这是由于两个问题

1.  在我的手机上没有安装最新的谷歌地图应用程序（事实上根本没有谷歌地图）
2.  我没有在清单中设置所有必需的权限

```
 <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 

```

如[https://developers.google.com/maps/documentation/android/start#installing_the_google_maps_android_v2_api中所述](https://developers.google.com/maps/documentation/android/start#installing_the_google_maps_android_v2_api)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-05T03:25:01.590

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html) -- 这是 android 中的 adt 包的链接..尝试下载并重新开始..也许您的 ADT 有问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T18:22:20.383

检查您已启用 Google Maps **Android** API v2的控制台 API

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-21T16:03:24.513

我正在处理同样的问题。我试图实现 com.example.mapdemo 并且玩得很开心。

我将 BasicMapActivity 的代码复制到一个干净的新项目中，并使库看起来如上。

基本上，我都无法工作。我在调试器中收到“授权失败”错误。

然后，今天，我在 Google Console 中准备密钥时，专门为每个项目准备了新的密钥，分号后带有特定的 com.example.xxx。

我在每一步都做了项目->清洁。

我先在调试器中运行它，然后运行。而且，如果我记得的话，在对清单进行更改后几次。

然后，最后，他们工作了。最后，似乎每个特定项目都需要一个密钥。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-09T13:40:00.143

这对我有用。当您使用 Google API 控制台创建 API 密钥时，请务必将 ;com.example.mapdemo 附加到 SHA1 指纹。（我正在使用更适合我目前正在开发的另一个应用程序的其他东西。）在这个解决方案中让我知道的是 LogCat 中的授权错误。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-05T01:34:40.567

就我而言，我添加了 LocationSource 接口，以便获取位置数据，但我忘了添加：

```
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

在清单文件中。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-08-23T08:06:41.893

不要忘记为应用程序的调试和发布版本使用单独的密钥！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-09-26T05:15:04.590

如果您已经尝试了所有方法，请尝试卸载并重新安装您的应用程序：在我的手机（S3 mini）上，第一次使用错误的密钥启动后，我更正了它，但直到完全卸载它才起作用。也许使用了某种缓存。**

# php - 表单数据未发送到 MySql 数据库

> ID：13747457
> 
> 赞同：0
> 
> 时间：2012-12-06T15:55:36.960
> 
> 标签：php, mysql

有一个简单的注册表单，它被链接到一个 php 文件，以便将信息发送到数据库，但每次我尝试它时，数据都没有显示在 phpMyAdmin 数据库中？

```
<?php

$name = $_POST['name'];
$address = $_POST['address'];
$number = $_POST['number'];
$email = $_POST['email'];
$details = $_POST['details'];

$user="root";
$password="secure";
$database="darrenweircharity";
mysql_connect("localhost",$user,$password);
@mysql_select_db($database) or die ("Unable to select database");

$query = "INSERT INTO registrationdetails(name, address, number, email, details)".
"VALUES('$name', '$address', '$number', '$email', '$details' NOW())";
mysql_query($query);
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:57:50.583

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

尝试：

```
$query = "INSERT INTO registrationdetails(name, address, number, email, details)".
         "VALUES('" . $name . "', '" . $address . "', '" . $number . "', '" . $email . "', '" . $details . "');"; 
```

您`NOW()`在查询的末尾有不应该在那里。

另请注意，您的代码存在 SQL 注入漏洞（请参阅 参考资料[`mysql_real_escape_string()`](http://php.net/mysql_real_escape_string)），我建议您通过`PDO`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:58:36.213

防止可能的 SQL 注入：

```
$name = mysql_real_escape_string($name);
$address = mysql_real_escape_string($address);
$number = mysql_real_escape_string($number);
$email = mysql_real_escape_string($email);
$details = mysql_real_escape_string($details); 
```

用。。。来代替：

```
$query = "
INSERT INTO registrationdetails (`name`, `address`, `number`, `email`, `details`)
VALUES ('$name', '$address', '$number', '$email', '$details')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:21:07.483

```
$query = "
    INSERT INTO registrationdetails (name, address, number, email, details, date_time)
    VALUES ('{$name}', '{$address}', '{$number}', '{$email}', '{$details}', NOW())
"; 
```

将 替换为`date_time`您的 column_name。并记住在将所有提交的值`mysql_real_escape_string`插入数据库之前对其进行转义。

# ruby-on-rails - 在 Ruby on Rails 中，在保存到数据库之前汇总文件中的数据

> ID：13747459
> 
> 赞同：1
> 
> 时间：2012-12-06T15:55:38.420
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有一个概念问题；我正在尝试编写代码以从 s3 下载日志，然后解析并将其中一些数据存储在 rails 应用程序内的数据库中。

由于这完全是内部的，我只有一个模型，它具有下载和解析日志所需的代码。我的主要解析方法打开一个文件，遍历每一行解析出我想要保存到数据库的某些数据。

我的目标是汇总一个文件（其中有多个日志）中的所有数据，然后将其保存到数据库中。

我正在努力掌握的是如何在将数据保存到 Rails 中的数据库之前对其进行汇总？

例如，如果我有以下日志：

日志/帐户/6 100
日志/帐户/7 250
日志/帐户/6 50
日志/帐户/5 100

我的目标是遍历所有行并保存每个帐户 ID 的总金额，因此我希望将帐户 6、150 保存为总和。出于某种原因，我只能理解 1 个日志的 1 个数据库条目，而不是汇总文件中的日志并将其转换为 1 个数据库条目。

当前解析过程：

```
 def self.create_from_log_file(file)
    s3log = File.open(file).each do |line|
    line_match = S3_LINE_REGEXP.match(line)# get the matchdata
    captures = Hash[ line_match.names.zip( line_match.captures ) ]# convert the matchdata to a hash key value pairs (both strings)
    validate_log_file(captures["timestamp"])# validate file is unique
    captures["http_status"] != 200 # figure out if API request was a http 200
    current_account = extract_account_id(captures["request_path"])# extract account id and find that account
    account_log = S3Log.new # instantiate a new S3Log instance
    account_log.account_id = Account.find_by_id(current_account) # assign the S3Log object its account id
    account_log.total_bytes = calculate_total_bytes_for_file(captures["bytes_sent"])# assign the log bytes to that accounts total for the file
    account_log.total_requests = calculate_total_requests_for_file(acount_log.account_id)# calculate total requests for that account on the file
    account_log.date = Date.parse(captures["timestamp"])
  end

  account_log.save!
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:05:09.723

一些高级指针。首先，由于您的代码可能是一个运行时间较长的作业，因此可能值得使用[Resque](https://github.com/defunkt/resque)或[Sidekiq将其作为后台作业运行](https://github.com/mperham/sidekiq)

其次，将您的工作分解为定义明确的小函数，然后为这些较小的函数编写测试。然后，您将有信心将它们组合成更大的部分，即练习功能分解。或者，采用 OO 方式，创建模型来封装解析逻辑，另一个模型来表示感兴趣的行，可能还有第三个模型来表示可以执行聚合方法的行的集合。

希望这可以帮助。

# zend-framework - 为用户 xyz 隐藏某些表单字段的方法

> ID：13747460
> 
> 赞同：1
> 
> 时间：2012-12-06T15:55:44.443
> 
> 标签：zend-framework, zend-form

目前我正在使用这种方式来获取用户在`ZEND_FORM`.

```
$identity = Zend_Auth::getInstance()->getIdentity(); 
```

对于每个表单字段，我都会在添加表单字段之前检查角色，例如：

```
if($identity->role=='admin') $form->addElement... 
```

有没有更聪明的方法来做到这一点？比如 addElement 的一个选项？

最好的问候 Frgtv10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:02:31.353

你这样做的方式可能会变得混乱。您可以在这里使用 2 种表格。一个主要的包含每个人共有的内容，一个继承自第一个并为管理员添加功能。这将更容易维护，因为您只需根据角色实例化正确的表单，因此只需检查角色而不是表单中的任何地方。

因此，在您的控制器中，您将：

```
if($identity->role=='admin'){
   $form = new Form_WhateverAdmin();
} else {
   $form = new Form_WhateverNotAdmin();
} 
```

以及在哪里

```
Form_WhateverNotAdmin extends Zend_Form 
```

和

```
Form_WhateverAdmin extends Form_WhateverNotAdmin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T15:37:35.550

您还可以删除现有的元素：

```
if($identity->role != 'admin') $form->removeElement('name'); 
```

# mysql - 如何使用join删除mysql行？

> ID：13747462
> 
> 赞同：0
> 
> 时间：2012-12-06T15:55:43.800
> 
> 标签：mysql, join, sql-delete

我有三张桌子：

```
"products" -         contains products
"location" -         store location
"product_orders" -   joins data from products and location 
```

SQL转储：

```
--
-- Table structure for table `location`
--

CREATE TABLE IF NOT EXISTS `location` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=77 ;

--
-- Dumping data for table `location`
--

INSERT INTO `location` (`id`, `name`) VALUES
(1, 'Miami'),
(2, 'Denver');

-- --------------------------------------------------------

--
-- Table structure for table `products`
--

CREATE TABLE IF NOT EXISTS `products` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type` varchar(255) NOT NULL DEFAULT '',
  `product` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=6014552 ;

--
-- Dumping data for table `products`
--

INSERT INTO `products` (`id`, `type`, `product`) VALUES
(1, 'shirt', 'red shirt'),
(2, 'shirt', 'red shirt'),
(3, 'pants', 'blue pants'),
(4, 'pants', 'blue pants');

-- --------------------------------------------------------

--
-- Table structure for table `product_orders`
--

CREATE TABLE IF NOT EXISTS `product_orders` (
  `product_id` int(11) NOT NULL,
  `location_id` int(11) NOT NULL,
  `status` varchar(255) NOT NULL,
  PRIMARY KEY (`product_id`,`location_id`),
  KEY `ix_product_orders` (`location_id`),
  KEY `ix_product_orders_1` (`product_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

--
-- Dumping data for table `product_orders`
--

INSERT INTO `product_orders` (`product_id`, `location_id`, `status`) VALUES
(1, 1, 'sold'),
(2, 2, 'sold'),
(1, 2, 'available'),
(2, 1, 'sold'); 
```

如果我想从商店'miami 中选择所有已售出的产品-此查询有效：

```
SELECT * FROM `products`
INNER JOIN `product_orders`
ON `product_orders`.`product_id`= `products`.`id`
WHERE `product_orders`.`location_id` = '1'
AND
status = 'sold' 
```

您将如何重写以从迈阿密商店中删除所有已售出的产品？我的查询不起作用：

```
 DELETE `products` FROM `products`
INNER JOIN `product_orders`
ON `product_orders`.`location_id` = `products`.`id`
WHERE `product_orders`.`location_id` = '2'
AND
status = 'sold' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:59:05.923

```
DELETE FROM products WHERE id IN (SELECT location_id FROM products_orders WHERE location = 'miami' AND status = 'sold'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:58:48.217

试试这个，

```
DELETE `products` FROM `products` INNER JOIN `products_orders` 
ON `products_orders`.`location_id` = `products`.`id` 
WHERE `products_orders`.`location` = 'miami' 
AND
status = 'sold' 
```

或者

```
DELETE prod FROM `products` AS prod INNER JOIN `products_orders` 
ON `products_orders`.`location_id` = `products`.`id` 
WHERE `products_orders`.`location` = 'miami' 
AND
status = 'sold' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T16:26:43.520

我不确定您是如何在表中设置外键的。但是从最基本的假设来看，产品表保存产品数据，位置保存位置数据。在您的公用表产品订单中，您有一个按产品 id 指向产品表的外键，以及一个按位置与位置表的关系。

因此，为了支持我的评论，我发布了以下查询。这是您的查询，在您的查询中更改了我认为是错字的字段。:-) 就像泡沫堆说的那样，我可能会坚持不懈地这样做......

```
 DELETE FROM `products`
 INNER JOIN `products_orders` 
 ON `products_orders`.`product_id` = `products`.`id`
 WHERE `products_orders`.`location` = 'miami' 
 AND `products_orders`.status = 'sold'
 ; 
```

# mysql - 如何从 mysql 导出单个触发器？

> ID：13747464
> 
> 赞同：5
> 
> 时间：2012-12-06T15:55:46.393
> 
> 标签：mysql, triggers, export

我需要在另一个 mysql 数据库中重新创建单个触发器 - 有没有简单的方法来导出单个触发器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T16:09:37.907

你想要的是你的数据库的单个触发器的转储。

您可以从[本文](http://www.ducea.com/2007/07/25/dumping-mysql-stored-procedures-functions-and-triggers/)和[文档](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)中获得灵感。

例如，此命令仅导出存储过程和触发器：

```
mysqldump --routines --no-create-info --no-data --no-create-db --skip-opt <database> > outputfile.sql 
```

但是，我认为您不能转储单个触发器。由于它只有一个，也许重新创建另一个数据库更容易。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-09-05T16:54:55.850

您可以使用此查询直接从 MySQL 中获取触发器定义：

```
SELECT  ACTION_STATEMENT
FROM    INFORMATION_SCHEMA.TRIGGERS
WHERE   TRIGGER_SCHEMA = 'mydbname'
AND     TRIGGER_NAME = 'mytable_BEFORE_INSERT'; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-21T19:08:51.433

如果您只想要原始 CREATE TRIGGER 语句的语法，[SHOW CREATE TRIGGER](http://dev.mysql.com/doc/refman/5.1/en/show-create-trigger.html)应该可以帮助您。

# hibernate - c3p0 创建的连接比配置中指定的多

> ID：13747467
> 
> 赞同：2
> 
> 时间：2012-12-06T15:56:01.330
> 
> 标签：hibernate, c3p0

我的应用程序使用的是 Hibernate 4.1.7 和 c3p0 0.9.1。

我已将应用程序的 hibernate.cfg.xml 文件中的 c3p0.max_size 属性设置为 50，但创建的 JDBC 连接数已超过该值。此外，我在 Hibernate 配置中也指定了非活动/空闲连接不会被删除。这是我的配置中的一个片段：

```
<property name="c3p0.acquire_increment">1</property>
<property name="c3p0.autoCommitOnClose">false</property>
<property name="c3p0.max_size">50</property>
<property name="c3p0.min_size">1</property>
<property name="c3p0.numHelperThreads">1</property>
<property name="c3p0.maxIdleTime">30</property> 
<property name="c3p0.maxIdleTimeExcessConnections">20</property>
<property name="c3p0.maxConnectionAge">45</property> 
```

我在代码中的 finally 块中明确关闭了我的会话和会话工厂。这是我用来创建 SessionFactory 实例的类：

```
package ics.sis.util;

import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;

import ics.global.runtime.Environment;
import ics.util.properties.PropertiesISUWrapper;

public class HibernateSessionFactory {
    private static SessionFactory sessionFactory;
    private static ServiceRegistry serviceRegistry;
    private static final PropertiesISUWrapper ISU_PROPERTIES = new PropertiesISUWrapper(Environment.getName(),"VzAppIntegration"); 

    public static SessionFactory create() {
        Configuration configuration = new Configuration();
        configuration.configure();

        configuration.setProperty("hibernate.connection.url", ISU_PROPERTIES.getUrl());
        configuration.setProperty("hibernate.connection.password", ISU_PROPERTIES.getPassword());

        serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        
        sessionFactory = configuration.buildSessionFactory(serviceRegistry);
        return sessionFactory;
    }

} 
```

这是执行数据库事务的主要方法之一：

```
public static int insert(int aidm, String termCode, String wappCode) throws SQLException, ClassNotFoundException {      
        // Initialize session and transaction
        SessionFactory sessionFactory = HibernateSessionFactory.create();
        Session session = sessionFactory.openSession();
        Transaction tx = null;
        int applSeqno = 0;
        Stvwapp wapp = null;

        try {
            tx = session.beginTransaction();

            applSeqno = generateApplSeqNo(session, aidm);
            SarheadId sarheadIdDao = new SarheadId();
            sarheadIdDao.setSarheadAidm(aidm);
            sarheadIdDao.setSarheadApplSeqno((short)applSeqno);

            // Find STVWAPP row by WAPP code
            Query query = session.getNamedQuery("findStvwappByWappCode"); 
            query.setString("wappCode", wappCode);

            if (query.list().size() == 0) {
                throw new RuntimeException("Invalid WAPP code specified: " + wappCode);
            } else {
                wapp = (Stvwapp) query.list().get(0);
            }

            Sarhead sarheadDao = new Sarhead();
            sarheadDao.setId(sarheadIdDao);
            sarheadDao.setSarheadActivityDate(new java.sql.Timestamp(System.currentTimeMillis()));
            sarheadDao.setSarheadAddDate(new java.sql.Timestamp(System.currentTimeMillis()));
            sarheadDao.setSarheadAplsCode("WEB");
            sarheadDao.setSarheadApplAcceptInd("N");
            sarheadDao.setSarheadApplCompInd("N");
            sarheadDao.setSarheadApplStatusInd("N");
            sarheadDao.setSarheadPersStatusInd("N");
            sarheadDao.setSarheadProcessInd("N");
            sarheadDao.setSarheadTermCodeEntry(termCode);
            sarheadDao.setStvwapp(wapp);

            session.save(sarheadDao);
        } finally {
            tx.commit();
            session.close();
            sessionFactory.close(); 
        }

        return applSeqno;
    } 
```

**更新**

我将 c3p0 的日志级别更改为 DEBUG 以获得更详细的连接池日志记录，并且我看到它每 3 或 4 秒检查一次过期连接。此外，我看到正在记录以下行，在我看来，池中总共有两个连接。但是，在 Toad 中，我正在监视打开的 JDBC 连接总数，它显示为 6。所以我试图弄清楚为什么这些数字之间存在差异。

> [Env:DEVL] [] - 2012-12-06 12:14:07 DEBUG BasicResourcePool:1644 - trace com.mchange.v2.resourcepool.BasicResourcePool@7f1d11b9 [托管：1，未使用：1，排除：0]（例如com.mchange.v2.c3p0.impl.NewPooledConnection@7b3f1264)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T16:13:39.860

你是说：

> 我已将应用程序的 hibernate.cfg.xml 文件中的 c3p0.max_size 属性设置为 50，但创建的 JDBC 连接数已超过该值。

发生这种情况是因为在您的`insert`方法中您正在调用`create()`方法。每次在您的`create()`方法中，您都会像这样构建一个全新的 sessionFactory：

```
 configuration.buildSessionFactory(serviceRegistry); 
```

并且在该方法中，您还关闭了`sessionFactory`. 创建和关闭 sessionFactory 实例都是非常昂贵的操作（您可以在[此处](http://grepcode.com/file/repository.jboss.org/maven2/org.hibernate/hibernate-core/3.3.1.GA/org/hibernate/impl/SessionFactoryImpl.java#SessionFactoryImpl.close%28%29)查看关闭方法）。

最重要的是，当您的应用程序在多个线程中一次处理多个请求时，每个线程都会创建自己的 sessionFactory（每个线程都会创建自己的池）。因此，您的系统中同时存在多个 sessionFactory 和 Connection pool。虽然您应该在应用程序的整个生命周期内只创建一次。因此，当存在多个池副本时，所有池的连接总数可能会超过您为一个池配置的最大限制。

我建议你`HibernateSessionFactory`像下面这样重写你的课程：

```
public class HibernateSessionFactory {
    private static SessionFactory sessionFactory = HibernateSessionFactory.create();
    private static ServiceRegistry serviceRegistry;
    private static final PropertiesISUWrapper ISU_PROPERTIES = new PropertiesISUWrapper(Environment.getName(),"VzAppIntegration"); 

    private static SessionFactory create() {
        Configuration configuration = new Configuration();
        configuration.configure();

        configuration.setProperty("hibernate.connection.url", ISU_PROPERTIES.getUrl());
        configuration.setProperty("hibernate.connection.password", ISU_PROPERTIES.getPassword());

        serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        
        return configuration.buildSessionFactory(serviceRegistry);

    }

    public static SessionFactory getSessionFactory(){
       return sessionFactory;
    }

} 
```

并且在`insert()`方法中而不是调用`HibernateSessionFactory.create()`，只需调用`HibernateSessionFactory.getSessionFactory()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:51:47.807

问题是我在我的应用程序中多次创建一个新的会话工厂，而我只需要在应用程序启动时调用它一次。我最终创建了一个实现 ServletContextListener 接口的类，该接口创建了一个新的会话工厂并在上下文被销毁时销毁/关闭它。

# vbscript - 如何使用vbscript将行从一张纸复制到另一张纸

> ID：13747468
> 
> 赞同：0
> 
> 时间：2012-12-06T15:56:05.967
> 
> 标签：vbscript

假设我在 Excel 中有 Sheet(1)。现在我也有 2500 行，其中包含从 A 到 BO 的列的数据。现在我希望将数据从这些工作表复制到同一 Excel 文件的另一工作表中 2500 行但不是整个列，而我只需要从 A 到 AA 数据的列复制到新工作表。

那么如何使用VBscript对其进行构图呢？

请帮我。

如何使用vbscript将行从一张纸复制到另一张纸

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T16:37:06.830

要将数据从一张纸复制到另一张，您可以使用 Copy en PasteSpecial 命令。要使用`.vbs`脚本执行此操作，请执行以下操作：

```
' Create Excel object
Set objExcel = CreateObject("Excel.Application")
' Open the workbook
Set objWorkbook = objExcel.Workbooks.Open _
    ("C:\myworkbook.xlsx")
' Set to True or False, whatever you like
objExcel.Visible = True

' Select the range on Sheet1 you want to copy 
objWorkbook.Worksheets("Sheet1").Range("A1:AA25").Copy
' Paste it on Sheet2, starting at A1
objWorkbook.Worksheets("Sheet2").Range("A1").PasteSpecial
' Activate Sheet2 so you can see it actually pasted the data
objWorkbook.Worksheets("Sheet2").Activate 
```

如果您想在 Excel 中使用 VBS 宏执行此操作，您还可以调用复制和粘贴方法。只有您的工作簿对象将类似于`ActiveWorkbook`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-15T10:38:55.050

此代码工作正常。只需复制并粘贴它。

```
Dim CopyFrom As  Object
Dim CopyTo As Object
Dim CopyThis As Object
Dim xl As Object

xl = CreateObject("Excel.Application")
xl.Visible = False
CopyFrom = xl.Workbooks.Open("E:\EXCEL\From.xls")
CopyTo = xl.Workbooks.Open("E:\EXCEL\To.xls")
For i = 0 To 1
    ''To use a password: Workbooks.Open Filename:="Filename", Password:="Password"
    If i = 0 Then
        CopyThis = CopyFrom.Sheets(1)
        CopyThis.Copy(After:=CopyTo.Sheets(CopyTo.Sheets.Count))
        CopyTo.Sheets(3).Name = "Sheet3"
    Else
        CopyThis = CopyFrom.Sheets(2)
        CopyThis.Copy(After:=CopyTo.Sheets(CopyTo.Sheets.Count))
        CopyTo.Sheets(4).Name = "Sheet4"
    End If
Next
CopyTo.Sheets(1).Activate()
CopyTo.Save()
'CopyTo.SaveAs("E:\EXCEL\Check.xls")
xl.Quit() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-15T13:40:44.183

```
Sub buildMissingSheet(strMissingSheet)  'Just passing the missing sheet name in

' Master Sheet code
' Working on creating the "Master Sheet" at this time...May need to seperate the the code a little.
Dim GetRows1    As Worksheet
Dim GetRows2    As Worksheet
Dim PutRows     As Worksheet
Dim sglRowNum   As Single, i%

If strMissingSheet = strMASTERSHEET Then ' Create the strMASTERSHEET

  Set GetRows1 = Sheets(strRAWDATA)      ' These two sheets could be missing but will code around that later.
  Set GetRows2 = Sheets(strDATAWITH)     ' The two sheets I am getting rows from 
```

' 只是在这里创建一个新工作表，假设它缺少 Worksheets.Add(After:=Worksheets(5)).Name = strMissingSheet Set PutRows = Sheets(strMissingSheet) ' 必须在声明之前创建缺少的工作表。

```
 PutRows.Select  'Select the sheet being built.

  With Cells(1, 1)
     .Value = strRAWDATA  'Not copying rows here but left it in this example anyway
    .AddComment
    .Comment.Visible = False
    .Select
    .Comment.Text Text:= _
       Chr(10) & "Name of sheet including header and the last 32 entries at the time this sheet was updated."
  End With 
```

'这是我们将整行从一张纸复制到另一张纸的地方。

```
 GetRows1.Rows(1).Copy PutRows.Rows(2)  'Copy header row from existing sheet to "Master Sheet" for instance.
  GetRows1.Select
  sglRowNum = ReturnLastRow(ActiveSheet.Cells)  'return last row with data on active sheet 
```

' 我想要最后几行数据“32 行”，所以在表格的末尾找到了这个代码，可以在包括这个网站在内的几个地方的互联网上找到。

'现在您可能一直在寻找的代码将 32 行数据从一张表移动到另一张表。

```
 For i = 1 To 32  'Start at row 3 on the Put sheet after sheet name and header.
     GetRows1.Rows(sglRowNum - (32 - i)).Copy PutRows.Rows(i + 2)
  Next i 
```

结束子

# wolfram-mathematica - 渲染图

> ID：13747476
> 
> 赞同：1
> 
> 时间：2012-12-06T15:56:20.550
> 
> 标签：wolfram-mathematica, mathematica-8

有没有办法在数学中用 GRAPH 为边缘边界的区域着色。就像三个顶点形成一个三角形一样，我想用 GRAPH 选项为三角形的区域着色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:43:56.170

一种非常简单的方法是使用图像处理：

```
g = RandomGraph[{10, 15}, ImageSize -> 600, EdgeStyle -> Thick] 
```

![在此处输入图像描述](../Images/5349d195ffbf0197b30ef145bdee137f.png)

```
MorphologicalComponents[Binarize@Image[g]] // Colorize 
```

![在此处输入图像描述](../Images/0046f7d05b627cb5dd50cd5e90918e2c.png)

平面图很容易，但对于其余部分，您可能会有一些重叠区域。我看到你提到了网格；这就是你可以接近它的方法：

```
g = GridGraph[{5, 5}, VertexSize -> .5, EdgeStyle -> Thick];
MorphologicalComponents[ColorNegate@Binarize@GradientFilter[Image[g], 1]] // Colorize 
```

![在此处输入图像描述](../Images/3b60a0889861da67cd65ce8f6d4ca081.png)

# cloud-foundry - Cloud Foundry 是否提供在 Amazon S3 等其他云存储上归档日志的服务

> ID：13747478
> 
> 赞同：1
> 
> 时间：2012-12-06T15:56:24.233
> 
> 标签：cloud-foundry

我正在尝试找到一种方法将部署在 Cloud Foundry 上的应用程序的应用程序日志存档到外部云存储（如 amazon s3）。

Cloud Foundry 中是否有满足此类要求的服务？如果没有，是否有任何第三方实用程序提供相同的功能？

非常感谢您提前提供的帮助。

谢谢， 金贾尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:31:44.113

据我所知，目前没有这样的事情。但是，通过 Cloud Foundry API，您可以完全访问作为应用程序一部分部署的所有文件，包括日志。这意味着构建一个可以定期将所有这些文件传输到 S3 的应用程序将相当简单。

# php - PDO lastInsertId() 不适用于 MS SQL

> ID：13747481
> 
> 赞同：2
> 
> 时间：2012-12-06T15:56:33.760
> 
> 标签：php, sql-server, pdo

我正在使用 PDO 运行插入查询，然后使用 lastInsertId() 获取新创建的 Id。这一切都在我的本地主机环境中运行。

当我将完全相同的代码移动到服务器上时，lastInsertId() 总是返回空白，即使插入语句有效并将新行插入数据库。这会是我的配置中的设置吗？任何帮助表示赞赏。

```
$insertstmt = $dbinsert->prepare($insertsql);

// bindParams ...

$insertstmt->execute();

// always blank
$id = $dbinsert->lastInsertId();

$dbinsert = null; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:59:53.440

我最终用这个方法替换了 lastInsertId()：http: [//php.net/manual/en/pdo.lastinsertid.php#105580](http://php.net/manual/en/pdo.lastinsertid.php#105580)

```
$temp = $sth->fetch(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-04T10:48:54.057

我已经在我的[博客](https://blog.zajonc.pl/o-tym-jak-ozywic-metode-pdolastinsertid-podczas-uzywania-baz-mssql-i-sterownika-freetds/)上描述了这个问题的解决方案。无法直接修改代码中的sql查询，所以就这样扩展了PDO类

```
class BetterPDO extends \PDO
{
    protected $stmt;
    protected $withIdentitySelect;

    public function prepare($statement, $driver_options = null)
    {
        $this->$withIdentitySelect = false;

        if (preg_match('/^insert/i', $statement)) {
            $statement = "{$statement}; select SCOPE_IDENTITY() AS 'Identity';";
            $this->$withIdentitySelect = true;
        }

        $this->stmt = parent::prepare($statement, is_array($driver_options) ? $driver_options : []);
        return $this->stmt; 
    }

    public function query($statement)
    {              
        $this->$withIdentitySelect = false;

        if (preg_match('/^insert/i', $statement)) {
            $statement = "{$statement}; select SCOPE_IDENTITY() AS 'Identity';";
            $this->$withIdentitySelect = true;
        }

        $this->stmt = parent::query($statement);
        return $this->stmt;     
    }

    public function lastInsertId($name = null)
    {
        $lastIndex = 0;

        if (($this->$withIdentitySelect) && ($this->stmt->columnCount() > 0)) {
            $lastIndex = $this->stmt->fetchColumn(0);
            $this->stmt->closeCursor();
        }

        return $lastIndex;
    }
} 
```

# maven - 我可以使用 maven 从 maven Central 下载 jar 文件吗？

> ID：13747483
> 
> 赞同：0
> 
> 时间：2012-12-06T15:56:33.827
> 
> 标签：maven, maven-2

我对maven有依赖问题。我曾经有位于 Maven 中心的撒克逊 8.7。然后，我不得不升级到最新的 saxon-b 9.1.0.0，它只是部分在 maven Central 上。

这是我的依赖项的片段：

```
 <dependency>
        <groupId>net.sourceforge.saxon</groupId>
        <artifactId>saxon</artifactId>
        <version>9.1.0.8</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>net.sourceforge.saxon</groupId>
        <artifactId>saxon-dom</artifactId>
        <version>9.1.0.8</version>
        <scope>runtime</scope>
    </dependency> 
```

第一个工件“saxon”在 maven central 上可用，但第二个工件“saxon-dom”。这是[我想要的神器](http://search.maven.org/#artifactdetails%7Cnet.sourceforge.saxon%7Csaxon%7C9.1.0.8%7Cjar)。

我可以告诉 maven 下载“jar”文件还是我必须下载 jar 并将其在本地发布到我的 maven 存储库以将其用作依赖项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:11:06.733

没想到这么容易解决这个问题：

```
<dependency>
  <groupId>net.sourceforge.saxon</groupId>
  <artifactId>saxon</artifactId>
  <version>9.1.0.8</version>
  <classifier>dom</classifier>
</dependency> 
```

***基本上，我可以使用分类器***标签获取“附加”到“撒克逊”工件的依赖项。不知道这一点，当我在 Sonatype 存储库中搜索“saxon”时发现该标签存在[（这非常好）](https://repository.sonatype.org/index.html#nexus-search;quick~saxon)。它给了我上面的依赖片段。

参考：[http ://maven.apache.org/pom.html](http://maven.apache.org/pom.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:17:33.347

如果所需的版本不在 repo 中，那么是的，您需要执行以下替代方法之一

1.  搜索包含所需 jar 版本的公共 repo。并将 repo 添加到您的`pom.xml`文件中。或者

2.  手动下载它，并将其安装在您的机器上，以帮助完全构建项目。

# c# - 无法将 cellValuePresenter/TypeConverter 应用于 XamDataGrid 单元格

> ID：13747485
> 
> 赞同：2
> 
> 时间：2012-12-06T15:56:34.967
> 
> 标签：c#, xaml, type-conversion, xamdatagrid

我也在[Infragistics](http://www.infragistics.com/community/forums/p/76138/384534.aspx#384534)上问过这个问题，但不知道如何在那里格式化我的代码，所以在这里它是正确格式化的。

我的目标是呈现一个结构化数据表，其中包含使用多种颜色的每个单元格的文本。我有一个类型转换器，它将存储在自定义类中的数据转换为包含几个不同颜色的文本元素的标签或文本块。数据在数据表中提供（任何可行的方法都可以），并且每个值都正确应用于单元格。

问题是，它没有使用我的 TypeConverter，而是使用了 ToString 方法，我重写了该方法，因此我知道模型正确的模型数据逐个单元格地映射到网格上。此外，我正在使用的 ControlTemplate 属性也没有应用，这告诉我 ControlTemplate 没有被使用。

一个问题是，在数据网格中可能不可能有不同字母具有不同颜色的文本。如果是这样，是否有另一种方法可以完成，同时仍然具有良好的用户体验并将设计保留在 xaml 文件中（这对于网格来说很难）。

据我了解，我的代码应该定义一个自定义 CellValuePresenter，任何人都可以帮我应用它吗？

我在这里发布我的相关代码。大部分内容都被混淆了，所以请不要关注拼写错误。

```
 <Window x:Class="ViewName"
          xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
          xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
          xmlns:local="clr-namespace:LocalNamespace"
          xmlns:ViewModel="clr-namespace:LocalNamespace.ViewModel"
          xmlns:model="clr-namespace:LocalNamespace.Model"
          xmlns:igDP="http://infragistics.com/DataPresenter"
          >
      <Window.Resources>
          <local:Converter x:Key="converter" />
          <ViewModel:ViewModelLocator x:Key="viewModelLocator" />
          <Style TargetType="{x:Type igDP:CellValuePresenter}" x:Key="cellTemplate" x:Name="cellTemplate" >
              <Setter Property="Template">
                  <Setter.Value>
                      <ControlTemplate TargetType="{x:Type igDP:CellValuePresenter}">
                          <Label 
                              Content="{Binding Converter={StaticResource converter}}"
                              Width="200"
                              MaxWidth="600"
                              MinHeight="20"
                              />
                      </ControlTemplate>
                  </Setter.Value>
              </Setter>
          </Style>
      </Window.Resources>
        <StackPanel Name="stackPanel">
            <igDP:XamDataGrid Name="DifferenceGrid" DataSource="{Binding Source={StaticResource viewModelLocator}, Path=ViewModel.Model}" 
                              ScrollViewer.CanContentScroll="True" ScrollViewer.HorizontalScrollBarVisibility="Visible" ScrollViewer.VerticalScrollBarVisibility="Visible">
                <igDP:XamDataGrid.FieldLayouts>
                    <igDP:FieldLayout>
                        <igDP:FieldLayout.Fields>
                            <igDP:Field>
                                <igDP:Field.Settings>
                                    <igDP:FieldSettings 
                                        CellValuePresenterStyle="{StaticResource cellTemplate}">
                                    </igDP:FieldSettings>
                                </igDP:Field.Settings>
                            </igDP:Field>
                        </igDP:FieldLayout.Fields>
                    </igDP:FieldLayout>
                </igDP:XamDataGrid.FieldLayouts>
            </igDP:XamDataGrid>
        </StackPanel>
  </Window>

    class ViewModelLocator
    {
        private static ViewModel viewModel = new ViewModel();

        public ViewModel ViewModel
        {
            get
            {
                return viewModel;
            }
        }
    }

  public class ViewModel
    {
        private DataTable model;

        public DataTable Model
        {
            get
            {
                return this.model;
            }

            private set
            {
                this.model = value;
            }
        }

    [global::System.ComponentModel.TypeConverter(typeof(Model.CustomClass))]
    public class Converter : TypeConverter, IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (this.CanConvertTo(targetType))
            {
                return this.ConvertTo(value);
            }
            else
            {
                return null;
            }
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (this.CanConvertFrom(targetType))
            {
                return this.ConvertFrom(value);
            }
            else
            {
                return null;
            }
        }

        public new bool CanConvertFrom(Type sourceType)
        {
            // Textboxes don't need to be converted back.
            return sourceType == typeof(Model.CustomClass);
        }

        public new bool CanConvertTo(Type destinationType)
        {
            return destinationType == typeof(Model.CustomClass);
        }

        public object ConvertTo(object value)
        {
            return this.ConvertCustomClassToTextBlock(value);
        }

        public new object ConvertFrom(object value)
        {
            return this.ConvertCustomClassToTextBlock(value);
        }

        private object ConvertCustomClassToTextBlock(object value)
        {
            TextBlock text = new TextBlock();
            Label cell = new Label();

      // Construct the TextBlock.

      cell.Context = text;
      return text; // Or cell, whatever works.
    }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:22:54.967

XamDataGrid 单元格包含编辑器，对于应显示为文本的值，编辑器是 XamTextEditor。

您必须修改 XamTextEditor 的模板并在以下代码中提供您自己的模板：

```
<Window x:Class="XamDataGridApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:igDP="http://infragistics.com/DataPresenter"
        xmlns:igEditors="http://infragistics.com/Editors"
        xmlns:local="clr-namespace:XamDataGridApp"
        Title="Colorful XamDataGrid" SizeToContent="WidthAndHeight">
    <igDP:XamDataGrid FieldLayoutInitialized="OnFieldLayoutInitialized">
        <igDP:XamDataGrid.DataSource>
            <!-- Replace this with your data source. -->
            <local:DataSourceMock/>
        </igDP:XamDataGrid.DataSource>
        <igDP:XamDataGrid.Resources>
            <local:XamTextEditorConverter x:Key="XamTextEditorConverter" x:Shared="True"/>
            <Style TargetType="igEditors:XamTextEditor" BasedOn="{StaticResource {x:Type igEditors:XamTextEditor}}">
                <Style.Setters>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type igEditors:XamTextEditor}">
                                <Border x:Name="MainBorder" 
                                        Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                                    <ContentPresenter
                                        Margin="{TemplateBinding Padding}"
                                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                                        <ContentPresenter.Content>
                                            <MultiBinding Converter="{StaticResource XamTextEditorConverter}">
                                                <Binding Path="DisplayText" RelativeSource="{RelativeSource TemplatedParent}"/>
                                                <Binding RelativeSource="{RelativeSource TemplatedParent}"/>
                                            </MultiBinding>
                                        </ContentPresenter.Content>
                                    </ContentPresenter>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style.Setters>
            </Style>
            <Style TargetType="igEditors:XamTextEditor" x:Key="CustomClassXamTextEditorStyle" x:Shared="True" BasedOn="{StaticResource {x:Type igEditors:XamTextEditor}}">
                <Setter Property="ValueToDisplayTextConverter" Value="{x:Static local:CustomClassToStringConverter.Instance}"/>
                <Setter Property="ValueToTextConverter" Value="{x:Static local:CustomClassToStringConverter.Instance}"/>
            </Style>
        </igDP:XamDataGrid.Resources>
    </igDP:XamDataGrid>
</Window> 
```

以下 IMultiValueConverter 用于强制生成 XamTextEditor 内容：

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Media;
using Infragistics.Windows.DataPresenter;
using Infragistics.Windows.Editors;

namespace XamDataGridApp
{
    class XamTextEditorConverter : IMultiValueConverter
    {
        private static readonly IList<Brush> colors = new Brush[] { Brushes.Red, Brushes.Green, Brushes.Blue };

        public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
        {
            var displayText = (string)values[0] ?? string.Empty;

            // Context that can be used for custom coloring.
            var editor = (XamTextEditor)values[1];
            var dataItemPresenter = editor.Host as DataItemPresenter;

            // Context that can be used for custom coloring.
            var dataValue = editor.Value;
            var dataItem = dataItemPresenter != null ? dataItemPresenter.Record.DataItem : null;

            var textBlock = new TextBlock()
            {
                TextWrapping = editor.TextWrapping,
                TextAlignment = editor.TextAlignment
            };

            for (int i = 0; i < displayText.Length; ++i)
                textBlock.Inlines.Add(new Run(displayText[i].ToString()) { Foreground = colors[i % colors.Count] });

            return textBlock;
        }

        public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
        {
            throw new NotSupportedException();
        }
    }
} 
```

XamTextEditor 模板中的 ContentPresenter 必须将数据绑定到编辑器的 DisplayText 属性，因为 XamDataGrid 单元格是虚拟化的，并且通过绑定我们指示 XamDataGrid 在单元格虚拟化启动时重新生成 ContentPresenter 内容（当 CellValuePresenter 被重用以呈现另一个值时）。此外，由于数据绑定，即使在 XamDataGrid 之外更改了内容，也会重新生成内容。

MultiBinding 用于传递上下文 (XamTextEditor)，可以从中提取数据值和数据项并在着色逻辑中使用。如果不需要上下文，可以使用 IValueConverter 简单绑定到 DisplayText。

* * *

**更新：**

为了让 XamDataGrid 使用您的转换器，您必须在 FieldSettings（而不是 FieldLayouts）中定义 CellValuePresenterStyle，如下面的 XAML 片段所示：

```
<igDP:XamDataGrid Name="DifferenceGrid" DataSource="{Binding Source={StaticResource viewModelLocator}, Path=ViewModel.Model}" 
                      ScrollViewer.CanContentScroll="True" ScrollViewer.HorizontalScrollBarVisibility="Visible" ScrollViewer.VerticalScrollBarVisibility="Visible">
    <igDP:XamDataGrid.FieldSettings>
        <igDP:FieldSettings CellValuePresenterStyle="{StaticResource cellTemplate}"/>
    </igDP:XamDataGrid.FieldSettings>
</igDP:XamDataGrid> 
```

使用此代码片段，您可以为 XamDataGrid 中的所有单元格指定默认 CellValuePresenterStyle。

如果您想指定您的 CustomClass 列使用 XamTextEditor 并且所有其他列使用它们自己的默认编辑器，您可以通过处理[FieldLayoutInitialized](http://help.infragistics.com/Help/NetAdvantage/WPF/2011.2/CLR4.0/html/InfragisticsWPF4.DataPresenter.v11.2~Infragistics.Windows.DataPresenter.DataPresenterBase~FieldLayoutInitialized_EV.html)事件来做到这一点，如下面的代码：

```
private void OnFieldLayoutInitialized(object sender, FieldLayoutInitializedEventArgs e)
{
    foreach (var field in e.FieldLayout.Fields)
        if (field.DataType == typeof(Model.CustomClass))
        {
            field.Settings.EditorType = typeof(XamTextEditor);
            // Set Editor style in which display converter and edit converter are specified.
            field.Settings.EditorStyle = (Style)((FrameworkElement)sender).FindResource("CustomClassXamTextEditorStyle");
        }
} 
```

更新了上面的 MainWindow.xaml 以反映这些更改。

这里还有 CustomClassToStringConverter 的代码，当我在 XamDataGrid 中显示和编辑 CustomClass 时，我用它来将 CustomClass 转换为字符串并再次返回（我将 Text 属性添加到 CustomClass，因为我不知道如何从中提取文本）：

```
class CustomClassToStringConverter : IValueConverter
{
    public static CustomClassToStringConverter Instance = new CustomClassToStringConverter();

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return ((CustomClass)value).Text;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return new CustomClass() { Text = (string)value };
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:19:54.647

谢谢我现在开始工作了。必须提供带有文本块的单独数据源，现在不需要多重绑定。但我不知道 MVVM 是否仍然适用，这是一个非常丑陋的解决方案。

```
 public DataTable TextBlocks
    {
        get
        {
            Converter converter = new DifferenceToTextConverter();
            DataTable table = new DataTable();

            foreach (DataColumn col in this.Model.Columns)
                table.Columns.Add(col.ColumnName, typeof(TextBlock));

            foreach (DataRow row in this.Model.Rows)
            {
                DataRow addedRow = table.NewRow();
                for (int col = 0; col < row.ItemArray.Length; col++)
                {
                    addedRow[col] = converter.ConvertTo(row[col]);
                }

                table.Rows.Add(addedRow);
            }

            return table;
        }
    } 
```

# javascript - 谷歌地图的国家形状

> ID：13747487
> 
> 赞同：1
> 
> 时间：2012-12-06T15:56:42.537
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用谷歌地图做一些实验，现在我正在看圈子。

我的想法是为欧洲的每个国家/地区创建一个圆圈，并仅在有人单击该圆圈时将标记加载到内部。

我做到了并且工作正常。

现在我想做的是创建一个国家的形状并替换每个圆圈。

我在看多边形，这似乎是我正在寻找的东西，但是为每个国家创造一个好的形状需要大量的时间......

有一项谷歌地图服务可以突出显示您需要的国家/地区吗？（不是谷歌图表，我已经看过了）

或者是否存在已经构建的可以使用 Javascript 轻松导入的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:35:12.180

世界国家的边界​​在[Natural Earth 数据集](http://blog.thematicmapping.org/2011/02/natural-earth-vectors-in-cloud.html)和公共 FusionTable 中可用。

[这是一个使用该数据显示法国省份的示例](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_query_sidebarF_local.html?country=France)

# java - php sha1 不等于 java sha1

> ID：13747489
> 
> 赞同：1
> 
> 时间：2012-12-06T15:56:45.433
> 
> 标签：java, php, hash, sha1, equality

> **可能重复：**
> [Java 的 MessageDigest SHA1 算法返回的结果与 php 的 SHA1 函数不同](https://stackoverflow.com/questions/7605217/javas-messagedigest-sha1-algorithm-returns-different-result-than-sha1-function)

我用什么：

爪哇：

```
public String sha1(String s) {
    try {
        // Create MD5 Hash
        MessageDigest digest = java.security.MessageDigest.getInstance("SHA-1");
        digest.update(s.getBytes());
        byte messageDigest[] = digest.digest();

        // Create Hex String
        StringBuffer hexString = new StringBuffer();
        for (int i = 0; i < messageDigest.length; i++)
            hexString.append(Integer.toHexString(0xFF & messageDigest[i]));
        return hexString.toString();

    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    }
    return "";
} 
```

结果：

```
java: System.out.println(sha1("foobar123dsadn23u1wdqqwdyxdasd"));
php:                echo sha1('foobar123dsadn23u1wdqqwdyxdasd');

php:  d8033103e9aaf67af13a4b45534b2d0f6d8dfded
java: d83313e9aaf67af13a4b45534b2df6d8dfded 
```

为什么两个哈希不一样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T15:59:55.410

这是因为`Integer.toHexString`在 Java 中，如果数字小于 16，则不会打印两位数。因此，例如 8 变为`8`而不是`08`.

您需要正确格式化数字。这应该这样做：

```
hexString.append(String.format("%02X", 0xFF & messageDigest[i])); 
```

# node.js - 优雅地关闭 Node.js 服务器

> ID：13747496
> 
> 赞同：2
> 
> 时间：2012-12-06T15:56:56.760
> 
> 标签：node.js, http, webserver, sigint

> **可能重复：**
> [node.JS HTTP 服务器的正常关闭](https://stackoverflow.com/questions/5263716/graceful-shutdown-of-a-node-js-http-server)

我在 Node.js 中有一个使用该`http`模块的基本服务器。虽然我知道一个`SIGINT`事件会关闭程序并停止服务器，但使用它来关闭服务器似乎更干净`server.close([callback])`（我在`SIGINT`事件上这样做，类似于[这里](https://stackoverflow.com/questions/9299331/what-is-the-best-practice-to-gracefully-shutdown-a-node-js-program-from-an-exter)）。只要服务器没有收到任何请求，它就可以很好地工作。一旦服务器收到请求，即使我的响应很简单：

```
res.writeHead(500, { "Content-Type": "text/plain" });
res.end(); 
```

来自`server.close()`never 的回调被调用，仔细检查发现它`server.connections`是 1，而不是 0。（例如，如果我让它提供一个带有三个外部脚本的 HTML 页面，那么`server.connections`它将是 4。）

为什么这些连接不被终止`res.end()`？我可以做些什么来优雅地停止我的服务器？或者这只是对想象中的问题的矫枉过正？

# search - Solr/Lucene 获取找到结果的字段

> ID：13747497
> 
> 赞同：1
> 
> 时间：2012-12-06T15:57:06.843
> 
> 标签：search, solr, lucene

当我查询一个字符串的多个字段时，是否可以检索在哪个字段中找到查询词的信息？

我想查询描述、信息、附加信息……但是我需要知道哪个字段给出了结果，因为我想给出不同的布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:22:58.973

Lucene方式：看[`IndexSearcher.explain(...)`](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/search/IndexSearcher.html). 这将给出一个`Explanation`描述如何`doc`对`query`.

Solr 方式：添加`&debugQuery=true`. 我查询`collection:61`并得到了这个文件：

```
<doc>
  <str name="collection">61</str>
  ...other fields...
  <long name="uuid">1111</long>
</doc> 
```

然后下面是这个

```
<lst name="explain">
  <str name="1111">
     0.882217 = (MATCH) fieldWeight(collection:61 in 0), product of: 1.0 =
     tf(termFreq(collection:61)=1) 0.882217 = idf(docFreq=8, maxDocs=8) 1.0 =
     fieldNorm(field=collection, doc=0)
  </str>
  ...
 </lst> 
```

上面基本上告诉项目 1111 有字段`collection`value `61`。您还可以请求[`debug.explain.structured`](http://wiki.apache.org/solr/CommonQueryParameters)以更结构化的格式获取此解释字符串。

# linux-kernel - DMA 如何工作——在 ARM 中——使用 linux

> ID：13747499
> 
> 赞同：1
> 
> 时间：2012-12-06T15:57:13.097
> 
> 标签：linux-kernel, arm, embedded-linux, dma

一些Linux DMA专家可以帮助我...理解这个概念。

a> 我是 DMA 编程的新手。DMA 实际上如何用于 ARM 控制器？

b> 如果我们使用 mmap 向驱动程序发送数据。我们如何将其与 DMA 同步？

c> 要使用 DMA，我们实际上必须在我们的软件中做什么？

d> 这个 dma 输入输出通道是什么？

是否有一些示例代码.. 对 DMA 来说是新手，这将有助于我理解这个概念。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:55:29.663

a> ARM 对 DMA 并不严格，大多数制造商都有各种实现，并且在内核中为各自的设备提供了自己的驱动程序。其中一些甚至不称其为 DMA（DMOV，DataMover 实际上是 Qcom 的 SoC 上的 DMA 单元）。

b> 我不确定用户空间是否可以访问 DMA，您需要内核的帮助才能做到这一点。此外，大多数 DMA 仅发生在为 DMA 保留的特殊区域中，该区域在 MMU 页表中标记为未缓存，以防止同步问题。

c> 您无法访问 DMA 控制器，硬件由内核抽象，并且大多数制造商使用不同的 API，尽管有一个值得注意的尝试将此类非标准实现转移到内核的标准 DMA 驱动程序模型。

d> 我不明白你的问题。

# sql - 计算两个充满 GEOGRAPHY 点的表之间的距离

> ID：13747500
> 
> 赞同：2
> 
> 时间：2012-12-06T15:57:20.807
> 
> 标签：sql, sql-server, sqlgeography

我正在使用 SQL Server。

我有两个这样的表：

**表 1**：

```
Column1, Column2, Column3, GeoLoc
-----------------------------------
a        b        c        0xE61... 
```

**表2**：

```
Column1, Column2, Column3, GeoLoc 
-----------------------------------
a        b        c        0xE62... 
```

我正在寻找一个输出表，它将比较两个表中的所有点，并告诉我哪里`table1`有一个`GeoLoc`在 X 距离内的`GeoLoc`in `table2`。

有谁知道该怎么做？一个表有大约 800 行，另一个有大约 300,000 行。我什至不知道从哪里开始......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T16:15:13.933

假设您的 GeoLoc 列是 SQL 服务器中的“地理”数据类型，您应该能够使用如下内容：

```
select
  t1.*,
  t2.*,
  t1.GeoLoc.STDistance(t2.GeoLoc) as DistanceApart
from table1 t1
join table2 t2
on (t1.GeoLoc.STDistance(t2.GeoLoc) <= @distanceX) 
```

'DistanceApart' 和 'distanceX' 值以米为单位

# jquery - Google Chrome 中的表单输入会破坏布局

> ID：13747501
> 
> 赞同：1
> 
> 时间：2012-12-06T15:57:21.910
> 
> 标签：jquery, forms, google-chrome, input

这很难解释。我已经盯着它看了好几个小时了。电子邮件输入会破坏您在字段中输入文本的布局。这是工作示例的链接：http: [//dev.artfulideation.com/clients/artfulideation.com/new-header.htm](http://dev.artfulideation.com/clients/artfulideation.com/new-header.htm)

使用 tab 键在表单中导航也会破坏布局。

```
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title></title>
<meta name="description" content="">

<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="style-new.css">

<div id="featured-top">
    <div id="featured-top-container">
        <h2>Free <span>Web Presence Report</span></h2>
        <img src="images/fwpr-gear.png" />
        <div id="featured-top-content">
            <p>Your pressence on the web is often hard to track and it can be even harder to understand how it will affect you. Artful Ideation offers a free report of your current strengths and weaknesses in the areas of website design, content structure, and search engine optimization.</p>
        </div>
        <p>Sign up below to receive your free reoprt!</p>
        </br>
        <form>
            <table>
                <tr><td><input type="text" name="name" tabindex="1" value="Name:" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;"/><td></tr>
                <tr><td><input type="text" name="email" tabindex="2" value="Email:" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;"/><td></tr>
                <tr><td><input type="submit" name="submit" tabindex="3" value="Get Yours!" /><td></tr>
            </table>
        </form>
    </div>
</div>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
<script src="js/twitter.js"></script>

<script>
    $(function(){

        $('#featured-top').click(function(){
            $(this).animate({'top':'-318px'}, 600, 'easeOutBounce');
            $('#featured-top-container').animate({'top':'304px','left':'82px'}, 600, 'easeOutBounce');
            $('#wrap').animate({'margin-top':'365px'}, 600, 'easeOutBounce');

            //Add transparent background for click out
            $(document.body).append('<div class="transparent-close"></div>');
            $('.transparent-close').on('click',function(){
                $('#featured-top').animate({'top':'-558px'}, 600, 'easeOutBounce');
                $('#featured-top-container').animate({'top':'530px','left':'0px'}, 600, 'easeOutBounce');
                $('#wrap').animate({'margin-top':'120px'}, 600, 'easeOutBounce');
                $(this).remove();
            });
        }); 

    });
</script> 
```

此外，这是我正在使用的 css：

```
*{
margin: 0;
padding: 0;
border: 0;
font-size: 100%;
font: inherit;
vertical-align: baseline;
}

#featured-top{
width: 1180px;
height: 480px;
background-color: #AA2222;
background: #AA2222 url(images/fwpr-background.png) top left repeat;
box-shadow: inset 0 -5px 20px -6px #000;
padding-top: 55px;
cursor: pointer;
overflow: hidden;
position: absolute;
    top: -558px;
    left: -128px;
z-index: 9999;

-webkit-transform: rotate(-20deg);
   -moz-transform: rotate(-20deg);
    -ms-transform: rotate(-20deg);
     -o-transform: rotate(-20deg);
}

#featured-top-container{
width: 800px;
height: auto;
position: absolute;
    top: 530px;
    left: 0px;
/*margin: 485px 0 0 35px;*/
font: normal 11px Georgia, Serif;
color: #eee;
clear: both;

-webkit-transform: rotate(20deg);
   -moz-transform: rotate(20deg);
    -ms-transform: rotate(20deg);
     -o-transform: rotate(20deg);
}

#featured-top-container h2{
text-shadow: 1px 1px 0 #333;
}

#featured-top-container h2 span{
font: 20px Kontrapunkt-LightItalic, Georgia; 
}

#featured-top-container img{
margin: -3px 0 0 25px;
color: #eee;
position: absolute;
    top: 38px;
    left: 10px;
display: block;

-webkit-transform: rotate(15deg);
   -moz-transform: rotate(15deg);
    -ms-transform: rotate(15deg);
     -o-transform: rotate(15deg);
}

#featured-top-container > p{
margin: 0 0 0 25px;
float: left;
}

#featured-top-content{
width: 475px;
margin: 35px 0 0 195px;
float: left;
}

/* Form Styles */

#featured-top form{
width: 260px;
height: 90px;
float: left;
display: inline-block;
clear: both;
margin: -5px 0 0 25px;
/*position: absolute;
    top: 130px;
    left: 100px;*/

}

#featured-top form table{
width: 99%;
height: auto;
margin: 0;
border-collapse: collapse;
border-spacing: 0;
}

#featured-top form tr{
width: 99%;
height: 35px;
}

#featured-top form input[type=text]{
width: 96%;
height: 20px;
line-height: 20px;
padding: 2px 2%;
font: 14px 'Kontrapunkt-LightItalic', Arial sans-serif;
color: rgb(125,125,125);
float: none;
clear: both;

box-shadow: 3px 3px 0px #bbb;
-moz-box-shadow: 3px 3px 0px #bbb;
-webkit-box-shadow: 3px 3px 0px #bbb;

}

#featured-top form input[type=submit]{
width: 100px;
font: normal 12px Georgia, serif;
color: #AA2222;
letter-spacing: 1px;
float: right;
height: 24px;
line-height: 12px;
padding: 5px 10px;
cursor: pointer;

/*color: #eee;
background-color: #AA2222;
background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#c43434), to(#AA2222));
background-image: -webkit-linear-gradient(top, #c43434, #AA2222); 
background-image:    -moz-linear-gradient(top, #c43434, #AA2222);
background-image:     -ms-linear-gradient(top, #c43434, #AA2222);
background-image:      -o-linear-gradient(top, #c43434, #AA2222);*/

background-color: #888;
background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#ddd), to(#888));
background-image: -webkit-linear-gradient(top, #ddd, #888); 
background-image:    -moz-linear-gradient(top, #ddd, #888);
background-image:     -ms-linear-gradient(top, #ddd, #888);
background-image:      -o-linear-gradient(top, #ddd, #888);

box-shadow: 0px 1px 0px #fff;

/*border: 1px solid #333;
border-radius: 4px;*/

}

#featured-top form input[type=submit]:hover{
cursor: pointer;
background-color: #aaa;
background-image: none;
}

.transparent-close {
  background-color: transparent;
  position: absolute;
      top: 0px;
      left: 0px;
  z-index: 800;
  width: 100%;
  height: 100%;
  cursor: pointer;
}

:focus {
    outline-style: none;
}

/* Font Styles */

@font-face {
font-family: 'Kontrapunkt-Bold';
src: url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-Bold.eot');
src: url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-Bold.eot?#iefix') format('embedded-opentype'),
     url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-Bold.woff') format('woff'),
     url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-Bold.ttf') format('truetype'),
     url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-Bold.svg#Kontrapunkt-Bold') format('svg');
font-weight: normal;
font-style: normal;
}

@font-face {
font-family: 'Kontrapunkt-LightItalic';
src: url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-LightItalic.eot');
src: url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-LightItalic.eot?#iefix') format('embedded-opentype'),
     url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-LightItalic.woff') format('woff'),
     url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-LightItalic.ttf') format('truetype'),
     url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-LightItalic.svg#Kontrapunkt-LightItalic') format('svg');
font-weight: light;
font-style: normal;
}

@font-face {
font-family: 'Kontrapunkt-Light';
src: url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-Light.eot');
src: url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-Light.eot?#iefix') format('embedded-opentype'),
     url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-Light.woff') format('woff'),
     url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-Light.ttf') format('truetype'),
     url('http://artfulideation.com/wp-content/themes/twentyeleven/files/Kontrapunkt-Light.svg#Kontrapunkt-Light') format('svg');
font-weight: normal;
font-style: normal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:06:34.157

像这样关闭你的 td 标签`</td> instead of <td> = Wrong`

# objective-c - 找到空数组

> ID：13747504
> 
> 赞同：0
> 
> 时间：2012-12-06T15:57:35.283
> 
> 标签：objective-c, xcode, arrays

当我遇到这个问题时，是否有一些方法可以了解我的 20 个数组中的哪些是空的？

```
2012-12-06 16:52:05.409 Posizione Corrente 3[3738:907] *** Terminating app due to uncaught     exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds   for empty array'
*** First throw call stack:
(0x383042a3 0x34adb97f 0x3824fb75 0x560ab 0x38a49545 0x38a2e30b 0x38a457c7 0x38a01803 0x3bed7d63 0x3bed7901 0x3bed8835 0x3bed821b 0x3bed8029 0x3bed7e89 0x382d96cd 0x382d79c1  0x382d7d17 0x3824aebd 0x3824ad49 0x340232eb 0x38a522f9 0x7c675 0x3940bb20)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:01:21.303

如果您使用 Xcode 的 Breakpoint Navigator 在 Objective-C 异常上设置断点，程序应该在遇到该错误时停止并向您显示导致该错误的代码。从代码行中，应该很容易看出涉及哪个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:59:56.617

您可以使用以下代码检查数组是否包含任何值。

```
if([myArray count]==0){
    //do this
}
else{
   //do you array manipulation
} 
```

# c - 为什么CHECK_FUNCTION_EXISTS 在CMake 中找不到clock_gettime？

> ID：13747505
> 
> 赞同：7
> 
> 时间：2012-12-06T15:57:43.723
> 
> 标签：c, cmake

怎么`CHECK_FUNCTION_EXISTS`找不到`clock_gettime`？

我在我的使用以下代码`CMakeLists.txt`：

```
include(CheckFunctionExists)

set(CMAKE_EXTRA_INCLUDE_FILES time.h)
CHECK_FUNCTION_EXISTS(clock_gettime HAVE_CLOCK_GETTIME) 
```

这是在我知道的 POSIX 系统上`clock_gettime`。然而我只是得到：

```
-- Looking for clock_gettime - not found 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T15:57:43.723

因为我们需要在进行检查`clock_gettime`时`librt`链接到它（否则 CMake 将无法编译它生成的测试程序以测试该函数是否存在）。

这是不可能的`CHECK_FUNCTION_EXISTS`。相反，必须使用**CHECK_LIBRARY_EXISTS ：**

```
include(CheckLibraryExists)
CHECK_LIBRARY_EXISTS(rt clock_gettime "" HAVE_CLOCK_GETTIME) 
```

这现在可以工作并输出：

```
-- Looking for clock_gettime in rt - found 
```

**更新**：在较新的 glibc 2.17+中`clock_gettime`已从.`librt``libc`

因此，要确保`clock_gettime`在所有系统上找到，您需要进行两项检查：

```
include(CheckLibraryExists)
CHECK_LIBRARY_EXISTS(rt clock_gettime "" HAVE_CLOCK_GETTIME)

if (NOT HAVE_CLOCK_GETTIME)
   set(CMAKE_EXTRA_INCLUDE_FILES time.h)
   CHECK_FUNCTION_EXISTS(clock_gettime HAVE_CLOCK_GETTIME)
   SET(CMAKE_EXTRA_INCLUDE_FILES)
endif() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-13T09:08:41.383

这就是我正在使用的：

```
include(CheckFunctionExists)
include(CheckLibraryExists)
check_library_exists(rt clock_gettime "time.h" HAVE_CLOCK_GETTIME)
if (HAVE_CLOCK_GETTIME)
    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -lrt")
    set(CMAKE_C_STANDARD_LIBRARIES "${CMAKE_C_STANDARD_LIBRARIES} -lrt")
else()
    # might also be in libc
    check_library_exists(c clock_gettime "" HAVE_CLOCK_GETTIME)
endif() 
```

# cocoa - 滚动后基于 NSTableView 视图更改的单元格元素位置

> ID：13747513
> 
> 赞同：0
> 
> 时间：2012-12-06T15:58:11.490
> 
> 标签：cocoa

我正在使用 nstablewview 来设置消息传递。滚动未开始时一切正常：

![在此处输入图像描述](../Images/afc33f024b5078b87757f2f51dddbb0a.png)

然后，如果开始滚动，有时具有相同帧的元素（我在 tableView:viewForTableColumn:row:) 中记录了帧参数，参数在单元格内的正确位置下方可见：

![在此处输入图像描述](../Images/9b732c55b4f15216b85f48b66762ee69.png)

看起来像苹果代码中的错误，但也许有人知道，如何修复它？

setFrame：从 2 个地方调用 -

[NSView resizeWithOldSuperviewSize:] ()

并从

表视图：viewForTableColumn：行：

给出与最终（正确）帧相同的数据....

```
2012-12-06 18:40:20.283[99782:303] setFrame->{{0, -7},{219.4296875,56}}   
2012-12-06 18:40:43.086[99782:303] message.frame->{{20, 3}, {179.4296875, 36}} background.frame->{{0,-7}, {219.4296875, 56}}
2012-12-06 18:38:46.296 [99782:303] setFrame->{{0, -7}, {219, 56}} 
```

# objective-c - Objective-C中同名的类方法和实例方法

> ID：13747521
> 
> 赞同：8
> 
> 时间：2012-12-06T15:58:36.683
> 
> 标签：objective-c, coding-style, nsnotifications, nsnotification

我有一个解决通知问题的方法，效果很好，但我担心这可能是个坏主意。

我有一个需要由类的每个实例和类本身处理的通知。为了处理这个问题，我正在注册类和类实例的通知。因为它是完全相同的通知，所以我将类和实例方法命名为相同。这遵循我们为如何命名通知处理程序设置的标准。

这是一个坏主意吗？是否有一些我错过的隐藏的got'ca。我会混淆未来的开发人员吗？

```
+ (void)initialize
{
    if (self == [SICOHTTPClient class]) {
        [[self notificationCenter] addObserver:self
                                      selector:@selector(authorizationDidChangeNotification:)
                                          name:SICOJSONRequestOperationAuthorizationDidChangeNotification
                                        object:nil];
    }
}

- (id)initWithBaseURL:(NSURL *)url
{
    self = [super initWithBaseURL:url];

    if (self) {
        self.parameterEncoding = AFJSONParameterEncoding;
        [self registerHTTPOperationClass:[SICOJSONRequestOperation class]];
        [self setDefaultHeader:@"Accept" value:@"application/json"];

        if ([[self class] defaultAuthorization])
            [self setDefaultHeader:@"Authorization" value:[[self class] defaultAuthorization]];

        [[[self class] notificationCenter] addObserver:self
                                              selector:@selector(authorizationDidChangeNotification:)
                                                  name:SICOJSONRequestOperationAuthorizationDidChangeNotification
                                                object:nil];
    }

    return self;
}

- (void)dealloc
{
    [[[self class] notificationCenter] removeObserver:self
                                                 name:SICOJSONRequestOperationAuthorizationDidChangeNotification
                                               object:nil];
}

#pragma mark Notifications

- (void)authorizationDidChangeNotification:(NSNotification *)notification
{
    NSString *authorization = notification.userInfo[SICOJSONRequestOperationAuthorizationKey];

    if ([authorization isKindOfClass:[NSString class]]) {
        [self setDefaultHeader:@"Authorization" value:authorization];
    } else {
        [self clearAuthorizationHeader];
    }
}

+ (void)authorizationDidChangeNotification:(NSNotification *)notification
{
    NSString *authorization = notification.userInfo[SICOJSONRequestOperationAuthorizationKey];

    if ([authorization isKindOfClass:[NSString class]]) {
        [self setDefaultAuthorization:authorization];
    } else {
        [self setDefaultAuthorization:nil];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T16:28:01.667

这就是代码注释的用途:)

在 Objective C 中，类方法和实例方法同名是没有问题的。

我会建议：

*   修改您的通知方法名称规范以处理此问题（然后使用不同的适当命名的方法处理类通知），或

*   添加适当的评论来解释正在发生的事情，以使未来可能感到困惑的开发人员受益

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:31:00.520

语言本身和运行时不会对您正在做的事情产生歧义。所以你在这方面是安全的。

就混淆未来的维护者而言，我想您不必太担心愚蠢的自动完成错误，因为它不是您打算手动调用的方法。

也就是说，我很想将类的东西移到一个人为的类别中。这不仅会在页面上进行分离，而且会明确表明该类打算作为与实例响应分开的功能部分进行响应。

# ruby - Ruby正则表达式以任意顺序出现在字符串中的两个单词

> ID：13747522
> 
> 赞同：3
> 
> 时间：2012-12-06T15:58:38.240
> 
> 标签：ruby, regex

如果任何两个单词以任何顺序出现在字符串中，你如何编写一个正则表达式来匹配？

即，我正在尝试编写一个正则表达式，它可以找到任何带有“reset”和“password”的字符串，不区分大小写。所以，这些应该匹配：

*   重设密码
*   重设密码
*   您重置密码
*   您的密码重置请求
*   您的密码已重置

这些不应该匹配

*   密码
*   重置
*   密码已更改
*   帐号重置

我得到的最接近的是: `/(password|reset)/`，但它找到了每一种情况，当我尝试时`(password|reset){2}`它不匹配任何情况。在[rubular](http://rubular.com/)上对此进行测试。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T16:00:16.780

你可以试试

```
(password.*reset|reset.*password) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T20:50:22.943

使用零宽度正向预测断言，您可以将其编写为以下形式：

```
/(?=.*\breset\b)(?=.*\bpassword\b)/i 
```

处理完第一个断言后，它的匹配位置没有改变，仍然是字符串的开头。之后，ruby 处理第二个断言。

请注意，在这种情况下，第二部分并不总是必须以断言形式出现。以下代码按您的预期工作。

```
/(?=.*\breset\b).*\bpassword\b/i 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T16:32:49.577

我认为不坚持用一个正则表达式来做，而是做两个更优雅：

```
string =~ /\bpassword\b/i and string =~ /\breset\b/i 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T19:16:24.673

对于任意数量的单词，更通用的解决方案：

```
def match_all? str, words
  words.all? {|w| str =~ /\b#{ Regexp.quote w }\b/i }
end

match_all? 'Your password reset request', %w{password reset} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T18:24:53.363

+1 到 @alestanis 和 @sawa 的正则表达式，但如果你用一个简单的，它不会让意图更清晰`include?`，例如

```
(str.downcase.include? 'password') && (str.downcase.include? 'reset') 
```

我的 0.02 美元

# c# - ASP.NET MVC4：如何创建查找表以便条目不重复

> ID：13747524
> 
> 赞同：1
> 
> 时间：2012-12-06T15:58:43.240
> 
> 标签：c#, asp.net-mvc-4, entity-framework-4.1

vir我正在尝试使用实体框架代码优先在我的 ASP.NET MVC4 应用程序中创建一个查找表。它适用于我们的位置，应该有两个条目。我需要某种与它们相关联的 ID，因此我的 Software 表中存储了一个 LocationID。但是，当我创建它们时，会为软件表中的每一行创建一个条目。

这是我的软件课：

```
public class Software
    {
        public int Id { get; set; }
        public virtual List<SoftwareType> SoftwareTypes { get; set; }
        public virtual List<Location> Locations { get; set; }
        public virtual List<SoftwarePublisher> Publishers { get; set; }
        [Required]
        [StringLength(128)]
        public string Title { get; set; }
        [Required]
        [StringLength(10)]
        public string Version { get; set; }
        [Required]
        [StringLength(128)]
        public string SerialNumber { get; set; }
        [Required]
        [StringLength(3)]
        public string Platform { get; set; }
        [StringLength(1000)]
        public string Notes { get; set; }
        [Required]
        [StringLength(15)]
        public string PurchaseDate { get; set; }
        public bool Suite { get; set; }
        public string SubscriptionEndDate { get; set; }
        //[Required]
        //[StringLength(3)]
        public int SeatCount { get; set; }

    } 
```

这是我的位置类：

```
 public class Location
    {
        public int Id { get; set; }
        [Required]
        [StringLength(20)]
        public string LocationName { get; set; }
        public virtual Software Software { get; set; }
    } 
```

这是我对种子方法的 Global.asax 调用：

```
Database.SetInitializer(new SampleData());
            using (var context = new Context())
            {
               context.Database.Initialize(true);
            } 
```

这是我的背景：

```
 public class Context : DbContext
    {
        public DbSet<Software> Software { get; set; }
        public DbSet<Location> Locations { get; set; }
        public DbSet<SoftwarePublisher> SoftwarePublishers { get; set; }
        public DbSet<SoftwareType> SoftwareTypes { get; set; }

        public Context()
        {
           Configuration.ProxyCreationEnabled = false;
        }
    } 
```

这是我的播种：

```
public class SampleData : CreateDatabaseIfNotExists<Context>
    {
        protected override void Seed(Context context)
        {
            new List<Software> {
                    new Software { 
                         Title = "Adobe Creative Suite", 
                         Version = "CS6", 
                         SerialNumber = "1234634543", 
                         Platform = "Mac", 
                         Notes = "Macs rock!", 
                         PurchaseDate = "2012-12-04", 
                         Suite = true, 
                         SubscriptionEndDate = null, 
                         SeatCount = 0, 
                         SoftwareTypes = new List<SoftwareType> 
                               { new SoftwareType { Type="Suite" }}, 
                         Locations = new List<Location> 
                               { new Location { LocationName = "Paradise" }},
                         Publishers = new List<SoftwarePublisher> 
                               { new SoftwarePublisher { Publisher = "Adobe" }}},
                ...other similar rows...
                }.ForEach(s => context.Software.Add(s));

            base.Seed(context);
            context.SaveChanges(); 

        } 
```

因为我正在为 Locations 之类的东西创建一个新列表（我需要修复 SoftwareType 和 Publisher 等其他东西，但让我们专注于 Locations），它正在我的 Locations 表中创建一个新行。如何重组我的类，以便我的 Locations 表中有两个条目，然后我的 Software 表中的 ID 指向这两个条目之一？请记住我是一个实体框架新手，所以请尽量明确。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:57:37.867

我认为您想要软件和位置之间的多对多关系。为此，您需要创建一个连接表（也称为链接表）。我相信您想在 OnModelCreating 覆盖中执行此操作

```
this.HasMany(i => i.Softwares)
            .WithMany(c => c.Locations)
            .Map(mc =>
            {
                mc.MapLeftKey("SoftwareId");
                mc.MapRightKey("LocationId");
                mc.ToTable("SoftwareLocations");
            }); 
```

我从这篇[博文中得到了那个片段](http://weblogs.asp.net/manavi/archive/2011/05/17/associations-in-ef-4-1-code-first-part-6-many-valued-associations.aspx)

# jquery - jQuery dataTables fnDraw() 不重新绘制表格

> ID：13747525
> 
> 赞同：3
> 
> 时间：2012-12-06T15:58:44.450
> 
> 标签：jquery, datatables

我有一个静态 HTML 表，其中包含来自不同供应商的零件的价格和描述。

该表包含一列文本框，供用户针对特定零件输入数量，其想法是然后计算供应商的价格，以便他们可以看到最便宜的。

我在 dataTables fnFooterCallback 函数中有一些逻辑可以生成总数，所以当数量 texboxes 的值发生变化时，我试图让表重绘（并因此更新页脚中的总数）。

我在表格上调用 fnDraw() 的输入上注册了一个 blur() 处理程序，但它似乎没有做任何事情。

我在这里重新创建了一个示例，[这里](http://jsfiddle.net/qp492/3/)是 Javascript：

```
var $productsTable = $("table#products").dataTable({
    bFilter: false,
    bPaginate: false,
    bSort: false,
    bInfo: false,
    fnFooterCallback: function (nRow, aaData, iStart, iEnd, aiDisplay) {
        // For every column after the qty and desc colums
        for (var column = 2; column < aaData[0].length; column++) {
            var columnTotal = 0;

            // Sum every row into a column total
            for (var row = 0; row < aaData.length; row++) {
                var quantity = aaData[row][0].value || 0;
                columnTotal += aaData[row][column] * quantity;
            }

            // * and / by 100 to round to 2 decimals
            nRow.cells[column].innerText = Math.round(columnTotal * 100) / 100; 
        }
    }
});

$("input[data-qty]").blur(function () {
    // Example at http://datatables.net/api indicates that this should be enough?
    $productsTable.fnDraw();
});​ 
```

谁能告诉我哪里出错了，好吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:36:54.687

问题是在您的代码`aaData[row][0].value`中不返回任何内容。您可以尝试保留一个数组并从那里设置总值。如果`blur`您必须为每个文本框设置适当的值。这是修改后的代码的[链接。](http://jsfiddle.net/qp492/6/)

# java - 如何将字符串转换为 XML 文件？

> ID：13747528
> 
> 赞同：2
> 
> 时间：2012-12-06T15:58:55.933
> 
> 标签：java, spring, spring-integration

> **可能重复：**
> [用 Java 写入 XML 文件](https://stackoverflow.com/questions/2453105/writing-to-a-xml-file-in-java)

我将以下 XML 文本作为字符串。

```
<someNode>
    <id>A124</id>
    <status>404</status>
    <message>No data</message>
</someNode> 
```

我将上述 XML 数据作为字符串。是否可以将文本转换为 XML 文件并将生成的 XML 文件存档？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:01:53.120

```
DocumentBuilderFactory dbfac = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = dbfac.newDocumentBuilder();
Document doc = docBuilder.parse(new InputSource(new StringReader(theString))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:04:30.917

您可以使用`java.io.FileWriter`来保存您的文件。

```
String fileData = "<sample><xml>data</xml></sample>";
File outputFile = new File("someFile.xml");
BufferedWriter bw = null;
try{
    bw = new BufferedWriter(new FileWriter(outputFile));
    bw.write(fileData);
}
catch(IOException e)
{
    e.printStackTrace();
}
finally
{
    try{bw.close();}catch(Exception e){}
} 
```

如果您需要像**Kazekage Gaara**所说的那样操作 xml：

```
DocumentBuilderFactory dbfac = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = dbfac.newDocumentBuilder();
Document doc = docBuilder.parse(new InputSource(new StringReader(theString))); 
```

为了拯救你，你可以按照我上面所说的去做。要将文档转换回字符串：

```
fileData = doc.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:05:57.753

```
public class StringToXML {  
public static void main(String[] args) {  
    String xmlString = "<?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"></soap:Envelope>";  

     DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();  

    DocumentBuilder builder;  
    try  
    {  
        builder = factory.newDocumentBuilder();  

        // Use String reader  
        Document document = builder.parse( new InputSource(  
                new StringReader( xmlString ) ) );  

        TransformerFactory tranFactory = TransformerFactory.newInstance();  
        Transformer aTransformer = tranFactory.newTransformer();  
        Source src = new DOMSource( document );  
        Result dest = new StreamResult( new File( "xmlFileName.xml" ) );  
        aTransformer.transform( src, dest );  
    } catch (Exception e)  
    {  
        // TODO Auto-generated catch block  
        e.printStackTrace();  
    }  
} 
```

此信息很有帮助。

谢谢，帕万

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T16:09:15.737

就这么简单：

```
String text = "<your><xml>data</xml></your>";
Writer writer = new FileWriter("/tmp/filename.xml");
writer.write(text);
writer.flush();
writer.close(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T16:19:30.743

我建议使用[commons-io](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#writeStringToFile%28java.io.File,%20java.lang.String%29)。它有一个方法可以完成您需要的一切。

代码看起来像

```
FileUtils.writeStringToFile(new File("filename.xml"), xml); 
```

# jquery - JQuery Mobile 和 Knockout 集成——滑块已创建但不起作用

> ID：13747534
> 
> 赞同：4
> 
> 时间：2012-12-06T15:59:15.033
> 
> 标签：jquery, mobile, knockout.js

基本问题是在 Knockout 模板中从 JQuery Mobile 创建的滑块不起作用。滑块不滑动。

我创建了以下 jsFiddle 示例来说明我的问题：

[http://jsfiddle.net/fdoub/YEUgw/](http://jsfiddle.net/fdoub/YEUgw/) -- 带颜色的滑块不起作用 [http://jsfiddle.net/fdoub/YEUgw/1/](http://jsfiddle.net/fdoub/YEUgw/1/) -- 我想出的解决方法

我检查了其他 stackoverflow 帖子，但没有找到任何解决方案。我试过淘汰 bindingHandlers 和 JQuery mobile .refresh 没有成功。

这是我的第一篇 stackoverflow 帖子，如果我做得不够好，请保持温和。

非常感谢您提供的所有宝贵建议。

**非工作示例：**

```
<!DOCTYPE html>
<html>
<head>
    <title>Slider Problem</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.1.0.js"></script>
</head>
<body>
    <div data-role="page" id="page1">
        <div data-role="header">
            <h4>Slider Sample</h4>
        </div>
        <div data-role="content">
            <p>Working Slider</p>
            <select name="slider" class="flip-a" data-role="slider">
                <option value="off">Off</option>
                <option value="on">On</option>
            </select>
            <span>Label Value</span>
            <br />
            <br />
            <span>Non-Working Sliders</span>
            <div data-bind="foreach:colors" style="visibility: visible;">
                <select name="slider" class="flip-a" data-role="slider">
                    <option value="off">Off</option>
                    <option value="on">On</option>
                </select>
                <span data-bind="text:$data"></span>
                <br />
            </div>
            <script type="text/javascript">
$('#page1').on('pageinit', function () {
  var viewModel = {
      colors: ko.observableArray(["Green", "Blue", "Red"]),
  };
  ko.applyBindings(viewModel);
});
            </script>
        </div>
    </div>
</body>
</html> 
```

**通过将javascript更改为使其工作**

```
<script type="text/javascript">
//turn off slider creation
$.mobile.slider.prototype.options.initSelector = ".nosliders";

$('#page1').on('pageinit', function () {
  var viewModel = {
      colors: ko.observableArray(["Green", "Blue", "Red"]),
  };
  ko.applyBindings(viewModel);

//manually create sliders
  $(".flip-a").slider({
   create: function(event, ui) { }
  });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:47:58.947

我不是 Knockout 方面的专家，但您可以像这样创建绑定处理程序：

```
 ko.bindingHandlers.jSlider = {
                                    init: function(element) {
                                             $(element).slider({ create: function(event, ui) { }});
                                            }                                                            
  }; 
```

然后每个带有 data-bind="{jSlider:true}" 的元素都会调用 init 方法并创建你的滑块。

查看[此](http://learn.knockoutjs.com/#/?tutorial=custombindings)以获取更多信息。

# asp.net - 使用 ASP.net 从 JSON 中反序列化一个数组

> ID：13747535
> 
> 赞同：0
> 
> 时间：2012-12-06T15:59:22.957
> 
> 标签：asp.net, json

我试图从这个 JSON 字符串中获取“结果”数组，但无法找出最好的方法：

```
{"error": null, "jsonrpc": "2.0", "id": 1, "result": ["1", "0", "100.00", "0", "None", "GBP", "", "", "", "", "603628-200007313", "", "", "GBP", ""]} 
```

理想情况下，我也需要它之前的 3 对，加上阵列，这样我就可以用它做点什么。

如果有人可以提供帮助，我将不胜感激。我一直在尝试同时使用 JSON.Net 和内置的序列化类，但我发现的所有示例似乎都是关于将名称-值对抓取到对象中。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:06:38.077

我使用 System.Web.Script.Serialization.JavaScriptSerializer 类。

然后，您可以反序列化到给定的类或匿名对象。

```
Imports System.Web.Script.Serialization
...
Dim json As New JavaScriptSerializer
Dim oJsObject As JsObject = json.Deserialize(Of JsObject )(jsonstring) 
```

# php - 使用 php 表单和 mysql 增加按钮点击次数

> ID：13747538
> 
> 赞同：1
> 
> 时间：2012-12-06T15:59:34.387
> 
> 标签：php, mysql

我是 php 和 mysql 的新手，所以我敢肯定这很简单！

我想根据单击的按钮增加特定条目。我遇到的问题是我不确定如何告诉 mysql 通过 php 增加哪个条目。

我正在使用 while 循环来显示我的表格，然后在每一行的末尾添加一个按钮，该按钮的名称 = $row[id] value = $row[likes]。如果 name 只是一个单词，那么这不是问题，但我需要它根据它所在的行而有所不同。（我使用行 id 自动递增，我不显示它但它存在） .

我的.html：

```
$host="xxx";
$username="xxx";
$password="xxx";
$db_name="xxx";
$tbl_name="blog";

mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$result = mysql_query("SELECT * FROM $tbl_name ORDER BY id DESC");

echo "<table id='blog'>
<tr>
<th>Update</th>
<th>Likes</th>
</tr>";

while($row = mysql_fetch_array($result)) {
    echo "<tr>";
    echo "<td id='entry'>" . $row['entry'] . "</td>";
    echo "<td id='like'>" . "<form action ='likes.php' method ='post'>" . "<input type='submit' name='$row[id]' value='$row[likes]' />" . "</form>" . "</td>";              
    echo "</tr>"; }
echo "</table>";
mysql_close($con);
?> 
```

我的.php：

```
<?php
$con = mysql_connect("xxx","xxx","xxx");
if (!$con) {
    die('Could not connect: ' . mysql_error()); }

mysql_select_db("xxx", $con);

if(mysql_query("UPDATE blog SET likes = likes +1 WHERE id = '$_POST[$id]'")) {
    header('location:blog.php'); }
else {
    echo "Error: " . mysql_error(); }
mysql_close($con);
?> 
```

我想要做的就是在 html 文档中使用 WHERE id = $_POST[id] 链接“输入名称 = $row[id]”，以便在单击按钮时增加类似计数。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:05:40.853

在表单中使用隐藏的输入来告诉 PHP 端增加哪个条目。

```
echo "<td id='like'><form action ='likes.php' method ='post'><input type='hidden' name='id' value='" . (int)$row['id'] . "' /><input type='submit' name='submit' value='" . (int)$row['likes'] . "' /></form></td>"; 
```

查询行应为：

```
if(mysql_query("UPDATE blog SET likes = likes +1 WHERE id = '" . (int)$_POST['id'] . "'")) { 
```

请注意，我将 ID 转换为`(int)`，这可以防止查询中的 SQL 注入，并在输出时防止 XSS。

提交按钮对于数据的传输是不可靠的，这是因为在某些情况下，并非所有浏览器实际上都将提交按钮作为 POST/GET 变量发送。

我注意到的另一件事是使用这种语法`$row[likes]`应该是：

```
$row['likes'] 
```

如果不包含引号，则 PHP 首先将`likes`其视为常量，如果未定义，则返回为字符串。

# c# - 如何在 System.Web.Extensions 的 webconfig 中找到正确的参考？

> ID：13747539
> 
> 赞同：0
> 
> 时间：2012-12-06T15:59:34.080
> 
> 标签：c#, asp.net, .net

从 Visual Studio 2005 运行我的 3.5 Web 应用程序时出现错误（是的，我知道..）

![错误信息](../Images/c06c27a84102b7ca0bece36a2748d837.png)

为了工作，我已经删除并再次添加了这个冲突的项目引用。如何在 web.config 中找到此 System.Web.Extensions 的正确参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:29:08.117

ArsenMkrt，它在安装 ajax 扩展后工作，把它作为答案，所以我可以标记它，谢谢

# php - 无法连接到 smtp（连接被拒绝）

> ID：13747542
> 
> 赞同：2
> 
> 时间：2012-12-06T15:59:43.020
> 
> 标签：php, smtp

我环顾四周，有很多关于这个问题的问题，但我想它们都有些具体，似乎没有我正在寻找的信息。

我们最近在我们的网站上添加了电子邮件功能，以便我们可以向注册、忘记密码等的人发送自动电子邮件。这已正确设置并且在 Localhost 上运行良好。

然后我们将该站点推送到 Web 服务器，但它无法正常工作。我们收到以下错误消息：

> fsockopen() [function.fsockopen]：无法连接到 smtp.sendgrid.net:587（连接被拒绝）

其次是与依赖于上述连接发生的功能相关的一系列其他错误。我们尝试了端口 587、25 和 2525，但没有成功。

这是代码：

```
$this->load->library('email');

$this->email->initialize(array(
    'protocol' => 'smtp',
    'smtp_host' => 'smtp.sendgrid.net',
    'smtp_user' => 'username',
    'smtp_pass' => 'secretpwd',
    'smtp_port' => 587,
    'crlf' => "\r\n",
    'newline' => "\r\n",
    'mailtype' => 'html'
));

$this->email->from('info@domain.com', 'CompanyName');
$this->email->to($this->input->post('register_email')); 

$this->email->subject('Application Confirmation');

$this->email->message('Hello');

$this->email->send() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T16:26:34.907

**您的域上有开放中继！！！！！！！**如果您使用的是 postfix，请将您的主配置文件更新为此

```
smtpd_recipient_restrictions = 
    reject_unknown_recipient_domain
    permit_sasl_authenticated
    reject_unauth_destination #this is important
    permit 
    smtpd_sender_restrictions = reject_unknown_sender_domain 
```

至于你的问题，给我看一些代码。仅从这一点很难得出什么是错的结论。

# c++ - 用 Qt 下载文件？

> ID：13747548
> 
> 赞同：1
> 
> 时间：2012-12-06T16:00:02.617
> 
> 标签：c++, qt, networking, qtnetwork

我正在尝试找出一种方法，让我的 Qt 浏览器应用程序可以从我们的 Web 应用程序下载 Word 文档。Web 应用程序是用 ExtJS 编写的，当（在 Chrome 等浏览器中）用户单击“下载报告”按钮时，javascript 事件侦听器检测到该单击并打开 0px0px iframe 并下载文件。我不确定如何在 Qt 中复制此浏览器功能？

当我点击链接时，我会收到网络回复`"Operation canceled" 5`？

什么类/方法最适合检索这些文件？

![在此处输入图像描述](../Images/a97f830292df6537125e8d5b2aae0157.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T11:00:31.557

下载你需要的文件：在这种情况下是一个*QNetworkAccessManager* *http*。在这种情况下为*QFile**文件*。在这种情况下，一个*QNetworkReply**回复* 将回复与一个插槽连接，该插槽写入通过*QNetworkAccessManager*接收到的字节，在这种情况下，该插槽称为*readingReadyBytes()*

所以我创建了请求并连接到我的插槽：

```
 const QNetworkRequest& request = QNetworkRequest(url);
 reply = http->get(request);
 QObject::connect(reply, SIGNAL(readyRead()), this,
        SLOT( readingReadyBytes() )); 
```

然后我创建我的插槽：

```
 void yourClass::readingReadyBytes() {
    file->write(reply->read(reply->bytesAvailable()));
 } 
```

最后你必须保存并关闭你的文件。通常是在*QNetworkAccessManager*发出*完成*的信号时完成的。这就是我记得的，我认为这就是全部。

# ruby - 管理 Rails 控制器

> ID：13747551
> 
> 赞同：0
> 
> 时间：2012-12-06T16:00:12.653
> 
> 标签：ruby, ruby-on-rails-3

我有一个主页 HomeController 这会加载主页视图，该主页视图在页面顶部有一些标题内容和其他 html。我在页面上的所有内容下方还有一个故事板，然后是其他一些主页 html 内容。现在故事板也有一个模型视图控制器。我的问题是如何让我的视图加载到主页上的故事板区域。我是否需要从我的 HomeController 到我的 StoryBoard 控制器进行通信，以将 StoryBoard 视图放置到故事板要显示的主视图区域中。

我不确定如何建立两者之间的关系。

**用代码更新。**

这段代码实际上是由 rails 生成的脚手架代码。希望这将有助于弄清楚我想要做什么。我只想能够将我的故事板渲染到主视图故事板 div 标签中。

**家庭控制器**

```
class HomeController < ApplicationController
  def index
  end

end 
```

**主页视图**

```
<body>
<div id="description">
    <div id="info">
        <p class="title">Sed ut perspiciatis unde omnis</p>
        <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo</p>
    </div>
</div>
<div id="soryboard">
  // add story board view here
</div>
<div id="section2">
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo</p>
</div>

</body> 
```

**故事板控制器**

```
class StoryboardsController < ApplicationController
  # GET /storyboards
  # GET /storyboards.json
  def index
    @storyboards = Storyboard.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @storyboards }
    end
  end

  # GET /storyboards/1
  # GET /storyboards/1.json
  def show
    @storyboard = Storyboard.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @storyboard }
    end
  end

  # GET /storyboards/new
  # GET /storyboards/new.json
  def new
    @storyboard = Storyboard.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @storyboard }
    end
  end

  # GET /storyboards/1/edit
  def edit
    @storyboard = Storyboard.find(params[:id])
  end

  # POST /storyboards
  # POST /storyboards.json
  def create
    @storyboard = Storyboard.new(params[:storyboard])

    respond_to do |format|
      if @storyboard.save
        format.html { redirect_to @storyboard, notice: 'Storyboard was successfully created.' }
        format.json { render json: @storyboard, status: :created, location: @storyboard }
      else
        format.html { render action: "new" }
        format.json { render json: @storyboard.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /storyboards/1
  # PUT /storyboards/1.json
  def update
    @storyboard = Storyboard.find(params[:id])

    respond_to do |format|
      if @storyboard.update_attributes(params[:storyboard])
        format.html { redirect_to @storyboard, notice: 'Storyboard was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @storyboard.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /storyboards/1
  # DELETE /storyboards/1.json
  def destroy
    @storyboard = Storyboard.find(params[:id])
    @storyboard.destroy

    respond_to do |format|
      format.html { redirect_to storyboards_url }
      format.json { head :no_content }
    end
  end
end 
```

**故事板视图**

```
<h1>Listing storyboard</h1>

<table>
  <tr>
    <th>Image url</th>
    <th>Title</th>
    <th>Description</th>
    <th>Category</th>
    <th>Link</th>
    <th>Width</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @storyboards.each do |storyboard| %>
  <tr>
    <td><%= storyboard.image_url %></td>
    <td><%= storyboard.title %></td>
    <td><%= storyboard.description %></td>
    <td><%= storyboard.category %></td>
    <td><%= storyboard.link %></td>
    <td><%= storyboard.width %></td>
    <td><%= link_to 'Show', storyboard %></td>
    <td><%= link_to 'Edit', edit_storyboard_path(storyboard) %></td>
    <td><%= link_to 'Destroy', storyboard, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Storyboard', new_storyboard_path %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:04:22.363

`#render`在 Rails 中，您可以渲染任何模板：

```
# home/index.html.erb
# ...
<div id="soryboard">
 <%= render :template => "storyboard/index" %>
</div>
# ... 
```

**但是**，您必须确保该模板中使用的所有数据在 HomeController 操作中也可用。

* * *

**此外**，如果您还没有，您可能还想更多地使用应用程序布局文件。因为那通常是页眉和页脚之类的地方
典型的应用程序布局：

```
<!DOCTYPE html>
<html>
<head>
  <title>Title</title>
  <%= csrf_meta_tag %>
</head>
<body id="<%= params[:controller].gsub("/","_")+"_"+params[:action] %>">
  <div id="wrapper">
    <div id="header">
    </div>

    <!-- renders the corresponding template -->
    <%= yield %> 

    <div id="footer"> 
      <small>&copy; <%= Time.now.year %></small>
    </div>    
  </div>    
</body>
</html> 
```

# ruby-on-rails - Why is capybara not available in request specs?

> ID：13747553
> 
> 赞同：7
> 
> 时间：2012-12-06T16:00:23.940
> 
> 标签：ruby-on-rails, rspec, capybara

Working on a new Rails 3.2.9 app with rspec and capybara.

I have the following in the Gemfile:

```
gem 'rspec-rails'
gem 'capybara' 
```

and the following in spec/spec_helper.rb:

```
require 'rspec/rails'
require 'capybara/rspec' 
```

and in spec/requests/asdf_spec.rb:

```
require 'spec_helper'
describe 'Asdf' do
  describe "GET /asdfs" do
    it "should list asdfs" do
      visit asdfs_path
    end
  end
end 
```

This test is failing:

```
Failure/Error: visit asdfs_path
NoMethodError:
 undefined method `visit' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_2::Nested_1:0x007fa7b68961a0>
# ./spec/requests/asdfs_spec.rb:19:in `block (4 levels) in <top (required)>' 
```

So it looks like Capybara isn't getting loaded. Ack, why not? I feel like I've done this exact same thing a dozen times before... probably blanking on something stupid.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T18:12:55.203

So it was a capybara version 2 change. I found this:

[http://alindeman.github.com/2012/11/11/rspec-rails-and-capybara-2.0-what-you-need-to-know.html](http://alindeman.github.com/2012/11/11/rspec-rails-and-capybara-2.0-what-you-need-to-know.html)

which explains:

> Upon upgrading to capybara 2.0, ***capybara will not be available by default*** in RSpec request specs. Instead, a new type of spec--the feature spec--has been created for use with capybara.
> 
> To upgrade to capybara 2.0, you'll need to do a few things:
> 
> *   Upgrade rspec-rails to 2.12.0 or greater
> *   Move any tests that use capybara from spec/requests to spec/features. Capybara tests use the visit method and usually assert against page.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-14T19:54:20.533

Just some additional info for anybody having the same problem with the Capybara upgrade to `2.x`. Check out rspec-rails docs under the [Upgrading to Capybara 2](http://rubydoc.info/gems/rspec-rails/file/Capybara.md) section.

Basically, In order to use the Capybara DSL(page & visit) you must move your existing specs into the `spec/features` directory. So you can only use `page & visit` in acceptance tests. No more page & visit in controller and request specs. Only the rack-test DSL `(get|post|put|delete|head/response.body)` is allowed in controller and request specs.

This is **not** recommended but there is a way to keep your specs working as they are:

```
RSpec.configure do |c|
  c.include Capybara::DSL, :example_group => {
    :file_path => "spec/requests"
  }
end 
```

The docs state that if you go this route then you are overriding the intended behavior and you are taking a risk.

And definitely don't make this as a reason not to upgrade to `Capybara 2.x`. Feature specs are easy to get used to and are easy to read. `feature` is just an alias for `describe`, `background` is an alias for `before`, `scenario` for `it`, and `given` for `let`.

Hope this helps anyone confused by the new changes.

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-06T16:40:05.067

The issue is in capybara gem itself.

`gem 'capybara', '1.1.2'` solves this issue ( Version 2.0.x fails )

# javascript - 带有javascript代码的iphone应用程序和uiwebview我可以访问变量吗？

> ID：13747558
> 
> 赞同：0
> 
> 时间：2012-12-06T16:00:39.140
> 
> 标签：javascript, iphone, html, objective-c, ios

我有一个带有 javascript 的网页，将视图拆分为用户可见的“页面”：

```
 <!-- optionally include helper plugins -->
    <script type="text/javascript" language="javascript" src="js/jquery.mousewheel.min.js"></script>
    <script type="text/javascript" language="javascript" src="js/jquery.touchSwipe.min.js"></script>
    <script type="text/javascript" language="javascript" src="js/jquery.ba-throttle-debounce.min.js"></script> 
```

我想知道应用程序是否可以知道显示的页面...访问页面中的一些变量或其他一些方法来了解它。我没有对页面进行编程，所以我只问在概念上是否可行，以及由网页中的事件驱动的知​​道页面发生了什么的方法是什么谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:26:52.350

使用调用stringByEvaluatingJavaScriptFromString：如果你有一个将返回显示页面的javascript方法，你可以使用上面的调用来查询页面并返回结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:12:11.097

我不确定这样做的任何直接方法。使用一些特定于应用程序的自定义 url 方案是一件好事。这个答案接近回答您的问题 -[从 UIWebView 中的 javascript 向 ObjectiveC 发送通知](https://stackoverflow.com/questions/5671742/send-a-notification-from-javascript-in-uiwebview-to-objectivec)

我还在某处阅读了有关`NSLog`从您的 javascript 代码写入的信息，然后遍历该日志并提取您的 Objective-C 代码要使用的命令和变量。从未尝试过。

# widget - SWT 使用 TAB 在 TableViewer 中移动

> ID：13747560
> 
> 赞同：2
> 
> 时间：2012-12-06T16:00:45.660
> 
> 标签：widget, swt, jface, tableviewer

[另一个类似的 StackOverflow 问题](https://stackoverflow.com/questions/1500918/tab-between-fields-in-tableviewer)在一定程度上帮助了我。

我的`TableViewer`单元格包含布尔小部件`editors`（不是您通常的检查按钮小部件，而是一个切换按钮，可以是“选中”/“未选中”）。

![](../Images/a9a31113f106607d4604a28ca31d1b30.png)

表格必须：
- 选择单元格时始终显示编辑器；
- 当单元格焦点丢失时禁用编辑器；-按下时
正确移动到下一个；`row``TAB`

![](../Images/c9ebaeaae3bc28470364b704c18522ad.png)

![](../Images/dd323a006a077d44e06e571ae985cc50.png)

显然容易，实践起来很难。很多听众冲突（`TAB`实际上不起作用）。

**后期编辑：**

我已经设法解决了大多数错误，但是这个错误仍然让我大吃一惊。如果我用**鼠标**更改小部件的值，然后按`TAB`遍历，焦点会跳转到**下一行**，而不是下一行。但是，如果我使用空格键更改编辑器的值，那么遍历就可以了；它应该跳到下一行。

我应该如何调试那些该死的听众？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T16:21:50.773

为了便于开发，您可以在 JFace 中使用一些帮助程序类，而不必处理选项卡或鼠标单击的事件处理。这是一个可以帮助您入门的片段：

```
TableViewer viewer = ...

TableViewerFocusCellManager focusCellManager = new TableViewerFocusCellManager(viewer, new FocusCellOwnerDrawHighlighter(viewer));

ColumnViewerEditorActivationStrategy activationSupport = new ColumnViewerEditorActivationStrategy(viewer) {
    protected boolean isEditorActivationEvent(ColumnViewerEditorActivationEvent event) {
        if (event.eventType == ColumnViewerEditorActivationEvent.MOUSE_CLICK_SELECTION) {
            EventObject source = event.sourceEvent;
            if (source instanceof MouseEvent && ((MouseEvent)source).button == 3)
                return false;
        }
        return super.isEditorActivationEvent(event) || (event.eventType == ColumnViewerEditorActivationEvent.KEY_PRESSED && event.keyCode == SWT.CR);
    }
};

TableViewerEditor.create(viewer, focusCellManager, activationSupport, ColumnViewerEditor.TABBING_HORIZONTAL | 
    ColumnViewerEditor.TABBING_MOVE_TO_ROW_NEIGHBOR | 
    ColumnViewerEditor.TABBING_VERTICAL |
    ColumnViewerEditor.KEYBOARD_ACTIVATION); 
```

# php - 如何删除 PHP 字符串中的特殊字符？

> ID：13747563
> 
> 赞同：0
> 
> 时间：2012-12-06T16:00:49.403
> 
> 标签：php, character-encoding

我得到的输出为

```
FBI believed he had a â€˜doomsday deviceâ€™ 
```

代替

```
FBI believed he had a ‘doomsday device’ 
```

当我使用

```
iconv("UTF-8", "ISO-8859-1//IGNORE", $topic); 
```

输出是

```
FBI believed he had a âdoomsday deviceâ 
```

我没有在我的文件中使用任何标题或字符集。

**更新**

知道为什么会这样

当 UTF-8 系列数字被解释为 ISO-8859-1 时，输出为

?

**解释**

0xE28099 分解为 0xE2 (â)、0x80 (€) 和 0x99 (™)。UTF-8 中的一个字符 (') 在被误解为 ISO-8859-1 时会被错误地显示为三个 (â€™)。

仍然没有解决方案来转换它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:11:51.130

那么输出页面正在被解释`Windows-1252`，而不是 ISO-8859-1..

我建议将您的标题字符集设置为 utf-8：

在 Apache 配置中：

```
AddDefaultCharset utf-8 
```

php.ini：

```
default_charset utf-8 
```

在php中手动：

```
header("Content-Type: text/html; charset=utf-8"); 
```

如果由于某些奇怪的原因您无法执行上述任何操作，则应改为转换为 Windows-1252：

```
iconv("UTF-8", "Windows-1252//IGNORE", $topic); 
```

# c++ - 几个单例：每个任务一个

> ID：13747566
> 
> 赞同：2
> 
> 时间：2012-12-06T16:01:02.357
> 
> 标签：c++, multithreading, singleton, task, ssl

我有一个 C++ 多线程应用程序，它在单独的线程中运行任务。每个任务都有一个对象来处理和存储它的输出。每个任务创建不同的业务逻辑对象，可能还有另一个线程或线程池。

我想要做的是以某种方式为任务运行的任何业务逻辑对象提供一种简单的方法来访问每个任务的输出，而无需手动将“输出”对象传递给每个业务逻辑对象。

我看到的是创建输出单例工厂并将 task_id 存储在 TLS 中。但问题是当业务逻辑创建一个新线程或线程池时，这些线程在 TLS 中不会有 task_id。这样，我将需要访问父线程 TLS。

另一种方法是简单地获取自任务开始以来的所有输出。那时会有不同任务的输出，但至少，总比没有好......

我正在寻找有关解决我的问题的干净而漂亮的方法的任何建议或想法。谢谢。

**upd：**是的，它不是单音的，我同意。我只想能够像这样访问这个对象：

```
output << "message"; 
```

就是这样。不用担心在业务逻辑类之间传递指向输出对象的指针。我需要每个任务都有一个全局输出对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:13:28.797

从应用程序的角度来看，它们不是单例，那么为什么要像单例一样对待对象呢？

我会创建一个输出存储的新实例并将（智能？）指针传递给新线程。主函数可以将指针放在 TLS 中，从而使实例在每个线程中都是全局的（我不认为这是一个明智的设计决定，但有人问过）。当创建一个新的（子？）线程时，可以再次传递指针。所以在我看来，不需要单身人士或工厂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:18:15.057

如果我理解正确，您希望多个类实例（每个不一定是同一个类）都能够访问需要线程安全的公共数据池。我可以想到几种方法来做到这一点。第一个想法是将这个数据池放在一个其他每个类都包含的类中。这个数据池实际上将它的数据存储在一个静态成员中，因此即使数据池类的实例不止一个，也只有一个数据实例。然后该类将具有访问此静态数据池的访问器方法（因此它是透明的）。为了使其线程安全，您将需要通过互斥锁或类似的东西进行访问。

# php - Zend Gdata Google 电子表格 "!=" 运算符

> ID：13747569
> 
> 赞同：0
> 
> 时间：2012-12-06T16:01:16.140
> 
> 标签：php, google-sheets, google-spreadsheet-api, zend-gdata

我在使用 Zend_Gdata API 进行谷歌电子表格查询时遇到问题。

我想执行一个查询，返回给定列/字段的每个空值。

我的代码：

```
 $query = new Zend_Gdata_Spreadsheets_ListQuery();
    $query->setSpreadsheetKey($this->spreadsheetKey);
    $query->setWorksheetId($this->worksheetId);
    $query->setSpreadsheetQuery('FIELD!=""');
    $feed = $this->spreadsheetService->getListFeed($query); 
```

如果我使用此 url 执行相同的操作：

```
http://spreadsheets.google.com/feeds/list/KEY/oda/private/full?sq=FIELD!="" 
```

我获得了所需的输出。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:48:34.953

我解决了这个问题。对于那些有同样问题的人，查询表必须在第一行中包含您正在查询的列（字段）的名称。

前任：

```
 $query->setSpreadsheetQuery('FIELD!=""'); 
```

该表必须有一`FIELD`列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T13:09:49.240

尝试手动删除其他非空行内的空行，因为 Giu87 的解决方案在我的代码中不起作用

# android - Android：从套接字读取时强制关闭

> ID：13747574
> 
> 赞同：1
> 
> 时间：2012-12-06T16:01:31.170
> 
> 标签：android, sockets, forceclose

我正在尝试在 Android 中创建客户端。该客户端运行一个创建客户端套接字的线程并启动另一个始终侦听套接字以接收字符串的线程。当我从客户端向运行在 PC 中的 Java 服务器发送字符串时，一切正常，但是当我从服务器向 Android 客户端发送字符串时，应用程序完成。为什么我会收到此错误？

下面是客户端主Activity的代码：

```
 import java.io.DataInputStream;
    import java.io.DataOutputStream;
    import java.io.IOException;
    import java.net.Socket;

    import android.os.Bundle;
    import android.app.Activity;
    import android.view.Menu;
    import android.view.View;
    import android.widget.EditText;
    import android.widget.TextView;

    public class MainActivity extends Activity {
        TextView chatHistorial;
        EditText msg;
        Socket client;
        DataInputStream in;
        DataOutputStream out;
        Boolean cerrar;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            Thread t = new Thread(new Runnable(){
                @Override
                public void run() {
                    try{
                        client = new Socket("192.168.1.33", 4444);
                        in = new DataInputStream(client.getInputStream());
                        out = new DataOutputStream(client.getOutputStream());
                        cerrar = false;

                        chatHistorial = (TextView) findViewById(R.id.chatHistorial);
                        msg = (EditText) findViewById(R.id.msg);

                        ThreadLectura tl = new ThreadLectura(in, cerrar, chatHistorial);
                        tl.start();
                    }
                    catch(Exception e){
                        // ...
                    }
                }
            });

            t.start();

            findViewById(R.id.enviar).setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    String cadena = msg.getText().toString();
                    try {
                        out.writeUTF(cadena);
                    } catch (IOException e) {
                        // ...
                    }
                    if(cadena.equals("exit"))
                        cerrar = true;
                }
            });
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            //getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

    }

    class ThreadLectura extends Thread{
        DataInputStream in;
        String cadena;
        TextView chatHistorial;
        Boolean cerrar;

        public ThreadLectura(DataInputStream in, Boolean cerrar, TextView tv){
            this.in = in;
            this.cerrar = cerrar;
            chatHistorial = tv;
        }

        @Override
        public void run(){
            try{
                while(!cerrar){
                    cadena = in.readUTF();
                    chatHistorial.append("Has recibido: " + cadena);
                }
            }
            catch(IOException ioe){
                System.out.println("Error de entrada/salida: "+ioe.getMessage());
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:13:18.087

没有看到您的 logcat 输出很难说，但我敢打赌，这是因为您正试图从后台线程中修改 UI。此行内`ThreadLectura`：

```
chatHistorial.append("Has recibido: " + cadena); 
```

可能是问题`chatHistorial`所在， `TextView`. 您只需要从主 UI 线程中修改 UI。

# android - 在 Android 应用中通过浏览器观看 YouTube 视频

> ID：13747575
> 
> 赞同：1
> 
> 时间：2012-12-06T16:01:36.730
> 
> 标签：android, youtube

我正在编写一个包含视频内容并在 YouTube 上引用视频的 android 应用程序。我在 Android 2.3 SDK 中实现了代码，它可以正常运行。但是，我的手机更新到了 Android 4.0，现在活动力关闭了。该活动只是使用图像和文本视图来链接，而不是视频视图。在向后兼容 2.3 的 4.0 中实现此活动的正确方法是什么？

# regex - 设置不包含字符串的过滤器

> ID：13747576
> 
> 赞同：0
> 
> 时间：2012-12-06T16:01:39.610
> 
> 标签：regex

该字符串应包含： `200`then `GET`(`text/html`或`text/plain`)

```
.*(\/200)+.*(GET)+.*(text\/html|text\/plain) 
```

这是有效的，我想再添加一个条件。字符串不应包含`TEST`.

我应该如何添加该条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:09:38.283

将您的正则表达式简化为：

```
.*\/200.*GET.*(text\/html|text\/plain) 
```

哪个II相当肯定仍然满足您的要求（我认为`(term)+.*`相当于`term.*`，如果我对此的想法有误，请纠正我）。

因此，您可以使用负前瞻来做您想做的事情：

```
^(?!.*TEST).*\/200.*GET.*(text\/html|text\/plain).*$ 
```

# python - Python：为什么我会收到 WinError 32？

> ID：13747577
> 
> 赞同：3
> 
> 时间：2012-12-06T16:01:46.113
> 
> 标签：python

我正在编写一些代码，根据文件的标题向文件添加扩展名。使用任何 gzip 文件，我都在提取数据。

当我尝试运行代码时，我得到一个 WinError 32。下面是代码和错误

感谢您的任何建议。

```
def extract():
    os.chdir("C:/Users/David/MyFiles")
    files = os.listdir(".")
    for x in (files):
        inputFile = open((x), "rb")
        byte1 = inputFile.read(1)
        byte2 = inputFile.read(1)
        if byte1 == b'\x1f' and byte2 == b'\x8b':
            os.rename((x), (x) + ".gz")
            file = gzip.open((x), "rb")
            content = file.read()
            with open((x), "wb") as outputFile:
                outputFile.write(content) 
```

错误：

```
PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'f_000002.gz' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T16:04:18.587

您应该`inputFile`在尝试重命名之前关闭它：

```
...
    inputFile = open((x), "rb")
    byte1 = inputFile.read(1)
    byte2 = inputFile.read(1)
    inputFile.close() 
```

# c# - 如何从 radwindow 中检索“父”页面的名称？

> ID：13747582
> 
> 赞同：1
> 
> 时间：2012-12-06T16:02:09.650
> 
> 标签：c#, asp.net, telerik, parent, radwindow

我发现我的asp网站有一个小问题。这里是原理。-> 我设置了一个弹出窗口以允许用户发送电子邮件警报错误。当发送电子邮件时，我会发送用户当前页面的名称。但是，这会返回弹出窗口的名称，而不是父页面....

如何从 radwindow（弹出窗口）中检索“父”页面的名称页面（'.aspx'）？

我试过这个，但它不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:09:21.740

从弹出窗口的托管 HTML 中，您可以使用以下 Javascript 片段访问托管页面的 DOM：

```
 <script>
     alert(window.top.document.title);
  </script> 
```

这将返回给您一个漂亮的警告框，其中包含托管 RadWindow 的页面的标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:40:38.360

你能试试吗：

```
//myWindow beeing the popup 
myWindow.document.write("<br><br>" + myWindow.opener.document.location.href + "") 
```

**更新**

如果您无法获取弹出窗口对象，您可以在查询字符串中传递调用窗口的 url：

```
radopen('urlOfThePopup.aspx?opener=' + document.location.href, ...) 
```

然后在您的弹出代码中

```
<%=Request.Querystring("opener")%> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:42:36.140

假设您有一个 RadWindow 而不是实际的浏览器弹出窗口，这就是您需要的代码：

```
// This is a common function when dealing with RadWindows and could be placed in some shared location
function GetRadWindow() {
    var oWindow = null;
    if (window.radWindow) oWindow = window.radWindow;
    else if (window.frameElement.radWindow) oWindow = window.frameElement.radWindow;
    return oWindow;
}

// Use it like this
var parentTitle = GetRadWindow().BrowserWindow.document.title; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T14:39:35.230

你到底想得到什么？页面有标题，而不是名称。无论如何，看看这个：[http](http://www.telerik.com/help/aspnet-ajax/window-programming-calling-functions.html) ://www.telerik.com/help/aspnet-ajax/window-programming-calling-functions.html 。它将向您展示如何在主页上调用 JavaScript 函数，以便它可以返回您需要的任何 JS 对象。

# javascript - 在提交表单时，检查准备上传的文件的大小？

> ID：13747586
> 
> 赞同：3
> 
> 时间：2012-12-06T16:02:21.333
> 
> 标签：javascript, jquery, file-upload, filereader

我有一个可以有多个文件输入的表单（每个输入一个文件，而不是多选）。

当我提交表单时，如何获取所有`input[type="file"]`内容的数组并在上传之前使用 FileReader 查看文件大小，并在任何文件太大时阻止它？

```
$('#MyForm').submit(function() {

}); 
```

从我能找到的有限的 FileReader 文档中我根本无法弄清楚这一点。或者不让它工作，无论如何......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T16:53:56.887

问题是我尝试使用 jQuery 从文件输入中选择文件的方式。以下是一些示例解决方案：

**如果您有一个文件输入，并且用户只能选择一个文件：**

```
// Get the file
var file = $('input[type="file"]').get(0).files[0];

// File size, in bytes
var size = file.size; 
```

**如果您有一个文件输入，则选择多个文件：**

```
// Get an array of the files
var files = $('input[type="file"]').get(0).files;

// Loop through files
for (var i=0; file = files[i]; i++) {

    // File size, in bytes
    var size = file.size;
} 
```

**如果您有多个文件输入，请使用多个文件选择：**

```
// Loop through each file input
$('input[type="file"]').each(function(i) {

    // Get an array of the files for this input
    var files = $(this).get(0).files;

    // Loop through files
    for (var j=0; file = files[j]; j++) {

        // File size, in bytes
        var size = file.size;
    }
}); 
```

* * *

拥有 File 对象后，您可以访问以下属性（除了大小）：

[https://developer.mozilla.org/en-US/docs/DOM/File#Properties](https://developer.mozilla.org/en-US/docs/DOM/File#Properties)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:07:20.423

您正在寻找的`size`财产：

```
var anyOversize =
    Array.prototype.some.call(document.querySelectorAll('input[type="file"]'), function(fileInput) {
        return Array.prototype.some.call(fileInput.files, function(file) {
            return file.size > *limit*;
        });
    });
```

（顺便说一下，这是以字节为单位的大小。）

# c# - 如何在关联的 XAML 中获取 C# 属性？

> ID：13747589
> 
> 赞同：2
> 
> 时间：2012-12-06T16:02:38.247
> 
> 标签：c#, wpf, xaml

我有一个像这样的 C# 类：

```
public partial class MyClass: UserControl
{
    public String SomeText{get;set;}
    ...

    public MyClass(String Text)
    {
        this.InitializeComponent();
        SomeText = Text;
    }

} 
```

我想`SomeText`在我的 XAML 文件中获取该属性。如何做这样的事情？

```
<TextBlock Text="{THIS IS HERE I WANT TO HAVE SomeText}"></TextBlock> 
```

我是 C# 新手，所以我不知道该怎么做。一定有简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:23:15.253

给`UserControl`元素 a`Name`然后绑定到它，如下例所示。如果您的文本不会更改，则应**在**调用`InitialiseComponent`.

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300"
             x:Name="root">
    <Grid>
        <TextBlock Text="{Binding SomeText,ElementName=root}"/>
    </Grid>
</UserControl> 
```

如果您`SomeText`可能会更改，那么您需要将其声明为 a`DependencyProperty`而不是普通的旧`string`属性。这看起来像下面这样：

```
 public string SomeText
    {
        get { return (string)GetValue(SomeTextProperty); }
        set { SetValue(SomeTextProperty, value); }
    }

    // Using a DependencyProperty as the backing store for SomeText.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty SomeTextProperty =
        DependencyProperty.Register("SomeText", typeof(string), typeof(UserControl1), new UIPropertyMetadata("")); 
```

然后，您应该将绑定更改为如下所示，当您更改`SomeString`.

```
<TextBlock Text="{Binding SomeText,ElementName=root,UpdateSourceTrigger=PropertyChanged}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:23:06.553

首先，更正一下：

那是`Property`[(MSDN)](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)，而不是`Attribute` [(MSDN)](http://msdn.microsoft.com/en-us/library/aa288059%28v=vs.71%29.aspx)，这是两个完全不同的概念。

第二：

WPF 有一个称为`DependencyProperties` [(MSDN)](http://msdn.microsoft.com/en-us/library/ms752914.aspx)的概念，您必须利用它来在 WPF 中构建复杂的自定义 UI 控件。

第三：

有时您并不需要在 UI 中声明属性。WPF 使您能够通过其强大的[DataBinding Engine](http://wpftutorial.net/Databinding.html)和[MVVM Pattern](http://en.wikipedia.org/wiki/Model_View_ViewModel)将 UI 与数据分离。所以，再想想你声明的这个控件是否是声明你的字符串属性的正确位置。

如果您打算在 WPF 中工作，我建议您熟悉所有这些概念。

给我更多关于你想要做什么的细节，我可以给你更多的见解。

**编辑：**

基本上，您需要做的是`DependencyProperty`在您的控件中声明 a ，如下所示：

```
public static readonly DependencyProperty DisplayNameProperty = DependencyProperty.Register("DisplayName", typeof(string), typeof(mycontrol));

public string DisplayName
{
    get { return GetValue(DisplayNameProperty).ToString(); }
    set { SetValue(DisplayNameProperty, value); }
} 
```

然后，在 XAML 中：

```
<TextBlock Text="{Binding DisplayName, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}"/> 
```

请记住，WPF 需要与其他框架完全不同的思维方式，所以我的建议仍然有效：如果您打算认真使用 WPF，请熟悉 MVVM 和数据绑定。

# python - 在 Python 中计算文件的平方和

> ID：13747601
> 
> 赞同：1
> 
> 时间：2012-12-06T16:03:22.257
> 
> 标签：python

我正在尝试实现一个程序，该程序计算从文件中读取的数字的平方和。

.txt 文件中的数字是：

```
37
42
59
14
25
95
6 
```

到目前为止，我有：

```
def squareEach(nums):
    nums = nums * nums

def sumList(nums):
    nums = nums + nums

def toNumbers(strList):
    while line != "":
            line = int(line)
            line = infile.readline()

def main():
    print "** Program to find sum of squares from numbers in a file **"
    fileName = raw_input("What file are the numbers in?")
    infile = open(fileName, 'r')
    line = infile.readline()
    toNumbers(line)
    squareEach(line)
    sumList(line)
    print sum 
```

当我运行程序时，我得到：

```
main()
** Program to find sum of squares from numbers in a file **
What file are the numbers in?C:\Users\lablogin\Desktop\mytextfile.txt

Traceback (most recent call last):
File "<pyshell#17>", line 1, in <module>
main()
File "<pyshell#16>", line 6, in main
toNumbers(strList)
NameError: global name 'strList' is not defined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T16:12:27.290

通常，我会提供更详细的解释，但由于我必须运行，我会给你留下一个可以工作的修改后的代码版本

```
def squareEach(nums):
    answer = []
    for num in nums:
        answer.append(num*num)
    return answer

def sumList(nums):
    answer = 0
    for num in nums:
        answer += num
    return answer

def toNumbers(strList):
    answer = []
    for numStr in strList.split():
        try:
            num = int(numStr)
            answer.append(num)
        except:
            pass
    return answer

def main():
    print "** Program to find sum of squares from numbers in a file **"
    fileName = raw_input("What file are the numbers in? ")
    sum = 0
    with open(fileName, 'r') as infile:
        for line in infile:
            nums = toNumbers(line)
            squares = squareEach(nums)
            sum += sumList(squares)
        print sum 
```

当然，您可以在一行中完成所有操作：

```
print "the sum is", sum(int(num)**2 for line in open(raw_input("What file are the numbers in? ")) for num in line.strip()split()) 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:14:16.517

好的，这不是在 python 中做的最好的事情我在这里提出一个新的解决方案：

```
def main():
    print "** Program to find sum of squares from numbers in a file **"
    fileName = raw_input("What file are the numbers in?")
    infile = open(fileName, 'r')
    lines = infile.readlines() # this will return a list of numbers in your file
    squared_number_list = [ int(i)**2 for l in lines ]  # return a squared number of list
    print sum(squared_number_list) # using sum to add up all numbers in list 
```

# java - 通过 JavaPNS 的 iOS 推送通知 - 未显示徽章编号

> ID：13747602
> 
> 赞同：0
> 
> 时间：2012-12-06T16:03:26.987
> 
> 标签：java, ios, push-notification

所以，在咬牙切齿之后，我终于设法让推送通知在 Apple 的开发沙箱环境中工作。一切都很好 - 我正在使用带有 Push.alert 的非常基本的代码，效果很好 - 这是一个示例：

```
 try {
                Push.alert(message, "dev_cert.p12", "xxxxxxxx", false,
                            r.getToken());
                rdr.setLastNotified(new java.util.Date());
            } catch (CommunicationException e) {
                e.printStackTrace();
            } catch (KeystoreException e) {
                e.printStackTrace();
            } 
```

虽然我可以看到消息出现在下拉菜单中，以及屏幕顶部的小滚动通知，但应用程序本身没有徽章编号！是什么赋予了？？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:26:09.507

Ok, so I found the "fix" - the fix involves actually reading the documentation of JavaAPNS - simply use this API:

```
try {

    // message (String), badge # (int), sound (String), certificate (String), password (String), production (boolean true/false - false is for sandbox), token (String)

Push.combined(message, 1, null, cert, "verysecretpassword", false, r.getToken());

        } catch (CommunicationException e) {
            e.printStackTrace();
        } catch (KeystoreException e) {
            e.printStackTrace();
        }
 } 
```

Now sadly, the iphone has no way of keeping a track of the NUMBER of the badge (it does not auto-increment), you the developer must keep a track of that on the server.

# java - Java 作为 Java 的脚本语言？

> ID：13747603
> 
> 赞同：14
> 
> 时间：2012-12-06T16:03:28.270
> 
> 标签：java, performance, scripting, jvm

是否可以将 Java 用作 Java 的脚本语言？或者也许在运行时以某种方式将java脚本编译成java二进制文件？我确实尝试过搜索，但除了一些黑客之外找不到任何全面的东西......

我有其他语言的经验，例如对于 C#，我使用了非常方便的 lua，但现在我需要实现最大的性能，因为对脚本的调用大约为每帧 1.000.000。

因此，我认为将 java 本身改编为 java 程序的脚本语言应该为我提供最佳的性能和兼容性。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T16:06:05.520

[BeanShell](http://www.beanshell.org/)是一种常用的 Java 脚本解决方案。它是一种非常类似于 Java 的脚本语言。

存在其他使用 Java 基础架构和 JVM，但使用不同语言的解决方案。例如 Scala、Groovy 和 Jython（一种与 Java 兼容的 Python）。所有这些要实现的重要一点是，它们将与使用标准 Java 创建的 Java 库进行互操作，因此您可以简单地使用（例如）Scala 来驱动您的 Java 语言创建的解决方案。

以上都提供了一个 REPL ( [read-eval-print-loop](http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop) )，因此您可以在动态命令行环境中导入、实例化对象并与之交互。这对于测试和原型交互以及测试脚本非常有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T16:05:53.510

您可以为此使用 BeanShell，但 Groovy、XTend 和 Scala 可能会做出更好的选择。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-06T16:09:21.807

答案是“是的”，您可以在 Java 程序本身中使用 Java 作为脚本语言。此外，还有其他几种语言也可以用于此目的——Javascript、LUA、Groovy、Ruby，这个列表很长。引入 javax.scripting API 使集成变得更加容易，它标准化并极大地简化了将第三方脚本语言集成到 Java 程序中的过程。我强烈建议阅读 API 和 Oracles 页面上的一些教程。

[http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html](http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-20T19:41:51.223

您可以使用 JANINO [http://docs.codehaus.org/display/JANINO/Home](http://docs.codehaus.org/display/JANINO/Home) ...一个轻量级的“嵌入式”JavaTM 编译器，将内存中的简单程序编译成 JavaTM 字节码，在运行程序的 JVM 中执行...请参阅示例[http://docs.codehaus.org/display/JANINO/Basic](http://docs.codehaus.org/display/JANINO/Basic)

或者您可以使用 MVEL [http://mvel.codehaus.org/](http://mvel.codehaus.org/) 它类似于 BeanShell，但要快得多。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-08-13T15:21:40.310

从 7.0 版开始，Java 对运行时编译有了“官方”支持（如果 SDK 中的 tools.jar 在类路径上）。大概，执行速度可以和编译的java一样高，高于解释器。

阅读起点（互联网上的许多示例）：

```
import javax.tools.JavaCompiler;
import javax.tools.ToolProvider;

JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
if(compiler!=null) {
    .... 
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-08-15T19:38:37.067

Java 11 支持无需编译即可运行源代码。

对于`HelloWorld.java`包含

```
public class HelloWorld {
  public static void main(String[] args) {
    System.out.println("Hello World!!!");
  }
} 
```

你可以跑

`java HelloWorld.java`

执行代码。有一个限制：必须在同一个文件中定义所有类。

如果文件没有`.java`扩展名，则需要包含`--source`选项。

例如，对于`HelloWorld`包含您需要运行的源代码的文件

`java --source 11 HelloWorld`.

要直接在 shell 中运行 java“脚本”，您可以使用

```
#!/usr/bin/java --source 11

public class HelloWorld {
  public static void main (String[] args) {
    System.out.println("Hello World")
  }
} 
```

哪里`/usr/bin/java`是`java`二进制的路径。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-07T05:40:53.010

对于当 groovy 等不可用时的简单内容，我将 java 嵌入到 bash 脚本中，如项目[java-script-template](http://github.com/davidmoten/java-script-template)中所述。代码如下所示：

```
#!/bin/bash
set -e
TEMP_DIRECTORY=/tmp
TEMPFILE=`mktemp $TEMP_DIRECTORY/ScriptXXXXX|sed -e 's/\.//g'`
CLASS_NAME=`basename "$TEMPFILE"`
JAVA_SOURCE=$TEMPFILE.java
cat <<EOF >$JAVA_SOURCE.tmp

//Write your java class here with a main method
//Be sure to leave the name of the class as Script 

//import some commonly used imports
import java.io.*;
import java.text.*;
import java.util.*;

public class Script {

    public static void main(String[] args) throws Exception {
       System.out.println("Here's a test run for you");
    }

}

EOF

## change the name of the class to match the file
sed "s/public class Script /public class $CLASS_NAME /g" $JAVA_SOURCE.tmp >$JAVA_SOURCE

## compile the java
javac $JAVA_SOURCE 

## run the class using all passed in parameters from the command line
java -classpath $TEMP_DIRECTORY $CLASS_NAME 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-15T11:42:50.880

[RelProxy](https://github.com/jmarranz/relproxy/)是一个运行中的 Java 编译器（在内存中），它使 Java 感觉像是一种脚本语言，但没有任何限制。当 Groovy 在 Java 环境中使用时，它还支持 Groovy 类的热类重载。

# math - 快速拒绝：二进制除法有0余数？

> ID：13747604
> 
> 赞同：2
> 
> 时间：2012-12-06T16:03:30.977
> 
> 标签：math, binary

我有没有一种快速的方法来判断（快速拒绝）一个二进制数在除以另一个二进制数时是否余数为 0？我不想必须执行整个部门。例如，将 1001 0110 1011 1110 除以 11011。不需要进位。

这是一个网络项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:09:29.583

不，一般不会。

可以快速检查某些特殊情况，例如除数是否为 2 的幂，但对于一般问题没有捷径可走。

另外：尽管特殊情况的快捷方式必须使用数字的编码，但除法是否产生余数是所涉及数字的属性，而不是它们的编码。

# jquery - 返回具有特定类的对象的 id

> ID：13747606
> 
> 赞同：2
> 
> 时间：2012-12-06T16:03:42.083
> 
> 标签：jquery, asp.net, iframe

如果我有一页带有生成（唯一）ID 的 iFrame 对象页面，如果它们 .haveClass('specific_class')，我是否可以返回这些 id... 例如：我想用一个特定类并返回他们的唯一 ID 我将如何去做？

我认为我在滥用 jquery 的选择器，因为它在我的 if 语句中没有达到 true。//我已经尝试了几次迭代来找出选择器，但我仍然有点困惑。

```
if($(document).hasClass('specific_class'))
{
    alert("You found a iframe with this class");
    //return the iframe with this class's id
} 
```

感谢任何帮助，因为我对 Jscript 很陌生 - 作为旁注，我正在使用 ASP.net 执行此操作，所以我不确定这是否是问题的一部分。

谢谢，米奇

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T16:06:02.893

你不能只用每个语句来做 - 甚至不需要 if 语句

```
$('.specific_class').each(function(i,v){
    alert(v.id);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:13:11.500

```
var ids = $.map($('.specific_class'),function(item){
    return item.id;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:06:39.533

您需要选择该类的所有元素并测试它的长度。

```
if ($(".specific_class").length) {
     //do stuff
} 
```

# javascript - 与文件上传器和顶部对齐的标签一起使用时，如何对齐底部的按钮？

> ID：13747607
> 
> 赞同：1
> 
> 时间：2012-12-06T16:03:43.013
> 
> 标签：javascript, css, file-upload, extjs, extjs4.1

我正在使用文件字段进行文件上传，并且在其旁边放置了一个上传按钮。放置长标签时，其布局中断，上传按钮位于顶部。我希望我的标签对齐到“顶部”如何将按钮对齐到底部。

```
Ext.create('Ext.Container', {
                renderTo: Ext.getBody(),
                bodyPadding: 1,
                width: 400,
                height: 300,
                layout: {
                    type: 'hbox',
                    autoSize: true,
                    align: 'bottom'
                },

                items: [{
                    xtype: 'filefield',
                    labelSeparator: '',
                    fieldLabel: 'When placing long labels the layout is breaking and the upload button is placed at the top.',
                    labelAlign: 'top',
                    buttonText: 'Select',
                    flex: 1                        
                }, {
                    xtype: 'button',
                    text: 'Upload',
                    width: 50
                    //,margin: '22 0 0 2'
                }]

            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:56:39.837

从 HTML 标记我看到这个问题是由布局引起的。它将顶部位置设置`filefield`为 259px 和`button`278px。它假定标签只有一行。最简单的解决方法是将 css 中标签元素的高度设置为 33px（2 行）。

示例：http: [//jsfiddle.net/VphZH/1/](http://jsfiddle.net/VphZH/1/)

另一种可能性是扩展`filefield`并添加另一个按钮。那么它应该更加独立于布局。

示例：http: [//jsfiddle.net/VphZH/3/](http://jsfiddle.net/VphZH/3/)

# php - 大文件上的websvn geshi错误

> ID：13747608
> 
> 赞同：1
> 
> 时间：2012-12-06T16:03:46.657
> 
> 标签：php, websvn, geshi

我使用带有（默认开启）geshi colourise 选项的 websvn。如果我想打开（不是那么大）像 wordpress db 类文件（`wp-db.php`）这样的大文件，浏览器会抛出错误：`101 (net::ERR_CONNECTION_RESET)`错误。对于较小的文件，它可以正常工作。

如果我在websvn config中关闭geshi，大文件没有问题。打开比 wp-db.php 大 2-3 倍的文件没问题。但我没有上色。

我认为这是一些 php 配置问题。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-16T12:30:20.620

geshi 中有一些相当大的正则表达式可能会触发这种情况。我有一个旧笔记说“从 php-brief.php 中的 SCRIPT_DELIMITERS 中删除一些星号”。

YMMV，当然。

# c# - WPF：超链接事件处理程序中的异常

> ID：13747609
> 
> 赞同：0
> 
> 时间：2012-12-06T16:03:47.937
> 
> 标签：c#, wpf, exception, datagrid, hyperlink

我有一个带有超链接列的 WPF DataGrid：

```
<DataGridHyperlinkColumn Binding="{Binding DocName}">
  <DataGridHyperlinkColumn.ElementStyle>`
     <Style>
        <EventSetter Event="Hyperlink.Click" Handler="DocLink_Click" />
     </Style>
  </DataGridHyperlinkColumn.ElementStyle>
</DataGridHyperlinkColumn> 
```

该列的内容不是 URL；它是我需要从不同于列显示的 URL 下载的文档的名称。

这一切都很好，除了一件事：在某些情况下，我需要`MessageBox`在下载之前显示一个。这样做会导致 a `System.IO.IOException`，它抱怨找不到资源（单击的文档名称）。这个虚拟事件处理程序每​​次都会抛出异常：

```
private void DocLink_Click(object sender, RoutedEventArgs e)
{
    MessageBox.Show("Crash now!");
} 
```

我能做些什么来防止这种情况发生？

**编辑**

正如建议的那样，我在一个玩具应用程序中尝试了这个，它在那里工作。经过实验，事实证明只有当事件发生在 navigable `Page`（不是 a `Window`）中时才会发生这种情况。所以现在我们有了这个：

应用程序.xaml：

```
<Application x:Class="WpfApplication1.App"
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
   StartupUri="NavWin.xaml">
</Application> 
```

NavWin.xaml：

```
<NavigationWindow x:Class="WpfApplication1.Container"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  Title="NavTest" 
  Source="MainPage.xaml">
</NavigationWindow> 
```

MainPage.xaml：

```
<Page x:Class="WpfApplication1.MainPage"
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:local="clr-namespace:WpfApplication1"
  Title="MainPage" Height="350" Width="525">

  <Grid>
    <DataGrid x:Name="grid" ItemsSource="{Binding Items}" AutoGenerateColumns="False" >
      <DataGrid.Columns>
        <DataGridHyperlinkColumn Binding="{Binding Name}" Header="Name">
           <DataGridHyperlinkColumn.ElementStyle>
              <Style>
                 <EventSetter Event="Hyperlink.Click" Handler="ItemLink_Click" />
              </Style>
           </DataGridHyperlinkColumn.ElementStyle>
        </DataGridHyperlinkColumn>
      </DataGrid.Columns>
    </DataGrid>
  </Grid>
</Page> 
```

MainPage.xaml.cs：

```
public partial class MainPage : Page
{
  ... 
  private void ItemLink_Click(object sender, RoutedEventArgs e)
  {
     MessageBox.Show("Crash");
  }
} 
```

# r - 关于实现 AdaBoost 算法的问题

> ID：13747611
> 
> 赞同：5
> 
> 时间：2012-12-06T16:03:56.407
> 
> 标签：r, machine-learning, data-mining, adaboost

我正在尝试实现 AdaBoost 算法，并且有两个问题。

1）在每次迭代中，必须根据概率分布对训练数据进行重新采样。重新采样的数据集的大小是否应该与原始数据集的大小相同。2）如果我根据概率分布对训练数据集进行重新采样，很有可能我可以获得单个数据点的多个副本。我是否应该在每次迭代训练弱分类器时保留所有这些冗余副本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:10:06.010

1）你不需要对数据集进行实际的重新采样，只需要在分类器的训练中对数据点进行加权就足够了*，*即弱分类器的目标函数应该是加权的。

如果数据集的大小足够大，您可能还可以使用采样，并且您采样的数据集的大小*本身*并不重要。

2）如果您确实使用采样并获得冗余副本，则绝对应该保留它们，否则您的弱分类器的目标函数将*不*正确。

# python - 我怎样才能结合这两个正则表达式？

> ID：13747613
> 
> 赞同：4
> 
> 时间：2012-12-06T16:04:08.480
> 
> 标签：python, regex

我想将以下两个正则表达式合并为一个：

*   `^([A-Z]{1,2}) ?([0-9]{1,4})$`例如 AB 1234
*   `^([0-9]{1,4}) ?([A-Z]{1,2})$`例如 1234 AB

我认为这很简单：

`^([A-Z]{1,2}) ?([0-9]{1,4})|([0-9]{1,4}) ?([A-Z]{1,2})$`

但是，上面总是返回 4 个组，例如

1.  `''`
2.  `''`
3.  `'1234'`
4.  `'AB'`

如何以始终返回两组的方式组合这两个正则表达式？例如

1.  `'1234'`
2.  `'AB'`

或者

1.  `'AB'`
2.  `'1234'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:06:35.810

首先，您的组合不太正确，因为`^`only 适用于第一个替代方案，而`$`only 适用于第二个替代方案。所以你需要对交替进行分组：

```
^(?:([A-Z]{1,2}) ?([0-9]{1,4})|([0-9]{1,4}) ?([A-Z]{1,2}))$ 
```

现在你想要实现的目标不能用所有的正则表达式引擎来完成，但是一些（例如 PCRE）支持特殊的交替构造，其中捕获组对所有交替进行单独计数。这是语法：

```
^(?|([A-Z]{1,2}) ?([0-9]{1,4})|([0-9]{1,4}) ?([A-Z]{1,2}))$ 
```

**编辑：**

不幸的是，Python 尤其不支持这一点。也不是重用命名捕获组的替代方法。因此，您可能必须从`match.groups()`两个正则表达式中过滤掉空字符串或坚持使用。

# c# - 如果 XElement 上不存在 XAttribute 默认值

> ID：13747621
> 
> 赞同：17
> 
> 时间：2012-12-06T16:04:34.503
> 
> 标签：c#, .net, linq, xelement, xattribute

如果 XElement 上的 XAttribute 不存在，是否有更简单/更好的方法来返回默认值？：

我试图用更短的方式写这个（因为它是一个两行）：

```
var a = root.Attribute("testAttribute");
var v = (a == null ? "" : a.Value); 
```

我的方法：通过扩展方法：

```
public static XAttribute Attribute(this XElement obj, string name, string defaultValue)
{
    if (obj.Attribute(name) == null)
        return new XAttribute(name, defaultValue);
    return obj.Attribute(name);
}

var v = root.Attribute("testAttribute", "").Value; 
```

这会产生任何副作用，例如巨大的负面速度影响吗？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-06T16:05:31.753

有一种更简单的方法可以做到这一点：

```
var v = (string) root.Attribute("testAttribute") ?? ""; 
```

如果输入为空，则从[to](http://msdn.microsoft.com/en-us/library/bb339184.aspx)的[显式转换`XAttribute``string`](http://msdn.microsoft.com/en-us/library/bb339184.aspx)返回。然后，null-coalescing 运算符有效地提供空字符串的默认值。`null``XAttribute`

当然，你仍然可以编写你的扩展方法，但我会按照上面的来做。我还将`name`参数更改为 type`XName`而不是`string`，以获得更大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:52:38.690

我的项目中需要类似的东西。我创建了一个自定义属性

```
[AttributeUsage(AttributeTargets.Property)]
public class DefaultValue : Attribute
{
 public string ElementName {get; set;}
 public string AttributeName {get; set;}
 public object DefaultValue {get; set;}

public object GetValue(XElement element)
{
  var v = root.Attribute(AttributeName);
 if(v!= null)
  return v.value;
 else
  return DefaultValue
}
} 
```

我在所有具有类似用法的属性上都使用了这个属性

```
[DefaultValue(ElementName="elementName",AttributeName="attri",DefaultValue="Name")]
public string Prop{get; set;} 
```

我通过调用此属性的方法来获取值

```
var attribute = propertyInfo.GetCustomAttribute(typeof(DefaultValue),false);
var value = attribute.GetValue(element); 
```

希望这可以帮助

# git - 使用 git（特别是 github）归档或克隆特定文件/目录

> ID：13747625
> 
> 赞同：1
> 
> 时间：2012-12-06T16:05:05.170
> 
> 标签：git, curl, twitter-bootstrap, zip, github-api

我正在尝试制作一个类似于 Twitter 用于其 Bootstrap 框架（[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)）的定制器。我有一个 github 存储库，我需要能够指定某些文件和目录以 zip 格式下载。

我已经研究了可能的解决方案，并对如何实现这一点有一些想法。但我想要一些反馈。

`git archive`将不起作用，因为 repo 在 github 上，显然他们不允许这样做。此外，我还没有找到一种方法来指定要在命令本身中包含或排除的文件。

我的第一个想法是创建一个脚本，将 repo 克隆到一个临时目录中，然后删除 zip 中我不想要的文件（包括 git 文件）。这样做的问题是我总是会下载所有东西——即使是我不想要的东西。

我的另一个想法是有一个要下载的文件列表和一个循环遍历该列表以从 raw.github.com 获取文件的脚本。

做这个的最好方式是什么？有谁知道 Twitter 是如何为 Bootstrap 做到这一点的？

编辑：为了清楚起见，我不是想为 Bootstrap 创建我自己的自定义构建器；我在 github 上有自己的、不相关的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:06:09.167

我联系了 Bootstrap 的开发人员之一 Jacob Thorton，他向我指出了 GitHub 存储库的方向，因为他们的 Heroku 托管的服务器端进程创建了 ZIP。（请参阅 Ivan Zuzak 在问题中的评论。）

对于任何偶然发现这个问题的人，您可以在这里找到它：[https ://github.com/twitter/bootstrap-server](https://github.com/twitter/bootstrap-server)

他们正在做我（和 Ivan）怀疑的事情：从[http://raw.github.com](http://raw.github.com)获取原始文件并从中创建 ZIP。

# android - Android MapView：在覆盖上拖动时禁用平移

> ID：13747634
> 
> 赞同：0
> 
> 时间：2012-12-06T16:05:27.030
> 
> 标签：android, android-layout, android-mapview

在我的 Android 应用程序中，我在 MapView 上部分有一个 LinearLayout，并且在布局上拖动会导致地图平移。

如何避免这种情况？当然我不能禁用平移，因为拖动地图本身应该移动它。请参阅此屏幕截图以进行说明：

![截屏](../Images/08f5b5b2b1f35d0de741696070e27dac.png)

不知道是否相关（不这么认为）：MapView 和 LinearLayout 都在 RelativeLayout 中。

谢谢，毛里齐奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:11:10.517

你的`LinearLayout`可点击吗？在XML`android:clickable="true"`或`setClickable(true);`代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:47:13.163

你能解释一下为什么线性布局部分在地图视图上吗？您可以以线性布局不与地图视图重叠的方式排列它。

设置线性布局的focusable和clickable属性为true

# html - 链接到选项卡时如何防止屏幕重新定位

> ID：13747636
> 
> 赞同：-2
> 
> 时间：2012-12-06T16:05:28.357
> 
> 标签：html, internal-link

我有一个问题，我已链接到同一页面上的选项卡，但我不希望我的屏幕在单击时移动到顶部。有人可以帮忙吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:10:28.430

我敢打赌，这是因为您单击的链接具有带值`#`或类似值的 href 属性。`#`会将您发送到页面顶部，`#whatever`将您发送到带有 ID 的元素的顶部`whatever`（可能是包含选项卡内容的元素）。为了阻止这种情况发生，您需要`return false;`在 JavaScript 函数的末尾添加以防止发生默认行为。但是没有看到任何代码，我无能为力。

# vb.net - 你调用的对象是空的。vb，net中的OOP类

> ID：13747640
> 
> 赞同：-1
> 
> 时间：2012-12-06T16:05:40.667
> 
> 标签：vb.net

我在尝试编译这段代码时遇到了这个问题

```
Public Class Form2
Dim db_classobj As Object
Dim textboxobj() As TextBox = {TextBox1, TextBox2}
Dim datagridobj() As DataGridView = {DataGridView1}

Dim temp As New db_class(textboxobj, datagridobj, "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=datamhs.accdb", "mhs", "ksmhs")

Private Sub Form2_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
   db_classobj = temp
End Sub

End Class 
```

编译时，我收到此错误消息：
**创建表单时出错。有关详细信息，请参阅 Exception.InnerException。错误是：对象引用未设置为对象的实例。**

我的代码有什么问题？有人可以解决吗？对此，我真的非常感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:23:59.510

您传递给构造函数的参数是`db_class`正确的类型，但不是正确的值。它们导致构造函数`db_class`抛出此异常。

在不知道构造函数的哪一行`db_class`引发异常的情况下，我们无法帮助您。

是这条线吗？

```
_textbox(i).DataBindings.Add("text", ds.Tables(_mailboxname), temp(i)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:01:09.327

将您的表单加载函数更改为此，并从类的顶部删除`textboxobj`、`datagridobj`和声明。`temp`

```
Private Sub Form2_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

     Dim textboxobj() As TextBox = {TextBox1, TextBox2}
     Dim datagridobj() As DataGridView = {DataGridView1}
     Dim temp As New db_class(textboxobj, datagridobj, "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=datamhs.accdb", "mhs", "ksmhs")
     db_classobj = temp
End Sub 
```

基本上发生的事情是因为你的语句在类中是正确的，它在表单构造函数之前执行，并且构造函数是你的所有控件（如 TextBox1）被分配它们的值的地方，所以基本上你传递了一个值`Dim temp as New`数组`Nothing`给你的`db_class`构造函数。当您点击此行时，`_textbox(i).DataBindings.Add("text", ds.Tables(_mailboxname), temp(i))`该`_textbox(i)`部分将返回`Nothing`，因此对该属性的尝试引用`DataBindings`失败，因为它不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:09:15.100

您必须先创建数组。

```
Dim textboxobj() As TextBox = New TextBox(){TextBox1, TextBox2}
Dim datagridobj() As DataGridView = New DataGridView(){DataGridView1} 
```

# c# - 枚举断开连接的网络驱动器 - NTFS 驱动器格式

> ID：13747650
> 
> 赞同：0
> 
> 时间：2012-12-06T16:06:11.177
> 
> 标签：c#, mapped-drive, driveinfo

我偶然发现了这篇解决在 C# 中枚举断开连接的驱动器问题的优秀文章： [映射的网络驱动器不能在 C# 中列出](https://stackoverflow.com/questions/1898195/mapped-network-drives-cannot-be-listed-in-c-sharp)

问题是这段代码似乎不包括 NTFS 格式的驱动器（仅 FAT）

由于我不是 C++/WinAPI 技术人员，我发现很难修复代码（如果可能的话）。有没有人已经调查并解决了它，或者至少给我一个提示？

谢谢！布西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T00:06:00.803

好的，我有一个答案。它与 NTFS 和 FAT 无关。

这是我用来枚举驱动器的代码：

WNetOpenEnum(RESOURCE_SCOPE.RESOURCE_REMEMBERED, RESOURCE_TYPE.RESOURCETYPE_DISK, 0, resource, out ptrHandle);

请注意第一个参数 RESOURCE_SCOPE.RESOURCE_REMEMBERED。这意味着该方法将仅枚举设置为 PERSISTED 的那些映射驱动器（这意味着，在登录时重新连接）。

例如，如果我将参数更改为 RESOURCE_SCOPE.RESOURCE_CONNECTED，它将枚举非持久驱动器（如果它们已连接）。

如果你想要所有的组合，你可以这样做： WNetOpenEnum(RESOURCE_SCOPE.RESOURCE_REMEMBERED | RESOURCE_SCOPE.RESOURCE_RECENT | RESOURCE_SCOPE.RESOURCE_CONNECTED, RESOURCE_TYPE.RESOURCETYPE_DISK, 0, resource, out ptrHandle);

谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:36:16.940

如果您想列出您的本地 NTFS 驱动器，您提到的文章不会删除它：它使用的 Win32 函数旨在枚举网络资源。

因此，如果要列出所有本地驱动器和网络驱动器，则必须同时使用链接中的代码，并从 System.IO 命名空间调用 DriveInfo.GetDrives()（或 Environment.GetDrives()）。

但是，由于 GetDrives() 也会返回连接的网络驱动器，因此您需要合并两个列表的结果以避免重复：

```
 static void Main(string[] args)
    {
        List<string> drives = new List<string>();
        // Assuming you put the API calls in Class1
        foreach (var item in Class1.WNetResource())
        {
            // WNetResource returns the drive letters without a trailing slash
            drives.Add(String.Concat(item.Key, @"\"));
        }

        foreach (var item in Environment.GetLogicalDrives())
        {
            if (!drives.Contains(item))
                drives.Add(item);
        }

        drives.Sort();

        foreach (var drive in drives)
        {
            Console.WriteLine(drive);
        }
    } 
```

希望有帮助。

# c# - 编组普通结构：C# 是否将它们复制到堆上？

> ID：13747651
> 
> 赞同：7
> 
> 时间：2012-12-06T16:06:10.600
> 
> 标签：c#, delphi, pinvoke

我有一个本机 DLL，用 Delphi 编写，积极使用回调机制：回调函数被“注册”，然后从 DLL 内部调用：

```
function RegisterCallback(CallbackProc: TCallbackProc): Integer; stdcall; 
```

大多数回调函数通过引用传递普通结构，如下所示：

```
TCallbackProc = procedure(Struct: PStructType); stdcall; 
```

其中 PStructType 被声明为

```
TStructType = packed record 
  Parameter1: array[0..9] of AnsiChar;
  Parameter2: array[0..19] of AnsiChar;
  Parameter3: array[0..29] of AnsiChar;
end;
PStructType = ^TStructType; 
```

此 DLL 由用 C# 编写的 .NET 应用程序使用。C# 代码的编写非常粗心，整个应用程序的行为不可靠，显示出难以识别的异常，在不同的地方引发了从运行到运行。

我没有理由怀疑 DLL，因为它已经证明自己是一个非常强大的软件，用于许多其他应用程序。我目前关心的是这些结构在 C# 中的使用方式。

假设，上面的记录在 C# 中重新声明如下：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi, Pack = 1)]
public struct TStructType
{
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 10)]
    public string Parameter1;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 20)]
    public string Parameter2;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 30)]
    public string Parameter3;
} 
```

并且回调被声明为

```
[UnmanagedFunctionPointer(CallingConvention.StdCall)]
public delegate void CallbackProc(ref TStructType Struct); 
```

现在有趣的事情开始了。假设，在 DLL 中，注册的回调以这种方式调用：

```
var
  Struct: TStructType;
begin
  // Struct is initialized and filled with values
  CallbackProc(@Struct);
end; 
```

但是我在 C# 应用程序中看到的，以及我根本不喜欢的是，编组结构被保存为指针以供将来使用：

```
private void CallbackProc(ref TStructType Struct)
{
    SomeObjectList.Add(Struct); // !!! WTF?
} 
```

据我了解，Struct 变量是在 DLL 深处的 Delphi 堆栈上创建的，并将指向它的指针存储在客户端应用程序的堆上 - 纯粹是一次冒险。

我不是 C# 的忠实粉丝/专家，所以请原谅我的幼稚问题，编组器是否在幕后做了一些事情，比如将结构复制到堆上或类似的事情，或者应用程序有时工作的事实是纯粹的问题机会？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T16:12:30.543

AC# struct 是一种值类型。意思就是

```
SomeObjectList.Add(Struct) 
```

will make a copy of the struct. So, nothing to get concerned about.

In fact, in `CallbackProc` you are not operating on the object that was allocated in your Delphi code. That's because the p/invoke marshaller had to take the raw pointer that it received and convert that into a `TStructType` object. And a `TStructType` contains C# strings which are most definitely not blittable with those Delphi character arrays. So the marshaller has already added a layer in between your C# code and the Delphi code.

Since the function receives the structure by ref what happens is as follows:

1.  Before calling `CallbackProc` the marshaller de-serializes the raw unmanaged pointer to a `TStructType` object.
2.  `CallbackProc` is then passed that `TStructType` object by reference.
3.  When `CallbackProc` returns, the p/invoke marshaller serializes the `TStructType` object back to the original raw unmanaged pointer.

One of the consequences of this is that changes you make to the `TStructType` object are not visible to the Delphi code until the callback procedure returns. Contrast that to what happens when you call a Delphi procedure passing a variable as a `var` parameter. In that case any changes in the procedure are visible immediately outside that procedure.

# delphi - log4d vs log4delphi

> ID：13747654
> 
> 赞同：7
> 
> 时间：2012-12-06T16:06:22.393
> 
> 标签：delphi, logging, delphi-2009

有谁知道 log4d 和 log4delphi 有什么区别？你能推荐一个你用过并且满意的吗？或声称它们是相同的？还是您使用其他可以推荐的“记录器”？

在[log4delphi](http://log4delphi.sourceforge.net/faq.html#Why+create+new+logging+project+for+Delphi?%2bAnalogous%2bproject%2bLog4D%2balready%2bexists?)的网站上它指出：

> Log4D 上次更新他们的 CVS 是 16 个月前，从那以后该项目没有最近的活动。他们也没有文件发布，这意味着新用户必须从 CVS 存储库中获取源代码，这并不好。
> 
> Log4D 也是 Log4J 的直接移植，而 Log4Delphi 松散地基于 Log4J，这意味着 Log4Delphi 不必遵循 Log4J 正在做什么，我们可以随时偏离 log4j，这是一件好事，考虑到 Java 之间的众多差异和德尔福。

更新：使用 te delphi4d 后，可以通过这种方式导出为 html：

```
uses log4d;
var
  appender:TLogFileAppender;
  logger:TLoglogger;
begin
  appender := TLogRollingFileAppender.Create('name','log.html');
  appender.Layout := TLogHTMLLayout.Create;
  TLogBasicConfigurator.Configure(appender);    
  TLogLogger.GetRootLogger.Level := All;
  Logger := TLogLogger.GetLogger('loggerName');
    Logger.Fatal('fatal output');
    Logger.Error('error output');
    Logger.Warn('warn output');
    Logger.Info('info output');
    Logger.Debug('starting debug');
end; 
```

update2:log4delphi 是为 delphi 6 或 delphi 7 发布的。这意味着额外的工作需要升级到更高版本的 delphi。

更新 3：log4d 与 log4j 相同，并且拾取和使用非常快。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T17:13:04.910

要按照您的要求添加另一个“记录器”，我推荐我们的[开源日志记录类](http://blog.synopse.info/post/2011/04/14/Enhanced-logging-in-SynCommons)。

它具有“KISS”设计，与 Log4J 和所有 Log4* 改编版本非常不同。想法是开发一些快速、稳定、强大且专用于 Delphi 的商业应用程序。例如，它不创建 XML 文件，而是创建纯文本文件。

它具有日志记录功能（具有一组级别，而不是级别层次结构），可以序列化内容，使用堆栈跟踪（以及带有行号的单元/方法名称！）的异常拦截，方法执行时间，日志压缩和自动存档。

[日志查看器](http://blog.synopse.info/post/2011/08/20/Enhanced-Log-viewer)可用且速度非常快，并允许从任何日志文件进行方法分析。

我们将它用于大型程序的生产，从 Delphi 5 到 XE3，有很多好处。只需记录异常，执行时间就会改变一切。

它是我们*mORMot*框架的一部分，但可以在没有它的情况下使用。只是一些要链接的单元，仅此而已。

它是免费的，并且得到维护，而您的 Log4D* 项目听起来还没有激活。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T16:34:19.320

正如您在参考的常见问题解答中所读到的，它们并不相同。

您可以通过下载两者并比较文件轻松确认这一点。

虽然 Log4D 上次下载 (log4d-src 0.9 2007-06-12) 38.2 Kb 仅包含 4 个 pas 文件，但 Log4Delphi 上次下载 (log4delphi 0.8 Melloware 2010-11-16) 1.7 Mb 仅在 src/delphi 文件夹中包含 27 个 pas 文件，加上其他带有单元测试和包的文件夹。

还比较了两个项目包含的 dtd，显示 xml 格式不同且不兼容。

这两个项目看起来都过时了。Log4Delphi 包括 D6 和 D7 的软件包。

如果一个基于另一个，我不知道。Log4Delphi 看起来更复杂，即使是 0.1 版本也有非常不同的文件集。

# r - 为什么我不能用 FUN = shapiro.test 聚合 data.frame

> ID：13747661
> 
> 赞同：0
> 
> 时间：2012-12-06T16:06:38.137
> 
> 标签：r

这是有问题的data.frame：

```
sample <- dput(df)
structure(c(6, 5, 5, 4, 4, 7, 5, 4, 6, 6, 5, 6, 8, 6, 3, 5, 8, 
4, 7, 6, 4, 4, 2, 5, 4, 7, 2, 5, 5, 4, 6, 4, 5, 8, 6, 4, 7, 7, 
4, 4, 5, 8, 4, 6, 9, 3, 7, 6, 8, 6, 6, 3, 3, 6, 7, 7, 6, 6, 7, 
7, 6, 7, 8, 3, 5, 5, 4, 6, 4, 7, 3, 4, 6, 3, 5, 5, 7, 6, 7, 4, 
3, 5, 4, 5, 3, 6, 8, 6, 4, 9, 8, 5, 4, 7, 4, 6, 7, 5, 6, 9, 7, 
6, 8, 5, 0, 5, 6, 5, 7, 5, 5, 7, 2, 5, 7, 4, 3, 7, 7, 6, 7, 8, 
5, 6, 9, 4, 6, 7, 5, 4, 5, 4, 6, 6, 9, 8, 5, 7, 7, 7, 4, 7, 6, 
7, 6, 9, 5, 4, 8, 4, 6, 4, 6, 0, 4, 7, 6, 4, 6, 3, 0, 3, 4, 5, 
8, 5, 6, 6, 5, 5, 7, 7, 5, 7, 8, 3, 4, 4, 5, 7, 5, 8, 6, 9, 7, 
5, 4, 3, 4, 4, 6, 2, 4, 6, 7, 6, 5, 5, 5, 5, 6, 6, 8, 5, 5, 6, 
6, 4, 5, 8, 4, 7, 5, 6, 3, 6, 5, 3, 6, 3, 6, 6, 7, 4, 2, 6, 5, 
4, 5, 6, 6, 6, 7, 6, 6, 6, 5, 6, 5, 6, 6, 7, 7, 6, 6, 5, 5, 5, 
7, 6, 9, 8, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 
3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 
3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 
3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 
3, 3, 3, 3), .Dim = c(252L, 2L), .Dimnames = list(NULL, c("pMRMW", 
"group")))

aggregate(pMRMW~group,data=sample,shapiro.test) 
```

返回

```
corrupt data frame: columns will be truncated or padded with NAs 
```

其他功能按预期工作。

我错过了一些完全明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:15:34.360

出现问题是因为 shapiro.test() 返回 4 个值的列表。

如果你需要 p 值，那么你可以做

```
 aggregate(pMRMW~group,data=sample,function (x) shapiro.test(x)$p.value)
   group        pMRMW
1     1 0.0064932854
2     2 0.0006112324
3     3 0.0044895909 
```

# loops - 使用批处理脚本连续移动文件

> ID：13747666
> 
> 赞同：2
> 
> 时间：2012-12-06T16:06:47.687
> 
> 标签：loops, batch-file, jpeg

我正在尝试创建一个 .bat 文件来不断地将新图像移动到一个文件夹以将它们存档。到目前为止，我已经弄清楚如何让图像在文件夹之间移动而不提示被覆盖，但是让动作循环对我来说很棘手。

# 在文件夹之间移动文件的脚本

```
@echo off
echo File Copy Started 
xcopy /s /Y "Source" "Destination" 
echo File Copy Completed 
pause 
```

有没有人有任何想法让这个脚本连续循环？我正在考虑使用诸如

```
IF EXIST .jpeg (an image)
then run the script to move the files 

ELSE 
Pause 
```

?? 我只是不知道如何开始写这个。任何反馈都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:18:26.863

也许是这样的？

```
@echo off
:LOOP
echo File Copy Started 
xcopy /s /Y "Source" "Destination" 
echo File Copy Completed
goto :LOOP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-30T12:22:23.247

使用 AT 命令或 Windows 调度程序连续运行任务

# php - 在 PHP 中通过引用传递

> ID：13747669
> 
> 赞同：4
> 
> 时间：2012-12-06T16:07:00.743
> 
> 标签：php

我对通过引用传递在 PHP 中的工作方式有一点普遍的不满，我自己来自 Java 背景。这可能已经在 SO 上讨论过，所以如果这看起来多余，我很抱歉。

我将给出一个代码示例以使事情清楚。假设我们有一个 Person 类：

```
<?php

class Person 
{
    private $name;

    public function __construct($name)
    {
        $this->name = $name;
    }

    public function setName($name)
    {
        $this->name = $name;
    }

    public function getName()
    {
        return $this->name;
    }
}

?> 
```

以及以下用法：

```
<?php

require_once __DIR__ . '/Person.php';

function changeName(Person $person)
{
    $person->setName("Michael");
}

function changePerson(Person $person)
{
    $person = new Person("Jerry");
}

$person = new Person("John");

changeName($person);
echo $person->getName() . PHP_EOL;

changePerson($person);
echo $person->getName() . PHP_EOL;

?> 
```

现在，我和其他许多从 Java 或 C# 编程到 PHP 的人都希望上面的代码能够输出：

```
Michael
Jerry 
```

但是，它没有，它输出：

```
Michael
Michael 
```

我知道它可以通过使用 & 来修复。通过调查，我了解到这是因为引用是按值（引用的副本）传递给函数的。但这对我来说构成了一种意外/不一致的行为，所以问题是：他们选择这样做有什么特别的原因或好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:21:09.390

对象本身实际上是通过引用传递的，否则你的第一个`echo`不会输出`Michael`。

在您的第二个示例中发生的情况是您破坏了对原始对象的（本地）引用，并让您的变量名引用了一个在函数中具有本地范围的新对象。

这对我来说很有意义，因为您可以通过简单地为函数中的变量分配一个新值来用完全不同的东西破坏/替换您的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:36:59.403

如果以这种方式使用，您的代码将按预期工作：

```
function changePerson(Person &$person) // <- & to state the reference
{
    $person = new Person("Jerry");
}

$person = new Person("John");

changeName($person);
echo $person->getName() . PHP_EOL;

changePerson($person);
echo $person->getName() . PHP_EOL; 
```

查看输出：[http ://codepad.org/eSt4Xcpr](http://codepad.org/eSt4Xcpr)

> 经常提到的 PHP 5 OOP 的关键点之一是“对象默认通过引用传递”。这并不完全正确。
> 
> PHP 引用是一个别名，它允许两个不同的变量写入相同的值。从 PHP 5 开始，对象变量不再包含对象本身作为值。它只包含一个对象标识符，允许对象访问者找到实际对象。当一个对象通过参数发送、返回或分配给另一个变量时，不同的变量不是别名：它们持有标识符的副本，它指向同一个对象。

引自[http://php.net/manual/en/language.oop5.references.php](http://php.net/manual/en/language.oop5.references.php)。

# machine-learning - 大数据实时机器学习应用的生产架构？

> ID：13747670
> 
> 赞同：11
> 
> 时间：2012-12-06T16:07:03.257
> 
> 标签：machine-learning, real-time, weka, mahout, pentaho

我开始学习一些关于大数据的东西，重点是预测分析，为此我有一个我想实施的案例研究：

我有一个服务器健康信息数据集，每 5 秒轮询一次。我想显示检索到的数据，但更重要的是：我想运行以前构建的机器学习模型并显示结果（警告服务器将崩溃）。

机器学习模型将由机器学习专家构建，因此完全超出范围。我的工作是将机器学习模型集成到一个运行模型的平台中，并在一个漂亮的仪表板中显示结果。

我的问题是这个系统的“大图”架构：我看到所有部分都已经存在（cloudera+mahout），但是我缺少一个简单的集成解决方案来满足我的所有需求，我不相信最先进的技术是做一些自定义软件...

那么，任何人都可以对这样的生产系统有所了解（通过预测分析显示数据）吗？参考架构？教程/文档？

* * *

笔记：

1.  我研究了一些相关技术：cloudera/hadoop、pentaho、mahout 和 weka。例如，我知道 Pentaho 能够存储大数据并对该数据运行临时 Weka 分析。使用 cloudera 和 Impala，数据专家还可以运行临时查询并分析数据，但这不是我的目标。我希望我的系统能够运行 ML 模型，并在检索到的数据旁边的漂亮仪表板中显示结果。而且我正在寻找一个已经允许这种用法而不是自定义构建的平台。

2.  我专注于 Pentaho，因为它似乎很好地集成了机器学习，但我阅读的每个教程更多地是关于“临时”ML 分析，而不是实时。欢迎任何关于该主题的教程。

3.  我不介意开源或商业解决方案（试用版）

4.  根据具体情况，这可能不是大数据：也欢迎更多“传统”解决方案。

5.  这里的实时也是一个广义的术语：如果 ML 模型具有良好的性能，每 5 秒运行一次就足够了。

6.  ML 模型是静态的（不是实时更新或改变其行为）

7.  我不是在为我的示例寻找定制的应用程序，因为我的重点是大局：具有预测分析通用平台的大数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T17:01:14.010

*（我是 Mahout 的作者，并且正在将 Mahout 中的一些 ML 产品化商业化，重点关注实时和规模：[Myrrix](http://myrrix.com)。我不知道这正是您正在寻找的东西，但是似乎解决了你在这里提出的一些问题。它可能作为另一个参考点很有用。）*

您强调了实时和大规模之间的紧张关系。这些不是一回事。Hadoop 作为一种计算环境，可以很好地扩展，但不能实时执行任何操作。Mahout 的一部分是构建的，Hadoop 也是这种形式的 ML。Weka 和 Mahout 的其他部分或多或少都倾向于实时，但随后面临扩展挑战。

一个兼具这两方面能力的机器学习系统必然有两层：可扩展的离线模型构建，以及实时在线服务和更新。恕我直言，这就是推荐者的外观，例如： http: [//myrrix.com/design/](http://myrrix.com/design/)

但是，您对模型构建没有任何问题，对吧？有人要建立一个静态模型吗？如果是这样，那就更容易了。实时更新模型很有用，但也很复杂。如果您不需要，您只是从静态模型中生成预测，这通常很快。

如果您对 ML 感兴趣，或者基于您自己的 ML 模型运行某些东西，我认为 Pentaho 并不相关。

每 5 秒 1 次查询并不具有挑战性——这是每台机器每 5 秒 1 次查询还是什么？

我的建议是简单地创建一个可以回答针对模型的查询的服务器。只需重用任何旧的 HTTP 服务器容器，如 Tomcat。它可以加载从 HDFS 或 NoSQL DB 等后备存储发布的最新模型。您可以毫不费力地创建 N 个服务器实例，因为它们似乎不需要通信。

唯一的自定义代码是包装 ML 模型所需的任何内容。如果您确实不需要构建自己的模型或动态更新它们，这是一个非常简单的问题。如果你这样做 - 更难的问题，但仍然可以构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T15:22:57.607

您可以使用 Apache Samza 或 S4 或 Storm 的组合来配置自己的实时数据流分析，并注入您选择的机器学习算法的并行化和分布式版本。但大规模并行机器学习算法是一项具有挑战性的工作，也是一个积极研究的领域。最近取得了一些进展：您可能想查看 Yahoo! 实验室[SAMOA](http://yahooeng.tumblr.com/post/65453012905/introducing-samoa-an-open-source-platform-for-mining "萨摩亚")和[Vowpal Wabbit](http://intentmedia.github.io/2013/10/30/running-vw-on-emr/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-06T16:19:28.987

像[NewRelic 之](http://newrelic.com/)类的东西？

### 统计数据

*   New Relic 是应用程序性能管理 (APM) 即服务
*   全球监控 175,000 多个应用程序进程
*   10,000 多个客户
*   每天收集超过 200 亿个应用程序指标
*   每周收集超过 17 亿个网页指标
*   每个“时间片”度量约为 250 字节
*   每秒插入 100k 个时间片记录
*   每天有 70 亿行新数据

### 建筑学

*   平台

    *   网页界面

        *   Ruby on Rails
        *   nginx
        *   Linux
        *   2 个 12 核 Intel Nehalem CPU，带 48Gb RAM
    *   数据收集器和 Web 信标服务

        *   爪哇
        *   码头上的 Servlet
        *   应用指标收集器：每分钟 180k+ 个请求，3ms 响应
        *   Web 指标信标服务：每分钟 200k+ 个请求，响应时间为 0.15ms
        *   使用 Percona 构建的分片 MySQL
        *   Linux
        *   9 @ 24 核 Intel Nehalem，带 48GB RAM，SAS 连接 RAID 5
        *   裸机（无虚拟化）

### 奖金

更多信息：[http ://highscalability.com/blog/2011/7/18/new-relic-architecture-collecting-20-billion-metrics-a-day.html](http://highscalability.com/blog/2011/7/18/new-relic-architecture-collecting-20-billion-metrics-a-day.html)

# sqlite - SQLite 拒绝使用更好的索引？

> ID：13747675
> 
> 赞同：0
> 
> 时间：2012-12-06T16:07:23.037
> 
> 标签：sqlite, query-optimization

架构：

```
CREATE TABLE [Groups] ([Group] VARCHAR(50) NULL, [ArtNum] INTEGER NULL, [ID] VARCHAR(50)  NULL, [Time] INTEGER);
CREATE INDEX [GroupTime]   ON [Groups] ([Group], [Time] DESC);
CREATE INDEX [GroupArtNum] ON [Groups] ([Group], [ArtNum]); 
```

我想优化以下查询：

```
 SELECT `ID` FROM `Groups` WHERE `Group`=? ORDER BY `Time` DESC LIMIT 1 
```

问题是 SQLite 坚持使用`GroupArtNum`索引而不是`GroupTime`索引。`EXPLAIN QUERY PLAN`打印以下内容：

```
SEARCH TABLE Groups USING INDEX GroupArtNum (Group=?) (~10 rows)
USE TEMP B-TREE FOR ORDER BY 
```

有趣的是，如果我尝试排序`ArtNum`而不是`Time`，它运行得非常快。

我在列中只有（64 位）整数，`Time`与`ArtNum`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:52:21.377

1.  运行`ANALYZE`（在任何特定情况下可能会或可能不会有帮助）；或者
2.  使用该`INDEXED`子句强制使用特定索引（尽管[文档](http://www.sqlite.org/lang_indexedby.html)警告不要这样做）：

    ```
    SELECT ID FROM Groups INDEXED BY GroupTime WHERE ... 
    ```

3.  或更新到 SQLite 3.7.15（当它发布时），它具有查询计划器优化，使其认识到使用`GroupTime`更有效。

# magento - Magento - 将点击评论页面的客户重定向到产品页面

> ID：13747677
> 
> 赞同：0
> 
> 时间：2012-12-06T16:07:30.583
> 
> 标签：magento, magento-1.6

有没有办法将点击产品评论页面 (http://mydomain.com/review/product/list/id/139/category/79/) 的客户重定向到实际产品页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:19:28.047

假设启用了 seo 友好的 url，那么您可以创建一个自定义模块来扩展评论/产品并重写 listAction 方法

在 /app/etc/modules/MageIgniter_ReviewRedirect.xml

```
<?xml version="1.0"?>
<config>
  <modules>
    <MageIgniter_ReviewRedirect>
      <active>true</active>
      <codePool>local</codePool>
      <version>0.1.0</version>
    </MageIgniter_ReviewRedirect>
  </modules>
</config> 
```

在 /app/code/local/MageIgniter/ReviewRedirect/controller/ReviewController.php

```
include_once 'Mage/Review/controllers/ProductController.php';
class MageIgniter_ReviewRedirect_ReviewController extends Mage_Review_ProductController
{
    public function listAction(){
       if ($product = $this->_initProduct()) {
            $this->_redirect($product->getUrl());
       }

    } 
```

在 /app/code/local/MageIgniter/ReviewRedirect/etc/config.xml

```
<?xml version="1.0"?>
<config>
  <modules>
    <MageIgniter_ReviewRedirect>
      <version>0.1.0</version>
    </MageIgniter_ReviewRedirect>
  </modules>
  <frontend>
    <routers>
      <reviewredirect>
        <use>standard</use>
          <args>
            <modules>
                <MageIgniter_ReviewRedirect before="Mage_Review">MageIgniter_ReviewRedirect<MageIgniter_ReviewRedirect>
            </modules>
            <frontName>review</frontName>
          </args>
      </reviewredirect>
    </routers>
  </frontend>
  <global>
    <helpers>
      <reviewredirect>
        <class>MageIgniter_ReviewRedirect_Helper</class>
      </reviewredirect>
    </helpers>
  </global>
</config> 
```

在 /app/code/local/MageIgniter/ReviewRedirect/Helper/Data.php

```
<?php
class MageIgniter_ReviewRedirect_Helper_Data extends Mage_Core_Helper_Abstract
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:19:48.420

您可以在 ProductController 中的方法 listAction 上放置一个重定向。(app/code/core/mage/Review/controllers/ProductController.php)

编辑：最佳实践是创建自己的模块来覆盖这个控制器，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:13:15.507

旧的 Magento 有一个原本已经失效的功能，它只需要一个模块配置：

```
<config>
    <global>
        <rewrite>
            <yourmodulename>
                <from><![CDATA[#^/review/product/list#]]></from>
                <to><![CDATA[/catalog/product/view]]></to>
            </yourmodulename>
        </rewrite>
    </global>
</config> 
```

下面它只是[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)在请求的路径上使用，因此您应该可以轻松理解 PCRE 模式。`app/etc/local/xml`如果您不想为此创建一个完整的模块，您甚至可以将上述内容合并到其中。

# color-picker - 创建几个颜色选择器字段

> ID：13747678
> 
> 赞同：1
> 
> 时间：2012-12-06T16:07:33.010
> 
> 标签：color-picker

我想添加一个颜色选择器字段，总是在用户单击链接时。问题是，只有第一个颜色选择器在工作。我不知道为什么它不起作用，因为没有错误

这是我的代码：

```
<script>

    $(function() {
            var scntDiv = $('#p_scents');
            var i = $('#p_scents p').size() +1;

            $('#addScnt').live('click', function() {

                    if( i <= 10 ){

                    $('<p><label for="p_scnts"><input type="text" id="p_scnt" size="20" name="p_scnt_' + i +'" value="" placeholder="add new category" /></label> <a href="#" id="remScnt">[ - ]</a> | bar color: </p><input name="color'+ i +'" " class="cPicker" id="colorpickerField'+ i +'" type="text" value="00ff00" size="6" maxlength="6" />').appendTo(scntDiv);
                    i++;
                    return false;
                    }
            });

            $('#remScnt').live('click', function() {
                    if( i > 2 ){
                        $(this).parents('p').remove();

                        i--;
                        $("#colorpickerField"+i).remove();
                        console.log("#colorpickerField"+i);

                    }
                    return false;
            });
    });

    $(function(){
        $('#colorpickerField1, #colorpickerField2, #colorpickerField3').ColorPicker({
        onSubmit: function(hsb, hex, rgb, el) {
            $(el).val(hex);
            $(el).ColorPickerHide();
            $(el).css({'background-color' : '#'+hex});
        },
        onBeforeShow: function () {

    $(this).ColorPickerSetColor(this.value);
    }
    })
    .bind('keyup', function(){
    $(this).ColorPickerSetColor(this.value);
    });
});
</script> 
```

这里是html部分：

```
 <form method="post" name="lineForm" action="<?php echo $_SERVER['PHP_SELF'].'?file=settings&t=diagramm'; ?>" >

                    <div class="addCatsContainer" id="p_scents">
                        <p>
                            <label for="p_scnts">
                                <input type="text" id="p_scnt" size="20" name="p_scnt" value="<?php $_POST['p_scnt']; ?>" placeholder="add new category" />
                            </label><a href="#" id="addScnt">[+]</a> <span class="barColor">| bar color:</span>

                        </p>

                            <input class="cPicker" id="colorpickerField1" name="color" type="text" value="00ff00" value="<?php $_POST['color']; ?>" size="6" maxlength="6" />

                        </div>     

                          <div style="clear:both;"></div>

                    <input type="submit" name="submit" value="save" />
</form> 
```

有人能帮助我吗？谢谢

更新：

当下面的行被复制时，它就会起作用。

```
<input class="cPicker" id="colorpickerField1" name="color" type="text" value="00ff00" value="<?php $_POST['color']; ?>" size="6" maxlength="6" /> 
```

当输入字段使用 jquery 呈现时，它只是不起作用。

# html - 奇怪的标记出现在我的 jsfiddle 的页面上

> ID：13747681
> 
> 赞同：0
> 
> 时间：2012-12-06T16:07:41.500
> 
> 标签：html

为什么这个小提琴下面的奇怪标记出现在页面上？我试过验证它，但我看不出问题是什么，我通常不会将文档类型添加到小提琴中，它通常没问题。

[http://jsfiddle.net/eX8zY/7/](http://jsfiddle.net/eX8zY/7/)

```
jsFiddle demo   /* test */ * { display: inline-block; } .error { color: red; } label { color: blue; clear: left; } input { color: gold; } //<![CDATA[ window.addEvent('load', function() { });//]]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:11:31.387

CSS 中星形选择器的错误。您可能必须在小提琴支持/错误部分报告它。

# php - 指定唯一的注册码

> ID：13747684
> 
> 赞同：0
> 
> 时间：2012-12-06T16:07:50.440
> 
> 标签：php, md5

我的网站上有一个注册表，供用户注册成为会员。

当他们注册时，他们的详细信息被发送到 mysql 数据库，他们的电子邮件、姓名等都被输入。他们还获得了一个唯一的注册码，该注册码是由随机 md5 在提交时生成的，这个代码也被输入到数据库中。正在通过电子邮件发送给他们。

我遇到的问题是每次新用户注册时都会生成一个新代码，但它会为数据库中的所有其他用户重写以前的代码。我想要的是让每个用户的代码保持唯一，并且每次新用户注册时都不会重写其他代码，所以我想我需要编辑我的代码来说明

```
UPDATE `ptb_registrations` SET `registration_code` = '%s' 
    WHERE email = (whatever unique email the user enters) 
```

有人有什么想法吗？谢谢

```
<?php

/**
 * ShuttleCMS - A basic CMS coded in PHP.
 * random code - Used for allowing a user to reset password
 * 
 * @author Dan <dan@danbriant.com>
 * @version 0.0.1
 * @package ShuttleCMS
 */
define('IN_SCRIPT', true);
// Start a session
session_start();

/*
 * Generates registration code and puts it on database
 */

//Generate a RANDOM MD5 Hash for a code
$random_code=md5(uniqid(rand()));

//Take the first 8 digits and use them as the code we intend to email the user
$emailcode=substr($random_code, 0, 8);

//Encrypt $emailcode in MD5 format for the database
$registrationcode=($emailcode);

// Make a safe query
$query = sprintf("UPDATE `ptb_registrations` SET `registration_code` = '%s' ",
                    mysql_real_escape_string($registrationcode));

mysql_query($query)or die('Could not update members: ' . mysql_error());

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:16:12.653

这是我的问题：**您为什么不在注册用户时生成该代码？**这样你就只需要做一个`INSERT INTO`而不需要做另一个`UPDATE`查询。

过程可能是这样的

*   获取用户凭据
*   生成唯一密钥
*   全部存储到数据库中
*   发送包含该唯一密钥的电子邮件以批准电子邮件地址
*   全部完成

唔？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:10:29.147

在您的 MySQL 查询中，您没有放置 where 子句来将其限制为仅限于该新用户。由于您没有限制它，您正在更新“所有”用户。

您的代码看起来不完整，因为您没有包含有关注册的内容，但我假设处理得很好。

然后你想更新你的查询是

UPDATE `ptb_registrations`SET `registration_code`= '%s' WHERE user_id = '%s'

显然替换为您的架构的正确值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:11:59.767

通过运行

```
UPDATE `ptb_registrations` SET `registration_code` 
```

您正在更新所有用户，您缺少以下`WHERE`条款：

```
UPDATE `ptb_registrations` SET `registration_code` = "safkhsakjfdha" 
  WHERE `email`='bla@bla.bla' 
```

除此之外，假设所有变量都有值，其余所有看起来都不错。

# jquery - 并排的盒子；一种静态宽度，一种可变宽度，底部垂直对齐

> ID：13747690
> 
> 赞同：0
> 
> 时间：2012-12-06T16:08:18.733
> 
> 标签：jquery, css

我需要在可变宽度容器中并排放置两个盒子。一个盒子有一个定义的宽度，另一个需要填充其余的空间。此外，盒子需要垂直对齐：底部。

```
CSS
==============
body { background-color: papayawhip; }
.container {
    background-color: white;
    margin: 10px;
    padding: 10px;
}
.box-fixed {
    background-color: lightgray;
    display: inline-block;
    width: 200px;
}
.box-flexible {
    background-color: lightcoral;
    display: inline-block;
    vertical-align: bottom;
    width: 200px; /* <-- Don't want this! */
}

HTML
==============
<div class="container">
  <div class="box-fixed">Lorem ipsum dolor sit amet</div>
  <div class="box-flexible">Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam.</div>
</div> 
```

我可以使用浮动和溢出：隐藏，但是我失去了垂直对齐底部。桌子会很糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:26:46.407

我使用 jquery 管理它：http: [//jsfiddle.net/uvvdN/1/](http://jsfiddle.net/uvvdN/1/)

这并不完美，我不得不纯粹因为时间而添加，`+ 4`但`_fixedWidth`我希望这是你所追求的。

# yii - 单击页面上的按钮时，我想获取 CGridview 的页码？

> ID：13747695
> 
> 赞同：0
> 
> 时间：2012-12-06T16:08:27.373
> 
> 标签：yii

我想打印包含总共 360 个结果的 CGridview 页面，每页有 10 个结果我需要在同一页面中的一个按钮，将当前 10 页的结果打印为 pdf？

问题是我不知道如何访问相应的页面。假设我在结果为 250 到 260 的页面中。页面中的按钮应仅将当前页面打印为 pdf。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:14:49.657

不确定最佳方法，因为它是通过 ajax 更新的，我认为没有任何迹象表明您可以获取页码以在链接中使用。

我不知道它是否适用于您的情况，但一种解决方法可能是使用 javascript 来检测哪些分页列表项应用了“选定”类？

```
Yii::app()->clientScript->registerScript('grabPageNo', "
    $('#getPageNum').on('click', function(event){
        var pageNumber = $('.yiiPager > .selected > a').html();
        alert('page is: '+pageNumber);
    });
");

echo CHtml::button('get page number',array('id'=>'getPageNum')); 
```

如果您使用所有默认 CGridView 选项，则单击上述代码中的按钮应该会为您提供当前页码。然后，您可以将其附加到 URL 或类似内容，具体取决于您使用按钮的方式。

**编辑**

实际上，这里有一些有趣的阅读：[如何在 GridView 中返回当前页面？](http://www.yiiframework.com/forum/index.php/topic/20512-how-to-return-to-current-page-in-gridview/)其中建议使用[扩展名](http://www.yiiframework.com/extension/rrviews/)。并且也在这个问题的答案中：[Get the absolute row number in a grid](https://stackoverflow.com/questions/5834522/get-the-absolute-row-number-in-a-grid)

# javascript - 如何删除javascript中的重复字符

> ID：13747699
> 
> 赞同：1
> 
> 时间：2012-12-06T16:08:38.623
> 
> 标签：javascript

我有一个包含重复字符的单词的文件，例如：

*   笨蛋
*   史蒂文
*   uuuu用户
*   等等cccc

在 Javascript（在 nodejs 上使用）中，我如何删除多余的字符以便我得到`body`等等`user`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:10:19.817

试试这个：

```
str.replace(/(.)\1{1,}/g, "$1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:13:30.560

简单的正则表达式很适合这样的事情。

```
"boooody".replace(/(\w)\1+/g, "$1");
// "body" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:14:16.263

```
var words = [
    'boooody',
    'Steveeen',
    'uuuuuuser',
    'etccccc'
];

for (var i = 0, l = words.length; i < l; ++i) {
    var word = words[i].replace(/[^\w\s]|(.)(?=\1)/gi, ""); 
} 
```

[JSFiddle 上的可运​​行示例](http://jsfiddle.net/nFfND/)​</p>

# java - 无法将数据插入mysql

> ID：13747701
> 
> 赞同：0
> 
> 时间：2012-12-06T16:08:43.927
> 
> 标签：java, mysql

我的项目有问题，这是我的 pTwitterEx.java

```
import java.util.logging.Level;
import java.util.logging.Logger;
import org.json.JSONException;
import org.json.JSONObject;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 * @author tasgnab
 * how to use:
 * 1\. copy-paste folder tempat menyimpan hasil crawl per topik pada variabel dir
 * 2\. masukkan topik sabagai label di databae pada variabel topik
 * 3\. run file
 */
public class pTwitterEx {
    private static Database db = new Database();
    private static String dir = "D:\\KULIAH\\semester7\\TA2\\java\\dataset\\baik";
    private static String topik = "baik";
    private static int count=0;
    public static void main(String[]args){
        db.query("truncate twitter");
        String temp="a";
        while (!"iniadalahpenanda".equals(temp)){
            FileRead fr = new FileRead(dir+count);
            try {
                JSONObject J = new JSONObject(fr.getTeks());
                String C = J.get("text");
                db.query("insert into twitter values '"+C+"','"+topik+"'");
            } catch (JSONException ex) {
                temp = "iniadalahpenanda";
                //System.exit(0);
                //Logger.getLogger(pTwitterEx.class.getName()).log(Level.SEVERE, null, ex);
            }
            count++;
        }
        //db.query("insert into twitterfix select distinct comment,'"+topik+"' from twitter");
    }
} 
```

我的问题是，从文件夹“baik”到我的mysql数据库的数据。我的数据库中的字段名称是 text(type : text) 和 topik(type : varchar)。

当我运行程序时，它没有显示错误，但我的数据库中的数据仍然是空的。你能帮我解决我的问题吗？任何帮助将不胜感激......无论如何谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:13:52.837

要完成数据库中的表达式（至少在 MySQL 中），请添加“;” 在一行的末尾。

对不起，改变这一行：

```
db.query("insert into twitter values '"+C+"','"+topik+"'"); 
```

到这一行：

```
db.query("insert into twitter values '"+C+"','"+topik+"';"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:28:45.367

你的查询应该是这样的：观察大括号`(`和`)`

例子：

```
db.query("insert into twitter values( '"+C+"','"+topik+"')"); 
```

# r - 在R中将较少数量的值分配给较大数量的值

> ID：13747703
> 
> 赞同：1
> 
> 时间：2012-12-06T16:08:47.570
> 
> 标签：r

我有两个大向量：

```
A: https://dl.dropbox.com/u/22681355/A.csv
B: https://dl.dropbox.com/u/22681355/B.csv 
```

A 有超过 20000 个条目，但只有 1350 个唯一条目。B 是从 1 到 9 恰好 1350 次生成的随机数

我想将 B 中的值分配给 A，以便 A 中的相同值在 B 中获得相同的值。例如，如果有多个 1，每个 1 应该从 B 中获得相同的数字。

我一直在使用 A[B] 命令，但是在第 18000 个条目之后，我得到了 NA

这样做的正确方法是什么？

代码：

```
A<-read.csv("A.csv")
B<-read.csv("B.csv")

A[B] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:31:25.087

1.  `read.csv()`创建一个数据框，而不是一个向量。
2.  您可能是指`B[A]`A 中的每个元素在该元素值的索引处获取 B 的值。由于 A 的值范围从 1 到 1899，它超过了 B 的 1349 的大小。对于那些超出 B 范围的元素，引入了 NA。

做你想要实现的正确方法是

```
A = read.table("http://dl.dropbox.com/u/22681355/A.csv")
B = read.table("http://dl.dropbox.com/u/22681355/B.csv")
A = A$V1
B = B$V1
A = as.factor(A)

B[match(A,levels(A))] 
```

`match(A,levels(A))`将返回一个与 A 长度相同的向量，每个元素包含 A 的元素在其因子级别中的位置，即 1 到 1350 之间的数字（1350 个不同的值）。如果 A 是`as.factor(c(1,1,3,5,5,7))`,`levels(A)`将是`c(1,3,5,7)`,`match(A,levels(A))`将是`c(1,1,2,3,3,4)`, 即元素在其层级中的位置。

# java - Java EE 中的事务或分布式事务

> ID：13747708
> 
> 赞同：2
> 
> 时间：2012-12-06T16:09:16.417
> 
> 标签：java, jakarta-ee, jta

我是 Java EE 的初学者，我正在开发一个具有大量数据库操作的 Web 应用程序。我对 Java EE 中的事务感到困惑。

我的问题是我使用的是 Tomcat，我不知道 Java EE 中的事务类型，但我必须在我的项目中使用它们。所以，我已经搜索了很多次，得到了很多“孩子”：

1.  使用`connection.setAutoCommit(false)`，但它是连接管理的？

2.  使用`Javax.Transaction.UserTransaction`

这两者有什么区别，还有其他方法吗？

我正在使用 NetBeans 7.0，并且 Tomcat 与它集成在一起。当我尝试使用`javax.transaction.UserTransaction`它时，它无法自动完成这个界面，但确实给出了一个建议`java.transaction.xa`；

所以我该怎么做？？？

注意：我不能使用 EJB，因为 Tomcat 是托管服务器提供给我的 Web 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:28:58.340

正如你所指出的。“交易”一词有多种含义。一种流行的含义是数据库事务。

*   数据库事务是数据库操作的集合，这些操作是原子的（全部成功或全部失败）、一致（数据库必须在事务之前和之后都有效）、隔离（在事务完成之前其他事务可能看不到更改）、并且持久（一旦提交，事务就会持久化）。

这些事务可以在连接级别进行管理，通常使用`connection.setAutoCommit(false)`、`connection.commit()`和`connection.rollback()`。

您发现的另一种事务是 JTA 事务。JTA 事务是一个非常抽象的概念，简单地围绕着一组“操作”。JTA 本身对事务不做任何事情。然而，通常情况下，人们会插入 JTA 资源管理器，这些资源管理器会在事务开始或结束时执行某些操作。

例如，有人可以设置消息资源管理器以确保仅在提交事务时才发送 JMS 消息。当 JTA 事务启动和停止时，也有人可以使用数据库资源管理器来启动和停止数据库事务（如上所述）。

JTA 具有很大的配置开销，并且需要进行大量的设置工作。它通常仅在您需要管理资源集群（例如数据库集群）并在它们之间进行协调时使用。

如果您只有一个数据库，那么您可以直接在 JDBC 上使用事务。如果您在 JDBC 之上使用某些东西（例如 JPA），那么这些工具通常会为您管理事务。

一种流行的方法是使用[Spring 托管事务](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html)。Spring 与 JTA 类似，因为它具有非常通用的事务定义，但配置起来要容易得多。使用 Spring 有两个明显的优势。首先是它们的事务划分（使用@Transactional 注释）有时比处理提交和回滚要容易得多（不需要有这么多的try/catch/finally 语句）。另一个原因是，如果您最终迁移到集群，您可以稍后随时在 Spring 下插入 JTA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:16:15.897

默认情况下，Tomcat 中没有容器管理事务——在这种情况下，您必须以与 Java SE 中相同的方式处理事务。这与 EE 无关，因此不能使用 javax.transaction.UserTransaction。

# compression - 分层 JPEG 编码器/解码器

> ID：13747709
> 
> 赞同：13
> 
> 时间：2012-12-06T16:09:18.623
> 
> 标签：compression, jpeg, encoder, decoder

有谁知道分层JPEG模式（ITU T.81）的任何实现？我不是在谈论渐进模式（或顺序），我真正的意思是分层模式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T16:39:30.550

经过一番谷歌搜索，我终于发现：

*   [https://github.com/thorfdbg/libjpeg](https://github.com/thorfdbg/libjpeg)

引用自：

*   [http://calendar.perfplanet.com/2012/progressive-jpegs-a-new-best-practice/](http://calendar.perfplanet.com/2012/progressive-jpegs-a-new-best-practice/)

到目前为止，这似乎是更高级的选项。其他一些结果显示：

*   [http://flying_oe.tripod.com/academic/SoC/cs3242/index.html](http://flying_oe.tripod.com/academic/SoC/cs3242/index.html)

以及来自以下方面的一些解释：

*   [http://users.ece.utexas.edu/~ryerraballi/MSB/Contents.html](http://users.ece.utexas.edu/~ryerraballi/MSB/Contents.html)

# javascript - JavaScript：.innerhtml 错误消息表单验证

> ID：13747712
> 
> 赞同：0
> 
> 时间：2012-12-06T16:09:24.490
> 
> 标签：javascript

我正在尝试使用 .innerhtml 在按钮上方输入错误消息。我想我快要让它发挥作用了，但我被困住了。我认为这是一个非常简单的语义错误，因为我是 JS 新手。

这是我的 jsfiddle：http: [//jsfiddle.net/ajX2U/](http://jsfiddle.net/ajX2U/)

```
var sel  = document.getElementById("stateType");

    switch(sel.value) {
        case "VA":
            location.href = "http://www.test1.com";
            break;
        case "MD":
            location.href = "http://www.test2.com";
            break;
        case "IL":
            location.href = "http://www.test3.com";
            break;
        case "TX":
            location.href = "http://www.test4.com";
            break;
        case "other":
            location.href = "http://www.test5.com";
            break;
        // oh dear we have selected a wrong option
        default:
            document.getElementById('error').innerHTML = 'Fred Flinstone';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:12:22.157

在您的小提琴中，您只是忘记包含功能头。添加后，它对我有用。

[更新的小提琴](http://jsfiddle.net/ajX2U/4/)

```
function validate(){
    var sel  = document.getElementById("stateType");

    switch(sel.value) {
        case "VA":
            location.href = "http://www.test1.com";
            break;
        case "MD":
            location.href = "http://www.test2.com";
            break;
        case "IL":
            location.href = "http://www.test3.com";
            break;
        case "TX":
            location.href = "http://www.test4.com";
            break;
        case "other":
            location.href = "http://www.test5.com";
            break;
        // oh dear we have selected a wrong option
        default:
            document.getElementById('error').innerHTML = 'Fred Flinstone';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:14:31.873

从你的小提琴来看，这就是问题所在。

（使用 Chrome 并打开控制台，你会看到它）

```
<script type='text/javascript'>//<![CDATA[ 
window.addEvent('load', function() {
var sel  = document.getElementById("stateType");

switch(sel.value) {
    case "VA":
        location.href = "http://www.test1.com";
        break;
    case "MD":
        location.href = "http://www.test2.com";
        break;
    case "IL":
        location.href = "http://www.test3.com";
        break;
    case "TX":
        location.href = "http://www.test4.com";
        break;
    case "other":
        location.href = "http://www.test5.com";
        break;
    // oh dear we have selected a wrong option
    default:
        document.getElementById('error').innerHTML = 'Fred Flinstone';
}
}
var sel  = document.getElementById("stateType");
});//]]> 
```

var sel 在错误的位置并破坏了它（无论如何是第二个 var sel）。

# android - 从各个网站下载apk

> ID：13747718
> 
> 赞同：-4
> 
> 时间：2012-12-06T16:09:37.500
> 
> 标签：android

我正在尝试在线下载一些apks。许多下载链接都有压缩文件夹。我解压了，但是里面没有apk文件。有没有其他方法可以从这些压缩文件夹中获取 apk。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:22:06.000

您可能已经在压缩文件夹中获得了整个源代码。解压缩它，您将在其中找到一个“bin”文件夹。进入“bin”，您将在那里找到您的 apk

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:38:53.707

您链接的下载工作绝对正常。

APK 是一个文件包。它的工作方式与 zip 文件夹相同。

在 APK 中，您会获得已经找到的“META-INF”和“res”文件夹。

您正在做的实际上是在您的 zip 程序中打开 apk。

**AKA “ZIP”文件夹是APK！！！**

检查文件扩展名，你会看到它是`.apk`

![在此处输入图像描述](../Images/f134e62fd2bf2521f41f12072a1b6594.png)

将其安装在您的手机上。有很多方法。一种方法是将文件传输到手机，然后使用手机上的文件浏览器运行 apk。（注意，您需要通过设置允许第三方 apk 安装）

# javascript - RadAjaxManager AjaxRequest TypeError：无法读取未定义的属性“id”

> ID：13747720
> 
> 赞同：5
> 
> 时间：2012-12-06T16:09:43.203
> 
> 标签：javascript, telerik, radajaxmanager

情况如下：
我有一个加载自定义 Web 用户控件的主机页面。在我的 web 控件中，我想使用 javascript 和 RadAjaxManager 来加载第二个 web 用户控件。我使用 Telerik 的这个例子作为我的指南：
[http ://demos.telerik.com/aspnet-ajax/ajax/examples/manager/clientsideapi/defaultvb.aspx](http://demos.telerik.com/aspnet-ajax/ajax/examples/manager/clientsideapi/defaultvb.aspx)

但是，当我在 RadAjaxManager 上调用客户端“ajaxRequest”方法时，我不断收到以下错误。

```
TypeError: Cannot read property 'id' of undefined 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-18T04:33:48.690

发生此错误的另一个原因是`<pages>`web.config 的元素中没有 clientIDMode="AutoID" 属性

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T16:09:43.203

我终于想通了！
在我的父 Web 控件上，我已经实现了 RadAjaxManager。因此，当我使用自己的 RadAjaxManager 加载我的第二个 Web 控件时，javascript 对使用哪个管理器感到困惑。

输入：RadAjaxManagerProxy -> [http://www.telerik.com/help/aspnet-ajax/ajax-ajaxmanagerproxy.html](http://www.telerik.com/help/aspnet-ajax/ajax-ajaxmanagerproxy.html)

实施此操作后，我的控件运行良好！

希望这对其他人有所帮助，如果不是我自己，当我忘记的时候。

# asp.net - 在 Visual Studio 中使用服务参考设置“生成异步操作”时未获取 netTcp 和 wsHttp 端点

> ID：13747721
> 
> 赞同：0
> 
> 时间：2012-12-06T16:09:44.107
> 
> 标签：asp.net, wcf, nettcpbinding, wshttpbinding, service-reference

我正在使用 wsHttp 和 nettcp 服务端点创建一个 wcf 服务，然后在客户端应用程序中添加对它的服务引用，并在该服务引用的高级设置中检查“生成异步操作”

我发现只有服务的 basicHttp 端点被添加到客户端应用程序的应用程序/网络配置中。未添加服务的 Nettcp 和 wsHttp 端点。

如何更正此问题，以便在客户端应用程序的应用程序配置/网络配置中生成 netTcp 和 wshttp 端点。

# r - 基于列分割数据框

> ID：13747725
> 
> 赞同：0
> 
> 时间：2012-12-06T16:10:01.360
> 
> 标签：r

我有一个包含两列的数据框。一个用于数字，另一个用于标签示例

```
1 200 A
2 300 B
3 350 C
4 2000 A
5 2200 D
6 2300 K 
```

我想基本上分割这个数据帧并将第二列转换为包含单词的向量，条件是第一列上的**任何**两个值之间的差异小于 1000

```
Expected Result is

C("ABC","ADK") 
```

此处的示例将有一个向量 C，其中包含 ABC 和 ADK 作为单词，因为 row4 和 row3 之间的差异 > 1000

关于如何在不消耗大量计算的情况下做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:45:02.530

我没有在更大的数据集上对此进行测试，但以下应该可以工作：

```
df <- data.frame(Col1=c(200, 300, 350, 2000, 2200, 2300), 
                 Col2=c("A", "B", "C", "A", "D", "K"))

sapply(split(df$Col2, 
             cumsum(c(1, (diff(df$Col1) > 1000)))), 
       paste, collapse="")
#     1     2 
# "ABC" "ADK" 
```

在上面：

*   `diff(df$Col1) > 1000`返回一个向量`TRUE`和`FALSE`
*   `c(1, (diff(df$Col1) > 1000))`将该逻辑向量强制转换为数字并添加 1 作为第一组的起点。因此，我们现在有一个看起来像 的向量`1 0 0 1 0 0`。
*   我们现在可以使用`cumsum()`该向量来创建我们想要拆分数据的“组”。
*   `sapply`等等以粘贴相关详细信息`Col2`以获取您的（命名）向量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T18:37:31.413

另一个答案，只是因为没有人提到您的问题是[聚类分析](http://en.wikipedia.org/wiki/Cluster_analysis)的经典案例。并且还因为所有其他答案都是错误的，因为它们只是在比较所有成对距离时才比较连续点之间的距离。

寻找任意两点之间的距离小于阈值的点组可以通过[层次聚类](http://en.wikipedia.org/wiki/Hierarchical_clustering)和[完全链接](http://en.wikipedia.org/wiki/Complete_linkage_clustering)来处理。使用 R 很容易：

```
df <- data.frame(Col1 = c(200, 300, 350, 2000, 2200, 2300), 
                 Col2 = c("A", "B", "C", "A", "D", "K"))

tree <- hclust(dist(df$Col1), method = "complete")
groups <- cutree(tree, h = 1000)
# [1] 1 1 1 2 2 2
sapply(split(df$Col2, groups), paste, collapse = "")
#     1     2 
# "ABC" "ADK" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:45:55.077

这是一个选项：

```
extractGroups <- function(data, threshold){
    #calculate which differences are greater than threshold between values in the first column
    dif <- diff(data[,1]) > threshold

    #edit: as @Ananda suggests, `cumsum` accomplishes these three lines more concisely.

    #identify where the gaps of > threshold are
    dif <- c(which(dif), nrow(data))        
    #identify the length of each of these runs
    dif <- c(dif[1], diff(dif))     
    #create groupings based on the lengths of the above runs
    groups <- inverse.rle(list(lengths=dif, values=1:length(dif)))

    #aggregate by group and paste the characters in the second column together
    aggregate(data[,2], by=list(groups), FUN=paste, collapse="")[,2]
} 
```

还有一个关于你的数据的例子

```
extractGroups(read.table(text="1 200 A
2 300 B
3 350 C
4 2000 A
5 2200 D
6 2300 K", row.names=1), 1000)

[1] "ABC" "ADK" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T16:19:46.843

### 根据您的说明进行编辑

```
# SAMPLE DATA
df <- data.frame(Col1=c(200, 300, 350, 2000, 2200, 2300, 4500), Col2=c("A", "B", "C", "A", "D", "K", "M"))
df

# Make sure they are the correct mode
df$Col1 <- as.numeric(as.character(df$Col1))
df$Col2 <- as.character(df$Col2)

lessThan <- which(abs(df$Col1[-length(df$Col1)] - df$Col1[-1]) > 1000 )

lapply(lessThan, function(ind)
  c( paste(df$Col2[1:ind], collapse=""),
      paste(df$Col2[ind+1:length(df$Col2)], collapse="") )
) 
```

结果：

```
 [[1]]
  [1] "ABC"   "ADKM"

  [[2]]
  [1] "ABCADK" "M" 
```

# c# - 创建自定义按钮控件

> ID：13747728
> 
> 赞同：1
> 
> 时间：2012-12-06T16:10:08.070
> 
> 标签：c#, winforms, custom-controls

我正在制作一个自定义井字游戏，其中表格中有三个井字游戏帧。

与其创建三次 3x3 正方形按钮，我认为创建一个自定义控件会更好，该控件将包含我想要的九个按钮，因此我可以在表单中放置三次，并访问每一个按钮。

我对继承和自定义控件很陌生，所以我希望您能帮助我提供示例或说明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T16:16:26.077

在这种情况下，您可以使用`UserControl`. 这比创建自定义控件更容易，后者需要从现有控件派生控件并对其进行增强。在 VS 中右键单击您的项目并选择“添加”>“新项目...”。在 Windows 窗体部分中选择“用户控件”。将其命名为“TicTacToeUserControl”。您可以像设计表单一样设计用户控件。然后它将自动出现在当前项目的工具箱中，并准备好拖放到表单上。

* * *

**更新**

这里有更多的解释。将 a`TableLayoutPanel`放在`UserControl`. 更改`Dock`为`Fill`。添加一行和一列以便同时拥有三个并将它们的大小模式`Percent`更改为并将这些值更改为 33.33。从左到右然后自上而下为每个表格字段添加一个按钮，以便按阅读顺序使按钮名称为“button1”、“button2”等。保存用户控件（此时我的 VS 出现故障，我不得不重新开始）。

创建我们将用作按钮单击事件的事件参数的此类

```
public class ButtonClickedEventArgs : EventArgs
{
    public ButtonClickedEventArgs(TicTacToeUserControl userControl, Button button,
                                  int buttonNumber, int row, int column)
    {
        UserControl = userControl;
        Button = button;
        ButtonNumber = buttonNumber;
        Row = row;
        Column = column;
    }

    public TicTacToeUserControl UserControl { get; private set; }
    public Button Button { get; private set; }
    public int ButtonNumber { get; private set; }
    public int Row { get; private set; }
    public int Column { get; private set; }
} 
```

更改用户控件的代码，使其看起来像这样

```
[DefaultEvent("ButtonClicked")]
public partial class TicTacToeUserControl : UserControl
{
    public event EventHandler<ButtonClickedEventArgs> ButtonClicked;

    public TicTacToeUserControl()
    {
        InitializeComponent();
    }

    private void button_Click(object sender, EventArgs e)
    {
        OnButtonClicked((Button)sender);
    }

    private void OnButtonClicked(Button button)
    {
        var eh = ButtonClicked;
        if (eh != null) {
            int buttonNumber =
                Int32.Parse(button.Name.Substring(button.Name.Length - 1));
            int row = (buttonNumber - 1) / 3;
            int col = (buttonNumber - 1) % 3;
            eh(this, 
               new ButtonClickedEventArgs(this, button, buttonNumber, row, col));
        }
    }
} 
```

为属性窗口中所有按钮的单击事件选择事件处理程序“button_Click”，切换为事件（闪烁符号）。不要为每个按钮创建一个新按钮。按 F6（编译）

您的控件已准备就绪，可以从工具窗口拖放到表单上。根据需要调整它的大小。双击它。由于`DefaultEventAttribute`我们为表单指定的，VS 将自动创建此事件处理程序

```
private void ticTacToeUserControl1_ButtonClicked(object sender,
                                                 ButtonClickedEventArgs e)
{
} 
```

将此代码行添加到其中以测试用户控件

```
 MessageBox.Show(e.UserControl.Name + " " + e.Button.Name + " " + 
                    e.ButtonNumber + " " + e.Row + " " + e.Column); 
```

^(*注意：这实际上并没有创建一个新控件，它只是创建了一个模板*)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T16:39:03.007

最好的方法是使用用户控件，但不是通过设计器创建按钮，而是通过代码创建按钮，这将帮助您检测单击了哪个按钮；

```
public partial class UserControl1 : UserControl
    {
        private List<Button> buttons = new List<Button>(9);
        public UserControl1()
        {
            InitializeComponent();
        }

        private void UserControl1_Load(object sender, EventArgs e)
        {
            int line = 0;
            int lastleft = 0;
            int lasttop = 0;
            for (int i = 1; i < 10; i++)
            {
                Button btn = new Button();
                btn.Text = string.Empty;
                btn.Parent = this;
                btn.Top = lasttop;
                btn.Left = lastleft;
                btn.Width = 30;
                btn.Height = 30;
                btn.Name = i.ToString(CultureInfo.InvariantCulture);

                if (i % 3 == 0)
                {
                    lastleft = 0;
                    lasttop += 35; // 30 for height and 5 for spacing
                }
                else
                {
                    lastleft += 35; // 30 for width and 5 for spacing
                }
                btn.Click += BtnOnClick;
                buttons.Add(btn);

            }
        }

        private void BtnOnClick(object sender, EventArgs eventArgs)
        {
            //ur logic to check game status
            // how to know button?
            Button btn = sender as Button;

            if (btn != null)
            {
                MessageBox.Show(String.Format("You clicked : {0}", btn.Name), Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Information);
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-20T13:02:21.433

```
using System;  
using System.Collections.Generic;  
using System.Text;  
using System.Drawing;  
using System.Data;  
using System.Windows.Forms;  
namespace ButtonZ  
{  
    public class ButtonZ : System.Windows.Forms.Button  
    {  
        Color clr1, clr2;  
        private Color color1 = Color.LightGreen;  
        private Color color2 = Color.DarkBlue;  
        private Color m_hovercolor1 = Color.Yellow;  
        private Color m_hovercolor2 = Color.DarkOrange;  
        private int color1Transparent = 150;  
        private int color2Transparent = 150;  
        private Color clickcolor1 = Color.DarkOrange;  
        private Color clickcolor2 = Color.Red;  
        private int angle = 90;  
        private int textX = 100;  
        private int textY = 25;  
        private String text = "";  

        //Create Properties to read Button Text,Colors etc  
        public String DisplayText  
        {  
            get { return text; }  
            set { text = value; Invalidate(); }  
        }  

        public Color StartColor  
        {  
            get { return color1; }  
            set { color1 = value; Invalidate(); }  
        }  

        public Color EndColor  
        {  
            get { return color2; }  
            set { color2 = value; Invalidate(); }  
        }  

        public Color MouseHoverColor1  
        {  
            get { return m_hovercolor1; }  
            set { m_hovercolor1 = value; Invalidate(); }  
        }  

        public Color MouseHoverColor2  
        {  
            get { return m_hovercolor2; }  
            set { m_hovercolor2 = value; Invalidate(); }  
        }  

        public Color MouseClickColor1  
        {  
            get { return clickcolor1; }  
            set { clickcolor1 = value; Invalidate(); }  
        }  

        public Color MouseClickColor2  
        {  
            get { return clickcolor2; }  
            set { clickcolor2 = value; Invalidate(); }  
        }  

        public int Transparent1  
        {  
            get { return color1Transparent; }  
            set  
            {  
                color1Transparent = value;  
                if (color1Transparent > 255)  
                {  
                    color1Transparent = 255;  
                    Invalidate();  
                }  
                else  
                    Invalidate();  
            }  
        }  

        public int Transparent2  
        {  
            get { return color2Transparent; }  
            set  
            {  
                color2Transparent = value;  
                if (color2Transparent > 255)  
                {  
                    color2Transparent = 255;  
                    Invalidate();  
                }  
                else  
                    Invalidate();  
            }  
        }  

        public int GradientAngle  
        {  
            get { return angle; }  
            set { angle = value; Invalidate(); }  
        }  

        public int TextLocation_X  
        {  
            get { return textX; }  
            set { textX = value; Invalidate(); }  
        }  

        public int TextLocation_Y  
        {  
            get { return textY; }  
            set { textY = value; Invalidate(); }  
        }  

        public ButtonZ()  
        {  
            this.Size = new System.Drawing.Size(200, 50);  
            this.ForeColor = Color.White;  
            this.FlatStyle = System.Windows.Forms.FlatStyle.Flat;  
            text = this.Text;  
        }  

        //method mouse enter  
        protected override void OnMouseEnter(EventArgs e)  
        {  
            base.OnMouseEnter(e);  
            clr1 = color1;  
            clr2 = color2;  
            color1 = m_hovercolor1;  
            color2 = m_hovercolor2;  
        }  

        //method mouse leave  
        protected override void OnMouseLeave(EventArgs e)  
        {  
            base.OnMouseLeave(e);  
            color1 = clr1;  
            color2 = clr2;  
        }  

        //method mouse click  
        protected override void OnMouseClick(MouseEventArgs e)  
        {  
            if (e.Clicks == 1)  
            {  
                base.OnMouseClick(e);  
                color1 = clickcolor1;  
                color2 = clickcolor2;  
            }  
        }  

        protected override void OnPaint(PaintEventArgs pe)  
        {  
            base.OnPaint(pe);  
            text = this.Text;  
            if (textX == 100 && textY == 25)  
            {  
                textX = ((this.Width) / 3) + 10;  
                textY = (this.Height / 2) - 1;  
            }  
            Color c1 = Color.FromArgb(color1Transparent, color1);  
            Color c2 = Color.FromArgb(color2Transparent, color2);  
            //drawing string & filling gradient rectangle   
            Brush b = new System.Drawing.Drawing2D.LinearGradientBrush(ClientRectangle, c1, c2, angle);  
            Point p = new Point(textX, textY);  
            SolidBrush frcolor = new SolidBrush(this.ForeColor);  
            Border3DStyle borderStyle = Border3DStyle.SunkenInner;  
            pe.Graphics.FillRectangle(b, ClientRectangle);  
            pe.Graphics.DrawString(text, this.Font, frcolor, p);  
            ControlPaint.DrawBorder3D(pe.Graphics, ClientRectangle, borderStyle);  
            b.Dispose();  
        }  

    }  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T16:19:44.490

^(*这不是答案，但评论太长了（所以请不要投反对票）*)

* * *

在这种情况下，我不会使用自定义控件，而是只使用一组控件。

例如，只需以网格形式制作 9 个控件，然后将它们分配给数组

```
Button[][] buttons = new Button[ROW_COUNT][];
for (int i = 0; i < ROW_COUNT; i++)
{
    buttons[i] = new Buttons[COLUMN_COUNT];
}
buttons[0][0] = btnTopLeft;
... 
```

# java - 用java实现RSA算法

> ID：13747730
> 
> 赞同：0
> 
> 时间：2012-12-06T16:10:18.133
> 
> 标签：java, string, integer, rsa

我正在尝试用 java 实现 RSA 算法。
我了解数学算法，我不了解如何将字符串消息转换为大整数密文。

*   我是否将所有消息或密文加密和解密为一个巨大的整数？
*   如何将字符串转换为整数和整数到字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:17:25.903

我相信典型的方法是将字符串转换为字节数组（[为什么 byteArray 的长度为 22 而不是 20？](https://stackoverflow.com/questions/228987/convert-string-to-byte)），然后将字节数组转换为您想要的数字类型（[在 java 中将字节数组转换为整数反之亦然](https://stackoverflow.com/questions/7619058/convert-a-byte-array-to-integer-in-java-and-vise-versa)），即 int,long,double,...

# jquery - 用另一个替换段落

> ID：13747732
> 
> 赞同：2
> 
> 时间：2012-12-06T16:10:26.410
> 
> 标签：jquery, css, html-lists

这就是我所追求的。

我需要我的每个 LI 来替换名为“moreInfo”的 div 中的当前段落。

到目前为止，我已经尝试给每个 li 一个 ID，并且每个附加段落都设置为不显示。我已经设置了一个默认段落并在单击任何选项卡 (LI) 之前显示该段落。

```
<ul class="sideLinks">

    <li id="sideLink1">
        <a href="" >Favorites</a>
    </li>

    <li id="sideLink2">
        <a href="">Scope</a>
    </li>

    <li id="sideLink3">
        <a href="">Concierge</a>
    </li>

    <li id="sideLink4">
        <a href="">Share</a>
    </li>

    <li id="sideLink5">
        <a href=""> Reminders</a>
    </li>
</ul> 
```

到目前为止，这是我为 jQuery 设置的内容，但是由于某些奇怪的原因，我在第一个链接上遇到了错误。

```
$(document).ready(function(){
    $('li#sideLink1').click(function () {
        event.preventDefault();
        $('#moreinfo').html($("p#favorites"));
    });
}); 
```

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:12:10.013

你不定义`event`. 改写为：

```
$("#sideLink1").click(function (event) { ... 
```

另请注意，如果您使用 ID，则不需要将元素名称作为选择器的一部分。它甚至可能减慢选择器的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:13:00.660

缺少论据。您需要`event`在函数中传递

```
$('li#sideLink1').click(
    function (event) {
    event.preventDefault();
    $('#moreinfo').html($("p#favorites"));

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:13:19.840

```
jQuery(function($){
    $('li#sideLink1').click(function (event) {
        event.preventDefault();
        $('#moreinfo').html($("p#favorites").html());
    });
}); 
```

`.html()`接受字符串作为参数，而不是 jQuery 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T16:22:25.117

您得到的错误可能是因为您没有将事件对象传递给匿名函数。

```
$('li#sideLink1').click(
    function(event) {
        event.preventDefault();
        $('#moreinfo').html($("p#favorites"));
    }
); 
```

也就是说，LI 标签没有默认操作来阻止，并且给定提供的代码，锚标签仍然具有它的默认操作。您可能希望将点击操作放在锚标记上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T16:35:48.797

缺少事件参数，但我认为这不能完全解决问题。这是我认为您正在尝试完成的完整标记和示例。

[http://jsfiddle.net/psyon001/zjQy7/](http://jsfiddle.net/psyon001/zjQy7/)

我使用了锚点，因此如果禁用了 js，您可以添加一个 no-js 类定义来显示块，并且链接将锚定到文本，使其更优雅地降级。

```
<style>
    #moreInfo p{display:none;}
    #moreInfo p#default{display:block;}
</style> 
```

-

```
<ul class="sideLinks">
    <li>
        <a href="#favoritesDetail">Favorites</a>
    </li>
    <li>
        <a href="#scopeDetail">Scope</a>
    </li>
    <li>
        <a href="#conciergeDetail">Concierge</a>
    </li>
    <li>
        <a href="#shareDetail">Share</a>
    </li>
    <li>
        <a href="#remindersDetail">Reminders</a>
    </li>
</ul>
<div id="moreInfo">
    <p id="default"></p>
    <p id="favoritesDetail">Favorites description...</p>
    <p id="scopeDetail">Scope description...</p>
    <p id="conciergeDetail">Concierge description...</p>
    <p id="shareDetail">Share description...</p>
    <p id="remindersDetail">Reminders description...</p>
</div> 
```

-

```
<script>
$('.sideLinks').find('a').on('click', function(e){
    e.preventDefault();
    var $moreInfo = $('#moreInfo'),
        id = $(this).attr('href');
    $moreInfo.find('p').hide();
    $moreInfo.find(id).show();
});​
</script> 
```

# silverlight - 本地主机上的 SL 跨域调用

> ID：13747735
> 
> 赞同：0
> 
> 时间：2012-12-06T16:10:29.193
> 
> 标签：silverlight

[我从这里](http://msdn.microsoft.com/en-us/library/cc197955%28VS.95%29.aspx)阅读了跨域政策。在 localhost 上进行测试时，我们如何让它工作，或者这是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:20:59.327

这是不可能的。Silverlight 客户端应用程序应尝试调用托管在与托管 Silverlight 应用程序的网站不同的计算机上的服务。

# android - 用户不符合此购买条件 - 应用内结算

> ID：13747736
> 
> 赞同：23
> 
> 时间：2012-12-06T16:10:32.620
> 
> 标签：android, in-app-billing

我越来越

```
"User is not eligible for this purchase" 
```

尝试购买作为测试时来自 google play 的消息。

我已经在 google play 中上传了 singed apk，发布了计费项目（在应用产品中），将 apk 保存为草稿，仍然出现此错误。

我也试图从测试用户设备购买。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-11T14:46:23.560

**编辑：**

此错误的实际原因：

> 如果未经授权的用户尝试购买商品，则应显示此消息。

因此，如果应用程序未发布，非测试用户在尝试购买时应该会收到此错误。

我意识到，Google play 需要时间来更新应用商店的变化。所以你不能指望立即发生变化。相反，您应该等待，就我而言，平均需要 2/3 小时。

仍然可能有一些未知的错误，我无法想象。

**我的案例：**

首先我试图从我的测试设备购买仍然出现此错误，但等待一段时间后我没有收到此错误。所以我认为时间是这里的原因。

其次，我尝试使用非测试设备，这是未经授权的设备，因为该应用程序未发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:26:41.197

我遇到过同样的问题。我通过开发者控制台的“旧设计”上传 apk 来修复它。脚步：

1.  重命名应用程序包。
2.  创建发布版本并使用您的开发人员密钥对其进行签名。
3.  将其上传到开发者控制台旧设计。系统将询问您是否切换到新设计以获取公钥。不要这样做。
4.  执行旧设计中的所有后续操作。
5.  在创建并发布应用程序内容后，切换到新设计并获取您的应用程序安全密钥。
6.  为您的应用程序添加新密钥，重新构建并辞职。
7.  将您的应用程序安装到设备上。
8.  等待 2-3 小时。利润。

喜欢它。开发者控制台的“新设计”存在一些问题。我删除了 apk 并从“旧设计”创建了一个新应用程序，它工作正常。价格点（应用内产品）再次自动添加，因为应用程序包名称与我删除的旧名称完全相同。

还要确保使用现在特定于应用程序的新公钥。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T16:29:57.853

您必须仅将[测试帐户](http://developer.android.com/google/play/billing/billing_admin.html#billing-testing-setup)用于测试目的。测试时您不能使用市场帐户或其他人购买您的应用程序。

**来自 Android 文档**

CHECK_BILLING_SUPPORTED 请求的同步响应为 Bundle 提供了服务器响应代码。RESULT_OK 响应代码表示支持应用内计费；RESULT_BILLING_UNAVAILABLE 响应代码表示应用内计费不可用，因为您指定的 API 版本无法识别或**用户没有资格进行应用内购买**（例如，用户居住在不允许应用内计费的国家/地区）。也可以返回 SERVER_ERROR，表示 Google Play 服务器存在问题。

[在此处](https://developer.android.com/google/play/billing/billing_overview.html)查看详细信息

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-23T23:41:09.367

现在还有一种情况可能导致“用户不符合条件”消息。

归结为许可系统最近的变化：

> 现在，每个应用程序的许可密钥都是单独管理的。要查看应用程序的许可证密钥，请切换到新设计并转到应用程序的服务和 API

创建新应用程序时，您不能再使用旧的“共享”许可证密钥。您必须将 Google Play 开发者控制台切换到“新设计”，并使用该应用的“服务和 API”部分中的每个特定应用的许可证密钥。

如果您尝试使用旧的共享密钥，则行为如下：

1.  如果应用尚未发布，测试人员将收到“用户不符合此购买条件”消息。
2.  如果应用程序发布，用户将完成购买流程并支付购买费用，但应用程序不会收到“购买成功”消息。

**TL;DR**：确保您使用的是新的每应用许可证密钥并且您已正确复制它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-11T12:51:41.560

当您所做的一切都很完美时，就会出现此错误，您使用了带有正确产品 ID 的签名 APK，但您必须注意，**您使用的帐户可能没有正确的有效信用卡详细信息。**

因此，当您想购买任何产品时，即使使用**测试帐户**，该帐户也应该具有**有效的信用详细信息**。

您必须在发布者帐户的编辑配置文件中指定**测试帐户**

**许可和应用内计费**

**测试帐户框**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-07T17:27:05.553

Make sure you fill in the @gmail.com address as a licensed test account. Other e-mail addresses associated with your Google account will NOT work.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-01T09:40:13.517

对于“未发布”应用，请在 Play 开发者控制台的“帐户详细信息”和“具有测试访问权限的 Gmail 帐户”下输入您的电子邮件帐户。还需要等待24小时。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-06T16:37:42.567

`android:versionCode`Manifest 中的设置必须与 Google Play 控制台中的设置相同

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-05T09:17:07.210

遇到这个问题，困扰了一两天。我删除了测试设备的gmail，重新添加。之后它就可以工作了。

# node.js - 使用 express 和 mongodb 提供动态 URL

> ID：13747740
> 
> 赞同：5
> 
> 时间：2012-12-06T16:10:42.123
> 
> 标签：node.js, mongodb, url, express

我正在构建一个具有类似 reddit 功能的网站。我希望用户提交的内容有自己的页面。每个提交都分配了一个 5 个字符的 ID，我希望该 ID 出现在该页面的 URL 中。

我在路由器文件中有这个函数，它呈现一个名为标题的页面：

```
exports.titles = function(req, res){
i = 0
read(function(post){
    url = post[i].URL;
    res.render('titles', {title: post[i].title, url: post[i].URL});
});

}; 
```

它由 app.js 中的以下语句提供服务：

```
app.get('/titles', home.titles); //home.js is the router file 
```

标题页有一个带有文本 post.title 和 URL post.URL 的链接。当用户点击链接（例如 domain.com/12345）时，他们应该被带到一个名为 content 的页面，其内容为 post.body。

我如何 a) 将 URL 传递回我的 app.js 文件以包含在 app.get 中，b) 在此路由器文件中包含 app.get 函数，或 c) 以任何其他方式解决此问题？

编辑：我确实有一个对象'titles'，它是一个 mongodb 集合，但它位于不同的模块中。没有理由我不能将它添加到路由器。

编辑：我尝试将此添加到 app.js 以查看它是否有效：

```
app.get('/:id', function(req, res){
  return titles.findOne({ id: req.params.id }, function (err, post) {
    if (err) throw(err); 

    return res.render('content', {title: post.title, content: post.body});
   });
}); 
```

编辑：我让它工作。我所做的只是格式化标题，使其看起来像 domain.com/titles/12345 并将 app.get('/:id', 更改为 app.get('/titles/:id, ...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-06T16:19:09.870

如果我说对了，我会反过来做。

## 简洁版本

1.  我会`id`从 URL中获取
2.  然后我会从数据库中提取与此相关的数据`id`
3.  并使用这些数据来构建最终页面。

您无需为每个 URL 创建新路由。URL 可以包含一些变量（这里是`id`），Express 可以解析 URL 以获得这个变量。然后，`id`您可以从中获取构建正确页面所需的数据。

## 长版

我假设有人输入此 URL `http://domain.com/1234`：。
我还假设您有一个变量`titles`，它是一个 MongoDB 集合。

您可以像这样定义路由：

```
app.get('/:id', function(req, res) {
  // Then you can use the value of the id with req.params.id
  // So you use it to get the data from your database:
  return titles.findOne({ id: req.params.id }, function (err, post) {
    if (err) { throw(err); }

    return res.render('titles', {title: post.title, url: post.URL /*, other data you need... */});
  });
}); 
```

### 编辑

我根据最后的评论做了一些改变......

# jsf-2 - 如何使用 CDI 管理的 bean 获取 POST 请求参数？

> ID：13747744
> 
> 赞同：2
> 
> 时间：2012-12-06T16:10:49.630
> 
> 标签：jsf-2

使用由 JSF (@Managedbean) 管理的 requestscoped bean，您可以使用 @ManagedProperty("#{param.id}") 获取请求参数的值。

如果请求是 GET 请求，可以通过 f:viewParam 获取请求参数的值。

当 bean 由 CDI 管理 (@Named) 并且请求是 POST 请求时，是否有特殊机制来获取请求参数的值？我只知道Java代码

```
FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("id"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:21:47.780

在`<f:viewParam>`POST 请求中效果很好。

您应该只记住，这仅在应用请求值阶段运行，而不是在呈现响应阶段。因此，如果您实际上是在操作方法上导航并期望将参数设置为目标页面的视图参数，那么您就错了。它只会在 POST 请求实际提交到的视图上设置。

作为`<f:viewParam>`对 POST 也有效的证据，这里有一个测试片段：

```
<f:metadata>
    <f:viewParam name="foo" />
</f:metadata>
<h:form>
    <h:commandButton value="submit">
        <f:param name="foo" value="bar" />
    </h:commandButton>
</h:form>
<p>foo: #{foo}</p> 
```

按下提交按钮将显示`foo: bar`。

您需要以不同的方式解决具体的功能需求。[由于您没有在问题中说明具体的功能要求](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)，因此无法对此给出详细的答案。这里至少有一些提示：

1.  `@Inject`目标 bean 并在操作方法期间将其设置为属性。
2.  使用`<f:setPropertyActionListener>`.
3.  使用闪光范围。
4.  在查询字符串中发送带有参数的重定向。

# php - 如何填充下拉列表并将其保存到数据库中？

> ID：13747745
> 
> 赞同：-3
> 
> 时间：2012-12-06T16:10:51.033
> 
> 标签：php, javascript, html, mysql

我想填充情绪的下拉列表并将其保存到我的数据库中并带有时间戳。同时将情绪与当前用户联系起来。我应该如何处理这个？

在我的数据库中，我有一个名为“checkin”的表，其中包括：ID、时间、FKMoods（情绪列表的外键）和 FKUsers（用户的外键）。

现在我在“page.php”中有一个名为 checkin 的表单：

```
<form id="checkin" action="checkin/checkin.php" method="POST">
<label for="checkinMood">Select your current mood :</label>
<select id="checkinMood" class="SelectMood"></select><br />
<input type="submit" id="checkin-button" value="Update!" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:15:38.860

完成此操作的步骤

1.  从情绪表中[选择情绪](http://dev.mysql.com/doc/refman/5.0/en/select.html)
2.  [循环](https://stackoverflow.com/questions/1756743/how-to-loop-through-a-mysql-result-set)遍历结果并将它们放入选择输入
3.  提交后，将给定的心情[更新](http://www.w3schools.com/php/php_mysql_update.asp)到用户表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:19:05.393

不要将 html 选项列表保存到数据库中。当您想更改选项时，编辑起来太难了。存储这样的情绪列表：

```
CREATE table moods
mood_id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
mood VARCHAR(45); 
```

要制作选项列表，请查询情绪表并在结果中循环创建选项：

```
<option value='{$mood["mood_id"}'>{$mood["mood"]}</option> 
```

要存储用户的心情，请`users`使用`mood_id`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:21:15.627

执行一个连接的 sql 查询，首先从其他表中提取外键值/行 - 假设您使用的是 mysql - 使用每个人都知道的非常基本的功能（不涉及您使用的是 mysqli 还是任何 pdo 或 lib）：

```
SELECT * FROM checkin c LEFT JOIN listofmoods lm ON c.FKMoods = lm.FKMoods LEFT JOIN listofusers lu ON c.FKUsers = lu.FKUsers ORDER BY c.ID ASC 
```

（或者你想排序）

现在你得到了你需要的所有字段。然后运行 ​​mysql fetch 来创建列表，类似于：

```
$query=mysql_query(-thequery listed above-);

while($fetch=mysql_fetch_assoc($query))
{

   $moodselect.='<option value="'.$fetch['FKMoods'].'">'.$fetch['whateverfieldlabelthemoodnameyouhaveonmoodstable'].'</option>';

} 
```

这将为您弹出一个 $moodselect ，其中包含必要的选项。然后，您可以将其推入示例中的选择中。

您可能必须在表单的某个隐藏字段中输入用户 ID。或者，如果您的用户系统从会话中自动识别用户，您可以在表单发布到 checkin.php 时使用它。

# ios - IOS - UITableview中的UISegmented

> ID：13747748
> 
> 赞同：0
> 
> 时间：2012-12-06T16:11:07.567
> 
> 标签：ios, uitableview

我在 uitableview 中插入了一个分段，[就像这个 url image 一样](http://mocku.ps/qb6o64)。如果您看到 url 图像，现在我可以正常工作，所有数据都在 uitable 中，

和...

当我向下滚动表格时，我想要第 1 部分：图像（在 url 中）将滚动到第 2 部分：分段将停止，如果您仍然滚动合适的第 3 部分：数据将滚动（保持在顶部分段）。

你有什么想法吗。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:41:34.790

我只是测试它，它正在工作！

1.  设置你的 UITableView 痛点

2.  UITableView 有两个部分，每个部分只有一行。

3.  编辑部分标题时，请确保只有第二部分有标题 - 第二个标题将是您的第 2 部分。

4.  第一部分第一行是你的part1。

5.  第二部分第一行是你的part3。

就是这样 ： ）

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }

        cell.textLabel.text = @"test";

        return cell;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{
    @try {
        UIView *containerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 30)];
        switch (section) {
            case 0:
            {
                //nothing
            }
                break;
            case 1:
            {
                UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 30)];
                lbl.text = @"second";
                lbl.textColor = [UIColor blackColor];
                [containerView addSubview:lbl];
            }
                break;
        }
        return containerView;
    }
    @catch (NSException *exception) {
    }
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{
    return 30;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return 1000.0;
} 
```

# emacs - Emacs 的字体系列

> ID：13747749
> 
> 赞同：12
> 
> 时间：2012-12-06T16:11:09.113
> 
> 标签：emacs, fonts

如果我这样做，`M-x customize-face` `RET` `default`我可以调整 Emacs 中的默认面（字体）。

有几个选项，所有选项都[在文档中进行了说明](http://www.gnu.org/software/emacs/manual/html_node/emacs/Fonts.html)。当您选择/单击 时，可以从菜单中选择其中许多选项`Value Menu`，但不能选择`Font Family`.

如何查看可以`Font Family`在 Emacs 中使用的字体列表？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-10T06:46:42.807

`*scratch*`在缓冲区中键入以下内容，然后`C-j`在其末尾按：

```
(font-family-list) 
```

您可能需要通过`enter`在末尾点击 ... 来扩展结果以查看所有结果。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-06T18:44:30.337

如果您在 X Window 系统上使用 Emacs 23.1 或更高版本，则以下[`fc-list`](http://ftp.x.org/pub/X11R7.0/doc/html/fc-list.1.html)命令可以列出系统上 Emacs（或任何使用 fontconfig 的应用程序）可用的字体系列：

```
$ fc-list : family 
```

# c++ - 什么是存储排列的好数据结构以及排列发生多少次？

> ID：13747754
> 
> 赞同：0
> 
> 时间：2012-12-06T16:11:22.073
> 
> 标签：c++, sorting, data-structures, containers, permutation

我的排列是唯一的数字对。我需要浏览一个列表并计算给定排列发生的次数。所以我需要将它记录在数据结构中。

```
(1,1) 0
(1,2) 5
(1,3) 3
(2,2) 5
(2,3) 2
(3,3) 1 
```

最终，我需要能够按降序对这个容器进行排序，这样我才能得到出现次数最多的排列。非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:19:44.443

我只是制作一个pair到int的无序映射（假设int就足够了，你可能需要一个长整数或任意大的整数）。如果键已经存在，只需增加值，否则将值设置为 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:20:15.707

使用`std::map<std::pair<int, int>, int>`. 像这样插入：

```
std::map<std::pair<int, int>, int> myMap;
typedef std::map<std::pair<int, int>, int>::iterator Iterator;
// Insert "permutation" (0,1) with a default of 0 uses
Iterator it=myMap.insert(std::make_pair(std::make_pair(0, 1), 0)).first;
++it->second; // Increment use count - will use old count if already there 
```

您甚至不需要事后对其进行排序，您始终可以在每次插入后记录当前的最大值！

请注意，插入中的外部对带有您使用次数的默认值。如果元素尚未在地图中，这将设置为 0。所以如果排列已经存在，它会找到你的地图元素，否则它会插入它并将使用计数设置为零。然后你只是增加它的任何一种方式！

# magento - Magento 图像调整大小对齐顶部

> ID：13747755
> 
> 赞同：2
> 
> 时间：2012-12-06T16:11:28.470
> 
> 标签：magento, image-resizing

每当我上传图像时，图像必须在列表页面中调整大小。现在图像正在完美地调整大小并生成具有上述尺寸的新调整大小的图像。当图像比例不正确时我遇到的问题。在这里，图像垂直和水平居中对齐，在顶部和底部留下空白。我希望它在顶部中心对齐。这不是 CSS 问题，因为生成了新的调整大小的图像。

下面是我现在使用的代码。

```
<img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(160,220); ?>" width="160" height="220" /> 
```

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T07:21:28.747

我认为您的问题的解决方案是对您的目录图像进行自适应调整大小。

我做了一些研究，发现[了这个扩展](https://github.com/roomine/AdaptiveResize)。

请让我知道它是否解决了您的问题。

谢谢！

# javascript - Highcharts 工具提示总是一样的

> ID：13747756
> 
> 赞同：0
> 
> 时间：2012-12-06T16:11:30.253
> 
> 标签：javascript, jquery, charts, highcharts

我有一个显示正确图表的图表（即输入正确）。

无论我是使用默认的工具提示行为还是为格式化创建自己的函数，都有一些我没有得到的奇怪行为。无论我将鼠标放在图表的哪个位置，工具提示的值总是相同的。

该图是正确的，我 100% 确定这些值不一样。下面是我用于图表设置的代码。

```
function graphUtilPing(utilGws) {
var options = {
    chart : {
        renderTo : 'ping_util',
        type : 'spline',
        width:'900'
    },
    series:[],
    title : {
        text : 'Utilisation'
    },
    xAxis : {
        type:'datetime',
        title : {
            text : 'Time of the day'
        }
    },
    yAxis : {
        title : {
            text : 'Percentage (%)',
        },
    },
    tooltip:{ 
    shared:false,
    formatter : 
        function() {
        var d = new Date(this.x);
        var hrs = d.getHours();
        var minutes = d.getMinutes();
        var seconds = d.getSeconds();
        var ds =  (hrs < 9 ? "0"+hrs : hrs) + ":" + (minutes < 9 ? "0"+minutes : minutes) + ":" + (seconds < 9 ? "0"+seconds : seconds);
            return '<b>' + this.series.name + '</b><br/>'
                + ds + ": " + this.point.y.toFixed(2) + '%';
    }
}
};
for (var key in utilGws) {
    var gw = utilGws[key];
    var gwUtilValues = gw[0];
    var gwMsTimes = gw[2];
    var chartObj = {
        name: key,
        data: array_combine(gwMsTimes, gwUtilValues)
    };
    options.series.push(chartObj);
}

chart = new Highcharts.Chart(options);
return chart; 
```

}

我正在使用 Chrome，这个问题在 IE 上也可以重现。

即使不更改工具提示对象，我得到的行为也是一样的。

任何想法可能是什么问题？

**更新：问题可重现的示例：http: [//jsfiddle.net/Htj74/3/](http://jsfiddle.net/Htj74/3/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:29:04.747

问题是您的数据时间是相反的。它来自`05 Dec 2012 23:45:00`于`05 Dec 2012 00:00:00`。应该`05 Dec 2012 00:00:00`是`05 Dec 2012 23:45:00`。

问题是`arrayCombine`。应该是以下。

```
function array_combine (a1, a2) {
    var data = [];
    for (var i = 0, length = a1.length; i < length ; i++) {
      data.push([ a1[i], a2[i] ]);
    }
    return data;
} 
```

[**演示**](http://jsfiddle.net/t4ZkX/)

# google-maps - 如何将代码从 Google Maps API V2 迁移到 V3？

> ID：13747769
> 
> 赞同：0
> 
> 时间：2012-12-06T16:12:03.587
> 
> 标签：google-maps, google-maps-api-3, google-maps-api-2

由于 Google Maps JavaScript API 第 2 版已于 2010 年 5 月 19 日正式弃用。V2 API 将在 2013 年 5 月 19 日之后停止工作。

我们使用 V2 开发的所有应用程序是否会在 2013 年 5 月 19 日之后停止，并且我们必须在此之前将它们迁移到 V3？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T16:49:37.927

我不知道谷歌是否明确表示他们将删除 API 和资产无法使用，但我知道在 5 月 19 日之后，所有赌注都取消了，他们可以随意删除 API 和任何/所有需要随时支持 v2 的资产，恕不另行通知，因此这是一种“自担风险”的交易。

是时候迁移了……v2 已被弃用多年，v3 得到了很好的支持。

迁移过来并不难，您可能可以保留大部分现有代码库，只需调用几个不同的函数。

例如，您以前调用的所有原始函数都是这样的：

```
new GMap2()...
new GMarker()...
new GLatLng()... 
```

都已命名空间，因此它们在 v3 中的等价物将是：

```
new google.maps.Map()...
new google.maps.Marker()...
new google.maps.LatLng()... 
```

但是，无论何时您要使用 StreetView 或 DirectionsRenderer 等服务，您都需要查看相关文档，因为这些文档略有变化。

在阅读过程中，您必须追查一些错误，但文档组织得非常好，您不应该遇到那么多麻烦。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-20T18:55:22.313

这是有关如何进行升级的简单指南：http: [//gabrielduque.wordpress.com/2011/01/13/upgrading-from-google-maps-api-v2-to-v3/](http://gabrielduque.wordpress.com/2011/01/13/upgrading-from-google-maps-api-v2-to-v3/)

# get - Cannot read response from AngularJS $resource JSONP get from Google Finance

> ID：13747770
> 
> 赞同：0
> 
> 时间：2012-12-06T16:12:06.223
> 
> 标签：get, jsonp, angularjs, finance

I am following the tutorial at [http://www.youtube.com/watch?v=IRelx4-ISbs](http://www.youtube.com/watch?v=IRelx4-ISbs) to use AngularJS $resource to get JSON data of a stock index, such as the S&P 500, from Google Finance. However, when I write the result to console, I do not see the data. I get this in Google Chrome's console:

*   e
*   __proto: 3
*   $delete
*   $get
*   $query
*   $remove
*   $save
*   constructor
*   __proto

However, when I go to "Network" in Chrome's console, I see the get in the Name Path left column. When I click on the "info, I see five tabs on the right panel. Under the Preview and Response tabs, I see the correct data. I just don't know how to see or retrieve that in my Javascript.

I attempted to put my code to [http://jsfiddle.net/curt00/ycYn7/](http://jsfiddle.net/curt00/ycYn7/) but Google Chrome's console is giving me "Uncaught Error: No module: Twitter". (Does anybody know how to get around this error?) Here is the HTML code from my jsfiddle:

```
<!doctype html>
<html ng-app="Twitter">
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular-resource.min.js">
        </script>
    </head>
<body>
    <div ng-controller="TwitterCtrl"></div>
</body>
</html> 
```

Here is the Javascript code from my jsfiddle:

```
angular.module('Twitter', ['ngResource']);

function TwitterCtrl($scope, $resource) {

var tickerSymbol = "INDEXSP:.INX";

var tempurl = 'https://finance.google.com/finance/info?client=ig&q=' + tickerSymbol.replace(":","%3A") + '&callback=?:action';

$scope.googleFinance = $resource(tempurl,
                                   {action:'&test=', q:'test', callback:'JSON_CALLBACK'},
                             {get:{method:'JSONP'}});

$scope.indexResult = $scope.googleFinance.get();

console.log('indexResult: ',$scope.indexResult);
} 
```

Can anybody suggest how my code should be changed so that I can fetch the data from the response?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:35:30.347

There are at least 2 things that are not correct:

1.  You are duplicating the parameters on your request. The `tempurl` **should not** contain any paramaters (i.e. `https://finance.google.com/finance/info`). If you want to pass parameters, do it within the actions ('get', 'post', 'delete', etc...) or set default parameters. For more information, check the angular.js [$resource documentation](http://docs.angularjs.org/api/ngResource.%24resource).

2.  Google Finance response is actually an array, therefore you need to add `isArray: true` to your GET action in order for it to work

**jsFiddle**: [http://jsfiddle.net/8zVxH/1/](http://jsfiddle.net/8zVxH/1/)

P.S. I'm not familiar with the Google Finance API, so I don't know if the results are the ones you expect. I've just 'fixed' your jsFiddle without changing the logic...

# android - 在发布错误消息之前，Android 上的 ACRA 获取日志

> ID：13747780
> 
> 赞同：2
> 
> 时间：2012-12-06T16:12:31.813
> 
> 标签：android, logging, acra, bug-reporting

ACRA 日志在我的 Galaxy S2 上运行良好。我可以在 GoogleDoc 中看到报告。

问题是 ACRA 发送的日志实际上并没有导致崩溃的错误。示例：我在 GoogleDoc 中的内容：

> 12-06 17:59:03.605 D/CLIPBOARD(10745)：在开始输入时隐藏剪贴板对话框：由其他人完成...！12-06 17:59:05.380 D/AndroidRuntime(10745): 关闭 VM 12-06 17:59:05.380 W/dalvikvm(10745): threadid=1: 线程退出未捕获异常 (group=0x4001e578) 12-06 17:59:05.380 E/ACRA (10745)：ACRA 捕获了 ru.ptl.guidenavigator 的 NoSuchMethodError 异常。建设报告。12-06 17:59:05.545 D/dalvikvm(10745)：GC_CONCURRENT 释放 278K，52% 释放 2762K/5639K，外部 123K/513K，暂停 2ms+2ms 12-06 17:59:05.725 D/dalvikvm(10745)： GC_CONCURRENT 已释放 399K，52% 可用 2839K/5895K，外部 123K/513K，暂停 1ms+3ms 12-06 17:59:05.790 I/ACRA (10745)：READ_LOGS 已授予！ACRA 可以包含 LogCat 和 DropBox 数据。12-06 17:59:05.800 D/ACRA (10745): 检索 logcat 输出...

这是完整的报告：

> 12-06 17:59:05.545: D/dalvikvm(10745): GC_CONCURRENT 释放 278K, 52% 空闲 2762K/5639K, 外部 123K/513K, 暂停 2ms+2ms 12-06 17:59:05.725: D/dalvikvm(10745 ): GC_CONCURRENT 释放 399K, 52% 释放 2839K/5895K, 外部 123K/513K, 暂停 1ms+3ms 12-06 17:59:05.790: I/ACRA(10745): READ_LOGS 被授予！ACRA 可以包含 LogCat 和 DropBox 数据。12-06 17:59:05.800: D/ACRA(10745): 检索 logcat 输出... 12-06 17:59:06.185: D/ACRA(10745): 写入崩溃报告文件 1354816746000.stacktrace。12-06 17:59:06.195：D/ACRA(10745)：即将从 #handleException 启动 ReportSenderWorker 12-06 17:59:06.195：D/ACRA(10745)：将所有待处理的报告标记为已批准。12-06 17:59:06.195: D/ACRA(10745): 在 /data/data/ru.ptl.guidenavigator/files 中寻找错误文件 12-06 17:59:06.200: D/ACRA(10745): # checkAndSendReports - 12-06 17:59:06.200 开始：杀死应用程序？true 12-06 17:59:09.515: E/ACRA(10745): ru.ptl.guidenavigator 致命错误：android.widget.Button.addChildrenForAccessibility 12-06 17:59:09.515: E/ACRA(10745): java.widget.Button.addChildrenForAccessibility lang.NoSuchMethodError: android.widget.Button.addChildrenForAccessibility 12-06 17:59:09.515: E/ACRA(10745): at ru.ptl.guidenavigator.DownloadActivity.onClick(DownloadActivity.java:68) 12-06 17:59 :09.515: E/ACRA(10745): 在 android.view.View.performClick(View.java:2538) 12-06 17:59:09.515: E/ACRA(10745): 在 android.view.View$PerformClick。运行（View.java:9152）12-06 17:59:09.515：E/ACRA（10745）：在 android.os.Handler.handleCallback（Handler.java:587）12-06 17:59:09.515：E/ ACRA(10745): 在 android.os.Handler.dispatchMessage(Handler.java:92) 12-06 17:59:09.515: E/ACRA(10745): 在 android.os.Looper.loop(Looper.java:130 ) 12-06 17:59:09.515: E/ACRA(10745): 在 android.app.ActivityThread.main(ActivityThread.java:3691) 12-06 17:59:09.515: E/ACRA(10745): 在 java.lang.reflect.Method.invokeNative(Native方法) 12-06 17:59:09.515: E/ACRA(10745): at java.lang.reflect.Method.invoke(Method.java:507) 12-06 17:59:09.515: E/ACRA(10745) : 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907) 12-06 17:59:09.515: E/ACRA(10745): 在 com.android.internal.os.ZygoteInit.main (ZygoteInit.java:665) 12-06 17:59:09.515: E/ACRA(10745): at dalvik.system.NativeStart.main(Native Method) 12-06 17:59:09.520: I/Process(10745) : 发送信号。PID：10745 SIG：9 reflect.Method.invoke(Method.java:507) 12-06 17:59:09.515: E/ACRA(10745): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907) 12 -06 17:59:09.515: E/ACRA(10745): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665) 12-06 17:59:09.515: E/ACRA(10745):在 dalvik.system.NativeStart.main(Native Method) 12-06 17:59:09.520: I/Process(10745): 发送信号。PID：10745 SIG：9 reflect.Method.invoke(Method.java:507) 12-06 17:59:09.515: E/ACRA(10745): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907) 12 -06 17:59:09.515: E/ACRA(10745): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665) 12-06 17:59:09.515: E/ACRA(10745):在 dalvik.system.NativeStart.main(Native Method) 12-06 17:59:09.520: I/Process(10745): 发送信号。PID：10745 SIG：9

所以 acra 收到的最后一条消息是 12-06 17:59:05.800

但是错误 java.lang.NoSuchMethodError 发布于 12-06 17:59:09.515

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:53:15.157

这是一个实施选择。

检查 STACK_TRACE 字段，您将获得可读的堆栈跟踪（包括您要查找的错误）。

[https://github.com/ACRA/acra/issues/67](https://github.com/ACRA/acra/issues/67)

# wpf - WPF：如何使屏幕阅读器从 TextBox 中读取文本

> ID：13747785
> 
> 赞同：0
> 
> 时间：2012-12-06T16:12:51.183
> 
> 标签：wpf, textbox, accessibility, ui-automation, jaws-screen-reader

我必须在我的 WPF 应用程序中实现 UI 可访问性，尤其是屏幕阅读器 Jaws。我有一个文本框，用户应该在其中输入一些文本。如何让 Jaws 读取用户刚刚插入的文本？

# python - 当轴限制发生变化时，很好地标记没有图例的线条？

> ID：13747786
> 
> 赞同：3
> 
> 时间：2012-12-06T16:12:56.073
> 
> 标签：python, matplotlib, plot, legend, labels

当情节上有很多线条时，图例并不总是标记它们的最佳方式。我经常做这样的事情来标记情节右侧的线条：

```
def p():
    fig, ax = plt.subplots()
    x = arange(1, 3, 0.01)
    for i,c in zip(range(4), ('r','g','b','m')):
        ax.plot(x, x**i, c=c, lw=2)
        ax.annotate('$x^%d$' % i, (1.01, x[-1]**i),
                    xycoords=('axes fraction', 'data'), color=c)
    return ax 
```

这只是一个简单的例子，只有几行。它看起来像这样：

```
>>> p() 
```

![在此处输入图像描述](../Images/de54e49ef93e0f9813010350d2399d37.png)

但是，如果我需要更改绘图的限制，则标签位于错误的位置：

```
>>> p().set_xlim((1.0, 2.0)) 
```

![在此处输入图像描述](../Images/dcc09834435aa349c82585050414816e.png)

**问题：**以不会因更改轴限制而破坏的方式直接在绘图上（不使用图例）标记线的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T12:40:22.243

你只需要这样做：

```
xlim = 2.0    
def p():
        fig, ax = plt.subplots()
        x = np.arange(1, 3, 0.01)
        for i,c in zip(range(4), ('r','g','b','m')):
            ax.plot(x, x**i, c=c, lw=2)
            ax.annotate('$x^%d$' % i, (1.01, min(x, key=lambda x:abs(x-xlim))**i),
                        xycoords=('axes fraction', 'data'), color=c)
        return ax 
```

差异

```
min(x, key=lambda x:abs(x-xlim)) 
```

这个东西在列表 X 中找到输入数字附近的数字

![在此处输入图像描述](../Images/3582182279f3b475555f4494e2f45b23.png)

# objective-c - 应用程序在后台时的 NSURLConnection

> ID：13747791
> 
> 赞同：1
> 
> 时间：2012-12-06T16:13:15.630
> 
> 标签：objective-c, ios, core-location, background-process, multitasking

我想知道当应用程序在后台时是否可以发送异步连接。这样做的原因是因为我需要发送用户的位置（从核心位置获取）以在每次位置更改时更新远程服务器中的数据库，即使应用程序不在前台也是如此。

我必须为此设置任何权限吗？当应用程序处于后台时，Apple 是否会拒绝应用程序处理连接？

提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T16:18:09.170

iOS 提供多任务 API，即即使您的应用程序在后台，也可以访问它的一些 API。这些服务是——

1.  本地通知
2.  背景音频
3.  后台任务
4.  背景位置

因此，您绝对可以`CoreLocation`在应用程序不在前台时发送位置更新。

此链接 - [iOS 多任务处理](http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-background-tasks/)具有在后台应用程序时启动您的服务的代码。分步说明

*   指定位置背景模式
*   通过使用`NSTimer`在后台使用`UIApplication:beginBackgroundTaskWithExpirationHandler:`
*   如果`x`时间小于`UIApplication:backgroundTimeRemaining`它的工作正常，如果`x`时间较大，则应在没有剩余时间之前再次启用（和禁用）位置管理器以避免后台任务被杀死。这确实有效，因为 location 是三种允许的后台执行类型之一。

SOURCE -[如何在我的 iOS 应用程序中每 n 分钟更新一次后台位置？](https://stackoverflow.com/questions/6347503/how-do-i-get-a-background-location-update-every-n-minutes-in-my-ios-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:26:05.207

在这里，来自苹果文档（[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW47](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW47)）

> 有几种方法可以在后台跟踪用户的位置，其中大多数实际上并不需要您的应用程序在后台连续运行：
> 
> - 重大变化的定位服务（推荐）
> 
> - 仅前台定位服务
> 
> -后台定位服务

但是您不能发送请求，因为唯一可能要做的事情是：-audio -location -voip -newsstand -Accessories & blutooth connection

所以我想你可以存储你所有的位置，并在应用程序再次进入前台后使用 NSURLConnection 发送它

# unique - 在 OpenLDAP 中创建具有唯一 uid 的用户帐户

> ID：13747795
> 
> 赞同：0
> 
> 时间：2012-12-06T16:13:20.787
> 
> 标签：unique, account, openldap, uid

我正在尝试在 OpenLDAP 中创建多个用户帐户（类是 OpenLDAPperson），我遇到的问题是 uid 属性没有被 LDAP 强制为 UNIQUE。

看起来只有对象类“帐户”强制执行 uid 唯一性，不幸的是，我似乎无法将它与 OpenLDAPperson 或 OrganizationalPerson 等对象类结合起来。

任何人都可以推荐创建用户的最佳实践并在 LDAP 中强制执行 uid 唯一性吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:48:56.723

我遇到了同样的问题并切换到 OpenDJ（以前称为 OpenDS）。它支持 UID 上的唯一索引。

# ruby-on-rails-3.2 - 忽略 cucumber-rails 目录

> ID：13747796
> 
> 赞同：1
> 
> 时间：2012-12-06T16:13:21.207
> 
> 标签：ruby-on-rails-3.2, gitignore

我可能在某个地方错过了这个。

我的 rails 3.2 项目有一个 cucumber-rails 目录，其中包含许多包含特定于我的机器的路径/设置的文件。我不会三思而后行，但该目录中也有大量的宝石。（文件夹大约是 150Mb）

```
my_project
|
|--- app/
|--- config/
|--- config.ru
|--- db/
|--- cucumber-rails/
|    +--- ruby/
|          |
|          +--- 1.9.1
|                |
|                +--- (and more) 
```

我不知道为什么这个文件夹甚至存在，因为我的其他 Rails 应用程序似乎都没有。

我非常倾向于 gitignore 并从我的 git 索引中清除整个目录，而不是将它放在共享项目和历史记录中。

是否有任何令人信服的理由***不***忽略整个 cucumber-rails 目录？我只是不想有一个无用的回购。

**我更新了这篇文章只是为了更清楚地了解我所看到的**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:32:29.540

看起来这个目录是错误的，一个异常。

我删除了它，对项目没有负面影响，所以我指出这是我问题的答案。

# wcf - WCF修改配置文件

> ID：13747799
> 
> 赞同：0
> 
> 时间：2012-12-06T16:13:28.723
> 
> 标签：wcf, web-config

我正在尝试以编程方式修改 WCF 行为（即修改配置文件部分）。

```
BehaviorsSection  bhsSection = (BehaviorsSection)this.configFile.GetSection("system.serviceModel/behaviors"); 
```

检索该部分后，我希望能够更新/修改该`serviceMetadata`部分并保存文件。

加载该部分后如何继续操作的任何想法？我无法找到可以投射和更改值的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:42:24.537

下面是一些示例代码，用于打开当前正在执行的应用程序的配置文件并修改 serviceMetadata 元素。

```
static void FindServiceMetadata()
{
  var config = ConfigurationManager.OpenExeConfiguration(Assembly.GetEntryAssembly().Location);
  var sg = ServiceModelSectionGroup.GetSectionGroup(config);
  foreach (ServiceBehaviorElement behavior in sg.Behaviors.ServiceBehaviors)
  {
    foreach (var item in behavior)
    {
      var metadata = item as ServiceMetadataPublishingElement;
      if (metadata == null) continue;
      metadata.HttpsGetEnabled = true;
    }
  }
  config.Save();
} 
```

这假定一个配置文件包含一个 system.serviceModel 部分，如下所示：

```
 <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="test">
          <serviceMetadata />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

# vb.net - Synclock 和 Parallel.for 中可能存在 lambda 冲突

> ID：13747801
> 
> 赞同：0
> 
> 时间：2012-12-06T16:13:35.743
> 
> 标签：vb.net, vb.net-2010, parallel.foreach

在以下包含 parallel.for 的嵌套循环中，是否适合在下面的同步锁中使用 lambda 计数器“j1”？该代码似乎有效——但我不知道我是否丢失了任何信息。

```
For i = 1 to Cnt

   ... a lot of code here

   Parallel.For(1, N + 1, Sub(j1)
                     Dim temp As Double = 0
                     temp += a * b * x(j1, i)
                     SyncLock lock
                        y(j1, i) += temp
                     End SyncLock
                End Sub)
Next i 
```

我宁愿将 parallel.for 用于“i”中的外部循环，但不知道 lambda 如何影响所有这些工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:33:27.623

j1 的使用适合这种情况。由于 lambda 语句中的代码，我怀疑你的收益是微乎其微的。Synclock 本质上将其变为几乎同步执行。我会测试性能并且可能只做一个简单的 For 循环。如果您在 Synclock 之前有更多的处理工作要做，您可能会开始看到性能的提升。除此之外，我没有看到任何无法正常运行的东西。

将 Parallel.For 放在外部循环上可能会提高性能，但整个方法必须包含在 Lambda 语句中。

# recursion - 性能问题：段树、更新函数

> ID：13747804
> 
> 赞同：0
> 
> 时间：2012-12-06T16:13:46.550
> 
> 标签：recursion, profiling, segment-tree

我用这样的功能更新段树。分析说这是瓶颈：

```
void update (int tree[], int root, int left, int right, int pos, double val)
{
    if (left == right)
    {
        data[tree[root]] = val;
    }
    else
    {
        int middle = (left + right) / 2;
        if (pos <= middle)
            update(tree, root*2, left, middle, pos, val);
        else
            update(tree, root*2+1, middle+1, right, pos, val);
        tree[root] = indexOfMax(tree, tree[root*2], tree[root*2+1]); // simple comparations
    }
}
// indexOfMax is just a simple comparation
int indexOfMax(int tree[], int a, int b)
{
    //cout << data[tree[a]] << " > " << data[tree[b]] << " ? " << tree[a] << " : " << tree[b] << endl;
    return data[a] > data[b] ? a : b;
} 
```

虽然内存操作很快，但我想知道它是否是由递归开销引起的，而它的深度通常不会超过 20。

我从原始分析器中得到的是：

*   4.39434ms - 对数据进行单次二进制搜索的平均时间
*   2642.94ms - 一次更新的时间
*   19.9097ms - 单个 RMQ 查询的时间。

所以.. 一次更新所花费的时间是戏剧性的:)。

**答案**：找到了一个隐藏的 std::find over map。

# javascript - 无法覆盖 ipad 上的 Youtube iframe

> ID：13747807
> 
> 赞同：0
> 
> 时间：2012-12-06T16:13:54.307
> 
> 标签：javascript, ipad, iframe, youtube

[jsfiddle](http://jsfiddle.net/R3k6s/6/)

```
<iframe class="youtube-player" type="text/html" width="640" height="385" src="http://www.youtube.com/embed/FPCrhT0q5Ns?wmode=opaque" frameborder="0">
</iframe>
<a class="close"></a>
.close {
    width: 50px; height: 50px;
    background: #fff;
    position: absolute;
    left: 600px;
    top: 0;
    z-index: 2147483638;
    cursor: pointer;
}​
$(".close").bind("click touchend", function() {
    alert("");
});​ 
```

1.  在 ipad 中打开 jsfiddle（仅限）
2.  播放视频
3.  尝试点击白色按钮

结果：点击不起作用

PS 不要告诉我有关**wmode**的信息。在发布问题之前，我已经尝试了所有可能的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:18:01.740

`wmode=transparent`在 iframe中的`src`url 中添加参数 of

[更新了 jsfiddle](http://jsfiddle.net/R3k6s/8/)

# jquery - 使用 jQuery 从 dom 中删除特定数据

> ID：13747808
> 
> 赞同：1
> 
> 时间：2012-12-06T16:13:54.827
> 
> 标签：jquery, dom, optimization, code-cleanup

我这里有一个创建工具提示的函数，这些工具提示是在具有无限滚动的页面上创建的（例如，一旦我们点击页面底部，该函数就会再次被调用），也许值得一提的是我也使用 jScrollPane 作为一个自定义滚动，它与我的工具提示功能同时重新初始化。

问题在于，每次重新初始化函数时，我的工具提示都会一次充满多个图像，每次重新初始化都会在无限滚动回调中重复。

这是功能：

```
function tooltipsInit() {

      //Setting the targeted elements variable
      var appliesTo = '.products .products-grid li .product-image-visible a, .featured .products-grid li .product-image-visible a, .new .products-grid li .product-image-visible a, .popular .products-grid li .product-image-visible a';
      jQuery(appliesTo).mouseenter(function() {
        jQuery(this).children('p').addClass('active');
        if((navigator.platform.indexOf("iPad") != -1) || (navigator.platform.indexOf("iPhone") != -1)) {
          //disabling the tooltips on iPad/iPhone
        } else {
          jQuery('body .wrapper').append('<div class="hcontainer"><div class="image"></div><div class="title"></div></div>');
          jQuery(this).children('img').clone().appendTo('.hcontainer .image');
          title = jQuery(this).children('img').attr('alt');
          jQuery('.hcontainer .title').append(title);
          jQuery('.hcontainer').fadeIn(200);

          function removeDuplicates() {
            //THIS IS MY QUESTION RELATED TO
            jQuery.removeData();
          }
          removeDuplicates();
        }
      });
      jQuery(appliesTo).mousemove(function(e) {

        offsetX = 235;
        offsetY = 175;

        windowHeight = jQuery(window).height();
        windowWidth = jQuery(window).width();
        ypos = 0;
        xpos = 0;

        if((e.pageY + 355) < windowHeight) {
          ypos = e.pageY + offsetY;
        } else {
          ypos = e.pageY - (offsetY + 30);
        }

        if((e.pageX + 455) < windowWidth) {
          xpos = e.pageX + offsetX;
        } else {
          xpos = e.pageX - (offsetX + 30);
        }

        jQuery(".hcontainer").css("top", (ypos) + "px").css("left", (xpos) + "px");
      });

      jQuery(appliesTo).mouseleave(function() {
        jQuery(this).children('p').removeClass('active');
        jQuery('.hcontainer').fadeOut(100).remove();

      });

    }; 
```

像这样我正在清除整个 DOM 数据（对吗？），我在 Chrome 开发工具中遇到了一些错误。

```
Uncaught TypeError: Cannot read property 'nodeName' of undefined jquery-1.8.3.min.js:1719
jQuery.extend.acceptData jquery-1.8.3.min.js:1719
jQuery.extend.removeData jquery-1.8.3.min.js:1633
removeDuplicates custom-scripts.js:160
(anonymous function) custom-scripts.js:162
jQuery.event.special.(anonymous function).handle jquery-1.8.3.min.js:3344
jQuery.event.dispatch jquery-1.8.3.min.js:3058
elemData.handle.eventHandle 
```

**我该怎么做才能准确地选择添加到 DOM 的数据并只删除它？**

像：`removeData(mytooltipfunctionsData)`

同样在同一主题上，我对 Javascript/jQuery 还很陌生，您将如何改进该功能？

* * *

**编辑**

我很愚蠢......我仔细看看你在那里写的东西，我仍然在一个会被调用的函数中运行它......然后我意识到你在那里所做的不需要一个函数，因为你说，这是事件委托:)。

**谢谢，它工作！无限滚动没有重复和错误。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:16:12.353

jQuery`removeData`必须传递一个 DOM 节点，而不是一个 jQuery 对象。`jQuery.removeData($(this));`例如，您不需要这样做，或者`jQuery.removeData(this)`如果您正在使用选择器，`jQuery.removeData($('.selector')[0])`

关于重复项，如果当前 dom 已经初始化，您可能会向您的函数发出信号，例如

```
jQuery(appliesTo).each(function(){
   var $this = $(this);

   if (!$this.data('initialized')){ // skip in case it's been already initialized
     $this.data('initialized', true);

     $this.on({
       'mouseenter': function(){...},
       'mousemove': function(){...},
       'mouseleave': function(){...}
     });
   }

}); 
```

而不是`removeData`, IMO, 你应该使用`off()`, like`$this.off()`将删除匹配元素中的所有绑定事件。另一种方法是使用事件委托，因此您不需要重新初始化，它只适用于新旧元素，如下所示：

```
var appliesTo = '.products .products-grid li .product-image-visible a, .featured .products-grid li .product-image-visible a, .new .products-grid li .product-image-visible a, .popular .products-grid li .product-image-visible a';

jQuery(document)
.on('mouseenter', appliesTo, function(){...})  
.on('mouseleave', appliesTo, function(){...})  
.on('mousemove', appliesTo, function(){...}); 
```

`jQuery.on`是当前绑定事件或事件委托的首选方式。第二种方式代表，因为`jQuery(document)`将始终存在，无论来自 的`appliesTo`任何元素，添加到页面的任何元素都将已经绑定元素，而不是每次手动启动它（无论是页面加载，ajax 事件等）

# android - Android EditText Gmail 喜欢字段

> ID：13747809
> 
> 赞同：38
> 
> 时间：2012-12-06T16:14:00.533
> 
> 标签：android, gmail, android-edittext

我在一个应用程序上工作，我正在尝试制作一个类似“收件人”字段的 gmail，其中包含一旦添加就无法编辑的块，而只是完全删除（如附图中所示）。如果它也可以有图像，那将是完美的。 ![邮箱](../Images/7376cdc49368d4bea990994d09b1cf75.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-06T16:30:41.943

[Roman Nurik 在Google+ 帖子](https://plus.google.com/113735310430199015092/posts/WUd7GrfZfiZ)中讨论了这种技术——称为“芯片” 。反过来，他[在 StackOverflow 上指出 Macarse 的答案](https://stackoverflow.com/questions/8090711/android-labels-or-bubbles-in-edittext/8128848#8128848)。反过来，它们指向您在股票消息传递客户端中看到[的此 UI 的实现。](https://android.googlesource.com/platform/packages/apps/Mms/+/refs/heads/master/src/com/android/mms/ui/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-03T13:55:28.403

我在 github 上开源了我们的解决方案[TokenAutoComplete](https://github.com/splitwise/TokenAutoComplete)。我的已经测试回 2.2。我设计了我的代码以允许非常简单的实现和自定义。

这是使用我的库的示例实现：

子类 TokenCompleteTextView

```
public class ContactsCompletionView extends TokenCompleteTextView {
    public ContactsCompletionView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected View getViewForObject(Object object) {
        Person p = (Person)object;

        LayoutInflater l = (LayoutInflater)getContext().getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        LinearLayout view = (LinearLayout)l.inflate(R.layout.contact_token, (ViewGroup)ContactsCompletionView.this.getParent(), false);
        ((TextView)view.findViewById(R.id.name)).setText(p.getEmail());

        return view;
    }

    @Override
    protected Object defaultObject(String completionText) {
        //Stupid simple example of guessing if we have an email or not
        int index = completionText.indexOf('@');
        if (index == -1) {
            return new Person(completionText, completionText.replace(" ", "") + "@example.com");
        } else {
            return new Person(completionText.substring(0, index), completionText);
        }
    }
} 
```

contact_token 的布局代码（您可以在此处使用任何类型的布局，或者如果您想要令牌中的图像，可以将 ImageView 放入其中）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content">

    <TextView android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/token_background"
        android:padding="5dp"
        android:textColor="@android:color/white"
        android:textSize="18sp" />

</LinearLayout> 
```

令牌背景可绘制

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <solid android:color="#ffafafaf" />
    <corners
        android:topLeftRadius="5dp"
        android:bottomLeftRadius="5dp"
        android:topRightRadius="5dp"
        android:bottomRightRadius="5dp" />
</shape> 
```

人物对象代码

```
public class Person implements Serializable {
    private String name;
    private String email;

    public Person(String n, String e) { name = n; email = e; }

    public String getName() { return name; }
    public String getEmail() { return email; }

    @Override
    public String toString() { return name; }
} 
```

示例活动

```
public class TokenActivity extends Activity {
    ContactsCompletionView completionView;
    Person[] people;
    ArrayAdapter<Person> adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        people = new Person[]{
                new Person("Marshall Weir", "marshall@example.com"),
                new Person("Margaret Smith", "margaret@example.com"),
                new Person("Max Jordan", "max@example.com"),
                new Person("Meg Peterson", "meg@example.com"),
                new Person("Amanda Johnson", "amanda@example.com"),
                new Person("Terry Anderson", "terry@example.com")
        };

        adapter = new ArrayAdapter<Person>(this, android.R.layout.simple_list_item_1, people);

        completionView = (ContactsCompletionView)findViewById(R.id.searchView);
        completionView.setAdapter(adapter);
        completionView.setPrefix("To: ");
    }
} 
```

布局代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <com.tokenautocomplete.ContactsCompletionView
        android:id="@+id/searchView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

# php - 从嵌套的 MySQL Select 显示

> ID：13747813
> 
> 赞同：0
> 
> 时间：2012-12-06T16:14:16.537
> 
> 标签：php, mysql, select, nested

我正在遍历一个带有循环的表，以将所有结果返回到一个漂亮的表中。直到子查询需要执行之前它都做得很好。子查询查看另一个表并使用起始循环中的 $office 值来查找信息，从那里它只是汇总整数值并将其分配给 $paid。

由于某种原因，两个循环在返回第一个结果并输出 $paid 后都会停止。甚至有可能完成我正在做的事情吗？我试图解决这个问题，似乎我可以对值进行硬编码并为每个结果集设置单独的变量，但这似乎需要做很多工作。我只想显示它从第一个循环返回的每个结果集的 $paid 整数。希望这一切都有意义。我非常感谢给出的任何建议。

```
$mysqli = new mysqli ( $db_hostname, $db_username, $db_password, $db_name );
    $query = "select * from `drawer` where date(`date`) = '$mysql_date' order by `office`"; // select result set for selected date and order by office name
    $result = $mysqli->query($query);
    while ( $row = $result->fetch_assoc () ) {

echo "<tr class=table_border>\n"; //display results
echo "<td class=table_rows nowrap width=10%>&nbsp;".$row['office']."</td>\n"; // return office name
$office = $row['office']; // grab the office from the first loop to use it in the second loop
echo "<td class=table_rows nowrap width=10%>&nbsp;".$row['manager']."</td>\n"; // return manager name
echo "<td class=table_rows nowrap width=10%>&nbsp;".$row['scash']."</td>\n"; // display integer value
echo "<td class=table_rows nowrap width=10%>&nbsp;".$row['ecash']."</td>\n"; // display integer value

$newquery = "select * from `offer_det` where `office` = '$office' and date(date) = curdate()"; // subquery to display data from another table and insert for each row when the first loop starts
$resultquery = $mysqli->query($newquery);
while ($row=$resultquery->fetch_assoc()) {
    $paid += $row['paid'];
}
echo "<td class=table_rows nowrap width=10%>&nbsp;".$paid."</td>\n"; // both loops end here
echo "<td class=table_rows nowrap width=10%>&nbsp;".$row['add']."</td>\n"; // should return integer value
echo "<td class=table_rows nowrap width=10%>&nbsp;".$row['remove']."</td>\n"; // should return integer
echo "<td class=table_rows nowrap width=10%>&nbsp;".$row['total']."</td>\n"; // should return integer
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:16:19.640

您正在覆盖`$row`内部 while 循环

改变

```
while ($row=$resultquery->fetch_assoc()) {
    $paid += $row['paid'];
} 
```

至

```
while ($row1=$resultquery->fetch_assoc()) {
    $paid += $row1['paid'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:16:54.447

您在内部 while 循环中分配 $row - 它已经分配给外部循环。尝试在内部循环中将其更改为不同的变量名，

```
while ($row1=$resultquery->fetch_assoc()) {
    $paid += $row1['paid'];
} 
```

# asp.net - 将 div 中的 HTML 保存为图像

> ID：13747814
> 
> 赞同：2
> 
> 时间：2012-12-06T16:14:18.120
> 
> 标签：asp.net, html, css

我有一个 div，用户在其中放置了不同的图像元素。它们还旋转、调整大小和更改了不透明度。一切都是用 CSS 完成的，样式被内联放置在 div 内的每个元素上。我现在需要一种将“艺术品”保存为图片的方法。我正在使用 CSS3，因此将 HTML 转换为图像的渲染引擎必须支持这一点。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:17:19.763

由于您无论如何都在使用 CSS3，因此使用新的 Canvas API 可能也是安全的：[https ://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas)

您可以使用 getImageData() 保存到位图。

# html - 背景错误地显示为表格标题周围的边框

> ID：13747815
> 
> 赞同：3
> 
> 时间：2012-12-06T16:14:28.020
> 
> 标签：html, css, outlook-2010

我在 Outlook 2010 中遇到 HTML/CSS 渲染问题。

下面的 HTML 在我测试过的所有其他电子邮件客户端（Thunderbird、Outlook 2003、iPhone、各种基于网络邮件的产品）以及各种浏览器中都能正确呈现。但在 Outlook 2010 中，表格标题周围有一个边框，该边框与它下方标签的背景颜色相同。

![Outlook 2010 中带有标题的 HTML 表格](../Images/b101a43ab03a9d1af39858dff3a740d9.png)

```
<!DOCTYPE html>
<html>
<body>
  <div style="padding: 0.3em">
    <p>Here is a nice background from St Pancras Station with the Olympic Rings in the background</p>
    <hr />

    <table style=" width: auto; color: #000; border: 1px solid #000; border-collapse: collapse; background: #FFF;">
      <caption style=" font-style: italic; text-align: left; color: #000; background: #FFF;">Files attached to this message</caption>
      <tr>
        <th style="border: 1px solid #000; padding: 0.3em; background: #ddd;  text-align: left; vertical-align: top;">Filename</th>
        <th style="border: 1px solid #000; padding: 0.3em; background: #ddd;  text-align: left; vertical-align: top;">Size</th>
      </tr>

      <tr>
        <td style="border: 1px solid #000; padding: 0.3em; text-align: left; vertical-align: top; width: 75%;">6315755363_7fbe95fc66_o.jpg</td>
        <td style="border: 1px solid #000; padding: 0.3em; text-align: left; vertical-align: top; width: 25%;">5 MB</td>
      </tr>

    </table>

    <p>Please <a href="https://********/message/Hreh4oqPUR9ctdJ59Nkm4N">click here</a> to download the attachments.</p>

    <p>The attachments are available until: <b>Tuesday, 11 December.</b></p>
    <hr />
  </div>

</body>
</html> 
```

任何人都可以建议解决此问题吗？

**编辑**

如果您想对此进行调试，您可以将 HTML 保存在一个文件中并将其加载到 Word 2010 中，因为它使用相同的渲染引擎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:12:38.733

尝试在之后添加幻像行`<caption>`

```
<caption style=" font-style: italic; text-align: left; color: #000; background: #FFF;">Files attached to this message</caption>
<tr style="background:#FFF; display:none;"></tr> <!--phantom row-->
<tr>
    <th style="border: 1px solid #000; padding: 0.3em; background: #ddd;  text-align: left; vertical-align: top;">Filename</th>
    <th style="border: 1px solid #000; padding: 0.3em; background: #ddd;  text-align: left; vertical-align: top;">Size</th>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:07:58.310

```
<!DOCTYPE html>
<html>
<body>
  <div style="padding: 0.3em">
    <p>Here is a nice background from St Pancras Station with the Olympic Rings in the background</p>
    <hr />
    <table style=" width: auto; color: #000;  border-collapse: collapse;">
        <tr>
            <td style="border: 1px solid #fff; border-bottom-color: #000; background: #fff; text-align: left; vertical-align: top;">
                <caption style=" font-style: italic; text-align: left; color: #000;">Files attached to this message</caption>
            </td>
        </tr>
        <tr>
        <th style="border: 1px solid #000; padding: 0.3em; background: #ddd;  text-align: left; vertical-align: top;">Filename</th>
        <th style="border: 1px solid #000; padding: 0.3em; background: #ddd;  text-align: left; vertical-align: top;">Size</th>
      </tr>

      <tr>
        <td style="border: 1px solid #000; padding: 0.3em; text-align: left; vertical-align: top; width: 75%;background: #FFF;">6315755363_7fbe95fc66_o.jpg</td>
        <td style="border: 1px solid #000; padding: 0.3em; text-align: left; vertical-align: top; width: 25%;background: #FFF;">5 MB</td>
      </tr>

    </table>

    <p>Please <a href="https://********/message/Hreh4oqPUR9ctdJ59Nkm4N">click here</a> to download the attachments.</p>

    <p>The attachments are available until: <b>Tuesday, 11 December.</b></p>
    <hr />
  </div>
</body>
</html> 
```

# python - 这个括号的用途是什么：Python中的[0]

> ID：13747821
> 
> 赞同：-1
> 
> 时间：2012-12-06T16:15:06.703
> 
> 标签：python, list

我发现了一些代码可以帮助我在特定文件夹中完成递增（数字）文件。但是，我不明白为什么在代码的某个部分中使用了 [0]。这是部分代码，谢谢：

```
...
...
numList = [0]
for dlogs in sampleList:
    i = os.path.splitext(dlgs)[0] #Why here?
    try:
        num = re.findall('[0-9]+$', i)[0]    # and here?
        numList.append(int (num))

        ...
        ...
        ... 
```

我现在明白得很清楚了。我以前看不到……谢谢。对于那些投票否决我的问题的人，每个人都必须从某个地方开始。如果我的问题看起来太初级，为什么不节省你的精力，直接跳过我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:20:04.223

在您询问的行中，这些函数返回列表，并且每个列表的第一项（索引 0）被分配给一个变量。例如：

```
>>> os.path.splitext("foo.txt")
('foo', '.txt')
>>> ('foo', '.txt')[0]
'foo' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T16:19:45.870

这是用于将数组或变量集初始化为 0

# c# - WPF：加载 XAML 文件，其中包含 x:Code 元素

> ID：13747822
> 
> 赞同：3
> 
> 时间：2012-12-06T16:15:08.463
> 
> 标签：c#, .net, wpf, xaml

我需要加载并使用 XAML 文件。

我编写了简单的 XAML 文件：

```
<Window      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="150" d:DesignWidth="300" Title="My Window">
    <x:Code>
        <![CDATA[
            void btnMyButton_Click_1(object sender, RoutedEventArgs e) {
                MessageBox.Show("Hello world", "Message", MessageBoxButton.OK, MessageBoxImage.Information);
            }
        ]]>
    </x:Code>
    <Grid>
        <Button x:Name="btnMyButton" x:FieldModifier="public" Margin="10" Padding="10" 
                FontSize="20" Click="btnMyButton_Click_1">My button</Button>
    </Grid>
</Window> 
```

然后我尝试在我的代码中加载这个 XAML：

```
String curDir = io.Path.GetDirectoryName(typeof(Lisp_Wpf.Commands).Assembly.Location);
String xamlFileName = "MyWindow.xaml";
String fileFullName = io.Path.Combine(curDir, xamlFileName);
DependencyObject depObj = default(DependencyObject);
using (io.FileStream fs = new io.FileStream(fileFullName, io.FileMode.Open)) {
    depObj = XamlReader.Load(fs) as DependencyObject;
    fs.Close();
}
if (depObj != null && depObj is Window) {
    Window win = (Window)depObj;
    acad.ShowModalWindow(win);
} 
```

但我得到例外：

> System.Windows.Markup.XamlParseException 发生：'无法创建'无法从文本'btnMyButton_Click_1'创建'Click'。' 行号“16”和行位置“31”。

我在[这里](http://msdn.microsoft.com/en-us/library/ms750494.aspx)找到了这样的信息：

> 在 x:Code for WPF 中声明的代码有几个明显的限制： ... x:Class 指令必须在父根元素上提供。...

但是如果我在我的`Window`元素中添加`x:Class`属性：

```
x:Class="Lisp_Wpf.MainWindow" 
```

然后我得到异常：

> '指定的类名'Lisp_Wpf.MainWindow'与实际的根实例类型'System.Windows.Window'不匹配。删除 Class 指令或通过 XamlObjectWriterSettings.RootObjectInstance 提供一个实例。行号“1”和行位置“14”。

在我的 MS Visual Studio 项目中，XML 文件具有以下属性： Build Action = None; 复制到输出目录 = 始终复制；自定义工具 =（空字符串）；

我删除了这个 XAML 的部分 CS 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:30:47.360

如果您想在运行时加载 xaml，则不能在 XAML 文件后面提供任何代码。可能您可以附加按钮单击的一般事件并在运行时识别控件 - 只需查看以下链接并尝试一下。

[通过运行时加载 XAML XML？](https://stackoverflow.com/questions/4077318/loading-xaml-xml-through-runtime/4077786#4077786)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-24T16:25:17.800

一般提示（我没有重现您的具体问题）：

**在 WPF 中，如果 Visual Studio 中的生成操作**设置为“资源”（您可以在 xaml 文件的属性下找到该设置），也会出现此错误。**将 Build Action 设置为“Page”，它将编译！**

# openlaszlo - OpenLaszlo 拖动和旋转问题

> ID：13747830
> 
> 赞同：1
> 
> 时间：2012-12-06T16:15:45.077
> 
> 标签：openlaszlo, lzx

我编写了一个用于旋转和拖动视图的示例代码。两者都在 openlaszlo swf 运行时中正常工作，但在 DHTML 运行时中不能正常工作。

在 OL 4.9 和 openlaszlo 5.0 中，我看到有一个小的位移。我附上了一个 git hub 链接

[https://github.com/karthick6891/cvs/tree/master/rotateanddrag](https://github.com/karthick6891/cvs/tree/master/rotateanddrag)

谁能告诉我这里有什么问题？

# c++ - 在 Windows 7 64 位中使用 32 位 shell 扩展

> ID：13747836
> 
> 赞同：8
> 
> 时间：2012-12-06T16:16:07.287
> 
> 标签：c++, windows, com, 32bit-64bit, windows-shell

我想开发一个与 Windows XP SP2（32 位）和 Windows 7 64 位兼容的 shell 扩展（上下文菜单处理程序）。

是否可以在 64 位 Windows 中运行 32 位 shell 扩展，或者必须将 shell 扩展移植/重建为 64 位才能在 Windows 7 64 位中使用？

在 64 位操作系统中使用 32 位 shell 扩展是否有任何缺点/已知问题？

32 位应用程序在 64 位 Windows 上运行得很好，但我不确定 shell 扩展，因为如果我的理解是正确的，shell 扩展是加载到资源管理器进程中的进程*内*COM 服务器，它应该是 64- 64 位 Windows 中的位进程...还是为在 64 位操作系统中运行的 32 位 shell 扩展提供的“32 位仿真”形式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T02:26:39.073

shell 扩展只是一个 DLL，规则是 32 位应用程序只能加载 32 位 DLL，而 64 位应用程序只能加载 64 位 DLL。没有办法解决这个问题。

32 位 shell 扩展在 64 位系统上可能仍然有用，因为这意味着任何加载 shell 扩展的 32 位第三方应用程序都可以工作。例如，TortoiseSVN 附带并安装了 32 位和 64 位版本，等等，在 64 位 Windows 上，您仍然可以从 32 位应用程序（如第三方文件管理器）访问 TortoiseSVN 上下文菜单。

但是资源管理器本身在 64 位 Windows 上是 64 位本机的，因此如果您希望它在资源管理器中工作，您需要一个 64 位版本的扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:33:00.157

Shell 扩展是 COM 组件。如果您将其安装为进程外服务器，Windows (DCOM) 应该负责所有 32 <-> 64 位编组。

然后 MIDL 编译器将创建 64 位存根，该存根正在加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-02T08:03:24.100

您可以使用 32 位资源管理器，例如64 位 Windows 中的[xplorer² 。](http://www.zabkat.com/)它们可以处理 32 位 DLL 扩展，这些扩展可用于搜索内容、预览数据以及也显示在上下文菜单中的那些。内置资源管理器是 64 位的，它忽略了 32 位扩展。

# php - 在 PHP 中对类似的十六进制代码进行分组

> ID：13747841
> 
> 赞同：7
> 
> 时间：2012-12-06T16:16:17.357
> 
> 标签：php, colors, hex

我有以下颜色代码：

> f3f3f3
> f9f9f9

在视觉上，这两种颜色代码是相似的。如何将它们分组为一种颜色，或删除其中一种？

如果我尝试使用 base_convert($hex, 16, 10) 并获得值之间的差异，问题是某些颜色与 int 值相似，但在视觉上确实不同。例如：

> #484848 = 4737096（灰色）
> #4878a8 = 4749480（蓝色） - 视觉上存在巨大差异，但作为 int 值差异很小

和

> #183030 = 1585200（灰色）
> #181818 = 1579032（灰色）- 两种方式都可以
> 
> #4878a8 = 4749480（蓝色）
> #a81818 = 11016216（红色） - 差异很大，无论是视觉还是 int 值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T16:21:32.073

使用[`hexdec`](http://php.net/manual/en/function.hexdec.php)函数将十六进制颜色代码转换为其 RGB 等效值。示例（取自[十六进制](http://php.net/manual/en/function.hexdec.php)页面）：

```
<?php
/**
 * Convert a hexa decimal color code to its RGB equivalent
 *
 * @param string $hexStr (hexadecimal color value)
 * @param boolean $returnAsString (if set true, returns the value separated by the separator character. Otherwise returns associative array)
 * @param string $seperator (to separate RGB values. Applicable only if second parameter is true.)
 * @return array or string (depending on second parameter. Returns False if invalid hex color value)
 */                                                                                                 
function hex2RGB($hexStr, $returnAsString = false, $seperator = ',') {
    $hexStr = preg_replace("/[^0-9A-Fa-f]/", '', $hexStr); // Gets a proper hex string
    $rgbArray = array();
    if (strlen($hexStr) == 6) { //If a proper hex code, convert using bitwise operation. No overhead... faster
        $colorVal = hexdec($hexStr);
        $rgbArray['red'] = 0xFF & ($colorVal >> 0x10);
        $rgbArray['green'] = 0xFF & ($colorVal >> 0x8);
        $rgbArray['blue'] = 0xFF & $colorVal;
    } elseif (strlen($hexStr) == 3) { //if shorthand notation, need some string manipulations
        $rgbArray['red'] = hexdec(str_repeat(substr($hexStr, 0, 1), 2));
        $rgbArray['green'] = hexdec(str_repeat(substr($hexStr, 1, 1), 2));
        $rgbArray['blue'] = hexdec(str_repeat(substr($hexStr, 2, 1), 2));
    } else {
        return false; //Invalid hex color code
    }
    return $returnAsString ? implode($seperator, $rgbArray) : $rgbArray; // returns the rgb string or the associative array
} ?> 
```

输出：

```
hex2RGB("#FF0") -> array( red =>255, green => 255, blue => 0)
hex2RGB("#FFFF00) -> Same as above
hex2RGB("#FF0", true) -> 255,255,0
hex2RGB("#FF0", true, ":") -> 255:255:0 
```

比，得到红色、绿色和蓝色的增量，得到颜色距离。

# postgresql - 我可以将 flyway 配置为忽略元数据表中的安装列吗？

> ID：13747842
> 
> 赞同：0
> 
> 时间：2012-12-06T16:16:18.533
> 
> 标签：postgresql, flyway

我们将flyway与cloudfoundry一起使用。简而言之，我们无法控制数据库的用户名/密码（根据设计），它是一个超过 30 个字符的非常长的字符串。当我尝试运行迁移时，出现以下错误：

```
flyway.core.api.FlywayException: Unable to insert metadata table row for version 0
... stacktrace ...
Caused by: org.postgresql.util.PSQLException: ERROR: value too long for type character varying(30)
... more stacktrace ... 
```

我可以将 flyway 配置为忽略元数据表中的安装列吗？我怀疑这可以通过使用更大的列构建 flyway 或连接用户名来解决。

**编辑**

我可以通过登录数据库并手动将列扩展到 50 个字符来缓解这个问题：

```
alter table schema_version alter column installed_by set data type character varying(50); 
```

它仍然是设置中的手动步骤，应该是不干涉的，所以这可能仍然是 flyway 中的功能请求（支持更大的用户名）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:39:08.867

根据 Axel 的评论，我在[此处](https://code.google.com/p/flyway/issues/detail?id=383&colspec=ID%20Status%20Component%20Database%20Summary%20Reporter%20Stars)提交了增强请求。

# java - 简单地将 Eclipse RCP 应用程序限制为仅以英语运行

> ID：13747844
> 
> 赞同：0
> 
> 时间：2012-12-06T16:16:21.600
> 
> 标签：java, eclipse, internationalization, rcp

我有一个相当简单的问题，但我找不到任何有帮助的东西。

我正在构建一个不需要以不同语言本地化的 Eclipse RCP 应用程序。事实上：我希望它只提供英文用户界面。

所以，我所有的视图、编辑器、菜单都很好地以我想要的方式显示为英文。

但是：我使用来自给定 Eclipse 插件的属性视图和其他东西——而且它们都使用我系统的语言（德语）。我的 UI 现在看起来完全不适合我根本不想要的混合语言。

所以，我的问题不是如何正确地国际化应用程序，而是不让它显示除英语之外的任何内容，无论它运行在什么系统上。

应该，很容易，不是吗？

我尝试用这个设置默认语言环境：

```
Locale.setDefault(Locale.ENGLISH); 
```

在 Application 类的 start 方法中，但这根本没有帮助。为什么？它从哪里获得语言？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:38:52.460

您可以查看以下运行时选项来配置 Eclipse 平台。

[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fruntime-options.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fruntime-options.html)

**osgi.nl**是使用所需语言环境运行平台的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:49:44.337

转到*启动*选项卡`.product`中的文件。在“*所有平台选项卡”中的“**启动参数*”部分：

 ***```
-nl en 
```

测试前不要忘记导出产品。如果您想使用 Eclipse 启动您的应用程序，请将上一行放在“*参数*”选项卡中的“*运行配置*”中***

# actionscript-3 - Flash CS6 Actionscript 3.0 按钮翻转迫使影片剪辑无法控制地播放

> ID：13747845
> 
> 赞同：2
> 
> 时间：2012-12-06T16:16:25.110
> 
> 标签：actionscript-3, flash, button, movieclip, rollover

我是 Adob​​e Flash CS6 的 Actionscript 3.0 的初学者。我正在尝试为网络作品集制作一个基本的、简单的动画交互式徽标，并且在尝试修复徽标中三角形的翻转问题时遇到了问题。使用我自己学习的当前编码，我能够使用电影剪辑而不是按钮来获得很好的动画和反应。但是，即使您试图将鼠标悬停在其后面的影片剪辑上，执行此方法也会导致舞台上最前面的影片剪辑的“命中框”播放其动画。

这是有问题的网页：

[http://inancarrow.wix.com/home](http://inancarrow.wix.com/home)

请注意，当您滚动到黄色三角形的左角或底角时，蓝色的“游戏”动画或绿色的“技能”动画会淡入并播放，而不是黄色的“连接”动画。

我试图通过尝试将影片剪辑转换为按钮来解决这个小而烦人的问题，当人们将鼠标悬停在形状上时可以做出准确的响应。结果是所有具有动画的影片剪辑都无法控制地播放并循环播放它们的动画。从我所做的搜索来看，它与嵌套电影剪辑有关......

我花了太多时间试图找出问题所在以及如何自己解决问题，这就是为什么我要寻求帮助、建议或洞察力，以了解如何解决重叠翻转问题，或如何解决修复我的movieClips 无法控制地播放。

这是我一直在使用的代码：

```
RedIFader.addEventListener(MouseEvent.ROLL_OVER, RedIOver);
RedIFader.addEventListener(MouseEvent.ROLL_OUT, RedIOut);
//RedIFader.addEventListener(MouseEvent.ROLL_OVER, RedIClick);

function RedIOver(event:MouseEvent):void{
    BioFadeIn.gotoAndPlay("BioFadeInOver")
    BlueAFader.gotoAndPlay("BlueAFaderOver")
    GreenAFader.gotoAndPlay("GreenAFaderOver")
    YellowNFader.gotoAndPlay("YellowNFaderOver")
}

function RedIOut(event:MouseEvent):void{
    BioFadeIn.gotoAndPlay("BioFadeInOut")
    BlueAFader.gotoAndPlay("BlueAFaderOut")
    GreenAFader.gotoAndPlay("GreenAFaderOut")
    YellowNFader.gotoAndPlay("YellowNFaderOut")
}

BlueAFader.addEventListener(MouseEvent.ROLL_OVER, BlueAOver);
BlueAFader.addEventListener(MouseEvent.ROLL_OUT, BlueAOut);
//BlueAFader.addEventListener(MouseEvent.ROLL_OVER, BlueAClick);

function BlueAOver(event:MouseEvent):void{
    GamesFadeIn.gotoAndPlay("GamesFadeInOver")
    RedIFader.gotoAndPlay("RedIFaderOver")
    GreenAFader.gotoAndPlay("GreenAFaderOver")
    YellowNFader.gotoAndPlay("YellowNFaderOver")
}

function BlueAOut(event:MouseEvent):void{
    GamesFadeIn.gotoAndPlay("GamesFadeInOut")
    RedIFader.gotoAndPlay("RedIFaderOut")
    GreenAFader.gotoAndPlay("GreenAFaderOut")
    YellowNFader.gotoAndPlay("YellowNFaderOut")
}

GreenAFader.addEventListener(MouseEvent.ROLL_OVER, GreenAOver);
GreenAFader.addEventListener(MouseEvent.ROLL_OUT, GreenAOut);
//GreenAFader.addEventListener(MouseEvent.ROLL_OVER, GreenAClick);

function GreenAOver(event:MouseEvent):void{
    SkillsFadeIn.gotoAndPlay("SkillsFadeInOver")
    RedIFader.gotoAndPlay("RedIFaderOver")
    BlueAFader.gotoAndPlay("BlueAFaderOver")
    YellowNFader.gotoAndPlay("YellowNFaderOver")
}

function GreenAOut(event:MouseEvent):void{
    SkillsFadeIn.gotoAndPlay("SkillsFadeInOut")
    RedIFader.gotoAndPlay("RedIFaderOut")
    BlueAFader.gotoAndPlay("BlueAFaderOut")
    YellowNFader.gotoAndPlay("YellowNFaderOut")
}

YellowNFader.addEventListener(MouseEvent.ROLL_OVER, YellowNOver);
YellowNFader.addEventListener(MouseEvent.ROLL_OUT, YellowNOut);
//YellowNFader.addEventListener(MouseEvent.ROLL_OVER, YellowNClick);

function YellowNOver(event:MouseEvent):void{
    ConnectFadeIn.gotoAndPlay("ConnectFadeInOver")
    RedIFader.gotoAndPlay("RedIFaderOver")
    BlueAFader.gotoAndPlay("BlueAFaderOver")
    GreenAFader.gotoAndPlay("GreenAFaderOver")
}

function YellowNOut(event:MouseEvent):void{
    ConnectFadeIn.gotoAndPlay("ConnectFadeInOut")
    RedIFader.gotoAndPlay("RedIFaderOut")
    BlueAFader.gotoAndPlay("BlueAFaderOut")
    GreenAFader.gotoAndPlay("GreenAFaderOut")
} 
```

感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:55:23.823

对我来说，这似乎来自您的剪辑是三角形的事实，可能使用蓝色、绿色、黄色三角形和红色 i 的图片（PNG 格式图像？...）。

事实是，*即使在 PNG 的透明区域滚动时，图片上的翻转也往往会被调度*，这显然是在这里发生的事情。

为了解决这个问题，您可以尝试使用例如应该解决此问题的**InteractivePNG[类](http://blog.mosessupposes.com/?p=40)。**

如果您不使用 PNG 文件，解决方案就像从影片剪辑的空白部分中删除任何现有的矢量填充，甚至是透明的矢量填充一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:48:11.363

我不确定我是否理解您的问题，但如果我理解，这是您可以执行的解决方案：

在您的翻转处理程序上，将其他颜色`mouseEnabled`和`mouseChildren`属性设置为`false`.

```
RedIFader.mouseEnabled = false;
RedIFader.mouseChildren = false; 
```

然后在您推出时，将它们全部设置为 true：

```
RedIFader.mouseEnabled = true;
RedIFader.mouseChildren = true; 
```

这将阻止其他颜色触发鼠标事件，直到鼠标离开当前颜色。

* * *

如果这不是您的问题，那么我建议使用虚拟对象：

创建一个虚拟形状（alpha 为 0），将其转换为影片剪辑并将其放在您希望鼠标悬停的位置。然后将翻转/退出侦听器添加到假人。您可能希望在所有颜色对象上将`mouseEnabled`&设置`mouseChildren`为 false，这样它们就不会妨碍您。

```
//disable all the color buttons mouse interactions
RedIFader.mouseEnabled = false;
BlueAFader.mouseEnabled = false;
GreenAFader.mouseEnabled = false;
YellowNFader.mouseEnabled = false;
RedIFader.mouseChildren = false;
BlueAFader.mouseChildren = false;
GreenAFader.mouseChildren = false;
YellowNFader.mouseChildren = false;

//add listeners to the dummys
RedDummy.addEventListener(MouseEvent.ROLL_OVER,btnRollOver);
RedDummy.addEventListener(MouseEvent.ROLL_OUT,btnRollOut);
BlueDummy.addEventListener(MouseEvent.ROLL_OVER,btnRollOver);
BlueDummy.addEventListener(MouseEvent.ROLL_OUT,btnRollOut);
GreenDummy.addEventListener(MouseEvent.ROLL_OVER,btnRollOver);
GreenDummy.addEventListener(MouseEvent.ROLL_OUT,btnRollOut);
YellowDummy.addEventListener(MouseEvent.ROLL_OVER,btnRollOver);
YellowDummy.addEventListener(MouseEvent.ROLL_OUT,btnRollOut);

function btnRollOver(e:Event):void {

    if(e.currentTarget != RedDummy){
        RedIFader.gotoAndPlay("RedIFaderOver");
    }else{
        BioFadeIn.gotoAndPlay("BioFadeInOver")
    }
    if(e.currentTarget != BlueDummy){
        BlueAFader.gotoAndPlay("BlueAFaderOver");
    }else{
        GamesFadeIn.gotoAndPlay("GamesFadeInOver");
    }
    if(e.currentTarget != GreenDummy){
        GreenAFader.gotoAndPlay("GreenAFaderOver");
    }else{
        SkillsFadeIn.gotoAndPlay("SkillsFadeInOver");
    }
    if(e.currentTarget != YellowDummy){
        YellowAFader.gotoAndPlay("YellowAFaderOver");
    }else{
        ConnectFadeIn.gotoAndPlay("ConnectFadeInOver");
    }
}

function btnRollOut(e:Event):void {
    if(e.currentTarget != RedDummy){
        RedIFader.gotoAndPlay("RedIFaderOut");
    }else{
        BioFadeIn.gotoAndPlay("BioFadeInOut")
    }
    if(e.currentTarget != BlueDummy){
        BlueAFader.gotoAndPlay("BlueAFaderOut");
    }else{
        GamesFadeIn.gotoAndPlay("GamesFadeInOut");
    }
    if(e.currentTarget != GreenDummy){
        GreenAFader.gotoAndPlay("GreenAFaderOut");
    }else{
        SkillsFadeIn.gotoAndPlay("SkillsFadeInOut");
    }
    if(e.currentTarget != YellowDummy){
        YellowAFader.gotoAndPlay("YellowAFaderOut");
    }else{
        ConnectFadeIn.gotoAndPlay("ConnectFadeInOut");
    }
} 
```

# c# - 为什么显示此实体关系约束错误？

> ID：13747850
> 
> 赞同：0
> 
> 时间：2012-12-06T16:16:53.040
> 
> 标签：c#, sql, linq, entity-framework

我愿意 ：

```
var t = cboTrailer.SelectedItem as Trailer;
using (var db = new CAPSContainer())
{
   db.Attach(t);
   db.Trailers.DeleteObject(t);
   db.SaveChanges();
} 
```

这会从上下文中删除一个`trailer`对象并推送这些更改。但它失败了，我得到：

**“CAPSContainer.Trailers”中的实体参与“CustomerTrailer”关系。找到 0 个相关的“客户”。1“客户”是预期的。**

问题是客户和预告片之间的关系就像---> `Customer 1-* Trailer`...所以如果我删除预告片，它不应该是一个问题。

那么为什么会出错呢？

**编辑：**

我尝试了 EF 的 v4 和 4.4 dll。似乎如果我先附加客户，一切正常，但仔细检查表明，即使没有发生错误，拖车仍然存在。

```
var c = cboCustomer.SelectedItem as Customer;
var t = cboTrailer.SelectedItem as Trailer;

using (var db = new CAPSContainer())
{
    db.Attach(c);
    c.Trailers.Remove(t);
    db.SaveChanges();
}

PopulateTrailers(); 
```

--> 仍然显示在列表中 + 即使在应用重新启动后它仍然存在...

编辑2：

这几乎有效：

```
 using (var db = new CAPSContainer())
            {
                db.Attach(c);
                db.Attach(t);
                c.Trailers.Remove(t);
                db.Trailers.DeleteObject(t);
                db.SaveChanges();
            } 
```

它给出（第二次删除）：

**ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。**

就在我之前在同一个项目中使用单个对象上下文时，这太疯狂了..

`MyContext.DeleteObject(t)`就是这样。现在同一行替换为 5 行，但仍然存在错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:19:49.300

您可能需要附加与您要删除的预告片相关的客户，以便 EF 也可以删除该关系。

# 编辑

除了从客户中删除预告片之外，您还需要从上下文中删除它。从客户中删除它只会删除关系。

```
var c = cboCustomer.SelectedItem as Customer;
var t = cboTrailer.SelectedItem as Trailer;

using (var db = new CAPSContainer())
{
    db.Attach(c);
    c.Trailers.Remove(t);
            db.Trailers.DeleteObject(t);
    db.SaveChanges();
}

PopulateTrailers(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:49:30.320

加载 cboCustomer 的源元素时，是否包含 Trailer？喜欢：

```
cboCustomer.Items = db.Customers.Include("Trailers").ToList(); 
```

然后删除元素：

```
using (var db = new CAPSContainer())
{
    db.Attach(c);
    c.Trailers.Remove(t);
    db.SaveChanges();
} 
```

# php - 在 htaccess 中仅基于引用重定向一次

> ID：13747853
> 
> 赞同：0
> 
> 时间：2012-12-06T16:17:21.520
> 
> 标签：php, .htaccess, mod-rewrite

我在 htaccess 中有两个重定向规则： 规则 1\. 用户来自 domain1.com 到 main-domain.com 重定向到 main-domain.com/dir1/ 规则 2\. 对 main-domain.com/dir2/ 的任何请求 - > 重定向到 --> somethingelese.com/something/

单独每个规则都按方面工作。但主要问题是在根据“domain1.com”的推荐值根据规则 1 从 domain1.com 重定向到 main-domain.com 之后，该推荐值不会被丢弃，并且对于 main-domain.com 的每个下一个请求它仅重定向到 main-domain.com/dir1/ 。我想要的是根据应该丢弃的推荐只重定向一次之后。并且不应该干涉 main-domain.com 。

这是代码：

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{HTTP_REFERER} ^(.*)domain1\.com [NC]
RewriteRule !dir1 http://main-domain.com/dir1 [R=301,L]

RewriteCond %{REQUEST_URI} ^/dir2/.* [NC]
RewriteRule dir2/(.*) https://somethingelse.com/mfn/$1 [R=301,L] 
```

**更多：信息：** 我发现的问题是浏览器正在缓存重定向。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:27:24.860

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{HTTP_HOST} !main-domain.com$ [NC]
RewriteCond %{HTTP_REFERER} ^.*domain1\.com [NC]
RewriteRule !^dir1 http://main-domain.com/dir1 [R,L]

RewriteCond %{REQUEST_URI} ^/dir2(/.*)? [NC]
RewriteRule dir2(/(.*))? https://somethingelse.com/mfn$1 [R,L] 
```

* * *

> **更多：信息**：我发现的问题是浏览器正在缓存重定向。有什么解决方法吗？

这里的问题可能是状态码 301，这意味着`Moved Permanently`和`This response is cacheable unless indicated otherwise`。为了避免这种使用`302 Found`。更多关于状态码的信息在[这里](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

* * *

您也可以从 PHP 中执行此操作（从评论中回答问题）：

```
if (isset($_SERVER['HTTP_REFERER']) && preg_match('/^.*domain1\.com/', $_SERVER['HTTP_REFERER']) &&
    !preg_match('/main\-domain\.com$/', $_SERVER['HTTP_HOST']) &&
    !preg_match('/^\/dir1/', $_SERVER['REQUEST_URI'])) {
    header('Location: http://main-domain.com/dir1');
    exit(0);
}
if (preg_match('/^\/dir2/', $_SERVER['REQUEST_URI'])) {
    header('Location: https://somethingelse.com/mfn' . substr($_SERVER['REQUEST_URI'], 4));
    exit(0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T01:31:08.353

在重写之前，添加一个 Vary 标头，以便浏览器知道响应可能不一致，而不是缓存它。

```
Header set Vary "*" 
```

# jquery - 我需要具有阈值更改区域背景颜色的区域图

> ID：13747856
> 
> 赞同：0
> 
> 时间：2012-12-06T16:17:31.460
> 
> 标签：jquery, jqplot

我正在寻找 jqplot（或另一个免费的 js 图表库）中的选项来显示正常的 2d 区域图（线图下填充背景的线图），但在该图上方有一些阈值（例如 y = 2）会改变其背景颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:42:01.877

几个月前，我在处理稍微类似的问题时有些头疼。JQPlot 中没有选项可以做到这一点，但是在@Boro 的帮助下，我找到了一个解决方法。

这是相关主题：[jqPlot：如何用几种不同的颜色为背景/网格的部分着色](https://stackoverflow.com/questions/10837997/jqplot-how-to-color-parts-of-background-grid-with-several-different-colors)

由于 StackOverFlow 限制，我不得不在评论中添加小提琴

# java - 如何检查int是否为null

> ID：13747859
> 
> 赞同：133
> 
> 时间：2012-12-06T16:17:39.040
> 
> 标签：java, int

我有一个名为`Person`.

它有几个属性；

```
int id;
String name; 
```

我设置了一个人对象，例如`Person p = new Person(1,"Joe");`。

1.) 我需要检查对象是否不为空；下面的表述是否正确；

```
if (person == null){
}

Or

if(person.equals(null)) 
```

2.) 我需要知道 ID 是否包含 Int。

```
if(person.getId()==null){} 
```

但是，java 不允许。我该怎么做这个检查？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2012-12-06T16:18:31.503

An不为空，如果未初始化`int`，则可能为空。`0`

如果您希望整数能够为空，则需要使用`Integer`而不是`int`.

```
Integer id;
String name;

public Integer getId() { return id; } 
```

此外，该语句`if(person.equals(null))`不能为真，因为如果`person`为 null，则将`NullPointerException`抛出 a。所以正确的表达是`if (person == null)`

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-12-06T16:18:52.707

原语没有空值。int 的默认值是 0。

```
if(person.getId()==0){} 
```

java中原语的默认值：

```
Data Type   Default Value (for fields)

byte                0
short               0
int                 0
long            0L
float           0.0f
double          0.0d
char            '\u0000'
boolean         false 
```

对象具有 null 作为默认值。

字符串（或任何对象）--->null

> 1.) 我需要检查对象是否不为空；下面的表述是否正确；

```
if (person == null){
} 
```

上面的代码检查 person 是否为空。你需要做

```
if (person != null){ // checks if person is not null
} 
```

和

```
if(person.equals(null)) 
```

当 person 为 null 时，上面的代码会抛出 NullPointerException。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-12-06T16:18:23.223

原语`int`不能为空。如果您需要 null，请`Integer`改用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-06T16:26:09.180

> 1.) 我需要检查对象是否不为空；下面的表述是否正确；
> 
> 如果（人==空）{}

**是**的。这是您检查对象是否为`null`.

> 2.) 我需要知道 ID 是否包含 Int。
> 
> if(person.getId()==null){}

**NO**因为`id`被定义为原始`int`的，它将被默认初始化，`0`并且永远不会`null`。如果原始类型为空，则无需检查它们。它们永远不会为空。如果需要，您可以将默认值`0`与`if(person.getId()==0){}`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T16:19:38.053

您必须访问您的类属性。

要访问它的属性，您必须执行以下操作：

```
person.id
person.name 
```

在哪里

> 人

是你的类 Person 的一个实例。

如果可以访问属性，则可以这样做，如果不能，则必须使用 setter 和 getter...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-24T11:23:23.700

在 Java 中，原始数据类型没有 Null 值。如果您需要检查 Null，请使用 Integer Class 而不是原始类型。您无需担心数据类型差异。Java 将 int 原始类型数据转换为 Integer。关于内存 Integer 比 int 占用更多内存。但是内存分配的区别，没什么可考虑的。

在这种情况下，您必须使用 Inter 而不是 int

尝试下面的代码片段并查看示例以获取更多信息，

```
Integer id;
String name;

//Refer this example
    Integer val = 0; 
```

`

```
if (val != null){
System.out.println("value is not null");
} 
```

`

您也可以按如下方式分配 Null，

```
val = null; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-12-14T16:27:54.067

您可以使用

```
if (person == null || String.valueOf(person.getId() == null)) 
```

除了常规方法

```
person.getId() == 0 
```

# python - 使用 pylab 从文件中绘制特定的列和行

> ID：13747860
> 
> 赞同：3
> 
> 时间：2012-12-06T16:17:40.293
> 
> 标签：python, matplotlib

我有一个数据文件，我想在其中绘制第二列的特定行。我的脚本如下：

```
f=open('datafile','r')
lines1=f.readlines()[4:24]#since I want the values from the 4th to the 23rd line
lines2=f.readlines()[33:54]#I want the values from the 33rd to the 53rd line
f.close()

x1=[]
y1=[]

for line in lines1:
    p=line.split()
    x1.append(float(p[1]))#the values are in the second column
for line in line2:
    p=line.split()
    y1.append(float(p[1]))

xv=np.array(x1)
yv=np.array(y1)

plt.plot(xv,yv) 
```

但是，最后我有一个错误说“x 和 y 必须具有相同的第一维”。我对python不是很有经验，有人可以给我建议或者让我知道我做错了什么吗？我怎样才能用不同的方式只提取那些行？

我想从第 4 行到第 25 行绘制 x= 第 2 列，从第 33 行到第 54 行绘制 y=第 2 列。

非常感谢您提前。

问候，

焦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:21:17.930

你做错的是`readlines`两次打电话。

文件[对象](http://docs.python.org/2/library/stdtypes.html#file-objects)的行为类似于[迭代器](http://docs.python.org/2/library/stdtypes.html#iterator-types)。调用`readlines`会**耗尽**它。第二次调用将返回一个空列表。

您可以一次获取行列表，然后使用它：

```
lines = f.readlines()
lines1 = lines[4:24]
lines2 = lines[33:54] 
```

不过，看起来列表的长度会相差 1，我想你需要纠正它。

另请注意，您不需要将列表转换为`numpy`数组来绘制它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:50:29.617

[你可以用numpy.genfromtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)和 python 切片来解决这个问题：

```
import numpy as np
import matplotlib.pyplot as plt

x_start, x_end = 4, 25 # get values from the 4th to the 25rd line
y_start, y_end = 33, 54 # get values from the 33rd to the 54rd line

x = np.genfromtxt('datafile', usecols=(1))
y = np.genfromtxt('datafile', usecols=(1))

x = x[x_start - 1:x_end]
y = y[y_start - 1:y_end]

print ' x=', x, '\n\n y=', y

plt.plot(x, y)
plt.show() 
```

# asp.net - MVC4 实体框架 - 在插入/更新之前设置字段值

> ID：13747862
> 
> 赞同：0
> 
> 时间：2012-12-06T16:17:45.387
> 
> 标签：asp.net, entity-framework, asp.net-mvc-4

我正在使用实体框架处理 MVC 4 ASP.NET 网站。这是我的第一个 ASP.NET 网站，如果我没有多大意义，请见谅。

该网站托管帖子，想想像博客这样的 WordPress。我希望有一个 title 属性和一个从标题隐式派生的 slug 属性。所以这是'Post'的类。

```
public class Post
{
    public virtual int PostID { get; set; }

    public virtual String Title { get; set; }

    public virtual string Slug { get; set; }

} 
```

插入/更新条目时如何设置“Slug”。我假设我必须利用更新/插入数据库的方法。好像是躲起来了。我想知道注释是否可以解决问题。

除了那个和自动生成的表单之外，我还有一个已实现的`DbContext`扩展类`OnModelCreating`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:27:33.957

根据该代码，Slug 属性不是从任何东西派生的。如果您希望它从标题派生，您可以尝试这样的事情：

```
private string title;
public virtual string Title {
    get { return title; }
    set {
        title = value;
        Slug = title.replace(" ", "-");
    }
}

public virtual string Slug { get; private set; } 
```

# xml - Ionic Zip 文件夹结构

> ID：13747866
> 
> 赞同：1
> 
> 时间：2012-12-06T16:17:54.033
> 
> 标签：xml, vb.net, zip

我正在尝试向我的程序中添加一些压缩代码，但是，我似乎无法使文件夹结构恰到好处。

我希望文件夹看起来像这样：

```
Root (
   -subfolder1
   -subfolder2
   individual file
   individual file
   individual file) 
```

因此，单个文件将位于 zip 的根文件夹中，而我添加的文件夹将成为根目录的子文件夹。我的代码在下面......

```
Using zip As New ZipFile()
    For Each item As System.Xml.XmlNode In Source
        If item.InnerText.Contains(".") Then
            zip.AddFile(item.InnerText)
        Else
            zip.AddDirectory(item.InnerText, GetLastDirName(item.InnerText))
        End If
    Next

    For Each item As System.Xml.XmlNode In Destin
        Dim path As String = item.InnerText
        zip.Save(path.Replace(".zip", "") & "_Archive_" & DateString & ".zip")
    Next
End Using 
```

但是，该`zip.addfile(item.innertext)`行将单个文件添加到完整路径。因此，如果文件是`C:\Pictures\image.jpg`...，它将在 zip 文件中显示为这样，并带有所有子文件夹。

我也尝试过`zip.addfile(item.innertext, "individual files")`为单个文件创建一个文件夹......但是，我希望将这些文件存储在根目录中。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:42:28.493

如果您查看 AddFile 方法的文档，您可以传入两个参数：

1.  文件名
2.  存档中的目录路径。

Ionic 文档指出，对于第二个参数，规则如下：

> 指定用于覆盖文件名中的任何路径的目录路径。此路径可能对应于当前文件系统中的真实目录，也可能不对应。如果稍后解压缩 zip 中的文件，则这是用于解压缩文件的路径。传递 null（VB 中为 Nothing）将使用 fileName 上的路径（如果有）。传递空字符串 ("") 将在存档的根路径中插入项目。

来源（http://dotnetzip.herobo.com/DNZHelp/html/202e1fb5-8891-888f-8e91-1340f7cd80c9.htm）

The means that in your code above, where you pass in only the first parameter (file name), you will use the full path off of the file you're adding. Add the path you want to the AddFile method as your second parameter, and you're good to go.

# php - 页面打开时如何立即执行jquery代码

> ID：13747869
> 
> 赞同：1
> 
> 时间：2012-12-06T16:18:05.673
> 
> 标签：php, jquery, ajax

我在下面有 php/mysqli 和 jquery 代码，它显示了一个课程下拉菜单和一个模块下拉菜单：

```
 $courseactive = 1;

    $sql = "SELECT CourseId, CourseNo, CourseName FROM Course WHERE CourseActive = ? ORDER BY CourseNo"; 

    $sqlstmt=$mysqli->prepare($sql);

    $sqlstmt->bind_param("i",$courseactive);

    $sqlstmt->execute(); 

    $sqlstmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName);

    $courses = array(); // easier if you don't use generic names for data 

    $courseHTML = "";  
    $courseHTML .= '<select name="courses" id="coursesDrop" onchange="getModules();">'.PHP_EOL; 
    $courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

    $outputcourse = "";

    while($sqlstmt->fetch()) 
    {

    $course = $dbCourseId;
    $courseno = $dbCourseNo;
    $coursename = $dbCourseName; 

    $courseHTML .= "<option value='".$course."'>" . $courseno . " - " . $coursename . "</option>".PHP_EOL;  

    if (isset($_POST['courses']) && ($_POST['courses'] == $course)) {
      $outputcourse = "<p><strong>Course:</strong> " . $courseno .  " - "  . $coursename . "</p>";
  }

    } 

    $courseHTML .= '</select>'; 

    $moduleHTML = "";  
    $moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL; 
    $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
    $moduleHTML .= '</select>'; 

    $pHTML = "";

    ?>

    <script type="text/javascript">

    function getModules() { 
    var course = jQuery("#coursesDrop").val(); 
    jQuery('#modulesDrop').empty(); 
    jQuery('#modulesDrop').html('<option value="">Please Select</option>'); 
    jQuery.ajax({ 
    type: "post", 
    url:  "module.php", 
    data: { course:course }, 
    success: function(response){ 
    jQuery('#modulesDrop').append(response); 
    } 
    }); 

    }

    </script> 
```

上面代码中发生的情况是，当用户从课程下拉菜单中选择课程时，它将导航到 module.php 页面，在该脚本中它将执行查询并输出属于该课程的模块此页面上的模块下拉菜单。

但现在我想根本不包括课程下拉菜单，因为它并不是真正需要的。所以我只有一个模块下拉菜单。我仍然希望通过仍然导航到 module.php 脚本来显示模块以显示模块选项。

所以我的问题是，我需要在 jquery 代码中进行哪些更改，以便当我打开上述脚本时，它将立即执行 jquery 并在下拉菜单中显示模块列表（不依赖于 Course drop下拉菜单，因为该下拉菜单将被删除）？

我假设 jquery 需要进入 document.ready() 函数？

更新：

```
 <script type="text/javascript">

        $(document).ready( function(){
        function getModules() { 
        jQuery.ajax({ 
        type: "post", 
        url:  "module.php", 
        success: function(response){ 
        jQuery('#modulesDrop').append(response); 
        } 
        }); 
});
        }
        </script> 
```

module.php 页面：

`

```
 // connect to the database
 include('connect.php');

 /* check connection */
 if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
die();
}

$moduleactive = 1;

$sql = "SELECT ModuleId, ModuleNo, ModuleName FROM Module WHERE ModuleActive = ? ORDER BY ModuleNo"; 

 $sqlstmt=$mysqli->prepare($sql);

 $sqlstmt->bind_param("i", $moduleactive);

 $sqlstmt->execute(); 

 $sqlstmt->bind_result($dbModuleId,$dbModuleNo,$dbModuleName);

$moduleHTML  = "";  

 while($sqlstmt->fetch()) { 
     $moduleHTML .= sprintf('<option value="%1$s_%2$s_%3$s">%1$s - %2$s</option>'.PHP_EOL, $dbModuleNo, $dbModuleName, $dbModuleId);
} 

echo $moduleHTML; 

 $sqlstmt->execute(); 

?>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:26:15.080

有几种不同的方法可以在页面加载时执行脚本：

1.  您可以使用 body 标签上的内联 javascript 方法执行此操作：

    `<body onload="method()">`

2.  你可以用 jQuery 做到这一点：

    `$(document).ready({ method(); });`

3.  声明函数后，您可以随时在 javascript 中执行此操作：

    `method();`在 javascript 中声明函数后随时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:26:47.467

`window.onload =`vs `document.ready`
[http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)

如果在页面加载后加载 Jquery 代码，那么您可以给`<script>`标签一个 id 然后执行`$("#elementid").ready(handler);`

# php - 从 Twitter API 获取错误的身份验证数据错误

> ID：13747870
> 
> 赞同：1
> 
> 时间：2012-12-06T16:18:07.407
> 
> 标签：php, api, twitter, twitter-oauth

好的，所以我一直在 Github 上使用 Abraham William Twitter API 库来尝试在我的网站上的 Twitter 上拉我的追随者，但我收到了一个错误的身份验证错误“Bad Authentication data [code] => 215”，即使我遵循了脚步 。下面是对我进行身份验证的代码，应该可以帮助我尝试不同的方法从 Twitter 请求数据。有人可以告诉我为什么会出现这个错误，我将不胜感激。亚伯拉罕的 twitter 库文档可以在这里找到.. [https://github.com/abraham/twitteroauth](https://github.com/abraham/twitteroauth)

```
 <?php
    /**
     * @file
     * 
     */

    /* Load required lib files. */
    //session_start();
    require_once('../madscore/twitter/twitteroauth/twitteroauth.php');
    require_once('../madscore/twitter/config.php');

    /* Get user access tokens out of the session. */
    $access_token = $_SESSION['access_token'];

    /* Create a TwitterOauth object with consumer/user tokens. */
    $connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, $access_token['oauth_token'], $access_token['oauth_token_secret']);

    /* If method is set change API call made. Test is called by default. */
    $content = $connection->get('account/rate_limit_status');
    echo "Current API hits remaining: {$content->remaining_hits}.";

    /* Get logged in user to help with tests. */
    $user = $connection->get('account/verify_credentials');
    var_dump($user);

    $active = TRUE;
    if (empty($active) || empty($_GET['confirmed']) || $_GET['confirmed'] !== 'TRUE') {
      echo '<h1>Warning! This page will make many requests to Twitter.</h1>';
      echo '<h3>Performing these test might max out your rate limit.</h3>';
      echo '<h3>Statuses/DMs will be created and deleted. Accounts will be un/followed.</h3>';
      echo '<h3>Profile information/design will be changed.</h3>';
      echo '<h2>USE A DEV ACCOUNT!</h2>';
      echo '<h4>Before use you must set $active = TRUE in test.php</h4>';
      echo '<a href="../index3.php?confirmed=TRUE">Continue</a> or <a href="./index.php">go back</a>.';
      exit;
    }

    function twitteroauth_row($method, $response, $http_code, $parameters = '') {
      echo '<tr>';
      echo "<td><b>{$method}</b></td>";
      switch ($http_code) {
        case '200':
        case '304':
          $color = 'green';
          break;
        case '400':
        case '401':
        case '403':
        case '404':
        case '406':
          $color = 'red';
          break;
        case '500':
        case '502':
        case '503':
          $color = 'orange';
          break;
        default:
          $color = 'grey';
      }
      echo "<td style='background: {$color};'>{$http_code}</td>";
      if (!is_string($response)) {
        $response = print_r($response, TRUE);
      }
      if (!is_string($parameters)) {
        $parameters = print_r($parameters, TRUE);
      }
      echo '<td>', strlen($response), '</td>';
      echo '<td>', $parameters, '</td>';
      echo '</tr><tr>';
      echo '<td colspan="4">', substr($response, 0, 400), '...</td>';
      echo '</tr>';

    }

    function twitteroauth_header($header) {
      echo '<tr><th colspan="4" style="background: grey;">', $header, '</th></tr>';
    }

    /* Start table. */
    echo '<br><br>';
    echo '<table border="1" cellpadding="2" cellspacing="0">';
    echo '<tr>';
    echo '<th>API Method</th>';
    echo '<th>HTTP Code</th>';
    echo '<th>Response Length</th>';
    echo '<th>Parameters</th>';
    echo '</tr><tr>';
    echo '<th colspan="4">Response Snippet</th>';
    echo '</tr>';

    /**
     * Help Methods.
     */
    twitteroauth_header('Help Methods');

    /* help/test */
    twitteroauth_row('help/test', $connection->get('help/test'), $connection->http_code);

    /**
     * Timeline Methods.
     */
    twitteroauth_header('Timeline Methods');

    /* statuses/public_timeline */
    twitteroauth_row('statuses/public_timeline', $connection->get('statuses/public_timeline'), $connection->http_code);

    /* statuses/public_timeline */
    twitteroauth_row('statuses/home_timeline', $connection->get('statuses/home_timeline'), $connection->http_code);

    /* statuses/friends_timeline */
    twitteroauth_row('statuses/friends_timeline', $connection->get('statuses/friends_timeline'), $connection->http_code);

    /* statuses/user_timeline */
    twitteroauth_row('statuses/user_timeline', $connection->get('statuses/user_timeline'), $connection->http_code);

    /* statuses/mentions */
    twitteroauth_row('statuses/mentions', $connection->get('statuses/mentions'), $connection->http_code);

    /* statuses/retweeted_by_me */
    twitteroauth_row('statuses/retweeted_by_me', $connection->get('statuses/retweeted_by_me'), $connection->http_code);

    /* statuses/retweeted_to_me */
    twitteroauth_row('statuses/retweeted_to_me', $connection->get('statuses/retweeted_to_me'), $connection->http_code);

    /* statuses/retweets_of_me */
    twitteroauth_row('statuses/retweets_of_me', $connection->get('statuses/retweets_of_me'), $connection->http_code);

    /**
     * Status Methods.
     */
    twitteroauth_header('Status Methods');

    /* statuses/update */
    date_default_timezone_set('GMT');
    $parameters = array('status' => date(DATE_RFC822));
    $status = $connection->post('statuses/update', $parameters);
    twitteroauth_row('statuses/update', $status, $connection->http_code, $parameters);

    /* statuses/show */
    $method = "statuses/show/{$status->id}";
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* statuses/destroy */
    $method = "statuses/destroy/{$status->id}";
    twitteroauth_row($method, $connection->delete($method), $connection->http_code);

    /* statuses/retweet */
    $method = 'statuses/retweet/6242973112';
    twitteroauth_row($method, $connection->post($method), $connection->http_code);

    /* statuses/retweets */
    $method = 'statuses/retweets/6242973112';
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /**
     * User Methods.
     */
    twitteroauth_header('User Methods');

    /* users/show */
    $method = 'users/show/27831060';
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* users/search */
    $parameters = array('q' => 'oauth');
    twitteroauth_row('users/search', $connection->get('users/search', $parameters), $connection->http_code, $parameters);

    /* statuses/friends */
    $method = 'statuses/friends/27831060';
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* statuses/followers */
    $method = 'statuses/followers/27831060';
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /**
     * List Methods.
     */
    twitteroauth_header('List Methods');

    /* POST lists */
    $method = "{$user->screen_name}/lists";
    $parameters = array('name' => 'Twitter OAuth');
    $list = $connection->post($method, $parameters);
    twitteroauth_row($method, $list, $connection->http_code, $parameters);

    /* POST lists id */
    $method = "{$user->screen_name}/lists/{$list->id}";
    $parameters = array('name' => 'Twitter OAuth List 2');
    $list = $connection->post($method, $parameters);
    twitteroauth_row($method, $list, $connection->http_code, $parameters);

    /* GET lists */
    $method = "{$user->screen_name}/lists";
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* GET lists id */
    $method = "{$user->screen_name}/lists/{$list->id}";
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* DELETE list */
    $method = "{$user->screen_name}/lists/{$list->id}";
    twitteroauth_row($method, $connection->delete($method), $connection->http_code);

    /* GET list statuses */
    $method = "oauthlib/lists/4097351/statuses";
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* GET list members */
    $method = "{$user->screen_name}/lists/memberships";
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* GET list subscriptions */
    $method = "{$user->screen_name}/lists/subscriptions";
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /**
     * List Members Methods.
     */
    twitteroauth_header('List Members Methods');

    /* Create temp list for list member methods. */
    $method = "{$user->screen_name}/lists";
    $parameters = array('name' => 'Twitter OAuth Temp');
    $list = $connection->post($method, $parameters);

    /* POST list members */
    $parameters = array('id' => 27831060);
    $method = "{$user->screen_name}/{$list->id}/members";
    twitteroauth_row($method, $connection->post($method, $parameters), $connection->http_code, $parameters);

    /* GET list members */
    $method = "{$user->screen_name}/{$list->id}/members";
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* GET list members id */
    $method = "{$user->screen_name}/{$list->id}/members/27831060";
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* DELETE list members */
    $parameters = array('id' => 27831060);
    $method = "{$user->screen_name}/{$list->id}/members";
    twitteroauth_row($method, $connection->delete($method, $parameters), $connection->http_code, $parameters);

    /* Delete the temp list */
    $method = "{$user->screen_name}/lists/{$list->id}";
    $connection->delete($method);

    /**
     * List Subscribers Methods.
     */
    twitteroauth_header('List Subscribers Methods');

    /* POST list subscribers */
    $method = 'oauthlib/test-list/subscribers';
    twitteroauth_row($method, $connection->post($method), $connection->http_code);

    /* GET list subscribers */
    $method = 'oauthlib/test-list/subscribers';
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* GET list subscribers id */
    $method = "oauthlib/test-list/subscribers/{$user->id}";
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* DELETE list subscribers */
    $method = 'oauthlib/test-list/subscribers';
    twitteroauth_row($method, $connection->delete($method), $connection->http_code);

    /**
     * Direct Message Methods.
     */
    twitteroauth_header('Direct Message Methods');

    /* direct_messages/new */
    $parameters = array('user_id' => $user->id, 'text' => 'Testing out @oauthlib code');
    $method = 'direct_messages/new';
    $dm = $connection->post($method, $parameters);
    twitteroauth_row($method, $dm, $connection->http_code, $parameters);

    /* direct_messages */
    $method = 'direct_messages';
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* direct_messages/sent */
    $method = 'direct_messages/sent';
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* direct_messages/sent */
    $method = "direct_messages/destroy/{$dm->id}";
    twitteroauth_row($method, $connection->delete($method), $connection->http_code);

    /**
     * Friendships Methods.
     */ 
    twitteroauth_header('Friendships Methods');

    /* friendships/create */
    $method = 'friendships/create/93915746';
    twitteroauth_row($method, $connection->post($method), $connection->http_code);

    /* friendships/show */
    $parameters = array('target_id' => 27831060);
    $method = 'friendships/show';
    twitteroauth_row($method, $connection->get($method, $parameters), $connection->http_code, $parameters);

    /* friendships/destroy */
    $method = 'friendships/destroy/93915746';
    twitteroauth_row($method, $connection->post($method), $connection->http_code);

    /**
     * Social Graph Methods.
     */
    twitteroauth_header('Social Graph Methods');

    /* friends/ids */
    $method = 'friends/ids';
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* friends/ids */
    $method = 'friends/ids';
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /**
     * Account Methods.
     */
    twitteroauth_header('Account Methods');

    /* account/verify_credentials */
    $method = 'account/verify_credentials';
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* account/rate_limit_status */
    $method = 'account/rate_limit_status';
    twitteroauth_row($method, $connection->get($method), $connection->http_code);

    /* account/update_profile_colors */
    $parameters = array('profile_background_color' => 'fff');
    $method = 'account/update_profile_colors';
    twitteroauth_row($method, $connection->post($method, $parameters), $connection->http_code, $parameters);

    /* account/update_profile */
    $parameters = array('location' => 'Teh internets');
    $method = 'account/update_profile';
    twitteroauth_row($method, $connection->post($method, $parameters), $connection->http_code, $parameters);

    /**
     * OAuth Methods.
     */
    twitteroauth_header('OAuth Methods');

    /* oauth/request_token */
    $oauth = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET);
    twitteroauth_row('oauth/r

eqeust_token', $oauth->getRequestToken(), $oauth->http_code); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:22:51.553

看起来你正在使用亚伯拉罕的图书馆。它适用于新的 API。您所要做的就是修改 url 并将其设置为[https://api.twitter.com/1.1./whaterveryouwanttodo](https://api.twitter.com/1.1./whaterveryouwanttodo)。如果我对您使用的库的看法是正确的，只需在 twitteroauth.php 文件中更改一次：

```
 public $host = "https://api.twitter.com/1.1/"; 
```

注意“https”和“1.1”。我迟到了，但我希望它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:18:29.780

我有完全相同的错误。我到处搜索，只想出了一个解决方案；显然您需要将 twitteroauth.php 文件中的 '$host' 密钥从 1 更新到 1.1 以获得最新的 API。不过，对我不起作用。

# python - 这个素数功能真的有效吗？

> ID：13747873
> 
> 赞同：16
> 
> 时间：2012-12-06T16:18:18.713
> 
> 标签：python, algorithm, math, python-2.7, primes

由于我开始掌握 Python 的窍门，因此我开始在 projecteuler.net 上测试我新获得的 Python 技能以解决一些问题。

无论如何，在某些时候，我最终制作了一个函数来获取所有素数的列表，直到数字“n”。

这是函数的外观：

```
def primes(n):
    """Returns list of all the primes up until the number n."""

    # Gather all potential primes in a list.
    primes = range(2, n + 1)
    # The first potential prime in the list should be two.
    assert primes[0] == 2
    # The last potential prime in the list should be n.
    assert primes[-1] == n

    # 'p' will be the index of the current confirmed prime.
    p = 0
    # As long as 'p' is within the bounds of the list:
    while p < len(primes):
        # Set the candidate index 'c' to start right after 'p'.
        c = p + 1
        # As long as 'c' is within the bounds of the list:
        while c < len(primes):
            # Check if the candidate is divisible by the prime.
            if(primes[c] % primes[p] == 0):
                # If it is, it isn't a prime, and should be removed.
                primes.pop(c)
            # Move on to the next candidate and redo the process.
            c = c + 1
        # The next integer in the list should now be a prime, 
        # since it is not divisible by any of the primes before it. 
        # Thus we can move on to the next prime and redo the process.
        p = p + 1       
    # The list should now only contain primes, and can thus be returned.
    return primes 
```

它似乎工作正常，尽管有一件事情让我感到困扰。在评论代码的时候，这一段突然显得不对劲：

```
# Check if the candidate is divisible by the prime.
if(primes[c] % primes[p] == 0):
    # If it is, it isn't a prime, and should be removed from the list.
    primes.pop(c)
# Move on to the next candidate and redo the process.
c += 1 
```

如果候选不能被素数整除，我们检查位于'c + 1'的下一个候选。没问题。

但是，如果候选者可以被素数整除，我们首先将其弹出，然后检查位于“c + 1”处的下一个候选者。让我感到震惊的是，在弹出之后，下一个候选人不是位于'c + 1'，而是位于'c'，因为在弹出'c'之后，下一个候选人“落入”该索引。

然后我认为该块应该如下所示：

```
# If the candidate is divisible by the prime:
if(primes[c] % primes[p] == 0):
    # If it is, it isn't a prime, and should be removed from the list.
    primes.pop(c)
# If not:
else:
    # Move on to the next candidate.
    c += 1 
```

上面的这个块对我来说似乎更正确，但让我想知道为什么原来的部分显然工作得很好。

**所以，这是我的问题：**

在弹出一个结果不是素数的候选人之后，我们可以假设，就像在我的原始代码中一样，下一个候选人不能被同一个素数整除吗？

如果是这样，那是为什么？

建议的“安全”代码是否会对在“不安全”代码中跳过的候选者进行不必要的检查？

**PS：**

我尝试将上述假设作为断言写入“不安全”函数，并使用 n = 100000 对其进行测试。没有发生问题。这是修改后的块：

```
# If the candidate is divisible by the prime:
if(primes[c] % primes[p] == 0):
    # If it is, it isn't a prime, and should be removed.
    primes.pop(c)
    # If c is still within the bounds of the list:
    if c < len(primes):
        # We assume that the new candidate at 'c' is not divisible by the prime.
        assert primes[c] % primes[p] != 0
# Move on to the next candidate and redo the process.
c = c + 1 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T23:53:40.987

**对于更大的数字，它会失败**。第一个素数是**71**，因为候选人可能会失败。71 的最小失败候选者是**10986448536829734695346889**，它掩盖了数字 10986448536829734695346889 + 142。

```
def primes(n, skip_range=None):
    """Modified "primes" with the original assertion from P.S. of the question.
    with skipping of an unimportant huge range.
    >>> primes(71)
    [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71]
    >>> # The smallest failing number for the first failing prime 71:
    >>> big_n = 10986448536829734695346889
    >>> primes(big_n + 2 * 71, (72, big_n))
    Traceback (most recent call last):
    AssertionError
    """
    if not skip_range:
        primes = list(range(2, n + 1))
    else:
        primes = list(range(2, skip_range[0]))
        primes.extend(range(skip_range[1], n + 1))
    p = 0
    while p < len(primes):
        c = p + 1
        while c < len(primes):
            if(primes[c] % primes[p] == 0):
                primes.pop(c)
                if c < len(primes):
                    assert primes[c] % primes[p] != 0
            c = c + 1
        p = p + 1
    return primes

# Verify that it can fail.
aprime = 71   # the first problematic prime 
FIRST_BAD_NUMBERS = (
        10986448536829734695346889, 11078434793489708690791399,
        12367063025234804812185529, 20329913969650068499781719,
        30697401499184410328653969, 35961932865481861481238649,
        40008133490686471804514089, 41414505712084173826517629,
        49440212368558553144898949, 52201441345368693378576229)

for bad_number in FIRST_BAD_NUMBERS:
    try:
        primes(bad_number + 2 * aprime, (aprime + 1, bad_number))
        raise Exception('The number {} should fail'.format(bad_number))
    except AssertionError:
        print('{} OK. It fails as is expected'.format(bad_number)) 
```

我通过搜索 n 模小素数的可能余数，通过一个复杂的算法解决了这些数字，就像一个谜题。最后一个简单的步骤是得到完整的 n（通过三行 Python 代码中的中国剩余定理）。我知道所有 120 个小于[原始](https://en.wikipedia.org/wiki/Primorial)(71) 的基本解决方案 =`2 * 3 * 5 * 7 * 11 * 13 * 17 * 19 * 23 * 29 * 31 * 37 * 41 * 43 * 47 * 53 * 59 * 61 * 67 * 71`周期性地重复这个数字的所有倍数。我为每十年测试的素数重写了多次算法，因为每十年的解决方案都比前一个慢得多。也许我会在可接受的时间内为素数 73 或 79 找到一个较小的解决方案。

* * *

编辑：

**我还想找到**不安全的原始功能的完全静默失败。也许存在一些由不同素数组成的候选。这种解决方式只会将最终结果推迟到以后。每一步都将花费越来越多的时间和资源。因此，只有由一两个素数组成的数字才有吸引力。

我希望隐藏的候选*c*只有两个解决方案是好的：`c = p ** n`或者*p*`c = p1 * p ** n`和*p1*是素数并且n*是*大于 1 的幂。如果不能被任何小于*p的**素数*整除并且如果*c- 2n*和*c*可以被任何小于*p*的素数整除。变体 p1*p**n 还要求相同的*c在**p1* ( *p1 < p* )之前失败，因为我们已经知道无数这样的候选者。`c = p1 ** n1 * p ** n`****`c - 2 * p`****

 *****编辑**：我发现了一个**较小**的失败示例：素数 79 的编号为 121093190175715194562061。（大约比 71 少 90 倍）我不能继续使用相同的算法来找到更小的示例，因为所有 702612 基本解决方案都需要超过 30我的笔记本电脑上的 Prime 79 小时。

我还为小于 400000000 (4E10) 的所有候选者和所有相关素数验证了它，没有候选者会在问题中的断言失败。直到您拥有 TB 的内存和数千年的时间，算法中的断言才会通过，因为您的时间复杂度是 O((n / log(n)) ^2) 或非常相似。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T17:07:16.040

你的观察似乎是准确的，这是一个很好的收获。

我怀疑它起作用的原因，至少在某些情况下，是因为合数实际上被分解为多个素数。因此，内部循环可能会错过第一个因素的值，但它会在后面的因素中获取它。

对于一个小的“n”，您可以打印出列表的值以查看是否正在发生这种情况。

顺便说一下，这种寻找素数的方法是基于 Eratothenes 筛法。在进行筛分时，如果“c”是“p”的倍数，那么下一个值永远不会是同一个素数的倍数。

问题是：在任何情况下，p*x 和 p*(x+1) 之间的所有值都可以被一些小于 p 和 p*x+1) 的素数整除。（这是算法会错过一个值并且以后不会被捕获的地方。）但是，这些值之一是偶数，因此它将在“第 2 轮”中被消除。所以，真正的问题是是否存在 p*x 和 p*(x+2) 之间的所有值都可以被小于 p 的数字整除的情况。

顺便说一句，我想不出任何小于 100 的数字满足这个条件。对于 p = 5，在两个连续的 5 倍数之间总有一个值不能被 2 或 3 整除。

似乎有很多关于素数间隙和序列的文章，但关于可被小于 p 的数字整除的连续整数序列的文章却不多。经过一些（好吧，很多）试验和错误后，我确定 39,474 (17*2,322) 和 39,491 (17*2,233) 之间的每个数字都可以被小于 17 的整数整除：

```
39,475  5
39,476  2
39,477  3
39,478  2
39,479  11
39,480  2
39,481  13
39,482  2
39,483  3
39,484  2
39,485  5
39,486  2
39,487  7
39,488  2
39,489  3
39,490  2 
```

我不确定这是否是第一个这样的值。然而，我们必须找到两倍于这个长度的序列。我认为这不太可能，但不确定是否有证据。

我的结论是原始代码可能有效，但您的修复是正确的做法。如果没有证明不存在这样的序列，它看起来就像一个错误，尽管它可能非常、非常、非常罕见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T17:51:05.183

*   给定两个数 n, m 在可能的素数的连续序列中，使得 n 和 m 不能被最后一个除数 p 整除，则 m - n < p
*   给定 q（下一个更高的除数）> p，那么如果 n 可被 q 整除，则下一个可被 q 整除的数是 n + q > n + p > m，因此在当前迭代中应跳过 m 以进行可分性测试

    ```
    Here n = primes[c] 

    m = primes[c + 1], i.e. primes[c] after primes.pop(c)

    p = primes[p]
    q = primes[p+1] 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T19:06:35.007

这是一个想法：

三联画解释了¹，c 之后的下一个数字不能是 c + p，但我们仍然需要证明它也永远不能是 c + 2p。

如果我们使用 primes = [2]，我们只能有一个连续的“非素数”，一个可被 2 整除的数字。

如果我们使用 primes = [2,3] 我们可以构造 3 个连续的“非素数”，一个数除以 2，一个数除以 3，一个数除以 2，它们不能得到下一个数。或者

2,3,4 => 3 个连续的“非素数”

尽管 2 和 3 不是“非素数”，但我更容易根据这些数字来思考。

如果我们使用 [2,3,5]，我们得到

2,3,4,5,6 => 5 个连续的“非素数”

如果我们使用 [2,3,5,7]，我们得到

2,3,4,5,6,7,8,9,10 => 9 个连续的“非素数”

模式出现。我们能得到的最连续的非素数是下一个素数 - 2。

因此，如果 next_prime < p * 2 + 1，我们必须至少有一个介于 c 和 c + 2p 之间的数，因为在给定素数的情况下，连续非素数的数量还不够长。

我不知道非常非常大的数字，但我认为这`next_prime < p * 2 + 1`可能包含非常大的数字。

我希望这是有道理的，并增加了一些亮点。

* * *

¹ [Triptych](https://stackoverflow.com/users/43089)的回答已被删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T22:59:47.063

这并没有提供一个远程决定性的答案，但这是我尝试过的：

我在这里重申了所需的假设（lpf 代表 Least Prime Factor）：

```
For any composite number, x, where:
    lpf(x) = n
There exists a value, m, where 0 < m < 2n and:
    lpf(x+m) > n 
```

可以很容易地证明，在没有合数 (x+m) 的情况下存在 x 的值以满足不等式。任何平方素数都表明：

```
lpf(x) = x^.5, so x = n^2
n^2 + 2n < (n + 1)^2 = n^2 + 2n + 1 
```

因此，在任何平方素数的情况下，为了使这一点成立，必须有一个素数 p，存在于 x < p < x + 2n 的范围内。

我认为可以得出结论，鉴于平方的渐近分布 (x^.5) 与素数定理相比（素数的渐近分布近似 x/(ln x)），但实际上，我对素数的理解定理充其量是有限的。

而且我没有任何策略可以将该结论扩展到非平方复合数，因此这可能不是一个有用的途径。

我已经使用上述问题的重述组合了一个程序测试值。

直接测试此语句应该删除仅按所述运行算法的任何幸运结果。通过获得幸运的结果，我指的是被跳过的值可能不安全，但不会出现任何不正确的结果，因为跳过的值不能被当前正在迭代的数字整除，或者被被后续迭代拾取。本质上，如果算法得到了正确的结果，但要么没有找到每个消除值的 LEAST 素因子，要么没有严格检查每个素数结果，我对此并不满意。如果存在这种情况，我认为可以合理地假设也存在不会幸运的情况（尽管它们可能是不寻常的），并且会产生不正确的结果。

然而，运行我的测试，在 2 - 2,000,000 的值中没有显示反例。因此，就其价值而言，除非我的逻辑不正确，否则所述算法中的值应该是安全的，至少可以达到 2,000,000。

这就是我要补充的。好问题，Phazyck，玩得很开心！

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-06T17:01:05.733

如果素数 p 整除候选 c，则下一个可被 p 整除的较大候选是 c + p。因此，您的原始代码是正确的。

但是，生成素数列表是一种糟糕的方式。用 n = 1000000 试试，看看它有多慢。问题是当您应该使用筛子时，您正在执行试除法。这是一个简单的筛子（伪代码，我会让你翻译成 Python 或其他语言）：

```
function primes(n)
    sieve := makeArray(2..n, True)
    for p from 2 to n step 1
        if sieve[p]
            output p
            for i from p+p to n step p
                sieve[i] := False 
```

这应该在不到一秒的时间内使质数少于一百万。还有其他更快的筛算法。

这种算法被称为埃拉托色尼筛法，大约在 2200 年前由一位希腊数学家发明。埃拉托色尼是个有趣的家伙：除了筛选素数之外，他还发明了闰日和经纬度系统，准确计算了太阳到地球的距离和地球的周长，并曾一度担任托勒密图书馆的首席图书馆馆长在亚历山大。

当你准备好学习更多关于素数编程的知识时，我谦虚地在我的博客上推荐这篇[文章。](http://programmingpraxis.com/essays)***

# jquery-ui - 垂直文本覆盖内容

> ID：13747875
> 
> 赞同：1
> 
> 时间：2012-12-06T16:18:23.407
> 
> 标签：jquery-ui, vertical-text

我可以使用[http://jsfiddle.net/9pUu4/](http://jsfiddle.net/9pUu4/)代码在表格单元格中添加垂直文本。此表上方是我的水平导航菜单，当使用 jquery ui 菜单悬停选项卡时，它会扩展为链接。我的问题是，当将选项卡悬停在垂直文本上方时，文本会覆盖在菜单上。但是将水平文本悬停在表格的同一行时不会发生；即菜单涵盖页面内容。这发生在 chrome 和 firefox 上。

我尝试弄乱 z-index 问题但没有运气。它与转换 css 属性（-webkit-transform、-moz-transform）有什么关系吗？还是 jquery 菜单与垂直文本冲突？

```
.Vertical
{
  writing-mode:bt-rl;
  -webkit-transform:rotate(90deg);
  -moz-transform:rotate(90deg);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:31:19.290

在深入挖掘 SO 之后，[如何确保我的下拉菜单重叠并覆盖我页面上的任何内容？](https://stackoverflow.com/questions/9018140/how-do-i-make-sure-my-drop-down-menus-overlap-and-cover-anything-on-my-page)，我怀疑竖排文本：变换原点；或者只是垂直文本出现在页面布局的菜单之后，可能会使该垂直文本“在顶部”。

无论如何，在菜单之外添加这个包装器是可行的。

```
#div1
{
    position : relative;   
    z-index : 1000;
} 
```

[更多代码](http://jsfiddle.net/sPKY6/)

z-index = 1 如上所述有效，但我只想确保它涵盖所有内容。

# objective-c - iOS 6 全屏本地视频使用 UIWebView 和 loadHTMLString

> ID：13747876
> 
> 赞同：1
> 
> 时间：2012-12-06T16:18:23.730
> 
> 标签：objective-c, ios, uiwebview, ios6

单击全屏按钮时，我在 UIWebView 中播放本地视频时遇到了一些问题。

这是一个 iPad 应用程序，当我转到包含视频的视图并单击播放按钮时，它会正常播放，我可以跳过和暂停/播放。但是当点击全屏时，它会将视频拉伸到全屏，播放一秒钟，全屏会消失，而不是在它的位置显示视频只是一个白框。我已经在运行 iOS 6 的 iPad 3rd Gen 和运行 iOS 6 的 iPad 模拟器上对此进行了测试，两者都做同样的事情。然而，在运行 iOS 5 的第一代 iPad 和运行 iOS 5 的模拟器上，两者都可以全屏播放。

在 iOS 6 iPad/模拟器上，当我单击视频播放时，在调试区域中我看到以下内容：

```
2012-12-06 16:11:07.361 PICO[19131:11f03] [MPAVController] Autoplay: Enabling autoplay
2012-12-06 16:11:07.362 PICO[19131:11f03] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2012-12-06 16:11:07.362 PICO[19131:11f03] setting movie path: file:///Users/Nathan/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/DB4C3A91-F148-417B-8319-4690F89E1382/PICO.app/30.20.mp4
2012-12-06 16:11:07.362 PICO[19131:11f03] [MPAVController] Autoplay: Enabling autoplay
2012-12-06 16:11:07.368 PICO[19131:11f03] [MPCloudAssetDownloadController] Prioritization requested for media item ID: 0
2012-12-06 16:11:07.437 PICO[19131:11f03] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2012-12-06 16:11:07.447 PICO[19131:11f03] [MPAVController] Autoplay: Enabling autoplay
2012-12-06 16:11:07.448 PICO[19131:11f03] [MPAVController] Autoplay: _streamLikelyToKeepUp: 0 -> 1 
```

然后当我单击全屏按钮时：

```
2012-12-06 16:12:39.918 PICO[19131:11f03] [MPAVController] Autoplay: Enabling autoplay
2012-12-06 16:12:40.168 PICO[19131:11f03] [MPAVController] Autoplay: Enabling autoplay
2012-12-06 16:12:40.178 PICO[19131:11f03] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1) 
```

无论如何，这是我的代码：

。H

```
@property (strong, nonatomic) IBOutlet UIWebView *videoView; 
```

.m

```
[videoView loadHTMLString:@"<body style=\"margin:0px;\"><video src=\"30.20.mp4\" controls width=\"640\" height=\"360\"></video></body>" baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle]bundlePath]]];
videoView.scrollView.scrollEnabled = NO; 
```

如您所见，我只是使用 loadHTMLString 加载来自本地视频的视频标签。我在网上看得很清楚，但找不到任何关于此的内容。希望这只是简单的事情！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:56:14.710

好的，这就是我修复它的方法。

添加 MediaPlayer 框架。Target > Build Phases > Link Binary.. > + button < 开始输入 MediaPlayer

然后使用下面的代码。

```
YourClass.h
#import <MediaPlayer/MediaPlayer.h>
@interface YourClass : UIViewController
@property (strong, nonatomic) MPMoviePlayerController *moviePlayer; //creating the property is a must else it will show a black box instead of your video and will not play

YourClass.m
@synthesize moviePlayer; 
NSString *moviePath = [[NSBundle mainBundle] pathForResource:@"myVideoFile" ofType:@"mp4"];
moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:moviePath]];
moviePlayer.view.frame = CGRectMake(73, 203, 640, 360); //position you want the player and it's size
[self.view addSubview:moviePlayer.view];
[moviePlayer prepareToPlay];
[moviePlayer setShouldAutoplay:NO]; //autoplays by default 
```

在 iOS 5.1 和 6 中为我工作

# html - 如何将 HTTP 请求和 jQuery 脚本生成的多个页面合二为一？

> ID：13747880
> 
> 赞同：0
> 
> 时间：2012-12-06T16:18:27.753
> 
> 标签：html, jquery

我有一个页面显示作为 HTTP 请求的结果的用户信息。此用户页面有一个打印按钮。单击此打印按钮后，信息将被格式化以使用 jQuery 脚本打印输出。

现在我有一个打印几个用户的任务。我可以为每个用户发送一个 AJAX 请求，为每个用户将结果放入一个单独的 div 中，为每个 div 调用一个打印按钮，然后显示结果。

我担心的是每个页面的结果都将具有相同的 id（即“容器”）——这会搞砸 jQuery 脚本。

如何修复这个设计，或者有更好的设计理念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:41:44.357

看来我对身份证的担忧并不相关。
来自 AJAX 请求的所有响应都可以通过 jQuery append 添加到总结果 div 中。尽管响应具有相同的 iD，但这并不妨碍它们添加到总结果中

# c++ - 向量。检查它是否包含“密钥”。C++

> ID：13747883
> 
> 赞同：1
> 
> 时间：2012-12-06T16:18:36.417
> 
> 标签：c++, vector, contain

> **可能重复：**
> [如何在 std::vector 中查找项目？](https://stackoverflow.com/questions/571394/how-to-find-an-item-in-a-stdvector)

嘿，就像标题暗示的那样，我想检查向量是否包含字符串“Key”。我一直在谷歌上四处寻找，我在矢量库中找不到任何东西。任何人都可以帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:20:54.627

你可以使用[`std::find`](http://en.cppreference.com/w/cpp/algorithm/find)它。假设你有一个`std::vector`完整的`std::strings`：

```
#include <algorithm> // for std::find

std::vector<std::string> v = ....;
std::vector<std::string>::const_iterator it = std::find(v.begin(), v.end(), "Key");
bool found = it != v.end(); 
```

# python - 如何阻止这种级联删除在 Django 中发生？

> ID：13747886
> 
> 赞同：7
> 
> 时间：2012-12-06T16:18:45.487
> 
> 标签：python, database, django, model

我在 Django 应用程序中有三个模型类：

```
class Folder(models.Model):
  ...
  folder = models.ForeignKey('Folder',null=True,blank=True,related_name='folders')
  front_thumbnail_image = models.ForeignKey('Image',verbose_name='Front Thumbnail',null=True,blank=True,related_name='front_thumbnail_for_folders')
  middle_thumbnail_image = models.ForeignKey('Image',verbose_name='Middle Thumbnail',null=True,blank=True,related_name='middle_thumbnail_for_folders')
  back_thumbnail_image = models.ForeignKey('Image',verbose_name='Back Thumbnail',null=True,blank=True,related_name='back_thumbnail_for_folders')

class Image(models.Model):
  ...
  folder = models.ForeignKey(Folder,related_name='images',null=True)

class ImageRepresentation(models.Model):
  ...
  image = models.ForeignKey(Image, related_name="image_representations") 
```

鉴于此模型，当我`Image`在管理站点中删除 an 时，我希望`ImageRepresentation`与它关联的 s 也`Image`将被删除，并且将其`Folder`封闭`Image`起来。

管理站点告诉我，附件`Folder`也将被删除。我该怎么做才能获得所需的行为？我查看了删除级联规则，但我尝试的任何方法似乎都不起作用。

**编辑**在（缩略图）上添加三个外键`Folder`......我完全忽略了那些（显然）。老实说，没有其他关系。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-05-13T13:53:12.243

正如 Thomas 所说， a 的默认`on_delete`行为`ForeignKey`是`models.CASCADE`. 暗示删除“父”模型时将删除“子”模型。

一个简单的解决方案是包含`on_delete=models.SET_NULL`到模型的每个`ForeignKey`to`Image`字段中，`Folder`如下所示：

```
front_thumbnail_image  = models.ForeignKey('Image',on_delete=models.SET_NULL, null=True, ...)
middle_thumbnail_image = models.ForeignKey('Image',on_delete=models.SET_NULL, null=True, ...)
back_thumbnail_image   = models.ForeignKey('Image',on_delete=models.SET_NULL, null=True, ...) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T16:42:59.240

创建`ForeignKey`时，删除父对象时删除的内容由[参数`on_delete`控制](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.on_delete)。

默认情况下，`on_delete`设置为`models.CASCADE`，这将在删除父对象时删除子对象。没有其他配置选项可以创建您在此处报告的行为。

你有`Foreignkey`从`Folder`到`Image`或`ImageRepresentation`吗？（在您的情况下是文件夹缩略图）

# javascript - Jquery input.files 等效

> ID：13747892
> 
> 赞同：26
> 
> 时间：2012-12-06T16:19:11.617
> 
> 标签：javascript, jquery, file-upload

我有一个带有单个文件上传输入的简单 html 表单。（[jsfiddle）](http://jsfiddle.net/5zJLp/)

过去，我使用 访问过用户选择的文件`input.files`，但是我不知道如何使用 JQuery 执行此操作；

代码：

```
$(function () {
    $("#cmdSubmit").bind("click", function () {
        var file = document.getElementById("fileInput").files[0];
        alert(file); //A

        file = $("#fileInput").val();
        alert(file); //B

        file = $("#fileInput").files[0];
        alert(file); //C

    });        
});​ 
```

选项**A**给了我我所期望的，一个文件对象。但是，选项**B**只是给了我上传文件的名称，而不是（据我所知）文件本身。

选项**C**显示`files`未定义。

Jquery 相当于`input.files`什么？

注意：我不反对使用原生 javascript；但鉴于我在整个项目的其余部分都使用 JQuery，如果可能的话，我更愿意在这里使用它。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-06T16:20:34.647

您必须访问该元素。尝试：

```
file = $("#fileInput")[0].files[0];
alert(file); //C 
```

或（谢谢杰克）

```
file = $("#fileInput").prop('files')[0];
alert(file); 
```

[小提琴](http://jsfiddle.net/QmSh8/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T16:23:32.120

试试下面的代码

```
var file = $("#fileInput").get(0).files[0];
 alert(file); 
```

谢谢

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T16:21:45.470

jQuery 没有为 Files API 提供包装器。所以没有 jQuery 风格的方式来做到这一点，至少没有内置到 jQuery 核心中。

您的选择：

*   坚持选项A
*   等待 jQuery 包含这样的包装器（他们可能不会）
*   查找其他人编写的扩展名（如果存在）
*   自己写一个扩展

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T16:21:06.813

```
$(function () {
    $("#cmdSubmit").bind("click", function () {
       alert(this.files);
     });        
});​ 
```

# iphone - 我可以在我的 iPhone 应用程序中为当前位置旋转蓝点吗

> ID：13747900
> 
> 赞同：1
> 
> 时间：2012-12-06T16:19:41.017
> 
> 标签：iphone, objective-c, ios5, mapping, ios6-maps

嗨，我正在使用 iPhone 中的地图视图，我正在旋转地图视图，它正在正确旋转。但是我的自定义图钉（imageview）没有旋转。

我在 iPhone 中运行 Maps 应用程序，在该应用程序中，当前位置的“v”形图像出现并根据地图视图旋转进行旋转。

我将以下代码用于自定义图钉动画（旋转）：

```
 // Setup the animation

    [UIView beginAnimations: @"anim" context: nil];
    [UIView setAnimationDuration:2.0];
    [UIView setAnimationCurve:2.0];
    //[UIView setAnimationRepeatCount:10];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDelegate:self];
    [UIView commitAnimations];

    //--------For animating imageview ---------------------
    [annView addSubview:locaterImageView]; 
```

我可以在我的自定义应用程序中旋转默认图钉吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T00:39:40.540

你可以，但是自定义注释不会旋转，只是因为地图会旋转（我明白，这就是你想要的。）

但是，我建议在继续之前先好好考虑一下。旋转地图注释并不是每个人都喜欢 UX 的。

# javascript - 如何检测浏览器是否支持关注禁用元素？

> ID：13747910
> 
> 赞同：0
> 
> 时间：2012-12-06T16:19:56.697
> 
> 标签：javascript, jquery, internet-explorer-8, focus, feature-detection

> 无法将焦点移至控件，因为它不可见、未启用或属于不接受焦点的类型

jQuery 在 IE8 上抛出了上述错误。

我希望能够检测浏览器是否支持关注禁用元素（`input`在我的情况下），并将其存储在`jQuery.support`.

我该怎么做？

一个普通的 JS 解决方案会很好，但我不想使用浏览器嗅探（`jQuery.browser`等）。

使用`dispatchEvent()`会是一个好方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T16:38:12.883

我想你可以`try`，`catch`正是这样（关注一个禁用的元素），并在`support`有任何问题时存储一个值。

```
var test = $('<input disabled/>');
$(document.body).append(test);
try{
    test.focus();
}catch(e){
    //no support, do your thing
    //...
}
//clean up test element
test.remove(); 
```

# meteor - Meteor 无法在页面之间保存会话的值

> ID：13747912
> 
> 赞同：5
> 
> 时间：2012-12-06T16:20:07.293
> 
> 标签：meteor

如果将网页移动到其他网页，我面临的问题是 Meteor 无法保存会话的值。我是 Meteor 的新手，也许我在滥用。如何处理页面之间的会话值？即使页面移动到另一个页面或重新加载浏览器，我也想保留会话的值。

我计划使用 Javascript 框架（例如 Meteor、Mojito 和 Express (Node.js)）构建一个 Web 应用程序，并在开发之前对其进行测试。

我正在使用 Meteor 版本 0.5.2 (6635ae1007) 和 Chrome 版本 23.0.1271.95。

这是一个测试代码和测试步骤：

(1) 点击“测试”按钮：

这会将“结果为”标签更改为“结果正常”。

(2) 单击“返回首页”链接或重新加载浏览器：

我想保留标签“结果是好的”，但它又回到了“结果是”。这意味着会话值未定义。

测试.js

```
if (Meteor.isClient) {
  Template.test.result = function() {
    var result = Session.get('TEST');
    console.log('Result: %s', result);
    return result;
  }

  Template.test.events({
    'click' : function() {
        Session.set('TEST', 'OK');
    }
  });
} 
```

测试.html

```
<head>
  <title>sample-session</title>
</head>

<body>
  <h1>Session Test</h1>
  <a href="./">Back to Top page<a/><br/>
  {{> test}}
</body>

<template name="test">
  <input type="button" value="TEST"></input><br/>
  Result is {{result}}.
</template> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T01:58:54.320

**UPDATE** Meteor 现在有一个[Session.setDefault](http://docs.meteor.com/#session_set_default)方法，它完全符合您的期望。

**原答案如下**

Meteor 中的`session`对象与其他框架（Rails/ASP.NET MVC/PHP）中的概念**根本不同**`session`——它在 Meteor 中的主要功能是充当*客户端*代码的[反应变量](http://docs.meteor.com/#session)。

 *它的设计目的**不是**为了满足您在上面的期望——一旦您的链接触发，客户端上下文就会被擦除，并且任何客户端会话值都消失了。Meteor 应用程序并不是为传统意义上的导航而设计的，所以这就是为什么这看起来如此令人困惑的原因。这是完全可以理解的:)

我建议您不要使用传统意义上的导航，而是看一下[meteor-router](https://github.com/tmeasday/meteor-router)，它有助于简化传统方法和更流畅的方法之间的过渡。

如果您确实需要按照上面描述的方式保存数据，则需要查看用于在客户端本地保存数据的[amplify 智能包](http://docs.meteor.com/#amplify)。

[提示：当您在文档](http://docs.meteor.com/)中了解 Meteor 时，请密切注意每个部分右上角的客户端/服务器/任何位置的指定。*

# windows - Windows PowerShell - 要运行的数组

> ID：13747914
> 
> 赞同：3
> 
> 时间：2012-12-06T16:20:13.787
> 
> 标签：windows, powershell, powershell-3.0

我有这个让我抓狂的问题：

我有一个功能

```
function xyz
{
    foreach($x in $input)
    {
    }
}

1..10 | xyz 
```

这保存在文件 test.ps1 中。当我每次写它时像“.\test.ps1”一样执行它

```
cmdlet Write-Output at command pipeline position 1
Supply values for the following parameters:
InputObject[0]: 
```

为什么会这样？如果我喜欢它是行不通的

```
$myArray = @("a","b","c")
xyz -arr $myArray 
```

并做一个像

```
function xyz
{
    param(
        [string[]]$arr
    )

    foreach($x in $arr)
    {
    }
} 
```

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T16:31:05.123

我无法复制您看到的错误，但一般来说，当您想要处理管道输入时，最简单的方法是这样的：

```
function xyz
{
    process {
        $_
    }
}

1..10 | xyz 
```

`process`将为管道中的每个对象调用该块。事实上，这是一种足够常见的模式，PowerShell 有一个更方便的快捷方式，称为`filter`例如：

```
filter xyz
{
    $_
}

1..10 | xyz 
```

现在，如果您需要处理常规参数以及管道输入，则需要添加参数声明并使用高级函数参数功能，例如：

```
function xyz
{
    param(
        [Parameter(Mandatory=$true, Position=0, ValueFromPipeline=$true)]
        [object[]]
        $myparam
    )
    process {
       foreach ($elem in $myparam)
       {
           $elem
       }
    }
}

xyz (1..10)
'a','b','c' | xyz 
```

这适用于管道输入和简单参数（非管道）使用。这最接近地模拟了二进制 cmdlet 的实际工作方式。

# c++ - 为什么 boost::function 慢？

> ID：13747916
> 
> 赞同：4
> 
> 时间：2012-12-06T16:20:26.643
> 
> 标签：c++, performance, boost

我正在做一些计时测试，其中一项测试是比较调用函数的不同方式。我使用各种方法调用了 N 个函数。我尝试了常规函数调用、虚函数调用、函数指针和 boost::function。

我在 Linux 中使用 gcc 和 -O3 优化来做到这一点。

正如预期的那样，虚拟调用比常规函数调用慢。然而，令人惊讶的是 boost::function 比虚拟调用慢了 33%。

有没有其他人注意到这一点？任何线索为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T16:22:47.007

如果可能，编译器可以*内联*常规函数，但`boost::function`永远**不能**内联。这是一大区别。

第二个区别是，`boost::function`实现[类型擦除](http://en.wikipedia.org/wiki/Type_erasure)，这意味着它使用*间接*调用实际函数。意味着它首先调用一个虚函数，然后调用你的函数。所以通常它涉及（最少）两个函数调用（其中一个是`virtual`）。那是**巨大的**差异。

因此，基于此分析，可以推断出这一点（甚至无需编写测试代码）：

```
slowest ------------------------------------------------------> fastest 
        boost::function < virtual function < regular function 
slowest ------------------------------------------------------> fastest 
```

在您的测试代码中确实如此。

请注意，它也适用`std::function`（自 C++11 起可用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T16:42:31.990

A`boost::function`不仅可以保存函数指针，还可以保存它调用可能虚拟对象的任意对象的完整副本`operator()`。

它可以帮助理解它是如何工作的（用于说明）。

这是一个`boost::function`类型技巧的玩具实现：

```
struct helper_base { virtual void do_it() = 0; };
template<typename Func>
struct helper:helper_base {
  Func func;
  helper(Func f):func(f) {}
  virtual void do_it() override { func(); }
};
struct do_something_later {
  boost::unique_ptr<helper_base> pImpl;
  template<typename Func>
  do_something_later( Func f ):pImpl(make_shared<helper<Func>>(f))
  {}
  void operator()() { (*pImpl).do_it(); }
private:
  do_something_later( do_something_later const& ); // deleted
  void operator=( do_something_later const& ); // deleted
}; 
```

这里 my`do_something_later`接受一个任意对象 (Func) 并`operator()`按需调用它。它将我们正在调用的事物的类型包装在`operator()`类型擦除助手中，然后`operator()`通过虚函数调用。

`Func`type 可以是函数指针，也可以是带状态的函子。任何可以用 operator() 复制的东西都是公平的游戏。就用户`do_something_later`而言，只有一个二进制接口。

`boost::function`(and `std::function`) 使用基本相同的技术（有很多改进）将一整套可能的接口转换为一个接口。成本涉及调用`virtual`函数（或等效的间接级别）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:44:30.603

观察到的缓慢的真正原因是`boost::function`除了两个间接将指针与零进行比较。如果省略了这个测试，那么调用的执行速度将与虚函数一样快（这也涉及两个间接——一个指向 vtable 的指针，另一个指向实际函数）。

# android - 警报触发时，警报管理器将我的变量变为空

> ID：13747917
> 
> 赞同：0
> 
> 时间：2012-12-06T16:20:27.973
> 
> 标签：android, alarmmanager, android-alarms

来电报警：

```
 Log.e("call: ", "calling alarm");

        sessionForPost =  Session.getActiveSession();
        if(sessionForPost != null)
            Log.e("session: ", "not null");
        else
            Log.e("session: ", "null");

        Alarm alarm = new Alarm();
        alarm.SetAlarm(getActivity().getApplicationContext()); 
```

报警管理器类：

```
public static class Alarm extends BroadcastReceiver 
{    
    static String victimId = null;
    static Context context;

    public Alarm(Context context){
        Alarm.context = context;
    }
    public Alarm(){
        if(sessionForPost != null){
            Log.e("Alarm session: ", "not null");
        }
        else
            Log.e("Alarm session: ", "null");

    }

     @SuppressLint("Wakelock")
    @Override
     public void onReceive(final Context context, final Intent intent) 
     {   
         PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
         PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "my wak up lo");
         wl.acquire();

         if(sessionForPost != null)
            Log.e("onReceive session: ", "not null");
        else
            Log.e("onReceive session: ", "null");

         postFromAlarm(sessionForPost);

         Toast.makeText(context, "Alarm !!!!!!!!!!", Toast.LENGTH_LONG).show(); // For example

         wl.release();

     }

 public void SetAlarm(Context context)
 {
     if(sessionForPost != null)
            Log.e("SetAlarm session: ", "not null");
        else
            Log.e("SetAlarm session: ", "null");

     Alarm.context = context;
     Log.e("setalarm: ", "i am here");
     AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
     Intent i = new Intent(contextForPost.getApplicationContext(), Alarm.class);
     PendingIntent pi = PendingIntent.getBroadcast(Alarm.context, 2, i, PendingIntent.FLAG_CANCEL_CURRENT);
     am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+ 1000 * 10, pi); // Millisec * Second * Minute
 }

 public void CancelAlarm(Context context)
 {
     Intent intent = new Intent(context, Alarm.class);
     PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
     AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
     alarmManager.cancel(sender);
 }
} 
```

postFromAlarm() 方法：

```
public static void postFromAlarm(Session session){
    String victimId;
    if(flag){
     Log.e("flag: ", "true");
    }else{
     Log.e("flag: ", "false");
    }
    if(Session.getActiveSession() != null)
        Log.e("session: ", "not null");
    else
        Log.e("session: ", "null");

    if(Session.getActiveSession() != null){
     Log.e("onRecieve: ", "i am here");

    Bundle postParams = new Bundle();
        postParams.putString("message", msg);

        Request.Callback callback= new Request.Callback() {
            public void onCompleted(Response response) {
                JSONObject graphResponse = response
                                           .getGraphObject()
                                           .getInnerJSONObject();
                String postId = null;
                try {
                    postId = graphResponse.getString("id");
                } catch (JSONException e) {
                    Log.i(TAG,
                        "JSON error "+ e.getMessage());
                }
                FacebookRequestError error = response.getError();
                if (error != null) {
                    Toast.makeText(contextForPost,
                         error.getErrorMessage(),
                         Toast.LENGTH_SHORT).show();
                    } else {
                        Toast.makeText(contextForPost, 
                             postId,
                             Toast.LENGTH_LONG).show();
                }
                //Log.e("Ashchi to: ",error.getErrorMessage());
            }
        };
        Log.e("Ashchi to2: ","poststory class");
        if(friendId != null){
            victimId = friendId;
        }else{
            victimId = user_ID;
        }
        Request request = new Request(Session.getActiveSession(), victimId+"/feed", postParams, 
                              HttpMethod.POST, callback);

        RequestAsyncTask task = new RequestAsyncTask(request);

        task.execute(); 
        flag = true;
}

} 
```

现在是当我调用 SetAlarm() 时的 LogCat ：

```
12-06 14:55:53.757: call: calling alarm
12-06 14:55:53.767: session: not null
12-06 14:55:53.787: Alarm session: not null
12-06 14:55:53.787: SetAlarm session: not null
12-06 14:55:53.787: setalarm: i am here 
```

然后当警报触发 LogCat 时给我：

```
12-06 14:56:04.437: Alarm session: null
12-06 14:56:04.457: onReceive session: null
12-06 14:56:04.457: flag: false
12-06 14:56:04.487: session: null 
```

我的警报管理器清单：

```
......
 <uses-permission android:name="android.permission.WAKE_LOCK"></uses-permission>
......
<application
.....
<receiver  android:process=":remote" android:name="com.timelystatusupdater.MyLoggedInFragment$Alarm"></receiver>
..... 
```

如您所见，当我拨打警报并检查时`Session`，它不为空。但是当警报触发时，会话变为空。问题是什么。记住`sessionForPost`是静态全局变量。**我如何防止会话变为空**

**注意：我的警报类是一个内部静态类。设置闹钟后 10 秒后闹钟响起**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:27:58.593

从战术上讲， delete `android:process=":remote"`，事情可能会更好。

`AlarmManager`但是，更一般地说，如果您的应用程序在后台，您的进程可能会在调用之间终止。这是完全正常的，通常是用户想要的。您的代码需要处理这种情况。静态数据成员是一个缓存，仅此而已——任何需要在进程终止后幸存下来的东西都需要持久存储（例如，数据库、文件）。

# json - Laravel：如何通过 JSON 将 Blade 模板传递给客户端？

> ID：13747929
> 
> 赞同：0
> 
> 时间：2012-12-06T16:21:05.113
> 
> 标签：json, client-side, mustache, laravel

我希望将包含一些 HTML 的 JSON 对象传递给我的客户端应用程序。我正在使用 Laravel 3.2.12，而且我是新手。我知道问题出在我的`View::make`指令中。那么哪个是正确的指令呢？

在 My_Controller 中：

```
public function get_all()
{
    return Response::json(array(
        array('name' => 'OR', 'category' => 'Logical', 'form_controls' => View::make('modules.or'))
    ));
} 
```

在视图/模块/or.blade.php 中：

```
<span>test</span> 
```

在views.js 中：

```
$('#element').html(Mustache.to_html(ModuleTemplate, {some: 'stuff'}, { custom: this.model.get("form_controls") })); 
```

在 view.mustache 中：

```
...
{{>custom}}
... 
```

JSON 中的 HTML 应该由 mustache.js 作为部分解析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:43:44.417

我认为您正在寻找的是 View::render();

[http://laravel.com/api/source-class-Laravel.View.html#311](http://laravel.com/api/source-class-Laravel.View.html#311)

据我所知， View::make 返回一个完整的响应对象，这不是您想要的。

# matlab - 用于循环向量化和内存的 Matlab

> ID：13747937
> 
> 赞同：1
> 
> 时间：2012-12-06T16:21:27.177
> 
> 标签：matlab, memory, vectorization

X、Y 和 z 是表示表面的坐标。为了计算一些量，我们称之为流，在表面的 i,j 点，我需要计算所有其他点 (i0,j0) 的贡献。为此，我需要例如知道点 i0、j0 和所有其他点 (alpha) 之间的角度 cos。然后来自 i0,j0 的所有贡献必须乘以一些常数并相加。zv0 在每个点 i,j 是最终需要的结果。

我想出了下面写的一些代码，它似乎非常不合适。首先，它减慢了程序的其余部分，并且似乎使用了所有可用内存。我的系统有 4gb 物理内存和 12gb 交换文件，它总是内存不足，尽管所有变量大小都不大于 10kb。请帮助解决加速/矢量化和内存问题。

```
parfor i0=2:1:length(x00);
  for j0=2:1:length(y00);
    zv=red3dfunc(X0,Y0,f,z0,i0,j0,st,ang,nx,ny,nz);
    zv0=zv0+zv;
  end
end

function[X,Y,z,zv]=red3dfunc(X,Y,f,z,i0,j0,st,ang,Nx,Ny,Nz)
x1=X(i0,j0);
y1=Y(i0,j0);
z1=z(i0,j0);
alpha=zeros(size(X));
betha=zeros(size(X));
r=zeros(size(X));
XXa=X-x1;
YYa=Y-y1;
ZZa=z-z1;
VEC=((XXa).^2+(YYa).^2+(ZZa).^2).^(1/2);
VEC(i0,j0)=VEC(i0-1,j0-1);
XXa=XXa./VEC;
YYa=YYa./VEC;
ZZa=ZZa./VEC;
alpha=-(Nx(i0,j0).*XXa+Ny(i0,j0).*YYa+Nz(i0,j0).*ZZa);
betha=Nx.*XXa+Ny.*YYa+Nz.*ZZb;
r=VEC;
zv=(1/pi)*st^2*ang.*f.*(alpha).*betha./r.^2; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:47:15.970

要做到这一点，显而易见的事情是使用 Kroneker 产品。对于维度为 nAxmA 和 nBxmB 的矩阵，matlab 函数是 kron(A,B)。这个函数将返回维度矩阵 (nA*nB)x(mA*mB)，看起来像

```
[a11*B a12*B ... a1mA*B;
.......................;
anA1*B ........ anAmA*B] 
```

所以你的问题可以通过引入矩阵 I=ones(size(X)) 来解决。然后，您将定义您的 XXa、YYa、ZZa 和 VEC 矩阵，没有任何循环为

```
XXa = kron(I,X)-kron(X,I);
YYa = kron(I,Y)-kron(Y,I);
ZZa = kron(I,Z)-kron(Z,I);
VEC=((XXa).^2+(YYa).^2+(ZZa).^2).^(1/2); 
```

然后，您将找到任何 i0,j0 的 VEC（如果您将 n 和 m 定义为 X 的大小分量）

```
VEC((1+n*(i0-1)):(n*i0),(1+m*(j0-1)):(m*j0)) 
```

# asp.net - 运行 MVC 4 的 Mono 和 IIS 上的相同 Machinekey

> ID：13747945
> 
> 赞同：3
> 
> 时间：2012-12-06T16:21:45.703
> 
> 标签：asp.net, asp.net-mvc, linux, mono, nginx

当前设置：

服务器 A -

操作系统：Debian Squeeze
Web 服务器：Nginx + Fastcgi + Mono 3.0
ASP.NET MVC 4 (.Net 4.5) 使用基本互联网模板。
Db 后端：Mysql
域：（示例）servera.domain.com

服务器 B -

操作系统：Windows Server 2012
Web 服务器：使用基本 Internet 模板的 IIS8
ASP.NET MVC 4 (.Net 4.5)。
Db 后端：Mysql
域：（示例）serverb.domain.com

两台服务器都使用相同的机器密钥，并且 cookie 设置为 .domain.com。Cookie 名称设置为 .ASPXAuth（以覆盖单声道 cookie 名称）。

这个想法是在服务器 A 上注册并能够在服务器 B 上使用相同的详细信息登录。此外，如果您登录到服务器 B，您应该能够浏览到服务器 A 并仍然登录。但这不起作用. 我无法在两台服务器上使用相同的详细信息登录，并且创建的 cookie 仅在两台服务器上都不起作用。

如果我从两台服务器上删除机器密钥，那么我可以创建一个帐户并使用这些详细信息登录到两台服务器，但由于未设置机器密钥，因此创建的 cookie 将无法在两台服务器上运行。

我已经在两个 Windows 服务器之间进行了测试，它工作正常。Mono 是否使用机器键做一些不同的事情？

有任何想法吗？

# hibernate - 这个 HQL 查询有什么问题？

> ID：13747950
> 
> 赞同：0
> 
> 时间：2012-12-06T16:22:00.890
> 
> 标签：hibernate, grails, groovy, hql

我正在我的 Grails 应用程序中执行以下 HQL 查询：

```
def maxIndex = VirtualSubOrder.find(
    'select max(vso.index) from VirtualSubOrder vso where vso.virtualOrder = ?', 
    [virtualOrder]) 
```

该类`VirtualSubOrder`肯定有一个（整数）`index`属性和一个`virtualOrder`属性。

当我尝试执行上面的查询时，出现错误：

> org.codehaus.groovy.grails.orm.hibernate.exceptions.GrailsQueryException：域类 [class com.example.VirtualSubOrder] 的无效查询 [select max(vso.index) from VirtualSubOrder vso where vso.virtualOrder = ?]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T16:36:38.713

我相信您想使用`VirtualSubOrder.executeQuery()`而不是`find()`. `find`用于返回域实例并`executeQuery`用于任意 HQL。

# visual-studio - Visual Studio sp1 错误：DACFramework_enu.msi 不可用

> ID：13747953
> 
> 赞同：3
> 
> 时间：2012-12-06T16:22:08.177
> 
> 标签：visual-studio, visual-studio-2010

我正在尝试为 Visual Studio 2010 安装 sp1。我第一次安装 sp1 时工作正常。后来我安装了windows phone 开发者工具。

Visual Studio 告诉我 sp1 已部分安装。然后当我尝试重新应用 sp1 时，它给了我这个消息：

```
Microsoft SQL Server 2008 R2 Data-Tier Application Framework
Insert the 'Microsoft SQL Server R2 Data-Tier Application Framework' disk and click OK 
```

[所以我从这个网站https://www.microsoft.com/en-us/download/details.aspx?id=24000](https://www.microsoft.com/en-us/download/details.aspx?id=24000)下载了上述功能，并试图将安装程序指向 msi 文件，但我得到了错误信息：

```
The file 'DACFramework.msi' is not a valid installation package for the product Microsoft SQL Server 2008 R2 Data-Tier Application Framework.  Try to find the installation package 'DACFramework_enu.msi' in a folder from which you can install Microsoft SQL Server 2008 R2 Data-Tier Application Framework. 
```

问题是我最初使用 Web 安装程序安装了上述 Data-Tier 框架，那么我如何授予它访问该磁盘的权限？有没有人有什么建议？TIA。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T17:24:14.263

事实证明，虽然我通过 Microsoft Web 安装程序安装了 Visual Studio 2010，但实际上我已经下载了 Sp1 ISO 文件，并在那里找到了所需的文件。

# html - CSS/HTML5 字体颜色和大小在 Internet Explorer 中不起作用

> ID：13747954
> 
> 赞同：1
> 
> 时间：2012-12-06T16:22:09.993
> 
> 标签：html, css, internet-explorer, colors, font-size

我很难让一个网站与 Internet Explorer 一起工作——真是大吃一惊，对吧？下面列出的代码在我测试过的所有浏览器上都能完美运行，但旧版本的 Internet Explorer 除外。

p1 是最大的字体，p2 次之，p3 是最小的。Internet Explorer 当前正在以正确的大小读取 p2 和 p3，但 p1 比它们都小。此外，p1 和 p2 应该是深绿色，p3 应该是浅绿色，但所有文本都显示为黑色。我使用的是 px 而不是 pt 所以我不应该遇到这个问题......关于我做错了什么的任何想法？

```
p1 {color:#0B610B; font-family: "Arial"; font-size: 24px; -webkit-text-size-adjust: none;}     
p2 {color:#0B610B; font-family: "Arial"; font-size: 14px; -webkit-text-size-adjust: none;}     
p3 {color:#659965; font-family: "Arial"; font-size: 14px; -webkit-text-size-adjust: none;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:23:41.803

`p1`不存在。我假设这是一堂课？尝试使用`.p1`,`.p2`等 :)

`p {`单独将选择所有段落标签`<p>`
`p1 {`选择无
`.p1 {`选择任何元素`class="p1"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:30:21.657

你在使用人造元素吗？您发布的 CSS 仅适用于 p1、p2、p3 标记，例如`<p1>Some text</p1>`. 但这些元素并不存在。旧版本的 IE 不会设置未知元素的样式。您应该执行以下操作之一：

1.  如果它们是标题，请使用正确的标题标签，例如`<h1>Some text</h1>`

2.  或使用类，例如`<p class="p1">Some text</p>`并将 CSS 选择器更改为`.p1 {...}`

3.  如果您*真的*想使用自定义标签（通常是个坏主意），那么如果您使用 Javascript 将它们添加到 DOM，它们可以在 IE 中设置样式：

    ```
    <script>
    var elems = ['p1','p2','p3'];
    for (var i in elems)
        document.createElement(elems[i]);
    </script> 
    ```

# fonts - 为什么文本在字母边缘的单独像素中呈现为红色、绿色或蓝色，而不是浅灰色？

> ID：13747958
> 
> 赞同：1
> 
> 时间：2012-12-06T16:22:26.797
> 
> 标签：fonts, render, rgb

我不是在问 RGB，我在说的是在浏览器上放大时的字母边缘。我从未见过其他应用程序这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:24:12.053

这通常是一种抗锯齿技术，旨在使文本看起来不那么锯齿并且更清晰。在某些操作系统上，操作系统将允许您设置使用多少这种效果，因为它的有效性可能取决于显示器使用的技术和个人喜好。

Microsoft 将此技术称为 ClearType：http: [//support.microsoft.com/kb/306527](http://support.microsoft.com/kb/306527)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-12T22:21:35.120

根据我的理解，这种技术适用于单色点排列成列的显示器（因此，R 列，G 列，B 列）。

如果你想到白色和黑色区域之间的边缘，你会得到这样的东西（其中 dos 是一个不亮的点）：

```
RGBRGB...... 
```

现在，使最右边的子像素变暗将使感知边缘移动像素的 1/3。这就是移除单个组件而不是使所有三个组件部分变暗的主要好处——它提供了更清晰的边缘，而放置一个灰色像素会给人一种边缘更模糊的印象。

因此，移动步骤将像这样工作：

```
RGBRG.......
RGBR........
RGB......... 
```

这是可行的，因为无论最左边的亮色点是什么，总是存在所有三个连续的分量，只是顺序不同（RGB、GBR、BRG），这被认为是一个单一的白点。

# c#-4.0 - Nunit 2.6.2 Suite 运行两次而不是一次

> ID：13747959
> 
> 赞同：4
> 
> 时间：2012-12-06T16:22:29.220
> 
> 标签：c#-4.0, testing, msbuild, nunit

```
using System;
using System.Collections;
using NUnit.Framework;

namespace Tests.MyTest
{
public class SpikeSuite
{
    [Suite]
    public static IEnumerable Suite
    {
        get
        {
            var suite = new ArrayList
                {
                    new SpikeTest(),
                };
            return suite;
        }
    }
}

[TestFixture]
public class SpikeTest
{
    [SetUp]
    public void Setup()
    {
        Console.WriteLine("Test setup");
    }

    [TestFixtureSetUp]
    public void FixtureSetup()
    {
        Console.WriteLine("Test fixture setup");
    }

    [Test]
    public void TestMethod()
    {
        Console.WriteLine("Test method");
    }
} 
```

}

当我运行上述夹具时，我得到的输出是：

测试夹具设置

.测试设置

测试方法

测试夹具设置

.测试设置

测试方法

测试设置、夹具设置和测试方法被执行两次是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-16T12:50:00.527

检查您的测试项目是否未被另一个测试项目引用。在这种情况下，它将出现在两个 bin 文件夹中并运行两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T13:09:46.833

卸载 NUnit 测试适配器并重新安装为我解决了这个问题。

在 Visual Studio > Tools > Extensions and Updates > Remove NUnit Test Adapter 然后重新安装它

# javascript - 混淆 AJAX JSON 数据

> ID：13747960
> 
> 赞同：0
> 
> 时间：2012-12-06T16:22:28.840
> 
> 标签：javascript, ajax, json

我正在制作一个使用 AJAX 来检索由我的服务器上的 PHP 文件创建的一些 JSON 数据的 web 应用程序。不涉及身份验证，因此没有明确的方法可以阻止其他人调用 PHP 文件并在他们的网站上使用我的数据。

我至少想以某种方式混淆 JSON 数据，以阻止非专业程序员随意和机会主义地盗窃我的资源。混淆 JSON 数据的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:32:53.850

因为找到一个好的 JSON 解析器非常简单，只要你的 JSON 是有效的，它就会从你的 JSON 中巧妙地提取正确的信息，我认为很难从混淆中获得很多安全性。

如果你真的想这样做，也许最好的办法是在你的 JSON 中乱扔数据，这些数据被建模为*看起来*相关，但实际上只是垃圾/随机数据。至少这样，在您引入的所有“噪音”中，可能会让某人更难弄清楚有意义的数据是什么。

同样，为了有意义的安全性，您确实需要更传统的东西（身份验证+加密，真的），但如果您受限于无法这样做，那么这可能是最好的“可怜的安全”选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:32:23.970

有许多方法可以使您的数据更不方便使用，但这并不能真正帮助您提高安全性。您应该实现某种身份验证令牌。

# python - urllib2 urlopen 读取超时/阻塞

> ID：13747964
> 
> 赞同：3
> 
> 时间：2012-12-06T16:22:42.647
> 
> 标签：python, multithreading, web-crawler, urllib2

最近我正在开发一个小型爬虫，用于在 url 上下载图像。

我在 urllib2 中使用 openurl() 和 f.open()/f.write()：

这是代码片段：

```
# the list for the images' urls
imglist = re.findall(regImg,pageHtml)

# iterate to download images
for index in xrange(1,len(imglist)+1):
    img = urllib2.urlopen(imglist[index-1])
    f = open(r'E:\OK\%s.jpg' % str(index), 'wb')
    print('To Read...')

    # potential timeout, may block for a long time
    # so I wonder whether there is any mechanism to enable retry when time exceeds a certain threshold
    f.write(img.read())
    f.close()
    print('Image %d is ready !' % index) 
```

在上面的代码中，img.read()可能会阻塞很长时间，我希望在这个问题下做一些重试/重新打开图片url的操作。

我还关心上面代码的效率方面，如果要下载的图像数量有点大，使用线程池下载它们似乎更好。

有什么建议么？提前致谢。

ps 我发现img对象上的read()方法可能会导致阻塞，所以单独给urlopen()加个超时参数似乎没什么用。但我发现文件对象没有 read() 的超时版本。对此有什么建议吗？非常感谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:28:10.237

[`urllib2.urlopen`](http://docs.python.org/2/library/urllib2.html#urllib2.urlopen)有一个`timeout`用于所有阻塞操作（连接建立等）的参数

这个片段取自我的一个项目。我使用线程池一次下载多个文件。它使用`urllib.urlretrieve`但逻辑是相同的。`url_and_path_list`是`(url, path)`元组列表，是`num_concurrent`要生成的线程数，`skip_existing`如果文件系统中已经存在文件，则跳过文件下载。

```
def download_urls(url_and_path_list, num_concurrent, skip_existing):
    # prepare the queue
    queue = Queue.Queue()
    for url_and_path in url_and_path_list:
        queue.put(url_and_path)

    # start the requested number of download threads to download the files
    threads = []
    for _ in range(num_concurrent):
        t = DownloadThread(queue, skip_existing)
        t.daemon = True
        t.start()

    queue.join()

class DownloadThread(threading.Thread):
    def __init__(self, queue, skip_existing):
        super(DownloadThread, self).__init__()
        self.queue = queue
        self.skip_existing = skip_existing

    def run(self):
        while True:
            #grabs url from queue
            url, path = self.queue.get()

            if self.skip_existing and exists(path):
                # skip if requested
                self.queue.task_done()
                continue

            try:
                urllib.urlretrieve(url, path)
            except IOError:
                print "Error downloading url '%s'." % url

            #signals to queue job is done
            self.queue.task_done() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:29:12.347

[当您使用 urllib2.urlopen ()](http://docs.python.org/2/library/urllib2.html#urllib2.urlopen)创建 tje 连接时，您可以提供超时参数。

如文档中所述：

> 可选的 timeout 参数以秒为单位指定连接尝试等阻塞操作的超时时间（如果未指定，将使用全局默认超时设置）。这实际上只适用于 HTTP、HTTPS 和 FTP 连接。

有了这个，您将能够管理最大等待时间并捕获引发的异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T16:36:12.183

我抓取大量文档的方式是使用批处理器来抓取和转储恒定大小的块。

假设您要抓取一组预先知道的 100K 文档。您可以有一些逻辑来生成固定大小的 1000 个文档块，这些文档将由线程池下载。抓取整个块后，您可以在数据库中进行批量插入。然后继续处理另外的 1000 个文档，依此类推。

遵循这种方法可以获得的优势：

*   您可以利用线程池加快爬网速度。

*   它在某种意义上是容错的，您可以从上次失败的块继续。

*   您可以根据优先级生成块，即首先要抓取的重要文档。因此，如果您无法完成整个批次。重要的文件会被处理，不太重要的文件可以在下次运行时提取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-27T14:49:14.823

一个看起来有效的丑陋黑客。

```
import os, socket, threading, errno

def timeout_http_body_read(response, timeout = 60):
    def murha(resp):
        os.close(resp.fileno())
        resp.close()

    # set a timer to yank the carpet underneath the blocking read() by closing the os file descriptor
    t = threading.Timer(timeout, murha, (response,))
    try:
        t.start()
        body = response.read()
        t.cancel()
    except socket.error as se:
        if se.errno == errno.EBADF: # murha happened
            return (False, None)
        raise
    return (True, body) 
```

# php - 如果没有从数据库中找到记录，则回显消息

> ID：13747975
> 
> 赞同：0
> 
> 时间：2012-12-06T16:23:20.313
> 
> 标签：php

我创建了一个搜索框，它将从 MySQL 数据库中提取某些参数。如果没有出现参数导致回显文本通知用户没有匹配的参数可能很好，我需要将什么代码嵌入到以下代码中。

```
<?php
mysql_connect ("localhost", "root", "")  or die (mysql_error());
mysql_select_db ("store_location");

$term = $_POST['term'];

$sql = mysql_query("SELECT * FROM store_location where store_name like '%$term%' or     address like '%$term%' or city like '%$term%' or state like '%$term%' or zip like     '%$term%' or phone like '%$term%' or fax like '%$term%' or email like '%$term%' or url     like '%$term%' ");

echo '<h1>Search Results:</h1>';

while ($row = mysql_fetch_array($sql)){

echo 'Store Name: '.$row['store_name'];
echo '<br/> Address: '.$row['address'];
echo '<br/> City: '.$row['city'];
echo '<br/> State: '.$row['state'];
echo '<br/> Zip: '.$row['zip'];
echo '<br/> Phone: '.$row['phone'];
echo '<br/> Fax: '.$row['fax'];
echo '<br/> Email: <a href="mailto:'.$row['email'].'">'.$row['email'].'</a>';
echo '<br/> URL: <a href="'.$row['url'].'">'.$row['url'].'</a>';
echo '<br/><br/>';
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:49:11.997

要从表中获取记录数，您可以尝试以下代码：

```
<?php
$query = mysql_query("select count(*) as total from table_name");
$result = mysql_fetch_array($query);
echo $result['total'];
if( $result['total']==0)
{
echo "no records is found";
}else{
echo"numbers of records is=".$result['total'];
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:25:52.193

在该`while...`行之前添加：

```
if( mysql_num_rows($sql) == 0) echo "<p>No matches</p>"; 
```

[文档](http://php.net/mysql-num-rows)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T19:33:13.473

```
<?

$term = mysql_real_escape_string($_POST['term']); // sanitize input!
if ($sql = mysql_query('...')) { // mysql_* functions are deprecated, consider mysqli instead
    $count = mysql_num_rows($sql);
    echo "<h1>$count Result" . ($count == 1 ? '' : 's') . ' Found' . ($count ? ':' : '') . '</h1>';
    while ($row = mysql_fetch_array($sql)) {
        echo '...';
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T16:26:42.740

尝试这个。[mysql_num_rows](http://php.net/manual/en/function.mysql-num-rows.php)

```
if(mysql_num_rows($sql)){
    while ($row = mysql_fetch_array($sql)){
        echo 'Store Name: '.$row['store_name'];
        echo '<br/> Address: '.$row['address'];
        echo '<br/> City: '.$row['city'];
        echo '<br/> State: '.$row['state'];
        echo '<br/> Zip: '.$row['zip'];
        echo '<br/> Phone: '.$row['phone'];
        echo '<br/> Fax: '.$row['fax'];
        echo '<br/> Email: <a href="mailto:'.$row['email'].'">'.$row['email'].'</a>';
        echo '<br/> URL: <a href="'.$row['url'].'">'.$row['url'].'</a>';
        echo '<br/><br/>';
    }
}else{
    echo 'No results found';
} 
```

# java - 多行类路径的清单“无效头文件”

> ID：13747982
> 
> 赞同：0
> 
> 时间：2012-12-06T16:23:51.693
> 
> 标签：java, manifest

也许我错过了什么。

```
Manifest-Version: 1.0
Class-Path: lib/commons-lang-2.3.jar lib/commons-logging-1.1.1.jar lib/concar.jar lib/ini4j-0.5.2-SNAPSHOT.jar lib/javadbf-0.4.0.jar lib/log4j-1.2.16.jar lib/spring-asm-3.2.0.M1.jar lib/spring-beans-3.2.0.M1.jar
lib/spring-context-3.2.0.M1.jar lib/spring-context-support-3.2.0.M1.jar lib/spring-core-3.2.0.M1.jar 
lib/spring-expression-3.2.0.M1.jar lib/spring-orm-3.2.0.M1.jar lib/spring-oxm-3.2.0.M1.jar lib/spring-test-3.2.0.M1.jar 
lib/spring-tx-3.2.0.M1.jar lib/spring-web-3.2.0.M1.jar lib/spring-webmvc-3.0.5.RELEASE.jar lib/spring-webmvc-3.2.0.M1.jar 
lib/spring-ws-1.5.9-all.jar lib/swingx-1.6.1.jar lib/troughoasis.jar
Main-Class: mypackage.com.IniClass 
```

在 java jar 创建过程结束时，我收到此错误：“无效的头文件”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:18:18.150

我希望这是答案，但是在“类路径”处开始新行之前的两个空格可以解决问题。

```
Manifest-Version: 1.0 
Class-Path: lib/commons-lang-2.3.jar lib/commons-logging-1.1.1.jar lib/concar.jar lib/ini4j-0.5.2-SNAPSHOT.jar
  lib/javadbf-0.4.0.jar lib/log4j-1.2.16.jar lib/spring-asm-3.2.0.M1.jar lib/spring-beans-3.2.0.M1.jar lib/spring-context-3.2.0.M1.jar 
  lib/spring-context-support-3.2.0.M1.jar lib/spring-core-3.2.0.M1.jar lib/spring-expression-3.2.0.M1.jar lib/spring-orm-3.2.0.M1.jar
  lib/spring-oxm-3.2.0.M1.jar lib/spring-test-3.2.0.M1.jar lib/spring-tx-3.2.0.M1.jar lib/spring-web-3.2.0.M1.jar
  lib/spring-webmvc-3.0.5.RELEASE.jar lib/spring-webmvc-3.2.0.M1.jar lib/spring-ws-1.5.9-all.jar lib/swingx-1.6.1.jar lib/troughoasis.jar 
Main-Class: mypackage.com.IniClass 
```

# delphi - Delphi XE2无法一步构建构建服务器

> ID：13747983
> 
> 赞同：2
> 
> 时间：2012-12-06T14:38:57.713
> 
> 标签：delphi, build, delphi-xe2

Delphi 的最后几个版本中存在一个已知错误，它会在编译大型项目时导致内存泄漏，我认为它没有解决方法，如果我想知道的话。

但是，如果这只是一个没有解决方案的问题，那么如何为这种情况设计构建服务器呢？
我可能需要让构建服务器在构建之间重新启动并从它停止的地方重新开始，但这似乎很麻烦。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T16:26:29.823

这是一个影响 IDE 的错误，但不会影响构建服务器。这是因为构建服务器不调用 IDE。构建服务器使用命令行编译器来执行编译。

即使命令行编译器有这样的错误，它也可能不会影响构建服务器。这是因为每次构建服务器启动构建操作时，它都会创建一个新进程来执行构建。当单个构建完成时，该过程终止。因此，即使命令行编译器出现内存泄漏错误，也没有关系，因为一旦编译完成，进程就会终止，系统会重新占用内存。

# javascript - jQuery 和动态 ID

> ID：13747987
> 
> 赞同：0
> 
> 时间：2012-12-06T16:24:01.647
> 
> 标签：javascript, jquery, google-maps

我正在使用 gmap3 jQuery 插件渲染谷歌地图标记。我通过单击基于标记 ID 的菜单链接来触发标记弹出窗口，我可以使用此插件进行设置。

标记使用以下代码获取 ID（在 lat/long 和弹出文本旁边）：

```
{latLng:[46.055221,14.504265], data:"some text", id:"map-1"} 
```

使用此 jQuery 代码触发标记弹出窗口：

```
$('#maptrigger-1').live('click',function(){
    var marker = $('#googlemap').gmap3({ get: { id: 'map-1' } });
    google.maps.event.trigger(marker, 'click'); 
}); 
```

这个 HTML 代码：

```
<a href="#" id="maptrigger-1">click</a> 
```

我不想为每个标记/ID（map-1/maptrigger-1、map2/maptrigger2、map3/maptrigger3）重复 jQuery 代码，但到目前为止我还没有成功。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T16:31:14.263

您应该为可点击元素添加一个类

```
<a href="#" id="maptrigger-1" class="trigger">click</a> 
```

并使用

```
$('someParentOfAll.triggerElements').on('click','.trigger', function(){
    var mapid = 'map-' + this.id.split('-')[1],
        marker = $('#googlemap').gmap3({ get: { id: mapid } });

    google.maps.event.trigger(marker, 'click'); 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T16:25:33.137

使用**[以选择器开头的属性](http://api.jquery.com/attribute-starts-with-selector/)**

```
$('[id^="maptrigger"]').live('click',function(){ 
```

最好使用`.on()`as`.live()`附加事件`jQuery 1.7.0`

```
$('[id^="maptrigger"]').on('click',function(){ 
```

# asp.net-mvc - 是否可以在 IValidatableObject 方法中以强类型的方式指定字段名称？

> ID：13747989
> 
> 赞同：3
> 
> 时间：2012-12-06T16:24:12.963
> 
> 标签：asp.net-mvc, validation, lambda, data-annotations

在这种情况下是否可以使用某种强类型方式（lambda？）指定字段名称：

```
public class Demo : IValidatableObject
{
    public string DemoField {get; set;}

    IEnumerable<ValidationResult> IValidatableObject.Validate(ValidationContext validationContext)
    {
        if (<...>)
        {
            yield return new ValidationResult("Some validation message", new string[] { "DemoField" }); // <-- Here
        }
    }

} 
```

例如，当在字符串中指定字段名称时，它不能被重构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:50:16.577

我不知道任何“内置”方式。但是你可以使用 LINQ 表达式来做这样的事情：

```
Expression<Func<Demo, string>> lambda = (Demo d) => d.DemoField;
string demoFieldName = ((System.Linq.Expressions.MemberExpression)lambda.Body).Member.Name;
yield return new ValidationResult("Some validation message", new string[] { demoFieldName }); 
```

这样您就没有硬编码的字符串，并且重构将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-02T02:41:36.713

[在这里](https://stackoverflow.com/a/15396656/643761)阅读我对这个问题的回答：

[https://stackoverflow.com/a/15396656/643761](https://stackoverflow.com/a/15396656/643761)

你会像这样使用它：

```
yield return new ValidationResult("Some Error.", GetFieldNames(() => new object[] { this.DemoField })); 
```

# ruby-on-rails - 如何在 jquery ui 中固定 Div 可排序

> ID：13747994
> 
> 赞同：0
> 
> 时间：2012-12-06T16:24:38.853
> 
> 标签：ruby-on-rails, jquery-ui, jquery-ui-sortable

我在下面的 div 列表上应用 jquery sortable 是我的代码

```
 <div class="area_options">
                      <div class="area_top"><p>At the bar</p></div>
                      <div class="area_list"><p>Appetizers</p></div>
                      <div class="area_list"><p>Beverages</p></div>
                      <div class="area_list"><p>Cocktail</p></div>
                    </div> 
```

我想让 area_top div 固定，它是容器的标题。并且仅在 are_list div 的基础上应用可排序。

现在可排序工作正常，也适用于 area_top div。

我怎样才能使 area_top div 固定？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:28:57.627

您需要将`items`sortable() 的选项设置为`.area_list`

[这里](http://api.jqueryui.com/sortable/#option-items)的财产文件说：

> 指定元素内的哪些项目应该是可排序的。

编辑：使用您当前的 html，javascript 将是这样的：

```
$(".area_options").sortable({ items: ".area_list" }); 
```